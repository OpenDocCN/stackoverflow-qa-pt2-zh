# StackOverflow 问答 15153000-15153999

# node.js - 使用 node.js 运行 mqttjs 示例

> ID：15153000
> 
> 赞同：1
> 
> 时间：2013-03-01T07:52:11.660
> 
> 标签：node.js, mqtt

我正在尝试开始使用 node 和 mqtt，我发现这个非常好的 MQTT 协议库将它集成到 node.js。该库简称为 mqttjs：[https ://npmjs.org/package/mqttjs](https://npmjs.org/package/mqttjs)

我已经按照这个简单的指南设置了节点 js：[http](http://shapeshed.com/setting-up-nodejs-and-npm-on-mac-osx/) ://shapeshed.com/setting-up-nodejs-and-npm-on-mac-osx/并且在该示例中创建和启动的服务器工作正常.

我根据节点网站（`npm install mqttjs`）上的说明安装了 mqttjs 库。

在 mqttjs 库的文档中，他们说“ `examples/broadcast.js`”中有一个服务器示例。似乎已将其移至“ `examples/server/broadcast.js`”。我在运行这个例子时遇到了一些问题，服务器永远不会启动，最后抛出一个错误。这是我的终端的输出：

```
daniel$ pwd
/Users/daniel/test/node_modules/mqttjs/examples/server

daniel$ node broadcast.js 

/Users/daniel/test/node_modules/mqttjs/lib/parse.js:113
  packet.topic = topic_and_len[0];
                              ^
TypeError: Cannot read property '0' of null
    at Object.module.exports.publish (/Users/daniel/test/node_modules/mqttjs/lib/parse.js:113:31)
    at Connection.parse (/Users/daniel/test/node_modules/mqttjs/lib/connection.js:81:26)
    at Socket.EventEmitter.emit (events.js:88:17)
    at TCP.onread (net.js:397:14) 
```

我试过阅读文档，但它们似乎没有更新，我找不到关于如何运行库中给出的示例的参考。如果有人有这方面的经验，我会非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:35:39.720

您似乎正在尝试通过 Web 界面访问服务器。我以前有过这个问题:)

运行此命令：

```
node orig.js 
```

然后在另一个终端窗口中，从客户端文件夹运行此命令：

```
node client_test.js 
```

它应该开始 ping 服务器

# java - Primefaces 选择列表数据未从源传输到目标

> ID：15153003
> 
> 赞同：1
> 
> 时间：2013-03-01T07:52:17.490
> 
> 标签：java, xhtml, primefaces

我在 java web 应用程序中使用了一个pickList。但是当我测试它的值并没有移动到目标列表时。我单独做了这个，它工作得很好。然后我复制了代码并将其粘贴到我的原始页面中，但它不起作用我不明白为什么需要帮助

这是我的工作 xhtml 代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>Mobitel - IPP - Areas</title>
</h:head>
<h:body>
    <h:form>
       <p:tabView id="areas_TV" activeIndex="1">  
            <p:tab id="create_area_T" title="Create">      
                <p:growl id="msg" showDetail="true" escape="false" />
                <h3 style="margin-top:0">Basic PickList</h3>
                <p:pickList id="pickList" value="#{a_Area1.addResorcesipList}" var="city" 
                itemLabel="#{city}" itemValue="#{city}" />
                <p:commandButton id="citySubmit" value="Submit" 
                update="displayCities" oncomplete="cityDialog.show()" style="margin-top:5px"/>
                <p:dialog modal="true" showEffect="fade" hideEffect="fade" widgetVar="cityDialog">
                    <h:panelGrid id="displayCities" columns="2">
                        <h:outputText value="Source: " style="font-weight:bold"/>
                        <ui:repeat value="#{a_Area1.addResorcesipList.source}" var="item">
                            <h:outputText value="#{item}" style="margin-right:5px" />
                        </ui:repeat>

                        <h:outputText value="Target: " style="font-weight:bold"/>
                        <ui:repeat value="#{a_Area1.addResorcesipList.target}"var="item">
                            <h:outputText value="#{item}" style="margin-right:5px" />
                        </ui:repeat>
                    </h:panelGrid>
                </p:dialog>
            </p:tab>
       </p:tabView>
    </h:form>
</h:body> 
```

我用标签复制了这个并粘贴在原始文件中，但没有工作，这是原始文件：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>Mobitel - IPP - Areas</title>
</h:head>
<h:body>
    <p:layout fullPage="true" id="layout">  

        <p:layoutUnit position="north" size="20%" resizable="false">
            <h:form id="TopMenuBarItems_F">
                <p:menu  id="TopMenuBar"> 
                    <f:facet name="aaa">
                        <h:form id="topform">
                            <p:menuButton id="logout_MBtn" value="Logout" style="margin-right:10px"/>
                        </h:form>                            
                    </f:facet>                                             
                </p:menu> 
            </h:form>

        </p:layoutUnit>  
        <p:layoutUnit position="center">  

            <h:form id="tabMenuItems_F">

                <p:tabMenu activeIndex="2">
                    <p:menuitem id="instance_M" value="Instance" url="/faces/A_Instance.xhtml"/>
                    <p:menuitem id="resources_M" value="Resources" url="/faces/A_Resources.xhtml"/>
                    <p:menuitem id="areas" value="Areas" url="/faces/A_Areas.xhtml"/>
                    <p:menuitem id="subnets_M" value="Subnets" url="/faces/A_Subnet.xhtml"/>
                    <p:menuitem id="vlsm" value="VLSM" url="/faces/A_VLSM.xhtml"/>
                    <p:menuitem id="ipAddress" value="IP Address" url="/faces/A_IP_Address.xhtml"/>

                    <p:menuitem id="logout_MBtn" value="Logout" icon="ui-icon-extlink" style="margin-right:10px"/>
                </p:tabMenu>

                <p:tabView id="areas_TV" activeIndex="1"> 

                    <p:tab id="create_area_T" title="Create">
                        <p:growl id="msg2"/>
                        <h:panelGrid columns="2" cellpadding="10">
                        <h:outputText value="AreaName :"/>
                        <p:inputText id ="areaNAme_Tbx" value="#{a_Area1.areaName}"  />
                        <h:outputText value="Instance :"/>
                        <p:selectOneMenu id="suburbs" value="#{a_Area1.selectedInstanceId}"  >  
                                <f:selectItem itemLabel="Select instance" itemValue="" />  
                                <f:selectItems value="#{a_Area1.instanceList}" />  

                            <p:ajax event="change" update=":tabMenuItems_F:areas_TV:msg2,:tabMenuItems_F:areas_TV:pickList"   
                listener="#{a_Area1.setIpSource2(a_Area1.selectedInstanceId)}"/>  

                        </p:selectOneMenu>
                        </h:panelGrid>
                        <h:outputText value="Resources :"/>                            

                        <p:pickList id="pickList" value="#{a_Area1.ipList}" var="ip" 
            itemLabel="#{ip}" itemValue="#{ip}" />

                        <p:commandButton id="citySubmit" value="Submit" update=":tabMenuItems_F:areas_TV:msg2" action="#{a_Area1.createArea()}"  style="margin-top:5px"/> 
```

```
 <h:panelGrid id="displayCities" columns="2">
        <h:outputText value="Source: " style="font-weight:bold"/>
        <ui:repeat value="#{a_Area1.ipList.source}" var="item">
            <h:outputText value="#{item}" style="margin-right:5px" />
        </ui:repeat>

        <h:outputText value="Target: " style="font-weight:bold"/>
        <ui:repeat value="#{a_Area1.ipList.target}" var="item">
            <h:outputText value="#{item}" style="margin-right:5px" />
        </ui:repeat>
    </h:panelGrid>
</p:dialog>
                                                 -->
               </p:tab>
                       <p:tab id="view_area_T" title="View">
                     <h:panelGrid columns="1" cellpadding="10">                            
                         <h:form id="area_Tbl">
                                <p:dataTable id="Area_dataTable" var="area" value="#{a_Area1.areaList}" editable="true">  

                                    <p:ajax event="rowEdit" listener="#{a_Area1.onEdit(area)}" />

                                    <p:column id="areaName_Clm" filterBy="#{area.areaName}"    
                                    headerText="Area Name" filterMatchMode="startsWith" >
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText value="#{area.areaName}" />
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputText value="#{area.areaName}"/>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>

                                    <p:column id="InstanceName_Clm" filterBy="#{area.areaName}"    
                                    headerText="Area Name" filterMatchMode="startsWith" >
                                        #{area.instanceName}
                                    </p:column>

                                    <p:column style="width:6%">  
                                        <p:rowEditor/>
                                    </p:column>

                                    <p:column style="width:20%" headerText="Delete Area">  
                                        <p:commandLink id="delete_btn" value="Delete"  actionListener="#{a_Area1.deleteArea(area)}" 
                                                       update=":tabMenuItems_F:areas_TV:area_Tbl:Area_dataTable:" 
                                        process=":tabMenuItems_F:areas_TV:area_Tbl:Area_dataTable:">
                                            <p:collector value="#{area}" removeFrom="#{a_Area1.areaList}" />
                                        </p:commandLink>
                                    </p:column>
                                </p:dataTable> 
```

showEffect="fade" hideEffect="explode" modal="true">

```
 <h:panelGrid id="display" columns="2" cellpadding="4" style="margin:0 auto;">  

                                        <h:outputText value="Resource IP"/>

                                        <p:dataList value="{a_Area1.selectedRow.resourceList}" var="resource" itemType="disc">  
                                                          {resource}  
                                        </p:dataList>  

                                    </h:panelGrid>  

                               </p:dialog>                                  
                                    -->
                            </h:form>
                        </h:panelGrid>  

                    </p:tab> 

                 <p:tab id="edit_resorce_area_T" title="Edit Resource">
                    <h3 style="margin-top:0">Basic PickList</h3>

<p:pickList id="pickList1" value="#{a_Area1.addResorcesipList}" var="city" 
            itemLabel="#{city}" itemValue="#{city}" />

<p:commandButton id="citySubmit1" value="Submit" update="displayCities" oncomplete="cityDialog.show()" style="margin-top:5px"/>

<p:dialog modal="true" showEffect="fade" hideEffect="fade" widgetVar="cityDialog">

    <h:panelGrid id="displayCities" columns="2">
        <h:outputText value="Source: " style="font-weight:bold"/>
        <ui:repeat value="#{a_Area1.addResorcesipList.source}" var="item1">
            <h:outputText value="#{item1}" style="margin-right:5px" />
        </ui:repeat>

        <h:outputText value="Target: " style="font-weight:bold"/>
        <ui:repeat value="#{a_Area1.addResorcesipList.target}" var="item1">
            <h:outputText value="#{item1}" style="margin-right:5px" />
        </ui:repeat>
    </h:panelGrid>

</p:dialog>
                  </p:tab>
               </p:tabView>

            </h:form>
        </p:layoutUnit>  
    </p:layout>
</h:body> 
```

第一个选项列表有效，而编辑资源选项卡中的第二个选项有问题..

这是java文件：

```
 private List<String>addResourceIpSource = new ArrayList<String>();
    private List<String>addResourceIpTarget = new ArrayList<String>();
    private DualListModel<String> AddResorcesipList;
        public void setIpSource() throws SQLException, ClassNotFoundException{

    String q = "SELECT * FROM ipp.resource;";
        ResultSet result = DB_Access.getData(q);

        while(result.next()){
            resourceRow r = new resourceRow();
            r.setIpAddress(result.getString(1));
            addResourceIpSource.add(result.getString(1)); 

        }
  //ipSource.add("select resource for perticuler instance.."); 
    // ipList = new DualListModel<String>(ipSource, ipTarget);
     AddResorcesipList = new DualListModel<String>(addResourceIpSource, addResourceIpTarget);
} 
```

函数在类构造函数中被调用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:53:04.547

我以前也有类似的问题。跟随 using 一开始并不会发出警报，但它可能会使 primeface 逻辑混乱。不要像下面这样使用。

```
<h:form>
<h:form></h:form>
</h:form> 
```

# image - 在登录按钮上使用图像

> ID：15153005
> 
> 赞同：1
> 
> 时间：2013-03-01T07:52:24.687
> 
> 标签：image, button, login

我有以下代码示例 login.php：

```
<html>
<head>
<title>Modul 15 - Membuat Otentikasi User</title>
</head>
<body>
<h2>Form Login</h2>
Anda belum terdaftar sebagai user ?
[ <a href="register.php">Daftar sekarang</a>]
<br /><br />
<form action="do_login.php" method="post">
<table>
<tr>
    <td>ID User</td>
    <td><input type="textfield" name="id" maxlength="15" size="25" /></td>
</tr>
<tr>
    <td>Password</td>
    <td><input type="password" name="pwd" maxlength="15" size="25" /></td>
</tr>
<tr>
    <td>&nbsp;</td>
    <td><input type="image" src="login_btn.png" name="login" /></td>
</tr>
</table>
</form>
</body>
</html> 
```

以及处理登录过程的代码为do_login.php：

```
<html>
<head>
<title>Modul 15 - Membuat Otentikasi User</title>
</head>
<body>
<?php
if (isset($_POST['login'])) 
{
$id = $_POST['id'];
$pwd = $_POST['pwd'];
$database = "dbxxxxxx";
$hostname = "172.xx.xx.xx";
$port = "50000";

$conn_string = "DRIVER={IBM DB2 ODBC DRIVER};DATABASE=$database;" .
"HOSTNAME=$hostname;PORT=$port;PROTOCOL=TCPIP;UID=$id;PWD=$pwd;";
$conn = db2_connect($conn_string, '', '');
if ($conn) 
{
    echo "Connection succeeded.";
    db2_close($conn);
}
else 
{
    echo "Connection failed.";
}
}
else
{
echo "Login variable not set !!!";
}
?>
</body>
</html> 
```

代码总是返回“**未设置登录变量！！！** ”。为什么会这样？我的代码有问题吗？有人能帮助我吗 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T07:54:04.330

之所以返回这是因为您实际上并未发布“登录”，因为它没有值 - 尝试添加`value="1"`到图像按钮。此外，它不是`input type="textfield"`而是`input type="text"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T07:14:16.457

当您使用

```
 <input type="image" name="login"> 
```

实际上发送了2个参数，分别是login_x和login_y

我试过更换

```
if (isset($_POST['login'])) 
```

使用：

```
if(isset($_POST['login_x'], $_POST['login_y'])) 
```

它工作得很好！你可以在这里阅读更多内容：[Can't find an input type=image value in $_POST](https://stackoverflow.com/questions/5681837/cant-find-an-input-type-image-value-in-post)

# google-ads-api - 谷歌再营销动态变量

> ID：15153007
> 
> 赞同：0
> 
> 时间：2013-03-01T07:52:49.900
> 
> 标签：google-ads-api, google-tag-manager

我有一个页面，在该页面上我使用 AJAX 生成新元素和数据。再营销代码仅在页面加载时触发的问题......我希望它稍后在使用 AJAX 生成数据并在 google_custom_params 中发送该数据时触发它。

我在谷歌标签管理器的帮助下尝试了它，但它没有正常工作。

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T16:10:02.257

在 Google 跟踪代码管理器中，您可以创建具有触发规则的代码，以侦听页面已加载之外的事件。

例如，您可以创建一个标签，该标签`{{event}} equals foo`在您加载 AJAX 页面时触发，执行 a `dataLayer.push({"event":"foo", ... })`，它调用该标签。

一种简单的测试方法是创建一个包含自定义 html 的标签，该 html 输出`console.log` 例如。

```
<script type="text/javascript">
console.log('omg it works');
</script> 
```

# macos - 从图 kAudioUnitSubType_GenericOutput 中提取音频数据

> ID：15153008
> 
> 赞同：3
> 
> 时间：2013-03-01T07:52:59.087
> 
> 标签：macos, core-audio

我正在构建音频图，它具有：AudioFilePlayer (Generator unit) -> GenericOutput (Output unit)

基本思想：

AudioFilePlayer 正在为其输出生成音频帧。通用输出从 AudioFilePlayer 的输出中获取数据作为输入。比我可以获取该数据并将其保存到其他缓冲区。

我的问题是如何从通用输出中提取数据以获取离线渲染的数据。

我对其进行了一些研究，发现我必须在 GenericOutput 单元上使用 AudioUnitRender 才能从中提取音频数据。

```
Uint32 frames = 512;
timestamp.mSampleTime = 0;

... While Loop ...

timestamp.mFlags = kAudioTimeStampSampleTimeValid;

bufferList.mNumberBuffers = 1;
bufferList.mBuffers[0].mNumberChannels = param->inputFormat.mChannelsPerFrame;
bufferList.mBuffers[0].mDataByteSize = frames * param->inputFormat.mChannelsPerFrame * sizeof(float);
bufferList.mBuffers[0].mData = NULL;

AudioUnitRenderActionFlags flags = 0;

OSStatus error = noErr;
if ((error = AudioUnitRender(param->genericOutput, &flags, &timestamp, 0, frames, &bufferList)) != noErr)
{
    printf("Cannot AudioUnitRender: %d\n", error);
}

timestamp.mSampleTime += frames; 
```

**但我得到数字-50的错误。**

我是否设置输入参数错误？我是否需要向 GenericOutput 单元注册任何渲染回调函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T11:17:33.830

问题是我在调用 AUGraphInitialize() 后设置了 GenericOutput StreamFormat。必须在那之前完成。

我使用 CAShow(reader.graph) 来获取音频图的日志，这有助于我注意到格式在尝试设置后没有改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:32:13.910

希望您使用 node.js 成功完成离线渲染`GenericOutput`。您能否详细说明您是如何做到这一点的。

*   您正在尝试循环传递一个没有数据的缓冲区列表。
*   如果我们需要将输出保存到文件中，我必须做什么（或放在哪里`ExtAudioFileWriteAsync`）。
*   您的 while 循环的退出条件是什么。

*   is`timestamp`是一个局部声明的变量。

# c# - 如何检查我的网站是否在 asp.net c# 的远程连接中打开？

> ID：15153013
> 
> 赞同：0
> 
> 时间：2013-03-01T07:54:01.970
> 
> 标签：c#, asp.net, remote-desktop

如何检查我的网站是否在远程连接中打开？

我目前正在使用

```
if (System.Windows.Forms.SystemInformation.TerminalServerSession == true)
{
     terminal = "1";
}
else
{
     terminal = "0";
} 
```

它在 localhost 中运行良好，但是当我发布我的网站时，我总是得到 0，即使我使用远程桌面连接也是如此。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:02:00.883

您的代码*在服务器上*运行。那么它返回关于哪台计算机的信息呢？关于*服务器*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:21:15.427

在*Intranet*场景中，如果主机正在运行*任何*远程会话，您*可能会*阻止来自主机的访问。但是，这也会阻止同时在物理上使用同一台机器的无辜用户。

 *为了做到这一点，你必须 P/Invoke [`WTSEnumerateSessions`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa383833%28v=vs.85%29.aspx)，已经[`WTSOpenServer`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa383837%28v=vs.85%29.aspx)编辑了客户端机器（基于 报告的远程地址`Request`。然后，如果有任何`pWinStationName`以外的`console`和`services`，那么在该机器上运行一个远程会话。但是我无法想到将会话和请求关联起来 - 所以你所能做的（正如我在一开始所说的那样）就是在机器运行*任何*远程会话时阻止来自机器的*所有访问。*

 *请注意，您需要相当多的权限才能运行此类代码 - 最好将其隔离到在特权帐户下在您的服务器上运行的单独服务中，而不是授予对您的帐户的访问权限ASP.Net 代码下运行。**

# java - 使用 IdClass 连接表

> ID：15153025
> 
> 赞同：1
> 
> 时间：2013-03-01T07:54:57.850
> 
> 标签：java, hibernate, jpa, join

在我的项目中，实体结构如下。

```
public class FriendId {
    private String profileFrom;
    private String profileTo;
    ...
} 
```

对于用作 PK 的 Friend 实体 - FriendId。

```
@Entity
@Table(name = "FRIEND")
@IdClass(FriendId.class)
public class Friend {
    @Id
    @ManyToOne
    @JoinColumn(name = "PROFILE_UUID_1", nullable = false)
    private Profile profileFrom;

    @Id
    @ManyToOne
    @JoinColumn(name = "PROFILE_UUID_2", nullable = false)
    private Profile profileTo;

    ...
} 
```

问题是我不能加入该方法`findFriendsByUser`。

```
public List<User> findFriendsByUser(String userUuid) {
    CriteriaBuilder builder = getEntityManager().getCriteriaBuilder();
    CriteriaQuery<User> query = builder.createQuery(User.class);
    Root<User> userRoot = query.from(User.class);
    Join<User, Profile> profileJoin = userRoot.join(PROFILES);
    Join<Profile, Friend> friendsJoin = profileJoin.join(FRIENDS);
    Join<Friend, Profile> profileFriendsJoin = friendsJoin.join(PROFILE_TO);
    Join<Profile, User> userFriendsJoin = profileFriendsJoin.join(USER);
    Predicate userPredicate = builder.equal(userFriendsJoin.get(UUID), userUuid);
    query.select(userRoot).where(userPredicate);
    return getEntityManager().createQuery(query).getResultList();
} 
```

我抓住了这个例外：

```
java.lang.RuntimeException: java.lang.IllegalArgumentException: Unable to resolve attribute [profileTo] against path [null] 
```

使用注解@Embeddable 的唯一解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:19:03.687

看看：[http ://docs.oracle.com/javaee/5/api/javax/persistence/IdClass.html](http://docs.oracle.com/javaee/5/api/javax/persistence/IdClass.html)

```
The names of the fields or properties in the primary key class and the primary key fields or properties of the entity must correspond and their types must be the same 
```

这里不是这样，类型不同！

# c# - 将 ComponentResourceManager 与动态加载的程序集一起使用

> ID：15153026
> 
> 赞同：0
> 
> 时间：2013-03-01T07:55:00.587
> 
> 标签：c#

我创建了一个类来管理动态派生的资源`ComponentResourceManager`：

```
public class MyResourceManager : ComponentResourceManager
{
    public MyResourceManager(Type _t, Langue _lang) : base(_t)
    {
        if (_lang == Langue.French)
        {
            MainAssembly = Assembly.LoadFile("c:/myCustomFolder/french.dll");
        }
        else
        {
            MainAssembly = Assembly.LoadFile("c:/myCustomFolder/english.dll");
        }
    }
} 
```

当我尝试将资源应用于我的控件时，会引发异常

```
public static void UpdateLanguage(Control c, Langue _lang)
{
    MyResourceManager language = new MyResourceManager(c.GetType(), _lang);
    language.ApplyResources(c, c.Name);
} 
```

**引发异常：（**调用 ApplyResources 时）

> mscorlib.dll 中出现“System.Resources.MissingManifestResourceException”类型的未处理异常

附加信息：找不到适合指定文化或中性文化的任何资源。确保“MyAppName.MyFormName.resources”在编译时被正确嵌入或链接到程序集“MyAppName.resources”中，或者所有所需的附属程序集都是可加载的并且是完全签名的。

你有想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:12:46.987

最常见的原因是您在创建资源文件后更改了命名空间名称，或者资源文件的构建操作未设置为嵌入式资源。

# javascript - 访问 google+ 用户个人资料照片

> ID：15153030
> 
> 赞同：0
> 
> 时间：2013-03-01T07:55:29.817
> 
> 标签：javascript, google-api, google-plus

我正在尝试获取用户的 g+ 个人资料照片。在 javascript 中，我将数据范围设置如下：

```
data-scope="https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.image" 
```

但是，“ [https://www.googleapis.com/auth/userinfo.image](https://www.googleapis.com/auth/userinfo.image) ”是无效范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:35:38.590

您实际上不需要`userinfo.profile`-`plus.login`包括从用户的个人资料中获取所有公共信息的权限，包括他们的照片。简单地更换`userinfo.image`就可以了。

Google+ 的所有范围都记录在这里：[https ://developers.google.com/+/api/oauth](https://developers.google.com/+/api/oauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:33:59.537

范围是[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

有关详细信息，请参阅[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T13:32:30.013

按照[链接](https://developers.google.com/+/api/latest/people/list#try-it)

使用资源 image.url 你会得到你的答案

# ios - UITabBarController 中的 UIPopoverController 只工作一次

> ID：15153032
> 
> 赞同：1
> 
> 时间：2013-03-01T07:55:39.357
> 
> 标签：ios, ipad, uipopovercontroller

现在我正在开发一个 iPad 应用程序，其中有`UITabBarController`9 个视图控制器和 9 个`UITabBarItems`。当我单击一个名为“ET”的项目时，a`UIPopoverController`出现在上方`UITabBarItem`，第一次一切正常，在我单击弹出框外的其他地方使其消失后，然后我再次单击“ET”它不起作用. 经过一些调试，我发现应该在 popover 控制器中显示的视图控制器已从 中删除`UITabBarController.viewcontrollers`，现在`UITabBarController`只有 8 个视图控制器。我不知道我在哪里删除它，这是我显示弹出控制器的代码

```
-(void) PopViewController:(UIViewController*)pVC rect:(CGRect)rect type:(int)nType
{
if (pVC == NULL)
    return;

[self PushViewController:NULL type:0];
 GTJAMyNavigatorViewController*  navigationController = [[GTJAMyNavigatorViewController alloc] initWithRootViewController:pVC];
[navigationController setNavigationBarHidden:YES animated:NO ];
if ([pVC isKindOfClass:[TZTUIETViewController class]]) {
self.popoverVC = [[UIPopoverController alloc] initWithContentViewController:navigationController];
}

self.popoverVC.delegate = self;
[navigationController setPopover:self.popoverVC];
[self.popoverVC presentPopoverFromRect:rect
                           inView:self.view
         permittedArrowDirections:UIPopoverArrowDirectionDown
                         animated:YES];

NSLog(@"%d",[self.popoverVC retainCount]); 
```

}

这是解除委托方法的代码

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
if (self.popoverVC && self.popoverVC == popoverController)
{
    [((TZTUITabBar*)self.tabBar) UndoSelect];

    [self.popoverVC release];
    self.popoverVC = NULL;
}
 NSLog(@"%d",[self.popoverVC retainCount]);

return; 
```

}

我已经让 self.popoverVC 强大的属性，所以有人可以帮忙吗？谢谢 ！

# asp.net-mvc - ASP.NET MVC 4 - WebGrid。编辑后如何保留页面

> ID：15153039
> 
> 赞同：3
> 
> 时间：2013-03-01T07:56:32.567
> 
> 标签：asp.net-mvc, webgrid

我在我的项目中使用 WebGrid，我已经实现了分页/编辑和删除选项。目前，当我删除和编辑项目时，我将返回第一页。

但是，我想在同一页面返回（返回列表）。你知道我该怎么做吗？

**查看代码**

```
 <div id="grid">

@{
    var grid = Html.Grid(Model, rowsPerPage: 20, defaultSort: "LanguageID");

  }

@grid.GetHtml(
tableStyle:"table",
alternatingRowStyle:"alternate",
selectedRowStyle:"selected",
headerStyle:"header",
columns:grid.Columns(
grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { localizationID = item.ID, languageID = item.LanguageID })),
grid.Column("Description",header:"Language"),
grid.Column("ParameterName", header:"Parameter name"),
grid.Column("Name",header:"Original (English)", format: item => Html.Raw(item.Name)),
grid.Column("TranslationText",
header:"Translation", format: item => Html.Raw(item.TranslationText))))

</div> 
```

**控制器**

```
public ActionResult Index()
{
    translations = _translationService.GetByCulture(valueLanguage);

    return View(translations);
}

[HttpPost]
public ActionResult Edit(Translation model)
{
    if (ModelState.IsValid)
    {
        _translationService.Update(model);
        return RedirectToAction("Index","Translation");     
    }

    retrun View(model);
} 
```

比你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-10T13:00:22.977

这是一个迟到的答案，但它可能对某人有所帮助。

如果ajax调用成功，而不是返回`ActionResult`，那么我们可以将文本框或输入控件值绑定到网格

例如

```
WebGrid companyGrid = new WebGrid(Model, rowsPerPage: 5, ajaxUpdateContainerId: "companyGrid");

   @companyGrid.GetHtml(columns: companyGrid.Columns(companyGrid.Column("CompanyID", "Company ID"),
    companyGrid.Column("CompanyName", "Company Name", format: @<text><input id="companyNameTxt" type="text" class="edit-mode" value="@item.CompanyName" /><span class="display-mode" id="companyNameLbl">@item.CompanyName</span></text>),
    companyGrid.Column("Action", format: @<text><button class="edit-user display-mode">Edit</button> <button class="save-user edit-mode">Save</button><button class="cancel-user edit-mode">Cancel</button></text>))) 
```

中`webgrid`，公司名称栏有2个元素，一个是`companyNameTxt`文本框，另一个是`companyNameLbl`span

Ajax保存按钮功能

```
 $('.save-user').on('click', function () {

        var tr = $(this).parents('tr:first');
        var companyName = tr.find("#companyNameTxt").val();

        var UserModel =
        {
            "ID": 1,
            "companyName": companyName,
        };
        $.ajax({
            url: '/Home/EditGrid',
            data: JSON.stringify(UserModel),
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            success: function () {
                tr.find("#companyNameLbl").html(companyName);
                tr.find('.edit-mode, .display-mode').toggle();
            }
        });
    }); 
```

编辑后，只需将文本框值赋给标签即可。然后它将保留在同一页面中。如果结果成功，那么数据将保存到数据库中

控制器

```
public void EditGrid(int ID, string companyName)
{
   // Code for editing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T11:05:47.397

我有同样的问题，我试过这个：

我在 ViewBag 中添加了一个参数来保存页面，并将页面值发送到编辑方法，因此当我返回时页码仍然存在。它是这样的：

1）在索引方法中，您必须保存当前页面：

```
public ActionResult Index(string page)
{
    ViewBag.Page=page;
    translations = _translationService.GetByCulture(valueLanguage);

    return View(translations);
} 
```

2 因此，当您单击编辑时，页面将随数据一起移动：

```
grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { 
localizationID = item.ID, languageID = item.LanguageID, page=ViewBag.page })), 
```

3 然后在编辑方法进入控制器设置 ViewBag.page 与当前页面再次像这样：

```
[HttpPost]
public ActionResult Edit(Translation model, string page)
{

    ViewBag.lst = page;
    if (ModelState.IsValid)
    {
        _translationService.Update(model);
        return RedirectToAction("Index","Translation");     
    }

    retrun View(model);
} 
```

如果您需要在其他视图中执行此操作，只需在其他控制器方法中重复编辑步骤即可。

# ibm-mobilefirst - Worklight JSONStore initCollection 错误

> ID：15153041
> 
> 赞同：0
> 
> 时间：2013-03-01T07:56:36.080
> 
> 标签：ibm-mobilefirst, jsonstore

环境：

*   工作灯 v5.0.5

当我使用字符开头`digit(ex. 0, 9)`或`_`作为集合名称时， `PERSISTENT_STORE_FAILURE`发生错误。

如下代码

```
var name = '0aaa';
WL.JSONStore.initCollection(name, searchfields, [options]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:08:24.133

您需要以字母 [AZ]+ 或 [az]+ 开头 JSONStore 集合。例如：`aaa`而不是`0aaa`. 我已经打开了一个错误来研究允许集合以数字和符号开头，以便在 JSONStore 的未来版本中使用。

# linux - 读取文件第一列的 csv 并使用 UNIX shell 脚本在文件系统上搜索与第一列中的值相同的目录

> ID：15153042
> 
> 赞同：0
> 
> 时间：2013-03-01T07:56:58.307
> 
> 标签：linux, shell, csv

我有一个包含多列的 CSV 文件。

但我想使用**LINUX shell 脚本**读取这个 CSV 文件，仅用于标题为**Key的****第一列**，其下有值

 **```
TST-1, TST-2, ..., PROJ-1,PROJ-2,.... 
```

选择第一个值 - TST-1，我需要检查目录 /opt/usr/tomcat/home/data/attachments/ 下是否有任何名为**TST-1的子目录。**如果是，那么我想将此目录移动到备份设备。同样对于第一列**Key下的剩余值**

**我可以通过在 Linux 中使用find**和**rsync**命令来移动目录而不使用 CSV 文件，但是我得到的数据存储在 CSV 文件中，我对使用 Linux shell 脚本读取 CSV 非常不熟悉

任何人都可以帮我解决这个问题！

谢谢，纳伦德拉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:02:43.990

尝试这样做：

```
value=$(awk -F, 'NR>2{print $1}' file.csv)
if [ -d "/opt/usr/tomcat/home/data/attachments/$value" ]; then
    mv "/opt/usr/tomcat/home/data/attachments/$value" backup_drive
fi 
```

注意：如果你`CSV`很简单，那没关系，但如果它有一些值，比如`"aa,aa", xxx, zzz`, 更好地使用`perl`，`ruby`或者`python`使用*CSV 解析器***

# iphone - App 进入前台时调用 self.viewDidAppear

> ID：15153044
> 
> 赞同：2
> 
> 时间：2013-03-01T07:57:05.753
> 
> 标签：iphone, ios, objective-c, xcode

当用户将应用程序带到前台时，我想让我的应用程序再次调用 viewDidAppear。

```
- (void)appReturnsActive{

    //THIS IS THE BIT THAT DOESNT WORK, BUT [self.viewDidLoad] DOES WORK
    [self.viewDidAppear];
} 
```

我正在像这样在我的 viewDidAppear 方法中创建 appReturnsActive 。它运作良好：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
selector:@selector(appReturnsActive) name:UIApplicationDidBecomeActiveNotification 
object:nil]; 
```

我可以做self.viewDidLoad，但我不能选择viewDidAppear。有谁知道我怎样才能让它工作？

谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T08:00:42.553

你只是说错了。它应该是

```
[self viewDidAppear:YES]; 
```

但是，永远不应该调用这个或任何 viewDidLoad、viewWillAppear 等。将要运行的代码放在`viewDidAppear:(BOOL)`单独的方法中并调用该方法。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T08:00:40.533

你试过了吗`[self viewDidAppear:YES]`？`[self viewDidAppear:NO]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T09:15:48.997

使用容器 API 时，使用[`– beginAppearanceTransition:animated:`](https://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/beginAppearanceTransition:animated:)and `– endAppearanceTransition`：

> 如果您正在实现自定义容器控制器，请使用此方法告诉孩子它的视图即将出现或消失。不要直接调用 viewWillAppear:、viewWillDisappear:、viewDidAppear: 或 viewDidDisappear:。

调用 addSubView 会自动触发`viewWillAppear:`，`viewDidAppear:`如果视图的 viewController 是子视图控制器，`viewWillAppear:`直接调用会触发两次 view will appearance 方法。使用 beginAppearanceTransition:animated: `and`– endAppearanceTransition` 将抑制自动行为，因此您只会调用一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T08:06:06.157

每次视图可见时都会自动调用该方法`viewDidAppear:`，无需您自己调用。如果您需要从其他地方运行此方法的一些代码，我建议您添加一个包含这些指令的新方法。`viewDidAppear:`还将执行可能会影响性能的视图相关操作。所有的方式，如果你需要调用它，你缺少`BOOL`参数，请参阅[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidAppear%3a)。

# android - 带有多个文本和图像的按钮

> ID：15153045
> 
> 赞同：-3
> 
> 时间：2013-03-01T07:57:18.257
> 
> 标签：android, android-layout

我想设计一个 xml &，因为我想要按钮上的 2 个文本视图和 1 个图像。我尝试了框架布局和相对布局，但它不起作用。请帮助我。一个文本视图应该在按钮的左上角，图像在右上角，另一个文本视图在中心第一个文本视图是距离，另一个是速度，我将距离和速度存储在数据库中。我想在按钮上显示距离和速度的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:13:03.143

我认为最简单的方法是制作一张包含所有文本和图像的图片，然后将其作为图像放入`imageButton`

**编辑**

然后使用`RelativeLayout`并使其`android:clickable="true"`充当按钮。

# django - django-rest-framework http 在 django 1.5 上使用 415 失败

> ID：15153048
> 
> 赞同：44
> 
> 时间：2013-03-01T07:57:45.660
> 
> 标签：django, django-rest-framework

我正在为 REST API 使用 django-rest-framework（最新），并使用内置的测试客户端在 django 中实现了一些测试用例。

以下 django 测试用例在 django 版本 < 1.5 下运行良好

```
self.client.put('/core/accounts/%s/'% self.account.id,
        data = prepare_dict(self.account),
        HTTP_AUTHORIZATION=self.token) 
```

**升级到 django 1.5，除了与HTTP PUT**相关的测试外，所有测试都通过了， 同时调查发现此问题@https [://docs.djangoproject.com/en/dev/releases/1.5/#options-put-and-delete-测试客户端中的请求](https://docs.djangoproject.com/en/dev/releases/1.5/#options-put-and-delete-requests-in-the-test-client)

> 如果您在没有 content_type 的 PUT 请求中使用 data 参数，则必须在将数据传递给测试客户端之前对数据进行编码并设置 content_type 参数。

因此，更新了我的测试以反映此更改并尝试遵循，但仍然获得 http 415 而不是 http 200

```
from django.test.client import MULTIPART_CONTENT, BOUNDARY, encode_multipart
self.client.put('/core/accounts/%s/'% self.account.id,
            data = encode_multipart(BOUNDARY, prepare_dict(self.account)),
                content_type=MULTIPART_CONTENT,
        HTTP_AUTHORIZATION=self.token) 
```

知道我错过了什么吗？PS：所有功能都可以从 django-rest-framework 内置 Web UI 正常工作

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-01T09:13:06.847

您绝对走在正确的轨道上——在这种情况下，破坏性测试肯定是由于 Django`PUT`对测试客户端的行为发生了变化。

你的修复对我来说也*很合适。*415 是“不支持的媒体类型”响应，这意味着请求内容类型不是为视图配置的任何解析器都可以处理的内容。

通常在这种情况下，那是由于忘记设置请求的内容类型，但看起来你已经正确设置为`multipart/form-data; boundary=...`

需要仔细检查的事情：

*   究竟是什么`response.data`显示为错误详细信息？
*   如果你有一个，你在你的`DEFAULT_PARSER_CLASSES`设置中配置了什么，或者`parser_classes`如果它有一个，你在视图属性上设置了什么？
*   确保测试中没有错字`content_type`（即使这里是正确的）。

**编辑**：

感谢您的评论 - 这清除了一切。您只安装了 JSON 解析器，但您正在尝试发送表单编码数据。您应该：

*   `FormParser`将和添加`MultiPartParser`到您的设置/视图，以便它支持表单编码。（另请注意，默认`DEFAULT_PARSER_CLASSES`设置*确实*包含它们，因此如果您根本不设置任何内容，它将按预期工作）

*或者*

*   在您的测试用例中使用`json`编码而不是表单编码对请求进行编码。`data=json.dumps(prepare_dict(self.account)), content_type='application/json'`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-11-29T22:52:48.380

收到 415 错误，因为我使用了一个实例`django.test import Client`而不是`rest_framework.test import APIClient`. `APIClient`将以正确的方式自动对数据进行编码。

纯json请求：

```
client = APIClient()
client.post(url, format='json', data=json, headers=headers)
client.put(url, format='json', data=json, headers=headers) 
```

创建/更新包括文件：

```
client = APIClient()
client.post(url, format='multipart', data=data, headers=headers)
client.put(url, format='multipart', data=data, headers=headers) 
```

我花了很多时间处理这个 415 错误，所以我希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-18T01:51:36.673

使用 JSON 格式在 Django REST Framework 上测试 POST 时出现错误 415。这是我为解决它所做的：

我将这些 Django REST Framework 设置添加到`settings.py`

```
REST_FRAMEWORK = {
    'DEFAULT_PARSER_CLASSES': [
        'rest_framework.parsers.JSONParser',
    ],
    'TEST_REQUEST_DEFAULT_FORMAT': 'json',
} 
```

[https://www.django-rest-framework.org/api-guide/settings/](https://www.django-rest-framework.org/api-guide/settings/)

在测试文件中：

```
from rest_framework.test import RequestsClient
from django.test import TestCase

class MyTestCase(TestCase):

    def test_post(self):
        url = 'http://localhost:8000/api/'
        my_data = {'key_1': 1, 'key_2': 'a_string'}

        client = RequestsClient()

        response = client.post(url, json=my_data, 
                        headers={'content-type': 'application/json'})

        status_code = response.status_code
        data = response.json() 
```

Python 和包版本：

*   蟒蛇3.8.0
*   Django==3.0.6
*   djangorestframework==3.11.0

这不是问题的解决方案，但由于我经过一番搜索后来到这里，也许这可以帮助其他人。

# android - 什么是 adb device -l 列表？

> ID：15153050
> 
> 赞同：13
> 
> 时间：2013-03-01T07:58:01.360
> 
> 标签：android, adb

```
adb devices -l
devices [-l]                  - list all connected devices
                                ('-l' will also list device qualifiers) 
```

当我执行它时，我越来越喜欢

```
padmakumar@padmakumar-desktop:~$ adb devices -l
List of devices attached 
Medfield14ABxxxx       device usb:2-1.5
Ztedfield14Axxxx       device usb:2-1.6
emulator-5554          device
015d2994ec2xxx         device usb:2-1.5 product:nakasi model:Nexus_7 device:grouper

Medfield14ABA072       device usb:1-1.1 ( changing to different port) 
```

当我更改为不同的端口时，它显示总线号为 1 和 2，如`lsusb`命令中所示

这个设备是什么**USB**：**2-1.5、1.6、1.1** **？**

 ****那么这个 -l 会做什么，设备限定符的确切含义是什么？

我试过了，`lsusb`但信息与 adb device -l 不同。

```
padmakumar@padmakumar-desktop:~$ lsusb
Bus 002 Device 008: ID 18d1:4e42 Google Inc. 
Bus 002 Device 005: ID 17ef:7470 Lenovo 
Bus 002 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 003: ID 046d:c03d Logitech, Inc. M-BT96a Pilot Optical Mouse
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T08:43:17.317

它是 USB 子系统中设备的路径。例如`2-1.5`表示控制器 2、端口 1、端口 5。这两个端口之间必须有一个集线器。这似乎与您的`lsusb`输出相匹配，这表明`Bus 002 Device 001`是一个集线器。

为了弄清楚这一点，我对源代码进行了挖掘`adb`，发现它被称为`devpath`. 您可以查看它是如何在[`usb_linux.c`](https://github.com/android/platform_system_core/blob/38219ee6116943269b0501a1a0210c76e2ba69c3/adb/usb_linux.c). 总之，当找到一个设备时，代码会解析符号链接`/sys/dev/char/<major>:<minor>`并将最后一个路径组件作为`devpath`. 如果你运行：

```
$ ls -l /sys/dev/char |grep usb 
```

您可以看到链接指向，`/sys/devices/platform/...`并且您应该看到其中一些路径以与设备匹配的组件结尾。最后，我在Alan Stern的[这篇文章](http://www.mail-archive.com/linux-usb-users@lists.sourceforge.net/msg16895.html)中找到了对这些路径含义的描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-17T15:27:07.070

自动挂载许多设备时，我遇到了同样的问题。经过大量挖掘，我找到了如何找到两者之间的联系

```
adb devices -l 
List of devices attached 
XXXXXXXX       device usb:9-1.4 product:XXXXXXXXXXX
.............
XXXXXXXX       device usb:3-1 product:XXXXXXXXXXX 
```

和

```
lsusb
Bus 009 Device 005: ID 04e8:6860 Samsung Electronics Co., Ltd Galaxy (MTP)
.............
Bus 003 Device 003: ID 04e8:6860 Samsung Electronics Co., Ltd Galaxy (MTP) 
```

我们的 MTP 设备可以通过以下方式查看：

```
ls /dev | grep libmtp-
libmtp-3-1
.............
libmtp-9-1.4 
```

他们在公共汽车上：

```
ls -l /dev/libmtp-9-1.4
lrwxrwxrwx 1 root root /dev/libmtp-9-1.4 -> bus/usb/009/005

ls -l /dev/libmtp-3-1
lrwxrwxrwx 1 root root /dev/libmtp-3-1 -> bus/usb/003/003 
```****

# java - Java二叉搜索树删除

> ID：15153052
> 
> 赞同：0
> 
> 时间：2013-03-01T07:58:10.870
> 
> 标签：java, binary-tree

我正在为二叉搜索树编写删除方法，它不完整，但我填充了一棵树，以便我至少可以测试我要删除的节点是叶子但它似乎不是的情况在职的。我的逻辑有什么明显的错误吗？

```
public void delete(E d)
{
    delete( d, root);
}

private void delete( E d, Node<E> T)
{
    if(T == null)
    {
        return;
    }
    else if(d.equals(T.getData()))
    {
        System.out.println("it found the node at least");
        if(T.getRight() == null && T.getLeft() == null)
        {
            T.setData(null);
        }
        //do alot)
    }
    else if(d.compareTo(T.getData()) > 0)
    {
        System.out.println("going right");
        delete(d, T.getRight());
    }
    //s is less than T, insert on left subtree
    else
    {System.out.println("going left");
        delete(d,T.getLeft());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T20:04:19.967

您的代码不会删除节点。它只是清除它们。
为了实现删除，您必须将您的功能更改为*无效*，但是：

`private Node delete( E d, Node<E> T)`

你的代码应该是这样的：

```
public void delete(E d) {
    root = delete( d, root);
}

private void delete( E d, Node<E> T)
{
    if(T == null)
    {
        return;
    }
    else if(d.equals(T.getData()))
    {
        System.out.println("it found the node at least");
        if(T.getRight() == null && T.getLeft() == null)
        {
           return null;
        }
        //do alot)
    }
    else if(d.compareTo(T.getData()) > 0)
    {
        System.out.println("going right");
        T.right = delete(d, T.getRight());
    }
    //s is less than T, insert on left subtree
    else
    {
        System.out.println("going left");
        T.left = delete(d,T.getLeft());
    }

} 
```

你明白了……

# netty - 使用 Netty 3.5 分块 WebSocket 帧

> ID：15153053
> 
> 赞同：0
> 
> 时间：2013-03-01T07:58:13.583
> 
> 标签：netty

查看 Netty 源代码，我看到了对分块 TextWebSocketFrames 的所有支持。意思是延续帧，解码器处理等等。虽然我在弄清楚使用什么来实际创建分块帧时遇到问题，但我需要自己编写吗？编码器似乎缺少它，并且不确定如何在不扩展它的情况下使用[ChunkedWriteHandler 。](http://netty.io/3.6/xref/org/jboss/netty/handler/stream/ChunkedWriteHandler.html)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:06:56.130

您将需要自己处理帧的写入，因此您可以按正确的顺序发送它们并确保以正确的顺序写出它们。

# asp.net - 在哪里添加 Respons.Redirect？

> ID：15153056
> 
> 赞同：0
> 
> 时间：2013-03-01T07:58:17.660
> 
> 标签：asp.net, visual-studio-2008, button, passwords, response.redirect

我试图弄清楚将我的 Response.Redirect("userAdmin.aspx) 添加到我的代码的位置。我尝试了许多不同的变体，但提交按钮什么也没做。我试图了解将它放在哪里。任何人都可以帮忙？ 我将不胜感激！

这是我的代码

```
Protected Sub butSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles butSubmit.Click

    Dim myReader As Data.SqlClient.SqlDataReader
    Dim mySqlConnection As Data.SqlClient.SqlConnection
    Dim mySqlCommand As Data.SqlClient.SqlCommand
    'Establish the SqlConnection by using the configuration manager to get the connection string in our web.config file.

    mySqlConnection = New Data.SqlClient.SqlConnection(ConfigurationManager.ConnectionStrings  ("ConnectionString").ToString())
    Dim sql As String = "SELECT password FROM MyUsers WHERE username = '" & Me.TextBox1.Text & "'"
    mySqlCommand = New Data.SqlClient.SqlCommand(sql, mySqlConnection)

    Try

        mySqlConnection.Open()
        myReader = mySqlCommand.ExecuteReader()

        If (myReader.HasRows) Then
            myReader.Read()
            Dim password As String = myReader("password")
            If (password = Me.TextBox2.Text) Then
                'Open page with users and roles
                Dim message As String = "Correct password"
                Dim style As MsgBoxStyle = MsgBoxStyle.OkOnly
                Dim title As String = "Authenticated"
                MsgBox(message, style, title)

            End If
        End If

    Catch ex As Exception
        Console.WriteLine(ex.ToString())
    Finally
        If Not (myReader Is Nothing) Then
            myReader.Close()
        End If

        If (mySqlConnection.State = Data.ConnectionState.Open) Then
            mySqlConnection.Close()
        End If

   End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:10:36.500

你应该`Response.Redirect`在 之外使用`Try-Catch`，否则你会得到一个`ThreadAbortException`. 您也可以使用重载[`Response.Redirect(url, false)`](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.80%29.aspx)。

您应该为您的 sql-command**使用参数**以防止 sql-injection！

```
Protected Sub butSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles butSubmit.Click
    Dim correctPassword As Boolean = False
    Using mySqlConnection = New Data.SqlClient.SqlConnection(ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString)
        Dim sql As String = "SELECT password FROM MyUsers WHERE username = @userName"
        Using mySqlCommand = New Data.SqlClient.SqlCommand(sql, mySqlConnection)
            mySqlCommand.Parameters.AddWithValue("@userName", Me.TextBox1.Text)
            Try
                mySqlConnection.Open()
                Using myReader = mySqlCommand.ExecuteReader()
                    If myReader.Read() Then
                        Dim password As String = myReader.GetString(myReader.GetOrdinal("password"))
                        If password = Me.TextBox2.Text Then
                            correctPassword = True
                        End If
                    End If
                End Using
            Catch ex As Exception
                Console.WriteLine(ex.ToString())
            End Try
        End Using
    End Using
    If correctPassword Then
        Response.Redirect("userAdmin.aspx")
    End If
End Sub 
```

我也强烈建议改用[**ASP.NET-Membership**](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:07:37.047

```
 protected void Button_Click(object sender,ClickEventArgs e)
    {
       Response.Redirect("userAdmin.aspx) ;
    } 
```

首先尝试另一个按钮，看看页面是否被重定向..如果你没有蚂蚁问题，那么根据你的标准放在 finally 之后或内部 finally

# eclipse - Android - Eclipse - 如何一次扩展所有 /src 包？

> ID：15153057
> 
> 赞同：0
> 
> 时间：2013-03-01T07:58:18.577
> 
> 标签：eclipse, eclipse-adt

![在此处输入图像描述](../Images/a97eaee8e879a02804eeddb8e2a4483f.png)

是否可以一次扩展所有软件包？

我似乎在 Eclipse 中找不到该选项。

每次我开始 Eclipse 时都扩展它们对我来说变得很乏味。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:39:41.957

您可以将包表示从平面更改为分层。

转到包资源管理器，单击下拉菜单，工具栏中的小三角形。

这会给你：

```
src
- com.landa
           + adapter
           + database
           + datatypes 
```

# java - Hibernate - 在预插入/预更新时更新实体

> ID：15153061
> 
> 赞同：1
> 
> 时间：2013-03-01T07:58:44.660
> 
> 标签：java, hibernate, entity, listener

我想设置最后一个对象修改/创建的时间戳，所以我想创建一个预插入和预创建侦听器并将它们链接到 Hibernate：

```
public class UpdateInsertListener implements PreInsertEventListener, PreUpdateEventListener {
    @Override
    public boolean onPreInsert(PreInsertEvent arg0) {
        setCurrentTimestamp(arg0.getEntity());
        arg0.getSession().save(arg0.getEntity()); 
        return false;

    }

    private void setCurrentTimestamp(Object uczenEntity) {
        System.out.println("Setting timestamp: " + new Date());
        if (uczenEntity instanceof Uczen) {

            Uczen uczen = (Uczen)uczenEntity; // uczen = student
            uczen.setZnacznikCzasu(new Date()); // znacznikCzasu = timestamp
        }
    }

    @Override
    public boolean onPreUpdate(PreUpdateEvent arg0) {
        setCurrentTimestamp(arg0.getEntity());
        arg0.getSession().save(arg0.getEntity()); 
        return false;
    }
} 
```

一块 Uczen.java：

```
@Temporal(TemporalType.TIME)
@Column(name = "znacznik_czasu")
public Date getZnacznikCzasu() {
    return this.znacznikCzasu;
}

public void setZnacznikCzasu(Date znacznikCzasu) {
    this.znacznikCzasu = znacznikCzasu;
} 
```

在 postgresql 数据库中它有非空限制

持久性-dev.xml：

```
 <property name="hibernate.validator.autoregister_listeners" value="false" />  
    <property name="hibernate.ejb.event.pre-insert" value="pl.praktyki.validator.UpdateInsertListener" />     
    <property name="hibernate.ejb.event.pre-update" value="pl.praktyki.validator.UpdateInsertListener" /> 
```

问题是，当我提交没有 znacznikCzasu (timestamp) 字段的表单时，它变为 null 并且不会被替换为 set new Date()

```
08:24:12,297 INFO  [STDOUT] Hibernate: 
    select
        praktyka0_.id as id26_,
        praktyka0_.data_koniec as data2_26_,
        praktyka0_.data_poczatek as data3_26_,
        praktyka0_.nazwa as nazwa26_,
        praktyka0_.opis as opis26_,
        praktyka0_.znacznik_czasu as znacznik6_26_ 
    from
        praktyka.public.praktyka praktyka0_ limit ?
08:24:20,250 INFO  [STDOUT] Setting timestamp: Fri Mar 01 08:24:20 CET 2013
08:24:20,251 INFO  [STDOUT] Hibernate: 
    insert 
    into
        praktyka.public.uczen
        (imie, nazwisko, opis, id_praktyka, znacznik_czasu, id) 
    values
        (?, ?, ?, ?, ?, ?)
08:24:20,252 WARN  [JDBCExceptionReporter] SQL Error: 0, SQLState: 23502
08:24:20,252 ERROR [JDBCExceptionReporter] Zadanie wsadowe 0 insert into praktyka.public.uczen (imie, nazwisko, opis, id_praktyka, znacznik_czasu, id) values ('asdasd', 'asdasd', '', '1', NULL, '6') zostało przerwane. Wywołaj getNextException by poznać przyczynę.

   // Batch job 0 insert into [..] was interrupted. 

08:24:20,252 WARN  [JDBCExceptionReporter] SQL Error: 0, SQLState: 23502
08:24:20,252 ERROR [JDBCExceptionReporter] BŁĄD: pusta wartość w kolumnie "znacznik_czasu" narusza ograniczenie wymaganej wartości
  Szczegóły: Niepoprawne ograniczenia wiersza (6, 1, asdasd, asdasd, , null).
     // ERROR: empty column value "znacznik_czasu" involve limitations of expected value 
08:24:20,252 ERROR [AbstractFlushingEventListener] Could not synchronize database state with session
org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update 
```

如果我手动提交带有时间戳设置的表单，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:02:24.670

我决定在注释类中添加以下方法：

```
@PreUpdate
  protected void onUpdate() {
    this.znacznikCzasu = new Date();
  }

 @PrePersist
  protected void onCreate() {
     this.znacznikCzasu = new Date();
  } 
```

# iphone - ios添加UICollectionViewreuseIdentifier报错

> ID：15153063
> 
> 赞同：0
> 
> 时间：2013-03-01T07:58:52.717
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我已经在我的视图中添加了一个`UICollectionView`。我已经实现了下面的方法。

**我得到错误：**

> “NSInvalidArgumentException”，原因：'-[NSIndexPath reuseIdentifier]：无法识别的选择器发送到实例”

```
-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return 1;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *identifier = @"CellID";
    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];

    UIImageView *imageView = (UIImageView *)[cell viewWithTag:10];
    imageView.image = [UIImage imageNamed:@"V.jpg"];
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:02:12.797

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *identifier = @"CellID";
UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];

UIImageView *imageView = (UIImageView *)[cell viewWithTag:10];
imageView.image = [UIImage imageNamed:@"V.jpg"];

    return cell; // here is ur mistake
} 
```

添加`return cell;`到结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T03:02:27.797

单元格需要注册到 CollectionView 之前，

```
 [self.dateCollectionView registerClass:[DateCell Class] forCellWithReuseIdentifier:identifier]; 
```

看标识符

# php - opencart textarea 处理换行符

> ID：15153066
> 
> 赞同：1
> 
> 时间：2013-03-01T07:58:56.640
> 
> 标签：php, opencart

我正在处理一个在 opencart 框架下构建的项目。

在内容管理系统中，我可以看到在前端网页上正常显示的文本区域中的正常内容输入。但是，当我尝试在段落中引入换行符并执行更新时，数据无法再显示在前端，留下一个有设计的网页，但没有数据。

在mysql db中，对于这个特定的数据，文本是存在的，并且在换行符的位置，没有任何`<br \>`，\r，\n，唯一的就是换行符。

我只是预测控制器文件无法处理带有换行符的数据，否则会出现错误。

有没有人有过类似的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:14:38.817

它只是ckeditor，如果您使用图形方法，只需使用`enter`将带您到下一行或单击`source`然后用于`<br />`换行，它可以很好地呈现它，没有您提到的此类问题。

# c# - 如何在 C# 中解析和使用 htpasswd 文件

> ID：15153067
> 
> 赞同：4
> 
> 时间：2013-03-01T07:59:10.947
> 
> 标签：c#, .htpasswd

我想在 MVC 中将 Apache 的 htpasswd 实用程序与我的自定义 BasicAuthenticationAttribute 一起使用。但是，根据 htpasswd 文档，我不确定如何计算密码哈希以与 htpasswd 文件进行比较。是否有一个托管的 .NET 库或一些简单的文档可以帮助我解决这个问题？

编辑：Heinzi 指出的问题对 SHA 来说很好，但我也希望能够处理 MD5（APR1？）哈希变体。我看过一些代码示例，但它们对我来说有点太不透明了，无法理解。对于 Apache 文档中链接到的实际代码文件也是如此。

理想情况下，我希望能够获取任何客户端的 .htpasswd 文件并将其放入我的 ASP.NET 站点以进行身份​​验证，而不受使用哪种哈希方法的限制。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T12:51:15.150

[我最近向CryptSharp](http://www.zer7.com/software.php?page=cryptsharp)添加了对 Apache MD5 的支持。它可以为您计算和验证这些密码。由于它是一种变体，因此您需要为 Crypter.MD5.Crypt() 方法提供一个额外的参数：

```
string cryptedPassword = Crypter.MD5.Crypt("HelloWorld", new CrypterOptions
  {
    { CrypterOption.Variant, MD5CrypterVariant.Apache }
  })); 
```

核实：

```
bool matches = Crypter.CheckPassword("HelloWorld", cryptedPassword); 
```

您也可以使用 Crypt() 方法本身进行验证，但 CheckPassword() 会自动确定它是否是 Apache MD5、DES 等。

希望这可以帮助

詹姆士

# javascript - Bootstrap 固定表单元格

> ID：15153068
> 
> 赞同：0
> 
> 时间：2013-03-01T07:59:14.447
> 
> 标签：javascript, html, css, twitter-bootstrap

如何使用 Bootstrap 制作固定表格单元格，并隐藏 bootstrap.overflow？我试过这个，但数据垂直向下：

```
table {
  table-layout: fixed;
}
table th,
table td {
  overflow: hidden;
} 
```

我有 10 列和这样的样式：

```
<table class="table table-bordered">
    <thead class="mbhead">
        <tr class="mbrow">
            <th style="width:10px"></th>
            <th style="width:10%;">A</th>
            <th style="width:10%;">B</th>
            <th style="width:10%;">C</th>
            <th style="width:10%;">D</th>
            <th style="width:10%;">E</th>
            <th style="width:10%;">F</th>
            <th style="width:10%;">G</th>
            <th style="width:10%;">H</th>
            <th style="width:10%;">I</th>
            <th style="width:10%;">J</th>
        </tr>
    </thead>
    <tbody>
        //other contents...
        </body>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T16:59:24.523

您应该将 css 属性 white-space 设置为“nowrap”

```
table th, table td { overflow: hidden; white-space: nowrap } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:17:29.310

溢出：隐藏仅适用于块级元素，因此您可以使您的 TH 和 TD 元素显示：块或（可能更好）将 div 放在它们中设置溢出：隐藏在 DIV 上。

这是一个显示显示的示例：TD/TH 上设置的块：http: [//jsfiddle.net/YB4yU/](http://jsfiddle.net/YB4yU/)

```
th, td {
    overflow: hidden;
    width: 100px;
    height: 50px;
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:13:45.433

请检查这是否是您想要的。我用过div。让我知道它是否有帮助。你可以看到我使用了 2 个 div。在第一个 div 我设置为溢出隐藏

```
<div  style="overflow: hidden; margin-left: 20px; height: 504px;"> 
```

在这个 div 里面我使用了另一个 div

```
 <div id="product"  style="overflow: auto;height: 350px;"> 
```

小提琴的链接在[这里](http://jsfiddle.net/JBs8g/7/)

# javascript - 如何获取div的非溢出内容的长度

> ID：15153072
> 
> 赞同：0
> 
> 时间：2013-03-01T07:59:32.770
> 
> 标签：javascript, jquery, html, css

我有 div，文本内容很大。并且它使用 . 仅在框内显示内容`overflow:hidden`。

现在我怎样才能得到盒子内这个可见内容的长度（没有字符），即非过度内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:08:46.500

*没有万无一失的方法可以检测到这一点。*可见文本的数量取决于各种因素，例如使用的字体、行高、字母间距等。如果字体在整个文本中是统一的并且是等距的，那么您可以使用 char-width 和高度来获得这个，但它在浏览器中不太可能是完美的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:16:27.813

如果您在 上设置了高度，则`div`您已经有了数字。`div`但是如果你不这样做，你应该得到使用 JS 函数的高度。无论隐藏多少内容，`div`你能看到的就是它的高度。

就像 JS 中的所有其他作品一样，如果您想让它轻松地在所有浏览器上运行，您应该使用框架。例如，在[Prototype中，您可以这样称呼：](http://prototypejs.org/)

```
$("DIV_ID").getHeight(); 
```

替换`DIV_ID`为 div 的 id 属性。

# ios - 在 iOS 上检查位置服务权限

> ID：15153074
> 
> 赞同：56
> 
> 时间：2013-03-01T07:59:41.260
> 
> 标签：ios, objective-c, swift, cllocationmanager

如何检查我的应用是否启用了定位服务？

我有 2 个故事板，我想检查定位服务。如果为我的应用启用了位置服务，我想启动带有位置的地图故事板。否则，我想启动另一个故事板。如何以编程方式进行？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-03-01T08:40:00.607

这是正确的。

```
if ([CLLocationManager locationServicesEnabled]){

    NSLog(@"Location Services Enabled");

    if ([CLLocationManager authorizationStatus]==kCLAuthorizationStatusDenied){
        alert = [[UIAlertView alloc] initWithTitle:@"App Permission Denied"     
                                           message:@"To re-enable, please go to Settings and turn on Location Service for this app." 
                                          delegate:nil 
                                 cancelButtonTitle:@"OK" 
                                 otherButtonTitles:nil];
        [alert show];
    }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-03-14T08:42:36.543

**在 iOS 9.2 上测试**

为了获取位置更新，我们应该经常检查

*   在用户的 iOS 设备上启用的定位服务和
*   为特定应用启用的定位服务

并在正确的设置屏幕上启动用户以启用

**启动 iOS 设备位置设置页面**

Step.1 转到项目设置--> 信息--> URL 类型--> 添加新的 URL 方案

[![在此处输入图像描述](../Images/70962c644ea38c768877db2367b168e2.png)](https://i.stack.imgur.com/lzdgC.png)

Step.2 使用以下代码启动直接手机的位置设置页面：（注意：URL Scheme 在 iOS 10+ 中有所不同，我们检查版本[这里](https://stackoverflow.com/a/5337804/4504604)说明）

```
 #define SYSTEM_VERSION_LESS_THAN(v)  ([[[UIDevice 
 currentDevice] systemVersion] compare:v options:NSNumericSearch] == 
 NSOrderedAscending)

 //Usage
NSString* url = SYSTEM_VERSION_LESS_THAN(@"10.0") ? @"prefs:root=LOCATION_SERVICES" : @"App-Prefs:root=Privacy&path=LOCATION";
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString: url]]; 
```

[![在此处输入图像描述](../Images/4bfcbe057cb1df5fe78f6f1897b02d1a.png)](https://i.stack.imgur.com/CZqiv.png)

**启动应用程序位置设置页面**

使用以下代码启动直接应用程序的位置设置页面

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]]; 
```

[![在此处输入图像描述](../Images/68f5207991bc4b79cd38e88066ac5e6c.png)](https://i.stack.imgur.com/DGr8B.png)

这是完整的代码示例：

```
#define SYSTEM_VERSION_LESS_THAN(v)  ([[[UIDevice 
 currentDevice] systemVersion] compare:v options:NSNumericSearch] == 
 NSOrderedAscending)

CLLocationManager *locationManager;

-(void) checkLocationServicesAndStartUpdates
{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    if ([locationManager respondsToSelector:@selector(requestWhenInUseAuthorization)])
    {
        [locationManager requestWhenInUseAuthorization];
    }

    //Checking authorization status
    if (![CLLocationManager locationServicesEnabled] && [CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied)
    {

        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Location Services Disabled!"
                                                            message:@"Please enable Location Based Services for better results! We promise to keep your location private"
                                                           delegate:self
                                                  cancelButtonTitle:@"Settings"
                                                  otherButtonTitles:@"Cancel", nil];

        //TODO if user has not given permission to device
        if (![CLLocationManager locationServicesEnabled])
        {
            alertView.tag = 100;
        }
        //TODO if user has not given permission to particular app
        else
        {
            alertView.tag = 200;
        }

        [alertView show];

        return;
    }
    else
    {
        //Location Services Enabled, let's start location updates
        [locationManager startUpdatingLocation];
    }
} 
```

处理用户点击响应，并启动正确的位置设置

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    if(buttonIndex == 0)//Settings button pressed
    {
        if (alertView.tag == 100)
        {
            //This will open ios devices location settings
            NSString* url = SYSTEM_VERSION_LESS_THAN(@"10.0") ? @"prefs:root=LOCATION_SERVICES" : @"App-Prefs:root=Privacy&path=LOCATION";
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString: url]];
        }
        else if (alertView.tag == 200)
        {
            //This will opne particular app location settings
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]];
        }
    }
    else if(buttonIndex == 1)//Cancel button pressed.
    {
        //TODO for cancel
    }
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-01-15T04:42:52.163

```
-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error{

    NSLog(@"%@",error.userInfo);
    if([CLLocationManager locationServicesEnabled]){

        NSLog(@"Location Services Enabled");

        if([CLLocationManager authorizationStatus]==kCLAuthorizationStatusDenied){
         UIAlertView    *alert = [[UIAlertView alloc] initWithTitle:@"App Permission Denied"
                                               message:@"To re-enable, please go to Settings and turn on Location Service for this app."
                                              delegate:nil
                                     cancelButtonTitle:@"OK"
                                     otherButtonTitles:nil];
            [alert show];
        }
    }
 } 
```

这背后的原因是，当您的服务将禁用位置服务时，此方法将调用。这段代码对我有用。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-01T08:01:59.713

检查**CLLocationManager 的 locationServicesEnabled**属性以检查系统范围的可用性。使用您的**CLLocationManagerDelegate 的 locationManager: didFailWithError:**方法并检查**kCLErrorDenied**错误以查看用户是否拒绝位置服务。

```
BOOL locationAllowed = [CLLocationManager locationServicesEnabled];
 if (!locationAllowed) 
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Location Service Disabled" 
                                                        message:@"To re-enable, please go to Settings and turn on Location Service for this app." 
                                                       delegate:nil 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];
} 
```

为您的应用使用此代码

```
- (void)viewDidLoad
{
    locationManager = [[CLLocationManager alloc] init];

    locationManager.delegate = self;

    locationManager.desiredAccuracy = kCLLocationAccuracyKilometer;

    // Set a movement threshold for new events.

    locationManager.distanceFilter = 500;

    [locationManager startUpdatingLocation];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)locationManager:(CLLocationManager *)manager

     didUpdateLocations:(NSArray *)locations {

    // If it's a relatively recent event, turn off updates to save power

}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{

    NSLog(@"%@",error);
} 
```

如果您的应用程序禁用了位置服务，那么它会给您错误

```
Error Domain=kCLErrorDomain Code=1 "The operation couldn’t be completed. (kCLErrorDomain error 1.)" 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-12-20T13:19:48.820

在最新的 Swift 5.0、Xcode 11.2.1 中更新

```
import UIKit
import CoreLocation 
```

> 用户常量

```
struct UserConstants {
    static let latitude = "latitude"
    static let longitude = "longitude"
    static let lastKnownLatitude = "lastKnownLatitude"
    static let lastKnownLongitude = "lastKnownLongitude"
} 
```

> Location Manager Delegate 用于监控位置变化

```
@objc protocol LocationManagerDelegate {
    @objc optional func getLocation(location: CLLocation)
}

class LocationHelper: NSObject, CLLocationManagerDelegate {

    weak var locationManagerDelegate: LocationManagerDelegate?
    var isLocationfetched: Bool = false
    var lastKnownLocation: CLLocation? {
        get {
            let latitude = UserDefaults.standard.double(forKey: UserConstants.lastKnownLatitude)
            let longitude = UserDefaults.standard.double(forKey: UserConstants.lastKnownLongitude)

            if latitude.isZero || longitude.isZero {
                return nil
            }
            return CLLocation(latitude: latitude, longitude: longitude)
        }
        set {
            UserDefaults.standard.set(newValue?.coordinate.latitude ?? 0, forKey: UserConstants.lastKnownLatitude)
            UserDefaults.standard.set(newValue?.coordinate.longitude ?? 0, forKey: UserConstants.lastKnownLongitude)
            UserDefaults.standard.synchronize()
        }
    }

    struct SharedInstance {
        static let instance = LocationHelper()
    }

    class var shared: LocationHelper {
        return SharedInstance.instance
    }

    enum Request {
        case requestWhenInUseAuthorization
        case requestAlwaysAuthorization
    }

    var clLocationManager = CLLocationManager()

    func setAccuracy(clLocationAccuracy: CLLocationAccuracy) {
        clLocationManager.desiredAccuracy = clLocationAccuracy
    }

    var isLocationEnable: Bool = false {
        didSet {
            if !isLocationEnable {
                lastKnownLocation = nil
            }
        }
    } 
```

> 带有授权检查的位置更新

```
 func startUpdatingLocation() {
        isLocationfetched = false
        if CLLocationManager.locationServicesEnabled() {
            switch CLLocationManager.authorizationStatus() {
            case .notDetermined:
                clLocationManager.delegate = self
                clLocationManager.requestWhenInUseAuthorization()
                clLocationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation
                clLocationManager.startUpdatingLocation()
                isLocationEnable = true
            case .restricted, .denied:
                showLocationAccessAlert()
                isLocationEnable = false
            case .authorizedAlways, .authorizedWhenInUse:
                self.clLocationManager.delegate = self
                self.clLocationManager.startUpdatingLocation()
                isLocationEnable = true
            default:
                print("Invalid AuthorizationStatus")
            }
        } else {
            isLocationEnable = false
            showLocationAccessAlert()
        }
    } 
```

> 如果不允许权限，则显示位置警报

```
 func showLocationAccessAlert() {
        let alertController = UIAlertController(title: "Location Permission Required", message: "Please enable location permissions in settings.", preferredStyle: UIAlertController.Style.alert)
        let okAction = UIAlertAction(title: "settings", style: .default, handler: {(cAlertAction) in
            UIApplication.shared.open(URL(string: UIApplication.openSettingsURLString)!)
        })
        let cancelAction = UIAlertAction(title: "cancel", style: UIAlertAction.Style.cancel)
        alertController.addAction(cancelAction)
        alertController.addAction(okAction)
        let appdelegate = UIApplication.shared.delegate as? AppDelegate
        appdelegate?.window?.rootViewController?.present(alertController, animated: true, completion: nil)
    }

    func stopUpdatingLocation() {
        self.clLocationManager.stopUpdatingLocation()
    }

    func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) {
        if !isLocationfetched {
            isLocationfetched = true
            clLocationManager.startMonitoringSignificantLocationChanges()
            NotificationCenter.default.post(name: NSNotification.Name.updateLocationNotification, object: nil)
        }
        let userLocation = locations[0] as CLLocation
        self.lastKnownLocation = userLocation
        if let delegate = self.locationManagerDelegate {
            delegate.getLocation!(location: userLocation)
        }
    }

    func locationManager(_ manager: CLLocationManager, didChangeAuthorization status: CLAuthorizationStatus) {
        if (status == CLAuthorizationStatus.denied) {
            // The user denied authorization
            isLocationEnable = false
        } else if (status == CLAuthorizationStatus.authorizedWhenInUse) {
            // The user accepted authorization
            self.clLocationManager.delegate = self
            self.clLocationManager.startUpdatingLocation()
            isLocationEnable = true
        }
    }

    func locationManager(_ manager: CLLocationManager, didFailWithError error: Error) {
        print("\n error description for location updation:- \(error.localizedDescription)")
    }

} 
```

> 对于上面的测试，只需在您的控制器中编写这些代码行，

```
LocationHelper.shared.locationManagerDelegate = self
LocationHelper.shared.startUpdatingLocation() 
```

> LocationManagerDelegate 方法

```
extension ViewController: LocationManagerDelegate {

    func getLocation(location: CLLocation) {
        currentLocation = location.coordinate
    }

} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-09-14T08:50:23.870

经过大量调查。我建议将此消息显示在标签上而不是警报视图上。因为，有很多情况需要测试（用户一般禁用位置服务或仅用于应用程序。删除应用程序，重新安装）。

其中一种情况会导致您的警报同时显示您的消息以及苹果的警报消息。您的警报将落后于苹果的警报。这是一种令人困惑且不合逻辑的行为。

**我推荐以下内容：**

斯威夫特 3：

```
func locationManager(_ manager: CLLocationManager, didChangeAuthorization status: CLAuthorizationStatus) {

    switch status {
        case .notDetermined:
            Log.verbose("User still thinking granting location access!")
            manager.startUpdatingLocation() // this will access location automatically if user granted access manually. and will not show apple's request alert twice. (Tested)
        break

        case .denied:
            Log.verbose("User denied location access request!!")
            // show text on label
            label.text = "To re-enable, please go to Settings and turn on Location Service for this app."

            manager.stopUpdatingLocation()
            loadingView.stopLoading()
        break

        case .authorizedWhenInUse:
            // clear text
            label.text = ""
            manager.startUpdatingLocation() //Will update location immediately
        break

        case .authorizedAlways:
            // clear text
            label.text = ""
            manager.startUpdatingLocation() //Will update location immediately
        break
        default:
            break
    }
} 
```

目标-C：

```
- (void)locationManager:(CLLocationManager*)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {
    switch (status) {
        case kCLAuthorizationStatusNotDetermined: {
            DDLogVerbose(@"User still thinking granting location access!");
            [locationManager startUpdatingLocation]; // this will access location automatically if user granted access manually. and will not show apple's request alert twice. (Tested)
        } break;
        case kCLAuthorizationStatusDenied: {
            DDLogVerbose(@"User denied location access request!!");
            // show text on label
            label.text = @"To re-enable, please go to Settings and turn on Location Service for this app.";

            [locationManager stopUpdatingLocation];
            [loadingView stopLoading];
        } break;
        case kCLAuthorizationStatusAuthorizedWhenInUse:
        case kCLAuthorizationStatusAuthorizedAlways: {
            // clear text
            label.text = @"";
            [locationManager startUpdatingLocation]; //Will update location immediately
        } break;
        default:
            break;
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-04-05T06:31:05.983

最好的方法，处理所有情况！->

```
//First, checking if the location services are enabled
if(![CLLocationManager locationServicesEnabled]){
    [self showMessage:@"Please enable location services to detect location!" withTitle:@"Location not enabled"];
}
else if ([CLLocationManager authorizationStatus]==kCLAuthorizationStatusDenied){
    //Now if the location is denied.
    UIAlertController *alertController = [UIAlertController
                                          alertControllerWithTitle:@"Enable location permission"
                                          message:@"To auto detect location, please enable location services for this app"
                                          preferredStyle:UIAlertControllerStyleAlert];

    alertController.view.tintColor = AppColor;
    UIAlertAction *cancelAction = [UIAlertAction
                                   actionWithTitle:@"Dismiss"
                                   style:UIAlertActionStyleCancel
                                   handler:^(UIAlertAction *action)
                                   {
                                        NSLog(@"Cancel action");
                                   }];

    UIAlertAction *goToSettings = [UIAlertAction
                                actionWithTitle:@"Settings"
                                style:UIAlertActionStyleDefault
                                handler:^(UIAlertAction *action)
                                {
                                    //Simple way to open settings module
                                    NSURL *url = [NSURL URLWithString:UIApplicationOpenSettingsURLString];
                                    [[UIApplication sharedApplication] openURL:url];
                                }];

    [alertController addAction:cancelAction];
    [alertController addAction:goToSettings];
    [self presentViewController:alertController animated:YES completion:^{
        alertController.view.tintColor = AppColor;
    }];
}
else{
    //Do whatever you want here
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-04-21T09:16:05.823

* * *

> ***Swift 3.0 & iOS 10 解决方案：***

* * *

```
self.locationManager?.requestWhenInUseAuthorization()
if CLLocationManager.locationServicesEnabled() && CLLocationManager.authorizationStatus() != CLAuthorizationStatus.denied {
            locationManager?.delegate = self
            locationManager?.desiredAccuracy = kCLLocationAccuracyBestForNavigation
            locationManager?.distanceFilter = distanceFiler
            locationManager?.startUpdatingLocation()
        }else{
            let alertView = UIAlertView(title: "Location Services Disabled!", message: "Please enable Location Based Services for better results! We promise to keep your location private", delegate: self, cancelButtonTitle: "Settings", otherButtonTitles: "Cancel")
            alertView.delegate = self
            alertView.show()
            return
        }

@objc(alertView:clickedButtonAtIndex:) func alertView(_ alertView: UIAlertView, clickedButtonAt buttonIndex: Int) {
    if buttonIndex == 0 {
            if let url = URL(string: "App-Prefs:root=LOCATION_SERVICES") {
                UIApplication.shared.open(url, completionHandler: .none)
            }
    }
    else if buttonIndex == 1 {
        //TODO for cancel
    }

} 
```

# ubuntu - Virtuoso 上的公文包可选包

> ID：15153076
> 
> 赞同：4
> 
> 时间：2013-03-01T07:59:48.587
> 
> 标签：ubuntu, virtual-machine, virtualbox, virtuoso

[我已经按照本指南](http://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VOSUbuntuNotes)在 Ubuntu VM 上安装了 Virtuoso 开源及其一些软件包（包括公文包）。一切正常，但是当我尝试访问公文包应用程序时重新启动 Virtuoso 服务器后，它失败了。错误是：

```
Error 07S01

SR180: Extra arguments to , takes only 0 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:35:38.073

您从源代码 forge 或 github 存档中构建了哪个存档，因为我建议使用 github 存储库和“develop/6”分支，因为它包含几天前的最新修复： [分支](http://virtuoso.openlinksw.com/dataspace/doc/dav/wiki/Main/VOSGitUsage)

# c# - Aes 解密器给出空字符串

> ID：15153081
> 
> 赞同：1
> 
> 时间：2013-03-01T07:59:56.157
> 
> 标签：c#, .net, cryptography, aes, rijndaelmanaged

我对 AES 加密/解密有疑问。注释代码有效，但有时会出现错误“填充无效且无法删除”，因此我更改了它，因为它在此处解释[填充无效且无法删除 使用“AesManaged”C# 解密字符串时出现异常](https://stackoverflow.com/questions/10469819/padding-is-invalid-and-cannot-be-removed-exception-while-decrypting-string-using)

但是当我尝试解密时，下面的代码给出了一个空字符串。我不知道我在哪里犯错。两个静态函数 bytesToString 和 stringToBytes 与加密无关，我在其他地方使用它们。密钥长度和块大小是可以的。我在调试器中发现了这个：

“'csEncrypt.Length' 引发了类型为 'System.NotSupportedException' 的异常”

我在 3.5 .NET Visual STudio 2008 上工作

这是来自调试器的 prtscr，您可以在将块加密后看到的长度为 0 字节，并且加密流有一些例外

[从调试器打印屏幕](http://img341.imageshack.us/img341/3254/problemmt.png)

如何解决？请给我一些线索。

```
static class Aes
{
    public static string bytesToHexString(byte[] key)
    {
        return BitConverter.ToString(key).Replace("-", String.Empty);
    }

    public static byte[] stringToBytes(string key)
    {
        return Enumerable.Range(0, key.Length)
                 .Where(x => x % 2 == 0)
                 .Select(x => Convert.ToByte(key.Substring(x, 2), 16))
                 .ToArray();
    }

    public static void generateKeyAndIv(out byte[] key, out byte[] IV)
    {
        using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
        {
            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            aesAlg.Padding = PaddingMode.None;
            //aesAlg.Mode = CipherMode.CBC;
            aesAlg.GenerateKey();
            aesAlg.GenerateIV();
            key = aesAlg.Key;
            IV = aesAlg.IV;
        }
    }
    public static string EncryptStringToString(string plainText, byte[] Key, byte[] IV)
    {
        byte[] bytes =EncryptStringToBytes_Aes(plainText, Key, IV);
        return Convert.ToBase64String(bytes);
        //return Encoding.UTF8.GetString(bytes, 0, bytes.Length);
    }

    public static string DecryptStringToString(string cipherText, byte[] Key, byte[] IV)
    {
        //byte[] bytes = Encoding.UTF8.GetBytes(cipherText);
        byte[] bytes = Convert.FromBase64String(cipherText);
        return DecryptStringFromBytes_Aes(bytes, Key, IV);
    }

    public static byte[] EncryptStringToBytes_Aes(string plainText, byte[] Key, byte[] IV)
    {
        // Check arguments. 
        if (plainText == null || plainText.Length <= 0)
            throw new ArgumentNullException("plainText");
        if (Key == null || Key.Length <= 0)
            throw new ArgumentNullException("Key");
        if (IV == null || IV.Length <= 0)
            throw new ArgumentNullException("Key");
        /*byte[] encrypted;
        // Create an AesCryptoServiceProvider object 
        // with the specified key and IV. 
        using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
        {
            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            aesAlg.Padding = PaddingMode.PKCS7;
            aesAlg.Mode = CipherMode.CBC;
            aesAlg.Key = Key;
            aesAlg.IV = IV;
            // Create a decrytor to perform the stream transform.
            ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for encryption. 
            using (MemoryStream msEncrypt = new MemoryStream())
            {
                using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                {
                    using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                    {
                        //Write all data to the stream.
                        swEncrypt.Write(plainText);
                    }
                }

                encrypted = msEncrypt.ToArray();
            }
        }*/
        byte[] encrypted;
        // Create an AesManaged object
        // with the specified key and IV.
        using (AesManaged aesAlg = new AesManaged())
        {

            // Create a decrytor to perform the stream transform.
            aesAlg.Padding = PaddingMode.None;
            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for encryption.
            using (var msEncrypt = new MemoryStream())
            using (var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
            using (var swEncrypt = new StreamWriter(csEncrypt))
            {
                swEncrypt.Write(plainText);
                csEncrypt.FlushFinalBlock();
                encrypted = msEncrypt.ToArray();
            }
        }

        //return encrypted;

        // Return the encrypted bytes from the memory stream. 
        return encrypted;

    }

    public static string DecryptStringFromBytes_Aes(byte[] cipherText, byte[] Key, byte[] IV)
    {
        // Check arguments. 
        if (cipherText == null || cipherText.Length <= 0)
            throw new ArgumentNullException("cipherText");
        if (Key == null || Key.Length <= 0)
            throw new ArgumentNullException("Key");
        if (IV == null || IV.Length <= 0)
            throw new ArgumentNullException("IV");

        // Declare the string used to hold 
        // the decrypted text. 
        string plaintext = null;

        // Create an AesCryptoServiceProvider object 
        // with the specified key and IV. 
        using (AesCryptoServiceProvider aesAlg = new AesCryptoServiceProvider())
        {
            aesAlg.BlockSize = 128;
            aesAlg.KeySize = 256;
            aesAlg.Padding = PaddingMode.PKCS7;
            aesAlg.Mode = CipherMode.CBC;
            aesAlg.Key = Key;
            aesAlg.IV = IV;
            // Create a decrytor to perform the stream transform.
            ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);

            // Create the streams used for decryption. 
            using (MemoryStream msDecrypt = new MemoryStream(cipherText))
            {
                using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                {
                    using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                    {

                        // Read the decrypted bytes from the decrypting stream 
                        // and place them in a string.
                        plaintext = srDecrypt.ReadToEnd();
                    }
                }
            }

        }

        return plaintext;

    }
} 
```

好的，也许我会多解释一下整个情况。我写了自己的安全电子邮件。我有 2x 加密。服务器和客户端之间的通信使用 RSA 和 AES 加密。用户创建的消息也由 RSA + AES 加密。

发送消息如下所示：

1.  客户端连接到服务器。
2.  它们建立安全连接（服务器发送其公钥，客户端生成 AES 密钥通过服务器的公钥对其进行加密并将其发送到服务器。之后服务器和客户端使用 AES 密钥进行通信）。
3.  客户端以 XML 格式创建消息，消息可以包含读取到 base64 并使用 AES 加密的文件。
4.  消息被写入 db。

接收消息如下所示：

1.  连接到服务器。
2.  建立安全连接。
3.  从服务器获取消息。
4.  使用 RSA 私钥解密 AES 密钥。
5.  使用解密的 AES 密钥解密消息。
6.  如果有文件，则使用 AES 和 base64_decode 将它们解密为字节并保存。

现在的问题在于大数据的加密。即使是 200-300 kB 有时也是个问题。

我发现的另一件有趣的事情是，当我通过调试器运行代码时，它可以工作，但是当我在没有它的情况下运行代码时。它不起作用。

* * *

解决方案

我找到了问题的解决方案。因为我用不同的密钥/ivs 垃圾收集器一次又一次地非常快地使用了两次 AES 加密/解密，所以垃圾收集器没有清理这些对象。解决方案是添加

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

就在 DecryptStringFromBytes_Aes 和 EncryptStringToBytes_Aes 返回值之前

我希望它能帮助像我一样遇到同样问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:13:29.213

您使用流的方式意味着没有数据写入底层流，我不知道为什么，但我确实找到了一种我已经重新设计的替代方法。

使用以下代码，您应该能够作为控制台应用程序运行，然后对其进行重塑，使其适合您的目的。让我知道事情的后续：

```
using System;
using System.IO;
using System.Security.Cryptography;
using System.Text;

namespace Encrypto
{
    public static class Program
    {
        public static void Main()
        {

            const string password = "test";
            const string text = "test";
            var cipherText = Aes.Encrypt(password, text);
            var decrypted = Aes.Decrypt(password, cipherText);

            Console.WriteLine(decrypted);
            Console.ReadKey();
        }
    }

    internal static class Aes
    {
        public static EncryptedData Encrypt(string password, string data)
        {
            return Transform(true, password, data, null) as EncryptedData;
        }

        public static string Decrypt(string password, EncryptedData data)
        {
            return Transform(false, password, data.DataString, data.SaltString) as string;
        }

        private static object Transform(bool encrypt, string password, string data, string saltString)
        {
            using (var aes = new AesManaged())
            {
                aes.Mode = CipherMode.CBC;
                aes.Padding = PaddingMode.PKCS7;
                var keyLen = aes.KeySize/8;
                var ivLen = aes.BlockSize/8;
                const int saltSize = 8;
                const int iterations = 8192;

                var salt = encrypt ? new byte[saltSize] : Convert.FromBase64String(saltString);
                if (encrypt)
                {
                    new RNGCryptoServiceProvider().GetBytes(salt);
                }

                var bcKey = new Rfc2898DeriveBytes("BLK" + password, salt, iterations).GetBytes(keyLen);
                var iv = new Rfc2898DeriveBytes("IV" + password, salt, iterations).GetBytes(ivLen);
                var macKey = new Rfc2898DeriveBytes("MAC" + password, salt, iterations).GetBytes(16);

                aes.Key = bcKey;
                aes.IV = iv;

                var rawData = encrypt ? Encoding.UTF8.GetBytes(data) : Convert.FromBase64String(data);

                using (var transform = encrypt ? aes.CreateEncryptor() : aes.CreateDecryptor())
                using (var memoryStream = encrypt ? new MemoryStream() : new MemoryStream(rawData))
                using (var cryptoStream = new CryptoStream(memoryStream, transform, encrypt ? CryptoStreamMode.Write : CryptoStreamMode.Read))
                {
                    if (encrypt)
                    {
                        cryptoStream.Write(rawData, 0, rawData.Length);
                        cryptoStream.FlushFinalBlock();
                        return new EncryptedData(salt, macKey, memoryStream.ToArray());
                    }
                    var originalData = new byte[rawData.Length];
                    var count = cryptoStream.Read(originalData, 0, originalData.Length);

                    return Encoding.UTF8.GetString(originalData, 0, count);
                }
            }
        }

        public class EncryptedData
        {
            public EncryptedData(byte[] salt, byte[] mac, byte[] data)
            {
                Salt = salt;
                MAC = mac;
                Data = data;
            }

            private byte[] Salt { get; set; }

            public string SaltString
            {
                get { return Convert.ToBase64String(Salt); }
            }

            private byte[] MAC { get; set; }

            private byte[] Data { get; set; }

            public string DataString
            {
                get { return Convert.ToBase64String(Data); }
            }
        }
    }
} 
```

提供此答案的来源：[Using AES encryption in .NET - CryptographicException says the padding is invalid and cannot be removed](https://stackoverflow.com/questions/4545387/using-aes-encryption-in-net-cryptographicexception-saying-the-padding-is-inva)

# c# - 如何关闭提示窗口？

> ID：15153082
> 
> 赞同：0
> 
> 时间：2013-03-01T08:00:09.693
> 
> 标签：c#, rfid

该程序运行正常。当出现提示并点击“无效 RFID”时，会弹出无效 RFID 消息，我可以再次扫描。但是，如果 RFID 被接受，我希望提示自动关闭。在这个程序中，提示不会自动关闭。我必须添加什么才能使提示自动关闭？

```
private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        string ramses = serialPort1.ReadLine();
        SetRFIDText(ramses);

    }

    private string dotRFID = "";
    private bool shouldClose = false;

    protected void SetRFIDText(string input)
    {
        this.Invoke(new Function(delegate()
        {
            string Hexed = new LasalleRFIDComputerRentals.BLL.DAL.Utils().HexIt(input);

            dotRFID = Hexed.Trim();
            txtRFID.Text = Hexed.Trim();

            if (txtRFID.Text.Trim() == "")
            {
                MessageBox.Show(this, "Please provide the member's RFID.", "Save Member Information", MessageBoxButtons.OK);
                txtRFID.Focus();
                return;
            }

            CustomerInfo customer = new Customer().GetCustomerByRFID(txtRFID.Text);
            if (customer.CustomerID <= 0)
            {
                MessageBox.Show(this, "Incorrect RFID.", "Validation", MessageBoxButtons.OK);
                return;
            }
            else
            {

                txtRFID.Text = "";

                if (_parentForm == "StandBy")
                {
                    Utils.CurrentCustomer.CustomerInfo = customer;
                    frmStandBy form = (frmStandBy)this.Owner;
                    form.xResult = "OK";
                    this.Close();

                }

            }
           }));

    } 
```

我尝试`this.Close();`在底部（下`form.xResult = "OK";`）使用它，但它最终挂起。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:29:10.103

好吧，我能够通过更改`This.Close();`为`This.Hide();`

# javascript - 未捕获的错误：NotSupportedError：DOM 异常 9

> ID：15153097
> 
> 赞同：0
> 
> 时间：2013-03-01T08:01:07.930
> 
> 标签：javascript, jquery, html, createjs

我正在开发一个游戏（使用 html5、createJS、Canvas），它在本地 wamp servr 上成功加载，但它在 Web 服务器上生成错误，如下所示。

```
Uncaught Error: NotSupportedError: DOM Exception 9 prototype.js:1263
document._getElementsByXPath prototype.js:1263
document.getElementsByClassName prototype.js:1272
a jquery-1.9.0.min.js:2
st.fn.extend.find jquery-1.9.0.min.js:2
st.fn.st.init jquery-1.9.0.min.js:1
st jquery-1.9.0.min.js:1
(anonymous function) index.php:95
f jquery-1.9.0.min.js:1
p.fireWith jquery-1.9.0.min.js:1
st.extend.ready jquery-1.9.0.min.js:1 
```

可能是什么原因？

感谢 Anil Kumar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T13:11:48.367

我遇到了同样的问题，并且在 ios 上的 cordova 应用程序中得到了“NotSupportedError: DOM Exception 9”，而代码在桌面 Safari 和 Chrome 中运行良好。`element.children[0].children[0]`我正在使用&访问一个 SVG 元素`element.children[0].children[1]`。元素是一个包含`div`；`children[0]`是`svg`；和`children[0]`& `children[1]`,`rect`和`text`, 分别。

DOM 似乎构造正确。

事实证明，在某些环境中，在我的移动 Safari 中，SVG 仅被视为 XML，因此您需要使用...

```
element.getElementsByTagName('rect')[0];
element.getElementsByTagName('text')[0]; 
```

之后一切都很好。

# eclipse - Grails 依赖项生成失败（ivy，Windows 7）

> ID：15153098
> 
> 赞同：3
> 
> 时间：2013-03-01T08:01:25.663
> 
> 标签：eclipse, grails, ivy, vmware-fusion

我在编译 Grails eclipse 项目时遇到问题。我正在运行 Mac OS/X (Lions)，但在 VMware 会话中使用 Windows 7 上的 Grails，因为我必须连接到 Windows 应用程序。

依赖项生成失败并出现以下错误：

```
Command terminated with an error code (see details for output)
------System.out:-----------
| Loading Grails 2.1.1
| Configuring classpath
| Error Error executing script Compile: \\vmware-host\Shared Folders\.grails\ivy-     cache\resolved-org.grails.internal-petclinic-0.1.xml (The system cannot find the path specified) (Use --stacktrace to see the full trace)
------System.err:----------- 
```

问题是目录“\\vmware-host\Shared Folders”不存在并且永远不会存在。我尝试更改 HOME、USER_HOME 环境变量，甚至在 JVM 设置中添加了 -Duser.home=c:\users\jm，但我无法更改 Grails 构建所需的临时目录。

有谁知道告诉 Grails/Ivy 使用不同的目录来工作的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:51:40.090

我曾经遇到过类似的问题，这有帮助：

```
export GRAILS_OPTS="-Dgrails.work.dir=/usr/local/share/grails -Divy.default.ivy.user.dir=/usr/local/share/ivy" 
```

# c# - 从 Db2 中获取 Byte[] 而不进行编码

> ID：15153100
> 
> 赞同：0
> 
> 时间：2013-03-01T08:01:34.597
> 
> 标签：c#, db2

在`GetEmpIDInBytes_INDIRECT`下面列出的方法中，我得到以下异常：

> 无法将“System.String”类型的对象转换为“System.Byte[]”类型。

我知道如果我使用以下行（即编码而不是 byte[] 转换）可以避免这个错误

```
result = Encoding.ASCII.GetBytes(odbcCommand.ExecuteScalar().ToString()); 
```

但我不能使用编码，因为我不知道 DB2 函数中使用的编码是什么。我需要将它作为字节 [] 从 DB2 中取回。我们怎样才能得到它？

**代码**

```
string sqlGetEncryptedEmpID_INDIRECT = String.Format(SQLGetEncryptedID_INDIRECT, empIDClearText);
byte[] empIDData_INDIRECT = (byte[])GetEmpIDInBytes_INDIRECT(sqlGetEncryptedEmpID_INDIRECT);

public const string SQLGetEncryptedID_INDIRECT = @"SELECT  SSS.id_encrypt ('E','0000000{0}') 
                                                AS ENCRYPT_ID FROM FFGLOBAL.ONE_ROW FETCH FIRST 1 ROW ONLY WITH UR;";

private byte[] GetEmpIDInBytes_INDIRECT(string sqlQuery)
    {
        byte[] result = null;
        string db2connectionString = ConfigurationManager.ConnectionStrings[UIConstants.DB2ConnectionString].ConnectionString;
        using (OdbcConnection odbcConnection = new OdbcConnection(db2connectionString))
        {
            using (OdbcCommand odbcCommand = new OdbcCommand(sqlQuery, odbcConnection))
            {
                odbcCommand.CommandType = System.Data.CommandType.Text;
                odbcConnection.Open();
                result = (byte[])odbcCommand.ExecuteScalar();
                //result = Encoding.ASCII.GetBytes(odbcCommand.ExecuteScalar().ToString());
            }
        }
        return result;
} 
```

**DB2 连接字符串**

```
<add name="DB2ConnectionString_XA"
connectionString="Driver={IBM DB2 ODBC DRIVER};Database=MyDB;Hostname=DB2GWTST;
Protocol=TCPIP;Port=3700;Uid=remotxa;Pwd=xxxx;"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:16:02.843

考虑以下方法（使用此[答案](https://stackoverflow.com/a/10380166/674700)作为参考）：

```
static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

像这样使用它：

```
result = GetBytes(odbcCommand.ExecuteScalar().ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:41:01.943

最后，我在 Db2 查询本身中使用了`CAST`AS 。`CHAR(100) FOR BIT DATA`那行得通。

```
public const string SQLGetEncryptedIDDirect =
@"SELECT  CAST ( SSS.id_encrypt ('E','0000000{0}') AS CHAR(100) FOR BIT DATA)  
AS ENCRYPT_ID FROM FFGLOBAL.ONE_ROW FETCH     FIRST 1 ROW ONLY WITH UR;"; 
```

# c++ - 多个按钮的插槽

> ID：15153101
> 
> 赞同：1
> 
> 时间：2013-03-01T08:01:43.950
> 
> 标签：c++, qt, qt4

我的应用程序中有两个浏览按钮。我需要执行`browseButtonClickHandler()`这两个按钮的功能。但问题是，我怎样才能确定点击了哪个按钮？我需要将浏览的文件夹粘贴到文本字段中。通过 ui 编辑器创建信号和槽。我已经为两者及其工作分配了功能。但唯一的困难是识别按钮。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:35:18.727

用于`QObject * QObject::sender ()`了解信号的来源。

你也可以调查一下`QSignalMapper`。在文档中，他们提到了与您的问题相同的示例

[http://doc.qt.digia.com/4.6/qsignalmapper.html#details](http://doc.qt.digia.com/4.6/qsignalmapper.html#details)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T08:19:42.683

使用 QButtonGroup。也许这个链接可以帮助。
[http://doc.qt.io/qt-4.8/qbuttongroup.html#id](http://doc.qt.io/qt-4.8/qbuttongroup.html#id)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:08:25.597

我建议创建一个按钮类的子类，它有一个索引字段和一个给出这个索引值的虚函数。我假设`browseButtonClickHandler()`你得到了一个指向按钮的指针，所以将它转换为你的按钮子类并获取索引值。

# javascript - 检测 iframe 源是否具有“同源”保护

> ID：15153106
> 
> 赞同：0
> 
> 时间：2013-03-01T08:02:14.143
> 
> 标签：javascript

我有一个脚本可以检查存储在 txt 文件中的多个 url 的加载时间：

```
$.get("imones.txt", function (data) {
        var array = data.split(/\r\n|\r|\n/) 
        var beforeLoad = (new Date()).getTime();    
        var loadTimes = [];
            var beforeTimes = [];               
        $('#frame_id').on('load', function () {                                 
            beforeTimes.push(beforeLoad);
            loadTimes.push((new Date()).getTime()); 
            $('#frame_id').attr('src', array.pop());
                $.each(loadTimes, function (index, value) { 
                    var result = (value - beforeTimes[index]) / 1000;
                        if (result < 0) {
                            result = result * (-1);
                        }   
                    $("#loadingtime" + index).html(result);
                    beforeLoad = value;
                });
        }).attr('src', array.pop());
    }); 
```

如果我的列表中有一个具有“同源”保护的 url（例如 google），它将使我的脚本崩溃并且不会检查列表中其他 url 的加载值。我在想我可以看到一个特定的 url 是否有'same origine'错误，我会改变那个 url 加载结果“不可用”或其他东西：

```
 if(url has same origine){
result = "loading time not available";
} else {
//do my calculations 
```

所以是的，在我计算加载时间之前，我能否以某种方式查看特定的 url 是否会给我“same origine”错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:03:44.380

如果您无法读取`src`iframe 的属性，则您的某些内容不是来自同一个域。

```
<iframe src="./" height="300" width="300" name="example"></iframe>
<input type="button" onclick="alert(document.getElementsByName('example')[0].src);" value="test" />
<a href="http://www.google.com" target="example">click me</a> 
```

上面的代码应该给你一个想法。但是，此代码不适用于 jsfiddle。

# javascript - 如何将“LAST_MONTH”等 Google Scripts 日期范围字符串转换为实际日期？

> ID：15153108
> 
> 赞同：0
> 
> 时间：2013-03-01T08:02:29.083
> 
> 标签：javascript, google-apps-script, google-ads-api, date-range

Google Scripts for Adwords 中的几个函数支持以下日期范围字符串：

> 今天、昨天、LAST_7_DAYS、THIS_WEEK_SUN_TODAY、LAST_WEEK、LAST_14_DAYS、LAST_30_DAYS、LAST_BUSINESS_WEEK、LAST_WEEK_SUN_SAT、THIS_MONTH、LAST_MONTH、ALL_TIME

有人会认为您将字符串传递给的函数能够将这些字符串转换为开始日期和结束日期。例如，**LAST_MONTH**将转换为开始日期**2013-02-01**和结束日期**2013-02-28**，而**TODAY**将转换为开始日期和结束日期**2013-03-01**。

Google Scripts 是否还为用户提供了一种将这些字符串解析为开始和结束日期的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:37:18.657

我在 Google Groups 上问过同样的问题（[这是答案。](https://developers.google.com/adwords/scripts/community?place=msg%2Fadwords-scripts%2FDGp5xiKRx3I%2FRb7EAnjfK3IJ)）。总而言之，在 Google Scripts 中没有实现此目的的公共方法，必须部署自定义解决方案。由于无论如何我要将 Adwords 数据导出到个人数据库，我将使用 PHP 解决这个问题，所以我不会在这里发布解决方案。

# iphone - Apple Mach-O-linker 错误？

> ID：15153109
> 
> 赞同：4
> 
> 时间：2013-03-01T08:02:35.553
> 
> 标签：iphone, facebook, twitter, sharing

亲爱的朋友们，我添加了 BMsocial.framework 用于将图像分享到 Facebook、tiwitter 和 Emai。所以我添加然后构建项目，我正在关注 Apple Mach-O-linker 错误。我正在使用 xcode 4.5.1 和 iOS 6 模拟器。

```
Ld /Users/xxxxxx/Library/Developer/Xcode/DerivedData/ShareExampleFramework-csgovwlrowaupgfvjrudqedpflug/Build/Products/Debug-iphonesimulator/ShareExample.app/ShareExample normal i386
cd /Users/xxxxxx/Downloads/BMSocialShare-master/Examples/ShareExample
setenv IPHONEOS_DEPLOYMENT_TARGET 4.0
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/xxxxxx/Library/Developer/Xcode/DerivedData/ShareExampleFramework-csgovwlrowaupgfvjrudqedpflug/Build/Products/Debug-iphonesimulator -F/Users/xxxxxx/Library/Developer/Xcode/DerivedData/ShareExampleFramework-csgovwlrowaupgfvjrudqedpflug/Build/Products/Debug-iphonesimulator -F/Users/xxxxxxx/Downloads/BMSocialShare-master/Examples/ShareExample/../../iOS/Binary -filelist /Users/xxxxxx/Library/Developer/Xcode/DerivedData/ShareExampleFramework-csgovwlrowaupgfvjrudqedpflug/Build/Intermediates/ShareExampleFramework.build/Debug-iphonesimulator/ShareExample.build/Objects-normal/i386/ShareExample.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=4.0 -framework Twitter -framework MessageUI -framework UIKit -framework Foundation -framework CoreGraphics -framework BMSocialShare -o /Users/xxxxxxx/Library/Developer/Xcode/DerivedData/ShareExampleFramework-csgovwlrowaupgfvjrudqedpflug/Build/Products/Debug-iphonesimulator/ShareExample.app/ShareExample

duplicate symbol _objc_retainedObject in:
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphonesimulator.a(arclite.o)
/Users/xxxxxxx/Downloads/BMSocialShare-master/iOS/Binary/BMSocialShare.framework/BMSocialShare(BMSocialShare)
duplicate symbol _objc_unretainedObject in:
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphonesimulator.a(arclite.o)
/Users/xxxxxxx/Downloads/BMSocialShare-master/iOS/Binary/BMSocialShare.framework/BMSocialShare(BMSocialShare)
 duplicate symbol _objc_unretainedPointer in:
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphonesimulator.a(arclite.o)
/Users/xxxxxx/Downloads/BMSocialShare-master/iOS/Binary/BMSocialShare.framework/BMSocialShare(BMSocialShare)
 ld: 3 duplicate symbols for architecture i386
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请任何人帮助我解决这个错误我是新开发 Facebook 集成到 iphone 如果它不是很好的框架那么给我一些使用完整的教程来开发共享选项

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:11:06.460

我不知道 BMsocial.framework。对于 ios5 及以上版本 ShareKit 是不错的。检查此 [http://getsharekit.com/install/](http://getsharekit.com/install/) 如果仅适用于 ios 6，则苹果添加了支持 facebook、twitter 共享的社交框架。

# c# - 使用 LINQ 创建临时工作变量？

> ID：15153111
> 
> 赞同：1
> 
> 时间：2013-03-01T08:02:41.207
> 
> 标签：c#, linq

问题：我有一个整数列表，我想获取存在两次或多次的数字。

```
List<int> firstList = new List<int> { 1, 1, 3 }; 
```

预期结果：

```
{ 1 } 
```

这可以用 LINQ 轻松完成。例如这个

```
var result = firstList.Where(c => firstList.Count(d => c == d) > 1).Distinct(); 
```

问题是这会进行不止一次的迭代。使用正常的 for 循环，我们可以达到 O(N)..

```
List<int> result = new List<int>();
HashSet<int> doubles = new HashSet<int>();
foreach (var v in firstList)
{
    if (!doubles.Contains(v))
        doubles.Add(v);
    else
        result.Add(v);
} 
```

这就是我们想要用 linq aswel 做的事情......

```
HashSet<int> doubles = new HashSet<int>();
var result = firstList.Where((c) => doubles.Contains(c) ? true : !doubles.Add(c)).ToList(); 
```

这是我唯一能想到的方法。。

**问题：** 有什么方法可以在 LINQ 中声明我的“新 HashSet”。我在想像`firstList.Aggregate((c, d = new HashSet<int>) =>`..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:06:14.460

一种简单的方法是：

```
var repeated = list.GroupBy(x => x)
                   .Where(g => g.Count() > 1)
                   .Select(g => g.Key); 
```

这只会迭代一次——它的效率会比你手工制作的解决方案略低，但应该是相当合理的——而且非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T08:47:47.093

Evelie，Eren 和 John 的答案都是正确的，它们是你能得到的最简单的。在 LINQ 的“漂亮”语法中，有一个`let`关键字可以让您引入一些东西，但这主要是由编译器以类似于`var hashset`Eren 帖子中看到的方式重写的。正如您不能“隐藏”源一样`firstList`，您通常也不能隐藏其他支持变量。至少，以**理智的方式**。

疯狂的方式存在。我所说的疯狂是指可读性和晦涩程度要低得多。

例如，让我们用变量隐藏重写 Eren 的示例：

```
var firstList = new[] { 1, 1, 3 };

var result = Enumerable.Repeat(new { list = firstList, hash = new HashSet<int>() }, 1)
                .Select(anon => anon.list.Where(x => !anon.hash.Add(x)))
                .SelectMany(_ => _); 
```

但值得吗？

此外，请不要将自己局限于标准的 LINQ 运算符。你可以很容易地介绍你自己的：

```
public static class MyOps
{
    public static IEnumerable<T> FindDuplicates<T>(this IEnumerable<T> input)
    {
        var hashSet = new HashSet<T>();
        foreach (var item in input)
            if (!hashSet.Add(item))
                yield return item;
    }
}

var firstList = new[] { 1, 1, 3 };

var result1 = firstList.FindDuplicates(); 
```

并且，通常值得花一点力气将它包装到一个新的扩展中。请注意，所有这些代码几乎与您和其他人之前提供的代码相同。它只是“很好地包装”到“变量隐藏器”或“扩展”中。

编辑：是的，这是真的，所有带有 hashset 的示例都将返回所有重复项。您可以通过两个哈希集来代替区分：一个用于重复检查，一个用于过滤重复结果。

```
public static class MyOps
{
    public static IEnumerable<T> FindDuplicates<T>(this IEnumerable<T> input)
    {
        var hashSet1 = new HashSet<T>();
        var hashSet2 = new HashSet<T>();
        foreach (var item in input)
            if (!hashSet1.Add(item)) // note the negation
                if (hashSet2.Add(item)) // note NO negation
                    yield return item;
    }
}

var firstList = new[] { 1, 1, 3 };

var result1 = firstList.FindDuplicates(); 
```

但这主要是 .distinct() 无论如何都会做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:17:37.430

从技术上讲，你可以这样做（只是你正在做的更短的方式）：

```
var hashSet = new HashSet<int>();
var filtered = firstList
    .Where(x =>
    {
        if (hashSet.Contains(x)) return true;
        hashSet.Add(x);
        return false;
    }); 
```

但我认为最好避免这种副作用，只使用上面 Jon Skeet 的方法（安全地假设它在上面:)）

**编辑：**

根据 Jon Skeet 在下面的评论，这甚至可以缩短为：

```
var hashSet = new HashSet<int>();
var filtered = firstList.Where(x => !hashSet.Add(x)); 
```

请注意，您需要小心使用一次。例如：

```
var list1 = filtered.ToList(); // correct result
var list2 = filtered.ToList(); // incorrect result (returns all numbers) 
```

# bash - 在文本文件中添加引号

> ID：15153114
> 
> 赞同：3
> 
> 时间：2013-03-01T08:02:57.393
> 
> 标签：bash, sed

我需要在列表中添加引号。稍后我将把这个列表导入邮递员。

我有一个这样的列表：

```
SurName Name email@host.foo
otherSurName otherName otheremail@host.bar 
```

我需要的是：

```
"SurName Name" email@host.foo 
```

我希望使用 sed 可以做到这一点，但无法想象如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:14:52.797

尝试这样做：

```
sed -r 's/^(.*) +(.*@.*)/"\1" \2/' file 
```

或者

```
sed -r 's/^(.*) +([^ ]+)$/"\1" \2/' file 
```

## 笔记

这种形式允许`0 to N`在名称部分有空格，`sed`命令会处理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:13:32.810

如果您的整个文件是这样订购的，您可以简单地使用 `sed -e 's/^\(.*\) \(.*\) \(.*\)$/"\1 \2" \3/'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:15:04.823

第一个引号很简单，`s/^/"/`第二个有点棘手，但是您可以使用以下模式将其锚定到电子邮件地址：`s/ *[^@ ]*@[^@]*$/"&/`，例如：

```
sed 's/^/"/; s/ *[^@ ]*@[^@]*$/"&/' file 
```

输出：

```
"SurName Name" email@host.foo
"otherSurName otherName" otheremail@host.bar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T08:19:23.540

另一个 sed 选项：

```
sed '{
s/^/"/
s/ \([^ ]*\)$/" \1/
}' inputFile 
```

在一行上做同样的事情：

```
sed 's/^/"/;s/ \([^ ]*\)$/" \1/' inputFile 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T08:21:22.913

你`awk`可以这样做：

```
awk '{$1="\""$1; $2=$2"\""}1' file 
```

测试

```
$ awk '{$1="\""$1; $2=$2"\""}1' file
"SurName Name" email@host.foo
"otherSurName otherName" otheremail@host.bar 
```

如果您还想处理只有两列的情况，请执行以下操作：

```
$ awk '{if (NF==2) $1="\""$1"\""; else {$1="\""$1; $2=$2"\""}}1' file
"SurName Name" email@host.foo
"otherSurName otherName" otheremail@host.bar
"thirdname" sdfff@sdff.go 
```

或者，如果知道只有 2 或 3 列，您可以缩短一点：

```
awk '{$1="\""$1;$(NF-1)=$(NF-1)"\""}1' file 
```

如果要处理没有名称的行，请执行以下操作：

```
awk '{if(NF>2){$1="\""$1; $2=$2"\""}}1' file 
```

演示

```
$ awk '{if(NF>2){$1="\""$1; $2=$2"\""}}1' file
"SurName Name" email@host.foo
"otherSurName otherName" otheremail@host.bar
thirdname sdfff@sdff.go
sdfdf@sddf.su 
```

# c# - 使用 MvcBuildViews 在无效的 html 剃须刀上构建红色

> ID：15153120
> 
> 赞同：0
> 
> 时间：2013-03-01T08:03:11.183
> 
> 标签：c#, razor, msbuild

每当剃刀模板中的 html 无效时，是否可以获得红色构建？我以为它已经这样工作了……但我想不是。

```
<div>
  @Html.DisplayTextFor(model => model.FooterText) // this will be a build error 
</div>

<div class="banana> // this isn't a build error but i want it to be
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:06:42.353

当然，上面错误的 html 会在 VS 中给你警告。您可以要求 VS 将其设为错误。

[看看这个](https://stackoverflow.com/questions/2520853/warning-as-error-how-to-rid-these)

快乐编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:08:57.297

Visual Studio 的默认设置是将 html 验证错误报告为警告。您可以告诉它在“工具”->“选项”下将它们报告为错误，然后在“文本编辑器”->“HTML”->“验证”下并取消选中“作为警告”。

# php - Doctrine Entity Manager 访问

> ID：15153123
> 
> 赞同：0
> 
> 时间：2013-03-01T08:03:30.790
> 
> 标签：php, codeigniter, doctrine, entitymanager

我按照这个很棒的教程中描述的方式将我的 Codeigniter 与 Doctrine ORM 集成

[http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine-2-the-right-way/](http://www.joelverhagen.com/blog/2011/05/setting-up-codeigniter-2-with-doctrine-2-the-right-way/)。

它说 CodeIgniter 中访问控制器中的库的标准方式是 `$this->libraryName->libraryMember->someMemberFunction;`

这意味着我可以通过这种方式访问​​ Codeigniter Controller 中的 Doctrine Entity Manager `$this->doctrine->em->someMemberFunction;`

问题是我需要在其他地方访问实体管理器，而不仅仅是在控制器中。例如，我需要在一些扩展实体存储库的自定义 model_helper 类中使用实体管理器。我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T15:35:58.737

```
$ci = &get_instance();; //get instance of a codeigniter 'core'

$ci->doctrine->em-> ... etc. to use accross the framework 
```

此外，实体存储库类扩展`EntityRepository`了类`\Doctrine\ORM\EntityRepository.php`

此类具有受保护的变量 (_em)，它是`EntityManager`;的一个实例 所以最终你的 repositoryClass，假设类别和列出类别的函数看起来像这样：

```
class Categories extends EntityRepository {

public function getCategoryList($parent_id = 0) {

 $dql = "SELECT c FROM Entities\Categories c WHERE c.parent_id=:parent_id ORDER BY c.category_name ASC";

    try {
        $query = $this->_em->createQuery($dql);
        $query->setParameter('parent_id', $parent_id);

        return $query->getResult();
    } catch (Exception $e) {

        echo $e->getMessage() . '< br />';
        return;
    }
} 
```

大声笑，刚刚注意到这是很久以前发布的。

# html - iPad 在右侧留下填充空间

> ID：15153128
> 
> 赞同：2
> 
> 时间：2013-03-01T08:03:38.257
> 
> 标签：html, css, ipad

我过去遇到过这个问题，我已经解决了，但这次我无法解决！该站点有一个连续的页眉和页脚栏，宽度为 100%。在所有浏览器和屏幕尺寸中，该栏在屏幕上继续。在 iPad 上，它们会停在我导航的填充位置。任何帮助都会很棒！

CSS：

```
body {
    color: #fff;
    background: url(../images/bg.png) repeat;
}

header {
    width: 100%;
    height: 275px;
}

#topBar {
    width: 100%;
    height: 5px;
    background-color:#dd8920;
}

#headWrap {
    width: 936px;
    height:295px;
    margin: 0 auto;
    position: relative;
    padding:0px;
}

#logo {
    position:absolute;
    top:20px;
    float:left;
}

#nav {
    width:400px;
    height:35px;
    padding:30px 0px 0px 0px;
    float:right;
    text-align:right
}

#nav ul li {
    display: inline;
    padding-left:30px;  
}

#slogan {
    position:absolute;
    top:240px;
    float:right;
    right: 96px;
}

#bodyWrap {
    width:1024px;
    padding:60px 50px 200px 50px;
    margin:0 auto;

}

footer {
    width: 100%;
    height: 100%;
    background-color: #3d3d3d;
    -webkit-box-shadow: 2px -5px 5px rgba(0, 0, 0, 0.3);
    -moz-box-shadow: 2px 5px -5px rgba(0, 0, 0, 0.3);
    margin-top: 50px;
    text-align: center;
    padding-top: 20px;
    padding-bottom: 30px;
}

#footerContainer {
    width: 285px;
    height:167px;
    margin: 0 auto;
    background-image: url(../images/footerLogo.png);
    background-repeat: no-repeat;
    padding-bottom: 30px;
        background-color: #33d;

}

    <!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">

  <link rel="stylesheet" href="../css/styles.css">
  <link rel="stylesheet" href="../css/textstyles.css">
  <link rel="stylesheet" href="../css/textslidegallery.css">

  <meta name="viewport" content="width=1024">

  <link rel="Shortcut Icon" href="../images/favicon.ico">

<!-- TemplateBeginEditable name="doctitle" -->
    <title>Untitled Document</title>
<!-- TemplateEndEditable -->
<!-- TemplateBeginEditable name="head" -->
    <meta name="description" content="The HTML5 Herald">
<!-- TemplateEndEditable -->

</head>

<body>

    <header> 
            <div id="topBar"></div>

    <div id="headWrap">
                <div id="logo"> <a href="http://www.creativeantelope.com"><img src="../images/logo.png" alt="Antelope Creative Designs Logo" width="139" height="268" border="0"></a>
       </div>

<!-- TemplateBeginEditable name="nav" -->
            <div id="nav">
                <ul>
                    <li class="current"><a href="http://www.creativeantelope.com">Our Work</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact Us</a></li>
                </ul>               
      </div>
<!-- TemplateEndEditable -->

      <div id="slogan"><h1>Branding Your Business From Print To Web</h1></div>

      </div><!--headwrap-->
</header>

    <div id="bodyWrap">
        <!-- TemplateBeginEditable name="body" -->body<!-- TemplateEndEditable -->

        </div>

<footer>
        <div id="footerContainer"></div>
          <a href="http://www.stevewiant.com">designed by the groom with  <img src="../images/heart.png" alt="love" width="10" height="10" border="0"> </a>
          <br>
         <a href="mailto:wiantfamily@gmail.com"> <img src="../images/email.png" alt="email" width="15" height="20" border="0"> do you have questions?</a>
</footer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:24:41.263

padding`left`并且`right`应该是百分比`%`，这对于使您的布局更可修复也很重要

# ruby-on-rails - 如何将动态生成的pdf字符串写入ruby 1.8.7中的文件

> ID：15153129
> 
> 赞同：0
> 
> 时间：2013-03-01T08:03:43.497
> 
> 标签：ruby-on-rails, ruby, pdf, pdf-generation

我正在与网络服务交互。该网络服务返回一个字符串，我应该将其写入 pdf 文件。我必须使用 ruby​​ 1.8.7。到目前为止，我一直无法生成有效的 pdf 字符串并写入文件。如何成功地将从api获取的字符串写入pdf格式的文件。我尝试了以下变体：

```
File.open("public/data/input.pdf", "wb") do |f|
  f.write string
  # also tried: f.write Base64.decode64 string
end 
```

但到目前为止，这两种选择都不起作用。如何将数据转换为有效的 pdf 文件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T08:06:28.377

您仍然需要生成标头，以便文件系统知道它们正在处理 pdf 文件。您可以查看[wicked_pdf](https://github.com/mileszs/wicked_pdf)或[pdfkit](https://github.com/pdfkit/pdfkit)或[prawn](http://prawn.majesticseacreature.com/)来执行此操作。

# php - 使用 PHP curl 通知 GCM

> ID：15153131
> 
> 赞同：1
> 
> 时间：2013-03-01T08:03:51.393
> 
> 标签：php, google-cloud-messaging

我正在使用 curl 向 GCM 中的多个用户发送通知。在某种情况下，如果任何用户从设备上取消注册/卸载应用程序，我会收到来自 curl 响应的失败消息“未注册”。任何其他解决方案来检查 registerationid 是否有效并向用户发送通知。

卷曲代码：

```
 $url = 'https://android.googleapis.com/gcm/send';
    $fields = array(
        'registration_ids' => $registatoin_ids,
        'data'  => array( "message" => $message )
    );
    $headers = array(
        'Authorization: key=' . GOOGLE_API_KEY,
        'Content-Type: application/json'
    );
// Open connection
    $ch = curl_init();
    // Set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Disabling SSL Certificate support temporarly
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

    // Execute post
    $result = curl_exec($ch);
    $res = json_decode($result, true);

    // Close connection
    curl_close($ch); 
```

# javascript - 带有原型的异常选择按钮

> ID：15153133
> 
> 赞同：0
> 
> 时间：2013-03-01T08:04:07.447
> 
> 标签：javascript, prototypejs

我的 html 标头有：

```
<meta http-equiv="X-UA-Compatible" content="IE=7" > 
```

在javascript中我使用：

```
showButtons: function() {
    $$("#score-window .buttons")[0].show();
}, 
```

在除 IE9,10 之外的所有浏览器中，它都能完美运行。在 IE9,10 中，第一次调用函数是可以的，但接下来会失败，因为 $$ 返回“未定义”并且调用 show() 破坏了代码。

**更新**项目中包含的原型 1.6.0.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:27:27.157

对此有 2 个修复 - 首先是直接修复

```
$$('#score-window .buttons').invoke('show'); 
```

这将遍历与 CSS 选择器匹配的所有元素并`show()`在它们上运行

**仅当您只有一个带有类`.buttons`的元素时才使用它`#score-window`**

这将起作用并且不会引发错误，就好像没有与选择器匹配的元素一样它不会触发`invoke()`

**或者**

第二个修复我会检查元素是否存在然后显示它

```
if($$('#score-window .buttons').length > 0) {
    $$("#score-window .buttons")[0].show();
} 
```

这些修复将直接修复错误 - 但是我认为您需要深入研究另一个核心问题，以找出 CSS 选择器第二次找不到元素的原因。此外，如果您能够升级到 PrototypeJS 1.7.1。

# php - Dompdf 远程图像未以 pdf 格式显示

> ID：15153139
> 
> 赞同：23
> 
> 时间：2013-03-01T08:04:19.487
> 
> 标签：php, image, dompdf

在我的服务器上，通过 dompdf 生成的 pdf 没有显示图像。因为它们是远程 url 图像。（本地图像工作正常）然后我才知道它需要一些设置来渲染远程图像。

```
allow_url_fopen = true => i can not as server control is not in my hand.(and no one will suggest to do this due to security reasons)
read/write access to the DOMPDF_TEMP_DIR (already have this)
DOMPDF_ENABLE_REMOTE = true (already have this) 
```

因此，为了确定 allow_url_fopen 的问题，我在我的 localhost 中设置了 false，它现在提供与服务器相同的输出。

**所以，现在的问题是我想用 allow_url_fopen = false 以 PDF 格式显示远程图像**

*   我尝试了近 5-10 种独特的方法来做到这一点。
*   我试图在 php 文件中显示图像（通过设置标题），然后在 pdf 中显示 php 链接
*   我也尝试通过 php 的绝对路径显示图像，但没有任何效果。
*   我尝试通过函数中的 curl 获取图像，然后将其显示在 php 文件中......但没有运气。

有没有人可以建议我如何在 pdf 中显示图像。我总是得到的错误是......

```
Image not found
http://localhost/dompdf/image.php 
```

和

```
Image not found
http://localhost/dompdf/image.jpg 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2016-10-26T08:09:39.677

尝试

```
$options = new Options();
$options->set('isRemoteEnabled', true);
$dompdf = new Dompdf($options); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-04-19T10:13:54.860

我有同样的问题， [在实时服务器上找不到 dompdf 图像](https://stackoverflow.com/questions/22779495/dompdf-image-not-found-on-live-server/22911050?noredirect=1#22911050)

我找到了它的解决方案，你只需要仔细检查图像路径，

考虑您的实时服务器图像路径

```
<img src="http://www.example.com/public/images/thumb.png"> 
```

您只需将其更改为，

```
<img src="public/images/thumb.png"> 
```

注意：确保所有设置都与您所做的相同。

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-10-20T07:06:02.520

有两件事需要注意。

1.  如果使用来自同一服务器的图像，则使用完整目录路径，例如 `/var/www/html/project_folder/images/logo.jpg`

2.  列表项使用`JPEG`图像代替`png`或其他类型。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-06T07:59:14.127

在做了很多研发后，我也遇到了同样的问题，终于得到了解决方案。首先，您需要获取 dompdf 的选项，然后设置`isRemoteEnabled`为 true。

```
 $options = $dompdf->getOptions(); 
    $options->set(array('isRemoteEnabled' => true));
    $dompdf->setOptions($options); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-28T07:40:49.257

我对图像有同样的问题，我的解决方案是：

```
getcwd().'path/to/image' 
```

这个对我有用！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-21T23:02:39.057

转到库/dompdf/scr/option

更改私人 $isRemoteEnabled = false; 到私人 $isRemoteEnabled = true;

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-01T08:13:11.487

您能否在您用来打开 PDF 的机器上的网络浏览器中访问这些 URL？如果没有，PDF 阅读器也不能。

我怀疑“localhost”域意味着这些 URL 仅在生成 PDF 的 Web 服务器中可见。你需要输出一个像[http://example.com/dompdf/image.jpg这样的 url](http://example.com/dompdf/image.jpg)

（要绕过这个问题，请记住有充分的理由不使用远程图像。例如，如果查看器未连接到互联网，文档会看起来很糟糕。是否可以直接将图像嵌入到文档？）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-12-29T21:40:28.500

我想你可以添加这个

```
private function change_url_image($data, $url) {    
    $str = $url; //for example "http://localhost/yoursite/";
    $str2 = str_replace($str, "", $data);
    return $str2;
} 
```

更改图像的 url

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-09-01T10:17:50.533

我给你一个函数的例子

```
 $html = $this->output->get_output();
        $this->load->library('pdf');
        $this->dompdf->loadHtml($html);
        $this->dompdf->set_option('isRemoteEnabled', true);
        $this->dompdf->setPaper('A4', 'portrait');
        $this->dompdf->render();
        $this->dompdf->stream("studentidcard.pdf", array("Attachment"=>0)); 
```

设置 isremoteenabled true 以显示远程图像

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-11-17T22:53:09.267

嗨，我对这个问题的解决方案是在我的 php.ini 文件中添加并启用 allow_url_fopen

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-03-18T10:24:30.167

这是因为，DOMPDF 无法访问服务器上的图像，请检查您是否添加了任何保护以访问您的网页。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-10-20T13:29:04.900

对于任何在加载图像时遇到问题的人。上述解决方案提到使用绝对路径。但除非您设置 chroot 选项，否则这将不起作用。不会加载 chroot 目录之外的任何文件。将 chroot 设置为从 wordpress 的 wp 内容目录读取的示例：

```
$options = new Options();    
$options->set( 'chroot', WP_CONTENT_DIR );
$dompdf = new Dompdf( $options ); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-03-01T14:34:29.867

dompdf 目前没有区分本地域和远程域的机制，因此任何以 http://... 开头的 URL 都被视为远程。另外，任何使用基于 PHP 的中介（如 pic.php）的图像都不能使用本地路径，因为除非您通过 Web 服务器，否则不会解析 PHP。

这是一个艰难的前景，但您的页面是动态生成的。所以我看到了两个选择：

1.  下载远程图像并在本地文件系统上链接到它们
2.  下载远程图像并使用数据 URI。

由于您已经解决了使用 curl 获取图像的问题，因此您应该能够实现其中任何一个。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-01-28T08:10:23.397

我在“dompdf/dompdf_config.inc”中设置了“DOMPDF_ENABLE_REMOTE=>true”但没有工作时遇到了同样的问题。

有一件事对我有用，将图像/css的**src从****绝对更改为相对**，然后事情就完成了。在这种情况下，我的服务器上有所有的 css/图像。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-09T01:52:37.190

以防万一有人和我有同样的问题：

*   我将 src=" **https** ://" 更改为 src=" **http** ://" 并且图像加载正常。

*   我还在 a 中添加了所有内联 CSS，`<style>`而不是通过加载`<link>`

*   并确保 CSS`<style>`不在`<head>``<body>`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-03-09T08:42:15.093

我用了这行代码

```
<img src="{{ url('/frontened/images/jeevan-green-logo.png') }}" > 
```

它工作正常。谢谢。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-01-02T07:10:54.810

```
$data = {{any html content with src & href links}} 
```

有时它可能基于不安全的 url 发生，例如`https`无效的 ssl 证书。因此 dompdf 的渲染器无法访问获取内容的 url。检查您的内容是否有任何不安全的网址。如果您`process as unsafe`在浏览器中使用带有选项的 url，请使用以下方法。它将 url 替换为 abspath

```
$url = "https://example.com";
$abspath="/home/public_html/example" || getcwd();
$data =  preg_replace('#(src=\"[\s\r\n]{0,})('.$url.')#','$1'.$abspath, $data);
$data =  preg_replace('#(href=\"[\s\r\n]{0,})('.$url.')#','$1'.$abspath, $data); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-25T13:11:43.487

尝试使用带有 .jpg 图像的完整目录路径

我意识到当您远程托管文件时会出现 jpg 图像。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-11-26T09:28:20.237

$pdf=\PDF::loadView('page url',compact('data')); Laravel 穹顶 PDF

```
 $pdf->getDomPDF()->setHttpContext(
        stream_context_create([
            'ssl' => [
                'allow_self_signed'=> TRUE,
                'verify_peer' => FALSE,
                'verify_peer_name' => FALSE,
            ]
        ])
    ); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-01-12T22:17:42.820

**DOMPDF 版本 1.1.1**

我尝试了上述所有选项，唯一对我有用的方法是：

**对于绝对路径（例如：https://website/image.jpg），我必须：**

#1 - 使用这些选项：

```
$options = new Options();
$options->set('isRemoteEnabled', TRUE);
$options->set('tempDir', '/tmp'); //folder name and location can be changed
$dompdf = new Dompdf($options); 
```

#2 -在添加上述行的 php 代码的同一级别创建此**tmp文件夹。**

**对于相对路径（例如：/contents/test_image.jpg），我必须：**

#1 - 使用这些选项：

```
$options = new Options();
$options->set('tempDir', '/tmp');
$options->set('chroot', __DIR__);
$dompdf = new Dompdf($options); 
```

#2 -在添加上述行的 php 代码的同一级别创建此**tmp文件夹（如绝对路径）**

最后，**为了使用绝对路径和相对路径，**我的代码是这样的：

```
<?php

use Dompdf\Dompdf;
use Dompdf\Options;

require __DIR__ . "/vendor/autoload.php";

$options = new Options();
$options->set('isRemoteEnabled', TRUE);
$options->set('tempDir', '/tmp');
$options->set('chroot', __DIR__);

$dompdf = new Dompdf($options);

ob_start();
require __DIR__ . "/contents/my_html.php";
$dompdf->loadHtml(ob_get_clean());

$dompdf->setPaper("A4", "portrait");
$dompdf->render();
$dompdf->stream("file.pdf", ['Attachment' => false]); 
```

我的项目结构是这样的：

```
pdftest/
  |__contents/
  |  |__my_html.php
  |  |__jpg_test.jpg
  |__tmp/
  |__vendor/* //composer stuff
  |__index.php 
```

我的 html 看起来 index.php 这个

```
<html>
<header>
    <style>
        body { display:flex; flex-direction:column; align-items: center; justify-content: center; }
        table { border: 1px solid #a1a1a1; }
        table th { border-bottom: 1px solid #a1a1a1; }
    </style>
</header>
<body>
    <table>
        <tr>
            <th>column 1</th>
            <th>column 2</th>
            <th>column 3</th>
            <th>column 4</th>
        </tr>
        <tr>
            <td>Data 1</td>
            <td>
                <img width="40" src="contents/jpg_test.jpg" alt=""/>
                <img width="40" src="https://cdn.pixabay.com/photo/2021/10/14/15/11/cathedral-6709412_960_720.jpg" alt=""/>
            </td>
            <td>Data 3</td>
            <td>Data 4</td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2013-11-17T16:38:50.943

转到 dompdf_config.inc.php 文件并将变量 DOMPDF_ENABLE_REMOTE 设置为 TRUE ...

# android - 在 ListAdapter 中使用 notifyDataSetChanged()

> ID：15153140
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:04:22.493
> 
> 标签：android, android-arrayadapter

我在以下行 定义了一个**ListAdapter ：**

```
setListAdapter(
new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, listItems)); 
```

现在我想使用**notifyDataSetChanged()**

什么是正确的称呼方式？

什么是`id`适配器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:08:37.063

像这样做：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, listItems);
setListAdapter(adapter);

adapter.notifyDataSetChanged(); 
```

更优选地，`adapter`在方法之外（即在全局级别）声明您的对象，以便它也可以在类中的其他方法中访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:14:53.663

当`listItems`发生更改并且您想在 ListView 中显示它时，使用它很重要`adapter.notifyDataSetChanged()`；所以使用`adapter.notifyDataSetChanged();`更新后的 listItems

# java - 简单的 Java 正则表达式匹配器不起作用

> ID：15153146
> 
> 赞同：8
> 
> 时间：2013-03-01T08:05:00.043
> 
> 标签：java, regex

代码 ：

```
import java.util.regex.*;

public class eq {
    public static void main(String []args) {
        String str1 = "some=String&Here&modelId=324";
        Pattern rex = Pattern.compile(".*modelId=([0-9]+).*");
        Matcher m = rex.matcher(str1);
        System.out.println("id = " + m.group(1));
    }
} 
```

错误 ：

```
Exception in thread "main" java.lang.IllegalStateException: No match found 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-01T08:06:58.690

您需要先调用[`find()`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find%28%29)，`Matcher`然后才能调用`group()`查询匹配文本或对其进行操作的相关函数（`start()`、`end()`、`appendReplacement(StringBuffer sb, String replacement)`等）。

所以在你的情况下：

```
if (m.find()) {
    System.out.println("id = " + m.group(1));
} 
```

这将找到第*一个*匹配项（如果有）并提取与正则表达式匹配的第一个捕获组。如果要在输入字符串中查找所有匹配项，请更改`if`为循环。`while`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T08:07:06.773

您必须在调用之前添加此行`group()`：

```
m.find(); 
```

这会将指针移动到下一个匹配项的开头（如果有） - 如果找到匹配项，该方法将返回 true。

通常，这是您使用它的方式：

```
if (m.find()) {
    // access groups found. 
} 
```

# google-chrome-extension - 是否可以从 Chrome 开发者工具窗口将 JavaScript 注入当前加载的页面？

> ID：15153149
> 
> 赞同：4
> 
> 时间：2013-03-01T08:05:18.140
> 
> 标签：google-chrome-extension, google-chrome-devtools

我想在 Chrome devtools 窗口中添加一个面板 UI，并显示有关当前加载页面的一些信息。为了获取信息，我想在页面加载之前注入一些 JavaScript 代码，这样我就可以改变一些方法的行为。

我使用以下代码进行了测试：

清单.json

```
{
  "name": "Test Dev Panel",
  "version": "0.1",
  "description": "Extends the Developer Tools, replacing Array.toString() with a bogus one.",
  "devtools_page": "devtools.html",
  "manifest_version": 2,
  "permissions": ["<all_urls>"],
  "content_scripts": [{
    "matches": ["http://*/*"],
    "js": ["bogusarray.js"],
    "run_at": "document_start"
  }]
} 
```

开发工具.js

```
chrome.devtools.panels.create("Text Dev Panel",
                          "img/iconDev.png",
                          "panel.html"); 
```

bogusarray.js

```
Array.prototype.toString = function () {
    return 'Injected!';
  }; 
```

但是，由于 Array.toString() 的行为没有改变，JavaScript (bogusarray.js) 似乎从未注入到加载的页面中。对此有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:51:16.103

您注入的脚本 bogusarray.js 不会为页面编写脚本 - 它运行的是单独的执行上下文，并且只能查看页面的 DOM。您可以通过将`<script>`标签从内容脚本中注入 DOM 来编写页面脚本，但是要覆盖 Array 的原型之类的函数仍然为时已晚。

为了实现您的目标，您应该使用`[chrome.devtools.inspectedWindow.reload()](http://developer.chrome.com/extensions/devtools.inspectedWindow.html#method-reload)`. 只需使用`injectedScript`参数将您的覆盖传递给它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T08:52:47.010

你可以这样做：

*   在脚本的第一行设置断点
*   编辑脚本
*   继续调试

# php - 如何在php中显示来自mysql数据库的html

> ID：15153150
> 
> 赞同：6
> 
> 时间：2013-03-01T08:05:19.950
> 
> 标签：php, html, mysql, database, tags

我一直试图弄清楚如何在 mysql 表中显示 html 标签。我尝试使用addslashes、mysql_real_escape_string 以及stripslashes 来正确查看标签。每次我通过浏览器查看数据时，它都会显示 html 的文本。例子：

我在 mysql 数据库表中有这个：

```
<strong>Test</strong> 
```

在网页上查看时应显示如下： **测试**

但相反，它显示`<strong>Test</strong>`

我查看内容的 PHP 代码是：

```
<?php

require_once("inc.php"); //This includes the configuration for mysql database

?>
<html>
  <head>
  </head>
  <body>
    <p>
<?php

$conn = mysql_connect(HOST,USER,PASS) or die(mysql_error());
        mysql_select_db(NAME) or die(mysql_error());

$sql = "SELECT * FROM events";
$query = mysql_query($sql);

while($row = mysql_fetch_assoc($query)){
  echo(stripslashes($row['details'])); //The details is what contains the <strong>Test</strong>
}

mysql_close($conn) or die(mysql_error());

?>
    </p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-01T08:16:29.017

使用[htmlspecialchars_decode](http://php.net/manual/en/function.htmlspecialchars-decode.php)

替换以下行

```
 echo(stripslashes($row['details'])); //The details is what contains the <strong>Test</strong> 
```

和

```
 echo htmlspecialchars_decode(stripslashes($row['details'])); //The details is what contains the <strong>Test</strong> 
```

# php - perg_replace 字符串读取问题

> ID：15153152
> 
> 赞同：0
> 
> 时间：2013-03-01T08:05:28.263
> 
> 标签：php

在我的例子中，我只想从**$input中删除****$commonWords**数组中可用的字符串。

```
$input = "perg-replace my string perge replace";

function removeCommonWords($input){  
  $commonWords = array('my','perge');
  return preg_replace('/\b('.implode('|',$commonWords).')\b/','',$input);
} 
```

我预期的结果是：

" **perg-replace 字符串替换**"

但是，我从上面的函数得到的结果是：

“ **-replace**字符串替换”

如何告诉 perg_replace 阅读“ **perg-replace** ”有一个单词？

**更新：**

下面的代码对我有用：

```
return preg_replace('/(?<![-\'"])\b('.implode('|',$commonWords).')\b(?![-'"])i','',$input); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:11:29.937

尝试这个 ... ？

```
function removeCommonWords($input) {
  $commonWords = array('my','perge');
  return implode(' ', array_filter(explode(' ', $input), function($word) use ($commonWords) {
    return !in_array($word, $commonWords);
  }));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:17:34.513

尝试这个 ：

```
// 你的字符串。
$str = "perg-replace 我的字符串 perge 替换";

// 需要删除的关键字列表。
$keywords = array('my','perge');

// 遍历列表。
foreach($keywords 作为 $keyword)
{
    $str = preg_replace("/($keyword)/i","",$str);
}

回声 $str;

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:23:50.717

尝试这个，

```
$input = "perg-replace my string perge replace";
function removeCommonWords($input){  
  $commonWords = array('/my/','/perge/');
  return preg_replace($commonWords,'',$input);
}
echo removeCommonWords($input); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T08:28:23.793

```
$input = "perg-replace my string perge replace";

function removeCommonWords($input){  
  $commonWords = array('my','perge');
  return preg_replace('/\b('.implode('|',$commonWords).')\b/','',$input);
}

echo removeCommonWords($input); 
```

# c# - 如何根据 FlowLayoutPanel 控件中的条目数设置滚动条大小？

> ID：15153154
> 
> 赞同：2
> 
> 时间：2013-03-01T08:05:49.910
> 
> 标签：c#, flowlayoutpanel

我正在使用`FlowLayoutPanel`控件，其中我一次只动态加载 40 个控件。但我有 2000 多个控件要添加`FlowLayoutPanel`。我们在滚动事件上添加了更多的 40 个控件并删除了之前的 40 个控件等等，它已经成功完成。但问题是`FlowLayoutPanel`'s 的大小`ScrollBar`是基于 40 个控件设置的。所以用户无法理解是否有新的控件。为此，我必须`ScrollBar`根据总计数设置 's 大小，并且一次只加载 40 个控件。

这与 中的虚拟模式相同`DataGridView`。我想在`FlowLayoutPanel`.

# xamarin.ios - MonoDroid 和 MonoTouch 中的可移植类库程序集参考问题

> ID：15153155
> 
> 赞同：6
> 
> 时间：2013-03-01T08:05:49.927
> 
> 标签：xamarin.ios, xamarin.android, portable-class-library

我的项目中有问题，我有适用于 .Net 4.5、Windows Phone 8、WinRT、MonoTouch 和 MonoDroid 的 PCL，当我尝试构建引用该 PCL 错误的 MonoDroid 或 MonoTouch 项目时，错误如下：

> *错误 1 ​​类型“System.Object”在未引用的程序集中定义。您必须添加对程序集“System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的引用。
> 
> 错误 2 在未引用的程序集中定义了类型“System.Enum”。您必须添加对程序集“System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a”的引用。

我已经完成了[建议](https://stackoverflow.com/questions/13028321/portable-class-library-strong-assembly-reference-problems-in-monotouch-monodroid)的命令（sn -Vr *,b03f5f7f11d50a3a），但没有帮助。我正在使用以下配置文件：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETPortable\v4.5\Profile\Profile78 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T14:13:01.473

如果将兼容性设置为从 .NET 4.5 到 .NET 4.0.3，它将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T19:32:47.047

当我在配置文件 104 中遇到类似的错误时，我构建了诸如 System.Windows.dll 和 System.Net.dll 之类的假系统程序集，这些程序集类型转发有问题的类。我已经延迟签署了这些假程序集——幸运的是 MonoDroid 和 MonoTouch 似乎并没有太仔细地检查这些延迟签署。

这些示例位于：[https ://github.com/slodge/MvvmCross/tree/v3/PortableSupport](https://github.com/slodge/MvvmCross/tree/v3/PortableSupport)

我猜你可以用与 MonoDroid 和 MonoTouch 链接的 2 个 System.Runtime 程序集以及类型转发 System.Object 和 System.Enum 做同样的事情。

希望 Xamarin 的 PCL 支持将很快发布 - 并将包括这些 shim 程序集的正式版本。

# wpf - 如何使立方体在 3d 中沿 y 轴连续旋转，在 wpf 中保持 x 和 z 轴不变？

> ID：15153156
> 
> 赞同：1
> 
> 时间：2013-03-01T08:05:56.353
> 
> 标签：wpf, 3d, rotation

如何使 3d 立方体在 y 轴上连续旋转，在 wpf 中保持 x 和 z 轴不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:21:20.527

您可以在 a 中使用此代码`UserControl`：

```
 <Viewport3D x:Name="CubeLogo"
            Height="400" Width="400" OpacityMask="#FF000000">
    <Viewport3D.Camera>
        <PerspectiveCamera x:Name="Camara"
                           FarPlaneDistance="20"
                           NearPlaneDistance="1"
                           LookDirection="0,-0.65,-1"
                           UpDirection="0.220607433377356,0.678217480739237,-0.440841362480504"
                           Position="0,1.6,2.6" FieldOfView="40" />
    </Viewport3D.Camera>

    <Viewport3D.Triggers>
        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation From="0" To="360" Duration="0:0:6"
                            Storyboard.TargetName="LogoRotation3D"
                            Storyboard.TargetProperty="Angle" RepeatBehavior="Forever" x:Name="Animacion"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Viewport3D.Triggers>

    <ModelVisual3D>
        <ModelVisual3D.Content>
            <Model3DGroup>
                <AmbientLight Color="White"/>

                <GeometryModel3D ScrollViewer.IsDeferredScrollingEnabled="False">
                    <GeometryModel3D.Geometry>
                                <MeshGeometry3D TriangleIndices="0,1,2 3,4,5 6,7,8 9,10,11 12,13,14 15,16,17 18,19,20 21,22,23 24,25,26 27,28,29 30,31,32 33,34,35 "
                                        Normals="0,0,-1 0,0,-1 0,0,-1 0,0,-1 0,0,-1 0,0,-1 0,0,1 0,0,1 0,0,1 0,0,1 0,0,1 0,0,1 0,-1,0 0,-1,0 0,-1,0 0,-1,0 0,-1,0 0,-1,0 1,0,0 1,0,0 1,0,0 1,0,0 1,0,0 1,0,0 0,1,0 0,1,0 0,1,0 0,1,0 0,1,0 0,1,0 -1,0,0 -1,0,0 -1,0,0 -1,0,0 -1,0,0 -1,0,0"
                                        TextureCoordinates="1,1 1,0 0,0 0,0 0,1 1,1 0,1 1,1 1,0 1,0 0,0 0,1 0,1 1,1 1,0 1,0 0,0 0,1 1,1 1,0 0,0 0,0 0,1 1,1 1,0 0,0 0,1 0,1 1,1 1,0 0,0 0,1 1,1 1,1 1,0 0,0"
                                        Positions="-0.5,-0.5,-0.5 -0.5,0.5,-0.5 0.5,0.5,-0.5 0.5,0.5,-0.5 0.5,-0.5,-0.5 -0.5,-0.5,-0.5 -0.5,-0.5,0.5 0.5,-0.5,0.5 0.5,0.5,0.5 0.5,0.5,0.5 -0.5,0.5,0.5 -0.5,-0.5,0.5 -0.5,-0.5,-0.5 0.5,-0.5,-0.5 0.5,-0.5,0.5 0.5,-0.5,0.5 -0.5,-0.5,0.5 -0.5,-0.5,-0.5 0.5,-0.5,-0.5 0.5,0.5,-0.5 0.5,0.5,0.5 0.5,0.5,0.5 0.5,-0.5,0.5 0.5,-0.5,-0.5 0.5,0.5,-0.5 -0.5,0.5,-0.5 -0.5,0.5,0.5 -0.5,0.5,0.5 0.5,0.5,0.5 0.5,0.5,-0.5 -0.5,0.5,-0.5 -0.5,-0.5,-0.5 -0.5,-0.5,0.5 -0.5,-0.5,0.5 -0.5,0.5,0.5 -0.5,0.5,-0.5"/>
                    </GeometryModel3D.Geometry>

                    <GeometryModel3D.Transform>
                        <RotateTransform3D>
                            <RotateTransform3D.Rotation>
                                <AxisAngleRotation3D x:Name="LogoRotation3D"
                                                     Angle="35"
                                                     Axis="1 1 1"/>
                            </RotateTransform3D.Rotation>
                        </RotateTransform3D>
                    </GeometryModel3D.Transform>

                    <!-- Background color of the cube -->
                    <GeometryModel3D.BackMaterial>
                        <DiffuseMaterial Brush="WhiteSmoke"/>
                    </GeometryModel3D.BackMaterial>

                    <!-- Content of the cube -->
                    <GeometryModel3D.Material>
                        <DiffuseMaterial>
                            <DiffuseMaterial.Brush>
                                <VisualBrush>
                                    <VisualBrush.Visual>
                                        <Image x:Name="Logo" />
                                    </VisualBrush.Visual>
                                </VisualBrush>
                            </DiffuseMaterial.Brush>
                        </DiffuseMaterial>
                    </GeometryModel3D.Material>
                </GeometryModel3D>
            </Model3DGroup>

        </ModelVisual3D.Content>
    </ModelVisual3D>

</Viewport3D> 
```

然后在另一个中这样称呼它`XAML`：

```
xmlns:local="clr-namespace:RotatoryCube"

<local:RotatoryCube x:Name="RotatoryCubeInterface"></local:RotatoryCube> 
```

Nothe`DoubleAnimation`表示旋转将持续多长时间，`From`以及`To`角度。还要注意说明`AxisRotation3D`要`Axis`旋转哪个以及哪个角度。

# bash - 如何将子shell的输出文件描述符重定向到父shell中的输入文件描述符？

> ID：15153158
> 
> 赞同：34
> 
> 时间：2013-03-01T08:06:04.367
> 
> 标签：bash, shell, file-descriptor

（在 BASH 中）我希望子 shell 使用非 STDOUT 非 STDERR 文件描述符将一些数据传递回父 shell。我怎样才能做到这一点？最终，我很想将数据保存到父 shell 的某个变量中。

```
(
  # The following two lines show the behavior of the subshell.
  # We cannot change them.
  echo "This should go to STDOUT"
  echo "This is the data I want to pass to the parent shell" >&3
)
#...
data_from_subshell=... # Somehow assign the value of &3 of the
                       # subshell to this variable 
```

编辑：子shell 运行一个写入STDOUT 和&3 的黑盒程序。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-01T10:06:09.757

**当心，BASHISM AHEAD**（有些 posix shell 比 bash 快得多，例如 ash 或 dash，它们没有进程替换）。

您可以做一个句柄舞来将原始标准输出移动到新的描述符，以使标准输出可用于管道（从我的头顶）：

```
exec 3>&1 # open 3 to the same output as 1
run_in_subshell() { # just shortcut for the two cases below
    echo "This goes to STDOUT" >&3
    echo "And this goes to THE OTHER FUNCTION"
} 
```

现在你应该可以写：

```
while read line; do
    process $line
done < <(run_in_subshell) 
```

但该`<()`构造是一种bashism。您可以将其替换为管道

```
run_in_subshell | while read line; do
    process $line
done 
```

except than the second command *also* runs in *subshell*, because all commands in pipeline do.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T09:13:37.330

最简单的方法当然是直接在父级中捕获输出

```
data_from_subshell=$(echo "This is the data I want to pass to the parent shell") 
```

您可以使用命名管道作为从子级读取数据的替代方式

```
mkfifo /tmp/fifo 
```

现在您可以将孩子重定向到`/tmp/fifo`

```
(
    echo "This should go to STDOUT"
    echo "This is the data I want to pass to the parent shell" >/tmp/fifo
) & 
```

父母可以从那里阅读

```
read data_from_subshell </tmp/fifo 
```

* * *

另一种方法是使用[`coproc`](http://www.gnu.org/software/bash/manual/bashref.html#Coprocesses)启动子进程。这将创建一个具有双向管道的子节点，并将子节点的标准输入和标准输出重定向到管道描述符。要在子级中同时使用管道和标准输出，您必须先在父级中复制标准输出

```
exec 4>&1 # duplicate stdout for usage in client

coproc SUBSHELL (
    exec 3>&1 1>&4- # redirect fd 3 to pipe, redirect fd 1 to stdout
    (
    echo "This should go to STDOUT"
    echo "This is the data I want to pass to the parent shell" >&3
    )
)

exec 4>&- # close fd 4 in parent
read data <&${SUBSHELL[0]}
echo "Parent: $data" 
```

协进程是在 Bash 4.0 中引入的。

# php - Symfony2 中的 Doctrine2：如何查看哪个对象调用导致查询？

> ID：15153161
> 
> 赞同：6
> 
> 时间：2013-03-01T08:06:16.910
> 
> 标签：php, mysql, debugging, symfony, doctrine-orm

我将 Symfony2 与 Doctrine2 一起使用。对于我的项目，我制作了具有不同关联映射的实体。首先，我确实看到了大约 7 个请求一个对象的查询，所以我决定进行“急切加载”并将它减少到三个查询。

但是其中两个在symfony工具栏（Profiler）中看起来是一样的，直接相互调用。据我了解，我的代码中不需要第三个查询。

那么我必须在哪里设置我的断点在教义 php 文件中，以查看我的代码的哪一行使教义调用新查询？还是有另一种解决方案可以查看我如何优化此请求？

## 更新：

在考虑了 Artworkad 的答案之后，我必须更详细地进行说明。这是因为我没有通过我的控制器发出 2 个对象请求。但也许它与我的树枝有关？

### 我的控制器

```
public function gebietAction($gebiet){
        $em = $this->getDoctrine()->getEntityManager();
        /* @var $gebietobj Gebiet */
        $gebietobj = $em->getRepository('ACGSigwxBundle:Gebiet')->findOneBy(array('short' => $gebiet));
        if (!$gebietobj) {
            throw $this->createNotFoundException('Kann das angegebene Gebiet nicht finden!');
        }
        return $this->render('ACGSigwxBundle:Sigwx:sigwx.html.twig',array("gebiet"=>$gebietobj));
    } 
```

### 我的树枝模板

```
{% extends "ACGSigwxBundle::layout.html.twig" %}

{% block content %}
    <h1>{{ gebiet.getName() }}</h1>
    <p>My sectors:</p>
    <ul>
    {% for gs in gebiet.getGebietssektoren() %}
        <li>{{ gs.getSektor().getName() }}</li>
    {% endfor %}
    </ul>
{% endblock %} 
```

### 对象关联

`Gebiet n:n Sektor`与属性有关联。所以我`Gebiet 1:n Gebietsektoren n:1 Sektor`用标准的[doctrine2关联映射（[http://docs.doctrine-project.org/en/latest/reference/association-mapping.html](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html)）`ManyToOne`和`OneToMany`

### 我从探查器中列出的 3 个查询

```
SELECT t0.id AS id1, t0.name AS name2, t0.short AS short3, t0.parent_id AS parent_id4 FROM gebiet t0 WHERE t0.short = ? LIMIT 1 Parameters: [app]

SELECT t0.id AS id1, t0.position AS position2, t0.size AS size3, t0.gebiet_id AS gebiet_id4, t0.sektor_id AS sektor_id5, t6.id AS id7, t6.name AS name8, t6.typ AS typ9, t6.erweitert AS erweitert10, t6.sortorder AS sortorder11 FROM gebietssektoren t0 INNER JOIN sektor t6 ON t0.sektor_id = t6.id WHERE t0.gebiet_id = ? Parameters: [1]

SELECT t0.id AS id1, t0.position AS position2, t0.size AS size3, t0.gebiet_id AS gebiet_id4, t0.sektor_id AS sektor_id5, t6.id AS id7, t6.name AS name8, t6.typ AS typ9, t6.erweitert AS erweitert10, t6.sortorder AS sortorder11 FROM gebietssektoren t0 INNER JOIN sektor t6 ON t0.sektor_id = t6.id WHERE t0.gebiet_id = ? Parameters: [1] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T09:17:04.093

Doctrine 使用**身份映射**模式来跟踪对象。因此，每当您从数据库中获取对象时，Doctrine 都会在其 UnitOfWork 中保留对该对象的引用。基本上，它使用 ID 作为管理 UnitOfWork 内部对象的键。

例如

```
$objectA = $this->entityManager->find('EntityName', 1);
$objectB = $this->entityManager->find('EntityName', 1); 
```

只会对数据库触发一个 SELECT 查询。在第二次调用中，学说将检查身份映射，并在不进行数据库往返的情况下找到相同的 ID。即使您使用代理对象，该对象也将具有相同的 ID。

但对于

```
$objectA = $repository->findOneBy(array('name' => 'Benjamin'));
$objectB = $repository->findOneBy(array('name' => 'Benjamin')); 
```

尽管您引用了同一个对象，但您会在 SQL 日志中看到两个查询。**Doctrine 仅通过 ID 知道对象**，因此对于不同条件的查询必须转到数据库，即使它之前已执行过。

但是学说很聪明，它不会创建新实体，而是获取 ID 并查看它是否已经在内存中。

* * *

PHP 遵循写时复制范式，这是一种优化原则。只有在修改变量时才会生成变量的真实副本。因此，从数据库读取对象的请求的内存使用量与不保留变量副本的内存使用量相同。

因此，只有当您更改变量时，您的应用程序才会在内部创建新变量并消耗内存。

因此，当您调用**flush**时，原则会遍历身份映射并将每个对象的原始属性与当前值进行比较。如果检测到更改，它将排队等待 UPDATE 查询。只有实际更新的字段在数据库中被更改。

**如何优化**

因此，有时将对象标记为只读（仅插入和删除）是有意义的，因此它们不会在变更集中（您可以在 xml 映射文件或使用注释或在您的 php 代码中执行此操作）。

```
$entityManager->getUnitOfWork()->markReadOnly($entity) 
```

或仅刷新一个实体

```
$entityManager->flush($entity) 
```

# tomcat - 将日志级别设置为在 tomcat 中为 webapp 进行调试

> ID：15153163
> 
> 赞同：2
> 
> 时间：2013-03-01T08:06:22.373
> 
> 标签：tomcat, logging, log4j

我在 tomcat 中有一个 webapp，我希望将日志级别设置为调试。我没有为 webapp 使用 JULI，而是使用 log4j。我在 WEB-INF/lib 文件夹中有 log4j-1.2.15.jar，下面是 WEB-INF/classes 文件夹下的 log4j.properties 文件。

```
 log4j.rootCategory=INFO, Console
    log4j.logger.com.opensymphony.xwork2=INFO
    log4j.logger.freemarker.cache=INFO
    log4j.logger.org.apache.struts2=INFO
    log4j.logger.org.apache.xml.security=INFO
    log4j.logger.org.apache.commons.httpclient=INFO
    log4j.logger.org.mortbay.log=INFO
    log4j.logger.net.sf.ehcache=OFF
    log4j.appender.Console=org.apache.log4j.ConsoleAppender
    log4j.appender.Console.encoding=UTF-8
    log4j.appender.Console.layout=org.apache.log4j.PatternLayout
    log4j.appender.Console.layout.ConversionPattern=%d{dd MMM HH:mm} %c{1} %-5p - %m%n 
```

在类文件中我得到这样的句柄......

```
 public static Log log = LogFactory.getLog(Crossword.class); 
```

其中 Crossword 是 webapp 中的一个类。我可以看到 INFO 级别的日志被记录到 tmp 目录中的 muse.log 中，现在我需要对其进行哪些更改才能在 DEBUG 级别进行日志记录。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:21:58.240

对于您想要的包或类，将 INFO 更改为 DEBUG，如果您希望到处都使用 DEBUG，则将其更改为 rootCategory。

阅读[文档](http://logging.apache.org/log4j/1.2/manual.html)。

# sql - 比较两个字段的数量并与第三个字段比较并返回结果

> ID：15153167
> 
> 赞同：0
> 
> 时间：2013-03-01T08:06:30.687
> 
> 标签：sql, sql-server-2008

我有一个场景，我需要根据他们的代码类型比较金额，并将该金额与另一种代码类型进行比较并返回结果。

例如：

```
SELECT distinct P.TERM_KEY, C.Country_code, Amt.DAMT
FROM TERM P
      INNER JOIN Country C ON P.TERM_KEY= C.TERM_KEY 
      INNER JOIN Amount Amt ON C.COU_KEY = Amt.PARENT_KEY AND Amt.PARENT_TABLE=Country
WHERE P.Term_no = 'ABCD' AND C.Country_CD IN (50, 51) 
```

此查询的结果如下：

```
 TERM_KEY        Country_code     DAMT
    201000000085    5000             1000.00
    201000000083    5001             750.00
    201000000081    5001             1000.00
    201000000342    5000             1000.00
    201000002340    5001             750.00
    201000034733    5001             1000.00 
```

现在我需要将国家代码（50 和 51）的 Damt 与国家代码 20 进行比较，如果国家代码 20 的 Damt 和国家代码（50、51）相等，我需要将值报告为“5869”，否则如果不相等我需要将值报告为“0000”。

我将在其他情况下使用上述结果集

例子

```
Case  
WHEN C.County = 999 and C.Contry_code = '20' AND ISNULL(CDED.DAmt,0)=0 THEN '5869'  
  C.County = 999 and C.Contry_code = '20' AND ISNULL(Amt.DAmt,0)!=0 THEN '0000'
end as Country_County 
```

所以 CDED 必须返回我需要使用的结果集。怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:45:28.547

不确定您的数据是什么样的或它是如何相关的，但我只会创建 2 个子查询并加入它们。

```
select  case 
            when ISNULL(subset_5051.DAmt,0) = ISNULL(subset_20.DAmt,0) then '5869'
            else '0000'
        end
from
    (
        SELECT distinct P.TERM_KEY, C.Country_code, Amt.DAMT
        FROM TERM P
              INNER JOIN Country C ON P.TERM_KEY= C.TERM_KEY 
              INNER JOIN Amount Amt ON C.COU_KEY = Amt.PARENT_KEY AND Amt.PARENT_TABLE=Country
        WHERE P.Term_no = 'ABCD' AND C.Country_CD IN (50, 51) 
    ) as subset_5051

    [left / right / inner / full] join

    (
        SELECT distinct P.TERM_KEY, C.Country_code, Amt.DAMT
        FROM TERM P
              INNER JOIN Country C ON P.TERM_KEY= C.TERM_KEY 
              INNER JOIN Amount Amt ON C.COU_KEY = Amt.PARENT_KEY AND Amt.PARENT_TABLE=Country
        WHERE P.Term_no = 'ABCD' AND C.Country_CD IN (20) 
    ) as subset_20
    on subset_5051.[?] =  subset_20.[?] 
```

我不知道您应该使用哪种类型的联接，或者要加入哪些列，但这应该可以帮助您入门。

# java - Hadoop 配置错误

> ID：15153172
> 
> 赞同：6
> 
> 时间：2013-03-01T08:06:44.493
> 
> 标签：java, hadoop, hadoop-streaming

我正在尝试启动我的 hadoop 应用程序，但是在启动时我在日志文件中看到了这一点，有没有人知道问题出在哪里？

> 为 hdfs://10.170.4.141:9000 java.io.IOException 创建文件系统： org.apache.hadoop.conf.Configuration 中的 config().(Configuration.java:229) org.apache.hadoop.conf.Configuration。 (Configuration.java:216) 在 org.apache.hadoop.security.SecurityUtil.(SecurityUtil.java:60) 在 org.apache.hadoop.net.NetUtils.makeSocketAddr(NetUtils.java:188) 在 org.apache.hadoop .net.NetUtils.createSocketAddr(NetUtils.java:168) 在 org.apache.hadoop.hdfs.server.namenode.NameNode.getAddress(NameNode.java:198) 在 org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem .java:88) 在 org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1413) 在 org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:68) 在 org.apache.hadoop .fs。FileSystem$Cache.get(FileSystem.java:1431) at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:256) at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:125)在 org.apache.hadoop.fs.FileSystem.get(FileSystem.java:240) 在 org.apache.hadoop.fs.Path.getFileSystem(Path.java:187) 在 org.apache.hadoop.mapreduce.lib.input .FileInputFormat.addInputPath(FileInputFormat.java:372) 在 org.blismedia.VolumeReportGenerateUpdates.main(VolumeReportGenerateUpdates.java:156) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:第597章）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T21:18:27.180

我认为您遇到了[HADOOP-2851](https://issues.apache.org/jira/browse/HADOOP-2851)。可以放心地忽略此“错误”。

显然，Configuration 的构造函数将异常记录到调试日志中，尽管实际上没有抛出异常。为什么？你的猜测和我的一样好。但是这个问题在他们的项目中得到了解决，因为无法解决。“这是一个功能，而不是一个错误。”

```
public Configuration(boolean loadDefaults) {
  if (LOG.isDebugEnabled()) {
    LOG.debug(StringUtils.stringifyException(new IOException("config()")));
  }
  // ...
} 
```

# java - 如何在 java 应用服务器中使用 MongoClient 的一个实例

> ID：15153173
> 
> 赞同：0
> 
> 时间：2013-03-01T08:06:50.123
> 
> 标签：java, mongodb, jakarta-ee

根据[mongodb java concurrency driver](http://docs.mongodb.org/ecosystem/drivers/java-concurrency/)，我们可以将一个实例`MongoClient`用于多个线程，例如在应用程序服务器中。我知道这样做的唯一方法是`MongoClient`在静态块中创建：

```
static {
    MongoClient mongoClient = new MongoClient("localhost", 27017);
} 
```

问题是我无法捕捉`MongoException`并返回一些有用的信息给用户。`MongoClient`那么如何在 Java EE 应用服务器内部的多个线程之间共享单个实例呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:23:42.303

您可以执行以下操作之一：

1.  创建服务类并在第一次请求时懒惰地启动mongo连接，失败时显示错误
2.  添加一个 try catch 并静态记住错误（我真的不喜欢这个！但比在静态上下文中因异常失败更好）
3.  使用spring初始化mongo（我的首选）

# java - Java对对象的arraylist进行排序

> ID：15153177
> 
> 赞同：1
> 
> 时间：2013-03-01T08:07:00.090
> 
> 标签：java, arraylist

我试图按照[Sort an arraylist of objects in java](https://stackoverflow.com/questions/8003111/sort-an-arraylist-of-objects-in-java)的建议在我的程序中实现排序方法，但无法使其正常工作。我收到错误“找不到符号 - 方法排序（）”

Appologies 我是 Java 新手。

入学等级：

```
/**
 * The Entry class represents a persons address entry into the system.
 * It holds the persons name and address information
 * 
 */
public class Entry
{
// the person's full name
private String name;
// the steet namd or number
private String street;
// the town
private String town;
// postcode
private String postcode;

/**
 * Create a new entry with a given name and address details.
 */
public Entry(String strName, String strStreet, String strTown, String strPostcode)
{
    name = strName;
    street = strStreet;
    town = strTown;
    postcode = strPostcode;
}

/**
 * Return the address for this person. The address shows the
 * street, town and postcode for the person
 * @return address
 */
public String getAddress()
{
    return name + ", " + street + ", " + town + ", " + postcode;
}

} 
```

地址簿类：

```
import java.util.*;

/**
 * The AddressBook class represents an address book holding multiple persons details. It stores
 * the name, street, town, postcode and number of entries.
 */
public class AddressBook
{
private ArrayList < Entry > entries;

/**
 * Create a an AddressBook with no limit on the number of entries
 */
public AddressBook()
{
    entries = new ArrayList < Entry >();
}

 /**
 * Return the number of address book entries
 * @return the entry amount
 */
 public String getAddressBook()
{
    String listEntries = "Address Book\n";

    listEntries = listEntries + "\nNumber of entries: " + numberOfEntries() +"\n";

    entries.sort();

    for (int i = 0; i < entries.size(); i++) {
           System.out.println(entries.get(i));
          }
    return listEntries;
} 
```

AddressBookTextUI 类：

```
import java.util.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
* Provides a text based user interface for the AddressBook project.
* 
*/
public class AddressBookTextUI {
private AddressBook addressBook;
Scanner myScanner;

/**
 * Constructor for objects of class TextUI
 */
public AddressBookTextUI()
{
    addressBook = new AddressBook();
    myScanner = new Scanner(System.in);

}

private void fullCommand()
{
    System.out.println(addressBook.getAddressBook());
    clearScreen();
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T08:11:59.550

假设您指的是：`entries.sort();`，您需要调用[`Collections.sort(List<T> list)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)or [`Collection.sort(List<T> list, Comparator<T> comparator)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)。

`compareTo`两者之间的区别在于第一个使用默认行为，可以通过实现接口指定的方法在您将排序的对象中指定，[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)而第二个允许您传递比较器对象。这将允许您对相同的列表进行不同的排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T08:10:56.077

你需要使用`Collections.sort(List<T> list)`.

列表是一个接口。ArrayList 间接实现 List 接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:17:00.387

1.  使 Entry 实现 Comparable：

    公共类 Entry 实现 Comparable

2.  添加 int compareTo(Entry otherEntry) 方法（简化伪代码）：

    ```
    if this > otherEntry return 1
    else if this < otherEntry return -1
    else return 0 
    ```

3.  调用 Collections.sort(你的 Entries 数组)

# qt - 如何通过 MinGW 为 Qt 构建 Interbase 插件

> ID：15153182
> 
> 赞同：0
> 
> 时间：2013-03-01T08:07:27.377
> 
> 标签：qt, plugins, mingw

我想使用 MinGW 工具链为 Qt 构建 Interbase 插件。根据[Qt 文档](http://doc.qt.digia.com/stable/sql-driver.html#how-to-build-the-qibase-plugin-on-windows)，我只能通过 MSVC 来完成，但我需要 MinGW ......所以，我写了这个 .cmd 文件

```
set QTDIR=C:\Qt\4.8.0-minGW
set PATH=C:\Qt\4.8.0-minGW\bin
set PATH=%PATH%;C:\MinGW\bin
set QMAKESPEC=win32-g++

set INCLUDE=%INCLUDE%;c:\Program Files\Borland\InterBase\SDK\include
set LIB=%LIB%;c:\Program Files\Borland\InterBase\SDK\lib_ms
qmake -o Makefile ibase.pro
mingw32-make.exe
pause 
```

并从`c:\Qt\4.8.0-minGW\src\plugins\sqldrivers\ibase\`. 整个输出很长，但是有很多类似的行，这就是为什么我只显示其中一个和最后几行

```
tmp/obj/debug_shared/qsql_ibase.o: In function `ZN12QIBaseDriver24qHandleEventNo
tificationEPv':
C:\Qt\4.8.0-minGW\src\plugins\sqldrivers\ibase/../../../sql/drivers/ibase/qsql_i
base.cpp:1845: undefined reference to `isc_event_counts'
C:\Qt\4.8.0-minGW\src\plugins\sqldrivers\ibase/../../../sql/drivers/ibase/qsql_i
base.cpp:1864: undefined reference to `isc_que_events'
collect2: ld returned 1 exit status
mingw32-make.exe: *** [debug-all] Error 2 
```

你能告诉我，我应该如何实现我的目标。谢谢你。

PS我用谷歌搜索了很多，看到了这个问题-[在Qt中编译InterBase支持](https://stackoverflow.com/questions/8038649/compiling-interbase-support-in-qt)-但是没有确切的答案要做什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:45:35.790

我已经做到了！！！

`ibase.h`问题出在Interbase SDK的头文件中。有以下几行：

```
#if (defined(_MSC_VER) && defined(_WIN32)) || \
    (defined(__BORLANDC__) && (defined(__WIN32__) || defined(__OS2__)))
...
#define  ISC_EXPORT    __stdcall
... 
```

宏`ISC_EXPORT`没有定义，所有函数的声明都是错误的。当我以下列方式更改这些行时：

```
#if defined(WIN32) || defined(_WIN32) || defined(__WIN32__)
...
#define  ISC_EXPORT    __stdcall
... 
```

插件构建成功

# php - youtube-dl 和 php 执行

> ID：15153183
> 
> 赞同：7
> 
> 时间：2013-03-01T08:07:29.410
> 
> 标签：php, exec, youtube-dl

我已经在我的 CentOS 6 / Plesk 10 专用服务器上安装了 youtube-dl，并且通过 SSH，一切都像一个魅力！

问题是我正在尝试编写一个 php 脚本，该脚本需要一个 POST 参数，其中包含我要复制到服务器的视频的 URL，复制它然后用 ffmpeg 处理它。

我想我会使用 exec() 函数。

如果我回显 的结果，我可以获得输出`youtube-dl --help`，但是每次我要求 php 执行一个实际上对视频执行某些操作的命令时，它都会返回状态“1”，并且什么也不输出。

关于我做错了什么的任何想法？

这是我的php代码：

```
<?php 
    $result = array();
    $status;
    $url = $_POST['src'];
    $string = 'youtube-dl "'.$url.'" -f 18 -o "/var/www/vhosts/my.virtual.host.net/httpdocs/downloader/downloads/%(id)s.%(ext)s"';
    $string2 = 'youtube-dl --help';
    exec($string, $result, $status);
    echo json_encode(array('status' => $status, 'url_orginal'=>$url, 'url' => $result));
?> 
```

当我执行 $string2 时，我得到状态：“0”和“url”：[youtube-dl 帮助文本行]

但是当我执行 $string 时，什么也没有发生，我得到“status”：“1”，没有别的，没有下载视频。我也尝试过使用“-g”参数和变体进行模拟，但是一旦 youtube-dl 必须获取视频，它就会中断。

先感谢您 ！

编辑

我编辑了我的代码，所以它看起来像这样：

```
<?php 
    $result = array();
    $status;
    $url = $_POST['src'];
    $string = 'youtube-dl "'.$url.'" -f 18 -o "/var/www/vhosts/my.virtual.host.net/httpdocs/downloader/downloads/%(id)s.%(ext)s"';
    $string2 = 'youtube-dl --help';
    exec($string, $result, $status);
    echo json_encode(array('status' => $status, 'url_orginal'=>$url, 'url' => $result, 'command' => $string));
?> 
```

我昨天没有得到的结果是：

```
command: "youtube-dl "http://www.youtube.com/watch?v=coq9klG41R8" -f 18 -o "/var/www/vhosts/my.virtual.host.net/httpdocs/downloader/downloads/%(id)s.%(ext)s""
status: 1
url: 
    0: "[youtube] Setting language"
    1: "[youtube] coq9klG41R8: Downloading video info webpage"
    2: "[youtube] coq9klG41R8: Extracting video information"
url_orginal: "http://www.youtube.com/watch?v=coq9klG41R8" 
```

这很奇怪，考虑到 a) 昨天我得到了一个空的 url[]，并且 b) 即使现在我得到了看起来像正常的 youtube-dl 返回的内容，它只包含前 3 行，我看不到任何指定路径中的视频文件...有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T11:17:51.967

`exec`只读取标准输出，所以你错过了标准错误上的错误信息，不管它是什么。

使用以下代码也可以获取 stderr：

```
$url = 'http://www.youtube.com/watch?v=coq9klG41R8';
$template = '/var/www/vhosts/my.virtual.host.net/httpdocs/downloader/' .
            'downloads/%(id)s.%(ext)s';
$string = ('youtube-dl ' . escapeshellarg($url) . ' -f 18 -o ' .
          escapeshellarg($template));

$descriptorspec = array(
   0 => array("pipe", "r"),  // stdin
   1 => array("pipe", "w"),  // stdout
   2 => array("pipe", "w"),  // stderr
);
$process = proc_open($string, $descriptorspec, $pipes);
$stdout = stream_get_contents($pipes[1]);
fclose($pipes[1]);
$stderr = stream_get_contents($pipes[2]);
fclose($pipes[2]);
$ret = proc_close($process);
echo json_encode(array('status' => $ret, 'errors' => $stderr,
                       'url_orginal'=>$url, 'output' => $stdout,
                       'command' => $string)); 
```

很可能，您没有写入该目录的权限。要检验该理论，请检查是否

```
touch /var/www/vhosts/my.virtual.host.net/httpdocs/downloader/downloads/test 
```

作品。您可以使用[`chmod`](http://linux.die.net/man/1/chmod)和[`chown`](http://linux.die.net/man/1/chown)更改权限。

# objective-c - 横向方向不会调整我的 UIWebView

> ID：15153189
> 
> 赞同：0
> 
> 时间：2013-03-01T08:07:42.787
> 
> 标签：objective-c, html, jsp, ios6

这是我的问题的背景：

我有一个客户端应用程序 (ObjC) 调用位于服务器 (Java) 上的 player.jsp 文件，以在 UIWebView 中的应用程序中显示它。Java 应用程序是一个显示学习结构的 Web 应用程序，我必须构建一个应用程序才能在 iPad 上显示这些内容。

Web 应用程序中的播放器使用**iframe**来显示内容，而在我的 iPad 应用程序中，我只是将这个播放器加载到我的 UIWebView 中并且它可以工作，但是存在一些大小问题。这个播放器可以打开任何类型的文件，但我只关注 HTML 文件。

问题是当我切换到横向时，内容没有按应有的大小调整大小，我也无法滚动。当我在横向启动应用程序时，大小很好。然后我可以切换纵向并且调整大小也完成了。问题仅从纵向到横向出现（宽度实际上很好，但高度太高，我无法滚动......它没有调整为横向模式下应用程序启动的大小）我一直在搜索几天来的答案，一直在阅读添加：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, 
                               maximum-scale=1.0, user-scalable=no"> 
```

进入我的 HTML 文件的标题会有所帮助，但实际上并没有。它实际上甚至根本没有区别。

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:53:49.693

我有一个类似的问题，一般不是调整大小而是旋转问题，这似乎解决了它

[iOS 方向问题](https://stackoverflow.com/questions/14355028/ios-orientation-issues)

我知道它不是最好的帮助，但它并没有解决一些旋转问题以及调整大小！

# c# - 从 Outlook 插件中的 EWS 获取 ExtendedPropertyDefinition 值

> ID：15153191
> 
> 赞同：2
> 
> 时间：2013-03-01T08:08:02.713
> 
> 标签：c#, winforms, outlook-addin, exchangewebservices

我使用 EWS Web 服务对邮箱进行自动处理，并分配`ExtendedPropertyDefinition`给这样的消息：

```
Microsoft.Exchange.WebServices.Data.ExtendedPropertyDefinition extendedPropertyDefinition =
                           new Microsoft.Exchange.WebServices.Data.ExtendedPropertyDefinition(DefaultExtendedPropertySet.Common, "Archivado", MapiPropertyType.String);

  msgComplete.SetExtendedProperty(extendedPropertyDefinition, iddoc);
                             msgComplete.Update(ConflictResolutionMode.AlwaysOverwrite); 
```

另一方面，我正在开发一个 Outlook 插件，该插件需要在每次邮件点击时进行评估，如果该邮件已`ExtendedPropertyDefinition`定义此名称，但我不知道如何使用 Outlook 类从 Outlook 插件恢复扩展属性。

我不介意是否必须使用另一种属性才能从两个框架中访问。

我尝试在 Outlook 中使用以下属性，但没有成功；

```
item.Userproperties;

item.PropertyAccesor.GetProperty("Archivado"); 

item.ItemProperties; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:30:31.700

好的，我终于明白了。我必须使用 Guid 创建 ExtendedPropertyDefinition 并使用属性上的架构从 Outlook 中恢复它，如下所示：

```
//Setting the property with Exchange webservice:

string guid = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx";

Guid MY_PROPERTY_SET_GUID = new Guid(guid); 

Microsoft.Exchange.WebServices.Data.ExtendedPropertyDefinition extendedPropertyDefinition =
new Microsoft.Exchange.WebServices.Data.ExtendedPropertyDefinition(MY_PROPERTY_SET_GUID, "Archivado", MapiPropertyType.String);

//Recover the property using Outlook:

Outlook.MailItem item = (Outlook.MailItem)e.OutlookItem;

Outlook.UserProperties mailUserProperties = item.UserProperties;

dynamic property=item.PropertyAccessor.GetProperty("http://schemas.microsoft.com/mapi/string/{Outlook.MailItem item = (Outlook.MailItem)e.OutlookItem;

            Outlook.UserProperties mailUserProperties = item.UserProperties;
            dynamic property=item.PropertyAccessor.GetProperty("http://schemas.microsoft.com/mapi/string/{xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}/Archivado"); 
```

# python - Python while循环popleft（） - 错误：空双端队列

> ID：15153193
> 
> 赞同：3
> 
> 时间：2013-03-01T08:08:07.560
> 
> 标签：python, list, indexing, while-loop, deque

我正在为这个循环寻找一个更优雅的解决方案。我的双端队列是动态创建的，长度可能不同。在下面的示例中，列表只有两个项目长，最多可以有 3 个项目长。在我的应用程序中，列表最多可以包含 30 个项目。因此，我想避免编写大量 if 语句，并在双端队列为空时停止执行代码。

```
from collections import deque

my_list = [ 1,2 ]
my_deque = deque ( my_list )

while my_deque:
    alpha = my_deque.popleft()
    beta = my_deque.popleft()
    gamma = my_deque.popleft() 
```

上面的代码执行所有三个命令，并在 gamma 命令上返回“IndexError: pop from an empty deque”。我理解为什么会发生这个错误，但想知道我是否缺少一个技巧来评估列表/双端队列在 while 循环中间是否为空（或另一种循环遍历长列表的创造性方法） .

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:11:22.423

`while`您可以使用与在循环中已经执行的完全相同的方式签入：

```
while my_deque:
    alpha = my_deque.popleft()
    beta = my_deque.popleft() if my_deque else None
    gamma = my_deque.popleft() if my_deque else None 
```

但是，如果`alpha`和`beta`构成`gamma`一个工作单元，则将它们组合成一个元组并将其加入队列可能是一个更好的主意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T08:12:05.877

您可以捕获 IndexError：

```
try:
    while mydeque:
        alpha = mydeque.popleft()
        beta = mydeque.popleft()
        gamma = mydeque.popleft()
except IndexError:
    # handle empty mydeque 
```

你想做什么？为什么要检查 mydeque 是否为空？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:44:03.080

如果您知道是否提前从队列中弹出多少项目，则可以将循环设置为至少准备好那么多：

```
while len(my_deque) >= 3:
    alpha = my_deque.popleft()
    beta = my_deque.popleft()
    gamma = my_deque.popleft()

    # do stuff with alpha/beta/gamma here 
```

如果您不知道可能会请求多少项，您可以采取“请求宽恕比请求许可更容易”的方法并无条件循环：

```
while True:
    try:
        alpha = my_deque.popleft()
        if alpha > 0:
            beta = my_deque.popleft()
            gamma = my_deque.popleft()
        else:
            beta = 0
            gamma = 0
    except IndexError:
        break

    # do stuff with alpha/beta/gamma here 
```

如果 pop 发生在循环代码的广泛分离的部分，您可以为它们中的每一个使用单独的 try/except 块，而不是将整个事情包装在一个单独的部分中。

# ios - iPad上的界面方向（横向）在ios 6（xcode 4.5）上的奇怪行为

> ID：15153195
> 
> 赞同：0
> 
> 时间：2013-03-01T08:08:17.857
> 
> 标签：ios, ipad, ios6, uikit, orientation

我正在为 iPad 构建一个文字游戏应用程序。我希望它只在横向模式下运行。1\. 我在 plist 设置中只启用了横向。2\. rootview controllers view也设置了Landscape。

问题是当我在模拟器（ios 6.1）上运行它时，它以正确的横向模式运行，但是当我在 iPad 上运行它时，视图混乱并逆时针旋转 90 度。我是否需要做其他事情才能让它在 iPad 设备上正常运行。

# php - 从 for 循环插入 - 仅将选择选项值添加到一条记录

> ID：15153196
> 
> 赞同：0
> 
> 时间：2013-03-01T08:08:24.317
> 
> 标签：php

我在 for 循环中发生了插入，将 4 条记录插入数据库。我只想让这些新记录中的一个从表单中的选择菜单中获取值，该菜单包含在变量 $action 中。该菜单仅针对表单上的一条记录显示，具体取决于用户选择。

表结构为：

```
CREATE TABLE IF NOT EXISTS `pathway` (
  `pathway_pk` int(3) NOT NULL AUTO_INCREMENT,
  `case_fk` int(3) NOT NULL,
  `level` int(1) NOT NULL,
  `pathway_allowed` char(1) NOT NULL DEFAULT 'n',
  `pathway_action_fk` int(2) NOT NULL DEFAULT '0',
  `comment` text NOT NULL,
  `created` datetime NOT NULL,
  `created_by` int(3) NOT NULL,
  `updated` datetime NOT NULL,
  `updated_by` int(3) NOT NULL,
  PRIMARY KEY (`pathway_pk`)
) 
```

PHP：

```
$author_pk = $_GET['author_pk'];
$case_pk = $_GET['case_pk'];
$patient_pk = $_GET['patient_pk'];

$pathway_allowed = intval($_POST['allowed']);

$action = mysql_real_escape_string($_POST['actions']);

if(isset($_POST['submit'])){ 

$pathway_comment = array();
foreach($_POST['comment'] as $comment) {
    $pathway_comment[]= mysql_real_escape_string($comment);
}
for($i=0, $count = count($pathway_comment);$i<$count;$i++) {
    $comment = $pathway_comment[$i];
    $query = sprintf(
        "INSERT INTO pathway (             
           pathway_pk,
           case_fk,
           level,
           pathway_action_fk,
           pathway_allowed,
           comment
        ) VALUES (
           '',
           '$case_pk',
           '1',
           '$action',
           '%s',
           '$comment')", $pathway_allowed === $i ? 'y' : 'n');

       $result = mysql_query($query, $connection) or die(mysql_error()); 
```

其余的部分：

```
<script type="text/javascript">
$(document).ready(function() {
$("#jMenu").jMenu();
$("select, input, a.button, button").uniform();

$("input:radio[id='allowed_0']").click(function() { 

$("#required_p2").remove();
$("#required_p3").remove();
$("#required_p4").remove();

if($(".p1_action").text().trim()==""){
$(".p1_action").append('<div class="required" id="required_p1"><select name="actions" id="actions"><option>Select an action for this pathway...</option></select></div>');
}

$.getJSON('../scripts/get_pathway_actions.php', function(data){
    var html = '';
    var len = data.length;
    for (var i = 0; i< len; i++) {
        html += '<option value="' + data[i].pathway_action_pk + '">' + data[i].action + '</option>';
    }
    if($('select#actions option').length == 1){
    $('#actions').append(html);
    }
});
});

$("input:radio[id='allowed_1']").click(function() { 

$("#required_p1").remove();
$("#required_p3").remove();
$("#required_p4").remove();

if($(".p2_action").text().trim()==""){
$(".p2_action").append('<div class="required" id="required_p2"><select name="actions" id="actions"><option>Select an action for this pathway...</option></select></div>');
}

$.getJSON('../scripts/get_pathway_actions.php', function(data){
    var html = '';
    var len = data.length;
    for (var i = 0; i< len; i++) {
        html += '<option value="' + data[i].pathway_action_pk + '">' + data[i].action + '</option>';
    }
    if($('select#actions option').length == 1){
    $('#actions').append(html);
    }
});
});

$("input:radio[id='allowed_2']").click(function() { 

$("#required_p1").remove();
$("#required_p2").remove();
$("#required_p4").remove();

if($(".p3_action").text().trim()==""){
$(".p3_action").append('<div class="required" id="required_p3"><select name="actions" id="actions"><option>Select an action for this pathway...</option></select></div>');
}

$.getJSON('../scripts/get_pathway_actions.php', function(data){
    var html = '';
    var len = data.length;
    for (var i = 0; i< len; i++) {
        html += '<option value="' + data[i].pathway_action_pk + '">' + data[i].action + '</option>';
    }
    if($('select#actions option').length == 1){
    $('#actions').append(html);
    }
});
});

$("input:radio[id='allowed_3']").click(function() { 

$("#required_p1").remove();
$("#required_p2").remove();
$("#required_p3").remove();

if($(".p4_action").text().trim()==""){
$(".p4_action").append('<div class="required" id="required_p4"><select name="actions" id="actions"><option>Select an action for this pathway...</option></select></div>');
}

$.getJSON('../scripts/get_pathway_actions.php', function(data){
    var html = '';
    var len = data.length;
    for (var i = 0; i< len; i++) {
        html += '<option value="' + data[i].pathway_action_pk + '">' + data[i].action + '</option>';
    }
    if($('select#actions option').length == 1){
    $('#actions').append(html);
    }
});
});

});

function validate(){
valid = true;

if ( document.form.comment_1.value == ""){
    alert ( "Please enter a comment for Pathway 1" );
    valid = false;
    return valid;
}

if ( document.form.comment_2.value == ""){
    alert ( "Please enter a comment for Pathway 2" );
    valid = false;
    return valid;
}

if ( document.form.comment_3.value == ""){
    alert ( "Please enter a comment for Pathway 3" );
    valid = false;
    return valid;
}

if ( document.form.comment_4.value == ""){
    alert ( "Please enter a comment for Pathway 4" );
    valid = false;
    return valid;
}

return valid;
}

function delayer(){
window.location = "create_pathways.php?author_pk=<?php echo $author_pk; ?>&case_pk=<?php echo $case_pk; ?>&patient_pk=<?php echo $patient_pk; ?>"
}
</script>
<body>
<?php include('menu_bar.php'); ?>
<div class="settings">
  <div class="buttonn"> <a href="<?php echo $_SERVER['PHP_SELF'], '?logout=true' ?>" class="buttonn">Logout</a> </div>
  <div class="buttonn"> <a href="change_password.php?author_pk=<?php echo $author_pk; ?>" class="buttonn">Change Password</a> </div>
</div>
<div class="title">Create Pathways for Level 1<span class="message"><?php echo $message; ?></span></div>
<div class="top_form">
  <form action="" method="post" name="form" id="form" onSubmit="return validate();">
    <table width="182%" border="0" cellpadding="5">

      <tr>
        <td valign="top"><strong>Pathway</strong></td>
        <td align="center" valign="top"><strong>Allowed</strong></td>
        <td colspan="2"><strong>Blocking or Accepting Comment</strong></td>
        <td valign="top">&nbsp;</td>
      </tr>
      <tr>
        <td width="23%" valign="top"><strong>Pathway 1:</strong> No action - See again</td>
        <td width="6%" align="center" valign="top"><input type="radio" name="allowed" value="0" id="allowed_0" /></td>
        <td colspan="2"><div class="required">
            <textarea name="comment[]" id="comment_1" cols="35" rows="5"></textarea>
          </div></td>
        <td width="33%" align="left" valign="top" class="p1_action"></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 2:</strong> See again</td>
        <td align="center" valign="top"><input type="radio" name="allowed" value="1" id="allowed_1" /></td>
        <td colspan="2"><div class="required">
            <textarea name="comment[]" id="comment_2" cols="35" rows="5"></textarea>
          </div></td>
        <td width="33%" align="left" valign="top" class="p2_action"></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 3:</strong> Refer to ED</td>
        <td align="center" valign="top"><input type="radio" name="allowed" value="2" id="allowed_2" /></td>
        <td colspan="2"><div class="required">
            <textarea name="comment[]" id="comment_3" cols="35" rows="5"></textarea>
          </div></td>
        <td width="33%" align="left" valign="top" class="p3_action"></td>
      </tr>
      <tr>
        <td valign="top"><strong>Pathway 4:</strong> Refer to Specialist</td>
        <td align="center" valign="top"><input type="radio" name="allowed" value="3" id="allowed_3" /></td>
        <td colspan="2"><div class="required">
            <textarea name="comment[]" id="comment_4" cols="35" rows="5"></textarea>
          </div></td>
        <td width="33%" align="left" valign="top"  class="p4_action"></td>
      </tr>
      <tr>
        <td valign="top">&nbsp;</td>
        <td align="center" valign="top">&nbsp;</td>
        <td colspan="2"><input type="submit" name="submit" id="submit" value="Create Pathways for Level 1" /></td>
        <td>&nbsp;</td>
      </tr>

    </table>
  </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:49:55.497

我已经通过使用解决了这个问题

```
$pathway_allowed = intval($_POST['allowed']);
$action = mysql_real_escape_string($_POST['actions']);

if(isset($_POST['submit'])){ 

$inserted_ids = array();
$pathway_comment = array();

foreach($_POST['comment'] as $comment) {
    $pathway_comment[]= mysql_real_escape_string($comment);
}

for($i=0, $count = count($pathway_comment);$i<$count;$i++) {
    $comment = $pathway_comment[$i];
    $query = sprintf(
        "INSERT INTO pathway (             
           pathway_pk,
           case_fk,
           level,
           pathway_allowed,
           comment
        ) VALUES (
           '',
           '$case_pk',
           '1',
           '%s',
           '$comment')", $pathway_allowed === $i ? 'y' : 'n');

$result = mysql_query($query, $connection) or die(mysql_error());
if ($result) {
$inserted_ids[] = mysql_insert_id();     
 }
}
$query_update = "UPDATE pathway SET pathway_action_fk = '$action' WHERE pathway_pk IN (" . implode(",", $inserted_ids) . ") AND pathway_allowed = 'y'";
$result_update = mysql_query($query_update, $connection) or die(mysql_error());
if($result_update){
$message = "- The pathways for level 1 have been created.";
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:25:31.627

浏览完您的代码后，发现所有四个文本框都是打开的，并且用户可以在 4 个框中的任何一个中插入文本。

要解决此使用：

```
if ( strlen ( trim ( $comment ) ) > 0 )
{
    //use insert query
} 
```

另一种方法是在使用之前提供一个复选框，以便使用可以选择发送东西的选项..

# javascript - 网格内的 Ext JS Combobox

> ID：15153199
> 
> 赞同：1
> 
> 时间：2013-03-01T08:08:34.257
> 
> 标签：javascript, extjs

参考[网格](http://www.walkingtree.in/forums/showthread.php?439-Combobox-inside-a-grid-setting-default-value)示例中的组合框。我能够在我的页面中做到这一点。问题是，当我更改其中一个组合框中的值时，同一行中的其余组合框也会更改，它们都具有相同的值。

我只使用了一个 javascript 和基本的 html 和 ext js。我正在使用 ext 沙箱（ext4）。

有什么帮助吗？

```
if(columnData != undefined){
        for (var i = 0; i < columnData.length; i++) 
        {

            var storedata = [];     
            for(var gr = 0;gr < gridData.itemData[0][0].length;gr++){           
                storedata.push([(gr + 1),gridData.itemData[0][0][gr]]);         
            }

            var comboRenderer = function(combo) {                    
                return function(value) {
                    alert(value);
                    alert(combo.valueField);
                    var idx = combo.store.find(combo.valueField, value);                        
                    if ( idx < 0 ) {
                        idx = 0;            
                    }                       
                    var rec = combo.store.getAt(idx);               
                    return rec.get(combo.displayField);                  
                  };
            };

            fields.push({name:columnData[i].name});             
            columns.push({text:columnData[i].name, width: 140, menuDisabled: true, sortable: false, align: 'center', forcefit: true, 
                columns: [{                 
                    text: 0,
                    draggable: false,
                    hideable: false,
                    flex: 1,
                    width: 140,
                    dataIndex: columnData[i].name,
                    menuDisabled: true, 
                    sortable: false, 
                    align: 'center',
                    editable: true,
                    renderer: comboRenderer(new Ext4.form.ComboBox({
                        id: i.toString(),
                        typeAhead: true,
                        triggerAction: 'query',
                        mode: 'queryMode',
                        autoSelect : false,
                        autoShow : true,
                        emptyText : 'Select item',
                        store: new Ext4.data.ArrayStore({
                            fields: ['id' + i, 'description' + i],
                            data : storedata
                            }),
                        displayField:'description' + i,
                        valueField: 'id' + i,
                        forceSelection: false
                    })),
                    editor: new Ext4.form.ComboBox({
                        id: i.toString(),
                        typeAhead: true,
                        triggerAction: 'query',
                        mode: 'queryMode',
                        autoSelect : false,
                        autoShow : true,
                        emptyText : 'Select item',
                        store: new Ext4.data.ArrayStore({
                            fields: ['id' + i, 'description' + i],
                            data : storedata
                            }),
                        displayField:'description' + i,
                        valueField: 'id' + i,
                        forceSelection: false
                    })
                }]
            });         
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:17:06.053

他们都共享同一个商店。您需要为每个组合框创建商店的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T03:15:30.717

不知何故，我只需要清除我的缓存，我的更新工作。tnx @A1rPhun

# r - 如何使用固定的外部层次集群创建热图

> ID：15153202
> 
> 赞同：5
> 
> 时间：2013-03-01T08:08:42.477
> 
> 标签：r, heatmap, hierarchical-clustering

我有一个矩阵数据，并想用热图将其可视化。行是物种，所以我想将系统发育树可视化到行旁边，并根据树重新排序热图的行。我知道`heatmap`R 中的函数可以创建层次聚类热图，但是如何使用我的系统发育聚类而不是图中默认创建的距离聚类？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T08:32:02.753

首先，您需要使用包`ape`将数据作为`phylo`对象读入。

```
library(ape)
dat <- read.tree(file="your/newick/file")
#or
dat <- read.tree(text="((A:4.2,B:4.2):3.1,C:7.3);") 
```

以下仅适用于您的树是超度量的。

下一步是将您的系统发育树转换为类`dendrogram`。

这是一个例子：

```
data(bird.orders) #This is already a phylo object
hc <- as.hclust(bird.orders) #Compulsory step as as.dendrogram doesn't have a method for phylo objects.
dend <- as.dendrogram(hc)
plot(dend, horiz=TRUE) 
```

![使用 plot.dendrogram 绘制系统发育树图](../Images/858f18a0be23d785c0b1250ff2200242.png)

```
mat <- matrix(rnorm(23*23),nrow=23, dimnames=list(sample(bird.orders$tip, 23), sample(bird.orders$tip, 23))) #Some random data to plot 
```

首先我们需要根据系统发育树中的顺序对矩阵进行排序：

```
ord.mat <- mat[bird.orders$tip,bird.orders$tip] 
```

然后输入到`heatmap`：

```
heatmap(ord.mat, Rowv=dend, Colv=dend) 
```

![具有双向系统发育树索引的热图](../Images/777b080393a0a099dbcaf2ed71417681.png)

**编辑**：这是一个处理超度量和非超度量树的函数。

```
heatmap.phylo <- function(x, Rowp, Colp, ...){
    # x numeric matrix
    # Rowp: phylogenetic tree (class phylo) to be used in rows
    # Colp: phylogenetic tree (class phylo) to be used in columns
    # ... additional arguments to be passed to image function
    x <- x[Rowp$tip, Colp$tip]
    xl <- c(0.5, ncol(x)+0.5)
    yl <- c(0.5, nrow(x)+0.5)
    layout(matrix(c(0,1,0,2,3,4,0,5,0),nrow=3, byrow=TRUE),
                  width=c(1,3,1), height=c(1,3,1))
    par(mar=rep(0,4))
    plot(Colp, direction="downwards", show.tip.label=FALSE,
               xlab="",ylab="", xaxs="i", x.lim=xl)
    par(mar=rep(0,4))
    plot(Rowp, direction="rightwards", show.tip.label=FALSE, 
               xlab="",ylab="", yaxs="i", y.lim=yl)
    par(mar=rep(0,4), xpd=TRUE)
    image((1:nrow(x))-0.5, (1:ncol(x))-0.5, x, 
           xaxs="i", yaxs="i", axes=FALSE, xlab="",ylab="", ...)
    par(mar=rep(0,4))
    plot(NA, axes=FALSE, ylab="", xlab="", yaxs="i", xlim=c(0,2), ylim=yl)
    text(rep(0,nrow(x)),1:nrow(x),Rowp$tip, pos=4)
    par(mar=rep(0,4))
    plot(NA, axes=FALSE, ylab="", xlab="", xaxs="i", ylim=c(0,2), xlim=xl)
    text(1:ncol(x),rep(2,ncol(x)),Colp$tip, srt=90, pos=2)
    } 
```

这是前面的（超度量）示例：

```
heatmap.phylo(mat, bird.orders, bird.orders) 
```

![以超测量系统发育为索引的热图](../Images/a227150bc3aab6e5fb7bec568daa4a01.png)

并使用非超测量：

```
cat("owls(((Strix_aluco:4.2,Asio_otus:4.2):3.1,Athene_noctua:7.3):6.3,Tyto_alba:13.5);",
    file = "ex.tre", sep = "\n")
tree.owls <- read.tree("ex.tre")
mat2 <- matrix(rnorm(4*4),nrow=4, 
             dimnames=list(sample(tree.owls$tip,4),sample(tree.owls$tip,4)))
is.ultrametric(tree.owls)
[1] FALSE
heatmap.phylo(mat2,tree.owls,tree.owls) 
```

![以非超谱系统发育为索引的热图](../Images/32211faa1a08b3e04ea9006344fb431a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T10:40:40.477

首先，我创建了一个可重现的示例。没有数据，我们只能猜测您想要什么。所以请下次努力做得更好（特别是你是确认用户）。例如，您可以这样做以创建*newick*格式的树：

```
tree.text='(((XXX:4.2,ZZZ:4.2):3.1,HHH:7.3):6.3,AAA:13.6);' 
```

像@plannpus 一样，我`ape`用来将此树转换为 hclust 类。不幸的是，看起来我们只能对超度量树进行转换：从根到每个尖端的距离是相同的。

```
library(ape)
tree <- read.tree(text='(((XXX:4.2,ZZZ:4.2):3.1,HHH:7.3):6.3,AAA:13.6);')
is.ultrametric(tree)
hc <- as.hclust.phylo(tree) 
```

然后我使用 dendrogramGrob from`latticeExtra`来绘制我的树。并`levelplot`从`lattice`绘制热图。

```
library(latticeExtra)
dd.col <- as.dendrogram(hc)
col.ord <- order.dendrogram(dd.col)
mat <- matrix(rnorm(4*4),nrow=4)
colnames(mat) <- tree$tip.label
rownames(mat) <- tree$tip.label
levelplot(mat[tree$tip,tree$tip],type=c('g','p'),
          aspect = "fill",
          colorkey = list(space = "left"),
          legend =
            list(right =
                   list(fun = dendrogramGrob,
                        args =
                          list(x = dd.col, 
                               side = "right",
                               size = 10))),
          panel=function(...){
            panel.fill('black',alpha=0.2)
            panel.levelplot.points(...,cex=12,pch=23)
          }
) 
```

![在此处输入图像描述](../Images/4c4fa65af4d94f905072d6308ad07a97.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T12:18:59.810

我调整了 plannapus 的答案来处理不止一棵树（还删除了一些我在此过程中不需要的选项）：

![三棵树的热图](../Images/31daedff5f4a0a61cdd9bc61c1062559.png)

```
library(ape)

heatmap.phylo <- function(x, Rowp, Colp, breaks, col, denscol="cyan", respect=F, ...){
    # x numeric matrix
    # Rowp: phylogenetic tree (class phylo) to be used in rows
    # Colp: phylogenetic tree (class phylo) to be used in columns
    # ... additional arguments to be passed to image function

    scale01 <- function(x, low = min(x), high = max(x)) {
        x <- (x - low)/(high - low)
        x
    }

    col.tip <- Colp$tip
    n.col <- 1
    if (is.null(col.tip)) {
        n.col <- length(Colp)
        col.tip <- unlist(lapply(Colp, function(t) t$tip))
        col.lengths <- unlist(lapply(Colp, function(t) length(t$tip)))
        col.fraction <- col.lengths / sum(col.lengths)
        col.heights <- unlist(lapply(Colp, function(t) max(node.depth.edgelength(t))))
        col.max_height <- max(col.heights)
    }

    row.tip <- Rowp$tip
    n.row <- 1
    if (is.null(row.tip)) {
        n.row <- length(Rowp)
        row.tip <- unlist(lapply(Rowp, function(t) t$tip))
        row.lengths <- unlist(lapply(Rowp, function(t) length(t$tip)))
        row.fraction <- row.lengths / sum(row.lengths)
        row.heights <- unlist(lapply(Rowp, function(t) max(node.depth.edgelength(t))))
        row.max_height <- max(row.heights)
    }

    cexRow <- min(1, 0.2 + 1/log10(n.row))
    cexCol <- min(1, 0.2 + 1/log10(n.col))

    x <- x[row.tip, col.tip]
    xl <- c(0.5, ncol(x)+0.5)
    yl <- c(0.5, nrow(x)+0.5)

    screen_matrix <- matrix( c(
        0,1,4,5,
        1,4,4,5,
        0,1,1,4,
        1,4,1,4,
        1,4,0,1,
        4,5,1,4
    ) / 5, byrow=T, ncol=4 )

    if (respect) {
        r <- grconvertX(1, from = "inches", to = "ndc") / grconvertY(1, from = "inches", to = "ndc")
        if (r < 1) {
            screen_matrix <- screen_matrix * matrix( c(r,r,1,1), nrow=6, ncol=4, byrow=T)
        } else {
            screen_matrix <- screen_matrix * matrix( c(1,1,1/r,1/r), nrow=6, ncol=4, byrow=T)
        }
    }

    split.screen( screen_matrix )

    screen(2)
    par(mar=rep(0,4))

    if (n.col == 1) {
        plot(Colp, direction="downwards", show.tip.label=FALSE,xaxs="i", x.lim=xl)
    } else {
        screens <- split.screen( as.matrix(data.frame( left=cumsum(col.fraction)-col.fraction, right=cumsum(col.fraction), bottom=0, top=1)))
        for (i in 1:n.col) {
            screen(screens[i])
            plot(Colp[[i]], direction="downwards", show.tip.label=FALSE,xaxs="i", x.lim=c(0.5,0.5+col.lengths[i]), y.lim=-col.max_height+col.heights[i]+c(0,col.max_height))
        }
    }

    screen(3)
    par(mar=rep(0,4))

    if (n.col == 1) {
        plot(Rowp, direction="rightwards", show.tip.label=FALSE,yaxs="i", y.lim=yl)
    } else {
        screens <- split.screen( as.matrix(data.frame( left=0, right=1, bottom=cumsum(row.fraction)-row.fraction, top=cumsum(row.fraction))) )
        for (i in 1:n.col) {
            screen(screens[i])
            plot(Rowp[[i]], direction="rightwards", show.tip.label=FALSE,yaxs="i", x.lim=c(0,row.max_height), y.lim=c(0.5,0.5+row.lengths[i]))
        }
    }

    screen(4)
    par(mar=rep(0,4), xpd=TRUE)
    image((1:nrow(x))-0.5, (1:ncol(x))-0.5, x, xaxs="i", yaxs="i", axes=FALSE, xlab="",ylab="", breaks=breaks, col=col, ...)

    screen(6)
    par(mar=rep(0,4))
    plot(NA, axes=FALSE, ylab="", xlab="", yaxs="i", xlim=c(0,2), ylim=yl)
    text(rep(0,nrow(x)),1:nrow(x),row.tip, pos=4, cex=cexCol)

    screen(5)
    par(mar=rep(0,4))
    plot(NA, axes=FALSE, ylab="", xlab="", xaxs="i", ylim=c(0,2), xlim=xl)
    text(1:ncol(x),rep(2,ncol(x)),col.tip, srt=90, adj=c(1,0.5), cex=cexRow)

    screen(1)
    par(mar = c(2, 2, 1, 1), cex = 0.75)

    symkey <- T
    tmpbreaks <- breaks
    if (symkey) {
        max.raw <- max(abs(c(x, breaks)), na.rm = TRUE)
        min.raw <- -max.raw
        tmpbreaks[1] <- -max(abs(x), na.rm = TRUE)
        tmpbreaks[length(tmpbreaks)] <- max(abs(x), na.rm = TRUE)
    } else {
        min.raw <- min(x, na.rm = TRUE)
        max.raw <- max(x, na.rm = TRUE)
    }
    z <- seq(min.raw, max.raw, length = length(col))

    image(z = matrix(z, ncol = 1), col = col, breaks = tmpbreaks, 
          xaxt = "n", yaxt = "n")
    par(usr = c(0, 1, 0, 1))
    lv <- pretty(breaks)
    xv <- scale01(as.numeric(lv), min.raw, max.raw)
    axis(1, at = xv, labels = lv)

    h <- hist(x, plot = FALSE, breaks = breaks)
    hx <- scale01(breaks, min.raw, max.raw)
    hy <- c(h$counts, h$counts[length(h$counts)])
    lines(hx, hy/max(hy) * 0.95, lwd = 1, type = "s", 
          col = denscol)
    axis(2, at = pretty(hy)/max(hy) * 0.95, pretty(hy))
    par(cex = 0.5)
    mtext(side = 2, "Count", line = 2)

    close.screen(all.screens = T)

}

tree <- read.tree(text = "(A:1,B:1);((C:1,D:2):2,E:1);((F:1,G:1,H:2):5,((I:1,J:2):2,K:1):1);", comment.char="")
N <- sum(unlist(lapply(tree, function(t) length(t$tip))))

set.seed(42)
m <- cor(matrix(rnorm(N*N), nrow=N))
rownames(m) <- colnames(m) <- LETTERS[1:N]
heatmap.phylo(m, tree, tree, col=bluered(10), breaks=seq(-1,1,length.out=11), respect=T) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-22T20:57:45.633

热图的这种精确应用已经在[phyloseq 包中](http://dx.plos.org/10.1371/journal.pone.0061217)[的`plot_heatmap`函数](http://joey711.github.io/phyloseq/plot_heatmap-examples)（基于[ggplot2](http://docs.ggplot2.org/current/)）中实现，该包是[在 GitHub 上公开/自由开发的](http://joey711.github.io/phyloseq/)。此处包含具有完整代码和结果的示例：

[http://joey711.github.io/phyloseq/plot_heatmap-examples](http://joey711.github.io/phyloseq/plot_heatmap-examples)

一个警告，而不是您在此处明确要求的内容，但`phyloseq::plot_heatmap`不会覆盖任一轴的分层树。有一个很好的理由**不**将轴排序基于层次聚类——这是因为长分支末端的索引仍然可以任意相邻，具体取决于分支在节点上的旋转方式。这一点以及基于非度量多维缩放的替代方案在[一篇关于 NeatMap 包的文章中](http://www.biomedcentral.com/1471-2105/11/45)进一步解释，该包也是为 R 编写并使用 ggplot2。这种在热图中对索引进行排序的降维（排序）方法适用于`phyloseq::plot_heatmap`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-08T20:01:23.237

虽然我的建议`phlyoseq::plot_heatmap`可以帮助您实现这一目标，但功能强大的“ggtree”包可以做到这一点，或者更多，如果在树上表示数据真的是你想要的。

一些示例显示在以下 ggtree 文档页面的顶部：

[http://www.bioconductor.org/packages/3.7/bioc/vignettes/ggtree/inst/doc/advanceTreeAnnotation.html](http://www.bioconductor.org/packages/3.7/bioc/vignettes/ggtree/inst/doc/advanceTreeAnnotation.html)

请注意，我根本不隶属于 ggtree dev。只是该项目的粉丝以及它已经可以做什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-16T07:46:42.667

在与@plannapus 沟通后，我修改了（只是一些）代码以删除`xlab=""`上述代码中的一些额外信息。在这里你会找到代码。您可以看到带有额外代码的注释行，现在新行只是删除它们。希望这可以帮助像我这样的新用户！:)

```
heatmap.phylo <- function(x, Rowp, Colp, ...){
    # x numeric matrix
    # Rowp: phylogenetic tree (class phylo) to be used in rows
    # Colp: phylogenetic tree (class phylo) to be used in columns
    # ... additional arguments to be passed to image function
    x <- x[Rowp$tip, Colp$tip]
    xl <- c(0.5, ncol(x) + 0.5)
    yl <- c(0.5, nrow(x) + 0.5)
    layout(matrix(c(0,1,0,2,3,4,0,5,0),nrow = 3, byrow = TRUE),
                  width = c(1,3,1), height = c(1,3,1))
    par(mar = rep(0,4))
    # plot(Colp, direction = "downwards", show.tip.label = FALSE,
    #            xlab = "", ylab = "", xaxs = "i", x.lim = xl)
      plot(Colp, direction = "downwards", show.tip.label = FALSE,
               xaxs = "i", x.lim = xl)
    par(mar = rep(0,4))
    # plot(Rowp, direction = "rightwards", show.tip.label = FALSE, 
    #            xlab = "", ylab = "", yaxs = "i", y.lim = yl)
    plot(Rowp, direction = "rightwards", show.tip.label = FALSE, 
               yaxs = "i", y.lim = yl)
    par(mar = rep(0,4), xpd = TRUE)
    image((1:nrow(x)) - 0.5, (1:ncol(x)) - 0.5, x, 
           #xaxs = "i", yaxs = "i", axes = FALSE, xlab = "", ylab = "", ...)
           xaxs = "i", yaxs = "i", axes = FALSE, ...)
    par(mar = rep(0,4))
    plot(NA, axes = FALSE, ylab = "", xlab = "", yaxs = "i", xlim = c(0,2), ylim = yl)
    text(rep(0, nrow(x)), 1:nrow(x), Rowp$tip, pos = 4)
    par(mar = rep(0,4))
    plot(NA, axes = FALSE, ylab = "", xlab = "", xaxs = "i", ylim = c(0,2), xlim = xl)
    text(1:ncol(x), rep(2, ncol(x)), Colp$tip, srt = 90, pos = 2)
} 
```

# c# - 使用 wsdl 工具实现模拟服务

> ID：15153205
> 
> 赞同：1
> 
> 时间：2013-03-01T08:09:01.630
> 
> 标签：c#, visual-studio-2010, web-services

我目前正在按照本教程学习如何实现模拟 Web 服务：http: [//iandykes.blogspot.nl/2008/06/creating-mock-web-services-in-net.html](http://iandykes.blogspot.nl/2008/06/creating-mock-web-services-in-net.html)

我使用的网络服务是公共网络服务：[http ://www.webservicex.net/CurrencyConvertor.asmx?WSDL](http://www.webservicex.net/CurrencyConvertor.asmx?WSDL)

所以我使用该`wsdl.exe`工具为该服务生成一个类，就像教程中解释的那样。我还将生成的`.cs`文件添加到我的解决方案项目中。

然后我在 Visual Studio 中执行以下操作来添加 Web 服务：

`Right clicked on my project -> Add Service Reference -> Advanced -> Add Web Reference`

在那里，我将 URL 添加到 Web 服务，然后单击`Add Reference`按钮。所以现在`Web References`我的项目中有一个文件夹，`CurrencyProxy`里面有一个（这就是我命名它的方式）。

根据教程，我必须做的下一步是：

> 在此 Web 服务的代码中，更改类定义，使其在生成的代码中实现接口。

那是我真正陷入困境的地方。我在哪里可以找到 Web 服务的代码隐藏文件？我不确定在这里做什么。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T08:43:46.830

当你在你的项目中添加 Web Service 时，它​​下面会有*YourWebService.asmx*和*YourWebService.asmx.cs*。在*YourWebService.asmx.cs*中，只需替换`System.Web.Services.WebService`为您之前生成的界面即可。随心所欲地实现这个接口，就是这样，模拟服务就完成了。

# c# - c#中的继承顺序

> ID：15153206
> 
> 赞同：-2
> 
> 时间：2013-03-01T08:09:05.903
> 
> 标签：c#, loops

我想知道是否假设我有一个继承接口的基类 A 说我和另一个类说 B 那么两者之间有什么区别

```
Class A : I,B
{
  // Function and Members
} 
```

和

```
Class A : B,I
{
   // Function and Members
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T08:12:59.287

您*必须*先指定类。

从 C# 4 规范的第 10.1.4 节：

> 一个类声明可以包括一个类基规范，它定义了该类的直接基类和该类直接实现的接口。
> 
> ```
> class-base:
>    : class-type
>    : interface-type-list
>    : class-type , interface-type-list 
> ```

注意没有`interface-type-list , class-type`选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T08:12:51.653

您应该始终将基类放在首位。在C#中你只能继承一个类，但是有很多接口：

```
public class MyClass : BaseClass, IInterface1, IInterface2
{
} 
```

接口的顺序无关紧要

```
public class MyClass : BaseClass, IInterface2, IInterface1
{
} 
```

# php - 在 Codeigniter Restful 服务器中加载模型函数

> ID：15153208
> 
> 赞同：0
> 
> 时间：2013-03-01T08:09:18.883
> 
> 标签：php, api, codeigniter, curl

最近我启动了宽度 Codeigniter Restful 服务器。我使用以下脚本：[https](https://github.com/philsturgeon/codeigniter-restserver) ://github.com/philsturgeon/codeigniter-restserver 。

如果我试图获取模型的属性，则 Rest 服务器返回 NULL。在普通 CI 控制器中，此功能有效。代码是：

```
require(APPPATH.'/libraries/REST_Controller.php'); 
class Api extends REST_Controller
{
    function user_post()  
    {  
        $username = $this->post('username');
        $password = $this->post('password');
        $company_code = $this->post('company_code');
        $key = $this->post('key');
        $this->CI =& get_instance();

        // Load user model
        $this->load->model('User_model');
        $this->load->model('Api_model');

        // Ip adres remote server
        $server_ip  = $_SERVER['REMOTE_ADDR'];

        // Ophalen data
        $user = $this->User_model->getApiLogin($username,$password); 
```

最后一行出现错误： $user = $this->User_model->getApiLogin($username,$password);

Api 通过 Curl 调用：

```
 $key = 'Test';
         $company_code = 'econome';  
         $username = 'jellepals';  
         $password = 'test';  

         $curl_handle = curl_init();  
         curl_setopt($curl_handle, CURLOPT_URL, 'http://jelle.testapiserver.nl/api/user/format/json');
         //curl_setopt($curl_handle, CURLOPT_VERBOSE, true);
         //curl_setopt($curl_handle, CURLOPT_FOLLOWLOCATION, true);             
         curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, 1);  
         curl_setopt($curl_handle, CURLOPT_POST, 1);  
         curl_setopt($curl_handle, CURLOPT_POSTFIELDS, array(  
             'key' => $key,  
             'username' => $username,
             'password' => $password));  
         $buffer = curl_exec($curl_handle);  
         curl_close($curl_handle);  
         $result = json_decode($buffer);  
         var_dump($result); 
```

有人知道我如何在 Restserver 中调用模型函数吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:20:44.180

简直就是这样

```
$this->load->model('category_model');
$categories = $this->category_model->get_categories_api($language_code); 
```

尝试像这样加载模型（模型的第一个字母很简单）

```
 $this->load->model('user_model');
    $this->load->model('api_model'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:08:05.480

我认为问题出在我的数据库连接中。有人在 db 类和名为 Db_handler.php 的模型之间构建了一个额外的层。从 api 调用时，这一层显然不起作用。通过这一层，我们可以使用多个数据库。添加时：

```
 var $db;

    public function __construct() {
        parent::__construct();
        $this->db = $this->load->database($this->config->item('default', 'database'), TRUE);
    } 
```

对于我的模型，连接工作正常。

感谢您对 MDeSilva 的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-01T23:36:32.013

只需使用

```
 $CI = get_instance();
            $CI->load->model('B_db');
            $result=$CI->B_db->run_query($query); 
```

# c - 尽管我包含了 dlfcn.h，但编译失败并显示“错误：'next_ioctl' undeclared (first use in this function)”

> ID：15153209
> 
> 赞同：0
> 
> 时间：2013-03-01T08:09:30.013
> 
> 标签：c, compiler-errors, ld, word-wrap

试图从[这里编译一个包装库的例子](http://scaryreasoner.wordpress.com/2007/11/17/using-ld_preload-libraries-and-glibc-backtrace-function-for-debugging/)

我必须包括`stdio.h`and `stdlib.h`，然后来到那个代码：

```
#define _GNU_SOURCE
#define _USE_GNU

#include <signal.h>
#include <execinfo.h>
#include <stdlib.h>
#include <stdio.h>
#include <dlfcn.h>

static void show_stackframe() {
  void *trace[16];
  char **messages = (char **)NULL;
  int i, trace_size = 0;

  trace_size = backtrace(trace, 16);
  messages = backtrace_symbols(trace, trace_size);
  printf("[bt] Execution path:\n");
  for (i=0; i < trace_size; ++i)
        printf("[bt] %s\n", messages[i]);
}

int ioctl(int fd, int request, void *data)
{
        char *msg;

        if (next_ioctl == NULL) {
                fprintf(stderr, "ioctl : wrapping ioctl\n");
                fflush(stderr);
                // next_ioctl = dlsym((void *) -11, /* RTLD_NEXT, */ "ioctl");
                next_ioctl = dlsym(RTLD_NEXT, "ioctl");
                fprintf(stderr, "next_ioctl = %p\n", next_ioctl);
                fflush(stderr);
                if ((msg = dlerror()) != NULL) {
                        fprintf(stderr, "ioctl: dlopen failed : %s\n", msg);
                        fflush(stderr);
                        exit(1);
                } else
                        fprintf(stderr, "ioctl: wrapping done\n");
                fflush(stderr);
        }
        if (request == 1) { /* SCSI_IOCTL_SEND_COMMAND ? */
                /* call back trace */
                fprintf(stderr, "SCSI_IOCTL_SEND_COMMAND ioctl\n");
                fflush(stderr);
                show_stackframe();
        }
        return next_ioctl(fd, request, data);
} 
```

和 Makefile

```
#
# Makefile
#

all:    libs test_ioctl

libs:   libwrap_ioctl.so

libwrap_ioctl.so:   wrap_ioctl.c
    rm -f libwrap_ioctl.so*
    gcc -fPIC -shared -Wl,-soname,libwrap_ioctl.so.1 -ldl -o libwrap_ioctl.so.1.0  wrap_ioctl.c
    ln -s libwrap_ioctl.so.1.0 libwrap_ioctl.so.1
    ln -s libwrap_ioctl.so.1 libwrap_ioctl.so

clean: 
    rm -f libwrap_ioctl.so* test_ioctl 
```

并陷入这些错误，尽管 dlfcn.h 包含在内。

```
~/my_src/native/glibc_wrapper > make
rm -f libwrap_ioctl.so*
gcc -fPIC -shared -Wl,-soname,libwrap_ioctl.so.1 -ldl -o libwrap_ioctl.so.1.0  wrap_ioctl.c
wrap_ioctl.c: In function ‘ioctl’:
wrap_ioctl.c:26: error: ‘next_ioctl’ undeclared (first use in this function)
wrap_ioctl.c:26: error: (Each undeclared identifier is reported only once
wrap_ioctl.c:26: error: for each function it appears in.)
make: *** [libwrap_ioctl.so] Ошибка 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:13:59.353

你错过了申报`next_ioctl`。

只需添加

~~无效* next_ioctl = NULL；~~

```
int (*next_ioctl) (int, int, ...) = NULL; 
```

到`main()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:14:24.200

`dlfcn.h`它本身没有定义任何名称为`next_`smth 的符号。（SUS中dlfcn.h只定义了几个`dl*`函数和`RTLD_`宏：[http](http://pubs.opengroup.org/onlinepubs/7908799/xsh/dlfcn.h.html) ://pubs.opengroup.org/onlinepubs/7908799/xsh/dlfcn.h.html ）

您应该以显式方式将其定义为程序代码中的函数指针。像这样的东西：（取自[https://port70.net/svn/misc/remac/remac.c](https://port70.net/svn/misc/remac/remac.c)或[https://github.com/itm/forward-sensor/blob/master/preload.c](https://github.com/itm/forward-sensor/blob/master/preload.c)或.. .任何谷歌搜索`"next_ioctl"`）：

```
static int (*next_ioctl) (int fd, int request, void *data) = NULL; 
```

或者，如果您想要集体阅读博客，请在博客文章中添加 ioctl 重载：[http ://scaryreasoner.wordpress.com/2007/11/17/using-ld_preload-libraries-and-glibc- backtrace-function-for-debugging/](http://scaryreasoner.wordpress.com/2007/11/17/using-ld_preload-libraries-and-glibc-backtrace-function-for-debugging/) （就在第一个巨大的代码片段之前）

> 然后，声明一个函数指针来保存来自 glibc 的“真实”ioctl() 函数的值：

```
static int (*next_ioctl)(int fd, int request, void *data) = NULL; 
```

> 然后声明您的替换 ioctl 函数：

# android - Android - 将图像视图动态添加到 ScrollView

> ID：15153215
> 
> 赞同：8
> 
> 时间：2013-03-01T08:09:53.470
> 
> 标签：android, dynamic, scrollview

我对 Android 很陌生，需要一些代码方面的帮助。

基本上我有一个硬币数组，我想在 ScrollView 中动态显示硬币的图像。每次用户添加硬币时，视图都应适当更新。

谢谢！

这是我想做的截图 - [http://i.imgur.com/3l2fxKw.png](https://i.imgur.com/3l2fxKw.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-01T08:21:14.727

试试这个样本

## 主要活动

```
public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    setContentView(R.layout.activity_main);
    LinearLayout linearLayout1 = (LinearLayout) findViewById(R.id.linearLayout1);
    for(int x=0;x<3;x++) {
        ImageView image = new ImageView(MainActivity.this);
        image.setBackgroundResource(R.drawable.ic_launcher);
        linearLayout1.addView(image);
    }
} 
```

## activity_main.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
        android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:12:44.663

研究使用[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)。

您将有一个画布对象来绘制您的图像，然后对齐硬币只是适当地映射您的像素的问题。

这是一个很好的教程： http: [//www.mindfiresolutions.com/Using-Surface-View-for-Android-1659.php](http://www.mindfiresolutions.com/Using-Surface-View-for-Android-1659.php)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-01T09:01:31.280

改用 a`GridView`并自定义您自己的适配器。Gridview 像 ListView 一样工作

# javascript - jQuery中的下一个参数是'undefined'，为什么？

> ID：15153218
> 
> 赞同：0
> 
> 时间：2013-03-01T08:10:13.283
> 
> 标签：javascript, jquery

在下面的代码中`jQuery`，为什么下一个参数是`undefined`

JavaScript：

```
(function(a,b){
    ....
})(window) 
```

这里`a=window`可是`b=undefined`，为什么会这样呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T08:12:42.500

这是一种常见的技术，可以确保您有一个真正的`undefined`值来检查，因为`undefined`window 对象的属性曾经是可写的，因此不能可靠地用于检查。由于只有一个参数被传递给函数，所以第二个参数*肯定*是`undefined`. 该变量的名称无关紧要，它可以是`undefined`但也可以`foobar`，或者在这种情况下，（因为这是保存有价值字节的最短方法）`b`。

现在您可以安全地检查变量的未定义性，因为您确定 b 的值：

```
// overwriting the global undefined property works in old browsers
undefined = 3;

(function(a,b){

    var asd; // not initialised, thus undefined

    if (asd === undefined){
       // should trigger, but won't because undefined has been overwritten to 3
    }
    if (asd === b){
       // is safe, bcause you know that b is undefined
    }

})(window) 
```

新浏览器（IE9、FF4+、Chrome）遵循 EcmaScript5 规范，`undefined`不再可写。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T08:10:46.277

因为您没有为第二个参数传递任何内容。您只通过了一个，即`window`。

你的代码

```
(function(a,b){
    ....
})(window) 
```

定义一个函数并立即调用它。上面的最后一行实际上是使用`window`参数调用函数。如果您在那里传递 2 个参数，`b`则不会未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:24:02.820

这是您尝试使用的即时 javascript 函数语法：

```
(/* function body */)(/* params */) 
```

命名函数定义如下：

```
function addNumbers(a, b){
    alert(a + b);
} 
```

你称之为：

```
addNumbers(1, 2) 
```

或者类似的立即函数（同时定义和执行）：

```
(function(a, b){
    alert(a + b);
})(1, 2) 
```

# regex - perl 正则表达式替换除 :: 以外的非单词字符

> ID：15153223
> 
> 赞同：2
> 
> 时间：2013-03-01T08:10:57.973
> 
> 标签：regex, perl

我想要一些 perl 正则表达式来替换任何非单词字符，如下所示：

```
s/\W//g; 
```

但是，如果后面有两个冒号`::`，我不想替换它们。有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T08:18:11.763

`/\W/`是`/[^\w]/`，所以`/[^\w:]/`会删除除冒号之外的所有非单词字符。

您还想删除单独的冒号 ( `/(?<!:):(?!:)/`)，所以最终的解决方案是

```
s/[^\w:]|(?<!:):(?!:)//g; 
```

# sql - 在 WHERE 子句中使用 SELECT 查询

> ID：15153226
> 
> 赞同：1
> 
> 时间：2013-03-01T08:11:15.170
> 
> 标签：sql, where

我想列出与 where 子句相关的表中的行，该子句需要比较两个表中的记录列表

```
SELECT DISTINCT (CONA.DOCUMENTID), CONA.CONTENTID 
FROM TABLEA AS CONA 
INNER JOIN TABLEB AS CTAGA ON CTAGA.CONTENTID = CONA.CONTENTID
WHERE CONA.DOCUMENTID LIKE 'PM%' 
AND (
  SELECT TAGID 
  FROM  TABLEB 
  WHERE CTAGA.CONTENTID = CONA.CONTENTID
) IN (SELECT TAGID FROM TABLEC) 
```

在上面`SELECT TAGID FROM TABLEB WHERE CTAGA.CONTENTID = CONA.CONTENTID`会有

abc,def,ghi,jkl,mno

和

`SELECT TAGID FROM TABLEC`将有 abc,def,ghi,jkl,mno,pqr,stu

是否可以检查列表 A 中的所有记录是否在列表 B 中

使用上面我另外在表中的多个值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:41:48.297

试试这个查询

```
SELECT DISTINCT (CONA.DOCUMENTID), CONA.CONTENTID 
FROM TABLEA AS CONA INNER JOIN TABLEB AS CTAGA ON CTAGA.CONTENTID = CONA.CONTENTID 
                      AND CTAGA.TAGID IN (SELECT TAGID FROM TABLEC)                    
WHERE CONA.DOCUMENTID LIKE 'PM%' 
```

或者

```
SELECT DISTINCT (CONA.DOCUMENTID), CONA.CONTENTID 
FROM TABLEA AS CONA INNER JOIN TABLEB AS CTAGA ON CTAGA.CONTENTID = CONA.CONTENTID                                          
WHERE CONA.DOCUMENTID LIKE 'PM%' AND EXISTS (
                                             SELECT 1 
                                             FROM TABLEC
                                             WHERE CTAGA.TAGID = TABLEC.TAGID
                                             ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:20:17.363

尝试这个

```
 SELECT DISTINCT (CONA.DOCUMENTID),TAGID FROM TABLEB As CTAGA
 Join TABLEC As CONA  On CTAGA.CONTENTID = CONA.CONTENTID
 Where CTGA.TAGID in (SELECT TAGID FROM TABLEC)
 AND CONA.DOCUMENTID LIKE 'PM%' 
```

# .net - 是否可以通过某种 IIS 配置文件比较两个不同 IIS 的配置？

> ID：15153230
> 
> 赞同：2
> 
> 时间：2013-03-01T08:11:22.243
> 
> 标签：.net, iis

我想要实现的是比较 TESTING 和 STAGING 环境的 IIS 设置。

是否可以从 IIS 中导出一种配置文件，该文件将代表所有设置详细信息，并使用它与位于不同环境中的 IIS 的另一个设置详细信息进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:21:48.580

一种不是特别有趣的方法是进入 IIS 管理器，在左侧的连接树中选择服务器，然后在右侧的操作菜单中选择“导出服务器包...”，这将生成一个 zip 文件，即服务器/站点/设置的全面备份，因此它可能是一个大文件。

对两台服务器都这样做，然后您可以使用[DiffMerge](http://www.sourcegear.com/diffmerge/)之类的 DIFF 工具来比较两者的输出。

**或者特别是，您会在导出的 zip 存档（ archive.xml**和**systeminfo.xml** ）的根目录中找到大部分配置数据，因此首先查看并比较它们。

# ios - 我应该在哪里持久和线程安全地在 iOS 中存储单个值？

> ID：15153232
> 
> 赞同：0
> 
> 时间：2013-03-01T08:11:26.777
> 
> 标签：ios, objective-c

我需要存储一些单个值，例如从服务器登录的用户 ID，或者例如标记该应用程序首次启动。此信息必须永久存储，当然应该有线程安全性。最好的方法是什么？据我了解，至少有两种持久存储技术——NSUserDefaults 和 Core Data。第一个不应该做我需要的，即它应该存储用户偏好，而不是技术数据，第二个应该存储数量大于 1 的关系实体，AFAIK。

是否有任何其他技术可以以线程安全的方式持久存储应用程序数据？我应该进一步了解 Core Data 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:14:59.657

`NSUSerDefaults`是你需要使用的。只要没有机密信息，您就可以在那里保存数据。**请不要** `NSUserDefaults` **用来保存密码等内容。为此，请使用钥匙串服务。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:14:50.453

使用`NSUserDefaults`. 这不仅仅是为了用户偏好。您可以在其中存储任何设置、选项、标志或数据。出于性能原因，它不应该太多（如数千个或更多条目）。

您也可以简单地将文件写入用户的文档文件夹。`NSSString`，`NSArray`并且`NSDictionary`都具有写入文件或从文件读取的方法。

# c - C - execvp() 进程间通信

> ID：15153238
> 
> 赞同：1
> 
> 时间：2013-03-01T08:11:44.723
> 
> 标签：c, pthreads, fork, ipc, pipe

大家好，我是 C 的新手，如果我很迷茫，我很抱歉。我在尝试创建这个多线程 Web 服务器时遇到问题。我正在尝试...

*   有一个线程创建一个新线程
*   让该新线程执行 execvp() 以在我的机器上调用不同的 C 程序
*   让该新线程从 execvp() 返回数据流

我正在考虑使用 pthreads 生成一个新进程来运行 execvp() 并让它通过管道返回数据。但这甚至有必要吗？pthreads不共享内存吗？

另外，我可能正在考虑使用 fork() 而不是 pthread 并让子级通过管道将数据发送回父级。

你能帮我指引正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:16:34.993

您正在寻找的是功能`fork()`之一`exec`和`pipe()`（或可能`socketpair()`或其他东西，但管道也可以）的组合。

线程共享内存，但`execvp()`会创建一个全新的进程来替换调用者进程——即使这个进程与其父进程共享内存（我不确定它是否这样做！），新运行的程序也不知道如何使用那个记忆。

正确的方法是当你还有一个进程时打开管道，`fork()`分成两个进程（父进程和子进程），让子进程调用`execvp()`. 孩子现在可以写入管道的一端，而父母可以从另一端读取。

记住要`wait()`为孩子结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:30:42.093

你写过你的非阻塞单线程网络服务器吗？如果您没有可比较的东西，您将如何衡量多线程的好处？如果您将单线程项目暴露给并发，那么确定最佳性能提升的位置要容易得多，而不是在项目的余生中猜测并忍受糟糕的框架。

创建线程很容易，但您确实需要先阅读[pthread_create 手册](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_create.html)。您还能如何相信您的项目正在正确处理错误？我还建议阅读[其他 pthread 功能](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread.h.html)。顺便说一句，如果您向我表明您正在尝试自己解决问题，我很乐意帮助您解决问题。我不会费心用勺子喂你。

正如 aaaaaa123456789 所述，您不希望使用 pthread_create/execvp 生成，因为这会用新进程替换整个程序环境（包括*所有线程）。*

# linux - 如何在每个 xargs 命令之间休眠 1 秒？

> ID：15153240
> 
> 赞同：22
> 
> 时间：2013-03-01T08:11:55.447
> 
> 标签：linux, bash, shell, xargs

例如，如果我执行

```
ps aux | awk '{print $1}' | xargs -I {} echo {} 
```

我想让外壳在每个`echo`.

如何更改我的 shell 命令？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-01T08:18:11.750

您可以使用以下语法：

```
ps aux | awk '{print $1}' | xargs -I % sh -c '{ echo %; sleep 1; }' 
```

不过要小心空格和分号。在括号之间的每个命令之后，都需要分号（即使在最后一个命令之后）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T08:18:43.800

用一些名为 contains的`echo`shell 脚本替换`sleepecho`

```
 #!/bin/sh
 sleep 1
 echo $* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T14:23:36.287

如果你`awk`支持它：

```
ps aux | awk '{ system("sleep 1"); print $1 }' | xargs -I {} echo {}q 
```

`awk`或`xargs`完全跳过

```
ps aux | while read -r user rest;
    echo $user
    sleep 1;
done 
```

# parseexception - 当对象实例存储在稍后在函数调用中使用的苗条符号中时，FitSharp 引发 ParseException

> ID：15153244
> 
> 赞同：1
> 
> 时间：2013-03-01T08:12:10.033
> 
> 标签：parseexception, fitsharp, fitnesse-slim

我将一个实例存储在一个纤细的符号 ($IT) 中，但是当我稍后尝试在函数调用中使用该实例时，我收到一个 fitSharp.Machine.Exception.ParseException。

我认为问题在于 FitSharp 尝试解析参数，而不是将对象投射到其接口。

我有以下类和接口（命名空间是 MySlimTest）

```
public interface IObject {}
public class ConcreteObject: IObject
{
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

我在我的苗条夹具中使用它，其中包括以下方法和我存储在苗条符号中的返回实例。

```
public IObject CreateConcreteObjectWithNameAndDescription(string name, string description)
{
    return new ConcreteObject() {Name = name, Description = description};
} 
```

我从脚本表中调用此方法。在测试运行后呈现时，它看起来像这样：

```
$IT<-[MySlimTest.ConcreteObject] | create concrete object | with name | The initial name of the concrete object | and description | empty | 
```

当我稍后尝试使用存储在纤细符号 IT 中的实例时，会引发 ParseException。

夹具中的方法是

```
public bool SetNameForInstance(string name, IObject obj)
{
    return SetAttribute<ConcreteObject>(obj, concreteObject => concreteObject.Name = name);
} 
```

这在测试表中用作

```
ensure | set name | John Cleese | for instance | $IT->[MySlimTest.ConcreteObject] 
```

## ***解决方法***

有趣的是，如果我将方法签名更改为使用实现（ConcreteObject）而不是接口，那么它就可以工作。

```
public bool SetNameForInstance(string name, ConcreteObject obj) 
```

* * *

带有fixture 代码的完整示例如下作为fitnesse 纯文本wiki 页面：

```
!*> Environment
Linux 3.2.0-3-amd64 #1 SMP Mon Jul 23 02:45:17 UTC 2012 x86_64 GNU/Linux
Mono 2.10.8.1 (Debian 2.10.8.1-7) (64-bit)
glib-sharp 2.12.0.0
FitNesse (v20121220)
FitSharp release 2.2 for .net 4.0
*!

!*> Fixture Code
{{{
using System;

namespace MySlimTest
{
    public interface IObject {}

    public class ConcreteObject: IObject
    {
        public string Name { get; set; }
        public string Description { get; set; }
    }

    public class SymbolTestFixture
    {
        public SymbolTestFixture ()
        {
            // Initialisation code here...
            // Currently just a mock.
    }

    public IObject CreateConcreteObjectWithNameAndDescription(string name, string description)
    {
        return new ConcreteObject() {Name = name, Description = description};
    }

    public bool SetNameForInstance(string name, IObject obj)
    {
        return SetAttribute<ConcreteObject>(obj, concreteObject => concreteObject.Name = name);
    }

    public bool SetDescriptionForInstance(string description, ConcreteObject obj)
    {
        return SetAttribute<ConcreteObject>(obj, concreteObject => concreteObject.Description = description);
    }

    private bool SetAttribute<T>(IObject obj, Action<T> fun)
    {
    if (obj is T)
    {
        fun((T)obj);
            return true;
    }
        return false;
    }
    }
}

}}}
*!

!3 Set-up of the test system

!***> Test system set-up
!define TEST_SYSTEM {slim}
!path /path/to/fixture/DLL/SlimTest.dll
!define COMMAND_PATTERN {%m -r fitSharp.Slim.Service.Runner,/path/to/fitSharp.dll %p}
!define TEST_RUNNER {/path/to/Runner.exe}
***!

!**> Usings
!|import   |
|MySlimTest|
**!

!2 Scenarios

!|scenario|given concrete object           |name |and            |description |
|$IT=     |create concrete object with name|@name|and description|@description|

!|scenario            |given concrete object|name     |
|given concrete object|@name                |and|empty|

!|scenario|edit concrete object|instance    |name to     |name|and description to|description|
|ensure   |set name            |@name       |for instance|$IT                                |
|ensure   |set description     |@description|for instance|$@instance                         |

!3 Test the ''slim symbol can hold object as parameter'' feature

!|script|symbol test fixture|

!|script                                                                                                                                                                   |
|given concrete object|The initial name of the concrete object                                                                                                             |
|edit concrete object |IT      |name to     |John Cleese |and description to|Yes, I am still indeed alive, contrary to rumour, and I am touring my one Cleese show. London.| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:28:57.287

这是一个错误。我在 GitHub 上分叉、修复并提出了拉取请求

[https://github.com/jediwhale/fitsharp/pull/109](https://github.com/jediwhale/fitsharp/pull/109)

# tridion - 如何在自定义解析器中确定我是发布还是取消发布？三重奏 2009 SP1

> ID：15153245
> 
> 赞同：4
> 
> 时间：2013-03-01T08:12:33.513
> 
> 标签：tridion, tridion2009

我正在尝试捕获组件未发布的时间。我尝试了一些方法，但没有得到我想要的结果。我的尝试是：

1.  在事件系统中。但这不起作用，因为 Windows 中有一个关于 MSXML 和 COM+ 的已知错误。

2.  我尝试构建自己的 IResolver，但我无法确定它是发布还是取消发布操作。

3.  我尝试构建自己的 ITransportPackageHandler。在那里，我有一个名为 HandleResolvedItemForUnPublishing 的函数，但我没有任何关于 PublicationTarget 的信息，而且我不知道它是从暂存中还是未发布的。

有人能帮我吗？我认为我可以解决这个问题，如果：

1.  在 IResolver，我可以确定组件是否正在取消发布。
2.  在 ITransportPackageHandler 我可以访问 PublicationTarget 信息
3.  如果我可以在上下文变量或类似的东西中将信息从 IResolver 传递给 ITransportPackageHandler。

非常感谢你。

古斯塔沃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T10:25:58.330

您应该能够查看作为自定义解析器中`ResolvePurpose`的`ResolveInstruction`参数之一获得的 。这些方面的东西：

```
public void Resolve(IdentifiableObject item, ResolveInstruction instruction, PublishContext context, ISet<ResolvedItem> resolvedItems)
{
    if (instruction.Purpose == ResolvePurpose.Publish || instruction.Purpose == ResolvePurpose.RePublish)
    { 
        // We are publishing
    }
    else if(instruction.Purpose == ResolvePurpose.UnPublish)
    {
        // We are unpublishing
    }
    // Don't know if this one exists in 2009, it exists in 2011 SP1
    else if(instruction.Purpose == ResolvePurpose.UnknownByClient)
    {
        // The server is doing something that I don't understand (yet?)
    }
} 
```

**编辑**

我拒绝不找到一种方法来完成这项工作......

事实上，在 Tridion 2009 中，您没有`Purpose`on resolve 指令。您`Action`在 Publish Transaction 中确实有一个，但这个并没有直接在解析器中公开。以下是我发现我是发布还是取消发布的方法 - 如果您认为这太过分了，但我的非生产 VM 上的性能非常好。

1.  找到我们正在解决的当前项目
2.  加载状态为“进行中”的 PublishTransaction 列表
3.  查找*当前*项目的交易
4.  通过查看`Action`属性确定动作

```
Filter filter = new Filter();
filter.Conditions["InfoType"] = 2; // Get transactions in Progress
foreach (XmlNode node in item.Session.GetList(typeof(PublishTransaction), filter))
{
    if(node.Attributes["ItemID"].Value.Equals(item.Id.ToString()))
    {
        // we have a winner
        string action;
        if (node.Attributes["Action"].Value.Equals("0"))
            action = "Publish";
        if (node.Attributes["Action"].Value.Equals("1"))
            action = "Unpublish";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:20:07.373

假设您使用 2011，您可以将事件处理程序绑定到 Publish Transaction Save 事件并验证状态。然后，当组件未发布时，您可以执行所需的逻辑。

```
public sealed class PublishedToEventHandler: TcmExtension
{
    public PublishedToEventHandler()
    {
        EventSystem.SubscribeAsync<PublishTransaction, SaveEventArgs>(
            (subject, args, phase) =>
            {
                if (!PublishStransactionStateIsSuccessfullyCompleted(subject))
                    return;

            },
            EventPhases.TransactionCommitted
        );
    }

    static bool PublishStransactionStateIsSuccessfullyCompleted(PublishTransaction transaction)
    {
        return transaction.State == PublishTransactionState.Success ||
               transaction.State == PublishTransactionState.Warning;
    }
} 
```

在此事件中处理任何事情之前，您可以验证`Instruction.ResolveInstruction.Purpose`事务的属性以查看您是否在取消发布时发布。

事务有一个`ProcessedItems`集合，每个集合都包含对象属性`ResolvedItem.Item`中的页面或组件。`ProcessedItem`当它是一个页面时，您确实需要获取嵌入在页面上的组件才能对它们进行任何操作。

如果您还有其他问题，请告诉我。

# c# - 如何以编程方式将 .cal 文件转换为 .cg4？

> ID：15153251
> 
> 赞同：0
> 
> 时间：2013-03-01T08:12:45.393
> 
> 标签：c#, rename

在 Windows 资源管理器中，我可以将 .cal 文件的文件扩展名更改为 .cg4 文件。当我这样做时，我会收到警告；“更改文件扩展名可能会使文件无用，您还想更改吗？” 或类似的东西（操作系统不是英语），但如果我点击“是”，它就可以工作。

但是尝试使用 C# 以编程方式执行此操作是行不通的。我收到一条错误消息：“不支持给定路径的格式。”

我正在使用 File.Move 进行重命名/转换，这就是发生错误的地方。

```
File.Move(directory + fileNameWithoutExtension + ".cal", directory + fileNameWithoutExtension + ".cg4"); 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:16:49.577

这行得通吗？

```
var pathSource = System.IO.Path.Combine(directory, fileNameWithoutExtension, ".cal");
var pathDest = System.IO.Path.Combine(directory, fileNameWithoutExtension, ".cg4");
File.Move(pathSource, pathDest); 
```

如果它也抛出错误，请检查是否

> 文件名无扩展名

已经包含的数据

> 目录

# javascript - 如何将自定义过滤器参数添加到已经对 beforeRequest 进行过滤的 MvcJqGrid postData？

> ID：15153261
> 
> 赞同：1
> 
> 时间：2013-03-01T08:13:12.860
> 
> 标签：javascript, jqgrid, mvcgrid, mvcjqgrid

我有一个简单的 jqgrid

```
@(Html.Grid("something")
  .SetCaption("")
  .AddColumn(new Column("ID").SetHidden(true))
  .AddColumn(new Column("Name").SetLabel("Name").SetSearch(true))
  .SetUrl(Url.Action(something))
) 
```

我有`var SomeOtherID = 2`javascript。我需要在加载网格时添加这个 SomeOtherID 来过滤参数（事实上，同一页面上有很多网格，它们都需要这个），而不会失去默认的座位功能。我怀疑我需要添加此功能，`.OnBeforeRequest("addSomeOtherID()")`但在里面做什么

```
function addSomeOtherID(grid)
{ 
var pd = grid.getGridParams("postData");
?????? here I need to add SomeOtherID to postData filters
grid.setGridParams({postData: pd});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:39:30.553

解决方案很简单。正如我所怀疑的那样 .OnBeforeRequest("addSomeOtherID(grid)") 成功了。

```
function addGridSearchOption(grid, fieldName, fieldValue) {        
    if (grid[0].p.search == false) {
        f = { groupOp: "OR", rules: [] };
        f.rules.push({ field: fieldName, op: "cn", data: fieldValue });
        grid[0].p.search = true;
        $.extend(grid[0].p.postData, { filters: JSON.stringify(f) });
    }
    else {
        tFilters = eval('(' + grid[0].p.postData.filters + ')');
        var bAddRule = true;
        var i = 0;
        for (var tRule in tFilters.rules)
        {
            if (tFilters.rules[i].field == fieldName)
            {
                tFilters.rules[i].data = fieldValue;
                bAddRule = false;
            }
            i++;
        }
        if (bAddRule) {
            tFilters.rules.push({ field: fieldName, op: "cn", data: fieldValue });
        }grid[0].p.postData.filters = JSON.stringify(tFilters);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:19:14.460

使用 MvcJqgrid 可以为列设置默认搜索值，这里有一个示例：

[http://playground.webpirates.nl/MvcJqGrid/Home/DefaultSearchValue](http://playground.webpirates.nl/MvcJqGrid/Home/DefaultSearchValue)

如果您查看页面的来源，您可以看到它是如何完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T04:51:11.300

这很棒，我用过它，它有效。不知道为什么@SpokeST 说它不可用，我没有启用搜索工具栏，它对我有用。

为未来的读者提供一个修复，注意代码中的第 4 行用“2”而不是 fieldValue 参数分配“数据”变量。我想那是测试它的剩菜..

再次感谢！

# perl - Perl 内置函数作为子例程参考

> ID：15153265
> 
> 赞同：3
> 
> 时间：2013-03-01T08:13:35.933
> 
> 标签：perl

我正在尝试将一组操作作为数组执行。为此，我必须传递子例程引用。（可能有其他方法可以在不使用数组的情况下执行此操作。但是，由于某些其他限制，我觉得这是目前最好的方法）。

我正在尝试做的基本示例代码：

```
#!/usr/bin/perl

use strict;
use warnings;
use Data::Dumper;
sub test()
{
   print "Tested\n";
}

my $test;
my  @temp = (1, 2, 3);
my $operations = [ 
           [\&test, undef, undef],
           [\&shift, \$test, \@temp], 
           ];

foreach(@$operations){
   my $func = shift $_;
   my $out = shift $_;
   $$out = $func->(@$_);
}

print Dumper $test; 
```

观察到的输出是：

```
Tested
Undefined subroutine &main::shift called at temp2.pl line 22. 
```

查询 - 是否可以将内置子例程作为参考传递？

已经有更早的查询， reg 内置函数作为[此处](https://stackoverflow.com/questions/1585560/can-you-take-a-reference-of-a-builtin-function-in-perl)的子例程引用。

由于这个问题是在 3 年前被问到的，所以想知道现在是否有任何替代方案。如果有人解释为什么在这种情况下内置函数和用户定义的子例程之间存在区别，将不胜感激？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T08:22:36.487

`shift`不是潜艇；它是一个类似于`and`and的运算符`+`。如果您想要对子的引用，则需要创建一个子。

```
[sub { shift(@{$_[0]}) }, \$test, \@temp], 
```

* * *

有关的：

*   [什么是 Perl 内置运算符/函数？](https://stackoverflow.com/q/7167599/589924)
*   [如何获得参考`print`？](https://stackoverflow.com/q/69226416/589924)

# qt4 - 如何使用 PySide 读取 .ui 文件中的小部件

> ID：15153266
> 
> 赞同：0
> 
> 时间：2013-03-01T08:13:37.163
> 
> 标签：qt4, pyside

我正在尝试访问`Qt`通过 .ui 文件加载的元素。但是我收到错误：

```
AttributeError: 'TreeviewWidgetSelectProve' object has no attribute '_treeview' 
```

这些链接中分别提供了完整的[python 代码](http://pastebin.com/S2N86bJC)和[.ui 文件。](http://pastebin.com/42MHLcZe)代码片段：

```
 ui_file_path = os.path.join(
        '/home/userdaze/pyside_test', 'resource', 'treeview.ui')

    loader = QUiLoader(self)
    ui_file = QFile(ui_file_path)
    self._widget_top = loader.load(ui_file, self)

    self._treeview = self._widget_top.findChild(QTreeView, '_treeview')
    self._treeview.setModel(self._std_model) 
```

[我是否在此线程](https://stackoverflow.com/questions/7250727/qtdesigner-pyside-qtablewidget-dont-get-accessible)中使用`findChild`建议并不会改变这种情况。如果正在使用它会返回。`NoneType`

怎么了？谢谢！

Ubuntu Quantal 上的 python-pyside 1.1.1-3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:10:25.297

恐怕您的 .ui 文件已损坏。您是否尝试在 QtDesigner 中打开它？当我这样做时，它会报告错误。所以我用 QtDesigner 重新创建了文件（只是一个带有 QTreeView 的 QMainWindows），你的问题就消失了。

不过还有很多其他问题：

*   self 没有成员 uiw（第 33 和 38 行）

*   据我所知，将 TreeviewWidgetSelectProve 的实例传递给 QUiLoader 不起作用，这就是我必须实现自定义加载器的原因：[https ://github.com/ros-visualization/python_qt_binding/blob/groovy-devel/src/python_qt_binding /binding_helper.py#L199](https://github.com/ros-visualization/python_qt_binding/blob/groovy-devel/src/python_qt_binding/binding_helper.py#L199)

# php - PHP if 语句为空

> ID：15153271
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:13:50.473
> 
> 标签：php

`if`我的控制器中有这个声明：

```
if($parent == $page->parent) 
```

`$parent == null`有时，`$parent`例如，它何时执行我的 if 语句，但仅当`16`它为 null 时才不执行它我做错了什么？

这是我的控制器：

```
public function updateMenu($id)
{
    $page = Page::find($id);
    $parent = Input::get('parent');
    $new_order = Input::get('index');

        if($parent == $page->parent)
        {
            if($page->order_id > $new_order)
            {
                DB::table('pages')
                    ->where('parent',$parent)
                    ->where('order_id', '<', $page->order_id)
                    ->increment('order_id');
            }
            else
            {
                DB::table('pages')
                    ->where('parent',$parent)
                    ->where('order_id', '>=', $page->order_id)
                    ->decrement('order_id');
            }
        }
        else
        {
            DB::table('pages')
                ->where('parent',$page->parent)
                ->where('order_id', '>', $page->order_id)
                ->decrement('order_id');    
        }

    $page->order_id = Input::get('index');
    $page->parent = Input::get('parent');

    $page->save();

    return $id;
} 
```

我正在制作一个可排序的列表，任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:18:57.643

像这样的语句`if($parent == $page->parent)`返回真或假。因此，如果它的价值是`null`，它会进入`else`声明。

# objective-c - 使用 indexPath.row 从多级数组中提取字典

> ID：15153272
> 
> 赞同：0
> 
> 时间：2013-03-01T08:13:53.010
> 
> 标签：objective-c, xcode, json, nsarray, nsdictionary

我很难从声明为的多级数组中提取字典：

`NSArray *menuItems;`看起来像这样：

```
Table =     (
                {
            MENUDESC = "HOME           ";
            MENUID = 1072;
            NAVIGATETO = "content.aspx?item=1072&pid=0";
            NAVIGATETO2 = "default.aspx?item=1072&pid=0";
            PARENTMENUID = "<null>";
            PROTECTED = "<null>";
            parentmenuid2 = "<null>";
        },
                {
            MENUDESC = "PRODUCTS &amp; SERVICES";
            MENUID = 1073;
            NAVIGATETO = "#";
            NAVIGATETO2 = "default.aspx?item=1073&pid=0";
            PARENTMENUID = "<null>";
            PROTECTED = "<null>";
            parentmenuid2 = "<null>";
        },
                {
            MENUDESC = "ABOUT US";
            MENUID = 1074;
            NAVIGATETO = "content.aspx?item=1074&pid=0";
            NAVIGATETO2 = "default.aspx?item=1074&pid=0";
            PARENTMENUID = "<null>";
            PROTECTED = "<null>";
            parentmenuid2 = "<null>";
        },
                {
            MENUDESC = "WHAT SETS US APART";
            MENUID = 1075;
            NAVIGATETO = "content.aspx?item=1075&pid=0";
            NAVIGATETO2 = "default.aspx?item=1075&pid=0";
            PARENTMENUID = "<null>";
            PROTECTED = "<null>";
            parentmenuid2 = "<null>";
        },
                {
            MENUDESC = "CASE STUDIES";
            MENUID = 1126;
            NAVIGATETO = "content.aspx?item=1126&pid=0";
            NAVIGATETO2 = "default.aspx?item=1126&pid=0";
            PARENTMENUID = "<null>";
            PROTECTED = "<null>";
            parentmenuid2 = "<null>";
        },
                {
            MENUDESC = "REQUEST PROPOSAL";
            MENUID = 1076;
            NAVIGATETO = "content.aspx?item=1076&pid=0";
            NAVIGATETO2 = "default.aspx?item=1076&pid=0";
            PARENTMENUID = "<null>";
            PROTECTED = "<null>";
            parentmenuid2 = "<null>";
        },
                {
            MENUDESC = CONTACT;
            MENUID = 1077;
            NAVIGATETO = "contactus.aspx?item=1077&pid=0";
            NAVIGATETO2 = "contactus.aspx?item=1077&pid=0";
            PARENTMENUID = "<null>";
            PROTECTED = "<null>";
            parentmenuid2 = "<null>";
        }
    );
} 
```

从 JSON 创建，如下所示：

```
{
  "Table": [
    {
      "MENUID": 1072.0,
      "MENUDESC": "HOME           ",
      "PARENTMENUID": null,
      "NAVIGATETO": "content.aspx?item=1072&pid=0",
      "NAVIGATETO2": "default.aspx?item=1072&pid=0",
      "PROTECTED": null,
      "parentmenuid2": null
    },
    {
      "MENUID": 1073.0,
      "MENUDESC": "PRODUCTS &amp; SERVICES",
      "PARENTMENUID": null,
      "NAVIGATETO": "#",
      "NAVIGATETO2": "default.aspx?item=1073&pid=0",
      "PROTECTED": null,
      "parentmenuid2": null
    },
    {
      "MENUID": 1074.0,
      "MENUDESC": "ABOUT US",
      "PARENTMENUID": null,
      "NAVIGATETO": "content.aspx?item=1074&pid=0",
      "NAVIGATETO2": "default.aspx?item=1074&pid=0",
      "PROTECTED": null,
      "parentmenuid2": null
    },
    {
      "MENUID": 1075.0,
      "MENUDESC": "WHAT SETS US APART",
      "PARENTMENUID": null,
      "NAVIGATETO": "content.aspx?item=1075&pid=0",
      "NAVIGATETO2": "default.aspx?item=1075&pid=0",
      "PROTECTED": null,
      "parentmenuid2": null
    },
]
} 
```

我正在研究示例代码，他们使用它来提取字典：

```
NSDictionary *items = [menuItems objectAtIndex:indexPath.row]; 
```

但这不起作用 - 我收到错误“发送的选择器无效”。我尝试了各种方法来访问数组中的数据。但是我发现的所有研究和答案都没有帮助。

我需要像这样创建 NSStrings：

```
NSString *text = [[menuItems objectForKey:@"Table"] objectForKey:@"MENUDESC"];
NSString *name = [[menuItems objectForKey:@"Table"] objectForKey:@"MENUID"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:29:52.347

Objective-C 是一种相当动态的语言，因此即使您已`menuItems`声明为`NSArray`，也无法保证其在运行时的类型。如果您从问题中反序列化 JSON 对象并将其分配给`menuItems`，则实际上是在为它分配一个`NSDictionary`实例。请注意，JSON 的最外层符号是花括号，表示一个对象（转换为`NSDictionary`），而不是方括号，表示一个数组。这个对象有一个键，`Table`，一个数组作为关联值。

所以你需要做的是这样的：

```
NSArray *menuItems = JSONObject[@"Table"]; 
```

`JSONObject`您当前分配的内容在哪里`menuItems`。之后，`menuItems`指向一个字典数组，每个字典都应该能够为您提供所需的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:16:58.370

也就是说，通过 JSON 字符串发送给您的内容。它以包含在 {} 中的键值对开始。它只有一个条目。该条目的键是“table”，它的值是一个包含多个对象的数组。数组的对象包含在 [] 中。数组中包含一组键/值对（包含在 {} 中）。

所以每个 {} 都会被转换成一个 NSDictionary，它是键值对的合适容器。并且每个 []，甚至是空的，都将被转换为对象的 NSArray。

你永远无法确定你收到了什么。因此，您应该始终仔细检查接收到的值是否是 NSArray、NSDictionary、NSString 或 NSNumber。（坦率地说，我不确定 NSDate。）通过使用（示例）来做到这一点

```
if ([myCurrentObject isKindOfClass[NSString class]]) {
  // process the data
} else {
  // react to the error because you were expecting a string and got something else
} 
```

通过这样做，您可以让您的应用程序有机会做出正确反应，即使它无法处理数据。这比您当前观察到的由未捕获的异常引起的中止要好得多。

准备好接收空数组和字典。对于字典来说，这并不难。`objectForKey:`如果密钥不存在，etc 将简单地返回 nil。但是`objectAtIndex:0`当数组中没有任何对象时会抛出一个无效的参数异常。因此，请确保检查收到的对象的长度和存在。

```
if (menuItems && [menuItems isKindOfClass[NSArray class]] && [menuItems count]) ... 
```

会做。这首先检查 menuItem 是否不为零，然后检查它是否是 NSArray（或 NSMutableArray - 也会评估为 YES）以及数组是否包含任何对象。后者也可以通过适当的 for 循环来实现。没有必要实际嵌套 if 语句，因为它从左侧开始评估，并将在所有条件都与逻辑 AND 连接时找到的第一个 NO 处停止评估`&&`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:28:17.637

使用以下代码：

```
NSLog(@"%@",[[[menuItems objectForKey:@"Table"] objectAtIndex:0] objectForKey:@"MENUDESC"]);

NSLog(@"%@",[[[menuItems objectForKey:@"Table"] objectAtIndex:0] objectForKey:@"MENUID"]); 
```

这将只返回第一个 Array ：您也可以通过使用获取所有值`for Loop:`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T10:56:45.677

感谢您的回复，他们真的很有帮助。我改变了`NSArray *menuItems;`，`NSDictionary *menuItems;`然后这样做：

```
NSDictionary *tweet = [[menuItems objectForKey:@"Table"] objectAtIndex:indexPath.row];
NSString *text = [tweet objectForKey:@"MENUDESC"];
NSString *name = [tweet objectForKey:@"MENUID"]; 
```

效果很好，给了我这个结果：

```
2013-03-02 03:00:44.396 App Test[616:c07] HOME             ID:1072
2013-03-02 03:00:44.396 App Test[616:c07] PRODUCTS &amp; SERVICES  ID:1073
2013-03-02 03:00:44.396 App Test[616:c07] ABOUT US  ID:1074
2013-03-02 03:00:44.397 App Test[616:c07] WHAT SETS US APART  ID:1075
2013-03-02 03:00:44.397 App Test[616:c07] CASE STUDIES  ID:1126
2013-03-02 03:00:44.397 App Test[616:c07] REQUEST PROPOSAL  ID:1076
2013-03-02 03:00:44.397 App Test[616:c07] CONTACT  ID:1077 
```

# javascript - 更新重复的html标签中的类名

> ID：15153277
> 
> 赞同：0
> 
> 时间：2013-03-01T08:14:11.203
> 
> 标签：javascript

我在下面显示了 2 个具有相同 ID 的 div，

```
<div id="dv1" class="oldClass">Div 1</div>

<div id="dv1" class="oldClass">Div 2</div> 
```

我需要使用 java 脚本添加类属性，我已经实现如下所示，

```
var lstObj = document.getElementsByClassName(“oldClass”);
for (var i = 0; i < lstObj.length; i++) {
jQuery("#" + lstObj[i].id).addClass("highlight");
} 
```

但每次只分配如下所示的第一个 div，

```
<div id="dv1" class="oldClass highlight">Div 1</div>
<div id="dv1" class="oldClass">Div 2</div> 
```

我需要在两个 div 中添加“highlight”类。请帮我。也请参考下面的链接，

请参考以下链接，

[https://forum.jquery.com/topic/update-class-name-in-duplicate-html-tags]

问候，尼拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:16:12.993

检查这个`$('.oldClass').addClass('highlight')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:07:43.620

我从下面的论坛网站得到了答案，

```
[https://forum.jquery.com/topic/update-class-name-in-duplicate-html-tags?reply=true] 
```

请按照以下链接查看解决方案，

```
[http://jsfiddle.net/sUBWd/8/] 
```

问候， Nirav Parikh

# php - 使用where子句从mysql表中获取数据

> ID：15153280
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:14:27.753
> 
> 标签：php, mysql, sql

我在表中有类别我想选择类别为销售的数据我正在使用以下查询

```
$query = mysql_query("SELECT * FROM catalog_Master where category=@"Sales""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:15:20.653

用单引号括起来，因为它是一个字符串。

```
$query = mysql_query("SELECT * FROM catalog_Master where category='Sales'"); 
```

根据您的评论，如果您想要变量中的值，

```
$category="Sales";
$query = mysql_query("SELECT * FROM catalog_Master where category='$category'"); 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:22:38.423

```
<?PHP
$query = mysql_query("SELECT * FROM catalog_Master WHERE category='Sales'");
?>
**EDIT**

**PHP 5.5 way**

$mysqli = new mysqli("localhost", "db_user", "db_password", "db_name");
$result = $mysqli->query("SELECT * FROM catalog_Master WHERE category='Sales'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:16:23.433

小心双引号，如果它是完全匹配的：

```
$query = mysql_query("SELECT * FROM catalog_Master where category='Sales'"); 
```

这应该工作

# javascript - 如何使用 JavaScript 在 Google 地图上获得两个形状之间的最短距离？

> ID：15153284
> 
> 赞同：1
> 
> 时间：2013-03-01T08:14:36.323
> 
> 标签：javascript, google-maps, google-maps-api-3, maps, distance

我在我的应用程序（带有 MVC 的 ASP.NET）中使用 Google Maps API。

我有一个坐标数组（每个都由纬度和经度组成），让我们称之为“原点”（这可以是多边形、折线或标记）和另一个坐标数组，让我们称之为“目的地”（可以是多边形、折线或标记）。

我想计算“起点”和“终点”之间的最短距离。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T09:10:20.233

好吧，从数学的角度来看：

您的问题是找到空间中的一点与矢量线或平面之间的最短距离。

因此，如果您在数组中有坐标，`[a1,a2,a3]`并且`[b1,b2,b3]`这 2 个点在 3 维空间中的距离就像勾股定理一样，具有三个元素： `sqrt[(a1-b1)²+(a2-b2)²+(a3-b3)²]=d(a,b)`.

我知道这没有考虑地球的曲率，但对于“短”距离来说这并不重要。

如果您了解一些数学知识，那么维基百科文章也可能对您有所帮助。[http://en.wikipedia.org/wiki/Euclidean_distance#Three_dimensions](http://en.wikipedia.org/wiki/Euclidean_distance#Three_dimensions)

编辑 12.08.14：
要考虑地球的曲率，你可以做一个简单的计算：
（1）你已经知道地球的距离
（2）你知道大约。地球半径 已知

起点 (A) 和目的地 (B)，现在您可以构建一个以地球中心 (C) 为中心的三角形。您现在这样做是为了计算 (C) 处的角度 (sin/cos/tan)。使用该角度，您现在可以获得地球的长度（包括曲率）。

([地球边界]/360°)*[在 (C) 处的角度] = (A) 到 (B) 在地球曲率上的距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-04T21:11:21.940

我建议您使用余弦球定律来计算点之间的距离。如果您有一个起点的纬度和经度数组，以及目的地的纬度和经度坐标数组，那么您可以执行以下操作：

```
var origins = [{lat: "35.5", lon: "-80.0"}, ...]; // Array of origin coordinates
var destinations = [{lat: "34.5", lon: "-80.0"}, ...]; // Array of destination coordinates
var shortestDistance = null;
var shortestPair = [];

for (i = 0; i < origins.length; i++) {
    for (j = 0; j < destinations.length; j++) {

        var lat1 = origins[i].lat.toRadians();
        var lat2 = destinations[j].lat.toRadians();
        var lon = (destinations[j].lon - origins[i].lon).toRadians();
        var R = 6371; // gives distance in kilometers
        var calcDistance = Math.acos(Math.sin(lat1) * Math.sin(lat2) + Math.cos(lat1) * Math.cos(lat2) * Math.cos(lon)) * R;

        if (shortestDistance === null || calcDistance < shortestDistance) {
            shortestPair[0] = origins[i]; // Store the origin coordinates
            shortestPair[1] = destinations[j]; // Store the destination coordinates
            shortestDistance = calcDistance; // Update the shortest distance
        }
    }
}

/* After this runs, you'll have the array indexes for the origin and 
destination with the shortest distance as well as the actual distance (kilometers) 
in the array shortestPair and the variable shortestDistance respectively.

For miles, divide shortestDistance by 1.609344
For nautical miles, divide shortestDistance by 1.852

*/ 
```

这似乎是一种比尝试使用 Maps API 进行距离计算更简单的方法。上述公式来自[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)。如果您需要计算更准确，也可以使用半正弦公式；我链接的页面上有详细说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-04T20:57:22.590

一种解决方案是采用[此处](https://stackoverflow.com/questions/3838493/distance-between-two-geo-locations)找到的选项之一并计算从原点中的每个点到目的地中的每个点的距离。最小的距离是两个形状之间的距离。

代码可能如下所示（未经测试）：

```
var minDistance = Number.POSITIVE_INFINITY;
for (var i=0; i<origin.length; i++){
   for (var j=0; j<destination.length; j++){
      var dist = google.maps.geometry.spherical.computeDistanceBetween(origin[i], destination[j]);
      if (dist < minDistance) 
         minDistance = dist;
   }
} 
```

如果性能是一个问题，这可能会被优化。有关这方面的更多信息，我会查看这个[问题](https://math.stackexchange.com/questions/170731/shortest-distance-between-two-shapes)及其解决相同问题的答案，尽管是从纯数学的角度来看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T06:52:59.447

```
function moveAlongPath(points, distance, index) {  
  index = index || 0;  

  if (index < points.length && typeof points[index +1] !="undefined") {
    var polyline = new google.maps.Polyline({
      path: [points[index], points[index + 1]],
      geodesic: true,
      strokeColor: '#FF0000',
      strokeOpacity: 1.0,
      strokeWeight: 2
    });

    var distanceToNextPoint = polyline.Distance();
    if (distance <= distanceToNextPoint) {
      return polyline_des(points[index],points[index + 1], distance);
    }
    else {
      return moveAlongPath(points,
            distance - distanceToNextPoint,
            index + 1);
    }
  }
  else {
    return null;
  }  
} 
```

# regex - HTML5的RNA第二结构正则表达式模式

> ID：15153301
> 
> 赞同：1
> 
> 时间：2013-03-01T08:15:25.210
> 
> 标签：regex, html, bioinformatics

我需要一个 RegExp 来识别 HTML5 网页中的 RNA Second 结构。

RNA 第二结构只是一个仅包含点和平衡括号的字符串，它用于识别 RNA 形状，如果我们知道目标 RNA 形状，我们可以猜测可以生成具有该目标形状的 RNA 的碱基序列。
请注意，它至少应包含一个点`.`。

例如

```
.....((((...).))..)....
(((....)))
....(((..)))...()...(....((..))) 
```

是真正的 RNA 二级结构，但

```
.....((((....)))...
....a.((((......))))......
((((())))) 
```

不是真正的结构

这些都是我识别结构的失败尝试：

```
<input type="text" pattern="/[.()]/g" />
<input type="text" pattern="/[.()]/g" />
<input type="text" pattern="/[\.\(\)]/g" />
<input type="text" pattern="/[().]/g" />
<input type="text" pattern="/[()\.]/g" />
<input type="text" pattern="/[\.()]/g" /> 
```

我是 RegExp 的新手，我应该在网络上发布我的程序，因为我的老师命令我这样做！
请告诉我应该使用的正则表达式！我的程序（ libRNA ）本身检查括号的平衡！
[库RNA](http://mostafa.ut.ac.ir/libRNA/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:29:39.967

用 JavaScript 的支持级别来做*通用*的括号平衡（括号的嵌套级别有限）是**不可能**的。（在 Perl、PCRE、.NET 正则表达式中，可以进行广义括号平衡）。*`RegExp`*

 *不过，您可以编写一个简单的 JavaScript 函数进行检查：

```
function isValidSequence(str) {
    if (!/\./.test(str)) {
        // Dot . not found
        return false;
    }

    var openBrackets = 0;

    for (var i = 0; i < str.length; i++) {
        if (str[i] === "(") {
            openBrackets++;
        } else if (str[i] === ")") {
            if (openBrackets > 0) {
                openBrackets--;
            } else {
                // Reject the case ..)(..
                return false;
            }
        } else if (str[i] !== ".") {
            // Garbage character, since it is not . or ( or )
            return false;
        }
    }

    // Check all brackets are properly closed
    return openBrackets === 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:29:05.030

```
/[().]+/g 
```

将匹配看起来像 RNA 第二结构的所有内容（即连续的点和括号序列）。您应该首先使用此正则表达式来查找可能的匹配项。

然后，您可以使用以下方法检查每个匹配项中是否至少包含一个点

```
if (submatch.indexof(".") != -1) 
```

但是您无法检查括号是否正确平衡 - 因为您需要像 nhahtdh 建议的解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:26:13.197

这里的问题是您实际需要匹配的是：

```
a = . | .(a) | (a). | .a | a. 
```

为什么用正则表达式解决这个问题即使不是不可能也很难解决的主要问题是，对于每个左括号都必须有一个右括号。

使用 JavaScript 应该可以做到这一点。你需要做这样的事情：

将括号计数器设置为`0`。遍历整个结构。当找到一个左括号时，增加计数器。如果找到右括号，请减少计数器。

如果在解析结束时计数器归零，则结构正常。现在唯一缺少的是所需的点。为此，我将介绍另一个变量`justOpened`或类似的东西。当您找到一个左括号时，您将其设置为`true`. 当您找到一个点时，您将其设置为`false`. 如果你找到一个右括号并且你的变量是`true`你可以中止，因为你的结构被破坏了。*

# c# - 替换 XML 文件中的值

> ID：15153303
> 
> 赞同：1
> 
> 时间：2013-03-01T08:15:32.113
> 
> 标签：c#, xml

我们的应用程序需要处理 XML 文件。有时我们会收到具有如下值的 XML：

```
<DiagnosisStatement>
     <StmtText>ST &</StmtText>
</DiagnosisStatement> 
```

由于`&<`我的应用程序无法正确加载 XML 并引发异常，如下所示：

```
An error occurred while parsing EntityName. Line 92, position 24.
   at System.Xml.XmlTextReaderImpl.Throw(Exception e)
   at System.Xml.XmlTextReaderImpl.Throw(String res, String arg)
   at System.Xml.XmlTextReaderImpl.Throw(String res)
   at System.Xml.XmlTextReaderImpl.ParseEntityName()
   at System.Xml.XmlTextReaderImpl.ParseEntityReference()
   at System.Xml.XmlTextReaderImpl.Read()
   at System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace)
   at System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
   at System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
   at System.Xml.XmlDocument.Load(XmlReader reader)
   at System.Xml.XmlDocument.Load(String filename)
   at Transformation.GetEcgTransformer(String filePath, String fileType, String Manufacture, String Producer) in D:\Transformation.cs:line 160 
```

现在我需要`&<`用 'and<' 替换所有出现的 ，以便 XML 可以成功处理而没有任何异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:21:39.607

这就是我在 Botz3000 给出的答案的帮助下加载 XML 所做的。

```
string oldText = File.ReadAllText(filePath);
string newText = oldText.Replace("&<", "and<");
File.WriteAllText(filePath, newText, Encoding.UTF8);
xmlDoc = new XmlDocument();
xmlDoc.Load(filePath); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T08:18:40.457

Xml 文件无效，因为`&`需要转义为`&amp;`，所以你不能只加载 xml 而不会出错。如果您将文件加载为纯文本，则可以这样做：

```
string invalid = File.ReadAllText(filename);
string valid = invalid.Replace("&<", "and<");
File.WriteAllText(filename, valid); 
```

但是，如果您可以控制 Xml 文件的生成方式，则应该通过转义`&`as`&amp;`或将其替换`"and"`为您所说的来解决该问题。

# javascript - 如何将Text参数传递给循环中的函数？

> ID：15153306
> 
> 赞同：0
> 
> 时间：2013-03-01T08:15:56.773
> 
> 标签：javascript, cordova

嗨，我被困住了，我需要将状态传递给 Apply() 函数。但是当我把 Apply("+ Status +"); 进入 for 循环它似乎不起作用。但是，如果 Status 等于某个数字，它就可以工作。请帮忙。这是我的代码。

状态等于“完成，未完成”。

```
function querySuccess(tx, results, Type, Status, Amount, Years){
    var len = results.rows.length;
    var display = "";

    display +="<table>";
    display +="<tr>";
    display +="<td>First Year Rate</td>";
    display +="<td>Apply Now</td>";
    display +="</tr>";

    for (var i=0; i<len; i++){
    display +="<tr>";
    display +="<td>"+ results.rows.item(i).first_year+"</td>";
    display +="<td><input type'button' onClick='Apply();' value='Apply'/></td>";
    display +="</tr>";
    }
    display +="</table>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:19:20.107

试试`Apply(\""+ Status +"\");`。转义的引号告诉 JS 有一个文本，否则它认为有一些变量。

您可以使用单引号`Apply('"+ Status +"');`，但这需要在您的代码中进行一些修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:19:47.550

如果 status 是一个字符串，你需要像这样封装它：

```
display +="onClick=\"Apply('"+ Status +"');\" "; 
```

注意单引号和双引号的不同用法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:22:15.317

如果您的状态是字符串，则必须使用“”，例如“字符串”。在您的情况下，这应该有效：

```
display +="<td><input type'button' onClick='Apply("'+Status+'");' value='Apply'/></td>"; 
```

数字有效，因为它们不需要撇号，这就是它们被正确处理的原因。

我做了更简单的例子，并用你的代码来展示它。检查您的 JavaScript 控制台以查看结果：http: [//jsfiddle.net/EE8hN/](http://jsfiddle.net/EE8hN/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T08:26:57.730

检查这个。这将工作

显示 +=`'<td><input type="button" onClick="Apply('+status+')" value="Apply"/></td>'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T08:33:18.370

```
function querySuccess(tx, results, Type, Status, Amount, Years){
    var len = results.rows.length;
    var display = document.createElement('table');
    var tr = document.createElement('tr');
    var td = document.createElement('td');
    var tmpEl;

    var tmpTr = tr.cloneNode();
    var tmpTd = td.cloneNode();
    tmpTd.textContent = "First Year Rate";
    tmpTr.appendChild(tmpTd);
    tmpTd = td.cloneNode();
    tmpTd.textContent = "Apply Now";
    tmpTr.appendChild(tmpTd);

    display.appendChild(tmpTr);

    for (var i=0; i<len; i++){
        tmpTr = tr.cloneNode();
        tmpTd = td.cloneNode();
        tmpTd.textContent = result.rows.item[i].first_year;
        tmpTr.appendChild(tmpTd);
        tmpEl = document.createElement('input');
        tmpEl.type = 'button';
        tmpEl.value = 'Apply';
        tmpEl.onclick = Apply; // yeah, just like this
        tmpTd = td.cloneNode();
        tmpTd.appendChild(tmpEl);
        tmpTr.appendChild(tmpTd);
    }

} 
```

# android - facebook登录无法将发布或管理权限（电子邮件）传递给读取授权请求

> ID：15153312
> 
> 赞同：11
> 
> 时间：2013-03-01T08:16:19.910
> 
> 标签：android, facebook

我有一个按钮单击以登录 facebook，但有时此代码无法正常工作。抛出异常：原因：

```
com.facebook.FacebookException: Cannot pass a publish or manage permission (email) to a request for read authorization 
```

这是我的活动代码：

```
public class FacebookLoginActivity extends Activity {

    private final static String TAG="FB";

    private static final List<String> PERMISSIONS=Arrays.asList("email", "user_likes", "user_status");

    private Session.StatusCallback statusCallback=new SessionStatusCallback();

    private GraphUser user = null;

    private Bundle bundle;

    private Intent myIntent;

    private Session session;

    private static FacebookLoginActivity instance=new FacebookLoginActivity();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(bundle==null){
            bundle=new Bundle();
        }
        Log.v(TAG, "in FB onCreate method");
        myIntent = this.getIntent();
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        String action = ClientUtil.getElementValue("action");

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);
        session=openActiveSession(this, true, PERMISSIONS);
        onClickLogin();
    }

    public void onClickLogin() {
        Log.v(TAG, "click login btn");
        session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            OpenRequest openRequest=new Session.OpenRequest(this);
            openRequest.setPermissions(PERMISSIONS);
            openRequest.setCallback(statusCallback);
            openRequest.setDefaultAudience(SessionDefaultAudience.FRIENDS);
            openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
            session.openForPublish(openRequest);
        } else {
            Log.v(TAG, "open active session");
            Session.openActiveSession(this, true, statusCallback);
        }
    }

    @Override
    public void onStart() {
        super.onStart();
        Log.v(TAG, "onStart method to add  fb Callback");
        Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
        super.onStop();
        Log.v(TAG, "onStop method to remove fb callback");
        Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Log.v(TAG, "onActivityResult method to call Fb Session");
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session=Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    private static Session openActiveSession(Activity activity, boolean allowLoginUI, List<String> permissions) {
        OpenRequest openRequest = new OpenRequest(activity).setPermissions(permissions);
        Session session = new Session.Builder(activity).build();
        if (SessionState.CREATED_TOKEN_LOADED.equals(session.getState()) || allowLoginUI) {
            Session.setActiveSession(session);
            session.openForPublish(openRequest);
            return session;
        }
        return null;
    }

    private class SessionStatusCallback implements Session.StatusCallback {

        @Override
        public void call(Session session, SessionState state, Exception exception) {
            Log.v(TAG, "in StatusCallback call method exception is:"+ exception);
            Log.v(TAG, "session state is:"+session.isOpened());
            if(user != null) {
                Log.v(TAG, "fb user is exist todo login yyy");
                login();
                finish();
                Log.v(TAG, "finish fb activity");
                return;
            }
            if(session.isOpened()) {
                Log.v(TAG, "session is opened to call FB Request");
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    @Override
                    public void onCompleted(GraphUser me, Response response) {
                        Log.v(TAG, "in GraphUserCallback onCompleted method");
                        Log.v(TAG, "GraphUser has value:"+(user!=null));
                        if(me != null) {
                            user=me;
                            login();
                        }
                        finish();
                        Log.v(TAG, "finish fb activity");
                    }
                });
            }else{
                Log.v(TAG, "session is not open");
                if(exception !=null && exception.toString().contains("Canceled")){
                    Log.v(TAG, "cancle login");
                    bundle.putInt("code", RespondCode.CANCLE);
                    myIntent.putExtras(bundle);
                    setResult(Activity.RESULT_OK, myIntent);
                    finish();
                }
            }
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T18:06:18.200

除非您的应用已被授予基本权限，否则您不能调用 openForPublish。

将您的 PERMISSIONS 列表分离为 PERMISSIONS_READ 和 PERMISSIONS_PUBLISH，并将“电子邮件”放入 PUBLISH 端。然后调用 openForRead，然后在会话打开时 requestNewPublishPermissions。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T10:46:41.263

这是您应该做的事情，它帮助我完成了我的要求：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mLogin = (Button) findViewById(R.id.logIn);
    mLogin.setOnClickListener(this);

}

@Override
public void onClick(View v) {

    Session currentSession = Session.getActiveSession();
    if (currentSession == null || currentSession.getState().isClosed()) {
        Session session = new Session.Builder(context).build();
        Session.setActiveSession(session);
        currentSession = session;
    }

    if (currentSession.isOpened()) {
        // Do whatever u want. User has logged in

    } else if (!currentSession.isOpened()) {
        // Ask for username and password
        OpenRequest op = new Session.OpenRequest((Activity) context);

        op.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO);
        op.setCallback(null);

        List<String> permissions = new ArrayList<String>();
        permissions.add("publish_stream");
        permissions.add("user_likes");
        permissions.add("email");
        permissions.add("user_birthday");
        op.setPermissions(permissions);

        Session session = new Builder(MainActivity.this).build();
        Session.setActiveSession(session);
        session.openForPublish(op);
    }
}

public void call(Session session, SessionState state, Exception exception) {
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (Session.getActiveSession() != null)
        Session.getActiveSession().onActivityResult(this, requestCode,
                resultCode, data);

    Session currentSession = Session.getActiveSession();
    if (currentSession == null || currentSession.getState().isClosed()) {
        Session session = new Session.Builder(context).build();
        Session.setActiveSession(session);
        currentSession = session;
    }

    if (currentSession.isOpened()) {
        Session.openActiveSession(this, true, new Session.StatusCallback() {

            @Override
            public void call(final Session session, SessionState state,
                    Exception exception) {

                if (session.isOpened()) {

                    Request.executeMeRequestAsync(session,
                            new Request.GraphUserCallback() {

                                @Override
                                public void onCompleted(GraphUser user,
                                        Response response) {
                                    if (user != null) {

                                        TextView welcome = (TextView) findViewById(R.id.welcome);
                                        welcome.setText("Hello "
                                                + user.getName() + "!");

                                        access_token = session
                                                .getAccessToken();
                                        firstName = user.getFirstName();
                                        fb_user_id = user.getId();

                                        System.out
                                                .println("Facebook Access token: "
                                                        + access_token);
                                        System.out.println("First Name:"
                                                + firstName);
                                        System.out.println("FB USER ID: "
                                                + fb_user_id);

                                    }
                                }
                            });
                }
            }
        });
    }
} 
```

试试上面的代码，这正是你想要的。

# c# - 如何获取当前正在运行的应用程序列表/已安装的应用程序列表？

> ID：15153319
> 
> 赞同：0
> 
> 时间：2013-03-01T08:16:43.450
> 
> 标签：c#, xaml, windows-8, windows-store-apps

是否有可能获取 Windows 8 系统中当前正在运行的应用程序（如任务管理器进程）的列表或获取 Windows 8 中已安装应用程序列表的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:54:37.270

不，Metro 应用程序作为沙盒，只能通过合同与其他应用程序对话。查询其他应用程序通常对应用程序没有好处，并且不受支持

# c# - Windows 7 客户端的事件日志中缺少网络信息（事件 ID 4625）

> ID：15153322
> 
> 赞同：0
> 
> 时间：2013-03-01T08:16:52.357
> 
> 标签：c#, .net, networking, event-log, readeventlog

我有一个应用程序，它将在 c# 中显示`Security`->的事件日志`AuditFailure`，我正在使用`EventLogEntry`类的`Message`属性读取它，我正在对其进行测试`Window server 2008 R2`

当从机器生成故障事件日志时，`Window Server 2008 R2`它`Windows XP`会在网络信息部分下生成 IP 地址和端口号，但为`Windows 7`机器生成的日志不包含 IP 地址和端口号。![windows 7机器生成的日志截图](../Images/0b678ef24e24559f253352d841a3ae19.png)

# mysql - SQL 与 If 不同

> ID：15153323
> 
> 赞同：2
> 
> 时间：2013-03-01T08:16:53.123
> 
> 标签：mysql, sql, if-statement, distinct

我正在处理应该返回产品代码或变体代码的查询，如果有一个连接并通过在产品表中找到的修改属性（以选择最近修改的产品）对它们进行排序。有我的查询：

```
SELECT IF(Length(variation_code) > 0, variation_code, prod_code) AS prod_code, 
       product.modified, 
       price 
FROM   product 
       LEFT JOIN variation_row 
              ON product.prod_code = variation_row.product_code 
WHERE  prod_code IN (SELECT prod_code 
                     FROM   product) 
       AND price > 0 
GROUP  BY prod_code 
ORDER  BY modified DESC 
LIMIT  6 
```

问题是，如果同一产品连续修改多次，它可能会多次出现在结果集中。

我知道 DISTINCT 仅用于获取与其他值不同的值，但我无法将其实现到我的查询中，因为 IF 用于获取 prod_code。

有什么方法可以修改我的脚本，使其返回相同的结果但具有不同的 prod_codes？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:54:11.943

假设

*   product.modified 是一个日期
*   product.modified 和 product.prod_code 在产品中是唯一的
*   product.price 取决于这两个属性
*   您想获取每个 prod_code 的最新修改条目

那么我的建议是

```
 SELECT S.prod_code
         , S.modified
         , P.price
      FROM product P
     INNER JOIN
           (SELECT case
                     when Length(variation_code) > 0 then variation_code
                     else prod_code
                   end AS prod_code
                 , -- use the most recent modification
                   max(product.modified) as modified
              FROM product 
              LEFT JOIN 
                   variation_row 
                     ON product.prod_code = variation_row.product_code 
             WHERE product.price > 0 
             GROUP BY
                   case
                     when Length(variation_code) > 0 then variation_code
                     else prod_code
                   end 
           ) S
             on S.prod_code = P.prod_code
            and S.modified = P.modified; 
```

这应该适用于 Oracle、SQL Server 和 PostgresSQL。不知道您的数据库产品（您使用哪一个？）是否支持这种语法？

## 阅读原始答案的前两条评论后进行编辑

这有帮助吗

```
select IF(Length(variation_code) > 0, variation_code, prod_code) AS prod_code
     , p.modified
     , p.price
  from product p
 inner join
       (select m.prod_code
             , max(m.modified) as modified
          from product m
         group by
               m.prod_code
       ) m
         on p.prod_code = m.prod_code
        and p.modified = m.modified
  left join
       variation_row v
         on v.product_code = p.prod_code
 order by
       p.modified desc
 limit 6; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:05:15.557

我设法自己创建了一个解决方案。不知道这是否是最有效的方法，但它有效：

```
SELECT DISTINCT prod_code FROM (SELECT IF(Length(variation_code) > 0, variation_code, prod_code) AS prod_code, 
       product.modified, 
       price 
FROM   product 
       LEFT JOIN variation_row 
              ON product.prod_code = variation_row.product_code 
WHERE  prod_code IN (SELECT prod_code 
                     FROM   product) 
       AND price > 0 
GROUP  BY prod_code 
ORDER  BY modified DESC) AS a LIMIT 6; 
```

感谢您尝试帮助我解决这个问题！

# css - 在 JavaFX / 强制样式中确定 CSS 样式的文本大小？

> ID：15153327
> 
> 赞同：0
> 
> 时间：2013-03-01T08:17:19.563
> 
> 标签：css, text, size, javafx-2

我在确定 JavaFX 2 中呈现的文本节点的宽度时遇到问题。使用标准样式时，一切正常：

```
Text testText = new Text("test");
double width = testText.getLayoutBounds().getWidth(); 
```

但是，如果我应用自定义 CSS 样式设置不同的字体大小，像这样

```
.text-class {
    -fx-font: 20px "Tahoma Bold";
} 
```

并将 CSS 类应用于我上面的示例：

```
Text testText = new Text("test");
testText.getStyleClass().add("text-class");
double width = testText.getLayoutBounds().getWidth(); 
```

我将得到与第一种情况相同的结果，因此显然样式会延迟到稍后的某个时间点。

如何确定 JavaFX 2 中 CSS 样式文本的宽度？是否有可能以某种方式强制立即 CSS 样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T12:00:48.660

CSS 应用程序不是立即完成的，因此，解决问题的方法是在文本大小实际发生变化时执行您的操作。

```
testText.layoutBoundsProperty() 
```

是响应边界的属性，它存储一个不可变对象。还有其他属性，告诉你大小和位置。您可以做的是在此属性上附加一个更改侦听器，并在修改完成后应用更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:56:09.767

除了 layoutBounds 受您放入的父容器的影响之外，CSS 样式将应用于下一个所谓的脉冲。

# c# - 如何使用反射和 app.config 调用 wcf？

> ID：15153329
> 
> 赞同：2
> 
> 时间：2013-03-01T08:17:33.120
> 
> 标签：c#, wcf, reflection, app-config

我在 vs2010 中创建了一个类库项目[MyLibrary] 并添加了服务参考[http://127.0.0.1/MyService.svc]。所以它在 app.config 中包含了这样的节点。

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IMyService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://127.0.0.1/MyService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IMyService"
            contract="MyService.IMyService" name="BasicHttpBinding_IMyService" />
    </client>
</system.serviceModel> 
```

我编译 MyLibrary 项目，它生成 MyLibrary.dll 和 MyLibrary.dll.config。一般来说，我可以调用 wcf 方法，例如：

```
MyService.MyServiceClient client = new MyServiceClient(); 
```

int 结果 = client.Add(3,6);

我没有通过programe操作app.config。它运行良好。

现在，我编写了另一个程序来加载 MyLibrary.dll 并使用 refelection 调用 wcf 方法。它会生成错误：在 ServiceModel 客户端配置部分中找不到引用合同“MyService.IMyService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

我认为它没有在运行时使用反射读取 app.config 中的配置。我尝试使用这种方法，它仍然不起作用。

```
string assemblyPath = Assembly.GetExecutingAssembly().Location;
string configPath = assemblyPath + ".config";
currentDomain.SetData("APP_CONFIG_FILE", configPath);
typeof(ConfigurationManager)
    .GetField("s_initState", BindingFlags.NonPublic | BindingFlags.Static)
    .SetValue(null, 0);

typeof(ConfigurationManager)
    .GetField("s_configSystem", BindingFlags.NonPublic | BindingFlags.Static)
    .SetValue(null, null);

typeof(ConfigurationManager)
    .Assembly.GetTypes()
    .Where(x => x.FullName == "System.Configuration.ClientConfigPaths").First()
    .GetField("s_current", BindingFlags.NonPublic | BindingFlags.Static)
    .SetValue(null, null); 
```

如果我不想更改上面的调用 wcf 代码，我该怎么办？如何让程序在运行时使用反射加载和识别 app.config。似乎无用的反射。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:52:57.183

您应该将部分从 MyLibrary.dll.config 复制`<system.servicemodel>`到应用程序引用 MyLibrary.dll 的 app.config。应该够了。无论如何，您是在问如何加载 app.config。在这篇[文章](http://weblogs.asp.net/cibrax/archive/2007/10/19/loading-the-wcf-configuration-from-different-files-on-the-client-side.aspx)中描述了如何从任何文件加载 WCF 客户端配置。但同样，复制 servicemodel 部分就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:02:20.243

它与通过反射调用无关。有错误消息表明`Mylibrary.dll.config`找不到配置。如果您在没有将配置添加到新程序的 app.config（或 web.config）的情况下直接调用引用 Mylibrary.dll 的客户端代码，则会收到相同的错误。

```
MyService.MyServiceClient client = new MyServiceClient(); 
```

默认情况下，上面的代码会在当前运行进程的配置文件中查找`<system.servicemodel>`. 您的新程序的配置需要将 Mylibrary.dll.config 文件中的信息添加到它的配置文件中。否则，您必须直接在代码中配置客户端。

# matlab - Matlab如何向量化双循环？设置嵌套结构数组的值非常慢

> ID：15153334
> 
> 赞同：6
> 
> 时间：2013-03-01T08:17:50.150
> 
> 标签：matlab, for-loop, nested, structure, vectorization

我有一个 tab = value 格式的嵌套结构数组 t，其中 a 和 b 只是随机字符串。t 可以有任意数量的 a 作为字段名，每个 a 可以有任意数量的 b 作为字段名。我需要制作一个名为 x 的 t 副本，但设置所有 xab = 0。此外，我需要为 t 中的所有 a 创建另一个 ya = 0 形式的结构数组。现在我正在使用嵌套的 for 循环解决方案，但是如果 a 和 b 太多，它就会太慢。有人可以告诉我是否有任何方法可以矢量化此嵌套循环或此代码中的任何其他操作以使此代码运行得更快？谢谢。

```
names1 = fieldnames(t);
x = t;
y = {};
for i=1:length(names1)
  y.(names1{i}) = 0;
  names2 = fieldnames(x.(names1{i}));
  for j=1:length(names2)
      x.(names1{i}).(names2{j}) = 0;
  end
end 
```

样本：

```
if t is such that
t.hello.world = 0.5
t.hello.mom = 0.2
t.hello.dad = 0.8
t.foo.bar = 0.7
t.foo.moo = 0.23
t.random.word = 0.38

then x should be:
x.hello.world = 0
x.hello.mom = 0
x.hello.dad = 0
x.foo.bar = 0
x.foo.moo = 0
x.random.word = 0

and y should be:
y.hello = 0
y.foo = 0
y.random = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:59:04.347

[您可以通过使用structfun](http://www.gnu.org/software/octave/doc/interpreter/Function-Application.html#Function-Application)摆脱所有循环

```
function zeroed = always0(x)
  zeroed = 0;
endfunction

function zeroedStruct = zeroSubfields(x)
   zeroedStruct = structfun(@always0, x, 'UniformOutput', false);
endfunction

y = structfun(@always0, t, 'UniformOutput', false);
x = structfun(@zeroSubfields, t, 'UniformOutput', false); 
```

如果您有任意嵌套的字段 zeroSubfields 可以扩展到

```
function zeroedStruct = zeroSubfields(x)
   if(isstruct(x))
     zeroedStruct = structfun(@zeroSubfields, x, 'UniformOutput', false);
   else
     zeroedStruct = 0;
   endif
endfunction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:13:47.987

要构造`y`，您可以执行以下操作：

```
>> t.hello.world = 0.5;
>> t.hello.mom = 0.2;
>> t.hello.dad = 0.8;
>> t.foo.bar = 0.7;
>> t.foo.moo = 0.23;
>> t.random.word = 0.38;
>> f = fieldnames(t);
>> n = numel(f);
>> fi = cell(1,n*2);
>> fi(1:2:(n*2-1)) = f;
>> fi(2:2:(n*2)) = num2cell(zeros(n,1))
fi = 
    'hello'    [0]    'foo'    [0]    'random'    [0]
>> y = struct(fi{:})
y = 
     hello: 0
       foo: 0
    random: 0 
```

基本上，您只是获取字段名，将它们与单元格数组中的零交错，然后从该单元格数组中直接使用逗号分隔的字段名和值列表构造结构。

对于`x`，我认为您仍然需要遍历第一级字段名。但是您应该能够在每次循环迭代中执行与上述类似的操作。

# jquery - 如何将数据绑定到 Jquery Mobile 列表视图

> ID：15153335
> 
> 赞同：0
> 
> 时间：2013-03-01T08:17:57.827
> 
> 标签：jquery, asp.net, ajax, jquery-mobile, data-binding

下面是我的代码，数据没有绑定到列表视图。显示一个空白页面。

```
<div data-role="page" id="index">
        <div data-role="header">
            <h1>
                demo</h1>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" id="cars-data">
            <li >abcd</li>
            <li>cdf</li>
            </ul>
        </div>
    </div>
    <div data-role="page" id="cars">
        <div data-role="header">
            <a data-role="button" data-transition="none" data-theme="a" href="#index">Back</a>
            <h1>
            </h1>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" id="car-data">
            </ul>
            <img src="" width="100%" style="height: auto;" id="car-img">
        </div>
    </div>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {

            $.ajax({
                type: "POST",
                async: true,
                url: "PINCWebService.asmx/GetContacts",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    // $("#car-data").html(data);
                    var list = $("#car-data");
                    list.empty();

                    $.each(data, function (rowIndex) {
                       var datar = data.rows.item(rowIndex);
                        list.append("<li>" + datar + "</li>");
                    });

                    list.listview('refresh');
                }

            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:03:06.143

我已经为你写了一些东西。请找出每件事是如何完成的。

**服务**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Script.Serialization;

namespace SimpleWebService
{

    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

        [WebMethod]
        public string GetLankanList()
        {
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            List<Lankans> lankanList = new List<Lankans>();
            string[] names = { "chamara", "janaka", "asanka" };

            for (int i = 0; i < names.Length; i++)
            {
                Lankans srilankans = new Lankans();
                srilankans.Name = names[i];

                lankanList.Add(srilankans);
            }

            string jsonString = serializer.Serialize(lankanList);
            return jsonString;
        }

        public class Lankans
        {
            public string Name { get; set; }
        }
    }
} 
```

**HTML**

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Page Title</title> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script>
</head> 
<body> 

<div data-role="page" id="lankalistpage">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <div id="LankanLists"></div>        
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->
<script src="lankanscript.js"></script>
</body>
</html> 
```

**JavaScript**

```
$('#lankalistpage').live('pageshow',function(event){
    var serviceURL = 'service1.asmx/GetLankanList';

    $.ajax({            
            type: "POST",
            url: serviceURL,
            data: param="",
            contentType:"application/json; charset=utf-8",
            dataType: "json",
            success: successFunc,
            error: errorFunc
    });

    function successFunc(data, status){
        // parse it as object
        var lankanListArray = JSON.parse(data.d);

        // creating html string
        var listString = '<ul data-role="listview" id="customerList">';

        // running a loop
        $.each(lankanListArray, function(index,value){
         listString += '<li><a href="#" >'+this.Name+'</a></li>';
        });
        listString +='</ul>';

        //appending to the div
        $('#LankanLists').html(listString);

        // refreshing the list to apply styles
        $('#LankanLists ul').listview();
    }

    function errorFunc(){
        alert('error');
    }
}); 
```

最终输出 ![在此处输入图像描述](../Images/6ec7ff6a203b80c47d20f0f66adf0e36.png)

你可以[在这里下载源代码](http://rapidshare.com/files/1225236319/SimpleWebService.zip)

# asp.net - Episerver CMS 6 页面加载缓慢

> ID：15153339
> 
> 赞同：3
> 
> 时间：2013-03-01T08:18:22.403
> 
> 标签：asp.net, episerver, episerver-6

嗨，

我正在开发 Episerver 站点，但页面加载速度很差

使用的配置：

*   亚马逊 AWS Windows Server 2008 R2 数据中心
*   8 GB RAM，64 位运算。系统
*   微软 SQL Server 2008 R2
*   IIS 7.5

关注[http://world.episerver.com/Blogs/Alexander-Haneng/Dates/2011/12/Starting-CMS-6-R2-sites-faster-after-build/](http://world.episerver.com/Blogs/Alexander-Haneng/Dates/2011/12/Starting-CMS-6-R2-sites-faster-after-build/)博客文章，但没有得到巨大的性能变化

还在 web.config 中启用了 Trace，我在 trace.axd 中看到：开始加载和结束加载之间有一个巨大的加载时间：有时 20 秒，而不是第一次加载。

在启用“IIS中的动态数据缓存”时也遇到问题，导致页面不再加载，我收到错误消息内容编码错误，因为我看到这来自Content-Length Header，它与所需的长度不匹配。

我不明白为什么通常需要在大约 4 秒内加载页面，任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:57:57.850

如果没有优化，EPiServer 在冷启动时可能会很慢，但提供页面的速度非常快，除非您在应用程序池中耗尽内存 - 而且您不应该使用 8 GB 的 RAM。

检查事项：

*   应用程序池行为：每次页面加载时 CPU 都会出现峰值吗？应用程序池是否使用大量物理内存？应用程序池是否有任何内存限制？
*   在站点后端的管理模式的起始页上有缓存统计信息。缓存命中率应该非常高（> 90%），否则缓存有问题。
*   你确定这是服务器端的延迟 - 开发者工具/Firebug 说什么？
*   您是否启用了 log4net 日志记录？在对性能问题进行故障排除时，它非常有用。如果是，您是否映射了自己的配置文件？（我们因此遇到了极端的性能问题 - 使用到 episerverlog.config 的内置映射）
*   您是否遇到所有模板的问题？如果您创建一个没有母版页/主布局视图的准系统测试模板，并且除了输出一个属性之外什么都不做。
*   事件日志中记录了任何可疑事件？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:35:03.720

如果站点在 DEV 和 Amazon 环境中都很慢，那么答案很可能在您的模板中。

试试 Anders 建议的“准系统测试模板”。

Also do a trace using for example dotTrace [http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/) and/or possibly SQL Profiler to see if you find something slow or something that occurs way too often.

# android - 如何在应用程序开始时获得旋转进度条

> ID：15153345
> 
> 赞同：2
> 
> 时间：2013-03-01T08:18:46.280
> 
> 标签：android, android-asynctask, progress-bar, spinning

我是安卓新手。我设法将 JSON 文件解析到我的应用程序。现在我想使用 AsyncTask 来获取 Spinning progressBa，直到应用程序启动并加载数据。我试图阅读很多东西，但它们只提供了如何获取 onclick 事件或下载事件的进度条。

这是我的代码...

我只是对如何在您的应用程序启动时启动进度条以及以下代码的哪一部分转到 asycTask 类的哪个方法感到困惑......

```
package com.demojson;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.app.ListActivity;

public class MainActivity extends ListActivity {

    private static String url = "http://timepasssms.com/webservices/ws.php?type=category";

    private static final String TAG_DATA = "DATA";

    private static final String TAG_0 = "0";
    private static final String TAG_ID = "id";
    private static final String TAG_1 = "1";
    private static final String TAG_NAME = "name";
    private static final String TAG_2 = "2";
    private static final String TAG_DESCRIPTION = "description";
    private static final String TAG_3 = "3";
    private static final String TAG_NEW_NAME = "new_name";
    private static final String TAG_4 = "4";
    private static final String TAG_STATUS = "status";

    JSONArray jArray = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ArrayList<HashMap<String, String>> contents = new ArrayList<HashMap<String, String>>();

        JSONMethod metObj = new JSONMethod();
        JSONObject jOb = metObj.getUrl(url);
        try {
            jArray = jOb.getJSONArray(TAG_DATA);

            for (int i = 0; i < jArray.length(); i++) {
                JSONObject child = jArray.getJSONObject(i);

                String tag_0 = child.getString(TAG_0);
                String id = child.getString(TAG_ID);
                String tag_1 = child.getString(TAG_1);
                String name = child.getString(TAG_NAME);
                String tag_2 = child.getString(TAG_2);
                String description = child.getString(TAG_DESCRIPTION);
                String tag_3 = child.getString(TAG_3);
                String new_name = child.getString(TAG_NEW_NAME);
                String tag_4 = child.getString(TAG_4);
                String status = child.getString(TAG_STATUS);

                HashMap<String, String> map = new HashMap<String, String>();
                map.put(TAG_NAME , name);

                contents.add(map);
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        ListAdapter adapter = new SimpleAdapter(this, contents,
                R.layout.list_items, new String[] { TAG_NAME },
                new int[] { R.id.tvName });
        setListAdapter(adapter);

        // --To get listview set...-- 

        ListView lv = getListView();
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                String item = ((TextView)view.findViewById(R.id.tvName)).getText().toString();
                Toast toast = Toast.makeText(getApplicationContext(), item , Toast.LENGTH_SHORT);
                toast.setGravity(Gravity.CENTER, 0, 0);
                toast.show();
            }
        }); 
    }

} 
```

和 JSONMethod 类...

```
package com.demojson;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONObject;

import android.util.Log;

public class JSONMethod {
    InputStream is = null;
    JSONObject jObj=null;
    String json = "";

    public JSONObject getUrl(String url){
        try{
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            HttpResponse httpRespone = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpRespone.getEntity();
            is = httpEntity.getContent();

        }catch(UnsupportedEncodingException ue){

        }catch(ClientProtocolException ce){ 

        }catch(IOException ie){

        }

        try{
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line=null;
            while((line=br.readLine())!= null){
                sb.append(line + "/n"); 
            }
            is.close();
            json = sb.toString();

        }catch(Exception e){
            Log.e("JSONMethod", "Error converting result" + e.toString());
        }
        try{
            jObj = new JSONObject(json);
        }catch(Exception e){
            Log.e("JSONMethod", "Error parsing data" + e.toString());
        }

        return jObj;
    }
} 
```

这是 xml 文件...activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <!-- Main ListView 
         Always give id value as list(@android:id/list)
    -->

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:src="@drawable/timepasssms" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_gravity="center"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

和 list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/round_edge"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvName"
        android:layout_width="fill_parent"
        android:layout_height="45dp"
        android:layout_marginLeft="10dp"
        android:gravity="left"
        android:padding="5dp"
        android:textColor="#DF7401"
        android:textSize="20dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:26:08.347

这是示例`

```
@Override
    protected void onPostExecute(Object table) {
        // TODO Auto-generated method stub
        super.onPostExecute(table);
        dialog.dismiss();
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        dialog=ProgressDialog.show(Yourclass.this, "Loading Data.", "Please Wait");
    } 
```

`我希望会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:30:41.163

尝试使用 Async 类并在 doInBackground() 方法中加载您的列表视图。

这是调用异步类的方法

```
new LoadListView(this).execute(listView); 
```

这是你的异步类

```
public class LoadListView extends AsyncTask<ListView> {

private Context context;
public loadListView(Context context) 
{
    this.context = context;

}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    mProgressDialog.show();
}

@Override
protected String doInBackground(String... aurl) {

    //Here you need to load your ListView
    return null;

}

protected void onProgressUpdate(String... progress) {

     //Show progress bar here
}

@Override
protected void onPostExecute(String unused) {
    //Hide Progress Bar Here
} 
```

加载列表视图时它会自动隐藏进度条..

# macos - 更改 sudo 命令输出的样式

> ID：15153346
> 
> 赞同：2
> 
> 时间：2013-03-01T08:18:47.113
> 
> 标签：macos, sudo

我的一些构建命令使用 osx 命令`say`在我继续工作时通知我进度。通常，他们使用温和的女性声音，但当我运行命令时，`sudo`有一个相当粗暴的男子气概告诉发生了什么事。

我认为如果 sudo 命令对其输出有类似的视觉线索会很有用，所以也许输出可以加上前缀`*`或颜色更改为亮黄色或类似的东西。有什么方法可以实现我想要的吗？

也许我可以创建一个别名来`sudo`改变输出的颜色，然后继续发出 sudo 命令 - 但我不知道如何让颜色变回来。

是否有任何现有系统可以启用此调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:01:28.387

使用`alias sudo="tput setaf 1; sudo"`.

要改回颜色，只需添加`tput setaf 0`到您的`PROMPT_COMMAND`(in the `.bashrc`)

# jquery - 如何将 Django 与 JqueryUI 对话框集成？

> ID：15153347
> 
> 赞同：5
> 
> 时间：2013-03-01T08:18:54.870
> 
> 标签：jquery, mysql, django

我想使用 jQueryUI 对话框在我的 Django 项目中添加一个功能，当您单击链接（如“删除”链接）时，会弹出一个 jQueryUI 对话框，询问您是否真的要删除该项目。然后，如果您单击删除按钮（找到 jQuery 对话框），Django 函数将执行删除工作。

那么如何让删除按钮（找到 jQuery 对话框）向我的 views.py 中的 Django 函数发送一条发布消息（带有相应的变量）来执行删除工作？

考虑我正在使用 view.py 文件（在 Django 中），如下所示

```
def deletebook(request,book_id):
    books=Book.objects.get(pk=book_id)
    books.delete()
    return redirect('/index/') 
```

我的要求是，如果我按下删除选项，会立即出现一个确认对话框，其中包含 2 个字段，如下“是”或“否”。

请帮助我设计一个 html 页面和一个 view.py 页面以使用 jQuery 进行开发。

我的 HTML 页面是

```
<form action="/deletebook/{{ books.book_id}}/" method="POST"> {% csrf_token %}
<table>
  <tr>
    <td align="right">Book Name :<br><br><br> </td> 
    <td align="left"><input type="text" name="book_name" value="{{books.book_name}}"></input><br><br><br></td>
  </tr>
  <tr>   
    <td align="right">Author Name :<br><br><br></td> 
    <td align="left"> <input type="text" name="author_name" value="{{books.author_name}}"></input><br><br><br></td>
  </tr>
  <tr>
    <td align="right">Publisher Name : <br><br><br></td>
    <td align="left"><input type="text" name="publisher_name" value="{{books.publisher_name}}"></input><br><br><br></td><br><br><br>
  </tr>
</table>
<td><input type="submit" value="Delete"><td> 
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:25:24.880

您应该为对话框准备 div：

```
<div id="dialog">
    #some text here
</div> 
```

并链接哪个初始化打开对话框：

```
<a href='#' onclick='javascript:openDialog()'></a> 
```

和js openDialog函数：

```
function openDialog(){
    $('#dialog').dialog('open');
} 
```

和对话框定义：

```
$( "#dialog-form-ajax" ).dialog({
    autoOpen: false,
    buttons: {
        "Delete": function() {
            $.ajax({
                 #ajax call for delete
                 #with url pointing to your delete function
            });
            $( this ).dialog( "close" );
        },
        "Cancel": function() {
            $( this ).dialog( "close" );
        }
    }
}); 
```

# node.js - 流星订阅不更新集合的排序顺序

> ID：15153349
> 
> 赞同：20
> 
> 时间：2013-03-01T08:19:04.740
> 
> 标签：node.js, mongodb, meteor

```
// Snippet from Template
<div class="post-container">
  {{#each elements}}
    {{> post-element this}}
  {{/each}}
</div>

// Snippet from Client 
Meteor.subscribe('thePosts');

// Snippet from Server
Meteor.publish('thePosts', function(){
  return Posts.find({},  {sort:{createdAt:-1}, reactive:true});
}); 
```

当我做...

```
Posts.insert({body:postBody, createdAt: new Date()}); 
```

发布文档被添加并出现在我的列表末尾，而不是我的发布函数中指定的降序。知道我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-01T17:55:06.563

发布功能确定哪些记录应同步到任何订阅客户端的 mini-mongo 数据库。所以在发布函数中对数据进行排序实际上对客户端没有影响，因为客户端数据库可能会以其他方式存储它们。

当然，您可能希望在发布者`find`中使用排序，以将记录数限制为最近的 N - 但这只是决定同步哪些记录而不是如何存储/使用它们的一种方式。客户。

将记录同步到客户端后，由模板代码决定如何显示结果。例如：

```
Template.myTemplate.elements = function() {
  return Posts.find({}, {sort: {createdAt:-1}});
} 
```

[另请参阅我关于常见错误](http://dweldon.silvrback.com/common-mistakes)的帖子的“排序发布”部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T13:53:12.350

您没有发布您的模板帮助程序代码。

当您`return Posts.find()`从辅助函数执行时，查询还应包含排序参数，如下所示：

```
Template.myTemplate.elements = function(){
   Meteor.subscribe('thePosts');
   return Posts.find({},  {sort:{createdAt:-1}, reactive:true});
} 
```

# node.js - Rabbitmq 基于密钥的身份验证

> ID：15153356
> 
> 赞同：1
> 
> 时间：2013-03-01T08:19:28.253
> 
> 标签：node.js, erlang, rabbitmq, mqtt

背景：我对 RabbitMq 很陌生，我刚刚安装它并尝试使用它。

所以，我有 RabbitMq 在 ec2(ubuntu) 上运行，并且一个 node.js 服务器作为在本地机器上运行的 RabbitMq 客户端（用于通过 websockets 发布/订阅）我还在 RabbitMq 上启用了 MQTT 协议，以便在端口 1883 上运行

使用 node.js 我使用[MQTTClient](https://github.com/leizongmin/MQTTClient)但是每当 node.js 服务器与 RabbitMq 连接时，都会引发错误，**连接被拒绝：错误的用户名或密码**

我打算为 RabbitMQ 服务器使用基于密钥的身份验证，以便浏览器中的 websockets 发送一个编码字符串，node.js 服务器解码并获取一个 KEY 并将该 KEY 发送到 RabbitMQ ，然后 RabbitMQ 决定它是否存在。

我找到了另一个很棒的 RabbitMQ 插件，[rabbitmq-auth-backend-http](https://github.com/simonmacmullen/rabbitmq-auth-backend-http)但这需要用户名/密码，它可以是密钥/ID 组合。

我正在寻找建议，我该如何实现？

还有一个问题是 node.js 客户端都没有发送用户名/密码，这是否意味着我也必须编写一个 node.js 客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:41:35.393

该 MQTT 客户端似乎确实支持用户名和密码，请尝试在创建连接时传入的选项对象中设置它们。默认的 RabbitMQ 用户是`guest`，密码`guest`。

我不明白您为什么要使用 RabbitMQ 作为身份验证后端，因为它是消息队列，而不是身份存储。您提到的 auth 插件似乎允许您使用另一个 HTTP 服务器向 RabbitMQ 验证客户端，但不允许 RabbitMQ 处理身份管理。

# f# - 为什么此示例中存在类型推断错误

> ID：15153357
> 
> 赞同：3
> 
> 时间：2013-03-01T08:19:40.887
> 
> 标签：f#

我在此代码段上收到“根据此程序点之前的信息查找不确定类型的对象”错误：

```
let a = [|"a"; "bb"|]
let n = Array.mapi (fun i x -> (i * x.Length)) a 
```

它有什么问题？当我将光标悬停在它上方时，Visual Studio F# Interactive 正确地将 x 的类型显示为字符串。为什么我必须写：

```
let a = [|"a"; "bb"|]
let n = Array.mapi (fun i (x:string) -> (i * x.Length)) a 
```

编译成功？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T08:53:55.587

类型检查器从左到右工作。由于这个原因，编译器没有足够的信息来推断`x`.

克服这个问题的最简单方法是放在`a`开头：

```
let n = a |> Array.mapi (fun i x -> (i * x.Length)) 
```

编译器将知道它`a`的类型为`string []`，因此`x`为`string`。

另一种选择是使用静态函数：

```
let n = Array.mapi (fun i x -> (i * String.length x)) a 
```

`String.length`接受 a `string`，因此`string`成为 的推断类型`x`。

# java - 在java中每分钟运行数百个http请求

> ID：15153362
> 
> 赞同：1
> 
> 时间：2013-03-01T08:19:51.590
> 
> 标签：java, httpurlconnection

我正在使用 J2SE 开发一个应用程序，它会定期访问大量网站。高意味着数百个，通常意味着每分钟 - 因此，每分钟大约有 500 个 http 请求。

我的问题是，我应该注意 J2SE 中的任何限制吗？例如，http 请求池很差，我应该为此使用第三派应用程序，或者有某种缓冲区，这可能会减慢速度等。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:23:33.053

你应该找到一个专门针对这种流量的 http 客户端库。我认为内置程序不适合如此大量的请求。Apache httpClient 可能是一个候选者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:45:21.983

我知道关于 java.net http 客户端的限制是围绕身份验证（它可能难以扩展，并且在需要使用可能不同的凭据来调用相同的服务器环境中并不能很好地工作URL）、处理 cookie 和构建多部分帖子。

如果这些限制对您没有影响，或者您发现它们很容易解决，我发现 java.net 客户端执行得非常好。我还发现在尝试使用连接池以在多线程环境中利用 http keep alive 时使用起来更容易。正如另一个人提到的，这对于 Apache http 客户端来说是一个特别困难的领域。

# networking - 如何将skydrive映射为windows xp中的网络驱动器？

> ID：15153365
> 
> 赞同：4
> 
> 时间：2013-03-01T08:20:08.647
> 
> 标签：networking, windows-xp, onedrive

如何在 Windows XP/2003 中将我的 skydrive 映射为网络驱动器？

我再次需要它在 windows xp/2003 不是 7 也不是 Vista

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T15:31:26.250

在 Windows XP 中，您可以按照以下步骤映射 skydrive。

1) 获取你的 skydrive 16 位 skydrive “cid”。

使用您的网络浏览器登录到您的 Skydrive 帐户。登录后，右击左上角的skydrive标志，选择“复制链接地址”。您将获得如下所示的 URL：

[https://skydrive.live.com/#cid=0123456789ABCDEF](https://skydrive.live.com/#cid=0123456789ABCDEF)（其中 0123456789ABCDEF 是您的 cid）

将 cid 复制到某处。你马上就会需要它。

2) 在 Windows XP 中添加网上邻居。

打开文件资源管理器并选择工具/映射网络驱动器。在网络驱动器对话框的底部，单击“注册在线存储或连接到网络服务器”。这将带您进入添加网上邻居向导。点击下一步。选择“选择另一个网络位置”。在 Internet 或网络地址框中输入以下 URL：

[https://d.docs.live.net/0123456789ABCDEF](https://d.docs.live.net/0123456789ABCDEF)（其中 0123456789ABCDEF 是您的 cid）

点击下一步。键入名称。我制作了我的“Document @ Skydrive”。

您可能/应该在某个时候提示您登录。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-26T16:19:43.903

这是一个有点老的问题，但是是的，这可以很容易地完成。

[这](http://www.expandrive.com/)是一个可以做到这一点的应用程序。它不仅适用于 OveDrive，还适用于 Dropbox、Google Drive、S3、SFTP WebDAV 和许多其他云存储解决方案。

# sublimetext2 - 停止 Alt 键在 Sublime Text 2 中调出菜单

> ID：15153367
> 
> 赞同：5
> 
> 时间：2013-03-01T08:20:11.020
> 
> 标签：sublimetext2, key-bindings

我是一名 Emacs 用户，正在研究 Sublime Text 2。我已经重新映射了默认的 Emacs 键绑定，并且已经习惯于使用 Alt+i、Alt+k、Alt+j、Alt+l 进行向上、向下、向左移动和正确的。我在 Sublime Text 中重新映射这些键没有任何问题。

问题是，每当我使用这些键导航菜单时，都会弹出菜单，即使我已将其隐藏在无干扰模式下。当我按下 Alt 键时，我想停止出现菜单。

如果可能的话，我想将用于显示菜单的键重新映射到其他内容（如 Alt+空格）。否则，我想完全禁用带有 Alt 键的菜单（并使用热键和控制台进行所有操作）。

我在 Windows XP 上运行 Sublime Text。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T15:35:28.080

我遇到的问题是我重新绑定的键与菜单上的助记符冲突。具体来说，我将 Alt+i 映射到某个东西，同时它也是 Find 的助记符。

为了解决这个问题，我从菜单中删除了助记符，这会阻止菜单出现。为此，请转到 Preferences -> Browse Packages 并打开 Default/Main.sublime-menu 文件。在那里，您可以删除所有“助记符”：“*”，以摆脱助记符。

按 alt 键仍会调出菜单。如果要禁用此功能，可以使用以下 AutoHotkey 脚本（感谢 Armin）：

```
SetTitleMatchMode RegEx
#IfWinActive .*Sublime Text 2.*
    LAlt & esc::return ;This can be any key, not just escape. It's needed to get AutoHotkey to treat Alt as a prefix key.
    ~LAlt::return
#IfWinActive 
```

这只会停止左 Alt 调出菜单，右 Alt 仍将照常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:09:38.553

如果您使用 Autohotkey，您可以尝试使用[#IfWinActive](http://www.autohotkey.com/docs/commands/_IfWinActive.htm)，它只会在某个窗口处于活动状态时应用热键。然后你的代码看起来像这样

```
#IfWinActive, Emacs ; the name of the window
~LAlt::return ;this enables the LAlt + hotkey action but disables LAlt
LAlt & space::tooltip,do stuff
...
#IfWinActive ;end 
```

# android - 为什么，上下文在android中与按钮和setOnClickListener一起使用

> ID：15153370
> 
> 赞同：-3
> 
> 时间：2013-03-01T08:20:15.770
> 
> 标签：android

我正面临这个问题，我想找到将它传递给按钮和 setOnClickListener 的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:23:11.420

**上下文**是有关应用程序环境的全局信息的接口。这是一个抽象类，其实现由Android系统提供。它允许访问特定于应用程序的资源和类，以及向上调用应用程序级操作，例如启动活动、广播和接收意图等。

**按钮**也是应用程序的资源，所以如果你想创建按钮或任何小部件，那么你必须在小部件的构造函数中传递上下文。

了解更多[详情](http://developer.android.com/reference/android/content/Context.html)

# html - 如何在 html 中创建 4 X 2 表

> ID：15153373
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:20:27.017
> 
> 标签：html, html-table

我想创建一个上面有 4 列，下面有 2 列的表格，比如 ![在此处输入图像描述](../Images/b8a15ec36d6103101ff2b796a4c90824.png)

请让我知道如何在 html 表中实现。谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:22:06.767

```
<table border="1" width="100%">
    <tr>
        <td>&nbps;</td>
        <td>&nbps;</td>
        <td>&nbps;</td>
        <td>&nbps;</td>
    </tr>
    <tr>
        <td colspan="2">&nbps;</td>
        <td colspan="2">&nbps;</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:23:33.393

```
<table>
<tr>
  <td><td>
  <td><td>
  <td><td>
  <td><td>
</tr>
<tr>
  <td colspan="2"><td>
  <td colspan="2"><td>
</tr>
</table> 
```

# image-processing - 如何计算图像的二进制直方图？

> ID：15153374
> 
> 赞同：0
> 
> 时间：2013-03-01T08:20:31.743
> 
> 标签：image-processing, histogram, feature-detection, image-segmentation

假设一个大小为 256x256 的彩色图像，我如何计算图像的二元直方图？如果我想对相似图像进行聚类，哪种数据结构适合存储直方图？请注意，直方图必须与图像一起保存在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:31:17.127

假设您使用的是 Matlab：rgb2gray 和 imhist 可以帮助您。如果您只需要 2 个值，请尝试将其转换为二进制图像

# email - 使用 .sh 文件在 sendmail 中的文件中发送附件

> ID：15153375
> 
> 赞同：0
> 
> 时间：2013-03-01T08:20:41.483
> 
> 标签：email, attachment, sh

我想在邮件中发送附件..我使用此代码发送邮件这是我的 .sh 文件我不知道

```
 cat "/home/ubuntu/source_code/PCC/mail.template" |
 sed s/@SUBJECT@/"$1"/ | 
sed s~@BODY@~"$2"~ | 
sed s/@TOEMAILS@/"$3"/ | 
sed s/@CCEMAILS@/"$4"/ > /home/ubuntu/source_code/PCC/tempMail_"$5".template
    chmod 777 /home/ubuntu/source_code/PCC/tempMail_"$5".template
    cat /home/ubuntu/source_code/PCC/tempMail_"$5".template | 
sed 's/  */ /g' | 
sed 's%><%>\n<%g' | 
sed 's%> <%>\n<%g' > /home/ubuntu/source_code/PCC/tempMail2_"$5".template
    chmod 777 /home/ubuntu/source_code/PCC/tempMail2_"$5".template
   /usr/sbin/sendmail -f "$6" -t < /home/ubuntu/source_code/PCC/tempMail2_"$5".template
    rm -rf /home/ubuntu/source_code/PCC/tempMail2_"$5".template
    rm -rf /home/ubuntu/source_code/PCC/tempMail_"$5".template 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:05:55.090

您的脚本应该可以将命令行参数替换为套用信函模板。

不过，尝试用“身体”代替听起来很奇怪。

如果您真的想发送附件而不只是在套用信函上进行替换，您应该使用 mutt、elm、pine、alpine 或其他可以处理 MIME 附件的 MUA，而不是尝试直接使用 sendmail。

请注意，除非由 root 或其他“受信任”用户运行，否则 sendmail（或 /usr/sbin/sendmail 真正的任何类似工作）可能不支持“-t”标志。您不需要 chmod cmds，但无论您的问题是什么，它们都不会造成任何影响。

不要删除您的临时文件，而是保存一份副本并检查它以确保您的 sed 编辑按预期工作。

# gwt - 如何使用 gwt 2.4.0 创建 maven 项目

> ID：15153379
> 
> 赞同：0
> 
> 时间：2013-03-01T08:20:51.843
> 
> 标签：gwt, maven-2, maven-plugin

我正在使用 Eclipse(indigo) 并从 [http://download.eclipse.org/technology/m2e/release安装了 maven 插件](http://download.eclipse.org/technology/m2e/release)

我不明白列表中使用了哪个目录和原型。什么是 Group-Id 和 Artifact-Id ？这些id在项目中有什么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:13:57.250

这是在 Eclipse 中创建 GWT maven 项目的分步过程

[http://uptick.com.au/content/getting-started-gwt-maven-and-eclipse](http://uptick.com.au/content/getting-started-gwt-maven-and-eclipse)

这是视频链接：[http ://www.youtube.com/watch?v=Ea1vSx8aDXk](http://www.youtube.com/watch?v=Ea1vSx8aDXk)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:30:44.483

**组 ID** `will identify your project uniquely across all projects`

**工件 ID** `is the name of the jar without version.`

请参考[maven 命名约定](http://maven.apache.org/guides/mini/guide-naming-conventions.html)

**更新：**

忘记提目录了。已经有`standard catalog files`。使用它们。

这些是标准[目录](http://maven.apache.org/archetype/archetype-common/archetype-catalog.html)文件，其中包含有关信息，`Archetypes`以便用户可以看到`archetypes`任意数量的列表`catalogs`以生成新的`projects`.

# linux - 终止使用 system() 启动的进程

> ID：15153380
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:20:58.117
> 
> 标签：linux, perl

1.  如何使用 Perl 杀死耗时的进程或卡住的进程（通过 `system`命令生成）。

2.  如何杀死使用`system`命令启动的进程花费太多时间或卡在某个地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:37:13.957

如果您希望在同一脚本中终止由 system() 调用的进程，则无法获取或终止它的 PID，因为 system() 调用在进程完成之前不会返回。相反，您可以使用 fork() 创建一个新进程，并在 exec() 新创建的进程中执行最初由 system() 调用的进程。fork() 将返回子进程的 PID，然后您可以随时使用 kill() 杀死它。

[http://perldoc.perl.org/functions/fork.html](http://perldoc.perl.org/functions/fork.html)

[http://perldoc.perl.org/functions/exec.html](http://perldoc.perl.org/functions/exec.html)

[http://perldoc.perl.org/functions/kill.html](http://perldoc.perl.org/functions/kill.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:36:28.273

Perl FAQ 的第 8 节包含

> ### [如何使慢速事件超时？](http://perldoc.perl.org/perlfaq8.html#How-do-I-timeout-a-slow-event?)
> 
> 使用该[`alarm`](http://perldoc.perl.org/functions/alarm.html)函数，可能与信号处理程序一起使用，如[Perlipc](http://perldoc.perl.org/perlipc.html#Signals)中的信号和 Camel 中的“信号”部分所述。您可以改用 CPAN 提供的更灵活的[Sys::AlarmCall](http://search.cpan.org/perldoc?Sys%3A%3AAlarmCall)模块。
> 
> 该[`alarm`](http://perldoc.perl.org/functions/alarm.html)功能并非在所有版本的 Windows 上都实现。检查您的特定 Perl 版本的文档。

perlipc 文档的[“信号”部分](http://perldoc.perl.org/perlipc.html#Signals)包含

> 信号处理也用于 Unix 中的超时。虽然在一个[`eval{}`](http://perldoc.perl.org/functions/eval.html)块内受到安全保护，但您设置一个信号处理程序来捕获警报信号，然后安排在几秒钟内将一个信号发送给您。然后尝试您的阻止操作，在完成后清除警报，但在您退出[`eval{}`](http://perldoc.perl.org/functions/eval.html)阻止之前清除警报。如果它熄灭，您将用于[`die`](http://perldoc.perl.org/functions/die.html)跳出街区。
> 
> 这是一个例子：
> 
> ```
> my $ALARM_EXCEPTION = "alarm clock restart";
> eval {
>     local $SIG{ALRM} = sub { die $ALARM_EXCEPTION };
>     alarm 10;
>     flock(FH, 2)    # blocking write lock
>                     || die "cannot flock: $!";
>     alarm 0;
> };
> if ($@ && $@ !~ quotemeta($ALARM_EXCEPTION)) { die } 
> ```
> 
> 如果超时的操作是[`system`](http://perldoc.perl.org/functions/system.html)或[`qx`](http://perldoc.perl.org/perlop.html#qx%2fSTRING%2f)，这种技术很容易产生僵尸。如果这对您很重要，您需要自己做[`fork`](http://perldoc.perl.org/functions/fork.html)and [`exec`](http://perldoc.perl.org/functions/exec.html)，并杀死错误的子进程。
> 
> 对于更复杂的信号处理，您可能会看到标准[POSIX](http://perldoc.perl.org/POSIX.html)模块。遗憾的是，这几乎完全没有文档记录，但[`t/lib/posix.t`](http://perl5.git.perl.org/perl.git/blob/9a9cbd715960a905dcbc9166349a73a64a007e4e:/ext/POSIX/t/posix.t)来自 Perl 源代码分发的文件中有一些示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:09:24.433

建议使用 fork 和 exec，主要作为安全预防措施（用户输入）。

但是，如果您不关心用户输入并且知道您已经开始使用系统的进程，那么您可以打开一个到任务列表或 ls 调用的管道，用 grep 处理它们以找到您所困扰的进程，然后发送终止信号到那些进程。

# vim - 为什么当我更改缓冲区时我的 vim 颜色方案会发生变化

> ID：15153381
> 
> 赞同：2
> 
> 时间：2013-03-01T08:21:01.560
> 
> 标签：vim, color-scheme

我在某些文件类型上有一些首选的颜色方案，但是当我打开另一个文件（具有不同颜色方案的不同文件类型）并返回前一个文件时，新的颜色方案仍然存在。

我的 Gvimrc 中有这个（使用 gvim）

```
autocmd WinEnter,FileType * colorscheme default
autocmd WinEnter,FileType c,cpp colorscheme darkblue
autocmd WinEnter,FileType R,r colorscheme desert 
```

当我在缓冲区中导航时，如何修改以确保颜色方案根据文件类型持续存在？

编辑：添加以下内容没有解决

```
autocmd BufEnter,BufNew,FileType c,cpp colorscheme darkblue
autocmd BufEnter,BufNew,FileType R,r colorscheme desert 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T08:36:44.020

在同一个 autocmd 规则中组合`WinEnter`和事件是没有意义的；`FileType`第一个匹配缓冲区的文件名，而后者匹配缓冲区的文件类型。

相反，只要在窗口中输入/显示缓冲区，就使用触发的单个 autocmd，并选择带有条件的颜色模式`&filetype`。

```
:autocmd BufEnter,FileType *
\   if &ft ==# 'c' || &ft ==# 'cpp' | colorscheme darkblue |
\   elseif &ft ==? 'r' | colorscheme desert |
\   else | colorscheme default |
\   endif 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T08:44:45.180

Ingo 的答案更聪明，但这些自动命令

```
autocmd BufEnter *     colorscheme default
autocmd BufEnter *.php colorscheme desert
autocmd BufEnter *.py  colorscheme darkblue 
```

应该管用。好吧，他们在这里工作。

# entity-framework - Fluent API 中带有额外字段的多对多映射

> ID：15153390
> 
> 赞同：27
> 
> 时间：2013-03-01T08:22:01.343
> 
> 标签：entity-framework, ef-code-first

我有一个多对多的关系，我想使用 Code First Fluent API 在对表中存储额外的数据。

如何实现？

我的模型：

一个用户可以拥有 1 个或多个徽章（可选），一个徽章可以属于一个或多个用户（可选）。我想存储一个额外的字段（称为 B）来存储这个关系。该表应命名为 UserBadges，并包含以下字段：UserId、BadgeId、B

（我之前在 StackOverflow 中看到过这个[，](https://stackoverflow.com/questions/7964631/mapping-many-to-many-with-extra-columns-in-fluent-api)但我的模型有点复杂，还没有正确给出答案）

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-01T08:33:16.340

您不能直接将其映射为多对多。如果您向联结表添加其他字段，并且您想在应用程序中访问该字段，则需要将联结表提升为实体并使用两个一对多关系：

```
public class Badge {
    ...
    public virtual ICollection<UserBadge> UserBadges { get; set; }
}

public class User {
    ...
    public virtual ICollection<UserBadge> UserBadges { get; set; }
}

public class UserBadge {
    public int UserId { get; set; }
    public int BadgeId { get; set; }
    public string B { get; set; }
    public virtual Badge Badge { get; set; }
    public virtual User User { get; set; }
} 
```

默认约定应正确定义映射，但`UserBadge`表的键必须在 Fluent-API 或数据注释中完成。

```
modelBuilder.Entity<UserBadge>().HasKey(e => new { e.UserId, e.BadgeId }); 
```

# javascript - Alt属性的问题

> ID：15153394
> 
> 赞同：0
> 
> 时间：2013-03-01T08:22:15.517
> 
> 标签：javascript, jquery, html, css

我需要 jquery 代码的帮助。我开发了一个网站，当我们将鼠标悬停在主页、关于我们等导航选项卡上时，标题图像会发生变化。问题是我在“alt”属性中包含了悬停时需要更改的图像。这适用于 chrome，但不适用于 Firefox 和 IE。该网站的链接是

```
 http://datacrawl.in/home.html 
```

HTML：

```
<ul>
<li><a href="home.html"> Home  </a><span style = "color: #FFF; position: relative;  left: 23px; "> | </span></li>
<li><a class = "ser" alt = "images/7.jpg" href="about.html"> About Us</a><span style = "color: #FFF; position:             relative; left: 23px;"> | </span></li>
<li><a class = "ser" alt = "images/5.jpg" href=""> Services </a> <span style = "color: #FFF; position: relative; left:     23px;"> | </span>
<ul>
<li style = "background-color: #8e64b0;"><a class = "ser" alt =  "images/3.jpg" href="software.html"> Software             Development </a></li>
<li style = "background-color: #7b55a0;"><a class = "ser" alt = "images/2.jpg" href="web.html"> Web & Graphic              Designing </a></li>
<li style = "background-color: #8e64b0;"><a class = "ser" alt = "images/4.jpg" href="technical.html"> Technical            Training </a></li>
</ul>
</li>
<li><a class = "ser" alt = "images/6.jpg" href=""> Portfolio  </a><span style = "color: #FFF; position: relative;          left: 23px;"> | </span>
</ul> 
```

下面给出了我用来执行此操作的 jquery 代码

```
$(document).ready(function () {
    $('.heading1, .heading2, .ser').mouseover(function () {
        var src = $(this).attr('alt');
        $('.header img').stop().fadeOut(50, function () {
            $(this).attr('src', src);
            $(this).fadeIn(50);
        });
    });
    $('.heading1, .heading2, .ser').mouseout(function () {
        $('.header img').stop().fadeOut(50, function () {
            $(this).attr('src', 'images/1.jpg');
            $(this).fadeIn(50);
        });
    });
}); 
```

因此，当我将鼠标悬停在标题 1、标题 2 和 ser 类的链接上时，它会将标题图像更改为我设置的相应 alt 属性图像。这在 Firefox 和 IE 中不起作用。请帮我解决一下这个。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:12:03.157

天哪，不！不要`alt`用来存储数据。请改用该`data`属性。这就是它的设计目的。

此外，它可能不起作用，因为您已放置`alt`在锚标记上。`alt`仅用于`img`标签。

**HTML 重做：**

```
<ul>
    <li><a href="home.html">Home</a><span style = "color: #FFF; position: relative;  left: 23px; "> | </span></li>
    <li><a class = "ser" data-image = "images/7.jpg" href="about.html"> About Us</a><span style = "color: #FFF; position: relative; left: 23px;"> | </span></li>
    <li><a class = "ser" data-image = "images/5.jpg" href=""> Services </a> <span style = "color: #FFF; position: relative; left: 23px;"> | </span>
        <ul>
            <li style = "background-color: #8e64b0;"><a class = "ser" data-image =  "images/3.jpg" href="software.html"> Software Development </a></li>
            <li style = "background-color: #7b55a0;"><a class = "ser" data-image = "images/2.jpg" href="web.html"> Web & Graphic Designing </a></li>
            <li style = "background-color: #8e64b0;"><a class = "ser" data-image = "images/4.jpg" href="technical.html"> Technical Training </a></li>
        </ul>
    </li>
    <li><a class = "ser" data-image = "images/6.jpg" href=""> Portfolio  </a><span style = "color: #FFF; position: relative; left: 23px;"> | </span>
</ul> 
```

**jQuery重做：**

```
$(document).ready(function () {
    $('a.ser').mouseover(function () {
        var src = $(this).data('image');
        $('.header img').stop().fadeOut(50, function () {
            $(this).attr('src', src);
            $(this).fadeIn(50);
        });
    });
    $('a.ser').mouseout(function () {
        $('.header img').stop().fadeOut(50, function () {
            $(this).attr('src', 'images/1.jpg');
            $(this).fadeIn(50);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:05:02.030

哦，上帝，请不要为了这种目的滥用 alt 标签。您可以将数据属性用于此类事情：

```
<li><a class="ser" data-header-image="images/3.jpg" href="my-page.html">Link Text</a></li> 
```

您的 javascript 可以保持几乎相同，但请查看该数据属性。Alt 属性具有语义含义，因此不应该被滥用。对于任何使用屏幕阅读器的人来说，您的代码会让人感到困惑。

我还赞同其他人关于确保您的间距等正确并且您的结束标签存在的观点......这也可能导致问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T11:10:45.370

更改 img 源对我来说不是一个好主意，尝试制作背景精灵并通过将类添加到标题来移动它

# java - 请帮助卡住无效的密钥异常

> ID：15153395
> 
> 赞同：7
> 
> 时间：2013-03-01T08:22:16.753
> 
> 标签：java, security, cryptography, aes, public-key-encryption

我收到 java.security.InvalidKeyException: Illegal key size or default parameters ，我已经完成了所有必需的步骤，安装了 Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files。我也经历过这些话题

[Java.security.InvalidKeyException：非法密钥大小或默认参数错误](http://www.coderanch.com/t/521137/Security/java-security-InvalidKeyException-Illegal-key)

[Java 安全性：非法密钥大小或默认参数？](https://stackoverflow.com/questions/6481627/java-security-illegal-key-size-or-default-parameters)

但我仍然卡住并得到 java.security.InvalidKeyException: Illegal key size or default parameters ，

下面是我的代码：AESKeyGenerator.java

```
public class AESKeyGenerator {

    private Cipher mCipher;

    public AESKeyGenerator()
    {
        // default constructor
    }

    public byte[] generate_k(String dhkey, String toEncrypt)
    {
        byte[] retVal;

        try { // Set up the Cipher class of Android to use AES to generate keys
            byte[] iv = new byte[16];
            for (int i = 0; i < iv.length; i++)
                iv[i] = new Byte("0").byteValue();
            IvParameterSpec ivspec = new IvParameterSpec(iv);
            mCipher = Cipher.getInstance("AES");
            // Set up key to use in algorithm
            MessageDigest hasher = MessageDigest.getInstance("SHA-256"); // Initialize object that will hash my key.
            byte[] key256 = hasher.digest(dhkey.getBytes()); // Hash the key to 256 bits using SHA
            SecretKeySpec K = new SecretKeySpec(key256, "AES");
            System.out.println("SecretKeySpec : "+K  + "  key256 "+key256);
            mCipher.init(Cipher.ENCRYPT_MODE, K, ivspec);
            // Encrypt the parameter toEncrypt
            retVal = mCipher.doFinal(toEncrypt.getBytes());
            return retVal;
        }
        catch (Exception e) {
                        e.printStackTrace();
            System.err.println("Could not create and initialize object Cipher.");
        }

        return null;

    }

    public byte[] generate_r(byte[] sharedKey, String toEncrypt)
    {
        byte[] retVal;
        try {
            /*byte[] iv = new byte[16];
            for (int i = 0; i < iv.length; i++)
                iv[i] = new Byte("0").byteValue();
            IvParameterSpec ivspec = new IvParameterSpec(iv);*/

            // Set up the Cipher class of Android to use AES to generate keys
            mCipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
            // Set up key to use in algorithm
            MessageDigest hasher = MessageDigest.getInstance("SHA-256"); // Initialize object that will hash my key.
            byte[] key256 = hasher.digest(sharedKey); // Hash the key to 256 bits using SHA 256
            SecretKeySpec K = new SecretKeySpec(key256, "AES");
            mCipher.init(Cipher.ENCRYPT_MODE, K);
            // Encrypt the parameter toEncrypt
            System.out.println("toEncrypt AES: "+ toEncrypt);
            retVal = mCipher.doFinal(toEncrypt.getBytes());
            return retVal;
        }
        catch (Exception e) {
                        e.printStackTrace();
            System.err.println("exception: "+ e.toString());
            System.err.println("Could not create and initialize object Cipher.");
        }

        return null;

    }
} 
```

**我得到休闲错误：**

```
java.security.InvalidKeyException: Illegal key size or default parameters
  at javax.crypto.Cipher.checkCryptoPerm(Cipher.java:1010)
  at javax.crypto.Cipher.implInit(Cipher.java:785)
  at javax.crypto.Cipher.chooseProvider(Cipher.java:848)
  at javax.crypto.Cipher.init(Cipher.java:1212)
  at javax.crypto.Cipher.init(Cipher.java:1152)
  at AESKeyGenerator.generate_r(AESKeyGenerator.java:74)
  at DetectionServer.storeGridInformation(DetectionServer.java:309)
  at DetectionServer.doPost(DetectionServer.java:103)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
  at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
  at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
  at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
  at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
  at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
  at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
  at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
  at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
  at java.lang.Thread.run(Unknown Source)
exception: java.security.InvalidKeyException: Illegal key size or default parameters
Could not create and initialize object Cipher. 
```

我检查了与此相同的标准代码。我认为配置或缺少库存在一些问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:52:35.363

我*无法*重现这一点 - 我已经安装了当前的[Unlimited Strength Jurisdiction Policy Files](http://www.oracle.com/technetwork/java/javase/downloads/index.html)，并且我使用了以下主要方法进行测试：

```
public static void main(String[] args) throws UnsupportedEncodingException {
   AESKeyGenerator aes = new AESKeyGenerator();
   String sharedKey = "Bar12345Bar12345Bar12345Bar12345";
   aes.generate_r(sharedKey.getBytes("US-ASCII"), "Hello World");
} 
```

在安装策略文件之前，我遇到了与您相同的异常。

我首先做错的一件事是我将策略文件安装到了`Program files/jdk_1.7.0_13/jre/lib/security`，但使用的 JRE 位于`Program files/jre7`- 所以请确保您已将策略文件安装在正确的位置，并使用 main 使用简单的独立 java 应用程序进行检查上面的方法如果有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-27T07:54:37.003

我遇到了同样的问题，但现在可以正常工作了，您必须访问此站点并下载[http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html](http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html) 下载（ UnlimitedJCEPolicyJDK7.zip）然后解压并将两个jar文件复制到您的jdk位置路径并重新启动您的项目。就是这样

# python - 如何在 python 3.3 中使用 MysqlDB 模型？

> ID：15153401
> 
> 赞同：0
> 
> 时间：2013-03-01T08:22:44.620
> 
> 标签：python, mysql-python, python-3.3

当我在 python3.3 中运行 Django1.5 时，它报告一个问题，说没有名为 MySQLdb 的模型。那么如何在 python 3.3 上安装 MySQLdb？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:07:51.233

我想[MySQL Python 3](https://github.com/davispuh/MySQL-for-Python-3)的包是兼容的，你可以试一试。或者

[PyMySQL](https://github.com/petehunt/PyMySQL)是一个纯 python 客户端库，不依赖于标准 mysql 客户端库，通过构建脚本支持 Python 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:30:53.993

官方 MySQLdb 不支持 Python 3，请尝试安装[MySQL-for-Python](https://github.com/clelland/MySQL-for-Python-3)。

# vb.net - 如何从 vb.net 中的文本框传递水晶报告中的文本字段中的值

> ID：15153402
> 
> 赞同：2
> 
> 时间：2013-03-01T08:23:06.987
> 
> 标签：vb.net, parameters, crystal-reports

我想在 vb.net 的水晶报表中有一个字段，我想在这个文本字段中显示 vb.net 表单中文本框的值。

我创建了名为“prog_user”的参数并将其值设置为 textbox.text 但它不显示任何内容。

这是我的代码，我把它放在 vb.net 中的 report_viewer_shown 事件中

```
Dim crpath, filepath As String

        Private Sub rpt_viewer_Shown(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Shown               

                       cryrpt = New CrystalDecisions.CrystalReports.Engine.ReportDocument()
                        crpath = "D:\LEGAL\NLRC_new_022213\NLRC"
                        filepath = crpath & "\Legal Records.rpt"
                        cryrpt.Load(filepath)

                        cryrpt.RecordSelectionFormula = "{Command.CaseNo} = " & case_no
                        crviewer.ReportSource = cryrpt

                        Legal_Records1.SetParameterValue("prog_user", textbox1.text)
                        crviewer.Refresh()

end sub 
```

如果这可能是什么问题？我的水晶报表中的其他数据显示数据库中的正确值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-28T03:22:48.967

在添加值之前尝试清除它

```
With cryrpt
   .ParameterFields("prog_user").CurrentValues.Clear()
   .ParameterFields("prog_user").CurrentValues.Add(Textbox1.text)
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:36:27.693

尝试这样的事情

```
 cryrpt = New CrystalDecisions.CrystalReports.Engine.ReportDocument()
 crpath = "D:\LEGAL\NLRC_new_022213\NLRC"
 filepath = crpath & "\Legal Records.rpt"
 cryrpt.Load(filepath)

 cryrpt.RecordSelectionFormula = "{Command.CaseNo} = " & case_no
 cryrpt.ParameterFields("prog_user").CurrentValues.Clear()
 cryrpt.ParameterFields("prog_user").CurrentValues.Add(textbox1.text)

 crviewer.ReportSource = cryrpt
 crviewer.Refresh() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T04:22:14.857

这将使用文本框信息工作。与 CR：

```
 Dim report As New CrystalReport1
    Dim objText As CrystalDecisions.CrystalReports.Engine.TextObject = report.ReportDefinition.Sections(1).ReportObjects("Text1")
    objText.Text = Me.TextBox1.Text
    FrmPrint.CrystalReportViewer1.ReportSource = report
    FrmPrint.Show() 
```

# ios6 - 我的 UIScrollView 不适用于 ios6 中的自动布局

> ID：15153407
> 
> 赞同：2
> 
> 时间：2013-03-01T08:23:26.880
> 
> 标签：ios6, uiscrollview, autolayout

我在我的 UIViewController 中放入了一个 UIScrollView 到我的故事板中。当我使用此代码时：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [_scrollview setContentSize:CGSizeMake(_scrollview.bounds.size.width*2, _scrollview.bounds.size.height)];
    [_scrollview setPagingEnabled:YES];

    CGRect rect = _scrollview.bounds;

    UIView* view = [[UIView alloc]initWithFrame:rect];
    [view setBackgroundColor:[UIColor redColor]];
    [_scrollview addSubview:view];

    rect = CGRectOffset(rect, _scrollview.bounds.size.width, 0);
    view = [[UIView alloc]initWithFrame:rect];
    view.backgroundColor = [UIColor greenColor];
    [_scrollview addSubview:view];

} 
```

没有自动布局也可以正常工作，但是当我启用时，“rect”值等于 0。自动布局的等效代码是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T11:41:14.810

似乎您在自动布局环境中缺少一些关于 UIScrollView 的基本内容。仔细阅读[ios 6.0 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)

您的代码应如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect selfBounds = self.view.bounds;
    CGFloat width = CGRectGetWidth(self.view.bounds);
    CGFloat height = CGRectGetHeight(self.view.bounds);
    [_scrollview setPagingEnabled:YES];

    UIView* view1 = [[UIView alloc] initWithFrame:selfBounds];
    [view1 setTranslatesAutoresizingMaskIntoConstraints:NO];
    [view1 setBackgroundColor:[UIColor redColor]];
    [_scrollview addSubview:view1];

    UIView* view2 = [[UIView alloc]initWithFrame:CGRectOffset(selfBounds, width, 0)];
    [view2 setTranslatesAutoresizingMaskIntoConstraints:NO];
    view2.backgroundColor = [UIColor greenColor];
    [_scrollview addSubview:view2];

    [_scrollview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[view1(width)][view2(width)]|" options:0 metrics:@{@"width":@(width)} views:NSDictionaryOfVariableBindings(view1,view2)]];
    [_scrollview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view1(height)]|" options:0 metrics:@{@"height":@(height)} views:NSDictionaryOfVariableBindings(view1)]];
    [_scrollview addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view2(height)]|" options:0 metrics:@{@"height":@(height)} views:NSDictionaryOfVariableBindings(view2)]];
} 
```

# java - 将多个 JAXB 元素片段组合到一个根节点中？

> ID：15153408
> 
> 赞同：4
> 
> 时间：2013-03-01T08:23:28.347
> 
> 标签：java, xml, jaxb, marshalling

我现在正在研究 JAXB，我非常接近我需要的东西。目前，我的 ArrayList 是从数据库查询中填充的，然后编组到文件中，但问题是我的编组对象未包装在根节点中。我该怎么做呢？

```
try  //Java reflection
{
    Class<?> myClass = Class.forName(command); // get the class named after their input
    JAXBContext jaxbContext = JAXBContext.newInstance(myClass);
    Marshaller marshaller = jaxbContext.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);
    ArrayList<JAXBElement> listOfJAXBElements = getJAXBElementList(myClass);
    FileOutputStream fileOutput = new FileOutputStream(command + ".xml", true);
    for(JAXBElement currentElement: listOfJAXBElements)
    {
        marshaller.marshal(currentElement, fileOutput);
    }
    fileOutput.close();
}
catch (IOException | NullPointerException | ClassNotFoundException| JAXBException| SecurityException | IllegalArgumentException e) { } 
```

这是帐户类：

```
@XmlRootElement(name="accounts")
@Entity
@Table(name="Account")
public class account implements Serializable
{
      ...
} 
```

这是我的输出：

```
<class account>
    <accountNumber>A101</accountNumber>
    <balance>500.0</balance>
    <branchName>Downtown</branchName>
</class account>

<class account>
    <accountNumber>A102</accountNumber>
    <balance>400.0</balance>
    <branchName>Perryridge</branchName>
</class account> 
```

我想要：

```
<accounts>
    <class account>
        <accountNumber>A101</accountNumber>
        <balance>500.0</balance>
        <branchName>Downtown</branchName>
    </class account>

    <class account>
        <accountNumber>A102</accountNumber>
        <balance>400.0</balance>
        <branchName>Perryridge</branchName>
    </class account>
</accounts> 
```

编辑 1：一次编组一个对象会产生：

```
<accounts>
    <accountNumber>A101</accountNumber>
    <balance>500.0</balance>
    <branchName>Downtown</branchName>
</accounts>

<accounts>
    <accountNumber>A102</accountNumber>
    <balance>400.0</balance>
    <branchName>Perryridge</branchName>
</accounts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:26:11.100

采用`@XmlElementWrapper(name = "accounts")`

[有关 XMLElementWrapper](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlElementWrapper.html)注释的更多信息

如何使用它：

```
 @XmlElementWrapper(name = "bookList")
  // XmlElement sets the name of the entities
  @XmlElement(name = "book")
  private ArrayList<Book> bookList; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:02:15.837

您可以完全按照您当前正在做的事情做，此外还`<accounts>`可以`FileOutputStream`在编组对象之前和`</accounts>`之后写入。

您还可以引入一个新的域对象来保存列表。

```
@XmlRootElememnt
@XmlAccessorType(XmlAccessType.FIELD)
public class Accounts {

    @XmlElement(name="account")
    List<Account> accounts;

} 
```

# c++ - c++中的变量范围

> ID：15153412
> 
> 赞同：0
> 
> 时间：2013-03-01T08:23:39.967
> 
> 标签：c++

考虑一下：

```
for (int iii=0; iii < 10; iii++)
    cout << iii << " "; 
```

为什么 iii 在第一次迭代后不会失去它的价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:25:40.247

`for`因为循环中定义的变量范围是该`for`语句的主体。

在您的情况下，在循环`iii`内可见`for`，但在循环外不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T08:26:54.767

因为这相当于：

```
{
    int iii = 0;
    while(iii < 10){
        cout << iii << " ";
        iii++;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T08:27:05.470

因为以下`for`

```
for (initialization ; condition ; increment)
{
    body;
} 
```

相当于以下`while`

```
{
    initialization;
    while (condition)
    {
        body;
        increment;
    }
} 
```

# sql - Zend 在嵌套数组中合并 2 个 SQL 语句

> ID：15153414
> 
> 赞同：0
> 
> 时间：2013-03-01T08:23:47.007
> 
> 标签：sql, zend-framework, loops, jointable

这几天我一直在想办法解决这个问题。我需要将一个值数组放入主数组中，而这一切都必须来自 SQL 语句

```
public function fetchAllRest()
{

    $db = $this->getAdapter();
    $sql = $db->select()->from(array('c' => $this->getTableName()), array('id', 'personalId', 'name', 'number', 'email'))
    ->join(array('pd' => $this->getTableName('personal_data')), 'pd.personalId = c.personalId', array('street', 'zipcode', 'place'));

    $results = $this->getAdapter()->fetchAll($sql);
    return $results;
} 
```

下面的代码生成一个包含所有记录的数组，包括与个人数据的连接（因此，如果我有 5 条记录，我将得到一个包含 5 条记录的数组）。

现在我想让 join 语句（personal_data 部分）作为另一个数组成为数组的一部分，所以现在我们有：

```
[ 
    {1}, 
    {2}, 
    {3}, 
    {4}, 
    {5}
] 
```

每个值都包含一个 (5+3) 值的数组（在本例中为带有键/值对的 JSON），这应该变为：

```
[ 
    {1 
        {"personal_data" : "name", "number", "email"}
    }, 
    {2 
        {"personal_data" : "name", "number", "email"}
    }, 
    {3 
        {"personal_data" : "name", "number", "email"}
    }, 
    {4 
        {"personal_data" : "name", "number", "email"}
    }, 
    {5 
        {"personal_data" : "name", "number", "email"}
    }
] 
```

因此，原始数组中的自定义命名值的值“personal_data”包含该记录的所有personal_data。

我尝试遍历每个 SQL，但它产生了太多的语句，导致一些 mysql-bytes-error

有什么解决办法吗？

提前致谢

编辑：我尝试了以下方法：

```
foreach($results as $r) {
        $results[$i]["personal_data"] = array('personalDataId' => $results[$i]['personalDataId'],
                'name' => $results[$i]['name'],
                'number' => $results[$i]['number'],
                'email' => $results[$i]['email'];
        $i++;
    }
    return $results; 
```

太糟糕了，这并没有按照我想要的方式工作，因为为了访问数组中的值，它们必须存在（导致子数组的数据已经在散列中）。我现在正在考虑删除这些多余的数据，但删除我最初添加的数据听起来很不方便

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:23:38.067

得到后试试这个`$results`：

```
$jsonArray = array();
foreach ( $results as $result ) {
    $jsonArray[] = array( 'personal_data' => array(
        'id' => $result->id,
        'name' => $result->name,
        'street' => $result->street,
        ...
    ));
}

return $jsonArray; 
```

# c# - 如何使动态加载的程序集中的设置提供程序可用于反射？

> ID：15153420
> 
> 赞同：7
> 
> 时间：2013-03-01T08:24:50.400
> 
> 标签：c#, reflection, .net-assembly, settingsprovider

按照[这个问题](https://stackoverflow.com/questions/14651604/how-to-configure-asmx-web-service-url-from-remote-source)，我在我们正在开发的旧版 C# 应用程序中成功创建了我的自定义设置提供程序。它通过`SettingsProvider`属性引用：

```
public sealed class MySettings : SettingsProvider
{
    ...
}

[SettingsProvider(typeof(MySettings))]
internal sealed partial class Settings {} 
```

但是，现在我遇到了另一个问题。

我们的客户端应用程序包括一个自动更新工具，它的实现使得客户端的大部分——包括上面的类——被构建到一个 DLL（我们在这里称之为*client.dll*）中，然后由一个 EXE 使用。EXE 首先检查更新并在需要时从更新服务器下载最新的更新，将所有 DLL 等替换为其较新的版本（包括*client.dll*）。为了能够在运行时替换 DLL，它不能静态链接到它们。所以更新后，它会加载*client.dll*并像这样运行它：

```
Assembly assy = Assembly.LoadFile(
        AppDomain.CurrentDomain.BaseDirectory + "client.dll");
object frm = assy.CreateInstance("Client.Forms.MainForm");
Application.Run((Form)frm); 
```

这样做的不幸后果是框架在动态加载的程序集中找不到我的自定义设置提供程序类。我尝试使用`LoadFrom`而不是`LoadFile`上面，但它没有帮助。到目前为止，我发现的唯一可行的解​​决方案是在加载器 exe 中实现一个与实际设置提供程序同名的代理类，框架可以找到它。然后，代理从客户端程序集中实例化真正的设置提供程序，并将所有调用委托给它。

这似乎有效，但我对此并不满意。有没有办法帮助框架直接在动态加载的程序集中找到我的类？

### 更新

我得到的错误信息：

```
System.Configuration.ConfigurationErrorsException: Failed to load provider type: Client.Properties.MySettings, Client, Version=4.0.1341.0, Culture=neutral, PublicKeyToken=null.
   at System.Configuration.ApplicationSettingsBase.get_Initializer()
   at System.Configuration.ApplicationSettingsBase.CreateSetting(PropertyInfo propInfo)
   at System.Configuration.ApplicationSettingsBase.EnsureInitialized()
   at System.Configuration.ApplicationSettingsBase.get_Properties()
   at System.Configuration.SettingsBase.GetPropertyValueByName(String propertyName)
   at System.Configuration.SettingsBase.get_Item(String propertyName)
   at System.Configuration.ApplicationSettingsBase.GetPropertyValue(String propertyName)
   at System.Configuration.ApplicationSettingsBase.get_Item(String propertyName)
   at Client.Properties.Settings.get_SomeConfigSetting()
   at ... 
```

通过调试和日志消息，我确定永远不会调用该类的初始化方法，因此永远不会实例化该类。换句话说，上述异常背后似乎没有隐藏的初始化错误。

还有一点可能很重要：客户端当前在 .NET 2.0 上运行，并且在可预见的将来没有升级计划。

### 更新 2

我开始按照@jwddixon 的回答建议调查AppDomain。首先，我想检查 Client.dll 是否真的在与调用者 EXE 不同的应用程序域中结束。所以我列出了当前应用程序域中的程序集，并看到*客户端*实际上在那里。但令我惊讶的是，我注意到列表中实际上有两个名为*Client*的程序集 - EXE 和 DLL 具有相同的程序集名称，但版本不同（EXE 为 4.0.0.0，DLL 目前为 4.0.1352.0 ）。到目前为止，我还没有完全意识到这一点，这可能很重要。接下来我将尝试更改 EXE 程序集名称...

### 更新 3

...这实际上解决了问题！Aaargh... 对于我不为人知的前辈发明了这个不知道为什么的扭曲方案，我此刻有非常不喜欢的想法...但是感谢你们所有人提出的问题和想法，最终导致了解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:56:07.497

我还没有尝试过，但是类似的东西怎么样：

```
AppDomainSetup setup = AppDomain.CurrentDomain.SetupInformation;
AppDomain domain = AppDomain.CreateDomain("myAppDomain", null, setup)
setup.ApplicationBase = file;

Assembly assy = domain.Load(AssemblyName.GetAssemblyName(
AppDomain.CurrentDomain.BaseDirectory +
 "client.dll"));

object frm = assy.CreateInstance("Client.Forms.MainForm");
Application.Run((Form)frm); 
```

# jquery - 使用javascript在flash中模拟'0'按键

> ID：15153432
> 
> 赞同：0
> 
> 时间：2013-03-01T08:25:34.740
> 
> 标签：jquery, flash, keypress, oracle-adf

尝试在 Flash embed 元素上使用 javascript 模拟“0”按下，就像它涉及在 Flash 内单击按钮一样，但是按钮按下有替代方法，即 keypress '0'，我想在加载时运行这个 javascript，为此我应该调用程序化的“0”新闻。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:11:17.530

您无法模拟按键。但你可以假装:)

如果在按键'0'上你的程序执行一些代码，直接在闪存元素启动时执行这个代码......

# delphi - TListView - 当鼠标悬停在一个项目上时，不要绘制那个蓝色矩形。如何？

> ID：15153442
> 
> 赞同：0
> 
> 时间：2013-03-01T08:26:25.013
> 
> 标签：delphi, drawing, tlistview, custom-draw

当鼠标移动到 TListView 项目上方时，会出现蓝色轮廓（见图）。我将如何删除它？

我知道的唯一方法是手动绘制所有项目......但也许有更简单的方法？试过 HotTrack=False，没有帮助:(

![Item3 有这个蓝色轮廓](../Images/b06d47efa9d95b355b8a4ac3eb0843ba.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:04:15.020

那幅画是由特殊的探险家主题完成的。通过调用 in 将其添加到控件`SetWindowTheme(Handle, 'explorer', nil)`中`TCustomListView.CreateWnd`。如果您使用默认主题，那么您将无法获得热跟踪。您可以通过还原资源管理器窗口主题来实现这一点。例如在插入器类中：

```
type
  TListView = class(ComCtrls.TListView)
  protected
    procedure CreateWnd; override;
  end;
....    
procedure TListView.CreateWnd;
begin
  inherited;
  SetWindowTheme(Handle, nil, nil);
end; 
```

当然，您也会失去资源管理器主题添加的所有其他内容。

据我所知，没有通知消息可以让您抑制资源管理器主题热跟踪绘画。

# php - 如何使用tinymce在数据库中插入数据

> ID：15153449
> 
> 赞同：1
> 
> 时间：2013-03-01T08:26:50.273
> 
> 标签：php, tinymce

这是我的代码`TinyMCE`，当我打算提交它时，它不会出现在数据库中，我应该在表中放入什么数据类型：

```
< CONNECTION TO DATABASE?>

<!-- Load jQuery -->
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("jquery", "1");
</script>

<!-- Load TinyMCE -->
<script type="text/javascript" src="../jscripts/tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript">
$().ready(function() {
    $('textarea.tinymce').tinymce({
        // Location of TinyMCE script
        script_url : '../jscripts/tiny_mce/tiny_mce.js',

        // General options
        theme : "advanced",
        plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

        // Theme options
        theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
        theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,

        // Example content CSS (should be your site CSS)
        content_css : "css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "lists/template_list.js",
        external_link_list_url : "lists/link_list.js",
        external_image_list_url : "lists/image_list.js",
        media_external_list_url : "lists/media_list.js",

        // Replace values for the template plugin
        template_replace_values : {
            username : "Some User",
            staffid : "991234"
        }
    });
});
</script>
<!-- /TinyMCE -->

    </head>
    <body>

    <form name="insert" method="post" action="insert.php">

        <textarea id="elm1" name="elm1" rows="15" cols="80" style="width: 80%" class="tinymce">

        </textarea>
    </div>

    <!-- Some integration calls -->
    <a href="javascript:;" onclick="$('#elm1').tinymce().show();return false;">[Show]</a>
    <a href="javascript:;" onclick="$('#elm1').tinymce().hide();return false;">[Hide]</a>
    <a href="javascript:;" onclick="$('#elm1').tinymce().execCommand('Bold');return false;">[Bold]</a>
    <a href="javascript:;" onclick="alert($('#elm1').html());return false;">[Get contents]</a>
    <a href="javascript:;" onclick="alert($('#elm1').tinymce().selection.getContent());return false;">[Get selected HTML]</a>
    <a href="javascript:;" onclick="alert($('#elm1').tinymce().selection.getContent({format : 'text'}));return false;">[Get selected text]</a>
    <a href="javascript:;" onclick="alert($('#elm1').tinymce().selection.getNode().nodeName);return false;">[Get selected element]</a>
    <a href="javascript:;" onclick="$('#elm1').tinymce().execCommand('mceInsertContent',false,'<b>Hello world!!</b>');return false;">[Insert HTML]</a>
    <a href="javascript:;" onclick="$('#elm1').tinymce().execCommand('mceReplaceContent',false,'<b>{$selection}</b>');return false;">[Replace selection]</a>

    <br />
    <input type="submit" name="save" value="Submit" />
    <input type="reset" name="reset" value="Reset" />
</div>
</form>
<script type="text/javascript">
if (document.location.protocol == 'file:') {
alert("The examples might not work properly on the local file system due to security   settings in your browser. Please use a real webserver.");
}
</script>
</body>
</html> 
```

这是代码`insert.php`：

```
<?php
require_once("connection.php");
$content = $_POST['elm1'];

$insertSQL="INSERT INTO table (content) VALUES ('".$content."')";

if (!mysql_query($insertSQL,$db_server)) echo "Insert failed: $insertSQL <br />".
mysql_error()."<br /><br />";

header("Location:index.php");  
?> 
```

我应该做些什么？需要帮助，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:35:20.770

这是错误的：

```
$insertSQL="INSERT INTO table (content) VALUES ('".$content."')"; 
```

这样做：

```
$insertSQL=mysql_query("INSERT INTO table (content) VALUES ('$content')"); 
```

# excel - VLOOKUP 并插入特定值

> ID：15153456
> 
> 赞同：-2
> 
> 时间：2013-03-01T08:27:33.177
> 
> 标签：excel

我在 excel 2007 中有两张工作表，我想搜索 sheet1 A1 中的值是否存在于 sheet2 数组 B 中，然后在 sheet1 C1 中插入找到该值的特定单元格 A 的值。

前任。如果在 sheet2!B7 中找到 sheet1!A1 的值，则在单元格 sheet1!C1 中插入值 sheet2!A7。

=IF(ISNA(VLOOKUP(Sheet1!A1;Sheet2!B1:B999;1;FALSE));"未找到";<>)

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:49:37.087

对于“左查找”，您需要 INDEX/ MATCH

`=IFERROR(INDEX(Sheet2!A$1:A$999;MATCH(Sheet1!A1;Sheet2!B$1:B$999;0));"Not Found")`

# javascript - 用 Python 开发基于浏览器的应用程序

> ID：15153461
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:28:09.727
> 
> 标签：javascript, python, python-2.7

我使用 Python 制作了一个 sqlite 数据库。我想知道如何使用 Python 或 Javascript 制作基于浏览器的离线应用程序，以连接到该 sqlite-local-database 并执行查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:34:10.017

[Django](https://www.djangoproject.com/)可能是一个易于学习的解决方案，[教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)将足以实现您想要做的事情。

# amazon-web-services - Amazon-RDS 数据库到专用服务器

> ID：15153462
> 
> 赞同：0
> 
> 时间：2013-03-01T08:28:12.317
> 
> 标签：amazon-web-services, dump, amazon-rds, data-transfer, dedicated-server

我在这里完成了这个答案：[AWS RDS 的 Mysqldump](https://stackoverflow.com/questions/12705129/mysqldump-of-the-aws-rds) 但是，显然，它没有给我任何线索。

**我打算做什么？**

我有一个在亚马逊上运行的 RDS 实例，数据库大约有 450 多个表，这对于 mysqldump 来说是一个疯狂的数据量。我希望将其转储，以便将其从 AwS 迁移到 Dedicated。

**问题是什么？**

一旦我开始通过管理员进行转储，它就会冻结。Snapshot 提供了一种可以从一个区域到另一个区域使用的格式，但是，我希望有它在说.. SQL 格式（保持简单），然后将其传输到我的专用服务器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:11:21.383

> 450 多个表，这对于 sqldump 来说是一个疯狂的数据量

假设您的意思是[mysqldump](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html)，那不是一个准确的说法。我经常在具有 10,000 多个表和数亿行的系统上使用 mysqldump。在新服务器上恢复数据可能需要一些时间，但对于以您所谓的“SQL 格式”存储的任何内容都是如此。

mysqldump 中的`--single-transaction`选项将提取所有 InnoDB 表的一致快照；mysqldump的`--compress`选项将使用 mysql 压缩的客户端/服务器协议来减少提取数据所需的时间，而无需更改转储文件的内容；当然`--events` `--triggers`和`--routines`选项很重要。

# c++ - 是否可以在 vb.net 代码中使用 c++ 类？

> ID：15153463
> 
> 赞同：2
> 
> 时间：2013-03-01T08:28:15.223
> 
> 标签：c++, vb.net, class

我有几个用 c++ 编写的第三方代理提供的某些密码算法类，我的应用程序的架构是在 vb.net 中实现的。是否有可能以某种方式导入他的类并将它们像黑盒一样使用到我的 vb.net 应用程序中？

如果不是，我想我需要将我的 vb.net 程序重新编写为 c++，这将是一个网格。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:34:01.707

是的，您可以使用 P\Invoke 从 .NET 语言调用 C++。要在 VB.NET 中使用 P\Invoke，请参阅[如何在 VB.Net 中使用 P\Invoke](https://stackoverflow.com/questions/7945375/how-to-use-p-invoke-in-vb-net)

# real-time - ogre3d 集成（快速但非实时）光线追踪

> ID：15153465
> 
> 赞同：0
> 
> 时间：2013-03-01T08:28:19.777
> 
> 标签：real-time, raytracing, ogre3d

我在实时应用程序（C++）中使用 Ogre3D。应用程序必须在尽可能多的平台上运行：没有强大显卡的平台，甚至是虚拟系统（vbox、vmware）。因此，我们的想法是只使用 Ogre3D（着色器等）实时制作一些效果（阴影、地板反射），但也提供了获得非实时高质量光线追踪图像的可能性。约束是光线跟踪图像的渲染时间不应超过 30 秒。光线追踪不需要完美，但反射（1-2 跟踪深度）、阴影、环境光遮蔽会很好。哪些工具包满足这些条件？有谁知道可以轻松集成的用于光线追踪的 SDK。它可能是 GPU 上的软件渲染或光线追踪。

到目前为止，我已经看过：LuxRender ( [http://www.luxrender.net/en_GB/index](http://www.luxrender.net/en_GB/index) ) 和 RedSDK [http://www.redway3d.com/pages/redsdk.php](http://www.redway3d.com/pages/redsdk.php)。我不确定 LuxRender 是否可以制作相当快的图像（必须不是实时的，也不是几分钟）以及是否可以集成。有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:01:49.607

> 到目前为止，我已经看过：LuxRender ( [http://www.luxrender.net/en_GB/index](http://www.luxrender.net/en_GB/index) ) 和 RedSDK [http://www.redway3d.com/pages/redsdk.php](http://www.redway3d.com/pages/redsdk.php)。我不确定 LuxRender 是否可以制作相当快的图像（必须不是实时的，也不是几分钟）以及是否可以集成。有没有人有这方面的经验？

您可能需要查看 LuxRays ( [http://www.luxrender.net/wiki/LuxRays](http://www.luxrender.net/wiki/LuxRays) )，尤其是 SLG ( [http://www.luxrender.net/wiki/SLG](http://www.luxrender.net/wiki/SLG) )。现在它们都是 LuxRender 的一部分，并且 SLG 已打包在一个库中，因此它也可以在其他应用程序中使用。[您可以在http://www.youtube.com/watch?v=jk-N4f9ze4k](http://www.youtube.com/watch?v=jk-N4f9ze4k)找到 SLG3 的演示视频

SLG 支持仅 CPU（路径跟踪、双向路径跟踪、BiDir+VM 等）和 OpenCL 渲染模式（路径跟踪和 RT/低延迟路径跟踪）。

所有软件都在 GPL 许可下以源代码形式提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T23:57:11.203

OpenRL 会做到这一点，因为它接近 OpenGL，所以应该可以直接集成到 Ogre 中，因为您可以以类似的方式构建数据： -- 请参阅[https://www.caustic.com/docs.php上的文档链接](https://www.caustic.com/docs.php)

它也适用于（但不需要）硬件加速......

# java - 用于写入和读取字符串的接口

> ID：15153466
> 
> 赞同：0
> 
> 时间：2013-03-01T08:28:20.790
> 
> 标签：java

我目前正在使用`java.io.PrintStream`的：

```
public void print(String s) 
```

打印到标准输出。我也使用我自己的类，它有：

```
public void read(String expectedResponse) throws IOException 
```

通过 ssh 连接读取的方法。

我现在希望使用调度，以便我可以添加一个实现读取和写入方法的 Logger 类，以便将发送和读取的内容记录到单个文件中。我可以使用哪些接口类来声明打印和读取方法？

我真的不明白为什么有 Appendable、Closeable、Flushable 的接口，却没有 Printable 接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:31:50.177

虽然我不确定您所说的“声明打印和读取方法”是什么意思，但我建议您查看[slf4j](http://www.slf4j.org)日志记录外观。这是在野外使用的事实上的日志记录解决方案之一，一旦您沿着日志记录路径前进，就值得研究一个有意义的解决方案。玩得开心！

# java - Java for (;;) 循环

> ID：15153470
> 
> 赞同：4
> 
> 时间：2013-03-01T08:28:28.583
> 
> 标签：java, for-loop

我正在查看`AtomicBoolean`类源代码，发现有趣的`for`循环声明如下：

```
for (;;) { 
   //Something
} 
```

这个循环做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T08:29:13.730

这是一个无限循环。你可以这样做：

```
while (true) {
  //Loops forever.
} 
```

看看[文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T08:29:20.943

这是无限循环的简写。它将一直持续到 break 语句导致执行退出循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:29:32.383

> 这个循环做什么？

它无限循环。就像是：

```
while (true) {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T08:29:49.053

这是一个无限循环，如果`break`里面没有语句，它不会停止执行。它与 相同`while(true)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T08:31:55.527

```
for (;;) { 
   //Something
} 
```

这是无限循环。

# python - ugettext_lazy 不适用于 reportlab 的表

> ID：15153476
> 
> 赞同：1
> 
> 时间：2013-03-01T08:28:47.257
> 
> 标签：python, django, reportlab

当我尝试`ugettext_lazy`与reportlab的Table类一起使用时，在没有翻译时不显示默认文本，而是显示输出`django.utils.functional.__proxy__ object at 0xb54921ec`例如，

```
import ugettext_lazy as _

heading = (_('Service'), _('Price'), _('Note'))
table = Table([heading]) 
```

并且输出如上所述。有没有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:53:58.640

代码可能依赖于作为实际字符串的对象而不是惰性对象。尝试使用常规的 ugettext。在这种情况下，字符串将在传递到 reportlab 之前进行翻译

```
from django.utils.translation import ugettext as _

heading = (_('Service'), _('Price'), _('Note'))
table = Table([heading]) 
```

# javascript - 悬停时导航的动画背景颜色问题

> ID：15153479
> 
> 赞同：1
> 
> 时间：2013-03-01T08:28:54.923
> 
> 标签：javascript, jquery

好的，所以我的网站上有一个导航菜单，当我将鼠标悬停在菜单上的某个项目上时，我似乎无法让这段代码工作。我尝试了两个代码：

代码1：

```
$("#nav li").hover(function() {
  $(this).animate({backgroundColor: "#ffffff"}, 'slow');
}); 
```

代码2：

```
$(document).ready(function(){
  $("#nav li").hover(
   function() {
    $(this).stop().animate({backgroundColor: "#ffffff"}, "slow");
   },
   function() {
    $(this).stop().animate({backgroundColor: "#09c"}, "slow");
   });

 }); 
```

这是我的css，以防万一：

```
#nav {
margin-left:380px;
float:left;
width:650px;
margin-top:-47px;
}

#nav ul {
list-style-type:none;
}

#nav ul li {
float:left;
}

#nav ul li a {
text-align:center;
border-right:1px solid #fff;
display:block;
text-decoration:none;
color:#fff;
padding:20px;
}

#nav ul li ul {
display:none;
}

#nav ul li:hover ul {
display:block;
position:absolute;
background:#fff;
}

#nav ul li a:hover {
display:block;
background:#fff;
color:#09c;
} 
```

顺便说一句，我还在网站中包含了 jQuery JavaScript 库 v1.9.1（不确定这是否对您有用）

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:32:48.713

请尝试下面的 CSS 代码来更改导航菜单背景颜色

```
#nav ul li a:hover {
 background-color:#ffffff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:38:42.297

使用 CSS3 过渡来实现这种效果，这样会更方便。 [http://net.tutsplus.com/tutorials/html-css-techniques/css-fundametals-css-3-transitions/](http://net.tutsplus.com/tutorials/html-css-techniques/css-fundametals-css-3-transitions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:30:41.457

您需要包含 jquery 颜色插件来为颜色设置动画。

这里：[http ://code.jquery.com/color/jquery.color-2.1.1.min.js](http://code.jquery.com/color/jquery.color-2.1.1.min.js)

实际上，JQuery 基本库不支持此功能。

请注意，`.css('backgroundColor','#333333')`但不是等效的动画，因此您可以使用 css() 测试您的代码，然后在将插件链接到您的页面之前使用 animation() 尝试它。

# visual-studio - Visual Studio 用空行替换语句

> ID：15153482
> 
> 赞同：1
> 
> 时间：2013-03-01T08:29:06.980
> 
> 标签：visual-studio, visual-studio-2012

例如，我有这样的情况

```
 ....
 statement1
 statement2
 <blank line>
 } 
```

现在我想`statement2`在整个文件中删除（假设它在文件中的 20-30 个位置）。我可以使用 Find&Replace 删除它，但这会导致右括号前有两个空行。在我们的项目中，我们使用 StyleCop，因此他不允许一个接一个地有多个空白行。如何删除所有语句并删除删除后的空白行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:50:25.097

如果您对两步解决方案感到满意，则[此答案](https://stackoverflow.com/questions/12453160/remove-empty-lines-in-text-using-visual-studio/13987363#13987363)中有几个用于删除空行的 RegEx 表达式。

在您的情况下（匹配两个空行）：

```
^(?([^\r\n])\s)*\r?\n(?([^\r\n])\s)*\r?\n 
```

# ios - 创建静态库并链接到我的应用程序

> ID：15153486
> 
> 赞同：1
> 
> 时间：2013-03-01T08:29:23.550
> 
> 标签：ios, objective-c, xcode4.2, port, static-libraries

我需要为现有的 C 代码创建一个静态库并使用该库来创建一个 iphone 应用程序。我正在使用 Xcode 4.2。我按照以下链接中给出的步骤进行操作：

[http://developer.apple.com/library/ios/#technotes/iOSStaticLibraries/Articles/configuration.html#//apple_ref/doc/uid/TP40012554-CH3-SW1](http://developer.apple.com/library/ios/#technotes/iOSStaticLibraries/Articles/configuration.html#//apple_ref/doc/uid/TP40012554-CH3-SW1)

我的查询如下：

1.  在#import "LibraryName/HeaderName.h" 行中，他们说对于 LibraryName 我必须包含库的名称（其 PRODUCT_NAME 构建设置的值）。它到底是什么意思？我在哪里可以获得这个价值？
2.  “其他链接器标志”是什么意思？既然我的库是用 C 语言编写的并且我正在用 Objective C 编写我的应用程序，那么我应该为此提供什么价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:36:51.347

1.  LibraryName 是您在创建库时为其指定的名称。它应该与项目名称和目标名称相同（除非您弄乱了设置）。您可以在 Packaging -> Product Name 下的库的 Build Settings 中验证它

2.  当您在纯 C 中工作时，您可以忽略这一点，保持原样。

# excel - 在我的进度条的 excel vba 用户窗体上隐藏关闭 [X] 按钮

> ID：15153491
> 
> 赞同：13
> 
> 时间：2013-03-01T08:29:38.343
> 
> 标签：excel, userform, vba

我创建了一个用户窗体以在宏仍在导入工作表时显示进度条 ![在此处输入图像描述](../Images/1ea91dea3812557f7fe243bcc635b0ac.png)

问题是用户可以按下红色的**[X]**按钮，该按钮将关闭并中断已完成的处理。

有没有办法隐藏这个*厄运的红色按钮，*以便潜在用户在它运行时没有任何令人困惑的按钮可以点击。

编辑：

我试过这个

```
'Find the userform's Window
Private Declare Function FindWindow Lib "user32" _
        Alias "FindWindowA" ( _
        ByVal lpClassName As String, _
        ByVal lpWindowName As String) As Long

'Get the current window style
Private Declare Function GetWindowLong Lib "user32" _
        Alias "GetWindowLongA" ( _
        ByVal hWnd As Long, _
        ByVal nIndex As Long) As Long

'Set the new window style
Private Declare Function SetWindowLong Lib "user32" _
        Alias "SetWindowLongA" ( _
        ByVal hWnd As Long, _
        ByVal nIndex As Long, _
        ByVal dwNewLong As Long) As Long

Const GWL_STYLE = -16
Const WS_SYSMENU = &H80000 
```

我在 userform_initialize 上使用了这个

```
 Dim hWnd As Long, lStyle As Long

   'Which type of userform
   If Val(Application.Version) >= 9 Then
      hWnd = FindWindow("ThunderDFrame", Me.Caption)
   Else
      hWnd = FindWindow("ThunderXFrame", Me.Caption)
   End If

   'Get the current window style and turn off the Close button
   lStyle = GetWindowLong(hWnd, GWL_STYLE)
   SetWindowLong hWnd, GWL_STYLE, (lStyle And Not WS_SYSMENU) 
```

我收到此错误消息 ![在此处输入图像描述](../Images/d615273b1987deeccb9522db0cb03aff.png)

此代码取自[此处](http://p2p.wrox.com/excel-vba/7312-get-rid-close-button-form.html#post106883)。我不知道我做错了什么，我已经删除了评论。这是我发现的最简单的代码，所以我想将它集成到我的用户表单中。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T08:38:06.393

下面是一个可以这样调用的例程：

```
subRemoveCloseButton MyForm 
```

或从您的表格中：

```
subRemoveCloseButton Me 
```

这是您需要的代码：

```
Private Const mcGWL_STYLE = (-16)
Private Const mcWS_SYSMENU = &H80000

'Windows API calls to handle windows
#If VBA7 Then
    Private Declare PtrSafe Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long
#Else
    Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long
#End If

#If VBA7 Then
    Private Declare PtrSafe Function GetWindowLong Lib "user32" Alias "GetWindowLongA" (ByVal hwnd As Long, ByVal nIndex As Long) As Long
#Else
    Private Declare Function GetWindowLong Lib "user32" Alias "GetWindowLongA" (ByVal hwnd As Long, ByVal nIndex As Long) As Long
#End If

#If VBA7 Then
    Private Declare PtrSafe Function SetWindowLong Lib "user32" Alias "SetWindowLongA" (ByVal hwnd As Long, ByVal nIndex As Long, ByVal dwNewLong As Long) As Long
#Else
    Private Declare Function SetWindowLong Lib "user32" Alias "SetWindowLongA" (ByVal hwnd As Long, ByVal nIndex As Long, ByVal dwNewLong As Long) As Long
#End If

Public Sub subRemoveCloseButton(frm As Object)
    Dim lngStyle As Long
    Dim lngHWnd As Long

    lngHWnd = FindWindow(vbNullString, frm.Caption)
    lngStyle = GetWindowLong(lngHWnd, mcGWL_STYLE)

    If lngStyle And mcWS_SYSMENU > 0 Then
        SetWindowLong lngHWnd, mcGWL_STYLE, (lngStyle And Not mcWS_SYSMENU)
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-01T08:35:29.773

您可以从以下代码段中解决：

选择`cmdClose`按钮 在菜单栏上，选择`View | Code` 光标闪烁的位置，输入以下代码：

```
Private Sub cmdClose_Click()
  Unload Me
End Sub 
```

在菜单栏上，选择`View | Object`, 返回用户窗体。

**要允许用户按 Esc 键关闭表单：**

选择 cmdClose 按钮​​ 在“属性”窗口中，将`Cancel`属性更改为`True`

**防止用户通过单击 X 按钮关闭表单**

`UserForm`打开后，右上角有一个`X`。除了使用关闭表单按钮之外，人们还可以使用 X 关闭表单。如果您想阻止这种情况，请按照以下步骤操作。

右键单击 UserForm 的空白部分`View | Code` 从右上方的 Procedure 下拉列表中选择 QueryClose

在光标闪烁的地方，粘贴以下示例中突出显示的代码

```
Private Sub UserForm_QueryClose(Cancel As Integer, _
  CloseMode As Integer)
  If CloseMode = vbFormControlMenu Then
    Cancel = True
    MsgBox "Please use the Close Form button!"
  End If
End Sub 
```

在菜单栏上，选择`View | Object`, 返回用户窗体。现在，如果有人单击`X`用户窗体中的 ，他们将看到您的消息。

来自[http://www.contextures.com/xlUserForm01.html](http://www.contextures.com/xlUserForm01.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-27T13:43:01.450

## 这是对@Peter Albert 上述答案的改进

*   Windows API 调用现在是 Office x64 安全的
*   `FindWindow`调用已改进为仅查找 Excel 用户窗体。原始答案中的函数搜索每个窗口类（例如资源管理器窗口和其他程序的窗口）。因此，当其他程序或资源管理器窗口的名称与用户窗体同名时，可能会删除 [x] 按钮。

* * *

```
Private Const mcGWL_STYLE = (-16)
Private Const mcWS_SYSMENU = &H80000

'Windows API calls to handle windows
Private Declare PtrSafe Function FindWindow Lib "user32" Alias "FindWindowA" ( _
    ByVal lpClassName As String, ByVal lpWindowName As String) As LongPtr

#If Win64 Then
    Private Declare PtrSafe Function GetWindowLongPtr Lib "user32" Alias "GetWindowLongPtrA" ( _
        ByVal hwnd As LongPtr, ByVal nIndex As Long) As LongPtr
    Private Declare PtrSafe Function SetWindowLongPtr Lib "user32" Alias "SetWindowLongPtrA" ( _
        ByVal hwnd As LongPtr, ByVal nIndex As Long, ByVal dwNewLong As LongPtr) As LongPtr
#Else
    Private Declare PtrSafe Function GetWindowLongPtr Lib "user32" Alias "GetWindowLongA" ( _
        ByVal hwnd As LongPtr, ByVal nIndex As Long) As LongPtr
    Private Declare PtrSafe Function SetWindowLongPtr Lib "user32" Alias "SetWindowLongA" ( _
        ByVal hwnd As LongPtr, ByVal nIndex As Long, ByVal dwNewLong As LongPtr) As LongPtr
#End If

Public Sub RemoveCloseButton(objForm As Object)
    Dim lngStyle As LongPtr
    Dim lngHWnd As LongPtr

    Dim lpClassName As String
    lpClassName = vbNullString
    If Val(Application.Version) >= 9 Then
       lpClassName = "ThunderDFrame"
    Else
       lpClassName = "ThunderXFrame"
    End If

    lngHWnd = FindWindow(lpClassName, objForm.Caption)
    lngStyle = GetWindowLongPtr(lngHWnd, mcGWL_STYLE)

    If lngStyle And mcWS_SYSMENU > 0 Then
        SetWindowLongPtr lngHWnd, mcGWL_STYLE, (lngStyle And Not mcWS_SYSMENU)
    End If
End Sub 
```

> **ThunderDFrame？**
> Excel中的UserForms其实属于Windows类`ThunderDFrame`，是2002年以后微软Office应用程序中所有UserFroms的类。在此之前是`ThunderXFrame`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-10T21:22:05.553

询问用户是否要关闭表单 - 并丢失编辑（例如）。基于贾斯汀和彼得的想法。

```
Private Sub UserForm_QueryClose(Cancel As Integer, _
                            CloseMode As Integer)
Dim ans
If CloseMode = vbFormControlMenu Then
    Cancel = True
    ans = Msgbox("Cancel edit?", vbQuestion + vbYesNo)
    If ans = vbYes Then
       Me.Hide
    End if
End If
End Sub 
```

编辑：实际上我意识到这有点离题，因为 OP 想要删除 X 选项 - 但我仍然觉得这对于交互式表单很方便。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-16T06:18:38.533

我知道这是一个老问题，但是对于 OP 引用的用户表单类型，您不必删除、隐藏或禁用关闭按钮。有一个更简单的方法；）

对于没有用户交互的任何元素（按钮等）并且在完成其目的后会自行关闭的任何用户表单，只需禁用表单就可以了。

**禁用用户表单：在用户表单的属性中，针对 Enabled 设置 False。用户表单将显示，直到它的代码告诉它隐藏。用户将无法对表单执行任何操作（无法关闭、无法移动等）。**

另请注意，您是否希望用户能够在用户窗体仍在显示时在主窗口中执行任何其他操作，这决定了您是否设置 ShowModal。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-18T20:14:55.527

禁用按钮的一种有用方法是执行以下操作：

```
Private Sub UserForm_QueryClose(Cancel As Integer, CloseMode As Integer)
    If CloseMode = 0 Then Cancel = True
End Sub 
```

虽然这并没有*摆脱*按钮，但它确实使单击它一事无成。

# css - 表格上的图像链接上的文本

> ID：15153493
> 
> 赞同：0
> 
> 时间：2013-03-01T08:29:44.543
> 
> 标签：css, image, hyperlink

好的，所以我正在努力在我的页面上设置 Aweber 表单的一部分。该表单有一个按钮，用户单击该按钮可加入邮件列表。我想在上面放一些文本（以便稍后我可以 A:B 拆分测试文本）。我设置了第二个 div 并绝对定位文本来做到这一点，它完美地工作。

问题是当用户将鼠标悬停在按钮上时。文本在图像上方的任何地方，都会否定链接。请帮忙。

您可以在 www.pregnantatlast.com 在线查看该页面

这是代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- InstanceBeginEditable name="doctitle" -->
<title>Pregnant At Last - Conditions that Stop Pregnancy, Solutions</title>
<!-- InstanceEndEditable -->
<style type="text/css">
</style>
<link href="style.css" rel="stylesheet" type="text/css" />
<!-- InstanceBeginEditable name="head" -->
<!-- InstanceEndEditable -->
</head>
<body>
    <div id="header">
      <div id="header_txt">
                    Pregnant At Last
        <h1>Increase Fertility - Get Pregnant - Naturally</h1>
        </div>
        <div id="menu">
          <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="causes.html">Causes</a></li>
                <li><a href="miscarriage.html">Miscarriage</a></li>
                <li><a href="nutrition.html">Nutrition</a></li>
                <li><a href="conditions.html">Conditions</a></li>
            </ul> 
        </div><!--End menu-->
    </div><!--End header-->
    <!-- InstanceBeginEditable name="Content" -->
    <div id="content_bg">
      <div id="content">
        <h1>Common fixable conditions often lead to infertility.</h1>
        <div class="picture"> <img src="Assets/Images/44037990.jpg" width="301" alt="Couple with Doctor" />
        </div>
        <div id="caption">
          <p>2/3 of all infertility cases are linked to the woman. &nbsp; Many can be helped.</p>
        </div>
        <div id="list">
          <ul>
            <li>Environmental factors are known to block conception</li>
            <li>Some medical treatments alter sperm production and cause ovarian problems</li>
            <li>Simple lifestyle changes can fix many conditions</li>
            <li>How to breathe so your body heals itself</li>
            <li>Herbs that help your body clense</li>
          </ul>
          <p> Learn what to <span>do</span> and more importantly, what <span> not to do</span>. </p>
          <p> Heal your <span>body</span> and become <span>fertile</span> in no time! </p>
        </div>
        <!--End list-->
        <div id="formbox">
          <h2>Learn Secrets to Get Pregnant<br />Naturally in Months</h2>
          <div id="formtxt">
            <h3>Sign up for a FREE 7 day course and recieve:</h3>
            <p>-10 Household Chemicals you Must Avoid</p>
            <p>-Simple technique to double chances of conception</p>
            <p>-Ways to help your parner increase his sperm count</p>
          </div>
          <!--End formtxt-->
          <div id="form">
            <!-- AWeber Web Form Generator 3.0 -->
            <style type="text/css">
                    #af-form-69035635 .af-body .af-textWrap{width:98%;display:block;float:none;}
                    #af-form-69035635 .af-body input.text, #af-form-69035635 .af-body textarea{background-color:#FFFFFF;border-color:#919191;border-width:1px;border-style:solid;color:#000000;text-decoration:none;font-style:normal;font-weight:normal;font-size:12px;font-family:Verdana, sans-serif;}
                    #af-form-69035635 .af-body input.text:focus, #af-form-69035635 .af-body textarea:focus{background-color:#FFFAD6;border-color:#030303;border-width:1px;border-style:solid;}
                    #af-form-69035635 .af-body label.previewLabel{display:block;float:none;text-align:left;width:auto;color:#000000;text-decoration:none;font-style:normal;font-weight:normal;font-size:12px;font-family:Verdana, sans-serif;}
                    #af-form-69035635 .af-body{padding-bottom:0px;padding-top:5px;background-repeat:no-repeat;background-position:inherit;background-image:none;color:#000000;font-size:11px;font-family:Verdana, sans-serif;}
                    #af-form-69035635 .af-quirksMode{padding-right:10px;padding-left:10px;}
                    #af-form-69035635 .af-standards .af-element{padding-right:10px;padding-left:10px;}

                    #af-form-69035635 .buttonContainer input.submit{background-color:#c20606;background-image:url("http://www.pregnantatlast.com/Assets/Images/button_arrow3.jpg");color:#FFFFFF;text-decoration:none;font-style:normal;font-weight:normal;font-size:14px;font-family:Verdana, sans-serif;}

                    #af-form-69035635 .buttonContainer input.submit{width:auto;}
                    #af-form-69035635 .buttonContainer{text-align:center;}
                    #af-form-69035635 button,#af-form-69035635 input,#af-form-69035635 submit,#af-form-69035635 textarea,#af-form-69035635 select,#af-form-69035635 label,#af-form-69035635 optgroup,#af-form-69035635 option{float:none;position:static;margin:0;}
                    #af-form-69035635 div{margin:0;}
                    #af-form-69035635 form,#af-form-69035635 textarea,.af-form-wrapper,.af-form-close-
                    #af-form-69035635 img{float:none;color:inherit;position:static;background-color:none;border:none;margin:0;padding:0;}
                    #af-form-69035635 input,#af-form-69035635 button,#af-form-69035635 textarea,#af-form-69035635 select{font-size:100%;}
                    #af-form-69035635 select,#af-form-69035635 label,#af-form-69035635 optgroup,#af-form-69035635 option{padding:0;}
                    #af-form-69035635,#af-form-69035635 .quirksMode{width:329px;}
                    #af-form-69035635.af-quirksMode{overflow-x:hidden;}
                    #af-form-69035635{background-color:#FFFFFF;border-color:transparent;border-width:1px;border-style:solid;}
                    #af-form-69035635{display:block;}
                    #af-form-69035635{overflow:hidden;}
                    .af-body .af-textWrap{text-align:left;}
                    .af-body input.image{border:none!important;}
                    .af-body input.submit,.af-body input.image,.af-form .af-element input.button{float:none!important;}
                    .af-body input.text{width:100%;float:none;padding:2px!important;}
                    .af-body.af-standards input.submit{padding:4px 12px;}
                    .af-clear{clear:both;}
                    .af-element label{text-align:left;display:block;float:left;}
                    .af-element{padding:5px 0;}
                    .af-form-wrapper{text-indent:0;}
                    .af-form{text-align:left;margin:auto;}
                    .af-quirksMode .af-element{padding-left:0!important;padding-right:0!important;}
                    .lbl-right .af-element label{text-align:right;}
                    body {
                    }
                    </style>
            <form method="post" class="af-form-wrapper" action="http://www.aweber.com/scripts/addlead.pl"  >
              <div style="display: none;">
                <input type="hidden" name="meta_web_form_id" value="69035635" />
                <input type="hidden" name="meta_split_id" value="" />
                <input type="hidden" name="listname" value="4pregnantatlast" />
                <input type="hidden" name="redirect" value="http://pregnantatlast.com/welcome.hmtl" id="redirect_6f08e83ce4f3bc074b25117c5105d14d" />
                <input type="hidden" name="meta_redirect_onlist" value="http://pregnantatlast.com/welcome.hmtl" />
                <input type="hidden" name="meta_adtracking" value="Pregnant_At_Last_Form" />
                <input type="hidden" name="meta_message" value="1" />
                <input type="hidden" name="meta_required" value="name,email" />
                <input type="hidden" name="meta_tooltip" value="" />
              </div>
              <div id="af-form-69035635" class="af-form">
                <div id="af-body-69035635"  class="af-body af-standards">
                  <div class="af-element">
                    <label class="previewLabel" for="awf_field-42946097">Name: </label>
                    <div class="af-textWrap">
                      <input id="awf_field-42946097" type="text" name="name" class="text" value=""  tabindex="500" />
                    </div>
                    <div class="af-clear"></div>
                  </div>
                  <div class="af-element">
                    <label class="previewLabel" for="awf_field-42946098">Email: </label>
                    <div class="af-textWrap">
                      <input class="text" id="awf_field-42946098" type="text" name="email" value="" tabindex="501"  />
                    </div>
                    <div class="af-clear"></div>
                  </div>
                  <div class="af-element buttonContainer">
                    <input name="submit" id="af-submit-image-69035635" type="image" class="image" style="background: none;" alt="Submit Form" src="http://www.pregnantatlast.com/Assets/Images/button_arrow3.jpg" tabindex="502" />
                    <div class="af-clear"></div>
                  </div>
                </div>
              </div>
              <div style="display: none;"><img src="http://forms.aweber.com/form/displays.htm?id=bJwMzKxszKw=" alt="" /></div>
            </form>
            <script type="text/javascript">
                        <!--
                        (function() {
                            var IE = /*@cc_on!@*/false;
                            if (!IE) { return; }
                            if (document.compatMode && document.compatMode == 'BackCompat') {
                                if (document.getElementById("af-form-69035635")) {
                                    document.getElementById("af-form-69035635").className = 'af-form af-quirksMode';
                                }
                                if (document.getElementById("af-body-69035635")) {
                                    document.getElementById("af-body-69035635").className = "af-body inline af-quirksMode";
                                }
                                if (document.getElementById("af-header-69035635")) {
                                    document.getElementById("af-header-69035635").className = "af-header af-quirksMode";
                                }
                                if (document.getElementById("af-footer-69035635")) {
                                    document.getElementById("af-footer-69035635").className = "af-footer af-quirksMode";
                                }
                            }
                        })();
                        -->
                    </script>
            <!-- /AWeber Web Form Generator 3.0 -->
          </div>
          <!--End form-->
        <div id="button_ttl"> Successful Pregnancy<br />
            Starts Here </div>
          <!--End button_ttl-->
        </div>
        <!--End formbox-->
        <div id="arrow"> <img src="Assets/Images/red-arrow.png" width="252" height="415" alt="Arrow" /> </div>
        <!--End arrow-->
        <!--End content-->
      </div>
        <!--End content-->
      </div>
      <!--End content-->
    </div><!--End content_bg-->
    <!-- InstanceEndEditable -->
        <div id="footer">
        <div id="ft_menu">
        <ul>
                <li><a href="service.html">Terms of Service</a></li>
<li><a href="disclaimer.html">Disclaimer</a></li>
                <li><a href="sitemap.html">Site Map</a></li>
                <li><a href="privacy.html">Privacy Policy</a></li>
                <li><a href="contact.html">Contact Us</a></li>

          </ul>
        </div><!--End ft_menu-->
        <div id="foot_txt">
            Pregnant At Last<br />
            4043 Mahinahina Pl.<br />
            Lahaina, HI 96761<br />
        </div>
        </div>
</body>
<!-- InstanceEnd --></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:39:48.553

我不是专家。但我知道我在图像上有类似的文字。我通过更改 z-indexes 修复了它

尝试使用正 z-indexes

希望这可以帮助。

这是另一个关于 z-index 和图像链接的堆栈： [Link using z-index can't be clicked even if it's on top, in both Firefox & IE](https://stackoverflow.com/questions/7245896/link-using-z-index-cant-be-clicked-even-though-its-on-top-in-both-firefox-i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:55:19.123

您只是错过了重定向页面。

改变：

```
<input type="hidden" name="redirect" value="http://pregnantatlast.com/welcome.hmtl" id="redirect_6f08e83ce4f3bc074b25117c5105d14d" /> 
```

至：

```
<input type="hidden" name="redirect" value="http://pregnantatlast.com/welcome.html" id="redirect_6f08e83ce4f3bc074b25117c5105d14d" /> 
```

# python - Python 中的 C 扩展：将 wchar 字符串转换为 Python 值

> ID：15153497
> 
> 赞同：3
> 
> 时间：2013-03-01T08:29:53.813
> 
> 标签：python, python-c-extension

在 Python 的 C 扩展中，我可以使用`Py_BuildValue()`将 char 字符串转换为 Python 值，如下所示`Py_BuildValue("s", str)`：但是，如果字符串是 wchar 数组，则`Py_BuildValue("s", str)`不能使用。

我想我可以像这样使用 PyUnicode：

```
PyObject* pb=PyUnicode_FromUnicode( (const Py_UNICODE*)(str), wcslen(str) );
PyObject *val = Py_BuildValue("o", pb); 
```

但是，它不起作用。如何将 wchar 字符串转换为 Python 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:53:54.113

我认为你不需要结合`PyUnicode_FromUnicode`and `Py_BuildValue`。

以下`pb`已经是一个 Python unicode 对象。

```
PyObject* pb=PyUnicode_FromUnicode( (const Py_UNICODE*)(str), wcslen(str) ); 
```

用来`Py_BuildValue`处理它是多余的，但它是无害的。我认为您的问题是由不正确的格式引起的`o`。应该是`O`。

您还可以使用`Py_BuildValue`将 Unicode（UCS-2 或 UCS-4）数据的空终止缓冲区转换为 Python Unicode 对象。
例如：

```
const wchar_t *w = L"Hello world!";
PyObject* pb = Py_BuildValue("u", w); 
```

更多的

# jquery - Jquery 表排序器没有正确排序

> ID：15153501
> 
> 赞同：0
> 
> 时间：2013-03-01T08:30:23.460
> 
> 标签：jquery, html

所以我有一个表设置，我试图对包含整数的列进行排序，但是它没有正确排序。更改学习组列上的数字然后单击标题对其进行排序，您会看到它没有正确按升序或降序排序..

[http://jsfiddle.net/2mLr4/1/](http://jsfiddle.net/2mLr4/1/)

## HTML

```
<table id="mytable" class="tablesorter">
<thead>
    <tr> 
    <th>Status</th> 
    <th>Participant Name</th> 
    <th>Reminder Alerts</th>
    <th>E-mail</th> 
    <th>Learning Group</th>
    </tr> 
</thead>
     <tbody>
         <tr>
         <td class="check">i</td>
         <td>Joe Smith <span>Has not started filling out his forms.</span> </td>
         <td> Empty </td>
         <td><button class="clean-gray logout" name="">Remind Now</button> </td>

        <td>
        <div class="learning_selecter">
        <span>3</span>
        <select class="learning_group_num">
        <option value="lg_1">1</option>
        <option value="lg_2">2</option>
        <option value="lg_3">3</option>
        <option value="lg_4">4</option>
        <option value="lg_5">5</option>
        </select>
        </div>  
        </td>
        </tr>

         <tr>
         <td class="check">i</td>
         <td>Joe Smith <span>Has not started filling out his forms.</span> </td>
         <td> Empty </td>
         <td><button class="clean-gray logout" name="">Remind Now</button> </td>

        <td>
        <div class="learning_selecter">
        <span>4</span>
        <select class="learning_group_num">
        <option value="lg_1">1</option>
        <option value="lg_2">2</option>
        <option value="lg_3">3</option>
        <option value="lg_4">4</option>
        <option value="lg_5">5</option>
        </select>
        </div>  
        </td>
        </tr>

        <tr>
         <td class="check">i</td>
         <td>Joe Smith <span>Has not started filling out his forms.</span> </td>
         <td> Empty </td>
         <td><button class="clean-gray logout" name="">Remind Now</button> </td>

        <td>
        <div class="learning_selecter">
        <span>5</span>
        <select class="learning_group_num">
        <option value="lg_1">1</option>
        <option value="lg_2">2</option>
        <option value="lg_3">3</option>
        <option value="lg_4">4</option>
        <option value="lg_5">5</option>
        </select>
        </div>  
        </td>
        </tr>

         <tr>
         <td class="check">i</td>
         <td>Joe Smith <span>Has not started filling out his forms.</span> </td>
         <td> Empty </td>
         <td><button class="clean-gray logout" name="">Remind Now</button> </td>

        <td>
        <div class="learning_selecter">
        <span>2</span>
        <select class="learning_group_num">
        <option value="lg_1">1</option>
        <option value="lg_2">2</option>
        <option value="lg_3">3</option>
        <option value="lg_4">4</option>
        <option value="lg_5">5</option>
        </select>
        </div>  
        </td>
        </tr>

            </tbody>
            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:55:31.467

原因是因为（我想是为了速度）tablesorter 有效地缓存了表中的值。当您更新它们时，tablesorter 不知道更改并继续根据旧值对它们进行排序。

我有一个快速的谷歌，发现你可以用它来让 tablesorter 知道你已经更新了一些东西：

```
$("#mytable")
        .trigger('update')
        .trigger('sorton', [sorting]); 
```

[这是一个jsfiddle](http://jsfiddle.net/2mLr4/5/)

# jquery - 如何在 ASP.NET 中使用 jQuery 将图像保存到项目文件夹中？

> ID：15153513
> 
> 赞同：0
> 
> 时间：2013-03-01T08:31:00.313
> 
> 标签：jquery, asp.net, asp.net-mvc, file-upload

我是 ASP.NET 的新手，如果有人能提供帮助，我将不胜感激。我在视图中有我的文件输入：

```
 <input type="file" name="Image" id ="filename" />
 <input type="submit" value="Submit" id ="sub" /> 
```

然后在脚本中我将它的值发送到我在控制器中的操作

```
$(function () {
    $.post("Home/NewProject", {Image: $("#filename").val() }, function (data) {});
}); 
```

在控制器的操作中，我得到文件名，并将其重命名为将存储在我的项目文件夹中的文件名`~/App_Data/uploads`

```
[HttpPost]
public ActionResult NewProject(Project model)
{
    if (ModelState.IsValid)
    {
         bool ok = false;
         ViewBag.Message = "Publish your project." ;
         //var photo = WebImage.GetImageFromRequest();
         var fileName = model.Image;

         // store the file inside ~/App_Data/uploads folder
         var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
         model.Image = path;
    }
} 
```

但是我怎样才能将这个文件保存到文件夹中呢？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:39:05.163

您不能使用 jQuery ajax 上传文件。如果客户端浏览器支持 HTML5 文件 API，您可以使用 XHR2 对象来实现，如[`this article`](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications). [`Fine Uploader`](http://fineuploader.com/)如果没有，您可以使用一些文件上传插件，例如[Uploadify](http://www.uploadify.com/)或[`jquery.form plugin`](http://malsup.com/jquery/form/).

这是 jQuery 表单插件的示例：

```
@using (Html.BeginForm("someaction", "somecontroller", FormMethod.Post, new { id = "myForm", enctype = "multipart/form-data" }))
{
    <input type="file" name="Image" id ="filename" />
    <input type="submit" value="Submit" id ="sub" />    
} 
```

进而：

```
$(function() {
    $('#myForm').ajaxForm(function() {
        alert('thanks for submitting');
    });
}); 
```

# javascript - 使用 jQuery 遍历表的元素

> ID：15153514
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:31:01.067
> 
> 标签：javascript, jquery, iteration

我正在尝试`td`从特定行中获取所有 s 。

这是代码：

```
$(window).scroll(function () {
  var widthArray = new Array();
  var i=0;
  $('#firstRow > td').each(function () {
    var tdclass = $('td').attr('class');
    console.log(tdclass);
    widthArray.push(tdclass);
    i=i+1;
  });
}); 
```

但它在第一次停止`td`而不是迭代。

**更新：**该`i`变量用于不同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:32:56.773

```
$('#firstRow > td') 
```

这是对的。上面的代码片段选择了元素`td`内部的所有 s `#firstRow`。

问题出在循环中。

```
var tdclass = $('td').attr('class'); 
```

在这里，您忽略了`td`您要循环的 selected ，并选择`td`页面中存在的所有 s ；这就是`$('td')`函数的作用。

当你使用 jQuery 时，循环回调接收元素既作为参数，也作为上下文（`this`）；[$.fn.each](https://api.jquery.com/each/)供参考。

所以要解决你的问题：

```
$('#firstRow > td').each(function (index, element) {
    var tdclass = $(element).attr('class');
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:34:14.200

每次迭代你都会得到`<td>`集合中第一个元素的类`$('td')`。您可以将结构更改为更优雅：

```
$(window).scroll(function() {
    var widthArray = $("#firstRow > td").map(function() {
            return this.className;
        }).get(),
        i = widthArray.length;

    // ...
}); 
```

# c# - 对象引用中的错误未设置为对象的实例

> ID：15153517
> 
> 赞同：-2
> 
> 时间：2013-03-01T08:31:26.213
> 
> 标签：c#

“/”应用程序中的服务器错误。

> 你调用的对象是空的。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

```
Source Error: 

Line 29:         <th></th>
Line 30:     </tr>
Line 31:     @foreach (var sections in Model.Sections)
Line 32:     {
Line 33:         <tr> 
```

我的模型

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace TechFactorsLMSV2.Models
{

public class School
{
    public int ID { get; set; }
    public string SchoolName { get; set; }
    public ICollection<Section> Sections { get; set; }
}
public class Section
{
    public int ID { get; set; }
    public string SectionName { get; set; }
    public ICollection<Student> Students { get; set; }
}

public class Student
{
    public int ID { get; set; }
    public string LastName { get; set; }
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string Address { get; set; }
    public DateTime DateEnrolled { get; set; }

}

public class LMSDBContext : DbContext
{
    public DbSet<School> Schools { get; set; }
    public DbSet<Section> Sections { get; set; }
    public DbSet<Student> Students { get; set; }
}
} 
```

我的控制器

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using TechFactorsLMSV2.Models;

namespace TechFactorsLMSV2.Controllers
{
public class SchoolsController : Controller
{
    private LMSDBContext db = new LMSDBContext();

    //
    // GET: /Schools/

    public ActionResult Index()
    {
        return View(db.Schools.ToList());
    }
public ActionResult Detail(int id)
    {
        var model = db.Schools.Single(d => d.ID == id);
        return View(model);
    }
 } 
} 
```

我的观点

```
 TechFactorsLMSV2.Models.School

@{
ViewBag.Title = "Detail";
}

<h2>@Model.SchoolName</h2>

@Html.ActionLink("Add Section", "Create", "Section", new { SchoolId = @Model.ID }, null      

}

<table>
  <tr>
    <th>Sections</th>
    <th></th>
  </tr>
  @foreach (var sections in Model.Sections)
{
    <tr>
        <td>@sections.SectionName</td>
        <td>

        </td>

    </tr>
 }

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:53:30.290

我建议阅读有关延迟/急切加载的内容。您的部分根本不会加载到模型中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:04:28.420

例如，如果您向学校班级添加一个构造函数来更新列表，它将摆脱异常；

```
public class School
{
    public int ID { get; set; }
    public string SchoolName { get; set; }
    public ICollection<Section> Sections { get; set; }

    public School()
    {
        Sections = new List<Section>();
    }
} 
```

但正如@Peter 所说，您需要考虑如何填充这些内容，并经历所有不适合 SO 的内容。

# mongodb - 如何通过 osinka.subset 实现 MongoDB DBObject 级联点表示法

> ID：15153518
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:31:30.380
> 
> 标签：mongodb, scala, syntax, subset

作为一个子集用户，我想生成一个包含两个点的查询，但我不能即时完成。让我增强您的 BlogPost 示例[http://osinka.github.com/subset/Subset+Query.html](http://osinka.github.com/subset/Subset+Query.html)来演示我想要实现的目标，即使这样没有意义：

```
case class SubComment(subText: String)
case class Comment(by: String, votes: Int, text: SubComment)
case class BlogPost(title: String, comments: List[Comment])
object SubComment {
    val text = "text".fieldOf[String]
    implicit val writer = {
      def f(sub: SubComment): DBObject = (text -> sub.subText)
      ValueWriter(f _)
    }
  }
  object Comment {
    val by = "by".fieldOf[String]
    val votes = "votes".fieldOf[Int]
    val text = "text".fieldOf[SubComment]
  }
  object BlogPost {
    val title = "title".fieldOf[String]
    val comments = "comments".subset(Comment).of[List[Comment]]
  }
  val qComment = BlogPost.comments.where { _.by === "maria" }
  val qSubComment = BlogPost.comments.where {…? === "X"} // not yet working 
```

我怎样才能产生一个 DBObject `{ "comments.text.subText" : "X"}`？

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:20:41.603

我是**Subset**的作者，所以让我绕道而行并解释一下细节。

**子集**(1.x) 提供`Field[T]`向/从 MongoDB 文档 (BSON) 读取和/或写入字段。当您读取或写入该字段的内容时，它唯一必须知道的是`T`. 换句话说，如果您正在使用 BSON 文档，您可以将所有字段声明为`"fieldName".fieldOf[T]`任何复杂`T`的字段（例如列表或子文档）

一旦您需要创建查询，事情就会变得更加复杂。由于 MongoDB 支持“点表示法”，因此**Subset**需要知道父文档和后代字段之间的关系。当您将字段声明为`"fieldName".subset(Obj).of[T]`. 这里，`T`其实一点关系`Obj`都没有。**Subset**`T`使用它来序列化/反序列化字段内容，而只是一个带有字段的容器，当您调用时，**Subset**会将其返回给您，例如**`Obj`**`where`****

 ****让我通过例子来证明它。您需要在代码中更改的唯一内容如下：

```
object Comment {
  ...
  val text = "text".subset(SubComment).of[SubComment]
} 
```

然后你会写

```
scala> val q = BlogPost.comments.where { comment =>
     | comment.text.where { _.text === "X" }
     | }
q: com.osinka.subset.package.Query = Query{ "comments.text.text" : "X"} 
```

这里，`comment` **是** `Comment`对象。

* * *

当您知道这一点时，您可以自由地“作弊”并执行以下操作：

```
val comments = "comments".subset(()).of[List[Comment]]
val commentText = "text".subset(()).of[SubComment]
val subcommentInnerField = "inner".fieldOf[String]

scala> comments.where { _ =>
     |   commentText.where { _ =>
     |     subcommentInnerField === "X"
     |   }
     | }
res1: com.osinka.subset.package.Query = Query{ "comments.text.inner" : "X"} 
```

在这里，我正在给`Unit`方法`.subset()`，因此我们`Unit`又回到了`where`. 但这没关系，因为我们知道在`where`调用中使用哪些字段。这种“作弊”不像将字段保留在对象中那样“安全”，但很好地展示了事物的连接方式。****

# javascript - 如何在javascript中使用类外部的私有函数？

> ID：15153520
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:31:44.920
> 
> 标签：javascript, singleton

我尝试将我的旧函数转换为单例类结构和模式。以前我有一些函数可以创建 XHR 调用并使用返回的 html 数据构建一些元素。

我想知道如何以 sigleton 模式使用它，这是我的代码结构开始

```
var evraklarPanel = {}
evraklarPanel.isTipleri = {
    yeniEvraktipi: function () {
        $.post("evraklarPanel_action.asp", {istipi: 'yeniEvrakTipiGrupAdi'}, function (data) {
            if () {} else {}
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:54:37.553

由于您实际上只在那里定义了一个函数（除了 ajax 回调），我猜您想知道如何调用`yeniEvraktipi`. 你这样做：

```
evraklarPanel.isTipleri.yeniEvraktipi(); 
```

# php - Zend\Di\Di 定义和内存

> ID：15153525
> 
> 赞同：2
> 
> 时间：2013-03-01T08:31:50.587
> 
> 标签：php, dependency-injection, zend-framework2, memo

在我的 ZF2 应用程序中，我使用它`Zend\Di\Di`来创建我的所有类实例。`Zend\Di\Definition\CompilerDefinition`使用 APC扫描和缓存 DI 定义。这避免了在运行时使用慢反射扫描类。如果在实例创建过程中出现异常（由于 DI 定义过时），则重新扫描代码，缓存定义，然后重新创建实例。

这在开发过程中非常方便，因为不必为新类或更改的构造函数编写或更改工厂方法/闭包。我的构造函数遵循一定的约定（只有类型提示的参数和单个 $params 数组）以确保依赖注入在不指定其他构造函数参数的情况下工作。

到目前为止，这表现得很好，避免了错误（没有过时的工厂方法），并加快了开发速度。但是，目前在 APC 中扫描的定义为 1.8MB（序列化数组），并且还在增长。由于每次请求都必须从缓存中加载，我担心如果短时间内请求太多，内存会耗尽。不过，我没有负载测试设置来模拟这一点。

我知道推荐的方法是使用 Zend\ServiceManager 并为每个类编写工厂闭包，而不是使用 Zend\Di\Di。但我想这是很多工作，并且在开发过程中很烦人。

你建议在这种情况下重构到 Zend\ServiceManager 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:58:37.107

我写了一个 ZF2 模块来帮助你解决这个问题：[https ://github.com/aimfeld/ZendDiCompiler](https://github.com/aimfeld/ZendDiCompiler)

**ZendDiCompiler**是一个 Zend Framework 2 模块，它使用自动生成的工厂代码进行依赖注入。它为您节省了大量工作，因为不再需要编写 Zend\ServiceManager 工厂闭包并手动使它们保持最新。

**ZendDiCompiler**扫描您的代码（使用 Zend\Di）并自动创建工厂方法。如果工厂方法已经过时，ZendDiCompiler 在后台更新它们。因此，您可以更快地开发，避免由于过时的工厂方法导致的错误，并在生产中体验出色的性能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:27:09.473

这正是我在博文中所公开的关于[`Zend\Di`RAD](http://ocramius.github.com/blog/zend-framework-2-controllers-and-dependency-injection-with-zend-di/)的内容。

虽然`Zend\Di`有利于开发，但它是生产中巨大的内存和性能瓶颈。即使您缓存定义，它仍然使用[`ReflectionClass`](http://php.net/manual/en/class.reflectionclass.php)和[`call_user_func_array()`](http://php.net/manual/en/function.call-user-func-array.php)操作您的实例。它还必须执行许多对齐注入参数所必需的周边操作：只需查看在[`array_merge`](http://php.net/manual/en/function.array-merge.php)通过`Zend\Di`.

我编写了一个模块来处理将`Zend\Di\Di`实例管理器编译为闭包：[OcraDiCompiler](https://github.com/Ocramius/OcraDiCompiler)。它需要一些清理，但它的工作是通过跟踪`Zend\Di`内部的实例化逻辑来生成代码工厂/闭包。如果您想稍微“恢复”它，我很乐意提供帮助，因为它在我的 TODO 列表中，但现在优先级较低。

无论如何，通过 将实例化逻辑移动到工厂/闭包[`ServiceManager`](http://framework.zend.com/manual/2.1/en/modules/zend.service-manager.intro.html)并不像您期望的那样多，所以不要害怕并尝试一下：您可能会喜欢它。

# html - RegEx - 在 html 文本中链接 URL

> ID：15153528
> 
> 赞同：1
> 
> 时间：2013-03-01T08:32:01.937
> 
> 标签：html, regex, url, hyperlink, anchor

想象下面的字符串

```
http://somedomain.com
<p>http://somedomain.com</p>
<a href="http://somedomain.com">http://somedomain.com</a> 
```

我需要一个可以将其转换为的函数或正则表达式。

```
<a href="http://somedomain.com">http://somedomain.com</a>
<p><a href="http://somedomain.com">http://somedomain.com</a></p>
<a href="http://somedomain.com">http://somedomain.com</a> 
```

问题是我找到的每个解决方案都会破坏第三行已经链接的 url，或者不链接`<p>`标签中的 url。

PHP 解决方案会很好，但不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:07:27.197

这是一个通过您的测试用例的正则表达式 - 恐怕是 .Net 语法，而不是 PHP

```
(?<=(?:[^a-z0-9]|^))(?<!href=["'])([a-z0-9]+:\/\/[^\s<>\(\)\[\]'"]+)(?=[\s<>\(\)\[\]'"])(?!</a>) 
```

和替换字符串：

```
<a href='$1'>$1</a> 
```

**故障和解释**

正则表达式由 5 个部分组成：

1.  `(?<=(?:[^a-z0-9]|^))`
    *   断言背后的正面看法 - url 前面有一个非协议字符（或者是字符串的开头）
2.  `(?<!href=["'])`
    *   断言背后的负面看法 - url 前面没有 href 属性
3.  `([a-z0-9]+:\/\/[^\s<>\(\)\[\]'"]+)`
    *   捕获 URL
    *   括号组，所以我们可以在替换表达式中使用它
    *   This is a very simple URL matching expression - protocol, followed by `://`, followed by one or more "non-URL" characters. You might want to replace it with something better.
4.  `(?=[\s<>\(\)\[\]'"])`
    *   Positive lookahead assertion - url is followed by a non-url character
5.  `(?!</a>)`
    *   Negative lookahead assertion - url isn't followed by a closing `</a>` tag

# testing - NoMethodError：模型测试中未定义的方法“创建”

> ID：15153532
> 
> 赞同：1
> 
> 时间：2013-03-01T08:32:14.313
> 
> 标签：testing, model

我在轨道上使用红宝石。我试着写一个测试。测试是模型（单元）测试。

```
class Authentication
include Mongoid::Document
field :provider, type: String
field :uid, type: Integer
field :name, type: String

def self.create_with_omniauth(auth)
  create(uid: auth['uid'], provider: auth['provider']) 
end

def self.find_by_provider_and_uid(provider, uid)
  where(provider: provider, uid: uid).first
end

end 
```

这是我的模型。我编写了一个测试 create_with_omniauth(auth) 行。我写了如下测试：

```
auth= OmniAuth.config.mock_auth[:identity]
create(uid: auth['uid'], provider: auth['provider']) 
```

但我看到“ **NoMethodError: undefined method `create' on ...** ”消息。我该如何解决这个问题？我需要解决并编写这个测试。bw因为我的老板想要编写测试。

# c# - 如何在字符串中找到匹配的大括号对？

> ID：15153533
> 
> 赞同：5
> 
> 时间：2013-03-01T08:32:21.503
> 
> 标签：c#, string, stack

假设我有一个字符串 "(paid for) + (8 working hours) + (company rules)" 。现在我想检查这个完整的字符串是否用括号括起来。基本上我想检查字符串是否是这样的：“（（付费）+（8个工作小时）+（公司规则））”。如果它已经用括号括起来，那么我将保持原样，否则我会将括号应用于完整的字符串，以便输出为：“（（支付）+（8个工作小时）+（公司规则）） ” 。通过计算括号的数量，我无法解决这个问题。

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T08:37:48.507

是`Stack`个好主意，但是当您想查看完整的字符串是否被括号包围时，我建议您将遇到的开头括号的**索引**`Stack`放在. 这样，每次您在堆栈中弹出一个项目时，检查它是否为`0`，这意味着与此结束括号相对应的开始括号位于字符串的开头。最后一个关闭括号的检查结果将告诉您是否需要添加括号。

例子：

```
String s = "((paid for) + (8 working hours) + (company rules))";
var stack = new Stack<int>();
bool isSurroundedByParens = false;
for (int i = 0; i < s.Length; i++) {
    switch (s[i]) {
    case '(':
        stack.Push(i);
        isSurroundedByParens = false;
        break;
    case ')':
        int index = stack.Any() ? stack.Pop() : -1;
        isSurroundedByParens = (index == 0);
        break;
    default:
        isSurroundedByParens = false;
        break;
    }
}
if (!isSurroundedByParens) {
    // surround with parens
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T08:34:00.393

使用堆栈..就像当你找到一个（括号推动它并当你看到）弹出堆栈时..最后当字符串被完全解析时堆栈应该是空的......这将确保你不会丢失括号..

在您的情况下，如果堆栈之间变为空，则整个字符串都没有括号

例如：对于输入字符串：

> （付费）+（8个工时）+（公司规定）

第一个（将被推送，当它遇到时）它将弹出堆栈，现在检查是否还有更多要解析的字符串并且堆栈不为空。如果堆栈为空，则意味着整个字符串不在括号中。

而对于字符串：

> （（（付费）+（8个工作时间）+（公司规则））

在最后一个 ) 出现之前，堆栈不会为空。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-10T12:58:28.680

查找右括号索引

```
public int FindClosingBracketIndex(string text, char openedBracket = '{', char closedBracket = '}')
{
            int index = text.IndexOf(openedBracket);
            int bracketCount = 1;
            var textArray = text.ToCharArray();

            for (int i = index + 1; i < textArray.Length; i++)
            {
                if (textArray[i] == openedBracket)
                {
                    bracketCount++;
                }
                else if (textArray[i] == closedBracket)
                {
                    bracketCount--;
                }

                if (bracketCount == 0)
                {
                    index = i;
                    break;
                }
            }

            return index;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T08:47:04.343

## 测试

```
static void Main()
{
    Console.WriteLine("Expected: {0}, Is: {1}", false, IsSurrounded(""));
    Console.WriteLine("Expected: {0}, Is: {1}", false, IsSurrounded("("));
    Console.WriteLine("Expected: {0}, Is: {1}", false, IsSurrounded(")"));
    Console.WriteLine("Expected: {0}, Is: {1}", true, IsSurrounded("()"));
    Console.WriteLine("Expected: {0}, Is: {1}", false, IsSurrounded("(()"));
    Console.WriteLine("Expected: {0}, Is: {1}", false, IsSurrounded("())"));
    Console.WriteLine("Expected: {0}, Is: {1}", true, IsSurrounded("(.(..)..(..)..)"));
    Console.WriteLine("Expected: {0}, Is: {1}", false, IsSurrounded("(..)..(..)"));
    Console.WriteLine("Expected: {0}, Is: {1}", false, IsSurrounded("(..)..(..)..)"));
    Console.WriteLine("Expected: {0}, Is: {1}", false, IsSurrounded("(.(..)..(..)"));
} 
```

* * *

## 方法

**非常快**

*   无堆栈
*   没有循环遍历整个字符串

如果第一个左括号有它的右括号，那么结果不可能是真的。最后一个右括号也是如此。

```
static bool IsSurrounded(string text)
{
    if (text.Length < 2 || text.First() != '(' || text.Last() != ')')
        return false;

    for (var i = 1; i < text.Length - 1; i++)
    {
        if (text[i] == ')')
            return false;

        if (text[i] == '(')
            break;
    }

    for (var i = text.Length - 2; i > 0; i--)
    {
        if (text[i] == '(')
            return false;

        if (text[i] == ')')
            break;
    }

    return true;
} 
```

* * *

## 限制

当有更多的递归括号时不应该使用，例如`((..)) + ((..))`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T08:42:47.210

为确保有括号，您可以简单地添加它们：

```
text = "(" + text + ")" 
```

否则，Botz3000 建议的堆栈：

```
string text = "(paid for)";

Stack<int> parenthesis = new Stack<int>();
int last = 0;

for (int i = 0; i < text.Length; i++)
{
    if (text[i] == '(')
        parenthesis.Push(i);
    else if (text[i] == ')')
    {
        last = parenthesis.Pop();
    }
}

if (last == 0)
{
    // The matching parenthesis was the first letter.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T08:43:40.493

您可以使用堆栈之类的东西来检查括号的正确数量。为每个开口计数，为每个闭合支架倒数。相同数量的左大括号和右大括号意味着它匹配。如果您在计数为零时遇到右括号，那就是不匹配。如果您想知道您的字符串是否完全被括号括起来，请检查它们是否都匹配，然后检查您的字符串是否以一个开头。

```
static void BraceMatch(string text)
{
  int level = 0;

  foreach (char c in text)
  {
    if (c == '(')
    {
      // opening brace detected
      level++;
    }

    if (c == ')')
    {
      level--;

      if (level < 0)
      {
        // closing brace detected, without a corresponding opening brace
        throw new ApplicationException("Opening brace missing.");
      }
    }
  }

  if (level > 0)
  {
    // more open than closing braces
    throw new ApplicationException("Closing brace missing.");
  }
} 
```

# php - 变量作用域在 2 if 语句中起作用

> ID：15153541
> 
> 赞同：-2
> 
> 时间：2013-03-01T08:32:48.990
> 
> 标签：php

在请求后的第二个 if 函数`anotherpost` `print $post`看不到任何内容时，我阅读了手册并尝试
1.`global $post = $_REQUEST['post'];`在 getpost()
或
2.`return $post`在第一个中将参数传递`if`给`getpost($post)`
两者都不起作用，但这是变量范围的问题吗？

谢谢。

```
//index.php
require 'test.php';
$test = new test();
$test->getpost();

//test.php
class test{
public function getform(){
    ....
    require 'form.php';
}

public function getpost(){
    $post = $_REQUEST['post'];
    if($_REQUEST['post']){
        print $post;
        require `form_anotherpost.php`;
    }
    if($_REQUEST['anotherpost']){
        print $post;
    }
}

//form.php
<form>
    <input type="submit" name="post" value="post">
</form>
//form_anotherpost.php
<form>
     <input type="submit" name="anotherpost" value="anotherpost">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:36:41.300

尝试将代码更改为：

```
public function getpost(){
    $post = $_REQUEST['post'];
    if($_REQUEST['post']){
        print $post;
    }
    if(1 == 1){
        print $post;
    }
} 
```

这将允许您通过知道该语句将返回 true 来查看您的变量是否存在于第二个 if 语句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:41:45.733

如果我明白你在问什么，那么你应该`if isset`先使用然后`elseif`. 处理完数据后，您可以打印它。

尝试这个：

```
public function getpost($_REQUEST) {
    if (isset($_REQUEST['post'])) {
        print $_REQUEST['post'];
    }
    elseif (isset($_REQUEST['anotherpost'])) {
        print $_REQUEST['anotherpost'];
    }
} 
```

# joomla1.5 - 无法实例化邮件功能

> ID：15153543
> 
> 赞同：0
> 
> 时间：2013-03-01T08:32:52.717
> 
> 标签：joomla1.5

我正在使用 joomla 1.5 开发一个网站。我在“联系我们”菜单中使用 aiContactSafe 组件。我在笔记本电脑中使用 wamp 服务器。但是当我尝试发送评论以检查天气时，它会显示错误“无法实例化邮件功能”。请问有人可以帮我解决这个问题吗？

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:22:35.693

您将无法使用 php 邮件功能从您的 wamp 发送邮件，除非您安装 sendmail 或其他东西，并配置 php 以使用它。

对您来说更简单的解决方案是在 Joomla 中使用 smtp 设置，然后它将通过您的提供商发送。

# sql-server - 更新其值从函数返回的列

> ID：15153548
> 
> 赞同：0
> 
> 时间：2013-03-01T08:33:08.690
> 
> 标签：sql-server, tsql

我无法使用从用户函数返回的值更新表，我不知道该怎么做。

环境：MsSql

```
 DECLARE @files TABLE  
 (  
  Id uniqueidentifier,  
  Name nvarchar(255),  
  FolderId uniqueidentifier,  
  IsCheckedOut bit,  
  CheckedOutBy nvarchar(50),  
  IsDeleted bit,  
  IsVirtual bit,  
  Content varbinary(MAX),
  FolderPath nvarchar(MAX),
  CultureCode varchar(16)
 ) 

  UPDATE @files   
 SET Content= (SELECT TOP 1 Content FROM fnGetFileContentById (@changeListId, Id, @autoRevert,@cultureCode,@defaultCultureCode)), 
CultureCode =  (SELECT TOP 1 CultureCode FROM fnGetFileContentById (@changeListId, Id, @autoRevert,@cultureCode,@defaultCultureCode)), 
     FolderPath=(SELECT TOP 1 FullPath FROM Folder WHERE Id= FolderId) 
```

函数脚本

```
FUNCTION [dbo].[fnGetFileContentById]        
(        
 @changeListId UNIQUEIDENTIFIER,        
 @fileId UNIQUEIDENTIFIER,        
 @autoRevert BIT,      
 @cultureCode VARCHAR(16),    
 @defaultCultureCode VARCHAR(16)    
)        
RETURNS @fileContent TABLE        
(        
 Id UNIQUEIDENTIFIER PRIMARY KEY NOT NULL,        
 FileId UNIQUEIDENTIFIER NOT NULL,        
 Content VARBINARY(MAX) NOT NULL,        
 [Version] INT NOT NULL,        
 ChangeListId UNIQUEIDENTIFIER,        
 FileTypeId INT NOT NULL  ,      
 CultureCode VARCHAR(16)    
) 
```

我不想重新运行 fnGetFileContentById 函数来更新 CultureCode，如何通过一次执行 fnGetGileContentById 编写此语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:50:34.483

也许是这样的：

```
UPDATE @files 
    SET Content=FileContent.Content,
    CultureCode =FileContent.CultureCode,
    FolderPath= folder.FullPath
FROM @files
    CROSS APPLY 
   ( 
        SELECT TOP 1 
            Content,
            CultureCode
        FROM 
            fnGetFileContentById(@changeListId, Id, @autoRevert,@cultureCode,@defaultCultureCode)
   ) FileContent
   CROSS APPLY
   (
        SELECT TOP 1 
            FullPath 
        FROM 
            Folder 
        WHERE 
            f.Id = FolderId
   ) AS folder 
```

# performance - OpentransactionPerView 改为 @Transactional

> ID：15153549
> 
> 赞同：0
> 
> 时间：2013-03-01T08:33:09.553
> 
> 标签：performance, spring, hibernate, transactional, open-session-in-view

我有一个带有 Spring 3.1.1 和 Hibernate 4.1 的 Java EE 应用程序。现在我想加快速度，发现瓶颈是在一个请求中打开+关闭多个事务。

现在我删除了所有`@Transactional`注释并创建了我自己的`OpenSessionInViewFilter`，它打开和关闭一个事务。

```
package utils.spring;

import java.io.IOException;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.orm.hibernate4.SessionFactoryUtils;
import org.springframework.orm.hibernate4.SessionHolder;
import org.springframework.orm.hibernate4.support.OpenSessionInViewFilter;
import org.springframework.transaction.support.TransactionSynchronizationManager;

public class CustomHibernateSessionViewFilter extends OpenSessionInViewFilter {

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {

        SessionFactory sessionFactory = lookupSessionFactory(request);
        boolean participate = false;

        if (TransactionSynchronizationManager.hasResource(sessionFactory)) {
            // Do not modify the Session: just set the participate flag.
            participate = true;
        } else {
            logger.debug("Opening Hibernate Session in OpenSessionInViewFilter");
            Session session = openSession(sessionFactory);
            TransactionSynchronizationManager.bindResource(sessionFactory, new SessionHolder(session));
                    //BEGIN TRANSACTION
            session.beginTransaction();
        }

        try {
            filterChain.doFilter(request, response);
        }

        finally {
            if (!participate) {
                SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.unbindResource(sessionFactory);
                            // COMMIT
                sessionHolder.getSession().getTransaction().commit();
                logger.debug("Closing Hibernate Session in OpenSessionInViewFilter");
                SessionFactoryUtils.closeSession(sessionHolder.getSession());
            }
        }
    }
} 
```

这是一个好主意吗？它似乎有效并加快了速度。

这是我的交易日志：

```
http-bio-8080-exec-3 01/03/2013 11:25:20,947 | DEBUG | org.springframework.orm.hibernate4.HibernateTransactionManager | doGetTransaction | Found thread-bound Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
http-bio-8080-exec-3 01/03/2013 11:25:20,948 | DEBUG | org.springframework.orm.hibernate4.HibernateTransactionManager | getTransaction | Creating new transaction with name [by2.server.service.UserService.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
http-bio-8080-exec-3 01/03/2013 11:25:20,948 | DEBUG | org.springframework.orm.hibernate4.HibernateTransactionManager | doBegin | Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
http-bio-8080-exec-3 01/03/2013 11:25:21,172 | DEBUG | org.springframework.orm.hibernate4.HibernateTransactionManager | doBegin | Exposing Hibernate transaction as JDBC transaction [org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler@1e7b64f4[valid=true]]
http-bio-8080-exec-3 01/03/2013 11:25:21,188 | DEBUG | org.hibernate.SQL | logStatement | select userentity_.userID as userID5_ from users userentity_ where userentity_.username=? 
```

连接池

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>4.1.1.Final</version>
     </dependency>

<property name="hibernateProperties">
        <value>
            hibernate.hbm2ddl.auto=update
            hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
            hibernate.bytecode.use_reflection_optimizer=false
            hibernate.max_fetch_depth=0
            hibernate.c3p0.min_size=5
            hibernate.c3p0.max_size=20
            hibernate.c3p0.timeout=300
            hibernate.c3p0.max_statements=50
            hibernate.c3p0.idle_test_period=3000
            </value>
    </property> 
```

但视图过滤器中的打开会话似乎关闭了会话

```
finally {
        if (!participate) {
            SessionHolder sessionHolder =
                    (SessionHolder) TransactionSynchronizationManager.unbindResource(sessionFactory);
            logger.debug("Closing Hibernate Session in OpenSessionInViewFilter");
            SessionFactoryUtils.closeSession(sessionHolder.getSession());
        }
    } 
```

但是即使我删除了过滤器，Hibernate 似乎也没有使用池。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:45:06.317

我会说不。

例如，您将在数据库中保存一些产品或其他内容，并显示成功页面或重定向，认为所有内容都已保存。但是事务不会被提交，并且在您显示成功消息*后仍然可以回滚。*

而使用 Hibernate，发生这种情况的可能性更大，因为在刷新时间之前不会将任何内容写入数据库，这将发生在提交之前。

此外，事务将比必要的寿命更长，如果它在数据库中的行或表上加了锁，则会阻止其他事务继续执行，从而导致性能和可伸缩性变差。

默认的 Spring OpenSessionInViewFilter 有什么问题，它允许会话打开，但仍然使用服务级别的短事务？为什么您的请求会打开多个交易？我的问题是您在单个请求中执行了太多从 UI 层到服务层的调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T12:34:16.060

最后我以正确的方式配置了我的池......解决方案不是在我的休眠配置中添加一些 c3p0 属性，我只需要替换我的数据源-bean

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
destroy-method="close">
    <!-- Connection properties -->
    <property name="driverClass" value="org.postgresql.Driver" />
    <property name="jdbcUrl" value="jdbc:postgresql://localhost:5432/DBNAME" />
    <property name="user" value="xxx" />
    <property name="password" value="xxx" />
    <!-- Pool properties -->
    <property name="minPoolSize" value="5" />
    <property name="maxPoolSize" value="20" />
    <property name="maxStatements" value="50" />
    <property name="idleConnectionTestPeriod" value="3000" />
    <property name="loginTimeout" value="300" />
</bean> 
```

现在像魅力一样运行

# multidimensional-array - 在 fortran 子例程中传递多维数组

> ID：15153553
> 
> 赞同：1
> 
> 时间：2013-03-01T08:33:19.577
> 
> 标签：multidimensional-array, fortran, subroutine

我试图理解别人编写的 Fortran 代码。代码正在做它应该做的事情，所以我假设它工作正常。一个名为“fft”的子程序被另一个名为“convol”的子程序调用。在“convol”中，数组声明如下：

```
real, dimension fri(n+1,n,nh,2,0:1)
call fft(fri) 
```

在“fft”内部，声明是这样的：

```
subroutine wrft3b(fri) 
real, dimension fri(2,n+1,n,nh,0:1) 
```

我不明白为什么数组长度不一致并且代码仍然有效。有什么线索可能会在这里发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:45:50.310

重要的是长度是一样的。如果接口不是显式的，则不会为连续的显式形状数组抛出错误。只有数组的元素在调用程序中会有不同的索引（由列主顺序决定）。

# unix - 是否可以将标准输出重定向到文件位置而不是文件描述符？

> ID：15153554
> 
> 赞同：0
> 
> 时间：2013-03-01T08:33:19.877
> 
> 标签：unix

我的问题是我正在将 stdout/stderr 重定向到日志文件，但是 logrotate 来了并使用输出移动文件，然后转到没有文件的文件描述符。

在 shell 或系统级别是否有任何方法可以将输出重定向到同一位置的新文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:01:47.410

如果您不介意为每一行重新打开文件，而不是：

```
$ ... > logfile.txt 2>&1 
```

做：

```
$ ... 2>&1 |  while read line; do echo $line >> logfile.txt ; done 
```

# oracle - 更新过程需要很长时间

> ID：15153555
> 
> 赞同：0
> 
> 时间：2013-03-01T08:33:26.973
> 
> 标签：oracle, plsql

```
create or replace procedure Proc_1(P_IN_TABLE_NAME VARCHAR2)
AS
CURSOR T_FACT
IS
SELECT T_ID,T_VER,D_T_ID
from O_T_FACT
where  T_ID is not null
and T_VER is not null;

TYPE call_tab IS TABLE OF O_T_FACT%rowtype;

BEGIN
   IF P_IN_TABLE_NAME ='G_FACT' THEN

   OPEN T_FACT;  
   LOOP 

      EXIT WHEN T_FACT%NOTFOUND ;   

            FETCH T_FACT BULK COLLECT INTO call_data_rec LIMIT no_of_rec;                   
            EXIT WHEN call_data_rec.count = 0;

                       FOR j IN 1..call_data_rec.COUNT
                        loop
                        UPDATE  G_FACT GL set
                        GL.T_ID = call_data_rec(j).T_ID, 
                        GL.T_VER =call_data_rec(j).T_VER,
                        GL.TRANS_FLAG='Y'
                        WHERE GL.G_T_ID = call_data_rec(j).D_T_ID
                        AND GL.T_ID IS NULL 
                        AND GL.T_VER IS NULL;             

                        rec_count := rec_count + 1;                       
                        if mod(rec_count,10000) = 0 then
                        commit;
                        end if;               
                        end loop; 

   end loop;
   CLOSE T_FACT;
   END IF;
End; 
```

这个特定的过程需要很长时间，还有其他方法可以写吗？这可以在单个更新语句中完成吗？

**正如下面所建议的，除了 PLS-00436 给出的错误之外，我已经厌倦了所有的事情：实施限制：无法引用 BULK In-BIND 记录表的字段**

面向所有人的新代码

```
create or replace procedure Proc_update_T_ID(P_IN_TABLE_NAME VARCHAR2)
AS
no_of_rec number := 1000;
CURSOR T_and_V_FACT
IS
SELECT O_T_FACT.T_ID, O_T_FACT.T_VER, O_T_FACT.Downstream_T_ID, G_FACT.rowid row_id,
From O_T_FACT, G_FACT
WHERE O_T_FACT.T_ID IS NOT NULL AND G_FACT.G_T_ID = O_T_FACT.Downstream_T_ID
AND T_VER is not null
AND G_FACT.T_VER IS NULL;

TYPE call_tab IS TABLE OF T_and_V_FACT%rowtype index by binary_integer;
call_data_rec call_tab;

BEGIN
   IF P_IN_TABLE_NAME ='G_FACT' THEN
        IF T_and_V_FACT%ISOPEN THEN
            CLOSE T_and_V_FACT;
        END IF;    

        open T_and_V_FACT;

        LOOP

            FETCH T_and_V_FACT BULK COLLECT
            INTO call_data_rec LIMIT no_of_rec;

            FORALL j IN call_data_rec.FIRST .. call_data_rec.LAST    
            UPDATE  G_FACT GL set
                        GL.T_ID = call_data_rec(j).T_ID, 
                        GL.T_VER =call_data_rec(j).T_VER,
                        GL.TRANS_FLAG='Y'
            WHERE GL.rowid = call_data_rec(j).row_id;      

            COMMIT;                  
            call_data_rec.DELETE;
        EXIT WHEN T_and_V_FACT%NOTFOUND;      
        END LOOP;

        CLOSE T_and_V_FACT;
   End if;

END Proc_1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:59:48.537

在我看来，您可以将其重写为单个语句，如下所示：

```
update G_FACT GL
set    (GL.T_ID, GL.T_VER, GL.TRANS_FLAG) = 
            (select T_ID,T_VER, 'Y'
              from   O_T_FACT F
              where  F.T_ID is not null
              and    F.T_VER is not null
              and    GL.G_T_ID = F.D_T_ID)
where  exists (select null
               from   O_T_FACT F
               where  F.T_ID is not null
               and    F.T_VER is not null
               and    GL.G_T_ID = F.D_T_ID)
and    GL.T_ID is null
and    GL.T_VER is null; 
```

如果这不起作用，那么您应该能够通过将`for`循环转换为`forall`语句来获得显着收益：

```
 FORALL j IN 1..call_data_rec.COUNT
    UPDATE  G_FACT GL set
    GL.T_ID = call_data_rec(j).T_ID, 
    GL.T_VER =call_data_rec(j).T_VER,
    GL.TRANS_FLAG='Y'
    WHERE GL.G_T_ID = call_data_rec(j).D_T_ID
    AND GL.T_ID IS NULL 
    AND GL.T_VER IS NULL; 
```

此外，重新考虑是否需要`commit`在循环中使用它。包括这将：

*   减慢您的处理速度
*   增加命中 ORA-1555s 的机会
*   可能使您的数据处于不一致的状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T10:23:36.510

我认为您应该更改 CURSOR 并在循环语句中点击 UPDATE
我更喜欢使用`RowID`for update 语句和`LIMIT`获取游标的大小以及`FOR ALL` 最大性能和内存管理。我们需要定义一个新类型：

```
CREATE TYPE my_rec AS OBJECT
  ( T_ID NUMBER
  , T_VER number
  , row_id UROWID)
  ); 
```

然后使用**Proc_1**可以服务：

```
create or replace procedure Proc_1(P_IN_TABLE_NAME VARCHAR2)
AS
no_of_rec number := 1000;
CURSOR T_and_V_FACT
IS
SELECT T_FACT.T_ID, T_FACT.T_VER, T_FACT.D_T_ID, G_FACT.rowid row_id,
  From O_T_FACT, G_FACT
 WHERE T_FACT.T_ID IS NOT NULL AND G_FACT.G_T_ID = O_T_FACT.D_T_ID
   AND T_VER is not null
      -- AND G_FACT.T_ID IS NULL -- not requierd
   AND G_FACT.T_VER IS NULL;

TYPE call_tab IS TABLE OF T_and_V_FACT%rowtype index by binary_integer;
call_data_rec call_tab;

BEGIN
   IF P_IN_TABLE_NAME ='G_FACT' THEN
   IF T_and_V_FACT%ISOPEN THEN
      CLOSE T_and_V_FACT;
   END IF;    
   open T_and_V_FACT;

 LOOP
      FETCH T_and_V_FACT BULK COLLECT
        INTO call_data_rec LIMIT no_of_rec;

      FORALL j IN call_data_rec.FIRST .. call_data_rec.LAST    
       UPDATE  G_FACT GL set
                        GL.T_ID = TREAT(call_data_rec(j) AS my_rec).T_ID, 
                        GL.T_VER =TREAT(call_data_rec(j) AS my_rec).T_VER,
                        GL.TRANS_FLAG='Y'
      WHERE GL.rowid = TREAT(call_data_rec(j) AS my_rec).row_id;      

      COMMIT;                  
      call_data_rec.DELETE;
      EXIT WHEN T_and_V_FACT%NOTFOUND;      
    END LOOP;
    CLOSE T_and_V_FACT;
   End if;
  END Proc_1; 
```

我根据@Ben 的评论编辑了一些部分。
我还根据[版本 9i 和 10g](http://www.oracle-developer.net/display.php?id=410) 做了一些更改11g 中删除
了使用限制`TREAT`

# wordpress - NextGEN 播放器模板插件

> ID：15153558
> 
> 赞同：0
> 
> 时间：2013-03-01T08:33:43.433
> 
> 标签：wordpress, nextgen-gallery

我使用[NextGEN Player Template 插件](http://wordpress.org/extend/plugins/nextgen-player-template/)，这是一个很棒的插件，但它以横向模式显示纵向图片。换句话说，插件将图像的中心部分显示为横向图像。

这不是下一代画廊的问题，因为[这个另一个插件](http://wordpress.org/extend/plugins/nextgen-scrollgallery/screenshots/)也适用于下一代画廊，但正如我们在第三张截图中看到的那样，它以纵向显示纵向图像。但是这个插件有另一个问题，所以我不能使用它。

因此，我需要使用 NextGEN Player Template 插件以纵向查看纵向图片。凸轮有人帮忙吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:46:09.310

用图片回答最后一条评论：

我的建议是上传或查看插件示例。然后使用 chrome 或火狐“Inspector”查看源代码，它们允许您查看每个元素以及它们对页面的操作。然后找到包含图像的 DIV 或编辑图像本身的样式。然后进行相应的编辑。

虽然由于这是一个插件，但可能有一段代码将其应用于每个 div，因此您还需要跟踪它。或者找一个愿意查看你所有代码的人。但也许先研究一下并查看您的代码。

好的，我在那里查看了您的代码。尝试改变这个

```
$('div.gv_panel').live('click', function() {
                $.fancybox({
                    autoScale: true, 
```

为假。

这些东西也适用于改变图像。

```
<div id="ngg_player_bg_changer" class="ngg-player-bg-changer" style="display: block;">

<div class="gv_panel" style="width: 564px; height: 400px; left: 0px;"><img style="visibility: visible; width: 601.504px; height: 400px; top: 0px; left: -19px; display: inline;" src="http://piotr-tokarczyk.pl/wp-content/gallery/player-1-2/g7.jpg"></img></div> 
```

拥有我认为的所有不同图像

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:44:31.893

由于该插件正在积极开发中，我当然建议在[http://wordpress.org/support/plugin/nextgen-player-template](http://wordpress.org/support/plugin/nextgen-player-template)中发布，因为 Piotr 似乎反应很快。

# php - Codeigniter - 如果存在则路由到控制器，如果不存在则使用 dafault

> ID：15153559
> 
> 赞同：2
> 
> 时间：2013-03-01T08:33:43.670
> 
> 标签：php, codeigniter

所以我已经像这样设置了我的路线：

```
$route[':any'] = "main";
$route['products/(:any)'] = "products/product/$1"; 
```

例如**www.mysite.com/something**进入主控制器，我在那里处理**"something"**。我以类似的方式处理产品。

但是正如你之后看到的那样，我必须用我希望使用的方法而不是主控制器来写下所有其他控制器。有没有办法让它自动检测控制器是否存在使用控制器而不是默认的**“main”**？

```
$route['products'] = "products";
$route['admin/user/login'] = "admin/user/login";
$route['admin/user/logout'] = "admin/user/logout";
$route['admin/migrations'] = "admin/migrations";
$route['admin/dashboard'] = "admin/dashboard"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T08:54:34.413

我不能把它归功于它，因为我在某个地方的博客上找到了它，但是我在我的 routes.php 中使用了以下代码，在你的情况下，我会将它放在`$route[':any'] = "main";`

```
$controller_dir = opendir(APPPATH."controllers");

while (($file = readdir($controller_dir)) !== false) {

    if (substr($file, -4) == ".php" ) {

        $route[substr($file, 0, -4)."(.*)"] = substr($file, 0, -4)."$1";

    } elseif (substr($file, -5) == ".php/") {

        $route[substr($file, 0, -5)."(.*)"] = substr($file, 0, -5)."$1";

    }
} 
```

如果我需要覆盖它们中的任何一个，或者有任何独特的路由，我将它们放在 routes.php 文件的顶部，在此代码上方。

# php - 在此示例中，如何避免将变量从视图发送到控制器？

> ID：15153566
> 
> 赞同：0
> 
> 时间：2013-03-01T08:34:13.467
> 
> 标签：php, javascript, codeigniter

我有一个视图，它计算要编辑的条目，使用 javascript 删除。id 是根据勾选的复选框计算的，并存储在一个数组中，该数组需要发送到控制器方法以进行编辑或删除...我在某处读到理想情况下不应将变量从视图发送到 Codeigniter 中的控制器。我该怎么做？

看法

 `````
function checkedAll() {
    var rowlength=document.getElementById("check").rows.length; 
    z=document.getElementById("check").getElementsByTagName("input")[0].checked;

    for(var i=1;i<rowlength-1;i++)
    {
        document.getElementById("check").getElementsByTagName("input")[i].checked = z; 
    }
}

function del(){
    var rowlength=document.getElementById("check").rows.length;
    var id = new Array();

    for(var i=1;i<rowlength-1;i++)
    {
        var t = document.getElementById("check").getElementsByTagName("input")[i].checked; 
    var y = document.getElementById("check").rows[i].cells;
        id[i]=y[0].innerHTML;
    }   
}
</script>
</head>

<body>
     <table id="check" >
        <tr>
            <th>S.No</th> 
            <th>Name</th> 
            <th>Age</th> 
            <th>Qualification</th> 
            <th> <input type="checkbox" onclick='checkedAll()'/> </th>
        </tr>

        <?php 
        $check=0; 
        $flag=0;    
        $my_checkbox=array();

        foreach($forms as $ft): ?> 
            <tr id="<?php echo $check;?>" class="<?php echo $d ?>"> 
                <td > <?php echo $ft['serial']; ?> </td> 
                <td> <?php echo $ft['name'] ;?></td> 
                <td> <?php echo $ft['age'] ;?></td> 
                <td> <?php echo $ft['qualification'] ;?></td> 
                <td> <input type="checkbox" /></td>
            </tr>
            <?php $check++ ?>             
        <?php endforeach ?>

        <tr> 
            <td colspan="5" align="center"> 
                <button type="button" name="create" id='but' value="Create" 
                        onclick = "Redirect();" >Create </button>  
                <button type="button" name="edit" onclick="edit();" id='but' >Edit </button> 
                <button type="button" name="delete" id='but' onclick="del(); " >Delete </button>
            </td>
        </tr>   

    </table> 

    <form action="<?php $this->load->helper('url');echo site_url('form/edit');?>" method="POST"  id="myForm" >
        <input type="hidden" name="snap" id="snap">
    </form> 
</body> 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:28:04.853

在控制器中创建接受此数组并对其进行处理的方法，使用 jquery ajax 将此数据发送到控制器...无需重新加载，直接调用没有问题。

另一方面，您可以创建直接调用的控制器方法，并在处理完数组后重定向回视图以模拟呆在那里。我不推荐这个，因为它是 5-6 岁的方法。

如果您需要更详细的说明，请给我留言。

这是示例代码：

```
var data = //your variable to be sent
$.ajax({
    type: "POST",
    url: "/controller/method",
    data: data,
    success: function(result) {
        // data is returned by controller

    },
    error: function(){
        console.log('ERROR');
        //for errors thrown by PHP exceptions and other backend features
        //or you can return result also and fetch an exception if you go for try - catch, which I highly recommend
    }
}); 
`````

# python - 将 kwargs 反向传递给视图；django 1.5

> ID：15153570
> 
> 赞同：3
> 
> 时间：2013-03-01T08:34:41.657
> 
> 标签：python, django

作为一个 django 初学者，我有一个小问题要处理：

# html代码：

```
<li><a href="{% url 'dyn_display' category='first'%}">first</a></li>
<li><a href="{% url 'dyn_display' category='second'%}">second</a></li>
<li><a href="{% url 'dyn_display' category='third'%}">third</a></li> 
```

# urlconf.py

```
url(r'(?P<category>[a-z]+)$', 'display', name='dyn_display') 
```

# 视图.py

```
def courses_display(request, category):
    return render_to_response('display/basic.html', {category: 'in'}, context_instance=RequestContext(request)) 
```

最后是basic.html的一部分，所以你可以想到为什么我需要那个类别变量

# 基本的.html

```
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFirst">
                <strong>First</strong>
            </a>
        </div>
        <div id="collapseFirst" class="accordion-body collapse {{ first }}">
             <div class="accordion-inner">
                 ...
             </div>
         </div>
     </div>
     <div class="accordion-group">
         <div class="accordion-heading">
             <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseSecond">
                 <strong>Second</strong>
             </a>
         </div>
         <div id="collapseSecond" class="accordion-body collapse {{ second }}">
             <div class="accordion-inner">
                 ...
             </div>
         </div>
     </div>
     <div class="accordion-group">
         <div class="accordion-heading">
             <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThird">
                 <strong>Third</strong>
             </a>
         </div>
         <div id="collapseThird" class="accordion-body collapse {{ third }}">
             <div class="accordion-inner">
                 ...
             </div>
         </div>
      </div>
  </div> 
```

由于整个页面是用 bootstrap 和 Jquery 完成的，所以 url 的最后部分

一些/url/**首先**

一些/url/**秒**

一些/url/**第三**

有点难看，因为手风琴元素让我可以折叠并打开各自的内部主体而无需重新加载页面。所以问题是：有没有办法反向传递一个kwarg，它将在视图中使用，而不是确定reverse（）中的url？

我获得像**some/url/**这样的 url 的方式，并且仍然将 kwarg 从第一个 .html 页面传递到视图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T08:36:26.763

你可以使用这个：

如果这是您的网址：

```
url(r'(?P<category>[a-z]+)$', 'display', name='dyn_display')
reverse('dyn_display', kwargs={'category': 'first'}) 
```

要重定向，您可以在视图中像这样使用它：

```
from django.http import HttpResponseRedirect
return HttpResponseRedirect(reverse('dyn_display', kwargs={'category': 'first'})) 
```

如果这是您的网址：

```
url(r'$', 'display', name='dyn_dysplay')
reverse('dyn_display') 
```

要重定向，您可以在视图中像这样使用它：

```
from django.http import HttpResponseRedirect
return HttpResponseRedirect(reverse('dyn_display')) 
```

要获得可以接收可选值的视图，您需要 2 个 url：

```
url(r'$', 'display', name='dyn_optional_display')    
url(r'(?P<category>[a-z]+)$', 'display', name='dyn_display') 
```

然后你的观点：

```
def courses_display(request, category=None):
    ctx = {}
    if category:
        ctx.update({category: 'in'})
    return render_to_response('display/basic.html', ctx,    context_instance=RequestContext(request)) 
```

# macos - 将 cron 转换为 launchd - MAILTO

> ID：15153575
> 
> 赞同：4
> 
> 时间：2013-03-01T08:35:02.580
> 
> 标签：macos, cron, mailto, launchd

从旧 Mac 迁移到新 Mac。

试图迁移我在旧 Mac 上的用户 crontab。

现在我知道我可能可以通过创建 /etc/crontab 来运行 cron - 但鉴于苹果已弃用它而支持 launchd - 我想我会尝试将我的 crontab 迁移到 launchd plist 文件。学习新东西总是很有趣:)

crontab 并不难——我倾向于设置 shell 脚本来完成这项工作，然后在预定的时间调用它们。

我可以同时从 plist 中调用这些罚款 - 没问题。

但是 - 在我的 crontab 顶部，我有 MAILTO=my-gmail-email-address - 所以不是将邮件发送给盒子的邮件假脱机上的本地用户，而是将它们发送给我的 gmail。

我看不到您可以为launchd plist 文件配置它。

所以 - 在我修改所有脚本以将所有输出重定向到 tmp 文件然后邮寄 tmp 文件之前（必须在相当多的脚本中执行此操作） - 有没有办法在启动级别执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T05:14:52.733

恐怕launchd(8) 不支持开箱即用的stdout/stderr 邮寄。这是一个解决方法：

`StandardOutPath`通过和将输出重定向`StandardErrorPath`到专用目录中的文件。然后设置一个发送该目录中每个文件的作业。使用键触发此作业`QueueDirectories`。确保此脚本在邮寄文件后将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-19T02:33:05.977

一种转换为launchd的方法是懒惰的方式（我是怎么做的）

您从应用商店支付 0.99 美元购买 Lingon；那么您只需填写几个字段，它就会启动...

否则：launchd 看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>name of launchd</string>
    <key>ProgramArguments</key>
    <array>
        <string>[terminal command to execute]</string>
    </array>
    <key>RunAtLoad</key>
    <[(true)/(false)]/>
    <key>StartCalendarInterval</key>
    <dict>
        [any of these options are removable]
        [for everyday remove the Day and Weekday tags]
        <key>Day</key>
    <integer>[day of the month]</integer>
    <key>Weekday</key>
    <integer>[day of the week 0-7 - (sunday=0);]</integer>
        <key>Hour</key>
        <integer>[hour of day (military time)]</integer>
        <key>Minute</key>
        <integer>[minute]</integer>
    </dict>
</dict>
</plist> 
```

任何 [] 要么是注释（必须删除）要么是选项列表

使用 launchctl 命令将用于挂载 launchd

# ios - Xcode 无法将应用程序附加到 Iphone 模拟器

> ID：15153579
> 
> 赞同：1
> 
> 时间：2013-03-01T08:35:22.720
> 
> 标签：ios, xcode, ios-simulator

我的 OS 版本是 Mac OS X 10.7.5 Lion，Xcode 版本是 4.5。我在我的 macbook xcode 上创建任何新应用程序或运行任何旧应用程序将无法在任何版本的模拟器上部署该应用程序。

＆如果我连接到高速连接，它工作正常 xcode 将正常工作，但脱机时它会无限显示“附加到 appName”并挂起......

我用谷歌搜索但没有帮助。

任何建议，链接非常感谢....谢谢

# ruby-on-rails - 如果我必须捕获所有父/子关系的数据，如何处理导航

> ID：15153580
> 
> 赞同：1
> 
> 时间：2013-03-01T08:35:27.757
> 
> 标签：ruby-on-rails

我有一个对象 Foo 具有各种属性（*val1, val2, val3*） Foo 也有一个栏的集合（通过 has_many 关系）

Bar 有属性 ( *val4, val5, val6* ) Bar 也有键的集合（通过 has_many 关系）

键具有属性（*val7*）

当我创建一个 Foo 对象时，我想创建/修改所有 Bar 对象。有一项规定可以在屏幕中添加一个新栏。当用户在修改 Bar 时，他可能还会添加一些 Key(s)。

但是没有 Foo 就不能创建/保存 Bar 对象。我应该如何处理这个问题，是否有一个 gem 可以抽象这个页面流和对象的存储。我只想在存储 Foo 时存储所有对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:50:22.257

你必须实现一些：

*   `after_create`在您的`Foo`模型中，创建/修改其`bars`.
*   `after_update`在您的`Bar`模型中，添加`keys`.

小心这些功能，不要创建一些无限循环。

# api - 使用 API 1.1 进行 Twitter 用户搜索：限制结果和分页数

> ID：15153581
> 
> 赞同：1
> 
> 时间：2013-03-01T08:35:28.563
> 
> 标签：api, rest, twitter

使用新的 Twitter API 执行用户搜索时（可以在此处查看[https://dev.twitter.com/console](https://dev.twitter.com/console)），发现限制返回结果的数量以及分页存在问题。所以，假设我想从搜索和使用 count 参数中得到 5 个结果：

> [https://api.twitter.com/1.1/users/search.json?q=Online&count=5](https://api.twitter.com/1.1/users/search.json?q=Online&count=5)

它工作正常，返回 5 条记录。但是如果我将 count 设置为零，仍然会返回一个结果：

> [https://api.twitter.com/1.1/users/search.json?q=Online&count=0](https://api.twitter.com/1.1/users/search.json?q=Online&count=0)

是预期的吗？

然后我尝试将分页用于相同的目的（想要获取第一页，并限制其中的结果）：

> [https://api.twitter.com/1.1/users/search.json?q=Online&per_page=5&page=1](https://api.twitter.com/1.1/users/search.json?q=Online&per_page=5&page=1)

现在看起来限制根本不起作用，返回的记录多于 5 条。有人知道查询是否有问题，还是 API 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-14T05:36:21.997

**像这样尝试：** [https://api.twitter.com/1.1/users/search.json](https://api.twitter.com/1.1/users/search.json)

**参数：**

1) page : 指定页面

2) count : 每页要检索的用户结果数，最大值为 20。

以下示例将从第 2 页返回 1 个搜索关键字“wordpress”的结果

```
<?php
require_once('api/TwitterAPIExchange.php');
require_once("token.php"); // For your access token - viral

$searchword = "wordpress";

$url = 'https://api.twitter.com/1.1/users/search.json';
$getfield = '?&page=2&count=1&q='.$searchword;

$requestMethod = 'GET';
$twitter = new TwitterAPIExchange($settings);
$followers = $twitter->setGetfield($getfield)
    ->buildOauth($url, $requestMethod)
    ->performRequest();

$json = json_decode($followers, true);

print_r($json);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T00:15:02.100

我认为 'per_page' 不是这个 1.1 API 中的有效参数。然后，它返回默认数字 20。

[https://dev.twitter.com/docs/api/1.1/get/users/search](https://dev.twitter.com/docs/api/1.1/get/users/search)

# c# - 通过单击指向子页面的母版页超链接获取值

> ID：15153583
> 
> 赞同：0
> 
> 时间：2013-03-01T08:35:31.900
> 
> 标签：c#, asp.net, css, hyperlink, master-pages

我正在尝试创建一个允许共享照片的网站（作为一个基本项目），但我遇到了一个问题。在我的 masterPage 上有带有类别名称的链接，我需要当我单击其中一个时，我会在子页面（在 css 代码页面中）的变量中获取一个值。我对母版页很陌生，不知道该怎么做，我尝试了一些方法，但就是做不到。举个例子：

子页面“Gallery.aspx”的 css 部分中的一个字符串变量，当在母版页中单击它时将获取类别名称的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:22:33.133

```
Hyperlink hh=(Hyperlink)Master.FindControl("control_name"); 
```

[参考](http://msdn.microsoft.com/en-us/library/xxwa0ff0%28v=vs.100%29.aspx)

# javascript - 为什么我的程序可以在 Safari、Google Chrome 和 Mozilla Firefox 中运行，但不能在 Internet Explorer 中运行？

> ID：15153584
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:35:34.177
> 
> 标签：javascript, jquery, html, browser

我在 html 文档中提出了 4 个问题，并且函数是用 jquery 制作的。该程序可以在 Safari、Google Chrome 和 Mozilla Firefox 中运行，但不能在 Internet Explorer 中运行。有没有人知道如何让我的程序也可以在 Internet Explorer 中运行？

```
 <html>    
    <head>
        <title>Inboedelwaardemeter</title>
         <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">

               function checkTotal() {
                   var a =  document.querySelectorAll('input:checked'); 
                   var total = 0;
                   for(var x=0; x < a.length;x++){
                      total += parseFloat( a[x].value );
                   }
                  alert('Uw puntenaantal is '+ total+'. Kunt u dit aantal en uw postcode, huisnummer en eventuele toevoeging terugsturen naar warnersteinfort@gmail.com');
                }
        </script>
    </head> 
    <body>
    <center><h1>Inboedelwaardemeter</h1></center>
        <b> Leeftijd hoofdkostwinner:</b>
        <form name="mijnForm1">
        <br>
            <input type="radio" id="getal1" name="leeftijd"
                value="22" checked> 35 jaar en jonger
              <br>    
            <input type="radio" id="getal2" name="leeftijd"
                value="29"> 36 t/m 50 jaar
              <br>
            <input type="radio" id="getal3" name="leeftijd"
                value="38"> 51 jaar en ouder
              <br>
            <br>
        <b> Samenstelling huishouden:</b>
        <br>
        <form name="mijnForm2">
            <input type="radio" id="getal4" name="huishouden"
                value="0" checked> Alleenstaande
              <br>    
            <input type="radio" id="getal5" name="huishouden"
                value="10"> Echtpaar / Samenwonende
              <br>
              <br>  
        <b> Netto maandinkomen hoofdkostwinner</b>
        <br>
        <form name="mijnForm3">
            <input type="radio" id="getal6" name="hoofdkostwinner"
                value="0" checked> Tot en met €1000,-
              <br>    
            <input type="radio" id="getal7" name="hoofdkostwinner"
                value="6"> €1001,- tot en met €2000,-
              <br>
            <input type="radio" id="getal8" name="hoofdkostwinner"
                value="18"> €2001,- tot en met €3000,-
             <br>
            <input type="radio" id="getal9" name="hoofdkostwinner"
                value="23"> €3001,- tot en met €4850
                  <br>
            <input type="radio" id="getal10" name="hoofdkostwinner"
                value="23"> €4850,- of hoger
            <br>
            <br>
            <b> Woonoppervlakte woning</b>
            <br>
        <form name="mijnForm4">
            <input type="radio" id="getal11" name="Oppervlakte"
                value="0" checked> tot en met60m²
              <br>    
            <input type="radio" id="getal12" name="Oppervlakte"
                value="0"> 60m² tot en met 80m²
              <br>
            <input type="radio" id="getal13" name="Oppervlakte"
                value="2">80m² tot en met 100m²
             <br>
            <input type="radio" id="getal14" name="Oppervlakte"
                value="6"> 100m² tot en met 120m²
                  <br>
            <input type="radio" id="getal15" name="Oppervlakte"
                value="8"> 120m² tot en met 150m²
                  <br>
            <input type="radio" id="getal16" name="Oppervlakte"
                value="20"> 150m² t/m 200m²
                  <br>
            <input type="radio" id="getal17" name="Oppervlakte"
                value="23"> 200 m² en meer
            <br>
        </form>
         <button onclick="checkTotal();">Bereken aantal punten</button>
         <center>
         Heel erg bedankt voor uw medewerking! 
         <br>
         Groetjes Warner Steinfort
        </center
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:52:28.087

的参数[`document.querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/document.querySelectorAll)适用于有效的 CSS 选择器。`:checked`是一个[有效的 CSS3 选择器](http://www.w3.org/TR/selectors/#checked)，但在 IE8 实现的 CSS 2.1 中不存在。

您可以使用 jQuery 来查找元素`$('input:checked')`- 查看[`:checked`](http://api.jquery.com/checked-selector/)哪个使用 IE8 的 polyfill 来提供跨浏览器功能。

或者，如果没有 jQuery，您可以使用不同的方法来查找`<input>`检查了哪些元素，例如，您可以找到所有`<input>`元素，然后循环检查`checked`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:11:18.263

仅供参考**document.querySelectorAll**仅在 IE9 和 IE10 中受支持。如果您使用的是 IE6 和 7，这可能无法正常工作。在 IE8 中，如果不使用 CSS2 选择器，这可能不起作用。而不是使用 querySelectorAll 使用 jQuery 每个。只需替换您的代码

```
var a =  document.querySelectorAll('input:checked'); 
  var total = 0;
  for(var x=0; x < a.length;x++){
  total += parseFloat( a[x].value );
} 
```

**有了这个 ONE**

```
 var total = 0;
   $("input:checked").each(function () {
     total += parseFloat($(this).val());
   }); 
```

# android - android：webview 什么时候可以布局？

> ID：15153586
> 
> 赞同：0
> 
> 时间：2013-03-01T08:35:38.453
> 
> 标签：android, android-layout, android-webview

我的活动由一个 WebView 和几个按钮组成。我正在尝试在活动底部显示按钮，但如果内容高于屏幕，请确保用户必须滚动浏览内容。作为我的解决方案的一部分，我已将 WebView 的 layout_height 属性设置为 wrap_content。

问题是，即使我从 onCreate() 中调用 WebView.loadData()，WebView 也不会立即自行调整大小。在网页内容高于屏幕的情况下，按钮最初出现在活动的底部，然后在网页内容出现时移出屏幕。我想在调整 Web 内容大小之前阻止按钮出现，这样当它们出现时，它们总是出现在正确的位置。为此，我尝试使用 onPageFinished （它被调用得太早）和 onPictureListener （它根本没有被调用）。

如何确定 WebView 何时准备好布局？

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <android.webkit.WebView
            android:id="@+id/wv"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <LinearLayout
            android:id="@+id/btns"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="center_horizontal"
            android:gravity="bottom" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="onClickButton1" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="onClickButton2" />

        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

# php - 如何准备方法/函数调用以在以后调用它？

> ID：15153588
> 
> 赞同：2
> 
> 时间：2013-03-01T08:35:47.793
> 
> 标签：php, oop

这是“准备/存储函数调用”*的最佳方式，以便稍后实际执行它？

(* 参数数量未定)

我现在拥有的：

```
function addCall($className, [$parameter [, $parameter ...]]) 
{ 
    $this->calls[] = func_get_args();
} 
```

然后我会做：

```
foreach($this->calls as $args) 
{ 
    $r = new ReflectionClass(array_shift($args));
    $instances[] = $r->newInstanceArgs($args);
} 
```

这对我来说看起来不是很 OOP，包括“未确定的参数数量”特征

如何改进我的代码？

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:01:39.510

您可能对[命令模式](https://en.wikipedia.org/wiki/Command_pattern)感兴趣。
你如何实现它取决于你——或者你正在使用的框架。
但这些模式通常会叠加。因此，也要好好阅读“周边”模式，以便能够就实际实现（或选择现有库）做出好的选择。

完全非正式的：

```
<?php
function foo($a, $b) {
    return 'foo#'.($a+$b);
}

function bar($a,$b,$c) {
    return 'bar#'.($a-$b+$c);
}

$cmds = array();
$cmds[] = function() { return foo(1,2); };
$cmds[] = function() { return bar(1,2,3); };
$cmds[] = function() { return bar(5,6,7); };
$cmds[] = function() { return foo(9,7); };
$s = new stdClass; $s->x = 8; $s->y = 8;
$cmds[] = function() use($s) { return foo($s->x,$s->y); };

// somewhere else....
foreach($cmds as $c) {
    echo $c(), "\n";
} 
```

或类似的东西

```
<?php
interface ICommand {
    public function /* bool */ Execute();
}

class Foo implements ICommand {
    public function __construct($id) {
        $this->id = $id;
    }
    public function Execute() {
        echo "I'm Foo ({$this->id})\n";
        return true;
    }
}

class Bar implements ICommand {
    public function __construct($id) {
        $this->id = $id;
    }
    public function Execute() {
        echo "I'm Bar ({$this->id})\n";
        return true;
    }
}

$queueCommands = new SplPriorityQueue();

$queueCommands->insert(new Foo('lowPrio'), 1);
$queueCommands->insert(new Foo('midPrio'), 2);
$queueCommands->insert(new Foo('highPrio'), 3);
$queueCommands->insert(new Bar('lowPrio'), 1);
$queueCommands->insert(new Bar('midPrio'), 2);
$queueCommands->insert(new Bar('highPrio'), 3);

// somewhere else....
foreach( $queueCommands as $cmd ) {
    if ( !$cmd->execute() ) {
        // ...
    }
} 
```

或者是其他东西 ...

# flash - 在actionscript 3.0中将参数值传递给外部脚本文件中的函数

> ID：15153590
> 
> 赞同：0
> 
> 时间：2013-03-01T08:35:56.243
> 
> 标签：flash, actionscript

我想知道如何将参数传递给链接到按钮的外部动作脚本文件中的函数。在上面的代码中，当我单击按钮时，出现以下错误。我认为我将值传递给函数的方式存在问题。请帮忙。

```
ArgumentError: Error #1063: Argument count mismatch on Node(). Expected 1, got 0.
at flash.display::Sprite/constructChildren()
at flash.display::Sprite()
at flash.display::MovieClip()

package
{
    import flash.display.MovieClip;
    import flash.events.*;
    import flash.display.SimpleButton;

    public class Node extends SimpleButton
    {
          public var left:Node;      // left child
          public var right:Node;    // right child
          public var value:int = int.MAX_VALUE;   // value in node
          public var test:int;

          public function Node(c:int):void
            {
                value = c;
                addEventListener(MouseEvent.CLICK, AddClick);
            }
            public function AddClick(e:Event):void
            {

                Node(25);
                trace(value);
            }

    }//class

}//package 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:06:52.543

如果您在库中创建对象并为该对象编写类，则可以通过两种方式实例化该对象：

1.  从库中拖动实例。您不能将参数传递给构造函数。

2.  `new`通过命令创建实例。您可以将参数传递给构造函数。

如果要使用这两种方法实例化对象，则需要为构造函数参数设置默认值（对于方法 1）：

`public function Node(c:int=0)`

我想，您使用方法 1 创建对象。您的错误发生在应用程序启动时，而不是按钮按下时。

顺便说一句，在你的代码中你以奇怪的方式调用构造函数:) `Node(25);`- 错了，你需要`var foo:Node = new Node(25);`

如果您只想将值更改为 25，请写

```
public function AddClick(e:Event):void
      {

                value = 25;
                trace(value);
      } 
```

Node 类中的所有函数和值都“存在”在一个范围内并且可以直接访问。

# google-chrome - 表格中的最大宽度

> ID：15153592
> 
> 赞同：2
> 
> 时间：2013-03-01T08:36:01.290
> 
> 标签：google-chrome, firefox, html-table, css

我在表格中显示 img 时遇到问题：

```
<table>
<tr>
<td>
    <div>    
        <img src="https://www.google.ru/images/srpr/logo4w.png"/>
        <img src="http://pictar.ru/data/media/24/nature__463_.jpg"/>
    </div>
    </td>
</tr>
</table> 
```

用CSS：

```
div {
    height: 100%;
    width: 100%;
    border:2px solid red;
}
div img {
    max-width: 100%;
    max-height: 100%;
} 
```

[JS 小提琴示例](http://jsfiddle.net/SerCe/TAE3w/3/)。
在 Chrome 中，两个图像都与 div-wrapper 成比例缩放，但在 Firefox 和 IE9 中，图像不缩放。

如何在任何地方获得 Chrome 行为？

**解答：**唯一的解决方案是使用 javascript。我的跨浏览器解决方案是：http: [//jsfiddle.net/TAE3w/21/](http://jsfiddle.net/TAE3w/21/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T08:44:52.287

您只需要将宽度也设置为 100%。

```
div img {
    width: 100%;
    max-width: 100%;
    max-height: 100%;
} 
```

[http://jsfiddle.net/samliew/TAE3w/9/](http://jsfiddle.net/samliew/TAE3w/9/)

对所有三种浏览器最一致的效果是：

```
div img {
    display: block;
    width: 100%;
    height: auto;
    max-width: 100%;
    max-height: 100%;
} 
```

[http://jsfiddle.net/samliew/TAE3w/15/](http://jsfiddle.net/samliew/TAE3w/15/)

查看相关问题：

*   [如何自动调整图像大小以适合 div 容器](https://stackoverflow.com/questions/3029422/image-auto-resize-to-fit-div-container)
*   [如何在 div 中放置图像（img）并保持纵横比？](https://stackoverflow.com/questions/4394309/how-do-i-fit-an-image-img-inside-a-div-and-keep-the-aspect-ratio)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T19:14:34.470

在 Firefox 中，如果指定为百分比，则 max-width 不起作用，但如果给出精确值则起作用。使用 javascript 将 maxWidth 设置为图像宽度。不需要包装器。

```
<img onload="this.style.maxWidth=(this.getAttribute('width')?this.getAttribute('width'):this.naturalWidth).toString() + 'px'; this.style.width='100%'; this.style.height='auto';" src="yourimage.jpg" /> 
```

如果您不想更改图像标签，请在所有图像上使用 javascript 功能。

```
function makeImagesResponsive(){
    var images = document.getElementsByTagName('img');
    for(var i = 0; i < images.length; ++i) {
        images[i].style.maxWidth=(images[i].getAttribute('width')?images[i].getAttribute('width'):images[i].naturalWidth).toString() + 'px';
        images[i].style.width='100%';
        images[i].style.height='auto';  
    }
}
window.addEventListener( "load", makeImagesResponsive, false ); 
```

当然，您可以只从网站的特定部分中选择图像，或者按类名或其他属性过滤它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T23:04:52.753

作为记录，最近在 Chrome 中登陆了对表格最大宽度的支持。

我不确定该修复程序是否适用于 Webkit，或者只是 Chrome 的 Blink 引擎。该问题仍然影响 Safari 6。

# php - 在不提交表单的情况下获取选项值

> ID：15153595
> 
> 赞同：5
> 
> 时间：2013-03-01T08:36:20.947
> 
> 标签：php, html

我想在不提交表单的情况下使用用户选择的选项值。这是我的 HTML 代码

```
Combo Box<br>
<select name="select1">
<option value="IVP" selected>IVP</option>
<option value="SURTEK">SURTEK</option>
<option value="GUITARTUNER">GUITARTUNER</option>
<option value="OTHER">OTHER</option>
</select> 
```

我想将选定的选项值带到一个 php 变量中，以便根据选项值显示一组新的数据。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T08:48:45.043

正如其他人建议的那样，您应该使用 AJAX。我建议查看 AJAX 调用的 javascript/Jquery 示例。

我猜您想根据用户选择的选项修改 Web 的一部分，最好的方法是使用单独的 PHP 脚本来接收所选选项（在 javascript/JQuery 中捕获）并返回您想要的新 HTML显示。

例如在 Jquery 中获取选定的选项：

```
var selected_option_value=$("#select1 option:selected").val(); 
```

同样在 Jquery 中进行 AJAX 调用，使用 POST 传递值：

```
 $.post("script_that_receives_value.php", {option_value: selected_option_value},
      function(data){ //this will be executed once the `script_that_receives_value.php` ends its execution, `data` contains everything said script echoed.
          $("#place_where_you_want_the_new_html").html(data);
      }
  ); 
```

希望这可以帮助！

编辑：让我们为上面的示例提供更多细节：

假设您有一个 index.html 页面，您`<select name="select1">`的问题中给出了该页面：

第一步是当有人选择一个选项时链接一个事件，如何做到这一点：

1-第一种方法：

```
<select name='select1' id='select1' onchange='load_new_content()'> 
```

这样，当有人更改列表的选定值时，将执行`<select>`javascript 函数。`load_new_content()`请注意，我已添加`id='select1'`到标签中，这用于在 javascript/JQuery 中搜索此元素，如果您需要在 javascript/JQuery 中使用该标签，则应始终使用 id 属性。

2- 第二种方式，使用 JQuery 链接事件：

为此，您应该在index.html 中有一个`<script>`标签。`<head>`在这个`<script>`标签内你应该有：

```
$(document).ready(function(){
      // everything here will be executed once index.html has finished loading, so at the start when the user is yet to do anything.
      $("#select1").change(load_new_content()); //this translates to: "when the element with id='select1' changes its value execute load_new_content() function"
}); 
```

无论您要使用哪个选项，您现在都需要此`load_new_content()`功能。它也应该在`<script>`标签的`<head>`标签内声明，就像 $(document).ready 函数一样。

```
function load_new_content(){
     var selected_option_value=$("#select1 option:selected").val(); //get the value of the current selected option.

     $.post("script_that_receives_value.php", {option_value: selected_option_value},
         function(data){ //this will be executed once the `script_that_receives_value.php` ends its execution, `data` contains everything said script echoed.
              $("#place_where_you_want_the_new_html").html(data);
              alert(data); //just to see what it returns
         }
     );
} 
```

现在唯一剩下的是`script_that_receives_value.php`：

```
<?php
     $selected_option=$_POST['option_value'];

     //Do what you need with this value, then echo what you want to be returned.

     echo "you have selected the option with value=$selected_option";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T08:39:31.113

使用 AJAX，同时在下拉列表中选择一个选项触发 jQuery 函数并通过 AJAX 将值发送到服务器页面

HTML页面：

```
<html>
<head>
<script>
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br>
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

PHP页面（getuser.php）：

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'peter', 'abc123');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ajax_demo", $con);

$sql="SELECT * FROM user WHERE id = '".$q."'";

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Hometown</th>
<th>Job</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";
  echo "<td>" . $row['Job'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

参考：[http ://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:38:15.737

如果不发出 http 请求，则无法在 php 变量中获取选项值，因为所选值位于客户端，而 php - 在服务器中。

您可以使用 ajax，但它仍在提交表单。如果您不想对服务器执行查询，您必须在客户端加载所有数据并使用 JavaScript 来管理它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:14:12.963

如果您正在寻找动态网页内容，Ajax 是最佳选择

# sorting - SSRS 行排序

> ID：15153601
> 
> 赞同：0
> 
> 时间：2013-03-01T08:36:42.270
> 
> 标签：sorting

我有这样的矩阵报告

路线 周五 周日 周三 周二 周六 周四 周一

van1 jlsjdf sdf dfsdf sfsd sdfs sf sdfs sdfs sdf

上面的日子没有分组，现在我希望这些日子按顺序来

路线 周一 周二 周三 周四 周五 周六 周日

我该怎么办请帮助提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:55:47.953

当您说它们未分组时，如果每一天都不是一个组并且是一个单独的列，那么您可以重新排列 tablix 上的列以适应。

但是我怀疑你的日子是一个列组，如果是这样的话，在列组属性上单击排序选项卡并输入以下表达式：

```
Switch(Fields!Day.Value="Monday",Fields!Day.Value="Tuesday",2,Fields!Day.Value="Wednesday",3,Fields!Day.Value="Thursday",4,Fields!Day.Value="Friday",5,Fields!Day.Value="Saturday",1,Fields!Day.Value="Sunday",1,) 
```

这会将每一天转换为一个数字，然后根据该数字对其进行排序。

当您需要自定义排序顺序时，这很有用，您只需使用 switch 语句将值转换为序列顺序，然后您可以按数字顺序排序。

# html - CSS边框样式适配内容

> ID：15153603
> 
> 赞同：1
> 
> 时间：2013-03-01T08:36:49.027
> 
> 标签：html, css

我在将某些内容放入边框时遇到了麻烦。输入更多文本时，它不会延伸以适应垂直方向，而是继续越过边框，如随附的屏幕截图所示：![](../Images/5496003af0b6ace093683de69f61f9bd.png)

我的CSS文件如下：

```
body {
    background-image:url(http://www.cs.aub.edu.lb/hsafa/cmps278/hw2/background.png);
    background-repeat:repeat;

    background-attachment:fixed;
    margin: 0px;
    padding: 0px;
    font-family: Verdana, Tahoma, sans-serif;
    }
h1 {
    text-align: center;
    font-family: Tahoma, Verdana, sans-serif;
    font-size: 24pt;
    text-shadow: 3px 3px #999999;
    font-weight: bold;
}
p {
    font-size: 8pt;
}
#content {
    width: 800px;
    margin: auto;
    border: 4px solid gray;
    border-radius: 20px;
    background-color: #A2B964;
}
#banner {
    height: 50px;
    background-image:url(http://www.cs.aub.edu.lb/hsafa/cmps278/hw2/bannerbg.png);
    background-repeat:repeat;
}
#banner img {
    display: block;
    margin:auto;
    overflow: hidden;
}
#general {
    float: right;
    width: 250px;
    border-radius: 0px 20px 0px 0px;
}
dl {
    margin: 10pt;
    font-size: 8pt;
    font-family: Ariel, sans-serif;
}
dt {
    font-weight: bold;
    margin-top: 10pt;
}
ul {
    list-style-type: none;
}
li {
    margin-left:0px;
}
#leftsection {
    width: 550px;
    overflow:hidden;
    background-image:url(http://www.cs.aub.edu.lb/hsafa/cmps278/hw2/background.png);
    background-repeat:repeat;
    background-attachment:fixed;
}
#rating {
    height: 83px;
    background-image:url(http://www.cs.aub.edu.lb/hsafa/cmps278/hw2/rbg.png);
    background-repeat: repeat;
    overflow: hidden;
    border-radius: 20px 0px 0px 0px;
}
#rating img {
    border-radius: 20px;
}
.special {
    vertical-align: top;
    font-size: 48pt;
    font-weight: bold;
    color: red;
}
.review {
    font-size: 8pt;
    font-family: Verdana, Tahoma, sans-serif;
    font-weight: bold;
    background-color: #E8DC9B;
    border: 2px solid gray;
    border-radius: 10px;
    padding-left: 8px;
    padding-right: 8px;
}
.personal {
    margin-bottom: 20pt;
}
.italic {
    font-style: italic;
    margin-left: 40px;
}
img.review {
    padding-right: 5px;
}
#leftcol {
    margin-top: 2%;
    margin-left: 2%;
    margin-right: 2%;
    float: left;
    width: 47%;
}
#rightcol {
    margin-top: 2%;
    margin-right: 2%;
    float: right;
    width: 47%;
}
#pages {
    text-align:center;
    margin: 5px;
}
#validated {
    position: fixed;
    top: 90%;
    left:80%;
    width: 600px;
}
#validated img {
    opacity: 0.5;
} 
```

我在 CSSDeck 上添加了 HTML 代码：http: [//cssdeck.com/labs/full/bldwwaec](http://cssdeck.com/labs/full/bldwwaec)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:47:21.383

如果你把HTML代码也放上去会更好。

右侧元素是`fixed`（或`absolute`）或`float`。`<br />`如果它是浮动的，您可以通过在其父元素的末尾添加 a 并对其进行设置来简单地修复`clear: both;`它。像这样：

```
<div id="parent">
    <div>aaa</div>
    <div class="float-right">bbbb</div>
    <br style="clear: both;" />
</div> 
```

现在，`div#parent`适合内容，如果您在其上设置边框，您的问题就会解决。

然而`absolute`，万一这并不像我解释的那么容易，建议修改`absolute`（或`fixed`）在该部分的使用。

祝你好运，
[穆罕默德·阿里·夏帕桑](http://m.a.sharpasand.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:01:10.947

问题似乎是浮动的右列。

```
#rightcol {float: right;} 
```

看来您需要清除浮动，因为浮动元素已从正常页面流中删除，父元素不会扩展以匹配高度。一个简单的解决方案是为您的父元素或类添加一个 clearfix（在我们的例子中是 ID）

```
#content:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content: " ";
    clear: both;
    height: 0;
} 
```

这应该可以解决您的问题，如果您对此有更多疑问，我建议您[查看此处。](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T10:11:07.453

您必须在 id=content 上再放置一个 div，然后您可以调用 calss=pagewrapper。

.pagewrapper{边距：0自动；宽度：800 像素；}

将 float:left 放入您的 ID

# 内容{浮动：左；}

# eclipse - Admob 使我的应用程序 Android (Eclipse) 崩溃

> ID：15153604
> 
> 赞同：0
> 
> 时间：2013-03-01T08:36:55.417
> 
> 标签：eclipse, logging, crash, admob

我一直在网上关注如何构建android应用程序的教程，直到今天一切都很好，我一直在尝试admob，首先我按照教程，我的应用程序崩溃了java和xml添加admob的方式。然后我按照 admob.com 上的说明进行操作。有谁知道如何解决这个问题？我是 OOP（Java/Android）的新手。

这是错误日志：

03-01 20:02:06.910: E/AndroidRuntime(4670): <-- 所有行都以此开头。

```
FATAL EXCEPTION: main
java.lang.NoClassDefFoundError: com.google.ads.AdView
at com.example.myfirstapp.Data.onCreate(Data.java:31)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
at android.app.ActivityThread.access$1500(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3835)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method) 
```

数据.java：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RelativeLayout;
import android.widget.TextView;

import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

public class Data extends Activity implements OnClickListener {

    private AdView ad;
    Button start, startFor;
    EditText sendET;
    TextView gotAnswer;
    RelativeLayout rl;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.get);
        initialize();
        ad = new AdView(this, AdSize.BANNER, "a151303d6f29c9c");
        rl = (RelativeLayout) findViewById(R.id.relLayout);
        rl.addView(ad);
        ad.loadAd(new AdRequest());

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        if (ad != null) {
            ad.destroy();
        }
        super.onDestroy();
    }

    private void initialize() {
        // TODO Auto-generated method stub
        start = (Button) findViewById(R.id.bSA);
        startFor = (Button) findViewById(R.id.bSAFR);
        sendET = (EditText) findViewById(R.id.etSend);
        gotAnswer = (TextView) findViewById(R.id.tvGot);
        start.setOnClickListener(this);
        startFor.setOnClickListener(this);

    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        switch (arg0.getId()) {
        case R.id.bSA:
            String bread = sendET.getText().toString();
            Bundle basket = new Bundle();
            basket.putString("key", bread);
            Intent a = new Intent(Data.this, OpenedClass.class);
            a.putExtras(basket);
            startActivity(a);
            break;
        case R.id.bSAFR:
            Intent i = new Intent(Data.this, OpenedClass.class);
            startActivityForResult(i, 0);
            break;
        }

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK) {
            Bundle basket = data.getExtras();
            String s = basket.getString("answer");
            gotAnswer.setText(s);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T04:35:31.437

我的猜测是您的 Android 项目没有正确配置，因为 AdView 类似乎在编译时存在，但在运行时不存在，这表明该项目确实引用了 Admob 库但打包的应用程序（apk）没有。现在，由于您的问题不包括有关您正在使用的开发环境的信息，因此我无法为您提供解决问题的具体说明。

当然，如果您可以发布 Data.java 代码，至少是 onCreate() 方法以查看您在第 31 行所做的事情，这也会有所帮助。

# sql - 限制为 OR 语句之一选择的最大行数

> ID：15153608
> 
> 赞同：0
> 
> 时间：2013-03-01T08:37:12.053
> 
> 标签：sql, conditional-statements

我正在尝试从具有多个 OR 条件的 SQL 数据表中获取一些数据。假设我在名为 products 的表中有 10 行。

我的查询

```
SELECT * FROM products 
WHERE product_name = 'nice' OR
product_second_name = 'pretty'
LIMIT 10 
```

如果表中包含 10 个名为“nice”的产品，有没有办法选择 5 个满足第一个条件的产品和另一个 5 个满足第二个条件的产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:41:10.740

您需要使用 UNION 执行 2 个单独的查询：

```
(SELECT * FROM products 
WHERE product_second_name = 'pretty'
LIMIT 10)
UNION
(SELECT * FROM products 
WHERE product_name = 'nice'
LIMIT 5) 
```

但是，您必须通过 DISTINCT 或其他一些机制来区分重复项。您必须定义如果 product_name 很好并且 product_second_name 很漂亮会发生什么（在您的原始查询中，该产品会出现一次）

# audio - .ogg 文件在我的网站上不起作用

> ID：15153609
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:37:13.533
> 
> 标签：audio, iis-7, asp-classic, ogg

“.ogg”文件不会在我的网站上播放。浏览器显示 404.3 错误。它可能与服务器的配置有关。当我询问服务器管理员时，他提到了[http://blogs.iis.net/bills/archive/2008/03/25/how-to-add-mime-types-with-iis7-web-config.aspx](http://blogs.iis.net/bills/archive/2008/03/25/how-to-add-mime-types-with-iis7-web-config.aspx)。但那是一个指南，旨在。NET 用户——我的网站是用经典的 ASP 制作的。经典 ASP 中的解决方案是如何实现的 - 有可能吗？另请参阅：[https ://developer.mozilla.org/en-US/docs/Configuring_servers_for_Ogg_media](https://developer.mozilla.org/en-US/docs/Configuring_servers_for_Ogg_media)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T17:01:17.230

您需要使用 IIS 管理器，这意味着您需要远程桌面连接到您的服务器，或者您需要让您的服务器管理员为您执行此操作。

无论哪种方式，有关如何添加 mime 类型的说明都在这里

[http://technet.microsoft.com/en-us/library/cc725608(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc725608(v=ws.10).aspx)

# sass - 在命令行上提供 sass 变量定义

> ID：15153613
> 
> 赞同：2
> 
> 时间：2013-03-01T08:37:31.823
> 
> 标签：sass

是否有一种标准或简单的方法可以在命令行上定义 sass 变量，或者从环境中传递它们？我正在做的是尝试从单个 SCSS 源文件创建不同的 CSS 文件。每个输出文件都将专门用于特定的目标设备，并包含在带有媒体查询的 HTML 页面中。

更新：看起来这可能还不够。该`@if`语法实际上不允许有条件的 sass 块，只允许有条件的 CSS 块。这意味着即使我可以定义一个变量，它也不允许我在文件中进行不同的处理。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-30T10:39:35.120

使用[SASS 自定义函数](http://sass-lang.com/documentation/Sass/Script/Functions.html)。下面是一个完整的工作示例。

样式.sass：

```
$primary_color: getenv("SASS_VAR_PRIMARY_COLOR", white)

body
    background: $primary_color 
```

sass_functions.rb：

```
module Sass::Script::Functions
    def getenv(name, default)
        assert_type name, :String
        value = ENV.fetch(name.value, nil)
        if not value
            return default
        end
        begin
            Sass::Script::Parser.parse(value, 0, 0)
        rescue
            Sass::Script::String.new(value)
        end
    end
end 
```

命令行：

```
SASS_VAR_PRIMARY_COLOR='#123456' sass -r ./sass_functions.rb styles.sass styles.css 
```

如果你使用 Compass，你可以`module Sass::Script::Functions`直接放入 config.rb 并编译样式：

```
SASS_VAR_PRIMARY_COLOR='#123456' sass --compass styles.sass styles.css 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:21:54.273

我需要的设施根本不在 SASS 中。即使您可以在命令行上定义变量，“if”工具也不足以在样式表中实际执行条件块。

相反，我使用了 M4 的旧备用设备。我只是用 M4 预处理 SASS，执行命令行选项和完整的条件块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-07T09:33:07.793

我找不到从命令行指定 sass 变量的方法，但您可以通过创建多个导入基本 SCSS 文件的专用 SCSS 文件来模仿这种行为。

例如：

```
// base_style.scss
@debug "* Format = #{$format} *";
@if $format == 1
{
  $body-font-family: "Palatino" !global;
}
@else if $format == 2
{
  $body-font-family: "Arial" !global;
}
@else
{
  @warn "Undefined format";
}
body
{
  font-family: $body-font-family;
} 
```

```
// style_1.scss
$format: 1;
@import "base_style.scss"; 
```

```
// style_2.scss
$format: 2;
@import "base_style.scss"; 
```

然后从命令行：

```
sass style_1.scss style_1.css
sass style_2.scss style_2.css 
```

请注意，您还可以在一个 (S)CSS 文件中为不同的目标媒体指定规则，其中包含不同的媒体查询。在这种情况下，您只需要一个源文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T15:02:57.450

我很确定我明白你在说什么。有时最好将内容组合在一个 .scss 文件中，该文件最终会出现在条件样式表中，这样您就可以更轻松地找到它们。

目前，仍然无法将 sass 样式表编译到单独的样式表中，而无需将所有条件规则分组到一个部分中。

但是，使用 Paul Irish 的建议有条件地将类名添加到 html 标记： http: [//paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

```
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]--> 
```

你可以这样做：

```
.something {
    regular rules...

    .ie8 & {
         conditional rules...
    }
} 
```

这样，您仍然可以拥有组织和条件样式。我希望这有帮助！

# c - 定义要在多个源文件中使用的全局变量

> ID：15153615
> 
> 赞同：2
> 
> 时间：2013-03-01T08:37:35.027
> 
> 标签：c, header-files

我有一个打算在多个文件中使用的变量，它是一个互斥初始化器。

所以我在一个头文件中写了这个：

```
#ifndef LISTEN_H_
#define LISTEN_H_

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

#endif 
```

我试图将标题包含在我打算使用该变量的文件中。

但我得到：错误互斥锁已经在这里声明。

在多个头文件中使用全局变量的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T08:38:47.200

正确的方法是在文件中**定义它并`.c`****在头文件****中**声明**它`extern`**。现在您可以在任何您想使用它的地方使用它，而不会出现错误。

# database - 在 Prestashop 中验证关于数据库的订单

> ID：15153616
> 
> 赞同：1
> 
> 时间：2013-03-01T08:37:43.233
> 
> 标签：database, prestashop

我目前希望在 Prestashop 中验证我的订单。实际上，对于模块的需要，我不使用文件*PaymentModule.php中的**validateOrder()函数*

 *通过手动操作，订单流程正常（状态为“已接受付款”），但我的订单未经过验证。

在数据库中，关于订单流程填写了哪些表？我想在数据库中检查我的结果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:02:35.810

当在 Prestashop 下订单时，数据会输入到几个数据库表中。

1) **ps_orders** : 有关于订单的数据，如购物车 ID、客户 ID、地址 ID、下订单的语言、用于支付的模块和总订单金额等。

2) **ps_order_detail**：此表包含特定订单的所有产品。

3) **ps_order_history** : 该表有订单状态历史。每当更改订单状态时，都会在此处输入一个条目。

以上是最常用的表格。请注意，在特定的 prestashop 版本中，可能会使用一些额外的表（新版本可能会添加新表），因此您应该检查以 order_ 等开头的数据库表。

您也可以通过下一个普通订单来验证它，然后通过获取它的 id，您可以检查哪些数据放置在哪些表中。然后在您的模块中，您可以在该特定表格中输入订单的数据。希望这会有所帮助。

谢谢*

# mysql - 查询 MySQL 数据库

> ID：15153620
> 
> 赞同：1
> 
> 时间：2013-03-01T08:37:47.697
> 
> 标签：mysql, phpmyadmin

有人可以帮我在此查询中添加第三个表，其中包含疾病的风险因素。该表是 tblRiskFactors

```
SELECT tblDiseases.disease
FROM tblRel 
   LEFT JOIN tblDiseases ON tblRel.diseaseID = tblDiseases.diseaseID
WHERE tblRel.symptomID = '1' AND tblRel.symptomID = '2' AND tblRel.symptomID ='3' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:44:26.347

```
SELECT  tblDiseases.disease
FROM    tblRel 
        LEFT JOIN tblDiseases 
            ON tblRel.diseaseID = tblDiseases.diseaseID
        LEFT JOIN tblRiskFactors
            ON -- define the linking condition here
WHERE   tblRel.symptomID = '1' AND 
        tblRel.symptomID = '2' AND 
        tblRel.symptomID = '3' 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:47:42.147

```
SELECT tblDiseases.disease as disease 
FROM tblRel 
   LEFT JOIN tblDiseases ON tblRel.diseaseID = tblDiseases.diseaseID
   LEFT JOIN tblRiskFactors ON tblRel.relation_column = tblRiskFactors.relation_column
WHERE tblRel.symptomID in (1,2,3) 
```

# bash - 使用终端从 iOS 模拟器中删除应用程序

> ID：15153623
> 
> 赞同：0
> 
> 时间：2013-03-01T08:38:07.487
> 
> 标签：bash, unix, terminal

我尝试使用在我们的构建服务器上运行的此脚本从 iOS 模拟器中删除应用程序

```
#!/bin/Bash

#Go to iOS Sim
cd ~/Library/Application\ Support/iPhone\ Simulator

#Loop through each Version of iOS
for dir in ~/Library/Application\ Support/iPhone\ Simulator/*/
do
    dir=${dir%*/}
    cd "$dir"

    #Check if the iOS version has any apps installed                    
    if [ -d "$dir/Applications" ]; then
        echo Applications folder exists in "$dir"
        cd "$dir/Applications"

        #Delete each app
        for app in "$dir/Application/*/"
        do
            echo $app

            if [ "${#app}" -eq 36 ]; then   
                echo Delete Folder
            fi
        done

    fi
done 
```

我卡在`#Delete each`应用程序部分。我想遍历 Applications 文件夹并首先检查文件夹的字符数是否为 36（GUID）然后删除该文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:05:02.970

如果你有一个`*`引号，bash 将按字面意思解释它，而不是作为一个 glob。您可以将 for 更改为此：

```
 for app in "$dir"/Application/*/ 
```

当然你已经进入了目录，所以

```
for app in */ 
```

可能是你想做的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:42:58.933

我只想使用你手头的众多（和很棒的）实用程序来处理这类事情。你可以使用类似的东西

```
LENGTH=`echo $app | wc -c`
if [[ $LENGTH -eq 36 ]]; then
  # do the thing
fi 
```

注意：这里的神奇之处在于使用反引号和 wc（wordcount）实用程序。当您查看 wc 的手册页时，还可以查看 tr（仅部分相关，但另一个很好的了解工具）。

# xml - 如何在 servlet 中设置 url 模式

> ID：15153627
> 
> 赞同：1
> 
> 时间：2013-03-01T08:38:40.927
> 
> 标签：xml, gwt

我通过创建新的 GWT 项目在 eclipse IDE 中尝试了相同的示例，它工作正常，但是当我尝试将相同的概念发布到我的项目中时它不起作用，它返回以下错误

**“类型状态报告消息/cce/web/core/描述请求的资源（/cce/web/core/）不可用。”**

1.  我设置`@RemoteServiceRelativePath("marquee")`
2.  在 *.gwt.xml 文件模块重命名-设置为`<module rename-to="core">`
3.  在 web.xml 中

    ```
    <servlet-mapping>
      <servlet-name>marqueeServlet</servlet-name>
      <url-pattern>/core/marquee</url-pattern>
    </servlet-mapping> 
    ```

我必须做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:06:06.470

不要将 servlet 重新映射到模块。

```
<servlet-mapping>
  <servlet-name>marqueeServlet</servlet-name>
  <url-pattern>/marquee</url-pattern>
</servlet-mapping> 
```

像 www.whatever.com/marquee 一样访问它

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T09:55:50.743

您是否为服务接口创建了异步接口？

# asp.net-mvc - MVC Html 帮助器使标签可编辑

> ID：15153631
> 
> 赞同：0
> 
> 时间：2013-03-01T08:39:03.267
> 
> 标签：asp.net-mvc, gridview, html-helper

我在我的视图中生成了一个 html 表，有没有人知道我可以使用的任何可用助手，以便可以在线编辑其中一个字段。

看法：

```
 <table>
  <caption>Configuration values for current management group</caption>
    <thead>
      <tr>
        <th scope="col">Device Type</th>
        <th scope="col">Section</th>
        <th scope="col">Name</th>
        <th scope="col">Value</th>
        <th scope="col">Operation</th>
      </tr>
    </thead>
    <tbody>
    @foreach (var param in Model.ParamData)
    {
      <tr>
        <td>@param.DeviceType</td>
        <td>@param.Group</td>
        <td>@param.Name</td>
        <td>@param.Value</td>
        <td>@(param.IsMerge ? "Merge" : "Delete")</td>
      </tr>
    }
    </tbody>
  </table> 
```

正如您所看到的，这里没有什么特别之处，我想要一个编辑列，它的工作方式与 Web 表单网格视图类似。唯一要编辑的字段是值，它总是一个文本框。

我确定人们以前一定做过这个，但我在网上看到的唯一例子是 mvc 1。

我可以使用 jquery 敲出一些东西，但我确信已经有很多示例并且不想重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:14:52.767

我自己做了，如果有人感兴趣：

```
 @foreach (var param in Model.ParamData)
    {
      <tr>
        <td>@param.DeviceType</td>
        <td>@param.Group</td>
        <td>@param.Name</td>
        <td>
        <div class="@("ViewValueDiv_" + param.ParamaterValueId)">
          @param.Value
        </div>
        <div class="@("EditValueDiv_" + param.ParamaterValueId)" style="display:none;">
         <input type="text" name="@("EditValue_" + param.ParamaterValueId)" value="@param.Value" class="@("Input_" + param.ParamaterValueId)" />
        </div>
        </td>
        <td>@(param.IsMerge ? "Merge" : "Delete")</td>
        <td>
        <div class="@("EditButtonDiv_" + param.ParamaterValueId)">
          <input type="button" value="Edit" class="EditButton" Id="@param.ParamaterValueId" />
        </div>
        <div class="@("UpdateCancelButtonDiv_" + param.ParamaterValueId)" style="display:none;">
          <input type="button" value="Update" class="UpdateButton" id="@("U" + param.ParamaterValueId)"  />
          <input type="button" value="Cancel" class="CancelButton" id="@("C" + param.ParamaterValueId)"  />
        </div>
        </td>
      </tr>
    }

$(document).ready(function () {
  $(".EditButton").click(function () {
    var id = $(this).attr('id');
    $(".ViewValueDiv_" + id).hide();
    $(".EditValueDiv_" + id).show();
    $(".EditButtonDiv_" + id).hide();
    $(".UpdateCancelButtonDiv_" + id).show();
    oldvalue = $(".Input_" + id).val();
  });

  $(".CancelButton").click(function () {
    var id = $(this).attr('id').substr($(this).attr('id').indexOf("C") + 1);
    $(".ViewValueDiv_" + id).show();
    $(".EditValueDiv_" + id).hide();
    $(".EditButtonDiv_" + id).show();
    $(".UpdateCancelButtonDiv_" + id).hide();
    $(".Input_" + id).val(oldvalue);
  });

  $(".UpdateButton").click(function () {
    var id = $(this).attr('id').substr($(this).attr('id').indexOf("U") + 1);

    NewValue = $(".Input_" + id).val();

    if (NewValue) {

      $.ajax({
        url: "/Terminals_configuration/UpdateConfigValue",
        data: { valueId: id, newValue: NewValue },
        dataType: "json",
        type: "POST",
        error: function () {
          alert("An error occurred.");
        },
        success: function (data) {
          $(".ViewValueDiv_" + id).show();
          $(".EditValueDiv_" + id).hide();
          $(".EditButtonDiv_" + id).show();
          $(".UpdateCancelButtonDiv_" + id).hide();
          $(".ViewValueDiv_" + id).html(NewValue);
        }
      });
    } else {
      alert("You didn't supply a new value");
    }

  });
}); 
```

# sql - 不同名称的备份数据库与时间相关

> ID：15153632
> 
> 赞同：0
> 
> 时间：2013-03-01T08:39:03.430
> 
> 标签：sql, backup, agent, declare

我的代码，用于 SQL Server 2008 上的代理作业，生成备份文件，但每次触发代理的作业时它都会覆盖第一个 bak 文件！！？

# 我如何使用不同的名称进行备份与时间相关

例如：testDB201313328.bak 并在 1 分钟后创建名称为：testDB201313329.bak 的文件

# 而是覆盖第一个

```
USE msdb ;
GO

DECLARE @fileName VARCHAR(90);

DECLARE @db_name VARCHAR(20);

DECLARE @fileDate VARCHAR(20);

DECLARE @commandtxt VARCHAR(100);

SET @fileName = 'C:\Test_Backups\'; 

SET @db_name = 'testDB';    

SET @fileDate = CONVERT(VARCHAR(8), GETDATE(),112) + convert (varchar(4),DATEPART(HOUR, GETDATE())) + convert ( varchar(4) ,DATEPART(MINUTE, GETDATE())) + convert ( varchar(4) ,DATEPART(SECOND, GETDATE()));

SET @fileName = @fileName + @db_name + RTRIM(@fileDate) + '.bak';

SET @commandtxt = 'BACKUP LOG testDB TO DISK =''' + @fileName + ''' WITH INIT'

-- add a job

EXEC dbo.sp_add_job 
@job_name = N'LogBackup',
@description =N'Log Backup on weekdays every 15 minutes from 8am till 6pm' ;

-- add job steps to job
EXEC sp_add_jobstep
@job_name = N'LogBackup',
@step_name = N'Weekdays_Log_Backup',
@subsystem = N'TSQL',
@command = @commandtxt ,
@on_success_action = 1,
@retry_attempts = 5,
@retry_interval = 1 ;
GO 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:18:18.740

首先，备份可以包含多个备份集，所以您确定要覆盖它而不是在同一个文件中附加另一个集吗？否则，您需要将一天中的时间添加到您的文件名中。希望这可以帮助。此外，如果它只有一个或两个 db，那么有一个优秀的（免费有限使用）应用程序，谷歌 SQLBackupAndFTP HTH

# wpf - devexpress wpf gridcontrol 禁用上下文菜单

> ID：15153637
> 
> 赞同：1
> 
> 时间：2013-03-01T08:39:27.953
> 
> 标签：wpf, devexpress, gridcontrol

我有一个**DevExpress 网格控件**，我想禁用右键单击网格列标题时出现的默认上下文菜单。要禁用此功能，我处理了`PreviewMouseRightButtonDown`和`PreviewMouseRightButtonUp`

```
private void UserControl_PreviewMouseRightButtonDown_Up(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            e.Handled = true;
        } 
```

这不是一个可接受的解决方案。网格控制上应该有一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:54:31.427

请设置[TableView.IsColumnMenuEnabled](http://help.devexpress.com/#WPF/DevExpressXpfGridDataViewBase_IsColumnMenuEnabledtopic)属性来控制最终用户右键单击列标题时是否显示列上下文菜单。
您可以在此处阅读有关所有可用 DXGrid 上下文菜单及其自定义的更多信息：[上下文菜单](http://help.devexpress.com/#WPF/CustomDocument6587)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:14:17.100

在 TableView 上设置 IsColumnMenuEnabled="False"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T08:40:44.383

如果要禁用特定的上下文菜单项，可以通过绑定来管理它

```
 <dxb:BarButtonItem Name="contexMenuTransmitPendingClaim"
                                                       Command="{Binding Path=(dxb:GridPopupMenuBase.GridMenuInfo).View.DataContext.TransmitPendingClaimCommand,
                                                                         RelativeSource={RelativeSource Self}}"
                                                       Content="Transmit Pending Claim"
                                                       IsEnabled="{Binding Path=(dxb:GridPopupMenuBase.GridMenuInfo).View.DataContext.SelectedCusHisViewRefillHistory.IsPendingClaimsActive,
                                                                           RelativeSource={RelativeSource Self},
                                                                           Mode=TwoWay,
                                                                           UpdateSourceTrigger=PropertyChanged}"/> 
```

# c# - asp.net MVC 4中的HttpPost

> ID：15153639
> 
> 赞同：3
> 
> 时间：2013-03-01T08:39:33.803
> 
> 标签：c#, asp.net-mvc, json

我正在日历应用程序上测试推送通知。当我在日历应用程序上创建事件时，我的网站会收到一个带有 JSON 字符串的 HttpPost 请求。我编写了这样的代码，但我无法在我的操作方法中接收 JSON 字符串。

```
 [HttpPost]
       public ActionResult Push(String jsonReq)
       {
         Console.write(jsonReq);
         return View();
       } 
```

当我以与 JSON 相同的结构创建模型时，我可以接收请求。它似乎与 JSON 结构紧密耦合？我在 ASP.Net MVC 4 中使用。

```
 [HttpPost]
    public ActionResult Push(JSONModel jsonModel)
    {

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T08:50:23.497

ASP.NET MVC 模型绑定以下列方式工作 - 它解析请求，尝试在其参数和 Action 参数之间找到名称到名称对应的名称，如果找到则实例化后者。您没有发送带有 name 的参数`jsonReq`，因此您无法在操作方法中接收到某些内容。

如果您真的想在不让 ASP.NET MVC 为您解析的情况下使用 plan json 字符串，您有两种选择：

1.  通过`HttpContext.Request`内部操作访问它
2.  编写自定义模型绑定器，将请求主体映射到`jsonReq`参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:44:15.147

该请求将没有名为 jsonReq 的值，因此不知道将 json 映射到该操作参数。

因为您的 JSONModel 将具有与进入请求的 JSON 命名值相匹配的属性名称，因此我们填充了该对象。

# unix - NA 行的最大值——unix

> ID：15153642
> 
> 赞同：0
> 
> 时间：2013-03-01T08:39:55.913
> 
> 标签：unix, awk, row, max

我有一组`.csv`已知列数的文件，其中包含`NA`条目和值。

我想得到每一行的最大值，然后计算所有最大值的平均值。

输入文件：

```
"V1","V2","V3"
10,15,20
20,NA,5
NA,NA,NA
10,5,6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:45:53.453

最大值：

```
# Display 0 for NA rows
awk -F, 'NR>1{a=0;for(i=1;i<=NF;i++)if($i>a&&$i!="NA")a=$i;print a}' file
20
20
0
10

# Display nothing for NA rows 
awk -F, 'NR>1&&/[0-9]/{a=0;for(i=1;i<=NF;i++)if($i>a&&$i!="NA")a=$i;print a}' file
20
20
10 
```

平均：

```
# Counting NA rows 
awk -F, 'NR>1{a=0;for(i=1;i<=NF;i++)if($i>a&&$i!="NA")a=$i;s+=a;print a}END{print s/(NR-1)}' file
20
20
0
10
12.5

# Ignoring NA rows
awk -F, 'NR>1&&/[0-9]/{a=0;for(i=1;i<=NF;i++)if($i>a&&$i!="NA")a=$i;s+=a;c++;print a}END{print s/c}' file
20
20
10
16.6667 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:14:35.400

```
awk '{max=0;for(i=1;i<=NF;i++)if($i!~/NA/&&$i>max){max=$i;}count+=max;print max}END{print count/NR}' your_file 
```

测试如下：

```
>cat temp
10 15 20
20 NA 5
NA NA NA
10 5 6
> awk '{max=0;for(i=1;i<=NF;i++)if($i!~/NA/&&$i>max){max=$i;}count+=max;print max}END{print count/NR}' temp
20
20
0
10
12.5
> 
```

# android - 在android的弹出窗口中设置自定义布局

> ID：15153651
> 
> 赞同：22
> 
> 时间：2013-03-01T08:40:39.533
> 
> 标签：android, android-layout

我有弹出窗口的问题。我想用我自己的布局创建弹出窗口。这是代码：

```
public class PopupWindowView extends PopupWindow{

    PopupWindow popup;
    boolean click = true;
    LayoutParams params;
    RelativeLayout mainLayout;
    TextView tv;
    LinearLayout layout;
    ImageView chooseFlag;

    public void createPopupWindow(Activity act){
        popup = new PopupWindow(act);
        chooseFlag = (ImageView) act.findViewById(R.id.login_choose_flag);
        mainLayout = (RelativeLayout) act.findViewById(R.id.login_layout);
        tv = new TextView(act);
        layout = new LinearLayout(act);
        //layout = (LinearLayout) findViewById(R.id.popuplayout);
        chooseFlag.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (click) {
                    int[] values = new int[2]; 
                    v.getLocationOnScreen(values);
                    popup.showAtLocation(mainLayout, Gravity.NO_GRAVITY, 10, 10);
                    popup.update(values[0], values[1], 300, 80);
                    click = false;
                } else {
                    popup.dismiss();
                    click = true;
                }
            }
        });
        params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT);
        layout.setOrientation(LinearLayout.VERTICAL);
        tv.setText("Hi this is a sample text for popup window");
        layout.addView(tv, params);
        popup.setContentView(layout);
    }
} 
```

这是我想在弹出窗口中设置的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
   >

    <LinearLayout
        android:id="@+id/popuplayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:background="@color/patient_button_bg">
    </LinearLayout>

</LinearLayout> 
```

在我的课堂上我不能使用`findbyid`方法，因为这不是活动。如何在班级的弹出窗口中设置自己的布局？

编辑：这是我得到错误的堆栈跟踪：

```
03-01 09:48:48.761: E/AndroidRuntime(16776): FATAL EXCEPTION: main
03-01 09:48:48.761: E/AndroidRuntime(16776): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3337)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.view.ViewGroup.addView(ViewGroup.java:3208)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.view.ViewGroup.addView(ViewGroup.java:3188)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.widget.PopupWindow.preparePopup(PopupWindow.java:969)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.widget.PopupWindow.showAtLocation(PopupWindow.java:840)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.widget.PopupWindow.showAtLocation(PopupWindow.java:813)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at pl.asseco.amms.mobile.tools.PopupWindowView$1.onClick(PopupWindowView.java:44)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.view.View.performClick(View.java:3558)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.view.View$PerformClick.run(View.java:14152)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.os.Handler.handleCallback(Handler.java:605)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.os.Looper.loop(Looper.java:137)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at android.app.ActivityThread.main(ActivityThread.java:4514)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at java.lang.reflect.Method.invokeNative(Native Method)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at java.lang.reflect.Method.invoke(Method.java:511)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
03-01 09:48:48.761: E/AndroidRuntime(16776):    at dalvik.system.NativeStart.main(Native Method) 
```

编辑使用弹出窗口的活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
    getActionBar().hide();

    mainMenuGenerator = new MainMenuGenerator();
    mainMenuGenerator.generateMainMenu(this);
    mainMenuGenerator.hideIcons();
    popup = new PopupWindowView();

    popup.createPopupWindow(this);

} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-01T08:46:28.840

试试这个代码：

```
private void showSortPopup(final Activity context, Point p) 
{
       // Inflate the popup_layout.xml
       LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.llSortChangePopup);
       LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       View layout = layoutInflater.inflate(R.layout.sort_popup_layout, viewGroup);

       // Creating the PopupWindow
       changeSortPopUp = new PopupWindow(context);
       changeSortPopUp.setContentView(layout);
       changeSortPopUp.setWidth(LinearLayout.LayoutParams.WRAP_CONTENT);
       changeSortPopUp.setHeight(LinearLayout.LayoutParams.WRAP_CONTENT);
       changeSortPopUp.setFocusable(true);

       // Some offset to align the popup a bit to the left, and a bit down, relative to button's position.
       int OFFSET_X = -20;
       int OFFSET_Y = 95;

       // Clear the default translucent background
       changeSortPopUp.setBackgroundDrawable(new BitmapDrawable());

       // Displaying the popup at the specified location, + offsets.
       changeSortPopUp.showAtLocation(layout, Gravity.NO_GRAVITY, p.x + OFFSET_X, p.y + OFFSET_Y);

       // Getting a reference to Close button, and close the popup when clicked.
       Button close = (Button) layout.findViewById(R.id.close);
       close.setOnClickListener(new OnClickListener() {

         @Override
         public void onClick(View v) {
           changeSortPopUp.dismiss();
         }
       });

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T11:30:56.950

您可以使用以下代码。您需要为此使用 PopupWindow。

```
PopupWindow mpopup; 
```

那么你需要夸大你的观点。

```
 View popUpView = getLayoutInflater().inflate(R.layout.activity_login,
            null); // inflating popup layout
    mpopup = new PopupWindow(popUpView, LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT, true); // Creation of popup
    mpopup.setAnimationStyle(android.R.style.Animation_Dialog);
    mpopup.showAtLocation(popUpView, Gravity.CENTER, 0, 0); // Displaying popup 
```

如果您的布局有一些项目，那么您需要将该项目与您的视图绑定。

```
 TextView some = (TextView) popUpView.findViewById(R.id.some);       
    Button btnCancel = (Button) popUpView.findViewById(R.id.btnCancel); 
```

弹出窗口项的 onClickListener。

```
 btnCancel.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            mpopup.dismiss();
        }
    }); 
```

您可以使用关闭 PopupWindow`mpopup.dismiss();`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-01T08:46:25.767

您可以使用`LayoutInflater`

```
LayoutInflater inflater = (LayoutInflater) act.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.custom_layout, null); //custom_layout is your xml file which contains popuplayout
LinearLayout layout = (LinearLayout) view.findViewById(R.id.popuplayout); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-03T03:56:16.203

试试这个......

```
public void popUpWindow() {
    final Dialog dialog = new Dialog(MainActivity.this);
    dialog.setContentView(R.layout.client_details);
    dialog.setTitle("Client Details");
    dialog.show();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T08:44:28.933

嗨，检查这篇**[文章](https://stackoverflow.com/questions/7498605/how-to-create-a-popup-window-in-android)**包含解决您的问题

试试这个代码：

```
public class ShowPopUp extends Activity {

PopupWindow popUp;
LinearLayout layout;
TextView tv;
LayoutParams params;
LinearLayout mainLayout;
Button but;
boolean click = true;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    popUp = new PopupWindow(this);
    layout = new LinearLayout(this);
    mainLayout = new LinearLayout(this);
    tv = new TextView(this);
    but = new Button(this);
    but.setText("Click Me");
    but.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if (click) {
                popUp.showAtLocation(mainLayout, Gravity.BOTTOM, 10, 10);
                popUp.update(50, 50, 300, 80);
                click = false;
            } else {
                popUp.dismiss();
                click = true;
            }
        }

    });
    params = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);
    layout.setOrientation(LinearLayout.VERTICAL);
    tv.setText("Hi this is a sample text for popup window");
    layout.addView(tv, params);
    popUp.setContentView(layout);
    // popUp.showAtLocation(layout, Gravity.BOTTOM, 10, 10);
     mainLayout.addView(but, params);
     setContentView(mainLayout);
   }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-31T08:08:13.010

```
 alert=(Button)findViewById(R.id.click);
    detail=(ImageView)findViewById(R.id.goDetail);

    alert.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // custom dialog

            final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.custom);
            dialog.setTitle(Html.fromHtml("<font color='#EC407A'>About</font>"));
            Button dialogButton = (Button) dialog.findViewById(R.id.dialogOK);
            ImageView img = (ImageView) dialog.findViewById(R.id.goDetail);
            // if button is clicked, close the custom dialog
            dialogButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    dialog.dismiss();
                    Toast.makeText(getApplicationContext(),"Dismissed..!!",Toast.LENGTH_SHORT).show();
                }
            });
            img.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    i=new Intent(getApplication(),CustomDetail.class);
                    setIntent(i);
                    Toast.makeText(Dashboard.this, "Check detail ", Toast.LENGTH_SHORT).show();
                }
            });
            dialog.show();
        } 
```

# php - Twilio：响应应用程序链接不起作用

> ID：15153652
> 
> 赞同：0
> 
> 时间：2013-03-01T08:40:39.687
> 
> 标签：php

我正在取消 Twilio Rest Api 的 SMS 功能。我的短信发送成功问题是当用户响应短信时，我必须在我的应用程序中捕获该响应并向用户发送确认电子邮件

我无法从应用程序 URL 捕获响应。请给我一些想法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-25T23:34:07.343

[PHP](https://support.twilio.com/hc/en-us/articles/223134267-Building-an-SMS-Keyword-Response-Application)中的示例应用程序展示了如何根据传入文本消息的正文构建关键字响应。

需要注意的重要一点是获取消息的[`Body`请求参数](https://www.twilio.com/docs/api/twiml/sms/twilio_request#synchronous)，这很简单：

```
/* Read the contents of the `'Body'` field of the Request. */ 

$body = $_REQUEST['Body']; 
```

而不是'fromBody'。

# wso2 - XACML 政策 - 是否正确？

> ID：15153654
> 
> 赞同：3
> 
> 时间：2013-03-01T08:41:03.080
> 
> 标签：wso2, xacml, xacml3

我对与 WSO2 Balana 库一起使用的 XACML 策略有疑问。

有政策：

```
<Policy xmlns="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17" PolicyId="Policy1" RuleCombiningAlgId="urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:first-applicable" Version="1.0">
    <Target>
        <AnyOf>
            <AllOf>
                <Match MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
                    <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">MyApp</AttributeValue>
                    <AttributeDesignator AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id" 
                                    Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource" DataType="http://www.w3.org/2001/XMLSchema#string" MustBePresent="true"/>
                </Match>            
            </AllOf>
        </AnyOf>
    </Target>
    <Rule Effect="Permit" RuleId="RuleFor_user1_myapp">
        <Target>
            <AnyOf>
                <AllOf>
                    <Match MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
                        <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">user1</AttributeValue>
                        <AttributeDesignator AttributeId="http://example.site.com/id/user" 
                                       Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject" 
                                       DataType="http://www.w3.org/2001/XMLSchema#string" MustBePresent="true"/>
                    </Match>
                </AllOf>           
            </AnyOf>
        </Target>
        <Apply  FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-at-least-one-member-of">
            <Apply FunctionId="urn:oasis:names:tc:xacml:1.0:function:string-bag">
                <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">READ</AttributeValue>                                
            </Apply>
            <AttributeDesignator AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id" Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action" DataType="http://www.w3.org/2001/XMLSchema#string" MustBePresent="true"/>
        </Apply>
    </Rule>   
</Policy> 
```

它应该定义 user1 在 MyApp 上只有 READ 权限。

我有一个评估请求，询问 user1 是否具有 READ 权限，并且我在响应中得到“Permit”，这没关系。

但是，当我请求评估哪个询问 user1 是否具有 WRITE 权限时，我也会得到“Permit”，而不是“Not applicable”。

有人能告诉我，产生我刚才描述的结果的政策是否正确？

先感谢您！

最好的问候， Jurica Krizanic

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:03:44.703

首先，Policy 不是 XACML3 模式的有效策略。您需要在规则中包含由 Apply 元素包围的元素。Rule 基本上包含 Target 和 Condition 元素。Balana 没有对您的策略进行模式验证。它使用策略元素构建对象模块。由于它在规则中找不到元素，因此它忽略了您的元素。所以你的规则实际上只有目标元素，它只评估主题属性。请按以下方式使用。此外，当您将策略上传到 WSO2 身份服务器时，它会进行架构验证。您可以轻松地上传或创建策略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T04:34:17.370

您可以使用[http://validator.xacml.eu/](http://validator.xacml.eu/)来验证您的 XACML 策略是否符合 XACML 2.0 或 XACML 3.0。

另外，我建议您使用 ALFA 来编写策略 - 它更容易并且与 Eclipse 集成。

ALFA 代码如下所示：

```
namespace sample{
    // Import standard XACML attributes
    import Attributes.*

    /**
     * Define custom attributes here
     */
    attribute user{
        category = subjectCat
        id = "http://example.site.com/id/user"
        type = string
    }

    /**
     * MyApp Policy
     */
    policy Policy1{
        target clause resourceId=="MyApp"
        apply firstApplicable
        /**
         * This rule grants READ access for user 1
         */
        rule RuleFor_user1_myapp{
            target clause user=="user1" and actionId=="READ"
            permit
        }
    }
} 
```

生成的 XACML 3.0 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
 <!--This file was generated by the ALFA Plugin for Eclipse from Axiomatics AB (http://www.axiomatics.com). 
 Any modification to this file will be lost upon recompilation of the source ALFA file-->
<xacml3:Policy xmlns:xacml3="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17"
    PolicyId="http://axiomatics.com/alfa/identifier/sample.Policy1"
    RuleCombiningAlgId="urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:first-applicable"
    Version="1.0">
    <xacml3:Description>MyApp Policy</xacml3:Description>
    <xacml3:PolicyDefaults>
        <xacml3:XPathVersion>http://www.w3.org/TR/1999/REC-xpath-19991116</xacml3:XPathVersion>
    </xacml3:PolicyDefaults>
    <xacml3:Target>
        <xacml3:AnyOf>
            <xacml3:AllOf>
                <xacml3:Match MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
                    <xacml3:AttributeValue
                        DataType="http://www.w3.org/2001/XMLSchema#string">MyApp</xacml3:AttributeValue>
                    <xacml3:AttributeDesignator 
                        AttributeId="urn:oasis:names:tc:xacml:1.0:resource:resource-id"
                        DataType="http://www.w3.org/2001/XMLSchema#string"
                        Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource"
                        MustBePresent="false"
                    />
                </xacml3:Match>
            </xacml3:AllOf>
        </xacml3:AnyOf>
    </xacml3:Target>
    <xacml3:Rule 
            Effect="Permit"
            RuleId="http://axiomatics.com/alfa/identifier/sample.Policy1.RuleFor_user1_myapp">
        <xacml3:Description>This rule grants READ access for user 1</xacml3:Description>
        <xacml3:Target>
            <xacml3:AnyOf>
                <xacml3:AllOf>
                    <xacml3:Match MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
                        <xacml3:AttributeValue
                            DataType="http://www.w3.org/2001/XMLSchema#string">user1</xacml3:AttributeValue>
                        <xacml3:AttributeDesignator 
                            AttributeId="http://example.site.com/id/user"
                            DataType="http://www.w3.org/2001/XMLSchema#string"
                            Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject"
                            MustBePresent="false"
                        />
                    </xacml3:Match>
                    <xacml3:Match MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
                        <xacml3:AttributeValue
                            DataType="http://www.w3.org/2001/XMLSchema#string">READ</xacml3:AttributeValue>
                        <xacml3:AttributeDesignator 
                            AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-id"
                            DataType="http://www.w3.org/2001/XMLSchema#string"
                            Category="urn:oasis:names:tc:xacml:3.0:attribute-category:action"
                            MustBePresent="false"
                        />
                    </xacml3:Match>
                </xacml3:AllOf>
            </xacml3:AnyOf>
        </xacml3:Target>
    </xacml3:Rule>
</xacml3:Policy> 
```

# javascript - 从 google doc 电子表格发送电子邮件

> ID：15153657
> 
> 赞同：1
> 
> 时间：2013-03-01T08:41:08.643
> 
> 标签：javascript, email, google-apps-script, google-sheets

在脚本上工作以在工作完成后发送电子邮件。我添加了一篇我认为可以防止发送两次电子邮件的文章。很难弄清楚原因。

```
function sendEmail() 
{
  var sheet = SpreadsheetApp.getActiveSheet();
  var startRow = 2;
  var numRows = sheet.getLastRow();
  var EMAIL_SENT = "EMAIL_SENT";
  var dataRange = sheet.getRange(startRow, 1, numRows, 3)

  var data = dataRange.getValues();
  for (var i = 0; i < data.length; ++i) 

  {
    var row = data[i];
    var emailAddress = row[1];
    var message = "Correction Completed for " + row[2]; 
    var subject = "Correction Completed";
    var emailSent = row[9];

    if (emailSent != "EMAIL_SENT") //prevent sending duplicate messages
    {
    MailApp.sendEmail(emailAddress, subject, message);
      sheet.getRange(startRow + i, 9).setValue(EMAIL_SENT);

      SpreadsheetApp.flush();  
    }

  }

} 
```

我的想法是将 sendEmail 部分放在 if 语句中，它不会发送。但是，无论如何它仍然会发送电子邮件。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:44:32.613

你的问题是你的`var dataRange = sheet.getRange(startRow, 1, numRows, 3)`。尝试更改`3`为大于`9`，因为`var emailSent = row[9];`。阅读时`emailSent`注意阅读以前的书面状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:24:34.310

让我澄清两件事：

1.  当您使用时，`sheet.getRange(startRow + i, 9).setValue(EMAIL_SENT);`您确实在第 9 列中写入了 EMAIL-SENT 标签，因为 getRange 使用从 1 开始的列号。
2.  当您读取数组中的数据（来自工作表范围）时，该数组中的索引**从 0 开始**，这意味着您应该使用`var emailSent = row[8];`来获取相应的第 9 个值
3.  （是的，我知道我说了两件事 ;-) 该数组必须至少包含第 9 列，因此您应该使用适当的范围来阅读它：`var dataRange = sheet.getRange(startRow, 1, numRows, 9)`例如... *（但在任何情况下都不少于 9）*

希望这足够清楚。

# mysql - MySQL 数据库可以保存 103,998,960,000 条记录吗？

> ID：15153659
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:41:13.670
> 
> 标签：mysql, database

MySQL 数据库是否会保存超过 103,998,960,000 条记录，还是必须将其分布在多个数据库之间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:52:59.847

这在一定程度上取决于记录的大小。行数没有限制，但数据大小有 64 TB 的限制。

如果您在该限制范围内，并且确保您的主键不会溢出（在您的情况下假设 uint 主键不会溢出），那么您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:50:40.880

如果表大小无关紧要，您可以使用非常多的行数。来自 mysql 文档。

```
It is possible to build MySQL with large table support using 
the --with-big-tables option.

This option causes the variables that store table row counts to be declared as 
unsigned long long rather than unsigned long. This enables tables to hold up 
to approximately 1.844E+19 ((232)2) rows rather than 232 (~4.295E+09) rows. 
Previously it was necessary to pass -DBIG_TABLES to the compiler manually 
in order to enable this feature. 
```

有关更多信息[MySQL 源配置。](http://dev.mysql.com/doc/refman/5.1/en/source-configuration-options.html)

编辑：从我得到的评论中，我应该提供有关引擎方面的信息。

```
There is a limit of (232)2 (1.844E+19) rows in a MyISAM table. 
```

有关[MyISAM 引擎限制](http://dev.mysql.com/doc/refman/5.6/en/myisam-storage-engine.html)的更多信息。

```
The InnoDB internal maximum key length is 3500 bytes, but MySQL itself 
restricts this to 3072 bytes. This limit applies to the length of 
the combined index key in a multi-column index. 
```

有关[InnoDB 引擎限制](http://dev.mysql.com/doc/refman/5.6/en/innodb-restrictions.html)的更多信息。

理论上是的，但在现实生活中存在表大小和插入时间等限制。再次来自 MySQL 文档。

```
When an AUTO_INCREMENT column runs out of values, InnoDB wraps a BIGINT 
to -9223372036854775808 and BIGINT UNSIGNED to 1\. However, BIGINT values 
have 64 bits, so if you were to insert one million rows per second, it would 
still take nearly three hundred thousand years before BIGINT reached its upper bound.
With all other integer type columns, a duplicate-key error results. This is general 
MySQL behavior, similar to how MyISAM works. 
```

# groovy - Groovy 中的 Logback 配置和 Gradle/Idea 中的不同类路径

> ID：15153662
> 
> 赞同：2
> 
> 时间：2013-03-01T08:41:38.187
> 
> 标签：groovy, intellij-idea, logback

我使用 SLF4J 和 Logback 来登录 Groovy 应用程序，因此我还通过[Groovy configuration](http://logback.qos.ch/manual/groovy.html)配置 logback 。我的配置很简单，看起来像：

```
import static ch.qos.logback.classic.Level.INFO
import static ch.qos.logback.classic.Level.DEBUG

import ch.qos.logback.classic.encoder.PatternLayoutEncoder
import ch.qos.logback.core.ConsoleAppender
import ch.qos.logback.core.status.OnConsoleStatusListener

// always a good idea to add an on console status listener
statusListener(OnConsoleStatusListener)

// setting up appenders
appender('CONSOLE', ConsoleAppender) {
    encoder(PatternLayoutEncoder) {
        pattern = "%d [%thread] %-5level %logger - %msg%n"
    }
}

// setting up loggers
logger("org.apache", INFO)
root(DEBUG, ['CONSOLE']) 
```

但是，我遇到了一个问题，即`org.apache`日志消息也发生在调试级别，这不应该根据上面的配置（我还尝试更改 looger 和 root 的顺序）。我发现从 IDEA 运行应用程序时根本没有加载配置。但是当我通过命令行启动它（只是执行`gradlew run`）时，一切正常。

**问题1：**有人知道这里发生了什么吗？似乎从 IDEA 开始的类路径与从 gradlew 开始的类路径不同，并且还有另一个 logback 配置文件可用。但是IDEA中的classpath只有java和gradle依赖。在我的观点中（只是从[这里](http://logback.qos.ch/manual/configuration.html#automaticStatusPrinting)阅读）logback 应该首先寻找一个 logback.groovy，我很确定我的文件是唯一的。

[然后我尝试通过在线翻译](http://logback.qos.ch/translator/asGroovy.html)器将工作 XML 配置转换为 Groovy 。配置是一样的，但我注意到 logback 调试选项丢失了：

```
<configuration debug="true"> 
    ...
</configuration> 
```

**问题 2：**有人知道如何通过 Groovy 启用 logback 调试吗？（`debug = true`不工作）

完整的 Gradle 构建文件：

```
// Plugins
apply plugin: 'groovy'
apply plugin: 'application'
apply plugin: 'idea'

// Dependencies
configure(allprojects)
{
    ext.groovy = '2.1.0'
    ext.slf4jVersion = '1.7.2'
    ext.logbackVersion = '1.0.9'
    ext.apacheFluentHc = '4.2.3'
}

repositories {
    mavenCentral()
}

configurations {
    compile.exclude module: 'commons-logging'
}

dependencies {
    // Groovy
    compile "org.codehaus.groovy:groovy-all:${groovy}:indy"

    // Logging
    compile "org.slf4j:slf4j-api:$slf4jVersion"
    compile "ch.qos.logback:logback-classic:$logbackVersion"
    compile "org.slf4j:jcl-over-slf4j:$slf4jVersion"

    // Apache HttpClient
    compile "org.apache.httpcomponents:fluent-hc:$apacheFluentHc"
}

// Java options
sourceCompatibility = 1.7
targetCompatibility = 1.7
mainClassName = 'XXX'

// Groovy options
[compileGroovy.groovyOptions, compileTestGroovy.groovyOptions]*.with {
    fork = true
    optimizationOptions = [ indy: true, 'int': false]
    encoding = 'UTF-8'
}

// Tasks
task wrap(type:Wrapper, description:"create a gradlew") {
    gradleVersion = '1.4'   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:41:47.340

我解决**了问题 1**，`logback.groovy`只是没有找到，因此加载了默认配置。

当我在 IDEA 中执行应用程序时，我只是运行了 mainclass 而不是`gradle run`. 我从 Eclipse 习惯了这一点，Maven 和 Eclipse 的输出路径是相同的。但 IDEA 和 Gradle 并非如此。虽然 IDEA 的输出路径是`out\production\<project>`，但它是`build\classes\main`用于 Gradle 的，并且 IDEA 不会将资源复制到它的输出路径。

现在我`gradle run`在 IDEA 中使用，因此绕过了 IDEA 构建。

**问题 2**只是没有实现（Logback 1.0.11），没有用于调试的 DSL，请参阅[代码](https://github.com/qos-ch/logback/blob/master/logback-classic/src/main/groovy/ch/qos/logback/classic/gaffer/ConfigurationDelegate.groovy)。

# html - 悬停和单击时的按钮链接不同

> ID：15153664
> 
> 赞同：0
> 
> 时间：2013-03-01T08:41:48.400
> 
> 标签：html, hyperlink, hover

如何创建一个在鼠标悬停时显示 url（在浏览器状态栏上）的按钮，该按钮与单击按钮时的 url 不同。例如，请参阅[http://www.polyvore.com/bags/shop?category_id=35](http://www.polyvore.com/bags/shop?category_id=35)。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:44:23.847

您不能在按钮标签上执行此操作。

取而代之的是使用锚链接并提供了一些很棒的 CSS，因此链接看起来像按钮。如果您将看到查看源代码或在萤火虫中看到，您会看到他们使用锚链接并应用了一些样式，因此它看起来像按钮，这在今天并不是什么大不了的事。

**或者**

您需要编写 javascript 以使您能够跨浏览器设置状态栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:47:19.890

**编辑：**作者澄清他的问题后，解决方案发生了变化。

此链接将在悬停时显示“yahoo.com”，但单击时会打开“google.com”。

```
<a href="http://yahoo.com" onclick="window.location.href='http://google.com'; return false;">Link</a> 
```

关键是从“onclick”回调中返回 false - 它可以防止浏览器进一步处理事件。

# entity-framework - 使用单独的文件来维护实体框架的连接字符串

> ID：15153666
> 
> 赞同：6
> 
> 时间：2013-03-01T08:41:59.660
> 
> 标签：entity-framework, entity-framework-4, connection-string

我的 web.config 文件中当前有我的连接字符串。

是否可以将其放在单独的文件中并将实体框架指向它。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-01T09:30:01.067

我在这里找到了答案，[将 ConnectionStrings 和 mailSettings 与 web.config 分开？可能的？](https://stackoverflow.com/questions/6582970/separate-connectionstrings-and-mailsettings-from-web-config-possible)：

```
<configuration>
    <connectionStrings configSource="connections.config"/> 
</configuration> 
```

文件`connections.config`包含

```
<connectionStrings>
   <add name="name" connectionString="conn_string" providerName="System.Data.SqlClient" />
   <add name="name2" connectionString="conn_string2" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-10T16:42:43.123

以防有人偶然发现这个问题。您可以使用 configSource 将连接字符串放在单独的配置文件中，但不要期望 EF 设计器能够愉快地使用它。

每次去编辑 edmx 和“从数据库更新”它都会要求一个新的连接字符串，然后总是想把它保存回 web.config。不理想，对我来说不可行。在 EF6 和以前的版本中就是这种情况。

# c# - 并行 HTTP 连接限制是否适用于内部 Web 服务调用？

> ID：15153667
> 
> 赞同：0
> 
> 时间：2013-03-01T08:42:06.563
> 
> 标签：c#, asp.net, web-applications

我的 Web 应用程序正在调用内部 Web 服务以进行用户身份验证，这是基于每个请求的。现在，由于每个域的并行 HTTP 连接存在限制，如果它每秒处理多个请求，它会影响我的应用程序。或者此限制仅适用于基于浏览器的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:04:57.447

该限制也适用于服务器进程，尽管默认限制更高——它允许[10 个连接](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx)。

如果您需要，您仍然可以在代码中覆盖该限制

```
System.Net.ServicePointManager.DefaultConnectionLimit = 200; 
```

# android - 如何期待 Robotium 中的异常？

> ID：15153668
> 
> 赞同：1
> 
> 时间：2013-03-01T08:42:13.243
> 
> 标签：android, testing, robotium

这是我的测试用例：

```
public void testStartActivityWithoutExtraData() {
    try {
        getActivity();
        Assert.fail("Should have thrown IllegalStateException");
    } catch (IllegalStateException ex) {
        assertTrue(true);
    }
} 
```

如果`Activity`在`Exception`没有`extras`. 所以在这个测试中，我期望一个`IllegalStateException`，但由于这个问题，测试总是失败：

```
Test failed to run to completion. Reason: 'Instrumentation run failed due to 'java.lang.IllegalStateException''. Check device logcat for details
Test running failed: Instrumentation run failed due to 'java.lang.IllegalStateException' 
```

Logcat 只是说`Application`抛出了一个`Exception`非常值得期待的东西。那么在测试中如何处理呢？谢谢你。

**更新** 这是我实际测试的代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.edit_item_activity);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);

        Bundle bundle = getIntent().getExtras();

        if (savedInstanceState == null) {
            if (bundle != null) {
                EditItemFragment editItemFragment = EditItemFragment.newInstance(bundle.getInt
                        ("id")); 
                FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
                transaction.add(R.id.edit_item_activity_frame, editItemFragment).commit();
            } else {
                throw new IllegalStateException(TAG + " should be invoked with Extras (id for " +
                        "ticket)");
            }
        }
    } 
```

# postgresql - 如何显示连接到 PostgreSQL 服务器的用户列表

> ID：15153674
> 
> 赞同：2
> 
> 时间：2013-03-01T08:42:47.457
> 
> 标签：postgresql

我正在尝试显示连接到 PostgreSQL 服务器的用户列表。
当我运行查询时：

```
select client_hostname from pg_stat_activity 
```

它以以下格式返回主机名：

```
machine_name.domain_name.com 
```

我只是想确认它是否总是`client_hostname`以上述格式返回？或者它可能因域而异？
PostgreSQL 如何创建字符串`domain_name.com`？
如果我想通过 java 应用程序创建相同的字符串，我该如何创建它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:49:00.250

我认为您的版本是 PostgreSQL 9.1 或更高版本。该[**手册**](http://www.postgresql.org/docs/current/interactive/monitoring-stats.html#PG-STAT-ACTIVITY-VIEW)说关于该`client_hostname`领域：

> 已连接客户端的主机名，由`client_addr`. 该字段仅对于 IP 连接不为空，并且仅在启用 log_hostname 时。

所以`client_hostname`归档不会总是显示非空信息。我建议您使用超级用户来查询`pg_stat_activity`视图。

# django - 应用 URL 到项目 URL

> ID：15153678
> 
> 赞同：2
> 
> 时间：2013-03-01T08:43:05.907
> 
> 标签：django, django-urls

我有一个生产中的 django 项目，目前只包括一个应用程序。假设我的域是`myproject.com`并且我的应用程序被称为`myapp`. 我希望索引`myproject.com/`不是`myproject.com/myapp/`。

这就是我的`myproject/urls.py`样子：

```
urlpatterns = patterns('',
url(r'^myapp/', include('myapp.urls')),
... 
```

并且`myapp.urls.py`：

```
urlpatterns = patterns('myapp.views',
url(r'^$', 'about'),
... 
```

如何使应用程序在 myproject.com 下可用？还是您应该通过重定向来做某事，例如在您的.htaccess 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:53:13.307

你必须重新定义你`urls.py`的这个

```
urlpatterns = patterns('',
    url(r'^$', include('myapp.urls')),
... 
```

这将捕获对“/”的所有调用。

这将从“根”启用您的所有网址。然后当然你必须写你的`myapp.urls`，这样它们在放入网络浏览器时才有意义。

**更新**

所以在大聊之后：这就是我认为你想要纯代码的东西

在你的根`urls.py`

```
url(r'', include('myapp.urls')), 
```

在你的 myapp.urls

```
urlpatterns = patterns('myapp.views',
    url(r'^$', 'first_view'),
    url(r'^evilCellphones/$', 'another_view'),
) 
```

这里本质上发生的是您将您`myapp.urls`的命名空间包含在内，但由于 Django 仍然加载它，它将包含您新定义的 url。从那里您可以重新定义您的所有 url，并让它们遵循与“myproject”相同的命名空间。

[这部分文档很好地解释了它](https://docs.djangoproject.com/en/dev/topics/http/urls/#multiple-view-prefixes)

# java - 缺少罐子会影响 Fortify 扫描结果吗？

> ID：15153685
> 
> 赞同：1
> 
> 时间：2013-03-01T08:43:40.890
> 
> 标签：java, fortify, source-code-protection

我正在尝试`.java`使用 Fortify 静态代码分析扫描纯文件，并且经常收到一条错误消息，指出我没有包含完整的 jar 列表。

“无法解析以下对 java 类的引用。请确保将包含这些类的所有必需 jar 文件提供给 SCA。”

我的问题是它会影响扫描结果吗？这个警告需要认真对待吗？（因为我的扫描仍在继续；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:33:46.090

您可以获得部分扫描和结果，但某些问题可能会被完全遗漏和/或风险较低。如果您的代码调用 JAR 文件中的函数，则 SCA 无法跟踪数据流进出函数。因此，这些数据路径会进入黑洞并且不会返回任何结果。

最好不要有将编译扫描的警告和代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:54:15.787

从第一原则而不是产品或应用程序的知识考虑这一点：

大概 Fortify 会扫描它可以看到的代码，因此它会返回一些有用的结果。但是，由于它无法查看所有代码，因此无法完成完整的工作。

不知道 Fortify 能有多聪明，它对抽象工厂之类的东西做了什么？这样的设计模式可以有效地在运行时确定实际使用了哪些类，因此您可以获得完全不同的应用程序行为，具体取决于哪些 jar 可用。

底线：鉴于您的应用程序可以在某个地方运行，为什么不能将所有 JAR 文件放在一起，让 Fortify 有机会完成更完整的工作？

# sql - 仅当值更改时才设置 SQLServer 更新

> ID：15153693
> 
> 赞同：0
> 
> 时间：2013-03-01T08:44:16.927
> 
> 标签：sql, sql-server, tsql

我已经阅读了很多关于这个问题的答案，说如果你更新一个没有改变但它可以做到的列并不重要，我想知道是否有一个体面的解决方案。

我们有一个更新过程，可以更新记录上的所有字段——其中一些可能与它们当前的值相同。

我们遇到的问题是我们有一个索引视图，其中该表是数千个子记录的父表，并且其中一些表字段位于该索引视图中。每次我们进行更新时，即使它实际上没有改变，它仍然会在维护索引视图方面做很多工作。

我希望能够进行 UPDATE SET 并且只有在值不同时才能进行设置。不是 where 子句，因为我仍然希望更新其他字段。

我猜实体框架在创建动态更新语句时会做这样的事情吗？对于使用存储过程进行更新的 ADO.NET 用户，是否有一个简单的解决方案？

蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:00:34.600

如果没有看到您的代码，很难看到您当前在做什么，但我会包含类似`WHERE table.value != newValue`.

IE

```
UPDATE myTargetTable
SET myTargetTable.myColumn = mySourceTable.newValue 
FROM mySourceTable JOIN myTargetTable on mySourceTable.ID = myTargetTable.ID
WHERE myTargetTable.myColumn != mySourceTable.newValue 
```

# c# - 使用附加属性扩展 Windows 属性处理程序

> ID：15153694
> 
> 赞同：0
> 
> 时间：2013-03-01T08:44:19.327
> 
> 标签：c#, winapi, shell-extensions

我正在使用 SSLWare 的 EZShellExtensions.Net v2011 ，它们支持属性处理程序，但代码的工作方式与我想要的不同。

我想为***docx xlsx***文件扩展名的属性处理程序添加几个新属性，但我的代码删除了所有默认属性。

有没有办法使用 EZShellExtensions 添加其他属性？或者我必须使用 C++ 吗？

示例代码：

```
[TargetExtension(".docx", true)]
[TargetExtension(".xlsx", true)]
[TargetExtension(".xlsm", true)] 
public class PropertyHandler4 : PropertyHandler
{

    public PropertyHandler4()
    {
    }

    protected override Property[] GetProperties()
    {
        // TODO : Write your code here.
        // Defines two properties for a file 

        UserDefinedProperty prop = new UserDefinedProperty("MyProperty1");
        prop.Description = "My Property1";
        prop.LabelText = "My Property1";

        UserDefinedProperty prop1 = new UserDefinedProperty("MyProperty2");
        prop1.Description = "My Property2";
        prop1.LabelText = "My Property2";

        return new Property[] { prop, prop1 };
    }

    // Override this method to retrieve the value of the specified property.
    protected override object GetPropertyValue(Property property)
    {
        return "WUZZAP!";
    } 
```

# sonarqube - PMD 的声纳复杂度度量值和复杂度报告器之间的差异

> ID：15153699
> 
> 赞同：0
> 
> 时间：2013-03-01T08:44:40.993
> 
> 标签：sonarqube

我们正在使用 Sonar 分析我们的代码并在 Sonar 的自定义质量配置文件中配置 PMD、findbugs 和 checkstyle 规则。如果违反此规则的阈值，则 PMD 规则代码样式圈复杂度会在我们的代码中收集违规行为。Sonar 在项目仪表板中还有一个复杂性小部件，它根据类、方法和文件显示复杂性。这个复杂度小部件是否考虑了由 PMD 规则引擎定义的用于计算代码样式圈复杂度的相同规则，或者这个小部件是否有自己的计算复杂度的方法？Sonar 复杂性小部件是否使用 PMD 规则引擎报告的违规来确定复杂性？

提出这个问题的原因是，如果两者计算复杂度的方法不同，那么我们只想参考一种方法，并且最好保留哪种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:44:50.963

Sonar 使用我们的内部 Java 解析器自行计算圈复杂度。这就是复杂性小部件中显示的内容。计算可能确实与 PMD 所做的不同。因此，如果您激活有关复杂性的 PMD 规则，显然这将触发 PMD 而不是 Sonar 执行的措施。

仅供参考，我们的目标是在 Sonar（基于我们自己的内部解析器）中逐步实现 PMD 和 Checkstyle 中可以找到的大多数有用规则，这样主要结果就不会像您所经历的那样存在差异。

# javascript - IE 保护警告清除我的文本框

> ID：15153706
> 
> 赞同：0
> 
> 时间：2013-03-01T08:45:04.477
> 
> 标签：javascript, internet-explorer, textbox

我对互联网安全警告有疑问。我写了一个下载脚本。如果我在文本框中输入一个特殊的字符串，我可以下载一个文件，但是对 ie 的保护会带来一些麻烦。我的问题是当我允许它时，文本框的值消失了。我只想让字符串在那里。任何想法如何做到这一点？

下载脚本：只需将位置更改为文件。
IE版本：8
IE消息

> 为了帮助保护您的安全，Internet Explorer 阻止此站点将文件下载到您的计算机。单击此处查看选项...

# android - 通过 API 部署到 Google Play 商店

> ID：15153708
> 
> 赞同：8
> 
> 时间：2013-03-01T08:45:13.757
> 
> 标签：android, api, continuous-integration, google-play, continuous-deployment

我是持续​​集成/部署的忠实拥护者，我们使用 Jenkins 构建我们的 Android 应用程序，并通过[HockeyApp将每个构建从特定分支（主要是](http://www.hockeyapp.net "曲棍球应用程序")[git flow](http://nvie.com/posts/a-successful-git-branching-model/ "git流分支模型")的开发分支）部署到我们的测试人员。

我想要实现的是，每一个新的（标记的）提交给 master 都会在 Play Store 中结束。所以我不必通过[Play Store 开发者控制台](https://play.google.com/apps/publish/v2 "Play 商店开发者控制台")手动上传 APK 。我已经搜索了一个 API。但是谷歌没有提供任何和我发现的两个非官方项目（[Android Market API](https://code.google.com/p/android-market-api/)和[Play PHP API](http://www.thetutlage.com/post=TUT269)）只支持下载指标，比如你的应用程序的下载次数。

那么有人能想出一种通过 cURL 或小脚本上传 APK 的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-01T10:19:03.737

Google 发布了一个新的 API，用于自动部署到 Alpha/Beta 和生产渠道！

看看[这里](https://developers.google.com/android-publisher/?rd=1)

api特点：

*   上传应用程序的新版本发布应用程序，通过将 APK 分配到各种轨道（alpha、beta、分阶段推出或生产）
*   创建和修改 Google Play 商店列表，包括本地化文本和图形以及多设备屏幕截图

更新：

一些关于如何使用 API 的 java 示例：[samples](https://github.com/googlesamples/android-play-publisher-api/tree/master/v2/java)

**更新（2015 年 6 月 8 日）：**

我发现并且我正在使用一个使用这个 API 的 gradle 插件，它叫做[gradle-play-publisher](https://github.com/Triple-T/gradle-play-publisher)。它非常好用，你只需要获取一个Service账号并下载一个带有证书的p12文件（PlayStore --> Settings --> API access >> "Create Service Account" >> 选择p12格式并阅读说明插件网站！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T13:54:38.787

您将很难使用 curl 执行 oAuth 身份验证来访问仪表板。老实说，我认为找到解决方案的最快途径是创建一个[AHK 脚本](http://www.autohotkey.com/)，该脚本通过您预先登录的浏览器执行上传。

只要 Google 不提供 API，您最终就会遇到黑客攻击。不妨采用最快实施的黑客攻击。

# c# - Ajax Control Toolkit CollapsiblePanel 展开页面上的所有控件

> ID：15153710
> 
> 赞同：0
> 
> 时间：2013-03-01T08:45:22.387
> 
> 标签：c#, asp.net, listview, asp.net-ajax, ajaxcontroltoolkit

我的代码中目前有两个 ListView 控件，一个显示产品，另一个显示不同产品的价格变化。我的可折叠面板放置在第二个 ListView 内。在加载的网页上单击第一个可折叠面板时，所有可折叠面板都会展开（关闭也可以）。此外，当单击任何其他可折叠面板（除了第一个面板）时，什么都不会发生。我尝试将 id 分配给目标面板并收到一条错误消息，指出 id 不能在运行时分配给控件。

这是第二个列表视图的一些示例代码：

```
<LayoutTemplate>

<asp:Panel ID="pnlMoreProducts" runat="server" >
<asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>                            
</asp:Panel>

<div id="productCollDiv" class="productCollPanel">
<asp:Label ID="lblCollPanel" CssClass="lblCollPanel" runat="server" ></asp:Label>
                        </div>

<ajaxToolkit:CollapsiblePanelExtender ID="cpeMoreProducts" AutoCollapse="false" runat="server" TargetControlID="pnlMoreProducts"
                            CollapsedSize="0" Collapsed="true" TextLabelID="lblCollPanel" CollapsedText="Show More Products" ExpandedText="Hide Products"
                            ExpandDirection="vertical" ExpandControlID="productCollDiv" CollapseControlID="productCollDiv" SuppressPostBack="true" />
                    </LayoutTemplate> 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:00:32.317

试试这个模板：

```
<asp:Panel ID="pHeader1" runat="server" CssClass="cpHeader">
    <asp:Label ID="lblHeaderText1" runat="server" />
</asp:Panel>
<asp:Panel ID="pBody1" runat="server" CssClass="cpBody">
    <asp:Label ID="lblBodyText1" runat="server" />
</asp:Panel>
<act:CollapsiblePanelExtender ID="cpe1" runat="server" TargetControlID="pBody1" CollapseControlID="pHeader1"
    ExpandControlID="pHeader1" Collapsed="false" TextLabelID="lblHeaderText1" CollapsedText="Open..."
    ExpandedText="Close..." CollapsedSize="0" ExpandedSize="200"
    ScrollContents="true">
</act:CollapsiblePanelExtender>

<asp:Panel ID="pHeader2" runat="server" CssClass="cpHeader">
    <asp:Label ID="lblHeaderText2" runat="server" />
</asp:Panel>
<asp:Panel ID="pBody2" runat="server" CssClass="cpBody">
    <asp:Label ID="lblBodyText2" runat="server" />
</asp:Panel>
<act:CollapsiblePanelExtender ID="cpe2" runat="server" TargetControlID="pBody2" CollapseControlID="pHeader2"
    ExpandControlID="pHeader2" Collapsed="false" TextLabelID="lblHeaderText2" CollapsedText="Open..."
    ExpandedText="Close..." CollapsedSize="0" ExpandedSize="200"
    ScrollContents="true">
</act:CollapsiblePanelExtender> 
```

# android - Android，Java：返回三个元素组成的List的2个元素

> ID：15153712
> 
> 赞同：0
> 
> 时间：2013-03-01T08:45:26.403
> 
> 标签：android, list, parsing, return

我有一个`List`由 XML 解析的 3 个值组成。我想做的是将特定值与列表的第一个值进行比较，并根据返回的值与第一个值匹配的其他 2 个元素进行比较。

这是一个 XML 片段：

```
<?xml version="1.0"?>
 <TABLA Nom_Test="A_NUM_MED_01" Escala="APTITUD RAZ. CRITICO NUMÉRICO">
 <PUNTUACION>
  <VALOR>0</VALOR>
  <VALOR_TRANSFORMADO>1,2</VALOR_TRANSFORMADO>
  <VALOR_PS>14,4</VALOR_PS>
 </PUNTUACION>
 <PUNTUACION>
  <VALOR>1</VALOR>
  <VALOR_TRANSFORMADO>1,2</VALOR_TRANSFORMADO>
  <VALOR_PS>14,4</VALOR_PS> 
```

例如，如果值为 1 ，则应返回其他 2 个值：1,2 和 14,4。

我有这个结构，这很好用：

```
 public XMLPullParserHandler() {
    puntuaciones = new ArrayList<Puntuacion>();
}

public List<Puntuacion> getPuntuacion() {
    return puntuaciones;
}

public List<Puntuacion> parse(InputStream is) {
    XmlPullParserFactory factory = null;
    XmlPullParser parser = null;
    try {
        factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        parser = factory.newPullParser();

        parser.setInput(is, null);

        int eventType = parser.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            String tagname = parser.getName();
            switch (eventType) {
            case XmlPullParser.START_TAG:
                if (tagname.equalsIgnoreCase("PUNTUACION")) {
                    // create a new instance of employee
                    puntuacion = new Puntuacion();
                }
                break;

            case XmlPullParser.TEXT:
                text = parser.getText();
                break;

            case XmlPullParser.END_TAG:
                if (tagname.equalsIgnoreCase("PUNTUACION")) {

                    puntuaciones.add(puntuacion);
                } else if (tagname.equalsIgnoreCase("VALOR")) {
                    puntuacion.setValor((text));
                } else if (tagname.equalsIgnoreCase("VALOR_TRANSFORMADO")) {
                    puntuacion.setValor_Transformado((text));
                } else if (tagname.equalsIgnoreCase("VALOR_PS")) {
                    puntuacion.setValor_PS((text));;

                }
                break;

            default:
                break;
            }
            eventType = parser.next();
        }

    } catch (XmlPullParserException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return puntuaciones;
} 
```

}

为了比较这一点，我尝试了以下解决方案，但我不知道如何继续（已编辑）如何获得列表的位置 1 和 2？

```
public void Check() {
for (int i=0;i<=30;i++){
int index = puntuaciones.indexOf("1");
puntuaciones.get(index); 
```

}

对于最后一部分，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:50:17.230

```
 List<Puntuacion> myList = getPuntuacion();    
 for (Puntuacion tmpPunt : myList) {
      if ( Verbal.getRespuesta() == VALOR)
            return tmpPunt;
 } 
```

`getRespuesta()`应该返回一个`String`对象，并且为了比较`String`值，您必须使用类中的`equals`方法`String`

# sip - Mobicents-RestComm 问题

> ID：15153717
> 
> 赞同：2
> 
> 时间：2013-03-01T08:45:42.007
> 
> 标签：sip, voip, mobicents, restcomm

我正在关注 RestComm 的 Mobicents 实施教程。我通过 CURL 成功绑定并注册了 Hello-World demo 和 DTMF Demo 的用户。

每当我在 sip:1234@127.0.0.1:5080 或 sip:3333@127.0.0.1:5080 上拨打电话时，我都会收到以下异常

```
 13:29:58,728 INFO  [InitialRequestDispatcher] Request event dispatched to RestComm
    13:29:58,767 WARN  [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: Illegal character in authority at index 7: file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war\/audio/one-second-silence.wav
    13:29:58,768 WARN  [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: Illegal character in authority at index 7: file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war\/audio/one-second-silence.wav
    13:29:58,768 WARN  [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: Illegal character in authority at index 7: file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war\/audio/one-second-silence.wav
    13:29:58,768 WARN  [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: Illegal character in authority at index 7: file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war\/audio/one-second-silence.wav
    13:29:58,769 WARN  [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: Illegal character in authority at index 7: file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war\/audio/one-second-silence.wav
    13:29:58,769 WARN  [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: Illegal character in authority at index 7: file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war\/audio/one-second-silence.wav
    13:29:58,769 WARN  [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: Illegal character in authority at index 7: file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war\/audio/one-second-silence.wav 
```

我认为电话的标题很好，

> 13:42:05,514 信息 [SIPTransactionStack]
> 
> > ;tag=1545 To: Call-ID: 23338 CSeq: 20 OPTIONS Accept: application/sdp Max-Forwards: 70 User-Agent: Linphone/3.5.2 (eXosip2/3.6.0) Content-Length: 0
> 
> ]]>
> 
> 13:42:05,518 信息 [SIPTransactionStack]
> 
> > ;标签= 97936972_57A5B08A_D49670A8-7483-482D-B493-47B6F0FFB64A VIA标记=1545 内容长度：0
> 
> ]]>
> 
> 13:42:05,524 INFO [InitialRequestDispatcher] 请求事件分派到 RestComm 13:42:05,546 INFO [SIPTransactionStack]
> 
> > ;tag=32134 To: Call-ID: 23679 CSeq: 20 INVITE Con​​tact: Content-Type: application/sdp Allow: INVITE,ACK,CANCEL,OPTIONS,BYE,REFER,NOTIFY,MESSAGE,SUBSCRIBE,INFO Max-Forwards: 70用户代理：Linphone/3.5.2 (eXosip2/3.6.0) 主题：电话内容长度：479
> 
> v=0 o=toto 294 294 IN IP4 192.168.132.86 s=谈话 c=IN IP4 192.168.132.86 t=0 0 m=音频 7078 RTP/AVP 112 111 110 3 0 8 101 a=rtpmap:112 speex/32000 a =fmtp:112 vbr=on a=rtpmap:111 speex/16000 a=fmtp:111 vbr=on a=rtpmap:110 speex/8000 a=fmtp:110 vbr=on a=rtpmap:101 电话事件/8000 a =fmtp:101 0-11 m=视频 9078 RTP/AVP 103 99 98 a=rtpmap:103 VP8/90000 a=rtpmap:99 MP4V-ES/90000 a=fmtp:99 profile-level-id=3 a=rtpmap :98 H263-1998/90000 a=fmtp:98 CIF=1;QCIF=1 ]]>
> 
> 13:42:05,558 信息 [SIPTransactionStack]
> 
> > 通过: SIP/2.0/UDP 192.168.132.86:5060;rport=5060;branch=z9hG4bK2917;received=127.0.0.1 CSeq: 20 INVITE Call-ID: 23679 From: ;tag=32134 Content-Length: 0
> 
> ]]>
> 
> 13:42:05,573 信息 [SIPTransactionStack]
> 
> > ;tag=51502709_57a5b08a_2e371fbf-827f-4e13-be37-4ba38c93a9c9 通过：SIP/2.0/UDP 192.168.132.86:5060;rport=5060;branch=z9hG4bK2917;received=1279: SIP/2.0/UDP 192.168.132.86:5060;rport=5060;branch=z9hG4bK2917;received=1279: SIP/2.0/UDP tag=32134 联系人：内容长度：0
> 
> ]]>
> 
> 13:42:05,576 INFO [InitialRequestDispatcher] 请求事件分派到 RestComm 13:42:05,593 WARN [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException：java.lang.IllegalArgumentException：索引 7 处的权限中的非法字符: file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war/audio/one-second-silence.wav 13:42:05,634 WARN [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: 索引 7 的权限中的非法字符：file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server \default\deploy\restcomm.war/audio/one-second-silence.wav 13:42:05,634 WARN [RcmlInterpreter] org.mobicents.servlet.sip.restcomm.xml.VisitorException: java.lang.IllegalArgumentException: Illegal character in索引 7 的权威：file://C:\restcomm-saas-jboss-1.0.0.CR2-SNAPSHOT\server\default\deploy\restcomm.war/audio/one-second-silence.wav

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:49:21.203

我通过将声音文件移动到另一个目录而不是战争文件来解决它。在 restcomm.xml 里面我改变了他们的路径。

从

> ${restcomm:home}/audio/one-second-silence.wav

到

> C:/restcomm/sounds/one-second-silence.wav

我想，这只是 Windows 操作系统的问题，同样的例子在 Linux 上运行起来一定很有魅力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T09:02:02.203

您还可以使用 Amazon Marketplace 上现成的 AMI [https://aws.amazon.com/marketplace/pp/B00FFHJ6SU/ref=sp_mpg_product_title?ie=UTF8&sr=0-3](https://aws.amazon.com/marketplace/pp/B00FFHJ6SU/ref=sp_mpg_product_title?ie=UTF8&sr=0-3)来避免此类问题，因为一切都已正确预配置

# python - 从python中的线程子类化时如何传递自定义函数

> ID：15153729
> 
> 赞同：0
> 
> 时间：2013-03-01T08:46:25.830
> 
> 标签：python, multithreading

我有这个代码

```
class MyTh(threading.Thread):

    def __init__(self, group=None, target=None, name=None,
                 args=(), kwargs=None, verbose=None):
        threading.Thread.__init__(self, group=group, target=target, name=name,
                                  verbose=verbose)
        self.args = args
        self.kwargs = kwargs
        return

    def run(self):
        logging.debug('running with %s and %s', self.args, self.kwargs)
        return

def my_func(): 
   print 'Everything OK' 
```

当我这样做时

```
t1 = MyTh(name='Thread '+ str(i), target=myfunc, args=("test",), kwargs={'a':'A', 'b':'B'})
    t1.start() 
```

我的目标函数根本没有被调用。我怎样才能让我的线程调用目标中给出的默认函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:55:13.727

通过覆盖该`run()`方法，您会弄乱标准`run()`并且永远不会调用目标。您需要的是不覆盖该方法或像这样覆盖它：

```
def run(self):
    logging.debug('running with %s and %s', self.args, self.kwargs)
    super(MyTh, self).run()
    return 
```

这样，标准`Thread.run`也被调用并被`target`执行。

你也没有传递`args`给`kwargs`构造`Thread`函数。你需要有：

```
threading.Thread.__init__(self, group=group, target=target, name=name,
                              verbose=verbose, args=args, kwargs=kwargs) 
```

为了使它们正确设置。然后你可以改变你`my_func`的：

```
def my_func(arg1, a, b):
    print arg1, a, b
    print 'Everything OK' 
```

此外，`MyTh`' 的构造函数和调用`Thread.__init__`是不必要的长。这要短得多且可读性强：

```
def __init__(self, *args, **kwargs):
    threading.Thread.__init__(self, *args, **kwargs)
    self.args = kwargs['args']
    self.kwargs = kwargs['kwargs'] 
```

Notice how the `args` and `kwargs` which you pass to the constructor are actually accessible as `kwargs['args']` and `kwargs['kwargs']`

# css - 不同风格的表内表？

> ID：15153730
> 
> 赞同：7
> 
> 时间：2013-03-01T08:46:25.303
> 
> 标签：css, html-table

如何为两个表格的表格单元格制作两种不同的样式，其中一个单元格在另一个表格中？

我有两种 CSS 样式：

```
table.style1 { /* any styles */}
table.style1 td { /* any styles */} 
```

和

```
table.style2 { /* any styles */}
table.style2 td { /* any styles */ } 
```

在代码中我有这样的感觉：

```
<table class="style1">
   <tr>
      <td>
         <table class="style2">
            <tr><td>bla bla<td></tr>
         </table>
      </td>
   <tr>
</table> 
```

结果是 -`<td>`第二个表格（带有样式2）中的所有表格单元格都带有样式1......！

当我在桌子里面有桌子时，如何制作两个不同的css stile？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T09:26:49.333

试试这个代码。我确信它工作正常。

```
table.style1 { /* any styles */}

table.style1 td { /* any styles */} 
```

和

```
table.style1 table.style2 { /* any styles */}

table.style1 table.style2 td { /* any styles */} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T09:37:43.537

这是选择不同表格单元格的一种方法[http://jsfiddle.net/HR8Bg/2/](http://jsfiddle.net/HR8Bg/2/)

```
.style1 td {
    background: blue;
    color: #fff;
}

.style1 td td {
    background: red;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-01T09:09:52.343

您可以按照以下代码

对于表 1

> table .style1 { /* 任何样式 */}
> 
> table .style1 td { /* 任何样式 */}

对于表 2

> table .style1 .style2 { /* 任何样式 */}
> 
> table .style1 .style2 td { /* 任何样式 */}

# mysql - 插入 4 个相等的值，其中 1 个不同

> ID：15153731
> 
> 赞同：1
> 
> 时间：2013-03-01T08:46:26.077
> 
> 标签：mysql, sql

我有一个表，其中包含和`tbl`之类的列。是整数（不是 id 字段，只是 int 字段）。我需要在这个表中插入 4 行，这些行是：`col1``col2`
`col2`

```
John 1
John 2
John 3
Sam  4 
```

在单个查询中执行此操作的最佳方法是什么？谢谢！:)

**更新**：如果我有 100 个值怎么办？:) 我要说的是所有值都是相同的，从 1 到 n，但其中一个是不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:47:35.193

您可以只使用一个[`INSERT`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)语句来做到这一点：

> 使用 VALUES 语法的 INSERT 语句可以插入多行。为此，请包含多个列值列表，每个列表都包含在括号中并用逗号分隔。

像这样：

```
INSERT INTO tablename(col1, col2)
VALUES ('John', 1),
       ('John', 2),
       ('John', 3),
       ('Sam',  4); 
```

**或者：**

```
INSERT INTO Tablename(col1, col2)
SELECT 'John' AS col1, 1 AS col2
UNION ALL
SELECT 'John'        , 2
UNION ALL 
SELECT 'John'        , 3 
UNION ALL
SELECT 'Sam'         , 4 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:48:04.500

```
INSERT INTO table (col1, col2) VALUES
('John', 1),
('John', 2),
('John', 3),
('Sam', 4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T09:09:39.373

如果需要插入大量记录（例如 100 条），可以在存储过程中使用循环。这是一个基本示例：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS LoopProc$$
CREATE PROCEDURE LoopProc()
  BEGIN
    DECLARE x  INT;
    SET x = 1;
    WHILE x  <= 100 DO
      INSERT INTO table (col1, col2) VALUES ('John', x);
      SET  x = x + 1;
    END WHILE;
    SET  x = x + 1;
    INSERT INTO table (col1, col2) VALUES ('Sam', x);
  END$$
DELIMITER ; 
```

# python - Django一致的自定义日志格式

> ID：15153734
> 
> 赞同：2
> 
> 时间：2013-03-01T08:46:29.237
> 
> 标签：python, django, logging

我正在尝试为 Django 配置日志记录，以便在每一行日志中都有 session_key（如果已设置）。我想我找到了一种方法：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'request': {
            'format': '%(asctime)s %(levelname)-8s [%(sessid)s] %(message)s',
        },
    },
    'filters': {
        'request': {
            '()': 'yellowballs.yblogging.RequestFilter'
        },
    },
    'handlers': {
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'filters': ['request'],
            'formatter': 'request',
        }
    },
    'loggers': {
        'django': {
            'handlers': ['console'],
            'level': 'DEBUG',
            'propagate': True,
        },
    },
} 
```

像这样定义过滤器：

```
class RequestFilter(logging.Filter):
    def filter(self, record):
        session_store = SessionStore()
        record.sessid = session_store.session_key
        return True 
```

它似乎运行良好，但 Django 使用默认格式记录其消息：

```
2013-03-01 08:44:41,359 WARNING  [None] Not Found: /
[01/Mar/2013 08:44:41] "GET / HTTP/1.1" 200 1962 
```

如何让行`[01/Mar/2013 08:44:41] "GET / HTTP/1.1" 200 1962`以与日志的其余部分相同的格式显示？

是否有一种简单而漂亮的方法来覆盖所有 Django 的默认格式，以便日志消息在整个项目中保持一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:42:51.037

我想你忘了使用你的格式化程序：

```
'handlers': {
    'console': {
        'level': 'DEBUG',
        'class': 'logging.StreamHandler',
        'filters': ['set_sessid'],
        'formatter': 'request', // this
    },
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T08:54:44.563

似乎这些行不是由我的应用程序记录的，而是由`manage.py runserver`服务器记录的。所以没有办法格式化它们，而是将应用程序日志记录到一些文件中。这将从应用程序日志中完全删除这些行，但这没关系，因为它们不属于那里:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T13:57:56.613

覆盖对我有用的默认日志格式。需要**停止**传播。

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        "verbose": {
            "format": (
                "%(levelname)s %(name)s %(message)s [PID:%(process)d:%(threadName)s]"
            )
        },
    },
    'handlers': {
        'console': {
            'class': 'logging.StreamHandler',
            'formatter': 'verbose',
        },
    },
    'loggers': {
        'django.server': {
            'handlers': ['console'],
            'level': 'DEBUG',
            'propagate': False, ### NOTE HERE !!!
        }
    }
} 
```

# ruby-on-rails - 如何从 Rails 的 Google Cloud Storage 存储桶中获取所有对象

> ID：15153735
> 
> 赞同：1
> 
> 时间：2013-03-01T08:46:41.333
> 
> 标签：ruby-on-rails, ruby, google-cloud-storage

我设法通过这个 gem 得到了一个对象-> [https://github.com/moomerman/gstore](https://github.com/moomerman/gstore)

```
@client = GStore::Client.new(
    :access_key => 'myAK',
    :secret_key => 'mySK'
)
puts @client.get_object('bucket_name', 'test.xml') 
```

也许，有人可以帮我从桶中获取所有对象。小例子:)或链接将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:28:26.220

Google Cloud Platform 的 GitHub 组织上有一个 ruby​​ 示例应用程序： [https ://github.com/GoogleCloudPlatform/storage-getting-started-ruby](https://github.com/GoogleCloudPlatform/storage-getting-started-ruby)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-01T16:15:55.320

如果存储桶中的对象少于 1000 个，则会执行以下操作：

```
bucket = storage.bucket "my-bucket"
files = bucket.files
files.each do |file|
  puts file.name
end 
```

如果更多，您可以将`max`参数调整为，`files`或者更好地使用适当的迭代：

```
files = bucket.files
files.all do |file|
  puts file.name
end 
```

# design-patterns - 如何使用 Symfony2 和 Doctrine 2 及其设计模式制作具体的复杂模型逻辑？

> ID：15153738
> 
> 赞同：4
> 
> 时间：2013-03-01T08:46:58.793
> 
> 标签：design-patterns, symfony, doctrine-orm

**具体**问题****

 **> 我有一个操纵一些公司（实体）的对象 A（一个实体），公司可以链接在一起（例如，如果他们有一些共同的股东）。我希望 A 能够知道公司 C1 是否与公司 C2 相关联。

**情怀**

在我的知识和习惯状态下，我认为公司实体中应该有一种方法来判断它是否与另一个实体相关（**第 1 点**）。当然，我可以通过获取所有公司联系来做到这一点，并查看我的公司 C2 是否在那里（**第 2 点**）。但这很脏，这意味着出于什么原因获得所有依赖项？获得一个可以从数据库中轻松检索的布尔值，我可以考虑在与公司链接的存储库中创建一个函数（**第 3 点**）。但是不，因为实体（A 或 C1 和 C2）中没有可用的东西，所以轻量级对象会记住。

**论据**

*   第 1 点基于单一职责原则。随意批评这一点。由于实体应该嵌入模型逻辑，我认为 isConnectedWith 函数应该在 CompanyEntity 的定义中是正确的。请记住这里 A 也是一个实体（所以这里也是存储库）
*   第 2 点是一个解决方案，它在某种意义上是好的：这是正确的做法，如果，那是一个很大的如果，**Doctrine 只是模拟的是真的**；如果只是调用`$object->connexions`访问了内存中某处已经存在的某些对象集合。但事实很糟糕：它不存在，它存在于我们 webapp 的常见瓶颈：数据库。
*   第 3 点我厌倦了 Data Mapper & Dependency Injection 组合告诉你的实体（和一些存储库）应该只靠它们自己存在，因为它们是模型逻辑。也许我的理解非常错误，但是由于每个人都说这是一件坏事，所以我完全放弃了在实体中注入帮助器或配置的想法。

**问题**

您将如何解决保持完整性和性能并避免肮脏的解决方法的问题？我的论点有哪些不好的地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:26:12.130

来分析一下你的观点

## 第 3 点

第3点根本不是解决方案！谁说将*几乎*所有东西都注入实体不是一个好的解决方案，这是绝对正确的。这几乎是 OO 和模式编程最佳实践的“标准事实”。
实体**仅**用于表示“对象”（当然不是在 IT 接受中！）因此，属性和访问器方法是您必须包含的唯一内容。
考虑一下您注入的东西可能会随着时间而改变的情况（方法签名、方法返回类型或逻辑）：在这种情况下，您必须更改实体本身以保持事物一起工作，但为什么必须这样做实体，没变？深入思考它，因为它是面向对象编程的一个很好的起点（不仅仅是 symfony2 或实体表示！）

## 第 2 点

是的，你是对的：为什么要从数据库中获取所有实体，或者，如果你写了一个“好”的查询，那么只有你正在搜索的实体，如果你永远不会使用它？
关于这一点，您必须分析以下内容：

*   我是否要在其他地方使用这个（或那些）实体，所以获取它可能会很好？
*   我是否知道 Doctrine2 将保存在他获取对象（*）的内存中？这意味着，当您查询（或询问）之前获取的同一个对象时，他会返回给您该对象的同一个实例？因此，没有数据库连接，没有 fecth，没有重量级操作。

## 第 1 点

是的，这是一个很好的观点。您必须实现（当然是在存储库中！）类似`->isThere()`或更好的方法（这是想到的名字）。
使用这种方法，您可以编写自定义 SQL（称为**D** QL，其中**D**代表 Doctrine），其中您只返回一个标志或一个整数（通过`COUNT(*)`类似的聚合函数获得）。
对于获取的不是`ArrayCollection`实体而是标量结果，顾名思义，使用`$query->getSingleScalarResult();`
我想我会倾向于最后一个解决方案。

希望已经解释得很好

(*) 这称为[恒等映射](http://docs.doctrine-project.org/en/latest/reference/working-with-objects.html#entities-and-the-identity-map)**

# java - 在 Eclipse 中运行时不显示对我的代码的编辑

> ID：15153747
> 
> 赞同：1
> 
> 时间：2013-03-01T08:47:47.390
> 
> 标签：java, eclipse, project

我正在处理一个分配给我的项目，他们给了我一个文件夹，里面有大量的类、文档和其他我不太熟悉的项目相关文件，并且我已经获得了一个单独的 jar 用于其他所有内容项目需要。

我已将项目导入 eclipse，甚至可以获得提供的测试 .java 以正确运行，但由于某种原因，我对测试代码所做的任何更改在我运行时都无法显示。

我添加了代码，甚至注释掉了会对显示产生很大影响的行，但是当我运行它时一切都保持不变。

我已经自动打开了构建，我什至关闭了它，再次打开它等等。

我通过正确指向外部 jar 修复了所有构建路径错误，但这仍然会发生。

有没有人遇到过这个问题和/或你知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:45:18.990

这种行为的一个可能原因是您在项目中编辑的类也包含在您正在使用的某个 JAR 中。因此，这些类在类路径上存在*两次*，Eclipse/Java 将只加载其中一个而忽略另一个。

所以我认为您正在编辑的测试类（甚至可能是您应该使用的其他类！）包含在您提到的“其他所有内容”的单独 JAR 中。

# asp.net - 将图表和网格导出到 Excel

> ID：15153752
> 
> 赞同：1
> 
> 时间：2013-03-01T08:48:08.543
> 
> 标签：asp.net, gridview

我有一种情况，我必须在不使用 Interop (MicroSoft) 的情况下将 gridview 和图表导出到同一个 excel 文件中。这是我的代码

```
string attachment = "attachment; filename=test.xls";
Response.ClearContent();
Response.AddHeader("content-disposition", attachment);
Response.ContentType = "application/vnd.ms-excel";
StringWriter sw = new StringWriter();
HtmlTextWriter htw = new HtmlTextWriter(sw);

// Create a form to contain the grid
HtmlForm frm = new HtmlForm();
gvReport.Parent.Controls.Add(frm);
frm.Attributes["runat"] = "server";
frm.Controls.Add(gvReport);
frm.RenderControl(htw);

String imagepath = "<img src='" + Server.MapPath("../Image1.png") + "' />";

Response.Output.Write("\n<html>\n<body>");

Response.Output.Write("<table width='800' align='center' style='text-align:center'");
Response.Output.Write("<tr><td colspan='10' align='center'><div align='center' style='text-align:center'>" + imagepath + "</div></td></tr>");

Response.Output.Write("</table>");
Response.Output.Write("\n</body>\n</html>");

Response.Flush();
//Response.End();

Response.Write(sw.ToString());
Response.End(); 
```

我哪里错了？

# php - foreach 循环中的 Javascript

> ID：15153753
> 
> 赞同：0
> 
> 时间：2013-03-01T08:48:14.033
> 
> 标签：php, javascript

假设您有一些代码，其中包括一个 javascript 工具提示和一个 php foreach ($result as $row) 循环，该循环从 sql 数据库中调用值，如下所示，

```
 <?php

   foreach ($result as $row) {
       $link = $qs->link($row,'item');
       $logoImage = $qs->getLogo($row->file_id);

       echo "<ul class=\"imggrid\"><li><a class=\"ItemLink\" href=\"$link\"><img width=\"80\" height=\"80\" src=\"" . $logoImage . "\" /></a></li></ul>";

?>
<script type="text/javascript">
  jQuery(function() {
    jQuery( document ).tooltip({ hide: "true", show: "false", 
      content: function() {
        if ( jQuery(this).is( "img[src='<?php echo $logoImage ?>']" ) ) {
          return "<img class='map' src='<?php echo $logoImage ?>'><a><?php echo $qs->abbreviate($row->title,50); ?></a>";
        }
              }
    });
  });
  </script>

<?php

   }
   ?> 
```

这过于简单了，但是 php 会吐出一个图片网格，我希望工具提示在悬停时显示每张图片的更大版本。现在它只显示网格中所有图片的第一张图片。我假设这是因为脚本在循环之外。但是我可以将脚本扔到 foreach 循环中吗？

任何建议或帮助都会很棒。请记住，我是这方面的新手。

编辑：我添加了有问题的代码部分。

编辑 2：好的，我已经更新了这段代码，但现在它什么也没显示。我认为这会起作用，因为我正在使用 src = $logoImage 选择 img 元素，其中 $logoImage 会吐出文件的地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:50:50.627

```
foreach ($result as $row) {
  // the echo sentence
  ?>
  <!-- script goes here -->
  <?php
} 
```

请记住，在任何时候，您都可以关闭 PHP 标记并开始将原始数据（例如 HTML）输出到页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:51:00.990

我猜这个问题可能是因为`id`你的图像标签中的属性。

您需要为每个图像生成动态 id（可能来自 DB），并基于此来校准工具提示。

一个 html 页面不能有相同的 id 使用多次。

# wpf - 基于绑定改变其外观的子控件的样式

> ID：15153754
> 
> 赞同：0
> 
> 时间：2013-03-01T08:48:15.333
> 
> 标签：wpf, xaml, data-binding, mvvm, styles

我有一个绑定到多个属性的自定义控件，我想分离样式，但我遇到了问题。基本上它是一个内部带有 ContentControl 的 Button。Button 样式取决于 PropertyA (bool)，但 ContentControls 样式取决于 PropertyA 和 PropertyB（具有 5 个元素的枚举）。

```
<Button Style="{Binding PropertyA, Converter={StaticResource styleSelector}}">
    <Button.Template>
        <ControlTemplate TargetType="Button">
            [...]
            <ContentControl x:Name="cc1">
                <ContentControl.Template>
                    <MultiBinding Converter="{StaticResource contentSelector}">
                        <Binding Path="PropertyA" />
                        <Binding Path="PropertyB" />
                     </MultiBinding>
                 </ContentControl.Template>
            </ContentControl>
            [...]
        </ControlTemplate>
    </Button.Template>
</Button> 
```

样式移至资源

```
<Style x:Key="ButtonStyleA1" TargetType="Button">
   [...]
</Style>

<Style x:Key="ButtonStyleA2" TargetType="Button">
   [...]
</Style> 
```

因为 ContentControl 是 Button 的一部分，所以应该可以将 ContentControl 的模板移动到 PropertyB`ButtonStyleA1`并`ButtonStyleA2`减少对 PropertyB 的依赖。我尝试`<Setter ... TargetName="cc1">`在样式中使用，但编译器找不到 cc1。您是否有一个简单而干净的解决方案的想法，其中绑定保留在 Button 中？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:36:11.537

最简单的方法可能是`ControlTemplate`从 Button 样式中设置 Button 的属性。然后，您可以根据需要为按钮定义任意数量的样式，每个样式都包含它自己的样式，这些样式是根据*PropertyA*`ControlTemplate`的值选择的。

 *在每个 ControlTemplate 中，您可以使用样式触发器将内容控件的模板设置为五个之一。您可以将内容控件的模板定义为 Button 的资源`ControlTemplate`或其他位置，具体取决于您希望如何组织它。

我希望，我解决了您的问题，这对您的情况有所帮助..

**编辑：**

如果您需要`ContentControl`从后面的代码访问您的代码，您可以定义**模板部分**来执行此操作。*

# c# - EF5 多对多更新断开连接的场景

> ID：15153761
> 
> 赞同：3
> 
> 时间：2013-03-01T08:48:50.757
> 
> 标签：c#, ef-code-first, many-to-many, entity-framework-5

我还没有找到解决这个问题的好方法（类似的票在这里[EF5 update disconnected graph (n-tier) one-to-many](https://stackoverflow.com/questions/15050480/ef5-update-disconnected-graph-n-tier-one-to-many)）。

我找到并遵循了这个例子：[http](http://entityframeworktutorial.net/update-many-to-many-entities-in-entity-framework.aspx#.UTBeTDBhif8) ://entityframeworktutorial.net/update-many-to-many-entities-in-entity-framework.aspx#.UTBeTDBhif8 。

这工作得很好，但它创建了相关实体的副本（使用 sql profiler 我看到了 Insert into RelatedEntities .. 我希望只对 MyEntities_Related 连接表进行插入/更新，我不明白为什么 EF 会插入在相关实体表上:(

这是我的代码：

```
public void AddOrUpdate(MyEntity entity) {
    var dbEntity = _context.MyEntities
      .Include(e => e.RelatedEntitis)
      .Where(e => e.ID == entity.ID)
      .SingleOrDefault();

    var newRelated = entity.RelatedEntitis.ToList<RelatedEntity>();
    var dbRelated = dbEntity.RelatedEntity.ToList<RelatedEntity>();

    _context.Entry(dbEntity).CurrentValues.SetValues(entity);

    var comparer = new EqualityComparer();
    var addedRelated = newRelated.Except(dbRelated, comparer).ToList<RelatedEntity>();
    var deletedRelated = dbRelated.Except(newRelated, comparer).ToList<RelatedEntity>();

    addedRelated.ForEach(e => dbEntity.RelatedEntity.Add(e));
    deletedRelated.ForEach(e => dbEntity.RelatedEntity.Remove(e));
}

public class EqualityComparer : IEqualityComparer<RelatedEntity>
{
    public int GetHashCode(RelatedEntity obj)
    {
      return (obj == null) ? 0 : obj.ID.GetHashCode();
    }

    public bool Equals(RelatedEntity x, RelatedEntity y)
    {
      if (ReferenceEquals(x, y)) return true;
      if (x == null || y == null) return false;
      return x.ID == y.ID;
    }
} 
```

db 架构如下所示：

```
|------------------|
| Table MyEntities |
|------------------| 
| int ID //PK      |
|------------------| 

|--------------------------|
| Table MyEntities_Related |
|--------------------------|
| int MyEntityID           |
| int RelatedID            | 
|--------------------------|

|-----------------------|
| Table RelatedEntities |
|-----------------------|
| int RelatedID //PK    |
| string Name           | 
|-----------------------| 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:18:45.990

**解决方案** 我不知道它是否是最好的，但它对我有用，我认为它很有意义。EF 创建了相关实体的副本，因为它们是分离的，我以这种方式更改了我的代码：

```
public void AddOrUpdate(MyEntity entity) {
    var dbEntity = _context.MyEntities
      .Include(e => e.RelatedEntitis)
      .Where(e => e.ID == entity.ID)
      .SingleOrDefault();

    //replace entities with those taken from the context
    var relatedEntities = _context.RelatedEntities;
    var detachedEntities = entity.RelatedEntities;
    entity.RelatedEntities = new List<RelatedEntity>();
    foreach (var ent in detachedEntities)
    {
      entity.RelatedEntities.Add(relatedEntities .Where(e => e.ID == hop.ID).SingleOrDefault());
    }

    var newRelated = entity.RelatedEntitis.ToList<RelatedEntity>();
    var dbRelated = dbEntity.RelatedEntity.ToList<RelatedEntity>();

    _context.Entry(dbEntity).CurrentValues.SetValues(entity);
    _context.Entry(dbEntity.RelatedEntity).CurrentValues.SetValues(entity.RelatedEntitis);

    var comparer = new EqualityComparer();
    var addedRelated = newRelated.Except(dbRelated, comparer).ToList<RelatedEntity>();
    var deletedRelated = dbRelated.Except(newRelated, comparer).ToList<RelatedEntity>();

    addedRelated.ForEach(e => dbEntity.RelatedEntity.Add(e));
    deletedRelated.ForEach(e => dbEntity.RelatedEntity.Remove(e));
} 
```

# c# - 多行标题datagridview？

> ID：15153762
> 
> 赞同：1
> 
> 时间：2013-03-01T08:48:55.990
> 
> 标签：c#, windows, datagridview

如何在 c# Windows 应用程序中创建多标题数据网格视图，如下图所示？

![在此处输入图像描述](../Images/94f11370f2af6ee2ba4d01a957aaa6cc.png)

是否可以在列表视图中实现相同的功能？

# java - 将请求从 struts2 动作转发到非 struts 2 动作？

> ID：15153774
> 
> 赞同：1
> 
> 时间：2013-03-01T08:49:49.697
> 
> 标签：java, model-view-controller, struts2

我有使用专有框架的遗留应用程序，它或多或少类似于 struts 1.2。现在我们已经开始使用 struts 2。在很多地方，我将 html 表单提交给来自 jsp 的旧操作。我想要的是第一个请求转到我的新 struts 2 动作，然后我将请求从那里转发到我的旧动作，以便我在目标旧动作中获取所有源请求参数。我知道有结果类型重定向（如下所述）但这不会将源请求参数转发给遗留操作。

```
@Result(name = "displayCustomer",
        location = "legacyAction.do", type = "redirect")

@Action("display-customer!displayCustomer")
  public String displayCustomer() {
    return "displayCustomer";
  } 
```

我没有发现任何类似于重定向的“转发”类型。我不确定如何将请求从 struts 2 动作转发到非 struts 2 动作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:07:15.293

您可以根据结果类型简单地将控件转发到相应的页面，例如**SUCCESS**。您可以使用**链**结果类型一次执行两个不同的操作。

它看起来像这样：

**使用 XML 配置**

```
 <action class="your_action_path" name="your_action_name" method="your_target_method">
                <result type="chain">your_legacy_action</result>
    </action>

     //Then your_legacy_action_mapping here

<action class="your_legacy_action_path" name="your_legacy_action_name" method="your_target_method">
                <result>your_target_success_page</result>
    </action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:26:12.747

在 struts2 中，默认结果类型被配置为 'dispatcher'。它“转发”请求。尝试设置 type="dispatcher"。检查您的 struts 配置是否正确配置了“调度程序”结果类型。它应该如下所示。

```
<result-types>
   <result-type name="dispatcher" default="true"
                class="org.apache.struts2.dispatcher.ServletDispatcherResult" />
</result-types> 
```

# php - 将 Base64 字符串转换为图像文件？

> ID：15153776
> 
> 赞同：163
> 
> 时间：2013-03-01T08:49:52.130
> 
> 标签：php, base64

我正在尝试将我的 base64 图像字符串转换为图像文件。这是我的 Base64 字符串：

[http://pastebin.com/ENkTrGNG](http://pastebin.com/ENkTrGNG)

使用以下代码将其转换为图像文件：

```
function base64_to_jpeg( $base64_string, $output_file ) {
    $ifp = fopen( $output_file, "wb" ); 
    fwrite( $ifp, base64_decode( $base64_string) ); 
    fclose( $ifp ); 
    return( $output_file ); 
}

$image = base64_to_jpeg( $my_base64_string, 'tmp.jpg' ); 
```

但我得到一个错误`invalid image`，这里有什么问题？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2013-03-01T08:58:47.833

问题是`data:image/png;base64,`包含在编码内容中。这将导致 base64 函数解码时图像数据无效。在解码字符串之前删除函数中的数据，就像这样。

```
function base64_to_jpeg($base64_string, $output_file) {
    // open the output file for writing
    $ifp = fopen( $output_file, 'wb' ); 

    // split the string on commas
    // $data[ 0 ] == "data:image/png;base64"
    // $data[ 1 ] == <actual base64 string>
    $data = explode( ',', $base64_string );

    // we could add validation here with ensuring count( $data ) > 1
    fwrite( $ifp, base64_decode( $data[ 1 ] ) );

    // clean up the file resource
    fclose( $ifp ); 

    return $output_file; 
} 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2018-04-10T14:52:12.447

我正在使用的一种简单方法：

```
file_put_contents($output_file, file_get_contents($base64_string)); 
```

这很有效，因为`file_get_contents`可以从 URI 中读取数据，包括 data:// URI。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2013-03-01T08:53:18.457

您需要删除`data:image/png;base64,`图像数据开头的部分。实际的[base64](https://en.wikipedia.org/wiki/Data_URI_scheme)数据紧随其后。

只需剥离所有内容，包括`base64,`（在调用[`base64_decode()`](https://www.php.net/manual/function.base64-decode.php)数据之前），你会没事的。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-05-25T17:26:24.367

也许像这样

```
function save_base64_image($base64_image_string, $output_file_without_extension, $path_with_end_slash="" ) {
    //usage:  if( substr( $img_src, 0, 5 ) === "data:" ) {  $filename=save_base64_image($base64_image_string, $output_file_without_extentnion, getcwd() . "/application/assets/pins/$user_id/"); }      
    //
    //data is like:    data:image/png;base64,asdfasdfasdf
    $splited = explode(',', substr( $base64_image_string , 5 ) , 2);
    $mime=$splited[0];
    $data=$splited[1];

    $mime_split_without_base64=explode(';', $mime,2);
    $mime_split=explode('/', $mime_split_without_base64[0],2);
    if(count($mime_split)==2)
    {
        $extension=$mime_split[1];
        if($extension=='jpeg')$extension='jpg';
        //if($extension=='javascript')$extension='js';
        //if($extension=='text')$extension='txt';
        $output_file_with_extension=$output_file_without_extension.'.'.$extension;
    }
    file_put_contents( $path_with_end_slash . $output_file_with_extension, base64_decode($data) );
    return $output_file_with_extension;
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-12-31T17:39:29.850

那是一个旧线程，但是如果您想上传具有相同扩展名的图像-

```
 $image = $request->image;
    $imageInfo = explode(";base64,", $image);
    $imgExt = str_replace('data:image/', '', $imageInfo[0]);      
    $image = str_replace(' ', '+', $imageInfo[1]);
    $imageName = "post-".time().".".$imgExt;
    Storage::disk('public_feeds')->put($imageName, base64_decode($image)); 
```

您可以在 laravel 的 filesystem.php 中创建“public_feeds”-

```
 'public_feeds' => [
        'driver' => 'local',
        'root'   => public_path() . '/uploads/feeds',
    ], 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-12T11:44:27.397

```
if($_SERVER['REQUEST_METHOD']=='POST'){
$image_no="5";//or Anything You Need
$image = $_POST['image'];
$path = "uploads/".$image_no.".png";

$status = file_put_contents($path,base64_decode($image));
if($status){
 echo "Successfully Uploaded";
}else{
 echo "Upload failed";
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-21T06:41:58.540

这段代码对我有用。

```
<?php
$decoded = base64_decode($base64);
$file = 'invoice.pdf';
file_put_contents($file, $decoded);

if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename="'.basename($file).'"');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    readfile($file);
    exit;
}
?>
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2018-07-10T12:09:07.227

```
$datetime = date("Y-m-d h:i:s");
$timestamp = strtotime($datetime);
$image = $_POST['image'];
$imgdata = base64_decode($image);
$f = finfo_open();
$mime_type = finfo_buffer($f, $imgdata, FILEINFO_MIME_TYPE);
$temp=explode('/',$mime_type);
$path = "uploads/$timestamp.$temp[1]";
file_put_contents($path,base64_decode($image));
echo "Successfully Uploaded->>> $timestamp.$temp[1]"; 
```

> 这对于图像处理来说已经足够了。特别感谢[Dev Karan Sharma 先生](https://stackoverflow.com/users/10059176/dev-karan-sharma)

# javascript - 通过单击 jquery 中的链接打开新选项卡（窗口）

> ID：15153781
> 
> 赞同：41
> 
> 时间：2013-03-01T08:50:07.393
> 
> 标签：javascript, jquery

我有一个显示带有`go`和`delete`按钮的行的网络应用程序。

如果用户单击`go`，它应该打开新选项卡/窗口，其中包含从行数据构建的 url。

我怎么能在jquery中做到这一点？我正在做的是：

```
$('.go').click( function () {
   var wid = {{ wid|tojson|safe }};
   var sid = $(this).prop('id');
   url = $script_root + '/' + wid + '/' + sid;

   // go to url
}); 
```

一些更新：

我真正想要完成的是动态更新`href`元素`<a>`。

```
<a id="foo" href="#">foo</a>
<script type="text/javascript>
$('#foo').click( function() {
  $(this).prop('href', 'http://www.google.com/');
});
</script> 
```

这不起作用（小提琴：http: [//jsfiddle.net/6eLjA/](http://jsfiddle.net/6eLjA/)）

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-01T08:55:45.283

试试这个：

```
window.open(url, '_blank'); 
```

这将在新选项卡中打开（如果您的代码是同步的，在这种情况下是同步的。在其他情况下它将打开一个窗口）

# css - 通过设置更大尺寸的背景图像来突出显示 img 标签

> ID：15153782
> 
> 赞同：1
> 
> 时间：2013-03-01T08:50:17.270
> 
> 标签：css, background-image, highlight, image-resizing

我有两张图片，一张是大小为 16X16px 的 textbox.png，另一张是 24X24 像素的 IconBG.png。我将 img 标签定义为

```
<img id="g_TextButton"  src="../icons/textbox.png" alt="Text" title="Text" onclick="javascript:void(selectTool(this, 5))"> 
```

单击此按钮后，我正在为 img 标签设置背景 img，如下所示 -

```
function selectTool(objThis) {
    //----some code
    objThis.style.backgroundImage="url('../icons/IconBG.png')";

} 
```

但是由于img标签大小没有预定义，最初会占用16px。选择后当我设置24 px的背景图片时，大小仍然是16px。我无法将img标签大小初始化为24px bz，即使是16px图标重置为 24 像素。

所以我的要求是有一个大小为 24X24 的占位符。最初在其中放置一个 16X16 的 img。Onclick 添加 24X24px 的背景图片。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:23:29.030

因此，您可以仅使用 css 轻松实现此目的：

HTML：

```
<div id="container">
    <img src="../icons/textbox.png" />
</div> 
```

CSS：

```
#container {
    height: 24px;
    width: 24px;
    position: relative;
}

#container:hover {
    background-image: url('../icons/IconBG.png');
}

#container img {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
} 
```

好消息是，:hover 将加载第二个 img (img24px) onload 而不是在第一次调用时加载，就像在 JS 中默认发生的那样。

# c# - 读取大型 .accdb 文件引发异常“现有连接被远程主机强行关闭”

> ID：15153783
> 
> 赞同：0
> 
> 时间：2013-03-01T08:50:17.137
> 
> 标签：c#, asp.net, .net, ms-access

我调试了一些旧的 ASP.NET 应用程序，它试图读取一个巨大的 .accdb 文件（大约 550 000 行）。代码如下：

```
OleDbConnection sourceConnection = new OleDbConnection(
            "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + destinationFile);
        OleDbDataAdapter sourceAdapter = new OleDbDataAdapter("select * from [" + tableName + "]", sourceConnection);
        DataSet sourceDataSet = new DataSet();
        try
        {
            sourceConnection.Open();
            sourceAdapter.AcceptChangesDuringFill = false;
            sourceAdapter.Fill(sourceDataSet, tableName);
        }
        catch (Exception ex)
        {
            _trace.TraceEvent(TraceEventType.Error, 0, ex.Message);
        }
        finally
        {
            sourceConnection.Close();
        } 
```

在某个时刻，我遇到了异常：

> “无法从传输连接读取数据：现有连接被远程主机强行关闭”

```
Server stack trace: 
at     System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.ClientReliableChannelBinder`1.RequestClientReliableChannelBinder`1.OnRequest(TRequestChannel channel, Message message, TimeSpan timeout, MaskingMode maskingMode)
at System.ServiceModel.Channels.ClientReliableChannelBinder`1.Request(Message message, TimeSpan timeout, MaskingMode maskingMode)
at System.ServiceModel.Channels.ClientReliableChannelBinder`1.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Security.SecuritySessionClientSettings`1.SecurityRequestSessionChannel.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
at Access2010.IAccessService.LoadFromMDB(String destinationFile, String tableName)
at Access2010.AccessService.LoadFromMDB(String destinationFile, String tableName) 
```

有人知道它可能是什么以及如何解决它吗？据我了解，重写 SQL 查询以按小块检索数据的最佳选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:46:14.493

我只需使用访问中内置的升迁向导将其全部放入 SQL Express 数据库，然后更改连接字符串。

旁注，不要这样做：

```
"select * from [" + tableName + "]" 
```

改为参数化查询。

# c# - 重定向到 HDFS 中的输出文件

> ID：15153788
> 
> 赞同：1
> 
> 时间：2013-03-01T08:50:28.530
> 
> 标签：c#, redirect, hadoop, hdfs

我希望能够从用户门户重定向到运行 hadoop map-reduce 作业后生成的 hdfs 文件系统中的输出文件页面。

我目前可以使用以下 refpath 重定向到输出文件页面

```
http://{slave}:{port}/browseDirectory.jsp?dir=%2Fuser%2F{$USERNAME}%2F{$OUTPUTFILENAME}&namenodeInfoPort=50070&nnaddr={MASTER}:{PORT} 
```

但这只能在本地访问。如何从远程服务器访问相同的内容？我曾尝试查看 webHdfs api，但未能弄清楚如何使用它。

# mysql - 如何选择连接在一起的两个表的最后 10 行

> ID：15153793
> 
> 赞同：0
> 
> 时间：2013-03-01T08:50:43.237
> 
> 标签：mysql, database, performance, sql-order-by

我有个问题。我想获取连接在一起的两个表（live_st 和 load_balace）的最后 10 行，它们的 ip 以 134 结尾。两个表都有数百万条数据。

我在 mysql 中尝试了这个查询：

```
SELECT live_stats.domain_name
FROM live_stats JOIN load_balance
ON live_stats.user_id=load_balance.unique_id
WHERE load_balance.ip_address like '%134'
ORDER BY  live_stats.created desc limit 10; 
```

它的工作，但太慢了。有什么方法可以加快查询速度；感谢提前；

# xaml - 覆盖 ControlTemplate - VisualState MouseOver 仅在 MouseClick 上执行

> ID：15153797
> 
> 赞同：0
> 
> 时间：2013-03-01T08:50:53.220
> 
> 标签：xaml, silverlight-4.0, silverlight-toolkit, visualstatemanager

我已经覆盖了滚动条的默认模板。它只是一个矩形和一个箭头图片。我有 2 张图片，一张用于正常状态，一张用于 MouseOver。

在我的 VisualStates 中，我更改了 MouseOver 上的图像可见性。

当我现在使用鼠标`over`滚动条时，它什么也不做，但是当我`click`使用图像时，它正在从 NormalPicture 变为 HoverPicture。

我究竟做错了什么？

**`ScrollBarStyle:`**

```
<Style x:Key="ScrollBarStyle" TargetType="ScrollBar">
   <Setter Property="IsTabStop" Value="False"/>
   <Setter Property="Template">
      <Setter.Value>
         <ControlTemplate TargetType="ScrollBar">
             <Grid x:Name="Root">
                 <VisualStateManager.VisualStateGroups>
                     <VisualStateGroup x:Name="CommonStates">
                         <VisualState x:Name="Normal"/>
                         <VisualState x:Name="MouseOver">
                             <Storyboard>
                                 <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="NormalState">
                                     <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                           <Visibility>Collapsed</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                     </DiscreteObjectKeyFrame>
                                 </ObjectAnimationUsingKeyFrames>
                                 <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="HoverState">
                                     <DiscreteObjectKeyFrame KeyTime="0">
                                         <DiscreteObjectKeyFrame.Value>
                                             <Visibility>Visible</Visibility>
                                         </DiscreteObjectKeyFrame.Value>
                                     </DiscreteObjectKeyFrame>
                                  </ObjectAnimationUsingKeyFrames>
                             </Storyboard>
                         </VisualState>
                         <VisualState x:Name="Disabled">
                             <Storyboard>
                                 <DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="Root"/>
                             </Storyboard>
                         </VisualState>
                     </VisualStateGroup>
                  </VisualStateManager.VisualStateGroups>
                  <Grid x:Name="VerticalRoot">
                      <Grid.ColumnDefinitions>
                          <ColumnDefinition/>
                      </Grid.ColumnDefinitions>
                      <Rectangle Stroke="#00000000" StrokeThickness="1" Fill="Black" />
                      <Image x:Name="NormalState" Source="/SlDragDropTest;component/Images/ArrowUpNormal.png"></Image>
                      <Image x:Name="HoverState" Source="/SlDragDropTest;component/Images/ArrowUpHover.png" Visibility="Collapsed"></Image>
                  </Grid>
               </Grid>
         </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style> 
```

# java - javax.faces.view.facelets.TagAttributeException：路径无效

> ID：15153798
> 
> 赞同：2
> 
> 时间：2013-03-01T08:50:58.490
> 
> 标签：java, jsf, openfaces

嗨，我的标签有问题`<ui:include>`，我尝试将页面包含到另一个页面，我得到了

```
javax.faces.view.facelets.TagAttributeException: /index.xhtml @27,51 <ui:include src="index_core/naglowek.xhtml"> Invalid path : index_core/naglowek.xhtml
    com.sun.faces.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:125)
    javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:187)
    javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:187)
    javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:187)
    javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
    com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:187)
    javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
    javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:95)
    com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
    com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:87)
    com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:164)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:902)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:99)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    org.openfaces.util.ResourceFilter.doFilter(ResourceFilter.java:41) 
```

这很奇怪，因为当我使用[此](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets)页面中的示例时，一切正常。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:o="http://openfaces.org/">
<h:head>
    <title>PIR Kreator Ofert</title>
    <script src="/WEB-INF/resources/script.js" type="text/javascript"></script>
</h:head>
<h:body>
    <h:form id="form">

        <!-- EDIT TITLE -->

        <o:tabbedPane>
            <o:subPanel caption="Nagłówek">

                <ui:include src="index_core/naglowek.xhtml"/>

            </o:subPanel>
            <o:subPanel caption="Produkty">

                <ui:include src="index_core/produkty.xhtml" />

            </o:subPanel>

            <!-- INSTALACJA TAB -->

            <o:subPanel caption="Montaz">

                <ui:include src="index_core/montaz.xhtml" />

            </o:subPanel>

            <!-- PANEL USLUGI -->

            <o:subPanel caption="Usługi">

                <ui:include src="index_core/uslugi.xhtml" />

            </o:subPanel>
        </o:tabbedPane>

        <o:commandButton id="printButton" value="Drukuj"
            actionListener="#{pdf.printt}" />

        <!-- AJAX -->

        <o:ajax id="selectService" standalone="true"
            execute=":form:serviceTable" render=":form:selectedServiceTable" />

        <o:ajax id="selectAsm" standalone="true" execute=":form:assemblyTable"
            render=":form:selectedAsmTable" />

        <o:ajax id="setTitleDesc" standalone="true"
            execute=":form:opisArea :form:titleText" />

        <o:ajax id="printProduct" standalone="true"
            execute=":form:resultTablePanel" />

        <o:ajax id="addProduct" standalone="true"
            render=":form:resultTablePanel" execute=":form:produktMenu" />

    </h:form>
</h:body>
</html> 
```

和 naglowek.xhtml 来源：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:o="http://openfaces.org/">

    <h:outputLabel id="dodajTytulCheckbox" />
    <h4>Edytuj tytuł:</h4>
    <o:selectBooleanCheckbox id="addTitleC" value="#{ajaxBean.editTitle}">
        <o:ajax event="click" render="titleText" />
    </o:selectBooleanCheckbox>
    <o:inputText id="titleText" value="#{pdf.title}"
        disabled="#{not ajaxBean.editTitle}" />
    <br />

    <!-- EDIT OPIS -->

    <h:outputLabel id="dodajOpisCheckbox" value="Opis" />
    <o:selectBooleanCheckbox id="addOpisC" value="#{ajaxBean.opis}">
        <o:ajax event="click" render=":form:opisArea" />
    </o:selectBooleanCheckbox>
    <h:panelGroup id="opisArea">
        <o:inputTextarea value="#{pdf.opis}" disabled="#{not ajaxBean.opis}" />
    </h:panelGroup>
    <br />
    <h:commandButton value="Ustaw" type="button"
        onclick="O$('form:setTitleDesc').run()" />

</ui:composition> 
```

![在此处输入图像描述](../Images/21b4e58c36187207ef80bad19a2e1197.png)

我使用了多种方式，例如指定路径：`/index_core/naglowek.xhtml` `index_core/naglowek.xhtml`等。Eclipse 本身给了我一个提示，当我单击名称`naglowek.xhtml`时按住 Ctrl 正确将我带到页面

如何解决？这可能是由使用库 OpenFaces 引起的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:09:09.587

我解决了，它是关于页面上的编码，只需添加以下代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# c# - 如何在非 UI 代码 windows phone 8 中获取调度程序

> ID：15153801
> 
> 赞同：16
> 
> 时间：2013-03-01T08:51:13.280
> 
> 标签：c#, windows-phone-8

我可以`CoreDispatcher`在 Windows 8 中获取对象

```
CoreDispatcher dispatcher = Windows.UI.Core.CoreWindow.GetForCurrentThread().Dispatcher; 
```

但是我怎样才能得到`Dispatcher`in windows phone 8
这样我就可以打电话了

```
Dispatcher.BeginInvoke(delegate
{
    //My statements
}); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-01T09:29:25.730

用于`Deployment.Current.Dispatcher`获取`Dispatcher`Windows Phone 中的对象。

# java - 是具有枚举范围的 int 吗？

> ID：15153802
> 
> 赞同：2
> 
> 时间：2013-03-01T08:51:13.920
> 
> 标签：java, enums

如果我有`int`办法确定它是否在枚举的序数范围内？
这样我就可以安然无恙`theEnum.values()[ordinal];`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T08:52:51.110

```
if (yourInt >= 0 && yourInt < TheEnum.values().length) {
    // safe
} 
```

您`theEnum`应该是枚举类型，而不是该枚举类型的变量。我将它大写为`TheEnum`, 以遵循 Java 命名约定。

# hibernate - Hibernate 中的复合键

> ID：15153803
> 
> 赞同：0
> 
> 时间：2013-03-01T08:51:14.557
> 
> 标签：hibernate

我想实现如下表

```
 CREATE TABLE `item` (
  `country_id` bigint(20) NOT NULL,
  `name` varchar(255) NOT NULL,
  `CREATION_DATE` datetime NOT NULL,
  `description` varchar(255) DEFAULT NULL,
  `point` decimal(19,2) NOT NULL,
  `price` decimal(19,2) NOT NULL,
  `UPDATED_DATE` datetime DEFAULT NULL,
  `VERSION` int(11) DEFAULT NULL,
  `STARTER_PACKAGE` tinyint(1) NOT NULL,
  PRIMARY KEY (`name`,`country_id`),
  KEY `fk_country_id` (`country_id`),
  CONSTRAINT `fk_country_id` FOREIGN KEY (`country_id`) REFERENCES `country` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$ 
```

谁能告诉我如何编写带有注释的实体来实现上表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:13:24.747

Hibernate 有一种非常优雅的方式来处理这种情况：

```
@Entity
@Table(name = "itemPrice")
public class ItemPrice extends PersistentObject {

   @Id
   @ManyToOne
   @JoinColumn(name = "country_id")
   private Country country;

   @Id
   @ManyToOne
   @JoinColumn(name = "item_id")
   private Item item;

   @Column(nullable = false)
   @NotNull
   private BigDecimal point;

   @Column(nullable = false)
   @NotNull
   private BigDecimal price;
} 
```

# stdclass - std 类对象数组

> ID：15153805
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:51:21.510
> 
> 标签：stdclass

我得到了这个 std 类对象的数组，我怎么能在单个数组中调用它，因为你可以看到只有一些值被更改。

```
Array
(
    [0] => stdClass Object
        (
            [movie_id] => 4
            [movie_name] => Harvey
            [genre_id] => 4
            [genre_title] => Action/Adventure
            [rating_id] => 2
            [rating_title] => Pg-16 (USA)
            [person_id] => 14
            [person_name] => John Beck
            [role_title] => producer
        )

    [1] => stdClass Object
        (
            [movie_id] => 4
            [movie_name] => Harvey
            [genre_id] => 4
            [genre_title] => Action/Adventure
            [rating_id] => 2
            [rating_title] => Pg-16 (USA)
            [person_id] => 15
            [person_name] => Henry Koster
            [role_title] => directer
        )

    [2] => stdClass Object
        (
            [movie_id] => 4
            [movie_name] => Harvey
            [genre_id] => 4
            [genre_title] => Action/Adventure
            [rating_id] => 2
            [rating_title] => Pg-16 (USA)
            [person_id] => 16
            [person_name] => Mary Coyle Chase
            [role_title] => writer
        )

    [3] => stdClass Object
        (
            [movie_id] => 4
            [movie_name] => Harvey
            [genre_id] => 4
            [genre_title] => Action/Adventure
            [rating_id] => 2
            [rating_title] => Pg-16 (USA)
            [person_id] => 17
            [person_name] => Oscar Brodney
            [role_title] => writer
        )

    [4] => stdClass Object
        (
            [movie_id] => 4
            [movie_name] => Harvey
            [genre_id] => 4
            [genre_title] => Action/Adventure
            [rating_id] => 2
            [rating_title] => Pg-16 (USA)
            [person_id] => 18
            [person_name] => Myles Connolly
            [role_title] => writer
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:23:25.457

不太确定你想达到什么目的。要仅打印某些成员，请尝试执行以下操作：

```
foreach ($your_array as $key => $value) {

    echo '<pre>';
    echo $value->person_id . " ";
    echo $value->person_name . " ";
    echo $value->role_title . " ";
    echo "\n";
    echo '</pre>';
} 
```

如果您可以打印它，您可以根据需要将其保存到新阵列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:27:02.770

这就是你想要的：

```
echo '<pre>';

foreach ($arr as $key => $value) {
    $newarray[$key]["person_id"]   = $value->person_id;
    $newarray[$key]["person_name"] = $value->person_name;
    $newarray[$key]["role_title"]  = $value->role_title;
}

// var_dump($newarray);
$json = json_encode($newarray);
echo $json;

echo "</pre>"; 
```

你应该阅读一些教程。这些是真正的基础。

# java - Jersey：QueryParam 名称作为数组

> ID：15153806
> 
> 赞同：-1
> 
> 时间：2013-03-01T08:51:21.657
> 
> 标签：java, rest, jersey

我正在寻找一种将以下查询参数映射到球衣的方法：

```
?sort['property1']=asc
?sort['property2']=desc 
```

有没有办法可以将其作为单个查询参数来获取？一个参数化的参数名称，可以这么说吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:58:00.420

您尝试做的事情很奇怪，因为即使在成为关于球衣可能性的难题之前，这也是不遵循 HTTP GET 标准的事情。

在此处查看有趣的评论：[重复 HTTP GET 查询键的权威位置](https://stackoverflow.com/q/1746507/709881)

我认为您不能可靠地解释查询参数，例如： sort['property1']

# javascript - javascript中的继承问题

> ID：15153813
> 
> 赞同：3
> 
> 时间：2013-03-01T08:52:11.673
> 
> 标签：javascript, jquery

我在javascript中使用继承。我陷入了一种情况，我必须检查第一个对象是否在第二个对象中继承。例子 ：

```
 function Parent(name)
   {
     var self = this;

     self.Name = name;

     self.Check = function() {
       for(var i = 0; i < ChildCollection.length ;i++)
       {
          //here i want to check whether self is the object which is
          //inherited in ChildCollection[i] 

          alert(true or false);
       }
     }
   }

   function Child(name)
   {
     var self = this;

     Child.prototype.constructor = Child;   

     self.Name = name;
   }

   $(function() {       

      var ChildCollection = new Array()

      for(var i = 1; i <= 2 ;i++)
      {
         Child.prototype = new Parent("TestParent_" + i);              
         var child = new Child("TestChild_" + i);
         ChildCollection.push(child);
      }             

       ChildCollection[1].Check();
    }); 
```

在上面的代码中，我创建了 2 个类`Parent`和`Child`. 子继承父。我创建了一个`ChildCollection`包含所有子对象的全局数组。在父类中有一个我想创建的检查函数，它应该循环遍历`ChildCollection`数组并检查当前对象的含义（self 或 this）是继承还是当前循环子对象的一部分。

为了清楚起见，我调用了对 ChildCollection 的第二个对象的检查，即`ChildCollection[1].Check()`. 如果我清楚或没有错，那么第一个警报应该是错误的，第二个警报应该是真的。

Please guid me to solve this issue and sorry if i am on totally on wrong track and please explain me what i am doing wrong ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:57:55.690

> In the above code i have created 2 classes Parent and Child. Child inherit Parent.

The way you're doing that is very, very unusual. You're giving `Child` a new and different prototype just before every time you use it. That's probably not what you want to do. [This other answer here on Stack Overflow](https://stackoverflow.com/a/11072626/157247) provides an example of the "usual" way of doing inheritance in JavaScript. I've also written a helper script called [`Lineage`](https://code.google.com/p/lineagejs/) to reduce the typing involved.

> I have create a global `ChildCollection` Array which contains all child objects.

It's not a global, it's a variable within your `ready` callback (the function you're passing into `$()`). It's not accessible from `Parent` where you've defined `Parent`, and so this line:

```
for(var i = 0; i < ChildCollection.length ;i++) 
```

...will fail with a `ReferenceError`.

You can fix that in one of three ways:

1.  Passing `ChildCollection` into the `Parent` contructor as an argument.

2.  Making `ChildCollection` actually global (which I would avoid).

3.  Moving your `Parent` and `Child` functions *into* your `ready` callback so they have access to it.

And actually, to avoid creating globals (`Parent` and `Child`) but avoid having `Parent` rely on a pseudo-global, you can combine #1 and #3.

Re the code comment:

> here i want to check whether self is the object which is inherited in ChildCollection[i]

I don't know what you mean by "inherited" in that sentence, but if you want to know whether `self` is in `ChildCollection`:

```
var found = false;
for(var i = 0; !found && i < ChildCollection.length; i++) {
    if (ChildCollection[i] === self) {
        found = true;
    }
}
alert(found); 
```

# ruby - 使用 watir-webdriver，是否可以使用元素的一部分进行测试

> ID：15153815
> 
> 赞同：2
> 
> 时间：2013-03-01T08:52:18.000
> 
> 标签：ruby, watir-webdriver

使用 watir-webdriver，是否可以使用“href”或“src”元素的一部分进行测试？例如，我有：

`<a href="/auctions/14807"> Growing Nursing Home</a>`

我只想使用 (href =>/auctions/) 而不是整个字符串。

我试过看，我能找到的只是使用部分文本元素的解决方案。任何帮助都会受到极大的欢迎。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:52:14.683

是的，您可以根据元素的 href 或 src 部分来定位元素。大多数定位器允许与字符串（即完全匹配）或正则表达式（即部分匹配）进行比较。

您应该可以使用以下命令单击您的链接：

```
browser.link(:href => /auctions/).click 
```

# objective-c - 谷歌翻译将使用objective-c特殊字符

> ID：15153816
> 
> 赞同：2
> 
> 时间：2013-03-01T08:52:18.837
> 
> 标签：objective-c, translation, google-translate

让我开始说我做了一些功课，但我没有找到任何问题的答案。

我正在尝试使用 translate.google.com/translate_a 网址将单个单词从瑞典语翻译成英语。我在objective-c中这样做。

这是一个例子：

```
word = @"hus"; // result should be "house"

urlPath = [NSString stringWithFormat:@"/translate_a/t?client=t&text=%@&langpair=sv|en", word];
url = [[NSURL alloc] initWithScheme:@"http" host:@"translate.google.com" path:urlPath];
NSLog(@"%@\n\n", url);
request = [[NSMutableURLRequest alloc] init];
[request setURL:url];
[request setHTTPMethod:@"GET"];
myData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
result = [[NSString alloc] initWithData:myData encoding: NSASCIIStringEncoding];
NSLog(@"%@\n\n", result);
self.viewController.textViewGood.text = result; 
```

NSLog 给了我这个网址：
[http ://translate.google.com/translate_a/t?client=t&text=hus&langpair=sv%7Cen](http://translate.google.com/translate_a/t?client=t&text=hus&langpair=sv%7Cen)

NSLog 也显示了正确的结果：

> 2013-03-01 00:07:14.681 testGoogTrans[941:11303] [[["house","hus","",""]]

ETC..

如果我现在在浏览器中调用之前显示的 url，我会得到一个内部具有相同结果的文件。

所以这在应用程序和浏览器上都可以正常工作。

现在，通过仅更改具有特殊字符的单词：

```
word = @"tåg"; // result should be "train" 
```

其余的保持不变，我得到了一个奇怪的不同结果：

控制台中的打印网址：

[http://translate.google.com/translate_a/t?client=t&text=t%C3%A5g&langpair=sv%7Cen](http://translate.google.com/translate_a/t?client=t&text=t%C3%A5g&langpair=sv%7Cen)似乎已正确转义。

如果我在浏览器中调用这个 url，我会得到一个包含以下内容的文件：

> [[["trains","tåg","",""]],[["nom",["TRAIN","MARCH","ROPE","MARCHING","EXPEDITION","PROCESSION"]

等等......这是我所期望的。

相反，在应用程序中，控制台中显示的结果是：

> [[["t\u00C3 \u00A5 g","t\u00C3\u00A5g","",""]],,"sv",,[["t\u00C3",[5],1,0,998, 0,1,0]

ETC...

我相信网址格式正确，我不知道为什么我从应用程序中得到不同的答案。

任何人都对此有所了解，或者可以让我找到解决这个问题的方向吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:57:33.113

我认为这条线是罪魁祸首：

```
result = [[NSString alloc] initWithData:myData encoding: NSASCIIStringEncoding]; 
```

应该是：

```
result = [[NSString alloc] initWithData:myData encoding: NSUTF8StringEncoding]; 
```

当我在 Linux 下的 Chrome 中尝试您的 URL 时，它会下载一个名为`t`and 的文件：

```
$ file t
t: UTF-8 Unicode text, with very long lines, with no line terminators 
```

# php - img src SYSTEMDRIVE

> ID：15153821
> 
> 赞同：0
> 
> 时间：2013-03-01T08:52:42.563
> 
> 标签：php, html, path

可以在 Html 或 PHP 中使用 src 中的驱动器号，如 %SYSTEMDRIVE% 吗？

我需要做类似的事情

```
<img src=%SYSTEMDRIVE%/1.jpg .... 
```

以及如何在 Windows 中检测当前用户名（通过 HTML 或 PHP），如 %USERPROFILE%？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:56:32.323

您可以使用超全局获取 %USERPROFILE% 等环境的值`$_ENV`。因此，例如，`$_ENV['USERPROFILE']`应该为您提供 %USERPROFILE% 的值。

# hibernate - Hibernate createSQLQuery JOIN 抛出异常

> ID：15153822
> 
> 赞同：0
> 
> 时间：2013-03-01T08:52:43.860
> 
> 标签：hibernate

我正在尝试使用休眠从我的数据库的多个表中返回数据。该查询在我的 SQL 服务器上运行良好，但它似乎在休眠状态下不起作用。

```
Query threadQuery = session.createSQLQuery("SELECT CONCAT(t.lastposter) as lastposter, t.lastpost, t.title, t.threadid, t.lastpostid, t.firstpostid, t.forumid, p.pagetext FROM vbulletin.thread AS t INNER JOIN vbulletin.post AS p ON p.postid = t.firstpostid WHERE t.open != 10 AND t.visible = 1 AND t.forumid != 19 AND t.forumid != 20 ORDER BY t.lastpost DESC").setResultTransformer(Transformers.aliasToBean(VbulletinThread.class)); 
```

例外

```
org.hibernate.MappingException: No Dialect mapping for JDBC type: -1 
```

注意：当我从查询中删除 p.pagetext 时它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:59:08.307

我弄清楚了问题所在。这与我使用 2 张桌子的事实无关。

问题是，我需要在我的 SQL 查询中转换相应字段的值才能使其工作。

所以基本上：

```
CAST(p.pagetext as char(255)) as pagetext 
```

# android - 通过在给定索引处添加项目来手动更新光标

> ID：15153826
> 
> 赞同：2
> 
> 时间：2013-03-01T08:52:52.320
> 
> 标签：android, android-cursoradapter, android-cursor, android-cursorloader

我想将一个项目（甚至是 null）插入到特定索引处的游标中。

例如，我需要显示 5 行信息，但我的查询将得到一个只有 3 条记录的游标，因此我需要将其他两列（假设为第二行和第四行）显示为“无可用信息” . 视图逻辑已经存在，它接受一个游标并通过检查该索引处的项目来完成其余的工作，如果在该索引处找到 null，则将显示“无可用信息”。所以现在，当我的游标中的记录少于 5 条时，我必须在其中包含第二个和第四个索引为 null，并且应该将其发送到查看。

但是经过一些初步研究发现，没有这种方法可以在特定索引处插入光标。有人对“手动更新光标”有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:57:54.037

AFAIK 不可能以这种方式更新游标。

我建议更改您的列表以运行 ArrayListAdapter，然后将返回的数据从 Cursor 转换为 ArrayList。

这应该允许您以您提到的方式操作 ArrayList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:55:21.380

您无法更改光标（除非您创建 MatrixCursor 并复制内容 - 无论如何都是不好的做法，因为光标确实应该反映数据，而不是显示详细信息）。

你可以做的是像这样修改你的 CursorAdapter ：

```
/** Returns at least MIN_ITEM */
@Override
public int getCount() {
    return Math.min(MIN_ITEM, super.getCount());
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    if (cursor.isAfterLast()) {
        // Bind 'No information available' to your view
    } else {
        // Your current implementation
    }
} 
```

# css - 当我们已经有 CSS 进行布局时，为什么我们需要在 GWT 中使用布局面板？

> ID：15153827
> 
> 赞同：0
> 
> 时间：2013-03-01T08:52:56.060
> 
> 标签：css, gwt, layoutpanels

当我们已经有 CSS 进行布局时，为什么我们需要在 GWT 中使用布局面板？

例如在 gwt 我们使用 layoutpanel 来布局 StackLayoutPanel

```
layoutpanel.setWidgetLeftWidth(stackpanel, 5, Unit.PCT, 30, Unit.EM); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:26:22.173

三个原因：

A. 更快的编程。

B. 更简洁的代码。

GWT 面板比具有绝对/相对定位的 div 支持更多的功能。您不必使用面板：您可以在 Ui:Binder 中使用 HTML 和 CSS，但是您必须手动执行某些操作。基本上，您必须以接近 jQuery 的级别进行编程。

GWT 面板可以扩展，而 div 无法做到这一点。

C. 浏览器兼容性。

GWT 是在浏览器之间的兼容性大大降低时开发的。它正在慢慢变得不再是一个问题，但仍然存在差异，GWT 甚至支持仍在广泛使用的旧浏览器。

# android - null 致命异常和 SocketTimeoutException：读取超时，Android 套接字，多个客户端

> ID：15153829
> 
> 赞同：0
> 
> 时间：2013-03-01T08:52:58.833
> 
> 标签：android, sockets

我有一个 Java 桌面服务器和多个使用套接字的 Android 平板电脑客户端。两个或三个客户端中的每一个都向服务器发送一条短信，服务器发送一条响应消息。两篇短文。

服务器为每个客户端连接启动一个单独的线程。

问题是我设置了两个客户端并从每个客户端发送短信，然后其中一个客户端在发送一些消息后总是冻结并停止发送或接收更多消息。并非总是如此，但大约 50% 的时间。

我尝试调整套接字的超时时间并将 bufferedWriter 添加到输出流中。但是这两个变化都没有帮助。

桌面java应用程序，服务器我得到：

```
致命的: Fatal excepiton, null, java.net.SocketTimeoutException: Read timed out 
```

一台Android平板电脑，客户端，我得到：

```
 03-01 17:31:13.740: W/System.err(2992): java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer) 
```

有没有共同的原因，或者我可以尝试什么？

完整的服务器 logcat 如下所示：

```
2013/03/01 17:33:17 com.example.lotterygame.MultiThreader run
致命的: null
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
    at java.io.InputStreamReader.read(InputStreamReader.java:167)
    at java.io.BufferedReader.fill(BufferedReader.java:136)
    at java.io.BufferedReader.readLine(BufferedReader.java:299)
    at java.io.BufferedReader.readLine(BufferedReader.java:362)
    at jp.co.forever.lotterygame.MultiThreader.run(MultiThreader.java:43)
    at java.lang.Thread.run(Thread.java:662) 
```

编辑，

在服务器中添加了 null 来自的行，

它在下面的代码中---> while((line = in.readLine())!= null){

```
 @Override
public void run() {
    try {       
        out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);

        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

     System.out.println("streams are setup from new thread\n");

     String line ="";

            while((line = in.readLine())!= null){

                SocketPack spk = new SocketPack(socket, line.trim());
                this.messageFromClient(spk);

            }

              out.close();
              in.close();
              socket.close();
    } // end run
    catch (IOException ex) {
        Logger.getLogger(MultiThreader.class.getName()).log(Level.SEVERE, null, ex);
    }

    } // end run

    public void messageFromClient(SocketPack msgc){
        this.setChanged();
        this.notifyObservers(msgc);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:46:54.170

“null”来自您自己的代码，当您捕获 IOException 时，您会在其中*记录null。*

相关的事情是超时，发生这种情况是因为您*设置*了读取超时，并且它发生了，即对等方在那段时间内没有发送任何内容。

“连接重置”可能是对等方超时导致对等方关闭连接和/或退出的结果。

# php - strtotime没有给出结果

> ID：15153833
> 
> 赞同：0
> 
> 时间：2013-03-01T08:53:08.580
> 
> 标签：php, strtotime

为什么是下面的代码

```
$first_day = strtotime('first day of this month', '2012-06-01');
echo $first_day; 
```

不返回任何结果？字符串为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:11:41.823

正如您所说，没有得到任何响应，因为您在`strtotime`函数中给定的第二个参数不是时间戳。

所以首先转换成时间戳..

见下面的代码：

```
$first_day = strtotime('first day of this month', strtotime('2012-06-01')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:54:17.833

尝试这个 ：

如果php版本低于5.3

```
<?php 
$d = date_create();
print date_create($d->format('Y-m-1'))->format('Y-m-d') 
?> 
```

如果php版本5.3+

```
<?php
    $d = new DateTime('2012-06-20');
    $d->modify('first day of this month');
    echo $d->format('jS, F Y');
?> 
```

这是另一个解决方案：

```
<?php 

echo date('Y-m-d', strtotime( 'first day of '.date('2012-06-01'))); ///time stamp

echo strtotime(date('Y-m-d', strtotime( 'first day of '.date('2012-06-01')))); // formated date

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T08:54:37.300

只需如下使用它，

```
$first_day = strtotime('2012-06-01');
echo $first_day; 
```

一个月的第一个日期

```
<?php
    echo strtotime(date('Y-m-d', strtotime( 'first day of '.date('2012-06-01')));
?> 
```

如果它不起作用，请尝试`date_parse_from_format()`代替`strtotime()`

# c# - 如何概括从逗号分隔值中删除“”或“”

> ID：15153834
> 
> 赞同：1
> 
> 时间：2013-03-01T08:53:08.597
> 
> 标签：c#, .net

我的文件中的值很少，例如：

> "SHOP_6ABC003","SHOP_6ABC002"

但这也可以表示为

> 'SHOP_6ABC003,'SHOP_6ABC002'

甚至没有任何双引号或单引号，例如：

> SHOP_6ABC003,SHOP_6ABC002

现在我正在编写我的代码，假设它将是双引号：

```
 String orderValue = "";
   orderValue = File.ReadAllText(@"C:\Users\Documents\File.txt");

   string[] orderArray = GetList(orderValue, SHOP_PREFIX);

            foreach (var item in orderArray)
            {
                Console.WriteLine(item);
            }

private static string[] GetList(string fileText,string prefix)
        {
            string[] orderArray;
            String orderValue = "";

            orderValue = fileText.Replace(prefix, "");
            orderArray = orderValue.Split(',').Select(x => x.Trim('"')).ToArray();

            return orderArray;

        } 
```

但这里的问题是，如果有人提供单引号或不带引号，我将得到不希望的输出。任何方式我都可以概括解决方案，以便当它在双引号或单引号内或没有任何引号时以相同的方式具有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T08:58:35.120

如何使用要修剪的字符创建一个字符数组？

```
char[] ch = { '\'', '"'};
orderArray = orderValue.Split(',').Select(x => x.Trim(ch)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:01:55.457

var orderValue = fileText.Replace(前缀, ""); orderArray = orderValue.Split(',').ToArray();

无需再用 "" 或 ' 修剪

# php - 我的wordpress网站初始加载太慢。如何改进？

> ID：15153844
> 
> 赞同：2
> 
> 时间：2013-03-01T08:53:52.073
> 
> 标签：php, wordpress, load-time

我托管了一个 wordpress 网站[kerala.letmeshare.org](http://kerala.letmeshare.org)。但是加载时间太长了。好像不是网络问题。同一域上的静态页面照常加载（更快）。可能是什么原因？

我使用 Performance Profiler Plugin 进行了分析，并生成了以下报告。

![在此处输入图像描述](../Images/353ad1510e9ebef2a45a8eadd105ddda.png)

![在此处输入图像描述](../Images/97595266ccde8e1142ad89e41271564f.png) ![在此处输入图像描述](../Images/430fac845060cac91982d3ee0a8a5212.png) ![在此处输入图像描述](../Images/5c14119536563fc79df826bae347deb8.png) ![在此处输入图像描述](../Images/efbb664bed314bcdf8786dd2286f6f9b.png)

**我怎样才能提高性能。我联系了我的托管服务提供商，他们测试得很好，服务器加载时间、网络等都没有问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T08:59:32.500

原因可能是：

也许您的 PHP 在一个单独的进程中按 CGI 或 FastCGI 运行，该进程在一段时间不活动后关闭。[如果您在正常运行时间监控服务](http://uptime.openacs.org/uptime/about.adp)上注册，它会改变吗？像[W3 Total Cache](http://wordpress.org/extend/plugins/w3-total-cache/)这样的缓存插件也可能有帮助。

这种行为的典型原因之一是如果您在前端加载 RSS 提要。它们的缓存过期了，下次你会暂停很长时间，因为它们需要通过网络获取。

尝试在本地服务器上复制它，它将为您提供更多故障排除选项 - 最终的一种是制作完整的分析器转储（例如使用 xdebug）并分析它。

# 页面速度优化

*   此页面向 kerala.letmeshare.org 发出 30 个可并行化请求（减少它们）

*   Cachea 资源的新鲜寿命很短。

*   [http://kerala.letmeshare.org/wp-content/themes/TheTravelTheme/includes/timthumb.php?src=http://kerala.letmeshare.org/](http://kerala.letmeshare.org/wp-content/themes/TheTravelTheme/includes/timthumb.php?src=http://kerala.letmeshare.org/) .... [删除这些循环 - 再次请求请求循环相同主机名]

*   主页大小 1.2 MB [减小大小 - 优化图像]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:32:01.137

尝试使用 wp 总缓存插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-21T15:02:29.940

如果您使用的是 IIS，则需要更改应用程序池回收设置以禁用超时

在您的应用服务器上，打开 IIS 管理器

在左窗格（连接）中，选择应用程序池。

在中间窗格（应用程序池）中，选择 AppPool。

在右窗格（操作）中，选择 Edit Application Pool > Recycling...（不是 Recycle... 任务）。

在回收条件窗口中，确保清除所有复选框（未选中）。

单击下一步，然后单击完成。

再次在右窗格（操作）中，选择 Edit Application Pool > Advanced Settings...</p>

在 Advanced Settings 窗口的 Process Model 下，将 Idle Time-out (minutes) 设置为零 (0)。

点击确定

返回左窗格（连接），选择站点。

选择默认网站

在右侧窗格（操作）中，选择管理网站 > 高级设置...</p>

在“高级设置”窗口的“连接限制”下，将“连接超时”设置为零 (0)。

保存设置更改。

重新启动 IIS。

# asp.net - 匿名用户被授权访问 register.aspx 但被重定向到登录页面

> ID：15153845
> 
> 赞同：1
> 
> 时间：2013-03-01T08:53:51.857
> 
> 标签：asp.net, authorization

试图将匿名用户限制在 login.aspx、register.aspx 和 Site.css 文件中，并通过身份验证以访问整个站点。目前匿名可以访问 login.aspx 和 Site.css 作为样式正确显示。但是，当我单击 register.aspx 链接时，我会被重定向到 login.aspx 页面。

在 web 根目录下我的 web.config 下方。目录结构中没有其他 web.configs。我不知道我是否应该寻找其他任何地方（我知道 WSAT 有时可以保留规则，但不确定是否被根 Web.config 取代）。

只是想登录和注册文件引用母版页这是否也需要明确授权？虽然不会解释为什么登录对匿名有效，但注册却不行。

谢谢你的帮助！安东尼。

```
<?xml version="1.0"?>

<configuration>
  <connectionStrings>
    <add name="************"
         connectionString="Data Source=**********; Initial Catalog=************; Integrated Security=SSPI; Persist Security Info=False; Trusted_Connection=Yes"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <location path="Register.aspx">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="Login.aspx">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="Site.css">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms loginUrl="~/Website/Login.aspx" timeout="2880" />
    </authentication>

    <authorization>
      <deny users="?"/>
    </authorization>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="8" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="***********" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="**********" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="***********" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T15:01:53.040

此代码将只允许匿名用户：（注意允许后添加的拒绝节点！

```
<location path="Register.aspx">
    <system.web>
      <authorization>
        <allow users="?"/>
        <deny users="*" />
      </authorization>
    </system.web>
  </location> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T09:09:08.017

尝试更改路径以包含 ~/Website，与您的表单身份验证登录位置相同。您不需要指定登录页面，默认情况下它允许访问，因为它是您的表单身份验证设置中的 LoginUrl。

```
 <location path="~/Website/Register.aspx">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location>

  <location path="~/Website/Login.aspx">
    <system.web>
      <authorization>
        <allow users="?"/>
      </authorization>
    </system.web>
  </location> 
```

# c++ - c ++将_bstr_t转换为int并将int转换为_bstr_t

> ID：15153846
> 
> 赞同：0
> 
> 时间：2013-03-01T08:53:53.180
> 
> 标签：c++, int

我遇到一个问题，这是我的代码，

```
 _bstr_t bstrTrans=L"2";
    wsprintf(buf,L"insert into inven(ID) values(%s)",(wchar_t *)bstrTrans)//insert into database
//this can work fine, now we want to let bstrTrans add 1, likes this
            int bstrTrans2 = atoi(bstrTrans) + 1;
    wsprintf(buf,L"insert into inven(ID) values(%s)",(wchar_t *)bstrTrans2 )
// now ,it cannot work. 
```

所以任何机构都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:06:03.003

未经测试，但应该可以正常工作：

```
const _wchar_t pBuffer[16] = {0};
wsprintf(pBuffer, L"%u", bstrTrans2)
_bstr_t bstrTrans3(pBuffer);
wsprintf(buf,L"insert into inven(ID) values(%s)",(wchar_t *)bstrTrans3 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:17:59.360

为什么不简单 s -> d ？

```
 _bstr_t bstrTrans=L"2";
    wsprintf(buf,L"insert into inven(ID) values(%s)",(wchar_t *)bstrTrans) 

//insert into database
//this can work fine, now we want to let bstrTrans add 1, likes this
    int bstrTrans2 = atoi(bstrTrans) + 1;
    wsprintf(buf,L"insert into inven(ID) values(%d)",bstrTrans2 ) 
```

编辑：嗯，这个工作？

```
 _bstr_t bstrTrans=L"2";
    wsprintf(buf,L"insert into inven(ID) values(%s)",(wchar_t *)bstrTrans) 

//insert into database
//this can work fine, now we want to let bstrTrans add 1, likes this
    char t[30];
    bstrTrans = itoa ( atoi (bstrTrans) + 1 , t,10);
    wsprintf(buf,L"insert into inven(ID) values(%s)",(wchar_t *)bstrTrans) 
```

# c# - 动态改变控件的大小？

> ID：15153851
> 
> 赞同：0
> 
> 时间：2013-03-01T08:53:59.850
> 
> 标签：c#, wpf, resize, controls, overriding

我创建了一个派生类`UserControl`
我的任务是控制高度和宽度的大小比例。（如果将容器插入到控件中，则会调整它的大小。）我需要控件是严格的正方形。

应该怎么做才能改变控件的新维度？`SizeChangedEventArgs.NewSize`属性是只读的。

```
private void MyControl_SizeChanged(object sender,SizeChangedEventArgs e)
{
    if (e.NewSize.Height!=e.NewSize.Width)
    {
        // to-do ?
    }
} 
```

在我的情况下，宽度和高度是 NaN，因为模式设置为自动。我无法手动更改 Width 或 Height 属性，因为那时 Control 将自动固定大小，并且在您缩放放置它的网格时不会改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:23:51.317

如果您希望控件完全是方形的，最简单的方法是使用如下绑定：

```
<Control Width="{Binding RelativeSource={RelativeSource Self}, Path=ActualHeight}"/> 
```

**编辑** 好的，看起来你可以很好地使用你的事件处理程序：

```
FrameworkElement control =(sender as FrameworkElement);
double longerSideLength = (control.Width >= control.Height ? control.Width : control.Height);
control.Width = longerSideLength;
control.Height = longerSideLength; 
```

您可能希望为此添加一些验证以减少呼叫次数...

# android - 如何在使用 ViewPager 滑动时禁用片段中的列表视图

> ID：15153857
> 
> 赞同：0
> 
> 时间：2013-03-01T08:54:22.433
> 
> 标签：android, listview, android-viewpager

我正在使用由多个片段组成的普通视图寻呼机，直到这里一切对我来说都很好。我会分步说明，

a)View-Pager 由多个 Fragment 组成，每个 Fragments 由 List 视图组成。
b) 滑动时，View_pager 平滑滑动。但这是我的问题。

当用户尝试滑动视图寻呼机时，列表视图 OnitemClickListner(或)OnTouchListner 被覆盖，需要时间来滑动

我该如何克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:16:36.613

当您尝试刷卡时，请执行以下操作：

```
ListView.setEnabled(false); 
```

当你想让它启用时

```
ListView.setEnabled(true); 
```

希望这会奏效

# c# - 从计数行中查找字段

> ID：15153864
> 
> 赞同：0
> 
> 时间：2013-03-01T08:54:38.987
> 
> 标签：c#, sql, arrays

实际上我有一个用于预订车辆的 sql 表。我从需要选择 Time_From 和 Time_To 的表格中预订车辆。

我需要在这里添加一个条款：- 如果在同一日期已经预订了车辆，那么您不能在该时间段之间预订该车辆，在您可以预订的时间段之外。

在下面查看我的预订信息

![在此处输入图像描述](../Images/6465f261bf6eebedb39c6571ddc68088.png)

u2ogq - 点击查看下一张图片...

我不知道在特定日期预订车辆的次数。如何查看唯一日期的唯一车辆的所有车辆预订。我需要检查预订时间段。我需要计算特定日期特定车辆的行数。

请给我提示如何将逻辑放在车辆嘘声表格上。

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:12:40.230

好的，您需要创建一个查询，该查询返回该车辆在该期间的预订，这称为子查询。在子查询中，您可以将“基本”查询中的列中的值传递给子查询。子查询逐行获取值并将它们用作参数来过滤其结果[http://allenbrowne.com/subquery-01.html](http://allenbrowne.com/subquery-01.html)为（对我而言）提供了一组关于使用子查询的最佳清晰示例（是的）最初是为访问而编写的 - 但 MS-SQL 也不例外）让您了解这些非常有用，因为在很多情况下它们非常有用。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:55:34.733

如评论中所述，您对两种情况感兴趣：

案例 1\. 对于给定的汽车和日期，您要检查汽车是否可用

```
 DECLARE @car VARCHAR(20) 
    DECLARE @From DATETIME
    DECLARE @To DATETIME

    SET @car = 'your car'
    SET @From = ..
    SET @To = ..

    SELECT CASE
        WHEN (
            SELECT COUNT(1) FROM booking 
                WHERE vehilce = @car
                AND (@From >= vehilce.From AND @From <= vehilce.To)
                OR (@T0 >= vehilce.From AND @T0 <= vehilce.To)
            ) >= 1 THEN "not available" 
        ELSE "available" 
        END 
```

案例 2\. 对于给定的汽车，您希望获得未预订汽车的时间段

```
SELECT vehicle , previousTo ,nextFrom FROM
            (
                SELECT t1.vehicle AS vehicle, t1.From AS previosFrom, t1.To AS previousTo , t2.From AS nextFrom, t2.To AS nextTo 
                FROM booking t1
                JOIN booking t2 ON t1.vehicle,t2.vehicle OR t1.To < t2.From
                WHERE vehicle= @car
                GROUP BY vehicle, previosFrom, previousTo
                HAVING nextFrom = MIN (nextFrom)
            ) a 
```

# python - 三重嵌套循环（while 循环内的 for 循环内的 while 循环）

> ID：15153866
> 
> 赞同：0
> 
> 时间：2013-03-01T08:54:49.233
> 
> 标签：python, nested-loops

我正在尝试使我的三重嵌套循环工作。

我的代码是这样的：

```
c = 4
y1 = []
m1 = []
std1 = []
while c < 24:
        c = c + 1
        a = []
        f.seek(0, 0)    
        for columns in ( raw.strip().split() for raw in f ):
                a.append(columns[c])    
                x = np.array(a, float)    
        not_nan = np.logical_not(np.isnan(x))    
        indices = np.arange(len(x))    
        interp = interp1d(indices[not_nan], x[not_nan], kind = 'nearest')    
        p = interp(indices)

        N = len(p)
        dt = 900.0 #Time step (seconds)
        fs = 1.0 / dt #Sampling frequency
        KA,PSD = oned_Fourierspectrum(p,dt) # Call Song's 1D FS function
        time_axis = np.linspace(0.0, N, num = N, endpoint = False) * 15 / (60 * 24)
        plot_freq = 24 * 3600.0 * KA #Convert to cycles per day
        plot_period = 1.0 / plot_freq # convert to days/cycle
        fpsd = plot_freq * PSD
        d = -1
        while d < 335:
                d = d + 1
                y = fpsd[d]
                y1 = y1 + [y]
                m = np.mean(y1)
        m1 = m1 + [m]
print m1 
```

我的目的是列出`[mean(fpsd[0]), mean(fpsd[1]), mean(fpsd[2]).. mean(fpsd[335])]`. 每个`y1`都是`fpsd[d]`.

我检查了; 它在第二个 while 循环之前工作得很好，我可以得到`fpsd[d]`. 但是，对于第二个完整循环，它肯定会产生错误的数字。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:01:59.700

如果您希望 m1 成为均值的累积列表，则需要将最后一行缩进到最后的 while 块内。

```
while d <335:     
    d = d + 1     
    y = fpsd[d]     
    y1 = y1 + [y]       
    m = np.mean(y1)
    m1 = m1 + [m] 
```

# html - 在英文 HTML 文档中 - 如何为搜索引擎引用本地化的德文？

> ID：15153867
> 
> 赞同：0
> 
> 时间：2013-03-01T08:54:52.147
> 
> 标签：html, localization

有一个英文 html 页面，有没有办法将搜索机器人提示到本地化的替代页面？我在想一些看起来像这样的东西：

**index.html**（英文）：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
...
 <tag ref-lang="de" ref-page="index_de.html">
...
<body><p>Yes, English in here!</p></body>
</html> 
```

和相反

**index_de.html**（德语）：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de">
...
 <tag ref-lang="en" ref-page="index.html">
...
<body><p>Ja, Deutsch hier drin!</p></body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:09:09.713

最好的方法是链接，在内容中可见（它也可以帮助人们）：

```
<span lang="de">Diese Seite auf Deutsch</span> / This page in German:
<a lang="de" hreflang="de" href="index_de.html" rel="alternate">
Bemerkungen über den Weltgeist</a> 
```

您也可以使用`link`元素，但不太确定搜索引擎会使用它，人类读者很可能会弄乱它，因为它是不可见的：

```
<link hreflang="de" href="index_de.html" rel="alternate" lang="de" title=
"Bemerkungen über den Weltgeist"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T23:03:25.133

谷歌在站点地图中有一个标识符，你需要使用 hreflang="es" 和 rel="alternate"

请参阅[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=2620865](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=2620865)

和

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182192](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182192)

# java - 链接列表插入后

> ID：15153870
> 
> 赞同：1
> 
> 时间：2013-03-01T08:55:05.023
> 
> 标签：java

我是一个刚刚学习Java的学生。明天我有一个大测试，我对某行代码感到困惑。

insertAfter 方法查找传递给该方法的linkedList 中的数字，并在匹配后插入一个新节点。我不明白怎么

```
 curr.setNext(curr.getNext()) 
```

将带我们到列表中可能是我们正在寻找的数字的下一个节点。那么这个命令是如何遍历链表的呢？

curr=curr.getNext() 不是更有意义吗？

谢谢，对不起，如果这很简单......我现在很困惑

```
// assume firstInList is in the list
public void insertAfter(int firstInList, Node toAdd){
    Node curr = head;

    while( curr.getData() != firstInList ){
        curr.setNext(curr.getNext());
    }

    curr.setNext(toAdd);        
}

   Node class
  {
   int getData() {return data};
   void setData(int data) {this.data =data};
   Node getNext() {return next};
   void setNext(Node next) {this.next = next};
  } 
```

}

**附加方法** 该方法被调用

```
 public void insertBefoe (Node, inList, Node toAdd) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:07:03.843

看起来很清楚，代码应该是：

```
curr = curr.getNext() 
```

代替

```
curr.setNext(curr.getNext()); 
```

此外，以下内容被破坏：

```
curr.setNext(toAdd); 
```

执行此操作后，列表后面的部分`firstInList`将丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:04:07.477

代码看起来不正确。

头从哪里来？看起来它永远不会从while循环中出来，除非它`setNext(..)`也以某种方式改变了代码`getData()`

不幸的是，由于我们没有全貌，因此很难提供帮助

# extjs - Ext JS 4 中的可重用性

> ID：15153872
> 
> 赞同：1
> 
> 时间：2013-03-01T08:55:11.297
> 
> 标签：extjs, extjs4, reusability

我的项目中有很多可重用的代码（一些 GUI、网格等）。Extjs 4 是否提供任何处理可重用代码的功能？示例：Java 具有可导入任何项目的库的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T14:07:20.693

如果您非常了解 ExtJs 的核心，它会提供高度的可重用性。

这些不同的概念浮现在脑海中：

# 班级制度

ExtJs 最强大的特性之一是一切都被组织成一个类层次结构，所以本质上设计理念类似于 JAVA 或 C++ 中的设计理念。

例如，考虑您的网格从不显示标题。你会写：

```
Ext.define('HeadlessGrid', {
    extend: 'Ext.grid.Panel',

    hideHeaders: true,
}); 
```

因此`HeadlessGrid`继承自`Ext.grid.Panel`并仅修改其`hideHeaders`配置。您可以更改组件的许多其他配置，还可以更改通过覆盖其方法来完成的行为。

有时，您希望 Ext 类本身改变，而不是继承 Ext 类。

所以是这样的：

```
Ext.override( Ext.grid.Panel, {
    hideHeaders: true,
}); 
```

表示默认情况下所有网格组件都不会显示标题。

# 命名空间

“库”的概念可以使用命名空间来实现。因此，要继续前面的示例，您可能有：

```
Ext.define('Ext.Juice.HeadlessGrid', {
    extend: 'Ext.grid.Panel',

    hideHeaders: true,
}); 
```

现在`HeadlessGrid`属于`Ext.Juice`命名空间。

你可以像这样设置你的类加载器：

```
Ext.Loader.setPath('Ext.Juice', '../../libs/Juice'); 
```

现在，该文件夹下的任何类都可以被您编写的任何应用程序重用。

# 插件

插件允许您通过组合而不是继承来扩展（可见）组件。因此，将此插件添加到任何网格都会隐藏标题：

```
Ext.define("Ext.plugin.Decapitator", {
    extend   : "Ext.AbstractPlugin",
    alias    : "plugin.decapitator",

    init : function( aPanel ) { 
        aPanel.hideHeaders = true;
    },

}); 
```

# 混合

Mixins 允许您将类混合在一起，非常类似于多重继承。

以下代码（来自文档）将`CanSing`类与`Musician`类混合在一起。

```
Ext.define('CanSing', {
     sing: function() {
         alert("I'm on the highway to hell...")
     }
});

Ext.define('Musician', {
     mixins: ['CanSing']
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T12:07:00.907

@Mchl，

你使用的是MVC结构还是extjs 4.x版本的通用结构。如果您使用的是 MVC 结构，您可以在 app 文件夹中创建一个单独的文件夹（*已经存在名为 view、model、controller*的文件夹），例如。应用程序/组件。并使用 as 创建类

Ext.define('MyApp.component.componentName', {.....});

请注意，您必须包含 Ext.require('MyApp.component.componentName') 才能预加载代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T10:57:07.617

您可以使用（或使用 xtypes）定义一个类`Ext.define`并在整个应用程序中重用它。`Ext.create`

如果您在其他项目中需要相同的屏幕/类，您可以复制定义类的文件并使用它。

**例子：**

```
//Defining Class
Ext.define('Stack.Overflow', {
    alias: 'widget.SO',

    someProperty: 'something',
    someMethod: function(s) {
        alert(s + this.someProperty);
    }
});

//Creating class with Ext.create:
var myClass = Ext.create('Stack.Overflow', {
    extraProperty: 1337
});

//Creating component inline:
var panel = Ext.widget('panel', { // Equivalent to Ext.create('widget.panel')
    title: 'Panel',
    items: [{
        xtype: 'SO',
        extraColor: '#BADA55'
    },{
        xtype: 'SO', //reusable class
        extraColor: '#FFFF00'
    }]
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:31:29.767

是……一样的……把你想重用的组件放在一个库中，然后`Ext.require()`用来导入到你的项目中。

# python - Python多线程：管理器字典不可序列化

> ID：15153876
> 
> 赞同：2
> 
> 时间：2013-03-01T08:55:15.620
> 
> 标签：python, json, serialization, dictionary, multiprocessing

我设法将多线程放在 python 脚本中。我使用多处理模块的管理器在多个线程上创建和共享一个字典。

在我的脚本结束时，我想将 dict 作为 json 输出到一个文件中，所以我这样做：

```
output = open(args.file,'w')
output.write(json.dumps(data)) 
```

但是我出错了，说经理字典不可序列化：

```
TypeError: <DictProxy object, typeid 'dict' at 0x2364210> is not JSON serializable 
```

序列化我的 dict 的聪明方法是什么？我必须将键值复制粘贴到另一个 - 通常 - 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-30T16:18:11.783

## 如果 dict 值都是可序列化的

看起来简单地通过`DictProxy`构造`dict`函数允许您将数据序列化为 JSON。下面的示例来自 Python 3.6：

```
>>> import multiprocessing, json
>>> m = multiprocessing.Manager()
>>> d = m.dict()
>>> d["foo"] = "bar"
>>> d
<DictProxy object, typeid 'dict' at 0x2a4d630>
>>> dict(d)
{'foo': 'bar'}
>>> json.dumps(d)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  ...
TypeError: Object of type 'DictProxy' is not JSON serializable
>>> json.dumps(dict(d))
'{"foo": "bar"}' 
```

如您所见， while`d`是一个`DictProxy`, 使用`json.dumps(dict(d))`而不是`json.dumps(d)`允许数据被序列化。如果您使用`json.dump`，则同样适用。

## 如果某些 dict 值也是 DictProxies

`DictProxy`不幸的是，如果 中的值也是，则上述方法不起作用`DictProxy`。在此示例中创建了这样一个值：

```
>>> import multiprocessing
>>> m = multiprocessing.Manager()
>>> d = m.dict()
>>> d["foo"] = m.dict() 
```

解决方案是扩展`json.JSONEncoder`类以处理`DictProxy`对象，如下所示：

```
>>> import multiprocessing, json
>>> class JSONEncoderWithDictProxy(json.JSONEncoder):
...     def default(self, o):
...             if isinstance(o, multiprocessing.managers.DictProxy):
...                     return dict(o)
...             return json.JSONEncoder.default(self, o)
...
>>> m = multiprocessing.Manager()
>>> d = m.dict()
>>> d["foo"] = m.dict()
>>> d["foo"]["bar"] = "baz"
>>> json.dumps(d, cls=JSONEncoderWithDictProxy)
'{"foo": {"bar": "baz"}}'
>>> # This also works:
>>> JSONEncoderWithDictProxy().encode(d)
'{"foo": {"bar": "baz"}}' 
```

当 JSON 编码器遇到 a`DictProxy`时，它会将其转换为 a`dict`然后对其进行编码。有关详细信息，请参阅[Python 文档](https://docs.python.org/3.6/library/json.html#json.JSONEncoder.default)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:13:56.783

...“相当”简单。

我看到了[这个问题的答案](http://bugs.python.org/issue9733)。

我必须在字典的键上使用 iter() 来创建一个可以序列化的新“常用”字典。

# java - JPA 从具有多对多关联的集合中选择

> ID：15153877
> 
> 赞同：6
> 
> 时间：2013-03-01T08:55:17.577
> 
> 标签：java, jpa, collections, many-to-many

我有 2 个具有多对多关联的实体类。

调制点：

```
@Entity
@Table(name = "MOD_PM")
public class ModPm extends WebPageObject implements Serializable, IDBNamedEntity {

    private static final long serialVersionUID = 1L;

    public final static String Q_GET_WITHOUT_STATUS_FOR_SCOPE = "ModPm.getWithoutStatusForScope";

    @Id
    private long id;
    ....
    @ManyToMany
    @JoinTable(name = "MOD_PM_SCOPE_TYPES",
            joinColumns = @JoinColumn(name = "PM_ID"),
            inverseJoinColumns = @JoinColumn(name = "SCOPE_TYPE_ID")
    )
    private List<ModScopeType> modScopeTypes; 
```

模组范围类型：

```
@Entity
@Table(name = "MOD_SCOPES")
@Cacheable
public class ModScopeType extends WebPageObject implements Serializable {

    private static final long serialVersionUID = 1L;

    public final static String Q_GET_ALL = "ModScopeType.getAll";

    @Id
    @Column(name = "ID")
    private long id;
    ....
    //bi-directional many-to-many association to ModPm
    @ManyToMany
    @JoinTable(name = "MOD_PM_SCOPE_TYPES",
            joinColumns = @JoinColumn(name = "SCOPE_TYPE_ID"),
            inverseJoinColumns = @JoinColumn(name = "PM_ID")
    )
    private List<ModPm> modPms; 
```

是否可以从 MOD_PM 表中选择在 MOD_PM_SCOPE_TYPES 表中有 SCOPE_TYPE_ID=1 记录的实体？

本机 SQL 查询：

```
SELECT ID, NAME FROM MOD_PM WHERE ID IN (SELECT PM_ID FROM MOD_PM_SCOPE_TYPES WHERE SCOPE_TYPE_ID=1) 
```

如何将此查询转换为 JPQL？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T10:09:38.753

当您在查询中引用 SCOPE_TYPE_ID 时，您指的是什么？可能是 ScopeType 的 ID 或我没有看到的其他字段。我假设缺少范围类型 id 字段。

试试这个：

```
select p from ModPm p join p.modScopeTypes type where type.scopeTypeId = 1 
```

# jasper-reports - 如何在 Jasper IReport 中使用时间戳参数的任何示例

> ID：15153878
> 
> 赞同：1
> 
> 时间：2013-03-01T08:55:21.747
> 
> 标签：jasper-reports, ireport

谁能帮助我如何在**Jasper IReport**中使用时间戳参数？
我正在使用这种新格式`java.sql.Timestamp(2013,2,26,3,15,0,0)`，但它在查询窗口中引发错误，但是当我通过提示传递参数时，它以以下格式显示时间

> 26-02-13 凌晨 3:26

JRXML 供参考：

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:10:18.063

试试这个

内部java类

```
 Map parameters = new HashMap();
   parameters.put("From_Date",Timestamp.valueOf("2005-06-01 00:00:00.000000"));
   JasperPrint jp=JasperFillManager.fillReport(jr, parameters,cn); 
```

在 jrxml 中

```
<parameter name="From_Date" class="java.sql.Timestamp"/> 
```

jrxml的详细部分

```
 <detail>
        <band height="125" splitType="Stretch">
            <textField>
                <reportElement uuid="974661e4-5ac1-4ab2-b933-27f132f4498b" x="70" y="35" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{From_Date}]]></textFieldExpression>
            </textField>
        </band>
    </detail> 
```

# python - 写入文件仅在第一次执行时提供新行

> ID：15153883
> 
> 赞同：0
> 
> 时间：2013-03-01T08:55:58.483
> 
> 标签：python

我第一次执行这个程序时，生成的文件除了换行之外没有任何内容。但是我第二次执行它时，它会正确写入“out.txt”，但第一次执行的新行仍然存在。为什么第一次不能正常工作？

```
bhaarat = open('bhaarat.txt', 'r+')
bhaarat_read = bhaarat.read()

out = open('out.txt', 'r+')
out_read = out.read()

bhaarat_split = bhaarat_read.split()

for word in bhaarat_split:
    if word.startswith('S') or word.startswith('H'):
        out.write(word + "\n")

bhaarat.write('\n23\. English\n')
print out_read
print bhaarat_read

bhaarat.close()
out.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:19:26.967

这是 Windows 的问题。解决方法（[参见 python 邮件列表](http://mail.python.org/pipermail/python-bugs-list/2005-August/029886.html)）是使用

```
f.seek(f.tell()) 
```

在调用`read()`和使用其中一个选项打开`write()`的文件之间。`f``+`

适应您的问题，您必须`bhaarat.seek(bhaarat.tell())`在第一次使用 读取文件之后`bhaarat_read = bhaarat.read()`和使用`bhaarat.write('\n23\. English\n')`. 你的`out`.

在 Python3 中，此问题已得到修复，因此还有一个切换的理由 :)

* * *

编辑以下代码适用于我。文件`bhaarat.txt`和`out.txt`都必须存在。

```
bhaarat = open('bhaarat.txt', 'r+')
bhaarat_read = bhaarat.read()
bhaarat.seek(bhaarat.tell())
out = open('out.txt', 'r+')
out_read = out.read()
out.seek(out.tell())
bhaarat_split = bhaarat_read.split()

for word in bhaarat_split:
    if word.startswith('S') or word.startswith('H'):
        out.write(word + "\n")

bhaarat.write('\n23\. English\n')
print out_read
print bhaarat_read

bhaarat.close()
out.close() 
```

# c# - 如何将 0-65535 转换为等效的 Int16 -32768-32767？

> ID：15153887
> 
> 赞同：1
> 
> 时间：2013-03-01T08:56:08.030
> 
> 标签：c#

我确定这是一个非常简单的答案，但我无法弄清楚。我已经看到了一个`UInt32`格式值，尽管它的最大值是 65535。`Int16`为了演示目的，需要将其转换为格式，因此显示的范围是 -32768 到 32767。

一个简单`Convert.ToInt16(65535)`的抛出一个异常，即 65535 对于`Int16`.

是否有内置函数来处理这个问题，或者有人可以指出我的解决方案吗？

编辑：在进一步讨论后再次编辑 - 65535 不是范围移位它实际上是 -32768，所以我想要从 UInt32 65535 转换为 Int16 -32768。感谢您迄今为止的所有回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T08:59:07.187

也许我错过了一些东西，但你能不能只做这样的事情？

```
UInt32 val = 65535;
Int16 result = (Int16)(val - 32768) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T09:13:00.000

这取决于你到底想要什么。您可以使用：

```
int i = 65535;
Int16 x = (Int16) i; 
```

这会将 65535 映射到 -1，将 65534 映射到 -2，等等

但是，如果您想将范围从 0-65535 更改为 -32768 - +32767，那么您可以使用

```
int yourvalue = 65535; // value between 0...65535
int i = yourvalue - 32768;
Int16 x = (Int16 ) i; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T09:03:21.217

假设您想将这些位重新解释为 int16（即 65535 -> -1）

```
UInt32  x = 65536;
Int16   y = BitConverter.ToInt16( BitConverter.GetBytes( x ), 0 ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T08:59:18.187

没有内置任何内容，因此您需要自己编写。这是一个扩展方法：

```
public static short ConvertToInt16(this uint source)
{
    return (short)(source - 32768);
} 
```

相反：

```
public static uint ConvertToUInt32(this short source)
{
    return (ushort)(source + 32768);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T09:01:04.647

如果您不想在代码中使用太多幻数，您可以通过添加来移动范围`Int16.MinValue`：

```
short displayValue = (short)(value + Int16.MinValue); 
```

请注意，如果您的源值不适合您指定的范围，这将溢出。因此，如果您想检查该溢出，您可以将其包装成一个[`checked`](http://msdn.microsoft.com/en-us/library/74b4xzyw%28v=vs.110%29.aspx)表达式（在溢出时引发异常），或用于[`Math.Min`](http://msdn.microsoft.com/en-us/library/4wkwtcd4.aspx)强制执行上限`65535`：

```
short displayValue = (short)(Math.Min(value, UInt16.MaxValue) + Int16.MinValue); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T09:57:41.100

编辑后，我认为您要求的是类似的东西

```
static Int16 Convertor(UInt32 val)
{
    if (val > Int16.MaxValue)
    {
        var h = (val - Int16.MaxValue) * -1;
        if (h < Int16.MinValue)
        {
            throw new OverflowException();
        }

        return (Int16)h;
    }

    return (Int16)val;
} 
```

* * *

如果您将 和 的`byte`布局`Int16` `-32768`与`UInt32` `65535`一些代码进行比较，例如

```
var b = BitConvertor.GetBytes(val);
Console.Write('[')
for (var i = 0; i < b.Length - 1; i++)
{
    Console.Write(b[i]);
    Console.Write(", ");
}

Console.Write(b[b.Length - 1]);
Console.WriteLine(']'); 
```

你会得到像

> [0, 128] // 对于`Int16` `-32768`
> 
> [255, 255, 0, 0] // 为`UInt32` `65535`

我没有看到任何简单的字节转换来给出你想要的结果。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-01T09:00:40.053

```
UInt32 source = ...

Int16 result = (Int16) (source > 32767 ? source - 65536 : source); 
```

# php - 如何使用 philsturgeon Codeigniter 模板？

> ID：15153889
> 
> 赞同：0
> 
> 时间：2013-03-01T08:56:12.193
> 
> 标签：php, codeigniter, templates

我开始使用 Codeigniter 框架，我想使用 Phil Sturgeon 的 Codeigniter 模板：

[http://github.com/philsturgeon/codeigniter-template/zipball/master](http://github.com/philsturgeon/codeigniter-template/zipball/master)

我按照以下安装步骤操作：

1.  下载最新版本
2.  将此包中的文件复制到应用程序文件夹中的相应文件夹
    *   复制`config/template`到相应的位置（在配置目录中。）
    *   复制`libraries/template`到相应的位置（在库目录中。）
    *   加载模板（写入`$this->load->library('template');`）`config/autoload.php`

最后我在控制器中使用这个模板，如下所示：

```
public function index() {
  $data["header"] = "ayastr"; 
  $data["content"] = "content1"; 
  $this->template->enable_parser(TRUE);
  $this->template->enable_parser_body(TRUE); 
  //$this->template->set('title', "test");
  $this->template->title("aya"); 
  $this->template->build('example_page_view', $data);
 } 
```

在视图`example_page_view.php`中，我有`layouts\default.php`，我写了

```
{{ template:title }} 
```

.. 在`default.php`. 但我无法访问 title 变量。我做错了什么，或者没有做什么？我添加了这个部分，我可以在其中使用 $template['title']`default.php`但我不能使用解析器来显示我的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:06:48.493

1.  将 Template.php 文件从您下载的包中复制到库文件夹。

2.  将 template.php 文件复制到 config 文件夹

3.  你有视图/模板下的模板吗

4.  编辑template.php（配置文件）如下

    ```
    //Default Template Configuration (adjust this or create your own)
    //Default template - This is the Main template

    $template['default']['template'] = 'template/template';
    $template['default']['regions'] = array('menu','content','title');

    $template['default']['parser'] = 'parser';
    $template['default']['parser_method'] = 'parse';
    $template['default']['parse_template'] = TRUE;

    //Login Template
    $template['login']['template'] = 'template/template_login';
    $template['login']['regions'] = array('content');

    $template['login']['parser'] = 'parser';
    $template['login']['parser_method'] = 'parse';
    $template['login']['parse_template'] = TRUE; 
    ```

这是基本配置，如果您想了解有关如何从视图发送数据的更多信息，请告诉我

# jsf-2 - 如何在 p:dialog 关闭时清除 p:pickList 目标列表

> ID：15153894
> 
> 赞同：0
> 
> 时间：2013-03-01T08:56:42.990
> 
> 标签：jsf-2, primefaces

我有一个`p:pickList`内一个`p:dialog`。

```
<p:dialog id="registerDialog" widgetVar="registerServiceDlg" modal="true" 
    minimizable="false" draggable="false" position="300,40" 
    style="background:#E0E0E0;" closable="true"  maximizable="false" 
    resizable="false"  visible="#{not empty facesContext.maximumSeverity}">

    <p:ajax event="close" update="registerDialog" />
    <h:outputLabel value="User" styleClass="label"/>
    <p:pickList id="contactBean" value="#{contactBean.contacts}" var="contact" 
        itemLabel="#{contact}" itemValue="#{contact}" style="margin-left:20px;" 
        required="true" requiredMessage="one user is needed"/>
</p:dialog> 
```

在关闭对话框时，我想清除`p:pickList`目标列表。我怎样才能做到这一点？bean 在会话范围内，我想将它保留在会话范围内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:19:07.047

在您的方法上再次绑定您的目标列表`@PostConstruct`；

```
contacts.setTarget(new ArrayList<String>()); 
```

祝你好运！

# iphone - 在我的 View Controller.m 上填充 Dealloc

> ID：15153896
> 
> 赞同：0
> 
> 时间：2013-03-01T08:56:46.013
> 
> 标签：iphone, ios, objective-c, xcode

我无法理解`dealloc`、发布和设置`nil`. 我构建我的应用程序时认为我最终可以处理内存管理，但现在正面临严重的后果。诚然，这是开始开发我的应用程序的一种糟糕方式，但您必须从某个地方开始。

是否有指南/文档告诉我需要释放哪些项目，或者如何去做？我正在使用`ARC`，并且知道我不需要释放东西，但是我怎么知道方法`nil`中需要设置哪些项目`dealloc`？

我的应用程序现在非常慢，因为我调用了很多方法`viewDidAppear`，每次视图出现时它都会变得越来越慢。只需要一个开始的地方。任何初步指导将不胜感激！

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:54:54.907

[http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1) 阅读这篇关于 ARC 的教程很有帮助。

# python - 带有 Cython 装饰器的纯 Python：如何在模块级别获取属性访问权限

> ID：15153900
> 
> 赞同：1
> 
> 时间：2013-03-01T08:56:54.990
> 
> 标签：python, cython

我想用 Cython 装饰器编写一些纯 Python，但是当我将 NONE.PY 重命名为 NONE.PYX 时出现错误。为了解决这个问题，我需要用一个没有装饰器的纯 python 定义调用来包装每个属性。我想知道为什么...

这里是模块 none.pyx （如果你把它重命名为 none.py，你根本没有问题）

```
import cython

@cython.cfunc
@cython.returns(cython.double)
@cython.locals(n=cython.int,i=cython.int,r=cython.int)
def ccrange(n):
  r=0
  for i in range(n):
    r+=i
  return r

def crange(n):  return ccrange(n) 
```

和python测试文件test_none.py：

```
import pyximport; pyximport.install()
import none
n=10000
print ">>pure python call>>",none.crange(n)
print ">>cython call>>",none.ccrange(n) 
```

none.pyx 的结果：

> > 纯python调用>> 49995000.0 cython调用>> Traceback（最近一次调用最后）：文件“C：\Users\damien\python4d\bacoland\test_none.py”，第6行，打印“>>cython调用>>”， none.ccrange(n)
> > AttributeError: 'module' 对象没有属性 'ccrange'

将 none.pyx 重命名为 none.py，给出：

> > 纯python调用>> 49995000 cython调用>> 49995000

感谢帮助！祝你今天过得愉快 ：-）

编辑：避免装饰器@cython.cfunc 破坏了 cython 的速度优势......考虑以下代码，无论有无@cython.cfunc：

```
@cython.cfunc
@cython.returns(cython.double)
@cython.locals(n=cython.int)
def fibo_c(n):
  if n == 0 or n == 1:
      return n
  return fibo_c(n-2) + fibo_c(n-1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:56:35.123

`@cython.cfunc`decorator 等价于`cdef`ing 一个函数（详见[此处](http://docs.cython.org/src/tutorial/pure.html?highlight=cfunc#extension-types-and-cdef-functions)），因此该函数只能在`C`代码中访问。因此，要使其可以从 Python 访问，请摆脱`@cython.cfunc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T09:36:35.200

您应该将您的`@cython.cfunc`(equivalent of `cdef`，即只能从 C 调用)替换为`@cython.ccall`(equivalent of `cpdef`，即使用慢速 Python 调用约定和快速 C 调用约定均可访问)。

# c# - IOS - Unicode Unsign

> ID：15153908
> 
> 赞同：1
> 
> 时间：2013-03-01T08:57:25.737
> 
> 标签：c#, asp.net, ios, objective-c, unicode

我有一个用 C# 编写的函数，我想将其转换为 Objective-c。怎么做？

```
public static string UnicodeUnSign(string s)
{
    const string uniChars = "àáảãạâầấẩẫậăằắẳẵặèéẻẽẹêềếểễệđìíỉĩịòóỏõọôồốổỗộơờớởỡợùúủũụưừứửữựỳýỷỹỵÀÁẢÃẠÂẦẤẨẪẬĂẰẮẲẴẶÈÉẺẼẸÊỀẾỂỄỆĐÌÍỈĨỊÒÓỎÕỌÔỒỐỔỖỘƠỜỚỞỠỢÙÚỦŨỤƯỪỨỬỮỰỲÝỶỸỴÂĂĐÔƠƯ";
    const string koDauChars = "aaaaaaaaaaaaaaaaaeeeeeeeeeeediiiiiooooooooooooooooouuuuuuuuuuuyyyyyAAAAAAAAAAAAAAAAAEEEEEEEEEEEDIIIOOOOOOOOOOOOOOOOOOOUUUUUUUUUUUYYYYYAADOOU";

    if (string.IsNullOrEmpty(s))
    {
        return s;
    }

    string retVal = String.Empty;
    for (int i = 0; i < s.Length; i++)
    {
        int pos = uniChars.IndexOf(s[i].ToString());
        if (pos >= 0)
            retVal += koDauChars[pos];
        else
            retVal += s[i];
    }
    return retVal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:34:36.917

不诉诸核心基础：

```
#import <Foundation/Foundation.h>

int main (int argc, const char *argv[]) {
   NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

   NSString *unicodeCharacters = @"àáảãạâầấẩẫậăằắẳẵặèéẻẽẹêềếểễệđìíỉĩịòóỏõọôồốổỗộơờớởỡợùúủũụưừứửữựỳýỷỹỵÀÁẢÃẠÂẦẤẨẪẬĂẰẮẲẴẶÈÉẺẼẸÊỀẾỂỄỆĐÌÍỈĨỊÒÓỎÕỌÔỒỐỔỖỘƠỜỚỞỠỢÙÚỦŨỤƯỪỨỬỮỰỲÝỶỸỴÂĂĐÔƠƯ";

   NSString *decomposed = [unicodeCharacters decomposedStringWithCanonicalMapping];
   NSLocale *usLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease];

   NSString *cleaned = [decomposed stringByFoldingWithOptions:NSDiacriticInsensitiveSearch locale:usLocale];
   cleaned = [cleaned stringByReplacingOccurrencesOfString:@"đ" withString:@"d"];
   cleaned = [cleaned stringByReplacingOccurrencesOfString:@"Đ" withString:@"D"];
   NSLog (@"%@", cleaned);

   [pool drain];
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:51:35.343

您可以使用 CoreFoundation`CFStringTransform`函数，它几乎可以完成列表中的所有转换。只有 "đ" 和 "Đ" 必须分开处理：

```
NSString *UnicodeUnsign(NSString *s)
{
    NSMutableString *result = [s mutableCopy];
    // __bridge only required if you compile with ARC:
    CFStringTransform((__bridge CFMutableStringRef)result, NULL, kCFStringTransformStripCombiningMarks, NO);

    [result replaceOccurrencesOfString:@"đ" withString:@"d" options:0 range:NSMakeRange(0, [result length])];
    [result replaceOccurrencesOfString:@"Đ" withString:@"D" options:0 range:NSMakeRange(0, [result length])];

    return result;
} 
```

例子：

```
NSString *input = @"Hễllö Wõrld! - ếểễệđìíỉĩịòó";
NSString *output = UnicodeUnsign(input);
NSLog(@"%@", output);
// Output: Hello World! - eeeediiiiioo 
```

# c++ - Qt 构建到没有 dll 的单个 exe 文件

> ID：15153910
> 
> 赞同：5
> 
> 时间：2013-03-01T08:57:31.647
> 
> 标签：c++, windows, qt, dll, runtime-error

我在 Widows 7 上使用 Qt 库编写了一个简单的对话框。现在我需要将该`.exe`文件发送给我的朋友，以便他可以使用它。但我也需要发送大约 10 个`.dll`文件，以便他可以使用它。我已经找到了所有并发送了，但他无法打开它。有一些“Visual C++ 运行时错误”。坦率地说，在我的另一台计算机上，我也无法以同样的错误打开它。我用谷歌搜索了很多，并找到了不同的答案，例如：

1.  更新 DirectX
2.  安装 Microsoft Visual C++ 2010 Redistributable Package (vcredist_x86.exe)

但这一切对我没有帮助。所以我的问题是：

1.  为什么它可以在我开发了该对话框的计算机上运行，​​即有什么问题？
2.  我怎样才能摆脱所有购买轻松`.dll`将其编译成一个文件的东西？`.exe`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:12:53.150

1.为什么它可以在我开发了该对话框的计算机上运行，​​即有什么问题？

因为您的计算机上安装了 VC Runtime。

有两种方法可以解决这个问题，

a.您需要使用 MultiThread(MT) 而不是 MultiThreadDLL(MTD) 编译 QT 和您的 exe。

b.在您朋友的计算机上安装 vc 运行时。

2.我怎样才能摆脱所有的 .dll 东西买容易编译成一个 .exe 文件？

您必须将所有 QT dll 构建到库中（whit MT），并将您的 exe 与这些库链接。

这很耗时。你仍然需要windows dll。无论如何，如果您仍想静态链接 Qt，这些链接可能非常有用：

1.  [http://qt-project.org/wiki/How_to_build_a_static_Qt_version_for_Windows_with_gcc](http://qt-project.org/wiki/How_to_build_a_static_Qt_version_for_Windows_with_gcc)
2.  [http://qt-project.org/doc/qt-4.8/deployment-windows.html](http://qt-project.org/doc/qt-4.8/deployment-windows.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:47:12.557

此链接帮助我找到解决方案。 [https://bugreports.qt-project.org/browse/QTBUG-28766](https://bugreports.qt-project.org/browse/QTBUG-28766)

我复制了“C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin”目录中的所有 dll，但在将“platforms/qminimal.dll”和“platforms/qwindows.dll”添加到我的 . exe程序。

# php - 如何使用数组中的参数从数据库中获取结果？

> ID：15153914
> 
> 赞同：1
> 
> 时间：2013-03-01T08:57:47.877
> 
> 标签：php, mysql, sql, database

我有这样的表：

```
ID | title       | category
-----------------------------
1  | product1    | 0
2  | product2    | 0
3  | product3    | 1
4  | product4    | 1
5  | product5    | 3 
```

我有带有 ID 的数组，如何选择带有这些 ID 的产品？

我的意思是这样的，但类别可以是数组中的任何值，而不仅仅是像示例中的一个值。

```
$result = mysql_query("SELECT * FROM product where category = '$var'"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:00:35.737

试试这个方法

```
$arr = array(1,2);
$str = implode(',',$arr);

$result = mysql_query("SELECT * FROM product where category IN (".$str.") "); 
```

**注意：**尽量避免 MySQL 扩展，尽量使用 PDO 或prepared statements 代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:59:44.550

```
$ids = implode(',', $ids); // array(1,2,3,4) =>  '1,2,3,4'
$result = mysql_query("SELECT * FROM product WHERE category IN ('$ids')"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:59:48.113

除了过时的[mysql_* 函数](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)和[sql 注入](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)...

`$result = mysql_query("SELECT * FROM product where category in ('$list_of_ids')");`

# javascript - 使用视频中的一帧作为 videoJS 中的预览海报

> ID：15153915
> 
> 赞同：3
> 
> 时间：2013-03-01T08:57:52.603
> 
> 标签：javascript, video, html5-video, video.js

我正在尝试让 videoJS 将视频中的一帧显示为海报图像。

我怎样才能做到这一点？

文档似乎表明只能加载静态图像......？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-02-14T07:24:07.097

您可以尝试将时间（以秒为单位）附加`#t={seconds}`到源 URL：

```
<video playsinline src="testvideo.mp4#t=0.1"></video> 
```

# java - Android的AsyncTask：多参数，返回值，等待

> ID：15153919
> 
> 赞同：0
> 
> 时间：2013-03-01T08:57:58.170
> 
> 标签：java, android, android-asynctask

一段时间以来，我一直在研究如何实现 Android 的 AsyncTask 类。基本上，我希望它完成经典场景：在我进行网络调用时简单地动画一个无限期的加载轮。但是，在实践中，我遇到了一些问题，无法按照我想要的方式工作。

我目前有这样的代码**：（**在我想要的 AsyncTask 实现之前）

```
 String result = timeConsumingNetworkCall(String someData, ArrayList stuff1);
 doStuff(result);

 String result = timeConsumingNetworkCall(String otherData, ArrayList stuff2);
 doOtherStuff(result);

 String result = timeConsumingNetworkCall(String dataAgain, ArrayList stuff3);
 doYetEvenMore(result); 
```

我希望能够重用我的 AsyncTask 调用来将数据传递给它，它进行网络调用，然后返回我可以按照我的意愿处理的数据，就像我在上面做的那样。

现在 - 这很完美，除了应用程序似乎在没有加载的情况下“挂起”。进来了 AsyncTask。也许我还没有完全“得到它”——但我如何在 AsyncTask 之外返回数据，以便`doStuffToUI()`etc 可以使用它？

最终，如果我可以使用类似这样的 AsyncTask，我会很高兴：

```
String result = new PostToFile("function_name", keysAndValues).execute().getResult();
doStuff(result); // this shouldn't execute until the AsyncTask is done 
```

我这样做对吗？这是应该/可以做到的吗？下面是我的 AsyncTask 类，为简洁起见缩短了。

```
private class PostToFile extends AsyncTask<PostToFile, Void, Void>{
    private String functionName;
    private ArrayList<NameValuePair> postKeyValuePairs;
    private String result = "";

    public PostToFile(String function, ArrayList<NameValuePair> keyValuePairs){
        functionName= function;
        postKeyValuePairs = keyValuePairs;
    }

    @Override
    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(BaseActivity.getInstance(), "Loading", "Please wait...", true, false);
    }

    @Override
    protected Void doInBackground(PostToFile... params) {                       
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair(FUNCTION_KEYWORD, functionName));
        for (int i = 0; i < postKeyValuePairs.size(); i++)            {
            nameValuePairs.add(postKeyValuePairs.get(i));
        }

        try{
            // ***do the POST magic.***
            result = response.toString();
        }
        catch (Exception e){
             // clean up my mess
        }

        return null;
    }

    private String getResult(){
        return result; // can I use this somehow???
    }

    @Override
    protected void onPostExecute(Void result) {
        progressDialog.dismiss();
    }
 } 
```

任何帮助表示赞赏，非常感谢提前。如果需要，我很乐意澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:27:38.940

> 做事（结果）；这不应该在 AsyncTask 完成之前执行

那么您将需要使用 [AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)在必要时进行等待以完成计算，然后检索其结果。

因为在执行未完成之前调用`AsyncTask.get()`冻结主 UI 线程， `doInBackground`那么您将需要使用 Thread 来避免 UI 冻结并`runOnUiThread`在 AsyncTask 执行完成后更新 Ui 元素。

**例子 ：-**

```
public void  ThreaddoStuff(){

 Thread th=new Thread(){
    @Override
    public void run(){
      // start AsyncTask exection here
      String result = new PostToFile("function_name", 
                      keysAndValues).execute().get().getResult();

     // now call doStuff by passing result
     doStuff(result);
    }
  };
th.start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:02:00.810

使用默认的 onPostExecute 实现创建一个可重用的异步任务，然后为每个调用覆盖默认实现：

```
public static class PostToFile extends AsyncTask<Void, Void, String> {
        private String functionName;
        private ArrayList<NameValuePair> postKeyValuePairs;
        private String result = "";

        public PostToFile(String function, ArrayList<NameValuePair> keyValuePairs){
            functionName= function;
            postKeyValuePairs = keyValuePairs;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            // show progress bar
        }

        @Override
        protected String doInBackground(Void... arg0) {
            // make request and get the result
            return null; // return result
        }

        @Override
        protected void onCancelled(String result) {
            super.onCancelled(result);
            // hide progress bar
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            // hide progress bar
        }
    } 
```

执行你的异步任务：

```
new PostToFile(function, keyValuePairs) {

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result); // this will hide a progress bar

            doStuff(result); 
        }
}.execute();

new PostToFile(otherFunction, otherKeyValuePairs) {

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result); // this will hide a progress bar

            doOtherStuff(result); 
        }
}.execute(); 
```

# java - 会话 ID 如何存储在 Jersey REST 服务中

> ID：15153921
> 
> 赞同：0
> 
> 时间：2013-03-01T08:58:11.993
> 
> 标签：java, rest, session, jersey, httpsession

我知道浏览器使用 cookie 存储会话 ID，并在每个请求上检查这些 ID。我的问题如下：当您从移动设备（或任何其他设备）进行 REST 调用时，客户端-服务器通信如何识别会话并为每个客户端分配唯一的会话 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:43:38.827

目前尚不清楚您的问题是否与客户端或服务器端实际发生的情况有关。

从（java）Web 服务器的角度来看，sessionID 只是一个 id，基本上有 3 种方式与客户端通信并处理此 ID（因此服务器知道它正在与哪个用户交谈）。

*   网址重写
*   隐藏表单输入
*   饼干

cookie 的使用并不严格限于使用 web 浏览器作为客户端，因为任何客户端都可以将 cookie 放在 HTTP 标头中。

如果您想知道特定客户端如何处理服务器以传递会话信息，请具体说明您打算使用的客户端，因为实现细节（以及客户端代码）可能会有所不同，即使一般机制相同.

# android - 如何将一个文本字段中写入的内容更改为另一个 TextView 中的另一个文本？

> ID：15153922
> 
> 赞同：0
> 
> 时间：2013-03-01T08:58:21.027
> 
> 标签：android, textview

我想检查 EditText 中写了哪些字母。然后应将此文本转换为另一个文本字段中的其他文本。

一个例子 "word" = "yqtf" 通过在字母表中向右移动字母 2 次。

有什么办法可以让我在文本中定义不同的字母，使文本中的“a”变成数字 1，“b”变成 2，依此类推，这样可以更容易地以不同的方式混合字母和然后将这些数字转换回另一个文本字段中的字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:05:12.690

您可以使用每个字符的 ASCII 代码（它是一个整数），将该代码加 2，然后再转换回 char。可以使用[toCharArray()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#toCharArray%28%29)获得一个字符数组。你会有这样的东西：

```
String initialString = "yourString";
char[] chars = initialString.toCharArray();
for (int i = 0; i < chars.length; ++i)
    chars[i] = (char)((int)chars[i] + 2);
String resultString = new String(chars); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:55:50.823

要检查 edittext 中的实时输入字符，您应该使用`TextWatcher`，更多示例请参见此链接[How to use the TextWatcher class in Android?](https://stackoverflow.com/questions/8543449/how-to-use-textwatcher-in-android)

# asp.net-mvc - BLToolkit PostgreSql 连接错误

> ID：15153925
> 
> 赞同：0
> 
> 时间：2013-03-01T08:58:26.687
> 
> 标签：asp.net-mvc, postgresql, bltoolkit

我通过包管理器控制台安装了 BLToolkit PostgreSql Data Provider 4.1.17。BlToolkit.4 也安装到项目中。但我还无法连接到数据库。我遇到的错误和网络配置如下。有什么建议吗？

***错误字符串：***

```
key=value argument incorrect in ConnectionString 
```

***网络配置：***

```
<configuration>
    <BLToolkit>
        <dataProviders>
            <add type="BLToolkit.Data.DataProvider.PostgreSQLDataProvider" />
        </dataProviders>
    </BLToolkit>
    <configSections>
        <section name="BLToolkit" type="BLToolkit.Configuration.BLToolkitSection, BLToolkit.Data.DataProvider.PostgreSQL.4" />
    </configSections>
    <connectionStrings>
        <add name="DbCon"
             connectionString="Data Source=postgresql-x64-9.2;database=postgres;User Id=postgres; password=..."
             providerName="Npgsql" />
    </connectionStrings>
</configuration> 
```

***联系：***

```
public class Database: DbManager
    {
        public Database() : base("DbCon")
        {
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:04:39.130

问题是关于连接字符串，

```
<add name="DbCon" providerName="Npgsql" connectionString="server=localhost;database=postgres;User Id=postgres; password=..." /> 
```

解决了这个问题。

# pivot-table - powerpivot 切片器中的显示字段

> ID：15153927
> 
> 赞同：1
> 
> 时间：2013-03-01T08:58:32.403
> 
> 标签：pivot-table, powerpivot, excel-2013

我有一个切片器，其值为“A”和“B”。我可以改变它的方式，无论它是“A”，都应该显示“Apple”，而“B”应该显示“Banana”，而不对我的数据库表进行任何更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:10:16.447

对我来说，这是 PowerPivot 的优点之一 - 能够在不更改基础数据的情况下使字段外观更友好。

在 PowerPivot 表中，将计算列添加到相关表中，例如

`=IF('Table'[Code]="A", "Apple", IF('Table'[Code]="B", "Banana"))`

您可以为该列指定您选择的名称，以便在切片器中使用该名称。您可以通过在 PowerPivot 窗口中右键单击该列从客户端工具中隐藏原始列来进一步改进演示文稿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:05:39.440

如何将计算字段与将 Apple 分配给 A 等的公式一起使用。然后在切片器中使用此字段而不是 A 和 B 的原始字段。

# node.js - 查询mongodb gridfs文件数据

> ID：15153932
> 
> 赞同：0
> 
> 时间：2013-03-01T08:58:53.400
> 
> 标签：node.js, mongodb, mongoose, gridfs

嗨，我是 gridfs 的新手，能够使用以下查询插入文件并在 gridfs 中查看文件

```
mongofiles -d myfiles put hi.txt

db.fs.files.findOne({'filename':'hi.txt'}); 
```

我需要查看文件的内容（hi.txt）我试过getResources但它似乎没有用。我被困在这里，任何帮助都会很有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:31:24.003

# php - 具有歧义保护的值替换函数

> ID：15153933
> 
> 赞同：1
> 
> 时间：2013-03-01T08:58:54.417
> 
> 标签：php, str-replace

我正在尝试替换字符串中的值，并且我想防止潜在的混淆。

我的功能：

```
<?php
function newValue($str, $from, $to) {
    return str_ireplace($from, $to, $str);
}

$new = '{NAME}';
$var = newValue('This is {TYPE} and this {NAME} value should be replaced', '{TYPE}', $new);
$var = newValue('This is {TYPE} and this {NAME} value should be replaced', '{NAME}', 'string');

echo $var;
// This is string and this string value should be replaced 
```

是否有更好的替换方法可以避免“替换”与“搜索”具有相同值时的情况。它可能不会发生，但我想知道最好的方法。我正在寻找最简单的功能 - 没有 ifs 和 sprintf 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:34:27.207

我希望它有效... $vars = newValue('This is {TYPE}，这个 {NAME} 值应该被替换。第一个更改是 {TYPE}，第二个更改是 {NAME}'，array('{TYPE}' , '{NAME}'), 数组('string1' , 'string2'));

回声 $vars;

# blackberry - BlackBerry - 可以隐藏视频字段吗？

> ID：15153935
> 
> 赞同：5
> 
> 时间：2013-03-01T08:58:58.003
> 
> 标签：blackberry, java-me, camera, flashlight

我想编写一个像手电筒这样的应用程序（在相机 LED 的帮助下）。

```
Player player = javax.microedition.media.Manager.createPlayer("capture://video?encoding=video/3gpp");

player.realize();

VideoControl videoControl = (VideoControl) player.getControl("VideoControl");
if(videoControl != null)
{
    videoField = (Field)videoControl.initDisplayMode( VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field" );
    try
    {
        videoControl.setDisplaySize(1, 1);
    }
    catch(Exception e)
    {
        PGLogUtil.logString(e.toString());
    }
    videoControl.setVisible(true);
    add(videoField);

    FlashControl flashControl = (FlashControl)
            player.getControl("javax.microedition.amms.control.camera.FlashControl");
    setFlashlight(true);
}
player.start(); 
```

上面的代码完美运行，但我想隐藏`videoField`. 当我移除`add(videoField)`或使用`videoControl.setVisible(false)`时，手电筒不工作。有人可以解释为什么吗？

如何用隐藏的方式打开灯`videoField`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-18T22:10:20.293

我刚得到一个有闪光灯的bb，我想尝试解决同样的问题。无论如何，我终于让它工作了。在整个测试期间我观察到的事情是，如果 videoField 像你说的那样被隐藏，闪光灯将无法工作......所以我做的伎俩是

```
 <pre>
    _videoControl.setDisplaySize( 1 , 1 );
    </pre> 
```

这为我完成了工作。您也可以将其设置为

```
 <pre>
    _videoControl.setDisplaySize( 0 , 0 );
    </pre> 
```

但无论你做什么......确保你设置

```
 <pre>
    _videoControl.setVisible(true);
   </pre> 
```

否则你的闪光灯将无法工作

# android - 在 Android 设备中使用 ACTION_PICK 意图仅显示带有电话号码的联系人

> ID：15153943
> 
> 赞同：8
> 
> 时间：2013-03-01T08:59:25.597
> 
> 标签：android, android-contacts, contactscontract

我的目标是只向用户显示带有电话号码的联系人，并让用户选择一些我想在本地存储的联系人。

我在下面的方法中使用了各种选项来代替 ContactsContract.Contacts.CONTENT_URI。但是我得到了很多显示的联系人（很多都是垃圾邮件，只有电子邮件 ID）。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.contact_selector);

        ((Button)findViewById(R.id.btnphonecontactlist)).setOnClickListener(new OnClickListener() {

         @Override
         public void onClick(View v) {
           // TODO Auto-generated method stub
           Intent contactIntent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
            startActivityForResult(contactIntent, 1);
              }
           });
    } 
```

如果我将 ContactsContract.Contacts.CONTENT_URI 作为上述方法的参数传递，并且在以下处理程序方法的情况下，查询方法的 String[] 作为投影参数（显示为注释），则该方法将失败并出现 java.lang.IllegalArgumentException。如果我在下面的方法中传递 null，那么无论我选择什么联系人，我都找不到任何与电话号码或电子邮件相关的列。

```
 @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {

        if(data != null)
        {
            Uri uri = data.getData();

            if(uri != null)
            {
                Cursor c = null;

                try
                {
                    c = getContentResolver().query(uri, null
                                                // new String[] { 
                            //ContactsContract.CommonDataKinds.Phone.NUMBER, 
                            //ContactsContract.CommonDataKinds.Phone.TYPE}, 
                            , null, null, null);

                    if(c != null && c.moveToFirst())
                    {
                        String number = c.getString(0);
                        String type = c.getString(1);
                    }               
                }
                finally
                {
                    if(c != null && !c.isClosed())
                        c.close();
                }
            }
        }
    } 
```

当用户访问电话簿并且有可用的电话号码时，有什么方法可以只显示用户通常可见的联系人？

我尝试浏览 stackoverflow 和其他站点中的所有线程，但找不到任何解决此问题的解决方案，尽管很多人已经发布了这个问题。我在 Android 平台上工作不多，我可能错过了一些小细节，我相信必须有一种简单的方法来实现这一点。

请建议。感谢你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-01T09:07:40.707

请使用以下代码

```
Intent intent = new Intent(Intent.ACTION_PICK,  ContactsContract.Contacts.CONTENT_URI);
    intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
    startActivityForResult(intent, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-10T11:52:39.583

```
*-> Add a permission to read contacts data to your application manifest.

<uses-permission android:name="android.permission.READ_CONTACTS"/>

-> Use Intent.ACTION_PICK in your Activity 

Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI);
        startActivityForResult(contactPickerIntent, RESULT_PICK_CONTACT);

-> Then Override the onActivityResult() and retrieve the ID,Phone number and Name in the data. 

 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // check whether the result is ok
        if (resultCode == RESULT_OK) {
            // Check for the request code, we might be usign multiple startActivityForReslut
            switch (requestCode) {
            case RESULT_PICK_CONTACT:
               Cursor cursor = null;
        try {
            String phoneNo = null ;
            String name = null;           
            Uri uri = data.getData();            
            cursor = getContentResolver().query(uri, null, null, null, null);
            cursor.moveToFirst();           
            int  phoneIndex =cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
            phoneNo = cursor.getString(phoneIndex); 

            textView2.setText(phoneNo);
        } catch (Exception e) {
            e.printStackTrace();
        }
                break;
            }
        } else {
            Log.e("MainActivity", "Failed to pick contact");
        }
    }

This will work check it out* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T18:26:24.790

以下代码将执行您想要的操作。

```
Intent intent = new Intent(Intent.ACTION_PICK,ContactsContract.CommonDataKinds.Phone.CONTENT_URI);
startActivityForResult(Intent.createChooser(intent, "Contact"), PICK_CONTACT); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-20T08:11:30.297

```
Uri uri = Uri.parse("content://contacts");
Intent intent = new Intent(Intent.ACTION_PICK, uri);
intent.setType(Phone.CONTENT_TYPE);
startActivityForResult(intent, REQUEST_CODE); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-02T11:59:40.830

用这个：

```
Intent intent = new Intent(Intent.ACTION_PICK, Uri.parse("content://contacts/people"));
intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
startActivityForResult(intent, 1); 
```

# apache - 修复地址栏 url zend 框架 app

> ID：15153946
> 
> 赞同：0
> 
> 时间：2013-03-01T08:59:33.690
> 
> 标签：apache, zend-framework, mod-rewrite, registrar

所以首先，嗨，我可能有一个简单的问题，但我不够专业，无法找出问题所在。我刚刚在 debian 服务器上部署了一个 zend 框架应用程序。我有 dotster 作为注册商和专用服务器的另一个提供商。问题在于在应用程序中从一个页面导航到另一个页面时的域映射和 url。基本上，当我使用服务器 ip（如 91.121.121.171/public/）访问应用程序时，该 url 工作得很好，并在地址栏中显示良好，例如 91.121.121.171/public/directory/dir-comp。但是当我使用网址[www.ceramstar.org](http://ceramstar.org)时，它保持不变。我是否搞砸了 dotster 配置或 Apache 重写规则？我必须说我真的不知道如何在 dotster 方面正确配置东西......无论如何还是非常感谢

# shell - 使用 awk 重新格式化 CSV 文件

> ID：15153947
> 
> 赞同：1
> 
> 时间：2013-03-01T08:59:42.397
> 
> 标签：shell, sed, awk

我有一个这样的文件-

```
 1,[test1] Joe,OK
 2,[test2] Jack,OK
 3,[test3] Tom,FAIL 
```

我正在打印这样的文件 -

```
cat file | awk -F"," '{ print "||"  $1 "||" $2 "||" $3 "||" }' 
```

我想要这样的输出文件 -

```
|| 1 || Joe  || OK ||
|| 2 || Jack || OK ||
|| 3 || Tom  || FAIL || 
```

ie`[test1] Joe`被修改为`Joe`我们如何在每一列上做这样的事情。

```
echo "[test1] Joe" | sed 's/\[.*\]\s//g' 
```

这只给了我`Joe`如何将它与其他列结合起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:51:26.817

在**正确**`awk`的间距中：

 **```
$ awk -F, '{split($2,a," ");printf "||%s || %-4s || %s ||\n",$1,a[2],$3}' file
|| 1 || Joe  || OK ||
|| 2 || Jack || OK ||
|| 3 || Tom  || FAIL || 
```

您的尝试几乎完成了，您应该看看`printf`and`split`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:10:41.063

使用 sed：

```
 sed 's/\[[^]]*\]//;s/^/|| /;s/$/ ||/;s/,/ || /g' input 
```

**输出**

```
|| 1 ||  Joe || OK ||
|| 2 ||  Jack || OK ||
|| 3 ||  Tom || FAIL || 
```

就地开始`sed -i`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:22:14.113

```
awk -F"," '{gsub(/,\[.*?\]|,|^|$/," || ",$0) }1' your_file 
```

或者

```
perl -plne 's/^|,/ || /g;s/\[.*?\]//g' your_file 
```

测试如下：

```
> cat temp
1,[test1] Joe,OK
2,[test2] Jack,OK
3,[test3] Tom,FAIL
> perl -plne 's/^|,|$/ || /g;s/\[.*?\]//g' temp
 || 1 ||  Joe || OK || 
 || 2 ||  Jack || OK || 
 || 3 ||  Tom || FAIL ||
> awk -F"," '{gsub(/,\[.*?\]|,|^|$/," || ",$0) }1' temp
 || 1 ||  Joe || OK || 
 || 2 ||  Jack || OK || 
 || 3 ||  Tom || FAIL || 
> 
```

如果要就地替换文件，请使用：

```
perl -i -plne 's/^|,|$/ || /g;s/\[.*?\]//g' your_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T09:08:39.297

单程：

```
awk -F, '{$1=OFS""$1;$NF=$NF""OFS;sub(/.* /,"",$2);}1' OFS=" || " file 
```

在运行上述：

```
 ||  1 || Joe || OK ||
 ||  2 || Jack || OK ||
 ||  3 || Tom || FAIL || 
```**

# google-chrome-extension - 扩展打包应用的api？

> ID：15153949
> 
> 赞同：0
> 
> 时间：2013-03-01T08:59:46.807
> 
> 标签：google-chrome-extension

我当时正在试验 chrome 的打包应用程序。

我想知道是否计划使用我自己的 API 集（例如通过 C++）扩展 chrome 打包的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:17:02.860

[您可以使用NaCl](https://developers.google.com/native-client/)从 Chrome 打包应用程序中调用 C 和 C++ 代码，但有一些限制。但是，您不能特别添加或更改 chrome.* 命名空间。

# javascript - 防止左/右按钮滚动页面

> ID：15153953
> 
> 赞同：2
> 
> 时间：2013-03-01T08:59:48.530
> 
> 标签：javascript, iframe

我有一个包含滑块的 iframe。滑块允许使用左/右键箭头在图片之间导航，但如果页面上有水平滚动，则页面也会使用左/右键箭头滚动。有什么方法可以阻止页面滚动，但不能阻止 iframe 中幻灯片之间的导航。代码如下所示：

```
if (e.keyCode === 39) {
  next();
}
if (e.keyCode === 37) {
  prev();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:02:43.767

一些

```
$(document).on("keypress", function () {
    if (e.keyCode === 39 || e.keyCode === 37) {
        return
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T09:13:56.473

您应该申请`e.preventDefault();`以终止事件的默认行为。

# php - php if 语句为 null 和 0？

> ID：15153954
> 
> 赞同：0
> 
> 时间：2013-03-01T08:59:53.303
> 
> 标签：php

我在执行 if 语句时遇到问题

> if($parent == $page->parent)

我的美元 $parent = null 和我的 $page->parent = 0 我如何解决它们相等的问题？

我认为这是一个问题，因为它不知道 null 等于 0

```
$page = Page::find($id);
$parent = Input::get('parent'); // Null 
```

我希望你们能帮助我，我必须解决这个问题

这是我的控制器，以防你不想看它

```
public function updateMenu($id)
{
    $page = Page::find($id);
    $parent = Input::get('parent');
    $new_order = Input::get('index');

    if($parent == $page->parent)
    {
        if($page->order_id > $new_order)
        {
            DB::table('pages')
                ->where('parent',$parent)
                ->where('order_id', '<', $page->order_id)
                ->increment('order_id');
        }
        else
        {
            DB::table('pages')
                ->where('parent',$parent)
                ->where('order_id', '>=', $page->order_id)
                ->decrement('order_id');
        }
    }
    else
    {

            DB::table('pages')
                ->where('parent',$parent)
                ->where('order_id', '>=', $new_order)
                ->increment('order_id');

    }

    $page->order_id = Input::get('index');
    $page->parent = Input::get('parent');

    $page->save();

    return $id;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T09:03:47.173

我不认为**0**可以等于**NULL**。也许`if($parent == $page->parent || ($parent == null && $page->parent == 0))`更有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:02:58.370

使用严格相等运算符：=== 而不是 ==

```
localhost> = 0 === null
false
localhost> = 0 == null
true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:08:34.090

您可以使用：

```
if(is_null($parent) && ($page->parent==0))
{

} 
```

# javascript - 这对获取页面加载时间有用吗？

> ID：15153956
> 
> 赞同：0
> 
> 时间：2013-03-01T09:00:09.413
> 
> 标签：javascript

得到了这个将 url 加载到 iframe 中的脚本：

```
<script type="text/javascript">
    var imones = [];
    imones.push('example.com');
    imones.push('example1.com');
    imones.push('example2.com');

    $.each(imones, function (index, value) { 
        var gg="http://anyorigin.com/get?url="+imones[index]+"&callback=?";
        console.log("nuorados- "+gg);

        $.getJSON(gg, function(data) {
             var iframe = $("#output")[0];
             var doc = iframe.document;

             if (iframe.contentDocument) {
                 doc = iframe.contentDocument;
             } else if (iframe.contentWindow) {
                 doc = iframe.contentWindow.document;
             }

             doc.open();
             // gets times before loading each frame
             var beforeTime = [];
             var beforeloadingtime = (new Date()).getTime();
             beforeTime.push(beforeloadingtime);
             console.log("before time- "+beforeTime);

             doc.writeln(data.contents);
             doc.close();
             //gets times after loading each frame
             var loadTime = []; 
             var loadingtime = (new Date()).getTime();
             loadTime.push(loadingtime);
             console.log("loading time- "+loadTime);
        });
    });
</script>
<iframe  id=output ></iframe> 
```

我正在尝试为每个帧获取时间值/之前/加载框架和/之后/加载框架。目前我在控制台运行上面的脚本得到这些结果：

```
before time - 1362127940145 
loading time- 1362127940160 
before time - 1362127940528 
loading time- 1362127940535
before time - 1362127940573 
loading time- 1362127940584 
```

`(loading time) - (before time) = total loading time of each frame.`我得到的数字没有意义，因为它们都很短，所以我认为我在这里没有得到正确的加载时间。有什么建议可以改进这个脚本吗？

编辑：加载时间可能是正确的，但我认为之前需要将时间放在其他地方......</p>

# c# - 如何从配置文件中读取连接字符串？

> ID：15153957
> 
> 赞同：2
> 
> 时间：2013-03-01T09:00:11.907
> 
> 标签：c#

我想开发一个应用程序，它应该从文件夹（包括子文件夹）中存在的所有配置文件中读取 Connectionstring。我为此开发了win form App。

```
 private void btnConnString_Click(object sender, EventArgs e)
 {
     var files = Directory.GetFiles(
         this.txtPath.Text.Trim(), 
         "*.config", 
         SearchOption.AllDirectories);
     foreach (string filepath in files)
     {
         string fileName;
         fileName = Path.GetFileName(filepath);
     } 
 } 
```

现在我必须阅读连接字符串。我能怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T09:10:47.370

您应该尝试这种方法：

```
ExeConfigurationFileMap configMap = new ExeConfigurationFileMap();
configMap.ExeConfigFilename = fileName;
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configMap, ConfigurationUserLevel.None);
string connString =  config.ConnectionStrings.ConnectionStrings["ConnectionName"]; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T11:59:04.537

```
string fileName;
fileName = Path.GetFileName(filepath);

MessageBox.Show(filepath);

ExeConfigurationFileMap configMap = new ExeConfigurationFileMap();
configMap.ExeConfigFilename = fileName;
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configMap, ConfigurationUserLevel.None);

System.Configuration.ConnectionStringSettings connString = config.ConnectionStrings.ConnectionStrings["ConnectionString"];

if(connString!= null)
 {
   MessageBox.Show(connString.ConnectionString);
 }
else
   MessageBox.Show("No ConnectionString"); 
```

我已经添加了这个在我的连接字符串中有一个条目仍然它总是取空值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T09:03:47.063

```
 System.Configuration.Configuration rootWebConfig =
            System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("/MyWebSiteRoot");
        System.Configuration.ConnectionStringSettings connString;
        if (rootWebConfig.ConnectionStrings.ConnectionStrings.Count > 0)
        {
            connString =
                rootWebConfig.ConnectionStrings.ConnectionStrings["NorthwindConnectionString"];
            if (connString != null)
                Console.WriteLine("Northwind connection string = \"{0}\"",
                    connString.ConnectionString);
            else
                Console.WriteLine("No Northwind connection string");
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T11:06:18.513

```
class AppConfigurationReader
    {
        public List<string> key1;
        public List<string> key2;
        public int ConnectionStringsFound;

        public int GetTotalConnectionStringsFound()
        {
            ConnectionStringsFound = key1.Count();
            return (ConnectionStringsFound);
        }

        public AppConfigurationReader()
        {
            key1= new List<string>();
            key12 = new List<string>();

            ConnectionStringsFound = 0;
        }
        public void getAppConfigconnectionStrings(string webConfigPath)
        {
            DataTable dtKeyValue = new DataTable();

            dtKeyValue.TableName = "app.config connectionString";
            dtKeyValue.Columns.Add("name");
            dtKeyValue.Columns.Add("connectionString");

            XmlTextReader reader = new XmlTextReader(webConfigPath);
            XmlDocument xdoc = new XmlDocument();
            xdoc.Load(reader);
            reader.Close();

            XmlElement root = xdoc.DocumentElement;

            XmlNodeList appSettings = xdoc.SelectNodes("/configuration/connectionStrings/add");

            foreach (XmlNode node in appSettings)
            {
                DataRow row = dtKeyValue.NewRow();
                String name = node.Attributes["name"].Value.ToString();
                String connectionString = node.Attributes["connectionString"].Value.ToString();

                //row["name"] = name;
                //row["connectionString"] = connectionString;
                //dtKeyValue.Rows.Add(row);

                if (String.Equals(name, "Mykey1") == true)
                {
                    key1.Add(connectionString);
                }
                else if (String.Equals(name, "Mykey2") == true)
                {
                    key2.Add(connectionString);
                }
            }

            //return dtKeyValue;
        }
} 
```

# regex - 如何找到 .htaccess 的 24 位字母数字查询的匹配项？

> ID：15153966
> 
> 赞同：0
> 
> 时间：2013-03-01T09:00:38.667
> 
> 标签：regex, .htaccess

我已经尝试过了，但它不起作用。

```
RewriteRule ^([a-zA-Z0-9]{1,24})$ poem.php?id=$1 [L,NC] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-09T21:36:28.137

（有人编辑了这个，它在队列中弹出；不妨给它一个答案。）

该`[L]`标志表明这是最后一条规则，不应再处理更多规则。结果他的下一条规则没有得到处理。

正确的设置应该是：

```
RewriteRule ^([a-zA-Z0-9]{1,24})$ poem.php?id=$1 [NC]
RewriteRule ^(.*)$ profile.php?membername=$1 [L] 
```

# java - java - 如何使用另一个列表框java struts添加值列表框？

> ID：15153974
> 
> 赞同：1
> 
> 时间：2013-03-01T09:01:06.817
> 
> 标签：java, javascript, jquery, listbox, struts

我想在 java struts 环境中使用两个列表框（多个）。第一个列表框列出了人员姓名，第二个列表框最初是空白的。使用添加和删除按钮用选定的第一个列表框中的值填充第二个列表框。但我不知道如何使用这个？

值是字符串数组还是 getter/setter 的集合？以及如何使用？

此外，我知道 javascript 代码是如何制作的，但 struts 很复杂。

我的代码是：

JSP：

> 第一个列表框和第二个列表框

```
< td class="formitem">
    < html:select multiple="true" size="4" styleClass="textField" >
        < html:options collection="pName" property="deger" labelProperty="pers"/>
    </html:select>
</td>

 <td class="formitem">
    <html:select property="personelName" styleClass="textField" >
        <html:options collection="personelList" property="deger" labelProperty="xxx"/>
    </html:select>  
 </td> 
```

> 我的表单代码是

```
private String[] pName = null;  is string array or another type?

public String[] getpName() {
    return pName;
}

public void setpName(String[] pName) {
    this.pName = pName;
} 
```

> > 模型类

```
public static Collection personelFill(String x) {
    {
        Connection connection = null;
        PreparedStatement pst = null;
        ResultSet rs = null;
        ArrayList personelList = null;

        try {
            connection = DBFactory.getConnection();
            String sql = 
                    "select  p.adi || ' ' || p.soyadi isim, p.tckimlikno , p.subeno, p.daireno " +
                    "from personel p " +
                    "where p.listedegorunsun = 1 "
                + x
                + "order by nlssort(p.adi||' '||p.soyadi,'NLS_SORT = TURKISH')";

            pst = DBFactory.getPreparedStatement(connection, sql);

            rs = pst.executeQuery();
            personelList = new ArrayList();

            PersonelForm pForm = null;

            while (rs.next()) {

                pForm = new PersonelForm();

                //fill form setter

                personelList.add(pForm);
            }

            return personelList;

        } catch (Exception e) {
            throw new BDException(e.getMessage());
        } finally {
            DBFactory.closeConnection(connection, pst, rs);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:59:05.790

与服务器端无关。可以使用 javascript 或 jquery 在客户端完成，请参阅以下 jsfiddle 和[原始帖子](https://stackoverflow.com/questions/14001924/jquery-moving-all-items-in-listbox-at-once)。

[http://jsfiddle.net/RbLVQ/62/](http://jsfiddle.net/RbLVQ/62/)

```
 $('#btnRight').click(function(e) {
    var selectedOpts = $('#lstBox1 option:selected');
    if (selectedOpts.length == 0) {
        alert("Nothing to move.");
        e.preventDefault();
    }

    $('#lstBox2').append($(selectedOpts).clone());
    $(selectedOpts).remove();
    e.preventDefault();
}); 
```

# google-maps - Google maps v3 Google maps v2 中 GLayer 的替代品

> ID：15153979
> 
> 赞同：1
> 
> 时间：2013-03-01T09:01:20.507
> 
> 标签：google-maps, google-maps-api-3

我有一个现有的应用程序

```
var panaramioOverlay = new GLayer("com.panoramio.all");
var wikipediaOverlay = new GLayer("org.wikipedia.en");
var webcamOverlay = new GLayer("com.google.webcams"); 
```

在 Google Maps v3 中还有其他方法吗？

# jsf - 使用调整大小后存储面板的尺寸

> ID：15153989
> 
> 赞同：1
> 
> 时间：2013-03-01T09:02:00.400
> 
> 标签：jsf, primefaces, resize

我试图`<p:panel>`在调整大小后保留 a 的尺寸，以便用户登录时，他可以拥有相同宽度和高度的小部件。使用 调整大小后，如何保留对面板的更改`<p:resizable>`？从 db 中检索它们后，如何更改 CSS 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T09:13:24.400

您可以在使用时使用 AJAX 调整大小`p:resizable`：

```
<p:resizable for="myPanel">
  <p:ajax listener="#{myBean.handleResize}"/>
</p:resizable> 
```

并在支持 bean 中定义函数：

```
public void handleResize(ResizeEvent e) {
  width = e.getWidth();
  height = e.getHeight();
  // Now persist height and width...
}

private int width;
private int height;

// getters and setters for width and height

@PostConstruct
public void init() {
  // init width and height from db...
} 
```

稍后您可以使用它`width`并`height`设置初始大小`p:panel`：

```
<p:panel style="width:#{myBean.width}px;height:#{myBean.height}px;"> 
```

# quickbooks - 如何将销售税项目添加到 QuickBooks Desktop？

> ID：15153995
> 
> 赞同：0
> 
> 时间：2013-03-01T09:02:25.977
> 
> 标签：quickbooks, quickbooks-online

我正在使用 QB 桌面版。我正在通过 IDS 在 QB 中创建所有项目，如库存/服务/其他费用/付款，但我无法通过我的 .net 代码添加 -“销售税项目”，因为

Intuit.Ipp.Data.Qbd.ItemTypeEnum - 只有 Assembly/FixedAsset/Group/Inventory/Service/OtherCharge/Payment.Product/SubTotal。而不是销售税项目。

有没有其他方法来创建销售税项目？

请帮忙。

问候，

瑞诗玛 D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:55:15.810

您可以改用该`SalesTax`对象。

```
<?xml version="1.0" encoding="utf-16"?>
<Add xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" RequestId="26d2185e14e24563afe3ea451f70440b" xmlns="http://www.intuit.com/sb/cdm/v2">
   <ExternalRealmId>132875294</ExternalRealmId>
   <Object xsi:type="SalesTax">
     <Name>All ST</Name>
     <Desc>County supplemental tax</Desc>
     <TaxRate>10</TaxRate>
     <VendorName>Franchise Tax Board</VendorName>
   </Object>
</Add> 
```

文档在[这里](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/SalesTax)。

# deployment - Drupal 7 部署：具有 nid 引用的功能

> ID：15153996
> 
> 赞同：0
> 
> 时间：2013-03-01T09:02:39.757
> 
> 标签：deployment, drupal-7

我为了将更改从我的测试服务器部署到临时服务器，我使用功能来收集和版本化一组视图、菜单项等。在我的一个视图中，我将特定的 nid 称为该视图的介绍文本。当我部署到登台服务器时，会为该视图显示另一个节点，因为该服务器具有另一个具有该给定 nid 的节点。

我的问题是：我应该如何处理这个问题？我可以在视图中使用 nid 的别名吗？或者有没有办法导出节点并在两台服务器之间保持固定的nid？或者，还有更好的方法？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:28:19.833

更好的方法是使用模块[Views UI: Edit Basic Settings](http://drupal.org/project/views_ui_basic)。

使用此模块，您可以避免使用节点作为介绍文本，而是可以使用视图标题作为介绍。