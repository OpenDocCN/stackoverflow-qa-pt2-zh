# StackOverflow 问答 13759000-13759999

# swing - 这个方法 invokeOnEventDispatchThread 做什么？

> ID：13759006
> 
> 赞同：1
> 
> 时间：2012-12-07T07:50:08.067
> 
> 标签：swing, swingutilities

我在我的代码库中遇到了以下代码，但我不明白它是如何工作的。我是 Swing 的一个新手，因此如果这看起来是一个愚蠢的问题，我很抱歉。

```
public static void invokeOnEventDispatchThread(Runnable r){
try{
  if(SwingUtilities.isEventDispatchThread()){
    r.run();
  }else{
    SwingUtilities.invokeAndWait(r);
  }
}catch(Exception e){
  ;
} 
```

}

这里会在事件调度线程中立即调用 r.run() 吗？r.run() 方法的重点是尽快调用，将其移动到队列的头部吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:12:28.377

该方法的要点是同步运行代码：

*   要么你已经在 EDT 中执行并且代码只是运行
*   或者您不是，该方法将等到 EDT 执行可运行对象

特别是，invokeAndWait 的 javadoc 指出不应在 EDT 上调用该方法，因此代码中有 2 个分支。

# build - Intellij IDEA中如何编译依赖库项目

> ID：13759008
> 
> 赞同：2
> 
> 时间：2012-12-07T07:50:21.660
> 
> 标签：build, intellij-idea

我有两个项目。项目 A 是我的通用实用程序库，更新了很多（每天至少几次）。项目 B 是我目前正在处理的应用程序。项目 B 将项目 A 作为库导入。我可以在项目 B 的编译期间强制 IntelliJ IDEA 编译项目 A（理想情况下仅在需要时，即项目 A 已被修改）？我不想每次修复库中的错误时都手动构建项目 A，因为它不方便且容易出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:30:00.863

只需使用[模块依赖项](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)。当您在库或客户端代码中进行任何更改时，所有内容都将自动增量编译。

# asp.net - 在服务器上保存创建的 excel 文件

> ID：13759012
> 
> 赞同：0
> 
> 时间：2012-12-07T07:50:35.510
> 
> 标签：asp.net, excel

我正在使用 ASP.NET C# 中的 Respose.Write 创建一个 excel 文件，我的用户可以将创建的文件保存在他们的系统上，但我想将此 excel 文件保存在我的服务器上，而用户对此一无所知。这怎么可能？这就是我创建 Excel 文件的方式：

```
 Response.Clear();
    Response.Buffer = true;
    Response.AddHeader("content-disposition", "attachment;filename=" + "res" + ".xls");
    Response.Charset = "";
    Response.ContentType = "application/vnd.ms-excel"; 
```

……

```
 Response.Write("</table>");
    Response.Flush();
    Response.End(); 
```

此代码保存创建的 excel 文件客户端 PC，但我想将创建的文件保存在服务器上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:05:48.617

总体思路是将 Excel 文件的内容写入缓冲区。然后 a) 将其保存到文件中并 b) 将其流式传输到客户端。您将希望在服务器上使用唯一的文件命名约定（例如包括时间戳）。IIS 应用程序池还需要您保存文件的文件夹的写入权限。

```
StringBuilder excel = new StringBuilder();
excel.Append("<table>");
...
excel.Append("</table>");

// save to file
File.WriteAllText("C:\\blah.xls", excel.ToString());

// output to response
Response.Clear();
Response.Buffer = true;
Response.AddHeader("content-disposition", "attachment;filename=" + "res" + ".xls");
Response.Charset = "";
Response.ContentType = "application/vnd.ms-excel";
Response.Write(excel.ToString());
Response.End(); 
```

# google-chrome - 网络浏览器集成

> ID：13759015
> 
> 赞同：1
> 
> 时间：2012-12-07T07:50:46.683
> 
> 标签：google-chrome, firefox, browser, integration, screenshot

我需要创建一个软件解决方案，它将使用浏览器功能来执行一些任务。

更具体地说，我将需要执行以下操作：

*   加载一些页面（通过 URL）
*   分析生成的内容 (DOM)，我需要访问动态生成的页面，而不仅仅是初始 HTML 文档
*   对页面的某些区域进行屏幕截图并将其保存到文件中

做这个的最好方式是什么？

什么现有的浏览器可以让我做到这一点，究竟是怎么做到的？一般来说，我更喜欢 Google Chrome 或 Mozilla Firefox。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T07:55:28.220

您可以使用[casperjs](http://casperjs.org/index.html)执行此操作 ，它将允许您加载网页，然后捕获任何区域并将其保存到文件中。它还允许玩 DOM

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:09:52.003

你可以创建一个谷歌浏览器扩展来做到这一点。

1.在扩展中，您可以加载页面或添加监听器以观察选项卡活动。

2.您可以在加载的页面上执行脚本，甚至可以使用jQuery来分析dom。

3.您可以使用chrome.tabs.captureVisibleTab函数进行截图，然后使用canvas处理截图图像。

有关 Chrome 扩展程序开发的更多详细信息：[https ://developer.chrome.com/extensions/getstarted.html](https://developer.chrome.com/extensions/getstarted.html)

# c# - 在 WPF 中打印带有动态数据的流文档

> ID：13759018
> 
> 赞同：1
> 
> 时间：2012-12-07T07:50:55.917
> 
> 标签：c#, .net, wpf, flowdocument

我正在尝试找到一种在 WPF 中打印流文档的好方法。我想要的是有可能在我设计文档时看到文档的结果，因此创建一个纯 FlowDocument 作为 XAML 是不可能的（因为 Visual Studio 不会显示它的设计视图）。

所以我现在所做的是创建一个包含这样的 FlowDocument 的窗口（一些多余的部分已被删除以使代码更简洁）：

```
<Window x:Class="MyNamespace.ProjectPrintout...>
  <Grid>
    <FlowDocumentReader>
      <FlowDocument ColumnWidth="500" Name="Document">
        <!-- Header -->
        <Paragraph Name="HeaderText">
          The header will go here
        </Paragraph>
      </FlowDocument>
    </FlowDocumentReader>
  </Grid>
</Window> 
```

这有点奇怪，因为我永远不会向用户显示这个窗口，我只用一个窗口包装 FlowDocument，这样我就可以在开发它时看到它的样子。这个我可以忍受。

所以在我的应用程序的其他地方，我想将此 FlowDocument 打印到默认打印机，但我还必须动态设置标题（除了需要此处省略的动态数据的文档的许多其他部分）。

要打印的代码如下所示：

```
 var printout = new ProjectPrintout();
  printout.HeaderText= new Paragraph(new Run("Proper header text"));
  var document = printout.Document;

  var pd = new PrintDialog();
  IDocumentPaginatorSource dps = document;
  pd.PrintDocument(dps.DocumentPaginator, "Document"); 
```

该文档正在打印，并且看起来很好，除了标题文本仍然显示“标题将转到此处”，即使我从代码中将其替换为“正确的标题文本”。我也试过这样改变它：

```
(printout.HeaderText.Inlines.FirstInline as Run).Text = "Proper header text"; 
```

但结果是一样的。

所以问题是：如何在打印之前从代码中更改 FlowDocument 中的内容，或者有更好的方法来代替我的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:48:16.427

**MVVM**救援：

**顿悟：UI 不是数据。UI 不是数据存储。UI 旨在显示数据，而不是存储它。**

1 - 创建一个简单的对象来保存您的数据

```
public class MyDocumentViewModel: INotifyPropertyChanged //Or whatever viewmodel base class
{
    private string _header;
    public string Header 
    {
        get { return _header; }
        set
        {
            _header = value;
            NotifyPropertyChange(() => Header);
         }
     }

     //Whatever other data you need
} 
```

`Binding`2 -在您的文档中定义s；

```
<Paragraph>
    <Run Text="{Binding Header}"/>
</Paragraph> 
```

3 - 将您的 FlowDocument 设置`DataContext`为此类的一个实例：

```
var flowdoc = new YourFlowDocument();
var data = new MyDocumentViewModel { Header = "this is the Header" };
//whatever other data

flowdoc.DataContext = data;

//do the printing stuff. 
```

# java - 在android中将字符串解析为json

> ID：13759021
> 
> 赞同：1
> 
> 时间：2012-12-07T07:51:02.127
> 
> 标签：java, android, json, parsing

这是我的代码..in android String

```
result[{"Submitted_Date_Time":"12\/3\/2012","City":"","Issue_Category":"Graffity","OnProgress_Date_Time":"","id":"000000000000000","area":"SH 55","State":"  ","Issue_Description":" ","Closed_Date_Time":"","imagepath":"android.graphics.Bitmap@40d55cd8","Latitude":"23.71","Longitude":"72.04","Issue_Status":"Closed","LandMark":" "}] 
```

我尝试将其转换为 json 数组，当我想从 json 数组中检索 json 对象时，它给了我`nullpointer exception...`

```
JSONArray jarray = new JSONArray(result);
JSONObject jobj = jarray.getJSONObject(1); 
```

请帮助我.. thnkx提前..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:59:30.740

首先你的json字符串如果它包含`"result"`那么它是无效的你可以在这里检查它[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)

要制作有效的 json 字符串，只需将 String.replace 用作：

```
String finaljson=result.replace("result", ""); 
```

现在 JSON 字符串是有效的，您可以将其解析为：

```
JSONArray jsonarray = new JSONArray(finaljson);
for (int i = 0 ; i < jarray.length() ; i++) {
 JSONObject jsonobj = jarray.getJSONObject(i);
  // get value from json object here 
    String str_City=jsonobj.getString("City");
    ///....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:53:24.133

Json数组只包含**一项**，索引为**0**

```
JSONArray jarray = new JSONArray(result);
JSONObject jobj = jarray.getJSONObject(0); 
```

要正确处理，请使用`for`循环访问 json 数组

```
JSONArray jarray = new JSONArray(result);
for (int i = 0 ; i < jarray.length() ; i++) {
     JSONObject jobj = jarray.getJSONObject(i);
     .....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:59:31.477

更新您的以下代码行，它将解决您的问题。

```
JSONObject jobj = jarray.getJSONObject(0); 
```

或者，如果对象不止一个，您可以编写下面的代码而不是上面的代码行。

```
for(int i=0;i<jarray.length();i++){
    JSONObject jobj = jarray.getJSONObject(i);
} 
```

# erlang - Erlang shell 没有输出或错误消息

> ID：13759022
> 
> 赞同：1
> 
> 时间：2012-12-07T07:51:03.653
> 
> 标签：erlang, erlang-shell

有时，当我尝试在 Erlang shell 中运行命令（例如从模块调用函数等）时，shell 不会给出任何输出或错误消息，只是返回。我确信我以正确的形状给出了命令（最后有一个点等）。为了解决这个问题，我必须在 shell 中给出以下命令：

```
'. or ". 
```

然后外壳打印一个长原子或任何东西，然后我可以正确运行我的原始命令。有没有人见过同样的问题？这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:45:07.347

这看起来像有一个初始`'`或`"`在命令行中。所以外壳正在等待第二个`'`或`"`关闭原子或字符串声明。它打印评估结果，现在准备好执行下一个命令。

在控制台中查看此示例（以 开头`erl`）：

```
Eshell V10.6.2  (abort with ^G)
1> io:format("Hello world!").
Hello world!ok
2> io:format("Hello world!             ).
2> ".
* 2: syntax error before: '.' 
```

# android - 为应用程序创建会话超时

> ID：13759029
> 
> 赞同：0
> 
> 时间：2012-12-07T07:51:42.627
> 
> 标签：android

我的应用程序中有很多活动（例如 A->B->C->D）...A 是登录活动...我有一个倒数计时器，用于会话超时..我想要做什么是..注销用户..即如果在活动 B、C、D 中没有用户交互，则将他放回活动 A...我已经扩展了我的应用程序类并在其中实例化了我的计时器...但是在这个活动中，我无法清除先前活动的栈顶，即行

```
addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

抛出异常......知道我将如何解决这个问题......这是我的代码......

```
public class MyApp extends Application {

    MyCount count;

    @Override
    public void onCreate() {
        // reinitialize variable
        count = new MyCount(5000, 1000);
    }

    public void startcounter() {
        count.start();
    }

    public void cancelcounter() {
        count.cancel();
    }

    public class MyCount extends CountDownTimer {
        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            try{
            Intent my = new Intent(getApplicationContext(), Login.class);
            my.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            startActivity(my);
            Toast.makeText(getApplicationContext(), "Finsihed",
                    Toast.LENGTH_LONG).show();
            }
            catch(Exception e )
            {
                Toast.makeText(getApplicationContext(), String.valueOf(e),
                        Toast.LENGTH_LONG).show();

            }
        }

        @Override
        public void onTick(long millisUntilFinished) {
            // TODO Auto-generated method stub
//          Toast.makeText(getApplicationContext(), String.valueOf(millisUntilFinished/1000),
    //              Toast.LENGTH_LONG).show();          
        }
    }
} 
```

# c# - 带有 dontEscape 的 Uri 构造函数已过时，什么是替代方案？

> ID：13759034
> 
> 赞同：17
> 
> 时间：2012-12-07T07:52:10.660
> 
> 标签：c#, httpwebrequest, escaping, uri

我的问题是关于在不转义的情况下将 URL 传递给 HttpWebRequest，我搜索了论坛和互联网，但没有找到一个好的解决方案。

我有以下网址：`string URL= www.website.com/sub/redirec\t\bs\dd`

因此，当我创建这样的 uri 时：

```
Uri uri = new Uri(URL);
HttpWebRequest request = (HttpWebRequest) WebRequest.Create(uri); 
```

在这种情况下，在 get 方法上，我将获得以下 URL：`www.website.com/sub/redirect%5Ct%5Cbc%5Cdd`

此符号“\”将替换为“%5C”。什么对我不发生至关重要？

我可以通过以下方式避免这种情况：

```
Uri uri = new Uri(URL, true); //bool dontEscape 
```

但是这个构造函数已经过时了。如何在不使用过时的情况下获得相同的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:10:14.213

用这个

```
Uri uri = new Uri(Uri.EscapeUriString(URL)); 
```

# bash - 如何在 csv 行的某个位置插入一个字符

> ID：13759039
> 
> 赞同：0
> 
> 时间：2012-12-07T07:52:51.360
> 
> 标签：bash, csv

我应该如何在 csv 行的某个点插入一个字符？例如，如果我有以下情况：

`1,2,3,4,5,6,7`

我怎么能`,,,,,`在 5（第五场）所在的地方插入，所以它看起来像

`1,2,3,4,,,,,,5,6,7`

我找到了如何为 java 执行此操作的链接，但不幸的是，我没有太多运气找到如何使用 bash 执行此操作。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:17:27.920

您可以使用`awk`更改特定字段：

```
awk -F"," '{OFS=","; a=$5; $5=",,,,,",a; print $0}' file 
```

这个想法是用所需的值更新字段 5，然后打印整行。

* * *

```
 echo "1,2,3,4,5,6,7" | awk -F"," '{a=$5; $5=",,,,,"a; OFS=","; print}' 
```

会打印：

```
1,2,3,4,,,,,,5,6,7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:51:15.907

```
awk -F, 'BEGIN{OFS=","}{$5=",,,,,"$5;print}' your_file 
```

测试如下：

```
> echo "1,2,3,4,5,6" | awk -F, 'BEGIN{OFS=","}{$5=",,,,,"$5;print}'
1,2,3,4,,,,,,5,6
> 
```

或者你可以使用 perl 来做到这一点：

```
> echo "1,2,3,4,5,6" | perl -F, -lane '$F[4]=~s/^/,,,,,/g;print join(",",@F)'
1,2,3,4,,,,,,5,6
> 
```

# php - PHP模板中未定义的变量

> ID：13759040
> 
> 赞同：1
> 
> 时间：2012-12-07T07:52:57.707
> 
> 标签：php, templates, undefined

我在视图层中使用 PHP 作为模板语言，是否可以使以下内容更简洁明了？

```
//in temp.phtlm
<?= (isset($user['name'])) ? $user['name'] : null; ?> 
```

不幸的是，我们甚至不能为此定义一个函数：

```
// as you know yet a notice is generated when calling a function with an undefined parameter
function echo($var)
{
        return (isset($var)) ? $var : null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:58:40.320

```
//in temp.phtlm
<?=$var?>

//in whatever_your_script_name.php
$template->var = isset($var) ? htmlentities(whatever(convert(encode($var)))) : '';
$template->render('temp.phtml'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:56:48.173

没有速记方法可以更快地做到这一点，不。如果此时 $var 不存在，任何其他方法都会引发错误。

根据您的结构/模板系统，您可以使用一个类来存储您的 var，并使用魔术方法 __get、__set、__isset、__unset 来调用您的变量。如果 var 不存在，那么这些方法可以只返回 null。不过，这需要对您的代码进行相当大的更改。您可以在此处找到有关魔术方法的手册：http: [//php.net/manual/en/language.oop5.magic.php](http://php.net/manual/en/language.oop5.magic.php)

至于你的原始代码，我会这样写：

```
<?php echo ( isset($var) ? $var : null ); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-15T13:13:11.853

您可以使用它，这样您就不会被提示变量未定义：

```
$args = $args ?? null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-16T14:14:50.627

使用`@`运算符是最短的选择。

```
<?= @$user['name']; ?> 
```

从 PHP 7 开始，您也可以使用`??`运算符。

```
<?= $user['name'] ?? null; ?> 
```

这正是`@`操作员所做的事情，尽管时间更长。

# c++ - 未找到符号：_libintl_gettext

> ID：13759044
> 
> 赞同：2
> 
> 时间：2012-12-07T07:53:40.200
> 
> 标签：c++, macos, node.js, gettext, dyld

我正在尝试使用 C++ 和`node-gyp`. 该软件包依赖于 GNU 的 Gettext 库。我目前正在使用 Mac OS X Mountain Lion。我曾尝试通过手动、通过 Homebrew 甚至通过 Fink 自己安装包。

该程序通过 Terminal.app 运行，并且包编译。我可以`.node`很好地使用该模块，除非我使用库中使用`gettext`. 我在 REPL 中收到以下错误，然后 REPL 退出。

```
dyld: lazy symbol binding failed: Symbol not found: _libintl_gettext
  Referenced from: /Users/KevinMartin/Dropbox/www/node-locale/build/Release/locale.node
  Expected in: dynamic lookup

dyld: Symbol not found: _libintl_gettext
  Referenced from: /Users/KevinMartin/Dropbox/www/node-locale/build/Release/locale.node
  Expected in: dynamic lookup

Trace/BPT trap: 5 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T20:57:11.337

这可能是因为您没有将`libintl`其列为要动态链接的库。您需要添加以下内容：

```
{
  "targets": [
    {
      "target_name": "...",
      "sources": ["..."],
      "libraries": ["/path/to/gettext/lib/libintl.a"]
    }
} 
```

到您的 binding.gyp 文件。`libintl`没有在您的应用程序中静态或动态链接，这就是您收到符号错误的原因。

编辑：

您可能还可以执行以下操作：

```
{
    "targets": [{
        "target_name": "...",
        "sources": [
            "..."
        ],
        "link_settings": {
             "libraries": ["libintl.8.dylib"]
        }
     }]
} 
```

# javascript - 正确访问 JavaScript 中的嵌套对象

> ID：13759052
> 
> 赞同：2
> 
> 时间：2012-12-07T07:54:12.380
> 
> 标签：javascript, class, properties

我有 JS 对象，在 Chrome 的控制台中看起来如下：

```
data: Object
 comparisonType: "IN"
 dateValue: ""
 numericalValue: 0
 screeningCriterionId: "-4"
 screeningField.displayName: "Prop1"
 screeningField.fieldName: "Prop2"
 screeningField.groupName: "Prop3"
 screeningField.type: "MULTI"
 value: null 
```

我需要 `screeningField.displayName: "Prop1"` 从这个对象中读取，但是试图在控制台中执行这个 `myObject.screeningField.displayName`我得到了错误：

> TypeError：无法读取未定义的属性“displayName”

如何解决我的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T08:01:05.867

显然，点实际上包含在键名中，请尝试：

```
myObject['screeningField.displayName'] 
```

# javascript - 为什么jQueryUI datepicker在页面重新加载时交换日期和月份？

> ID：13759053
> 
> 赞同：4
> 
> 时间：2012-12-07T07:54:19.917
> 
> 标签：javascript, jquery, asp.net-mvc-3, datepicker, jquery-ui-datepicker

我有一个 MVC3 应用程序，其中一个页面有一个[jQuery datepicker](http://jqueryui.com/datepicker/)：

```
<script>
    $(function () {
        $("#expirationDate").datepicker();
        $("#expirationDate").datepicker("option", "dateFormat", "dd/mm/yy");
    });
</script>

using (Html.BeginForm())
{
    @Html.TextBox("expirationDate")
    <input type="submit" value="Submit" />
} 
```

控制器动作是这样的：

```
public ActionResult DoStuff(String expirationDate)
{
    return View();
} 
```

日期选择器看起来很好，但行为很奇怪。

我在其中输入了一些日期，例如 2012 年 12 月 31 日为 12 月 31 日（注意我将格式指定为`dd/mm/yy`）并按下按钮。控制进入控制器，我看到该`expirationDate`变量保持`31/12/2012`值。然后操作返回，然后我看到文本框为空。

然后我尝试 2012 年 10 月 12 日 - 它开始执行操作，但是当页面再次显示时，它变成 2012 年 12 月 10 日 - 显然月份和日期被交换了。也许在 31/12 的情况下，它看到交换它们会产生一个无效的日期并丢弃它。

尽管明确指定了格式，为什么日期和月份会被交换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:08:15.457

这是我修复它的方法。我变了

```
$("#expirationDate").datepicker();
$("#expirationDate").datepicker("option", "dateFormat", "dd/mm/yy"); 
```

至

```
$("#expirationDate").datepicker({ dateFormat: 'dd/mm/yy' }); 
```

现在它工作得很好。

我的猜测是原始代码被破坏了。我没有制作原始代码，我在[datepicker page](http://jqueryui.com/datepicker/#date-formats)上找到了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:01:01.657

javascript格式`dd/mm/yy`是`01/12/2012`

在 javascript`yy`中具有相同的结果`yyyy`（这是因为`getYear()`不推荐使用`getFullYear()`

如果您只想获得年份的最后 2 位数字，则需要自己进行中断，无论是在 javascript 中，例如：

```
$(function() {

  $( "#datepicker" ).datepicker({
    changeMonth: true,
    onClose: function( selectedDate ) {
      var dt = new Date(selectedDate),
          txt = (dt.getDate() + 100).toString().slice(1) + "/" + 
                (dt.getMonth() + 101).toString().slice(1) + "/" + 
                (dt.getFullYear()).toString().slice(2);

       $( "#datepicker" ).val(txt);
    }
  });

  $( "#datepicker" ).datepicker( 
    "option", "dateFormat", "dd/mm/yy" 
  );

}); 
```

但是您指定您使用的是 ASP.NET，我更愿意在 .NET 中完成它

```
string dt = Request["expirationDate],
       expDate = DateTime.Parse(dt).ToString("dd/mm/yy"); 
```

# java - 日期时区问题

> ID：13759055
> 
> 赞同：3
> 
> 时间：2012-12-07T07:54:21.790
> 
> 标签：java, date, localization, timezone

我有一个用户可以输入日期的用户界面。现在这个日期在我的 EJB 内的代码中转换为 UTC 格式。

我的查询是 IST 中的浏览器和我的代码是否部署在 EST 中的服务器中。

现在要从哪个时区转换为 UTC，我需要从 IST 或 ETC 转换日期。

我的代码是这样的：

用户在 DatePicker 中输入日期。DatePicker 的值分配给纯 Java 日期对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:02:21.860

你需要对 UTC 做 IST

您的用户正在选择日期，假设它是 IST。因此，在您的服务器代码中，您需要在创建将在服务器时区中的 Date 对象之前考虑用户时区。由于服务器在 EST 中，因此您需要在存储之前将其再次转换为 UTC。

大多数服务器的时间配置为 UTC 时区，因此在这种情况下只需要一次转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:19:01.207

当您在本地时区获得日期时。

```
private static final DateFormat FULL_RFC822_DATETIME_FORMAT = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss", Locale.US);

public static void date2() throws Exception {
    FULL_RFC822_DATETIME_FORMAT.setTimeZone(new SimpleTimeZone(0, "GMT")); //frozen

    Date d = new Date(); // in local time zone
    System.out.println(d);

    System.out.println(FULL_RFC822_DATETIME_FORMAT.format(d) + " GMT");
} 
```

我明白了

```
Fri Dec 07 11:15:58 CET 2012
Fri, 7 Dec 2012 10:15:58 GMT 
```

GMT + UTC 相同。

# joomla1.5 - 产品旧价格在德德玛特

> ID：13759057
> 
> 赞同：0
> 
> 时间：2012-12-07T07:54:33.557
> 
> 标签：joomla1.5, virtuemart

我在 joomla 1.5 制作的应用程序中使用了 meadowmart。现在在我的产品列表中，我得到了旧价格和新价格，还显示了我可以为该产品节省多少。但我能够找出这些新旧价格在数据库中的存储位置。您能否指导我将旧价格存储在哪个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:00:14.273

如果我的问题是正确的，那么您需要基本价格和折扣价（覆盖）。如果是，那么您可以在表格中获得基本价格（旧价格），`jos_vm_product_price`列名是`product_price`，新价格（覆盖）在表和列`jos_vm_product_discount`名是`amount`。看看它是否有帮助。

# mercurial - 在 Windows 服务器上发布 mercurial 存储库的最佳方式（性能方面）是什么？

> ID：13759059
> 
> 赞同：0
> 
> 时间：2012-12-07T07:54:40.753
> 
> 标签：mercurial

我的印象是我们的 Windows Server 上的 hg 服务器相当慢......有没有更好的方法来发布 mercurial 存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:32:11.320

可以在[此处](http://mercurial.selenic.com/wiki/PublishingRepositories)找到比较发布存储库的可能性的列表。

我推荐[hgweb](http://mercurial.selenic.com/wiki/PublishingRepositories#hgweb)，这可能也是 Windows 上最灵活的解决方案。您可以将它与[Apache](http://mercurial.selenic.com/wiki/PublishingRepositories#ConfiguringApache)或[IIS](http://mercurial.selenic.com/wiki/HgWebInIisOnWindows)一起使用。

# sql - 如何比较 FuelPHP 中两列的值

> ID：13759060
> 
> 赞同：0
> 
> 时间：2012-12-07T07:54:44.723
> 
> 标签：sql, orm, fuelphp

使用 FuelPHP 1.3 的模型查询表时出现问题。条目表有三列（'id'、'status'、'current'、'max'）。

```
$result = Model_Entry::query()
    ->where('status', 1)
    ->where('count_current', '>=', 'count_max'); 
```

我想使用 'where' 方法的第三个参数作为列名，但它在生成的查询中作为值处理。

例子

```
SELECT * FROM `entries` AS `t0` WHERE `t0`.`status` = 1 AND `t0`.`count_current` >= 'count_max' 
```

我的目标

```
SELECT * FROM `entries` AS `t0` WHERE `t0`.`status` = 1 AND `t0`.`count_current` >= `t0`.`count_max` 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:22:49.893

为了实现你想要的，你必须使用[DB::expr()](http://fuelphp.com/dev-docs/classes/database/db.html#/method_expr)

因此，您的代码将是：

```
$result = Model_Entry::query()
    ->where('status', 1)
    ->where('count_current', '>=', DB::expr('count_max')); 
```

# php - wordpress stdClass 对象元素访问

> ID：13759061
> 
> 赞同：0
> 
> 时间：2012-12-07T07:54:58.220
> 
> 标签：php, arrays, wordpress

我想`term_taxonomy_id`从下面的数组中获取，但每次它都会给我以下错误。

> 可捕获的致命错误：类 WP_Error 的对象无法在 C 中转换为字符串.....

```
 Array
 (
   [0] => stdClass Object
    (
        [term_id] => 5
        [name] => fonts
        [slug] => fonts
        [term_group] => 0
        [term_taxonomy_id] => 5
        [taxonomy] => category
        [description] => 
        [parent] => 0
        [count] => 2
        [object_id] => 96
        [cat_ID] => 5
        [category_count] => 2
        [category_description] => 
        [cat_name] => fonts
        [category_nicename] => fonts
        [category_parent] => 0
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:58:06.243

你试图得到什么错误？尝试这个：

```
foreach($yourarray as $term){
  echo $term->term_taxonomy_id;
} 
```

# amazon-web-services - 监控 Beanstalk 生产环境的错误（代码级别）

> ID：13759063
> 
> 赞同：0
> 
> 时间：2012-12-07T07:55:17.157
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

我们的生产站点位于 Elastic Beanstalk。SNS 通知是一个很好的功能，可以让我们随时了解环境状态的变化。但是，我们要密切关注生产环境日志。

我们的项目是一个 java web 应用程序，我们想从其他 beanstalk 环境中检查生产环境的状态，即 beta 和 staging 环境，它们也在同一区域和同一应用程序中。

我们的目标是

1.  使用 aws sdk 或其他 aws 工具获取生产 beanstalk tomcat 日志并显示在我们的 beta 站点的某个页面上。

2.  在 Live 环境中定期从 Beta 环境运行一些工具。基本上是对站点进行测试，即所有代码级映射是否良好，如果有任何异常，则通过电子邮件发送给他们。

如果我们将第 2 点进一步细分——我们有石英调度程序可以在特定时间安排工作。我们计划添加一些脚本来定期测试完整的环境。是否有任何 Beanstalk 内置工具可以测试整个站点、访问所有 URL 并测试 DB 以 java 序列化对象类映射（休眠映射）等，

我们确实使用 S3 弹性 beanstalk 存储桶来检查 tomcat 日志，但如果可能的话，希望实现 step1 和 step2。

- 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:20:35.407

对于项目 #1：

我不建议使用 beta 和 dev 来观看生产。相反，这就是我要做的：

1.  在所有三个环境中设置 Pingdom，这样我们就可以密切关注正常运行时间
2.  查看日志记录代码。您是否有明确的异常处理模式/习惯用法？您的日志记录功能正常吗？
3.  使用 Logback 设置 Papertrail。为什么？您将为您设置系统日志接收器的每台机器提供实时聚合日志拖尾。对于 beanstalk-maven-plugin，我们即将发布一个原型（[参见一个由它创建的示例“空白”项目](https://bitbucket.org/aldrinleal/maven-elasticbeanstalk-blank)）。即使你不使用，它也值得，所以看看如何使用它。
4.  设置日志转出到 S3。事实上，这种用法是毫无用处的。我建议你做一些事情来导入分析（或者更好的是：从[Hive](http://hive.apache.org/)导出使用- 这是 Papertrail 所做的事情）
5.  相应地定义您的健康检查代码。根据依赖关系考虑可能出现的问题
6.  查看/设置一些 CloudWatch 指标。如果您的应用程序很重并且您在 t1.micro 上，它会在哪些条件下达到峰值？使用它对您有利

这只是一些想法。

w/r/t 项目#2：

我建议你重新考虑你的结构。我实际上不喜欢在弹性 beanstalk 服务器中使用 crontab 的想法，因为它容易出错（leader_only？管理输出？）。相反，我使用了我最喜欢的新的 crontab webapp - Jenkins，并设置了一个集成测试/冒烟测试工件，只有相关位来远程测试实例。Selenium 可能会有所帮助，但我想如果您的 Services 很重要，例如，您可能会更乐意依靠[rest-assured](http://code.google.com/p/rest-assured/)。

希望能帮助到你。

# postgresql - PostgreSQL 9.2 中 Sql Server 2008 的 DateTime 等效项

> ID：13759071
> 
> 赞同：2
> 
> 时间：2012-12-07T07:56:26.160
> 
> 标签：postgresql, sql-server-2008-r2, postgresql-9.2

我应该在 PostgreSql 9.2 中使用时间戳还是带时区的时间戳？哪一个与 Sql Server 2008 的日期时间版本匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T08:25:13.730

MS SQL 服务器中的日期时间没有时区，因此可以匹配 postgresql 中的时间戳。我不认为这很重要，但 postgresql 具有“仅”微秒精度，而 MS SQL 具有 100 纳秒精度。

# android - 获取报警信息

> ID：13759077
> 
> 赞同：0
> 
> 时间：2012-12-07T07:56:48.080
> 
> 标签：android, alarm

我正在实现一个应用程序，如果可用，我必须在其中显示警报信息（日期、时间..）。有人知道如何访问警报信息吗？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:45:38.957

结果：最后，我可以使用上面好奇的答案来检索警报信息。此外，当我在 /packages/apps/ 中探索 Deskclock 应用程序时，我发现了另一种获取下一个警报格式的方法（我使用这种方式在我的 LockScreen 上显示警报信息，因为它比 Curious 的更简单:)）

```
String nextAlarm = Settings.System.getString(getContentResolver(), 
                       Settings.System.NEXT_ALARM_FORMATTED);
if(TextUtils.isEmpty(nextAlarm) {
     Log.v(TAG, "nextAlarm is empty");
} else {
     Log.v(TAG, "nextAlarm is :" + nextAlarm);
} 
```

下一个报警格式如下：

```
Sat 09:00 
```

缺点是它只能在系统环境中运行（你必须将它们嵌入到 Android 源 -> 构建它并通过图像文件运行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:00:38.987

尝试这样的事情

```
final String tag_alarm = "tag_alarm";
Uri uri = Uri.parse("content://com.android.alarmclock/alarm")
Cursor c = getContentResolver().query(uri, null, null, null, null);
Log.i(tag_alarm, "no of records are" + c.getCount());
Log.i(tag_alarm, "no of columns are" + c.getColumnCount());
if (c != null) {
    String names[] = c.getColumnNames();
    for (String temp : names) {
        System.out.println(temp);
    }
    if (c.moveToFirst()) {
        do {
            for (int j = 0; j < c.getColumnCount(); j++) {
                Log.i(tag_alarm, c.getColumnName(j);
                        + " which has value " + c.getString(j));
            }
        } while (c.moveToNext());
    }
} 
```

# android - 在android中将短信文本转换为语音（音频）的代码

> ID：13759079
> 
> 赞同：0
> 
> 时间：2012-12-07T07:56:55.973
> 
> 标签：android, audio, sms, text-to-speech, voice-recognition

任何人都可以给我有关接收短信消息的通知的想法或下载代码，并在我单击按钮时将此短信转换为音频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:05:51.193

试试[这个](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)链接接收短信。

解析短信后，从[这里](http://www.androidhive.info/2012/01/android-text-to-speech-tutorial/)使用 android 文本到语音引擎。

# php - 将Android图像上传到php服务器错误

> ID：13759081
> 
> 赞同：0
> 
> 时间：2012-12-07T07:56:59.280
> 
> 标签：php, android, image, upload

我正在按照这里的教程以及[这里](http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/)的某人的帮助请求[...](https://stackoverflow.com/questions/9987343/android-upload-image-to-server-using-base64)

我对 Java/Android 编程非常陌生，我不确定如何“启动”这部分代码。在我的 AndroidManifest.xml 中，我将它设置为第一个活动，假设它会在我启动它时启动：

```
 <activity
        android:name=".UploadImage"
        android:label="@string/title_activity_starting_point" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

不幸的是，它不能以这种方式工作，因为每当我启动应用程序时，它都会自动“意外停止”。我放在这里的任何其他 Java 类都可以正常启动，所以我认为它是代码中的内容。我只是不确定我需要在哪里让代码“运行”，因为每次我编译它时，程序都会在我的手机上崩溃。

LogCat 说它无法解析这行代码：

```
String image_str = Base64.encodeBase64String(byte_arr);
// old code was String image_str = Base64.encodeBytes(byte_arr), 
// but this didn't compile for me and a comment on another website 
// said that encodeBase64String could replace it...apparently not? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:01:07.727

欢迎来到安卓。

首先，在 Eclipse 中找到您的 logCat。它会是你最好的朋友（也是很多挫折的来源）。

其次，一旦你找到你的 logCat，你很可能会看到一个[NetworkOnMainThread](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)异常。这意味着您正试图在主 UI 线程上执行网络请求，这将导致屏幕“冻结”和卡顿。这是一个禁忌，从 Android 4.0 开始，它会使您的应用程序崩溃。

有一种方法可以明确地覆盖它，但如果你学会一开始就避免这种情况会更好——一点也不难。只需使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

最后，确保您在 Manifest 中有 INTERNET 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:19:12.527

显然我输入的 Base64 文件是从原始文件修改的；'encodeBase64String' 不存在，并且使用：

```
int flag = 0;
String image_str = Base64.encodeToString(byte_arr, flag); 
```

修复了问题。

# oracle - 在 SQL Developer 中导出 View 的 DDL

> ID：13759083
> 
> 赞同：0
> 
> 时间：2012-12-07T07:57:06.100
> 
> 标签：oracle, plsql, ddl, oracle-sqldeveloper

我在数据库中有一个视图 vw_Monitor

如何将创建此表的 DDL 导出到 Oracle SQL Developer 中的文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:40:07.020

1.  打开连接窗口
2.  展开连接
3.  展开视图
4.  右键单击视图并选择导出
5.  在弹出窗口中，指定文件名（默认名称为 export.sql）
6.  点击下一步然后完成

# pthreads - 是否有一种可移植的方式来静态初始化递归互斥锁？

> ID：13759088
> 
> 赞同：0
> 
> 时间：2012-12-07T07:57:42.827
> 
> 标签：pthreads, posix, mutex, recursive-mutex

根据 POSIX，我可以通过这种方式静态初始化互斥锁：

```
pthread_mutex_t m = PTHREAD_MUTEX_INITIALIZER; 
```

但是，如果我希望互斥锁是递归的怎么办？互斥锁默认是非递归的，并且无法为静态初始化提供互斥锁属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:04:55.133

尝试 ：

```
pthread_mutex_t mutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:51:08.587

似乎没有便携式方法可以做到这一点。解决方法可能是在首次使用互斥锁时动态初始化它。为了防止在初始化时出现竞争条件，可以使用另一个非递归静态初始化的互斥锁。

# ruby - Ruby 正则表达式在 Perl 中是否有像“！~”这样的不匹配运算符？

> ID：13759091
> 
> 赞同：104
> 
> 时间：2012-12-07T07:57:57.753
> 
> 标签：ruby, regex

我只想知道 ruby​​ 正则表达式是否像`!~`perl 中那样有一个不匹配运算符。我觉得使用起来很不方便，`(?!xxx)`或者`(?<!xxxx)`因为您不能在`xxx`零件中使用正则表达式模式。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-12-07T08:04:50.737

是的：`!~`工作得很好——你可能认为它不会，因为[它在`Regexp`](https://www.ruby-doc.org/core-1.9.3/Regexp.html). 尽管如此，它仍然有效：

```
irb(main):001:0> 'x' !~ /x/
=> false
irb(main):002:0> 'x' !~ /y/
=> true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-06T03:04:17.037

支持 AFAIK (?!xxx)：

```
2.1.5 :021 > 'abc1234' =~ /^abc/
 => 0
2.1.5 :022 > 'def1234' =~ /^abc/
 => nil
2.1.5 :023 > 'abc1234' =~ /^(?!abc)/
 => nil
2.1.5 :024 > 'def1234' =~ /^(?!abc)/
 => 0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-04T14:21:46.067

回到 perl，`'foobar' !~ /bar/`测试字符串不包含“bar”是完全错误的。

在 Ruby 中，尤其是现代风格指南，我认为更明确的解决方案更传统且易于理解：

```
input = 'foobar'

do_something unless input.match?(/bar/) 

needs_bar = !input.match?(/bar/) 
```

也就是说，我认为如果有一种`.no_match?`方法会很漂亮。

# css - 如何简化跨浏览css动画关键帧？

> ID：13759098
> 
> 赞同：1
> 
> 时间：2012-12-07T07:58:20.970
> 
> 标签：css

如果我制作一个关键帧动画，我必须复制它 4 次，如果我想更改值，我必须每次更改 4 次？这太疯狂了。有什么方法可以简化它？

```
@-moz-keyframes ballanim /* Firefox */
    {
        0%   {
            top:0px;
               /* -webkit-animation-timing-function: ease-in;*/
        }

        25%{
            top:20px;
           -webkit-animation-timing-function: ease-in-out;
        }

        50%{
            top:0px;
        }

        75%{
            top:20px;
           -webkit-animation-timing-function: ease-in-out;
        }

        100%{
            top:0px;
        }

    }

    @-webkit-keyframes ballanim /* Firefox */
    {
        0%   {
            top:0px;
               /* -webkit-animation-timing-function: ease-in;*/
        }

        25%{
            top:20px;
           -webkit-animation-timing-function: ease-in-out;
        }

        50%{
            top:0px;
        }

        75%{
            top:20px;
           -webkit-animation-timing-function: ease-in-out;
        }

        100%{
            top:0px;
        }

    }
    @-o-keyframes ballanim /* Firefox */
    {
        0%   {
            top:0px;
               /* -webkit-animation-timing-function: ease-in;*/
        }

        25%{
            top:20px;
           -webkit-animation-timing-function: ease-in-out;
        }

        50%{
            top:0px;
        }

        75%{
            top:20px;
           -webkit-animation-timing-function: ease-in-out;
        }

        100%{
            top:0px;
        }

    }

    @keyframes ballanim /* Firefox */
    {
        0%   {
            top:0px;
               /* -webkit-animation-timing-function: ease-in;*/
        }

        25%{
            top:20px;
           -webkit-animation-timing-function: ease-in-out;
        }

        50%{
            top:0px;
        }

        75%{
            top:20px;
           -webkit-animation-timing-function: ease-in-out;
        }

        100%{
            top:0px;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:33:18.627

您可以免费使用前缀来简化您的 CSS 代码。基本上，您编写的代码没有`-webkit-`或任何其他前缀。

[http://leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:00:18.457

不，但你可以使用像[SASS](http://sass-lang.com/)或[LESS这样的](http://lesscss.org/)[预处理器](https://www.google.com/search?q=css%20preprocessor&aq=1&oq=css%20pre&aqs=chrome.2.0j57j0j5j62l2.2809&sugexp=chrome,mod=5&sourceid=chrome&ie=UTF-8)。

这是两者的比较：[CSS-tricks 文章](http://css-tricks.com/sass-vs-less/)。

本质上，当您编写代码时，您可以使用转换为 CSS 的变量。因此，您将使用变量进行开发，而用户获得的 CSS 将是转换后的 CSS。

这是一个类似的问题：[SASS 简化了带有前缀的 mixin](https://stackoverflow.com/questions/10752746/sass-simplify-a-mixin-with-prefixes)。

# ruby-on-rails-3 - 如何在格式页面中添加国际化

> ID：13759102
> 
> 赞同：1
> 
> 时间：2012-12-07T07:58:44.993
> 
> 标签：ruby-on-rails-3, internationalization, formtastic

我尝试使用默认的formtastic国际化并失败了。我试过了

[https://github.com/justinfrench/formtastic/wiki/6.2-Customize:-国际化](https://github.com/justinfrench/formtastic/wiki/6.2-Customize:-Internationalization)

所以现在我想在formtastic中使用i18ln gem of rails来介绍国际化。

我该怎么做？

这是建议的表单页面

```
<%= semantic_form_for @detail do |f| %>
  <%= f.inputs do %>

    <%= f.input :name %>

    <%= f.input :dob  %> 
    <%= f.input :gender, :as => :radio, :label => "Gender", :collection => [["Male", 'male'], ["Female", 'female']] %>  
  <% end %>
  <%= f.actions do %>
    <%= f.action :submit, :as => :input %>
  <% end %>
<% end %> 
```

这是 wk.yml 文件

```
en: 
formtastic:
  dob: Date of Birth
  name: Your Name
  Gender: gender 
```

如何将两者结合在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:09:03.590

首先，您是否添加`Formtastic::SemanticFormBuilder.i18n_lookups_by_default = true`了`formtastic.rb`初始化程序？

尝试：

```
wk: 
  formtastic:
    labels:
      detail:
        dob: "Date of Birth"
        name: "Your Name"
        gender: "gender" 
```

# java - SwingUtilities.convertPoint() 返回负值

> ID：13759112
> 
> 赞同：4
> 
> 时间：2012-12-07T08:00:03.063
> 
> 标签：java, swing, jpanel, jlabel, swingutilities

我在另一个具有复杂 JPanels 结构和大量代码的项目中面临这个问题。

在那里我有一个以下片段

```
Point point = label.getLocation();
Point point2 = SwingUtilities.convertPoint(label.getParent(), point, panel); 
```

其中标签和面板是动态选择的，JLabel 应该是 JPanel 的 grand-grand-...-child。

**那么为什么问题是`SwingUtilities.convertPoint()`如果源和目标具有子父关系，在什么情况下可以返回负值？这可能吗？**

此代码演示了负坐标问题，但 panel22 不是标签的父级。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Point;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class NegativeLocation {
    public static void main(String[] args) {
        new NegativeLocation();
    }

    public NegativeLocation() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());

                JPanel panel1 = new JPanel() {
                     @Override
                     public Dimension getPreferredSize() {
                         return new Dimension(600, 400);
                     }
                };

                JPanel panel21 = new JPanel() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(300, 400);
                    }
                };
                panel1.add(panel21);

                JPanel panel22 = new JPanel() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(300, 400);
                    }
                };
                panel1.add(panel22);

                JPanel panel3 = new JPanel() {
                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(300, 400);
                    }
                };
                panel21.add(panel3);

                JLabel label = new JLabel("Label");
                panel3.add(label);

                frame.getContentPane().add(panel1);
                frame.setPreferredSize(new Dimension(600, 400));

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                Point point = label.getLocation();
                Point point2 = SwingUtilities.convertPoint(label.getParent(), point, panel21);
                Point point3 = SwingUtilities.convertPoint(label.getParent(), point, panel22);

                System.out.println(point2);
                System.out.println(point3);
            }
        });
    }
} 
```

所以输出是

```
java.awt.Point[x=134,y=10]
java.awt.Point[x=134,y=-395] 
```

UPD：基本上，我需要获取`label`相对于`panel21`. 我怎样才能修改这条线来实现它？

```
Point point = label.getLocation();
Point point2 = SwingUtilities.convertPoint(label.getParent(), point, panel21); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T08:14:45.720

对我来说，这是正确的行为。想象一下。主面板包含一个位置 x=0 y=100 的子项。如果您将主面板的 0,0 点转换为子面板，它将返回 0, -100。事实上，哪个组件是哪个组件的父级并不重要。逻辑是添加（全部减去）父渲染子时应用于图形的所有 translate() 调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T08:45:32.333

举个例子……

![在此处输入图像描述](../Images/060bf59fddaddb69a84a816ab1c46e03.png)

```
public class TestLocation01 {

    public static void main(String[] args) {
        new TestLocation01();
    }

    public TestLocation01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JPanel outter = new JPanel(new BorderLayout());
                outter.setBorder(new CompoundBorder(new LineBorder(Color.RED), new EmptyBorder(10, 10, 10, 10)));
                JPanel inner = new JPanel(new GridBagLayout());
                inner.setBorder(new CompoundBorder(new LineBorder(Color.BLUE), new EmptyBorder(10, 10, 10, 10)));
                JLabel label = new JLabel("Testing");
                inner.add(label);
                outter.add(inner);

                JLabel below = new JLabel("Below");

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(outter);
                frame.add(below, BorderLayout.SOUTH);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                System.out.println("lable.location: " + label.getLocation());
                System.out.println("label to inner: " + SwingUtilities.convertPoint(label, new Point(0, 0), inner));
                System.out.println("label to outter: " + SwingUtilities.convertPoint(label, new Point(0, 0), outter));
                System.out.println("label.parent to inner: " + SwingUtilities.convertPoint(label.getParent(), new Point(0, 0), inner));
                System.out.println("label.parent to outter: " + SwingUtilities.convertPoint(label.getParent(), new Point(0, 0), outter));
                System.out.println("label to frame: " + SwingUtilities.convertPoint(label, new Point(0, 0), frame));
                System.out.println("label.getParent to frame: " + SwingUtilities.convertPoint(label.getParent(), new Point(0, 0), frame));
                System.out.println("outter to label: " + SwingUtilities.convertPoint(outter, new Point(0, 0), label));
                System.out.println("label to below: " + SwingUtilities.convertPoint(label, new Point(0, 0), below));
                System.out.println("below to label: " + SwingUtilities.convertPoint(below, new Point(0, 0), label));
            }
        });
    }        
} 
```

生成（在我的系统上）以下输出

```
lable.location: java.awt.Point[x=65,y=62]
label to inner: java.awt.Point[x=65,y=62]
label to outter: java.awt.Point[x=76,y=73]
label.parent to inner: java.awt.Point[x=0,y=0]
label.parent to outter: java.awt.Point[x=11,y=11]
label to frame: java.awt.Point[x=76,y=95]
label.getParent to frame: java.awt.Point[x=11,y=33]
outter to label: java.awt.Point[x=-76,y=-73]
label to below: java.awt.Point[x=76,y=-89]
below to label: java.awt.Point[x=-76,y=89] 
```

如果我将作为源组件传递，我会根据和我试图转换到其坐标空间的组件`label`之间的关系来获得相对位置。`label`如果我传递`label`'s 的父级，我使用的是父级坐标空间，这势必会产生不正确的结果

如果您查看 和 之间的关系`label`，`below`您会得到负面结果是有道理的，如`label`上方和右侧`below`

# c# - 将活动内存分页到磁盘的速率非常高，但恒定内存使用率很低

> ID：13759113
> 
> 赞同：11
> 
> 时间：2012-12-07T08:00:03.213
> 
> 标签：c#, memory-management, pagefile

正如标题所述，我遇到了页面文件活动高的问题。

我正在开发一个处理大量图像的程序，它从硬盘驱动器加载。它从每张图像中生成一些数据，我将其保存在列表中。对于每 3600 张图像，我将列表保存到硬盘中，其大小约为 5 到 10 MB。它以尽可能快的速度运行，因此它最多使用一个 CPU 线程。

该程序工作，它生成它应该生成的数据，但是当我在 Visual Studio 中分析它时，我收到一条警告说：[DA0014: Extremely high rates of paging active memory to disk](http://msdn.microsoft.com/en-us/library/dd264970.aspx)。

根据任务管理器，该程序的内存消耗约为 50 MB，似乎很稳定。当我运行该程序时，我在 4 GB 中剩下大约 2 GB，所以我想我并没有用完 RAM。 ![我的程序的内存使用情况](../Images/e30be33ca47d0b2cde4eb0bc3eb575ab.png)[http://i.stack.imgur.com/TDAB0.png](https://i.stack.imgur.com/TDAB0.png)

DA0014 规则描述说“例如，每秒输出的页数通常远大于每秒的页写入数。因为每秒输出的页数还包括系统文件缓存中更改的数据页。但是，它不是总是很容易确定哪个进程直接负责寻呼或为什么。”

这是否意味着我收到此警告仅仅是因为我从硬盘驱动器中读取了很多图像，还是其他原因？不太确定我在寻找什么样的错误。

编辑：链接到插入的图像。

EDIT1：图像大小约为 300 KB。在加载下一个之前，我会先处理每个。

更新：从实验看起来像分页来自只是加载大量文件。由于我不是 C# 或底层 GDI+ API 方面的专家，我不知道哪个答案最正确。我选择了 Andras Zoltans 的回答，因为它得到了很好的解释，而且他似乎做了很多工作来向像我这样的新人解释原因:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T09:32:58.510

*更新以下更多信息*

您的应用程序的工作集可能不是很大 - 但是虚拟内存大小呢？分页可能因此而发生，而不仅仅是因为它的物理大小。请参阅在 Windows 8 上运行的 VS2012的[Process Explorer](http://technet.microsoft.com/en-gb/sysinternals/bb896653.aspx)的屏幕截图：

![VS 2012 内存](../Images/28dce7488251cf778e9f762fc47e6678.png)

在任务管理器上？显然，同一进程的私有工作集是 305,376Kb。

我们可以从中得出 a) 任务管理器不一定是可信的； b) 就操作系统而言，应用程序在内存中的大小比我们想象的要复杂得多。

你可能想看看这个。

分页几乎肯定是因为您对文件所做的事情，而最终数字高几乎肯定是因为您正在处理的文件数量。一个简单的测试是对不同数量的文件进行试验，并在这些文件旁边生成一个最终分页图的数据集。如果文件数量导致分页，那么您将看到明显的相关性。

然后取出您所做的任何处理（但保持图像加载）并再次比较 - 请注意差异。

然后完全删除图像加载代码——注意区别。

显然，当您删除图像加载时，您会看到最大的故障下降。

现在，查看[Emgu.CV 图像代码](http://emgucv.git.sourceforge.net/git/gitweb.cgi?p=emgucv/emgucv;a=blob;f=Emgu.CV/Image.cs;h=ddf4ab0ccf0e9858c037ae3a5fbeee00e91003c4;hb=HEAD)，它在`Image`内部使用类来获取图像位 - 所以这是通过函数 GdipLoadImageFromFile [（此索引上的第二个条目）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534041(v=vs.85).aspx)启动 GDI+来解码图像（使用系统资源，加上可能大字节数组） - 然后将数据复制到包含实际 RGB 值的未压缩字节数组。

该字节数组使用（也被and`GCHandle.Alloc`包围）分配，以创建一个固定字节数组来保存图像数据（未压缩）。现在我不是 .Net 内存管理方面的专家，但在我看来，即使每个文件都是按顺序加载而不是并行加载的，我们也有可能在这里产生堆碎片。`GC.AddMemoryPressure``GC.RemoveMemoryPressure`

我不知道这是否导致硬分页。但似乎很有可能。

特别是图像的内存表示可以专门针对显示而不是原始文件字节。因此，例如，如果我们谈论的是 JPEG，那么 300Kb 的 JPEG 在物理内存中可能会大得多，具体取决于其大小。例如，一个 1027x768 的 32 位图像是 3Mb - 每个图像被分配*两次*，因为它被加载（第一次分配）然后复制（第二次分配）到 EMGU 图像对象中，然后再被处置。

但是您必须问自己是否有必要找到解决问题的方法。如果您的应用程序不消耗大量物理 RAM，那么它对其他应用程序的影响就会小得多；如果有足够的物理内存，一个进程大量访问页面文件不会对另一个没有影响的进程产生严重影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:31:59.393

> 但是，要确定哪个进程直接负责分页或原因并不总是容易的。

魔鬼就在那张逃避纸条里。位图使用内存映射文件从包含像素数据的文件映射到内存中。这是避免直接在 RAM 中读取和写入数据的有效方法，您只需为使用的内容付费。使文件与 RAM 保持同步的机制是分页。因此，如果您处理大量图像，则不可避免地会看到很多页面错误。您使用的工具不够聪明，无法知道这是设计使然。

功能，而不是错误。

# paypal - 如何用测试卡号测试paypal

> ID：13759116
> 
> 赞同：1
> 
> 时间：2012-12-07T08:00:09.850
> 
> 标签：paypal, credit-card

我正在使用贝宝按钮。代码是

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="encrypted" value="test">
<input type="image" src="http://www.paypalobjects.com/en_US/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

我怎样才能用测试卡号测试这个。我试过了

```
MasterCard:5555555555554444

MasterCard:5105105105105100

Visa:4111111111111111 
```

签证：4012888888881881

但显示错误“您输入的卡不能用于此付款。请输入其他信用卡或借记卡号码。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:12:36.883

使用[贝宝沙盒](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-sandbox-getting-started-guide)

> PayPal 提供了两种支持调用其 API 操作的环境：
> 
> **沙盒环境**
> 
> 沙盒是一个虚拟测试环境，您可以在其中使用虚构的用户帐户来调用 PayPal 操作，而不会影响任何真实的 PayPal 用户或其真实的 PayPal 帐户。
> 
> **生产环境**
> 
> 生产环境是您进行的 PayPal 操作调用会影响真实 PayPal 用户帐户的实时环境。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-12-08T08:35:05.247

使用真实的信用卡、借记卡或礼品卡号。交易清算后，只需使用 Paypal 控制面板退钱即可。Paypal 知道所有尝试的技巧，例如使用您引用的测试信用卡号。您应该将此视为对 Paypal 进行了良好编程以保护您的客户免受欺诈性收费的成功测试。

此外，使用“测试”信用卡号进行测试是真正的测试吗？我会提出，尝试使用广为人知的（您是如何发现的？）假信用卡号码进行测试并不是真正的测试 - 整个想法是为客户收取*真钱*，因此在不涉及真钱的情况下进行测试不是真正的测试。试试我上面说明的，你也测试并确认了返还真钱以及收集它的能力。

这将是您和您的客户可以真正相信的测试......而不是仅证明 Paypal 会或不会阻止使用明显虚假信用卡号进行的交易尝试的测试。您引用的卡号是用来测试您的 mod-10 校验位校验和是否正常工作的测试号（当您编写自己的信用卡处理 sfwr 时），而不是您实际上可以在 Paypal 上处理全部或部分交易.

# angularjs - AngularJs ReferenceError: $http 未定义

> ID：13759120
> 
> 赞同：201
> 
> 时间：2012-12-07T08:00:26.320
> 
> 标签：angularjs, javascript-framework, angular-http

我有以下角度功能：

```
$scope.updateStatus = function(user) {    
    $http({
        url: user.update_path, 
        method: "POST",
        data: {user_id: user.id, draft: true}
    });
}; 
```

但是每当调用这个函数时，我都会进入**`ReferenceError: $http is not defined`**我的控制台。有人可以帮我理解我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：376
> 
> 时间：2012-12-07T08:12:09.550

可能您还没有向`$http`控制器注入服务。有几种方法可以做到这一点。

请阅读[有关 DI 的参考资料](http://docs.angularjs.org/guide/di)。然后它变得非常简单：

```
function MyController($scope, $http) {
   // ... your code
} 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2014-03-02T08:58:20.983

我在使用时遇到了同样的问题

```
 myApp.controller('mainController', ['$scope', function($scope,) {
        //$http was not working in this
    }]); 
```

我已将上面的代码更改为下面给出的。请记住包含 $http(2 次)，如下所示。

```
 myApp.controller('mainController', ['$scope','$http', function($scope,$http) {
      //$http is working in this
 }]); 
```

它运作良好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-20T09:40:26.047

只是为了完成[Amit Garg 的回答](https://stackoverflow.com/a/22125671/4927984)，有几种方法可以在 AngularJS 中注入依赖项。

* * *

您还可以使用[`$inject`](https://docs.angularjs.org/guide/di)添加依赖项：

```
var MyController = function($scope, $http) {
  // ...
}
MyController.$inject = ['$scope', '$http']; 
```

# php - 如何使用 imagemagick 显示图像？

> ID：13759125
> 
> 赞同：2
> 
> 时间：2012-12-07T08:00:47.707
> 
> 标签：php, imagemagick

下面的代码就像一个魅力：

```
<?php
$im = new imagick('file.pdf[0]');
$im->setImageFormat( "jpg" );
header( "Content-Type: image/jpeg" );
echo $im;
?> 
```

但是如果我需要在现有的 html 页面中包含该图像怎么办？如果我删除标题图像/jpeg，它将图像显示为文本。我正在寻找一种可以解决问题的 ImageMagick 方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:15:10.340

您将在名为 image.php 的单独页面上拥有上面的代码（请注意，您需要删除标题部分）。

然后你想要它在主页上使用：

```
<img src="image.php"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:16:14.340

您必须在 img 标签中调用此 php 页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:20:34.723

将图像写入文件系统，然后输出带有`<img>`标签的 HTML 页面：

```
<?php
$im = new imagick('file.pdf[0]');
$im->setImageFormat('jpg');
$im->writeImage('/var/www/domain/image/something.png');

echo "<img src='/image/something.png'>"; 
```

请注意，该文件必须位于可公开访问的目录中

# php - 如何在php中为数组中的每个元素重复一个函数而不会超时

> ID：13759130
> 
> 赞同：0
> 
> 时间：2012-12-07T08:01:14.187
> 
> 标签：php, mysql, arrays, csv, timeout

我有一个函数，它将获取一个 id，并在数据库中找到与它相关的其他信息，这些信息分布在 3 个表中。然后它将它与一个 csv 文件进行比较，该文件通常是 cpu 密集型的。用一个 id 运行一次最多大约需要 8 到 10 秒，但我被要求让它在数据库中的不同数量的 id 上自动运行。为此，我在任何时候创建了一个与数据库中的条件相匹配的 id 数组，然后运行一个“while”语句来为数组中的每个元素重复该函数，但它最多可能有 4 个，我得到以下错误：

> 服务器错误！
> 
> 服务器遇到内部错误，无法完成您的请求。服务器过载或 CGI 脚本中存在错误。
> 
> 如果您认为这是服务器错误，请联系网站管理员。
> 
> 错误 500

我承认我的代码可能要干净得多，因为我仍在学习，但真正的瓶颈似乎是阅读 csv，这是一份每天都在变化的报告。我尝试了不同的组合，最好的结果是（请不要为此责备我，因为我知道这很愚蠢，但其他方法尚未奏效）运行代码如下：

```
$eventArray = eventArray($venueId);
$totalEvents = count($eventArray);

for($i=0; $i<$totalEvents; $i++)
    {
        $eventId = $eventArray[$i];
        echo $eventId;
        echo $datename = getEventDetails($eventId, $zone);
            // date of event
        echo $eventDate = $datename['eventDate'];
            // vs team
        echo $eventName = $datename['eventName'];

        $file_handle = fopen("data/rohm/sales/today.csv", "r");
        while (!feof($file_handle) )
            {
                $line_of_text = fgetcsv($file_handle, 200);
                include('finance_logic.php');
            }
        fclose($file_handle);
    } 
```

是的，它每次都在重复读取 csv，但我无法让它以任何其他方式运行，所以如果这是问题，我真的很感激一些关于更好地处理 csv 的指导。如果它与下面列出的“finance_logic.php”代码相关：

```
if($line_of_text[0] == "Event: $eventName ")
{
    $f = 1;
    $ticketTotalSet = "no";
    $killSet = 'no';
    // default totals zero
    $totalHolds = 0;
    $totalKills = 0;
    $ticketSold = 0;
    $ticketPrice = 0;
    $totalCap = 0;
}
if($f == 1 && $line_of_text[0] == "$eventDate")
    {
        $f = 2;
    }
    if($f == 2 && $line_of_text[0] == "Holds")
        {
            $f = 3;
            while($line_of_text[$col] !== "Face Value Amt")
                {
                    $col++;
                }
        }
        if($f == 3 && $line_of_text[0] !== "Face Value Amt")
            {
                if($f == 3 && $line_of_text[0] == "*: Kill")
                    {
                        $totalKills = $line_of_text[$col];
                    }
                $holdsArray[] = $line_of_text[$col];
            }
        if($f == 3 && $line_of_text[0] == "--")
            {
                $f = 4;
            }
            if($f == 4 && $line_of_text[0] == "Capacity")
                {
                    $totalCap = $line_of_text[$col];
                    $f = 5;
                }   
                if($f == 5 && $line_of_text[0] == "Abbreviated Performance Totals")
                    {
                        $f = 6;
                    }
                    if($f == 6 && $line_of_text[0] == "$eventName")
                        {
                            // change when 1 ticket exists
                            $ticketTotalSet = "yes";
                            // set season tickets
                            include("financial/seasontickets/$orgShortName.php");
                            // all non season are single tickets
                            if(!isset($category))
                                {
                                    $category = 'single';
                                }
                            $ticketName = $line_of_text[2];
                            $ticketSold = $line_of_text[3];
                            $ticketPrice = $line_of_text[4];
                            addTicketType($eventId, $ticketName, $category, $ticketSold, $ticketPrice);
                            unset($category);
                        }
                        if($f == 6 && $ticketTotalSet == "yes" && $line_of_text[0] !== "$eventName")
                            {
                                $totalHolds = (array_sum($holdsArray) - $totalKills);
                                // add cap, holds and kills
                                addKillsHoldsCap($eventId, $totalCap, $eventId, $totalHolds, $totalKills);
                                // reset everything
                                $f = 0;
                                $ticketTotalSet = "no";
                                echo "$eventName updated!";
                            } 
```

提前致谢！

ps 每次调用报告的原因是使用“finance_logic.php”搜索“eventName”和“eventDate”。显然，如果已经设置了所有事件名称和日期，则需要对报告进行一次搜索才能找到它们，但我不确定如何动态地做到这一点。任何建议都会受到欢迎，因为我确信那里有一些我还没有学到的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:02:46.580

我有时会在 localhost 中使用一些繁重的脚本，如果我不添加任何内容，它们就会超时。

一个简单的解决方案是限制函数的执行次数，然后重新加载页面，然后在停止的地方重新启动。

# sqlite - Sproutcore 数据库连接

> ID：13759134
> 
> 赞同：0
> 
> 时间：2012-12-07T08:01:49.633
> 
> 标签：sqlite, sproutcore

如何将 sproutcore 数据源连接到数据库后端，例如 sqlite 或 mysql ？如何将其连接到后端服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:12:11.280

你应该看看这个教程：[http](http://wiki.sproutcore.com/w/page/12413071/Todos%C2%A0Intro) ://wiki.sproutcore.com/w/page/12413071/Todos%C2%A0Intro尤其是这个页面[http://wiki.sproutcore.com/w/page/12413058/ Todos%2007-Hooking%20Up%20to%20the%20Backend](http://wiki.sproutcore.com/w/page/12413058/Todos%2007-Hooking%20Up%20to%20the%20Backend)

# c# - 如何在部署项目中使用 AssemblyInformationalVersionAttribute

> ID：13759136
> 
> 赞同：1
> 
> 时间：2012-12-07T08:01:49.957
> 
> 标签：c#, assemblyinfo, deployment-project

我有一个C#部署项目，我想在安装过程中更改显示的版本`X.X.Xa`（标有字母的将是下一个版本的测试）。

对于其他项目，可以通过“ `AssemblyInformationalVersionAttribute`”中的“ `AssemblyInfo.cs`”属性来完成。不幸的是，Delployment Project 没有添加文件的可能性，并且版本编号假设只能有数值​​。

是否可以以某种方式添加描述安装程序版本的字母，以便在安装时出现正确的版本？

# asp.net-mvc - 我的 Razor 视图中奇怪的自动命名空间导入

> ID：13759137
> 
> 赞同：3
> 
> 时间：2012-12-07T08:01:52.207
> 
> 标签：asp.net-mvc, razor

今天我注意到，例如“System”和“System.Web.Security”在我所有的剃须刀视图中都导入了，尽管我没有主动导入它们。我检查了：

*   @using 指令
*   web.config（编辑：也是全局 web.config）
*   添加全局导入

编辑：

似乎这些命名空间导入在 Razor 源代码中是硬连线的

[https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.WebPages.Razor/WebPageRazorHost.cs](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.WebPages.Razor/WebPageRazorHost.cs)

```
 private WebPageRazorHost()
    {
        NamespaceImports.Add("System");
        NamespaceImports.Add("System.Collections.Generic");
        NamespaceImports.Add("System.IO");
        NamespaceImports.Add("System.Linq");
        NamespaceImports.Add("System.Net");
        NamespaceImports.Add("System.Web");
        NamespaceImports.Add("System.Web.Helpers");
        NamespaceImports.Add("System.Web.Security");
        NamespaceImports.Add("System.Web.UI");
        NamespaceImports.Add("System.Web.WebPages");
        NamespaceImports.Add("System.Web.WebPages.Html");

        // ...
    } 
```

似乎我也无法通过在 web.config 的开头设置“清除”来禁用这些：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage" >
        <namespaces>
            <clear />
            <add namespace="System.Web.Helpers" />
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Routing" />
            <add namespace="System.Web.WebPages" />
        </namespaces>
    </pages>
</system.web.webPages.razor> 
```

因此，除非更改 Razor 源，否则此问题可能无法修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:17:39.657

这很常见，因为它在以下位置的整体 Web 配置文件中注册：

```
systemroot\Microsoft.NET\Framework\versionNumber\CONFIG\Web.config 
```

它是这样注册的：

```
 <pages>
            <namespaces>
                <add namespace="System" />
                <add namespace="System.Collections" />
                <add namespace="System.Collections.Generic" />
                <add namespace="System.Collections.Specialized" />
                <add namespace="System.ComponentModel.DataAnnotations" />
                <add namespace="System.Configuration" />
                <add namespace="System.Linq" />
                <add namespace="System.Text" />
                <add namespace="System.Text.RegularExpressions" />
                <add namespace="System.Web" />
                <add namespace="System.Web.Caching" />
                <add namespace="System.Web.DynamicData" />
                <add namespace="System.Web.SessionState" />
                <add namespace="System.Web.Security" />
                <add namespace="System.Web.Profile" />                    
                <add namespace="System.Xml.Linq" />
            </namespaces>  
 </pages> 
```

**编辑：**

[以下来自此处](https://stackoverflow.com/questions/3875207/how-to-add-extra-namespaces-to-razor-pages-instead-of-using-declaration)的 SO 答案：

*在 Preview 1 Razor 中使用了 WebForms 命名空间配置部分。然而，在 Beta 中，有一个新的配置部分与 WebForms 是分开的。您需要将以下内容添加到您的 web.config 文件中（或者从模板中的全新项目开始）：*

```
<configSections>
  <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
    <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
  </sectionGroup>
</configSections>

<system.web.webPages.razor>
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="MyCustomHelpers" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T02:30:50.090

*我在回答另一个问题时遇到了这个问题（[Removing System.Web.UI from a Razor view](https://stackoverflow.com/questions/18244103/removing-system-web-ui-from-a-razor-view/18245352)）。以下是我的答案的副本。它可能有用。*

我不确定这是否是你所追求的，但我做了一个快速的实验。我认为它有效。

我稍微扩展了 MvcWebRazorHostFactory。新工厂基本上沿用了基类创建的宿主，但首先移除了命名空间。

这是课程：

```
namespace TestCode
{
    using System.Web.WebPages.Razor;
    using System.Web.Mvc;
    using System.Web.Mvc.Razor;

    public class CustomWebRazorHostFactory : MvcWebRazorHostFactory
    {
        public override WebPageRazorHost CreateHost(string virtualPath, string physicalPath)
        {
            WebPageRazorHost host = base.CreateHost(virtualPath, physicalPath);
            host.NamespaceImports.Remove("System.Web.UI");
            return host;
        }
    }
} 
```

然后我更改了 web.config 以使用我的工厂而不是标准的：

```
<system.web.webPages.razor>
    <!--<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />-->
    <host factoryType="TestCode.CustomWebRazorHostFactory" /> 
```

答对了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:18:41.240

所以答案是：在 Razor 视图中，总是会导入一些命名空间。这不能在配置中禁用，因为它在代码中是硬连线的。这些命名空间是：

*   系统
*   System.Collections.Generic
*   系统.IO
*   System.Linq
*   系统网
*   系统.Web
*   System.Web.Helpers
*   系统.Web.安全
*   系统.Web.UI
*   System.Web.WebPages
*   System.Web.WebPages.Html

我不能 100% 确定这是完整的答案，但只要没有反对意见，我就会接受。

# javascript - 图形 API URL 间歇性返回错误 URL（java http 响应代码 400）

> ID：13759147
> 
> 赞同：2
> 
> 时间：2012-12-07T08:02:56.540
> 
> 标签：javascript, facebook-graph-api

因此，我正在编写一个程序，该程序通过已经提供的 Facebook 用户 URL 列表运行，然后访问他们的图形 API。所以用户 facebook.com/josh.maddock.7 访问 graph.facebook/com/josh.maddock.7 。

不幸的是，该程序随机选择一个停止工作的时间，并确定它从该点接收到的每个 URL 都是无效的，并返回 http 响应代码 400。例如，有一次它将为 1500 个用户正确访问图形信息，而当它在之后立即运行，它仅适用于 500。即使 URL 很好，并且它可能在直接执行之前或之后运行良好，它仍然返回这些错误。

它在每 500 个用户后休眠 50 秒，因为这首先似乎有助于解决问题，但显然还不够好。（我尝试最多睡 5 分钟，但仍然有这个问题。）

有谁知道它为什么会这样做？

谢谢你。

# android - 操作栏中的中心搜索视图

> ID：13759148
> 
> 赞同：14
> 
> 时间：2012-12-07T08:03:01.627
> 
> 标签：android, android-actionbar, searchview

如何将 ActionView（特别是 SearchView）置于 Action Bar 的中心？

如在 Google 图书应用中所见：

  [![Google 图书应用 SearchView](../Images/1672895af6bb7fe25a2e47d8de56ddec.png)](https://i.stack.imgur.com/1fqsh.png)

我当前的布局设置*（`search_layout.xml`）*：

```
<?xml version="1.0" encoding="utf-8"?>
<SearchView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:queryHint="@string/search_hint" /> 
```

我的操作栏 XML 文件*( `menu.xml`)*：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:icon="@+android:drawable/ic_menu_search"
        android:title="@string/search"
        android:showAsAction="always|collapseActionView"
        android:id="@+id/searchMenuItem"
        android:actionLayout="@layout/search_layout" />
</menu> 
```

有没有办法模仿 Books 的 SearchView 的行为？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T10:08:01.407

据我所知，在 a中无法实现以a`View`为中心。但是，它可以通过将自定义布局设置为. 一个基本的例子：`ActionBar``Action Items``xml menu``ActionBar`

一个`Activity`：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ActionBar actionBar = getActionBar();
        actionBar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM); 
        actionBar.setDisplayShowHomeEnabled(true);
        actionBar.setCustomView(R.layout.actionbar_layout);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

哪里`actionbar_layout`是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <SearchView
        android:id="@+id/mySearchView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:iconifiedByDefault="false" />
</RelativeLayout> 
```

在 7 英寸平板电脑上创建：

![在此处输入图像描述](../Images/dd4a5bb2a32279bc0c31c9bc9162be0e.png)

请注意设置为on的`iconifiedByDefault`属性，这会强制它显示为展开状态，而不仅仅是图标。这可能需要您[以编程方式隐藏软键盘](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)，否则它将在 Activity 启动时打开。`false``SearchView`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T17:48:32.857

看看[这里](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)。您可以只使用 android:actionViewClass="android.widget.SearchView" 属性，这应该可以正常工作（请记住，您可以在 Java 中获取对 searchView 的引用，并在此处更改提示，如果这是您想要的）。

# java - 如何在jsp中显示表格中的值？

> ID：13759149
> 
> 赞同：3
> 
> 时间：2012-12-07T08:03:12.740
> 
> 标签：java, javascript, jsp, jstl

我是 jsp 和 jstl 的新手，我正在编写此代码以使用 for 循环从数组中获取值。我正在获取输出，但我想将该输出放入表中。如何做到这一点任何人都可以帮助我吗？

```
for ( int i =0; i < timeSize ; i++)
       {
         out.println(resource[i]);
         out.println(itimespend[i]);
         out.println(icostspend[i]);
         totalcost += itimespend[i] * icostspend[i];          
        } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-15T08:42:12.887

客户端，jsp

```
<table>
    <tr>
        <th>ID</th>
        <th>Theme</th>
    </tr>
    <c:forEach items="${themeList}" var="theme" varStatus="status">
        <tr>
            <td>${theme.id}</td>
            <td>${theme.theme}</td>
        </tr>
    </c:forEach>
</table> 
```

不要忘记声明 jstl 标签库，并将 jstl 库添加到类路径

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

从服务器端，您需要向您的 jsp 返回一个列表，如下所示：

```
req.setAttribute("themeList", somelist); 
```

但考虑使用一些 MVC 框架

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T08:11:59.817

这并不难。解决方案可以通过这样的实现来实现：

```
<table>
<%
for ( int i =0; i < timeSize ; i++)
{
out.println(resource[i]);
out.println(itimespend[i]);
out.println(icostspend[i]);
totalcost += itimespend[i] * icostspend[i];     
%>

<tr>
<td> <%=resource[i]%></td>
<td><%=itimespend[i]%> </td>
<td> <%=icostspend[i]%></td>
</tr>

<%       
}
%>

</table> 
```

将表格标签放在外面，以免每次都循环它并在每个循环中创建一个不同的表格。这还没有经过测试，但我想你会从这个中得到基本的想法。

# php - 未定义的偏移量php多维数组

> ID：13759154
> 
> 赞同：-1
> 
> 时间：2012-12-07T08:03:38.903
> 
> 标签：php, codeigniter

```
$tempfiles=array();
    $i=0;
    foreach ($query->result_array() as $row) {
        $sql='Select * FROM file WHERE name="'.$row['filename'].'"';
        $q=$this->db->query($sql);

        foreach ($q->result_array() as $tuple) {
            $tempfiles[$i]['content']=$tuple['content'];
            $tempfiles[$i]['owner']=$tuple['content'];
            $tempfiles[$i]['last_modified_date']=$tuple['last_modified_date'];
        }
        $i++;
    }

    $i=0;
    $files=array();
    foreach ($query->result_array() as $row) {
        $files[$i]['name']=$row['filename'];
here:   $files[$i]['content']=$tempfiles[$i]['content'];
here:   $files[$i]['owner']=$tempfiles[$i]['owner'];
here:   $files[]['last_modified_date']=$tempfiles[$i]['last_modified_date'];
        $i++;
    } 
```

php 错误：未定义的偏移量 0 在我提到“这里”的行中，我无法弄清楚的问题是什么？

/我正在使用codeigniter。/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:31:53.860

你最好检查一下

```
$query->result_array() 
```

在第一个循环中，它是否包含任何结果。

如果不是，那么您不应该进一步移动，否则执行代码。

再次为第一个 foreach 中的下一个代码，检查

```
$q->result_array() 
```

**如果它包含结果，则移动以在$tempfiles**中分配值。

**对于在$files**中分配值，您应该像这样，

```
$files=array();
if( !empty($tempfiles))
{
  $i=0;
  foreach ($query->result_array() as $row) {
      $files[$i]['name']=$row['filename'];
  here:   $files[$i]['content']=$tempfiles[$i]['content'];
  here:   $files[$i]['owner']=$tempfiles[$i]['owner'];
  here:   $files[]['last_modified_date']=$tempfiles[$i]['last_modified_date'];
      $i++;
  }
} 
```

# python - Python，解析html

> ID：13759158
> 
> 赞同：0
> 
> 时间：2012-12-07T08:03:58.753
> 
> 标签：python, parsing, html-parsing, beautifulsoup

感谢这个网站的好心用户，我对如何使用 re 作为非标准 python 模块的替代有了一些想法，这样我的脚本就可以以最小的悬垂工作。今天，我一直在尝试解析模块。我遇到了beautifulsoup .. 这一切都很棒，但我不明白。

出于教育目的，我想从[http://yify-torrents.com/browse-movie](http://yify-torrents.com/browse-movie)中删除以下信息（请不要告诉我使用网络爬虫，我不是要爬取整个site - 只需从此页面中提取信息即可了解解析模块的工作原理！）

电影名称质量种子链接

这些项目中有 22 个，我希望它们按顺序存储在列表中，即。项目_1，项目_2。而这些列表需要包含这三个项目。例如：

```
item_1 = ["James Bond: Casino Royale (2006)", "720p", "http://yify-torrents.com/download/start/James_Bond_Casino_Royale_2006.torrent"]
item_2 = ["Pitch Perfect (2012)", "720p", "http://yify-torrents.com/download/start/Pitch_Perfect_2012.torrent"] 
```

然后，为了简单起见，我只想将每个项目打印到控制台。然而，为了让事情变得更加困难，这些项目在页面上没有标识符，所以 info. 需要严格排序。这一切都很好，但我得到的只是每个列表项包含的整个源，或者是空项！一个示例项目分隔符如下：

```
<div class="browse-info">
    <span class="info">
        <h3><a href="http://yify-torrents.com/movie/James_Bond_Casino_Royale_2006">James Bond: Casino Royale (2006)</a></h3>
        <p><b>Size:</b> 1018.26 MB</p>
        <p><b>Quality:</b> 720p</p>
        <p><b>Genre:</b> Action | Crime</p>
        <p><b>IMDB Rating:</b> 7.9/10</p>
            <span>
                <p class="peers"><b>Peers:</b> 698</p>
                <p class="peers"><b>Seeds:</b> 356</p>
            </span>
    </span>
    <span class="links">
        <a href="http://yify-torrents.com/movie/James_Bond_Casino_Royale_2006" class="std-btn-small mright">View Info<span></span></a>
        <a href="http://yify-torrents.com/download/start/James_Bond_Casino_Royale_2006.torrent" class="std-btn-small mleft torrentDwl" data-movieID="2620" data-torrentID="2812">Download<span></span></a>
    </span> 
</div> 
```

有任何想法吗？有人可以给我一个如何做到这一点的例子吗？我不确定漂亮的汤是否能满足我的所有要求！PS。抱歉英语不好，这不是我的第一语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:39:39.610

```
from bs4 import BeautifulSoup
import urllib2

f=urllib2.urlopen('http://yify-torrents.com/browse-movie')
html=f.read()
soup=BeautifulSoup(html)

In [25]: for i in soup.findAll("div",{"class":"browse-info"}):
    ...:     name=i.find('a').text
    ...:     for x in i.findAll('b'):
    ...:         if x.text=="Quality:":
    ...:             quality=x.parent.text
    ...:     link=i.find('a',{"class":"std-btn-small mleft torrentDwl"})['href']
    ...:     print [name,quality,link]
    ...:     
[u'James Bond: Casino Royale (2006)', u'Quality: 720p', 'http://yify-torrents.com/download/start/James_Bond_Casino_Royale_2006.torrent']
[u'Pitch Perfect (2012)', u'Quality: 720p', 'http://yify-torrents.com/download/start/Pitch_Perfect_2012.torrent']
... 
```

或者得到你想要的输出：

```
In [26]: for i in soup.findAll("div",{"class":"browse-info"}):
    ...:     name=i.find('a').text
    ...:     for x in i.findAll('b'):
    ...:         if x.text=="Quality:":
    ...:             quality=x.parent.find(text=True, recursive=False).strip()
    ...:     link=i.find('a',{"class":"std-btn-small mleft torrentDwl"})['href']
    ...:     print [name,quality,link] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:25:09.380

根据您的要求，我粘贴了解析器的简单示例。如您所见，它使用 lxml。使用 lxml，您有两种使用 DOM 树的方法，其中一种是[xpath](http://www.w3schools.com/xpath/default.asp)，第二种是我更喜欢 xpath 的 css 选择器。

```
import lxml.html
import decimal
import urllib

def parse():
    url = 'https://sometotosite.com'
    doc = lxml.html.fromstring(urllib.urlopen(url).read())
    main_div = doc.xpath("//div[@id='line']")[0]
    main = {}
    tr = []
    for el in main_div.getchildren():
    if el.xpath("descendant::a[contains(@name,'tn')]/text()"):
        category = el.xpath("descendant::a[contains(@name,'tn')]/text()")[0]
        main[category] = ''
        tr = []
    else:
        for element in el.getchildren():
            if '&#8212' in lxml.html.tostring(element):
                tr.append(element)
                print category, tr
parse() 
```

[LXML官方网站](http://lxml.de/)

# php - 数组到表格 HTML 输出

> ID：13759159
> 
> 赞同：0
> 
> 时间：2012-12-07T08:04:01.360
> 
> 标签：php, mysql, arrays

我在这里有个问题...

我有一个这样的mysql数组...

```
array(3) {
  [0]=>
  array(4) {
    ["id"]=>
    string(1) "1"
    ["name"]=>
    string(8) "Delivery"
    ["namaShipp"]=>
    string(3) "JNE"
    ["price"]=>
    string(5) "30000"
  }
  [1]=>
  array(4) {
    ["id"]=>
    string(1) "3"
    ["name"]=>
    string(12) "Installation"
    ["namaShipp"]=>
    string(7) "Kudamas"
    ["price"]=>
    string(1) "0"
  }
  [2]=>
  array(4) {
    ["id"]=>
    string(1) "5"
    ["name"]=>
    string(12) "Installation"
    ["namaShipp"]=>
    string(5) "MTECH"
    ["price"]=>
    string(1) "0"
  }
} 
```

然后我想将它输出到一个简单的表..我不知道如何..所以结果按 ['name'] 键分组。我的问题是如何输出该数组成为这样

```
-----------------------------
INSTALLATION (get from ['name'])
----------------------------
MTECH - 0                <---- MTECH is get from ['namaShipp'] and 0 is from ['price']
KUDAMAS - 0

-----------------------------
DELIVERY
-----------------------------
JNE - 30000 
```

有人可以帮忙吗？？我会很感激的..我只是对thisss很困惑......

谢谢之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:10:12.170

像这样的东西：

```
$current=false;
foreach($result as $item)
{
  if($item['name']!==$current)
  {
    echo '
---------------------
'.$item['name'].'
---------------------';
    $current=$item['name'];
   }
   echo '
'$item['namaShipp'].' - '.$item['price'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:13:33.383

试试这个（假设你展示的数组是`$processedArray`）：

```
$processedArray = array();
foreach ($mainArray as $innerArray) {
    $processedArray[$innerArray['name']][] = $innerArray;
}
foreach ($processedArray as $name => $itemsArray) {
    echo '----<br />'.$name.'<br />---';
    foreach ($itemsArray as $item) {
        echo $item['namaShipp'].' - '.$item['price'].'<br />';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:16:03.227

改变你的阵列！创建记录数组的数组：

```
$list=array();    
foreach($data as $item)
    $list[$item['name']][]=$item;
foreach($list as $groupname=>$records){
    echo '--------------- '.$groupname.' ------------';
    foreach($records as $item){
        //output one $item as before...
    }
} 
```

# objective-c - iOS 中的 FacebookSDK 不显示关闭按钮且无法关闭

> ID：13759160
> 
> 赞同：2
> 
> 时间：2012-12-07T08:04:03.137
> 
> 标签：objective-c, facebook, facebook-graph-api, ios6, ios5

嗨，我已经为 iOS 6 应用程序集成了 Facebook SDK。Facebook 身份验证和共享工作完美，但没有规定关闭 FB Dialogue box.ie。当 FB 对话框打开时，只有在身份验证成功后才会关闭。没有关闭或导航返回的规定。如何制作关闭按钮。我正在使用的代码片段如下所示。提前致谢。

```
-(NSDictionary *)shareFacebook
{

    NSDictionary *userInfo;
    if (FBSession.activeSession.isOpen)
    {

        if (FBSession.activeSession.isOpen)
        {

            [self.closeButton setHidden:NO];
            [FBRequestConnection startForMeWithCompletionHandler:^(FBRequestConnection *connection, id<FBGraphUser> user, NSError *error) {

                NSUserDefaults *standardUserDefaults=[NSUserDefaults standardUserDefaults];
                [standardUserDefaults setObject:user forKey:@"fbUserInfo"];

                    [self.manager authenticateUserUsingFB:[user objectForKey:@"email"]];

            }];
        }

    }
    else{
        NSLog(@"fb session not active.");
        [self openSessionWithAllowLoginUI:YES];
    }
    return userInfo;
}

- (void)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

    NSArray *permissions = [[NSArray alloc] initWithObjects:

                            @"user_photos",
                            @"publish_actions",
                            @"read_stream",
                            @"friends_photos",
                            @"email" ,nil];

    [FBSession setActiveSession:[[FBSession alloc] initWithPermissions:permissions]];

    [[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView

                              completionHandler:^(FBSession *session,

                                                  FBSessionState state,

                                                  NSError *error) {

                                  NSLog(@" state=%d",state);
                                  if(FBSessionStateOpen)
                                  {
                                      [self shareFacebook];
                                  }
                              }];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-14T11:40:36.773

通过将 FacebookSDKResources.bundle 文件从 FacebookSDK.framework/Resources 文件夹拖到 Project Navigator 的 Frameworks 部分来添加 Facebook SDK for iOS 资源包。 [http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:41:16.193

我知道是什么导致了这个错误！按钮和图标视图（对话框右上角有两个视图——关闭按钮和图标视图）实际上是存在的（可以点击查看）但不可见。这是因为该项目无法看到位于`FBDialog.bundle`. 您应该从包中复制这些图像并将它们添加到项目中，然后直接设置图像。您的 init 方法可能如下所示：

```
 //This is your FBDialog.m file
- (id)init {
  if (self = [super initWithFrame:CGRectZero]) {
    .........

    UIImage* iconImage = [UIImage imageNamed:@"fbicon.png"];
    UIImage* closeImage = [UIImage imageNamed:@"close.png"];

    _iconView = [[UIImageView alloc] initWithImage:iconImage];
    [self addSubview:_iconView];

    _closeButton = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
    [_closeButton setImage:closeImage forState:UIControlStateNormal];
    [_closeButton addTarget:self action:@selector(cancel)
      forControlEvents:UIControlEventTouchUpInside];

    ......... 
```

可能有更好的方法来修复这个错误，但这对我有用。

# android - Linphone-Android SIP 库编译错误

> ID：13759164
> 
> 赞同：1
> 
> 时间：2012-12-07T08:04:32.640
> 
> 标签：android, android-ndk, sip, voip

最近几天我正在尝试编译 linphone-android 库，但我遇到了下面提到的问题。根据我拍摄此命令时的自述文件**./prepare_sources.sh** 我观察到有一个错误，如下所述。

全部下载 cd ../src; rm *.c *.h &> /dev/null; awk -f /Users/gulfamhassan/Documents/githubs/linphone-android/submodules/libilbc-rfc3951/downloads/extract-cfile.awk \ /Users/gulfamhassan/Documents/githubs/linphone-android/submodules/libilbc-rfc3951/downloads /rfc3951.txt > /dev/null awk：源代码行 1 源文件 /Users/gulfamhassan/Documents/githubs/linphone-android/submodules/libilbc-rfc3951/downloads/extract-cfile.awk 的语法错误是

> > > < <<< HTML> awk：在源代码行 10 make[1]：*** [../src/iLBC_define.h] 错误 2 make：*** [all-recursive] 错误 1
> > > 
> > > ## iLBC 准备阶段失败

在此之后它会继续编译并且不会在任何阶段停止。在此操作之后，我拍摄了另一个命令**ndk-build**它工作正常，但在显示下面提到的错误后终止编译

编译拇指：msilbc <= ilbc.c jni/..//submodules/msilbc/ilbc.c:5:26：致命错误：iLBC_encode.h：没有此类文件或目录编译终止。制作：*** [obj/local/armeabi-v7a/objs/msilbc/ilbc.o] 错误 1

* * *

我被困在这个阶段，任何人都可以帮助我解决这个问题。提前感谢古法姆

# android - 如何以编程方式设置通话消息？

> ID：13759165
> 
> 赞同：2
> 
> 时间：2012-12-07T08:04:39.117
> 
> 标签：android, call

我是android开发的新手，有人可以告诉我怎么做吗？

在我的应用程序中：

*   有人拨打我的手机号码，他们会听到 2 声响铃，然后它会在他们处于保持状态时自动播放我的消息，直到我接听电话。

请指导我。

谢谢.....

# java - Android TCP 套接字超时

> ID：13759170
> 
> 赞同：3
> 
> 时间：2012-12-07T08:04:57.680
> 
> 标签：java, android, sockets, tcp, timeout

我正在做一个需要与 TCP 套接字通信的应用程序。我设置了一个作为我的 TCP 服务器的服务和一个作为我的 TCP 客户端的活动。

我在发送消息和从服务器接收答案方面有很大的延迟，比如 10 秒或更长时间。经过几天的研究，我发现了如何在客户端请求上设置超时并且一切都开始正常工作。

所以我的问题是，是否必须为 TCP 连接设置超时，否则它不起作用或我的实现有其他问题？

这是我的客户代码：

```
public static void sendTCP(final InetAddress senderAddr, final String Msg, final int serverPort) {
        Thread tclient = new Thread(){
            public void run() {
                boolean connected;
                Socket socket = new Socket();
                try {
                    Log.d("TCP", "Client: Connecting...");
                    socket.bind(null);
                    socket.connect((new InetSocketAddress(senderAddr, serverPort)), 1000);
                    connected = true;
                try {
                    Log.d("TCP", "Client: Sending command.");
                    PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
                    out.println(Msg);
                    out.close();
                } 
                catch (Exception e) {
                    Log.e("TCP", "Client: Error sending.", e);
                }
                } catch (Exception e) {
                    Log.e("TCP", "Client: Error connecting.", e);
                    connected = false;
                }
                finally {
                    if (socket != null) {
                        if (socket.isConnected()) {
                            try {
                                socket.close();
                                Log.d("TCP", "Client: Connection Closed.");
                            } catch (IOException e) {
                                Log.e("TCP", "Client: Error closing connection.", e);
                            }
                        }
                    }
                }
            }
        };
        tclient.start();
    } 
```

和服务器的：

```
public void onStart(Intent intent, int startid) {

    t = new Thread(){
         public void run() {
             try {
                Boolean end = false;
                Log.d("TCP", "Server: Creating server.");
                ServerSocket ss = new ServerSocket(TCPPORT);
                while(!end) {
                    //Server is waiting for client here, if needed
                    Log.d("TCP", "Server: Waiting on packet!");
                    Socket s = ss.accept();
                    BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
                    String st = input.readLine();
                    Log.d("TCP", "Server: Message received from client: "+st);

                    InetAddress senderAddr = s.getInetAddress();
                    senderAddrString= senderAddr.getHostAddress();

                    myAddrString = GetLocalIpAddress();
                    myAddr = InetAddress.getByName(myAddrString);

                    if (senderAddr.equals(myAddr)) {
                    }
                    else {
                        //Estraggo dal pacchetto ricevuto
                        try {
                            StringTokenizer tokens = new StringTokenizer(st, "|");
                            flag = tokens.nextToken();
                            userid = tokens.nextToken();
                            payload = tokens.nextToken();
                        }
                        catch (Exception e) {
                            Log.e("TCP", "Server: Errore estrazione dati.");
                        }

                        if (flag.equals(Constants.flag_scan_answer)) {
                            Log.d("TCP", "Server: Flag answer");
                            //devo passare i dati ad un database ScanActivity

                            //database(senderAddrString,userid);

                            System.out.println("RISPOSTA RICEVUTA DAL SERVICE TCP");
                            System.out.println("FLAG " + flag);
                            System.out.println("USERID " + userid);
                            System.out.println("PAYLOAD " + payload);

                            announceReceivingPacket();
                        }

                        else {
                            Log.d("TCP", "Server: CASO NON PREVISTO");
                        }
                    }
                    s.close();
                }
            }
            catch (UnknownHostException e) {
                    e.printStackTrace();
            } 
            catch (IOException e) {
                    e.printStackTrace();
            }
         }
    };
    t.start();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:09:36.443

> 必须为 TCP 连接设置超时

这不是强制性的，但这是一个非常好的主意。首先将其设置为预期服务时间的两倍或三倍，然后进行调整，以免误报。默认的读取超时是无限的，我已经看到整个平台以一种读取器无法检测到的方式失败，而不是读取超时。

相关报价请参见[此处](https://stackoverflow.com/questions/9227775/what-are-default-values-for-connection-and-socket-timeouts-in-defaulthttpclient)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-05T00:14:13.970

连接调用

socket.connect((new InetSocketAddress(senderAddr, serverPort)), 1000);

可以是带有自动报告失败和超时以及成功连接的回调的 BeginConnect。此时您可以在套接字上使用 BeginSend 和 BeginReceive。

# ios - 在 Xcode 中构建发布时是否剥离了胖库

> ID：13759177
> 
> 赞同：3
> 
> 时间：2012-12-07T08:05:20.160
> 
> 标签：ios, xcode, static-libraries

我现在有一个用于开发的胖（armv7 + i386）库。工作正常，但现在我担心 Xcode 在构建发布时是否会剥离其他架构（i386）和其他配置（例如调试）？

我不打算调试这个库，因为它非常古老且稳定。我只是想使用它，所以我想我不需要所有调试符号（？），此外，在构建发布时我什至不需要 i386，因为它是用于模拟器的。

我是否需要在 Xcode 中设置一些东西以使其被剥离，或者我最好使用非胖库？如果是这样，我该如何控制？:)

这个库大约 500KB，所以我不想放比我需要的更多的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T09:50:13.490

该库为不同的架构（i386、armv7、armv7s 等）存储单独的目标文件。当您构建最终应用程序时，它只会从库中检索所需的架构和所需的目标文件。App Store 的最终版本肯定不会包含任何 i386。

关于*发布*和*调试*配置，它是不同的。库工具不知道这个概念。所以它不能存储单独的调试和发布版本。在构建应用程序时，它会采用它找到的任何东西。因此，要最小化您的最终应用程序，您需要使用发布设置构建库和应用程序。

# php - CURL 不发布数据 PHP

> ID：13759180
> 
> 赞同：0
> 
> 时间：2012-12-07T08:05:31.200
> 
> 标签：php, curl

我在 PHP 中进行 curl 以在站点上发布数据并回显结果，但它不发布数据这是我的代码：

```
<?php
$imei = "imei=XXXXXXXXX";

//set POST variables
$url = 'http://XXX.com/XXX.php';

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);

curl_setopt ($ch, CURLOPT_POST, true);
curl_setopt($ch,CURLOPT_POSTFIELDS, $imei);
curl_setopt ($ch, CURLOPT_REFERER, 'http://www.XXX.com');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_STDERR, fopen('php://output', 'w+'));
curl_setopt($ch, CURLOPT_VERBOSE, 1);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);
echo $result;
echo $imei;

?> 
```

当我回显 $imei 时，它会显示完整的字符串但未传递数据：S

请帮忙，代码有什么问题？

提前致谢

更新：在网站的原始 html 中，它是 name="imei" 而不是 id="imei"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:49:24.760

你还没有设置选项`CURLOPT_RETURNTRANSFER`。如果您不将此选项设置为 ，则 cURL 不会返回响应`true`。

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

我还建议将您的 POST 数据更改为数组而不是字符串。cURL 选项接受一个数组，它会自动从该数组中构建和编码字符串。如果您自己构建它，则还必须对其进行编码。

```
$imei = array('imei' => 'XXXXXXXXX'); 
```

编辑：根据您的调试数据，我认为您的资源需要 GET 请求而不是发布。您还应该设置一个用户代理，因为站点可能会拒绝没有用户代理的请求：

```
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)'); 
```

从[手册](http://php.net/manual/en/function.curl-setopt.php)：

> **CURLOPT_RETURNTRANSFER**
> TRUE 将传输作为 curl_exec() 的返回值的字符串返回，而不是直接输出。

# ipad - 在 Xcode 4.5.1 中下载 ipad 模拟器 5.0

> ID：13759181
> 
> 赞同：0
> 
> 时间：2012-12-07T08:05:39.500
> 
> 标签：ipad, ios5, ios6, ios-simulator, xcode4.5

请让我知道如何获得 ipad 模拟器 5.0 / 5.1。我们使用的是 xcode 4.5，默认模拟器是 6.0。我们还需要在 ipad 5.0 中对其进行测试。谷歌搜索似乎也没有提供适当的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:08:26.793

Xcode - 首选项 - 下载 - 组件 - iOS 5.0/5.1 模拟器。

更新：我发现这篇文章，[Xcode 4.5 and iOS 5.1 Simulator](http://pieces.dominikporada.com/post/31915100911/simulator)听起来 Xcode 4.5 和 iOS 5.1 模拟器有问题。尝试升级到 Xcode 4.5.2。

# jquery - 仅使用图像可排序

> ID：13759182
> 
> 赞同：1
> 
> 时间：2012-12-07T08:05:46.403
> 
> 标签：jquery, jquery-ui

我有一个看起来像这样的页面：

```
<script type="text/javascript">
    $(function () {

        $('table tbody').sortable({
            update: OnSortableUpdate
        });
        $('table tbody').disableSelection();
});
</script>

<table>
<tr class="sortable-tr">
    <td>A</td>
    <td>B</td>
    <td><img src="sort.png" class="sort-handle" /></td>
</tr>
<tr class="sortable-tr">
    <td>A</td>
    <td>B</td>
    <td><img src="sort.png" class="sort-handle" /></td>
</tr>
</table> 
```

效果很好。但我想仅使用每行的图像对 's 进行排序。现在可以拖动等

这是怎么做的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:10:04.470

您可以使用 jquery 可排序属性`handle`

```
$('table tbody').sortable({
    handle: ".handle"
}); 
```

你会给你的图像类“句柄”

```
<div class="handle"><img src="sort.png" class="sort-handle" /></div> 
```

这是一个小提琴：http: [//jsfiddle.net/qGGhK/16/](http://jsfiddle.net/qGGhK/16/)

# php - PHP：会话已经开始 - 忽略 session_start() 仅在 Windows 中出现

> ID：13759187
> 
> 赞同：16
> 
> 时间：2012-12-07T08:06:10.710
> 
> 标签：php

> **可能重复：**
> [已经启动的 PHP 会话](https://stackoverflow.com/questions/10648984/php-sessions-that-have-already-been-started)

我在 windows 和 Mac 上运行了我的 PHP 项目，代码相同。但是当我在 Windows 而非 Mac 中运行我的项目时出现此错误。

错误信息是。

```
A session had already been started - ignoring session_start() 
```

仅在 Windows 系统上提供。但在 Mac 中我没有收到任何错误消息。请任何人给我一个解决方案......

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-07T10:10:31.953

您说您以支票开始会话：

```
if(!isset($_SESSION)){
    session_start();
} 
```

事实是 $_SESSION 始终存在，如果您没有在其中放入任何内容，那么它将始终为空，因此该语句将始终返回 true。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T08:30:15.887

我不知道为什么 windows 显示错误而 Mac 不显示。但是您可以尝试全部替换`the session_start()`为

```
if(!isset($_SESSION)) 
    { 
        session_start(); 
    } 
```

这可能会帮助你..

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-07T10:05:48.637

此消息是一个`E_NOTICE`. 您只在 Windows 机器上看到它的原因很可能是因为您的`error_reporting`设置不同。

如果你搜索`php.ini`你`error_reporting`应该排除`E_NOTICE`如果你不想看到它。

或者，将您的代码修复为不多次启动会话。理想情况下，您将只有一个可以启动会话的核心代码文件，而没有其他实例`session_start()`（即不要将其放在每一页上）。然后，您可以在每个页面上包含它，或者创建一个路由模式，以确保在每个页面加载时调用初始化代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T08:11:50.187

看看你的 php.ini (http://php.net/session.auto-start) 中的 session.auto_start，很可能会话是自动启动的

# python - SQLAlchemy：双方的多对多动态加载

> ID：13759188
> 
> 赞同：0
> 
> 时间：2012-12-07T08:06:12.837
> 
> 标签：python, sqlalchemy, many-to-many, lazy-loading

假设我有以下内容：

```
association_table = Table('things_stuffs', Base.metadata,
    autoload=True,
    extend_existing=True)

class Thing(Base):
    __tablename__ = 'things'
    __table_args__ = {'autoload': True}

class Stuff(Base):
    __tablename__ = 'stuffs'
    __table_args__ = (
        {'autoload': True}
        )
    things = relationship(Thing,
                secondary=association_table,
                backref=backref("stuffs", uselist=False, lazy='dynamic')) 
```

现在，如果我想从 Stuff 实例中获取所有内容，我可以这样做：

```
a_stuff_instance.things.filter().all() 
```

并因`lazy="dynamic"`零件而查询。但另一边不起作用。如果我想做

```
a_thing_instance.stuffs.filter().all() 
```

我明白了`AttributeError: 'InstrumentedList' object has no attribute 'filter'`。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:16:06.560

只需添加`dynamic`到另一边：

```
things = relationship(Thing,
            secondary=association_table,
            lazy='dynamic', # *** @note: new parameter ***
            backref=backref("stuffs", uselist=False, lazy='dynamic')) 
```

# .net - 匹配字符串的正则表达式，每个单词之间只有一个空格，并且没有尾随或前导空格

> ID：13759194
> 
> 赞同：-3
> 
> 时间：2012-12-07T08:06:43.407
> 
> 标签：.net, regex

如何编写一个正则表达式来匹配每个单词之间只有一个空格且没有尾随或前导空格的字符串？字符串可以 - 除了字母 - 只包含 [-.,'] 字符并且单词之间没有连续的空格。

*   有效的 ：`"testing 2 regx-tested"`
*   无效的：`"testing regx#tested "`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:09:06.840

把你说的写下来

```
Regex regex = new Regex("[-0-9a-z.,']+( [-0-9a-z.,']+)*"); 
```

这应该匹配一个单词，然后是许多其他单词，由一个空格分隔。

# nhibernate - NHibernate 中具有不同命名 Id 列的继承映射

> ID：13759202
> 
> 赞同：1
> 
> 时间：2012-12-07T08:07:24.420
> 
> 标签：nhibernate, mapping, class-table-inheritance

我有三个共享很多列的表，所以我想使用继承来映射它们并使我的数据层更加 OOP、DRY 等等。在 NHibernate 手册中提到的所有三种继承映射策略（每个类层次结构的表、每个子类的表和每个具体类的表）中，超类（或公共接口）使用所有派生子类通用的 Id 进行映射。但是我的表上没有一个主键列被称为相同的。知道我怎么能映射这个？

在图表中：

TAXTYPE_1

*   clcpnd -> 不同名称的 Id 列
*   clcnmb -> 常见但名称不同的列
*   clcprc -> 特定列，此表唯一

TAXTYPE_2

*   rndind -> 不同名称的 Id 列
*   rndamb -> 常见但名称不同的列
*   rndorc -> 特定列，此表独有

TAXTYPE_3

*   dasfnd -> 不同名称的 Id 列
*   dastmb -> 通用但名称不同的列
*   dascrc -> 特定列，此表唯一

（是的，我的专栏就是这样命名的。旧系统。无法更改。现在请杀了我）

**编辑**：我已经使*架构*更清晰。另外，我想让我的观点更清楚一点：这三个表属于同一类型，我希望能够抽象一个实现公共字段的超类型，然后将细节写入每个子类。所以我有一个TaxType 类和一个TaxType1、TaxType2 和TaxType3 子类，它们中的每一个“都是”TaxType。此外，这将使我的其他层更易于使用，因为我将使用单个 TaxType 存储库等进行查询。感谢 Jamie Ide 让我意识到这个问题是多么糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:59:33.447

使用继承是一个常见的错误，因为您的对象共享属性。当您的对象具有共享行为和/或具有“is-a”关系（例如汽车是车辆）时，继承是合适的。还要考虑如何查询对象；您是否需要查询基类并让 NHibernate 返回任何派生类？

在您的情况下，界面可能是更好的选择。这也解析了不同命名的 Id 列，因为您可以定义一个名为 Id 的属性来访问实际列。

```
public interface IMyEntity
{
    int Id { get; set; }
}

public class MyClass : IMyEntity
{
    public int Clcnmb { get; set; }
    public int Id
    { 
        get { return Clcnmb; }
        set { Clcnmb = value; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T16:10:08.040

正如评论中所讨论的：这里的问题是现有的**ID 生成策略**。虽然(eg )的一个*值*可以在所有表​​中使用，但不能使用 NHibernate 的继承**机制**。`ID``1`

 **基类抽象类`TaxType`需要在其子类型中具有唯一 ID，以区分每个实例。**

# javascript - 我无法理解 Y-Combinator，所以我尝试实现它并最终得到了一些更短的东西，这很有效。这怎么可能？

> ID：13759207
> 
> 赞同：16
> 
> 时间：2012-12-07T08:07:40.367
> 
> 标签：javascript, recursion, functional-programming, scheme, y-combinator

我无法理解 Y-combinator，所以我尝试实现一个在没有本地实现的情况下启用递归的函数。经过一番思考，我最终得出了这个结论：

```
Y = λx.(λv.(x x) v) 
```

这比实际的短：

```
Y = λf.(λx.f (x x)) (λx.f (x x)) 
```

而且，令我惊讶的是，它奏效了。一些例子：

```
// JavaScript
Y = function(x){
  return function(v){
    return x(x, v);
  };
};
sum = Y(function(f, n){
  return n == 0 ? 0 : n + f(f, n - 1);
});
sum(4);

; Scheme
(define Y (lambda (x) (lambda (v) (x x v))))
(define sum (Y 
    (lambda (f n) 
        (if (equal? n 0) 
            0 
            (+ n (f f (- n 1)))))))
(sum 4) 
```

两个片段都按预期输出 10（从 0 到 4 的总和）。

这是什么，为什么它更短，为什么我们更喜欢更长的版本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T08:25:40.880

它更短的原因是您实现的*不是*Y 组合器。它介于实际的 Y 组合器和有时被称为 U 组合器之间的东西。要成为一个合适的 Y 组合器，这应该有效：

```
(define sum
  (Y (lambda (f)
       (lambda (v) (if (equal? n 0) 0 (+ n (f (- n 1)))))))) 
```

或在 Javascript 中：

```
sum = Y( function(f) { return function(n) {
  return n == 0 ? 0 : n + f(n-1);
};}); 
```

如果你按照自己的方式工作，你会*发现*会让它变长的一件事是你需要将复制`f`的东西移到 Y 中，而下一个让它变得更长的事情是当你结束时由于这些语言是严格的，因此可以保护`x x`函数内部的自应用程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T08:33:59.927

与“真实”版本的区别在于，您确实需要传递自己的函数以及通常不需要的参数 - Y 通过为函数提供自身的递归变体来对其进行抽象。

JavaScript 中的 Sum 应该是

```
Y (function(rec){ return function (n) { return n==0 ? 0 : n + rec(n-1); };}) 
```

当我将[常见的 JS 表达式](http://en.wikipedia.org/wiki/Fixed-point_combinator?oldid=528004308#Example_in_JavaScript)重组为

```
function Y (f) {
    function alt (x) {
        function rec (y) { // this function is basically equal to Y (f)
             return x(x)(y); // as x === alt
        }
        return f (rec);
    }
    return alt(alt);
} 
```

# mysql - 在 MySQL 中，只替换一列的每条记录的所有数据

> ID：13759208
> 
> 赞同：-1
> 
> 时间：2012-12-07T08:07:45.103
> 
> 标签：mysql

我有一张这样的桌子

```
 A    |    B    |    C    <----columns
x   0    |    -    |    -
y   0    |    -    |    -
z   0    |    -    |    - 
```

我想用 - 替换所有的 0，像 foreach 这样的东西会这样做，但我想用 SQL 来做（如果可能的话）。

在我的实际问题中，这里有数百行，所以手工操作会很糟糕。我可能可以用一些 php 破解它，但我怀疑 MySQL 中有一个东西可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:09:18.680

你只是想说

```
update mytable set A="-" where A="0"; 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:09:25.883

`update table tablename set A="-" where A="0"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:09:36.387

你在找这个吗？

```
UPDATE mytable
SET a = 123
WHERE a = 0 
```

或者用你想要的任何东西替换 123，比如“-”。

# javascript - 通过 URL 将数组从 EXTJS 传递到 PHP

> ID：13759210
> 
> 赞同：0
> 
> 时间：2012-12-07T08:07:58.647
> 
> 标签：javascript, extjs

我在 ExtJS 中有一个复选框网格面板，我想将选定的行发布到 PHP 函数。

当用户单击按钮时，应将所选行发送到 php，然后 php 通过`$_REQUEST`作为参数获取此行。

有人能指出我在 PHP 中发布数组和解码的正确方向吗？

**该模型 ：**

```
 Ext.define('LabelModel', {
        extend: 'Ext.data.Model',
        fields: 
        [
            {name: 'LABEL_ID', type: 'int'},
            {name: 'STORE_NO', type: 'int'},
            {name: 'DNR_NO', type: 'int'},
            {name: 'DNR_DESCRIPTION', type: 'string'},
            {name: 'DEPARTMENT', type: 'int'},
            {name: 'ARTICLE_NO', type: 'int'},
            {name: 'SUBSYS_ARTICLE_NO', type: 'int'},               
            {name: 'ARTICLE_DESCRIPTION', type: 'string'},
            {name: 'ARTICLE_TYPE', convert: checkType},
            {name: 'START_DATE', type: 'date', dateReadFormat: 'd.m.Y', submitFormat: 'd.m.Y'},
            {name: 'END_DATE', type: 'date', dateReadFormat: 'd.m.Y', submitFormat: 'd.m.Y'},
            {name: 'PRODUCT_PRICE', type: 'float'},
            {name: 'UNIT_PRICE', type: 'float'},
            {name: 'SHELF_PRICE', type: 'float'},
            {name: 'LABEL_TEXT', type: 'string'},
            {name: 'STATUS', type: 'string'},
            {name: 'COLLI_CONTENT', type: 'int'},
            {name: 'ACTUAL_STOCK', type: 'int'},
            {name: 'PWHG', type: 'int'},
            {name: 'PWG', type: 'int'},
            {name: 'MP_NO', type: 'int', convert: checkType},
            {name: 'INVOICE_TEXT', type: 'string', convert: checkType},
            {name: 'LABEL_TYPE', type: 'string'},
            {name: 'LABEL_SIGN', type: 'string', convert: checkType}
        ]
    }); 
```

**商店：**

```
 var labels = Ext.create('Ext.data.JsonStore', {
        model: 'LabelModel',
        successProperty: 'success',
        proxy: {
            type: 'ajax',
            url: 'lib/db/get-label-list.php',
            timeout: 120000,
            reader: {
                type: 'json',
                root: 'labelList',
                idProperty: 'LABEL_ID'
            }
        }
    }); 
```

**按钮处理程序：**

```
 xtype: 'button',
                    width: 90,
                    text: 'GÖNDER',
                    cls: 'x-btn-gonder',
                    handler: function(){
                        var ppt     = Ext.getCmp('labelType').getValue();
                        var sb      = Ext.getCmp('basic-statusbar');
                        var count   = Ext.getCmp('labelGrids').getSelectionModel().getCount();
                        var rows    = Ext.getCmp('labelGrids').getSelectionModel().getSelection();
                        var cmb     = Ext.getCmp('labelType');
                        if(ppt == null) {
                            dialog.show();
                        } else {
                        if(count > 0) {
                            for (var i = 0; i < count; i++)
                            {
                                console.log(rows[i].data.LABEL_TYPE, rows[i].data.LABEL_ID);
                                cmb.reset();    // clear combobox selected value after send to printer
                            }
                            // set statusbar text after print
                            sb.setStatus({
                                text: 'Etiketler yazıcıya gönderildi..!',
                                iconCls: 'x-status-saved',
                                clear: true
                            });
                            // remove checked items
                            Ext.select('.x-grid-row-selected').each(function (element) {
                                Ext.getCmp('labelGrids').getSelectionModel().deselectAll();
                            });
                        } else if(count == 0) {
                            sb.setStatus({
                                iconCls: 'x-status-error',
                                text: 'Lütfen yazdırmak istediğiniz etiketleri seçiniz!'
                            });
                        }                           
                        winPaper.hide();
                        }
                    } 
```

# spring - Spring + Hibernate 注释错误“未映射”

> ID：13759216
> 
> 赞同：3
> 
> 时间：2012-12-07T08:08:27.093
> 
> 标签：spring, hibernate, annotations

我将 Spring + Hibernate 与注释一起使用，但出现以下错误：

```
org.hibernate.hql.ast.QuerySyntaxException: Produit is not mapped [from Produit] 
```

当我调用这个函数时它会出现：

```
public List<Produit> getListeProduit() {

    return sessionFactory.getCurrentSession().createQuery("from Produit").list();
} 
```

这是我的 hibernate.cfg.xml

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
    <mapping class="port.domain.Produit" />
</session-factory>     
</hibernate-configuration> 
```

Produit 类用@Entity 很好地注释，@Table ID 用@Id、@Column、@GeneratedValue 其他列用@Column

这是我的 XXX-servlet.xml 中的 bean SessionFactory：

```
<bean id="sessionFactory"     class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
</bean> 
```

编辑：实体代码

```
@Entity
@Table(name="produit")
public class Produit implements Serializable{

@Id
@Column(name="produit_id")
@GeneratedValue(strategy=GenerationType.IDENTITY)
private int produitId;

@Column(name="produit_nom")
private String produitNom;

public void setProduitId(int i) {
    produitId = i;
} 

public int getProduitId() {
    return produitId;
} 

public void setProduitNom(String s) {
    produitNom = s;
} 

public String getProduitNom() {
    return produitNom;
} 
} 
```

我知道有很多关于这个问题的线索，但我没有找到任何正确的问题。我知道 Hibernate 无法映射我的课程，但我不知道为什么......

问题可能来自哪里？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:22:47.537

通常问题是微不足道的：您应该使用`javax.persistence.Entity`而不是 Hibernate-specific `org.hibernate.annotations.Entity`。后者在 Hibernate 中被弃用，在可能的情况下支持 JPA 注释。

这正是你没有展示的，所以希望这是一个幸运的镜头:)

# php - PHP：身份验证重定向问题

> ID：13759218
> 
> 赞同：0
> 
> 时间：2012-12-07T08:08:49.117
> 
> 标签：php, codeigniter, caching

我正在处理的网站有一些奇怪的缓存问题。当我第一次单击登录时，它会进入登录页面，但是当我注销并尝试单击登录时，它会重定向回主页。此外，当我从 b4m.bid4med.com/myaccount 访问该站点时，它会将我重定向到登录页面，登录后它会将我带回 b4m.bid4med.com/myaccount，该页面重定向回登录页面，然后意识到我已登录，因此重定向我到主页。当我在浏览器中禁用缓存时，这一切都很好。我也放了php代码

```
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
```

对不起，如果我没有解释清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T00:44:36.860

我在登录会话方面也遇到了一些麻烦的缓存问题。添加此标头为我解决了它：

```
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); 
```

（我认为可能是过去的任何时候）

# php - 如何在 jquery/javascript 上插入 php

> ID：13759223
> 
> 赞同：-1
> 
> 时间：2012-12-07T08:09:04.347
> 
> 标签：php, jquery

> **可能重复：**
> [如何将 PHP 插入 jQuery？](https://stackoverflow.com/questions/9451212/how-to-insert-php-into-jquery)

如何在 jquery/javascript 上插入 php？例如

php

```
$tot =4; 
```

javascript

```
$(function()

    if( can put php here? )
    eg : if( <?php tot > 4 ?> ) 
```

我想把php放在'if语句'中，有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:12:04.067

尝试：

```
$(function() {
  if(<?=$tot?> > 4) {
    [...]
  }
}); 
```

该`<?=$tot?>`部分将有效地在 javascript 代码中使用`echo`您的变量。`$tot`请注意，如果在转换为字符串时`$tot`计算结果为，则可能会在 javascript 代码中产生语法错误。`''`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:11:28.413

您可以使用
`if (<?php echo $tot; ?> > 4)`

# jquery - 模糊和焦点无法协同工作

> ID：13759225
> 
> 赞同：1
> 
> 时间：2012-12-07T08:09:08.550
> 
> 标签：jquery, focus, blur

我有一个使用一些 Jquery 脚本的表单。我希望我的输入在聚焦或单击它时自动选中以覆盖现有值。我希望在模糊时，在某些属于一行的输入上，自动计算总数。它工作得很好，但是当启用焦点和点击时，我的模糊代码不再工作了！你能解释一下为什么吗？

```
$(document).ready(function(){
$("input").numeric();
$("input").first().focus();

    $("input").bind('focus', function(){
    $(this).select;
    });

    //totaux prev
    $(".classprev").blur(function(){
        var sum = 0;
        $('input[name^="prev"]').each(function(){
            sum += parseFloat(this.value);
        });
        $('#idtotalprev').html(sum + '€');
    }); 
```

# sql - 死锁链sql

> ID：13759230
> 
> 赞同：0
> 
> 时间：2012-12-07T08:09:27.887
> 
> 标签：sql, sql-server, deadlock, database-deadlocks

我是 sql 管理的新手......我正在编写一些 .net 2.0 应用程序，其中之一是在 sql 查询方面遇到很多麻烦，类似于许多已经完成并正在处理问题（也没有事务......）当我在更多当前机器上“拆分”应用程序时出现问题（每个人都记录他的记录/操作以在本地工作）但它并没有完全解决

有人可以帮助我！？非常感谢贾科莫

关于这些麻烦之一的“镜头”。其中 idOperazione 是表示每条记录的操作 id ![僵局](../Images/5faa6d256c55c5686602d4dbb68d3ed6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:48:08.780

根据您提供的信息很难判断，但有几个问题：

1.  你有关于 [ITCSTOKWEB].[dbo].[IdOperazione] 的索引吗？它不必是聚集索引，但死锁中涉及的两个操作都在执行“更新...其中 IdOperazione = 'some value'”; 索引将有助于提高该操作的效率。
2.  每个死锁参与者的事务隔离级别是多少？您可以在死锁 XML 中找到此信息。我问是因为当一个或多个参与者将他们的隔离级别设置得太高时，我已经看到了死锁问题。

# java - 如何仅运行 1 秒的 java 程序？

> ID：13759233
> 
> 赞同：0
> 
> 时间：2012-12-07T08:09:39.040
> 
> 标签：java, performance, compiler-construction

我需要校准机器，所以我的目标是运行一个 java 程序大约 1 秒钟。所以我可以在其他机器上使用相同的程序来测量它们的运行时间并将其校准到 1 秒。

我知道 1 秒的运行时间太短了，这取决于各种因素。但我想知道你们是否有任何关于校准的想法。

我想运行一个 java 程序大约一秒钟。我希望编译器对数组执行某些标准操作。我尝试使用数组来查找偶数和奇数。

程序输出并不那么重要。运行时间只需大约 1 秒。问题在于，由于 1 秒太小，它会给出一个波动的运行时间，例如 1.25 有时或 0.678 有时。

有没有办法强制编译器只运行 1 秒而不给出很大的错误值。

PS：我不想使用 Thread.sleep(1000)。

现在，这是我正在使用的代码。正如我所说，我不关心输出和操作本身。我只需要一个运行时间为 1 秒。如果您有任何想法，请帮助我。

```
long[] array = new long[5000000];
    int repeat = 10;
    long t1 = System.currentTimeMillis();

    for(int j = 0; j <=repeat; j++)
    {
        int even = 0, odd = 0;
        for(int i=0; i<array.length; i++)
        {
            array[i] = i;
        }

        for(int i=0; i<array.length; i++)
        {
            if(array[i] % 2 == 0)
                even++;
            else
                odd++;
        }
    }
    long t2 = System.currentTimeMillis();
    long t3 = t2 - t1;
    System.out.println(t3*10e-4+ " sec"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:17:19.170

嗨，我建议你这样做。

while(!(System.currentTimeMillis() - t1 >= 1000)) { ... 你的程序 } System.exit(0);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:26:31.690

如果你真的不需要记住所有这些数字，请记录一下算法技巧，不要使用数组。

您可以在此代码中获得相同的功能

for(int j = 0; j <=重复; j++)

```
{
    int even = 0, odd = 0;
    for(int i=0; i<array.length; i++)
    {
        if(i%2 == 0){
           even++;
        }else{
            odd++;
        }
    }
} 
```

你会看到它会运行得更快，因为你没有做太多的操作......你完全切断了 for 循环到 5000000 10 次

我希望这可以帮助您改善时间

# javascript - 使用转js获取当前页码

> ID：13759236
> 
> 赞同：2
> 
> 时间：2012-12-07T08:09:49.713
> 
> 标签：javascript, jquery

我正在使用 turn js ，一个创建翻书功能的 js。

从在线来源获取当前页面的语句是：

```
alert($('selector').turn('page')); 
```

但是，它只得到一个空值，这意味着 $('selector').turn('page') 不起作用。如何获取用户阅读页面的页码。由于一本书同时有 2 页，我想获取左侧或右侧的页面，如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:49:53.920

您应该更改`'selector'`为包含“页面”的 div 的 id

例如：

```
<div id='flipbook'>
    <div class="hard"> Turn.js </div> 
    <div class="hard"></div>
    <div> Page 1 </div>
    <div> Page 2 </div>
    <div> Page 3 </div>
    <div> Page 4 </div>
    <div class="hard"></div>
    <div class="hard"></div>
</div> 
```

在js中

```
alert($('#flipbook').turn('page')); //do not forget the # 
```

如果您发布更多代码，我们可以为您提供更多帮助:)

[如果您单击此处，](http://jsfiddle.net/A9a7E/2296/)您可以看到带有代码的工作示例

编辑：在小提琴中添加了一些事件处理

# python - python导入不起作用

> ID：13759238
> 
> 赞同：1
> 
> 时间：2012-12-07T08:09:57.963
> 
> 标签：python, import

我在 python 2.7 中总共有三个文件：

1.  某个目录中的模块文件（例如`module1.py`）
2.  同一目录中的不同模块，它导入此模块（例如`worker.py`）
3.  顶级目录导入的主脚本`worker.py`

当文件`worker.py`如下所示

```
import module1 as mod 
```

一切都按预期工作（即我可以`worker.mod.XXX`在我的主代码中使用）。但是当我替换`worker.py`如下内容时（我希望这样做）：

```
mod = __import__('module1') 
```

我收到一个错误：`ImportError: No module named module1`。我需要后一种方法来处理从列表中自动导入模块的事情。

我在这里想念什么？

更准确地说：我只是在寻找一种方法，将语句 import module1 as mod 替换为`module1`字符串表达式。我有例如`modulname='module1'`，并且想要使用在字符串中给出的模块名称导入模块`modulname`。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:13:43.790

`__import__(name, globals={}, locals={}, fromlist=[], level=-1) -> module`

导入一个模块。因为这个函数是供 Python 解释器使用的，而不是一般用途，所以最好用于 `importlib.import_module()`以编程方式导入模块。

该`globals`参数仅用于确定上下文；它们没有被修改。locals 参数未使用。fromlist 应该是要模拟的名称列表`from name import ...`，或者是要模拟的空列表`import name`。从包中导入模块时，注意`__import__('A.B', ...)` 当 fromlist 为空时返回包 A，但当 fromlist 不为空时返回其子模块 B。级别用于确定是执行绝对导入还是相对导入。-1 是尝试绝对和相对导入的原始策略，0 是绝对的，正数是相对于当前模块要搜索的父目录的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:03:44.030

尝试这个：

```
mod = __import__('module1', globals=globals()) 
```

# php - 在 Wordpress 中查找正在查看的页面的最佳方法

> ID：13759245
> 
> 赞同：0
> 
> 时间：2012-12-07T08:10:24.433
> 
> 标签：php, wordpress, taxonomy

在我的事件自定义帖子类型下，我在 wordpress 中有两个分类法。

一种分类是状态，另一种是事件类型。

我有一个taxonomy-states.php 和一个taxonomy-event-type.php。

但是有时我会在两个分类之间运行查询，例如 mysite.com/events/?state=texas&event-type=football，它会选择 taxonomy-states.php 模板。

当我运行上述内容时，我使用 wordpress 重写来获取 mysite.com/events/texas/football

如果用户正在查看两个分类法而不是一个州分类法，我基本上需要在我的 taxonomy-states.php 模板中使用不同的选项。

所以我的问题是，当我查询两个分类时，如何在 wordpress 中动态检查这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:49:21.113

在 taxonomy-states.php 中，只测试`$_GET['state']`和`$_GET['event-type']`。如果两者都设置，则执行一些代码。如果只有一个，则执行另一个代码块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:49:40.353

尝试查看`$wp_query->query_vars['tax_query']`- 这应该包含分类查询（我假设将使用它，因为您正在制作更复杂的（两个或更多分类）分类查询。

如果您在那里找不到信息，请查看该`$wp_query->query_vars`属性。执行`var_dump( $wp_query->query_vars );`or `print_r( $wp_query->query_vars );`，您将看到查询是什么。从那里你应该能够弄清楚当你查询两个分类时告诉你什么，而不是一个。

# mysql - 选择中的mysql条件

> ID：13759250
> 
> 赞同：0
> 
> 时间：2012-12-07T08:10:50.253
> 
> 标签：mysql

我的桌子：

```
id | elite | pos
1  |   0   |  9  
2  |   1   |  8
3  |   0   |  7
4  |   1   |  6
5  |   0   |  5
6  |   1   |  4
7  |   0   |  3
8  |   1   |  2
9  |   0   |  1
10 |   1   |  0 
```

我有这个简单的查询

```
SELECT id, elite FROM tbl LIMIT 0, 5 ORDER BY pos DESC 
```

它将返回`id 1 2 3 4 5`. 随着时间的推移，这些价值观会发生变化。结果的计数必须始终为 5，但是如果结果中至少有一个`id`带有 的`elite >= 1`，则结果不能再包含`id`带有`elite`该`1`值的 a。所以结果不能包含`id`多个`elite >= 1`.

这可能在查询中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:34:17.143

您可以使用`UNION`组合两个查询，如下所示：

```
(SELECT * FROM tbl WHERE elite = 1 LIMIT 1)
UNION
(SELECT * FROM tbl WHERE elite = 0)
ORDER BY pos DESC LIMIT 5 
```

它会给出你需要的结果。查看有关 UNION 的 Mysql[参考](http://dev.mysql.com/doc/refman/5.0/en/union.html)

# qt - QRegExp：个体量词不可能是非贪婪的，但有什么好的替代品呢？

> ID：13759276
> 
> 赞同：2
> 
> 时间：2012-12-07T08:12:53.410
> 
> 标签：qt, pcre, regex-greedy, non-greedy, qregexp

我正在尝试编写将结尾附加`_my_ending`到文件名并且不更改文件扩展名的代码。

我需要得到的例子：

```
"test.bmp"            -> "test_my_ending.bmp"
"test.foo.bar.bmp"    -> "test.foo.bar_my_ending.bmp"
"test"                -> "test_my_ending" 
```

我有一些经验`PCRE`，使用它是一项微不足道的任务。由于缺乏Qt经验，一开始我写了如下代码：

```
QString new_string = old_string.replace(
      QRegExp("^(.+?)(\\.[^.]+)?$"),
      "\\1_my_ending\\2"
      ); 
```

此代码不起作用（根本不匹配），然后我在[文档](http://goo.gl/b6rEa)中发现

> 非贪心匹配不能应用于单个量词，但可以应用于模式中的所有量词

如您所见，在我的正则表达式中，我试图通过在第一个量词之后`+`添加来减少`?`它的贪婪。这在 中不受支持`QRegExp`。

这对我来说真的很令人失望，因此，我必须编写以下丑陋但有效的代码：

```
//-- write regexp that matches only filenames with extension
QRegExp r = QRegExp("^(.+)(\\.[^.]+)$");
r.setMinimal(true);

QString new_string;

if (old_string.contains(r)){
   //-- filename contains extension, so, insert ending just before it
   new_string = old_string.replace(r, "\\1_my_ending\\2");
} else {
   //-- filename does not contain extension, so, just append ending
   new_string = old_string + time_add;
} 
```

但是有更好的解决方案吗？我喜欢 Qt，但我在其中看到的一些东西似乎令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:26:55.267

使用 QFileInfo 怎么样？这比你的“丑陋”代码短：

```
QFileInfo fi(old_string);
QString new_string = fi.completeBaseName() + "_my_ending" 
    + (fi.suffix().isEmpty() ? "" : ".") + fi.suffix(); 
```

# c# - 如何从当前时间减去 6 小时？

> ID：13759278
> 
> 赞同：39
> 
> 时间：2012-12-07T08:13:19.360
> 
> 标签：c#, .net, datetime

> **可能重复：**
> [c#：减去时间的最简单方法是什么？](https://stackoverflow.com/questions/3993226/c-whats-the-easiest-way-to-subtract-time)

假设我有这个时间：

```
07/12/2012 - 00:30:45 
```

我想减去 6 小时，例如 06/12/2012 - 18:30:45。我看到有 .AddHours() 但没有 SubHours()。我该怎么做？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-12-07T08:15:40.093

您可以使用[AddHours](http://msdn.microsoft.com/en-us/library/system.datetime.addhours.aspx)，如果传递负数，它将减去小时数。

```
DateTime dt1 = dt.AddHours(-6); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-07T08:14:28.327

您可以使用负值来减去时间

```
myTime.AddHours(-6); 
```

# mysql - 连接表以从唯一行获取最新行

> ID：13759280
> 
> 赞同：0
> 
> 时间：2012-12-07T08:13:27.127
> 
> 标签：mysql, sql, join, greatest-n-per-group

我有两张桌子

表结构是这样的

表 A

```
╔══════╦════════╗
║ P_ID ║ P_NAME ║
╠══════╬════════╣
║    1 ║ name1  ║
║    2 ║ name2  ║
║    3 ║ name3  ║
║    4 ║ name5  ║
╚══════╩════════╝ 
```

表 B

```
╔═════╦════════╦════════╦═══════════╦═══════╗
║ ID  ║  P_ID  ║  C_ID  ║  C_PRICE  ║  TIME ║
╠═════╬════════╬════════╬═══════════╬═══════╣
║  1  ║      1 ║      3 ║        11 ║ 11111 ║
║  2  ║      2 ║      4 ║        22 ║ 22222 ║
║  3  ║      3 ║      5 ║        33 ║ 33333 ║
║  4  ║      3 ║      6 ║        44 ║ 44444 ║
║  5  ║      3 ║      6 ║        55 ║ 55555 ║
║  6  ║      4 ║      7 ║        66 ║ 66666 ║
╚═════╩════════╩════════╩═══════════╩═══════╝ 
```

要求是
1\. 连接两个表
2\. Group By C_ID
3\. Group By 中的最新行

我试图从[如何将一个表中的最新行加入到另一个表中修改比尔卡尔文的答案？](https://stackoverflow.com/questions/497535/how-do-i-join-the-most-recent-row-in-one-table-to-another-table/498179#498179)

```
SELECT e.*, s1.*  
FROM table_a e   
INNER JOIN
table_b s1
    ON (e.p_id = s1.p_id)   
LEFT OUTER JOIN table_b s2
    ON (e.p_id = s2.p_id AND s1.id < s2.id) 
WHERE s2.p_id IS NULL; 
```

但我无法实现我想要的。从他的回答中我会得到

```
╔═════╦════════╦════════╦═══════════╦═══════╦═════════╗
║ ID  ║  P_ID  ║  C_ID  ║  C_PRICE  ║  TIME ║  P_NAME ║
╠═════╬════════╬════════╬═══════════╬═══════╬═════════╣
║  1  ║      1 ║      3 ║        11 ║ 11111 ║ name1   ║
║  2  ║      2 ║      4 ║        22 ║ 22222 ║ name2   ║
║  5  ║      3 ║      6 ║        55 ║ 55555 ║ name3   ║
║  6  ║      4 ║      7 ║        66 ║ 66666 ║ name5   ║
╚═════╩════════╩════════╩═══════════╩═══════╩═════════╝ 
```

但是我想要的输出如下（重复的 P_ID 是可以的，但是对于每个重复的 P_ID 不应该有重复的 C_ID ）

```
╔═════╦════════╦════════╦═══════════╦═══════╦═════════╗
║ ID  ║  P_ID  ║  C_ID  ║  C_PRICE  ║  TIME ║  P_NAME ║
╠═════╬════════╬════════╬═══════════╬═══════╬═════════╣
║  1  ║      1 ║      3 ║        11 ║ 11111 ║ name1   ║
║  2  ║      2 ║      4 ║        22 ║ 22222 ║ name2   ║
║  3  ║      3 ║      5 ║        33 ║ 33333 ║ name3   ║
║  5  ║      3 ║      6 ║        55 ║ 55555 ║ name3   ║
║  6  ║      4 ║      7 ║        66 ║ 66666 ║ name5   ║
╚═════╩════════╩════════╩═══════════╩═══════╩═════════╝ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:33:16.010

```
SELECT e.*, s1.*
FROM table_a e INNER JOIN 
(SELECT * FROM (SELECT * FROM table_b ORDER BY time DESC) temp GROUP BY c_id) s1; 
```

最里面的 ORDER BY 确保对于相同的 c_id 所需的行总是最先出现，外部的 GROUP BY 将在 c_id 上分组，并且没有指定其他方式将返回为每个组找到的第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:31:37.723

你必须

1.  加入两个表
2.  按 C_ID 分组
3.  按所选字段排序的每个组 desc 的编号行（最后暗示顺序！）
4.  按行号过滤 = 1。

[这](http://www.artfulsoftware.com/infotree/queries.php#1098)可以帮助您对行进行编号。

# html - 使用 css 调整提交按钮的背景颜色渐变

> ID：13759288
> 
> 赞同：1
> 
> 时间：2012-12-07T08:14:17.033
> 
> 标签：html, css, submit-button

嗨，我想设置一个输入提交按钮的样式，该按钮具有附加图像中给出的背景。提供了背景图像，但我不确定如何在提交按钮中实现它，所以我尝试使用 css 而不是使用该图像3 种颜色渐变属性来设置按钮样式，但是，我无法获得所需的颜色输出。欢迎提供任何帮助。 ![在此处输入图像描述](../Images/a00beaf465de2d665fa42947a82c335e.png)

到目前为止的 CSS 代码。

```
.button {
  -moz-border-radius: 18px;
  -moz-box-shadow: #fffff 0px 0px 11px;
  -webkit-border-radius: 18px;
  -webkit-box-shadow: #6E7849 0 0 10px;
  background-color: #fefefefe;
  background-image: -moz-linear-gradient(24deg, #d8d8d8, #fefefefe);
  background-image: -ms-linear-gradient(24deg, #d8d8d8, #fefefefe);
  background-image: -o-linear-gradient(24deg, #d8d8d8, #fefefefe);
  background-image: -webkit-linear-gradient(24deg, #d8d8d8, #fefefefe);
  background-image: linear-gradient(24deg, #d8d8d8, #fefefefe);
  border-radius: 18px;
  border: 1px solid #888888;
  box-shadow: #fffff 0px 0px 11px;
  color: #000000;
  display: inline-block;
  font-size: 3em;
  margin: auto;
  padding: 4px;
  text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:19:38.550

使用图像。将梯度完全匹配到图像是不必要的痛苦：

```
.button {
   display:block;
   width:50px; //use actual image width
   height:50px; // use actual image height
   background:url(../img/button.png); //image file path
}

.button:hover {
 background:url(../img/button_hover.png); 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:20:57.723

使用图像作为输入非常简单：

```
<input type="image"src="/images/submit.gif" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:33:56.807

最后，我找到了使用滑动门技术制作此按钮的方法。但是，在禁用状态下设置它的样式仍然存在危险。这个链接帮助了我很多[http://www.springload.co.nz/love-the-web/dynamic-submit-buttons](http://www.springload.co.nz/love-the-web/dynamic-submit-buttons)

css

```
div.submit_button { 
   background: transparent url('common/images/bg-submit2.png') no-repeat 0 0; 
   display: block; 
   float: left; 
   height: 27px; /* total height of the button */ 
   padding-left: 15px; /* end width */ 
} 

span.submit_button_end { 
   background: #fff url('common/images/bg-submit2.png') no-repeat 100% 0; /*  used a sprite image */ 
   display: block; 
   float: left; 
   font-weight: normal; 
   height: 27px; /* total height of the button */ 
} 

input.submit_input { 
   font-size: 13px; 
   font-weight:bold;
   background: none; 
   border: none; 
   padding: 0 0 2px 15px; /* end width */ 
   color: #1b1d60; 
   cursor: pointer; 
   position: relative; 
   height: 25px; 
   line-height: 25px; 
   left: -15px;  
   margin-right: -15px; 
   padding-right: 15px; 
} 

input.submit_input:hover {color: #fff;} 

div.submit_button:hover {background-position: 0 100%;} 

div.submit_button:hover span.submit_button_end {background-position: 100% 100%;} 
```

HTML

```
 <div class='submit_button'> 
   <span class='submit_button_end'> 
     <input class='submit_input' type='submit'  value='Submit button' tabindex='#' /> 
   </span> 
</div> 
```

# spring - 模拟弹簧控制器验证器

> ID：13759292
> 
> 赞同：2
> 
> 时间：2012-12-07T08:14:51.560
> 
> 标签：spring, junit, jmock

我想对这个 Spring 控制器方法进行单元测试：

```
@Autowired
private MyValidator validator;

public String register(
    HttpServletRequest request, 
    ModelMap model, 
    Principal principal,
    @PathVariable Plain plain, 
    RedirectAttributes ratts,
    @ModelAttribute @Valid PlainMoreObject pmo, 
    BindingResult result) 
{

    validator.validate(pmo, result); 
```

我正在使用 JMock。我如何模拟验证器以通过调用测试控制器

```
 controller.register(....) ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:49:57.043

Spring 中有一个名为 ReflectionTestUtils ([链接](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/util/ReflectionTestUtils.html)) 的辅助类，您可以使用它来将模拟 bean 注入到字段中。

```
@Mock MyValidator validatorMock;
ReflectionTestUtils.setField(controller, "validator", validatorMock);
controller.register(...); 
```

# java - 如何在杰克逊库的帮助下使用相同的键对 json 数组或 json 对象进行脱轨

> ID：13759296
> 
> 赞同：0
> 
> 时间：2012-12-07T08:15:13.723
> 
> 标签：java, jackson

我的服务器返回 json 并使用 Jackson 来取消响应

在响应中，我有一个名为 Car 的键，汽车的值可能是一个数组或一个对象，那么如何定义我的类

回复

如果存在多个对象，则对象数组将返回，否则将返回一个对象

{ "汽车":"[{obj,obj,obj}]" }

{“汽车”：“对象”

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:56:13.933

您发布的 json 格式没有数组，只有字符串。第一个是**汽车**，第二个是**[{obj,obj,obj}]**

json 应该如下所示：`{"Car":["","",""]}`并且可以映射到这个 java 类：

```
public static class JsonTest extends Hashtable<String, List<String>> {
    public JsonTest(){};
} 
```

你的第二个 json 字符串的格式不同，它也应该有数组表示法：

```
{ "Car":[ "" ] } 
```

# java - Swing 容器和组件之间的子父关系

> ID：13759300
> 
> 赞同：1
> 
> 时间：2012-12-07T08:15:42.917
> 
> 标签：java, swing, parent-child, jcomponent

想象一下，我有`JPanel`并且`JLabel`我需要检查是否`JLabel`有特定的子父关系`JPanel`。但是，JLabel 可能不是直子，而是孙子等等。

**是否有简单的函数 API 来检查我遗漏的内容？**

当然，我可以调用`Container.getComponents()`或`Component.getParent()`递归检查。有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:54:00.843

我认为[Container.isAncestorOf](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#isAncestorOf%28java.awt.Component%29)（JComponent 继承）会做你想做的事。

# css - LESS CSS 声明@import-once 有什么用？

> ID：13759301
> 
> 赞同：16
> 
> 时间：2012-12-07T08:15:53.430
> 
> 标签：css, less

即使在阅读[https://github.com/cloudhead/less.js/issues/212](https://github.com/cloudhead/less.js/issues/212)之后，我也不明白 @import-once 语句的含义。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-07T08:39:43.477

当您使用 LESS 时，您可以少一些文件（我有 12 个，包括媒体查询、重置等），有时您无法控制在文件之间完成了多少`@import`，这就是背后的原因`@import-once`，避免样式重复。

### `@import-once`我应该什么时候使用`@import`？

假设您有`main.less`which 导入其他较少的文件。并且这些文件都导入`utils.less`了包含有用的 mixin 或变量。执行此操作时，mixin 会在编译的代码（css 文件）中重复。每次`utils.less`导入一次，即使您的 CSS 文件也应该是 1mb 而不是 20kb。在这种情况下，您应该使用`@import-once`.

**编辑：**

正如@TJ 所指出的，自 LESS 1.4.0 以来，`@import-once`已删除，现在是`@import`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-07T08:17:40.997

`@import-once`仅表示“如果之前已经导入，则不要再次导入”。这样做是为了防止 CSS 样式的重复。

# c - 跨子进程的 mmap 写同步

> ID：13759308
> 
> 赞同：1
> 
> 时间：2012-12-07T08:16:15.707
> 
> 标签：c, multithreading, synchronization, mmap, multiprocess

我有一个多进程和多线程的服务器。处理请求时的子进程会更新一些统计信息。此统计数据是由所有子进程更新的结构。这些子进程中的每一个都是多线程的。子进程的数量根据请求的数量是动态的（增加或减少）。

为了同步写入这个 stat 结构，我使用 mmap。这是地图的初始化方式。

```
 fd = open(mapfile, O_CREAT|O_RDWR, 0666);
    write(fd, dummy, MMAP_FILE_SIZE); //dummy is all zeros
    void *addr = mmap(0, sizeof(stat_t), PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);
    close(fd);

    if (addr == (void *)-1) {
       mapped = 0;
    }
    else {
       gStat = (stat_t*)addr;
    }

   // here gStat struct is initialized 
```

同样在我操作统计信息的代码中，我使用锁在进程内的多个线程之间进行同步。

现在，我遇到的问题是，在重负载下，写入似乎不同步。统计信息未正确更新。在正常负载下，统计数据会正确递增。

根据我的理解，如果指定了 MAP_SHARED，则写入引用会更改底层对象，并且映射类型会在 fork() 中保留。我错过了什么？

# php - 从 SonataAdmin 获取教义时出错

> ID：13759309
> 
> 赞同：1
> 
> 时间：2012-12-07T08:16:20.260
> 
> 标签：php, symfony, doctrine-orm, sonata-admin

我在为 SonataAdmin 创建 configureFormFields() 时遇到问题。我将尝试使用实体中的 getDoctrine 并从基本控制器（在我的 Bundle 中）扩展。但是，symfony 返回错误：

> 致命错误：在第 191 行的 /var/www/htdocs/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php 中的非对象上调用成员函数 has()

如何解决这个问题。

# angularjs - Angularjs指令附加到模板

> ID：13759312
> 
> 赞同：0
> 
> 时间：2012-12-07T08:16:40.187
> 
> 标签：angularjs

我是 angularjs 世界的新手，我正在尝试做一些我认为应该可以通过指令实现的事情。

我有一个模板，其中包含使用 ng-repeat 列出的文章列表。这些文章有一个日期。我想在模板中按日期对文章进行分组。因此，我正在考虑创建一个指令，该指令将在当天的每组文章之前附加一个新的 div。模型中的数据已经按日期降序排序。

我应该使用指令中的编译函数来执行此操作吗？任何代码示例都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:57:53.233

如果我理解正确，您希望输出类似于：

```
<ul>
    <li>
         Show 3 articles for date 2012-12-07
    </li>
    <li>
         Show 1 articles for date 2012-12-06
    </li>
    <li>
         Show 2 articles for date 2012-12-05
    </li>
</ul> 
```

在这种情况下，我会在呈现之前进行分组：

```
function ArticlesController ($scope) {
    var groupArticles = function (articles) {
        var i,
            art = {};

        for (i = 0; i < articles.length; i += 1) {
            if (!art.hasOwnProperty(articles[i].date)) {
                art[articles[i].date] = [];
            }

            art[articles[i].date].push(articles[i]);
        }

        return art;
    };
    $scope.articles = [{ date: '2012-12-07', title: 'Marcus' },
                       { date: '2012-12-07', title: 'Zero' },
                       { date: '2012-12-06', title: 'Moxxi' },
                       { date: '2012-12-05', title: 'Dr Zed' }];

    $scope.groupedArticles = groupArticles($scope.articles);
} 
```

你会看到：

```
<ul data-ng-controller="ArticlesController">
    <li data-ng-repeat="articles in groupedArticles">
        <div data-ng-repeat="article in articles">
            {{ articles.title }}
        </div>
    </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:24:43.770

```
<ul>
  <li ng-repeat="article in articles">
     <ng-switch on="$first || article.date != articles[$index-1].date">
        <div ng-switch-when="true" class="group_heading">{{article.date}}</div>
     </ng-switch>
     {{article.title}}
  </li>
</ul> 
```

以上是模仿我[现有的小提琴](http://jsfiddle.net/mrajcok/CvKNc/)。
以上假设（如您所述）文章已经排序。如果没有，小提琴将展示如何在控制器中使用 orderByFilter 来创建基于任何对象属性的排序数组。

# android - 如何获取充当热点的 android 设备的子网掩码？

> ID：13759314
> 
> 赞同：2
> 
> 时间：2012-12-07T08:16:48.187
> 
> 标签：android, networking, udp, ip-address, broadcast

我想从充当热点的 android 设备进行广播，但使用 255.255.255.255 在 android 中不能用作 UDP 广播。但是 192.168.1.255 这个广播地址有效。当我检查设备的 IP 地址时，它显示 192.168.1.4。

现在如何从这个地址计算地址 192.168.1.255？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:33:40.660

好吧，如果你已经完成了广播并且只需要将地址的最后一个字节更改为 255，你可以执行以下操作：

```
String getBroadcastAddress( final String address ) throws UnknownHostException {
    InetAddress addr = InetAddress.getByName( address );
    if( InetAddress instanceof Inet4Address ) {
        byte[] bytes = addr.getAddress();
        bytes[3] = 255;
        return InetAddress.getByAddress( bytes ).getHostAddress();
     } else {
         ... deal with ipv6
     }
} 
```

直接从 NetworkInterface 中提取广播地址，会产生以下代码：

```
public static String getBroadcast() throws SocketException {
    System.setProperty("java.net.preferIPv4Stack", "true");
    for( Enumeration<NetworkInterface> interfaces = NetworkInterface.getNetworkInterfaces(); interfaces.hasMoreElements(); ) {
        NetworkInterface nif = interfaces.nextElement();
        if( !nif.isLoopback() ) {
            for( InterfaceAddress addr : nif.getInterfaceAddresses() ) {
                return addr.getBroadcast().toString().substring(1);
            }
        }
    }
    return null;
} 
```

您可能需要筛选 NetworkInterface 才能找到与内部 ip 对应的接口。

# c - 在 C 问题中实现 Dijkstra 算法

> ID：13759316
> 
> 赞同：3
> 
> 时间：2012-12-07T08:16:54.773
> 
> 标签：c, dijkstra

我们一直在做一个机器人在房间里行驶的项目，当我们激活它时，它会返回到一个选定的目的地。我们的任务是找到到达该目的地的最短路径。

我们一直在用 C 编码，并尝试使用 Dijkstra 的算法，但我们现在有点卡住了。我们没有得到最短的路线。weights 中的第一个位置是起始坐标，end 是最后一个。

```
double dijkstras(double weights[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], char output[], int     *output_number_of_waypoints, int number_of_waypoints){ 

double route_length[number_of_waypoints];
int shortest_route_via[number_of_waypoints];

int i, current_pos;
double distance;
for (i = 0; i < number_of_waypoints; i++) {
    route_length[i] = 0;
    shortest_route_via[i] = -1;
}

int start = 0;                   /* first index in array */
int end = number_of_waypoints-1; /* last index in array */

for (current_pos = start; current_pos <= end; current_pos++) {
    for (i = 0; i < number_of_waypoints; i++) {
        if (weights[current_pos][i] > 0) {
            distance = route_length[current_pos] + weights[current_pos][i];
            if (distance < route_length[i] || shortest_route_via[i] == -1) {
                printf("shortest_route_via[%d] = current_pos = %d, length was %lf, shorted to %lf\n", i, current_pos, route_length[i], distance); /* debugging info */
                route_length[i] = distance;
                shortest_route_via[i] = current_pos;
            }
        }
    }
}
current_pos = end;
i = 0;
char route[number_of_waypoints+1];
while (current_pos != start && i < number_of_waypoints) {
    route[i] = current_pos;
    printf("currentpos = %d\n", current_pos); /* Debugging info - shortest path */
    current_pos = shortest_route_via[current_pos];
    i++;
}
route[i] = '\0';

return route_length[end]; 
```

}

我们想要得到一个数组——shortest_route_via，它包含通过索引的最短路径——例如shortest_route_via[index] = waypoint。Route_length 包含前往索引的成本，例如 route_length[index] = 100，表示前往索引的成本为 100。

希望有人能看到我们缺少的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:03:30.700

如果我正确解释了您的代码，那么您实际上并没有在做 Dijkstra。

Dijkstra 从根节点开始，然后查看它可以到达的所有邻居。然后暂时设置从根到所有邻居的距离。在接下来的迭代中，临时设置的节点中最近的节点被永久设置，其邻居被临时设置。

您的代码没有选择最近的节点。您只需按其 id 的顺序通过递增遍历所有节点`current_pos`。除非最短路径是严格按节点顺序递增的（索引只会像 1->4->10->14->... 一样增加），否则您将无法获得保证的最短路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T04:48:10.363

我的博客上提供了针对此问题的更高效和完整的 c 代码。你可以免费得到她..... [http://www.blogger.com/blogger.g?blogID=1775252317107864249#editor/target=post;postID=1976885424431604242;onPublishedMenu=allposts;onClosedMenu=allposts;postNum=0 ;src=邮件名](http://www.blogger.com/blogger.g?blogID=1775252317107864249#editor/target=post;postID=1976885424431604242;onPublishedMenu=allposts;onClosedMenu=allposts;postNum=0;src=postname)

# android - 在三星 Galaxy S3 上安装库存 ICS Launcher 时出现 INSTALL_FAILED_DEXOPT 错误

> ID：13759325
> 
> 赞同：0
> 
> 时间：2012-12-07T08:17:31.010
> 
> 标签：android, galaxy, android-launcher

我有一个三星 Galaxy S3，并且我已经构建了股票 AOSP ICS Launcher2 应用程序。然后我尝试通过“adb install”安装 apk，但这样做时出现“INSTALL_FAILED_DEXOPT”错误。设备logcat如下：

```
D/AndroidRuntime( 5431): 
D/AndroidRuntime( 5431): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
D/AndroidRuntime( 5431): CheckJNI is OFF
D/AndroidRuntime( 5431): setted country_code = France
D/AndroidRuntime( 5431): setted countryiso_code = FR
D/AndroidRuntime( 5431): setted sales_code = XEF
D/AndroidRuntime( 5431): readGMSProperty: start
D/AndroidRuntime( 5431): readGMSProperty: already setted!!
D/AndroidRuntime( 5431): readGMSProperty: end
D/LibQmg_native( 5431): register_android_app_LibQmg
D/AndroidRuntime( 5431): Calling main entry com.android.commands.pm.Pm
W/PackageManager( 2093): verifying app can be installed or not
I/ApplicationPolicy( 2093): isApplicationInstallationEnabled
D/dalvikvm( 2093): GC_CONCURRENT freed 7885K, 31% free 32346K/46791K, paused 2ms+6ms
D/dalvikvm( 2093): GC_CONCURRENT freed 1834K, 31% free 32555K/46791K, paused 3ms+5ms
E/PackageManager( 2093): Package XXX.XXXXXXX.XXXXXXXX has mismatched uid: 10130 on disk, 10131 in settings
I/PackageManager( 2093): Running dexopt on: XXX.XXXXXXX.XXXXXXXX
I/PackageManager( 2093): Linking native library dir for |XXXX|XXX|XXXXXXXXXXXXXXXXXXXXXX.XXX
W/dalvikvm( 5442): DexOptZ: zip archive '/data/app/com.android.launcher-1.apk' does not include classes.dex
W/installd( 1907): DexInv: --- END '/data/app/com.android.launcher-1.apk' --- status=0xff00, process failed
E/installd( 1907): dexopt failed on '/data/dalvik-cache/data@app@com.android.launcher-1.apk@classes.dex' res = 65280
W/PackageManager( 2093): Package couldn't be installed in /data/app/com.android.launcher-1.apk 
```

我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:18:50.733

您需要增加 Android 模拟器的内存容量，有两种方法：

1-右键单击Android项目的根目录，转到“运行方式”，然后转到“运行配置...”，在左侧树中找到“Android应用程序”节点，然后选择您的项目并转到“窗口右侧的“目标”选项卡向下查找“附加仿真器命令行选项”字段（有时您需要使窗口变大），最后在此处粘贴“-partition-size 1024”。单击应用，然后单击运行以使用您的模拟器。

2-转到Eclipse的首选项，然后选择“启动”在“默认模拟器选项”字段中添加“-partition-size 1024”，然后单击“应用”并像往常一样使用您的模拟器。

# java - 从java运行bash命令时如何解决权限

> ID：13759332
> 
> 赞同：0
> 
> 时间：2012-12-07T08:18:15.390
> 
> 标签：java, bash

当我从控制台运行命令时，一切正常：

```
sudo -u oracle fgrep ... 
```

当我使用 Java 代码运行相同的命令时`ProcessBuilder`，sudo 不起作用，我需要将 chmod 设置为 775，否则我没有读取日志的权限。

为什么这不起作用？没有 chmod 775 是否有读取日志的选项？

这是我的使用方式`ProcessBuilder`：

```
ProcessBuilder pb = new ProcessBuilder("bash", "-c", command);
Process shell = pb.start();

InputStream is = shell.getInputStream(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:26:54.860

一种。当你执行命令时，你不需要 bash -c，你有一个 shell。

湾。该命令需要在空格上拆分，然后作为数组传递到 ProcessBuilder 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:39:47.940

既然你说它`chmod 775`适用于日志文件，很明显你的进程没有权限。

您可以使用 sudo 运行您的 java：

```
sudo java ClassFileName 
```

或者只是添加`sudo`作为传递给 bash 进程的数组中的第一个字符串：

```
command[0]="sudo -u oracle ";

//command[1]=commandname;

//command[2...n]=Other params; 
```

假设用户`oracle`在 sudoers 列表中并且不会询问密码，这将像您在使用`sudo`.

# jquery - jquery datepicker刷新方法不起作用

> ID：13759339
> 
> 赞同：4
> 
> 时间：2012-12-07T08:19:03.760
> 
> 标签：jquery

我根据来自后端的数据突出显示一个月中的某些日子。当我更改月份或年份时，再次调用 ajax 调用。但 datepicker 只显示以前的日期。我的代码如下，

```
$("input.dC").live('click',function() {
$(this).datepicker({
showOn:'focus',
changeMonth:'true',
changeYear:'true',
onChangeMonthYear:function(year,month,inst) {
                    var date = new Date(year,month-1);
                    obj.suggestDates(date);
                    $("#"+inst.id).datepicker("refresh");
},
beforeShowDay:function(date){
                for(i=0;i<obj.r.length;i++) {
                  var m = obj.r[i];
                  if(date.getMonth() == m[1] && date.getDate() == m[0] && date.getFullYear() == m[2]) { return[true,"ui-state-highlight"];}
                }
                return[false,""];
}
}).focus();
});

obj.prototype.suggestDates=function(d){
//ajax call here 
//obj.r=response;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:35:57.687

我在这里知道了问题所在。我们需要为 ajax 调用设置 async:false

```
$.ajax({async:false}); 
```

它现在工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:21:54.603

也许这个链接很有用：[https ://github.com/jtsage/jquery-mobile-datebox/issues/231](https://github.com/jtsage/jquery-mobile-datebox/issues/231)

如果没有，您是否尝试在事件处理程序之外创建一个刷新方法而不是在内部调用它？

像这样的东西：

```
// I everytime build first a getter für my jQuery-Element. So you can change your selector with changing only one method
var getDatebox = function() {
    return jQuery('input.dC');
};
var refreshDatebox = function() {
    getDatebox().datebox('refresh');
};

getDatebox().on('click', function() { // don't use 'live', it's deprecated
    jQuery(this).datepicker({
        [...]
        onChangeMonthYear: function(year, month) {
            var date = new Date(year, month-1);
            obj.suggestDates(date);
            refreshDatebox(); // call new function
        },
        [...]
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-05T10:11:22.397

陷入同样的​​问题，由于像“setDate”这样的外部修改，日期选择器没有刷新。我的 hacky 解决方案是伪造 mouseleave 事件

```
$('.hasDatepicker').find('.ui-datepicker-calendar').trigger('mouseleave') 
```

# xcode - 可以将 Xcode 设置为根据目标（sim 与设备）自动切换配置文件（调试与发布）吗？

> ID：13759344
> 
> 赞同：0
> 
> 时间：2012-12-07T08:19:43.863
> 
> 标签：xcode, xcode4

是否可以在 Xcode 中设置一个方案，以便“运行”操作`Debug`在模拟器上运行时使用配置，`Release`在设备上运行时使用配置？（请注意，当我说在设备上运行时，我的意思是将手机插入计算机，并在调试过程中按下“运行”按钮。我并不是说一旦用户将其下载到手机上，这就是“存档”操作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:11:12.257

我不知道有什么方法可以在一个方案中做你想做的事。您需要两种方案来获得所需的行为：一种用于模拟器，一种用于设备。

# java - JAVA编程执行多次

> ID：13759346
> 
> 赞同：0
> 
> 时间：2012-12-07T08:19:51.470
> 
> 标签：java, runtime, execution, bubble-sort

我编写了一个 BubbleSort 程序，它运行良好，给了我一个很好的输出并且充分地完成了它的工作。但是我无法在整理一次后重新执行程序。即程序完成了一种 10000 个唯一数字并输出它所花费的时间和所花费的步数，但不会再次执行，比如在那之后再执行 999 次？

简而言之，任何人都可以帮助我让我的程序运行 1000 次，以便我能够获得平均执行时间吗？

这是代码：

```
public class BubbleSort {
   public static void main(String[] args) {
      int BubArray[] = new int[] { #10000 unique values unsorted# };

      System.out.println("Array Before Bubble Sort");
      for (int a = 0; a < BubArray.length; a++) {
         System.out.print(BubArray[a] + " ");
      }

      double timeTaken = bubbleSortTimeTaken(BubArray);
      int itrs = bubbleSort(BubArray);
      System.out.println("");
      System.out.println("Array After Bubble Sort");
      System.out.println("Moves Taken for Sort : " + itrs + " moves.");
      System.out.println("Time Taken for Sort : " + timeTaken
            + " milliseconds.");
      for (int a = 0; a < BubArray.length; a++) {
         System.out.print(BubArray[a] + " ");
      }
   }

   private static int bubbleSort(int[] BubArray) {

      int z = BubArray.length;
      int temp = 0;

      int itrs = 0;

      for (int a = 0; a < z; a++) {
         for (int x = 1; x < (z - a); x++) {

            if (BubArray[x - 1] > BubArray[x]) {

               temp = BubArray[x - 1];
               BubArray[x - 1] = BubArray[x];
               BubArray[x] = temp;

            }

            itrs++;
         }
      }

      return itrs;
   }

   public static double bubbleSortTimeTaken(int[] BubArray) {
      long startTime = System.nanoTime();
      bubbleSort(BubArray);
      long timeTaken = System.nanoTime() - startTime;
      return timeTaken;
   }
} 
```

以下是结果输出（注意它仅限于一次运行）：

```
Unsorted List : 
[13981, 6793, 2662, 733, 2850, 9581, 7744 .... ]
Sorted List with BubbleSort

Moves Taken to Sort : 1447551 Moves.
Time Taken to Sort : 1.2483121E7 Milliseconds.

[10, 11, 17, 24, 35, 53, 57, 60, 78, 89, 92 ... ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:29:14.670

修改后的代码...

```
public class BubbleSort {
    static double bestTime = 10000000, worstTime = 0;  //global variables
public static void main(String[] args) {
    int BubArray[] = new int[]{3,5,3,2,5,7,2,5,8};

    System.out.println("Array Before Bubble Sort");
    for(int a = 0; a < BubArray.length; a++){
    System.out.print(BubArray[a] + " ");

    }

  System.out.println("\n Entering Loop...");

  for(int i=0; i<1000;i++)
  {  
  bubbleSortTimeTaken(BubArray, i);
  }

        int itrs = bubbleSort(BubArray);
        System.out.println("");               
        System.out.println("Array After Bubble Sort");
        System.out.println("Moves Taken for Sort : " + itrs + " moves.");
        System.out.println("BestTime: " + bestTime + " WorstTime: " + worstTime);
        System.out.print("Sorted Array: \n");
            for(int a = 0; a < BubArray.length; a++){
                    System.out.print(BubArray[a] + " ");
            }
    }

 private static int bubbleSort(int[] BubArray) {

    int z = BubArray.length;
    int temp = 0;

    int itrs = 0;

    for(int a = 0; a < z; a++){
            for(int x=1; x < (z-a); x++){

                    if(BubArray[x-1] > BubArray[x]){

                            temp = BubArray[x-1];
                            BubArray[x-1] = BubArray[x];
                            BubArray[x] = temp;
                    }    

                    itrs++;
            }
    }

    return itrs;
}

public static void bubbleSortTimeTaken(int[] BubArray, int n) 
{

     long startTime = System.nanoTime();

     bubbleSort(BubArray);   

     double timeTaken = (System.nanoTime() - startTime)/1000000d;

     if(timeTaken > 0)
     {
         if(timeTaken > worstTime)
         {
             worstTime = timeTaken;
         }
         else if(timeTaken < bestTime)
         {
             bestTime = timeTaken;
         }

     }

     System.out.println("Loop number: "+n + " Time Taken: " + timeTaken);

}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T08:28:41.177

移动下面的方法

```
private static int bubbleSort(int[] BubArray) 
```

在其他一些类扩展`Thread`中。可能您可以在每次执行完成时创建新线程。根类中的静态实例变量可用于保存时间。

# javascript - 在 Internet Explorer 8 中 event.srcElement 为空

> ID：13759349
> 
> 赞同：1
> 
> 时间：2012-12-07T08:20:02.060
> 
> 标签：javascript, internet-explorer, javascript-events

我们正在使用 asp.net 网络表单。服务器正在使用 onclick 事件生成输入元素（图像）。当点击发生时，我正在调用函数并将事件对象传递给它。

在该函数内部，我试图访问 event.srcElement.className 以获取导致事件的元素的类名。仅在 IE8 事件的 srcElement 为空。

这个问题的可能解决方案是什么。

如何在事件发生时调用的函数中获取导致单击事件的元素的类名？

选择的答案解决了我的问题，但没有回答问题！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T08:44:34.840

而不是使用`event`，只需将单击的元素传递给`javascript`函数。

```
<input type="button" onclick="func(this)" value="Ok" class="myClass"/> 
```

然后直接访问元素的样式类。

```
<script>
    function func(elem) {
        alert(elem.className);
    }
</script> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T08:22:09.353

您可以使用 jQuery 库来帮助解决跨浏览器问题。使用 jQuery，您可以使用 event.target 及其所有属性。问题在于各种浏览器之间的 DOM API 不一致。

在 jQuery 中，你可以这样做：

```
$(selector).click(function(event){
    console.log(event.target.className);
    console.log(event.target.classList);
}); 
```

# playframework - 使用 jenkins 在 cloudbees 中构建播放框架应用程序时出错：不支持部署类型：zip

> ID：13759368
> 
> 赞同：1
> 
> 时间：2012-12-07T08:21:16.447
> 
> 标签：playframework, jenkins, cloudbees

我使用播放框架创建了一个简单的应用程序，并希望将其部署到 cloudbees。

我按照这里的说明进行操作：

[http://developer.cloudbees.com/bin/view/RUN/Playframework](http://developer.cloudbees.com/bin/view/RUN/Playframework)

但是当我运行 jenkins 作业时，检查日志时出现以下错误：

**引起：hudson.remoting.ProxyException：com.cloudbees.api.BeesClientException：Server.InternalError - 不支持部署类型：zip**

我不确定是什么原因造成的。有人可以帮我解决这个问题吗？

这是更详细的日志：

```
    [信息] 完成更新。
    [信息] 将 4 个 Scala 源代码和 2 个 Java 源代码编译到 /scratch/jenkins/workspace/helloworld/target/scala-2.9.1/classes...
    [成功] 总时间：74秒，完成时间：2012年12月6日12:42:55 PM
    [信息] 打包 /scratch/jenkins/workspace/helloworld/target/scala-2.9.1/helloworld_2.9.1-1.0-SNAPSHOT.jar ...
    [信息] 完成包装。

    您的应用程序已在 /scratch/jenkins/workspace/helloworld/dist/helloworld-1.0-SNAPSHOT.zip 中准备就绪

    [成功] 总时间：6s，完成时间：2012年12月6日12:43:01 PM
    [cloudbees-deployer] 部署为 (jenkins)
    [cloudbees-deployer] 部署到账户
    [cloudbees-deployer] 部署 dist/*.zip -> helloworld
    [cloudbees-部署者] 0 MB
    [cloudbees 部署程序] 1 MB
    [cloudbees 部署程序] 2 MB
    [cloudbees 部署程序] 4 MB
    [cloudbees 部署程序] 5 MB
    [cloudbees 部署程序] 7 MB
    [cloudbees 部署程序] 8 MB
    [cloudbees 部署程序] 10 MB
    [cloudbees 部署程序] 11 MB
    [cloudbees 部署程序] 13 MB
    [cloudbees 部署程序] 14 MB
    [cloudbees 部署程序] 15 MB
    [cloudbees 部署程序] 17 MB
    [cloudbees 部署程序] 18 MB
    [cloudbees 部署程序] 20 MB
    [cloudbees 部署程序] 21 MB
    [cloudbees 部署程序] 23 MB
    [cloudbees 部署程序] 24 MB
    [cloudbees 部署程序] 26 MB
    [cloudbees 部署程序] 27 MB
    hudson.util.IOException2：远程文件操作失败：/scratch/jenkins/workspace/helloworld/dist/helloworld-1.0-SNAPSHOT.zip at hudson.remoting.Channel@7d698506:s-f2a51a41
        在 hudson.FilePath.act(FilePath.java:835)
        在 hudson.FilePath.act(FilePath.java:821)
        在 com.cloudbees.plugins.deployer.DeployPublisher.perform(DeployPublisher.java:108)
        在 hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
        在 hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:720)
        在 hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:695)
        在 hudson.model.Build$RunnerImpl.post2(Build.java:162)
        在 hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:642)
        在 hudson.model.Run.run(Run.java:1467)
        在 hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        在 hudson.model.ResourceController.execute(ResourceController.java:88)
        在 hudson.model.Executor.run(Executor.java:239)
    原因：hudson.remoting.ProxyException：hudson.util.IOException2：Server.InternalError - 不支持部署类型：zip
        在 com.cloudbees.plugins.deployer.deployables.Deployable.deployFile(Deployable.java:152)
        在 com.cloudbees.plugins.deployer.deployables.Deployable$DeployFileCallable.invoke(Deployable.java:343)
        在 hudson.FilePath$FileCallableWrapper.call(FilePath.java:2229)
        在 hudson.remoting.UserRequest.perform(UserRequest.java:118)
        在 hudson.remoting.UserRequest.perform(UserRequest.java:48)
        在 hudson.remoting.Request$2.run(Request.java:326)
        在 hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
        在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        在 java.util.concurrent.FutureTask.run(FutureTask.java:138)
        在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        在 java.lang.Thread.run(Thread.java:662)
    引起：hudson.remoting.ProxyException：com.cloudbees.api.BeesClientException：Server.InternalError - 不支持部署类型：zip
        在 com.cloudbees.api.BeesClient.readResponse(BeesClient.java:850)
        在 com.cloudbees.api.BeesClient.applicationDeployArchive(BeesClient.java:435)
        在 com.cloudbees.plugins.deployer.deployables.Deployable.deployFile(Deployable.java:124)
        ... 11 更多
    构建步骤“部署到 CloudBees”将构建标记为失败
    完成：失败

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:38:30.087

您需要修复此问题的最新 cloudbees-deployer 插件。告诉我您的帐户名称，以便我解决此问题

# git - 如何在文件 .gitignore 中包含 .svn 目录？（名称中包含点的所有目录）

> ID：13759372
> 
> 赞同：0
> 
> 时间：2012-12-07T08:21:27.777
> 
> 标签：git

> **可能重复：**
> [在 git 中排除 .svn 文件夹](https://stackoverflow.com/questions/821895/exclude-svn-folders-within-git)

如何在文件 .gitignore 中包含 .svn 目录？（名称中包含点或以点开头的所有目录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:37:54.947

看看这个问题[Exclude .svn folder within git](https://stackoverflow.com/questions/821895/exclude-svn-folders-within-git)：

> 我认为您想在顶级目录中使用 .gitignore 文件。如果您将“.svn/entries”放在该文件的一行上，这将起作用。你也可以只放“.svn”而不是“.svn/entries”。

# c# - 在 TDD (MOQ) 中使用 Mocks 的最佳实践

> ID：13759373
> 
> 赞同：4
> 
> 时间：2012-12-07T08:21:28.973
> 
> 标签：c#, .net-3.5, tdd, nunit, moq

我是使用 Mocks 的新手。但它的主要目的是什么？我将首先使用 Moq 来测试我的应用程序（和 NUnit）。

例如，我有这样的代码：

我的网页代码在后面：

```
public partial class MyWebpage
{
    protected string GetTitle(string myVar)
    {
        return dataLayer.GetTitle(myVar);
    }
} 
```

我的数据访问层：

```
public class DataLayer
{
    public string GetTitle(string myVar)
    {
        // Create the query we want
        string query = "SELECT title FROM MyTable " + 
            "WHERE var = @myVar";

        //ENTER PARAMETERS IN HERE

        // Now return the result to the view
        return this.dataProvider.ExecuteMySelectQuery(
            dr =>
            {
               //DELEGATE DATA READER PASSED IN AND TITLE GETS RETURNED
            },
            query,
            parameters);
    }
} 
```

我的数据提供者直接与数据库对话和交互：

```
 public class DataProvider
{
     public T ExecuteMySelectQuery<T>(Func<IDataReader, T> getMyResult, string selectQuery, Dictionary parameters)
    {
          //RUNS AND RETURNS THE QUERY
     }
} 
```

测试所有这些的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:41:09.277

如果要单独测试层，则需要为 DataProvider 和 DataLayer 类创建接口，以公开要模拟的方法。然后你可以使用一个模拟框架——NSubstitute 非常好，创建模拟的代码更少——模拟对依赖类的调用，让你在特定单元内测试代码

```
public interface IDataProvider
{
     T ExecuteMySelectQuery<T>(Func<IDataReader, T> getMyResult, string selectQuery, Dictionary parameters);
}

public interface IDataLayer
{
    string GetTitle(string myVar);
}

public class DataLayer 
{
    private IDataProvider dataProvider;

    public DataLayer(IDataProvider dataProvider)
    {
        this.dataProvider = dataProvider;
    }
} 
```

然后，在您的测试代码中，您创建模拟而不是真实对象，并在实例化测试对象时将它们传递给构造函数。测试数据层：

```
[Test]
public void WhenRetievingTitleFromDataStore_ThenDataLayerReturnsTitle() 
{
    var title = "Title";
    var dataProviderMock = new Mock<IDataProvider>(MockBehavior.Strict);
    dataProviderMock.Setup(x => x.ExecuteMySelectQuery(<parameters>)).Returns(title);
    var dataLayer = new DataLayer(dataProviderMock.Object);
    Assert.That(dataLayer.GetTitle(It.IsAny<string>(), Is.EqualTo(title));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:33:03.997

唯一可能出错的是数据库调用（查询或返回的结果是错误的数据类型）。这是不能嘲笑的。您需要进行集成测试而不是单元测试。

通常，您只模拟能够测试代码中的逻辑。例如，您应该进行测试，以便数据映射器 ( `this.dataProvider.ExecuteMySelectQuery`) 按定义工作。但这属于相关代码的范围。

**更新**

所以你有以下课程：

```
public class DataLayer
{
    public string GetTitle(string myVar)
    {
        // Create the query we want
        string query = "SELECT title FROM MyTable " + 
            "WHERE var = @myVar";

        //ENTER PARAMETERS IN HERE

        // Now return the result to the view
        return this.dataProvider.ExecuteMySelectQuery(
            dr =>
            {
               //DELEGATE DATA READER PASSED IN AND TITLE GETS RETURNED
            },
            query,
            parameters);
    }
}

public class DataProvider
{
     public T ExecuteMySelectQuery<T>(Func<IDataReader, T> getMyResult, string selectQuery, Dictionary parameters)
    {
          //RUNS AND RETURNS THE QUERY
     }
} 
```

如果我们检查一下，`ExecuteMySelectQuery`我们可以看到`DataLayer`该类依赖于数据库返回的类型，因为这`DataProvider`只是简化了查询执行。可以说它是 ADO.NET 之上的一个插件。

这也意味着您永远无法保证在`DataLayer`不涉及数据库的情况下返回所承诺的内容。例如，假设`table`数据库中有一个名为的列，`title`但有人设法改用该`int`数据类型。

可能出错的事情是

*   查询不正确
*   数据库中的架构不正确（错误的列名、数据类型等）
*   映射

在模拟的帮助下，无法检测或测试这些错误。

另一方面，如果您`DataLayer`在另一个班级中使用该班级，您当然可以模拟它。因为`DataLayer`类本身就是一个完整的抽象。这意味着类的调用者不必知道它下面的任何东西。因此，嘲笑是完全可以的。

# jquery - 模态打开加载页面

> ID：13759375
> 
> 赞同：0
> 
> 时间：2012-12-07T08:21:32.620
> 
> 标签：jquery, modal-dialog

我有这个模态代码，但它只在单击分配给这个模态的按钮时出现。

我希望我的模态与页面一起自动加载，而无需单击任何按钮。

我将如何做到这一点？

```
jQuery(document).ready(function() { 

//select all the a tag with name equal to modal
jQuery('a[name=account]').click(function(e) {
    //Cancel the link behavior
    e.preventDefault();

    //Get the A tag
    var id = jQuery(this).attr('href');

    //Get the screen height and width
    var maskHeight = jQuery(document).height();
    var maskWidth = jQuery(window).width();

    //Set heigth and width to mask to fill up the whole screen
    jQuery('#mask').css({'width':maskWidth,'height':maskHeight});

    //transition effect     
    jQuery('#mask').fadeIn(400);    
    jQuery('#mask').fadeTo(400,0.8);    

    //Get the window height and width
    var winH = jQuery(window).height();
    var winW = jQuery(window).width();

    //Set the popup window to center
    jQuery(id).css('top',  winH/2-jQuery(id).height()/2);
    jQuery(id).css('left', winW/2-jQuery(id).width()/2);

    //transition effect
    jQuery(id).fadeIn(400); 

});

//if close button is clicked
jQuery('.window .close').click(function (e) {
    //Cancel the link behavior
    e.preventDefault();

    jQuery('#mask').hide();
    jQuery('.window').hide();
});     

jQuery(window).resize(function () {

    var box = jQuery('#boxes .window');

    //Get the screen height and width
    var maskHeight = jQuery(document).height();
    var maskWidth = jQuery(window).width();

    //Set height and width to mask to fill up the whole screen
    jQuery('#mask').css({'width':maskWidth,'height':maskHeight});

    //Get the window height and width
    var winH = jQuery(window).height();
    var winW = jQuery(window).width();

    //Set the popup window to center
    box.css('top',  winH/2 - box.height()/2);
    box.css('left', winW/2 - box.width()/2);

});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:29:03.973

像这样

```
function pop(id) {

    //Get the screen height and width
    var maskHeight = jQuery(document).height();
    var maskWidth = jQuery(window).width();

    //Set heigth and width to mask to fill up the whole screen
    jQuery('#mask').css({'width':maskWidth,'height':maskHeight});

    //transition effect     
    jQuery('#mask').fadeIn(400);    
    jQuery('#mask').fadeTo(400,0.8);    

    //Get the window height and width
    var winH = jQuery(window).height();
    var winW = jQuery(window).width();

    //Set the popup window to center
    jQuery(id).css('top',  winH/2-jQuery(id).height()/2);
    jQuery(id).css('left', winW/2-jQuery(id).width()/2);

    //transition effect
    jQuery(id).fadeIn(400); 

}

jQuery(document).ready(function() { 
    pop("some ID"); 
    //select all the a tag with name equal to modal
    jQuery('a[name=account]').click(function(e) {
      //Cancel the link behavior
      e.preventDefault();

      //Get the A tag
      var id = jQuery(this).attr('href');
      pop(id);

    });
.
.
. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:27:11.003

您可以将其放在函数处理程序`jQuery('a[name=account]').trigger('click')`的末尾。`.ready`但请注意，使用选择器之类的`'a[name=account]'`click 将在所有设备上触发`<a name="account"`，这可能会导致出现多个模式窗口。或者`a`会出现最后一个弹出窗口。可能您需要为某些设置一个 id，`<a>`以便仅调用该弹出窗口`<a>`

```
jQuery(document).ready(function() { 

//select all the a tag with name equal to modal
jQuery('a[name=account]').click(function(e) {
     ....    
});

//if close button is clicked
jQuery('.window .close').click(function (e) {
    .....
});     

jQuery(window).resize(function () {

    ....

});
jQuery('a[name=account]').trigger('click');
}); 
```

# sed - SED：如何使用 sed 在给定文件中仅查找偶数

> ID：13759376
> 
> 赞同：3
> 
> 时间：2012-12-07T08:21:49.583
> 
> 标签：sed, pattern-matching

我是 bash 新手，很难弄清楚这一点。

使用`sed`，任何人都可以帮助我在给定文件中仅查找偶数吗？

我想出了如何使用以下方法找到从 [0,2,4,6,8] 开始的所有数字：

```
sed -n 's/^[0-9]*[02468] /&/w even' <file 
```

但这并不能保证这个数字是肯定的。

我很难找到匹配的数字是否以 [0,2,4,6,8] 结尾，因为它是肯定的。

那么有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:27:30.917

您的正则表达式看起来有点奇怪，我不确定您想做什么，但这应该会有所帮助：

```
sed -r -n 's/^[0-9]*?[02468] /even/g' 
```

`-r`启用扩展的正则表达式，`*?`使其不贪婪，并对`/g`文件中的所有行进行全局替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:27:52.390

假设所有偶数后面都有一个空格并且它们都在行的开头，您的命令应该可以正常工作：

```
$ echo 'foo 
1231 
2220 
1254 ' | sed -n '/[0-9]*[02468] /p'
2220 
1254 
```

另请注意，由于您实际上并未进行替换，因此您不需要该`s`命令。使用地址（模式）说明符和`w`命令（就像我上面对`p`命令所做的那样）。

为了确保偶数位是最后一位，但后面不一定有空格，您可以执行类似的操作

```
$ echo 'foo
1231
2220
1254 ' | sed -n '/[0-9]*[02468]\($\|[^0-9]\)/p'
2220
1254 
```

实际上，您的案例看起来更像是`grep`, not的用例`sed`，因为您进行过滤而不是编辑。一切都变得更容易`GNU grep`，正如你可以做的那样

```
$ echo 'foo
1231
2220
1254 ' | grep -P '\d*[02468](?!\d)'
2220
1254 
```

只需附加`> even`到命令以使其写入文件`even`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:14:21.513

```
$ cat file
1
2
3
498
57
12345678
$ awk '$0%2' file
1
3
57
$ awk '!($0%2)' file
2
498
12345678 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T08:26:46.730

为什么找不到以 [02468] 结尾的数字？

# sed - 如果 $2<25 从带有 sed 或 awk 的文本文件中打印行

> ID：13759384
> 
> 赞同：0
> 
> 时间：2012-12-07T08:22:23.853
> 
> 标签：sed, awk

我想`print $1 and $2 if $2<25`从文本文件中。我还需要从所有文件中获取分数低于 25 的学生总数。如何使用 awk 或 sed 执行此操作？

```
students  marks
jerry     12
peter     35
john      5
jerry     15
john      10 
```

期望的输出

```
jerry    12
john      5 
jerry     15
john      10

Total no:of students :- 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:36:52.477

在`awk`：

```
$ awk '$2<25 {print; i++} END{print "\nTotal number of students:- "i}' file 
```

输出：

```
jerry     12
john      5
jerry     15
john      10

Total number of students:- 4 
```

如果您希望按等级*（从最低到最高）*排序输出：

```
$ sort -n -k2,2 file | awk '$2<25 {print; i++} END{print "\nTotal number of students:- "i}' 
```

排序输出：

```
john      5
john      10
jerry     12
jerry     15

Total number of students:- 4 
```

`-n`数字排序； `-k2,2`在第二个字段上排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:41:30.493

```
awk '$2<25{count++ ; print}END{print "Total No of Students :-",count}' your_file 
```

测试如下：

```
> awk '$2<25{count++ ; print}END{print "Total No of Students :-",count}' temp
jerry     12
john      5
jerry     15
john      10
Total No of Students :- 4 
```

# php - 如何通过按钮删除表格行？

> ID：13759390
> 
> 赞同：0
> 
> 时间：2012-12-07T08:22:51.753
> 
> 标签：php, forms

我创建了一个表单，我们可以通过单击一个按钮在其中添加多行。但我不知道如何删除这些行。

编码：

```
<form>
   <table>
    <?php
      for ($i=0; $i<100; $i++) {
        $inst_no = $i+1;
       // Display only the first line
       if ($nbr_ligne == 0) $nbr_ligne = 1;
       if ($i >= $nbr_ligne) $display = 'style="display:none"';

         echo '
       <tr id="cell'.$i.'" '.$display.'>
       <td align="center"><b>'.$inst_no.'</b><br>&nbsp;</td>
       <td><input type="text" name="total_balance[]" id="total_balance'.$i.'" class="payment_text_box" /><br>
       <input type="button" value="Add Installment" class="installment_button" onclick="javascript:document.getElementById(\'cell'.($i+1).'\').style.display=\'table-row\'; this.style.display=\'none\'" />
       </td>
        <td><input type="text" name="installment_amount[]" id="installment_amount'.$i.'" class="payment_text_box"/><br>&nbsp;</td>
        <td><input type="text" name="remaining_balance[]" id="remaining_balance'.$i.'" class="payment_text_box" /><br>
        <input name="submit" type="button" value="Remove Installment" class="installment_button" onclick="remove();" />
        </td>
        <td><input type="text" name="installment_date[]" id="installment_date'.$i.'" class="payment_text_box"/><br>&nbsp;</td>
         </tr>';
      }
        ?>
</table>
</form> 
```

请告诉我删除这些行的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:31:24.083

在您的 JavaScript remove() 函数中添加如下内容（未经测试）：

```
thisItem.parentNode.parentNode.parentNode.removeChild(thisItem.parentNode.parentNode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:36:50.077

我认为这是用于如何按按钮添加和删除表格。 [http://www.mredkj.com/tutorials/tableaddrow.html](http://www.mredkj.com/tutorials/tableaddrow.html)

# php - htaccess 动态查询字符串

> ID：13759392
> 
> 赞同：2
> 
> 时间：2012-12-07T08:22:55.217
> 
> 标签：php, .htaccess, dynamic, random

也许这是一个愚蠢的问题

我有以下当前代码：

```
 RewriteEngine On
  RewriteRule ^(.*) /image/modify.php?pic=$1 [QSA] 
```

我输入网址[http://site.com/image/20121207/test.jpg&w=256](http://site.com/image/20121207/test.jpg&w=256)

将显示调整大小的图像。原始网址是：

[http://site.com/image/modify.php?pic=20121207/test.jpg&w=256](http://site.com/image/modify.php?pic=20121207/test.jpg&w=256)

但是我怎样才能将 &w= 更改为 ?w= ？

w= 是随机的，也许有人会输入 h= / r= ...等

请给我一些提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:00:32.987

太简单 ：

```
RewriteEngine On
RewriteRule ^([^/]*)(?)(.*)$ /image/modify.php?pic=$1&$2 [QSA] 
```

希望它工作....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:22:49.653

这个怎么样：

```
RewriteEngine On
RewriteRule ^image/([^/]*)(?)(.*)$ /image/modify.php?pic=$1&$2 [QSA] 
```

并输入网址：

```
http://site.com/image/20121207/test.jpg?w=256 
```

我已经尝试过了，我认为它会起作用......祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:29:00.693

Apache 重写器足够智能，可以正确处理查询参数。这就是*“查询字符串追加”*`QSA`的用途。您可以访问并且应该正确地重写它。*`20121207/test.jpg?w=256``modify.php?pic=20121207/test.jpg&w=256`*

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T08:33:53.140

尝试这个：

```
RewriteRule ^([^/]+)/([^/]+)/([^?&]+)?(.*) /image/modify.php?pic=$1$2$3&$4 [QSA] 
```*

# zeromq - ZMQError：无法分配请求的地址

> ID：13759394
> 
> 赞同：4
> 
> 时间：2012-12-07T08:23:22.490
> 
> 标签：zeromq

我正在使用 zeromq 开发一个动态应用程序，其运行方式类似于 upnp 协议（客厅设备的自动配置和自动发现）。为此，我使用 zeromq 分发消息，我的问题是，当我创建套接字并绑定到地址**"169.254.1.0 到 169.254.254.255"**时，我收到如下错误消息：*ZMQError: Cannot assign requested address* .

我试图通过通过本地地址（127.0.0.1）更改地址来找出原因，它的工作原理！问题是我正在实现 autoip，这意味着我必须使用 169.254.1.0 到 169.254.254.255 范围内的地址。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T21:54:21.310

启动接口后，您需要获取其 IP 地址，然后对其进行绑定。或者，您可以绑定“*”，即所有接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-14T20:57:53.067

我也遇到了这个错误……我意识到我对 PUB/SUB 模型中谁与谁连接有错误的想法。

这是可行的：主机 A 作为 ZMQ PUB，并且可以轻松地与主机 A 作为 ZMQ SUB 连接。

然后我尝试将主机 B 设置为 SUB，并让主机 A “发送”到那个……我一直收到这个错误。毕竟你不需要告诉PUB将数据发送到哪里吗？

不！作为 PUB 的主机 A 仍应绑定到 IP_ANY (0.0.0.0)；主机 B 作为 SUB 必须配置主机 A 的地址。

一旦我在我的代码（和我的头脑中）中得到了这一点，我就开始运行了。

# c# - 将值分配给类中的字段，然后将整个类存储到列表中

> ID：13759395
> 
> 赞同：0
> 
> 时间：2012-12-07T08:23:33.577
> 
> 标签：c#, list, object, field

输入：任何给定日期的所有销售数据，通过以下代码从字符串中提取：

```
class Program
{

static void Main(string[] args)
{
    List<Sale> Sales = new List<Sale>();

    // int l = 1;
    using (StreamReader reader = new StreamReader("file.dat"))
    {
        string line;
        var locations = new Dictionary<string, int[]>() {
            {"210", new [] {405, 4, 128, 12, 141, 12, 247, 15, 121, 3}},
            {"310", new [] {321, 4, 112, 12, 125, 12, 230, 15, 105, 3}}, 
            {"410", new [] {477, 4, 112, 12, 125, 12, 360, 15, 105, 3}} 
        };

        while ((line = reader.ReadLine()) != null)
        {

            var lineStart = line.Substring(0, 3);

            if (lineStart == "210" || lineStart == "310" || lineStart == "410")
            {
var currentLocations = locations[lineStart];
                    var letters = line.Substring(currentLocations[0], currentLocations[1]);
                var volume =
                    int.Parse(line.Substring(currentLocations[2], currentLocations[3])) +
                    int.Parse(line.Substring(currentLocations[4], currentLocations[5]));

                var price = long.Parse(line.Substring(currentLocations[6], currentLocations[7]));
                var mvolume = price * volume;
                var currency = line.Substring(currentLocations[8], currentLocations[9]); 
```

这会从字符串中获取我想要的所需信息。

我有一个单独的类，具有与这些变量相同的字段（但名称略有不同）。

```
public class Sale
    {
        private int CashTotal;
        private string codeletters;
        private string Crncy;
} 
```

在我的主要代码中，我有：

```
 Sale s = new Sale();
                   Sales.Add(s); 
```

（到目前为止，这是我的完整代码，只是分成几部分，它在程序中从上到下读取 - 除了新类）。

在这一点上，我正在努力做的是将每个 var 中的值加载到类中的字段中（将 Currency 存储为 Crncy，将 mvolume 存储为 totalcash，将字母存储为 codeletters），将该对象（Sale）存储到列出（销售），然后再次重复。我很确定有一个非常基本的解决方案，但如果我能想到的话，我会感到很满足。

编辑：对此感到抱歉，解决了那个问题并编辑了代码，因此，我将向您展示我尝试过的不起作用但应该传达我正在尝试做的事情的逻辑：

```
 Sale.CashTotal = mvolume;
                    Sale.Crncy = currency;
                    Sale.codeletters = letters; 
```

我已将字符串分解为其组成部分，但我只能将一个对象存储在列表中，因此我需要将它们重新组合为销售，并将其存储在列表中，但将这些值放入销售中是证明是有问题的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:35:36.367

您已将字段声明为`private`，因此无法在课堂外访问它们。您可以声明一个公共构造函数并在那里传递值。您也可以仅使用访问器添加 publiv 属性`get`：

```
public class Sale
{
    private int totalCash;
    public int TotalCash
    {
        get { return totalCash; }
    }

    private string codeletters;
    public string Codeletters
    {
        get { return codeletters; }
    }

    private string crncy;
    public string Crncy
    {
        get { return crncy; }
    }

    public Trade(int _totalCash, string _codeletters, string _crncy)
    {
        totalCash = _totalCash;
        codeletters = _codeletters;
        crncy = _crncy;
    }
} 
```

然后将使用它：

```
Sale s = new Sale(mvolume,letters,currency); 
```

或者你可以制作它们`public`：

```
 public int TotalCash;
    public string codeletters;
    public string Crncy; 
```

然而，公共领域绝对是糟糕的设计，所以你最好让它们成为自动属性：

```
 public int TotalCash {get; set;}
    public string CodeLetters {get; set;}
    public string Crncy {get; set;} 
```

请阅读 MSDN 了解更多信息：[访问修饰符](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.71%29.aspx)

# mongoose - Mongoose.js：从模型实例中获取 mongo db 名称/url

> ID：13759400
> 
> 赞同：9
> 
> 时间：2012-12-07T08:24:04.603
> 
> 标签：mongoose

我创建了 mongoose.js 模型：

```
db = mongoose.createConnection(mongoUrl)

model = db.model('Model', schema) 
```

我可以从模型中获取 mongoUrl（或服务器和数据库名称）吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-08T02:44:25.760

是的，您可以通过`model.db`. 因此，您可以获得所需的所有连接信息，如下所示：

```
console.log(model.db.host); // localhost
console.log(model.db.port); // 27017
console.log(model.db.name); // myDatabase 
```

# asp.net - 比较两个表的记录并丢弃匹配项

> ID：13759402
> 
> 赞同：1
> 
> 时间：2012-12-07T08:24:11.577
> 
> 标签：asp.net, sql, sql-server, vb.net, vb.net-2010

我正在尝试实现一个想法，在数据库中有两个 sql 表。

具有字段的表和`Info`具有字段的`Nationality`另一个表。`Exclusion``Keyword`

```
`Info.Nationality`               `Exclusion.Keyword`

    |British|                     |France|  
    |resteraunt de France|        |Spanish|
    |German|
    |Flag Italian|
    |Spanish rice|
    |Italian pasta
    |Irish beef| 
```

在我的 Web 应用程序中，我正在创建一个`GridView4`并通过 a`DataTable`并使用 SQL 命令`SqlDataAdapter`填充它：`GridView4`

`SELECT DISTINCT Info.Nationality WHERE Exclusion.Keyword NOT LIKE '%Spanish%'`

该 SQL 语句检索所有`Info.Nationality`不包含单词 spanish 的不同记录。

我目前正在做的是在 vb.net 中的 web 应用程序中添加两个不同`GridViews`的，每个都有每个表的数据，这意味着`GridView2`has`DISTINCT Info.Nationality`和`GridView3`has`Exclusion.Keyword`然后添加另一个 `GridView4`以显示上述结果`SQL command`。

这个想法是检索所有不同的记录，`Info.Nationlity`这些记录没有被 中的关键字约束抑制`Exclusion.keyword`。因此，从上面提到的 Sql 命令中，`GridView4`将检索所有不包含“Spanish”一词的记录。

我在一个嵌套循环中执行所有这些操作，在第一个循环中，它从eg`for`中获取每条记录（一个接一个），并将其与第二个 for 循环进行比较，直到该循环结束。`Info.Nationality``for each row As DataRow in Me.GridView2.Rows()``Exclusion.Keyword``For i=0 To Gridview3 - 1`

问题是在那个 sql 语句中我必须明确指定要比较的单词。我尝试`Exclusion.Keyword`在 a 中添加记录，`String`然后将`Spanish`in 之间的关键字替换为is`NOT LIKE`的名称，然后将名称分配为参数。但是，这不起作用，它仅与字符串中的最后一条记录进行比较并忽略第一条记录。`String``Keywords``cmd.parameter.addwithvalue(@String, Keywords)`

所有这一切背后的想法是显示其中不包含关键字 in 的`Info.Nationality`所有记录。`GridView4``Exclusion.Keyword`

有没有更简单或更有效的方法来做到这一点？我在想一个，`Inner Join with a Like command`但这不是我的问题。我的问题是如何将每条记录与其中的`Info.Nationlity`所有记录一一进行比较`Exclusion.keyword`，然后检索不匹配的记录并丢弃匹配的记录。

那么`Gridview4`我如何编辑记录而不反映这些更改或影响，`Info.Nationality`而只影响`Inserting to Exclusion.Keyword`更改。

**通过在我的asp.net**网络应用程序中添加`ToString()`后解决`Text` ，我尝试了这个，但没有用：（**已解决**）

```
 `SELECT DISTINCT Nationality 
FROM Info Where NOT EXISTS(SELECT * FROM Exclusion WHERE Info.Nationality LIKE '%' + @GridView +'%')`

`cmd.parameters.AddwithValue("@GridView", GridView3.Rows(i).Cells(0).Text.ToString())` 
```

`GridView3`这里有`Exclusion.Keywords`数据。

非常感谢您对此提出的建议和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:29:41.273

您不需要一个接一个地执行此操作，或者“通过痛苦的行来进行操作”，因为某些 DBA 喜欢描述这种类型的方法。有很多方法可以编写查询以仅将 Info.nationality 中与排除关键字不匹配的记录作为单个表达式返回。

我的偏好是使用`EXISTS`子句和相关子查询：

```
SELECT Nationality 
FROM Info I
WHERE NOT EXISTS(SELECT * FROM Exclusion WHERE I.Nationality LIKE '%' + Keyword + '%') 
```

您也可以将其表示为`left join`.

```
SELECT I.Nationality 
FROM Info I
    LEFT OUTER JOIN Exclusion E 
        ON I.Nationality LIKE '%' + E.Keyword + '%'
WHERE E.Keyword IS NULL 
```

将`left join`返回 info 中的所有行，并在排除列中插入空值，但连接条件匹配的地方除外。通过仅过滤那些值为空的地方，您可以避免匹配。

# php - 使用 Zend_Db_Table_Select 编写子查询

> ID：13759404
> 
> 赞同：5
> 
> 时间：2012-12-07T08:24:28.743
> 
> 标签：php, zend-framework

我无法将以下查询转换为 Zend_Db_Table_Select 查询。

```
SELECT GROUP_CONCAT(wallet_transaction_id) as wallet_transaction_ids,transaction_type,source,status
FROM(
    SELECT wallet_transaction_id, transaction_type, source, status
    FROM ubiw_transactions_wallet
    WHERE (game_id = '1292') AND (player_id = 1538) 
    ORDER BY date DESC LIMIT 100
) a 
GROUP BY a.transaction_type,a.status, a.transaction_type; 
```

任何帮助表示赞赏。

谢谢，希夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:02:33.443

```
// Maybe need some changes

$table = new Zend_Db_Table('ubiw_transactions_wallet');

$subSelect = $table->select()
->from('ubiw_transactions_wallet', array('wallet_transaction_id', 'transaction_type', 'source', 'status'))
->where($table->getAdapter()->quoteInto('game_id = ?', 1292))
->where($table->getAdapter()->quoteInto('player_id = ?', 1538))
->order('`date` DESC')
->limit(100);

$mainSelect = $table->select()
->setIntegrityCheck(false)
->from(array('a' => $subSelect), array('wallet_transaction_ids' => new Zend_Db_Expr('GROUP_CONCAT(wallet_transaction_id)'), 'transaction_type', 'source', 'status'))
->group(array('a.transaction_type', 'a.status', 'a.transaction_type'));

$result = $table->fetchAll($select); 
```

# c# - 作为嵌入式资源的托管 dll

> ID：13759413
> 
> 赞同：1
> 
> 时间：2012-12-07T08:25:29.473
> 
> 标签：c#, .net, dll, embedded-resource

**将所有必需的托管 dll 作为嵌入式资源捆绑到 .NET 库项目以便只发送一个 dll 是否是一种好习惯？**

背景：我已经创建了一个 API 作为 .NET dll（在 C# 中），并且一切正常。但是该库对其他托管库（大约 15 个 dll）有相当多的依赖，所以我也需要分发这些库。

当我的 API 的用户创建了一个应用程序时，他们必须再次确保将所有这些 dll 与应用程序一起分发。对我来说，如果他们只考虑一个 dll 似乎会更好。

我可以看到使用嵌入式 dll 的主要缺点是它们必须在动态加载之前解压缩到临时文件夹，这可能会或可能不会有性能和稳健性问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:55:59.233

围绕这一点有很多问题。如果您期望加载特定于平台的依赖项（即 x86 与 x64），或者使用您的 API 的应用程序确实如此，会发生什么？这是否意味着您还需要在包中包含特定的 x86 与 x64 程序集？它很快变得多毛。

对于这些类型的方案，您应该考虑使用[ClickOnce 部署。](http://msdn.microsoft.com/en-US/library/t71a733d%28v=VS.80%29.aspx)然后，所有依赖项将打包在一起。

实际上，这是 API 消费者要解决的问题，而不是 API 生产者要解决的问题。如果你的 API 有很多外部依赖项，它可能不太受欢迎，但你必须在那里做出决定，什么对你的 API 成功至关重要。

# java - 一堆数字中的“e”

> ID：13759415
> 
> 赞同：4
> 
> 时间：2012-12-07T08:25:37.087
> 
> 标签：java, variables, numbers

> **可能重复：**
> [e+000 是多少](https://stackoverflow.com/questions/5308112/what-number-is-e000)

`2.4397e6`在[枚举教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)中找到

打印结果：`2439700.0`，是什么`e`意思？我不认为它是原始数据类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T08:26:31.410

它是科学记数法中的指数 - 因此该值为 2.4397 x 10 ⁶。

有关浮点文字的详细信息，请参阅[JLS 第 3.10.2 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:27:49.493

“e”是科学记数法中的指数。

# java - com.mysql.jdbc.PacketTooBigException

> ID：13759418
> 
> 赞同：5
> 
> 时间：2012-12-07T08:25:56.323
> 
> 标签：java, mysql, database, jdbc, database-connection

我有一个大问题！当我这样做时：

```
 String query = "SELECT * FROM utente WHERE confermato=1 and Username='" + username
            + "' AND Password='" + password + "'";

        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con = DriverManager.getConnection("ind_server/nome_db","user","password"); 
```

Eclipse 给了我这个错误：

```
Packet for query is too large (4739923 > 1048576). You can change this value on the server by setting the max_allowed_packet' variable. 
```

所以，首先：这个查询真的这么大吗？-.- 之后：我必须在 ssh 中写入哪些命令？这是我第一次遇到这些事情！提前致谢！

我在服务器上没有root权限！

我尝试使用这个：

```
 mysql>set global max_allowed_packet=32*1024*1024; 
```

但它给了我这个错误：错误1227（42000）：访问被拒绝；您需要此操作的 SUPER 权限

**编辑**

现在我已将 max_allowed_pa​​cket 变量修改为 32MB。停止并重新启动服务器但是eclipse给了我同样的错误！

我能做些什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-12-04T20:44:42.687

我只需要处理由`DriverManager.getConnection(URL,username,password)`. 我什至得到了相同的“幻数”（4739923 > 1048576）；谷歌搜索那些“神奇的数字”将显示人们也得到一些 DriverManager.getConnection 语句引发的错误的结果。就我而言，关于数据包大小的错误消息是完全误导的；我只是使用了一个错误的 URL，而整个事情与数据包大小无关。

也许这将有助于解释我使用的 URL 出了什么问题——尽管这有点令人尴尬（这是一个非常愚蠢的错误。）就这样。

我已经使用一些名为 SQLYog（有点像 phpMyAdmin）的“数据库管理器”软件成功连接到远程服务器/数据库。为了连接，我不得不给 SQLYog 2 套东西。首先，URL（或IP地址），用户名，密码和端口，以便我的计算机可以与服务器连接。其次，URL、端口、MySQL 用户名、MySQL 密码，以便服务器机器可以连接到数据库（位于那台机器上）。所以有 2 个 URL 和 2 个端口（还有 2 个用户名和 2 个密码）一个用于客户端 -> 服务器，一个用于服务器 -> 数据库。

现在，在决定为 DriverManager.getConnection 中的 JAVA 代码选择哪个 URL 时，我选错了，愚蠢的我！显然，这必须是第二步（服务器 -> 数据库），而不是第一步（客户端 -> 服务器）；毕竟 servlet 在服务器上运行，所以 servlet 甚至正在运行的事实表明步骤 1 已经完成，步骤 2 仍有待完成。由于数据库与运行 servlet 的机器位于同一台机器上，因此该 url 只是“localhost”；或者，更准确地说，“jdbc:mysql://localhost:3306/myDatabaseName”。而不是“jdbc:mysql://domainNameOfServer.com:somePortNumber/myDatabaseName”，它抛出了上述错误。

愚蠢的错误和非常愚蠢的错误信息。我想这很合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T03:24:33.270

以下为我工作

编辑 my.cnf 文件（我的在 /etc/mysql 中）

然后修改max_allowed_pa​​cket值我设置为max_allowed_pa​​cket=200M

确保重新启动 MySQL 以使更改生效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-23T10:56:15.087

查询数据包太大（2285643 > 1048576）。您可以通过设置 max_allowed_pa​​cket' 变量在服务器上更改此值。

```
SOLUTIONS:-
You can see it's current value in mysql like this:

SHOW VARIABLES LIKE 'max_allowed_packet'

You can try to change it like this, but it's unlikely this will work on shared hosting:

SET GLOBAL max_allowed_packet=16777216;
and restart mysql service.. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-30T12:54:06.933

编辑您的 my.cnf(ubunut) 或 my.ini(windows) 文件并设置 max_allowed_pa​​cket 大小。

max_allowed_pa​​cket=512M

然后重启你的mysql服务器。它会工作的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T09:04:21.053

> 但它给了我这个错误：错误1227（42000）：访问被拒绝；您需要 SUPER 权限 > 进行此操作

尝试 sudo set global max_allowed_pa​​cket=32*1024*1024

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-03T10:22:20.953

我遇到了这个问题并通过更改我的 mysql-connector 版本来解决它。可能是我在 pom 中的 mysql-connector 版本太高了。

堆栈打印：

```
Thu Nov 03 18:24:03 CST 2016 WARN: Invalid value 'null' for server variable named 'auto_increment_increment', falling back to sane default of '1'.
Exception in thread "main" com.mysql.jdbc.PacketTooBigException: Packet for query is too large (44 > -1). You can change this value on the server by setting the max_allowed_packet' variable.
    at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:577)
    at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:417)
    at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:3105)
    at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:2336)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2729)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2549)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1861)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1962)
    at com.sparkproject.jdbc.JDBCHelper.main(JDBCHelper.java:382) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-28T15:12:49.893

如果您无法停止数据库，您也可以动态设置 max allowed packet 参数的值。为此：

```
1\. Log in as a root user.
2\. You'll need to set the value as an integer, rather than '256M'. 256M is equivalent to 256*1024*1024, or 268435456.
3\. mysql> SET GLOBAL max_allowed_packet=268435456;
4\. To check that this has been applied:

    a. Relogin to your mysql client.

    b. mysql> SELECT @@max_allowed_packet;

Restart your Confluence instance. 
```

您仍然需要按照上述方法更新您的 /etc/my.cnf 文件，以使更改持久化。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-23T20:05:03.440

我有同样的误导性错误信息。

我通过将端口号更改为 3306 来修复它。以前我将端口号设置为 2083，因为这是我在 Web 服务器上使用的。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-12-07T08:32:20.297

好吧，我们不知道您的数据库有多大，但是您的查询非常具体。

至于 max_allowed_pa​​cket，请查看此帖子：

[如何检查和设置 max_allowed_pa​​cket mysql 变量](https://stackoverflow.com/questions/5688403/how-to-check-and-set-max-allowed-packet-mysql-variable)

# opengl-es - 我可以在顶点着色器中访问 gl_PointCoord 吗？

> ID：13759424
> 
> 赞同：2
> 
> 时间：2012-12-07T08:26:45.217
> 
> 标签：opengl-es, glsl, webgl

`gl_PointCoord`返回表示该像素处的 UV 映射坐标的 2D 向量。但它似乎只在片段着色器中可用。我知道您可以使用 将值从顶点着色器发送到片段着色器`varying`，但是您可以用其他方式发送吗？我可以获取当前顶点的 UV 坐标吗？

是否可以`gl_PointCoord`在顶点着色器中访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:42:10.407

*“该像素处的 UV 映射坐标”* - 确实，但在顶点着色器中您没有任何像素。你错过了点精灵的实际工作方式。单个顶点着色器调用输出`gl_PointSize`大于 1 个像素会导致该点的多个片段着色器调用（因为该点覆盖多个像素）。这些片段`gl_PointCoord`根据它们在这个更大的点精灵中的位置来获取它们。但是覆盖多个片段的每个点精灵总是来自单个顶点。所以从概念上讲，这个单个的每个顶点`gl_PointCoord`只`(0.5, 0.5)`适用于每个顶点，但最终即使这样也没有意义，因为实际上没有任何像素的概念，更不用说顶点着色器中的每个像素的 UV 坐标了。

*“但是你能不能用另一种方式发送它”* ——我敢肯定这是相当非正式的意思，因为你当然不能将任何数据从片段着色器发送到顶点着色器，因为图形管道只能在一个方向上工作。

**编辑：**关于您的评论，如果不使用点精灵，则该`gl_PointCoord`变量根本没有任何意义。您不能将其用作一般的 UV 坐标（片段着色器应如何得出合理的值）。为此，您必须自己从顶点着色器（作为 a `varying`）中取出一个有效的纹理坐标，然后将其插值到要在片段着色器中访问的片段上，可能最终`attribute`像往常一样作为附加的 传递给顶点着色器。

# wpf - 如何设计自定义 Xamlwriter？

> ID：13759427
> 
> 赞同：0
> 
> 时间：2012-12-07T08:26:53.440
> 
> 标签：wpf, serialization

我觉得有必要为一些更复杂的对象设计一个自定义序列化程序，但我在这个主题上找不到什么帮助。如果有人知道一步一步的解释，我会很感激一个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T05:52:33.837

寻找示例的最佳位置是通过 Reflector、ILSpy 或其他类似工具的实际 XamlWriter。我从来没有让它正常工作，但显然有一种方法可以进入 WPF 3.5 源代码。[这是关于该http://social.msdn.microsoft.com/Forums/en/wpf/thread/8f1cab0f-b19a-4f63-ac84-23d0403abd0f](http://social.msdn.microsoft.com/Forums/en/wpf/thread/8f1cab0f-b19a-4f63-ac84-23d0403abd0f)的另一个线程

# ios - 使用 GPUImage 框架为从 Photoshop 导出的 blw 文件创建视频过滤器

> ID：13759431
> 
> 赞同：1
> 
> 时间：2012-12-07T08:27:25.357
> 
> 标签：ios, filter, rgb, cmyk, gpuimage

我的项目任务是创建`GPUImage`实时视频和图像过滤器。

我有从`Photoshop`. 我可以从该文件中读取值![黑白滤镜截图](../Images/bfa7d4283e381943d521fd6cda23fcc2.png)

但是找不到合适的过滤器来实现它。

我尝试使用两个`GPUImageRGBFilters`，一个用于`RGB`值，另一个用于`CMY`值。但结果不是我需要的。

有没有人知道如何使用`GPUImage`框架解决它。

# java - 线程等待用户点击某物

> ID：13759437
> 
> 赞同：0
> 
> 时间：2012-12-07T08:27:43.410
> 
> 标签：java, multithreading, swing, exception, mouselistener

我正在准备申请玩五子棋。

我已经创建了漂亮的 GUI，现在我正在使用核心引擎。

有一个类`GameEngine`具有同步方法来进行移动。还有一些实现`IClient`接口的类是“播放器”。首先要做的是实现`PlayerClient`连接到`BoardPanel`并`MouseListener`在`BoardPanel`（代表五子棋板）sais 时移动。我希望我的应用程序也可以开放以实现计算机播放器。这就是为什么它如此复杂。

所以......问题：我的`GameEngine`班级看起来像这样：

```
public class GameEngine {
    private IClient blackPlayer;
    private IClient whitePlayer;
    private GameState gameState;

    ...

    public void play() {
        blackPlayer.run();
        whitePlayer.run();
    }

    public synchronized void move(Move move) throws IllegalMoveException {
        gameState.move(move);
        if (move.isBlackMove()){
            whitePlayer.notify();
        }else{
            blackPlayer.notify();
        }
    }

    public synchronized void waitForYourTurn(boolean color){
        try {
            while (gameState.isBlackToMove()!=color) {
                wait();
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

} 
```

我的 Client 类有 run() 方法：

```
@Override
    public void run() {
        while (gameState.getWinner() == 0) {
            move = null;
            boolean moved = false;
            while (!moved) {
                gameEngine.waitForYourTurn(black);
                try {
                    //waitForPickedMove();
                    gameEngine.move(move);
                    moved = true;
                } catch (IllegalMoveException e) {
                    e.printStackTrace();
                }
            }
        }
    } 
```

在我写“//waitForPickedMove()”的地方，客户端应该等待用户点击板上的正确位置。所以......我的 Board 类中有一个 MouseListener：

```
private class MoveMouseListener implements MouseListener {
        @Override
        public synchronized void mouseReleased(MouseEvent e) {
            if (gameState == null) {
                return;
            }

            if (currentMove != null) {
                movePicked();
                repaint();
            }
        }
    } 
```

currentMove 当然是用户通过点击板选择的移动。虽然 movePicked() 看起来像这样：

```
private synchronized void movePicked() {
    if (gameState.isBlackToMove() && blackClient != null) {
        blackClient.notify();
        clearCurrentMove();
    }
    if (!gameState.isBlackToMove() && whiteClient != null) {
        whiteClient.notify();
        clearCurrentMove();
    }
} 
```

我试着`wait()`在很多地方放。我试图反转控制并将其放入`Board`类中，因此它调用了客户端类中的方法（setCurrentMove（Move move））。不幸的是，我无法达到我想要的。我总是得到`IllegalMonitorStateException`或我的 GUI 块。

我希望我足够解释我的问题。我会很感激任何帮助。

编辑：

```
public class MockComputerClient implements IClient {
    private GameState gameState;
    private GameEngine gameEngine;
    private boolean black;
    private ExecutorService executorService;
    private boolean myTurn = false;
    private int i = 3;

    public MockComputerClient(GameEngine gameEngine, GameState gameState,
            boolean black) {
        this.gameEngine = gameEngine;
        this.gameState = gameState;
        this.black = black;
        executorService = new ExecutorService();
        executorService.run();
    }

    @Override
    public void enemyMoved() {
        myTurn = true;
        executorService.notify();
    }

    private class ExecutorService implements Runnable {

        @Override
        public void run() {
            while (gameState.getWinner() == 0) {
                try {
                    while (!myTurn) {
                        wait();
                    }
                    // Hardcoded Moves
                    gameEngine.move(new Move(black, 3, i++));
                    myTurn = false;
                } catch (InterruptedException | IllegalMoveException e) {
                    e.printStackTrace();
                }
            }
        }
    }

} 
```

我很确定我应该同步某事，但我真的不知道是什么。

编辑2：

```
@Override
    public void enemyMoved() {
        myTurn = true;
        executorService.move();
    }

    private class ExecutorService implements Runnable {

        @Override
        public void run() {
            while (gameState.getWinner() == 0) {
                System.out.println("Calculating: j= " + j);
                if (j == 3)
                    j = 4;
                else
                    j = 3;

                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

            }
        }

        public void move() {
            while (myTurn) {
                try {
                    gameEngine.move(new Move(black, j, i++));
                    myTurn = false;
                } catch (IllegalMoveException e) {
                    e.printStackTrace();
                }
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:40:54.057

游戏引擎不需要一直占用一个线程，在无事可做的时候阻塞它。您应该将其重新设计为反应式：当有事件时，代码在事件处理程序正在执行的线程中执行。那么你将不需要任何`wait`-`notify`机制。

如果您想让 Player 实现在不占用调用线程的情况下花时间，请在设计 API 时考虑到异步性：`IClient`将有一个表示“其他玩家已移动”的方法，该方法不会立即返回玩家的移动。预计`IClient`将通过其移动调用游戏引擎上的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:36:57.147

很难确切地说出它是什么：很多碎片。但看起来您应该按照此处所述同步您的通知调用：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#notify](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#notify) ()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:40:42.637

嗨，我会向你推荐 sleep() 和 notify()。如果你想在未知时间内停止某个线程，让它休眠，当你再次需要它时，给它 notify()。

# mysql - 在 DB 中存储菜单层次结构的建议

> ID：13759439
> 
> 赞同：0
> 
> 时间：2012-12-07T08:28:03.333
> 
> 标签：mysql, database-design

我有一个食品订购系统，其中有主要项目，如拿铁、长黑、纯白、浓缩咖啡、美式咖啡等。每个项目都存储在数据库中，如下所示。

*db 缺少不必要的列

```
 +----+----------------+-------------+
  | id | item_name      | price       |
  +----+----------------+-------------+
  | 1  | latte          | 2.0000      |
  +----+----------------+-------------+
  | 2  | long black     | 2.5000      |
  +----+----------------+-------------+
  | 3  | flat white     | 3.0000      |
  +----+----------------+-------------+
  | 4  | americano      | 2.0000      |
  +----+----------------+-------------+ 
```

我需要为每个项目添加子选项，但每个项目都会有一组独特的选项，例如`americano`会有牛奶类型、糖类型。Flat white 也有牛奶类型，但需要不同的菜单，因为美式咖啡可能不需要牛奶选项，因此会有不同的子菜单。例如。

```
 Flat white milk menu 
  +----+----------------+------------+
  | id | item_name      | submenu_id |
  +----+----------------+------------+
  | 1  | soy            |     1      |
  +----+----------------+------------+
  | 2  | rice           |     1      |
  +----+----------------+------------+
  | 3  | regular        |     1      |
  +----+----------------+------------+
  | 4  | trim           |     1      |
  +----+----------------+------------+

   americano milk menu 
  +----+----------------+------------+
  | id | item_name      | submenu_id |
  +----+----------------+------------+
  | 5  | soy            |     2      |
  +----+----------------+------------+
  | 6  | rice           |     2      |
  +----+----------------+------------+
  | 7  | regular        |     2      |
  +----+----------------+------------+
  | 8  | trim           |     2      |
  +----+----------------+------------+
  | 9  | no Milk        |     2      |
  +----+----------------+------------+ 
```

然后可能会有一个常见的项目，比如糖……

```
 sugar
  +----+----------------+------------+
  | id | item_name      | submenu_id |
  +----+----------------+------------+
  | 10 | Sugar          |     3      |
  +----+----------------+------------+
  | 11 | no Sugar       |     3      |
  +----+----------------+------------+ 
```

将层次结构存储在数据库中的最佳方法是什么？例如，纯白色需要`1,3`美式咖啡需要的值`2,3`。对于需要更多选项的事物，可能需要相同类型的系统。我需要能够将它们拉出并使用 javascript 加载每个子选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:13:14.510

每个子选项是只属于一个选项还是属于两个多个选项？我想糖会属于每个选项....

在这种情况下，您将需要三个表：一个选项表，例如您已经拥有的 (id/name/price)、一个子选项表 (id/name) 和一个连接表 (option/sub-option)。您可以通过添加标志字段来组合选项和子选项表，尽管在这种情况下您必须确保正确填充连接表。

# php - 使用 HTACCESS 重写规则我无法修改我网站的 URL 结构

> ID：13759443
> 
> 赞同：0
> 
> 时间：2012-12-07T08:28:16.703
> 
> 标签：php, .htaccess

我的主机名 -> ps129202.dreamhostps.com 域 -> [http://www.uastudents.com/](http://www.uastudents.com/)

我的网址结构：一个是 /innerpage.php?lang=3&pageid=6&name=SELECT%20PROGRAM 另一个是 /index.php?lang=3

这是我的*.htaccess 代码*：

```
RewriteEngine On     
RewriteBase / 
RewriteRule ^(.*)/images/(.*)$ images/$2
RewriteRule ^(.*)/css/(.*)$ css/$2
RewriteRule ^([0-9]+)$ index.php?lang=$1
RewriteRule ^([0-9]+)/([0-9]+)/([a-zA-Z]+).php$ innerpage.php?lang=$1&pageid=$2&name=$3 
```

我的 url 结构是 domain/innerpage.php?lang=3&pageid=6&name=SELECT%20PROGRAM and domain/index.php?lang=3 Desired url is : domain/3/6/SELECT%20PROGRAM and domain/3 我真的很困惑能不能无论如何都不要运行它..我该如何解决？？？还有其他过程吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:43:41.363

尝试这个：

```
RewriteRule ^([0-9]+)$ index.php?lang=$1 [L]
RewriteRule ^([0-9]+)/([0-9]+)/(.+)$ innerpage.php?lang=$1&pageid=$2&name=$3 [L] 
```

另外，[在这里测试你的正则表达式](http://regexpal.com/)，innerpage.php 的那个永远不会起作用，因为“SELECT%20PROGRAM”中有特殊字符，而不是 a-zA-Z。

# android - Google Play 图标在哪里使用？

> ID：13759444
> 
> 赞同：0
> 
> 时间：2012-12-07T08:28:20.650
> 
> 标签：android, icons, google-play

我读到必须有一个必须为 512x512 像素的 Google Play 图标才能在 Google Play 上部署我的应用程序：http:
[//developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#icons_in_market](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#icons_in_market)。

但是当我浏览市场时，我从未见过这样一个具有这些尺寸的图标。这实际上在哪里使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:30:17.627

该图标用于高分辨率图标（512 x 512）。它显示在网络 Google Play 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:30:27.277

它在网络上的商店中，也可能在平板电脑和其他高分辨率视图中，尤其是在“特色商品”面板中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:33:10.270

它在网络上随处可见（搜索结果，...），并且在应用程序页面上以更大的尺寸出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T11:56:08.253

512x512 图标位于左侧面板的左下角。这就是我想知道的。

# javascript - 用于键名更改的 CSS 变量更少？

> ID：13759446
> 
> 赞同：2
> 
> 时间：2012-12-07T08:28:28.513
> 
> 标签：javascript, css, less

我是新手`LESS CSS`。

在我的`LESS CSS`代码中。只是例子。

```
@block : body;
@name  : color;
@value : #99CC00;

@block
{
    @name : @value
} 
```

我想要这个输出

```
body
{
    color : #99CC00
} 
```

是否可行？如果可能，请给我`LESS CSS`代码。

这是我的问题

```
.browser-fix(@key,@value)
{
    -webkit-@key: @value;
    -moz-@key: @value;
    -ms-@key: @value;
    -o-@key: @value;
    @key: @value;
}

p
{
    .browser-fix(box-shadow,1px 1px 5px rgba(0,0,0,0.2) inset);
    .browser-fix(transform,rotate(30deg));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:53:26.630

我很确定在 LESS 中不可能使用变量来定义赋值的左侧。

但是您可以使用[参数 mixin](http://lesscss.org/#-parametric-mixins)和选择器插值来完成您尝试做的至少一半。

```
@block: body;

.color-mixin(@value) {
    color: @value;
}

@{block} {
    .color-mixin(#99CC00);
} 
```

**编辑：**

为了解决您的问题，我个人会为每个浏览器特定属性单独执行混合，因为浏览器特定属性并不总是与您指定的模式匹配，例如设置不透明度。单独的 mixin 也更容易阅读。

```
.box-shadow(@shadow) {
    -webkit-box-shadow: @shadow;
    -moz-box-shadow: @shadow;
    box-shadow: @shadow;
}

.rotate(@degrees) {
    -webkit-transform: rotate(@degrees);
    -moz-transform: rotate(@degrees);
    -ms-transform: rotate(@degrees);
    -o-transform: rotate(@degrees);
    transform: rotate(@degrees);
}

// Example of an attribute that does not match the pattern.
.opacity(@opacity) {
    opacity: @opacity / 100;
    filter: ~"alpha(opacity=@{opacity})";
}

p {
    .box-shadow(1px 1px 5px rgba(0,0,0,0.2) inset);
    .rotate(30deg);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T06:43:36.407

**使用这个简单的 Less CSS mixin**

```
.vender-fix(@name; @value) {
  -webkit-@{name}: @value;
  -moz-@{name}: @value;
  -ms-@{name}: @value;
  -o-@{name}: @value;
  @{name}: @value;
}

.example {
  .vender-fix(transition, width 300ms);
} 
```

**输出：**

```
.example {
  -webkit-transition: width 300ms;
  -moz-transition: width 300ms;
  -ms-transition: width 300ms;
  -o-transition: width 300ms;
  transition: width 300ms;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:52:25.500

在 less 中阅读关于 mixins [http://lesscss.org/#-mixins](http://lesscss.org/#-mixins)的前缀，然后你可以这样做：

```
.border-radius (@radius) {
  border-radius: @radius;
  -moz-border-radius: @radius;
  -webkit-border-radius: @radius;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T10:22:53.977

由于版本：1.6.0 LESS 允许 css 属性名称是一个变量。

[http://lesscss.org/features/#variables-feature-properties](http://lesscss.org/features/#variables-feature-properties)

# vb.net - 在 vb.net 中构建一个大字符串

> ID：13759450
> 
> 赞同：1
> 
> 时间：2012-12-07T08:28:46.110
> 
> 标签：vb.net, string, visual-studio-2008, variables

我有一个包含 3 个选项卡的表单，用户将在表单上填充下拉菜单，然后按保存。

然后我将字符串写入一个文本文件，每个答案之间都有一个分隔符，除了我在下面所做的之外，还有更好的方法吗？

```
Dim tesstring As String = " test " & _
         Separator & _
         answer1 & _
         Separator & _
         answer2 & _
         Separator & _
         answer 3 & _
         Separator & _
         answer4 & _
         Separator & _
         answer5 & _
         Separator & _
         Combo_BS.SelectedItem.ToString.Substring(0, 6) & _
         Separator & _
         answer6 & _
         Separator & _
         answer7 & _
         Separator & _
         answer8 & _
         Separator & _
         answer9 & _
         Separator & _
         answer10 & _
         Separator & _
         answer11 & _
         Separator & _
         answer12 & _
         Separator & _
         answer13 & _
         Separator & _
         answer14 & _
         Separator & _
         answer15 & _
         Separator & _
         answer16 & _
         Separator & _
         answer17 & _
         Separator & _
         answer18 & _
         vbCrLf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:30:13.100

> 除了我在下面所做的之外，还有更好的方法吗？

是的。创建一个包含所有值的数组，然后使用[`String.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)：

```
Dim tesstring As String = String.Join(Separator, values) & vbCrlf 
```

理想情况下，一开始就没有 18 个不同的`answer`变量——这些变量不能放在一个集合中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:33:19.980

要扩展 Jon 的答案，请创建一个答案集合。例如，如果所有答案都在名为“Panel1”的面板中的文本框中：

```
 Dim answers = From x In Me.Panel1.Controls.OfType(Of TextBox)() Select x.Text
    Dim tesstring As String = String.Join(Separator, answers) 
```

# c - 如何让 libcurl 在每个 http 数据包中发送摘要认证头？

> ID：13759452
> 
> 赞同：2
> 
> 时间：2012-12-07T08:28:52.243
> 
> 标签：c, libcurl

`http_send_message()` 每次我想发送 http 消息时，我都会使用以下功能：

```
http_send_message(char *msg_out, char **msg_in)
{
    CURLcode res;
    CURL *curl;

    curl = curl_easy_init();
    if (!curl) return -1;

    curl_easy_setopt(curl, CURLOPT_URL, "http://192.168.1.133:8080/tawtaw");
    curl_easy_setopt(curl, CURLOPT_USERNAME, "tawtaw");
    curl_easy_setopt(curl, CURLOPT_PASSWORD, "tawtaw");
    curl_easy_setopt(curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC|CURLAUTH_DIGEST);
        .
        .
        .
   curl_easy_cleanup(curl); 
} 
```

但是我在每次函数发送http消息时都注意到，它尝试发送一个没有摘要认证头的请求，然后它发送带有摘要认证头的请求。在正常情况下，它应该只在第一条消息中执行此行为。对于后续消息，它应该记住身份验证标头并在每条消息中发送

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:44:08.113

要获得这样的行为，您需要为后续调用**重新使用 curl 句柄**，以充分利用持久连接和[Digest Access Authentication](http://en.wikipedia.org/wiki/Digest_access_authentication)请求计数器：

> [...]客户端可以发出另一个请求，重用服务器随机数值（服务器只为每个“401”响应发出一个新的随机数），但提供一个新的客户端随机数（cnonce）。对于后续请求，十六进制请求计数器 (nc) 必须大于它使用的最后一个值

在实践中不要清理你的卷曲手柄。而是维护它，并在您需要执行另一个请求时立即：

*   [使用curl_easy_reset](http://curl.haxx.se/libcurl/c/curl_easy_reset.html)函数重置它：`curl_easy_reset(curl);`
*   然后重新设置您的选项。

如果您使用该`CURLOPT_VERBOSE`选项，您将看到对于后续请求，您将有一个`Authorization`请求计数器增加的标头（`nc=00000002`、`nc=00000003`等）。

# html - 如何获取 swf 文件中的总帧数？

> ID：13759459
> 
> 赞同：3
> 
> 时间：2012-12-07T08:29:19.340
> 
> 标签：html, flash, swfobject

> 我将ppt转换为swf格式，所以我需要找到该swf文件中的总帧数，如何得到它？以及如何转到给定 swf 文件的最后一帧？
> 
> 示例：这里我给出了 goto provious 和 next frame 的源代码，但我仍然没有得到第一帧，我怎么能得到它？有什么解决办法指导我...
> 
> **在这里我怎样才能获得总帧数？**请解释一下...提前谢谢..

```
<html>
<head>
<script language="JavaScript">

function getFlashMovieObject(myFlashMovie)
{
if (window.document[myFlashMovie]) 
{
return window.document[myFlashMovie];
}
if (navigator.appName.indexOf("Microsoft Internet")==-1)
{
if (document.embeds && document.embeds[myFlashMovie])
  return document.embeds[myFlashMovie]; 
}
else // if (navigator.appName.indexOf("Microsoft Internet")!=-1)
{
return document.getElementById(movieName);
}
}

//for Previous frame.....
function PrevFrameFlashMovie()
{ 
var flashMovie=getFlashMovieObject("myFlashMovie");
var currentFrame=flashMovie.TGetProperty("/",4);
var nextFrame=parseInt(currentFrame);
var prevfram =nextFrame-4;
flashMovie.GotoFrame(prevfram);
flashMovie.Play();
}

//for Next frame.....
function PlayFlashMovie()
{
var flashMovie=getFlashMovieObject("myFlashMovie");
flashMovie.Play();
//embed.nativeProperty.anotherNativeMethod();
}

</script>
</head>

<body>
<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" WIDTH="595" HEIGHT="460" id="myFlashMovie" style="background:#fff;">
<PARAM NAME=movie VALUE="/file.swf"><PARAM NAME=quality VALUE=autolow >

<EMBED src="/file.swf" quality="autolow" wmode="transparent"  autoplay="false" WIDTH="595" HEIGHT="460" NAME="myFlashMovie" ALIGN="middle" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer" style="background: none repeat scroll 0 0 #FFFFFF;"></EMBED>
<PARAM NAME=wmode VALUE=transparent><param name="allowScriptAccess" value="sameDomain"/>     <param value="false" name="autoplay" /><param name="allowFullScreen" value="True" />

</OBJECT>

<input type="button" onClick="PrevFrameFlashMovie();" value="PreviousFrame" name="Previous"> 

<input type="button" onclick="PlayFlashMovie();" name="Play" value="NextFrame >>"> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:41:18.630

加载 SWF 后，您可以使用 **_totalframes**属性获取 total_no_of_frmaes。

```
var totalFrames=flashMovie._totalframes 
```

# scripting - 从脚本数据源访问 Pentaho 中的参数？

> ID：13759460
> 
> 赞同：3
> 
> 时间：2012-12-07T08:29:20.927
> 
> 标签：scripting, groovy, reporting, parameter-passing, pentaho

我目前正在使用 Pentaho 开发参数化报告。

Pentaho 定义了可以在生成时给出的参数，也可以通过 Pentaho API 由某些外部源插入。

现在问题来了。我在 groovy 中有一个脚本化的数据源，想对其进行一些参数化。我如何/在脚本数据源中*访问*参数（在 pentaho 中定义）的最佳方式是什么？

如果您使用 SQL 数据源，您可以直接说 ${ParamName} 并替换字符串；但是，如果您使用脚本源，这似乎不起作用。

任何和所有的评论都非常受欢迎！

PS 抱歉这个看似微不足道的问题，但我们都知道 pentaho 的记录有多么糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:08:19.430

这些页面中的任何一个都有帮助吗？

[http://www.sherito.org/2011/11/pentaho-reportings-metadata-datasources.html](http://www.sherito.org/2011/11/pentaho-reportings-metadata-datasources.html)

[http://forums.pentaho.com/archive/index.php/t-96689.html](http://forums.pentaho.com/archive/index.php/t-96689.html)

# linker - GNU 链接器和链接器脚本：链接器不生成正确的 LMA

> ID：13759461
> 
> 赞同：1
> 
> 时间：2012-12-07T08:29:22.943
> 
> 标签：linker, overlay, gnu, memory-address, linker-scripts

我的链接器脚本中有以下行

```
JumpTable ABSOLUTE(0x2000000C): AT(eROData)
{
    JumpTableStart = .;
    *(.JumpSection);
    . = ALIGN(4);
    JumpTableEnd = .;
} > SRAM 
```

eROData 是来自闪存的地址，并假定值为 0x1000xxxx

链接后，我注意到链接器将 VMA 和 LMA 都分配给了 JumpTable 部分。这是列表文件中的列表。

```
 2 .rodata       00000004  10001214  10001214  00001214  2**2

              CONTENTS, ALLOC, LOAD, READONLY, DATA

 3 JumpTable     00000140  2000000c  2000000c  00008954  2**2

              CONTENTS, READONLY 
```

.data 部分没有这样的问题。

这是一个已知的 GNU 链接器问题吗？

编辑：我注意到如果在 C 文件中定义了“.JumpSection”部分，则正确分配了 LMA。

我正面临这个问题，因为该部分是在程序集文件中定义的。

你以前遇到过这个问题吗？

编辑 - 解决方案：事实证明 .JumpSection 必须使用正确的属性定义： .section ".JumpSection","ax",%progbits

只有这样，链接器才能正确运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T03:35:05.193

所以这就是我发现的。也许这可以使某人免于数小时令人沮丧的调试。

我的主要问题是有一段汇编代码需要链接到 SRAM 空间并从闪存空间加载。所以 VMA 必须是 SRAM 地址，而 LMA 必须是闪存地址。

过去，对于 ac 文件中定义的函数/数据，我总是成功完成上述操作。我需要做的就是分配一个节属性并适当地修改链接描述文件。

推论 1：链接器允许标准 TEXT 和 DATA 节使用不同的 LMA，尽管它们可能使用节属性以不同的方式命名。

在汇编文件中尝试相同的情况时没有这样的运气。链接器拒绝承认上面定义的输入节 .JumpTable 实际上是用户定义的 TEXT 节。

当时的解决方案是

1.  将汇编代码移动到新文件 JumpTable.S。

2.  将输入部分 .JumpTable 重命名为 .text

3.  修改链接器文件如下

    ```
     .text :

    {

    *(EXCLUDE_FILE(*JumpTable.o) .text); /* Exclude .text of JumpTable.o and place others */

    } > FLASH

    JumpTable ABSOLUTE(0x2000000C) : AT (eROData) /* Link to SRAM and Load after const data */

     {

       JumpTableStart = .;

       *JumpTable.o(.text); /* Place .text of JumpTable.o into JumpTable output section) */

       JumpTableEnd = .;

     } > SRAM 
    ```

也许有更好的解释/另一个根本原因。但这肯定挽救了我的一天。

# c# - 使用 OpenXml SDK 2.0 在 Word 中克隆 ParagraphProperties

> ID：13759469
> 
> 赞同：3
> 
> 时间：2012-12-07T08:29:42.400
> 
> 标签：c#, ms-word, openxml, openxml-sdk

我正在通过 Open XML SDK 2.0 在 Word 文档中以编程方式生成新段落。A 有具有属性的第一段，我想将其附加到所有新生成的段落中。

像这样的东西：

```
var _texts = new List<string>() { "Text 1", "Text 2", "Text 1", "Text 4"};
var sdtBlock = wordDoc.MainDocumentPart.RootElement.Descendants<Paragraph>().First();
foreach (string _t in _texts)
{
    Paragraph p = new Paragraph();
    p.Append(sdtBlock.ParagraphProperties);
    p.Append(new Run(new Text(_t)));
    sdtBlock.InsertAfterSelf<Paragraph>(p);
} 
```

执行此代码会引发异常：“无法插入 OpenXmlElement “newChild”，因为它是树的一部分。” 有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T08:43:59.393

您需要使用该`CloneNode()`方法复制`ParagraphProperties`要添加到新段落中的实例，例如

```
p.Append(sdtBlock.ParagraphProperties.CloneNode(true)); 
```

否则，您将得到您描述的异常（因为您将在同一个文档的两个不同位置添加原始节点，这是不允许的 - 而不是您打算做的）。

# c# - 即使在调用 SatisfyImportOnce - MEF 之后对象仍为空

> ID：13759470
> 
> 赞同：0
> 
> 时间：2012-12-07T08:29:46.110
> 
> 标签：c#, mef

在我的程序中，我在 program.cs 中使用以下语句

```
 Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    var init = new Initializer();
    var container = new CompositionContainer(new DirectoryCatalog(Environment.CurrentDirectory));
    container.ComposeExportedValue(string.Empty);
    container.SatisfyImportsOnce(init);
if (init.PreleminaryCheck())
            {
                Form1 frm = new Form1();
                container.SatisfyImportsOnce(frm);
                Application.Run(frm);
            } 
```

我正在导出如下类

```
[Export(typeof(DatabaseMaster))]
    public class DBManager : DatabaseMaster
[ImportingConstructor]
        public DBManager(string filepath = "")

        {
            DbPath = filepath;
        } 
```

问题是我只在 Initializer 类中初始化变量，在表单类中 DBManager 的实例始终为空。我尝试在 Form1 变量上调用 SatisfyImportOnce 但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:00:36.307

我通过将成员函数调用从构造函数移动到表单加载方法解决了这个问题，

# powershell - 如何在pse脚本中写出txt文件的前两列？

> ID：13759472
> 
> 赞同：0
> 
> 时间：2012-12-07T08:29:58.710
> 
> 标签：powershell

我有一个文本文件，其中包含这样的行：

```
ADUALI 4751 random name
ADWXLI 4757 random name 
```

我需要一个写出文件前两列的脚本。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:44:42.890

单程 ：

```
gc c:\temp\test.txt | %{ $line=$_.split(" ");write-host  $line[0] $line[1]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:22:47.950

其他方式：

```
gc file.txt | Foreach-Object {$_.Split()[0..1]} 
```

# git - 从 UCM ClearCase 迁移到 GIT

> ID：13759478
> 
> 赞同：3
> 
> 时间：2012-12-07T08:30:26.747
> 
> 标签：git, migration, history, clearcase

我正在研究从 UCM ClearCase 迁移到 GIT。最初的意图是迁移所有 cc 分支及其各自的历史记录。

类似的经验、最佳实践、任何提示或建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:50:06.447

最大的建议是在 UCM 组件中对 Git 存储库进行重组。

迁移通常是将（太大）大型 UCM 组件拆分为更精简的 Git 存储库的好机会。
由于 Git 是*分布式*的，因此您需要记住您将克隆*整个*历史记录，因此进行重组很重要。

另一个建议是*不要*导入*所有*历史记录，而是将导入限制在最后一个重要的基线。（并将 ClearCase 保留为只读以供存档）

[您可以在“从 ClearCase 迁移到 Git](https://stackoverflow.com/questions/3510682/moving-from-clearcase-to-git/3511249#3511249) ”中找到其他建议，更多地围绕合并和分支组织的工作流程。

* * *

在工具方面：我还没有找到。

我用：

*   一个动态视图，用于重新定位到我要导出的（完整）基线
*   在动态视图中完成变基后，我会更新快照视图。
*   一个 git repo 工作树，在将视图快照内容复制到其中之前，我将其完全清空
*   一个 git repo 目录 ( `.git`) 分开
*   `--work-tree`引用更新的工作树的git 命令。

我迭代了我需要从 ClearCase/import 导出到 git 的几个基线。

# c# - C# 使用以下方法初始化构造函数：this

> ID：13759479
> 
> 赞同：1
> 
> 时间：2012-12-07T08:30:33.520
> 
> 标签：c#

为什么`this`不接受类类型的参数？我能读到什么？这是我没用的代码

```
using System;

public class Class1
{
  public int a = 5;
}

public class Class2
{
  private readonly int num;
  Class1 obj2 = new Class1();
  public Class2(Class1 obj)
  {
    num = obj.a;
  }
  public Class2(string l) : this (Class1 obj2)
  {

  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:34:04.567

您的构造函数采用 的实例`Class1`，因此您应该使用：

```
public Class2(string l) : this (new Class1())
{
} 
```

您可能还希望将构造函数参数分配给您的`obj2`成员，而不是创建一个新的：

```
public class Class2
{
    private readonly int num;
    Class1 obj2;
    public Class2(Class1 obj)
    {
        this.obj2 = obj;
        num = obj.a;
    }
    public Class2(string l) : this (new Class1()) { }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:35:23.510

首先让我们看一下：

```
public Class2(string l) : this (Class1 obj2) {...} 
```

首先，您没有在调用中包含类型，因此它将是：

```
public Class2(string l) : this (obj2) {...} 
```

但是：此时`obj2` *无效*：构造函数（有点包括字段初始化程序）*尚未运行*，因此`this`（例如`this.obj`）上的字段在该位置是不合法的。正如李所说：只需传入一个`null`或`new`实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:38:11.217

一个类可以继承自另一个类。关键字指的`this`是一个类的实例，而实例在“开发时”不存在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T08:39:23.353

您不能使用它`string`并将其传递给另一个`Class1` 作为参数的构造函数。您需要创建一个`Class1`对象。但是由于这需要一个`int`i 不会使用采用`string`but的构造函数`int`。否则，您将需要使用`int.Parse`可能引发异常的异常构造函数，并且异常构造函数不是好的做法（当它们可以避免时）。

```
public Class2(int i)
    : this(new Class1() { a=i })
{

} 
```

# ruby-on-rails - 导轨超过一个空间

> ID：13759482
> 
> 赞同：1
> 
> 时间：2012-12-07T08:31:08.390
> 
> 标签：ruby-on-rails, string, whitespace

我想用看起来像“我是人类”的rails（Rails 2.3.8 andy jruby 1.6.5.1）从数据库中检索字符串，但在浏览器中它总是看起来像“我是人类”。中间没有多余的空格。我怎样才能保留额外的空格，或者什么是条带化字符串。

操作很简单，只要拉一根绳子就可以看到了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:37:35.650

没有什么可以剥离字符串 - 是 HTML 的语义让您感到困惑。HTML 中的所有连续空格都呈现为单个空格，除非`<pre>`元素或等效的 CSS 规则 ( [white-space](https://developer.mozilla.org/en-US/docs/CSS/white-space) ) 明确阻止。如果您将它们转换为另一种空间，您也可以保留您的空间 - 不间断的空间 ( `&nbsp;`) 不会被折叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:37:34.253

浏览器以这种方式解释通常的空格。一个可以`&nbsp;`用来保持空间。做

```
string_from_db.gsub(' ', '&nbsp;') 
```

或使用`<pre>`标签。

# ios - 使用 FB iOS SDK 向朋友提要发帖时出错

> ID：13759483
> 
> 赞同：3
> 
> 时间：2012-12-07T08:31:13.453
> 
> 标签：ios, facebook, sdk

以前已经问过/回答过某种形式的问题，但我对这个问题仍然很模糊。我正在尝试发布到朋友提要，但在尝试使用 startWithGraphPath：时不断收到“错误 com.facebook.sdk 代码 = 5”错误：来自新的 FB SDK for ios。FBSession 处于活动状态且打开，并且 access_token 似乎是正确的......这是一些代码：

```
 -(void)inviteUser:(NSString *)whoever {
        if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
            // No permissions found in session, so ask for it
            [FBSession.activeSession reauthorizeWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"] defaultAudience:FBSessionDefaultAudienceFriends completionHandler:^(FBSession *session, NSError *error) {
                if (!error){        
                    [self sendInvite:whoever];
                }
            }    
        }];
     }

-(void) sendInvite:(NSString *)whoever {
    NSMutableDictionary *params =
        [NSMutableDictionary dictionaryWithObjectsAndKeys:
        @"A name of something", @"name",
        nil];

    [FBRequestConnection
         startWithGraphPath:[NSString stringWithFormat:@"%@/feed", whoever]
         parameters:params
         HTTPMethod:@"POST"
         completionHandler:^(FBRequestConnection *connection,
                             id result,
                             NSError *error) {
             NSString *alertText;
             if (error) {
                 alertText = [NSString stringWithFormat:
                              @"error: domain = %@, code = %d",
                              error.domain, error.code];
             } else {
                 alertText = @"Posted successfully.";
             }
             // Show the result in an alert
             [[[UIAlertView alloc] initWithTitle:@"Result"
                                         message:alertText
                                        delegate:self
                               cancelButtonTitle:@"OK!"
                               otherButtonTitles:nil]
              show];
         }]; 
```

我还是新手，可能缺少一些基本的东西。但我只是没有看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:19:49.943

解决它。我认为有两个问题：

1.  没有在应用程序内部正确通信会话（即我在 loginController 中打开了 FBSession，但在 sendInvite 控制器中没有打开 <- 显然不是确切的名称）。结果，access_token 实际上没有激活。我应该遵循 FB 文档并将 FBSession 方法放在 appdelegate 中。
2.  当我认为我应该使用“publish_stream”时，我正在使用“publish_action”权限。

与这两个变化顺利工作。不过，我确实有一个后续问题：如何使用新 SDK 的本机共享对话框在别人的墙上发帖？我可能会将此作为一个单独的问题提出。

# r - 如何从运行 Windows 和 R 的笔记本电脑访问 UNIX 服务器上的文件？

> ID：13759487
> 
> 赞同：0
> 
> 时间：2012-12-07T08:31:24.353
> 
> 标签：r, ssh

在工作中，我所有的数据文件都在 UNIX 服务器上。通常我在我的 Windows 笔记本电脑上使用 SSH 客户端（例如 PUTTY）先将数据文件从 UNIX 服务器传输到我的笔记本电脑，然后在本地运行 R 进行分析。

问题是是否可以使用 R 直接访问 UNIX 服务器上的文件。我知道 R 可以转到 URL 并获取数据。我可以对我的 UNIX 服务器做同样的事情吗？如果是怎么办？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:34:11.097

您可以在 Unix/Linux 服务器上安装 Samba 并将其挂载为标准 Windows 共享。

您也可以使用 WinSCP 之类的软件来提供类似虚拟资源管理器的视图，但这不会是真正的文件访问 - 至少 R 将无法使用它。

还有[sshfs](http://code.google.com/p/win-sshfs)应该能够在 ssh 上提供真正的挂载，但坦率地说，我没有太多运气试图让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:07:57.223

另一种选择可能是在服务器上安装 RStudio Server。这样，您可以在 Windows 机器上的 Web 浏览器中运行 RStudio。R 比在服务器上运行。这当然只有在您对服务器具有 root 访问权限或可以说服管理员时才有效。

或者，您可以使用`rsync`定期与服务器同步一组文件。对于`rsync`在 Windows 下使用，您可以查看 MinGW 或 Cygwin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:01:42.863

You can use RCurl with OpenSSL for Windows..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:07:25.447

您可以使用`Putty`to`ssh`到您的 UNIX 服务器，打开`terminal`或`emacs`( `ESS`)，打开`R`以进行任何分析。我猜你的 UNIX 服务器应该已经`R`安装好了。

# linux - list_for_each_entry 不起作用

> ID：13759488
> 
> 赞同：0
> 
> 时间：2012-12-07T08:31:27.640
> 
> 标签：linux, module, linux-kernel, linux-device-driver, kernel-module

我写了一个关于以**pri**作为头节点的链接列表的模块。最初是空的。

在 pri_init() 中，我将 3 个节点插入到列表中，并为每个节点分配值。最后，我想使用**list_for_each_entry**来迭代列表并打印出节点的值。

*但实际上，它只是在 pri_init()中的**list_for_each_entry{...}中***只打印了 1 个随机值。**

 **相反，如果我* *在***for() 循环中使用****container_of** *来迭代列表，结果是正确的。*

 ****谁能告诉我为什么？非常感谢。

```
#include <linux/init.h>
#include <linux/module.h>
#include <linux/slab.h>
#include <linux/errno.h>
#include <asm/uaccess.h>
#include <linux/list.h>  
#include <linux/types.h>
#include <linux/kernel.h>
#include <linux/sched.h>

MODULE_LICENSE("GPL");

struct pri_listitem
{
    int v;
    struct list_head list;   
};

LIST_HEAD(pri);

void pri_exit(void)
{
    struct pri_listitem *list_p, *next;
    list_for_each_entry_safe(list_p, next, &pri, list)
    {
        list_del(&list_p->list);
        kfree(list_p);
    }
    printk(KERN_ALERT "***** device pri exit() ***** \n");
}

int pri_init(void)
{
    int i;
    struct pri_listitem *list_p;

    printk(KERN_ALERT "***** device pri init() ***** \n");
    // Inserting 3 nodes
    for(i=1; i<=3; ++i)
    {
            list_p = kmalloc(sizeof(struct pri_listitem),GFP_KERNEL);
            if(!list_p)
            {
                printk(KERN_DEBUG "Error: alloction memory for list_p\n");
                return -ENOMEM;
            }
            memset(list_p, 0, sizeof(struct pri_listitem));
            list_p->v = i;
            list_add(&(list_p->list), &pri);
    }

   printk(KERN_DEBUG "value of the 3 nodes:\n");
   list_for_each_entry(list_p, &pri, list);
   {
           printk(KERN_DEBUG "%d\n",list_p->v);  // print nodes' value
   } 
   return 0;
}

module_init(pri_init);
module_exit(pri_exit); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:40:31.903

您只是在每个条目的列表末尾有一个分号，这意味着您的位置被设置为内存中的垃圾值（不是真正的垃圾，只是内存中分配的 list_head pri 结构后面的偏移量）因此您获得随机值取消引用（您不幸地落在了您可以访问的内存中，因此有时很难发现错误。）循环中的单次运行应该已经提示您，因为 list_for_each_entry 的以下部分只是作为范围块执行。*****

# php - 使用 PHP 枚举 AD 域

> ID：13759495
> 
> 赞同：0
> 
> 时间：2012-12-07T08:32:03.053
> 
> 标签：php, active-directory, trust

我们有一个附加了 80 多个其他“受信任”域的域。这意味着我们的一些组是交叉链接的，与来自一个域的用户，在另一个域的组中，等等。我编写了一个脚本，它从一个域上的一组特定组创建用户列表，但有些他们来自其他域，所以我只得到了外国标识符。我需要将此链接到其他域，但我需要每个域的 SID。

是否有与 Win32 的*DsEnumerateDomainTrusts*等效的 PHP ？我不想手动写出所有 SID，然后在添加新域或删除旧域时手动更新它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:31:43.153

您可以对域的 System 容器中的[trustedDomain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683977%28v=vs.85%29.aspx)对象执行 LDAP 查询。对我来说，域的 sid 在`securityIdentifier`属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T14:03:55.537

这是我的解决方案：

```
function ldap_sidconvert($ldapbytes)
{
    $d_proc=unpack("H*",$ldapbytes);
    $d_proc['hex1']=str_split(substr($d_proc[1],-24),2);
    foreach ($d_proc['hex1'] as $key=>$value)
    {
        $d_proc['hex2'][floor($key/4)][]=$value;
    }
    foreach ($d_proc['hex2'] as $key=>$value)
    {
        $d_proc['hex3'][$key]=hexdec(implode(array_reverse($d_proc['hex2'][$key],FALSE)));
    }
    return implode("-",$d_proc['hex3']);
} 
```

然后您可以通过将 securityidentifier 字段的值传递给它来调用它：

```
ldap_sidconvert($domains[0]['securityidentifier'][0]) 
```

在此示例中，它只是查看列表中的第一个域，根据需要将第一个 0 替换为 1,2,3... 等。这只转换最后 24 个十六进制数字，我不确定如何处理前 24 个，但我相信它们无论如何都不是唯一的，所以它们不应该是必需的。

这可能不是最好的方法，所以我很高兴接受对我的编码的批评，但希望它会在未来对某人有所帮助。

这可能是一个有用的参考：[http ://en.wikipedia.org/wiki/Security_Identifier#Machine_SIDs](http://en.wikipedia.org/wiki/Security_Identifier#Machine_SIDs)

# php - 使用 Symfony2 身份验证存储多个对象

> ID：13759496
> 
> 赞同：0
> 
> 时间：2012-12-07T08:32:07.260
> 
> 标签：php, symfony

我在数据库中有这些表：

```
user:
- email
- lastname
- firstname
- password

userType1:
- fkUser
- specialCol1
- specialCol2

userType2:
- fkUser
- specialCol1
- specialCol2 
```

我已经让 Symfony2 身份验证服务与`user`表一起工作，但我想在会话中（或在其他由身份验证管理的地方）存储关联的对象：`userType1`或`userType2`.

此外，我想根据用户的类型将用户重定向到其帐户。

所以我的问题：

提交认证表后如何处理？（以确定它是哪种类型的用户）

如何告诉 Symfony 在身份验证上下文中管理其他对象（用户类型）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:50:35.980

查看食谱条目[如何从数据库加载安全用户](http://symfony.com/doc/current/cookbook/security/entity_provider.html#authenticating-someone-with-a-custom-entity-provider)。“使用自定义实体提供程序对某人进行身份验证”和“管理数据库中的角色”部分可能会有所帮助。

在需要用户及其租户成员身份的身份验证过程中，我遇到了类似的问题。我构建了一个自定义提供程序，它基本上看起来像食谱中的那个。序列化用户时，我只使用某些字段（id、用户名、电子邮件），其余数据通过提供程序获取`refreshUser()`，而用户及其关系再次通过 QueryBuilder 获取。我遇到的问题是，在会话中序列化用户时，关系会“丢失”，否则我必须一直重新获取用户。

之后基本上就是@BenjaminPaap 写的。您[按照文档中的描述](http://symfony.com/doc/current/book/security.html#retrieving-the-user-object)检索用户并获取用户类型等。

如果您想根据用户类型将用户重定向到某个目标，您可能需要查看“[如何创建自定义 UserProvider](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html) ”。[侦听器](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html#the-listener)提供了您在登录后立即根据用户类型重定向用户所需的一切。

# ruby-on-rails-3 - 如何创建具有多语言支持的表单（国际化）

> ID：13759500
> 
> 赞同：2
> 
> 时间：2012-12-07T08:32:27.040
> 
> 标签：ruby-on-rails-3, internationalization, formtastic, dropdownbox

我需要使用国际化为单个表单设置两种语言。

这是建议的表单页面

```
<%= semantic_form_for @detail do |f| %>
    <%= f.inputs do %>
    <%= f.input :name %>
    <%= f.input :dob  %> 
    <%= f.input :gender, :as => :radio, :label => "Gender", :collection => [["Male", 'male'], ["Female", 'female']] %>  
  <% end %>
  <%= f.actions do %>
    <%= f.action :submit, :as => :input %>
  <% end %>
<% end %> 
```

这是 wk.yml 文件

```
wk: 
formtastic:
    labels:
      detail:
        dob: "Data of birtha"
        name: "Youre Nama"
        gender: "Gendera"" 
```

这是 en.yml 文件

```
en: 
  formtastic:
    labels:
      detail:
        dob: "Date of Birth"
        name: "Your Name"
        gender: "gender" 
```

我在 formtastic.rb 初始化程序中添加了 Formtastic::SemanticFormBuilder.i18n_lookups_by_default = true 。

我成功使用了 en.yml。

我需要从“en”切换到“wk”和虎钳。

如何通过下拉框实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:44:00.460

这与 formstatic 无关，而是与您的 rails 代码有关。

为了切换到 wk，您所要做的就是

[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

```
I18n.locale = :wk 
```

为了让您的客户为网站选择他的语言，可能从以下链接开始：http: [//guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

如果您只想在用户操作中以不同语言更新表单（而不是网站的其余部分），例如从选择框中选择语言，您可以在选择框上使用 ajax 侦听器，这可能需要一些东西像“http://www.yourwebsite.com/:locale/form/new”，它将以 ajax 动作回答，并用所选语言替换您的表单（等等：locale，您将传递选择框的值语言）。

# java-me - 尝试在诺基亚 C3 上播放音频，结果：无法获取媒体数据

> ID：13759501
> 
> 赞同：0
> 
> 时间：2012-12-07T08:32:30.787
> 
> 标签：java-me, nokia, mmapi

我目前正在开发一个使用 Manager.createPlayer(InputStream is, String mimeType) 创建音频播放器的项目。

音频播放器在模拟器上完美运行。在诺基亚 C3 上，它能够在应用程序启动后播放音频/mpeg 曲目，但在尝试再次播放相同/其他音频时失败。在预取消息时，会捕获“未能获取媒体数据”。

第一次打开播放器时，它会经历正常的生命周期：实现、预取、启动。轨道完成后是：stopped,deallocated,closed。在对另一个音轨重复该过程之前，甚至将播放器设置为 null。

有任何想法吗？

这是用于创建播放器的代码示例。

```
 public static Player play(PlayerListener listener, InputStream is, String[] mimeTypes) {
    Player player = null;
    for (int i = 0; i < mimeTypes.length; i++) {    
        try {
            player = Manager.createPlayer(is, mimeTypes[i]);
            player.realize();
            player.prefetch();  
            player.addPlayerListener(listener);
            player.start();
            Log.write("started - " + mimeTypes[i]);
            break;
        } catch (Exception e) {
            Log.write("player fail (" + mimeTypes[i] + "): " + e.getMessage());
            player = null;
        } catch (Throwable e) {
            Log.write("player fail (" + mimeTypes[i] + "): " + e.getMessage());
            player = null;
        } 
    }
    return player;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:21:03.630

似乎答案是我尝试播放的 MP3 的文件大小太大。通过减小尺寸，问题自行解决。

从 2MB 到 150kb。

如果有人能解释为什么会发生这种情况，将不胜感激。

# jquery - jquery隐藏从数据库调用的标签和文本

> ID：13759511
> 
> 赞同：0
> 
> 时间：2012-12-07T08:33:51.823
> 
> 标签：jquery, ruby-on-rails-3

我有一个关于隐藏选择后从数据库中显示的标签和数据的问题。因为在我的表中，我有很多列，所以如果我全部调用它们，它将是很多空数据。为了避免空数据，我想在显示数据时隐藏它们。

**显示.html.erb**

```
<p>
  <b>Category:</b>
  <%= @combine.master.category if @combine.master %>
</p>

<p id="type">
  <b>Type:</b>
  <%= @combine.type %>
</p>

<p id="project">
  <b>Project name:</b>
  <%= @combine.project_name %>
</p>

<p id="unit">
  <b>Unit no:</b>
  <%= @combine.unit_no %>
</p>

<p id="block">
  <b>Block no:</b>
  <%= @combine.block_no %>
</p>

<p>
  <b>Road name:</b>
  <%= @combine.road_name %>
</p>

<p>
  <b>Level:</b>
  <%= @combine.level %>
</p>

<p>
  <b>Facing:</b>
  <%= @combine.facing %>
</p>

<p>
  <b id="tc">Size:</b>
  <%= @combine.size %>
</p>

<p id="value">
  <b>Value:</b>
  <%= @combine.value %>
</p>

<p id="match">
  <b>Match bank:</b>
  <%= @combine.match_bank %>
</p>

<p>
  <b>Asking:</b>
  <%= @combine.asking %>
</p> 
```

**jQuery**

```
$(document).ready(function(){
    if ($("#combine_category_id").val() == 1){
        $("#type").hide();
        $("#block").show();
        $("#level").show();
        $("#tc").text('Size');
        $("#value").hide();
        $("#project").show();
        $("#unit").hide();
        $("#match").show();
    }
        else if ($("#combine_category_id").val() == 3){
        $("#type").hide();
        $("#block").hide();
        $("#road").show();
        $("#level").hide();
        $("#facing").show();
        $("#size").show();
        $("#tc").text('Land size');
        $("#value").hide();
        $("#asking").show();
        $("#project").hide();
        $("#unit").show();
        $("#match").show();
    }
        else if ($("#combine_category_id").val() == 2){
        $("#type").show();
        $("#block").show();
        $("#road").show();
        $("#level").show();
        $("#facing").show();
        $("#size").show();
        $("#tc").text('Size');
        $("#value").show();
        $("#asking").show();
        $("#project").hide();
        $("#unit").hide();
        $("#match").hide();
    }
 }); 
```

希望有人能帮我解决这个问题
非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:39:39.220

你真的需要javascript吗？

怎么样做类似的事情：

```
<%- unless @combine.type.blank? %>
  <p>
    <b>Type:</b>
    <%= @combine.type %>
  </p>
<%- end %> 
```

其他领域的等等？您还可以编写迭代以避免编写重复代码：

```
<%- %w(type project unit block road_lavel name facing).each do |col| %>
  <%- unless @combine.send(col).blank? %>
    <p>
      <b><%= col.humanize %>:</b>
      <%= @combine.send(col) %>
    </p>
  <%- end %>
<%- end %> 
```

或者将该代码也放在帮助程序中

# heroku - heroku rake:db 命令错误未定义的方法任务'

> ID：13759515
> 
> 赞同：2
> 
> 时间：2012-12-07T08:34:04.770
> 
> 标签：heroku

我尝试 heroku run bundle exec rake db:create --trace

并且有错误

```
 rake aborted!
    undefined method task' for #<CertApp::Application:0x00000002ad5488>
    /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:215:i
    ninitialize_tasks'
    /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:139:i
    n load_tasks'
    /app/vendor/bundle/ruby/1.9.1/gems/railties-3.0.7/lib/rails/application.rb:77:in
    method_missing'
    /app/Rakefile:8:in <top (required)>'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/rake_module.rb:25:inlo
    ad'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/rake_module.rb:25:in lo
    ad_rakefile'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:581:inr
    aw_load_rakefile'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:87:in bl
    ock in load_rakefile'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:158:ins
    tandard_exception_handling'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:86:in lo
    ad_rakefile'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:70:inbl
    ock in run'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:158:in s
    tandard_exception_handling'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/application.rb:68:inru
    n'
    /app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/bin/rake:37:in `'

    /app/vendor/bundle/ruby/1.9.1/bin/rake:19:in load'
    /app/vendor/bundle/ruby/1.9.1/bin/rake:19:in'

in gemfile 

gem 'rake', '0.8.7' 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:15:52.397

你不需要在 Heroku 上创建数据库，它已经存在了。作为部署过程的一部分，他们为您编写 database.yml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:23:57.113

答案采取2：

我知道你的 gemfile 说 0.8.7，但这条线`/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake/rake_module.rb:25:inload'`来自你的机器，而不是 Heroku。这意味着您在某处有 rake 10.0.2。

我们应该能够通过运行避免使用 10.0.2，`heroku bundle exec rake db:migrate`这应该会强制使用 0.8.7，但我宁愿完全卸载 10.0.2，这样你就可以运行`heroku rake db:migrate`

所以，让我们确保您只使用 rake 0.8.7。按顺序尝试这些事情：

1.  从 gemfile 中删除 rake 行。保存。关闭它。
2.  卸载 rake：（`gem uninstall rake`或者`gem uninstall rake -v 10.0.2`如果第一个不起作用）
3.  运行捆绑安装和捆绑更新
4.  重新安装 rake 0.8.7：重新添加`gem 'rake', '0.8.7'`到您的 gemfile。
5.  再次运行捆绑安装
6.  跑`heroku bundle exec rake db:migrate`

并交叉你的手指，因为我正在推动我在这方面的知识极限。

# login - 安全登录+加盐密码存储

> ID：13759519
> 
> 赞同：1
> 
> 时间：2012-12-07T08:34:20.573
> 
> 标签：login, web, cryptography, authorization

1.  我想要一个安全的登录过程，其中登录数据被加密。
2.  防止登录表单的重放攻击。
3.  同时，我希望密码被加密，没有人可以解密它们。

1.我可以对表单数据进行MD5。

对于 2\. 我可以生成一个随机数并将其与客户端密码一起散列。

对于 3\. 我可以使用存储在 DB 中的 salt 并在 DB 中仅保存 MD5(password|salt)

现在问题来了，对于 1 和 2，我将发送 MD5(password|nonce) 到服务器，但我无法授权它，因为我没有用于检查的原始密码。

我可以同时归档 1,2,3 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:38:30.183

对于 1\. 和 2\. 使用 HTTPS (SSL)。它可以防止主动和被动攻击，重放，保持密码机密。

对于 3，使用专门的密码哈希和每个用户的盐。标准选择是 scrypt、bcrypt 和 PBKDF2。对细节做一些研究，我们在这里和安全方面有很多相关的问题。东南。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T11:39:10.973

对于传输安全，请使用 SSL/TLS。对于重放保护，请使用 CSRF 令牌。对于安全密码存储，使用[类似这样的键控哈希。](http://fatfredyy.blogspot.com/2012/12/secure-password-storage.html)

**编辑：**提出的方案并非不安全，您可以[在 security.se 的这篇文章中了解更多关于这个想法的信息](https://security.stackexchange.com/a/3289/11283)

# sql - 如何在 Magento 中执行 mysql_fetch_array

> ID：13759522
> 
> 赞同：-3
> 
> 时间：2012-12-07T08:34:41.390
> 
> 标签：sql, magento

我想使用 Magento 模块创建一个下拉选项，该模块从我创建的数据库中填充数据。

以前，我在我的 IndexController.php 中有这段代码，它是有效的。这是第一个代码。

```
public function dropdownAction() {

if (file_exists('./app/etc/local.xml')) {

$xml = simplexml_load_file('./app/etc/local.xml');

$tblprefix = $xml->global->resources->db->table_prefix;
$dbhost = $xml->global->resources->default_setup->connection->host;
$dbuser = $xml->global->resources->default_setup->connection->username;
$dbpass = $xml->global->resources->default_setup->connection->password;
$dbname = $xml->global->resources->default_setup->connection->dbname;

}

else {
exit('Failed to open ./app/etc/local.xml');
}

$link = mysql_connect($dbhost,$dbuser,$dbpass);
mysql_select_db($dbname) or die("Unable to select database");

$tblname = $tblprefix.'my_db_table';

    $result = mysql_query("SELECT dropdowndata FROM ".$tblname."");

            echo '<select>';
                while ($ary = mysql_fetch_array($result)){
                    echo "<option>" . $ary['dropdowndata '] . "</option>";
                    }
                echo "</select>";

    mysql_close($link);

} 
```

但我认为上面的代码不是 Magento 的方式。你同意吗？

现在，我想用 IndexController.php 中的代码填充数据。这是第二个代码。

```
public function dropdownAction() {
    $options= Mage::getModel('my/model')->getCollection();
    foreach($options as $option){
        $optionData = $option->getDropdowndata ();
        echo "<select>";
        echo "<option>" .$optionData."</option>";
        echo "</select>";

    }
} 
```

使用上面的代码，数据被填充，但一个数据只有一个下拉选项。所以浏览器上出现了很多下拉选项，每个下拉选项将只包含一个数据。

我想我错过了`while ($ary = mysql_fetch_array($result))`. 但我很困惑如何包含该代码？

所以，我的问题是如何在 Magento 中做 mysql_fetch_array ？或者有人可以解释一下如何使上面的第二个代码像第一个代码一样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:40:46.023

为什么你在 foreach 中有选择？我认为这样的事情会解决你的问题：

```
public function dropdownAction() {
    $options= Mage::getModel('my/model')->getCollection();
    echo "<select>";
    foreach($options as $option){
        $optionData = $option->getDropdowndata ();
        echo "<option>" .$optionData."</option>";
    }
    echo "</select>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:41:25.293

getData() 函数返回整个数据的数组，当然需要将“选择”节点移出 foreach

```
 echo "<select>";
    foreach($options as $option){
            $optionData = $option->getData();
            echo "<option>" .$optionData['somekey'] ."</option>";
        }
    echo "</select>"; 
```

但我认为最好使用 magento 魔术函数，例如，如果您在 DB 中有“entity_id”列，则可以使用 $option->getEntityId() 等获得价值……

# sharepoint - 使用客户端对象模型创建 Sharepoint 发布站点

> ID：13759524
> 
> 赞同：0
> 
> 时间：2012-12-07T08:35:03.400
> 
> 标签：sharepoint

我想使用客户端对象模型创建 SharePoint 发布页面，以便我可以手动设置页面布局。

基本上我想知道有什么方法可以像我们在基于服务器的编程中那样工作。

```
 PageLayout[] pageLayouts = publishingWeb.GetAvailablePageLayouts(); 
   PublishingPageCollection pages = publishingWeb.GetPublishingPages();
   PublishingPage newPage = pages.Add(pageName, currPageLayout);
   newPage.ListItem.Update(); 
```

# c++ - 写入文件过程崩溃！关闭

> ID：13759528
> 
> 赞同：1
> 
> 时间：2012-12-07T08:35:30.437
> 
> 标签：c++, visual-c++, crash, cocos2d-x

我编写了一个必须将二维数组写入文件的过程。这是代码：

```
void Level::loadLevel(){
    int levelmap[15][9];
    FILE *fp = fopen("resources/lvls/loc1.map", "wb");  
    for (int i=0;i<=15;i++){
        for(int j=0;j<=9;j++){
            levelmap[i][j]=i+j;
            }
    }
    char asd[255];

    for (int i=0;i<=15;i++){
        for(int j=0;j<=9;j++){
            char *buffer=itoa(levelmap[i][j],asd,1);
            fwrite(buffer,2,sizeof(buffer),fp);
            };
        };
    fclose(fp);
 } 
```

它正在编译，但在调用此功能应用程序时崩溃。我称它为`menu_selector`cocs2d-x 菜单项的属性。为什么会崩溃？

更新：更改为文件流广告效果很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:54:50.047

不仅是上面提到的错误...

1.  确保您的文件夹“resources/lvls/”确实存在。fopen 不创建文件夹！

2.  itoa 的第三个参数 - 基数（值的基数；必须在**2–36 范围内**。）

3.  你真的想把它写成二进制格式的字符串表示吗？打开二进制输出文件意味着您将在那里写入原始数据。您可以使用下一个代码将 int 数组保存到/从文件中加载：

'

```
void saveLevel()
{
    int levelmap[15][9];
    FILE *fp = fopen("loc1.map", "wb");  
    for (int i=0;i<15;i++){
        for(int j=0;j<9;j++){
            levelmap[i][j]=i+j;
        }
    }

    for (int i=0;i<15;i++){
        fwrite(levelmap[i], sizeof(int), _countof(levelmap[i]), fp);
    };

    fclose(fp);
}

void loadLevel()
{
    int levelmap[15][9];

    FILE *fp = fopen("loc1.map", "rb");  

    for (int i=0;i<15;i++){
        fread(levelmap[i], sizeof(int), _countof(levelmap[i]), fp);
    };
    fclose(fp);

} 
```

'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:41:36.020

您在几个地方超出了数组边界，因此您正在破坏内存。例如：

```
int levelmap[15][9];
//           ^^  ^

// ...

for (int i=0;i<=15;i++){
    //        ^^^^
    for(int j=0;j<=9;j++){
                 ^^^
        levelmap[i][j]=i+j;
    }
} 
```

`<=`在循环条件中使用`for`数组索引是一个危险信号。这样做几乎总是错误的，所以每当你看到代码时都要仔细检查它。

还：

```
char *buffer= /* ... */;
// ...
fwrite(buffer,2,sizeof(buffer),fp); 
```

不会像您认为的那样做，因为`sizeof(buffer)`指针的大小与缓冲区中的字符数无关。为什么你将`2`元素的大小传递给`fwrite()`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:25:40.417

```
char *buffer=itoa(levelmap[i][j],asd,1); 
```

itoa 的最后一个参数是 base。它应该是 10 而不是 1（参见[http://www.cplusplus.com/reference/cstdlib/itoa/](http://www.cplusplus.com/reference/cstdlib/itoa/)）

* * *

```
void Level::loadLevel(){
    int levelmap[15][9];
    FILE *fp = fopen("resources/lvls/loc1.map", "wb");  
    for (int i=0;i<=15;i++){
        for(int j=0;j<=9;j++){
            levelmap[i][j]=i+j;
            }
    } 
```

如果 i == 15 和 j == 9，则超出数组的边界（levelmap[15][9] 表示 levelmap[0..14][0..8]）

将循环中的条件更改为 i < 15 和 j < 9。

# php - ToroPHP 路由 - 使用子项重写 URL

> ID：13759529
> 
> 赞同：0
> 
> 时间：2012-12-07T08:35:34.097
> 
> 标签：php, class, function, routing

我正在使用 PHP 和[ToroPHP](https://github.com/anandkunal/ToroPHP/blob/master/README.md)进行路由。

**未知数量的子页面**

它工作得很好，但在我的情况下，我可以添加带有孩子和父母的页面，其中父母可以有未知数量的有子页面。

**在 ToroPHP 中，它可能如下所示：**

```
// My Path: http://www.test.com/product/house/room/table/leg/color/

Toro::serve(array(
    "/" => "Home",
    "/:string/:string/:string/:string/:string/:string/" => "Page"
));

class Page {
    function get($slug, $slug2, $slug3, $slug4, $slug5, $slug6) {
        echo "First slug: $slug";
    }
} 
```

**问题**

1.  我可以弄清楚最大深度可以是多少，然后循环并附加一个包含“/：string”参数的字符串，但它看起来不太好。

2.  Page-class 中的 get 函数采用未知数量的 in 参数。我可以从函数外部计算最大深度，但我需要函数知道要取多少值。

**问题**

1.  有没有其他方法解决问题1？也许是一些正则表达式？
2.  如何使函数采用未知数量的 in 参数？
3.  也许我试图以错误的方式解决这个问题，前两个问题不相关？如果是这样，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:54:25.210

为了让您的操作接收所有参数，您需要在您的正则表达式中捕获它们。您可以使用括号捕获正则表达式中的值。`:string`只是`([a-zA-Z]+)`. 您可以在第一段之后应用通配符，如下所示：

```
"/product/(.*?)" => "Page" 
```

但是，这意味着您需要在您的操作中自己解析 URL，这也不是很干净。

如果你想让这个特殊情况更干净，一个选项是使用[str_repeat](http://php.net/str_repeat)：

```
Toro::serve(array(
    "/" => "Home",
    "/" . str_repeat(":string/", 6) => "Page"
)); 
```

ToroPHP 是一个非常简单的库，它不应该那么难分叉并随心所欲地弯曲它。理想情况下，您希望如何定义这样的路线？也许像这样的路线`/:string*6`？

* * *

您始终可以将比定义的参数更多或更少的参数传递给 PHP 函数。使用[func_get_args](http://php.net/func_get_args)获取所有传递的参数，使用[func_num_args](http://php.net/manual/en/function.func-num-args.php)获取传递的参数个数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:42:34.540

在回答问题 2 时，您是否可以将 GET 参数格式化为数组，然后传入数组而不是单个值？

也许像：

```
$allSlugs = array($slug, $slug2, $slug3, $slug4, $slug5, $slug6);

// Pass $allSlugs into your instance of Page::get($allSlugs);

class Page {
    function get($getValues) {
        echo isset($getValues[0]) ? "First slug: ".$getValues[0] : '';
    }
} 
```

# perl - GTK2 Perl：从表中删除/隐藏一行（TreeViewColumn）

> ID：13759533
> 
> 赞同：-1
> 
> 时间：2012-12-07T08:35:53.087
> 
> 标签：perl, user-interface, treeview, gtk2

我正在 gtk2 perl 上编写一个 GUI 应用程序。当用户单击复选框时，有一个表显示数据库中的行。当他再次单击它时，必须隐藏具有定义列值的行。

我有这个代码：

```
# ListStore to stores model
my $list_store = Gtk2::ListStore->new(("Glib::String") x 3);

my $rows = &get_row($st); # arrayref on rows from a db

sub set_columns {
    my ($store, $rows) = @_;

    foreach my $row (@$rows) {
        my ($num, $name, $status) = @$row;
        $store->set($store->append,
            0 => $num,
            1 => $name,
            2 => $status,
        );
    }
}   # ----------  end of subroutine set_columns  ----------

...

sub show_columns {
    my ($names) = @_;                        # reference to @name_columns
    my $i = 0;                               # number of columns within ListStore
    foreach (@$names) {
        # TreeViewColumn is a column for TreeView
        my $col = Gtk2::TreeViewColumn->new;
        $col->set_title($_);
            $col->set_alignment(0.5);            # alignment of header
            $col->set_clickable(1);              # can click on header

        $tree_view->append_column($col);

        my $rend = Gtk2::CellRendererText->new;
        $col->pack_start($rend, TRUE);

        # Link column of TreeViewColumn's renderer to column of ListStore
        $col->add_attribute($rend, 'text', $i++);
    }
}

...

my @name_columns = qw(№ Name Status);

&set_columns($store, $rows);
&show_columns(\@name_columns); 
```

我有一个复选框：

```
$ch->signal_connect(toggled => sub {
    my $self = shift;
    if ($self->get_active) {
        print "Yes\n";
                my $st = 'Good';       # status 
        &global_view($list_store, $st);  # function which call set and show_columns
    } else { 
        print "No\n";
                # TO-DO here!!!!!
    }
}); 
```

那么，我如何从 TreeViewColumn 隐藏具有定义 $st(status) 的行，以便在用户再次单击复选框时隐藏它们（停用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:39:39.277

我已经解决了这个问题！我使用这段代码：

```
sub remove_item {
    my ($st)= @_;
    my $it = $list_store->get_iter_first;
    while ($it) {
        if ($list_store->iter_is_valid($it) && $list_store->get($it, 3) eq $st) {
            my $tmp = $it;  # temporary iter for row delete
            print "Good\n";
            $it = $list_store->iter_next($it);
            $list_store->remove($tmp);
        } else {
            print "Bad\n";          
            $it = $list_store->iter_next($it);      
        }
    }   

}   # ----------  end of subroutine remove_item  ---------- 
```

# c# - 从类型创建类实例

> ID：13759538
> 
> 赞同：2
> 
> 时间：2012-12-07T08:36:11.723
> 
> 标签：c#, winforms, reflection, activator

我正在尝试创建一个可以以通用方式添加到列表中的类的实例..

我知道`type`需要制作的类，并且我已经能够`object`使用下面的代码制作类，但我还没有找到一种方法来创建允许我将其添加到列表中的演员表.. 任何想法？

T 与 objType 相同

```
public static List<T> LoadList(string fileName, Type objType)
{
    List<T> objList = new List<T>();
    object o = Activator.CreateInstance(objType);
    objList.Add((**o.GetType()**)o);
    return objList;
} 
```

如果有更好的方法来做这件事，我对想法持开放态度:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T08:37:41.920

只需使用非通用 API：

```
((IList)objList).Add(o); 
```

我还假设这`type`是一个通用类型参数；只是说：`type`对此感到困惑；`T`或者`TSomethingSpecific`会更惯用。

另外：这条线需要修复：

```
List<type> objList = new List<type>(); // <=== not new List<Object> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:45:46.907

鉴于这`<type>`与 相同`objType`，我建议放弃反射并使用[where T : new() 类型约束](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)：

```
public static List<T> LoadList(string fileName) 
    where T : new()
{
    List<T> objList = new List<T>();
    objList.add(new T());
    return objList;
} 
```

**编辑：**

如果`objType`是 的子类`T`，那么我认为这些方面的东西应该可以工作：

```
public static List<TListType, T> LoadList(string fileName)
    where T : TListType, new()
{
    List<TListType> objList = new List<TListType>();
    objList.add(new T());
    return objList;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T09:35:09.147

您可以使用带有约束的 Zach Johnson 的建议，`where`因为它消除了类型的重复规范。但是，如果签名是一成不变的，您可以通过简单的`as`演员表来解决，例如：

```
public List<T> LoadList<T>(Type objType) where T : class
{
  List<T> objList = new List<T>();
  T item = (Activator.CreateInstance(objType) as T);
  objList.Add(item);
  return objList;
} 
```

这也需要 where 限制，因为要转换为类型，该类型必须是引用类型（又名类）。

# java - 合并排序字符串方法java

> ID：13759539
> 
> 赞同：1
> 
> 时间：2012-12-07T08:36:22.543
> 
> 标签：java, static-methods, mergesort

我需要帮助将合并排序与字符串数组一起使用。我已经看到了很多使用 int 数组的示例，但我需要使用字符串数组的帮助。我只能使用 .compareTo() 方法。这是我的主要方法：

```
public static void main(String[] args) {
    Scanner keyboard = new Scanner(System.in);

    String[] nameList = {"John", "Mark", "Amber", "Tony", "Matt", "George", 
    "Will", "Bob", "Paul", "Mary Ellen", "Kate", "Joe", "Fred", "Joe", 
    "Anne", "Amber", "Kimberly", "Kelsey", "Matthew"};

    //print original
    System.out.println("Before sorting the names: ");
    for(String element: nameList)
    System.out.print(element + " ");
    System.out.println("\n");
    //Merge Sort
    System.out.println("After sorting the names: ");
    mergesort(nameList, 0, nameList.length);

} 
```

这些是我的方法：

```
private static void merge(String[] data, int first, int n1, int n2) {
    String[] temp = new String[n1 + n2];
    int copied = 0;
    int copied1 = 0;
    int copied2 = 0;

    while((copied1 < n1) && (copied2 < n2)) {
        if(data[first + copied].compareTo(data[first + n1 + copied2]) < 0)
            temp[copied++] = data[first + (copied1++)];
        else
            temp[copied++] = data[first + n1 +(copied2++)];
    }

    while(copied1 < n1)
        temp[copied++] = data[first + (copied1++)];

    for(int i = 0; i < copied; i++)
        data[first +i] = temp[i];

}

public static void mergesort(String[] data, int first, int n) {
    int n1 = 0;
    int n2 = 0;

    if(n > 1) {
        n1 = n/2;
        n2 = n-n1;

        mergesort(data, first, n1);
        mergesort(data, first + n1, n2);
    }

    merge(data, first, n1, n2);

    for(String element: data)
        System.out.print(element +" ");
} 
```

当我运行程序时，它会正确地对其中的一些进行排序，但总的来说它不是无序的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:53:42.007

你有一个错字和两行被遗忘的行。下面是固定功能。把它和你的比较一下。

```
 private static void merge(String[] data, int first, int n1, int n2)
    {
        String[] temp = new String[n1 + n2];
        int copied = 0;
        int copied1 = 0;
        int copied2 = 0;

        while ((copied1 < n1) && (copied2 < n2))
        {
            if (data[first + copied1].compareTo(data[first + n1 + copied2]) < 0)
                temp[copied++] = data[first + (copied1++)];
            else
                temp[copied++] = data[first + n1 + (copied2++)];
        }

        while (copied1 < n1)
            temp[copied++] = data[first + (copied1++)];
        while (copied2 < n2)
            temp[copied++] = data[first + n1 + (copied2++)];

        for (int i = 0; i < copied; i++)
            data[first + i] = temp[i];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T19:31:05.473

我有另一个使用 Mergesort 的 String Array[] 解决方案：

```
public static void main(String[] args)
{
  int maxSize = 19;             // array size
  DArray arr;                    // reference to array
  arr = new DArray(maxSize);     // create the array
  String[] nameList = {"John", "Mark", "Amber", "Tony", "Matt", "George", 
            "Will", "Bob", "Paul", "Mary Ellen", "Kate", "Joe", "Fred", "Joe", 
            "Anne", "Amber", "Kimberly", "Kelsey", "Matthew"};

 for (int i=0; i<19; i++)
     {
   arr.insert(nameList[i]);
      }

  arr.display();                 // display items

  arr.mergeSort();               // merge sort the array
                              //search using binary search 
  arr.display();                 // display items again
  }  // end main()
}  // end class MergeSortApp

////////////////////////////////////////////////////////////////
public class DArray
{
private String[] theArray;          // ref to array theArray of strings
private int nElems;               // number of data items
//-----------------------------------------------------------
public DArray(int max)            // constructor
  {
  theArray = new String[max];      // create array
  nElems = 0;
  }
//-----------------------------------------------------------
public void insert(String st)    // put element into array
  {
  theArray[nElems] = st;      // insert it
  nElems++;                      // increment size
  }
//-----------------------------------------------------------
public void display()             // displays array contents
  {
     for(int j=0; j<nElems; j++)    // for each element,
     System.out.print(theArray[j] + " ");  // display it
     System.out.println("");
  }
//-----------------------------------------------------------
public void mergeSort()           // called by main()
  {                              // provides workspace
    String[] workSpace = new String[nElems];
    recMergeSort(workSpace, 0, nElems-1);
  }
//-----------------------------------------------------------
private void recMergeSort(String[] workSpace, int lowerBound,
                                           int upperBound)
  {
  if(lowerBound == upperBound)            // if range is 1,
     return;                              // no use sorting
 else
     {                                    // find midpoint
     int mid = (lowerBound+upperBound) / 2;
                                         // sort low half
    recMergeSort(workSpace, lowerBound, mid);
                                         // sort high half
     recMergeSort(workSpace, mid+1, upperBound);
                                         // merge them
     merge(workSpace, lowerBound, mid+1, upperBound);
     }  // end else
  }  // end recMergeSort()
//-----------------------------------------------------------
private void merge(String[] workSpace, int lowPtr,
                       int highPtr, int upperBound)
  {
    int j = 0;                             // workspace index
    int lowerBound = lowPtr;
    int mid = highPtr-1;
    int n = upperBound-lowerBound+1;       // # of items

    while(lowPtr <= mid && highPtr <= upperBound)
            if(  theArray[highPtr].compareTo(theArray[lowPtr])> 0)
           workSpace[j++] = theArray[lowPtr++];
     else
        workSpace[j++] = theArray[highPtr++];

   while(lowPtr <= mid)
     workSpace[j++] = theArray[lowPtr++];

   while(highPtr <= upperBound)
     workSpace[j++] = theArray[highPtr++];

  for(j=0; j<n; j++)
     theArray[lowerBound+j] = workSpace[j];
  }  // end merge()

}  // end class DArray
//////////////////////////////////////////////////////////////// 
```

# ssas - Analysis Services 不会按照指示清除缓存（维度动态安全）

> ID：13759541
> 
> 赞同：0
> 
> 时间：2012-12-07T08:36:43.293
> 
> 标签：ssas

分析服务 2008 R2，企业 64，版本：10.50.2500.0

Win7 64位

我已经设置了维度动态安全性以使用程序集来获取角色/维度的允许成员。该程序集查找 SQL Server 数据库表并返回允许的成员并将所有内容**记录**到数据库中，以便我可以更轻松地进行调试。

因此，当我测试角色（通过 SSMS、BIDS、Excel）时，程序集**只被调用一次**，然后 AS（据我了解）缓存安全信息（即安全维度）。

因此，如果我使用允许的成员更改关系表的内容，即使我关闭并重新打开应用程序也不会反映出来。很好，已经缓存了。

但随后我指示 AS**清除**缓存，如下所述：[http ://technet.microsoft.com/en-us/library/hh230974.aspx](http://technet.microsoft.com/en-us/library/hh230974.aspx)

什么都没发生。XMLA 查询执行良好，我得到：

```
<return xmlns="urn:schemas-microsoft-com:xml-analysis">
  <root xmlns="urn:schemas-microsoft-com:xml-analysis:empty" />
</return> 
```

但是程序集**不会**再次被调用，并且允许的成员是错误的。此外，这些人说这种方法应该有效：[http ://cwebbbi.wordpress.com/2011/05/09/why-not-to-use-the-external-assembly-approach-for-dynamic-security/](http://cwebbbi.wordpress.com/2011/05/09/why-not-to-use-the-external-assembly-approach-for-dynamic-security/)

让它工作的唯一方法是重新处理立方体！

这是一个错误吗？

有解决方法吗？

谢谢，

伊戈尔

# android - 谷歌授权失败错误

> ID：13759542
> 
> 赞同：6
> 
> 时间：2012-12-07T08:36:50.493
> 
> 标签：android, google-maps-api-2

我正在使用 Android 2.3.6 设备进行测试。当我在设备上运行 Google Map android api v2 时，它不会在设备上显示地图，并且还会在 logcat 上显示错误，如下所示

Google Maps Android API 授权失败。

同样在控制台上它显示

[2012-12-07 13:59:42 - google-play-services_lib] 找不到 google-play-services_lib.apk！

请帮我！！！！！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:03:14.870

I also found that the play services libproject has to be imported onto the same *physical drive* as your project. (which may not be the case if you didn't check the 'Copy projects into workspace' checkbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:29:51.683

首先下载最新的 google play services revision 3。将 google play services libproject 作为库导入 Eclipse。然后转到属性> Android，然后将上述项目作为库添加到您的项目中。还要确保在您的设备上更新了 google play 服务。如果您直接在设备上运行应用程序，请使用调试密钥库。您必须在创建 Android 密钥时添加调试密钥库的 sha1 打印和包。

> 参考这个例子： [https ://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:04:27.837

[建立图书馆项目](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)

我刚刚添加了谷歌服务的项目，并在我的项目属性中添加了一个引用->Android 检查上面的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T10:45:43.743

不幸的是，要使用 Google 地图，您必须在真实设备上测试应用程序，因为不支持模拟器。

# android - Android：使用 putExtra 从片段访问容器活动对象？

> ID：13759546
> 
> 赞同：14
> 
> 时间：2012-12-07T08:37:07.280
> 
> 标签：android, android-fragments, fragment, android-tabs

我正在使用操作栏和片段构建选项卡界面。我需要帮助将数据从容器活动发送到片段。

详细地说，我在容器活动中有工作对象。我根据工作对象中的信息（如公司详细信息、经验详细信息等）创建了几个选项卡。我需要将作业对象传递给这些片段，以便它可以显示相应的信息。

我创建了容器活动和选项卡片段。我需要一个关于如何在它们之间传递对象的示例。我不能使用intent.putExtra。我可以从片段访问父容器的对象吗？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-07T08:41:15.703

在您的活动中创建方法，例如`getJob`将返回`Job`对象及其信息

```
MyActivity extends Activity{
Job mJob;

public Job getJob(){
   return this.mJob;
 }
} 
```

然后在你的片段中你这样做：

```
MyFragment extends Fragment{

@Override
public void onActivityCreated(){
  super.onActivityCreated();
  ((MyActivity)this.getActivity()).getJob();
 }
} 
```

使用`getActivity`和`getJob();`获取对象的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:48:52.413

有多种方法可以实现这一目标。

1.  制作一个`static`变量来保存您的数据并从片段内部访问该数据 - 这是最快的，但如果使用不当会产生不良的设计模式。
2.  `Fragment-to-Fragment communication possible through the parent Activity`此处发布了一种方法：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)您可以使用示例代码来做一个`Activity - Fragment data send`.
3.  这里投票最多的答案：[访问父活动的实例？](https://stackoverflow.com/questions/4944651/accessing-instance-of-the-parent-activity)提到`a way to avoid using static data`(1.) 并包含使用的源代码示例`ActivityGroup`

> “如果您需要访问 First 活动中的某些值而不对其进行静态引用，您可以考虑将您的活动放在 ActivityGroup 中。”

您选择的是您的喜好，这些只是几个选项！

* * *

编辑：我不确定数字 3 是否适用于片段，因为我还没有测试过类似的方法，例如 Activity - Activity 通信。

# python - 有没有办法在没有 admin.py 的情况下激活 django 管理站点

> ID：13759547
> 
> 赞同：0
> 
> 时间：2012-12-07T08:37:10.807
> 
> 标签：python, django

我有很多应用程序，我想为我所有应用程序中的所有模型激活管理员。

我记得几个月前我的一个朋友做了一些事情，在没有任何 admin.py 文件的情况下启用了管理站点

他在`settings.py`文件中做了一些事情，`INSTALLED_APPS`并且所有应用程序都显示在管理部分

我现在找不到那个。任何人？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:40:21.967

只需按照文档中的说明进行操作。[他们描述了如何在此处激活 django 管理站点](https://docs.djangoproject.com/en/dev/intro/tutorial02/#activate-the-admin-site)。你需要修改`urls.py`. 而已。

该文件中甚至还有注释告诉您要​​取消注释哪三行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:04:36.480

你的朋友可能做了类似的事情......

```
from django.db.models import get_models

for model in get_models():
    admin.site.register(model) 
```

在他的一个 admin.py 文件中。

我不知道，我这样做只是为了测试东西。这有点太神奇了。请记住，您必须明确指出`unregister`您可能想要再次注册的任何模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:32:12.693

我建议您`admin.py`在您的应用程序中包含一个，因为它是 Django 约定，并且您尝试实现的目标的一些明确性是一件好事；我使用的解决方案是我启动的所有新应用程序的以下默认`admin.py`模板：

```
# Auto registers any new models with the admin, eventually you will want a tailored admin.py
from django.contrib import admin
current_app = models.get_app(__package__) 
for model in models.get_models(current_app):
    admin.site.register(model, admin.ModelAdmin) 
```

# ruby - 如果前缀不为空，则为字符串添加前缀的简洁方法

> ID：13759548
> 
> 赞同：1
> 
> 时间：2012-12-07T08:37:19.423
> 
> 标签：ruby

是否有更短的方法来执行以下操作？

```
foo = 
  config.include?(:bar) ?
    "#{bar}.baz" :
    "baz" 
```

如果变量存在（假设它是一个字符串），我正在寻找一个可读的单行符，它附加一个变量和一个分隔符。

`config`是一个哈希。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:39:04.177

你可以这样做：

```
foo = [bar, 'baz'].compact.join('.') 
```

如果`bar`为 nil，`compact`则将其从数组中删除，并且不会添加分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:38:51.107

```
foo = "#{"bar." if config.include?(:bar)}baz" 
```

# asp.net-mvc - ASP.net 托管

> ID：13759549
> 
> 赞同：-6
> 
> 时间：2012-12-07T08:37:20.407
> 
> 标签：asp.net-mvc

我已经使用 c# 和 MVC 架构开发了 asp.net 网站。关于我应该在哪里上传的任何建议？在哪个虚拟主机网站上？我是网络应用程序的新手。在选择任何托管服务之前，还需要有关我应该寻找哪些功能的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:46:34.247

虚拟主机清单（有很多可用的清单，您可以搜索谷歌以获取更多详细信息）

1.  磁盘空间
2.  带宽
3.  域
4.  编程语言
5.  电子邮件帐户
6.  电子商务选项
7.  一个体面的管理小组
8.  体面的技术支持
9.  灵活性
10.  额外服务
11.  强大的基础设施

检查这些清单：

[虚拟主机清单](http://www.webpagemistakes.ca/web-hosting-checklist/)

[虚拟主机清单](http://www.jckh.org/56-web-hosting-checklist.html)

# iphone - 从 UITableView 插入和删除行时如何正确更新数据源？

> ID：13759553
> 
> 赞同：2
> 
> 时间：2012-12-07T08:37:34.570
> 
> 标签：iphone, objective-c, ios, uitableview

我正在尝试从 UITableView 中删除一些行，这是我的代码...

```
 [self.responsesTableView beginUpdates];
    [self.responsesTableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:self.processingIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    [self. responsesTableView endUpdates];
    noOfRsponses --;
    if (self.segFrndEveryone.selectedSegmentIndex == 0) {
        [self.arrFriendComments removeObjectAtIndex:self.processingIndexPath.row];
    }else {
        [self.arrAllComments removeObjectAtIndex:self.processingIndexPath.row];
    } 
```

其中两个数组之一是我的数据源依赖于所选的段。我收到以下错误，不知道如何处理。

> 更新后现有节中包含的行数 (9) 必须等于更新前该节中包含的行数 (9)，加上或减去从该节中插入或删除的行数（0 插入, 1 已删除）并加上或减去移入或移出该部分的行数（0 移入，0 移出）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:49:40.510

在手动更改`UITableView`.

```
// update the data source for the table change
noOfRsponses--;
NSMutableArray *targetArray = (self.segFrndEveryone.selectedSegmentIndex == 0) ? self.arrFriendComments : self.arrAllComments;
[targetArray removeObjectAtIndex:self.processingIndexPath.row];

// update the table view itself
[[self responsesTableView] beginUpdates];
[[self responsesTableView] deleteRowsAtIndexPaths:[NSArray arrayWithObject:self.processingIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
[[self responsesTableView] endUpdates]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:49:25.160

你在正确的数组上调用 removeObjectAtIndex 吗？根据错误消息，您实际上并没有从数据源中删除 tableview 期望您从中删除的对象。我猜也许你正在从错误的数组中删除。

还有一件事要尝试：首先删除对象，然后执行 deleteRowsAtIndexPath。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T15:26:21.987

您应该对部分使用方法

```
- (void)deleteSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation; 
```

# c++ - 从具有任意数量空格的文件中获取数据集

> ID：13759555
> 
> 赞同：1
> 
> 时间：2012-12-07T08:37:44.557
> 
> 标签：c++, ofstream

**请不要直接答案或代码示例，这是我需要学习的功课。我正在寻求有关我需要开发的算法的帮助。

在为我的部分课堂作业提出解决方案时，我似乎遇到了逻辑错误，该程序涉及多个文件，但这是唯一相关的部分：

我有一个文件 PlayerStats ，其中包含篮球运动员的统计数据：

*   篮板
*   积分
*   助攻
*   制服 ＃

我最初的反应是创建一个while循环并将它们读入一个保存这些值的临时结构，然后创建一个合并函数，将临时结构的值与初始记录数组合并，够简单吗？

```
struct Baller
{
   //other information on baller
   int rebounds;
   int assists;
   int uniform;
   int points;
   void merge(Baller tmp); //merge the data with the array of records
}

//in my read function..
Baller tmp; 
int j = 0;
inFile << tmp.uniform << tmp.assists << tmp.points << tmp.rebounds
while(inFile){
    ArrayRecords[j].merge(tmp);
    j++;
    //read in from infile again
} 
```

**问题**：文件的标识符之间可以有任意数量的空格，并且信息可以按**任何**顺序排列（省略统一编号，始终是第一个）。例如

PlayerStats 可能是

```
11 p3 a12 r5 //uniform 11, 3 points 12 assists 5 rebounds
//other info 
```

或者

```
 11 p    3 r  5  a      12 //same exact values 
```

## 我想出了什么

* * *

似乎无法想出一种算法来以正确的顺序从文件中获取这些值，我正在考虑以下几点：

```
inFile << tmp.uniform; //uniform is ALWAYS first
getline(inFile,str);  //get the remaining line
int i = 0;
while(str[i] == " ") //keep going until i find something that isnt space
    i++;

if(str[i] == 'p')  //heres where i get stuck, how do i find that number now?

else if(str[i] == 'a')

eles if(str[i] = 'r' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:51:23.427

做这样的事情：

```
int readNumber () {
  while isdigit (nextchar) -> collect in numberstring or directly build number
  return that number;
}
lineEater () {
  Read line
  skip over spaces
  uniform=readNumber ();
  haveNum=false;
  haveWhat=false;
  Loop until eol {
    skip over spaces
    if (isdigit)
      number=readNumber ();
      skip over spaces
      haveNum=true;
    else 
      char=nextChar;
      haveWhat=true;
    if (haveChar and haveNum) {
      switch (char) {
        case 'p' : points=number; break;
        ...
      }
      haveNum=false;
      haveWhat=false;
    }
  } 
```

或者，如果您更雄心勃勃，请为您的输入编写语法并使用 lex/yacc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:53:24.997

如果您只检查一个字母，您可以使用`switch`语句而不是`if / else`，这样会更容易阅读。

您知道数字从哪里开始（提示：）`str[i+1]`，因此根据您`str[]`的类型，您可以使用`atoi`char 数组`std::stringstream`或`std::string`.

我很想给你一些代码，但你也说不要。如果您确实想要一些，请告诉我，我将使用一些代码编辑答案。

不要使用“合并”功能，而是尝试使用 an`std::vector`这样您就可以只使用`push_back`您的结构而不是进行任何“合并”。此外，您的合并函数基本上是一个[复制赋值运算符](http://en.wikipedia.org/wiki/Assignment_operator_%28C%2B%2B%29)，由编译器默认创建（您不需要创建“合并”函数），您只需要用于`=`复制数据即可。如果你想在你的“合并”函数中做一些特别的事情，那么你应该[重载复制赋值运算符](http://en.wikipedia.org/wiki/Assignment_operator_%28C%2B%2B%29#Overloading_copy_assignment_operator)而不是“合并”函数。简单的。

# php - php - 单独的类方法声明和定义？

> ID：13759556
> 
> 赞同：2
> 
> 时间：2012-12-07T08:37:52.200
> 
> 标签：php, oop, class

我来自 C++ 以及我在手册和代码示例中阅读的所有内容，似乎没有人将类方法声明与其定义分开。这在 PHP 中是不可能的吗？这不会导致非常难以阅读和混乱的界面吗？

谢谢

编辑：我想要这样的东西：

```
class MyClass
{
    public function Foo();

};

MyClass::Foo()
{
    echo "O-hoy!";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:43:27.870

当不使用`interface`s 时，你是对的。就像在 Java 中一样，类定义就是声明。但是，（也像 Java），`interface`您可以使用：

从[文档](http://php.net/manual/en/language.oop5.interfaces.php)中：

```
interface iTemplate
{
    public function setVariable($name, $var);
    public function getHtml($template);
}

// Implement the interface
// This will work
class Template implements iTemplate
{
    private $vars = array();
    ...
} 
```

将它们放在不同的文件中是完全合法的。但是，类定义将始终在一个文件中。您不能`partial`像在 C# 中那样使用关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:41:33.400

这个概念在 PHP 中是不必要的。如果你想获得一个干净的界面，你可以定义一个。[http://php.net/manual/en/language.oop5.interfaces.php](http://php.net/manual/en/language.oop5.interfaces.php)

# php - PHP + MySQL - 表单不能一次更新多个表

> ID：13759559
> 
> 赞同：0
> 
> 时间：2012-12-07T08:37:53.963
> 
> 标签：php, mysql

我很难从一个表单中更新多个表。我已经完成了查询并使用（或死）检查了错误，但似乎我的 MySQL 代码中没有错误。我可以更新主表的数据，但我不能更新另一个表。我怀疑我的表单字段有问题。这是我的表单代码：

```
<?php

$sql= "SELECT * FROM client WHERE resID=".$_GET["resID"];
$rs = mysql_query($sql) or die($sql."<br/><br/>".mysql_error());

$sqlM= "SELECT * FROM menu WHERE resID=".$_GET["resID"];
$rsM = mysql_query($sqlM) or die($sqlM."<br/><br/>".mysql_error());

$i = 0;

echo '<table width="50%">';
echo '<tr>';
echo '<td>ID</td>';
echo '<td>Name</td>';
echo '<td>Edit</td>';
echo '</tr>';

echo "<form name='form_update' method='post' action='client_admin_post.php'>\n";

$f=mysql_fetch_array($rs);echo '<tr>';
echo "<td>Res ID :</td>";
echo "<td>{$f['resID']}<input type='hidden' name='resID' value='{$f['resID']}' /></td>";
echo '</tr>';
++$i;

echo '<tr>';
echo "<td>Restaurant Name :</td>";
echo "<td><input type='text' size='40' name='resName' value='{$f['resName']}' /></td>";
echo '</tr>';
++$i;

while ($fM = mysql_fetch_array($rsM)) {

echo '<tr>';
echo "<td>Menu :</td>";
echo "<td><input type='text' size='40' name='mname[$i]' value='{$fM['name']}' /></td>";
echo "<td>{$fM['id']}<input type='hidden' name='mid[$i]' value='{$fM['id']}' /></td>";
echo '</tr>';
++$i;
}

echo '<tr>';
echo "<td><input type='submit' value='submit' /></td>";
echo '</tr>';
echo "</form>";
echo '</table>';

?> 
```

这是我的邮政编码：

```
<?php

        //session_start();
        include_once("connection.php");

        $resID= $_POST["resID"];
        $resName= $_POST["resName"];

            $sql = "UPDATE client ".
           "SET resName = '$resName' ".
           "WHERE resID = '$resID' " ;

       mysql_query($sql) or die ('query failed:' . mysql_error());

    $size = count($_POST['mname']);

    $i = 0;
    while ($i < $size) {
    $name= $_POST['mname'][$i];
    $id = $_POST['mid'][$i];

    $sqlM = "UPDATE menu SET name = '$name' WHERE id = '$id' LIMIT 1";
    mysql_query($sqlM) or die ("Error in query: $sqlM");
    echo "$name<br /><br /><em>Updated!</em><br /><br />";
    ++$i;
    }

    ?> 
```

如你们所知，一家餐厅有很多菜单。我可以编辑主要餐厅信息，但无法编辑菜单。请帮我。非常感谢您的帮助。感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:52:19.133

在将其输出为 $mname 索引之前，您至少 ++$i 两次。所以 $_POST['mname'] 会有索引 2 .. count_of_rows+1。您的 while() 忽略了这一事实并计算 0 .. 大小。

如果您打开了所有警告（如您所愿），您将收到一条警告，指出在“$name= $_POST...”开始的行上使用了无效索引 0，您将能够从那里找出答案。

# java - Java Android Date 星期五返回错误的 GetDay()

> ID：13759560
> 
> 赞同：1
> 
> 时间：2012-12-07T08:37:55.540
> 
> 标签：java, android, date, calendar

我有一门课，我需要跟踪 7 个日期对象，一个用于保持时间的一周中的每一天。

我设置了这样的日历并将其分配给 Date 对象

```
Calendar cal = Calendar.getInstance();

cal.set(Calendar.HOUR_OF_DAY,0);
cal.set(Calendar.MINUTE,30);
cal.set(Calendar.SECOND,0);
cal.set(Calendar.DAY_OF_WEEK, Calendar.FRIDAY);

Date FridayOpen = cal.getTime();

Log.i("Creation Day", String.valueOf(FridayOpen.toString()));

Log.i("Creation Day2", String.valueOf(FridayOpen.getDay())); 
```

`LogCat`结果是

```
Creation Day = Fri Dec 07 00:30:00 CST 2012

Creation Day2 = 5 
```

为什么星期五显然是第 6 天并存储在我的日期对象中时返回 5？`Calendar.DAY_OF_WEEK`日期关闭时我无法切换。我在这个愚蠢的问题上花了几个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:39:41.483

因为天是从 0 到 6 。周日为 0，周六为 6。

**编辑** `getDay()`方法已弃用`Calendar.get(Calendar.DAY_OF_WEEK)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:40:37.067

查看 Date 类的 getDay 方法：http: [//docs.oracle.com/javase/7/docs/api/java/util/Date.html#getDay%28%29](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getDay%28%29)

星期五是 5

它也已被弃用，因此不应使用

# android-intent - Sumsung S Planner 和 Google 日历问题

> ID：13759566
> 
> 赞同：5
> 
> 时间：2012-12-07T08:38:21.733
> 
> 标签：android-intent, calendar, android-4.0-ice-cream-sandwich

我的应用程序在我测试过的所有 ICS 手机上都可以正常工作，但在使用 S Planner 的三星手机上却没有问题，我正在使用意图选择来选择事件。when is call s planner 的问题是返回时崩溃。我决定在手机上安装标准的 Google 日历，因为这应该可以解决我的问题。这是代码

```
 public static String ANDROID_CALENDAR_AUTHORITY_1_0 = "calendar";
    public static String ANDROID_CALENDAR_AUTHORITY_2_0 = "com.android.calendar";
    public static String ANDROID_CALENDAR_PROVIDER_PATH_CALENDARS = "calendars";
    public static String ANDROID_CALENDAR_PROVIDER_PATH_EVENTS = "events";

    selected_google_calendar_id = getCallPlanCalendar();
    Uri uri = new Uri.Builder()
    .scheme(ContentResolver.SCHEME_CONTENT) 
    .authority( CalendarProviderConstants. ANDROID_CALENDAR_AUTHORITY_2_0)
    .appendPath(CalendarProviderConstants.ANDROID_CALENDAR_PROVIDER_PATH_EVENTS).build();

    Intent intent = new Intent(Intent.ACTION_PICK, uri);
    intent.putExtra(EXTRA_CALENDAR_ID, selected_google_calendar_id);
    startActivityForResult(intent, 2); 
```

问题是即使我删除了计划程序，我也无法获取打开 Google 日历应用程序的代码。如果删除它会崩溃有没有办法更改默认应用程序以打开或 sumsung 破解了它所以只有 s planner 会打开？

# jenkins - 当计时器触发时，詹金斯不会启动“构建后”操作

> ID：13759567
> 
> 赞同：2
> 
> 时间：2012-12-07T08:38:23.060
> 
> 标签：jenkins, sonarqube

我不知道为什么当内部计时器（通常是夜间构建或 SCM 轮询）触发构建时 jenkins 不启动构建后操作对于上下文，我们的 SONAR 分析配置为 maven 构建后操作，但如果该作业不是由用户从 jenkins Web 应用程序直接启动的，声纳没有更新，控制台日志中也没有声纳分析的痕迹。如果作业是手动启动的，一切都运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T15:27:58.457

可以全局配置此行为，也可以在 Sonar 配置部分中的每个 Jenkins 作业上配置此行为。以下是可用选项：

*   如果由 SCM 更改触发，则跳过
*   如果由依赖项的构建触发，则跳过
*   如果环境变量已定义并设置为 true，则跳过

# drupal - 如何在drupal中添加新规则

> ID：13759568
> 
> 赞同：1
> 
> 时间：2012-12-07T08:38:36.053
> 
> 标签：drupal, drupal-7, drupal-commerce

我正在尝试以编程方式添加一些规则，我正在按照本[教程](http://jamestombs.co.uk/2012-09-14/drupal-commerce-different-prices-different-customer-groups)根据规则管理不同的价目表。要创建规则，它使用 default_rules_configuration 钩子，该钩子将在“加载规则时”执行。

1 - 不是很清楚，当“正在加载规则”时，显然运行 cron 来做到这一点。这是触发它的唯一方法吗？

2 - 有没有办法以编程方式添加规则，所以可以在插入角色挂钩中添加规则，或者这个 default_rules 挂钩是唯一的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:32:38.857

1 - According to [`hook_default_rules_configuration` documentation](http://drupalcontrib.org/api/drupal/contributions!rules!rules.api.php/function/hook_default_rules_configuration/7):

> This hook is invoked when rules configurations are loaded.

The function is actually called when you clear your cache as this is when Drupal rebuilds the default entities provided in code through [`entity_defaults_rebuild`](http://drupalcontrib.org/api/drupal/contributions!entity!entity.module/function/entity_defaults_rebuild/7).

You can examine the full call stack as to how `hook_default_rules_configuration` function is called using [`debug_backtrace`](http://php.net/manual/en/function.debug-backtrace.php)

2 - To set a rule that reacts on inserting a role, you actually have to create a rule that reacts on a user insert action and then check the role saved to see if it matches the role that you're interested in reacting to.

I find it easier to do this via the UI. Here's an export of a rule that checks to see if the user is assigned the anonymous role and sends an email to admin if so:

```
{ "rules_role_change_rule" : {
    "LABEL" : "Role change rule",
    "PLUGIN" : "reaction rule",
    "REQUIRES" : [ "rules" ],
    "ON" : [ "user_insert" ],
    "IF" : [
      { "user_has_role" : { "account" : [ "account" ], "roles" : { "value" : { "1" : "1" } } } }
    ],
    "DO" : [
      { "mail" : {
          "to" : "admin@website.com",
          "subject" : "User role changed",
          "message" : "User role has changed",
          "from" : "drupal@website.com",
          "language" : [ "" ]
        }
      }
    ]
  }
} 
```

You would still have to implement `hook_default_rules_configuration` but replace the rule in the tutorial with one that suits your needs.

# html - 如何更改流程中的“div”位置？

> ID：13759574
> 
> 赞同：1
> 
> 时间：2012-12-07T08:39:01.263
> 
> 标签：html, css

有两列（左右）浮动定位：http: [//jsfiddle.net/GBa4r/](http://jsfiddle.net/GBa4r/)

```
<style>
    .container {width:200px;}
    .right {float: right; width: 30%;}
    .left {float: left; width: 70%;}​
</style>
<div class="container">
    <div class="right">2</div>
    <div class="left">1</div>
</div> 
```

​ 对于打印样式，我需要更改列位置，如本示例[http://jsfiddle.net/GBa4r/1/](http://jsfiddle.net/GBa4r/1/)（“.right”上方的“.left”列）

我应该使用什么css代码

```
 <link href="/css/print.css" media="print" type="text/css" rel="stylesheet" /> 
```

在不更改 html 代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:41:08.113

使用 CSS @media 查询

```
@media print {
  /*Styles goes here*/
} 
```

或使用打印特定样式表`media="print"`

```
<link type="text/css" rel="stylesheet" media="print" href="print_specific_sheet.css" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:42:33.277

使用特定的打印样式表。您可以使用元素`media`上的属性来做到这一点：`link`

```
<link rel="stylesheet" media="print" href="print.css"> 
```

或者您可以从 CSS 文件内部执行此操作：

```
@media print {
    /* print specific styles */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:44:30.720

打印样式表的工作方式与常规样式表大致相同，只是它仅在打印页面时被调用。为了使其工作，需要在每个网页的顶部插入以下内容：

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

文件 print.css 是打印样式表，而 media="print" 命令意味着该 CSS 文件仅在打印网页时才被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T08:53:18.523

使用以下 CSS。

```
.container {width:200px;}
.right {background-color: #eaeaea; width: 30%;position: absolute;
top: 18px;}
.left {background-color: #ccc; width: 70%; position: absolute;
top: 0%;}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T11:21:01.717

查看以下小提琴：http: [//jsfiddle.net/siyakunde/GBa4r/5/](http://jsfiddle.net/siyakunde/GBa4r/5/)

添加到父容器：

```
display: -webkit-box; -webkit-box-direction: reverse; 
```

从孩子身上移除：

```
.right {float: right;}
.left {float: left;} 
```

这是横向变化。

如果要垂直更改定位，如 [http://jsfiddle.net/siyakunde/GBa4r/6/](http://jsfiddle.net/siyakunde/GBa4r/6/)

然后加

```
-webkit-box-orient:vertical; 
```

给父母。

# python - gevent、套接字和同步

> ID：13759576
> 
> 赞同：5
> 
> 时间：2012-12-07T08:39:05.100
> 
> 标签：python, sockets, gevent

我有多个在一个公共套接字上发送的小绿灯。是否保证通过发送的每个包`socket.sendall`都被很好地分开，或者我是否必须在每次调用`sendall`.

所以我想防止以下情况：

*   *g1*发送`ABCD`
*   *g2*发送`1234`
*   接收到的数据被混淆了，例如`AB1234CD`
*   预期是`ABCD1234`或`1234ABCD`

### 更新

查看[源代码](https://github.com/SiteSupport/gevent/blob/master/gevent/socket.py#L284)后，我认为这种情况不会发生。但我必须使用锁，因为 g1 或 g2 可能会在`sendall`. 有人可以证实这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:38:21.403

我用高延迟/低带宽接口做了一些测试，得到了预期的错误。

*   慢速界面模拟：[https ://superuser.com/a/147434](https://superuser.com/a/147434)
*   测试脚本：[https ://gist.github.com/4249827/6779dfbebc255e81252e9b29c94add98c5771669](https://gist.github.com/4249827/6779dfbebc255e81252e9b29c94add98c5771669)

这导致（如预期的那样）以下错误：

```
AssertionError: This event is already used by another greenlet: (<Greenlet 
at 0x7f3e758722d0: <bound method socket.sendall of <socket at 0x7f3e7587719
0 fileno=8 sock=127.0.0.1:1234 peer=127.0.0.1:51042>>('11111111111111111111
11111111111111111111111111111)>, timeout('timed out',)) 
```

这是固定的测试脚本，`gevent.coros.RLock`它不会产生此错误：[https ://gist.github.com/4249827/7f02f805331eda4091ae0b39dfea4b102cdba2fa](https://gist.github.com/4249827/7f02f805331eda4091ae0b39dfea4b102cdba2fa)

# richfaces - a4j:button - 如何避免提交？

> ID：13759579
> 
> 赞同：0
> 
> 时间：2012-12-07T08:39:29.750
> 
> 标签：richfaces, jsf-1.2

有一个按钮，其唯一目的是调用模态面板。如何避免表单提交？示例代码：

```
 <a4j:commandButton onclick="Richfaces.showModalPanel('noAccess');"/> 
```

还有一个模态面板定义，如下所示：

```
<rich:modalPanel id="noAccess" autosized="true" moveable="true" >
 <f:facet name="header">
  <h:outputText value="Hello!" />
 </f:facet>
 <p>Some meaningful message.</p>
 <a onclick="Richfaces.hideModalPanel('noAccess');" href="#">Close</a>
</rich:modalPanel> 
```

问题是，单击按钮会触发完整的处理周期。我只想显示模态，如果可能的话完全跳过提交。按钮位于表单中，无法将其移出。在这种情况下如何避免提交并在客户端进行工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:16:47.287

`return false;`在属性末尾添加`onclick`如下。

```
<a4j:commandButton onclick="Richfaces.showModalPanel('noAccess');return false;"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:03:27.317

You could simply use html button

<button onclick="Richfaces.showModalPanel('noAccess');">Click</button>

# debugging - ARM Gdb 中断处理器模式更改

> ID：13759583
> 
> 赞同：3
> 
> 时间：2012-12-07T08:39:42.803
> 
> 标签：debugging, linux-kernel, gdb, arm

我目前正在调试 Linux ARM 内核，并且一直想知道当 cpu 模式更改（usr、svc、abt 等）时 gdb 是否可能中断。目前，当我不确定我们处于哪种模式时，我通常必须多次查看 psr 寄存器，但也许有更有效的方法，例如模式更改时中断？

我知道我可以在异常向量上设置断点，但这意味着我只检测到特权模式的模式更改，而不是相反。也许有一个命令可以检查 psr 是否更改为 0x10(usr 模式) ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:47:49.187

所有进程都安排在[entry-common.S](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/kernel/entry-common.S;hb=HEAD)中。该文件有一个名为`arch_ret_to_user`. 将其定义为一条`BKPT`指令，可能以通过`/proc`.

您通常无法单独使用 CPU 检测到用户模式的切换（您需要支持代码），因为主管代码可以更改**任何内容**。[**如果您的 CPU 具有该功能， ETM**](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0344b/DDI0344.pdf)可能有一些方法。

还有一个[thread_nofity.h](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/arch/arm/include/asm/thread_notify.h)，它在重新安排用户任务时有回调。如果您不需要调试器或在函数上放置一些*断点*`null(){}`，您可以将其与您自己的逻辑挂钩，您只能在条件意味着时从通知程序调用该函数。

# .net - 为什么 Windows 8 没有内置 .NET Framework 2.0 和 3.5？

> ID：13759585
> 
> 赞同：0
> 
> 时间：2012-12-07T08:39:43.493
> 
> 标签：.net, windows, windows-8

是否有一个原因？

我个人认为在 Windows 8 中不包含这些版本的 .NET 实际上是一个非常糟糕的决定，因为我们的客户现在必须通过“程序和组件”手动安装它，然后重新启动他们的机器，事实上我们必须提供说明和支持他们。这很不舒服，他们会责怪我们的软件，而不是 Windows。为什么即使对于 .NET，MS 也不能支持简单的向后兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:54:06.387

继续安装程序的想法：您可以在安装程序中嵌入框架（例如 2.0）可再发行包，并定义一个操作以在检测到缺少正确版本时自动安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:42:02.563

不，他们不需要。只需创建一个集成了框架安装程序的安装程序，因此不需要特殊说明。

这是手动操作方法： http: [//www.codeproject.com/Articles/35976/Add-Prerequisites-of-NET-Framework-in-Visual-Studi](http://www.codeproject.com/Articles/35976/Add-Prerequisites-of-NET-Framework-in-Visual-Studi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:43:44.887

> *“他们会责怪我们的软件，而不是 Windows”*

答案就在您的问题中 - 这可以节省他们的钱，并且对您来说是成本。对不起，伙计，但期望微软不会被扼杀有点天真。他们是一家企业，他们对股东的责任是赚取利润，这意味着在他们可以逃脱的地方削减成本。

随着时间的推移，Microsoft 会弃用旧框架。他们继续支持他们，但同时照顾 .Net 1.1、2、3.5 和 4.5 需要资源。

因此，对于每一个新操作系统（我认为是从 XP 开始），它都附带了当前的框架，并且能够并排安装其他操作系统。

随着时间的推移，这将人们推向新的框架。企业 IT 通常非常缓慢，只有在绝对必要时才会升级（我们有很多 Win 2000 和 IE6 和 Office 2000 客户），因此 MS 需要在想要推出新软件来竞争的同时让恐龙开心（10年就像计算机时间的一个纪元）。

这是一个棘手的问题，你的问题是他们的妥协之一。

在 4.5 中重新编译 2.0 或 3.5 代码应该不是一项艰巨的任务 - 几乎没有重大更改。然后它们将无法在 Win 2000 上运行，但随后微软也放弃了对旧操作系统的支持。

请注意，Windows 8 也是微软战略的一个范式转变，为 Win 2000 编写的应用程序可以在上面运行，但看起来很老气（考虑一下现在 16 位 Windows 3.1 看起来多么笨重）。

# linux - 如何修复 /usr/bin/env agument 处理？

> ID：13759588
> 
> 赞同：2
> 
> 时间：2012-12-07T08:40:05.180
> 
> 标签：linux, cluster-computing

我遇到了*/usr/bin/env*的一个奇怪问题……我设计了一个简单的脚本来显示这个问题。该脚本在 Ruby 中，但在 Python 中的类似脚本也会发生同样的情况。这是脚本：

```
#!/usr/bin/env ruby

p ARGV 
```

另一个没有*/usr/bin/env*：

```
#!/data/software/ruby-1.9.2-p180/bin/ruby

p ARGV 
```

如您所见，它应该只打印脚本参数。它在头节点上完美运行：

```
[gusev@scyld test]$ which ruby
/data/software/ruby-1.9.2-p180/bin/ruby
[gusev@scyld test]$ ./script.no_usr_bin_env.rb 1 2 3
["1", "2", "3"]
[gusev@scyld test]$ ./script.usr_bin_env.rb 1 2 3
["1", "2", "3"] 
```

但是在计算节点上运行时，卡住了：

```
[gusev@scyld test]$ qsub -d $(pwd) -I
qsub: waiting for job 176427.scyld.localdomain to start
qsub: job 176427.scyld.localdomain ready

-bash-3.2$ ./script.no_usr_bin_env.rb 1 2 3
["1", "2", "3"]
-bash-3.2$ ./script.usr_bin_env.rb 1 2 3
<stuck> 
```

*/usr/bin/env*在两台机器上完全相同：

```
[gusev@scyld test]$ md5sum /usr/bin/env
7ada476000967f2e4cca2bc669045479  /usr/bin/env
[gusev@scyld test]$ qsub -I -d $(pwd)
qsub: waiting for job 176428.scyld.localdomain to start
qsub: job 176428.scyld.localdomain ready

-bash-3.2$ md5sum /usr/bin/env
7ada476000967f2e4cca2bc669045479  /usr/bin/env 
```

我知道使用*/usr/bin/env*处理参数可能很棘手。但是我们有很多软件都在使用它，我们不能只修复它们。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:46:43.027

`#!/usr/bin/env ruby`导致脚本`ruby`由`$PATH`. 您`$PATH`在计算节点上可能会有所不同，这很可能是由于`qsub`.

一个快速而肮脏的解决方法是：

```
PATH=/data/software/ruby-1.9.2-p180/bin:$PATH ./script.usr_bin_env.rb 1 2 3 
```

但是您应该找到一种更简洁的方法来确保`$PATH`在执行 Ruby 脚本之前正确设置。

有关更多详细信息，请在计算节点上尝试`which ruby`或`type ruby`和`echo $PATH`，并确保该`ruby`命令确实有效。

（有关`#!/usr/bin/env ...`vs.的更多讨论`#!.../ruby`，请参阅[我](https://unix.stackexchange.com/a/29620/10454)对[这个问题](https://unix.stackexchange.com/q/29608/10454)的回答）。

# excel - excel vba递归函数

> ID：13759590
> 
> 赞同：0
> 
> 时间：2012-12-07T08:40:18.737
> 
> 标签：excel, vba, recursion

我试图展示相关项目活动的路径。基本上你可以把它想象成一个有向图。我做了一个邻接矩阵。

```
 STA A1.1 A1.2 ...
STA    0   1    0   ... 
A1.1   0   0    1   ...
A1.2   0   0    0   ...
...   ... ...  ...  ... 
```

然后我编写了一个子程序来查找所选活动的前身，但我真正需要的是从一开始就显示所有相关活动。例如，如果选择 A1.2，它应该打印出 [STA, A1.1, A1.2]。如果选择了所有活动都超前的最终结果，则应以正确的顺序打印所有活动。不同的路径可以像这样分开 [STA, A1.1, A1.2, ... END],[STA, A2.1, A2.2, ... END],[STA, A3.1, . ..] 到目前为止，我的代码只打印出所选活动的前身：

```
'---------------------------------
Sub RunThings()

Application.ScreenUpdating = False

 Call UserInput

Application.ScreenUpdating = True

End Sub
'---------------------------------
Sub UserInput()

Dim iReply As Variant

iReply = Application.InputBox(Prompt:="Please enter activity name", Title:="FIND     ACTIVITY PATH", Type:=2)

'MsgBox (iReply)

If iReply = False Then
    Exit Sub
Else 'They cancelled (VbCancel)
    If iReply <> "" Then
        Call Findpath(CStr(iReply))
    End If
End If

Exit Sub

End Sub

'---------------------------------

Function FindRowCol(term As String, row As Boolean)

Dim SearchRange As Range
Dim FindRC As Range

If row = False Then
    Set SearchRange = Range("A1", Range("T1").End(xlUp))
Else
    Set SearchRange = Range("A1", Range("A65536").End(xlUp))
End If

Set FindRC = SearchRange.Find(term, LookIn:=xlValues, lookat:=xlWhole)

If row = False Then
    FindRowCol = FindRC.Column
Else
    FindRowCol = FindRC.row
End If

End Function
'---------------------------------

Sub Findpath(activity As String)

Application.ScreenUpdating = False

ActCol = FindRowCol(activity, False)

For i = 2 To 65536
    If Cells(i, 1).Value = "" Then
        LastRow = Cells(i, 1).row - 1
        Exit For
    End If
Next i

Dim Predecessors() As Variant
Dim Counter As Integer
Counter = 0

For j = 1 To LastRow
    If Cells(j, ActCol).Value = 1 Then
       Counter = Counter + 1

    End If
Next j

ReDim Predecessors(1 To Counter)

Insert = 1

For j = 1 To LastRow
    If Cells(j, ActCol).Value = 1 Then
       Predecessors(Insert) = Cells(j, 1).Value
       Insert = Insert + 1
    End If
Next j

Dim CurrAct As String

For k = LBound(Predecessors) To UBound(Predecessors)

    CurrAct = CStr(Predecessors(k))
    MsgBox (CurrAct)

Next k

Application.ScreenUpdating = True

End Sub
'--------------------------------- 
```

我的问题是是否可以将子例程 Findpath 更改为递归函数以打印出所有相关活动？

这是完整的邻接矩阵：

STA A1.1 A1.2 A1.3 A1.4 A1.5 A2.1 A2.2 A2.3 A2.4 A2.5 A3.1 A4.1 A4.2 A4.3 A4.4 A4.5 A5 .1 结束 STA 0 1 0 0 0 0 1 0 0 0 0 1 1 0 0 0 0 0 0 A1.1 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 A1.2 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 A1.3 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 A1.4 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 A1.5 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 A2.1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 A2.2 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 A2。3 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 A2.4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 A2.5 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 A3.1 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 A4.1 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 A4.2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 A4.3 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 A4.4 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 A4.5 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 A5。1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 结束 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:20:49.747

*是否可以将子例程 Findpath 更改为递归函数的*简短回答是 Yes。

但我认为你在想这个。如果我正确理解您的要求，您可以使用`Do Loop`像这样

```
Sub Demo()
    Findpath ActiveSheet, "A1.2"
End Sub

Sub Findpath(sh As Worksheet, activity As String)
    Dim rHeader1 As Range
    Dim rHeader2 As Range
    Dim x, y
    Dim nxtActivity As String
    Dim sPath As String

    With sh
        Set rHeader1 = .Range(.Cells(1, 2), .Cells(1, 2).End(xlToRight))
        Set rHeader2 = .Range(.Cells(2, 1), .Cells(2, 1).End(xlDown))
        nxtActivity = activity
        sPath = activity
        Do
            x = Application.Match(nxtActivity, rHeader1, 0)
            If IsError(x) Then
                Exit Do
            Else
                y = Application.Match(1, rHeader2.Offset(0, CLng(x)), 0)
                If IsError(y) Then
                    Exit Do
                Else
                    nxtActivity = Application.Index(rHeader2, CLng(y))
                    sPath = nxtActivity & ", " & sPath
                End If

            End If
        Loop
    End With

    MsgBox sPath
End Sub 
```

这`STA, A1.1, A1.2`从您的示例数据返回

如果数据中存在无限链，您可能需要添加检查以断开

# spinner - 5 个单选按钮和 2 个微调器

> ID：13759611
> 
> 赞同：1
> 
> 时间：2012-12-07T08:41:35.007
> 
> 标签：spinner

我正在创建我的第一个 android 应用程序，它是一个英制单位转换器。它包含 5 个单选按钮和 2 个微调器。单选按钮是测量类型（面积、长度、重量、体积和温度），而微调器提供选择是否转换为用户想要使用的测量系统。两个微调器具有相同的值，即：“英制”和“公制”。第一个微调器标记为“转换自：”，而第二个微调器标记为“转换为：”。要进行转换，用户必须首先确定：

1.测量类型，

2.从什么测量系统和

3.进入他想要的测量系统。

当单击“NEXT”按钮时，转换布局将打开，但取决于此 3。
我希望它是：
如果 spinner1 设置为“English”，则 spinner 2 必须自动设置为“Metric”。此外，微调器不得具有相同的值。谁能帮我这个？我非常需要它。
谢谢。

# orchardcms - Orchard CMS 创建用户时出现重复条目

> ID：13759612
> 
> 赞同：0
> 
> 时间：2012-12-07T08:41:40.970
> 
> 标签：orchardcms

我一直在为此头疼。请看一下这段代码。此代码位于客户控制器中。

```
 [HttpPost]
    [Themed]
    public ActionResult Register(string email, string password, string confirmPassword, Gender gender, string givenName, string familyName, string insertion, DateTime birthDate) {

        ViewData["PasswordLength"] = MinPasswordLength;
        var shape = _orchardServices.New.Register();

        //1\. Initialize new content of customer contenttype
        var customer = _orchardServices.ContentManager.New("Customer");

        if (customer != null) {
            //2\. Define the parts that need to be filled
            var userPart = customer.As<UserPart>();
            var customerPart = customer.As<CustomerPart>();

            //3\. Let's validate first if the user can be created
            if (userPart!=null) {
                //shape.Customer = _orchardServices.ContentManager.UpdateEditor(customer, this);
                if (!ModelState.IsValid)
                {
                    _orchardServices.TransactionManager.Cancel();
                    return new ShapeResult(this, shape);
                }

                //4\. Now validate the user credentials.
                if (ValidateRegistration(email, password, confirmPassword)) {
                    //Now create the actual customer.
                    userPart.UserName = email;
                    userPart.Email = email;
                    userPart.NormalizedUserName = email.ToLowerInvariant();
                    userPart.Record.HashAlgorithm = "SHA1";
                    userPart.Record.RegistrationStatus = UserStatus.Approved;
                    userPart.Record.EmailStatus = UserStatus.Approved;

                    customerPart.CreatedAt = DateTime.UtcNow;
                    customerPart.LastLogonAt = DateTime.UtcNow;
                    _membershipService.SetPassword(userPart, password);

                    var user = customerPart.User;
                    _authenticationService.SignIn(user, false /* createPersistentCookie */);
                    return Redirect("~/");
                }
            }

        } 
```

运行此代码时，我的数据库中会出现两个 UserPart 条目。一个有相关的 CustomerPart，一个没有。

# mule - 在 Mule EE 中指定要首先启动的应用程序

> ID：13759613
> 
> 赞同：0
> 
> 时间：2012-12-07T08:41:43.560
> 
> 标签：mule

我有一个服务管理器应用程序，当前 mule 节点上的所有其他应用程序都使用它。我希望这个应用程序先于其他应用程序启动。

看到了文档，[http://www.mulesoft.org/documentation/display/MULE3USER/Application+Deployment](http://www.mulesoft.org/documentation/display/MULE3USER/Application+Deployment) 提到了命令行中提到的应用程序的订单将被保留，但在我的情况下，我只想指定服务管理器应用程序，应选择应用程序文件夹中的任何其他应用程序。由于其他应用程序的列表是动态的，我不想指定它。

有什么办法（黑客），我可以用在我的案子上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:22:55.847

这里最好的选择是创建一个 bash/bat 脚本，该脚本生成它从 ls/dir 命令获得的其他应用程序的列表，然后利用您指出的 -app 参数

# vim - vim：标签中是否可以有新实例

> ID：13759614
> 
> 赞同：0
> 
> 时间：2012-12-07T08:41:42.713
> 
> 标签：vim, editor, macvim

是否可以在每个选项卡中的 vim 上都有一个新实例？因为我想在每个选项卡中都有单独的缓冲区。

所以我可以为我正在编辑的控制器运行一个选项卡，为我的所有视图等运行一个选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:22:18.377

正如评论中所见，我不明白为什么你应该有不同的 vim 实例，无论如何你可以尝试 GNU screen 或[tmux](http://tmux.sourceforge.net/)来启动不同的 vim 会话并在它们之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:22:26.100

不，选项卡已经在 Vim 中，你显然不能在 Vim 中运行。

在 MacVim 中真正拥有独立实例的唯一方法是使用两个不同的 GUI 窗口。

听起来您在跟踪缓冲区时遇到了麻烦，不是吗？

# python - 在 python 中使用 append() 和 readline 完成

> ID：13759620
> 
> 赞同：0
> 
> 时间：2012-12-07T08:42:08.927
> 
> 标签：python, linux, append, readline, tab-completion

具体来说，我可以在 Python 中提供 append() 一个 Null/None 值吗？

我正在尝试向命令行应用程序添加自动完成功能，因此我使用 readline 来获取用户可能在 raw_input 提示符下键入的任何内容。

当我尝试使用制表符（没有在控制台中输入任何值）并收到以下消息时遇到问题：“append() 只需要一个参数（给定 0）”

这是代码：

```
tokens = readline.get_line_buffer().split()
if not tokens or readline.get_line_buffer()[-1] == ' ':
    tokens.append() 
```

我使用此处提供的示例是因为树的深度不是问题的遍历函数： [https ://www.ironalbatross.net/wiki/index.php5?title=Python_Readline_Completions#Complex_problem_.28Regular_Grammar.29](https://www.ironalbatross.net/wiki/index.php5?title=Python_Readline_Completions#Complex_problem_.28Regular_Grammar.29)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:47:54.023

`tokens`变量是 a `list`，所以列表方法[append](http://docs.python.org/2/tutorial/datastructures.html)实际上只需要一个参数。

```
>>> a = []
>>> a
>>> []
>>> a.append(1)
>>> a
>>> [1]
>>> a.append()
>>> TypeError: append() takes exactly one argument (0 given)
>>> a.append(None)
>>> a
>>> [1, None] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:48:33.713

1.  追加只需要一个参数

2.  无对象不能调用附加函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:55:41.233

好的，我设法修复它......当 readline 没有返回值时，不确定提供什么值 append() 所以这样做并且它起作用了：

```
def complete(self,text,state):
try:
    tokens = readline.get_line_buffer().split()
    if not tokens or readline.get_line_buffer()[-1] == ' ':
        tokens.append(text) 
```

多谢你们！

# android - 单击imageview时更改为另一个图像

> ID：13759629
> 
> 赞同：0
> 
> 时间：2012-12-07T08:42:39.820
> 
> 标签：android, imageview

我为列表视图中的项目的图像视图设置了图像 A。我设置了onclick事件并更改为另一个图像B。但是单击后它不能更改为另一个iamge。当我打印日志时，我看到此方法已被调用。

```
holder.bus_icon.setImageResource(R.drawable.bus_blue);
            holder.bus_icon.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.i("i", "点击图标了+test11" + position);
                    holder.bus_icon.setImageResource(R.drawable.bus_red);
                    adapter.notifyDataSetChanged();
                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:46:54.617

删除 `adapter.notifyDataSetChanged();`，因为您在适配器和调用中没有任何变化`holder.bus_icon.invalidate();`。

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:49:21.430

在 onclick 中，持有者指向错误的 imageView。

改用这个

```
 @Override
                public void onClick(View v) {
                    Log.i("i", "点击图标了+test11" + position);
                    ImageView iv = (ImageView)v;
                    iv.setImageResource(R.drawable.bus_red);
                } 
```

希望能解决

# jquery - 动态创建的html表的jquery分页和列排序

> ID：13759638
> 
> 赞同：0
> 
> 时间：2012-12-07T08:43:43.727
> 
> 标签：jquery

我是这个 jquery 的新手，任何人都可以帮助我为动态创建的 html 表创建分页（jquery）和列排序，该表使用 web 服务（vb.net）从数据库中获取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:49:58.357

请检查这个现有的问题[选择一个 jQuery 数据网格插件？](https://stackoverflow.com/questions/5622716/choosing-a-jquery-datagrid-plugin)

我喜欢使用**[jQGrid](http://www.trirand.com/blog/jqgrid/jqgrid.html)**，因为它非常简单并且有很多功能。

您可以在此处使用一些 GenericHttpHandler 或 Page 方法并以 JSON 格式发送数据。

还要检查以下链接以获取 jQGrid

[如何在asp.net中实现JQgrid？](https://stackoverflow.com/questions/8544828/how-to-implement-jqgrid-in-asp-net)

[将 jqGrid 与 Asp.Net Web 表单一起使用](https://stackoverflow.com/questions/10347386/using-jqgrid-with-asp-net-web-forms)

希望这会有所帮助。

# mysql - 如何从另一个表中增加具有最大 ID 的表值

> ID：13759641
> 
> 赞同：1
> 
> 时间：2012-12-07T08:43:54.280
> 
> 标签：mysql, shell

我有一张这样的表：Tb_server

```
ID 
5 
6 
7 
```

tb_upload

```
ID 
1 
2 
3 
```

我需要一个可以将 Tb_server 的所有 ID 更新为的查询`max(Tb_upload.ID) + 1` 所以，Tb_server 上的结果应该是这样的

```
Tb_server   
ID   
4   
5   
6 
```

我在 shell 脚本中执行此操作，因此我可以将其`max(Tb_upload.ID)`作为变量。但是使用 MySQL 的查询会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:47:24.330

取 Tb_upload 的 max+1，即：4

使更新为：

```
update Tb_server  set Tb_serverID= (Tb_serverID+4);    // 4 is the difference here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:52:43.860

试试这个：

```
UPDATE Tb_server, (SELECT @auto:=0) a 
SET ID = (SELECT MAX(ID) FROM Tb_upload) + (@auto:= @auto+1); 
```

# java - Java用边框画线

> ID：13759646
> 
> 赞同：1
> 
> 时间：2012-12-07T08:44:07.883
> 
> 标签：java, swing, awt, line, draw

我正在开发一个 JApplet，用户可以在其中在图像上绘制一些线条。线条可以是红色或绿色，但我需要突出显示它们，因为我不知道背景颜色。

所以我想我可以给这条线画一个白色的“边框”，我试着在原来的左边和右边创建另外两条白线。但结果很差。

有没有更好的方法来实现这个目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:57:11.997

正如@Jesper 所提到的，首先使用较粗的线画线[`Stroke`](http://docs.oracle.com/javase/tutorial/2d/geometry/strokeandfill.html)（如[this answer](https://stackoverflow.com/a/6296381/418556)所示）。

![](../Images/ece95cff85ba4d2b70119d5522f685a6.png)

字母上的黑色轮廓宽度为 2。

```
g.setStroke(new BasicStroke(2f)); 
```

# php - php - RAII 的好习惯？

> ID：13759647
> 
> 赞同：1
> 
> 时间：2012-12-07T08:44:09.757
> 
> 标签：php, raii

我来自 C++，我经常使用 RAII。

据我所知，PHP 使用自动内存管理，那么通过 PHP 的构造函数/析构函数使用 RAII 是否仍然适用/良好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:49:32.110

据我所知，我不相信 RAII 可以在 PHP 中实现。不保证在关联对象作用域时调用析构函数，而是在 PHP 运行时认为不再引用该对象时调用。因此，对于 RAII，它可能不那么可靠。可能值得详细阅读此文档：

[http://php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:52:44.663

由于 RAII 用于锁定线程、文件操作。在 php 中你没有线程，只有分叉。没关系，将核心对象分配并创建到构造函数中，并在析构函数中释放内存，即使 php 5.3 具有非常好的垃圾收集器，这仍然是一种很好的做法。

# c# - 删除同名文件，扩展名无关紧要

> ID：13759648
> 
> 赞同：0
> 
> 时间：2012-12-07T08:44:17.860
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, file-extension

我在`"~Content/Documents"`文件夹中有一些文件，其中包含每个上传的文件。在我的情况下，用户只能上传一个文件。

我已经完成了用户可以上传他的文件的上传部分。

```
if (file.ContentLength > 0)
{
    var fileName = Path.GetFileName(file.FileName);
    var fullpath = System.Web.HttpContext.Current.Server.MapPath("~/Content/Documents");
    file.SaveAs(Path.Combine(fullpath,"document"+Path.GetExtension(fileName)));
} 
```

我的问题是：用户可以上传任一`".doc", ".docx", ".xls", ".xlsx", or ".pdf"`格式文件。现在，当用户上传`".doc"`格式文件时，它会上传到文件夹中。稍后同一用户可以上传`".pdf"`格式的文件，该文件也上传到文件夹中。这意味着用户可以上传两个文件。

现在我要做的是：
当特定用户上传他的文档时：
->搜索用户上传的文档是否在该文件夹中。即具有不同扩展名的特定文件名是否存在。
-> 如果文件名已经存在，但扩展名不同，则删除该文件并上传新文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T09:08:35.967

试试这个，只是另一种方式；如果您的文件名是`"document"`

```
string[] files = System.IO.Directory.GetFiles(fullpath,"document.*");
foreach (string f in files)
{
   System.IO.File.Delete(f);
} 
```

**所以你的代码是；**

```
if (file.ContentLength > 0)
{
    var fileName = Path.GetFileName(file.FileName);
    var fullpath = System.Web.HttpContext.Current.Server.MapPath("~/Content/Documents");

    //deleting code starts here
    string[] files = System.IO.Directory.GetFiles(fullpath,"document.*");
    foreach (string f in files)
    {
       System.IO.File.Delete(f);
    }
    //deleting code ends here
    file.SaveAs(Path.Combine(fullpath,"document"+Path.GetExtension(fileName)));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:57:39.457

像这样的东西应该可以解决问题

```
 var files = new DirectoryInfo(fullpath).GetFiles();
  var filesNoExtensions = files.Select(a => a.Name.Split('.')[0]).ToList();
    //for below: or 'document' if that's what you rename it to be on disk
  var fileNameNoExtension = fileName.Split('.')[0]; 
  if (filesNoExtensions.Contains(fileNameNoExtension))
  {
    var deleteMe = files.First(f => f.Name.Split('.')[0] == fileNameNoExtension);
    deleteMe.Delete();
  }
  file.SaveAs(Path.Combine(fullpath,"document"+Path.GetExtension(fileName))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:03:28.443

Get the filename of the new file without extension, then loop through all the filenames in the folder where it will be uploaded to and check if the name already exists. If so, delete the old an upload, else upload.

```
var info = new FileInfo("C:\\MyDoc.docx");
var filename = info.Name.Replace(info.Extension, "");
var files = Directory.GetFiles("YOUR_DIRECTORY").Select(f => new FileInfo(f).Name);

if (files.Any(file => file.Contains(filename)))
{
    //Delete old file
}
//Upload new file 
```

# facebook - Facebook 'Like' Box 问题 - 改变了吗？

> ID：13759654
> 
> 赞同：3
> 
> 时间：2012-12-07T08:44:43.687
> 
> 标签：facebook, facebook-like

在发布此之前，我已经搜索了答案（但没有运气）。

Facebook 的“赞”框似乎已经改变了颜色，而我没有更改我网站上的任何内容。主题设置为“暗”，但不是黑色，而是显示为灰色，并且无法读取任何文本更新（因为文本也是白色/灰色）。

这似乎是一个普遍存在的问题，因为我访问的其他网站也有问题。他们喜欢的框现在是灰色的，他们的文字无法阅读。我还查看了官方 Facebook 开发者页面，并点击了“黑暗”设置的预览，他们的设置也是错误的！它显示为灰色，无法阅读文本。

任何人有任何想法如何帮助我，或者......任何想法发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:30:54.250

也许您以某种方式（来自某个站点）缓存了错误的 facebook css 文件，当您使用类似框访问其他站点时，您会得到缓存的 css。尝试删除浏览器缓存

# javascript - 自定义谷歌浏览器错误页面

> ID：13759657
> 
> 赞同：2
> 
> 时间：2012-12-07T08:44:57.813
> 
> 标签：javascript, google-chrome, error-handling, customization, chromium

如果我进入`http://localhost/`谷歌浏览器（并且我**没有**在端口 80 上运行任何东西），谷歌浏览器将显示一个错误页面。该页面说这样的话：

`Oops! Google Chrome could not connect to localhost`

这一切都很好，但我的问题是......我如何自定义这个页面？如果出现此类错误，有什么办法可以将浏览器重定向到另一个页面？自动关闭浏览器？任何事物？

任何帮助将非常感激。谢谢！

# c# - 将 kinect 骨架位置数据传递到另一个窗口

> ID：13759659
> 
> 赞同：2
> 
> 时间：2012-12-07T08:45:08.117
> 
> 标签：c#, wpf, kinect

我有两个不同的窗口，一个将在图像上显示流并计算用户的骨架头部位置（窗口 A），另一个是显示 3D 视觉模型，该模型将使用骨架数据进行缩放和平移（动画）（窗口 B ）。

但是，我的问题是我怎么能假设将这些骨架头位置数据从窗口 A 传递并不断更新到窗口 B？我正在使用 WPF 和 M'soft Kinect SDK。我的另一个问题是如何在可视模型上显示按钮或菜单之类的控件，因为对于我的情况，模型填满了整个屏幕。

```
 foreach (Skeleton skeleton in skeletons)
    {
        if (skeleton.TrackingState == SkeletonTrackingState.Tracked)
        {

            ht.GetHeadPosition(skeleton, out message, out headPosition);

            this.headPoint.X = headPosition.X;
            this.headPoint.Y = headPosition.Y;
            this.headPoint.Z = headPosition.Z;

            this.StatusTextBlock.Text = message;

        } 
```

编辑

* * *

```
 public void newSensor_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
    {
        using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
        {
            if (skeletonFrame == null)
                 return;

             GetSkeletons(skeletonFrame, ref skeletons);

             if (skeletons.All(s => s.TrackingState == SkeletonTrackingState.NotTracked))
                 return;

             //skeletonManager.Draw(skeletons);
        }

        foreach (Skeleton skeleton in skeletons)
        {
            if (skeleton.TrackingState == SkeletonTrackingState.Tracked)
            {
                Joint headJoint = skeleton.Joints[JointType.Head];
                Joint hipCenter = skeleton.Joints[JointType.HipCenter];

                headPosition = headJoint.Position;

                this.headPoint.X = headPosition.X;
                this.headPoint.Y = headPosition.Y;
                this.headPoint.Z = headPosition.Z;

                message = string.Format("Head: X:{0:0.0} Y:{1:0.0} Z:{2:0.0}",
                headPoint.X,
                headPoint.Y, headPoint.Z);

                //MessageBox.Show(message);

                this.HeadPosition.Text = message;
            }
        }
    } 
```

我无法使用数据获取 HeadPosition.Text 更新。到底发生了什么？

kinect 在窗口 A 更改了事件处理程序

```
 private void sensorChooser_KinectChanged(object sender, KinectChangedEventArgs e)
    {
        KinectSensor oldSensor = (KinectSensor)e.OldSensor;
        StopKinect(oldSensor);

        KinectSensor newSensor = (KinectSensor)e.NewSensor;

        if (newSensor == null)
        {
            return;
        }

        //Register for event and enable Kinect Sensor features you want
        newSensor.DepthFrameReady += newSensor_DepthFrameReady;
        newSensor.SkeletonFrameReady += mw.newSensor_SkeletonFrameReady;

        //newSensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);
        newSensor.DepthStream.Enable(DepthImageFormat.Resolution640x480Fps30);

       ....

        newSensor.SkeletonStream.Enable(parameter);

        StartKinect(newSensor);

    } 
```

XAML_ ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _**

```
 <Grid x:Name="firstGrid">
    <Viewport3D x:Name="viewPort" Grid.Column="0" Grid.Row="0" ClipToBounds="False" Width="2048" 
    ....
    .....
    </Viewport3D>

    <TextBox x:Name="IndexPosition" HorizontalAlignment="Left" Height="23" Margin="485,2,0,0"   TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="69"/>

    <TextBox x:Name="CameraPosition" HorizontalAlignment="Left" Height="23" Margin="570,2,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="142"/>

    <TextBlock Name="HeadPosition" HorizontalAlignment="Left" Margin="492,23,0,0" Text="Text" VerticalAlignment="Top" Width="182" Height="29" 
               Foreground="Tomato" FontSize="20"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:34:29.703

您可以通过多种不同方式中的一种来执行此操作。这完全取决于您希望如何分隔程序中的代码。

**选项 1：公共事件处理程序**

您可以设置公共事件处理程序`Window B`，`SkeletonFrameReady`从`KinectSensor`. 例如，在设置你的类中，`KinectSensor`你可能有类似的东西：

```
WindowB windowB = new WindowB();

private void InitializeKinectServices(KinectSensor sensor)
{
    // some setup code

    sensor.SkeletonFrameReady += windowB.OnSkeletonFrameReady;

    // some more setup code
} 
```

然后在您的`WindowB`班级中，您将获得事件回调：

```
public void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        // do what you need
    }
} 
```

**选项 2：通过传感器**

您可以设置您的窗口以接受对`KinectSensor`. 当您从主类打开第二个窗口时，只需将传感器传入：

```
WindowB windowB = new WindowB(sensor); 
```

使用您的构造函数，`WindowB`然后`KinectSensor`从上面设置回调：

```
public WindowB(KinectSensor sensor) {
    sensor.SkeletonFrameReady += OnSkeletonFrameReady;
}

private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        // do what you need
    }
} 
```

请注意，这允许您的回调是私有的。

**选项 3：使用框架 Messenger**

您还可以使用框架信使，例如[MVVM Light](http://mvvmlight.codeplex.com/)。MVVM Light 提供了一个轻量级的信使系统，允许您轻松地将对象从一个视图传递到另一个视图。虽然这在 MVVM 结构化程序中更有用，但这并不意味着您不能在程序之外使用它。

`SkeletonFrameReadyEventArgs`您可以从主类`SkeletonFrameReady`回调中广播整个内容：

```
private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    Messenger.Default.Send<SkeletonFrameReadyEventArgs>(e);

    // do more stuff
} 
```

然后你只需要从你那里订阅它`WindowB`：

```
public WindowB() {
    Messenger.Default.Register<SkeletonFrameReadyEventArgs>(this, OnSkeletonFrameReady);
}

private void OnSkeletonFrameReady(SkeletonFrameReadyEventArgs e)
{
    // do what you need with the event arg, just as you would in a regular callback
} 
```

或者您可以只发送个人`Skeleton`，来自您的主要课程：

```
private void OnSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        // do checks for capturing the appropriate skeleton.

        Messenger.Default.Send<SkeletonFrame>(skeletonFrame);

        // do more stuff if you need.
    }
} 
```

然后，您将在 a而不是事件 args`WindowB`上注册，如上所示。`SkeletonFrame`回调会做它需要对`SkeletonFrame`对象做的事情。

**什么是最好的？**

由你决定。还有其他几种方法可以最终做到这一点。这是我想到的前三个。它们都将完成相同的事情——您只想使用最适合您的程序风格的那个。

**最大化窗口**

要最大化窗口，您可以在 XAML 中放置一个按钮并设置回调以在窗口状态`Maximized`和`Normal`窗口状态之间切换。

XAML：

```
<Button Click="MyButton_Click">Click Me</Button> 
```

代码背后：

```
bool _isMaxed = false;
public void MyButton_Click(object sender, RoutedEventArgs e)
{
  if (_isMaxed)
      this.WindowState = WindowState.Normal;
  else
      this.WindowState = WindowState.Maximized;

  _isMaxed = !_isMaxed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:35:29.493

1.  您可以将骨架传递给您的第二个窗口（例如在构造函数中）并使用其 OnHeadPositionChanged-Event。

2.  只需在 xaml 中添加控件并设置固定位置，例如`Margin="0,10,0,10"`，或使用 Canvas 作为父级并通过`Canvas.Top="0" Canvas.Left="20"`.

# asp.net - 无需四舍五入

> ID：13759661
> 
> 赞同：-1
> 
> 时间：2012-12-07T08:45:16.327
> 
> 标签：asp.net

我怎样才能得到？？

如果我的答案是 1.1

那么输出应该是1.1（实际）

我的代码：-

```
decimal totalUnusedAmount = 0;
decimal.TryParse(txtTotalUnusedAmount.Text, out totalUnusedAmount);

lblAmountDue.Text = ((totalUnusedAmount * Convert.ToDecimal(ViewState["FundedAmount"])) / 100).ToString(); 
```

但从上面的代码，得到答案`1.10`。当我调试代码时，在调试时它给出了 1.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:53:44.930

您只需要指定一种格式来显示数字：

```
lblAmountDue.Text = ((totalUnusedAmount * Convert.ToDecimal(ViewState["FundedAmount"])) / 100).ToString("0.0"); 
```

文档：http: [//msdn.microsoft.com/en-us/library/system.string.format.aspx](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

如果遇到舍入错误，则需要为`100`. 试试这个：

```
lblAmountDue.Text = ((totalUnusedAmount * Convert.ToDecimal(ViewState["FundedAmount"])) / 100M).ToString("0.0"); 
```

数字末尾的`M`告诉编译器它应该被解释为小数而不是`Int32`没有小数位的数字的默认文字类型。

文档： http: [//msdn.microsoft.com/en-us/library/364x0z75 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/364x0z75(v=vs.110).aspx)

要显示您在调试器中看到的确切答案，您需要“往返”选项：

```
lblAmountDue.Text = ((totalUnusedAmount * Convert.ToDecimal(ViewState["FundedAmount"])) / 100M).ToString("R"); 
```

文档： http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)（在表格底部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:00:15.757

试试这个

```
lblAmountDue.Text = ((totalUnusedAmount * Convert.ToDecimal(ViewState["FundedAmount"])) / 100).ToString("G29");` 
```

请注意，如果数字太长，这将显示为 e 的幂。

**为我编辑** 作品

```
decimal tmp = 1.2000000000000M;
Response.Write(tmp.ToString("G29")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T07:42:40.750

我试过这个....它的工作

```
lblAmountDue.Text = ((totalUnusedAmount * Convert.ToDecimal(ViewState["FundedAmount"])) / 100).ToString("0.##"); 
```

[http://www.csharp-examples.net/string-format-double/](http://www.csharp-examples.net/string-format-double/)

# objective-c - 同一类别中的 Objective C 私有公共方法

> ID：13759662
> 
> 赞同：0
> 
> 时间：2012-12-07T08:45:23.250
> 
> 标签：objective-c, cocoa

我想做的是将类别的方法分为私有方法和公共方法。**私有方法需要在该类别的文件之外可见**，而不是在类之外。

例如，假设我有以下文件：

```
ClassA.m
ClassA.h // <-- Includes definitions of public category methods
ClassAPrivates.h // <-- Includes definition of private category methods.
ClassA+Render.m 
```

`ClassAPrivates.h`看起来像这样：

```
@interface ClassA()
// private methods here, for use inside ClassA
@end
@interface ClassA(Render)
// the private methods of the Render category.
-(void)privateConfigureDeviceContext;
-(void)privateConfigureBufferSpace;
@end 
```

'ClassA.h' 看起来像这样：

```
@interface ClassA : NSObject
// public methods of ClassA
@end
@interface ClassA (Render)
// public methods of category Render
-(void)drawLine;
-(void)drawCircle;
@end 
```

但是，XCode 抱怨 Render 的重复接口。任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:13:07.567

无需为私有方法创建单独的类别。

有3种情况：

1.  `ClassA+Render.m`访问定义在`ClassA.m`
2.  `ClassA.m`访问定义在`ClassA+Render.m`
3.  `ClassA+Render.m`访问定义在`ClassA.m`

*注：虽然原贴没有要求场景3，但我认为它可能会派上用场*

**例子**

`ClassA.m`定义了 2 个私有方法

*   `basePrivateMethod1`- 这将调用`renderPrivateMethod1`
*   `basePrivateMethod2`

`ClassA+Render.m`定义了 2 个私有方法

*   `renderPrivateMethod1`
*   `renderPrivateMethod2`- 这将调用`basePrivateMethod2`

**方案 1**

*   `ClassA+Render.m`只需创建一个扩展并转发声明您要使用的方法。

**A类+渲染.m**

```
@interface ClassA ()

- (void) basePrivateMethod1; //Just forward declare the method

@end 
```

**方案 2**

*   只需`ClassA+Render.h`声明.`ClassA+Render.m`
*   在`ClassA.m`只包括 ( `#import`)`ClassA+Render.h`
*   请注意，`ClassA+Render.h`将/不应该在之外使用`ClassA`

**ClassA+渲染.h**

```
@interface ClassA (Render)
{
    - (void) basePrivateMethod2;
} 
```

**方案 3**

*   请注意 - 无法在类别中定义/创建属性
*   因此，创建一个名为的新类别`ClassA+Properties`
*   在`ClassA+Properties.h`重新声明所有属性
*   在`ClassA+Properties.m`用于`@dynamic`所有属性时告诉编译器这些属性的实际定义在 else where
*   在`ClassA+Render.m`include( `#import`)`ClassA+Properties.h`中，这样所有的属性都可以访问

**ClassA+Properties.h**

```
@interface ClassA (Properties)
{
    @property NSUInteger property1;
    @property NSUInteger property2;
} 
```

**ClassA+Properties.m**

```
@interface ClassA (Properties)
{
    @dynamic property1;
    @dynamic property2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:51:48.103

您可以在其自己的文件中的类扩展中声明 Render 的私有方法。这利用了您可以拥有多个类扩展的优势。

`ClassA.h`：

```
@interface ClassA : NSObject
// public methods of ClassA
@end 
```

`ClassA+Render.h`：

```
@interface ClassA (Render)
// public methods of category Render
-(void)drawLine;
-(void)drawCircle;
@end 
```

`ClassA+Render_Private.h`：

```
@interface ClassA ()
// the private methods of the Render category.
-(void)privateConfigureDeviceContext;
-(void)privateConfigureBufferSpace;
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:09:40.297

您声明了两个名为`Render`on 的类别`ClassA`。这就是 Xcode 抱怨的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T09:29:36.120

类别是一个概念，它表明任何新方法都可以添加到现有类中，并且所有子类最终都将获得该方法。

您可以使用类别来定义现有类的其他方法——即使是您无法获得源代码的类——而无需子类化。您通常使用类别将方法添加到现有类，例如在 Cocoa 框架中定义的类。**添加的方法由子类继承，**并且在运行时与类的原始方法无法区分。

如果您要添加私有方法，那么为什么要使用类别？因为它只能由该单个类文件本身使用。因此为什么不创建一个普通的私有方法！！！

# jquery - 使用切换来单击和元素并显示/隐藏其正下方的元素？

> ID：13759673
> 
> 赞同：1
> 
> 时间：2012-12-07T08:46:15.760
> 
> 标签：jquery

我有以下结构：

![在此处输入图像描述](../Images/9cc64e71452e4e117af9e2f8021c50a4.png)

我想`ul.children`通过单击上面的另一个（条）来显示和隐藏。

它应该只显示/隐藏下面的一个，因为该页面充满了具有相同结构的无序列表。

所以我被困在这里：

```
$('#wpbdp-categories > .wpbdp-categories > li.cat-item > a').click(function() {
  ???
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:19:58.657

```
$('#wpbdp-categories > .wpbdp-categories > li.cat-item > a').toggle(
    function() { $(this).next().show() },
    function() { $(this).next().hide() }
); 
```

最简单的方法..

**编辑：**

`.toggle()`处理点击事件，所以你不需要为它定义点击事件。

[http://api.jquery.com/toggle-event/](http://api.jquery.com/toggle-event/)

> .toggle() 方法为点击事件绑定了一个处理程序，因此这里也适用于触发点击的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:47:49.327

```
$('#wpbdp-categories > .wpbdp-categories > li.cat-item > a').click(function() {
  $(this).siblings("ul.children").toggle();
}); 
```

我认为应该工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:49:16.340

尝试使用[.next()](http://api.jquery.com/next/)

例如

```
$(this).next('.children').toggle(); 
```

# mysql - mySQL 得到与同一行中的其他列不匹配的错误列

> ID：13759675
> 
> 赞同：0
> 
> 时间：2012-12-07T08:46:23.967
> 
> 标签：mysql

我是 mySQL 的新手，我可以对以下查询使用一些帮助。

我有一个将发动机设置与实验编号和发动机转速相关的表格，还有另一个将发动机性能与实验编号和发动机相关的表格。

这是我正在做的查询

```
SELECT performance.exp_no, performance.rpm, ignition_timing, horse_power
FROM engine_settings, performance
WHERE performance.rpm = engine_settings.rpm
ORDER BY rpm; 
```

| exp_no | 转数 | 点火正时 | 马力|

| 2 | 1000 | 24.50 | 105.23 |
| 2 | 1000 | 24.00 | 105.23 |
| 1 | 1000 | 24.50 | 100.23 |
| 1 | 1000 | 24.00 | 100.23 |
| 1 | 2000 | 25.50 | 125.03 |
| 1 | 2000 | 25.00 | 125.03 |
| 2 | 2000 | 25.50 | 129.03 |
| 2 | 2000 | 25.00 | 129.03 |
| 1 | 3000 | 26.50 | 154.65 |
| 1 | 3000 | 26.00 | 154.65 |
| 2 | 3000 | 26.50 | 159.65 |
| 2 | 3000 | 26.00 | 159.65 |
| 1 | 4000 | 27.50 | 178.23 |
| 1 | 4000 | 27.00 | 178.23 |
| 2 | 4000 | 27.50 | 184.23 |
| 2 | 4000 | 27.00 | 184.23 |
| 2 | 5000 | 28.50 | 195.36 |
| 2 | 5000 | 28.00 | 195.36 |
| 1 | 5000 | 28.50 | 189.36 |
| 1 | 5000 | 28.00 | 189.36 |

一组 20 行（0.06 秒）

现在以前两行为例。实验 2 的 Ignition_timing 实际上是 24.00，实验 1 是 24.5。那么为什么我得到实验 2 的两个值呢？

这是我想要得到的结果。. .

| exp_no | 转数 | 点火正时 | 马力|
| 2 | 1000 | 24.00 | 105.23 |
| 1 | 1000 | 24.50 | 100.23 |
| 1 | 2000 | 25.50 | 125.03 |
| 2 | 2000 | 25.00 | 129.03 |
| 1 | 3000 | 26.50 | 154.65 |
| 2 | 3000 | 26.00 | 159.65 |
| 1 | 4000 | 27.50 | 178.23 |
| 2 | 4000 | 27.00 | 184.23 |
| 2 | 5000 | 28.00 | 195.36 |
| 1 | 5000 | 28.50 | 189.36 |

获取上表的正确查询是什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:56:47.433

您的查询未加入所有必填字段。您只是在查询的 rpm 字段上加入，而且似乎加入不完整。

```
SELECT performance.exp_no, performance.rpm, ignition_timing, horse_power
FROM engine_settings, performance WHERE performance.rpm = engine_settings.rpm
ORDER BY rpm; 
```

您应该将查询更改为以下内容：

```
SELECT performance.exp_no, performance.rpm, ignition_timing, horse_power
FROM engine_settings INNER JOIN performance 
    ON engine_setting.rpm=performance.rpm 
    AND engine_Settings.exp_no = performance.exp_no
ORDER BY rpm; 
```

由于我没有表结构，我可能是错的，但我怀疑 rpm 和 exp_no 都是某处的主键或外键。

希望这可以帮助。在旁注中查看我示例中的连接语法，它被认为是新标准，因为您编写连接的方式有点过时但没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:49:08.013

只需要一组/ DISCTINCT

```
SELECT 
performance.exp_no, 
performance.rpm, 
ignition_timing, 
DISTINCT(horse_power)
FROM 
engine_settings 
inner join performance ON performance.rpm = engine_settings.rpm
ORDER BY rpm; 
```

或者

```
 SELECT 
    performance.exp_no, 
    performance.rpm, 
    ignition_timing, 
    horse_power
    FROM 
    engine_settings 
    inner join performance ON performance.rpm = engine_settings.rpm
GROUP BY horse_power
    ORDER BY rpm; 
```

# javascript - 将自执行匿名函数分配给 javascript 中的变量有什么好处？

> ID：13759682
> 
> 赞同：2
> 
> 时间：2012-12-07T08:47:04.303
> 
> 标签：javascript, anonymous-function

我正在阅读一篇[关于如何在窗口调整大小完成后触发函数](https://stackoverflow.com/questions/2854407/javascript-jquery-window-resize-how-to-fire-after-the-resize-is-completed)的帖子，并遇到了一些将自执行匿名函数分配给变量的示例：

```
var delay = (function(){
    var timer = 0;
    return function(callback, ms){
        clearTimeout (timer);
        timer = setTimeout(callback, ms);
    };
})();

$(window).resize(function() {
    delay(function(){
      alert('Resize...');
      //...
    }, 500);
}); 
```

与传统使用相比，使函数操作数自动执行有什么区别/好处？IE

```
var delay = function() { ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T08:49:26.657

主要原因是*命名空间变量*。函数引入了一个新的变量范围。在上面的例子中，`timer`没有破坏全局命名空间，同时仍然可供需要它的代码使用。

* * *

因为我显然需要澄清：

目标是在函数之外有一个变量：

```
var timer;

function delay() {
   // use timer
} 
```

因为如果变量在函数内部，每次都会重新初始化。不过，我们希望在函数之外有一个持久值。

在上面的代码`timer`中虽然是一个全局变量。我们不希望*那样*。为了避免这种情况，我们将变量关闭在一个新的范围内，以便`delay`函数可以访问它，但不能全局访问：

```
var delay = (function () {
    var timer;

    return function () {
        // use timer
    };
})(); 
```

`delay`现在和以前一样是一个可以`timer`在自身外部使用的函数，但`timer`不在全局范围内。

# macos - 如何确定我的 .app 实例是否已在运行？

> ID：13759688
> 
> 赞同：3
> 
> 时间：2012-12-07T08:47:46.363
> 
> 标签：macos, cocoa, multiple-instances, .app

我的应用程序正在安装在 Application 文件夹中。但我可以复制这个 .app 文件并将其粘贴到我的桌面上。当我尝试在我的桌面上运行这个 .app 文件时，我的系统上正在运行两个实例。我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:05:35.030

可以通过多种方式，

我想到的第一个方法是查看`runningApplications`. `NSWorkspace`这将返回一个 NSArray，其中包含每个启动的应用程序的字典。您可以遍历数组以查看您要查找的应用程序是否已在运行。

```
NSMutableArray *applications=[NSMutableArray new];    
[applications addObjectsFromArray:[[NSWorkspace new] runningApplications]];
NSLog(@"--> %@",applications); 
```

# asp.net - 在调试其显示“连接被拒绝”[ASP.NET]

> ID：13759689
> 
> 赞同：1
> 
> 时间：2012-12-07T08:47:48.407
> 
> 标签：asp.net

当 LoginPage.aspx 在浏览器上加载时，它显示**'Connection denied'**。TCP/IP 的一些问题？帮我解决。

> //localhost:1537/WebSite2/LoginPage.aspx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:44:05.603

我认为这个问题是由于您的计算机上没有安装防火墙客户端。尝试安装防火墙客户端软件，例如**ISA Client**。我希望这能解决您的问题。

# android - 不在android中设置文本值

> ID：13759693
> 
> 赞同：0
> 
> 时间：2012-12-07T08:48:04.067
> 
> 标签：android

我是 andorid 的新手。我把 textview 从 mymethods 中设置数据。但它强制关闭。但我在另一个活动页面中尝试了它，我的代码工作了。所以我怀疑我的 xml 布局。有没有人处理这个问题，如果是我将非常感激。谢谢这是我的 layout.xml 和我的代码：

```
 String iskate=WorkCat.Kategori(Workid);
         iskat.setText(iskate);
       Log.d("işkategorisi",iskate); 
```

> Log.cat 显示真实值。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="@drawable/backgrund" >

    <!-- Header  Starts -->

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="40dip"
        android:layout_alignParentTop="true"
        android:background="@layout/header" >
    </LinearLayout>

    <!-- Header Ends -->
    <!-- Footer Start -->

    <LinearLayout
        android:id="@+id/footer"
        android:layout_width="fill_parent"
        android:layout_height="40dip"
        android:layout_alignParentBottom="true"
        android:background="@layout/footer" >

        <ImageView
            android:id="@+id/imagegeri"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="220dp"
            android:src="@drawable/geri" />

        <ImageView
            android:id="@+id/imagecikis"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/cikis" />
    </LinearLayout>

    <TextView
        android:id="@+id/textAD"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/header"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="14dp"
        android:layout_marginRight="26dp"
        android:text="Small Text"
      android:textSize="13dp"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#FFFFFF" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/footer"
        android:layout_below="@id/textAD" >

        <ScrollView
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_below="@id/header"
                android:orientation="vertical"
                android:padding="10dip" >

                <TableLayout
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/tableLayout1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >

                    <TableRow>

                        <TextView
                            android:id="@+id/textView1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="İş Kategorisi"
                            android:textAppearance="?android:attr/textAppearanceSmall"
                            android:textColor="#000000"
                            android:textStyle="bold" />

                         <TextView
                            android:id="@+id/txtiskate"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="rfyr"
                            android:textAppearance="?android:attr/textAppearanceSmall"
                            android:textColor="#000000"
                            android:textStyle="bold" />

                    </TableRow>

                    <TableRow>

                        <TextView
                            android:id="@+id/textView2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Aşama"
                            android:textAppearance="?android:attr/textAppearanceSmall"
                            android:textColor="#000000"
                            android:textStyle="bold" />

                        <Spinner
                            android:id="@+id/spinner2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentLeft="true" >
                        </Spinner>
                    </TableRow>

                    <TableRow>

                        <TextView
                            android:id="@+id/textView3"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Görevli"
                            android:textAppearance="?android:attr/textAppearanceSmall"
                            android:textColor="#000000"
                            android:textStyle="bold" />

                        <AutoCompleteTextView
                            android:id="@+id/Searchname"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content" >
                        </AutoCompleteTextView>
                    </TableRow>

                    <TableRow>

                        <TextView
                            android:id="@+id/textView2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Öncelik"
                            android:textAppearance="?android:attr/textAppearanceSmall"
                            android:textColor="#000000"
                            android:textStyle="bold" />

                        <Spinner
                            android:id="@+id/spinner3"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentLeft="true" >
                        </Spinner>
                    </TableRow>

                    <EditText
                        android:id="@+id/edituacikla"
                        android:layout_width="290dp"
                        android:layout_height="140dp"
                        android:ems="10"
                        android:inputType="textMultiLine" />

                    <TableRow>

                        <TextView
                            android:id="@+id/textView1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Gerçekleşen Süre"
                            android:textAppearance="?android:attr/textAppearanceSmall"
                            android:textColor="#000000"
                            android:textStyle="bold" />

                        <EditText
                            android:id="@+id/edittoplm"
                            android:layout_width="40dp"
                            android:layout_height="wrap_content"
                            android:layout_alignBaseline="@+id/textView6"
                            android:layout_alignBottom="@+id/textView6"
                            android:layout_alignLeft="@+id/spinner4"
                            android:ems="10"/>

                        <TextView
                            android:id="@+id/textView5"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Saat"
                            android:textAppearance="?android:attr/textAppearanceSmall" />
                    </TableRow>

                    <TableRow>

                        <TextView
                            android:id="@+id/textView2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Tamamlanan(%)"
                            android:textAppearance="?android:attr/textAppearanceSmall"
                            android:textColor="#000000"
                            android:textStyle="bold" />

                        <Spinner
                            android:id="@+id/spinner5"
                            android:layout_width="wrap_content"
                            android:layout_height="45dp"
                            android:layout_alignParentLeft="true" >
                        </Spinner>
                    </TableRow>

                    <TableRow>

                        <Button
                            android:id="@+id/btnvzgec"
                            style="?android:attr/buttonStyleSmall"
                            android:layout_width="fill_parent"
                            android:layout_height="match_parent"
                            android:text="Vazgec" />

                        <Button
                            android:id="@+id/uwgncelle"
                            style="?android:attr/buttonStyleSmall"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Güncelle" />
                    </TableRow>
                </TableLayout>
            </LinearLayout>
       </ScrollView>
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:58:04.943

'iskate' 应该是 'TextView' 的实例，例如 iskate=(TextView)(TextView)findViewById(这里的 xml 布局的 id)；在您的情况下，它是一个字符串，这怎么可能，这将显示编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:51:30.847

首先，您需要初始化您的 textview，然后才能使用它。试试下面的代码。

```
TextView iskat = (TextView)findViewById(R.id.txtiskate);
String iskate=WorkCat.Kategori(Workid);
iskat.setText(iskate); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:53:49.910

首先初始化你的文本视图

```
TextView iskat = (TextView)findViewById(R.id.txtiskate);
String iskate=WorkCat.Kategori(Workid);
iskat.setText(iskate); 
```

# html - 在绝对位置下浮动

> ID：13759695
> 
> 赞同：1
> 
> 时间：2012-12-07T08:48:24.933
> 
> 标签：html, css

我有一个似乎无法解决的问题。我有一个很大的背景横幅，但`position: absolute`问题是，我希望我的页脚一直在它下面——不管横幅的高度是多少。

一个例子：页脚看起来很好：`http://danne-bro.com.web122.curanetserver.dk/histor.aspx` 页脚不很好：`http://danne-bro.com.web122.curanetserver.dk/who.aspx`

正如您在源代码中看到的那样，我已经尝试了很多东西。我想要完成的一个抓取版本将是这样的：

```
 <div id="fit">
    <div class="wrapper">
      <div id="banner">BANNER IN HERE - Position Absolute so its always underneath</div>
    </div>
<div class="wrapper">
All content goes here - which is on top of the banner
</div>
    </div>
    <div id="footer">
    Footer in here - should float right under the banner.
    </div> 
```

但究竟如何让页脚留在横幅下（无论它的高度）对我来说是个问题。我希望我能很好地解释自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:51:22.367

你不能`float`一个`absolute positioned`元素，因为当你使用`position: absolute;`你的元素离开文档流时，你需要使用顶部，左侧，右侧，底部来定位它，浮动不会在绝对位置上工作，或多或少你可以做的是使用绝对定位容器内的 div `position: relative;`，或者尝试使用 ryan fait 的[粘性页脚](http://ryanfait.com/sticky-footer/)

# android - Android Intent-filter 未在某些设备上使用 android:scheme 注册

> ID：13759698
> 
> 赞同：4
> 
> 时间：2012-12-07T08:48:31.580
> 
> 标签：android, intentfilter, url-scheme

我的 android 应用程序应该与我们的网站进行交互，做一些流式传输。如果用户没有安装应用程序，我们会提供一个网页通知应用程序和下载链接。

信息页面位于： http: [//my.site.no/android](http://my.site.no/android)

所有的链接都以这个信息页面为前缀：http://my.site.no/android?url=http: [//something.to.stream](http://my.site.no/android?url=http://something.to.stream)

在应用程序中，我声明了以下意图过滤器：

```
<intent-filter>
    <data android:scheme="http" android:host="my.site.no" android:pathPrefix="/android" />
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
</intent-filter> 
```

这适用于大多数设备。但有些设备（尤其是三星 Galaxy SIII）拒绝注册此意图过滤器。即使安装了应用程序，用户也总是会进入信息页面。这不仅发生在标准浏览器上，还发生在同一设备上的其他浏览器上，例如 firefox 和 chrome。拒绝注册意图的设备上没有活动的“默认应用程序”设置。

知道可能出了什么问题吗？或者如何尝试调试它以找到原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:59:08.010

可能您需要为“https”方案注册另一个。我在某些应用程序中遇到了这个问题，这解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T09:21:47.247

有类似的问题。就我而言，这是由于活动意外设置

```
android:exported="false" 
```

在 AndroidManifest.xml 中。似乎某些设备/Android 版本尊重此标志，而有些则不。就我而言，它适用于 HTC Sensation (Android 4.0.3)，但不适用于 HTC One X (Android 4.1.1) 或三星 Galaxy S III (Android 4.1.2)。

# javascript - 在 javascript Web 资源中使用“GetGlobalContext”

> ID：13759699
> 
> 赞同：2
> 
> 时间：2012-12-07T08:48:34.540
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm

我正在 MS CRM 功能区中创建一个自定义按钮，该按钮在实体中创建记录，（我正在使用 odata），这个按钮午餐是一个 JavaScript 函数，它使用“GetGlobalContext”方法来获取上下文，我面临以下问题：

**属性“GetGlobalContext”的值为 null 或未定义**

这是我的示例代码：

```
//Parameters
var ODataPath;
var serverUrl;

//add the below script to the page DOM 
var imported = document.createElement('script');
imported.src = 'ClientGlobalContext.js.aspx';
document.getElementsByTagName('head')[0].appendChild(imported);

//On COnvert to case click
function OnConvertClick(message) {

    alert(Xrm.Page.getAttribute(message).getValue());
    var data = {
        subject: Xrm.Page.getAttribute(message).getValue()
    };

    CreateCaseOffer("incident", data);
}

//create case from an activity
function CreateCaseOffer(EntityName, data) {

    var context = GetGlobalContext(); //GetGlobalContext function exists in ClientGlobalContext.js.aspx
    serverUrl = location.protocol + "//" + location.hostname + ":" + location.port + "/" + context.getOrgUniqueName();
    ODataPath = serverUrl + "/XRMServices/2011/OrganizationData.svc";

    var jsonCaseOffers = window.JSON.stringify(data);
    if (jsonCaseOffers != null) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            datatype: "json",
            url: ODataPath + "/" + EntityName + "Set",
            data: jsonCaseOffers,
            beforeSend: function (XMLHttpRequest) {
                XMLHttpRequest.setRequestHeader("Accept", "application/json");
            },
            success: function (data, textStatus, XmlHttpRequest) {
                $.each(data, function (k, v) {
                    alert(k + " - " + v);
                });
            },
            error: function (XmlHttpRequest, textStatus, errorThrown) {
            }
        });
    }
} 
```

有什么建议么 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:01:14.110

它现在可以正常使用 var

```
var context = Xrm.Page.context; 
```

代替

```
var context = GetGlobalContext(); 
```

# jquery - jQuery 获取表中点击的 tr 的第二个到第十个 td 的值。我已经有了第一个

> ID：13759702
> 
> 赞同：1
> 
> 时间：2012-12-07T08:49:13.100
> 
> 标签：jquery, click, html-table

```
 $("#existcustomers tr").click(function () {
                        var td1 = $(this).children("td").first().text();
                        alert(td1);
                    }); 
```

我也需要 td2-td10 的值。我似乎无法弄清楚如何做到这一点。我尝试`.second()`以相同的方式使用，但这似乎破坏了编程。有谁知道如何为以下 td 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:53:15.600

用`eq(index)`起来很容易找到。

```
$("#existcustomers tr").click(function () {
    var td1 = $(this).children("td").first().text();
    var td2 = $(this).find("td").eq(2).text();
    var td10 = $(this).find("td").eq(10).text();
    alert(td1 + "-" + td2 + "-" + td10);
}); 
```

获取 td2 - td10 范围的值：

```
$("#existcustomers tr").click(function () {
    var td1 = $(this).children("td").first().text();
    var result = "";
    for(var i=2; i<=10; i++) {
        result = result + " - " + $(this).find("td").eq(i).text();
    }
    alert(td1 + result);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:51:02.617

要按索引获取特定单元格，您可以使用：

```
$(this).children(":eq(1)") 
```

要获得前 10 个孩子，请使用：

```
$(this).children(":lt(10)") 
```

如果你想在数组的不同单元格中获取内容，你可以这样做

```
var texts = $(this).children(":lt(10)").map(function(){return $(this).text()}); 
```

这使得一个像这样的数组：

```
["contentofcell1", "cell2", "3", "cell 4", "five", "six", "sieben", "otto", "neuf", "X"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:51:05.607

```
$(this).children("td").each(function() {
  alert($(this).text());
} 
```

将循环遍历所有`td`s。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T08:52:05.827

试试这个

```
$("#existcustomers tr").click(function() {
    var td1 = "";
    // To get values of td's between 2 and 10 we should search for
    // the td's greater than 1 and less than 11...
    $.each($(this).children("td:lt(11):gt(1)"),function() {
        td1 += $(this).text();
    });
    alert(td1);
}); 
```

# java - JAVA整数问题

> ID：13759713
> 
> 赞同：0
> 
> 时间：2012-12-07T08:49:40.867
> 
> 标签：java, call

我写了一个排序算法（气泡），我使用了 10000 个唯一值，即

```
int BubArray[] = new int[]{#10000 unique unsorted values#}; 
```

我想知道如何将整数放入文件并调用文件而不是代码中的 10000 个整数。

他们还会采用哪种格式（逗号，空格？）我不确定。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:55:20.803

这不是正确答案，只是提示如何使用文件，但您可以根据需要修改代码并使其可用。

```
 try {

        String str;
                    String[] temp;

        BufferedReader br = new BufferedReader(new FileReader("your filepath"));

        while ((str= br.readLine()) != null) {
                            temp = str.split(";"); // seperator words bye;
            System.out.println(str);
                    for(int i = 0; i<temp.lenght; i++)
                            System.out.println(temp[i]);
        }

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null)br.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:55:07.910

假设您需要一些随机数来测试您的排序方法：

```
int amount = 1000;
int[] array = new int[amount];
Random rand = new Random();
for (int i = 0; i < array.length; i++) {
    array[i] = rand.nextInt();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T08:57:06.213

把它放在一个`File`由换行符分隔的地方，并使用 a[`Scanner`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)逐行读取，将它们放入一个数组中。

来自 Scanner 文档页面的示例：

```
 Scanner sc = new Scanner(new File("myNumbers"));
  while (sc.hasNextLong()) {
      long aLong = sc.nextLong();
  } 
```

您可以轻松地将其修改为 get`int`而不是`long`使用`hasNextInt()`and`nextInt()`方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T08:58:29.143

如果你想给输入 1000 个不同的唯一值 Random 不是一个好主意。Random 可以多次给出相同的值。

# java - 当安卓手机连接到它时，使 Java 应用程序同步 PC 上的联系人

> ID：13759714
> 
> 赞同：0
> 
> 时间：2012-12-07T08:49:43.757
> 
> 标签：java, android, usb, interfacing

我不知道如何开始建立这个简单的想法：

当 Android 手机连接到 PC 时，PC 上运行的 Java 应用程序会检测到该设备并开始同步 Android 手机中的联系人。

谁能帮助我如何开始这个？我知道如何用 Java 编写应用程序，但从未使用过 android OS 或为 android 操作系统制作过应用程序。这就是我无法开始的原因。请告诉我，在我开始之前是否需要深入研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:39:56.403

联系人信息只能在安卓应用程序中获取，因此您必须编写一个安卓应用程序和一个PC应用程序，并在它们之间传输数据。

1.  当设备连接到 pc 时，自动启动您的 pc 应用程序。
2.  将您的 android 应用程序安装到设备上。

    `adb install apk-path`

3.  启动安卓应用。

    `adb shell am start -n pkgname/activityname`

4.  启动一个 tcp 连接。

    `adb forward tcp:port tcp:port`

    阅读此[页面](http://www.anothem.net/archives/2010/10/15/android-usb-connection-to-pc/)了解详情。

5.  尝试在 android 应用中收集联系人并将其传输到 pc。android中如何获取联系人的文章很多，数据传输会用到Serialization和Socket编程。

adb（android debug tool）是一个android sdk工具，你需要了解更多。

# c# - 在c#中对数据库列条目求和

> ID：13759715
> 
> 赞同：0
> 
> 时间：2012-12-07T08:49:49.917
> 
> 标签：c#, sql, sql-server

我是 SQL 和数据库的新手。我在 SQL Server 中有一个表。在该表中有一个列`price`。我想总结所有的价格。我尝试的是：

```
var totalAmount = db.Orders.Select(p => new { sum += p.Price }); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T08:53:02.153

您可以尝试执行 .Sum 如下所示：

```
var totalAmount = db.Orders.Select(p => p.Price ?? 0).Sum(); 
```

[使用 linq to sql](https://stackoverflow.com/questions/1744673/sum-column-with-linq-to-sql)的 sum 列中的类似问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:51:36.947

```
var totalAmount = db.Orders.Sum(p => p.Price); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:52:35.157

你应该使用`SUM`（*LiNQ 扩展方法*）

```
int total = db.Orders.Sum(p => p.Price); 
```

# visual-studio-2010 - 共享开发机器和本地工作区

> ID：13759720
> 
> 赞同：0
> 
> 时间：2012-12-07T08:50:00.410
> 
> 标签：visual-studio-2010, version-control, tfs

假设我们有一台由许多开发人员共享的机器。开发人员可以访问项目的不同部分，他们看不到所有相同的完整源代码。假设我们甚至使用这台共享机器来测试一些测试程序的工作面试官。

我们如何保护本地工作空间中的源代码？我的意思是，我们不希望开发人员/求职面试官能​​够看到/复制他们不允许看到的内容。我们在 Windows 环境中使用 Visual Studio & TFS 2012。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:55:31.030

如果您的用户没有管理员权限，您可以将工作区存储在用户配置文件中。因此，只有他们（和管理员）才能访问它。但是你应该小心这一点，因为配置文件的大小可能会变得非常大，这会影响你在其他机器上的登录时间。此外，一些公司为配置文件设置了最大大小，使用这种方法可以快速超过该大小。

另一种选择是将工作空间存储在具有个性化权限的网络共享上。

# javascript - 击球时重新定位球。HTML5 画布

> ID：13759723
> 
> 赞同：0
> 
> 时间：2012-12-07T08:50:15.563
> 
> 标签：javascript, html, canvas, positioning

我正在使用 Canvas 开发足球网络摄像头游戏，仍在使用 headtrackr (https://github.com/auduno/headtrackr)

这里是在线的；[http://www.chrissnoek.com/ubicomp/webcam.html](http://www.chrissnoek.com/ubicomp/webcam.html)

到目前为止，我设法检查了我的矩形是否击中了我的球，然后计数器变为 +1

唯一的问题是，如果矩形击中它，我无法重新定位我的球。

我尝试过这种方式，但球不断重绘，就像矩形一样。

```
 bal.x = Math.floor(Math.random()* (640) + 20);
 bal.y = Math.floor(Math.random()* (120) + 20); 
```

但这不起作用。这是我的完整代码；

有什么建议可以在击球时移动球吗？

```
<!doctype html>
<html lang="en">
    <head>
        <title>facetracking</title>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
        <meta charset="utf-8">

        <script src="js/animate.js"></script>
        <script src="js/delta.js"></script>

        <script src="./js/headtrackr.js"></script>
    </head>

    <body>
        <span id="counter">0</span>

        <canvas id="compare" width="640" height="480" style="display:none"></canvas>
        <video id="vid" autoplay loop width="640" height="480" style="width: 640px"></video>
        <canvas id="overlay" width="640" height="480"></canvas>
        <canvas id="Baloverlay" width="640" height="480"></canvas>
        <canvas id="bal" width="640" height="480"></canvas>
        <canvas id="debug" width="640" height="480"></canvas>

        <p id='gUMMessage'></p>
        <p>Status : <span id='headtrackerMessage'></span></p>
        <p>
            <input type="button" onclick="htracker.stop();htracker.start();" value="reinitiate facedetection"></input>
            <br/><br/>
            <input type="checkbox" onclick="showProbabilityCanvas()" value="asdfasd"></input>Show probability-map
        </p>

        <script>
          // set up video and canvas elements needed

            var videoInput = document.getElementById('vid');
            var canvasInput = document.getElementById('compare');
            var canvasOverlay = document.getElementById('overlay');
            var balOverlay = document.getElementById('bal');
            var debugOverlay = document.getElementById('debug');
            var overlayContext = canvasOverlay.getContext('2d');
            var balOverlay = document.getElementById('Baloverlay');
            var balContext = balOverlay.getContext('2d');
            var counter = document.getElementById('counter'),
                count = 0;

            canvasOverlay.style.position = "absolute";
            canvasOverlay.style.top = '0px';
            canvasOverlay.style.zIndex = '100001';
            canvasOverlay.style.display = 'block';
            balOverlay.style.position = "absolute";
            balOverlay.style.top = '0px';
            balOverlay.style.zIndex = '100002';
            balOverlay.style.display = 'block';
            debugOverlay.style.position = "absolute";
            debugOverlay.style.top = '0px';
            debugOverlay.style.zIndex = '100003';
            debugOverlay.style.display = 'none';

            // add some custom messaging
            statusMessages = {
                "whitebalance" : "checking for stability of camera whitebalance",
                "detecting" : "Detecting face",
                "hints" : "Hmm. Detecting the face is taking a long time",
                "redetecting" : "Lost track of face, redetecting",
                "lost" : "Lost track of face",
                "found" : "Tracking face"
            };

            supportMessages = {
                "no getUserMedia" : "Unfortunately, <a href='http://dev.w3.org/2011/webrtc/editor/getusermedia.html'>getUserMedia</a> is not supported in your browser. Try <a href='http://www.opera.com/browser/'>downloading Opera 12</a> or <a href='http://caniuse.com/stream'>another browser that supports getUserMedia</a>. Now using fallback video for facedetection.",
                "no camera" : "No camera found. Using fallback video for facedetection."
            };

            document.addEventListener("headtrackrStatus", function(event) {
                if (event.status in supportMessages) {
                    var messagep = document.getElementById('gUMMessage');
                    messagep.innerHTML = supportMessages[event.status];
                } else if (event.status in statusMessages) {
                    var messagep = document.getElementById('headtrackerMessage');
                    messagep.innerHTML = statusMessages[event.status];
                }
            }, true);

            // the face tracking setup
            var htracker = new headtrackr.Tracker({altVideo : {ogv : "./media/capture5.ogv", mp4 : "./media/capture5.mp4"}, calcAngles : true, ui : false, headPosition : false, debug : debugOverlay});
            htracker.init(videoInput, canvasInput);
            htracker.start();

            // for each facetracking event received draw rectangle around tracked face on canvas

            document.addEventListener("facetrackingEvent", function( event ) {
                // clear canvas
                overlayContext.clearRect(0,0,640,480);
                // once we have stable tracking, draw rectangle

                if (event.detection == "CS") {
                    overlayContext.translate(event.x, event.y)
                    //overlayContext.rotate(event.angle-(Math.PI/2));
                    overlayContext.strokeStyle = "#00CC00";
                    overlayContext.strokeRect((-(event.width/2)) >> 0, (-(event.height/2)) >> 0, event.width, event.height);
                    //overlayContext.rotate((Math.PI/2)-event.angle);
                    overlayContext.translate(-event.x, -event.y);
                    var bal = new ball();
                    lookForBallInbound(event.x, event.y, event.width, event.height);
                }
            });

            // turn off or on the canvas showing probability
            function showProbabilityCanvas() {
                var debugCanvas = document.getElementById('debug');
                if (debugCanvas.style.display == 'none') {
                    debugCanvas.style.display = 'block';
                } else {
                    debugCanvas.style.display = 'none';
                }
            }

            /*==============================================
            //////////  KIJK OF BAL BINNEN VAK VALT ////////
            ==============================================*/

            function lookForBallInbound(boxX,boxY,boxWidth,boxHeight) {  
                var rightCornerX = boxX - (boxWidth / 2),
                        topY = boxY - (boxHeight / 2);

                if(rightCornerX <= xxx){
                    if((rightCornerX + boxWidth) <= xxx) {
                        return false;
                    } else {
                        // balls is in the box at the x axis
                        // Now check for Y
                        if (topY <= yyy) {
                            // Top is also inbound, => AWESOME <=

                            /*========================================
                                    RECALCULATE BALL POSITION
                            ========================================*/

                            bal.x = Math.floor(Math.random()* (640) + 20);
                            bal.y = Math.floor(Math.random()* (120) + 20);

                            /*========================================
                                    INCREASE AND OUTPUT COUNTER
                            ========================================*/

                            count++;

                            counter.innerHTML = '';
                            counter.innerHTML = count;
                        }
                    }
                }
            }

            var xxx = Math.floor(Math.random()* (640) + 20);
            var yyy = Math.floor(Math.random()* (120) + 20);
            var ballRadius = 20;

            function ball() {
                console.log('Ball recalculating');

                balContext.beginPath();

                balContext.arc(xxx, yyy, ballRadius, 0, 2 * Math.PI, false);
                balContext.fillStyle = 'green';
                balContext.fill();
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:52:03.587

像这样的东西应该工作。请注意，ball 被定义为全局变量。

```
var videoInput = document.getElementById('vid');
var canvasInput = document.getElementById('compare');
var canvasOverlay = document.getElementById('overlay');
var debugOverlay = document.getElementById('debug');
var overlayContext = canvasOverlay.getContext('2d');
var balOverlay = document.getElementById('Baloverlay');
var balContext = balOverlay.getContext('2d');
var counter = document.getElementById('counter'),
    count = 0,
    ball,
    statusMessages,
    supportMessages,
    htracker;

canvasOverlay.style.position = "absolute";
canvasOverlay.style.top = '0px';
canvasOverlay.style.zIndex = '100001';
canvasOverlay.style.display = 'block';
balOverlay.style.position = "absolute";
balOverlay.style.top = '0px';
balOverlay.style.zIndex = '100002';
balOverlay.style.display = 'block';
debugOverlay.style.position = "absolute";
debugOverlay.style.top = '0px';
debugOverlay.style.zIndex = '100003';
debugOverlay.style.display = 'none';

// add some custom messaging
statusMessages = {
    "whitebalance": "checking for stability of camera whitebalance",
    "detecting": "Detecting face",
    "hints": "Hmm. Detecting the face is taking a long time",
    "redetecting": "Lost track of face, redetecting",
    "lost": "Lost track of face",
    "found": "Tracking face"
};

supportMessages = {
    "no getUserMedia": "Unfortunately, <a href='http://dev.w3.org/2011/webrtc/editor/getusermedia.html'>getUserMedia</a> is not supported in your browser. Try <a href='http://www.opera.com/browser/'>downloading Opera 12</a> or <a href='http://caniuse.com/stream'>another browser that supports getUserMedia</a>. Now using fallback video for facedetection.",
    "no camera": "No camera found. Using fallback video for facedetection."
};

document.addEventListener("headtrackrStatus", function(event) {
    var messagep;
    if (event.status in supportMessages) {
        messagep = document.getElementById('gUMMessage');
        messagep.innerHTML = supportMessages[event.status];
    } else if (event.status in statusMessages) {
        messagep = document.getElementById('headtrackerMessage');
        messagep.innerHTML = statusMessages[event.status];
    }
}, true);

// the face tracking setup
htracker = new headtrackr.Tracker({
    altVideo: {
        ogv: "./media/capture5.ogv",
        mp4: "./media/capture5.mp4"
    },
    calcAngles: true,
    ui: false,
    headPosition: false,
    debug: debugOverlay
});
htracker.init(videoInput, canvasInput);
htracker.start();

// for each facetracking event received draw rectangle around tracked face on canvas
document.addEventListener("facetrackingEvent", function(event) {
    // clear canvas
    overlayContext.clearRect(0, 0, 640, 480);
    // once we have stable tracking, draw rectangle
    if (event.detection == "CS") {
        overlayContext.translate(event.x, event.y);
        //overlayContext.rotate(event.angle-(Math.PI/2));
        overlayContext.strokeStyle = "#00CC00";
        overlayContext.strokeRect((-(event.width / 2)) >> 0, (-(event.height / 2)) >> 0, event.width, event.height);
        //overlayContext.rotate((Math.PI/2)-event.angle);
        overlayContext.translate(-event.x, -event.y);
        if (!ball) { // if there is no ball then make one
            ball = new Ball();
        }
        lookForBallInbound(event.x, event.y, event.width, event.height);
    }
});

// turn off or on the canvas showing probability

function showProbabilityCanvas() {
    var debugCanvas = document.getElementById('debug');
    if (debugCanvas.style.display == 'none') {
        debugCanvas.style.display = 'block';
    } else {
        debugCanvas.style.display = 'none';
    }
}

/*==============================================
            //////////  KIJK OF BAL BINNEN VAK VALT ////////
            ==============================================*/

function lookForBallInbound(boxX, boxY, boxWidth, boxHeight) {
    var leftX = boxX - boxWidth / 2, rightX = leftX + boxWidth,
        topY = boxY - boxHeight / 2, bottomY = topY + boxHeight;
    if (!ball) return;
    if (leftX <= ball.x && rightX >= ball.x &&
        topY <= ball.y && bottomY >= ball.y) {
        ball = new Ball();
        // ^  replace the existing ball with a randomly positioned new one
        count++;
        counter.innerHTML = count;
    }
}

function Ball() {
    console.log('making new ball');
    this.x = Math.floor(Math.random() * 640 + 20);
    this.y = Math.floor(Math.random() * 120 + 20);
    this.radius = 20;
    this.draw = function() {
        balContext.clearRect(0, 0, 640, 480);
        balContext.beginPath();

        balContext.arc(this.x, this.y, this.radius, 0, 2 * Math.PI, false);
        balContext.fillStyle = 'green';
        balContext.fill();
    }
    this.draw();
}​ 
```

# c# - 将 DisplayFor 与嵌套属性的单个索引一起使用 - Lambda 参数不在范围内

> ID：13759730
> 
> 赞同：1
> 
> 时间：2012-12-07T08:51:08.103
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我有一个`Approval`类，它有一个`ApprovalDocument`对象列表。
该类`Approvals`有一个`ActiveApprovalDocument`属性。

我的模型有一个`Approval`s 列表。

我也想显示活动批准文件的属性：

```
<%= Html.DisplayFor(m => m.Approvals[i].ApprovalDocuments[m.Approvals[i].ActiveApprovalDocumentsId.Value].CertificationIssuedDate)%> 
```

我意识到我可以直接显示`Model.Approvals[i]....`，但**我怎么还能使用`DisplayFor`（所以我得到自动格式化等）？**

* * *

我得到的错误是：

> System.InvalidOperationException：表达式编译器无法评估索引器表达式“m.Approvals.get_Item(value(ASP.areas_approvals_views_approvals_index_aspx+<>c__DisplayClass0).i).ActiveApprovalDocumentsId.Value”，因为它引用了不可用的模型参数“m” . ---> System.InvalidOperationException：Lambda 参数不在范围内

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:57:31.910

```
<% var j = Model.Approvals[i].ActiveApprovalDocumentsId.Value; %>
<%= Html.DisplayFor(m => m.Approvals[i].ApprovalDocuments[j].CertificationIssuedDate) %> 
```

或者只是使用视图模型。

# android - 如何正确使用两个活动之间的圆形进度条？

> ID：13759735
> 
> 赞同：0
> 
> 时间：2012-12-07T08:51:27.530
> 
> 标签：android, android-progressbar

我在使用圆形进度条时遇到了问题，我在布局的背景中将其设置为不可见。当我想开始新的活动时，我将它设置为可见的布局，它显示得很好，但进度条的动画效果不好，有时会旋转一点，然后再旋转一点后停止......它不流畅。我尝试解决这个问题，但似乎没有用：

```
button2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {

          progressBar.setIndeterminate(true);
          progressLayout.setVisibility(View.VISIBLE);
          final CustomOverlayItem i = item;

          Runnable intentRunnable = new Runnable()
          {
              public void run()
              {
                  Intent intent = new Intent(context,Next.class);
                  startActivityForResult(intent, RETURN_FROM_MONUMENTO);
              }
          };

          intentRunnable.run();
    }

}); 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:09:52.343

您从其他活动接收数据的部分会很有趣。不需要在 Runnable 中发送意图，因为这是一个非常便宜的操作（我认为）。但是接收返回的结果可能会导致一些繁重的操作。断断续续的动画通常表明您正在 UIThread 上做一些您不应该做的事情（或者设备太慢而无法处理所有线程的负载）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:20:19.607

如果您在您启动的下一个活动中做与网络相关的事情。使用`AsyncTask`它，这样就不会阻塞 UI 线程，它会使`ProgressBar`动画平滑。

# php - Facebook Api：以用户或页面的身份在页面上发布帖子

> ID：13759736
> 
> 赞同：2
> 
> 时间：2012-12-07T08:51:28.060
> 
> 标签：php, facebook-like

我正在使用 PHP SDK 请求一个 api 来喜欢我自己页面上的帖子。

```
$like = $facebook->api("/".$postid."/likes", 'post'); 
```

然而，代码运行顺利，但是当我喜欢自己页面上的帖子时，“喜欢”是从页面本身发送的，而不是作为我的用户帐户发送的。截至“{我的页面}喜欢这个。” 而不是“你喜欢这个”。

是否有任何解决方法或领域？

权限：（扩展）仅发布流

更新：Facebook 决定没有必要修复这个错误。20/12/2012 23:06 · 状态更改为已关闭 · 优先级更改为无

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:09:34.930

Facebook API 在进行 API 调用时使用当前登录的用户。因此，如果在您的 Facebook 帐户中指定将其用作 YOUR_PAGE_NAME，那么是的，所有操作（例如：“赞”、“评论”、“分享”等）都将来自您的页面，而不是来自您的个人帐户。如果您想在您的个人帐户中“喜欢”帖子，那么您应该访问 facebook.com，单击“主页”菜单旁边的箭头，然后选择“将 Facebook 用作：您的姓名”。

希望这可以帮助。

# coldfusion - 通过 include 引入附加功能的 cfc

> ID：13759745
> 
> 赞同：1
> 
> 时间：2012-12-07T08:52:17.030
> 
> 标签：coldfusion, coldfusion-9, application.cfc, fw1

我的 application.cfc 以：

`<cfcomponent extends="org.corfield.framework">`

稍后的`void function setupApplication() output="false" {`

我有

```
// tools
include "initapp.cfm"; 
```

initapp.cfm 除了函数之外什么都没有。像：

```
<!--- Helper functions --->
<cfscript>
string function stripHTML(str) output="false" {
return REReplaceNoCase(arguments.str,"<[^>]*>","","ALL");
}

application.stripHTML = stripHTML;

</cfscript> 
```

函数的性质与会话无关。有没有更好的方法让函数在全球范围内可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:26:32.807

如果您尝试将辅助函数放在一起以在 CFC 中使用，则一种选择可能是使用 component.cfc 文件。

> **使用 component.cfc 文件**
> 
> 所有 CFC 都会自动扩展 ColdFusion WEB-INF/cftags/component.cfc 组件。（WEB-INF 目录位于配置了嵌入式 J2EE 服务器的 ColdFusion 上的 cf_root/wwwroot 目录中。当您在 J2EE 服务器上部署 ColdFusion 时，它位于 cf_root 目录中。）此 CFC 作为零长度文件分发。**您可以将它用于您希望 ColdFusion 应用程序服务器实例中的所有 CFC 继承的任何核心方法或属性。**
> 
> *Note: When you install a newer version of ColdFusion, the installation procedure replaces the existing component.cfc file with a new version. Therefore, before upgrading, you should save any code that you have added to the component.cfc file, and then copy the code into the new component.cfc file.*

If that solution is TOO global you can extend your helper cfc, but it has to be done in every cfc and doesn't answer your one-time-set-it-and-forget-it idea. See [Using CFCs effectively](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=buildingComponents_30.html)

If your helper functions are for use in .cfm files, I'd do like Adam suggested. I usually put my helper functions in a "tools" cfc located in a CFC folder and make it an application scoped cfc.

```
function onApplicationStart(){
    application.tools = createObject("component", "cfc.tools");
} 
```

One of my helper functions logs the time it takes to index a solr collection. Using it looks like

```
<cfset application.tools.logSolrIndex('collectionName',getTickCount()-start,qFileList.recordCount)> 
```

**Last resort:** If you had to stick with an include for use outside of the application.cfc, I might simply include initapp.cfm onRequest() before you include your page.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T09:15:16.117

将函数放入库 CFC 中，然后将该 CFC 的实例放入`onApplicationStart()`.

也就是说，如果您随后在其他 CFC 中引用此应用程序范围的 CFC，您将有点破坏封装，这是一个考虑因素（不一定是交易破坏者，而是一个考虑因素）。

您可以查看某种依赖注入方法来缓解这种情况（例如：[ColdSpring](http://www.coldspringframework.org/)）

无论我最终以哪种方式去做，恐怕我都*不会*像你那样做。

# c++ - 故意返回 NaN

> ID：13759749
> 
> 赞同：19
> 
> 时间：2012-12-07T08:52:30.530
> 
> 标签：c++, nan

我正在编写一个光线追踪器，该过程的一部分是发射可能会或可能不会击中对象（几何对象）的光线。如果没有发生交集（交集是虚构的），许多描述对象的方程自然返回 NaN，但如果没有发生交集，并非所有对象都返回 NaN。

我知道如果没有发生交集，我可以强制返回 sqrt(-1)，但我想知道是否有办法以更便宜的方式返回它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-07T08:56:13.253

这应该有效：

```
#include <limits>

return std::numeric_limits<double>::quiet_NaN(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-07T08:55:18.930

```
return std::numeric_limits<double>::quiet_NaN(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-13T17:22:22.970

我知道这是一个老问题，但是对于 C++11，您拥有`nan(const char*)`一系列函数（`nan`对于双精度数、`nanl`长双精度`nanf`数和浮点数）。该参数是特定于实现的，但传递一个空字符串（例如`nan("")`）返回一个通用的 NaN 值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-17T17:59:33.220

from的`NAN`宏`math.h`也有效。

# php - html表单和php

> ID：13759750
> 
> 赞同：0
> 
> 时间：2012-12-07T08:52:33.377
> 
> 标签：php, html, wampserver

我在我的电脑上使用 wampserver 并写了一个简单的 html 表单：

```
 <form name="test" action="upload_file.php" method="post">
 <label for="file">Filename:</label>
 <input  type="file" name="picurl" id="file" ><br>
 <input  type="submit" name="submit" value="Submit"  >
 </form> 
```

当我单击“浏览”并打开一个文件时，例如 pil.png 它在输入文本区域中显示完整路径（C:\Users\hope\Desktop\images\pil.png）我希望保存这个确切的链接但是当我试图抓住它 $name = $_POST["name"];它只显示 this-"pil.png" 而不是完整路径。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:55:49.337

您无法获得完整的本地文件路径。只有文件数据本身及其名称被提交给服务器。输入元素中显示的文件路径只是视觉样式，它没有任何功能。

出于安全原因，文件元素非常有限，这是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:55:16.400

浏览器不会提交完整路径，因为这将是一个隐私问题，您会将文件系统结构暴露给服务器。它与服务器无关，服务器不需要知道文件在客户端文件系统上的位置。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-07T08:57:33.080

您只得到 file_name 因为您不要求路径。

要获得完整路径，您必须使用

```
public string SplFileInfo::getRealPath ( void ) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-07T09:02:10.867

try

```
var_dump($_FILES['picurl']); 
```

# c++ - 代码如何捕获异常？

> ID：13759756
> 
> 赞同：2
> 
> 时间：2012-12-07T08:52:57.873
> 
> 标签：c++, visual-studio, exception, assembly, exception-handling

代码如何捕获异常（try、catch(...)）？

```
push 0FFFFFFFFh
...
mov eax, dword ptr fs:[00000000h]
...
mov dword ptr fs:[00000000h],eax  
mov dword ptr [ebp-10h],esp 
```

这段代码在捕获异常的函数“头”中是什么意思？

```
mov dword ptr [ebp-4], 0 
```

而这个（在“尝试”的头部）？函数没有任何局部变量。

功能：

```
int SUM(int a, int b)
{
    try{}
    catch(...){}
    return 0;
} 
```

FS段有什么商店？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T08:58:42.117

存储的值`fs:[0]`是指向结构链表的指针`EXCEPTION_REGISTRATION`。阅读此处了解更多详情：

[Win32 结构化异常处理深度速成课程，MSJ 1997 年 1 月](http://www.microsoft.com/msj/0197/exception/exception.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:04:56.847

MSVC 如何实现异常（在 x86 上）：[https ://www.openrce.org/articles/full_view/21](https://www.openrce.org/articles/full_view/21)

这涵盖了 SEH ( `__try/__catch/__finally`) 和 C++ ( `try/catch`) 异常实现。

MSVC (x64) 和 GCC (Linux/iOS) 如何实现异常处理：[http ://www.hexblog.com/?p=704](http://www.hexblog.com/?p=704)

# android - 如何在 Android 上使用 Intent 启动导航活动

> ID：13759758
> 
> 赞同：-2
> 
> 时间：2012-12-07T08:53:03.203
> 
> 标签：android, android-intent, android-maps

我想从我的活动开始导航。要求是当用户单击我的应用程序中的方向按钮时，它应该在 Android 设备上启动导航应用程序并显示从当前位置到目标位置的方向。

我已经为 Maps 完成了此操作，我在地图上显示方向并启动 Map 活动，但现在我想启动导航，并且在没有任何用户交互的情况下显示具有起点和终点地理位置的路线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:59:43.633

这是您需要的代码：

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("google.navigation:q=Berlin Germany")); 
startActivity(i); 
```

# c# - 在 try catch 中使用 try catch 好吗？

> ID：13759759
> 
> 赞同：24
> 
> 时间：2012-12-07T08:53:08.150
> 
> 标签：c#, asp.net, .net, c#-4.0

> **可能重复：**
> [嵌套的 Try/Catch 块是一个坏主意吗？](https://stackoverflow.com/questions/4799758/are-nested-try-catch-blocks-a-bad-idea)

目前我在 try catch 中使用 try catch ？当前的 senario 在我们的应用程序中需要它。

```
void MyFun()
{
    try
    {
        //Process logic 1
        // ......
        try
        {
            //Process logic 2
            // ......
        } catch (Exception ex)
        {
            //write an error details in database
        }

        //Process Logic 3
        // ......

    } catch (Exception ex)
    {
        //show error msg
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T08:57:11.817

这没有什么特别的问题，特别是如果您想以不同的方式处理异常。
但是，如果内部异常和外部异常分别属于不同的类型`E1, E2`并且`E1`不是 的父级`E2`，则可以有两个相邻的 catch 子句。

```
try
{
  // do something
}
catch (E1 e1)
{
}
catch (E2 e2)
{
} 
```

* * *

正如 Rob 和 J.Steen 所指出的 - 这与问题中的情况略有不同，因为在这种情况下`E1`，代码在不会被执行后被抛出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:58:25.160

嵌套的 try/catch 很好。您要远离的是基于 try catch 更改代码的逻辑流程。换句话说，您不应该将 try/catch 视为 if/else 块。所以这并不理想：

```
//over the top example just to demonstrate my point

public bool IsNumberTen(int x)
{
    try
    {
        if(x > 10)
            throw new NumberTooHighException();
        else if(x < 10)
            throw new NumberTooLowException();
        else
            return true;

    }
    catch(NumberTooHighException)
    {
        return false;
    }
    catch(NumberTooLowException)
    {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:57:34.860

我不明白为什么不。如果您在 catch 中有可能失败或引发需要处理的异常的逻辑，那么这是有道理的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T08:56:35.407

这个项目表明它不是一件坏事，你只需要以其他方式处理错误。

[异常处理 try catch inside catch](https://stackoverflow.com/questions/3526167/exception-handling-try-catch-inside-catch)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T08:57:16.773

在不知道这里有什么逻辑的情况下回答这个问题有点困难。当然，在性能方面，嵌套异常处理会产生更大的成本，但一般的经验法则是只捕获作为开发人员了解如何处理的异常。这与 TDD 的实践重叠，如果您有一组足够好的测试，您可以确定预期的异常应该在哪里，那么这将决定您的异常逻辑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T08:57:20.250

我会说：这还不错。它是否*好*取决于您的程序，以及考虑到您的方法的逻辑和合同，这样的概念是否有意义。

**编辑**：我建议查看文章[Exception Cost: When to throw and when not to](http://blogs.msdn.com/b/ricom/archive/2003/12/19/44697.aspx)。它概述了 CLR 中异常管理最昂贵的部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-07T09:00:36.897

我正在尝试考虑您可能需要嵌套块的情况......也许如果您正在更改数据库并且您正在使用 try catch 作为虚拟事务，您可能想要尝试更新一些属性，但如果这会失败，但如果您实际提交数据库更新本身，也会捕获一个整体异常。

即使考虑到这一点，您也永远不需要这样做......像这样简单地将块堆叠在一起就足够了：

```
void MyFun()
{
    try
    {
        //Process logic 1
        // ......
    } catch (Exception ex)
    {
        //show error msg
    }
    try
    {
        //Process logic 2
        // ......
    } catch (Exception ex)
    {
        //write an error details in database
    } 
```

}

还可能值得注意的是，如果您发现需要嵌套 try catch 块，那么可能有更好的方法来设计您的代码。

**编辑：** Itay 的答案也比嵌套好一些，尽管一旦你发现异常，它就不允许你继续进行。

希望这可以帮助！

# c++ - 如果我们只知道 IP，如何知道服务器是否在线？

> ID：13759760
> 
> 赞同：1
> 
> 时间：2012-12-07T08:53:09.330
> 
> 标签：c++, winapi, curl, network-programming

怎么可能呢，服务器不是 HTTP 服务器，是 ArmA 游戏服务器。我尝试在下面的代码中使用 CURL 来实现它，但它不起作用，它总是显示 Offline。

```
IsOnline( "xx.xxx.xx.xxx" );

    bool IsOnline( string url )
    {

        CURL *curl;

        curl = curl_easy_init();

        if(curl) 
        {
            curl_easy_setopt(curl, CURLOPT_URL, url.c_str() );

            CURLcode result = curl_easy_perform(curl);
            if ( result != CURLE_OK )
            {
               error_string = curl_easy_strerror( result );
               return false;
            }

            curl_easy_cleanup(curl);
            curl_global_cleanup();
            return true;
        }

        curl_easy_cleanup(curl);
        curl_global_cleanup();
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T09:06:33.600

您在代码中所做的是尝试发送 HTTP 请求。它失败的原因是游戏服务器机器没有运行 HTTP 服务器。

查明机器是否在线的常用方法是对其进行[ping](http://en.wikipedia.org/wiki/Ping_%28networking_utility%29)操作。Ping 使用 ICMP 协议。这是一个解释如何从 C++ 程序 ping 的教程（它是特定于 Windows 的）： http: [//www.developerfusion.com/article/4628/how-to-ping/](http://www.developerfusion.com/article/4628/how-to-ping/)

但是，服务器的管理员可能禁用了 ICMP，在这种情况下，即使机器在线，机器也不会响应 ping。此外，如果机器在线并响应 ping，但游戏服务器软件本身没有运行，您可能会得到“误报”。

所以我认为你最好的选择是找出游戏服务器本身监听的端口并尝试在这些端口上建立连接。

# jquery - 如何包含多个 jquery 文件？

> ID：13759761
> 
> 赞同：-2
> 
> 时间：2012-12-07T08:53:11.583
> 
> 标签：jquery

我在 1 个文件中包含两个 jquery

```
<script type="text/javascript" src="<%= SkinPath%>controls/jquery.js"></script>
<script type="text/javascript" src="<%= SkinPath%>controls/jquery-1.7.min.js"></script> 
```

第一个有助于在标签的运行时更改标签颜色。jquery 模型中的第二个帮助弹出，但 1 必须隐藏 1 才能工作，另一个如何摆脱这种痛苦。在这个问题上卡得太多了。请帮我解决一下这个。

即使隐藏第二个会干扰选项卡和模型弹出功能，但我观察到第一个选项卡功能是必要的。没有得到什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:59:22.773

据我了解，您正在尝试使用 jQuery UI 小部件，例如选项卡和模型对话框

所以你必须使用 jQuery 核心，然后使用 jQuery UI。这不是缩小与否的问题，但 jQuery UI 依赖于 jQuery Core！

所以在下面使用。不确定您的核心和 ui 文件的名称是什么。

```
<script type="text/javascript" src="<%= SkinPath%>controls/jquery.js"></script>
<script type="text/javascript" src="<%= SkinPath%>controls/jquery-ui.js"></script 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:55:13.367

您需要用户`jquery.noConflict()`：更多信息：http: [//api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

StackOverflow 上的其他答案详细向您展示了如何执行此操作：[https ://stackoverflow.com/a/528251/1606729](https://stackoverflow.com/a/528251/1606729)

编辑：但正如其他人指出的那样，除非在极少数情况下，否则您不应该使用多个 jquery。如果您已经有另一个版本，为什么还需要 1.7 版本？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:55:48.410

您必须只使用一个 JQuery（jQuery 核心），尝试使用最新版本并修改您的代码以使用它。

# javascript - 弹出和幻灯片时 Java 脚本冲突

> ID：13759769
> 
> 赞同：0
> 
> 时间：2012-12-07T08:53:45.833
> 
> 标签：javascript

在我的网页中，我正在做两件事：

1.  图片幻灯片

2.  图像弹出

为此，我包含了 6 个 JavaScript 文件，但它发生了冲突。它单独工作正常。如何避免 JavaScript 冲突？

我已经包含了这样的js文件：

```
----------------for popup-------------
<div id="content">
    <div class="chat in">
        <div class="msg Nth">
            <script type="text/javascript" src="popup/js/prototype.js"></script>
            <script type="text/javascript" src="popup/js/scriptaculous.js?load=effects"></script>
            <script type="text/javascript" src="popup/js/lightbox.js"></script>>
                <div class="msg Nth">

--------------for slideshow-------------
<script src="scrollbar_2/jquery-1.3.2.min.js" language="javascript" type="text/javascript"></script>
<script src="scrollbar_2/jquery-ui-1.7.1.custom.min.js" language="javascript" type="text/javascript"></script>
<script src="scrollbar_2/slider_test.js" language="javascript" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:18:58.453

我很确定[Lightbox](http://lokeshdhakar.com/projects/lightbox2/)依赖于 JQuery，所以它应该在你加载 JQuery 之后放置，如下所示：

`<script src="scrollbar_2/jquery-1.3.2.min.js" language="javascript" type="text/javascript"></script>`

`<script type="text/javascript" src="popup/js/lightbox.js"></script>`

最好将所有 JavaScript 文件放在 HTML 文件的末尾，以防某些 JavaScript 文件依赖于首先加载的 DOM 中的元素。

但是，更清楚地了解确切的错误消息将有助于您进行调试。

# iphone - AFNetwork 和 GoogleAPI 返回 NULL

> ID：13759772
> 
> 赞同：4
> 
> 时间：2012-12-07T08:54:02.990
> 
> 标签：iphone, objective-c, google-api, geocoding, afnetworking

在对 CLGeocoder 非常失望之后，我决定改用 GoogleMaps API。

我使用 AFNetwork 设计了如下调用：

```
 AFHTTPClient *new = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://maps.googleapis.com/"]];

    NSDictionary *dict = [[NSDictionary alloc] initWithObjects:[NSArray arrayWithObjects:@"thorsgade",@"true", nil] forKeys:[NSArray arrayWithObjects:@"address",@"sensor", nil]];
    NSMutableURLRequest *req = [new requestWithMethod:@"GET" path:@"maps/api/geocode/json" parameters:dict];

AFJSONRequestOperation *call = [AFJSONRequestOperation JSONRequestOperationWithRequest:req success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
            NSArray *geos = [JSON objectForKey:@"results"];
  DLog(@"Got result : '%@' %@ from  %@ %@ %@",JSON,geos,[NSHTTPURLResponse localizedStringForStatusCode:response.statusCode],response.allHeaderFields,request.URL.description);

        } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
            DLog(@"Failed %@ %@",error.localizedDescription,request.URL.description);
        }];

[call start]; 
```

我得到这个反馈：

> 得到结果：'(null)' (null) from no error { "Cache-Control" = "public, max-age=86400"; “内容编码”= gzip；“内容长度”= 1603；“内容类型”=“应用程序/json；字符集=UTF-8”；日期 =“格林威治标准时间 2012 年 12 月 7 日星期五 08:51:58”；过期 =“星期六，2012 年 12 月 8 日 08:51:58 GMT”；服务器 = mafe；Vary = "接受语言"; “X-Frame-Options”=SAMEORIGIN；“X-XSS-保护”=“1；模式=块”；} [http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=thorsgade](http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=thorsgade)

空结果，但没有错误。内容在标头中被识别为 JSON，但原始 JSON 为空。

烦人的是，如果我在浏览器中打开[http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=thorsgade](http://maps.googleapis.com/maps/api/geocode/json?sensor=true&address=thorsgade)，我会得到很多结果。

到目前为止，我已经尝试过：

*   轻弹传感器布尔值真/假。
*   将用户代理伪装成常规的 safari。
*   使用 POST 而不是 GET。

没有运气...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T02:01:24.660

如果问题仍然存在，我建议改用[MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)

这是我的解决方案 -

**GoogleGeocodeApi.h**

```
//GoogleGeocodeApi.h
#import <Foundation/Foundation.h>
#import "MKNetworkEngine.h"

typedef void (^JsonResponseBlock)(NSDictionary *);
typedef void (^ErrorBlock)(NSError* error);

@interface GoogleGeocodeApi : MKNetworkEngine

-(MKNetworkOperation*) geocodeWithAddress: (NSString *) address
                             onCompletion:(JsonResponseBlock) completionBlock
                                  onError:(ErrorBlock) errorBlock;

@end 
```

**GoogleGeocodeApi.m**

```
//GoogleGeocodeApi.m
#import "GoogleGeocodeApi.h"

@implementation GoogleGeocodeApi

-(id)init
{
    if (self = [super initWithHostName:@"maps.googleapis.com" apiPath:@"maps/api/geocode" customHeaderFields:nil]) {

    }
    return self;
}

-(MKNetworkOperation*) geocodeWithAddress: (NSString *) address
                             onCompletion:(JsonResponseBlock) completionBlock
                                  onError:(ErrorBlock) errorBlock;
{
    MKNetworkOperation *op = [self operationWithPath:[NSString stringWithFormat:@"json?sensor=true&address=%@", address] params:nil httpMethod:@"GET"];
    [op onCompletion:^(MKNetworkOperation *completedOperation) {
        NSDictionary *responseJSON = [completedOperation responseJSON];
        if (responseJSON && [[responseJSON objectForKey:@"status"] isEqualToString:@"OK"]) {
            completionBlock(responseJSON);
        } else {
            NSDictionary* errorDictionary = @{NSLocalizedDescriptionKey :@"Google geocode failed!"};
            NSError *error = [NSError errorWithDomain:@"Failed response" code:100 userInfo:errorDictionary];
            errorBlock(error);
        }
    } onError:^(NSError* error) {
        errorBlock(error);
    }];

    [self enqueueOperation:op];

    return op;
} 
```

**代码中的某处**

```
GoogleGeocodeApi *gma = [[GoogleGeocodeApi alloc] init];

    [gma geocodeWithAddress:@"thorsgade"
               onCompletion:^(NSDictionary *responseJSON) {
                   NSLog(@"Geocode succeeded: %@", responseJSON);
               } onError:^(NSError *error) {
                   NSLog(@"Geocode failed with error: %@", [error localizedDescription]);
               }]; 
```

# backbone.js - 命令发布和把手的主干样板问题

> ID：13759780
> 
> 赞同：0
> 
> 时间：2012-12-07T08:54:52.733
> 
> 标签：backbone.js, handlebars.js, backbone-boilerplate

我似乎无法让它工作。我正在使用[BBB-Handlebars](https://github.com/tbranyen/boilerplate-handlebars-layoutmanager)。当我在开发过程中使用它时，应用程序完美呈现，我没有任何问题。一旦我运行命令 BBB release 并将我的应用程序指向构建和编译的 require.js 文件，我的模板就不会呈现。例如，我的模板将使用`{{model.someAttribute}}`而不是`{{The models attribute}}`. 因此，它保持括号完整，并且出于某种原因，Handlebars 将整个模板视为 Html。它没有渲染出数据。我通过编辑 grunt.js 文件尝试了不同的组合，但仍然没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:05:56.937

有其他人遇到此问题，我更改了以下内容：

```
grunt.registerTask("debug", "clean lint jst requirejs concat stylus:compile"); 
```

至：

```
grunt.registerTask("debug", "clean lint jst handlebars requirejs concat"); 
```

我不需要手写笔，所以我删除了它。刚刚添加了 Handlebars 任务，似乎解决了这个问题。如果您仍有问题，请告诉我。

# java - Java LWJGL 闪烁状态

> ID：13759782
> 
> 赞同：2
> 
> 时间：2012-12-07T08:55:11.127
> 
> 标签：java, lwjgl, slick2d, states

我有一个问题，当我按下 Return 键时，在 INTRO 状态下（默认）它必须切换到 GAME 状态。确实如此，但当它出现时，它会在 INTRO 和 GAME State 之间闪烁。文本闪烁，底部的条闪烁。

我会尝试打印出当前状态，它似乎在这两种状态之间没有变化，但是当我运行应用程序时，我的 INTRO 状态和 GAME 状态都在那里，并且正在闪烁。

```
public Renderer() {
    try {
        Display.setDisplayMode(new DisplayMode(screenWidth, screenHeight));
        Display.setTitle(gameTitle);
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(0);
    }

    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(0, 640, 0, 480, 1, -1);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);

    lastFrame = getTime();

    while (!Display.isCloseRequested()) {
        //long delta = (long) getDelta();

        System.out.println(state);

        while (Keyboard.next()) {
            if(Keyboard.isKeyDown(Keyboard.KEY_RETURN)) {
                if(state == State.INTRO) {
                    clearCanvas();
                    state = State.GAME;
                }
            }
            if(Keyboard.isKeyDown(Keyboard.KEY_BACK)) {
                if(state == State.GAME) {
                    clearCanvas();
                    state = State.INTRO;
                }
            }
        }

        switch (state) {
        case INTRO:
            GL11.glColor3f(1.0f, 1.0f, 1.0f);
            TextDraw.drawString("PRESS 'RETURN' TO START GAME, and then hit CTRL z", Display.getWidth() / 2 - 160, Display.getHeight() / 2);
            TextDraw.drawString("CONTROLS:", Display.getWidth() / 2 - 30, Display.getHeight() / 2 - 50);
            TextDraw.drawString("1 key is Paint Red", Display.getWidth() / 2 - 70, Display.getHeight() / 2 - 70);
            TextDraw.drawString("2 key is Paint Green", Display.getWidth() / 2 - 70, Display.getHeight() / 2 - 85);
            TextDraw.drawString("3 key is Paint Blue", Display.getWidth() / 2 - 70, Display.getHeight() / 2 - 100);
            TextDraw.drawString("CTRL Z is Clear canvas", Display.getWidth() / 2 - 70, Display.getHeight() / 2 - 115);
            TextDraw.drawString("Escape to Close Program", Display.getWidth() / 2 - 70, Display.getHeight() / 2 - 130);
            break;
        case GAME:
            keyBindings();
            int MouseX = Mouse.getX();
            int MouseY = Mouse.getY();
            paint(MouseX, MouseY);
            break;
        }

        Display.update();
        Display.sync(250);
    }

    //Closed
    System.out.println("Program Closed");
    Display.destroy();
    System.exit(0);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T20:49:05.257

尝试更换这些部件：

```
while (Keyboard.next()) {
        if(Keyboard.isKeyDown(Keyboard.KEY_RETURN)) {
            if(state == State.INTRO) {
                clearCanvas();
                state = State.GAME;
            }
        }
        if(Keyboard.isKeyDown(Keyboard.KEY_BACK)) {
            if(state == State.GAME) {
                clearCanvas();
                state = State.INTRO;
            }
        }
    } 
```

有了这个：

```
if (Keyboard.isKeyDown(Keyboard.KEY_RETURN)){
    clearCanvas(); //Don't check for the state which is going to be true most likely, just adds confusion to coding
    state = State.GAME;
}

if (Keyboard.isKeyDown(Keyboard.KEY_BACK)){
    clearCanvas();
    state = State.INTRO;
} 
```

如果您担心不按下按键时的速度，请不要担心。差异非常小，而且很可能不明显。

另外，您没有清除屏幕！没有那个，各种各样的残余都可以留在那里！使用此方法在主循环中清除：

```
while (!Display.isCloseRequested()){
    GL11.glClear(GL_COLOR_BUFFER_BIT);
    //Rest of your code here
} 
```

# objective-c - 发布带有 ASIFormDataRequest 错误的 XML 数据

> ID：13759791
> 
> 赞同：1
> 
> 时间：2012-12-07T08:55:40.547
> 
> 标签：objective-c, xml, asiformdatarequest

> ```
> NSURL *postUrl =[[NSURL alloc] initWithString:mainString]; 
> ```

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:postUrl];
[request setResponseEncoding:NSUTF8StringEncoding];

NSString *msgLength = [NSString stringWithFormat:@"%d", [xmlString length]];
[request addRequestHeader:@"Content-Length" value:msgLength];

NSString *contentType = [NSString stringWithFormat:@"application/xml"];
[request addRequestHeader:@"Content-Type" value:contentType]; 
```

// [request addRequestHeader:@"Content-Type" value:@"application/json"];//测试JSON是好的[request appendPostData:theData]; [请求 buildPostBody]; [请求 setRequestMethod:@"POST"];

```
[request setDelegate:self];
[request startAsynchronous];
[request setTimeOutSeconds:20];// 测试连接的时间，默认10s
[postUrl release]; 
```

我从以下代码中没有得到任何东西，这也不会产生错误。

```
(void)requestFinished:(ASIHTTPRequest *)request{
    NSData *theData = [request responseData];
    NSString *ret = [request responseString];
    NSLog(@"ret--------------%@",ret);
} 
```

当我使用 JSON 时，我得到了结果。

# eclipse - linux上的adt包在加载时挂起

> ID：13759796
> 
> 赞同：0
> 
> 时间：2012-12-07T08:56:01.610
> 
> 标签：eclipse, console, adt

我下载了最新的 ADT 包：

adt-bundle-linux-x86_64.zip

但是当我尝试运行 eclipse 时，它​​会在加载 org.eclipse.ui.console 时挂起，然后我必须强制退出。

我正在运行 fubuntu 2012.4 并拥有 openJDK 1.7.0_06-icedtea

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:08:46.100

[我用这个](http://neerajsingh.blog.com/2011/10/08/installing-eclipse-helios-on-ubuntu-11-4-zip-file/)解决了类似的问题。首先我打开了拉链，我在里面做所有事情。在解压后的目录中有 /sdk 子目录，它是 Android SDK Tools for Eclipse 所需的。

# c++ - 从套接字读取到缓冲区

> ID：13759802
> 
> 赞同：2
> 
> 时间：2012-12-07T08:56:14.013
> 
> 标签：c++, sockets, memory, buffer

这个问题可能看起来很简单，但我认为它并不是那么微不足道。或者也许我想多了，但我还是想知道。

假设我们必须从 TCP 套接字读取数据，直到遇到一些特殊字符。数据必须保存在某个地方。我们不知道数据的大小，所以我们不知道我们的缓冲区有多大。在这种情况下有哪些可能的选择？

1.  **随着更多数据到达，使用扩展缓冲区`realloc`。**这种方法提出了几个问题。使用 realloc 对性能有何影响？它可能会移动内存，所以如果缓冲区中有很多数据（并且可能有很多数据），我们将花费大量时间移动字节。我们应该将缓冲区大小扩展多少？我们每次都加倍吗？如果是，那么所有浪费的空间呢？如果我们稍后以较小的大小调用 realloc，它会截断未使用的字节吗？

2.  **以恒定大小的块分配新缓冲区并将它们链接在一起。**这很像 C++ 标准库中的双端队列容器，允许快速添加新数据。这也有一些问题，比如我们应该做多大的块以及如何处理未使用的空间，但至少它具有良好的性能。

你对此有何看法？这两种方法哪个更好？也许还有其他我没有考虑过的方法？

PS：

就个人而言，我更倾向于第二种解决方案，因为我认为如果我们“回收”块而不是每次需要块时都进行动态分配，它可以做得非常快。我能看到的唯一问题是它会损害局部性，但我认为这对我的目的（处理类似 HTTP 的请求）来说并不是非常重要。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:55:24.063

方法 2 听起来更好，但是可能会对您的解析器产生重大影响......即，一旦找到特殊标记，在解析 HTTP 请求时处理非连续缓冲区可能最终比重新分配大缓冲区更昂贵或更复杂（方法1）。Net-net：如果您的解析器很简单，请使用 2，如果不是，请使用 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:16:14.543

我更喜欢第二种变体。您也可以考虑只使用一个原始缓冲区并在从套接字接收另一组数据之前处理接收到的数据，即在遇到特殊字符之前开始处理数据。

在任何情况下，我都不建议使用原始内存和重新分配，而是使用`std::vector`它自己的重新分配，或者`std::array`用作固定大小的缓冲区。

您可能还对 Boost.Asio 感兴趣，`socket_iostream`它在原始缓冲区之上提供了另一个抽象层。

# android - 如何在 android api level 9+ 中的 MapActivity 中显示兼容性操作栏？

> ID：13759805
> 
> 赞同：2
> 
> 时间：2012-12-07T08:56:38.620
> 
> 标签：android, google-maps, android-actionbar

如何在显示地图的应用程序中显示操作栏并使用 mapActivity。我不能使用 Sherlock 操作栏，因为它应该是[SherlockActivity](http://xrigau.wordpress.com/2012/03/15/using-an-actionbar-in-your-application-with-actionbarsherlock/)并且我有 MapsActivity。我必须从 Api 级别 9+ 开始支持它。从 11+ 开始，我实现了本机操作栏，并且效果很好。我必须使用地图 API 版本 1，并且不能在此使用新版本 2 谷歌地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:02:15.267

Probably have a look at the new Google Play Services. I read they with a new Maps API which lets you use MapFragments. You could probably use these Fragments in an Sherlock based activity. Another way would be to use a TabHost to host the MapActivity inside an Sherlock based activity. But i don't know how performant that would be.

# c# - 使用 AOP 打开和关闭与数据库的连接

> ID：13759806
> 
> 赞同：1
> 
> 时间：2012-12-07T08:56:41.520
> 
> 标签：c#, java, php, language-agnostic, aop

使用 AOP 打开和关闭数据库连接是一种好习惯吗？我想在我的 DAO 类中使用 AOP。

例如，在方法内部`public User createUser(String name)`我不想编写类似`Connection.open()`and的代码`Connection.close()`，我想使用方面自动完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:07:33.667

只要使用您的方法和 API 的人都*知道*该方法会初始化连接，更重要的是，它会在之后关闭它，那么这样做就非常有意义。不过，有些事情需要考虑。

想想 API 的一致性。所有方法都打开和关闭连接吗？如果不是，为什么有些人不这样做，您应该如何向使用 API 的人明确表示他们不这样做？

记住要考虑错误处理。当发生错误时，例如它抛出的异常，方法退出后的连接状态应该是明确的。

牢记重入。如果一个方法可以从多个线程中执行并且它会影响全局状态，那么你就危险地接近灾难的根源。使其安全并使其易于理解。

附带说明一下，在每次方法调用后重新考虑关闭连接。每次向数据库中添加一行时打开和关闭连接是否有意义？在性能方面，将连接重用于进一步的查询更为合理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:14:32.523

使用 ORM，如 Hibernate 或 Eclipselink，再加上 Spring 和 Transactions / AOP，它会为您处理一切。

您永远不必使用良好的持久性框架编写 Connection.open。这些天有很多选择。

在 Java 中，方面对于日志记录、安全性和缓存等方面非常有意义。但是我会把持久性的东西留给持久性库。他们非常成熟并且非常可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T16:40:43.187

如果它是一个 Web 应用程序，您可能希望使用每请求会话模式。您可以使用 HttpModule 或 ActionFilter 来执行此操作。我认为这是一种没有第三方 AOP 框架的 AOP 方法。

另请参阅：[如何在我的项目中实现健壮的每请求会话模式，同时专注于信息隐藏？](https://stackoverflow.com/questions/2046168/how-can-i-implement-a-robust-session-per-request-pattern-in-my-project-while-fo)

# c# - Range[] 而不是 get_Range()

> ID：13759810
> 
> 赞同：7
> 
> 时间：2012-12-07T08:56:59.687
> 
> 标签：c#, excel, methods, properties

[http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.get_range.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.get_range.aspx)它说使用 Range 属性而不是 get_Range(Object Cell1, Object Cell2)。

他们都在做同样的事情，**获取一个代表一个单元格或一系列单元格的 Microsoft.Office.Interop.Excel.Range 对象**。那么，除了这是一种方法而另一种是属性之外，还有什么区别？他们为什么要使用 Range[]，这是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:06:22.923

Range() 比 Range[] 快

通过实践，我们注意到了这种情况。但这里应该定义一个这样说的理由。

当您要引用绝对范围时，此快捷方式很方便。但是，它不如 Rangeproperty 灵活，因为它不能将变量输入作为字符串或对象引用处理。所以在一天结束的时候，你仍然会提到*很长*的路要走。虽然矮个子提供了可读性。因此，不妨在不花费更多资源的情况下在第一轮就做好。

现在为什么慢？在编译中。

“在运行时 Excel 总是使用常规符号（或者我被告知），因此在编译代码时，所有快捷方式符号中的引用都必须转换为常规范围形式（或者我被告知）。{即 [A150] 必须转换为 Range("A150") 形式}。无论我被告知的真相如何，Visual Basic 都必须记住其代码的编译版本以及您用于编写代码的任何符号（即代码模块中的任何内容），文件大小（使用的内存）的工作簿属性因此略有上升。”

如您所见，我的回答更符合 VBA。然而，经过一些研究，它有点证明 VBA 方面并没有放慢速度。所以你只需要照顾 C# 方面。@Hans 从 C# 角度为您提供了更好的答案。希望将两者结合起来，您将获得出色的性能代码:)

**以下是 Excel 中 Range[] vs Range() 性能的一些发现**

![在此处输入图像描述](../Images/4d872e70602b48fbd3208413882abbcd.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T11:35:02.913

如果您使用 C# 版本 4 及更高版本，则可以使用 Range 索引器。但是您必须在早期版本上使用 get_Range() 。

请注意，它有一些特别之处，COM 接口的默认属性映射到索引器。但是 Range 属性不是 Worksheet 的默认属性，它只是一个常规属性。麻烦的是，C# 不允许声明索引器以外的索引属性。在 VB.NET 中工作，而不是在 C# 中，您必须直接调用属性 getter 方法。应大众需求，C# 团队在版本 4 (VS2010) 中取消了此限制。但仅在 COM 接口上，您仍然不能在自己的代码中声明索引属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:15:05.793

我已经使用了两者并且都返回了相同的结果。我认为 Range[] 实际上在内部使用 get_Range() 。

对于命名约定的问题，我现在只使用 Range[]。

# python - 总体上提高效率的任何技巧？

> ID：13759815
> 
> 赞同：0
> 
> 时间：2012-12-07T08:57:12.823
> 
> 标签：python

我整天都在做简单的编程挑战，努力学习和实践。然而，我似乎总是在效率上失败。如果不使用内置代码（例如 encode 方法），我是否可以提高程序的效率（我的一般效率）？

```
import string
alph = string.ascii_lowercase
def encrypt(text):

    encryption = ""

    for character in text:

        index = 0
        shift = 0
        for letter in alph:                       
            if letter == character:

                if index > 23:
                    shift = abs(26 - (index+3))
                    encryption += alph[shift]
                    break
                shift = index + 3
                encryption += alph[shift]

            index += 1

    return encryption

def decrypt(text):

    decryption = ""

    for character in text:

        index = 0
        shift = 0
        for letter in alph:                       
            if letter == character:

                if index < 3:
                    shift = abs(26 - (index+3))
                    decryption += alph[shift]
                    break
                shift = index - 3
                decryption += alph[shift]

            index += 1

    return decryption 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:18:40.223

与 using 相比，使用字符串格式化`"%s%s" (encryption, newvalue)`要快 2 倍，`+=`而且`+` 使用更大的字符串时差异会更大。

请参阅[Python 中的字符串连接与字符串替换](https://stackoverflow.com/questions/376461/string-concatenation-vs-string-substitution-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:23:18.640

您可以使用[slices](https://stackoverflow.com/a/509295/1086425)和`str.maketrans`, `str.translate`（参见[Python.org : string](http://docs.python.org/2/library/string.html#string-functions)）：

```
import string

def rot3_encode(s):
    return s.translate(
            string.maketrans(
                # 'abcdefghijklmnopqrstuvwxyz'
                string.ascii_lowercase,
                # 'defghijklmnopqrstuvwxyz' + 'abc'
                string.ascii_lowercase[3:] + string.ascii_lowercase[:3] # 
                )
            ) 
```

不使用`translate`and `maketrans`：

```
def rot3(s):
    # 'abcdefghijklmnopqrstuvwxyz'
    original_alphabet = string.ascii_lowercase 
    # 'defghijklmnopqrstuvwxyz' + 'abc'
    encoded_alphabet = string.ascii_lowercase[3:] + string.ascii_lowercase[:3]
    encoded_string = ''
    for character in s:
        # look at what index your character is in the original alphabet
        encoded_string += encoded_alphabet[original_alphabet.index(character)]
    return encoded_string 
```

举个例子：

```
rot3('afz')
# 'a' is at index 0 of 'abcdefghijklmnopqrstuvwxyz'
# -> you will append to your encoded string the character at index 0 of 'defghijklmnopqrstuvwxyzabc' ('d')
# 'f' is at index 5 of 'abcdefghijklmnopqrstuvwxyz'
# -> you will append to your encoded string the character at index 5 of 'defghijklmnopqrstuvwxyzabc' ('i')
# ...
>>>'dic' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:03:56.667

例如，`index += 1`您可以使用`for index, letter in enumerate(alph):`. 这会稍微缩小代码并自动跟踪迭代索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T09:25:23.747

以这种方式调用它以查看时间消耗在哪里是您提高性能的最基本工具......

```
 python -m cProfile foo.py 
```

[看这里了解更多](http://docs.python.org/2/library/profile.html#instant-user-s-manual)

# ajax - 如何在 Telerik MVC 中创建支持 Ajax 的分页嵌套网格？

> ID：13759817
> 
> 赞同：1
> 
> 时间：2012-12-07T08:57:17.963
> 
> 标签：ajax, asp.net-mvc, telerik, pagination, telerik-grid

我尝试在 Telerik MVC Extension 中创建一个支持 Ajax 的分页嵌套网格。我已经在浏览中渲染了嵌套网格，可以展开行流派以显示由 GenreId 过滤的相关专辑，但是当我为这个嵌套网格使用 Ajax 时，它在网格分页中不起作用。我已经上传了我的项目并发布了一些关于我的视图和控制器的代码。

当我不使用 ajax 时，网格可以正常工作，但在重新加载浏览时无法正确扩展，如何保持已扩展行的状态？

我很感激任何帮助。

我的项目： [http ://share.vnn.vn/dl.php/11718146](http://share.vnn.vn/dl.php/11718146)

我的观点：

```
@{
    ViewBag.Title = "Home Page";
    Layout = @"~\Views\Shared\_Layout.cshtml";
}

@( Html.Telerik().Grid<MvcMusicCodeFirsr.Models.Genre>(@Model)
    .Name("personGrid")
    .DataKeys(keys => keys.Add(k => k.GenreId))
    .DataBinding(d => d.Ajax().Update( "_Update", "Home" )
    )
   // .Editable(editing => editing.Mode(GridEditMode.PopUp))
    .Columns(c =>
    {
        c.Bound(m => m.Name).Width(150);
        c.Bound(m => m.Description).Width(150);
        //c.Bound(m => m.Birthdate);
        c.Command(commands =>
        {
            commands.Edit();
        }).Width(80);
    })
    .DetailView(detailView => 
        detailView.Template(
        @<text>
            @(Html.Telerik().Grid<MvcMusicCodeFirsr.Models.Album>(item.Albums)
                    .Name("Albums_" + item.GenreId)
                    .DataBinding(d => d.Ajax())
                    .Columns(columns =>
                    {
                        columns.Bound(o => o.Title).Width(101);
                        columns.Bound(o => o.Price).Width(140);
                    })
                    .Pageable()
                    .Sortable()
                    .Filterable()
            )

        </text>
        )
        .ClientTemplate(
                    Html.Telerik().Grid<MvcMusicCodeFirsr.Models.Album>()

                                  .Name("Albums_<#=GenreId#>")
                                  .DataBinding(d => d.Ajax())
                                  .Footer(false)
                                  .ClientEvents(events => events.OnDataBinding("detailGrid_dataBinding"))
                                  .ToHtmlString()
        ))

                    .Sortable()
                    .Pageable()

    )

)

<script type="text/javascript">
    function detailGrid_dataBinding(e) {
        var grid = $(this).data("tGrid"),
            masterRow = $(this).closest("tr.t-detail-row").prev(),
            dataItem = $("#Grid").data("tGrid").dataItem(masterRow);

        grid.dataBind(dataItem.Albums);

        e.preventDefault();

    }
</script> 
```

我的控制器：

```
 MusicStoreEntities db = new MusicStoreEntities();
    public ActionResult Index()
    {
        return View(db.Genres.ToList());
    }

    [GridAction]
    public ActionResult _Select()
    {
        return View(new GridModel ( db.Genres.ToList()));
    }

    [GridAction]
    public ActionResult _Update()
    {
        return View(new GridModel { Data = db.Genres.ToList() });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T08:22:31.327

这是一个显示嵌套网格的 ajax 填充的示例：http: [//demos.telerik.com/aspnet-mvc/grid/hierarchyajax](http://demos.telerik.com/aspnet-mvc/grid/hierarchyajax)

# haskell - 二次筛和 n 次方

> ID：13759820
> 
> 赞同：2
> 
> 时间：2012-12-07T08:57:24.900
> 
> 标签：haskell, quadratic, sieve

我根据维基百科页面上指定的基本算法在 Haskell 中实现了二次筛。它适用于大多数整数，但是它无法找到*n*次幂的数字 N 的因式分解。对于偶数幂（平方），算法循环，对于奇数幂，我找到了几个平方模 N 的平滑数（我已经测试并证实了这一点），但是每一个派生的平方同余（也经过测试和证实）只会导致一个微不足道的因素。

我有理由确定我已经实现了 Wikipedia 算法。那个版本的算法是否存在问题，阻止它处理*n*次幂，或者我的算法中是否存在错误？

出于某种原因，stackoverflow 在格式化我的代码时遇到问题，所以你去： http: [//pastebin.com/miUxHKCh](http://pastebin.com/miUxHKCh)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-12T21:13:11.837

据我了解，二次筛的设计*并不是*为了*确定*一个数字。相反，它的设计目的是在典型情况下*通常*考虑一个数字。

例如，至少在今天，维基百科条目将其描述为“没有对数优化或素数幂的标准二次筛”。所以它明确地没有考虑主要权力。

此外，据我了解，*接近*素数的数字因式分解在算法的更有效变体中也不能很好地工作。

因此，错误不在您的代码中，而在于算法通常呈现的方式（它掩盖了诸如它是否*总是*有效或*通常*有效等问题：-)）

# debugging - 一个 WebGL 智能 IDE/Environment/Parser

> ID：13759829
> 
> 赞同：4
> 
> 时间：2012-12-07T08:57:58.113
> 
> 标签：debugging, ide, intellisense, webgl

是否有一个 WebGL 智能 IDE/Environment/Parser（...编译器、解释器...）可以遍历代码并对其进行分析？

我正在考虑的分析是调试，代码解释，智能感知......

我知道有一些允许 Java Script 解析的 VS 扩展，但是对于最佳设置，您有什么经验和建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:29:28.917

如果你需要免费的。您可以使用 NetBeans。它可以很好地处理 JavaScript，所以它应该使用 WebGL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T11:56:11.330

对于调试 WebGL，我推荐 WebGL Inspector Chrome 扩展（[http://benvanik.github.io/WebGL-Inspector/](http://benvanik.github.io/WebGL-Inspector/)）。它允许您记录所有 WebGL 调用、查看 GL 的当前状态、查看所有缓冲区（包括顶点缓冲区可视化）、着色器、纹理等。我发现它有助于无数次识别我的 WebGL 代码的问题。

要调试 Javascript，您可以选择完整的 IDE（WebStorm、VS）并使用他们的调试器，或者让 Chrome Devtools 处理它。我更喜欢后一种选择，因为它对我来说感觉更活泼，更“坚实”。

此外，Visual Studio Code（他们基于 Atom 的新小 IDE）有一些非常好的 Javascript Intellisense 并包括一个调试器。检查一下可能是个好主意。

# asp.net-mvc - ASP.NET MVC - 将多个项目添加到列表中

> ID：13759831
> 
> 赞同：1
> 
> 时间：2012-12-07T08:58:07.743
> 
> 标签：asp.net-mvc, list, dynamic

我有下一个问题是关于在 MVC 中将项目添加到列表的正确方法。

假设我有以下模型：

```
public class Student
{
    public String Name { get; set; }
    public List<Lesson> Lessons { get; set; }
} 
```

现在我在学生创建视图中，用户可以在其中添加多个课程。视图的外观是有一个下拉菜单，您可以在其中选择课程和添加新下拉菜单的按钮。这样，一个人可以将多个课程添加到课程变量中。

现在我尝试了很多不同的方法，但似乎从来没有合适的方法，因为我不喜欢在视图中出现这个：

```
 @Html.DropDownListFor(model => model.Lessons[0].Id, new SelectList(...), "Select lesson") 
```

并使用 jquery 或其他方式将 0 更改为 1..2 等。

对于那些动态添加多个项目的视图，您有什么方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:08:10.493

你应该看看定义一个编辑器模板：

如果您正确编写模板，asp.net 将呈现名称类似于以下内容的控件：

```
Lesson[0]_Title 
```

**更新：**方法如下：

在views\shared 中创建一个名为EditorTemplates 的文件夹，然后在这里创建一个带有Lesson 类型模型的局部视图。确保将此部分视图称为“Lesson.cshtml”（如果您不使用剃须刀，则为 ascx）

然后你可以做...

```
@Html.EditorFor(model => model.Lessons) 
```

...而且 asp.net 会神奇地发现，因为 Lessons 是一个 IEnumerable 课程，它应该循环并为每个课程呈现一个编辑器。漂亮整齐！

一些链接：

[http://forums.asp.net/t/1846290.aspx/1?Editor+template+of+type+IEnumerable+SelectListItem+with+MVC+area](http://forums.asp.net/t/1846290.aspx/1?Editor+template+of+type+IEnumerable+SelectListItem+with+MVC+area)

# powershell - Powershell - 逐行搜索和输出

> ID：13759832
> 
> 赞同：-2
> 
> 时间：2012-12-07T08:58:16.340
> 
> 标签：powershell, output

更新

我有一个包含一些参考的 1000 行日志文件。

```
Time Reference Date of start Date of end
12:00 AT001 13 November 2011 15 November 2011
13:00 AT038 15 December 2012 17 December 2012
14:00 AT076 17 January 2013 19 January 2013 
```

$ref1 = AT038

基本上，我想解析日志文件并为 $ref1 输出（逐行），例如：

```
Time : 13h
Reference : AT038
Date of start : 15 December 2012
Date of end : 17 December 2012 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:13:28.883

尝试：

```
$ref1 = "AT038"
$csv = Import-Csv .\myfile.txt -Delimiter ' '#Import file as CSV with space as delimiter
$csv | ? { $_.reference -EQ $ref1 } | FL #Piping each line of CSV to where-object cmdlet,  filtering only line where value of column reference is equal to $ref1 variable value. Piping the result of the filtering to file-list to have output as requested in OP. 
```

在必要条件后添加的代码在 OP 中进行了更改：

```
$ref1 = "AT038"
$txt = gc .\myfile.txt
$txt2 = $txt | % { $b = $_ -split ' '; "$($b[0]) $($b[1]) $($b[2])_$($b[3])_$($b[4]) $($b[5])_$($b[6])_$($b[7])" }
$csv = convertfrom-csv -InputObject $txt2 -Delimiter ' ' 
$csv | ? { $_.reference -EQ $ref1 } | FL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:30:56.523

这个怎么样：

```
Get-Content SourceFileName.txt | 
% { ($_ -Replace '(\d{2}):\d{2} (\w{2}\d{3})', 'Time : $1h|Reference : $2').Split('|')} |
Out-File TargetFileName.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:58:50.523

这是我的修订版：

```
$regex = '(\d{2}):\d{2} (\w{2}\d{3}) (\d{2} \b\w+\b \d{4}) (\d{2} \b\w+\b \d{4})'
$replace = 'Time : $1h|Reference : $2|Date of start : $3|Date of end : $4'
Get-Content SourceFileName.txt | 
% { ($_ -Replace $regex, $replace).Split('|')} |
Out-File TargetFileName.txt 
```

# c# - LINQ - 如何从两个表中获取 n 条记录？

> ID：13759833
> 
> 赞同：0
> 
> 时间：2012-12-07T08:58:16.233
> 
> 标签：c#, .net, database, linq

我有两个表 A 和 B，它们完全独立，但都有一个`time`列，类型为`DateTime`.

`time`我需要编写什么简单的 LINQ 查询才能在一个集合中从两个表中获取 10 个最新（基于字段）记录？例如，此查询可能返回 7 条 A 记录和 3 条 B 记录 - 总共 10 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:02:50.167

```
var _result = tableA
              .Select(x => x.time)
              .Union(tableB.Select(y => y.time))
              .OrderByDescending(z => z.time)
              .Take(10); 
```

SOURCE

*   [C# 101 LiNQ Examples](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:02:06.040

我给你举个 X-Com 的例子。让您的表格存储数据以运送到 x-com 基地。让A表存储新兵，B表存储物品。您想显示已按日期运送到基地的新兵和物品列表：

```
 //soldiers
    public class RowA
    {
        public long Id {get;set;}
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public DateTime Date { get; set; }
    }
    //items
    public class RowB
    {
        public long Id {get;set;}
        public string ItemName { get; set; }
        public decimal Quantity { get; set; }
        public DateTime Date { get; set; }
    }

    List<RowA> TableA;
    List<RowB> TableB;

    public Form1()
    {
        InitializeComponent();
        PrepareTestData();

        int uniqueId = 0;
        var result = (from a in TableA
                      //Map soldiers to anonymous
                      select new 
                      {
                          UniqueId = uniqueId++,
                          InnerId = a.Id,
                          Name = a.FirstName + " " + a.LastName,
                          Date = a.Date,
                      })
                    .Union(from b in TableB
                           select new 
                           {
                               UniqueId = uniqueId++,
                               InnerId = b.Id,
                               Name = b.ItemName,
                               Date = b.Date,
                           }).OrderByDescending(x => x.Date).ToList();
        dataGridView1.AutoGenerateColumns = true;
        dataGridView1.DataSource = result;

    }

    void PrepareTestData()
    {
        TableA = new List<RowA>();
        for (int i = 0; i < 7; ++i)
            TableA.Add(new RowA
            {
                Id = i + 1,
                FirstName = "Name" + i,
                LastName = "Surname" + i,
                Date = DateTime.Now.AddDays(-i)
            });
        TableB = new List<RowB>();
        for (int j = 0; j < 4; ++j)
            TableB.Add(new RowB
            {
                Id = j + 1,
                ItemName = "Laser pistol",
                Quantity = 7,
                Date = DateTime.Now.AddDays(-j)
            });
    } 
```

您还可以为输出记录创建类：

```
public Form1()
    {
        InitializeComponent();
        PrepareTestData();

        int uniqueId = 0;
        var result = (from a in TableA
                      //Map soldiers to ShipmentReportItem
                      select new ShipmentReportItem
                      {
                          UniqueId = uniqueId++,
                          InnerId = a.Id,
                          Name = a.FirstName + " " + a.LastName,
                          Date = a.Date,
                      })
                    .Union(from b in TableB
                           select new ShipmentReportItem 
                           {
                               UniqueId = uniqueId++,
                               InnerId = b.Id,
                               Name = b.ItemName,
                               Date = b.Date,
                           }).OrderByDescending(x => x.Date).ToList();
        dataGridView1.AutoGenerateColumns = true;
        dataGridView1.DataSource = result;
    } 
```

如果您需要一些检查或修改记录，则一个结果类对 ASP.NET gridview 很有用。然后，当您定义类型后，您将可以轻松访问数据源项，否则您必须获取数据项类型，然后检查其属性等。从特定属性中获取值。

如果您的表 B 还存储人员（具有相同的列），则您不需要映射，因为行结构将是相同的。

# android - 如何在 Android 中仅检查 Wifi 数据使用情况？

> ID：13759834
> 
> 赞同：0
> 
> 时间：2012-12-07T08:58:22.560
> 
> 标签：android, android-wifi, network-traffic

是否有可用的 API 或示例可供我仅检查 Wifi 数据使用情况？
这在设置下的 ICS 更高版本的设备中可用。但是如何通过它来做到这一点。我想在这方面得到一些想法。

这里要检查的另一件事是，如果我仅连接到 1 个特定的 wifi 网络，我只想监控数据使用情况，我想如果我能够获得 Wifi 的数据使用情况，那将不是问题？

请参阅我也知道 TrafficStats API，但这并不能解决我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T15:13:23.840

您仍然可以通过`TrafficStats`这种方式使用 API 来获取 Wifi 使用情况：

```
int mobileTx = TrafficStats.getMobileTxBytes();
int mobileRx = TrafficStats.getMobileRxBytes();
int wifiTx = TrafficStats.getTotalTxBytes() - mobileTx;
int wifiRx = TrafficStats.getTotalRxBytes() - mobileRx; 
```

这将返回自上次设备启动以来的 Wifi 数据使用总量。

# iphone - iPhone键盘扫码获取屏幕亮度

> ID：13759840
> 
> 赞同：1
> 
> 时间：2012-12-07T08:58:39.867
> 
> 标签：iphone, keyboard, arduino, scancodes

我正在尝试通过我的 调整 iPhone 的屏幕亮度`Arduino`，这就像键盘一样。不幸的是，我没有成功，因为我不知道要发送的确切扫描码。

我检查了[ApplePS2Keyboard.cpp](http://opensource.apple.com/source/ApplePS2Keyboard/ApplePS2Keyboard-3/ApplePS2Keyboard.cpp)`0x69 (brightness down)`并发现它`0x6A (brightness up)` **只能在我的 Mac 上工作**，但这些扫描码由于某种原因在 iPhone 上不起作用。

我也想过使用 的组合键`Fn+F1`，但似乎`Fn`不会生成任何扫描码，所以我无法继续。

***[2012 年 12 月 11 日更新]：下载了 KeyCodes 应用程序并在我的 Mac 上运行它，看起来该`Fn`键生成了一个修饰符`0x800100`，但“Brightness Up”功能键不生成任何键码。是不是说扫描码`0x6A`被内核接收到，然后立即转化为动作而不是键码？***

***如果 Apple 的无线键盘可以在 Mac 和任何 iOS 设备上使用，并且假设无论您与哪个主机配对它都会生成相同的扫描码，为什么相同的扫描码不能在 iOS 设备上使用？***

我已经尝试通过循环遍历可能的扫描代码来使用蛮力`0x2A to 0x80`，但它们都不起作用。我也尝试过暴力破解消费者报告格式的所有排列，但这也不起作用。我的蓝牙模块是 Roving Networks RN-42 HID。

请帮忙！谢谢！

# c# - 确保 C# 中的多播委托执行列表顺序？

> ID：13759841
> 
> 赞同：5
> 
> 时间：2012-12-07T08:58:40.457
> 
> 标签：c#, .net, events, invocation

*在做了一些阅读之后，我了解到处理程序调用顺序与订阅的顺序相同，但不能保证。*

所以可以说我有：

```
public event MYDEl ev; 
```

和订户做：

```
ev+=GetPaper;
ev+=Print;
ev+=EjectPaper; 
```

保持+确保执行列表顺序的最佳实践机制是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T09:08:05.330

如果是类字段事件，它将使用简单的委托组合[`Delegate.Combine`](http://msdn.microsoft.com/en-us/library/30cyx32c.aspx)，并且*保证*保持订阅顺​​序。从返回值的文档中：

> 具有调用列表的新委托，该列表按该顺序连接 a 和 b 的调用列表。

*一般来说*，对于事件，没有任何保证——这取决于实施。哎呀，它可能会忽略您所做的每一次订阅。但实际上，任何合理的实现都会保留顺序。

编辑：恶作剧事件实现示例：

```
public class BadEventPublisher
{
    public event EventHandler Evil
    {
        add { Console.WriteLine("Mwahahaha!"); }
        remove { }
    }

    protected virtual void OnEvil(EventArgs e)
    {
        Console.WriteLine("Who cares? Subscriptions are ignored!");
    }
} 
```

这就像编写一个属性（比如说）从 getter 返回一个随机数并忽略 setter 中的值。这更像是一个理论问题而不是实际问题。

# java - Java 泛型：将整数与双精度数进行比较

> ID：13759844
> 
> 赞同：4
> 
> 时间：2012-12-07T08:58:51.593
> 
> 标签：java, generics, comparable

任何人都可以帮助我使用泛型将 Integer 与 Double 进行比较吗？

这就是我所拥有的：

```
public static <T extends Comparable<? super T>> int compare(T arg1, T arg2)
{
    return arg1.compareTo(arg2);
}

public static void main(String[] args)
{   
    Number i = new Integer(5);
    Number j = new Double(7);

    System.out.println(GenericsTest.compare(i, j));
} 
```

我得到的错误消息是：绑定不匹配：GenericsTest 类型的泛型方法 compare(T, T) 不适用于参数 (Number, Number)。推断的类型 Number 不是有界参数的有效替代 >

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T09:14:42.393

这个解决方案的想法是扩大`BigDecimal`并比较这两个数字（现在更干净但不知何故格式化不起作用）。请注意，您可以重用此静态比较器，而无需在其他任何地方强制转换为 double。在实现中，您确实需要转换为 double 以免丢失信息，基本上您可以扩展为最一般的表示。

```
private static final Comparator<Number> NUMBER_COMPARATOR = new Comparator<Number>() {
    private BigDecimal createBigDecimal(Number value) {
        BigDecimal result = null;
        if (value instanceof Short) {
            result = BigDecimal.valueOf(value.shortValue());
        } else 
        if (value instanceof Long) {
            result = BigDecimal.valueOf(value.longValue());             
        } else 
        if (value instanceof Float) {
            result = BigDecimal.valueOf(value.floatValue());                                
        } else 
        if (value instanceof Double) {
            result = BigDecimal.valueOf(value.doubleValue());                               
        } else 
        if (value instanceof Integer) {
            result = BigDecimal.valueOf(value.intValue());                              
        } else {
            throw new IllegalArgumentException("unsupported Number subtype: " + value.getClass().getName());
        }
                       assert(result != null);

        return result;
    }

    public int compare(Number o1, Number o2) {
        return createBigDecimal(o1).compareTo(createBigDecimal(o2));
    };
};

public static void main(String[] args) {
    Number i = Integer.valueOf(5);
    Number j = Double.valueOf(7);
              // -1
    System.out.println(NUMBER_COMPARATOR.compare(i, j));

         i = Long.MAX_VALUE;
         j = Long.valueOf(7);
              // +1
         System.out.println(NUMBER_COMPARATOR.compare(i, j));

         i = Long.MAX_VALUE;
         j = Long.valueOf(-7);
              // +1
         System.out.println(NUMBER_COMPARATOR.compare(i, j));

         i = Long.MAX_VALUE;
         j = Double.MAX_VALUE;
              // -1
         System.out.println(NUMBER_COMPARATOR.compare(i, j));

    i = Long.MAX_VALUE;
    j = Long.valueOf(Long.MAX_VALUE - 1);
    // +1
    System.out.println(NUMBER_COMPARATOR.compare(i, j));

              // sorting Long values
    Long[] values = new Long[] {Long.valueOf(10), Long.valueOf(-1), Long.valueOf(4)};
    Arrays.sort(values, NUMBER_COMPARATOR);
              // [-1, 4, 10] 
    System.out.println(Arrays.toString(values));  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:24:39.840

Number 没有实现 Comparable。

将两个变量都声明为整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T09:22:43.320

正如aready在评论中所说，`Number`不实施`Comparable`。但是`Double`，`Integer`做。

使这项工作的一种方法是这样的：

```
public static <T extends Comparable<? super T>> int compare(T arg1, T arg2)
{
    return arg1.compareTo(arg2);
}

public static void main(String[] args)
{   
    Double i = new Integer(5).doubleValue();
    Double j = new Double(7);

    System.out.println(GenericsTest.compare(i, j));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-02T07:13:07.547

```
private boolean compareObject(Object expected, Object actual) {
    if (expected instanceof Number && actual instanceof Number) {
        double e = ((Number) expected).doubleValue();
        double a = ((Number) actual).doubleValue();
        return e == a;
    } else {
        return com.google.common.base.Objects.equal(expected, actual);
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-07T10:05:55.060

创建一个实现 Comparable 的类，该类在构造函数中接受一个 Number。例如

```
public class GenericNumber implements Comparable<GenericNumber> {
    private Number num;
    public GenericNumber(Number num) {
        this.num = num;
    }
    // write compare function that compares num member of two
    // GenericNumber instances
} 
```

然后只需执行以下操作：

```
GenericNumber i = new GenericNumber(new Integer(5));
GenericNumber j = new GenericNumber(new Double(7));
System.out.println(GenericsTest.compare(i,j)); 
```

# ios - iOS4/5 中的 Facebook 框架？

> ID：13759846
> 
> 赞同：0
> 
> 时间：2012-12-07T08:59:03.143
> 
> 标签：ios, facebook

我可以使用新的 XCode 4.5.2 将新的 facebook 框架添加到我的项目中，但我猜它不起作用？我无法访问装有 iOS 4 或 5 的设备（有 5 个模拟器）。我只需要进行 Facebook 分享（从我的应用发布状态）。

我应该使用什么策略来确保我在所有平台（iOS 4、ios 5、ios6）上获得 Facebook 分享？现在我们正在使用 FacebookManager

[https://github.com/ryotarai/FacebookManager](https://github.com/ryotarai/FacebookManager)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:59:50.497

来自 Facebook 的普通 Facebook iOS SDK 可以在所有版本的 iOS 上完美运行。你应该只使用它。它将在 iOS 6 上使用本机身份验证，并适当地切换到 FB 应用程序或 Safari。

# xml - 在 XSLT 中处理元素和属性

> ID：13759855
> 
> 赞同：0
> 
> 时间：2012-12-07T09:00:08.700
> 
> 标签：xml, xslt

好的，所以我浏览了许多相关的帖子，但无法确定我的问题的答案。我需要编写一个 XSLT 来转换以下格式的 XML

```
<Message>
   <Receiver>
      <name>123</name>
      <address>111</address>
      <phone>1000</phone> 
   </Receiver>
   <List>
      <item>
         <no>1</no>
         <desc>one</desc>
      </item>
      <item>
         <no>2</no>
         <desc>two</desc>
      </item>
   </List>
<Message> 
```

对此——

```
<Message>    
   <Receiver name=123>
       <address>111</address>
       <phone>1000</phone> 
   </Receiver>
   <List>
       <item no=1>
          <desc>one</desc>
       </item>
       <item no=2>
          <desc>two</desc>
       </item>
   </List>
</Message> 
```

我试过使用 xsl 模板匹配标签。但失败得很惨。非常感谢任何想法或帮助/

**注意我已经编辑了帖子以显示实际问题 - 我最初只发布了一部分以避免混淆，但似乎需要将问题作为一个整体来说明。给您带来的不便深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:12:40.080

这可以通过建立在身份模板上来完成。首先你需要一个模板来匹配**Receiver**元素，复制它但同时添加**name**属性

```
<xsl:template match="Receiver">
    <Receiver name="{name}">
        <xsl:apply-templates select="@*|node()"/>
    </Receiver>
</xsl:template> 
```

**您可以对item**元素执行类似的操作。请注意这是如何利用“属性值模板”从名称元素的值创建名称属性的。

然后，您只需要一个模板来匹配**名称**并且**没有**元素并忽略它们，因此它们不会被输出。

```
<xsl:template match="name|no" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="Receiver">
        <Receiver name="{name}">
            <xsl:apply-templates select="@*|node()"/>
        </Receiver>
    </xsl:template>

    <xsl:template match="item">
        <item no="{no}">
            <xsl:apply-templates select="@*|node()"/>
        </item>
    </xsl:template>

    <xsl:template match="name|no" />

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<Message>
   <Receiver name="123">
      <address>111</address>
      <phone>1000</phone>
   </Receiver>
   <List>
      <item no="1">
         <desc>one</desc>
      </item>
      <item no="2">
         <desc>two</desc>
      </item>
  </List>
</Message> 
```

现在，如果您想要更通用，并且有一个规则，将任何父元素的第一个“叶子”元素转换为属性，那么试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="*[*[1][not(*)]]">
        <xsl:copy>
            <xsl:attribute name="{name(*[1])}">
                <xsl:value-of select="*"/>
            </xsl:attribute>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*/*[1][not(*)]"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

这也应该输出相同的结果。我将把它作为练习留给读者它是如何工作的......

# web-services - Web服务中的会话共享

> ID：13759859
> 
> 赞同：0
> 
> 时间：2012-12-07T09:00:21.803
> 
> 标签：web-services, jakarta-ee, cxf, jsessionid

我正在使用一个基于 gwt 的应用程序，我想引入 Web 服务[[Apache CXF](http://cxf.apache.org/) ] 来为其他应用程序提供访问业务层，这些应用程序是用 php、iphone 和 android 等其他技术构建的。

根据客户要求，

```
->create gui pages in php
->create login module (with oauth concept) in php 
->Use php webservice for login process 
->Use java webservice to access business layer 
```

现在我的问题是出于安全原因访问特定的业务层，我们必须以某种方式维护用户会话。正确的？

所以当我提到要求时，我如何在我的 Java EE 应用程序服务器中管理会话。我应该为每个用户请求创建一个会话吗？

如果我的登录模块在 Apache 服务器上，我如何为用户维护会话？

**注意：** 请注意，我的登录使用的是具有某些 oauth 功能的 php 应用程序，它将重定向到 Java EE 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:04:21.543

在应用程序服务器实例之间传递 JSESSIONID 将无济于事。除非会话是集群的，否则每个应用程序都有自己的会话容器并且不能共享（除非您编写一个自定义阀门来搜索应用程序服务器中的所有会话）。另外 WS 没有 http 会话的概念，您必须实现自己的机制。请详细说明您要达到什么目的？然后我们将能够为您提供更多帮助。

# android-viewpager - android VIewpager 如何实现绑定效果

> ID：13759862
> 
> 赞同：2
> 
> 时间：2012-12-07T09:00:59.090
> 
> 标签：android-viewpager, bounce

我谷歌这个问题很多天。找到一个解决方案，在 Viewpager 的第一个和结尾添加一个空白视图。当 viewpager.getcurrentItem()==0 时，则重新指向 1。在我看来这种方法很差。因为，这个解决方案改变了 viewpager.getcount()。可能会导致很多问题。

我找到了一个类来处理这个， [http://developer.android.com/reference/android/support/v4/widget/EdgeEffectCompat.html](http://developer.android.com/reference/android/support/v4/widget/EdgeEffectCompat.html) 但我不知道如何使用它！谁能给我一个例子？

像那样 [https://docs.google.com/open?id=0B9poNqa96rJyLU5Va0lnMHJGY0k](https://docs.google.com/open?id=0B9poNqa96rJyLU5Va0lnMHJGY0k)

当我松开手指回到原来的位置

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-02T12:19:23.393

如果有人仍然想知道如何做到这一点，我实际上找到了一个基于 renard314 的出色库的解决方案：[https](https://github.com/inovex/ViewPager3D) ://github.com/inovex/ViewPager3D 所有的功劳都应该归功于他 :) 无论如何，扩展 ViewPager：

```
public class BounceBackViewPager extends ViewPager {

/**
 * maximum z distance to translate child view
 */
final static int DEFAULT_OVERSCROLL_TRANSLATION = 150;

/**
 * duration of overscroll animation in ms
 */
final private static int DEFAULT_OVERSCROLL_ANIMATION_DURATION = 400;

@SuppressWarnings("unused")
private final static String DEBUG_TAG = ViewPager.class.getSimpleName();
private final static int INVALID_POINTER_ID = -1;

/**
 * 
 * @author renard, extended by Piotr Zawadzki
 * 
 */
private class OverscrollEffect {
    private float mOverscroll;
    private Animator mAnimator;

    /**
     * @param deltaDistance [0..1] 0->no overscroll, 1>full overscroll
     */
    public void setPull(final float deltaDistance) {
        mOverscroll = deltaDistance;
        invalidateVisibleChilds(mLastPosition);
    }

    /**
     * called when finger is released. starts to animate back to default position
     */
    private void onRelease() {
        if (mAnimator != null && mAnimator.isRunning()) {
            mAnimator.addListener(new AnimatorListener() {

                @Override
                public void onAnimationStart(Animator animation) {
                }

                @Override
                public void onAnimationRepeat(Animator animation) {
                }

                @Override
                public void onAnimationEnd(Animator animation) {
                    startAnimation(0);
                }

                @Override
                public void onAnimationCancel(Animator animation) {
                }
            });
            mAnimator.cancel();
        } else {
            startAnimation(0);
        }
    }

    private void startAnimation(final float target) {
        mAnimator = ObjectAnimator.ofFloat(this, "pull", mOverscroll, target);
        mAnimator.setInterpolator(new DecelerateInterpolator());
        final float scale = Math.abs(target - mOverscroll);
        mAnimator.setDuration((long) (mOverscrollAnimationDuration * scale));
        mAnimator.start();
    }

    private boolean isOverscrolling() {
        if (mScrollPosition == 0 && mOverscroll < 0) {
            return true;
        }
        final boolean isLast = (getAdapter().getCount() - 1) == mScrollPosition;
        if (isLast && mOverscroll > 0) {
            return true;
        }
        return false;
    }

}

final private OverscrollEffect mOverscrollEffect = new OverscrollEffect();
final private Camera mCamera = new Camera();

private OnPageChangeListener mScrollListener;
private float mLastMotionX;
private int mActivePointerId;
private int mScrollPosition;
private float mScrollPositionOffset;
final private int mTouchSlop;

private float mOverscrollTranslation;
private int mOverscrollAnimationDuration;

public BounceBackViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
    setStaticTransformationsEnabled(true);
    final ViewConfiguration configuration = ViewConfiguration.get(context);
    mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
    super.setOnPageChangeListener(new MyOnPageChangeListener());
    init(attrs);
}

private void init(AttributeSet attrs) {
    TypedArray a = getContext().obtainStyledAttributes(attrs, R.styleable.BounceBackViewPager);
    mOverscrollTranslation = a.getDimension(R.styleable.BounceBackViewPager_overscroll_translation, DEFAULT_OVERSCROLL_TRANSLATION);
    mOverscrollAnimationDuration = a.getInt(R.styleable.BounceBackViewPager_overscroll_animation_duration, DEFAULT_OVERSCROLL_ANIMATION_DURATION);
    a.recycle();
}

public int getOverscrollAnimationDuration() {
    return mOverscrollAnimationDuration;
}

public void setOverscrollAnimationDuration(int mOverscrollAnimationDuration) {
    this.mOverscrollAnimationDuration = mOverscrollAnimationDuration;
}

public float getOverscrollTranslation() {
    return mOverscrollTranslation;
}

public void setOverscrollTranslation(int mOverscrollTranslation) {
    this.mOverscrollTranslation = mOverscrollTranslation;
}

@Override
public void setOnPageChangeListener(OnPageChangeListener listener) {
    mScrollListener = listener;
};

private void invalidateVisibleChilds(final int position) {
     for (int i = 0; i < getChildCount(); i++) {
     getChildAt(i).invalidate();

     }
    //this.invalidate();
    // final View child = getChildAt(position);
    // final View previous = getChildAt(position - 1);
    // final View next = getChildAt(position + 1);
    // if (child != null) {
    // child.invalidate();
    // }
    // if (previous != null) {
    // previous.invalidate();
    // }
    // if (next != null) {
    // next.invalidate();
    // }
}

private int mLastPosition = 0;

private class MyOnPageChangeListener implements OnPageChangeListener {

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        if (mScrollListener != null) {
            mScrollListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
        }
        mScrollPosition = position;
        mScrollPositionOffset = positionOffset;
        mLastPosition = position;
        invalidateVisibleChilds(position);
    }

    @Override
    public void onPageSelected(int position) {

        if (mScrollListener != null) {
            mScrollListener.onPageSelected(position);
        }
    }

    @Override
    public void onPageScrollStateChanged(final int state) {

        if (mScrollListener != null) {
            mScrollListener.onPageScrollStateChanged(state);
        }
        if (state == SCROLL_STATE_IDLE) {
            mScrollPositionOffset = 0;
        }
    }
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    try {
        final int action = ev.getAction() & MotionEventCompat.ACTION_MASK;
        switch (action) {
        case MotionEvent.ACTION_DOWN: {
            mLastMotionX = ev.getX();
            mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
            break;
        }
        case MotionEventCompat.ACTION_POINTER_DOWN: {
            final int index = MotionEventCompat.getActionIndex(ev);
            final float x = MotionEventCompat.getX(ev, index);
            mLastMotionX = x;
            mActivePointerId = MotionEventCompat.getPointerId(ev, index);
            break;
        }
        }
        return super.onInterceptTouchEvent(ev);
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
        return false;
    } catch (ArrayIndexOutOfBoundsException e) {
        e.printStackTrace();
        return false;
    }
}

@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    try {
        return super.dispatchTouchEvent(ev);
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
        return false;
    } catch (ArrayIndexOutOfBoundsException e) {
        e.printStackTrace();
        return false;
    }
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    boolean callSuper = false;

    final int action = ev.getAction();
    switch (action) {
    case MotionEvent.ACTION_DOWN: {
        callSuper = true;
        mLastMotionX = ev.getX();
        mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
        break;
    }
    case MotionEventCompat.ACTION_POINTER_DOWN: {
        callSuper = true;
        final int index = MotionEventCompat.getActionIndex(ev);
        final float x = MotionEventCompat.getX(ev, index);
        mLastMotionX = x;
        mActivePointerId = MotionEventCompat.getPointerId(ev, index);
        break;
    }
    case MotionEvent.ACTION_MOVE: {
        if (mActivePointerId != INVALID_POINTER_ID) {
            // Scroll to follow the motion event
            final int activePointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);
            final float x = MotionEventCompat.getX(ev, activePointerIndex);
            final float deltaX = mLastMotionX - x;
            final float oldScrollX = getScrollX();
            final int width = getWidth();
            final int widthWithMargin = width + getPageMargin();
            final int lastItemIndex = getAdapter().getCount() - 1;
            final int currentItemIndex = getCurrentItem();
            final float leftBound = Math.max(0, (currentItemIndex - 1) * widthWithMargin);
            final float rightBound = Math.min(currentItemIndex + 1, lastItemIndex) * widthWithMargin;
            final float scrollX = oldScrollX + deltaX;
            if (mScrollPositionOffset == 0) {
                if (scrollX < leftBound) {
                    if (leftBound == 0) {
                        final float over = deltaX + mTouchSlop;
                        mOverscrollEffect.setPull(over / width);
                    }
                } else if (scrollX > rightBound) {
                    if (rightBound == lastItemIndex * widthWithMargin) {
                        final float over = scrollX - rightBound - mTouchSlop;
                        mOverscrollEffect.setPull(over / width);
                    }
                }
            } else {
                mLastMotionX = x;
            }
        } else {
            mOverscrollEffect.onRelease();
        }
        break;
    }
    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_CANCEL: {
        callSuper = true;
        mActivePointerId = INVALID_POINTER_ID;
        mOverscrollEffect.onRelease();
        break;
    }
    case MotionEvent.ACTION_POINTER_UP: {
        final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        final int pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);
        if (pointerId == mActivePointerId) {
            // This was our active pointer going up. Choose a new
            // active pointer and adjust accordingly.
            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
            mLastMotionX = ev.getX(newPointerIndex);
            mActivePointerId = MotionEventCompat.getPointerId(ev, newPointerIndex);
            callSuper = true;
        }
        break;
    }
    }

    if (mOverscrollEffect.isOverscrolling() && !callSuper) {
        return true;
    } else {
        return super.onTouchEvent(ev);
    }
}

@Override
protected boolean getChildStaticTransformation(View child, Transformation t) {
    if (child.getWidth() == 0) {
        return false;
    }
    final int position = child.getLeft() / child.getWidth();
    final boolean isFirstOrLast = position == 0 || (position == getAdapter().getCount() - 1);
    if (mOverscrollEffect.isOverscrolling() && isFirstOrLast) {
        final float dx = getWidth() / 2;
        final int dy = getHeight() / 2;
        t.getMatrix().reset();
        final float translateX =(float) mOverscrollTranslation * (mOverscrollEffect.mOverscroll > 0 ? Math.min(mOverscrollEffect.mOverscroll, 1) : Math.max(mOverscrollEffect.mOverscroll, -1));
        mCamera.save();
        mCamera.translate(-translateX, 0, 0);
        mCamera.getMatrix(t.getMatrix());
        mCamera.restore();
        t.getMatrix().preTranslate(-dx, -dy);
        t.getMatrix().postTranslate(dx, dy);

        if (getChildCount() == 1) {
            this.invalidate();
        } else {
            child.invalidate();
        }
        return true;
    }
    return false;
} 
```

}

*并在values*文件夹中的某处添加一个资源文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<declare-styleable name="BounceBackViewPager">
    <!--
    determines the maximum amount of translation along the z-axis during the overscroll. 
    Default is 150.
    -->
    <attr name="overscroll_translation" format="dimension" />

    <!-- Duration of animation when user releases the over scroll. Default is 400 ms. -->
    <attr name="overscroll_animation_duration" format="integer" />
</declare-styleable> 
```

我所要做的就是更改转换以支持 translateX。我强烈建议先阅读 ViewPager3D 的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T03:27:17.100

BounceBackViewPager有一个bug，当在一个页面（屏幕）中显示多个页面（片段）时，只有第一页有OverscrollEffect，也就是说，你可以在屏幕上看到多个页面，只有第一页会反弹，看起来奇怪的。而且只有左边有overscroll效果，右边没有。

我的工具是：

```
@Override
public float getPageWidth(int position) {
          return    1/mShowPictureSize; 
} 
```

# java - 在 Java 中为后面的处理记录信息

> ID：13759863
> 
> 赞同：-1
> 
> 时间：2012-12-07T09:01:00.647
> 
> 标签：java, logging, io

我需要记录具有以下要求的信息：

*   它用于将数据写入文件，后者将被处理
*   输出行具有预定义的结构
*   必须非常快
*   它应该缓冲数据并将其写入后台文件。
*   它应该支持旋转文件，并且还应该允许在需要时手动旋转文件

你碰巧知道任何支持这个的好图书馆吗？或者你会建议我自己写吗？我不介意自己实施一个，但我想在做出决定之前知道我的选择是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:48:46.100

大多数常见的 Java 日志库都支持您所要求的大部分内容，除了异步写入部分。您可能想查看以下广泛使用的库：

*   [Log4J](http://logging.apache.org/log4j/1.2/) - Log4J 具有极强的可配置性，但它确实存在一些应该在即将发布的新 2.x 版本系列中解决的问题。

*   [Logback](http://logback.qos.ch/) - 这被设计为 Log4J 1.2 的继承者 - Log4J 2.x 将包括 Logback 所做的一些改进。

*   [SLF4J](http://www.slf4j.org/) - 这个库可以充当许多底层日志库的代理，允许根据需要切换日志框架。这实际上可能是避免将自己绑定到特定日志库的最佳选择，尽管它可能不如直接使用底层 API 高效。

至于异步写入要求，如果有必要，将所有日志推送到您自己的单独线程应该相对容易。

**编辑：**

显然，[Log4J 确实支持异步日志记录](https://stackoverflow.com/q/4957319/507519)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:48:00.047

我没有任何直接经验，但似乎 log4j 是一个非常受欢迎的选择。快速检查表明它支持文件轮换并且被认为是快速的（至少，比 Java 的内置设施快得多），在我看来，这是您要求中最严格的两个。

链接：

[主要网站](http://logging.apache.org/log4j/)

[一些SO讨论](https://stackoverflow.com/questions/31840/java-logging-vs-log4j)

# java - 在Java中将字符串保存到文本文件

> ID：13759864
> 
> 赞同：-1
> 
> 时间：2012-12-07T09:01:06.997
> 
> 标签：java, string, text, file-io

我正在做一个小应用程序，我在一些圆圈、正方形和三角形周围移动。我从 txt 文件中读取的坐标。但是一旦我完成移动它们，我想将它们的坐标保存在同一个 txt 文件中。

这就是代码现在的样子：

```
import java.io.FileNotFoundException;
import se.lth.cs.ptdc.window.SimpleWindow;

public class ShapeTest {

    public static void main(String[] args) throws FileNotFoundException {
            SimpleWindow w = new SimpleWindow(600, 600, "ShapeTest");
            ShapeList shapes = new ShapeList();
            java.util.Scanner scan = null;
            try {
                scan = new java.util.Scanner(new java.io.File("shapedata.txt"));
            } catch (java.io.FileNotFoundException e) {
                System.err.println("shapedata.txt couldn't be found");
            }

            int x,y,z;
            while(scan.hasNext()) {
                    String s = scan.next();
                    if (s.contentEquals("S")){
                            x = scan.nextInt();
                            y = scan.nextInt();
                            z = scan.nextInt();
                            shapes.insert(new Square(x,y,z));
                    } else if (s.contentEquals("C")) {
                            x = scan.nextInt();
                            y = scan.nextInt();
                            z = scan.nextInt();
                            shapes.insert(new Circle(x,y,z));
                    } else if (s.contentEquals("T")) {
                            x = scan.nextInt();
                            y = scan.nextInt();
                            z = scan.nextInt();
                            shapes.insert(new Triangle(x,y,z));
                    }

            }
            shapes.draw(w);

            CommandDispatcher cd = new CommandDispatcher(w,shapes);
            cd.mainLoop();
    }
} 
```

我需要添加什么？我试过`FileUtils.writeStringToFile`没有任何好结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:36:31.973

您可以尝试使用 java.util.Formatter 来验证您的文本文件，然后格式化您的输出，将它们存储在同一个文本文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T16:56:38.687

如果您在保存整数时遇到问题，只需`String.valueOf()`将值转换为字符串并正常保存即可。然后你可以用`Integer.parseInt()`它们来读回它们。

如果您一般要问如何保存到文件，这是一个更大的问题，而且[Stack Overflow 上提供了比我更合格的答案。](https://stackoverflow.com/questions/1053467/how-do-i-save-a-string-to-a-text-file-using-java)

# ios - 找出安装 Cocoapods 的版本

> ID：13759865
> 
> 赞同：0
> 
> 时间：2012-12-07T09:01:10.567
> 
> 标签：ios, dependency-management, cocoapods

我如何以及在哪里可以找到通过 cocoapods 为不同的 iOS sdks 安装哪个版本的框架？[有时它显示错误使用的版本不兼容]

例如，我想安装 Restkit。这将是我需要在 pod 中添加为版本号的语句。如何识别它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:16:29.360

看看他们的 pod 规范（例如[RestKit 0.20.0pre2](https://github.com/CocoaPods/Specs/blob/master/RestKit/0.20.0pre2/RestKit.podspec)的 pod 规范）。有几行说明这是基于哪个平台

```
# Platform setup
s.requires_arc = true
s.ios.deployment_target = '5.0'
s.osx.deployment_target = '10.7' 
```

所以如果你想在你的项目中使用 RestKit 0.20.0pre2，你至少要使用相同的设置。

# linux - SNMP 代理所需的 MAU 数据

> ID：13759866
> 
> 赞同：0
> 
> 时间：2012-12-07T09:01:15.603
> 
> 标签：linux, embedded, snmp

我正在尝试编写一个`snmp agent`for`RFC 4836`托管对象的定义`IEEE 802.3 Medium Attachment Units (MAUs)`，以在嵌入式 Linux 系统（Linux 服务器 2.6.35.12+）上运行。我曾经`mib2c`设置过我的框架，但在寻找要填写的数据的位置时停滞不前。我不确定我应该在哪里寻找：如果`MAU`是`eth device`or的一部分`a separate interface`，我是否应该在某处寻找`/sys`或`/proc` `fs`，或者如果我需要直接访问设备寄存器（或两者都访问？）。

* * *

我知道需要很多不同的数据，并且我并不要求提供包含所有内容的路线图，但此时我已经挂断了电话，不知道应该把精力集中在哪里——驱动程序代码？

抱歉，如果这似乎是一个愚蠢的问题，但我一直在网上和 StackOverflow 中寻找，但没有找到我需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:30:36.517

原来我需要的信息可以从 mii-tool 获得。尽管您可能在网上看到了什么，但这并没有过时（它可能是几年前的，但似乎已经更新了）。或者，您可以使用对 SIOCGMIIREG 的 ioctl 调用直接访问设备寄存器，以避免解析命令输出。

# java - 哪个控制结构与 3 个可能的输入一起使用（效率）

> ID：13759869
> 
> 赞同：3
> 
> 时间：2012-12-07T09:01:24.387
> 
> 标签：java, if-statement, switch-statement

在我的 java 程序中，我需要一个控制结构，它应该为 3 个不同的输入提供 3 个不同的结果。

输入 1：文本 1

输入 2：文本 2

输入 3：文本 3

我的问题是：最佳实践和效率方面，应该使用哪种控制结构？我的第一个想法是 switch case，但为什么我会选择 IF-Structures 或 nested 呢？运营商？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:06:29.613

您应该首先争取良好的可读性，然后在需要时提高效率。如果有很多选项，小就用switch，如果/else

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T09:10:50.500

我想你会发现人们普遍认为 switch 语句在这种情况下是温和的首选，纯粹是基于可读性。如果添加额外的案例，它的扩展性会更好，即使有三个选项，它仍然更具可读性，特别是案例只是一个输入的三个变体。性能差异可以忽略不计，但如果你真的想进入那个特定的方面，肯定会有讨论。

出于类似的可读性原因，我建议在超过两种情况下避免使用三元运算符（即内联 if/'?'）。就个人而言，我也不会解析它，除非涉及的所有表达式都非常简短，否则我会避免它。

大部分是题外话，但有趣的是，在 Java 7 之前，Java 中没有添加打开字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T09:13:16.963

也许是嵌套的三元运算符？只是在开玩笑。我认为无论使用何种结构，这里的效率都将几乎相同。我会选择，`if/else`因为我认为它比 a 更具可读性`swtich`（更不容易出错 - 不要忘记`breaks`-），但这只是一种意见。

# file - Prolog，定义子句语法和文件

> ID：13759873
> 
> 赞同：1
> 
> 时间：2012-12-07T09:01:43.237
> 
> 标签：file, prolog, dcg

我是 Prolog 的新手，我刚刚开始环顾四周。我现在阅读了关于*简单逻辑*和*学习 Prolog 的定义子句语法一章！*，所以现在我想开始做一些运动，但我被卡住了。我必须使用这种语法从文件中读取

```
setName = {elemen1, element2,..., elementN}.
element1: element2 > element3. 
```

现在我已经读到，当你定义一个 DCG 时，你有一个免费的解析器，所以我想这样做以将数据从我的文件中获取到 Prolog 程序。

我的问题是，在我读过的所有例子中，它们总是提供一个基本的字典，比如

```
article --> [the] 
```

但我不能这样做，因为我不知道文件中会写什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:17:54.257

在 SWI-Prolog 中，考虑使用[`library(dcg/basics)`](http://www.swi-prolog.org/pldoc/doc/swi/library/dcg/basics.pl). 它提供了可以在 DCG 中使用的构建块。专注于对文件内容的清晰声明性描述，并用 DCG 说明这一点。然后使用`phrase_from_file/2`from[`library(pio)`](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.19%27,swi%28%27/doc/Manual/pio.html%27%29%29)将 DCG 应用于文件。

# .htaccess - mod rewrite expression in .htaccess

> ID：13759875
> 
> 赞同：1
> 
> 时间：2012-12-07T09:02:01.630
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

I have this regular expression for mod_rewrite

```
RewriteRule ^([0-9]+)/(fr|ru|en)/([a-z]+|[0-9]+)/([x]+([a-z]+))/([y]+([a-z]+))/([z]+([a-z]+))$ /index.php?start=$1&lang=$2&cat=$3&sc=$4&ssc=$5&sssc=$6 [L] 
```

But in case of link: `http://example.com/4564/fr/gdgfdgbgdfgd/xfirst/ysecond/zthird`

I have these values:

```
start=4564
lang=fr
cat=gdgfdgbgdfgd
sc=xfirst
ssc=first
sssc=ysecond 
```

So problem in: ssc и sssc.

I've changed to:

```
sc - a
ssc - b
sssc - c 
```

but nothing.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:14:21.990

如果你想要的是

```
start=4564
lang=fr
cat=gdgfdgbgdfgd
sc=xfirst
ssc=ysecond
sssc=zthird 
```

然后删除`[x]+`, `[y]+`,之后的捕获`[z]+`。所以规则是

```
RewriteRule ^([0-9]+)/(fr|ru|en)/([a-z]+|[0-9]+)/([x]+[a-z]+)/([y]+[a-z]+)/([z]+[a-z]+)$ /index.php?start=$1&lang=$2&cat=$3&sc=$4&ssc=$5&sssc=$6 [L] 
```

# csv - Need to help cleaning data imported from a CSV file

> ID：13759876
> 
> 赞同：2
> 
> 时间：2012-12-07T09:02:01.237
> 
> 标签：csv

I have a data set in a CSV file where all of the data is encased within quotations ("). For example:

```
"10/10/2008,""15:48:09"",""760.40"","" -N-       NONE"""
"10/10/2008,""16:00:00"",""754.66"","" -N-       NONE"""
"10/10/2008,""16:15:00"",""761.83"","" -N-       NONE"""
"10/10/2008,""16:30:00"",""758.24"","" -N-       NONE""" 
```

I have imported the csv file but the results still include quotations in the dataframe. For example:

```
0 "10/10/2008   "16:00:00""  "754.66""  " -N-   NONE"""" 
```

I need either a new method of importing this data from the CSV or a method for removing the extra quotation marks from the data.

This is how I imported the data:

```
NAME = pd.read_table('FileName.csv', sep=',"') 
```

I have tried to delete the quotations using a number of ideas I found on this site, but I get errors that I cant decipher. FYI, I am VERY new to this, if you couldn't tell. Any assistance would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:38:03.293

这是格式错误的 CSV，您必须在尝试使用它之前对其进行修复。首先，您需要删除前导和尾随双引号，然后将 2 x 双引号替换为单引号。

像这样...

```
10/10/2008,"15:48:09","760.40"," -N-       NONE"
10/10/2008,"16:00:00","754.66"," -N-       NONE"
10/10/2008,"16:15:00","761.83"," -N-       NONE"
10/10/2008,"16:30:00","758.24"," -N-       NONE" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:30:48.307

您可以再次尝试删除引号。然后导入它使用 ',' 作为唯一的分隔符： NAME = pd.read_table('FileName.csv', sep=',')

# ios - How to download a Dropbox share linkage (aimed at a zip file) to local

> ID：13759882
> 
> 赞同：3
> 
> 时间：2012-12-07T09:02:29.493
> 
> 标签：ios, dropbox, dropbox-api

I have following question and want help regarding that.I'm using Dropbox iOS SDK.

Is it possible to download a Dropbox share linkage (aimed at a zip file) like [https://www.dropbox.com/s/m2o28nls8m8uyx9/FacebookAPI.zip](https://www.dropbox.com/s/m2o28nls8m8uyx9/FacebookAPI.zip).

I think I could use HTTP post method. However, the receive MIME Type is text/html rather than zip type.

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T14:01:44.137

我想你可以试试这个：将你的共享链接更改为： [https ://dl.dropbox.com/s/m2o28nls8m8uyx9/FacebookAPI.zip?dl=1](https://dl.dropbox.com/s/m2o28nls8m8uyx9/FacebookAPI.zip?dl=1)

它适用于我的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-12T14:54:44.257

对我来说这有效

将“ [https://www.dropbox.com](https://www.dropbox.com) ”替换为“ [https://dl.dropboxusercontent.com](https://dl.dropboxusercontent.com) ”

# r - 如何将嵌套函数的访问范围定义为全局？

> ID：13759885
> 
> 赞同：2
> 
> 时间：2012-12-07T09:02:41.643
> 
> 标签：r, nested-attributes

我有一个 R 代码，如下所示：

```
func1 = function(a) {

  func2 = function(a) {
    return(a+2)
  }

  func3 = function(a) {
    return(a+3)
  }
  return(a+func2(a))
} 
```

我是否可以从 func1 外部调用 func2 或 func3？例如。我该如何运行：

```
x <- func2(10) #from the console? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:11:21.620

您可以创建一个函数闭包：

```
##I've removed the brackets and return to shorten the function
func1 = function(a) {
  func2 = function(a) a+2
  func3 = function(a) a+3
  return(list(func2=func2, func3=func3))
} 
```

您可以使用闭包来共享变量：

```
func1 = function(a) {
    a = a
    func2 = function() a + 2
    func3 = function() a + 3 
    return(list(func2=func2, func3=func3))
}

f = func1(50)
f$func2()
f$func3() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:12:21.737

不，你不能。

func2 定义在 func1 的范围内。

但是这个问题真的很模棱两可！任何 netsed 函数都可以访问全局范围。

```
a <- 10
function <- f(x){
   g <- function(y=x) x+a
   g(x)
} 
```

这里函数 g 是嵌套的并且有一个自由变量 a。解释器 lokks 在 g 和 f 的范围内，然后在 f（全局）的局部框架中寻找 a 的值

如果要将嵌套函数作为全局访问，为什么要将嵌套函数定义为嵌套函数？

# javascript - How to show and hide fieldset content on click of the legend

> ID：13759886
> 
> 赞同：3
> 
> 时间：2012-12-07T09:02:44.910
> 
> 标签：javascript, html, css, jsp

I have a html page as below, ![enter image description here](../Images/02ee7f70137664da1d8b72267921d282.png) the tags code is :

```
<fieldset>
          <legend>Tags</legend>
          <div>
              <label>
                <input type="checkbox" name="col" value="summary" checked="checked" />
                Name
              </label>
                  ......
                   </div>
        </fieldset> 
```

But i want to make the page as below: ![enter image description here](../Images/84ea3c1fbf93ec5ca6ab94fa53366f80.png)

In this screenshot, when i click the Columns, it will be fold and the tags invisible. Any one know how to do this? Add a CSS or JS? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:57:36.273

您可以像修改任何其他 html 元素一样使用 CSS 修改图例。使用 Jquery 非常简单，只需执行以下操作：

### 查询：

```
$(function(){
    $('legend').click(function(){  
        $(this).nextAll('div').toggle();
        $(this).hasClass('hide')?($(this).attr("class", "show")):($(this).attr("class", "hide"));
    });
})​ 
```

### CSS：

```
.hide{
    padding-left: 10px;
    background: url('img/down.gif') no-repeat left middle;
}

.show:after{
    padding-left: 10px;
    background: url('img/up.gif') no-repeat left middle;
} 
```

**[在这里提琴](http://jsfiddle.net/bzAkL/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:08:55.757

这可以通过首先找到所有`legend`元素，然后分配一个`onclick`处理程序来完成。处理程序分配给`div`在图例的父项中找到的第一个。因此，即使您在同一页面上有多个字段集和图例，这也将起作用。

**[jsFiddle 演示](http://jsfiddle.net/UHn6q/1/)**

```
window.onload = function(){

    var legends = document.getElementsByTagName("legend");

    for(var i=0; i<legends.length; i++)
    {
        legends[i].onclick = function()
        {
            var myDivs = this.parentNode.getElementsByTagName("div");
            var myDiv;

            if(myDivs.length > 0)
            {
                var myDiv = myDivs[0];

                if(myDiv.style.display == "")
                {
                    myDiv.style.display = "none"
                }
                else
                {
                    myDiv.style.display = "";
                }
            }
        }
    }

}; 
```

​ 在演示中，我还为图例添加了 CSS，`cursor:pointer;`当您将鼠标悬停在图例上时，它只显示手（表示点击）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:42:42.260

我知道不是字段集，但它的设计看起来与您发布的完全一样，所以我想这就是诀窍。下面的代码就是你要找的，关于它的一些解释在代码下面：

```
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script>
   $(document).ready(function(){
      $('#title').click(function(){
         $('#tags_check').toggle();
      });
   })
</script>

<style type="text/css">
   #content {
      position: relative;
      padding: 10px;
   }

   #title {
      border: 1px solid grey;
      position: absolute;
      background-color: #ccc;
      top: -5px;
      left: 15px;
      z-index: 1;
      cursor: pointer;
   }

   #tags_check {
      border: 1px solid grey;
      position: relative;
      z-index: 0;
      top: 3px;
      padding: 5px;
   }
</style>
</head>

<body>
<div id="content">
   <div id="title">Columns</div>
   <div id="tags_check">
      <input type="checkbox" name="col" value="summary" checked="checked" /> Name1
      <input type="checkbox" name="col" value="summary" checked="checked" /> Name2
   </div>
</div>  
</body> 
```

我正在使用 jquery，因为它比 writtingh 任何其他 javascript 都容易得多，而且我正在通过 CDN 加载库。如您所见，显示或隐藏非常简单，只需在加载文档时，在两种状态之间切换，显示或隐藏。我包括元素的 ID（如您所见，我更改了布局）以轻松获取它们。

关于设计，使用字段集...实现您发布的内容会很复杂。最好只有两个 div，“位置：相对”，以便轻松上下移动它们。CSS 显示 z-index 将一个放在 oter 上，这仅适用于相对和绝对元素，沿 top 和 left 属性。希望你喜欢！

# html - How to align an image to the left most region of the webpage?

> ID：13759887
> 
> 赞同：0
> 
> 时间：2012-12-07T09:02:45.580
> 
> 标签：html, html-parsing

When we include an image in a web page with the following code

```
<html><body>
<img src="http://www.example.com/abc.jpg">
</body></html> 
```

The browsers render it so that there is a margin of few pixels to the left and the top. I want the image to stick to the the left and top borders.

Help needed with that.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T09:05:26.780

你有几个选择：

1.  使用**[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)**。简单的例子：

    ```
    * { padding: 0; margin: 0; } 
    ```

2.  用于“强制”将图像放置在您想要的任何位置（`position: absolute;`可以使用`top`、`right`和.`bottom``left`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:25:24.367

这些是身体的边缘。我总是在我的 css 文件中使用这种样式：

`html, body { margin: 0px; padding: 0px; border: none; }`

或者您可以在您的情况下内联编写它：

`<body style="margin:0px; padding:0px;">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:05:24.090

用 CSS 试试这个

```
<img src="http://www.example.com/abc.jpg" class="left-image">

html, body, img{
padding:0px;
margin:0px;
}

img.left-image{
 float:left; /* it may require if you have more elements in same container, not always */
 } 
```

或者您可以随时定位，例如，如果您想要顶部 10px 和左侧 10px

```
img.left-image{
 position:absolute;
 left:10px;
 top:10px;
 } 
```

# vb.net - How to pass listbox into background worker in VB .Net 2010

> ID：13759890
> 
> 赞同：1
> 
> 时间：2012-12-07T09:03:12.083
> 
> 标签：vb.net

I am trying to loop through a listbox which contains filenames and upload them to an FTP server with a background worker. I am getting a cross-thread exception at my for loop when I attempt to access Listbox1.Items.Count within background worker (obviously because it's on a different thread) so I'm curious how I can pass the listbox into my background worker to execute the code they way I have written it below?

```
Private Sub bgw_upAllFiles_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles bgw_upAllFiles.DoWork
        Dim i
        Dim toPath As String = MyForms.MoveOutFTPFormDir & PDFVar_PHOTO_URL_NUM & "/"
        For i = 0 To e.Argument.Items.Count - 1
            Try
retryDL:

                My.Computer.Network.UploadFile(ListBox1.Items(i).ToString, toPath & IO.Path.GetFileName(ListBox1.Items(i).ToString), MyForms.MoveOutFTPUser, MyForms.MoveOutFTPPwd)
            Catch ex As Exception
                If ex.ToString.Contains("error: (550)") Then

                    'MsgBox("Need to create FTP folder")
                    Try
                        Dim myftprequest As Net.FtpWebRequest = CType(Net.FtpWebRequest.Create(toPath), System.Net.FtpWebRequest)
                        myftprequest.Credentials = New System.Net.NetworkCredential("JeffreyGinsburg", "andy86")
                        myftprequest.Method = System.Net.WebRequestMethods.Ftp.MakeDirectory
                        myftprequest.GetResponse()

                        GoTo retryDL

                    Catch ex2 As Exception
                        ex2.ToString()
                    End Try

                Else
                    MsgBox(ex.ToString)

                End If
                MDIParent1.StatusStrip.Items.Item(2).Text = "Upload Complete"
            End Try
        Next

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:12:12.383

调用 RunWorkerAsync 时，可以将对象作为参数传递。你可以使用这个对象并传入你的 DDL。

然后，在 DoWork 事件中，您可以像这样使用 DDL：

```
Dim ddl = CType(e.Arugment, DropDownList) 
```

[BackgroundWorker.RunWorkerAsync 方法](http://msdn.microsoft.com/en-us/library/f00zz5b2.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:12:41.633

将项目作为字符串数组传递给后台工作人员：

```
 BackgroundWorker1.RunWorkerAsync(ListBox1.Items.Cast(Of String).ToArray) 
```

然后在 dowork 子中迭代该数组：

```
Private Sub BackgroundWorker1_DoWork(ByVal sender As Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
    Dim files As String() = DirectCast(e.Argument, String())

    For Each file As String In files
        'My.Computer.Network.UploadFile(file, ......
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:30:58.217

你有两个选择：

在不同的线程上运行：

worker.RunWorkerAsync(Listbox1.Items.Cast().ToList())

然后使用：

```
 private void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        var items = e.Argument as List<string>;
    } 
```

或者您在主线程上调用操作：

```
 ListBox1.Invoke(new Action(() =>
        {
            var items = ListBox1.Items;
        })); 
```

# actionscript-3 - AIR UrlMonitor doesn't dispatch StatusEvent.STATUS

> ID：13759893
> 
> 赞同：2
> 
> 时间：2012-12-07T09:03:30.993
> 
> 标签：actionscript-3, apache-flex, url, air

As the title says, I've got a `air.net.URLMonitor` that sometimes doesn't dispatch a `StatusEvent` in case the specified site cannot be reached.

Let me show you my code:

```
_serverURL = "http://192.168.0.20:8080/"
_monitor = new URLMonitor(new URLRequest(_serverURL));
_monitor.pollInterval = 1000;
_monitor.addEventListener(StatusEvent.STATUS, serverStatusResult);
_monitor.start(); 
```

And here is my problem, when my iPad (this is a mobile AIR application btw) is in the correct network, so the one where the specified server is available, the StatusEvent is correctly dispatched. When I'm not in that network, nothing happens and I really don't know why. Shouldn't it dispatch the event anyway?

This isn't an isolated issue, when our production environment server gets updated and isn't online, the same issue appears, however when the iPad is in offline mode and cannot reach the server because of that, the `StatusEvent` fires.

Is there a reasonable explanation for that, and if so, how can I correctly implement this?

Should I use a standard `HTTPService` instead and simply listen for ResultEvent and FaultEvent?

As usual, any help would be greatly appreciated! Cheers.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:44:19.543

你的 serverStatusResult 函数中有什么？

就像是：

```
public function serverStatusResult(e:StatusEvent):void {

if (! monitor.available) {

//connection has dropped so do something

}

} 
```

我还发现设置轮询间隔对 iPad CPU 使用率有非常不利的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T13:46:53.433

解决方法很简单：
StatusEvent 有一个参数叫做 code。
变量代码是一个字符串，它可以是：

*   “服务可用”
*   “暂停服务”

好的，现在让我们看一个实现：

```
public function serverStatusResult(e:StatusEvent):void {

switch(e.code)
{
case "Service.available":online();break;
case "Service.unavailable":offline();break;
}

} 
```

希望能帮助到你 ：）

# spring - EntityManager persist() 方法不向数据库插入记录

> ID：13759894
> 
> 赞同：11
> 
> 时间：2012-12-07T09:03:31.160
> 
> 标签：spring, hibernate, jpa, persist

我有使用`EntityManager.persist(Object)`方法的问题。现在，当我摆脱其他问题时，应用程序可以在没有异常的情况下工作，但对象没有放入我的数据库中。

我的实体类：

```
@Entity
@Table(name ="Chain")
public class Chain implements Serializable{

@Id
@Column(name = "id")
  private Long id;
@Column(name = "date")
  private Date date;
@Column(name = "name")
  private String name;
//setters and getters
} 
```

我的道课：

```
@Transactional
@Repository("ChainDao")
public class ChainDaoImpl implements ChainDao{

    private EntityManager em;

    @PersistenceContext
    public void setEntityManager(EntityManager em) {
        this. em = em;
    }

    public int saveChain(Chain chain) {
        chain.setDate(new Date());
        chain.setId((long)44);
        Boolean a;
        em.persist(chain);

        return 222;
    }
} 
```

我的 xml 上下文：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" >
    <property name="persistenceXmlLocation" value="classpath*:META-INF/persistence.xml"></property></bean>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory"
            ref="entityManagerFactory" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean> 
```

和`pereistence.xml`：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">
       <persistence-unit name="sample">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <!-- Scan for annotated classes and Hibernate mapping XML files -->
        <properties>
           <property name="hibernate.archive.autodetection" value="class, hbm"/>
           <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>
           <property name="hibernate.connection.url" value="jdbc:postgresql://localhost:5432/database"/>
           <property name="hibernate.connection.username" value="postgres"/>
           <property name="hibernate.connection.password" value="pwd"/>
           <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
           <property name="hibernate.show_sql" value="true"/>
        </properties>
        </persistence-unit>

    </persistence> 
```

有谁知道我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T09:16:38.707

你得到一个特定的例外吗？如果你是，知道它是什么会很有帮助。

在 Stackoverflow 上已经有许多类似的问题：

[Spring事务上下文不持久化数据](https://stackoverflow.com/questions/5265783/spring-transactional-context-doesnt-persist-data?rq=1)

[Spring、Hibernate 和 JPA：在 entitymanager 上调用 persist 似乎并没有提交到数据库](https://stackoverflow.com/questions/374886/spring-hibernate-jpa-calling-persist-on-entitymanager-does-not-seem-to-commi?rq=1)

这些建议您应该尝试在 ,`em.flush()`之后添加`em.persist(chain)`并更改`@transactional`注释

您还应该通过以下行检查是否启用了事务注释：

```
<tx:annotation-driven transaction-manager="transactionManager"/> 
```

在您的 .xml 配置中

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T14:50:23.070

试试这个：

```
em.getTransaction().begin();
em.persist(entity);
em.getTransaction().commit(); 
```

PS：你也应该为你的ID设置一个生成方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T09:10:41.393

你能发布你得到什么例外吗？我会假设你的错误是你的persistence.xml 你没有指定你的“链”对象。

您可以使用此标签指定

```
<exclude-unlisted-classes>false</exclude-unlisted-classes> 
```

要不就

```
 <class>your.package.Chain</class> 
```

把这个放在*提供者*标签上面。

此外，永远不要为标记为 @Id 的列设置数字

当您使用带有设置值的 Id 列的方法 save() 时，hibernate 将尝试**更新**而不插入您的数据。

这样做：创建 getEntityManager 方法

```
public EntityManager getEntityManager() {
    return entityManager;
} 
```

然后

```
@Transactional
public void saveChain(Chain chain) {

    chain.setDate(new Date());
    getEntityManager().persist(chain);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-06T08:09:36.377

将这些添加到您的`web.xml`可能会解决此问题：

```
<!-- Open Entity Manager in View filter -->
<filter>
    <filter-name>openEntityManagerInViewFilter</filter-name>
    <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>openEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-05T20:41:49.943

解决了我的问题

```
org.springframework.transaction.jta.JtaTransactionManager 
```

希望这项工作！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-19T12:21:16.487

在 AppConfig 配置文件头中使用 @EnableTransactionManagement

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-31T09:41:20.913

您可以打开新的交易，然后提交您的记录。

```
@PersistenceUnit(unitName = "NameOfPersistenceUnit")
private EntityManagerFactory entityManagerFactory;

void someMethod(AccountCommodity accountCommodity){
     EntityManager entityManager = entityManagerFactory.createEntityManager();
     entityManager.getTransaction().begin();
     entityManager.persist(accountCommodity);
     entityManager.flush();
     entityManager.getTransaction().commit();
     entityManager.close();
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-07T09:09:51.723

您将需要分配 id 生成策略，如下所示：

```
@Entity
@Table(name ="Chain")
public class Chain implements Serializable{

@Id
@Column(name = "id")
    @GeneratedValue(strategy=GenerationType.IDENTITY)
  private Long id;
@Column(name = "date")
  private Date date;
@Column(name = "name")
  private String name;
//setters and getters
} 
```

并在保存方法中

```
 public int saveChain(Chain chain) {
        chain.setDate(new Date());
      //chain.setId((long)44);  remove this line
        Boolean a;
        em.persist(chain);

        return 222;
    } 
```

如果您分配 Id，那么 hibernate/jpa 将尝试更新不可用的记录，而不是插入新记录，我认为不会抛出异常。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-02-01T23:01:47.100

我能够通过将实体添加到**persistence.xml**来解决同样的问题：

```
<persistence-unit name="OwnerPersistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.test.domain.local.Entity</class>
    <exclude-unlisted-classes />
    </persistence-unit>
</persistence> 
```

# overlay - 如何在 UIImagePickerController 上覆盖 GLKView

> ID：13759899
> 
> 赞同：1
> 
> 时间：2012-12-07T09:03:52.487
> 
> 标签：overlay, uiimagepickercontroller, eaglview

我正在尝试使用 GLKView 将 OpenGL ES 内容覆盖在使用 UIImagePickerController 来自相机的实时视频馈送之上。我已经阅读了几本教程、书籍和帖子，但仍然找不到答案。供您参考，我读过的一些帖子在[这里](http://www.raywenderlich.com/3997/introduction-to-augmented-reality-on-the-iphone)、[这里](http://ofps.oreilly.com/titles/9780596804824/chblending.html)和[这里](https://stackoverflow.com/questions/3193607/is-it-possible-to-make-an-opengl-es-layer-transparent)。

在 viewDidLoad 我正在执行以下操作：

```
// Create an OpenGL ES 2.0 context and provide it to the view
// NOTE: viewOverlay is of class GLKView and a property of the view controller
viewOverlay.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
viewOverlay.opaque = NO;
viewOverlay.backgroundColor=[UIColor clearColor];

// Make the new context current
[EAGLContext setCurrentContext:viewOverlay.context];

// Create a base effect that provides standard OpenGL ES 2.0
// Shading Language programs and set constants to be used for 
// all subsequent rendering
self.baseEffect = [[GLKBaseEffect alloc] init];
self.baseEffect.useConstantColor = GL_TRUE;
self.baseEffect.constantColor = GLKVector4Make(
  1.0f, // Red
  0.0f, // Green
  0.0f, // Blue
  1.0f);// Alpha

// Set the background color stored in the current context 
glClearColor(0.0f, 0.0f, 0.0f, 0.0f); // background color 
```

在 viewDidAppear 我正在这样做：

```
 UIImagePickerController *uip;
    uip = [[UIImagePickerController alloc] init];
    uip.sourceType = UIImagePickerControllerSourceTypeCamera;
    uip.showsCameraControls = NO;
    uip.toolbarHidden = YES;
    uip.navigationBarHidden = YES;
    uip.wantsFullScreenLayout = YES;
    uip.cameraViewTransform = CGAffineTransformScale(uip.cameraViewTransform, CAMERA_TRANSFORM, CAMERA_TRANSFORM);
   [viewOverlay addSubview:uip.view];
   [viewOverlay sendSubviewToBack:uip.view];
   [viewOverlay bringSubviewToFront:viewOverlay]; 
```

如果我单步执行该程序，我可以看到 OpenGL 对象被渲染一次。但是，当 UIImagePickerController 作为子视图添加时，它是屏幕上唯一的东西。如果我注释掉最后三行，则会渲染 OpenGL 对象，但当然相机是不可见的。

我希望将相机的视频图像呈现在我正在绘制的 OpenGL 对象的后面。创建增强现实效果。任何和所有的帮助将不胜感激！

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:24:13.987

你想让你的相机做什么 - 只是显示一个 AR 效果的相机视图，或者也实际使用/操作图像数据？如果您需要简单的 AR 显示器以外的任何东西，请使用 AVFoundation。

我之前遇到过很多麻烦并阅读了您的相同帖子，因此我提供了两种解决方案：

**1) 使用容器视图**

在您的故事板文件中，创建一个 UIViewController，其中包含一个用于相机的 UIView 和一个顶部的容器视图，其中一个 segue 连接到一个 GLKViewController。将您的主 UIViewController 链接到您的相机代码，并将您的 GLKViewController 链接到您的 OpenGL ES 代码。当 UIViewController 可见时，容器内的 UIView 和 GLKView 都会单独加载和运行。

**2) 应用委托黑客**

在应用程序委托中设置您的*UIImagePickerController ，特别是方法：*

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

然后，将子视图添加到您的窗口属性。这将始终确保您的相机在任何视图之前加载到您的窗口中，并确保它位于图层堆栈的底部。

# ruby - 何时使用`method_missing`

> ID：13759902
> 
> 赞同：8
> 
> 时间：2012-12-07T09:04:05.073
> 
> 标签：ruby, metaprogramming

在下面的代码中，method`roar`没有在 class 中定义`Lion`，但仍然可以使用 using 来调用`method_missing`。

```
class Lion
  def method_missing(name, *args)
    puts "Lion will #{name}: #{args[0]}"
  end
end

lion = Lion.new
lion.roar("ROAR!!!") # => Lion will roar: ROAR!!! 
```

在哪些情况下，我应该如何使用它`method_missing`？使用安全吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T09:11:27.017

只要您以预期的方式使用它并且不要被冲昏头脑，使用它是完全*安全的。*毕竟，不是你能做的每一件事都值得去做。

的好处`method_missing`是你可以以独特的方式应对各种事情。

缺点是你不宣传你的能力。其他期望你`respond_to?`做某事的对象不会得到确认，并且可能会以你不想要的方式对待你的自定义对象。

对于构建领域特定语言并在组件之间提供非常松散的粘合，这种事情是无价的。

一个很好的例子就是 Ruby [OpenStruct](http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html)类。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-07T09:07:54.057

**摘要：**什么时候使用？什么时候它会让你的生活更轻松**，**而不会使别人的生活复杂化。

* * *

这是一个让我想起的例子。它来自[redis_failover](https://github.com/ryanlecompte/redis_failover) gem。

```
# Dispatches redis operations to master/slaves.
def method_missing(method, *args, &block)
  if redis_operation?(method)
    dispatch(method, *args, &block)
  else
    super
  end
end 
```

这里我们检查调用的方法是否真的是redis连接的命令。如果是这样，我们将其委托给底层连接。如果没有，转发给super。

另一个著名的`method_missing`应用示例是 ActiveRecord 查找器。

```
User.find_by_email_and_age('me@example.com', 20) 
```

当然，没有方法`find_by_email_and_age`。相反，它`method_missing`会破坏名称，分析部分并`find`使用适当的参数进行调用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T09:11:51.323

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-07T15:47:38.000

首先，坚持 Sergio Tulentsev 的总结。

除此之外，我认为查看示例是了解正确和错误情况的最佳方式`method_missing`；所以这是另一个简单的例子：

我最近`method_missing`在[Null Object](http://en.wikipedia.org/wiki/Null_Object_pattern)中使用了。

*   Null 对象是 Order 模型的替代品。

*   订单存储不同货币的不同价格。

* * *

没有`method_missing`它看起来像这样：

```
class NullOrder
  def price_euro
    0.0
  end

  def price_usd
    0.0
  end

  # ...
  # repeat for all other currencies
end 
```

* * *

使用`method_missing`，我可以将其缩短为：

```
class NullOrder
  def method_missing(m, *args, &block)  
    m.to_s =~ /price_/ ? 0.0 : super
  end
end 
```

当`NullOrder`我将新`price_xxx`属性添加到`Order`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-07T09:32:50.807

我还发现了一篇来自 (Paolo Perrotta) 的博客文章，其中演示了何时使用 method_missing：

```
class InformationDesk
  def emergency
    # Call emergency...
    "emergency() called"
  end

  def flights
    # Provide flight information...
    "flights() called"
  end

  # ...even more methods
end 
```

检查是否在午餐时间询问了服务。

```
class DoNotDisturb
  def initialize
    @desk = InformationDesk.new
  end

  def method_missing(name, *args)
    unless name.to_s == "emergency"
      hour = Time.now.hour
      raise "Out for lunch" if hour >= 12 && hour < 14
    end

    @desk.send(name, *args)
  end
end

# At 12:30...
DoNotDisturb.new.emergency # => "emergency() called"
DoNotDisturb.new.flights # ~> -:37:in `method_missing': Out for lunch (RuntimeError) 
```

# python - Python：函数参数和返回值

> ID：13759903
> 
> 赞同：0
> 
> 时间：2012-12-07T09:04:08.350
> 
> 标签：python, function

说我有一个功能

```
def equals_to(x,y):
 a + b = c
def some_function(something):
 for i in something:
 ... 
```

有没有一种方法可以使用`c`计算出来`equals_to`的参数作为`some_function`这样的参数

```
equals_to(1,2)
some_function(c) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:07:22.373

您需要从函数`return`中获取值。`c`

```
def equals_to(x,y):
    c = x + y           # c = x + y not a + b = c
    return c            # return the value of c 

def some_function(something):
    for i in something:
    ... 
    return 

sum = equals_to(1,2)     # set sum to the return value from the function 
some_function(sum)       # pass sum to some_function 
```

的函数签名也`equals_to`接受参数`x,y`，但在您使用的函数中`a,b`并且您的分配是错误的方式，`c`采用`x + y`not `a + b`equals的值`c`。

强烈推荐：[http ://docs.python.org/2/tutorial/](http://docs.python.org/2/tutorial/)

# blackberry-playbook - 无法安装 blackberry webworks playbook sdk？

> ID：13759904
> 
> 赞同：0
> 
> 时间：2012-12-07T09:04:10.023
> 
> 标签：blackberry-playbook

我在安装时遇到错误，如何解决这个问题？求图，![在此处输入图像描述](../Images/56a2ac4a19005db28a763a46ed00a2c9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:12:55.590

已解决，我将 adobereadme 文件中的文本从 3.2 更改为 7.1.1

# ios - 如何通过我们的应用程序在 ios 中更改设置捆绑的通知键？

> ID：13759906
> 
> 赞同：0
> 
> 时间：2012-12-07T09:04:11.943
> 
> 标签：ios, push-notification

我有一个应用程序，我想通过我们的应用程序更改通知服务，它也应该反映在设置中。我知道我可以做到`[defaults setObject:@"" forKey:@""]`，但我不知道推送通知的对象和键是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:19:51.877

最后我得到了推送通知的密钥，即“enableNotification”。

# python - python / nautilus脚本组合的奇怪字符编码问题

> ID：13759907
> 
> 赞同：1
> 
> 时间：2012-12-07T09:04:16.370
> 
> 标签：python, unicode, encoding

我有一个 nautilus 脚本，可以将我喜欢的曲调复制到一个特殊的文件夹中，并同步到我的手机和汽车上。它在带有 á 等有趣字符的路径上失败。我正在使用以下内容逐步修复它：

```
temp = temp.replace('%20', ' ')
temp = temp.replace('%5B', '[')
temp = temp.replace('%5D', ']') 
```

但我已经厌倦了这些创可贴解决方案，而且我确信有更好的方法来做到这一点`str.encode`or `str.decode`。

有谁认识这种奇怪的编码以及我如何正确处理它？问题是，例如，我有一个文件夹，例如

`/media/music/kálmán balogh and the gipsy cimbalom band/aven shavale`

在我的磁盘上，但是当我使用它时`os.getenv('NAUTILUS_SCRIPT_CURRENT_URI')`，即 nautilus 中当前选择的文件夹，它在 python 中显示为

`/media/music/k%C3%A1lm%C3%A1n balogh and the gipsy cimbalom band/aven shavale`

然后其他操作（例如重命名或复制文件）不起作用，因为它在磁盘上找不到文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:27:36.213

您正在查看 url 编码。用于[`urllib.unquote()`](http://docs.python.org/2/library/urllib.html#urllib.unquote)将这些解释为 UTF-8 编码文本，然后解码为 un​​icode：

```
>>> import urllib
>>> urllib.unquote('/media/music/k%C3%A1lm%C3%A1n balogh and the gipsy cimbalom band/aven shavale').decode('utf8')
u'/media/music/k\xe1lm\xe1n balogh and the gipsy cimbalom band/aven shavale'
>>> print urllib.unquote('/media/music/k%C3%A1lm%C3%A1n balogh and the gipsy cimbalom band/aven shavale').decode('utf8')
/media/music/kálmán balogh and the gipsy cimbalom band/aven shavale 
```

在 Python 3 中，您需要使用[`urllib.parse.unquote()`](http://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote); 该功能已移动。

# python - 如何在python中将文本转换为语音

> ID：13759908
> 
> 赞同：2
> 
> 时间：2012-12-07T09:04:16.870
> 
> 标签：python, text-to-speech, speech

我现在想知道如何在 python 中将文本转换为语音。

在.NET中我使用

```
Dim SAPI

Msg = 'Hi this is a test'

SAPI = CreateObject("sapi.spvoice")
SAPI.Speak(Msg) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:06:48.693

您可以通过[pyttsx](http://pypi.python.org/pypi/pyttsx)模块来实现它。它使用默认的 MS 语音识别系统。

```
import pyttsx

engine = pyttsx.init()
engine.say("Your Message")
engine.runAndWait() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-16T14:14:43.080

我知道在这里回答真的很晚，但我想我会在这里发布，因为我有基于`TTS`转换的解决方案`SAPI`in `python`，这是 OP 的原始问题。

`SAPI`这对于使用in寻找解决方案的其他人可能很有用`python`。

```
from win32com.client import constants, Dispatch

Msg = "Hi this is a test"

speaker = Dispatch("SAPI.SpVoice")  #Create SAPI SpVoice Object
speaker.Speak(Msg)                  #Process TTS
del speaker                         #Delete speaker object and free up memory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-16T14:41:00.783

```
# pip install pywin32
# pip install pyttsx3

import pyttsx3

pyttsx3.speak('Hello Woeld') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-17T14:54:32.330

您可以使用[gTTS](https://pypi.org/project/playsound/)模块来完成。它将文本转换为语音。您必须使用的第二个模块是[playsound](https://pypi.org/project/playsound/)来播放转换后的文本。

```
 from gtts import gTTS #pip install gtts
    import playsound #pip install playsound
    import os

    my_aud = gTTS("hello how are you") #converts the text into speech
    my_aud.save('demo.mp3') #save the file with .mp3 extension
    playsound('demo.mp3') #to play it
    os.remove('demo.mp3') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-30T03:29:29.823

这是我自己创建的男声和女声功能。
只需定义一个文件名并保存即可。
现在您可以将其导入另一个文件并一次又一次地重复使用它。

```
pip install pyttsx3 
```

* * *

```
import pyttsx3
def femaleVoice(text):
    print("Program : "+text)
    engine = pyttsx3.init()
    voices = engine.getProperty('voices')
    engine.setProperty('voice', voices[-1].id)
    engine.say(text)
    engine.runAndWait()

def maleVoice(text):
    print("Program : "+text)
    pyttsx3.speak(text)

femaleVoice("There we go.")#Text
maleVoice("There we go.") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-21T12:32:52.943

```
import pyttsx3
speaker=pyttsx3.init()
speaker.say("Your message")
speaker.runAndWait() 
```

# java - 在 MongoDB 中插入完整列表

> ID：13759913
> 
> 赞同：2
> 
> 时间：2012-12-07T09:04:33.780
> 
> 标签：java, mongodb

我有`List`复杂对象，复杂对象包含两个以上的字段。像 -`{car1, car2, car3}`和汽车有名称和类型字段

有没有更简单的插入汽车列表的方法？就像是

```
DBObject updateObject = new BasicDBObject().append("$push", new BasicDBObject().append("cars", cars) 
```

我试过了`$pushAll`，它似乎不起作用。我做了更多的研究，发现它需要有关映射的信息，这就是插入失败的原因之一。

将此插入 MongoDB 的最佳方法是什么？一些示例代码或方向会有所帮助。请注意，这必须通过 Java 完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:25:35.167

好吧，如果您不想手动将汽车对象转换为 DBObjects，那么可以使用 Mapping Frameworks。像[吗啡](http://code.google.com/p/morphia/)。

就个人而言，我只是手动连接映射方法。代码可能看起来像这样（未经测试，可能会出现拼写错误）

```
BasicDBObject updateObject = new BasicDBObject();
BasicDBList dbCarList = mapCars(cars);
updateObject.append("$push", new BasicDBObject("cars", dbCarList));

...
private BasicDBList mapCars(List<Car> cars) {
  BasicDBList result = new BasicDBList();
  for (Car car: cars) {
    BasicDBObject dbCar = new BasicDBObject();
    dbCar.append("name", car.getName());
    result.add(dbCar);
  }

  return result;
} 
```

更新：正如 Sammaye 在评论中指出的那样，将 $push 替换为 $set 以替换列表。$push 会将不存在的元素附加到数组中，而不会删除之前的形式。

# regex - 从 HTML 中提取内容的 Jsoup、正则表达式和 XPath 的性能？

> ID：13759916
> 
> 赞同：3
> 
> 时间：2012-12-07T09:04:39.457
> 
> 标签：regex, performance, xpath, jmeter, jsoup

我知道在通常情况下[不应使用 regex 解析 HTML](https://stackoverflow.com/a/1732454/841064)。

但我想对 Web 应用程序进行性能测试。我很确定 HTML 的外观。所以我*可以*使用正则表达式从页面源中提取一些数据。

当我进行性能测试（使用 Jmeter）时，我想从主机上占用更少的资源。

哪个选项会占用更少的资源：XPath、正则表达式（Jakarta ORO）或 Jsoup？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:35:47.740

从 JMeter 2.8 开始，答案是 Regexp。但这当然取决于您使用的 Regexp 表达式。JMeter 中的正则表达式实现相当优化，是相关性的主要后处理方式。

关于 JSoup，例如需要基于 JSR223 后处理器的自定义编码。

JMeter 2.9 将引入一个新的基于 CSS/JQuery 选择器的提取器，具有 2 个可能的底层实现：

*   [JSOUP](http://jsoup.org/)

*   [乔德·拉加托](http://jodd.org/doc/lagarto/index.html)( [CSSelly](http://jodd.org/doc/csselly/index.html) )

看 ：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=54259](https://issues.apache.org/bugzilla/show_bug.cgi?id=54259)

在构建 DOM 文档时，它的性能将低于 Regexp，但它简化了不需要超优化测试计划的测试计划中的许多语法。

最后，关于 XPath，因为它构建了一个 DOM 树：

*   [http://www.developer.com/xml/article.php/3397691/Does-StAX-Belong-in-Your-XML-Toolbox.htm](http://www.developer.com/xml/article.php/3397691/Does-StAX-Belong-in-Your-XML-Toolbox.htm)

它的内存和 CPU 成本高于正则表达式，特别是如果您想提取许多元素，则创建了增强功能：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=53973](https://issues.apache.org/bugzilla/show_bug.cgi?id=53973)

# vb.net - Linq-to-Xml，获取具有特定属性的元素

> ID：13759921
> 
> 赞同：1
> 
> 时间：2012-12-07T09:05:07.400
> 
> 标签：vb.net, linq

我有这个 XML，

```
<MM>
    <Bank>
        <Result>
            <url>http://192.168.1.12/pay/api/abc</url>
            <param name="type">FUND</param>
            <param name="tid">175219</param>
            <param name="ticket">DiZfWMQxL5Qfasfsdfsdfsqweqwe</param>
            <param name="stage">1</param>
        <Result>
    <Bank>
</MM> 
```

我知道如何获取`url`元素的值。

```
Dim qryurl = From c In doc.Descendants("Result") _
             Select c.Element("url").Value 
```

如何`param`从 XML 中指定标签值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:10:35.133

我会考虑这样做：

```
Dim getParam As Func(Of XElement, String, String) =
    Function (e, t)
        Return e _
            .Elements("param") _
            .Where(Function (x) x.Attribute("name") = t) _
            .Select(Function (x) x.Value) _
            .FirstOrDefault()
    End Function

Dim Query = _
    From c In doc.Descendants("Result") _
    Select New With 
    { 
        .URL = c.Element("url").Value,
        .type = getParam(c, "type"),
        .tid = getParam(c, "tid"),
        .ticket = getParam(c, "ticket"),
        .stage = getParam(c, "stage")
    } 
```

您当然可以将`getParam`函数直接扩展到查询中，但这会使它变得很长。使用`Func`肯定会缩短它。

给定上述代码和您的示例 XML，我的结果是：

![查询结果](../Images/7bc3ecff78c13f36816b02804a7bd144.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:28:37.163

```
from x in c.Elements("param")
select new {
               type = x.Select(y => y.Attribute("name").Value == "type").Value,
               tid = x.Select(y => y.Attribute("name").Value == "tid").Value,
               ticket = x.Select(y => y.Attribute("name").Value == "ticket").Value,
               stage = x.Select(y => y.Attribute("name").Value == "stage").Value,

           } 
```

可能存在一些语法错误。但这是获取价值的逻辑。例如，您可以在[此处](http://www.codeproject.com/Articles/38534/LinQ-To-Xml-retrieve-element-value-by-its-attribut)查看有关此主题的信息。

# html - 如何捕获图像统计信息

> ID：13759924
> 
> 赞同：0
> 
> 时间：2012-12-07T09:05:23.970
> 
> 标签：html, apache, cpanel, awstats

我在我的服务器上本地托管图像，以便在 eBay 和其他网站上使用。我想跟踪这些图像的每小时和每日使用情况。我的服务器安装了 cPanel。

我尝试调整 AStats 来跟踪图像；但我试用的配置仅显示每月的使用情况。

有什么想法可以让我跟踪这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:35:20.497

如果其他站点允许，您可以使用加载图像的 PHP 文件。在文件本身中，您可以获取和存储您想要的任何统计信息。

如果不允许使用 PHP（或类似语言）（可能不允许），您可以使用 AWstats，因为它可以满足您的需求。替代方案是：

*   模拟
*   Webalizer
*   W3Perl
*   访客
*   皮维克
*   强迫症网站统计
*   ETC

您必须自己检查一下，他们支持您的需求。

# linux - 未定义对 dlopen 的引用 - arm 的 buildinf

> ID：13759929
> 
> 赞同：2
> 
> 时间：2012-12-07T09:05:37.583
> 
> 标签：linux, build, arm, undefined

我为 Windows 安装了 Sourcery，准备了 makefile，但出现了一些错误，例如：

```
undefined reference to dlopen 
```

添加“-ldl”解决了这个问题。我还想在 Ubuntu 上构建相同的应用程序 - 相同的 makefile 但不同的编译器 - 设置为“arm-linux-gnueabi-g++-4.6”。我得到了同样的错误。也许在 Ubuntu 上我使用的是 x86 而不是 arm lib。所以我删除了“-ldl”参数并添加了：

```
/usr/arm-linux-gnueabi/lib/libdl.a 
```

在来源之后 - 仍然是同样的问题。所以也许我还需要添加 .so 文件：

```
/usr/arm-linux-gnueabi/lib/libdl.so 
```

它没有帮助。有任何想法吗？也许我应该使用不同的库？

使文件看起来像：

```
CXX       = arm-linux-gnueabi-g++-4.6
SOURCES   = file.cpp
LIB       = ##
SOLIB     = ##

CFLAGS    = ##
LFLAGS    = -lrt
#-ldl #commented to add the paths manually

SOFLAGS   = ##

test:   $(SOURCES)
$(CXX) $(CFLAGS) $(SOURCES) $(LFLAGS) /usr/arm-linux-gnueabi/lib/libdl.a /usr/arm-linux-gnueabi/lib/libdl.so $(SOFLAGS) -o test 
```

# silverlight - 拍摄完整数据网格的图像

> ID：13759931
> 
> 赞同：0
> 
> 时间：2012-12-07T09:05:44.903
> 
> 标签：silverlight, datagrid, silverlight-4.0

我有：

```
<Grid>
 <Grid.RowDefinitions>
   <RowDefinition></RowDefinition>
 </Grid.RowDefinitions>

 <sdk:DataGrid Grid.Row="0" ...>
 ...
 </sdk:DataGrid>

</Grid> 
```

请注意，没有`Height="Auto"`行内定义，因此数据网格占据所有高度。我正在尝试制作**完整**数据网格的图片（包括需要滚动的不可见空间）。我试过了：

```
ImageExtensions.ToImage(myDataGrid); 
```

还

```
var writeableBitmap = new WriteableBitmap(pixelWidth, pixelHeight); 
```

其中 pixelHeight 是使用 SizeChanged 事件或 DesiredSize 属性获得的。

一切都是徒劳。高度始终是屏幕的高度。如果我在行定义中使用 auto="height" 那么它会起作用，但是当它太大时，datagrid 不会占用所有空间/或没有滚动条。

有人设法让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:48:36.163

一种解决方法：

```
GridLength h = grid.RowDefinitions[0].Height;

grid.RowDefinitions[0].Height = GridLength.Auto;
grid.UpdateLayout();

try
{
    var writeableBitmap = new WriteableBitmap((int)myDataGrid.ActualWidth, (int)myDataGrid.ActualHeight);
}
finally
{
    grid.RowDefinitions[0].Height = h;
    grid.UpdateLayout();
} 
```

# android - ActionBarSherlock：使用 actionbarSherlock 在左侧显示/移动微调器 [解决方案：使用 NavigationList]

> ID：13759932
> 
> 赞同：1
> 
> 时间：2012-12-07T09:05:45.993
> 
> 标签：android, android-actionbar, actionbarsherlock

我想在夏洛克操作栏中左侧的微调器，但由于标准行为，它出现在右侧。[见附图![]](../Images/40bbc667ae90de4eaa5f1bae1fdca30e.png)

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:07:21.223

好的，我已经通过使用导航列表而不是在 menu.xml 中手动添加微调器来做到这一点：

**1.列表中需要的项目必须在array.xml中定义为：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="dashboardItemList">
        <item>Dashboard</item>
        <item>Downloads</item>
        <item>Revenues</item>
        <item>Ads</item>
        <item>Rankings</item>
        <item>Reviews</item>
        <item>Events</item>
    </string-array>
</resources> 
```

**2.在createMenuOption上调用navigationList方法**

@覆盖

```
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.main_menu, menu);
    setNavigationList();
    return super.onCreateOptionsMenu(menu);
} 
```

**3\. 定义 NavigationMethod，从 array.xml 中获取字符串数组。并为 NavigationMode 设置内置布局 sherlock_spinner_dropdown_item。**

```
public void setNavigationList() {
              arrayItemsForDropdown = getResources().getStringArray(R.array.dashboardItemList);
              Context context = getSupportActionBar().getThemedContext();
              ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context,R.array.dashboardItemList,              R.layout.sherlock_spinner_item);
              list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
              getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
              getSupportActionBar().setListNavigationCallbacks(list, this);
} 
```

** 4\. 现在根据您在 onNavigationItemSelected 方法中的选择给出实现 **

```
@Override

public boolean onNavigationItemSelected(int itemPosition, long itemId) {

    if (arrayItemsForDropdown[itemPosition].equals("Dashboard")) {
        downloadIcon.setVisible(false);
        DashboardFragment dashboardFragment = new DashboardFragment();
        showFragment(R.id.fragmentContainer, dashboardFragment, "dashboard");
        overridePendingTransition(R.anim.right_in, R.anim.right_out);

    } else if (arrayItemsForDropdown[itemPosition].equals("Downloads")) {
        Log.d("Spinner", "downloadClicked");
        showProgressDialog();
        new Thread(new Runnable() {
            public void run() {
               checkDownloadsData();
            }
        }).start();

    }
              // skipping further else parts.....

    return true;
} 
```

:) 默认情况下，导航列表在 ActionBarSherlock 中向左对齐。检查快照。

![在此处输入图像描述](../Images/4a4a8a75a999d461dfef65bafb9f943a.png)

# sql - 如何用内置 TSQL 函数替换 IS NULL 和 !=？

> ID：13759933
> 
> 赞同：2
> 
> 时间：2012-12-07T09:05:49.050
> 
> 标签：sql, sql-server, tsql, isnull

TSQL 中是否有任何简单的函数可以替换下面的 tsql？

```
SELECT * FROM Users
WHERE (Username IS NULL OR Username != @username) 
```

我可以写下面的内容，但由于硬编码文本，这不是防弹的！

```
 SELECT * FROM Users
    WHERE ISNULL(Username, 'dummytext') != @username 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:19:42.883

在这种情况下，我认为使用 UDF 来管理这种情况并不值得。

`(Username IS NULL OR Username != @username)`长度为**43 个**字符

`dbo.IsNullorNotEqual(Username, @Username)=0`长度为**43 个**字符

* * *

当然，您可以使函数名称稍短一些，但不值得打破约定来缩短函数调用。

此外，在这种情况下不使用 UDF 会让您*确切地*看到发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:20:42.133

丹尼尔问了个好问题……

我的 3 美分：

1.  使用函数使得**无法使用索引**:(。
2.  但是`!=`，大多数数据库都支持运算符（基于[此答案](https://stackoverflow.com/a/723426/1483)，`<>`符合 ANSI。
3.  您可以使用`COALESCE()`而不是，`ISNULL()`但它仍然可以使用索引进行阻塞:(。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T09:23:47.090

我不确定您要达到什么目标，但这有帮助吗？

[SQL小提琴](http://sqlfiddle.com/#!6/236fd/11)

**架构设置**：

```
create table Users(Username varchar(99));
insert into Users(Username) values('Alice');
insert into Users(Username) values('Bob');
insert into Users(Username) values(null); 
```

**查询 1**：

```
DECLARE @username varchar(99)
SET @username = 'Alice'
SELECT * FROM Users 
EXCEPT
SELECT * FROM Users where Username = @username 
```

**结果**：

```
| USERNAME |
------------
|   (null) |
|      Bob | 
```

# php - 将 php session 重置为 0 提交 Rock，paper，scissors 的表单

> ID：13759937
> 
> 赞同：-1
> 
> 时间：2012-12-07T09:06:32.543
> 
> 标签：php, database, session, post, reset

我已经尝试了很多方法来使这个功能正常工作。我已经搜索了整个stackoverflow，看看是否有针对我遇到的特定问题的解决方案，但我无处可去。当用户点击重置按钮时，我想将会话变量重置为 0，这只是一个提交按钮。我尝试将其更改为 get，然后将 if 语句设置为从服务器中提取以查看请求是否为 GET。我对 POST 做了同样的事情，但没有运气。会话只是保留，根本不会破坏。就像它只是忽略了 if 语句，因为我尝试使用 echo 语句进行测试，但没有得到任何响应。关于可能导致问题的任何想法？我正在填充会话变量，然后将其设置为一个名为`$db_value`. 我这样做的原因是我可以将结果写入数据库，然后在用户继续播放时再次从数据库中提取。

```
<?php session_start();
    $host = "localhost";
    $user = "username here";
    $pass = "";
    mysql_connect($host, $user, $pass) or die(mysql_error());
    mysql_select_db("RPS") or die(mysql_error());
    mysql_query("SET SQL_SAFE_UPDATES=0;"); // allows updating of table
    mysql_query("Create table if not exists RPS (score int);");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Rock, Paper, scissors</title>
</head>
<body>

</body>
</html>

<?php
if (isset($_SESSION['Score'])) {
if ($_POST['user_choice']) {
    $user_choice = $_POST['user_choice'];

    $Choosefrom = array(Rock, Paper, Scissors);
    $Choice = rand(0, 2);
    $Computer = $Choosefrom[$Choice];

    //create a variable for the database to use
    $q = mysql_query("SELECT * FROM RPS;");
    $db_array = mysql_fetch_array($q);
    $db_value = $db_array[0];

    if ($user_choice == $Computer) {
        echo 'Result : Draw +0';
        $_SESSION['Score'] = (int) $_SESSION['Score'];
        $db_value = $_SESSION['Score'];
        mysql_query("UPDATE RPS SET score=$db_value;");
    } else if ($user_choice == 'Rock' && $Computer == 'Scissors') {
        echo 'Result : Win +1';
        $_SESSION['Score'] = (int) $_SESSION['Score'] + 1;
        $db_value = $_SESSION['Score'];
        mysql_query("UPDATE RPS SET score=$db_value;");
    } else if ($user_choice == 'Rock' && $Computer == 'Paper') {
        echo 'Result : Lose -1';
        $_SESSION['Score'] = (int) $_SESSION['Score'] - 1;
        $db_value = $_SESSION['Score'];
        mysql_query("UPDATE RPS SET score=$db_value;");
    } else if ($user_choice == 'Scissors' && $Computer == 'Rock') {
        echo 'Result : Lose -1';
        $_SESSION['Score'] = (int) $_SESSION['Score'] - 1;
        $db_value = $_SESSION['Score'];
        mysql_query("UPDATE RPS SET score=$db_value;");
    } else if ($user_choice == 'Scissors' && $Computer == 'Paper') {
        echo 'Result : Win +1';
        $_SESSION['Score'] = (int) $_SESSION['Score'] + 1;
        $db_value = $_SESSION['Score'];
        mysql_query("UPDATE RPS SET score=$db_value;");
    } else if ($user_choice == 'Paper' && $Computer == 'Rock') {
        echo 'Result : Win +1';
        $_SESSION['Score'] = (int) $_SESSION['Score'] + 1;
        $db_value = $_SESSION['Score'];
        mysql_query("UPDATE RPS SET score=$db_value;");
    } else if ($user_choice == 'Paper' && $Computer == 'Scissors') {
        echo 'Result : Lose -1';
        $_SESSION['Score'] = (int) $_SESSION['Score'] - 1;
        $db_value = $_SESSION['Score'];
        mysql_query("UPDATE RPS SET score=$db_value;");
    }

    echo ' You\'re score is currently: ' . $_SESSION['Score'];
    echo '<a href="rps.php">Play Again ?</a>';
    echo '<form method="POST" action="rps.php"><input type="hidden" name="hidden" /><input type="submit" value ="Reset" name="reset" /></form>';
    if ($_POST['reset']) {
        $_SESSION['Score'] = 0;
        $db_value = $_SESSION['Score'];
        unset($_SESSION['Score']);
        session_start();
        session_destroy();
        mysql_query("UPDATE RPS SET score=$db_value;");
        header('Location:rps.php');
    }
} else if (!$_POST['user_choice']) {
    echo 'Your Current Score is: ' . $_SESSION['Score'] . '<form action="rps.php" method="post" />
     <input type="image" src="images/Rock.png" alt="Rock" name="user_choice" value="Rock" title="Rock" height="115" /> <br /><br />
      <input type="image" src="images/Paper.png" alt="Paper" name="user_choice" value="Paper" title="Paper" height="115"/> <br /><br />
       <input type="image" src="images/Scissors.png" alt="Scissors" name="user_choice" value="Scissors" title="Scissors" height="115"/> <br /><br />
   </form> ';
     }
 } else if (!isset($_SESSION['Score'])) {
      $_SESSION['Score'] = 0;

   echo 'Your Current Score is: ' . $_SESSION['Score'] . '<form action="rps.php" method="post" />
  <input type="image" src="images/Rock.png" alt="Rock" name="user_choice" value="Rock" title="Rock" height="115" /> <br /><br />
  <input type="image" src="images/Paper.png" alt="Paper" name="user_choice" value="Paper" title="Paper" height="115"/> <br /><br />
   <input type="image" src="images/Scissors.png" alt="Scissors" name="user_choice" value="Scissors" title="Scissors" height="115"/> <br /><br />
      </form>';
            }
           ?>
             echo'<form method="POST" action="">
             <input type="hidden" name="hidden" />
             <input type="submit" value ="Reset" name="reset" />
            </form>';
             if (isset($_POST['reset']) && ($_POST['reset'] == "Reset")) {
             $_SESSION['Score'] = 0;
            $db_value = $_SESSION['Score'];
           unset($_SESSION['Score']);
            session_start();
          session_destroy();
          mysql_query("UPDATE RPS SET score=$db_value;");
           header('Location:rps.php');
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T10:35:40.773

您可以尝试使用 $_REQUEST['Reset'] 而不是 get 或 post 来覆盖您的基础。在代码的最顶部使用以下序列仅用于销毁会话...

```
$session_id = session_id();

if(empty($session_id)){
 session_start();
}

if(isset($_REQUEST['Reset'])){
 session_unset();
 session_destroy();
 $_SESSION = array();
 session_start();
 session_regenerate_id();
} 
```

渐渐地，你的表格是错误的。我怀疑你甚至从这里的值中获取数据。将其更改为：

```
echo ' You\'re score is currently: ' . $_SESSION['Score'];
echo '<form method="POST" action="rps.php"><input type="hidden" name="hidden" /><input type="submit" value ="Play Again" name="Reset" /></form>'; 
```

...

然后在页面顶部做我放的加一点你的...

```
$session_id = session_id();

if(empty($session_id)){
 session_start();
}

if(isset($_REQUEST['Reset'])){
 $_SESSION['Score'] = 0;
 $db_value = $_SESSION['Score'];
 session_unset();
 session_destroy();
 $_SESSION = array();
 session_start();
 session_regenerate_id();

 mysql_query("UPDATE RPS SET score = $db_value WHERE unique_field = $unique_field");
 header('Location:rps.php');
 exit;
} 
```

你在哪里使用这个：

```
if ($_POST['reset']) { 
```

如果您在没有条件的情况下编写它，那将始终返回 true。为价值。另外 PHP 是区分大小写的，所以如果你按照我写的方式进行操作，请使用 Reset。

你没有使用 XHTML 验证，你使用的是 HTML 4.01 Transitional 所以不要这样做：

```
<br /> 
```

做这个：

```
<br> 
```

你的图像上的 / 也是如此。

最后的想法，在进行更新时使用唯一值，因为您的语句将更改整个表中的每条记录。请参阅我的带有 WHERE 子句的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T17:07:13.887

抱歉，这是你重写的代码……（抱歉缩进，这个所见即所得的编辑器很差而且没用……）

> <?php
> //error_reporting(E_ALL);
> $session_id = session_id();
> 
> if(empty($session_id)){
> 
> session_start();
> }
> $DB_Server = "主机"; //你的 MySQL 服务器
> $DB_Username = "user"; //你的 MySQL 用户名
> $DB_Password = "pass"; //你的 MySQL 密码
> $DB_DBName = "db"; //你的 MySQL 数据库名称
> $db = mysql_connect($DB_Server, $DB_Username, $DB_Password);
> // 在选择基础上
> $host = $DB_Server;
> $user = $DB_Username;
> $pass = $DB_Password;
> $db = mysql_connect($host, $user, $pass) 或死(mysql_error());
> mysql_select_db($DB_DBName,$db) 或死(mysql_error());
> //mysql_query("SET SQL_SAFE_UPDATES=0;"); // 允许更新表
> 
> //mysql_query("如果不存在则创建表 RPS (score int);");
> /*
> 设置 FOREIGN_KEY_CHECKS=0;
> SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
> 
> 如果不存在 RPS（
> 得分 int（11）默认 NULL
> ）引擎 = MyISAM 默认字符集 = utf8，则创建表；
> 
> 插入 RPS（分数）值（0）；
> 设置 FOREIGN_KEY_CHECKS=1;*/
> 
> ?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 过渡//FR" " [http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">](http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd) ; <html xmlns=" [http://www.w3.org/1999/xhtml](http://www.w3.org/1999/xhtml) "> ;
> <head>
> <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15" />
> 
> <title>石头、纸、剪刀</title>
> <style type="text/ css">
> .rock {
> 
> 背景图片:url(pierre.png);
> 高度：159px；
> 
> 宽度：159px；
> }
> .paper {
> 
> 背景图片：url（feuille.png）；
> 高度：159px；
> 
> 宽度：159px；
> }
> 。
> 
> 剪刀{背景图像：url（ciseaux.png）；
> 高度：159px；
> 
> 宽度：159px；
> }
> </style>
> 
> </head>
> <body>
> <?php
> if (isset($_SESSION['Score'])) {
> if (isset($_GET['user_choice'])) {
> $user_choice = $_GET['用户选择'];
> 
> $Choosefrom = array('Rock', 'Paper', 'Scissors');
> 
> srand（（双）微时间（）* 1000000）；
> $Choice = rand(0, 2); $Computer = $Choosefrom[$Choice];
> 
> //为数据库创建一个变量以使用
> $q = mysql_query("SELECT score FROM RPS");
> $db_array = mysql_fetch_array($q); $db_value = $db_array[0];
> 
> if ($user_choice == $Computer) {
> echo 'Result : Draw 0';
> $_SESSION['Score'] = (int) $_SESSION['Score'];
> $db_value = $_SESSION['Score'];
> 
> mysql_query("UPDATE RPS SET score='".$db_value."'");
> } else if ($user_choice == 'Rock' && $Computer == 'Scissors') {
> 
> echo 'Result : Win +1';
> $_SESSION['Score'] = (int) $_SESSION['Score'] + 1;
> $db_value = $_SESSION['Score'];
> mysql_query("UPDATE RPS SET score='".$db_value."'");
> } else if ($user_choice == 'Rock' && $Computer == 'Paper') {
> 
> echo 'Result : Lose -1';
> $_SESSION['Score'] = (int) $_SESSION['Score'] - 1;
> $db_value = $_SESSION['Score'];
> mysql_query("UPDATE RPS SET score='".$db_value."'");
> } else if ($user_choice == 'Scissors' && $Computer == 'Rock') {
> 
> echo 'Result : Lose -1';
> $_SESSION['Score'] = (int) $_SESSION['Score'] - 1;
> $db_value = $_SESSION['Score'];
> mysql_query("UPDATE RPS SET score='".$db_value."'");
> } else if ($user_choice == 'Scissors' && $Computer == 'Paper') {
> 
> echo 'Result : Win +1';
> $_SESSION['Score'] = (int) $_SESSION['Score'] + 1;
> $db_value = $_SESSION['Score'];
> mysql_query("UPDATE RPS SET score='".$db_value."'");
> 
> $_SESSION['Score'] = (int) $_SESSION['Score'] + 1;
> $db_value = $_SESSION['Score'];
> mysql_query("UPDATE RPS SET score='".$db_value."'");
> } else if ($user_choice == 'Paper' && $Computer == 'Scissors') {
> 
> echo 'Result : Lose -1';
> $_SESSION['Score'] = (int) $_SESSION['Score'] - 1;
> $db_value = $_SESSION['Score'];
> mysql_query("UPDATE RPS SET score='".$db_value."'");
> }
> 
> echo ' 你当前的分数是：' 。$_SESSION['分数'];
> echo '<form method="GET" action="shifumi.php"> <input type="hidden" name="reset" value="Reset" />
> <input type="submit" value ="再玩一次" / >
> 
> </form>';
> if ($_GET['reset']) {
> 
> $_SESSION['Score'] = '0';
> $db_value = $_SESSION['Score']; mysql_query("UPDATE RPS SET score='".$db_value."'");
> 
> 未设置（$_SESSION['Score']）；
> //session_start();
> 
> session_destroy();
> if (!headers_sent()){
> 
> header('Location:shifumi.php');
> }else{
> echo '<脚本语言=\"JavaScript\">window.location=\'shifumi.php\';</script>'; }
> }
> } else if (!isset($_GET['user_choice'])) { echo '你的当前分数是：' . $_SESSION['分数'] 。'<form action="shifumi.php" method="GET" />
> 
> <input type="hidden" name="user_choice" value="Rock" />
> <input type="submit" class="rock" value= "" alt="Rock" />
> </form>
> <br /><br />
> 
> <form action="shifumi.php" method="GET" />
> <input type="hidden" name="user_choice" 值="Paper" />
> 
> <input type="submit" class="paper" value="" alt="Paper" />
> 
> </form>
> <
> 
> </form> ';
> }
> } else if (!isset($_SESSION['Score'])) {
> $_SESSION['Score'] = '0';
> 
> echo '您当前的分数是：' . $_SESSION['分数'] 。'<form action="shifumi.php" method="GET" />
> 
> <input type="hidden" name="user_choice" value="Rock" />
> <input type="submit" class="rock" value= "" alt="Rock" />
> </form>
> <br /><br />
> <form action="shifumi.php" method="GET" />
> 
> <input type="hidden" name="user_choice" 值="Paper" />
> <input type="submit" class="paper" value="" alt="Paper" />
> </form>
> <br /><br />
> <
> form action="shifumi.php" method="GET" /> <input type="hidden" name="user_choice" value="Scissors" />
> 
> <input type="submit" class="scissors" value="" alt="剪刀" /> <br /><br />
> </form>';
> }
> 
> echo'<form method="GET" action="shifumi.php">
> 
> <input type="hidden" name="reset" value="Reset" />
> <input type="submit" value="Reset" />
> 
> </form>';
> if (isset($_GET['reset']) && ($_GET['reset'] == "Reset")) {
> $_SESSION['Score'] = '0';
> $db_value = $_SESSION['Score'];
> 
> mysql_query("UPDATE RPS SET score='".$db_value."'");
> 
> 未设置（$_SESSION['Score']）；
> //session_start();
> 
> session_destroy();
> if (!headers_sent()){
> 
> header('Location:shifumi.php');
> }else{
> echo '<脚本语言=\"JavaScript\">window.location=\'shifumi.php\';</script>'; }
> 
> }
> 
> ?>
> 
> </body>
> </html>

# c++ - 无法使用 square() 函数 c++

> ID：13759941
> 
> 赞同：0
> 
> 时间：2012-12-07T09:06:45.117
> 
> 标签：c++, function, cmath

我是 C++ 新手，我正在使用 Bjarne Stroustrup 的[《Programming Principles and Practice Using C++》](http://www.stroustrup.com/Programming)一书（我将在未来的学校课程中使用这本书）。本书中的代码示例使用了[std_lib_facilities.h](http://www.stroustrup.com/Programming/std_lib_facilities.h)。在某些时候，这本书会调用 function `square()`，但是当我这样做时，会出现以下错误：

```
error C3861: 'square': identifier not found 
```

另一方面，我可以使用该`sqrt()`功能...我确实包含`std_lib_facilities.h`，而那个包含`cmath`，所以我认为这不是问题吗？

我应该怎么做才能使用该`square()`功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T09:09:32.607

该标头中没有`square`声明或定义函数（证明：`Ctrl`+ `f`）。

标准库中也没有。

从我从书中可以看出，它提到了这个函数作为一个你可以*自己*定义的函数的例子，并向你展示了如何做到这一点。预计它不会很容易获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:08:39.780

如何自己定义或简单地使用乘法运算符？

并且供您参考，C++ 没有在标准定义中定义平方函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:04:19.230

坚持同一本书中的相同示例。我删除了 square 并使用了`*`. 工作正常。例子;

```
cout<< i<<'  \ t'<< i* i<<" \n"; 
```

# html - 如何在 HTML 和 css 中使用垂直菜单？

> ID：13759942
> 
> 赞同：2
> 
> 时间：2012-12-07T09:06:45.040
> 
> 标签：html, css

如何使用垂直菜单，我已经尝试过垂直菜单栏。我没有使用 jquery 或 javascript，只使用 html 和 css。当 iam 将鼠标悬停在这个垂直菜单上时它不能正常工作。请帮助我。

这是代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Vertical menu</title>
<style type="text/css">
.headerouter1{clear:both;}
.headerinner1{ margin:0 auto; width:990px;}
.menustart{ background:url(images/menustart.png) no-repeat; width:16px; height:40px; float:left;}
.menumiddle{background:url(images/menumiddle.png) repeat-x; width:900px; height:40px; float:left; }
.menumiddle ul li{ float:left; font-family:Arial, Helvetica, sans-serif; padding:15px 20px 0px 20px;font-size:14px; background:url(images/menudivider.png) no-repeat;}
.menumiddle ul li a{text-decoration:none; font-family:Arial, Helvetica, sans-serif;padding:15px 20px 0 20px;color:#FFFFFF;}
.menumiddle ul li a:hover{ color:#000;}
.menuend{ background:url(images/menuend.png) no-repeat; width:15px; height:40px;float:left;}
.menumiddle ul{ margin:0px; }
.menumiddle ul li{ list-style:none; float:left; }
.menumiddle ul li a{ text-decoration:none;}
.menumiddle ul li a:hover{ }
.menumiddle ul li a.active{ }
.menumiddle ul li ul{display: none;}
.menumiddle ul li:hover ul{ margin-top:6px;position:absolute;width:195px;display:block;padding:15px 0px 0px 0px;background:#fff;  margin-left:-10px;border-bottom:2px solid #000;border-left:2px solid #000;border-right:2px solid #000;}
.menumiddle ul li:hover ul li a{float:left;clear:both;width:185px;font:bold 12px arial;color:#000;background:none; padding:0px 5px 4px 5px; border-bottom:1px solid #fafafa; border-radius:15px;margin-left:-20px; }
.menumiddle ul li:hover ul li a:hover{ color:#009cff;}
</style>
</head>

<body>
<div class="headerouter1">
<div class="headerinner1 ">

<div class="menustart"></div>
        <div class="menumiddle">
            <ul>
            <li><a href="#">Home</a>
            <ul style="list-style:none;">
            <li><a href-"#">sdsd</a></li>
            <li><a href-"#">sdsd</a></li>
                        <li><a href-"#">sdsd</a></li>
                        <li><a href-"#">sdsd</a></li>
                        <li><a href-"#">sdsd</a></li>
            </ul></li>
            <li><a href="#">Home</a>
            <ul style="list-style:none;">
            <li><a href-"#">sdsd</a></li>
                        <li><a href-"#">sdsd</a></li>
                        <li><a href-"#">sdsd</a></li>
                        <li><a href-"#">sdsd</a></li>
            </ul></li>
            </li>

<li><a href="#">Home</a></li>
<li><a href="#">Home</a></li>
<li><a href="#">Home</a></li>
</ul>
</div>
<div class="menuend"></div>

</div>
</div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:31:53.533

Raghu 您是否需要类似[http://jsfiddle.net/K6dvs/](http://jsfiddle.net/K6dvs/)的东西，其中垂直下拉菜单在悬停时会向下滑动。

```
.menumiddle > ul{height:40px; overflow:hidden;} 
```

并更改一些填充参见小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:47:35.313

你的 CSS 写得很糟糕。您应该只列出一个元素并在其中定义所有属性。同样，在创建 HTML 锚点时，使用 = 而不是 -。

```
<a href="#">sdsd</a> 
```

以下是您尝试在 HTML5 中实现的基础知识。

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>

        <style type="text/css">
            .menumiddle ul {list-style: none; padding: 0px; font-family:Arial, Helvetica, sans-serif;}
            .menumiddle li a {text-decoration: none;}
            .menumiddle li a:hover {text-decoration: underline;}
        </style>

        <meta charset="UTF-8">
    </head>
    <body>
        <div class="menumiddle">
            <ul>
                <li><a href="page1.html">Page 1</a></li>
                <li><a href="page2.html">Page 2</a></li>
                <li><a href="page3.html">Page 3</a></li>
            </ul>
        </div>
    </body>
</html> 
```

默认情况下，列表元素位于彼此下方（块），如果您希望将其更改为水平列表，请添加以下 CSS 语句。

```
.middlemenu li {display: inline;} 
```

在列表中定位元素时，您不需要随时使用 float: left。

# python - 将beeswithmachineguns与.pem一起使用时出现boto异常

> ID：13759947
> 
> 赞同：-1
> 
> 时间：2012-12-07T09:07:38.600
> 
> 标签：python, amazon-ec2, boto

所以我正在尝试使用带有机枪的蜜蜂来加载测试我自己的网站。

```
01:01:11 Peters-MacBook-Pro:.ssh peterconerly$ bees up -k amazonkeypair -s 1 -g public -l ec2-user
Connecting to the hive.
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/2.7/bin/bees", line 5, in <module>
    main.main()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/beeswithmachineguns/main.py", line 127, in main
    parse_options()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/beeswithmachineguns/main.py", line 111, in parse_options
    bees.up(options.servers, options.group, options.zone, options.instance, options.login, options.key)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/beeswithmachineguns/bees.py", line 93, in up
    ec2_connection = boto.connect_ec2()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/__init__.py", line 135, in connect_ec2
    return EC2Connection(aws_access_key_id, aws_secret_access_key, **kwargs)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/ec2/connection.py", line 87, in __init__
    https_connection_factory, path)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/connection.py", line 638, in __init__
    debug, https_connection_factory, path)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/connection.py", line 281, in __init__
    host, config, self.provider, self._required_auth_capability())
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/auth.py", line 308, in get_auth_handler
    'Check your credentials' % (len(names), str(names)))
boto.exception.NoAuthHandlerFound: No handler was ready to authenticate. 1 handlers were checked. ['QuerySignatureV2AuthHandler'] Check your credentials 
```

我根据[http://www.synctus.com/blog/2010/04/securing-access-to-amazon-ec2-with-fingerprint-verification](http://www.synctus.com/blog/2010/04/securing-access-to-amazon-ec2-with-fingerprint-verification)直接用 boto 进行了尝试 ：

```
>>> import boto.ec2
>>> conn = boto.ec2.connect_to_region('eu-west-1')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/ec2/__init__.py", line 53, in connect_to_region
    for region in regions(**kw_params):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/ec2/__init__.py", line 38, in regions
    c = EC2Connection(**kw_params)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/ec2/connection.py", line 87, in __init__
    https_connection_factory, path)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/connection.py", line 638, in __init__
    debug, https_connection_factory, path)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/connection.py", line 281, in __init__
    host, config, self.provider, self._required_auth_capability())
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto/auth.py", line 308, in get_auth_handler
    'Check your credentials' % (len(names), str(names)))
boto.exception.NoAuthHandlerFound: No handler was ready to authenticate. 1 handlers were checked. ['QuerySignatureV2AuthHandler'] Check your credentials
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:53:18.897

正如错误消息所示，boto 无法找到任何要使用的凭据。它看起来在以下地方：

*   您可以在调用 connect_to_region 时显式传递`aws_access_key_id`它们`aws_secret_access_key`
*   您可以设置环境变量`AWS_ACCESS_KEY_ID`和`AWS_SECRET_ACCESS_KEY`
*   您可以创建一个 boto 配置文件（有关详细信息，请参阅[此](http://code.google.com/p/boto/wiki/BotoConfig)文件）并将该文件放入其中`/etc/config`，或者`~/.boto`您可以将其放在您想要的任何位置并将环境变量设置`BOTO_CONFIG`为指向它。
*   如果您使用[IAM 角色](http://aws.typepad.com/aws/2012/06/iam-roles-for-ec2-instances-simplified-secure-access-to-aws-service-apis-from-ec2.html)，boto 将在 EC2 服务器上的实例元数据中找到凭证。

# c - asm() 的“长格式”是什么？

> ID：13759949
> 
> 赞同：0
> 
> 时间：2012-12-07T09:07:50.623
> 
> 标签：c, assembly

众所周知 asm() 是一种将汇编代码放入 c 代码的方法，但在某些资源中说“除非你使用 asm() 的‘长形式’，它正确地向编译器声明 C-你的汇编代码的语言效应，你会让自己面临巨大的风险，即不同的编译器版本、不同的编译标志，甚至对你的 C 代码的微小更改都可能产生灾难性的干扰效应。” 我想知道 asm() 的“长格式”是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T09:09:54.567

“长格式”最有可能是指[GNU Extended Asm](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Extended-Asm)，用户可以在其中指定约束、输入、输出寄存器以及 clobber 列表，以帮助优化编译器进行寄存器分配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T09:10:30.497

嵌入式汇编代码的所有使用均受编译器特定细节的约束。包括任何如此长的形式。这种事情没有标准。

# c - 像宏大括号或 do..while 的函数

> ID：13759953
> 
> 赞同：6
> 
> 时间：2012-12-07T09:08:01.263
> 
> 标签：c, macros

> **可能重复：**
> [C/C++ 宏中的 Do-While 和 if-else 语句](https://stackoverflow.com/questions/154136/do-while-and-if-else-statements-in-c-c-macros)

```
gcc (GCC) 4.7.2
c89 
```

你好，

我有以下类似函数的宏，只是想知道跨多行使用时的首选用法是什么。最好使用花括号或 do..while(0) 循环。

通常我对所有事情都使用 do..while(0) 。但我见过一些项目，他们只使用花括号，我不确定哪个更好。

做..虽然

```
#define DSO_ERROR(msg, res_handle_module, mem_pool, size)   do {        \
        char *dso_error = apr_palloc((apr_pool_t*)mem_pool, size);      \
        apr_dso_error((apr_dso_handle_t*)res_handle_module, (char*)dso_error, (apr_size_t)size); \
        LOG_ERR("%s dso error %s", (char*)msg, dso_error);              \
        goto dso_failure;                                               \
    } while(0); 
```

大括号

```
#define DSO_ERROR(msg, res_handle_module, mem_pool, size) {             \
        char *dso_error = apr_palloc((apr_pool_t*)mem_pool, size);      \
        apr_dso_error((apr_dso_handle_t*)res_handle_module, (char*)dso_error, (apr_size_t)size); \
        LOG_ERR("%s dso error %s", (char*)msg, dso_error);              \
        goto dso_failure;                                               \
    } 
```

唯一的区别是分号将被预设在 do..while 循环而不是花括号上。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T09:20:16.780

花括号版本将打破这样的用法：

```
if( foo )
  DSO_ERROR("Foo occured!", my_module, the_pool, 4711);
else
  printf("All is well, there is no foo\n"); 
```

这正是`do ... while(0)`构造的原因。所以这似乎值得避免。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T09:21:51.653

您将遇到此代码的问题：

```
if (one) 
  DSO_ERROR("one", ...);
else
  DSO_ERROR("two", ...); 
```

因此，如果您使用不带分号的 do-while-Macro，就可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T09:15:31.047

通常宏中*没有*分号`do { ... } while (0)`。

使用宏的原因`do { ... } while (0)`是，您可以在源代码中使用宏并添加分号，而不会出现额外的空语句。我猜这主要是出于历史原因，因为在许多情况下，有空语句（即只有分号没有任何语句）并没有做任何事情。

# javascript - 移动浏览器上的 JSONP

> ID：13759955
> 
> 赞同：1
> 
> 时间：2012-12-07T09:08:06.307
> 
> 标签：javascript, mobile, jsonp

有没有人在移动浏览器上使用过 JSONP 风格的编程？与桌面相比是否有任何限制。

我意识到从根本上说，JSONP 只不过是一个用回调函数填充的 JSON，以解决跨域问题。

我更感兴趣的是浏览器如何通过这种技术处理 DOM 元素的动态注入。它有效吗？

我们正在寻求构建一个基于小部件的框架，该框架需要在桌面和移动环境中运行。

编辑：我发现这 2 个链接表明它确实有效。仍然会对社区看到的详细经验或差距感兴趣

[JSONP 调用不适用于 apple-mobile-web-app-capable="yes"](https://stackoverflow.com/questions/7747264/jsonp-calls-not-working-with-apple-mobile-web-app-capable-yes)

[JSONP 未在 iPad 上触发](https://stackoverflow.com/questions/4532187/jsonp-not-firing-on-ipad)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:14:58.607

一般来说，JSONP 在桌面设备和移动设备上的效果都一样好。由于它仅依赖于浏览器能够从不同域的服务器加载脚本文件，因此浏览器供应商不支持它的入门级别非常低。例如，如果 JSONP 不起作用，从 CDN 加载的脚本也会失败。

现代浏览器同样支持从 JavaScript 插入 DOM 元素。

如果您担心不支持这些功能的特定浏览器/设备，我建议您使用有关这些功能的详细信息更新您的问题。

# android - 相机拍照后更新 EditText

> ID：13759957
> 
> 赞同：0
> 
> 时间：2012-12-07T09:08:10.993
> 
> 标签：android, android-camera

我有 2 个活动。活动 saveData 和活动 androidCamera

首先，我在 saveData 中有一个表单。当除了EditText“上传照片”之外已经输入了表格。然后，我单击按钮相机拍摄 uri/path 图像。当`finish()`相机活动将值 uri/path 发送回 SaveData 表单活动时。问题是如何在 SaveData 中更新 EditText“上传照片”，所以当我拍照时，相机会在 EditText“上传照片”中发送路径/uri？

这是我的活动 AndroidCamera

```
 package com.app.databasesample;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.OutputStream;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.graphics.PixelFormat;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore.Images.Media;
import android.view.LayoutInflater;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.Toast;

public class AndroidCamera extends Activity implements SurfaceHolder.Callback{

    Camera camera;
    SurfaceView surfaceView;
    SurfaceHolder surfaceHolder;
    boolean previewing = false;
    LayoutInflater controlInflater = null;

    final int RESULT_SAVEIMAGE = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_camera);
        //

        getWindow().setFormat(PixelFormat.UNKNOWN);
        surfaceView = (SurfaceView)findViewById(R.id.camerapreview);
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        controlInflater = LayoutInflater.from(getBaseContext());
        View viewControl = controlInflater.inflate(R.layout.control, null);
        LayoutParams layoutParamsControl 
            = new LayoutParams(LayoutParams.FILL_PARENT, 
            LayoutParams.FILL_PARENT);
        this.addContentView(viewControl, layoutParamsControl);

        Button buttonTakePicture = (Button)findViewById(R.id.takepicture);
        buttonTakePicture.setOnClickListener(new Button.OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                camera.takePicture(myShutterCallback, 
                myPictureCallback_RAW, myPictureCallback_JPG);
            }});
    }

    ShutterCallback myShutterCallback = new ShutterCallback(){

        @Override
        public void onShutter() {
            // TODO Auto-generated method stub

        }};

    PictureCallback myPictureCallback_RAW = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {
            // TODO Auto-generated method stub

        }};

    PictureCallback myPictureCallback_JPG = new PictureCallback(){

        @Override
        public void onPictureTaken(byte[] arg0, Camera arg1) {
            // TODO Auto-generated method stub
            /*Bitmap bitmapPicture 
                = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);  */

            Uri uriTarget = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues());

            OutputStream imageFileOS;
            try {
                imageFileOS = getContentResolver().openOutputStream(uriTarget);
                imageFileOS.write(arg0);
                imageFileOS.flush();
                imageFileOS.close();

                Toast.makeText(AndroidCamera.this, 
                        "Image Tersimpan: " + uriTarget.toString(), 
                        Toast.LENGTH_LONG).show();

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            String sFilename="image";

            Bundle bundle = new Bundle();
            bundle.putString("path", uriTarget.toString());

            Intent newIntent = new Intent(AndroidCamera.this, SaveData.class);
            newIntent.putExtras(bundle);
            startActivityForResult(newIntent, 0);
            //
            //setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        }};

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub
        if(previewing){
            camera.stopPreview();
            previewing = false;
        }

        if (camera != null){
            try {
                camera.setPreviewDisplay(surfaceHolder);
                camera.startPreview();
                previewing = true;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        camera = Camera.open();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        camera.stopPreview();
        camera.release();
        camera = null;
        previewing = false;

    }
} 
```

这是我的活动保存数据

```
package com.app.databasesample;

import java.io.File;
import java.util.Date;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class SaveData extends Activity implements OnClickListener {
    private DataManipulator dh;
    static final int DIALOG_ID = 0;
    private  static final boolean TEST_ONLY_NO_FOTO=false;
    private  static final boolean TAKE_FOTO_HIRES=false;
    private Uri outputFileUri;
    File outputFile;
    private String sDirectory="";
    //String sFilename="";
    public static final int SHOW_SUB_ACTIVITY_TAKE_PICTURE=5;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.save);
        View add = findViewById(R.id.Button01add);
        add.setOnClickListener(this);
        View home = findViewById(R.id.Button01home);
        home.setOnClickListener(this);
        View kamera = findViewById(R.id.kamera);
        kamera.setOnClickListener(this);

    }

    @Override 
    public void onActivityResult(int requestCode, int resultCode, Intent data) {     
      super.onActivityResult(requestCode, resultCode, data); 
      switch(requestCode) { 
        case (SHOW_SUB_ACTIVITY_TAKE_PICTURE) : { 
          if (resultCode == Activity.RESULT_OK) { 
          String newText = data.getStringExtra("image");
          // TODO Update your TextView.
          //EditText edt = (newText) findViewById(R.id.txtStatus);
            //edt.setText(uriTarget.toString());
          EditText edt = (EditText) findViewById(R.id.txtStatus);
          edt.setText(newText);

          } 
          break; 
        } 
      } 
    }

    public void onClick(View v){
        switch(v.getId()){
        case R.id.Button01home:
            Intent i = new Intent(this, DatabaseSample.class);
            startActivity(i);
            break;
        case R.id.Button01add:
            View editText1 = (EditText) findViewById(R.id.idHandheld);
            View editText2 = (EditText) findViewById(R.id.namaHama);
            View editText3 = (EditText) findViewById(R.id.jumlahHama);

            String myEditText1=((TextView) editText1).getText().toString();
            String myEditText2=((TextView) editText2).getText().toString();
            String myEditText3=((TextView) editText3).getText().toString();
            this.dh = new DataManipulator(this);
            this.dh.insert(myEditText1,myEditText2,myEditText3);
            showDialog(DIALOG_ID);
            break;
        case R.id.kamera:
            Intent i1 = new Intent(this, AndroidCamera.class);
            startActivityForResult(i1,SHOW_SUB_ACTIVITY_TAKE_PICTURE);
            break;
        }
    }

    private void SaveDatas(){
        Date dt=new Date();
        View editText4 = (EditText) findViewById(R.id.idHandheld);
        View editText5 = (EditText) findViewById(R.id.namaHama);
        View editText6 = (EditText) findViewById(R.id.jumlahHama);
        String myEditText4=((TextView) editText4).getText().toString();
        String myEditText5=((TextView) editText5).getText().toString();
        String myEditText6=((TextView) editText6).getText().toString();
        this.dh = new DataManipulator(this);
        this.dh.insert(myEditText4,myEditText5,myEditText6);
        showDialog(DIALOG_ID);
    }//SaveData

    protected final Dialog onCreateDialog(final int id) {
        Dialog dialog = null;
        switch(id){
        case DIALOG_ID:
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("input data hama sukses disave | Tambah Input ?").setCancelable(false).setPositiveButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id){
                    SaveData.this.finish();
                }
            }).setNegativeButton("Yes", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
            AlertDialog alert = builder.create();
            dialog = alert;
            break;

             default:
        }
        return dialog;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:22:34.160

这是您在 AndroidCamera 活动中所做的：

```
Bundle bundle = new Bundle();
bundle.putString("path", uriTarget.toString());

Intent newIntent = new Intent(AndroidCamera.this, SaveData.class);
newIntent.putExtras(bundle);
startActivityForResult(newIntent, 0); 
```

更改此行

```
startActivityForResult(newIntent, 0); 
```

至

```
startActivity(newIntent); 
```

现在，只需将此代码调用到您的 SaveData Activity ：

更新 ：

```
 String imagePath="";
    if(getIntent().getExtras() != null){
       imagePath = getIntent().getExtras().getString("path");
       your_editText.setText(imagePath);
    } 
```

希望这对您有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:23:26.640

`setContentView(R.layout.save);`在 SaveData Activity的方法中写下下面的行`onCreate()`，它将解决您的问题。

```
EditText edt = (EditText) findViewById(R.id.txtStatus); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:23:42.090

您应该调用方法“setResult”将结果提交给调用活动，然后在“onResume”中检查结果。但是给你一个一般的提示。在 Android 中，您可以利用 Intent 系统为用户谋取利益。一个例子是让用户选择他的相机应用程序来拍照，而不是为此编写自己的活动。这为您节省了大量时间，用户很高兴他可以使用适合他需求的特定相机应用程序，并且他花了几个小时寻找并为此付费。

# c - 为什么最右边的数字不是零（C/Linux）？

> ID：13759961
> 
> 赞同：3
> 
> 时间：2012-12-07T09:08:27.967
> 
> 标签：c, floating-point

如果您打印的浮点数比存储在内存中的精度更高，那么额外的地方不应该在其中包含零吗？我有这样的代码：

```
double z[2*N]="0";
...
for( n=1; n<=2*N; n++) {
  fprintf( u1, "%.25g", z[n-1]);
  fputc( n<2*N ? ',' : '\n', u1);
} 
```

正在创建这样的输出：

`0,0.7071067811865474617150085,....`

浮点数应该只有 17 位小数（对吗？53 位不是 17 位小数）。如果是这样，那么第 18 位、第 19 位……第 25 位应该是零。请注意，在上面的输出中，它们中的数字不是 0。

我是不是误会了什么？如果是这样，是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T09:29:38.270

不，53 位意味着 17 位小数是您可以*信任*的，但是因为我们使用的 base-10 表示法与存储双精度数的基数不同（二进制），所以后面的数字只是因为 1/2^ 53 不完全是 1/10^n，即

1/2^53 = .0000000000000001110223024625156540423631668090820312500000000

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T12:24:52.720

您的实现打印的字符串显示了示例中双精度的确切值，这是 C 标准允许的，如下所示。

首先，我们应该了解浮点对象代表什么。C 标准在这方面做得很差，但是，假设您的实现使用 IEEE 754 浮点标准，正常的浮点对象**恰好**表示(-1) ^s •2 ^e •(1+f) 用于某些符号位s（0 或 1）、指数 e（在特定类型的范围内，双精度为 -1022 到 1023）和小数 f（也在范围内，双精度小数点后的 52 位）。许多人使用对象来**近似**附近的值，但根据标准，对象仅**代表**它定义的一个值。

您显示的值 0.7071067811865474617150085 可以完全表示为双精度（符号位 0、指数 -1 和小数位 [十六进制] .6a09e667f3bcc [16]）。重要的是要了解具有此值的双精度值恰好代表该值；它不代表附近的值，例如 0.707106781186547461715。

现在我们知道传递给 的值`fprintf`，我们可以考虑 C 标准对此有何规定。首先，C 标准定义了一个名为 DECIMAL_DIG 的常量。C 2011 5.2.4.2.2 11 将其定义为小数位数，以便最广泛支持的类型中的任何浮点数都可以四舍五入到那么多十进制数字并再次返回而无需更改值。您传递给`fprintf`25 的精度可能大于系统上 DECIMAL_DIG 的值。

在 C 2011 7.21.6.1 13 中，标准规定“如果有效十进制数字的数量超过 DECIMAL_DIG 但源值可以用 DECIMAL_DIG 数字精确表示，那么结果应该是带有尾随零的精确表示。否则，源值由两个相邻的十进制字符串 L < U 限定，两者都具有 DECIMAL_DIG 有效数字；得到的十进制字符串 D 的值应满足 L ≤ D ≤ U，并额外规定误差应具有当前舍入方向的正确符号。”</p>

这种措辞允许编译器有一些回旋余地。目的是结果必须足够准确，以便可以无错误地转换回原始双精度。它可能更准确，并且某些 C 实现将产生完全正确的值，这是允许的，因为它满足上面的段落。

顺便说一句，您显示的值不是最接近 sqrt(2)/2 的两倍。该值为 +0x1.6A09E667F3BCDp-1 = 0.70710678118654757273731092936941422522068023681640625。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:31:56.877

有足够的精度来表示`0.7071067811865474617150085`双[精度浮点数](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)。64位输出其实是[3FE6A09E667F3BCC](http://babbage.cs.qc.cuny.edu/IEEE-754/)

用于计算数字的公式是取幂，因此您不能说`53`位将采用`17`小数位。

编辑：在 wiki 文章中查看下面的示例以获取另一个实例：

```
 0.333333333333333314829616256247390992939472198486328125
=2^(−54) × 15 5555 5555 5555 base16
=2^(−2) × (15 5555 5555 5555 base16 × 2^(−52) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T09:48:24.737

您要求浮动，但在您的代码中出现双倍。

无论如何，浮点数或双精度数都不总是相同的小数位数。根据 IEEE 754，浮点数为浮点表示分配了 32 位（4 个字节）。

来自[维基百科](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)：

> ![浮点表示](../Images/4a00199f4b5f33f34507ef08a580d1de.png)
> 
> IEEE 754 标准将 binary32 指定为：
> 
> *   符号位：1位
> *   指数宽度：8位
> *   有效精度：24（23 显式存储）
> 
> 这给出了 6 到 9 位有效小数位的精度（如果将具有最多 6 个有效小数位的十进制字符串转换为 IEEE 754 单精度，然后转换回相同的有效小数位数，则最终字符串应与原始字符串匹配；和如果将 IEEE 754 单精度转换为具有至少 9 位有效小数的十进制字符串，然后再转换回单精度，则最终数字必须与原始数字匹配）。

在双重的情况下，再次来自[维基百科](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)：

> ![双重代表](../Images/4462aeefc7a140e59290e2c778986527.png)
> 
> 双精度二进制浮点是 PC 上常用的格式，因为它比单精度浮点范围更广，尽管它的性能和带宽成本。与单精度浮点格式一样，与相同大小的整数格式相比，它在整数上缺乏精度。它通常被简单地称为双重。IEEE 754 标准将 binary64 指定为：
> 
> *   符号位：1位
> *   指数宽度：11 位
> *   有效位精度：53 位（显式存储 52 位）
> 
> 这给出了 15 - 17 位有效十进制数字的精度。如果将最多 15 位有效小数的十进制字符串转换为 IEEE 754 双精度，然后再转换回相同的有效小数位数，则最终字符串应与原始字符串匹配；如果 IEEE 754 双精度转换为具有至少 17 位有效小数的十进制字符串，然后再转换回双精度，则最终数字必须与原始数字匹配。

另一方面，你不能指望如果你有一个浮点数并以比实际存储的精度更高的精度打印出来，其余的数字将用 0 填充。编译器无法想象您尝试做的技巧。

# javascript - 如何使用 js/jquery 在图像路径中检索数字（ID）？

> ID：13759962
> 
> 赞同：0
> 
> 时间：2012-12-07T09:08:27.600
> 
> 标签：javascript, jquery

这是示例路径，假设格式是固定的

对于第 4 张图像，路径是 ' `demo/medium/Web081112_P004_medium.jpg`'

所以如果图像是第 100 个，那么

' `demo/medium/Web081112_P100_medium.jpg`'

有没有办法以这种格式获取数字，我考虑过使用reg exp？但这可能会导致问题，因为我可能会检索 004 而不是 4，如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T09:13:50.210

此答案基于原始问题中的消息

*样本路径，假设格式是固定的*

如果字符串不会改变，那么你可以使用 split：

```
var num = parseInt(path.split("_P")[1],10); 
```

**注意**记住 parseInt 需要基数 10 来删除前导 0，否则会使数字变为八进制

另请注意，拆分`_P`将（如 Cerbrus 所述）获得`004_medium.jpg`仍然适用于 parseInt 的字符串，因为 parseInt 将忽略尾随的非数字字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:11:07.010

是的，这~~绝对~~可能是正则表达式的工作。

```
/.*?\/.*?\/.*?_P(\d+).*?/.exec( imagesource )[ 1 ]; 
```

这样，您可以有一个“严格”的模式定义，如果输入字符串具有某种格式，您只解析该数字。你可以写得更草率，就像评论中建议的那样

```
/.*?_P(\d+)/.exec( imagesource )[ 1 ]; 
```

^(*免责声明*：我不是那个正则表达式天才，所以请评论任何优化：P)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:13:39.360

您不需要正则表达式，这将`int`在第一次和第二次出现`"_"`.

```
var path = 'demo/medium/Web081112_P100_medium.jpg'
var id = ~~path.split('_')[1].substr(1); 
```

删除`.substr(1)`以防万一`"P"`前缀被删除。

我正在使用`~~`一种快速而肮脏的方式将输出转换`string`为`int`（双位非），因为您的图像可能不会有负 id。

此外，[这似乎](http://jsperf.com/get-id-from-string)比`parseInt`Google Chrome 上另一个答案中建议的功能更快。
然而，不是在 IE / Firefox 上，[但它们已经失去了作为最常用浏览器的领先地位](http://en.wikipedia.org/wiki/Usage_share_of_web_browsers)。

# c# - 创建新的 Font 对象不考虑字体名称

> ID：13759963
> 
> 赞同：0
> 
> 时间：2012-12-07T09:08:29.037
> 
> 标签：c#, .net, visual-studio-2010, fonts, barcode

我有下一行代码：

```
Font font = new Font("Free 3 of 9", barcodeSize, FontStyle.Regular, graphicsUnit); 
```

新创建的字体对象如下所示：

![在此处输入图像描述](../Images/b89b91bc1bc404f59204b1d8f8e7e9ba.png)

“Free 3 of 9”字体安装在我的计算机上，当我使用此字体时，它不使用“Free 3 of 9”字体名称。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:57:56.483

好的，我认为这是因为字体被 IIS 缓存。

我在 MVC3 Web 应用程序中使用它，在我关闭并重新打开它的解决方案后它起作用了。

# vba - 如何对 VBA Excel 表单组合框进行异常处理？

> ID：13759970
> 
> 赞同：1
> 
> 时间：2012-12-07T09:08:45.757
> 
> 标签：vba, excel, exception-handling, combobox, userform

我有我正在为我的报告格式化任务开发的这个用户表单。我的整个代码已经完成，我只需要解决 2 个问题。

1.  让我的 VBA 应用程序在用户选择的每个 excel 文件上工作
2.  我的表单上组合框的异常处理。

（***编辑：我希望试图让对此问题感兴趣的人关注另一个 stackoverflow.com 主题不违反论坛规则***）

你们可以从这里到达第一个问题的主题：（已经有一个建议，但我有点困惑。所以对于替代建议来说，这将是超级的）[http://bit.ly/VnF3cK](http://bit.ly/VnF3cK)

关于我的第二个问题，当我单击组合框的空白位置时，我可以输入我想要的任何内容，但我想限制它，因此用户只能选择我放在组合框内的值 [1-5]。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:28:04.553

在回答您的第二个问题时，您需要将 ComboBox 的`Style`属性更改为`frmStyleDropDownList`

# prolog - 序言中的保护条款？

> ID：13759971
> 
> 赞同：8
> 
> 时间：2012-12-07T09:08:48.893
> 
> 标签：prolog, prolog-dif, guard-clause, prolog-coroutining

它们存在吗？它们是如何实施的？

SWI-Prolog的[协程](http://www.swi-prolog.org/pldoc/man?section=coroutining)谓词（`freeze`,`when`等`dif`）具有[警卫](http://en.wikipedia.org/wiki/Guarded_suspension)的功能。它们如何适应首选的 Prolog 编程风格？

我对逻辑编程非常陌生（使用 Prolog 和全部），并且对它不是纯粹的声明性这一事实感到有些困惑，即使在非常简单的情况下也需要程序考虑（请参阅[有关使用`\==`or`dif`](https://stackoverflow.com/questions/13757261/using-or-dif)的这个问题）。我错过了什么重要的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T20:39:26.507

首先是一个术语问题：在任何情况下，既不`freeze/2`也不`when/2`也不`dif/2`被称为警卫。Guards 出现在[CHR](http://en.wikipedia.org/wiki/Constraint_Handling_Rules)等扩展中，或[GHC](http://ja.wikipedia.org/wiki/Guarded_Horn_Clauses)（日文链接）或其他[并发逻辑编程语言](http://en.wikipedia.org/wiki/Logic_programming#Concurrent_logic_programming)等相关语言中；您甚至（在某些限制下）可能会考虑以下形式的条款

> `:-`护头`, !,`...

在这种情况下，包含警卫和剪切的子句将被称为提交。但没有一个适用于上述原语。Guards 的灵感来自 Dijkstra 1975 年的[Guarded Command Language](http://en.wikipedia.org/wiki/Guarded_Command_Language)。

`freeze(X, Goal)`（最初称为`geler`）与 相同，`when(nonvar(X), Goal)`并且它们在声明上都等同于`Goal`. 与守卫的功能没有直接关系。但是，当与 if-then-else 一起使用时，您可能会实现这样的保护。但那是完全不同的。

`freeze/2`一段时间以来，类似的结构被认为是改进 Prolog 执行机制的一般方法。然而，事实证明它们使用起来非常脆弱。通常，他们过于保守，从而不必要地延迟了目标。也就是说，几乎每个有趣的查询都会产生一个“挣扎”的答案，如下面的查询。此外，终止程序和非终止程序之间的界限现在要复杂得多。对于终止的纯单调 Prolog 程序，在程序中添加一些终止目标将保留整​​个程序的终止。但是，`freeze/2`情况不再如此。那么从概念上来说，`freeze/2`没有得到顶层系统的很好支持：只有少数系统以全面的方式（例如 SICStus）显示了延迟目标，这对于理解成功/答案和解决方案之间的区别至关重要。随着延迟的目标，Prolog 现在可能会产生一个没有解决方案的答案：

```
?- 冻结（X，X = 1），冻结（X，X = 2）。
冻结（X，X=1），
冻结（X，X=2）。

```

另一个困难`freeze/2`是终止条件更难确定。因此，虽然`freeze`应该解决终止的所有问题，但它经常会产生新的问题。

还有更多的技术困难与`freeze/2`特别是 wrt 表和其他防止循环的技术有关。`freeze(X, Y = 1)`清楚地考虑一个目标，`Y`现在`1`即使它还没有被绑定，它仍然在等待`X`首先被绑定。现在，一个实现可能会考虑为一个目标制定表`g(Y)`。`g(Y)`现在要么没有解决方案，要么只有一个解决方案`Y = 1`。这个结果现在将作为*唯一*的解决方案存储，`g/1` 因为`freeze`-goal 对目标不直接可见。

正是由于这些原因，`freeze/2`才被认为是约束逻辑编程的首选。

另一个问题是`dif/2`今天被认为是一个约束。与`freeze/2`其他协同程序原语相比，约束能够更好地管理一致性并保持更好的终止属性。这主要是因为约束引入了定义明确的语言，具体属性可以得到证明，并且已经开发了特定的算法并且不允许一般目标。然而，即使对他们来说，也有可能获得不是解决方案的答案。更多关于[CLP 中的答案和成功](https://stackoverflow.com/a/13533023/772868)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T09:23:29.613

freeze/2 和 when/2 就像逻辑编程的“goto”。它们不是纯的、可交换的等。

另一方面，dif/2 是完全纯的和声明性的、单调的、可交换的等。dif/2 是一个声明性谓词，如果它的参数不同，它就成立。至于“首选的 Prolog 编程风格”：说明什么是成立的。如果要表达两个通用术语不同的约束，则 dif/2 正是说明了这一点。

当您不在 Prolog 的纯声明性子集中编程时，通常最需要程序考虑，而是使用不可交换的不纯谓词等。在现代 Prolog 系统中，几乎没有理由离开纯声明性子集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-04T02:20:27.477

Evan Tick 有一篇论文解释了 CC：

> 非正式地，过程调用通过匹配头参数（被动统一）并满足保护目标来提交子句。当一个目标可以在一个程序中提交多个子句时，它会不确定地提交其中一个子句（其他候选者被丢弃）。如果目标的相应参数没有充分实例化，则出现在子句的头部和保护中的结构会导致执行暂停。当与挂起的调用关联的变量充分实例化时，可以稍后恢复挂起的调用。

并发逻辑编程语言的演变
Evan Tick - 1995
[https://core.ac.uk/download/pdf/82787481.pdf](https://core.ac.uk/download/pdf/82787481.pdf)

所以我猜想通过一些 when/2 的魔法，一个提交的选择代码可以被重写为普通的 Prolog。方法如下。对于同一谓词的一组提交选择规则：

```
H1 :- G1 | B1.
...
H2 :- Gn | Bn. 
```

这可以改写成下面的形式，其中 Hi' 和 Gi' 需要实现被动统一。例如，通过使用 ISO 更正 subsumes_term/2。

```
H1' :- G1', !, B1.
..
H1' :- Gn', !, Bn.
H :- term_variables(H, L), when_nonvar(L, H). 
```

上述翻译不适用于 CHR，因为 CHR 不会丢弃候选人。

# iphone - iPhone：如何访问另一个 .m 文件中的方法、变量和项目

> ID：13759974
> 
> 赞同：0
> 
> 时间：2012-12-07T09:08:50.280
> 
> 标签：iphone, viewcontroller

菜鸟问题：我的 ViewController.m 变得相当大。将一些（通用）代码“卸载”到另一个 dot-something 文件（我们称之为 myStuff.m）的方法是什么？

或者换个说法：

1.  我如何从另一个 .m 文件中调用方法，
2.  我如何访问变量和
3.  如何访问另一个 .m 文件的元素 (UIView)。

示例：在 myStuff.m 中，我想执行以下操作：

```
[ViewController ViewController_Method:@"bla"];
yLocal = ViewController.xRemote;
[ViewController.myText setText:@"bla-bla"]; 
```

我必须将什么代码添加到我的 ViewController.m 以及应该如何设置 myStuff.m 来做到这一点？什么是（最简单的）方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:19:13.223

**变量**

声明公共变量

```
@property(nonatomic,strong) VariabledatType *myVariablename; 
```

**方法**

声明公共方法

```
-(void)myPublicMethod:(NSString *)perameterString; 
```

**从另一个班级访问**

让我们考虑变量和方法是 Class1 的一部分

```
Class1Obj.myVariablename //Accessing variables;

Class1Obj.myVariablename = someValuel; //setting values to variables;   

[Class1Obj myPublicMethod:@"myString"]; //calling Methods; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:19:57.767

在我看来，您需要阅读有关 Objective-C、对象设计和模型视图控制器 (MVC) 的内容。

这是一些链接

[Objective-C 教程](http://mobile.tutsplus.com/tutorials/iphone/learn-objective-c-day-1/)

[MVC](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MVC.html)

[设计基础](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/Introduction/Introduction.html#//apple_ref/doc/uid/TP40002974)

还可以查看斯坦福大学关于 iOS 开发的讲座（Paul Hegarty）——它们非常出色。

# cuda - 从 CUDA 中的 threadId 获取 int

> ID：13759980
> 
> 赞同：1
> 
> 时间：2012-12-07T09:09:26.633
> 
> 标签：cuda, parallel-processing, gpu

我对 CUDA 很陌生。我需要在计算中使用线程 ID，但它不起作用。rem 始终为 0。我需要线程的索引来计算数组中的索引，因此我无法将它们转换为浮点数来进行计算。

内核如下：

```
_global__ void initializationCubes(float* dVer, float* dCub, int gridSize, float* test)
{   
    int index=blockIdx.x*blockDim.x+threadIdx.x;

    if(index<(gridSize*gridSize*gridSize))
    {

        // conversion index -> i,j,k

        int rem=index;
        int qot=(rem/gridSize);

        int i=rem-(qot*gridSize);

        rem=(rem)/(gridSize);
        qot=(rem/gridSize);

        int j=rem-(qot*gridSize);

        rem=(rem)/(gridSize);
        qot=(rem/gridSize);

        int k=rem-(qot*gridSize);

            for(int x=0;x<7;x++){

             // these first three are used to test
              dCub[index*56+0+x] =index;
              dCub[index*56+7+x] =rem;
              dCub[index*56+14+x]=k;
              dCub[index*56+21+x]=dVer[((i*(gridSize+1)+(j+1))*(gridSize+1)+k)*7+x];
              dCub[index*56+28+x]=dVer[(((i+1)*(gridSize+1)+(j))*(gridSize+1)+k)*7+x];
              dCub[index*56+35+x]=dVer[(((i+1)*(gridSize+1)+(j))*(gridSize+1)+k+1)*7+x];
              dCub[index*56+42+x]=dVer[(((i+1)*(gridSize+1)+(j+1))*(gridSize+1)+k+1)*7+x];
              dCub[index*56+49+x]=dVer[(((i+1)*(gridSize+1)+(j+1))*(gridSize+1)+k)*7+x];

             }

    }   

}

__global__ void initializationVertices(float* dVer, int gridSize){

   int currentVertex=0;

   for(int i=0; i<gridSize+1; i++)
   {
       for(int j=0; j<gridSize+1; j++)
       {
          for(int k=0; k<gridSize+1; k++)
          {

               dVer[currentVertex+0]=((i*2.0f)/(gridSize)-1.0f)*2.0f;
               dVer[currentVertex+1]=((j*2.0f)/(gridSize)-1.0f)*2.0f;
               dVer[currentVertex+2]=((k*2.0f)/(gridSize)-1.0f)*2.0f;

               currentVertex+=7;
          }
       }
 }

extern "C"
void initializationCUDA1( const int verticesAtEndsOfEdges[24], const int eTable[256], int gSize, int numberParticles ) {

 numParticles=numberParticles;

 gridSize=gSize;

 numVertices=(gridSize+1)*(gridSize+1)*(gridSize+1);
 numCubes=(gridSize)*(gridSize)*(gridSize);

 size_t pitchv=7;
 cudaMallocPitch((void**)&dVer, &pitchv, 7 * sizeof(float), (gridSize+1)*(gridSize+1)*(gridSize+1));

 size_t pitchc=7;
 cudaMallocPitch((void**)&dCub, &pitchc, 7 * sizeof(float), (gridSize)*(gridSize)*(gridSize)*8);

 cudaMalloc((void **)&verticesAtEnds, 24*sizeof(int));

 cudaMalloc((void **)&dedgeTable, 256*sizeof(int));

 cudaMalloc((void **)&dtriTable, 256*16*sizeof(int));

 cudaMalloc((void **)&ballPoint, 3*sizeof(float));

 cudaMalloc((void **)&dpositions, 3*numberParticles*sizeof(float));

 cudaMalloc((void **)&dedgeVertices, numCubes*6*12*sizeof(float));

 cudaMalloc((void **)&result, numCubes*18*sizeof(float));

 output=(float*)malloc(numCubes*18*sizeof(float));

 cudaMalloc((void **)&numFaces, 10*sizeof(int));

 cudaMalloc((void **)&test, sizeof(float));

 initializationVertices<<<1,1>>>(dVer, gridSize);

 initializationCubes<<<128,256>>>( dVer, dCub, gridSize, test);

 float* tmp =(float*)malloc(numCubes*56*(sizeof(float)));

 cudaMemcpy(tmp, dCub, numCubes*56*sizeof(float), cudaMemcpyDeviceToHost);
 for(int a=0;a<100;a++){
   printf("%f\n",tmp[a]);
 }
} 
```

**编辑**

gridSize 是 40 -> 线程的迭代从 0 到 64000

当我在函数之外打印值时，rem、i、j 和 k 都等于 0。

> size_t 间距v=7；cudaMallocPitch((void**)&dVer, &pitchv, 7 * sizeof(float), (gridSize+1) *(gridSize+1)* (gridSize+1));
> 
> size_t pitchc=7; cudaMallocPitch((void**)&dCub, &pitchc, 7 * sizeof(float), (gridSize) *(gridSize)* (gridSize)*8);
> 
> 初始化立方体<<<1,1>>>（dVer，dCub，gridSize，测试）；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:31:42.303

`gridSize`顾名思义，如果是网格的大小，则在执行代码后两者`rem`都`qot`将始终为零，因为它们除以一个大于它们自己的值。

如果您正在寻找 3D 网格中的索引，这正是为什么`threadIdx`并且`blockIdx`具有三个组件。根本不需要昂贵的除法，只需使用这个标准代码片段：

```
int i = blockIdx.x * blockDim.x + threadIdx.x;
int j = blockIdx.y * blockDim.y + threadIdx.y;
int k = blockIdx.z * blockDim.z + threadIdx.z;

if (i < myBlockSize.x && j < myBlockSize.y && k<myBlockSize.z) {
    // your kernel code...
} 
```

并使用块和网格大小的 y 和 z 分量的适当值启动内核，以及`myBlockSize`设置为所需网格大小的参数或全局变量（以防它不能被分解为整数块和网格尺寸）。

# android - 在android中将字符串（EditText输入）转换为Long

> ID：13759987
> 
> 赞同：1
> 
> 时间：2012-12-07T09:09:52.200
> 
> 标签：android, numbers

安卓 2.3.3

程序：计算器

我有一个`EditText`需要一个字符串（例如`100+1.20+45+...`：）

当我尝试使用 解析`1.20`为 long 时，`Long.parseLong(1.20)`出现以下错误。

```
12-07 14:28:32.902: E/AndroidRuntime(771): FATAL EXCEPTION: main
12-07 14:28:32.902: E/AndroidRuntime(771): java.lang.NumberFormatException: 1.20
12-07 14:28:32.902: E/AndroidRuntime(771):  at java.lang.Long.parse(Long.java:353)
12-07 14:28:32.902: E/AndroidRuntime(771):  at java.lang.Long.parseLong(Long.java:344)
12-07 14:28:32.902: E/AndroidRuntime(771):  at java.lang.Long.parseLong(Long.java:311) 
```

我也尝试`Long.valueOf()`过，但是当我在某处阅读时，`Long.valueOf()`返回一个`Long`对象，其中 as`Long.parseLong()`返回`long`值。所以，我希望我试图做的是正确的。

我阅读了有关此问题的所有可能问题，但无法解决。有人可以帮我吗。

代码以备不时之需...

```
long result=0;
String expression = editText1.getText().toString();
String[] strArrayExpression2 = expression.split("\\+");

for(int i=0; i<strArrayExpression2.length;i++)
{
  result += Long.parseLong(strArrayExpression2[i]);
} 
```

答案 ::: 根据要求使用 Float.parseFloat() 或 Double.parseDouble()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:16:01.343

尝试使用`double`而不是`long`：

```
String strInput = edittext.getText().toString();
double d = Double.parseDouble(strInput ); 
```

**// 编辑**

```
double result=0;
String expression = editText1.getText().toString();
String[] strArrayExpression2 = expression.split("\\+");

for(int i=0; i<strArrayExpression2.length;i++)
{
  result += Double.parseDouble(strArrayExpression2[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:22:43.973

用这个：

`String str = edtText.getEditableText.toString();`

`Float l = Float.parseFloat(str)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:13:21.893

我认为这可能是您的设备语言环境的问题。在一些国家“。” 和 ',' 的意思不同。例如，在德国，英文书写数字 1.20 将是​​ 1,20。相同的值，不同的符号。

# c++ - 使用 WinRT 的 WifiDiscovery

> ID：13759989
> 
> 赞同：1
> 
> 时间：2012-12-07T09:09:52.743
> 
> 标签：c++, windows-runtime, winrt-async

我需要为我的应用程序找到我的 IP 摄像机。早些时候在 Windows 7 上，我使用 Bonjour API 来查找 IP 摄像机。但是 windows 8 WinRT 似乎不支持 Bonjour。我们在 WinRT 中有什么可以做同样的事情吗？

# ajax - getJSON 错误：资源解释为脚本，但使用 MIME 类型 text/plain 传输

> ID：13759992
> 
> 赞同：1
> 
> 时间：2012-12-07T09:10:00.393
> 
> 标签：ajax, json, jsonp

我需要从这里获取一个 json 文件：

[https://raw.github.com/Yelp/yelp-api/master/category_lists/en/category.json](https://raw.github.com/Yelp/yelp-api/master/category_lists/en/category.json)

但是，我不断收到错误：

**资源解释为脚本，但使用 MIME 类型 text/plain 传输**

我正在尝试通过以下方式获取文件：

```
$.ajax({
    url : 'https://raw.github.com/Yelp/yelp-api/master/category_lists/en/category.json',
    dataType : 'jsonp',
    success: function (data) {
        alert("here");
    },
    error: function () { alert("Error reading category.json");}
}); 
```

有没有解决的办法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:23:01.120

这是因为`Response Headers`收到的内容的显示是

```
Content-Type: text/plain; charset=utf-8 
```

并且您的代码需要`JSON`来自 url 的响应。这就是您收到该错误的原因。

**解决方案：**

您可以做的一件事是您可以加载响应，`text/plain`然后将其转换为`json`对象

```
var obj = $.parseJSON(yourString); 
```

**更新代码：**

好吧，您可以通过从您自己的域加载远程响应来避免 Access-Control-Allow-Origin 错误，这将充当代理服务器，它将为您加载远程资源

```
$.ajax({
    url : url, // url on your domain, that will load the remote response for you
    dataType : 'html', // load the response as plain/html
    success: function (data) {
        var obj = $.parseJSON(data); // convert the received response to a JSON object
    }
});​ 
```

# jquery - 从另一个下拉列表的jquery onchange将值填充到下拉列表中

> ID：13759994
> 
> 赞同：0
> 
> 时间：2012-12-07T09:10:05.613
> 
> 标签：jquery

我的页面中有两个下拉列表。更改第一个下拉列表时，我需要将数组值填充到另一个下拉列表中。每次更改时，它都应该更改值。你能帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:13:55.157

尝试以下：

```
 $("#dropDown1").change(function(){
        var dp2Values = [1,2,3,4,5];
        $("option",$(this)).remove();
        $.each(dp2Values ,function(a,b){
             $("<option></option>").text(b).appendTo($("#dropDown2"));
        });
    }); 
```

如果您的数据将取决于选定的索引，请使用它来检索索引：

```
 $("#dropDown1").change(function(){
            var $index = $("option:selected",$(this));            
        }); 
```

# ant - ANT：用于提取属性正则表达式中斜线之间的内容的正则表达式

> ID：13759999
> 
> 赞同：0
> 
> 时间：2012-12-07T09:10:22.250
> 
> 标签：ant, ant-contrib

我有以下字符串作为调度程序文件的输入

```
Z:\cnt_development\cnt\test\Test-cases-blr\v80-WM\scheduler\FRQ\AUTO\sml-hr454\SRISM.xml
Z:\cnt_development\cnt\test\Test-cases-blr\v80-WM\scheduler\FRQ\AUTO\sml-lr454\Swap_MUL.xml
Z:\cnt_development\cnt\test\Test-cases-blr\v80-WM\scheduler\FRQ\AUTO\sml-lr456\Swap_MU.xml 
```

我需要从 v80-WM 中提取完整的部分

即正则表达式必须能够选择以下字符串

```
v80-WM\scheduler\FRQ\AUTO\sml-hr454\SRISM.xml
v80-WM\scheduler\FRQ\AUTO\sml-lr454\Swap_MUL.xml
v80-WM\scheduler\FRQ\AUTO\sml-lr456\Swap_MU.xml 
```

目前我正在使用以下正则表达式，其中正则表达式在上述字符串中找到最后一次出现的“Q”并在那里进行修剪并使用 workardoung 来构造上述结果。

```
<echo message="runpART ... Scheduler File ${schedulerFile}"/>
    <propertyregex property="cfg.arg" input="${schedulerFile}" regexp="([^Q]*).xml"        select="\1"   casesensitive="false"/> 
```

在从“v80-WM....xml”中提取字符串时需要帮助。

一些输入会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:52:46.347

那挺好的。v80-WM 给你一个固定的“起点”

使用它作为您的正则表达式应该可以做到这一点。^。*(v80-WM。* )

这是什么意思：

*   ^.* 匹配任何东西，直到你到达 *插入符号并不是真正需要的，但我喜欢让 reg exp 更严格）
*   v80-WM = .* 然后匹配其余部分

括号包括 v80-WM 名称和后面的所有内容，因此您不必重新构建它。