# StackOverflow 问答 16021000-16021999

# ruby-on-rails - SessionsController#create 中的 NoMethodError 使用 Omniauth Facebook 身份验证 railscast 360

> ID：16021001
> 
> 赞同：0
> 
> 时间：2013-04-15T17:16:49.010
> 
> 标签：ruby-on-rails, ruby, facebook, omniauth, nomethoderror

您好，我目前正在关注 railscast 360 向我的 web 应用程序添加 Facebook 身份验证。一切都很顺利，直到我开始收到此错误：

> “SessionsController 中的 NoMethodError#create
> 
> 未定义的方法 `name=' for #"
> 
> app/models/user.rb:6:in`block in from_omniauth' app/models/user.rb:3:in`点击'app/models/user.rb:3:in `from_omniauth' app/controllers/sessions_controller.rb:3:in`create'

我在这个网站上查看了一些不同的答案，但其中很多似乎是用于 Twitter 身份验证，我只是想让 Facebook 正常工作。

我在 Facebook Developers 上创建了一个应用程序，并完全按照铁路演员的教程进行操作。对于这方面的任何帮助，我将不胜感激。

到目前为止我的代码是

**用户.rb：**

 **```
class User < ActiveRecord::Base
def self.from_omniauth(auth)
  where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
    user.provider = auth.provider
    user.uid = auth.uid
    user.name = auth.info.name
    user.oauth_token = auth.credentials.token
    user.oauth_expires_at = Time.at(auth.credentials.expires_at)
    user.save!
  end
end
end 
```*  ***application_controller.rb**

 **```
class ApplicationController < ActionController::Base
  protect_from_forgery

  private

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  rescue ActiveRecord::RecordNotFound
 end
    helper_method :current_user
end 
```*  ***session_controller.rb**

 **```
class SessionsController < ApplicationController
  def create
    user = User.from_omniauth(env["omniauth.auth"])
    session[:user_id] = user.id
    redirect_to root_url
  end

  def destroy
    session[:user_id] = nil
    redirect_to root_url
  end
end 
```*  *这是我在 application.html.erb 中的代码：

 **```
 <div id="user_nav">
                <% if current_user %>
                  Signed in as <strong><%= current_user.name %></strong>!
                  <%= link_to "Sign out", signout_path, id: "sign_out" %>
                <% else %>
                <%= link_to "Sign in with Facebook", "/auth/facebook", id: "sign_in" %>
                <% end %> 
```*  *非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T19:31:29.180

离开你的调用堆栈跟踪（它是调用的相反顺序），它看起来像你的`session_controller`调用`user`模型，特别是用户块。

查看您的代码，没有发现任何错误，但堆栈跟踪正在标记*第 6 行*并提到它不理解该方法：`undefined method 'name='`。如果我不得不猜测，表中可能没有名称列 - 这可能无法解决您的问题，但请尝试以下操作：

`$ rake db:migrate`

和

`$ rails c`

然后在 rails 控制台中，尝试检查*User*对象的字段。

`> User.new`

希望您知道名称是否列在对象中。********

# c# - 如果包含俄语字母，为什么命令不执行？

> ID：16021004
> 
> 赞同：0
> 
> 时间：2013-04-15T17:17:00.800
> 
> 标签：c#

我试图断开/连接我的调制解调器适配器，命名为“конект”，但它不起作用，因为适配器的名称包含俄语字母。如何强制它工作？请帮忙。

> 连接（“конект”，“”，“”，真）；

```
 public static void Connect(string adapter, string login, string pass, bool discon)
    {
        string cmd = "";
        if (discon)
        {
            cmd = "rasdial " + '"' + adapter + '"' + @" /disconnect";
        }
        else
        {
            cmd = "rasdial " + '"' + adapter + '"' + " " + login + " " + pass;
        }
        Cmd(cmd);
    }
    public static void Cmd(string URL)
    {
        ProcessStartInfo startInfo = new ProcessStartInfo("CMD.exe");
        Process p = new Process();
        startInfo.RedirectStandardInput = true;
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardOutput = true;
        startInfo.RedirectStandardError = true;
        startInfo.CreateNoWindow = true;
        p = Process.Start(startInfo);
        p.StandardInput.WriteLine(URL);
        p.StandardInput.WriteLine(@"EXIT");
        p.WaitForExit();
        p.Close();
    } 
```

[我知道只需要用英文字母和代码重命名适配器就可以了，但我想知道如何强制它使用俄文字母]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:43:24.883

```
 p.StandardInput.WriteLine(URL); 
```

ProcessStartInfo 缺少 StandardInputEncoding 属性。如果此代码在没有西里尔代码页作为默认系统代码页的机器上运行，那么包含西里尔字符的“URL”字符串很可能会被破坏。

你真的想避免在这里使用输入重定向，它只是没有必要。使用 cmd.exe 的 /c 命令选项，以便您可以直接传递命令行：

```
startInfo.Arguments = "/c " + URL;
p = Process.Start(startInfo); 
```

Fwiw，也不需要使用cmd.exe，直接运行rasdial.exe即可。

# c# - 如果它= 0 c#则跳过for循环中的值

> ID：16021005
> 
> 赞同：2
> 
> 时间：2013-04-15T17:17:10.553
> 
> 标签：c#, .net, arrays

如果在我的计算器程序中它 = 0，如何跳过将值写入文件

将数组写入文件的过程

```
 public void SaveArrayToFile()

        {
            int count;
            var writer = new System.IO.StreamWriter("C:/calc/calculations.txt",false);
            for (count = 0; count <= Results.Length -1 ; count++)
            {
                if (Results[count] == 0)
                {
                    // problem
                }
                writer.Write(Results[count]);
                writer.WriteLine();
            }
            writer.Dispose(); 
```

任何帮助都会受到重视

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T17:18:45.170

任何一个

```
if (Results[count] == 0)
{
    continue;
}
writer.WriteLine(Results[count]); 
```

甚至更简单

```
if (Results[count] != 0)
{
    writer.WriteLine(Results[count]);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T17:18:58.527

这正是该[`continue`](http://msdn.microsoft.com/en-us/library/923ahwt1%28v=vs.110%29.aspx)声明的目的。

```
if (Results[count] == 0)
{
    continue;
} 
```

你也可以使用 Linq 解决这个问题：

```
foreach (var result in Results.Where(r => r != 0))
{
    writer.Write(result);
    writer.WriteLine();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-15T17:20:11.427

```
if (Results[count] != 0)
{
  writer.Write(Results[count]);
  writer.WriteLine();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-15T17:18:56.857

使用`continue`

```
//your code

if (Results[count] == 0)
{
    continue;
}

//your code 
```

**更多（[跳转语句](http://msdn.microsoft.com/en-us/library/d96yfwee%28v=vs.80%29.aspx)）：**

*   要终止循环，请使用`break`关键字。
*   要逃避当前迭代，请使用`continue`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-15T17:20:14.457

简单地：

```
if (Results[count] != 0)
{
       // Write it.
} 
```

# javascript - JavaScript 作用域和提升：代码按预期返回 1 而不是 10

> ID：16021007
> 
> 赞同：1
> 
> 时间：2013-04-15T17:17:12.413
> 
> 标签：javascript

我是 JavaScript 的新手，我真的不太明白为什么下面的代码返回`1`而不是`10`：

```
var a = 1;
function b() {
    a = 10;
    return;
    function a() {}
}
b();
alert(a); 
```

运行代码：http: [//jsfiddle.net/smMtU/](http://jsfiddle.net/smMtU/)

如果我 rem line `function a() {}`，它会`10`按预期返回。这段代码来自[这篇文章](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)，用于解释JavaScript 中的*作用域和提升概念。*也许我在阅读这篇文章时遗漏了一些东西？

请任何人都可以指出此代码背后的概念吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T17:19:06.257

由于吊装，您的代码相当于

```
var a = 1;
function b() {
    var a = function() {};
    a = 10;
}
b();
alert(a); 
```

在内部`b`，您不是在更改外部`a`，而是在更改内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:50:03.200

`a`此声明在执行之前为当前作用域中的函数创建一个作用域。

当`function b`调用并执行下面的这一行时

```
a = 10; 
```

`a`函数内部已经创建了一个范围`b`

所以这变得等价：

```
var a = 1;
function b() {
    a = 10;
    return;
    function a() {}
}
b();
alert(a); 
```

对此：

```
var a = 1;
function b() {
    var a = function(){}; //scope created before

    a = 10; //'a' already exists in local scope, just replace it.
    return;
}
b();
alert(a); // global 'a' remains intact 
```

# javascript - 使用 javascript 检索所有段落

> ID：16021008
> 
> 赞同：1
> 
> 时间：2013-04-15T17:17:12.527
> 
> 标签：javascript

我只是 Javascript 的初学者 :)

我希望能够接收文本块中的所有段落（意味着所有部分用`<br/ >`标签相互分隔），因此我可以根据语言（ltr 与 rtl）对每个这样的段落应用不同的对齐设置。

例如，如果我有以下文本：

```
Hello<br/>שלום 
```

我希望“Hello”与左侧对齐，而“שלום”与右侧对齐。有没有可能以`document.evaluate`某种方式使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:23:11.593

假设你有一个 DOM 子树，你可以深度优先地遍历它，寻找文本节点和 BR 元素。

```
var subtree = document.createElement('DIV');
subtree.innerHTML = 'Hello<br/>שלום';

var paragraphs = [""];
function walkSplittingOnBR(node) {
  switch (node.nodeType) {
    case 1:
      if (node.nodeName === 'BR') { paragraphs.push(''); }
      break;
    case 3:
      paragraphs[paragraphs.length - 1] += node.nodeValue;
  }
  for (var child = node.firstChild; child; child = child.nextSibling) {
    walkSplittingOnBR(child);
  }
}
walkSplittingOnBR(subtree); 
```

离开。`["Hello","שלום"]`_`paragraphs`

* * *

> 我希望“Hello”与左侧对齐，而“שלום”与右侧对齐。

你有三个选择。

1.  [HTML dir 属性](http://www.w3.org/TR/html-markup/global-attributes.html#common.attrs.dir)，如`<span dir="rtl">שלום</div>`闪米特语系中的大多数从右到左的脚本。
2.  [CSS方向](https://developer.mozilla.org/en-US/docs/CSS/direction)如`<span style="direction:rtl">שלום</span>`
3.  [Unicode 双向嵌入代码点](http://www.unicode.org/reports/tr9/#Explicit_Directional_Embedding)U+202A-U+202C。

Closure[`detectRtlDirectionality`](http://closure-library.googlecode.com/svn/docs/closure_goog_i18n_bidi.js.html)启发式地检测 RTL 文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:21:42.590

使用[`document.getElementsByTagName("p")`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName). 为此，您当然必须将段落包装在`<p>`标签中，而不是仅仅用`<br/>`. 但是`<br/>`无论如何，标签是创建段落的错误方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:49:38.483

您可以在or标记中查找和包装`Text`节点，并给它们一些样式（,等）：`span``p``direction``textAlign`

```
var root = document.getElementById("root"),
    i,
    node,
    wrapper,
    remove = [];

for (i = 0; i < root.childNodes.length; i++) {
    node = root.childNodes[i];
    if (node.nodeType === 3) { // text node
        wrapper = document.createElement('p');
        wrapper.innerHTML = node.nodeValue.trim(); // you may want NOT to trim text node values.

        // for example:
        wrapper.style.direction = 'rtl';
        wrapper.style.textAlign = 'right';

        root.replaceChild(wrapper, node);
    } else if (node.nodeType === 1) {
        remove.push(node);
    }
}

while (remove.length > 0) {
    root.removeChild(remove.pop());
} 
```

[JS Bin](http://jsbin.com/idazij/3/)演示。

# python - 如何导入位于当前工作目录中的 Python 库？

> ID：16021013
> 
> 赞同：17
> 
> 时间：2013-04-15T17:17:43.837
> 
> 标签：python, python-3.x

我正在编写一个安装程序，它将从现有的 Python 文件中提取一个脚本，然后在主 Python 程序中使用它。我需要知道如何`import <file>`从当前工作目录，而不是标准库或主要代码所在的目录。我该怎么做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-15T17:20:22.037

这有效：

```
import os
import sys
sys.path.append(os.getcwd())
import foo 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-15T17:20:32.497

```
import sys
sys.path.append('path/to/your/file')
import your.lib 
```

这将从新附加的目录中导入文件的内容。以这种方式将新目录附加到 Python 路径只会在脚本运行时持续，它不是永久性的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-15T17:22:00.117

您应该能够立即从当前工作目录导入模块。如果没有，您可以将当前工作目录添加到`sys.path`：

```
import sys
sys.path.insert(0, 'path_to_your_module') # or: sys.path.insert(0, os.getcwd())
import your_module 
```

您还可以将目录添加到 PYTHONPATH 环境变量。

# database - 如何在 Access 中跟踪交易状态的变化？

> ID：16021023
> 
> 赞同：1
> 
> 时间：2013-04-15T17:18:31.553
> 
> 标签：database, ms-access

我正在构建一个 Access 数据库，该数据库从网站的 Excel 转储中获取交易数据。这些交易都有一个唯一的标识符，但状态会随着交易的处理而改变。

以前，如果我们需要分析状态变化，我们会保留每周的 Excel 转储并进行挖掘。我们的“主”数据表是从最新转储运行的 40,000 行 Excel 文件，这意味着我们丢失了旧的状态数据。我无法访问存储所有这些信息的后端数据库（如果有的话？），只有 Excel 生成的报告。

现在我正在将我们的数据迁移到 Access 中，有哪些选项可以捕获特定事务可能经历的不同阶段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:42:04.400

一种相当直接的方法是创建一个与主表（在 Access 中`Copy > Structure Only`）具有相同结构的 [ArchiveTable] 表，然后将 [ArchivedOn] 日期/时间列添加到 [ArchiveTable]。

当你得到一个新的 Excel 表时，你可以将它导入 Access（例如，通过`DoCmd.TransferSpreadsheet`VBA），然后执行以下操作：

```
INSERT INTO ArchveTable (fieldname, fieldname, ..., ArchivedOn)
SELECT fieldname, fieldname, ..., Now() AS ArchivedOn FROM MainTable
WHERE MainTable.TransactionID IN (SELECT TransactionID FROM ImportTable) 
```

...然后对 [ArchiveTable] 中的数据进行一些“健全性检查”，以确保在继续之前复制所有内容...

```
DELETE FROM MainTable
WHERE MainTable.TransactionID IN (SELECT TransactionID FROM ImportTable)

INSERT INTO MainTable (fieldname, fieldname, ...)
SELECT fieldname, fieldname, ... FROM ImportTable 
```

# mysql - 仅从 MySQL 返回子字符串

> ID：16021025
> 
> 赞同：0
> 
> 时间：2013-04-15T17:18:35.903
> 
> 标签：mysql, substring

我需要找出一种仅从大型多段记录中返回图像 URL 的方法。我有一个 id (int) 和一个 body (text) 列。所以我的结果需要看起来像这样：

```
id | body
---------------------
#  | http://... .jpg 
```

返回 " 和 src= 很好，如果需要的话。每页有多个图像，我需要所有图像，最好在单独的行上。

我似乎无法理解这一点，因为我能找到的每一个 SELECT 组合都会让我回到**整个**记录。我不需要 2,000 字的内容——我只需要 URL。

任何想法，哦，比我更聪明的人的伟大社区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:30:40.230

```
With CTE as
(Select UPPER('HELLO THIS IS A TEST OF THE EMERGENCY 
 HTTP://someurl.domain.gov/wizziwig.jpg and more next and still more text.') 
 as txt
FROM DUAL)
select instr(txt,'HTTP:'), instr(txt,'.JPG'), 
      substr(txt,instr(txt,'HTTP:'),instr(txt,'.JPG')
      -instr(txt,'HTTP:')+4) from CTE 
```

然而，假设只有一个 HTTP:/ 并且只有一个 .JPG

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:23:57.420

我的第一个建议是，如果您需要像这样检索整体数据的一部分，那么您应该修改您的数据库模式以以这种方式存储信息。也许可以编写一个脚本来遍历数据库并填充一个仅包含链接的新字段。

除此之外，您可以调查 MySQL 的字符串函数 ( [http://dev.mysql.com/doc/refman/5.5/en/string-functions.html](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html) ) 以提出可能适合您的解决方案。我可能会建议查看 SUBSTRING_INDEX（基于`src="`）。但现实情况是，MySQL 的功能对于执行您建议的操作非常有限，特别是如果您需要提取任何给定内容块中的多个 URL。如果您需要在您的应用程序中定期执行此操作，那么最好将此信息拆分到一个单独的字段中。

# xcode - 随机显示精灵图像

> ID：16021026
> 
> 赞同：0
> 
> 时间：2013-04-15T17:18:41.520
> 
> 标签：xcode, cocos2d-iphone

您好，目前我的游戏正在从 fl_food.plist 加载 fl_gfood.png 或 fl_bfood.png。这很好用，但现在我有 17 个坏食品 .png 和 17 个好食品 .png。我的问题是如何随机显示每组 17 个项目中的一个？我可以为精灵 png 文件名做一个通配符吗？请参阅下面的代码注释。还提出了一个建议，我可以将 .plist 文件名加载到数组中并随机选择一个名称，这将如何完成。

```
@implementation Food

+ (void)loadAssets {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        [[FLSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:[AssetHelper getDeviceSpecificFileNameFor:@"fl_food.plist"]];
    });

}

- (id)init {
    self = [super init];
    if (self) {
        self.size                   = CGSizeMake(16 * __HIGHRES_SCALE, 16 * __HIGHRES_SCALE);
        self.offset                 = CGPointMake(8 * __HIGHRES_SCALE, 8 * __HIGHRES_SCALE);
        self.removeAfterCollision   = YES;
        self.collideable            = NO;
        self.score                  = 10;
    }
    return self;
}

- (FLSprite *)sprite {
    if(_sprite == nil) {

        if(self.score < 10) {
            _sprite = [FLSprite spriteWithSpriteFrameName:@"fl_gfood.png"]; // fl_gfood_*.png ... Can I do something like this?
        } else {
            _sprite = [FLSprite spriteWithSpriteFrameName:@"fl_bfood.png"];
        }
    }
    return _sprite;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:04:05.260

我会使用 arc4random() 和 stringByAppendingString

```
- (FLSprite *)sprite {
    if(_sprite == nil) {
        NSString *disFood;

        disFood = (self.score < 10) ? @"fl_gfood" : @"fl_bfood";

        //random # between 1 - 10
        int randNum  = (arc4random() % 10)+1;

        NSString *formattedName = [NSString stringWithFormat:@"_%i.png",randNum];

        disFood = [disFood stringByAppendingString:formattedName];

        _sprite = [FLSprite spriteWithSpriteFrameName:disFood]; 

        NSLog(disFood);//Logging disFood String;
    }
    return _sprite;
} 
```

# c# - 正则表达式捕获转义字符串

> ID：16021036
> 
> 赞同：0
> 
> 时间：2013-04-15T17:19:15.390
> 
> 标签：c#, regex

我正在尝试创建一个捕获转义字符串组的正则表达式。例如在以下字符串中...

```
\ll\lln-(l*4n)* 
```

唯一逃脱的组是`ll`，但在这个字符串中......

```
\ll\lln-\(l*4n)*4\ 
```

逃生团体将是……`ll`和`(l*4n)*4`。

执行此操作的最佳正则表达式是什么，正如您所见，`\`出于明显的原因，我需要支持所有字母、数字和符号，并加上注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:24:49.273

如果必须使用正则表达式，则

```
@"\\([^\\]*)\\" 
```

几乎与您将得到的一样接近。

[这是您的正则表达式的示例](http://rubular.com/r/KDEEwTIToq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:26:04.510

所以你想要`\`和下一个之间的文本`\`？怎么样：

```
\\(.*?)\\ 
```

编辑：感谢 Sam I Am 提供了方便的正则表达式工具：

[http://rubular.com/r/An1hK9DdL2](http://rubular.com/r/An1hK9DdL2)

# python - Python web.py peewee 和 heroku

> ID：16021037
> 
> 赞同：0
> 
> 时间：2013-04-15T17:19:18.267
> 
> 标签：python, heroku, peewee

我有一个基于 web.py 和 peewee 的小程序。部署到 heroku 很顺利，我有一个数据库正在运行，但是如何配置 peewee 以使用 heroku postgress 数据库？

peewee 文档没有透露任何有用的信息[http://peewee.readthedocs.org/en/latest/peewee/api.html#PostgresqlDatabase](http://peewee.readthedocs.org/en/latest/peewee/api.html#PostgresqlDatabase)

我努力了

```
db = PostgresqlDatabase('database', user='user', password='password', host='host') 
```

忘记了“heroku 日志”中的日志片段

```
2013-04-15T17:11:21.093479+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/peewee.py", line 1639, in connect
2013-04-15T17:11:21.093255+00:00 app[web.1]:   File "/app/myapp.py", line 5, in <module>
2013-04-15T17:11:21.093479+00:00 app[web.1]:     self.__local.conn = self._connect(self.database, **self.connect_kwargs) 
```

*更新* 我试图将 postgresql 设置更改为

```
db = PostgresqlDatabase("dbname='template1' user='dbuser' host='localhost' password='dbpass'") 
```

现在我得到

```
2013-04-16T19:11:02.345227+00:00 app[web.1]:     db.connect()
2013-04-16T19:11:02.345227+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/peewee.py", line 1639, in connect
2013-04-16T19:11:02.345227+00:00 app[web.1]:     self.__local.conn = self._connect(self.database, **self.connect_kwargs)
2013-04-16T19:11:02.345227+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/peewee.py", line 1810, in _connect
2013-04-16T19:11:02.345582+00:00 app[web.1]:     return psycopg2.connect(database=database, **kwargs)
2013-04-16T19:11:02.345582+00:00 app[web.1]:     conn = _connect(dsn, connection_factory=connection_factory, async=async)
2013-04-16T19:11:02.345582+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/psycopg2/__init__.py", line 164, in connect
2013-04-16T19:11:02.345582+00:00 app[web.1]: psycopg2.OperationalError: could not connect to server: No such file or directory
2013-04-16T19:11:02.345582+00:00 app[web.1]:    Is the server running locally and accepting
2013-04-16T19:11:02.345582+00:00 app[web.1]:    connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:37:39.993

我在这里找到了答案[http://initd.org/psycopg/docs/module.html](http://initd.org/psycopg/docs/module.html)，经过几个小时的谷歌搜索和测试，正确的连接方式是

```
db = PostgresqlDatabase(
    database='',
    user='',
    password='',
    host='',
    port='5432'
  ) 
```

这让 peewee 连接到 Heroku 上的 postgresql

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T17:12:36.830

如果您在解释器启动时不知道数据库的配置，您可以“推迟”初始化并在运行时设置数据库连接参数：

[http://peewee.readthedocs.org/en/latest/peewee/cookbook.html#deferring-initialization](http://peewee.readthedocs.org/en/latest/peewee/cookbook.html#deferring-initialization)

# ruby-on-rails-3 - 在 Rails 3.2.8 中使用 select2 gem 时 Sprockets::FileNotFound

> ID：16021039
> 
> 赞同：1
> 
> 时间：2013-04-15T17:19:19.100
> 
> 标签：ruby-on-rails-3, jquery-select2, sprockets, select2-rails

我正在尝试测试一个示例 Rails 应用程序以使用[select2 gem](http://ivaynberg.github.io/select2/)。我已经在[select2-rails](https://github.com/argerim/select2-rails)之后安装了 gem 。

但是，不幸的是我收到以下错误：

```
Sprockets::FileNotFound in Home#index

Showing /Users/Rakib/Desktop/Development/TEST_PROJECTS/selecttest/app/views/layouts/application.html.erb where line #5 raised:

couldn't find file 'select2'
  (in /Users/Rakib/Desktop/Development/TEST_PROJECTS/selecttest/app/assets/stylesheets/application.css:14)
Extracted source (around line #5):

2: <html>
3: <head>
4:   <title>Selecttest</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: </head>
Rails.root: /Users/Rakib/Desktop/Development/TEST_PROJECTS/selecttest 
```

我的 Gemfile 是：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'sqlite3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'jquery-rails'
gem "select2-rails" 
```

**application.js**是：

```
//= require jquery
//= require jquery_ujs
//= require select2
//= require_tree . 
```

**application.css**是：

```
 *= require_self
 *= require_tree .
 *= require select2 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-23T15:23:01.870

我遇到了同样的问题。问题通过重启服务器解决。

# javascript - HTML 框格式

> ID：16021042
> 
> 赞同：0
> 
> 时间：2013-04-15T17:19:28.437
> 
> 标签：javascript, html, forms, input, format

所以我有这段 JavaScript 代码，每次单击按钮时都会创建两个新的输入字段，现在它们看起来有点有趣。我在下面附上了一张图片。代码也在下面。我希望名称字段与大框的顶部对齐，有什么办法吗？

```
var div = document.createElement("div");
div.innerHTML = "<b>Checkpoint " + markerId + ":</b> <input type='text' id=" + markerId + " placeholder='Checkpoint name'> <textarea rows='5' cols='40' id=" + markerId + "desc> Checkpoint description </textarea> <button type='submit' value='Remove' onClick='remove_checkpoint();' /> <br />";
document.getElementById("divForms").appendChild(div); 
```

谢谢！

![图片：](https://i.stack.imgur.com/IaCHg.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:21:00.053

是的。你可以这样做：

在 CSS 中：

```
textarea {vertical-align: top;} 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/xPmY2/](http://jsfiddle.net/praveenscience/xPmY2/)

* * *

或者，如果您不喜欢使用 CSS，请以这种方式内联样式：

```
<textarea style="vertical-align: top;">Checkpoint description</textarea> 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/xPmY2/1/](http://jsfiddle.net/praveenscience/xPmY2/1/)

* * *

但我建议你使用 CSS 版本，因为内联样式很笨拙。

**截屏**

![](https://i.imgur.com/5npH7ex.png)

# javascript - 在 window.showModalDialog 中启用复制粘贴选项

> ID：16021043
> 
> 赞同：0
> 
> 时间：2013-04-15T17:19:33.587
> 
> 标签：javascript, asp.net, html

在我的应用程序中，一些 .aspx 页面由 window.showModalDialog 调用，如下所示

```
window.showModalDialog('../SelectUser.aspx?',window,sFeatures); 
```

其中 sFeatures 声明如下

```
sFeatures = "dialogWidth=400px;dialogHeight=450px;border=thick;center=yes;help=no;status=no;title=Task"; 
```

在通过 ShowModalDialog 清除页面的所有页面中，默认情况下禁用复制粘贴选项。如何从 showModalDialog 页面启用复制粘贴选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:58:33.943

`showModalDialog`不允许您在使用 ShowModalDialog 打开对话框的窗口和实际对话框本身之间复制和粘贴信息。为此，您需要改为打开页面`window.open`。

有关这方面的更多信息[，请参阅“需要 ModalDialog 帮助”](http://www.velocityreviews.com/forums/t164745-need-help-with-modaldialog.html)和[“showModalDialog”](http://www.velocityreviews.com/forums/t88245-showmodaldialog.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T09:46:35.663

引用[MSDN上的 showModalDialog 文档](https://msdn.microsoft.com/en-us/library/ms536759%28v=vs.85%29.aspx)

> 模态和非模态 HTML 对话框都不支持文本选择或用于复制操作的标准快捷菜单；但是，您可以通过使用带有 TextRange 对象的脚本和 onmousedown 和 onmousemove 的事件处理程序来模仿此功能，如下例所示。
> 
> 代码示例：[http ://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialogLaunch.htm](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialogLaunch.htm)

作为替代方案，您可以实现自己的模式对话框

```
var dlg = window.open(url, '_blank', 'modal=yes,dialog=yes');

var winFocus = window.onfocus;

window.onfocus = function() {
    if (dlg /* && possible additional condition based on dialog flow */) {
        dlg.focus();
    } else {
        window.onfocus = winFocus;
        // callback for dialog closing
    }
} 
```

# css-float - 浮动 div 和灵活的高度

> ID：16021047
> 
> 赞同：0
> 
> 时间：2013-04-15T17:19:52.010
> 
> 标签：css-float, height, floating

也许这已经被回答过，但找不到真正有用的答案，所以这里是：

我有这个布局[布局测试](http://jsfiddle.net/ecsJ8/2/)，我需要橙色框与绿色具有相同的高度，这将具有动态内容。

我尝试了不同的解决方案，但没有得到正确的结果。一种解决方案是让橙色和绿色的盒子有：

```
padding-bottom: 500em;
margin: -500em; 
```

和父母`overflow: hidden;`

但问题始于红色盒子底部（漂浮在紫色顶部）被切断，因为`overflow: hidden;`

有没有人有解决方案或想法？如果可能的话，我更喜欢纯 CSS。

适合我的解决方案：

[新布局测试](http://jsfiddle.net/ecsJ8/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:26:20.977

抱歉，我找不到纯 CSS 的解决方案，但是使用这个简单的 jquery，您可能会得到想要的结果：

```
jQuery(document).ready(function( $ ){   
var green = $('.col3').height();
var red = $('.col1').height();
    $('.col2').height(green - red + 15);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:08:01.537

用我自己的解决方案更新，有问题的链接。

# xml - XML 文档是否可以同时遵循 DTD 和 XML Schema？

> ID：16021048
> 
> 赞同：3
> 
> 时间：2013-04-15T17:19:53.103
> 
> 标签：xml, schema, dtd

XML 文档指定它遵循 DTD**和**Schema 是否合法？两者不会互相冲突吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:59:55.737

从技术上讲，我认为您会遇到 DTD 无法识别引用模式的属性（命名空间声明和模式位置）的问题。

但是，我认为这取决于您如何验证 XML，以及如果指定了模式，您是否可以忽略 DTD 进行验证。

此外，对于您的作业，您确定必须从同一个 XML 实例中引用两者吗？也许你可以有 2 个版本的 XML；一个引用 DTD 和一个引用架构？

* * *

这是另外两个可能的选择...

**声明模式属性：**

```
<!DOCTYPE doc [
<!ELEMENT doc (test)>
<!ATTLIST doc
          xmlns:xsi CDATA #IMPLIED
          xsi:noNamespaceSchemaLocation CDATA #IMPLIED>
<!ELEMENT test (#PCDATA)>
]>
<doc xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="test.xsd">
    <test>Test Doc</test>
</doc> 
```

**使用处理指令来引用架构：**

```
<!DOCTYPE doc [
<!ELEMENT doc (test)>
<!ELEMENT test (#PCDATA)>
]>
<?xml-model href="test.xsd"?>
<doc>
    <test>Test Doc</test>
</doc> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:26:22.477

> XML 文档指定它遵循 DTD 和 Schema 是否合法？

是的

> 两者不会互相冲突吗？

只有当他们中的一个人要求其他人禁止的事情时（在这种情况下，声称遵循两者都是一件奇怪的事情）。

# c# - Linq，无法仅列出不同的结果

> ID：16021049
> 
> 赞同：0
> 
> 时间：2013-04-15T17:19:57.940
> 
> 标签：c#, asp.net-mvc-3, linq

我有三个表，car_type、car_manufacturer 和 car_model。当用户单击他们想要浏览的特定车辆类型时，我想向他们显示可用制造商的列表。问题是制造商的名单不是独特的或独特的。因此，如果我的数据库中有三款马自达的车型，马自达将出现 3 次。这是我的控制器：

```
 public ActionResult Browse(string click_string)     
    {
         var x = carDB.Models
                 .Include(b => b.Manufacturer)
                 .Include(a => a.VehicleType)
                 .Where(a => a.VehicleType.TypeName == click_string);
         return View(x.ToList());
} 
```

我怎样才能写这个来删除多余的列表？这对我来说是全新的，所以请放轻松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:33:57.353

您必须查询`Manufacturers`，而不是查询`Vehicles`：

```
var x = carDB.Models.Where(a => a.VehicleType.TypeName == click_string)
                    .Select(a => a.Manufacturer)
                    .Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:49:02.227

尝试完全避免 Distinct 通常效果很好。你要制造商吗？找厂家。并从那里确定您需要哪些：生成具有`click_string`类型名称的模型的模型：

```
carDB.Manufacturers.Where(manufacturer => manufacturer.Models
                   .Any(model => model.VehicleType.TypeName == click_string)) 
```

您可能想要包含`Models`和/或`VehicleType`，这取决于您要在视图中显示的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:21:18.733

您应该能够使用[.Distinct](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)返回不同的元素。

```
var x = carDB.Models
        .Include(b => b.Manufacturer)
        .Include(a => a.VehicleType)
        .Where(a => a.VehicleType.TypeName == click_string)
        .Distinct(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T17:21:55.823

首先尝试在`.Distinct()`查询末尾执行 a ，如果它不起作用，您可能需要为 .Distinct() 提供自定义比较器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T17:22:09.910

添加不同的

```
var x = carDB.Models
        .Include(b => b.Manufacturer)
        .Include(a => a.VehicleType)
        .Where(a => a.VehicleType.TypeName == click_string)
        .Select(y => y)
        .Distinct(); 
```

.Select() 可能有点冗长，但没有在我的视觉工作室中尝试它，我把它放在那里是为了安全

# html - 位置相对和 z-index 混淆

> ID：16021056
> 
> 赞同：0
> 
> 时间：2013-04-15T17:20:16.190
> 
> 标签：html, css, css-position, z-index

JSF中：

[问题的 JSFiddle](http://jsfiddle.net/ZCBXA/)

我在用相对定位的元素环绕 z-index 时遇到了一些麻烦。鉴于此 html，我希望“活动”屏幕组件位于其他两个之前（是的，我知道在此示例中这在视觉上看起来不太好......我已将问题归结为基础知识）：

```
<div class="parent-container">
    <div class="screen-component">
        Content inside first screen component
    </div>
    <div class="screen-component">
        Content inside second screen component
    </div>
    <div class="screen-component active">
        Content inside active component.. I want this up top
    </div>    
</div> 
```

这个CSS：

```
.parent-container {
    position: relative;
}

.screen-component {
    position: relative;
    z-index: 2000;
}

.screen-component.active {
  position: relative;
  z-index: 5000;
} 
```

我想要的效果是任何带有“活动”类的“屏幕组件”都位于其他组件的前面；但是现在它们似乎都被赋予了新的行，尽管 .active 类的 z-index 高于 .screen-component 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:27:30.373

我想你想要这样的东西：http:
[//jsfiddle.net/ZCBXA/3/](http://jsfiddle.net/ZCBXA/3/)

（背景颜色仅用于演示目的）

```
.parent-container {
    position: relative;
}

.screen-component {
    position: absolute;
    z-index: 2000;
    top:0px;
    left:0px;
    background-color: #f00;
}

.active {
    z-index: 5000;
    background-color: #0f0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:27:46.860

如果我了解您要正确执行的操作，则`position: absolute;`无需`position: relative;`. 然后给 div 类一个 top 值，以便该类的所有 div 与顶部的距离相同，并且 z-index 为 -1 以隐藏它们。活动类唯一需要的是比其他类更高的 z-index。

```
.parent-container {
    position: relative;
}

.screen-component {
    position: absolute;
    top:0;
    z-index: -1;
}

.screen-component.active {
    z-index: 0;
} 
```

# asp.net - ASP.NET - 带有语法错误的简单代码隐藏变量

> ID：16021063
> 
> 赞同：0
> 
> 时间：2013-04-15T17:20:36.160
> 
> 标签：asp.net, .net

在我的 aspx 代码中，我有这样的东西

```
if(AnId == <%=MyCodebehindObject.MyId%>)
{
    // stuff
} 
```

代码正在运行：我可以从代码隐藏变量中获取值。但是，我在第一行末尾收到“语法错误”警告。

我可以通过用引号将变量括起来来“修复它”，但这将使我的变量成为一个字符串，我期待一个 int。那会很好用，javascript会将其转换为比较，但我认为这很愚蠢，我试图找到这样做的写入方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:28:03.423

您需要将 javascript 代码用引号括起来

```
if(AnId == '<%= MyCodebehindObject.MyID%>'){
    // stuff
} 
```

# sql-server - 如何在 .hta 代码中添加日期范围？

> ID：16021064
> 
> 赞同：0
> 
> 时间：2013-04-15T17:20:37.490
> 
> 标签：sql-server, vbscript, hta

我编写了一个带有一个搜索参数的 hta 应用程序。

使用此搜索参数，用户可以按名字或姓氏或两者进行搜索。

这真的很好用。

今天，管理层决定添加日期范围作为搜索的一部分。

我试图构建 WHERE 子句，用户可以在其中搜索姓氏、名字或两者或日期范围，但不能同时使用两者。

换句话说，一方面，用户可以使用名为 txtsrch 的表单变量按姓氏、名字或两者进行搜索。

或者他们可以只使用日期范围，仅使用 fromMDY 作为 fromDate 和 toMDY 作为 toDate。

到目前为止，效果并不好。

无论是在名称搜索框中输入搜索还是选择日期范围，都会出现类型不匹配错误。

当它只是一个搜索框时，我没有收到类型不匹配错误。

非常感谢任何帮助。

这是最小的，我认为相关的代码。

日期格式为 1/1/2013

```
'*
Const cOPT = "<option value='?'>?</option>"
'*
Dim fromMDY(2)
Dim toMDY(2)
Dim optMDY(2)
optMDY(0) = "<option value='0'></option>"
optMDY(1) = "<option value='0'></option>"
optMDY(2) = "<option value='0'></option>"
Dim i
'*
For i = 1 To 12
  optMDY(0) = optMDY(0) & vbCrLf & Replace(cOPT,"?",i)
Next
For i = 1 To 31
  optMDY(1) = optMDY(1) & vbCrLf & Replace(cOPT,"?",i)
Next
For i = Year(Date)+1 To Year(Date)-4 Step -1
  optMDY(2) = optMDY(2) & vbCrLf & Replace(cOPT,"?",i)
Next

Sub Selected(What)
  Select Case What
  Case "FromMonth"
    fromMDY(0) = FromMonth.Value
  Case "FromDay"
    fromMDY(1) = FromDay.Value
  Case "FromYear"
    fromMDY(2) = FromYear.Value
  Case "ToMonth"
    toMDY(0) = ToMonth.Value
  Case "ToDay"
    toMDY(1) = ToDay.Value
  Case "ToYear"
    toMDY(2) = ToYear.Value
  End Select
End Sub

Sub DisplayDates()
  MsgBox "From:" & vbTab & Join(fromMDY,"/") & vbCrlf _
    & "To:" & vbTab & Join(toMDY,"/")
  End Sub

' first: Do we use AND or OR between clauses in the WHERE?
' AndOr = ANDOR.value
Sub radiocheck()
  for each b in ANDOR
    if b.checked Then AndOr = b.Value
  next
End Sub

' and now build up the WHERE:
where = ""

tsrch = txtsrch.Value

If tsrch <> "" Then
  where = where & " Name = '" & Replace(tsrch,"'","''") & "'"
End If

If fromMDY <> "" AND toMDY<> "" Then
    where = where & " convert(datetime, (left(dispdt,2)  + '/' + substring(dispdt,3,2) + '/' + case when cast(right(dispdt,2) as int) >= 70 then '19' else '20' end + right(dispdt,2)), 101) Between '"& fromMDY &"' AND '"& toMDY &"' "
End If

'Take care of sql injection tactics
SQL_query = "SELECT TOP 1000 Name, Rel, Estno, dtfild, pub, [TYPE OF DOCUMENT] typeofdocument, btyp, bkno, disp, dispdt, PGNO FROM PCS60418_MTHLY_XREF WHERE " _ 
  & where
msgBox sql_query 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:39:28.340

VBScript 不区分大小写。如果您这样做，则与此`ANDOR`完全相同：`AndOr`

```
Sub radiocheck()
    for each b in ANDOR
        if b.checked Then AndOr = b.Value
    next
End Sub 
```

您正在分配一个与或类型`AndOr`冲突的原语。只需重命名两个变量之一，然后再试一次。`ANDOR``Array``Iteratable Object`

为了防止将来出现这种错误：使用`Option Explicit`，使用正确的（一致的）变量命名并使用正确的范围：尽可能在本地并将变量传递给子例程，而不是将它们用作全局变量。

# c# - 如何在 C# 中仅更新 Gridview

> ID：16021065
> 
> 赞同：0
> 
> 时间：2013-04-15T17:20:43.363
> 
> 标签：c#, asp.net, gridview

我的 C# ASP.net 应用程序中有 gridview。

当用户编辑一行时，我要做的就是更新gridview的数据源（还不是数据库，因为我只是在最后将datagrid的数据源作为数据集推送到我的数据库中）。

但是我得到的值是旧值，而不是在 gridview 上编辑的更新值。

为什么会这样？我正在遵循这些链接上的所有建议。

```
 protected void grdViewDetails_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow row = (GridViewRow)grdViewDetails.Rows[e.RowIndex];
        int adsf = row.Controls.Count;

        foreach (Control item in row.Controls)
        {
            if (item.Controls[0] is TextBox)
           {
               TextBox textbox = (TextBox)item.Controls[0];
               string x = textbox.Text;

//on the second for loop the string variable x = Employee1
           }
           if (item.Controls[0] is Label)
           {
               Label mylabel = (Label)item;
               //do stuff
           } 
```

![在此处输入图像描述](https://i.stack.imgur.com/313Hg.png)

![在此处输入图像描述](https://i.stack.imgur.com/6ywKo.png)

现在文本框变量 x 应该是 xxxxxxx，但它仍然是旧值....为什么会发生这种情况？

你不能只更新gridview而不更新任何其他数据集/源。因为我最后使用了gridview的整个数据源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:35:04.470

您可以使用 访问新值`GridViewUpdateEventArgs`。[这是文档中](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs.aspx)的一个示例：

```
 void CustomersGridView_RowUpdating(Object sender, GridViewUpdateEventArgs e)
  {

    // Iterate through the NewValues collection and HTML encode all 
    // user-provided values before updating the data source.
    foreach (DictionaryEntry entry in e.NewValues)
    {

      e.NewValues[entry.Key] = Server.HtmlEncode(entry.Value.ToString());

    }
  } 
```

您可以使用调试器`e`更仔细地检查您的变量并找出您需要哪些值。

# android - lockNow() DeviceAdmin 在实际设备上不起作用

> ID：16021066
> 
> 赞同：1
> 
> 时间：2013-04-15T17:20:50.687
> 
> 标签：android, sms, locking

我正在尝试在接收来自 SMS 的指定命令时执行 lockNow()。我已经测试过，它在我的模拟器 (4.0.3) 上运行良好，但是当我在我的实际设备 (4.2.2) 和 (4.1.2) 以及 (4.2.2) 的模拟器上进行测试时，它无法正常工作。

似乎它甚至没有在 BroadcastReceiver 上接收 SMS。

编辑：它现在适用于我的模拟器（4.2.2），当我推送到 4.2.2 AVD 时，我实际上忘记了清单中的 RECEIVE_SMS 权限。但它仍然无法在我的设备上运行。

编辑 2：我认为这可能是由于第 3 方 SMS 应用程序（例如 GO SMS）阻止我的广播首先接收 SMS。我可能会尝试卸载 GO SMS 并查看它是否有效。

编辑 3：这真的是 GO SMS。经过数小时的搜索，我只需要禁用 GO SMS 中的一项设置。“打开Go SMS，点击'菜单'并点击'设置'，点击'接收设置'，然后取消选中'禁用其他消息通知”。它现在有效！呸！

希望它在未来对其他人有所帮助。

这是我接收短信并执行锁定操作的课程。

```
import android.app.admin.DevicePolicyManager;
import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

public class RemoteWipeSMS extends BroadcastReceiver {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    private static final String TAG = "SMSBroadcastReceiver";

    static final int WIPE_EXTERNAL_STORAGE = 1;

    DevicePolicyManager devicePolicyManager;

    @Override
    public void onReceive(Context context, Intent intent) {
         System.out.println("Test get SMS");
         Log.i(TAG, "not getting sms");
         Log.i(TAG, "Intent recieved: " + intent.getAction());
         devicePolicyManager = (DevicePolicyManager)context.getSystemService(Context.DEVICE_POLICY_SERVICE);

            if (intent.getAction().equals(SMS_RECEIVED)) {
                Bundle bundle = intent.getExtras();
                if (bundle != null) {
                    Object[] pdus = (Object[])bundle.get("pdus");
                    final SmsMessage[] messages = new SmsMessage[pdus.length];
                    for (int i = 0; i < pdus.length; i++) {
                        messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                    }
                    if (messages.length > -1) {
                        Log.i(TAG, "Message recieved: " + messages[0].getMessageBody());
                        Toast.makeText(context, "SMS Received : "+messages[0].getMessageBody(),
                                Toast.LENGTH_LONG).show();

                        if (messages[0].getMessageBody().equalsIgnoreCase("Lock")) {
                            Toast.makeText(context, "SMS Action : To LOCKED",
                                    Toast.LENGTH_LONG).show();
                            try {
                                devicePolicyManager.lockNow();
                            } catch (Exception e) {
                                Log.e("Locked", "Lock error");
                            }
                        } else if (messages[0].getMessageBody().equalsIgnoreCase("Reset")) {
                            Toast.makeText(context, "SMS Action : To Reset",
                                    Toast.LENGTH_LONG).show();
                            try {
    devicePolicyManager.wipeData(WIPE_EXTERNAL_STORAGE);
                            } catch (Exception e) {
                                Log.e("Locked", "Reset error");
                            }

                        }
                    }
                }
            }
       }

} 
```

我的清单的一部分。

```
<uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/app_icon"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Holo" >
        <service
            android:name="TestService">
        </service>

        <receiver 
            android:name="com.my.test.RemoteWipeSMS"
            android:exported="true" >
            <intent-filter
                android:priority="999" >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
        <!-- This is where we register our receiver -->
        <receiver
            android:name="com.my.test.DeviceAdminDetect"
            android:permission="android.permission.BIND_DEVICE_ADMIN" >
            <intent-filter>

                <!-- This action is required -->
                <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
            </intent-filter>

            <!-- This is required this receiver to become device admin component. -->
            <meta-data
                android:name="android.app.device_admin"
                android:resource="@xml/device_admin" />
        </receiver>

        <activity
            android:name="com.my.test.Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

# email - Symfony2 Swift Mailer 连接时间非常长 - 调试选项？

> ID：16021076
> 
> 赞同：0
> 
> 时间：2013-04-15T17:21:36.027
> 
> 标签：email, symfony, smtp, xdebug, swiftmailer

我正在使用 Symfony 2.1 和 SwiftMailer 发送注册电子邮件。如果要发送电子邮件，则处理此过程大约需要 20 秒。同时网站正在加载。这可能会给用户一种出现问题的印象。

我正在使用 SMTP 连接。

我有一个类似的 Symfony2 安装，它连接到同一个邮件服务器，也使用 SMTP，并立即发送一封电子邮件。

有没有办法使用 XDEBUG 或其他方法来查看导致延迟的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:23:13.390

我认为这是一个缓慢的 DNS 查找问题。在 parameters.yml 中，我将 SMTP 主机从域名更改为 127.0.0.1，现在它可以正常工作了。

# javascript - JS：动画功能

> ID：16021078
> 
> 赞同：0
> 
> 时间：2013-04-15T17:21:42.087
> 
> 标签：javascript, jquery, jquery-animate

我的页面上有元素 .menu，我的 JS 库之一有 xslide 属性，它提供了许多选项，如可拖动、覆盖、半径等。

```
$(document).ready(function(){
            $('.menu').xslide({
                draggable: true,
                overlay: 'rgba(255,30,100,1)',
                radius:0

            });
        }); 
```

上面的代码以固定的方式设置属性，但我喜欢给它们一些平滑的过渡，那么我如何在这里使用 jQuery 的 .animate 东西呢？例如，当.menu 单击时，我希望半径在几秒钟内逐渐增加到20。所以我相信我的代码应该像这样开始：

```
 $('.menu').click(function(){ 
```

怎么办？当我尝试类似的事情时：

```
$(this).animate.xslide({radius:'20'},1000) 
```

它不起作用，你能帮我吗？:) 如果我问这些琐碎的事情很烦人，我很抱歉，但我对它很陌生，我正在努力。^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:36:41.130

jQuery animate 使用 CSS 样式来制作动画。如果插件有animate radius的扩展是可以的，否则animate就不行了。半径是 CSS 属性吗？

如果它是一个边界半径，它将类似于：

```
$("#selector").animate({
    "border-radius" : "10px"
}, 500); // 500 MS 
```

# c++ - c ++如何使用指针将字符串与动态结构字符串进行比较？

> ID：16021087
> 
> 赞同：0
> 
> 时间：2013-04-15T17:22:12.883
> 
> 标签：c++, class, pointers

我必须在 C++ 中编写一个类的方法，当它们只给我名称时，它会向我显示一个类的所有属性。例如，我有一个包含 a_name、a_goals 和 a_points 的类“团队”。所以当他们给我一个带有名称的字符串时，我必须将它与我的动态结构进行比较，并找到具有相同名称的团队来显示它。我有这个代码：

```
void Classificacio::mostrar(string nom) const {
    Equip eq;
    Node* i=a_inici;
    bool trobat=false;
    while(!trobat && i!=NULL) {
        if(nom.compare(i->a_equip.NomEquip())==0) trobat=true;
        else i=i->seg;
    }
    if(trobat==true) eq=i->a_equip;
    cout << eq << endl;
} 
```

NomEquip() 是一个返回团队名称的方法。但它不起作用。每次我尝试使用调试器执行它时，它都会在 if 行中停止。任何想法我做错了什么？

编辑：想把它翻译成英文，但我忘记了一些东西，这次只是复制/粘贴它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:36:55.143

有可能在线路中崩溃：

```
if (trobat == true) eq=i->a_equip; 
```

因为您在i == NULL`in the`时检查“i!=NULL” 。`loop. One of the terminating conditions of the``loop is that`

假设`while`循环因 终止`i == NULL`，您的`if`语句将取消引用未定义行为的 NULL 指针。

**编辑 1：** 如果它在 时崩溃`if (nom.compare(i->a_equip.NomEquip()) == 0)`，并且我们知道`i`它是有效的，则表明该`NomEquip`函数是主要的罪魁祸首。

`while`将循环更改为：

```
while (...)
{
  std::string nom_equip = i->a_equip.NomEquip();
  if (nom == nom_equip)
//...
} 
```

现在在该行放置断点`std::string`并进入函数以跟踪它。

# android - 使用我的 android 应用程序中的 facebook session id 来比较在 facebook php 中生成的 session id

> ID：16021089
> 
> 赞同：1
> 
> 时间：2013-04-15T17:22:21.680
> 
> 标签：android, facebook, facebook-php-sdk, facebook-android-sdk

是否可以使用我的 android 应用程序中的 facebook 会话 ID 来比较在 facebook php 中生成的会话 ID。我正在使用 php-mysql 框架。

从某种意义上说，我有一个实现 facebook sdk 的 android 应用程序，当我登录时我得到了 facebook session id。我想在每次用户进行 http 调用时使用相同的会话 ID，从而保护链接并验证其是否是同一个 facebook 用户。

如果我使用 facebook sdk 从我的 android 应用程序登录，当我进行 http 调用并检查我的 php 页面中的会话 ID 时，有什么办法吗？

或者如果他在我的应用程序中使用 facebook android sdk 登录，它会绕过 php 中的登录并仅检查与该用户的 facebook 唯一 ID 相关的会话 ID。或者他必须重新登录？

请帮助我。我将非常感谢与此主题有关的任何帮助。或任何其他有关保护 facebook 用户发出的 http 调用的建议。

提前致谢。

# sql - 用于比较行的 SQL 语句

> ID：16021094
> 
> 赞同：3
> 
> 时间：2013-04-15T17:22:45.563
> 
> 标签：sql, join, compare

我有一个存储产品编号、客户名称和区域的表。因此，我可以使用这张表查询特定区域中特定客户的所有产品。

我正在尝试编写一个查询，让我可以查看客户在 1 个区域中拥有哪些产品，而不是在另一个区域中拥有哪些产品，反之亦然（比较区域）。换句话说，对于特定的客户，我是否可以看到北方的所有产品而不是南方的所有产品，以及南方的所有产品而不是北方的所有产品。

我很确定如果它是 2 个单独的查询，这将非常容易，但我试图在一个查询中完成。可能吗？

```
产品客户区域
500 1 北
500 1 南
501 1 北
502 1 南
503 1 北
503 1 南

```

上述数据的结果表明，客户 1 在北方有产品 501，但在南方没有，在南方有产品 502，但在北方没有。产品 500 和 503 被忽略，因为它们位于两个区域中。

```
产品客户区域
501 1 北
502 1 南

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:43:26.910

这是一种方法：

```
Select product, client, region
From yourTable t
Where region in('north','south')
  And not exists(
    Select product, client, region
    From yourTable tt
    Where t.region <> tt.region
      And t.client = tt.client
      And t.product = tt.product
    ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:34:40.853

如果客户在两个地区都有产品，则有两行（假设没有重复）。如果只有一个地区有产品，则计数为 1。

因此，以下查询应返回您想要的内容：

```
select product, client, MAX(region) as region
from pcr
group by product, client
having COUNT(*) = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:49:47.483

我已经根据您在问题中提供的信息在我构建的表格上测试了以下代码。我选择了一组产品，其中区域列同时包含`North` *和* `South`; 从这里我从`Product`没有出现的结果集中获取数据（这意味着它不包含`North`和`South`.

**结果：**

```
产品客户地区  
501 1 北   
502 1 南   

```

**查询：**

```
SELECT * 
FROM   test 
WHERE  product NOT IN(SELECT t1.product 
                      FROM   test t1 
                             INNER JOIN test t2 
                                     ON t1.product = t2.product 
                      WHERE  t1.region = "North" 
                             AND t2.region = "South") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T17:25:29.587

如果您不关心哪个区域，则以下内容应该可以工作，至少在 mysql 中可以让您稍微滥用组。

```
select product, client, count(*) cnt from blah where cnt = 1 group by product, client 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T17:41:20.247

如果使用 MSSQL > 2005，这应该适合您：

```
SELECT pvt.Product, pvt.Client, [NORTH],[SOUTH]
FROM
(SELECT Product, Client, Region
FROM ProductTable) p
PIVOT
(
COUNT (Region)
FOR Region IN([NORTH],[SOUTH])
) pvt
WHERE ([NORTH]+[SOUTH]) <> 2 
```

[SQL小提琴](http://sqlfiddle.com/#!3/05365/7/0)

# python - 不使用 `not` 命令检查列表是否为空

> ID：16021096
> 
> 赞同：20
> 
> 时间：2013-04-15T17:22:53.367
> 
> 标签：python, list, is-empty

如何在不使用 not 命令的情况下确定列表是否为空？
这是我尝试过的：

```
if list3[0] == []:  
    print("No matches found")  
else:  
    print(list3) 
```

我是一个初学者，如果我犯了愚蠢的错误，请原谅。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-15T17:24:53.463

按优先顺序：

```
# Good
if not list3:

# Okay
if len(list3) == 0:

# Ugly
if list3 == []:

# Silly
try:
    next(iter(list3))
    # list has elements
except StopIteration:
    # list is empty 
```

如果你同时有 if 和 else 你也可以重新排序案例：

```
if list3:
    # list has elements
else:
    # list is empty 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-15T17:25:02.360

您可以通过测试列表的“真相”来确定列表是否为空：

```
>>> bool([])
False
>>> bool([0])     
True 
```

虽然在第二种情况下`0`为 False，但该列表`[0]`为 True，因为它包含某些内容。（如果您想测试包含所有虚假内容的列表，请使用[all](https://docs.python.org/2/library/functions.html#all)或[any](https://docs.python.org/2/library/functions.html#any) : `any(e for e in li)`is True 如果其中的任何项目`li`是真实的。）

这导致了这个成语：

```
if li:
    # li has something in it
else:
    # optional else -- li does not have something 

if not li:
    # react to li being empty
# optional else... 
```

根据[PEP 8](http://www.python.org/dev/peps/pep-0008/#programming-recommendations)，这是正确的方法：

> • 对于序列（字符串、列表、元组），使用空序列为假这一事实。
> 
> ```
> Yes: if not seq:
>      if seq:
> 
> No: if len(seq)
>     if not len(seq) 
> ```

您可以使用以下方法测试列表是否存在特定索引`try`：

```
>>> try:
...    li[3]=6
... except IndexError:
...    print 'no bueno'
... 
no bueno 
```

因此，您可能希望将代码的顺序反转为：

```
if list3:  
    print list3  
else:  
    print "No matches found" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T17:24:41.010

检查它的长度。

```
l = []
print len(l) == 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T17:25:15.910

你会这样做

```
if len(list3) == 0:
    print("No matches found") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-23T08:45:15.277

Python 提供了一个内置的 any() 函数来检查一个可迭代对象是否为空：

```
>>>list=[]

>>>any(list)

False 
```

如果可迭代对象包含“True”值，则该函数返回 True，否则返回 False。

但是，请注意，列表 [0] 也使用 any() 返回 False。

# html - hhc Windows 帮助文件不能很好地处理引号或双引号

> ID：16021097
> 
> 赞同：0
> 
> 时间：2013-04-15T17:23:02.123
> 
> 标签：html, windows, chm, double-quotes, quote

我注意到在编译 chm 文件时，如果树包含任何标题中有双引号的文章，例如*如何使用“？” 正确*，它不会正确处理树。在实际的帮助文件中，标题实际上是*如何使用*.

Windows 帮助文件处理报价的能力是否存在问题？或者，我是否必须在某处指定字符编码才能解决此问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:33:56.363

Afaik 主题标题是索引中的 wchars，其余的只是 html。所以可能是 CHM 编译器的限制，而不是格式的限制。

不幸的是，您对此无能为力。

OTOH html afaik 要求“被替换为”你尝试过吗？

Ps & 和引号当然要碰，但是论坛软件会变成"

# iphone - 如何在多个视图和恢复控件中使用 AVPlayer？

> ID：16021098
> 
> 赞同：0
> 
> 时间：2013-04-15T17:23:09.483
> 
> 标签：iphone, xcode, audio, avplayer

我在 iOS 6.1 上使用 xcode 4.6 创建了一个应用程序，带有一个 TabBar 和 2 个不同的 tableView。

每个表视图从 file.plist 中读取一行，当点击一行时，您会加载一个 DetailView。DetailViewController 与 2 TableView 相同，但：

如果启动应用程序点击第一个按钮，我会看到带有我的表格和音频列表的 FirstView，如果我在列表中选择一个文件，我会加载一个详细信息视图并很好地监听我的文件，但如果现在点击 TabBar 上的第二个视图，我可以开始播放第二个视图中的其他音频文件，但我听覆盖到第一个音频和 AVplayer 不覆盖。

那里有我的编码：

从 TableView 加载 plist：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if([@"detailList" isEqualToString:segue.identifier]) {

        NSIndexPath *index = [self.tableView indexPathForCell:sender];
        [[segue destinationViewController] setSaved:[loadData objectAtIndex:index.row]];
    }
} 
```

在详细视图中：

```
 if (mysound.rate == 1.0) {

        UIImage *img = [UIImage imageNamed:@"Play_BT.png"];
        [control setImage:img forState:UIControlStateNormal];
        [mysound pause];

    } else {

        UIImage *img = [UIImage imageNamed:@"Pause_BT.png"];
        [control setImage:img forState:UIControlStateNormal];

        NSURL *url = [NSURL URLWithString:[saved objectForKey:@"audio"]];
        mysound = [[AVPlayer alloc] initWithURL:url];
        [mysound setAllowsExternalPlayback:YES];
        [mysound setUsesExternalPlaybackWhileExternalScreenIsActive: YES];
        [mysound play];
    }
} 
```

这里出现问题，这段代码工作得非常好，但是如果在标签栏上点击并从其他 plist 加载其他音频，我会听音频覆盖。

如何在 Override the `NSURL *url = [NSURL URLWithString:[saved objectForKey:@"audio"]];`when change from tabbar 中使用 AVPlayer？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T17:41:00.457

已解决，使用以下代码：

在我的 AppDelegate .h 添加

```
@interface AppDelegate : UIResponder <UIApplicationDelegate> {

    AVPlayer *MyPlayer;
}

@property (strong, nonatomic) AVPlayer *MyPlayer; 
```

在我的 AppDelegate .m 里面`didFinishLaunchingWithOptions`添加

```
[MySound superclass]; 
```

现在可以直接在 .m 文件中使用此代码在所有应用程序中调用方法：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSURL *url = [NSURL URLWithString:[saved objectForKey:@"link"]];
appDelegate.MySound = [[AVPlayer alloc] initWithURL:url];
[appDelegate.MySound setAllowsExternalPlayback:YES];
[appDelegate.MySound setUsesExternalPlaybackWhileExternalScreenIsActive: YES];
[appDelegate.MySound play]; 
```

使用这种方法现在可以在 APP 中的任何位置控制 AVPlayer！

我希望这对任何人都有帮助；）

# javascript - 无法在 IOS 中选择 javascript 填充表单选项

> ID：16021101
> 
> 赞同：0
> 
> 时间：2013-04-15T17:23:14.483
> 
> 标签：javascript, html, ios, forms

我为房地产经纪人创建了一个网站，页面左侧有一个搜索表单，该表单部分由 javascript 填充，具体取决于查看者是想租房还是买房。这在桌面浏览器上完美运行，但在 iPad 上却不行。

当您单击其他一些下拉菜单时，第一个选择（买入/卖出）会突出显示。

测试站点为：[http ://test.southampton-property.com/index.php](http://test.southampton-property.com/index.php)

表单代码为：

```
<p><form method="POST" action="http://test.southampton-property.com/listing.php" name="myform"><label>I'm interested in...</p>
<p><select onChange="changeOptions()" name="de" id="searchType">
<option value="RS">Buying a Home</option>
<option value="RL">Renting a Home</option>
</select>
</label></p>
<p style="margin-top:6px"><label onclick="">Type of Property...<br />
<select name="st">
<option value="ALL">All</option>
<option value="BUNG">Bungalow</option>
<option value="COTT">Cottage</option>
<option value="FLAT" selected="selected">Flat/Apartment</option>
<option value="HOUS">House</option>
<option value="HOUS">Retirement Property</option>
<option value="STUD">Studio</option>
</select>
</label></p>
<p style="margin-top:6px"><label onclick="">Minimum Bedrooms...<br />
<select name="be">
<option value="0">Studio</option>
<option value="1">1 Bedroom</option>
<option value="2">2 Bedrooms</option>
<option value="3">3 Bedrooms</option>
<option value="4">4 Bedrooms</option>
<option value="5">5+ Bedrooms</option>
</select> </label></p>
<p style="margin-top:6px"><label onclick="">Maximum Price...<br /> <select name="pt" id="price"> <option value="75000">&pound;75,000</option> <option value="100000">&pound;100,000</option> <option value="125000">&pound;125,000</option> <option value="150000">&pound;150,000</option> <option value="200000">&pound;200,000</option> <option value="250000" selected="selected">&pound;250,000</option> <option value="300000">&pound;300,000</option> <option value="350000">&pound;350,000</option> <option value="400000">&pound;400,000</option> <option value="450000">&pound;450,000</option> <option value="500000">&pound;500,000</option> <option value="1000000">&pound;1,000,000</option> </select> </label></p>
<p><input name="SUBMIT" class="button" value="Find your ideal Property" type="submit" /></form></p> 
```

加载租金/销售数据的 javascript 是：

```
// JavaScript Document
function changeOptions()
{

var index = document.getElementById("searchType").selectedIndex;
var pt=document.getElementById("price");
if(index==1) {
pt.options[0] = new Option('\u00A3400', '400');
pt.options[1] = new Option('\u00A3500', '500');
pt.options[2] = new Option('\u00A3600', '600');
pt.options[3] = new Option('\u00A3700', '700');
pt.options[4] = new Option('\u00A3800', '800');
pt.options[5] = new Option('\u00A3900', '900');
pt.options[6] = new Option('\u00A31000', '1000');
pt.options[7] = new Option('\u00A31100', '1100');
pt.options[8] = new Option('\u00A31200', '1200');
pt.options[9] = new Option('\u00A31300', '1300');
pt.options[10] = new Option('\u00A31400', '1400');
pt.options[11] = new Option('\u00A31500', '1500');
pt.options[12] = new Option('\u00A31600', '1600');
pt.options[13] = new Option('\u00A31700', '1700');
pt.options[14] = new Option('\u00A31800', '1800');
pt.options[15] = new Option('\u00A31900', '1900');
pt.options[16] = new Option('\u00A32000', '2000');
pt.options[17] = new Option('\u00A32100', '2100');
pt.options[18] = new Option('\u00A32200', '2200');
pt.options[19] = new Option('\u00A32300', '2300');
pt.options[20] = new Option('\u00A32400', '2400');
pt.options[21] = new Option('\u00A32500', '2500');
pt.options[22] = new Option('\u00A32600', '2600');
pt.options[23] = new Option('\u00A32700', '2700');
pt.options[24] = new Option('\u00A32800', '2800');
pt.options[25] = new Option('\u00A32900', '2900');
pt.options[26] = new Option('\u00A33000', '3000');

}
else {
pt.options[0] = new Option('\u00A375,000', '75000');
pt.options[1] = new Option('\u00A3100,000', '100000');
pt.options[2] = new Option('\u00A3125,000', '125000');
pt.options[3] = new Option('\u00A3150,000', '150000');
pt.options[4] = new Option('\u00A3200,000', '200000');
pt.options[5] = new Option('\u00A3250,000', '250000');
pt.options[6] = new Option('\u00A3300,000', '300000');
pt.options[7] = new Option('\u00A3350,000', '350000');
pt.options[8] = new Option('\u00A3400,000', '400000');
pt.options[9] = new Option('\u00A3450,000', '450000');
pt.options[10] = new Option('\u00A3500,000', '500000');
pt.options[11] = new Option('\u00A31,000,000', '1000000');
pt.selectedIndex=5;

}
} 
```

我不是一个真正的程序员（只是将位拼凑在一起），因此对正在发生的事情没有深入的了解。一点知识是一件危险的事情。但是有人可以帮忙吗？我放置了 onclick="" 作为解决此问题的尝试，但这不起作用。

:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:20:58.420

是在“我感兴趣”之前的标签标签导致了麻烦。

将它移到第一个框的选择之前。

```
<p><form method="POST" action="http://test.southampton-property.com/listing.php" name="myform">I'm interested in...</p>
<p><label><select onChange="changeOptions()" name="de" id="searchType"> 
```

# android - 应用程序名称的一些文本显示在下一行

> ID：16021109
> 
> 赞同：0
> 
> 时间：2013-04-15T17:23:44.433
> 
> 标签：android, android-layout

应用程序名称的某些部分显示在主屏幕徽标下的下一行。例如：-“RockingApps”是我的应用程序名称。但是 RockingApps 的“s”在少数设备上显示在下一行。而且我没有在清单文件中找到任何属性来限制应用程序名称/标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:29:37.600

不同的设备具有不同的密度和屏幕尺寸，因此取决于设备，如果标题过长，它将溢出到下一行。如果标题要长一行，我相信将应用程序标题“Rocking Apps”设置为空格，我相信会在空格处添加一个换行符。

# java - 在 Web 部署的小程序中声明 log4j.properties

> ID：16021112
> 
> 赞同：0
> 
> 时间：2013-04-15T17:23:51.237
> 
> 标签：java, jsp, logging, applet, log4j

我有一个使用 jsp 中的小程序标记部署的小程序。我对所有要使用的库进行签名，并将它们添加到类路径中，方法是将它们包含在 applet 标记（包括 apache-log4jSigned.jar）的“归档”属性中。但是当我尝试在 tomcat 服务器中部署应用程序并运行它时，它不会产生错误。我做了一些研究，显然 log4j.property 文件也应该使用 (""archive" property) 添加到类路径中，我尝试了以下操作。archive=".., /src/log4j.properties"这不起作用。然后我尝试压缩 log.properties 文件将扩展名更改为 jar 并通过 Eclipse 的运行配置将其包含在小程序的类路径中。即使这没有帮助。但是当我在本地系统中运行小程序时，会创建日志文件。我怎样才能让它在 Web 部署中工作。如果你能提供一个例子，那就太好了。

谢谢。

更新：这是我为使其工作所做的。1）我压缩了我的属性文件 2）将扩展名从 zip 更改为 jar 3）将它与其他 jar 放在同一个文件夹中，将其与其他 jar 库一起添加到类路径中

但现在问题是..它在用户系统中创建日志文件..而不是在tomcat的文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:14:07.013

这就是我为使它工作所做的。1）我压缩了我的属性文件 2）将扩展名从 zip 更改为 jar 3）将其放在与其他 jar 相同的文件夹中，将其添加到类路径中（右键单击 Eclipse->properties->java buildpath->add jars 中的项目) 连同其他 jar 库，这是我从[http://www.coderanch.com/t/106042/vc/Eclipse-add-log-properties-classpath获得解决方案的地方](http://www.coderanch.com/t/106042/vc/Eclipse-add-log-properties-classpath)

但现在问题是..它在用户系统中创建日志文件..而不是在tomcat的文件夹中。我已经在谷歌上研究了很长一段时间，但我没有找到关于这个主题的完整讨论。

# java - 适用于 Ubuntu 12.10（Arm 安装）的 Android 模拟器？

> ID：16021113
> 
> 赞同：1
> 
> 时间：2013-04-15T17:23:54.543
> 
> 标签：java, android, eclipse, ubuntu, arm

由于可以在 arm 设备上使用 Eclipse 运行 Ubuntu 12.10（将右臂内核编译到 ubuntu 中时）编译 android 项目也很容易。

现在有谁知道如何在 Ubuntu 12.10（Ubuntu 的 ARM 安装）下从 Eclipse 运行 android 模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:26:05.883

如果您在开发机器上运行 64 位发行版，则需要使用 apt-get: 安装 ia32-libs 包：

打开终端并运行以下命令

```
apt-get install ia32-libs 
```

[http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html)

# javascript - 浏览器对 Decaf 的支持有多广泛？

> ID：16021116
> 
> 赞同：2
> 
> 时间：2013-04-15T17:24:00.753
> 
> 标签：javascript, ruby, browser, webkit

最近，我遇到了[Decaf](http://trydecaf.org/)。该实用程序将 Ruby 引入浏览器。基本上，据我阅读和理解，Decaf 在 Webkit 上有很多包装函数，可以让你操纵和玩耍它，而不是使用 Javascript。

为了实现在浏览器中安装 Ruby 的目标，已经进行了多次尝试。我知道的此类项目曾经是[Opalrb](http://opalrb.org/)。

但是，这些是否适用于较旧的浏览器。还是现有的？移动的？那些不使用 Webkit 的浏览器呢？

*PS：我没有尝试过任何一个库*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-17T18:07:40.533

Decaf 不是图书馆，几乎可以肯定不是你要找的。Decaf 在浏览器级别为 ruby​​ 提供本机支持，因此需要您的最终用户也安装 decaf。它也仅适用于 Mac。把它想象成一个新的浏览器（尽管是一个 webkit 分支），它将 ruby​​ 视为一等公民。

Opal 是一种编译器，可将 ruby​​ 代码（的子集）编译为可在所有浏览器中运行的 javascript。另外，蛋白石具有 jquery 的绑定和一个 mvc 框架，以简化开发。因此，如果您期待为大众创建 Web 应用程序，Opal 是您的最佳选择。

为了完整起见，我应该提一下，有许多比 Opal 更早的学术/实验项目都试图做类似的事情，例如。Hotruby、RubyJS 等。Opal 比这些项目开发得更加积极，并且在实际场景中投入了大量精力进行优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T05:56:55.990

Decaf 是一个新项目，它嵌入了 ruby​​，并为 ruby​​ 中的浏览器和事件提供 javascript 等效绑定。

它不适用于较旧的浏览器。

Opal 将 ruby​​ 编译为 javascript 然后运行它，但 decaf 本地运行。

# javascript - Javascript计算器在Firefox中不起作用

> ID：16021120
> 
> 赞同：0
> 
> 时间：2013-04-15T17:24:18.470
> 
> 标签：javascript, jquery, html

我有一个用于景观美化公司的简单面积计算器，它只能在 chrome、IE 和 Safari 中使用，但不能在 Firefox 中使用。有人可以告诉我问题可能是什么吗？我想这可能是一个js问题。

这是一个工作页面的链接：http: [//tinyurl.com/calc1test1](http://tinyurl.com/calc1test1)

这是html：

```
 <h4><span>Area Calculator</span></h4>
                            <div class="boxInfo contactForm">

                                      <div style="display:none"><input type="checkbox"         name="CampaignList_64585" checked="checked" value="on" /></div>
                                     <div>
                                         <label>Length:</label>
                                        <input type=text name="square_length" size="3" onChange="get_cubicyards();">
                                    </div>
                                    <div>
                                        <label>Width:</label>
                                        <input type=text name="square_width" size="3" onChange="get_cubicyards();">
                                    </div>
                                    <div>
                                        <label>Depth:</label>
                                         <input type=text name="square_depth" size="3" onChange="get_cubicyards();">
                                    </div>

                                <div class="calcbutton">

                                        <input id="contactSubmit" class="calcsubmit"  type="button" value="Get Amounts" onClick="get_cubicyards();">
                                </div>

                                    <div>
                                        <label>Cubic Yards:</label>
                                        <input type=text name="square_cuyard" onFocus="calculate_totals();this.blur();">
                                    </div> 
```

这是JS：

```
 <script language="Javascript">
    function isValidInput(strString)
    {
        //String of valid characters
        var strValidChars = '0123456789.';
        var strChar;
        var blnResult = true;
        var decimalCount = 0;

        if (strString.length == 0) return false;

        //Test strString consists of valid characters listed above
        for (i = 0; i < strString.length && blnResult == true; i++)
        {   strChar = strString.charAt(i);
            if (strValidChars.indexOf(strChar) == -1)
            {   blnResult = false; }
            if (strChar == '.')
            { decimalCount++; }
        }

        if (decimalCount > 1)
        { blnResult = false; }

        return blnResult;
    }

    function get_cubicyards()
    {   var cubicyards;

                if(  (eval('document.all.square_depth.value')) && (!isValidInput(eval('document.all.square_depth.value')))  )
                {   alert('You must enter only numeric values.'); 
                    eval('document.all.square_cuyard.value = \'\'');
                    return false; 
                }
                if(  (eval('document.all.square_length.value')) && (!isValidInput(eval('document.all.square_length.value')))  )
                {   alert('You must enter only numeric values.');                   
                    eval('document.all.square_cuyard.value = \'\'');
                    return false; 
                }
                if(  (eval('document.all.square_width.value')) && (!isValidInput(eval('document.all.square_width.value')))  )
                {   alert('You must enter only numeric values.'); 
                    eval('document.all.square_cuyard.value = \'\'');
                    return false; 
                }

                //Only make calculations if there are valid values specified for ALL necessary fields
                if (  (eval('document.all.square_depth.value')) && (eval('document.all.square_length.value')) && (eval('document.all.square_width.value'))  )
                {   cubicyards = (eval('(document.all.square_depth.value * document.all.square_length.value * document.all.square_width.value)/324')*1000)/1000;
                    eval('document.all.square_cuyard.value = '+cubicyards);
                    return true;
                }

    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:27:07.137

您正在使用 document.all 这不在 w3c 标准中。您可以将 id 添加到输入字段，然后使用 w3c 标准获取它们的值：

```
document.getElementById('[id name here]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:28:02.867

`if( (eval('document.all.square_depth.value')) && (!isValidInput(eval('document.all.square_depth.value'))) )`

快速的回答是 Firefox 不支持[`document.all`](http://jszen.blogspot.com/2005/08/firefox-documentall-caveat.html).

但是，嗯，长答案是这段代码不完整。您可能想要插入`form`标签，以便您可以执行跨浏览器代码，例如...

```
<form name='myForm'>
    <h4>Area Calculator</h4>
    <div class="boxInfo contactForm">
        <div style="display:none"><input type="checkbox" name="CampaignList_64585" checked="checked" value="on" /></div>
        <div>
            <label>Length:</label>
            <input type="text" name="square_length" size="3" onchange="get_cubicyards();">
        </div>
        <div>
            <label>Width:</label>
            <input type="text" name="square_width" size="3" onchange="get_cubicyards();">
        </div>
        <div>
            <label>Depth:</label>
            <input type="text" name="square_depth" size="3" onchange="get_cubicyards();">
        </div>
        <div class="calcbutton">
            <input id="contactSubmit" class="calcsubmit" type="button" value="Get Amounts" onclick="get_cubicyards();">
        </div>

        <div>
            <label>Cubic Yards:</label>
            <input type="text" name="square_cuyard" onfocus="calculate_totals();this.blur();">
        </div>
    </div>
</form> 
```

...

```
function get_cubicyards() { 
    var cubicyards,
        myForm = document.forms['myForm'];

    if (isNaN(myForm.elements['square_length'].value ))    {
        alert('You must enter only numeric values.'); 
    } else {
        // ... more checks and logic                
    } 
} 
```

老实说，对于跨浏览器不友好的代码，其他人已经指出这种奇怪的用法，**不**，潜在的矫枉过正，无缘无故的嵌套等等，你可能会真正受益于放慢速度并遵循一些介绍性教程（[这个](http://www.w3schools.com/js/js_form_validation.asp)不是很好，但只是一个开始）在问太多问题之前。`eval`[`isNaN`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)`div``span``h4`

我们都从某个地方开始！祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:29:43.930

Firefox 控制台显示此错误：

```
[10:26:13.365] TypeError: document.all is undefined @ http://kynock.wildwingdesign.com/calctest:72 
```

您不能`document.all`在 Firefox 中使用。这里真正的问题是你的 javascript 真的很糟糕。这里应该不需要，`eval()`现在应该需要`document.all`. 只需给您的每个输入一个`id`值并使用它`documentGetElementById('yourId').value`来获取存储在输入中的值。

# sql - 在将 NUMBER ID 更改为名称时需要 SQL 查询帮助

> ID：16021122
> 
> 赞同：0
> 
> 时间：2013-04-15T17:24:22.320
> 
> 标签：sql

目前在我的查询中，我有：

```
Eml.TimeSupCZ  AS 'TKC Supervisor Name'  
 FROM  Emp INNER JOIN Eml ON (Emp.Emp = Eml.Emp) 
```

我需要做的是 TKC 主管字段 (EML.TIMESUPCZ) 我目前有 tkc 主管 ID。

我需要更改它，以便出现 NAME。

我怎么做？TKC 主管 ID 号在 EM1 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:28:23.333

将 Eml.TimeSupCZ 更改为保存名称的列的名称而不是 ID 号

# html - 冒号：在 HTML(5) 的属性名称中有效吗？

> ID：16021123
> 
> 赞同：8
> 
> 时间：2013-04-15T17:24:25.360
> 
> 标签：html

冒号 : 字符在 HTML(5) 中是有效的属性名称吗？

像这样：

```
<p he:llo="world" >Hello world</p> 
```

在网上搜索后，我找到了这篇文章：

[http://razzed.com/2009/01/30/valid-characters-in-attribute-names-in-htmlxml/](http://razzed.com/2009/01/30/valid-characters-in-attribute-names-in-htmlxml/)

那说它是有效的，但他链接到这个 w3 文档：

[http://www.w3.org/TR/2000/REC-xml-20001006#NT-Name](http://www.w3.org/TR/2000/REC-xml-20001006#NT-Name)

但是这篇文章的标题是“Extensible Markup Language (XML) 1.0 (Second Edition)”——意思是XML而不是HTML。

谁能为我澄清一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T17:30:11.777

这用于 XML 命名空间，不应根据您引用的文档用于其他目的：

> XML 建议中的命名空间 [XML 名称] 为包含冒号字符的名称分配了含义。因此，作者不应在 XML 名称中使用冒号，除非是出于命名空间的目的，但 XML 处理器必须接受冒号作为名称字符。

[HTML5 支持 XML 模式和非 XML 模式](http://www.w3.org/TR/html5-diff/#syntax)。除了命名空间分隔符之外，我会远离冒号。

# c# - 无法写入 USB HID 设备

> ID：16021126
> 
> 赞同：0
> 
> 时间：2013-04-15T17:24:40.970
> 
> 标签：c#, usb, hid

我正在尝试写入 USB HID 设备。

我的代码曾经在 32 位 XP 上工作，但由于不好，我正在 64 位 Windows 7 上尝试。我可以找到设备，获取它的路径，使用`CreateFile`win32 API 函数打开一个句柄并将其传递给 FileStream。到目前为止一切似乎都很好。然后我将数据写入流中，USB 设备什么也不做。

我怎样才能找出为什么它没有做任何事情然后希望让它做一些事情？

这是我的导入签名：

```
 [DllImport("kernel32.dll", SetLastError = true)]
    public static extern SafeFileHandle CreateFile(
        [MarshalAs(UnmanagedType.LPStr)] string name,
        uint access,
        int shareMode,
        IntPtr security,
        int creationFlags,
        int attributes,
        IntPtr template); 
```

调用函数：

```
var handle = usb.Win32Wrapper.CreateFile(path, usb.Win32Wrapper.GENERIC_READ | usb.Win32Wrapper.GENERIC_WRITE, 0, IntPtr.Zero, usb.Win32Wrapper.OPEN_EXISTING, usb.Win32Wrapper.FILE_FLAG_OVERLAPPED, IntPtr.Zero); 
```

打开设备的 FileStream：

```
_main = new FileStream(handle, FileAccess.Write, 1, true); 
```

最后写入文件：

```
_main.Write(buffer,0,buffer.Length); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T13:33:12.843

如果不知道您的设备的具体情况，很难说。

您是否确认可以与设备通信（[hidapi](http://www.signal11.us/oss/hidapi/)、[HIDSharp](http://www.zer7.com/software.php?page=hidsharp)等）？没有什么说 USB HID 设备在时间结束之前无法回复 NAK，在这种情况下，您的发送将永远不会完成。

当我第一次尝试通过 HID 进行通信时遇到的问题（我已经使用 Windows 7 有一段时间了，所以我不能说 XP 是否有相同的限制）：

(1) 确保包含一个报告 ID 字节。即使您的设备不支持，Windows 也需要报告 ID 0。

(2) 在 Windows 上，您的缓冲区需要与最大报告的长度相同。例如，如果您的报告是 48 字节，则需要写入 49 字节（始终以报告 ID 开头）。如果我不这样做，我似乎记得会出现写入错误。

既然你提到了 64 位 Windows...

(3) 我遇到的一个 64 位 Windows*特定*问题是（从 .NET 2.0 和 4.0 开始）64 位 P/Invoke 不会将 OVERLAPPED 结构（或就此而言的 NativeOverlapped）视为 blittable。因此，如果您使用“ref OVERLAPPED”，它将制作副本、P/Invoke 并复制回来。重叠操作假设内存没有移动，所以这是一个真正的问题——GetOverlappedResult 将完全错误，你会得到微妙的内存损坏等。你可以用 fixed() 或 stackalloc 解决这个问题——这是一个提醒 ref T 与 T* 不同，即使结构是在堆栈上分配的。

希望这三个中的至少一个可以解决您的问题。:)

詹姆士

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-14T08:42:33.077

-------------------------------打印条码---------------

```
private int PrintBarcode(string barcode, string printFormat, int printCount)
    {
        string text = "B400,50,1,1,2,1,150,B,";
        if (printFormat != null)
        {
            text = printFormat;
        }
        string barcod = string.Concat(new object[]
        {
            text,
            Convert.ToChar(34),
            barcode,
            Convert.ToChar(34),
            "\n"
        });

        string printerName= ConfigurationManager.AppSettings["PrinterName"];

        int x = 100;
        int y = 0;
        using (EtiquetaTestCommand1 etiquetaTestCommand = new EtiquetaTestCommand1(new Size(500, 750), 19, new Point(x, y), printCount, barcod))
        {
            string commandString = ((ICommand)etiquetaTestCommand).GetCommandString();

            //var sb1 = new StringBuilder();
           // sb1.AppendLine();
           // sb1.AppendLine("N");
           // sb1.AppendLine("Q750,19");
           // sb1.AppendLine("q500");
           // sb1.AppendLine("R100,0");
           // sb1.AppendLine(barcod);
           // sb1.AppendLine("P1");

            RawPrinterHelper.SendStringToPrinter(printerName, commandString.ToString());

        } 
```

----------------------------------EtiquetaTestCommand1 --------------- ------------

```
internal sealed class EtiquetaTestCommand1 : Label, IDisposable
{
    private Bitmap _bmp;

    internal EtiquetaTestCommand1(Size size, int gapLength, Point referencePoint, int numberCopies, string barcod) : base(size, gapLength, referencePoint, numberCopies, barcod)
    {
        int x = 5;
        int y = 5;
        ((IComplexCommand)this).AddCommand(BarCodeCommand.Code128ModeABarCodeCommand(x, y, barcod));
    }

    ~EtiquetaTestCommand1()
    {
        this.Dispose(false);
    }

    private void Dispose(bool disposing)
    {
        if (disposing)
        {
        }
    }

    void IDisposable.Dispose()
    {
        this.Dispose(true);
    }
} 
```

----------打印机名--------------

```
<add key="PrinterName" value="ZDesigner LP 2844"/> 
```

-----------------SendStringToPrinter----------

```
public class RawPrinterHelper
    {
        // Structure and API declarions:
        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
        public class DOCINFOA
        {
            [MarshalAs(UnmanagedType.LPStr)]
            public string pDocName;
            [MarshalAs(UnmanagedType.LPStr)]
            public string pOutputFile;
            [MarshalAs(UnmanagedType.LPStr)]
            public string pDataType;
        }
        [DllImport("winspool.Drv", EntryPoint = "OpenPrinterA", SetLastError = true, CharSet = CharSet.Ansi, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool OpenPrinter([MarshalAs(UnmanagedType.LPStr)] string szPrinter, out IntPtr hPrinter, IntPtr pd);

        [DllImport("winspool.Drv", EntryPoint = "ClosePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool ClosePrinter(IntPtr hPrinter);

        [DllImport("winspool.Drv", EntryPoint = "StartDocPrinterA", SetLastError = true, CharSet = CharSet.Ansi, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool StartDocPrinter(IntPtr hPrinter, Int32 level, [In, MarshalAs(UnmanagedType.LPStruct)] DOCINFOA di);

        [DllImport("winspool.Drv", EntryPoint = "EndDocPrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool EndDocPrinter(IntPtr hPrinter);

        [DllImport("winspool.Drv", EntryPoint = "StartPagePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool StartPagePrinter(IntPtr hPrinter);

        [DllImport("winspool.Drv", EntryPoint = "EndPagePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool EndPagePrinter(IntPtr hPrinter);

        [DllImport("winspool.Drv", EntryPoint = "WritePrinter", SetLastError = true, ExactSpelling = true, CallingConvention = CallingConvention.StdCall)]
        public static extern bool WritePrinter(IntPtr hPrinter, IntPtr pBytes, Int32 dwCount, out Int32 dwWritten);

        // SendBytesToPrinter()
        // When the function is given a printer name and an unmanaged array
        // of bytes, the function sends those bytes to the print queue.
        // Returns true on success, false on failure.
        public static bool SendBytesToPrinter(string szPrinterName, IntPtr pBytes, Int32 dwCount)
        {
            Int32 dwError = 0, dwWritten = 0;
            IntPtr hPrinter = new IntPtr(0);
            DOCINFOA di = new DOCINFOA();
            bool bSuccess = false; // Assume failure unless you specifically succeed.

            di.pDocName = "My C#.NET RAW Document";
            di.pDataType = "RAW";

            // Open the printer.
            if (OpenPrinter(szPrinterName.Normalize(), out hPrinter, IntPtr.Zero))
            {
                // Start a document.
                if (StartDocPrinter(hPrinter, 1, di))
                {
                    // Start a page.
                    if (StartPagePrinter(hPrinter))
                    {
                        // Write your bytes.
                        bSuccess = WritePrinter(hPrinter, pBytes, dwCount, out dwWritten);
                        EndPagePrinter(hPrinter);
                    }
                    EndDocPrinter(hPrinter);
                }
                ClosePrinter(hPrinter);
            }
            // If you did not succeed, GetLastError may give more information
            // about why not.
            if (bSuccess == false)
            {
                dwError = Marshal.GetLastWin32Error();
            }
            return bSuccess;
        }

        public static bool SendFileToPrinter(string szPrinterName, string szFileName)
        {
            // Open the file.
            FileStream fs = new FileStream(szFileName, FileMode.Open);
            // Create a BinaryReader on the file.
            BinaryReader br = new BinaryReader(fs);
            // Dim an array of bytes big enough to hold the file's contents.
            Byte[] bytes = new Byte[fs.Length];
            bool bSuccess = false;
            // Your unmanaged pointer.
            IntPtr pUnmanagedBytes = new IntPtr(0);
            int nLength;

            nLength = Convert.ToInt32(fs.Length);
            // Read the contents of the file into the array.
            bytes = br.ReadBytes(nLength);
            // Allocate some unmanaged memory for those bytes.
            pUnmanagedBytes = Marshal.AllocCoTaskMem(nLength);
            // Copy the managed byte array into the unmanaged array.
            Marshal.Copy(bytes, 0, pUnmanagedBytes, nLength);
            // Send the unmanaged bytes to the printer.
            bSuccess = SendBytesToPrinter(szPrinterName, pUnmanagedBytes, nLength);
            // Free the unmanaged memory that you allocated earlier.
            Marshal.FreeCoTaskMem(pUnmanagedBytes);
            return bSuccess;
        }
        public static bool SendStringToPrinter(string szPrinterName, string szString)
        {
            IntPtr pBytes;
            Int32 dwCount;
            // How many characters are in the string?
            dwCount = (szString.Length + 1) * Marshal.SystemMaxDBCSCharSize;
            // Assume that the printer is expecting ANSI text, and then convert
            // the string to ANSI text.
            pBytes = Marshal.StringToCoTaskMemAnsi(szString);
            // Send the converted ANSI string to the printer.
            SendBytesToPrinter(szPrinterName, pBytes, dwCount);
            Marshal.FreeCoTaskMem(pBytes);
            return true;
        }
    } 
```

# c - linux上的动态链接库

> ID：16021129
> 
> 赞同：1
> 
> 时间：2013-04-15T17:24:43.987
> 
> 标签：c, linux, dynamic, libraries

我正在运行一个小型嵌入式 linux 系统，我的应用程序使用了一大堆动态链接库（*.SO 文件）。

我正在尝试节省磁盘空间，所以我想我可以将所有 .SO 文件压缩到一个压缩的 zip 文件中。

然后，当应用程序启动时，我会解压缩所有 .SO 文件，然后使用 dlopenext C 函数打开它们，然后在打开它们后将它们全部删除，因为静态库现在将在内存中？

从磁盘中删除 *SO 文件后，我是否仍然能够在静态库中查找和调​​用函数，它现在应该在内存中吧？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:30:38.557

在 Linux 上，即使您从磁盘中删除了某些内容，如果某些内容具有打开的句柄，它也不会真正被删除。它只会在句柄关闭时被删除。

所以答案是肯定的和否定的。是的，您可以删除它们并继续使用它们。不，它不会帮助您节省空间。

您可以检查 UPX ( [http://upx.sourceforge.net](http://upx.sourceforge.net) ) 是否适用于您的目标平台。它可能有助于降低磁盘大小。

另一种减少代码大小的方法是静态构建。如果在您的情况下这是一个选项，那么这将允许您进行死代码剥离。您首先将每个库构建为静态存档并使用：

```
-fdata-sections -ffunction-sections
```

GCC 选项。对于您的最终可执行文件，您将使用这两个选项以及此链接器选项：

```
-Wl,--gc-部分
```

同样，这只会在构建静态库时真正有帮助。动态库不能被删除死代码（原因很明显；目前还不知道您的可执行文件正在使用库的哪些部分。）

当然，仅对您当前与可执行文件一起提供的库执行此操作。不要静态链接到系统库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:30:19.950

在大多数 *ix 实现中，文件系统上存在一个文件，直到没有更多打开的引用或指向它的链接。因此，虽然删除文件可能会使其看起来消失（不显示在 中`ls`），但这可能并不意味着磁盘空间已被释放。

# javascript - 交换选择下拉 id

> ID：16021131
> 
> 赞同：0
> 
> 时间：2013-04-15T17:24:44.910
> 
> 标签：javascript, html, drop-down-menu, jqgrid

我在 jqgrid 中使用了一个选择下拉列表。当服务调用成功时，我需要交换选择下拉列表的 ID。我需要这样做::

```
document.getElementById(lastRowId+"_selectId") = document.getElementById(actualId+"_selectId") 
```

但是我收到一个错误警报，例如 :: Left side of assignment is not a reference 任何人都可以为此提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:30:09.507

使用您的代码，您不会交换 ID。`document.getElementById(lastRowId+"_selectId")`返回元素。您可以直接设置ID，如`document.getElementById(lastRowId+"_selectId").id = 'newid'`

尝试这个：-

```
var id = lastRowId+"_selectId";
var id2= actualId+"_selectId";
var elem1 = document.getElementById(id);
var elem2 = document.getElementById(id2);
elem1.id =id2;
elem2.id =id ; 
```

# itextsharp - 在 itextsharp 中找不到标记

> ID：16021133
> 
> 赞同：2
> 
> 时间：2013-04-15T17:24:52.260
> 
> 标签：itextsharp

我正在使用 iTextSharp 版本。5.4.1。我正在尝试从 HTML 生成 PDF。下面粘贴的代码行给出了一个错误**，名称“标记”在当前上下文中不存在**。这适用于 itextSharp ver 5.2.1。有些人可以告诉 **标记**属于 5.4.1 版中的哪个类。

```
 document.Add(new Header(**Markup**.HTML_ATTR_STYLESHEET, string.Empty)); 
```

代码 ：

```
 /// <summary>
        /// Renders the PDF to an array of bytes
        /// </summary>
        public byte[] RenderPdf()
        {

            //Document is inbuilt class, available in iTextSharp
            MemoryStream file = new MemoryStream();
            Document document = new Document(this.PageSize);
            PdfWriter writer = PdfWriter.GetInstance(document, file);

            //allow modifications of the document
            if (this.BeforeRender is RenderEvent)
            {
                this.BeforeRender(writer, document);
            }

            //header
            document.Add(new Header(Markup.HTML_ATTR_STYLESHEET, string.Empty));
            document.Open();

            //render each page that has been added
            foreach (HtmlPdfPage page in this._Pages)
            {
                document.NewPage();

                //generate this page of text
                MemoryStream output = new MemoryStream();
                StreamWriter html = new StreamWriter(output, Encoding.UTF8);

                //get the page output
                html.Write(string.Concat(HtmlToPdfBuilder.DOCUMENT_HTML_START, page._Html.ToString(), HtmlToPdfBuilder.DOCUMENT_HTML_END));
                html.Close();
                html.Dispose();

                //read the created stream
                MemoryStream generate = new MemoryStream(output.ToArray());
                StreamReader reader = new StreamReader(generate);
                foreach (var item in (IEnumerable)HTMLWorker.ParseToList(reader, this._Styles))
                {
                    document.Add((IElement)item);
                }

                //cleanup these streams
                html.Dispose();
                reader.Dispose();
                output.Dispose();
                generate.Dispose();

            }

            //after rendering
            if (this.AfterRender is RenderEvent)
            {
                this.AfterRender(writer, document);
            }

            //return the rendered PDF
            document.Close();
            return file.ToArray();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-02T14:13:33.407

尝试这个：

```
private const string HTML_ATTR_STYLESHEET = "stylesheet";

document.Add(new Header( HTML_ATTR_STYLESHEET, string.Empty)); 
```

# http - http 永久和临时重定向如何在表单提交场景中工作

> ID：16021134
> 
> 赞同：0
> 
> 时间：2013-04-15T17:24:53.117
> 
> 标签：http, http-headers

假设我在 www.example.com/registration.php 中有一个表单，表单提交到 www.example.com/process.php 并重定向到 www.example.com/welcome.php。因此，当我单击提交时，会生成一个发布响应并将其发送到 process.php。从那里发送重定向代码让我们说 301（永久）作为位置 www.example.com/welcome.php 的响应。我的问题 1) 在维基百科中它说

> 如果响应 GET 或 HEAD 以外的任何类型的请求而收到 301（或 302 中的相同情况，对于 303,307）状态码，客户端必须在重定向之前询问用户

所以如果我提交，我应该被要求确认，但这永远不会发生它直接进入welcome.php页面

2) 301-permanent 和 302(also 303, 307) - 用于上述表单提交场景时的临时重定向有什么区别

3）我不能真正从以下得到它

> > HTTP 响应状态代码 301 Moved Permanently 用于永久重定向，这意味着使用收到 301 Moved Permanently 响应的 URL 的当前链接或记录应更新为响应的 Location 字段中提供的新 URL。此状态代码应与位置标头一起使用。RFC 2616 规定：如果客户端具有链接编辑功能，它应该更新对请求 URI 的所有引用。

更新所有指向新 uri 的链接与浏览器（用户代理）有关。是否仅用于搜索引擎索引

最后

搜索引擎不索引临时重定向，永久重定向将当前请求 url 从重定向响应替换为新 url。搜索引擎是否也考虑了上述提交，如果我在 process.php 中给出 301 重定向响应以重定向到welcome.php，那么registration.php 将被搜索引擎索引数据库中的welcome.php 替换

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:05:27.407

通常不建议使用 301 或 302 响应来重定向任何不是 GET 或 HEAD 请求的请求，并且许多用户代理不支持这一点。

我怀疑你的术语有点混乱。据我了解，/process.php 处理来自 /registration.php 的请求并发出带有 301 状态代码的响应，要求用户代理转到 /welcome.php。您从 RFC 2616 引用的场景是服务器接收到 /process.php 的 POST 请求并将 POST 请求本身重定向到 /process_v2.php，然后处理该请求。在您的示例中，最初的 POST 实际上并未重定向，POST 的结果包含重定向到 welcome.php，然后将使用 GET 请求检索该重定向。

我不确定我是否理解您的搜索引擎问题，据我所知搜索引擎不提交表单，所以我不相信welcome.php 会被编入索引。

# bash - 打印 unicode 字符

> ID：16021137
> 
> 赞同：9
> 
> 时间：2013-04-15T17:25:02.677
> 
> 标签：bash, printf

使用 Bash，您可以使用`printf`十六进制代码

```
\xHH   byte with hexadecimal value HH (1 to 2 digits)
\uHHHH Unicode (ISO/IEC 10646) character with hex value HHHH (4 digits) 
```

例子

```
$ printf '\x26'
& 
```

但是，Unicode 示例未按预期打印

```
$ printf '\u0026'
\u0026 
```

我的 Bash 版本

```
$ echo $BASH_VERSION
4.1.10(4)-release 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T17:33:49.130

`bash`您使用的是什么版本的（`echo $BASH_VERSION`或`bash --version`）？Unicode 转义适用于`bash`4.2，但不适用于 3.2.48。我怀疑在`bash`4.0 中添加了支持。

`bash`更新：我可以确认它在4.1.2中不起作用。此功能似乎已在`bash`4.2 中添加。

更新 2：来自[bash 4.2 的发行说明](http://tiswww.case.edu/php/chet/bash/NEWS)：

> d。 `$'...'`, `echo`, 以及`printf`理解`\uXXXX`和`\UXXXXXXXX`转义序列。

# vb.net - 什么最适合跨越所有表单的 vb.net Winforms 后台工作进程？

> ID：16021140
> 
> 赞同：0
> 
> 时间：2013-04-15T17:25:06.397
> 
> 标签：vb.net, multithreading, winforms

我有一个不是 MDI 的 WinForms 应用程序，它将使用各种表单来完成用户在无线模式下执行的不同工作。我想创建一个 WiFi 信号检查器，并在状态条上为用户提供一个视觉指示器，表明他们当前的网络信号类似于（黑色、红色、黄色、绿色）。

为此，我想我想创建一个`BackgroundWorker`from`MyApplication_Startup()`并让该工作人员定期对信号质量进行采样。我需要在应用程序关闭时杀死工作人员。我将在 My 命名空间中有一个公共变量，用于所有表单都可以检查的信号质量，并且后台工作人员将每 n 秒保持更新。

我以前从来没有做过这样的事情，而且我的搜索都没有找到一个看起来很可能的解决方案。有没有人这样做过并且可能有他们愿意分享的示例代码？我不确定我的方法是否正确。

# c# - 在 Xaml 中应用触发器

> ID：16021142
> 
> 赞同：1
> 
> 时间：2013-04-15T17:25:07.893
> 
> 标签：c#, wpf, xaml

我正在尝试在单击按钮时播放 wav 声音：

我正在尝试使用 soundplayeraction 类。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.soundplayeraction.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.soundplayeraction.aspx)

这是一个 xaml 片段

```
<UserControl.Resources>

    <UserControl.Triggers>
        <EventTrigger RoutedEvent="Button.Click" SourceName="btnSave">
            <EventTrigger.Actions>
                <SoundPlayerAction Source="Media\notify.wav"/>
            </EventTrigger.Actions>
        </EventTrigger>
    </UserControl.Triggers> 
```

它不喜欢我使用 UserControl.Triggers 任何推荐的方法来解决这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:38:18.730

我使用了 Button.Trigger，这次它起作用了。

谢谢！

# clone - 克隆选项在 Vmware 播放器中不可见

> ID：16021143
> 
> 赞同：30
> 
> 时间：2013-04-15T17:25:14.840
> 
> 标签：clone, vmware, vmware-workstation, vmware-player

我是这个 vmware 播放器的新手，正在开发版本“工作站 9.0 虚拟机”。

现在我做了一个虚拟机，我想克隆它。但是当我右键单击我创建的机器时，它没有克隆选项。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-16T16:56:47.717

VMware Player 没有克隆选项。该产品设计为 VMware Workstation 的更简单版本，因此它没有 Workstation 中的许多功能。

但是，手动克隆 VM 并不难。谷歌搜索“vmware player clone”给了我几个点击，第一个是这样的： http: [//aztcs.org/meeting_notes/winhardsig/virtualmachines/vmware/Cloning_VM_in_VMwarePlayer--Windows.pdf](http://aztcs.org/meeting_notes/winhardsig/virtualmachines/vmware/Cloning_VM_in_VMwarePlayer--Windows.pdf)

总体流程是：

1.  将 VM 目录复制到新目录。
2.  启动 VMWare Player 并从中加载新的 VM（.vmx 文件）。
3.  编辑 VM 属性以重命名它。
4.  启动新的虚拟机。出现提示时，选择“我已复制 VM”。VMWare 填充修复一切。

# scope - Sublime Text：没有 CTRL + E 的 HTML 以外的其他文件中的 Emmet 选项卡处理程序？

> ID：16021147
> 
> 赞同：9
> 
> 时间：2013-04-15T17:25:24.317
> 
> 标签：scope, sublimetext2, emmet

我想在 HTML 以外的其他文件类型/语法模式中使用 Emmet。尤其是来自 Smarty 的 .tpl 文件和不同 CMS 的其他模板文件。有什么办法我也可以在这些文件中使用选项卡处理程序吗？我不喜欢在其他文件中按 CTRL + E，因为唯一的区别是文件扩展名和一些模板部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:09:39.033

Emmet 限制了某些已知文件类型的 Tab 处理程序，因为没有明智的方式与 ST 原生代码片段集成。例如，如果您尝试扩展，例如`foo`缩写，Emmet 不知道您是想将其转换为`<foo>`标签还是要扩展与此触发器关联的原生 ST 片段。所以使用一些技巧来确定你想要做什么。虽然这可能适用于 HTML，但在其他语言中它可能会因错误触发器而惹恼您。

如果您 100% 确定您的模板文件中不需要原生 ST 片段，您可以执行以下操作：打开用户的键盘映射文件（`Key Bindings — User`在 ST 中查找菜单项）并在其中添加以下代码：

```
[{
    "keys": ["tab"], 
    "command": "expand_abbreviation_by_tab", 
    "context": [
        {
            "operand": "SYNTAX SCOPE", 
            "operator": "equal", 
            "match_all": true, 
            "key": "selector"
        }, 
        {
            "match_all": true, 
            "key": "selection_empty"
        }, 
        {
            "operator": "equal", 
            "operand": false, 
            "match_all": true, 
            "key": "has_next_field"
        }, 
        {
            "operator": "equal", 
            "operand": false, 
            "match_all": true, 
            "key": "auto_complete_visible"
        }, 
        {
            "operator": "equal", 
            "operand": false, 
            "match_all": true, 
            "key": "setting.disable_tab_abbreviations_on_auto_complete"
        }, 
        {
            "match_all": true, 
            "key": "is_abbreviation"
        }
    ]
}] 
```

您的语法的范围名称在哪里`SYNTAX SCOPE`，您可以通过按 Ctrl+Shift+P (Mac) 或 Ctrl+Alt+Shift+P (PC) 在状态栏中看到它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-25T03:15:29.597

`snippets.json`您可以在 emmet 的文件夹中找到编辑(Packages\Emmet\emmet)

添加这个：

```
"tpl": {
    "extends": "html"
}, 
```

更改`tpl`为您希望启用 emmet 代码扩展的任何文件扩展名。

结尾也有例子`haml`，你可以模仿。`sass``snippets.json`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-17T09:31:02.923

您应该将新文件 snippets.json 放在 Emmet 的扩展目录中，而不是编辑原始的 snippets.json，通常是 ~/emmet，（您可以在 Emmet 的设置中将其更改为例如 ~/.atom/emmet）以获得更好的清晰度和生存能力升级/重新安装时的设置。然后只需添加部分： `{ "tpl": { "extends": "html" } }`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-02T12:00:23.153

现在你应该将 "key": "setting.disable_tab_abbreviations_on_auto_complete" 更改为 "key": "setting.disable_tab_abbreviations" 因为它的工作

# ember.js - EmberJS - 如何使用 linkTo 动态生成链接？

> ID：16021148
> 
> 赞同：6
> 
> 时间：2013-04-15T17:25:25.697
> 
> 标签：ember.js

[`link-to`](http://guides.emberjs.com/v1.13.0/templates/links/)有没有办法通过传递带有路由路径的变量来使用帮助程序动态生成链接？

例如，不要像这样对路径进行硬编码：

```
{{#linkTo "route.subroute" model}}{{model.title}}{{/linkTo}} 
```

我希望能够向[`link-to`](http://guides.emberjs.com/v1.13.0/templates/links/)助手传递一个保存路径的变量，如下所示：

```
{{#linkTo destination model}}{{model.title}}{{/linkTo}} 
```

这样做的用例是允许我合并仅通过此路径不同的模板。例如，如果有两个集合，每个集合都有不同的目的地。当使用 each 助手渲染时，模板是相同的，除了[`link-to`](http://guides.emberjs.com/v1.13.0/templates/links/).

如果我可以将这个变量保存在视图的控制器中并传递它，我可以只为两个列表使用一个模板。

我曾考虑过像这样手动构建路径：

```
<a {{bindAttr href="destination"}}>{{model.title}}</a> 
```

但这没有与路由器的集成来确定我需要的活动状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T06:21:08.593

而不是`{{linkTo}}`，您可以通过模型属性中`{{action}}`指定的路由名称来使用和处理转换事件。`destination`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T17:51:10.467

> 有没有办法通过传递带有路由路径的变量来使用 linkTo 帮助器动态生成链接？

现在不行。

> 这样做的用例是允许我合并仅通过此路径不同的模板。例如，如果有两个集合，每个集合都有不同的目的地。

同意这是一个有效的用例，我希望 linkTo 助手将来支持它。同时，由于您只有两个集合，您可以使用模板中的条件来完成此操作

```
{{#if isRouteOne}}
  {{#linkTo "routeOne.subrouteOne" model}}{{model.title}}{{/linkTo}}
{{else}}
  {{#linkTo "routeTwo.subrouteTwo" model}}{{model.title}}{{/linkTo}}
{{/if}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T19:41:29.113

还有另一个非常相似的 SO Question，我在其中[回答](https://stackoverflow.com/a/39904092/3711334)了这个问题。该解决方案可以使用帮助程序的**内联**版本`link-to`。

在这种情况下，我们将：

```
{{link-to model.title destination model}} 
```

这将被编译为：

```
<a href="#/route/subroute/3856">
  Click me
</a> 
```

# python - python中的pong程序，不能用鼠标移动桨

> ID：16021149
> 
> 赞同：0
> 
> 时间：2013-04-15T17:25:27.317
> 
> 标签：python, pygame, pong, livewires

嘿，我正在做一个家庭作业，我必须通过 pygame 和 livewire 创建一个单人乒乓球游戏。我的代码大部分都完成了，但我确实有一个问题。屏幕不会更新，因此球拍不会移动，球也不会反弹。我在桨和球上都有一个更新方法，但由于某种原因它不起作用。这是我的代码谢谢！

更新：我不得不重做一些事情，但我现在可以调用我的课程并且球会反弹，但是我无法移动桨。我不知道为什么这不起作用，因为 self.y = games.mouse.y 应该更新我的桨的 y 坐标。然而，这是我重新编辑的代码，感谢到目前为止的帮助！

```
from livewires import games, color
import random

#make screen size

games.init(screen_width = 640, screen_height = 480 , fps = 50)

class Paddle(games.Sprite):

    image = games.load_image("paddle.bmp")

    def __init__(self):
        super(Paddle, self).__init__(image = Paddle.image,x = 10, y = games.mouse.y)
        self.score = games.Text(value = 0, size = 25, color = color.black,
                                top = 20, right = games.screen.width - 8)

        games.screen.add(self.score)

        def update(self):

            self.y = games.mouse.y

            if self.top < 0:
                self.top = 0

            if self.bottom > games.screen.height:
                self.bottom = games.screen.height

"""
            self.check_hit()

            def check_hit(self):
                countdown = 0
                if countdown == 0:
                    for ball in self.overlapping_sprites:
                        self.score.value += 1
                        ball.dat_touch()
                        countdown == 10
                else: countdown -= 1
"""

class Ball(games.Sprite):

    image = games.load_image("ball.bmp")
    speed = 2

    def __init__(self, x = games.screen.height/2, y = games.screen.height/2):
        super(Ball,self).__init__(image = Ball.image,
                                  x = x, y = y,
                                  dx = Ball.speed, dy = Ball.speed)

    def update(self):
        if self.right > games.screen.width:
            self.dx = -self.dx

        if self.bottom > games.screen.height or self.top < 0:
            self.dy = - self.dy

        if self.left < 0:
            self.end_game()
            self.destroy()

    #def dat_touch(self):
        #self.dx = - self.dx
        #handles paddle touch
        #doesn't work = game_over
"""
      def end_game(self):

        end_message = games.Message(value = "Game Over",
                                    size = 90,
                                    color = color.red,
                                    x = games.screen.width/2,
                                    y = games.screen.height/2,
                                    lifetime = 5 * games.screen.fps,
                                    after_death = games.screen.quit)
        games.screen.add(end_message)

"""

def main():
    wall_image = games.load_image("background.bmp", transparent = False)
    games.screen.background = wall_image

    the_ball = Ball()

    games.screen.add(the_ball)

    the_paddle = Paddle()
    games.screen.add(the_paddle)

    games.mouse.is_visible = False
    games.screen.event_grab = True

    games.screen.mainloop()

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:27:18.920

我在这里看到一些问题：

首先，您已经定义了“Ball”和“Paddle”类，但您似乎没有使用它们。相反，您在 main() 函数中执行以下操作：

```
the_ball=games.Sprite(image=ball_image,
                      x=600,
                      y=250,
                      dx=2,
                      dy=-2) 
```

通过仅将其定义为 Sprite，您仅使用已在 LiveWire 的 Sprite 对象中定义的逻辑，完全忽略了您的 Ball 或 Bar 类。相反，您可能想要创建一个“Ball”和“Bar”对象。例如，要创建一个“Ball”对象，您可以将上面的行更改为...

```
the_ball=Ball(image=ball_image,
                      x=600,
                      y=250,
                      dx=2,
                      dy=-2) 
```

因此，您已经定义了一个 Ball 类，并且（使用我上面提供的更改代码）您将在坐标 x=600 和 y=250 处创建球。为了让这个球移动，x 和 y 坐标需要改变。例如，要将其向右移动 20 个单位，x 需要更改为 620。

因此，您需要考虑 x 和 y 坐标如何变化。查看 LiveWires 代码（如果您好奇，请在下一堂课上与您的老师讨论如何访问 LiveWires 代码）我阅读了以下内容：

```
# Some [objects] will, more specifically, move at regular intervals;
# their classes should subclass Mover (which < Timer) and
# define a moved method. 
```

所以，现在，你的 Ball 类只是继承自 Sprite ......

```
class Ball(games.Sprite):

    image = games.load_image("ball.bmp")
    speed = 2

    def __init__(self, x = 100, y = 100):
        super(Ball, self).__init__(image = Ball.image,
                                   x = x, y = y,
                                   dx = Ball.speed, dy = Ball.speed) 
```

尝试更改它，使其继承自 Sprite 和 Mover ......

```
class Ball(games.Sprite, games.Mover):

    image = games.load_image("ball.bmp")
    speed = 2

    def __init__(self, x = 100, y = 100):
        super(Ball, self).__init__(image = Ball.image,
                                   x = x, y = y,
                                   dx = Ball.speed, dy = Ball.speed) 
```

你在这里所做的是让你的对象不仅继承“Sprite”类的功能（它处理让它在屏幕上提供的坐标处绘制）而且继承“Mover”类的功能（它改变了x 和 y 值基于 dx 和 dy)。

希望这将使您开始尝试做的事情。

# design-patterns - 分页时避免重复的设计模式

> ID：16021154
> 
> 赞同：0
> 
> 时间：2013-04-15T17:25:31.560
> 
> 标签：design-patterns

我的应用程序接收来自用户的图像。

然后将这些图像显示在一个网格中，该网格使用“无限滚动”插件，这样当用户滚动到屏幕底部时，页数增加 1，API 返回下一组结果并附加它到网格。

**如何防止重复记录出现在第二组结果中？**

例如，如果许多用户在用户加载第一组和第二组之间的时间段内使用新图像更新数据库，则第二组将填充第一组中的许多项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:34:22.800

我有三个想法。

1.  让服务器记住发送给客户端的内容，并进行相应的过滤。
2.  让客户端传回当前加载的图像列表，以便服务器可以进行相应的过滤
3.  让客户端悄悄地扔掉收到的任何重复，并第二次调用服务器^以获取更多图像。

# php - 通过 JQuery 选择具有随机 ID 的元素

> ID：16021156
> 
> 赞同：3
> 
> 时间：2013-04-15T17:25:37.040
> 
> 标签：php, jquery, css

我有一个元素，它的 ID 会随机生成：

```
<?php echo "<input id='input'".uniqid()." />"?> 
```

如何通过 JQuery 访问它？我想像这样访问它：`("#input*")`. 可以在 JQuery 中使用`*`令牌吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T17:26:33.073

你可以做：

```
$("[id^='input']") 
```

请参阅开头的文档：http: [//api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T17:26:56.607

以这种方式使用[正则表达式选择器](http://api.jquery.com/attribute-starts-with-selector/)：

```
$("[id^='input']") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T17:32:08.593

如果你想像这样访问 id，`$("#input*")`你可以看看[`Attribute Contains Selector [name*="value"]`](http://api.jquery.com/attribute-contains-selector/)：

```
$('input[id*="input"]') 
```

# sqlite - Sqlite：实现一个例程来重命名包括数据类型的列

> ID：16021159
> 
> 赞同：0
> 
> 时间：2013-04-15T17:25:43.733
> 
> 标签：sqlite, system.data.sqlite

我之前问过一个类似的问题，但我没有得到我正在寻找的答案。在 Sqlite 中实现重命名列（包括数据类型）时，我需要一些帮助。

我知道整体步骤，但需要帮助来处理各种数据类型转换。1) 将表更改为 table_backup 2) 使用重命名的列（数据类型）创建所需的表“表” 3) 使用从 table_backup 中选择的 INSERT INTO 表 4) DROP table_backup

假设我从双精度转换为整数，我该如何截断数据？将双精度转换为整数只是一种情况。如何实现其他数据类型转换？如果有帮助，我正在用 C# 编程。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:59:02.320

要将双精度转换为整数，请使用`CAST`：

```
INSERT INTO MyTable(a, b, c) SELECT a, CAST(b AS INTEGER), c FROM MyTableBackup 
```

`CAST`还[支持其他数据类型](http://www.sqlite.org/lang_expr.html#castexpr)，如`TEXT`和`REAL`。

# asp.net-mvc - ASP.NET MVC 应用程序，如果从 Ipad 上的 Safari 浏览器访问应用程序，如何路由

> ID：16021160
> 
> 赞同：0
> 
> 时间：2013-04-15T17:25:50.557
> 
> 标签：asp.net-mvc, safari

我们公司 Intranet 上的我的 Web 应用程序使用 Windows 身份验证。如果通过 Safari 访问此应用程序，则 safari 浏览器不支持 windows 身份验证。

我没有此应用程序的登录/登录页面，但如果通过 Safari 浏览器访问该应用程序，我似乎必须创建一个。我可以创建身份验证页面，我需要了解，我如何检测用户是 safari 用户并路由到允许用户添加其网络凭据以进行身份​​验证的视图。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:49:27.927

您可以根据其正在使用的用户代理进行重定向。您可以使用路线约束来执行此操作。

例如，您应该创建一个自定义约束来检查用户代理。要创建路由约束，您需要创建一个实现 IRouteConstraint 的类

```
public class UserAgentConstraint : IRouteConstraint 
{ 
   private string _userAgent; 
   public UserAgentConstraint(string userAgentParam) 
   { 
       _userAgent= userAgentParam; 
   } 

   public bool Match(HttpContextBase httpContext, Route route, string parameterName, 
                     RouteValueDictionary values, RouteDirection routeDirection) 
   { 
       return httpContext.Request.UserAgent != null && 
                          httpContext.Request.UserAgent.Contains(_userAgent); 
   } 
} 
```

然后将此约束应用于您需要的路由并将请求发送到您不需要的控制器/操作，例如：

```
public static void RegisterRoutes(RouteCollection routes) 
{ 
    routes.MapRoute("MyRoute", "{controller}/{action}", 
        new { controller = "Home", action = "LoginForIPad",
              httpMethod = new UserAgentConstraint("iPad")}); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:37:40.267

您可以使用显示模式功能，并创建仅适用于 iPad 的显示模式。要检测 iPad，请[使用此技术](https://stackoverflow.com/questions/5155479/how-do-i-check-if-the-useragent-is-an-ipad-or-iphone)。[使用此技术](http://www.devproconnections.com/article/aspnetmvc/mvc-4-mobile-display-modes-144827)创建自定义移动显示模式，您从 DefaultDisplayMode 继承并提供 ContextCondition。

我为 Opera Mobile 模拟器做了这个，你所要做的就是调整它以检查 iPad（在第一个链接中）。

```
public class OperaMobiDisplayMode : DefaultDisplayMode
{
    public OperaMobiDisplayMode()
        : base("Mobile")
    {
        ContextCondition = (context => IsMobile(context.GetOverriddenUserAgent()));
    }
} 
```

# multithreading - 为什么多核上的 goroutine 分配速度较慢？

> ID：16021165
> 
> 赞同：4
> 
> 时间：2013-04-15T17:26:04.040
> 
> 标签：multithreading, go

我在 Go 中做一些实验，我发现了一些非常奇怪的东西。当我在我的计算机上运行以下代码时，它会在 ~0.5 秒内执行。

```
package main

import (
  "fmt"
  "runtime"
  "time"
)
func waitAround(die chan bool) {
  <- die
}
func main() {
  var startMemory runtime.MemStats
  runtime.ReadMemStats(&startMemory)

  start := time.Now()
  cpus := runtime.NumCPU()
  runtime.GOMAXPROCS(cpus)
  die := make(chan bool)
  count := 100000
  for i := 0; i < count; i++ {
    go waitAround(die)
  }
  elapsed := time.Since(start)

  var endMemory runtime.MemStats
  runtime.ReadMemStats(&endMemory)

  fmt.Printf("Started %d goroutines\n%d CPUs\n%f seconds\n",
    count, cpus, elapsed.Seconds())
  fmt.Printf("Memory before %d\nmemory after %d\n", startMemory.Alloc,
    endMemory.Alloc)
  fmt.Printf("%d goroutines running\n", runtime.NumGoroutine())
  fmt.Printf("%d bytes per goroutine\n", (endMemory.Alloc - startMemory.Alloc)/uint64(runtime.NumGoroutine()))

  close(die)
} 
```

但是，当我使用`runtime.GOMAXPROCS(1)`它执行它时，它的执行速度要快得多（~0.15 秒）。谁能向我解释为什么使用更多内核运行许多 goroutine 会更慢？将 goroutine 多路复用到多个内核是否有任何重大开销？我意识到 goroutine 没有做任何事情，如果我不得不等待例程实际做某事，那可能会是另一回事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T17:34:09.183

在单核上运行时，goroutine 分配和切换只是内部核算的问题。Goroutines 永远不会被抢占，因此切换逻辑非常简单且非常快速。更重要的是，在这种情况下，您的主例程根本不会产生，因此 goroutines 在终止之前甚至都不会开始执行。你分配结构然后删除它，就是这样。*（**编辑**这可能不适用于较新版本的go，但只有1个进程肯定更有序）*

但是，当您将例程映射到多个线程上时，您会突然涉及到操作系统级别的上下文切换，这会慢几个数量级且更复杂。即使您使用多个内核，也有很多工作要做。另外，现在您的 gouroutines 可能实际上在程序终止之前正在运行。

尝试`strace`在这两种情况下运行程序，看看它的行为有何不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T17:29:41.993

衡量多核性能总是很困难，除非您有大量工作负载可以从多核工作中受益。问题是代码需要在线程和内核之间共享，这意味着虽然可能不会有很大的开销，但仍然有很大的开销，特别是对于简单的代码，会降低整体性能。

就像你提到的那样，如果你做一些 CPU 密集型的事情，那将是一个完全不同的故事。

# git - 如何在暂存环境中使用 git flow？

> ID：16021169
> 
> 赞同：28
> 
> 时间：2013-04-15T17:26:12.960
> 
> 标签：git, branching-and-merging, git-flow

我们正在使用 git-flow 来处理修补程序和功能，并带有一个开发分支和主分支（用于生产）。

向混合中添加临时分支的最简单方法是什么，以便我们可以验证从开发到生产的工作，同时仍然保持 git-flow 的有用性？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T18:31:56.733

我会说 staging 应该基于 git flow release 分支。之后`git flow release start`，`git flow release publish`您可以在该分支上开始 QA 工作，包括将其部署到暂存区。当暂存区域中的 QA 工作已经证明代码已准备好用于生产时，在生产中部署并执行`git flow release finish`.

如果您使用的是 TeamCity，您可以轻松设置服务器以检测新的远程发布分支并自动为其设置构建，[请参见此处](http://confluence.jetbrains.com/display/TCD7/Working+with+Feature+Branches)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-07T15:43:53.927

我刚刚开始使用 git flow 但恕我直言，最简单的方法是将*下一个版本*设置为`dev`分支，*将生产版本*设置为`stage`分支，然后例如：手动与`master`分支合并（您的实际生产）。

因此，如果您发布 1.2.0 版`stage`，然后在您的版本中发现错误（4 个修补程序，例如：在核心 CMS、功能 1、功能 3 和功能 4 中），那么您始终可以应用补丁，例如您最终可以使用 1.2.4 版然后最后将其合并到生产中。

更新：这种情况假设您没有回滚机制，因此您总是*添加*提交以修复、发布功能或其他任何内容。如果您确实有回滚机制，那么您无需担心生产中的错误。就在您发现错误时，使用回滚来设置以前的工作版本。例如：如果您在版本中发现错误，`1.2.3`请返回版本`1.2.2`。修复错误，`dev`然后测试`stage`并以 版本 推送到生产环境`1.2.4`。因此，您的生产将从`1.2.2`直接跳转到`1.2.4`.

# javascript - 如何将css类添加到 通过javascript函数

> ID：16021170
> 
> 赞同：0
> 
> 时间：2013-04-15T17:26:15.103
> 
> 标签：javascript, html, web

我对网络编程和 javascript 比较陌生。我习惯于在非 Web 项目中使用 as3 或 java。

我写了一些 javascript 来显示和隐藏网站上的 div。我希望显示与单击的菜单项相对应的 div 并隐藏所有其他项。

但是，代码不起作用。我已经尝试了几件事，但我显然对 javascript 不够熟悉以使其工作。

基本上我想向我希望显示的 div 添加一个 .visibleContent 类，以便 css3 过渡使其淡入，当类被删除时，css3 过渡将使其淡出。

谁能向我解释我做错了什么？我什至以正确的方式接近这个？我知道 Jquery，但我认为仅仅为此导入该库是矫枉过正的。我想使用javascript本身。

我的 html 中的链接和 div：

```
<li><a href="javascript:;" onClick='navClick("page1");'>page 1 button</a></li>
<li><a href="javascript:;" onClick='navClick("page2");'>page 2 button</a></li>

<div id="pages">
    <div id="page1">
        <p> page 1 content </p>
    </div>

    <div id="page2">
        <p> page 2 content </p>
    </div>
</div> 
```

这是javascript，请注意我已经从这里复制了hasClass、addClass和removeClass函数：dynamic [add/remove style in javascript](https://stackoverflow.com/questions/2578577/dynamically-add-remove-style-in-javascript)

```
var page1 = document.getElementById('page1');
var page2 = document.getElementById('page2');

var pageArray = new Array;
pageArray.push(page1);
pageArray.push(page2);

function hasClass(element,class) {
    return element.className.match(new RegExp('(\\s|^)'+class+'(\\s|$)'));
}

function addClass(element,class) {
    if (!this.hasClass(element,class)) element.className += " "+class;
}

function removeClass(ele,cls) {
    if (hasClass(element,class)) {
        var reg = new RegExp('(\\s|^)'+class+'(\\s|$)');
        element.className=element.className.replace(reg,' ');
    }
}

function navClick(id) {
    var e = document.getElementById(id);
    for (i = 0; i < pageArray.length; i++) {
        if (pageArray[i] == e) {
            if (!hasClass(pageArray[i], 'visibleContent')) {
                addClass(pageArray[i], 'visibleContent');
            }
        } else {
            if (hasClass(pageArray[i], 'visibleContent')) {
                removeClass(pageArray[i], 'visibleContent');    
            }
        }
    }
} 
```

这是相关的CSS：

```
 #pages div {
        opacity: 0;
        position: fixed;
        width:55%;
        height: 65%;
        top: 10%;
        left: 100%;
        background: #00FF00;
        animation fadeOutAnimation 1s linear 1; 
    }

    .visibleContent {
        opacity: 1;
        position: fixed;
        width: 55%;
        height: 65%;
        top:10%;
        left:40%;
        background: #00FF00;
        animation: fadeInAnimation 1s linear 1;
    } 
```

当我直接在 html 标记中将 .visibleContent 类添加到 div 时，内容会按原样显示，当我不将类添加到 div 时，它确实是不可见的。当我使用我的 navClick 函数尝试动态添加类时，什么也没有发生……怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:03:02.210

这是在 Firefox (Linux) 上运行的稍作修改的代码。请记住，并非所有浏览器（如 Chrome 等）都接受“纯”CSS3，并且可能需要额外的 CSS 代码。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="icon" href="favicon1.ico" type="image/x-icon">
<style type="text/css">

    .initial {
        opacity: 0;
    }

    .unvisibleContent {
        opacity: 0;
        /*position: fixed;*/
        width:55%;
        height: 65%;
        top: 10%;
        left: 100%;
        background: #00FF00;
        animation: fadeOutAnimation 1s linear 1;
        animation-iteration-count: 1;
    }

    @keyframes fadeOutAnimation
    {
        from {opacity:1;}
        to {opacity:0;}
    }

    .visibleContent {
         opacity: 1;
        /*position: fixed;*/
        width: 55%;
        height: 65%;
        top:10%;
        left:40%;
        background: #00FF00;
        animation: fadeInAnimation 1s linear 1;
        animation-iteration-count: 1;
    }
    @keyframes fadeInAnimation
    {
        from {opacity:0;}
        to {opacity:1;}
    }
</style>

</head>
<body>
<ul>
    <li><a href="javascript:;" onClick='navClick("page1");'>page 1 button</a></li>
    <li><a href="javascript:;" onClick='navClick("page2");'>page 2 button</a></li>
</ul>
<div id="pages">
    <div id="page1" class="initial">
    <p> page 1 content </p>
    </div>

    <div id="page2" class="initial">
    <p> page 2 content </p>
    </div>
</div>
<script type="text/javascript">
    var page1 = document.getElementById('page1');
    var page2 = document.getElementById('page2');

    var pageArray = new Array();
    pageArray.push(page1);
    pageArray.push(page2);

    function hasClass(element,cls) {
    return element.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
    }

    function addClass(element,cls) {
    element.className += (" "+cls);
    }

    function removeClass(ele) {
    ele.className="";
    }

    function navClick(id) {
    var e = document.getElementById(id);
    for (var i = 0; i < pageArray.length; i++) {
        if (pageArray[i] == e) {
        if (!hasClass(e, 'visibleContent')) {
            removeClass(e);
            addClass(e, 'visibleContent');
        }
        } else
        if (hasClass(pageArray[i], 'visibleContent')) {
            removeClass(pageArray[i]);
            addClass(pageArray[i], 'unvisibleContent');
        }
    }
    }
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:53:04.943

检查浏览器的错误控制台以获取错误消息。您有语法错误。（以下是从 Firebug 复制/粘贴的）。

```
function hasClass(element, class) {
SyntaxError: class is a reserved identifier 
```

这也将被[JSLint](http://jslint.com/)和[JSHint](http://jshint.com/)拾取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:35:07.077

如果您真的想在原生 javascript 中执行此操作，则需要更好的查找机制来查找 DOM 条目`'page1'`和`'page2'`.

在这里，我经常制作和使用一些糖果，通过元素对象在哪里`loop`以及`pool`正在前进和后退。`o`函数`sel()`返回一个 Array() 中所有元素的`o`属性`atr`和给定的`value`。所以你也看到了这个函数是如何工作的`loop`。`pool`我写这个是因为我还需要一些本机 javascript 来加速和缩短我在一个更大的项目中编写的一些代码。

```
var dc = document;

function byid() {
    return dc.getElementById(arguments[0]) || null;
}

function byclass() {
    var a = arguments.length == 2 ? arguments[1] : dc.all;
    return sel(a, "class", arguments[0]) || null;
}

function bytag() {
    return dc.getElementsByTagName(arguments[0], arguments[1]) || null;
}

function byname() {
    return dc.getElementsByName(arguments[0])[0] || null;
}

function taglength() {
    return bytag(arguments[0], arguments[1]).length || null;
}

function loop(o, f) {
    var l = o.length;
    for (var i = 0; l > i; i++) f(o[i]);
} //forward

function pool(o, f) {
    var l = o.length;
    for (var i = l; i--;) f(o[i]);
} //backward

function sel(o, atr, val) {
    var r = [];
    var e = 0;
    pool(o, function(o) {
        if (o.getAttribute(atr) === val) {
            r[e++] = o;
        }
    });
    return r;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T17:46:11.480

如果您不想使用 jQuery，您仍然可以使用：http: [//james.padolsey.com/jquery/#v=1.7.2&fn=hasClass](http://james.padolsey.com/jquery/#v=1.7.2&fn=hasClass) 我知道您不想包含 10k 行 js 代码只为这么简单的事情，但如果您的网站中有其他 javascript 内容，请不要犹豫。它不仅更干净，而且更安全，因为它的代码肯定很好，更短，并且任何了解 jQuery 的人都可以阅读。

# javascript - 切换纵向-横向-纵向后丢失媒体查询匹配

> ID：16021171
> 
> 赞同：9
> 
> 时间：2013-04-15T17:26:19.403
> 
> 标签：javascript, google-chrome, css, media-queries, galaxy-tab

我真的不知道该怎么办，我有一个 Galaxy Tab 2、7 英寸平板电脑，并在 Android 4.1.1 中使用 chrome 作为浏览器 (v26.0.1410.58)。我正在以纵向模式加载 Web 应用程序并且媒体查询匹配得很好，我将其切换到横向模式，并且一切正常，但是当我将其切换回纵向模式时，浏览器不会应用任何样式完全没有，并使用连接到 PC 的平板电脑 USB 调试应用程序，我可以看到 chrome 没有找到任何媒体查询的匹配项。

我正在应用的媒体查询是：

> (device-width: 600px) and (max-device-height: 1024px) and (max-width: 600px) and (min-device-height: 976px) and (orientation: portrait)

如果我在发生这种情况之后和之前在浏览器中检查设备的宽度和高度，它们也根本不会改变。

一些可能有用的数据：

> 屏幕宽度：600
> 
> 屏幕高度：976
> 
> $(窗口).width(): 600

它只发生在此设备中，我需要在此选项卡中支持该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T15:17:00.450

我没有您要测试的设备，但我通常坚持使用更简单的媒体查询。

也许只尝试最大宽度而不是设备宽度。我发现这样做加上基于百分比的布局意味着我的布局不是特定于设备的。

@media（最大宽度：600px）{ ... }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T23:45:40.930

定向媒体查询是一个真正的痛苦支持......我建议远离它们。我使用了一组非常好的媒体查询。我只是对 Zurb 的 Foundation 媒体查询进行了逆向工程。见下文...

```
// Small screens
@media only screen { }
/* Define mobile styles */

@media only screen and (max-width: 40em) { }
/* max-width 640px, mobile-only styles, use when QAing mobile issues */

// Medium screens
@media only screen and (min-width: 40.063em) { }
/* min-width 641px, medium screens */

@media only screen and (min-width: 40.063em) and (max-width: 64em) { }
/* min-width 641px and max-width 1024px, use when QAing tablet-only issues */

// Large screens
@media only screen and (min-width: 64.063em) { }
/* min-width 1025px, large screens */

@media only screen and (min-width: 64.063em) and (max-width: 90em) { }
/* min-width 1025px and max-width 1440px, use when QAing large screen-only issues */

// XLarge screens
@media only screen and (min-width: 90.063em) { }
/* min-width 1441px, xlarge screens */

@media only screen and (min-width: 90.063em) and (max-width: 120em) { }
/* min-width 1441px and max-width 1920px, use when QAing xlarge screen-only issues */

// XXLarge screens
@media only screen and (min-width: 120.063em) { }
/* min-width 1921px, xxlarge screens */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T04:10:24.373

你应该试试

```
@media only screen and (max-device-width: 600px) { /* STYLES GO HERE */}
/* styles apply only in portrait mode */

@media only screen and (min-device-width: 601px) { /* STYLES GO HERE */}
/* styles apply only in landscape mode */ 
```

如果您需要一种仅在设备**范围之间起作用的样式... Obs：****仅**当您希望样式应用于两者之一时才编写方向位。

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) { /* STYLES GO HERE */} 
```

删除您声明的其他值，它会因为高度而产生冲突。

# c# - 为什么新Form在快速移动鼠标时不粘在鼠标移动位置？

> ID：16021176
> 
> 赞同：4
> 
> 时间：2013-04-15T17:26:32.907
> 
> 标签：c#, mousecapture

我有这个事件：

```
protected override void OnMouseDown(MouseEventArgs e)
{
    mOffset = new Point(Width / 2 - e.X, Height / 2 - e.Y);
    mCurrentPoint = PointToScreen(new Point(e.X + mOffset.X, e.Y + mOffset.Y));
    mTargetPoint = mCurrentPoint;
    mTimer.Enabled = true;
} 
```

而这个事件：

```
protected override void OnMouseMove(MouseEventArgs e)
{
    mTargetPoint = PointToScreen(new Point(e.X + mOffset.X, e.Y + mOffset.Y));
    mTimer.Enabled = true;
} 
```

如果我只是快速移动鼠标，我将失去对正在移动的表单的关注，并且表单留在原地只有鼠标移动。

但是，如果我单击鼠标向下按钮，然后移动鼠标并快速使表单一直处于焦点状态。

所以我试图将两行从`OnMouseDown`事件复制到`OnMouseMove`事件：

```
mOffset = new Point(Width / 2 - e.X, Height / 2 - e.Y);
mTargetPoint = mCurrentPoint; 
```

但是一旦我将这两行移到 Move 事件中，什么都没有发生。不管我在做什么，表格根本不动。

如果需要，这是完整的表单代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Drawing.Drawing2D;
using System.IO;
using System.Drawing.Imaging;

namespace Magnifier20070401
{
    public partial class MagnifierForm : Form
    {
        public MagnifierForm()//Configuration configuration, Point startPoint)
        {
            InitializeComponent();

            //--- My Init ---
            //mConfiguration = configuration;
            FormBorderStyle = FormBorderStyle.None;

            ShowInTaskbar = false;//mConfiguration.ShowInTaskbar;
            TopMost = true;//mConfiguration.TopMostWindow;
            Width = 150;// mConfiguration.MagnifierWidth;
            Height = 150;// mConfiguration.MagnifierHeight;

            // Make the window (the form) circular
            GraphicsPath gp = new GraphicsPath();
            gp.AddEllipse(ClientRectangle);
            Region = new Region(gp);

            mImageMagnifier = ScreenVideoRecorder.Properties.Resources.magnifierGlass;

            mTimer = new Timer();
            mTimer.Enabled = true;
            mTimer.Interval = 20;
            mTimer.Tick += new EventHandler(HandleTimer);

            mScreenImage = new Bitmap(Screen.PrimaryScreen.Bounds.Width,
                                     Screen.PrimaryScreen.Bounds.Height);

            mStartPoint = new Point(500, 500);// startPoint;
            mTargetPoint = new Point(500, 500); // startPoint;

            /*if (mConfiguration.ShowInTaskbar)
                ShowInTaskbar = true;
            else
                ShowInTaskbar = false;*/
        }

        protected override void OnShown(EventArgs e)
        {
            RepositionAndShow();
        }

        private delegate void RepositionAndShowDelegate();

        private void RepositionAndShow()
        {
            if (InvokeRequired)
            {
                Invoke(new RepositionAndShowDelegate(RepositionAndShow));
            }
            else
            {
                // Capture the screen image now!
                Graphics g = Graphics.FromImage(mScreenImage);
                g.CopyFromScreen(0, 0, 0, 0, new Size(mScreenImage.Width, mScreenImage.Height));
                g.Dispose();                

                //if (mConfiguration.HideMouseCursor)
                  //  Cursor.Hide();
                //else
                    Cursor = Cursors.Cross;

                Capture = true;

                /*if (mConfiguration.RememberLastPoint)
                {
                    mCurrentPoint = mLastMagnifierPosition;
                    Cursor.Position = mLastMagnifierPosition;
                    Left = (int)mCurrentPoint.X - Width / 2;
                    Top = (int)mCurrentPoint.Y - Height / 2;
                }
                else
                {*/
                    mCurrentPoint = Cursor.Position;
                //}
                Show();
            }
        }

        void HandleTimer(object sender, EventArgs e)
        {
            float dx = /*mConfiguration.SpeedFactor*/ (float)0.35 * (mTargetPoint.X - mCurrentPoint.X);
            float dy = /*mConfiguration.SpeedFactor*/ (float)0.35 * (mTargetPoint.Y - mCurrentPoint.Y);

            if (mFirstTime)
            {
                mFirstTime = false;

                mCurrentPoint.X = mTargetPoint.X;
                mCurrentPoint.Y = mTargetPoint.Y;

                Left = (int)mCurrentPoint.X - Width / 2;
                Top = (int)mCurrentPoint.Y - Height / 2;

                return;
            }

            mCurrentPoint.X += dx;
            mCurrentPoint.Y += dy;

            if (Math.Abs(dx) < 1 && Math.Abs(dy) < 1)
            {
                mTimer.Enabled = false;
            }
            else
            {
                // Update location
                Left = (int)mCurrentPoint.X - Width / 2;
                Top = (int)mCurrentPoint.Y - Height / 2;
                mLastMagnifierPosition = new Point((int)mCurrentPoint.X, (int)mCurrentPoint.Y);
            }

            Refresh();
        }

        protected override void OnMouseDown(MouseEventArgs e)
        {
            mOffset = new Point(Width / 2 - e.X, Height / 2 - e.Y);
            mCurrentPoint = PointToScreen(new Point(e.X + mOffset.X, e.Y + mOffset.Y));
            mTargetPoint = mCurrentPoint;
            mTimer.Enabled = true;
        }

        protected override void OnMouseUp(MouseEventArgs e)
        {
            //if (mConfiguration.CloseOnMouseUp)
            //{
             /*   Close();
                mScreenImage.Dispose();
            //}

            Cursor.Show();
            Cursor.Position = mStartPoint;   */         
        }

        protected override void OnMouseMove(MouseEventArgs e)
        {
            //if (e.Button == MouseButtons.Left)
            //{
                mOffset = new Point(Width / 2 - e.X, Height / 2 - e.Y);
                mTargetPoint = PointToScreen(new Point(e.X + mOffset.X, e.Y + mOffset.Y));
                //mTargetPoint = mCurrentPoint;
                mTimer.Enabled = true;
            //} 
        }

        protected override void OnPaintBackground(PaintEventArgs e)
        {
            /*if (mConfiguration.DoubleBuffered)
            {
                // Do not paint background (required for double buffering)!
            }
            else
            {
                base.OnPaintBackground(e);
            }*/
            base.OnPaintBackground(e);
        }

        protected override void  OnPaint(PaintEventArgs e)
        {
            if (mBufferImage == null)
            {
                mBufferImage = new Bitmap(Width, Height);
            }
            Graphics bufferGrf = Graphics.FromImage(mBufferImage);

            Graphics g;

            /*if (mConfiguration.DoubleBuffered)
            {
                g = bufferGrf;
            }
            else
            {*/
                g = e.Graphics;
            //}

            if (mScreenImage != null)
            {
                Rectangle dest = new Rectangle(0, 0, Width, Height);
                int w = (int)(Width / 3.0);//mConfiguration.ZoomFactor);
                int h = (int)(Height / 3.0);//mConfiguration.ZoomFactor);
                int x = Left - w / 2 + Width / 2;
                int y = Top - h / 2 + Height / 2;

                g.DrawImage(
                    mScreenImage,
                    dest,
                    x, y,
                    w, h,
                    GraphicsUnit.Pixel);
            }

            if (mImageMagnifier != null)
            {
                g.DrawImage(mImageMagnifier, 0, 0, Width, Height);
            }

           //if (mConfiguration.DoubleBuffered)
            //{
                e.Graphics.DrawImage(mBufferImage, 0, 0, Width, Height);
            //}      
        }

        //--- Data Members ---
        #region Data Members
        private Timer mTimer;
        private Configuration mConfiguration;
        private Image mImageMagnifier;
        private Image mBufferImage = null;
        private Image mScreenImage = null;
        private Point mStartPoint;
        private PointF mTargetPoint;
        private PointF mCurrentPoint;
        private Point mOffset;
        private bool mFirstTime = true;
        private static Point mLastMagnifierPosition = Cursor.Position;
        #endregion

        private void MagnifierForm_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.Control && e.KeyCode.ToString() == "M")
            {
                this.Close();
            }
        }
    }
} 
```

在 Form1 中，我只是为表单创建一个新实例，然后我可以移动它。为什么在没有按下鼠标键的情况下快速移动鼠标时会失去焦点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:29:12.537

在你的 MouseDown 你应该把`this.Capture = true;`和在你的 MouseUp 放`this.Capture.false;`

如果您快速移动鼠标，它可能会移出窗口，默认情况下，只有鼠标所在的窗口才会收到鼠标消息。使用`Control.Capture`解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:03:08.840

这不是一个事件，它是一种方法。而且您没有获得默认行为（捕获鼠标），因为您忘记调用 base.OnMouseDown()。MSDN 库对此提出了严厉警告：

> **对继承者的说明：**
> 
> 在派生类中重写 OnMouseDown 时，请务必调用基类的 OnMouseDown 方法，以便注册的委托接收事件。

好吧，以及基类方法所做的其他事情。就像抓老鼠一样。仅当您真正知道自己在做什么时才跳过调用基类方法。这很难弄清楚，你真的需要知道基类方法的作用。它*并不*总是像触发事件一样简单。通常，类越精细，它就越有可能在基本方法中隐藏一些代码。DataGridView 是松鼠王。您可以从参考源获取该信息。

只需在方法底部添加这一行即可解决您的问题：

```
 base.OnMouseDown(e); 
```

并在 OnMouseMove() 覆盖中执行相同操作。不是因为这对于解决这个特定问题是必要的，因为文档说你应该这样做。

# javascript - IE9 无法加载大量图像而没有任何错误或解释

> ID：16021181
> 
> 赞同：1
> 
> 时间：2013-04-15T17:26:56.620
> 
> 标签：javascript, internet-explorer-9

我有一个不寻常的项目，我需要预加载 200 多个 .png 文件，以便我可以在画布中创建图像序列。这些文件加上网站的其余部分总共大约有 323 个文件。这适用于除 IE9 之外的所有浏览器。

IE9 将开始加载文件，然后停止加载**大约**180-220 个文件。它并不总是一致的。

我注意到，如果我将这些序列 PNG 放在首位，它会在这些 PNG 中的某个位置停止。如果我把它们放在最后，它实际上会加载所有其他资产，然后再次在序列 PNG 内的某个地方停止，除非在加载其他资产之后。

**我尝试过的不同事情：**

我尝试通过 for 循环使用标签加载（Image（））所有资产。这产生了一个问题，我可以看到它加载了所有文件，但它不会报告所有文件。

然后我修改了我的代码以分批加载 10 个文件，但是 image.onload 每次都没有触发，这阻碍了我的努力。

我继续使用[PreloadJS](http://www.createjs.com/#!/PreloadJS)，它使用 XHR 加载它们，现在它只是在加载时停止而没有任何信息（错误等）

我在这里开始没有想法了。我希望PNG可能有问题，它们相当大（1920x1080）。

所有这些都发生在 $(document).ready() 之后。

任何帮助表示赞赏。

# google-app-engine - 如何在 AppEngine 管理控制台中记录电子邮件详细信息？

> ID：16021184
> 
> 赞同：0
> 
> 时间：2013-04-15T17:27:02.993
> 
> 标签：google-app-engine, email, encoding, python-2.5

我从我的谷歌帐户向我的 GAE 电子邮件发送消息：

```
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: base64 
```

然后使用以下代码：

```
logging.debug('Received personal inbound mail from: %s, to: %s, subject: %s' % (mail_message.sender, mail_message.to, mail_message.subject))
body = ''
for b in mail_message.bodies('text/plain'):
    body_type, pl = b # content encoding, plain text
    if pl.encoding:
        body = pl.payload.decode(pl.encoding)
    else:
        body = pl.payload
if body:
    logging.debug('Inbound personal mail body: %s' % (body)) 
```

结果我在控制台中看到以下内容：

```
Received personal inbound mail from: Test <test@example.com>, to: test@myappid.appspotmail.com, subject: Readable russian text
Inbound personal mail body: ������, ��� �������� ��������� 
```

即主题是可读的，但正文不是。

当我检查收到的内容时，我看到以下内容：

```
text/plain, From nobody Mon Apr 15 17:15:34 2013
content-transfer-encoding: base64
MIME-Version: 1.0
Content-Type: text/plain; charset="koi8-r"

8NLJ18XULCDc1M8g1MXT1M/Xz8Ug08/Pwt3 
```

如果我做：

```
body = pl.payload.decode(pl.encoding).decode('koi8-r') 
```

然后消息正文正确显示。但是我应该如何提取编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:54:02.603

结果，我使用了以下解决方案：

```
if msg.is_multipart():
    for part in msg.walk():
        if part.get_content_type() and part.get_content_type()=='text/plain': # ignore text/html
            charset = part.get_content_charset()
            body = part.get_payload(decode=True).decode(charset)
else:
    body = msg.get_payload(decode=True)
    body = body.decode('utf-8') 
```

为了在开发人员的管理控制台中正确显示俄语文本（在 Windows 7 下）：

```
def logging_debug(what):
    ''' Function to support cp866 encoding in developers admin console
    '''
    if os.environ.get('SERVER_SOFTWARE','').startswith('Devel'):
        logging.debug(what.encode('cp866'))
    else:
        logging.debug(what) 
```

# javascript - 如何在 IE 扩展中以编程方式设置断点？

> ID：16021185
> 
> 赞同：2
> 
> 时间：2013-04-15T17:27:03.310
> 
> 标签：javascript, internet-explorer, javascript-debugger

为此做了一些功课。我看到可以`debugger`在 JavaScript 源代码中设置断点。但是，我想知道是否可以以编程方式在 IE 扩展中设置断点。比如说，一旦 IE 在某个回调函数上发现 JavaScript 源代码，我就可以通过它的 PC 或 line# 设置断点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:32:38.170

*不，除了语句**之外`debugger`*，没有任何 JavaScript 机制允许您以编程方式设置断点。您最好的选择是表达“决定”并产生`if (something) { debugger; }`风格陈述。

也就是说，IE 开发工具和其他浏览器一样，允许您*有条件*![条件断点对话框](https://i.stack.imgur.com/8pCDx.png)地设置断点。您需要做的就是在添加断点时右键单击，然后选择它是有条件的。在条件下，您可以输入任何会返回`true`结果的内容。

# android - ScrollView 下方的 EditText 框的代码？

> ID：16021188
> 
> 赞同：0
> 
> 时间：2013-04-15T17:27:23.250
> 
> 标签：android, eclipse, android-edittext, android-scrollview

嗨，我想把我的 EditText 框放在我的 ScrollView 上方，这样用户仍然可以向下滚动，但同时仍然可以在顶部的固定视图中看到 EditText 我该怎么做？//

这是我的代码

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    tools:context=".BitActivity" >

<EditText
                android:id="@+id/input"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:ems="10"
                android:gravity="center"
                android:hint="Type In Your Value"
                android:inputType="numberDecimal"
                android:textColor="#2FB3E3"
                android:textSize="30px" >
                <requestFocus />
            </EditText>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/byte1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_below="@+id/input"
                android:gravity="center"
                android:text="Please Enter a Value"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#FFFF00"
                android:textSize="40px" />

        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:09:18.063

在你的`ScrollView`你有`android:layout_alignParentTop="true"`。但是`ScrollView`s 父级的`RelativeLayout`意思是它将顶部`ScrollView`与顶部`RelativeLayout`（即屏幕顶部）对齐。

尝试用`ScrollView`这个替换你的电流::

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@id/input"
> 
```

这里的关键是这一行：`android:layout_below="@id/input"`将`ScrollView`s 顶部`View`与 id " `input`" 的底部对齐。

# c++ - C 按第一个值和第二个值将输入排序到一个链表中

> ID：16021189
> 
> 赞同：0
> 
> 时间：2013-04-15T17:27:27.527
> 
> 标签：c++, list, sorting, linked-list

在过去的几天里，我一直在为此苦苦挣扎。免责声明：这是一个家庭作业。我自己一直在努力，但我真的不知道我做错了什么。

我收到了航空公司、目的地、行李车号格式的航空公司航班行李信息列表。

我必须将此列表排序为一个新列表。新列表必须按航空公司排序，并且在每家航空公司内必须按目的地排序。

*   新加坡巴尔的摩 176
*   ATA 阿伦敦 1549
*   大陆桥港 915
*   新加坡伯克利 878
*   新加坡 利沃尼亚 1462
*   广达弗里蒙特 1610

将整理为：

*   ATA 阿伦敦 1549
*   大陆桥港 915
*   广达弗里蒙特 1610
*   新加坡巴尔的摩 176
*   新加坡伯克利 878
*   新加坡 利沃尼亚 1462

这是我现在正在使用的内容：

```
#Main.cpp#
int main()
{
    Node * head = NULL;

    ifstream fin("planes.txt");
    string airline, destination;
    int carNum;

    while(!fin.eof())
    {
        fin >> airline >> destination >> carNum;
        insertNode(airline, destination, carNum, head);
    }

    cout << endl;
    system("pause");
    return 0;
}

#Node.cpp#
void insertNode(string value1, string value2, int value3, Node *&head)
{
    Node * ptr = head;
    if (ptr == NULL || ptr->getString1() > value1)
    {
        insertAtHead(value1, value2, value3, head);
    }
    else
    {
        while (ptr->getNext() != NULL && ptr->getNext()->getString1() < value1)
        {
            ptr = ptr->getNext(); // advance to next node in list
        }
        insertValue(value1, value2, value3, ptr);
    }
}

void insertValue (string value1, string value2, int value,Node *afterMe)
{
    afterMe->setNext(new Node(value1, value2, value, afterMe->getNext()));
}

void insertAtHead (string value1, string value2, int value3,Node *&head)
{
    head = new Node(value1, value2, value3, head);
} 
```

我将省略我的 node.h，因为它只包含函数声明和简单的访问器函数。

我当前的 insertNode 函数仅按第一个值排序。这是我的 insertNode 函数的一个变体，我尝试按第一个值和第二个值开始排序。

这是相当丑陋的。即使在笔记本纸上写了几页之后，我仍然陷入了所有这些混乱之中。

```
void insertNode(string value1, string value2, int value3, Node *&head)
{
    Node * ptr = head;
    if (ptr == NULL || ptr->getString1() > value1)
    {
        insertAtHead(value1, value2, value3, head);
    }
    else
    {
        while (ptr->getNext() != NULL)  //Keep going as long as I am not at the end of the list
        {
            if (ptr->getNext()->getString1() < value1) //If Airline in list is smaller then the Airline I am adding
            {
                ptr = ptr->getNext(); //Move onto the next value in the list
            }
            else if (ptr->getNext()->getString1() == value1) //If Airline in list is equivalent to the Airline I am adding
            {
                if(ptr->getNext()->getString2() < value2)   //The airlines matched up. How do the destinations compare?
                {
                    ptr = ptr->getNext(); //If the destination in the list is less than the one I am adding, move on
                }
                else
                {
                    insertValue(value1, value2, value3, ptr); //If one I am adding is not less than the list, add it here.
                }
            }
            else
            {
                insertValue(value1, value2, value3, ptr);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:31:02.320

您需要传递一个函数对象或一个指向比较两个节点的函数的指针。

这将允许一个链表函数可以通过传递比较函数对象或指向比较函数的指针来排序。

例如，请参阅`std::sort`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:51:33.340

在不知道您的确切要求的情况下，您似乎过于复杂了。如果您只是创建一个新字符串来保存 Airline + Destination + Baggage Car 并将其插入到排序列表中，您将实现数据目标。

是否有任何理由必须将数据元素单独保存在列表行中？换句话说：

```
string strToBeSorted = strAirline;
strToBeSorted += " ";
strToBeSorted += strDestination;
strToBeSorted += " ";
strToBeSorted += strBaggageCar; 
```

然后你插入`strToBeSorted`. 这将为您提供一个可以进行字符串排序的字符串。这使得简单地对所有条目进行排序变得很简单。您将能够知道`strToBeSorted`航空公司、目的地甚至行李车按照什么顺序去哪里。

# objective-c - 尝试为 mac 构建 Evernote SDK 总是会导致错误

> ID：16021191
> 
> 赞同：1
> 
> 时间：2013-04-15T17:27:37.593
> 
> 标签：objective-c, xcode, cocoa, clang, evernote

我正在尝试[为 mac 构建 Evernote SDK，](https://github.com/holtwick/evernote-sdk-ios)但由于某种原因，Xcode 总是失败并出现以下错误：

```
clang: error: no such file or directory: '/Users/mauricio/projects/objective-c/evernote-sdk-ios/evernote-sdk-ios/EvernoteSDK-Prefix.pch'
clang: error: no input files
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

它添加了两次项目文件夹名称（请参阅**/evernote-sdk-ios/evernote-sdk-ios/EvernoteSDK-Prefix.pch**），我找不到任何地方设置这样的地方或如何修复它.

我正在使用 Xcode 4.6.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:55:32.297

支持团队最初向我指出了错误的存储库，他们现在为 Mac 版本创建了一个单独的存储库，位于[此处](https://github.com/evernote/evernote-sdk-mac)。

# android - 按钮的背景

> ID：16021195
> 
> 赞同：0
> 
> 时间：2013-04-15T17:27:48.030
> 
> 标签：android, button

在 Android 应用程序中，我想更改`Button`.

我尝试将“背景”属性从更改为`android:Drawable/btn_default_holo_light`，`#FFFF00`并根据需要获得了新颜色。缺点是形状也发生了`Button`变化：原来`Button`的边缘消失了，彩色区域变得越来越宽，完全填满了它的区域。

如何仅更改背景颜色而不更改`Button`' 的外观？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:32:42.897

您可以以编程方式设置按钮背景

```
b= (Button) findViewById(R.id.button1);
b.setBackgroundColor(Color.RED); 
```

使用自定义可绘制对象设置背景。

可绘制文件夹中的 buttonbkg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" 
    android:drawable="@drawable/pressed" />
<item  android:state_focused="false" 
    android:drawable="@drawable/normal" />
</selector> 
```

可绘制文件夹中的普通 .xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FFFFFF"/>    
<stroke android:width="3dp"
        android:color="#0FECFF" /><!-- #330000FF #ffffffff -->
<gradient 
    android:startColor="#ffffffff" 
    android:endColor="#110000FF" 
    android:angle="90"/> 

<padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
 <corners android:bottomRightRadius="7dp"
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 

 </shape> 
```

按下的.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FF1A47"/>    
<stroke android:width="3dp"
        android:color="#0FECFF"/>
<padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
<corners android:bottomRightRadius="7dp"
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
```

在你的 activity_main.xml

```
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:background="@drawable/buttonbkg" or android:background="#0EFFFF"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp"
    android:text="Click" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:31:16.617

您不能像那样更改背景颜色，因为 Button 形状是在其背景图像中定义的。如果您想要不同的颜色，则需要创建自己的背景。只需谷歌搜索“android 自定义按钮”，您就会发现大量信息和教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:31:39.397

就`android:backgroud=#FFFF00`在按钮标签内怎么样。我认为这会保留可绘制主题，因此会保留边距，但会更改颜色。或者这是你已经尝试过的？

# c# - 在没有内置轨迹渲染器的情况下制作轨迹渲染器

> ID：16021200
> 
> 赞同：-6
> 
> 时间：2013-04-15T17:28:00.767
> 
> 标签：c#, unity3d

是否可以在不使用内置轨迹渲染器的情况下使用 c# 代码跟踪游戏对象，因此是否有人拥有可以执行此操作的代码。

感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:34:57.377

您可以在[Unity Wiki](http://wiki.unity3d.com/index.php/Scripts/Effects)页面上使用一些示例。它们都是用 C# 编写的，并包含一些文档。

# jquery - Jquery从所选日期选择最近的工作日

> ID：16021204
> 
> 赞同：0
> 
> 时间：2013-04-15T17:28:17.957
> 
> 标签：jquery, html, jquery-ui, date, datepicker

我需要两件事的帮助/指导。首先，我需要知道如何从 jquery datepicker 中灰显天数，并且只返回周一到周五的天数。

我有一个简单的 HTML 表单，需要选择日期。我想允许选择一个日期。当用户输入任何单个日期（日历中任何一周的星期一到星期五）时，我想返回该周的其余日子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:37:17.767

beforeShowDay[函数](http://api.jqueryui.com/datepicker/#option-beforeShowDay)可用于启用/禁用某些日期。

```
beforeShowDay: function(dt){
    var day = dt.getDay();
    var isWeekend = (day == 6) || (day == 0);
    return [!isWeekend];
} 
```

[小提琴](http://jsfiddle.net/SKqJH/)

# ios - 压缩 iOS PDF 文件？

> ID：16021205
> 
> 赞同：2
> 
> 时间：2013-04-15T17:28:22.730
> 
> 标签：ios, pdf, compression

我做了一个可以制作PDF文件的应用程序。我只有一张图像作为基础，然后在其上叠加文本和其他图像以制作 PDF。问题是 PDF 大约 9 MB，只有一页。有没有办法将 PDF 压缩到不那么大？

```
- (IBAction)generatePdfButtonPressed:(id)sender
{
    pageSize = CGSizeMake(792, 612);
    NSString *fileName = @"Demo.pdf";
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

    [self generatePdfWithFilePath:pdfFileName];
}

- (void) drawText
{
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 0.0, 1.0);

    NSString *textToDraw = @"Text goes here";

    UIFont *font = [UIFont systemFontOfSize:22.0];

    CGRect renderingRect = CGRectMake(160, 177.82, 590, 95);

    [textToDraw drawInRect:renderingRect
                  withFont:font
             lineBreakMode:NSLineBreakByWordWrapping
                 alignment:NSTextAlignmentLeft];

}

- (void) drawImage
{
    UIImage * demoImage = [UIImage imageNamed:@"demo.png"];
    [demoImage drawInRect:CGRectMake( 0, 0, 792, 612)];
}

- (void) generatePdfWithFilePath: (NSString *)thefilePath
{
    UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

    BOOL done = NO;
    do
    {

        UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

         [self drawImage];

        [self drawText];

        done = YES;
    }
    while (!done);

    // Close the PDF context and write the contents out.
    UIGraphicsEndPDFContext();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:33:47.833

使包含图像的 PDF 更小的方法是使用该图像的 JPEG 表示。PDF 的大小取决于 JPEG 的压缩程度。我知道这一点不是通过在 iOS 中制作 PDF 而是通过在现实生活中制作 PDF。

这个问题可能对您有所帮助：[我可以对 iOS 上生成的 pdf 文件中的图像使用 JPEG 压缩吗？](https://stackoverflow.com/questions/10187549/can-i-use-jpeg-compression-for-images-in-pdf-files-generated-on-ios)

请注意 ImageIO 框架的使用，以便您可以设置压缩级别。当然，您需要进行试验以获得最佳折衷值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-28T17:22:51.477

**pod 'PDFGenerator', '~> 3.1'** 做 {

```
 let data = try PDFGenerator.generated(by: images, dpi: .default)

            debugPrint("--DataLengh: \(data.count / 1024)")

            if let doc = PDFDocument(data: data) {
                DispatchQueue.main.async {
                    completion(doc)
                }
            }

        } catch  {
            print("Func_createPdfFrom: \(error.localizedDescription)")
        } 
```

# django - 在 Django 中为表单集中的每个表单赋值

> ID：16021212
> 
> 赞同：0
> 
> 时间：2013-04-15T17:28:31.583
> 
> 标签：django, forms, dynamic, formset

我正在尝试创建一个表单集，每个表单集都包含一个输入字段。这将有一些动态数量的元素，一旦提交表单，输入的文本将作为“标签”分配给关联的对象。这可能听起来有点令人困惑，所以让我们看看我正在尝试制作的表单类：

```
class TagsForm(forms.Form):

    tags = forms.CharField()
    def __init__(self, *args, **kwargs):
        applicantId = kwargs.pop('applicantId')

    def saveTags(self):
        applicant = Applicants.objects.get(id=applicantId)
        Tag.update(applicant,tags) 
```

如您所见，我想传递申请者的 id 表单，然后在收到 post 请求后，通过调用每个表单 saveTags 来更新该申请者对象的标签。这是我正在处理的代码：

```
 ...
    applicantQuery = allApplicantsQuery.filter(**kwargs)
    TagsFormSet = formset_factory(TagsForm)
    if request.method == 'POST':
        tags_formset = TagsFormSet(request.POST, request.FILES, prefix='tags')
        if tags_formset.is_valid()
            for tagForm in tags_formset:
                tagForm.saveTags()
    else:
        tags_formset = TagsFormSet(prefix='tags')
    ... 
```

问题是我不知道如何从申请人查询查询集中创建带有 id 的初始表单集。理想情况下，我可以遍历查询集并将申请人.id 发送到每个表单，但我不确定如何执行此操作。我也觉得我应该提到表单集应该具有与申请者查询中的申请人完全相同的表单数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:30:49.977

您可以编写自定义表单集。

```
from django.forms.formsets import BaseFormSet

class TagFormSet(BaseFormSet):

    def __init__(self, *args, **kwargs):
        applicants = kwargs.pop('applicants')
        super(TagFormSet, self).__init__(*args, **kwargs)
        #after call to super, self.forms is populated with the forms

        #associating first form with first applicant, second form with second applicant and so on
        for index, form in enumerate(self.forms):
            form.applicant = applicants[index] 
```

现在您不需要覆盖`__init__`TagsForm。

现在，您的每个表格都与申请人相关联。因此，您可以删除`saveTags()`. 所以 saveTags() 变成：

```
def saveTags(self):
    #applicant was set on each form in the init of formset
    Tag.update(self.applicant, tags) 
```

您的查看代码：

```
applicantQuery = allApplicantsQuery.filter(**kwargs)

#notice we will use our custom formset now
#also you need to provide `extra` keyword argument so that formset will contain as many forms as the number of applicants
TagsFormSet = formset_factory(TagsForm, formset=TagFormSet, extra=applicantQuery.count())

if request.method == 'POST':
    tags_formset = TagsFormSet(request.POST, request.FILES, prefix='tags', applicants=applicantQuery)
    if tags_formset.is_valid()
        for tagForm in tags_formset:
            tagForm.saveTags()
else:
    tags_formset = TagsFormSet(prefix='tags', applicants=applicantQuery) 
```

# javascript - Javascript：函数链

> ID：16021214
> 
> 赞同：7
> 
> 时间：2013-04-15T17:28:37.903
> 
> 标签：javascript, node.js, function, object

***解决方案：没有。你不能这样做。用 && 链接命令并完成它。***

**tl; dr：在，如果返回 false `random.function("blah").check()`，我如何让它忽略？或者这甚至可能吗？`check()``function("blah")`**

的背景：

好的，所以我对代码感到恐惧。但我试图通过编写能让我的生活稍微轻松一点的东西来拖延。而我的边缘，我的意思是微观上。所以基本上，我的整个项目都是基于对象和插件的。（插件是包含对象的附加 .js 文件。例如，afk.js 看起来像这样：

```
global.afk = function(){};
afk.check = function(){ ... }; 
```

等等等等。通过加载那个 js 文件，我可以访问 afk 对象和其中的所有函数。可能效率不高，但它可以工作，并且可以更容易地弄清楚哪些功能正在做什么。

回到拖延症。因为我不知道加载了哪些插件，所以在一些共享的核心 .js 文件中，有这些条件语句：`if (plugin.has("afk")) { afk.check(); };`但是，我感到无聊并`plugin.has()`返回实际对象而不是 'true'，所以我可以这样做：

```
plugin.has("afk").check(); 
```

按预期工作。除非没有afk插件，否则会抛出“false has no method check”的明显错误。

就是这样。有任何想法吗？另外，如果您对任何事情有任何疑虑，请告诉我。我知道我做错了很多事情/效率低下，当我弄清楚时修复它们很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:34:32.590

返回的对象应该具有该功能，否则会出现错误。您可以做的是创建一个始终返回的基本 Object 类型。当你返回它时，它有一个空函数并且不会产生错误。

就像是：

```
var baseObj = function(){
    this.afk = function(){
        return this;
    }
    this.check = function(){
        return false;
    }
};

var advObj = new baseObj();
advObj.afk = function(){
    // extended func
    return new baseObj();
}

var a = new advObj();
a.afk("test").check(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:40:26.877

所以 jQuery 有点像这样：

`$(plugin)`-> 返回一个类似对象的集合
`.has("afk")`-> 过滤内部集合，并返回集合
`.check()`-> 在此集合上执行的操作

所以让我们做一个小例子：

```
function Wrapper(ele) {
  // make our collection
  this.coll = [ ele ];

  // function to filter
  this.has = function(filter) {
    this.coll = this.coll.filter(function(e) {
      return e === filter;
    });

    // we return ourself for chaining
    return this;
  };

  // function to execute on ourself
  this.check = function() {
    // returns actual value
    return this.coll.length;
  };
}

var $ = function(ele) {
  // wrapper around the `new` syntax
  return new Wrapper(ele);
};

console.log($('jan').has('jan').check()); // gives 1
console.log($('pietje').has('jan').check()); // gives 0 
```

很酷的是你现在可以`Wrapper`通过扩展原型从外部文件扩展你的对象：

```
Wrapper.prototype.hasNot = function(filter) { 
    /* do magic */
    return this;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T17:50:01.660

完成这项工作的一种简短而肮脏的方法是使用 && 运算符。

```
var x = {};

x.afk && x.afk();

x.afk = function () { console.log("I exist!"); };

x.afk && x.afk(); 
```

虽然不是您的最佳广泛解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T18:36:19.033

在当前的 ECMAScript 规范中，`.check()`变成无操作（以及可能存在于不存在的插件上的任何其他方法）是不可能的，因为您不能因为您发现可移植地访问未定义对象的未定义属性。

提议的[“直接代理”](http://wiki.ecmascript.org/doku.php?id=harmony%3adirect_proxies) ECMAScript API 似乎可以解决这个问题，但它还没有标准化。我还怀疑以这种方式代理您的代码效率不高，因为您（AIUI）必须让您的`.has()`函数返回一个捕获代理对象，然后必须为每个“错过”的函数调用做真正的工作。恕我直言，简单地确保条件代码根本不会运行会好得多。

因此，除了`&&`其他地方提出的方法之外，我所能提供的只是：

```
plugin.if("afk", function() {
    // put conditional code here
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T06:17:06.150

所以这就是我想出的，并最终最终使用。
与其创建一个虚拟包装器，我决定将所有
插件加载到主包装器中。所以现在，afk 是 plg.afk，与
所有其他插件一样。这让我可以编写这个包装器：

```
global.& = function(a,b) {
  var x,y,z;if (!a) return false; //if nothing, return false.
  if (a.indexOf(".") < 0) { //if value has no "."
    if (plg["data"][a]) { x = ["data",a]; } //use data function if exists
    else { x = ["basic",a]; } //else assume it's a basic function
  } else { //or if it does contain "." (such as my example, afk.check)
    x = a.split(".") //define the plugin, and the function as an array.
  }
  y = x[0],z = x[1]; //define the plugin,function as variables.
  if (!plg[y]) { return false; } //return if plugin doesn't exist.
  if (!plg[y][z]) { return false; } //return if function doesn't exist.
  if (!b) { plg[y][z](); } //if no variable, call raw function
  return plg[y]z[](b); //return function, passing an optional variable.
} 
```

所以这行得通！我可以打电话给 $("afk.check"); 它本质上是：

```
if (plugin.has("afk") && afk.hasOwnProperty("check")) { afk.check(); }; 
```

:D

我可以传递变量，并使用基本功能的快捷方式。

例如，如果我调用`$("boot");`then 它会检查引导函数的数据，如果找不到，则返回到 basic.boot();，并调用正确的函数。我可以调用数据函数并传递变量，例如在保存数据的情况下，`$("save",data);`

如果这是一个愚蠢的想法，请随时告诉我！但到目前为止它对我有用<3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T18:02:10.860

它不适用于所有浏览器，但我认为您可以创建一个虚拟类，用于`__noSuchMethod__`始终返回自身，而不是在调用不存在的方法时抛出错误。看到[这个问题](https://stackoverflow.com/questions/994143/javascript-getter-for-all-properties)。

我不知道这适用于哪些浏览器，我的总体印象是“不多”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T21:08:06.277

实际上你已经自己解决了这个问题，至少几乎是：

> 这适用于做任何事情的任何数量的功能。我正在考虑切换`plugin.has()`到 do`plugin.has("afk","check");`或类似的东西，所以不是链接函数，它只是在一个函数中。但是将变量传递给检查函数会变得很棘手。

好吧，基本上有两种方法：

```
plugin_with_afk.has("afk","check").check(100); // "check" twice
plugin_with_afk.has("afk","check")(100); // "check" not twice 
```

第一种方法实际上相当简单：`this`如果插件有“afk”则简单地返回，否则返回一个具有无操作方法的对象`check`：

```
Plugin.prototype.has = function(str, member){
    if(this.things.indexOf(str) > -1) {
        return this;
    } else {
        var tmp = {}
        tmp[member] = function(){}
        return tmp;
    }
}

plugin_with_afk.has("afk","check").check(1);     // has afk, check is there
plugin_without_afk.has("afk","check").check(2);  // has no afk, check is no-op
plugin_without_afk.has("nope","check").check(3); // has nope, check is there 
```

这还有一个很大的优势，即您不需要使用任何函数包装器等。`ReferenceError`但是，您必须指定使用的函数两次，如果您不小心使用了另一个名称，这将导致：

```
plugin_with_afk.has("afk","check").test(1); // oh oh 
```

那么你能做些什么呢？创建一个简单的函数包装器：

```
PluginWithFuncRet.prototype.has = function(str,member){
    var self = this;
    if(this.things.indexOf(str) > -1) {
        return function(){
            return self[member].apply(self, arguments);
        }
    } else {
        return function(){};
    }
}

plugin_with_afk.has("afk","check")(4);   // calls check()
plugin_without_afk.has("afk","check")(5);// no-op 
```

就是这样。请注意，您实际上应该重命名`has`为`use_if`或类似的东西，因为它现在做的事情比实际检查组件是否存在更多。

### 完整代码[（演示）](http://jsfiddle.net/XbKDh/)

```
var PluginBase = function(name, things){
    this.name = name;
    this.things = things;
}

/// First variant
var Plugin = function() {
    this.constructor.apply(this, arguments);
}
Plugin.prototype.constructor = PluginBase;

Plugin.prototype.has = function(str,member){
    if(this.things.indexOf(str) > -1) {
        return this;
    } else {
        var tmp = {}
        tmp[member] = function(){}
        return tmp;
    }
}

var plugin_with_afk = new Plugin("with afk", ["afk"]);
plugin_with_afk.check = function(val){
    console.log("hi", val, this.name);
};

var plugin_without_afk = new Plugin("w/o afk", ["nope"]);
plugin_without_afk.check = function(val){
    console.log("nope", val, this.name);
}
/// First variant demo

plugin_with_afk.has("afk","check").check(1)
plugin_without_afk.has("afk","check").check(2)
plugin_without_afk.has("nope","check").check(3)

/// Alternative
var PluginWithFuncRet = function(){
    this.constructor.apply(this, arguments);
}
PluginWithFuncRet.prototype.constructor = PluginBase;

PluginWithFuncRet.prototype.has = function(str,member){
    var self = this;
    if(this.things.indexOf(str) > -1) {
        return function(){
            return self[member].apply(self,arguments);
        }
    } else {
        return function(){}
    }
}

plugin_with_afk    = new PluginWithFuncRet("with afk",["afk"]);
plugin_with_afk.check = function(val){
    console.log("Hi",val,this.name);
}
plugin_without_afk    = new PluginWithFuncRet("w/o afk",["nope"]);
plugin_without_afk.check = function(val){
    console.log("Nope",val,this.name);
}

/// Alternative demo
plugin_with_afk.has("afk","check")(4);
plugin_without_afk.has("afk","check")(5);
plugin_without_afk.has("nope","check")(6); 
```

结果：

```
嗨 1 与 afk
不 3 w/o afk
嗨 4 与 afk
不 6 w/o afk

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-15T18:13:46.717

哦你好。[节点代理](https://github.com/samshull/node-proxy)看起来很有希望。我实际上对此一无所知，但听起来它应该让你做这种事情。

# java - 解析全名？

> ID：16021218
> 
> 赞同：1
> 
> 时间：2013-04-15T17:28:53.107
> 
> 标签：java

当用户输入多个空格时，我的程序无法正确打印出用户名，例如，如果用户打印名字后跟 2 个空格，然后是姓氏中间名，然后打印为空格，最后一个 nmae 打印？ ? 我该如何改进这个问题，以便用户输入的额外空间不计为中间名或姓氏？

```
public static void main(String[] args)
{
    Scanner sc = new Scanner(System.in);

    System.out.println("Welcome to the name parser.\n");
    System.out.print("Enter a name: ");
    String name = sc.nextLine();  

    name = name.trim();

    int startSpace = name.indexOf(" ");
    int endSpace = name.indexOflast(" ");
    String firstName = "";
    String middleName = "";
    String lastName = "";

    if (startSpace >= 0)
    {
       firstName = name.substring(0, startSpace);
       if (endSpace > startSpace)
           middleName = name.substring(startSpace + 1, endSpace);
           lastName = name.substring(endSpace + 1, name.length());

    }

    System.out.println("First Name: " + firstName);
    System.out.println("Middle Name: " + middleName);
    System.out.println("Last Name: " + lastName);

} 
```

}

输出：乔马克

```
First name: joe
Middle name: //this shouldn't print but because the user enter extra spaces after first name the spaces becomes the middle name.
Last name: mark 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T17:31:11.367

那是因为`String.indexOf(char)` [返回第一个 match 的索引](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28int%29)，所以`startSpace`和`endSpace`具有相同的值。

* * *

实现此目的的更可靠方法是拆分空格并计算结果子字符串的数量。如果有两个，则没有中间名；如果有三个 - 中的第二项`String[]`是中间名。

例如：

```
public static void extractName(String input) {
    String[] components = input.split("\\s+");

    if (components.length == 1) {
        System.out.println("The pseudonym is: " + components[0].trim());
    } else if (components.length == 2) {
        System.out.println(String.format(
                "The first name is: %s, last name is: %s ",
                components[0].trim(), components[1].trim()));
    } else if (components.length == 3) {
        System.out
                .println(String
                        .format("The first name is: %s, middle name is: %s, last name is: %s ",
                                components[0].trim(), components[1].trim(),
                                components[2].trim()));
    } else {
        System.out.println(String.format(
                "\"%s\"? I doubt it's your REAL name", input));
    }
}

public static void main(String[] args) {
    extractName("Prince");
    extractName("John Smith");
    extractName("John  M.  Smith");
    extractName("John  M. J. Smith");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T17:31:31.360

这一行：

```
int endSpace = name.indexOf(" "); 
```

应该：

```
int endSpace = name.lastIndexOf(" "); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-15T17:33:04.533

作为使用 indexOf 的替代方法，请查看[String.split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)方法。

```
String[] names = name.split(" "); 
```

然后你可以根据他们输入的名字来编写你的代码，这样他们就可以只输入他们的名字；第一和最后; 或第一个、中间和最后一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T17:31:18.603

```
int startSpace = name.indexOf(" ");
int endSpace = name.indexOf(" "); 
```

这两个将保持相同的值。

**另外一个选项**

简单的解决方案是假设名称包含三个部分。

```
int endSpace = name.lastIndexOf(" "); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-15T17:32:14.607

问题在于这两行：

```
int startSpace = name.indexOf(" ");
int endSpace = name.indexOf(" "); 
```

你要

```
int endSpace = name.lastIndefOf(" "); 
```

此外，您缺少嵌套`if`语句的括号。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-15T17:32:16.737

`startspace`并`endspace`具有相同的价值。所以，

```
 middleName = name.substring(startSpace + 1, endSpace); 
```

会给一个空的`String`。

```
lastName = name.substring(endSpace + 1, name.length()); 
```

将在第一个空格之后给出所有内容

# c# - 正则表达式删除由 < pikes > 包围的字符串

> ID：16021219
> 
> 赞同：1
> 
> 时间：2013-04-15T17:28:54.677
> 
> 标签：c#, regex, string

什么是`c#`正则表达式来替换打开和关闭 pike 之间的所有文本/字符？

例如：

```
this is an <example> that <needs> to turn into

=> this is an that to turn into 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T17:32:19.307

而不是正则表达式，我会使用像[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)这样的Html 解析器

```
string html = "this is an <example> that <needs> to turn into";
var doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);
var text = doc.DocumentNode.InnerText; 
```

但是如果你必须使用正则表达式

```
var text = Regex.Replace(html, @"\<.+\>", String.Empty); 
```

# javascript - 是否有相当于 Opera 快速拨号功能的 javascript？

> ID：16021225
> 
> 赞同：1
> 
> 时间：2013-04-15T17:29:43.300
> 
> 标签：javascript, web, download, opera

Opera 快速拨号有一个[很好的方式来检索网站的大图标](http://dev.opera.com/articles/view/opera-speed-dial-enhancements/)，如果它们存在的话。是否有任何 javascript 库可以为我提供等效功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:36:57.623

在普通的网络浏览器中，您需要某种服务器端机制。来源限制会阻止您的代码访问其他域上的内容。

要获取页面指定的图标 ( `<link rel="icon">`)，您需要下载并解析 HTML。 [htmlparser](https://github.com/tautologistics/node-htmlparser)可以为您做到这一点。

要生成未指定 a 的页面的屏幕截图`<link rel="icon">`，*必须*在服务器上完成。没有 API 可以让您对页面进行实际截图（尽管有[解决方法](http://html2canvas.hertzen.com/)），即使有，您仍然会受到 Origin 限制。

要在服务器上生成屏幕截图，[PhantomJS](http://phantomjs.org/)是您最好的选择。它是一个带有 JS API 的无头 WebKit 引擎；生成屏幕截图很[容易。](https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js)

# html - 如何在垂直线上创建阴影效果

> ID：16021229
> 
> 赞同：0
> 
> 时间：2013-04-15T17:29:59.023
> 
> 标签：html, css, shadow

我正在尝试确定是否有用于创建阴影垂直线的 css 方法，如本例所示

![在此处输入图像描述](https://i.stack.imgur.com/BVAst.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T17:36:30.183

[小提琴](http://jsfiddle.net/VKpNQ/)

只需使用`box-shadow`并使用它即可为您获得最佳结果。

```
.line {
    border-left: 2px solid black;
    height: 100px;
    display: inline-block;
    box-shadow: 2px 0px 2px #888;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T17:34:09.137

您可以为此使用盒子阴影

```
box-shadow: 1px 0px 0 blue, 2px 0px 0 red; 
```

这将在元素右侧创建 2 条线，一条为红色，另一条为蓝色

但请记住，IE8 及更低版本不支持此功能，因此我建议对其中一行使用 css 边框。

使用边框和框阴影：

```
box-shadow: 1px 0px 0 red; border-right: 1px solid blue; 
```

有关框阴影的更多信息：http: [//www.w3schools.com/cssref/css3_pr_box-shadow.asp](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)

# parsing - 语法冲突 YACC/Bison

> ID：16021240
> 
> 赞同：0
> 
> 时间：2013-04-15T17:30:48.837
> 
> 标签：parsing, compiler-construction, bison, yacc

我有一个用于解析 C 中的表达式的 YACC 语法。这些是其中的一些片段：

```
Expr: Expr COMMA Expr 
     | Assignment

Assignment: IDENTIFIER
            | Assignment COMMA Assignment

Function Call: IDENTIFIER PARENOPEN Expr PARENOPEN 
```

我基本上希望能够解析 a(p,q,r) 形式的函数调用，并检查传递的参数的数量和类型是否与函数定义中指定的匹配，以便它们减少`Expr`到标识符本身的级别。

最终发生的事情是`p,q,r`减少到`Assignment`而不是`Expr COMMA Expr`. 这是有问题的，因为我需要运行一些只能使用`Expr COMMA Expr`. 同样不可能删除该规则`Assignment COMMA Assignment`，因为它对于某些减少至关重要。有什么方法可以将在这种情况下需要做的事情硬编码到 YACC 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:53:59.757

问题是所写的语法是模棱两可的。正如您所注意到的，在解析输入`p,q`时，可以将其解析为`Expr COMMA Expr`每个`Expr`归约的位置`Assignment`（归约自`IDENTIFIER`），或者可以将其解析为`Assignment COMMA Assignment`然后归约为单个`Expr`.

你要哪个？如果您总是想要一个或另一个，只需删除您永远不想要的那个，因为它永远不会出现。如果您有时想要一个，有时又想要另一个，您需要说明在任何特定情况下**您如何知道哪个。**如果它基于上下文，那么您需要以不同的方式重构您的语法，以便您可以区分上下文，可能通过 make`Expr`和`Assignment`完全独立。

此外，您还有左右递归歧义。当你有`p,q,r`你想要它解析为`(Expr , Expr) , Expr`or `Expr , (Expr , Expr)`？同样，您需要决定在什么条件下想要哪个，并进行适当的设置。

# c++ - 计算文件 C++ 的大小

> ID：16021241
> 
> 赞同：0
> 
> 时间：2013-04-15T17:30:49.410
> 
> 标签：c++, filesize

我正在尝试使用提供的代码计算文件的大小，并将结果传递给我的文件对象。它只会在具有特定扩展名的情况下传递文件大小，这个函数完美地工作，我遇到的唯一问题是 ifile.tellg() 为每个文件大小传入 -1 的文件大小。

```
void NonRecursiveProcess(string directory)
{
    for(directory_iterator dir_end, dir(directory); dir != dir_end; ++dir) 
    { 
        path _path(*dir); 
        if(!is_directory(_path)) 
        { 
            for ( vector<ExtensionAbstract*>::iterator it = extensionsAbstract.begin() ; it != extensionsAbstract.end(); ++it)
            {
                if ( _path.file_string().substr(_path.file_string().find_last_of(".") + 1) == (*it)->GetExtension())
                {
                    std::ifstream ifile(_path.file_string(), std::ifstream::in | std::ifstream::binary );
                    ifile.seekg(0, std::ios_base::end);
                    (*it)->AddkB(ifile.tellg());
                    (*it)->AddFileCount();
                }
            }
        } 
    } 
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:46:21.500

也许[stat](http://linux.die.net/man/2/stat)会很有用（我知道这不是标准的）。

无论如何，这应该是函数的签名

```
void NonRecursiveProcess(const string &directory) 
```

将有助于您的程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:15:18.973

如果 ifstream 处于失败状态，则 istream::tellg() 返回 -1。fail 可以在 seekg() 中设置，或者更有可能在构造函数中设置——在构造之后检查 ifile 状态以查看它是否实际打开。您可能会被拒绝访问、名称传递中的错误或其他问题。

一种可能的错误来源：是不是`_path.file_string()`只返回没有绝对路径的文件名？如果是这样，ifile 构造函数可能会给你“找不到文件”。

否则， 和 的组合`ifile.seekg(0,std::ios_base::end);`应该`ifile.tellg();`在任何二进制文件上按预期工作，给出文件大小。

# python-3.x - selenium webdriver click 事件不适用于从 select2 下拉列表中选择的选项

> ID：16021246
> 
> 赞同：1
> 
> 时间：2013-04-15T17:31:11.123
> 
> 标签：python-3.x, selenium-webdriver, ui-automation

selenium webdriver click 事件不适用于从 select2 下拉列表中选择的选项。

```
sel_advertiser = Select(self.driver.find_element_by_id("brand_option"))
for option in sel_advertiser.options:
name = str(option.get_attribute("text"))
if name == advertiser_name:
    print "Found advertiser"
    option.click() 
```

在这种情况下，如果我传递了正确的广告商名称，那么它就是找到了印刷广告商。但不要从该下拉列表中选择相同的广告客户。点击后基本上什么都没有发生。

你能告诉我我在这里缺少什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T16:10:01.100

我必须使用 ActionChains 类移动到元素然后单击。然后 Select2 元素将在 Firefox 和 PhantomJS 中打开。它在 Chrome 中没有这个 hack，但我需要 PhantomJS 支持。

```
from selenium.webdriver.common.action_chains import ActionChains
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait

#Click on the element to open the dropdown
el = driver.find_element_by_id('id_to_element')
actions = ActionChains(driver)
actions.move_to_element(el)
actions.click()
actions.perform()

#Click on the correct item within the dropdown, waiting for it to load
item_to_select = 'Some text in select'

xpath = '//div[@class="select2-result-label" and' +\
    ' text()[contains(.,"%s")]]' % (item_to_select)

wait = WebDriverWait(driver, 10)
elm = wait.until(
    EC.element_to_be_clickable(
        (
            By.XPATH,
            xpath
        )
    ),
    'waiting for %s to be clickable' % (xpath)
)
elm.click() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:45:27.510

实际上没有问题。网络驱动程序无法刷新下拉列表。

你可以看到你的下拉选项被选中的最好方法是写类似

```
 option.submit(); 
```

不是一个`refresh()`，而是一个`submit()`。

PS：我遇到了同样的问题，我需要发送表单来刷新下拉列表和所有复选框。

# linux - make: *** 没有规则使目标“低于”。停止

> ID：16021252
> 
> 赞同：0
> 
> 时间：2013-04-15T17:31:20.553
> 
> 标签：linux, ubuntu, compilation, linux-mint

我对linux很陌生。我正在关注我的老师在他的网页上所说的话。我必须键入要编译的命令是在 ./cbp2-infrastructure-v2/src 下生成的。所以我把make放在/home/dkk/cbp2-infrastructure-v2/src下。它给了我一个错误：***没有规则使目标“低于”。停止。我正在运行 linux mint 14。有人可以帮帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:33:17.367

这并不是说你应该输入：

```
make under /home/dkk/cbp2-infrastructure-v2/src 
```

意思是你应该切换到那个目录并输入`make`：

```
cd /home/dkk/cbp2-infrastructure-v2/src
make 
```

或等效地：

```
make -C /home/dkk/cbp2-infrastructure-v2/src 
```

# ios - 将通用应用程序转换为仅限 iPhone

> ID：16021253
> 
> 赞同：0
> 
> 时间：2013-04-15T17:31:23.867
> 
> 标签：ios, xcode, ios-universal-app

如何在 Xcode 中将我制作的通用应用程序转换为仅限 iPhone 的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:35:14.423

在构建设置的*部署*部分中设置*目标设备系列。*

 *为了澄清，这是一个屏幕截图：

[![在此处输入图像描述](https://i.stack.imgur.com/S0Nzc.png)](https://i.stack.imgur.com/S0Nzc.png)*

# c# - AcroPDFLib 在 WindowsForms C# .NET 中从流中打开 PDF 文件

> ID：16021256
> 
> 赞同：5
> 
> 时间：2013-04-15T17:31:32.157
> 
> 标签：c#, winforms, pdf, stream

我整个下午都在寻找我的问题的答案，但没有找到:(

我正在制作一个 Windows 窗体应用程序，它的功能之一是显示存储在数据库中的文件。此文件在上传时可以标记为“只读”，这意味着它们无法下载。在这一点上，我正在努力处理 PDF 文件。我正在使用 AcroPDFLib，但我找不到从存储在数据库中的字节数组中显示文件的方法。

所以，我的问题是，有没有办法从流中打开 PDF 文件？即使它是一个插件，那是什么插件，我在哪里可以找到它？

使用 web 浏览器对象，我认为它不会起作用，因为我必须创建一些服务器端来发送到响应输出流。并在临时文件夹中创建文件......好吧，在这种情况下，我不妨允许文件下载：D

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:35:06.670

为了做你想做的事，你需要从内存流中打开文件，但是从 Adob​​e 的[Interapplication Communication API 参考中](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/iac_api_reference.pdf)我们得到只有一个 Open(...) 方法：

> **语法：**
> VARIANT_BOOL Open(BSTR szFullPath, BSTR szTempTitle);
> 
> **参数：**
> 
> szFullPath
> 要打开的文件的完整路径。
> 
> szTempTitle
> 打开文件的窗口的可选标题。如果 szTempTitle 为 NULL 或空字符串，则忽略它。否则，使用 szTempTitle 作为窗口标题。

所以我*猜想*你正在尝试做的事情不能用 Adob​​e 的库来完成。

# python - 存储对象标签对象显示在 django 管理站点中，但我已经注册了存储和标签

> ID：16021260
> 
> 赞同：0
> 
> 时间：2013-04-15T17:31:40.990
> 
> 标签：python, django

我已经编写了以下模型，但可能有问题，因为 Django 管理站点中返回的不是标签名称，而是标签对象：

```
from os import path
from django.db import models
from django.contrib import admin
from django.core.files.storage import FileSystemStorage

projectDirPath = path.dirname(path.dirname(__file__)) 
storeImageDir = FileSystemStorage(location=projectDirPath + '/couponRestApiApp/static')

class tags(models.Model):
    """ This is the tag model """
    tag = models.CharField(max_length=15)               # Tag name
    tagDescription = models.TextField()                 # Tag Description
    tagSlug = models.CharField(max_length=400)          # Extra info can be added to the existing tag using this field
    createdAt = models.DateTimeField(auto_now_add=True)
    updatedAt = models.DateTimeField(auto_now=True)

class stores(models.Model):
    """ This is the store model """
    storeName = models.CharField(max_length=15)                                          # Store Name
    storeDescription = models.TextField()                                                # Store Description
    storeURL = models.URLField()                                                         # Store URL
    storePopularityNumber = models.IntegerField(max_length=1)                            # Store Popularity Number
    storeImage = models.ImageField(upload_to=storeImageDir)                              # Store Image 
    storeSlug = models.CharField(max_length=400)                                                       # This is the text you see in the URL
    createdAt = models.DateTimeField(auto_now_add=True)                                                  # Time at which store is created
    updatedAt = models.DateTimeField(auto_now=True)                                                   # Time at which store is updated
    storeTags = models.ManyToManyField(tags)                                             # All the tags associated with the store

    def getStoreTags(self):
        p = self.storeTags.objects.all()
        return p.tag

class coupons(models.Model):
    """ This is the coupon model """
    couponValue = models.CharField(max_length=4)                              # Coupon value in RS.
    couponDescription = models.TextField()                                    # Coupon Description
    couponURL = models.URLField()                                             # Coupon click URL
    couponStore = models.ForeignKey(stores)                                   # Key of coupon to store
    tagName = models.ForeignKey(tags,on_delete=models.PROTECT)                # Tag names associated to coupon
    success = models.TextField()                                              # Count of the number of times people have made it work
    failures =  models.TextField()                                            # Count of the number of times this has failed
    lastTested = models.DateTimeField(auto_now=True)                          # When was the coupon last tested
    createdAt = models.DateTimeField(auto_now_add=True)
    updatedAt = models.DateTimeField(auto_now=True)

class app(models.Model):
    """ This is the application model which is using the API """
    appName = models.CharField(max_length=20)      # Application name
    appDomain = models.CharField(max_length=20)    # Application description
    appKey =  models.TextField()                   # Application Key 
    createdAt = models.DateTimeField(auto_now_add=True)             # Time at which Application is added is created
    updatedAt = models.DateTimeField(auto_now=True)             # Time at which Application details are updated

class subscriptions(models.Model):    
    """ These are the emails that are subscribing """  
    app =  models.CharField(max_length=20)                                # The application where the email came from
    store = models.CharField(max_length=20)                               # The optional store on which the email wants an update
    tag =   models.CharField(max_length=20)                               # The optional tag on which the email wants an update
    emailID = models.EmailField()                                         # EmailID of the registered user
    active =  models.BooleanField(default=True)                           # They may have unsubscribed
    createdAt = models.DateTimeField(auto_now_add=True)                                    # Time at user subscribed to the alerts
    updatedAt = models.DateTimeField(auto_now=True)                                    # Time at which user updated its subscription 

class tagsAdmin(admin.ModelAdmin):
    list_display = ('tag', 'tagDescription', 'tagSlug')

class storesAdmin(admin.ModelAdmin):
    list_display = ('storeName','storeDescription','storeURL',
                    'storePopularityNumber','storeImage',
                    'storeSlug','createdAt','createdAt','getStoreTags'
                    )

class couponsAdmin(admin.ModelAdmin):
    list_display = ('couponValue','couponDescription','couponValue',
                    'couponURL', 'couponStore','tagName','success',
                    'failures','createdAt','updatedAt'
                    )

class appsAdmin(admin.ModelAdmin):
    list_display = ('appName','appDomain','appKey',
                    'createdAt','updatedAt'                    
                    )

class subcriptionsAdmin(admin.ModelAdmin):
    list_display = ('app','store','tag','emailID',
                    'active','createdAt','updatedAt'
                    )

admin.site.register(tags,tagsAdmin)
admin.site.register(stores,storesAdmin)
admin.site.register(coupons,couponsAdmin)
admin.site.register(app,appsAdmin)
admin.site.register(subscriptions,subcriptionsAdmin) 
```

但是，当我使用 Django 管理站点在优惠券类别下保存数据而不是返回标签标签对象的名称时，商店也会发生同样的情况......我做错了什么......请帮帮我。我已经注册了所有条目，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:39:16.913

您必须定义 unicode 才能正确显示：

```
class tags(models.Model):
    """ This is the tag model """
    tag = models.CharField(max_length=15)               # Tag name
    tagDescription = models.TextField()                 # Tag Description
    tagSlug = models.CharField(max_length=400)          
    createdAt = models.DateTimeField(auto_now_add=True)
    updatedAt = models.DateTimeField(auto_now=True)
    def __unicode__(self):  # <-- you have to "tell" Django which field to display in admin 
        return self.tag 
```

# google-apps-script - 是否可以在 {X} 上使用 google-apps-script 作为 ms 的后端？

> ID：16021261
> 
> 赞同：-2
> 
> 时间：2013-04-15T17:31:51.047
> 
> 标签：google-apps-script, onx

我正在尝试使用 google-apps-script 作为 microsoft on{X} 的“原型质量”后端（“on{X}（发音为 'on-ex'）让您可以控制和扩展 Android 手机的功能使用 JavaScript API 对其进行远程编程”）它可以执行 ajax GET/POST，但是当我在我的 onX 脚本中尝试查询我的应用程序脚本时（应用程序脚本有点像这样[https://github.com/entaq/GoogleAppsScript/ blob/master/Android/InventoryContentService.gs](https://github.com/entaq/GoogleAppsScript/blob/master/Android/InventoryContentService.gs)）我有错误“HTTP/1.1 302 已临时移动”，并且在响应标头中的“位置”参数中有一些新的 url。我曾尝试在第二个请求中使用这个新的 url，但又出现了这个“临时移动”错误。也许ajax请求的标头中有一些设置可以让我克服重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:29:36.487

当您在 Apps 脚本中使用 ContentService 来返回文本（JSON、XML 等）时，出于安全原因，如果您捕获此 Location 标头并“GET”那个 URL，你应该可以看到 TEXT。但是，如果您在那之后获得更多重定向，我会检查您的权限（我感觉您正在被重定向到 Google 登录屏幕）。如果是这种情况，您需要调整您的权限以接受来自匿名的请求（您可以通过传回自己的 cookie 或哈希等来在脚本上实现自己的安全性）。

# ruby - 在 64 位操作系统上安装 32 位 Ruby

> ID：16021262
> 
> 赞同：2
> 
> 时间：2013-04-15T17:31:53.120
> 
> 标签：ruby, x86, 64-bit, passenger

据我所知，当我们在 64 位 Ruby 上运行 Ruby 应用程序时，它比 32 位 Ruby 消耗更多的内存，这是由于指针地址空间。

我的机器有 64GB 内存，所以为了访问全部 64GB 内存，我安装了 64 位操作系统。

1.  是否可以在 64 位操作系统上安装 32 位 Ruby？
2.  通过在 64 位操作系统上安装 32 位 Ruby，我的 32 位 Ruby 是否能够使用 64 GB RAM？
3.  在 64 位操作系统上运行 32 位 Ruby 的优缺点是什么？

我注意到在 64 位 Ruby 上运行我的 Ruby on Rails 应用程序比 32 位 Ruby 消耗更多的 RAM。我正在使用 Phusion Passenger，因此它为每个请求分叉或创建新的 Ruby 进程，因此每个单独的 Ruby 进程（用户请求）在 32 位 Ruby 中限制为 2 GB，或者整个 Ruby 进程在 32 位中仅限访问 2GB-一点鲁比。

* * *

我的 Rails 应用程序代码库很大，我计划为单个服务器中的多个客户端复制与多个 Rails 应用程序相同的代码，因此每 MB RAM 对我来说都很重要，所以如果有更多 RAM 可用，我可以为其他客户端运行其他应用程序。

有关应用程序架构的更多信息，请参阅“ [（使用 phusion 乘客 + Nginx）运行具有多个实例名称和相同端口 (80) 的相同 rails 应用程序](https://stackoverflow.com/questions/11272776/using-phusion-passenger-nginx-running-same-rails-app-with-multiple-instance)”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:17:43.730

> 是否可以在 64 位操作系统上安装 32 位 Ruby？

1.  对的，这是可能的。

    * * *

> 通过在 64 位操作系统上安装 32 位 Ruby，我的 32 位 Ruby 是否能够使用 64 GB RAM？

2.  不，它无法访问 64 GB RAM。32 位进程默认限制为 2 GB，如果标记为 LARGE_ADDRESS_AWARE，则最大为 3，但不会更多。

    * * *

> 在 64 位操作系统上运行 32 位 Ruby 的优缺点是什么？

3.  缺点：您的内存限制为 2 GB。

    * * *

不过，你什么都不担心。从 32 位（4 字节）到 64 位（8 字节）的指针大小仅影响指针。如果您有 64 GB 的 RAM 和可以使用它们的 64 位处理器，请使用 64 位版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:19:43.200

> ...我计划为单个服务器中的多个客户端复制与多个 Rails 应用程序相同的代码，因此每 MB RAM 对我来说都很重要...

不要编写单体应用程序，而是编写较小的 Rails 应用程序，这些应用程序调用中央代码，为所有调用它的应用程序处理尽可能多的处理。它会慢一点，但在内存方面效率更高。

看看像[RabbitMQ](http://www.rabbitmq.com/)这样的后端。对于此类任务，它非常高效且出色。[AMQP](https://github.com/ruby-amqp/amqp/) gem 是您的朋友。

使用 JSON 将数据扔到队列中。它使调试变得容易。

# java - 玩！Intellij IDEA 中的 2.0 控制台不起作用

> ID：16021266
> 
> 赞同：12
> 
> 时间：2013-04-15T17:32:07.727
> 
> 标签：java, scala, playframework, intellij-idea, playframework-2.0

我昨天问了这个问题，但它被标记为重复。所以请把我的问题读到最后，不要再次将其标记为重复！

[链接](https://stackoverflow.com/q/16004645/921193)到原始问题。

**原始问题：**

我使用 Intellj IDEA 设置了新的 Play 2.0 框架项目。但我找不到如何在 Intellij IDEA 中运行 Play！的命令行实用程序。从教程中我了解到它必须可以从`Tools | Play with Playframework`.

但我错过了这个上下文菜单：

![在此处输入图像描述](https://i.stack.imgur.com/GyDwJ.png)

我的问题可能出在哪里？

一些附加信息：

*   我使用 Intellij IDEA 向导设置了一个新项目。
*   我可以使用 Run 命令从 Intellij IDEA 运行应用程序，并在浏览器中查看结果。
*   我正在使用 Intellij Idea 12.1.1
*   **为了能够从 IDEA 创建新项目，我安装了所有其他插件（Play 2.0 插件，Scala 插件）**

PS对我之前的问题的回答建议我`Add framework support`。但我没有`Play2.0`在列表中看到这个方面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:44:31.753

显然`Play with Playframework`是 Play **1.x**插件的第一个版本可用的选项（我猜在阅读文档后，我没有启用这样的选项，尽管我在 Idea 12 中为 Play 2 提供了所有必需的插件）。

实际上，您不再需要使用 Intelli 的 kickstarter 来创建 Play 项目，您只需要：

*   在命令行中创建新项目：

    ```
    play new 
    ```

*   `idealize`它也可以使用命令行：

    ```
    play idea 
    ```

*   转到 Idea，选择`File`> `Open...`，找到包含在前面步骤中创建的应用程序的文件夹，然后......瞧！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T09:40:32.650

Play 正在使用 SBT 控制台，该控制台将在 IntelliJ IDEA 的官方 SBT 插件中提供（将于 2013 年 4 月末发布）。

现在您可以使用也提供控制台的第三方 SBT 插件，[请查看此答案以获取详细信息](https://stackoverflow.com/a/15669232/104891)。

此外，正如[博客中所回答的那样](http://blogs.jetbrains.com/idea/2012/12/getting-started-with-play-20-in-intellij-idea-12/#comment-385620)，*假设您不再需要它，并且 IDE 提供了您需要的东西（例如运行、编译等）*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T19:52:59.273

事实上，在 Idea 中使用 Play 的控制台并不明显。

你需要做的是：

*   在你的工具栏中，有一个选择框（它写在你的*上面*），单击它并选择*编辑配置*
*   在左上角，单击加号 ( *+* )
*   选择*Play 2 应用程序*
*   根据需要配置它
    您可能需要从“*启动前*”框中删除*make 。*不知道为什么，但它不会让我的 Play 开始。
**   确认*

 *您现在可以从配置选择框旁边的绿色小*启动按钮启动 Play 控制台。*

我不记得需要运行`play idea`，但无论如何都要这样做以防万一。*

# ios - 停止销售应用但上传升级

> ID：16021269
> 
> 赞同：0
> 
> 时间：2013-04-15T17:32:11.870
> 
> 标签：ios, iphone, app-store-connect

我想知道我是否可以发布我的应用程序的新版本，但不将此新版本出售给新用户。我的 iTunes 连接帐户中有一个客户的应用程序。然后我们将此应用程序移至她的帐户（我们没有检查通过 Apple 将此应用程序转移到她的帐户的可能性，而是我们再次将应用程序上传到她的帐户）我们计划发布升级，我们希望老用户升级到新版本，但我们不想再在我的帐户中出售新版本。我没有从我的帐户中删除该应用程序，而是将可用日期放在了很远的将来。我已经翻遍了，我没有找到信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:55:05.883

那是不可能的。将应用推送到应用商店后，即可公开出售。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:16:26.787

我找到了一种方法，但当然不是一个合适的解决方案。我更新了我帐户中的应用程序，但删除了大部分屏幕截图，留下了非常简短的描述并提高了应用程序的价格。通过这种方式，该应用程序不再在我的帐户中销售，但老用户可以更新到新版本。

我强烈建议任何想要将应用程序转移到另一个 iTunes 连接帐户的人先用苹果检查它。我们没有看到任何其他解决方案，所以我们只是将其上传到另一个帐户，然后意识到这会导致很多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T19:34:44.530

最后，Apple 提供了将应用程序转移到其他开发者帐户的可能性。不再有这些问题[https://developer.apple.com/news/?id=6112013c](https://developer.apple.com/news/?id=6112013c)

# facebook - 通过 Graph API 的好友请求

> ID：16021277
> 
> 赞同：0
> 
> 时间：2013-04-15T17:32:40.533
> 
> 标签：facebook, facebook-graph-api

据我了解，Facebook Graph API 不支持添加好友。此外，旧的 Facebook API 正在逐步淘汰。

无论如何，是否可以通过任何兼容的 Facebook API 通过电子邮件地址添加朋友（朋友请求）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:39:01.313

目前，无论是否有用户的联系信息，都无法通过任何 API 发送好友请求。这是为了防止滥用该功能而设计的。

# c++ - '_Unwind_GetIPInfo' 符号

> ID：16021278
> 
> 赞同：0
> 
> 时间：2013-04-15T17:32:41.110
> 
> 标签：c++, c, libstdc++, cppunit

我正在使用 cppunit 开发单元测试。

我构建并安装了 cppunit 库，然后构建并安装了我的单元测试二进制文件。

当我启动单元测试二进制文件时，出现以下错误：

```
 can't resolve symbol '_Unwind_GetIPInfo' in lib '/usr/lib/libstdc++.so.6'. 
```

仅当测试返回失败时才会生成此错误。如果测试重新运行正常，我没有收到此错误

关于这个错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:45:32.263

看起来您使用不同的 stdc 库进行编译和运行时，检查[G++ 总是失败，未定义对 _Unwind_GetIPInfo 的引用](https://stackoverflow.com/questions/5855343/g-always-fails-with-undefined-reference-to-unwind-getipinfo)

# javascript - jQuery 数据表，fnDraw() 仅适用于本地主机

> ID：16021281
> 
> 赞同：0
> 
> 时间：2013-04-15T17:32:49.060
> 
> 标签：javascript, jquery, datatables

如何解决问题，下一个代码在我的本地主机中运行良好，

```
var table = $('#table').dataTable({
    'bProcessing': true,
    'bServerSide': true,
    'sServerMethod': "post",
    //'oLanguage': oLanguage, //http://datatables.net/ref (search: oLanguage)
    'sPaginationType': 'full_numbers',
    'sAjaxSource': 'data.php',
    'aaSorting': [[1, 'asc']],
    'aoColumnDefs': [
        {
            "bSortable": false, "aTargets": [0]
        }, {
            "aTargets": [0],
            "fnCreatedCell": function(nTd, sData, oData, iRow, iCol) {
                $(nTd).html(sData);
            }
        }
    ]
});
$('mybutton').click(function() {
    table.fnDraw(); //the problem is there
}); 
```

如果我放到远程服务器上，函数 table.fnDraw(); 现在工作并显示一条消息“请稍候，正在加载列表”无限期。

谢谢

# actionscript-3 - 从设备与桌面 Air App 通信

> ID：16021284
> 
> 赞同：0
> 
> 时间：2013-04-15T17:32:57.833
> 
> 标签：actionscript-3, flash, air

我一直在寻找有关如何完成此操作的一些示例-但我能找到的唯一信息并没有真正让我清楚。

我希望这里有人可以提供一些见解。

我目前有一个我前段时间制作的空气应用程序。air 应用程序在第 3 帧上停止，我必须单击鼠标才能继续。当我在设备（手机/平板电脑）上加载的 html 页面上单击 btn 时，我想要做的是前进到下一帧。Air App 本身将一直运行。

我有一个服务器设置，所以我可以从我的设备（本地网络）访问 html 按钮。

我还实现了这个[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html#includeExamplesSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html#includeExamplesSummary) 以查看它如何与我的服务器交互。当我运行 air 应用程序时，我可以看到它正在调用服务器，并且 air 应用程序确实在调试器输出中从服务器打印了一些结果。但实际上，这不是我想要做的。它只是表明发生了一些连接。但流程都是错误的。

所以我的问题是。谁能给我一些有关如何从同一网络中的另一台设备触发 Air App 中的帧的详细信息？另一台设备上不需要任何闪光灯。只需一个简单的 html 按钮即可。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:40:14.773

我会说你在这里有两条可能的路线。

1.  在您的服务器上创建一个脚本以启动与您的空中应用程序的连接。例如使用 php 和[socket](http://php.net/manual/en/sockets.examples.php)，链接将类似于`http://myserver/nextslide.php`然后可以在您选择的 TCP 端口上连接到您的空中应用程序。这里有很多选项，具体取决于您的服务器和可用的脚本语言。

2.  将您的 air 应用程序设置为 Web 服务器，以允许您的浏览器直接发送 HTTP 请求。例如，这里有一个非常简单的空中 HTTP 服务器 [（](http://coenraets.org/blog/2009/12/air-2-0-web-server-using-the-new-server-socket-api/)它只不过是一个在每个请求结束时关闭连接的套接字服务器）。您仍然可以像当前一样从主 Web 服务器提供您的 html，但是当在 HTTP 标头中找到相关 URI 时，您只需从空中应用程序中的 HTTP 服务器移动到下一张幻灯片。如果您只需要它在您的本地网络中工作，这就是我想要的。

* * *

上面选项 2 的示例 as3 代码，使用带有 FlashDevelop 的空中投影仪进行测试：

```
package 
{
    import flash.display.MovieClip;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.ProgressEvent;
    import flash.events.ServerSocketConnectEvent;
    import flash.net.ServerSocket;
    import flash.net.Socket;
    import flash.utils.ByteArray;

    public class Main extends Sprite 
    {
        private var serverSocket:ServerSocket;
        private var port:int = 8080;

        public function Main():void 
        {
            listen();
        }

        private function listen():void
        {
            try
            {
                serverSocket = new ServerSocket();
                serverSocket.addEventListener(Event.CONNECT, socketConnectHandler);
                serverSocket.bind(port);
                serverSocket.listen();
                trace("Listening on port " + port + "...\n");
            }
            catch (error:Error)
            {
                trace("Failed to open server socket");
            }
        }

        private function socketConnectHandler(event:ServerSocketConnectEvent):void
        {
            var socket:Socket = event.socket;
            socket.addEventListener(ProgressEvent.SOCKET_DATA, socketDataHandler);
        }

        private function socketDataHandler(event:ProgressEvent):void
        {
            try
            {
                var socket:Socket = event.target as Socket;
                var bytes:ByteArray = new ByteArray();
                socket.readBytes(bytes);
                var request:String = "" + bytes;
                trace(request);
                var url:String = request.substring(4, request.indexOf("HTTP/") - 1);

                socket.writeUTFBytes("HTTP/1.1 200 OK\n");
                socket.writeUTFBytes("Content-Type: text/plain\n\n");

                if (url == "/next")
                {
                    socket.writeUTFBytes("next frame triggered");

                    var someMovie:MovieClip = new MovieClip(); //define this as a reference to the movie clip you want to control
                    someMovie.nextFrame();
                }
                else
                {
                    socket.writeUTFBytes("The url is " + url);
                }

                socket.flush();
                socket.close();
            }
            catch (error:Error)
            {
                trace(error);
            }
        }
    }
} 
```

# css - 锚 id 标签将部分带到所需位置

> ID：16021288
> 
> 赞同：0
> 
> 时间：2013-04-15T17:33:10.593
> 
> 标签：css, anchor

```
<div id="nav_bar" style="position: fixed; height: 200px; z-index: 9999;">Navigation Bar</div>
<ul>
<li><a href"#1">A Section</a><li>
<li><a href"#2">B Section</a><li>
<li><a href"#3">C Section</a><li>
<ul>

<ul>
<li><a id="1">A Section</a></li>
<li><a id="2">B Section</a></li>
<li><a id="3">C Section</a></li>
</ul> 
```

当我单击锚标记时，目标部分位于导航栏下方。无论如何我可以让它显示在导航栏的正下方吗？

非常感谢

[http://jsfiddle.net/QDpRL/5/](http://jsfiddle.net/QDpRL/5/)

# c++ - C2259 错误（directx 11）

> ID：16021289
> 
> 赞同：1
> 
> 时间：2013-04-15T17:33:12.163
> 
> 标签：c++, directx

我正在使用 Allen Sherrod 的《Beginning DirectX 11 Game Programming》，Wendy Jones 的书，但我在使用以下代码时遇到了问题：

```
#include <Windows.h>
#include <memory>
#include "BlankDemo.h"

LRESULT CALLBACK WndProc(HWND hwnd, UINT message, 
                    WPARAM wParam, LPARAM lParam);

int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE prevInstance,
         LPWSTR cmdLine, int cmdShow)
{
UNREFERENCED_PARAMETER(prevInstance);
UNREFERENCED_PARAMETER(cmdLine);

WNDCLASSEX wndClass = {0};
wndClass.cbSize = sizeof(WNDCLASSEX);
wndClass.style = CS_HREDRAW | CS_VREDRAW;
wndClass.lpfnWndProc = WndProc;
wndClass.hInstance = hInstance;
wndClass.hCursor = LoadCursor(NULL, IDC_ARROW);
wndClass.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
wndClass.lpszMenuName = NULL;
wndClass.lpszClassName = "DX11BookWindowClass";

if(!RegisterClassEx (&wndClass))
    return -1;

RECT rc = {0, 0, 640, 480};
AdjustWindowRect(&rc, WS_OVERLAPPEDWINDOW, FALSE);

HWND hwnd = CreateWindowA("DX11BookWindowClass","BlankWin32Window",WS_OVERLAPPEDWINDOW,
    CW_USEDEFAULT, CW_USEDEFAULT, rc.right - rc.left,
    rc.bottom - rc.top, NULL,NULL,hInstance,NULL);

if(!hwnd)
    return -1;
ShowWindow(hwnd,cmdShow);

BlankDemo* demo = new BlankDemo();

bool result = demo->Initialize(hInstance, hwnd);

if(result == false)
    return -1;

MSG msg = {0};

while(msg.message != WM_QUIT)
{
    if(PeekMessage(&msg,0,0,0,PM_REMOVE))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    else
    {
        demo->Update(0.0f);
        demo->Render();
    }
}

demo->Shutdown();

return static_cast<int>(msg.wParam);
}

LRESULT CALLBACK WndProc(HWND hwnd, UINT message, 
                    WPARAM wParam, LPARAM lParam)
{
PAINTSTRUCT paintStruct;
HDC hDC;

switch(message)
{
case WM_PAINT:
    hDC = BeginPaint(hwnd, &paintStruct);
    EndPaint(hwnd, &paintStruct);
    break;

case WM_DESTROY:
    PostQuitMessage(0);
    break;

default:
    return DefWindowProc(hwnd, message, wParam, lParam);
}
return 0;
} 
```

我得到 IntelliSense：抽象类类型“BlankDemo”的对象是不允许的错误。类声明：

```
#ifndef _BLANK_DEMO_H_
#define _BLANK_DEMO_H_

#include "DemoBase.h"

class BlankDemo : public Dx11DemoBase
{
public:
BlankDemo();
virtual ~BlankDemo();

bool LoadContent();
void UnloadContent();

void Upadate(float dt);
void Render();
};

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:37:55.730

你拼错了你的一个功能。

```
void Upadate(float dt); 
```

应该

```
void Update(float dt); 
```

在早期版本的 C++ 中，此类拼写错误是常见错误。如果你正在编译 C++11，你可以让编译器验证你的意图：

```
void Update(float dt) override; 
```

# .net - wpf vb.net 自定义控件 AddHandler 未触发

> ID：16021291
> 
> 赞同：0
> 
> 时间：2013-04-15T17:33:16.243
> 
> 标签：.net, wpf, vb.net, visual-studio, custom-controls

我正在尝试制作一个基于文本框控件的自定义控件。此文本框控件还包含一个按钮、列表框和弹出窗口。我尝试在类的 OnApplyTemplate 函数中为按钮的鼠标按下事件添加一个事件处理程序。当我逐步调试时，会调用 OnApplyTemplate 并添加事件处理程序代码。

**我的问题**是，当我单击按钮时，不会调用事件处理程序子 DropDownButton_MouseDown。

这是我的课：

```
Imports System.Windows.Controls.Primitives

<TemplatePart(Name:="PART_ControlBorder", Type:=GetType(Border))> _
<TemplatePart(Name:="PART_DropDownButton", Type:=GetType(Button))> _
<TemplatePart(Name:="PART_Popup", Type:=GetType(Popup))> _
<TemplatePart(Name:="PART_ListBox", Type:=GetType(ListBox))> _

Public Class AutoCompleteTextBox
    Inherits TextBox

#Region "DECLARATIONS"
    Private Mainborder As Border
    Private popup As Popup
    Private listBox As ListBox
    Private dropDownButton As Button

#End Region

#Region "METHODS"
    Private Sub PopupOpen()
        If popup IsNot Nothing And popup.IsOpen = False Then
            popup.IsOpen = True
        Else
            Return
        End If
    End Sub

    Private Sub DropDownButton_MouseDown(sender As Object, e As System.EventArgs)
        PopupOpen()
    End Sub
#End Region

#Region "APPLY TEMPLATE"
    Public Overrides Sub OnApplyTemplate()
        MyBase.OnApplyTemplate()

        If Me.Template IsNot Nothing Then
            Dim button__1 As Button = TryCast(Me.Template.FindName("PART_DropDownButton", Me), Button)
            If button__1 IsNot dropDownButton Then
                'First unhook existing handler
                If dropDownButton IsNot Nothing Then
                    RemoveHandler dropDownButton.MouseDown, AddressOf DropDownButton_MouseDown
                End If
                dropDownButton = button__1
                If dropDownButton IsNot Nothing Then
                    AddHandler dropDownButton.MouseDown, AddressOf DropDownButton_MouseDown
                End If
            End If
        End If
    End Sub
#End Region

#Region "CONSTRUCTOR"
    Sub New()
        DefaultStyleKeyProperty.OverrideMetadata(GetType(AutoCompleteTextBox), New FrameworkPropertyMetadata(GetType(AutoCompleteTextBox)))
    End Sub

#End Region

End Class 
```

我在 Visual Studio 2012 中使用 wpf .net 4.5。这是我的名为 AutoCompleteTextBox 的自定义控件的 xaml，该控件在解决方案中的另一个项目中定义：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:krisis="clr-namespace:Krisis.Controls;assembly=Krisis.Controls"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <krisis:AutoCompleteTextBox SearchText="Bob" Width="200" MinHeight="35" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
</Window> 
```

有人可以帮我连接这个事件处理程序，以便当我单击按钮时调用子 DropDownButton_MouseDown。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T01:49:49.683

所以我将 OnApplyTemplate 更改为以下内容，现在它可以工作了：

```
Public Overrides Sub OnApplyTemplate()
    MyBase.OnApplyTemplate()

    '' if template is not nothing then initialize controls and wire up the event handlers
    If Me.Template IsNot Nothing Then

        InitializePopup()
        InitializeBorder()

        ''reset the handler for DropDownButton
        If DropDownButton IsNot Nothing Then
            RemoveHandler DropDownButton.Click, AddressOf DropDownButton_Click
        End If
        InitializeButton()
        If DropDownButton IsNot Nothing Then
            AddHandler DropDownButton.Click, AddressOf DropDownButton_Click
        End If

        ''reset handlers for listbox
        If ResultsListBox IsNot Nothing Then
            RemoveHandler ResultsListBox.PreviewMouseDown, AddressOf ResultListBox_PreviewMouseDown
            RemoveHandler ResultsListBox.KeyDown, AddressOf ResultListBox_KeyDown
        End If
        InitializeListbox()
        If ResultsListBox IsNot Nothing Then
            AddHandler ResultsListBox.PreviewMouseDown, AddressOf ResultListBox_PreviewMouseDown
            AddHandler ResultsListBox.KeyDown, AddressOf ResultListBox_KeyDown
        End If
    End If
End Sub 
```

这是我写的上面使用的 INitializeControl sub 的示例：

```
Private Sub InitializeButton()
    If dropDownButton Is Nothing Then
        dropDownButton = TryCast(Me.Template.FindName("PART_DropDownButton", Me), Button)
    End If
End Sub 
```

# windows - 删除链接到不存在文件的快捷方式

> ID：16021294
> 
> 赞同：0
> 
> 时间：2013-04-15T17:33:35.923
> 
> 标签：windows, vbscript, jscript

这是我的问题：我需要编写一个脚本来删除链接到不存在文件的快捷方式，并显示哪些快捷方式被删除。JScript 或 VBScript 上的脚本（Windows 脚本宿主）

如果快捷方式链接到不存在的文件，我该如何获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:17:24.307

您可以通过（重新）创建快捷方式来打开它。然后您可以使用该`FileExists`方法检查是否`TargetPath`存在。

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set sh  = CreateObject("WScript.Shell")

For Each f In fso.GetFolder("C:\path\to\shortcuts").Files
  If LCase(fso.GetExtensionName(f.Name)) = "lnk" Then
    Set lnk = sh.CreateShortcut(f.Path)
    If Not fso.FileExists(lnk.TargetPath) Then
      WScript.Echo "Deleting shortcut '" & f.Path & "'."
      f.Delete
    End If
  End If
Next 
```

# dictionary - 如何在vim中映射（别名？）命令

> ID：16021297
> 
> 赞同：10
> 
> 时间：2013-04-15T17:33:40.557
> 
> 标签：dictionary, vim

假设说，我总是忘记命令`:vsplit`，并且总是认为它是`:vdivide`。

有没有办法相互映射（我不确定这是否是正确的称呼，因为它是一个命令）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T18:04:43.817

用户自定义命令只能以大写字母开头，所以只能加`:Vdivide`不能加`:vdivide`。

添加您的`.vimrc`

```
 command Vdivide vsplit 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T15:18:26.237

为了绕过用户定义的命令必须以大写字母开头的限制，我推荐使用[cmdalias.vim - Create aliases for Vim commands](http://www.vim.org/script.php?script_id=746)插件。有了它，您可以：

```
:Alias vdivide vsplit 
```

# java - 如何下载 Jakarta cactus 的源代码？

> ID：16021298
> 
> 赞同：-2
> 
> 时间：2013-04-15T17:33:41.073
> 
> 标签：java, jakarta-ee, cactus

我访问了[http://jakarta.apache.org/cactus/downloads.html](http://jakarta.apache.org/cactus/downloads.html)并点击了 Cactus 源代码发布。但是，我得到一个

禁止的

您无权访问此服务器上的 /site/downloads/downloads_cactus.cgi。

可以用maven获取Jakarta cactus的源码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:37:47.230

试试[这个链接](http://jakarta.apache.org/cactus/source-repository.html)，你可以有**匿名访问**或**开发者访问**

**请注意上面链接的概述：**

“本项目使用 Subversion 管理其源代码。Subversion 使用说明可在[http://svnbook.red-bean.com](http://svnbook.red-bean.com)找到”

# jax-rs - 动态注册 JAX RS 服务类

> ID：16021299
> 
> 赞同：2
> 
> 时间：2013-04-15T17:33:42.177
> 
> 标签：jax-rs

是否可以动态注册和注销 JAX RS 服务类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:49:23.603

在 Apache CXF 中可以动态注册一个端点。

```
CXFNonSpringJAXRSServlet cxf = new CXFNonSpringJaxrsServlet();

...

ServletHolder servlet = new ServletHolder(cxf);
servlet.setInitParameter("javax.ws.rs.Application", "com.acme.MyServiceImpl");
servlet.setName("services");
servlet.setForcedPath("services");
root.addServlet(servlet, "/*"); 
```

看更多：

*   [JAX-RS：服务配置 - 将 JAXRS 端点附加到现有的 Jetty 服务器](http://cxf.apache.org/docs/jaxrs-services-configuration.html#JAXRSServicesConfiguration-AttachingJAXRSendpointstoanexistingJettyserver)

# c# - C# 将文本到语音保存到 MP3 文件

> ID：16021302
> 
> 赞同：14
> 
> 时间：2013-04-15T17:33:52.900
> 
> 标签：c#, text-to-speech

我想知道是否有办法将文本到语音数据保存为 mp3 或 Wav 文件格式以便以后播放？

```
SpeechSynthesizer reader = new SpeechSynthesizer();
reader.Rate = (int)-2;
reader.Speak("Hello this is an example expression from the computers TTS engine in C-Sharp); 
```

我正在尝试将其保存在外部，以便稍后播放。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T17:38:29.420

有[多个选项](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer_methods.aspx)，例如保存到现有流。如果要创建新的 WAV 文件，可以使用[SetOutputToWaveFile](http://msdn.microsoft.com/en-us/library/ms586883.aspx)方法。

```
reader.SetOutputToWaveFile(@"C:\MyWavFile.wav"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-22T07:53:42.757

不是我的答案，复制粘贴[如何使用 LAME 将 wav 编码为 mp3 c#](https://stackoverflow.com/questions/19166140/how-do-can-i-use-lame-to-encode-an-wav-to-an-mp3-c-sharp/23947113#23947113)

* * *

.Net 4.0 中最简单的方法：

使用 Visual Studio Nuget 包管理器控制台：

```
Install-Package NAudio.Lame 
```

代码片段：将语音发送到内存流，然后另存为 mp3：

```
//reference System.Speech
using System.Speech.Synthesis; 
using System.Speech.AudioFormat;

//reference Nuget Package NAudio.Lame
using NAudio.Wave;
using NAudio.Lame; 

using (SpeechSynthesizer reader = new SpeechSynthesizer()) {
    //set some settings
    reader.Volume = 100;
    reader.Rate = 0; //medium

    //save to memory stream
    MemoryStream ms = new MemoryStream();
    reader.SetOutputToWaveStream(ms);

    //do speaking
    reader.Speak("This is a test mp3");

    //now convert to mp3 using LameEncoder or shell out to audiograbber
    ConvertWavStreamToMp3File(ref ms, "mytest.mp3");
}

public static void ConvertWavStreamToMp3File(ref MemoryStream ms, string savetofilename) {
    //rewind to beginning of stream
    ms.Seek(0, SeekOrigin.Begin);

    using (var retMs = new MemoryStream())
    using (var rdr = new WaveFileReader(ms))
    using (var wtr = new LameMP3FileWriter(savetofilename, rdr.WaveFormat, LAMEPreset.VBR_90)) {
        rdr.CopyTo(wtr);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-18T16:14:20.147

通常，如果某些东西在开发工作站上工作但在生产服务器上不工作，则它是权限问题。两个想法： Lame 会在某处创建临时文件吗？如果是这样，IIS 进程需要那里的写入权限。写入输出文件时，IIS 进程再次需要写入权限。`ConvertWavStreamToMp3File(ref ms, "mytest.mp3");`“mytest.mp3”可能需要是完整路径，使用`Server.MapPath()`

# .net - 两台 PC 上的 OutOfMemory 异常

> ID：16021305
> 
> 赞同：0
> 
> 时间：2013-04-15T17:34:03.037
> 
> 标签：.net, memory, memory-management

给定两台电脑

1.  Core i5 第三代 4GB RAM（戴尔 Optiflex 7010）
2.  酷睿 i7 第二代 16GB RAM（三星 700G7C）

**更新 1** - 有趣的是，将 T 的属性数量减少两倍没有任何变化，发生 OOM 的集合中 T 的数量保持不变......

拿平均低频，我只是没有他们手。

谁能向我解释一下，为什么第一台 PC 上运行良好的代码在第二台 PC 上 100% 失败并出现 OutOfMemoryException？考虑到第二台 PC 的成本要高出 3 倍，这真的很烦人。

我不能在这里发布整个代码，但它非常简单 - 一个 List 填充有 T，其中 T 是一个具有 5 个 Integer 属性的 CLR 对象。第一台 PC 处理 2500 万个对象没问题（这就是我所看到的，它可能可以处理更多），而第二台 PC 大约死了。1650 万条记录。我知道单个对象的内存限制，但它真正让我明白的是它如何在两台相当现代的 PC 之间偏离这么多（50%++）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:58:20.593

这个问题的文档记录严重不足，但我可以对其中的一些进行逆向工程。首先，内存不足的唯一方法是使用结构列表而不是类。这使得结构大小为 4 * 5 = 20 字节。对于 1650 万个元素，您需要一个用于 List<> 的内部数组，该数组至少具有 20 x 16.5 = 330 兆字节的连续虚拟内存。下一次分配将要求双倍大小，即 660 兆字节。这在 32 位进程中很难实现。OOM 的风险与该大小非常接近。

问题是您需要连续*分配*。换句话说，虚拟内存地址空间中至少有 660 兆字节的未使用空洞。问题是VM空间需要由代码和数据共享。代码是这里常见的麻烦制造者。一个在一台机器上而不是另一台机器上加载的 DLL。就像来自英特尔、供应商或病毒扫描程序的铲子一样。DLL 有一个可能非常尴尬的首选加载地址，将可用地址空间分成两个较小的部分。这些部分的总和仍然足够大，但没有留下足够大的孔来容纳 660 MB 的分配。

这是一个被称为“地址空间碎片”的普遍问题。它始终是 OOM 的第一个原因，很难消耗所有 2 GB 的可用地址空间。这只能通过进行非常小的分配来实现。

你可以做几件非常简单的事情来解决这个问题：

*   摆脱那台机器上的铲子，使用 SysInternals 的 VMMap 实用程序查看是否有效
*   使用类而不是结构。现在 List 元素大小只有 4 个字节而不是 20 个
*   使用 List<>.Capacity 属性。这可以减少您在列表增长时多次重新分配内部数组而产生的地址空间碎片。只要你有一个好的初步猜测。
*   你有很好的硬件，使用它。将 EXE 项目上的 Target platform 设置更改为 AnyCPU。64 位进程有大量的地址空间，很难全部使用。
*   您可以使用 EXE 上的 /LARGEADDRESSAWARE 选项运行 Editbin.exe。现在，您的 32 位进程在 64 位操作系统上将拥有 4 GB 的地址空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:46:28.900

这听起来可能很奇怪，但很容易排除。使用[内存分析器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)并注意泄漏源。

我能找出低规格硬件存活而高规格硬件失败的唯一方法是内存碎片。`GC`不擅长这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:51:52.683

将构建平台设置为`x64`（默认设置为任何平台）解决了我的问题。我尝试了一些很好的方法，包括 `gcAllowVeryLargeObjects`并强制 x86，但无济于事。

# ruby-on-rails - Heroku 启动 Thin 但从 weBrick 返回错误 - 设计用户创建失败

> ID：16021306
> 
> 赞同：0
> 
> 时间：2013-04-15T17:34:04.543
> 
> 标签：ruby-on-rails, heroku, thin, webrick

尝试新用户注册时，我收到服务器状态代码 500，并且 Heroku 中没有记录错误。这是收到的响应标头：

```
Connection  keep-alive
Content-Length  728
Content-Type    text/html; charset=utf-8
Date    Mon, 15 Apr 2013 16:43:30 GMT
Server  WEBrick/1.3.1 (Ruby/1.9.2/2011-07-09)
X-Runtime   0.390617 
```

有一个 Procfile 指定 Thin 和 Heroku 启动正常：

档案

```
web: bundle exec thin start -p $PORT
worker:  bundle exec rake jobs:work 
```

同样在我的 gemfile 中，我指定了 ruby​​ '1.9.3'

启动日志

```
2013-04-15T16:37:49.739237+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -p 39185`
(... Removed 3 warning - DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins!)
2013-04-15T16:37:55.104773+00:00 app[web.1]: >> Using rack adapter
2013-04-15T16:37:55.104773+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2013-04-15T16:37:57.202991+00:00 app[web.1]: >> Thin web server (v1.5.1 codename Straight Razor)
2013-04-15T16:37:57.202991+00:00 app[web.1]: >> Maximum connections set to 1024
2013-04-15T16:37:57.202991+00:00 app[web.1]: >> Listening on 0.0.0.0:39185, CTRL+C to stop
2013-04-15T16:37:57.931278+00:00 heroku[web.1]: State changed from starting to up 
```

失败的不仅仅是设计。对任何非静态页面的任何调用都会失败。此外，任何静态页面的响应标头都有 Server:WEBrick/1.3.1 (Ruby/1.9.2/2011-07-09)。

我缺少哪些其他配置项或者我应该验证哪些配置项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:28:49.070

浏览器书签指向我不知道的帐户中的某个旧版本。这只是应用程序名称中的一个愚蠢的小破折号。现在项目和我的浏览器和客户端的浏览器都指向同一个项目。

# css - 围绕图像的DIV（可能很容易回答）

> ID：16021307
> 
> 赞同：2
> 
> 时间：2013-04-15T17:34:05.693
> 
> 标签：css, html, width, fill

我`div`在标题中有 3 秒。

1.  动态宽度
2.  55px 宽，带背景图片
3.  200 像素宽

我试图让左侧`div`填充水平宽度的其余部分，并且我已经阅读了一些答案，但我似乎无法将它们放在同一条线上。我目前有：

**CSS**

```
body{
    background-color:#666;
    color:#666;
    margin:0;
    padding:0;
}
.container{
    width:80%;
    min-width:755px;
    margin:0 auto;
    background-color:#333;
    background:url(img);
}

.headerLeft{
    background-color:#333;
    height:64px;
    margin-right:255px;
}
.headerCenter{
    background:url(img);
    width:55px;
    height:79px;
    float:right;
}
.headerRight{
    background-color:#333;
    height:65px;
    width:200px;
    margin-top:14px;
    float:right;
} 
```

**HTML**

```
<div class="container">
    <div class="header">
        <div class="headerLeft">dfg</div>
        <div class="headerRight">dfg</div>
        <div class="headerCenter">dfg</div>
    </div>
    <div class="content"></div>
    <div class="footer"></div>
</div> 
```

图像本身只是一条曲线，`div`两边的 s 对齐以适应曲线，背景图像流过曲线。我遇到的问题是 right 和 center `div`s 下降到 left 下方`div`，即使它们正确排列以使尺寸正确。高度和边距只是为了让所有东西都对齐，但现在可以忽略，这样我至少可以让所有东西都在同一条线上。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:09:25.273

只需切换您`div`的 s 的顺序，它们就会按照您的意愿行事：

```
<div class="headerRight">dfg</div>
<div class="headerCenter">dfg</div>
<div class="headerLeft">dfg</div> 
```

您现在的问题是在文档流中`.headerLeft`的其他 s 之前出现。`div`一次`.headerRight`又一次`.headerCenter`，`.headerLeft`将扩展以填充该行的其余部分。

# python - 在 Python-Requests 中设置读取超时

> ID：16021308
> 
> 赞同：3
> 
> 时间：2013-04-15T17:34:07.870
> 
> 标签：python, python-requests

在尝试查询 RESTful api 时遇到以下异常（注意不是我的 api，因此很遗憾无法进入实际服务器并对其进行任何操作） `javax.naming.NamingException: LDAP response read timed out`：。

我正在使用 Python 请求来处理我的所有 GET、POST 等，并且实际连接似乎总是很好，但是当服务器处于重负载状态时，它似乎实际上并没有在读取超时之前返回所有数据。无论如何，有人知道要更改读取的超时时间吗？查看 Python-requests 文档，我只能找到有关更改连接超时的信息。

注意，我已经阅读了其他读取超时问题，但都是关于 Python 的其他 http/url 库的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-04-04T01:16:54.543

也许您可以将超时参数设置为元组，就像

```
r = requests.get('https://github.com', timeout=(3.05, 27)) 
```

元组的第一个值是连接超时（3.05），第二个是读取超时（27）

请求文档中的更多详细信息：[https ://requests.readthedocs.io/en/master/user/advanced/#timeouts](https://requests.readthedocs.io/en/master/user/advanced/#timeouts)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-15T20:58:51.387

如果您没有明确设置超时，您的操作系统将处理它们。那么更改**全局系统超时**取决于操作系统。在 Linux 下，您可以更改 /proc/sys/net/ipv4/tcp_syn_retries ( [http://www.sekuda.com/overriding_the_default_linux_kernel_20_second_tcp_socket_connect_timeout](http://www.sekuda.com/overriding_the_default_linux_kernel_20_second_tcp_socket_connect_timeout) )。

# php - 从 PHP 调用 Vowpal Wabbit？

> ID：16021311
> 
> 赞同：1
> 
> 时间：2013-04-15T17:34:13.443
> 
> 标签：php, c++, vowpalwabbit

我正在尝试调用 Vowpal Wabbit 并将结果返回到 php 脚本和网页；

```
$output = shell_exec('vw -i /root/house.model -t /root/house_dataset -p /dev/stdout --quiet'); 
```

当我回显输出时：

```
echo $output; 
```

它是空的，尽管当我在终端中运行脚本时它运行得很好。

```
0.000018
0.282964
0.999793 second_house
0.282964
0.000128 third_house 
```

当我对 php 文件中的 $output 执行 var_dump 时，它返回 NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:50:01.910

`2>&1`您需要通过在命令末尾添加来重定向标准输出。

```
shell_exec('vw -i /root/house.model -t /root/house_dataset -p /dev/stdout --quiet 2>&1') 
```

# drupal - Drupal 上一个和下一个链接

> ID：16021315
> 
> 赞同：0
> 
> 时间：2013-04-15T17:34:29.347
> 
> 标签：drupal

在路径“事件”中，我有一个视图，显示按日期排序的事件列表。每个事件标题链接到路径“events/$nid”。

在每个“events/$nid”页面上，我想创建链接到上一个和下一个事件的上一个和下一个按钮。上一个和下一个事件必须由路径“事件”处的视图确定。

我希望我的问题的答案是通用的。所以问题真的是：如何在节点页面上创建上一个和下一个按钮，其中上一个和下一个节点由访问第一个节点的视图确定。

我可能将上一个和下一个按钮构建为块或面板窗格。在这个块或面板窗格中，我将能够调用场景后面的“原始”视图并获取上一个和下一个节点 ID。但是，当用户单击next几次时，如何在节点之间携带视图名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:11:50.100

那么作为第三个参数呢？事件/$nid/$view_name

然后，您可以检查 view_name 是否存在，例如

```
 views_get_view(arg(2)) 
```

* 考虑在使用前对 arg(2) 的输入进行清理

# css - 与第 n 个孩子一起造型

> ID：16021322
> 
> 赞同：0
> 
> 时间：2013-04-15T17:34:59.260
> 
> 标签：css, css-selectors

我想要完成的是，前两个部分是白色的，然后是两个灰色部分，然后该模式继续。

我做了一个 jsfiddle 来展示我到目前为止所拥有的：[jsfiddle](http://jsfiddle.net/u69rf/2/)

CSS：

```
section{
      float:left;
      width:40%;
      background:#ccc;
      padding:20px 25px;
      margin-bottom:2px
}
section:nth-child(even){
      margin-left:2px;
}
section:nth-child(1),
section:nth-child(2n+2){
      background:#fff;
} 
```

HTML：

```
<section></section>
<section></section>
<section></section>
<section></section>
<section></section>
<section></section>
<section></section>
<section></section> 
```

我需要使用另一个`:nth-child()`来使这项工作正常吗？或者这会更好地使用jquery吗？

PHP 被用于生成这些框，那么 php 方法是最好的方法吗？也许上课？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:40:10.837

Nth-child 是你想要的，但你正在寻找的是这样的：

[http://tinker.io/f5c5c](http://tinker.io/f5c5c)

```
section:nth-child(4n+1),
section:nth-child(4n+2){
      /* styles here */

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T17:41:56.317

尝试这个：

```
section {
    float:left;
    width:40%;
    background:#fff;
    padding:20px 25px;
    margin-bottom:2px
}
section:nth-child(even) {
    margin-left:2px;
}
section:nth-child(4n),section:nth-child(4n-1) {
    background:#ccc;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/u69rf/7/)**

# deployment - 将 MapDB 部署到 Heroku

> ID：16021324
> 
> 赞同：0
> 
> 时间：2013-04-15T17:35:03.647
> 
> 标签：deployment, heroku, map, playframework-2.0, database

伙计们，

我想将 MapDB 部署到 Heroku。有什么经验或搜索方向吗？使用 Heroku 进行部署是业务需求，但如果与 Heroku 不兼容，我们可以更改 MapDB。我们正在使用 play-framework，因此任何 DBMS 都应该与 play 和 heroku 兼容。任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:28:45.483

Deploying a database to heroku is not quite something that works well. The idea behind heroku is to deploy ephemeral apps, things that don't really have state. And to hold what state is needed *outside* of heroku using plugins. I would suggest that you check out the heroku postgres addon for your DBMS.

# regex - 如何使用 sed 仅在包含另一个模式的行中替换文件中的模式

> ID：16021328
> 
> 赞同：7
> 
> 时间：2013-04-15T17:35:15.970
> 
> 标签：regex, sed

在我的具体情况下，我需要遍历数百个包含存储 URL 的变量的文件。所有的 URL 都是不同的，但是为了这个例子，我们可以假设它们都以 '​​com'' 结尾

我需要在 com 之后立即添加一些文本

因为所有的 URL 都有不同的域，所以我不能使用 sed 命令，例如：

```
sed -i 's/^ENVIRONMENT="someurl.com"/ENVIRONMENT="someurl.com.origin.net"/g' 
```

因为文件包含其他可能包含 com 的行，所以我不能使用类似的东西：

```
sed -i 's/com/com.origin.net/g' 
```

我只需要在包含模式的特定行上进行此搜索和替换，例如下面我在正则表达式中的示例：

```
^ENVIRONMENT.* 
```

如果我可以将 sed 的使用集中在与上述模式匹配的行上，那么我可以使用 sed 的一些改编，例如`sed -i 's/com/com.origin.net/g'`. 我当然可以编写一个过于复杂的 bash 脚本来执行此操作，但我知道有一种很好的方法可以告诉 sed 找到一个模式，只在找到该模式的行上工作，然后搜索和替换另一个模式用一个新字符串。

在搜索 Google 时，我发现的唯一半相关链接是：[如何仅 sed 包含给定字符串的行？](https://unix.stackexchange.com/questions/37518/how-to-sed-only-that-lines-that-contains-given-string). 但它并没有充分回答我的问题。还能够将 sed 通常限制为仅与模式匹配的行将通过一个不错的工具添加到我的 sed 武器库中。

任何导致解决方案的帮助将不胜感激。

这是一个文件的例子

```
### Example File
#
#
# someurl.com

ENVIRONMENT="someurl.com" 
```

我想替换`ENVIRONMENT="someurl.com"`为`ENVIRONMENT="someurl.com.orign.net"`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T17:40:36.410

以下命令行显示了两种可能的解决方案： 您可以使用`/regex/`. 您可以在替换中使用匹配的文本`\0`,`\1`等。

```
sed -e '/^\(ENVIRONMENT="[^"]*\.com\)"/ s//\1.origin.net"/' 
```

# python - NSUserNotificationCenter.defaultUserNotificationCenter() 在 python 中返回 None

> ID：16021330
> 
> 赞同：6
> 
> 时间：2013-04-15T17:35:28.417
> 
> 标签：python, osx-mountain-lion, nsnotificationcenter, pyobjc, nsusernotificationcenter

我正在尝试通过 python 连接到 Mountain Lion 通知中心。我已经安装了 pyobjc 并按照[此处](https://github.com/maranas/pyNotificationCenter)和[此处](https://gist.github.com/baliw/4020619)的说明进行操作。另请参阅：[使用 PyObjC 处理 Mountain Lion 的通知中心](https://stackoverflow.com/questions/12202983/working-with-mountain-lions-notification-center-using-pyobjc)

这是我的代码：

```
import Foundation, objc
import AppKit
import sys

NSUserNotification = objc.lookUpClass('NSUserNotification')
NSUserNotificationCenter = objc.lookUpClass('NSUserNotificationCenter')

def notify(title, subtitle, info_text, delay=0, sound=False, userInfo={}):
    """ Python method to show a desktop notification on Mountain Lion. Where:
        title: Title of notification
        subtitle: Subtitle of notification
        info_text: Informative text of notification
        delay: Delay (in seconds) before showing the notification
        sound: Play the default notification sound
        userInfo: a dictionary that can be used to handle clicks in your
                  app's applicationDidFinishLaunching:aNotification method
    """
    notification = NSUserNotification.alloc().init()
    notification.setTitle_(title)
    notification.setSubtitle_(subtitle)
    notification.setInformativeText_(info_text)
    notification.setUserInfo_(userInfo)
    if sound:
        notification.setSoundName_("NSUserNotificationDefaultSoundName")
    notification.setDeliveryDate_(Foundation.NSDate.dateWithTimeInterval_sinceDate_(delay, Foundation.NSDate.date()))
    NSUserNotificationCenter.defaultUserNotificationCenter().scheduleNotification_(notification) 
```

当我用参数调用通知函数时，我得到一个属性错误：

`AttributeError: 'NoneType' object has no attribute 'scheduleNotification_'`

我不明白为什么`NSUserNotificationCenter.defaultUserNotificationCenter()`要返回 NoneType 对象。我无法在互联网或 SO 上查询有关此事的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:03:51.517

因此，使用 Ned 的使用默认 python 的建议可以正常工作。当我在 32 位 enthought 发行版上安装 pyobjc 时，它也有效。在我看来，pyobjc 仅适用于 32 位 python 发行版（我无法确认这一点，但到目前为止似乎是这样）。

（注意：当我发布问题时，我已经在 64 位 enthought 发行版上安装了 pyobjc）。

# css - 100% 宽度的图像，保持最小高度的比例

> ID：16021331
> 
> 赞同：5
> 
> 时间：2013-04-15T17:35:36.053
> 
> 标签：css

我希望图像为 100%`min-height`但当图像达到此高度时有 500px 我希望比率保持（基本上）关闭 100% 宽度。我知道这可以用 javascript 实现，但我从来没有见过用 css 完成它。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:44:20.600

**html**

```
<img src="/path.jpg" /> 
```

**CSS**

```
img { min-height: 500px; } 
```

**注意**

只需确保您没有在元素中或在 CSS 中为上部元素定义此图像的宽度。如果一切正常 - 图像将被缩放到最小高度保持率。

并记住使用比你的最小高度更大的图像——否则它会很难看。

# linux - 有没有办法使用 Jenkins 运行交互式测试脚本（并让用户实际与之交互）？

> ID：16021333
> 
> 赞同：4
> 
> 时间：2013-04-15T17:35:45.007
> 
> 标签：linux, testing, jenkins

我有一些硬件组件希望以半自动化的方式进行测试。这将涉及类似于以下的程序步骤：

1.  提示用户将信号 A 连接到连接器 J1
2.  用户确认到位后，自动检查信号检测是否成功

我有使用 bash、python 等编写此类测试的经验。我还使用 Jenkins 来管理构建和自动化测试。我想做的（如果可能的话）是以某种方式将两者结合起来，并使用 Jenkins 来管理测试计算机上交互式脚本的运行。这将使我能够利用 Jenkins 在测试计算机上始终如一地生成脚本并无限期地存档工件和控制台输出历史记录的能力。我不确定的部分是如何允许用户与正在进行的 Jenkins 作业进行交互。有没有人有这方面的经验或知道是否有可能？

这是在 Linux 系统上，所以也许我可以在用户可以附加到的“屏幕”会话中运行它？

有没有更好的工具可以用于这个我没有考虑过的？

编辑1：

我确实听说过[“远程终端访问插件”](https://wiki.jenkins-ci.org/display/JENKINS/Remote+Terminal+Access+Plugin)，但这不允许与 Jenkins 构建直接交互。

到目前为止，我发现的最好的潜在解决方案是启动一个启用了日志记录的“屏幕”会话，并让用户在从属设备上与这个会话进行交互：

```
screen -S test -d -m -L ./myscript.sh
PID=`screen -list | grep test | awk '{print $1}' | sed 's/\..*//g'`

#This will show the output of the screen session in the jenkins console:
tail -f screenlog.0 --pid=$PID 
```

然后在从站，用户可以像这样附加到这个屏幕：

```
screen -r test 
```

这种方法的缺点是，如果发生故障，Jenkins 不会得到反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:51:18.973

您基本上需要一些方法来暂停构建，直到用户交互。我认为还没有这样的公共插件，但是您可以检查某些文件是否存在或其内容并循环睡眠，直到满足您的条件。或者，您可以改为检查远程 URL。当用户准备好时，您更改文件/url，您的工作会检测到并继续。

我认为这样的插件不会很难写，但目前还没有……除了也许你看过**jbpm 插件**吗？它必须在复杂的场景中可用。

# django - Django：ModelForm 自定义错误消息和占位符

> ID：16021334
> 
> 赞同：4
> 
> 时间：2013-04-15T17:35:53.253
> 
> 标签：django, forms, placeholder, django-forms

我遇到了只能拥有自定义错误消息或占位符文本的问题。一旦将自定义错误消息添加到 ModelForm 中，占位符文本就不再显示——顺序不会影响结果。提前感谢您的任何帮助和建议！

```
class LetterForm(ModelForm):
    name = forms.CharField()
    class Meta:
       model = Letter
       exclude = ('date_submitted', 'read', 'approved', 'post', 'date_post', 'url', 'tags',)
       widgets = {
        'youtube': forms.TextInput(attrs={'placeholder': 'youtube'}),
        'name': forms.TextInput(attrs={'placeholder': 'name'}),
        'location': forms.TextInput(attrs={'placeholder': 'location'}),
        'email': forms.TextInput(attrs={'placeholder': 'email'}),
    }
    name = forms.CharField(error_messages={'required': 'Don\'t want to share your real name?'
                                                       ' Just enter Anonymous.'}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:43:41.307

弄清楚了。我会把这个留给任何可能感兴趣的人

```
name = forms.CharField(error_messages={'required': 'message'},
                       widget=forms.TextInput(attrs={'placeholder': 'Name'})) 
```

# codeigniter - FullCalendar 和使用函数的多个事件

> ID：16021339
> 
> 赞同：0
> 
> 时间：2013-04-15T17:36:26.663
> 
> 标签：codeigniter, fullcalendar

我希望将 FullCalendar 与 CodeIgniter 一起使用。这是我想做的事情：

JS 文件：

```
 jQuery('#calendar').fullCalendar({
            theme: true,
            header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
            },
            editable: true,
            eventSources: getSources()
    }); 
```

查看文件：

```
<script>
    function getSources()
    {
        [
            <?php
                $output = '';
                foreach (explode(",", $session) as $session_id) { 
                $output .= " { url: '/campaigns/current_sessions/".$session_id."' },";
            } 
            echo rtrim($output, ',');
            echo "\n";
            ?>

        ]
    }
</script> 
```

JSON 输出

```
[{"name":"Second Session","start":"2013-04-7T00:00:00Z","end":"2013-04-3T00:00:00Z"}] 
```

网址很好。我检查了 json 数据的输出，它的格式也正确。我对 getSources 的函数调用有什么问题吗？有没有其他方法可以动态添加多个源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:27:12.063

我制作了一个简单的 php 文件来处理 xml 并以完整日历可以理解的方式返回格式化的 xml，您可以将 php 脚本放在 codeigniter 中的库文件夹中，或者放在 Aplication 文件夹中您想要的任何文件夹中（您的选择）。我还使用 jquery ajax 动态获取事件。

在 php 文件中，我处理 ajax 请求，例如选择：

这是从 xml 文件中获取事件：

```
jQuery('#calendar').fullCalendar({
        theme: true,
        header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
        },
        editable: true,
        events: function(start, end, callback) {
            $.ajax({
                type: 'POST',
                url: 'myxml.xml',
                dataType: 'xml',
                data: {
                    // our hypothetical feed requires UNIX timestamps
                    start: Math.round(start.getTime() / 1000),
                    end: Math.round(end.getTime() / 1000)
                },
                success: function(doc) {
                    var events = [];
                    $(doc).find('event').each(function() 
                    {
                        events.push({
                            id: $(this).attr('id'),
                            title: $(this).attr('title'),
                            start: $(this).attr('start'),
                            end: $(this).attr('end'),
                            allDay: $(this).attr('allDay'),
                            editable: $(this).attr('editable')
                        });                             
                    });                                     
                    callback(events);
                }
            });
        } 
}); 
```

这是插入/保存事件的 select: (FullCalender) 函数：

```
select: function(start, end, allDay){           
                var name = prompt('Title for event:');                  
                    $.ajax({
                        type: 'POST',                           
                        url: 'myxml.php',                           
                        data: {'id': 9999,
                                'ajax':true,
                                'operation':'add',
                                'title':name,
                                'start':start,
                                'end':end,
                                'allDay': allDay,
                                'editable': true, 
                                },                                      
                        success: function(data) {           
                            //alert('SUCCESS');
                            calendar.fullCalendar('refetchEvents');                                 
                        }
                    });             

        } 
```

这是处理插入和保存到 xml 文件的请求的 PHP 文件，请注意，它不准备“多次访问”。我也没有设法删除这个脚本中的一个事件，我停在那里，没有时间。无论如何，您可以理解逻辑并适应您的具体问题。我希望我有所帮助；）。这是脚本：

```
<?php

//error detection
ini_set('display_errors', 1);
ini_set('log_errors', 1);
ini_set('error_log', dirname(__FILE__) . '/error_log.txt');
error_reporting(E_ALL);
 if($_POST['ajax']){
$operation = $_POST['operation'];
    $eventid = $_POST['id'];    
    $eventattributes = array('id'=> $eventid,
                            'title'=>$_POST['title'],
                            'start'=> $_POST['start'],
                            'end'=> $_POST['end'],
                            'allDay'=>$_POST['allDay'],
                                'editable'=>$_POST['editable'],
                              //'backgroundColor'=>$_POST['backgroundColor'],
                              //'borderColor'=>$_POST['borderColor'],
                              //'textColor'=>$_POST['textColor']
                            );  
        if(file_exists('myxml.xml'))
        {       
            $filepath = realpath('myxml.xml');                          
            if(!$xml=simplexml_load_file($filepath)){
            trigger_error('Erro a ler XML',E_USER_ERROR);
        }           
            switch($operation)
                    {
                        case 'edit':{ editXML($xml,$eventid,$eventattributes,$filepath); break;}
                        case 'add':{ $newID = getLastEventID_XML($xml); 
                                     addXML($xml,$filepath,$eventattributes,$newID); break;}
                        case 'remove':{ removeXML($xml,$eventid,$filepath); break;}                         
                        default: {echo 'Operação não  reconhecida!'; break;}                            
                    }       
         }else{         
             exit('Failed to open myxml.xml');
         }      
          }else{
         exit('Nothing to be done!');
          }
         function editXML($xml,$eventid,$eventattributes,$filepath)
               {        
        foreach($xml->events->event as $event)
                    {
        if ($event['id'] == $eventid)
            {
                $event['title'] = $eventattributes['title'];
                $event['start'] = $eventattributes['start'];
                $event['end'] = $eventattributes['end'];
                $event['allDay'] = $eventattributes['allDay'];
                $event['editable'] =    $eventattributes['editable'];                   
            //  $event['backgroundColor'] =   $eventattributes['backgroundColor'];
            //  $event['borderColor'] =  $eventattributes['borderColor'];
            //  $event['textColor'] =  $eventattributes['textColor'];           
                break;
            }           
    }   
    file_put_contents($filepath, $xml->asXml());
}

function addXML($xml,$filepath,$eventattributes,$newID)
{   
    $event = $xml->events->addChild('event');
    $event->addAttribute('id',$newID);
    $event->addAttribute('title',$eventattributes['title']);
    $event->addAttribute('start',$eventattributes['start']);
    $event->addAttribute('end',$eventattributes['end']);
    $event->addAttribute('allDay',$eventattributes['allDay']);
    $event->addAttribute('editable',$eventattributes['editable']);  
    //var_dump($eventattributes);
    file_put_contents($filepath, $xml->asXml());
}

function removeXML($xml,$eventid,$filepath)
{       
    //TODO remove event
}

function getLastEventID_XML($xml)
{
    $id = 0;
    $innercount = 0;
    $count = $xml->events->event->count();  
        foreach($xml->events->event as $event)
            {
                //var_dump($count);
                //var_dump($event['id']);                   
                $innercount++;          
                //var_dump($innercount);
                if ($count === $innercount)
                    {
                        $id = $event['id'];                         
                    }else{
                        $id = 0; 
                    }                                   
            }
    //var_dump($id);
    //echo $id; 
    $id = (int)$id + 1;
    return $id;
}

function getChildNodePosition($xml,$eventid){
    $position = 0;
    $innercount = 0;
    //$count = $xml->events->event->count();    
        foreach($xml->events->event as $event)
            {                                       
                $innercount++;                      
                if ($event['id'] == $eventid)
                    {
                        $position = $innercount;                        
                    }                                   
            }   
return $position;
}   
?> 
```

# asp.net-mvc - 找不到路径“/Login/Index”的控制器或未实现 IController

> ID：16021345
> 
> 赞同：3
> 
> 时间：2013-04-15T17:36:43.207
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在使用 mvc 3 和我的应用程序注册区域时遇到问题，但在应用程序启动时没有功能让我：

```
{System.Web.HttpException (0x80004005): The controller for path '/Login/Index' was not 
found or does not implement IController.
   at System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType)
   at System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName)
   at System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<BeginProcessRequest>b__2()
   at System.Web.Mvc.SecurityUtil.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust[TResult](Func`1 func)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T19:27:30.613

如果在您的 Area 的错误命名空间中声明了 Controller 类，则可能会发生此错误。确保命名空间与区域注册匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T15:16:38.423

这是一个古老的问题，但我真的无法在其他任何地方找到正确的答案。这是我的解决方案：

我有一个包含多个项目的解决方案。所有项目都在 MVC3 中。我在我的机器上安装了 Visual Studio 2012，似乎有些项目自动升级到了 MVC4。

我遇到了这个问题“ `The controller for path '/etc/etc' was not found or does not implement IController`”，因为处理该路由的项目指向 MVC4。

我不得不手动更新他们的引用以使用 MVC3。您也可以通过使用文本编辑器打开 .csproj 文件来做到这一点。找到对 MVC3 的引用并删除此行：

`<SpecificVersion>False</SpecificVersion>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:49:12.297

这意味着 MVC 无法找到实现 的类`IController`，无论是通过默认`Controller`类还是其他某种机制，也就是`Index`在命名空间中命名的`{DefaultNamespace}.Controllers.Login`。

一般来说，如果您像默认的 MVC 项目结构那样构建您的 MVC 应用程序，那么您不会对这种类型的事情有任何问题。

但是，如果您使用了正确的文件夹结构并且这样说，那么`Index`您设置的控制器没有正确继承。

这个答案当然是假设您使用的是第一次从模板创建项目时设置的基本默认路由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-02T14:29:04.670

在我的情况下，默认路由`new { controller = "Home", action = "Index", id = "" }`指向错误的控制器。

全球.asax.cs

```
protected void Application_Start(object sender, EventArgs e)
{
    AreaRegistration.RegisterAllAreas();
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

路由配置.cs

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapMvcAttributeRoutes();

        routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = "" }
        );
    }
} 
```

# database-project - 我可以将带有数据的 BACPAC 导入数据库项目吗？

> ID：16021351
> 
> 赞同：4
> 
> 时间：2013-04-15T17:36:58.210
> 
> 标签：database-project, data-tier-applications, bacpac, dacpac

我有一个数据库，其中包含我想将其转换为 Visual Studio 2012 SQL 数据库项目的数据。

我尝试使用“导入-> 数据层应用程序 (*.dacpac)...” - 我没有收到任何错误，但没有导入数据（并且没有包含数据的选项）。

如何在 BACPAC 导入中包含数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T13:27:51.460

我认为您无法以这种方式包含数据。bacpac 格式是用模式 + 数据为您的目标数据库播种。当您使用普通的 SQL DB 项目时，您需要使用部署前和部署后脚本来处理数据操作。如果您尝试将大量数据加载到新数据库中，则最好将这些数据存储在项目之外并在仅在创建新数据库后运行的脚本中调用该总体。

如果您尝试为该初始加载生成数据，可以使用几个很好的工具。VS 2010 DB Projects 有一个数据比较选项，您可以使用该选项将填充的数据库与新数据库进行比较。Red-Gate 具有 SQL 数据比较功能。我认为 Mladen Prajic 的 SSMS Toolspack 还添加了“生成数据”命令。

# json - 使用地理位置查找商店

> ID：16021352
> 
> 赞同：0
> 
> 时间：2013-04-15T17:37:02.440
> 
> 标签：json, google-maps, geolocation, phpmyadmin

我在下面有以下代码，我以互联网为例。所以我需要做的是使用地理位置显示本地汽车经销商。long 和 lat 存储在 phpmyadmin 数据库中。我需要使用 JSON 来完成。结果是使用当前位置，然后显示该区域的本地汽车经销商，连接到存储经纬度的数据库。因此，它将显示一个带有当前位置的标记和几个其他显示其他汽车经销商的标记。

```
<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <title>Target Store Locator</title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script src="https://raw.github.com/apigee/usergrid-javascript-sdk/0.9.10/usergrid.SDK.js"></script>
        <script type="text/javascript" src="cordova-2.2.0.js"></script>
    </head>

    <body>
        <!-- This is the main page for the app -->
        <div data-role="page" id="results">
            <div data-theme="c" data-role="header">
                <h3>
                    Results
                </h3>
            </div>
            <img id="map" src="https://maps.googleapis.com/maps/api/staticmap?scale=2&center=Palo Alto, CA&amp;zoom=14&amp;size=400x200&amp;markers=Palo Alto, CA&amp;sensor=false" height="200" style="display: block; margin-left: auto; margin-right: auto">
            <div data-role="content">
                <ul id="list" data-role="listview" data-divider-theme="c" data-inset="false" data-count-theme="b">
                    <li data-role="list-divider" role="heading">Nearest Stores</li>
                </ul>
            </div>
        </div>
        <script>
            //Initialize the Usergrid SDK
            Usergrid.ApiClient.init('usergrid', 'tests');

            $(function(){
                if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
                    // Wait for the device to be ready to grab the geoloc
                    // Helps avoid the unsightly iOS authorization message
                    // http://stackoverflow.com/questions/1673579/location-permission-alert-on-iphone-with-phonegap 
                    document.addEventListener("deviceready", onDeviceReady, false);
                } else {
                    onDeviceReady(); //this is the browser
                }
            })

            function onDeviceReady() {
                navigator.geolocation.getCurrentPosition(onGetLocationSuccess, onGetLocationError);     
            }

            // This updates the map, listing and store page
            // for every result
            function renderStore(store, label) {
                var coords = store.get('location').latitude+","+store.get('location').longitude;

                // Update the map
                var src =  $("#map").attr('src') + "&markers=color:blue%7Clabel:"+label+"%7C"+coords;

                // Add a list divider for the Pharmacy and SuperTarget results
                $("#map").attr('src', src);
                switch(label) {
                    case 'S':
                    $("#list").append('<li data-role="list-divider" role="heading">Nearest SuperTarget</li>');
                    break;
                    case 'P':
                    $("#list").append('<li data-role="list-divider" role="heading">Nearest Pharmacy</li>');
                    break;
                }
                // Append to the list of results
                $("#list").append('<li><a href="#page'+store.get('storeNumber')+'" data-role="button" data-transition="slide">'+store.get('name')+'</a><span class="ui-li-count ui-btn-corner-all">'+label+'</span></li>');

                // Necessary for the listview to render correctly
                $("#list").listview('refresh');

                $('body').append('<div data-role="page" id="page'+store.get('storeNumber')+'"><div data-theme="b" data-role="header" data-position="fixed"><h3>'+store.get('name')+'</h3><a data-role="button" data-rel="back" data-icon="arrow-l" data-iconpos="left"class="ui-btn-left">Results</a></div><img id="map" src="https://maps.googleapis.com/maps/api/staticmap?scale=2&center='+coords+'+&zoom=14&size='+window.innerWidth+'x200&markers='+coords+'&sensor=false" height="200"><div data-role="content"><div><p><b>Address</b><br/>'+store.get('location').displayAddress+'</p><p><b>Opening Hours</b><br/>'+store.get('hours').join('<br/>')+'</p></div></div></div>');
            }

            // Most of the magic happens here
            function onGetLocationSuccess(location) {
                // Extract the coordinates in a usable form
                var latlon = location.coords.latitude+","+location.coords.longitude;

                // Prepare the Google Maps marker and update the map
                var home = "color:orange%7C"+latlon;
                $("#map").attr('src', "https://maps.googleapis.com/maps/api/staticmap?scale=2&center="+latlon+"&zoom=10&size="+window.innerWidth+"x200&sensor=false&markers="+home);

                // Initialize a local “stores” object using the SDK
                var stores = new Usergrid.Collection('stores');

                // This query will return all stores within 15,000 meters of the current location
                stores.setQueryParams({"ql":"select * where location within 15000 of "+latlon});

                // Do the actual query and process the results
                stores.fetch( function(response) {

                        // Process the regular store
                        var count = 1;
                        while(stores.hasNextEntity()) {
                            renderStore(stores.getNextEntity(), count);
                            count++;
                        }

                        // Now let’s search for the nearest store with a Pharmacy
                        stores.setQueryParams({"ql":"location within 100000 of "+latlon+" and pharmacy = true", "limit":1});
                        stores.fetch( function(response) {
                            renderStore(stores.getNextEntity(), 'P');

                            // … And the nearest SuperTarget
                            stores.setQueryParams({"ql":"location within 100000 of "+latlon+" and supertarget = true", "limit":1});
                            stores.fetch( function(response) {
                                renderStore(stores.getNextEntity(), 'S')
                                });
                            });
                        });
            }

            function onGetLocationError() {
                alert("could not get your location");
            }

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:20:38.053

使用[**PDO**](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)获取您的数据， `PDO::FETCH_OBJ`然后使用`json_encode`生成 JSON

```
// Prepare statement
$stmt = $dbh->prepare("SELECT  colums FROM table ");
//Execute query
$stmt->setFetchMode(PDO::FETCH_OBJ);
$stmt->execute();
//Show the results  
while($obj = $stmt->fetch()) {  
    $arr[] = $obj;
}
echo '{"marker":'.json_encode($arr).'}'; 
```

# grails - 在 Grails .gsp 文件中使用 Xwiki WYSIWYG 编辑器？

> ID：16021353
> 
> 赞同：0
> 
> 时间：2013-04-15T17:37:09.123
> 
> 标签：grails, groovy, wysiwyg, gsp, xwiki

我正在为我的一个项目使用 Grails，并且我已经安装了 Xwiki 渲染插件（请参阅[http://grails.org/plugin/xwiki-rendering](http://grails.org/plugin/xwiki-rendering)）。现在我想知道是否有任何方法可以在我的 .gsp 文件中使用[xWiki WYSIWYG 编辑器？](http://platform.xwiki.org/xwiki/bin/Features/WysiwygEditor)

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T12:52:56.473

应该可以使用 XWiki Wsywiyg 编辑器。[您可以在此处](http://extensions.xwiki.org/xwiki/bin/view/Extension/WYSIWYG+Editor+Module#HUsetheWYSIWYGeditoroutsideXWiki)查看一些文档，也可以查看[这](http://lists.xwiki.org/pipermail/users/2012-September/023902.html)是 XWiki 平台分支的示例，该分支允许独立构建 XWiki Wysiwyg 编辑器。

如果您需要帮助，可以在 XWiki 开发人员列表中提问（参见 xwiki.org 网站）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:47:45.287

我在我的一个项目中遇到了同样的问题。这并不容易，因为编辑器是 XWiki 平台的一部分，因此您必须下载源代码并解压缩（没有独立的编辑器）。

我所做的是使用[MarkItUp](http://markitup.jaysalvat.com/home/)，因为它支持 Wiki 标签（并且您可以添加自定义宏）。

# php - 电子邮件 pdf 附件 + 来自服务器的附件

> ID：16021358
> 
> 赞同：0
> 
> 时间：2013-04-15T17:37:37.927
> 
> 标签：php, email, attachment, fpdf

我想用一封电子邮件发送 2 个附件。第一个来自 fpdf 类。这完美地工作。现在第二个附件需要来自我服务器上的一个文件夹。但我似乎无法让它正确发送。

这是我的代码

```
$to = $email; 
$from = $user_data['email']; 
$subject = $onderwerp; 
$message = $body;

$separator = md5(time());

$eol = PHP_EOL;

$fileatt = $user_data['verklaring'];  // post variable path to the file
$fileatt_type = "application/pdf"; // File Type
$fileatt_name = 'VAR verklaring ' . $user_data['voornaam'] . ' ' .  $user_data['achternaam'];
$file = fopen($fileatt,'rb');
$data = fread($file,filesize($fileatt));
fclose($file);
$data = chunk_split(base64_encode($data));

$filename = $factuur_data['factuur_nr'] . '.pdf';
$pdfdoc = $pdf->Output("", "S");
$attachment = chunk_split(base64_encode($pdfdoc));

$headers  = "From: ".$from.$eol;
$headers .= "MIME-Version: 1.0".$eol; 
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol; 
$headers .= "Content-Transfer-Encoding: 7bit".$eol;
$headers .= "This is a MIME encoded message.".$eol.$eol;

$headers .= "--".$separator.$eol;
$headers .= "Content-Type: application/octet-stream; name=\"".$fileatt_name."\"".$eol; 
$headers .= "Content-Transfer-Encoding: base64".$eol;
$headers .= "Content-Disposition: attachment".$eol.$eol;
$headers .= $data.$eol.$eol;

$headers .= "--".$separator.$eol;
$headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$headers .= $message.$eol.$eol;

$headers .= "--".$separator.$eol;
$headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
$headers .= "Content-Transfer-Encoding: base64".$eol;
$headers .= "Content-Disposition: attachment".$eol.$eol;
$headers .= $attachment.$eol.$eol;

$headers .= "--".$separator."--";

mail($to, $subject, "", $headers); 
```

我搜索了许多主题，并尝试将这些解决方案集成到我的代码中，如您在上面看到的，但收效甚微。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:46:21.003

发送邮件并不像第一眼看上去那么容易。我建议使用 swiftmailer 之类的成熟库，而不是自己实现它：

看看： [http ://swiftmailer.org/docs/messages.html](http://swiftmailer.org/docs/messages.html)

# php - 添加表前缀以加入 Codeigniter

> ID：16021367
> 
> 赞同：0
> 
> 时间：2013-04-15T17:38:12.100
> 
> 标签：php, codeigniter

我有 Codeigniter 设置以将前缀 kms_ 添加到我的活动记录查询中。但是，我正在尝试使用两个 ON 条件进行连接，并且不会预先添加它们。

现在我必须像这样手动添加它们：

```
$this->db->join('site_items', 'kms_site_items.item_id = kms_items.id AND kms_site_items.site_id = 1', 'left'); 
```

我可以用不同的方式写这个，以便正确添加表前缀吗？

有没有办法让这样的事情起作用：

```
$this->db->join('site_items', 'site_items.item_id = items.id AND site_items.site_id = 1', 'left'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:51:20.170

您可以像这样手动获取当前数据库前缀：

```
$prefixed_tablename = $this->db->dbprefix('tablename'); 
```

所以你可以这样做：

```
$this->db->join('site_items', $this->db->dbprefix('site_items') . '.item_id = ' . $this->db->dbprefix('items') . '.id AND ' . $this->db->dbprefix('site_items') . '.site_id = 1', 'left'); 
```

[文档在这里](http://ellislab.com/codeigniter/user-guide/database/queries.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-26T20:37:10.743

您可以像这样简单地添加`Prefix`表名：
例如，您的表具有`myPrefix_`前缀，其中一个可能是`myprefix_user`.
之后，在`config/database.php`本页底部的您设置您的`database name`，`username`和`password`，您可以看到`dbprefix`，您可以设置您的前缀，如我上面提到的`myPrefix_`。
最后，您可以简单地调用您的表名，`$this->db->get('user')`并自动 Codeigniter 在它的第一个设置您的前缀。

# php - MySQL 布尔类型

> ID：16021373
> 
> 赞同：4
> 
> 时间：2013-04-15T17:38:36.283
> 
> 标签：php, mysql, codeigniter, handlebars.js

我真的很不知道该怎么做这个。在过去的 10 年里，我只是忍受了这个，但我认为是时候决定处理这个问题的正确方法了。

根据互联网，MySQL 不支持本机数据类型，这是有道理的，为什么每当我选择“BOOLEAN”时，我都会看到该列以 tinyint(1) 结尾。

我将数据存储为具有 1 或 0 值的 tinyint 没有问题，但是我确实有一个问题，即当我从数据库中选择具有此列的许多行时，我得到一个字符串“1”或“0”而不是PHP 本机布尔值 true/false。PHP 当然仍然可以将此变量作为布尔值处理，因为它似乎自动知道我想要它做什么，只要我做 == 0 或 == 1 甚至 == '0' 或 == '1' 如果我我真的觉得可以。

因此，我开始了，将这些数据运行到 PHP 的`json_encode`函数中，并在我的 Backbone/Handlebars 实现进行 ajax 调用时输出它，并获得一个漂亮的 JSON 对象（通常其中包含许多行的数据）：`{"myVariable":"1"}`或这个`{"myVariable":"0"}`。

我相信您可以在 Handlebars.js 中看到想要做这样的事情的问题：

```
{{#if myVariable}} 
    Do this
{{else}}
    Do that
{{/if}} 
```

现在，我真正不想做的是这样的事情：

```
<?php
for($i = 0; $i < count($recordSet); $i++) {
    $recordSet[$i]['myVariable'] = (bool)$recordSet[$i]['myVariable'];
}
?> 
```

由于我正在构建的应用程序在数据库中有数千列，因此我不能（或只需要）为我想要在我的 javascript 中像 bool 一样的每一列运行上面的代码。我真的不想这样做（尽管这可能是最简单的）

```
Handlebars.registerHelper('ifTrue', function(a, b) {
    // Cast the compared value to a bool and then run a regular handlebars #if statement
}); 
```

有没有更好的办法？我正在使用代码点火器...可以以某种方式修改数据库类以检测 tinyint(1) 列并自动将其转换为布尔值，然后执行此操作直到 MySQL 支持真正的布尔值列？我知道他们正在计划，但是...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T00:33:41.780

请记住，默认情况下，PHP/MySQL 驱动程序返回的列值只是字符串（即无类型的字节数组）。这个简短的片段演示了它：

```
// mysqli driver
$c = mysqli_connect ($host, $user, $pass, $dbname);
$r = mysqli_query($c, 'SELECT * FROM foo');
$f = mysqli_fetch_array($r);
foreach ($f as $k => $v) {
    echo "$k => $v [" . gettype($v) . ']' . PHP_EOL;
}

// PDO
$c = new PDO("mysql:dbname=$dbname;host=$host", $user, $pass);
$r = $c->query('SELECT * FROM foo');
$f = $r->fetch();
foreach ($f as $k => $v) {
    echo "$k => $v [" . gettype($v) . ']' . PHP_EOL;
} 
```

“默认情况下”，因为可以为驱动程序提供一个映射，以便它可以将这些字符串转换为原生 PHP 类型。为此，`mysqli`有[`mysqli_result::fetch_object()`](http://www.php.net/manual/en/mysqli-result.fetch-object.php)，`PDO`有[`PDOStatement::fetchObject()`](http://www.php.net/manual/en/pdostatement.fetchobject.php)。

虽然可以从其元数据甚至从表定义中检索实际的列类型，但在典型情况下，客户端应用程序提前知道它。

底线是：你*确实*想这样做（或类似的东西）：

```
$recordSet[$i]['myBoolColumn'] = (bool)$recordSet[$i]['myBoolColumn']; 
```

...因为实际上您也应该这样做：

```
$recordSet[$i]['myIntColumn'] = (int)$recordSet[$i]['myIntColumn']; 
```

但是 PHP 在打字方面非常宽松，毕竟我不会太担心这一点。

# ios - xcode中的数据库用于多个位置？

> ID：16021374
> 
> 赞同：0
> 
> 时间：2013-04-15T17:38:36.993
> 
> 标签：ios, objective-c, core-data, annotations, mapkit

我正在尝试在 Xcode 中为每个加油站和主要杂货店的地图上进行注释。除了手动输入它们之外，有没有人知道如何解决这个问题？也许是某种数据库？

如果您确实有想法，请解释一下，以便我可以跟进。对不起，我对此很陌生。:) 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:44:02.520

如果您有权访问这些数据并且只想将其存储在应用程序中，则应该使用[Core Data](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。

如果您首先要查找数据，请查看[Factual](http://www.factual.com/data-apis/places)是否适合您。

# asp.net-mvc-3 - 如何通过这种关系访问不同的模型

> ID：16021375
> 
> 赞同：1
> 
> 时间：2013-04-15T17:38:39.203
> 
> 标签：asp.net-mvc-3, entity-framework, razor

我有一张位置表、一张服务分配表和一张服务表。位置和服务通过服务分配联系在一起。在位置创建中，我希望能够通过复选框为其分配服务。

但我无法访问位置创建视图中的服务。

**位置模型**

```
namespace LocApp.Models
{
    public class Location
    {
        public int id { get; set; }
        public string name { get; set; }
        public bool active { get; set; }

        public virtual ICollection<ServiceAssignment> ServiceAssignment { get; set; }
    }
} 
```

**服务模式**

```
namespace LocApp.Models
{
    public class Service
    {
        public int id { get; set; }
        public string name { get; set; }
        public string description { get; set; }
        public bool active { get; set; }
        public string icon { get; set; }

        public virtual ICollection<ServiceAssignment> ServiceAssignment { get; set; }
    }
} 
```

**服务分配**

```
namespace LocApp.Models
{
    public class ServiceAssignment
    {
        public int id { get; set; }
        public int locationID { get; set; }
        public int serviceID { get; set; }

        public virtual Location Location { get; set; }
        public virtual Service Service { get; set; }
    }
} 
```

在我的上下文类中，我没有映射任何关系，因为根据我看过的文章和屏幕截图，实体框架会为我解决这些问题。

所以这里的主要问题是：

我想在位置创建视图中访问 service.name 和 id 以创建复选框，以便在保存新位置时可以将位置 id 和该服务 id 保存在数据库中。

这里的诀窍是位置和服务具有多对多的关系。

```
service assignment id.
Location id -> service assignment location id 
service assignment service id <- service id 
```

以上是服务分配表的基本布局。位置 <-> 服务的所有关系都通过此表处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:25:42.853

如果您想要一个真正的多对多关联，您可以`ServiceAssignment`从模型中完全删除该类。您的课程应如下所示：

```
public class Location
{
    public int id { get; set; }
    public string name { get; set; }
    public bool active { get; set; }

    public virtual ICollection<Service> Services { get; set; }
}

public class Service
{
    public int id { get; set; }
    public string name { get; set; }
    public string description { get; set; }
    public bool active { get; set; }
    public string icon { get; set; }

    public virtual ICollection<Location> Locations { get; set; }
} 
```

EF 将在数据库中创建一个联结表，并在后台使用它来解析关联。您不能直接将记录添加到此表，但您可以通过将`Add()`现有*服务*添加到`Location.Services`.

**编辑**

鉴于数据模型的约束，您可以做的是将类模型保持原样并像这样查询服务：

```
db.Locations.Where(loc => loc.Id == locId)
    .SelectMany(loc => loc.ServiceAssignments)
    .Select(sa => sa.Service) 
```

您可以通过创建`ServiceAssignment`s 并将它们添加到`Location.ServiceAssignments`.

它可能感觉不如直接多对多关联优雅，但根据我的经验，客户迟早会需要有关关联本身的更详细信息（例如，添加服务的日期）。发生这种情况时，您会很高兴有可用的显式类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:12:19.913

这个想法是使用`tuple<>`它允许我将多个模型传递给视图，然后通过`model.item1.whatever`item1 作为第一个项目来访问它们。

# python - 在另一个 Python 文件中调用带有参数形式的 Python 文件

> ID：16021377
> 
> 赞同：0
> 
> 时间：2013-04-15T17:38:42.937
> 
> 标签：python

假设我需要运行一个 python 文件，`x.py`从 inside`y.py`传递变量`z`from `y.py`to `x.py`。

我将如何做到这一点？像这样的东西会起作用吗？

```
call(["python","x.py",z]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:53:32.030

您需要正确封装您的代码。你应该有这样的东西：

`y.py`

```
def y_func(*args):
    # everything y does
if __name__ == "__main__":
    import sys
    y_func(*sys.argv) 
```

`x.py`

```
from y import y_func
def x_func(*args):
    #do stuff
    y_result = y_func(*yargs)
    #finish x stuff
if __name__ == "__main__":
    import sys
    x_func(*sys.argv) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:46:35.483

尝试这个

```
# y.py
import os
z='argument'
os.system('Python x.py '+z) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:49:28.263

使用`subprocess`优于`os.system`

```
import subprocess
subprocess.check_output(["ls", "-ltr"]) 
```

* * *

在您的情况下，假设您有`a.py`：

```
import sys
print sys.argv[1:] 
```

并在提示中：

```
>>> import subprocess
>>> subprocess.check_output(["python", 'a.py', 'aaa bbb ccc'])
"['aaa bbb ccc']\n"
>>> 
```

# mysql - MYSQL ORDER by Type 并从每种类型中获取 5 行，总共 20 行

> ID：16021387
> 
> 赞同：0
> 
> 时间：2013-04-15T17:39:26.567
> 
> 标签：mysql, count, limit, max

我有这个查询“SELECT Name, Type FROM tabel WHERE Name LIKE :key ORDER BY Type LIMIT 0,25”
我想要做的是从每种类型中获取 5 行并保持对 LIMIT 25 的总响应
我的表结构看起来有点像这样：
名称| A型
| 1
乙 | 2
C | 4D
| 2
E | 2
楼 | 4G
| 1
小时| 2
我 | 2
焦 | 2
所以在答案中我想得到
A 1
G 1
B 2
D 2
E 2
H 2
I 2
C 4
F 4

我尝试了很多东西，但我做不到。任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:55:55.660

尝试在 order by 后使用 Group by type ：

```
SELECT
  ...
FROM
  ...
WHERE
  ...
ORDER BY
 type
GROUP BY
  type; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:26:54.437

我一直在尝试查询我在网上找到的与 PDO 一起解决我的问题的查询，并尝试了很多方案，直到这有效：

```
 $query = "set @num := 0, @Type := ''";
        $query2 = "SELECT Name, Type, (SELECT(@num := if(@Type = Type, @num + 1, 1))) as row_number, ".
        "(@Type := Type) as dummy FROM table WHERE Name LIKE ? ".
        "GROUP BY Type, Name, SearchBy HAVING row_number < 6"; 
    $stmt = $this->pdo->prepare($query);
    $stmt = $this->pdo->prepare($query2);
            $stmt->execute(array($name));
            $count = $stmt->rowCount();
            $rows = $stmt->fetchAll(); 
```

这会给我每种类型的 5 个我想要的

# php - 如果 var == 数组 那么

> ID：16021390
> 
> 赞同：0
> 
> 时间：2013-04-15T17:39:32.437
> 
> 标签：php, arrays

我有一个带有 ids 的数组

```
$audit_answer_ids = array(85, 86); 
```

现在我有一个 foreach

```
$filtered_audits = array();
    foreach ($audits as $audit) {
      if (condition) {
        # code...
      }
      $filtered_audits[] = $audit;
    } 
```

在if（条件）中我需要能够做到

```
$audit['Adusitoria']['id'] != $audit_answer_ids 
```

这样系统就会检查是否`$audit['Adusitoria']['id']`等于数组中的任何 id。将只是一个简单的if 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:44:48.400

使用`in_array`功能：

```
if( !in_array( $audit['Adusitoria']['id'], $audit_answer_ids )) {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:43:16.923

我假设您已经`$audit['Adusitoria']['id']`存储了变量。
我想在数组内部循环然后比较

**代码**

```
$audit_answer_ids = array(85, 86);

foreach ($audit_answer_ids as $data) {
    if ($audit['Adusitoria']['id'] != $data) {
        //do something
    } else {
        //do something else
    }   
} 
```

# mysql - 用于重度只读生产网站的 SQLite 数据库

> ID：16021391
> 
> 赞同：0
> 
> 时间：2013-04-15T17:39:37.933
> 
> 标签：mysql, ruby-on-rails, sqlite

我有一个 Ruby on Rails Web 应用程序，它需要大约 50 次写入数据库来配置自身。然后应用程序的其余生命将涉及读取数据库。该数据库将有大约 50 行。

SQLite 数据库是否足以处理生产服务器上每小时可能达到 10 万次点击的大量数据？或者使用 MySQL 服务器是否明智？（也可以要求 Ruby on Rails 将 SQLite 数据库的全部内容预加载到内存中吗？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:51:43.763

SQLite 会工作吗？是的，但它会比专用的 PostGreSQL 或 MySQL 数据库慢。你无法真正解决这个问题。老实说，如果您的数据库非常小并且您担心速度，请使用 reddis 或其他内存解决方案。使用 SQL 解决方案，您还可以在应用程序启动时进行一次巨大的读取，然后使用 memcache 或 redis 将其放入内存中。但是 redis 是持久的，所以如果你走那条路，你可以只使用 redis 并一起避免 SQL。

# java - 在 SystemTray 中设置 MenuItem 不可点击

> ID：16021392
> 
> 赞同：0
> 
> 时间：2013-04-15T17:39:42.213
> 
> 标签：java, swing, jframe, jmenuitem, jpopup

我想在 Java 中设置我的 Menuitem 不可点击。当您将鼠标悬停在它上面时，它应该显示出来，但不能点击，并且不应该有悬停颜色。换句话说，我想在系统托盘菜单中显示信息文本。它没有点击功能。系统托盘和显示完全正常，我只需要解决上述问题。

```
 MenuItem itmPrgName = new MenuItem(Main.programmName + " " + Main.version); 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:02:33.440

> 我想在 Java 中设置我的 Menuitem 不可点击。当您将鼠标悬停在它上面时，它应该显示出来，但不能点击，并且不应该有悬停颜色。换句话说，我想在系统托盘菜单中显示信息文本。它没有点击功能。

*   用作`JPopup`放在那里的容器//或`JLabel`包含`JTextArea(setEditable(false))`不同数量的`JTextPane (setEditable(false))``JPanel``JComponents`

*   `LayoutManager`如果需要，为 JPopup 或 JPanel设置适当的

# ember.js - 如果在 Ember-Data 中两者都是新的，则无法保存 hasMany/belongsTo 关系

> ID：16021393
> 
> 赞同：2
> 
> 时间：2013-04-15T17:39:42.663
> 
> 标签：ember.js, ember-data

我有两个模型。

```
App.Request = DS.Model.extend({
    materials: DS.hasMany('App.Material')
});

App.Material = DS.Model.extend({
    request: DS.belongsTo('Mat.Request')
}); 
```

在创建请求的表单中，我创建了一个新请求：

```
App.Request.createRecord(); 
```

并将其绑定到表单的字段。要创建新材料，请单击一个按钮，然后会出现一个模式。当模态出现时，它会在请求的材料数组中创建一个新材料：（材料模态有自己的控制器，所以我必须通过到 RequestsNewController 来获取请求。）

```
this.get('controllers.requestsNew.materials').createRecord(); 
```

耶！有用。我可以向请求中添加许多材料，并且 UI 正在更新以显示关联正在正确创建。惊人的！直到...我点击了保存按钮，从 RequestsNewController 调用此代码：

```
this.get('transaction').commit(); 
```

现在，我添加到请求中的材料被撕掉了（显示请求中材料的模板部分现在不显示任何材料。）

这是我的代码的一个非常简化的版本，但关键是在我将数据提交到服务器之前，一切看起来都很好。我对正在发生的事情有一个理论，但我不知道如何解决它！顺便说一下，我在后端使用带有 Active Model Serializers 的 Rails。

当我调用 commit 时，Rest Adapter 首先 POST 到 /requests。记录被添加，我从服务器得到以下信息：

```
{
    "request": {
        "id": 30,
        "material_ids": []
    }
} 
```

耶！我的请求已保存，现在我从服务器获得了一个 ID。

接下来，REST 适配器 POST 到 /materials 并**发送**以下 JSON：

```
{
    "material": {
        "request_id": 0,
    }
} 
```

服务器做出响应，给材料一个 ID。

但这是什么？REST 适配器正在发送 request_id: 0，而不是 request_id: 30，就像它应该发送的那样？

这是我的理论：保存请求后，服务器会以一个空的 material_id 数组进行响应。这是有道理的！我们还没有将材料发送到服务器，因为我们首先需要请求 ID！但是，当 Ember Data 看到一个空的 material_id 数组时，它会从请求中删除这些材料。然后，当材料保存时，它们不再有请求，因此 request_id：0。

当我创建一个没有材料的请求时，提交，添加材料，提交，它起作用了！

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:52:38.610

我认为这是目前已知的问题，您的理论是正确的。ATM，我有两种解决方法。第一个是在请求中嵌入材料，通过像这样配置适配器：

```
DS.RESTAdapter.map('App.Request', {
  materials: {embedded: 'always'}
}); 
```

第二个是在请求的 didCreate 事件上添加一个观察者，添加创建后的材料，然后再次提交。

以下是与此相关的当前问题：[https ://github.com/emberjs/data/pull/440](https://github.com/emberjs/data/pull/440) [https://github.com/emberjs/data/pull/724](https://github.com/emberjs/data/pull/724) [https://github.com/emberjs/data /issues/437](https://github.com/emberjs/data/issues/437) [https://github.com/emberjs/data/pull/643](https://github.com/emberjs/data/pull/643)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:12:10.967

您可能对该 PR 感兴趣[https://github.com/emberjs/data/pull/876](https://github.com/emberjs/data/pull/876)

# php - Windows 7 家庭基本 64 位 + xampp + Apache 2.4.2 + PHP 5.4.4 上的 MemcacheD

> ID：16021394
> 
> 赞同：0
> 
> 时间：2013-04-15T17:39:43.437
> 
> 标签：php, windows, apache, memcached, 64-bit

我查找了整个互联网，但没有找到 Memcached 模块的正确 .dll。

我找到了一些“Memcached.exe”文件，但我不确定这个模块是否带有可执行文件或者它是病毒。我看起来像一个星期，没有找到可以帮助我解决这个问题的东西！

这是我计算机的 apache 配置的一些技术规范 Apache 版本 Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4

有人知道我在哪里可以找到它吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:26:50.557

一种选择是运行 Couchbase Server。Couchbase 包含一个用于 memcached 存储桶的存储桶类型，它与运行普通的 memcached（相同的代码库）完全相同，并且在 Windows 上运行。[您可以在这里http://www.couchbase.com/download](http://www.couchbase.com/download)下载 Couchbase 。

# codeigniter - codeigniter clean url，但传递变量以动态构建页面

> ID：16021396
> 
> 赞同：0
> 
> 时间：2013-04-15T17:39:56.240
> 
> 标签：codeigniter, codeigniter-2

据我了解，在像 wordpress 这样的 CMS 中，所有页面都是通过 url 发送变量然后将 url 简化为 www.example.com/my-first-blog-post/ 之类的东西来动态构建的。我假设它发送帖子 id 并且不仅仅依赖于博客帖子的 url 名称。

使用 codeigniter，我有我的博客控制器和我的博客模板设置，但是我不确定我将如何实现类似 wordpress 的东西。我需要一个像 www.example.com/my-first-blog/12/ 这样的网址才能传递帖子的 ID。有没有办法隐藏 12 或者我改为通过它的 url 名称搜索博客文章？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:32:54.843

您可以使用 url 段进行帖子查找。（这些`my-first-post`就像通常称为 slug 的字符串）。您必须预先生成这些并将它们与帖子一起保存。

您可以使用路由配置`$route['404_override']`将每个其他不可路由的路径定向到控制器。设置完成后，您将必须使用博客帖子的参数进行查询，如果找到，则为帖子内容提供服务，如果没有，则发送常规 404。像这样：

```
// application/config/routes.php
$route['404_override'] = 'blog/show_post'; // controller/action

// application/controllers/blog.php
class Blog extrends CI_Controller {
    public function show_post() {
        // get the first segment, the "first-post" from http://example.com/first-post
        $slug = $this->uri->segment(0); 
        $post = $this->posts->find_by_slug($slug); // imaginary posts model with db query
        if (!$post) { // if the post not found by slug
            show_404(); // return 404 as usual
        } else {
            $this->load->view('blog/show', array($post)); // post found, display it
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T09:48:47.573

您可以使用 url 段进行帖子查找。（这些 my-first-post 之类的字符串通常称为 slug）。您必须预先生成这些并将它们与帖子一起保存。

您可以使用路由配置的 $route['404_override'] 将每个其他不可路由的路径定向到控制器。设置完成后，您将必须使用博客帖子的参数进行查询，如果找到提供帖子内容，则发送常规 404。类似这样的内容：阅读这篇文章 [http://www.obatkesehatanalami.com](http://www.obatkesehatanalami.com)

# java - 堆排序数组

> ID：16021397
> 
> 赞同：-5
> 
> 时间：2013-04-15T17:39:57.540
> 
> 标签：java, arrays, sorting, heapsort

谁能向我解释下一个代码序列是如何工作的。

```
 PriorityQueue<Integer> pQueue = new PriorityQueue<Integer>();       
 for (int w : x) {
     pQueue.add(w);
 }
 for (int k = 0; k < x.length; k++) {
     x[k] = pQueue.poll();
 }

 // Print the array
 System.out.println("\nHere is the sorted array with HeapSort:");
 for (int w : x) {
     System.out.print(w + "  ");   
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:49:52.390

```
PriorityQueue<Integer> pQueue = new PriorityQueue<Integer>(); 
```

此行创建一个整数优先级队列。优先级队列存储项目的**“排序”**列表（在您的情况下为整数）。

当您将 int 添加到 pQueue 时，它​​会将值放置在正确的位置。

例如，如果我按此顺序将数字 1、10 和 5 添加到优先级队列中，则会发生以下情况：

```
pqueue = {}          //empty at start
pqueue = {1}         //1 added
pqueue = {1->10}     //10 added
pqueue = {1->5->10} // 5 added 
```

注意 5 是如何放在 1 和 10 之间的。

当您调用`pQueue.poll();` pQueue 的第一个元素时，它保证是队列中的最小值。（在此过程中，值将从队列中删除）。

重复调用将按 1、5、10 的顺序返回上例中的数字。

因此，您的数组得到排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:49:09.780

正如@DeltaLima 提到的，来自[PriorityQueue 文档](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)-

> 基于优先级堆的无界优先级队列。优先级队列的元素根据它们的自然顺序进行排序，或者由队列构建时提供的 Comparator 排序，具体取决于使用的构造函数。

当您使用定义了自然顺序的整数时，它可以开箱即用。

我唯一不确定的是这是否是*真正的*堆排序 - [http://en.wikipedia.org/wiki/Heapsort](http://en.wikipedia.org/wiki/Heapsort)

我希望这会有所帮助。

# sql - sql min() 在哪里

> ID：16021399
> 
> 赞同：0
> 
> 时间：2013-04-15T17:40:03.023
> 
> 标签：sql, subquery, min

我想找到“rsp_ver”以 2.0 或更高版本而不是 1.0 开头的情况。我想我可以在 where 子句中使用条件来找出子查询找到的 rsp_ver 代码超过“1.0”的 ID：

```
select 
  trim(INS.fst_name) || '  ' || Trim(INS.lst_name) as name,
  IDS.rin,
  RSP.unit_id,
  RSP.indv_id,
  RSP.rsp_id,
  RSP.rsp_sqnm,
  RSP.rsp_ver,
  cast(RSP.post_ts as char(16)) as Post,
  RSP.post_audit_id
from 
  dhsdb2.wvs_rsp RSP
  join dhsdb2.indv_name_srch INS on RSP.indv_id = INS.indv_id
  join dhsdb2.indv_demg_srch IDS on RSP.indv_id = IDS.indv_id
where 
  RSP.indv_id in 
    (select 
       SRSP.indv_id 
     from 
       dhsdb2.wvs_rsp SRSP 
     where 
       SRSP.indv_id = RSP.indv_id and
       SRSP.rsp_ver > '1.0')
  and rsp.clse_ts is null 
order by
  RSP.rsp_ver; 
```

这当然行不通。然后我想我需要那个内部查询来拥有 min 函数，但我跑了 int

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:55:13.987

假设`rsp_ver`始终采用 [Major Version].[Other Version Info] 的格式，您可以替换 where 子句中的嵌套选择：

```
RSP.indv_id in 
    (select 
       SRSP.indv_id 
     from 
       dhsdb2.wvs_rsp SRSP 
     where 
       SRSP.indv_id = RSP.indv_id and
       SRSP.rsp_ver > '1.0') 
```

具有以下内容：

```
CAST(SUBSTRING(RSP.rsp_ver, 1, CHARINDEX('.', RSP.rsp_ver)-1) AS INT) >= 2 
```

这会从您的`rsp_var`列中获取主要版本部分，将其转换为`INT`，然后仅返回主要版本为 2 或更高版本的行。

`rsp_ver`当您拥有多于一位小数的版本号（即 2.0.1）时，这比简单地转换为数值有好处。缺点是它只检查当前形式的主要版本。

如果您需要更精细地过滤，您可以创建一个[公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)`rsp_ver`，从列中选择不同的版本部分`indv_id`，然后加入该查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:46:53.320

`'`从子句中删除`Where`，以便将列作为 a`number`而不是字符串进行比较

```
select 
  trim(INS.fst_name) || '  ' || Trim(INS.lst_name) as name,
  IDS.rin,
  RSP.unit_id,
  RSP.indv_id,
  RSP.rsp_id,
  RSP.rsp_sqnm,
  RSP.rsp_ver,
  cast(RSP.post_ts as char(16)) as Post,
  RSP.post_audit_id
from 
  dhsdb2.wvs_rsp RSP
  join dhsdb2.indv_name_srch INS on RSP.indv_id = INS.indv_id
  join dhsdb2.indv_demg_srch IDS on RSP.indv_id = IDS.indv_id
where 
  RSP.indv_id in 
    (select 
       SRSP.indv_id 
     from 
       dhsdb2.wvs_rsp SRSP 
     where 
       DRSP.indv_id = RSP.indv_id and
       SRSP.rsp_ver > 1.0)
  and rsp.clse_ts is null 
order by
  RSP.rsp_ver; 
```

# flash - 在 Flash CS6 中，如何使按钮在单击时消失？

> ID：16021400
> 
> 赞同：0
> 
> 时间：2013-04-15T17:40:07.400
> 
> 标签：flash, button, adobe, action

在单击按钮本身以显示其下方分层的图像后，我试图使按钮消失。为了做到这一点，它可以产生任何效果，我只需要它变得透明或离开屏幕。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:49:14.003

如果您有一个名为“myButton”的按钮：

```
//listen for mouse clicks
myButton.addEventListener(MouseEvent.CLICK, mouseHandler);

//handle mouse clicks
function mouseHandler(event:MouseEvent):void
{
    //stop listening for clicks
    myButton.removeEventListener(MouseEvent.CLICK, mouseHandler);
    //make button invisible
    myButton.visible = false;
} 
```

这将使按钮在单击时立即消失。如果要应用淡入淡出效果...

```
myButton.addEventListener(MouseEvent.CLICK, mouseHandler);

function mouseHandler(event:MouseEvent):void
{
    myButton.removeEventListener(MouseEvent.CLICK, mouseHandler);
    addEventListener(Event.ENTER_FRAME, fadeOut);
}

function fadeOut(event:Event):void
{
    var a:Number = myButton.alpha-0.05;
    if (a<=0)
    {
        a = 0;
        removeEventListener(Event.ENTER_FRAME, fadeOut);
    }
    myButton.alpha = a;
} 
```

# php - 无法在php中跨页面使用登录会话

> ID：16021401
> 
> 赞同：0
> 
> 时间：2013-04-15T17:40:10.290
> 
> 标签：php

我无法将登录会话信息传递给其他 HTML 页面。下面是我的登录 php 代码。我可以成功登录，但无法将信息传递到 HTML 主页等其他页面，尽管我没有登录，但它会被打开。我尝试了相同的不同代码

```
<?php

require_once("config.php");

$email=$_POST['email'];
$password=$_POST['password'];

$email = stripslashes($email);
$password = stripslashes($password);
$email = mysql_real_escape_string(strip_tags($email));
$password = mysql_real_escape_string(strip_tags($password));

// Check occurence of email password combination
$sql="SELECT * FROM register WHERE email='$email'";
$result=mysql_query($sql); 

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $email, table row must be 1 row
if($count==1)
{
$row = mysql_fetch_array($result);
if($password == $row['password'])
{
session_start();
$_SESSION['login'] = "1";
header("location:home.html");
exit;
}
else 
{
echo "Please enter correct Password";
header("location:login.html");
session_start();
$_SESSION['login'] = '' 
exit();
}
 }  
else
{
header("Location:register.html");
exit();
}

?>

Below is the php snippet that I use at the top of my HTML page:
<?php

require_once("config.php");
session_start();
if (!(isset($_SESSION['login']) && $_SESSION['login'] != '')) {

header ("Location: login.html");

exit;

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:41:40.420

将 .html 文件更改为 .php 文件。从 开始`session_start();`，这是因为 HTML 页面是静态的，而 PHP 是动态的。

在此之后，您将能够使用`$_SESSION['login']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:01:39.170

session_start(); 应该只在登录成功时使用。

从“我在 HTML 页面顶部使用的 php 片段”中删除该行，一切都应该没问题。

所以你的代码是：

```
<?php

require_once("config.php");
if (!(isset($_SESSION['login']) && $_SESSION['login'] != '')) {

header ("Location: login.html");

exit;

}
?> 
```

# magento - Magento：在哪里可以找到从管理员上传的占位符图片

> ID：16021404
> 
> 赞同：0
> 
> 时间：2013-04-15T17:40:17.897
> 
> 标签：magento

我从管理员上传了三个占位符图像（系统 > 配置 > 目录 > 产品图像占位符）。我已经在数据库（`core_config_data`表）中确认这些设置已应用，并且我也在管理员中看到了这些占位符图像的预览。

但是，当我导航到所有主题（基本、默认、my_theme 等）`/skin/frontend/.../images/catalog/product/placeholder`在哪里时`...`，图像仍然是默认的 Magento 占位符。

上传的图片存放在服务器的哪个目录下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:37:22.323

您可以右键单击管理员中的小缩略图，然后单击属性或检查元素（取决于您的浏览器）。

在我的基础 CE 1.7.0.2 安装中，图像存储在此处：`/media/catalog/product/placeholder/default/`

# php - mysqli returns nothing

> ID：16021405
> 
> 赞同：0
> 
> 时间：2013-04-15T17:40:23.640
> 
> 标签：php, mysqli

I have a mysql table like this

```
name    adults  children
single  1        0  
double  2        0  
suite   3        0 
```

But I'm unable to retrieve the values of "adults" and "children" with this function

```
function getInfo($mysqli, $c, $query){

    // WARNING! THIS LINE IS NOT THE SQL QUERY BUT JUST AN ERROR LOG!
    error_log("query is: SELECT " . $query . " FROM categories WHERE `name` = " . $c);

    $mysqli->select_db("hotel");

    $sql = $mysqli->prepare("SELECT ? FROM categories WHERE `name` = ?
    LIMIT 0, 999999");

    $sql->bind_param('ss', $query, $c);

    $sql->bind_result($result);

    while ($sql->fetch())
        return($result);

} 
```

error log shows the variables are correctly passed to the function:

```
[15-Apr-2013 19:36:10] SELECT adults FROM categories WHERE `name` = single 
```

why is this function returning `NULL`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:13:54.060

You miss `$sql->execute();`

```
$sql->bind_param('ss', $query, $c);
$sql->execute();
$sql->bind_result($result); 
```

# jquery - 如何将变量从 jQuery 可拖动传递到可放置

> ID：16021408
> 
> 赞同：4
> 
> 时间：2013-04-15T17:40:27.187
> 
> 标签：jquery, variables, draggable, droppable

我正在尝试使用 jQuery draggable/droppable 将列表项拖到 div 中，在此列表项将从可拖动的 ul 中删除，并且将进行 ajax 调用以删除 MySQL 数据库中的相应项。

的HTML：

```
<ul id="draggable">
 <li id="list_1">List item 1</li> // Incrementing ID nos. from database
 <li id="list_2">List item 2</li>
 <li id="list_3">List item 3</li>
</ul>

<div id="droppable"></div> 
```

到目前为止的jQuery：

```
$('#draggable li').draggable({
 drag: function(event, ui) {
  var id = $(this).attr('id').split("_");
  id = id[1];    // OK so far - but how to pass this to droppable?
  }
});

$('#droppable').droppable({
 drop: function(event, ui) {
  // How to get the id from draggable here so the correct list item is acted on?
  $('#draggable li').remove();
  $.ajax({ 
   url: "delete.php",
   type: "GET",
   data: {
    'id': id,
    'user_id': user_id  // user_id comes from PHP
  }, // end ajax        }
}); 
```

**更新**

非常感谢您的回复。我让它工作使用：

```
<script>
 var user_id = "<?php print($user_id); ?>";

 $(document).ready(function() {

    $('#draggable li').draggable({
      helper: 'clone'
    });

    $('#droppable').droppable({
      accept: '#draggable li', 
       drop: function(ev, ui) {
         var id = $(ui.draggable).attr('id').split("_");
         var movie_id = id[1];
         $('#draggable li#list_' + id).remove();

         $.ajax({ // begin add ajax
            url: "delete.php",
            type: "GET",
            data: { // begin add data
              'id': id,
               'user_id': user_id
            } // end data
         }); // end ajax

       } // end drop function
    }); // end droppable
 }); // end ready

</script> 
```

对我来说似乎没问题 - 你能看到的有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T17:54:43.500

`ui.draggable.attr('id')`您可以在 drop 函数中使用 using 访问拖动的元素。

[小提琴](http://jsfiddle.net/c3TpU/)

[查看文档](http://api.jqueryui.com/droppable/#event-drop)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T18:18:32.460

出于多种原因，您不应在“拖动”回调中管理任何内容：

*   因为它是在每个“移动”事件中触发的，所以你正在以一种无用的方式更新你的“id”变量
*   因为您可以轻松地在“drop”回调中访问您的元素

观看更新的 JSFiddle：http: [//jsfiddle.net/nVx7a/23/](http://jsfiddle.net/nVx7a/23/)

HTML：

```
<ul id="draggable">
    <li id="list_1" data-id='1'>List item 1</li>
    <li id="list_2" data-id='2'>List item 2</li>
    <li id="list_3" data-id='3'>List item 3</li>
</ul>
<div id="droppable"></div> 
```

和 JS：

```
$(document).ready(function () {
    $('#draggable li').draggable();

    $('#droppable').droppable({
        drop: function(event, ui) {
            var $element = $(event.toElement), // equivalent to $(ui.helper);
                id = $element.data('id'), // HTML5 way, equivalent to $element.attr('data-id');
                // id = $(this).attr('id').split("_"); // HTML4 way
                $YOUR_PHP_VAR = 1;

            console.log($element, id, $YOUR_PHP_VAR);
            // Lock the UI, display a loader or something...

            $.ajax({ 
                url: "delete.php",
                type: "GET",
                data: {
                    'id': id,
                    'user_id': $YOUR_PHP_VAR  // user_id comes from PHP
                }
            }).done(function (response) {
                console.log('success', response);
                // Once your Database request is successfully executed, remove the element from your UI.
                $element.remove();
            }).fail(function (response) {
                console.log('fail', response);
            });
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:08:50.437

## 试试这个：- [http://jsfiddle.net/aidioo7/vLUVa/1/](http://jsfiddle.net/adiioo7/vLUVa/1/)

# JS：-

```
$('#draggable li').draggable({
    drag: function (event, ui) {
    }
});

var user_id="temp";

$('#droppable').droppable({
    drop: function (event, ui) {
        // How to get the id from draggable here so the correct list item is acted on?
        $('#draggable li').remove();
        var id=$(ui.helper).attr("id").split("_");
        id=id[1];
        $.ajax({
            url: "delete.php",
            type: "GET",
            data: {
                'id': id,
                    'user_id': user_id // user_id comes from PHP
            } // end ajax        }
        });
    }
}); 
```

# HTML:-

```
<ul id="draggable">
    <li id="list_1">List item 1</li>
    <li id="list_2">List item 2</li>
    <li id="list_3">List item 3</li>
</ul>
<div id="droppable" style="height:300px;width:300px;background:green;"></div> 
```

# regex - 哈希中的匹配值

> ID：16021409
> 
> 赞同：0
> 
> 时间：2013-04-15T17:40:33.173
> 
> 标签：regex, perl, hashtable, match

我有两个哈希数组。我想根据第一个变量缩小第二个。

第一个数组包含键`seqname`为 , `source`, `feature`, `start`, `end`, `score`, `strand`, `frame`,`geneID`和的哈希值`transcriptID`。

第二个数组包含键 `organism`为 、`geneID`、`number`、`motifnumber`、`position`和`strand`的散列`sequence`。

我想要做的是从第一个哈希数组中删除所有具有变量的哈希，该变量在第二个数组的任何哈希中`geneID`都***找不到***。- 注意两种类型的哈希都有`geneID`键。简单地说，我想将这些散列保留在第一个数组中，这些散列的`geneID`值可以在第二个数组的散列中找到。

到目前为止，我的尝试是使用两个循环：

```
my @subset # define a new array for the wanted hashes to go into.

for my $i (0 .. $#first_hash_array){  # Begin loop to go through the hashes of the first array.

    for my $j (0 .. $#second_hash_array){ # Begin loop through the hashes of the 2nd array.

        if ($second_hash_array[$j]{geneID} =~ m/$first_hash_array[$i]{geneID}/)
        {
           push @subset, $second_hash_array[$j];
        }

    }

} 
```

但是，我不确定这是解决此问题的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:00:39.147

首先，`$a =~ /$b/`不检查是否相等。你需要

```
$second_hash_array[$j]{geneID} =~ m/^\Q$first_hash_array[$i]{geneID}\E\z/ 
```

或者干脆

```
$second_hash_array[$j]{geneID} eq $first_hash_array[$i]{geneID} 
```

为了那个原因。

* * *

第二，

```
for my $i (0 .. $#first_hash_array) {
   ... $first_hash_array[$i] ...
} 
```

可以更简洁地写成

```
for my $first (@first_hash_array) {
   ... $first ...
} 
```

* * *

名单上的下一个是

```
for my $second (@second_hash_array) {
    if (...) {
       push @subset, $second;
    }
} 
```

可以`$second`多次添加`@subset`。您要么需要添加一个`last`

```
# Perform the push if the condition is true for any element.
for my $second (@second_hash_array) {
   if (...) {
      push @subset, $second;
      last;
   }
} 
```

或移出`push`循环

```
# Perform the push if the condition is true for all elements.
my $flag = 1;
for my $second (@second_hash_array) {
   if (!...) {
      $flag = 0;
      last;
   }
}

if ($flag) {
   push @subset, $second;
} 
```

取决于你想做什么。

* * *

要从数组中删除，可以使用`splice`. 但是从数组中删除会弄乱所有索引，因此最好向后迭代数组（从最后一个索引到第一个索引）。

它不仅复杂，而且价格昂贵。每次拼接时，数组中的所有后续元素都需要移动。

更好的方法是过滤元素并将结果元素分配给数组。

```
my @new_first_hash_array;
for my $first (@first_hash_array) {
   my $found = 0;
   for my $second (@second_hash_array) {
      if ($first->{geneID} eq $second->{geneID}) {
         $found = 1;
         last;
      }
   }

   if ($found) {
      push @new_first_hash_array, $first;
   }
}

@first_hash_array = @new_first_hash_array; 
```

* * *

反复迭代`@second_hash_array`是不必要的昂贵。

```
my %geneIDs_to_keep;
for (@second_hash_array) {
   ++$geneIDs_to_keep{ $_->{geneID} };
}

my @new_first_hash_array;
for (@first_hash_array) {
   if ($geneIDs_to_keep{ $_->{geneID} }) {
      push @new_first_hash_array, $_;
   }
}

@first_hash_array = @new_first_hash_array; 
```

* * *

最后，我们可以将其替换`for`为 a`grep`以给出以下简单有效的答案：

```
my %geneIDs_to_keep;
++$geneIDs_to_keep{ $_->{geneID} } for @second_hash_array;

@first_hash_array = grep $geneIDs_to_keep{ $_->{geneID} }, @first_hash_array; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:00:59.063

我就是这样做的。

为所需的geneIDs创建一个数组**req_geneID**，并将第二个哈希的所有geneIds 放入其中。

遍历第**一个哈希**并检查**geneId**是否包含在**req_geneID**数组中。*（在 ruby​​ 中使用“include”很容易，但你可以[在](https://stackoverflow.com/questions/2860226/how-can-i-check-if-a-perl-array-contains-a-particular-value)perl 中尝试）*

和，

最后在 perl中使用[this删除与](http://www.cs.mcgill.ca/~abatko/computers/programming/perl/howto/hash/)**req_geneID**中的任何geneID 不匹配的哈希

```
for (keys %hash)
{
    delete $hash{$_};
} 
```

希望这可以帮助.. ：）

# javascript - 在 Javascript/HTML 中使用 Web.config 应用程序数据

> ID：16021411
> 
> 赞同：0
> 
> 时间：2013-04-15T17:40:39.163
> 
> 标签：javascript, html, .net, asp.net-mvc-3, razor

我正在使用[本教程](http://goo.gl/cSoZE)将变量从 web.config 文件转换为 .NET 。现在我想在 JavaScript 中使用完全相同的变量，但根据我的研究，该 `WebConfigurationManager`变量在 HTML 中不可用，关于如何做到这一点的任何线索？

谢谢

编辑 ：

我尝试以这种方式实现建议的代码（只是为了确保它给我想要的输出）：

```
var myJsVar = '<%= ConfigurationSettings.AppSettings["MyConfigValue"] %>';
alert(myJsVar); 
```

up的值`myJsVar`作为

```
<%= ConfigurationSettings.AppSettings["MyConfigValue"] %> 
```

当我做 '<%= ConfigurationSettings.AppSettings["MyConfigValue"] %>'

而当我这样做时，`alert(myJsVar.valueof());`我会收到`undefined`输出

我也尝试使用`WebConfigurationManager`而不是`ConfigurationSettings`它经历了相同的逻辑......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:44:05.010

您只需要将设置输出到您想要的变量中。在你的 javascript 中的某个地方，你会放：

```
<script language="javascript">

    var mySetting = '<%=ConfigurationManager.AppSettings["mySetting"] %>';

</script> 
```

这`<%=`是一个`Response.Write`将字符串结果输出到呈现的标记的命令。从这一点开始`mySetting`，任何组件都可以访问该变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T17:43:51.833

您可以将值呈现给 aspx 页面，作为对 JavaScript 变量的赋值：

```
var myJsVar = '<%= ConfigurationSettings.AppSettings["MyConfigValue"] %>'; 
```

所以这种方式，`myJsVar`将被初始化为`MyConfigValue`. 希望这可以帮助。

**编辑**

如果您使用的是 Razor，您应该使用这种方式

```
var myJsVar = '@System.Configuration.ConfigurationManager.AppSettings["MyConfigValue"]'; 
```

# javascript - 如何在 Firefox 中覆盖 Ctrl + N 以启动 AJAX

> ID：16021413
> 
> 赞同：5
> 
> 时间：2013-04-15T17:40:43.977
> 
> 标签：javascript, ajax, firefox

**注意：**胡安门德斯的答案是选定的答案，因为它对我的情况最有用。虽然 AxGryndr 也有一些有用的信息。阅读两个答案，它们都适用于不同的情况。谢谢你们俩的帮助。

[我已经在这里](https://stackoverflow.com/questions/15911785/overriding-shortcut-keys-in-firefox-and-chrome/15913471)问了一个类似的问题，它确实解决了我问题的第一部分，现在我有了另一个问题。我希望 Ctrl + N 启动一个包含 AJAX 的脚本，但是一旦我运行 .get 函数，它就会导致默认启动。有谁知道解决这个问题。

这个小提琴有一些代码可以显示我的问题。这是一些代码。

```
function checkkey(e)
{
    if(e.ctrlKey && e.keyCode == 'N'.charCodeAt(0) && !e.shiftKey && !e.altKey)
    {
        try{e.preventDefault();}catch(ex){}
        var m_objXMLHttpReqObj = new XMLHttpRequest();
        m_objXMLHttpReqObj.open("GET", "", false);
        m_objXMLHttpReqObj.send();
    }
} 
```

[JSFIDDLE](http://jsfiddle.net/wolfcall/4kncF/5/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:12:39.697

您的代码没有阻止默认行为

```
function checkkey(e) {
    if(e.ctrlKey && e.keyCode == 'N'.charCodeAt(0) && !e.shiftKey && !e.altKey) {
        e.preventDefault();
        // Now send your AJAX 
```

AJAX 似乎也干扰了停止默认行为的能力。你试图发送一个同步的 AJAX 请求（永远不要这样做，它会停止浏览器）并且你没有给它一个 URL 去（触发一个错误）。只要您更改设置以正确地为其提供 URL 并使其异步，它就可以在 FF 中工作。

这是工作代码

```
function checkkey(e) {
    if(e.ctrlKey && e.keyCode == 'N'.charCodeAt(0) && !e.shiftKey && !e.altKey){
        e.preventDefault();
        var m_objXMLHttpReqObj = new XMLHttpRequest();
        m_objXMLHttpReqObj.open("GET", 
                // URL to go to
                "/echo/html/", 
                // Asynchronous
                true);
        m_objXMLHttpReqObj.send("");
    }
} 
```

但是，在 Chrome 中（它可能对您没有用，但对阅读此答案的其他人），[如果您`console.log` 在处理程序的顶部](http://jsfiddle.net/4kncF/6/)添加 a ，您会看到处理程序永远不会得到。因此，Chrome 甚至不会让您看到`CTRL+N`组合，您也无能为力。就像 Windows 应用程序不会收到通知一样`CTRL+ALT+DEL`

如果应用程序必须适用于多个浏览器，我的建议是使用不同的组合，例如`ALT+SHIFT+N`，您真的不想接管基本的浏览器快捷方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:49:28.153

我相信您的问题是您正在检查按键并在按键后执行您的操作为时已晚。如果您更改代码以绑定到 Ctrl+NI 的 keydown，则认为您将能够获得所需的结果。就像是：

```
var pKey
$(function() {
$(window).keydown(function(e) {
    if(e.which == 17) {
        pKey = e.keyCode;
    }
    else {
        if(pKey == 17 && e.keyCode == 78) {
            e.preventDefault();
            console.log(e);
        }
    }
});
}); 
```

我添加了全局变量来捕获 Ctrl 键按下，即键码 17。然后我在第二个键按下键上捕获键码 78，即 N。之前的 e.preventDefault() 不足以阻止新窗口，所以我不得不添加可以删除 e.stopPropagation()、e.stopImmediatePropagation() 和 console.log(e) 的额外行。正如 Juan M 提到的，不再需要其他的，所以我更新了代码以不包括它们。

**注意：** Firefox 更改了关键出价优先级。它曾经是 System>Website>Firefox 但是似乎人们在抱怨网站劫持了快捷方式，因此优先级已更改为 System>Firefox>Website 这意味着即使您的网站绑定了 Ctrl+N Firefox 的优先级以获得新的windows 接管。

# apache - Apache Shiro - isPermitted() 方法和错误的 Authorizer 类问题

> ID：16021414
> 
> 赞同：1
> 
> 时间：2013-04-15T17:40:52.887
> 
> 标签：apache, shiro

我们已经实现了一个名为 AuthorizerImpl 的类，它包含两个对象：一个 AuthorizingRealm 和一个 Subject。我们已经实现了一个 isPermitted() 方法，该方法随后调用了该主题的 isPermitted() 方法。我们的代码看起来像这样：

```
// UserContext object uc is passed in here
AuthorizerImpl auth = new AuthorizerImpl(uc.getUser());
auth.isPermitted("winnebago:drive:eagle5"); 
```

我们最初使用上面的代码登录并验证用户的权限。用户第一次登录时，可以说是“基本用户”。某些屏幕是特定于某些用户的，因此我们使用不同的 uc.getUser() 再次调用上述代码来验证新用户的权限。我看到的是后端 Shiro 代码正在使用以前的用户来检查权限，而不是我传递给 isPermitted() 方法的新用户。每次我们调用“new AuthorizerImpl(uc.getUser())”时，我们都会创建一个新的 Subject 和 AuthorizingRealm，它们是 AuthorizingRealm 对象中的实例变量。我的印象是，当我创建一个新的 AuthorizerImpl 时，它应该使用我们在构造函数中创建的新主题和领域。然而，似乎 Shiro 正在缓存以前使用的领域对象并正在使用它？我们正在使用 DefaultSecurityManager。在做了一些调试之后，我注意到 DefaultSecurityManager 有一个授权实例变量。它似乎正在使用第一个授权对象，而不是应该使用新用户创建的新对象，这让我相信它正在被缓存。有没有办法关闭这个缓存？这是正在发生的事情还是其他原因？如果使用正确的用户进行检查，则从数据库中正确检索权限。我该如何解决这个问题？它似乎正在使用第一个授权对象，而不是应该使用新用户创建的新对象，这让我相信它正在被缓存。有没有办法关闭这个缓存？这是正在发生的事情还是其他原因？如果使用正确的用户进行检查，则从数据库中正确检索权限。我该如何解决这个问题？它似乎正在使用第一个授权对象，而不是应该使用新用户创建的新对象，这让我相信它正在被缓存。有没有办法关闭这个缓存？这是正在发生的事情还是其他原因？如果使用正确的用户进行检查，则从数据库中正确检索权限。我该如何解决这个问题？

先感谢您。

# r - 如何执行安装在本地文件夹中的 R 版本？

> ID：16021417
> 
> 赞同：1
> 
> 时间：2013-04-15T17:40:55.953
> 
> 标签：r, statistics

我解压了新版本的 R 包，并在一个文件夹中给出了命令：

```
./configure
make 
```

现在我想运行它，如果我给出命令：

```
$ R 
```

然后它运行旧版本。我没有特权处理它。所以我想运行新安装的版本。有什么帮助吗？也许它需要导出，但我不熟悉这些步骤。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:46:41.343

要执行新版本的 R，`bin/R`请在安装目录中运行。

要将其移动到全局可访问的位置，请运行

```
make install 
```

如果您没有这样做的权限（如您所指示的），您可以将`make install`移动`R`到的目录更改为您在该`./configure`步骤中拥有权限的目录：

```
./configure --prefix=/where/you/want/R/to/go
make
make install 
```

# xamarin.ios - MonoTouch：添加自定义视图 XIB

> ID：16021421
> 
> 赞同：0
> 
> 时间：2013-04-15T17:41:16.250
> 
> 标签：xamarin.ios, xib

我想将自定义视图 XIB 添加到我的 UITable 视图标题中。按照这个链接[如何在monotouch中将自定义视图添加到XIB文件定义的视图中，](https://stackoverflow.com/questions/9857558/how-to-add-a-custom-view-to-a-xib-file-defined-view-in-monotouch/9859690#9859690) 我创建了一个带有视图的XIB。它只有两个标签。然后我有一个cs文件。链接中提到的称为 XIB

```
public override UIView GetViewForHeader(UITableView tableView, int sectionIndex) {

  var myHeader = new UIView(); 

  var views = NSBundle.MainBundle.LoadNib("CustomHeaderView", this, null); 
  CustomHeaderView loginView = Runtime.GetNSObject(views.ValueAt(0)) as CustomHeaderView;
  loginView.UpdateWithData("test","test");
  myHeader.AddSubview(loginView);
  return myHeader;
} 
```

当我运行应用程序时它崩溃了，没有看到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T21:14:29.097

Make sure that your .XIB is not using AutoLayout and you are using an older iOS. The AutoLayout is new for 6.x and will cause a crash on the 5.x based devices. I see this quite often.

# javascript - 用于隐藏和显示 SharePoint 功能区栏的 jQuery 或 jscript

> ID：16021427
> 
> 赞同：0
> 
> 时间：2013-04-15T17:41:31.910
> 
> 标签：javascript, jquery

我正在寻找允许最终用户隐藏或显示 SharePoint 功能区栏的 jQuery 或 javascript 脚本。基本上给他们更多的工作空间。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:10:58.430

您可以为此函数添加一个浮动 div，将“display:none”样式附加到以下元素之一（根据需要）：

#s4-ribbonrow，#s4-titlerow，#s4-leftpanel

# php - 为什么我从 JS 和 PHP Mersenne Twister 实现中得到不同的值？

> ID：16021431
> 
> 赞同：1
> 
> 时间：2013-04-15T17:41:44.830
> 
> 标签：php, javascript, random, mersenne-twister

1) 在 PHP 中当我使用原生 php MT 实现时

```
mt_srand(1); 
var_dump(mt_rand());
var_dump(mt_rand());
var_dump(mt_rand()); 
```

我得到价值观

```
1244335972
15217923
1546885062 
```

2）在这个 Mersenne Twister 实现 [http://kingfisher.nfshost.com/sw/twister/](http://kingfisher.nfshost.com/sw/twister/)
我运行

```
$twister = new twister(1);
var_dump($twister->int31());
var_dump($twister->int31());
var_dump($twister->int31()); 
```

并得到

```
1791095845
2135392491
946286476 
```

3）在 JS 我使用
[http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/JAVASCRIPT/java-script.html](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/VERSIONS/JAVASCRIPT/java-script.html)

```
m = new MersenneTwister(1)
m.genrand_int31()
m.genrand_int31()
m.genrand_int31() 
```

并得到

```
895547922
2141438069
1546885062 
```

怎么会发生？

实际上，这在 JS

```
m = new MersenneTwister(1)
m.genrand_int32()
1791095845 
```

这在 PHP

```
$twister = new twister(1);
var_dump($twister->int32()); 
```

返回相同的值 1791095845，但仅适用于第一次调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:50:14.610

Mersenne twister 是一*类*PRNG，而不是单一算法。算法中使用的梅森素数可能会有所不同，不同的素数会对相同的种子产生不同的结果。

# json - Play Framework 2.1.1 Json 写入嵌套对象

> ID：16021437
> 
> 赞同：4
> 
> 时间：2013-04-15T17:42:06.053
> 
> 标签：json, scala, playframework, playframework-json

整个下午我一直在努力解决这个问题，但无济于事，Play 2.1.1 彻底改变了 Json 读写的工作方式。

基本上我有一个看起来像这样的包装器对象：

```
case class CombinedUser(user: SocialUser, userdetails: UserDetails) 
```

如您所见，它包含 2 个我想要序列化和反序列化为 json 的类。

但我不明白如何使用新设计获取和设置子类中的字段。

例如

```
implicit val combinedUser2Reads = (
  (__ \ "email").read[String] and
  (__ \ "providerid").read[String] and
  (__ \ "firstname").read[String] and
  (__ \ "lastname").read[String] and
  (__ \ "fullname").read[String] and
  (__ \ "avatarurl").read[String] and
  (__ \ "address1").read[String] and
  (__ \ "address2").read[String] and
  (__ \ "address3").read[String] and
  (__ \ "city").read[String] and
  (__ \ "country").read[String] and
  (__ \ "phone").read[String] and
  (__ \ "publickey").as[String]
)(CombinedUser2.apply _) 
```

我想要一个包含大部分子类字段的json blob，所有字符串。

因为它使用了应用的东西，所以我看不到如何在映射之前创建子类。

非常感谢任何帮助或指导。

谢谢

汤姆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T18:10:55.170

你可以这样做：

```
case class SocialUser(firstName: String, lastName: String)
case class UserDetails(avatarUrl: String, phone: String)
case class CombinedUser(user: SocialUser, userDetails: UserDetails)  
implicit val combinedUserReads: Reads[CombinedUser] = (
  (__ \ "user").read((
    (__ \ "firstName").read[String] and
    (__ \ "lastName").read[String]
  )(SocialUser)) and
  (__ \ "userDetails").read((
    (__ \ "avatarUrl").read[String] and
    (__ \ "phone").read[String]
  )(UserDetails))
)(CombinedUser) 
```

但是最好创建分离`Reads`：

```
implicit val socialUserReads = (
  (__ \ "firstName").read[String] and
  (__ \ "lastName").read[String]
)(SocialUser)    
implicit val userDetailsReads = (
  (__ \ "avatarUrl").read[String] and
  (__ \ "phone").read[String]
)(UserDetails)
implicit val combinedUserReads: Reads[CombinedUser] = (
  (__ \ "user").read[SocialUser] and
  (__ \ "userDetails").read[UserDetails]
)(CombinedUser) 
```

编辑：对于简单的案例类，[可以这样做](http://www.playframework.com/documentation/2.1.1/ScalaJsonInception)：

```
implicit val socialUserReads = Json.format[SocialUser]
implicit val userDetailsReads = Json.format[UserDetails]
implicit val combinedUserReads = Json.format[CombinedUser] 
```

[这](http://www.playframework.com/documentation/2.1.1/ScalaJsonCombinators)是对 JSON Reads 等的相当全面的介绍。

> 部分对象呢？如果我不想填写构造函数中的每个字段，我可以传递空值还是重载构造函数或类似内容？

使用`Option`：

```
case class CombinedUser(user: SocialUser, userDetails: Option[UserDetails])
//reads
implicit val combinedUserReads: Reads[CombinedUser] = (
  (__ \ "user").read[SocialUser] and
  (__ \ "userDetails").readOpt[UserDetails]
)(CombinedUser)
//writes
implicit val combinedUserWrites: Writes[CombinedUser] = (
  //socialUserWrites and userDetailsWrites must be in scope
  (__ \ "user").write[SocialUser] and
  (__ \ "userDetails").write[Option[UserDetails]]
)(unlift(CombinedUser.unapply))

val json = Json.obj(
  "user" -> Json.obj(
    "firstName" -> "Homer",
    "lastName" -> "Simpson"
  )
)
Json.fromJson[CombinedUser](json)
//JsSuccess(CombinedUser(SocialUser(Homer,Simpson),None),) 
```

# javascript - Postman 如何发送请求？ajax，同源策略

> ID：16021442
> 
> 赞同：50
> 
> 时间：2013-04-15T17:42:16.390
> 
> 标签：javascript, jquery, ajax, api, postman

我发现这个非常有用的 Chrome 扩展名为 Postman。这是一个非常有用的扩展，尤其是在您编写 RESTful 应用程序时。

我感到困惑的一件事是，这个插件/扩展如何能够在不同的域上成功发送 POST 请求？

我尝试像这样使用 Postman 在投票中投票。

![使用 Postman 投票](https://i.stack.imgur.com/YEyj0.png)

提交后，投票实际上被计算在内，但是当我尝试使用 AJAX 和 JavaScript 时，由于浏览器的来源策略不同，它失败了。

这怎么可能呢？

这是我使用 jQuery 的代码。我在我的电脑上使用了它，localhost。

```
init: function() {
    $.ajax({
        url: 'http://example.com/vote.php',
        type:'POST',
        dataType: 'html',
        data: {
            id: '1'
        },
        success: function(data) {
        if ( data == 'voted' ) {
            $('.set-result').html( 'you already voted. try again after 24 hours' );
        } else {
            $('.set-result').html( 'successfully voted' );
        }
    }
    });
}, 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-15T17:48:47.603

Chrome 打包应用可以拥有跨域权限。当您安装 Postman 时，它会提示您此应用程序将访问任何域。

通过放入清单文件`*/*`的`permissions`部分，您可以做到这一点。

在此处阅读更多信息： [https ://developer.chrome.com/extensions/xhr.html](https://developer.chrome.com/extensions/xhr.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-10-26T13:32:15.477

您可以将以下标头添加到邮递员中发送的 Ajax 请求中。

```
Content-Type      application/json

X-Requested-With  XMLHttpRequest 
```

**截屏**

[![在此处输入图像描述](https://i.stack.imgur.com/pO26S.png)](https://i.stack.imgur.com/pO26S.png)

**归功于****[猎户](http://blog.orionwebtech.net/ajax-request-headers-in-postman/)**座

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-06T00:41:34.220

听起来主持投票的站点（“vote.php”脚本）需要设置“Access-Control-Allow-Origin”标头以允许从站点列表（或所有站点）发布。

标头的 * 值将允许从任何网站发布：

```
Access-Control-Allow-Origin: * 
```

即您可以将以下内容放在 vote.php 的顶部

```
header('Access-Control-Allow-Origin: *'); 
```

Chrome 扩展程序和应用程序不受与普通网页相同的安全限制。

**其他调试提示：**

如果您尝试从在浏览器的本地文件系统上打开的网页访问远程服务，您可能会发现您的浏览器对其应用的安全规则与对从 Web 服务提供的文件应用的安全规则不同。

例如，如果您在浏览器中从`C:\MyDocuments\weboot\index.htm`(Windows) 或(Mac) 等位置打开本地文件，您的 AJAX 请求可能无法正常工作，即使在大多数浏览器中指定了标头。`\Users\joe\Sites\index.html`

Apple 的 Safari 对本地打开的文件几乎没有跨域限制，但 Firefox 对其允许的内容要严格得多，而 Chrome 则处于中间位置。在本地运行 Web 服务器（例如 on `http://localhost/`）是避免意外行为的好主意。

此外，提供处理 Ajax 请求的函数的其他库（例如 AngularJS）可能需要默认在服务器上设置其他标头。您通常可以在浏览器调试控制台中看到失败的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-12T13:43:11.900

## 2021 年 10 月

在我的调查中，我发现您需要在请求的标头中添加一个额外的字段。因此，只需将以下键值添加到标题中：

`key:` `X-Requested-With`| `value`：`XMLHttpRequest`

# titanium - Appcelerator Titanium，获取当前窗口并应用属性不起作用

> ID：16021443
> 
> 赞同：0
> 
> 时间：2013-04-15T17:42:23.377
> 
> 标签：titanium, appcelerator, navbar

我正在尝试将 iOS 中的右导航按钮添加到 Titanium 中的窗口。

该代码只是 Titanium 提供的原始“主/详细信息”起始模板，然后在 MasterView.js 中，我尝试向导航栏添加一个按钮。

但它不像它应该的那样工作：

```
var addBtn = Ti.UI.createButton({
    systemButton:Ti.UI.iPhone.SystemButton.ADD
});
//self.setRightNavButton(addBtn);
var win1 = Titanium.UI.currentWindow;
win1.setRightNavButton(addBtn); 
```

这失败并出现错误：

> [错误]：脚本错误 = 'undefined' 不是 MasterView.js 中的对象（评估 'win1.setRightNavButton'）（第 14 行）。

那么如何将此按钮添加到导航栏？我见过一些例子，但它们都依赖于声明导航栏。在这种情况下，这是不可能的，因为 Titanium 在特定于每个平台的 AplicationWindow.js 中声明了导航栏，然后调用了我应该定义导航栏按钮的 MasterView.js 函数和文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:36:58.683

`Ti.UI.currentWindow`仅*在已打开窗口*时才有效。您遇到的错误来自创建 MasterView 时尚未打开窗口的事实。

查看 ApplicationWindow.js 内部，您会看到您甚至在打开窗口之前就创建了主视图。

如果要设置导航栏项，可以将它们添加到 ApplicationWindow、app.js 中，或者将窗口传递给 MasterView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-09T01:35:12.460

`Ti.UI.currentWindow`仅在使用该`url`参数打开窗口时才有效。在这种情况下，参数引用的控制器`url`将`Ti.UI.currentWindow`属性设置为窗口。

# c++ - 我为 Pair 对象分配内存，但未能将对象放在那里

> ID：16021444
> 
> 赞同：0
> 
> 时间：2013-04-15T17:42:24.583
> 
> 标签：c++

我想要一个指向 Pair 元素指针的动态指针数组；

```
int m_size = 0;
Pair** ar = new Pair*[++m_size];
*ar[0] = Pair(key, data); 
```

在这里我得到：lab3.exe 中 0x013729db 处的未处理异常：0xC0000005：访问冲突写入位置 0xcdcdcdcd。

它发生在 MyString 的重载运算符中（抛出异常时的 HERE 标记）：

```
MyString & MyString::operator = (const MyString & refMyString){
HERE: this->m_pStr = refMyString.m_pStr;
    return *this;
} 
```

我的课程（为了我们的目的有点简化）：

```
class Pair{
    MyString m_key;
    Data* m_data;
}

class MyString
{
    char* m_pStr;
} 
```

这是我在调试器中得到的：

[http://sdrv.ms/ZwkZ9P](http://sdrv.ms/ZwkZ9P)

[http://sdrv.ms/17eoGp6](http://sdrv.ms/17eoGp6)

好吧，据我所知，当我执行 Pair** ar = new Pair*[++m_size] 时，创建了一个指向 Pair 实例空间指针的新指针。但它只是记忆中的空间。当我尝试操作它时，我失败了。

做什么对我来说是个谜。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:46:27.717

您分配了一个数组`Pair*`but ：

1）您永远不会初始化该数组中的指针

2）您取消引用那些未初始化的指针（指向谁知道哪里）并覆盖那里的内存。

难怪你会得到一个段错误，因为你正在写入未分配的内存。

您（可能？）想要做的是：

`ar[0] = new Pair(...)`

或者更好的是，使用标准容器（vector、list、deque、...）而不是 C 数组，它可以包含普通对象或智能指针（unique_ptr 或 shared_ptr），这样您就不必自己管理内存.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:48:37.877

使用双指针创建二维数组时，需要分配两个维度：

```
// allocates an array of 10 int* objects
int** p = new int*[10];

for(int x = 0; x < 10; ++x)
{
   // Allocates an array of 3 integers
   p[0] = new int[3];
} 
```

您需要确保删除您正在创建的所有对象：

```
// later
for(int x = 0; x < 10; ++x)
   delete [] p[x];

delete [] p; 
```

但是，我建议您只使用`std::vector`这样您就不需要自己管理内存：

```
std::vector<std::vector<int>> p;

p.resize(10);

for(int x = 0; x < 10; ++x)
{
   p[x].resize(3);
} 
```

# javascript - 在有机会设置重要数据之前传递函数调用

> ID：16021448
> 
> 赞同：0
> 
> 时间：2013-04-15T17:42:42.670
> 
> 标签：javascript, node.js, callback, request

所以我在node.js中有这个函数，它通过从（方便的网站，检查一下）获取外部IP `https://icanhazip.com/`，但是当请求被调用时，它不允许在`return`被调用之前完成。这是代码：

```
var request = require('request');
var get_ext_ip = function(){
    var _ip; //Initialize a return variable

    //Launch an HTTPS request to a simple service that shows IP of client
    //The callback function isn't allowed to finish.
    request('https://icanhazip.com', function(error, response, body){
        _ip = body; //when finished store the response in the variable that is going to be returned.
    });

    //Return
    return _ip;
}

var ip = get_ext_ip();
console.log(ip); //undefined 
```

所以我想，这里的问题是：如何让这个脚本在返回值之前等待回调函数完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:45:50.733

看看这里的`async series`图书馆，[这里](https://github.com/caolan/async#series)的样本

```
async.series([
    function(callback){
        // do some stuff ...
        callback(null, 'one');
    },
    function(callback){
        // do some more stuff ...
        callback(null, 'two');
    }
],
// optional callback
function(err, results){
    // results is now equal to ['one', 'two']
});

// an example using an object instead of an array
async.series({
    one: function(callback){
        setTimeout(function(){
            callback(null, 1);
        }, 200);
    },
    two: function(callback){
        setTimeout(function(){
            callback(null, 2);
        }, 100);
    }
},
function(err, results) {
    // results is now equal to: {one: 1, two: 2}
}); 
```

另外，看看这个问题，[Idiomatic way to waiting for multiple callbacks in Node.js](https://stackoverflow.com/questions/5172244/idiomatic-way-to-wait-for-multiple-callbacks-in-node-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:48:45.350

这是因为 Node 中 I/O 请求的异步特性：函数`get_ext_ip`在请求完成之前返回。

处理此问题的方法之一是传递一个回调函数，该回调函数将在请求完成时被调用：

```
var request = require('request');
var get_ext_ip = function(callback) {
  request('https://icanhazip.com', function(error, response, body) {
    callback(error, body);
  });
}

get_ext_ip(function(err, ip) {
  if (err)
    console.log('an error occurred:', error);
  else
    console.log(ip);
}); 
```

# ruby - 将 XML 解析为 Ruby 对象并动态创建属性方法？

> ID：16021449
> 
> 赞同：1
> 
> 时间：2013-04-15T17:42:55.647
> 
> 标签：ruby, xml, xml-parsing, nokogiri

我需要将 XML 文件解析为 Ruby 对象。

是否有一种工具可以像这样从 XML 中读取属性 `report.system_slots.items`以返回项目属性数组或`report.system_slots.current_usage`返回“可用”？

可以用 Nokogiri 做到这一点吗？

```
<page Title="System Slots" H1="Property" H2="Value" __type__="2">
  <item Property="System Slot 1">
  <item Property="Name" Value="PCI1"/>
  <item Property="Type" Value="PCI"/>
  <item Property="Data Bus Width" Value="32 bits"/>
  <item Property="Current Usage" Value="Available"/>
  <item Property="Characteristics">
    <item Property="Vcc voltage supported" Value="3.3 V, 5.0 V"/>
    <item Property="Shared" Value="No"/>
    <item Property="PME Signal" Value="Yes"/>
    <item Property="Support Hot Plug" Value="No"/>
    <item Property="PCI slot supports SMBus signal" Value="Yes"/>
  </item>
</item> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T17:45:10.590

看看[牛](https://rubygems.org/gems/ox)。它读取 XML 并返回 XML 的合理 Ruby 对象传真。

```
require 'ox'

hash = {'foo' => { 'bar' => 'hello world'}}

puts Ox.dump(hash)

pp Ox.parse_obj(Ox.dump(hash)) 
```

将其转储到 IRB 会给我：

```
require 'ox'

 >   hash = {'foo' => { 'bar' => 'hello world'}}
{
    "foo" => {
        "bar" => "hello world"
    }
}

 >   puts Ox.dump(hash)
<h>
  <s>foo</s>
  <h>
    <s>bar</s>
    <s>hello world</s>
  </h>
</h>
nil

 >   pp Ox.parse_obj(Ox.dump(hash))
{"foo"=>{"bar"=>"hello world"}}
{
    "foo" => {
        "bar" => "hello world"
    }
} 
```

也就是说，您的 XML 示例已损坏，无法与 OX 一起使用。它将与*Nokogiri*一起使用，尽管报告了错误，这暗示您将无法正确解析 DOM。

我的问题是，为什么要将 XML 转换为对象？使用像 Nokogiri 这样的解析器来处理 XML 要容易得多。使用 XML 的固定版本：

```
require 'nokogiri'

xml = '
<xml>
<page Title="System Slots" H1="Property" H2="Value" __type__="2">
  <item Property="System Slot 1"/>
  <item Property="Name" Value="PCI1"/>
  <item Property="Type" Value="PCI"/>
  <item Property="Data Bus Width" Value="32 bits"/>
  <item Property="Current Usage" Value="Available"/>
  <item Property="Characteristics">
    <item Property="Vcc voltage supported" Value="3.3 V, 5.0 V"/>
    <item Property="Shared" Value="No"/>
    <item Property="PME Signal" Value="Yes"/>
    <item Property="Support Hot Plug" Value="No"/>
    <item Property="PCI slot supports SMBus signal" Value="Yes"/>
  </item>
</page>
</xml>'

doc = Nokogiri::XML(xml)

page = doc.at('page')
page['Title'] # => "System Slots"
page.at('item[@Property="Current Usage"]')['Value'] # => "Available"

item_properties = page.at('item[@Property="Characteristics"]')
item_properties.at('item[@Property="PCI slot supports SMBus signal"]')['Value'] # => "Yes" 
```

将大型 XML 文档解析到内存中可能会返回迷宫般的数组和散列，它们仍然必须被剥离才能访问您想要的值。使用 Nokogiri，您拥有易于学习和阅读的 CSS 和 XPath 访问器；我在上面使用了 CSS，但可以很容易地使用 XPath 来完成相同的事情。

# java - 从 maven 插件中的 PMD 中删除单个规则检查

> ID：16021453
> 
> 赞同：14
> 
> 时间：2013-04-15T17:43:19.287
> 
> 标签：java, maven, pmd

我想在 POM 中排除单个 PMD 规则，但它不起作用。我尝试创建一个 pmd-exclude.xml（在与 pom.xml 相同的目录中）：

```
<?xml version="1.0"?>
<ruleset name="remove_rules">
    <description>Remove rules</description>
    <rule ref="rulesets/unnecessary.xml">
        <exclude name="UselessParentheses"/>
    </rule>
</ruleset> 
```

来自[http://www.ing.iac.es/~docs/external/java/pmd/howtomakearuleset.html](http://www.ing.iac.es/~docs/external/java/pmd/howtomakearuleset.html)并在 pom.xml 中引用它：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-pmd-plugin</artifactId>
    <version>3.0.1</version>
    <configuration>
        <sourceEncoding>utf-8</sourceEncoding>
            <rulesets>
                    <ruleset>${pom.basedir}/pmd-exclude.xml</ruleset>
            </rulesets>
    </configuration>
</plugin> 
```

但它不断报告这些规则。

另外：我不想指定它必须检查哪些规则，因为较新的版本可以（并且将）包含新规则，并且我不想检查哪些新规则将在每个新版本中运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T19:48:10.080

我认为您将需要添加您想要检查的规则集并丢弃您不需要的特定规则。

pmd-exclude.xml 应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<ruleset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    name="Android Application Rules"
    xmlns="http://pmd.sf.net/ruleset/1.0.0"
    xsi:noNamespaceSchemaLocation="http://pmd.sf.net/ruleset_xml_schema.xsd"
    xsi:schemaLocation="http://pmd.sf.net/ruleset/1.0.0 http://pmd.sf.net/ruleset_xml_schema.xsd" >

    <description>Remove rules</description>

    <rule ref="rulesets/clone.xml" />
    <rule ref="rulesets/finalizers.xml" />
    <rule ref="rulesets/imports.xml" />
    <rule ref="rulesets/logging-java.xml" />
    <rule ref="rulesets/unnecessary.xml" >
        <exclude name="UselessParentheses" />
    </rule>

</ruleset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-15T15:53:19.117

@marcelopazzo 的解决方案对我有用。我只想补充一点，如果您正在使用多模块 maven 项目，那么您将必须更新对 pmd-exclude.xml 的引用，除非您计划在每个模块中都有此文件的副本。

例子

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-pmd-plugin</artifactId>
        <version>3.6</version>
        <configuration>
            <rulesets>
                <ruleset>${project.parent.basedir}/pmd-exclude.xml</ruleset>
            </rulesets>
        </configuration>
    </plugin> 
```

# c - 声明字符串和分配字符串的区别

> ID：16021454
> 
> 赞同：6
> 
> 时间：2013-04-15T17:43:20.867
> 
> 标签：c

```
I.  char *str = "Stack";

II. char *str = (char*) malloc(6);
    strcpy(str, "Stack"); 
```

以上两种方法有什么区别？

它们是相同的还是在窗帘后面有什么不同？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T17:49:00.383

上面的代码会导致问题。

第一个实例称为静态字符串分配和定义。对于诸如 等的普通变量`int`和非字符串数据类型，这样的声明将在堆栈上分配数据。在通过字符串文字（即：）初始化字符串的情况下`"stack"`，它被分配在内存的只读部分中。

不应修改字符串本身，因为它将存储在内存的只读部分中。指针本身可以更改为指向新位置。

IE：

```
char strGlobal[10] = "Global";

int main(void) {
  char* str = "Stack";
  char* st2 = "NewStack";
  str = str2;  // OK
  strcpy(str, str2); // Will crash
} 
```

为了安全起见，您实际上应该分配为指向 const 数据的指针，即：

```
const char* str = "Stack"; // Same effect as char* str, but the compiler
                           // now provides additional warnings against doing something dangerous 
```

第二种称为动态分配，它在堆上分配内存，而不是在堆栈上。可以毫不费力地修改字符串。在某些时候，您需要通过`free()`命令释放这个动态分配的内存。

还有第三种分配字符串的方法，即栈上的静态分配。这允许您修改保存字符串的数组的内容，并且它是静态分配的。

```
char str[] = "Stack"; 
```

总之：

```
Example:                       Allocation Type:     Read/Write:    Storage Location:
================================================================================
const char* str = "Stack";     Static               Read-only      Code segment
char* str = "Stack";           Static               Read-only      Code segment
char* str = malloc(...);       Dynamic              Read-write     Heap
char str[] = "Stack";          Static               Read-write     Stack
char strGlobal[10] = "Global"; Static               Read-write     Data Segment (R/W) 
```

您还应该阅读现代操作系统中的应用程序如何对数据进行分段。这将真正增加您对如何构建代码的理解。

**参考**

* * *

1.  *数据段*，2013-04-15 访问，[`<http://en.wikipedia.org/wiki/Data_segment>`](http://en.wikipedia.org/wiki/Data_segment)
2.  *代码段*，2013-04-15 访问，[`<http://en.wikipedia.org/wiki/Code_segment>`](http://en.wikipedia.org/wiki/Code_segment)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T17:47:02.643

在第一种情况下，您的指针指向`const char*`在进程内存的只读部分中分配的 a。
在第二种情况下，您正在动态分配内存并最终将字符串“Stack”复制到您分配的内存中。

您最终*必须*使用`free`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:54:16.643

**忘记其他声称存储在堆栈中的任何答案，因为它们是不正确的。**（哦，现在这些答案已被删除..）

`case I:`你有一个指针`str`，它指向一个**只读**内存区域（该`.rodata`部分），其内容是`"Stack"`.

`case II:`你有一个指针`str`，它指向一个动态分配的区域（在堆中），它的内容是，它是可修改的，并且在使用它后`"Stack"`应该通过调用来释放。`free(str)`

# c - 测量经过的时间

> ID：16021455
> 
> 赞同：0
> 
> 时间：2013-04-15T17:43:23.017
> 
> 标签：c, time.h

我添加了以下代码来测量以了解程序持续了多少毫秒。问题是我得到 1065 时钟和 1065 毫秒。他们平等是正常的吗？也许我的方程式是错误的，它将时钟转换为毫秒？提前致谢

```
finishClock = clock();
timeCount = finishClock - startClock ;
printf("Clocks passed: %f\n Milli Seconds passed: %f",timeCount, timeCount*1000/CLOCKS_PER_SEC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:49:12.610

基于`Tcl References` [here](http://tmml.sourceforge.net/doc/tcl/clock.html)，它们是同义词：

> 如果 -option 参数是 -milliseconds，则该命令与时钟毫秒同义（见下文）。这种用法已经过时，时钟毫秒被认为是获得毫秒计数的首选方式。

# javascript - 来自 underscore.js 的函数“_”中的 this

> ID：16021460
> 
> 赞同：0
> 
> 时间：2013-04-15T17:43:35.033
> 
> 标签：javascript, constructor, underscore.js

我正在尝试编写 underscore.js 代码，但我一开始就有问题。此代码段被描述为“创建对 Underscore 对象的安全引用以供以下使用。”

```
 var _ = function(obj) {
   if (obj instanceof _) return obj;
   if (!(this instanceof _)) return new _(obj);
   this._wrapped = obj;
 }; 
```

我不明白。那是一个简单的函数还是构造函数？乍一看，它有：

```
this._wrapped = obj; 
```

所以它是构造函数，但它有两个带有返回的“ifs”，那么当 if 为 false 时是构造函数，而当 ifs 中的一个为 true 时，它​​是函数吗？

还有其他问题：

```
if (!(this instanceof _)) return new _(obj); 
```

这里的“这个”是什么？为什么这被证明是安全的。如果那是真的，那是创造自己的对象吗？这像递归吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:41:38.527

在 JavaScript 中，函数被用作构造函数。使用运算符时，任何函数都可以用作构造函数`new`。以一个简单的`sum`函数为例：

```
function sum(a, b) {
    return a + b;
}

var x = new sum(10, 2);

console.log(x); // object
console.log(x instanceof sum); // true; 
```

现在我们进入第二部分：我们如何才能真正理解 a`function`是否被称为构造函数？使用`this instanceof`您上面提到的行。基本上：

```
function sum(a, b) {
    if (this instanceof sum) {
        this.result = a + b;
    } else {
        return a + b;
    }
} 
```

如果一个函数被调用为构造函数，上下文对象`this`指向刚刚创建的新对象。

此技术也用于`new`在某些库中具有 -free 语法，与您发布的代码类似，因此这`new`是可选的：

```
var panel = Panel(); 
```

在内部，他们只是检查`this`：

```
function Panel() {
    if (this instanceof Panel) {
        return this; // `new` operator was used
    } else {
        return new Panel(); // called without `new`, so we create a new object
    }
} 
```

# javascript - JS - 将 Infinity Result 变为 0

> ID：16021461
> 
> 赞同：4
> 
> 时间：2013-04-15T17:43:44.177
> 
> 标签：javascript, infinity

我有一系列的 JS 计算，这些计算`Infinity`取决于用户的选择。如何停止该值的`Infinity`出现，例如，`0.0`改为显示？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T17:45:37.073

这个怎么样：

```
value = isFinite(value) ? value : 0.0; 
```

# c - 指针错误信息

> ID：16021464
> 
> 赞同：1
> 
> 时间：2013-04-15T17:43:51.317
> 
> 标签：c, xcode, macos, pointers

如果我的问题看起来绝对微不足道，我提前道歉，但我不明白为什么如果我跑

```
int main(){
    int *count = 0;
    printf("%d",*count);
} 
```

我没有输入（使用 Xcode）和一个错误：

> 线程 1：EXC_BAD_ACCESS（代码 = 1，地址 = 0x0）

有人可以向我解释这是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:45:37.840

发生的事情是取消引用一个空指针，这是未定义的行为：你`count`是一个*指针*，这意味着它需要指向一个有效的位置，然后你才能从中读取：

```
int main(){
    int *count = malloc(sizeof(int)); // Give your pointer a valid location
    *count = 123;                     // This is valid now
    printf("%d", *count);             // prints 123
    free(count);                      // Don't forget to free allocated memory
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T17:46:21.220

您已声明`count`为**指向整数值的指针而**不是整数值，并且已将指针初始化为 NULL（内存地址 0）。

您会想要执行以下操作...

```
int main()
{
   int buffer = 0;
   int* count = &buffer;
   printf( "var %d = %d\n", buffer, *count );
} 
```

# bash - 如何使脚本在 shell 上永久可执行？

> ID：16021466
> 
> 赞同：0
> 
> 时间：2013-04-15T17:43:55.380
> 
> 标签：bash, terminal

我按照[这个](https://stackoverflow.com/a/3744248/1768191)答案制作了一个 Python 脚本，`gn`可以`/opt/gn`通过`Terminal`Ubuntu 中的系统范围访问，如下所示：

```
PATH=${PATH}:/opt/gn 
```

但是，当我重新启动时`Terminal`，我无法再在系统范围内执行脚本。我必须从上面重新输入命令。

我试图将它复制`PATH`到 的最后一行`~/.profile`，但它不会那样工作。

如何永久执行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:56:33.793

在 Ubuntu 中，您可以将其他搜索路径添加到`/etc/environment`. `PATH="..."`只需在路径前添加冒号的末尾附加路径即可。

之后，您必须重新登录或重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:55:39.380

要使其永久化，您需要将更新后的路径存储到您的 shell 在启动时读取的文件中。尝试将路径添加到您的`.bashrc`-file？

请参阅`INVOCATION`bash 手册页中的 - 部分

适用于您的问题的部分是

> 当一个不是登录 shell 的交互式 shell 启动时，bash 会从 /etc/bash.bashrc 和 ~/.bashrc（如果这些文件存在）读取并执行命令。
> 
> 当 bash 作为交互式登录 shell 或作为带有 --login 选项的非交互式 shell 调用时，它首先从文件 /etc/profile 中读取并执行命令（如果该文件存在）。读取该文件后，它会按顺序查找 ~/.bash_profile、~/.bash_login 和 ~/.profile，并从第一个存在且可读的文件中读取并执行命令。

这意味着您只是将更新的路径放在错误的文件中。

# file-io - 令人费解的 Python I/O 错误：[Errno 2] 没有这样的文件或目录

> ID：16021473
> 
> 赞同：0
> 
> 时间：2013-04-15T17:44:25.770
> 
> 标签：file-io, python-3.x

我正在尝试从服务器获取 XML 文件（*使用 Python 3.2.3*），但我不断收到“没有这样的文件或目录”的错误消息。我确定 URL 是正确的，因为它会在错误消息中输出 URL，我可以复制并粘贴它并将其加载到我的浏览器中。所以我很困惑这是怎么发生的。这是我的代码：

```
import xml.etree.ElementTree as etree

class Blah(object):

    def getXML(self,xmlurl):
        tree = etree.parse(xmlurl)
        return tree.getroot()

    def pregameData(self,url):
        try:
            x = self.getXML('{0}linescore.xml'.format(url))
        except IOError as err:
            x = "I/O error: {0}".format(err)
        return x

if __name__ == '__main__':

    x = Blah()
    l = ['http://gd2.mlb.com/components/game/mlb/year_2013/month_04/day_15/gid_2013_04_15_anamlb_minmlb_1/',
         'http://gd2.mlb.com/components/game/mlb/year_2013/month_04/day_15/gid_2013_04_15_phimlb_cinmlb_1/',
         'http://gd2.mlb.com/components/game/mlb/year_2013/month_04/day_15/gid_2013_04_15_slnmlb_pitmlb_1/'
        ]
    for url in l:
        pre = x.pregameData(url)
        print(pre) 
```

它总是返回这个错误：

```
I/O error: [Errno 2] No such file or directory: 'http://gd2.mlb.com/components/game/mlb/year_2013/month_04/day_15/gid_2013_04_15_anamlb_minmlb_1/linescore.xml'
I/O error: [Errno 2] No such file or directory: 'http://gd2.mlb.com/components/game/mlb/year_2013/month_04/day_15/gid_2013_04_15_phimlb_cinmlb_1/linescore.xml'
I/O error: [Errno 2] No such file or directory: 'http://gd2.mlb.com/components/game/mlb/year_2013/month_04/day_15/gid_2013_04_15_slnmlb_pitmlb_1/linescore.xml' 
```

您可以复制并粘贴这些 URL，并查看这些位置中是否存在文件。我什至将文件和目录复制到本地主机，并尝试将其作为本地主机，以防外部服务器出现某种阻塞。它给了我同样的错误，所以这不是问题。我想知道[Etree 的 parse()](http://docs.python.org/3.2/library/xml.etree.elementtree.html#xml.etree.ElementTree.parse)是否无法处理 HTTP，但文档没有说明这一点，所以我猜这也不是问题。

**更新：**正如评论中所建议的，我使用 using `open()`，但它仍然返回错误。导入和尝试[urllib.request.urlopen(url)](http://docs.python.org/3.2/library/urllib.request.html#urllib.request.urlopen)返回错误*AttributeError: 'module' object has no attribute 'request'*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:52:32.310

你是对的，`xml.etree`不会自动下载和解析 url，如果你想这样做，你需要先自己下载（使用 urllib 或 requests ...）。

文档明确指出[`parse`](http://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.parse)需要一个文件名或文件对象，如果它支持一个 url，我相信它会明确说明。[`lxml.etree.parse()`](http://lxml.de/api/lxml.etree-module.html#parse)例如确实如此。

# delphi - 在delphi中检查互联网连接

> ID：16021476
> 
> 赞同：0
> 
> 时间：2013-04-15T17:44:37.710
> 
> 标签：delphi, indy, internet-connection

怎么样，我已经制作了一个在 ftp 服务器上上传文件的程序，问题是每当我无法访问互联网时，它就会出现一个错误，它会停止运行程序并说我没有连接到互联网。

如何让程序在显示消息框中显示该消息，以便它不会停止运行程序？

例如：

```
If internetconnection then
begin

end else showmessage ('You are not connected to the internet') 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-15T17:52:14.640

~~请尝试此链接中的代码~~

~~[平](http://delphi.about.com/od/internetintranet/l/aa081503a.htm)~~

~~您也可以尝试使用免费的[Internet Component Suite](http://www.overbyte.be/frame_index.html?redirTo=/products/ics.html)组件来实现与您的 ftp 服务器的测试连接。~~

**编辑：**

由于发现作者使用 IdFTP (Indy) 组件在 ftp 服务器上上传文件，而我的第一个答案并不好，我会鼓起勇气编写，因为我认为检查与 ftp 服务器的连接的正确代码：

```
with IdFTP1 do begin
  Host := ..;
  Port := ..;
  Username := ..;
  Password := ..;
  if Connected then Disconnect;
  try
    Connect;
    ShowMessage('FTP IS Connected')
  except
    ShowMessage('FTP IS NOT Connected');
  end;
end; 
```

# linux - nginx 不监听 80 端口

> ID：16021481
> 
> 赞同：70
> 
> 时间：2013-04-15T17:45:09.837
> 
> 标签：linux, ubuntu, nginx, ubuntu-12.04

我刚刚安装了 Ubuntu 12.04 服务器和 nginx 1.2.7，`default`从启用站点中删除，并将我自己的文件添加`sites-available`到`sites-enabled`. 然后重启了nginx。

**问题：**但是转到 URL 不会加载站点。`netstat -nlp | grep nginx`并且`netstat -nlp | grep 80`两者都没有返回结果！`lsof -i :80`也不返回任何内容。来自另一台服务器的A`dig`返回正确的 IP 地址，因此它不应该是 DNS 问题。我能够连接到我现在已经停止服务的 apache。nginx 日志也没有显示任何内容。

我应该如何解决这个问题？

**/etc/nginx/site-available/mysite.com**

```
server {
    listen   80;
    server_name www.mysite.com mysite.com *.mysite.com;
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;
    root /var/www/mysite/public;

    index index.php index.html;

    location / {
        try_files $uri $uri/ /index.php?$args ;
    }
    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_read_timeout 300;
    }

} 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-09-29T23:21:11.577

我遇到了同样的问题，解决方案是我没有正确符号链接我的 siteconf 文件。尝试跑步`vim /etc/nginx/sites-enabled/mysite.com`——你能做到吗？我收到“权限被拒绝”。

如果不运行：

```
rm /etc/nginx/sites-enabled/mysite.com
ln -s /etc/nginx/sites-available/mysite.com /etc/nginx/sites-enabled/mysite.com 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-09-25T01:40:00.183

如果您的日志未提及该问题，则您可能没有包含启用站点的目录。告诉站点正在加载的一种简单方法是将服务器块中的错误/访问日志路径设置为唯一路径，重新加载 nginx，并检查文件是否已创建。

确保以下 include 指令存在于 /etc/nginx/nginx.conf 中的 http 上下文中。

```
http {
  ...
  include /etc/nginx/sites-enabled/*;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-11-04T04:11:10.350

我发现通过以下步骤调试 nginx 很有帮助：

**1** ... 确保 nginx 正在运行。

```
ps aux | grep nginx 
```

**2** ... 检查已绑定到相关端口的进程。

```
lsof -n -i:80 
```

**3** ... 确保 nginx 已重新加载。

```
sudo nginx -t
sudo nginx -s reload 
```

> 在 Mac 上，`brew services restart nginx`不足以**重新**加载 nginx。

**4** ...尝试手动创建简单的响应，以确保您的位置路径没有混乱。`proxy_pass`当使用将请求转发到其他正在运行的应用程序时出现问题时，这尤其有用。

```
location / {
    add_header Content-Type text/html;
    return 200 'Here I am!';
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-02-03T14:59:03.677

我遇到了同样的问题，`Failed to load resource: net::ERR_CONNECTION_REFUSED`通过 HTTP 连接时出现错误，但通过 HTTPS 很好。跑`netstat -tulpn`了，看到 nginx 没有绑定到 IPv4 的 80 端口。完成这里描述的一切。原来是一件***非常***愚蠢的事情：

**确保实际启用了`sites-available`带有 的文件。`default_server`**

希望这可以节省一些其他可怜的白痴一些时间。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-16T17:10:58.637

您可能将 nginx 绑定到端口 80 两次。那是你的完整配置文件吗？难道你没有另一个监听80端口的语句吗？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-27T20:52:49.063

例如前面一行`;`中缺少的分号可以绕过这个指令，无论如何检查都会成功。`/etc/nginx/nginx.conf``include /etc/nginx/servers-enabled/*;``nginx -t`

因此，只需检查所有指令`/etc/nginx/nginx.conf`是否都以分号结尾`;`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-22T14:58:07.617

您是否检查过您的 nginx 二进制文件是否真的存在？请检查是否

```
#whereis nginx 
```

输出二进制路径并使用 /etc/init.d/nginx 中的初始化脚本检查此路径。例如

```
DAEMON=/usr/sbin/nginx 
```

（在我的初始化脚本中“test -x $DAEMON || exit 0”被调用，无论如何这个脚本什么都没有返回——我的二进制文件完全丢失了）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-27T13:49:25.723

我在服务器上遇到了同样的问题，在这里我列出了我是如何解决它的：

**第 1 步 :: 安装 Ngnix**

```
sudo apt update
sudo apt install nginx 
```

**第 2 步 – 调整防火墙**

```
sudo ufw app list 
```

您应该获得应用程序配置文件的列表：

> `Output Available applications: Nginx Full Nginx HTTP Nginx HTTPS OpenSSH`

如您所见，Nginx 提供了三个配置文件：

**Nginx Full：**此配置文件同时打开端口 80（正常、未加密的 Web 流量）和端口 443（TLS/SSL 加密流量）

**Nginx HTTP：**此配置文件仅打开端口 80（正常、未加密的网络流量）

**Nginx HTTPS：**此配置文件仅打开端口 443（TLS/SSL 加密流量）

由于我尚未在本指南中为我们的服务器配置 SSL，因此我们只需要允许端口 80 上的流量。您可以通过键入以下内容启用此功能：

```
sudo ufw allow 'Nginx HTTP' 
```

您可以通过键入以下内容来验证更改：

```
sudo ufw status 
```

**第 3 步 – 检查您的 Web 服务器**

```
systemctl status nginx 
```

现在检查端口 80 ，它对我有用，希望对你也有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-05T08:01:34.657

在我的情况下，这些网络命令的输出显示 nginx 正确绑定到端口 80，但端口不能从外部访问或使用`nmap`.

虽然我怀疑有防火墙，但事实证明`iptables`机器上的旧规则正在重定向来自这些端口的流量并与 nginx 冲突。用于`sudo iptables-save`查看所有当前适用的规则。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-11T07:01:12.630

我面临同样的问题。只需重新加载 nginx 帮助我

```
sudo nginx -t 
```

如果出现错误，那么只需删除 log.txt 文件，

```
sudo nginx -s reload 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-09T21:41:41.713

虽然我们都认为我们不会犯愚蠢的错误，但我们确实会犯。

因此，如果您正在研究 NGINX 问题并且所有迹象都表明它应该可以工作，那么您应该远离文件并查看下游。

系统防火墙、硬件防火墙、Nat 路由器/防火墙。

对我自己来说，这个问题是我的路由器，我运行一个家庭实验室，所以我可以从远处访问我的路由器后面的服务我使用 NGINX 来反向代理，因为我的路由器只处理基于 IP 的传入并且不做任何主机名处理，我'确定这一切都很正常。

无论如何，当我几天前保护我的网络时，我的问题突然出现，删除了一些不再需要的端口转发，我不小心删除了端口 80。

是的，就像将该端口再次转发到 NGINX 一样简单，一切都已修复。

我现在会带着极度羞愧的头离开，尽管我留下这个答案是为了感谢这个帖子中那些让我发现自己的错误的人。

所以谢谢。

# gwt - UIBinder xml 中的变量

> ID：16021484
> 
> 赞同：1
> 
> 时间：2013-04-15T17:45:22.760
> 
> 标签：gwt, uibinder

我是 GWT 的新手，找不到答案：我有一个很好的用于 TextBox 的 UIBinder，它可以工作，我有 UIHandler 可以使用它，好的。但是，如果我想在整个 HTML 中显示来自这个 TextBox 的值怎么办？有没有一种方法可以声明一个变量以在整个 HTML 中重用该值，或者每次我想在一个 html 页面上显示值时，我应该用新的 ui:field 名称声明新标签，并用 UIHandler 填充每个这样的标签（我可以马上做，但这看起来很无聊）？

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder' xmlns:g="urn:import:com.google.gwt.user.client.ui">
<g:HTMLPanel>
    <g:TextBox  ui:field="myField"/><br/>        
    <div>            
        <p>                
            What do I need to put here if i want to see **myField.getValue()** in html, may be even multiple times? 
            And **here**?
            I want to avoid creation of new and new objects in back-end class for just one value, multiple labels here are ok. How to push one value in all of them, when myField content is changed?
        </p>            
    </div>
</g:HTMLPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:01:07.783

在 MVC 代码中设计 GUI 有两种方法（无论这意味着什么）：

*   GUI 很智能，可以从模型中提取数据，通常在某些事件发生时（数据绑定属于此类），
*   GUI 很愚蠢，因此数据由控制器推送到视图中（有时称为[被动视图](http://martinfowler.com/eaaDev/PassiveScreen.html)）。

两者都有其优点和缺点，但重要的是：当您尝试将它们结合起来时，优点会相互抵消，并且缺点会累积。那就是您最终会遇到每种模式的缺点和一团糟。

UIbinder 是一个工具，可以帮助您构建一个愚蠢的视图，如 MVP 模式中使用的那样。它可以帮助您轻松创建一堆对象，当您将数据推送到其中时，这些对象将重绘部分视图。他们不应该是智能实体。所以无聊的方式似乎是要走的路。

顺便说一句，不想使用标签有点奇怪：您**需要**一个对象来更新部分 ui（它是 Java，我们就是使用对象！）。碰巧这种类型的对象存在并被称为`Label`. 如果叫同一个班级，你会更喜欢`AnAutomaticHtmlUpdaterThatRequiresNoLabelWhatsoever`吗？

# json - 编码/json 解组缺少字段

> ID：16021487
> 
> 赞同：6
> 
> 时间：2013-04-15T17:45:28.890
> 
> 标签：json, go, serialization, tags, go-structtag

以下代码解组的是“Id”，而不是“主机名”。为什么？我已经盯着它看了很长时间了，如果它是一个错字，我知道我永远不会发现它。请帮忙。( [http://play.golang.org/p/DIRa2MvvAV](http://play.golang.org/p/DIRa2MvvAV) )

```
package main

import (
    "encoding/json"
    "fmt"
)

type jsonStatus struct {
    Hostname string `json:host`
    Id       string `json:id`
}

func main() {
    msg := []byte(`{"host":"Host","id":"Identifier"}`)

    status := new(jsonStatus)

    err := json.Unmarshal(msg, &status)
    if err != nil {
        fmt.Println("Unmarshall err", err)
    }
    fmt.Printf("Got status: %#v\n", status)
} 
```

我得到的输出是

```
Got status: &main.jsonStatus{Hostname:"", Id:"Identifier"} 
```

我期望的地方

```
Got status: &main.jsonStatus{Hostname:"Host", Id:"Identifier"} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T17:50:44.370

您的字段标签错误。他们需要在备用名称周围加上引号。

```
type jsonStatus struct {
    //--------------------v----v
    Hostname string `json:"host"`
    Id       string `json:"id"`
} 
```

从技术上讲，您根本不需要该`Id`字段的标签。这就是该领域发挥作用的原因。

***演示：*** [http ://play.golang.org/p/tiop27jNJe](http://play.golang.org/p/tiop27jNJe)

# java - XmlPullParser 资源管理

> ID：16021488
> 
> 赞同：0
> 
> 时间：2013-04-15T17:45:30.167
> 
> 标签：java, android, xml, xml-parsing

XmlPullParser 如何管理资源？为什么没有`close()`，`release()`或一些类似的方法？

例如，我想从文件中读取 XML：

```
 final XmlPullParserFactory xppf = XmlPullParserFactory.newInstance();
    final XmlPullParser xpp = xppf.newPullParser();
    xpp.setInput(new FileInputStream("test/file.xml));
    while (xpp.next() // parsing...
    // ... 
```

谁应该关闭它`FileInputStream`并释放资源？

如果在读取整个文件后`XmlPullParser`会自动关闭`FileInputStream`，如果抛出异常或我从不调用会发生什么`xpp.nextXXX()`？

无论如何它会关闭流，所以我不应该担心资源管理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:44:08.870

你打开了文件

```
new FileInputStream("test/file.xml) 
```

所以你应该关闭它。此外，您应该知道 XmlPullParser 会抛出异常。

# java - 嵌套静态类的变量可以被垃圾收集吗？

> ID：16021490
> 
> 赞同：1
> 
> 时间：2013-04-15T17:45:37.120
> 
> 标签：java, static, garbage-collection

在 Java 中，有一个嵌套的静态类`Human`，我想知道在清理`map`变量后是否可以使其可用于垃圾收集。就在`doSomeCode()`我打电话`System.gc()`并添加`Thread.sleep(60000)`以等待垃圾收集器拾取未引用的`map`内容之前的那一刻，但没有办法 - 它似乎`map`存在于程序中，除非它即将完成。我的问题是我需要释放内存，否则会得到`OutOfMemoryError`.

你认为是什么阻止`map`了阶级的财产`Human`被回收？是因为`Human`类是静态的，因此它的所有成员都不能被垃圾收集吗？

```
import java.util.List;
import java.util.ArrayList;
import com.carrotsearch.hppc.IntObjectMap;
import com.carrotsearch.hppc.IntObjectOpenHashMap;

public class TestNestedStaticClass {

    public static class Human {

        String name = null;

        List<Human> children = null;

        // some data about family members
        IntObjectMap<int[]> map = null;

        public Human(String name) { this.name = name; }

    }

    public static void main(String[] args) {

        final List<Human> family = new ArrayList<Human>();
        for (int i = 0; i < 1000; i++) {    

            // create and get the family member
            family.add(new Human("givenName"));
            Human h = family.get(i);

            // create map and add some data
            h.map = new IntObjectOpenHashMap<int[]>();
            for (int j = 0; j < 100; j++) {
                int[] array = new int[1500];
                h.map.put(j, array);
            }

        }

        // ...

        // at some point we want to free the memory occupied by
        // family.get(i).map for all i from 0 to 1000, so we do:
        for (int i = 0; i < 1000; i++) {

            // get the family member
            Human h = family.get(i);

            // explicitly remove references from the map
            for (int j = 0; j < 100; j++) {
                h.map.remove(j);
            }

            // cleanup
            h.map.clear();
            h.map = null;

        }

        // ...

        doSomeCode();

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:53:19.787

从您编写: 的那一刻起`h.map = null;`，该地图就符合 GC 条件（从技术上讲，删除和清除不是必需的）。

您看不到它被 GC 处理的原因可能是因为您在同一方法中运行所有代码，并且 GC 在方法退出之前不必收集局部变量。

如果您尝试将其拆分为多个方法，它将有助于 GC（一旦方法退出，它将摆脱局部变量）。

另见[这篇文章](https://stackoverflow.com/questions/13531004/java-outofmemoryerror-strange-behaviour)。

ps：我假设您在其他任何地方都没有对地图内容或地图本身的任何引用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T17:53:04.040

Human 类是静态的这一事实没有任何意义——即使`map`变量是静态的，将其设置为 null 也会释放对象内容以进行垃圾收集。

如果您遇到 OutOfMemoryErrors，并且您确定地图内容是原因，那么一定存在对某处数据的挥之不去的引用。例如，如果我这样做：

```
human.map.put(0, new int[10000]);
something.thing = map.get(0);
human.map.remove(0);
human.map = null; 
```

请注意，对`int[10000]`仍保留在内存中的引用 @ `something.thing`。清理地图只是释放数组以进行垃圾收集所需的工作的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:52:13.107

请注意，内部`static`类确实是顶级类，但只是在 a 内部`class`，因此收集其实例的 GC 规则与 GC 应用于公共类实例的规则相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T17:55:04.820

之后不需要休眠`System.gc()`- gc 方法在垃圾收集器完成之前不会返回。

出于垃圾收集的目的，静态内部类的实例被视为与任何其他类的实例相同。您正确地释放了`map`Human 类的元素（尽管调用`map.remove()`and`map.clear()`和`map = null`- 只是`map = null`需要）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T18:02:22.960

看起来您正在使用所有原始数据类型。这可能是一个问题，这只是一个理论，我还没有测试过，但它可能值得一试。

尝试使用 ArrayList，而不是使用 int 数组 ( int[] )。这应该创建可以被垃圾收集的对象，原始数据类型是在堆栈上而不是在对象堆上创建的，因此它们不受垃圾收集的影响？

**注意：我打了一个问号，因为我不肯定，有人可以确认或拒绝我的理论。**

**理论被拒绝：（，留给其他人阅读**

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-15T17:49:44.577

1）自从我用Java编程以来已经有一段时间了，但我的猜测是静态对象/变量在程序的整个执行过程中都存在于一个特殊的地方。

2) 显式调用 GC 并不能确保对象将被删除。您只需调用 GC，它就会自行决定（并且您不能真正影响此行为）。

# android - API 8 中的滑动菜单和类似功能

> ID：16021493
> 
> 赞同：0
> 
> 时间：2013-04-15T17:45:41.513
> 
> 标签：android

Android API 11 及更高版本有一些新的东西，例如滑动内容 - 滑动菜单等。然而，一些应用程序在 API 8 中实现了它。例如，[EventBrite](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=https://play.google.com/store/apps/details?id=com.eventbrite.attendee&hl=tr&ei=djxsUdPVO6T07Abls4DoAw&usg=AFQjCNE721CN3ZxHL0uJSGYI0kczZa15cQ&sig2=GtPnEcAcYzQTxVOn3wze9A&bvm=bv.45175338,d.ZGU)可以实现我想要的任何东西。我如何在 API 8（2.2 及更高版本）中做同样的事情？

# asp.net - ASP:MENU 点击打开子菜单

> ID：16021498
> 
> 赞同：1
> 
> 时间：2013-04-15T17:45:54.807
> 
> 标签：asp.net, aspmenu

我有以下 ASP：菜单

```
<asp:Menu id="menu_mymenu" runat="server"  OnMenuItemClick="menu_mymenu_Click">
    <Items>
        <asp:MenuItem Text="menu_1" Value ="menu_1">
            <asp:MenuItem Text="menu_a" Value="menu_a" />
            <asp:MenuItem Text="menu_b" Value="menu_b"/>
        </asp:MenuItem>
    </Items>                                                               
</asp:Menu> 
```

在鼠标悬停时显示子菜单 menu_a 和 menu_b。我希望 menu_1 上的 onclick 以相同的方式显示子菜单 menu_a 和 menu_b 而无需回发。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:29:25.703

看起来这不是一件特别容易做的事情，可能有点hacky。我已经看到很多尝试使用树视图而不是菜单控件的建议。无论如何，这是我找到的一些资源，并且出现的解决方案可能会奏效：

[http://forums.asp.net/t/1250342.aspx](http://forums.asp.net/t/1250342.aspx)

[是否可以强制在单击而不是鼠标悬停时触发菜单弹出？](https://stackoverflow.com/questions/4408250/is-it-possible-to-force-a-menu-popout-to-trigger-on-click-instead-of-mouseover)

如果绝对有必要点击它，那么值得研究适合您需求的解决方案。在这种情况下，我建议查看树视图或查看纯 css / javascript 解决方案。

希望这能让你走上正确的道路！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-02T07:35:25.243

我已按要求定制；以下是完整解决方案的链接。

[https://stackoverflow.com/a/60986351/3099784](https://stackoverflow.com/a/60986351/3099784)

# html - HTML 5 2D 画布动画清除

> ID：16021502
> 
> 赞同：0
> 
> 时间：2013-04-15T17:46:09.670
> 
> 标签：html, canvas, 2d, automatic-ref-counting

我一直在遵循各种指南，并为一个简单的动画准备了基本代码，但在我的一生中，我无法让画布正确重置。clearRect() 函数运行良好，但是当我立即尝试再次绘制弧线时，它会再次绘制所有路径的总和，而不仅仅是绘制圆的单个段。

有人可以告诉我我在这里做错了什么，我知道这是一个简单的解决方案！简而言之，我希望下面的测试页面产生一种旋转段，而不仅仅是画一个圆圈：

```
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

</head>
<body>
<span id="degrees_output" style="display:block;width:60px"></span>
<button onclick="continue_animation=false;">Stop</button>
<canvas id="myCanvas" width="578" height="200"></canvas>
<script>
  var degrees = 0;
  var continue_animation = true;
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');
  var output = document.getElementById('degrees_output');      

  window.requestAnimFrame = (function(callback) {
    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
    function(callback) {
      window.setTimeout(callback, 1000 / 60);
    };
  })();

  function animate() {        
    // update
    output.innerHTML = degrees;

    var radians = (degrees / 180) * Math.PI;

    if (degrees >= 360)
        degrees = 0;
    else
        degrees += 1;

    // clear
    if (degrees % 20 == 0)
    {           
        context.clearRect(0, 0, 578, 200);

    }

    context.beginPath();

    // setup the line style     
    context.strokeStyle = '#fa00ff';
    context.lineWidth = 5;
    context.lineCap = 'round';

    context.arc(50, 50, 20, 0, radians, false);

    // colour the path
    context.stroke();

    context.closePath();                

    // request new frame
    requestAnimFrame(function() {
        if (continue_animation)
            animate();
    });
  }
  animate();

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:30:41.997

如果您想要一个固定长度的弧线环绕您的圆圈，您需要在 context.arc 中指定起始角度和结束角度，如下所示：

```
context.arc(50, 50, 20, startRadians, radians, false); 
```

startRadians 可以是“弧度”值后面的任何角度：

```
var startRadians= (degrees-45) * Math.PI/180; 
```

并且，是的，在将弧线绘制到新位置之前，您需要清除画布（至少是前一个弧线）：

```
context.clearRect(0,0,canvas.width,canvas.height); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/VFhzX/](http://jsfiddle.net/m1erickson/VFhzX/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var degrees = 0;
    var continue_animation = true;
    var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');
    var output = document.getElementById('degrees_output');      

    window.requestAnimFrame = (function(callback) {
      return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
      function(callback) {
        window.setTimeout(callback, 1000 / 60);
      };
    })();

    function animate() {        
      // update
      output.innerHTML = degrees;

      var radians = (degrees / 180) * Math.PI;
      var startRadians= (degrees-45) * Math.PI/180;

      if (degrees >= 360)
          degrees = 0;
      else
          degrees += 1;

      // clear
      if (degrees % 20 == 0)
      {           
          context.clearRect(0, 0, 578, 200);

      }

      context.clearRect(0,0,canvas.width,canvas.height);

      context.beginPath();

      // setup the line style     
      context.strokeStyle = '#fa00ff';
      context.lineWidth = 5;
      context.lineCap = 'round';

      context.arc(50, 50, 20, startRadians, radians, false);

      // colour the path
      context.stroke();

      context.closePath();                

      // request new frame
      requestAnimFrame(function() {
          if (continue_animation)
              animate();
      });
    }
    animate();

}); // end $(function(){});
</script>

</head>

<body>
    <span id="degrees_output" style="display:block;width:60px"></span>
    <button onclick="continue_animation=false;">Stop</button>
    <canvas id="myCanvas" width="578" height="200"></canvas>
</body>
</html> 
```

# web-services - Erlang 和 SOAP 服务 - 坚如磐石

> ID：16021505
> 
> 赞同：2
> 
> 时间：2013-04-15T17:46:16.623
> 
> 标签：web-services, soap, erlang, mnesia, yaws

我的问题可能首先似乎有重复，但我遇到了令我惊讶的事情。`Yaws Webserver`附带一个完整的 SOAP 示例，但是当我尝试按原样运行它时，这就是我得到的： ![在此处输入图像描述](https://i.stack.imgur.com/9PVUG.jpg)

在文本形式中，这是我在 shell 中看到的：

```
1> inets：开始（）。
好的
2> yaws_soap_lib:call(" http://www.webservicex.net/WeatherForecast.asmx?WSDL ","GetWeatherByPlaceName",["波士顿"])。

=错误报告==== 2013 年 4 月 15 日::20:32:11 ===
调用元组 fun {erlsom_parse,xml2StructCallback}。
元组函数已弃用，将在 R16 中删除。请改用“fun M:F/A”，例如“fun erlsom_parse:xml2StructCallback/2”。
（这个警告只会在第一次调用元组 fun 时显示。）
{error,{decoding,"Malformed: Illegal character in prolog"}} 

3> yaws_soap_lib:call(" http://www.webservicex.net/WeatherForecast.asmx?WSDL ","GetWeatherByPlaceName",["Boston"]) .
{error,{decoding,"Malformed: Illegal character in prolog"}}
4>

```

[您可以尝试本页](http://yaws.hyber.org/soap_intro.yaws)后面的 yaws 示例。
另一个问题是，我尝试过其他 SOAP 库，例如[洗涤剂](https://github.com/devinus/detergent)和[erlsoap](http://sourceforge.net/projects/erlsoap/)，它们要么太旧，要么完全无法使用。`erlsom`大多数解决方案，甚至是 yaws，都提到了他对 XML 解析的依赖。但是，我很难`erlsom`单枪匹马地提供肥皂服务。

有人提供了一些关于我如何在 erlang 中使用肥皂服务（sa 客户端和服务器）的信息，请解释我在使用 yaws 时遇到的错误。我正在使用最新的 yaws 版本和 erlang 15B。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:32:15.703

这是一个丑陋的黑客，但这是我处理 SOAP 请求的方式：

编写一个包含以下内容的函数/模块：

1.  设置一些请求模板（静态 XML）并用[erlydtl填充它们](https://github.com/evanmiller/erlydtl)
2.  发出带有`SoapAction`标头集的 HTTP POST 请求（使用您选择的客户端）。
3.  [使用erlsom](https://github.com/willemdj/erlsom)从响应中删除重要内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:48:54.830

从官方[文档](http://www.erlang.org/doc/apps/otp_mibs/notes.html)中我们可以读到以下内容：

> 元组 funs（具有模块名称和函数的两个元素元组）现已正式弃用，并将在 R16 中删除。请改用“有趣的 M:F/A”。

所以，Yaws应该更新。作为一种解决方法，您至少有两个选择：

1.  [洗涤剂](https://github.com/devinus/detergent)库_
2.  或者，如果您不介意使用（并非如此）较旧的 Erlang R15，我相信它应该可以工作，正如其他用户所报告的那样。

# c++ - 我在 C++11 中从未见过的代码

> ID：16021509
> 
> 赞同：15
> 
> 时间：2013-04-15T17:46:22.267
> 
> 标签：c++, c++11, variadic-templates, static-assert, user-defined-literals

我在看这个源代码

```
template<char... digits>
struct conv2bin;

template<char high, char... digits>
struct conv2bin<high, digits...> {
    static_assert(high == '0' || high == '1', "no bin num!");
    static int const value = (high - '0') * (1 << sizeof...(digits)) + 
                             conv2bin<digits...>::value;
};

template<char high>
struct conv2bin<high> {
    static_assert(high == '0' || high == '1', "no bin num!");
    static int const value = (high - '0');
};

template<char... digits>
constexpr int operator "" _b() {
    return conv2bin<digits...>::value;
}

int array[1010_b]; 
```

我想知道这是否甚至是有效的C++。

```
template<char high, char... digits>
struct conv2bin<high, digits...> { 
```

这是什么？不专业的模板专业化？

为什么结构声明里面有代码行

```
struct conv2bin<high> {
    static_assert(high == '0' || high == '1', "no bin num!");
    static int const value = (high - '0');
}; 
```

我很困惑..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-15T17:47:53.443

您的代码显示了三个新的 C++11 功能：**可变参数模板**、**用户定义的文字**和**静态断言**。

通用可变参数类模板分别指定零个或多个参数，一个或多个专用版本，以及恰好一个。

```
// digits can be the empty set, so 0 or more arguments
template<char... digits>
struct conv2bin;

// digits can be the empty set, so 1 or more arguments
template<char high, char... digits>
struct conv2bin<high, digits...>

// fully specialized for 1 argument
template<char high>
struct conv2bin<high> 
```

可变参数模板的完整语法有点古怪，[维基百科](http://en.wikipedia.org/wiki/Variadic_template)上有一篇不错的文章。它对另一个 C++11 特性特别有用：**完美转发**可变数量的函数参数。

异国情调的外观`int operator "" _b()`定义了一个用户定义的文字，这是一种将您自己的单位添加到您的类型和表达式的方法。它只是意味着后面的整数`_b`被标记为某个“单位”。有关更多详细信息，请参阅此[问题](https://stackoverflow.com/q/237804/819272)。一个实际的好处是避免未来的火星着陆器崩溃（国际单位制和英制单位在他们的着陆软件中混合，编译器无法诊断它）。

The`static_assert`完全按照你的想法做：它静态地断言它的条件，即在**compile-time**。当断言失败时，编译停止。这是尽快检测错误的好方法。

**更新**

**当您有部分重叠的参数范围**时，可变参数模板的专业化可能会非常令人惊讶：零个或多个参数版本只会匹配您示例中的空列表（如果您已经为其提供了定义）。

```
#include <iostream>

template<int... Args>
struct Test
{
   enum { value = 0 }; 
};

template<int I, int... Args>
struct Test<I, Args...>
{
   enum { value = 2 };
};

template<int I>
struct Test<I>
{
   enum { value = 1 };
};

int main()
{
   std::cout << Test<>::value << "\n";     // matches zero or more version
   std::cout << Test<0>::value << "\n";    // matches single argument version
   std::cout << Test<0, 0>::value << "\n"; // matches one or more version, not the zero or more one!
} 
```

在[LiveWorkSpace](http://liveworkspace.org/code/1ycxGB$5)上输出。

这当然是部分模板特化的一般规则的一个例子，它指出将选择**最特化的版本**（一个或多个比零个或多个更特化，因为后者总是可以用于前者可以，但反之不行）。但是因为可变参数模板通常彼此之间没有那么“明显”的不同，所以你应该特别注意它们的部分特化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:12:26.053

```
template<char... digits>
struct conv2bin; 
```

这是一个模板前向声明。它不必完全定义，因为如果以不受支持的方式使用它，您会更快地发现错误（编译将失败）。这个特定示例不会导致编译失败，因为专业化涵盖了所有可能的情况。

```
template<char high, char... digits>
struct conv2bin<high, digits...> {
    static_assert(high == '0' || high == '1', "no bin num!");
    static int const value = (high - '0') * (1 << sizeof...(digits)) + 
                             conv2bin<digits...>::value;
}; 
```

这是一种部分特化，其中设置了一个模板值。其余的只是转发到模板类型的“较低层级”。这个模板结构是完全定义的，并且包含一个 int 成员变量，其值取决于“高”值和下一个模板。

```
template<char high>
struct conv2bin<high> {
    static_assert(high == '0' || high == '1', "no bin num!");
    static int const value = (high - '0');
}; 
```

再次部分模板特化，定义模板参数在其列表中仅包含一个参数时的值。

所以，总的来说，这是一个使用可变参数模板的[模板元编程](http://en.wikipedia.org/wiki/Template_metaprogramming)。

* * *

静态断言用于限制模板变量可以采用的值。

# wordpress - 页面压缩/缓存时 CORS 不起作用

> ID：16021513
> 
> 赞同：0
> 
> 时间：2013-04-15T17:46:36.987
> 
> 标签：wordpress, caching, cors, w3-total-cache

目前我有 2 个站点：A - 启用了内容和 CORS 标头，B - 我想使用 AJAX 包含脚本在其中嵌入内容。

页面未压缩时一切正常。启用 W3 总缓存后，我收到 XMLHttpRequest 异常 101。

**奇怪的行为：** 当我导航到内容应该在的页面，然后清除 A 站点的页面缓存并刷新 B 站点时，一切正常。当我清除浏览器缓存并刷新时 - XMLHttpRequest Exception 101 再次。Chrome、Firefox 和 Safari（桌面版和移动版）也是如此。

启用压缩时出了什么问题？

ps 我已经尝试通过 PHP 和 Apache 设置 CORS。没什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:22:01.290

可能是当您打开压缩时，响应中包含`Content-Encoding`标头吗？需要将此标头添加到 CORS`Access-Control-Allow-Headers`响应标头中。

# jquery - 带有 ELSE 条件的 jQuery 函数

> ID：16021518
> 
> 赞同：0
> 
> 时间：2013-04-15T17:47:01.893
> 
> 标签：jquery

这是 jQuery 大师的一个简单问题。

你可以在[这里找到一个工作小提琴](http://jsfiddle.net/nVx7a/17/)

如您所见，有一个带有`id="hideme"`. 我希望当我点击`link2`它`id`时隐藏，但条件是当我点击时`link1`它`link3`必须再次可见。

所以我认为它必须是 `} ELSE {`或者在jQuery中是不可能的？

```
$('#link2').click(function(){
    if(jQuery('#link2').data('clicked')) {
        $('#hideme').hide();
    } else {
        $('#hideme').show();
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:50:34.450

您的`click`侦听器仅附加到`#link2`. 您想检测何时单击任何链接，然后进行测试。像这样：

```
$('a').click(function(){
    if(this.id === 'link2') {
        $('#hideme').hide();
    } else {
        $('#hideme').show();
    };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:56:16.753

没有必要以这种方式使用 else 语句，因为 jQuery 在它的事件绑定中非常具有隧道视野。将某个事件绑定到某个元素，这将会发生。如果您希望在另一种情况下发生另一个事件，只需将其定义为这样。话虽如此，您可以像这样在 jQuery 中使用 javascript 语句：

```
if(x = 0)
{
    $("div").hide();
} 
else
{
    $("div").show();
} 
```

但是在这种情况下，您正在对某些外部变量使用逻辑运算符。绑定事件时，这是完全没有必要的。试试看一下 toggle() 功能。这是一个简单的例子：

```
$("#id").click(function() {
    $("#MyDiv").toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:49:26.980

无法通过将事件绑定到“#link2”来完成，但可以通过其他两种不同的方式完成：

```
$('#link2').click(function(){
    $('#hideme').hide();
});

$('#link1, #link3').click(function(){
    $('#hideme').show();
}); 
```

或者

```
$('ul a').click(function() {
    if ($(this).attr('id') == 'link2') {
        $('#hideme').hide();
    }
    else {
        $('#hideme').show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T17:50:19.390

您需要绑定单独的事件：

```
$('#link2').click(function() {
    $('#hideme').hide();
});

$('#link1, #link3').click(function() {
    $('#hideme').show();
}); 
```

我实际上会让 link1 和 link3 有一个公共类来使选择“更简单”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T17:51:03.213

您需要将`click`事件绑定到所有链接并在`handler`.

**[现场演示](http://jsfiddle.net/nVx7a/19/)**

```
$('[id^=link]').click(function () {    
    if (this.id == 'link2') $('#hideme').hide();
    else if (this.id == 'link1' || this.id == 'link2') $('#hideme').show();
}); 
```

# java - DirectoryWalker 过滤器文件夹，其中包含 xml 文件

> ID：16021520
> 
> 赞同：1
> 
> 时间：2013-04-15T17:47:04.780
> 
> 标签：java, apache, file, file-io, directory

我正在使用 DirectoryWalker，我想创建一个过滤器来列出所有包含 xml 文件的目录。我不想自己列出文件，而只想列出他们的直接父母？如果一个目录只有目录我不想列出它。你认为可行吗？

我一直在查看[http://people.apache.org/~jochen/commons-io/site/apidocs/org/apache/commons/io/DirectoryWalker.html#filter](http://people.apache.org/~jochen/commons-io/site/apidocs/org/apache/commons/io/DirectoryWalker.html#filter)上的示例，但我没有找到一个看起来做我想做的事。

```
public class ExtractedDirectoryWalker extends DirectoryWalker {

public ExtractedDirectoryWalker() {
    super();
}

public ArrayList<File> getDirectories(File startDirectory) throws IOException {
    ArrayList<File> dirs = new ArrayList<File>();
    walk(startDirectory, dirs);
    return dirs;
}

@Override
protected boolean handleDirectory(File directory, int depth,
    Collection results) {
    results.add(directory);
    return true;
} 
```

}

从另一个班级：

```
List<File> directories = new ExtractedDirectoryWalker()
                    .getDirectories(outputFolder.toFile()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:57:35.910

我还没有测试过代码，但我认为这应该可以工作：

```
private static final FileFilter filter = new XMLChildFileFilter();

public ExtractedDirectoryWalker() {
    super(filter, -1);
}
private static class XMLChildFileFilter implements FileFilter {
    @Override
    public boolean accept(File file) {
        if(file == null || !file.isDirectory() || !file.canRead()) {
            return false;
        }
        File[] files = file.listFiles();
        for(File f : files) {
            if(f.isFile()) {
                if(FilenameUtils.getExtension(f.getName()).equals("xml"))
                    return true;
            }
        }
        return false;
    }
} 
```

# scheme - Scheme：一个好的集合函数

> ID：16021525
> 
> 赞同：1
> 
> 时间：2013-04-15T17:47:19.517
> 
> 标签：scheme, computer-science, racket

我需要编写一个好的集合函数来检查它的参数是否`lst`是一个正确表示的集合，即它是一个仅由整数组成的列表，没有重复，并返回真#t 或假#f。例如：

```
(good-set? (1 5 2)) => #t

(good-set? ()) => #t

(good-set? (1 5 5)) => #f

(good-set? (1 (5) 2)) => #f 
```

所以我开始将函数编写为：

```
(define (good-set? lst) 
```

所以我不知道在此之后如何进行。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:10:29.207

为此，检查第一个数字是否重复，如果不是，则通过检查其余数字进行递归。像这样：

```
(define (good-set? list)
  (or (null? list)                      ; nothing left, good!
      (let ((head (car list)))
            (rest (cdr list)))
        (and (number? head)             ; a number
             (not (member = head rest)) ; not in the rest
             (good-set? rest)))))       ; check the rest 
```

如果你需要`member`，那么

```
(define (member pred item list)
  (and (not (null? list))
       (or (pred item (car list))
           (member pred item (cdr list))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:36:55.333

集合是[内置](http://docs.racket-lang.org/reference/sets.html)在 Racket 标准库中的：我建议不要根据列表重新实现它们，除非你真的需要做一些定制的事情。

* * *

如果我们需要将此视为家庭作业，我建议使用设计方法来系统地解决这个问题。在这种情况下，请参阅[How to Design Programs](http://www.ccs.neu.edu/home/matthias/HtDP2e/part_two.html#%28part._ch~3adesign-lists%29)之类的关于设计适用于列表的函数的内容。作为一个简短的草图，我们会系统地弄清楚：

*   我正在使用的数据的结构是什么？
*   我考虑哪些测试用例？（包括基本情况）
*   函数的整体形状是什么？
*   的含义是`natural recursion`什么？
*   我如何结合结果`natural recursion`来计算总数的解决方案？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T19:39:55.160

`andmap`正如@soegaard 所建议的那样，一种选择是使用和设置：

```
(define (good-set? lst)                  ; it's a good set if:
  (and (andmap integer? lst)             ; all its elements are integers and
       (= (length lst)                   ; the list's length equals the size
          (set-count (list->set lst))))) ; of a set with the same elements 
```

但是，如果您不能使用集合或其他高级程序，则遍历列表并测试当前元素是否为整数并且不存在于列表中的其他位置（[`member`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/private/list..rkt%29._member%29%29)用于此），对每个元素重复此测试直到有列表中没有更多元素。以下是总体思路，请填空：

```
(define (good-set? lst)
  (cond (<???>                ; if the list is empty
         <???>)               ; then it's a good set
        ((or <???>            ; if the 1st element is not an integer or
             <???>)           ; the 1st element is in the rest of the list
         <???>)               ; then it's NOT a good set
        (else                 ; otherwise
         (good-set? <???>)))) ; advance recursion 
```

# mysql - 如何在 MySQL 4.1.12 中使用“重命名用户”？

> ID：16021526
> 
> 赞同：0
> 
> 时间：2013-04-15T17:47:19.787
> 
> 标签：mysql, rename

MySQL 5.1 有一个`RENAME USER`功能可以满足我的需求。但不幸的是，我正在运行 MySQL 4.1.12。

我想要做的只是更改用户名的主机部分。我想将用户名从 更改`'myUsername'@'localhost'`为`'myUsername'@'123.45.%'`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:56:52.867

很抱歉通知您，但主机不是用户名的一部分，而是 mysql 用户表中的一个单独字段。您需要创建另一个具有相同用户名的用户（是的，这是可能的）或更新该用户记录的主机字段值，例如：

```
UPDATE mysql.user SET host = '123.45.%' WHERE user = 'myUsername'; 
```

警告 - 如果需要，这将更新用户名等于给定记录的每条记录，您可以在 where 子句中指定另一个条件。

# speech-recognition - Sphinx 4：用短停顿发音的单词识别 wav

> ID：16021527
> 
> 赞同：2
> 
> 时间：2013-04-15T17:47:22.317
> 
> 标签：speech-recognition, cmusphinx, sphinx4

我是 Sphinx 4 的新手，正在尝试制作简单的数字识别应用程序。我有一组带有 3 位数字的 wav，发音为短暂停（如 one_five_nine.wav）用于测试。问题是文件识别在找到第一个数字后停止，所以我只有“一个”作为 one_five_nine.wav 的输出。

这是我的前端配置

```
<component name="epFrontEnd16k" type="edu.cmu.sphinx.frontend.FrontEnd">
    <propertylist name="pipeline">
        <item>audioFileDataSource</item>
        <item>dataBlocker </item>
        <item>speechClassifier </item>
        <item>speechMarker </item>
        <item>nonSpeechDataFilter </item>
        <item>preemphasizer </item>
        <item>windower </item>
        <item>fft </item>
        <item>melFilterBankFor16k</item>
        <item>dct </item>
        <item>liveCMN </item>
        <item>featureExtraction </item>
    </propertylist>
</component> 
```

和代码

```
 Recognizer recognizer = (Recognizer) cm.lookup("recognizer");
    recognizer.allocate();

    AudioFileDataSource dataSource = (AudioFileDataSource) cm.lookup("audioFileDataSource");

    File folder = new File(testDataSetDirectory);
    for (final File fileEntry : folder.listFiles()) {
        // retrive URL
        URL audioURL = null;
        try {
            audioURL = fileEntry.toURL();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // configure the audio input for the recognizer
        dataSource.setAudioFile(audioURL, null);

        Result result = recognizer.recognize();         
        String recognizedText = result != null ? result.getBestFinalResultNoFiller() : "null";

        // print
        System.out.println(fileEntry.getName() + ":\t" + recognizedText);
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:51:51.100

您需要在循环中调用识别器：

```
 Result result;
 while(true) {
    result = recognizer.recognize();         
    if (result == null)
         break;
 } 
```

# wordpress - 同一安装中的自定义帖子类型和默认帖子

> ID：16021528
> 
> 赞同：1
> 
> 时间：2013-04-15T17:47:30.833
> 
> 标签：wordpress, categories, taxonomy, permalinks

在相同的Wordpress安装下使用自定义帖子类型和默认帖子是否合适？

我有一个包含许多默认帖子的网站，我现在需要集成自定义帖子类型和自定义分类。此外，我需要在我的永久链接中显示我的分类，并且我希望我的默认帖子继续使用相同的旧永久链接结构：`/%category%/%postname%.`

我已阅读有关使用过滤器挂钩和重写为`post_type_link`的回调函数使分类法出现在我的永久链接中的信息。但要实现这一点，我想我需要进入常规设置并放入自定义永久链接：，这可能会影响我的默认帖子永久链接结构。`%taxonomy_name%``taxonomy_name``%taxonomy_name%/%post_name%`

如果可以在同一安装下使用 Wordpress 自定义帖子类型和普通帖子。如果是这样，如何在常规设置下管理永久链接？

感谢您的帮助。我是自定义帖子类型和分类法的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:40:55.967

是的，当然，您可以在同一个 Wordpress 网站上使用自定义帖子类型和默认帖子类型，而不会出现关于永久链接结构的任何问题。您可以在永久链接设置下拥有一个新区域，您可以在其中单独管理自定义帖子类型的永久链接结构。

要使用的插件是：[http ://wordpress.org/extend/plugins/custom-post-type-permalinks/](http://wordpress.org/extend/plugins/custom-post-type-permalinks/)

# c - FXSAVE 可以在 FXRSTOR 之前执行两次吗？

> ID：16021529
> 
> 赞同：2
> 
> 时间：2013-04-15T17:47:34.600
> 
> 标签：c, assembly, linux-kernel, x86, x86-64

在破解 Linux 内核时，我注意到它会`FXSAVE`在执行 FPU 相关任务之前执行一条指令。我知道该`FXSAVE`指令会将 FPU 状态保存到内存中的目标位置，可以通过`FXRSTOR`指令恢复。我的问题是我是否可以在执行指令`FXSAVE`之前执行两次。`FXRSTOR`

例如：

```
char fxsave_region1[512] __attribute__((aligned(16)));
char fxsave_region2[512] __attribute__((aligned(16)));

asm volatile(" fxsave; "::"m"(fxsave_region1));

/* miscellaneous floating point operations */

asm volatile(" fxsave; "::"m"(fxsave_region2)); /* will this work? */

/* some more miscellaneous floating point operations */

asm volatile(" fxrstor; "::"m"(fxsave_region2));

/* even more miscellaneous floating point operations */

asm volatile(" fxrstor; "::"m"(fxsave_region1)); 
```

还是只支持一级储蓄？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:07:53.563

与 不同`F(N)SAVE`，`FXSAVE`不会改变 FPU/MMX 和 SSE 寄存器的状态，因此您可以重复多次。

# c++ - C++ 数组比较和移动？为什么苹果不动？

> ID：16021532
> 
> 赞同：0
> 
> 时间：2013-04-15T17:47:47.570
> 
> 标签：c++, arrays, compare

```
void moveApple(char gr[][SIZEX], int sp[], int keyMove[], int apple[][COUNT]) {
for(int i(0); i < COUNT; i++) { 
    if (( apple[0][COUNT] < (sp[0] + keyMove[0])) && (apple[1][COUNT] < (sp[1] + keyMove[1])))
    {
        apple[0][0] += (sp[0] + keyMove[0]);
    } 
```

这是我正在处理的项目中的一个过程......苹果应该根据 sp 的位置移动（这是一个火花数组，用于移动的变量），我希望苹果与每个 sp 一起向 sp 移动移动。下面是另一个也不起作用的尝试：

```
void moveApple(char gr[][SIZEX], int sp[], int keyMove[], int apple[][COUNT]) {
for(int i(0); i < COUNT; i++) { 
    if (( apple[0][COUNT] < (sp[0] + keyMove[0])) && (apple[1][COUNT] < (sp[1] + keyMove[1])))
    {
        gr[apple[0][-1]][apple[1][-1]] = APPLE;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:01:07.260

我认为你不能那样做：apple[0][-1];
你也不想要苹果[1][COUNT-1]吗？
有关每个阵列用途的更多信息可能会有所帮助

# c - 数组到指针的转换是否会取消对间接运算符的评估？

> ID：16021533
> 
> 赞同：3
> 
> 时间：2013-04-15T17:47:52.600
> 
> 标签：c, arrays, pointers, language-lawyer

在[Find size of array without using sizeof](https://stackoverflow.com/questions/16019009/find-size-of-array-without-using-sizeof-in-c)中，数组的大小通过以下方式计算

```
int arr[100];
printf ("%td", (&arr)[1] - arr); 
```

现在，为了指针算术的目的，`arr`被认为是单元素数组的元素，所以

```
&arr + 1 
```

是该（概念）单元素数组末尾的指针，因此当`arr[0]`减去的地址时，`arr`就获得了元素的数量。

在`(&arr)[1]`中，该指针是间接运算符的操作数，

```
(&arr)[1] ≡ *(&arr + 1) 
```

`int*`然后根据 6.3.2.1 (3)将生成的数组表达式转换为一个。

到目前为止，一切都很好。但是 6.5.6 (8) 中的最后一句（加法运算符），

> 如果结果指向数组对象的最后一个元素，则不应将其用作计算的一元运算符的操作数`*`。

禁止评估那里的间接运算符。

问题是间接运算符是否在

```
*(&arr + 1) - arr 
```

（在这种情况下，该表达式将调用未定义的行为）或数组到指针的转换会取消评估（在这种情况下一切都很好），就像获取地址 ( `&(*(&arr + 1))`) 或应用`sizeof`到它会..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:02:19.563

我认为标准很清楚，`*`运营商在这里进行评估。评估的结果是一个永远不会转换为值的左值，但仍然使用评估的结果。

使用运算符立即获取地址时有一个特殊的例外`&`： in `&*x`， where`x`有 type `T *`，`x`被计算，但`*`and`&`运算符不是。`T`在运行时没有中间类型的左值来获取地址。所以`&*x`即使`x`是一个空指针或一个超过数组末尾的指针也是有效的。

由于您没有使用`&`运算符来获取地址，因此该例外不适用。数组到指针的转换没有类似的例外，所以即使`x`是数组类型，如果实际上不指向任何对象，`*x`也是无效的。`x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:01:50.490

你想这样做：对于*任何* `T x;`，确实是`&x + 1`刚刚超过末尾的地址`x`，并且在数字上它是一个通过递增获得的指针`&x`（`sizeof(T)`所以`sizeof`仍然存在！）。

现在 if `T = U[N]`, then是一个类型为元素`x`的数组。但是指向这样一个数组的指针也是指向这样一个数组的*第一个元素*的指针。所以我们可以将（即 a ）重新解释为 a ，并且我们可以对 做同样的事情。但是现在这些指针是 type 的，所以它们的区别在于元素的数量。`N``U`*`&x``(T*)[N]``U*``&x + 1``U*`*

 *所以数组大小为：

```
(U*)(&x + 1) - (U*)(&x) 
```

请注意，由于数组到指针的衰减，`(U*)(&x)`实际上是与 的衰减相同的指针`x`。*

# c# - Html.ActionLink 很慢

> ID：16021538
> 
> 赞同：6
> 
> 时间：2013-04-15T17:48:22.083
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我正在使用 MVC 4 和 Razor 视图引擎。

我有一个`Html.ActionLink("Title", "Action")`在 foreach 循环中调用的调用，其中包含约 200 个项目，这大约需要 550 毫秒才能完成。如果我用一个简单的字符串替换 ActionLink 只需要 ~50ms --> Html.ActionLink 需要 ~500ms 进行 200 次迭代！

**有没有办法加快这个速度？**

我的循环中有 5 个这样的页面，所以我的页面需要 >3 秒才能呈现......
发布版本并且 web.config 中没有调试属性无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T06:23:49.030

我结合了评论中的一些技巧，将整个页面的渲染从大约 3 秒减少到大约 250 毫秒。最大的变化包括：

*   从我的自定义路由缓存数据库查询（-> 每次调用节省 2/3 时间）
*   “预生成”链接并仅替换其中的一部分：
    我`@{ var link = Html.ActionLink("_USER_", "Edit", new { id = "_ID_" }); }`在 foreach 循环之前和循环中做了类似的事情`@link.Replace("_ID_", user.UserId.ToString())`（你不能使用 String.Format，作为`Html.ActionLink()`转义`{0}`到`%7B0%7D`

# css - css中的有效选择器

> ID：16021539
> 
> 赞同：0
> 
> 时间：2013-04-15T17:48:22.777
> 
> 标签：css

```
#customers tr.alt td 
{
color:#000000;
background-color:#EAF2D3;
} 
```

`#customers`是`id`一个`table`。由于我是 CSS 新手，上述方法是有效的选择器吗？在 CSS 中，我只找到了`element element`选择器。但是这里的问题有三个要素：`table tr td`. 我还没有找到三元素选择器的示例。那么 CSS 中是否存在三元素选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:50:04.373

是的，您可以根据需要组合尽可能多[的简单选择器](http://www.w3.org/TR/css3-selectors/#simple-selectors)，并且您发布的选择器只是样式

任何`<td>`包含`<tr>`在 class="alt" 中并且在 ID 为 "customers" 的元素中

[http://www.w3.org/TR/css3-selectors/](http://www.w3.org/TR/css3-selectors/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:50:06.527

选择器是有效的，因为 CSS 选择器语法允许[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)“由两个或多个用空格分隔的选择器组成”。这是 CSS 2.1 规范中的情况，CSS3 不会改变这一点。

从技术上讲，`#customers tr.alt td`它不包含三个元素，而是三个选择器，尽管它只能匹配一个元素，该元素是包含三个嵌套元素的结构的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:50:14.333

是的，这是一个有效的 CSS 选择器。您可以根据需要组合任意数量。

# matlab - 在Matlab中找到连通分量的最小和最大孔

> ID：16021542
> 
> 赞同：-1
> 
> 时间：2013-04-15T17:48:38.833
> 
> 标签：matlab

如何在连通分量分析的图像中找到最小和最大孔。我已经完成了如何找到洞：（下面的代码）

```
I = imread('1.jpg');

B=bwlabel(I);

level = graythresh(I);

BW = im2bw(I,level);

numb=bweuler(BW,4); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:58:43.727

通过最小和最大孔，我假设您的意思是具有最小和最大面积的孔。您可以使用`regionprops`来查找连接组件的区域。但首先你必须将孔与背景区分开来。所以我们排除了接触图像边界的组件。

```
lbl = bwlabel(~BW);
holes = ~(BW|ismember(lbl,unique([lbl([1 end],:) lbl(:,[1 end])']))); 
```

现在您想找到剩余组件的最小和最大面积。

```
rp = regionprops(holes);
min_hole_area = min([rp.Area]);
max_hole_area = max([rp.Area]); 
```

您没有说您是否只想要该区域或像素图。您可以获得最小/最大孔的索引，但通常它可能不是唯一的。

# c++ - 在 C++ 中查找序列中的第 N 项

> ID：16021545
> 
> 赞同：2
> 
> 时间：2013-04-15T17:48:53.273
> 
> 标签：c++, algorithm, math, matrix, recurrence

我发现了一个问题，你得到了这种类型的序列：

你有

```
 the first K terms : a1, a2, ... , ak; 
           K coefficients : b1, b2, ... , bk 
```

和复发：

```
S(i) = b1*S(i-K) + b2*S(i-K+1) + ... + bk*S(i-1). 
```

我必须找出第 N 项。

我相信这个问题可以通过快速矩阵求幂来解决，但我很难发现我必须使用的矩阵。我正在尝试用 C++ 编写问题。谁能给我一些关于我应该如何处理这类问题的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:59:41.287

作为一个无耻的自我推销，我编写了[一个程序来使用矩阵乘法来解决线性递归](http://keithschwarz.com/interesting/code/?dir=recurrence)。文件顶部的注释描述了您想要形成的矩阵是什么，以及如何使用重复平方算法来有效地计算递归的第 n 项。

希望这可以帮助！

# c++ - 您可以将方法的内容复制到 StringStream 中吗？

> ID：16021553
> 
> 赞同：0
> 
> 时间：2013-04-15T17:49:21.607
> 
> 标签：c++, string, methods, stringstream

例如：

```
void Display()
{
    cout << "Hello World" << endl;
}

stringstream ss; 
```

如何将`display`方法输入到`ss`字符串流中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:54:37.637

```
// Save the old cout's streambuf 
streambuf* old = cout.rdbuf();

ostringstream oss;

// replace cout's streambuf with the ostringstream's
cout.rdbuf(oss.rdbuf());

// Call Display
Display();

// Restore the old cout
cout.rdbuf(old); 
```

评论本身的解释。

# css - 需要帮助将“磁带”img 定位在另一个 img 上

> ID：16021559
> 
> 赞同：2
> 
> 时间：2013-04-15T17:49:35.383
> 
> 标签：css, image, position, z-index

我正在尝试将一个 img 放在另一个 img 上，因为我想要一个剪贴簿的效果，其中的图像被“录制”到主页中。

我想保持胶带层的一致性，让自己在不丢失位置的情况下改变下面的图像。

HTML：

```
<div id="container">
    <div id="content">
        <img class="gesture" src="http://i.imgur.com/rWgpQ6b.jpg" alt="Rain Hands" title="Rain Hands" />
        <img class="tape" src="http://oi50.tinypic.com/nezz12.jpg" alt="tape" title="tape" />

        <div class="text">
            <h2>Rain Hands</h2>
            <p>"When someone complains, 'I just felt a raindrop!,' the easiest way to prove his or her statement is to break out the Rain Hands. Hold both hands, palms facing upwards, out towards the sky. If you feel drops, then it is indeed raining. If you don't, then it isn't. Rain hands are fool-proof."<br /><br /><strong>Submitted By: </strong>Shaun</p>
        </div>
    </div>
</div> 
```

CSS：

```
.gesture {
margin-left: 0;
margin-top: 45px;
width: 350px;
float: left; }

.tape {
margin-left: 10px;
margin-top: 45px;
position: absolute;
float: left;
width: 350px;
z-index: 1;} 
```

我得到的是：

[http://oi50.tinypic.com/28s8x8j.jpg](http://oi50.tinypic.com/28s8x8j.jpg)

但我希望胶带位于图像的角落之上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:07:34.217

我实现这一点的方法是制作一个包装器 div (class="image") 将照片和磁带图形放置在其中。然后将磁带图像包装在另一个绝对定位的 div 中。现在您可以使用 top:left: 来定位磁带图形，使其匹配。在您的示例中，磁带对于您的示例图像来说太高了。如果您要拥有不同的图像尺寸，制作两张磁带图像可能是明智之举，一张用于顶部，一张用于底部，并使用 top: 和 right: 和 bottom: 和 left: 定位它们：

```
<style>
.image{
position:relative;
}

.gesture {
margin-left: 0;
margin-top: 45px;
width: 350px;
float: left; }

.tape {
left: 10px;
top: 45px;
position: absolute;
float: left;
width: 350px;
z-index: 1;}
</style>

<div class="image">
<img class="gesture" src="http://i.imgur.com/rWgpQ6b.jpg" alt="Rain Hands" title="Rain Hands" />
<div class="tape"><img src="http://oi50.tinypic.com/nezz12.jpg" alt="tape" title="tape" /></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:01:21.973

将磁带放在 div 之外`container`：

```
 <img class="tape" src="http://oi50.tinypic.com/nezz12.jpg" alt="tape" title="tape" />
<div id="container">
    <div id="content">
        <img class="gesture" src="http://i.imgur.com/rWgpQ6b.jpg" alt="Rain Hands" title="Rain Hands" />

        <div class="text">
            <h2>Rain Hands</h2>
            <p>"When someone complains, 'I just felt a raindrop!,' the easiest way to prove his or her statement is to break out the Rain Hands. Hold both hands, palms facing upwards, out towards the sky. If you feel drops, then it is indeed raining. If you don't, then it isn't. Rain hands are fool-proof."<br /><br /><strong>Submitted By: </strong>Shaun</p>
        </div>
    </div>
</div> 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/bb5JC/](http://jsfiddle.net/hescano/bb5JC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:01:32.650

试一试`#content {position: relative;}`，去掉浮子上的`.tape`。

# mysql - MAMP mysql 服务器无法启动。没有mysql进程正在运行

> ID：16021564
> 
> 赞同：47
> 
> 时间：2013-04-15T17:49:49.113
> 
> 标签：mysql, mamp

我的 MAMP mysql 服务器无法启动。我在网上看到的所有建议都说要检查其他正在运行的 mysqld 进程并在它们存在时将其杀死，并且它应该可以解决问题，但对我来说没有。

这是错误日志：

```
130415 13:42:12 mysqld_safe Starting mysqld daemon with databases from /Library/Application Support/appsolute/MAMP PRO/db/mysql
130415 13:42:12 [Warning] Setting lower_case_table_names=2 because file system for /Library/Application Support/appsolute/MAMP PRO/db/mysql/ is case insensitive
130415 13:42:12 [Note] Plugin 'FEDERATED' is disabled.
130415 13:42:12 InnoDB: The InnoDB memory heap is disabled
130415 13:42:12 InnoDB: Mutexes and rw_locks use GCC atomic builtins
130415 13:42:12 InnoDB: Compressed tables use zlib 1.2.3
130415 13:42:12 InnoDB: Initializing buffer pool, size = 128.0M
130415 13:42:12 InnoDB: Completed initialization of buffer pool
130415 13:42:12 InnoDB: highest supported file format is Barracuda.
130415 13:42:13  InnoDB: Waiting for the background threads to start
130415 13:42:14 InnoDB: 1.1.8 started; log sequence number 1707549
130415 13:42:14 [Note] Event Scheduler: Loaded 0 events
130415 13:42:14 [Note] /Applications/MAMP/Library/bin/mysqld: ready for connections.
Version: '5.5.25'  socket: '/Applications/MAMP/tmp/mysql/mysql.sock'  port: 0  Source distribution 
```

看起来连接对我来说是开放的，但 MAMP 仍然出错并显示以下消息：“MySQL 无法启动。请查看日志以获取更多信息。”

有什么建议么？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2015-02-22T05:56:11.690

对我有用的是删除 mysql 目录中的所有文件（但不是目录）。

编辑#2 根据下面的答案，您只需要删除日志文件：[ib_logfile0, ib_logfile1]

所以退出 MAMP，然后在终端中：

```
rm /Applications/MAMP/db/mysql/ib_logfile* #(or wherever your MAMP is installed) 
```

编辑！：一些人提到你可能想先备份这些文件以防出现任何问题，所以也许只使用 mv 代替：

```
mv /Applications/MAMP/db/mysql/*  /tmp/. 
```

如果这不起作用，请返回并终止所有进程： `sudo killall -9 mysqld`

这也在这里重复： [mysql server won't start MAMP](https://stackoverflow.com/questions/23455841/mysql-server-wont-start-mamp/28654878#28654878)

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2017-02-07T05:44:00.240

最简单的解决方案：退出 MAMP 并从 MAMP/db/mysql 目录 [ib_logfile0, ib_logfile1] 中删除日志文件，然后重新启动 MAMP。欲了解更多信息，请访问[http://juanfra.me/2013/01/mysql-not-starting-mamp-fix/](http://juanfra.me/2013/01/mysql-not-starting-mamp-fix/)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2018-12-06T16:14:19.817

由于这里的答案都没有解决我的特定问题，我可能应该将自己的解决方案添加到列表中。

在 MAMP 仍在运行时，我不得不硬重置我的计算机。这有时会导致一个问题，在重新启动机器后 MAMP*可以*启动`Apache Server`，但由于某种原因*无法*启动`MySQL server`。

我对这个问题的解决方案是：

*   关闭 MAMP
*   去`Applications/MAMP/tmp/mysql`
*   删除文件`mysql.sock.lock`
*   重启 MAMP

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-03-20T07:18:14.773

```
rm /Applications/MAMP/db/mysql56/* 
```

工作正常，但是尽管有数据库，但它在 phpmyadmin 中显示“未找到数据库”，因此我的 drupal 给了我错误。

我需要做的只是简单地删除两个文件`ib_logfile0`并`ib_logfile1`从中删除`/Applications/MAMP/db/mysql56/`，这对我有用。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-06-16T20:06:11.023

我查看了 MAMP 网站。进入**MAMP/db/mysql56**并重命名两个日志文件（我只是在最后更改了数字）。瞧，重新启动 MAMP，一切都很好。

日志文件名称：

1.  ib_logfile0
2.  ib_logfile1

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-07-05T06:56:57.863

1.  停止 MAMP 服务器。
2.  然后进入以下文件夹：

> 应用程序/MAMP/db/mysql56/

在此文件夹中，请删除除文件夹外的所有直接文件。这意味着您不必删除`auto.cnf, ibdata, ib_logfile,`任何文件夹。

3.  重新启动 MAMP 服务器。

它应该工作。

谢谢你。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-09-30T19:18:23.240

这里的大多数答案都提供删除随机文件。

大多数时候，**这是最糟糕的事情，**特别是如果保持开发环境的完整性对您很重要。

如日志文件中所述，如果此问题与读取访问权限无关，也与您在 mysql 中删除的文件无关，那么唯一的解决方案是：

> 从 MAMP 中的文件菜单打开您的 my.conf 文件（文件 > 编辑模板 > MySQL）
> 
> 查找并将此行编辑为：`innodb_force_recovery = 1`
> 
> 使用 ctrl+S 保存
> 
> MAMP 将让您重新启动服务器
> 
> 回去建立下一个独角兽:)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-02-23T07:41:16.707

只需在终端中输入以下命令：

```
rm /Applications/MAMP/db/mysql56/ib_logfile* 
```

然后重新启动 MAMP。

它可以完美地恢复。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-01-19T22:53:15.680

我不得不做一些事情的组合。首先，我必须更改我的 mysql 目录的权限。应用程序/MAMP/db/mysql56/mysql[在此处查看 Stackoverflow](https://stackoverflow.com/questions/6443428/cant-find-file-ci-users-frm-errno-13)

如果这不起作用，请将 my.cnf 文件添加到 applications/MAMP/conf 文件夹，其中包含以下内容

```
[mysqld]
innodb_force_recovery = 1 
```

参见 Adel 'Sean' Helal。回答

这就是最终为我工作的原因。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-05-22T17:42:46.047

我将其发布为潜在的答案！

我为解决这个问题所做的如下：

1.  重新启动计算机（以确保没有 mysqld 进程正在运行，即使它崩溃并尝试自行重新启动）
2.  通过运行以下命令删除计算机上与 mysql 有任何关系的所有内容：

    ```
    sudo rm /usr/local/mysql
    sudo rm -rf /usr/local/mysql*
    sudo rm -rf /Library/StartupItems/MySQLCOM
    sudo rm -rf /Library/PreferencePanes/MySQL*
    vim /etc/hostconfig and removed the line MYSQLCOM=-YES-
    rm -rf ~/Library/PreferencePanes/MySQL*
    sudo rm -rf /Library/Receipts/mysql*
    sudo rm -rf /Library/Receipts/MySQL*
    sudo rm -rf /var/db/receipts/com.mysql.*
    ```

3.  通过运行 MAMP PRO 卸载程序删除 MAMP，然后删除应用程序/MAMP 文件夹
4.  删除`Library/Application Support/appsolute`文件夹（MAMP 应用程序支持文件夹）
5.  重新安装 MAMP PRO

希望这会有所帮助:)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-05-28T13:02:30.120

我已经看到了我们必须删除的`ib_logfile0`不同`ib_logfile1`答案`Applications/MAMP/db/mysql56/`

如果您使用 MAMP PRO 4，这些文件位于`/Library/Application Support/appsolute/MAMP PRO/db/mysql56/`

删除这些文件对我有用（服务器在系统崩溃后不会启动）。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-09-02T19:51:23.073

我刚遇到这个问题。这些是对我有用的步骤。

1.  `Preferences`在 MAMP 中打开，**记下您当前的 Apache 和 MySQL 端口号**。

    [![在此处输入图像描述](https://i.stack.imgur.com/NoBaB.png)](https://i.stack.imgur.com/NoBaB.png)

2.  单击`Set to default Apache and MySQL ports`和`Reset MAMP`按钮，然后单击确定。

3.  退出 MAMP

4.  `/Applications/MAMP/db/mysql`从目录中删除所有文件（不是文件夹） 。

5.  重新启动 MAMP 并单击`Start Servers`。

    **注意：**如果 MySQL 启动正常但 Apache 没有，请返回`Preferences`并将 Apache Port 设置回原来的状态。单击确定后，MAMP 应该会刷新，Apache 和 MySQL 都应该启动。

6.  如果`http://localhost/MAMP/index.php`加载失败，请打开开发者工具 (Chrome)，右键单击刷新按钮并选择`Empty Cache and Hard Reload`. phpAdmin 页面应该加载。如果不尝试进入`Application`开发人员工具中的面板，`Clear Storage`请从菜单中选择并单击`Clear Site Data`。

我希望这些步骤为不需要破坏数据库表的人提供快速修复。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-07-18T16:53:33.470

从 MAMP/db/mysql56 文件夹中删除文件 ib_logfileN（N 是数字）。

然后重新启动 MAMP。

应该管用！

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-08-17T23:56:20.667

我已经使用 MAMP 4.2 版尝试了上述所有解决方案，但在 El Capitan OS 中没有一个对我有用，所以唯一有效的方法是使用 Clean My Mac 卸载 MAMP，然后安装旧的 3.5.2 版本，即那个马上工作。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-12-19T18:35:44.367

**MAMP & MAMP PRO 4.0.6正在正确启动 MySql 服务器，但在我的机器将操作系统更新为****macOS Sierra (10.12.2)**后停止这样做。我尝试了这里提到的一些选项，包括设置文件夹权限和重新安装等。似乎没有什么能解决我的问题，所以我转向**[XAMPP](https://www.apachefriends.org/download.html)**，到目前为止它运行良好。

***更新：***我在[**这里**](https://stackoverflow.com/a/45441766/4221299)让 MAMP 使用这个简单的解决方案。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-12-22T08:21:40.370

找出真正原因的最佳方法是检查 MAMP > logs > mysql_error_log.err 中的 MAMP 错误日志

我发现错误“您是否已经在端口：3306 上运行了另一个 mysql 服务器？” - 这实际上是我的 MAMP MYSQL 没有启动的原因。

端口 3306 已经“繁忙”，所以我将其更改为 8306，这解决了我的问题。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-11-11T03:13:58.770

好的，所以我尝试了我在 SO 和其他论坛上找到的每一个建议，但对我没有任何帮助。唯一对我有用的解决方案是安装 MAMP 3 版本，因为我将 MAMP 用于 wordpress 项目版本 3 工作得很好。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2020-06-23T21:35:51.643

以上答案都不适合我（我在 MacOS 上将 MAMP 升级到了最新的 5.7）。

经过一段时间的错误日志（`/Applications/MAMP/logs/mysql_error_log.err`）挖掘后，我发现有一个`[ERROR] unknown variable 'thread_concurrency=8']`导致终止的错误。

基于一篇关于[升级](https://ahelpme.com/software/mysql/upgrade-mysql-5-6-to-5-7-what-problems-to-expect-with-old-my-cnf-configuration-file/)的帖子，我删除了该指令`my.cnf`并重新启动了 MAMP。之后一切正常（被提示升级数据库等）

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-05-14T23:03:55.477

对我有用的是：

即使 MAMP 已退出，我也有一个名为“mysqld”的进程正在运行。我强制退出该过程，重新启动 MAMP 并再次工作。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-03-30T16:12:25.887

我只是在终端中运行它：`sudo killall -9 mysqld`然后我强制退出 MAMP。重新打开 Mamp，一切正常。

有时，只需关闭并重新启动计算机即可。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-12-13T18:42:11.007

这对我有用：

*   检查您是否不小心通过 Brew 或其他方式安装了 mysql。`brew list mysql`
*   卸载它`brew uninstall mysql`
*   尝试启动 MAMP。可能需要重新安装。
*   最终升级到 Vagrant 并停止与 MAMP 战斗。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-01-27T19:40:55.950

这对我有用（Windows 10）：

1.  单击 MAMP 中的启动服务器
2.  手动点击 MAMP 安装文件夹中的 mysql.exe (C:\MAMP\bin\mysql\bin\mysql.exe)

提示：您可以将 mysql.exe 固定到“开始”菜单，这样您就不必总是搜索此文件夹

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2020-09-09T09:22:51.287

如果您使用的是 MAMP PRO 5.7+ (18029)

1.停止MAMPRO。2.转到目录/Applications/MAMP/db/mysql##（其中##是您的Mysql版本号）3.使用命令列出文件：ls -l * 4.键入命令：rm ib_logfile* #必须删除这 2 个文件。5.重新启动MAMPRO，它必须工作正常！

**注意：**如果您删除文件 ibdata1 将破坏您所有的“数据库”

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-12-29T23:02:49.530

如果是 MAMP PRO，您需要在此处删除 ib_logfiles：

```
rm -rf /Library/Application\ Support/appsolute/MAMP\ PRO/db/mysql56/ib_logfile* 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-09-28T04:30:00.853

对我来说， my.cnf 中的 innodb_additional_mem_pool_size 行导致了它

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-07-05T18:17:52.523

我在 Windows 和 MYSQL 5.7 上运行 MAMP 4.1。多次遇到此问题并找到了解决方法： **对我来说，删除日志文件不起作用，然后删除**

*   **mysql-bin.index**
*   **YOUR_PC_NAME.pid**

并且繁荣它再次开始工作。如果这对您也不起作用，请记住逐个删除每个文件并继续检查是否对您有用。确保始终**备份**。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-12-13T19:19:54.650

我有 mac 系统，但我的 mamp 无法正常启动。只需重新启动我的系统，然后再次启动 mamp 即可正常工作

* * *

## 回答 #28

> 赞同：-6
> 
> 时间：2015-03-05T07:35:05.643

您需要将 mysql 数据库保持原样。

*   卸载并重新安装 MAMP Pro。
*   对于您希望在服务器（本地主机）上拥有的每个 WP 实例，您需要创建一个不是 mysql 的新数据库。
*   进入 SequelPro 并添加数据库。
*   使用 Duplicator 传输您的 WP。

不要将 mysql 用于任何事情，它似乎是 MAMP 所要求的。

# python - 快速遍历元组列表

> ID：16021571
> 
> 赞同：52
> 
> 时间：2013-04-15T17:50:03.890
> 
> 标签：python

我想知道是否有一种更快、更省时的方法来遍历元组列表，找到正确的匹配项。我要做的是：

```
# this is a very long list.
my_list = [ (old1, new1), (old2, new2), (old3, new3), ... (oldN, newN)]

# go through entire list and look for match
for j in my_list:
    if j[0] == VALUE:
        PAIR_FOUND = True
        MATCHING_VALUE = j[1]
        break 
```

此代码可能需要相当长的时间来执行，具体取决于列表中的项目数。我确信有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-15T17:51:23.880

我认为你可以使用

```
for j,k in my_list:
  [ ... stuff ... ] 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-15T17:55:02.327

假设更多的内存使用不是问题，并且如果您的元组的第一项是可散列的，您可以从您的元组列表中创建一个[dict](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)，然后查找该值就像从`dict`. 就像是：

```
dct = dict(tuples)
val = dct.get(key) # None if item not found else the corresponding value 
```

**编辑**：要创建反向映射，请使用以下内容：

```
revDct = dict((val, key) for (key, val) in tuples) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-12T15:05:28.963

这个问题已经死了，但仍然知道另一种方式并没有什么坏处：

```
my_list = [ (old1, new1), (old2, new2), (old3, new3), ... (oldN, newN)]

for first,*args in my_list:
    if first == Value:
        PAIR_FOUND = True
        MATCHING_VALUE = args
        break 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-15T17:54:48.263

可以清理代码，但是如果您使用列表来存储元组，则任何此类查找都将是 O(N)。

如果查找速度很重要，您应该使用 a`dict`来存储您的元组。键应该是元组的第 0 个元素，因为这就是您要搜索的内容。您可以轻松地从列表中创建字典：

```
my_dict = dict(my_list) 
```

然后，`(VALUE, my_dict[VALUE])`将为您提供匹配的元组（假设`VALUE`存在）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-05T08:53:28.577

我想知道下面的方法是否是你想要的。

您可以使用`defaultdict`.

```
>>> from collections import defaultdict
>>> s = [('red',1), ('blue',2), ('red',3), ('blue',4), ('red',1), ('blue',4)]
>>> d = defaultdict(list)
>>> for k, v in s:
       d[k].append(v)    
>>> sorted(d.items())
[('blue', [2, 4, 4]), ('red', [1, 3, 1])] 
```

# php - Time() 的替代方案

> ID：16021576
> 
> 赞同：1
> 
> 时间：2013-04-15T17:50:11.627
> 
> 标签：php, time

我有一个 PHP 脚本，它当前使用 time() 从服务器提取时间；

不幸的是，服务器上的时间最近是错误的，并且在更新/重置之前提前。托管支持已调查此问题，但尚未解决，并且仍在进行中。

对于这个脚本，我需要时间来相对准确，所以我想我可以进行临时修复，直到上述问题得到解决。

我曾尝试查看其他各种获取时间的方法，例如从 NIST 获取时间，或者有人提到从标题中获取时间。我担心会减慢脚本速度，但不确定最好的方法是什么。

顺便说一句，PHP 版本是 4.4 - 是的，我知道它应该更改，但这不在我的控制范围内，因为它位于共享服务器上。

因此，有关如何获取当前时间的任何建议 - 而不是服务器时间并将其作为 unix 时间戳，如 time();

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:00:15.880

我知道你知道这一点，但是 4.4 严重吗？你根本不关心安全吗？

如果您不想依赖服务器的时间设置来回答您的问题，那么调用一些 NTP 服务器来请求当前日期/时间怎么样？

[http://www.pool.ntp.org/](http://www.pool.ntp.org/)

经过一番搜索，我发现这可能是重复的：[php validation for NTP server](https://stackoverflow.com/questions/5777132/php-validation-for-ntp-server)

[另请注意，不稳定的时间可能是由前面的其他更严重的问题引起的。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:34:21.713

制作一个从任何服务器获取时间的脚本。就像您建议的 NIST 服务器一样。或使用 timeanddate.com。您可以使用 file_get_contents() (php4.3+) 尝试`file_get_contents("http://free.timeanddate.com/clock/i3l84w5k/tt0/tw0/tm3/td2/th1/ta1/tb3")`使用正则表达式来提取时间字符串。然后使用 . 将该时间字符串转换为时间戳`strtotime()`。

让此脚本调用 time() 并将返回的时间戳从远程主机的时间（时间戳）中减去。

现在将此偏移量写入缓存、数据库或文件。

并将此脚本放入 cron 作业中。

并编写一个函数 myTime()，从缓存/数据库/文件中读取偏移量并将其添加到 time()。

* * *

**编辑**：我解决了一点：

使用 cronjob 定期运行此脚本：

```
date_default_timezone_set("UTC");
$html = file_get_contents("http://free.timeanddate.com/clock/i3l84w5k/tt0/tw0/tm3/td2/th1/ta1/tb3");
preg_match('/id=t1>(.*)</U',$html, $matches);
$timeStamp = strtotime($matches[1]);
$offset = time() - intval($timeStamp);
$fh = fopen("time_offset.txt", "w");
fwrite($fh, $offset);
fclose($fh); 
```

使用此函数获取调整后的时间：

```
function myTime() { return time() - intval(file_get_contents("time_offset.txt")); } 
```

# javascript - 实现javascript继承

> ID：16021577
> 
> 赞同：0
> 
> 时间：2013-04-15T17:50:12.813
> 
> 标签：javascript, inheritance

我试图理解javascript中的继承

```
function baseClass(name) {
   this.name = name;
   this.getName = function() {
       return this.name;
   }
}

function subClass(id, company){
       baseClass.call(this);
       this.id = id;
       this.company = company;
       this.toString = function() {
           return name + "\n" + this.id + "\n" + this.company; 
       }  
   }

subClass.prototype = Object.create(baseClass);
   var s = new subClass();
   s.toString();  //here the name property from the baseClass is not displayed. 
```

如何正确实现继承（经典/原型）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T17:58:42.467

首先，有两个小问题：

*   大小写在 JavaScript 中很重要。[`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)需要小写，并且您的函数名称不匹配（`subClass`vs `SubClass`）。通常，构造函数名称是大写的。
*   使用属性`this.name`（继承）而不是变量`name`（未定义） - 请参阅[Javascript：我需要为对象中的每个变量放置 this.var 吗？](https://stackoverflow.com/q/13418669/1048572)

> 如何正确实现继承

移动原型对象上的方法（不需要特权，在构造函数范围内没有局部变量）。并让`SubClass.prototype`继承自`BaseClass.prototype`，而不是从`BaseClass`函数中继承。

```
function BaseClass(name) {
   this.name = name;
}
BaseClass.prototype.getName = function() {
   return this.name;
};

function SubClass(id, company){
    BaseClass.call(this);
    this.id = id;
    this.company = company;
}
SubClass.prototype = Object.create(BaseClass.prototype);
SubClass.prototype.toString = function() {
   return this.name + "\n" + this.id + "\n" + this.company; 
}; 
```

> `new SubClass().toString()`不显示来自 baseClass 的 name 属性

您正在调用没有任何参数的构造函数。,`id`和`company`属性`name`将具有`undefined`值。此外，您`SubClass`甚至没有 的参数`name`，并且它没有将任何内容传递给`BaseClass`构造函数调用。

# ajax - 文件上传后的 JSON 回调

> ID：16021580
> 
> 赞同：1
> 
> 时间：2013-04-15T17:50:16.500
> 
> 标签：ajax, json, upload

我在尝试通过 json/ajax 上传文件时遇到问题，并且文件看起来不像已上传。控制台输出中仅显示文件名。

我的html代码如下图。

```
<form action="/cgi-bin/upload.cgi" method="post" enctype="multipart/form-data" target="upIFrame"> 

<input type="file" id="uploadFileName" name="uploadFileName" size="30" >&nbsp;                                                                                                                                                                                                                                                                                                          
<input type="button" id="upgradeFile" name="upgradeFile" value="Upload" onclick="ul.load()" />
<iframe id="upIFrame" name="upIFrame" src="#" style="display: none;"></iframe>
</form> 
```

ul.load() 在下面调用这一行，最终 transfer.ajax 代码将调用

```
transfer.ajax({
               url:'upload.cgi', 
               data:{filename: ul.filename}, 
               success: success, 
               error: error, 
               async: true 
}); 
```

ul.filename 来自uploadFileName

和 transfer.ajax 代码如下所示

```
transfer = {
ajax: function(p) {        
if (p.url.indexOf('/') == -1) {
  p.url = '/cgi-bin/' + p.url;
}
p.type = 'POST';
p.contentType = 'application/json';  
p.dataType = 'json';
p.cache = false;

if (p.data != undefined) {
    p.data = JSON.stringify(p.data);
}

$.ajax(p);
}
}; 
```

在 Fire Fox 中查看后的结果是 JSON

```
filename   "file.tgz" 
```

资源

```
{"filename":"file.tgz"} 
```

有人能告诉我我做错了什么或错过了什么吗？

TIA

我将代码修改为以下...

```
var fd = new FormData();
fd.append("filename",ul.filename);
$.ajax({
  url: "/cgi-bin/test.cgi",
  type: "POST",
  data: fd,
  processData: false,  // tell jQuery not to process the data
  contentType: false,   // tell jQuery not to set contentType
  beforeSend : function(xhr){                           
xhr.setRequestHeader('Content-Disposition', 'form-data; name=\"uploadFileName\"; filename=\"' + ul.filename + '\"');
}, 
```

});

并且 Fire Fox 中的请求标头为

```
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Content-Disposition form-data; name="uploadFileName"; filename="test.tgz"
Content-Length  157
Content-Type    multipart/form-data; boundary=---------------------------20025277823050
X-Requested-With    XMLHttpRequest 
```

但“帖子”显示以下内容

来源----------------------------20025277823050 内容处置：表单数据；名称="文件名"

test.tgz -----------------------------20025277823050--

我将如何包含文件名 =“test.tgz”？少了什么东西？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T09:20:27.400

你可以试试这个，

```
var fd = new FormData();
fd.append("filename",ul.filename);`在此输入代码`
$.ajax({
  url: "/cgi-bin/test.cgi",
  类型：“发布”，
  数据：fd，
  处理数据：假，  
  内容类型：假，   
  发送前：函数（xhr）{                           
xhr.setRequestHeader('Content-Disposition', 'form-data; name=\"' + ul.filename + '\"; filename=\"' + ul.filename + '\"');
}
});

```

我认为 name 属性应该作为文件名。谢谢 ：）。

# arrays - 为什么我的整数（从数组中提取）没有在我的 if 语句中正确检查？

> ID：16021584
> 
> 赞同：0
> 
> 时间：2013-04-15T17:50:26.263
> 
> 标签：arrays, if-statement, nsmutablearray, nsnumber

我有一个播放声音文件的应用程序，我正在使用整数来计算音高的差异。用户以他们认为的答案进行响应，实际结果和用户的答案都存储在 NSMutableArrays 中。我已经将它们包装在 NSNumber 对象中，但是当我在下面的代码中将它们拉出时，似乎整数值始终为 0，并且无论用户输入什么，inputCount 都会上升，就好像它们匹配一样。谁能解释一下？我很绝望。

```
for (i = 0; i < 2; i = i + 1) {
if ([[userAnswers objectAtIndex: i] intValue] == [[intervalResults objectAtIndex: i] intValue]) {
    inputCount++;
    self.inputCountDisplay.text = [NSString stringWithFormat:@"%i", inputCount];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:55:41.550

更改括号 ( ) 这将不起作用 [ ] 使用此

# javascript - 使用 SPServices 查询大型列表并避免 List View Threshold... 功能

> ID：16021588
> 
> 赞同：3
> 
> 时间：2013-04-15T17:50:36.487
> 
> 标签：javascript, jquery, sharepoint

所以我有一个列表，其中包含数万个项目，我需要在使用 SPServices 时执行查询。阈值设置为 8,000，所以我对此有疑问。

到目前为止，我已经尝试通过将项目放入文件夹并索引我将在查询中使用的列来优化列表。

似乎让它工作的唯一真正技巧是正确索引列：但是即使列索引我仍然有问题：

如果我索引列“Keyword1”和“Keyword2”，如果我只在查询中使用其中一个字段，我可以很好地查询列表，但是只要我将它们都包含在带有 Or 谓词的 Where 子句中，我得到阈值误差。

这里的最后几句话突出了问题[http://msdn.microsoft.com/en-us/library/ff798465.aspx](http://msdn.microsoft.com/en-us/library/ff798465.aspx) “在这种情况下，您可以通过索引标题字段来避免问题。这将使 SharePoint 能够确定从索引中按标题排序的前 100 个项目，无需扫描数据库中的所有 10,000 个列表项目。**适用于排序操作的相同概念也适用于列表查询中的 where 子句和连接谓词。**谨慎使用列索引可以缓解许多大型列表性能问题并帮助您避免查询限制。”

如何以可以执行更复杂查询的方式索引列，例如，

```
<Query><Where><Or><Eq><FieldRef Name='Keyword1' /><Value Type='Text'>TEST1</Value></Eq><Eq><FieldRef Name='Keyword2' /><Value Type='Text'>TEST2</Value></Eq></Or></Where></Query> 
```

我已经尝试了很多选择。我认为有希望的是通过在查询中指定 ViewName 或 FolderName 来查询各个文件夹，但这似乎并没有绕过阈值错误。

任何提示或替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T07:46:16.540

您是否尝试将列表阈值增加到更高的值？

解决方法是“通过将 SPList.EnableThrottling 属性设置为 false 来覆盖单个列表的列表视图阈值。

```
 private static void DisbaleListThrottling()
        {
           using (SPSite spSite = new SPSite("http://YourSiteNameHere.com/TeamSite/"))
            {
                using (SPWeb spWeb = spSite.OpenWeb())
                {
                    SPList spList = spWeb.Lists["MyList1"];
                    spList.EnableThrottling = false;
                    spList.Update();
                }
           }
        } 
```

您还可以使用 powershell：-

```
$web = Get-SPWeb http://whateverWeb

$list = $web.Lists[“List Title”]

$list.enablethrottling = $false

$lst.update() 
```

# css - 背景图像的 CSS 问题

> ID：16021590
> 
> 赞同：0
> 
> 时间：2013-04-15T17:50:45.707
> 
> 标签：css, background-image, z-index

我正在尝试将背景图片添加到我的站点标题中。部分图像应被主要内容覆盖。

它的位置正确，但是即使我添加了 z-index，主要内容也不会覆盖背景图像。

[这是网站。](http://frenchegg.com)

为什么会这样？

谢谢！

编辑：

如果你看右边，你会看到棕色鸡蛋没有被主要内容覆盖。你仍然可以看到它的一部分。

这是一些代码：

```
.header-navigation.back {
    z-index:-1;
    position:absolute;
    margin-left:0;
    margin-top:-6px;
    border:none;
display:block; height:137px; width:1171px; padding:0px; outline:none; text-indent:-9999px;
background-image:url('http://frenchegg.com/images/backmenu.png');
} 
```

这是应该涵盖图像的主要内容：

```
.main-content {
    z-index:99;
    position:relative;
    padding:1em 0 8.5em 0;
    background:#fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:06:07.663

请将`overflow:hidden`css添加到`header-wrap`课程中

```
.header-wrap {
  ...
  overflow: hidden
  ...
} 
```

它应该看起来不错。

* * *

对于登录问题：

`z-index: 99999`从班级中删除`.bann`

并将这个 css 添加到类中`tooltip-wrap`

```
sorry something went wrong 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:43:50.253

我将bann类更改为：

```
.bann {
    cursor: pointer;
    display: block;
    height: auto;
    position: relative;
    width: 101.5%;
    z-index: 99999;
    margin-left: 12px;
} 
```

之后似乎没问题...检查并通知我结果；

我用 firebug 测试了上面的代码；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:09:37.000

似乎您可以将 header-navigation.back 规则的高度降低到 100px，而不是弄乱 z-index。

# ruby-on-rails - 向控制器的“新”动作传递（和使用）参数

> ID：16021596
> 
> 赞同：0
> 
> 时间：2013-04-15T17:51:13.607
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的应用程序有很多练习的课程。

当我查看课程时，我希望能够创建新的 Drills 并自动分配他们的课程 ID。

到目前为止，我所拥有的是课程的 show.html.erb 中的一个链接，该链接传入课程的 ID，如下所示：

```
<%= link_to t('.new', :default => t("helpers.links.new")),
          new_drill_path(lesson_id: @lesson.id), :class => 'btn' %> 
```

这会将 course_id 添加到 params 哈希中。通过在我的控制器中执行此操作，我想出了如何将参数传递给钻子：

```
 def new
    @drill = Drill.new
    params.each do |key, value|
      method = key.to_s + '='
      method.to_sym
      if @drill.respond_to? method
        @drill.send method, value
      end
    end
  end 
```

但是，这段代码对我来说似乎很臭。似乎应该有一种更规范的方式来做到这一点，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:13:26.463

使用[嵌套资源](http://guides.rubyonrails.org/routing.html#nested-resources)。像这样的东西：

```
# in config/routes.rb
resources :lessons do
  resources :drills
end 
```

这将为您提供嵌套的 URL/路由，并且像`lesson_drills_path`这样的路由助手将`Lesson`-record 作为其参数来生成类似`/lessons/:lesson_id/drills`.

因此，您`DrillsController`将有权访问，`params[:lesson_id]`因为它会在 URL 中给出。这意味着您可以执行以下操作

```
# POST /lesson/:lesson_id/drills/
def create
  @lesson = Lesson.find(params[:lesson_id])
  @drill = @lesson.drills.new(params[:drill])
  if @drill.save
    ..
  else
    ..
  end
end 
```

在 CodeReview 上的[这个答案](https://codereview.stackexchange.com/questions/24579/rails-3-create-method-with-association/24609#24609)中查看更多信息，并检查那里的链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:12:06.727

我不确定您要做什么，但请阅读嵌套资源。您的新操作应如下所示：

```
def new
  @lesson = Book.find(params[:lesson_id])
  @drill = @lesson.drills.build
end 
```

# c - 程序忽略 if else 语句

> ID：16021598
> 
> 赞同：0
> 
> 时间：2013-04-15T17:51:16.847
> 
> 标签：c, if-statement

我编写了一个非常简单的代码，以确保它在我将其实施到我的一个更大的项目中之前正常工作。用户会看到一个包含三个选项的列表，用户应该选择一个，在此代码中它显示他/她的选项。

```
#include <stdio.h>
#include <conio.h>

int main()
{
    char c;
    int allowed;
    printf("Pick any:\n 1\. one \n 2.two \n 3.three \n");

    c = getch();

    do{
      //getch();
      if (c = '1'){
        printf("ONE");
        allowed = 1;
      } else if (c = '2'){
        printf("TWO");
        allowed = 1;
      } else if (c = '3'){
        printf("THREEEEEE");
        allowed = 1;
      }else{
        printf("Choice was invalid, do it again:");
        allowed = 0;
      }
    }while (allowed = 0);

    return 0;

} 
```

但是，输出将始终打印：ONE，无论我在键盘上敲什么，调试器都会显示它到达第一个允许的 = 1，然后跳到 do while 循环的末尾。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T17:53:31.397

在 c 中进行比较时，您必须使用双等号运算符 (==)。因此，当您比较 if (c = '1') 时，您为 c 分配了 '1' 的值，这将返回 true。改变

```
if (c = '1') 
```

至

```
if (c == '1') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T17:52:51.083

你需要改变

```
if (c = '1') 
```

至

```
if (c == '1') 
```

这是因为`c = '1'`赋值并返回`c`其值为 true 从而触发.`'1'``'1'``if`

# javascript - JavaScript 函数中调用的 CSS 图像有时无法加载

> ID：16021604
> 
> 赞同：0
> 
> 时间：2013-04-15T17:51:43.423
> 
> 标签：javascript, css, file-upload, background-image

有时，CSS 背景图像无法加载。这可能是什么原因？

我有一个这样的Javascript代码：

```
function progressBar(file_id) {

    pbar = ($("<div />").attr('id',file_id+"-statusicon").css({"background-image" : "url('../img/test-skip-icon.png')", "width" : "16px", "height" : "16px"}));
    $("#"+file_id+" .status").append(pbar);
} 
```

然后我在另一个函数中调用它：

```
progressBar(file_id); 
```

问题是有时图像加载正确，有时不正确。png 图像大小约为 9KB。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:51:51.877

您可能希望在调用之前预加载图像以确保它在缓存中。有很多关于预加载图像的文章。您可能还需要考虑为图像使用 data:uri，这样它就根本不需要从文件系统加载 - Mike McCaughan

# sql - 转换时区问题

> ID：16021606
> 
> 赞同：1
> 
> 时间：2013-04-15T17:51:45.193
> 
> 标签：sql, database, date, timezone, oracle-sqldeveloper

我想获取 2013 年 4 月 1 日创建的所有记录。由于数据库中的时间和日期存储在 UTC 中，并且用户输入将是本地时间，因此我对用户输入应用时区转换，将日期（本地）转换为 UTC，以便获取正确的记录。

```
AND SORDT.NAME = 'New Install'
AND SORD.X_ORDER_SUB_TYPE = 'New Registration'
AND SORD.CREATED >= (FROM_TZ(CAST(TO_DATE('1-Apr-2013 00:00:00','DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP), 'Asia/Kuala_Lumpur') AT TIME ZONE 'UTC')
AND SORD.CREATED < (FROM_TZ(CAST(TO_DATE('2-Apr-2013 00:00:00','DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP), 'Asia/Kuala_Lumpur') AT TIME ZONE 'UTC')
ORDER BY SORD.CREATED ASC 
```

但是查询结果是错误的。如果我运行上面的查询，我会在“01-APR-2013 09:25:39”上创建第一条记录（在此记录之前创建了其他记录），最后一条记录（ORDER BY SORD.CREATED DESC）创建时间为“02-APR-2013 00:56:04”（两个结果都已转换为本地时间）。

我运行下面的查询，它使用 UTC 时间作为输入（1-Apr-2013 00:00:00 = 31-MAR-2013 16:00:00 UTC），我将获取正确的记录。

```
AND SORDT.NAME = 'New Install'
AND SORD.X_ORDER_SUB_TYPE = 'New Registration'
--AND SORD.CREATED >= (FROM_TZ(CAST(TO_DATE('1-Apr-2013 00:00:00','DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP), 'Asia/Kuala_Lumpur') AT TIME ZONE 'UTC')
--AND SORD.CREATED < (FROM_TZ(CAST(TO_DATE('2-Apr-2013 00:00:00','DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP), 'Asia/Kuala_Lumpur') AT TIME ZONE 'UTC')
AND SORD.CREATED >= TO_DATE('31-MAR-2013 16:00:00','DD-MON-YYYY HH24:MI:SS') 
AND SORD.CREATED < TO_DATE('01-APR-2013 16:00:00','DD-MON-YYYY HH24:MI:SS') 
ORDER BY SORD.CREATED ASC 
```

返回的查询，创建的第一条记录在“01-APR-2013 00:00:36”，最后一条记录在“01-APR-2013 23:08:39”，这是正确的。

这里可能是什么问题？两者都是一回事。下面是接受用户输入参数的代码的第一部分，然后将值转换为UTC，我运行它来检查值，它完全一样（输出：31-MAR-2013 16:00:00）。

```
SELECT
(FROM_TZ(CAST(TO_DATE('1-Apr-2013 00:00:00','DD-MON-YYYY HH24:MI:SS') AS TIMESTAMP), 'Asia/Kuala_Lumpur') AT TIME ZONE 'UTC') AS "DATE"
FROM
DUAL 
```

我希望我把我的问题说清楚了，我感谢任何解决这个问题的建议和意见。谢谢。

# iphone - 用户位置图像图钉大部分时间都消失了

> ID：16021608
> 
> 赞同：0
> 
> 时间：2013-04-15T17:51:51.757
> 
> 标签：iphone, objective-c, xcode

我正在使用以下代码

```
-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([[annotation title] isEqualToString:@"Current Location"] )
    {
        MKAnnotationView *anView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentPin"];

        anView.image = [UIImage imageNamed:@"pin_green.png"];
        anView.canShowCallout = true;
        anView.enabled = true;
        return anView;
    } 
```

问题是，它随机消失并再次出现。给用户带来非常糟糕的体验。有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:01:30.960

您应该使用 MKMapView`dequeueReusableAnnotationViewWithIdentifier:`并查看在创建新视图之前是否获得了视图`initWithAnnotation:reuseIdentifier:`：

```
MKAnnotationView *anView = [mapView dequeueReusableAnnotationViewWithIdentifier:@"currentPin"];

if (!anView) {
    anView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentPin"];

    anView.image = [UIImage imageNamed:@"pin_green.png"];
    anView.canShowCallout = true;
    anView.enabled = true;
}

return anView; 
```

也就是说，我不完全确定这是您问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:12:19.313

这段代码有几个可疑的地方：

*   `dequeue`正如有人指出的那样，您没有使用。特别是，这里的问题是您每次都在创建一个新视图，而不是检查是否需要创建一个新视图。

*   您忘记了关键步骤，即将视图与注释相关联。

这是一个简单`viewForAnnotation:`实现的规范结构，我们提供自己的视图：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView
            viewForAnnotation:(id <MKAnnotation>)annotation {
    MKAnnotationView* v = nil;
    if ([annotation.title isEqualToString:@"Current Location"]) {
        static NSString* ident = @"greenPin";
        v = [mapView dequeueReusableAnnotationViewWithIdentifier:ident];
        if (v == nil) {
            v = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                              reuseIdentifier:ident];
            v.image = [UIImage imageNamed:@"pin_green.png"];
            v.canShowCallout = YES;
        }
        v.annotation = annotation;
    }
    return v;
} 
```

由于该代码对我有用，我建议您从它开始并根据需要对其进行调整。

顺便说一句，你不需要这个方法只是为了得到一个绿色的别针！你知道的，对吧？iOS 会给你一个绿色的别针 (MKPinAnnotationColorGreen)。

# excel - 计算重复值

> ID：16021609
> 
> 赞同：1
> 
> 时间：2013-04-15T17:51:58.493
> 
> 标签：excel, duplicates, excel-formula

我正在尝试返回重复值出现在 excel 列中的次数

例如：

```
Column A  | Column B
12345678  | Return 1
12345678  | Return 2
12345678  | Return 3
23456789  | Return 1
23456789  | Return 2
34567891  | Return 1 
```

我应该让我的例子更好，这将是骗子混为一谈。在我的情况下，他们不是。

```
Column A | Column B 

12345678 | Return 1 
23456789 | Return 1 
12345678 | Return 2 
23456789 | Return 2 
34567891 | Return 1 
12345678 | Return 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:58:15.217

将其放入单元格 B1 并复制下来

```
=COUNTIF($A$1:$A1,A1) 
```

**说明**：

COUNTIF 函数计算范围内满足您指定的单个条件的单元格的数量。

如果您注意到我保持第一个范围不变但附加了 $`$A$1`并将第二个范围保持为动态。当您向下复制时，第一个范围将保持不变，并且公式将更新以适应最左边的 col A 单元格。

**屏幕截图（适用于两种场景）**

![在此处输入图像描述](https://i.stack.imgur.com/5Vdym.png)

# c - 函数只返回 1？

> ID：16021612
> 
> 赞同：0
> 
> 时间：2013-04-15T17:52:09.463
> 
> 标签：c, menu, return, function-call

我遇到了一个问题，我的函数似乎只返回一个。我以为我正确地返回了函数，但似乎不是。

```
char goAgain()
{
char ch;
do
{
    printf("Would you like to go again? ");
    ch = getchar();
    while(fgetc(stdin) != '\n');
}while(ch != 'n' || 'y');

return ch;
}

double findMedian(int array[], int length)
{
int mid;
double median, medianLeft, medianRight;
if(length % 2 == 0)
{
    mid = length / 2;
//      medianLeft = array[mid];
//      medianRight = array[mid + 1];
}
else
{
    mid = length / 2;
    median = array[mid];
}

return median;
} 
```

这就是我所说的中位数

```
double mean = findMedian(array, length); 
```

为什么在我的回报中只给我一个。同样，当我尝试重复 goAgain 时，我也没有得到正确的 ch 来返回。

```
option = goAgain(); 
```

与 java 世界相比，c 世界中的情况有很大不同。

```
do
{
    int num = menu();

    if(num == 1)
        fillArray(array, size);
    else if(num == 2)
    {
        int newSize = readNum();
        fillArray(array, newSize);
    }
    else if(num == 3)
    {
        int length = size;
        sortArray(array);
        double mean = findMean(array, length);
        double median = findMedian(array, length);
        printResults(mean, median);
    }
    else
    {
        printf("Please enter a valid number\n");
        num = menu();
    }

    option = goAgain();
}while(option == 'y'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T17:54:24.027

这个条件：

```
(ch != 'n' || 'y') 
```

可能没有做你想做的事。它由编译器解释如下：

```
((ch != 'n') || 'y') 
```

这意味着“如果`ch`不是字符`n`或如果字符`y`”。如果您的机器使用 ASCII，则`y`值为 121。如果您这样做会发生什么：

```
((whatever) || 121) 
```

对于布尔`OR`运算符 ( `||`)，该值`0`表示假，其他所有值都表示真。当至少一个布尔 OR 运算的操作数为真时，你会得到什么？你说得对。

所以，你的条件本质上和简单地写一样

```
 (1) 
```

看起来你想要：

```
(ch != 'n' && ch != 'y'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:58:10.020

当这个：

```
if(length % 2 == 0) 
```

... 评估`true`，您不计算 的值`median`，但仍返回它。

（然后添加卡尔的答案中的任何内容，即处理您问题的“以及”部分！）

# c# - 为什么 c# DateTime.Parse 似乎错误地解释了字符串？

> ID：16021616
> 
> 赞同：2
> 
> 时间：2013-04-15T17:52:15.383
> 
> 标签：c#, parsing, datetime

有人可以解释为什么以下代码输出“4/14/2013 8:00:00 PM”吗？

```
var dt = "2013-04-15+00:00";
var result = DateTime.Parse(dt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:59:06.620

猜测一下，我认为 Anthony Pergram 的评论是正确的。很可能它将字符串解释为日期“2013-04-15”，时区为“+00:00”（格林威治标准时间），并且没有时间。默认时间是午夜，因此生成的日期等于“格林威治标准时间午夜 2013 年 4 月 15 日”。然后将其转换为比格林威治标准时间晚四个小时的本地时区，并按您所见的方式输出。

如果可以，您应该使用更精确的日期/时间格式，例如 ISO 8601，看起来像“2013-04-15T00:00:00Z”或“2013-04-15T00:00:00-04:00” "

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:55:20.887

在不同的地区、文化、上下文等中格式化日期/时间的方法有**很多**。使用`DateTime.Parse`时会尽力猜测要做什么，但在确定哪种日期时间格式不明确的情况下通常会失败合适的。

您可以使用`DateTime.ParseExact`来指定字符串用于格式化日期的确切格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:57:12.993

那是因为它考虑了您的系统时区。然后适当调整指定的时间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:02:02.777

MSDN 文档对此进行了深入的描述。

[http://msdn.microsoft.com/en-us/library/1k1skd40(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/1k1skd40(v=vs.90).aspx)

由于 +00:00，它正在以 UTC 格式读取字符串。它是在当地时间打印出来的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T18:16:59.763

您的`"+00:00"`字符串部分被解释为时区。那是格林威治以东0小时0分钟的“地理”区域。

如果您打算将该`"+00:00"`部分改为一天中的时间，请使用格式字符串，如下所示：

```
var dt = "2013-04-15+00:00";
var result = DateTime.ParseExact(dt, "yyyy-MM-dd+HH:mm", CultureInfo.InvariantCulture); 
```

`"HH"`和表示一天中（本地）时间的`"mm"`小时和分钟。在相反的方向上，带有`"yyyy-MM-ddzzz"`的`"+00:00"`部分将表示时区。

# asp.net - 根据单元格值设置 ASP DataGrid 行颜色

> ID：16021621
> 
> 赞同：0
> 
> 时间：2013-04-15T17:52:22.127
> 
> 标签：asp.net, html, vb.net, datagrid

我有一个在`ASP:DataGrid`其中显示记录的记录。记录从 SQL Server 2008 R2 数据库中提取到`SqlAdapter`用于填充 a`DataSet`并且绑定到`ASP:DataGrid`

可以跨越多个页面，`ASP:DataGrid`并且每页限制为 20 条记录。

其中一列是要处理条目的剩余天数的值。我想突出显示任何值为 0 - 1 的红色和任何值为 2 - 5 的预言。我尝试过的方法是将函数调用设置`OnItemDataBound`为`ASP:DataGrid`

```
Private Sub DataGrid1_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.DataGridItemEventArgs) Handles DataGrid1.ItemDataBound
    If (e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem) Then
        Select Case CType(e.Item.Cells(5).Text, Integer)
            Case 0 To 1
                e.Item.BackColor = Drawing.Color.Red
            Case 2 To 5
                e.Item.BackColor = Drawing.Color.Orange
        End Select
    End If
End Sub 
```

这在页面首次加载时完美运行。如果有超过一页的记录，并且您尝试移至下一页，则根本不会加载任何记录，实际上`ASP:DataGrid`根本不会显示。如果我再次删除这些`OnItemDataBound`功能`ASP:DataGrid`（尽管没有突出显示）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:57:12.593

所以事实证明，may 代码实际上是正确的。我`Try`在代码周围放置了一个块，其中有一个部分`Catch`用于将详细信息记录在我的数据库中的表中。

它立即显示以下来自`Select Case`

```
Conversion from string " " to type 'Integer' is not valid. 
```

我只需要一个简单的更改来确保单元格仅在存在有效值时才着色。

# android-progressbar - 如何让 TalkBack 读取 Android progressBar 进度？

> ID：16021624
> 
> 赞同：3
> 
> 时间：2013-04-15T17:52:38.493
> 
> 标签：android-progressbar, talkback

我试图让 TalkBack 读取进度条上的进度，但运气不佳。关于如何获取该信息以便 TalkBack 可以说出的任何想法。

谢谢

公共类 MainActivity 扩展 Activity {

```
Button btnStartProgress;
ProgressDialog progressBar;
private int progressBarStatus = 0;
private Handler progressBarHandler = new Handler();

private long fileSize = 0;

private String msgProgress ="";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    addListenerOnButton();

}

public void addListenerOnButton() {

    btnStartProgress = (Button) findViewById(R.id.btnStartProgress);
    btnStartProgress.setOnClickListener(
             new OnClickListener() {

       @Override
       public void onClick(View v) {

        // prepare for a progress bar dialog
        progressBar = new ProgressDialog(v.getContext());
        progressBar.setCancelable(true);
        progressBar.setMessage("File downloading ...");
        progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressBar.setProgress(0);
        progressBar.setMax(100);
        progressBar.show();

        //reset progress bar status
        progressBarStatus = 0;

        //reset filesize
        fileSize = 0;

        new Thread(new Runnable() {
          public void run() {
            while (progressBarStatus < 100) {

              // process some tasks
              progressBarStatus = doSomeTasks();

              // your computer is too fast, sleep 1 second
              try {
                Thread.sleep(1000);
              } catch (InterruptedException e) {
                e.printStackTrace();
              }

              // Update the progress bar
              progressBarHandler.post(new Runnable() {
                public void run() {
                  progressBar.setProgress(progressBarStatus);
                  //progressBar.setMessage(msgProgress);

                }
              });
            }

            // ok, file is downloaded,
            if (progressBarStatus >= 100) {

                // sleep 2 seconds, so that you can see the 100%
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                // close the progress bar dialog
                progressBar.dismiss();
            }
          }
           }).start();

           }

            });

    }

// file download simulator... a really simple
public int doSomeTasks() {

    while (fileSize <= 1000000) {

        fileSize++;

        if (fileSize == 250000) {
            //msgProgress = "25 Percent";
            return 25;
        } else if (fileSize == 500000) {
            //msgProgress = "50 Percent";
            return 50;
        } else if (fileSize == 750000) {
            //msgProgress = "75 Percent";
            return 75;
        } else if (fileSize == 900000) {
            //msgProgress = "90 Percent";
            return 90;
        }
        // ...add your own

    }

    return 100;

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T21:28:51.643

[正如这里](https://stackoverflow.com/questions/8159749/global-tts-in-android)提到的，可以创建一个 TTS Singleton 并添加一个方法来检查是否启用了可访问性。每次显示进度条时调用方法 say(message)。

这就是我实现它的方式

```
public class AccessibilityUtil implements OnInitListener {

private static final String TAG = AccessibilityUtil.class.getSimpleName();

private static final AccessibilityUtil instance = new AccessibilityUtil();
private String message;
private static TextToSpeech tts=null;

private static boolean isAccesibilityEnabled() {

     return ((AccessibilityManager) TmcPlusApplication.getInstance()
     .getSystemService(
     TmcPlusApplication.getInstance().ACCESSIBILITY_SERVICE))
     .isEnabled();

}

public static AccessibilityUtil getInstance() {

    return instance;
}

public void say(String message) {

    if (isAccesibilityEnabled()) {
        if (tts == null) {
            this.message = message;
            tts = new TextToSpeech(<Your Application object>.getInstance(), (AccessibilityUtil) instance);
        } else {
            speakOut();
        }
    }
}

@Override
public void onInit(int status) {
    if (status == TextToSpeech.SUCCESS) {
        Log.v(TAG, "Text to speech enabled");
        speakOut();
    }

}

/*
 * utters the message String
 */
private void speakOut() {
    Log.v(TAG, "Text to speech the word "+message);
    tts.speak(message, TextToSpeech.QUEUE_FLUSH, null);
}

public void stopTTS() {
    if (tts != null) {
        tts.shutdown();
        tts.stop();
        tts = null;
    }
} 
```

}

当你调用 say() 方法时，它看起来像这样

```
AccessibilityUtil.getInstance().say("Loading. Please wait"); 
```

希望能帮助到你

# flexslider - Flexslider 在 IE 中不起作用

> ID：16021627
> 
> 赞同：0
> 
> 时间：2013-04-15T17:52:52.887
> 
> 标签：flexslider, woothemes

我正在尝试在我们的网站上实现基本的 flexslider。它适用于 chrome、Firefox 和 safari。但在所有版本的 IE 中，它只会炸掉页面的整个宽度和高度。[这是链接](http://www.yummicandles.com/Affiliates_10001_10001)。请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T12:18:08.633

我试过这个对我有用。

在标题标签中添加以下行以强制 IE 以最新的文档模式呈现。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T08:28:39.943

在 ie9 中有类似的问题 - 通过为 div 设置固定宽度来解决，在 CSS 中包含滑块。

```
.metaslider { width: 720px; } 
```

希望这可以帮助。

# java - LWJGL glRotatef 使用多轴

> ID：16021629
> 
> 赞同：0
> 
> 时间：2013-04-15T17:53:03.010
> 
> 标签：java, opengl, lwjgl, glrotate

我试图在理论上将 y 旋转 90 度以显示侧面，然后在 z 上旋转 45 度以使其向上倾斜。我这样做：

```
glRotatef(90, 0, 1, 0);
glRotatef(45, 0, 0, 1); 
```

问题是它不是从原始轴旋转，而是根据最后一个位置旋转。我想知道如何同时旋转轴或达到它从原始旋转的效果。我不确定我是否说得足够清楚，所以请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:23:11.833

不确定这是否是您的意思，但您当然可以使用：

```
glRotatef(45, 0, 2, 1); 
```

甚至：

```
glRotatef(1, 0 ,90, 45); 
```

# android - Android - 日志访问

> ID：16021632
> 
> 赞同：0
> 
> 时间：2013-04-15T17:53:17.370
> 
> 标签：android, security, logging

我读过几次，我们手机上的某些应用程序可以在日志中包含有关例如：通话记录的信息。我想编写一个获取此日志并使用此信息的应用程序。但问题是我该怎么做？Logcat - Android 日志系统提供了一种收集和查看系统调试输出的机制，所以我认为这不是我想要的。也许你可以建议我的，我怎样才能直接从日志中获取信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:35:17.470

您要查找的不是普通日志文件，而是所谓的[内容提供程序](http://developer.android.com/guide/topics/providers/content-providers.html)

例子：

```
static public List<String> getMissedCalls(Context context)
    {
            final String queryCond = Calls.TYPE + " = " + Calls.MISSED_TYPE + " and " + Calls.NEW + " = 1";

            List<String> phoneNumbers = new ArrayList<String>();
            Cursor cur = context.getContentResolver().query(
                            CallLog.Calls.CONTENT_URI,
                            new String[]{Calls._ID, Calls.NUMBER},
                            queryCond,
                            null,
                            null
                            );
            //int count=cur.getCount(); 
            //Log.d(TAG, "missed calls = " + count);
            while(cur.moveToNext())
            {
                    String phoneNumber = cur.getString(cur
                .getColumnIndexOrThrow(Calls.NUMBER));
                    //Log.d(TAG, "missed call = " + phoneNumber);
                    phoneNumbers.add(phoneNumber);
            }
            cur.close();
            return phoneNumbers;
    } 
```

# java - 检查是否存在一组 ok 键的最佳方法

> ID：16021636
> 
> 赞同：0
> 
> 时间：2013-04-15T17:53:34.020
> 
> 标签：java, google-app-engine, google-cloud-datastore, objectify

使用 Objectify 从一组键中检查是否存在键的最佳方法是什么？

目前我正在使用：

```
List<T> list2LookFor= ...; 
Map<Key<T>,T> objects = ofy().load().keys(list2LookFor); 
```

但我真的不需要加载所有实例，有没有办法只检查存在的键？我看到有一种`Keys()`方法，但后来我无法批处理它。

PD：在我的用例中，我可以预期大约有 50-100 个键`list2LookFor`，加载的实体大约有 5 或 6 个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:35:09.247

是的，在 GAE 中测试实体存在的最便宜的方法是执行 get-by-key。

# r - 为响应时间数据创建异常值函数

> ID：16021641
> 
> 赞同：2
> 
> 时间：2013-04-15T17:53:42.677
> 
> 标签：r, outliers

我正在分析来自实验的响应时间 (RT) 数据。在这些实验中，每个人完成一定数量的各种试验类型的试验。仅使用来自正确试验的 RT 数据；因此，每个受试者每个试验类型要分析的 RT 数量不同。我正在尝试创建一个异常值函数，该函数应用一个标准偏差截止值，该截止值取决于要分析的试验次数（Van Selst & Jolicoeur，1994）。例如，如果第一个受试者有 100 次 A 试验，我想计算该受试者 A 试验的平均值和标准偏差，然后应用标准偏差截止值（例如，大于平均值加或减的绝对值的试验标出的标准偏差数记为 0)。

我想使用的标准偏差截止值如下所示：

```
#n = # of trials
if n < 4 then SDout=3
if n == 4 then SDout=1.458
if n == 5 then SDout =1.68
if n == 6 then SDout=1.841
if n == 7 then SDout=1.961
if n == 8 then SDout=2.050
if n == 9 then SDout=2.12
if n == 10 then SDout=2.173
if n == 11 then SDout=2.22
if n == 12 then SDout=2.246
if n == 13 then SDout=2.274
if n == 14 the SDout=2.31
if n >= 15 & if n < 20 then SDout=2.326
if n >= 20 &if n < 25 then SDout=2.391
if n >= 25 & if n < 30 then SDout=2.41
if n >= 30 & if n < 35 then SDout=2.4305
if n >= 35 & if n < 50 then SDout=2.45  
if n >= 50 & if n < 100 then SDout=2.48
if n >= 100 then SDout=2.5 
```

我的数据有 3 列：id（主题标识符）、ttype（试验类型）和 RT。

从本质上讲，我需要这个函数做的是：获取每个试验类型的每个受试者的 RT 平均值、SD 和试验次数，然后根据 SDout 乘以 SD 并将其添加到指 RT。最后，我想要创建一个新列的函数，其中外围试验得分为 0，“良好”试验得分为 1。

我认为实现这一点的一种方法是使用嵌套循环，其中试验类型嵌套在主题中。但是，编写这个函数超出了我的技能水平，所以我寻求帮助来创建它。如果有人有建议或提示，或实现此目的的非循环方式，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:58:17.820

因此，您希望进行 Van Selst 和 Jolicoeur (1994) 类型的异常值检查。从那时起，有很多关于 RT 的工作，从强烈的论点认为任何这样的异常值拒绝都是站不住脚的（例如 Ulrich & Miller，1994 年），到建议如何以其他方式纠正问题，如改变分布。此外，一些人建议在前高斯假设下分析分布，并对分布的正态和指数部分发生的情况赋予不同的含义。

通常，您收集的任何类型的数据都会不时具有超出几个标准偏差的值。你看到的它们的数量会在像 RT 这样的倾斜分布中被夸大。通常像您尝试的那样去除异常值会去除 3% 的值。大约 3% 是对具有 SD 截止值的 RT 的预期（我认为这是 Miller 的一篇论文表明了这一点）。因此，您实际上并没有删除异常值，而是作为响应分布一部分的真实数据。

我可以建议你不要这样做。您在 RT 中有两个问题。一是你可以有真正有问题的异常值。另一个是分布是倾斜的（由于 CLT，在具有足够数量的 RT / 受试者的平均 RT 中被移除）。用异常值拒绝来纠正后者会导致很多问题。纠正前者需要异常值拒绝技术来帮助识别真正的异常值。

通常，您还会有准确度测量。给定反应时间的精度函数具有特征模式。RT 通常会很快提高准确性，然后在一段时间内保持这种状态并在稍后下降（即使刺激始终可用）。您可以使用对此函数的分析来消除本身不是异常值但不能反映您希望分析的内容的 RT。低于某个准确度阈值的早期 RT 实际上并不是对刺激的反应。它们将是猜测和预期。较晚的 RT，高于准确度阈值但在准确度开始下降之后，不会反映对刺激开始的反应，而是稍后做出的决定。

（当然，在很多情况下，您必须改变这些类型的评估。如果是响应兼容性任务，早期 RT 可能是唯一推动您的效果的事情。如果任务具有非常大的影响，例如在搜索功能中，这样的分析可能是站不住脚的。当然，如果你没有准确度测量，这很困难。在这些不同的情况下考虑不同的方法。但不要盲目地折腾 RT，因为它们的 z-score 很大。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:04:58.373

如果你真的下定决心要这样做...

```
# This function does the basic outlier rejection
vjout<- function(x){
    n <- length(na.omit(x))
    if (n > 3) {
        CriterionSD <- c(0.0, 0.0, 0.0, 1.458, 1.68, 1.841, 1.961, 2.05, 2.12, 2.173, 2.22, 2.246, 2.274, 2.31, 2.326)
        m <- mean(x, na.rm=T)
        if (n > 15) c <- CriterionSD[15] else c <- CriterionSD[n]
        c <- c*sd(x, na.rm=T)
        x[abs(x-m) > c] <- NA
    }
    return(x)
}

# in order to use vjout to generate a new column of data assign it using 
# the following with subject and condition.  Then, you select the data
# excluding NA cells in the new column
vjoutlier<- function(rt, subj, cond){
    ave (rt, subj:cond, FUN=vjout)
} 
```

# complexity-theory - 机器学习问题的计算复杂度是多少？

> ID：16021644
> 
> 赞同：2
> 
> 时间：2013-04-15T17:53:57.987
> 
> 标签：complexity-theory

给定一个 ML 问题，例如计算机视觉或 NLP，这些问题的计算复杂度是多少？

我可以认为使用训练模型是解决“困难”问题（棘手）的有效方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:40:36.937

`Natural Language Processing`并且`Computer Vision`是存在数千种算法的计算机科学领域。因此，一般而言，可能无法给出如此广泛领域的计算复杂性。算法的复杂性范围从次线性到 NP Hard。例如`sub string search`，复杂度为 O(mn)，其中 m 是子字符串的大小，n 是要搜索的文本的大小。在`Automatic summarization`NLP 中是一个`AI-Complete`问题，使其成为`NLP`.

对于您问题的第二部分，答案是**否定**的。使用训练模型不会降低解决困难（难处理）问题的复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T13:38:35.443

NLP 的复杂性是相当模糊的：你究竟想达到什么目的？在词性标注的情况下，您需要指定您关注的输入是什么：句子的长度、词汇量的大小……您使用的是什么标注器？有些只是预训练模型，可以根据各种特征预测标签（单词在句子中的位置，是否以某些特定字符结尾......）

在这种情况下，您需要知道预测基础分类器的新数据点的复杂性。

但是，反过来，评估分类器（或回归器）的复杂性可能非常复杂，因为它们依赖于许多其他算法，这些算法可以通过多种方式实现（稀疏数据/密集数据......）。我在我的博客上写了一篇详细的文章：[机器学习算法的计算复杂度](https://www.thekerneltrip.com/machine/learning/computational-complexity-learning-algorithms/)。主要结论是理论复杂性与观察到的复杂性（或至少对于小样本）不匹配，即使对于“简单”算法也是如此。

现在，回到词性标注，让我们想象它是[使用支持向量机](http://nlp.lsi.upc.edu/papers/gimenez03.pdf)（它可能基于隐马尔可夫模型，结论会完全不同）对长度为 的句子执行的`n`。请注意，特征提取包含恒定数量的步骤，每个步骤都在恒定时间内进行评估（相邻词，二元特征）。对于每个单词，特征评估是`O(1)`。

使用线性内核（预测方法的复杂性取决于您使用 SVM 选择的内核），您必须预测每个单词的类别。与每个有界词相关的特征数量（大约 40 个），您只是在评估两个（稀疏）向量之间的内积。同样，您可以将其视为`0(1)`. 因此，基于线性 SVM 对一个词的句子执行词性标注`n`是一个`O(n)`.

即使我专注于一个非常简单的例子，你也会看到这个话题有多大……

# haskell - cabal 的“警告：回退到 GHC < 7 的自上而下求解器”是什么意思？意思是？

> ID：16021645
> 
> 赞同：3
> 
> 时间：2013-04-15T17:53:58.310
> 
> 标签：haskell, ghc, cabal, cabal-install

在 GHC6 上使用 cabal 构建时，它会警告：

```
Warning: Falling back to topdown solver for GHC < 7. 
```

什么是自上而下的求解器，警告的含义是什么？它对我有什么影响？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T20:16:58.683

新的模块化求解器不适用于较旧的 GHC 版本，尤其是`ghc-6.12.X`. 本系列中有一个特殊情况，它`base-3`依赖于`base-4`并通过从较新版本重新导出功能来提供兼容层。

这种特殊情况在 Hackage 的其他任何地方都没有使用过，而且我从不认为值得在新的求解器中实现它。

由于这两个求解器仍由 提供`cabal-install`，因此对于旧 GHC 版本，它只是默认使用旧的“自上而下”求解器，而对于新 GHC 版本，它默认选择较新的“模块化”求解器。

如果您尝试选择模块化求解器`ghc-6.12.X`，只要涉及的所有库都支持，它应该仍然能够找到解决方案`base-4`。但`base-3`由于自力更生，总会被视为不可用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T18:01:39.600

忽略它。

该消息意味着依赖求解器组件决定回退到旧算法，因为您使用的是 GHC < 7。有关依赖求解器功能的更多信息，请参阅[Andres Löh 和 Duncan Coutts 的这些幻灯片](http://www.haskell.org/wikiupload/b/b4/HIW2011-Talk-Loeh.pdf)。他们还解释了新的（模块化）和旧的（自上而下）求解器之间的区别。

（如果你真的想要，你可以`cabal install`通过运行强制使用新的求解器`cabal install --solver=modular`。）

# .net - 错误 175：在配置中找不到指定的商店提供程序，或者无效

> ID：16021646
> 
> 赞同：8
> 
> 时间：2013-04-15T17:53:59.553
> 
> 标签：.net, visual-studio, entity-framework, sql-server-2008-r2

我刚刚加入了一个项目，并在 64 位机器上安装了 Microsoft Visual Studio Professional 2012 版本 11.0.51106.01 和 Microsoft SQL Server 2008 R2。

另一位团队成员能够从他的机器构建解决方案，但在我的机器上我收到以下错误：

错误 175：在配置中找不到指定的商店提供程序，或者无效

在我的 .edmx 文件中，标签之间的所有`<edmx:StorageModels></edmx:StorageModels>`代码都被标记为错误。文件顶部的相关片段是：

```
 <?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="2.0" xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="[NAME].Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl"> 
```

在对类似帖子进行研究时，其他人建议检查 machine.config 文件中的 DbProviderFactories。

C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\machine.config

```
<system.data>
    <DbProviderFactories>
        <add name="Odbc Data Provider" invariant="System.Data.Odbc" description=".Net Framework Data Provider for Odbc" type="System.Data.Odbc.OdbcFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="OleDb Data Provider" invariant="System.Data.OleDb" description=".Net Framework Data Provider for OleDb" type="System.Data.OleDb.OleDbFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="OracleClient Data Provider" invariant="System.Data.OracleClient" description=".Net Framework Data Provider for Oracle" type="System.Data.OracleClient.OracleClientFactory, System.Data.OracleClient, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="SqlClient Data Provider" invariant="System.Data.SqlClient" description=".Net Framework Data Provider for SqlServer" type="System.Data.SqlClient.SqlClientFactory, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
  <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
</DbProviderFactories>
</system.data> 
```

***编辑：为 .Net 4.0** C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config添加了相关的 DbProviderFactories

```
<system.data>
    <DbProviderFactories>
        <add name="IBM DB2 for i5/OS .NET Provider" invariant="IBM.Data.DB2.iSeries" description=".NET Framework Data Provider for i5/OS" type="IBM.Data.DB2.iSeries.iDB2Factory, IBM.Data.DB2.iSeries, Version=12.0.0.0, Culture=neutral, PublicKeyToken=9cdb2ebfb1f93a26"/>
        <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/><add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/></DbProviderFactories>
    <DbProviderFactories/>
</system.data> 
```

团队中的另一个人似乎记得这个问题，它与我的 Sql Server 或 Visual Studio 安装的更新之一中的 iSeries 配置或设置相关联。

有没有人以前见过这个或者有修复它的想法，所以我可以得到一个干净的构建？

**回答**

```
<system.data>
    <DbProviderFactories>
        <add name="IBM DB2 for i5/OS .NET Provider" invariant="IBM.Data.DB2.iSeries" description=".NET Framework Data Provider for i5/OS" type="IBM.Data.DB2.iSeries.iDB2Factory, IBM.Data.DB2.iSeries, Version=12.0.0.0, Culture=neutral, PublicKeyToken=9cdb2ebfb1f93a26"/>
        <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
        <add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
    </DbProviderFactories>
    <DbProviderFactories/>
</system.data> 
```

在格式化我为机器的配置设置发布的代码时，我注意到有两个结束标签用于`<DbProviderFactories>`我删除了`<DbProviderFactories/>`我们认为在添加 iSeries 设置后添加的标签。保存文件后，我重新启动了机器，构建成功。

**旁注：**我的代码确实在 VS 2010 中成功构建，而无需进行此更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-25T21:52:41.370

在`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config`发布的片段中，有一个无关紧要的东西`<DbProviderFactories/>`导致`Error 175`.

你的文件：

```
<system.data>
    <DbProviderFactories>
        <add name="IBM DB2 for i5/OS .NET Provider" invariant="IBM.Data.DB2.iSeries" description=".NET Framework Data Provider for i5/OS" type="IBM.Data.DB2.iSeries.iDB2Factory, IBM.Data.DB2.iSeries, Version=12.0.0.0, Culture=neutral, PublicKeyToken=9cdb2ebfb1f93a26"/>
        <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/><add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
    </DbProviderFactories>
    <DbProviderFactories/>
</system.data> 
```

应该：

```
<system.data>
    <DbProviderFactories>
        <add name="IBM DB2 for i5/OS .NET Provider" invariant="IBM.Data.DB2.iSeries" description=".NET Framework Data Provider for i5/OS" type="IBM.Data.DB2.iSeries.iDB2Factory, IBM.Data.DB2.iSeries, Version=12.0.0.0, Culture=neutral, PublicKeyToken=9cdb2ebfb1f93a26"/>
        <add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/><add name="Microsoft SQL Server Compact Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
    </DbProviderFactories>
</system.data> 
```

# php - PHP 警告：json_encode()：无效的 UTF-8 序列

> ID：16021652
> 
> 赞同：1
> 
> 时间：2013-04-15T17:54:15.533
> 
> 标签：php, phpmyadmin, json

我正在使用 PHP 来填充我的 DataTables 选择框。

如果我使用 DataTables 页面添加新条目（单击“添加”按钮），我对重音符号（特殊字符）没有任何问题，但如果我使用 phpMyAdmin 页面（sql 命令）添加新条目，则字段不显示通过包含重音符号的 phpMyAdmin 页面添加的内容（json_encode 为此字段返回 null）。

这是行错误：

```
aDataInitial = '<?php  echo json_encode($stack); ?>';' 
```

我尝试使用 utf8_encode，尝试将 mysqli 字符集声明为 UTF8，我的 MySQL 字符集默认为 UTF8。

为什么通过DataTable页面添加的条目显示正常，而phpMyAdmin添加的条目却没有？

这是我的 HTML/PHP 代码：

```
<?php   
    $connection = ($GLOBALS["___mysqli_ston"] = mysqli_connect('localhost',  'mbrconsu_un394x',  'y1cz9,rd+hf6')) or die(((is_object($GLOBALS["___mysqli_ston"])) ? mysqli_error($GLOBALS["___mysqli_ston"]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)));
    ((bool)mysqli_query( $connection, "USE mbrconsu_mmx")) or die(((is_object($GLOBALS["___mysqli_ston"])) ? mysqli_error($GLOBALS["___mysqli_ston"]) : (($___mysqli_res = mysqli_connect_error()) ? $___mysqli_res : false)));

    $aFieldType = array ('tema', 'vinculo', 'empresa', 'subcontratada', 'gerencia', 'areasolicitante', 'cc');
    $stack=array();

    foreach ($aFieldType as $type)
    {
        $sql="SELECT {$type} FROM treinamentos ORDER BY {$type} ASC";
        $result = mysqli_query($GLOBALS["___mysqli_ston"], $sql);

        while($row = mysqli_fetch_array($result))
        {
            $stack[$type][] = array($row[$type],$row[$type]);
        }
    }
?>
        <script type="text/javascript">
            aDataInitial = '<?php  echo json_encode($stack); ?>';
        </script> 
```

# python - 使用美丽的独特划分和刮组

> ID：16021654
> 
> 赞同：0
> 
> 时间：2013-04-15T17:54:18.113
> 
> 标签：python, html, screen-scraping, beautifulsoup

所以我试图抓取的网页是这样的：

```
...
<tr><td colspan=3><BR><div class="list">Foo:</div></td></tr>
<tr><td><img src="/images/2.gif" alt="Main"> <a href="/foo/1/"></A></td><td><a href="/browse/foo/1/">foo1</A></td></tr>
<tr><td><img src="/images/2.gif" alt="Main"> <a href="/foo/2/"></A></td><td><a href="/browse/foo/2/">foo2</A></td></tr>
<tr><td><img src="/images/1.gif" alt="Guest"> <a href="/foo/3/"></A></td><td><a href="/browse/foo/3/">foo3</A></td></tr>

<tr><td colspan=3><BR><div class="list">Bar:</div></td></tr>
<tr><td><img src="/images/1.gif" alt="Guest"> <a href="/bar/1/"></A></td><td><a href="/browse/bar/1/">bar1</A></td></tr>
<tr><td><img src="/images/1.gif" alt="Guest"> <a href="/bar/2/"></A></td><td><a href="/browse/bar/2/">bar2</A></td></tr>
<tr><td><img src="/images/2.gif" alt="Main"> <a href="/bar/3/"></A></td><td><a href="/browse/bar/3/">bar3</A></td></tr>

<tr><td colspan=3>... 
```

我想抓取数据如下：

```
...
Foo:
    foo1
    foo2
    foo3

Bar:
    bar1
    bar2
    bar3
... 
```

每个内容都`<tr>`用inscribed分隔，`<td colspan=3>`这使我很难抓取信息......虽然我已经尝试过[这种](https://stackoverflow.com/questions/11647348/find-next-siblings-until-a-certain-one-using-beautifulsoup)`<tr>`方法，但由于所有组共享共同的标签，我无法获取数据。

是否有合理的方法使用beautifulsoup 划分这些部分？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:09:11.037

实际上我最近不得不处理很多这样的数据结构——`td`其中一些`span`是标题，而下一个`td`是内容，直到新`td`的`span`出现

我用这样的东西。

```
class TrGrouper:
    def __init__(self, attr='colspan'):
        self.value = 0 
        self.attr = attr

    def __call__(self, tr):
        first_cell = tr.th if tr.th else tr.td
        self.value += int(first_cell.get(self.attr))
        return self.value

#usage:

import itertools

list_of_TRs = soup.find_all('tr')

for _, chunk in itertools.groupby(list_of_TRs, TrGrouper()):
    # do_something 
    # note that chunk is a generator

#or

grouped_rows = [list(chunk) for _, chunk in itertools.groupby(list_of_TRs, TrGrouper())] 
```

# c# - Web Config 文件和 Active Directory 的问题

> ID：16021660
> 
> 赞同：0
> 
> 时间：2013-04-15T17:54:43.433
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, active-directory, web-config

在调试模式（Visual Studio 2012）下运行我的应用程序时，我在我的网络配置中使用它：

```
<roleManager enabled="true" defaultProvider="ActiveDirectory">
      <providers>
        <clear/>
        <add
            applicationName="TheManhattanProject" name="ActiveDirectory"
            type="TheManhattanProject.Security.ActiveDirectoryRoleProvider"
            domain="mydomain" groupMode="" connectionString="LDAP:(insert correct string here)"
    />
      </providers>
    </roleManager> 
```

应用程序收到一个错误，突出显示顶部的“RoleManager”部分。它实际上在页面加载之前崩溃。

这是为了让我的 MVC4 Web 应用程序针对 Active Directory 进行身份验证（Windows；不是表单），但我还没有找到修复程序。

如果我不清楚我在问什么，请问我，我会尽力解决问题！

提前致谢！

编辑：错误：

```
Server Error in '/' Application.

Configuration Error

Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

Source Error: 

Line 31:     </httpHandlers>
Line 32: 
Line 33:     <roleManager enabled="true" defaultProvider="ActiveDirectory">
Line 34:       <providers>
Line 35:         <clear/> 
```

# javascript - 在 Javascript 中更改 Onchange 事件的内容

> ID：16021666
> 
> 赞同：0
> 
> 时间：2013-04-15T17:54:59.200
> 
> 标签：javascript

我刚开始使用 Javascript。我已经通过代码在JS中实现了onchange事件：

```
 <html>
    <head>
    <script>
    function fun()
    {
        var x=document.getElementById("price1");
        document.forms['forms1'].price.value=x.value*2;
    }
    </script>
    </head>
    <body>
    <form name="forms1">
    Enter Price: <input type="text" id="price1" onchange="fun()">   
    value is: <input name="price" type="text" >
    </form>
    </body>
    </html> 
```

但问题是我得到像

> 值为：| ***_* _** |

但我希望它像一个没有的段落`input tag`（即不在一个盒子里）。我希望它像文本一样被更改。例如`value is: 20`不是`value is:|___20___|`。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:01:05.523

一种方法是设置输入框的样式

```
<input name="price" type="text" class="text" disabled /> 
```

和

```
.text{
    border:0;
    background-color:transparent;
    color:black;
} 
```

演示在[http://jsfiddle.net/gaby/ttpFa/](http://jsfiddle.net/gaby/ttpFa/)

* * *

另一种是使用 a`span`来保存价格而不是`input`元素。

```
<form name="forms1">
    Enter Price: <input type="text" id="price1" onchange="fun()"/>   
    value is: <span id="price"></span>
</form> 
```

和

```
function fun()
{
    var x=document.getElementById("price1");
    document.getElementById('price').innerHTML=x.value*2;
} 
```

演示在[http://jsfiddle.net/gaby/ttpFa/1/](http://jsfiddle.net/gaby/ttpFa/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:58:22.467

[http://jsbin.com/utipob/1/](http://jsbin.com/utipob/1/)

使用跨度：

值为：`<span id="price"></span>`

并将JS更改为：

```
 function fun()
    {
        var x=document.getElementById("price1").value;
        document.getElementById('price').innerHTML=x*2;    
    } 
```

# mysql - 将 CSV 文件中的数据导入 MySql 会产生不正确的值

> ID：16021668
> 
> 赞同：1
> 
> 时间：2013-04-15T17:55:04.093
> 
> 标签：mysql, excel, import

我想将数据从 CSV 文件导入 MySQL 数据库。我从另一个网站找到此代码

```
LOAD DATA LOCAL INFILE ‘C:\\temp\\yourfile.csv’
INTO TABLE database.table
FIELDS TERMINATED BY ',' LINES TERMINATED BY '\r\n' (Date, a, b); 
```

在我运行此代码后，列`Date`并`a`输出正确的数据，但列“b”的值为 0。我不确定这有什么问题。任何帮助表示赞赏。

我的 CSV 文件是这样的（它是在 Excel 2013 中创建的）

```
Date         a      b
4/11/2013   111     77
4/12/2013   113     70
4/13/2013   112     72
4/14/2013   111     73
4/15/2013   110     71
4/16/2013   117     70
4/17/2013   118     76
4/18/2013   111     72
4/19/2013   115     73
4/20/2013   124     82
4/21/2013   111     70 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:59:11.533

试试这个 SQL 语句：

```
LOAD DATA LOCAL INFILE ‘C:\\temp\\yourfile.csv’
INTO TABLE database.table
FIELDS TERMINATED BY '\t' LINES TERMINATED BY '\r\n' (Date, a, b); 
```

您以逗号结尾的形式输入了 SQL 语句，但您的 csv 文件似乎使用了制表符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:10:41.650

问题解决。我的 csv 文件中实际上有一个空列。'a' 和 'b' 之间的空列。

# css - Wordpress 主题找不到 CSS（本地主机）

> ID：16021673
> 
> 赞同：3
> 
> 时间：2013-04-15T17:55:10.657
> 
> 标签：css, html, wordpress-theming, bitnami

我正在使用来自[http://html5blank.com](http://html5blank.com)的 Wordpress 主题，当我将其在线上传到我的服务器时效果很好，但是当我使用 Wordpress Bitnami Stack 在本地使用它时，主题找不到 css。在*header.php*你有：

```
<!-- css + javascript -->
<?php wp_head(); ?> 
```

但是当我在本地主机上查看开发站点的源代码时（激活主题后），我发现`href`css 是空的：

```
<!-- css + javascript -->
<link rel='stylesheet' id='normalize-css'  href='' media='all' />
<link rel='stylesheet' id='html5blank-css'  href='' media='all' /> 
```

同时它确实找到了图像和图标：

```
<!-- icons -->
<link href="http://localhost:8080/wordpress/wp-content/themes/html5blank-master/img/icons/favicon.ico" rel="shortcut icon">
<link href="http://localhost:8080/wordpress/wp-content/themes/html5blank-master/img/icons/touch.png" rel="apple-touch-icon-precomposed"> 
```

我的操作系统是 Ubuntu 12.10。这可能是 Bitnami 问题，还是我可以解决这个问题，以便我可以在本地网站上工作？请注意，默认主题“twentytwelve”在我的设置中运行良好。

**更新：**我在我的 Bitnami Wordpress 堆栈中比较并尝试了*html5blank*主题的1.2.9 和 1.4.0（当前版本）版本。两个版本的`functions.php`文件是相同的`wp_register_style()`，但版本 1.2.9 填充了指向 css 的链接，而版本 1.4.0 将它们留空。另请注意，1.4.0 在 Windows 7 上的 Bitnami 安装中运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T21:20:25.050

问题是主题设计中的某些代码与在非标准端口号上运行的 WordPress 之间的交互。

我将事情追踪到`wp_kses_bad_protocol`向 WordPress 的`esc_url`函数（由样式入队器使用，在 中的`WP_Styles`类`wp-includes/class.wp-styles.php`）报告样式表 URL 的协议无效的函数。`esc_url`是否可以防止淘气的东西进入 URL；例如，其中一项检查是查看是否有任何可疑的协议，例如`javascript:`协议而不是。`http:`

一个问题的错误检测似乎是由于 html5blank 主题为过滤器添加了过滤功能造成`html5blank_protocol_relative`的`style_loader_src`。一般来说，这似乎不是一件坏事（[协议相关](http://paulirish.com/2010/the-protocol-relative-url/)基本上意味着替换`http://whatever...`为`//whatever...`，这避免了在同一页面上混合 https 和 http 的问题 - 的“协议相对” URL`//whatever`将酌情使用 https 或 http。 )

但是，当您在特定端口号上运行 WordPress 时，这似乎会混淆不良协议检测。

长话短说：您可能想将此报告给主题的开发人员，让他知道因此，当在非标准端口上运行 WordPress 时，他的主题会中断，即使用类似的 URL `http://localhost:8080/wordpress`，而不是`http://localhost/wordpress`.

在短期内，我只是注释掉这些行：

```
add_filter('script_loader_src', 'html5blank_protocol_relative'); // Protocol relative URLs for enqueued scripts
add_filter('style_loader_src' , 'html5blank_protocol_relative'); // Protocol relative URLs for enqueued styles 
```

...在主题的`functions.php`; 这应该关闭协议相对 URL 过滤，并且您的主题应该在本地工作。除非您的实时站点使用 https，否则它们在此更改下仍然可以正常工作，即使它们确实使用 https，您也不会比使用大多数主题更糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:34:53.620

您需要查看 functions.php - 您的主题可能使用 enque 作为将 CSS 传递给 wp_head 的方法。有关更多信息，请参阅本教程：[http ://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/](http://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-18T10:56:31.337

如果您使用的是来自 Elegant Themes 的 Divi 主题，您可能会遇到同样的问题，即您的设计工作结果无法反映您在视觉生成器中所做的设置。要在 localhost 上解决此问题，您只需安装 WP 文件管理器插件，转到 wp-content 并删除 et-cache 文件夹。而已！

# ruby-on-rails - 处理静态页面路由的最佳方式

> ID：16021676
> 
> 赞同：0
> 
> 时间：2013-04-15T17:55:18.797
> 
> 标签：ruby-on-rails, routes, url-routing

我有一个 Rails 应用程序，我想在其中介绍一些静态页面。由于我的应用程序同时具有“公共”面孔和全面的管理后端，因此我决定将我的控制器移动到相应的子文件夹中，因此 app/controllers 仅包含两个子文件夹。

现在，我正在创建一个包含公司政策的政策部分。

到目前为止，我已经提出了这个解决方案，但它不起作用

```
namespace :policy, path: 'politik' do
  get 'miljoe'
  get 'kvalitet'
  get 'kunde'
  get 'personale'
end 
```

这将创建以下路线：

```
 policy_miljoe GET    /politik/miljoe(.:format)                      policy#miljoe
               policy_kvalitet GET    /politik/kvalitet(.:format)                    policy#kvalitet
                  policy_kunde GET    /politik/kunde(.:format)                       policy#kunde
              policy_personale GET    /politik/personale(.:format)                   policy#personale 
```

短路线和正确路径。这一切都很好，除了......它在 app/controllers 中查找控制器，而不是在 app/controllers/public 中查找。添加一个

```
namespace :policy, path: 'politik', controller: 'public/policy' do 
```

没有做到这一点。

到目前为止，我唯一的“解决方案”是创建一个指向控制器的虚假资源路由并执行额外的收集路由，如下所示：

```
resources :policy, path: 'politik', controller: 'public/policy', only: [] do
  collection do
    get 'miljoe'
    get 'kvalitet'
    get 'kunde'
    get 'personale'
  end
end 
```

这有效，但它

*   无缘无故地为 url 助手添加索引，所以我得到的是 miljoe_policy_index_path 而不是 policy_miljoe_path。
*   以一种奇怪的方式阅读，因为资源意味着宁静，而这些页面没有任何宁静。

我怎样才能最好/最优雅地在路由器中声明这些静态页面并维护一个看起来与`/politik/kvalitet`路由器中的目录结构不同但`/public/policy/kvalitet`在文件夹结构中的 url 结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T00:30:52.537

我最终使用`scope`了完美解决问题的方法：

```
scope module: 'public' do
  namespace :policy, path: 'politik' do
    get 'miljoe'
    get 'kvalitet'
    get 'kunde'
    get 'personale'
  end
end 
```

这会产生以下帮助程序、url 和操作。

```
 policy_miljoe GET    /politik/miljoe(.:format)       public/policy#miljoe
  policy_kvalitet GET    /politik/kvalitet(.:format)     public/policy#kvalitet
     policy_kunde GET    /politik/kunde(.:format)        public/policy#kunde
 policy_personale GET    /politik/personale(.:format)    public/policy#personale 
```

# artificial-intelligence - minimax 的启发式 - 棋盘游戏

> ID：16021680
> 
> 赞同：0
> 
> 时间：2013-04-15T17:55:35.583
> 
> 标签：artificial-intelligence, heuristics, 2d-games

我正在为[这个](http://nickbentleygames.WordPress.com/2010/02/11/one-of-my-better-games-odd/)棋盘游戏实现一个 AI 播放器。

我正在使用 AB minimax 进行搜索，但我无法为评估函数找到一个好的启发式方法。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:33:32.097

您可以将神经网络与进化编程结合使用。我的意思是，在锦标赛中教授神经网络，并使用“生成的神经网络”作为启发式函数。

# c++ - 指向指针的指针导致崩溃

> ID：16021687
> 
> 赞同：0
> 
> 时间：2013-04-15T17:55:49.610
> 
> 标签：c++, pointers, constructor, crash

示例代码

```
sf::Drawable *mDrawables = new  sf::Shape(sf::Shape::Circle(-10, -10,5,sf::Color::Green));
Particle particle(mDrawables);

Particle::Particle(sf::Drawable *hum)
{
    *mDrawables = *hum;
} 
```

从我所做的缩小范围来看，我认为崩溃发生在这里的某个地方。一旦构造函数被调用，程序就会崩溃。有谁知道我在这里做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:00:09.247

我没有看到指向指针的指针？

```
*mDrawables = *hum; 
```

mDrawables 是一个指针，但是 *mDrawables 解引用了指针并且可能是类不可复制。

也许你应该试试这个

```
mDrawables = hum; 
```

我也希望`sf::Shape`继承自`sf::Drawable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:02:13.360

看起来您正在用（在构造函数中作为参数别名）的内容`mDrawables`覆盖的内容`mDrawables`。`hum``Particle`

该行`*mDrawables = *hum`应读作“将内容分配给”的`hum`内容`mDrawables`。

很难说为什么这会导致崩溃。代码示例中没有足够的细节（我不知道`Shape`你复制它时 a 做了什么）。

我认为您可能需要在这里重新构建设计，但我无法说出您的总体意图是什么，因此在这方面我无法给您任何好的建议。

# android - android surfaceView onTouchListener

> ID：16021688
> 
> 赞同：0
> 
> 时间：2013-04-15T17:55:55.390
> 
> 标签：android, surfaceview, ontouchlistener

我想在我的 surfaceView 中添加一个 OnTouchListener，但我不太明白。我尝试在 MainActivity 中添加 OnTouchListener

```
surfaceView.setOnClickListener(this); 
```

没有结果。有什么建议么？

主要活动：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.surface_view);      
    surfaceView= (AnimationSurface) findViewById(R.id.surfaceView);
} 
```

表面视图

```
public class AnimationSurface extends SurfaceView implements Runnable {

SurfaceHolder Holder;
Thread Thread = null;
boolean isRunning = true;
float x=0;
float y=0;

public AnimationSurface(Context context, AttributeSet attrs) {
    // TODO Auto-generated constructor stub
    super(context);
    Holder = getHolder();
    Thread = new Thread(AnimationSurface.this);
    Thread.start();     
}

@Override
public void run() {
    // TODO Auto-generated method stub
    [...]

    }
} 
```

谢谢你的时间，马尔蒂塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T21:44:31.460

你应该在surfaceview中使用**onTouchEvent**

# android - 在同一个类中创建两个 SQLite 表

> ID：16021692
> 
> 赞同：0
> 
> 时间：2013-04-15T17:56:22.250
> 
> 标签：android, sqlite, android-sqlite

我只在一张表上使用过 SQLite。我现在需要一个包含两个表的数据库。这是我现在的做法：

```
public class MySQLiteHelper extends SQLiteOpenHelper {

    public static final String TABLE_CAT = "cats";
    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_CAT = "cat";

    private static final String DATABASE_NAME = "cats.db";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE = "create table "
            + TABLE_CAT + "( " + COLUMN_ID
            + " integer primary key autoincrement, " + COLUMN_CAT
            + " text not null)";

    public MySQLiteHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(MySQLiteHelper.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CAT);
        onCreate(db);
    }

} 
```

除了名为“cats”的表之外，我还想要一个名为“items”的具有相同行的表。对此需要做哪些改变？

注意：此应用仍在测试中，因此我无需担心更新数据库版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:01:10.503

为什么你不能只做两个查询，比如

```
private static final String DATABASE_CREATE_TABLE_ONE = "create table "
            + TABLE_CAT1 + "( " + COLUMN_ID
            + " integer primary key autoincrement, " + COLUMN_CAT1
            + " text not null)";

private static final String DATABASE_CREATE_TABLE_TWO = "create table "
            + TABLE_CAT2 + "( " + COLUMN_ID
            + " integer primary key autoincrement, " + COLUMN_CAT2
            + " text not null)"; 
```

在你的 onCreate 方法中：

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(DATABASE_CREATE_TABLE_ONE );
    db.execSQL(DATABASE_CREATE_TABLE_TWO );
} 
```

# php - 转发在 URL 中使用 WWW 的用户

> ID：16021694
> 
> 赞同：0
> 
> 时间：2013-04-15T17:56:28.100
> 
> 标签：php

我网站上的每个用户都有自己的用户名 URL，例如`username.example.com`. 我知道有时人们会`www`在 URL 前面输入。当用户这样做时，他们将被系统重定向到首页。有没有办法（1）检测使用`www`，（2）用户名和（3）将用户转发到`username.example.com`，而不是`www.username.example.com`PHP？

这不是与 DNS 相关的问题。

```
RewriteEngine On
Options +Followsymlinks
RewriteBase /
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{REQUEST_FILENAME} !^.*/images/.*$
RewriteCond %{REQUEST_FILENAME} !^.*/uploads/.*$
RewriteCond %{HTTP_HOST}<>%{REQUEST_URI} ^([^.]+)\.bloggify\.no(:80)?<>/([^/]*) [NC]
RewriteCond %1<>%3 !^(.*)<>\1$ [NC]
RewriteRule ^(.*)$ - [E=BLOGUSER:%1]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^$ /index.php?w=%1 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^page([0-9]+)/([^/]+)?$ /index.php?w=%1&page=$1$2 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^profiles/([^/]+)/([^/]+)?$ /profile.php?u=$1$2 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^profiles/?$ /profile.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^albums/([^/]+)/([^/]+)?$ /album.php?u=$1$2 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^archive/(.*)/(.*)/([^/]+)?$ /archive.php?w=%1&y=$1&m=$2$3 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^archive\.php/(.*)/(.*)/([^/]+)?$ /archive.php?w=%1&y=$1&m=$2$3 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^archive/(.*)/([^/]+)?$ /archive.php?w=%1&y=$1$2 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^archive\.php/(.*)/([^/]+)?$ /archive.php?w=%1&y=$1$2 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^archive/([^/]+)?$ /archive.php?w=%1$1 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^archive\.php/([^/]+)?$ /archive.php?w=%1$1 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^friends/([^/]+)?$ /friends.php?w=%1$1 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^friends\.php/([^/]+)?$ /friends.php?w=%1$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/friends/page([0-9]+)/([^/]+)?$ /friends.php?w=$1&page=$2$3 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^([0-9]+)/([^/]+).html$ /entry.php?w=%1&e_id=$1 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^([0-9]+)/([^/]+)?$ /entry.php?w=%1&e_id=$1$2 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^&([^/]+)?$ /index.php?w=%1&$1 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^([^/]+)/([^/]+)?$ /index.php?w=%1&category=$1$2 [L]
RewriteCond %{ENV:BLOGUSER} ^(.+)$
RewriteRule ^([^/]+)/page([0-9]+)/([^/]+)?$ /index.php?w=%1&category=$1&page=$2$3 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:07:03.740

由于“这不是与 DNS 相关的问题”，我假设您有一个通配符 dns 条目设置，并且无论输入的子域如何，您的网络服务器设置都可以加载单个文档根目录。之后，您可以检查`$_SERVER['HTTP_HOST']`以获取完整的域。Explode() 通过“。” 并检查是否`[0]`是`www`并将 301 重定向（永久移动）发送到没有`www`

您也可以使用 apache 中的 mod_rewrite 来执行此操作。您可以编写一个 RewriteCond 来检查是否`%{HTTP_HOST}`以开头，`www`然后捕获模式中的其余 url 并编写一个执行 301 重定向的 RewriteRule。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:09:22.910

正如@George 在他的评论中指出的那样，您可能是在网络服务器级别进行这种 URL 重写的最佳服务器，尽管它可以通过调查`$_SERVER['SERVER_NAME']`or的值在 PHP 中完成`$_SERVER['HTTP_HOST']`（使用哪个取决于服务器配置）并通过在 PHP 中发送标头发出重定向（即`header('Location: http://username.domain.com');`）

# pagination - 分页不适用于 Zend Framework 2 中的 HAVING 子句

> ID：16021696
> 
> 赞同：0
> 
> 时间：2013-04-15T17:56:35.803
> 
> 标签：pagination, zend-framework2, zend-paginator, having-clause

我已经实现了一个类似于[这里](https://stackoverflow.com/a/12736767/2019043)显示的分页：

**搜索\模型\课程表**

```
class CourseTable {

    const RELEVANCE_TITLE = 5;
    const RELEVANCE_DESCRIPTION = 2;
    const RELEVANCE_MIN = 3;

    protected $tableGateway;

    public function __construct(TableGateway $tableGateway) {
        $this->tableGateway = $tableGateway;
    }

    public function findAllByCriteria(CourseSearchInput $input) {
        $concatDelimiter = self::CONCAT_DELIMITER;
        $select = new Select();
        $where = $this->buildWhereFromCriteria($input);
        $having = new Having();
        $select->columns(array(
            ...
        ));
        $select->from($this->tableGateway->getTable());
        $select
            ->join('...)) // and some more JOINs
        ;
        $where
            // condition
        ;
        $having
            ->greaterThanOrEqualTo('relevance', self::RELEVANCE_MIN);
        ;
        $select->where($where, Predicate::OP_AND);
        $select->having($having);
        $select->group(array('courses.id'));

        $adapter = new \Zend\Paginator\Adapter\DbSelect($select, $this->tableGateway->getAdapter());
        $paginator = new \Zend\Paginator\Paginator($adapter);
        return $paginator;

//      $resultSet = $this->tableGateway->selectWith($select);
//      return $resultSet;
    }

    public function buildRelevanceExpressionFromCriteria(CourseSearchInput $input) {
        $criteria = $input->getArrayCopy();
        $relevanceTitle = self::RELEVANCE_TITLE;
        $relevanceDescription = self::RELEVANCE_DESCRIPTION;
        $expressionSQL = <<<SQL
MATCH (coursedata.title) AGAINST ('{$criteria['keyword']}') * $relevanceTitle +
MATCH (coursedata.description) AGAINST ('{$criteria['keyword']}') * $relevanceDescription
SQL;
        return new Expression($expressionSQL);
    }

    function buildWhereFromCriteria(CourseSearchInput $input) {
        ...
    }

} 
```

**搜索\控制器\搜索控制器**

```
class SearchController extends AbstractActionController {

    protected $courseTable;

    public function searchAction() {
        return $this->redirect()->toRoute('search-courses');
    }

    public function searchCoursesAction() {
        $form = $this->getServiceLocator()->get('Search\Form\CourseSearchForm');
        $request = $this->getRequest();
        if ($request->isPost()) {
            $courseSearchInput = new CourseSearchInput();
            $form->setInputFilter($courseSearchInput->getInputFilter());
            $form->setData($request->getPost());
            if ($form->isValid()) {
                $courseSearchInput->exchangeArray($form->getData());
                // $courses = $this->getCourseTable()->findAllByCriteria($courseSearchInput);
                $courses = $this->getCourseTable()->findAllByCriteria($courseSearchInput);
                $test = $courses->count();
            } else {
                $courses = null;
            }
        } else {
            $courses = null;
        }
        return new ViewModel(array(
            'form' => $form,
            'courses' => $courses,
            'cities' => $this->getServiceLocator()->get('Cache\Model\CityStorage')->getCities(),
        ));
    }

    function getCourseTable() {
        ...
    }

} 
```

现在抛出异常：

```
File:

    /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Db/Adapter/Driver/Pdo/Statement.php:245

Message:

    Statement could not be executed

Stapelüberwachung:

    #0 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Paginator/Adapter/DbSelect.php(122): Zend\Db\Adapter\Driver\Pdo\Statement->execute()
    #1 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Paginator/Paginator.php(881): Zend\Paginator\Adapter\DbSelect->count()
    #2 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Paginator/Paginator.php(343): Zend\Paginator\Paginator->_calculatePageCount()
    #3 /var/www/path/to/project/module/Search/src/Search/Controller/SearchController.php(38): Zend\Paginator\Paginator->count()
    #4 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractActionController.php(83): Search\Controller\SearchController->searchCoursesAction()
    #5 [internal function]: Zend\Mvc\Controller\AbstractActionController->onDispatch(Object(Zend\Mvc\MvcEvent))
    #6 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(460): call_user_func(Array, Object(Zend\Mvc\MvcEvent))
    #7 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(204): Zend\EventManager\EventManager->triggerListeners('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
    #8 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractController.php(117): Zend\EventManager\EventManager->trigger('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
    #9 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/DispatchListener.php(114): Zend\Mvc\Controller\AbstractController->dispatch(Object(Zend\Http\PhpEnvironment\Request), Object(Zend\Http\PhpEnvironment\Response))
    #10 [internal function]: Zend\Mvc\DispatchListener->onDispatch(Object(Zend\Mvc\MvcEvent))
    #11 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(460): call_user_func(Array, Object(Zend\Mvc\MvcEvent))
    #12 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(204): Zend\EventManager\EventManager->triggerListeners('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
    #13 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/Application.php(294): Zend\EventManager\EventManager->trigger('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
    #14 /var/www/path/to/project/public/index.php(12): Zend\Mvc\Application->run()
    #15 {main} 
```

而上一个是：

```
Previous Exception:

    PDOException

    File:

        /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Db/Adapter/Driver/Pdo/Statement.php:240

    Message:

        SQLSTATE[42S22]: Column not found: 1054 Unknown column 'relevance' in 'having clause'

    Stapelüberwachung:

        #0 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Db/Adapter/Driver/Pdo/Statement.php(240): PDOStatement->execute()
        #1 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Paginator/Adapter/DbSelect.php(122): Zend\Db\Adapter\Driver\Pdo\Statement->execute()
        #2 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Paginator/Paginator.php(881): Zend\Paginator\Adapter\DbSelect->count()
        #3 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Paginator/Paginator.php(343): Zend\Paginator\Paginator->_calculatePageCount()
        #4 /var/www/path/to/project/module/Search/src/Search/Controller/SearchController.php(38): Zend\Paginator\Paginator->count()
        #5 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractActionController.php(83): Search\Controller\SearchController->searchCoursesAction()
        #6 [internal function]: Zend\Mvc\Controller\AbstractActionController->onDispatch(Object(Zend\Mvc\MvcEvent))
        #7 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(460): call_user_func(Array, Object(Zend\Mvc\MvcEvent))
        #8 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(204): Zend\EventManager\EventManager->triggerListeners('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
        #9 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/Controller/AbstractController.php(117): Zend\EventManager\EventManager->trigger('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
        #10 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/DispatchListener.php(114): Zend\Mvc\Controller\AbstractController->dispatch(Object(Zend\Http\PhpEnvironment\Request), Object(Zend\Http\PhpEnvironment\Response))
        #11 [internal function]: Zend\Mvc\DispatchListener->onDispatch(Object(Zend\Mvc\MvcEvent))
        #12 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(460): call_user_func(Array, Object(Zend\Mvc\MvcEvent))
        #13 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/EventManager/EventManager.php(204): Zend\EventManager\EventManager->triggerListeners('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
        #14 /var/www/path/to/project/vendor/zendframework/zendframework/library/Zend/Mvc/Application.php(294): Zend\EventManager\EventManager->trigger('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
        #15 /var/www/path/to/project/public/index.php(12): Zend\Mvc\Application->run()
        #16 {main} 
```

它是一个框架错误吗？

* * *

编辑

`$test = $select->getSqlString($this->tableGateway->getAdapter()->getPlatform());`我在之前的行中得到的生成查询`$adapter = new \Zend\Paginator\Adapter\DbSelect($select, $this->tableGateway->getAdapter());`：

```
SELECT `courses`.`id` AS `id`,
       `courses`.`title` AS `title`,
       `courses`.`description` AS `description`,
       DATE_FORMAT(courses.startdate, "%e\.%m\.%Y") AS `startDate`,
       DATE_FORMAT(courses.enddate, "%e\.%m\.%Y") AS `endDate`,
       DATE_FORMAT(courses.starttime, "%H\:%i") AS `startTime`,
       DATE_FORMAT(courses.endtime, "%H\:%i") AS `endTime`,
       `allproviders`.`displayedname` AS `providerName`,
       `allproviders`.`providertype` AS `providerType`,
       `cities`.`name` AS `city`,
       `weekdays`.`labelde` AS `weekday`,
       `levelsmin`.`usrlevel` AS `usrLevelMin`,
       `levelsmin`.`unilevel` AS `uniLevelMin`,
       `levelsmax`.`usrlevel` AS `usrLevelMax`,
       `levelsmax`.`unilevel` AS `uniLevelMax`,
       MATCH (coursedata.title) AGAINST ('Salsa') * 5 + MATCH (coursedata.description) AGAINST ('Salsa') * 2 AS `relevance`,
       GROUP_CONCAT(trainers.name SEPARATOR '|||') AS `trainers`
FROM `courses`
INNER JOIN `allproviders` ON `courses`.`provider_id` = `allproviders`.`providerid`
INNER JOIN `cities` ON `allproviders`.`city_id` = `cities`.`id`
INNER JOIN `weekdays` ON `courses`.`weekday_id` = `weekdays`.`id`
LEFT JOIN `levels` AS `levelsmin` ON `courses`.`levelmin_id` = `levelsmin`.`id`
LEFT JOIN `levels` AS `levelsmax` ON `courses`.`levelmax_id` = `levelsmax`.`id`
INNER JOIN `coursedata` ON `courses`.`id` = `coursedata`.`id`
INNER JOIN `courses_trainers` ON `courses`.`id` = `courses_trainers`.`course_id`
INNER JOIN `trainers` ON `trainer_id` = `trainers`.`id`
WHERE `cities`.`id` = '23'

  AND `weekdays`.`id` IN ('1',
                          '2',
                          '3',
                          '4',
                          '5',
                          '6',
                          '7')
  AND `courses`.`enddate` > NOW()
GROUP BY `courses`.`id` HAVING `relevance` >= '3' 
```

# php - 为什么我会收到这些未定义的索引错误？

> ID：16021700
> 
> 赞同：-4
> 
> 时间：2013-04-15T17:56:52.523
> 
> 标签：php, mysql

添加排序功能时，为什么我的代码中出现未定义的索引错误？这些是我得到的错误

> 注意：未定义的索引：在 C:\xampp\htdocs\how are things\admin panel\view.php 中排序第 58 行
> 
> 注意：未定义的索引：在第 61 行的 C:\xampp\htdocs\how are things\admin panel\view.php 中排序
> 
> 注意：未定义的索引：在第 64 行的 C:\xampp\htdocs\how are things\admin panel\view.php 中排序
> 
> 注意：未定义的索引：在第 67 行的 C:\xampp\htdocs\how are things\admin panel\view.php 中排序
> 
> 注意：未定义的索引：在第 70 行的 C:\xampp\htdocs\how are things\admin panel\view.php 中排序
> 
> 注意：未定义的索引：在第 73 行的 C:\xampp\htdocs\how are things\admin panel\view.php 中排序
> 
> 注意：未定义的索引：在第 76 行的 C:\xampp\htdocs\how are things\admin panel\view.php 中排序

这是第 58 61 64 67 70 73 76 行的代码

```
$result = "SELECT * FROM customers";
    if($_GET['sort'] == 'first_name'){
     $result .= " ORDER BY first_name";
    }
   else if($_GET['sort'] == 'last_name'){
     $result .= " ORDER BY last_name";
    }
     else if($_GET['sort'] == 'address'){
     $result .= " ORDER BY address";
    }
     else if($_GET['sort'] == 'phone_number'){
     $result .= " ORDER BY phone_number";
    }
     else if($_GET['sort'] == 'email'){
     $result .= " ORDER BY email";
    }
     else if($_GET['sort'] == 'city'){
     $result .= " ORDER BY city";
    }
     else if($_GET['sort'] == 'country'){
     $result .= " ORDER BY country";
    }
$result = mysql_query($result) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:01:19.850

您应该检查是否`sort`已设置然后使用它。也许这样的事情对你有用：

```
 $allowedSorts = array('first_name', 'last_name', 'address','phone_number', 'email', 'city', 'country');

    $sort = isset($_GET['sort']) ? $_GET['sort'] : '';
    $result = "SELECT * FROM customers";
    if(in_array($sort, $allowedSorts)){
         $result .= " ORDER BY {$sort}";
    }

    $result = mysql_query($result) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:58:32.810

您不是`sort`在检查索引值之前先检查索引是否存在。

试着把它写成：

```
if (isset($_GET['sort'])) {
    switch ($_GET['sort']) {
        case 'first_name':
            $result .= ' ORDER BY first_name';
            break;
        case 'last_name':
            $result .= ' ORDER BY last_name';
            break;

        // etc...
    }
} 
```

顺便说一句，`mysql_*`函数已被弃用。研究使用 PDO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:23:08.330

你得到的“错误”并不是真正的错误。它们是通知。这意味着 PHP 正在通知您可能有问题。

在这种情况下，PHP 告诉您您尝试在`$_GET`-array 中访问的变量不存在。

有几种方法可以解决这个问题。

*   告诉 PHP 在出现问题时不再通知您：

    ```
    //From this point on, show all errors except notices.
    error_reporting(E_ALL ^ E_NOTICE); 
    ```

    但是，最好实际修复您的代码。

*   正如许多其他答案所指出的那样，您可以通过首先检查它是否确实存在来防止您的代码尝试访问不存在的变量。

    ```
    //Checks for the existence of any variable.
    isset($_GET['sort']);

    //Check if the specified array has a given key.
    array_key_exists('sort', $_GET); 
    ```

    两者都有效。

在您的情况下，[@Omar Jackman 给出的答案](https://stackoverflow.com/questions/16021700/why-these-undefined-index-errors-im-getting#answer-16021778)将是一个优雅的解决方案。

# asp.net - 构建错误“已超出最大错误数”文件 vbc

> ID：16021702
> 
> 赞同：1
> 
> 时间：2013-04-15T17:56:58.157
> 
> 标签：asp.net, vb.net

我有一个 ASP.NET 版本 4 项目。当我今天早上打开项目并尝试运行它时，我收到了一个构建错误“已超出最大错误数”，文件列中的项目为 vbc。据我所知，该项目将在我上次工作时构建。我从项目中排除了我上次处理的文件，但仍然出现此错误。由于错误消息不明确，我什至不知道从哪里开始。我在另一个站点上找到了对此消息的引用，该消息说您可以增加设置中的数据库错误限制。我这样做了，但没有帮助。据我所知，这无论如何都不是数据库问题。Visual Studio 看到数据库。我可以通过服务器资源管理器打开。

任何有关如何开始对此进行故障排除的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T15:24:00.383

在web.config文件的编译节点添加属性“ **targetFramework="4.0" ”**

我有这个问题，无法弄清楚。扎夫汗的回答没有帮助。我得到了这个项目以及它的解决方案我们的代码存储库，显然我们有一段时间没有查看或更改它，所以我真的不知道从哪里开始。我复制了项目（一个 Web 应用程序）并将其粘贴到另一个目录中，并尝试使用 Visual Studio 打开。Visual Studio 给了我一个要求将项目升级到 .Net 4.0 的弹出窗口，然后它点击了。我需要在 web.config 文件的编译节点中添加属性“targetFramework="4.0"”。这解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:08:01.267

打开您的项目并关闭 VS 2010/2012 中所有打开的文档

然后单击 COLUMN Header，如下图所示。确保发现的错误编号是递增的。

然后跳过每一个，直到找到问题。

它可能很简单，例如缺少语音标记（例如，当您在某处有未公开引用时）。

![在此处输入图像描述](https://i.stack.imgur.com/GbU9K.jpg)

# opengl - 使物体在 OpenGL 中出现振动

> ID：16021705
> 
> 赞同：1
> 
> 时间：2013-04-15T17:57:06.447
> 
> 标签：opengl, glut

使物体在 OpenGL 中振动的最佳方法是什么？我有一组立方体，我想以不同的强度“振动”，我假设最好的方法是稍微移动它们的渲染位置。我应该使用计时器来实现这一点还是有更好的方法？这是我的简单 drawCube 函数：

```
void drawCube(float x, float y, float z, float opacity, float col[], float shake)
{
    glTranslatef(-x, -y, -z);
    glColor4f(col[0], col[1], col[2], opacity);
    glutWireCube(20);
    glTranslatef(x, y, z);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:23:45.537

考虑到振动对我们的眼睛来说基本上是一种太快的运动：是的，您需要为此移动立方体。

只要您的应用程序以足够高的帧速率运行，这将是令人信服的。使用低帧速率（~15 fps 或更低），您需要其他技巧。

至于*怎么做*：我建议一个由计时器驱动的简单函数来简单地计算当前帧的平移。

这里使用的一个简单函数是`sin`，它也代表清晰的声波（= 空气中的振动）。

给定一个 double/float `time`，表示自应用程序启动以来的秒数（以及表示毫秒的分数）

```
void drawCube(float x, float y, float z, float opacity, float col[], float time)
{
    float offset = sin(2.0f * 3.14159265359f * time); // 1 Hz, for more Hz just multiply with higher value than 2.0f
    glTranslatef(-x + offset, -y + offset, -z + offset);
    glColor4f(col[0], col[1], col[2], opacity);
    glutWireCube(20);
    glTranslatef(x, y, z);
} 
```

编辑：这会在原始位置周围的区间 [-1,1] 内*振动*它。对于更大的振动，将结果乘以`sin`比例因子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:31:27.080

就个人而言，我会使用`rand()`或我自己的暗示。也许是[噪声](http://freespace.virgin.net/hugo.elias/models/m_perlin.htm)函数。我将使用该噪声函数来获得 [-1, 1] 范围内的随机或伪随机偏移。然后乘以`shake`你在那里的变量。

```
// returns a "random" value between -1.0f and 1.0f
float Noise()
{
    // make the number
}

void drawCube(float x, float y, float z, float opacity, float col[], float shake)
{
    float x, y, z;
    ox = Noise();
    oy = Noise();
    oz = Noise();

    glPushMatrix();
        glTranslatef( x + (shake * ox), y + (shake * oy), z + (shake * oz) );

        glColor4f(col[0], col[1], col[2], opacity);
        glutWireCube(20);
    glPopMatrix();
} 
```

你可能已经注意到我调整了一些东西，是我添加到`glPushMatrix()`和`glPopMatrix`. 它们非常有用，并且会自动反转它们之间所做的任何事情。

```
glPushMatrix();
    glTranslatef(1, 1, 1);
    // draw something at the location (1, 1, 1)

    glPushMatrix();
        glTranslatef(2, 2, 2);
        // draw something at the location (3, 3, 3)

    glPopMatrix();
    // draw at the location (1, 1, 1) again
glPopMatrix() 
```

# python - 将列表转换为元组的分组列表？

> ID：16021709
> 
> 赞同：2
> 
> 时间：2013-04-15T17:57:12.633
> 
> 标签：python

我有这个清单：

```
['Ben\n', '5 0 0 5 -5 \n', 'Moose\n', '5 5 0 3 0 0 \n', ...] 
```

这种情况持续了很长时间。我需要把这个列表变成这样的元组列表：

```
[('Ben', '5 0 0 5 -5'), ('Moose', '5 5 0 3 0 0'), ...] and so on. 
```

我觉得这应该很容易。
我已经打开了文本文件并以这种方式将其逐行拆分为列表：

```
e = open("bookratings.txt", "r")
elines = e.readlines() 
```

但我不知道从这里去哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T17:59:18.317

看起来每个人在其下一行都有关联的数据，因此每人有两行数据。你可以`zip`的。

```
lst = list(zip(*[iter(lst)]*2)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T17:59:33.637

干得好：

```
>>> li=['Ben\n', '5 0 0 5 -5 \n', 'Moose\n', '5 5 0 3 0 0 \n']
>>> zip(*[(e.strip() for e in li)]*2)
[('Ben', '5 0 0 5 -5'), ('Moose', '5 5 0 3 0 0')] 
```

该`zip(*[iter(s)]*n)`部分基于[zip](http://docs.python.org/2/library/functions.html#zip)上的 Python 文档`idiom for clustering a data series into n-length groups`。

我在里面添加了生成器以去除回车符。一旦生成器表达式在那里，`iter`就不再需要了。（感谢@StevenRumbalski）

当然，你提到你有一个像这样的对象的文件：

```
Ben
5 0 0 0 -5
Moose
5 5 0 3 0 0
... 
```

如果是这样，这是一个替代方案，您不必阅读整个文件：

```
>>> with open('/tmp/lines.txt','r') as f:
...    it=iter(f)
...    li=[(i.strip(),it.next().strip()) for i in it]
... 
>>> li
[('Ben', '5 0 0 0 -5'), ('Moose', '5 5 0 3 0 0')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:55:03.850

试试喜欢

```
>>a = ['Ben\n', '5 0 0 5 -5 \n', 'Moose\n', '5 5 0 3 0 0 \n']

>>b = ''.join(a).split('\n') 
```

现在

```
>> c = [(b[i],b[i+1]) for i in range(0,len(b)-1,2)] 
```

应该给你结果

```
[('Ben', '5 0 0 5 -5 '), ('Moose', '5 5 0 3 0 0 ')] 
```

# c++ - 非常基本的 C++ 程序中的意外输出

> ID：16021711
> 
> 赞同：0
> 
> 时间：2013-04-15T17:57:18.603
> 
> 标签：c++

编辑：我的最后一个问题是如何在我输入的数字之前获得一个空格，然后输入一个 . 在句末？

**原始问题：**

我正在学习 C++。这是我的代码

```
#include <iostream>

int main() {
    int iNum;
    std::cout << "Please enter your favorite number" << std::endl;
    std::cin >> iNum;
    std::cout << "Your favorite number is" << std::cout << iNum << std::endl;
    return 0;
} 
```

我删除了空格以使其更易于阅读。如果我在被问到时输入 4，我希望输出是你最喜欢的数字是 4。相反，它说，你最喜欢的数字是 51ABC3E84。最后一个数字将永远是我选择的任何数字。我在搞砸什么以获得奇怪的输出？感谢您对一个非常菜鸟程序员的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:58:51.080

在您检索输入后删除第二个`std::cout`，这在您的程序中没有任何用途。

更正后的行应该是：（更新以反映问题的更新部分）

`std::cout << "Your favorite number is " << iNum << "." << std::endl;`

当您发送`std::cout`到流中时，您实际上是在让`std::cout`对象尝试将自己处理为要打印的东西。`std::cout`在这种情况下，它似乎将其解释为以十六进制表示的 32 位值（可能是 的内存位置）。输出中“51ABC3E8”末尾的“4”是取自输入的变量的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T17:59:10.763

```
 std::cout << "Your favorite number is" << std::cout << iNum << std::endl;
                                        //^^You are printing cout 
```

应该

```
std::cout << "Your favorite number is"  << iNum << std::endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:03:20.303

你只需要说`std::cout`一次。在初始之后`cout`，您只需将所有想要的输出链接起来，`<<`直到语句以`;`. 当你把它放在`<<`你的代码中时，你实际上是在打印`cout`为转换为`void*`.

`std::cout << "Your favorite number is" << iNum << std::endl;`应该为您解决问题。

编辑：如果你想要一个空格和句号，只需将它们放在你的输出行中：

```
std::cout << "Your favorite number is " << iNum << '.' << std::endl; 
```

# android - 确定 GPS 坐标的方向

> ID：16021713
> 
> 赞同：0
> 
> 时间：2013-04-15T17:57:29.200
> 
> 标签：android, gps, direction, magnetometer

我正在尝试根据与磁北或真北相关的 GPS 坐标来确定目标位置的方向。根据我的手机当前所在的位置，由 Android 定位服务确定，我如何知道目标位置在哪个方向？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:27:01.923

您应该使用方法[Location.bearingTo()](http://developer.android.com/reference/android/location/Location.html#bearingTo%28android.location.Location%29)

例如

```
bearing = currentLocation.bearingTo(targetLocation); 
```

# c++ - 正则表达式查找使用位字段定义的所有结构

> ID：16021715
> 
> 赞同：1
> 
> 时间：2013-04-15T17:57:42.080
> 
> 标签：c++, regex, bit-fields

我需要在 C++ 代码库中的所有目录中搜索包含位字段的结构。我知道这可以通过正则表达式来完成，但一直无法组合正确的表达式来完成此操作。基本上我需要找到任何出现的 struct*{ *:* } 其中“*”是任何字符。在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T14:29:29.037

（我忽略了您需要多行匹配的事实；如何做到这一点与平台和正则表达式实现不同（看看`sed`！））。

单词后面的`.*`直接`struct`匹配任何内容，包括 { 和 }。因此，字符串`struct s_one {bool a:3;} one; struct s_two {bool b:4} two;`将只是一个匹配项。更糟糕的是，struct one { int noBits; };

```
int main(void)
{
  return (2>1)?1:0;
} 
```

将匹配，这不是您想要的（请注意 main 函数主体中的冒号。因此，您应该寻找在`struct`左大括号和左大括号之间仅具有有效内容的匹配项。尝试，例如：

```
struct\s+[a-zA-Z0-9_]+\s*{ [^}]*:[^}]*} 
```

在普通英语中，它会翻译为：“搜索单词`struct`，后跟一个或多个空格，后跟仅由给定字符（其中一个或多个）组成的有效标识符名称，可选地后跟任意数量的空格，后跟一个大括号（*我们现在在 struct 的定义中*），然后是除大括号外的任何文本（*我们不想离开定义*），在某处有一个冒号，然后是除右大括号外的任何文本，后跟右大括号。

请注意，根据您的解析器，您可能需要转义大括号（它们在正则表达式中有特殊含义）。另请注意，更简单的正则表达式也可能就足够了（例如，您可以删除冒号后面的任何内容，它仍然可以工作），但我写下的内容可以更好地了解如何构建这样的正则表达式。另请注意，此正则表达式不考虑代码内的任何形式的注释（例如，它不匹配

```
struct one // my favorite first struct
{
  bool a:8;
}; 
```

（因为`one // my favorite first struct`与“有效标识符名称”代码不匹配`[a-zA-Z0-9_]`）。

# android - ListView 适配器 - 更改适配器后 SetOnItemClickListener 失败

> ID：16021716
> 
> 赞同：0
> 
> 时间：2013-04-15T17:57:42.370
> 
> 标签：android, android-listview, android-adapter

我有一个由适配器控制的 ListView。该适配器负责动态加载内容并填充 ListView。第一次填充 ListView 时，每当我单击一个项目时，`onItemClick`都会调用该方法。但是，一旦我对适配器进行了更改（向下滚动，这会强制适配器加载更多数据并将其添加到 ListView），该`onItemClick`方法就不会被调用。

这是相关代码：

```
public class RingtonesListActivity extends Activity {

    private ArrayList<Category> categories;

    ListView myListView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_list);

        this.categories = getIntent().getParcelableArrayListExtra("categories");

        myListView = (ListView) findViewById(R.id.listView);
        myListView.setAdapter(new MyAdapter(this, categories));

        // click in ringtone
        myListView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View view, int i,
                    long arg3) {

                Intent intent = new Intent(view.getContext(), NewActivity.class);
                intent.putExtra("resource", (Resource) myListView.getItemAtPosition(i));

                startActivity(intent);        
            }
        });

    }
} 
```

在我的适配器中：

```
public class MyAdapter extends BaseAdapter {
    private List<Resources> resources;
    ...

    @Override
    public int getCount() {
    return resources.size();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup arg2) {

            if (position >= getCount() - 1) {
                    // do some stuff that adds entries to the resources List
                    notifyDataSetChanged();
            }
            TextView tv = new TextView(this.context);
            tv.setText(resources.get(position).getName());
            return tv;
    } 
```

# c# - WebApi 使用 GetAll() 和 GetByIds(int[] ids) 发现多个操作

> ID：16021717
> 
> 赞同：8
> 
> 时间：2013-04-15T17:57:44.003
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing, parameterbinding

使用标准路线：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

通过这些操作：

```
public class ValuesController : ApiController
{
    // GET api/values
    public string GetAll()
    {
        return "all";
    }

    // GET api/values/5
    public string GetById(int id)
    {
        return "single";
    }

    // GET api/values?ids=1&ids=2
    public string GetByIds([FromUri] int[] ids)
    {
        return "multiple";
    } 
```

并向**/api/values**发出请求，我得到了这个异常：

```
Multiple actions were found that match the request: 
System.String GetAll() on type MvcApplication4.Controllers.ValuesController
System.String GetByIds(Int32[]) on type MvcApplication4.Controllers.ValuesController 
```

我一直在转动我的轮子试图找到解决这个问题的方法。我相信**GetAll**和**GetByIds**操作在这里被认为是**Multiple**，但它们不是因为 GetByIds 具有不同的签名。

是否有不涉及添加`{action}`到路线的解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T13:25:20.480

感谢大家的意见和建议。在四处选择选项之后，我发现这样做的唯一方法是结合 GetAll 和 GetByIds 操作并切换 ids 的长度。

```
public class ValuesController : ApiController
{
    // GET api/values/5
    public string GetById(int id)
    {
        return "single";
    }

    // GET api/values
    // GET api/values?ids=1&ids=2
    public string GetByIds([FromUri] int[] ids)
    {
        switch (ids.Length)
        {
            case 0:
                return "all";

            default:
                return "multiple";
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:31:35.070

我们目前不支持绑定来自 Uri 的值集合。以下是与此相关的问题以及动作消歧问题：

[http://aspnetwebstack.codeplex.com/workitem/322](http://aspnetwebstack.codeplex.com/workitem/322)

不幸的是，我想不出与动作选择问题（没有'{action}'）本身相关的解决方法，即使您使用如下自定义参数绑定解决了模型绑定到集合的问题：

```
public string GetByIds(int[] ids)
    {
        return "multiple";
    }
------------------------

config.ParameterBindingRules.Insert(0, typeof(int[]), (paramDesc) => new SampleParameterBinding(paramDesc));

-------------------------

public class SampleParameterBinding : HttpParameterBinding
{
    public SampleParameterBinding(HttpParameterDescriptor desc)
        : base(desc)
    {
    }

    public override bool WillReadBody
    {
        get
        {
            return false;
        }
    }

    public override Task ExecuteBindingAsync(ModelMetadataProvider metadataProvider, HttpActionContext actionContext, CancellationToken cancellationToken)
    {
        HttpRequestMessage currentRequest = actionContext.Request;

        NameValueCollection nvc = currentRequest.RequestUri.ParseQueryString();

        //TODO: ERROR CHECKS
        int[] ids = nvc["ids"].Split(',').Select(str => Int32.Parse(str)).ToArray();

        // Set the binding result here
        SetValue(actionContext, ids);

        // now, we can return a completed task with no result
        TaskCompletionSource<AsyncVoid> tcs = new TaskCompletionSource<AsyncVoid>();
        tcs.SetResult(default(AsyncVoid));
        return tcs.Task;
    }

    private struct AsyncVoid
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-11T04:08:03.443

我推荐属性路由：

```
[RoutePrefix("api")]
public class ValuesController : ApiController
{
    // GET api/values
    // GET api/values?ids=1&ids=2
    [Route("values")]
    public string GetCollection([FromUri] IList<int> ids)
    {
        if (ids == null)
        {
          return "all";
        }
        return "multiple";
    }

    // GET api/values/5
    [Route("values/{id:int}")]
    public string GetById(int id)
    {
        return "single";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T03:20:56.553

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

# redactor - 如何使用插件 API 向编辑器编辑器添加下拉按钮？

> ID：16021721
> 
> 赞同：0
> 
> 时间：2013-04-15T17:57:54.743
> 
> 标签：redactor

文档示例[显示您可以](http://imperavi.com/redactor/examples/dropdown/)通过设置在`.redactor()`调用中执行此操作`buttonsCustom`。插件 API 文档[展示了如何添加单个按钮](http://imperavi.com/redactor/docs/plugins-api/)。但是如何通过插件 API 添加下拉菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:27:04.927

好的，查看编辑器源代码（最新版本 8.2.6），我注意到您可以将第四个参数传递给插件 API 的`addBtn`函数。所以，假设你想从插件内部添加一个字体大小下拉菜单：

```
RedactorPlugins.fontSize = {

    init: function(obj) {

        btnCallback = function(obj,event,key) {
            // button actions, if any
        }

        dropdown = {
            small: {
                title: 'Small'
                callback: function(obj,event,key) { //set the font size to small }
            }
            medium: {
                title: 'Medium'
                callback: function(obj,event,key) { //set the font size to medium }
            }
        }

        this.addBtn('fontSize','Change font size', btnCallback, dropdown);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T09:42:32.647

对于使用第 9 版 redactor 的任何人，API 都已更改。这是创建带有回调的下拉列表的方法。重要的是传递给的第三和第四个参数`buttonAdd`，第三个参数应该是回调函数，由于函数点击处理程序的编写`false`方式，这必须是为了让编辑器自动显示下拉菜单。`buttonBuild`第 4 个参数与版本 8 相同。

```
RedactorPlugins.snippets = {
  init: function(){
    var dropdown = {
      quote: {
        title: "Pull Quote",
        callback: function(){
          // callback code here
        }
      },
      accordian: {
        title: "Accordian",
        callback: function(){
          // callback code here
        }
      }
    };
    this.buttonAdd('snippets', 'Snippets', false, dropdown);
  }
}; 
```

如果您需要在调用下拉列表时运行回调，则需要编写代码以在作为第三个参数传递的回调中显示下拉列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T07:51:26.193

将类名添加到下拉项的示例 例如：-

```
dropdown = {
        small: {
            title: 'Small',
            callback: function(obj,event,key) { //set the font size to small },
            className:'YOURCLASS NAME'
            }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-01T07:10:52.243

杰米德是对的。对于更高版本的 Redactor，API 发生了很大变化。这是我用于 v9.2.5 的内容。

此代码向工具栏添加了一个下拉菜单，其中包含 2 个新按钮

if (!RedactorPlugins) var RedactorPlugins = {};

```
RedactorPlugins.newbtns = {
    init: function ()
    {
        //biu is bold italics underline
        var newbtns = {};
        newbtns['Bold'] = { title: 'Button 1', callback: this.btn1 };
        newbtns['Italics'] = { title: 'Button 2', callback: this.btn2 };

        this.buttonAdd('newbtns', 'New Buttons', false, newbtns);
        // adding font-awesome buttons
        // u will have to include font-awesome stylesheet separately for this to work
        this.buttonAwesome('newbtns', 'fa-tasks');

    },
    btn1: function(buttonName, buttonDOM, buttonObj, e)
    {
        // add stuff for btn1
    },
    btn2: function(buttonName, buttonDOM, buttonObj, e)
    {
        // add stuff for btn2
    }
}; 
```

使用您的插件初始化编辑器

```
$('#myTextarea').redactor({
    plugins: ['newbtns']
}); 
```

有关更多信息，请参阅此页面 - [Redactor 插件](http://imperavi.com/redactor/docs/plugins-creating/)

# javascript - 淘汰赛找不到结束评论标签

> ID：16021726
> 
> 赞同：3
> 
> 时间：2013-04-15T17:58:21.547
> 
> 标签：javascript, knockout.js

我在 twitter 引导界面中列出房间，如下所示：

```
<div class="row-fluid">
    <!-- ko foreach: rooms -->
        <!-- ko if: $index() % 4 == 3 -->
            </div><div class="row-fluid">
        <!-- /ko -->
    <span data-bind="text: $index() % 4"></span>

        <section class="span4">
            <address data-bind="text: pruebaComputed"></address>
            <address data-bind="text: number"></address>
        </section>
     <!-- /ko -->
</div> 
```

因此，当您看到我列出房间并尝试插入带有行流体类的 div 时，以遵循引导方式将事物分成行...

但我认为我遇到了一个错误，因为淘汰赛无法处理嵌套的无容器操作员.. 我对吗？我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T18:17:51.163

Knockout 可以处理嵌套的无容器控件。这是[一个改变嵌套内容的小提琴](http://jsfiddle.net/tyrsius/u457w/1/)，以证明它有效。

问题是敲除不仅仅是放置字符串，它正在解析模板的内容来为 html 创建一个 javascript 模板。You're fake close 导致了这个错误，因为它不理解你给它的*结构：*

`Uncaught Error: Cannot find closing comment tag to match: ko foreach: rooms`

我不确定我是否会称其为错误，因为它在模板中缺乏对动态结构的支持。

这是不合法的：

```
<!-- ko if: $index() % 4 == 3 -->
      </div><div class="row-fluid">
<!-- /ko --> 
```

因为它正在关闭一个尚未启动的标签。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T19:40:29.663

谢谢 Tyrsius，你让我注意到我必须改变我的策略 :) 所以我在我的视图模型中添加了一个计算来打破我的列表，如下所示：

```
vm.separarEnFilas = ko.computed(function () {

    var rooms = this.rooms(),
        result = [];
    for (var i = 0; i < rooms.length; i += 4) {
        var row = [];
        for (var j = 0; j < 4; ++j) {
            if (rooms[i + j]) {
                row.push(rooms[i + j]);
            }
        }
        result.push(row);
    }
    return result;

},vm); 
```

然后在我看来，我这样做了：

```
<div class="room-list" data-bind="foreach: separarEnFilas">
    <div class="row-fluid" data-bind="foreach: $data">
        <article class="span3">
            <div>
                <address data-bind="text: number"></address>
            </div>
        </article>
    </div>
</div> 
```

# sql-server - 在 MS SQL 中更改变量的硬编码路径

> ID：16021730
> 
> 赞同：1
> 
> 时间：2013-04-15T17:58:25.950
> 
> 标签：sql-server, xml, variables, import

我使用以下代码，一切正常

```
DECLARE @Directory varchar(100)
SELECT @Directory = 'c:\XML\'

DECLARE @FileExist int
DECLARE @FileName varchar(500),@DeleteCommand varchar(1000),@FullFileName varchar(500), @SQLFullFileName varchar(500)

DECLARE @X XML
SELECT @X = CONVERT(xml,[ICECAT-interface],2)
FROM OPENROWSET(BULK 'C:\XML\1382.xml',SINGLE_BLOB) AS Import([ICECAT-interface])

select P1.X.value('@ID', 'int') as ProductID,
       P2.X.value('@ID', 'int') as ProductID

 from @X.nodes('/ICECAT-interface/Product') as P1(X)
 cross apply P1.X.nodes('ProductRelated') as PR(X)
 cross apply PR.X.nodes('Product') as P2(X) 
```

如果我将此行替换为 C:\XML\1382.xml 中的文件名

```
 SELECT @X = CONVERT(xml,[ICECAT-interface],2) 
 FROM OPENROWSET(BULK ' + @FullFileName + ' ,SINGLE_BLOB) AS Import([ICECAT-interface]) 
```

它错误地说该文件不存在，但在调试模式下我可以看到变量@FullFileName 存在并且是正确的。

任何输入将不胜感激。

谢谢

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:01:54.463

您不能将变量传递给，`OPENROWSET()`因此您需要使用动态 SQL。这是未经测试的，但应该给你一个想法：

```
DECLARE @x XML, @sql NVARCHAR(MAX);

SELECT @sql = N'SELECT @X = CONVERT(xml,[ICECAT-interface],2) 
 FROM OPENROWSET(BULK ''' + @FullFileName + ''' ,SINGLE_BLOB)
 ---------------------^^ escaped quotes are important 
 AS Import([ICECAT-interface]);';

EXEC sp_executesql @sql, N'@x XML OUTPUT', @x OUTPUT;

SELECT @x; 
```

# javascript - 从文件加载时，D3.js 代码不会在浏览器中呈现，但在控制台中可以正常工作

> ID：16021754
> 
> 赞同：1
> 
> 时间：2013-04-15T17:59:49.287
> 
> 标签：javascript, d3.js

我正在使用 Rails 4.0beta，并且在正文部分的底部有以下 d3.js 脚本。当直接粘贴到 Chrome 开发者工具控制台时，代码会生成图表。但是，如果它只是作为从服务器发送来呈现页面的文件中的脚本，它不会生成图形。有谁知道为什么？我一定是在犯一些简单的错误......只是不知道在哪里。

```
<script type="text/javascript" src="http://d3js.org/d3.v3.min.js">
function generateGraph() {
    var margin = {top: 30, right: 20, bottom: 30, left: 50}, 
            width = 600 - margin.left - margin.right,
            height = 270 - margin.top - margin.bottom;

    var parseDate = d3.time.format("%d-%b-%y").parse; 

    var x = d3.time.scale().range([0, width]);
    var y = d3.scale.linear().range([height, 0]); 

    var xAxis = d3.svg.axis().scale(x).orient("bottom").ticks(5); 
    var yAxis = d3.svg.axis().scale(y).orient("left").ticks(5);

    var valueline = d3.svg.line().x(function(d) { return x(d.date); }).y(function(d) { return y(d.load_volume); });

    var svg = d3.select("body").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    d3.json("/users/5/workouts/analyze.json", function(error, data) {
    data.forEach( function (d) {
       d.date = parseDate(d.date);
       d.load_volume = +d.load_volume;
    });
        // Scale the range of the data
        x.domain(d3.extent(data, function(d) { return d.date; }));
        y.domain([0, d3.max(data, function(d) { return d.load_volume; })]);

        svg.append("path").attr("d", valueline(data));                                              // Add the valueline path
        svg.append("g").attr("transform", "translate(0," + height + ")") .call(xAxis);  // Add the X Axis .attr("class", "x axis")
        svg.append("g").attr("class", "y axis").call(yAxis);                                        // Add the Y Axis

    });
};

generateGraph();

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:03:09.450

您正在尝试将库包含在包含您的代码的脚本标记中。尝试改用这个：

```
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
   // your code here
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T17:06:38.740

在 body 标记内创建另一个脚本标记，并从该脚本标记调用函数。IE

```
<script>
function generateGraph() {
// function definition 
}
</script>

<body>
<script>
generateGraph();
</script>
</body> 
```

# visual-studio - 将自定义 SSIS 数据源添加到 Visual Studio 工具箱时出错

> ID：16021757
> 
> 赞同：2
> 
> 时间：2013-04-15T17:59:59.940
> 
> 标签：visual-studio, ssis, sql-server-2008-r2, toolbox

我使用以下链接中给出的说明创建了一个自定义数据源：http: [//msdn.microsoft.com/en-us/library/ms136088.aspx](http://msdn.microsoft.com/en-us/library/ms136088.aspx)

但是，一旦我构建项目并尝试将新数据源添加到工具箱中，就会出现以下错误：

> 'C:\Somepath\bin\Debug\CustomDataSource.dll' 中没有可以放在工具箱上的组件

以下是我使用过的工具：

创建和构建自定义数据源；Visual Studio 2010 & 内置于 Framework 3.5

创建 SSIS 包 SSIS - SQL Server 2008 R2 & SQL Server Business Intelligence Development Studio (VS2008)

任何帮助将不胜感激。

南墩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:27:14.983

我找到了问题的答案；这是解决方案，希望对某人有所帮助。

参考 - [http://msdn.microsoft.com/en-us/library/ms403356.aspx](http://msdn.microsoft.com/en-us/library/ms403356.aspx)

1.  将 dll 复制到以下文件夹。确切的文件夹取决于您使用的是 x64 还是 x86（两者都使用它并没有什么坏处）：

    C:\Program Files (x86)\Microsoft SQL Server\100\DTS\PipelineComponents
    C:\Program Files\Microsoft SQL Server\100\DTS\PipelineComponents

2.  将 dll 安装到您的 GAC。您需要对其进行签名才能执行此操作。

3.  在 BI Dev Studio 中，转到工具 > 选择工具箱项。您将在“SSIS 数据流项”选项卡中找到您的数据源

对于第 1 步和第 2 步，您可能会发现进行如下构建后事件很有帮助：

```
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil.exe" -u $(TargetName) 
"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil.exe" -iF $(TargetFileName) 
copy $(TargetPath) "C:\Program Files\Microsoft SQL Server\100\DTS\PipelineComponents" 
copy $(TargetPath) "C:\Program Files (x86)\Microsoft SQL Server\100\DTS\PipelineComponents" 
```

对答案的小编辑：

如果您将 SSIS 2012 与 BIDS 2010 一起使用，工具箱项目会自动添加（即您不必转到工具 > 选择工具箱项目）您只需将其复制到 dll 正确的位置（参考 - [http：/ /fendy-huang.blogspot.com/2011/09/how-to-add-ssis-custom-component-to.html](http://fendy-huang.blogspot.com/2011/09/how-to-add-ssis-custom-component-to.html)）：

```
C:\Program Files\Microsoft SQL Server\110\DTS\PipelineComponents   
C:\Program Files (x86)\Microsoft SQL Server\110\DTS\PipelineComponents   
C:\Program Files\Microsoft SQL Server\110\DTS\Tasks   
C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Tasks 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:35:12.760

这里有一个[报告](http://forums.asp.net/t/949306.aspx/1)，通过公开课程解决了类似的问题。（另外，签署程序集并将其放入 GAC。）

[这是一个](http://www.vbforums.com/showthread.php?571200-RESOLVED-Adding-a-class-to-the-ToolBox)需要实现 IComponent 并从 Component 类继承的情况。

当我用谷歌搜索错误消息时，我看到了许多其他帖子。这些有帮助吗？

# javascript - 从安全服务器拦截 javascript 文件并改用本地文件

> ID：16021760
> 
> 赞同：0
> 
> 时间：2013-04-15T18:00:14.080
> 
> 标签：javascript, fiddler

我正在尝试拦截提供 JS 文件的 https 请求并改用我的本地文件。使用 fiddler 工具，我能够成功拦截所有 http 请求提供的文件。但无法为 https 文件执行此操作。注意：我已将我的 JS 文件保存在本地服务器中。我只是使用了 C:\test\test.js 之类的直接路径

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:30:33.347

您是否启用了**解密 HTTPS 流量**选项？

Fiddler2 包括解密、查看和修改 HTTPS 安全流量以进行调试的能力。**默认情况下禁用解密功能。**
默认情况下，会话列表将仅显示 HTTPS 加密字节流经的 CONNECT 隧道。

通过单击`Tools > Fiddler Options > HTTPS`并**勾选**框启用流量解密选项`Decrypt HTTPS Traffic`。

**更新：**
您可能希望顺便从代理发送备用 javascript（而不是更改源以在用户本地计算机上包含脚本文件）。

此外，正如 EricLaw 在对此答案的评论中指出的那样：
您还想查看 Fiddler 的**AutoResponder 选项卡**，该选项卡允许您*从本地磁盘返回文件，而不是将请求传输到服务器*。
在此选项卡上，您可以输入匹配规则和操作字符串，如果请求 URI 与匹配规则匹配，Fiddler 将执行操作。

* * *

**额外**的（因为评论说不能这样做，因为它会破坏 https 的目的）

> 问：HTTPS 协议旨在防止流量查看和篡改。鉴于此，Fiddler2 如何调试 HTTPS 流量？
> 
> 答：Fiddler2 依赖于“中间人”的 HTTPS 拦截方法。对于您的网络浏览器，Fiddler2 声称是安全的网络服务器，而对于网络服务器，Fiddler2 模仿网络浏览器。Fiddler2为了伪装成web服务器，动态生成HTTPS证书。
> 
> 您的网络浏览器不信任 Fiddler 的证书（因为 Fiddler 不是受信任的根证书颁发机构），因此当 Fiddler2 拦截您的流量时，您会在浏览器中看到 HTTPS 错误消息。

顺便说一句，这几乎不是一个新概念，据我所知，[mitmproxy](http://mitmproxy.org/)可以做到。

希望这可以帮助！

# jquery - 如何更改颜色框的位置？

> ID：16021763
> 
> 赞同：0
> 
> 时间：2013-04-15T18:00:21.163
> 
> 标签：jquery, colorbox

我尝试更改我在 css 和 java 中都尝试过的 jquery colorbox 的位置，但没有任何效果。还尝试了其他线程，但没有任何建议为我解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:04:59.203

你可以这样做。

```
$.colorbox({
    href: 'mypage.html',
    top: '100px',
    left: '40%'
}); 
```

您可以[在此处](http://www.jacklmoore.com/colorbox/)看到许多其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:05:05.530

我通常这样做是为了我的颜色框的左侧定位

```
 jQuery.colorbox({html:response.html,scrolling:false, overlayClose:false, maxWidth:"480px", maxHeight:"345px", left:true}); 
```

尝试这样的事情，而不是 left:true 你可以通过你想要它的位置来提及百分比

# android - 在 Android 中如何获取设置为 Wrap_Content 的 Textview 的宽度

> ID：16021764
> 
> 赞同：8
> 
> 时间：2013-04-15T18:00:30.210
> 
> 标签：android, textview, width

我正在尝试将文本添加到我已将其宽度设置为 Wrap_content 的文本视图中。我正在尝试获取此文本视图的宽度。但它在所有情况下都显示为 0。将文本设置为文本视图后，如何获取文本视图的宽度。

代码如下：

```
 LinearLayout ll= new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        TextView tv = new TextView(this);
        tv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        ll.addView(tv);
        tv.setText("Hello 1234567890-0987654321qwertyuio787888888888888888888888888888888888888888888888888");
        System.out.println("The width is == "+tv.getWidth());// result is 0
        this.setContentView(ll); 
```

请建议。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T22:34:37.017

[只有在布局过程完成后（ http://developer.android.com/reference/android/view/View.html#Layout](http://developer.android.com/reference/android/view/View.html#Layout)），具有动态宽度/高度的视图才能获得正确的大小。
您可以将 OnLayoutChangeListener 添加到您的 TextView 并在那里获取它的大小：

```
tv.addOnLayoutChangeListener(new View.OnLayoutChangeListener() {
           public void onLayoutChange(View v, int left, int top, int right, int bottom, 
                                      int oldLeft, int oldTop, int oldRight, int oldBottom) {
                        final int width = right - left;
                        System.out.println("The width is == " + width);                
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T18:07:42.523

在完全构建布局之前，您无法获得具有动态大小的 View 的宽度。这意味着您无法在 onCreate() 中获取它。一种方法是创建一个继承自 TextView 并覆盖的类`onSizeChanged()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:06:51.937

你什么时候打电话给这个？它已经被绘制到屏幕上了吗？

听起来你打电话`getWidth()`太早了。

你也可以[看看这个问题](https://stackoverflow.com/questions/3591784/android-get-width-returns-0)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T09:57:09.017

你应该使用这个：

textView.getMeasuredWidth();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-05T03:53:49.157

你可以试试这个：

```
textView.measure(0,0);
int width = textView.getMeasuredWidth(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-20T12:19:46.343

您可以使用此库将执行宽度计算的任务安排到视图完全绘制后的正确时间

[https://github.com/Mohamed-Fadel/MainThreadScheduler](https://github.com/Mohamed-Fadel/MainThreadScheduler)

使用示例：

```
MainThreadScheduler.scheduleWhenIdle(new Runnable() {
       @Override
       public void run() {
           int width = textview.getWidth();
           int height = textview.getHeight();
           textview.setText( String.valueOf( width +","+ height ));
       }
   }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-20T19:59:33.980

你好用这个方法：

```
textview.post(new Runnable() {
    @Override
    public void run() {
        int width = textview.getWidth();
        int height = textview.getHeight();
        textview.setText( String.valueOf( width +","+ height ));
    } 
```

});

来源：[https ://gist.github.com/omorandi/59e8b06a6e81d4b8364f](https://gist.github.com/omorandi/59e8b06a6e81d4b8364f)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-06T07:06:26.937

这对我有用：

```
RelativeLayout.LayoutParams mTextViewLayoutParams = (RelativeLayout.LayoutParams) mTextView.getLayoutParams();
mTextView.setText(R.string.text);
mTextView.measure(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
int width = mShareTip.getMeasuredWidth();
//use the width to do what you want
mShareTip.setLayoutParams(mShareTipLayoutParams); 
```

# qt - 在 Windows 中使用 OpenCV 的 Qt

> ID：16021766
> 
> 赞同：0
> 
> 时间：2013-04-15T18:00:39.500
> 
> 标签：qt, opencv, cross-platform, cmake

我正在尝试在我的项目中使用开源工具。我曾经使用 Qt5 插件在 VS2010 中编写代码。我想将我的项目移植到 Qt。在使用 VS2010 时，会提供 OpenCV dll 和库，以便我轻松使用它们。不幸的是，当我决定使用 Qt 时，我明白我必须从头开始根据 Qt 设置编译 OpenCV。

无论如何，我使用 cmake 工具编译 OpenCV 2.4.5 并且遇到了一个 opencv 错误（编译时它停止在 37%）:( 然后我编译了 OpenCV 2.4.2，它被编译了。我测试过，它正在工作我的小程序测试。但是它并没有在我的实际项目中运行。它编译并运行程序。但它总是给出运行时错误。我知道代码没有问题，因为在VS2010中它运行良好。我认为这是关于一些我无法处理的链接问题。

我在 Qt 中编译时收到以下警告消息。

```
:-1: warning: auto-importing has been activated without --enable-auto-import specified on the command line. 
```

下面是编译输出的一部分。

```
LD:\opencv242qt\install\lib -lopencv_core242.dll -lopencv_highgui242.dll -lopencv_imgproc242.dll -lopencv_features2d242.dll -lopencv_nonfree242.dll -lopencv_flann242.dll -lopencv_calib3d242.dll -lopencv_objdetect242.dll -lopencv_stitching242.dll -lopencv_calib3d242.dll -lQtGui4 -lQtCore4 
Info: resolving VTT for cv::SIFT by linking to __imp___ZTTN2cv4SIFTE (auto-import)
Info: resolving vtable for cv::FlannBasedMatcher by linking to __imp___ZTVN2cv17FlannBasedMatcherE (auto-import)
Info: resolving vtable for cv::_InputArray by linking to __imp___ZTVN2cv11_InputArrayE (auto-import)
Info: resolving vtable for cv::_OutputArray by linking to __imp___ZTVN2cv12_OutputArrayE (auto-import)
mingw32-make.exe[1]: Leaving directory `C:/Users/emresaslan/Documents/QtProjects/Project2'
c:/qtsdk/mingw/bin/../lib/gcc/mingw32/4.4.0/../../../../mingw32/bin/ld.exe: warning: auto-importing has been activated without --enable-auto-import specified on the command line.
This should work unless it involves constant data structures referencing symbols from auto-imported DLLs.
20:44:09: The process "C:\QtSDK\mingw\bin\mingw32-make.exe" exited normally. 
```

我不知道为什么它不起作用，但我想问题可能取决于我的 opencv 编译。编译时，我只选择了 With_Qt 选项并取消选中了 CUDA 选项。

我还想说当我使用stitcher 类的stitch 函数时程序崩溃。它在特征检测后崩溃。确切地说，我可以说成对匹配过程会杀死程序:(

我正在使用 Qt 4.8.1、OpenCV 2.4.2，我该如何解决这个问题？我需要在跨平台上工作我的项目，以便我使用 Qt。

# sql - SQLCommand 导致重复的存储过程执行

> ID：16021775
> 
> 赞同：0
> 
> 时间：2013-04-15T18:01:14.127
> 
> 标签：sql, vb.net, stored-procedures, sqlconnection, sqlcommand

我遇到了一个完全被难住的问题。

我的应用程序的一部分使用 SQLConnection/SQLCommand 调用存储过程。我正在访问一个 SQL 2005 数据库，我能够建立连接并执行 SP 就好了。问题是它周期性地多次执行 SP；有时两次，有时三次。

这基本上是我执行 SP 的方式......

```
Dim conString As String = "<Typical Connection String>"
Dim cn As SqlConnection = new SqlConnection(conString)
Dim cmd As SqlCommand = New SqlCommand("dbo.JobStoredProc", cn)
cmd.CommandType = CommandType.StoredProcedure
cmd.Parameters.Add("@Val", SqlDbType.VarChar, 12).Value = "Test Value"
cn.Open()
Dim queryResult As Integer = cmd.ExecuteNonQuery
cn.Close()
cn.Dispose() 
```

我不明白为什么有时它只执行一次，但有时它执行多次。有什么我想念的吗？有没有更好的方法来执行 SP？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:38:09.270

事实证明，这是因为我有两个相同的 File Watchers 正在查看同一个目录。这导致上述函数同时触发两次。

# node.js - MongoDB 中的多个模式（使用 Mongoose）

> ID：16021776
> 
> 赞同：1
> 
> 时间：2013-04-15T18:01:17.610
> 
> 标签：node.js, mongodb, mongoose

我正在使用 MongoDB、Mongoose 和 Node 来存储游戏的用户信息。

我有一种情况，我希望获得两套游戏记录：1\. 用户 2\. 排行榜

用户信息包括用户名、密码、游戏次数和用户的前 5 名得分。我目前为此设置了一个架构，它可以完美运行。

我现在被要求添加一个排行榜，它应该显示所有用户的前 10 名总分。我想在同一个数据库中为此设置单独的记录，以避免检查所有用户记录并过滤以显示排行榜。我更愿意将排行榜集合限制为 10 条记录，并且每次用户完成游戏时，对照该集合检查他们的分数，看看他们是否应该在排行榜上。我是 mongo/mongoose 的新手，不知道如何最好地解决这个问题。

任何意见，将不胜感激。

我确信这是其他人过去遇到过的问题，如果这里已经涵盖，我很抱歉，但我已经搜索过并且无法找到类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:38:40.050

您不需要另一个集合来执行此操作。您可以通过 MongoDB 中的查询完美地做到这一点。

假设我插入了以下内容：

```
db.user.insert({ name: 'foo', scores: [100, 80, 90, 60, 65] });
db.user.insert({ name: 'bar', scores: [95, 120, 83, 70, 42] });
db.user.insert({ name: 'baz', scores: [180, 160, 95, 100, 77] }); 
```

现在，假设要获得该系列中的前 10 款游戏，您需要执行以下操作：

```
db.user.aggregate([
  { $project: { name: 1, scores: 1 } },
  { $unwind: "$scores" },
  { $sort: { scores: -1, name: 1 } },
  { $limit: 10 }
]) 
```

请记住，`aggregate`是 Mongo 2.2+ 中的一个功能。确保你拥有它。有关它的更多信息，请查看[官方文档](http://docs.mongodb.org/manual/reference/aggregation/)。

# jquery - JQuery 绝对位置在 Chrome 中工作不好（但在 Firefox 中可以）

> ID：16021798
> 
> 赞同：0
> 
> 时间：2013-04-15T18:02:20.980
> 
> 标签：jquery, css, google-chrome, firefox, data-visualization

我正在使用响应式设计中具有绝对位置的 babbles 创建数据可视化。所以我需要使用百分比来放置它们，然后是 px 中的值，以便将气泡的中心（而不是角）放置在指示的位置。由于 CSS calc 在移动平台上不起作用，我用 jQuery 来做

```
bubblecorr = '-=' + (sizePcts[h]*bubblesize)*0.5 + 'px';
$("#b"+h).css('left', horPcts[h]+'%').css('left', bubblecorr);
$("#b"+h).css('bottom', verPcts[h]+'%').css('bottom', bubblecorr); 
```

其中，bubblecorr 是气泡半径的像素校正，sizePcts 是气泡的大小（来自 Array 并被校正为使用半径而不是总大小），horPcts % X 轴值 abd verPcts % Y 轴值。我想你可以想象这是在一个循环中。

奇怪的是：第一行和第二行在 Chrome、Safari 和 Firefox 中运行良好。第三个（底部重新定位）仅适用于 FIREFOX（在 Safari 和 Chrome 中跳过 % 值并仅使用 px 值）。

知道为什么会这样吗？谢谢！

# vb.net - 在 vb.net 中关闭 msaccess.exe

> ID：16021800
> 
> 赞同：1
> 
> 时间：2013-04-15T18:02:23.790
> 
> 标签：vb.net, ms-access

我正在创建一个 vb.net 程序，我有一个按钮，单击该按钮将浏览 MDB 文件（代码 1），选择后将执行一些代码行，将 access 数据库中的所有宏填充到一个组合中框（代码 2）。我遇到的问题是代码 2 运行后 MSACCESS.EXE 进程没有关闭。我尝试了一些不同的东西，比如 objAccess.CloseCurrentDatabase() 都没有工作。关于我做错了什么有什么想法吗？

代码 1

```
Private Sub CommandDBPath_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CommandDBPath.Click
    Dim dialog As New OpenFileDialog()
    dialog.Filter = "Access database (*.mdb)|*.mdb"
    If DialogResult.OK = dialog.ShowDialog Then
        TextDBPath.Text = dialog.FileName
    End If
    SelectDatabaseMacro()
End Sub 
```

代码 2

```
Private Sub SelectDatabaseMacro()
    Dim objAccess As Object  '' Access.Application
    Dim i As Long
    Dim path As String
    path = TextDBPath.Text
    objAccess = CreateObject("Access.Application")
    objAccess.OpenCurrentDatabase(path)
    For i = 0 To objAccess.CurrentProject.AllMacros.Count - 1
        TextReportMacro.Items.Add(objAccess.CurrentProject.AllMacros(i).Name)
    Next
    objAccess.CloseCurrentDatabase()
    objAccess = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:07:34.867

要突然终止进程，

```
For Each p As Process In Process.GetProcesses()
    If p.ProcessName = "MSAccess" Then
        p.Kill()
    End If
Next 
```

或者为了更“优雅”的方法，试试这个，

*该进程必须有一个windows界面（窗口）才能工作。*

```
For Each p As Process In Process.GetProcesses()
If p.ProcessName = "MSAccess" Then
    p.CloseMainWindow()
End If
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:08:10.067

尝试`objAccess.Quit`在你之后添加一个语句`objAccess.CloseCurrentDatabase()`。

# xml - XSLT - 使用 XPath 计算子元素的数量

> ID：16021801
> 
> 赞同：11
> 
> 时间：2013-04-15T18:02:24.153
> 
> 标签：xml, xslt, xpath, count

我有以下存储电影和演员详细信息的 XML 文件：

```
<database
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="movies.xsd">

<movies>
    <movie movieID="1">
        <title>Movie 1</title>
        <actors>
            <actor actorID="1">
                <name>Bob</name>
                <age>32</age>
                <height>182 cm</height>
            </actor>
            <actor actorID="2">
                <name>Mike</name>
            </actor>
        </actors>
    </movie>
</movies>

</database> 
```

如果`actor`元素包含多个子元素（在本例中是名称、年龄和身高），那么我想将其名称显示为超链接。

但是，如果`actor`元素只包含一个子元素（名称），那么它应该显示为纯文本。

XSLT：

```
<xsl:template match="/">
    <div>
      <xsl:apply-templates select="database/movies/movie"/>
    </div>
  </xsl:template>

  <xsl:template match="movie">
    <xsl:value-of select="concat('Title: ', title)"/>
    <br />
    <xsl:text>Actors: </xsl:text>
    <xsl:apply-templates select="actors/actor" />
    <br />
  </xsl:template>    

<xsl:template match="actor">
    <xsl:choose>
        <xsl:when test="actor[count(*) &gt; 1]/name">
            <a href="actor_details.php?actorID={@actorID}">
                <xsl:value-of select="name"/>
            </a>
            <br/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="name"/>
            <br/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

所以在这种情况下，Bob 应该显示为超链接，而 Mike 应该显示为纯文本。但是，我的页面将 Bob 和 Mike 都显示为纯文本。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-15T18:38:02.320

你的第一个**xsl:when** test is wrong here

```
<xsl:when test="actor[count(*) &gt; 1]/name"> 
```

你已经定位在一个**演员**元素上，所以这将寻找一个**演员**元素，它是当前**演员**元素的子元素，但什么也找不到。

你可能只想这样做

```
<xsl:when test="count(*) &gt; 1"> 
```

或者，您可以这样做

```
<xsl:when test="*[2]"> 
```

即，第二个位置是否有一个元素（当您只想检查是否有多个元素时，可以节省所有元素的计数），

或者您可能想检查当前的**actor元素是否有****name**以外的元素？

```
<xsl:when test="*[not(self::name)]"> 
```

顺便说一句，最好将测试放在模板匹配中，而不是使用**xsl:choose**。

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes" encoding="utf-8" omit-xml-declaration="no"/>

   <xsl:template match="/">
      <div>
         <xsl:apply-templates select="database/movies/movie"/>
      </div>
   </xsl:template>

   <xsl:template match="movie">
      <xsl:value-of select="concat('Title: ', title)"/>
      <br/>
      <xsl:text>Actors: </xsl:text>
      <xsl:apply-templates select="actors/actor"/>
      <br/>
   </xsl:template>

   <xsl:template match="actor">
      <xsl:value-of select="name"/>
      <br/>
   </xsl:template>

   <xsl:template match="actor[*[2]]">
      <a href="actor_details.php?actorID={@actorID}">
         <xsl:value-of select="name"/>
      </a>
      <br/>
   </xsl:template>
</xsl:stylesheet> 
```

请注意，在这种情况下，XSLT 处理器应该首先匹配更具体的模板。

# batch-file - 从它启动 wampserver 后命令提示符未关闭

> ID：16021803
> 
> 赞同：0
> 
> 时间：2013-04-15T18:02:30.960
> 
> 标签：batch-file

```
net start Apache2.2
wampmanager
chrome --new-window "http://localhost:8090/form.html" 
```

这是我用来启动 apache 服务器 wampserver 然后在新的 chrome 窗口中打开 url 的批处理文件。

但是当我运行它时，命令窗口会卡在 wampmanager 上，因此不会继续打开 html 页面。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:08:08.667

尝试

```
start wampmanager 
```

不是我知道 - 或想知道 - wampmanager 是什么。这应该可以解决问题。

# qemu - 更新后 Fedora 17 上的 Libvirt 构建失败

> ID：16021804
> 
> 赞同：2
> 
> 时间：2013-04-15T18:02:31.393
> 
> 标签：qemu, libvirt

我最近安装了 Fedora 17 的更新，其中包括从 Linux Kernel 3.7.x 升级到 3.8.x。现在我无法构建 Libvirt！它给了我这个错误：

```
checking linux/if_bridge.h usability... no
checking linux/if_bridge.h presence... yes
configure: WARNING: linux/if_bridge.h: present but cannot be compiled
configure: WARNING: linux/if_bridge.h:     check for missing prerequisite headers?
configure: WARNING: linux/if_bridge.h: see the Autoconf documentation
configure: WARNING: linux/if_bridge.h:     section "Present But Cannot Be Compiled"
configure: WARNING: linux/if_bridge.h: proceeding with the compiler's result
configure: WARNING:     ## ------------------------------------- ##
configure: WARNING:     ## Report this to libvir-list redhat com ##
configure: WARNING:     ## ------------------------------------- ##
checking for linux/if_bridge.h... no 
```

我该如何解决这个问题，以便我可以再次构建 Libvirt？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:02:31.393

显然构建失败是由头文件引起的`/usr/include/linux/if_bridge.h`。幸运的是，修复很容易（一旦你知道该怎么做）。

1.  `/usr/include/linux/if_bridge.h`在文本编辑器中打开
2.  添加此包含行，`#include <netinet/ip6.h>`
3.  重建

每次启动到不同的内核版本时，您都必须重新应用此修复程序，因为`/usr/include/linux/`头文件已被清除。

# google-maps - 尝试通过控制台 API 密钥使用 Google 地图地理编码服务时访问被拒绝

> ID：16021811
> 
> 赞同：2
> 
> 时间：2013-04-15T18:02:48.480
> 
> 标签：google-maps, google-maps-api-3, google-geocoding-api

**更新：**为了给出一个更明确的问题。如何将 Google 控制台 API 密钥与 Google 地图地理编码 Web 服务 API 一起使用？目前，当我指定密钥时请求被拒绝，但即使它失败了，它也会记录在 Google Console API 站点的报告部分中。 ![在此处输入图像描述](https://i.stack.imgur.com/iQo3e.png)

* * *

**原始问题**

我有一个现有的应用程序，它已被修改为在输入地址时开始地理编码（用于在谷歌地图上的应用程序中使用）。对此的预期数量预计在免费产品的限制范围内，目前不需要密钥。但是现在我必须对所有现有地址进行地理编码。我有一个小型 Windows 应用程序 (C#)，它将一次循环遍历它们，请求对它们进行地理编码（通过[https://maps.googleapis.com/maps/api/geocode/json](https://maps.googleapis.com/maps/api/geocode/json)）并将结果存储在数据库中. 但是我一直遇到查询限制。为了帮助缓解这种情况，我在 Google API 控制台 ( [https://code.google.com/apis/console/](https://code.google.com/apis/console/) ) 上设置了一个帐户，这样我就可以超出限制，只需为超额付费。

问题是为了使用这种计费方式，我必须为请求提供一个控制台 API 密钥，但每次我这样做时，我都会收到一个状态为`REQUEST_DENIED`.

我的网址看起来像这样 [https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA+94043&sensor=false&key=123abc](https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA+94043&sensor=false&key=123abc)

如果我取下钥匙，它可以正常工作，但它会失败。现在，我在环顾四周时看到了其他类似的问题，但找不到该问题的答案。

我尝试了各种替代域，包括 maps.google.com、maps.googleapis.com 和 maps-api-ssl.google.com，据我所知，它们似乎都有同样的问题。

到目前为止，这是我能够找到的：

*   该服务在 Google 控制台 API 的站点中列为 Google Maps API v3（v2 有一个单独的条目），所以我不认为密钥在 v3 中不再是强制性的问题。
*   我知道请求正在通过并针对此 API 密钥正确记录，因为每次尝试失败时，Google API 控制台的“报告”选项卡上的请求计数都会增加一个。
*   *我知道不通过网页访问它不是问题，因为控制台 API 明确允许您生成供服务器/服务使用的密钥，并且您可以通过 IP 地址限制对它们的访问，而不是 URL Referrer。
*   *我还验证了[此页面](https://developers.google.com/console/help/#UsingKeys)上概述的参数语法，以及其他用法

*这些对于控制台 API 系统似乎是通用的，但在用于 Google Maps API 时没有提及这些做法的例外情况。

我什至试图联系谷歌，但显然他们没有通过电话提供支持（我希望今天能完成，但看起来不太可能）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T14:28:45.837

我遇到了同样的问题，并通过在 Google apis 仪表板上启用地理编码 API 来解决它。即使我使用的是 Google Maps JavaScript API v3，它仍然需要我启用 Geocoding API。在启用任何 API 访问之前，请确保您了解 google 的配额限制和计费系统。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:55:40.420

似乎不再需要密钥，因为它不会增加免费地理编码的限制。

它是 v2 的遗留物，但地理编码 API v2 已于去年 3 月 8 日完全弃用。

如果您需要使用超过免费限制，我认为您必须获得企业许可证。

问候，爱德华多。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-06-16T16:12:25.923

这个答案迟到了，但以防万一其他人有问题。首先需要设置帐单，就像 Dylan 说的那样，您还必须启用地理编码 API（这让我很着迷）。至少我为显示多个商店位置地址的位置应用程序做了。

# lua - Lua 的长度操作符会返回一个负数吗？

> ID：16021813
> 
> 赞同：3
> 
> 时间：2013-04-15T18:02:51.420
> 
> 标签：lua

Lua 的长度运算符的[特殊规范](http://www.lua.org/manual/5.1/manual.html#2.5.5)让我想知道 Lua 是否会“允许”在类似的情况下返回负值

```
#{[-5]=1,[-1]=3} 
```

它说：

> 表的长度`t`定义为任何整数索引`n`，例如`t[n]`is not**`nil`**和`t[n+1]`is **`nil`**；

`n=-5``n=-1`在我的例子中会满足这个标准，对吧？

> 此外，如果`t[1]`是**`nil`**，`n`则可以为零。

对，它*可以*为零，但不能保证，对吧？

> 对于从 1 到给定 n 的非 nil 值的常规数组，它的长度正好是 n，它的最后一个值的索引。

这不是这里的情况，所以它不适用。

> 如果数组有“洞”（即**`nil`**其他非 nil 值之间的值），那么 #t 可以是任何直接在**`nil`**值之前的索引（也就是说，它可以将任何这样**`nil`**的值视为数组的末尾）。

这里就是这种情况，所以再次，`n=-5`并且`n=-1`将是有效的返回值，对吗？

我可以完全确定 Lua 总是为示例表或任何其他只包含负索引的表返回 0 吗？如果（假设）我正在编写一个 Lua 解释器并返回其中任何一个值，我会符合规范吗？

**编辑**

显然，Lua 的实现方式，它不会返回负值。我觉得长度运算符的文档有些不足，我看到 Lua 5.2 的文档已经改变。它现在说：

> 除非`__len`给出元方法，否则`t`只有当表是一个*序列*时才定义表的长度，也就是说，对于某个整数*n*，其正数字键的集合等于*{1..n}*。在这种情况下，*n*是它的长度。请注意，像
> 
>  **```
>  {10, 20, nil, 40} 
> ```
> 
> 不是序列，因为它有 key`4`但没有 key `3`。**

 **所以，它现在谈论的是*正*数字键，这就更清楚了。我很聪明，但对文档并不完全满意。当它说“只有在表是序列时才定义长度”时，它还应该说明即使表不是序列也会返回值，但*行为*是未定义的。此外，这个表看起来很像一个序列：

```
a = setmetatable(
  {0},
  {
    __index = function(t,k)
      return k < 10 and k or nil 
    end
  }
)
i = 1
while a[i] do
  print(a[i])
  i = i+1
end
--[[ prints:
0
2
3
4
5
6
7
8
9
]]
print(#a)
-- prints: 1 
```

然而，这变得越来越挑剔，因为很明显，考虑到`__index`可能造成的混乱是没有意义的。Stackoverflow 肯定不是抱怨文档可能更精确的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T22:21:33.203

正如您所注意到的，长度运算符的规范在 5.1 和 5.2 之间发生了变化。

> 我可以完全确定 Lua 总是为示例表或任何其他只包含负索引的表返回 0 吗？

您可以为当前的参考实现，这确保为`ilen`定义

```
function ilen (xs) 
    local i=0
    while xs[i+1] do i=i+1 end
    return i 
end 
```

我们总是有-[在](http://www.lua.org/source/5.2/ltable.c.html)[源代码](http://www.lua.org/source/5.2/ltable.c.html)`#xs >= ilen(xs)`中查看 luaH_getn 的定义。但是规范现在故意不承诺这种行为：一致的实现可以返回或引发异常，以尝试查找不是序列的表的长度。[`ltable.c`](http://www.lua.org/source/5.2/ltable.c.html)`nil`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:38:11.607

来自参考链接中的文本。答案是不。

我认为您令人困惑的是，如果找到 NIL，则表的长度被认为是找到 NIL 的位置-1。

因此，如果 t(1) 为 NIL，则 1 - 1 = 0，因此表长度为 0。

如果表的长度为 5，则下一个位置或 t(6) 为或将为零

```
The length of a table t is defined to be any integer index n such that t[n] is not nil and t[n+1] is nil; moreover, if t[1] is nil, n can be zero. 
```**

# jquery - 构建类似于 expedia 的滑出功能框

> ID：16021815
> 
> 赞同：1
> 
> 时间：2013-04-15T18:03:07.523
> 
> 标签：jquery, html

我正在尝试在我的网站上构建一个滑出功能框（类似于 expedia），它会在 2 秒后动画，保持可见几秒钟，然后再次隐藏。然后我想让它再次出现在第二次不同的文本中。我尝试通过检查元素的位置来进行此操作，但无济于事。

HTML：

```
<div class="viewer">
    <span class="top">Others Are Viewing This Deal</span>
</div> 
```

JS：

```
if ($('.viewer').position().left === -280) {
    $('.viewer').delay(2000).animate({left: '0'}, 1000, 'linear');
    $('.dealViewers .top').prepend(randomViews + " ");
}
else {
    $('.viewer').delay(4000).animate({ left: '-280'}, 1000, 'linear');
} 
```

# oop - 设计模式查询

> ID：16021818
> 
> 赞同：2
> 
> 时间：2013-04-15T18:03:10.230
> 
> 标签：oop, design-patterns

我有一个关于设计模式的问题。

假设我想设计杀猪厂

所以方法将是

1）抓猪

2）干净的猪

3）杀猪

现在因为这些猪是卡车司机提供给我的

现在如果想设计一个应用程序我应该如何进行我所做的是

```
public class killer{  
private Pig pig ;  
public void catchPig(){ //do something };  
public void cleanPig(){ };  
public void killPig(){};  
} 
```

现在是我的事情，因为我知道这些步骤将以 `catchPig--->cleanPig---->KillPig`某种方式调用，所以我应该有一个包含这些方法的抽象类和一个调用所有这 3 个方法的执行方法。

但我不能有抽象类的实例，所以我很困惑如何实现它。请记住，我必须对卡车上的所有猪执行此过程。

所以我的问题是我应该选择什么设计以及哪种设计模式最适合解决这些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:13:38.067

我会建议一种与之前在这里建议的方法不同的方法。

我会做这样的事情：

```
public abstract class Killer {
   protected Pig pig;

   protected abstract void catchPig();

   protected abstract void cleanPig();

   protected abstract void killPig();

   public void executeKillPig {
       catchPig();
       cleanPig();
       killPig();
   }
} 
```

每个 kill 都将扩展`Killer`类并且必须实现抽象方法。每个`executeKillPig()`子类都是一样的，并且总是按照你想要的 catch->clean->kill 的顺序执行。抽象方法受到保护，因为它们是 public 的内部实现`executeKillPig`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:04:24.440

这扩展了 Avi 的答案并解决了评论。

代码要点：

1.  `abstract`强调 IS A 关系的基类
2.  模板模式以确保步骤的顺序正确
3.  策略模式——一个`abstract`类和一个`Interface`（大写的“I”）一样是一个接口（小“i”）。
4.  扩展基础而不使用接口。
5.  没有具体类的耦合。耦合不是`abstract`vs的问题，`interface`而是好的设计。

```
    公共抽象动物{
        公共抽象 bool Escape(){}
        公共抽象字符串 SaySomething(){}
    }

    公共 Wabbit : 动物 {
        public override bool Escape() {//wabbit 疯狂跳跃 }
        public override string SaySomething() { return @"What's Up Doc?"; }
    }

    公共抽象类杀手{
        受保护的动物食品；
        受保护的抽象 void Catch(){}
        受保护的抽象 void Kill(){}
        受保护的抽象 void Clean(){}

        受保护的抽象字符串 Lure(){}

        // 这个方法定义了流程：方法和顺序
        // 那些调用。具体如何执行每个单独的步骤由子类决定。
        // 即使你定义了一个“PigKiller”接口我们也需要这个方法
        // ** 在基类中 ** 以确保所有 Killer 都做对了。
        // 这个方法是子类的模板（模式）。
        受保护的无效FeedTheFamily（动物的东西Tasty）{
            食物=好吃的东西；
            抓住（）;
            杀（）;
            干净的（）;
        }

    }
    公共类 WabbitHunter : 杀手 {
        protected override Catch() { //wabbit 捕捉技术 }
        protected override Kill() { //wabbit 杀戮技术 }
        protected override Clean() { //wabbit 清洁技术 }
        protected override Lure() { return "来吧，你这个傻瓜！"; }

    }

    // 客户端代码 ********************
    公共课 AHuntingWeWillGo {
        杀手猎人；
        动物猎物；

        public AHuntingWeWillGo (Killer aHunter, Animal aAnimal) {
            猎人=猎人；
            猎物=动物；
        }

        公共无效狩猎（）{
            if (!prey.Escape()) 猎人.FeedTheFamily(猎物)
        }
    }

    公共静态无效主要（）{
        // 看，妈！没有耦合。因为我们传入我们的对象
        // 在使用类中新建它们

        杀手 ElmerFudd = new WabbitHunter();
        Animal BugsBunny = new Wabbit();
        AHuntingWeWillGo safari = new AHuntingWeWillGo(ElmerFudd, BugsBunny);

        safari.Hunt();
   }

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:33:08.377

您面临的问题是指称为[多态性的 OOP 的一部分](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)

我将使用接口而不是抽象类，接口与抽象类之间的区别在于接口只有方法描述符，抽象类也可以有方法和实现。

```
public interface InterfaceOfPigKiller {

  void catchPig(); 
  void cleanPig();
  void killPig();
} 
```

在抽象类中，我们实现了三个可用方法中的两个，因为我们假设这些操作对于将从我们的类继承的每个未来类型都是通用的。

```
public abstract class AbstractPigKiller implements InterfaceOfPigKiller{

  private Ping pig; 

  public void catchPig() {
    //the logic of catching pigs. 
  } 

  public void cleanPig() {
   // the logic of pig cleaning. 
  }

} 
```

现在我们将创建两个新类：

*   AnimalKiller - 导致猪死亡的人。

*   AnimalSaver - 负责放生猪的人。

* * *

```
public class AnimalKiller extends AbstractPigKiller { 

 public void killPig() {
   // The killing operation
 }

}

public class AnimalSaver extends AbstractPigKiller {

 public void killPing() {
   // The operation that will make pig free
 }

} 
```

* * *

由于我们有我们的结构，让我们看看它是如何工作的。

首先是执行序列的方法：

```
public void doTheRequiredOperation(InterfaceOfPigKiller killer) {

   killer.catchPig();
   killer.cleanPig();
   killer.killPig();
} 
```

正如我们在参数中看到的，我们不使用 class`AnimalKiller`或`AnimalSever`. 取而代之的是我们的界面。由于这个操作，我们可以对任何实现使用接口的类进行操作。

* * *

示例 1：

```
public void test() {

  AnimalKiller aKiller = new AnimalKiller();// We create new instance of class AnimalKiller and assign to variable aKiller with is type of `AnimalKilleraKiller `
  AnimalSaver aSaver = new AnimalSaver(); //

  doTheRequiredOperation(aKiller);
  doTheRequiredOperation(aSaver);

} 
```

示例 2：

```
public void test() {

  InterfaceOfPigKiller aKiller = new AnimalKiller();// We create new instance of class AnimalKiller and assign to variable aKiller with is type of `InterfaceOfPigKiller `
  InterfaceOfPigKiller aSaver = new AnimalSaver(); //

  doTheRequiredOperation(aKiller);
  doTheRequiredOperation(aSaver);

} 
```

* * *

代码示例 1 和 2 在 method 范围内相同`doTheRequiredOperation`。不同之处在于我们将一次类型分配给类型，而在第二次我们将类型分配给接口。

结论

我们**不能创建**抽象类或接口的新对象，但我们**可以将**对象分配给接口或类类型。

# java - 执行三四天后，通过弹簧停止注入“While True”循环的线程

> ID：16021821
> 
> 赞同：2
> 
> 时间：2013-04-15T18:03:20.623
> 
> 标签：java, multithreading, spring, scope, webserver

我正在开发一个网站，负责提供有关在线广播的信息。网络服务器本身从不同的来源获取信息（有一个由 API 提供的数据库，而且我的流服务器提供了一些 XML 文件，我用它们来动态提取几个重要信息）。

好吧，当我决定基于看门狗线程创建观众警报时，我的问题就开始了，该线程从流服务器读取 XML 文件，更新具有固定长度的数组（360 个位置的长数组，预先分配，所以没什么大的）并由一个 Action 访问，该 Action 返回此数组以通过 java 脚本例程转换为图形。因此，这个看门狗线程需要对每个访问网站的客户端都相同，因为它提供的信息需要对每个人都是平等的。因此，我决定使用 spring 框架来调用启动 Watchdog 线程的服务。

它起作用了，每个网站都看到相同的信息并且信息总是更新......直到我创建的真正线程停止时，数组的最后一个状态被保留，但线程不再工作。

弹簧注射定义如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:sec="http://www.springframework.org/schema/security" xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ehcache="http://www.springmodules.org/schema/ehcache"
    default-autowire="byName"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springmodules.org/schema/ehcache http://www.springmodules.org/schema/cache/springmodules-ehcache.xsd">

    <bean id="wowzaService" class="br.com.imusica.reports.services.radio.WowzaService"/>

</beans> 
```

服务（通过操作访问）编程如下：

```
@Component
@Scope(BeanDefinition.SCOPE_PROTOTYPE)
public class WowzaService extends AbstractService {

    @Autowired
    private WatchDogThread watchdog;

    public void startWatchdog() {
        watchdog.start();
    }

    public WatchDogArray getWatchdogArray() {
        return watchdog.getWatchDogArray();
    }
} 
```

该服务在 ApplicationContextInitializer 类中注入，如下：

```
public synchronized void contextInitialized(ServletContextEvent contextEvent) {
    WebApplicationContext wac = WebApplicationContextUtils.getRequiredWebApplicationContext(contextEvent.getServletContext());

    WowzaService ws = (WowzaService) wac.getBean("wowzaService");
    ws.startWatchdog();

    CacheManager manager = (CacheManager) wac.getBean("cacheManager");
    MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
    ManagementService.registerMBeans(manager, mBeanServer, false, false, false, true);

    cleanUpService = (CleanUpService) wac.getBean("cleanUpService");
    ApplicationContextInitializer.applicationDiskRootPath = contextEvent.getServletContext().getRealPath("/");

    ComplexReportsControllerService complexReportsService =
        (ComplexReportsControllerService) wac.getBean("complexReportsControllerService");
    complexReportsService.cleanUpUnfinishedReports();
    cleanUpService.setRootPath(ApplicationContextInitializer.applicationDiskRootPath);
    cleanUpService.cleanUpAllSessions();
    // StdScheduler schedulerFactoryBean;

    ApplicationContextInitializer.reportsBasePath = (String) wac.getBean("reportsDataPath");

} 
```

看门狗线程被定义为一个组件，上面有一个@Scope(BeanDefinition.SCOPE_SINGLETON)，扩展线程等等。我想知道Spring是否在一段时间后停止了这个线程。我保证，当我更新我的数据数组时，我不会附加信息，而是实际移动值，丢弃最旧的值并插入新值。因此，没有发生内存问题。

在此先感谢您的帮助

若昂布鲁诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T14:25:54.117

Spring 不能停止你的线程，你的线程由于某种原因失败了。

# delphi - 避免在运行时创建的 tcxPageControl 上的重复选项卡

> ID：16021825
> 
> 赞同：0
> 
> 时间：2013-04-15T18:03:47.087
> 
> 标签：delphi, tabs, pagecontrol

我正在使用`tcxPageControl`并`tcxTabSheet`创建几个`Tabs`. 每个`Tab`都是在运行时创建的，基于来自`tbl_Manager`. 这`table`保留了每个员工的经理姓名，并且`Tabs`是经理的姓名。

**问题**

经理的名字重复了很多次，如何避免创建`Tabs`同名，`Tab`每个经理只创建一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:21:18.963

跟踪您之前创建的选项卡，并且只为您未见过的名称创建选项卡。

如果您从 SQL 查询中选择经理名称，`DISTINCT`请使用 so 获得唯一值列表。

您可以将所有经理姓名添加到`TStringList`with`Sorted = True`和`Duplicates = dupIgnore`。添加完所有名称后，您可以回读列表的内容，并且不会重复。

# oracle - ubuntu 12.04 上的 Oracle 11g XE 初始化

> ID：16021826
> 
> 赞同：2
> 
> 时间：2013-04-15T18:03:47.310
> 
> 标签：oracle, ubuntu, oracle11g

我正在关注本教程： [http ://sysadminnotebook.blogspot.com/2012/10/installing-oracle-11g-r2-express.html](http://sysadminnotebook.blogspot.com/2012/10/installing-oracle-11g-r2-express.html)

我成功安装并启动了 oracle 数据库。现在我想从 bash 连接到那个数据库，所以我找到了这个命令：

```
sqlplus sys as sysdba 
```

它要求输入密码，在我的情况下是 oracle，在我提供密码后，我得到：ORA-01031：权限不足

我应该怎么办？

**编辑：** 我需要添加组 dba 并将自己添加到该组。但是我现在有其他问题。我想创建用户，所以我做了：

```
CREATE USER myuser IDENTIFIED BY password
default tablespace users
temporary tablespace temp; 
```

我得到：ORA-01034：ORACLE 不可用。我试过： STARTUP 但我得到了：

ORA-01078: 处理系统参数失败 LRM-00109: 无法打开参数文件'/u01/app/oracle/product/11.2.0/xe/dbs/initXE.ora'

我有'/u01/app/oracle/product/11.2.0/xe/dbs/init.ora'文件但没有initXE.ora

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:18:10.337

o/s 用户是 dba 组的成员吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T08:25:13.077

如果这是一个新安装的Oracle，并且您在/u01/app/oracle/product/11.2.0/xe/dbs/这里没有initXE.ora参数文件，这意味着您需要先创建XE DB。为此，首先运行 /u01/app/oracle/product/11.2.0/xe/bin/createdb.sh 脚本。

# java - 相机意图 ACTION_IMAGE_CAPTURE 并放置额外数据

> ID：16021828
> 
> 赞同：1
> 
> 时间：2013-04-15T18:03:57.577
> 
> 标签：java, android, camera, bundle, extra

我想将额外的数据放入 Intent 相机，这看起来很简单......

几天前它还在工作，但是我对代码、avd 和目标版本进行了很多更改，现在它无法正常工作。

该项目现在在目标版本 11 上。

事实上，我的目标是从我的数据库中传递一个 id 来构造图像名称，但这里有一个简单的代码来说明我的问题。

这是示例代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".CameraTestActivity" >

    <Button
        android:id="@+id/buttonpic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="76dp"
        android:text="Button" />

</RelativeLayout> 
```

-

```
public class CameraTestActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera_test);

        Button buttonpic = (Button)findViewById(R.id.buttonpic);
        buttonpic.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                ///first try to put extra data
                cameraIntent.putExtra("thisone", "ArgumentFrom");

                ///second try to put extra data
                Bundle extras = new Bundle();
                extras.putBoolean("thisalso",true);
                cameraIntent.putExtras(extras);

                ///start camera activty with ID
                startActivityForResult(cameraIntent, 1888); 
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  

        ///if pic is picked and Intent ID is Camera one i.e. 1888
        if (requestCode == 1888 && resultCode == RESULT_OK) {

            ///first try >> Not working
            Bundle extra = getIntent().getExtras();////
            if (extra != null) {
                Log.d("extra: ","isnotnull");
                Boolean inputThatIwant = extra.containsKey("thisone");
                Boolean inputThatIwantBool = extra.containsKey("thisalso");
                Log.d("thisone",inputThatIwant.toString());
                Log.d("thisalso",inputThatIwantBool.toString());
            }

            ///Second try >>  Some Data is back (pic data... ?)
            Bundle extras = data.getExtras();
            if (extras != null) {
                Log.d("extras: ","isnotnull"); /////-->>Print "isnotnull"
                Boolean inputThatIwant = extras.containsKey("thisone");
                Boolean inputThatIwantBool = extras.containsKey("thisalso");
                Log.d("thisone",inputThatIwant.toString()); /////-->>Print "false"
                Log.d("thisalso",inputThatIwantBool.toString()); /////-->>Print "false"
            }
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.camera_test, menu);
        return true;
    }
} 
```

[编辑]我最终如何处理这个问题，它也许可以帮助某人......

我只是在同一个班级内“分享”我的 ID：

```
private String inputid; 
```

当它被相机请求调用时，我在 inputid 字符串中填充了 id，显然在 OnresultActivity 上这个字符串不能为空，所以它的工作方式就这么简单......

但是，如果有人有更好的解决方案，我会接受！

问候....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T16:39:06.730

我不认为它是一个好的 prog 想法，但我创建了 Uri，我将其作为此类的私有静态成员传递，并创建了一个公共静态函数来返回此 Uri，因为在我的情况下，我正在取回导致此类的片段类之一，在其（片段的类）onActivityResult 中，而不是使用为空的 Intent Data 参数（如我发现的那样），我通过调用函数（我创建返回 Uri）直接使用了该 Uri ）。而且....它起作用了:)

# android - 快速关闭和打开时Android Bad Token Exception

> ID：16021829
> 
> 赞同：3
> 
> 时间：2013-04-15T18:04:01.420
> 
> 标签：android, exception, android-intent, android-activity, token

我目前正在开发一个作为意图启动的应用程序。这是我正在使用的标志：

```
 intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);   // don't "zoom", etc. the launch
    intent.setFlags(PendingIntent.FLAG_UPDATE_CURRENT);
    intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

这很好用，但是如果您一遍又一遍地快速打开和关闭它，我会收到此错误：

```
04-15 17:47:05.190: ERROR/AndroidRuntime(13515): FATAL EXCEPTION: main
        android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@408fe608 is not valid; is your activity running?
        at android.view.ViewRoot.setView(ViewRoot.java:530)
        at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
        at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
        at android.view.Window$LocalWindowManager.addView(Window.java:424)
        at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2170)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1668)
        at android.app.ActivityThread.access$1500(ActivityThread.java:117)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:130)
        at android.app.ActivityThread.main(ActivityThread.java:3683)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method) 
```

我做了一些研究，了解到很多人都有这个问题。大多数人收到此错误是因为他们使用带有应用程序上下文的对话框。我的应用程序没有任何对话框。我在整个应用程序中都使用了这个引用。我还放置了一些日志来确定它在哪里崩溃。它发生在`onResume`完成之后。

其他人遇到过这个问题吗？

我在那个错误之上得到了这个。

```
04-15 17:47:05.190: WARN/WindowManager(2233): Attempted to add application window with unknown token HistoryRecord 
```

# interface - 通过 TCP / UDP 使用串行通信

> ID：16021830
> 
> 赞同：0
> 
> 时间：2013-04-15T18:04:01.293
> 
> 标签：interface, serial-port

我有几个通过串行通信（RS-232 和 RS-422）通信的应用程序，我希望它们通过 TCP 或 UDP 通信而不更改它们。另一点是一些应用程序必须在 linux 上运行。我想知道是否有用于此目的的现有工具..

非常感谢！塔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:05:55.010

如果您对串行端口所做的只是读取和写入字节，并且如果不关心精确的时间，那么您可以用 TCP 套接字替换串行端口对象并通过套接字发送完全相同的数据已通过港口发送。最大的复杂性是 TCP 套接字上的时序比串行端口上的*要*宽松得多，而且 TCP 套接字发送“带外”数据的机制与串行端口的不同。

我不知道通过 UDP 发送串行数据的任何标准。从概念上讲，这似乎是一件有用的事情，因为有许多基于串行端口协议的协议，在这些协议中，丢弃无法在特定时间范围内交付的数据比延迟交付更有用。例如，如果串行端口数据的预期接收者是一个嵌入式控制器，它有时会很忙以至于它会丢弃一些传入的数据，但它会在几毫秒内响应它收到的所有内容，那么 TCP 上的一秒钟打嗝连接 [不罕见] 可能会导致希望直接与控制器对话的软件重新传输命令十几次。即使设备能够检测并拒绝接收到的重传，放弃较早的传输请求比延迟交付要好。请注意，为了有用，基于 UDP 的方案必须包含足够的包装逻辑，以保证数据包永远不会乱序传递；一旦数据包的数据已经发送到串行端口，任何后来收到的 UDP 数据包都必须丢弃；接收者可能应该包含逻辑，以便如果收到许多乱序数据包，它会在收到任何序列号不紧跟最后一个的数据包后等待一会儿，以查看丢失的数据包是否在提交之前出现自己丢弃它们。基于 UDP 的方案必须包含足够的包装逻辑，以保证数据包永远不会乱序传递；一旦数据包的数据已经发送到串行端口，任何后来收到的 UDP 数据包都必须丢弃；接收者可能应该包含逻辑，以便如果收到许多乱序数据包，它会在收到任何序列号不紧跟最后一个的数据包后等待一会儿，以查看丢失的数据包是否在提交之前出现自己丢弃它们。基于 UDP 的方案必须包含足够的包装逻辑，以保证数据包永远不会乱序传递；一旦数据包的数据已经发送到串行端口，任何后来收到的 UDP 数据包都必须丢弃；接收者可能应该包含逻辑，以便如果收到许多乱序数据包，它会在收到任何序列号不紧跟最后一个的数据包后等待一会儿，以查看丢失的数据包是否在提交之前出现自己丢弃它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T19:09:28.177

没有标准工具可以做到这一点。我正在考虑开发一个。在这种情况下，UDP 是理想的选择，因为它可以 100% 保证在短 LAN 上没有乱序的数据包传输，就像您的情况一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-20T15:06:14.113

在几个项目中，我使用免费工具 Hercules ( [https://www.hw-group.com/software/hercules-setup-utility](https://www.hw-group.com/software/hercules-setup-utility) ) 进行原型设计和测试阶段。没有广告的意图，只是一个推荐。

# java - 在opencv java包装器中使用方法convertTo

> ID：16021832
> 
> 赞同：2
> 
> 时间：2013-04-15T18:04:06.403
> 
> 标签：java, android, opencv, wrapper, javacv

任何人请帮助我了解如何在 JavaCV 中使用方法 convertTo。我尝试并搜索了很多时间，但没有找到正确的答案。**所以我的问题是**，当我尝试将垫子类型从灰色图像转换为 CV_32F 并尝试在 android 屏幕上显示它时，它不会给我任何结果。这是我的来源：

```
 Imgproc.cvtColor(src, dst, Imgproc.COLOR_RGBA2GRAY, 1); // dst is gray image
    dst.convertTo(dst_f, CvType.CV_32F, 1./255, 0); //convert dst to CV_32F with optional scale
    Imgproc.cvtColor(dst_f, src, Imgproc.COLOR_GRAY2RGBA, 4); // to display it in android before convert to bitmap 
```

我也在用这段代码在opencv C++中尝试过，它运行顺利：

```
 imshow("dst", image);
    cvtColor(image, dst, CV_BGR2GRAY);
    dst.convertTo(dst_f, CV_32F, 1.0/255, 0);
    imshow("dst_f", dst_f); 
```

**更新 ：**

当我尝试在 android 屏幕上在线显示图像时，我认为我错了。我不知道如何显示它，尽管我知道 android 需要 4 个通道才能在屏幕上显示图像。但是当我将灰色转换为 CV_32F 图像类型并尝试使用与上面相同的代码进行显示时，它运行平稳而**没有任何结果。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T15:17:59.890

经过一些研究和实验，我得到了我的黄金答案，这里是：

Android 只能在屏幕上显示 4 通道图像，因此您需要将其转换为 4 通道 (RGBA)，但在转换为 RGBA/BGRA 之前，您必须将 Mat 图像更改为具有相同比例的 CV_8U。看看这个例子：

```
Imgproc.cvtColor(src, dst, Imgproc.COLOR_RGBA2GRAY, 1); 
dst.convertTo(dst_f, CvType.CV_32F, 1./255, 0);    
dst_f.convertTo(final, CvType.CV_8U, 255, 0); 
Imgproc.cvtColor(final, src, Imgproc.COLOR_GRAY2RGBA, 4); 
```

使用上面的代码，您的代码将在 Android 屏幕上完美运行，但如果您尝试将其保存为 jpg 图像或其他图片扩展名，它会给您一张损坏的图片。如果你想把它保存到 sdcard 你可以使用这个源：

```
Imgproc.cvtColor(src, dst, Imgproc.COLOR_RGB2GRAY, 1);
dst.convertTo(dst_f, CvType.CV_32F, 1.0/255, 0); // Convert Mat image to CV_32F and scale it to 1.0/255
dst_f.convertTo(final, CvType.CV_32F, 255, 0); //Convert it Back to Default type before
Imgproc.cvtColor(final, roi, Imgproc.COLOR_GRAY2RGB, 0);
Imgproc.cvtColor(roi, roi, Imgproc.COLOR_RGB2RGBA, 0); 
```

以上是我自己的实验，如果你想问我什么，我会尽量回答。谢谢。希望这对其他人有很大帮助

# magento - Paypal 和 PaypalUk 有什么区别？

> ID：16021834
> 
> 赞同：2
> 
> 时间：2013-04-15T18:04:11.047
> 
> 标签：magento, paypal

我正在与贝宝合作。我们的商店使用 PaypalUk 而不是 Paypal。我不知道为什么。Paypal 和 PaypalUk 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:12:41.297

我不确定 PayPal 指的是您的商店所指的具体服务，因为它可能指的是 Website Payments Pro、Express Checkout 或 Website Payments Standard。您的商店很可能将 PayPalUK 称为 Payflow 集成方法。如果您设置了 Website Payments Pro，您将使用 API 用户 ID、密码和签名或证书。Payflow 集成通过不同的端点，变量不同，您为您的凭据传递用户、供应商、合作伙伴和密码。您应该能够进入商店中不同服务的设置页面，查看它们是否要求提供用户、供应商、合作伙伴和密码。

# c++ - 随机出现的字符

> ID：16021844
> 
> 赞同：0
> 
> 时间：2013-04-15T18:04:49.370
> 
> 标签：c++

当我调试我的程序时，它会在输出带星号的行时输出随机的字符流。

```
int main ()
{
string inputPuzzle;
cout << "Enter a word or set of words: ";
getline(cin, inputPuzzle);
char* puzzle = new char[inputPuzzle.size()+1];
memcpy(puzzle, inputPuzzle.c_str(), inputPuzzle.size()+1);
puzzle[inputPuzzle.size()+1] = '';
int strikes = 0;
char userInput;
char* userSoln = new char[inputPuzzle.size()];
for (int i = 0; i < inputPuzzle.size(); i++)
{
    userSoln[i] = '-';
    if (puzzle[i] == ' ')
    {
        userSoln[i] = ' ';
    }
}
bool solved = false;
int numberOfLetters;
for (;;)
{
    numberOfLetters = 0;
    cin >> userInput;
    for (int i = 0; i < inputPuzzle.size(); i++)
    {
        if (userInput == puzzle[i])
        {
            numberOfLetters++;
            userSoln[i] = puzzle[i];
        }
    }
    if (numberOfLetters == 0)
    {
        cout << "There are no " << userInput << "'s\n" ;
        strikes++;
    }
    else
    {
        cout << "There are " << numberOfLetters << " " << userInput << "'s\n";
    }
    if (userSoln == puzzle)
    {
        break;
    }
    if (strikes == 10)
    {
        break;
    }
    **cout << "PUZZLE: " << userSoln << "\n";**
    cout << "NUMBER OF STRIKES: " << strikes << "\n";
}
if (strikes == 10)
{
    cout << "Sorry, but you lost. The puzzle was: " << puzzle;
}
else
{
    cout << "Congratulations, you've solved the puzzle!!! YOU WIN!!!!!";
    }
} 
```

我试过清除 cin 缓冲区，但什么也没做。我也有所有必要的包含文件（字符串和 iostream），所以这不是问题，我在 main 方法上方有命名空间 std。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:11:36.340

这不是一个有效的字符常量。

```
puzzle[inputPuzzle.size()+1] = ''; 
```

如果您打算使用终止字符，则应该是

```
puzzle[inputPuzzle.size()+1] = '\0'; 
```

要不就

```
puzzle[inputPuzzle.size()+1] = 0; 
```

或者你可以替换*这两行*

```
memcpy(puzzle, inputPuzzle.c_str(), inputPuzzle.size()+1);
puzzle[inputPuzzle.size()+1] = ''; 
```

和[`strcpy`](http://en.cppreference.com/w/cpp/string/byte/strcpy)

```
strcpy(puzzle, inputPuzzle.c_str()); 
```

**编辑：**

`userSoln`在打印之前，您还需要在末尾放置一个终止字符。

```
userSoln[ inputPuzzle.size() ] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:15:11.283

```
puzzle[inputPuzzle.size()+1] = ''; 
```

应该

```
puzzle[inputPuzzle.size()+1] = '\0'; 
```

您试图将空终止符添加到字符串的末尾以表示结束，但 '' 不完全是。

# asp.net - HTML.Raw 和 li 解析错误？

> ID：16021846
> 
> 赞同：1
> 
> 时间：2013-04-15T18:04:55.960
> 
> 标签：asp.net, html, asp.net-mvc, razor

我的 ASP.NET MVC 网站中有以下代码：

```
@foreach (var item in Model.Comments.Where(c=>c.CommentId == Model.CurrentNode))
{
    if(Model.Level == 0){
        @Html.Raw("<li style=\"border:none;\">")
    }
    else
    {
        @Html.Raw("<li>")
    } 
```

尝试访问此页面时，出现以下异常：

**解析器错误消息：遇到没有匹配开始标记的结束标记“li”。您的开始/结束标签是否正确平衡？**

我尝试了很多不同的选项，但无法让它发挥作用。

编辑1：

```
@if (!Model.CurrentNode.HasValue)
{
    @Html.Raw("<div class=\"comment-root\" id=\"comment-root\">")
    @*hid911 Tells what voteKey to use for this section*@
    <input pid="hidVoteKey" type="hidden" value="1" />
}
<ul class="commentList sub">
@foreach (var item in Model.Comments.Where(c=>c.CommentId == Model.CurrentNode))
{
    if(Model.Level == 0){
        <li style="border:none;">
    }
    else
    {
        <li>
    }

            @if(!item.Deleted)
            {
                <div class="commentBack">
                    @if (Request.IsAuthenticated && uFeed.Handlers.AccountHandler.UserContextInstance.Id != item.CreatedBy.Id)
                    {
                        @Html.Partial("VotePartial", item.VoteViewModel)    
                    }
                    else                    
                    {
                        <div style="float:left; width: 30px; ">&nbsp;</div>                                                
                    }
                    <div class ="floatLeft" style="width: 90%">
                        <div class="CommentHeader" id="commentHeader-@item.Id">
                            <p class="Timestamp dimText">
                                @Html.ActionLink(item.CreatedBy.Text, "User/" + item.CreatedBy.Text, "Post")
                                | @item.VoteBalance  poäng | 
                                @Html.GetDisplayDate(item.CreatedDate)
                            </p>

                        </div>
                        <div id="commenttext-@item.Id" class="commentText"> 
                            @item.Text
                        </div>
                        <div id="comment-@item.Id" class="CommentFooter">
                            @if (Request.IsAuthenticated)
                            {
                                <div  class="floatLeft">
                                    @Html.ActionLink("Svara", string.Empty, null, new { id= "respond-" + item.Id, href = "#comment", @class = "respond" })
                                </div>  
                            }                                 
                            @if (Request.IsAuthenticated && uFeed.Handlers.AccountHandler.UserContextInstance.Id ==item.CreatedBy.Id)
                            {
                                <div class="floatLeft" id="divremove-@item.Id">         
                                &nbsp; - &nbsp;@Html.ActionLink("Editera",  string.Empty, null, new { id= "edit-" + item.Id, href = "#comment", @class = "edit" })
                                &nbsp; - &nbsp;@Html.ActionLink("Ta bort", string.Empty, null, new { id="remove-"+item.Id, @class = "remove"})
                                </div>                                                     
                                <div  class="floatLeft hidden" id="divconfirmremove-@item.Id">&nbsp; - &nbsp;Ta bort?
                                @Html.ActionLink("Ja", string.Empty, null, new { id = "confirm-remove-yes-" + item.Id, @class = "confirm-remove-yes" })
                                    /                                                                           
                                @Html.ActionLink("Nej", string.Empty, null, new { id = "confirm-remove-no-" + item.Id, @class = "confirm-remove-no" })
                                </div>

                            }

                            @if(Model.Comments.Any(c=>c.CommentId == item.Id))
                            { 
                                @Html.Raw("&nbsp; - &nbsp;")
                                @Html.ActionLink("Dölj kommentarer", string.Empty, null, new { id = "toggle-" + item.Id, Href = "#togglecomments", @class = "toggle active" })
                            }
                            <div style="clear:both;"></div>     
                        </div>
                    </div>
                    <div style="clear:both;"></div>
                </div>
            }
            else
            {
                <div class="commentBack">
                    <div style="float:left; width: 30px; height: 30px">&nbsp;</div>
                        <div style="float:left">
                            <div class="commentText" ><i>[Borttagen]</i></div>
                            <div id="comment-@item.Id" class="CommentFooter">
                                @if(Request.IsAuthenticated)
                                {
                                    <div  class="floatLeft">
                                        @Html.ActionLink("Svara", string.Empty, null, new { id= "respond-" + item.Id, href = "#comment", @class = "respond" })
                                    </div> 
                                }
                                @if(Model.Comments.Any(c=>c.CommentId == item.Id))
                                { 
                                    @Html.Raw("&nbsp; - &nbsp;")
                                    @Html.ActionLink("Dölj kommentarer", string.Empty, null, new { id = "toggle-" + item.Id, Href = "#togglecomments", @class = "toggle active" })
                                }
                            </div>
                         </div>

                    <div style="clear:both;"></div>

                </div>
            }
            <div id="comments-for-@item.Id" class="CommentContainer">
                    @Html.Partial("CommentPartial", new uFeed.Views.ViewModels.CommentTreeItemViewModel(item.Id, Model.Comments, Model.Level + 1))
            </div>

            <div style="clear:both;"></div>
    </li>
}
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:56:41.940

您不需要 Html.Raw，因为您实际上并未输出包含 HTML 的代码变量。这应该可以正常工作：

```
@foreach (var item in Model.Comments.Where(c=>c.CommentId == Model.CurrentNode))
{
    if(Model.Level == 0){
       <li style="border:none;">
    }
    else
    {
       <li>
    } 
```

你可能可以进一步简化这个......

```
@foreach (var item in Model.Comments.Where(c=>c.CommentId == Model.CurrentNode))
{
    <li @(Model.Level == 0 ? "style=\"border:none;\"" : "")> 
```

# sql - 更新多条记录失败

> ID：16021849
> 
> 赞同：0
> 
> 时间：2013-04-15T18:05:04.530
> 
> 标签：sql, sql-server, sql-server-2008

如何更新 SQL Server 2008 中的多条记录？我想运行以下查询，但失败了：

```
UPDATE TABLE SET type = 1 WHERE type is NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:07:25.810

使用这样的东西

```
Update T
SET type = 1
FROM [Table] as T
WHERE type IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T22:02:54.487

听起来您可能在失败的 [Table] 上有一个触发器。这通常会发生，因为触发器并非旨在一次处理多个更新。如果表上有触发器，请确保它正确使用 INSERTED 和 DELETED 表。

# android-fragments - 从Activity获取数据到FragmentDialog

> ID：16021853
> 
> 赞同：0
> 
> 时间：2013-04-15T18:05:25.423
> 
> 标签：android-fragments

如何使用 Activity 中的文本在 FragmentDialog 中设置标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:25:00.677

您可以尝试使用参数来这样做：

关于你的活动：

```
Bundle arguments = new Bundle();
Fragment fragment = new YourDialogFragment();
arguments.putSerializable(KEYNAME, YOUR_SERIALIZABLE_ITEM);
fragment.setArguments(arguments);               
getFragmentManager().beginTransaction().add(R.id.your, fragment).commit(); 
```

在您的片段上：

```
if (getArguments().containsKey(KEYNAME))
(ObjectType) getArguments().getSerializable(KEYNAME); 
```

# php - 谷歌浏览器网址

> ID：16021854
> 
> 赞同：1
> 
> 时间：2013-04-15T18:05:29.110
> 
> 标签：php, session

**任务：**在谷歌查看器中查看 pdf 并且用户无法在查看源中看到原始 pdf 路径/url。所以我决定通过使用会话在 php 中传递 pdf url

**查看器.php**

```
<?php
session_start();
$_SESSION['url']= 'http://research.google.com/archive/bigtable-osdi06.pdf';
?>
<iframe src="http://docs.google.com/viewer?url=http://sitename.com/pdf.php&embedded=true" width="600" height="780" style="border: none;"></iframe> 
```

**pdf.php**

```
<?php
session_start();
header('Content-type: application/pdf');
readfile($_SESSION['url']);
?> 
```

我使用 var_dump 检查 pdf.php 会话变量，它正确返回[http://research.google.com/archive/bigtable-osdi06.pdf](http://research.google.com/archive/bigtable-osdi06.pdf)，但在 google 查看器中不起作用。

但是，当我将 url 直接放在 yo readfile 中时，它可以工作。例如

```
readfile('http://research.google.com/archive/bigtable-osdi06.pdf'); 
```

或者

```
$a = 'http://research.google.com/archive/bigtable-osdi06.pdf';
readfile($a); 
```

请帮助我，为什么会话变量在 readfile 中不起作用

*对不起我的英语不好*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:02:39.163

可以说这是错误的 cookie（会话）上下文。当您设置 $_SESSION 时，您的浏览器是客户端`A`。然后您打开 iframe 并要求通过 Google 作为客户端`http://docs.google.com/viewer?`下载您的（检查您的 http 服务器日志，有两个 IP）并将结果作为查看器应用程序放入您的浏览器，**但您没有为客户端设置 cookie**。 你应该做什么： 看起来你需要使用 rawurlencode() 在 iframe url 中设置会话 ID。`pdf.php``B`**`B`**

**查看器.php**

```
<?php
session_start();
$_SESSION['url']= 'http://research.google.com/archive/bigtable-osdi06.pdf';
?>
<iframe src="http://docs.google.com/viewer?url=<?php 
    // set current session_id for feature Google GET request
    echo rawurlencode("http://sitename.com/pdf.php?PHPSESSID=".session_id()); 
  ?>&embedded=true" width="600" height="780" style="border: none;"></iframe> 
```

**pdf.php**

```
<?php
session_id($_GET['PHPSESSID']); // we use $_GET, not COOKIE
session_start();
header('Content-type: application/pdf');
readfile($_SESSION['url']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:10:05.297

session_start() 本身是会话密钥的特定 cookie 处理的包装器。它可以由 定义`session_set_save_handler()`。简而言之，它还修改了标题。

如果您在 php 脚本的顶部使用 session_start() 并且稍后在脚本中调用 header() 来下载文件，那么您必须添加某种形式的缓存控制以使 IE 正常工作。我使用 header('Cache-Control: public'); 在脚本顶部的代码之后立即使用 session_start() 调用验证我有一个正确登录的用户。这允许 header() 和 fpassthru() 调用稍后在使用 IE 5.5 SP2 的脚本中下载文件。

# android - 如何在red5（服务器）和android（客户端）之间进行视频聊天？

> ID：16021856
> 
> 赞同：3
> 
> 时间：2013-04-15T18:05:40.510
> 
> 标签：android, red5

在尝试了很多之后，我没有使用 red5（服务器）和 android（客户端）进行简单的视频聊天。

我需要做两种视频聊天。一端是我的安卓应用程序，另一端是安卓浏览器/桌面浏览器。两端应该通信。

有没有可能？如果有那么我应该从哪里开始。如果有任何例子，它会更有帮助。

注意：我使用的是 ubuntu 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T22:55:49.933

完成此操作的最简单方法是使用 Adob​​e AIR for mobile。如果您有任何使用 Flash、Flex 或 AS3 的经验，您应该可以立即启动并运行。

# css - 图像重叠导航子菜单

> ID：16021857
> 
> 赞同：0
> 
> 时间：2013-04-15T18:05:42.790
> 
> 标签：css, wordpress, z-index

我在 wordpress 网站上解决这个重叠问题时遇到了很大的麻烦。我正在处理这个[http://dev.chrisosheaphotography.com/home/](http://dev.chrisosheaphotography.com/home/)，我在“投资组合”下有子菜单，但图像与子菜单重叠，它隐藏在图像的后面。我希望子菜单出现在图像前面。

我尝试使用 z-index: -1; 对于#wrapper，但它不起作用。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:09:54.573

它很容易解决，只需将相对定位和正 z-index 添加到：

```
<div class="sub-menu sub-menu-1"></div> 
```

例如

```
.sub-menu {
 position: relative;
 z-index: 1000; 
 } 
```

您还应该尝试为您的问题添加一些代码和上下文，这样它就不会因为过于本地化而被关闭..

# ruby-on-rails - Rails 中用于社交应用的全局 i18n

> ID：16021858
> 
> 赞同：1
> 
> 时间：2013-04-15T18:05:43.743
> 
> 标签：ruby-on-rails, internationalization

我正在创建一个可能有不同语言的社交应用程序。我不想遵循 Rails 手册中描述的模式，该模式为不同的语言使用不同的 URL 参数。例如：

```
http://example.com/pt/books 
```

我想设置这样的东西：

*   当用户进入站点（未注册）时，区域设置由浏览器语言配置文件自动定义。（可能当前语言环境将保存在 cookie 中）。如果没有与浏览器语言匹配的语言，则默认为英语。

*   当用户填写注册表时，浏览器提供的当前语言将保存在数据库中的 users 表中，因此即使浏览器的默认语言与登​​录用户的默认语言不同，最后的语言也会是主要语言。这次不会将语言环境保存在 cookie 中。

*   LOGGED 用户可以选择更改配置页面中的语言。这将影响数据库条目。

*   VISITOR 用户可以选择更改主页中的语言。这会影响 cookie。可能会有更改此选项的路线，例如：

    ```
    http://example.com/changelanguage/en 
    ```

那么，创建这样的东西的最好和更简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:44:54.873

查看[locale_setter](https://github.com/jcasimir/locale_setter) gem，它应该完全符合您的要求。

# c# - 使用日期时间字段选择返回无效结果的查询

> ID：16021859
> 
> 赞同：0
> 
> 时间：2013-04-15T18:05:44.840
> 
> 标签：c#, mysql

我有一个用这个内容`DateTime`命名的字段，然后我做这个查询 `dt_cadastro``15/04/2013 11:14:59`

```
SELECT descricao, dt_cadastro
      FROM MyTable
      WHERE dt_cadastro   >= '11/05/2013 00:00:00' AND dt_cadastro <= '11/05/2013 23:59:59'; 
```

它确实将这一行归还给我。为什么 ？如果我指定的`DateTime`值大于我桌子上的日期......有人可以向我解释一下吗？我正在尝试进行查询以返回日期间隔内的所有行，例如`Where dt_cadastro >= @date1 AND dt_cadastro <= @date2`. 但是当它应该返回我时它仍然返回我行`EmptySet`。我正在使用 C# - Asp.net。
我也尝试过使用`Between`，但使用`between`它时永远不会返回任何值......
`Sample`

```
 string sql = "SELECT proj.descricao AS projeto, func.descricao AS funcionalidade, clb.clube AS cliente, ch.descricao
              FROM MyTable ch 
                   INNER JOIN projetos proj ON ch.projeto = proj.id 
                   INNER JOIN funcionalidades func ON ch.funcionalidade = func.id 
                   INNER JOIN clubes clb ON ch.clube = clb.id
              WHERE ch.dt_cadastro >= @dt_inicial AND ch.dt_cadastro <= @dt_final";

 MySqlCommand cmd = new MySqlCommand();
 cmd.CommandType = CommandType.Text;
 cmd.CommandText = sql;
 cmd.Parameters.Add(new MySqlParameter("@dt_inicial", MySqlDbType.DateTime)).Value = rel.Dt_Inicial;  
 cmd.Parameters.Add(new MySqlParameter("@dt_final", MySqlDbType.DateTime)).Value = rel.Dt_Final; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:36:38.467

我解决了这个问题......我只需要重新启动`MySql`并重新打开我的`Sql Manager`......我不知道为什么或是什么导致了这些麻烦，但是在我重新启动两个之后，它工作正常！

# javascript - 如何使用 Jquery 从选定的标签数组中选择特定标签

> ID：16021860
> 
> 赞同：1
> 
> 时间：2013-04-15T18:05:50.083
> 
> 标签：javascript, jquery

我正在选择 href 属性以“picThumbImgA_”开头的所有标签，如下所示。

`$('a[id^="picThumbImgA_"])')`

现在我想更新前四个标签的一些属性。我可以先选择

`$('a[id^="picThumbImgA_"]):first')`

和最后一样`$('a[id^="picThumbImgA_"]):last')` 奇数`$('a[id^="picThumbImgA_"]):odd')` 和偶数`$('a[id^="picThumbImgA_"]):even')`

但是我怎样才能只处理前四个标签。

请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:08:05.170

您可以尝试从零开始的索引选择器`:lt()`，例如：

```
$('a[id^="picThumbImgA_"]):lt(4)') 
```

来自[jQuery 的文档](http://api.jquery.com/lt-selector/)：

> 选择匹配集中索引小于索引的所有元素。

您也可以使用`:nth-child()`，例如：

```
$('a[id^="picThumbImgA_"]):nth-child(-n+4)') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T18:09:20.420

您可以使用 jQuery [each()](http://api.jquery.com/each/)函数并在处理完前 4 个时通过 return false 退出该函数。

```
$('a[id^="picThumbImgA_"])').each(function(index, el) {
    if(index < 4) {
        //do something
    } else {
        return false;
    }
}); 
```

# c - 临界区定义

> ID：16021861
> 
> 赞同：0
> 
> 时间：2013-04-15T18:05:52.663
> 
> 标签：c, linux, operating-system, pthreads, critical-section

在下面的示例代码中，“关键部分”在哪里？在“sem_wait()”之后？

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <pthread.h>
#include <semaphore.h>

void * thread_snd(void *arg);
void * thread_rcv(void *arg);
sem_t bin_sem;
int number=0;

char thread1[]="A Thread";
char thread2[]="B Thread";
char thread3[]="C Thread";

int main(int argc, char **argv)
{
    pthread_t t1, t2, t3;
    void *thread_result;
    int state;
    state = sem_init(&bin_sem, 0, 0);

    pthread_create(&t1, NULL, thread_snd, &thread1);
    pthread_create(&t2, NULL, thread_rcv, &thread2);
    pthread_create(&t3, NULL, thread_rcv, &thread3);
    pthread_join(t1, &thread_result);
    pthread_join(t2, &thread_result);
    pthread_join(t3, &thread_result);
    printf("number : %d \n", number);
    sem_destroy(&bin_sem);

    return 0;
}

void * thread_snd(void * arg)
{
    int i;
    for(i=0; i<4; i++)
    {
        while(number != 0)
            sleep(1);
        number++;
        printf("%s, number : %d \n", (char*)arg, number);
        sem_post(&bin_sem);
    }
}

void * thread_rcv(void * arg)
{
    int i;
    for(i=0; i<2; i++)
    {
        sem_wait(&bin_sem);
        number--;
        printf("%s, number : %d \n", (char*)arg, number);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:11:28.420

提供的代码中实际上没有“关键部分”，只有“同步点”，是的，这是用信号量实现的。临界区也可以用信号量来实现，但是线程必须同时使用两者`sem_wait()`，`sem_post()`但在大多数情况下，互斥锁用于临界区（如果只有一个线程应该进入它）。

# objective-c - 在 Objective-c 中的单例类上设置初始化可配置变量的好方法是什么？

> ID：16021862
> 
> 赞同：3
> 
> 时间：2013-04-15T18:05:59.203
> 
> 标签：objective-c, singleton

Nomaly 我曾经用以下配方构建一个单例：

```
+ (MyClass *)sharedInstance 
{       
    static MyClass *_sharedInstance = nil;
    static dispatch_once_t oncePredicate;

    dispatch_once(&oncePredicate, ^{
        _sharedInstance = [[self alloc] init];
        // Init variables
    });

    return _sharedInstance;
} 
```

然后我可以调用如下方法：

```
[[MyClass sharedInstance] anyInstanceMethod]; 
```

但是，当任何初始化变量都可以从类外部配置时会发生什么？我的方法是创建两个类方法，其中一个带有可配置变量：

```
+ (MyClass *)sharedInstanceWithVariableOne:(NSString*)aParamOne andVariableTwo:(NSString*)aParamTwo 
{       
    static MyClass *_sharedInstance = nil;
    static dispatch_once_t oncePredicate;

    dispatch_once(&oncePredicate, ^{
        _sharedInstance = [[self alloc] init];

        // Init configurables variables
        _sharedInstance.paramOne = aParamOne;
        _sharedInstance.paramTwo = aParamTwo;
    });

    return _sharedInstance;
} 
```

第二个作为最后一个的代理，具有默认值：

```
 + (MyClass *)sharedInstance
    {       
        return [MyClass sharedInstanceWithVariableOne:@"value1" andVariableTwo:@"value2"];
    } 
```

所以，如果你想使用带有配置变量的单例类，你应该首先调用`sharedInstanceWithVariableOne:andVariableTwo`，然后只调用`sharedInstance`. 我认为这种方法不是最好的，我期待使用其他方法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:36:04.167

感谢您的快速回复。正如你所说，它不是单例。我将使用与`[NSURLCache setSharedURLCache:]`and相同的行为`[NSURLCache sharedURLCache]`。

界面

```
// MyClass.h
@interface MyClass : NSObject

+ (MyClass *)sharedMyClass;
+ (void)setSharedMyClass:(MyClass *)object;

- (id)initWithParamOne:(NSString)p1 andParamTwo:(NSString)p2;
@end 
```

执行

```
// MyClass.m
@interface MyClass ()
@property(nonatomic, strong) NSString *paramOne;
@property(nonatomic, strong) NSString *paramTwo;
@end;

@implementation MyClass

static MyClass *_sharedInstance = nil;

+ (MyClass *)sharedMyClass
{
    if (_sharedInstance == nil) {
        _sharedInstance = [[MyClass alloc] initWithParamOne:@"value1" andParamTwo:@"value2"];
    }

    return _sharedInstance ;
}

+ (void)setSharedMyClass:(MyClass *)object
{
    _sharedInstance = object;
}

- (id)initWithParamOne:(NSString)p1 andParamTwo:(NSString)p2
{
    self = [super init];
    if (self) {
        _paramOne = p1;
        _paramTwo = p2;
    }

    return self;
} 
```

然后我可以使用`[[MyClass sharedMyClass] anyMethod]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:19:45.250

有许多方法可以设计您所追求的*共享实例*。（它不是许多评论指出的*单例*，因为该类必须只有*一个*实例。但是，共享实例模式通常用作“穷人”的单例，没有直接调用任何`init`方法。回到问题...）也许以下内容适合您：

```
+ (void) setSharedInstanceParameterOne:(NSString*)aParamOne
                       andParameterTwo:(NSString*)aParamTwo 
{       
   MyClass *_sharedInstance = self.sharedInstance;
   _sharedInstance.paramOne = aParamOne;
   _sharedInstance.paramTwo = aParamTwo;
} 
```

现在您可以`[MyClass setSharedInstanceParameterOne:p1 andParameterTwo:p2]`用来设置/更改共享实例的参数，并且`[MyClass sharedInstance]`（或者`MyClass.sharedInstance`，尽管有些人可能对此进行了哲学讨论）来访问它。

# c# - 我已将数字绑定到 CombBox。我想更改值组合框和文本框更改值

> ID：16021865
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:06:27.747
> 
> 标签：c#, mvvm, windows-8, combobox, textbox

我想更改数字`ComboBox`并更改`TextBox`.

（例如，我有数字 = 2，内容位于“lblblblb” ofc。这是在`ObservableCollection<string>`，所以我打电话`ContentWithListView[SelectNumberStep]`）

**ReadPage.xaml**

```
<TextBox HorizontalAlignment="Left" Margin="580,154,0,0" 
 TextWrapping="Wrap" Text="{Binding ContentWithListView[SelectNumberStep],Mode=TwoWay}"
 VerticalAlignment="Top" Width="725" Height="82"/>

<ComboBox HorizontalAlignment="Left" Margin="440,154,0,0" 
 ItemsSource="{Binding NumberStep,Mode=TwoWay}" 
 SelectedItem="{Binding SelectNumberStep,Mode=TwoWay}" 
 VerticalAlignment="Top" Width="95" Height="77" /> 
```

如何从 CombBox 数字更改 TextBox 中的内容？

**读取视图模型.cs**

```
private ObservableCollection<string> contentWithListView;
public ObservableCollection<string> ContentWithListView
{
    get
    {
        return this.contentWithListView;
    }

    set
    {
        this.contentWithListView = value;
    }
}

private ObservableCollection<int> stepNumber;
public ObservableCollection<int> NumberStep
{
    get
    {
        return this.stepNumber;
    }

    set
    {
        this.stepNumber = value;
    }
}

private int selectNumberStep;
public int SelectNumberStep
{
    get
    {
        return this.selectNumberStep;
    }

    set
    {
        this.selectNumberStep = value;    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:58:47.080

我会更改您的视图模型代码，以便文本框绑定到一个标量字符串值，该值会在`SelectNumberStep`更改时更新：

```
public string Content
{
   get
   { 
      // bounds checking here..
      return contentWithListView[this.SelectNumberStep];
   }
}

public int SelectNumberStep
{
    get
    {
        return this.selectNumberStep;
    }

    set
    {
        this.selectNumberStep = value;
        this.NotifyOfPropertyChange(() => this.SelectNumberStep);
        this.NotifyOfPropertyChange(() => this.Content);
    }
}

<TextBox Text="{Binding Content}" ... /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:46:09.740

先前的答案没有整合文本框内容必须在 TwoWays 中的事实，因此，在这种情况下，您可以将您的属性与 INotifyPropertyChanged 接口合并，如下所示：

***Xaml 部分***

```
<StackPanel d:DataContext="{d:DesignInstance Type=classes:StackOverFlowX }">

    <TextBox Text="{Binding Content, Mode=TwoWay}"/>

    <ComboBox ItemsSource="{Binding NumberStep, Mode=TwoWay}" 
              SelectedItem="{Binding SelectNumberStep,Mode=TwoWay}"/>

</StackPanel> 
```

***班级***

```
using System.ComponentModel;
using System.Runtime.CompilerServices;

public class StackOverFlowX : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public StackOverFlowX()
    {

    }

    private ObservableCollection<string> contentWithListView;
    public ObservableCollection<string> ContentWithListView
    {
        get
        {
            return this.contentWithListView;
        }

        set
        {
            this.contentWithListView = value;
            OnPropertyChanged();
        }
    }

    private ObservableCollection<int> stepNumber;
    public ObservableCollection<int> NumberStep
    {
        get
        {
            return this.stepNumber;
        }
        set
        {
            this.stepNumber = value;
            OnPropertyChanged();
        }
    }

    private int selectNumberStep;
    public int SelectNumberStep
    {
        get
        {
            return this.selectNumberStep;
        }
        set
        {
            this.selectNumberStep = value;
            OnPropertyChanged();
            OnPropertyChanged("Content");
        }
    }

    private string _content;
    public string Content
    {
        get
        {
            return contentWithListView[this.SelectNumberStep];
        }
        set
        {
            this._content = value;

            if (contentWithListView.IndexOf(value) > -1)
            {
                SelectNumberStep = contentWithListView.IndexOf(value);
                OnPropertyChanged("SelectNumberStep");
            }

            OnPropertyChanged();

        }
    }

    protected void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        var eventHandler = this.PropertyChanged;
        if (eventHandler != null)
        {
            eventHandler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

} 
```

# javascript - Windows phone 8 中的应用程序设置，使用 javascript

> ID：16021867
> 
> 赞同：2
> 
> 时间：2013-04-15T18:06:34.883
> 
> 标签：javascript, windows-phone-8

我正在使用 HTML5/JavaScript 为 WP8 开发应用程序。我在 JavaScript 中的数组变量中收集用户设置，并且非常希望保存这些以供将来使用。并将它们保存在漫游设置中以更精确。

经过一番研究，这似乎是不可能直接从 js。我发现在 Windows 8 中执行此任务的 API 调用在 WP8 下不起作用。所以我能想到的唯一解决方法是结构：

1）当我想保存数据时，我从 js

```
window.external.notify("LaunchSaveProcess"); 
```

向浏览器发送通知。

2) 在 XAML 文件中

```
<phone:WebBrowser ScriptNotify="Catch_Script_Notification" /> 
```

将通知从浏览器传递到 c#

3）在c#中捕获通知

```
private void Catch_Script_Notification(object sender, NotifyEventArgs e)
{ if (e.Value.StartsWith("LaunchSaveProcess")) {
            //"important function"
} } 
```

4）“重要函数”调用JavaScript中的一个方法，该方法返回用户设置数组，然后继续使用保存数据

```
var userSettings = Browser.InvokeScript("getSettings()");
var roamingSettings = Windows.Storage.ApplicationData.Current.RoamingSettings;
roamingSettings.Values["settings"] = userSettings; 
```

现在几个问题。这个模型是正确的，还是有更简单的方法？在制作通知事件时，你能以某种方式直接从 JavaScript 向 c# 传递参数吗？我可以将数组直接保存到 roamingSettings 中，还是需要将其砍掉并将所有内容分开保存？

为澄清起见，usersettings 数组是一维数组，我在其中推送带有“键”和“值”对的对象。因此，我可以使用 userSettings[i].key 和 .value 语法轻松访问循环内的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:16:07.283

`Windows.Storage.ApplicationData.Current.RoamingSettings`在 Windows Phone 8上**[不受支持](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingsettings)**，但在 Windows Phone 8.1 中受支持。相反，您可以只使用独立存储。

您可以使用 NuGet 中的[Coding4Fun.Toolkit.Storage](https://nuget.org/packages/Coding4Fun.Toolkit.Storage/)包，只需调用`Serialize.Save("PATH", objectToSave)`即可保存项目并`var result = Serialize.Open<TypeOfObject>("PATH")`取回数据。

**注意：**从工具包的下一个版本开始，`Serialize`将是`Serializer`. 仅供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:00:06.007

从 C# 回调到 JavaScript 的另一种方法是一次性传递通知字符串中的所有数据。

在 JavaScript 方面，很容易生成数据的 JSON 表示。但是，在 C# 方面，您必须声明 `DataContractJsonSerializer`需要解释此数据的 DataContract，这需要更多的工作。

JavaScript 辅助函数，它接收你的一维键/值对数组：

```
function saveUserSettings(valuesToSave) {
    var notifyObject = { command: "saveUserSettings", values: valuesToSave };
    var notifyObjectString = JSON.stringify(notifyObject);
    window.external.notify(notifyObjectString);
}

// call it like this...
saveUserSettings([{ key: "key1", value: "value1" }, 
    { key: "key2", value: "value2" }]); 
```

C# 合约：

```
using System.Runtime.Serialization;

[DataContract]
public class JsonScriptData
{
    [DataMember(Name = "command")]
    public string Command { get; set; }

    [DataMember(Name = "values")]
    public JsonUserSetting[] Values { get; set; }
}

[DataContract]
public class JsonUserSetting
{
    [DataMember(Name = "key")]
    public string Key{ get; set; }

    [DataMember(Name = "value")]
    public object Value { get; set; }
} 
```

并且您的浏览器脚本通知变为：

```
 private void BrowserOnScriptNotify(object sender, NotifyEventArgs notifyEventArgs)
    {
        var str = notifyEventArgs.Value;
        var serializer = new DataContractJsonSerializer(typeof(JsonScriptData));
        var bytes = Encoding.UTF8.GetBytes(str);

        JsonScriptData commandData;
        using (var memoryStream = new MemoryStream(bytes))
        {
            commandData = (JsonScriptData)serializer.ReadObject(memoryStream);
        }

        // save out to application settings dictionary
        var applicationSettings = IsolatedStorageSettings.ApplicationSettings;
        foreach (var value in commandData.Values)
        {
             applicationSettings[value.Key] = value.Value;
        }
        applicationSettings.Save();
    } 
```

当然，您可以将 JS 中的整个用户设置 JSON 字符串作为单个值保存到 IsolatedStorageSettings 中，这意味着 C# 甚至不需要解析它。

# iphone - Mapkit：如何在 MKLocalSearch 结果地标上添加注释？

> ID：16021870
> 
> 赞同：1
> 
> 时间：2013-04-15T18:07:03.350
> 
> 标签：iphone, ios, mapkit, objective-c-blocks, mkannotation

基本上我需要一种方法在搜索请求获取的所有“沃尔玛”上添加注释。我没有使用界面生成器，我只是使用此应用程序的代码。

```
MKMapView * map = [[MKMapView alloc] initWithFrame:
                   CGRectMake(0, 0, 320, 480)];
map.delegate = self;
[self.view addSubview:map];
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

MKLocalSearchRequest *request = [[MKLocalSearchRequest alloc] init];
request.naturalLanguageQuery = @"Walmart";
request.region = map.region; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:07:56.210

我建议简单地在以下位置创建地图视图`viewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    MKMapView * map = [[MKMapView alloc] initWithFrame:self.view.bounds];
    map.delegate = self;

    [self.view addSubview:map];
} 
```

但是当用户移动地图时，寻找 Walmarts 并添加注释：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
    // if on slow network, it's useful to keep track of the previous
    // search, and cancel it if it still exists

    [self.previousSearch cancel];

    // create new search request

    MKLocalSearchRequest *request = [[MKLocalSearchRequest alloc] init];
    request.naturalLanguageQuery = @"Walmart";
    request.region = mapView.region;

    // initiate new search

    MKLocalSearch *localSearch = [[MKLocalSearch alloc] initWithRequest:request];
    [localSearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {

        NSMutableArray *annotations = [NSMutableArray array];

        [response.mapItems enumerateObjectsUsingBlock:^(MKMapItem *item, NSUInteger idx, BOOL *stop) {

            // if we already have an annotation for this MKMapItem,
            // just return because you don't have to add it again

            for (id<MKAnnotation>annotation in mapView.annotations)
            {
                if (annotation.coordinate.latitude == item.placemark.coordinate.latitude &&
                    annotation.coordinate.longitude == item.placemark.coordinate.longitude)
                {
                    return;
                }
            }

            // otherwise, add it to our list of new annotations
            // ideally, I'd suggest a custom annotation or MKPinAnnotation, but I want to keep this example simple

            [annotations addObject:item.placemark];
        }];

        [mapView addAnnotations:annotations];
    }];

    // update our "previous" search, so we can cancel it if necessary

    self.previousSearch = localSearch;
} 
```

显然，此代码示例假定您有一个`weak`用于先前搜索操作的属性。（严格来说，这不是必需的，但如果在 Internet 连接速度较慢时在地图上浏览，可能会给您带来更好的性能。）无论如何，该属性将定义如下：

```
@property (nonatomic, weak) MKLocalSearch *previousSearch; 
```

* * *

还有其他可能的改进（例如`UIActivityIndicatorView`，如果搜索正在进行，则为网络活动指示器，可能删除不在地图当前区域内的注释等），但希望您能理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:43:55.000

这是方法：

```
MKLocalSearch *localSearch = [[MKLocalSearch alloc] initWithRequest:request];
[self.localSearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {

if(error)
{
        NSLog(@"localSearch startWithCompletionHandlerFailed!  Error: %@", error);
        return;
} 
else 
{
        for(MKMapItem *mapItem in response.mapItems)
        {
             MKPinAnnotation *annotation = [[MKPinAnnotation alloc] initWithCoordinate: mapItem.placemark.location.coordinate];
             [map addAnnotation:annotation];
             NSLog(@"Name for result: = %@", mapItem.name);
        }
}}]; 
```

# linq - 特定区域的最大和最小速率 - lambda 查询

> ID：16021872
> 
> 赞同：1
> 
> 时间：2013-04-15T18:07:04.280
> 
> 标签：linq, entity-framework

```
我的表看起来像 -
   Area MaxRate MinRate Quarter year
    过境 1000 800 1 2013
    过境 900 700 2 2013
    过境 800 600 3 2013

    过境 700 500 4 2013
    过境 600 500 1 2012
    过境 550 450 2 2012
    过境 500 400 3 2012

    过境 450 350 4 2012
    内降 2000 1500 1 2013
    内降 1800 1500 2 2013

```
 I want max and min rates for the particular area in current year as -

 **Area    MaxRate  MinRate       year**
 crossing  1000     500           2013 
```

请帮我在 LINQ-lambda 表示法中找到查询
            回答 #1

赞同：2

时间：2013-04-15T18:10:21.720

您可以使用它`GroupBy`来执行此操作：

```
var results = table.GroupBy(row => new { Area = row.Area, Year = row.year })
                   .Select(g => new { 
                                       Area = g.Key.Area, 
                                       MaxRate = g.Max(i => i.MaxRate),
                                       MinRate = g.Min(i => i.MinRate),
                                       Year = g.Key.Year
                                    }); 
```

```

# gwt - GWT - 带有子菜单的弹出菜单 - 建议一些 UI 库

> ID：16021876
> 
> 赞同：0
> 
> 时间：2013-04-15T18:07:19.060
> 
> 标签：gwt

我正在寻找某种具有子菜单支持的弹出菜单的 GWT 库；我的意思是这样[的，](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/doc-files/MenuBar.png) **但没有上部菜单栏**，因为我需要让它在某些按钮点击时可见；

像这样而不是菜单栏：

![在此处输入图像描述](https://i.stack.imgur.com/E1zCg.png)

所以我需要你的实用建议，我在哪里可以找到支持这种组件的 gwt 库？我知道这是弹出菜单组合，但我有兴趣找到最佳框架解决方案或不太重的东西......

PS> GWT 2.3

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T04:57:48.750

## 解决方案 1 -

仅使用本机 GWT 的 BareBones 实现将如下所示：

```
public void onModuleLoad()
{
    MenuBar options = new MenuBar( true );
    MenuBar gwtPopup = new MenuBar( true );
    options.addItem( "GWT", gwtPopup );
    MenuItem entryPoint = new MenuItem( new SafeHtmlBuilder().appendEscaped( "EntryPoint" ).toSafeHtml() );
    entryPoint.setScheduledCommand( new ScheduledCommand()
    {
        public void execute()
        {
            Window.alert( "hello" );
        }
    } );
    final DialogBox menuWrapper = new DialogBox( true );
    menuWrapper.add( options );
    gwtPopup.addItem( entryPoint );
    Button showMenu = new Button( "Click me", new ClickHandler()
    {
        public void onClick( ClickEvent event )
        {
            menuWrapper.showRelativeTo( menuWrapper );
        }
    } );

    RootPanel.get().add( showMenu );
} 
```

## 解决方案 2 -

我们通常发现很难设置弹出窗口、菜单项的样式并处理其他古怪的行为。因此，我们只是将按钮序列包装在垂直面板中，根据需要设置样式并将其显示在 DialogBox 中。

## 解决方案 3 - 第三方库

1.  GwtQuery - 您可以根据 jquery 包装自己的。
2.  GXT
3.  瓦丁
4.  GWT 引导程序
5.  JSNI over jquery、bootstrap 或任何其他喜欢的 js lib

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T03:59:28.780

据我所知，没有专门针对弹出窗口和子菜单的 UI 库。至于您的要求，您可以为此实现自己的小部件。创建一个流程面板或水平面板。在其中插入 2 张图像，一张用于菜单图像，另一张用于箭头图像。将点击处理程序添加到您的箭头图像并显示所需的弹出窗口。

# oracle - 如何只为一个用户设置用户密码_生命时间？

> ID：16021877
> 
> 赞同：0
> 
> 时间：2013-04-15T18:07:25.313
> 
> 标签：oracle, passwords, sqlplus, lifetime

这个说法：

```
ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME 180; 
```

更改`password_life_time`我的个人资料中所有用户的值。但是如果我*只需要为一个*用户更改这个值怎么办？

我会使用这样的东西吗？：

```
ALTER username LIMIT PASSWORD_LIFE_TIME UNLIMITED 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:45:26.430

你不能直接通过`ALTER USER`. 您需要[创建一个新配置文件](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_6010.htm)，根据需要对其进行配置，然后更改用户以获取该配置文件。

有特定要求的单个用户是不寻常的，并且在大多数情况下，配置文件更加灵活和高效

# wxpython - wxpython 用于来自 textctrl 的每个循环，由换行符分割

> ID：16021879
> 
> 赞同：0
> 
> 时间：2013-04-15T18:07:32.013
> 
> 标签：wxpython, wxtextctrl

我有一个将 .txt 文件的内容加载到多行 textctrl 的应用程序，然后我想在这个 textctrl 上执行一个“for 循环”并获取每一行文本并将其放入一个数组中以进行进一步操作。

可以这样吗？还是打开文件，将文本读入数组，然后将其显示到 textctrl 中会更好吗？

如果是这样，我将如何将文件中的文本直接放入数组中？

```
def OnOpen(self, e):
    dlg = wx.FileDialog(self, "Choose a file to open", self.dirname, "", "*.txt", wx.OPEN) #open the dialog boxto open file
    if dlg.ShowModal() == wx.ID_OK:  #if positive button selected....
        directory, filename = dlg.GetDirectory(), dlg.GetFilename()
        self.filePath = '/'.join((directory, filename))     #get the directory and filename of where file is located
        directory, filename = dlg.GetDirectory(), dlg.GetFilename()
        #self.urlFld.LoadFile(self.filePath)
        self.fileTxt.SetValue(self.filePath) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:21:11.917

我只会创建一个空列表并将文件中的行附加到它：

```
myList = []
for line in myOpenFileObj:
    myList.append(line) 
```

然后像之前那样将文本添加到文本控件。

# c - 为什么静态定义的字符串存储在内存的只读区域

> ID：16021880
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:07:32.493
> 
> 标签：c

看到我[之前](https://stackoverflow.com/questions/16021454/difference-between-declared-string-and-allocated-string)问题的答案后，忍不住要问。

```
char* msg = "Stack-overflow"; // Stored on read-only memory region of process.
int i=10; // Stored onto stack. 
```

为什么`"Stack-overflow"`进程和值不会存储在只读内存区`10`？

编辑以清除我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:10:09.540

这两个变量都不存储在只读存储器中。但是，内存`msg` *指向的*是只读的。

不过，C 标准并未强制执行此操作——这只是常见的做法。以下问题中有关于此的更多信息：[字符串文字：它们去哪儿了？](https://stackoverflow.com/questions/2589949/c-string-literals-where-do-they-go)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:43:51.293

没有变量存储在只读内存中，msg 指向只读内存，因此如果我们尝试修改它，编译器将标记错误。虽然我们可以将 msg 分配给其他地址。（它的行为就像指向 C++ 中的常量对象的指针）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:11:44.410

您应该将字符串`"Stack-overflow"`与变量进行比较`10`，将变量`msg`与变量进行比较`i`。您可以更改 的指针值，`msg`但不允许更改 的值`10`。如果这`10`将是一个更大的困难数字，那么它也很有可能最终进入只读存储器。

# c# - 处理 IBM MQ 客户端/服务器中的连接

> ID：16021885
> 
> 赞同：0
> 
> 时间：2013-04-15T18:07:48.987
> 
> 标签：c#, .net, ibm-mq

我是 IBM MQ 的新手，我的队列管理器使用 tcp 通道连接并且 tcp 连接广泛增加，这是正在使用的代码。如何以可重用的方式处理通道内的连接？

我正在使用 7.5 MQ 客户端，与 6.0.5.2 MQ 远程服务器通信。我正确关闭了连接，但是当我运行 netstat 时，它显示 tcp 连接处于 time_wait 状态。这些是连接/套接字泄漏吗？

```
MQQueue mqQueue = null; 
MQQueueManager mqQMgr=null;  
try
{
  //Create connection to queue manager
   mqQMgr = new MQQueueManager("Queue Manager name", properties);
  //Access the queue
    mqQueue = mqQMgr.AccessQueue(QueueName, MQC.MQOO_FAIL_IF_QUIESCING | MQC.MQOO_INPUT_SHARED | MQC.MQOO_BROWSE);
   for(int i=1;i<2000;i++)
  {
    //read the messages
    mqMsg=new MQMessage();
    mqQueue.Get(mqMsg);
  }
}
catch(MQException mqe)
{  
  //If no messages in the queue , break. (if not, catch any error)
}
finally
{
     mqQueue.Close(); //Close the MQ Queue
     mqQMgr.Disconnect(); //Disconnect the MQ Manager
} 
```

当我运行 netstat 时，它显示

```
TCP x.x.x.x:59092    x.x.x.x:1400  TIME_WAIT 
TCP x.x.x.x:59093    x.x.x.x:1400  TIME_WAIT
TCP x.x.x.x:59094    x.x.x.x:1400  TIME_WAIT
TCP x.x.x.x:59095    x.x.x.x:1400  TIME_WAIT
TCP x.x.x.x:59096    x.x.x.x:1400  TIME_WAIT
TCP x.x.x.x:59097    x.x.x.x:1400  TIME_WAIT
TCP x.x.x.x:59098    x.x.x.x:1400  TIME_WAIT
TCP x.x.x.x:59099    x.x.x.x:1400  TIME_WAIT 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T05:09:57.537

这不是泄漏。套接字在关闭后进入 TIME_WAIT 状态。套接字处于 TIME_WAIT 较长时间（大约 4 分钟）是正常的，具体取决于操作系统。

# java - java在自定义类中覆盖equals（）

> ID：16021891
> 
> 赞同：0
> 
> 时间：2013-04-15T18:08:00.620
> 
> 标签：java, list, overriding

我正在尝试覆盖顶点变量等于。当前，当调用 vertexList.contains("test") 时，不会运行在顶点类中声明的 equals()。有什么我想念的吗？

如果你认为它是别的东西，可以在我的[git hub上找到完整的代码，以及一个快速测试文件 UI.java。](https://github.com/monoxide7/p3/blob/master/Data.java)否则我没有想法。
谢谢，

```
class Data implements Graph
{
    java.util.LinkedList<vertex> vertexList = new java.util.LinkedList<vertex>();

    class vertex
    {
        String ID;
        java.util.LinkedList<String> links = new java.util.LinkedList<String>();
        boolean tracker = false;

        public vertex(String it)
        {
            ID = it;
        }

        @Override
        public boolean equals(Object obj)
        {
            if (obj.equals(null))
                return false;
            System.err.println("OBJECT CHECK");
            String str = (String) obj;
            // return true; //To test if it's being accessed
            return str.equals(ID);
        }

        public String toString()
        {
            return ID;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:22:25.497

执行`vertexList.contains("test")`将针对您的对象执行`equals()`方法。`String`您正在寻找`linkedList.contains(new Vertex("a"));`哪个将对目标对象执行**您的方法。** 这是正在搜索的对象在哪里`equals()`的linkedlist impl 。`contains()``o`

```
 for (Entry e = header.next; e != header; e = e.next) {
            if (o.equals(e.element))
                return index;
            index++;
        } 
```

您还应该在方法中检查 a`Vertex`而不是 a 。这就是它的目的。您应该尝试检查一个是否等于另一个。`String``equals()``Vertex`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:33:30.353

你想在这条线上完成什么？

```
String str = (String) obj; 
```

如果我正确理解了您的代码的目的，我认为您的 equals 方法应该更像这样：

```
@Override
public boolean equals(Object obj){
if( obj != null && obj.getClass().equals(this.getClass()){
    return ((vertex)obj).toString().equals(this.ID)
  } else {
    return false;
  }
} 
```

# c - 将 windows 设备文件名转换为驱动器号

> ID：16021898
> 
> 赞同：4
> 
> 时间：2013-04-15T18:08:18.703
> 
> 标签：c, windows, file, winapi

我正在尝试获取与 C 中的进程句柄关联的文件名，并且由于我的代码需要在 Windows XP 上运行，因此我使用的是**GetProcessImageFileName**（而不是**QueryFullProcessImageName**）。

但是，**GetProcessImageFileName**以设备形式返回路径，例如 \device\harddiskvolume0\ - 如何将其转换为驱动器号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T07:34:17.960

我打算[`GetModuleFileNameEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683198(v=vs.85).aspx)像卢克在评论中所做的那样提出建议。

[`QueryDosDevice()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365461(v=vs.85).aspx)在所有驱动器号上（您可以找到所有带有 的驱动器[`GetLogicalDrives()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364972(v=vs.85).aspx)号）将是另一个赌注，尽管理论上您可以获得没有驱动器号的路径，或者符号链接可能会搞砸一个简单的字符串比较。

但是.. 这个怎么样...您应该能够在 NT 路径前加上`\??\GLOBALROOT`（这是来自内存，可能不完全是这样），然后在`CreateFileW()`. （AFAIK 它必须是文件 API 的 Unicode 版本..）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-29T07:26:38.387

您可以尝试将驱动器号形式转换为设备形式，这是我所做的，希望对您有所帮助：

```
 TCHAR szTemp[MAX_PATH] = {0};
    _tcsncpy(szTemp, lpszImageFile, 2);
    QueryDosDevice(szTemp, szImageFile, MAX_PATH);

    _tcsncat(szImageFile, lpszImageFile+2, _tcslen(lpszImageFile) - 2); 
```

在这段代码中，lpszImageFile 是进程的完整路径名，例如c:\program files\test.exe。

# html - 使用 / 表示根目录

> ID：16021899
> 
> 赞同：0
> 
> 时间：2013-04-15T18:08:20.440
> 
> 标签：html, internet-explorer, relative-path

这可能是一个愚蠢的问题，但很难有效地搜索。我已经定义了以下内容：

```
<img src='/images/image_name.ico' /> 
```

这会正确创建根目录的路径，然后是我测试过的所有浏览器中的图像目录，包括 IE10，但 IE9 无法正确获取路径。在 IE 9 中使用 / 指示站点根目录是否存在已知问题？即使该文件存在于该路径中，我也会得到一个损坏的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:11:38.607

没有。IE 解析根相对 URI 的能力没有已知问题。

您应该采取的通常调试步骤是： 检查您的服务器日志和浏览器调试工具，以查看实际请求的内容、请求是否成功以及是否指定了正确的内容类型。确保图像文件正常。检查浏览器是否可以解析 URL 并直接打开图像（无需通过网页）。

# google-api - Google+ 登录：从我的网络应用程序注销时，用户仍使用 Google 登录

> ID：16021900
> 
> 赞同：3
> 
> 时间：2013-04-15T18:08:23.160
> 
> 标签：google-api, google-plus

我创建了一个使用 Google+ 登录 API 的网络应用程序，但遇到了自动登录行为的问题。

我不确定我是否正确实施了它，这是问题所在：

*   用户使用他们的 Google+ 登录详细信息登录我的应用程序。
*   现在他们登录了我的应用程序以及他们的 Google 帐户。
*   完成后，他们会退出我的应用程序，但仍会登录 Google。
*   现在假设另一个用户（使用相同的机器/浏览器）访问我的网站，他们会使用以前的用户详细信息自动登录。

我了解这是一种不好的做法，并且要避免 a) 在用户离开我的网站时将其退出其 Google 帐户或 b) 禁用 Google+ 登录的自动行为。

那么我该如何防止这种行为呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:49:24.293

用户授权您的应用程序后，Google+ 登录按钮会自动告诉您的应用程序他们是谁。如果用户想通过其他帐户使用您的网站，则他们需要退出 Google 并以其他用户身份登录。

听起来您希望用户和您的网站之间的登录状态不同于用户在 Google 中的登录状态。为了实现这一点，您需要管理自己的会话状态。换句话说，如果用户授权了您的应用，按钮将始终触发 JavaScript 回调。作为开发人员，您可以选择在用户单击登录按钮之前忽略该信息。一些开发人员通过将单击事件处理程序附加到按钮来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:41:54.663

请参阅以下问题中的答案。它与您的场景非常相似

[使用 Google+ 登录时阻止自动登录](https://stackoverflow.com/questions/15484533/preventing-automatic-sign-in-when-using-google-sign-in/15980907#15980907)

但即使在该提议的解决方案中，google+ 帐户仍将登录。您可以做的另一个步骤是添加一个提示，要求用户注销 google+ 帐户，或者您可以调用 google+ logout api（不检查是否有）代表用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T11:25:18.677

我也有这个问题。从 gmail auth 获得电子邮件 ID 后，您需要退出 gmail 帐户：

```
<script src="https://apis.google.com/js/platform.js?onload=renderButton" async defer></script>
<script>

function onSuccessG(googleUser) {
        var profile = googleUser.getBasicProfile();
        console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
        console.log('Name: ' + profile.getName());
        console.log('Image URL: ' + profile.getImageUrl());
        console.log('Email: ' + profile.getEmail());
        //now here write a code of login//
        //
        //now here write a code of login//

       signOut();//call sign out function which will sign out user from their gmail accont

}
function onFailureG(error) {
    console.log(error);
}
function renderButton() {
  gapi.signin2.render('my-signin2', {
    'scope': 'https://www.googleapis.com/auth/plus.login',
    'width': 323,
    'height': 35,
    'longtitle': true,
    'theme': 'dark',
    'onsuccess': onSuccessG,
    'onfailure': onFailureG
  });
}
function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
        console.log('User signed out.');
    });
} 
```

# android - Android SQLite：请求索引-1，大小为1

> ID：16021910
> 
> 赞同：4
> 
> 时间：2013-04-15T18:08:59.350
> 
> 标签：android, database, eclipse

我的应用程序需要一个数据库，但由于以下错误，它一直强制关闭。它适用于我的一项活动，但不适用于另一项活动

数据库处理程序：

```
public class DBGestion {

private static final int VERSION_BDD = 1;
private static final String NOM_BDD = "cityquest.db";

private static final String TABLE_QUEST = "table_quest";
private static final String COL_ID = "ID";
private static final int NUM_COL_ID = 0;
private static final String COL_USERNAME = "UserName";
private static final int NUM_COL_USERNAME = 1;
private static final String COL_NIVEAU ="Niveau";
private static final int NUM_COL_NIVEAU = 2;
private static final String COL_NBRIGOLETTES ="NbRigolettes";
private static final int NUM_COL_NBRIGOLETTES = 3;

private SQLiteDatabase bdd;

private MaBaseSQLite maBaseSQLite;  // MaBaseSQLite extends SQLiteOpenHelper

public DBGestion(Context context) {
    maBaseSQLite = new MaBaseSQLite(context, NOM_BDD, null, VERSION_BDD);
}

public void open() {
    bdd = maBaseSQLite.getWritableDatabase();
}

public void close() {
    bdd.close();
}

public SQLiteDatabase getBDD() {
        return bdd;
}

public long initDB(String userName){
    ContentValues values = new ContentValues();
    values.put(COL_USERNAME, userName);
    values.put(COL_NIVEAU,  0);
    values.put(COL_NBRIGOLETTES, 0);
    return bdd.insert(TABLE_QUEST,null, values);
}

public int getNiveau() {
    Cursor c = bdd.query(TABLE_QUEST, new String[] {COL_NIVEAU}, null, null, null, null, null);
    int niveau = c.getInt(NUM_COL_NIVEAU);
    return niveau;
}

public long setNiveau(int niveau) {
    ContentValues values = new ContentValues();
    values.put(COL_NIVEAU, niveau);
    return bdd.update(TABLE_QUEST,values, COL_ID + " = 0", null);
} 
```

}

这是我使用 get 和 set 方法的代码（对不起所有法语变量名！）。基本上我首先检查问题是否已经回答（getNiveau（）== 1），如果没有，我检查答案然后使一些小部件不可见，并设置Niveau（1）（不可能关闭（）dbGestion 2次，因为按钮被隐藏）

在我尝试使用数据库之前我没有遇到任何问题..

```
public class Question extends Activity {

[variable declaration]

DBGestion dbGestion;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.question_elisa);

        Intent i = getIntent();
        int format = i.getIntExtra(MainActivity.FORMAT,0);

        dbGestion = new DBGestion(this);

        [findViewById for all my variables]

if (format == 1){

        dbGestion.open();

        if (dbGestion.getNiveau() == 1) {
            bonneReponse.setVisibility(View.VISIBLE);
            [......]
            dbGestion.close();
        }  

bouton.setOnClickListener(new OnClickListener() { 

            @Override
            public void onClick(View v) {

            String reponse = new String("");
                reponse = editText.getText().toString();

            if(reponse.equalsIgnoreCase("poete") ||..){

                    bonneReponse.setVisibility(View.VISIBLE);
                                   [...]
                            }
                            else {...}

                                    dbGestion.setNiveau(1); 
                dbGestion.close();
}}); 
```

你知道问题出在哪里吗？

这是我启动数据库的方式（在 MainActivity onCreate 方法中）：

```
final DBGestion dbGestion = new DBGestion(this);

                dbGestion.open();
            dbGestion.initDB("Alex");
            dbGestion.close(); 
```

这是我的 SQLiteOpenHelper 类：

```
public class MaBaseSQLite extends SQLiteOpenHelper {

private static final String TABLE_QUEST ="table_quest";
private static final String COL_ID ="ID";
private static final String COL_NIVEAU ="Niveau";
private static final String COL_USERNAME ="UserName";
private static final String COL_NBRIGOLETTES ="NbRigolettes";

private static final String CREATE_DB = "CREATE TABLE " + TABLE_QUEST + " (" + COL_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " 
+ COL_USERNAME + " TEXT NOT NULL, " + COL_NIVEAU + " TEXT NOT NULL, " + COL_NBRIGOLETTES + " TEXT NOT NULL); ";      

public MaBaseSQLite(Context context, String name, CursorFactory factory, int version) {
    super(context, name, factory, version);

}

@Override
public void onCreate(SQLiteDatabase db) {

    db.execSQL(CREATE_DB);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    db.execSQL("DROP TABLE" + TABLE_QUEST + ";");
    onCreate(db);

} 
```

}

链接到 Logcat：[http ://pastebin.com/ds9bKFcS](http://pastebin.com/ds9bKFcS)

再次感谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:22:02.747

从您得到的错误代码中，您可以将其追溯到这段代码：

```
public int getNiveau() {
    Cursor c = bdd.query(TABLE_QUEST, new String[] {COL_NIVEAU}, null, null, null, null, null);
    int niveau = c.getInt(NUM_COL_NIVEAU);
    return niveau;
} 
```

首先，当您从数据库中获取游标时，您的工作是检查游标并将其移动到适当的行。例如，在您的情况下，如果知道您的团队只有一行，您可以这样做：

```
public int getNiveau() {
    Cursor c = bdd.query(TABLE_QUEST,new String[] { COL_NIVEAU},null,null,null,null,null);
    if(c.getCount() == 1) {
        c.moveToFirst();
        int niveau = c.getInt(c.getColumnIndexOrThrow(MaBaseSQLite.COL_NIVEAU));
        c.close();
        return niveau;
    }
    c.close();
    return -1;
} 
```

所以基本上我正在做的是检查我是否只有一个结果列，如果我移动到第一列，然后在该位置获取整数。您必须记住的另一件事是从列名中获取列索引。如果您决定更改数据库模式，您将获得更好的可移植性。您的所有问题都可以通过位于此处的游标文档来回答：http: [//developer.android.com/reference/android/database/Cursor.html](http://developer.android.com/reference/android/database/Cursor.html)

希望能回答你所有的问题。

# ios - 选择行时，UITableView 数据排序返回错误数据

> ID：16021912
> 
> 赞同：0
> 
> 时间：2013-04-15T18:09:07.993
> 
> 标签：ios, objective-c, uitableview

我`UITableView`在 iPad 应用程序中有一个自定义单元格。当我对作为该数据源的数组进行排序`UITableView`，然后单击 中的一行时`UITableView`，该行的详细数据是错误的（我将选定的行数据清空到 中`UITextFields`）！如果我不对数组进行排序，那么细节是正确的！这是对数据源数组进行排序的代码：

```
-(void) reloadClientList: (BOOL *)dontDeleteKey  {

    custDataArray = [NSMutableArray new];  //Init Array to hold TableView Data

    if(boSortClientList.selectedSegmentIndex == 0)  {  //  sort alphabetically
        [custDataArray addObjectsFromArray: [ClientInfo MR_findAllSortedBy:@"aClientLastName" ascending:YES]];
    }
    else if(boSortClientList.selectedSegmentIndex == 1)  {  //  sort by phone number
        [custDataArray addObjectsFromArray: [ClientInfo MR_findAllSortedBy:@"aClientPrimaryPhone" ascending:YES]];
    }
    else  {  //  no sort
        [custDataArray addObjectsFromArray:[ClientInfo MR_findAll]];
    }

    [self.clientList reloadData];

    if(dontDeleteKey == false)
        selectedClientKey = nil;  // clear selectedClientKey
} 
```

为什么会出现这种情况？我需要做什么来修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:15:05.393

很可能您对数组中的数据进行排序并使用排序后的数组`cellForRowAtIndexPath:`

然后在`didSelectRowAtIndexPath`您使用未排序的数组来获取要转到的详细信息页面。您应该能够通过使用`didSelectRowAtIndexPath`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:20:30.680

每次选择一行时，此代码都会`didSelectRowAtIndexPath`再次重新创建数组：

```
custDataArray = [NSMutableArray new];
[custDataArray addObjectsFromArray:[ClientInfo MR_findAll]]; 
```

您需要检查您的 custDataArray 是否为 nil。如果它不是 nil ，那么你不需要这些行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:20:53.087

创建一个 ivar 来保存你的 NSMutableArray。您正在对数组`reloadClientList`进行排序，但您没有在`didSelectRowAtIndexPath`.

# lucene - Orchard - 搜索和索引问题

> ID：16021915
> 
> 赞同：5
> 
> 时间：2013-04-15T18:09:15.367
> 
> 标签：lucene, indexing, orchardcms, field

我有一个使用 Orchard CMS 完成的项目。所有功能都是通过模块实现的。搜索模块直到几天前还在工作，但突然停止工作，“没有任何理由”。问题是我无法重建/更新索引。当我运行索引时，它只会索引字段的默认列表（id、标题、正文、格式、类型、作者、创建、发布、修改、文化），但我的自定义字段没有被索引。我尝试了一切，但没有任何成功。我试过： - 删除所有文件的索引/搜索文件夹 - 重新安装搜索/索引/Lucene 模块 - 重建和重建索引...... - 清除解决方案并重建......

**我没有扩展任何 Orchard 模块，它们与我下载它们时相同。**

对此有什么建议...？

**PS 是的，我已经检查了需要索引的自定义字段。:)** 谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:06:18.590

如果您认为索引已损坏，请删除`App_data\Sites\Default\Search.settings.xml`并`App_data\Sites\Default\Indexes`，然后重新启动应用程序池。然后，您应该能够重建索引。

显然您已经这样做了，但对于其他可能没有的人，您还需要检查您希望在设置/搜索下编制索引的字段。这将包括搜索中的字段。

但是对于要包含在搜索中的字段，需要先对其进行索引。为此，您需要转到内容/内容类型并编辑字段所在的内容类型。选中“索引此内容类型以进行搜索”。还要为要索引的每个字段部署设置，并选中“包含在索引中”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T00:14:28.400

您需要运行“配方”来创建“搜索”索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:25:32.903

Search + Lucene + Indexing 似乎适用于文本字段，但不适用于数字字段。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-21T07:03:06.677

启用搜索功能后，仪表板中的“设置”屏幕会显示将从索引中查询的字段（在“搜索”屏幕上列出）。

[在此处输入图像描述](https://i.stack.imgur.com/ubRgo.png)

# visual-studio-2012 - 为什么 Nuget 试图访问我的 SVN 文件？

> ID：16021925
> 
> 赞同：1
> 
> 时间：2013-04-15T18:09:39.117
> 
> 标签：visual-studio-2012, nuget

我正在尝试在我拥有的解决方案中更新 Nuget 包，但这就是我尝试更新时对所有这些包所做的

```
Successfully installed 'knockoutjs 2.2.1'.  
Updating 'knockoutjs' from version '2.2.0' to '2.2.1' in project 'MyProject'.  
Directory 'Scripts\.svn\text-base' is not empty. Skipping...  
Directory 'Scripts\.svn' is not empty. Skipping...  
Successfully removed 'knockoutjs 2.2.0' from MyProject.  
Successfully added 'knockoutjs 2.2.1' to MyProject.  
Access to the path '(solution path)\packages\knockoutjs.2.2.0\Content\Scripts\.svn\text-base\knockout-2.2.0.debug.js.svn-base' is denied.  
Access to the path '(solution path)\packages\knockoutjs.2.2.0\Content\Scripts\.svn\text-base\knockout-2.2.0.js.svn-base' is denied.  
Access to the path '(solution path)\packages\knockoutjs.2.2.0\Content\Scripts\.svn\all-wcprops' is denied.  
Access to the path '(solution path)\packages\knockoutjs.2.2.0\Content\Scripts\.svn\dir-prop-base' is denied.  
... 
```

它几乎对每个 SVN 文件都这样做。然后说它没有正确卸载，我需要重新启动 Visual Studio 才能使更改生效，但这并不能解决任何问题。我必须手动清除文件并删除`.deleteme`创建的文件。

我还尝试以管理员身份运行 Visual Studio 2012，但这并没有改变任何东西。我对我的 Windows 7 机器也拥有整个项目的完全权限。

我认为`.svn`文件夹应该被 Nuget 忽略？它是否试图删除旧的包文件夹？我可以删除所有内容文件，只要它单独保留 .svn 文件夹即可。我总是可以在下次提交时将文件标记为已删除。

另外，我知道我可以在不将包提交到源代码控制的情况下运行 Nuget，但我不想这样做。该功能未启用，并且允许 Nuget 下载缺少的包的复选框未选中。因此，如果它认为源代码控制集成被禁用，我不知道为什么。

# java - Java：接口中的受保护方法

> ID：16021926
> 
> 赞同：3
> 
> 时间：2013-04-15T18:09:47.273
> 
> 标签：java, oop, access-modifiers

好的，我知道这个问题已经被问过几次了，但我需要关于我的具体案例的建议。有 Encodable 和 Decodable 之分，而 Message 既是 Encodable 又是 Decodable：

```
interface Encodable { void encode(); }
interface Decodable { void decode(); }
class Message implements Encodable, Decodable { ... }

void processEncodable(Encodable encodable) {
  ...
  encodable.encode();
  ...
} 
```

除了Message，还有其他的Encodable（和Decodable），需要在processEncodable中处理。到目前为止一切顺利，但问题是我想从包外部隐藏 encode() 和 decode() ，并且 Java 接口不允许受保护/私有方法。有人可能会建议抽象类，但正如您所见，Message 应该同时继承 Encodable 和 Decodable，所以情况并非如此。有什么建议么？

这些天我非常喜欢 Scala，Scala 特征允许受保护/私有方法，恕我直言，这更直观。我已经经历了一些提到Java接口设计理念的答案，但我真的不明白为什么如果引入接口作为多重继承的替代方案，它为什么不应该允许受保护的方法，而抽象类则允许......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:20:45.500

作为替代品并不意味着它是完全替代品。接口是服务契约，因此它们将某个类提供给其客户的功能公开，作为任何可以访问该接口的客户。

如果您想从包外部隐藏（这意味着您的逻辑也应该与类一起保留在包中`encode`）不要通过接口公开它们，而是允许它们成为（或*包私有*）您的方法类（或超类，如果各种类都是*可编码/可解码*的）。`decode``Message``protected`*`Message`*

 **这不是一个孤立的规则。有一些机制可以在不破坏接口概念的情况下实现你想要的。想一想：*如果您只能在包中访问该方法，那么该方法对接口有什么好处？如果它们可以是类方法，那么在接口中拥有这样的方法又有什么意义呢？这些方法也可用于具有适当修饰符的包的成员？***

# html - 向左清除会在 Firefox/chrome 中创建一个间隙

> ID：16021927
> 
> 赞同：0
> 
> 时间：2013-04-15T18:09:51.567
> 
> 标签：html, css

我在 html/css 中变得非常生疏，当我在左侧创建一个新控件时，我在我的 Web 应用程序中引入了一个问题。

```
<div id="leftnav">
<ul><li class="saveAndExit"><a class="noflag" href="" onclick="">Save and Exit</a></li></ul>
<span id=""><ul><div><li><a id="" class="noflag" href="btn0','')" onclick="javascript:keepDirtyFlag();undefined">Introduction</a></li></div><div><li><a id="" class="noflag" href="" onclick="">Applicant Details</a></li></div><div><li><a id="" class="noflag" href=")" onclick="javascript:keepDirtyFlag();undefined">Applicant Details</a></li></div><div><li><a id="" class="noflag" href="" onclick="j">Applicant details – Trust</a></li></div><div><li><a id="" class="noflag" href="" onclick="javascript:keepDirtyFlag();undefined">Applicant contact person – Trust</a></li></div><div><li><a id="" class="noflag" href="" onclick="">Applicant Trustees</a><a onclick="" class="noflag arrow"></a><ul style="display:none"><li><a id="" class="noflag" href="" onclick="javascript:keepDirtyFlag();undefined">Record 1</a></li><li><a id="" class="noflag" href="" onclick="">Record 2</a></li></ul></li></div><div><li><a id="" class="noflag" href="" onclick="">Eligibility Details</a></li></div><div><li><a id="" class="noflag" href="" onclick="">Eligibility Details</a></li></div><div><li><a id="" class="noflag" href="" onclick="">Review</a></li></div></ul></span>
</div> 
```

问题是，我有一个带有以下模板的字段集

```
<div class="field-container"><div class="field-label"><label for="_Name_txt" id="mCtrl0_Name_txt_fieldLabel" accesskey="M">Na<u>m</u>e<span class="field-asterisk"><acronym title="Required">*</acronym></span></label><em></em></div><div class="field-control"><div class="field-wrapper-passive"><input name="ormCtrl0$Name_txt" type="text" id="mCtrl0_Name_txt" dtext="" class="field-text-idle"></div><div class="field-error-passive"><span id="mCtrl0_ctl06" style="color:Red;display:none;">A name is required</span><span id="mCtrl0_ctl07" style="color:Red;display:none;">The Name must not exceed 200 characters</span></div></div><div class="field-clear"></div></div> 
```

自从我添加了新的 leftnav 控件以来，它已正确显示，但现在，“field-clear”类

```
 .field-clear {
 clear: left;
 line-height: 1px;
 font-size: 1px;
 height: 1px;
 } 
```

清除左侧的导航列表，并在我的表单中的第一个字段和其他字段之间创建一个巨大的间隙。我该如何解决这个问题？

编辑：JSFIDDLE [http://jsfiddle.net/vS8jt/2/embedded/result/](http://jsfiddle.net/vS8jt/2/embedded/result/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T19:24:14.047

这是通过浮动主容器然后添加一个新的 div 来解决的，该 div 在页面底部清除它。

# objective-c - Objective C NSPredicate predicateWithBlock 删除 nil/null 值

> ID：16021934
> 
> 赞同：1
> 
> 时间：2013-04-15T18:10:11.990
> 
> 标签：objective-c, null, nsnull

我正在尝试通过获取现有数组并从中删除 nil 值来填充数组。该数组是从 http 调用的 JSON 响应中填充的。有时数组最后有一个空值，删除该值的最简单方法是，我不必在代码中的任何地方处理它，就是使用`NSArray`'s`filteredArrayUsingPredicate:`将变量分配给我在整个过程中使用的实例变量班级。

```
NSArray *respAgencyList = (NSArray*) [JSON valueForKeyPath:@"xml.path.to.data" ];
NSLog(@"data before filter: %@", respAgencyList); 
// prints: ( { domain: "foo.com", name:"foobar"}, "<null>" });
if (respAgencyList != nil && respAgencyList.count > 0) {
    agencies = [respAgencyList filteredArrayUsingPredicate:[NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
            NSLog(@"Evaluated object is %@", evaluatedObject); //prints <null> for the null value
            BOOL ret = evaluatedObject != nil;
            return ret;

        }]];
} 
```

在上面的代码中，返回值总是`YES`. 但是，当我打开调试器并单步执行时，我看到：

`evaluatedObject = id 0x00000000`

![在此处输入图像描述](https://i.stack.imgur.com/ZamBX.png)

这不是一个`null`/`nil`值吗？与 相比，这个值有什么不同`nil`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:15:19.827

*NSArray 不可能*包含元素`nil`。

一些枚举方法确实在枚举*之后*将 nil 作为您已到达末尾的信号，但 nil 不在*数组中*- 它只是一个信号，您不应该对它做任何严重的事情。但是，我不知道这是否是其中之一。

我建议不要尝试从数组中删除 nil，这是不可能的，因为 nil 从一开始就不存在，而是直接检查数组（记录它，查看调试器等）并确保自己是什么尝试做是不必要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T18:28:05.867

您还应该检查`NSNull`，因为它是一个正确的对象 ，所以它*可以*放入a 中。`NSArray`

```
BOOL ret = (evaluatedObject != nil && [evaluatedObject isKindOfClass:[NSNull class]] == NO); 
```

# sql-server - 将数据插入 SQL Server 返回错误代码 00q

> ID：16021936
> 
> 赞同：3
> 
> 时间：2013-04-15T18:10:15.323
> 
> 标签：sql-server, cobol, sql-insert

首先：我的代码的最大部分是在几周前工作的。同时，我们已经从 MySQL 服务器切换到 SQL 服务器，并且我们对架构设计进行了一些更改。

我使用 Percobol，据我所知，它利用了 OpenCobol 编译器。

```
PERFORM 2010-GEBRUIKER-INSERT
PERFORM 2020-GEBRUIKER-JOINTABLE

2010-GEBRUIKER-INSERT.
MOVE "GEBRUIKER" TO GEBR_TYPE
EXEC SQL INSERT INTO Gebruikers
   VALUES ( TRIM( :LOGIN ), TRIM( :ACHTERNAAM ),
            TRIM( :EMAIL ), TRIM( :PROJECTCODE ),
            TRIM( :GEBR_TYPE ), TRIM( :VOORNAAM ),
            SHA1( TRIM( :WACHTWOORD ) ) )   
END-EXEC
.

2020-GEBRUIKER-JOINTABLE.
EXEC SQL INSERT INTO LeertrajectenGebruikersJoin
   VALUES (TRIM( :PROJECTCODE ), TRIM( :LOGIN))
END-EXEC
. 
```

而这些表的数据库设计如下所示：

![架构设计](https://i.stack.imgur.com/UZit2.jpg)

当我在`INSERT`语句之前显示值时`2010`，一切都正确显示。当我尝试在 之后显示它们时`INSERT`，它们不会显示。

抛出的错误（在我的记录器中被捕获）告诉我 errorcode `00q`。我一直在做一些搜索，但似乎无法找到它的含义。更重要的是，据我所见，以`00`should 开头的代码表明一切正常。

使用的字段是这样声明的，并从 CSV 文件中填充：

```
01 WS-INPUT.
        05 ACHTERNAAM PIC X(25) VALUE SPACES.
        05 VOORNAAM PIC X(15) VALUE SPACES.
        05 EMAIL PIC X(50) VALUE SPACES.
        05 LOGIN PIC X(15) VALUE SPACES.
        05 WACHTWOORD PIC X(11) VALUE SPACES.
        05 GEBR_TYPE PIC X(20) VALUE SPACES.
        05 PROJECTCODE PIC X(10) VALUE SPACES. 
```

我忽略了什么可能会返回此错误？同样重要的是：当我更改我的 JDBC 字符串或输入文件字符串时，我的记录器会通知我连接错误。因此，我假设连接和数据读取都按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:31:21.203

好的，因为这是你所做的，根据另一个问题，这里是从评论到回答:-)

定义一个 PIC -(4)9 字段。将您的 sql 错误代码移至该位置，然后打印/显示该代码。我想你会发现 q 是一个负数，你可以在你的 sql 文档中跟踪它。

# c++ - 大型 switch 语句的实现和效率

> ID：16021937
> 
> 赞同：0
> 
> 时间：2013-04-15T18:10:15.650
> 
> 标签：c++, if-statement, switch-statement

我在很多地方继承了一些包含消息处理代码的代码，这些代码是这样实现的：

```
switch(msgType)
{
    case msgType1:
        //....
        switch(msgSubType):
        {
            case msgType2:
            //....
        }
} 
```

大约有 10 种消息类型和 100 种消息子类型。这段代码经常被执行，我的问题是关于它的效率。这样的代码效率如何，尤其是在大量案例中？switch case 是否作为 if-else 语句实现？某种哈希表或跳转表会更好吗？我愿意为性能牺牲代码的可读性，并对任何答案/建议感兴趣。

# c++ - 从 C++ 中的字符串生成唯一无符号整数的最佳方法是什么？

> ID：16021941
> 
> 赞同：6
> 
> 时间：2013-04-15T18:10:33.097
> 
> 标签：c++, string, int, theory

我不需要代码（如果你愿意，你可以在代码中提供示例），但我想要这个理论。

假设我有以下功能：

```
UINT GenerateID(const char * string); 
```

我希望函数的结果看起来完全随机。我知道独一无二是不可能的，但这是我可以解释我的愿望的最好方式。

```
GenerateID("123"); //Could result in 999
GenerateID("123"); //Must also result in 999
GenerateID("124"); //Should result in something completely different 
```

当我自己尝试这个时，结果总是有大致相同的位数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:14:36.813

您正在寻找哈希函数。哈希函数接受任意长度的输入并将其转换为唯一数字（通常为十六进制）。

查看此页面以获取 SHA-1 哈希如何工作的示例：http: [//hash.online-convert.com/sha1-generator](http://hash.online-convert.com/sha1-generator)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T18:13:05.850

你看过 std::hash 吗？

[http://en.cppreference.com/w/cpp/utility/hash](http://en.cppreference.com/w/cpp/utility/hash)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T19:04:57.323

这是做不到的。假设您`int`是 32 位的。一个文本字符串将由和半打标点字符组成，总共大约 1 + 2*26 + 10 + 6 = 69 个字符`' '`。对于 6 个字符的字符串，您已经拥有比整数值更多的可能字符串 (log(2^32)/log(69) = 5.23)。使用64 位，你已经用完了 11 个字符。`a-zA-Z``0-9``long long`

正如其他答案所说，您可以使用[散列函数](http://en.wikipedia.org/wiki/Hash_function)（有很多浮动），它将字符串映射到整数并（希望）将它们平均分布在选定的整数范围内。

有一些技术可以构建*完美的哈希函数*，对于一组*固定*的字符串，可以创建一个函数和一个不太大的范围，以保证没有冲突（没有两个字符串给出相同的整数）。

如果在程序中使用它，并且字符串可以由攻击者控制，那么您将受到[算法复杂性攻击](http://www.cs.rice.edu/~scrosby/hash/CrosbyWallach_UsenixSec2003.pdf)（攻击者可以用碰撞的字符串淹没您）。

# javascript - 如何检测语言 iPhone 网络应用程序？

> ID：16021942
> 
> 赞同：4
> 
> 时间：2013-04-15T18:10:40.063
> 
> 标签：javascript, iphone, ios, detection

有没有办法检测用户的语言（在 iPhone 网络应用程序上），但不能使用 ip 或 gps 位置？我知道当你去土耳其时很烦人，而且你的应用程序是土耳其语的……所以……我怎样才能真正检测到系统的语言？

可以在 javascript 中使用吗？

如果它是英语，我应该想要，网络应用程序使用 eng.js 来表示荷兰语 dut.js 以及进一步......</p>

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:12:48.823

我想你可以`window.navigator.language`用 Javascript 做一个。

我建议您使用 ISO 语言标准来命名您的文件；比如英语（美国）的“en_US.js”和荷兰语的“nl_NL.js”。使用时这会使事情变得更容易`window.navigator.language`：

```
(function(){
    var s = document.getElementsByTagName('script')[0];
    var lang = document.createElement('script');

    lang.type = 'text/javascript';
    lang.async = true;
    lang.src = '/languages/' + window.navigator.language + '.js';

    s.parentNode.insertBefore(lang,s);
})(); 
```

但是，您应该检查“window.navigator.language.js”文件是否存在。

# bower - 在 bower 中安装没有预建文件的库的解决方案

> ID：16021945
> 
> 赞同：8
> 
> 时间：2013-04-15T18:10:56.883
> 
> 标签：bower

一些库在其 Github 存储库中没有已经构建的 JavaScript 文件，因为这些库的作者反对保留构建工件（例如 Sinon.JS）。有没有使用 Bower 处理这个问题的首选方法？

我知道我可以分叉存储库并将我的分叉注册到 Bower 的预构建文件中。我只是不确定这是否是处理此问题的最佳/正确方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-06T19:42:30.503

如果没有正确的 Bower 包注册，您可以从任何 git repo 安装（如果有正确的 git 标签，您可以指定版本），如果您提供 url，甚至可以从 .zip 或 .tar.gz 文件安装。这是来自[http://bower.io/](http://bower.io/)

```
bower install <package> 
```

where`<package>`可以是以下任何一项：

*   映射到在 Bower 注册的包的名称，例如 jquery。
*   远程 Git 端点，例如 git://github.com/someone/some-package.git。可以是公共的或私有的。
*   本地 Git 端点，即作为 Git 存储库的文件夹。
*   一个速记端点，例如，someone/some-package（默认为 GitHub）。
*   文件的 URL，包括 zip 和 tar.gz 文件。它的内容将被提取。

当然，您不会通过这种方式获得任何依赖项解析，但您可以手动将任何依赖项显式添加到 bower.json 文件中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T10:37:38.047

目前这是最好的方法。您还可以将其保存在本地并在“依赖项”中以完整路径引用它。我们正在努力增加作者发布组件的能力，例如 npm。

# winapi - “D2D1”中的“1”代表什么？

> ID：16021949
> 
> 赞同：5
> 
> 时间：2013-04-15T18:11:04.560
> 
> 标签：winapi, direct2d

`D2D1`是 Win32 中 Direct2D 技术的命名空间。但是我不明白这个名字的词源。这`D2D`部分最有可能是指**D**﻿direct﻿**﻿2D**，但最后**1**部分让我感到困惑......

还有很多以“1”为后缀的类：`IDWriteFactory1`、`IDWriteFont1`、`IDWriteTextLayout1`等——它们的目的是什么，与没有后缀的类似对象有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T19:02:17.627

COM 接口通常以递增的数字命名以允许版本控制。公开发布 COM 接口后，COM 规则规定不允许再更改接口，否则与现有代码的兼容性会中断。如果需要添加新功能，则必须公开新接口。让我们举个`IDWriteFactory1`例子。今天，这是第一个发布界面。将来，可能`IDWriteFactory2`会添加`IDWriteFactory1`以新方法扩展的功能。`IDWriteFactory2`现有代码被保留，因为他们不知道任何`IDWriteFactory1`关于`IDWriteFactory2`.

命名`D2D1`空间的命名可能类似。它可能被用于版本控制（Direct2D v1 ？）。也许`D2D2`将来会为不适合现有 Direct2D 架构的事物添加（Direct2D v2）命名空间。谁知道肯定。

# c# - RegEx 用于在字符串 .NET 上拆分文本

> ID：16021952
> 
> 赞同：-1
> 
> 时间：2013-04-15T18:11:11.540
> 
> 标签：c#, .net, regex

我为我的问题找到[了这个](https://stackoverflow.com/questions/6246269/php-regex-split-string-by)答案，但它适用于 PHP。也许.NET 有类似的东西？我知道`Split`方法，但我不明白如何在我的标签之外保存文本`<@any_text@>`，我需要一个正则表达式（根据任务的条件）。

例如：

```
string: aaa<@bbb@>aaa<@bb@>c

list: aaa
      <@bbb@>
      aaa
      <@bb@>
      c 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:25:52.257

在这里你已经通过了测试。在网络上找到它并不难，而且对您来说肯定会更快更好 - 尝试首先自己寻找解决方案，尝试一些代码，然后提出问题。这样你就会真正学到一些东西。

```
[TestMethod]
public void TestMethod1()
{
    string source = "aaa<@bbb@>aaa<@bb@>c";
    Regex r = new Regex("(<@.+?@>)");

    string[] result = r.Split(source);
    Assert.AreEqual(5, result.Length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:25:56.353

```
string input = @"aaa<@bbb@>aaa<@bb@>c";
var list = Regex.Matches(input, @"\<.+?\>|[^\<].+?[^\>]|.+?")
                .Cast<Match>()
                .Select(m => m.Value)
                .ToList(); 
```

# c++ - 使用模板类数据成员的c ++“没有适当的默认构造函数可用”错误

> ID：16021953
> 
> 赞同：0
> 
> 时间：2013-04-15T18:11:18.603
> 
> 标签：c++, default-constructor, template-classes

我做了一个模板类 Grid（我在头文件中说 T 的默认值是浮点数），我引用了源文件的一部分：

```
#include"Grid.h"

template <class T>
Grid<T>::Grid(unsigned int rows=1, unsigned int columns=1)
:Rows(rows),Columns(columns)
{
reset();
}

template<class T>
Grid<T>::~Grid(){}

template <class T>
void Grid<T>::reset()
{
vector<T> vec(Rows * Columns,T());
matrix = vec;
} 
```

其他成员函数可以读取/更改矩阵的值或计算它。

网格.h：

```
template<typename T=float> class Grid{

public:
        Grid(unsigned int, unsigned int);
        ~Grid();
        T getValue(unsigned int, unsigned int);
        void setValue(unsigned int, unsigned int, T);
        void reset();
        void write();

private:
        unsigned int Rows;
        unsigned int Columns;
        vector<T> matrix;
}; 
```

我在互联网上发现，为了使用模板类，我需要#include Grid.cpp 和 Grid.h，这样做我可以在 main() 中使用 clas Grid 及其成员函数。我还在 Grid.cpp 周围放置了一个预处理器包装器。

现在，当我尝试构建一个新类 PDEProblem 时，没有继承但使用 Grid 类型的成员，我收到错误：

```
 Error   2   error C2512: 'Grid<>' : no appropriate default constructor available      c:\users\...  15  

    Error   3   error C2512: 'Grid<T>' : no appropriate default constructor available   c:\users\...    15  
4   IntelliSense: no default constructor exists for class "Grid<float>" c:\Users\...    15 
```

PDE问题.h：

```
#include"grid.h"
#include"grid.cpp"

class PDEProblem: Grid<>
{
public:
PDEProblem(unsigned int,unsigned int);
~PDEProblem();
//some more other data members

private:
Grid<char> gridFlags;
Grid<> grid;
unsigned int Rows;
unsigned int Columns;
void conPot(unsigned int, unsigned int);
void conFlag(unsigned int, unsigned int);
}; 
```

PDEProblem.cpp：

```
#include"grid.h"
#include"grid.cpp"
#include "PDEProblem.h"

PDEProblem::PDEProblem(unsigned int rows=1,unsigned int columns=1)
    :Rows(rows), Columns(columns)
{
    conPot(rows, columns);
    conFlag(rows,columns);
}

PDEProblem::~PDEProblem(){}

void PDEProblem::conPot(unsigned int rows, unsigned int columns)
{
    grid=Grid<>(rows,columns);
}

void PDEProblem::conFlag(unsigned int rows, unsigned int columns)
 {gridFlags=Grid<char>(rows,columns);
    // some stuff with a few if and for loops which sets some elements of gridFlags to 1 and the others to 0
} 
```

我怎样才能解决这个问题？在我看来，我对所有相关内容都有默认设置？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:29:05.793

使用我的编译器 (Visual Studio 2010) 和您的代码，我可以通过将默认参数值从函数定义移动到函数原型来消除您的错误。具体来说：

网格.h

```
template<typename T=float> class Grid{

public:
    Grid(unsigned int rows = 1, unsigned int columns = 1);
...
}; 
```

网格.cpp

```
template <class T>
Grid<T>::Grid(unsigned int rows, unsigned int columns)
:Rows(rows),Columns(columns)
{
reset();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T13:00:12.500

您的问题是您的主类继承自 Grid，同时包含其他两个 Grid 实例。除了糟糕的设计之外，您的两个 Grid 实例没有任何显式构造函数，这就是您遇到错误的原因。设置默认值不是正确的方法。

# php - 编辑 $wpdb->get_results(SQL) 返回的对象

> ID：16021954
> 
> 赞同：0
> 
> 时间：2013-04-15T18:11:22.130
> 
> 标签：php, mysql, wordpress

我们使用 Wordpress 函数 $wpdb->get_results(SQL) 进行了令人讨厌的数据库调用。

在 PHP 中收到结果后，我们需要对结果进行一些更改。

所以谁能告诉我我该怎么做：

1) 从 get_results() 返回的对象中删除特定行。

2) 更改返回对象中特定行中特定列的值。

即如果返回的对象是$nastyData，我们需要：

1) 从 $nastyData 中删除特定行

2) 更改$nastyData 中特定行中特定列的值，例如$nastyData->name 为特定行。

有任何想法吗？

我曾考虑让 get_results() 将数据作为数组返回，但这会在我们代码的其他地方（代码期望接收对象的地方）产生问题。

谢谢，马德斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:42:52.707

首先，您的**“讨厌的数据库调用”**应该被优化为不那么讨厌。更具体地说，只查询你想要的结果，这样你就不必删除后面的东西。这是最好的解决方案。

如果您坚持尝试修改对象，这是一种解决方法。根据[文档](http://codex.wordpress.org/Class_Reference/wpdb)，返回对象时，它们以两种方式之一返回：

> OBJECT - 结果将作为行对象的数字索引数组输出。
> 
> OBJECT_K - 结果将作为行对象的关联数组输出，使用第一列的值作为键（重复项将被丢弃）。

因此，知道结果是一个对象数组，我们可以使用一个`foreach`构造来访问每个单独的实例：

```
$results = $wpdb->get_results( $nastySQL );

foreach($results as $index => $result)
{
   // Change name column to FirstName using copy and delete
   $tmp = $result->name;
   unset($result->name);
   $result->FirstName = $tmp;

   // Remove specific row
   if( $result->name == "Tom")
   {
      unset($results[$index]);
   }
} 
```

# python - SyntaxError：运行 python manage.py syncdb 时语法无效（connections.py，第 36 行）

> ID：16021955
> 
> 赞同：0
> 
> 时间：2013-04-15T18:11:26.767
> 
> 标签：python, mysql, django

我在 Windows 7 上，在遇到很多问题后安装了 Mysql 5.5 和 python 3.3 和 django 1.5.1，我在 mysql 中创建了数据库，当我第一次运行`python manage.py syncdb`时我得到了`SyntaxError: invalid syntax (connections.py, line 36)`

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'test_django',                      # Or path to database file if using sqlite3.
        # The following settings are not used with sqlite3:
        'USER': 'root',
        'PASSWORD': 'root',
        'HOST': 'localhost',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
        'PORT': '3306',                      # Set to empty string for default.
    }
} 
```

当然密码和数据库名称是正确的。有任何想法吗？

编辑-connections.py 在 mysqldb 模块中，在第 36 行有

```
 raise errorclass, errorvalue 
```

我怎样才能看到回溯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T03:50:27.270

我有相同的第 36 行语法错误并解决了它是 Mysql 驱动程序与 Python 3 的不匹配导致了这个 [http://bunwich.blogspot.com/2014/02/finally-mysql-connector-that-works-with。 html](http://bunwich.blogspot.com/2014/02/finally-mysql-connector-that-works-with.html)可以帮助解决这个问题

还 ：

```
DATABASES = {
    'default': {
        'NAME': 'mydatabase',
        'ENGINE': 'mysql.connector.django',
        'USER': 'myuser',
        'PASSWORD': 'secretpassword',
        'OPTIONS': {
          'autocommit': True,
        },
    }
} 
```

注意 ENGINE is`mysql.connector.django`和 not `django.db.backends.mysql`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:28:05.633

您使用的不是最新版本的 Django 1.5，它是第一个与 Python 3 兼容的版本。早期的 Django 版本仅与 Python 2.x 兼容。

# javascript - 在 dijit.Menu 上设置最大高度

> ID：16021957
> 
> 赞同：1
> 
> 时间：2013-04-15T18:11:32.427
> 
> 标签：javascript, css, dojo

我有一个使用 dijit.menu 的弹出子菜单，由于动态输入，它可能会很长。我想设置一个最大高度和`overflow-y:auto`dijit.menu。所以当它变得太长时它会有一个滚动条。

```
var subMenu  = new dijit.Menu({ parentMenu: this.mainMenu});

//....add a lots of submenu items here

this.mainMenu.addChild(new dijit.PopupMenuItem({label: "some label", popup: subMenu})); 
```

问题是 dijit.menu 的顶层是 a `<table>`，并且`max-height`无法处理它。此外，与 不同`dijit.form.select`的是，dijit.menu 不`maxHeight`作为参数。

我注意到很久以前在dojo上有一张描述这个问题的票，并标记为已修复。但是，我仍然不知道如何在菜单上设置 maxheight。（修复似乎不再存在）

[票证 #9086（在 dijit.Menu 上允许 CSS 高度）](http://bugs.dojotoolkit.org/ticket/9086)

任何关于我如何能够做到这一点的提示都会受到重视。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:08:26.623

正如您所指出的，Dojo 处理小部件的 DOM 创建的方式存在问题`dijit.Menu`。问题不在于`maxHeight`不被接受为参数（因为您可以将其`style`作为对象或字符串的一部分传递到小部件的属性中），而是如何应用样式。

`Menu`您提到小部件的“顶级”是`<table>`节点。然而，这并不是全部真相。该节点是 Dojo 作为“顶级”呈现给客户端（您）的`domNode`，但`Menu`实际上包装在另一个`<div>`您无法直接从小部件访问的节点中，并且您的样式*应该*应用于此节点。

这`<div>`具有属性`class="dijitPopup dijitMenuPopup"`，但我怀疑您是否要将样式设置为全局 Dijit 弹出窗口/菜单。为避免这种情况，您可以`baseClass`在小部件上设置属性，如下所示：

```
new Menu({
    baseClass: "myCustomMenu",
    targetNodeIds: ["myTarget"]
}); 
```

这会将顶级`<div>`属性更改为 read `class="dijitPopup myCustomMenuPopup"`。这为您提供了一个类，您可以使用实现目标所需的 CSS 样式对其进行修改：

```
.myCustomMenuPopup {
    max-height: 200px;
    overflow-y: auto;
    overflow-x: hidden;
} 
```

[这是 jsfiddle 中的一个工作示例](http://jsfiddle.net/H7Zh8/44/)。

# java - 找不到符号变量

> ID：16021958
> 
> 赞同：1
> 
> 时间：2013-04-15T18:11:34.817
> 
> 标签：java, do-while

错误是“找不到符号变量**b** ” 我也想了解如何正确编写**do while 循环**的语法 谢谢。

```
import java.util.*;

public class pract3ex10 {

    public static void main(String[] args) {
        Scanner s = new Scanner(System.in);
        do {
            System.out.println("Enter a positive");
            int n = s.nextInt();
            int x = n;
            int m = 0;
            if (x < 0) {
                System.out.println("Thank You!");
            } else {
                while (x > 0) {
                    x = x / 10;
                    m++;
                }
                System.out.println("Number of digits in " + n + "= " + m);
            }
        } while (n > 0);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:13:45.807

变量的范围`n`目前仅在 do-while 块内，在大括号内。如果您希望它可以在更大的范围内访问，即使这意味着循环的条件，也可以在循环之外声明它。

```
int n;
do
{
    n = s.nextInt();
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:48:24.467

n 应该在 do..while 块之前声明...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T18:13:27.153

```
int n;
do {
    ...
    n = s.nextInt();
    ...
} while (n > 0); 
```

# php - 如何将变量传递给 FullCalendar ResourceViews URL

> ID：16021961
> 
> 赞同：0
> 
> 时间：2013-04-15T18:11:44.110
> 
> 标签：php, variables, fullcalendar

我正在为 jQuery 使用 fullCalendar 插件，但在传递变量时遇到了问题。

基本上，我想要的是创建一个搜索并将搜索输入传递给资源选项的 url。

我有一个搜索代码，它看起来像这样

```
<form action="employees.php" method="POST"> 
    <input type="text"   name="name" size="25" maxlength="230" 
           style="margin-left:5px;" value="" />
    <br /> 
    <p style="padding-top:10px; margin-left:5px;">
     <input type="submit" value="Submit" class="button" />
   </p> 
</form> 
```

我的带有日历脚本的 employees.php 如下所示：

```
<script type='text/javascript'>
$(document).ready(function() {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    var calendar = $('#calendar').fullCalendar({
        header: {
            left: 'today prev,next',
            center: 'title',
            right: ''
        },
        defaultView: 'resourceWeek',
        refetchResources: true,
        selectHelper: true,
        numberOfWeeks: 1,
        weekends: false,
        firstDay: 1,    
        editable: false,
        selectable: false,
        refetchResources: true,
        selectHelper: true,
        resources: 'resource_employee.php',
 // more code
        ?> 
```

我的 resource_employee.php 页面看起来像这样

```
<?php
// some connection code
$name = mysql_real_escape_string($_POST[name]);

//$name = 'Goo'; 

//$result = mysql_query("SELECT CONCAT(first_name, ' ', last_name) AS name, employeeID FROM ecc_employee WHERE first_name != '' ");
$result = mysql_query("SELECT CONCAT(first_name, ' ', last_name) AS name, employeeID FROM ecc_employee WHERE CONCAT(first_name, ' ', last_name) LIKE '%$name%' ");

$resources = array();

while ($row=mysql_fetch_array($result)){            
    $name = ($row['name']);
    $id =  $row['employeeID'];

    $resources[] = array(
    'name' =>  "$name",
    'id' => "$id"
    );

}
echo json_encode($resources);

?> 
```

不幸的是，这不会返回任何内容，因为 $_POST[name] 没有被拉入此页面，因为它在脚本中。

如果我取消注释 //$name = 'Goo'; 然后它将呈现，所以我知道它不是 SQL，它正在获取 $_POST。

如何将 $_POST[name] 放入查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:55:07.363

所以我能够通过执行以下操作获得 $_GET['employeename'] ：

```
<script type='text/javascript'>
$(document).ready(function() {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    var calendar = $('#calendar').fullCalendar({
        header: {
            left: 'today prev,next',
            center: 'title',
            right: ''
        },
        defaultView: 'resourceWeek',
        refetchResources: true,
        selectHelper: true,
        numberOfWeeks: 1,
        weekends: false,
        firstDay: 1,    
        editable: false,
        selectable: false,
        refetchResources: true,
        selectHelper: true,
        resources: 'resource_employee.php?employeename=<?php echo $_GET['employeename']; ?>',
        events: 'events.php', 
```

很简单，不知道为什么在任何其他问题中都没有回答这个问题。希望这可以为一些可怜的人节省时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:02:02.457

它应该是`$_POST['name']`单引号

# asp.net-mvc - ASP.NET MVC 3 SQLMembership 注册和 EF 5 数据库优先

> ID：16021964
> 
> 赞同：0
> 
> 时间：2013-04-15T18:11:50.147
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-5, sqlmembershipprovider

我有一个名为 Demographics 的表，它通过 userId 字段与 aspnet_Users 表相关。此 Demographics 表有大约 20 个字段，必须在用户注册站点时插入这些字段。

我能够`aspnet_Users.UserId`在控制器操作中捕获刚刚注册的用户`Register(RegisterModel model)`，但是如何为这个用户设置 Demographics 类中的属性（EF 自动生成了这个 Model 类并且它在一个单独的项目中）？Demographics 类的所有值都应来自 Microsoft 创建的注册页面。

`aspnet_Users(UserId, etc....)`

`Demographics(UserId, FirstName, LastName, Address, AgeRange, etc...)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:20:04.190

您必须创建一个视图模型，其中包含`UserMembership`和 的必要信息`Demographics`。然后你可以让你的`Create`控制器为用户调用`Register(RegisterModel model)`并调用`Register(Demographics demo)`

# tsql - ServiceStack 和 Ormlite 可以像 SQL CASE 语句那样更新多条记录吗？

> ID：16021973
> 
> 赞同：2
> 
> 时间：2013-04-15T18:12:07.943
> 
> 标签：tsql, servicestack, ormlite-servicestack

在这种情况下，有多个行具有相同的设备 GUID，因为多个用户可能在设备上使用相同的应用程序（但不能同时使用......除非他们非常接近）。此查询的作用是获取共享相同设备 GUID 的所有行，然后如果 UserId 匹配 (3012)，则将 InUse 位设置为 true (1)。该集合中具有不同用户 ID 的任何行都将其 InUse 位设置为 false (0)。这避免了对服务器进行多次调用。

```
UPDATE Devices 
SET InUse = (CASE UserId WHEN 3012 
THEN 1 ELSE 0 END) 
WHERE DevGuid = '94F74150-26B0-4396-982C-675A14A66FAD'; 
```

如果有办法使用 ServiceStack/Ormlite 做到这一点，由于 IOC 的优势，我更愿意走那条路。但其他考虑因素包括尽可能少地调用服务器。此外，使用 ADO.NET 成为“老派”使我能够最流畅地使用 SQL Server Geography 和 Geometry 类型。（由于现实世界的限制，我已经是微软 Azure 移动服务的难民）。

# sql - 没有得到 EXCEPT Right 的语法

> ID：16021974
> 
> 赞同：3
> 
> 时间：2013-04-15T18:12:08.957
> 
> 标签：sql, sap-ase

我是 sybase 自适应服务器`12.5.4`，这个查询似乎没有运行

```
SELECT login,account from tempdb.guest.acct_info_dr3
EXCEPT
SELECT login,account from tempdb.guest.acct_info_dr2 
```

我检查了空格等。但我不断收到此错误`Incorrect syntax near Except`。

奇怪的 MINUS 是 oracle 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:29:19.007

您可以随时将其改写为`left outer join`：

```
select dr3.login, dr3.account
from tempdb.guest.acct_info_dr3 left outer join
     (select distinct login, account
      from tempdb.guest.acct_info_dr2
     ) dr2
     on dr2.login = dr3.login and dr2.account = dr3.account
 where dr2.login is NULL 
```

这将起作用，除非列包含 NULL 值。如果是这样，则可以通过其他逻辑来解决。

# c++ - 做一个 for(EVER) 循环。系统不想启动

> ID：16021975
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:12:17.563
> 
> 标签：c++, arrays, for-loop

我在 C++ 中编写了这样的代码：

```
int main() {
    int myArray[5];
    int n =1;
#define EVER ;;
    for(EVER){
       myArray[n] +=n++;
    }
    return 0;
} 
```

我让它运行，我得到一个蓝屏。在此之后我的电脑不想启动。我做错了什么？我是 C++ 新手。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T18:25:51.453

由于程序如此之小，您的程序充满了令人印象深刻的未定义行为。未定义的行为意味着程序的行为是不可确定的，就 C++ 标准而言。换句话说，就 C++ 标准而言，任何事情都可能发生。

```
int myArray[5]; 
```

在此语句中，您保留了`myArray`未初始化的值。虽然这本身并不是未定义的行为，但是当您在写入这些值之前尝试读取这些值时，您会这样做。

```
myArray[n] += n++; 
```

该语句本身，没有其他上下文，是未定义的行为。没有指定是先评估`n`in`myArray[n]`还是先评估in `n++`。换句话说，这两个表达式相对于彼此是无序的。一个是读取 的值`n`，另一个是修改它。读取变量的值并在没有干预序列点的情况下对其进行修改是未定义的行为。

最后，假设上面的代码以您期望的方式运行，您将永远循环，不断增加 n。一旦 n 达到 5，您就不再有权读取或写入`myArray`. 一旦 n 达到 6，您就不再有权引用这些位置。这样做是更多未定义的行为。

我描述的前两个问题虽然很糟糕，但实际上它们很可能不会导致您所看到的那种行为（至少不会由它们自己引起）。第三个，写入数组末尾之外的内存位置，这很可能是您看到的主要错误的罪魁祸首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:56:25.140

这个版本可以正常工作。它将填充数组，但不会填充所有计算机内存。

```
int main()
{
  int myArray[5];

  for(int n = 1;;++n)
    myArray[n % 5] = n;
} 
```

# queue - 如何与 wso2 BAM 服务器通信 apache MQ？（没有 ESB 保持简单）

> ID：16021983
> 
> 赞同：0
> 
> 时间：2013-04-15T18:12:40.447
> 
> 标签：queue, wso2, wso2bam

我正在尝试使用 wso2 BAM 服务器获取一些简单的 Web 统计信息，我已经安装了它，我了解事件是如何定义的、存储在 casssandra 数据库等中的，但我缺少最重要的东西：如何将事件本身传递给BAM 服务器？

我已经编写了系统，其中 json 文件存储在一个文件（“队列”）中，我的 java 进程每 30 秒读取和处理一次，我认为这会很相似，但事实是我很迷茫。

7611端口是TCP，监听。
我是否必须通过它向 BAM 服务器发送事件？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:36:53.390

AFAIK，Apache mq 不直接支持 WSO2 BAM。您必须使用 ESB 或 CEP 通过 thrift 将事件发送到 BAM（然后您可以使用 apache mq 将事件发送到 ESB/CEP 并通过这些产品中的任何一个，您可以将事件发送到 BAM）。

但是您可以使用 REST api 将事件发送到 BAM，这是一种更简单的方法。请参考文档 [1]。我认为 BAM 的未来版本将支持 jms（仅供参考，请参阅 [2]）。

[1] [http://docs.wso2.org/wiki/display/BAM220/REST+API](http://docs.wso2.org/wiki/display/BAM220/REST+API)

[2][带有 JMS 的 WSO2 BAM](https://stackoverflow.com/questions/13619867/wso2-bam-with-jms)

纳克斯，

莫汉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:24:34.477

BAM 可以通过 REST API 或 Thrift API 获取事件。默认情况下，7611 是不安全的 Thrift 端口，而 7711 是安全的 Thrift 端口。由于目前 BAM 没有开箱即用的 Apache MQ 数据代理，因此您必须自己编写一个。如果您想使用 Java 将事件直接发布到 BAM，您可以使用 WSO2 代码库中的 DataBridge 组件。（即，使用[https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.1.0/components/data-bridge/org.wso2.carbon.databridge.agent.thrift/4.1.1](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.1.0/components/data-bridge/org.wso2.carbon.databridge.agent.thrift/4.1.1)）

# python - Python SciPy UnivariateSpline 返回 NaN - 范围内的值

> ID：16021987
> 
> 赞同：3
> 
> 时间：2013-04-15T18:12:53.613
> 
> 标签：python, scipy

我正在尝试使用 SciPy`UnivariateSpline`来定位曲线上的一个点。不幸的是，我的结果是`nan`。
这是一个最小的例子：

```
from scipy.interpolate import UnivariateSpline  

spline = UnivariateSpline([0.6, 0.4, 0.2, 0.0], [-0.3, -0.1, 0.1, 0.3], w=None, bbox=[None, None], k=1, s=0)  
POINT = spline([0.15])  
print POINT 
```

结果是`[ NaN]`。我错过
了哪个功能？`UnivariateSpline`

我正在使用 Python 2.6.6 和 scipy 版本 0.7.2

我不能保证我一直在增加数据点，所以`interp`可能不是替代方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T21:20:37.053

正如[UnivariateSpline](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.UnivariateSpline.html#scipy.interpolate.UnivariateSpline)的文档字符串所述，其中的值`x`必须增加。如果要使用 UnivariateSpline，则必须对数据进行排序。例如这样的：

```
In [71]: x = np.array([0.6, 0.4, 0.2, 0.0])

In [72]: y = np.array([-0.3, -0.1, 0.1, 0.3])

In [73]: order = np.argsort(x)

In [74]: spline = UnivariateSpline(x[order], y[order], w=None, bbox=[None, None], k=1, s=0)

In [75]: spline([0.15])
Out[75]: array([ 0.15]) 
```

# c++ - 重用 Asio 连接

> ID：16021988
> 
> 赞同：2
> 
> 时间：2013-04-15T18:12:56.417
> 
> 标签：c++, http, tcp, boost-asio, keep-alive

我正在做一个项目，目前我有一个网络服务器。我必须添加功能，以便对于每个请求，我需要向其他服务器发送多个请求，获取响应，并将结果发送回原始客户端。这些服务器的吞吐量很高，所以我开始担心套接字的数量以及设置新线程/套接字以通过许多套接字发送许多请求的速度。所以我开始认为有一个（或几个连接）对每个客户端开放将有助于解决这个问题。不过，我不确定持久连接和增强 ASIO 是如何工作的。我有一些问题：

-如何使用 ASIO tcp 套接字设置保持活动时间。

- 我可以通过同一个套接字发送多个并发请求吗？我会遇到结果顺序的问题吗（每个结果都应该有一个 Id，所以我的意思不是顺序为乱序发送的结果，而是更多的数据包顺序，如果响应是多个数据包，我会对数据包的顺序有问题吗）。

如果这也很重要，所有请求都是 HTTP GET/POST 请求。

本主题的任何信息将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:42:18.693

TCP 套接字充当数据流，您在一端写入的数据将在另一端以相同的顺序接收。如果您的协议可以处理它，您可以通过同一个套接字发送多个请求。

您提到并发请求，因此您需要非常小心，不要交错两个不同请求的写入调用。如果您可以确保每个结果都是原子写入的，那么我认为将套接字用于多个请求没有问题（您可以使用回复队列来做到这一点）。

[您可以在此处](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/socket_base/keep_alive.html)设置标准套接字保持活动状态。

# sql - 比较两个表并找到部分匹配（SQL / Oracle）

> ID：16021990
> 
> 赞同：0
> 
> 时间：2013-04-15T18:12:59.637
> 
> 标签：sql, join, wildcard, mismatch

我还没有完全找到这个问题的答案，这似乎有点棘手（是的，我是初学者）。我有两张桌子；`eb_site`并且`eb_register`它们都有`id_glo`连接它们的柱子。尽管这些字段中的值并不完全相同，但数字是连接因素。一个例子：

`eb_site = kplus.hs.dlsn.3074823`

`eb_register = kplus.hs.register.3074823-1"`

我如何选择那些，即列出 eb_register 中的数字与 in 中的数字不同的列表`eb_site`（并忽略 dlsn/register 之间的不匹配）。

并且`eb_register`在示例的末尾有一个-1（固定的末尾没有-1）。

感谢您的任何回复。

编辑：哎呀对不起伙计们，措辞不好，已编辑

Rgds,

施泰纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:31:35.507

解决方案的质量将取决于可能的`id_glo`值和您可以使用的 sql 方言。作为开始，尝试

```
 select s.id_glo
         , r.id_glo
      from eb_site     s
inner join eb_register r on (     replace(replace(s.id_glo, 'kplus.hs.register.', ''), 'kplus.hs.dlsn.', '') <> replace(replace(r.id_glo, 'kplus.hs.register.', ''), 'kplus.hs.dlsn.', '')
                              and replace(replace(r.id_glo, 'kplus.hs.register.', ''), 'kplus.hs.dlsn.', '') not like replace(replace(s.id_glo, 'kplus.hs.register.', ''), 'kplus.hs.dlsn.', '') || '-%'
           )
         ; 
```

此查询假定：

*   没有与您给出的前缀不同的前缀
*   数字补码只会出现在记录中`eb_register`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:23:34.517

如果数字匹配，则数字的反面匹配。下面使用 SQL Server 语法从每个键中提取数字（和最后的小数点）：

```
select *
from eb_site s join
     eb_register r
     on left(REVERSE(s.id_glo), charindex('.', reverse(s.id_glo))) =
        left(REVERSE(r.id_glo), charindex('.', reverse(r.id_glo))) 
```

在其他数据库中，`charindex()`可能需要用另一个函数替换，例如`instr()`、`location()`或`position()`。

# java - 将 Object[] 从 hashmap 键集转换为 String[]？

> ID：16021991
> 
> 赞同：19
> 
> 时间：2013-04-15T18:13:02.503
> 
> 标签：java, hashmap

```
Set<String> keys = mappings.keySet();
String[] keyArray = (String[]) keys.toArray();

String hashmapDetails = "";
for(int p=0; p < keyArray.length; p++){
    String[] details = keyArray[p].split("/");
    hashmapDetails += details[1];
    hashmapDetails += mappings.get(keyArray[p]);
    if (p != keyArray.length -1){
        hashmapDetails += ";";
    }
} 
```

请原谅我缺乏理解，但我正在尝试探索哈希图的用法。我知道 toArray() 返回一个 Object[]。但是，不能将其类型转换为 String[] 吗？正如您在代码中看到的那样，稍后，我需要遍历一个数组并进行一些拆分和其他字符串操作。

通过这样做，我得到了一个错误：

```
java.lang.ClassCastException: java.lang.Object[] cannot be cast to java.lang.String[] 
```

非常感谢任何关于我应该如何解决这个问题的指导。谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-15T18:16:40.730

您不能简单地将`Object[]`数组转换为`String[]`数组。您应该改用[的通用版本`toArray`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#toArray%28T[]%29)，这应该会更好：

```
String[] keyArray = keys.toArray(new String[keys.size()]); 
```

另请注意，您可以简单地迭代`entrySet`（这将保存所有`get`调用）并使用 StringBuilder 以获得更好的字符串连接效率：

```
StringBuilder hashmapDetails = new StringBuilder();
for(Map.Entry<String, String> e : mappings.entrySet()) {
    String[] details = e.getKey().split("/");
    hashmapDetails += details[1];
    hashmapDetails += e.getValue();
    hashmapDetails += ";";
}

String result = hashmapDetails.substring(0, hashmapDetails.length() - 1); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-19T21:29:35.703

可以将 keyset 转换为 String[]。尝试这个：

```
String[] keys = map.keySet().toArray(new String[0]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T18:18:58.200

您可以只遍历`Set`，我认为这`toArray`一步没有必要。像这样的东西：

```
Set<String> keys = mappings.keySet();

String hashmapDetails = "";
for(String key : keys){
    String[] details = key.split("/");
    hashmapDetails += details[1];
    hashmapDetails += mappings.get(key);
    if (p != keys.size() -1){
        hashmapDetails += ";";
    }
} 
```

# android - Android 应用无法在 2.2 上加载本机库代码

> ID：16021993
> 
> 赞同：1
> 
> 时间：2013-04-15T18:13:08.340
> 
> 标签：android, android-ndk

在使用 C++ (NDK) 构建的共享代码库的应用程序上工作时，Android 2.2 无法加载该库。

当我转到某个视图时，它需要加载从 .so 本机库获得的结果，它适用于 2.3+，但在 2.2 上，应用程序只是进入黑屏。我认为它在加载本机代码的过程中会死掉，但不确定发生了什么。

例如：在 2.3 上，ADT 详细输出如下所示：

> 04-15 11:49:07.210: 调试/dalvikvm(26048): 试图加载 lib /data/data/com.app.myapp/lib/libViewer.so 0x4051b858

04-15 11:49:07.220：调试/dalvikvm（26048）：添加共享库 /data/data/com.app.myapp/lib/libViewer.so 0x4051b858

但在 2.2 上。它只是停留在：

> 04-15 11:56:27.123: 调试/dalvikvm(275): 试图加载 lib /data/data/com.app.myapp/lib/libViewer.so 0x45f3dc28

它就坐在这里……

有没有人遇到过这样的问题？

从 Java 的代码角度来看，它冻结在行：

```
static {
     System.loadLibrary("nativeViewer");//<-- goes into neverland here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:58:56.957

我在用 gcc 4.7 编译时遇到了这个问题。当我改回使用默认编译器 gcc 4.6 时，我不再遇到您描述的问题。我查看了 ndk 文档，从来没有看到任何关于 gcc 4.7 不能在 android 2.2 及更早版本上运行的信息，但他们确实说 gcc 4.7 是实验性的。

# php - 将当前页面 URL 保存到 MySQL 数据库

> ID：16021994
> 
> 赞同：-2
> 
> 时间：2013-04-15T18:13:09.557
> 
> 标签：php, mysql, html

我正在使用一个 javascript 步进音序器，它将当前用户输入的鼓模式记录到 URL 中。

例如，在任何用户输入之前，url 看起来像：

```
http://localhost:8888/member-index.php#/0000/0000/0000/0000/0000/0000/0000 
```

然后如果用户输入一个基本的鼓点，则 URL 可能如下所示：

```
http://localhost:8888/member-index.php#/8020/0808/aaaa/0000/0000/0000/0000 
```

所以我希望能够将用户创建的模式保存到我的 MySQL 数据库中，以便用户可以保存和加载他们之前创建的节拍。

有人可以给我一个简单的例子，说明将页面当前 URL 保存到数据库中的 PHP 代码是什么样的？

编辑：

人们说要使用 $_GET - 我如何将它与像我这样的 URL 一起使用，该 URL 分为七个部分，用“/”分隔它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:26:54.203

**简答**

改为使用`$_GET`。

**长答案**

使用 PHP 检索 url 不会包含 之后的内容`#`，因为它只发送到浏览器而不是服务器。正如@Kazar 在对[类似问题](https://stackoverflow.com/questions/967649/get-entire-url-including-query-string-and-anchor)的回答中所说，您可以使用 Javascript 并`document.location.hash`在哈希后检索信息，然后通过 ajax 将其发送到服务器。

但幸运的是，有一个更好的内置解决方案，即`$_GET`（[此处的文档](http://php.net/manual/en/reserved.variables.get.php)）。

而不是这样构建您的网址：

```
member-index.php#/8020/0808/aaaa/0000/0000/0000/0000 
```

让它像这样：

```
member-index.php?a=8020&b=0808&c=aaaa&d=0000&e=0000&f=0000&g=0000 
```

然后您可以在 PHP 中轻松检索此信息：

```
$a = $_GET['a'];
$b = $_GET['b'];
... 
```

然后将其传递给数据库。（更好的是，用任何顺序的实际含义替换`a`,`b`等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:20:29.627

您可以使用 htaccess 和 url 重写将所有请求重定向到您检查 url 的特定 php。请参阅：[通过 index.php 重新路由所有 php 请求](https://stackoverflow.com/questions/9694118/rerouting-all-php-requests-through-index-php)

尽管如此，我认为使用 get/post 或请求正文更容易发送您的数据。

# c - 处理函数中结构数组的成员

> ID：16021999
> 
> 赞同：3
> 
> 时间：2013-04-15T18:13:26.060
> 
> 标签：c, arrays, structure, member

假设我有

```
struct my_type_t {
    int x;
    int y;
    int z;
};

struct my_array_t {
    struct my_type_t test;
    int otherstuff;
};

int main(void) {
    struct my_array_t arrayofstructs[200];
    somefunction(arrayofstructs);

    return 0;
}

void somefunction(struct my_array_t *arrayofstructs, somevariable) {
    for (int i; i < 200; i++) {
        //Do stuff to 
        arrayofstructs->test[i].somevariable;
    }
} 
```

如何传入一些变量来告诉函数处理结构数组的成员（x、y 或 z）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:19:59.363

**事实一：** 你应该通过，`arrayofstructs`而不是`&arraystructs`。

处理您的问题的方法是这样的：

```
void someFn(data_type *var , int somevar) {
  ...
  ...
  ...
  switch(somevar) {

  case <some_value>:
  some_task;
  break;

  ...
  ...
  ...
  } //End switch

  } 
```

即，您传递与每个成员相关的标识符，并使用选择性结构根据输入的标识符执行某些任务。

举个简单的例子，`somevar`可以是整数，你必须知道整数中的值对应什么。

**编辑**

或者您可以执行以下操作

```
struct mystr{
  int mem[3];
}

void someFn(struct mystr a, int somevar){ 

  //now access those with a[i].mem[somevar]
} 
```

这有助于清除冗余:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:45:23.983

使用 switch case 的其他答案可能更干净，但如果一些 hackiness 是好的，你可以使用这样的东西：

```
#define GET_STRUCT_OFFSET(st, m) ((size_t) ( (char *)&((st *)(0))->m - (char *)0 )) 
```

（请参阅[为什么这个 offsetof() 的实现有效？](https://stackoverflow.com/questions/713963/why-does-this-c-code-work)）

要访问结构的成员，您可以执行以下操作：

```
int main(void) {
    struct my_array_t arrayofstructs[200];
    somefunction(arrayofstructs, GET_STRUCT_OFFSET(struct my_type_t, x));

   return 0;
}

void somefunction(struct my_array_t *arrayofstructs, int offset)
{
    for (int i; i < 200; i++) {
        //Do stuff to 
        (((void*)&arrayofstructs[i].test) + offset);
    }
} 
```

再次非常hacky，但它确实有效，这是一个简单的测试：http: [//ideone.com/zwvTY1](http://ideone.com/zwvTY1)

编辑：

有`<stddef.h>`一个`offsetof`宏使用它来完成相同的事情代码：http: [//ideone.com/9aDo2c](http://ideone.com/9aDo2c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:16:55.007

```
enum FieldTypes
{
   FIELD_X,
   FIELD_Y,
   FIELD_Z
};

int main(void)
{
    struct my_array_t arrayofstructs[200];
    somefunction(arrayofstructs,FIELD_X);

    return 0;
}

void somefunction(struct my_array_t *arrayofstructs, FieldTypes somevariable) 
{
    switch( somevariable )
    {
        case FIELD_X:

           for (int i; i < 200; i++) 
           {
               //Do stuff to arrayofstructs->test[i].x; 
           }
           break;

        case FIELD_Y:

           for (int i; i < 200; i++) 
           {
               //Do stuff to arrayofstructs->test[i].y; 
           }
           break;

        case FIELD_Z:

           for (int i; i < 200; i++) 
           {
               //Do stuff to arrayofstructs->test[i].z;
           }
           break;
    }
} 
```

如果意图始终执行相同的操作，但只是根据传递的值在结构的不同元素上执行，那么您可以这样做......

```
void somefunction(struct my_array_t *arrayofstructs, FieldTypes somevariable) 
{
    for (int i; i < 200; i++) 
    {
        int* workingValue;

        switch( somevariable )
        {
            case FIELD_X: workingValue = &arrayofstructs->test[i].x;  break;
            case FIELD_Y: workingValue = &arrayofstructs->test[i].y;  break;
            case FIELD_Z: workingValue = &arrayofstructs->test[i].z;  break;
        }

        // do stuff to *workingValue -- no redundant code here
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T18:21:44.080

只需使用一些不同的值来让您的函数区分它们。你可以使用 an `enum`， some `#define`s 或者 a `char`，像这样：

```
void somefunction(struct my_array_t *arrayofstructs, char whichVar) {
    for (int i; i < 200; i++) {
        //Do stuff to 
        switch(whichVar){
            case 'x': arrayofstructs->test[i].x; break;
            case 'y': arrayofstructs->test[i].y; break;
            case 'z': arrayofstructs->test[i].z; break;
        }
    }
} 
```

请注意，使用`#define`s 或`enum`s 通常被认为是更好的做法，因为您可以为您的值赋予有意义的名称。这里的`char`用法只是一个例子。

另请参阅[什么是幻数，为什么它不好？](https://stackoverflow.com/questions/47882/what-is-a-magic-number-and-why-is-it-bad)