# StackOverflow 问答 15301000-15301999

# linux - 用于更新计算机之间文件差异的脚本

> ID：15301004
> 
> 赞同：0
> 
> 时间：2013-03-08T18:39:46.517
> 
> 标签：linux, ssh, synchronization

我有台式电脑和笔记本电脑，我可以在其中使用相同的程序修改相同的文件。我想自动同步我在其中任何一个中所做的更改。我想知道是否存在一些已经编码的脚本来完成这项工作，或者，如果没有的话，命令来比较通过 ssh 在两台计算机中创建感兴趣的文件并用新的替换旧的。

示例：我修改笔记本中的 /home/text.txt 文件，在关闭它之前我想执行一个脚本，该脚本会自动将 text.txt 文件保存到我的台式计算机 /home/text.txt 因为一个比另一个更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:59:41.743

我想到了双向同步器`unison`，它不需要互联网访问（尽管它确实需要两个系统之间的网络连接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:42:17.470

最简单的解决方案是使用[Dropbox](https://www.dropbox.com/)。在两者上安装它，创建一个帐户，然后登录。问题解决了。

# ssl - keytool 找不到别名

> ID：15301005
> 
> 赞同：9
> 
> 时间：2013-03-08T18:39:51.037
> 
> 标签：ssl, alias, keytool

我有一个需要通过别名引用的 pfx 证书。问题是 keytool 找不到该别名，即使它显示在列表中。

```
keytool -list -keystore temp.pfx -storetype pkcs12 
```

给了我这个：

```
...
0c5fc7cef279ca390acd2d6bac9ffcf8_ba0cbbb3-323d-4394-8e76-47838adb2a9c, 08/03/2013, PrivateKeyEntry,
... 
```

但是每当我尝试使用 keytool 对该别名执行任何操作（即导出、重命名）时，它都会给我一个错误：

```
keytool error: java.lang.Exception: Alias <0c5fc7cef279ca390acd2d6bac9ffcf8_ba0cbbb3-323d-4394-8e76-47838adb2a9c> does not exist 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T19:16:13.710

事实证明，在检查了`keytool -list`vim 的输出后，我在别名的末尾发现了一个空字符（它不会打印到控制台）。一旦我将它添加到引用别名的命令中，它就起作用了：

```
keytool -keyclone -changealias -v -dest "new_alias" -new newpass -keystore temp.pfx -storetype pkcs12 -alias 0c5fc7cef279ca390acd2d6bac9ffcf8_ba0cbbb3-323d-4394-8e76-47838adb2a9c$'\x00' 
```

最后才是真正重要的地方：`$'\x00'`代表 bash 中的空字符。请记住，这是非常依赖于 shell 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-25T10:47:53.490

我的情况与安德烈相似，但别名是

letencryptisrgx1 [jdk]

所以使用别名“letsencryptisrgx1 [jdk]”它对我有用

# plugins - 如何在 Cordova iOS 应用程序上添加推送通知？

> ID：15301006
> 
> 赞同：1
> 
> 时间：2013-03-08T18:39:53.213
> 
> 标签：plugins, cordova, push-notification

我正在关注有关如何在 iOS 上的 Cordova 项目中启用推送通知的[教程。](http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/)

如果我使用作者提供的示例项目，则一切就绪并且可以正常工作。

但是我需要使用最新的 Cordova 版本，所以我开始制作自己的项目。Cordova 项目已正确创建。当我尝试安装推送通知插件时，问题就开始了。

在教程中，作者说要对 cordova.plist 文件进行一些更改，但为什么 .plist 文件在最新版本的 Cordova 中不存在？

还有其他方法可以启用插件吗？我们不需要.plist？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T02:39:52.930

我有同样的问题。卡在同一个地方。这就是我所做的 1- 使用 CLI 安装插件 - `phonegap local plugin add https://github.com/phonegap-build/PushPlugin.git` 2- 因为我找不到 PLIST 将代码添加到 AppDelegate.m 只会产生错误。所以我找到了以下链接： [Cordova 2.5.0 - 将 appDelegate.m 引用到 PushPlugin](https://stackoverflow.com/questions/15770163/cordova-2-5-0-errors-after-referencing-appdelegate-m-to-pushplugin) 3 后出错 - 在上面的链接中有一个 appdelegate.m 的示例，我在我的代码中复制并替换了它。这样我就不必担心 plist 了。4-我复制了 JS 的其余部分，它立即生效。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T08:56:51.310

你管理它如何解决问题？您必须在 config.xml 文件中进行更改添加：插件

```
name="PushPlugin" and value="PushPlugin 
```

在 config.xml 中，然后将其添加到您的 AppDelegate.m [https://github.com/hollyschinsky/PhoneGapBuildPushProject2/blob/master/PhoneGapBuildPushApp2/Classes/AppDelegate.m](https://github.com/hollyschinsky/PhoneGapBuildPushProject2/blob/master/PhoneGapBuildPushApp2/Classes/AppDelegate.m)

希望这会有所帮助 - 我在同一个教程上，但无法管理下一步 - 也许我们可以互相帮助一点

# ssh - SSH 批量删除文件名中的字符

> ID：15301008
> 
> 赞同：0
> 
> 时间：2013-03-08T18:40:07.003
> 
> 标签：ssh, debian, putty

我有一个包含数千个文件的文件夹，我只需要重命名其中一些文件并删除一组字符。谁能告诉我从 shell（putty）中使用哪个命令？我有类似的东西：

```
image01-GB.jpg
image02-GB.jpg
image03.jpg
image04GB.jpg
image05.jpg
image06GB.jpg 
```

我需要删除`-GB`，`GB`如果这些字符存在，其他一切都应该保持原样。在过去的 2 个小时里，我一直在谷歌搜索，但找不到任何有用的东西。任何人都可以阐明一下吗？顺便说一句，说到外壳，我是个菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:43:11.357

我想你可能正在寻找[重命名](http://linux.die.net/man/1/rename)命令。

# java - 如何从重定向中读取 JSF 中的 GET 请求参数

> ID：15301020
> 
> 赞同：2
> 
> 时间：2013-03-08T18:41:01.697
> 
> 标签：java, ajax, jsf

我需要通过表单获取输入并将值放入 Bean 字段中。

之后，我希望通过按下按钮 Bean 动作将被触发，当它完成时

我需要使用 href 移动到另一个页面。

我试过这个：

```
<div class="getname">
    <h:form>
        Enter name
        <h:inputText value="#{bean.name}" />
        <br/>
    </h:form>

    <h:commandButton value="Purchase" action="#{bean.sendName}"/>
    <a href="name.jsf?id=#{bean.id}" />
</div> 
```

我设法移动到正确的 name.jsf 页面（根据 ID），但未触发该操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:06:22.543

该`commandButton`组件是将表单值提交到其托管属性的组件。为此，您必须将其放置在`<h:form>`组件内。

此外，在调用操作后，您不需要单独的链接来导航离开页面。托管 bean Action 方法可以返回一个`String`定义 FacesServlet 将转发到的导航。

```
@ManagedBean("bean")
public class MyBean {

  private String id;
  private String name;

  /// property accessors and other stuff

  public String sendName() {
    // do stuff
    return "name.jsf?id=" + this.id;
  }
} 
```

当操作完成时，此返回值指示您导航到该定义的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:52:56.963

命令按钮和href都是不同的动作，点击命令按钮将执行动作，点击href将用户带到页面name.jsf

```
 <h:commandButton value="Purchase" action="#{bean.sendName}"/>
    <a href="name.jsf?id=#{bean.id}" /> 
```

你的 bean 中需要这样的东西

```
@ManagedBean("bean")
public class TestBean {

  @ManagedProperty(value = "#{param.id}")
  private String id;
  private String name;

  public String sendName() {
     //do stuff 
     return "name.jsf?id=" + this.id;
  }
} 
```

您也可以在您的 xhtml 中执行此操作以获得相同的结果，

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.id}" />
</f:metadata> 
```

上面的行将在你的 bean 被初始化之前从请求参数 id 中设置 bean 中的参数 id。

# ios - 具有不同优先级的多个操作队列

> ID：15301022
> 
> 赞同：0
> 
> 时间：2013-03-08T18:41:05.713
> 
> 标签：ios, uiimage, avfoundation

美好的一天，这就是我想要做的：

*   我有一个使用 AVFoundation 拍摄图像的照片处理应用程序
*   我有一个 DeviceMotion 队列，它以 60Hz 处理设备位置
*   拍摄图像时，需要对其进行裁剪和保存。DeviceMotion 需要保持运行并及时更新界面

我看到的是：在图像裁剪期间，来自 DeviceMotion 队列的接口更新被冻结。

这就是我开始更新 DeviceMotion 的方式：

```
self.motionManager.deviceMotionUpdateInterval = 1.0f/60.0f;
gyroQueue = [[NSOperationQueue alloc] init];

[self.motionManager startDeviceMotionUpdatesToQueue:gyroQueue withHandler:^(CMDeviceMotion *motion, NSError *error){
        [NSThread setThreadPriority:1.0];
        [self processMotion:motion withError:error];
    }]; 
```

当图像从 AVFoundation 返回时，它被添加到队列中进行处理：

```
imageProcessingQueue = [[NSOperationQueue alloc] init];
    [imageProcessingQueue setName:@"ImageProcessingQueue"];
    [imageProcessingQueue setMaxConcurrentOperationCount:1];

//[imageProcessingQueue addOperationWithBlock:^{
    //[self processImage:[UIImage imageWithData:imageData]];
//}];

    NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(processImage:) object:[UIImage imageWithData:imageData]];
    [operation setThreadPriority:0.0];
    [operation setQueuePriority:NSOperationQueuePriorityVeryLow];
    [imageProcessingQueue addOperation:operation]; 
```

及图像处理方法：

```
- (void)processImage:(UIImage*)image {

    CGSize cropImageSize = CGSizeMake(640,960);

    UIImage *croppedImage  = [image resizedImageWithContentMode:UIViewContentModeScaleAspectFit bounds:cropImageSize interpolationQuality:kImageCropInterpolationQuality];

    NSData *compressedImageData = UIImageJPEGRepresentation(croppedImage, kJpegCompression);

    [self.doc addPhoto:compressedImageData];
} 
```

问题是：

*   使用 NSOperationQueue 处理图像时，在图像裁剪期间会阻止 devicemotion 更新

如果我使用 performSelectorInBackground 处理图像 - 它可以按需要工作（没有延迟到 DeviceMotion 队列）

> ```
> [self performSelectorInBackground:@selector(processImage:) withObject:[UIImage imageWithData:imageData]]; 
> ```

关于我对后台线程的理解需要更新的任何想法？:)

PS。这个问题我之前也问过，但是没找到，所以重新发帖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:26:32.833

我已经为这个问题找到了一个解决方案（或可靠的解决方法）：

我没有使用 将 deviceMotion 更新路由到队列`startDeviceMotionUpdatesToQueue`，而是创建了一个 CADisplayLink 计时器，它不会干扰其他后台队列 - 虽然它与屏幕刷新率匹配，但它的本质是最高优先级：

```
[self.motionManager startDeviceMotionUpdates];

gyroTimer = [CADisplayLink displayLinkWithTarget:self selector:@selector(processMotion)];
    [gyroTimer addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

# ruby-on-rails - pg gem install 失败说版本太旧了？

> ID：15301026
> 
> 赞同：8
> 
> 时间：2013-03-08T18:41:14.387
> 
> 标签：ruby-on-rails, ruby, gem, rails-postgresql, pg

我正在尝试为 Ruby 安装 pg (PostreSQL) gem。我收到此错误：

```
postgres/9.2-pgdg/bin/64/pg_config
Using config values from /location/to/install/postgres/9.2-pgdg/bin/64/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... no
Your PostgreSQL is too old. Either install an older version of this gem or upgrade your       database.
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

PostgreSQL 版本：postgres (PostgreSQL) 9.2.3

操作系统：solaris 10

我也试过：

```
gem install pg  -- --with-pgsql-lib=/location/of/install/postgres/9.2-pgdg/lib/64/ --with-pg-config=/location/of/install/postgres/9.2-pgdg/bin/64/pg_config 
```

我不知道为什么会发生此错误，并且在 Google 上找不到任何有用的信息。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T16:39:26.913

安装数据库客户端、gem 和使用它时，很多事情都会出错。

我通常从源代码安装 PostgreSQL，而不是从发行版。那时我知道我拥有所有的源代码并且确切地知道安装的位置。在安装与客户端驱动程序对话的 gem 时，这一点很重要。

我还依赖于从源代码安装 Ruby，或者自己直接安装，或者使用 rbenv 或 RVM（如果它在我的开发框之一上）。然后我也直接安装 pg gem，使用`gem install pg`; 在安装语言时，我在使用发行版时遇到了太多糟糕的经历，所以我在它上面学了老派。

我写了一个在我的 Mac OS 系统上使用的小脚本，我发现它对我的 CentOS Linux 机器很有用：

```
#!/bin/sh -x

PATH=/库/PostgreSQL/9.2/bin:$PATH
宝石安装 pg

```

我根据 PostgreSQL 的安装位置调整 PATH 添加，它似乎可以解决问题。我也使用了更长、更“全面”的选项，但这似乎也有效。

问题是安装程序需要从 pg_config 可执行文件中挖掘安装信息，并且能够找到 pg_config 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T18:17:17.663

在我意识到这一点`postgresql-devel`并且`postgresql-libs`来自`8.1.23`!!!

```
$ yum list installed postgres*
Loaded plugins: fastestmirror, security
Installed Packages
postgresql-devel.i386                           8.1.23-10.el5_10                       installed
postgresql-devel.x86_64                         8.1.23-10.el5_10                       installed
postgresql-libs.i386                            8.1.23-10.el5_10                       installed
postgresql-libs.x86_64                          8.1.23-10.el5_10                       installed

---------------

$ sudo yum install postgresql94-libs
$ sudo yum install postgresql94-devel

$ gem install pg
Successfully installed pg-0.18.1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-23T20:43:13.803

从自制软件安装和链接 postgresql 为我修复了它：

```
brew install postgresql
brew unlink postgresql91
brew link --overwrite postgresql 
```

# android - CoverFlow 作为 FragmentActivity

> ID：15301027
> 
> 赞同：0
> 
> 时间：2013-03-08T18:41:15.730
> 
> 标签：android, android-fragments, android-fragmentactivity, coverflow

我试图使用 Neil Davies 的 CoverFlow Widget v2 作为片段活动。我期待这样的事情![在此处输入图像描述](../Images/32ca8a45494f77ecb85ee9dd0e96ffdd.png)

相反，我得到了这个![在此处输入图像描述](../Images/7e3101bd8b48e3be1c6661795cb53d6e.png)

很明显，我的实现出了点问题，但是因为我没有看到任何错误或崩溃......我有点迷失在哪里看。Anywho 下面是 java 和 xml 代码

**SampleTabsDefault.java**

```
 public class SampleTabsDefault extends FragmentActivity {

private static final String[] CONTENT = new String[] { "Tab 1", "Tab 2", "Tab 3", "Tab 4", "Tab 5", "Tab 6",
    "Tab 7","Tab 8","Tab 9","Tab 10","Tab 11","Tab 12","Tab 13","Tab 14" 
    ,"Tab 15","Tab 16"};

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_tabs_2);

    FragmentPagerAdapter adapter = new MyNavTabs(getSupportFragmentManager());

    ViewPager pager = (ViewPager)findViewById(R.id.pager);
    pager.setAdapter(adapter);

    TabPageIndicator indicator = (TabPageIndicator)findViewById(R.id.indicator);
    indicator.setViewPager(pager);

}

class MyNavTabs extends FragmentPagerAdapter {///////maybe this needs to be in fragment to to call CoverFlowExampleFragment
    public MyNavTabs(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch(position)
        {
                case 0:
                     TestFragment fragment = new TestFragment();  
                     return fragment;

                 case 1:
                     TestFragment2 fragment2 = new TestFragment2();  
                     return fragment2;

          }

                     TestFragment3 fragment3 = new TestFragment3();  
                     return fragment3;

    }

    @Override
    public CharSequence getPageTitle(int position) {
        return CONTENT[position % CONTENT.length].toUpperCase();
    }

    @Override
    public int getCount() {
      return CONTENT.length;
    }
}public void onBackPressed() {

    finish();
    super.onBackPressed();
} 
```

}

**simple_tabs_2.xml**

```
 <LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<com.viewpagerindicator.TabPageIndicator
    android:id="@+id/indicator"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    />
<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:background="@drawable/bkg_gradient"/>

 </LinearLayout> 
```

**TestFragment2.java**

```
 public final class TestFragment2 extends Fragment {

TextView et;
TextView text;

SharedPreferences sp;
View myView;
CheckBox cb;
int counter_score;
int counter_score_this;
int counter_score_b;
int counter_score_c;
int counter_score_d;
int counter_score_e;
int GotSaved_ABC, GotSaved_EYE;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    counter_score=0;
    counter_score_this =0;
    counter_score_b =0;
    counter_score_c =0;
    counter_score_d =0;
    counter_score_e =0;

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View myView = inflater.inflate(R.layout.fragment_2, container, false);
     text = (TextView)myView.findViewById(R.id.textView1);
     et = (TextView)myView.findViewById(R.id.textView3);
     cb = (CheckBox) myView.findViewById(R.id.checkBox1);
    /// FragmentPagerAdapter adapter = new ScrollGallery(getChildFragmentManager());

   ///  ViewPager pager = (ViewPager)myView.findViewById(R.id.pager);
   //  pager.setAdapter(adapter);

     //TabPageIndicator indicator = (TabPageIndicator)myView.findViewById(R.id.indicator);
     //indicator.setViewPager(pager);
     CoverFlow mycoverFlow = new CoverFlow(getActivity());

     mycoverFlow.setAdapter(new ImageAdapter(getActivity()));

     ImageAdapter coverImageAdapter =  new ImageAdapter(getActivity());

     //coverImageAdapter.createReflectedImages();

     mycoverFlow.setAdapter(coverImageAdapter);

     mycoverFlow.setSpacing(-25);
     mycoverFlow.setSelection(4, true);
     mycoverFlow.setAnimationDuration(1000);

    loadPrefs();
    return myView;

}

private void loadPrefs() {
    int questions_int =156;
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(getActivity());
    GotSaved_ABC = sp.getInt("NAME", GotSaved_ABC);
    GotSaved_EYE = sp.getInt("NAME2", GotSaved_EYE);
    counter_score = GotSaved_ABC;
    counter_score_this =GotSaved_EYE;
    //////counter_score_2 = make it equal to whatever..
    int percentage = (int)( GotSaved_ABC + GotSaved_EYE * 100.0 / questions_int + 0.5);
    text.setText(percentage +"%");

//}
///class ScrollGallery extends FragmentPagerAdapter {///////this maybe needs to be in    fragment to to call CoverFlowExampleFragment
   // public ScrollGallery(FragmentManager fm) {
       // super(fm);
   /// }

    //@Override
   // public Fragment getItem(int position) {

       // return CoverFlowExampleFragment.getActivity();
    }
public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Context mContext;

    private FileInputStream fis;

    private Integer[] mImageIds = {
      R.drawable.kasabian_kasabian,
            R.drawable.starssailor_silence_is_easy,
            R.drawable.killers_day_and_age,
            R.drawable.garbage_bleed_like_me,
            R.drawable.death_cub_for_cutie_the_photo_album,
            R.drawable.kasabian_kasabian,
            R.drawable.massive_attack_collected,
            R.drawable.muse_the_resistance,
            R.drawable.starssailor_silence_is_easy
    };

    private ImageView[] mImages;

    public ImageAdapter(Context c) {
     mContext = c;
     mImages = new ImageView[mImageIds.length];
    }
 public boolean createReflectedImages() {
         //The gap we want between the reflection and the original image
         final int reflectionGap = 4;

         int index = 0;
         for (int imageId : mImageIds) {
       Bitmap originalImage = BitmapFactory.decodeResource(getResources(), 
         imageId);
          int width = originalImage.getWidth();
          int height = originalImage.getHeight();

          //This will not scale but will flip on the Y axis
          Matrix matrix = new Matrix();
          matrix.preScale(1, -1);

          //Create a Bitmap with the flip matrix applied to it.
          //We only want the bottom half of the image
          Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0, height/2,    width, height/2, matrix, false);

          //Create a new bitmap with same width but taller to fit reflection
          Bitmap bitmapWithReflection = Bitmap.createBitmap(width 
            , (height + height/2), Config.ARGB_8888);

         //Create a new Canvas with the bitmap that's big enough for
         //the image plus gap plus reflection
         Canvas canvas = new Canvas(bitmapWithReflection);
         //Draw in the original image
         canvas.drawBitmap(originalImage, 0, 0, null);
         //Draw in the gap
         Paint deafaultPaint = new Paint();
         canvas.drawRect(0, height, width, height + reflectionGap, deafaultPaint);
         //Draw in the reflection
         canvas.drawBitmap(reflectionImage,0, height + reflectionGap, null);

         //Create a shader that is a linear gradient that covers the reflection
         Paint paint = new Paint(); 
         LinearGradient shader = new LinearGradient(0, originalImage.getHeight(), 0, 
           bitmapWithReflection.getHeight() + reflectionGap, 0x70ffffff, 0x00ffffff, 
           TileMode.CLAMP); 
         //Set the paint to use this shader (linear gradient)
         paint.setShader(shader); 
         //Set the Transfer mode to be porter duff and destination in
         paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN)); 
         //Draw a rectangle using the paint with our linear gradient
         canvas.drawRect(0, height, width, 
           bitmapWithReflection.getHeight() + reflectionGap, paint); 

         ImageView imageView = new ImageView(mContext);
         imageView.setImageBitmap(bitmapWithReflection);
         imageView.setLayoutParams(new CoverFlow.LayoutParams(120, 180));
         imageView.setScaleType(ScaleType.MATRIX);
         mImages[index++] = imageView;

         }
      return true;
 }

    public int getCount() {
        return mImageIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

     //Use this code if you want to load from resources
        ImageView i = new ImageView(mContext);
        i.setImageResource(mImageIds[position]);
        i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
        i.setScaleType(ImageView.ScaleType.CENTER_INSIDE); 

        //Make sure we set anti-aliasing otherwise we get jaggies
        BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
        drawable.setAntiAlias(true);
        return i;

     //return mImages[position];
    }
  /** Returns the size (0.0f to 1.0f) of the views 
     * depending on the 'offset' to the center. */ 
     public float getScale(boolean focused, int offset) { 
       /* Formula: 1 / (2 ^ offset) */ 
         return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset))); 
     } 

  }

    //@Override
    ///public int getCount() {
        // TODO Auto-generated method stub
        //return 0;
    //}

       } 
```

**片段_2.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout android:layout_width="wrap_content" android:layout_height="wrap_content"  android:weightSum="3"   android:orientation="horizontal" android:layout_gravity="center_horizontal" >  
<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Check this box" />
<TextView
    android:id="@+id/textView1"
    android:layout_width="200dp"
    android:layout_height="180dp"
    android:layout_marginLeft="-55dp"
    android:layout_marginTop="112dp"
    android:background="@drawable/blue_main_score"
    android:gravity="center_horizontal|center_vertical"
    android:text="0"
    android:shadowColor="@android:color/black"
    android:shadowRadius="7.0"
    android:shadowDx="1.0"
    android:shadowDy="1.0"
    android:textColor="#f5f5f5f5"
    android:textSize="50dp"
    android:textStyle="bold"
    android:visibility="visible" />

<TextView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="left"

    android:text="Fragment TEST"
    android:textSize="48sp"
    android:id="@+id/textView3"/>

</LinearLayout>

</LinearLayout> 
```

*edit 忘记了**CoverFlow.java**

```
 public class CoverFlow extends Gallery {

  /**
  * Graphics Camera used for transforming the matrix of ImageViews
  */
private Camera mCamera = new Camera();

 /**
 * The maximum angle the Child ImageView will be rotated by
 */    
private int mMaxRotationAngle = 90;

 /**
 * The maximum zoom on the centre Child
 */
private int mMaxZoom = -500;

 /**
 * The Centre of the Coverflow 
 */   
private int mCoveflowCenter;

  public CoverFlow(Context context) {
  super(context);
  this.setStaticTransformationsEnabled(true);
  }

   public CoverFlow(Context context, AttributeSet attrs) {
   super(context, attrs);
    this.setStaticTransformationsEnabled(true);
  }

  public CoverFlow(Context context, AttributeSet attrs, int defStyle) {
   super(context, attrs, defStyle);
   this.setStaticTransformationsEnabled(true);   
  }

   /**
   * Get the max rotational angle of the image
   * @return the mMaxRotationAngle
   */
   public int getMaxRotationAngle() {
   return mMaxRotationAngle;
   }

   /**
   //* Set the max rotational angle of each image
   * @param maxRotationAngle the mMaxRotationAngle to set
    */
   public void setMaxRotationAngle(int maxRotationAngle) {
   mMaxRotationAngle = maxRotationAngle;
   }

  /**
   * Get the Max zoom of the centre image
   * @return the mMaxZoom
   */
  public int getMaxZoom() {
  return mMaxZoom;
  }

   /**
   * Set the max zoom of the centre image
   * @param maxZoom the mMaxZoom to set
   */
   public void setMaxZoom(int maxZoom) {
   mMaxZoom = maxZoom;
   }

    /**
    * Get the Centre of the Coverflow
    * @return The centre of this Coverflow.
    */
    private int getCenterOfCoverflow() {
    return (getWidth() - getPaddingLeft() - getPaddingRight()) / 2 + getPaddingLeft();
    }

     /**
     * Get the Centre of the View
     * @return The centre of the given view.
     */
    private static int getCenterOfView(View view) {
    return view.getLeft() + view.getWidth() / 2;
    }  
    /**
    * {@inheritDoc}
    *
     * @see #setStaticTransformationsEnabled(boolean) 
    */ 
   protected boolean getChildStaticTransformation(View child, Transformation t) {

  final int childCenter = getCenterOfView(child);
  final int childWidth = child.getWidth() ;
  int rotationAngle = 0;

   t.clear();
   t.setTransformationType(Transformation.TYPE_MATRIX);

    if (childCenter == mCoveflowCenter) {
        transformImageBitmap((ImageView) child, t, 0);
    } else {      
        rotationAngle = (int) (((float) (mCoveflowCenter - childCenter)/ childWidth) *     mMaxRotationAngle);
        if (Math.abs(rotationAngle) > mMaxRotationAngle) {
         rotationAngle = (rotationAngle < 0) ? -mMaxRotationAngle : mMaxRotationAngle;   
        }
        transformImageBitmap((ImageView) child, t, rotationAngle);         
    }    

     return true;
     }

      /**
      * This is called during layout when the size of this view has changed. If
      * you were just added to the view hierarchy, you're called with the old
      * values of 0.
      *
      * @param w Current width of this view.
      * @param h Current height of this view.
      * @param oldw Old width of this view.
      * @param oldh Old height of this view.
      */
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    mCoveflowCenter = getCenterOfCoverflow();
  super.onSizeChanged(w, h, oldw, oldh);
   }

     /**
     * Transform the Image Bitmap by the Angle passed 
     * 
     * @param imageView ImageView the ImageView whose bitmap we want to rotate
     * @param t transformation 
     * @param rotationAngle the Angle by which to rotate the Bitmap
     */
     private void transformImageBitmap(ImageView child, Transformation t, int rotationAngle) {            
    mCamera.save();
    final Matrix imageMatrix = t.getMatrix();;
    final int imageHeight = child.getLayoutParams().height;;
    final int imageWidth = child.getLayoutParams().width;
    final int rotation = Math.abs(rotationAngle);

    mCamera.translate(0.0f, 0.0f, 100.0f);

    //As the angle of the view gets less, zoom in     
    if ( rotation < mMaxRotationAngle ) {
    float zoomAmount = (float) (mMaxZoom +  (rotation * 1.5));
    mCamera.translate(0.0f, 0.0f, zoomAmount);          
   } 

    mCamera.rotateY(rotationAngle);
    mCamera.getMatrix(imageMatrix);               
    imageMatrix.preTranslate(-(imageWidth/2), -(imageHeight/2)); 
    imageMatrix.postTranslate((imageWidth/2), (imageHeight/2));
    mCamera.restore();
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:51:46.437

很多代码:-)

在您的 TestFragment2.java 中，似乎有一个大错误（可以解释为什么您看不到 CoverFlow）和另一个较小的错误。

在您的`onCreateView`方法中`TestFragment2`，您忘记将您的添加`mycoverFlow`到视图层次结构中。将此添加到您的`onCreateView`方法中，看看是否可以修复它（部分）：

```
((ViewGroup)myView).addView(mycoverFlow, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT); 
```

（也许 MATCH_PARENT 应该是 WRAP_CONTENT）。

一个较小的错误是在此`onCreateView`方法中，您调用`mycoverFlow.setAdapter(...)`了两次。只有最后一个有效。删除第一个。

# javascript - JavaScript：从 iframe 中爬上备份 dom 树

> ID：15301035
> 
> 赞同：1
> 
> 时间：2013-03-08T18:41:49.997
> 
> 标签：javascript, dom

我有以下代码：

```
<div id="hello">
    <iframe stc="foo/bar.html"></iframe>
</div> 
```

iframe的内容：

```
<!DOCTYPE html>
<html>
<body>
    <div id="foo"></div>
</body>
</html> 
```

如何获取 id 为“hello”的 div？

如果所有这些都在同一页面上，我会执行以下操作：

```
document.getElementById('foo').parentNode; 
```

注意：我不能在这个项目中使用 jQuery。我也不能按 id 选择，因为我不知道那个父母的 id 是什么。如果它一直是 foo 那么我可以这样做：

```
parent.document.getElementById('foo') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:00:59.687

你可以按类名选择元素吗？如果是这样，这是一种方法： [http ://www.anyexample.com/webdev/javascript/javascript_getelementsbyclass_function.xml](http://www.anyexample.com/webdev/javascript/javascript_getelementsbyclass_function.xml)

# php - codeigniter 中使用的 ajaxFileUpload - 未执行成功函数

> ID：15301038
> 
> 赞同：1
> 
> 时间：2013-03-08T18:41:58.357
> 
> 标签：php, codeigniter, jquery

祝大家有美好的一天，

我正在使用 ajaxFileUpload 如下

```
 $('#upload_file').submit(function(e) {
      e.preventDefault();

      $.ajaxFileUpload({
         url         :"http://localhost/CodeIgniter_Registration/index.php/application_form/file_upload",
         fileElementId  :'userfile',
         dataType    : 'json',
         data : {
            'name' : $('#document_name').val()
         },
         success  : function (data, status)
         {          
            alert(data.msg);
         }
      });
      return false;
   }); 
```

在控制器，文件被上传，要返回的数据也存在

返回为

```
echo json_encode(array('status' => $status, 'msg' => $msg)); 
```

从控制器

```
 function file_upload() {

        $status = "";
        $msg = "";
        $file_element_name = 'userfile';

        $config = array(
            'allowed_types' => 'jpg|jpeg|gif|png|doc|docx|pdf',
            'upload_path' => $this->gallery_path,
            'max_size' => 2000,
            'file_name' => $filename
        );

        $this->load->library('upload', $config);
        $test_upload = $this->upload->do_upload($file_element_name);

      if (!$test_upload)
      {
         $status = 'error';
         $msg = $this->upload->display_errors('', '');
      }
      else
       {
         $data = $this->upload->data();
         //$file_id = $this->files_model->insert_file($data['file_name'], $_POST['title']);
         if(1)
         {
            $status = "success";
            $msg = "File successfully uploaded";
         }
         else
         {
            unlink($data['full_path']);
            $status = "error";
            $msg = "Something went wrong when saving the file, please try again.";
         }
      }
        @unlink($_FILES[$file_element_name]);

   echo json_encode(array('status' => $status, 'msg' => $msg));

    } 
```

但是，“成功”回调似乎从未被调用，也没有生成警报消息。

我也尝试过返回一些纯文本。依然没有。因此，我认为这不是 json 的问题。

请建议，可能是什么问题！

# android - DatePicker 在 android 中设置的日期

> ID：15301043
> 
> 赞同：0
> 
> 时间：2013-03-08T18:42:12.363
> 
> 标签：android, datepicker, datepickerdialog

我的应用程序中需要一个日期选择器对话框。首先，我打开日期选择器对话框并选择日期。下次打开日期选择器对话框时，日期选择器的日期应该是设备的当前日期。但是，它会在对话框中显示最后选择的日期。请帮我设置代码。这是我现在拥有的代码：

```
@Override
protected Dialog onCreateDialog(int id)
{
    switch (id)
    {
        case DATE_DIALOG_ID:

        Date d=new Date();
        Calendar c=Calendar.getInstance();
        c.setTimeZone(tz);          
        c.setTime(d);
        d=c.getTime();

        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int date = c.get(Calendar.DATE);

        DatePickerDialog datePicker 
            = new DatePickerDialog(this, datePickerListener, year, month, date);      

        return datePicker;          
    }
    return super.onCreateDialog(id);
}

private DatePickerDialog.OnDateSetListener datePickerListener 
            = new DatePickerDialog.OnDateSetListener()
{
    // when dialog box is closed, below method will be called.
    public void onDateSet(DatePicker view, int selectedYear, int selectedMonth, int selectedDay)
    {
        cors_year = selectedYear;
        cors_month = selectedMonth;
        cors_date = selectedDay;

        getDate("calledfromDialog");
        displaySunTime();
        displayChoghadiya("Day");
        displayTime(3, 1);
        dayButtonClicked();
        selected_DAY_NIGHT="Day";
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:50:57.053

请注意，根据[文档](http://developer.android.com/reference/android/app/Activity.html#onCreateDialog%28int,%20android.os.Bundle%29)，onCreateDialog 在 v13 中已弃用：

> 将新的[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)类与[FragmentManager](http://developer.android.com/reference/android/app/FragmentManager.html)一起使用；这也可以通过 Android 兼容包在旧平台上使用。

您将与[本教程一起使用](http://developer.android.com/guide/topics/ui/controls/pickers.html#DatePicker)

但是，如果您想保留 DatePickerDialog，则可以使用以下代码：

```
protected void onPrepareDialog (int id, Dialog dialog)
{
    DatePickerDialog datePickerDialog = (DatePickerDialog) dialog;
    // Get the current date
    datePickerDialog.updateDate(year, month, day);
} 
```

这是因为 Android 每个对话框只调用一次 onCreateDialog 来重用对话框。调用 onPrepareDialog 是为了让您在显示之前适当地设置对话框的状态。

# perl - 刽子手 if 声明问题

> ID：15301046
> 
> 赞同：-1
> 
> 时间：2013-03-08T18:42:18.213
> 
> 标签：perl

我似乎找不到我的 Perl Hangman 代码的原因：

```
#!\usr\bin\perl
use 5.016;
&hangman;
sub hangman{
    our(@graphics,@words,$word,@chars,$hidden,$incorrect,$guess,);
    @graphics=("=========",
    "        |\n        |\n        |\n        |\n        |\n=========",
    "   ======\n        |\n        |\n        |\n        |\n        |\n=========",
    "   ======\n   |    |\n        |\n        |\n        |\n        |\n=========",
    "   ======\n   |    |\n   O    |\n        |\n        |\n        |\n=========",
    "   ======\n   |    |\n   O    |\n   |    |\n        |\n        |\n=========",
    "   ======\n   |    |\n   O    |\n  /|    |\n        |\n        |\n=========",
    "   ======\n   |    |\n   O    |\n  /|\\   |\n        |\n        |\n=========",
    "   ======\n   |    |\n   O    |\n  /|\\   |\n  /     |\n        |\n=========",
    "   ======\n   |    |\n   O    |\n  /|\\   |\n  / \\   |\n        |\n=========");
    @words=qw(ant baboon badger bat bear beaver camel cat clam cobra cougar coyote crow deer dog donkey duck eagle ferret fox frog goat goose hawk lion lizard llama mole monkey moose mouse mule newt otter owl panda parrot pigeon python rabbit ram rat raven rhino salmon seal shark sheep skunk sloth snake spider stork swan tiger toad trout turkey turtle weasel whale wolf wombat zebra);
    $word=$words[rand scalar@words];
    for(0..length$word){
        @chars=split("",$word);
    }
    $hidden="-"x length($word);
    while($incorrect<0+@graphics){
        print"Word: $hidden\nGuess a letter: ";
        chomp($guess=<STDIN>);
        foreach(@chars){
            if($guess==$_){
                    substr($hidden,$_)
            }
        }
    }
} 
```

始终`if`在第 25 行运行该语句。我正在尝试创建一个`if`语句，以便它仅在存在时运行`guess`任何`word`
人都知道为什么会发生这种情况以及如何阻止它？
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T18:58:08.243

将其更改为：

```
if ($guess eq $_) 
```

在 perl 中，`==`用于数字，`eq`用于字符串。如果您将字符串提供给`==`，它会将它们转换为数字，然后将它们转换为`0`。

您应该启用警告，然后它会警告您正在发生这种情况。

下一行也有问题：

```
$chars[$_]=$guess; 
```

数组索引必须是正整数，但是`$_`是字符串（正确猜测的字符）。我不确定您要在这里做什么-您应该向用户显示匹配项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T19:01:23.537

正如你在问题中所说

> 我正在尝试创建一个 if 语句，以便它仅在***guess*** ***在 word 中***时运行，

你应该用正则表达式检查。

所以，你的`if`条件应该是

```
if($_ =~ /\Q$guess\E/i) 
```

# performance - 什么会更快——当 EHCache 或 DB 都具有相同的记录时命中？

> ID：15301047
> 
> 赞同：1
> 
> 时间：2013-03-08T18:42:23.877
> 
> 标签：performance, ehcache

听起来可能很愚蠢......
假设缓存中有 1,00,000 条记录，键为`someId`.
现在数据库有 1,00,000 条记录，主键为`someId`.

我的问题是在这种情况下什么会更快？`where`使用子句访问缓存或访问数据库？
假设使用的缓存是 EHCache，DB 是 MySql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:40:36.147

缓存是本地的，位于 RAM 中，db 是远程的，数据位于磁盘中（大多数情况下）。关键区别！

查看[每个人都应该知道的数字（幻灯片 #13）](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//people/jeff/stanford-295-talk.pdf)您正在查看大约 100-1000ns（从缓存中读取数据）VS 20000 ns（通过 1Gbps 网络发送 2Kb）。因此，即使不包括磁盘读取，差异也已经是 ~20 倍。如果您考虑磁盘读取（10 000 000 ns），则差异变为 10 000x。

但这些都是理论计算；你需要自己测量。

# html - 嵌入式 Youtube 播放器在 Chrome 中没有响应

> ID：15301049
> 
> 赞同：1
> 
> 时间：2013-03-08T18:42:30.343
> 
> 标签：html, google-chrome, youtube, embed

我正在使用 CSS 对网站进行样式化，并在几个 DIV 中嵌入了一个 youtube 剪辑，如下所示：

```
<body>
<div id="wrap">
    <div id="outer">
        <img src="images/sidebar.png"/ class="sidepic">
        <div id="look">

            <iframe width="500px" class="youtube-player" type="text/html" height="280px" src="http://www.youtube.com/embed/J-U9aYeLvX0?wmode=opaque&feature=player_profilepage&showinfo=0" frameborder="0" allowfullscreen seamless></iframe>

            <img src="images/content-01.png" class="bigpic" />
        </div>
    </div>
</div> 
```

这在 Internet Explorer 中运行良好，但在 Chrome 中不起作用。视频没有检测到任何悬停或点击，就好像它是静态图像或隐藏一样。

我尝试使用本网站其他线程中推荐的 ?wmode=opaque / transparent 标签，但它似乎不起作用。从 DIV 标记中删除 iframe 可以播放视频，但会扭曲页面的其余部分。

# css - IE wordpress 导航样式在登录时完美，但在注销时不完美

> ID：15301052
> 
> 赞同：0
> 
> 时间：2013-03-08T18:42:40.157
> 
> 标签：css, wordpress, internet-explorer, navigation

在未登录的情况下在 Internet Explorer 中查看时，***网站***上的导航突然开始变得疯狂。但是，当您登录时......一切正常......

我知道这一定是样式表排序问题，但我没有找到解决办法。

您可以在[这里](http://www.childrenofallnations.com/wp-admin)使用用户名：*bobo*和密码：*bobo*登录 ，看看我在说什么。

提前感谢您查看

--

编辑

这是导航的 jQuery：

```
<script type='text/javascript'>
jQuery(document).ready(function ($) {  
    $('#access li').each(function(){
        $(this).hover(function(){
            $('> ul',this).show();
        }, function(){
            $('> ul',this).hide();
        });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:42:16.410

弄清楚了！

我猜想 wordpress 在向菜单添加新页面时遇到了一个错误，因为在梳理了源代码后，我注意到其中一个链接结束`li`标记不合适。

从导航中删除了该链接。砰！现在完美地工作......

希望这能够帮助像我这样觉得 wordpress 已经出局的人。

# asp.net-mvc - 如何返回带有状态码的客户端错误消息

> ID：15301054
> 
> 赞同：4
> 
> 时间：2013-03-08T18:42:44.843
> 
> 标签：asp.net-mvc, http

我试着用这个：

```
return Request.CreateResponse(HttpStatusCode.InternalServerError, "My message"); 
```

我也试过这个：

```
return new HttpStatusCodeResult(HttpStatusCode.InternalServerError, "My message"); 
```

但是我在浏览器上看到了 500 错误，尽管显示了“我的消息”之类的任何消息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T18:58:43.010

要从 ASP.NET MVC 控制器返回带有消息的特定响应代码，请使用：

```
return new HttpStatusCodeResult(errorCode, "Message"); 
```

确保控制器中的方法是 ActionResult 类型，而不是 ViewResult。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-25T11:43:49.693

我能够使用以下代码在错误响应正文中添加自定义消息：

```
Response.TrySkipIisCustomErrors = true;
Response.Clear();
Response.Write( $"Custom Error Message." );
return new HttpStatusCodeResult( HttpStatusCode.InternalServerError ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:08:44.530

我有一个 ErrorController 可以帮助我抛出错误并显示一个漂亮的错误页面，`Response.StatusCode`用于返回不同的 StatusCode

```
namespace Site.Controllers {

    [OutputCache(Location = OutputCacheLocation.None)]
    public class ErrorController : ApplicationController {

        public ActionResult Index() {
            ViewBag.Title = "Error";
            ViewBag.Description = "blah blah";
            return View("Error");
        }

        public ActionResult HttpError404(string ErrorDescription) {
            Response.StatusCode = 404;
            ViewBag.Title = "Page not found (404)";
            ViewBag.Description = "blah blah";
            return View("Error");
        }

        ...

    }
} 
```

**编辑**为了将仅消息返回到 ajax 结果，我在 actionFilter 中使用了类似的东西

```
 Response.StatusCode = 200;

        //Needed for IIS7.0
        Response.TrySkipIisCustomErrors = true;

        return new ContentResult {
            Content = "ERROR: " + Your_message,
            ContentEncoding = System.Text.Encoding.UTF8
        }; 
```

# php - 如何在 CakePHP 中打印唯一值的计数

> ID：15301055
> 
> 赞同：1
> 
> 时间：2013-03-08T18:42:48.493
> 
> 标签：php, arrays, cakephp, foreach, counter

我试图返回每个 $models['location'] 中有多少值的计数。我想出了下面的代码来做到这一点，它有点工作，问题是第一个计数返回 0。

下面是一个输出示例：`0in7B 27in7C 40in8A 36in8B 40in8C`. 现在这几乎是正确的，但确实有`27in7B 40in7C 36in8A`等等。有谁知道我在这里做错了什么或更好的方法？

```
<?php
    $locations = array();
    foreach($subcategory['Product'] as $models) {
        if ( in_array($models['location'], $locations) ) {
            $i++;
            continue;
        } 
        $locations[] = $models['location'];
        echo $i . "in" . $models['location'] . " ";
        $i = 1;
    }
?> 
```

var_dump($models['location']) 返回：

```
string(2) "7B" 0in7B string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7B" string(2) "7C" 27in7C string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "7C" string(2) "8A" 40in8A string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8A" string(2) "8B" 36in8B string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8B" string(2) "8C" 40in8C string(2) "8C" string(2) "8C" string(2) "8C" string(2) "8C" string(2) "8C" string(2) "8C" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:13:25.673

**编辑：**这个解决方案与你的有点不同，但它有效，我已经测试过了。

另请注意，“算法”保持 O(N)。即使您必须进行第二次 foreach 来遍历数组，第二次包含的元素也比 N 少得多，因此它仍然是 N 类型。

```
$locations = array();
foreach($subcategory['Product'] as $models) {
    if(isset($locations[$models['location']])){
       $locations[$models['location']] += 1;
    } else {
       $locations[$models['location']] = 1;
    }
} 
```

您将获得一个包含所有计数的数组。您所要做的就是打印它。

它的作用可能看起来很奇怪，但实际上很简单。您检查数组并检查条目是否已经存在。如果是，则增加该位置的值，否则将值初始化为 1。

该数组将位置字符串作为键。

* * *

如果：

```
$locations = array();
foreach($subcategory['Product'] as $models) {
    isset($locations[$models['location']]) ? $locations[$models['location']] += 1 : $locations[$models['location']] = 1;
} 
```

回声示例：

```
 foreach($locations as $key => $count) {
     echo "$count in $key <br />";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:50:11.357

它可能会发生，因为`i`在您开始迭代时未定义，请尝试在开始`$i = 0;`之后放置`foreach`。

# c# - C#/.net 中是否支持 .Z 压缩

> ID：15301058
> 
> 赞同：2
> 
> 时间：2013-03-08T18:43:04.047
> 
> 标签：c#, compression

我知道 GZipStream 但它似乎只支持 .gz 压缩。有谁知道从 C# 中将文件压缩为 .Z 压缩格式的方法？（我也看到了可用的 ChilKat 商业图书馆，但是我不能在这项工作上花任何钱）。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:52:46.787

.Z 文件由 unix`compress`命令生成；其中的内容可能是用[LZW](http://en.wikipedia.org/wiki/LZW)压缩的。请参阅[压缩](http://en.wikipedia.org/wiki/Compress)。所以你真正想要的是 LZW 压缩/解压缩。

您可以使用[Sharp-LZW](http://sourceforge.net/projects/sharplzw/)库，或者您可以使用[Rossetta Code中的代码](http://rosettacode.org/wiki/LZW_compression)

# jquery - Jquery图像缩放器功能没有被调用

> ID：15301062
> 
> 赞同：0
> 
> 时间：2013-03-08T18:43:11.123
> 
> 标签：jquery, asp.net, html, zooming

我正在尝试实现在[这个网站](http://www.dynamicdrive.com/dynamicindex4/featuredzoomer.htm)上找到的图像缩放，但是我在让它在我的网站上工作时遇到了问题。我将 .js 和 .css 文件添加到根目录，并按照说明在 javascript 中引用了这些文件，但似乎我从未使用过 jquery 函数。我究竟做错了什么？我在页面上没有错误。当我将鼠标悬停在图像上时，没有任何反应。

```
 <head id="Head1" runat="server">  
    <link rel="stylesheet" href="multizoom.css" type="text/css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script type="text/javascript" src="multizoom.js">
  jQuery(function ($) {
    $('#image1').addimagezoom({ // single image zoom
        zoomrange: [3, 10],
        magnifiersize: [300, 300],
        magnifierpos: 'right',
        cursorshade: true,
        largeimage: 'someImage.jpg' //<-- No comma after last option!
    })
})
</script>

</head>

 <img id="image1" border="0" src="someImagesmall.jpg" style="width:250px;height:338px"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:49:39.180

使用两个脚本标签：

```
<script type="text/javascript" src="multizoom.js"></script> 
```

和

```
<script type="text/javascript">
  jQuery(function ($) {
    $('#image1').addimagezoom({ // single image zoom
        zoomrange: [3, 10],
        magnifiersize: [300, 300],
        magnifierpos: 'right',
        cursorshade: true,
        largeimage: 'someImage.jpg' //<-- No comma after last option!
    })
})
</script> 
```

# c# - 如何使用方法语法使用 LINQ 和 C# 获得不同的结果

> ID：15301068
> 
> 赞同：-1
> 
> 时间：2013-03-08T18:43:39.503
> 
> 标签：c#, linq

以下代码仍然不返回 DISTINCT 结果集。我试图完成的等效 SQL 是`SELECT DISTINCT LEFT(Fac_Name, 6) AS ID, LEFT(Fac_Name, 3) AS Fac_Name`

```
 public List<Facility> GetFacilities() {
        var facilities = new List<Facility>(); 
        facilities = _facilityRepository.GetAll().ToList();
        var facReturnList = 
            facilities.Where(x => x.Fac_Name = "Something")
                      .OrderBy(x => x.Fac_Name).ToList();

        var facReturnList2 = 
            facReturnList.Select(x => 
                new Facility { ID = x.Fac_Name.Substring(0, 6), 
                      Fac_Name = x.Fac_Name.Substring(0, 3) })
                .Distinct().ToList();
        return facReturnList2;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:52:54.910

您遇到的问题是您正在创建不同的引用值（这将返回不同的哈希码），即使每个引用中的属性相等，实际引用本身也是不同的。

```
// fac1 and fac2 are the same reference, fac3 is a different reference.
var fac1 = new Facility { ID = "0", Fac_Name = "Hello" };
var fac2 = fac1;
var fac3 = new Facility { ID = "0", Fac_Name = "Hello" };

var facs = new List<Facility>() { fac1, fac2, fac3 };

foreach (var fac in facs.Distinct())
    Console.WriteLine("Id: {0} | Name: {1}", fac.ID, fac.Fac_Name);

// OUTPUT
// Id: 0 | Name: Hello (NOTE: This is the value of fac1/fac2)
// Id: 0 | Name: Hello (This is the value of fac3) 
```

为了解决您的困境，您应该：

*   覆盖[`Object.GetHashCode()`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)和[`Object.Equals(Object)`](http://msdn.microsoft.com/en-us/library/system.object.equals.aspx)方法。请注意，`Distinct()`最终使用 GetHashCode() 来确定某些内容是否不同，但`Equals(Object)`应该`GetHashCode()`一起覆盖。
    [重载 Equals() 和运算符 == 的准则](http://msdn.microsoft.com/en-us/library/ms173147(v=vs.80).aspx)

    公共类设施 { 公共字符串 ID { 获取；放; } 公共字符串 Fac_Name { 获取；放; }

    ```
    // This is just a rough example.
    public override bool Equals(Object obj)
    {
        var fac = obj as Facility;
        if (fac == null) return false;

        if (Object.ReferenceEquals(this, fac)) return true;

        return (this.ID == fac.ID) && (this.Fac_Name == fac.Fac_Name);
    }

    public override int GetHashCode()
    {
        var hash = 13;

        if (!String.IsNullOrEmpty(this.ID))
            hash ^= ID.GetHashCode();
        if (!String.IsNullOrEmpty(this.Fac_Name))
            hash ^= Fac_Name.GetHashCode();

        return hash;
    } 
    ```

    }

* * *

*   提供自定义[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx).

```
public class FacilityEqualityComparer : IEqualityComparer<Facility>
{
    public bool Equals(Facility x, Facility y)
    {
        return (x.ID == y.ID) && (x.Fac_Name == y.Fac_Name);
    }

    public int GetHashCode(Facility fac)
    {
        var hash = 13;

        if (!String.IsNullOrEmpty(this.ID))
            hash ^= ID.GetHashCode();
        if (!String.IsNullOrEmpty(this.Fac_Name))
            hash ^= Fac_Name.GetHashCode();

        return hash;
    }
}

var facReturnList2 = 
        facReturnList.Select(x => 
            new Facility { ID = x.Fac_Name.Substring(0, 6), 
                  Fac_Name = x.Fac_Name.Substring(0, 3) })
            .Distinct(new FacilityEqualityComparer()).ToList(); 
```

* * *

另外，还有一些需要注意的事项：

1.  您的命名不遵循准则。属性名称中不要使用下划线，ID 应为 Id。
2.  无论您决定采用哪种方式，都应该考虑使用`String.Equals(...)`并指定 StringComparison 值。我只是`==`在字符串上使用相等比较来保持帖子简短易读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:53:53.663

所以问题是该[`Enumerable.Distinct`](http://msdn.microsoft.com/en-us/library/bb348436.aspx)方法使用默认的相等比较器 - 它正在比较哈希码 - 所以无论属性值如何，它将是一个不同的列表。为该类型构建一个相等比较器：

```
public class FacilityEqualityComparer : IEqualityComparer<Facility>
{
    public bool Equals(Facility fac1, Facility fac2)
    {
        return fac1.ID.Equals(fac2.ID) && fac1.Fac_Name.Equals(fac2.Fac_Name);
    }

    public int GetHashCode(Facility fac)
    {
        string hCode = fac.ID + fac.Fac_Name;
        return hCode.GetHashCode();
    }
} 
```

然后当你使用它时，像这样调用它：

```
var facReturnList2 = 
    facReturnList.Select(x => 
        new Facility { ID = x.Fac_Name.Substring(0, 6), 
              Fac_Name = x.Fac_Name.Substring(0, 3) })
        .Distinct(new FacilityEqualityComparer()).ToList();
return facReturnList2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T18:56:29.037

Distinct 使用默认的相等比较器来检查相等性。这意味着它正在寻找参考平等，这在您的情况下显然不会存在。

因此，您要么需要使用自定义`IEqualityComparer`（请参阅 的重载`Distinct()`，或者您可以复制`Distinct()`a`GroupBy()`和 a的功能`First()`：

```
facReturnList.Select(x => 
                       new Facility { ID = x.Fac_Name.Substring(0, 6), 
                       Fac_Name = x.Fac_Name.Substring(0, 3) 
                     })
             .GroupBy(x => new{x.ID, x.Fac_Name})
             .Select(y => y.First())
             .ToList(); 
```

你也可以在你的`Facility`类中重写 Equals 方法：

```
public override bool Equals(System.Object obj)
{
    if (ReferenceEquals(null, obj)) return false;
    if (ReferenceEquals(this, obj)) return true;
    if (obj.GetType() != this.GetType()) return false;
    Facility objAsFacility = obj as Facility;
    return Equals(objAsFacility);
}

protected bool Equals(Facility other)
{
    if (other.Fac_Name == this.Fac_Name)
        return true;
    else return false;
}  

public override int GetHashCode()
{
    return this.Fac_Name.GetHashCode(); 
    //Or you might even want to this:
    //return (this.ID + this.Fac_Name).GetHashCode();
} 
```

我可能会使用最重要的相等运算符方法。

# xml - 如何使用 xslt 获取子最大元素

> ID：15301070
> 
> 赞同：1
> 
> 时间：2013-03-08T18:43:43.657
> 
> 标签：xml, xslt, xslt-2.0

我有以下 XML：

```
<funds>
<bags>
    <bag name="BAG_USD_MAIN" value="10.0" type="USD">
        <pockets>
            <pocket name="bank" value="7.5" expireDate="20130331" />
            <pocket name="award" value="2.5" expireDate="20150501" />
        </pockets>
     </bag>
    <bag name="BAG_USD_SAVINGS" value="290.75" type="USD">
        <pockets>
            <pocket name="bank" value="290.75" expireDate="20130331" />
        </pockets>
     </bag>
    <bag name="BAG_EUR_EXTRA" value="890.0" type="EUR">
        <pockets>
            <pocket name="bank" value="753.0" expireDate="20131231" />
            <pocket name="bank_eng" value="137.0" expireDate="20150501" />
        </pockets>
     </bag>
</bags>
</funds> 
```

我想使用 XSLT 获得一个 XML 结果列表：

```
<bags>
    <bag name="BAG_USD_MAIN" maxExpDate="20150501" />
    <bag name="BAG_USD_SAVINGS" maxExpDate="20130331" />
    <bag name="BAG_EUR_EXTRA" maxExpDate="20150501" />
</bags> 
```

也就是说，对“包”进行分组并显示每个包的最大过期日期。

这可以通过 XSLT 2.0 实现吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:01:53.307

您的输入 XML 无效（所有`pocket`元素都未关闭），但假设已修复，您可以在 XSLT 1.0 中执行此操作：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="bags">
    <xsl:copy>
      <xsl:apply-templates />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="bag">
    <bag name="{@name}">
      <xsl:apply-templates select="pockets/pocket/@expireDate">
        <xsl:sort select="." data-type="number" />
      </xsl:apply-templates>
    </bag>
  </xsl:template>

  <xsl:template match="@expireDate">
    <xsl:attribute name="maxExpDate">
      <xsl:value-of select="." />
    </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

当它在您的输入 XML 上运行时（使其有效之后），结果是：

```
<bags>
  <bag name="BAG_USD_MAIN" maxExpDate="20150501" />
  <bag name="BAG_USD_SAVINGS" maxExpDate="20130331" />
  <bag name="BAG_EUR_EXTRA" maxExpDate="20131231" />
</bags> 
```

# python - django：限制只能从一个视图访问的 url

> ID：15301074
> 
> 赞同：0
> 
> 时间：2013-03-08T18:44:09.970
> 
> 标签：python, django, django-views

我是 Django 的新手。我有一个表格，一旦填写，我会保留数据并重定向到另一个页面，但我注意到如果我输入了正确的 url，我可以在不经过第一个表格的情况下访问第二个页面。

这是我的网址：

```
 urlpatterns = patterns('',

    url(r'newworkflow/$','access_mgmt.views.newworkflowform'),
    url(r'newrole/$','access_mgmt.views.newrole'),             
) 
```

因此，如果在我的浏览器 url 中输入 /newrole 我会得到该页面，但我只想在第一页上的表单“/newworkflow/”已填写时才能访问它。

是否可以仅在填写第一个表单页面时限制对第二个页面的访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:47:51.700

仅通过在某处记录（例如在会话中）用户已完成第 1 页，并在第 2 页的视图中进行检查。

# c++ - C++ 便携式浮点位表示？

> ID：15301076
> 
> 赞同：9
> 
> 时间：2013-03-08T18:44:22.673
> 
> 标签：c++, floating-point, portability, ieee-754, bit-representation

是否有符合 C++ 标准的方法来在编译时（或运行时，作为替代方案）确定“float”、“double”和“long double”的结构？

如果我假设`std::numeric_limits< T >::is_iec559 == true`和`std::numeric_limits< T >::radix == 2`，我怀疑这可能通过以下规则：

*   第一个 X 位是有效数字。
*   接下来的 Y 位是指数。
*   最后一位是符号位。

用下面的表达式模糊地像：

*   `size_t num_significand_bits = std::numeric_limits< T >::digits;`
*   `size_t num_exponent_bits = log2( 2 * std::numeric_limits< T >::max_exponent );`
*   `size_t num_sign_bits = 1u;`

除了我知道

*   `std::numeric_limits< T >::digits`包括“整数位”，无论格式是否实际明确表示它，所以我不知道如何以编程方式检测和调整这一点。
*   我猜`std::numeric_limits< T >::max_exponent`总是`2^(num_exponent_bits)/2`。

**背景**：我正在尝试以便携方式克服两个问题：

*   设置/获取有效数字中的位。
*   确定“long double”的结尾在哪里，这样我就知道不要读取具有未初始化内存的隐式填充位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T19:14:28.627

简而言之，没有。如果`std::numeric_limits<T>::is_iec559`，那么您`T`或多或少地知道 的格式：您仍然需要确定字节顺序。对于其他任何事情，所有赌注都已取消。（我知道仍在使用的其他格式甚至不是基数 2：例如，IBM 大型机使用基数 16。）IEC 浮点的“标准”排列在高位上有符号，然后是指数，以及低位的尾数；如果您可以成功地将其视为 `uint64_t`，例如（通过`memcpy`，`reinterpret_cast`或 `union`—`memcpy 保证可以工作，但效率低于其他两个），那么：

对于`double`：

```
uint64_t tmp;
memcpy( &tmp, &theDouble, sizeof( double ) );
bool isNeg = (tmp & 0x8000000000000000) != 0;
int  exp   = (int)( (tmp & 0x7FF0000000000000) >> 52 ) - 1022 - 53;
long mant  = (tmp & 0x000FFFFFFFFFFFFF) | 0x0010000000000000; 
```

对于`浮动：

```
uint32_t tmp;
memcpy( &tmp, &theFloat, sizeof( float ) );
bool isNeg = (tmp & 0x80000000) != 0;
int  exp   = (int)( (tmp & 0x7F800000) >> 23 ) - 126 - 24 );
long mant  = (tmp & 0x007FFFFF) | 0x00800000; 
```

关于`long double`，情况更糟，因为不同的编译器对它的处理方式不同，即使在同一台机器上也是如此。名义上，它是十个字节，但出于对齐的原因，它实际上可能是 12 或 16。或者只是`double`. *如果*它超过 10 个字节，我*认为*你可以指望它被打包到前 10 个字节中，这样就`&myLongDouble`给出了 10 个字节值的地址。但一般来说，我会避免 `long double`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:55:44.250

我会说唯一可移植的方法是将数字存储为字符串。这不依赖于“解释位模式”

即使您知道某事物有多少位，也不意味着它具有相同的表示形式——从零开始的指数或有偏差的指数。尾数前面有一个看不见的1吗？这同样适用于号码的所有其他部分。对于 BCD 编码或“十六进制”浮点数来说，情况会变得更糟——这些在某些架构中是可用的......

如果您担心结构（类、数组等）中未初始化的位，请使用 memset 将整个结构设置为零 [或其他一些已知值]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:35:32.917

为了后代，这就是我最终做的事情。

为了生成和测试我的 IEEE-754 信号 NaN 值，我将此模式用于“浮点”和“双精度”。

```
#include <cstdint> // uint32_t, uint64_t
#include <limits> // numeric_limits

union IEEE754_Float_Union
{
    float value;
    uint32_t bits;
};

float generate_IEEE754_float()
{
    IEEE754_Float_Union u = { -std::numeric_limits< float >::signaling_NaN() };
    size_t const num_significand_bits_to_set = std::numeric_limits< float >::digits
                                               - 1 // implicit "integer-bit"
                                               - 1; // the "signaling-bit"
    u.bits |= ( static_cast< uint32_t >( 1 ) << num_significand_bits_to_set ) - 1;
    return u.value;
}

bool test_IEEE754_float( float const& a_r_val )
{
    IEEE754_Float_Union const u = { a_r_val };
    IEEE754_Float_Union const expected_u = { generate_IEEE754_float() };
    return u.bits == expected_u.bits;
} 
```

For 'long double', I use the 'double' functions with casting. Specifically, I generate the 'double' value and cast it to 'long double' before it's returned, and I test the 'long double' by casting to 'double' then testing that value. My idea is that, while the 'long double' format can vary, casting a 'double' into a 'long double', then casting it back to 'double' later on should be consistent, ( i.e. not loose any information. )

# playframework-2.0 - Play20：获取从less生成的css文件的路径

> ID：15301079
> 
> 赞同：1
> 
> 时间：2013-03-08T18:44:30.300
> 
> 标签：playframework-2.0

我需要访问生成的 css 文件，该文件位于`target/scala-2.10/resource_managed/main/public/stylesheets/`但我还没有找到一个好的方法来做到这一点。

现在，我正在这样做：

```
Play.getFile("target/scala-2.10/resource_managed/main/public/stylesheets/generatedFile.css").getAbsolutePath 
```

但这将在任何 scala 版本/api 更改时中断。有没有其他方法可以得到这条路？

我需要这个路径的原因是我可以使用飞碟将视图打印到 PDF，所以我需要本地文件路径。

# ruby-on-rails - 从一个有很多通过关联获取第一个关联

> ID：15301086
> 
> 赞同：11
> 
> 时间：2013-03-08T18:44:59.770
> 
> 标签：ruby-on-rails, ruby, join, associations

我正在尝试将每个播放列表的第一首歌曲加入到一系列播放列表中，并且很难找到有效的解决方案。

我有以下型号：

```
class Playlist < ActiveRecord::Base
  belongs_to :user
  has_many :playlist_songs
  has_many :songs, :through => :playlist_songs
end

class PlaylistSong < ActiveRecord::Base
  belongs_to :playlist
  belongs_to :song
end

class Song < ActiveRecord::Base
  has_many :playlist_songs
  has_many :playlists, :through => :playlist_songs
end 
```

我想得到这个：

```
playlist_name  |  song_name
----------------------------
chill          |  baby
fun            |  bffs 
```

我很难通过加入找到一种有效的方法来做到这一点。

**更新***** *******

 **Shane Andrade 带领我走向了正确的方向，但我仍然无法得到我想要的。

这是我所能得到的：

```
playlists = Playlist.where('id in (1,2,3)')

playlists.joins(:playlist_songs)
         .group('playlists.id')
         .select('MIN(songs.id) as song_id, playlists.name as playlist_name') 
```

这给了我：

```
playlist_name  |  song_id
---------------------------
chill          |  1 
```

这很接近，但我需要第一首歌（根据 id）的名称。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T22:01:59.777

假设你在 Postgresql

```
Playlist.
  select("DISTINCT ON(playlists.id) playlists.id, 
          songs.id song_id, 
          playlists.name, 
          songs.name first_song_name").
  joins(:songs).
  order("id, song_id").
  map do |pl|
    [pl.id, pl.name, pl.first_song_name]
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:21:35.397

如果您想找到每个具有给定名称和给定歌曲的播放列表，您在上面对连接所做的操作就是您会做的操作。为了从每个播放列表中收集播放列表名称和第一首歌曲名称，您可以执行以下操作：

```
Playlist.includes(:songs).all.collect{|play_list| [playlist.name, playlist.songs.first.name]} 
```

这将以这种形式返回一个数组`[[playlist_name, first song_name],[another_playlist_name, first_song_name]]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T00:26:30.290

我认为通过对“第一”进行更严格的定义可以改善这个问题。我建议在模型上添加一个`position`字段。`PlaylistSong`此时您可以简单地执行以下操作：

```
Playlist.joins(:playlist_song).joins(:song).where(:position => 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T00:20:06.213

我认为最好的方法是使用内部查询来获取第一个项目，然后加入它。

未经测试，但这是基本思想：

```
# gnerate the sql query that selects the first item per playlist
inner_query = Song.group('playlist_id').select('MIN(id) as id, playlist_id').to_sql

@playlists = Playlist
              .joins("INNER JOIN (#{inner_query}) as first_songs ON first_songs.playlist_id = playlist.id")
              .joins("INNER JOIN songs on songs.id = first_songs.id") 
```

然后重新加入`songs`表，因为我们需要歌曲名称。我不确定 Rails 是否足够聪明，可以选择`song`最后一次连接的字段。如果不是，您可能需要`select`在选择的末尾包含 a`playlists.*, songs.*`或其他内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T08:02:09.720

尝试：

```
PlaylistSong.includes(:song, :playlist).
find(PlaylistSong.group("playlist_id").pluck(:id)).each do |ps|
  puts "Playlist: #{ps.playlist.name}, Song: #{ps.song.name}"
end

(0.3ms)  SELECT id FROM `playlist_songs` GROUP BY playlist_id
PlaylistSong Load (0.2ms)  SELECT `playlist_songs`.* FROM `playlist_songs` WHERE `playlist_songs`.`id` IN (1, 4, 7)
Song Load (0.2ms)  SELECT `songs`.* FROM `songs` WHERE `songs`.`id` IN (1, 4, 7)
Playlist Load (0.2ms)  SELECT `playlists`.* FROM `playlists` WHERE `playlists`.`id` IN (1, 2, 3)

Playlist: Dubstep, Song: Dubstep song 1
Playlist: Top Rated, Song: Top Rated song 1
Playlist: Last Played, Song: Last Played song 1 
```

该解决方案有一些好处：

*   仅限于 4 个选择语句
*   不加载所有 playlist_songs - 在数据库端聚合
*   不加载所有歌曲 - 在 db 端按 id 过滤

用 MySQL 测试。

这不会显示空的播放列表。当播放列表计数 > 1000 时，某些数据库可能会出现问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T08:22:54.070

只需从另一边获取歌曲：

```
Song
  .joins( :playlist )
  .where( playlists: {id: [1,2,3]} )
  .first 
```

但是，正如@Dave S. 所建议的那样，除非您明确指定顺序（列或其他任何内容），否则播放列表中的“第一首”歌曲是随机的`position`，因为 SQL 不保证返回记录的顺序，除非您明确要求它.

**编辑**

对不起，我看错了你的问题。我认为确实需要一个职位栏。

```
Song
  .joins( :playlist )
  .where( playlists: {id: [1,2,3]}, songs: {position: 1} ) 
```

如果您根本不想要任何位置列，您可以随时尝试按播放列表 id 对歌曲进行分组，但您必须这样做`select("songs.*, playlist_songs.*")`，并且“第一首”歌曲仍然是随机的。另一种选择是使用`RANK` [窗口函数](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)，但并非所有 RDBMS 都支持它（据我所知，postgres 和 sql server 都支持）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T08:24:07.917

您可以创建一个 has_one 关联，它实际上将调用与播放列表关联的第一首歌曲

```
class PlayList < ActiveRecord::Base
  has_one :playlist_cover, class_name: 'Song', foreign_key: :playlist_id
end 
```

然后就使用这个关联。

```
Playlist.joins(:playlist_cover) 
```

更新：没有看到连接表。

如果你有一个连接表，你可以使用一个`:through`选项`has_one`

```
class PlayList < ActiveRecord::Base
  has_one :playlist_song_cover
  has_one :playlist_cover, through: :playlist_song_cover, source: :song
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T11:36:28.563

```
Playlyst.joins(:playlist_songs).group('playlists.name').minimum('songs.name').to_a 
```

希望它有效:)

收到 ：

```
Product.includes(:vendors).group('products.id').collect{|product| [product.title, product.vendors.first.name]}
  Product Load (0.5ms)  SELECT "products".* FROM "products" GROUP BY products.id
  Brand Load (0.5ms)  SELECT "brands".* FROM "brands" WHERE "brands"."product_id" IN (1, 2, 3)
  Vendor Load (0.4ms)  SELECT "vendors".* FROM "vendors" WHERE "vendors"."id" IN (2, 3, 1, 4)
 => [["Computer", "Dell"], ["Smartphone", "Apple"], ["Screen", "Apple"]] 
2.0.0p0 :120 > Product.joins(:vendors).group('products.title').minimum('vendors.name').to_a
   (0.6ms)  SELECT MIN(vendors.name) AS minimum_vendors_name, products.title AS products_title FROM "products" INNER JOIN "brands" ON "brands"."product_id" = "products"."id" INNER JOIN "vendors" ON "vendors"."id" = "brands"."vendor_id" GROUP BY products.title
 => [["Computer", "Dell"], ["Screen", "Apple"], ["Smartphone", "Apple"]] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-13T20:27:45.313

您可以将[activerecord 范围](http://apidock.com/rails/ActiveRecord/Scoping/Named/ClassMethods/scope)添加到模型中，以优化 sql 查询在应用程序上下文中为您工作的方式。此外，范围是可组合的，因此更容易获得您正在寻找的东西。

例如，在您的 Song 模型中，您可能需要 first_song 范围

```
class Song < ActiveRecord::Base
  scope :first_song, order("id asc").limit(1)
end 
```

然后你可以做这样的事情

```
 playlists.songs.first_song 
```

请注意，您可能还需要向 PlaylistSongs 关联模型或 Playlist 模型添加一些范围。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-15T00:02:16.593

你没有说你的数据库中是否有时间戳。如果你这样做了，并且在将歌曲添加到播放列表时创建了连接表 PlaylistSongs 上的记录，我认为这可能有效：

```
first_song_ids = Playlist.joins(:playlist_songs).order('playlist_songs.created_at ASC').pluck(:song_id).uniq
playlist_ids = Playlist.joins(:playlist_songs).order('playlist_songs.created_at ASC').pluck(:playlist_id).uniq
playlist_names = Playlist.where(id: playlist_ids).pluck(:playlist_name)
song_names = Song.where(id: first_song_ids).pluck(:song_name) 
```

我相信 playlist_names 和 song_names 现在以这种方式由它们的索引映射。如：playlist_names[0]第一首歌的名字是song_names[0]，playlist_names[1]第一首歌的名字是song_names[1]，以此类推。我相信您可以使用内置的 ruby​​ 方法很容易地将它们组合成散列或数组。

我意识到您正在寻找一种有效的方法来执行此操作，并且您在评论中说您不想使用块，我不确定您所说的高效是否意味着一体化查询。我只是习惯于结合所有这些 Rails 查询方法，也许看看我在这里的内容，您可以根据自己的需要进行修改，使它们更高效或更简洁。

希望这可以帮助。**

# ruby-on-rails - Rails：资产预编译失败

> ID：15301087
> 
> 赞同：2
> 
> 时间：2013-03-08T18:45:21.267
> 
> 标签：ruby-on-rails, linux, ruby-on-rails-3, rake, asset-pipeline

当我运行时，在我的一台 linux 服务器上...

```
 bundle exec rake assets:precompile RAILS_ENV=production --trace 
```

我收到以下错误...

```
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/usr/local/bin/ruby /srv/www/example.com/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Command failed with status (): [/usr/local/bin/ruby /srv/www/example.com/s...]
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `call'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `sh'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `sh'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils.rb:80:in `ruby'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `ruby'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/srv/www/example.com/shared/bundle/ruby/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/srv/www/example.com/shared/bundle/ruby/1.9.1/bin/rake:23:in `load'
/srv/www/example.com/shared/bundle/ruby/1.9.1/bin/rake:23:in `<main>' 
```

我正在使用 Rails 3.2.11，尝试挖掘 rake 代码，但我不是 rake 专家。有人经历过吗？不确定如何调试？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:44:23.090

当 RAM 不足且进程使用过多 RAM 时，内核会主动终止进程。我将我的服务器切换到开发模式（因为它是一个测试服务器）以暂时跳过资产预编译部分及其功能。

# sql-server - 确定触发器是否发生 UPDATE、DELETE 或 INSERT 的最佳方法是什么

> ID：15301091
> 
> 赞同：0
> 
> 时间：2013-03-08T18:45:52.423
> 
> 标签：sql-server, triggers

我想在 MS SQL 中为 INSERT、UPDATE 和 DELETE 创建一个触发器，但我希望能够在没有 3 个 IF 语句的情况下简单地提取数据

我想做这样的事情：

```
DECLARE @PK  int

SELECT @PK = COALESCE(i.PK, d.PK)
FROM inserted i, deleted d 
```

这不起作用，但想知道我是否可以在一个查询中做到这一点。

有哪些替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:51:21.130

您可以执行此处找到的切换逻辑：[SQL Server 触发器切换插入、删除、更新](https://stackoverflow.com/questions/1751715/sql-server-trigger-switching-insert-delete-update)

或者您可以创建 3 个不同的触发器。

这些是你的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T05:22:38.407

我最终使用了 FULL OUTER JOIN

```
DECLARE @DataIWanted as varchar(255)

SELECT @DataIWanted = COALESCE(i.TheData,d.TheData)
FROM inserted i
   FULL OUTER JOIN deleted d on d.PK=i.PK 
```

上面的查询将来自已删除的表或插入/更新的表。假设 TheData 在数据库中被定义为 NON NULL。

# php - Symfony 2类表继承夹具SQL错误

> ID：15301093
> 
> 赞同：1
> 
> 时间：2013-03-08T18:46:09.300
> 
> 标签：php, doctrine-orm, symfony-2.2

我是新来的，对 symfony 2 很陌生。

我尝试构建一个从实体“进程”继承的实体“邮件进程”。这是我的实体定义：

```
// src/MW/TodoBundle/Entity/Process.php
namespace MW\TodoBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity 
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="process_type", type="string")
 * @ORM\DiscriminatorMap({"mailprocess" = "MailProcess", "process" = "Process"})
 * @ORM\Table(name="process")
 * @ORM\HasLifecycleCallbacks 
 */
class Process
{

    /**
     *
     * @ORM\Id
     * @ORM\Column(type="integer", unique=true)
     * @ORM\GeneratedValue(strategy="AUTO") 
     */
    protected $id;

    /**
     *
     * @ORM\Column(type="string") 
     */
    protected $title;

    /**
     *
     * @ORM\Column(type="datetime") 
     */
    protected $created;

    /**
     *
     * @ORM\Column(type ="text", nullable= true)
     */
    protected $comment;
    protected $options;

    // Getters and Setters
}

// src/MW/TodoBundle/Entity/MailProcess.php
namespace MW\TodoBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use MW\TodoBundle\Entity\Process;

/**
 *
 * @ORM\Entity
 * @ORM\Table(name="process_mailprocess")
 */
class MailProcess extends Process
{

    /**
     *
     * @ORM\Column(type="string") 
     */
    protected $from;

    /**
     *
     * @ORM\Column(type="string") 
     */
    protected $to;

    /**
     *
     * @ORM\Column(type="string", nullable=true) 
     */
    protected $subject;

    /**
     *
     * @ORM\Column(type="text", nullable=true) 
     */
    protected $message;
} 
```

您可以看到使用的 ORM 类表继承：两个表 'process' 和 'process_mailprocess' 带有鉴别器列 'process_type'。

我确实使用 'php app/console dictionary:schema:update --force' 将架构更新到我的 MySQL 数据库，这工作正常。

但是还有我的数据装置：我在这里将它们剥离为一个，但请放心，我还有其他装置也在测试运行良好的实体“进程”。

```
// src/MW/TodoBundle/DataFixtures/ORM/ProcessFixtures.php

namespace MW\TodoBundle\DataFixtures\ORM;

use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;
use MW\TodoBundle\Entity\Process;
use MW\TodoBundle\Entity\MailProcess;

class ProcessFixtures implements FixtureInterface
{

    public function load(ObjectManager $manager)
    {
        $mp1= new MailProcess();
        $mp1->setTitle("Invoice from heaven")
            ->setComment("sitebot: Irgendwer will was von euch!")
            ->setCreated(new \DateTime())
            ->setFrom("m")
            ->setTo("m")
            ->setSubject("m")
            ->setMessage("m");
        $manager->persist($mp1);
        $manager->flush();
    }
} 
```

唉，执行“php app/console 原则：fixtures:load”确认“y”清除让我

```
 [Doctrine\DBAL\DBALException]
  An exception occurred while executing 'INSERT INTO process_mailprocess (id, from, to, subject, message) VALUES (?,
  ?, ?, ?, ?)' with params {"1":28,"2":"m","3":"m","4":"m","5":"m"}:

  SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your   SQL syntax; check the manual that
   corresponds to your MySQL server version for the right syntax to use near 'from, to, subject, message) VALUES ('28
  ', 'm', 'm', 'm', 'm')' at line 1

  [PDOException]
  SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that
   corresponds to your MySQL server version for the right syntax to use near 'from, to, subject, message) VALUES ('28
  ', 'm', 'm', 'm', 'm')' at line 1 
```

我看不出有什么问题，此外，Doctrine 和 Symfony 创建了 SQL 查询。谁能指出我在这里做错了什么？这对我来说真是令人头疼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:57:37.287

我认为您会收到语法错误，因为`from`它是 MySql 中的保留字。您可以在注释中设置列名并正确引用它。

```
/**
 *
 * @ORM\Column(type="string", name="`from`") 
 */
protected $from; 
```

# android - 地图视图，数据框架

> ID：15301094
> 
> 赞同：0
> 
> 时间：2013-03-08T18:46:12.620
> 
> 标签：android, database

我是一个新手 android 开发者，现在我正在使用 Mapview。我想根据他的纬度和经度在地图中显示不同类型的叠加层。

我用 sqlite 创建了一个数据库，保存在文件夹 assets 上。这是我的 tables.xml（抱歉，这些字段是西班牙语）

```
<database name="loteria.db" version="1">
    <table name="puestos" to-string="%direccion%">
        <field name="direccion" type="text" obligatory="true"/>
        <field name="latitud" type="double" obligatory="false"/>
        <field name="longitud" type="double" obligatory="false"/>
    </table>
</database> 
```

太简单了。此刻我不需要更多。在我创建了一个名为 MapaActivity 的 Activity 之后，我在其中绘制了我的 mapView。这里我有 2 个问题，第一个，我的 mapView 必须是 TapControlledMapView，因为我想使用方法 onsingleTapListener，但我不能，它总是导致 FC，我不知道为什么！

第二个麻烦是当我想从数据库中提取实体列表（列表

```
 List<Entity> puestos = Lists.newArrayList();
        DataFramework db = null;
        try {
            db = DataFramework.getInstance();
            db.open(this, getPackageName());
puestos = db.getEntityList("puestos", "latitud < " + maxLatitud
                    + " and latitud > " + minLatitud + " and longitud < "
                    + maxLongitud + " and longitud > " + minLongitud);
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            db.close();
        } 
```

什么都没有发生，puestos 总是空的。

有任何想法吗？？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:28:25.357

为什么你不只是使用 SQLiteOpenHelper？查看本教程：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

我怀疑你会比用 xml 构建你的表有更好的运气。

# javascript - 按标签名称删除元素

> ID：15301095
> 
> 赞同：1
> 
> 时间：2013-03-08T18:46:13.400
> 
> 标签：javascript, removechild, getelementsbytagname

我正在尝试使用 javascript 按标签名称删除元素。我为一个名为“clear”的按钮设置了一个点击处理程序。我正在尝试使用函数 clear 从列表中删除所有 li 元素。这是我到目前为止所拥有的：

```
function clear() {
  var list = document.getElementById("test").getElementsByTagName("li");
  for (k = list.length; k >= 0; k++) {
    var parent = list.parentNode;
    parent.removeChild(list[k]);
  }
} 
```

其中“test”是我在 HTML 中的 ul 元素的名称。我在控制台中收到一条消息，指出父级未定义。关于如何修改代码以便删除 li 元素的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:47:39.807

问题似乎是您从while开始`list.length`并*递增*`k >= 0`。无限循环。

除此之外，您需要使用`list[k].parentNode`，并且您没有声明`k`，因此：

```
function clear() {
  var list = document.getElementById("test").getElementsByTagName("li");
  for (var k = list.length - 1; k >= 0; k--) {
    var item = list[k];
    item.parentNode.removeChild(item);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:12:40.700

返回的[*NodeList*](https://developer.mozilla.org/en-US/docs/DOM/NodeList)[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)（通常）是实时的（动态的）。这意味着它的*长度*随着节点的删除而减小。因此，您必须在循环中考虑这一点。
这里有一些更多的例子来说明如何绕过它。

```
function clear() {
    var nodes = document.getElementById("test").getElementsByTagName("li"),
        i = nodes.length; // one var statement at beginning
    // Choose one of
    while (i--) { // same as `i-->0`
        nodes[i].parentNode.removeChild(nodes[i]); // remove nodes from end
    }
    // OR
    while (nodes.length) { // same as `nodes.length>0`, okay as dynamic list
        nodes[0].parentNode.removeChild(nodes[0]); // remove nodes from start
    }
    // OR
    for (; i >= 0; --i) {
        nodes[i].parentNode.removeChild(nodes[i]); // remove nodes from end
    }
    // etc
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:23:48.843

**HTML：**

```
<ul id="test" type="bullet">
    <li>apple</li>
    <li>Orange</li>
</ul>

<button onclick="Clearall()">Click me</button> 
```

如果您的`UL`标签仅包含`LI`标签，请尝试如下方式...它将帮助您..

```
function Clearall()
{
 document.getElementById("test").innerHTML="";
} 
```

如果您的`UL`标签包含`LI`标签和其他标签，请尝试如下所示..它将帮助您..

**Javascript：**

```
function Clearall()
{
  var ul = document.getElementById("test");
  var lis = ul.getElementsByTagName("li");
  while(lis.length > 0)
  {
   ul.removeChild(lis[lis.length - 1]);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:03:30.687

你可以这样概括：

```
function clear(list) {
  for (var i = list.length, li; li = list[--i];)
    li.parentNode.removeChild(li);
}

clear(document.getElementById("test").getElementsByTagName("li")); 
```

您的主要错误是，而`k++`不是–是NodeList，没有父级；列表的每个元素都可以有不同的父元素。`k--``list.parentNode``list[k].parentNode``list`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T18:47:50.110

几乎就在那里，两个小错误：

```
function clear() {
  var list = document.getElementById("test").getElementsByTagName("li");
  for (var k = list.length; k-- > 0; ) { // decrement from list.length-1 to 0
    var parent = list[k].parentNode; // you need the parent of the item, not the list
    parent.removeChild(list[k]);
  }
} 
```

请注意，递减而不是递增是要做的事情，因为相反的顺序会使您跳过动态[节点列表](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)的某些项目。

# java - 在单击按钮之前，如何隐藏 jlist？

> ID：15301098
> 
> 赞同：0
> 
> 时间：2013-03-08T18:46:20.877
> 
> 标签：java

我是一名初学者程序员，正在为演示文稿编写一个简单的 jApplet。小程序询问用户的姓名，然后向他们打招呼并询问他们的情况。那时我希望出现一个选项列表供用户选择。

问题是我不知道如何隐藏列表。我查看了属性，找不到显示或可见选项。我还尝试将可见行数设置为 0。这并没有完全摆脱它，但对于我的意图来说已经足够了。当我尝试在 btnclick 函数中将其更改为

```
feelingLst.setVisibleRowCount(4); 
```

什么都没有出现。

如何隐藏此框，然后在需要时显示它？应该注意的是，它位于 JScrollPane (feelingSPnl) 中，即使我不想要它，netbeans 也会不断添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:54:08.090

JList（实际上是所有其他 Swing 组件）都有一个为 JComponent 继承的 setVisible() 方法。请参阅[Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setVisible%28boolean%29)。

所以你可以写：

```
feelingList.setVisible(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:56:46.603

将 Jlist 的 JScrollPane 设置为 visible(false)，然后在对应按钮的 actionPerformed 中将其设置回 visible(true)。请注意，如果您只设置为不可见列表，您将获得空滚动窗格。

# ckeditor - CKEditor 4 构建（缩小和丑化）

> ID：15301099
> 
> 赞同：24
> 
> 时间：2013-03-08T18:46:22.563
> 
> 标签：ckeditor

在我们的构建过程中（使用 grunt），我们将所有脚本连接、缩小和丑化为一个脚本（也意味着仅单个请求）。

现在 CKEditor 4 似乎正在使用模块样式加载方法。

谁能告诉我如何将 CKEditor 4 包含到具有所有必要资源的项目中，这样以后就不会动态加载了吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-08T23:29:19.100

CKEditor 在两种模式下工作：

1.  在开发（源）模式下：

    1.  你包括`ckeditor.js`文件，
    2.  它加载所有核心文件，
    3.  它加载`config.js`（您可以通过将[config.customConfig](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-customConfig)设置为虚假值来关闭它），
    4.  它会加载样式集文件，除非您将[config.stylesSet](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-stylesSet)设置为`false`（自 4.1RC 起）或样式数组（直接设置），
    5.  它检查应该加载哪些插件，
    6.  它加载插件和这些插件的依赖项，
    7.  它加载插件的语言文件，
    8.  它初始化所有插件，
    9.  同时加载了一堆样式表文件（很少用于编辑器 UI，一个用于内容，除非那是内联编辑器）和图标文件（每个按钮一个）被加载，
    10.  它准备好了！
    11.  但是如果你打开一个对话框，它会加载对话框的 JS 文件；例如，按需加载的单词过滤器中的粘贴也是如此；这个想法是这些东西一开始不需要，而且它们很重，所以最好稍后再加载它们。
2.  在发布（构建）模式下，您可以使用[在线 builder](http://ckeditor.com/builder)或直接在[dev repo](https://github.com/ckeditor/ckeditor-dev)中可用的[预设构建器](https://github.com/ckeditor/ckeditor-presets)或 dev 构建器创建，事情得到了优化：

    1.  你包括`ckeditor.js`文件，
    2.  它包含构建中包含的所有核心文件和所有插件文件
    3.  `config.js`和`styles.js`文件是分开下载的，但是像在开发模式下你可以保存这2个HTTP请求，
    4.  一个语言文件加载了构建中包含的所有插件的翻译，
    5.  所有插件都已初始化，
    6.  加载了一个用于编辑器 UI 的样式表文件和一个用于内容的样式表文件（除非那是一个内联编辑器）加上一个图标条，
    7.  它准备好了！
    8.  对话文件和文字过滤器文件中的粘贴是按需加载的。

注意：所有 JS 和 CSS 文件在发布模式下都会被缩小。

您可以尝试优化一些事情。

1.  您可以尝试`ckeditor.js`与语言文件、对话框和 PSW 过滤器文件连接 - 因此所有 JS 文件都可以连接在一起 AFAIK。
2.  编辑器 UI 样式表文件可能与您页面的样式表连接，但您必须找到一种方法来防止编辑器自行加载它。
3.  内容样式表 - 即使您使用框架编辑器，您也可以将其删除，但您需要使用[fullPage](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-fullPage)功能设置内容样式（不推荐）。
4.  您不能将图标条与您的条合并。

就是这样，我猜。我认为默认情况下，CKEditor 构建得到了很好的优化。你可以改进一些东西，但你不会节省很多时间，而且你会失去一些功能，比如自动语言识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-18T02:27:51.910

[我从Reinmar 的回答](https://stackoverflow.com/a/15305081/2512445)中实施了建议 2 和 3 - 我是这样做的：

> 2.  “编辑器 UI 样式表文件可能会与您页面的样式表连接，但您必须找到一种方法来防止编辑器自行加载它”

```
var swap = CKEDITOR.skin.loadPart;
CKEDITOR.skin.loadPart = function(res, callback) {
    if (res == 'editor') {
        console.log('Ignoring editor.css load');
        callback && callback();
        return;
    }
    swap(res, callback);
} 
```

然后我捆绑`editor.css`到我的捆绑文件中。

> 3.  内容样式表 - 即使您使用框架编辑器，您也可以将其删除，但您需要使用 fullPage 功能设置内容样式（不推荐）。

```
// I copied the content.css from ckeditor-dev and loaded it into contentCss.
var contentCss = 'put your css here';

var config = {
    // Other things here
    // ...

    contentCss: contentCss
};

ckeditor.replace(element, config); 
```

两者都是在初始化时完成的（在我的代码中，它们位于调用 的函数中`ckeditor.replace`，如图 3 所示）。

这些绝对是 hack，但就我目前的使用而言，这些 hack 启用的优化是值得的。

此外，代替实施建议 1.，我通过设置和在配置中防止`js`加载其他文件。`customConfig: ''``stylesSet: false`

# c# - 如何在 C# 中更改 NaN 字符串表示？

> ID：15301101
> 
> 赞同：8
> 
> 时间：2013-03-08T18:46:25.517
> 
> 标签：c#, .net, tostring, nan

我的程序将点云保存到文件中，其中每个点云都是`Point3D[,]`来自`System.Windows.Media.Media3D`命名空间的 . 这显示了输出文件的一行（葡萄牙语）：

```
-112,644088741971;71,796623005014;NaN (Não é um número) 
```

虽然我希望它是（为了之后正确解析）：

```
-112,644088741971;71,796623005014;NaN 
```

生成文件的代码块在这里：

```
var lines = new List<string>();

for (int rows = 0; rows < malha.GetLength(0); rows++) {
    for (int cols = 0; cols < malha.GetLength(1); cols++) {

        double x = coordenadas_x[cols];
        double y = coordenadas_y[rows];
        double z;

        if ( SomeTest() ) {
            z = alglib.rbfcalc2(model, x, y);
        } else {
            z = double.NaN;
        }

        var p = new Point3D(x, y, z);
        lines.Add(p.ToString());                       

        malha[rows, cols] = p;
    }
}

File.WriteAllLines("../../../../dummydata/malha.txt", lines); 
```

似乎`double.NaN.ToString()`从 inside 调用的方法`Point3D.ToString()`包括我根本不想要的带括号的“附加解释”。

有没有办法改变/覆盖这个方法，使它只输出`NaN`，没有括号部分？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T18:51:33.430

`Double.ToString()`用于`NumberFormatInfo.CurrentInfo`格式化其数字。最后一个属性引用`CultureInfo`当前在活动线程上设置的 。这默认为用户的当前语言环境。在这种情况下，它是葡萄牙文化环境。要避免这种行为，请使用`Double.ToString(IFormatProvider)`重载。在这种情况下，您可以使用`CultureInfo.InvariantCulture`.

此外，如果您想保留所有其他标记，您可以只切换 NaN 符号。默认情况下，全球化信息是只读的。创建一个克隆将解决这个问题。

```
System.Globalization.NumberFormatInfo numberFormatInfo = 
    (System.Globalization.NumberFormatInfo) System.Globalization.NumberFormatInfo.CurrentInfo.Clone();
numberFormatInfo.NaNSymbol = "NaN";

double num = double.NaN;
string numString = System.Number.FormatDouble(num, null, numberFormatInfo); 
```

要在当前线程上设置它，请创建当前文化的副本并在文化上设置数字格式信息。[在 .NET 4.5](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/39ab12ba-283e-4f82-945a-18f30d1366b0)之前，无法为所有线程设置它。创建每个线程后，您必须确保正确的`CultureInfo`. 从 .NET 4.5 开始，`CultureInfo.DefaultThreadCurrentCulture`它定义了 .NET 中线程的默认区域性`AppDomain`。仅当尚未设置线程的文化时才考虑此设置（请参阅 MSDN）。

单线程示例：

```
System.Globalization.CultureInfo myCulture =
     (System.Globalization.CultureInfo)System.Threading.Thread.CurrentThread.CurrentCulture.Clone();
myCulture.NumberFormat.NaNSymbol = "NaN";

System.Threading.Thread.CurrentThread.CurrentCulture = myCulture;   
string numString = double.NaN.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:56:19.073

只是不要将 NaN 值传递给`ToString`.

例如（包装在扩展方法中以便于重用）：

```
static string ToCleanString(this double val)
{
    if (double.IsNan(val)) return "NaN";
    return val.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:10:24.237

怎么样：

```
NumberFormatInfo myFormatInfo = NumberFormatInfo.InvariantInfo;

Point3D myPoint = new Point3D(1,1,double.NaN);
var pointString = myPoint.ToString(myFormatInfo); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:43:09.967

首先，Caramiriel 提供的答案是`double.NaN`用您可能想要的任何字符串表示的解决方案。

顺便说一句，我想要字符串`"NaN"`，这是[文档](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.nansymbol.aspx)所说的`NumberFormatInfo.NaNSymbol`：

> 表示 IEEE NaN（不是数字）值的字符串。InvariantInfo 的默认值为“NaN”。

然后我想出了如何获得我想要的纯“NaN”字符串并摆脱逗号分隔符，通过使用提供的默认值`InvariantCultureInfo`，在创建当前线程之后添加以下行：

```
Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.InvariantCulture; 
```

效果很好！

# android - 安卓闹钟管理器重置

> ID：15301107
> 
> 赞同：0
> 
> 时间：2013-03-08T18:46:47.190
> 
> 标签：android, alarmmanager, reset

我的应用程序使用以下代码设置 Alaram 以“每日”执行服务。

```
AlarmManager alarmManager = (AlarmManager) ctx.getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(ctx, SchedulerEventReceiver.class); // explicit// intent

        Calendar now = Calendar.getInstance();
        now.add(Calendar.SECOND, 20);
        PendingIntent intentExecuted = PendingIntent.getBroadcast(ctx, new Random().nextInt(), i,PendingIntent.FLAG_CANCEL_CURRENT);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, now.getTimeInMillis(), AlarmManager.INTERVAL_DAY, intentExecuted); 
```

`adb shell dumpsys alarm`向我展示了正确的细节。就像它计划每天运行一样。但是，当我将 .apk 安装到手机时，它会重复执行。它不会等待一天执行。

我不知道如何重置手机中设置的闹钟。我卸载了应用程序和新安装的应用程序，但它没有工作。有人可以告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:06:07.717

我用过这个，这对我来说很好用。我已使用此警报在 18 天后触发。然后在 18 天后再次等等：

```
long time = 1555200000L; //18 days = 18*24*60*60*1000 = 1555200000L
AlarmManager am=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(context, MyReceiver.class);
PendingIntent pi = PendingIntent.getBroadcast(context, tag, i, PendingIntent.FLAG_CANCEL_CURRENT);
am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+time, time, pi); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:55:08.750

现在，你告诉它每分钟 20 秒

```
now.add(Calendar.SECOND, 20); 
```

您需要添加一天中的小时和可能的分钟

```
 now.add(Calendar.HOUR, 12) //set your hour here. noon right now 
```

或者

```
now.add(Calendar.HOUR_OF_DAY, 12) 
```

[日历](http://developer.android.com/reference/java/util/Calendar.html#SECOND)

# list - html css项目符号列表垂直问题

> ID：15301110
> 
> 赞同：0
> 
> 时间：2013-03-08T18:47:00.667
> 
> 标签：list, html-lists, nav

的HTML：

```
<ul class="fruits">
<li>Peach</li>
<li>Apple</li>
<li>Orange</li>
<li>Banana</li>
<li>Pineapple</li>
<li>Strawberry</li>
</ul> 
```

CSS：

```
.fruits ul
{
list-style-type:none;
padding:0px;
margin:0px;
}

.fruits ul li
{
background-image:url('http://www.myurl.co.uk/images/mybullet.png');
background-repeat:no-repeat;
background-position:0px 5px; 
padding-left:14px;
} 
```

我在页面上有其他水平导航菜单，因此需要按上述分类。当我尝试尝试时，它默认只返回一个项目符号列表，并且不起作用。我尝试只使用 < ul > 并且它起作用了，但是把页面的其余部分弄乱了。对于具有特定类的正常垂直项目符号列表有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:21:52.423

试试这个：

```
ul.fruits
{
list-style-type:none;
padding:0px;
margin:0px;
} 
```

[我在这里](http://jsfiddle.net/xsceB/)为你做了一个 jsfiddle 。我已经删除了背景样式，所以不要忘记重新插入它们。

# logging - 滚动侦听器和午夜文件名不正确

> ID：15301116
> 
> 赞同：1
> 
> 时间：2013-03-08T18:47:28.397
> 
> 标签：logging, enterprise-library, enterprise-library-5

我在 Enterprise 5 中使用 RollingFlatFileTraceListenerData 并将 rollingInterval 设置为 Midnight。

当前的日志文件是：myapplication.log

日志文件每午夜轮换一次（本地服务器时间），假设时钟到达 2013 年 3 月 8 日凌晨 12:00:00，它将当前日志文件重命名为 myapplication.2013-03-08.log。

myapplication.2013-03-08.log
myapplication.log

实际上，myapplication.2013-03-08.log 的实际内容是从 2013 年 3 月 7 日凌晨 12:00:00 到 2013 年 3 月 7 日下午 23:59:59 的前一天。

是否有任何设置可以指定日志文件名，以便它在午夜执行“date-1”？我希望文件名改为 myapplication.2013-03-07.log。知道怎么做吗？

这是配置：

```
<listeners>
<add name="Flat File Trace Listener"     
   type="Microsoft.Practices.EnterpriseLibrary.Logging.
  TraceListeners.FlatFileTraceListener, 
  Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, 
 PublicKeyToken=31bf3856ad364e35"                    
  listenerDataType=
  "Microsoft.Practices.EnterpriseLibrary.Logging.
  Configuration.RollingFlatFileTraceListenerData,
 Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0,     Culture=neutral, 
 PublicKeyToken=31bf3856ad364e35"                 
 fileName="C:\myapplication.log"  rollInterval="Midnight"              
 header="" footer="" formatter="Text Formatter"/>
 </listeners> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T03:33:57.027

我认为没有办法改变开箱即用的行为。您必须实现具有所需行为的自定义跟踪侦听器或修改 RollingFlatFileTraceListener 源代码。

# android - android意图过滤器模式匹配

> ID：15301117
> 
> 赞同：1
> 
> 时间：2013-03-08T18:47:32.150
> 
> 标签：android, android-intent

我的意图过滤器如下所示：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
            <data android:scheme="*" 
                  android:host="*" 
                  android:pathPattern="/pickup.jsp\?h=.+&p=.*&l=-?[0-9]+" />
        </intent-filter> 
```

我在 Eclipse 中得到解析器错误：

```
[com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] 
Parser exception for C:\projects\myapp\AndroidManifest.xml: 
The reference to entity "p" must end with the ';' delimiter. 
```

我正在尝试`/path/pickup.jsp?h=handle&p=&l=4234`使用正则表达式匹配任何方案和任何主机的 URL。那可能吗？如果是这样，我将如何匹配它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:21:38.393

> 我正在尝试匹配 URL /path/pickup.jsp?h=handle&p=&l=4234

这是不可能的。`Uri`从角度来看，查询参数不是 的一部分，`<intent-filter>`因此无法匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:54:32.203

看起来 XML 解析器正在解释“&”符号。

你应该替换`&`为`&amp;`

# javascript - 如何在选择其他下拉菜单时启用或禁用下拉菜单或文本框？

> ID：15301119
> 
> 赞同：0
> 
> 时间：2013-03-08T18:47:40.807
> 
> 标签：javascript, jquery, html

```
<script>
$('#Select_Font').attr('disabled', 'true');
$('#Enter_Text').attr('disabled', 'true');
$('.dropdownstyle').change(function(){
    $(".dropdownstyle option:selected").text();
    if($(this).attr('value').match(/Custom$/)) 
    {
        $('#Select_Font').attr('disabled', 'false');
        $('#Enter_Text').attr('disabled', 'false');
    } else if($(this).attr('value').match(/no Thanks$/)) 
    {
        $('#Select_Font').attr('disabled', 'true');
        $('#Enter_Text').attr('disabled', 'true');
    }
});
</script>

<table>
<tbody>
<tr>
<td>
<span>Select type</span>
</td>
<td>
<select class="dropdownstyle">
    <option value="No Thanks">No Thanks</option>
    <option value="Custom lid (200)">Custom lid (200)</option>
</select>
</td>
</tr>
<tr>
<td>
<span>Select font</span>
</td>
<td>
<select id="Select_Font"> 
    <option value="Arial">Arial</option> 
    <option value="georgia">georgia</option> 
</select>
</td>
</tr>
<tr>
<td>
<span>enter text</span>
</td>
<td>
<input type="text" id="Enter_Text">
</td>
</tr>
</tbody>
</table> 
```

在上面的代码中，最初我希望禁用字体下拉菜单和文本框，但是在选择自定义表单的第一个下拉菜单时，我希望启用字体下拉菜单和文本框。我不确定我哪里出错了，所以应该怎么做才能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:52:57.167

您使用的是字符串 ('true', 'false') 而不是布尔值 (true, false)。试试这个：

```
<script>
$('#Select_Font').attr('disabled', true);
$('#Enter_Text').attr('disabled', true);
$('.dropdownstyle').change(function(){
    $(".dropdownstyle option:selected").text();
    if($(this).attr('value').match(/Custom$/)) 
    {
        $('#Select_Font').attr('disabled', false);
        $('#Enter_Text').attr('disabled', false);
    } else if($(this).attr('value').match(/no Thanks$/)) 
    {
        $('#Select_Font').attr('disabled', true);
        $('#Enter_Text').attr('disabled', true);
    }
});
</script>
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:53:08.367

尝试：**[样品](http://jsfiddle.net/KK2X3/1/)**

```
$('#Select_Font, #Enter_Text').attr('disabled', 'disabled');
$('.dropdownstyle').change(function () {
    var present = $(this).val().match(/\Custom\b/gi) == null ? true : false;
    if(present){
        $('#Select_Font, #Enter_Text').prop('disabled', 'disabled');
    }
    else{
        $('#Select_Font, #Enter_Text').removeAttr('disabled');
    }
}); 
```

`$(this).attr('value')`将返回`undefined`。你应该使用`$(this).val()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T18:51:52.407

你应该使用：

```
$("#id").prop("disabled", true); 
```

或者这也应该起作用：

```
$("#id")[0].disabled = true; 
```

在您的代码中，您将 true 和 false 作为字符串（第一个错误）传递给不再使用的 .attr() （第二个错误）

# php - 将图像作为数组返回

> ID：15301124
> 
> 赞同：0
> 
> 时间：2013-03-08T18:47:50.470
> 
> 标签：php, image-resizing

如果上传的图像太大，我正在尝试在 PHP 中调整图像的大小。我创建了一个应该调整文件大小的函数，然后（希望）返回一个数组——除非它不起作用:(

```
private function _resizeImage($image, $width = 780, $height = 780) {

    $imgDetails = GetImageSize($image["tmp_name"]);

    // Content type
    //header("Content-Type: image/jpeg");
    //header("Content-Disposition: attachment; filename=resized-$image");

    // Get dimensions
    $width_orig = $imgDetails['0'];
    $height_orig = $imgDetails['1'];

    $ratio_orig = $width_orig/$height_orig;

    if ($width/$height > $ratio_orig) {
       $width = $height*$ratio_orig;
    } else {
       $height = $width/$ratio_orig;
    }

    // Resample
    switch ( $imgDetails['2'] ) 
    {
      case 1: $newImage = imagecreatefromgif($image["tmp_name"]); break;
      case 2: $newImage = imagecreatefromjpeg($image["tmp_name"]); break;
      case 3: $newImage = imagecreatefrompng($image["tmp_name"]); break;
      default: trigger_error('Unsupported filetype!', E_USER_WARNING);  break;
    }

    if (!$newImage) {
        // We get errors from PHP's ImageCreate functions...
        // So let's echo back the contents of the actual image.
        readfile ($image);
    } else {
        // Create the resized image destination
        $thumb = @ImageCreateTrueColor ($width, $height);
        // Copy from image source, resize it, and paste to image destination
        @ImageCopyResampled ($thumb, $newImage, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig);
        // Output resized image
        //ImageJPEG ($thumb);
    }

    // Output
    $newFile = imagejpeg($thumb, null, 100);
    return $newFile;
} 
```

由以下人员调用：

```
if($imgDetails['0'] > 780 || $imgDetails['1'] < 780) {
    $file = $this->_resizeImage($file); // Resize image if bigger than 780x780
} 
```

但我没有得到一个对象回来，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:13:39.847

正如 Seain 在评论中提到的那样， imagejpeg 返回一个 bool 值。

```
bool imagejpeg ( resource $image [, string $filename [, int $quality ]] )

Returns TRUE on success or FALSE on failure. 
```

[php.net 上的 imagejpeg 参考](http://php.net/manual/en/function.imagejpeg.php)

此外，您将 NULL 作为第二个参数，它将图像作为原始图像流输出。如果要将图像保存到某个文件，则需要为此参数提供文件名。

另一个注意事项 - 您应该调用`imagedestroy($newImage);`以释放从 gif/jpeg/png 创建图像时分配的内存。打电话后执行此操作`imagejpeg`。

此外，我建议您不要使用`@`运算符抑制错误。而是尝试将这些错误记录到错误日志中。抑制将使您的代码更难调试，如果出现严重错误，您抑制它将完全杀死您的脚本，而不会说明原因。错误日志帮助。

# c - C - 如何从标准输入正确读取本地化输入？

> ID：15301129
> 
> 赞同：0
> 
> 时间：2013-03-08T18:48:07.473
> 
> 标签：c, setlocale

我需要通过标准输入输入特殊字符，这样做似乎有问题。我猜 fgetws() 不支持 cp852 （我的操作系统的标准控制台代码页，Win 7 x64 btw）。我应该使用 cp1250 还是其他东西？我尝试在 cmd.exe 中使用 chcp 1250 但这只会持续到我关闭命令提示符。我在 Visual C.

```
#include <stdio.h>
#include <locale.h>

int main()
{
    wchar_t query[64];
    setlocale(LC_ALL, "croatian");
    wprintf(L"Insert special characters: ");
    fgetws(query, 64, stdin);
    fputws(query, stdout);
    putchar('\n');
    return 0;
} 
```

[控制台输出示例](http://i49.tinypic.com/14lr1tv.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:00:28.953

试图在你的程序中修复错误的语言环境设置是错误的。您应该在您的环境中设置正确的语言环境并在您的代码中使用此值，例如：

```
setlocale(LC_ALL, ""); 
```

这是手册页所说的：

> 在主程序启动时，默认选择可移植的“C”语言环境。可以通过调用使程序可移植到所有语言环境：
> 
> setlocale(LC_ALL, "");

编辑：

看看你给我的最后一张截图，在阅读输入时似乎有些东西混淆了。

**案例1：（**没有任何调用的那个`setlocale`）

……似乎不太有趣。与（默认）“C”语言环境一样，即使它*似乎*产生了正确的结果，它也只包含字符 U+00-U+7E，这或多或少是垃圾输入 - 垃圾输出的情况。值 0x9F 是编码 Unicode 字符 'LATIN SMALL LETTER C WITH CARON' (U+010D) 的代码页 825（参见：[http](http://de.wikipedia.org/wiki/Codepage_852) : //de.wikipedia.org/wiki/Codepage_852）`č`。

来回传递原始值，如果再次将相同的字节写入终端，则生成相同的输出也就不足为奇了。

**案例2：**

...看起来更有趣一点。值 0x17a 是 Unicode 字符 'LATIN SMALL LETTER Z WITH ACUTE' (U+017A) 的 UTF-16 编码，与`ź`屏幕截图中显示的输出完全匹配。由于 fputsw 似乎正确地将其映射到终端编码，因此问题似乎是输入未正确读取。

只是为了确保在进行更改后没有任何混淆 - 您正在运行这样的代码？

```
#include <stdio.h>
#include <locale.h>

int main () {
    wchar_t query[64];
    setlocale (LC_ALL, "");

    if (fgetws(query, 64, stdin) == NULL)
      return -1;
    fputws(query, stdout);
    putchar('\n');

    return 0;
} 
```

编辑：

## 区域设置检查

我忘了提到你的测试中最有趣的事情之一：unicode 字符 'LATIN SMALL LETTER Z WITH ACUTE' (U+017A) `ź`（第二个屏幕截图中的一个输出）完全表示为值`0x9f`（那是你在代码页 1250 中使用“原始”字符代码时得到报告。

不知何故，fgetws 似乎使用代码页 1250 而不是代码页 825 来解释字符代码。

对我来说，问题似乎仍然是语言环境设置以某种方式混淆了。可能您应该尝试运行以下代码并查看报告的语言环境。

```
#include <locale.h>
#include <stdio.h>

int main (int argc, char *argv[]) {
  char *locale;

  setlocale (LC_ALL, "");
  if ((locale = setlocale (LC_ALL, NULL)) == NULL)
    return -1;

  printf ("%s\n", locale);

  return 0;
} 
```

例如，在我的系统上，这会给出输出：`es_ES.utf8`有趣的部分是点“。”之后的部分。因为这指定了字符编码（在上面给出的示例中为 utf8）。

要检查的另一件事可能是您正在使用的 Visual Studio 的程序版本，因为在旧版本中设置默认区域设置似乎存在错误。（参见：[http](http://connect.microsoft.com/VisualStudio/feedback/details/709505/setlocale-lc-all-returns-incorrect-default-system-locale) ://connect.microsoft.com/VisualStudio/feedback/details/709505/setlocale-lc-all-returns-incorrect-default-system-locale ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:04:06.990

谢谢你 mikyra，试图提供帮助。通过显式地给 setlocale 我的控制台的默认代码页作为第二个参数来解决。像这样：

```
setlocale( LC_ALL, ".852" ); 
```

希望不会出现新的问题。谢谢你，[MSDN](http://msdn.microsoft.com/en-us/library/x99tb11d%28v=vs.80%29.aspx)。

# php - 处理 URL 的服务器端脚本或函数

> ID：15301130
> 
> 赞同：0
> 
> 时间：2013-03-08T18:48:10.717
> 
> 标签：php, javascript, web-applications, web

您必须原谅这个问题中的标题和其他术语错误。

我想在我的服务器上的某个地方有一个函数，它接受一个 url（来自我不拥有的域），检索该 url 的 html，解析它（通过 id、类名等提取元素），然后返回提取的数据。为简单起见，假设它将接受一个 URL 并返回网页的标题。我的页面需要同时提供函数的 url，并显示返回值。

我应该研究哪些技术来实现这一目标（是否可能）？这是人们会使用php的东西吗？

更新 - 我正在寻找架构的概述以及其他任何内容。我要在服务器上放什么类型的文件？如何将 URL 发送到 php（或其他文件）并接收一些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:49:45.767

[`cURL`](http://php.net/manual/en/book.curl.php)+[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)将成为你的朋友。

# javascript - 从 firefox、IExplorer 打印时显示表格边框

> ID：15301133
> 
> 赞同：0
> 
> 时间：2013-03-08T18:48:25.043
> 
> 标签：javascript, printing

我正在尝试在 Firefox 和 IE 中打印页面的一部分，打印视图在 Chrome 中工作正常，但在 Firefox 或 IE 中不起作用。我没有看到任何错误。

有任何想法吗？

这是我的CSS。

```
@media print{
    #header { display:none; }
}
body { font-size:16px; }
#footer { display:none; }

table {
    font-size:16px; margin-top:2px; 
    border:solid #000 !important;
    border-width:1px 0 0 1px !important;
}
th, tr {
    width: 100px; 
    text-align:right;
    padding-right: 5px; 
    border:solid #000 !important;
    border-width:0 1px 1px 0 !important;
}

tbody td { width:130px; text-align:right;padding-right: 5px; border:1px solid #000; }
h4 { font-size: 1.2em; }
h2 { font-size: 1.3em; } 
```

这是我的打印功能：

```
function printAllTable(id) {
            var html = "<html>";
            html += "<head>";
            html += "</head><body>";
            html += document.getElementById("allcompheader").innerHTML;
            html += document.getElementById(id).innerHTML;
            html += "</body></html>";
            var printview = window.open('', '', 'width=950,height=900');
            printview.innerWidth = screen.width;
            printview.innerHeight = screen.height;
            printview.screenX = 0;
            printview.screenY = 0;
            printview.document.write(html);
            printview.print(); 
        } 
```

html....

```
<input id="printCombinedSummary" type="button" value="Print" onclick="printAllTable('AllCompanySummaryTable')"/> 
```

# php - 如何在 JQuery 自动完成 UI 中显示 Json 数据？

> ID：15301135
> 
> 赞同：0
> 
> 时间：2013-03-08T18:48:28.533
> 
> 标签：php, jquery, json

我正在使用 jquery 自动完成 ui，并且我正在以 json 格式获取数据，如下所示

```
[{"organization_name":"health info"},{"organization_name":"Canada health"},{"organization_name": "org 1"}] 
```

这是我的 jquery 代码，它没有正确显示 json 数据

```
 $('input[name=profileOrg]').autocomplete({
                    source:'CHI_custom/customScripts/getorgname.php',
                    dataType: 'json',
                    minLength:2

                }); 
```

任何人都可以帮助如何在自动完成文本框下方显示数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:58:16.477

您需要更改自动完成显示项目的方式

```
$('input[name=profileOrg]').autocomplete({
    source:'CHI_custom/customScripts/getorgname.php',
    dataType: 'json',
    minLength:2,
    select: function (event, ui) {
        $(this).val(ui.item.organization_name);
        return false;
    }
})
.data("autocomplete")._renderItem = function (ul, item) {
        return $("<li></li>")
          .data("item.autocomplete", item)
          .append('<a>' + item.organization_name + '</a>')
          .appendTo(ul);
}; 
```

有关 jQuery 文档的更多信息：http: [//jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)

# android - 是否可以切换标签栏和夏洛克动作栏的位置？

> ID：15301136
> 
> 赞同：0
> 
> 时间：2013-03-08T18:48:31.183
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock, android-tabs

是否可以从操作栏 sherlock 切换操作栏和标签栏的位置，以便标签出现在操作栏上方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:42:16.277

使用 ABS 演示应用程序，如果您没有徽标或 Home 操作（只是标题），它似乎就是这样做的。

# php - 如何根据分隔符不在 php regex 中的两个字符之间拆分字符串？

> ID：15301139
> 
> 赞同：1
> 
> 时间：2013-03-08T18:48:59.747
> 
> 标签：php, regex, perl, google-maps, delimiter

我尝试了很多东西，但没有任何效果。我有一个字符串，我想用逗号分割字符串，但如果逗号在*括号*、*大括号*或*双*引号或*单引号*`,`之间，则不要分割- 对于这种特定情况，以维护完整的 iframe（即摧毁一切）字符串。下面是字符串...

 ***```
class : putmeincoach, 
 id : random_id,  
   responsive : {   [ type= text ;  html = "&lt; iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps/myplaces?ctz=480&amp;ie=UTF8&amp;ll=34.009394,-118.488514&amp;spn=0.020687,0.020921&amp;t=m&amp;z=16"&gt; &lt; /iframe &gt;" ;  ]  } 
```

我只是想

```
Array (
   [0] = 'class : putmeincoach',
   [1] = 'id : random_id',
   [2] = 'responsive : {   [ type= text ;  html = "&lt; iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps/myplaces?ctz=480&amp;ie=UTF8&amp;ll=34.009394,-118.488514&amp;spn=0.020687,0.020921&amp;t=m&amp;z=16"&gt; &lt; /iframe &gt;" ;  ]  } ' 
```

我可以使用 preg_split 或 preg_match 和一些通用的正则表达式模式来做到这一点吗？Lemme 还提到双引号之间没有逗号真的是最重要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:15:20.550

在 PHP 中：

```
<?php
$input = '
    class : putmeincoach, 
    id : random_id, 
    responsive : {   [ type= text ;  html = "&lt; iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps/myplaces?ctz=480&amp;ie=UTF8&amp;ll=34.009394,-118.488514&amp;spn=0.020687,0.020921&amp;t=m&amp;z=16"&gt; &lt; /iframe &gt;" ;  ]  }, 
    testsinglequotes: \'hello world\', 
    testdoublequotes: "hello hello"';
$pattern = '/ 
    \b(\w+)\s*:   # capture the word before the colon 
    \s*(          # start capture group match after the colon
        {[^}]*}\s*|     # match everything between braces  OR
        "[^"]*"\s*|      # match everything between double quotes OR
        \'[^\']*\'\s*|   # match everything between single OR
        [^,]*           # match everything up to the comma 
        )         # end capture group
    (?:,|$)       # match comma or end of string (non-capture group) 
    /x';
preg_match_all($pattern ,$input, $matches);
print_r($matches);
?> 
```

输出 PHP 5.3.13：

```
Array
(
    [0] => Array
        (
            [0] => class : putmeincoach,
            [1] => id : random_id,
            [2] => responsive : {   [ type= text ;  html = "&lt; iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps/myplaces?ctz=480&amp;ie=UTF8&amp;ll=34.009394,-118.488514&amp;spn=0.020687,0.020921&amp;t=m&amp;z=16"&gt; &lt; /iframe &gt;" ;  ]  },
            [3] => testsinglequotes: 'hello world',
            [4] => testdoublequotes: "hello hello"
        )

    [1] => Array
        (
            [0] => class
            [1] => id
            [2] => responsive
            [3] => testsinglequotes
            [4] => testdoublequotes
        )

    [2] => Array
        (
            [0] => putmeincoach
            [1] => random_id
            [2] => {   [ type= text ;  html = "&lt; iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps/myplaces?ctz=480&amp;ie=UTF8&amp;ll=34.009394,-118.488514&amp;spn=0.020687,0.020921&amp;t=m&amp;z=16"&gt; &lt; /iframe &gt;" ;  ]  }
            [3] => 'hello world'
            [4] => "hello hello"
        )

) 
```

正则表达式是你的朋友

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:20:06.167

我试过

```
^(class.*?,).*?(id.*?,).*?(responsive.*,?)$ 
```

使用[http://www.gskinner.com/RegExr/](http://www.gskinner.com/RegExr/)这有效。棘手的事情是对前两组中的 .* 和最后一组中的 ',' 使用惰性匹配。

我认为，您需要将其适应 PHP，因为正则表达式处理有点不同。***

# python - Python argparse：默认值或指定值

> ID：15301147
> 
> 赞同：250
> 
> 时间：2013-03-08T18:49:46.750
> 
> 标签：python, default-value, argparse

我想要一个可选参数，如果仅存在未指定值的标志，则默认为一个值，但如果用户指定一个值，则存储用户指定的值而不是默认值。是否已经有可用的操作？

一个例子：

```
python script.py --example
# args.example would equal a default value of 1
python script.py --example 2
# args.example would equal a default value of 2 
```

我可以创建一个动作，但想看看是否有现有的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2013-03-08T18:52:43.553

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--example', nargs='?', const=1, type=int)
args = parser.parse_args()
print(args) 
```

* * *

```
% test.py 
Namespace(example=None)
% test.py --example
Namespace(example=1)
% test.py --example 2
Namespace(example=2) 
```

* * *

*   `nargs='?'`表示 0 或 1 个参数
*   `const=1`当有 0 个参数时设置默认值
*   `type=int`将参数转换为 int

* * *

如果你想`test.py`设置`example`为 1 即使没有`--example`指定，那么包括`default=1`. 也就是说，与

```
parser.add_argument('--example', nargs='?', const=1, type=int, default=1) 
```

然后

```
% test.py 
Namespace(example=1) 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2020-02-04T01:50:27.623

和...之间的不同：

```
parser.add_argument("--debug", help="Debug", nargs='?', type=int, const=1, default=7) 
```

和

```
parser.add_argument("--debug", help="Debug", nargs='?', type=int, const=1) 
```

因此是：

`myscript.py` => debug 在第一种情况下为 7（默认），在第二种情况下为“None”

`myscript.py --debug` => debug 在每种情况下都是 1

`myscript.py --debug 2`=> debug 在每种情况下都是 2

# android - 在android中使用OpenCV录制视频

> ID：15301149
> 
> 赞同：1
> 
> 时间：2013-03-08T18:49:54.540
> 
> 标签：android, video, opencv, camera, recording

是否可以在 android 平台上使用 openCV 录制视频？我读过 OpenCv 不支持 android 的视频录制，或者我们可以捕获打开的图片而不是视频，这是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-27T08:54:35.297

恐怕答案是否定的。在[本次讨论](http://answers.opencv.org/question/19593/how-to-record-video-from-videocamera-in-android/)结束时，VideoWriter 类在 Android 上不起作用。

# java - 从 SD 卡上的文件列中提取数据并放入 android 手机上的数组

> ID：15301150
> 
> 赞同：0
> 
> 时间：2013-03-08T18:49:54.653
> 
> 标签：java, android, python

我在 Android 手机的 SD 卡中有一个文本文件，在该文件中有多个列通过应用程序。我想提取每列数据并放入不同的 2 数组。由于我是应用程序开发的新手，请帮助我或提供源代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:17:40.473

All you have to do it's to use something like that :

```
try{
   InputStream flux=new FileInputStream("Your_File"); 
   InputStreamReader lecture=new InputStreamReader(flux);
   BufferedReader buff=new BufferedReader(lecture);
   String ligne;

   while ((ligne=buff.readLine())!=null){
       //Do the action that you want to do for each ligne.
       //If I well understand you need, split each ligne to give each columns.
   }
   buff.close(); 
   }        
   catch (Exception e){
   System.out.println(e.toString());
} 
```

I hope you that's what you needed.

# vba - vba 创建数据透视表的问题，这是 excel 版本的问题吗？

> ID：15301158
> 
> 赞同：2
> 
> 时间：2013-03-08T18:50:37.627
> 
> 标签：vba, pivot-table

快速一个，得到以下代码，它会根据数据集合“数据”创建一个数据透视表。我在创建它的 PC 上运行它，该 PC 运行 Excel 2013 没有问题，但是当我在 Excel 2007 或 Excel 2010 上运行它时，它在 Range("A1") 之后的行上抛出一个无效的过程调用或参数错误。选择

这是一个 excel 版本错误，因为用 Excel 2013 编写但在 2007 或 2010 上使用？

```
 Sheets("Pivot").Select
    Range("A1").Select
    ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
        "Data", Version:=xlPivotTableVersion15).CreatePivotTable TableDestination:= _
        "Pivot!R1C1", TableName:="PivotTable4", DefaultVersion:= _
        xlPivotTableVersion15
    Sheets("Pivot").Select
    Cells(1, 1).Select
    With ActiveSheet.PivotTables("PivotTable4").PivotFields("Date Only")
        .Orientation = xlRowField
        .Position = 1
    End With
    With ActiveSheet.PivotTables("PivotTable4").PivotFields("Species")
        .Orientation = xlColumnField
        .Position = 1
    End With
    ActiveSheet.PivotTables("PivotTable4").AddDataField ActiveSheet.PivotTables( _
        "PivotTable4").PivotFields("Number"), "Sum of Number", xlSum 
```

如果这是一个版本问题，我认为它可能是人们使用 DefaultVersion:=xlPivotTableVersion14 和 12 有谁知道哪个版本适用于 Excel 2007 或 Excel 2010？我假设如果我输入正确的 2007 版本，它将向后兼容 2010 和 2013 等...？

提前干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T19:40:05.467

我认为`Version:=xlPivotTableVersion15`这是 Excel 2013 特有的问题。这是 Excel 2010 的帮助：

![在此处输入图像描述](../Images/bbc658aa7216090dd478d64ab43ba627.png)

它是一个可选参数，在 Excel 2010 中，无论是否使用它，都可以正确创建数据透视表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:56:05.920

我想它会向后兼容，但你总是可以检查版本并相应地构建你的代码。我相信

```
application.version 
```

将为您提供 excel 中的当前版本。

# javascript - 使 div 具有不同的鼠标悬停效果

> ID：15301161
> 
> 赞同：1
> 
> 时间：2013-03-08T18:50:57.697
> 
> 标签：javascript, slider

我是 JS 新手，需要一些帮助！

我有 2 个盒子（div），每个盒子都有一个滑块。当我将鼠标悬停在其中任何一个上时，两个滑块都被激活。

我将如何做到这一点，以便每个 div 单独激活。

这是我正在做的事情的照片，可能会更清楚一点：

pic.twitter.com/1ju3iZ0KIM - 鼠标悬停之前 pic.twitter.com/gmfhl1zl2J - 鼠标悬停

非常感谢！

这是我的 JS

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.up-down').mouseover(function(){
            $('.default').stop().animate({
                height: 0  
            }, 200);                        
        }).mouseout(function(){
            $('.default').stop().animate({
                height: 170 
            }, 200)    
        })
    });
</script> 
```

我的 div

```
<div class="squareFeedBox">
    <div class="up-down">
        <div class="slide default"></div>
        <div class="slide onhover"></div>
    </div>
</div>
<div class="squareFeedBox">
    <div class="up-down">
        <div class="slide default"></div>
        <div class="slide onhover"></div>
    </div>
</div> 
```

我的 CSS

/*内容框*/

```
.squareFeedBox
{
    background-color: #fff;
    width: 278.5px;
    height: 207px;
    margin-right: 16px;
    margin-bottom: 16px;
    float: left;
    border-radius: 3px;
    box-shadow: 2px 2px 5px #0f2134;
    overflow: hidden;
}

/*upSlider*/

.up-down 
{
    overflow:hidden;
    height: 207px;
    width: 278.5px;
}

.slide 
{
    width:278.5px;
    height:207px;
}

.default 
{
    background-color:#fff;
    height: 170px;
    width: 278.5px;
}

.onhover 
{
    background-color:#1DB7CB;
    height: 207px;
    width: 278.5px;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:11:33.320

添加“this”关键字并可选地替换 $(function(...)) 上的 $(document).ready(function(...))。

```
<script type="text/javascript">
    $(function(){
        $('.up-down').mouseover(function(){
            $('.default', this).stop().animate({
                          ^^^^
                height: 0  
            }, 200);                        
        }).mouseout(function(){
            $('.default', this).stop().animate({
                          ^^^^
                height: 170 
            }, 200)    
        })
    });
</script> 
```

# mysql - 有没有更好的方法来构建这个具有广泛 WHERE 条件的 MySQL 查询？

> ID：15301162
> 
> 赞同：1
> 
> 时间：2013-03-08T18:51:02.710
> 
> 标签：mysql, where

要求是获取用户提供的关键字列表，并返回在 16 个字段中的任何一个字段中包含任何关键字的任何记录。

所以如果用户输入cup dog bread
的关键词（关键词的顺序不重要，没有任何隐含关系。）

所以 WHERE 条件的数量是 78：

```
WHERE ObjObjectName LIKE '%cup%'
   OR ObjObjectName LIKE '%dog%'
   OR ObjObjectName LIKE '%bread%'
   OR ObjObjectOtherName LIKE '%cup%'
   OR ObjObjectOtherName LIKE '%dog%'
   OR ObjObjectOtherName LIKE '%bread%'
   OR ObjObjectID LIKE '%cup%'
   OR ObjObjectID LIKE '%dog%'
   OR ObjObjectID LIKE '%bread%'
   OR ObjOtherName LIKE '%cup%'
   OR ObjOtherName LIKE '%dog%'
   OR ObjOtherName LIKE '%bread%'
   OR ObjTitle LIKE '%cup%'
   OR ObjTitle LIKE '%dog%'
   OR ObjTitle LIKE '%bread%'
   OR ObjCategory LIKE '%cup%'
   OR ObjCategory LIKE '%dog%'
   OR ObjCategory LIKE '%bread%'
   OR AccCreditLineLocal LIKE '%cup%'
   OR AccCreditLineLocal LIKE '%dog%'
   OR AccCreditLineLocal LIKE '%bread%'
   OR PrimaryCreator LIKE '%cup%'
   OR PrimaryCreator LIKE '%dog%'
   OR PrimaryCreator LIKE '%bread%'
   OR EdiPublisherLocalSummary LIKE '%cup%'
   OR EdiPublisherLocalSummary LIKE '%dog%'
   OR EdiPublisherLocalSummary LIKE '%bread%'
   OR EdiPlaceOfPublication LIKE '%cup%'
   OR EdiPlaceOfPublication LIKE '%dog%'
   OR EdiPlaceOfPublication LIKE '%bread%'
   OR CreContinent LIKE '%cup%'
   OR CreContinent LIKE '%dog%'
   OR CreContinent LIKE '%bread%'
   OR CreSubContinent LIKE '%cup%'
   OR CreSubContinent LIKE '%dog%'
   OR CreSubContinent LIKE '%bread%'
   OR CreCountry LIKE '%cup%'
   OR CreCountry LIKE '%dog%'
   OR CreCountry LIKE '%bread%'
   OR CreRegion LIKE '%cup%'
   OR CreRegion LIKE '%dog%'
   OR CreRegion LIKE '%bread%'
   OR CreCounty LIKE '%cup%'
   OR CreCounty LIKE '%dog%'
   OR CreCounty LIKE '%bread%'
   OR CreStateProvince LIKE '%cup%'
   OR CreStateProvince LIKE '%dog%'
   OR CreStateProvince LIKE '%bread%'
   OR CreCity LIKE '%cup%'
   OR CreCity LIKE '%dog%'
   OR CreCity LIKE '%bread%'
   OR CreContinent1 LIKE '%cup%'
   OR CreContinent1 LIKE '%dog%'
   OR CreContinent1 LIKE '%bread%'
   OR CreSubContinent1 LIKE '%cup%'
   OR CreSubContinent1 LIKE '%dog%'
   OR CreSubContinent1 LIKE '%bread%'
   OR CreCountry1 LIKE '%cup%'
   OR CreCountry1 LIKE '%dog%'
   OR CreCountry1 LIKE '%bread%'
   OR CreRegion1 LIKE '%cup%'
   OR CreRegion1 LIKE '%dog%'
   OR CreRegion1 LIKE '%bread%'
   OR CreCounty1 LIKE '%cup%'
   OR CreCounty1 LIKE '%dog%'
   OR CreCounty1 LIKE '%bread%'
   OR CreStateProvince1 LIKE '%cup%'
   OR CreStateProvince1 LIKE '%dog%'
   OR CreStateProvince1 LIKE '%bread%'
   OR CreCity1 LIKE '%cup%'
   OR CreCity1 LIKE '%dog%'
   OR CreCity1 LIKE '%bread%'
   OR CreDateCreated LIKE '%cup%'
   OR CreDateCreated LIKE '%dog%'
   OR CreDateCreated LIKE '%bread%'
   OR CreMarkSignature LIKE '%cup%'
   OR CreMarkSignature LIKE '%dog%'
   OR CreMarkSignature LIKE '%bread%' 
```

这真的是最好的方法吗？我的意思是，我打算使用 PDO 准备语句，我发现这个问答（[使用 PDO 准备语句的搜索字段中的多个关键字进行 LIKE 查询](https://stackoverflow.com/questions/13214712/like-query-using-multiple-keywords-from-search-field-using-pdo-prepared-statemen)）这将非常有帮助，但我对 MySQL 相对缺乏经验，所以我不确定是否有是处理所有条件的更好方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:02:51.780

您可以使用正则表达式和连接：

```
WHERE CONCAT(
  ObjObjectName, 
  ObjObjectOtherName, 
  ObjObjectID, 
  ObjOtherName,
  ObjTitle,
  ObjCategory,
  AccCreditLineLocal,
  PrimaryCreator,
  EdiPublisherLocalSummary,
  EdiPlaceOfPublication,
  CreContinent,
  CreSubContinent)
  REGEXP 'cup|dog|bread' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:54:35.777

您需要使用[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。请记住，MySql 的全文索引仅限于 4 个以上的字母单词。所以“狗”是行不通的。你可以编译 MySQL 并改变它。[Sphinx](http://sphinxsearch.com/)通常更适合较小的单词和更快的查找。

我还建议查看[MariaDB](http://mariadb.org/)，它是 MySQL 的一个替代品，由原始 MySQL 开发人员创建。MariaDB 有一个[Sphinx 存储引擎](https://kb.askmonty.org/en/about-sphinxse/2941/)，这使得集成更容易。

# forms - 带有操作 URL 的 PHP 表单方法发布

> ID：15301163
> 
> 赞同：4
> 
> 时间：2013-03-08T18:51:04.613
> 
> 标签：forms, post, get, action

我的表格有以下问题。

表格如下所示：

```
<form name='add'
      method='post'
      action='<?php echo htmlentities($_SERVER["PHP_SELF"]) ?><?php echo "?naujiena=".$_GET['pavadinimas']."" ?>' >

    <input name='id' type='hidden'>
    <input name='skaicius' type='hidden'>
    <input name='pavadinimas' type='text'>
    <input type='submit' name='prideti' value='prideti'>
</form> 
```

表单确认后，我在 URL 中看到如下结果：

```
http://viper.us.lt/php/naujiena/forma.php?naujiena= 
```

它应该是这样的：

```
http://viper.us.lt/php/naujiena/forma.php?naujiena=some_value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:54:23.130

将表单方法从 POST 更改为 GET，如下所示：

```
<form name='add' method='GET' action='<?php echo htmlentities($_SERVER["PHP_SELF"]) ?><?php echo "?naujiena=".$_GET['pavadinimas']."" ?>' > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T18:57:59.927

你的方法是错误的。您不需要`<?php echo "?naujiena=".$_GET['pavadinimas']."" ?>`.`action` `attribute`

只需将您的`method`from更改`POST`为`GET`，然后单击`submit`(type)后`button`，您将看到 上的值`URL`，并且将能够获得值 as `$_GET`。

* * *

**编辑**：

然后你需要你的表格

```
<form name="add" method="post" id="myForm" action="garissuero.html" onsubmit="changeActionURL()">
        <input name="id" type="hidden" />
        <input name="skaicius" type="hidden" />
        <input name="pavadinimas" id="pavadinimas" type="text" />
        <input type="submit" name="prideti" value="prideti" />
</form> 
```

并有`javascript`如下代码：

```
function changeActionURL() {
    var forma = document.getElementById('myForm');
    forma.action += "?naujiena=" + document.getElementById('pavadinimas').value;
} 
```

JSFiddle：http: [//jsfiddle.net/mETwZ/2/](http://jsfiddle.net/mETwZ/2/)

# java - 在python中运行boilerpipe库的麻烦

> ID：15301170
> 
> 赞同：2
> 
> 时间：2013-03-08T18:51:53.867
> 
> 标签：java, python, jvm, boilerpipe, jpype

我尝试在 python 上使用boilerpipe 库，旨在从大学项目的页面中提取文本。我创建了一个简单的代码来进行提取：

```
from boilerpipe.extract import Extractor
def Article(url):
    extractor = Extractor(extractor='ArticleExtractor', url=your_url)
    extracted_text = extractor.getText()
    return extracted_text 
```

当我尝试运行时遇到的错误是：

```
>Traceback (most recent call last):
>  File "C:\Python27\Boiler.py", line 1, in <module>
>    from boilerpipe.extract import Extractor
>  File "C:\Python27\lib\site-packages\boilerpipe-1.2.0-py2.7.egg\boilerpipe\__init__.py", >line 10, in <module>
>    jpype.startJVM(jpype.getDefaultJVMPath(), "-Djava.class.path=%s" % >os.pathsep.join(jars))
>  File "C:\Python27\lib\site-packages\jpype\_core.py", line 44, in startJVM
>    _jpype.startup(jvm, tuple(args), True)
>RuntimeError: Unable to load DLL [C:\Program Files\Java\jre7\bin\client\jvm.dll], error = >Não foi possível encontrar o módulo especificado.
> at src/native/common/include\jp_platform_win32.h:58 
```

我已经检查了 JVM 和 JRE，它们已正确安装并设置了`JAVA_HOME`环境变量。

有人知道如何解决吗？

# python - 使用 Python 横向扩展或分片 Python-RQ 或 Redis

> ID：15301172
> 
> 赞同：7
> 
> 时间：2013-03-08T18:52:04.073
> 
> 标签：python, redis, scalability, sharding, consistent-hashing

尝试横向扩展 Redis 实例作为[`Python-RQ`](http://python-rq.org).

据我所知，最好的方法是将分片逻辑（很可能使用[Consistent Hashing](http://en.wikipedia.org/wiki/Consistent_hashing)）添加到自定义`ConnectionPool`和/或`Connection`类中。我宁愿为一致性哈希机制使用一个库——因为它似乎应该是可用的，并且很可能比本土解决方案更好/更久经考验。

做这样的事情有什么好的模式？是否有一些我应该研究的图书馆？有什么我应该考虑的遗漏吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:26:07.067

我想你应该有几件事要记住。

第一个是关于你的瓶颈在哪里以及为什么你应该在一个 Python-Rq 范式下在你的 Redis 后端提供分区架构方式。我认为 Redis 有足够的[性能](http://redis.io/topics/benchmarks)来相信引导瓶颈应该在于您的工人数量和您希望在给定时间处理的工作数量。

你可以说：我可以等多久才能处理这个工作？如果你能算出这个值，延迟。您将拥有在架构中添加/删除更多节点的关键。

顺便说一句，如果您正在寻找一些具有一致性哈希的分片解决方案来改进您的基础架构，那么当删除或添加新节点时，您必须考虑重新平衡密钥背后的问题。

例如，一个当前工作人员可能会为一个已经存在的作业连接到错误的 redis 服务器，因为在该新作业启动之后以及在此之前它已经结束之前，已经添加或删除了一个新服务器。

# ruby-on-rails - 回形针上传 404ing

> ID：15301173
> 
> 赞同：5
> 
> 时间：2013-03-08T18:52:08.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload, paperclip

我不确定我是否了解 Paperclip 的工作原理，但据我所知，保存上传的默认位置是 /public 文件夹。当我在我的开发中上传我的照片时，它们会正确显示在（我可以在文件结构中打开它们）：

```
/public/bookmarks/:id/:style.:extension 
```

但是，当我这样做时`bookmark.photo.url`，我会得到类似的东西：

```
/system/bookmarks/thumbs/000/000/042/original/filename.png?1362768439 
```

这是我的`bookmark.rb`：

```
has_attached_file   :photo,
                        :styles => { :medium => ["512x512>", :jpg], :thumb => ["200x200#", :jpg] }
                        :default_url => "public/bookmarks/default/:style.png",
                        :path => "assets/content/bookmarks/:id/:style.:extension" 
```

我在这里错过了什么吗？Paperclip 不是要为我处理这些东西，还是我的配置有问题？

更新

如果我在第一个答案中添加`:path`and ，我会得到：`:url`

```
<img src="/assets/bookmarks/44/original.jpg?1362775508"> 
```

而我应该得到：

```
<img src="/bookmarks/44/original.jpg?1362775508"> 
```

但是，如果我注释掉该`:url`选项，而不是得到：

![这是默认大小](../Images/8ba85e1b4bf9f943d9288a250f3a281a.png)

这是默认的未找到图像大小，我得到：

![在此处输入图像描述](../Images/97e48c584803149c71e0085724f8d041.png)

这个，与我在文件系统上的图像宽度相同，但高度错误，没有找到。这发生在具有干净缓存的 Chrome 和 Safari 中。当我转到 URL 时，我得到一个 404。我还可以确认图像已正确存储在文件系统上并且可以从后端查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:37:57.857

你描述的行为有点奇怪。我建议您以类似于以下方式设置 :url 和 :path ：

```
url: '/:class/:id/:style.:extension',
path: ':rails_root/public:url' 
```

这意味着图像将存储在：

```
"#{Rails.root}/public/bookmarks/:id/:style.:extension" 
```

该 URL 将为您提供如下信息：

```
/bookmarks/bookmarks/1/thumbs.png 
```

请注意，您可以`config.paperclip_defaults`在“application.rb”中执行此操作，因此您不必在每个模型上都执行此操作。如果您想要不同的路径或存储，您可以在“production.rb”上覆盖它，例如：

```
 config.paperclip_defaults = config.paperclip_defaults.merge({
    storage: :s3,
    path: 'project_name/public:url'
  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T18:12:52.583

我最近也发生了同样的事情。我得到了 404，因为我有`:style`而不是`:styles`in`/app/models/mymodel.rb`

```
class Pin < ActiveRecord::Base
    belongs_to :user
    has_attached_file :image, :styles => { :medium => "300x300>", :thumb => "100x100>" }
    validates_attachment_content_type :image, :content_type => /\Aimage\/.*\Z/
end 
```

# git - 如何在 Git 中实现语义版本控制？

> ID：15301174
> 
> 赞同：6
> 
> 时间：2013-03-08T18:52:19.387
> 
> 标签：git, versioning

我已经能够说服我的团队使用[语义版本控制](http://semver.org/)并迁移到 git（从 CVS，所有开发都发生在主干上）。

这是我们一直在使用的（版本分支表示引入了某种新功能）：

```
master
*
|
*   * version 2.0 branch
|  /
* *
|/
*   * version 1.0 branch
|  /
* *
|/
*
|
... 
```

问题是，当需要在 1.0 版分支上进行错误修复时，该修复需要回显到 2.0 版和 master。我们一直在挑选，但我觉得这比我想要的更容易出错（而且我觉得随着时间的推移它会变得难以管理）。

我们正在做的事情有一些限制——它是遗留代码，并且没有做很多测试（开始引入单元测试，集成测试很少），所以保持这些版本分支的稳定性（不引入很多回归错误）很重要。

你们有比挑选樱桃更好的方法吗？有更好的工作流程可以使用吗？非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T09:37:43.917

[樱桃采摘](https://stackoverflow.com/a/13524494/6309)可以：

*   引入[重复提交](https://stackoverflow.com/questions/2627953/git-cherry-pick-and-datamodel-integrity/2628915#2628915)
*   错过[功能依赖](https://stackoverflow.com/questions/881092/how-to-merge-a-specific-commit-in-git/881112#881112)

我更喜欢**合并**（类似于[Desert69](https://stackoverflow.com/users/641451/desert69)[提到](https://stackoverflow.com/questions/15301174/how-do-i-implement-semantic-versioning-in-git#comment21603020_15301174)的[成功的 Git 分支](http://nvie.com/posts/a-successful-git-branching-model/) ）：

*   创建一个专用的分支`buxfix_xxx`（在版本1之上）
*   将 version1 合并到该`buxfix_xxx`分支（快进）
*   合并`buxfix_xxx`到`version 2`和`master`分支

当然，诀窍是在这些分支（version2 和 master）中记录合并，而不实际合并*所有*文件：请参阅“[如何使用 git-merge 合并选择性文件？](https://stackoverflow.com/questions/449541/how-do-you-merge-selective-files-with-git-merge) ”。

如果您只有几个文件要合并，我会这样做：

```
# make git believe we are merging everything
git checkout version2
git merge --no-commit bugfix_xxx

# but reset everything to version2
# (while the merge is still in progress!)
git checkout version2 -- .

# merge only the few files we need:
git checkout --patch bugfix_xxx -- path/to/file1
git checkout --patch bugfix_xxx -- path/to/file2
git checkout --patch bugfix_xxx -- path/to/file3

# add and commit, concluding the merge 
```

这些合并的好处是，下一个（从`version1`to`version2`和`master`）自然会被限制在下一个错误修复中，因为 git 会相信*其他所有东西*都*已经合并了*！

因此，您在错误修复的第一个反向移植上投入的时间将为下一个错误修复付出代价。

# java - 我会让 jBoss 5.1 显示管理控制台

> ID：15301176
> 
> 赞同：2
> 
> 时间：2013-03-08T18:52:20.810
> 
> 标签：java, eclipse, jboss

我刚刚下载了一个全新的 JBoss 5.1 GA，解包并链接到我的 Eclipse Juno。

当我从 JAVAEE 角度启动 Jboss 并访问路径“localhost:8080”时，它会打开 JBoss 的主网页，但管理控制台会丢失。

我在我的电脑上安装了 java jre 7，而使用 jboss 7.1 我从来没有遇到过类似的问题......

如果我遗漏了一些重要信息，请告诉我，我会提供。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:13:50.293

尝试以下 URL 之一

```
http://localhost:8080/jmx-console/ 
```

或者

```
http://localhost:8080/web-console/ 
```

编辑：没有用于管理的控制台，但您可以部署执行相同任务的[RHQ (Jopr)。](http://www.jboss.org/rhq/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-06T03:39:22.750

您的 JBoss 下载中包含一个 admin-console.war。如果它不在您启动的服务器配置文件中，您可以从另一个复制它。

看到这个 -
[https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform_Common_Criteria_Certification/5/html-single/Administration_Console_Quick_Start_Guide/index.html](https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform_Common_Criteria_Certification/5/html-single/Administration_Console_Quick_Start_Guide/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T12:41:35.743

试试这个网址 -

```
http://localhost:9990/console 
```

或者

```
http://localhost:9999/console 
```

如果，您仍然无法登录。检查 jboss 服务器的standalone.xml 文件中的管理端口。

谢谢。

# excel-formula - Excel 2010 公式根据两个变量进行计数计算

> ID：15301177
> 
> 赞同：0
> 
> 时间：2013-03-08T18:52:27.963
> 
> 标签：excel-formula

窗口 7 上的 Excel 2010

我正在努力寻找一个公式来计算项目跟踪器中打开**和过期操作的数量。**这将在摘要选项卡上

该公式需要检查名为“操作”的选项卡并根据以下变量进行计数计算：

1）在A列的每一行中，单元格都填充了“打开”（此选项为“打开”和“关闭”

2) 对于在 A 列中指定为“未完成”的每个行动，还需要检查 J 列中的行动到期日期。如果该日期逾期，则需要计算该行动。

我尝试了一个 COUNTIF 公式，但它只计算过期的操作并忽略它们是打开还是关闭。

您可以提供的任何帮助将不胜感激。

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:59:39.690

您可以使用`COUNTIFS`（使用 an`s`来支持多种条件） - 例如：

```
=COUNTIFS(A:A,"open",B:B,"<="&TODAY()) 
```

# encoding - 如何最好地显示文件哈希

> ID：15301180
> 
> 赞同：1
> 
> 时间：2013-03-08T18:52:32.617
> 
> 标签：encoding, hash, base64

简单的问题。显示文件哈希的最佳（最通用）方式是什么？下面是同一文件的两个 SHA256 哈希值。一个显示为 base64，一个是……其他的。文件哈希将用于审计，以确保我们发送的文件与审计员收到的文件相同。如果需要验证散列，我想确保提供最容易验证的散列。

```
SHA256          55461e72cccb74b475278189956b9db307bf44945e1639af93c34b224b7fcfd
SHA256 Base 64  VUYecszLdLR1J4GJlWudswe/RJReFjmvk8NLIkt/z9s= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:54:50.457

55461e72cccb74b475278189956b9db307bf44945e1639af93c34b224b7fcfd

Base64 的重点是将字符集限制为可显示的字符。哈希是十六进制的，这更加受限制。

# c# - 如何将数据从 XAML 添加到 listView 并绑定到我的 ViewModel

> ID：15301187
> 
> 赞同：2
> 
> 时间：2013-03-08T18:52:48.667
> 
> 标签：c#, wpf, xaml, microsoft-metro

我对 XAML 和 Windows 8 应用程序编程和整体编程相当陌生。这几天我一直在尝试。我有一个名为 PeopleConnector 的 ViewModel，它包含一个可观察的人集合我已经将我的 XAML 页面的 DataContext 设置为我的 ViewModel。现在我希望能够在我的视图中创建一个新的人，使用来自文本框的输入，并通过两种方式数据绑定将其显示在我的列表中。这样做的正确方法是什么。我可以在我的 XAML 页面后面的代码中完成这项工作，但是我正在跳过我的 viewModel。这可以通过我的 ViewModel 实现吗？

代码

Person 类是一个简单的 Poco 类，继承 BindableBase

我的 ViewModel（人员连接器）

```
class PeopleConnector : BindableBase
{

    private ObservableCollection<Person> _people;
    public ObservableCollection<Person> People
    {
        get { return _people; }
        set { _people = value; OnPropertyChanged(); }
    }

    public PeopleConnector()
    {
        People = new ObservableCollection<Person>();
        People.Add(new Person { Name = "Iris", About = "Developer that loves Metro style" });
        People.Add(new Person { Name = "Paul", About = "DBA with a thing for SQL Server 2012" });

    }

    public Person NewPerson { get; set; }

    public void AddNewPerson()
    {
        People.Add(new Person { Name = NewPerson.Name, About = NewPerson.About });
    }

} 
```

我的视图（XAML 页面）

```
 <Page.DataContext>
    <local:PeopleConnector/>
</Page.DataContext>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}" >
    <StackPanel Orientation="Horizontal" >
        <ListView x:Name="AllItemsView" 
                  Width="200" 
                  Margin="40,20,0,0" 
                  Height="400" 
                  VerticalAlignment="Top" 
                  Background="DarkGray"
                  ItemsSource="{Binding People}">             
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Name}"></TextBlock>
                        <TextBlock TextWrapping="Wrap"  Text="{Binding Path=About}"></TextBlock>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <StackPanel Width="200" Margin="20,50,0,0" Height="200" VerticalAlignment="Top">
            <TextBlock>Name</TextBlock>
            <TextBox Text="{Binding NewPerson.Name, Mode=TwoWay}"></TextBox>
            <TextBlock>About</TextBlock>
            <TextBox Text="{Binding NewPerson.About, Mode=TwoWay}"></TextBox>
            <Button VerticalAlignment="Top" Margin="30" Width="130" Click="Button_Click_1">Add</Button>
        </StackPanel>
    </StackPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:29:52.360

这里有一些问题：

首先，您没有初始化`NewPerson`. 在您的`PeopleConnector`构造函数中，您需要初始化`NewPerson`.

接下来，您无法告诉您的 ViewModel 您单击了一个按钮。通常，您可以通过将 ViewModel 上的 ICommand 实例绑定到您的 View 来执行此操作（请参阅 DelegateCommand 以了解可能的实现）。所以你的按钮会变成这样：

```
<Button VerticalAlignment="Top" Margin="30" Width="130" Command={Binding Path=AddPersonCommand}>Add</Button> 
```

您的 ViewModel 构造函数看起来像这样：

```
public PeopleConnector()
{
    People = new ObservableCollection<Person>();
    People.Add(new Person { Name = "Iris", About = "Developer that loves Metro style" });
    People.Add(new Person { Name = "Paul", About = "DBA with a thing for SQL Server 2012" });
    NewPerson = new Person();
    _addPersonCommand = new DelegateCommand(AddNewPerson);
}

private readonly DelegateCommand _addPersonCommand;
public ICommand AddPersonCommand
{
    get { return _addPersonCommand; }
} 
```

# python - __str__ 不工作 python

> ID：15301190
> 
> 赞同：7
> 
> 时间：2013-03-08T18:52:56.370
> 
> 标签：python

我正在研究一些面向对象的编程。不幸的是，我什至无法迈出第一步。使用**str**将类转换为字符串。这是我的代码：

```
class Time:

    def __init__(self, hours = 0, minutes = 0, seconds = 0):
        self.hours = hours
        self.minutes = minutes
        self.seconds = seconds

    def __str__(self):
        return "basdfadsg"

time1 = Time

time1.hours = 3
time1.minutes = 23
time1.seconds = 13

print(time1) 
```

每当我尝试

```
print(time1) 
```

它返回

```
<class '__main__.Time'> 
```

我究竟做错了什么？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T18:53:46.297

你需要*一个*. `Time`例如`time1 = Time()` （注意括号）。

实际上，您正在修改*类*，而不是类的*实例*——并且`__str__`只告诉 python 如何从类的实例创建字符串，而不是类本身......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:11:45.727

如果你真的想拥有一个`__str__`或`__repr__`一个类而不是一个类的实例，你需要以这种方式使用元类：

```
>>> class Test(type):
...    def __repr__(self):
...       return 'Test is my name'
... 
>>> class MT(object):
...    __metaclass__=Test
... 
>>> print MT
Test is my name 
```

但是，正如其他人所说，您更有可能不是通过调用来引用 Time 的实例`__init__`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:03:48.237

你的问题在这里：

```
time1 = Time 
```

您没有创建 Time 类的实例并将其传递给 time1，而是将该类的 TYPE 传递给 time1。

要使此代码按您的意愿工作，只需调用对象构造函数：

```
time1 = Time() 
```

你可能会想“为什么有人需要一个变量来保存一个类型而不是一个实例？” 好吧，在 Python 中，类定义（以及几乎所有其他东西）是可以在运行时修改的第一类对象，允许从类定义中动态添加/删除成员和成员函数。玩得开心*蟒蛇*，这真的是一个爆炸。

# c# - 在 C# 中将泛型作为泛型类型参数传递

> ID：15301197
> 
> 赞同：4
> 
> 时间：2013-03-08T18:53:15.997
> 
> 标签：c#, generics, type-parameter

我在 C# 中对泛型做了一个小实验，遇到了一个问题，我想将泛型类型作为类型参数传递，并带有约束来实现我不知道其类型的泛型接口。

这是我的例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication3
{
    class Program
    {
        interface IGenericCollection<T>
        {
            IEnumerable<T> Items { get; set; }
        }

        abstract class GenericCollection<T> : IGenericCollection<T>
        {
            public IEnumerable<T> Items { get; set; }
        }

        //This class holds a generic collection but i have to ensure this class
        //implements my IGenericCollection interface. The problem here is that
        //i dont know which type TGenericCollection is using and so i am unable to
        //pass this information to the constraint. 

        class CollectionOwner<TGenericCollection>
           where TGenericCollection : IGenericCollection< dont know ... >
        {
            protected TGenericCollection theCollection = default(TGenericCollection);
        }

        static void Main(string[] args)
        {
        }
    }
} 
```

我在这里阅读了几篇文章，都告诉我这是不可能的，因为 C# 和 CLR 的限制。但是这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:02:42.963

您可以将第二个泛型参数添加到实现类。下面的静态`Example`方法显示了一个例子。

```
public interface ITest<T>
{
    T GetValue();
}

public class Test<T, U> where T : ITest<U>
{
    public U GetValue(T input)
    {
        return input.GetValue();
    }
}

public class Impl : ITest<string>
{
    public string GetValue()
    {
        return "yay!";
    }

    public static void Example()
    {
        Test<Impl, string> val = new Test<Impl,string>();
        string result = val.GetValue(new Impl());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:57:10.487

也许您应该使用另一个类型参数：

```
class CollectionOwner<TGenericCollection, T2>
   where TGenericCollection : IGenericCollection<T2>
   where T2 : class
{
    protected TGenericCollection theCollection = default(TGenericCollection);
} 
```

你需要这套西装吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T18:57:25.263

我认为这里没有问题，只需在您的 Owner 类中添加另一个通用参数：

```
 class CollectionOwner<T,TGenericCollection>
           where TGenericCollection : IGenericCollection<T>
        {
            protected TGenericCollection theCollection = default(TGenericCollection);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:45:40.523

使用第二个通用参数是一个选项 4，确定我已经想使用它，但是这个呢

```
 abstract class GenericCollection<T> : IGenericCollection<T>
    {
        public IEnumerable<T> Items { get; set; }
    }

    class ConcreteCollection : GenericCollection<string>
    {

    }

    static void Main(string[] args)
    {
       // will constraint fail here ?
       CollectionOwner<int,ConcreteCollection> o = new  CollectionOwner(int, ConcreteCollection);
    } 
```

# mongodb - 如果您在 mongodb 中索引地图会发生什么

> ID：15301203
> 
> 赞同：0
> 
> 时间：2013-03-08T18:53:36.427
> 
> 标签：mongodb

我在 mongodb 中有一个文档，其中包含这样的地图：

```
{
     "name": "Document 1",
     "attrinutes": {
           "key1": "value1",
           "key2": "value2",
           "key3": "value3"
     }
} 
```

如果我在这样的属性上创建索引：

```
db.ensureIndex ({"attributes":-1}) 
```

索引会是什么样子，什么类型的查询会使用这个索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:33:04.017

这仍然是与副本相同的基本问题。索引`attributes`将作为二进制 blob 完成，因此它只能用于以下查询：

```
db.coll.find({attributes: {key1: 'value1', key2: 'value2', key3: 'value3'}}) 
```

所以它不能用于对 的单个键的查询`attributes`，只能用于整个对象的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:43:45.363

您提到的设置会将“属性”索引为 blob，并且不会用于任何需要检查实际属性文档中的值的查询。如果您希望能够执行类似的查询

```
{ "attributes.key1" : "value1" } 
```

并让它使用索引，然后您可以构建文档

```
{
    "name" : "Document1",
    "attributes" [
        { "key" : "key1", "value", "value1" },
        { "key" : "key2", "value", "value2" }
    ]
} 
```

然后，根据您需要做什么，索引“属性”本身，或者在“attributes.key”和“attributes.value”上创建一个复合索引。

# java - Spring MVC 过滤器解决方案

> ID：15301204
> 
> 赞同：1
> 
> 时间：2013-03-08T18:53:45.780
> 
> 标签：java, jsp, servlets, spring-mvc

我需要你对过滤器使用的建议。只是想知道我在想什么是一种可能的好方法。
所以我的任务是使用 JSP、Spring MVC 2.5、javascript 等开发 5-6 个屏幕。
所有这些屏幕共享许多常见的数据元素，例如下拉列表等。
我正在考虑实现一个过滤器并在里面填充这些下拉值过滤器中的一个弹簧 ModelMap ，以便过滤器的 URL 模式下的每个屏幕都获取此数据。
这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:01:39.617

我相信过滤器可以解决问题，但是我会远离这种方法。您也可以使用 Spring 的拦截器来做同样的事情，并且仍然利用 Spring 的特性，例如依赖注入、事务管理和 Spring Data 包。

在调度程序的配置中设置拦截器。

```
<mvc:interceptors>
    <mvc:interceptor>
       <mvc:mapping path="/**"/>
       <bean class="org.my.domain.interceptors.LookupHandlerInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

然后定义你的拦截器类：

```
public class LookupHandlerInterceptor extends HandlerInterceptorAdapter {

        @Autowired
        LookupLoaderApplicationListener loader;

        @Override
        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)
        throws Exception {
             request.setAttribute("lookupList", loader.getCategories());
             return super.preHandle(request, response, handler);
        }
    } 
```

这种方法将允许您利用您可能在应用程序中使用的其他 Spring 功能，例如您可能已设置的任何持久性。然后你可以在你的数据库中管理这个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:10:44.283

I think violating the principle of least surprise and hiding code that is critical to the correct function of a controller in a separate part of the application is not worth whatever bit of "magic"/cleverness is squeezed out of doing this.

Why hide the code that sets up the screens from future developers?

Just because they all share common reference data now, will they forever and for all time? As soon as the requirements for the different screens start to diverge, it gets ugly fast.

You basically have all the drawbacks of using inheritance instead of composition to make a controller, plus on top of that you can't even see the code from the controller. I would simply make a utility bean that does the common work, inject it on the controller, and write the one line `@ModelAttribute` method to call it. There will be much less mess when their individual requirements change in the future.

# mysql - 使用关系表数据构建查询，根据变量删除查询中的某些行

> ID：15301209
> 
> 赞同：0
> 
> 时间：2013-03-08T18:53:56.457
> 
> 标签：mysql, join, relationship

我可能会以错误的方式解决这个问题，因为我找不到像这样的问题。

我有一个产品表

```
id - name - parent
---|------|--------
1  |p-A   |  0    -default
2  |p-A1  |  1    -default
3  |p-u1  |  0    -USER ADDED 
```

我有一个将用户 ID 与 PID 耦合的关系表（但它也有一个开/关字段）

```
id - uid - pid - on(0=no, 1=yes)
---|-----|-----|----
1  | 0   | 1   | 1 - uid-0 for default association(ok?)
2  | 0   | 2   | 1
3  | 1   | 3   | 1 - USER ADDED association
4  | 1   | 2   | 0 - USER does not want this default product 
```

所以我可以获取默认值，并且用户使用这样的查询添加产品但显然 AND 子句什么都不做，因为我已经在第一个 WHERE 子句中选择了行。

```
SELECT prod.id, prod.name, prod.parent, rel.pid, rel.uid, rel.on 
FROM prod, rel 
WHERE rel.uid = 0 OR rel.uid = '$uid' 
AND rel.on <> 0 
```

我似乎无法弄清楚如何在不通过 php 函数的情况下省略查询中为特定用户关闭的产品

注意：我知道我可以为所有用户创建默认的用户/产品关联，但我不想为每个用户插入这 15 个关联。我也不想制作默认产品表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:58:16.607

你少了一个括号。如果没有围绕 OR 的括号，查询将返回与这些条件中的任何一个匹配的所有记录。您还缺少 prod 和 rel 之间的连接，因此也会返回额外的记录。

```
SELECT prod.id, prod.name, prod.parent, rel.pid, rel.uid 
FROM prod
    INNER JOIN rel ON prod.id = rel.id
WHERE (rel.uid = 0 OR rel.uid = '$uid')
AND rel.on <> 0 
```

为简化起见，您可以使用 IN 语句而不是 OR

```
SELECT prod.id, prod.name, prod.parent, rel.pid, rel.uid 
FROM prod
    INNER JOIN rel ON prod.id = rel.id
WHERE rel.uid IN (0,'$uid')
AND rel.on <> 0 
```

# paypal - Paypal 定期计费 - 专业人士？标准？

> ID：15301211
> 
> 赞同：0
> 
> 时间：2013-03-08T18:53:59.157
> 
> 标签：paypal, paypal-subscriptions

我正在建立一个用户可以按年订阅的网站。我通过payment pro api完成了它，但完全错过了费用。如果我理解正确的话，专业人士每月 20 英镑，重复计费每月 20 英镑。它是否正确？

要创建订阅网站，paypal pro 是我唯一的选择吗？贝宝是否提供其他更便宜的选择？

真的对他们的网站和信息感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:38:50.707

您可以使用 PayPal 网站支付标准并使用订阅按钮。此项服务不收取月费。唯一的费用是每笔交易的交易费或订阅费。

# python - 如何编写包装预分配数据的扩展类型？

> ID：15301216
> 
> 赞同：4
> 
> 时间：2013-03-08T18:54:17.313
> 
> 标签：python, c, cython

我有一些来自已经分配和初始化的结构的数据。我可以保证在这些对象的任何生命周期内都不会释放数据。如何将其包装在 Cython 的 Python 对象中？以下内容不起作用*，*但我希望它能解释我的意图：

```
from libc.stdlib cimport malloc

ctypedef struct Point:
    int x
    int y

cdef class _MyWrapper:
    cdef Point* foo
    def __cinit__(self, Point* foo):
        self.foo = foo

def create_eternal_MyWrapper(int x, int y):
    cdef Point* p
    p = <Point*>malloc(sizeof(Point))
    p.x = x
    p.y = y
    return _MyWrapper(p) 
```

在此运行 cython 的输出：

```
Error compiling Cython file:
------------------------------------------------------------
...
def create_eternal_MyWrapper(int x, int y):
    cdef Point* p
    p = <Point*>malloc(sizeof(Point))
    p.x = x
    p.y = y
    return _MyWrapper(p)
                      ^
------------------------------------------------------------

examplecy.pyx:17:23: Cannot convert 'Point *' to Python object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:53:00.950

[正如这里](http://en.usenet.digipedia.org/thread/15907/5608/)所讨论的，`__init__`和`__cinit__`方法都使用`PyObject_Call`API 函数，它只能接受 PyObject 类型的参数。因此，正如[FAQ](http://wiki.cython.org/FAQ#CanCythoncreateobjectsorapplyoperatorstolocallycreatedobjectsaspureCcode.3F)中所建议的，您应该在全局工厂方法中初始化 C 属性：

```
from libc.stdlib cimport malloc

ctypedef struct Point:
    int x
    int y

cdef class _MyWrapper:
    cdef Point* fooless
    def __init__(self, *args, **kwargs):
        raise TypeError("This class cannot be instantiated from Python")

cpdef _MyWrapper create_MyWrapper(int x, int y):
    cdef _MyWrapper w = _MyWrapper.__new__(_MyWrapper)

    cdef Point* p
    p = <Point*>malloc(sizeof(Point))
    p.x = x
    p.y = y

    w.foo = p

    # initialize all other fields explicitly
    # ...

    return w 
```

当然可以自己创建一个专用的初始化方法`_MyWrapper`，但我认为这会相当不安全，因为用户可能会在类实例化后忘记调用此类方法。

PS：很高兴看看是否存在更简单的解决方案

# c++ - 从另一个类c ++中的构造函数调用方法

> ID：15301221
> 
> 赞同：0
> 
> 时间：2013-03-08T18:54:35.687
> 
> 标签：c++

我需要在另一个类的构造函数中调用一个类的方法。我不确定如何在没有“未在此范围内声明”错误的情况下执行此操作。注意我只是在学习 C++。

请参阅 symboltable.cpp 中的评论，了解我在这里想要完成的工作。我不是在寻找任何人为我做这件事。我可以举一个例子或指出正确的方向，这样我就可以解决这个问题。

symboltable.h 代码：

```
class SymbolTable
{
public:
    SymbolTable() {}
    void insert(string variable, double value);
    void insert(string variable); // added for additional insert method
    double lookUp(string variable) const;
    void init(); // Added as mentioned in the conference area.
private:
    struct Symbol
    {
        Symbol(string variable, double value)
        {
            this->variable = variable;
            this->value = value;
        }
        string variable;
        double value;
    };
    vector<Symbol> elements;
}; 
```

symboltable.cpp 代码：

```
#include <string>
#include <vector>
#include <algorithm>

using namespace std;

#include "symboltable.h"

/* Implementing the "unreferenced variable" warning.
 * Modify the symbol table by adding another insert method
 * that supplies only the variable name.
 * This method should be called when the variable name
 * is encountered while building the arithmetic expression tree.
 * It would be called in the constructor of the Variable class.
 * The existing insert method, which is called when an assignment is encountered,
 * would first check to see whether it is already in the symbol table.
 * If it is not, then it is unreferenced.
 */

void SymbolTable::insert(string variable, double value)
{
    /* This existing insert method, which is called when an assignment is encountered,
     * first needs to check to see whether it is already in the symbol table.
     * If it is not, then it is unreferenced.
     * */

    //Need to check if variable is in the expression need to find out how the         expression is stored!

if (find(elements.begin(), elements.end(), variable)) {
    const Symbol& symbol = Symbol(variable, value);
        elements.push_back(symbol);
    } else
        throw string("Error: Test for output");
}

/* Adding another insert method that supplies only the variable name.
 * This method should be called when the variable name is encountered
 * while building the arithmetic expression tree.
 * It should be called in the constructor of the Variable class.
 */
void SymbolTable::insert(string variable)
{
    const Symbol& symbol = Symbol(variable, symbolTable.lookUp(variable));
    elements.push_back(symbol);
}

double SymbolTable::lookUp(string variable) const
{
    for (int i = 0; i < elements.size(); i++)
        if (elements[i].variable == variable)
             return elements[i].value;
        else
        throw "Error: Uninitialized Variable " + variable;
    return -1;
}

void SymbolTable::init() {
elements.clear(); // Clears the map, removes all elements.
} 
```

变量.h 代码：

```
class Variable: public Operand
{
public:
    Variable(string name)  //constructor
    {
        // how do i call symbolTable.insert(name); here
        // without getting 'symboleTable' was not declared in this scope error

        this->name = name;
    }
    double evaluate();
private:
    string name;
}; 
```

变量.cpp 代码：

```
#include <string>
#include <strstream>
#include <vector>
using namespace std;

#include "expression.h"
#include "operand.h"
#include "variable.h"
#include "symboltable.h"

extern SymbolTable symbolTable;

double Variable::evaluate() {
    return symbolTable.lookUp(name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:59:30.687

`extern SymbolTable symbolTable;`需要进入需要符号表的每个人都包含的头文件。然后，在 variable.cpp 中，你需要有`SymbolTable symbolTable;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:00:58.613

有两种解决方案：

1.  您使用全局变量 - 就像您的`Variable::evaluate()`示例一样。您当然可以`Variable::Variable()`在“variable.cpp”而不是标题中添加您的函数。或者你可以把一个`extern SymbolTable symbolTable`放到文件“variable.h”中。
2.  您将引用传递给`symbolTable`构造函数（并且可能将其存储在`Variable`对象中 - 这样，symbolTable 根本不需要是全局变量。

顺便说一句，`using namespace std`在头文件之前添加通常被认为是不好的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:02:02.980

您需要在构造函数中实例化第二个类，这将使其及其成员仅在第一个类的构造函数中可用，或者在全局命名空间中。例如：

```
MyFooClass CFoo;
MyBarClass CBar;

MyFooClass::MyFooClass()
{
  CBar = new MyBarClass();
  CBar.BarClassMemberFunction();
} 
```

# qt - Qt Quick 1.1 / QML 的文本缩放效果不佳

> ID：15301223
> 
> 赞同：3
> 
> 时间：2013-03-08T18:54:40.617
> 
> 标签：qt, qml, qt-quick, qtquick2

我正在 Windows 7 PC 上使用 Qt 4.8.4 (MSVC 2010) 开发软件应用程序。我刚刚从 QWidget 框架切换到**QML/QtQuick 1.1**声明性框架，但是我注意到在 QtQuick/QML 中，文本缩放很差。字母经常被截断或略微倾斜。

**在下图中**，由于窗口调整大小，文本已被缩放，但每次看起来都不同。

这是我使用的缩放功能：

```
scale: paintedWidth > maxWidth ? Math.max((maxWidth / Math.max(paintedWidth, 1)), 0.1) : 1 
```

基本上，此缩放功能仅在文本大于其所在容器的大小时才会缩小文本。它可以正常工作。

**我只是想知道是否有任何可能的方法来改善 QML/Qt Quick 1.1 中的文本缩放，是否有其他人注意到这个问题？**

我知道在 QtQuick 2 中已经完成了一些关于文本缩放的工作，但不幸的是，由于兼容性问题，现在不可能将我们的 UI 升级到 QtQuick 2。

![糟糕的 QML 文本缩放](../Images/8a3c83979e4057f86227fa44c7b33e1d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T23:53:32.200

首先要尝试的是设置`smooth: true`

如果您正在为缩放设置动画，那么您可能仍然会注意到由于字体以不同大小呈现的提示而导致的不规则性。您可能会成功地将 Text 元素强制放入将文本缓存到图像的代码路径中，然后将其缩放，而不是直接绘制文本：

```
smooth: true
style: Text.Raised
styleColor: "transparent" 
```

您获得外观的另一个原因可能是文本没有被定位像素对齐，即`y`不是整数，或者`y`父元素不是整数。

# wpf - Fluent Ribbon：指定上下文选项卡组的位置？

> ID：15301226
> 
> 赞同：1
> 
> 时间：2013-03-08T18:54:50.083
> 
> 标签：wpf, fluent-ribbon

在 Fluent Ribbon Control Suite 中，有没有办法让上下文选项卡组首先显示而不是最后显示？我使用的是旧版本，前三个选项卡项有一个上下文选项卡组，另外两个没有组。下载并构建了最新的源码；组中的选项卡现在位于右端。我希望它们以与我在 xaml 中指定的顺序相同的顺序显示。我没有看到任何明显的属性可以让我指定顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T21:21:08.913

由于没有人对此有答案，而我刚刚获得了 Tumbleweed 徽章 :)，我决定发布我的解决方案，即修改 Fluent Ribbon Control Suite 代码。我`ArrangeOverride`在`RibbonTabsContainer`课堂上修改。这导致分组选项卡在不属于组的选项卡之前呈现：

```
 /// <summary>
        /// Positions child elements and determines
        /// a size for the control
        /// </summary>
        /// <param name="finalSize">The final area within the parent 
        /// that this element should use to arrange 
        /// itself and its children</param>
        /// <returns>The actual size used</returns>
        protected override Size ArrangeOverride(Size finalSize)
        {
            var finalRect = new Rect(finalSize)
                                {
                                    X = -this.HorizontalOffset
                                };

            var orderedChildren = this.InternalChildren.OfType<RibbonTabItem>()
                                      .OrderByDescending(x => x.Group != null); // <==== originally .OrderBy

            foreach (var item in orderedChildren)
            {
                finalRect.Width = item.DesiredSize.Width;
                finalRect.Height = Math.Max(finalSize.Height, item.DesiredSize.Height);
                item.Arrange(finalRect);
                finalRect.X += item.DesiredSize.Width;
            }

            var ribbonTabItemsWithGroups = this.InternalChildren.OfType<RibbonTabItem>()
                                               .Where(item => item.Group != null);

            var ribbonTitleBar = ribbonTabItemsWithGroups.Select(ribbonTabItemsWithGroup => ribbonTabItemsWithGroup.Group.Parent)
                                                         .OfType<RibbonTitleBar>()
                                                         .FirstOrDefault();

            if (ribbonTitleBar != null)
            {
                ribbonTitleBar.InvalidateMeasure();
            }

            return finalSize;
        } 
```

# shell - 在 vim 中执行任何命令都会导致它被挂起

> ID：15301228
> 
> 赞同：1
> 
> 时间：2013-03-08T18:54:52.957
> 
> 标签：shell, vim

当我将 vim 的 shell 设置为交互式时会发生这种情况：

```
set shellcmdflag=-ic 
```

或者

```
set shell=/bin/bash\ -i 
```

我喜欢这些，因为它们为输出提供语法突出显示（例如：）`!ls`但代价是我`fg #`每次都必须输入。

这是默认行为吗？

如何在 vim 中获得交互式 shell 而不必让它在前台运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:01:52.437

你不能。这种行为是完全正常和预期的，并且符合 Vim 作者的理念。未来改变的可能性很小*。*

如果你想*在*Vim 中安装一个 shell，你必须安装一个像[Conque](http://code.google.com/p/conque/)或[Vimshell 这样的插件。](https://github.com/Shougo/vimshell)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T16:34:59.940

我通常只使用 tmux 代替。您可以拆分终端并拥有一个普通的交互式 shell 和一个并排运行的 vim 实例 - 非常方便。

# php - object::method() 必须与 objectAbstract::method() 兼容 - 传递参数 = 值？

> ID：15301233
> 
> 赞同：0
> 
> 时间：2013-03-08T18:55:03.757
> 
> 标签：php, oop

我对 PHP OOP 还很陌生，但我遇到了一个错误。

objectForm::addMessage() 必须与第 xx 行 /www/form/Form.php 中的 objectAbstractForm::addMessage() 兼容

我已经看过几次了，其中方法参数类似于 $var1，$var2 = false（或 null），无论出于何种原因，我都得到“必须与 X::Y() 兼容”

```
public function addMessage($message, $messageType = 'info')
{
    if (!in_array($message, $this->_messages)) {
        if ('info' == $messageType) {
            $this->_messages[] = $message;
        } else {
            $this->_errorMessages[] = $message;
        }
    }
} 
```

由于我是 OOP 的新手，因此我无法找到更好的方法。

**编辑：**在父母有例如，

```
abstract class objectAbstractForm {

abstract protected function addMessage($message, $messageType);

} 
```

有什么更好的方法来做到这一点？我正在使用 PHP 5.2.17

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:14:00.170

问题是您在子类中将第二个参数设为可选，但在父类中它是必需的。如果您想要一个可选参数，您还需要在父类中使其成为可选参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:04:16.083

我想你的类正在扩展另一个（从它扩展的错误消息`objectForm`）`/www/form/Form.php`，（你在此处发布的方法）的方法签名`objectAbstractForm::addMessage()`必须与`objectForm::addMessage()`.

例如：

```
class A {
    public function test($a, $b, $c=null) {
        // code
    }
}

class B extends A {
    public function test($a, $b, $c=null) {
        // code
    }
}

class C extends A {
    public function test($a, $b=null) {
        // code
    }
} 
```

类`C`会产生你的错误，方法的签名与方法`C::test()`中的签名不同`A::test()`，而`B::test()`将被接受，因为它的签名与`A::test()`.

我很乐意让我的答案更具体地针对您的问题，但您需要发布两者的方法签名和`objectForm::addMessage()`类签名`objectAbstractForm``Form`

编辑：我对你的类有相反的猜测，但原理是一样的，你不能在 PHP 5.2 中出现参数不匹配的情况。您将需要编辑您喜欢的签名。

或者，您可以升级到 PHP 5.3 或更高版本，这不会困扰您。

高温高压

PS：当我说“方法签名”时，我不确定我是否使用了正确的术语，但如果我错了，请随时纠正我:)

# javascript - 如何将 ViewModel 属性传递给 ajax post 方法？

> ID：15301235
> 
> 赞同：1
> 
> 时间：2013-03-08T18:55:14.210
> 
> 标签：javascript, ajax, asp.net-mvc, asp.net-mvc-3

```
 function ResendEmailInvite(internalUserId, familyMemberId) { 
       theinternalUserId = internalUserId;
       theFamilyMemberId = familyMemberId;
      if(confirm('Are you sure you want to resend this family member's invite?')){
         $.ajax({
             type: "POST",
             url:"/Admin/ResendFamilyMemberEmail",
             data: {internalUserId : theinternalUserId, familyMemberId : theFamilyMemberId}, 
             success: function(response){
                alert(response);
             },
             error: function(){
                alert("Error");
            }
        });
        return false;
    }
} 
```

我正在使用 ASP.net MVC 3。在我看来，这是一个**ajax/javascript**方法。

就语法而言，这是正确的吗？

将`familyMemberId`是动态的，然而，`userId`不是。我想将`userId`我的 viewModel 传递给这个 ajax 调用，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:31:50.660

您想要做的是从控制器中的模型中获取数据到视图中。这就是 MVC 的全部意义所在。来自[MSDN MVC 4 教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)：

## 控制器：

您可以使用 VS 菜单系统和实体框架来定义您的模型，以便您实际访问数据库。

```
 public class YourController : Controller
{
     private YourDBContext db = new YourDBContext();

     public ActionResult YourAction(int user_id = 0)
    {
        User user = db.Users.find(user_id);
        if(user == null) {
           return HttpNotFound(); // Or unauthorized or whatever
        }
        return View(user);
    }
    //... 
```

## 看法：

```
@Model IEnumerable<MvcUser.Models.User>

<!-- other stuff -->

 <script type="text/javascript>
 // the rest of your script
        function ResendEmailInvite(internalUserId, familyMemberId) { 
           theinternalUserId = @Model.userId;
           theFamilyMemberId = familyMemberId;
          if(confirm('Are you sure you want to resend this family member's invite?')){
             $.ajax({
                 type: "POST",
                 url:"/Admin/ResendFamilyMemberEmail",
                 data: {internalUserId : theinternalUserId, familyMemberId : theFamilyMemberId}, 
                 success: function(response){
                    alert(response);
                 },
                 error: function(){
                    alert("Error");
                }
            });
            return false;
        }
    } 
```

这是因为，正如您所指出的，用户 ID 在页面加载后不是动态的。如果您想要真正的动态行为，则需要在 HTML 中创建一些其他钩子以供 javascript 抓取。

# algorithm - 如何检测这些音频异常？

> ID：15301237
> 
> 赞同：19
> 
> 时间：2013-03-08T18:55:20.923
> 
> 标签：algorithm, audio, signal-processing, sample-rate

iOS 在通过某些 USB 音频设备进行录制时出现问题。它无法可靠地再现（在大约 2000-3000 条记录中每 1 条发生一次，然后默默地消失），我们目前手动检查我们的音频是否存在任何录制问题。它会导致少量样本（1-20）被移动一小部分，这听起来像是一种“噼啪声”。

它们看起来像这样：

![异常波形](../Images/b6bdff5c58ad07b409441cbdaa23d9e8.png)

更接近：

![在此处输入图像描述](../Images/ffb52e2e7c451be766f642e06627bf18.png)

更接近：

![在此处输入图像描述](../Images/80f5d6feb066e8e26bc6fc825e077af5.png)

同一音频文件中其他地方的另一个单一样本错误：

![在此处输入图像描述](../Images/c4ca49ced01f1460fb3dd2dd4adcf0dc.png)

问题是，如何在算法上检测到这些（假设直接访问样本），同时不会在具有如下波形的高频音频上触发误报：

![在此处输入图像描述](../Images/72c409a71d58628182dc07af68e9646d.png)

加分项：在确定尽可能多的错误后，如何“修复”音频？

*   [肮脏的音频文件-如图](https://dl.dropbox.com/u/8390293/dirty-sample-pictured.wav)
*   [另一个脏音频文件](https://dl.dropbox.com/u/8390293/dirty-sample-other.wav)
*   [具有有效高频的干净音频 - 如图](https://dl.dropbox.com/u/8390293/clean-highfreq.wav)

更多奖励点：iOS USB 音频驱动程序/硬件中可能导致此问题的原因（假设存在）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T13:51:36.187

我认为没有现成的解决方案可以找到干扰，但这是解决问题的一种（非标准）方法。使用它，我可以找到大多数间隔，并且只得到少量误报，但该算法当然可以使用一些微调。

我的想法是找到偏离样本的起点和终点。第一步应该是让这些观点更加清晰。这可以通过取数据的对数并取连续值之间的差异来完成。

在 MATLAB 中我加载数据（在这个例子中我使用了dirty-sample-other.wav）

```
y1 = wavread('dirty-sample-pictured.wav');
y2 = wavread('dirty-sample-other.wav');
y3 = wavread('clean-highfreq.wav');

data = y2; 
```

并使用以下代码：

```
logdata = log(1+data);
difflogdata = diff(logdata); 
```

因此，而不是原始数据的这个图：

![原始数据](../Images/ec06c621f9d0c091a94e74eb49ab2d5a.png)

我们得到：

![差异日志数据](../Images/18f2003b843a2ab2bff6836bd39155aa.png)

我们正在寻找的间隔突出为正负峰值。例如放大对数差异图中的最大正值，我们得到以下两个数字。一个用于原始数据：

![原始数据放大](../Images/bd0beaa6649c3dce1670cdc3a669758e.png)

一个用于对数的差异：

![差异日志数据缩放](../Images/d75c4a4f698c567ab9634c844a34c32b.png)

该图可以帮助手动查找区域，但理想情况下，我们希望使用算法找到它们。我这样做的方法是取一个大小为 6 的移动窗口，计算窗口的平均值（除最小值之外的所有点），并将其与最大值进行比较。如果最大值点是唯一高于平均值且至少是平均值两倍的点，则将其计为正极值。

然后我使用了计数阈值，至少有一半的窗口在该值上移动应该将其检测为极值，以便它被接受。

然后将所有点与 (-1) 相乘，然后再次运行该算法以检测最小值。

用“o”标记正极端，用“*”标记负极端，我们得到以下两个图。一种是对数的差异：

![发现极值的 diff-log-data](../Images/1c9921ae60b87ec9bee75f6ce4d7b6d8.png)

一个用于原始数据：

![发现极端情况的原始数据](../Images/3a2fa0ee635ff0f87fa587fbaefea796.png)

放大显示对数差异的图的左侧部分，我们可以看到找到了大多数极值：

![已发现极端情况的 diff-log-data 已放大](../Images/20e42a9d7d4ebd49c6d75433b34c51d3.png)

似乎找到了大多数间隔，并且只有少量误报。例如，在我运行算法时，`'clean-highfreq.wav'`我只找到一个正极值和一个负极值。

被错误归类为极值的单个值可能会通过匹配起点和终点而被淘汰。如果你想替换丢失的数据，你可以使用周围数据点的某种插值，甚至线性插值就足够了。

这是我使用的 MATLAB 代码：

```
function test20()
clc
clear all

y1 = wavread('dirty-sample-pictured.wav');
y2 = wavread('dirty-sample-other.wav');
y3 = wavread('clean-highfreq.wav');

data = y2;

logdata = log(1+data);
difflogdata = diff(logdata);

figure,plot(data),hold on,plot(data,'.')
figure,plot(difflogdata),hold on,plot(difflogdata,'.')

figure,plot(data),hold on,plot(data,'.'),xlim([68000,68200])
figure,plot(difflogdata),hold on,plot(difflogdata,'.'),xlim([68000,68200])

k = 6;
myData = difflogdata;
myPoints = findPoints(myData,k);

myData2 = -difflogdata;
myPoints2 = findPoints(myData2,k);

figure
plotterFunction(difflogdata,myPoints>=k,'or')
hold on
plotterFunction(difflogdata,myPoints2>=k,'*r')

figure
plotterFunction(data,myPoints>=k,'or')
hold on
plotterFunction(data,myPoints2>=k,'*r')

end

function myPoints = findPoints(myData,k)

iterationVector = k+1:length(myData);
myPoints = zeros(size(myData));
for i = iterationVector
    subVector = myData(i-k:i);
    meanSubVector = mean(subVector(subVector>min(subVector)));
    [maxSubVector, maxIndex] = max(subVector);
    if (sum(subVector>meanSubVector) == 1 && maxSubVector>2*meanSubVector)
        myPoints(i-k-1+maxIndex) = myPoints(i-k-1+maxIndex) +1;
    end
end

end

function plotterFunction(allPoints,extremeIndices,markerType)

extremePoints = NaN(size(allPoints));
extremePoints(extremeIndices) = allPoints(extremeIndices);
plot(extremePoints,markerType,'MarkerSize',15),
hold on
plot(allPoints,'.')
plot(allPoints)

end 
```

**编辑 - 关于恢复原始数据的评论**

这是上图三的稍微放大的视图：（扰动在 6.8 和 6.82 之间）

![原始数据缩小](../Images/a4cd0606daacbf98241ba33d6a2751a4.png)

当我检查这些值时，您关于将数据镜像为负值的理论似乎并不完全符合该模式。但无论如何，我认为只是消除差异的想法肯定是不正确的。由于周围的点似乎没有被干扰改变，我可能会回到最初的想法，即不信任受影响区域内的点，而是使用周围数据进行某种插值。在大多数情况下，简单的线性插值似乎是一个很好的近似值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-08T19:57:13.650

要回答为什么会发生的问题-

USB音频设备和主机时钟不同步——也就是说主机无法准确恢复主机本地时钟与音频接口上ADC/DAC的字时钟之间的关系。确实[存在](http://www.eetimes.com/design/audio-design/4210176/Designing-modern-USB-audio-systems)各种不同程度的有效时钟恢复技术。更糟糕的是，总线时钟可能与两个音频时钟中的任何一个都无关。

虽然您可能认为这对音频接收来说不是太大的问题 - 当有数据时可能会发生音频捕获回调 - 音频接口通常是双向的，主机将定期呈现音频，另一端是可能以稍微不同的速度消耗。

中间是几组缓冲区，它们可能会溢出或运行不足，这就是这里看起来正在发生的事情；它发生之间的间隔当然似乎是正确的。

您可能会发现将 USB 音频设备更改为围绕不同芯片组（或者，只是不同的本地振荡器）构建的设备会有所帮助。

顺便说一句，IEEE1394 音频和 MPEG 传输流具有相同的时钟恢复要求。它们都通过以非常可预测的方式将本地时钟参考数据包嵌入串行比特流中来解决问题，从而允许在另一端进行准确的时钟恢复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T12:02:33.573

我认为可以将以下算法应用于样本以确定潜在的误报：

首先，扫描大量高频，或者通过 FFT 逐个块（可能是 256 个值）对声音进行 FFT，或者通过计算高于和低于零的连续样本。后者应该跟踪大于零的最大连续数、小于零的最大连续数、零附近的小转换量和块的当前体积（Audacity 显示为 0..1）。然后，如果最大连续值低于 5（在 44100 处采样，并且零是连续的，而出色的样本是单个的，5 响应 4410Hz 频率，这是相当高的），或者小转换长度的总和高于某个值取决于最大连续（我相信第一个近似值是 3*5* 块大小/两个最大值之间的距离，这大致等于最大 FFT 频率的周期。此外，它应该在阈值之上和之下进行测量，因为我们最终可能会得到一个错误的峰值，这可能会通过在低于零或高于零的最大值上测量的主要速度之间的差异来检测，也可以通过峰值的 std-dev 来检测。如果高频占主导地位，则该块仅适用于零值测试，并且需要特殊的方法来修复数据。如果高频显着，即检测到占主导地位的低频，我们可以搜索大于3.0*高频体积的峰值，以及该块中的异常零点。并且需要一种特殊的方法来修复数据。如果高频显着，即检测到占主导地位的低频，我们可以搜索大于3.0*高频体积的峰值，以及该块中的异常零点。并且需要一种特殊的方法来修复数据。如果高频显着，即检测到占主导地位的低频，我们可以搜索大于3.0*高频体积的峰值，以及该块中的异常零点。

此外，您的差距似乎是高度扩展或纯零，高扩展为单个错误，零错误范围为 1-20。因此，如果存在绝对值低于 0.02 的零范围，该范围直接被 0.15（要微调的变量）或更高的绝对值 AND 的相同符号包围，则将此点计为错误。`2.0*(current sample)-(previous sample)-(next sample)`如果您计算并且如果它高于某个阈值（0.1+高频音量，或3.0*高频音量，以较大者为准），则可以检测到突出的单个值，将其计为错误和平均值。

如何处理发现的零间隙 - 我们可以从 1 个周期向后和 1 个周期向前复制值（平均），其中“周期”是块 FFT 的最重要频率。如果“周期”小于间隙（例如，我们在声音的高音部分检测到零间隙），请使用两个或更多的周期，因此源数据都是有效的（在这种情况下，无法进行平均，因为从间隙向前 2 个周期和向后 2 个周期的信号可能处于反相）。如果有多个频率大致相等，我们可以用正确的相位对这些频率进行简单的采样，完全切除其余不太重要的频率。

出色的样本应该仅由 2-4 个周围样本平均，因为在您的声音文件中似乎只遇到过一个样本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T13:10:43.447

离散小波变换 (DWT) 可能是您的问题的解决方案。

FFT 计算在您的情况下不是很有用，因为它是整个信号持续时间中相对频率内容的平均表示，因此无法检测到瞬时变化。离散短时频率变换 (STFT) 试图通过计算信号的短连续时间块的 DFT 来解决这个问题，其长度由窗口的长度（和形状）决定，但由于DFT 取决于数据/块长度，在频率或时间分辨率之间存在权衡，找到这个神奇的固定窗口大小可能很棘手！

你要的是一种时频分析方法，对高频事件有很好的时间分辨率，对低频事件有很好的频率分辨率……进入离散小波变换！

对于不同的应用程序有许多小波变换，正如您所料，它的计算量很大。DWT 可能不是您问题的实际解决方案，但值得考虑。祝你的问题好运。一些周五晚上的阅读：

[http://klapetek.cz/wdwt.html](http://klapetek.cz/wdwt.html)

[http://etd.lib.fsu.edu/theses/available/etd-11242003-185039/unrestricted/09_ds_chapter2.pdf](http://etd.lib.fsu.edu/theses/available/etd-11242003-185039/unrestricted/09_ds_chapter2.pdf)

[http://en.wikipedia.org/wiki/Wavelet_transform](http://en.wikipedia.org/wiki/Wavelet_transform)

[http://en.wikipedia.org/wiki/Discrete_wavelet_transform](http://en.wikipedia.org/wiki/Discrete_wavelet_transform)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T01:08:22.373

您可以尝试以下超级简单的方法（也许就足够了）：

1.  取波形中的每个点并减去其前一个点（查看从一个点到下一个点的变化）。
2.  查看这些变化的分布并找出它们的标准差。
3.  如果任何给定的差异超过此标准偏差的 X 倍（高于或低于），则将其标记为问题。
4.  通过使用它并查看它的性能来确定 X 的最佳值。
5.  大多数“问题”应该是超出您的截止值的一对两个差异，一个上升，一个下降。

为了坚持超级简单的方法，您可以通过在问题部分之前的最后一个好点和之后的第一个好点之间进行线性插值来修复数据。（确保您不只是删除这些点，因为这会影响（提高）音频的音高。）

# php - PHP中的正则表达式从网站中提取数据

> ID：15301241
> 
> 赞同：0
> 
> 时间：2013-03-08T18:55:49.357
> 
> 标签：php, regex, data-extraction

我是 php 新手。作为我课程作业的一部分，我需要从网站中提取数据并使用该数据呈现表格。

PS：使用正则表达式不是一个好的选择，但我们不允许使用任何库，如 DOM、jQuery 等。

字符集是 UTF-8。

```
$searchURL = "http://www.allmusic.com/search/artists/the+beatles";
$html = file_get_contents($searchURL);

$patternform = '/<form(.*)<\/form>/sm';
preg_match_all($patternform ,$html,$matches); 
```

这里正则表达式工作正常，但是当我为表标签应用相同的正则表达式时，它返回我空数组。与 $html 中的空格有关吗？

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:20:12.290

以下代码产生了良好的结果：

```
$searchURL = "http://www.allmusic.com/search/artists/the+beatles";
$html = file_get_contents($searchURL);

$patternform = '/(<table.*<\/table>)/sm';
preg_match_all($patternform ,$html,$matches);

echo $matches[0][0]; 
```

结果：

![在此处输入图像描述](../Images/d1288a04bf58ef6d66a6a5f972a9717b.png)

# ruby-on-rails - Time.zone.now 锁定在生产中

> ID：15301246
> 
> 赞同：1
> 
> 时间：2013-03-08T18:56:15.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在生产中，方法`Time.zone.now`总是返回相同的值，同时`Time.now`返回正确的系统时间。

这里有一个例子：

**横幅.rb**

```
scope :active, where("'#{Time.zone.now}' between start_date and end_date") 
```

**此范围的日志：**

```
SELECT `banners`.* FROM `banners` WHERE ('2013-03-06 08:06:46 -0300' between start_date and end_date) AND ((`banners`.`store_id` = 1 AND `banners`.`spot_id` = 3 AND `banners`.`at_home` = 1)) 
```

`Time.zone.now`总是**2013-03-06 08:06:46 -0300**

有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:02:07.583

这是因为在加载类时对范围进行了一次评估。

你应该这样定义它：

```
def self.active
  where("'#{Time.zone.now}' between start_date and end_date")
end 
```

每次调用此方法时，都会重新评估它，因此时间会发生变化。

# java - BigInteger 使用了多少空间？

> ID：15301249
> 
> 赞同：17
> 
> 时间：2013-03-08T18:56:22.517
> 
> 标签：java, biginteger

BigInteger 对象通常使用多少字节的内存？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T19:00:51.367

BigInteger 在内部使用 an`int[]`来表示您使用的巨大数字。因此，它实际上**取决于您存储在其中的数字的大小**。`int[]`如果当前数字不能动态适应，它将增长。

要获取您的`BigInteger`实例*当前*使用的字节数，您可以使用`Instrumentation`接口，尤其是[`getObjectSize(Object)`](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html#getObjectSize%28java.lang.Object%29).

```
import java.lang.instrument.Instrumentation;

public class ObjectSizeFetcher {
    private static Instrumentation instrumentation;

    public static void premain(String args, Instrumentation inst) {
        instrumentation = inst;
    }

    public static long getObjectSize(Object o) {
        return instrumentation.getObjectSize(o);
    }
} 
```

为了说服自己，请查看[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/math/BigInteger.java)，其中显示：

```
/**
 * The magnitude of this BigInteger, in <i>big-endian</i> order: the
 * zeroth element of this array is the most-significant int of the
 * magnitude.  The magnitude must be "minimal" in that the most-significant
 * int ({@code mag[0]}) must be non-zero.  This is necessary to
 * ensure that there is exactly one representation for each BigInteger
 * value.  Note that this implies that the BigInteger zero has a
 * zero-length mag array.
 */
final int[] mag; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-08T19:12:55.610

在[这篇](https://stackoverflow.com/questions/2501176/java-bigdecimal-memory-usage)文章之后：

```
BigInteger:
  int bitCount +4 bytes
  int bitLength +4 bytes
  int firstNonzeroIntNum +4 bytes
  int lowestSetBit +4 bytes
  int signum +4 bytes
  int[] mag +? 
```

总共 20 个字节 + 整数数组。长度为 N 的整数数组的大小为 4N + 24（数组开销 + 4 字节/整数）。

总共有 4N + 44 个字节，具体取决于您的数字有多大。不要忘记对对象的引用也使用内存。

编辑：16 个额外字节作为对象开销，使其达到 4N + 60 个字节。对此添加填充（每个对象使用 8 个字节的倍数）我们得到额外的 4 个字节。

这导致**4N + 64**字节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-20T14:45:34.813

在 64 位 JVM 上使用 VisualVM 保留大小，以下是一些具体数字：

*   BigInteger **1**位 = **70B**（例如：new BigInteger("9")）
*   BigInteger **20**位 = **80B**（例如：new BigInteger("12345678901234567890")）
*   BigInteger **100**位 = **112B**

为了比较：

*   **Long**（包装类）= **24B**（但 Long 限制为 18-19 位）
*   **长**（原始）= **8B**

所以`BigInteger`至少比 a 重 3 倍，比 a`Long`重 10 倍`long`。因此，仅在您真正需要时才使用 BigInteger！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T19:20:37.517

Java 对象的大小取决于它的字段。这些是 BigInteger 字段

```
final int signum;
final int[] mag;
private int bitCount;
private int bitLength;
private int lowestSetBit;
private int firstNonzeroIntNum; 
```

我们可以将 BigInteger 实例的大小计算为

```
8 + 4 + (12 + mag.length * 4) + 4 + 4 + 4 + 4  ~= 40 + mag.length * 4 
```

请参阅[http://www.javamex.com/tutorials/memory/object_memory_usage.shtml](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)。

# android - 在列表视图项目单击后将图像添加到列表视图

> ID：15301250
> 
> 赞同：0
> 
> 时间：2013-03-08T18:56:27.040
> 
> 标签：android

我正在开发一个应用程序，它有一个 listView 有 1 个 textView 显示内容和一个 imageView。我想要的是，当我单击 listView 时，我想用我拥有的刻度线图像设置 imageView。它工作正常。一旦我单击 listView，刻度标记图像就会加载到我单击的那个 listview 项目上。

当我滚动时出现问题。当我滚动时，我可以看到下面的其他一些列表视图项目加载了一个刻度线。不确定图像是如何设置在该位置的。

我在某处读到，当滚动 listView 时，视图会刷新。这是造成问题的原因吗？

任何人都可以帮助如何解决这个问题？我希望图像显示（加载）在我单击的 listView 项目上，现在是其他 listView 项目。

下面是 xml 说明 listView 项目

方法项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@android:color/white"
        android:text="This is a check box button which reacts upon the check that user clicks. I am testing it with the big string and checking how it looks" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_alignParentRight="true"
        android:layout_marginRight="34dp" />

</RelativeLayout> 
```

以下是类片段的一部分：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.method_list_main);

    final ListView list = (ListView)findViewById(R.id.listView1);

    adapter=new MethodLazyAdapter(this,ARRAY.preparationSteps,ARRAY.timeToPrepare,ARRAY.arrowValue,noOfSteps,list);
    list.setAdapter(adapter);

    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub
             RelativeLayout ll = (RelativeLayout) view;
              ImageView image = (ImageView)ll.findViewById(R.id.imageView2);

              if(tick[position]){
                  tick[position] = false;
                    image.setImageResource(0);                      
              }
              else{
                  tick[position] = true;
                      image.setImageResource(R.drawable.select_right);  
              }

            System.out.println("Position is: "+position);

        }
    });
} 
```

最初所有的 tick[i] 值都设置为 false。

下面是适配器类的getView函数

```
public View getView(final int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.method_item, null);

    TextView text = (TextView)vi.findViewById(R.id.textView1);
    text.setText(preparationSteps\[position\]);
    return vi;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:06:00.430

试试这个来得到你想要的

在公共区域添加这个变量

```
public SparseBooleanArray checked = new SparseBooleanArray(); 
```

然后在`onItemClick`

```
list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                boolean stat = checked.get(position, false);
                checked.put(position, !stat);
                adapter.setChecked();
                System.out.println("Position is: "+position);

            }
        }); 
```

在适配器类中

如果适配器不是活动中的子类，则在公共区域中添加变量

```
private SparseBooleanArray checked = new SparseBooleanArray(); 
```

并将此方法添加到类

```
public void setChecked(SparseBooleanArray ch){
    checked = ch;
   notifyDataSetChanged();
} 
```

*或者如果它的子类使用我们的`cheked`变量，我们定义了它*

然后在`getView`方法中

```
public View getView(final int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.method_item, null);

    TextView text = (TextView)vi.findViewById(R.id.textView1);
    text.setText(preparationSteps\[position\]);

    ImageView image = (ImageView)vi.findViewById(R.id.imageView2);
    if(checked.get(position, false)){
          image.setImageResource(0);                      
    }
    else{
            image.setImageResource(R.drawable.select_right);  
    }
    return vi;
} 
```

如果这对您有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:01:06.680

看看这篇文章：

[android - 使用 JSONArray 中的数据填充 ListView](https://stackoverflow.com/questions/15141963/android-populating-listview-with-data-from-jsonarray/15142417#15142417)

原因是因为您使用转换后的视图错误。按照我粘贴的帖子上的示例代码进行操作。

如果每次这个问题都会消失时你会膨胀你的行视图。但不推荐这种实现。

# ruby-on-rails - 在模型中获取 current_user 的 id

> ID：15301254
> 
> 赞同：1
> 
> 时间：2013-03-08T18:56:37.357
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord, railstutorial.org, rails-models

如果这是一个新手问题，请原谅我，但我想知道他们如何在此处的 User 模型中获得当前用户的 id：
[清单 10.39](http://ruby.railstutorial.org/chapters/user-microposts#code-proto_status_feed) 我已经尝试一遍又一遍地阅读它，但我仍然无法弄清楚:(

```
class User < ActiveRecord::Base
  .
  .
  .
  def feed
    # This is preliminary. See "Following users" for the full implementation.
    Micropost.where("user_id = ?", id)
  end
  .
  .
  .
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:02:07.160

`feed`是一个实例级别的方法，所以`self`会有用户对象。所以`id`等价于`self.id`。

例如：假设你有`user_method`模型`User`。

```
def user_method
  puts self  #prints user object
  puts self.id #prints user id
  puts id #prints user id
end

user = User.create(user_attributes)
user.user_method 
```

同样，`feed`在某个`user`对象上调用。

# mongodb - 将成员添加到 Mongo 副本集是否会锁定主/主？

> ID：15301256
> 
> 赞同：0
> 
> 时间：2013-03-08T18:56:51.457
> 
> 标签：mongodb

如果我将一个新成员添加到副本集中，这会在数据传输到这个新的辅助节点时锁定主节点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:04:32.457

排序答案 - 不。添加新成员时不会锁定主节点，否则无法轻松扩展。

# vbscript - 如何在VBScript中的文件夹中获取最近修改的一定大小的文件

> ID：15301261
> 
> 赞同：0
> 
> 时间：2013-03-08T18:57:07.213
> 
> 标签：vbscript

这是问题所在：

我有一个包含许多文本文件的文件夹。我想找到我需要解析的文件；但是，它每次都有不同的名称，所以我不能使用文件名。我所知道的是它总是 39KB（虽然每次都略有不同，所以我检查 >39000 和 <40000）。但是，文件夹中经常有几个相同大小的文件，我想选择最近修改最多的一个。

是）我有的：

```
If fNewest = "" Then
      Set fNewest = objFile
    ElseIf fNewest.DateLastModified < objFile.DateLastModified Then
      Set fNewest = objFile
    End If

    If (objFile.Size > 39000 and objFile.Size < 40000) Then
      Msgbox fNewest
    End If 
```

虽然 fNewest 返回我想要的文件的路径（最近修改的 39Kb 文件），但 Msgbox 被调用 4 次（这是该文件夹中 39Kb 文件的出现次数）。有谁知道我如何修改此代码以更正此问题，或运行此检查的更好方法？

我的终极目标是有一个如上所述的条件语句，因此 Msgbox 被替换为对获取该文件并解析它的特定函数的调用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:21:42.100

您的嵌套已关闭。应该在您迭代文件夹中文件的`MsgBox`循环之外，并且分配应该在检查文件大小的条件内。试试这个：

```
Set fso = CreateObject("Scripting.FileSystemObject")

For Each f In fso.GetFolder("...").Files
  If f.Size > 39000 and f.Size < 40000 Then
    If IsEmpty(newest) Then
      Set newest = f
    ElseIf newest.DateLastModified < f.DateLastModified Then
      Set newest = f
    End If
  End If
Next

If Not IsNull(newest) Then MsgBox newest.Name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:55:55.727

```
Dim newest, fso
Set fso = CreateObject("Scripting.FileSystemObject")

For Each f In fso.GetFolder(".").Files
  If f.Size > 39000 and f.Size < 40000 Then
    If IsEmpty(newest) Then
      Set newest = f
    ElseIf newest.DateLastModified < f.DateLastModified Then
      Set newest = f
    End If
  End If
Next

If Not IsEmpty(newest) Then MsgBox newest.Name 
```

（我只是替换`IsNull`为`IsEmpty`）

# android - 无法在 android 中添加 addView

> ID：15301271
> 
> 赞同：2
> 
> 时间：2013-03-08T18:58:03.873
> 
> 标签：android, android-graphview

我需要帮助的朋友。

这是我的活动

```
public class MainActivity extends Activity {

    float values[] = { 700, 400, 100, 500, 600 };
    float values1[] = { 70, 40, 10, 50 };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        LinearLayout lv1 = (LinearLayout) findViewById(R.id.linear);

        values = calculateData(values);
        values1 = calculateData(values1);
        MyGraphview graphview = new MyGraphview(this, values);
        graphview.setLayoutParams(new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        lv1.addView(graphview, 0);
        MyGraphview1 graphview1 = new MyGraphview1(this, values1);
        graphview1.setLayoutParams(new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        lv1.addView(graphview1, 0);

    }

    private float[] calculateData(float[] data) {
        float total = 0;
        for (int i = 0; i < data.length; i++) {
            total += data[i];
        }
        for (int i = 0; i < data.length; i++) {
            data[i] = 360 * (data[i] / total);
        }
        return data;
    }

    public class MyGraphview extends View {
        private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        private float[] value_degree;
        RectF rectf = new RectF(150, 150, 350, 350);

        float temp = 0;

        public MyGraphview(Context context, float[] values) {

            super(context);

            value_degree = new float[values.length];
            for (int i = 0; i < values.length; i++) {
                value_degree[i] = values[i];
            }
        }

        @Override
        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            Random r;
            for (int i = 0; i < value_degree.length; i++) {
                if (i == 0) {
                    r = new Random();
                    int color = Color.argb(100, r.nextInt(256), r.nextInt(256),
                            r.nextInt(256));
                    paint.setColor(color);
                    canvas.drawArc(rectf, 0, value_degree[i], true, paint);

                } else {
                    temp += value_degree[i - 1];
                    r = new Random();
                    int color = Color.argb(255, r.nextInt(256), r.nextInt(256),
                            r.nextInt(256));
                    paint.setColor(color);
                    canvas.drawArc(rectf, temp, value_degree[i], true, paint);
                }
            }
        }
    }

    public class MyGraphview1 extends View {
        private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        private float[] value_degree;
        RectF rectf = new RectF(170, 370, 330, 530);

        float temp = 0;

        public MyGraphview1(Context context, float[] values) {

            super(context);

            value_degree = new float[values.length];
            for (int i = 0; i < values.length; i++) {
                value_degree[i] = values[i];
            }
        }

        @Override
        protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);
            Random r;
            for (int i = 0; i < value_degree.length; i++) {
                if (i == 0) {
                    r = new Random();
                    int color = Color.argb(100, r.nextInt(256), r.nextInt(256),
                            r.nextInt(256));
                    paint.setColor(color);
                    canvas.drawArc(rectf, 0, value_degree[i], true, paint);

                } else {
                    temp += value_degree[i - 1];
                    r = new Random();
                    int color = Color.argb(255, r.nextInt(256), r.nextInt(256),
                            r.nextInt(256));
                    paint.setColor(color);
                    canvas.drawArc(rectf, temp, value_degree[i], true, paint);
                }
            }
        }
    }
} 
```

这是我的xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/linear"
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </LinearLayout>

</RelativeLayout> 
```

这是我的结果

![错误的输出](../Images/9697ed50359f3aa76d9a108b8f8e55bf.png)

但预期结果是

![预期产出](../Images/e09527381ccf5baea5c8498d8335ea4f.png)

我的代码朋友有什么问题。请帮我。提前致谢。

如果我删除参数，那就是

添加视图（视图）；并删除索引

```
 MyGraphview graphview = new MyGraphview(this, values);
//      graphview.setLayoutParams(new LinearLayout.LayoutParams(
//              LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        lv1.addView(graphview);
        MyGraphview1 graphview1 = new MyGraphview1(this, values1);
//      graphview1.setLayoutParams(new LinearLayout.LayoutParams(
//              LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        lv1.addView(graphview1); 
```

然后我的输出是：

![在此处输入图像描述](../Images/31c2e84e9a2fa91c5aaf3994c0aeecda.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:06:13.713

这里的问题是您将两个子视图的高度和宽度设置为线性布局值。

你应该只使用**一半的高度**来适应两者；）

**更新**

好吧，您可以使用权重，如下所示：

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
            params.weight = 1.0f;

graphview.setLayoutParams(params);
graphview1.setLayoutParams(params); 
```

或者您可以从 lv1 参数中获取高度：

```
LinearLayour.LayoutParams lvparams = lv1.getLayoutParams();
int lvHeight = lvParams.height; 
```

然后将该高度乘以 0.5 并将其用作视图布局中的高度参数，而不是 WRAP_CONTENT

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:00:19.967

您可以删除参数，这样就可以了

```
lv1.addView(graphview);
lv1.addView(graphview1); 
```

在你的情况下你不需要它。

更新：现在将每个权重添加到 1。

```
graphview.setLayoutParams(new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,1));
graphview1.setLayoutParams(new LinearLayout.LayoutParams(
              LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,1)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:32:24.610

我想您应该添加另一个线性布局并将您的 addview 添加到其中，例如...

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LinearLayout lv1 = (LinearLayout) findViewById(R.id.linear);
    LinearLayout lv2 = (LinearLayout) findViewById(R.id.linear1);
    values = calculateData(values);
    values1 = calculateData(values1);
    MyGraphview graphview = new MyGraphview(this, values);
    graphview.setLayoutParams(new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    lv1.addView(graphview, 0);
    MyGraphview1 graphview1 = new MyGraphview1(this, values1);
    graphview1.setLayoutParams(new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    lv2.addView(graphview1, 0);

} 
```

并且不要忘记在您的 xml 中添加线性布局...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T20:14:55.700

非常感谢所有试图解决我问题的朋友。我找到了以下修改的解决方案。我认为这个答案将对寻找这个问题的朋友的解决方案有所帮助。因为现在我感觉到我们老板的最后一刻压力。

首先，我的 xml 会根据 @Karan 的建议进行更改。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linear"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linear1"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </LinearLayout>

</LinearLayout> 
```

然后我重写`onMeasure`MyGraphview 和 MyGraphview1 类中的方法，将高度设置为@Merlins 建议。

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
            this.setMeasuredDimension(width, height);
        } 
```

宽度和高度是

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();
int height = display.getHeight();
height /= 2; 
```

然后改变`onCreate`方法

```
LinearLayout lv1 = (LinearLayout) findViewById(R.id.linear);
LinearLayout lv2 = (LinearLayout) findViewById(R.id.linear1);
values = calculateData(values);
values1 = calculateData(values1);

MyGraphview graphview = new MyGraphview(this, values);
MyGraphview1 graphview1 = new MyGraphview1(this, values1);

lv1.addView(graphview);
lv2.addView(graphview1); 
```

# c# - 让 PropertyGrid CollectionEditor 使用通用排序列表

> ID：15301278
> 
> 赞同：0
> 
> 时间：2013-03-08T18:58:12.780
> 
> 标签：c#, winforms, propertygrid, sortedlist, collectioneditor

我有一个仅用于数据结构的 C# 库项目；一些类使用`SortedList`这样的：

`SortedList<CustomItem1, CustomItem2> MySortedList;`

然后我有一个单独的 Windows 窗体项目，使用它`PropertyGrid`来编辑数据结构。`CollectionEditor`除了;之外，一切都非常适合编辑。添加/删除按钮被禁用。我知道我需要实现 ICollection 或 IList 的非通用版本（我在这方面找到了不同的答案） - 但这样做会破坏我的大部分代码，这些代码依赖于该 `SortedList`类型独有的一些方法.

另外，我希望我的数据结构尽可能小，并且如果可能的话，我不希望库依赖于 WinForms 中的任何内容。

任何关于如何在 CollectionEditor 中为 SortedList 激活添加/删除按钮的想法、对相关问题或帮助文章、示例等的引用将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:47:00.360

[CollectionEditor 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.design.collectioneditor.aspx)的 MSDN 文档指出：

> 此编辑器可以编辑具有 Item 属性的集合。**编辑器可以根据Item**属性确定集合的类型（ 如果存在）。如果集合没有这个属性，或者如果你想提供多个类型的集合，**你可以重写这个类的某些受保护的成员来自定义编辑器以支持其他类型的集合**。

此外，[集合编辑器示例](http://msdn.microsoft.com/en-us/library/9zky1t4k%28v=vs.100%29.aspx)文档指出：

> 如果对集合属性使用强类型 IList 实现，并且集合中的所有对象都属于同一类型，则不需要自定义集合编辑器。在这种情况下，您可以依赖内置的 CollectionEditor 作为属性编辑器，因为 CollectionEditor 从 IList 实现的 Items 属性的类型推断对象类型。您应该尽可能使用类型化集合。**但是，如果使用 ArrayList 等集合作为控件集合属性的类型，则需要自定义集合编辑器来指定集合项的对象类型**。

所以我不认为 CollectionEditor 将与您的 OrderedList 一起工作（开箱即用）。

您是否尝试过将 OrderedList 集合投影到 IList 集合中？

```
IList<CustomItem2> myList = mySortedList.Select(m => m.Value>).ToList();
// Or
IList<KeyValuePair<CustomItem1, CustomItem2>> myList = mySortedList.Select(m => m).ToList(); 
```

# linux - NFS 显示安全上下文“？” /客户端上的“空白”？

> ID：15301287
> 
> 赞同：0
> 
> 时间：2013-03-08T18:58:38.723
> 
> 标签：linux, nfs, file-sharing

我正在使用 NFSv4 并`/etc/exports`在服务器上使用以下内容（比如说，`xx.xx.xx.x0`）：

```
/var/www/html/project xx.xx.xx.x101(rw)
/var/www/html/project xx.xx.xx.x102(rw) 
```

当我检查时，每个客户都显示如下内容`mount`：

```
xx.xx.xx.x0:/var/www/html/project on /var/www/html/project type nfs (rw,vers=4,addr=xx.xx.xx.x0,clientaddr=xx.xx.xx.x101) 
```

但是当我检查安装目录`ls -laZ`（使用**Z**选项）时，它显示如下：

```
drwxrwxrwx. 11 user1   user1 ?   4.0K Mar  9 02:36 .
drwxr-xr-x. 26 user1   user1 ?   4.0K Mar  8 18:17 ..
drwxrwxrwx.  9 user1   user1 ?   4.0K Sep  3  2012 wp-admin
drwxrwxrwx.  8 user1   user1 ?   4.0K Dec 12 09:47 wp-content
drwxrwxrwx.  8 user1   user1 ?   4.0K Oct 16 12:04 wp-includes
-rwxrwxr--.  1 user1   user1 ?    647 Mar  8 18:54 .htaccess
-rwxrwxr--.  1 user1   user1 ?    395 Dec 12 09:49 index.php
-rwxrwxrwx.  1 user1   user1 ?    20K Dec 12 09:49 license.txt
-rwxrwxrwx.  1 user1   user1 ?   9.0K Dec 12 09:49 readme.html 
```

问题是`?`问号，我认为它显示了错误的文件安全上下文值。

*   请问有什么好主意吗？

*注意：SELinux 在每台机器上都被禁用。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T15:43:05.500

我自己得到它，我`SELinux`在客户端上意识到，正在阻止安全上下文权限，而 NFS 服务器完全禁用 SELinux。所以我`SELinux`在这台客户端机器上禁用并重新启动，然后在所有端都显示完全相同的文件/目录安全上下文。

# c# - 在 datagridview 中显示数据库中的单行

> ID：15301289
> 
> 赞同：0
> 
> 时间：2013-03-08T18:58:44.217
> 
> 标签：c#, sql

我只想显示`datagridview`. 这是我的查询，但它没有返回任何内容：

```
sc.Open();
cmd.CommandText = "select * from myEmployees where JobRole ='Waiter'";
dr = cmd.ExecuteReader();
if (dr.HasRows)
{
   while (dr.Read())
   {                            
        dgNames.DataSource = dr["firstName"];
        count++                      
   }         
}            
sc.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:02:37.863

您不能将 Datasource 设置为仅一个属性。您可以做的是在您的 gridview 中定义一个绑定到名字列的列，然后将 Grid 的 Datasource 设置为返回的整个对象集合。

其次，您可以简单地将 Datareader 绑定到网格，根本不需要执行 while 循环。

# 更新

```
dgNames.AutogenerateColumns=false;
dgNames.Columns.Add("firstName","firstName");
dgNames.DataSource=dr; 
```

如果您想知道返回了多少条记录，只需在绑定后计算网格中的行数......或者使用Datareader加载数据表，并将Dataable绑定到网格而不是绑定Datareader。DataTables.Rows.Count 将告诉您返回了多少条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:12:36.990

这直接来自 MSDN（谷歌'datagridview'，它就在顶部）。滚动到底部，并且有示例代码演示了如何执行您所要求的操作。 [http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)

正如 Icarus 所说——您可以只绑定数据，而无需像您尝试做的那样逐行检查它。但是，如果您确实想逐行进行，则可以

```
...
dgNames.Rows.Add(dr["firstName"]);
... 
```

此外 - 您不需要像您正在使用的那样增加处于 while 循环中的数据读取器。

# javascript - HTML5 Canvas 移动 alpha 蒙版

> ID：15301291
> 
> 赞同：7
> 
> 时间：2013-03-08T18:58:54.387
> 
> 标签：javascript, html, canvas

我有一个背景，假设它是绿草。在背景之上，我有一个黑色的覆盖层。我现在想要的是在覆盖层上制作一个可移动的孔，以便您可以看到如下图所示的背景。

![在此处输入图像描述](../Images/cba5f67b7d7abbb2f827ea765744b166.png)

我对画布很陌生，所以我不确定我应该寻找什么。阿尔法面具？

**所以我的问题是如何才能达到上图所示的效果？**

如果它是 HTML，我将有两张草的图像，一张作为背景，一张在覆盖层上方的 div 中，其边界半径可以移动并仅计算位置。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T20:12:32.853

**您是否正在寻找一种移动的“手电筒”效果？**

如果是这样，您可以通过绘制圆形路径然后将其用作剪切区域来做到这一点： context.clip();

在 .clip() 之后绘制的任何内容都将通过剪切路径查看。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/pRzxt/](http://jsfiddle.net/m1erickson/pRzxt/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        window.requestAnimFrame = (function(callback) {
          return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
          function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
        })();

        var radius=50;
        var x=100;
        var dx=10;
        var y=100;
        var dy=10;
        var delay=10;
        var img=new Image();
        img.onload=function(){
            var canvas1=document.getElementById("image");
            var ctxImg=canvas1.getContext("2d");
            ctxImg.drawImage(img,0,0,img.width,img.height,0,0,canvas.width,canvas.height);
            animate();
        }
        img.src="http://lh3.ggpht.com/_Z-i7eF_ACGI/TRxpFywLCxI/AAAAAAAAAD8/ACsxiuO_C1g/house%20vector.png";

        function animate() {
          if(--delay<0){
                    // update
                    x+=dx;
                    if(x-radius<0 || x+radius>=canvas.width){dx=-dx;}
                    y+=dy;
                    if(y-radius<0 || y+radius>=canvas.height){dy=-dy;}
                    delay=10;

                    // draw stuff
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.save();
                    ctx.beginPath();
                    ctx.arc(x,y, radius, 0, 2 * Math.PI, false);
                    ctx.clip();
                    ctx.drawImage(img,0,0,img.width,img.height,0,0,canvas.width,canvas.height);
                    ctx.restore();
          }

          // request new frame
          requestAnimFrame(function() {
            animate();
          });
        }

    }); // end $(function(){});
</script>

</head>

<body>
<p>Image clipped by moving circle</p>
<canvas id="canvas" width=300 height=200></canvas>
<br/><p>Unclipped image</p>
<canvas id="image" width=300 height=200></canvas>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:26:03.750

我为不久前正在做的一个小画布测试做了类似的事情。您可以做的是在底层顶部创建一个带有画布元素的 div，并在该顶层画布上绘制具有透明度的径向渐变。我在这里有一个小提琴：http: [//jsfiddle.net/CnEBQ/14/](http://jsfiddle.net/CnEBQ/14/)

特别看一下径向渐变的这段代码。上下文附加到顶部 div 画布：

```
var gradient = tCTX.createRadialGradient(CANVAS_SIZE.x/2, CANVAS_SIZE.y/2, 250, CANVAS_SIZE.x/2, CANVAS_SIZE.y/2, 0);  
gradient.addColorStop(0, "#000");  
gradient.addColorStop(1, "transparent");  
tCTX.fillStyle = gradient;
tCTX.fillRect(0, 0, CANVAS_SIZE.x, CANVAS_SIZE.y); 
```

那里可能有一些不好的代码，但它应该让你知道这是否是你想要去的地方。您可以根据需要在计时器或某些事件上重新绘制顶层“洞”以使其移动。您可以使用渐变设置来获得或多或少的“黑暗”。

我花了很长时间试图找到对我在这里使用的函数的良好参考，但是寻找这些函数的更多解释的一个不错的地方是 [Mozilla Canvas API](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Applying_styles_and_colors) ，其中解释了渐变函数的参数。特别有用，因为它们不是立即显而易见的。

# php - 有没有办法将 javascript 从外部 php 文件插入到主页？

> ID：15301292
> 
> 赞同：0
> 
> 时间：2013-03-08T18:59:00.347
> 
> 标签：php, mysql, sql, postback

我有一个简单的问题，也许有一个困难的解决方案。我希望有人可以帮助我。

该代码是一个回发文件，这意味着该文件将在另一个网站上完成某个操作时执行。这是我可以编辑的代码：

```
$sql = mysql_query("UPDATE thescore SET score=score+".$_GET['new'] ." WHERE user_id =' " . $_GET['uid']. " ' "); 
mysql_query("INSERT INTO postbacks (page,ip,user_id) VALUES ('".$_SERVER["REQUEST_URI"]."','".$_SERVER['REMOTE_ADDR']."','".$_GET['uid']."')"); 
```

当文件被其他站点激活时，我想在主网站上添加一个简单的警报 javascript 操作。

我希望你能帮帮我！亲切的问候，

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:04:33.977

如果我理解正确，您可以将以下内容添加到文件中以在查询后创建警报；

```
echo "<script language='javascript'>\n";
echo "  alert('Some message!');";
echo "</script>\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:32:44.757

我不确定其他网站如何调用该文件的详细信息，但如果它是 ajax 或 curl 之类的东西，例如，那么您的脚本将无法显示您想要的警报或消息。另一个网站需要有代码来接受响应，然后显示带有任何发回文本的警报。在大多数这样的情况下，另一个站点需要是警报所在的位置——尽管我认为可以对站点进行编码以执行传回给它的任何内容，但我不建议这样做（安全性）。

# knockout.js - ko.toJSON 正在创建一些不需要的copyedProperties 属性

> ID：15301293
> 
> 赞同：14
> 
> 时间：2013-03-08T18:59:05.473
> 
> 标签：knockout.js

我发现 ko.toJSON 正在创建一些不需要的东西，例如：

复制的属性销毁

```
{"test":1,"AppStart":true,"requestedDateFormat":"YYYY-MM-DD","__ko_mapping__":{"ignore":[],"include":["_destroy"],"copy":[],"observe":[],"mappedProperties":{"test":true,"AppStart":true,"requestedDateFormat":true},"copiedProperties":{}}} 
```

这些有什么意义？我可以默认删除它们吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-08T19:30:31.973

如果您使用的是[KO 映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，您应该使用插件的转换方法，例如

```
ko.mapping.toJSON 
```

和 ko.mapping.toJS

而不是内置的`ko.toJSON`and `ko.toJS`。

因为方法的映射版本将采用插件本身内部使用的附加属性。

演示[JSFiddle](http://jsfiddle.net/kevinvanlierde/UByft/13/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-08T04:59:11.593

如果您的模型是尚未完全使用映射插件创建的“混合”模型，则使用`ko.mapping.toJSON`可能不会删除`__ko_mapping__`您期望的属性。

我所说的“混合”模型是指您已将其创建为普通对象，然后使用映射插件仅将部分映射到其中。

最简单的解决方案是将以下内容添加到每个以不需要的属性结束的“类”中。无论您使用`mapping.toJSON`还是，这都会将其删除`ko.toJSON`。

```
 Product.prototype.toJSON = function()
    {
        var copy = ko.toJS(this);

        delete (copy.__ko_mapping__);

        return copy;
    } 
```

此方法在[控制如何将对象转换为 JSON](http://www.knockmeout.net/2011/04/controlling-how-object-is-converted-to.html)中进行了描述，尽管与映射插件无关。

* * *

### 例子：

这里有一些 JSON 在序列化时会出现不需要的映射（即使是`ko.mapping.toJSON`）。

我刚刚将上面的代码添加到“产品”类中（我使用的是打字稿，所以我称它们为类）。

> {"sku":"3007","total":0,"desc":"Description","qty":0,"each":null,"dirty":false,"removePending":false,"editableQty" :0,"itemUpdating":false," **__ko_mapping__** ":{"ignore":[],"include":["_destroy"],"copy":[],"observe":[],"mappedProperties":{ "sku":true,"qty":true},"copiedProperties":{}}},{"sku":"3008","total":0,"desc":"Description","qty":0 ,"每个":null,"dirty":false,"removePending":false,"editableQty":0,"itemUpdating":false," **__ko_mapping__** ":{"ignore":[],"include":["_destroy"],"copy":[],"observe":[],"mappedProperties":{"sku":true,"qty":true},"copiedProperties":{}}},

之后我得到了这个更干净的 JSON。我现在要回去了`delete(copy.removePending)`，`delete(copy.itemUpdating)`哪些只是视图模型。

> {"sku":"3007","total":0,"desc":"Description","qty":0,"each":null,"dirty":false,"removePending":false,"editableQty" :0,"itemUpdating":false},{"sku":"3008","total":0,"desc":"Description","qty":0,"each":null,"dirty":false ,"removePending":false,"editableQty":0,"itemUpdating":false},

* * *

另请注意，在`toJSON`内部调用映射版本只是调用`JSON.stringify(ko.mapping.toJS(object))`. 换句话说`ko.mapping.toJSON`，它是一个便利函数，不做自己的字符串化。

```
// from mapping source code
exports.toJSON = function (rootObject, options)
{
    var plainJavaScriptObject = exports.toJS(rootObject, options);
    return ko.utils.stringifyJson(plainJavaScriptObject);
};

// from main knockout source code for `ko.utils`
stringifyJson: function (data, replacer, space) {   // replacer and space are optional
    if (!JSON || !JSON.stringify)
        throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
    return JSON.stringify(ko.utils.unwrapObservable(data), replacer, space);
}, 
```

# macos - 在 Matlab 中写入后显示文件？

> ID：15301295
> 
> 赞同：0
> 
> 时间：2013-03-08T18:59:08.443
> 
> 标签：macos, file, matlab

是否可以显示刚刚由 Matlab 创建的 .txt 文件？基本上让它弹出并成为一个活动窗口（**不是在matlab中，而是像从文件夹中打开它一样打开文本文件**）。如果是这样，完成此操作的代码是什么？使用 MAC 操作系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:15:09.013

也许`system('notepad filename.txt')`在 Windows 和`system('open filename.txt')`Mac 上。当您使用`open`时，操作系统将自动使用您为该文件类型设置的默认应用程序。如果要在不同于默认的特定编辑器中打开它，请替换`open`为正确的命令（如果在路径上）或使用`-a`标志`open`为：

```
system('open -a /full/path/to/application filename.txt') 
```

# javascript - 一次将 jQuery Resizable 附加到 2 个表，以便调整同一列的大小

> ID：15301297
> 
> 赞同：1
> 
> 时间：2013-03-08T18:59:15.133
> 
> 标签：javascript, jquery, api, javascript-framework, resizable

如何在特定实例中应用 jQuery，其中有两个表，一个表是标题/列表，另一个表包含数据。例如，如果我要调整标题表中的列的大小，那么包含数据的另一个表中的列也会被调整大小吗？

可以这样做还是会被视为“超出范围”

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<title>Table Scroll with Fixed Header</title>
</head>
<body>

<table style="width: 300px" cellpadding="0" cellspacing="0" bgcolor="#c0c0c0">
<tr>
  <td style="width: 150px">Column 1</td>
  <td>Column 2</td>
</tr>
</table>

<div style="overflow: auto;height: 100px; width: 320px;">
  <table style="width: 300px;" cellpadding="0" cellspacing="0">
  <tr>
    <td style="width: 150px">Value 1</td>
    <td>Value 2</td>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
  </tr>
  <tr>
    <td>Value 1</td>
    <td>Value 2</td>
  </tr>
  </table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:21:30.127

这不是完整的示例，但我希望它能引导您找到解决方案。

您需要将函数绑定到*调整大小结束*事件（[jQuery API doc](http://docs.jquery.com/UI/API/1.8/Resizable#event-resize)），并且在回调中您可以获取当前项目宽度并将其应用于其他表列。

```
$( ".selector" ).bind( "resize", function(event, ui) {
   // TODO: you need to check index of the resized column and store it
   var width = $(ui).width();
   // TODO: find nth column from the other table and set it's width to be exactly same as
   // table 1
   $(".other-table-selector").width(width);
}); 
```

# java - 可以将 Matcher.group(n) 与 Java 中的 String 进行比较吗？

> ID：15301299
> 
> 赞同：0
> 
> 时间：2013-03-08T18:59:25.120
> 
> 标签：java, matcher, string-comparison

我正在尝试 ping 并将 ping 摘要列在 Matcher.group(0) 中。显示的 ping 汇总结果为：

> Matcher.group(0)

```
time=35ms
time=3ms
time=2ms
time=3ms
time=2ms
time=83ms
time=3ms
time=69ms
time=2ms
time=5ms
java.io.IOException: The pipe is being closed
BUILD SUCCESSFUL (total time: 9 seconds) 
```

我可以/我如何比较这些结果？我的意思是，我可以这样做：

```
if(m.group(0) >= "time=66ms") {
         //do something       
} else if (m.group(0) < "time=66ms") {
                 //do something
       } 
```

需要一些提示和指导，谢谢先进^^"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:08:52.707

您只需要捕获毫秒数。`time=\d+ms`在正则表达式中有类似内容的地方，请`time=(\d+)ms`改用。然后你可以`matcher.group(1)`用来获取那个字符串，并`Integer.parseInt`用来获取它作为一个int。

```
int ms = Integer.parseInt(matcher.group(1));
if (ms >= 66) {
    // do something
}
else {
    // do something else
} 
```

请注意，您不需要`else if`，只需 an`else`就可以了。如果 int is not `>= someValue`，那么它必须是`< someValue`- 您不需要检查代码中的重言式。顺便说一句，我会把这个数字 66 放在某个地方的常数中：

```
private static final int TIMEOUT_THRESHOLD = 66; // or some better name
...
int ms = Integer.parseInt(matcher.group(1));
if (ms >= TIMEOUT_THRESHOLD) ... 
```

这样，如果您需要，以后可以很容易地更改它，而无需在任何地方搜索您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:01:35.787

您可以`compare`在字符串上使用该方法：

```
if (m.group(0).compare("time=66ms") >= 0)
  // do something
} else {
  //do something
} 
```

不过，您不需要`if`在`else`分支中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:03:00.760

数据采用已知格式：“时间”后跟“=”后跟“数字”后跟“毫秒”

试试这个：

1.  解析字符串以找到毫秒值。执行此操作的一个正则表达式是“time=\d.ms”
2.  将毫秒值转换为数字。考虑这样的事情：Integer.valueOf(blam)。
3.  将 ping 的数值毫秒与某个阈值进行比较。

# sql-server-2008 - 使用子报表创建 Sql Server Reporting Service 以重复记录

> ID：15301300
> 
> 赞同：0
> 
> 时间：2013-03-08T18:59:27.363
> 
> 标签：sql-server-2008, reporting-services, ssrs-tablix, ssrs-grouping

我正在创建一个 Sql Server 报告。我想从一个数据集中选择一行以及该行下有关该行的所有详细信息。像部门名称 Dot-Net 位于标题及其下的员工详细信息。然后是 PHP 部门及其下方的所有 PHP 员工。这是示例：-

部门

点网

```
 Employee Name                    Age

    Bharat                              25
    Arvind                              28
    Deepak                              30 
```

SQL

```
 Employee Name                       AGE
        Aman                               30                                 
        Umesh                              25 
```

这只是示例。我想为五个相互链接的表创建相同的层次结构。我不知道如何显示这样的数据。我也使用子报告和列表进行报告。

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T02:41:17.060

我会使用 SQL 查询将这些表连接到一个数据集中。然后我会在部门上定义一个带有行组的表。

[http://msdn.microsoft.com/en-us/library/ms170712.aspx](http://msdn.microsoft.com/en-us/library/ms170712.aspx)

# github - 我们如何在私有 github 存储库中搜索除 master 之外的另一个分支？

> ID：15301302
> 
> 赞同：17
> 
> 时间：2013-03-08T17:18:10.847
> 
> 标签：github, search

在 github 上，当我尝试在私有存储库中搜索我的源代码时，它总是显示来自 master 分支的结果。有没有办法从另一个分支获得结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-25T17:05:15.007

如果您使用`zsh`，这里有一个衬里来做到这一点：

```
$ zipgrep 'string' =(curl -sL https://github.com/org/repo/archive/branch.zip) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-20T09:15:55.990

我终于找到了方法！

进入`settings`您的 github 存储库，然后更改您要搜索的默认分支：

![默认分支选择](../Images/12b23ad920a20bac8c5be177615cdd32.png)

现在你可以从这个分支中搜索源代码了！

# c# - 参数“T”与类型参数同名

> ID：15301303
> 
> 赞同：6
> 
> 时间：2013-03-08T18:59:36.663
> 
> 标签：c#, generics

我正在尝试编写一个接受通用输入的方法，如果输入是默认值则返回 null ，否则返回 XElement 。

顺便说一句，我对通用方法很熟悉，而且显然在 google-fu 上。

这是我到目前为止所拥有的：

```
public static class ConversionClass<T>
{
    public static XElement newXElementOrNull<T>(string name, T val)
    {
        if ((T.type == "String") && (val == String.Empty))
        {
            return null;
        }

        if (val == default(T))
        {
            return null;
        }
        else
        {
            return new XElement(name, val);
        }
    }
} 
```

出于某种原因，C# 不喜欢这样。

它拒绝方法签名（newXElementOrNull）说：

类型参数“T”与外部类型“AddXMLTest.Converter”中的类型参数同名

它突出显示尖括号中的 T 和参数中的 T。

更糟糕的是，它不喜欢 val == default(T) 部分，因为它说运算符“==”不能应用于“T”和“T”类型的操作数。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T19:02:21.093

显然这个方法在一个已经指定的类中`<T>`。这意味着您可以省略此类型参数，泛型类的方法也自动泛型。

我预计也会`T.type`导致错误，但这取决于外部类的类型约束。要获得完整答案，请发布该类的外部定义（不是所有成员）。

> 它不喜欢`val == default(T)`

这很可能是第一个的后续错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T19:03:58.177

> 类型参数“T”与外部类型“AddXMLTest.Converter”中的类型参数同名

所以这个方法之外的类（未显示）也必须使用`<T>`。你将无法做到这一点。将其命名（在方法上）类似于`<K>`.

> 更糟糕的是，它不喜欢 val == default(T) 部分，因为它说运算符“==”不能应用于“T”和“T”类型的操作数。

当您停止使用`<T>`并将其更改为类似`default(K)`.

此外，我很确定这`T.type`不会编译。我很确定评估应该是这样的：

```
if ((val is typeof(string) && string.IsNullOrEmpty(val)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:05:03.957

你不能`T.type`比你能做的更快，`String.type`或者`MyClass.type`

你正在寻找的是类似的东西

```
typeof(T) == typeof(String) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:08:08.447

有两个无效的东西是`T.type == "String" && val == String.Empty`和`val == default(T)`。关于什么：

```
public static XElement newXElementOrNull<T>( string name, T val ) {
   if ( typeof(T) == typeof(String) && val.ToString() == String.Empty ) {
      return null;
   }

   if ( EqualityComparer<T>.Default.Equals( val, default( T ) ) ) {
      return null;
   }
   else {
      return new XElement( name, val );
   }
} 
```

# java - 访问aspectj中的私有字段

> ID：15301307
> 
> 赞同：0
> 
> 时间：2013-03-08T18:59:40.983
> 
> 标签：java, aspectj, pointcut

我正在尝试获取对象的私有字段的名称。当我对我的包的公共字段使用相同的切入点时，它工作得恰到好处。我的方面设置为特权。我想要更新类对象的字段。切入点：

```
pointcut priv(Object v): target (v)&& !(call(new(..)))  && set(private * *.*) 
```

建议：

```
after(Object v): priv(v) 
```

我的切入点异常中的这一行出现异常：

```
Object dt = dts.getDeclaringType().getField(dts.getName()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:24:16.707

首先，你的切入点没有意义，因为一个`set`切入点永远不可能和一个`call`切入点相同，所以你不需要排除它。如果您打算排除构造函数中的成员分配，这就是我的假设，您需要`!cflow(execution(*.new(..)))`排除构造函数中的控制流。这只是一个示例，您可能需要更精确地指定排除标准，如果构造函数调用成员更改的方法，您可能不想排除等。

其次，我认为调用绑定目标是相当难看的`v`，我宁愿调用它`target`或者`t`，如果有的话。但是，如果您打算将值绑定到，而不是目标，则无论如何`v`都必须使用。`args(v)`

现在您的实际问题：正如 Javadoc 明确指出的那样，`getField`仅适用于公共字段。因此，如果您需要访问私有字段，请使用`getDeclaredField`.

# iphone - ios在应用程序已上传时更改标签itunesconnect

> ID：15301313
> 
> 赞同：0
> 
> 时间：2013-03-08T18:59:57.023
> 
> 标签：iphone, ios, ipad, app-store-connect

我在应用商店中已经有一个应用，但我想更改应用上的标签，但我找不到这样做的方法。你们中的任何人都知道如何做到这一点，或者我需要提交带有我想要的标签的新版本？我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:07:02.887

您需要提交新版本。一旦应用程序获得批准，它们就无法更改。

# android - 在 Android 2.2+ 中捕获日历更改

> ID：15301316
> 
> 赞同：0
> 
> 时间：2013-03-08T19:00:09.047
> 
> 标签：android

我正在开发一个显示日历事件的日历小部件。我需要捕捉用户何时从日历应用程序添加/修改/删除事件，以刷新我的小部件。我使用了带有此过滤器的广播接收器：

```
 <intent-filter>
        <action android:name="android.intent.action.PROVIDER_CHANGED" />

        <data android:scheme="content" />
        <data android:host="com.android.calendar" />
    </intent-filter> 
```

我使用 Android 4.2（使用 Nexus 4）对其进行了测试，并且工作正常。但我使用 Android 2.3.7 对其进行了测试，但无法正常工作。有什么方法可以让它在 Android 版本 >= 2.2 中工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:04:10.653

在 Android v14（冰淇淋三明治）之前，没有用于日历事件的公共 API。在此之前，每个制造商都必须提供自己的日历 API 和实现，其中一些在更改时不提供适当的广播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:31:47.820

似乎我在服务中使用 ContentObserver 解决了它。它可以按我的需要工作！:)

# java - 避免 Maven 配置文件生成重复的 jar

> ID：15301320
> 
> 赞同：0
> 
> 时间：2013-03-08T19:00:18.817
> 
> 标签：java, maven

**我是 Maven 新手，我正在尝试将 Maven 配置为生成 2 个 jar：一个用于 development ，一个用于 production**。它们之间的唯一区别是 config.properties 文件的数据库连接不同，所以我想我可以使用[Maven 配置文件](http://maven.apache.org/guides/mini/guide-building-for-different-environments.html)。

令我惊讶的**是，我无法同时生成这两个文件**。使用配置文件时，每次构建时都必须选择配置文件，并且将使用配置文件创建一个 jar（在我的情况下）。问题是它将创建 2 个完全相等的 jar，一个没有分类器，一个有分类器（**如 myjar.jar 和 myjar-prod.jar**），所以如果我想生成 dev 和 prod jar，我必须创建 4 jars（使用一个配置文件运行第一个 Maven，然后使用另一个配置文件运行）

**为什么是这样？** *对我来说没有任何意义……但是好吧……*

**我的问题是：**

**有没有办法可以避免生成这两个罐子？**我的意思是，我想拥有不同的配置文件，并且我已经接受（带着悲伤）多次执行构建过程（每个配置文件一个），**我可以避免每次都有 2 个罐子并且只有一个没有分类器吗？**

这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.p2p.</groupId>
    <artifactId>LoadACHFiles</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>MyProject</name>
    <url>http://maven.apache.org</url>
    <build>
        <finalName>${project.artifactId}</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>          
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>        
            </plugin>           
        </plugins>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <excludes>
                    <exclude>config-*.properties</exclude>          
                </excludes>
            </resource>      
        </resources>
    </build>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.jasypt</groupId>
            <artifactId>jasypt</artifactId>
            <version>1.9.0</version>
            <type>jar</type>
        </dependency>
    </dependencies>

    <profiles>
        <profile>
            <id>prod</id>
             <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>test</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>                                    
                                    <tasks>
                                        <!--<delete file="${project.build.outputDirectory}/config.properties"/>-->
                                        <copy file="src/main/resources/config-prod.properties"
                                              tofile="${project.build.outputDirectory}/config.properties"/>
                                    </tasks>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <version>2.13</version>
                        <configuration>
                            <skip>true</skip>
                        </configuration>
                    </plugin>
                    <plugin>
                        <artifactId>maven-jar-plugin</artifactId>
                        <version>2.4</version>
                        <executions>
                            <execution>
                                <phase>package</phase>
                                <goals>
                                    <goal>jar</goal>
                                </goals>
                                <configuration>
                                    <classifier>prod</classifier>
                                    <source>1.6</source>
                                    <target>1.6</target>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>        
    </profiles>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:59:17.270

如果您对分类 jar 没问题，您可以在没有配置文件的情况下做您想做的事情，因此您可以使用单个构建命令为所有环境创建 jar。关键是要了解[Maven 过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)是如何工作的。

[这是我对类似问题](https://stackoverflow.com/a/12321395/944849)提供的答案的扩展。从该设置开始。然后：

`config.properties`在您的中创建`src/main/resources`，包含您的应用程序需要的属性。

```
my.database.url=${database.url}
my.database.user=${database.user}
my.database.pw=${database.pw} 
```

现在，为每个环境创建`prod.properties`并`dev.properties`保持`${basedir}/src/main/filters`适当的值。

```
database.url=URL-for-dev
database.user=user-for-dev
database.pw=pw-for-dev 
```

运行时`mvn clean package`，Maven会复制其中的内容`/src/main/resources`，包括`config.properties`在复制过程中进行属性替换。因为资源和 jar 插件都有多次执行，Maven 将创建单独的分类 jar 文件。每个都将包含一个`config.properties`文件，其中包含环境的正确属性。过滤器不会最终出现在构建的罐子中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:43:20.183

我使它删除了配置文件部分中的 maven jar 插件。改变了这个：

```
<profile>
        <id>prod</id>
         <build>
            <plugins>
                <plugin>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <executions>
                        <execution>
                            <phase>test</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>                                    
                                <tasks>
                                    <!--<delete file="${project.build.outputDirectory}/config.properties"/>-->
                                    <copy file="src/main/resources/config-prod.properties"
                                          tofile="${project.build.outputDirectory}/config.properties"/>
                                </tasks>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>2.13</version>
                    <configuration>
                        <skip>true</skip>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-jar-plugin</artifactId>
                    <version>2.4</version>
                    <executions>
                        <execution>
                            <phase>package</phase>
                            <goals>
                                <goal>jar</goal>
                            </goals>
                            <configuration>
                                <classifier>prod</classifier>
                                <source>1.6</source>
                                <target>1.6</target>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile> 
```

为了这：

```
<profile>
        <id>prod</id>
         <build>
            <plugins>
                <plugin>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <executions>
                        <execution>
                            <phase>test</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>                                    
                                <tasks>
                                    <!--<delete file="${project.build.outputDirectory}/config.properties"/>-->
                                    <copy file="src/main/resources/config-prod.properties"
                                          tofile="${project.build.outputDirectory}/config.properties"/>
                                </tasks>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>2.13</version>
                    <configuration>
                        <skip>true</skip>
                    </configuration>
                </plugin>               
            </plugins>
        </build>
    </profile> 
```

# php - PHP 传递 HTML 字符串以创建 ZIP 存档

> ID：15301323
> 
> 赞同：1
> 
> 时间：2013-03-08T19:00:22.687
> 
> 标签：php, html, download, zip

所以我试图从 2 个字符串创建一个 Zip 文件。1是一个html字符串，另一个是纯文本。到目前为止，我似乎只是让文本字符串正常工作，但应该是 HTML 的文件只是一个空白文件。知道为什么吗？

```
$string1 = $_POST["html_string"];
$string2 = "Some data Some data Some data Some data Some data Some data";

$filename = "test.zip";
$zip = new ZipArchive();

if ($zip->open($filename, ZIPARCHIVE::CREATE)==TRUE) {

    $zip->addFromString("string1.html", $string1);
    $zip->addFromString("string2.txt", $string2);
    $zip->close();
}

header("Content-Type: application/zip"); 
header("Content-Disposition: attachment; filename=\"".$filename."\"");

//clearstatcache();

header("Content-Length: ".filesize($filename));
readfile($filename);
unlink($filename); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:52:41.067

尝试您的代码替换

```
$string1 = $_POST["html_string"]; 
```

和

```
$string1 = '<html>

<title></title>

</html>'; 
```

并工作。

你确定 $_POST["html_string"] 不为空吗？添加 var_dump($_POST); 查看是否有一些数据或更新您的代码，在开始时添加检查。

```
if (empty($_POST["html_string"]))
{

echo 'html_string is empty';
exit;
} 
```

# php - PHP中的Facebook POST HTTP curl

> ID：15301324
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:00:28.020
> 
> 标签：php, facebook, curl, http-post

通过 PHP 教自己一些 Facebook 提要发布，我试图弄清楚如何通过 PHP curl 命令执行这个 curl HTTP POST，有什么建议吗？

```
curl -X POST \
     -F 'message=Post%20with%20app%20access%20token' \
     -F 'access_token=YOUR_APP_ACCESS_TOKEN' \
     https://graph.facebook.com/4804827/feed 
```

在[这里找到](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:05:17.540

这是如何做到的：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/4804827/feed");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_POSTFIELDS, array(
    'message' => 'Post with app access token',
    'access_token' => 'YOUR_APP_ACCESS_TOKEN'
));

echo curl_exec($ch);
curl_close($ch); 
```

我建议查看文档：

[http://www.php.net/manual/en/function.curl-init.php](http://www.php.net/manual/en/function.curl-init.php)

[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

# algorithm - 没有重复的盒子堆叠

> ID：15301326
> 
> 赞同：4
> 
> 时间：2013-03-08T19:00:29.533
> 
> 标签：algorithm, dynamic-programming, np

给定一组 n 种类型的矩形 3-D 框，其中第 i^th 框的高度为 h(i)，宽度为 w(i)，深度为 d(i)（均为实数）。您想创建一个尽可能高的盒子堆叠，但如果下层盒子的 2-D 底座的尺寸都严格大于 2-D 盒子的尺寸，您只能将一个盒子堆叠在另一个盒子的顶部。上盒的 D 底座。当然，你可以旋转一个盒子，让任何一面作为它的基础。不允许在一个盒子上使用多个实例。

这个问题已在 SO（[Box stacking problem](https://stackoverflow.com/questions/2329492/box-stacking-problem)）上提出，但没有“没有重复”的限制。**我们如何使用 LIS 解决这个问题。**

我设计了以下解决方案，可以辩论吗

```
H[j] = max(H[j],max(H[i]|i<j, D[j] < D[i] , W[j]<W[i]+ H[j] -H[j'] ) 
```

> 其中 h[j'] 只不过是如果第 j 个框已经用于计算 H[i] 。由于允许旋转，H[j] 可以是第 j 个框的宽度或深度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:44:38.817

该结果最初是针对 2D 情况得出的，但仍适用于 3D 框，如最后所述。

如果最佳塔中的所有盒子都或可以与它们的长尺寸 EW 对齐，那将是很方便的。

假设一组具有最佳塔的盒子需要一些（非零）数量的盒子同时面向 EW 和 NS。旋转这样的塔，使最底部的盒子与 EW 对齐。现在考虑最低的框 i，它是对齐的 NS。显然盒子 i 的长尺寸小于它的支持盒子 i-1 的最小尺寸；所以盒子 i 的长尺寸小于盒子 i-1 的长尺寸。

同样，由于框 i 的短维度小于框 i 的长维度，通过传递性我们知道框 i 的短维度小于框 i-1 的短维度。因此，从盒子 i 向上的整个子塔可以旋转 90 度以对齐盒子 i EW。

重复当我们登上塔时，很明显所有盒子都可以在任何最佳塔中 EW 对齐。

因此，每个盒子在最佳塔中只有这些可能的“方向”：

*   **高度**定向：最长垂直尺寸，第二长定向 EW；
*   面向**长度**：最长尺寸 EW，第二长尺寸垂直；
*   面向**宽度**：最长尺寸 EW，第二长尺寸面向 NS；
*   缺席的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T20:55:04.963

[您可以在您提供的链接](https://stackoverflow.com/questions/2329492/box-stacking-problem)中使用 DP 解决方案，并通过在每个位置设置一个大小为 n 的位图来摆脱“无重复”约束。

这听起来确实像您计划的解决方案，但我并没有完全遵循您的公式或代码。

每个框的索引在它的 3 次旋转之间是通用的，并且设置了位图中用于框索引的位以确保不会处理同一框的下一次旋转。

```
for i = 1:n  
  Box b = input[i]  
  (h[3i] , w[3i] , d[3i] ) = getRotation1(b)  
  (h[3i+1], w[3i+1], d[3i+1]) = getRotation2(b)  
  (h[3i+2], w[3i+2], d[3i+2]) = getRotation3(b)  
  index[3i] = index[3i+1] = index[3i+2] = i

// sort the 4 fields simultaneously (h[i], w[i], d[i], index[i] all belong to the same box)
// (easy to do in OOP by storing these 4 in the same object)
sortByAreaDesc(h, w, d, index)

H[0] = 0
bitmap[0] = {false}

for j = 1:3n
  H[j] = max[i < j, wi > wj, di > dj] { if (bitmap[j][ index[i] ]) 0 else H[i] } + h[j]  
  bitmap[j] = bitmap[i from max]
  bitmap[j][ index[i from max] ] = true

return max[j] H[j] 
```

花费O(n ² ) 时间和空间。

# c# - 如何初始化列表 模拟对象中的属性？

> ID：15301328
> 
> 赞同：1
> 
> 时间：2013-03-08T19:00:30.423
> 
> 标签：c#, unit-testing, moq

我的`[TestInitialize]`块中有以下代码，并试图初始化`List<T>`我的对象的属性。

```
[TestClass]
public class MyTest
{
    private MyClass myClass;
    private Mock<myClassA> mockMyClassA;
    private List<Mock<myClassB>> mockMyClassB; //OK

    [TestInitialize]
    public void Setup()
    {
        mockMyClassA = new Mock<myClassA>();
        mockMyClassB = new List<Mock<myClassB>>(); //OK

        myClass = new MyClass
        {
            MyClassA = mockMyClassA.Object,
            MyClassB = mockBenefitsCoordination //None of this works
            {
                new Mock<mockMyClassB>()
                    {
                        //PropertyValue = mock??                            
                    }                    
            }
        } 
```

我得到的错误是：

```
Cannot convert source type 'System.Collections.Genric.List<Moq.Mock<MyClassB>>' to target type 'System.Collections.Generic.IList<MyClassB>>' 
```

好的，我看到`List<T> to IList<T>`了问题。`MyClassB`是一个`IList<T>`。我试过改变它没有成功。基本上，我认为我拥有使用 Moq 配置 List 属性的完整语法。有谁知道如何正确配置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:10:54.427

You don't want to initialize the list with the mock. You want to do the list initialization with the concrete object and add the mocked objects to that list.

Something like

```
private List<myClassB> myClassBList;
myClassBList.Add(new Mock<myClassB>.Object); 
```

# c++ - 复制构造函数和赋值运算符问题

> ID：15301329
> 
> 赞同：0
> 
> 时间：2013-03-08T19:00:30.557
> 
> 标签：c++, linked-list, copy-constructor, assignment-operator

我正在为仅存储 1 位的度数的家庭作业创建一个二进制链表。我可以获得最高程度，在二进制列表中的任何位置设置位，并返回哪个位出现在特定程度，但由于某种原因，我在创建复制构造函数和赋值 (=) 运算符时遇到了最大的麻烦。这是我的代码：

```
// copy constructor
// creates a new linked list where the contents are a deep copy of the provided list
Binary::Binary(const Binary &b)
{
    Binary clone;
    for(BinaryNode* current_other = b.firstTerm; current_other != nullptr; current_other = current_other->next) 
    {
        clone.set_bit(1, current_other->degree); 
    }
}

// assignment operator
// sets the current link list to be a deep copy of the provided list.
// make sure to check if assigning to itself, and make sure to free old memory
// before making the copy.
Binary& Binary::operator=(const Binary &other)
{
    Binary clone;
    for(BinaryNode* current_other = other.firstTerm; current_other != nullptr; current_other = current_other->next) 
    {
        clone.set_bit(1, current_other->degree); 
    }
    return clone;
} 
```

我的逻辑在这些方面有问题吗？有人请帮忙！

PS 我已经测试了我的 set_bit(b,d) 和其他方法这么多，我知道这些是唯一搞砸的，因为当我尝试“Binary b3(b2)”或“Binary b3 = b2”时，程序停在那一点并说“分配1.exe中0x00DC4B18处的未处理异常：0xC0000005：访问冲突读取位置0xCCCCCCD0”。

编辑：我也有一个默认构造函数： Binary() {firstTerm = nullptr;}

编辑编辑：

输出：

```
 TESTING DEFAULT CONSTRUCTOR
    The binary number b1 is empty.

    TESTING GET AND SET METHODS
    The highest bit of binary number b1 is 5.
    The bit of binary number b1 at degree 5 is 1.
    The bit of binary number b1 at degree 2 is 0.
    The bit of binary number b1 at degree 1 is 0.

    TESTING PARAMETER CONSTRUCTOR
    The bit of binary number b1 at degree 2 is 1.
    The bit of binary number b1 at degree 0 is 1.
    The bit of binary number b1 at degree 1 is 0.

    TESTING COPY CONSTRUCTOR
    B2 = 101
    B3 = _

Unhandled exception at 0x00C04B18 in Assignment 1.exe: 0xC0000005: Access violation reading location 0xCCCCCCD0. 
```

测试代码：

```
#include <iostream>
#include "binary.h"

using namespace std;

int main (void)
{
    // test default constructor
    Binary b1;
    cout << "TESTING DEFAULT CONSTRUCTOR" << endl;
    if (b1.get_degree() == -1)
        cout << "\tThe binary number b1 is empty." << endl;
    else
        cout << "\tThe binary number b1 is NOT empty. (INCORRECT)" << endl;

    // test get_bit, set_bit, and get_degree
    cout << "\nTESTING GET AND SET METHODS" << endl;
    b1.set_bit(1, 2);
    b1.set_bit(1, 5);
    b1.set_bit(1, 0);
    b1.set_bit(0, 2);
    if (b1.get_degree() == 5)
        cout << "\tThe highest bit of binary number b1 is 5." << endl;
    else
        cout << "\tThe highest bit of binary number b1 is NOT 5\. (INCORRECT)" << endl;
    if (b1.get_bit(5) == 1)
        cout << "\tThe bit of binary number b1 at degree 5 is 1." << endl;
    else
        cout << "\tThe bit of binary number b1 at degree 5 is 0\. (INCORRECT)" << endl;
    if (b1.get_bit(2) == 0)
        cout << "\tThe bit of binary number b1 at degree 2 is 0." << endl;
    else
        cout << "\tThe bit of binary number b1 at degree 2 is 1\. (INCORRECT)" << endl;
    if (b1.get_bit(1) == 0)
        cout << "\tThe bit of binary number b1 at degree 1 is 0." << endl;
    else
        cout << "\tThe bit of binary number b1 at degree 1 is 1\. (INCORRECT)" << endl;

    // test parameter constructor
    cout << "\nTESTING PARAMETER CONSTRUCTOR" << endl;
    Binary b2(5);

    if (b2.get_bit(2) == 1)
        cout << "\tThe bit of binary number b2 at degree 2 is 1." << endl;
    else
        cout << "\tThe bit of binary number b2 at degree 2 is 0\. (INCORRECT)" << endl;
    if (b2.get_bit(0) == 1)
        cout << "\tThe bit of binary number b2 at degree 0 is 1." << endl;
    else
        cout << "\tThe bit of binary number b2 at degree 0 is 0\. (INCORRECT)" << endl;
    if (b2.get_bit(1) == 0)
        cout << "\tThe bit of binary number b2 at degree 1 is 0." << endl;
    else
        cout << "\tThe bit of binary number b2 at degree 1 is 1\. (INCORRECT)" << endl;

    // test copy constructor
    cout << "\nTESTING COPY CONSTRUCTOR" << endl;
    cout << "B2= " << b2 << endl;
    b2.set_bit(1,1);
    Binary b3(b2);
    cout << "B3= " << b3 << endl;
    b2.set_bit(1, 1);
    cout << "B2= " << b2 << endl;
    cout << "B3= " << b3 << endl;
    if (b3.get_bit(2) == 1)
        cout << "\tThe bit of binary number b3 at degree 2 is 1." << endl;
    else
        cout << "\tThe bit of binary number b3 at degree 2 is 0\. (INCORRECT)" << endl;
    if (b3.get_bit(0) == 1)
        cout << "\tThe bit of binary number b3 at degree 0 is 1." << endl;
    else
        cout << "\tThe bit of binary number b3 at degree 0 is 0\. (INCORRECT)" << endl;
    if (b3.get_bit(1) == 0)
        cout << "\tThe bit of binary number b3 at degree 1 is 0." << endl;
    else
        cout << "\tThe bit of binary number b3 at degree 1 is 1\. (INCORRECT)" << endl;

    // test assignment operator
    cout << "\nTESTING ASSIGNMENT OPERATOR" << endl;
    b2 = b3;
    b3.set_bit(1, 1);

    if (b2.get_bit(2) == 1)
        cout << "\tThe bit of binary number b2 at degree 2 is 1." << endl;
    else
        cout << "\tThe bit of binary number b2 at degree 2 is 0\. (INCORRECT)" << endl;
    if (b2.get_bit(0) == 1)
        cout << "\tThe bit of binary number b2 at degree 0 is 1." << endl;
    else
        cout << "\tThe bit of binary number b2 at degree 0 is 0\. (INCORRECT)" << endl;
    if (b2.get_bit(1) == 0)
        cout << "\tThe bit of binary number b2 at degree 1 is 0." << endl;
    else
        cout << "\tThe bit of binary number b2 at degree 1 is 1\. (INCORRECT)" << endl;

    // test convert
    cout << "\nTESTING CONVERT METHOD" << endl;
    if (b1.convert() == 33)
        cout << "\tThe decimal value of binary number b1 is 33." << endl;
    else
        cout << "\tThe decimal value of binary number b1 is NOT 33\. (INCORRECT)" << endl;

    // test output operator
    cout << "\nTESTING OUTPUT OPERATOR" << endl;
    cout << "\tThe binary number b1 is " << b1 << endl;
    cout << "\tThe number b1 should be 100001" << endl;

    // test addition
    cout << "\nTESTING ADDITION OPERATOR" << endl;
    Binary b4 = b2 + b3;

    if (b4.convert() == 12)
        cout << "\t101 + 111 = 1100." << endl;
    else
        cout << "\t101 + 111 != 1100\. (INCORRECT)" << endl;

    // test subtraction
    cout << "\nTESTING SUBTRACTION OPERATOR" << endl;
    Binary b5(b1 - b2);

    if (b5.convert() == 28)
        cout << "\t100001 - 101 = 11100." << endl;
    else
        cout << "\t100001 - 101 != 11100\. (INCORRECT)" << endl;

    // test multiplication
    cout << "\nTESTING MULTIPLICATION OPERATOR" << endl;
    Binary b6 = b3 * b2;

    if (b6.convert() == 35)
        cout << "\t111 * 101 = 100011." << endl;
    else
        cout << "\t111 * 101 != 100011\. (INCORRECT)" << endl;

    system("pause");
} 
```

二进制.h：

```
#ifndef _BINARY_H_
#define _BINARY_H_

#include <iostream>

class Binary {
private:
    struct BinaryNode {
        int degree;
        BinaryNode* next;
        BinaryNode(int d, BinaryNode* n): degree(d),next(n) {}
    };
    BinaryNode *firstTerm;

public:
    // default constructor
    Binary() {firstTerm = nullptr;}

    // constructor
    // takes a value representing a decimal number and creates
    // the binary linked list representation of it.
    Binary(int x);

    // sets the term with degree d and bit b
    // notice a node is created if bit is 1 AND a node 
    // for that degree doesn't exist, or the node is removed
    // if the bit is 0 AND the node with that degree already exists
    void set_bit(int b, int d);

    // returns one if a term with degree d exists, zero otherwise
    int get_bit(int d) const;

    // returns the decimal integer representation of the binary number.
    int convert() const ;

    // returns the highest degree of any term in the binary number
    // returns -1 if the the list is empty.
    int get_degree() const;

    // destructor
    // make sure that all memory is returned (freed up) correctly
    ~Binary();

    // copy constructor
    // creates a new linked list where the contents are a deep copy of the provided list
    Binary(const Binary &b);

    // assignment operator
    // sets the current link list to be a deep copy of the provided list.
    // make sure to check if assigning to itself, and make sure to free old memory
    // before making the copy.
    Binary& operator=(const Binary &other);

    // prints the binary number to the output stream o
    // please use like:     10001101
    // terms must be printed in descending order of degree
    friend std::ostream& operator<<(std::ostream &o, const Binary &b);

    // returns a new binary number representing the addition of 2 provided binary numbers.
    // do NOT simply convert the numbers to decimal using convert(),add them,
    // then convert back to binary.
    friend Binary operator+(const Binary &b1, const Binary &b2);

    // returns a new binary number representing the subtraction 
    // of 2 provided binary numbers. can assume b1 will always be
    // larger than b2.
    // do NOT simply convert the numbers to decimal using convert(),subtract them,
    // then convert back to binary.
    friend Binary operator-(const Binary &b1, const Binary &b2);

    // returns a new binary number representing the multiplication
    // of 2 provided binary numbers.
    // do NOT simply convert the numbers to decimal using convert(),multiply them,
    // then convert back to binary.
    friend Binary operator*(const Binary &b1, const Binary &b2);

};

std::ostream& operator<<(std::ostream &o, const Binary &b);

Binary operator+(const Binary &b1, const Binary &b2);
Binary operator-(const Binary &b1, const Binary &b2);
Binary operator*(const Binary &b1, const Binary &b2);

#endif 
```

二进制.cpp：

```
#include "binary.h"
using namespace std;

// constructor
// takes a value representing a decimal number and creates
// the binary linked list representation of it.
Binary::Binary(int x)
{
    firstTerm = nullptr;
    int deg = 0; 
    int n = x;
    while (n != 0)
    {
        set_bit(n%2, deg);
        n = n/2;
        ++deg;
    }
}

// sets the term with degree d and bit b
// notice a node is created if bit is 1 AND a node 
// for that degree doesn't exist, or the node is removed
// if the bit is 0 AND the node with that degree already exists
void Binary::set_bit(int b, int d)
{
    if (b == 1)
    {
        if (firstTerm == nullptr || d == 0)
            {
                firstTerm = new BinaryNode(d, firstTerm);
            }

        else
            {
                BinaryNode *current, *prev = firstTerm;
                for(current = firstTerm; current != nullptr; current = current->next)
                {
                    if (current->next == nullptr)
                    {
                        current->next = new BinaryNode(d, nullptr);
                        break;
                    }
                    else if (current->degree == d)
                    {
                        prev->next = new BinaryNode (d, current->next);
                        delete current;
                        break;
                    }
                    else if(current->degree > d)
                    {
                        prev->next = new BinaryNode (d, current);
                        break;
                    }
                    prev = current;
                }
            }
    }
    else
    {
        BinaryNode *current, *prev = firstTerm;
        for(current = firstTerm; current != nullptr; current = current->next)
        {
            if (current->degree == d)
            {
                prev->next = current->next;
                delete current;
                break;
            }
            prev = current;
        }
    }
}

// returns one if a term with degree d exists, zero otherwise
int Binary::get_bit(int d) const
{
    for (BinaryNode *current = firstTerm; current != nullptr; current = current->next)
    {
        if (current == nullptr)
            break;
        if (current->degree == d)
            return 1;
    }
    return 0;
}

// returns the decimal integer representation of the binary number.
int Binary::convert() const
{
    int sum = 0;
    for (BinaryNode* current = firstTerm; current != nullptr; current = current->next)
    {
        sum = sum + (int)pow(2,current->degree);
    }
    return sum;
}

// returns the highest degree of any term in the binary number
// returns -1 if the the list is empty.
int Binary::get_degree() const
{
    if (firstTerm == nullptr)
        {return -1;}
    else
    {
        BinaryNode *current;
        for (current = firstTerm; current->next != nullptr; current = current->next);

        return current->degree;
    }
}

// destructor
// make sure that all memory is returned (freed up) correctly
Binary::~Binary()
{
    BinaryNode* tmp;
    for(BinaryNode* current = firstTerm; current != nullptr; current = tmp) 
    {
            tmp = current->next;
            delete current;
    }
}

// copy constructor
// creates a new linked list where the contents are a deep copy of the provided list
Binary::Binary(const Binary &b)
{
    for(BinaryNode* current_other = b.firstTerm; current_other != nullptr; current_other = current_other->next) 
    {
        set_bit(1, current_other->degree); 
    }
}

// assignment operator
// sets the current link list to be a deep copy of the provided list.
// make sure to check if assigning to itself, and make sure to free old memory
// before making the copy.
Binary& Binary::operator=(const Binary &other)
{
    Binary clone;
    for(BinaryNode* current_other = other.firstTerm; current_other != nullptr; current_other = current_other->next) 
    {
        clone.set_bit(1, current_other->degree); 
    }
    return clone;
}

// prints the binary number to the output stream o
// please use like:     10001101
// terms must be printed in descending order of degree
std::ostream& operator<<(std::ostream &o, const Binary &b)
{
    for(int i = b.get_degree(); i >= 0; --i) 
    {
        o << b.get_bit(i);
    }
    return o;
}

// returns a new binary number representing the addition of 2 provided binary numbers.
// do NOT simply convert the numbers to decimal using convert(),add them,
// then convert back to binary.
Binary operator+(const Binary &b1, const Binary &b2)
{
    int l = b1.get_degree();
    if (b1.get_degree() < b2.get_degree())
    {
        l = b2.get_degree();
    }
    int i, c = 0;
    Binary sum;
    for (i = 0; i <= l; ++i)
    {
        sum.set_bit(((b1.get_bit(i) ^ b2.get_bit(i)) ^ c), i); //get sum (A XOR B XOR C)
        c = ((b1.get_bit(i) & b2.get_bit(i)) | (b1.get_bit(i) &c)) | (b2.get_bit(i) & c); //get carry bit (AB + BC + CA)
    }
    sum.set_bit(c, i);
    return sum;
}

// returns a new binary number representing the subtraction 
// of 2 provided binary numbers. can assume b1 will always be
// larger than b2.
// do NOT simply convert the numbers to decimal using convert(),subtract them,
// then convert back to binary.
Binary operator-(const Binary &b1, const Binary &b2)
{
    Binary one = Binary(1);
    Binary inv, two, result, fresult;
    int i, l = b2.get_degree() + 1;
    for(i = 0; i <= l; ++i)
    {
        if (b2.get_bit(i) == 1)
            inv.set_bit(0,i);
        else
            inv.set_bit(1,i);
    }
    two = inv + one;
    result = two + b1;
    if (b1.get_degree() > l)
    {
        l = b1.get_degree();
    }
    for (l; l >= 0; l--)
    {
        fresult.set_bit(result.get_bit(l), l);
    }
    return (fresult);
}

// returns a new binary number representing the multiplication
// of 2 provided binary numbers.
// do NOT simply convert the numbers to decimal using convert(),multiply them,
// then convert back to binary.
Binary operator*(const Binary &b1, const Binary &b2)
{
    Binary prod = b1;
    for (int i = 1; i < b2.convert(); ++i)
    {
        prod = prod + b1;
    }
    return prod;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:04:08.093

```
Binary::Binary(const Binary &b)
{
    Binary clone;
    for(BinaryNode* current_other = b.firstTerm; current_other != nullptr; current_other = current_other->next) 
    {
        clone.set_bit(1, current_other->degree); 
    }
} 
```

您创建一个名为 的对象`clone`，设置其位，然后将其丢弃。这似乎不对。也许你的意思是：

```
Binary::Binary(const Binary &b)
{
    for(BinaryNode* current_other = b.firstTerm; current_other != nullptr; current_other = current_other->next) 
    {
        set_bit(1, current_other->degree); 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T10:05:31.443

我想通了，谢谢大家的帮助。我发现了我的问题。正如有人指出的那样，在复制构造函数中，我相信我还没有声明 firstTerm ，因为我必须在其他构造函数中声明。最终代码最终为：

```
Binary::Binary(const Binary &b)
{
    firstTerm = nullptr; //construct firstTerm
    for(BinaryNode* current_other = b.firstTerm; current_other != nullptr; current_other = current_other->next) 
    //set a node pointer = to b's firstTerm then go through b's list, setting each bit and degree to the new list
    {
        set_bit(1, current_other->degree); //only 1 bits exist in this list, so you'll only set one bits at each degree
    }   
} 
```

在赋值运算符中，如果需要，我并没有首先破坏当前列表，或者确保它没有复制到自身。另外，我把 & 放在了错误的地方。最终代码最终为：

```
Binary &Binary::operator=(const Binary &other)
{
    if(this != &other) //make sure it isn't copying to itself
    {
        if (this->get_degree() != -1) //if the Binary list isn't empty, destruct it
        {
            this->~Binary();
        }
        firstTerm = nullptr; //construct firstTerm
        for(BinaryNode* current_other = other.firstTerm; current_other != nullptr; current_other = current_other->next) 
        //set a node pointer = to other's firstTerm then go through other's list, setting each bit and degree to the new list
        {
            set_bit(1, current_other->degree); //only 1 bits exist in this list, so you'll only set one bits at each degree
        }   

        return *this;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:05:34.180

一旦你定义了一个构造函数，编译器就不会为你生成一个默认的构造函数，这意味着`Binary clone;`如果你没有定义一个`Binary::Binary()`构造函数你就不能这样做。

# ruby-on-rails - 缺少图像文件时出现内部服务器错误 500 (Rails 3.2.12)

> ID：15301335
> 
> 赞同：6
> 
> 时间：2013-03-08T19:00:55.913
> 
> 标签：ruby-on-rails, actionview

如果我们请求伪造的图像文件，Rails 会生成内部 500 服务器错误而不是 404。请参阅下面的日志。

这是**routes.rb**中捕获 404 的行：

```
# Catches all 404 errors and redirects
match '*url' => 'default#error_404' 
```

其他未知 URL 使用 404 正确处理。图像文件和带有文件扩展名的 URL 有什么不同？

```
Started GET "/images/doesnotexistyo.png" for 71.198.44.101 at 2013-03-08 07:59:24 +0300
Processing by DefaultController#error_404 as PNG
  Parameters: {"url"=>"images/doesnotexistyo"}
Completed 500 Internal Server Error in 1ms

ActionView::MissingTemplate (Missing template default/error_404, application/error_404 with {:locale=>[:en], :formats=>[:png], :handlers=>[:erb, :builder]}. Searched in:
  * "/home/prod/Prod/app/views" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:59:36.653

问题是控制器`error_404`内部的方法`Default`无法处理 png 格式的请求。当您要求 JSON 响应时，您可以构建一个类似于以下内容的 URL：

```
/controller/action.json 
```

在动作里面你会有类似的东西

```
def action
  respond_to do |format|
    format.html # Renders the default view
    format.json { render :json => @model }
    format.xml { render :xml => @model }
  end
end 
```

如您所见，它指定了如何处理 JSON 和 XML 请求，但是由于没有`format.png`，因此该操作无法处理`.png`格式。添加这个：

```
format.png # Handle the request here... 
```

希望能帮助到你 ：）

**编辑**

添加此重定向到您的 404 处理程序：

```
def error_404
  respond_to do |format|
    format.html
    format.png { redirect_to :controller => 'default', :action => 'error_404' }
  end
end 
```

干杯:)

**编辑2**

使用此代码捕获各种请求：

```
def error_404
  respond_to do |format|
    format.html { render :not_found_view }
    format.all { redirect_to controller: 'default', action: 'error_404' }
  end
end 
```

替换`:not_found_view`为您的 404 页面。这将为 html 请求呈现 404 页面，并为任何其他类型的请求重定向到 self（使用 html 格式）。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:43:01.677

是什么`DefaultController`？该控制器正在处理 404，而不是 Rails 的默认响应：

```
ActionController::RoutingError (No route matches [GET] "/images/doesnotexistyo.png"): 
```

所以找出这个控制器，error_404 正在执行，没有找到模板 default/error_404，因此出现 500 错误。

您可能在代码中的某处有类似的代码：

```
rescue_from ActiveRecord::RecordNotFound, :with => :error_404 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T23:23:47.163

也许不适合你，但由于我在控制器中动态地对页面进行了一些最终检查，所以我只需按照我的所有 404'ing 来处理非 html 文件：

```
format.all { render :status => 404, :nothing => true } 
```

# java - 解释为什么这段代码不起作用

> ID：15301347
> 
> 赞同：1
> 
> 时间：2013-03-08T19:01:14.587
> 
> 标签：java

我有两个相互引用的类：

```
class B{
  A obj;
  B(A obj){
    this.obj=obj;
  }
  void display(){
    System.out.println(obj.data);//using data member of A class
  }
}

class A{
  int data=10;

  A(){
   B b =new B(new A());  //  THIS LINE GENERATES AN ERROR
   b.display();
  }
  public static void main(String args[]){
   A a=new A();
  }
} 
```

如果我将违规行改为阅读

```
 B b =new B(this); 
```

然后它工作。我认为这两条线做同样的事情。为什么一个有效而另一个无效？

此外，第一个版本的编译器错误读取

```
A.<init><A.java:15> 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T19:02:55.443

通过`new A()`在内部调用，`A()`您会产生一个调用构造函数的无限循环。这是错误。

我将更详细地向您解释：当您传入`this`构造`new B(...)`函数时，您传递的是对您当前所在构造函数的类的新构造对象的*引用*`A`。这没关系，因为除了构造一个新的`B`.

当您将其替换为 时`new A()`，您必须首先生成一个新的类实例`A`。这还不是问题。问题是，当您进入 constructor 时`A() { ... }`，一切都重新开始：您将到达该行`B b =new B(new A());`并再次调用`A`构造函数，该构造函数将再次回到该行，直到您收到一个`StackOverflowError`.

# javascript - 如何在 Windows 8 上运行 Meteor？

> ID：15301350
> 
> 赞同：8
> 
> 时间：2013-03-08T19:01:30.383
> 
> 标签：javascript, windows-8, meteor

我已经按照说明安装了 Meteor Js，但它仍然无法正常工作。它将创建一个应用程序，但不会运行它。它总是说：你不在 Meteor 项目目录中！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T14:11:55.080

我刚刚在 Windows 8 上成功安装了 Meteor，并用它开发了我的第一个应用程序。

首先你去[http://win.meteor.com/](http://win.meteor.com/) 第二你做那里写的。

不要忘记重新启动并将 node.exe 设置为 Windows 7 兼容性。

之后你打开 cmd.exe

> 流星创建样本
> 
> 光盘样本
> 
> 流星

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T10:30:06.903

然后找到你的 myapp 文件夹。只需在您的计算机上搜索它并使用该目录位置即可。

对我来说，它是“cd users/myname/myapp”

然后我可以简单地“流星运行 myapp”，我很好。

# javascript - 如何使用 jquery 突出显示选定的列表项？

> ID：15301356
> 
> 赞同：8
> 
> 时间：2013-03-08T19:01:43.040
> 
> 标签：javascript, jquery, dom-manipulation

我在列表中有几个项目，并希望通过应用一些 CSS 样式（可能是背景颜色等）来突出显示用户单击的项目。

我的 HTML 如下所示：

```
<ul class="thumbnails">
    <li>
        <a href="#" class="thumbnail">
            <img class="giftthumb" src='thumb1.jpg' alt="">
            <span class="gifttitle">Thumb1</span>
        </a>    
    </li>
    <li>
        <a href="#" class="thumbnail">
            <img class="giftthumb" src='thumb2.jpg' alt="">
            <span class="gifttitle">Thumb3</span>
        </a>    
    </li>
    <li>
        <a href="#" class="thumbnail">
            <img class="giftthumb" src='thumb3.jpg' alt="">
            <span class="gifttitle">Thumb3</span>
        </a>    
    </li>
</ul> 
```

jQuery 检索所选项目：

```
$('.thumbnail').click(function(e) {
    e.preventDefault();

    ???

}) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T19:05:36.783

您可以使用 jQuery 的[类管理方法](http://api.jquery.com/category/manipulation/class-attribute/)（即在本例中）在所选项目上添加一个类，并从所有其他项目中删除相同的类（如果您一次只选择一个）`addClass()`。`removeClass()`

```
//save class name so it can be reused easily
//if I want to change it, I have to change it one place
var classHighlight = 'highlight'; 

//.click() will return the result of $('.thumbnail')
//I save it for future reference so I don't have to query the DOM again
var $thumbs = $('.thumbnail').click(function(e) {
    e.preventDefault();
    //run removeClass on every element
    //if the elements are not static, you might want to rerun $('.thumbnail')
    //instead of the saved $thumbs
    $thumbs.removeClass(classHighlight);
    //add the class to the currently clicked element (this)
    $(this).addClass(classHighlight);
}); 
```

然后在你的 CSS 中添加：

```
.highlight {
    background-color: cyan;
    font-weight: bold;
} 
```

[jsFiddle 演示](http://jsfiddle.net/dtzjN/)

这是比直接从 jQuery/Javascript 更改 CSS 属性（`.css()`例如使用方法）更好的解决方案，因为关注点分离将使您的代码更易于管理和可读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:03:08.053

```
$('.thumbnail').click(function(e) {
    e.preventDefault();
    $(this).css('background-color', 'red');
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:04:02.090

您的 ？？？将会：

```
$('.thumbnail').removeClass('selected');
$(this).addClass('selected'); 
```

然后你所要做的就是定义你的'selected' css 类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-26T01:36:04.233

如果您**不需要*****活动***的**持久性**，这是一种 CSS 方式：

```
li:focus{
  background: red;
}
li:active{
  background: gold;
}
```

```
<ul>
  <li tabindex="1">Item 1</li>
  <li tabindex="1">Item 2</li>
  <li tabindex="1">Item 3</li>
</ul>

Now click <b>here</b> and see why it's not persistent.
```

在某些情况下，上述内容可能很有用 - 仅突出显示当前的“点击活动”项目......

# javascript - Safari 错误：当使用 JS 删除项目时，first-child 不更新 display:block

> ID：15301357
> 
> 赞同：2
> 
> 时间：2013-03-08T19:01:47.553
> 
> 标签：javascript, css, css-selectors, safari

使用默认隐藏所有项目的列表，第一个`li`具有`display`. `block`问题是如果第一个元素被删除，这将不会更新，实际上是创建一个应该显示的新的第一个子元素。在 Safari 中`li`，不显示应该显示的新内容。

HTML

```
<ul class="list">
  <li class="item">1</li>
  <li class="item">2</li>
  <li class="item">3</li>
</ul>
<button>click me </button> 
```

CSS

```
.list .item { display: none } 
.list .item:first-child { display:block} 
```

JS

```
$('button').on('click', function(e) {
  $('ul li:first').remove().appendTo($('ul'));
}); 
```

见小提琴：http: [//jsfiddle.net/BFTan/1/](http://jsfiddle.net/BFTan/1/)

在所有其他浏览器中，单击该按钮将循环浏览项目，但在 Safari 中没有任何更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:46:42.177

这似乎是`display: none`从文档树中删除的对象的问题，当您使用时，它会表现出来`:first-child`，而不是 Safari 处理`:first-child`选择器本身的固有问题。

无论哪种方式，这绝对是一个错误。即使您将对象（及其内容）与其父级分离，jQuery 也不会破坏该对象，但是当从其父级分离一个元素时，无论 n 的值如何，它都不应再是其父级的第 n 个子级，因此下一个元素那成为第一个孩子应该`:first-child`相应地匹配。

如果您`:first-child`将代码更改为`:not(:last-child)`，像[这样](http://jsfiddle.net/BoltClock/BFTan/3)，这样您一次显示两个元素，当您单击按钮时，您会在 Safari 中注意到第一个元素消失，而第二个元素保持不变（以及第三个元素）仍然隐藏）。

我还发现，如果您使用`:empty`列表本身的选择器添加新的空规则：

```
/* Or even .list:empty even though it's not actually empty */
.list:not(:empty) {} 
```

一切都会突然在 Safari 中[正常工作。](http://jsfiddle.net/BoltClock/BFTan/4)更奇怪的是，这种解决方法不适用于*任何其他 3 级伪类*。它仅适用于`:empty`or `:not(:empty)`。

# ruby-on-rails - NoMethodError（Rails 2.3.1 中未定义的方法 `tempfile'...

> ID：15301361
> 
> 赞同：0
> 
> 时间：2013-03-08T19:02:05.227
> 
> 标签：ruby-on-rails, file-upload, ruby-on-rails-2, ruby-1.8

我已经从 Rails 3.2.11 降级到 Rails 2.3.11，`tempfile`当我的 csv 文件上传到服务器时，我无法访问。

当我打电话时它会中断代码

```
tmppath = csv.tempfile.to_path.to_s 
```

这是我的服务器日志中的跟踪..

```
Processing YoloController#createByCSV (for 10.1.109.132 at 2013-03-08 10:57:11) [POST]
  Parameters: {"csv"=>#<File:/var/folders/5g/xxxxxxxxx/T/RackMultipartxxxxxxx-xxxxxx-81xb7d-0>}

NoMethodError (undefined method `tempfile' for #<Tempfile:0x10c0f8ce8>):
  app/controllers/yolos_controller.rb:67:in `createByCSV'
  vendor/bundle/ruby/1.8/gems/actionpack-2.3.11/lib/action_controller/base.rb:1333:in `send' 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:22:14.830

从错误和 ruby​​ 1.8 的文档来看。`csv`已经是一个`Tempfile`，直接调用路径就可以了：`csv.path.to_s`

[http://ruby-doc.org/stdlib-1.8.7/libdoc/tempfile/rdoc/Tempfile.html#method-i-path](http://ruby-doc.org/stdlib-1.8.7/libdoc/tempfile/rdoc/Tempfile.html#method-i-path)

# ruby-on-rails - TeachersController#show 和 SQLite3::SQLException 中的 ActiveRecord::StatementInvalid: no such column 错误

> ID：15301364
> 
> 赞同：0
> 
> 时间：2013-03-08T19:02:10.127
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sqlite, ruby-on-rails-3.2

我有两张桌子，一张叫`Teacher`，另一张叫`Teacher_Type`。A`Teacher`可以有很多`Teach_Types`，即 John Smith 先生是模块负责人、导师和讲师（3 种教师类型）。

我在它们和它们各自的模型之间有以下关联：

```
class Teacher < ActiveRecord::Base
 has_and_belongs_to_many :teacher_types
 attr_accessible :first_name, :last_name, :teacher_type_ids

class TeacherType < ActiveRecord::Base
  has_and_belongs_to_many :teachers
  attr_accessible :title
end 
```

因此，现在当我尝试创建一个附加 `Teacher`了许多的新对象时，如下所示：`Teacher_Types`![屏幕截图1](../Images/99042e34e7270ced8bf522cb2caa158d.png)

但是，当我按下“创建教师”按钮时，我收到以下错误消息：

![在此处输入图像描述](../Images/ee71b65d3f9ca60aa912c58bb6bf78c3.png)

我`Teachers`之前创建了一些，但留下了`Teacher_Types`空的，所以即使我尝试转到`localhost:3000/teachers/3`，我也会收到以下错误消息（包括 SQLite 浏览器以查看`Teachers`表内的内容）

![在此处输入图像描述](../Images/ddd6c3c61577a8c76faab737cbeacf5b.png)

所以我不确定我在哪里出错了......

我的关联不正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:16:14.397

您需要创建名为`teachers_teacher_types`

```
class CreateTeachersTeacherTypes < ActiveRecord::Migration
  def change
    create_table :teachers_teacher_types, :id => false do |t|
      t.integer  :teacher_id
      t.integer :teacher_type_id
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:12:19.670

我认为你的模型应该是这样的：

类教师 < ActiveRecord::Base belongs_to :teacher_types attr_accessible :first_name, :last_name, :teacher_type_ids end

TeacherType < ActiveRecord::Base has_many :teachers attr_accessible :title end

试试看它是否适合你？？？

# solr - 索引文件夹中的文件

> ID：15301365
> 
> 赞同：0
> 
> 时间：2013-03-08T19:02:14.023
> 
> 标签：solr, lucene, indexing, sphinx

如何索引特定文件夹中的所有 doc 文件？假设我有`mydocuments`包含文件`doc`的`docx`文件夹。我需要索引该文件夹中的所有文件以进行有效搜索。您对`doc`文件索引文件夹有何建议？注意：我一直在寻找 sphinx，但它似乎只索引 xml 和 mssql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:45:06.173

我的回答适用于 Lucene。

Lucene 不“**直接**”提供 API 来索引文件或文件夹的内容。我们要做的就是

*   解析文件。您可以使用支持解析大量文件的[Apache Tika 。](http://tika.apache.org/)
*   使用该信息填充[Lucene Document](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/document/Document.html)对象。
*   将该文档传递给 IndexWriter.addDocument()
*   对每个文件重复上述步骤，即索引中的每个不同条目。

直接索引的问题，即使它存在，也失去了在特定文档中创建字段和选择与该字段相关的内容的灵活性。

以下是一个很好的教程，您可以在其中找到示例代码：[Lucene in 5 minutes](http://www.lucenetutorial.com/lucene-in-5-minutes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:18:40.257

我假设您的问题是索引某个文件夹中的文本文件列表。因此，这是索引它们的示例代码。但是，如果您正在索引 word 文档，那么您需要更改 getDocument 方法来解析和填充 Lucene 文档。

关键点是：

1.  创建一个 IndexWriter。
2.  使用 dir.listFiles() 方法获取文件夹中的文件列表。
3.  遍历文件并一次创建一个 Lucene 文档
4.  将 Lucene 文档添加到索引。
5.  添加完文档后，提交更改并关闭 indexWriter。

如果您正在寻找从 word 文档或 PDF 文件中解析和读取，那么您需要使用 Apache [POI](http://poi.apache.org/%20POI)和[PDFBox](http://pdfbox.apache.org/%20PDFBox)库。

请注意，我仅将 RAMDirectory 类用于演示，您需要使用 FSDirectory 代替。

我希望这能解决你的问题。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Scanner;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;

public class IndexFolders {

    public static void main(String[] args) throws FileNotFoundException, IOException{
        String path = args[0];
        File dir = new File(path);

        Directory indexDir = new RAMDirectory();
        Version version = Version.LUCENE_40;
        Analyzer analyzer = new StandardAnalyzer(version);
        IndexWriterConfig config = new IndexWriterConfig(version, analyzer);
        IndexWriter indexWriter = new IndexWriter(indexDir, config);

        for (File file : dir.listFiles()){
            indexWriter.addDocument(getDocument(file));
        }

        indexWriter.commit();
        indexWriter.close();
    }

    public static Document getDocument(File file) throws FileNotFoundException
    {
        Scanner input = new Scanner(file);
        StringBuilder builder = new StringBuilder();

        while(input.hasNext()){
            builder.append(input.nextLine());
        }

        Document document = new Document();
        document.add(new Field("text", builder.toString(),org.apache.lucene.document.TextField.TYPE_STORED));
        return document;
    }

} 
```

# scala - IntelliJ 12：在项目导航器中显示 Play 2.1 / Scala 编译错误？

> ID：15301367
> 
> 赞同：4
> 
> 时间：2013-03-08T19:02:18.720
> 
> 标签：scala, intellij-idea, playframework-2.0

我有 IntelliJ 12 Ultimate，并且正在使用带有 Scala 的 Play Framework 2.1（两者都喜欢）

我从 Eclipse 中错过的一件事是，如果项目文件无法编译，我的项目文件会用红色标记进行注释。

我试过启用首选项>编译器>使用外部构建>自动生成项目

这没有显示任何错误（甚至在“问题”面板中也没有）

我试过“Eclipse Mode”插件。也似乎没有任何作用。尽管代码存在明显问题，但“问题”面板中的“未发现编译问题”（将方法重命名为 xxx 而没有重构用法）

建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:35:38.530

我遇到了完全相同的问题，我只是通过确保 IntelliJ 不处于省电模式来解决它，因为在该模式下禁用了代码分析。

您可以通过 IntelliJ 右下角的状态栏查看它是打开还是关闭。

我希望对你来说就这么简单。

# javascript - Javascript in 在脚本 in 之前执行

> ID：15301376
> 
> 赞同：0
> 
> 时间：2013-03-08T19:02:44.677
> 
> 标签：javascript

我正在尝试编写一些 javascript，但在这方面几乎没有经验。

我读过一些帖子，建议 <head> 中的 <script> 块保证在 <body> 中的块之前运行，但我看到的行为完全相反。有人可以向我解释为什么我会看到这个吗？

这是我的简单测试页面：

```
<html>
  <head>
    <script type="text/javascript">
    var test_msg;
    function initMap() {
      test_msg = "This is a test";
      window.alert('initMap: ' + test_msg);
    }
    </script>
  </head>
  <body onload="initMap()">
    <script type="text/javascript">
      window.alert('blargo: ' + test_msg);
    </script>
  </body>
</html> 
```

当我加载这个（在 Firefox 或 IE 中）时，我看到 2 个消息框：#1：“blargo: undefined”和 #2：“initMap：这是一个测试”，这表明后面的脚本首先被执行。

感谢您的帮助，
gs。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T19:06:07.800

您的第一个脚本首先被执行......但它所做的只是创建函数和变量。

然后，您在此处调用该函数：

```
<body onload="initMap()"> 
```

....确保在加载所有文档资源之前不会调用该函数。

* * *

所以代码执行的整体顺序是：

```
 // first script
var test_msg;
function initMap() {
   test_msg = "This is a test";
   window.alert('initMap: ' + test_msg);
}

   // second script
window.alert('blargo: ' + test_msg);

   // function call via window.onload
initMap(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:06:06.127

问题是在加载主体时调用您的函数`initMap`（`body onload='...'`）*，但*仅在加载最后一个脚本并因此执行时才完全加载主体。您正在混淆加载 javascript 并执行它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-15T15:37:01.590

如果您希望立即执行 head 块中的函数，只需在其定义下方调用它即可。如果该函数使用了一些控制值，那么您需要将其包装在 document.ready 块中。

理想情况下，在 CMS 场景中，header 中立即调用的函数将用于一般初始化，body 中的函数应该有一个包装器作为 document.ready 来初始化所有控件

```
<head>
<script> 
function Initialize() { doSomething }  

// Now call this explictly
Initialize();
</script>
</head>
<body>

... body elements

<script> 
$(document).ready(function() { 
     handle body's element as desired using various functions
}
</script>

</body> 
```

# php - 如何从数组数组中获取数组（PHP）

> ID：15301378
> 
> 赞同：2
> 
> 时间：2013-03-08T19:02:50.360
> 
> 标签：php, sql, arrays, multidimensional-array

当我使用 print_r 时，我收到了这个：

```
Array ( 
    [0] => 15 
    [1] => 15 
    [2] => 15 
    [3] => 15 
    [4] => 15 
    [5] => 16 
    [6] => 15 
    [7] => 15 
    [8] => 15 
    [9] => 14 
    ... and so on ... 
) 
```

我想知道如何获得这些第二个值的数组（即）：

```
$newArray = array(15,15,15,15,15,16,15,15,15,14, ... ); 
```

我曾尝试使用 array_values 但无济于事！

作为背景，我从数据库中的单个列中获得了这些结果，现在我正在尝试使用 HighRoller/HighCharts 绘制它们。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:05:21.320

您没有数组数组。您有一个带有数字索引的值数组。除非我完全误解了你的问题....

```
Array ( 
    [0] => 15 
    [1] => 15 
    [2] => 15 
    [3] => 15 
    [4] => 15 
    [5] => 16 
    [6] => 15 
    [7] => 15 
    [8] => 15 
    [9] => 14 
    ... and so on ... 
) 
```

这意味着索引 0 处的数组的值为 15，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:15:03.873

正如其他人所说，您所展示的不是多维数组。

当 var_dumped 时，多维数组看起来像这样

```
array(3) {
  [0] =>
  array(1) {
    [0] =>
    int(15)
  }
  [1] =>
  array(1) {
    [0] =>
    int(15)
  }
  [2] =>
  array(1) {
    [0] =>
    int(15)
  }
} 
```

为了回答这个问题，即使它看起来不像你所拥有的，对于多维数组的每一级，你都可以使用嵌入式 foreach() 循环。

```
<?php

$myArray = [
    [15],
    [15],
    [15],

];

var_dump($myArray);//outputs above example

foreach($myArray as $arr) {
    foreach($arr as $val) {
        echo $val;//outputs the value of each array inside the outer array
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:05:34.650

“第二个值”是数组的值......方括号数字是索引。您只需使用`$array_name[0]`or`$array_name[5]`或 or访问它们`foreach($array_name as $idx => $val) echo($val);`

# linq - 将 MultiSelectList.SelectedValues 转换为 String[] 的最少代码

> ID：15301386
> 
> 赞同：0
> 
> 时间：2013-03-08T19:03:02.750
> 
> 标签：linq, asp.net-mvc-4, casting

这是否都需要转换为字符串 []

```
string[] waterfrontoptions = Model.WaterfrontOptions.
    SelectedValues.Cast<String>() == null 
    ? Model.WaterfrontOptions.SelectedValues.Cast<String>().ToArray() : null; 
```

我想要做的只是 .Contains 在 .SelectedValues 属性中的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:21:50.747

不，太多了。`SelectedValues.Cast<String>()`永远不会为空。如果`SelectedValues`为 null`Cast`将抛出异常。你可以做：

```
Model.WaterfrontOptions.SelectedValues.OfType<string>().Contains(xxxx); 
```

这会*过滤*. `SelectedValues`如果要*转换*为字符串：

```
Model.WaterfrontOptions.SelectedValues.Select(v => v.ToString()).Contains(xxxx); 
```

我认为既不`WaterfrontOptions`也`SelectedValues`不可能`null`（正如您的原始代码所具有的那样`SelectedValues.Cast`）。

# visual-studio-2012 - 表单设计加载错误

> ID：15301388
> 
> 赞同：0
> 
> 时间：2013-03-08T19:03:03.793
> 
> 标签：visual-studio-2012

当我打开 VStudio2012 并创建新项目时，它显示此错误：

[![在此处输入图像描述](../Images/3356d6ed43fc57343227ddd7f745b551.png)](https://i.stack.imgur.com/NGogc.jpg)

当我尝试重新打开新项目时，我看到此错误：

[![在此处输入图像描述](../Images/0d951967c7dd0ad0dc4d30deedf4ee69.png)](https://i.stack.imgur.com/8PDvN.jpg)

我的电脑的属性；
操作系统：Win 7 SP1；VS版本：VS2012 Ultimate；SQL 版本：SQL Server 2008 + 2012；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:09:48.150

看起来类似的问题已在另一篇文章中解决，请查看答案。希望这可以帮助

[Visual Studio 2012 中的普通 C# 编辑器（无智能感知、无缩进、无代码突出显示）](https://stackoverflow.com/questions/11988077/plain-c-sharp-editor-in-visual-studio-2012-no-intellisense-no-indentation-no)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T13:28:51.037

我解决了这个问题。在删除对象之前我已经删除了代码。所以，在我删除 .cs 文件中的 Button_1_Click() 事件之前。但我应该删除 button1 并在删除 Button_1_Click() 事件之后。

# html - 为什么一个 HTML 元素占用的空间远远超过它应有的空间？

> ID：15301390
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:03:06.457
> 
> 标签：html, css

我在使用 CSS 放置的页面上有一点文本。

这是`div`课程：

```
<div id="alpha">
Alpha
</div> 
```

这是我用来定位它的 CSS：

```
#alpha {
    position: relative;
    bottom: 72px;
    left: 50px;
} 
```

问题是 CSS 会导致整个页面变宽。在该代码之前，您无法在浏览器中水平滚动。现在我添加了那个 CSS（并且我已经将它隔离到那个特定的 CSS），浏览器允许向右滚动，就好像有一些不可见的图像一直向右突出一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:39:47.550

尝试添加`overflow: hidden`到您的`body`风格。

`div`是 100% 宽，因此当您将其向右移动时，它不再适合窗口，这就是您获得滚动条的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:06:25.647

试试这个：

```
#alpha {
    margin-bottom: 72px;
    margin-left: 50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:10:07.173

div 是块元素；除非你给它一个宽度，否则宽度将是整个页面宽度。

这是一个示例[小提琴](http://jsfiddle.net/GnKnf/)

js fiddle 的链接必须附有代码。这是一个代码块。 `<code>hoot</code>`

# svg - 哪些 Web 浏览器支持以背景为源的 SVG 过滤？合理的工作？

> ID：15301391
> 
> 赞同：2
> 
> 时间：2013-03-08T19:03:06.803
> 
> 标签：svg, svg-filters

我创建了一个自定义 SVG 过滤器，它使用背景图像作为源。然后它应用一个随机置换贴图来模拟我非常喜欢的光学失真（例如水焦散、热流动空气的翘曲）。

它在 Inkscape 中正确呈现，但在 Internet Explorer 10 和 Chrome 中均不正确。显然，使用背景图像作为过滤器输入是一些 SVG 渲染器可能不支持的模糊功能。我还必须在其中一个 SVG 图层中设置 enable-background=new ，以便 Inkscape 正确显示它。有谁知道哪些网络浏览器或免费提供的独立程序（Inkscape 除外）可以正确显示此类图像？

此外，有人可以评论为什么这个功能似乎没有得到很好的支持（它似乎并不比简单的透明度更复杂）。另外，是否有任何合理的解决方法来达到相同的效果？

我在下面附上了一个例子（你应该看到一个下半部分被过滤器扭曲的星星）。

[链接到 JSBin 上的实时 SVG 图像](http://jsbin.com/oveqoh/1/)

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->
<svg id="svg1380" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"     style="enable-background:new" xmlns="http://www.w3.org/2000/svg" height="190" width="367" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/">
<defs id="defs1382">
<filter id="filter1945" style="color-interpolation-filters:sRGB">
<feTurbulence id="feTurbulence1947" baseFrequency="0.034000000000000009" seed="397" result="turbulence" numOctaves="4" type="turbulence"/>
<feDisplacementMap id="feDisplacementMap1949" scale="100" yChannelSelector="G" in2="turbulence" xChannelSelector="R" in="BackgroundImage"/>
</filter>
<radialGradient id="radialGradient5645" gradientUnits="userSpaceOnUse" cy="402" cx="359" gradientTransform="matrix(.0557 -.0464 .178 .207 268 339)" r="417">
<stop id="stop5641" stop-color="#fee" offset="0"/>
<stop id="stop5643" stop-color="#fee" stop-opacity="0" offset="1"/>
</radialGradient>
<radialGradient id="radialGradient5653" gradientUnits="userSpaceOnUse" cy="407" cx="248" gradientTransform="matrix(.537 -.681 .793 .625 -234 -28)" r="47.2">
<stop id="stop5649" stop-color="#f00" offset="0"/>
<stop id="stop5651" stop-color="#784421" offset="1"/>
</radialGradient>
</defs>
<metadata id="metadata1385">
<rdf:RDF>
<cc:Work rdf:about="">
<dc:format>image/svg+xml</dc:format>
<dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
<dc:title/>
</cc:Work>
</rdf:RDF>
</metadata>
<g fill-rule="evenodd">
<rect id="rect5726" height="135" width="339" y="0" x="27.9"/>
<path id="path5635" opacity=".998" d="m266 80-36-6-18 31-5-35.4-36-7.5 33-16.1-4-35.9 25 25.8 33-14.8-17 32.1z" fill="url(#radialGradient5653)"/>
<rect id="rect1935" transform="matrix(.435 0 .0110 .656 32.9 -151)" height="189" filter="url(#filter1945)" width="694" y="313" x="-13.6" fill="url(#radialGradient5645)"/>
</g>
</svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:29:13.920

只有 Opera（和 IE10）支持背景图像作为过滤器输入。（顺便说一句，Safari 会忽略颜色插值过滤器）。支持这一点显然相当复杂 - W3C 邮件列表（我不太了解）关于启用下一代过滤器的背景有很长的讨论。

解决方法是通过 feImage 拉入背景图像 - 尽管它可能不是您正在寻找的。

# php - PHP mktime() 与日期()

> ID：15301399
> 
> 赞同：3
> 
> 时间：2013-03-08T19:03:48.080
> 
> 标签：php, date, mktime

这是一个 PHP 问题。当我测试这段代码时

```
echo date("d-m-y h:i:S"); 
```

在我的本地服务器和我的托管网站上（这两个具有不同的时区），它们返回不同的日期时间值，正如预期的那样。但是当我尝试这段代码时

```
echo mktime(); 
```

我在两台服务器上看到相同的结果。mktime() 是否返回标准时区从 1970 年开始的秒数，无论您的时区是什么？

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:07:22.243

从[文档](http://php.net/manual/en/function.mktime.php)中：

> mktime — 获取日期的 Unix 时间戳

将其与您最初的问题综合起来：

> mktime() 是否返回标准时区从 1970 年开始的秒数，无论您的时区是什么？

是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:10:52.053

> [`mktime()`](http://php.net/manual/en/function.mktime.php)返回与给定参数对应的 Unix 时间戳。此时间戳是一个长整数，包含**Unix 纪元** （**1970 年 1 月 1 日 00:00:00 GMT**）和指定时间之间的秒数。
> 
> [`date()`](http://php.net/manual/en/function.date.php)**如果没有给出时间戳，则使用给定的整数时间戳或当前时间**（本地时区）返回根据给定格式字符串格式化的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:06:39.903

正如[文档](http://www.php.net/manual/en/function.mktime.php)中提到的那样，`mktime()`返回格林威治标准时间从纪元开始的秒数，而[`date()`](http://www.php.net/manual/en/function.date.php)（不带第二个参数）返回本地时区的时间。

# wpf - 三态按钮行为（默认、按下、禁用）

> ID：15301401
> 
> 赞同：0
> 
> 时间：2013-03-08T19:03:53.430
> 
> 标签：wpf, button, triggers

实现状态为的三态按钮的惯用（最好是最简单的）方法是什么：

*   默认
*   紧迫
*   禁用

到目前为止，我有这个：

```
<Button ToolTip="Back" FontWeight="Bold" Command="{Binding Path=Navigator.GoBackCommand}" IsEnabled="{Binding Path=Navigator.CanGoBack}">
  <Viewbox Width="10">
    <ContentControl Content="{StaticResource ResourceKey=CoolLeftArrow}"/>
  </Viewbox>
</Button> 
```

是否需要更换控制模板才能获得这种行为，或者可以使用触发器获得吗？理想情况下，我只想指定 3 个不同的资源并将它们绑定到相关属性。

编辑：将名称“按下”状态更新为“按下”以避免与可能的类似复选框的行为混淆。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T19:23:05.110

为什么不使用[`IsThreeState`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.togglebutton.isthreestate.aspx)设置为的 ToggleButton `true`？

```
<ToggleButton IsThreeState="True">
    <ToggleButton.Style>
        <Style TargetType="ToggleButton">
            <Style.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Content" Value="{StaticResource TbCheckedContent}"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="False">
                    <Setter Property="Content" Value="{StaticResource TbUncheckedContent}"/>
                </Trigger>
                <Trigger Property="IsChecked" Value="{x:Null}">
                    <Setter Property="Content" Value="{StaticResource TbNullContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </ToggleButton.Style>
</ToggleButton> 
```

* * *

**更新**我想我没有仔细阅读你的问题。您当然可以对按钮`IsPressed`和`IsEnabled`属性执行与上述类似的操作：

```
<Button>
    <Button.Style>
        <Style TargetType="Button">
            <Style.Triggers>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Content" Value="{StaticResource ButtonPressedContent}"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="False">
                    <Setter Property="Content" Value="{StaticResource ButtonNormalContent}"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Content" Value="{StaticResource ButtonDisabledContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

* * *

但是，您可以查看[VisualStates](http://msdn.microsoft.com/en-us/library/cc672805.aspx)，然后查看[按钮样式和模板](http://msdn.microsoft.com/en-us/library/ms753328.aspx)，以了解如何在按钮的 ControlTemplate 中可视化这些状态。

# jquery - 滚动时出现褪色问题

> ID：15301402
> 
> 赞同：0
> 
> 时间：2013-03-08T19:03:53.790
> 
> 标签：jquery, html, scroll, visibility, fade

我有一个固定位置的文章元素，我想在滚动页面时淡出。我在 Javascript 方面不是很有经验，但经过一些研究，我整理了这个脚本；

```
<script type="text/javascript">

        //when the DOM has loaded
        $(document).ready(function() {

            //attach some code to the scroll event of the window object
            //or whatever element(s) see http://docs.jquery.com/Selectors
            $(window).scroll(function () {
                  var height = $('body').height();
                  var scrollTop = $('body').scrollTop();
                  var opacity = 1;

                  // do some math here, by placing some condition or formula
                  if(scrollTop > 400) {
                      opacity = 0.5;
                  }

                  //set the opacity of div id="someDivId"
                  $('#instructions').css('0', opacity);
            });
        });
    </script> 
```

这似乎不起作用，并且该元素在 scolling 时保持完全不透明（该网站在此处[http://edharrisondesign.com/pocketpictograms/](http://edharrisondesign.com/pocketpictograms/)）。

任何想法为什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:49:01.310

如果您使用`var height = $('body').height();`. 但是，进行以下更改，它应该可以工作：

```
$('#instructions').css('opacity', opacity); 
```

演示：http: [//jsfiddle.net/SLGdE/20/](http://jsfiddle.net/SLGdE/20/)

# c# - 为异步方法编写包装器

> ID：15301405
> 
> 赞同：2
> 
> 时间：2013-03-08T19:03:58.800
> 
> 标签：c#, .net, asynchronous, .net-4.5

我有一个`TransactionOperator`公开以下静态异步方法的类：

```
public static async Task<bool> ProcessTransactionAsync(Transaction transaction)
{
    var someTransactionOperator = ...; // get appropriate operator
    // some code here
    bool success = await someTransactionOperator.Process(transaction);
    // some more code
    return bool;
} 
```

现在，我想在`Transaction`类中提供一个包装器实例方法。我的问题是，哪一种是正确/推荐的写作方式？我倾向于＃2，因为它*感觉正确*，但我没有任何支持该选择的论据。

```
// Option 1
public bool ProcessAsync()
{
    return TransactionOperator.ProcessTransactionAsync(this).Result;
}

// Option 2
public Task<bool> ProcessAsync()
{
    return TransactionOperator.ProcessTransactionAsync(this);
}

// Option 3 (compiler warning because there's no 'await' operator)
public async Task<bool> ProcessAsync()
{
    return TransactionOperator.ProcessTransactionAsync(this).Result;
}

// Option 4
public async Task<bool> ProcessAsync()
{
    return await TransactionOperator.ProcessTransactionAsync(this);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:52:43.620

选项 2 是最好的选择。选项 4 在逻辑上是等效的，但开销更大。

选项 1 和 3 完全错误。它们都同步阻塞（即使选项 3 是`async`，它的行为也是同步的）。[不推荐为异步方法公开同步包装器](http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx)。除其他问题外，您还可能[导致死锁](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)（正如我在博客中解释的那样）。

# ruby - 如何将字符串 var 传递给 Hash#rassoc？

> ID：15301407
> 
> 赞同：0
> 
> 时间：2013-03-08T19:04:02.667
> 
> 标签：ruby, hash, ruby-1.9.3

我正在尝试按值获取键，但想设置请求动态抛出字符串变量。

```
presidents = { 1 => "Washington", 2 => "Adams", 3 => "Jefferson" }

request1 = gets
request2 = "Adams"

puts presidents.rassoc(request1).first # doesn't work
puts presidents.rassoc(request2).first # work perfect 
```

当我输入“Adams”并按 Enter 时，第二种方法会出错：

```
test.rb:6:in `<main>': undefined method `first' for nil:NilClass (NoMethodError) 
```

我还检查了`request1`课程`request2`- 两者`String`

我阅读了[rassoc](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-rassoc)的描述，但仍然不明白为什么第二个不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:10:46.560

你错过了`gets`：

```
# If the user types 'Washington'
gets       #=> "Washington\n"
gets.chomp #=> "Washington" 
```

# java - createButton - SWT.PUSH 与 OK

> ID：15301413
> 
> 赞同：0
> 
> 时间：2013-03-08T19:04:33.293
> 
> 标签：java, button, swt

这是我的`createButtonsForButtonsBar`方法。

```
protected void createButtonsForButtonBar(Composite parent) {
  Button okButton = createButton(parent, SWT.PUSH, "Close Aplot", true);
  okButton.setEnabled(true);
  okButton.addSelectionListener(new SelectionAdapter() {
     public void widgetSelected(SelectionEvent e) {
        viewer = null;
        getShell().setVisible(false);
    }
  });
} 
```

我不得不改变

```
Button okButton = createButton(parent, OK, "Close Aplot", true); 
```

到

```
Button okButton = createButton(parent, SWT.PUSH, "Close Aplot", true); 
```

因为 OK 版本在这一行抛出了运行时空指针错误

```
getShell().setVisible(false); 
```

错误大致：

> com.test.BaseDialog$7.widgetSelected(BaseDialog.java:277) 处未处理的事件循环异常 java.lang.NullPointerException

问题 ：

`OK`和 和有什么不一样`SWT.PUSH`？

为什么OK会导致上述错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:48:14.480

因为`OK`是指示某些行为的系统按钮 ID。特别是，按下`OK`按钮将关闭对话框。同时，您添加了一个按钮选择侦听器，该侦听器*也*尝试关闭对话框。可以理解的是，这将失败。

但是，您在这里所做的是创建一个不是系统默认按钮且没有关联的默认行为的按钮。但是您已经混淆`SWT.PUSH`了 - 样式常量 - 与按钮 ID。如果要提供自己的按钮 ID，则需要使用大于`IDialogConstants.CLIENT_ID`.

您可能想要在这里做的只是让系统为您关闭对话框，完全删除您的选择侦听器。如果在对话框关闭时您想做一些事情——比如清理一些句柄——你应该简单地覆盖`close()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:12:29.397

Whatever Edward mentioned is right. You are should pass button ID in that method. But, the button style is already `SWT.PUSH` style in `org.eclipse.jface.dialogs.Dialog.createButton(Composite, int, String, boolean)`. Please double check. Also you should call/override `org.eclipse.jface.dialogs.Dialog.okPressed()` handle close operation for the dialog. Hope this helps as well.

# php - 在php文件中加载图片

> ID：15301415
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:04:49.840
> 
> 标签：php, jpeg, image

我想在 PHP 中执行以下操作

我在一个目录中有图片，我需要将图片加载到一个 php 文件清理页面中`"site.com/image.php?pic=xx/xx.jpg"`

例子：`http://freeminecraftaccount.org/image.php?pic=images/minecraft.jpg`

```
if (file_exists('image.html')) {
    $temfile = fopen('image.html', 'r');
    $template = fread($temfile, filesize('image.html'));
    if ($title) {
        $template = eregi_replace("<PICTURETITLE>", $title, $template);
    } else {
        $template = eregi_replace("<PICTURETITLE>", $notitle, $template);
    }
    if ($desc) {
        $template = eregi_replace("<PICTUREDESCRIPTION>", $desc, $template);
    }
    if ($pic) {
        $template = eregi_replace("<PICTURE>", "src=\"$pic\">", $template);
    } else {
        $template = eregi_replace("<PICTURE>", $noimage, $template);
    }
    if ($return) {
        $template = eregi_replace("<PICTURELINK>", "<a href=\"$return\">RETURN</a>", $template);
    } else {
        $template = eregi_replace("<PICTURELINK>", "<a href=\"/\">RETURN</a>", $template);
    }
    echo $template;
}

?> 
```

如果有人可以提供帮助，那就太好了，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:07:07.950

```
 <?php
    if (isset($_GET['pic'])){
       $pic_location = $_GET['pic'];
    }
    else {
       $pic_location = 'someDefault.jpg';
    }
    ?> 
```

在您的 html 正文中：

```
 <img src="<?php echo $pic_location; ?>"/> 
```

这假设您在 url 中有完整路径.. 否则在 echo 之前添加路径。

所以如果图像存储在[http://site.com/images](http://site.com/images)

但网址仅显示 imageName.jpg 然后执行此操作

```
<img src="http://site.com/images/<?php echo $pic_location; ?>"/> 
```

# mule - csv 到 xml：不确定在 Mule ESB 中执行此操作的最佳方法

> ID：15301420
> 
> 赞同：0
> 
> 时间：2013-03-08T19:05:04.353
> 
> 标签：mule

我是 Mule 的新手，所以请耐心等待。我收到以下 CSV 文件：

```
Company1,2,123 Street,Winchester,UK
"000010","CHRISTINE","I","HAAS","A00","3978","1995-01-01","PRES",18,"F","1963-08-24",152750.00
"000020","MICHAEL","L","THOMPSON","B01","3476","2003-10-10","MANAGER",18,"M","1978-02-02",94250.00 
```

第一行，标题，包含公司信息以及 CSV 文件中的记录数（员工人数）（标题中的第二个参数）。

现在我需要将其转换为以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<tns:employeedata xmlns:tns="http://coxb.test.legstar.com/payrollemployee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://coxb.test.legstar.com/payrollemployee PayrollEmployee.xsd ">
  <tns:employeecount>2</tns:employeecount>
  <tns:employeelist>
    <tns:employees>
      <tns:employeenumber>000010</tns:employeenumber>
      <tns:firstname>CHRISTINE</tns:firstname>
      <tns:middleinitial>I</tns:middleinitial>
      <tns:surname>HAAS</tns:surname>
      <tns:department>A00</tns:department>
    </tns:employees>
    <tns:employees>
      <tns:employeenumber>000020</tns:employeenumber>
      <tns:firstname>MICHAEL</tns:firstname>
      <tns:middleinitial>L</tns:middleinitial>
      <tns:surname>THOMPSON</tns:surname>
      <tns:department>B01</tns:department>
    </tns:employees>
  </tns:employeelist>
</tns:employeedata> 
```

我可以在没有第一行（标题）的情况下轻松转换此文件。我的问题是如何处理标题和提取/转换“employeecount”。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:34:12.457

最简单的方法是使用[DataMapper](http://www.mulesoft.org/documentation/display/current/DataMapper+Transformer+Reference)。将输入设置为 CSV（使用示例 CSV），将输出设置为 XML（使用您的 XSD 或示例 XML）。

进入映射视图后，单击您的员工人数字段。您将看到一个可以输入表达式的区域。您可以使用一个未记录的参数`$in.0.__id`，该参数将包含记录计数。请注意，这仅适用于 CSV 文件。

关于如何跳过第一行，DataMapper 默认会这样做。

# c++ - FFTW 与 Matlab FFT

> ID：15301426
> 
> 赞同：37
> 
> 时间：2013-03-08T19:05:19.250
> 
> 标签：c++, matlab, mex, fftw

我在 matlab central 上发布了这个，但没有得到任何回复，所以我想我会在这里重新发布。

我最近在 Matlab 中编写了一个在 for 循环中使用 FFT 的简单例程；FFT 在计算中占主导地位。出于实验目的，我在 mex 中编写了相同的例程，它调用了 FFTW 3.3 库。事实证明，对于非常大的数组，matlab 例程比 mex 例程运行得更快（大约快两倍）。mex 例程使用智慧并执行相同的 FFT 计算。我也知道 matlab 使用 FFTW，但他们的版本是否可能稍微优化一些？我什至使用了 FFTW_EXHAUSTIVE 标志，对于大型数组，它的速度仍然比 MATLAB 对应的慢两倍。此外，我确保我使用的 matlab 是带有“-singleCompThread”标志的单线程，并且我使用的 mex 文件未处于调试模式。只是好奇是否是这种情况-或者是否有一些我不知道的 matlab 正在使用的优化。谢谢。

这是墨西哥的部分：

```
void class_cg_toeplitz::analysis() {
// This method computes CG iterations using FFTs
    // Check for wisdom
    if(fftw_import_wisdom_from_filename("cd.wis") == 0) {
        mexPrintf("wisdom not loaded.\n");
    } else {
        mexPrintf("wisdom loaded.\n");
    }

    // Set FFTW Plan - use interleaved FFTW
    fftw_plan plan_forward_d_buffer;    
    fftw_plan plan_forward_A_vec;       
    fftw_plan plan_backward_Ad_buffer;
    fftw_complex *A_vec_fft;
    fftw_complex *d_buffer_fft;
    A_vec_fft = fftw_alloc_complex(n);
    d_buffer_fft = fftw_alloc_complex(n);

    // CREATE MASTER PLAN - Do this on an empty vector as creating a plane 
    // with FFTW_MEASURE will erase the contents; 
    // Use d_buffer
    // This is somewhat dangerous because Ad_buffer is a vector; but it does not
    // get resized so &Ad_buffer[0] should work
    plan_forward_d_buffer = fftw_plan_dft_r2c_1d(d_buffer.size(),&d_buffer[0],d_buffer_fft,FFTW_EXHAUSTIVE);
    plan_forward_A_vec = fftw_plan_dft_r2c_1d(A_vec.height,A_vec.value,A_vec_fft,FFTW_WISDOM_ONLY);
    // A_vec_fft.*d_buffer_fft will overwrite d_buffer_fft
    plan_backward_Ad_buffer = fftw_plan_dft_c2r_1d(Ad_buffer.size(),d_buffer_fft,&Ad_buffer[0],FFTW_EXHAUSTIVE);

    // Get A_vec_fft
    fftw_execute(plan_forward_A_vec);

    // Find initial direction - this is the initial residual
    for (int i=0;i<n;i++) {
        d_buffer[i] = b.value[i];
        r_buffer[i] = b.value[i];
    }    

    // Start CG iterations
    norm_ro = norm(r_buffer);
    double fft_reduction = (double)Ad_buffer.size(); // Must divide by size of vector because inverse FFT does not do this
    while (norm(r_buffer)/norm_ro > relativeresidual_cutoff) {        
        // Find Ad - use fft
        fftw_execute(plan_forward_d_buffer);    
        // Get A_vec_fft.*fft(d) - A_vec_fft is only real, but d_buffer_fft
        // has complex elements; Overwrite d_buffer_fft        
        for (int i=0;i<n;i++) {
            d_buffer_fft[i][0] = d_buffer_fft[i][0]*A_vec_fft[i][0]/fft_reduction;
            d_buffer_fft[i][1] = d_buffer_fft[i][1]*A_vec_fft[i][0]/fft_reduction;
        }        
        fftw_execute(plan_backward_Ad_buffer); 

        // Calculate r'*r
        rtr_buffer = 0;
        for (int i=0;i<n;i++) {
            rtr_buffer = rtr_buffer + r_buffer[i]*r_buffer[i];
        }    

        // Calculate alpha
        alpha = 0;
        for (int i=0;i<n;i++) {
            alpha = alpha + d_buffer[i]*Ad_buffer[i];
        }    
        alpha = rtr_buffer/alpha;

        // Calculate new x
        for (int i=0;i<n;i++) {
            x[i] = x[i] + alpha*d_buffer[i];
        }   

        // Calculate new residual
        for (int i=0;i<n;i++) {
            r_buffer[i] = r_buffer[i] - alpha*Ad_buffer[i];
        }   

        // Calculate beta
        beta = 0;
        for (int i=0;i<n;i++) {
            beta = beta + r_buffer[i]*r_buffer[i];
        }  
        beta = beta/rtr_buffer;

        // Calculate new direction vector
        for (int i=0;i<n;i++) {
            d_buffer[i] = r_buffer[i] + beta*d_buffer[i];
        }  

        *total_counter = *total_counter+1;
        if(*total_counter >= iteration_cutoff) {
            // Set total_counter to -1, this indicates failure
            *total_counter = -1;
            break;
        }
    }

    // Store Wisdom
    fftw_export_wisdom_to_filename("cd.wis");

    // Free fft alloc'd memory and plans
    fftw_destroy_plan(plan_forward_d_buffer);
    fftw_destroy_plan(plan_forward_A_vec);
    fftw_destroy_plan(plan_backward_Ad_buffer);
    fftw_free(A_vec_fft);
    fftw_free(d_buffer_fft);
}; 
```

这是matlab部分：

```
% Take FFT of A_vec.
A_vec_fft = fft(A_vec); % Take fft once

% Find initial direction - this is the initial residual 
x = zeros(n,1); % search direction
r = zeros(n,1); % residual
d = zeros(n+(n-2),1); % search direction; pad to allow FFT
for i = 1:n
    d(i) = b(i); 
    r(i) = b(i); 
end

% Enter CG iterations
total_counter = 0;
rtr_buffer = 0;
alpha = 0;
beta = 0;
Ad_buffer = zeros(n+(n-2),1); % This holds the product of A*d - calculate this once per iteration and using FFT; only 1:n is used
norm_ro = norm(r);

while(norm(r)/norm_ro > 10^-6)
    % Find Ad - use fft
    Ad_buffer = ifft(A_vec_fft.*fft(d)); 

    % Calculate rtr_buffer
    rtr_buffer = r'*r;

    % Calculate alpha    
    alpha = rtr_buffer/(d(1:n)'*Ad_buffer(1:n));

    % Calculate new x
    x = x + alpha*d(1:n);

    % Calculate new residual
    r = r - alpha*Ad_buffer(1:n);

    % Calculate beta
    beta = r'*r/(rtr_buffer);

    % Calculate new direction vector
    d(1:n) = r + beta*d(1:n);      

    % Update counter
    total_counter = total_counter+1; 
end 
```

在时间方面，对于 N = 50000 和 b = 1:n，mex 大约需要 10.5 秒，matlab 大约需要 4.4 秒。我正在使用 R2011b。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T02:09:04.333

因为我不知道 MATLAB FFT 实现的任何细节，所以有一些观察而不是明确的答案：

*   根据您拥有的代码，我可以看到速度差异的两种解释：
    *   速度差异可以通过 FFT 优化级别的差异来解释
    *   MATLAB 中的 while 循环执行次数要少得多

我假设您已经研究了第二个问题，并且迭代次数是可比的。（如果不是，这很可能是一些准确性问题，值得进一步调查。）

现在，关于 FFT 速度比较：

*   是的，理论上 FFTW 比其他高级 FFT 实现更快，但只有在将苹果与苹果进行比较时才有意义：在这里，您正在比较更底层的实现，在汇编级别，其中不仅算法的选择，但它对特定处理器和具有不同技能的软件开发人员的实际优化在起作用
*   一年来，我在许多处理器上优化或审查了优化的 FFT 组装（我在基准测试行业），出色的算法只是故事的一部分。有一些非常特定于您正在编码的架构的考虑因素（考虑延迟、指令调度、优化寄存器使用、内存中的数据排列、考虑分支采用/未采用延迟等）并且会产生差异算法的选择同样重要。
*   在 N=500000 的情况下，我们还讨论了大内存缓冲区：更多优化的另一扇门，可以快速变得非常特定于您运行代码的平台：您如何避免缓存未命中将不取决于算法，以及数据流的方式以及软件开发人员可能使用哪些优化来有效地将数据导入和导出内存。
*   虽然我不知道 MATLAB FFT 实现的细节，但我很确定 DSP 工程师大军已经（并且仍然）在优化它，因为它是许多设计的关键。这很可能意味着 MATLAB 拥有合适的开发人员组合来生成更快的 FFT。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T09:42:23.503

由于低级和特定于架构的优化，这是典型的性能提升。

Matlab 使用来自英特尔[MKL](http://software.intel.com/en-us/intel-mkl)（数学内核库）二进制文件 (mkl.dll) 的 FFT。这些是英特尔针对英特尔处理器优化（在汇编级别）的例程。即使在 AMD 上，它似乎也能提供不错的性能提升。

FFTW 看起来像一个没有优化的普通 c 库。因此，使用 MKL 可以获得性能提升。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-17T04:29:55.280

**编辑：** @wakjah 对此答案的回复是准确的：FFTW 确实支持通过其 Guru 接口拆分实数和虚数内存存储。因此，我关于黑客攻击的说法并不准确，但如果不使用 FFTW 的 Guru 界面，则可以很好地应用——默认情况下就是这种情况，所以还是要小心！

首先，很抱歉迟到了一年。我不相信您看到的速度提升来自 MKL 或其他优化。FFTW 和 Matlab 之间有一些根本不同的地方，那就是复杂数据在内存中的存储方式。

在 Matlab 中，复数向量 X 的实部和虚部是单独的数组 Xre[i] 和 Xim[i]（在内存中是线性的，在分别对它们中的任何一个进行操作时都很有效）。

在FFTW中，实部和虚部默认交错为double[2]，即X[i][0]是实部，X[i][1]是虚部。

因此，要在 mex 文件中使用 FFTW 库，不能直接使用 Matlab 数组，而必须先分配新内存，然后将来自 Matlab 的输入打包成 FFTW 格式，然后将 FFTW 的输出解包成 Matlab 格式。IE

```
X = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * N);
Y = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * N); 
```

然后

```
for (size_t i=0; i<N; ++i) {
    X[i][0] = Xre[i];
    X[i][1] = Xim[i];
} 
```

然后

```
for (size_t i=0; i<N; ++i) {
    Yre[i] = Y[i][0];
    Yim[i] = Y[i][1];
} 
```

因此，这需要 2x 内存分配 + 4x 读取 + 4x 写入 - 所有大小为 N。这确实会在大问题上造成速度损失。

我有一种预感，Mathworks 可能已经破解了 FFTW3 代码，以允许它直接以 Matlab 格式读取输入向量，从而避免了上述所有情况。

在这种情况下，只能分配 X 并将 X 用于 Y 以就地运行 FFTW（`fftw_plan_*(N, X, X, ...)`而不是`fftw_plan_*(N, X, Y, ...)`），因为它将被复制到 Yre 和 Yim Matlab 向量中，除非应用程序需要/受益于保留 X 和Y 分开。

**编辑**：实时查看运行 Matlab 的 fft2() 和我的基于 fftw3 库的代码时的内存消耗，它表明 Matlab 只分配了一个额外的复杂数组（输出），而我的代码需要两个这样的数组（`*fftw_complex`缓冲区加上 Matlab 输出）。Matlab 和 fftw 格式之间的就地转换是不可能的，因为 Matlab 的实数和虚数数组在内存中不是连续的。这表明 Mathworks 破解了 fftw3 库以使用 Matlab 格式读取/写入数据。

对多个调用的另一种优化是持久分配（使用`mexMakeMemoryPersistent()`）。我不确定 Matlab 实现是否也这样做。

干杯。

ps 附带说明一下，Matlab 复数数据存储格式对于分别对实数或虚数向量进行操作更有效。在 FFTW 的格式上，您必须进行 ++2 内存读取。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-29T12:05:12.260

我在 MathWorks 网站 [1] 上发现了以下评论：

> 注意 2 的大幂：对于 2 的幂的 FFT 维度，介于 2^14 和 2^22 之间，MATLAB 软件使用其内部数据库中的特殊预加载信息来优化 FFT 计算。当 FTT 的维度是 2 的幂时，不会执行任何调整，除非您使用命令 fftw('wisdom', []) 清除数据库。

虽然它与 2 的幂有关，但它可能暗示 MATLAB 在将 FFTW 用于某些（大）数组大小时采用了自己的“特殊智慧”。考虑：2^16 = 65536。

[1] R2013b 文档可从[http://www.mathworks.de/de/help/matlab/ref/fftw.html](http://www.mathworks.de/de/help/matlab/ref/fftw.html)获得（2013 年 10 月 29 日访问）

# biztalk - 将多个 MSI 部署到同一个 BizTalk 应用程序中

> ID：15301430
> 
> 赞同：1
> 
> 时间：2013-03-08T19:05:27.977
> 
> 标签：biztalk, biztalk-2010, biztalk-deployment

在我们开发架构编排、端口等期间。我们一直在导出 MSI 和绑定文件以部署到我们的测试环境和最终的生产环境中

因此，例如，我们在单个 BizTalk 应用程序中设置了一系列接收端口/位置，目的是接收来自 HCIS 的所有 HL7 v2 消息。然后我们将它导出到一个绑定文件，并导入到 test.xml 中。

然后，当我们开发新架构时，我们将每个架构导出到它自己的 msi 文件中，并将其部署到我们测试环境中的同一个 BizTalk 应用程序中。我们这样做是因为模式特定于来自我们 HCIS 的入站消息。

所以现在，在测试中，我们最终得到了一个 BizTalk 应用程序，其中包含我们需要从 HCIS 接收消息的接收端口和架构。我发现的问题是，如果我查看控制面板中的已安装程序列表，我只会看到 1 个应用程序。因此，如果我想卸载并重新安装特定架构，我不确定会发生什么。出于某种原因，我有一半希望看到我安装的每个 msi 的条目，但我想因为它们都进入同一个 BizTalk 应用程序，所以它们都在 Windows 中注册为同一个应用程序。我打赌有更好的方法来做到这一点，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:33:42.243

您可以并且可能应该为每个逻辑代码分组创建不同的应用程序。如果您检查项目属性的“部署”部分，您将看到一个输入应用程序名称的文本框。当您触发部署时，它们将被放置到具有您提供的名称的单独应用程序中。您将在 BizTalk 管理控制台中看到它。

我们使用下面提到的框架部署到 dev。然后部署到 QA 右键单击​​应用程序并从该点创建一个 MSI。它将只允许为一个应用程序创建 MSI。

注意：部署设置不会全局保存。如果其他开发人员打开该项目，他的项目将不会继承您设置的应用程序名称。

我们在进行开发时使用[biztalk 部署框架](http://biztalkdeployment.codeplex.com/)来帮助管理变更。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:25:44.673

> 所以现在，在测试中，我们最终得到了一个 BizTalk 应用程序，其中包含我们需要从 HCIS 接收消息的接收端口和架构。我发现的问题是，如果我查看控制面板中的已安装程序列表，我只会看到 1 个应用程序。

我只能想到两种情况，您可能会观察到这种行为：

*   您有多个不同的 MSI（每个架构一次），您正在导入 BizTalk（因此它们出现在 BizTalk 管理控制台中），但您没有在本地计算机上运行 MSI（因此它没有出现在 '已安装的程序'）；或者
*   您的 MSI 的名称都相同，在这种情况下，在导入 BizTalk 并进行本地安装后，您在“已安装程序”中只有一个程序可见。

> 我打赌有更好的方法来做到这一点，有什么建议吗？

关于方法，您当然是正确的。我倾向于建议客户将逻辑工件分组到单个逻辑存储桶中——项目或应用程序——可以部署（和重新部署）而不影响系统的其他部分。

在 HL7 场景中，一个逻辑桶可能是患者工件（模式和支持图），第二个可能是财务工件（模式和支持图）。这些逻辑存储桶可以部署到不同的 BizTalk 应用程序，也可以部署到同一个 BizTalk 应用程序，具体取决于您的要求。但是，这里的主要好处是它们是独立的，因此如果您需要对 A19 - 例如患者查询/响应模式进行小幅修改，则不需要重新部署*所有工件。*

如何部署完全是另一个问题。我是 MSBuild 的忠实拥护者，我编写了全面的构建脚本，我会针对我从事的每个项目进行调整和重用。这些部署脚本将拆除现有环境并从头开始重新构建，创建应用程序，部署资源，导入绑定，创建主机和主机实例等，然后最终启动应用程序。这种方法消除了流程中的所有人为错误，并且往往受到经常让基础架构团队而不是开发团队执行部署的客户的青睐。

我注意到 Jay 提到了 BizTalk 部署框架的使用。我个人在使用这个工具时遇到了困难，部分原因是我需要在 Excel 中维护我的配置，而我无法轻松地签入源代码管理。

# html - 内嵌图像和文本 元素

> ID：15301431
> 
> 赞同：0
> 
> 时间：2013-03-08T19:05:30.610
> 
> 标签：html, css

我正在为一个学校项目的极限运动公司制作一个网站，我想通过在一个类似元素的容器中放置一张图片和一些文本来展示这项运动。我对 HTML 和 CSS 比较陌生。

这是HTML

```
<div class="sports" "spacing"> 
    <img src="images/skydive.jpg" class="thumbnail" alt="" /> 
    <p class="float" > Skydiving is one of those things everybody wants to experiance and is on many peoples bucket list. It is the ultimate thrill hurtaling towards the earth with no restrictions. We have a number of techniques avalible including         Tandem, Static line and solo! </p> 
</div> 
```

和 CSS

```
.sports {
    height:230px;
    width:900px;
    background-color:#f1f1f1;
    margin-right:auto;
    margin-left:auto;
    margin-bottom: 20px;
    display:table;
}

.thumbnail {
    max-height: 200px;
    margin-top:15px;
    margin-bottom:15px;
    margin-left: 15px;
    display:inline-block;
}

.float {
    text-align:center;
    display:inline-block;
    width:410px;
    position:relative;
    top:-71px;
    padding-left:80px;
} 
```

我已经玩过这些设置，它们适用于这个设置，但它特定于图像大小和文本数量，我真的不想为另外 6 种不同的东西做同样的事情。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:25:05.807

我不太确定你想要得到什么，但可能更简单的方法是给你的图像“浮动”选项并从文本中删除浮动（相对定位应该是不必要的）。当文本内联显示时，它将使用图像周围的空间，尊重图像边距。

# python - python 2.7中的中心str

> ID：15301433
> 
> 赞同：1
> 
> 时间：2013-03-08T19:05:34.540
> 
> 标签：python, python-2.7, formatting

我正在尝试使字符串的文本居中，但我做不到。我检查了多个帖子并尝试了他们所说的，我没有收到错误，但文本仍然与左侧对齐。这里的代码和我想要居中的str

```
while True:
        print ''
        while True:
                try:
                    userNum = float(raw_input('Enter the total of your bill: '))

                    if (userNum) > 0 and (userNum) != 0:
                        break
                    else:
                        print 'Oops!  That was no valid number.  Try again...' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T19:07:18.870

你可以使用[str.format](http://docs.python.org/library/string.html#format-string-syntax)。该`^80` 格式告诉 Python 使字符串长度为 80 个字符，并使参数居中：

```
print('{:^80}'.format('Oops!  That was not a valid number.  Try again...')) 
```

产量

```
 Oops!  That was not a valid number.  Try again... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:08:28.807

看看这个[str.center](http://docs.python.org/2/library/stdtypes.html#str.center)

# opencv - EMGU CV 中的标准霍夫线

> ID：15301439
> 
> 赞同：2
> 
> 时间：2013-03-08T19:05:59.993
> 
> 标签：opencv, emgucv, hough-transform

我需要使用标准霍夫变换（而不是使用实现概率霍夫变换的 HoughLinesBinary 方法）并尝试通过创建 HoughLinesBinary 方法的自定义版本来做到这一点：

```
using (MemStorage stor = new MemStorage())
     {
        IntPtr lines = CvInvoke.cvHoughLines2(canny.Ptr, stor.Ptr, Emgu.CV.CvEnum.HOUGH_TYPE.CV_HOUGH_STANDARD, rhoResolution, (thetaResolution*Math.PI)/180, threshold, 0, 0);

        Seq<MCvMat> segments = new Seq<MCvMat>(lines, stor);
        List<MCvMat> lineslist = segments.ToList();
        foreach(MCvMat line in lineslist)
        {
           //Process lines: (rho, theta)
        }
     } 
```

我的问题是我不确定返回的序列是什么类型。我相信它应该是 MCvMat，因为阅读了 CvMat* 在 OpenCV 中使用的文档，其中还指出对于标准“矩阵必须是（创建的序列将是）CV_32FC2 类型”

我不清楚我需要做什么来返回和处理来自标准霍夫线的正确输出数据（即每条线的 2x1 向量给出 rho 和 theta 信息）。

任何帮助将不胜感激。谢谢

-萨尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:06:43.070

几天前我自己也遇到了同样的问题。这就是我使用编组解决它的方法。如果您找到更简单的解决方案，请告诉我。

```
using (MemStorage stor = new MemStorage())
{
    IntPtr lines = CvInvoke.cvHoughLines2(canny.Ptr, stor.Ptr, Emgu.CV.CvEnum.HOUGH_TYPE.CV_HOUGH_STANDARD, rhoResolution, (thetaResolution*Math.PI)/180, threshold, 0, 0);

    int maxLines = 100;
    for(int i = 0; i < maxLines; i++)
    {
        IntPtr line = CvInvoke.cvGetSeqElem(lines, i);
        if (line == IntPtr.Zero)
        {
            // No more lines
            break;
        }
        PolarCoordinates coords = (PolarCoordinates)System.Runtime.InteropServices.Marshal.PtrToStructure(line, typeof(PolarCoordinates));

        // Do something with your Hough lines
    }
} 
```

结构定义如下：

```
public struct PolarCoordinates
{
    public float Rho;
    public float Theta;
} 
```

# java - 应用程序不注册自定义按钮点击

> ID：15301440
> 
> 赞同：2
> 
> 时间：2013-03-08T19:06:05.883
> 
> 标签：java, android, button

我的一个应用程序有问题。我编写了一个基本的应用程序菜单，其中包含链接到其他活动的自定义按钮。我的问题是，当我测试它时，我的应用程序似乎没有注册我的按钮点击。点击时我没有收到任何错误或崩溃，应用程序就像点击从未发生过一样。任何人都可以为我提供有关此问题的任何帮助，我在下面提供了一些代码。

主菜单代码：

```
public void initialize(){

    Film = (Button) findViewById(R.id.bFilm);
}

@Override
public void onClick(View view) {
    try{
    switch(view.getId()){
    case R.id.bFilm:
        Intent film = new Intent(this, Film.class);
        startActivity(film);
        break; 
```

布局代码：

```
<Button
    android:id="@+id/bFilm"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="110dp"
    android:background="@drawable/film"
    android:textSize="20sp" /> 
```

自定义 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

<item android:state_pressed="true" android:drawable="@drawable/actor_1"></item>
    <item android:state_focused="true" android:drawable="@drawable/actor_1"></item>
        <item android:drawable="@drawable/actor_1"></item>
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:08:31.177

添加

```
android:onclick="onClick" 
```

在

```
 <Button
        android:id="@+id/bFilm"
android:onclick="onClick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="110dp"
        android:background="@drawable/film"
        android:textSize="20sp" /> 
```

它将起作用
**EDIT** 但是 `onClick`没有为 API 3 和更低版本定义属性。（安卓 <= 1.5）

它从 API 4 (Android 1.6) 开始工作

如果你想要兼容性，你可以使用：

```
findViewById(R.id.myButton).setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // Do stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:08:43.690

在您的 initialize() 中，在`findViewById`以下内容之后添加：

```
Film.setOnClickListener(onClick); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:17:18.993

试试这个

```
public void initialize(){

Film = (Button) findViewById(R.id.bFilm);
Film.setOnClickListener(this);
} 
```

# excel - 复选框以选中和取消选中电子表格中的所有其他复选框

> ID：15301445
> 
> 赞同：1
> 
> 时间：2013-03-08T19:06:20.430
> 
> 标签：excel, vba

我有一个电子表格，其中包含每个行项目的复选框。我想在顶部放置一个复选框，当它被选中/取消选中时，它将选中和取消选中电子表格中的所有其他复选框。以下是我到目前为止的代码，如果我的“复选框 1”被选中，它将选中所有复选框，但如果取消选中，它不会取消选中它们。如果取消选择“复选框 1”，我需要添加什么才能使框也取消选择。谢谢你的帮助。

```
Sub SelectAllCheckBox()
Dim CB As CheckBox
If ActiveSheet.CheckBoxes("Check Box 1").Value Then
    For Each CB In ActiveSheet.CheckBoxes
        If CB.Name <> ActiveSheet.CheckBoxes("Check Box 1").Name Then
            CB.Value = True
        End If
    Next CB
End If
End Sub 
```

我也遇到了另一个问题。我有一个宏来清除工作表，以便可以运行不同的宏。该宏中包含删除所有复选框的代码。我将如何措辞代码以使其不删除“复选框 1”。这是我的代码。

```
Sheets("Quote Sheet").Select
Range("D3:D7").Select
Selection.ClearContents
Rows("11:1000").Select
Selection.Delete Shift:=xlUp
ActiveSheet.CheckBoxes.Delete
Selection.FormatConditions.Delete 
```

我尝试了以下但没有奏效。

```
Sheets("Quote Sheet").Select
Range("D3:D7").Select
Selection.ClearContents
Rows("11:1000").Select
Selection.Delete Shift:=xlUp
If CB.Name <> ActiveSheet.CheckBoxes("Check Box 1").Name Then    
ActiveSheet.CheckBoxes.Delete
Selection.FormatConditions.Delete 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:20:13.753

```
Sub SelectAllCheckBox()
    Dim CB As CheckBox

    For Each CB In ActiveSheet.CheckBoxes
        If CB.Name <> ActiveSheet.CheckBoxes("Check Box 1").Name Then
            CB.Value = ActiveSheet.CheckBoxes("Check Box 1").Value
        End If
    Next CB

End Sub 
```

第二部分：

```
Dim CB as CheckBox, n as long, x as long

n = ActiveSheet.CheckBoxes.Count

For x = n to 1 Step -1        
    Set CB = ActiveSheet.CheckBoxes(x)
    If CB.Name <> "Check Box 1" Then CB.Delete

Next x 
```

# .htaccess - 使用 drupal 重写域和子域

> ID：15301450
> 
> 赞同：1
> 
> 时间：2013-03-08T19:06:35.990
> 
> 标签：.htaccess, drupal, url-rewriting

我有一个编写纯 html 的域，让它称为 www.example.com，我有一个作为子域的 drupal 实例，称为 dev.example.com。example.com 直接放在 public_html 的根目录下，而 drupal 实例放在 public_html/dev 下。我的重写如下：

```
# To redirect all users to access the site WITH the 'www.' prefix,
# (xhttp://example.com/... will be redirected to xhttp://www.example.com/...)
# adapt and uncomment the following:

RewriteCond %{HTTP_HOST} ^example\.com$ [NC]

RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]

# To redirect all users to access the site WITHOUT the 'www.' prefix,
# (xhttp://www.example.com/... will be redirected to xhttp://example.com/...)
# uncomment and adapt the following:

RewriteCond %{HTTP_HOST} ^www\.dev.example\.com$ [NC]

RewriteRule ^(.*)$ http://www.dev.example.com/$1 [L,R=301] 
```

出于某种原因，我收到子域错误，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:09:54.193

很确定：

```
RewriteCond %{HTTP_HOST} ^www\.dev.example\.com$ [NC] 
```

应该：

```
RewriteCond %{HTTP_HOST} ^dev\.example\.com$ [NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:51:46.307

这应该适用于将所有内容转发`http://www.example.com/dev`到`http://dev.example.com`：

```
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
RewriteCond %{REQUEST_URI} ^(/dev/)(.*)$ [NC]
RewriteRule ^(.*)$ http://dev.example.com/%2 [L,R=301] 
```

还要记住，`RewriteCond %{HTTP_HOST} ^www\.dev.example\.com$ [NC]`缺少`\`介于`dev`和`.example`

希望有帮助...

j

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-21T14:40:26.430

以下是我对public_html 目录 的*域指向和结构的理解：*

**单个 Drupal 站点（默认）**

```
/public_html      <-- where example.com, www.example.com, dev.example.com are pointing
    .htaccess         <-- root's .htaccess
    index.html        <-- http://example.com, http://www.example.com
    /dev                  <-- drupal root folder
        .htaccess         <-- drupal's .htaccess
        index.php         <-- http://dev.example.com
        /sites                <-- drupal's file system folder
            /default          <-- drupal's default subfolder 
            setting.php       <-- drupal's default setting (dev.example.com) 
```

如果以上内容正确，那么我想推荐如下：

*根的 .htaccess*：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^dev
RewriteCond %{REQUEST_URI} !^/dev/
RewriteRule ^(.*)$ dev/$1 [L] 
```

*设置.php*：

```
# $base_url = 'http://www.example.com';  // NO trailing slash! 
```

要在你的 url 上没有一个干净的`/dev/`url，找到包含上述代码的行，删除前导井号并填写 Drupal 安装的绝对 URL，如下所示：

```
$base_url = 'http://dev.example.com';  // NO trailing slash! 
```

在浏览器上打开您的网站。一旦您以管理员身份登录到您的 drupal 站点，请在以下管理菜单下检查或设置*公共文件系统路径的正确路径：*

```
Home » Administration » Configuration » Media » File System 
```

验证或更正该值以：

```
sites/dev.example.com/files, for your site dev.example.com via access url: 
http://dev.example.com/#overlay=%3Fq%3Dadmin%252Fconfig%252Fmedia%252Ffile-system 
```

**多 Drupal 站点（按子域）**

您可以考虑为您的 drupal 站点进行多站点配置`http://dev.example.com`，因此您可以为其他子域设置默认文件夹，`http://prod.example.com`如下所示：

```
/public_html      <-- example.com, www.example.com, dev.example.com, prod.example.com
    .htaccess         <-- root's .htaccess
    index.html        <-- http://example.com, http://www.example.com
    /dev                  <-- drupal root folder
        .htaccess         <-- drupal's .htaccess
        index.php         <-- http://dev.example.com, http://prod.example.com
        /sites                <-- drupal's file system folder
            /default              <-- drupal's default subfolder 
                setting.php       <-- drupal's default setting (prod.example.com)
            /dev.example.com      <-- drupal's dev.example.com subfolder
                setting.php       <-- drupal's dev.example.com setting 
```

*根的 .htaccess*：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(dev|prod)
RewriteCond %{REQUEST_URI} !^/dev/
RewriteRule ^(.*)$ dev/$1 [L] 
```

然后在每个 settings.php 上删除前导井号`$base_url`并填写您的 Drupal 安装的绝对 URL。

验证或更正每个子域 的*公共文件系统路径的值，如下所示：*

```
sites/dev.example.com/files, for your site dev.example.com via access url: 
http://dev.example.com/#overlay=%3Fq%3Dadmin%252Fconfig%252Fmedia%252Ffile-system  
sites/prod.example.com/files, for your site prod.example.com via access url:  
http://prod.example.com/#overlay=%3Fq%3Dadmin%252Fconfig%252Fmedia%252Ffile-system 
```

**多 Drupal 站点（按子域 + URL 的路径）**

您还可以扩展上述多站点配置，您可以在*您的 url 路径*`http://dev.example.com`下设置另一个 drupal 站点（与 共享相同的 drupal 根文件夹），例如：

 *```
http://dev.example.com/site1,
http://dev.example.com/site2, etc.. 
```

其中*site1*和*site2*是通过以下 shell 命令指向 drupal 根文件夹的*符号链接：*

```
$ cd /path/to/your/public_html/dev
$ ln -s . site1
$ ln -s . site2 
```

所以目录结构如下：

```
/public_html      <-- example.com, www.example.com, dev.example.com, prod.example.com
    .htaccess         <-- root's .htaccess
    index.html        <-- http://example.com, http://www.example.com
    /dev                  <-- drupal root folder
        .htaccess         <-- drupal's .htaccess
        index.php         <-- http://dev.example.com, http://prod.example.com
        /site1             <-- http://dev.example.com/site1
        /site2             <-- http://dev.example.com/site2
        /sites                <-- drupal's file system folder
            /default          <-- drupal's default subfolder 
                setting.php   <-- drupal's default setting (prod.example.com)
            /dev.example.com            <-- drupal's dev.example.com subfolder
                setting.php             <-- drupal's dev.example.com setting
            /dev.example.com.dev.site1  <-- drupal's dev.example.com.site1 subfolder
                setting.php             <-- drupal's dev.example.com.site1 setting
            /dev.example.com.dev.site2  <-- drupal's dev.example.com.site2 subfolder
                setting.php             <-- drupal's dev.example.com.site2 setting 
```

*root 的 .htaccess*的代码同上，同样步骤在*setting.php*中填写 $base_url 的绝对 URL ，并验证或更正新站点 的*Public file system path的值：*

```
sites/dev.example.com.dev.site1/files, for your site dev.example.com.site1 via access url: 
http://dev.example.com/site1/#overlay=%3Fq%3Dadmin%252Fconfig%252Fmedia%252Ffile-system  
sites/dev.example.com.dev.site2/files, for your site dev.example.com.site2 via access url:  
http://dev.example.com/site2/#overlay=%3Fq%3Dadmin%252Fconfig%252Fmedia%252Ffile-system 
```

**多 Drupal 站点（通过 Drupal-8）**

通过 Drupal-8，不再需要符号链接，可以更灵活地为站点设置命名*/public_html/dev/sites*下的文件夹并将它们放在*sites.php*文件中，如下所示：

```
$sites = array(
   'dev.example.com' => 'dev',
   'dev.example.com.site1' => 'dev.site1',
   'dev.example.com.site2' => 'dev.site2',
); 
```

所以目录结构如下：

```
/public_html      <-- example.com, www.example.com, dev.example.com, prod.example.com
    .htaccess         <-- root's .htaccess
    index.html        <-- http://example.com, http://www.example.com
    /dev                  <-- drupal root folder
        .htaccess         <-- drupal's .htaccess
        index.php         <-- http://dev.example.com, http://prod.example.com
        /sites                <-- drupal's file system folder
            sites.php         <-- drupal's multisite setting
            /default          <-- drupal's default subfolder 
                setting.php   <-- drupal's default setting (prod.example.com)
            /dev                  <-- drupal's dev.example.com subfolder
                setting.php       <-- drupal's dev.example.com setting
            /dev.site1            <-- drupal's dev.example.com.site1 subfolder
                setting.php       <-- drupal's dev.example.com.site1 setting
            /dev.site2            <-- drupal's dev.example.com.site2 subfolder
                setting.php       <-- drupal's dev.example.com.site2 setting 
```

最后，为确保一切设置正确，建议您在设置新站点时通过访问以下菜单*清除缓存：*

```
Home » Administration » Configuration » Development » Clear all Caches 
```

为了您的方便，我已经为[Drupal Multisite](http://dev.hyipscript.info/drupal/multisite)设置了一个简单的演示站点，如上所述。[*我还在这里*](https://www.drupal.org/node/2673236)维护这个特定主题的文档。*

# typescript - 如何将 Typescript 升级到最新版本？

> ID：15301451
> 
> 赞同：48
> 
> 时间：2013-03-08T19:06:38.340
> 
> 标签：typescript, npm

我有一台装有 OS X 10.8.2 的 MacBook Pro 前段时间我安装了 Typescript，今天我想将该安装升级到可用的最新版本（到目前为止，v0.8.3）。我从终端写了这个命令：

```
sudo npm install -g typescript 
```

但这就是我在显示器上看到的：

```
npm http GET https://registry.npmjs.org/typescript
npm http 304 https://registry.npmjs.org/typescript
/usr/local/bin/tsc -> /usr/local/lib/node_modules/typescript/bin/tsc
typescript@0.8.0 /usr/local/lib/node_modules/typescript 
```

这是否意味着我的计算机上仍然安装了 0.8.0 版本？我试图查看 tsc 命令是否有一个`-v`或一个`-version`参数，但我没有找到它，所以我仍然不确定我是否已将 Typescript 升级到最新版本，或者我是否仍然坚持使用旧版本。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2015-09-11T21:52:17.173

由于选择的正确答案对我没有帮助，我想我会分享我是如何解决这个问题的。

我不得不`C:\Program Files (x86)\Microsoft SDKs\TypeScript\1.0\`从我的 PATH 中删除。

之后，我可以运行此命令并查看我期望的版本：

```
C:\>tsc --version
message TS6029: Version 1.5.3 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2017-02-06T09:40:15.013

我在下面为我工作的过程中遇到了同样的问题

**更新 NPM**

```
npm install npm@latest -g 
```

**更新打字稿**

```
npm -g upgrade typescript 
```

或者

```
npm install typescript@latest -g 
```

现在你应该看到

```
tsc --version 
```

**版本 2.1.5**

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-10-29T16:44:55.747

对于那些仍在为此苦苦挣扎的人 - 尝试`WHERE tsc`在命令提示符或 Node.js 命令提示符中运行，您将获得安装它的所有位置。从 PATH env var 中删除过多的位置。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-05-29T01:58:34.117

即使我安装了最新的打字稿，在执行 tsc -v 时我仍然获得 1.0.3 版本

更正的答案对我没有帮助，但遵循@BenR 方法，从系统变量中删除了这个 PATH C:\Program Files (x86)\Microsoft SDKs\TypeScript\1.0\

[![在此处输入图像描述](../Images/9a065131c1d9c3a481683ca840f6fc7c.png)](https://i.stack.imgur.com/fJNOT.png)

然后打开新的Windows命令提示符然后输入

```
tsc -v
Version 2.3.3 
```

所以现在我能够使用编译打字稿文件`tsc file.ts`

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-11-01T14:27:31.907

打开命令行工具`cmd.exe/Git Bash`并执行：

```
 npm install -g typescript@latest 
```

该命令将执行以下操作：

检查是否安装了 Typescript 和..

1.  如果已安装，请将其***更新***到最新版本
2.  如果没有安装，***请安装***最新版本

据报道，当您已经安装了 typescript 时，以下命令将无法可靠运行：

```
npm update -g typescript@latest 
```

* * *

**使用**测试版本****

 **```
tsc -v  // prints out the locally installed typescript version 
```

[![在此处输入图像描述](../Images/eaea63336f7fe4ac48175ca6dc3f5ea4.png)](https://i.stack.imgur.com/Wp8A6.png)

此外，您可以检查，这是[npm 注册表](https://www.npmjs.com/)中 typescript 的最新可用版本：

```
npm view typescript version  // prints the latest available version in the npm registry 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-03-08T19:22:28.930

我刚刚意识到我使用的是旧版本的 npm。我已将 npm 升级到最新版本，然后重新安装了 typescript，现在我的计算机上安装了最新版本的 typescript。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-11-30T00:42:32.523

我在 Linux 上遇到了同样的问题，可能与使用节点版本管理器有关。

我通过查找 tsc 的位置来修复它，然后手动进入并删除这些文件夹

```
$ which tsc
/home/vagrant/.nvm/versions/node/v6.9.5/bin/tsc

$ cd /home/vagrant/.nvm/versions/node/v6.9.5/bin/
$ ll
...
lrwxrwxrwx 1 vagrant vagrant       38 Nov 30 10:32 tsc -> ../lib/node_modules/typescript/bin/tsc*
lrwxrwxrwx 1 vagrant vagrant       43 Nov 30 10:32 tsserver -> ../lib/node_modules/typescript/bin/tsserver*
...

$ rm -rf ../lib/node_modules/typescript/ tsc tsserver 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-10-21T09:41:29.420

1.  我在我的 Windows 操作系统计算机上安装了 Visual Studio，它将自己的 TypeScript 安装版本添加到系统路径中
2.  从程序和功能中卸载“TypeScript for Visual Studio”（或“添加或删除程序”）
3.  安装了最新的打字稿。从命令提示符'npm install -g typescript@latest'
4.  问题解决了！

*我知道这是一个老问题，但我遇到了类似的问题，这里的答案都没有解决它，将我的答案发布给同一条船上的其他人。*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-08T18:05:45.290

我刚刚在 Windows 8 机器上遇到了这个问题，管理员访问被阻止，我无法卸载全局打字稿，修改`PATH`等。

以下是在这种情况下启动 typescript 项目的方法：

1.  为项目安装本地打字稿版本`npm install typescript@latest` **（避免`-g`参数）**
2.  将构建脚本添加到`package.json`例如

    `scripts: { "clean": "rimraf coverage build tmp", "build": "tsc -p tsconfig.release.json", "build:watch": "tsc -w -p tsconfig.release.json", "lint": "tslint -t stylish --project \"tsconfig.json\"", "test": "jest --coverage", "test:watch": "jest --watch" }`

3.  使用本地版本的打字稿运行打字稿编译器，通过`npm run build:watch`它将`tsc -w -p tsconfig.release.json`使用项目的`tsc`本地版本启动`node_modules`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-19T00:43:39.203

我遇到了同样的问题，没有一个流行的答案为我解决了这个问题。我在装有 Visual Studio 2017 的 Windows 10 上。

我尝试`where tsc`从控制台使用来确定`tsc`解析路径的位置。第一个条目类似于：`C:\Program Files (x86)\Microsoft SDKs\TypeScript\x.xx`。所以我检查了`PATH`变量（系统和用户），找不到那个路径。

我终于在 GitHub 上偶然发现了这条评论：[https ://github.com/Microsoft/TypeScript/issues/4971#issuecomment-144184935](https://github.com/Microsoft/TypeScript/issues/4971#issuecomment-144184935)

这为我指明了正确的方向。我使用`Console2`并且我的默认控制台选项卡通过此`.bat`文件生成一个 Visual Studio 增强控制台： `C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\Common7\Tools\VsDevCmd.bat`

该`.bat`文件不包含任何特定于 TypeScript 的内容，但它确实运行`.bat`在`C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\Common7\Tools\vsdevcmd\ext`. 其中一个*文件*显眼地命名为`typescript.bat`. 我只是将该文件重命名为其他扩展名，然后重新打开控制台，现在一切都很好。

不确定这是否会破坏 Visual Studio 中的任何内容，但我不会将它用于 TypeScript。而且我怀疑未来的 Visual Studio 更新可能会将该文件放回原处。但它现在有效。**

# asp.net-mvc-3 - EF5：未使用和未知的列导致问题

> ID：15301452
> 
> 赞同：3
> 
> 时间：2013-03-08T19:06:39.910
> 
> 标签：asp.net-mvc-3, entity-framework, visual-studio-2012, entity, entity-framework-5

好的，所以我有 2 个实体：课程和行业

![课程和行业实体](../Images/9de68f619e60ba47141213f7fce65486.png)

行业实体只是一个参考表，其中列出了可以标记到课程的所有可用行业，以对它们进行分类。我输入了多对零或一对一的关系（一个课程可以选择是否有一个行业，而一个行业可以用许多课程标记）。

我知道我曾经玩过一些图表，过去添加和删除关联。

**现在这是奇怪的部分：Course 的列映射有 2 个相似的列，IndustryId 和 Industry_Id**

![奇数课程列映射](../Images/08b0367a73a09e399b5acdf84b635cfb.png)

我怀疑它来自过去的协会，但认为 EF 会处理这个问题。

**这是问题所在：**

在创建课程的我看来， IndustryId 是需要填充的属性。当我创建新课程时，我看到数据库中的 IndustryId 已填充。

但是，当我通过 Course (Course.Industry.Description) 访问行业属性时，什么都没有填充。它似乎无法获得行业实体。

**我看到数据库中填充了 IndustryId，因此我尝试填充 Industry_Id 列。那解决了它。**

很奇怪，模型中声明的属性是 IndustryId，因此该列被填充到数据库中。但是当我尝试通过 Course 获取行业实体时，它需要 Industry_Id，我不太清楚它来自哪里。

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T20:00:18.713

听起来在您从数据库更新时，您将表上的列名从 更改`Industry_Id`为`IndustryId`. 下次您从数据库更新时，EF5（无法确定这是同一列，因为它与名称匹配）删除了 的映射`Industry_Id`，并添加了一个名为`IndustryId`.

但是，您已经根据`Industry_Id`列在 EDMX 文件中创建了外键映射 - 这就是为什么您在加载相关记录时遇到需要它的问题。

通常，在使用 Database-First 时，无论何时重命名数据库中的列，都需要更新 EF5 模型并更新/更正任何此类差异。

# javascript - 对象 VS 调用函数的属性

> ID：15301458
> 
> 赞同：1
> 
> 时间：2013-03-08T19:07:02.323
> 
> 标签：javascript, oop

所以我试图找出声明函数的不同方法......以及低内存使用的最佳方法是什么......

我一直在做的方式是方法＃4，我猜它是ATROCIOUS。我基本上做了一堆不同的“ `function XYZ(){ //stuff }`”，并一直调用它来执行操作......或多或少是一种管理所有代码并组织它的方式......不是因为性能、内存或任何技术相关的原因...... . 任何人都可以请解释一下哪种方法最好吗？（或者如果您有自己的方法，请发布）为什么？

```
//method 1
var sayHey = new Object();
    sayHey.derp = 'derp';
    sayHey.herp = function(){
        alert('herp');
    };

//side question: would this.derp = 'derp' be the same as sayHey.derp? if so, would it be better to use this rather than sayHey?

//method 2
var sayHey2 = function() {
    return {
        derp : 'derp',
        herp : function(){
            alert('herp');
        }
    }
}();

//method 3
var sayHey3 = {
    derp: 'derp',
    herp: function(){
        alert('herp');
    }
};

//method 4
var derp = 'derp';
function herp(){
    alert('herp');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:16:33.863

*   *方法 1 和 3*相同。只是创建对象的不同方式。

*   *附带问题：* `this.derp`如果`"derp"`您直接从对象调用方法。换句话说，如果你这样做`this.herp()`，那么`this`在`herp()`函数中将是你的 `sayHey`对象。

*   *方法 2*也是相同的，只是有一个不必要的函数调用，它没有特别使用创建的变量范围。您可以`derp`在函数内部创建一个局部变量而不是对象上的属性，以便只能通过`herp()`方法访问它。这为变量提供了一些保护。

*   *方法 4*正在创建一个本地函数，因此您不会直接在对象上获取它。每个都有不同的用例。

# c - 如何在 C 中使用 base-16 整数

> ID：15301460
> 
> 赞同：0
> 
> 时间：2013-03-08T19:07:03.997
> 
> 标签：c

我正在尝试编写一个程序，我需要使用 base-16 整数来确定使用 C 的 1 位错误检测。但是，我不确定 C 如何处理 base-16 整数。我必须首先从标准输入中提取低阶 16 位。我需要使用 scanf() 函数从标准输入读取前 16 位，然后将数字存储在 char 数组中（我的代码目前不考虑这一点）。当我只是简单地测试我的程序以查看它是否会以 16 位形式打印整数时，如果我输入一个基数为 16 的数字（例如 0xcd789f），它只会在 x 之前打印 0。到目前为止，这是我的代码。到目前为止，它只是一个标准的“从标准输入读取整数并将其打印到标准输出”程序。

```
#include <stdio.h>
int main()
{
    int num;

    scanf("%d", &num);  
    printf("%d\n", num);

    getchar();
} 
```

此代码不适用于 base-16 数字。我该如何解释？感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:11:15.127

```
scanf("%x", &num);  
printf("%x %d\n", num, num); 
```

Whether the number is represented in binary, octal, decimal or hex - the value of the number remains the same. This is shown by the print - it will print the value of the number in hex(base16) form and also in decimal form.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:24:56.640

除了`%x`在`scanf`格式字符串中使用之外，您还可以使用`strtol`来转换您的输入。

```
int num;
char buf[256];

if (fgets(buf, sizeof(buf), stdin) == 0) exit(0);
/* handles decimal, 0x prefix for hex, or 0 prefix for octal */
num = strtol(buf, 0, 0);
/* handles hex only, with or without 0x prefix */
num = strtol(buf, 0, 16); 
```

如其他地方所述，要以十六进制打印，您应该使用`%x`转换说明符。如果您希望十六进制输出的字母为大写，请`%X`改用。如果您希望输出具有`0x`或`0X`在前缀中，您可以使用`#`修饰符来转换说明符。

```
printf("hex: %x %#x\nHEX: %X %#X\ndec: %d\n", num, num, num, num, num); 
```

# javascript - 限制服务器填充的 HTML 下拉列表（使用 JavaScript）

> ID：15301466
> 
> 赞同：1
> 
> 时间：2013-03-08T19:07:23.550
> 
> 标签：javascript, html, html-select

我想尝试使用 JavaScript 或其他解决方案更改或限制下拉列表。不幸的是，我无法控制我试图更改客户端的 HTML 输出方式。下拉列表是在服务器端生成的，但我们想给用户额外的选项来进一步限制下拉列表中的选择。

我们无法编辑生成的内容，但可以插入 HTML。

一种可能无法实现的建议解决方案是使用 JavaScript 来限制下拉列表。例如，下拉菜单遵循以下格式：

```
<SELECT ID="dropdown_1">
<OPTION VALUE=""    >None
<OPTION VALUE="1000">AB-ITEM 1 DESCRIPTION
<OPTION VALUE="2001">AB-ITEM 2 DESCRIPTION
<OPTION VALUE="50"  >AB-ITEM 8 DESCRIPTION
<OPTION VALUE="70"  >BB-ITEM 3 DESCRIPTION
<OPTION VALUE="100" >BB-ITEM 5 DESCRIPTION
<OPTION VALUE="2"   >ABB-ITEM 4 DESCRIPTION
</SELECT> 
```

我想通过文本的开头来限制什么，所以`AB-`, `BB-`, 或`ABB-`在这种情况下。`value`没有押韵或理由，它只是一个索引号。我认为这是不可能的，因为这只是文本，与属性无关。

一种想法是：

*   将列表存储到 JavaScript 数组中
*   只保留“TYPE-X%”之类的条目
*   删除原始 HTML 列表
*   替换为存储在数组中的新列表

但是，我不确定这是否可行，如果可行，创建这样的代码需要什么。任何帮助或对功能或示例的引用将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:12:45.157

一切皆有可能（使用 jQuery）：

```
$(document).ready(function() {
    $("#dropdown_1 option").hide();
    $("#dropdown_1 option").filter(":contains(TYPE-X)").show();
}); 
```

这样做的一个优点是所有选项都仍然存在，您只是看不到它们。因此，返回默认列表所需要的只是调用：

```
$("#dropdown_1 option").show(); 
```

编辑正则表达式：

```
$(document).ready(function() {
    $("#dropdown_1 option").hide();
    $("#dropdown_1 option").filter(function() {
        return $(this).text().match(/^AB-/);
    }).show();
}); 
```

您可以使用如上所示的正则表达式过滤您的列表。

编辑：关于 jQuery 的注释，`this`在 filter 函数中是 DOM 元素本身。为了访问 jQuery 帮助器方法`text()`，我首先需要使用 jQuery 函数包装该 DOM 元素，如上面编辑的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:24:36.250

多亏了 BinaryTox1n，我找到了一条与我的问题兼容的全浏览器解决方案。然而，这是一种与 StackOverFlow 上的其他解决方案略有不同的方法。

不同之处在于如何处理`OPTION`s。虽然`.hide()`可以在某些浏览器上运行，但它与 IE8（可能还有其他一些浏览器）不兼容。替代方案和变体`.hide()`也失败了。另一个问题`.hide()`是您还需要使用`.disable()`. 最后一个问题是，如果您有多个（大约 20 个）选项并且只有 2 或 3 个可见，Chrome（可能还有其他浏览器）无法正确呈现下拉框。

找到的最佳方法是`.remove()`不需要的选项。没有兼容性问题，因为它`OPTION`被简单地删除了。但是，如果需要，我也希望能够灵活地添加选项。所以以下是我将使用的版本：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
    var regex_str = "^AAB-";
    var dd1 = $("#dropdown1 option");

  //Clone the 'None', Current, and All options into respective variables.
  //All options are stored in order to allow different selection criteria
    var all_Opt  = dd1.clone(true);
    var none_Opt = dd1.filter(":contains(None)").clone(true);
    var cur_Opt  = dd1.filter(function(){
        return $(this).text().match(regex_str);
    }).clone(true);

  //Remove all options and replace the 'None' and Current options
    dd1.remove();
    noneOpt.appendTo($("#dropdown1"));
    curOpt.appendTo($("#dropdown1"));
});
</script> 
```

我唯一想添加的是使用不同的下拉框或其他触发器来改变它的能力。

# visual-studio-2010 - 如何确定表的 SQL Server Compact 版本是什么？

> ID：15301469
> 
> 赞同：1
> 
> 时间：2013-03-08T19:07:34.183
> 
> 标签：visual-studio-2010, sql-server-ce, windows-ce, server-explorer

我有一些在 Windows CE 应用程序中创建的 .SDF 表（访问表数据是从服务器应用程序传递的，并将其转换为 SQL Server Compact 记录/表）。

我想在 Visual Studio 2010 中从我的台式机查看它们。但尝试在服务器资源管理器中创建新的数据连接，选择两个“Microsoft SQL Server Compact”数据源（3.5 和 4.0）中的任何一个都会失败。

当我选择 3.5 然后“测试连接”时，它告诉我：

> 这不是有效的 SQL Server Compact 数据库文件，或者当前 SQL Server Compact 引擎不支持此文件版本。

当我选择 4.0，然后选择“测试连接”时，它告诉我：

> 不兼容的数据库版本。如果这是兼容文件，请运行修复。对于其他情况，请参阅文档。[ Db 版本 = 0，请求的版本 = 0，文件名 = MyRecalcitrantTable.SDF

有没有办法与这些表建立连接，以便我可以查询它们以查看它们包含的内容？如何确定它们是用哪个版本创建的（显然是在 3.5 之前），以便我可以使用早期版本的 VS 来查看它们（或其他工具？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:44:44.337

您可以使用我的 SQL Server Compact Toolbox VS 扩展，它具有检测文件版本功能，但它们可能是 2.0 版本的文件，并且只能在 Windows ce 设备（或模拟器）上打开

# r - 2D 填充轮廓图，按轴显示 1D 直方图

> ID：15301476
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:08:13.180
> 
> 标签：r, graphics, histogram

我的任务很简单，只是绘制以下内容，但中间的情节应该是一个填充的轮廓图：http: [//gallery.r-therapys.com/graph/Scatterplot_with_marginal_histograms_78](http://gallery.r-enthusiasts.com/graph/Scatterplot_with_marginal_histograms_78)

背景：我更喜欢 fill.contour 而不是 hist2d。因为，我可以使用内核平滑，所以离散数据的图不会太难看。我也尝试了 image()，然后是 contour()，但轮廓上的数字不清楚，也没有关于颜色的指示。

我的问题：在filled.contour 函数中，它使用 layout() 来填充轮廓 () 绘图和 rect() 绘图（颜色条）。但是，我在外部代码中使用 layout() 来组织 2 个直方图和一个 fill.contour 图。看起来，外面的布局被filled.contour() 遮蔽了。我不确定 R 如何处理这个问题。我应该以某种方式重写filled.contour() 吗？

如果我们可以像 Python 中的 matplotlib 一样在 R 中绘图，那么类似以下链接的内容将使生活变得更加轻松： http: [//matplotlib.org/examples/pylab_examples/scatter_hist.html](http://matplotlib.org/examples/pylab_examples/scatter_hist.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:44:52.660

这看起来与[CrossValidated 上的这个](https://stats.stackexchange.com/questions/51722/2d-filled-contour-plot-with-1d-histograms-by-axes-by-r/51728#51728)问题相同。在那里查看答案（这是使用`.filled.contour`而不是`filled.contour`.

# python - SublimeText2：我如何包含一些方法/类并让 Sublime 向我建议？

> ID：15301477
> 
> 赞同：0
> 
> 时间：2013-03-08T19:08:19.227
> 
> 标签：python, autocomplete, sublimetext2

我正在使用`SQLAlchemy`，`Sublime Text2`我做了以下

```
from sqlalchemy import Column
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()
# engine = create_engine('sqlite:///:memory:', echo=True)

class Transaction(Base):
    __tablename__ = 'transaction'
    id = Column() 
```

我希望 Sublime 看到我的导入/站点包，并建议我像 IntelliJ IDEA 和 Eclipse 一样导入它。
Sublime Text2 是否支持这种智能？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:19:29.123

The [Sublime CodeIntel plugin](https://github.com/Kronuz/SublimeCodeIntel) provides this functionality for you. Installation instructions at link.

# c# - C#如何比较两个单词字符串并指出哪些部分不同

> ID：15301481
> 
> 赞同：2
> 
> 时间：2013-03-08T19:08:35.883
> 
> 标签：c#, string, string-comparison

例如，如果我有...

```
string a = "personil";
string b = "personal"; 
```

我想得到...

```
string c = "person[i]l"; 
```

但是，它不一定是单个字符。我也可以这样...

```
string a = "disfuncshunal";
string b = "dysfunctional"; 
```

对于这种情况，我想得到...

```
string c = "d[isfuncshu]nal"; 
```

另一个例子是......（请注意，两个单词的长度不同。）

```
string a = "parralele";
string b = "parallel";

string c = "par[ralele]"; 
```

另一个例子是......

```
string a = "ato";
string b = "auto";

string c = "a[]to"; 
```

我该怎么做呢？

编辑：两个字符串的长度可以不同。

编辑：添加了其他示例。归功于用户 Nenad 的询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:47:01.840

我今天一定很无聊，但实际上我制作了通过所有 4 个案例的 UnitTest（如果您同时没有添加更多案例）。

**编辑**：添加了 2 个边缘情况并对其进行修复。

**Edit2**：重复多次的字母（以及这些字母上的错误）

```
[Test]
[TestCase("parralele", "parallel", "par[ralele]")]
[TestCase("personil", "personal", "person[i]l")]
[TestCase("disfuncshunal", "dysfunctional", "d[isfuncshu]nal")]
[TestCase("ato", "auto", "a[]to")]
[TestCase("inactioned", "inaction", "inaction[ed]")]
[TestCase("refraction", "fraction", "[re]fraction")]
[TestCase("adiction", "ad[]diction", "ad[]iction")]
public void CompareStringsTest(string attempted, string correct, string expectedResult)
{
    int first = -1, last = -1;

    string result = null;
    int shorterLength = (attempted.Length < correct.Length ? attempted.Length : correct.Length);

    // First - [
    for (int i = 0; i < shorterLength; i++)
    {
        if (correct[i] != attempted[i])
        {
            first = i;
            break;
        }
    }

    // Last - ]
    var a = correct.Reverse().ToArray();
    var b = attempted.Reverse().ToArray();
    for (int i = 0; i < shorterLength; i++)
    {
        if (a[i] != b[i])
        {
            last = i;
            break;
        }
    }

    if (first == -1 && last == -1)
        result = attempted;
    else
    {
        var sb = new StringBuilder();
        if (first == -1)
            first = shorterLength;
        if (last == -1)
            last = shorterLength;
        // If same letter repeats multiple times (ex: addition)
        // and error is on that letter, we have to trim trail.
        if (first + last > shorterLength)
            last = shorterLength - first;

        if (first > 0)
            sb.Append(attempted.Substring(0, first));

        sb.Append("[");

        if (last > -1 && last + first < attempted.Length)
            sb.Append(attempted.Substring(first, attempted.Length - last - first));

        sb.Append("]");

        if (last > 0)
            sb.Append(attempted.Substring(attempted.Length - last, last));

        result = sb.ToString();
    }
    Assert.AreEqual(expectedResult, result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:28:55.807

你试过我的[DiffLib](http://difflib.codeplex.com/)吗？

使用该库和以下代码（在[LINQPad](http://linqpad.net)中运行）：

```
void Main()
{
    string a = "disfuncshunal";
    string b = "dysfunctional";

    var diff = new Diff<char>(a, b);

    var result = new StringBuilder();
    int index1 = 0;
    int index2 = 0;
    foreach (var part in diff)
    {
        if (part.Equal)
            result.Append(a.Substring(index1, part.Length1));
        else
            result.Append("[" + a.Substring(index1, part.Length1) + "]");
        index1 += part.Length1;
        index2 += part.Length2;
    }
    result.ToString().Dump();
} 
```

你得到这个输出：

```
d[i]sfunc[shu]nal 
```

老实说，我不明白这给了你什么，因为你似乎完全忽略了字符串中更改的部分`b`，只转储了字符串的相关部分`a`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:23:36.700

这是一个完整且有效的控制台应用程序，适用于您提供的两个示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            string a = "disfuncshunal";
            string b = "dysfunctional";

            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < a.Length; i++)
            {
                if (a[i] != b[i])
                {
                    sb.Append("[");
                    sb.Append(a[i]);
                    sb.Append("]");

                    continue;
                }

                sb.Append(a[i]);
            }

            var str = sb.ToString();
            var startIndex = str.IndexOf("[");
            var endIndex = str.LastIndexOf("]");

            var start = str.Substring(0, startIndex + 1);
            var mid = str.Substring(startIndex + 1, endIndex - 1);
            var end = str.Substring(endIndex);

            Console.WriteLine(start + mid.Replace("[", "").Replace("]", "") + end);
        }
    }
} 
```

如果您想显示不匹配单词的多个完整部分，它将***不起作用。***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:31:27.097

如果字符串长度不同，您没有指定要做什么，但是当字符串长度相等时，这里有一个解决问题的方法：

```
private string Compare(string string1, string string2) {
            //This only works if the two strings are the same length..
            string output = "";
            bool mismatch = false;
            for (int i = 0; i < string1.Length; i++) {
                char c1 = string1[i];
                char c2 = string2[i];
                if (c1 == c2) {
                    if (mismatch) {
                        output += "]" + c1;
                        mismatch = false;
                    } else {
                        output += c1;
                    }
                } else {
                    if (mismatch) {
                        output += c1;
                    } else {
                        output += "[" + c1;
                        mismatch = true;
                    }
                }
            }
            return output;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T20:59:50.337

不是很好的方法，但作为使用 LINQ 的练习：任务似乎是为 2 个字符串找到匹配的前缀和后缀，返回“前缀 + [+ 第一个字符串的中间 + 后缀。

因此，您可以匹配前缀 (Zip + TakeWhile(a==b))，而不是通过反转两个字符串和反转结果对后缀重复相同的操作。

```
var first = "disfuncshunal";
var second = "dysfunctional";

// Prefix
var zipped = first.ToCharArray().Zip(second.ToCharArray(), (f,s)=> new {f,s});
var prefix = string.Join("", 
    zipped.TakeWhile(c => c.f==c.s).Select(c => c.f));

// Suffix
var zippedReverse = first.ToCharArray().Reverse()
   .Zip(second.ToCharArray().Reverse(), (f,s)=> new {f,s});
var suffix = string.Join("", 
    zippedReverse.TakeWhile(c => c.f==c.s).Reverse().Select(c => c.f));

// Cut and combine.
var middle = first.Substring(prefix.Length,
      first.Length - prefix.Length - suffix.Length);
var result = prefix + "[" + middle + "]" + suffix; 
```

更容易和更快的方法是使用 2 个`for`循环（从开始到结束，从结束到开始）。

# html - Google Chrome 与 Firefox 中的字体显示完全不匹配

> ID：15301485
> 
> 赞同：2
> 
> 时间：2013-03-08T19:08:41.160
> 
> 标签：html, css, font-face

我使用了来自 Goolge 的 CSS，结果令人费解。下面是两张截图。来自 Firefox 的那个显示了正确的（或者，至少是预期的渲染），来自 Chrome 的那个显示了一些随机字体......

![在此处输入图像描述](../Images/dbc96e0855fabadaeffc09747ab0f429.png) *火狐*

![在此处输入图像描述](../Images/5c7dd2874a51b69765786f06976bd7a6.png) *铬合金*

这就是我加载它的方式：

```
<link href='http://fonts.googleapis.com/css?family=Lobster+Two:700italic'
          rel='stylesheet' type='text/css'/> 
```

相关的 CSS 规则：

```
.digit {
    font-family: 'Lobster Two', cursive;
    font-size: 24pt;
    background-color: #d1d2d4;
    color: #ebebec;
    padding-left: 5px;
    padding-right: 5px;
    margin-bottom: 10px;
    cursor: pointer;
    display: block;
    float: left
} 
```

我很茫然...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:04:04.290

在某种程度上，遵循 Fluidbyte 的建议，我决定使用我拥有的字体文件，而不是来自谷歌 CDN 的字体文件，并且它有效。我仍然很想知道为什么我第一次尝试时它不起作用，但作为实用的解决方案（可能只与这种特定字体相关），如果你面临同样的问题，这应该会对你有所帮助。

# java - 基于 java 的音乐播放器仅识别 .wav 文件格式

> ID：15301488
> 
> 赞同：0
> 
> 时间：2013-03-08T19:08:49.553
> 
> 标签：java, swing, audio, javasound, clip

我正在尝试制作一个简单的基于 java 框架的音乐播放器。我已经成功这样做了，但如果它只播放 .wav 文件。即使我将加载文件条件更改为 .mp3 然后加载 mp3 文件，它也会显示 UnsupportedAudioFileException .. 请帮我纠正它。这是我的代码，请告诉我需要进行更正以停止在 cmd 中显示此错误。

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import javax.sound.sampled.*;
import java.io.*;
import java.net.*;

public class MusicPlayer extends Thread implements ActionListener {

    JLabel label;
    AudioInputStream ai;
    Clip c;
    JComboBox playlist;
    JButton play, loop, stop, open;
    JFrame f;
    String dest, str;
    JTextField tf;
    URL u;
    File file;

    MusicPlayer() {
        f = new JFrame("Music Player");
        f.setLayout(null);
        f.setSize(620, 300);
        f.setVisible(true);
        tf = new JTextField();
        tf.setBounds(25, 50, 565, 40);
        tf.setFont(new Font("Monotype Corsiva", Font.BOLD, 20));
        f.add(tf);
        tf.setHorizontalAlignment(JTextField.RIGHT);
        play = new JButton("play");
        play.setBounds(100, 150, 120, 30);
        play.addActionListener(this);
        f.add(play);
        loop = new JButton("loop");
        loop.setBounds(300, 150, 120, 30);
        loop.addActionListener(this);
        f.add(loop);
        stop = new JButton("stop");
        stop.setBounds(450, 150, 120, 30);
        stop.addActionListener(this);
        f.add(stop);
        open = new JButton("open");
        open.setBounds(100, 200, 420, 30);
        open.addActionListener(this);
        f.add(open);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void actionPerformed(ActionEvent ae) {
        String dest;

        if (ae.getActionCommand().equals("open")) {
            FileDialog fd = new FileDialog(f, "Open Box", FileDialog.LOAD);
            fd.setSize(300, 300);
            fd.setVisible(true);
            String s1 = "wav";
            String sng = fd.getFile();
            dest = fd.getDirectory() + fd.getFile();
            if (sng.toLowerCase().endsWith(s1)) {
                tf.setText(sng);
                file = new File(dest);
            } else {
                JOptionPane.showMessageDialog(f, "Select a valid file format");
            }
            try {
                c = AudioSystem.getClip();
                file = new File(dest);
                ai = AudioSystem.getAudioInputStream(file);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        if (ae.getActionCommand().equals("play")) {
            try {
                ai = AudioSystem.getAudioInputStream(file);
                c.close();
                c = AudioSystem.getClip();
                c.open(ai);
                c.start();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        if (ae.getActionCommand().equals("loop")) {
            try {
                ai = AudioSystem.getAudioInputStream(file);
                c.close();
                c = AudioSystem.getClip();
                c.open(ai);
                c.loop(Clip.LOOP_CONTINUOUSLY);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        if (ae.getActionCommand().equals("stop")) {
            c.stop();
            c.close();

        }
    }

    public static void main(String args[]) {
        new MusicPlayer();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:01:56.307

默认情况下，不提供 MP3 实现。如果您没有 MP3 SPI 的实现，`UnsupportedAudioFileException`将被抛出。试试[这个插件](http://www.javazoom.net/mp3spi/mp3spi.html)，它应该可以工作！

此外，[这篇文章](http://www.javaworld.com/javaworld/jw-11-2000/jw-1103-mp3.html)非常好，并提供了有关如何入门的详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:13:30.707

如果您使用的是 Java7，则可以使用内置`Media`和`MediaPlayer`类来播放 MP3。

看看[在 Java 中播放 .mp3 和 .wav？](https://stackoverflow.com/questions/6045384/playing-mp3-and-wav-in-java)更多细节。

# android - 在 xml 布局中设置 MapView v2 API 崩溃

> ID：15301490
> 
> 赞同：1
> 
> 时间：2013-03-08T19:08:55.060
> 
> 标签：android, google-maps-android-api-2

`MapView`当我尝试创建一个片段以保存它崩溃说找不到类时，我正在尝试创建一个包含 a 的布局以及其他项目（是的，我确实导入了谷歌播放服务库）

错误：

```
03-08 13:48:01.593: E/AndroidRuntime(30614): android.view.InflateException: Binary XML file line #7: Error inflating class com.google.android.gms.maps.MapView
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at com.ecm2.mobilemap.fragments.CurrentIncidentMapFrag.onCreateView(CurrentIncidentMapFrag.java:16)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.app.Fragment.performCreateView(Fragment.java:1695)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:885)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.app.BackStackRecord.run(BackStackRecord.java:682)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:441)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.os.Handler.handleCallback(Handler.java:725)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.os.Looper.loop(Looper.java:137)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at java.lang.reflect.Method.invokeNative(Native Method)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at java.lang.reflect.Method.invoke(Method.java:511)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at dalvik.system.NativeStart.main(Native Method)
03-08 13:48:01.593: E/AndroidRuntime(30614): Caused by: java.lang.reflect.InvocationTargetException
03-08 13:48:01.593: E/AndroidRuntime(30614):    at java.lang.reflect.Constructor.constructNative(Native Method)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-08 13:48:01.593: E/AndroidRuntime(30614):    ... 20 more
03-08 13:48:01.593: E/AndroidRuntime(30614): Caused by: java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
03-08 13:48:01.593: E/AndroidRuntime(30614):    at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
03-08 13:48:01.593: E/AndroidRuntime(30614):    at com.google.android.gms.maps.MapView.<init>(Unknown Source) 
```

布局xml：（布局会改变我只是想让地图先工作）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<com.google.android.gms.maps.MapView
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</LinearLayout> 
```

和我的片段

```
public class CurrentIncidentMapFrag extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater,ViewGroup container,Bundle saved){
    View v = inflater.inflate(R.layout.current_incident_mapping_layout,container,false);

    return v;
}

} 
```

我知道有一个地图片段，但我想要的不仅仅是一张地图，而且我不希望它占据片段中的整个视图，所以一个包含所有内容的视图片段是我唯一的选择。

我怎样才能让地图显示出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:28:24.797

您忘记输入您的 api 密钥

```
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="***"
/> 
```

并确保您在清单中有这一行

```
<uses-library android:name="com.google.android.maps" /> 
```

编辑

如果您删除 onDestroyView() 中的所有嵌套片段，您可以解决此问题。不知道这是否是一个适当的解决方案。

```
 public void onDestroyView() {
        super.onDestroyView(); 
        Fragment fragment = (getFragmentManager().findFragmentById(R.id.map));  
        FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
        ft.remove(fragment);
        ft.commit();
} 
```

并像往常一样在 onCreateView() 中膨胀它们

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.map, container, false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:42:12.463

我真的不明白，你是说你想使用 Google Map API V2。但您正在尝试使用作为 Google Map API V1 对象的 MapView 对象。如果你想创建一个带有版本的地图到这里：

[关联](https://blog-emildesign.rhcloud.com/?p=435)

这是我写的关于创建 Google Map API V2 的帖子。

# mysql - mysql.rb:6:in `r equire': 无法加载此类文件 -- mysql/mysql_api (LoadError)

> ID：15301492
> 
> 赞同：2
> 
> 时间：2013-03-08T19:09:14.600
> 
> 标签：mysql, ruby-on-rails, ruby, gem

在 Windows 7 上，尝试启动服务器时出现以下错误 [rails s]

```
C:/Ruby200/lib/ruby/gems/2.0.0/gems/mysql-2.9.1-x86-mingw32/lib/mysql.rb:6:in require': cannot load such file -- mysql/mysql_api (LoadError)
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/mysql-2.9.1-x86-mingw32/lib/mys
ql.rb:6:in 'rescue in <top (required)>'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/mysql-2.9.1-x86-mingw32/lib/mys
ql.rb:2:in '<top (required)>'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runti
me.rb:72:in 'require'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runti
me.rb:72:in 'block (2 levels) in require'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runti
me.rb:70:in 'each'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runti
me.rb:70:in 'block in require'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runti
me.rb:59:in 'each'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler/runti
me.rb:59:in 'require'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/bundler-1.3.2/lib/bundler.rb:13
2:in 'require'
        from C:/Users/tom_mckeon/Documents/rails/simple_cms/config/application.r
b:7:in '<top (required)>'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/comma
nds.rb:53:in 'require'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/comma
nds.rb:53:in 'block in <top (required)>'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/comma
nds.rb:50:in 'tap'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/railties-3.2.12/lib/rails/comma
nds.rb:50:in '<top (required)>'
        from script/rails:6:in 'require'
        from script/rails:6:in '<main>' 
```

我确实遵循了 mysql gem install 中的说明并复制 `lib\libmysql.dll to C:\Ruby\bin`
了我也尝试了 mysql2 gem 并得到了类似的错误

**这些是我的系统规格：**

```
 ruby 2.0.0p0 (2013-02-24) [i386-mingw32]
 Rails 3.2.12
 mysql (2.9.1 x86-mingw32)
 Server version: 5.1.68-community MySQL Community Server (GPL)
 Windows 7 
```

# c - 从 C 中的 *char[] 变量中获取第一个字符

> ID：15301495
> 
> 赞同：2
> 
> 时间：2013-03-08T19:09:32.157
> 
> 标签：c, pointers, casting, char, c-strings

我想在 C 中获取字符串 (char[]) 的第一个字符。

```
unsigned int N;
unsigned int F;
unsigned int M;
char C;
int main (int argc, char *argv[]){
    if (argc!=5){
        printf("Invalid number of arguments! (5 expected)\n");
        exit(-1);
    }
    N = atoi(argv [1]);
    F = atoi(argv [2]);
    M = atoi(argv [3]);
    C = (char) argv[4]; //this way gives a wrong char value to variable C 
```

上面的代码给了我警告：从不同大小的整数转换为指针。

编辑：正如评论中所指出的，argv 是 char *[]，而不是 char[]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:11:12.077

有两种主要方法可以做到这一点。第一种是简单地取消引用指针。

```
C = *argv[4]; 
```

您也可以通过数组下标来执行此操作，它会在取消引用之前隐式地向指针添加偏移量。

一定要先检查是否为null，以此类推。通常，在处理指针时需要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:11:14.293

`argv[4]`是一个`char`数组。您需要取消引用该数组以从中获取单个元素

```
C = *(argv[4]); 
```

# javascript - Twitter bootstrap 的日历/日期和时间选择器

> ID：15301507
> 
> 赞同：3
> 
> 时间：2013-03-08T19:10:40.273
> 
> 标签：javascript, twitter-bootstrap, datepicker, timepicker

我目前正在 Twitter 引导项目中处理一些日期和时间选择器。我总是觉得日历的东西很痛苦，因此这个问题。

有大量的解决方案可以获取工作日历、[html5 日期输入](http://www.w3schools.com/html/html5_form_input_types.asp)、[jquery-ui](http://jqueryui.com/datepicker/)、[pt-BR](http://tarruda.github.com/bootstrap-datetimepicker/)和[引导日期选择器](http://www.eyecon.ro/bootstrap-datepicker/)等等。所有这些都有其优点和缺点。html5 解决方案可能是最好的，因为它取决于浏览器的实现，而浏览器的实现通常是为适应设备屏幕尺寸而构建的。但这在许多浏览器中还没有实现，当然在旧版本中也不支持。并非所有上述内容都有时间选择器，这需要使用某种面具或其他东西额外输入时间......

我的项目设计为易于在手机上使用，并且可以很好地扩展以适应小屏幕。考虑到这一点，弹出式日历可能不是最佳解决方案。但是，找不到任何不使用弹出窗口的解决方案...

我提出这个问题的目的只是为了帮助我和其他人找到一种可靠的方法来在为所有屏幕设计的网页中实现日期和时间选择器。有没有人对上述任何一种或其他一些解决方案有任何经验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:59:05.157

为什么不默认使用 HTML5 日期输入，而回退到 IE8 及以下版本的 Bootstrap 日期选择器或 jQueryUI 日期选择器。只需使用特征检测来决定应该使用哪个选项。

检测是否支持输入类型“日期”的代码：

```
var i = document.createElement("input");
i.setAttribute("type", "date");
return i.type !== "text"; 
```

或使用 Modernizr 库：

```
if (!Modernizr.inputtypes.date) {
  // no native support for <input type="date"> :(
} 
```

您可以将其中任何一个放入您自己的函数中：

```
function dateTypeIsSupported() {
  // do one of the above methods and return true or false
} 
```

然后初始化您的日期字段。如果支持 HTML5，只需添加 type="date"，如果不支持，请附加 datepicker 插件：

```
<html>
  <input id='myDateField' />
</html>

<script>
  if ( dateTypeIsSupported() ) {
      // HTML5 is a go!
      document.getElementById('myDateField').type = 'date';
  } else {
      // No HTML5\. Use jQueryUI datepicker instead.
      $('#myDateField').datepicker();
  }
</script> 
```

参考：

*   [http://diveinto.html5doctor.com/detect.html#input-types](http://diveinto.html5doctor.com/detect.html#input-types)
*   [http://tjvantoll.com/2012/06/30/creating-a-native-html5-datepicker-with-a-fallback-to-jquery-ui/](http://tjvantoll.com/2012/06/30/creating-a-native-html5-datepicker-with-a-fallback-to-jquery-ui/)
*   [如何判断浏览器是否支持 <input type='date'>](https://stackoverflow.com/questions/10193294/how-can-i-tell-if-a-browser-supports-input-type-date)

# regex - Pattern matching in Perl

> ID：15301509
> 
> 赞同：0
> 
> 时间：2013-03-08T19:10:45.267
> 
> 标签：regex, perl

I am doing pattern match for some names below:

```
ABCD123_HH1
ABCD123_HH1_K 
```

Now, my code to grep above names is below:

```
($name, $kind) = $dirname =~ /ABCD(\d+)\w*_([\w\d]+)/; 
```

Now, problem I am facing is that I get both the patterns that is `ABCD123_HH1`, `ABCD123_HH1_K` in `$dirname`. However, my variable `$kind` doesn't take this `ABCD123_HH1_K`. It does take `ABCD123_HH1` pattern.

Appreciate your time. Could you please tell me what can be done to get pattern with `_k`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:15:34.533

You need to add the `_K` part to the end of your regex and make it optional with `?`:

```
/ABCD(\d+)_([\w\d]+(_K)?)/ 
```

I also erased the `\w*`, which is useless and keeps you from correctly getting the `HH1_K`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:19:08.747

You should check for zero or more occurrences of `_K`.

> `*` in Perl's regexp means zero or more times
> 
> `+` means atleast one or more times.

Hence in your regexp, append `(_K)*`.

Finally, your regexp should be this:

```
/ABCD(\d+)\w*_([\w\d]+(_K)*)/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:24:56.833

`\w`包括字母、数字和下划线。

所以你可以使用像这样简单的东西： `/ABCD\w+/`

# php - Fixing PHP Notices and Warnings?

> ID：15301520
> 
> 赞同：1
> 
> 时间：2013-03-08T18:06:25.943
> 
> 标签：php

I'm getting notices and warnings for this BMR Calculator PHP script, but I'm not sure whats causing them at all since these messages are only showing up in Firefox. [Heres a screenshot](http://d.pr/6kUq)

I added the php/html directly to my template file and turned php on for that file is that correct? [Here is the php/html](http://d.pr/Lrt2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:51:21.197

Your issue is with:

```
$gender    = $_REQUEST['gender'];
$met       = $_REQUEST['metric']; 
```

They're not defined in the query string or the posted data.

You could resolve the issue with an isset check.

```
# If gender is not set, set it to male by default.
$gender = isset( $_REQUEST['gender'] ) ? $_REQUEST['gender'] : 'male'; 
```

# c#-4.0 - how to recognize English sentences with SAPI5.4 on an Chinese Windows7

> ID：15301523
> 
> 赞同：0
> 
> 时间：2013-03-08T19:11:11.630
> 
> 标签：c#-4.0, windows-7, speech-recognition, sapi

I am using an Chinese Windows 7 with speech recognition working fine if I use the grammar to recognize English sentences which is constructed with the object of Choice.But the object of SpeechRecognitionEngine only can arise SpeechDetectedEventArgs and doesn't arise LoadGrammarCompletedEventArgs or RecognizeCompletedEventArgs when the the object of Grammar is constructed with the object of SrgsDocement.There is my fragement of the project.

```
 SpeechRecognitionEngine recognizer = new SpeechRecognitionEngine ( System.Globalization.CultureInfo.CreateSpecificCulture("zh-CN"));
            SrgsDocument srgsdoc = new SrgsDocument(./commongreetingGrammar.grxml");
            recognizer.MaxAlternates = 5;
            recognizer.LoadGrammarCompleted += new EventHandler<LoadGrammarCompletedEventArgs>(recognizer_LoadGrammarCompleted);
            recognizer.SpeechDetected += new EventHandler<SpeechDetectedEventArgs>(recognizer_SpeechDetected);
            recognizer.RecognizeCompleted += new EventHandler<RecognizeCompletedEventArgs>(recognizer_RecognizeCompleted);
            recognizer.LoadGrammar(new Grammar(srgsdoc));

            recognizer.SetInputToDefaultAudioDevice();
            recognizer.RecognizeAsync (RecognizeMode .Multiple);
        }
        catch (Exception ex)
        { Console.WriteLine(ex.Message); }
        Console.ReadKey();
    }

    static void recognizer_SpeechDetected(object sender, SpeechDetectedEventArgs e)
    {
        Console.WriteLine("Detect that someone is speeching");
    }

    static void recognizer_LoadGrammarCompleted(object sender, LoadGrammarCompletedEventArgs e)
    {
        if (e.Error == null)
            Console.WriteLine("complete to load grammar ");
        else
            Console.WriteLine("Fail to load grammar");
    }

    static void recognizer_RecognizeCompleted(object sender, RecognizeCompletedEventArgs e)
    {
        if (e.Result.Semantics["step"].Value.ToString() == "A1")
        {
            Console.WriteLine("A start to speak:{0}", e.Result.Text);
        }
    } 
```

And there is the file named commongreetingGrammar.grxml that constructs the object of SrgsDocement named srgsdoc .(Sorry to add the image of the .grxml file instead of the plain text of the .grxml file)

```
![enter image description here][1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T04:08:02.457

恐怕我没有清楚地提出我的问题。我尝试使用 SpeechRecognitionEngine 类（它是 SAPI5.4 的一部分）在安装了 Microsoft Speech Recognizer 8.0 for Windows（简体中文 - 中国）的中文 Windows7 上识别英文句子。使用用该对象构造的 Grammar 类的对象Choice类的SpeechRecognitionEngine类的对象加载了语法可以识别一些简单的英语句子，例如，“你好吗”，“是”，“退出”。但是，使用由.grxml文件构造的SrgsDocement对象构造的Grammar类对象，加载语法的SpeechRecognitionEngine对象不能识别一些简单的英文句子，只能检测音频输入。代码片段如下。

幸运的是，我今天找到了解决问题的方法。问题是我没有安装英语语言包，错误地构造了Grammar对象，导致SpeechRecognitionEngine对象无法识别英语句子。解决方法的细节我已经在[CodeProject](http://www.codeproject.com/Questions/558996/HowplustoplusrecognizeplusEnglishplussentencesplus#NewEntryGroup)中发布。

# php - TOP 10 的 SQL 查询取决于两列

> ID：15301529
> 
> 赞同：1
> 
> 时间：2013-03-08T19:11:16.377
> 
> 标签：php, html, sql, sql-server

我是 SQL 新手（初级程序员），所以如果这看起来像一个简单的问题，我深表歉意。我正在尝试在我的网站上创建一个表格，显示最低 10 年级以及有关学生的一些信息。从这方面来说我很舒服，但是我在编写写 SQL 查询时遇到了麻烦。我正在使用 SQL Server 2008。

我的数据库中有一个包含 10 列和 500 行的表。其中两列包含等级（等级 1 和等级 2）。我的目标是在我的网站表格中显示前 10 个最低 GRADE1，但如果 GRADE1 为 NULL，我希望它考虑 GRADE2 并改为显示它。因此，在上下文中，如果一个名为 Billy 的学生没有 GRADE1（其为 NULL），但他的 GRADE2 是所有学生中最低的（GRADE1 和 GRADE2 的组合），那么他应该是列表中的第一位。

我非常感谢帮助制作能够完成此任务的查询，我一直在研究解决方案，但它只会让我更加困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:16:16.470

在您想要使用的 SQL Server 中`isNull()`

```
SELECT TOP 10 isNull(grade1,grade2) AS `Grade`
FROM mytable
ORDER BY Grade DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:17:43.103

您可以在 order by 子句中使用 case

```
select top 10 * 
from students 
order by case when grade1 is null then grade2 else grade1 end desc 
```

编辑

在 BillyCode 评论只包括那些在表中出现 3 次或更多次的学生之后，我建议这样做

```
select top 10 s.*  
from students s
inner join (select StudentId, Count(*) as total from students) c on s.StudentId = c.StudentId  
where c.total >= 3
order by case when grade1 is null then grade2 else grade1 end desc 
```

但我不确定您是否可以加入子查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:13:22.500

该`COALESCE`功能可以满足您的需求。如果不为空或为空，`COALESCE(GRADE1, GRADE2)`将显示。`GRADE1``GRADE2``GRADE1`

所以代替`ORDER BY GRADE1`, 你可以做`ORDER BY COALESCE(GRADE1, GRADE2)`

[有关](http://msdn.microsoft.com/en-us/library/ms190349.aspx)`COALESCE`. _

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:16:41.007

试试这个：

```
select Top 10 
student , (case when grade1 is null then grade2 else grade1 end ) as g1 , grade2 as g2 from table order by g1 desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T16:04:58.593

另一种方法是先找出成绩最低的 10 名学生。将grade1重命名为grade。然后找出成绩最低的 10 名学生2。将grade2重命名为grade。之后联合这两个结果。从那里，找到成绩最低的 10 名学生。SQL 类似于：

```
SELECT id, grade
FROM   (SELECT   id, grade1 AS grade
        FROM     students
        ORDER BY grade1 DESC
        LIMIT 10
        UNION
        SELECT   id, grade2 AS grade
        FROM     students
        ORDER BY grade2 DESC
        LIMIT 10)
ORDER BY grade DESC
LIMIT 10 
```

# php - JavaScript 表单提交不发送输入类型=提交的值

> ID：15301531
> 
> 赞同：3
> 
> 时间：2013-03-08T19:11:23.593
> 
> 标签：php, javascript, jquery, post, forms

在某些情况下，我使用 jQuery 来自动提交表单。这是我的代码：

```
$("form [data-autosubmit]").closest("form").submit(); 
```

它可以工作，但是它不会发送`input type=submit`按钮的名称和值。

详细来说，下面的代码：

```
<form method="POST">
<input type="text" name="input" value="text they entered">
<input type="submit" name="submit" value="Submit">
</form> 
```

用户提交时将发送以下 POSTdata：

```
input: text they entered
submit: Submit 
```

但是，当通过 JavaScript 提交表单时，仅发送此 POSTdata：

```
input: text they entered 
```

我的 PHP 脚本依赖于 POSTdata 中存在的“提交”值。

我在想我可以这样做：

```
$("form [data-autosubmit]").closest("form").find("input[type=submit]").click(); 
```

`submit`但是，当表单上有一个为此目的的事件时，它似乎违反了逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:15:05.063

HTML`form`被构建为支持多个`submit`输入（例如，同一个表单可以有一个“插入”和“编辑”按钮）。因此，表单依赖于点击来实际注册`_POST`提交中选择的字段。基本上，HTML 允许这样的表单：

```
<form [...]>
  <input type="submit" name="Insert" value="Insert">
  <input type="submit" name="Update" value="Update">
</form> 
```

在服务器端像这样处理：

```
if(!empty($_REQUEST['Update'])){
  //Run update logic here..
}
elseif(!empty($_REQUEST['Insert'])){
  //Run insert logic here...
} 
```

如果 Javascript`submit()`函数在数组中注册了两个按钮，`POST`它将破坏使用此有效标记/逻辑的应用程序，因此它们默认省略`submit`输入。

因此，您的 Javascript 解决方法（触发点击提交按钮，而不仅仅是`submit()`表单）是正确的方法。

# jquery - Jquery UI Accordion：自动关闭一个部分

> ID：15301535
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:11:36.493
> 
> 标签：jquery, jquery-ui

我正在使用 jquery ui 小部件手风琴。我想知道是否有办法在一定秒数后自动关闭一个部分。

你可以写一些示例代码吗？

在此先感谢达尼洛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:23:15.120

它会是这样的：

```
$(function() {
    $( "#accordion" ).accordion({
      collapsible: true,
        activate: function( event, ui ) {
            setTimeout(function() {     
                $('#accordion').accordion('activate', false );
            },5000);
        }
    });
  }); 
```

你必须适应你的具体情况，[试试这个小提琴](http://jsfiddle.net/f5tqN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:20:30.307

SO 社区通常看不起“为我编写代码”问题。我会给你一个提示，但在未来，请先尝试一下，然后再在这里提问。

```
setTimeout(function(){
    $('.accordion').accordion('activate', false );
}, 2000); 
```

# iphone - Cocos2D CGRectIntersect 没找到？

> ID：15301536
> 
> 赞同：1
> 
> 时间：2013-03-08T19:11:38.347
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我在 Cocos2D (v2.0) 中的游戏有问题。我遇到了两个问题（我在代码部分中对它们进行了评论）。这是 Bullet.m 文件：

```
-(BOOL)checkCollisions:(CGRect)r
{
BOOL x = NO;

if(CGRectIntersectsRect([theGame myRect:self.mySprite],r)) //FIRST ISSUE - Sending 'id' to parameter of incompatible type 'CGRect' (aka 'struct CGRect'); 
                                                           //SECOND ISSUE - Instance method'-myRect:' not found (return type defaults to 'id') 
{
    x=YES;
    [self reset];
}
return x;
} 
```

稍后在此文件中：

```
-(void)update
{
switch (self.whoFired)
{
    case 1:
        [self.mySprite setPosition:ccp(self.mySprite.position.x,self.mySprite.position.y + self.firingSpeed)];

        for(Enemy * s in theGame.enemies)
        {
            if(ccpDistance(self.mySprite.position, s.mySprite.position)<30)
            {
              if([self checkCollisions:[theGame myRect:s.mySprite]]) //FIRST ISSUE - Sending 'id' to parameter of incompatible type 'CGRect' (aka 'struct CGRect')
                                                                     //SECOND ISSUE - Instance method '-damage' not found (return type defaults to 'id')
                {
                    [s damage];
                }
            }
        }
        break;
... 
```

因此，两个错误是相同的：将“id”传递给不兼容类型“CGRect”（又名“struct CGRect”）的参数。另外两个是关于 Damage 和 MyRect 函数的。它们当然存在（在 GameScene.m 和 Enemy.m 文件中；所有内容都由 .h 文件连接，并且在 Damae 和 MyRect 函数中没有错误）：

```
-(CGRect)myRect:(CCSprite *)sp
{
CGRect rect = CGRectMake(sp.position.x-sp.textureRect.size.width/2, sp.position.y-sp.textureRect.size.height/2, sp.textureRect.size.width, sp.textureRect.size.height);
return rect;
}

-(void)damage
{
self.hp--;
[self.mySprite runAction:[CCSequence actions:
                          [CCTintTo actionWithDuration:0.5 red:255 green:0 blue:0],
                          [CCTintTo actionWithDuration:0.5 red:255 green:255 blue:255],nil]];
if(hp<=0)
{
    [self destroy];
}
} 
```

有什么问题？为什么编译器看不到 myRect 和损坏函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:26:48.560

为什么不能使用 CCSprite 的默认 boundingBox ？

```
if(CGRectIntersectsRect([self.mySprite boundingBox],r)) 
```

# php - Symfony2 路由：两个可选参数 - 至少需要一个

> ID：15301546
> 
> 赞同：10
> 
> 时间：2013-03-08T19:12:25.010
> 
> 标签：php, symfony, routing

我正在尝试在 symfony2 中为以下模式设置一些路由：

```
www.myaweseomesite.com/payment/customer/{customernumber}/{invoicenumber} 
```

这两个参数都是可选的 - 所以以下场景必须有效：

```
www.myaweseomesite.com/payment/customer/{customerNumber}/{invoiceNumber}
www.myaweseomesite.com/payment/customer/{customerNumber}
www.myaweseomesite.com/payment/customer/{invoiceNumber} 
```

我根据[symfony2 doc](http://symfony.com/doc/2.0/book/routing.html)设置了我的 routing.yml 。

```
payment_route:
pattern:  /payment/customer/{customerNumber}/{invoiceNumber}
defaults: { _controller: PaymentBundle:Index:payment, customerNumber: null,  invoiceNumber: null }
requirements:
    _method:  GET 
```

到目前为止，这很好用。问题是，如果两个参数都丢失或为空，则路由不应该工作。所以

```
www.myaweseomesite.com/payment/customer/ 
```

不应该工作。有什么办法可以用 Symfony2 做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T20:07:26.153

您可以在两条路线中定义它，以确保只有 1 个斜杠。

```
payment_route_1:
    pattern:  /payment/customer/{customerNumber}/{invoiceNumber}
    defaults: { _controller: PaymentBundle:Index:payment, invoiceNumber: null }
    requirements:
        customerNumber: \d+
        invoiceNumber: \w+
        _method:  GET

payment_route_2:
    pattern:  /payment/customer/{invoiceNumber}
    defaults: { _controller: PaymentBundle:Index:payment, customerNumber: null }
    requirements:
        invoiceNumber: \w+
        _method:  GET 
```

请注意，您可能必须根据您的确切需求更改定义参数的正则表达式。你可以[看看这个](http://symfony.com/doc/current/book/routing.html#adding-requirements)。复杂的正则表达式必须被`"`. （示例`myvar : "[A-Z]{2,20}"`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-20T11:51:02.273

要详细说明@Hugo 的答案，请在带有注释的配置下方找到：

```
/**
 * @Route("/public/edit_post/{post_slug}", name="edit_post")
 * @Route("/public/create_post/{root_category_slug}", name="create_post", requirements={"root_category_slug" = "feedback|forum|blog|"})
 * @ParamConverter("rootCategory", class="AppBundle:Social\PostCategory", options={"mapping" : {"root_category_slug" = "slug"}})
 * @ParamConverter("post", class="AppBundle:Social\Post", options={"mapping" : {"post_slug" = "slug"}})
 * @Method({"PUT", "GET"})
 * @param Request $request
 * @param PostCategory $rootCategory
 * @param Post $post
 * @return array|\Symfony\Component\HttpFoundation\RedirectResponse
 */
public function editPostAction(Request $request, PostCategory $rootCategory = null, Post $post = null)
{ Your Stuff } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T09:15:07.997

根据文档：

[http://symfony.com/doc/current/routing/optional_placeholders.html](http://symfony.com/doc/current/routing/optional_placeholders.html)

在控制器的注释中为可选参数设置默认值：

```
/**
* @Route("/blog/{page}", defaults={"page" = 1})
*/
public function indexAction($page)
{
   // ...
} 
```

这样你在 routing.yml 中只需要一个路由

# python - 将reStructuredText中的字段转成html

> ID：15301551
> 
> 赞同：0
> 
> 时间：2013-03-08T19:12:37.863
> 
> 标签：python, restructuredtext, docutils

所以我有一个 reStructuredText 文档，其中包括以下字段：

```
:param foo: set this to do magic 
```

我想将 rST 转换为 html，并对`param`（和其他）字段进行特殊处理。

[可以按照此处](https://stackoverflow.com/questions/10766609/extract-field-list-from-restructuredtext/10782270#10782270)`docutils.core.publish_parts`的建议将 rST 转换为 html ，但显然无法控制字段的输出方式。或者我可以按照[这里](https://stackoverflow.com/questions/10766609/extract-field-list-from-restructuredtext)的建议使用来获取伪 XML，并且大概（相当乏味）修改它，但我不知道如何控制如何将其转换为 html。`docutils.core.publish_doctree`

我可以看到 中有一个`HTMLTranslator`类`docutils.writers.html4css1.__init__.py`，但我肯定不能仅仅为了控制字段的输出方式而修改它吗？我希望某处有某种模板系统可以控制如何将 XML 转换为 html ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:21:10.243

take a look at this and let me know if this help u out

[ReStructuredText (reST)](http://wiki.python.org/moin/ReStructuredText)

# backbone.js - Marionette.js：CompositeView：getItemView 在初始化时总是返回“未定义”

> ID：15301555
> 
> 赞同：3
> 
> 时间：2013-03-08T19:12:53.063
> 
> 标签：backbone.js, marionette

我有一个复合视图和 ItemViews 如下（我的视图的简化版本）：

```
testView1 = Backbone.Marionette.ItemView.extend({
    template: '#test-view-1'
}
testView2 = Backbone.Marionette.ItemView.extend({
    template: '#test-view-2'
}

TestView = Backbone.Marionette.CompositeView.extend({
    template: '#test-template',
    itemViewContainer:'tbody',
    itemView: testView1,
    getItemView: function(item){
        console.log('item');        //<==== FIRED 101 TIMES
        if (!item) {                //<==== WHY DO I NEED THIS
            return testView1;       //<==== WHY DO I NEED THIS
        } else {
            return ('testView' + item.id);
        }
    }
}); 
```

问题是，当 CompositeView 初始化时，它会`getItemView`在将 an 传递给它之前运行代码`item`，从而产生错误。如果没有`if`我添加的条件，视图就会中断。

我传递到复合视图的集合包含 100 个模型，并且`console.log('item');`被触发了 101 次，第一次总是“未定义”，其余 100 次是预期的 100 个模型。

我的问题是，为什么我`item`每次都需要检查是否存在，我可以做些什么来避免需要这个检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T12:00:50.537

我在我的代码中尝试使用您的自定义 getItemView 函数，我得到了相同的行为。

跟踪调用似乎 getItemView 在 CompositeView 的构造函数中被调用一次，以将您传递给 CompositeView 对象的 itemView 分配给：`this.itemView = this.getItemView();`

因此，我认为您在返回正确的 itemView 实例之前检查是否通过了项目是正确的。

# c - 将 char 转换为 int 不起作用

> ID：15301556
> 
> 赞同：3
> 
> 时间：2013-03-08T19:12:53.747
> 
> 标签：c

我知道这有多种方法，但我试图让用户输入一个字符并将该字符转换为特定的整数以供以后使用。我正在使用`#define`常量来简化事情，以防以后需要更改。我为 userChoice 获得的值不是 0、1 或 2，而是一个很大的数字，所以出了点问题。

这些是代码的相关部分。

```
 #define ROCK 0
    #define PAPER 1
    #define SCISSORS 2
    void getData (int* userChoice)
{
    char charvalue;
    printf("\n\nEnter the R, P, S, or Q (for quit) ");
    scanf("%c", &charvalue);
    charvalue = toupper(charvalue);
    if (charvalue == 'R')
        *userChoice = ROCK;
    else if (charvalue == 'P')
        *userChoice = PAPER;
    else if (charvalue == 'S')
        *userChoice = SCISSORS;
    else if (charvalue == 'Q')
        exit (1);
    else
        printf("\nerror");
    printf("%d", userChoice);

    return;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:14:25.430

您打印整数的*地址*，而不是值。要打印该值，请**使用`*userChoice`**.

```
printf("%d", *userChoice); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:21:11.303

您的输入是一个指向 int 的指针，因此您必须打印指针 *userChoice 的值。

更好的做法是让函数将选择作为无符号整数返回，而不是传递引用并修改引用。换句话说，最好使用如下接口：

unsigned int getUserChoice(){ ... 等等。

# java - 使用同一个客户端套接字向服务器套接字发送多条消息

> ID：15301561
> 
> 赞同：3
> 
> 时间：2013-03-08T19:13:22.437
> 
> 标签：java, sockets

那里有一百万个使用 Java 套接字的例子——而且每个例子都是一样的！每个都显示一个客户端套接字正在创建，一些文本正在发送，并且套接字关闭。

我正在编写一些测试代码。我希望我的客户循环并发送相当多的消息。每次关闭客户端套接字并重新创建似乎很愚蠢，所以我想我只会创建一个客户端套接字，循环并在同一个套接字上发送数据。问题是 - 我的服务器套接字在客户端发送最后一条消息并且客户端套接字关闭之前不会打印出它收到的内容。

服务器：

```
Socket  sock;
ClientConnection    client;

ServerSocket ss = new ServerSocket(portNumber);
ss.setSoTimeout(0); // 0=infinite

while (true) {
    sock = ss.accept();
    client = new ClientConnection(sock);
    new Thread(client).start();
    // ClientConnection reads from sock, prints, and closes sock
} 
```

ClientConnection（服务器端的一个单独的类）：

```
public class ClientConnection implements Runnable
{
    private Socket  m_socket;
    private BufferedReader m_in = null;

    public ClientConnection(Socket socket)
    {
        m_socket = socket;

        try {
            InputStream inStream = socket.getInputStream();
            m_in = new BufferedReader(new InputStreamReader(inStream));
        }
        catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }

    public String getMessage()
    {
        String line = null;
        StringBuffer    completeMessage = new StringBuffer();

        try {
            while ((line = m_in.readLine()) != null)
            {
                completeMessage.append(line);
            }
         }
         catch (IOException ioe) {
             ioe.printStackTrace();
             return "";
         }

         return completeMessage.toString();
    }

    public void run()
    {
        try {
            String message = getMessage();
            System.out.println("Received: " +message);
        }
        finally
        {
            try {
                m_socket.close();
            }
            catch (IOException ioe) {
                ioe.printStackTrace();
            }
        }
    }
} 
```

客户：

```
socket = new java.net.Socket(m_destination, m_portNumber);
outputStream = socket.getOutputStream();
printStream = new java.io.PrintStream(outputStream);

while (more-stuff-to-send)
{
    printStream.print(text);
    printStream.print("\n");
    printStream.flush();
}

prinStream.close();
socket.close(); 
```

ClientConnection 是在我启动客户端时由服务器创建的，但在客户端完成发送之前它不会打印已发送的内容。

我觉得我错过了沿线的某个地方。聊天示例很常见，所以如果我有一个聊天客户端，那么它想要发送到聊天服务器的每条消息都会创建一个客户端套接字，发送消息，然后关闭套接字？只是在某种程度上似乎不对。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T19:18:18.193

```
client = new ClientConnection(sock); 
```

您正在构造函数中传递套接字。

所以你不应该这样做：

```
socket = new java.net.Socket(m_destination, m_portNumber); 
```

只需将来自构造函数的变量缓存为：`this.sock = sock;` 获取阅读器和编写器就可以了，服务器也可以。

我会使用一个向量作为同步队列来发送消息，并且`while (more-stuff-to-send)`循环将检查队列和 id 为空而不是睡眠，如果有东西要发送，而不是弹出第一个并在他必须做的事情时发送它，或者套接字关闭我的客户端。

# css-float - 浮动的 div 列，最左侧固定

> ID：15301572
> 
> 赞同：2
> 
> 时间：2013-03-08T19:14:20.700
> 
> 标签：css-float, html, css-position

我想让一个 div 向左浮动，*它是固定*的，但在它旁边还有另一个 div 浮动（即，两个 comns，但当页面滚动时最左边的仍然在原位）。

据我所知，[fixed 和 position 不能混合](https://stackoverflow.com/questions/6568548/div-with-fixed-positioning-and-float)，并且只能通过例如向第二个（最右边）div 添加一个 margin-left 来实现这一点，（[像这样](https://stackoverflow.com/questions/5661310/how-to-make-the-leftmost-of-many-other-left-floated-fixed-width-divs-occupy-rema))

但是，我保留了一丝希望，我带到这里要么被激怒，要么被扼杀。

所以，我想在这里更改css，这样我就可以取出margin-left标签，让#body div浮动到#menu之一：

```
 <!DOCTYPE html>
    <html>
    <head>
    <style>
    #menu
    {
    float:left; width: 10em; position: fixed;
    }

    #body
    {
    float:left; maring-left: 10em;
    }

    #footer
    {
    clear:both;
    }
    </style>
    </head>

    <body>
    <div /*main div others are nested in*/>

    <div id="menu">
    menu<br/>menu<br/>menu<br/>menu<br/>menu<br/>menu<br/>menu<br/>menu<br/>menu<br/>menu<br/>menu<br/>menu

    </div>
    <div id="body">
    <p>
    body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body body 
    </p>

    <div id="footer">
    footer footer footer footer footer footer footer footer footer footer footer footer footer footer footer
    </div>
    </div>
    </div>
    </div>
    </body>
    </html> 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T17:32:22.640

左边距上的拼写错误 ttp://jsfiddle.net/BYMZD/

# jquery - 在可排序的 jquery 中取消 mouseup 以防止灯箱响应

> ID：15301578
> 
> 赞同：2
> 
> 时间：2013-03-08T19:14:47.910
> 
> 标签：jquery, jquery-ui, jquery-plugins

jQuery v1.7.1 jQuery UI 1.8.10 jquery-lightbox-0.5.js

仅在 FireFox 中存在 jquery-ui 可排序和灯箱共存的问题（Chrome 和 IE 不是问题）。在列表中图像的拖放操作结束时，可排序可以正常工作，但显然无法取消鼠标向上事件，因此灯箱继续打开图像。我可以用 sortable 做些什么来确保灯箱不会触发吗？或者，灯箱可以响应单击而不是 mouseup 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:23:15.803

您可以创建一个 isDragging 变量并在处理程序中将其设置为 true 以进行排序。为灯箱 mouseup 事件创建一个处理程序并检查是否 isDragging。如果为真，则取消，如果为假，则什么也不做。最后不要忘记在可拖动停止事件中将 isDragging 设置为 false。

# java - Maven 依赖——抛出 load() 异常

> ID：15301587
> 
> 赞同：0
> 
> 时间：2013-03-08T19:15:12.500
> 
> 标签：java, maven, hadoop

我正在使用 Maven 在 Java 中创建一个新项目。我将不得不使用 Mongo 和 Hadoop。但是当我使用以下依赖项并尝试使用 tomcat:run 运行应用程序时，我得到 Throws load() 异常。

依赖是

```
 <dependency>
            <groupId>org.mongodb</groupId>
            <artifactId>mongo-hadoop-core_1.0.2</artifactId>
            <version>1.0.0</version>
        </dependency> 
```

错误是：

**严重：Servlet /MongoRESTApi 抛出 load() 异常 java.lang.ClassCastException: org.apache.jasper.servlet.JspServlet 无法转换为 javax.servlet.Servlet**

我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:54:47.757

您可能会遇到[jar hell](http://en.wikipedia.org/wiki/Java_Classloader#JAR_hell)问题：

> Java 应用程序的开发人员或部署人员意外地为系统提供了两个不同版本的库。

mongo-hadoop-core_1.0.2 依赖可能引入了进一步的传递依赖；可能是您需要[排除](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)的第二个 servlet-api 。
查找错误的依赖项可能很乏味，因此我建议您在构建阶段包含[JBoss Tattletale](http://docs.jboss.org/tattletale/userguide/1.2/en-US/html/maven.html)插件。配置`multiplejars`报告并*启用* `failOnWarn`和`failOnError`。生成的报告将列出可以在多个 jar 中找到的那些类。从这里您将看到应该排除哪些依赖项以逃离 jar 地狱。

# php - 是否可以连接 Vb6 和 PHP？

> ID：15301593
> 
> 赞同：0
> 
> 时间：2013-03-08T19:15:41.907
> 
> 标签：php, vb6, connection

我有一个 mysql 作为数据库的 vb6 程序。我的导师让我将我的 vb6 连接到 php。php 代码仅查看 vb6 中的内容，例如报告。我的问题是，这可能吗？我用谷歌搜索了这个，但没有出现具体的想法。如果是这样，我该如何实现这一目标或实现这一目标的步骤是什么？

我对此感到困惑，因为我只知道 php 和 mysql 连接。VB6 到 PHP 对我来说是新事物。如果这是不可能的，也许我应该使用 php 和 mysql。我只是想知道这是否可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:18:58.777

我将在那里抛出一个答案。不，您不能让 PHP 查看“VB6 内部”的内容。您不能将 VB6（或任何 VB）与 PHP 混合使用。但是您可以让它们（两个应用程序）通过各种方法（例如 API 调用和数据库）相互交互。

我认为您的意思是，您有一个连接到并使用 MySQL 数据库的 VB6 应用程序。

只需使用 PHP 连接到同一个 MySQL 数据库，您就可以让两个系统共享数据或“查看 VB6 中的内容”。

如何在 PHP [http://www.php.net/manual/en/book.mysqli.php中连接到 MySQL](http://www.php.net/manual/en/book.mysqli.php)

# memory - 使用 Marshal.AllocHGlobal 分配的内存已损坏？

> ID：15301602
> 
> 赞同：0
> 
> 时间：2013-03-08T19:16:34.623
> 
> 标签：memory, bitmap, gdi+, system.drawing, pixels

我需要创建`Bitmap`可以直接访问其像素数据的对象。

`LockBits`对我的需要来说太慢了——它不适合快速重新创建（有时很大）位图。

所以我有一个自定义`FastBitmap`对象。它有一个`Bitmap`对象的引用和一个`IntPtr`指向位图中位的对象。

构造函数如下所示：

```
public FastBitmap(int width, int height)
{
    unsafe
    {
        int pixelSize = Image.GetPixelFormatSize(PixelFormat.Format32bppArgb) / 8;
        _stride = width * pixelSize;

        int byteCount = _stride * height;

        _bits = Marshal.AllocHGlobal(byteCount);

        // Fill image with red for testing
        for (int i = 0; i < byteCount; i += 4)
        {
            byte* pixel = ((byte *)_bits) + i;
            pixel[0] = 0;
            pixel[1] = 0;
            pixel[2] = 255;
            pixel[3] = 255;

        }

        _bitmapObject = new Bitmap(width, height, _stride, PixelFormat.Format32bppArgb, _bits); // All bits in this bitmap are now directly modifiable without LockBits. 

    }
} 
```

分配的内存在由解构器调用的清理函数中释放。

这有效，但不会持续很长时间。不知何故，如果不对位进行任何进一步的修改，分配的内存就会损坏，从而损坏位图。有时，位图的大部分被随机像素替换，有时当我尝试显示它时整个程序崩溃`Graphics.DrawImage`- 一个或另一个，完全随机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:13:45.230

内存被破坏的原因是因为我`Bitmap.Clone`在`_bitmapObject`完成`FastBitmap`.

`Bitmap.Clone`调用时不会制作像素数据的新副本，或者至少在您`Bitmap`使用自己分配的数据创建 a 时是这种情况。

相反，克隆似乎使用完全相同的像素数据，这对我来说是个问题，因为我在克隆操作后释放像素数据内存，导致克隆的位图在内存用于其他用途时损坏。

我发现的第一个也是当前的解决方案`Bitmap.Clone`是使用：

`Bitmap clone = new Bitmap(bitmapToClone);`

它确实将像素数据复制到其他地方，从而可以释放旧内存。

可能有更好/更快的方法来制作完全复制的克隆，但目前这是一个简单的解决方案。

# php - 如何使用 php DOMdocument 将新元素附加到 XML 文件？

> ID：15301603
> 
> 赞同：2
> 
> 时间：2013-03-08T19:16:34.783
> 
> 标签：php, xml, dom, domdocument

我有这个 test.xml：

```
<?xml version="1.0"?>
<Images>
  <Image>
    <Id>765</Id>
    <Title>Img title 1</Title>
    <Name>some_path_to_img.jpg</Name>
  </Image>
</Images> 
```

我尝试将 new 附加`'<Image>'`到`'<Images>'`，但没有成功。这是我的代码：

```
function update_xml_file() {
  $xml = new DOMDocument();
  $xml->load(file_get_contents('test.xml'));
  $xml->formatOutput = true;

  $base_node = $xml->getElementsByTagName('Images')->item(0);
  $newimage = $xml->createElement("Image");

  $img_id = $xml->createElement("Id");
  $img_title = $xml->createElement("Title");
  $img_name = $xml->createElement("Name");

  $img_id->nodeValue = '766';
  $img_title->nodeValue = 'Image title 2';
  $img_name->nodeValue = 'some_path_to_img2.jpg';

  $newimage->appendChild($img_id);
  $newimage->appendChild($img_title);
  $newimage->appendChild($img_name);

  $base_node->appendChild($newimage);

  umask();
  $xml->save("test.xml");
} 
```

四处寻找相关讨论对我没有帮助。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:20:15.783

您在加载 xml 数据的代码中有一点拼写错误。

将其更改为：

```
$xml->loadXML(file_get_contents('test.xml')); 
```

或更好）

```
$xml->load('test.xml'); 
```

参考文档[`DOMDocument::loadXML()`](http://www.php.net/manual/en/domdocument.loadxml.php)和[`DOMDocument::load()`](http://www.php.net/manual/en/domdocument.load.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-27T17:27:30.293

您还可以使用来自 github 的这个包来简化[http://github.com/toureiliass/xdt](http://github.com/toureiliass/xdt)

您可以在几行代码中完成

```
$con = new XDT();
$con->connect('test.xml');
$con->getDocumentRootElement()->append('<image><id>765</id><title>some title</title><name>some_path_to_image.jpg</name></image>');
$con->save(); 
```

# ios - 自定义 UIPageViewController 的导航行为

> ID：15301605
> 
> 赞同：0
> 
> 时间：2013-03-08T19:16:50.150
> 
> 标签：ios, uipageviewcontroller

我想自定义`UIPageViewController`;的导航行为 具体来说，我想根据用户*在屏幕上*拖动她/他的手指的位置导航到不同的页面。关于从哪里开始的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:10:17.390

页面视图控制器的 curl 导航由 a`UIPanGestureRecognizer`和触发`UITapGestureRecognizer`。您可以在页面视图控制器的`gestureRecognizers`属性中找到这些。

在您的`pageViewController:viewControllerBeforeViewController:`方法和您的`pageViewController:viewControllerAfterViewController:`方法中，您可以向平移手势识别器询问其在页面视图控制器视图中的位置，并使用它来决定导航的位置。您可能希望将决定实际委托给当前显示的视图控制器。

```
static UIPanGestureRecognizer *panRecognizerOfPageViewController(UIPageViewController *pageViewController) {
    for (id recognizer in pageViewController.gestureRecognizers) {
        if ([recognizer isKindOfClass:[UIPanGestureRecognizer class]])
            return recognizer;
    }
    return nil;
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
    viewControllerBeforeViewController:(UIViewController *)vc
{
    DetailViewController *dvc = (DetailViewController *)vc;
    UIPanGestureRecognizer *panner = panRecognizerOfPageViewController(pageViewController);
    CGPoint point = [panner locationInView:dvc.view];
    return [dvc priorViewControllerWithPoint:point];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
    viewControllerAfterViewController:(UIViewController *)vc
{
    DetailViewController *dvc = (DetailViewController *)vc;
    UIPanGestureRecognizer *panner = panRecognizerOfPageViewController(pageViewController);
    CGPoint point = [panner locationInView:dvc.view];
    return [dvc nextViewControllerWithPoint:point];
} 
```

在我的测试中，我只需要询问平移手势识别器的位置。当手势是平移时，两个识别器都处于“可能”状态。当手势是点击时，平移识别器处于“失败”状态，但无论如何它都会报告点击触摸的位置。

当然，这不是记录在案的行为。如果您不想依赖它，则需要以其他方式访问当前触摸的位置。我可能只是使用一个子类`UIWindow`并覆盖它`sendEvent:`来将最近的触摸事件保存在一个实例变量中以便于访问。

# android - 试图让地图 v2 Android 演示工作

> ID：15301607
> 
> 赞同：3
> 
> 时间：2013-03-08T19:17:07.573
> 
> 标签：android, google-maps-android-api-2

安卓新手等。

所以我被推荐了这个演示： [http ://dj-android.blogspot.in/2013/02/android-google-map-v2-part-1.html](http://dj-android.blogspot.in/2013/02/android-google-map-v2-part-1.html)

我跟着它，但一定出了什么问题。

...

*   在**工作区**中，我有自己的项目：
*   在这个项目中：在“Libs”中，我添加了“android-support-v4.jar”
*   在这个项目中：在 Android 依赖我有“android-support-v4.jar”
*   在这个项目中：在参考库中我有“google-play-services.jar”
*   在这个项目中：在参考库中我有“android-support-v4.jar”

...

*   在**工作区**中，我将 google-play-services_lib 作为项目：
*   在这个项目中：在“Libs”中，我有“google-play-services.jar”
*   在这个项目中：在“Libs”中，我有“google-play-services.jar.properties”
*   在这个项目中：在“Android Dependencies”中，我有“google-play-services.jar”

...

当我在 SGII v4.1.2 上运行上述项目时，我得到黑屏，然后是 crasj，然后是错误：

```
03-09 00:28:49.957: E/AndroidRuntime(20309): FATAL EXCEPTION: main
03-09 00:28:49.957: E/AndroidRuntime(20309): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mapstest/com.example.mapstest.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.ActivityThread.access$700(ActivityThread.java:140)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.os.Looper.loop(Looper.java:137)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.ActivityThread.main(ActivityThread.java:4921)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at java.lang.reflect.Method.invokeNative(Native Method)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at java.lang.reflect.Method.invoke(Method.java:511)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at dalvik.system.NativeStart.main(Native Method)
03-09 00:28:49.957: E/AndroidRuntime(20309): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:313)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.Activity.setContentView(Activity.java:1924)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at com.microsystools.mapstest.MainActivity.onCreate(MainActivity.java:17)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.Activity.performCreate(Activity.java:5206)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2074)
03-09 00:28:49.957: E/AndroidRuntime(20309):    ... 11 more
03-09 00:28:49.957: E/AndroidRuntime(20309): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.support.v4.app.Fragment.instantiate(Fragment.java:401)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.support.v4.app.Fragment.instantiate(Fragment.java:369)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
03-09 00:28:49.957: E/AndroidRuntime(20309):    ... 21 more
03-09 00:28:49.957: E/AndroidRuntime(20309): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment
03-09 00:28:49.957: E/AndroidRuntime(20309):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-09 00:28:49.957: E/AndroidRuntime(20309):    at android.support.v4.app.Fragment.instantiate(Fragment.java:391)
03-09 00:28:49.957: E/AndroidRuntime(20309):    ... 24 more 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"  

   xmlns:tools="http://schemas.android.com/tools"  
   android:layout_width="match_parent"  
   android:layout_height="match_parent"  
   tools:context=".MainActivity" >  
   <fragment  
     android:id="@+id/fragment1"  
     android:layout_width="match_parent"  
     android:layout_height="match_parent"  
     class="com.google.android.gms.maps.SupportMapFragment" />  
 </RelativeLayout> 
```

MainActivity.Java

```
package com.example.mapstest;

import android.app.Activity;  
import android.os.Bundle;  
import android.support.v4.app.FragmentActivity;  
import android.app.Activity;
import android.view.Menu;  

  public class MainActivity extends FragmentActivity {  
       @Override  
       protected void onCreate(Bundle arg0) {  
            // TODO Auto-generated method stub  
            super.onCreate(arg0);  
            setContentView(R.layout.activity_main);  
       }  
  } 
```

**注1：**

你们相信这可能是与 API 密钥相关的问题吗？我将其用作 API 密钥：

```
HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH:HH;com.exampledomain.exampleproject 
```

*   注意结尾。那是对的吗？
*   我必须编辑 keytool 的输出，所以不能 100% 确定 API 密钥是好的。请参阅： [Android 上的 Maps v2 API 密钥](https://stackoverflow.com/questions/15294299/maps-v2-api-key-on-android)

**笔记2：**

我当前配置的一些截图：

![在此处输入图像描述](../Images/33261f979b32571580007c6de6a059b3.png) ![在此处输入图像描述](../Images/bed418e5b79743fa1edc1657667c9ace.png)

如果您认为我的问题的原因是未正确安装 Google Play 服务，我已经为此创建了一个单独的 SO：[无法将 google-play-services 正确安装到 Eclipse 中（试图让地图正常工作）](https://stackoverflow.com/questions/15325654/can-not-install-google-play-services-into-eclipse-correctly-trying-to-get-maps)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:20:35.160

> 在参考库中，我添加了“google-play-services.jar”

这是不正确的。请删除它。然后，将 Play Services Android 库项目导入您的 Eclipse 环境，并将其附加到您的项目中。

引用[文档](http://developer.android.com/google/play-services/setup.html)：

> 将 /extras/google/google_play_services/libproject/google-play-services_lib 库项目复制到您维护 Android 应用项目的源代码树中。如果您使用的是 Eclipse，请将库项目导入您的工作区。单击 File > Import，选择 Android > Existing Android Code into Workspace，然后浏览到库项目的副本以将其导入。
> 
> 设置项目以使用 Google Play 服务 SDK... 在您的 Android 项目中引用库项目。有关如何执行此操作的更多信息，请参阅[为 Eclipse](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)引用库项目或[在命令行上引用库项目。](http://developer.android.com/tools/projects/projects-cmdline.html#ReferencingLibraryProject)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T19:51:37.197

试试这个：

[关联](https://blog-emildesign.rhcloud.com/?p=435)

这是我写的关于创建 Google Map API V2 的博客文章。

**更新：**

![在此处输入图像描述](../Images/e78c313a5ba11f4b3baae4ce295eb5b1.png)

我从我的工作地图项目中拍了一张照片。忽略崩溃报告服务库，如 acra、flurry、bugsense 和 crittercism。除了那些你项目看起来一样吗？

您`google-play-services_lib.jar`的**Android 依赖项**文件夹中有吗？

# windows - 如何查询网络摄像头的输出格式？

> ID：15301608
> 
> 赞同：2
> 
> 时间：2013-03-08T19:17:10.287
> 
> 标签：windows, webcam

如何在 Windows 下查询网络摄像头的输出能力（例如分辨率、fps、编解码器）？我可以通过编程或使用独立应用程序来执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-10-24T17:14:25.097

一个很棒的独立（跨平台，命令行）工具是 ffmpeg，视频流的瑞士军刀：

`ffmpeg -list_devices true -f dshow -i dummy`为您提供设备列表。

然后，对于您看到的设备名称（例如*“USB 2.0 WebCamera”*）：

`ffmpeg -list_options true -f dshow -i video="USB 2.0 WebCamera"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:25:05.953

使用 DirectShow API，您可以枚举相机过滤器输出引脚上的功能和媒体类型。这包括分辨率和像素格式（编解码器）。这通常不包括可能通过[IAMVideoControl::GetFrameRateList](http://msdn.microsoft.com/en-us/library/windows/desktop/dd376026%28v=vs.85%29.aspx)额外提供的帧速率。

也可以看看：

*   [DirectShow - 获取可用的分辨率](http://social.msdn.microsoft.com/Forums/eu/windowsdirectshowdevelopment/thread/7f0230d4-484e-4752-9d46-24c06bcd8937)
*   [枚举支持的视频捕获输出大小](http://social.msdn.microsoft.com/Forums/en-SG/windowsdirectshowdevelopment/thread/70666ade-a426-4622-917a-9d1738fc2acb)

# c - How to fix memory leak in this program

> ID：15301612
> 
> 赞同：-3
> 
> 时间：2013-03-08T19:17:36.150
> 
> 标签：c

On the below program, I need to call free() on Hash Table, List Elements and Unique words. I tried couple things but all either break the program or increases error messages. Some attempts are in comments and bold.

Does anyone know where and how to call free? Its confusing as pointers are involved.

```
h_ptr *htable;
int tsize;

void new_table(int size)
{
    tsize = size;
    htable = (h_ptr *) calloc(size, sizeof(h_ptr));
    if (!htable) {
    fprintf(stderr, "Couldn't allocate hash array, exiting\n");
    exit(1);
    }

    for(int i=0; i<size; i++)
      {
    htable[i]=NULL;
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:46:58.263

防止内存泄漏总是一样的。如果您分配了一些内存，请正确删除它。因此，如果您的函数在`malloc()`某处使用，也可以在某处写入`free()`以避免内存泄漏

# java - Eclipse error(s)_during_the_evaluation for watch expression having quotes

> ID：15301617
> 
> 赞同：5
> 
> 时间：2013-03-08T19:17:46.000
> 
> 标签：java, eclipse, debugging

In the Eclipse Debug perspective, when using quotes in the watch expression it returns the error `<error(s)_during_the_evaluation>`

like for example:

```
 Log.i("A","blah") 
```

will return `<error(s)_during_the_evaluation>`

or

```
solo.getWebElement(By.className("title"), 0) 
```

will return `<error(s)_during_the_evaluation>`

This works fine during the code execution. Any other expression not having any quotes in it will work fine. I tried to escape with "\" or "", but no luck (It's Java/Android code by the way).

Any idea how I could use these expressions in the Java debugger Watch Expression?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:26:19.707

问题可能更多在于您似乎在调用静态变量而不是在引号中。您应该声明包括包在内的整个类名以使其正常工作。

# php - 未定义 jQuery 字符串

> ID：15301620
> 
> 赞同：1
> 
> 时间：2013-03-08T19:18:05.847
> 
> 标签：php, javascript

我正在通过 onclick 事件向函数发送数据，但我无法获取字符串值，我只是获取整数值，它表示未定义**“值” 。**问题是什么。

我的代码是：

```
<a href="javascript:void(0)" 
   onclick="begin(<?php echo $data['user_id'];?>,
   <?php echo $data['name'];?>);"> 
```

这是我的功能：

```
function begin(id,name)
{
    alert(id);
    alert(name);
} 
```

我没有得到名称值，如果我传递硬编码字符串，那么它也没有到达这里，只有整数可以访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:19:11.227

您需要将参数括在引号中以使其成为字符串。

```
<a href="javascript:void(0)" onclick="begin('<?php echo $data['user_id'];?>','<?php echo $data['name'];?>');"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:28:47.710

正如马特所说，没有引号就不会被识别。

也就是说，我不认为他的回答是正确的。我更喜欢这段代码：（为易读添加了空格）

```
<a href="javascript:void(0);" onclick="begin(
    <?php echo htmlspecialchars(json_encode($data['user_id'])); ?>,
    <?php echo htmlspecialchars(json_encode($data['name'])); ?>
);"> 
```

[`json_encode`(docs)](http://php.net/json-encode)非常适合将任何 PHP 变量（资源除外）传递给 JavaScript。在这种情况下，它将在字符串周围添加引号，并根据需要使用反斜杠转义字符。由于它在属性中，因此您需要`htmlspecialchars`将符号转换为可安全插入。

# c# - 需要帮助理解这个写得很糟糕的 ActionScript

> ID：15301621
> 
> 赞同：-4
> 
> 时间：2013-03-08T19:18:13.017
> 
> 标签：c#, actionscript-3, actionscript

我目前正在将一些 ActionScript 翻译成 C#。大多数内容都是可以理解的，并且可以在将其转换为 C# 时轻松复制/改进。我在遵循提供基本功能的代码流时遇到了一个 utils 类。其中很多已经过时，所以我抛弃了大部分实用程序函数，并用 .NET 框架已经提供的更合适的方法替换它们。

这里有一个例子：

```
// ActionScript
public static function encode(_arg1:String):String{
    var _local2:ByteArray = new ByteArray();
    _local2.writeUTFBytes(_arg1);
    return (encodeByteArray(_local2));
}

// Corresponding C#
public static string encode(string _arg1) {
    return Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(_arg1));
} 
```

为了清楚起见，我只是将参数名称保留为*原样*，尽管命名很糟糕。我对 C# 低级的东西很不熟悉，比如正确枚举字节数组和流，因为我通常不接触 C# 的那部分。如果我需要一些工具，我通常会发现它已经在 .NET 中实现，或者在网上搜索很棒的*代码片段*。

不过，我对这个功能感到头疼。名字很吓人：

```
private static const BASE64_CHARS:String = 
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

public static function encodeByteArray(_arg1:ByteArray):String{
    var _local3:Array;
    var _local5:uint;
    var _local6:uint;
    var _local7:uint;
    var _local2 = "";
    var _local4:Array = new Array(4);
    _arg1.position = 0;
    while (_arg1.bytesAvailable > 0) {
        _local3 = new Array();
        _local5 = 0;
        while ((((_local5 < 3)) && ((_arg1.bytesAvailable > 0)))) {
            _local3[_local5] = _arg1.readUnsignedByte();
            _local5++;
        };
        _local4[0] = ((_local3[0] & 252) >> 2);
        _local4[1] = (((_local3[0] & 3) << 4) | (_local3[1] >> 4));
        _local4[2] = (((_local3[1] & 15) << 2) | (_local3[2] >> 6));
        _local4[3] = (_local3[2] & 63);
        _local6 = _local3.length;
        while (_local6 < 3) {
            _local4[(_local6 + 1)] = 64;
            _local6++;
        };
        _local7 = 0;
        while (_local7 < _local4.length) {
            _local2 = (_local2 + BASE64_CHARS.charAt(_local4[_local7]));
            _local7++;
        };
    };
    return (_local2);
} 
```

我的猜测是，这会将数据解码`byte[]`为 Base64 字符串。如果你注意了，你会发现我提到的第一个函数使用了这个函数。这是因为提到的 C# 实现过时了吗？还是我的 C# 实现错误？如果它我需要一个线索，而不是一个完整的实现。:)

这是我的最后一个问题：作者声明`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`为 Base64 字符。这是65！维基百科告诉我 Base64 不包含字符`=`。如果旧数据已经用那个“错误”的字符集编码了怎么办？我是否需要使用相应的错误、也写得不好的解码方法对其进行解码，然后使用 .NET 实现对其进行正确编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:48:03.863

假设无论哪种语言都将 _arg1 视为仅向前读取的流，这一次从输入字符串中获取 3 个字节，

```
 while ((((_local5 < 3)) && ((_arg1.bytesAvailable > 0)))) {
        _local3[_local5] = _arg1.readUnsignedByte();
        _local5++;
    }; 
```

将它们拼凑成 4 个“插槽”

```
 _local4[0] = ((_local3[0] & 252) >> 2);
    _local4[1] = (((_local3[0] & 3) << 4) | (_local3[1] >> 4));
    _local4[2] = (((_local3[1] & 15) << 2) | (_local3[2] >> 6));
    _local4[3] = (_local3[2] & 63); 
```

用 '64' 填充 4 字节结果，以防 3 字节不足

```
 while (_local6 < 3) {
        _local4[(_local6 + 1)] = 64;
        _local6++;
    }; 
```

然后使用顶部的大字符串作为选择数组来选择代表被删除的位的字符

```
 while (_local7 < _local4.length) {
        _local2 = (_local2 + BASE64_CHARS.charAt(_local4[_local7]));
        _local7++;
    }; 
```

在此处的 js 中：http: [//jsfiddle.net/H4f2p/](http://jsfiddle.net/H4f2p/)

我跑`encodeByteArray('test')`回来了`dGVzdAAA`

# ocean - SeismicCube.IndexAtPosition 意外输出

> ID：15301623
> 
> 赞同：0
> 
> 时间：2013-03-08T19:18:23.953
> 
> 标签：ocean, petrel

我不确定这里出了什么问题。它适用于某些项目，但不适用于其他项目。我无法弄清楚它们之间有什么区别。为了测试这个问题，我创建了一个点集，其中一个点位于我确定在立方体内部的位置。当我打电话时`IndexAtPosition`，我有时会得到明显错误的答案。例如，我有时会得到负数或超出最大索引的内联或交叉线索引。z 维索引也给出了一个非常不切实际的答案。

我相当肯定我的数据都是一致的，即相同的域和 CRS。一定有一些我没有检查的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:57:15.693

我的猜测是你的点是像 x, y, 1000m 深度的立方体但是可能在时域中。因此，如果您尝试在立方体中找到一个点，您将看到 x,y, 1000 秒。这将远远超出范围，并且会给您的 k 指数（超高）一个疯狂的数字。根据从北方的角度，你的 i,j 可能离现实太远了。您需要有时间点或某种方式将其从深度转换为时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T18:21:52.367

不幸的是，我犯了一个错误。当立方体旋转时，我的一个数据点实际上位于立方体区域之外。

# android - 模拟器上没有账号

> ID：15301624
> 
> 赞同：0
> 
> 时间：2013-03-08T19:18:25.090
> 
> 标签：android

我正在开发一个联系人应用程序，这要归功于 android SDK 中提供的示例。如提供的示例中一样，联系人只能添加到设备上存在的帐户。他们在文档中提到，他们禁止在没有帐户的情况下插入联系人。在模拟器上，没有一个帐户，另一方面，至少应该有一个用于保存电话联系人的帐户。我的问题是，在真实设备上，我的应用程序是否可以在没有帐户的情况下满足此类设备，甚至对于电话联系人也不行。

在这种情况下，我是否需要在名称中插入 null 并键入并继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:52:42.113

我在这里得出了一个结论。应用程序可以明确地满足这样的设备，其中不存在用于保存联系人相关数据的帐户。在这种情况下，可以在每个帐户名称和帐户类型中使用 null 来继续。这是决定哪个帐户类型和帐户名称将保存新创建的联系人的代码片段。

```
ops.add(
                ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI)
                .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, acc_name)
                .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, type)
                .build()); 
```

可以`null`输入每一个`ContactsContract.RawContacts.ACCOUNT_NAME`，`ContactsContract.RawContacts.ACCOUNT_TYPE`但理想的做法是为用户提供可用帐户列表并让用户选择他想要的帐户。在这种情况下也需要记住一件事，您不能像 facebook 联系人一样编辑所有联系人。

希望它对其他人有帮助。

# android - Magento 添加到购物车不适用于三星 Galaxy 选项卡（奇怪）

> ID：15301625
> 
> 赞同：1
> 
> 时间：2013-03-08T19:18:32.930
> 
> 标签：android, magento

有人知道以下问题的解决方案吗？我的 magento 网上商店在所有移动设备上都运行良好，除了 samsung Galaxy 标签。添加到购物车功能不起作用。如果我在同一设备上使用 chrome，它可以正常工作。

Magento 1.6.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:26:25.563

我记得有一个问题，即使用 Galaxy Tab 的用户无法登录。解决方案是延长 Magento 的会话生命周期。

您可以使用以下选项执行此操作：

```
System -> Configuration -> Web -> Session Cookie Management -> Cookie Lifetime 
```

您还应该确保将 Galaxy Tab 上的时间设置为正确的日期/时间，并且还应该检查服务器。

# matlab - 从 Matlab 轮廓函数中选择等值线

> ID：15301626
> 
> 赞同：4
> 
> 时间：2013-03-08T19:18:33.723
> 
> 标签：matlab, coordinates, contour

Matlab 等高线函数（和 imcontour）绘制矩阵不同级别的等值线。我想知道：如何操作此函数的输出以接收每个轮廓的所有 (x,y) 坐标以及级别？如何使用输出 [C,h] = contour(...) 来完成上述任务？另外，我对操作底层网格不感兴趣，它是一个连续函数，**只提取我在绘图上看到的相关像素**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T19:36:29.153

您可以使用此功能。它接受`contour`函数的输出，并返回一个结构数组作为输出。数组中的每个结构代表一条等高线。该结构具有字段

*   `v`, 等高线的值
*   `x`, 等高线上点的 x 坐标
*   `y`, 等高线上各点的 y 坐标

    函数 s = getcontourlines(c)

    ```
    sz = size(c,2);     % Size of the contour matrix c
    ii = 1;             % Index to keep track of current location
    jj = 1;             % Counter to keep track of # of contour lines

    while ii < sz       % While we haven't exhausted the array
        n = c(2,ii);    % How many points in this contour?
        s(jj).v = c(1,ii);        % Value of the contour
        s(jj).x = c(1,ii+1:ii+n); % X coordinates
        s(jj).y = c(2,ii+1:ii+n); % Y coordinates
        ii = ii + n + 1;          % Skip ahead to next contour line
        jj = jj + 1;              % Increment number of contours
    end 
    ```

    结尾

你可以像这样使用它：

```
>> [x,y] = ndgrid(linspace(-3,3,10));
>> z = exp(-x.^2 -y.^2);
>> c = contour(z);
>> s = getcontourlines(c);
>> plot(s(1).x, s(1).y, 'b', s(4).x, s(4).y, 'r', s(9).x, s(9).y, 'g') 
```

这将给出这个情节：

![在此处输入图像描述](../Images/bb62d69128de139ac1f61691ec027894.png)

# django - 使用 Git 子模块部署 Django 应用程序的问题

> ID：15301629
> 
> 赞同：0
> 
> 时间：2013-03-08T19:18:36.323
> 
> 标签：django, heroku, deployment, git-submodules, pythonpath

我会尽量精简这个问题，以免它太模糊。

所以我在 Django 应用程序中使用这个[django-ajax-validation](https://github.com/alex/django-ajax-validation)插件。我相当确定我遇到的问题位于我的 settings.py 和 Heroku 之间。当我部署时，我收到此错误消息：

> 2013-03-08T18:54:17+00:00 heroku[web.1]：使用命令`python manage.py runserver 0.0.0.0:53994 --noreload`
> 2013-03-08T18:54:18+00:00 app[web.1] 启动进程：错误：没有名为 ajax_validation 的模块
> 2013-03-08T18:54:19+00:00 heroku[web.1]：进程以状态 1 退出
> 2013-03-08T18:54:19+00:00 heroku[web.1]：状态从开始变为坠毁

在我安装的应用程序中，我有：

```
INSTALLED_APPS = (
    'ajax_validation', 
```

除其他事项外。

在 django-ajax-validation 文档中，作者提到添加`ajax_validation/`到您的`PYTHONPATH`和`ajax_validation`您`INSTALLED_APPS`的以安装插件。也许因为我没有经验，我发现前一步含糊不清，我能找到的最接近的东西是安装他的`setup.py`文件`python setup.py install`

这是不正确的吗？有没有其他方法可以将应用程序添加为模块？

让我知道是否需要清理任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:36:00.277

好消息，Heroku 支持通过 pip 安装 python 包，这是一个非常有用的管理 django 应用程序的工具。一切都在 Heroku 的网站上进行了解释：[https](https://devcenter.heroku.com/articles/python-pip) ://devcenter.heroku.com/articles/python-pip 。

# c# - 在使用对象初始化器初始化对象时添加 DataCollection 属性

> ID：15301630
> 
> 赞同：0
> 
> 时间：2013-03-08T19:18:51.100
> 
> 标签：c#, object, constructor, ctor-initializer

在使用 Object Initializer 初始化对象时添加属性。但是我们如何添加 DataCollection 属性呢？

例子：

```
class Student{
          public string FirstName{ get; set} ;
          public string LastName{ get; set};
          public DataCollection<string> Subjects{ get; set} ; 

}

 Student myStudent = new Student
        {
            FirstName = "John",
            LastName = "Something"
            //Subjects.AddRange()
        }; 
```

那么如果我们想为“Subjects”添加属性，我们如何在上述条件下添加呢？

一般我们可以像下面这样。

```
 Student clsStudent  = new Student();
     clsStudent.FirstName  = "Foo";
     clsStudent.LastName  = "other";
     clsStudent.Values.AddRange(new string[] { "c#" }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:21:56.607

```
Student myStudent = new Student
        {
            FirstName = "John",
            LastName = "Something"
            Subjects = {
                           "Subject1",
                           "Subject2",
                           "Subject3",
                       }
        }; 
```

# javascript - OnLoad 事件未触发动态附加 on iPad

[问问题](https://stackoverflow.com/questions/ask)问问题 2013-03-08T19:18:58.7771083 次This question shows research effort; it is useful and clear4This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

Does anybody know why the onload event does not fire on iPad on the following case? I've tried using jQuery $.load() and pure javascript but still no avail. My google-fu was insufficient to find an answer :(

```
var head = document.head || document.getElementsByTagName('head')[0];
var linkEl = document.createElement('link');
linkEl.type = 'text/css';
linkEl.rel = 'stylesheet';
linkEl.href = "my_stylesheet.css"; 

// This doesn't work on ipad
linkEl.onload = function() {
 alert('css is loaded');
}

head.appendChild(linkEl); 
```

Demonstration: [http://jsfiddle.net/cYFYE/](http://jsfiddle.net/cYFYE/)

[javascript](/tags/javascript "show questions tagged 'javascript'")[ios](/tags/ios "show questions tagged 'ios'")[ipad](/tags/ipad "show questions tagged 'ipad'")[onload](/tags/onload "show questions tagged 'onload'")4

## 1 回答 1

This answer is useful4

我知道 FireFox 和 Safari 没有`load`链接样式表的事件，所以 iOS Safari 可能也没有。我个人通过对样式表发出 ajax 请求，然后将响应放入`<style>`标签中来解决这个问题。

我已经更新了你的 jsFiddle：http: [//jsfiddle.net/rgthree/cYFYE/2/](http://jsfiddle.net/rgthree/cYFYE/2/)

```
function loadCss(src, callback){ jQuery.ajax({ url: src, success: function(response){ // Create Stylesheet var style = document.createElement('style'); style.type = 'text/css'; style.media = 'screen'; if(style.styleSheet){ style.styleSheet.cssText = response; }else{ style.appendChild(document.createTextNode(response)); } document.head.appendChild(style); callback && callback(); } }); } loadCss('/css/normalize.css', function(){ alert('loaded!'); }); 
```

于 2013-03-08T19:38:50.027 回答

#### Related

[1](/questions/14238005 "Question score (upvotes - downvotes)")[ruby-on-rails - 如何使用变量在 html.erb 文件中分配 css id？](/questions/14238005)[3](/questions/14238006 "Question score (upvotes - downvotes)")[php - 如何在另一个类中使用一个类？](/questions/14238006)[2](/questions/14238013 "Question score (upvotes - downvotes)")[java - 使用动态ID为jQuery中的隐藏字段分配值？](/questions/14238013)[1](/questions/14238020 "Question score (upvotes - downvotes)")[mysql - 如何允许用户在 Rails 中安排重复的 cron 作业](/questions/14238020)[4](/questions/14238021 "Question score (upvotes - downvotes)")[css - 让左 div 在右 div 移动到左 div 之下之前包装其内容](/questions/14238021)[1](/questions/14238023 "Question score (upvotes - downvotes)")[hex - Intel Hex 文件扩展段地址和扩展线性地址](/questions/14238023)[3](/questions/14238026 "Question score (upvotes - downvotes)")[c# - 将项目添加到 ListBox 并获取 ListBoxItem](/questions/14238026)[1](/questions/14238027 "Question score (upvotes - downvotes)")[sql - 从 DBMS_UTILITY.LNAME_ARRAY 中选择数据](/questions/14238027)[2](/questions/14238028 "Question score (upvotes - downvotes)")[haskell - 为什么 Happstack (toResponse) 默认使用 text/plain？](/questions/14238028)[1](/questions/14238032 "Question score (upvotes - downvotes)")[solr - 当元数据有空格和冒号 QUERY LUCENE 3.5 时在 Solr 错误中搜索](/questions/14238032)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：15301632
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# mysql - 进行查询，将 1 个表和来自另一个与之关联的表的数据组合在同一行

> ID：15301637
> 
> 赞同：0
> 
> 时间：2013-03-08T19:19:10.927
> 
> 标签：mysql

当前的：

表格1

Dbase（包含帐户信息的表）

-id……</p>

表 2

Phonenumbers（包含与帐户关联的电话号码的表格。ID、maindbaseid、电话类型、电话号码

当前结果 Id1,phonetype1,phonenumber1 Id1,phonetype2,phonenumber2 Id1phonetype3,phonenumber3

想要的结果 Id1,phonetype1,phonenumber1,phonetype2,phonenumber2,phonetype3,phonenumber3。

我正在尝试基于 2 个表从我们的 MySQL 数据库中导出数据。一个基于 id 列和主数据库 id 列与另一个相关。一个表是有关帐户的信息，另一个是与该帐户关联的电话号码。我要导出的数据需要是帐户表中的信息，每个电话号码与该帐户相关联的行彼此相邻我尝试了一个内部联接，其中 maindatabaseid 和第二个表中的 maindatabaseid 列匹配但它只显示该帐户重复了多次，因为有不同的电话号码。任何建议都将不胜感激，我是 MySQL 的初学者，所以如果你能更简单地解释一下它会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:29:05.043

这是最简单的关系之一。您需要做的就是设置“外键”关系，从“电话号码”表到“帐户表”这样当您查询电话号码表时，您就可以访问帐户中的所有信息与那个电话号码有关。（或反过来）

请参阅有关外键[的](http://dev.mysql.com/doc/refman/5.0/en/example-foreign-keys.html)文档以及如何使用它们，具体取决于您使用的是原始 sql 连接还是 ORM，这取决于执行查询的最佳方法，文档链接提供了有关使用 MySQL 控制台的信息。

# php - PHP compare string against text file on the fly

> ID：15301641
> 
> 赞同：1
> 
> 时间：2013-03-08T19:19:25.250
> 
> 标签：php, file

What is the most elegant and efficient way of comparing a string against text file in PHP.

**The flow:**

I have a file on server `var\user\rinchik\file\fileName\version0.txt`.

user comes on the web-site, does his thing and gets `$string` with `N` characters length.

I need to check is this string is identical to the contents of `var\user\rinchik\file\fileName\version0.txt`. If it is then do nothing. If its not then save this string here: `var\user\rinchik\file\fileName\version1.txt`.

Should i just read the file version0.txt into another string then hash both of them and compare hashes?

Or there is some hidden magic method like: save new string as `version1.txt` and the run something like file_compare('version0.txt', 'version1.txt'); and it will do the trick?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:25:09.970

您应该将文件读`version0.txt`入字符串 $string1 并检查是否`$string == $string1`（我认为没有必要散列`$string`and `$string1`）。

PHP 中没有内置函数可以比较两个文件的内容。

另一种方式，您可以使用 shell 命令`diff`。比如`exec('diff version0.txt version1.txt', $res, $rev)`和检查返回值`if ($rev == 0) {...}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:25:15.703

由于您知道字符串的长度，因此您可以先检查`strlen($string) == filesize($filename)`. 如果它们不同，您甚至不需要检查内容。

如果它们相同，那么您可以像 Marc 的回答那样使用/对`$string == file_get_contents($filename)`它们进行哈希处理，以验证内容是否相同。`md5``md5_file`

当然，如果生成字符串的方法意味着文件总是相同的长度（例如散列函数的结果），那么检查文件大小是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:22:42.160

快速而肮脏的方法，无需先将字符串写入文件：

```
if (md5($string) == md5_file('/path/to/your/file')) {
  ... file matches string ..
} else {
  ... not a match, create version1.txt
} 
```

# sql - SQLite3 "forgets" to use foreign keys

> ID：15301643
> 
> 赞同：19
> 
> 时间：2013-03-08T19:19:33.310
> 
> 标签：sql, ruby, sqlite, raspbian

I'm using Ruby with SQLite3 and my attempts to use foreign keys in Sqlite3 were unfortunately not successful. According to `sqlite3 --version`, version 3.7.13 is installed. As far as I know, Sqlite3 supports foreign keys since version 3.6.x.

I know that foreign keys are deactivated by default and have to be activated with `PRAGMA foreign_keys = ON;`. In my Ruby db-create-script, I'm doing something like this:

```
sql = <<-SQL
  PRAGMA foreign_keys = ON;
  CREATE TABLE apps (
    id ....
  );
  CREATE TABLE requests (
    ...
    app_id INTEGER NOT NULL,
    FOREIGN KEY(app_id) REFERENCES apps(id),
  );
  ...
SQL
db.execute_batch(sql) 
```

Unfortunately, I can happily insert rows into `requests` with unknown app-ids, it works, but of course it shouldn't.

Interesting: using the sqlite3 shell directly, I can observe the following behaviour:

```
$ sqlite3 database.db
sqlite> PRAGMA foreign_keys = ON;
sqlite> PRAGMA foreign_keys;
1 // as expected
sqlite> .quit
$ sqlite3 database.db
sqlite> PRAGMA foreign_keys;
0 // off ?! 
```

Without quitting the sqlite3 shell, foreign keys **are working** after activating them (and not quitting the shell) and **I'm not allowed** to insert rows with unknown app_ids.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-08T21:36:33.553

我想我可以回答我自己的问题：文档说：默认情况下禁用外键约束（为了向后兼容），因此必须分别为**每个数据库连接**启用。烦人，但它现在终于工作了。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-12T13:07:34.903

将它放在执行 SQL 命令的文件的顶部，它将在运行时启用外键。

```
db = SQLite3::Database.new("database.db")
db.execute("PRAGMA foreign_keys = ON") 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-07-01T04:20:18.227

默认情况下永久打开*foreign_keys*的一种方法是将以下行注入`~/.sqliterc`：

```
PRAGMA foreign_keys = ON; 
```

请注意，它将影响您的所有数据库...

# javascript - How can I manipulate pixels in a canvas?

> ID：15301647
> 
> 赞同：0
> 
> 时间：2013-03-08T19:19:51.273
> 
> 标签：javascript, canvas, fabricjs

Let me explain what I want to achieve..

I'm building something just for fun and as a learning experiment similar to

www.milliondollarhomepage.com

Except, I want to use canvas and/or Fabric.js to achieve the same thing. How would I go about manipulating each pixel in a canvas?

Scenario:

*   I want to offer a 1000 pixels up for grabs.
*   User can choose an image and where it should go on the canvas
*   Image can be resized according to how many pixels the user wants and deducted from the overall remaining pixels.

Any help on this would be appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T02:39:57.237

HTML5 canvas api中用于操作单个像素的方法是

```
context.getImageData(x,y,width,height); 
```

例如

```
var map = context.getImageData(0,0,canvas.width,canvas.height); 
```

这将返回一个包含重复顺序的大量数组：

```
[red,green,blue,alpha,red,green,blue,alpha...] 
```

每个`4`数字代表所选区域上每个像素的红色、绿色、蓝色和 Alpha 通道，从左到右，从上到下。

这些数字中的每一个的值都是一个整数，范围从`0 - 255`.

循环遍历每个像素并删除它们的`red`和`blue`通道，从而将图像变为绿色，例如

```
//assume map variable from earlier

for(var i = 0; i < map.data.length; i+=4){
    map.data[i] = 0; // drop red to 0
    map.data[i+2] = 0; // drop blue to 0
}
context.putImageData(map,0,0); 
```

[查看示例](http://jsfiddle.net/B1KMusic/3CWz5/)

请注意，此过程只能在服务器上完成，并且不会来自其他域的图像“污染”画布。如果不满足这些要求，则会抛出安全错误 DOM 异常。

# performance - How to log/instrument in performance critical web service?

> ID：15301649
> 
> 赞同：3
> 
> 时间：2013-03-08T19:19:59.910
> 
> 标签：performance, web-services, instrumentation

I'm working on a server push service, kind of like pusher/pubnub. The most critical part that handles the client polling is currently using Node.js and Redis, which is working just fine, except for one thing. I don't really have a good idea about what's going on in the app.

The whole idea is based around long polling, which means there is A LOT of requests going back and forth, and a lot of checking in redis and seeing if there's something new. The problem is that I don't really know how to monitor such a thing.

Let's say that there are 10 000 users online on average on a single site. At a polling interval of 5 seconds this would result in at least 2000 log entries every second. How do I manage that many logs? Should I use something like logstash to collect them to have at least some idea of what's going on in the app?

Would it be a good idea to have all instrumentation turned off, and only enable it with something like `kill -s USR2`?

I thought about using Redis `monitor` command to gather some data, but just running it slows down redis by 50%, not to mention the overhead of analyzing the incoming data.

How do people generally handle this? Is there any good book or something about building high-load & high-availability applications?

# objective-c - Releasing an image from memory

> ID：15301659
> 
> 赞同：1
> 
> 时间：2013-03-08T19:20:27.980
> 
> 标签：objective-c, cocoa-touch

I recently started to learn objective c and I'm making an application based on tableView, imageview and scrollView.

In tableview you press a button and the application pushes to scrollview where there's an image inside imageview. I get a problem when I tried releasing a memory from imageview (the image I loaded when pressing the button). The problem is, that the image I previously loaded is still there.

Here's the code I've got:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *headTitle = [[listContent objectAtIndex:indexPath.row] objectForKey:kItemTitleKey];

if ([headTitle isEqualToString:@"Differentialekvationer"]){

    leafViewController.title = headTitle;

    [[self navigationController] pushViewController:leafViewController animated:YES];

    NSString *fullpath = [[[NSBundle mainBundle] bundlePath] stringByAppendingString:@"/c.png"];
    UIImage *imageToLoad = [UIImage imageWithContentsOfFile:fullpath];
    leafViewController.myImageView = [[UIImageView alloc] initWithImage:imageToLoad];
    leafViewController.myScrollView = [[UIScrollView alloc] initWithFrame:leafViewController.view.bounds];
    [leafViewController.myScrollView addSubview:leafViewController.myImageView];
    leafViewController.myScrollView.contentSize = leafViewController.myImageView.bounds.size;
    [leafViewController.view addSubview:leafViewController.myScrollView];
    leafViewController.myScrollView.bounces = NO;

}else if ([headTitle isEqualToString:@"Gränsvärden"]){

    leafViewController.title = headTitle;

    [[self navigationController] pushViewController:leafViewController animated:YES];

    NSString *fullpath = [[[NSBundle mainBundle] bundlePath] stringByAppendingString:@"/e.png"];
    UIImage *imageToLoad = [UIImage imageWithContentsOfFile:fullpath];
    leafViewController.myImageView = [[UIImageView alloc] initWithImage:imageToLoad];
    leafViewController.myScrollView = [[UIScrollView alloc] initWithFrame:leafViewController.view.bounds];
    [leafViewController.myScrollView addSubview:leafViewController.myImageView];
    leafViewController.myScrollView.contentSize = leafViewController.myImageView.bounds.size;
    [leafViewController.view addSubview:leafViewController.myScrollView];
    leafViewController.myScrollView.bounces = NO;

} 
```

and i tried to free the memory basically with everyting

```
-(void)viewDidDisappear{
leafViewController.myImageView.image = nil;
leafViewController.myScrollView = nil;
leafViewController.view = nil;
[leafViewController.myImageView release];} 
```

I don't know what to look for and where the problem lies. Help would be much appreciated :).

P.S. Please note that I've been learning objective c for 4 days now so I'm a newbie

# mysql - mysql左连接但需要第三个表中的值

> ID：15301668
> 
> 赞同：0
> 
> 时间：2013-03-08T19:21:17.003
> 
> 标签：mysql, left-join

我已经阅读了一百个不同的“如何加入三个表”帖子，但似乎无法让我做我想做的事。它似乎与我在网上找到的示例不同，它们只是两个左连接。

```
tests
-----
id
name
platformA <<-- boolean, platformA supports test?
platformB
platformX

testgroups  <<-- tuple (testid,platid) is unique
----------
testid      <<-- matches 'id' in 'tests' table above
platid      <<-- matches id in 'platforms' table below
grouptype

platforms
---------
id
name <<-- corresponds to column name 'platform?' in 'tests' 
```

好的，所以我知道我想离开加入 testgroups 到测试，因为我想要一个结果，它在平台 A 为 1 的“测试”中的每个测试名称都有一行，无论测试组中是否有这样的条目。我不知道如何让平台表参与进来。这是我所拥有的不起作用的：

```
select tests.name, testgroups.grouptype from tests
left join testgroups on (tests.id = testgroups.testid)
where tests.platformA = 1; 
```

这不起作用，因为测试组可以有多个 testid = 2，每个 platid = ?? 一个。元组保证是唯一的，但不是任何一列本身。因此，对于每个 tests.name，它为每个平台提供了一行。我需要通过我知道的平台名称（比如platformA）来限制它，但我在表testgroups中没有访问权限。所以，如果我知道 platid 而不是平台名称，我可以这样做，这确实有效：

```
select tests.name, testgroups.grouptype from tests
left join testgroups on (tests.id = testgroups.testid and testgroups.platid = 27)
where tests.platformA = 1; 
```

我知道我只想要 platformA，但我不知道它的 id 是（在上面的示例中）27，而无需在平台表中查找它。如何将其合并到我的查询中？我已经尝试了很多组合，但没有一个是完全正确的。这是我认为可能有效的一个示例：

```
select tests.name, testgroups.grouptype from tests, platforms
left join testgroups on (tests.id = testgroups.testid and platforms.name = 'platformA')
where tests.platformA = 1; 
```

这似乎是非法的语法。我也尝试了多个左连接，这对我不起作用。

我很喜欢这个答案，但也很想解释一下它为什么会起作用，因为我已经有一段时间了。

谢谢，大卫

==== 更新 ====

我认为@Marc 几乎是正确的，但它通过 testgroups.platid 具有该平台数据的行来限制我的输出。

这是我尝试使用他的答案并给出我的完整查询：

```
select tests.name, testgroups.grouptype from tests
left join testgroups on (tests.id = testgroups.testid)
left join platforms on (testgroups.platid = platforms.id)
where tests.platformA = 1 and (platforms.name = 'platformA' or platforms.id is null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:24:31.193

您在单个查询中有多个连接，与上一个示例中的完全一样......除了您不应该混合连接样式。

```
select tests.name, testgroups.grouptype
from tests
left join testgroups on tests.id = testgroups.testid
left join platforms ON ......
where tests.platformA = 1 and platforms.name = 'platformA'; 
```

# ruby - confusion with base64 class methods usage

> ID：15301669
> 
> 赞同：5
> 
> 时间：2013-03-08T19:21:18.527
> 
> 标签：ruby

Could anyone help me here to understand when we need to consider the below 4 methods:

```
strict_decode64(str)
strict_encode64(bin)
urlsafe_encode64(bin)
urlsafe_decode64(str) 
```

From the doc also I didn't get any examples. So examples with explanation might be helpful for me to understand.

Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:34:40.490

一个使用示例是：

```
require "base64"
Base64.strict_encode64('Stuff to be encoded')
Base64.strict_decode64("U3R1ZmYgdG8gYmUgZW5jb2RlZA==") 
```

严格意味着在解码时拒绝空格/CR/LF，并且在编码时不添加 CR/LF。

请注意，如果以下内容被接受：

```
Base64.decode64("U3R1ZmYgdG8gYmUgZW5jb2RlZA==\n") 
```

***严格***来说，由于尾随（换行），上述内容不被接受，并且`\n`以下行将引发`ArgumentError: invalid base64`异常：

```
Base64.strict_decode64("U3R1ZmYgdG8gYmUgZW5jb2RlZA==\n") 
```

所以 strict 在解码时只接受/预期字母数字字符，在编码时只返回字母数字字符。

请尝试以下方法，看看一个编码如何用`'\n'`(linefeed) 每 60 个字符换行一次，而***严格***的不是：

```
print Base64.encode64('I will not use spaces and new lines. I will not use spaces and new lines. I will not use spaces and new lines. I will not use spaces and new lines.I will not use spaces and new lines.')

print Base64.strict_encode64('I will not use spaces and new lines. I will not use spaces and new lines. I will not use spaces and new lines. I will not use spaces and new lines.I will not use spaces and new lines.') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T19:27:56.883

`_encode`和做相反的`_decode`事情：第一个将普通字符串转换为编码字符串，第二个将编码字符串转换为普通字符串。

```
str = "Hello!"
str == decode64(encode64(str)) # This is true 
```

`strict_`和之间的区别在于`urlsafe_`将在编码字符串中使用的字符。当您需要在 URL 中传递字符串时，不允许使用所有字符（`/`例如，因为它在 URL 中具有特殊含义），因此您应该使用该`urlsafe_`版本。

# excel - Excel 2010 如何从相同的数据制作多个散点图

> ID：15301671
> 
> 赞同：2
> 
> 时间：2013-03-08T19:21:34.467
> 
> 标签：excel, charts

有一个数据集，我需要从中制作几个散点图（日期与值）。每个图表都是不同的，基于不同的过滤器。要制作一张图表，我可以过滤我的数据，然后绘制图表。但是如果我改变过滤器，图表就会改变。所以我不能再做图表了，除非我复制数据。有没有办法从同一个数据集制作多个图表，而无需为每个图表制作数据集的副本？数据透视表/图表对我没有帮助，因为我正在制作散点图。例如，我不想按日期总结任何内容。我可以在同一日期有多个事件，我不希望 excel 将它们组合在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:18:53.710

您是否尝试过使用多个数据区域？请参阅以下链接：[http ://technet.microsoft.com/en-us/library/dd220577.aspx](http://technet.microsoft.com/en-us/library/dd220577.aspx)

我发现它很有帮助。

您还可以在 VBA 中编写代码，允许您使用不同的数据点创建多个图表。可以在此处找到此代码的示例： [http ://www.ozgrid.com/forum/showthread.php?t=53320](http://www.ozgrid.com/forum/showthread.php?t=53320)

祝你好运！

# ruby - Ruby on rails 应用程序无法在一台机器上运行，但在另一台机器上运行（相同的设置）

> ID：15301679
> 
> 赞同：0
> 
> 时间：2013-03-08T19:22:22.563
> 
> 标签：ruby, rubygems, ruby-on-rails-3.2, bundler

我在两台机器之间移动 Ruby on Rails 应用程序时遇到问题，它们都有完全相同的操作系统和设置（Arch linux x86_64 今天更新了），（嗯，这不可能是真的，因为这个问题发生了，但我不能目前发现任何差异）在版本 3.2.12 和 ruby​​ 1.9.3 中都有轨道

在我的笔记本电脑上一切正常，应用程序运行正常，在桌面命令上

```
rake assets:precompile 
```

失败并出现错误：

```
/usr/bin/ruby /usr/bin/rake assets:precompile:all RAILS_ENV=development RAILS_GROUPS=assets
rake aborted!
couldn't find file 'jquery'
(...) 
```

我的 application.js 中有这个：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

和我的 Gemfile 中的 gem 'jquery-rails' （捆绑安装成功完成），但这可能无关紧要 - 如果没有安装这个 gem，rake 在完全相同的 wqay 中失败。

我尝试运行 rails 服务器，网页显示错误：

```
cannot load such file -- sass
(in [path]) 
```

问题必须在我桌面上的 ruby​​/rails 安装中的某个地方，应用程序源代码保存在 git 中，两台机器具有相同的修订版和干净的工作目录 - tmp 在 .gitignore 中。资产管道在 config/application.rb 中启用

我尝试了以下方法：

1.  已删除 tmp 目录
2.  重新安装 rails、jquery 和其他几个 gem
3.  使用过其他环境（rake 在所有环境中都失败）
4.  下载 jquery 并将其放在 assets 目录中（这应该在 rails 中是自动的），在这种情况下 rake assets:precompile 在 sass 样式表编译时失败（我安装了 sass-rails！）

我必须在这里遗漏一些明显的东西，以前有人遇到过这个问题吗？

我需要清除我的 ruby​​ 安装还是有更简单的方法来解决这个问题？

（ps.对不起我的英语不好）

# java - JSP中的JAVA字符串错误

> ID：15301683
> 
> 赞同：0
> 
> 时间：2013-03-08T19:22:39.163
> 
> 标签：java, jsp

我收到一个 ArrayList 的奇怪错误，下面是代码（请注意，此代码是从在线 servlet 示例中复制的，我是 JAVA 新手）。

JSP：

```
<%@page import="p.SecondExample"%>
<%@ page language="java" import="java.util.*;"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
 <HEAD>
  <TITLE>Servlet Application</TITLE>

  <script language="javascript">
 function editRecord(id){

 window.location.href="editServlet/"+id; 
 }

function deleteRecord(id){

window.location.href="deleteUser/"+id; 
}
</script>
</HEAD>

<BODY>
 <br>
  <table align="center">

 </table>
 <br>
 <table width="600px"  align="center" style="background-color:#EDF6EA;border:1px solid #000000;">
<tr><td colspan=9 align="center" height="10px"></td></tr>

<tr><td colspan=9 align="center"><!-- <a href="addUser.jsp" style="font-weight:bold;color:#cc0000;">Add New User</a>--></td></tr>
 <tr><td colspan=9 align="center" height="10px"></td></tr>
    <tr style="background-color:#7BA88B;font-weight:bold;">
          <td>Sector Segment</td><td>Color</td>

</tr>
<%
String bgcolor="";
int count=0;
List viewList = new ArrayList();
Iterator  viewItr;

SecondExample se = new SecondExample();
se.doPost(request, response);

if(request.getAttribute("userList")!=null && request.getAttribute("userList")!="")
{
    List userList =  (ArrayList)request.getAttribute("userList");
    Iterator itr = userList.iterator();
    System.out.println(userList);
    while(itr.hasNext())
    {

        if(count%2==0)
        {
         bgcolor = "#C8E2D1";
        }
        else
        {

            bgcolor = "#EAF8EF";
        }

        viewList = (ArrayList)itr.next();
        int id = Integer.parseInt(viewList.get(0).toString());
        viewItr = viewList.iterator();
        %>
        <tr style="background-color:<%=bgcolor%>;">
        <%  
        while(viewItr.hasNext())
        {

            %>
            <td><%=viewItr.next()%></td>

            <%

        }
        count++;
        %>
        <td><input type="button" name="edit" value="Edit" style="background-color:#49743D;font-weight:bold;color:#ffffff;" onclick="editRecord(<%=id%>);" ></td>
            <td><input type="button" name="delete" style="background-color:#ff0000;font-weight:bold;;color:#ffffff;" value="Delete" onclick="deleteRecord(<%=id%>);"></td>
        </tr>
        <%
    }
}
if(count==0)
{
    %>
    <tr><td colspan="9" align="center">&nbsp;</td></tr>
        <tr><td colspan="9" align="center">No Record Avaliable</td></tr>
    <%
}
%>
   <tr><td colspan=9 align="center" height="2px"></td></tr>
   </table> 
   </BODY>
   </HTML> 
```

在调试中，错误似乎发生在：

```
 viewList = (ArrayList)itr.next();
        int id = Integer.parseInt(viewList.get(0).toString());
        viewItr = viewList.iterator(); 
```

我的错误显示为：

```
org.apache.jasper.JasperException: java.lang.ClassCastException: java.lang.String    cannot be cast to java.util.ArrayList 
```

我不太确定为什么或如何制作下一个字符串。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:25:01.047

是的，`itr.next()`返回 a `String`，它不能被转换成`ArrayList`。

```
String value = (String) itr.next();
int id = Integer.parseInt(value); 
```

`viewArray`现在也可以删除您在其中迭代的以下几行代码。

# ember.js - 每次路由 slug 更改时的触发方法

> ID：15301685
> 
> 赞同：2
> 
> 时间：2013-03-08T19:22:45.840
> 
> 标签：ember.js, ember-router

我有一个路由器设置，如下所示：

```
Social.Router.map(function() {
    this.resource('accounts', function(){
        this.resource('account', { path: ':account_id'});
    });
}); 
```

输入`account`路线后，我正在使用 activate 方法进行一些 DOM 操作。

```
Social.AccountRoute = Ember.Route.extend({
    activate: function(){
        console.log('entered the account route')
    }
}); 
```

这很好用，第一次输入帐户路线。问题是我能够在不离开帐户路线的情况下从帐户更改为帐户。这意味着我可以从：

```
account/1 
```

至

```
account/2 
```

但是 activate 方法只触发一次，这是我第一次进入帐户路由时。是否有一种方法会在每次 account_id slug 更改时触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:06:02.533

不是一个非常直观的解决方案，但每次模型更改时都会执行 3 种方法：

*   连载
*   设置控制器
*   渲染模板

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:02:45.370

`activate`并且`deactivate`仅在进入新路线时触发。但是，方法`model`、`setupController`和`serialize`将随着 的每次更改而被调用`/account/:account_id`。*（编辑：正如@mavilein 在评论中指出的那样，`model`只有在被 URL 更改触发时才会调用，我离开了`renderTemplate`）。*

无论如何，你的路由和控制器不应该关心 DOM 操作。通过绑定到重要值或观察控制器中的更改，将其留给您的视图和模板。

# javascript - 使用 Geddy 在 Node.js 中声明和使用枚举

> ID：15301698
> 
> 赞同：11
> 
> 时间：2013-03-08T19:23:47.507
> 
> 标签：javascript, node.js, geddy

对于我的模型，我希望将枚举作为数据类型，但我不知道该怎么做。我在 geddyjs.org 或谷歌的文档中找不到任何有用的东西。

模型可以这样定义：

```
var fooModel= function () {
  this.defineProperties({
    fooField: {type: 'datatype'},
    .............................
   });
} 
```

我应该在哪里以及如何定义枚举以及如何使用它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-08T19:36:09.223

请记住，Node 只是 javascript，而 javascript（据我所知）没有枚举。但是你可以伪造它，这里讨论：[JavaScript 中的枚举？](https://stackoverflow.com/questions/287903/enums-in-javascript)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-06-12T18:37:41.003

你应该使用像这样的对象；

```
const kindOf = {
    TYPE1: 'type1',
    TYPE2: 'type2',
    TYPE3: 'type3'
}

let object_type = kindOf.TYPE1; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-06T06:17:07.763

我首选的节点枚举包是[https://www.npmjs.com/package/enum](https://www.npmjs.com/package/enum)。

这是一个基本用法（从文档中复制）：

```
// use it as module
var Enum = require('enum');

// or extend node.js with this new type
require('enum').// define an enum with own values

var myEnum = new Enum({'A': 1, 'B': 2, 'C': 4}); 
```

然后您可以使用例如一个简单的 switch case 语句，例如：

```
let typeId = 2;

switch (typeId) {
    case myEnum.A.value:
        //Do something related to A.
    break;
    case myEnum.B.value:
        //Do something related to B.
    break;
    case myEnum.C.value:
        //Do something related to C.
    break;
    default:
       //Throw error
    break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-16T18:18:35.700

有一些模块可以做到这一点，其中之一是[https://npmjs.org/package/simple-enum](https://npmjs.org/package/simple-enum)（我创建的简单的一个）

# ios - MessageController (Text) 设置正文不设置正文。(iOS 6)

> ID：15301701
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:23:52.557
> 
> 标签：ios, cocoa-touch, nsstring

```
-(IBAction)SendTextTapped:(id)sender{

  if ([MFMessageComposeViewController canSendText]) {
    MFMessageComposeViewController* messageController = [[MFMessageComposeViewController alloc] init];
    messageController.messageComposeDelegate = self;
    __block NSString *fullA = [[NSString alloc] init];

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    CLLocation *newerLocation = [[CLLocation alloc]initWithLatitude:21.1700
                                                      longitude:72.8300];

    [geocoder reverseGeocodeLocation:newerLocation
               completionHandler:^(NSArray *placemarks, NSError *error) {

                 if (error) {
                   NSLog(@"Geocode failed with error: %@", error);
                   return;
                 }

                 if (placemarks && placemarks.count > 0)
                 {
                   CLPlacemark *placemark = placemarks[0];

                   NSDictionary *addressDictionary =
                   placemark.addressDictionary;

                   NSLog(@"%@ ", addressDictionary);
                   NSString *address = [addressDictionary
                                      objectForKey:(NSString *)kABPersonAddressStreetKey];
                   NSString *city = [addressDictionary
                                     objectForKey:(NSString *)kABPersonAddressCityKey];
                   NSString *state = [addressDictionary
                                      objectForKey:(NSString *)kABPersonAddressStateKey];
                   NSString *zip = [addressDictionary
                                    objectForKey:(NSString *)kABPersonAddressZIPKey];

                  NSLog(@"%@ %@ %@ %@", address,city, state, zip);

                   //NSLog(fullA);
                   fullA=(@"%@ %@ %@ %@", address,city, state, zip);
                 }
               }];
  [messageController setBody:fullA];
  [self presentModalViewController:messageController animated:YES];
  }
  else {

    NSLog(@"%@" , @"Sorry, you need to setup mail first!");
  }

} 
```

我尝试过使用 __block，或者我可以在在线教程中找到的所有内容。

这会打印出 NSLog 中的完整地址。但是，无论我尝试过什么，这都不会出现`[messageController setBody:(@"%@ %@ %@ %@",city, state, address, zip)];`

并使用 (setBody:@"Hello") 工作得很好......

我确信我可以做一些小事情来解决这个问题，但是我尝试过的一切都失败了。任何想法都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:28:20.733

用于`stringWithFormat`设置具有不同对象的主体，如下所示

```
[messageController setBody:[NSString stringWithFormat:@"%@ %@ %@ %@",city, state, address, zip]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:28:29.313

你不能按照你正在做的事情做你正在做的事情。调用`reverseGeocodeLocation`是异步的。在您取回地址信息之前，您最终会呈现消息控制器。这就是为什么身体总是空的。

您需要修改代码以从完成处理程序中创建和显示消息编写器（但您必须在主队列上调度代码）。

```
- (IBAction)SendTextTapped:(id)sender{
    if ([MFMessageComposeViewController canSendText]) {
        CLGeocoder *geocoder = [[CLGeocoder alloc] init];

        CLLocation *newerLocation = [[CLLocation alloc]initWithLatitude:21.1700 longitude:72.8300];
        [geocoder reverseGeocodeLocation:newerLocation completionHandler:^(NSArray *placemarks, NSError *error) {
            if (error) {
                NSLog(@"Geocode failed with error: %@", error);
                return;
            }

            NSString *body = @"";
            if (placemarks && placemarks.count > 0) {
                CLPlacemark *placemark = placemarks[0];

                NSDictionary *addressDictionary =
                placemark.addressDictionary;

                NSLog(@"%@ ", addressDictionary);
                NSString *address = [addressDictionary
                                   objectForKey:(NSString *)kABPersonAddressStreetKey];
                NSString *city = [addressDictionary
                                   objectForKey:(NSString *)kABPersonAddressCityKey];
                NSString *state = [addressDictionary
                                   objectForKey:(NSString *)kABPersonAddressStateKey];
                NSString *zip = [addressDictionary
                                   objectForKey:(NSString *)kABPersonAddressZIPKey];

                NSLog(@"%@ %@ %@ %@", address,city, state, zip);

                //NSLog(fullA);
                body = [NSString stringWithFormat:@"%@ %@ %@ %@", address,city, state, zip];
            }

            dispatch_async(dispatch_get_main_queue(), ^{
                MFMessageComposeViewController* messageController = [[MFMessageComposeViewController alloc] init];
                messageController.messageComposeDelegate = self;
                [messageController setBody:body];
                [self presentModalViewController:messageController animated:YES];
            });
        }];
    } else {
        NSLog(@"%@" , @"Sorry, you need to setup mail first!");
    }
} 
```

# layout - Extjs4，在锚布局中对齐字段

> ID：15301702
> 
> 赞同：0
> 
> 时间：2013-03-08T19:23:55.167
> 
> 标签：layout, extjs, extjs4, alignment, anchor

我想将我的字段以锚点布局放置在右侧。当我`anchor: '50%'`在此布局中添加一个字段时，它将显示如下：
![在此处输入图像描述](../Images/286499e3f3acbe292d18610050d17361.png)

我怎样才能把它放在右边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:03:08.590

这种锚布局不适用于这种布局。请改用列或表格布局。

使用锚布局接近实现所需的唯一方法是使用基于像素的偏移量，这没有意义，因为您使用的是字段宽度的百分比。

# regex - Perl 正则表达式：匹配嵌套括号

> ID：15301708
> 
> 赞同：11
> 
> 时间：2013-03-08T19:24:27.833
> 
> 标签：regex, perl

我正在尝试将嵌套`{}`括号与 Perl 中的正则表达式匹配，以便我可以从文件中提取某些文本。这是我目前拥有的：

```
my @matches = $str =~ /\{(?:\{.*\}|[^\{])*\}|\w+/sg;

foreach (@matches) {
    print "$_\n";
} 
```

在某些时候，这可以按预期工作。例如，如果`$str = "abc {{xyz} abc} {xyz}"`我获得：

```
美国广播公司
{{xyz} abc}
{xyz}

```

正如预期的那样。但对于其他输入字符串，它不能按预期运行。例如，如果`$str = "{abc} {{xyz}} abc"`，则输出为：

```
{abc} {{xyz}}
美国广播公司

```

这不是我所期望的。我本来希望`{abc}`并且`{{xyz}}`处于不同的行中，因为每个行在括号方面都是独立的。我的正则表达式有问题吗？如果是这样，我将如何解决它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-08T20:57:49.310

您对您的模式如何匹配感到惊讶，但没有人解释它？以下是您的模式匹配方式：

```
my @matches = $str =~ /\{(?:\{.*\}|[^{])*\}|\w+/sg;
                       ^    ^ ^ ^  ^      ^
                       |    | | |  |      |
{ ---------------------+    | | |  |      |
a --------------------------)-)-)--+      |
b --------------------------)-)-)--+      |
c --------------------------)-)-)--+      |
} --------------------------)-)-)--+      |
  --------------------------)-)-)--+      |
{ --------------------------+ | |         |
{ ----------------------------+ |         |
x ----------------------------+ |         |
y ----------------------------+ |         |
z ----------------------------+ |         |
} ------------------------------+         |
} ----------------------------------------+ 
```

如您所见，问题在于`\{.*\}`// 匹配太多。里面应该有一个匹配的东西

```
(?: \s* (?: \{ ... \} | \w+ ) )* 
```

`...`在哪里

```
(?: \s* (?: \{ ... \} | \w+ ) )* 
```

所以你需要一些递归。命名组是一种简单的方法。

```
say $1
   while /
      \G \s*+ ( (?&WORD) | (?&BRACKETED) )

      (?(DEFINE)
         (?<WORD>      \s* \w+ )
         (?<BRACKETED> \s* \{ (?&TEXT)? \s* \} )
         (?<TEXT>      (?: (?&WORD) | (?&BRACKETED) )+ )
      )
   /xg; 
```

但是，与其重新发明轮子，不如使用[Text::Balanced](http://search.cpan.org/perldoc?Text%3a%3aBalanced)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-08T20:01:17.783

[perlfaq5](http://perldoc.perl.org/perlfaq4.html#How-do-I-find-matching%2fnesting-anything%3f)涵盖了匹配平衡和嵌套分隔符的问题，我将让他们来涵盖所有选项，包括[(?PARNO)](http://perldoc.perl.org/perlre.html#Extended-Patterns)和[Regexp::Common](https://metacpan.org/module/Regexp::Common)。

但是匹配平衡项很棘手并且容易出错，除非您真的想学习和维护高级正则表达式，否则将其留给模块。幸运的是，有[Text::Balanced](https://metacpan.org/module/Text::Balanced)来处理这个等等。它是平衡文本匹配的瑞士军用电锯。

不幸的是[，它不处理括号分隔符上的转义](https://rt.cpan.org/Ticket/Display.html?id=83837)。

```
use v5.10;
use strict;
use warnings;

use Text::Balanced qw(extract_multiple extract_bracketed);

my @strings = ("abc {{xyz} abc} {xyz}", "{abc} {{xyz}} abc");

for my $string (@strings) {
    say "Extracting from $string";

    # Extract all the fields, rather than one at a time.
    my @fields = extract_multiple(
        $string,
        [
            # Extract {...}
            sub { extract_bracketed($_[0], '{}') },
            # Also extract any other non whitespace
            qr/\S+/
        ],
        # Return all the fields
        undef,
        # Throw out anything which does not match
        1
    );

    say join "\n", @fields;
    print "\n";
} 
```

您可以将[extract_multiple 视为](https://metacpan.org/module/Text::Balanced#extract_multiple)更通用且更强大的[split](http://perldoc.perl.org/functions/split.html)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-08T19:39:20.373

要在每个嵌套级别仅匹配一对嵌套括号，
但可以使用任意数量的级别，例如`{1{2{3}}}`，您可以使用

```
/\{[^}]*[^{]*\}|\w+/g 
```

要在任何嵌套级别可能有多个对时进行匹配，例如`{1{2}{2}{2}}`，您可以使用

```
/(?>\{(?:[^{}]*|(?R))*\})|\w+/g 
```

`(?R)`用于递归匹配整个模式 。

为了匹配包含在一对括号中的文本，引擎必须匹配`(?:[^{}]*|(?R))*`，
即，`[^{}]*`或者`(?R)`，零次或多次`*`。

所以在 eg`"{abc {def}}"`中，开局`"{"`匹配后，`[^{}]*`将匹配 the `"abc "`，`(?R)`将匹配 the `"{def}"`，则匹配闭`"}"`包。

被`"{def}"`匹配是因为`(?R)`它只是整个模式的缩写
`(?>\{(?:[^{}]*|(?R))*\})|\w+`，正如我们刚刚看到的，它将匹配 a`"{"`后跟文本匹配`[^{}]*`，然后再匹配`"}"`.

原子分组`(?>`...`)`用于防止正则表达式引擎在匹配后回溯到括号中的文本。这对于确保正则表达式在找不到匹配项时快速失败非常重要。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-08T19:39:04.877

你需要一个递归正则表达式。这应该有效：

```
my @matches;
push @matches, $1 while $str =~ /( [^{}\s]+ | ( \{ (?: [^{}]+ | (?2) )* \} ) )/xg; 
```

或者，如果您更喜欢非循环版本：

```
my @matches = $str =~ /[^{}\s]+ | \{ (?: (?R) | [^{}]+ )+ \} /gx; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-15T13:15:39.517

哇。这么简单的事情有一堆复杂的答案。

你遇到的问题是你在贪婪模式下匹配。也就是说，您正在使正则表达式引擎尽可能匹配，同时使表达式为真。

为避免贪婪匹配，只需添加一个“？” 在你的量词之后。这使得比赛尽可能短。

所以，我改变了你的表达方式：

```
my @matches = $str =~ /\{(?:\{.*\}|[^\{])*\}|\w+/sg; 
```

到：

```
my @matches = $str =~ /\{(?:\{.*?\}|[^\{])*?\}|\w+/sg; 
```

...现在它完全按照您的预期工作。

高温高压

弗朗西斯科

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-08T20:00:07.517

使用内置模块的一种方法`Text::Balanced`。

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;
use Text::Balanced qw<extract_bracketed>;

while ( <DATA> ) { 

    ## Remove '\n' from input string.
    chomp;

    printf qq|%s\n|, $_; 
    print "=" x 20, "\n";

    ## Extract all characters just before first curly bracket.
    my @str_parts = extract_bracketed( $_, '{}', '[^{}]*' );

    if ( $str_parts[2] ) { 
        printf qq|%s\n|, $str_parts[2];
    }   

    my $str_without_prefix = "@str_parts[0,1]";

    ## Extract data of balanced curly brackets, remove leading and trailing
    ## spaces and print.
    while ( my $match = extract_bracketed( $str_without_prefix, '{}' ) ) { 
        $match =~ s/^\s+//;
        $match =~ s/\s+$//;
        printf qq|%s\n|, $match;

    }   

    print "\n";
}

__DATA__
abc {{xyz} abc} {xyz}
{abc} {{xyz}} abc 
```

像这样运行它：

```
perl script.pl 
```

这会产生：

```
abc {{xyz} abc} {xyz}
====================
abc 
{{xyz} abc}
{xyz}

{abc} {{xyz}} abc
====================
{abc}
{{xyz}} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-08T19:35:18.037

只需稍微修改和扩展[经典解决方案：](https://stackoverflow.com/questions/2700613/how-can-i-extract-a-string-between-matching-braces-in-perl)

```
(\{(?:(?1)|[^{}]*+)++\})|[^{}\s]++ 
```

[**演示**](http://www.regex101.com/r/wJ9sZ6)（这是在 PCRE 中。当涉及到递归正则表达式时，行为与 Perl 略有不同，但我认为它应该在这种情况下产生相同的结果）。

经过一番努力（我对 Perl 不熟悉！），这是[**ideone**](http://ideone.com/odeI47)上的演示。`$&`指整个正则表达式匹配的字符串。

```
my $str = "abc {{xyz} abc} {xyz} {abc} {{xyz}} abc";

while ($str =~ /(\{(?:(?1)|[^{}]*+)++\})|[^{}\s]++/g) {
    print "$&\n"
} 
```

请注意，此解决方案假定输入有效。它会在无效输入时表现得相当随机。当遇到无效输入时，可以稍微修改它以停止。为此，我需要有关输入格式（最好是语法）的更多详细信息，例如是否`abc{xyz}asd`被视为有效输入。

# c++ - 停止 goto 优化 g

> ID：15301711
> 
> 赞同：1
> 
> 时间：2013-03-08T19:24:38.833
> 
> 标签：c++, templates, optimization, g++

在编写 asm 代码时，有一个技巧可以通过告诉 cpu 显式跳转到下一条指令来将代码减慢一两个周期。我正在考虑使用 C++ 模板做类似的事情。这是我的代码：

```
template <unsigned int c>
inline void adelay()
{
  goto x;
x:
  adelay<c-1>();
}

template <>
inline void adelay<0>()
{
} 
```

尽管这个想法看起来很合理，但优化器似乎通过删除 jmp 代码来阻碍。任何想法如何实施？

**背景**

想要这样做的原因是减慢微控制器的代码，使其以非常特定的频率输出光束脉冲。这是一个非常专业的用途，除了低级硬件访问（例如编写驱动程序或编程微控制器）之外并不常见。即便如此，我也会尽可能地避免此类事情。不幸的是，这不能总是避免。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:29:03.500

这就是优化器应该做的——优化，包括删除非功能性代码。要么在你的编译器选项中完全禁用优化，要么使用其他方法来减慢你的程序，有很多 API 可以让你在定义的时间内休眠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:30:37.587

您可以添加此属性：

```
template <>
inline void __attribute__((optimize("O0"))) adelay<0>()
{
} 
```

这应该阻止优化。尽管正如其他人所提到的，可能有更好的方法，但如果这纯粹是为了学习目的，那就太好了。我通常使用[它](http://gcc.godbolt.org/)来快速验证汇编程序输出，或者当我不在命令行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:32:01.063

感谢大家的帮助。我没有使用 jmp 指令，而是使用 nop 指令：

```
template <unsigned int c>
inline void adelay() 
{
  asm("nop");
  adelay<c-1>();
}

template <>
inline void adelay<0>()
{
} 
```

有一次，我使用了一个 volatile 变量，该变量的工作粒度略为粗略：

```
static volatile int _adelay = 0;
template <unsigned int c>
inline void adelay()
{
  _adelay;
  adelay<c-1>();
}

template <>
inline void adelay<0>()
{
} 
```

当我的内存不足时，这可能很有用。

再次感谢！:)

阿德里安

# sql-server - 如何在 T-SQL 中开发递归 CTE？

> ID：15301712
> 
> 赞同：0
> 
> 时间：2013-03-08T19:24:39.130
> 
> 标签：sql-server, tsql, recursion, common-table-expression

我是递归 CTE 的新手。我正在尝试开发一个 CTE，它将返回每个经理姓名下的所有员工。所以我有两张桌子：`people_rv`和`staff_rv`

People_rv 表包含所有人员，包括经理和员工。`Staff_rv`仅包含经理信息。唯一标识符人员值存储在`Staff_rv`. Uniqueidentifier 员工值存储在`people_rv`. `People_rv`包含经理和员工的 varchar 名字和姓氏值。

但是当我运行以下 CTE 时，出现错误：

```
WITH
cteStaff (ClientID, FirstName, LastName, SupervisorID, EmpLevel)
AS
(
    SELECT p.people_id, p.first_name, p.last_name, s.supervisor_id,1
    FROM people_rv p JOIN staff_rv s on s.people_id = p.people_id
    WHERE s.supervisor_id = '95E16819-8C3A-4098-9430-08F0E3B764E1' 
    UNION ALL
    SELECT p2.people_id, p2.first_name, p2.last_name, s2.supervisor_id, r.EmpLevel + 1
    FROM people_rv p2 JOIN staff_rv s2 on s2.people_id = p2.people_id
    INNER JOIN cteStaff r on s2.staff_id = r.ClientID
)
SELECT
    FirstName + ' ' + LastName AS FullName, 
    EmpLevel,
    (SELECT first_name + ' ' + last_name FROM people_rv p join staff_rv s on s.people_id = p.people_id 
    WHERE s.staff_id = cteStaff.SupervisorID) AS Manager
FROM cteStaff
OPTION (MAXRECURSION 0); 
```

我的输出是：

```
Barbara G   1   Melanie K
Dawn P  1   Melanie K
Garrett M   1   Melanie K
Stephanie P 1   Melanie K
Amanda F    1   Melanie K
Amanda T    1   Melanie K
Stephanie G 1   Melanie K
Carlos H    1   Melanie K 
```

所以它不会比第一级迭代更多。为什么不？Melanie 是最顶层的主管，但最左边一列中的每个人也是主管。所以这个查询也应该返回级别 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:47:34.087

据我所知，您的问题是您无法将经理与员工联系起来。

这个加入

```
INNER JOIN cteStaff r on r.StaffID = s2.staff_id 
```

只需加入同一个最初的 1 级员工，回到自己身边。

更新：

还是不太对！你有一个 supervisor_id，但你仍然没有真正使用它来加入 CTE。

因此，对于此 CTE 的每次递归，您需要（不包括名称 join）：

```
select {Level 1 Boss}, NULL (no supervisor)
union
select {new employee}, {that employee's boss} 
```

因此，连接必须将 CTE 的 ClientID（1 级老板）连接到第二个 UNION 查询的**主管**字段，该字段看起来是**supervisor_id**，而不是**staff_id**。

完成第二项任务的 JOIN 是（根据我对您的 staff_rv 表模式的了解）：

```
 SELECT p2.people_id, p2.first_name, p2.last_name, s2.supervisor_id, r.EmpLevel + 1
    FROM people_rv p2 JOIN staff_rv s2 on s2.people_id = p2.people_id
    INNER JOIN cteStaff r on s2.supervisor_id = r.ClientID 
```

请注意，底部连接将 r.ClientID（1 级老板）连接到职员的 supervisor_id 字段。

（注意：我认为你的 staff_id 和 supervisor_id 模仿了 people_rv 表中的 people_id 值，所以这个连接应该可以正常工作。但如果它们不同（即工作人员的 supervisor_id 不是那个主管的 people_id），那么你需要编写加入，这样员工的 supervisor_id 可以加入到他们作为 CTE 中的 ClientID 存储的 people_id。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:25:05.943

您的加入可能会陷入无限循环。我会检查您希望桌子实际下降多少级。通常你加入一个类似于做的递归

```
 ID = ParentID 
```

包含在表格或表达式中的东西。请记住，如果您必须弥补您的关系，您也可以在递归 CTE 之前创建 CTE。

这是一个将自动执行的示例，它可能会有所帮助。

```
Declare @table table ( PersonId int identity, PersonName varchar(512), Account int, ParentId int, Orders int);

insert into @Table values ('Brett', 1, NULL, 1000),('John', 1, 1, 100),('James', 1, 1, 200),('Beth', 1, 2, 300),('John2', 2, 4, 400);

select 
    PersonID
,   PersonName
,   Account
,   ParentID
from @Table

; with recursion as 
    (
    select 
        t1.PersonID
    ,   t1.PersonName
    ,   t1.Account
    --, t1.ParentID
    ,   cast(isnull(t2.PersonName, '')
            + Case when t2.PersonName is not null then '\' + t1.PersonName else t1.PersonName end
            as varchar(255)) as fullheirarchy
    ,   1 as pos
    ,   cast(t1.orders + 
            isnull(t2.orders,0) -- if the parent has no orders than zero
            as int) as Orders
    from @Table t1
        left join @Table t2 on t1.ParentId = t2.PersonId
    union all
    select 
        t.PersonID
    ,   t.PersonName
    ,   t.Account
    --, t.ParentID
    ,   cast(r.fullheirarchy + '\' + t.PersonName as varchar(255))
    ,   pos + 1  -- increases
    ,   r.orders + t.orders
    from @Table t
        join recursion r on t.ParentId = r.PersonId
    )
, b as 
    (
    select *, max(pos) over(partition by PersonID) as maxrec  -- I find the maximum occurrence of position by person
    from recursion
    )
select *
from b
where pos = maxrec  -- finds the furthest down tree
-- and Account = 2  -- I could find just someone from a different department 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T21:31:15.863

这是一个很好的简单递归 CTE 审查（它可能不是答案，但其他搜索如何制作递归 CTE 的人可能需要它）：

```
-- Recursive CTE
;
WITH    Years ( myYear )
          AS (
               -- Base case
      SELECT    DATEPART(year, GETDATE())
               UNION ALL
      -- Recursive
               SELECT   Years.myYear - 1
               FROM     Years
               WHERE    Years.myYear >= 2002
             )
    SELECT  *
    FROM    Years 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T19:35:38.473

请注意，这可能不会解决您的问题，但它是一种希望在原始查询中看到您哪里出错的方法。

默认值为 100 级递归 - 您可以使用`MAXRECURSION`从 CTE 中选择的查询提示将其设置为无限制：

```
...
FROM cteStaff
OPTION (MAXRECURSION 0); 
```

来自[MSDN](http://msdn.microsoft.com/en-gb/library/ms181714.aspx)：

> MAXRECURSION 数
> 
> 指定此查询允许的最大递归数。number 是介于 0 和 32767 之间的非负整数。指定 0 时，不应用限制。如果未指定此选项，则服务器的默认限制为 100。
> 
> 在查询执行期间达到指定的或默认的 MAXRECURSION 限制数时，查询将结束并返回错误。
> 
> 由于此错误，该语句的所有效果都将回滚。如果语句是 SELECT 语句，则可能返回部分结果或不返回结果。返回的任何部分结果可能不包括超出指定最大递归级别的递归级别的所有行。

# java - 在点对点聊天中使用 GCM

> ID：15301713
> 
> 赞同：1
> 
> 时间：2013-03-08T19:24:39.973
> 
> 标签：java, android

如何使用 GCM 进行点对点聊天？我知道我们可以在从服务器到设备的推送通知中使用 GCM 但是否可以使用它从一台设备向另一台设备发送消息。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:29:38.677

不，根据[GCM 架构概述](http://developer.android.com/google/gcm/gcm.html)，GCM 只处理两件事：

*   使用 GCM 服务注册您的应用程序
*   允许第 3 方服务器向注册设备发送消息

当然，您可以直接连接到您的第 3 方服务器，获取注册用户列表，然后向您的服务器发送请求以通过 GCM 向该用户发送消息，但这**不是**对等设备到设备的连接。

# sql - 查询将给出两个日期范围之间的日期列表

> ID：15301716
> 
> 赞同：4
> 
> 时间：2013-03-08T19:24:48.263
> 
> 标签：sql, oracle, oracle11g

我的问题类似于以下问题：

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:14582643282111](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:14582643282111)

不同之处在于我的内部查询返回两条记录，而我有外部查询。

我需要编写类似这样的内部查询，它会给我一个两个日期范围之间的日期列表（我正在尝试这个查询，它不执行）。

```
Select * from outerTable where  my_date in
(   
    select to_date(r.REQ_DATE) + rownum -1
     from all_objects, (MY_INNER_QUERY Where ID =100) r 
     where rownum <= to_date(r.DUE_DATE,'dd-mon-yyyy')-to_date(r.REQ_DATE,'dd-mon-yyyy')+1;
) 
```

我的内部查询返回以下 2 行：

```
Select * from innerTable Where ID =100

    Start date           end date 
    3/19/2013            3/21/2013 
    3/8/2013             3/8/2013 
```

所以我需要内部查询，它将以下日期返回到外部查询：

```
 3/19/2013
    3/20/2013
    3/21/2013
    3/8/2013 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:03:24.723

好问题——这个问题真的吸引了我！答案或多或少地隐藏在汤姆的帖子中。这是简短版本，使用名为 TestDR 的表来定义范围。首先TestDR内容：

```
SELECT * FROM TestDR;

STARTDATE ENDDATE
--------- ---------
19-MAR-13 21-MAR-13
08-MAR-13 08-MAR-13 
```

现在让查询为范围内的每个日期创建一行：

```
WITH NUMS AS (
  SELECT LEVEL-1 DaysToAdd
  FROM DUAL
  CONNECT BY LEVEL <= 60
)
SELECT StartDate + DaysToAdd TheDate
FROM TestDR
CROSS JOIN NUMS
WHERE TestDR.EndDate - TestDR.StartDate + 1 > DaysToAdd
ORDER BY 1

THEDATE
---------
08-MAR-13
19-MAR-13
20-MAR-13
21-MAR-13 
```

使用根据 Tom 的帖子改编的查询，您必须知道“播种”`NUMS`查询的最大范围。他在他的例子中使用了 60，所以这就是我上面使用的。如果您认为子查询中的任何行都不会超过 60 天，那么这将起到作用。如果您认为最大值可能高达 1000 天（大约三年），那么将 60 更改为 1000。我尝试了这个并查询了 2 1/2 年的范围，结果是即时的。

如果您想指定确切的“种子”计数，如果您愿意使查询更复杂一点，则可以计算它。这是我可以用我的`TestDR`桌子做的：

```
WITH NUMS AS (
  SELECT LEVEL-1 DaysToAdd
  FROM DUAL
  CONNECT BY LEVEL <= (
    SELECT MAX(EndDate - StartDate + 1)
    FROM TestDR)
)
SELECT ... and the rest of the query as above 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:19:29.183

对于您的问题，您不需要枚举日期。一个简单的 JOIN 就足够了。

```
SELECT o.*
  FROM outerTable o
 INNER JOIN innerTable i
    ON i.ID = 100
   AND o.my_date BETWEEN i.REQ_DT and i.DUE_DT 
```

从您的代码中，我可以看出您一定是一个面向对象的程序员，并且不熟悉 SQL。它对你有很大帮助，所以不要试图控制它。它会阻碍它的优化功能。

不要以错误的方式理解这一点，我有同样的心态（相信我比机器更聪明）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:27:45.257

在您的外部查询中使用 OR 语句，它允许您的日期等于返回 Start_Date 或 End_Date

```
AND (date = subQuery.Start_Date 
  OR date = subQuery.End_Date) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T20:01:11.313

使用您的日期：

```
SELECT smth... FROM some_tab
 WHERE your_date IN  
( -- remove unnecessary columns, leave only what you select in outer query 
  -- or select * 
SELECT start_date
 , TRUNC(start_date, 'iw')                  wk_starts  
 , TRUNC(start_date, 'iw') + 7 - 1/86400    wk_ends
 , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk#
 FROM 
(
SELECT (start_date-1) + LEVEL AS start_date
 FROM 
( -- replace this part with selecting your start and end dates from your table --
SELECT to_date('03/21/2013', 'MM/DD/YYYY') end_date 
     , to_date('03/19/2013', 'MM/DD/YYYY')  start_date 
 FROM dual
)
CONNECT BY LEVEL <= (end_date - start_date)
)
) -- your outer query ends --
/

START_DATE    WK_STARTS    WK_ENDS                ISO_WK#
----------------------------------------------------------
3/19/2013    3/18/2013    3/24/2013 11:59:59 PM    12
3/20/2013    3/18/2013    3/24/2013 11:59:59 PM    12 
```

日期和 ISO 周等的年度表......使用任何日期作为开始和结束日期。连接方式和之间的天数用于动态生成表。如果使用硬结构，您可以在运算符之间使用...：

```
SELECT start_date
 , TRUNC(start_date, 'iw')                  wk_starts  
 , TRUNC(start_date, 'iw') + 7 - 1/86400    wk_ends
 , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk#
 FROM 
 (-- This part simplifies above formatting and optional --
 SELECT (start_date-1) + LEVEL AS start_date
   FROM 
  (-- Replace start/end dated with any dates --
  SELECT TRUNC(ADD_MONTHS (SYSDATE, 12), 'Y')-1 end_date  
       , TRUNC(SYSDATE, 'YEAR')                 start_date 
   FROM dual
  )
  CONNECT BY LEVEL <= (end_date - start_date) -- number of days between dates 
 )
 /

START_DATE    WK_STARTS    WK_ENDS                  ISO_WK#
-----------------------------------------------------------
1/1/2013      12/31/2012    1/6/2013 11:59:59 PM      1
1/2/2013      12/31/2012    1/6/2013 11:59:59 PM      1
1/3/2013      12/31/2012    1/6/2013 11:59:59 PM      1
...
12/28/2013    12/23/2013    12/29/2013 11:59:59 PM    52
12/29/2013    12/23/2013    12/29/2013 11:59:59 PM    52
12/30/2013    12/30/2013    1/5/2014 11:59:59 PM      1 
```

# ruby - 使用 LibXML Ruby 解析 xml 会截断数据

> ID：15301717
> 
> 赞同：0
> 
> 时间：2013-03-08T19:24:50.690
> 
> 标签：ruby, xml, xml-parsing, libxml2

**我的目标**：我想在主题 xml 文档中获取每个名为“SECTION”的元素；获取每个 SECTION 及其下的所有内容。

**约束**：我必须使用 LibXML Ruby；即，需要'xml'。

**问题**：输出数据被截断。

**问题（见输出 file1.xml）**：

*   为什么 file1.xml 中的输出被截断？注意：第一个 P(a).../P 标记之间的大部分文本（注意：截断从单词“ethic...”开始）
*   为什么代码删除了最后两个 P 元素（P(b)...、P(2)...）和 CITA 元素？是什么导致 xml version="1.0" encoding="UTF-8"？和 SECTION/ 出现在输出的末尾？

注意：输出 file2.xml 有更严重的截断。我把它包括在内，以防它澄清任何事情。

这是代码：

```
#!/usr/bin/ruby
require "xml"
reader = XML::Reader.file('infile2.xml')
while reader.read
  node = reader.node 
    if node.name == "SECTION"
      iteration = XML::Document.string(node.to_s)
      puts iteration
      puts "\n"
    end
end 
```

输入文件1.xml：

```
<?xml version="1.0"?>
<SECTION>
  <SECTNO>§ 0.735-1</SECTNO>
  <SUBJECT>Agency ethics officials.</SUBJECT>
  <P>(a) <E T="03">Designated Agency Ethics Official (DAEO).</E> The Assistant General Counsel (023) is the designated agency ethics official (DAEO) for the Department of Veterans Affairs. The Deputy Assistant General Counsel (023C) is the alternate DAEO, who is designated to act in the DAEO's absence. The DAEO has primary responsibility for the administration, coordination, and management of the VA ethics program, pursuant to 5 CFR 2638.201-204.</P>
  <P>(b) <E T="03">Deputy ethics officials.</E> (1) The Regional Counsel are deputy ethics officials. They have been delegated the authority to act for the DAEO within their jurisdiction, under the DAEO's supervision, pursuant to 5 CFR 2638.204.</P>
  <P>(2) The alternate DAEO, the DAEO's staff, and staff in the Offices of Regional Counsel, may also act as deputy ethics officials pursuant to delegations of one or more of the DAEO's duties from the DAEO or the Regional Counsel.</P>
  <CITA>[58 FR 61813, Nov. 23, 1993\. Redesignated at 61 FR 11309, Mar. 20, 1996]</CITA>
</SECTION> 
```

输出，给定输入 file1.xml（上图）：

```
<?xml version="1.0" encoding="UTF-8"?>
<SECTION>
  <SECTNO>§ 0.735-1</SECTNO>
  <SUBJECT>Agency ethics officials.</SUBJECT>
  <P>(a) <E T="03">Designated Agency Ethics Official (DAEO).</E> The Assistant General Counsel (023) is the designated agency ethics official (DAEO) for the Department of Veterans Affairs. The Deputy Assistant General Counsel (023C) is the alternate DAEO, who is designated to act in the DAEO's absence. The DAEO has primary responsibility for the administration, coordination, and management of the VA ethic</P></SECTION>

<?xml version="1.0" encoding="UTF-8"?>
<SECTION/> 
```

输入文件2.xml：

```
<?xml version="1.0"?>
<SUBPART>
  <HD SOURCE="HED">Subpart A—General Provisions</HD>
  <SECTION>
    <SECTNO>§ 0.735-1</SECTNO>
    <SUBJECT>Agency ethics officials.</SUBJECT>
    <P>(a) <E T="03">Designated Agency Ethics Official (DAEO).</E> The Assistant General Counsel (023) is the designated agency ethics official (DAEO) for the Department of Veterans Affairs. The Deputy Assistant General Counsel (023C) is the alternate DAEO, who is designated to act in the DAEO's absence. The DAEO has primary responsibility for the administration, coordination, and management of the VA ethics program, pursuant to 5 CFR 2638.201-204.</P>
    <P>(b) <E T="03">Deputy ethics officials.</E> (1) The Regional Counsel are deputy ethics officials. They have been delegated the authority to act for the DAEO within their jurisdiction, under the DAEO's supervision, pursuant to 5 CFR 2638.204.</P>
    <P>(2) The alternate DAEO, the DAEO's staff, and staff in the Offices of Regional Counsel, may also act as deputy ethics officials pursuant to delegations of one or more of the DAEO's duties from the DAEO or the Regional Counsel.</P>
    <CITA>[58 FR 61813, Nov. 23, 1993\. Redesignated at 61 FR 11309, Mar. 20, 1996]</CITA>
  </SECTION>
  <SECTION>
    <SECTNO>§ 0.735-2</SECTNO>
    <SUBJECT>Government-wide standards.</SUBJECT>
    <P>For government-wide standards of ethical conduct and related responsibilities for Federal employees, see 5 CFR Part 735 and Chapter XVI.</P>
    <CITA>[61 FR 11309, Mar. 20, 1996\. Redesignated at 63 FR 33579, June 19, 1998]</CITA>
  </SECTION>
</SUBPART> 
```

输出，给定输入 file2.xml（上图）：

```
<?xml version="1.0" encoding="UTF-8"?>
<SECTION>
    <SECTNO>§ 0.735-1</SECTNO>
    <SUBJECT>Agency ethics officials.</SUBJECT>
    <P>(a) <E T="03">Designated Agency Ethics Official (DAEO).</E></P></SECTION>

<?xml version="1.0" encoding="UTF-8"?>
<SECTION/>

<?xml version="1.0" encoding="UTF-8"?>
<SECTION>
    <SECTNO>§ 0.735-2</SECTNO>
    <SUBJECT>Government-wide standards.</SUBJECT>
    <P>For government-wide standards of ethical conduct and related responsibilities for Federal employees, see 5 CFR Part 735 and Chapter XVI.</P>
    <CITA/></SECTION>

<?xml version="1.0" encoding="UTF-8"?>
<SECTION/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:38:47.897

除非您有一个巨大的 XML 文档，否则请考虑以下内容：

```
require "xml"
doc = XML::Document.file('infile1.xml')
doc.find('/SECTION').each do |s|
  puts "[#{s}]"
end 
```

这输出：

```
<SECTION>
  <SECTNO>§ 0.735-1</SECTNO>
  <SUBJECT>Agency ethics officials.</SUBJECT>
  <P>(a) <E T="03">Designated Agency Ethics Official (DAEO).</E> The Assistant General Counsel (023) is the designated agency ethics official (DAEO) for the Department of Veterans Affairs. The Deputy Assistant General Counsel (023C) is the alternate DAEO, who is designated to act in the DAEO's absence. The DAEO has primary responsibility for the administration, coordination, and management of the VA ethics program, pursuant to 5 CFR 2638.201-204.</P>
  <P>(b) <E T="03">Deputy ethics officials.</E> (1) The Regional Counsel are deputy ethics officials. They have been delegated the authority to act for the DAEO within their jurisdiction, under the DAEO's supervision, pursuant to 5 CFR 2638.204.</P>
  <P>(2) The alternate DAEO, the DAEO's staff, and staff in the Offices of Regional Counsel, may also act as deputy ethics officials pursuant to delegations of one or more of the DAEO's duties from the DAEO or the Regional Counsel.</P>
  <CITA>[58 FR 61813, Nov. 23, 1993\. Redesignated at 61 FR 11309, Mar. 20, 1996]</CITA>
</SECTION> 
```

这并不能回答问题，而是一种解决方法。

我不确定使用阅读器的实际问题是什么，但我怀疑它与游标有关。例如，以下工作，delta 第一个 XML 文档还有一个额外的空白部分：

```
if node.name == "SECTION"
  puts "#{reader.read_outer_xml}"
end 
```

# c++ - 来自多个 boost 线程的 ofstream 写入 - g++ 和 vs2008

> ID：15301718
> 
> 赞同：0
> 
> 时间：2013-03-08T19:24:51.813
> 
> 标签：c++, boost-thread, ofstream

使用 boost 线程库，我将 open ofstream 文件作为参考传递给每个线程，在一半线程写入后出现某种崩溃并且程序终止。我的假设是函数到达末尾，关闭文件，其余线程正在尝试写入已关闭的文件。作为测试，我为最后一个线程添加了一个连接语句，并且更多的线程设法写入文件。我的多线程经验是 2 天 - 昨天我构建了 boost 库，但在 c++ 或任何语言方面没有太多经验。

我通读了“可能已经有你答案的问题”，但没有人回答这个问题。有很多帖子解决了这个问题的版本以及解决方案的许多方法 - 这似乎更像是过度思考，并且有一种干净的方法可以确保所有线程在文件关闭之前完成并且每个线程的写入都是缓冲在队列中以防止写入冲突。

一些可能的解决方案：

*   而不是传递打开的文件，而是传递文件引用并让每个线程打开文件，追加和关闭`ofstream myfile("database", ios::out | ios::app);`- 从这个发布的解决方案[“我如何添加......”](https://stackoverflow.com/questions/14017724/how-do-i-add-data-at-the-end-of-a-file-in-c)；这没有用

*   通读[boost线程文档](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html)，有一个 `join_all()`函数，但在vs2008中从boost 1.53.0版本编译，`"error C2039: 'join_all' : is not a member of 'boost::thread'"`

*   [使用 boost mutex 或 locks](https://stackoverflow.com/questions/6745044/multithreaded-logging-help)这个解释似乎是正确的，但我首先想知道崩溃是否是由于多次写入冲突或文件在线程完成写入之前关闭。

*   这个[c++ ostream::write 页面](http://www.cplusplus.com/reference/ostream/ostream/write/)引用了多线程，但只是声明没有保证

*   [这一篇阐述](http://www.cplusplus.com/forum/windows/44905/)了`boost::thread and boost::function`与其他作品不同的工作，但回顾 `boost::function`文献并不能帮助解释评论的含义

*   回到如果这是等待所有线程完成而不是写冲突的问题，[这个讨论提供了一个](https://stackoverflow.com/questions/5290006/when-all-threads-are-complete)需要存储所有线程并调用的解决方案`join()`

*   [这讨论了](https://stackoverflow.com/questions/3180164/correct-way-of-checking-if-threads-are-done)特定于Windows的问题，`WaitForMultipleObjects`但这是特定于 Windows 的 - 这篇文章中的最后一个解决方案听起来像是答案，但它没有投票，我无法判断它是否特定于 Windows。

*   [将所有内容缓冲到内存](https://stackoverflow.com/questions/4673750/implementing-a-buffer-to-write-data-from-multiple-threads)并在单独的函数中写出 - 此解决方案使用 C#，但该方法似乎是合理的。他们讨论的细节对我来说没有意义。

*   [在循环中创建线程](https://stackoverflow.com/questions/8744279/create-threads-in-a-loop)- 似乎有最清晰的评论；`boost::thread_group`使用此线程中给出的方法解决

*   有更多的论坛讨论，但它们听起来像是之前示例的更多版本

我想要一个适用于 windows 和 linux 的解决方案；我的直觉是传递文件引用并让每个线程附加到文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:42:31.910

在从多个线程不协调地写入同一流之后，您希望看到什么结果？毕竟那将是垃圾，即使流确实在这种折磨中幸存下来……您将需要在写入之间实现某种协调。

# visual-c++ - 为什么以下代码不会覆盖 C++ CLI 中的基类属性？

> ID：15301725
> 
> 赞同：2
> 
> 时间：2013-03-08T19:25:04.903
> 
> 标签：visual-c++, visual-studio-2012, c++-cli, overriding

我是一名 C# 程序员，对 C++ 了解不多。知道为什么我会出错吗？

```
ref class masterWeapon{
public :
    virtual property int Slot {
        int get(){
            return -1;
        }
    }
};

ref class Weapon1 : masterWeapon{

public :
    virtual property int Slot{
//following like throw an error :  cannot override base class method 
        int get() override = masterWeapon::Slot::get{
            return 1;
        }
    }

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:37:59.730

只需删除该`= masterWeapon::Slot::get`部分，它就会编译。如果您阅读了 C3764 附带的错误消息，它会使这一点更加明显（但不是 100%）：

> ...因为基本方法被显式覆盖`'Weapon1::Slot::get'`

给我们以下代码：

```
ref class Weapon1 : masterWeapon{
public :
    virtual property int Slot {
        int get() override {
            return 1;
        }
    }
}; 
```

当遇到以下情况时：

```
masterWeapon^ weapon1 = gcnew masterWeapon();
masterWeapon^ weapon2 = gcnew Weapon1();

Console::WriteLine(L"weapon1->Slot = {0}", weapon1->Slot);
Console::WriteLine(L"weapon2->Slot = {0}", weapon2->Slot); 
```

结果是：

> 武器1->插槽= -1
> 
> 武器2->插槽= 1

# mysql - Delphi xe2，无法从mysql数据库导入varchar类型的字段

> ID：15301729
> 
> 赞同：0
> 
> 时间：2013-03-08T19:25:19.393
> 
> 标签：mysql, database, delphi, odbc, delphi-xe2

我只是创建一个到我的数据库（MYSQL）的连接，使用 ODBC 女巫使用 mysql API，我开始使用 Tdatabase 组件和 Ttable 组件以及 Datasource 和 Dbgrid，我注意到类型的字段（Varchar 和 LongVarchar 和 text.ect）

Ttable 组件无法导入那些类型的 mysql 他们只导入基本的数字类型，如（int 和 float 等），但我怎样才能得到像 string 这样的值。

谢谢你..对不起我的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:19:24.530

解决了 1 个 TSQLQUERY 的问题，这是我插入 SQL 过滤器的那个。1 DATASETPROVIDER 连接到 TSQLQUERY。1 CLIENTDATASET 连接到 DATASETPROVIDER。现在它与 ACCESS DB 的相同，1 个 DBGRID 连接到一个 TDataset，并且该 TDataset 连接到以前的 CLIENTDATASET。

# php - jQuery - 序列化输入数组

> ID：15301730
> 
> 赞同：0
> 
> 时间：2013-03-08T19:25:22.513
> 
> 标签：php, jquery, serialization

我的代码中遗漏了一些东西。我有一个用于百分比值的文本框列表，并且可能有很多输入。

```
// loop through unknown inputs with different values
<input name="DESIREDPERCENT[<?php echo $recid; ?>]" class="percinputbox" />
// end loop

// attach click event to this element
<span id="updatepercs">Update Percentages</span> 
```

然后我有一个简单的跨度元素来发送所有的输入与类`percinputbox`

```
$(document).ready(function(){

 $('#updatepercs').click(function(){
   var allinputs = $("input.percinputbox").serialize();
   console.log(allinputs);  //DESIREDPERCENT%5B73%5D=50.00&DESIREDPERCENT%5B104%5D=50.00    

   $.ajax({
     url:'update.php',
     data:"formId=updatepercentages" + allinputs,
     success:function(response){ alert(response); } 
  }); 

}); 
```

我有我的`php`听力`$.ajax`：

更新.php

```
<?php
if($_POST['formId'] == 'updatepercentages'){
  foreach( $_REQUEST['DESIREDPERCENT'] as $key ){
    echo $key;
  }
}
?> 
```

到目前为止，我只得到一个输入值。所以我肯定做错了。

我在这里接受更好/优化的方式。我一般使用`<form>`标签提交表单，但我想知道如何使用`jquery`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:33:17.667

您缺少`&`介于`formId=updatepercentages`和之间`allinputs`

`data:"formId=updatepercentages&" + allinputs,`

# c# - 如何在 Monogame 中全屏启动？

> ID：15301735
> 
> 赞同：9
> 
> 时间：2013-03-08T19:25:41.967
> 
> 标签：c#, wpf, monogame

我正在使用 Monogame 和 C# 开发游戏。我有一个全屏启动的菜单的 wpf 应用程序。当我点击菜单上的播放时，我进入 Monogame 项目。如何像使用 wpf 菜单一样全屏启动 Monogame 解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T19:56:04.587

您可以将`IsFullscreen`属性设置为`true`。

```
//you likely already have this line (or similar)
graphics = new GraphicsDeviceManager(this);

//set the GraphicsDeviceManager's fullscreen property
graphics.IsFullScreen = true; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-24T20:59:46.210

这是monogame的正确方法

```
GraphicsDeviceManager graphics;
graphics = new GraphicsDeviceManager(this);
graphics.ToggleFullScreen(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-25T19:21:43.173

有两种方法可以使应用程序全屏显示。一种是通过设置`IsFullScreen`属性，另一种是通过调用`ToggleFullScreen`方法。

请记住，根据[文档](https://docs.monogame.net/api/Microsoft.Xna.Framework.GraphicsDeviceManager.html#Microsoft_Xna_Framework_GraphicsDeviceManager_IsFullScreen)，如果您在初始化期间更改属性，这将自动设置全屏模式。但是在更改属性时，而不是在初始化时，您需要调用该`ApplyChanges`方法。

```
// probably already defined
graphics = new GraphicsDeviceManager(this);

// ...

graphics.IsFullScreen = true;

// don't forget to call ApplyChanges, if you are not in the Initialize method
graphics.ApplyChanges(); 
```

```
// probably already defined 
graphics = new GraphicsDeviceManager(this);

// ...

graphics.ToggleFullScreen(); 
```

# javascript - 在 d3 中设置特定的缩放级别？

> ID：15301736
> 
> 赞同：0
> 
> 时间：2013-03-08T19:25:43.930
> 
> 标签：javascript, maps, d3.js, zooming, graphing

我在 d3 中有一个折线图，我们需要实现特定的缩放级别，类似于谷歌地图。我想要一个鼠标滚轮放大动作来捕捉/转换到下一个可能的向内缩放级别，以及一个鼠标滚轮缩小动作来捕捉/转换到下一个可能的向外缩放级别。

我对缩放方法的设置与其他所有人的设置相似：

```
 self.plot.call(d3.behavior.zoom().x(self.x).y(self.y).on("zoom", self.redraw())); 
```

但我对 d3 的了解还不够（我也没有多少时间……）知道如何设置它。任何提示/帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:40:25.833

您可以更改缩放事件侦听器以插入事件并根据需要调整比例（例如四舍五入到下一个整数）。[有一篇博客文章在这里](http://thisismattmiller.com/blog/add-zoom-slider-to-d3-js/)解释了更多。

这比简单地将缩放行为附加到轴要多一些工作，但 d3 没有提供任何限制开箱即用的缩放级别的功能。

# c# - 如何判断 OpenXML 中段落的高度？

> ID：15301737
> 
> 赞同：3
> 
> 时间：2013-03-08T19:25:56.280
> 
> 标签：c#, xslt, ms-word, openxml

我正在从用户数据生成一个 MS Word 文档。数据被放置在一个序列化为 XML 的容器中，然后使用 XSLT 将生成的 XML 转换为 OpenXML。在 C# 中以编程方式进行了一些小的更改以生成 Word 文档，因为它们无法使用 XSLT 完成。

用户要求将项目完全放在一个页面上，而不会将任何相关数据拆分到另一个页面上。有时一个项目会填满整个页面，有时我可以在一页上放置三个或四个项目（我需要在适合同一页面的项目之间插入分隔符（水平规则）。）

有没有办法确定一个项目或 OpenXML 段落是否完全适合“当前”页面？这可以通过 C# 或 XSLT，我可以解决一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:42:08.127

不幸的是，唯一可靠的方法是实际*渲染输出，*包括所有的字体大小、粗体、字距调整等等。这意味着您必须在 Word 中进行分页，然后将其保存回 OpenXML。

# codeigniter - 无法访问远程数据库

> ID：15301742
> 
> 赞同：0
> 
> 时间：2013-03-08T19:26:20.087
> 
> 标签：codeigniter, wamp, codeigniter-2

我正在尝试为我的 codeigniter 项目使用远程数据库（我正在使用 WAMP）。当我尝试调出我的控制器页面时出现以下错误：

> 发生数据库错误 无法使用提供的设置连接到您的数据库服务器。文件名：C:\wamp\www\Naranpur\system\database\DB_driver.php 行号：124

这些是我的数据库文件设置：

```
$db['default']['hostname'] = 'something.cs.something.edu';
$db['default']['port'] = '3306';
$db['default']['username'] = 'some_user';
$db['default']['password'] = 'some_pwd';
$db['default']['database'] = 'some_database';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = FALSE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = TRUE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'latin1';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

但是当我尝试使用以下设置访问本地主机上的数据库并提供相同的 url 时，它可以工作！

```
$db['default']['hostname'] = 'localhost';
$db['default']['port'] = '3306';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'test';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = FALSE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = TRUE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'latin1';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

有人可以告诉我哪里可能出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:50:00.613

我认为您需要授予用户`some_user`访问数据库的权限。从您`phpmyadmin`的`privilege`选项卡中，然后编辑该用户的权限。在登录信息部分将主机设置为您的 IP 地址或将其设置`%`为允许该用户从任何主机访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:35:14.727

你能从mysql客户端访问something.cs.something.edu吗？（检查连接）

# javascript - 动态 id ng-repeat

> ID：15301746
> 
> 赞同：48
> 
> 时间：2013-03-08T19:26:35.960
> 
> 标签：javascript, html, angularjs

我正在尝试在我的 ng-repeat 中为我的 div 设置一个动态 id。让我举个例子。

```
<div id="$index" ng-repeat="repeat in results.myJsonResults">
    <div id="$index" ng-click="saveID($index)" ng-repeat="subRepeat in results.myJsonResults.subresults">
</div> 
```

我的问题是，当我单击我的子 div 时，我想获取我的父 ID 名称，但看起来 angular 没有将 ID 正确设置为 div。是否可以在这个概念中设置动态 ID？

PS：过去，我尝试在我的控制器上创建一个计数器方法并设置一个索引，但事实证明，angular 只识别此 ID 的最后一个值。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-08T19:33:52.943

要回答您的问题，请尝试以下操作：

```
<div id="{{$index}}" ...> 
```

虽然以上应该可以工作，但这可能不是你真正想要的（！）。请注意，AngularJS 很少通过 id 引用元素来操作元素。

您应该专注于您的模型，声明式描述 UI，让 AngularJS 完成其余的工作，而无需“手动”进行低级 DOM 操作。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-09-11T21:15:46.183

我能想到的一个用例是将`<label>`元素与其各自的`<input>`元素相关联，如[http://jsfiddle.net/YqUAp/中所示](http://jsfiddle.net/YqUAp/)

应用有[一个 pkozlowski.opensource](https://stackoverflow.com/a/15301855/2770309)的方法

```
<label for="{{ 'textField-' + $index }}">Option {{ $index }}</label>
<input type="text" id="{{ 'textField-' + $index }}" ng-model="field"/> 
```

虽然我不确定这是否是最有效的方法。（即使只是为了可读性）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-21T08:09:43.247

```
<div id="{{$index}}" ...> 
```

效果很好，但是如果 - 例如 - subRepeat 会有一个 id 字段，您也可以使用重复的字段放置一个动态 id。那将是：

```
<div id="subRepeat{{subRepeat.id}}" ...> 
```

这会将像 subRepeat1, subRepeat2, ... 这样的 id 放在重复的 div 上

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-11T03:03:59.543

你需要在你的对象中保存索引

```
results = { myJsonResults : [ 
    { name: "abc", id: 1, subResults: [
                               { subName: "123", id: 1 },
                               { subName: "456", id: 2 }] }
    { name: "xyz", id: 2, subResults: [
                               { subName: "789", id: 1 },
                               { subName: "098", id: 2 }] }
                            ] }; 
```

此外，您的重复指的是断开它们的结果，而是使用 thisResult：

```
<div id="thisResult.id" ng-repeat="thisResult in results.myJsonResults">
    {{ thisResult.name }}
    <div id="subResult.id" ng-click="saveID(subResult.id)" ng-repeat="subResult in thisResult.subResults"> {{ subResult.subName }} </div>
</div> 
```

# javascript - JQuery：结合点击/触发元素以更有效地编写代码？

> ID：15301754
> 
> 赞同：1
> 
> 时间：2013-03-08T19:27:24.787
> 
> 标签：javascript, jquery, optimization, triggers, click

我试图找出一种更有效的方法来编写我的代码，但它似乎效率低下。本质上，我在导航中有一系列 Id 元素，它们触发页面上其他位置的各种 id 的点击功能。我尝试组合我的元素，但这似乎不起作用：

```
$("#red, #green, #blue").bind("click", (function () {

$("#section-red, #section-green, #section-blue").trigger("click");

    alert("#section-red (Red heading) has been triggered!");
    alert("#section-green (Green heading) has been triggered!");
    alert("#section-blue (Blue heading) has been triggered!");

})); 
```

...但这似乎触发了一切。

我可以在下面执行此操作，但是对于很多 id，维护和更新将是一个怪物。不确定是否有更好的方法。

```
 $("#red").bind("click", (function () {
            $("#section-red").trigger("click");
            alert("#section-red (Red heading) has been triggered!");
          }));

   $("#green").bind("click", (function () {
            $("#section-green").trigger("click");
            alert("#section-green (Green heading) has been triggered!");
          }));
// etc... 
```

**[我在这里有一个小提琴](http://jsfiddle.net/highrockmedia/6aT64/)**，我一直在玩，但仍然没有乐趣。本质上，单击顶部导航会触发对 H2 标题的模拟单击，该标题有效，但这只是此时的代码效率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:38:23.927

我会向您的导航元素添加数据属性，例如：

```
<ul>
    <li id="red" data-trigger-id="#section-red">Section Red</li>
    <li id="green" data-trigger-id="#section-green">Section Green</li>
    <li id="blue" data-trigger-id="#section-blue">Section Blue</li>
</ul> 
```

然后在 jQuery 中：

```
$("#red, #green, #blue").bind("click", (function () {
    var triggerID = $(this).data("trigger-id");
    $(triggerID).trigger("click");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:43:15.580

使用事件委托，您只需要注册两个事件处理程序。

```
$("ul").delegate("li", "click", function() {
    var id = $(this).attr("id");
   $("#section-"+id).trigger("click");
});

$(document).delegate("h2", "click", function() {
   console.log($(this).attr("id"));
}); 
```

**编辑**

您可以通过缓存元素查找来提高效率

```
var h2 = [];
h2['red'] = $("#section-red");
h2['blue'] = $("#section-blue");
h2['green'] = $("#section-green"); 
```

在`ul`委托`click`处理程序内部

```
h2[id].trigger('click'); 
```

[小提琴](http://jsfiddle.net/zyVeA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:35:28.047

做这样的事情怎么样。这适用于所有浏览器（包括 IE ;-)）

```
document.onclick = function(event){
    event = event || window.event; //IE does not pass Object of event.
    var target = event.target || event.srcElement;    

    switch(target.id){
        case "header-red":
        case "red-section":
            redClicked();
            break;
        case "header-green":
        case "green-section":
            greenClicked();
            break;
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:45:07.263

首先，我将创建一个类`ul`-*在这个例子中，我称之为“sections”*：

```
<ul class="sections">
    <li id="red">Section Red</li>
    <li id="green">Section Green</li>
    <li id="blue">Section Blue</li>
</ul> 
```

接下来，将 click 绑定到`$('.sections>li')`，获取索引，并将其应用于相对 div。

```
$(".sections>li").click(function () {
   var index=$(this).index();
   $('.faqfield-question.accordion').eq(index).click();
}); 
```

这里的所有都是它的！

演示：http: [//jsfiddle.net/6aT64/43/](http://jsfiddle.net/6aT64/43/)

希望这会有所帮助，如果您有任何问题，请告诉我！

# android - 在查询 SQLite Android 上使用 REPLACE 字符操作函数时出错

> ID：15301755
> 
> 赞同：0
> 
> 时间：2013-03-08T19:27:25.093
> 
> 标签：android, sqlite

当我使用这个键时它给了我一个错误，但是当我使用 LENGTH 时，它工作正常。我希望它在 android sqlite 上是允许的，因为这是最好的方法：

我只是想删除将从数据库中选择的单词后的空格。

```
public ArrayList<String> getCorrectList() {
        // TODO Auto-generated method stub

        Cursor c = db.rawQuery("SELECT REPLACE(Level_1, ' ', '') FROM " + TABLE, null);

        ArrayList<String> resultsList = new ArrayList<String>();

        try {
            if (c != null) {
                if (c.moveToFirst()) {

                    do {
                        String levelData = c.getString(c
                                .getColumnIndex("Level_1"));

            resultsList.add("" + c.getColumnIndex("Level_1"));

                    } while (c.moveToNext());
                }
            }
        } catch (SQLiteException e) {

            Log.e("Database", "Cannot get List (" + e + ")");

        }

        Log.d("array", "List: " + resultsList);

        Collections.shuffle(resultsList);

        return resultsList;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:26:10.650

这在 SQLite3 shell 中运行良好：

```
e$ sqlite3
SQLite version 3.7.14.1 2012-10-04 19:37:12
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> create table t(a,b,c);
sqlite> select replace(a,' ', '') from t; 
```

`REPLACE`在 SQLite3 中既是函数又是命令。也许`db.rawQuery`正在解析查询并被`REPLACE`. 试试这个：

```
db.rawQuery("select rtrim(replace(Level_1, ' ', '')) FROM " + TABLE, null); 
```

# php - 单个文件 PHP 库的 LightOpenID 登录 - 无法访问图像

> ID：15301759
> 
> 赞同：1
> 
> 时间：2013-03-08T19:27:33.523
> 
> 标签：php, openid, gallery, lightopenid

我有 Single File PHP Gallery 和 OpenID 提供程序。画廊应该只对注册用户开放，所以我尝试通过 LightOpenID 添加一个登录到画廊。另外我必须设置一个cookie才能保持登录状态。

综上所述

1.  打开 index.php - 询问 OpenID - FINE
2.  输入 OpenID 并设置 cookie - FINE
3.  显示画廊：没有图像！

我看不到图像...脚本加载 CSS，但不加载图像。这是来源：

索引.php

```
<?php 
if ($_SERVER['REMOTE_ADDR'] == $_SERVER["HTTP_HOST"]) {
/* Single File PHP Gallery 4.1.1 (SFPG)
... */        
} else {
        $key = '27' .date(W). '28' .date(n). '35';
        if (isset($_COOKIE[$key])) {
            echo 'Session set ';
        }
        else {
            header ("Location: http://example.de/intern/login.php"); 
            # echo 'Session NOT set ';
            exit();
        }

/*
Single File PHP Gallery 4.1.1 (SFPG)
... 
```

登录.php

```
...
if ($openid->validate()) {
    $key = '27' .date(W). '28' .date(n). '35';
    setcookie($key, $key, time()+3600); # 1 hour
... 
```

我认为，服务器不允许 SFPG 脚本访问图像，因为该脚本没有 cookie，所以我尝试了您在 index.php 中看到的奇怪的解决方法

非常感谢您的任何帮助。

单个文件 PHP 库：[http ://sye.dk/sfpg/](http://sye.dk/sfpg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T16:10:04.730

单一文件 PHP 库：[http](http://sye.dk/sfpg/) ://sye.dk/sfpg/已更新，现在包含在库中设置密码的选项。

# gcc - 将 GCC 汇编程序代码段放在 RAM 中

> ID：15301764
> 
> 赞同：1
> 
> 时间：2013-03-08T19:27:44.773
> 
> 标签：gcc, linker, ram, gnu-assembler

我有一个为嵌入式 ARM 项目编写的汇编函数，我想用属性标记它以将其放置在 RAM 代码部分而不是闪存中。我该如何指定？

为 CI 执行此操作将使用 section 属性：

```
int f (void) __attribute__ ((section (".ram"))) {...} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:00:17.417

确切的答案取决于您的目标（裸机？ELF？），但以下可能会起作用

```
.section .ram
YOUR ASSEMBLY CODE 
```

# javascript - 让js单独激活div

> ID：15301766
> 
> 赞同：0
> 
> 时间：2013-03-08T19:27:53.890
> 
> 标签：javascript

我是 JS 新手，需要一些帮助！

我有 2 个盒子（div），每个盒子都有一个滑块。当我将鼠标悬停在其中任何一个上时，两个滑块都被激活。

我将如何做到这一点，以便每个 div 单独激活。

这是我正在做的事情的照片，可能会更清楚一点：

**pic.twitter.com/1ju3iZ0KIM - 鼠标悬停之前 pic.twitter.com/gmfhl1zl2J - 鼠标悬停**

非常感谢！

这是我的 JS

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.up-down').mouseover(function(){
            $('.default').stop().animate({
                height: 0  
            }, 200);                        
        }).mouseout(function(){
            $('.default').stop().animate({
                height: 170 
            }, 200)    
        })
    });
</script> 
```

我的 div

```
<div class="squareFeedBox">
    <div class="up-down">
        <div class="slide default"></div>
        <div class="slide onhover"></div>
    </div>
</div>
<div class="squareFeedBox">
    <div class="up-down">
        <div class="slide default"></div>
        <div class="slide onhover"></div>
    </div>
</div> 
```

我的 CSS

/*内容框*/

```
.squareFeedBox
{
    background-color: #fff;
    width: 278.5px;
    height: 207px;
    margin-right: 16px;
    margin-bottom: 16px;
    float: left;
    border-radius: 3px;
    box-shadow: 2px 2px 5px #0f2134;
    overflow: hidden;
}

/*upSlider*/

.up-down 
{
    overflow:hidden;
    height: 207px;
    width: 278.5px;
}

.slide 
{
    width:278.5px;
    height:207px;
}

.default 
{
    background-color:#fff;
    height: 170px;
    width: 278.5px;
}

.onhover 
{
    background-color:#1DB7CB;
    height: 207px;
    width: 278.5px;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:29:53.613

```
$(document).ready(function(){
    $('.up-down').mouseover(function(){
        $(this).find('.default').stop().animate({
            height: 0  
        }, 200);                        
    }).mouseout(function(){
        $(this).find('.default').stop().animate({
            height: 170 
        }, 200)    
    })
}); 
```

使用`$(this).find` 将查找`.default`包含在当前元素中的特定元素，而不是每个`.default`.

# javascript - 将动态内容添加到 div 后，从 div 中删除占位符图像

> ID：15301767
> 
> 赞同：0
> 
> 时间：2013-03-08T19:27:56.430
> 
> 标签：javascript, jquery, html, css

如果我有一个 div 充当容器，当它为空时显示图像，并且我想在内容被动态添加到容器时删除该图像，那么完成此操作的最佳 Jquery 方法是什么？照常做——

```
 if ($(".container").html().length <= 0) {
    $('.ad').show();
 } 
```

在这种情况下不起作用，因为要添加的内容是动态的并且不涉及刷新。我尝试将签入存储在每 100 毫秒运行一次的 setIntercal 函数中，但结果并没有达到预期的效果，而且它还导致页面上出现一些奇怪的闪烁。

编辑**

如果我不必支持 IE8，我将在所有情况下都使用 Josh Burgess 的方法。因此，我将退回到在触发添加内容的单击事件时添加一个 .hide() 方法。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:56:47.957

为什么要使用 jQuery？

试试这个 CSS：

```
div.myDiv:empty{
  background-image: url(path/to/myimage);
  height: 50px;
  width: 50px;
}

div.myDiv {
  background-image: none;
  height:auto;
  width: auto;
} 
```

**- 编辑 -**

[这是 jsfiddle 中的一个工作示例，它也可以反向工作](http://jsfiddle.net/4raMR/1/)

# php - PHP 对两个数组

> ID：15301770
> 
> 赞同：0
> 
> 时间：2013-03-08T19:28:07.303
> 
> 标签：php, arrays

如何获取两个数组并将它们列为以逗号分隔的密钥对。

```
Array1
    'key1a'=>'value'
    'key2a'=>'value'
    'key3a'=>'value'

Array2
    'key7b'=>'value'
    'key8b'=>'value'
    'key9b'=>'value' 
```

期望的输出：

```
key1a = key7b, key2a = key8b, key3a = key9b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:29:33.550

```
$new_Array = array_combine(array_keys($Array1), array_keys($Array2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:33:59.330

```
$array1 = array('key1a'=>'value',
'key2a'=>'value',
'key3a'=>'value');

$array2 = array('key7b'=>'value',
'key8b'=>'value',
'key9b'=>'value');

$keys = array_combine(array_keys($array1),array_keys($array2));
foreach($keys as $k => $k2) echo " $k = $k2".($k2==end($keys)?'':','); 
```

[演示视图](http://codepad.viper-7.com/gV9Df2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:41:14.970

```
foreach($arr1 as $i => $val){
    foreach($arr2 as $j => $val2){
    echo $i . " = " . $j . ", ";
    }
} 
```

这可行，但可能不是您想要的（因为您评论说您试图在没有循环的情况下这样做？）请记住，`array_combine()`它是一个 PHP5 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:30:11.057

```
$newarr = array_combine(array_keys($arr1), array_keys($arr2)); 
```

鉴于 $arr1 和 $arr2 的长度相同，应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T22:31:40.437

我在想这个：

```
implode(', ', array_map(create_function('$k1,$k2', 'return $k1 . " = :" . $k2;'), array_keys($array1), array_keys($array2))) 
```

# android - 是否可以将共享库模块保存在python的单独目录中

> ID：15301778
> 
> 赞同：0
> 
> 时间：2013-03-08T19:28:46.747
> 
> 标签：android, python, linux

我为android编译了一些python模块（其中包含一些共享库）。由于 android 使用 noexec 选项安装 sdcard，我被迫将整个 python 包（即 *.py + *.so 文件）放入 /data 分区或手机内存中的任何软件

由于手机内存非常有限，我需要一种方法来只保留 /data 分区中的共享库和 /sdcard 中的所有 *.py 文件以用于单个 python 包。

例如，对于 numpy 包，我希望我可以放

/data/local/lib/python27/ 中的“numpy.core.multiarray.so”

&

/sdcard/python/ 中的整个 numpy 包树（不包括共享库）

（sys.path 包含'/sdcard/python/' & '/data/local/lib/python27/'）

请任何人帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:55:52.533

您需要做的就是将目录添加到`PATH`, 使用`sys.path`. 所以对于你的情况，它看起来像

```
import sys.path
sys.path.append(r'/data/local/lib/python27/') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T17:03:21.927

修改包文件中的`__path__`变量`__init__`就是解决办法。有关更多详细信息，请参阅[**路径**](https://stackoverflow.com/questions/2699287/what-is-path-useful-for)[有什么用？](https://stackoverflow.com/questions/2699287/what-is-path-useful-for)

# python - Py2exe 在 Library.zip 中包含一个 DLL

> ID：15301784
> 
> 赞同：2
> 
> 时间：2013-03-08T19:29:17.997
> 
> 标签：python, ctypes, py2exe

我在 Windows 上使用 ctypes 来访问 DLL。通常，我用同名的 .py 包装 DLL 并添加对 DLL 的额外支持，例如与某些函数一起使用的 ctypes 结构。我使用以下技术加载 DLL。

```
# Determine the absolute path to the DLL that resides in the same directory as this module.
absolute_path = os.path.join(os.path.dirname(__file__), 'monty.dll')

interface = ctypes.CDLL(absolute_path) 
```

该模块是我维护的包的一部分，我想使用 Py2exe 并将 bundle_files 设置为 1 来创建更少的文件。我很高兴 library.zip 与我的 .exe 并排放置。

所以明显的问题是 monty.py 将尝试访问 monty.dll 并且它会期望该路径是 .../library.zip/root/dll/monty.dll。

我找到了一种将 DLL 打包到 library.zip 中的方法，但我怀疑 ctypes 拒绝了 .zip 文件中的路径。Windows 抱怨它无法加载该模块。

使上述工作是我的第一选择，但后备可能是将所有内容都放在 library.zip 中，除了我的包。关于如何实现这一点的任何想法？

# wordpress - 什么是 wordpress 简码？法典中的代码有什么区别？

> ID：15301789
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:29:37.890
> 
> 标签：wordpress

我是 WordPress 的新手，我想使用子主题制作自己的主题。我对短代码感到困惑？谁能向我解释什么是简码？因为我使用的是我得到法典的 php 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:07:39.953

如果我理解你的问题，那么你误解了一些非常基本的东西。

1.  PHP 是一种编程语言，用于编写 WordPress、WordPress 主题和插件。和短代码回调函数。
2.  简码不是一种编程语言。它更像是[BBCode](http://en.wikipedia.org/wiki/BBCode)或[Markdown](http://daringfireball.net/projects/markdown/)。这是一种轻松插入冗长或复杂内容的方法，无需每次都写出来。

PHP 和“短代码”不可互换。它们不是同一种东西，您使用它们的方式也不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-03T23:48:57.620

简码是一种标记语言，可用于 WordPress 页面以合并插件和其他类型的代码。简码由封装关键字和变量的括号组成，用于将其标识为页面上应该在页面显示之前放置其他代码的位置。

# c# - 使用 SQL Service Broker 将服务与数据库解耦？

> ID：15301799
> 
> 赞同：3
> 
> 时间：2013-03-08T19:30:03.893
> 
> 标签：c#, .net, sql-server, architecture, service-broker

我正在寻找一个相当直接的基于 WCF 的服务，我有一个关于如何最好地将它与数据库分离的问题。

**背景**：我将要实现的服务非常关键，地理分布，并且需要在灾难或数据库故障时尽可能可用。业务逻辑非常简单；它从外部源接收事件，维护状态表，并将处理后的更新广播到连接的客户端。我正在替换目前每秒处理 400-600 个传入事件以及大约 10-20 个并发连接的客户端的服务。该服务的多个实例将在美国多个地点运行。所有实例都承载相同的状态数据并共享事件。在一个位置有一个主 (SQL Server 2008) 数据库实例。

**挑战**：过去我已经构建了许多与此类似的应用程序，并且我已经克服了大部分架构障碍。但是我遇到了一个挑战，我不禁想象有一个更好的解决方案：在我的设计中，数据库（MSSQL）**仅**用于持久性；只有在服务的第一个实例启动和离线报告时才会读取数据库。在正常操作期间，应用程序只会将历史数据写入数据库。

为了将应用程序与数据库完全分离，过去我使用过 SQL Service Broker：在每个运行该服务的服务器上，我安装了一个 SQL Server Express 实例，该实例基本上只是充当 Service Broker 消息到核心的队列（ SSB“目标”）数据库。在正常操作条件下，应用程序对本地实例执行所有 SQL 操作，本地实例通过 SSB 将它们排队/转发到目标数据库。这工作得很好，老实说，我对它相当满意......只要 SQL Server Express 的本地实例启动，应用程序显然不会意识到目标数据库的问题，它和它之间的网络问题目标数据库等，并且在局部灾难的情况下具有很高的生存能力。它很容易监控，设置起来也不会太难看，而且它' 都支持。简而言之，它有效，如果必须的话，我很乐意接受它。

但这让我觉得有点杂乱无章。感觉应该有更好的方法来做到这一点。

显然，一种选择是仅将正在进行的数据库操作排队。我不喜欢这样，因为如果我要完全解耦，我更愿意真正解耦并使我的应用程序本身尽可能远离数据库。我还可以编写一个数据服务来对这些操作进行排队……实际上，我在思考自己之前曾短暂地沿着这条路走下去，“等等，这不是 SSB 已经在做的吗？”

由于不可更改的外部约束，更健壮/HA SQL Server 体系结构不是一个选项。我已经获得了我的一个数据库集群，仅此而已。

所以我对任何想法和/或批评持开放态度。我有什么明显的遗漏吗？这感觉就像是我只是以某种方式忽略了一些简单的东西（尽管不是因为缺乏搜索）。我在这里犯了某种更广泛的架构错误吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:48:13.347

我的观点显然是有偏见的，但为了记录，我可以指出几个相当大的项目，它们以相同的方式进行（或做过），例如[High volumn contiguos real Time ETL](http://rusanu.com/2010/06/11/high-volume-contiguos-real-time-audit/)、[March Madness on Demand](http://blogs.msdn.com/b/rdoherty/archive/2009/03/13/march-madness-on-demand.aspx)或[MySpace SQL Server Service Broker](http://www.slideshare.net/markginnebaugh/myspace-sql-server-service-broker-oct-2009)。

但后来几年发生了一些变化，主要变化是 PaaS 产品的兴起。今天，您可以拥有一个高度可用、可扩展的数据库和消息传递平台，例如。[SQL Azure](http://www.windowsazure.com/en-us/home/features/data-management/)和[Azure 队列/Azure 服务总线](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)。或者[DynamoDB](http://aws.amazon.com/dynamodb/)和[SQS](http://aws.amazon.com/sqs/)，如果您愿意跳出 SQL/ACID。可以说，将 SQL Express 实例推送到中央 SQL Server 标准版的价格点将低于 PaaS 解决方案，但在可用性、免费维护和按需扩展方面很难击败 PaaS。

因此，除了上面的 PaaS 观点之外，我认为您拥有的解决方案几乎优于 MS 堆栈所拥有的任何其他解决方案。WCF 肯定很容易编程，除非您有反 SOAP 狂热，但在可用性/可靠性方面基本上可以提供 0（零）。您的流程消失了===您的数据消失了，故事结束。MSMQ 上的 WCf 只是名义上的“WCF”，队列通道的编程模型与 http/net 绑定 WCF 编程模型相去甚远。并且 MSMQ 几乎无法与 Service Broker 抗衡（除了无处不在）。但话又说回来，你可能知道，我的观点真的有偏见......

# javascript - javascript style.display 不工作

> ID：15301807
> 
> 赞同：0
> 
> 时间：2013-03-08T19:30:17.540
> 
> 标签：javascript, css

任何人都可以告诉我为什么即使通过使用 fireBug 调试脚本正确地找到了正确的元素，style.display 并没有更新 ul 的属性，它仍然设置为 none？

```
<html>
              <div id="nav">
            <ul>
              <li><a href="" onmouseover="show()">Studio</a>
              </li>
            </ul>
              </div>
              <div id="subnav1">
            <ul style="display: none">
              <li><a href="">normally hidden</a>
              </li>
            </ul>
              </div>
        <script type="text/javascript" src="jquery-1.4.3.min.js"></script>
        <script type="text/javascript">
            function show() 
            {
            var subNav1 = document.getElementById("subnav1");
            var ull = subNav1.getElementsByTagName("ul");
            for (var i = 0, ii = ull.length; i < ii; i++) 
            {
                if(ull[i].style.display == "visible") 
                {
                  ull[i].style.display = "none";
                }
                else 
                {
                  ull[i].style.display = "visible";
                }
            }
            };
        </script>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T19:31:03.480

“可见”不是有效的 CSS 显示值。我认为您正在寻找“阻止”

# php - Symfony DOMPDF 和命名空间

> ID：15301809
> 
> 赞同：0
> 
> 时间：2013-03-08T19:30:19.993
> 
> 标签：php, symfony, namespaces, dompdf

我正在尝试将 DOMPDF 库与 Symfony 框架一起使用。我将必要的文件包含在 autoload.php 中。当我尝试在控制器的操作中使用它时，出现以下错误：

> 致命错误：在 /var/www 中找不到类“MyProject\ClientBundle\Controller\DOMPDF”.....

我使用命名空间，这是我的控制器文件中的第一行：

```
namespace MyProject\ClientBundle\Controller; 
```

DOMPDF 库不使用命名空间。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:41:05.413

如果您使用命名空间而您的库没有，这意味着 DOMPDF 在全局命名空间环境中可用。当您从某个命名空间调用某个类时，PHP 默认使用相对命名空间路径。如果你想访问全局命名空间，你应该在你调用的类命名空间的开头添加一个反斜杠，例如`use \DOMPDF`. 这意味着您正在使用命名空间的绝对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:33:39.223

只需在类名前面加一个反斜杠即可。

# extjs - 在 Ext.js store.each 中调用 this.callParent

> ID：15301810
> 
> 赞同：0
> 
> 时间：2013-03-08T19:30:24.237
> 
> 标签：extjs

我有一个扩展 Ext.draw.Component 的 Sencha 类，它接受 MyModel 的存储。我正在尝试两种不同的方法，但我得到了不同的、不令人满意的结果。

 **我在商店中读取的类的构造函数中的**第一个方法并执行以下操作：****

 **```
//Inside constructor of the class
this.store = config.store; //config is passed in from the constructor
var me = this;
me.store.each(function (model) {
    me.renderTo = model.get('elementToRenderTo');
    me.items = [{
        type: 'rect',
        x: 1.6620979,
        y: 52.362183,
        radius: 90,
        width: 448.10959,
        height: 1000,
        fill: model.get('color'),
        stroke: 'none'    
    }];

    if (me.items) {
        Ext.apply(config, { //config is passed in from the constructor
            items: me.items
        });
    }

    me.callParent([config]);
} 
```

当我将最后一段代码放在它所在的位置（store.each 内部）时，我得到一个异常：

> 未捕获的类型错误：无法调用未定义的方法“应用”

**第二种方法**
但是，如果我将 Ext.apply 和 callParent 移到 store.each 之外，我不会有任何期望，但只会绘制最后一个模型（可能是因为 me.items 在每次迭代时都会被覆盖该模型）。

```
//Inside constructor of the class
this.store = config.store; //config is passed in from the constructor
var me = this;
me.store.each(function (model) {
    me.renderTo = model.get('elementToRenderTo');
    me.items = [{
        type: 'rect',
        x: 1.6620979,
        y: 52.362183,
        radius: 90,
        width: 448.10959,
        height: 1000,
        fill: 'black',
        stroke: 'none'    
    }];
}

if (me.items) {
    Ext.apply(config, { //config is passed in from the constructor
        items: me.items
    });
}

me.callParent([config]); 
```

还有另一种方法来创建使用商店的自定义 Ext.draw.Component 吗？我错过了什么？第二种方法似乎不对，但我无法摆脱第一种的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:23:11.477

这段代码有几个可能的问题：

## 1

```
this.store = config.store; 
```

这是商店实例还是字符串配置？在构造函数中处理存储配置的正确方法如下：

```
this.store = Ext.data.StoreManager.lookup(this.store || 'ext-empty-store'); 
```

## 2

尽管您使用`me`的是范围，但您可能希望确保范围`each`确实是它之外的范围，因此：

```
me.store.each(function (model) { ... }, this); 
```

## 3

无论您在哪里执行此操作，您都不会推送所有项目：

```
Ext.apply(config, {
    items: me.items
}); 
```

因为您在这里所做的是保持`item`覆盖`me.items`.

你不应该对项目应用任何东西——它是一个由组件本身管理的数组。您应该真正向其中添加项目：

```
items.push( me.items ) 
```

## 4

您是否仅假设本地商店？因为如果要异步加载您的商店 - 除非您在加载时加载项目，否则您将一无所获。

## 5

你到底想在这里做什么？商品是否从商店加载？如果是这种情况，您不应该在构造函数中执行此操作。

您应该真正查看其中一个 Ext 源文件以了解如何完成此操作。[这是Ext.panel.Table](http://docs.sencha.com/ext-js/4-1/source/Table.html#Ext-panel-Table)的简化版本：

```
Ext.define('Ext.panel.Table', {
    extend: 'Ext.panel.Panel',

    initComponent: function() {
        var me          = this,
            store       = me.store = Ext.data.StoreManager.lookup(me.store || 'ext-empty-store');

        me.mon(store, {
            load: me.onStoreLoad,
            scope: me
        });
    },

    onStoreLoad: function() {
    }
}); 
```**

# javascript - 原型对象的数组

> ID：15301815
> 
> 赞同：2
> 
> 时间：2013-03-08T19:30:59.547
> 
> 标签：javascript, arrays, object, prototype

我有一个很好的问题。我需要了解这一点

```
Foo = function(){
};

Foo.prototype = {
buttons: new Array(),
index:'',
add: function(value)
{
    this.buttons.push(value);
},
clear:function(){
    this.buttons=new Array();
},
count:function(){
    return(this.buttons.length);
},
setIndex:function(index){
    this.index;
},
getIndex:function(index){
    return this.index;
}
};

var A= new Foo();
var B= new Foo();

A.add('toto');
B.add('tata');

A.setIndex(8);
B.setIndex(44);

alert(A.count()+"---"+A.getIndex()); 
```

该代码给了我：“2---8”！

所以 A.count() 返回我 A.count() + B.count()。与 B.count() 相同！

谁能解释一下，已经有这个问题了？怎么做 ？我只需要数组“按钮”是唯一的，适合每个对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T19:33:01.643

这不是原型继承的工作方式，`A`并且`B`具有相同的原型，这意味着它们具有相同的`buttons`数组。

在 JavaScript 中，继承是原型的，您希望每个“Foo”对象都有一个单独的按钮数组，但是您将它添加到`Foo`的原型中，以便在其所有实例之间*共享。*

你可以改变这个：

```
var Foo = function(){
}; 
```

到

```
Foo = function(){
   this.buttons = []; //add an empty buttons array to every foo element.
}; 
```

这将使它工作，另一种选择是首先调用该`clear`方法，它将实例化一个新`buttons`数组。

请注意，原型继承主要是关于共享**功能**而不是属性。您希望每个`Foo`实例都具有相同的功能，但每个实例都有自己的`buttons`数组。

**一些可以帮助您的资源：**

[这是一个关于原型链如何在 MDN 上工作的好教程](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)

[这是 Addy Osmani (Google) 关于构造函数模式的章节，](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#constructorpatternjavascript)来自他的 JavaScript 模式书

**关于您的代码的其他一些提示：**

语法`new Array()`可以缩短为`[]`. 在`setIndex`你实际上并没有将索引分配给任何东西。`index`在构造函数中也可能更好地声明`Foo`。

请注意，当您设置对象的属性时，如果原型链上存在此类属性，它会在对象上*创建*一个新属性，而不是修改原型上的该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:34:34.507

当您在原型中定义变量时，它会在所有`Foo`. 您必须在对象（函数）中定义行为，`Foo`以便为每个`Foo`.

# php - 在 CakePHP 应用程序中授权管理员和普通用户

> ID：15301819
> 
> 赞同：0
> 
> 时间：2013-03-08T19:31:20.983
> 
> 标签：php, cakephp, authentication, roles

我正在尝试编写一些简单的功能来区分我正在编写的 CakePHP 应用程序中的管理员和普通用户。我已将`users`表格更改为有一个名为`admin`or`0`的字段`1`。

在`AppController.php`我有一个`$components`这样的数组设置：

```
public $components = array(
    'Session',
    'Auth' => array(
        'authenticate' => array(
            'Blowfish' => array(
                'fields' => array('username' => 'email')
            )
        ),
        'loginRedirect' => array('controller' => 'pages', 'action' => 'home'),
        'logoutRedirect' => array('controller' => 'pages', 'action' => 'home'),
        'authorize' => array('Controller')
    )
); 
```

还有这个方法：

```
public function isAuthorized($user) {
    // Check if admin
    if(isset($this->params['admin']) && $this->Auth->user('admin') == 1) {
        echo "admin";
        return true;
    }

    // Default deny
    return false;
} 
```

当我加载页面时，我收到此错误：`(net::ERR_TOO_MANY_REDIRECTS): There were too many redirects.`. 出于某种原因，上面的代码导致无限重定向，我不知道为什么。

此外，我还设置了一个路由前缀，`admin`以便管理员可以访问诸如`/admin/users/edit`. 当我转到那个页面时，我没有得到无限的重定向，并且`admin`会`echo`像它应该的那样被淘汰。

我已经阅读了在线教程并阅读了 Cake 文档，但它们似乎都以无限重定向结束，我该如何设置它以便我可以区分管理员和普通用户，并拒绝/允许访问每个用户的某些操作角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:04:56.077

Sixthpoint 已经指出了这一点。

在没有 Auth 对象的情况下，Auth 组件正在重定向到 Pages Controller，我认为您丢失了

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow("*"); // * or array("actions", "that", "are", "allowed")
} 
```

所以，这实质上是在创建一个无限循环，First Auth 对象丢失，它被定向到 PagesController。Auth 组件已配置为授权所有控制器，包括 PagesController。并且循环重申再次重定向到 PagesController。

您是否尝试过查看[ACL](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)？您可以通过使用与 ACL 结合的角色来完成相同的任务。

# php - 在 PHP 中解析回声

> ID：15301821
> 
> 赞同：0
> 
> 时间：2013-03-08T19:31:42.953
> 
> 标签：php, javascript, echo

对我来说，我有一个非常复杂的行，我想将其解析为 php。

```
echo '<input class="cbox" onclick="if(this.checked){document.getElementById('school').style.display ='inline'}else{document.getElementById('school').style.display ='none'}" type="checkbox" name="type[]" value="School" checked/><br>'; 
```

显然，如果我使用语音标记来包围回声，它会在 onlick 事件中分崩离析。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:33:32.583

要在 php 中转义字符，请使用 \，如下所示：

```
echo '<input class="cbox" onclick="if(this.checked){document.getElementById(\'school\').style.display =\'inline\'}else{document.getElementById(\'school\').style.display =\'none\'}" type="checkbox" name="type[]" value="School" checked/><br>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:34:07.140

您需要使用 \" 转义引号

像这样：

```
echo "<input class=\"cbox\" onclick=\"if(this.checked){document.getElementById('school').style.display ='inline'}else{document.getElementById('school').style.display ='none'}\" type=\"checkbox\" name=\"type[]\" value=\"School\" checked/><br>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T19:35:02.677

前加斜线`'`。

```
echo '<input class="cbox" onclick="if(this.checked){document.getElementById(\'school\').style.display =\'inline\'}else{document.getElementById(\'school\').style.display =\'none\'}" type="checkbox" name="type[]" value="School" checked/><br>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:37:06.867

如果您使用双引号，则可以通过将 \ 字符放在它们之前来转义任何其他双引号。

在以下位置有更多详细信息：http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-08T19:35:42.080

切勿使用 echo 输出 HTML。
但始终按原样输入

```
?>
<input class="cbox" 
 onclick="if(this.checked){
    document.getElementById('school').style.display='inline'
}else{
     document.getElementById('school').style.display ='none'}" 
type="checkbox" name="type[]" value="School" checked/><br> 
```

# macos - psql：致命：角色“postgres”不存在

> ID：15301826
> 
> 赞同：578
> 
> 时间：2013-03-08T19:31:57.607
> 
> 标签：macos, postgresql, terminal

我是postgres新手。

我为 mac 安装了 postgres.app。我在玩 psql 命令时不小心删除了 postgres 数据库。我不知道里面有什么。

我目前正在编写一个教程：[http ://www.rosslaird.com/blog/building-a-project-with-mezzanine/](http://www.rosslaird.com/blog/building-a-project-with-mezzanine/)

我被困在`sudo -u postgres psql postgres`

错误信息：`psql: FATAL: role "postgres" does not exist`

$哪个psql

```
/Applications/Postgres.app/Contents/MacOS/bin/psql 
```

这是打印出来的`psql -l`

```
 List of databases
    Name    |   Owner    | Encoding | Collate | Ctype |     Access privileges     
------------+------------+----------+---------+-------+---------------------------
 user       | user       | UTF8     | en_US   | en_US | 
 template0  | user       | UTF8     | en_US   | en_US | =c/user                  +
            |            |          |         |       | user      =CTc/user      
 template1  | user       | UTF8     | en_US   | en_US | =c/user                  +
            |            |          |         |       | user      =CTc/user      
(3 rows) 
```

那么我应该采取哪些步骤？删除与 psql 相关的所有内容并重新安装所有内容？

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：563
> 
> 时间：2013-03-09T10:13:04.797

注意：如果您使用自制软件安装了 postgres，请参阅下面 @user3402754 的评论。

请注意，错误消息**不是**关于缺少数据库的，而是关于缺少角色的。在登录过程的后期，它也可能偶然发现丢失的数据库。

但第一步是检查缺失的角色：`psql`命令的输出是什么`\du`？在我的 Ubuntu 系统上，相关行如下所示：

```
 List of roles
 Role name |            Attributes             | Member of 
-----------+-----------------------------------+-----------
 postgres  | Superuser, Create role, Create DB | {} 
```

如果没有至少一个角色`superuser`，那么你有问题:-)

如果有，您可以使用它来登录。并查看命令的输出：和数据库`\l`的权限与我的 Ubuntu 系统`user`上超级用户的权限相同。因此，我认为您的设置简单用作超级用户。所以你可以试试这个命令登录：`template0``template1``postgres``user`

```
sudo -u user psql user 
```

如果`user`真的是 DB 超级用户，您可以为他创建另一个 DB 超级用户和一个私有的空数据库：

```
CREATE USER postgres SUPERUSER;
CREATE DATABASE postgres WITH OWNER postgres; 
```

但是由于您的 postgres.app 设置似乎没有这样做，所以您也不应该这样做。简单地调整教程。

* * *

## 回答 #2

> 赞同：287
> 
> 时间：2013-07-23T14:25:11.163

关键是“我为 mac 安装了 postgres.app”。[此应用程序](http://postgresapp.com/)使用角色名称与您的登录（短）名称相同的数据库超级用户设置本地 PostgreSQL 安装。

> 当 Postgres.app 首次启动时，它会创建 $USER 数据库，当没有指定时，它是 psql 的默认数据库。默认用户是 $USER，没有密码。

`pgdump`一些脚本（例如，在 Linux 系统上创建的数据库备份）和教程将假定超级用户具有传统角色名称`postgres`.

你可以让你的本地安装看起来更传统一些，并通过一次性避免这些问题：

```
/Applications/Postgres.app/Contents/Versions/9.*/bin/createuser -s postgres 
```

这将使那些**致命的：角色“postgres”不存在**消失。

* * *

## 回答 #3

> 赞同：286
> 
> 时间：2016-02-10T06:19:54.773

对于 MAC：

1.  安装自制软件
2.  `brew install postgres`
3.  `initdb /usr/local/var/postgres`
4.  `/usr/local/Cellar/postgresql/<version>/bin/createuser -s postgres`或者`/usr/local/opt/postgres/bin/createuser -s postgres`只使用最新版本。
5.  手动启动 postgres 服务器：`pg_ctl -D /usr/local/var/postgres start`

* * *

在启动时启动服务器

*   `mkdir -p ~/Library/LaunchAgents`
*   `ln -sfv /usr/local/opt/postgresql/*.plist ~/Library/LaunchAgents`
*   `launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist`

* * *

现在，它已设置，`psql -U postgres -h localhost`使用 PgAdmin 登录或使用 GUI。

默认情况下，用户`postgres`不会有任何登录密码。

查看此站点以获取更多类似的文章：[https ://medium.com/@Nithanaroy/installing-postgres-on-mac-18f017c5d3f7](https://medium.com/@Nithanaroy/installing-postgres-on-mac-18f017c5d3f7)

* * *

## 回答 #4

> 赞同：70
> 
> 时间：2017-08-10T20:10:51.773

```
createuser postgres --interactive 
```

或仅使用以下命令创建超级用户 postgresl

```
createuser postgres -s 
```

* * *

## 回答 #5

> 赞同：47
> 
> 时间：2019-03-20T21:11:10.147

当您`initdb`使用 ID 不是 的用户运行时，会发生这种情况，而没有使用or`postgres`指定`postgres`用户名。`--username=postgres``-U postgres`

然后使用您用于运行 initdb 的系统用户帐户创建数据库集群，并为其授予超级用户权限。

要修复它，只需使用Postgres 附带的实用程序创建一个`postgres`以该选项命名的新用户。该实用程序可以在 Postgres 的目录中找到。例如`--superuser``createuser``bin`

```
createuser --superuser postgres 
```

如果您有自定义主机名或端口，请务必[设置适当的选项](https://www.postgresql.org/docs/current/app-createuser.html)。

不要忘记删除由 initdb 为您创建的其他用户帐户。

* * *

## 回答 #6

> 赞同：45
> 
> 时间：2020-08-10T12:50:37.820

如果您从 brew 安装了 postgres，请在终端中运行它：

```
/usr/local/opt/postgres/bin/createuser -s postgres 
```

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2015-07-29T22:54:07.147

**首先**你需要创建一个用户：

```
sudo -u postgres createuser --superuser $USER 
```

**创建数据库**后：****

 **```
sudo -u postgres createdb $USER 
```

**更改** `$USER`为您的系统用户名。

*您可以在[此处](http://www.gotealeaf.com/blog/how-to-install-postgres-for-linux)查看完整的解决方案。*

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2018-01-02T06:54:28.480

我需要取消设置`$PGUSER`：

```
$ unset PGUSER
$ createuser -s postgres 
```

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2015-05-06T20:09:37.357

对我来说，这段代码有效：

```
/Applications/Postgres.app/Contents/Versions/9.4/bin/createuser -s postgres 
```

它来自这里： [http ://talk.growstuff.org/t/fatal-role-postgres-does-not-exist/216/4](http://talk.growstuff.org/t/fatal-role-postgres-does-not-exist/216/4)

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2021-05-03T12:27:55.977

如果您从 Brew 安装了 postgres 并且使用的是**Apple Silicon (M1) mac**，请在终端中运行：

```
/opt/homebrew/opt/postgresql/bin/createuser -s postgres 
```

如果您使用的是**Intel (x86) mac**，请在终端中运行：

```
/usr/local/opt/postgres/bin/createuser -s postgres 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2022-02-01T13:46:44.697

**如果您在 2022 年来到这里，想知道在最新的 macOS (macOS Monterey) 上使用最新的 Postgres 有什么用**

**按照这个：**

```
brew install postgresql
createuser -s postgres
brew services restart postgresql 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2015-02-13T21:41:52.393

在命令行上运行它应该修复它

`/Applications/Postgres.app/Contents/Versions/9.4/bin/createdb <Mac OSX Username Here>`

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2021-05-12T16:03:49.003

这篇[文章](https://gist.github.com/ibraheem4/ce5ccd3e4d7a65589ce84f2a3b7c23a3)帮助我解决了同样的问题`psql: FATAL: role “postgres” does not exist`。

我使用的是mac，所以我在终端输入了这个命令：

`createuser -s postgres`

它对我有用。

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2021-10-14T04:38:17.427

这对我有用

createuser -s postgres

注意：我使用的是 mac catalina

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2020-07-23T09:30:30.827

如果您使用的是 docker，请确保您没有使用`POSTGRES_USER=something_else`，因为标准映像使用此变量来了解 PostgreSQL 管理员用户的名称（默认为`postgres`）。

在我的例子中，我使用这个变量的目的是为我的特定数据库设置另一个用户，但它最终当然改变了主要的 PostgreSQL 用户。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2016-03-02T00:10:20.950

这是唯一为我修复它的：

```
createuser -s -U $USER 
```

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2021-07-28T01:02:27.627

我们有一个以 and 命名的`postgres`数据库。所以我们可以默认这样打开psql。`brew install postgresql``brew services start postgresql`

```
psql postgres 
```

然后我们可以在那个 psql 控制台中添加任何名称的用户。

```
CREATE USER postgres 
```

如果我们想要一个超级用户，那么我们可以`SUPERUSER`在最后添加。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2013-03-08T20:53:25.320

删除`postgres`数据库并不重要。这个数据库最初是空的，它的目的只是让`postgres`用户有一个“家”来连接，如果需要的话。

您仍然可以使用 SQL 命令重新创建它`CREATE DATABASE postgres;`

请注意，问题中提到的教程并未`postgres.app`考虑到编写。与一般的 PostgreSQL for Unix 相反，它`postgres.app`试图看起来像一个普通的应用程序，而不是一个由`postgres`具有与普通用户不同权限的专用用户运行的服务。`postgres.app`由您自己的帐户运行和管理。

因此，而不是这个命令：`sudo -u postgres psql -U postgres`，它会更符合 postgres.app 的精神，只是发出：`psql`，它会自动连接到与您的用户名匹配的数据库，并使用恰好是超级用户的同名数据库帐户，所以它可以在权限方面做任何事情。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2017-01-11T15:37:40.393

对于它的价值，我安装了 ubuntu 和许多软件包，但它与它发生冲突。

对我来说，正确的答案是：

```
sudo -i -u postgres-xc
psql 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2021-10-27T07:16:12.157

如果您在运行 docker 容器后立即遇到此问题，请尝试销毁容器并重新创建它。这为我解决了它：

```
docker-compose down
docker-compose up --force-recreate 
```

这应该`postgresuser`以默认用户身份重新创建数据库

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2021-11-05T08:37:59.990

通过自制软件安装了新的 mac (M1) 和最新的 postgres (14.0)，对此主题没有任何帮助，但我只是重新安装了 postgres，它有所帮助：

```
brew services stop postgresql
rm -rf /opt/homebrew/var/postgres/*
brew reinstall postgresql
initdb --locale=C -E UTF-8 /opt/homebrew/var/postgres
brew services restart postgresql 
```

所以，这是一个奇迹或类似的东西......

然后只是：

```
psql -d postgres 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2021-11-25T16:42:17.833

我今天遇到了类似的问题，实际上我不确定用户名是什么。这是两件事，如果您在企业下并且没有系统管理员访问权限，`postgres`则会将您的企业用户名创建为`postgres`管理员用户名。如果你通过`Homebrew`它安装肯定会发生。在这种情况下，只需使用 brew 运行您的 psql 服务并回显用户名

`brew services start postgresql`

然后

`echo $USER`

您将看到 postgres 用户的用户名。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-03-09T14:36:59.037

我认为这里不需要 sudo，因为 psql -l 返回数据库列表。这告诉我 initdb 在用户的当前用户下运行，而不是在 postgres 用户下运行。

你可以：

```
psql 
```

并继续教程。

我建议 AH 创建 postgres 用户和数据库的一般要点，因为许多应用程序可能期望这存在。

简要说明：

PostgreSQL 不会以对操作系统的管理权限运行。相反，它与普通用户一起运行，并且为了支持对等身份验证（询问正在尝试连接的操作系统），它创建一个用户和运行初始化过程的用户的数据库。在这种情况下，它是您的普通用户。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-11-20T05:52:45.900

在 Ubuntu 系统上，我清除了 PostgreSQL 并重新安装它。所有数据库都已恢复。这为我解决了这个问题。

建议 - 备份数据库以确保安全。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-06-26T12:33:53.643

`brew services stop postgresql`我在前一天执行后陷入了这个问题。
第二天：`brew services start postgresql`不会工作。这是因为如您使用自制软件安装时所示。postgresql 使用 launchd ... 在您的计算机开机时加载。

解决方法：
`brew services start postgresql`
重新启动计算机。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-06-28T08:32:14.127

`\du`命令返回：

> 角色名称 =`postgres@implicit_files`

该命令`postgres=# \password postgres`返回错误：

> 错误：角色“postgres”不存在。

但这`postgres=# \password postgres@implicit_files`运行良好。

同样在 `sudo -u postgres createuser -s postgres`第一个变体之后也可以工作。**

# python - 使用正则表达式替换重叠的子模式

> ID：15301832
> 
> 赞同：11
> 
> 时间：2013-03-08T19:32:45.370
> 
> 标签：python, regex

我有以下正则表达式替换：

```
input=re.sub( r"([a-zA-Z0-9])\s+([a-zA-Z0-9])" , r"\1*\2" , input ) 
```

我在字符串上使用正则表达式`"3 a 5 b"`。

我回来了`"3*a 5*b"`。

我想我应该回去了`"3*a*5*b"`。

所以不知何故，我的正则表达式替换相互干扰。

除了迭代运行正则表达式之外，我还能做些什么来获得我想要的结果？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-08T19:40:52.870

使用[前瞻断言](http://docs.python.org/2/library/re.html#regular-expression-syntax), `(?=...)`，以免吃掉第二种模式：

```
In [33]: re.sub( r"([a-zA-Z0-9])\s+(?=[a-zA-Z0-9])" , r"\1*" , '3 a 5 b')
Out[33]: '3*a*5*b'

In [32]: re.sub( r"([a-zA-Z0-9])\s+(?=[a-zA-Z0-9])" , r"\1*" , "3 /a 5! b" )
Out[32]: '3 /a*5! b' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:40:13.517

使用 Python 时，正则表达式并不总是最好的工具。对于您上面描述的情况，Python 提供了一种更简单、更易读、更易于维护的方法：

```
>>> s = "3 a 5 b"
>>> '*'.join(s.split())
'3*a*5*b' 
```

# java - 在 Java 中播放受版权保护的视频内容（例如通过 HDCP）

> ID：15301835
> 
> 赞同：1
> 
> 时间：2013-03-08T19:32:53.753
> 
> 标签：java, video, drm, copy-protection, hdcp

是否可以以在播放过程中无法捕获的方式从 Java 播放视频流（最好甚至不是单个屏幕截图）？HDCP 会允许这样的限制吗？如果是这样，HDCP 是否可以通过 Java 以某种方式访问​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-07T09:49:44.240

HDCP 不是您想要的。即使它是您正在寻找的东西，您也需要从 DCP 购买 HDCP 密钥（大量的手续和金钱），并确保它们非常安全。即使您这样做，任何人都可以在连接启用 HDCP 的显示器时播放您的视频。

# javascript - 表单提交后隐藏选择单选按钮的表格行

> ID：15301836
> 
> 赞同：0
> 
> 时间：2013-03-08T19:32:57.180
> 
> 标签：javascript, jquery, ajax, form-submit, cfml

我有表格包含在表格中。该表是从一个 CF 循环构建的，在该循环中，我为每个行 ID 分配了 sql 表中的 NumberID。我有一个执行 jquery ajax 提交的提交按钮。我需要隐藏提交的行而不是重新加载页面。

```
 <form id="unsortedTable" >
    <input type="submit"   id="makeParentButton" value="Make Parent">
    </span>
    <div class="row-fluid"><p></p>
    <table class="table table-bordered table-striped table-hover">

        <tbody>
      <cfloop query="nonAffiliated">

          <tr id="#NumberID#">
            <td><input type="radio"  name="NumberID" value="#NumberID#"></td>
          </tr>
      </cfloop>
      </tbody>
      </table>
      </div>
 </form> 
```

然后我有执行提交时触发的 JavaScript。

```
 $(document).ready(function(e) {
    $("#unsortedTable").submit(sendForm);

    });

    function sendForm() {
       var row = $(this).closest('tr');
        $.post('handlers/formHandler.cfm',
        $("#unsortedTable").serialize(),function(data,status){
        $("#unsortedTable")[0].reset();

        row.hide(); //This is just a guess
    });
    return false

 } 
```

一切正常，除了我无法将提交的行隐藏（）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:36:51.710

除非表单在您要隐藏的表格行内，`$(this).closest('tr')`否则不会找到该行。您可能认为`$(this)`确实指的是单击的按钮，但是您在表单上使用了 subit 处理程序，而不是按钮上的单击处理程序。

您可能希望以不同的方式找到该行，或者`id`先找到按钮，或者先找到按钮：

```
$('#rowId').hide(); 
```

或者

```
$('#buttonId').closest('tr').hide(); 
```

编辑：

在更仔细地重新阅读了您的问题后，我意识到您不希望隐藏提交按钮，而是隐藏单选按钮。为此，您可以执行以下操作：

```
$(this).find('input:radio:checked').closest('tr').hide(); 
```

# jquery - jQuery 历史支持，适用于 1.9+ 版本的 jQuery

> ID：15301840
> 
> 赞同：2
> 
> 时间：2013-03-08T19:33:14.980
> 
> 标签：jquery, browser-history

我需要为弹出式 AJAX 编辑器添加哈希标签到我的 URL。使它们可以被收藏，并支持历史返回按钮。

以前，我使用过这里的[jQuery History](http://balupton.github.com/jquery-history/demo/)插件。它似乎有一段时间没有更新了，我在使用 jQuery 1.9 时收到有关 $.browser 的错误。该功能已从 jQuery 中删除。

我正在寻找适用于 jQuery 1.9+ 的替代品

# javascript - 在 Chrome 扩展中使用 JQuery 将整个 DIV 替换为自定义 DIV

> ID：15301843
> 
> 赞同：0
> 
> 时间：2013-03-08T19:33:17.883
> 
> 标签：javascript, jquery, google-chrome-extension

我正在为我们使用的内部工具在 Chrome 中构建一个扩展。我们已经使用这个工具几年了，但导航菜单在 Chrome 中从来没有工作过。开发人员拒绝修复它。所以我试图用我的扩展做的一部分是用功能菜单替换菜单。

目前，菜单包含在 DIV 中。我想用带有工作菜单的新 DIV 替换整个 DIV。起初我认为使用 JQuery 的 replaceWith() 函数很容易，但 replaceWith() 似乎只适用于单段代码。我能够轻松地用一个元素替换整个菜单。然后我遇到了 .load() 但我无法成功获取扩展文件夹中的 .html 文件以实际加载。

我缩短了这个菜单，但它是当前 DIV 的一个示例：

```
<div id="ctl00_MasterMenu" class="MenuStyle ctl00_MasterMenu_5" style="height:20px;">
<span class="MenuItemStyle ctl00_MasterMenu_4">
<a class="ctl00_MasterMenu_1 MenuItemStyle ctl00_MasterMenu_3" href="default.aspx" style="border-style:none;font-size:1em;">Home</a>
</span> 
<span class="MenuItemStyle ctl00_MasterMenu_4">
<a class="ctl00_MasterMenu_1 MenuItemStyle ctl00_MasterMenu_3" href="javascript:__doPostBack('ctl00$MasterMenu','o6')" style="border-style:none;font-size:1em;">New Ticket Expand New Ticket</a>
</span> 
</div> 
```

我基本上想用类似的东西替换它：

```
<ul>
<li>Home</li>
<li>New Item</li>
<li>New Item2</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:05:45.923

只需循环遍历 中的子元素`<div>`并将它们替换为`<li>`，然后最后将父元素替换为`<ul>`：

```
$(document).ready(function() {
    var $menu = $("#ctl00_MasterMenu");

    $menu.children("span").each(function(index) {
        $(this).replaceWith("<li>"+$(this).html()+"</li>");
    });

    $menu.replaceWith("<ul>"+$menu.html()+"</ul>");
}); 
```

在这里看小提琴 - [http://jsfiddle.net/teddyrised/fuE37/](http://jsfiddle.net/teddyrised/fuE37/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:06:09.113

这样的事情可能会奏效：

```
// store the parent div's info
var $parent = $('#ctl00_MasterMenu');
var parentID = $('#ctl00_MasterMenu').attr('id');
var parentClass = $('#ctl00_MasterMenu').attr('class');
var parentStyle = $('#ctl00_MasterMenu').attr('style');

// create li elements for each of the spans
$parent.children().each(function(index, child){
    $(child).replaceWith('<li class="'+$(child).attr('class')+'">'+$(child).html()+'</li>');
});

// create the ul element and copy the attributes
$parent.children().wrapAll('<ul id="'+parentID+'" class="'+parentClass+'" style="'+parentStyle+'"/>');

// remove the old div
$parent.replaceWith($parent.html()); 
```

演示：http: [//jsfiddle.net/louisbros/aMm5t/1/](http://jsfiddle.net/louisbros/aMm5t/1/)

# java - JBoss 应用程序中的菱形依赖关系

> ID：15301845
> 
> 赞同：0
> 
> 时间：2013-03-08T19:33:29.720
> 
> 标签：java, jakarta-ee, jboss, maven-2

我有两个互操作的 JBoss 应用程序，它们有一个共同的依赖关系：应用程序 A 创建一个包含在公共依赖项中的类的对象，然后将该对象传递给应用程序 B。当我尝试在应用程序 B 中使用某个对象的方法时，运行时抛出异常：`java.lang.NoClassDefFoundError`如果依赖项仅打包在 A 的部署单元中，或者`java.lang.LinkageError`如果我将依赖项打包在两个部署单元中。

使用 Maven2 作为构建系统，我该如何解决这个问题？我假设我必须从一个 jar 中使两个应用程序加载依赖项的类，怎么做？

# c++ - 带有 reserve() 的向量 push_back() 运行缓慢

> ID：15301850
> 
> 赞同：0
> 
> 时间：2013-03-08T19:33:40.010
> 
> 标签：c++

使用 Visual c++2010 express 和 WinXP 运行以下代码时，“for 循环”始终按如下方式执行：

> 31ms读取25000行，62ms读取25000行，46ms读取25000行，62ms读取25000行，46ms读取25000行，46ms读取25000行

但是，当我在 Windows 7 Home Edition 上使用 Visual c++2010 express 进行编译时，for 循环执行如下：

> 62ms读取25000行，530ms读取25000行，514ms读取25000行，514ms读取25000行，514ms读取25000行，530ms读取25000行

我试图弄清楚为什么“for loop”第一次在 Windows 7 上运行 t 毫秒，但随后跳到 10 xt 毫秒以进行后续运行。而在 XP 上，它始终运行 t 毫秒。它可能是 Windows 7 构建/设置所特有的东西，也可能是代码中的基本内容。

我最近开始编写 C++ 编程，非常感谢帮助我了解 Windows 7 环境中发生的情况。

```
#include <iostream>
#include <string>
#include <vector>
#include "Elapsed.h"

using namespace std;

void readfile(){
    Elapsed time1;
    vector<string> lines;
    lines.reserve(50000);
    string s = "this is a string this is a longer string ";
    for(int i = 0; i<25000; i++) lines.push_back(s);
    cout<<"Read "<<lines.size()<<" lines in "<<time1().total_milliseconds()<<"ms\n";
}

int main(){
    readfile();
    readfile();
    readfile();
    readfile();
    readfile();
    readfile();
    system("PAUSE");
}

#include <boost/date_time.hpp> 
// Purpose: track elapsed time from constructor or reset
class Elapsed {
    boost::posix_time::ptime m_when;
public:
    static boost::posix_time::ptime now(){return boost::posix_time::microsec_clock::universal_time();}
    Elapsed(): m_when( now() )
    {
    } // end constructor

    void reset() { m_when = now(); }

    boost::posix_time::time_duration operator()() const {
        return now() - m_when;
    } //end operator()
};// end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:00:54.933

你应该这样计算你的时间：

```
boost::posix_time::time_duration span = time1();
cout << "Read " << lines.size() << " lines in "<< 
     span.total_milliseconds() << "ms\n"; 
```

注意`operator<<`不包含序列点，所以你可能会在定时器中包含一些输出到的`cout`，而 IO 时序可能是相当不可预测的。

# authentication - 用于用户和管理员的 ServiceStack 自定义身份验证类

> ID：15301860
> 
> 赞同：1
> 
> 时间：2013-03-08T19:34:03.090
> 
> 标签：authentication, servicestack

我只是在寻找有关如何实施此功能的反馈：

我的系统中有两种类型的用户需要身份验证，用户和管理员。现在他们将执行的任务和我存储的关于他们的数据保证他们每个人都有一个单独的数据库表来存储他们的信息/身份验证信息。

我已经实现了一个工作`CredentialsAuthProvider`调用`UserCredentialsProvider`来验证用户在`/auth/credentials`. 逻辑检查`User`数据库中的表并进行身份验证。现在要对管理员进行身份验证，我应该实现第二个`CredentialsAuthProvider`调用`AdminCredentialsAuthProvider`并在单独的路由上注册每个，例如`/user/auth/credentials`和`/admin/auth/credentials`/或在同一路由中实现管理`TryAuthenticate`逻辑`UserCredentialsProvider`。

如果以上任何一个都是解决方案，我将如何在调用时注册单独的路由或区分管理员/用户`TryAuthenticate`。

任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:47:19.343

我会坚持**只使用一个端点和一个提供者进行身份验证**。这将大大简化身份验证。

在后台，您的身份验证提供者需要检查用户和管理员表。一旦你有了它，我会将用户表和管理表中的所有数据转换为一个组合用户资源。管理员应表示为具有**“管理员”角色**的用户。这样，您仍然可以利用 ServiceStack 中的内置角色。

换句话说，我会在某种数据访问层下扫除复杂性，以便您的端点保持整洁。

# jquery - 使用 jquery.fileupload.rails，函数 .fileupload() 有时无法返回

> ID：15301863
> 
> 赞同：2
> 
> 时间：2013-03-08T19:34:08.410
> 
> 标签：jquery, ruby, file-upload, blueimp

问：为什么 .fileupload() 无法返回？（简而言之这个问题）

细节：

我使用 blueimp 的 JQuery 的 fileupload 成功拖放文件，然后由 CarrierWave 处理。大多数情况下它会正确初始化。

我有一个嵌套选项卡界面（引导程序），它根据您选择的选项卡接受不同的文件上传到不同的目标。这也有效。大多数时候，一切都正确初始化，我很高兴。

**但相当频繁的 .fileupload() 函数在客户端或服务器上没有任何显示的错误消息时不会返回（崩溃）。我试图找出原因。**

（注意：这里的“历史”一词是指我的数据，而不是浏览器历史。）

显示的数据由 ajax 调用加载。和包含在部分`form_for`中`<script>`：records/_fileupload.html.erb（如下所示）该ajax调用*未*加载部分。

```
<div class="container span9">
  <%= form_for Record.new, :remote => true, :html => { :multipart => true, :id => "fileupload-history"  } do |f| %>
    ....
    <div class="row fileupload-buttonbar" id="fileupload-droptarget-history">
    ....
      <div class="progress progress-success progress-striped active fade">
        <div class="bar" style="width:0%;"></div>
      </div>
  ....

<!-- The loading indicator is shown during image processing -->
<div class="fileupload-loading"></div>

<!-- The table listing the files available for upload/download -->
<table class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>

....
<!-- standard "template-upload" template from example code -->
<script id="template-upload-fileupload-history" type="text/x-tmpl">
....

<!-- Empty template to display files available for download (unused) -->
<script id="template-download-history" type="text/x-tmpl"></script> 
```

继续在同一个文件中，注意`$(function ()...`用于在页面完成加载后运行脚本。

```
<script type="text/javascript" charset="utf-8">
   $(function () { 
```

此警报将触发...

```
 alert("fileupload history fileupload.html.erb - A");

   // Initialize the jQuery File Upload widget:
   $('#fileupload-history').fileupload({
     uploadTemplateId: "template-upload-fileupload-history",
     downloadTemplateId: "template-download-history",
     dropZone: $("#fileupload-droptarget-history")
   }); 
```

但是以下警报偶尔不会触发，表明 .fileupload() 从未返回（崩溃）。

```
 alert("fileupload history fileupload.html.erb - B"); 
```

为了完成我的示例，这里有一些对碰巧正在查看此代码的人有用的部分。第一个是在上传完成后刷新我显示的数据。

```
 $('#fileupload-history').bind('fileuploaddone', function (e, data) {
     fillHistoryAjaxHolder($("#currentAJAXHistoryUrl").html());
   }); 
```

...并且这个将拖放限制为仅指定的放置目标。

```
 // Disable drag-n-drop for the rest of the page
   $(document).bind('drop dragover', function (e) {
     e.preventDefault();
   });
 });
</script> 
```

所以我的问题：

什么会导致 .fileupload 有时不返回？（取决于我如何访问我的页面......或之前加载的内容）

所以我想知道在此之前是否应该进行某种初始化？

现在，使事情复杂化：

我以前有多个模板实例，甚至`id="fileupload"`其中的模板被复制到许多文件中。但是，我意识到我遇到了不同的目标问题，所以我改变了我`id="fileupload"`的`id="fileupload-history"`情况，在这种情况下，`id="fileupload-report"`在另一种情况下，依此类推。这个想法是将文件上传的每个实例拆分为自己不同的部分。

但是，当我删除旧的（重复的）代码时，`.fileupload()`故障开始更频繁地发生。（现在它非常可靠地失败了）

所以（最后！）我对有经验的 JQuery 文件上传用户的问题：

*   对于多个上传目标，我应该使用不同的`form_for` `id='tag'`标签吗？

我问是因为以下示例对 .fileupload() 的不同调用使用相同的元素

来自 github 的示例：[“Multiple-File-Upload-Widgets-on-the-same-page”](https://github.com/blueimp/jQuery-File-Upload/wiki/Multiple-File-Upload-Widgets-on-the-same-page)：

```
$('.fileupload').each(function () {
    $(this).fileupload({
        dropZone: $(this)
    });
}); 
```

*   那么，使用不同的`$('.fileupload')`元素有问题吗？
*   有没有我应该寻找我可能没有检查的错误消息的地方？
    *   目前，我在 Google Chrome 的开发者工具的常用位置没有看到任何内容。
*   有什么想法吗？

长文，见谅。

# jquery - 使用 jqPlot 在隐藏元素上构建图表

> ID：15301864
> 
> 赞同：1
> 
> 时间：2013-03-08T19:34:15.600
> 
> 标签：jquery, jquery-ui, canvas, jqplot

我有一个使用 jQuery UI 选项卡的页面。当页面加载时，我启动了一个 setTimeout，它每 100 毫秒发出一个 ajax 请求，以获取每个选项卡内容的 HTML。此 HTML 的一部分是`<div>`用于 jqPlot 图表和生成它的脚本。

我遇到的问题是 jqPlot 脚本似乎不喜欢选项卡 2 .. n 上的元素在尝试构建图表时被隐藏。第一个选项卡上的图表看起来很好，但所有其他选项卡上的图表永远不会被构建。

我可以通过等待调用每个选项卡`$.jqplot`的`show`事件来解决问题，但是在显示选项卡之前图表不会构建，因此用户在 JS 构建图表时会遇到一点延迟。

是否有一种方法可以在隐藏选项卡时获取JQPLOT来构建这些图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:46:35.830

一些想法：

1.  在选项卡区域上放置一个哑光 div 以将其隐藏（绝对位置，z-index 9999）
2.  渲染所有图表
3.  图表完全渲染后，然后运行 ​​jquery-ui 选项卡（隐藏除一个渲染图表之外的所有图表）
4.  去除磨砂，露出标签

* * *

1.  生成高度和宽度为零的 div 并隐藏溢出
2.  在该 div 中为每个选项卡放置一个非常大的 div
3.  在那些隐藏的 div 中渲染图表
4.  同时生成您的 jquery ui 选项卡
5.  将渲染的图表移动到选项卡中

* * *

1.  在每个选项卡中放置一个 iframe，并在单独的 html 页面上呈现图表
2.  这样每个 iframe 都会执行，无论是否可见，并且 jquery-ui 选项卡可以切换为完全异步渲染的图表

* * *

1.  使用转换将您的 html 移出舞​​台左侧
2.  先渲染图表
3.  图表完全渲染后，然后运行 ​​jquery-ui 选项卡（隐藏除一个渲染图表之外的所有图表）
4.  通过删除变换将元素移回

* * *

1.  使用 node.js 在服务器端生成 jqplot 输出
2.  在您的页面中包含输出
3.  运行 jquery 选项卡

# xbee - ZigBee Mesh VS DigiMesh

> ID：15301865
> 
> 赞同：5
> 
> 时间：2013-03-08T19:34:25.047
> 
> 标签：xbee, zigbee, mesh-network

ZigBee Mesh（系列 2）或 DigiMesh（系列 1）哪个更好？

我已经阅读了*[Wireless Mesh Networking, ZigBee vs. DigiMesh](http://www.digi.com/pdf/wp_zigbeevsdigimesh.pdf)*（PDF 格式），但我注意到使用 DigiMesh 有很多优点，相反，我希望阅读系列 2 比系列 1 更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:47:50.663

ZigBee 是多个供应商支持的标准协议。DigiMesh 专用于 XBee 模块，可用于各种无线电（2.4GHz、900MHz、868MHz）。

在 ZigBee 中，您有一个网络协调器、始终开启的路由器设备以及可以休眠以节省电力的终端设备。

在 DigiMesh 中，所有设备都是可以休眠以节省电量的路由器。

您链接到的白皮书是对两者之间差异以及各自优势的最佳总结。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:31:36.553

对于需要大量 ZigBee 设备的网状网络，建议使用 ZigBee 网状网络。它需要较低的功率，并且可以与非 Digi 以外的任何 ZigBee 设备通信。Digi 网状网络实际上是 XBee 系列 1 的扩展，具有网状网络功能，不能与任何其他 Digi 设备通信（据我所知）。XBee Series 1 的主要目的是进行点对点通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:11:15.333

与 DigiMesh（系列 1）相比，ZigBee Mesh（系列 2）更好。您可以在[ZigBee 联盟主页上](http://www.zigbee.org)找到更多信息。

# asp.net-mvc - 在 MVC 视图文件中生成 Javascript，但编辑器将其视为 HTML 文件类型

> ID：15301866
> 
> 赞同：0
> 
> 时间：2013-03-08T19:34:26.040
> 
> 标签：asp.net-mvc, visual-studio-2010, razor

我想在 VS 2010 的 ASP.NET MVC 4 项目中提供动态生成的 Javascript 或 JSON 文件。我通过`PartialView("somescript.js")`在 action 方法中返回来做到这一点。然后我创建`\Views\MyController\somescript.js.cshtml`包含 Javascript 的文件。我也小心设置`Response.ContentType`适当的。

这似乎在浏览器中工作正常。但是，VS 2010`somescript.js.cshtml`自然地将编辑视为 HTML 文件。`.js`这不会阻止我编辑代码，但是如果我正在编辑文件，我不会得到语法高亮和基本的智能感知。

有没有办法告诉 VS 或 Razor 在每个文件的基础上编辑为 Javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:57:06.210

如果您在打开方式对话框中没有脚本编辑器选项，`cshtml`请在注册表中添加扩展名，您将能够使用脚本编辑器打开 cshtml 文件

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0_Config\Editors\{A52A054C-5228-4819-B568-E5B8040801B5}\Extensions 
```

![在此处输入图像描述](../Images/18ff45990a9c30ba049383e417ad3d33.png)

![在此处输入图像描述](../Images/cb7b053f73c186c108b84af1f5a2925f.png)

# python - Python httplib2 访问被拒绝

> ID：15301868
> 
> 赞同：0
> 
> 时间：2013-03-08T19:34:34.637
> 
> 标签：python, caching, oauth-2.0, httplib2

我在执行简单代码时遇到问题。

```
import httplib2
h = httplib2.Http(".cache")
resp, content = h.request("http://example.org/", "GET") 
```

输出是

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
  File "C:\Python27\lib\site-packages\httplib2\__init__.py", line 1175, in __init__
    self.cache = FileCache(cache)
  File "C:\Python27\lib\site-packages\httplib2\__init__.py", line 700, in __init__
    os.makedirs(self.cache)
  File "C:\Python27\lib\os.py", line 157, in makedirs
    mkdir(name, mode)
WindowsError: [Error 5] Access is denied: '.cache' 
```

任何人有任何建议来解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T18:05:36.197

要使其正常工作，您可以省略缓存目录：

```
import httplib2
h = httplib2.Http()
resp, content = h.request("http://example.org/", "GET") 
```

正如上面的评论所说，您无权创建`.cache`相对于您运行代码的路径的目录。

当然，有缓存更好...

对于一个不会导致您权限问题的简单内存缓存，请查看我写的这篇文章：http: [//grahamlyons.com/article/a-simple-in-memory-cache-for-python-s-httplib2](http://grahamlyons.com/article/a-simple-in-memory-cache-for-python-s-httplib2)

# ios - 收到电子邮件/短信时推送通知

> ID：15301871
> 
> 赞同：0
> 
> 时间：2013-03-08T19:34:44.340
> 
> 标签：ios, apple-push-notifications

我试图找出解决相对复杂目标的最简单方法。

我正在为我的志愿消防站编写一个 iOS 应用程序。当每个紧急呼叫发出时，所有成员都会收到一条带有预定结构的 SMS（或电子邮件），提供呼叫详细信息。我想解析这条消息并生成一个站到呼叫的路线。

我可以毫无问题地生成地图。问题在于将消息发送到应用程序。我知道 iOS 无法读取传入的文本或电子邮件。下一个选项是设置一个服务器来接收消息并向所有成员推送通知。但是，我知道推送通知有问题，可能不会像我们要求的那么快。那么，还有其他方法吗？我可以让应用程序接收自己的电子邮件，与邮件应用程序分开吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:44:49.343

个别应用程序无权访问邮件和短信。做你想做的事情的唯一方法是发送推送通知。您可以发送包含呼叫位置的纬度和经度的自定义数据，这将允许您的应用程序绘制路线。

我玩过推送通知，大多数时候它们都很快，电子邮件使用相同的系统。在某些连接情况下，推送消息会比 SMS 更快，而在其他情况下，SMS 会比推送更快。此外，Apple 不保证推送通知的交付，因此紧急服务依赖它们并不是一个好主意。

事实上，根据苹果应用提交指南（你必须有一个苹果开发者账户才能完整阅读）`Apps that use location-based APIs for dispatch, fleet management, or emergency services will be rejected.`

所以要注意这一点。

# angularjs - 在指令的嵌套 ngModel 中控制 $viewValue 的设置

> ID：15301876
> 
> 赞同：2
> 
> 时间：2013-03-08T19:35:10.047
> 
> 标签：angularjs, angularjs-directive

我有一个相当简单的 UI 控件，我将它建模为指令，它是一个电话号码编辑器，有两个输入字段：一个用于国家代码，另一个用于号码。

该指令的用法如下所示：

```
<phone-editor ng-model='phoneNo'></phone-editor> 
```

在指令的声明中，我需要 ngModel，模板如下所示：

```
<input type="text" ng-model="countryCode" />
<input type="text" ng-model="number" /> 
```

很清楚如何将原始模型组合和分解为两个字段。

我无法弄清楚的是 - 我如何为第二个字段使用格式化程序，以便它显示`(555) 555-5555`而不是纯数字，而不定义另一个指令来访问第二个输入字段的 ngModel 控制器？

我可以以某种方式访问​​子 ngModel 控制器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:03:55.423

我[在 Angular 代码库上进行了一些搜索](https://github.com/search?q=repo%3aangular/angular.js/src%20ngModel&type=Code&ref=searchresults)，发现了一些应该可以工作的东西：

```
app.directive('phoneEditor', function() {
  return {
    restrict: 'E',
    replace: true,
    template: '<div>'
      + '<input type="text" ng-model="countryCode">'
      + '<input type="text" ng-model="number">'
      + '</div>',
    link: function(scope, element) {
      scope.number = 555;
      var input1 = element.find('input').eq(0);
      var input2 = element.find('input').eq(1);
      input1Ctrl = input1.controller('ngModel');
      input2Ctrl = input2.controller('ngModel');
      console.log(input1Ctrl, input2Ctrl);
    }
  };
}); 
```

[笨蛋](http://plnkr.co/edit/rewh8pk7ZSjicdf0odBD?p=preview)。

# javascript - 将 JQuery 应用于插入的克隆节点

> ID：15301877
> 
> 赞同：0
> 
> 时间：2013-03-08T19:35:10.013
> 
> 标签：javascript, jquery, html, dom

我正在尝试将[JQueryUI 的 DatePicker](http://jqueryui.com/datepicker/)应用到一个节点，它适用于所有预先创建的节点，但是当我使用克隆插入新节点时，我似乎无法应用它。

下面是我创建新节点的函数。

```
function addActivity()
{
    var what=["spacer","mWith","mType","mDate","mWhere"];
    var newActivity;
    for(i=what.length;i>0;i--)
    {

        newActivity = document.getElementById(what[i-1]).cloneNode(true);
        insertAfter(document.getElementById("mWhere"),newActivity); 
    }

} 
```

编辑：和我的 insertAfter 函数

```
function insertAfter(referenceNode, newNode) 
{
    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
} 
```

我正在尝试克隆的有问题的 HTML

```
 <tr  id="mDate">
                <td>Activity Time: </td><td><input  class="dateTimeField" id="actTime" type="text" name="meetingDate[]" /></td>
            </tr> 
```

我试图再次运行我的 JQuery

```
 $(function() {
$( ".dateField" ).datepicker();
$( ".dateTimeField" ).datetimepicker();
}); 
```

但似乎不影响新节点

甚至尝试过

```
onfocus="$(this).datetimepicker();" 
```

没有运气，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:08:42.443

弄清楚了。显然，您需要在应用日期选择器之前从节点中删除 ID 和 Class。

我添加了以下内容

```
 if(what[i-1]=="mDate")
        {
            $(newActivity).find('input').removeAttr('id');                  
            $(newActivity).find('input').removeAttr('class');                   
            $(newActivity).find('input').datetimepicker();
        } 
```

后

```
 newActivity = document.getElementById(what[i-1]).cloneNode(true); 
```

# jquery - 获取一个跨度 html 并用 jquery 在另一个中显示它

> ID：15301878
> 
> 赞同：0
> 
> 时间：2013-03-08T19:35:10.810
> 
> 标签：jquery, innerhtml

也许这很简单，但是经过一个小时的反复试验和搜索，我找不到任何东西。基本上我有一张桌子，每张桌子上`<td>`都有一个`<span>`日期*，*每个里面都有一个数字，你猜对了，对于一个月的日子。基本上，当单击 a 时，我想获取该数字并将其显示在另一个数字中，其中的*日期*来自我所知道的 jquery 即时操作正确。但是在本地主机上我得到了结果：`id`*`<td>``<span>``class`*

 **```
[object Object] 
```

这显然不是一个数字。我尝试在[jsfiddle](http://jsfiddle.net/THUtq/3/)中重新创建它，但这并没有给我任何 onclick。

html:

```
<table>
    <tr>
        <td>
            <span id = "day">3</span>
        </td>

        <td>
            <span id = "day">8</span>
        </td>
    </tr>
</table>

<span class = "thedate">
    test
</span> 
```

jQuery：

```
 $('td').click(function(){
        var date = $('this').text('#day');
        $('.thedate').html(''+date+'');
    }); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:39:16.967

1）你忘了在你的小提琴上加载 jQuery，

2）您正在该行设置文本，因此返回值是原始 jQuery 对象。

3)`$('this')`将选择任何名为 的 HTML 元素`this`，如`<this />`您所愿`$(this)`

尝试：

```
$('td').click(function(){
    var date = $(this).find('span').text();
    $('.thedate').html(''+date+'');
}); 
```

工作 jsFiddle：http: [//jsfiddle.net/THUtq/5/](http://jsfiddle.net/THUtq/5/)**

# java - 在java中的gson中解析数组

> ID：15301882
> 
> 赞同：0
> 
> 时间：2013-03-08T19:35:19.873
> 
> 标签：java, parsing, gson

我从 php 脚本中获取以下数据..

```
 {"errorno":"fe_200","message":"successful","univ":[{"univ_id":"1","univ_name":"abc","slug":"uptu","thumb":"http:\/\/www.fs.com\/notes\/img\/uptu.gif","table_prefix":"uptu"},{"univ_id":"2","univ_name":"def","slug":"gtu","thumb":"http:\/\/www.fs.com\/notes\/img\/gtu.gif","table_prefix":"gtu"},
    {"univ_id":"3","univ_name":"jvc university","slug":"jntu","thumb":"http:\/\/www.fs.com\/notes\/img\/jntu.gif","table_prefix":"jntu"}

    }]} 
```

我想用 GSON 解析这个。

我写了以下课程：

```
class WebsiteResults {

  public WebsiteResults() {}

  private String errorno;
  private String message;
  private List<univ> results;
  // other attributes

  public String getErrorNo() {
    return errorno;
  }
  public String getMessage() {
        return message;
      }
  public List<univ> getResults() { return results; }
  public void setErrorNo(String errorno) {
        this.errorno = errorno;
      }
  public void setMessage(String message) {
    this.message = message;
  }

  public void setResults(List<univ> results) { this.results = results; }
  public String toString() { return "Results[" + results + "]";}

  static class univ {
        private String univ_id;
        private String univ_name;
        public String getUnivID() { return univ_id; }
        public String getUnivName() { return univ_name; }
        public void setUnivID(String univ_id) { this.univ_id = univ_id; }
        public void setUnivName(String univ_name) { this.univ_name = univ_name; }
        public String toString() { return "Result[id:" + univ_id +",title:" + univ_name + "]"; }
    }

} 
```

我想获取 univ_id 和 univ_name 的数组。

但我得到的结果 = null。有人可以帮助解释我做错了什么。

```
WebsiteResults results = new Gson().fromJson(reader, WebsiteResults.class);
String errno = results.getErrorNo();
String result = results.toString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:15:31.350

类中的字段名称`WebsiteResults`必须与 JSON 匹配或具有`@SerializedName`注释以告诉 Gson 它是什么：

改变：

```
private List<univ> results; 
```

到：

```
private List<univ> univ; 
```

或者：

```
@SerializedName("univ")
private List<univ> results; 
```

您为班级使用小写名称的事实也使您`univ`感到困惑；不要那样做。类名应以大写开头。

# ruby-on-rails - Ruby / Rails 性别代词

> ID：15301883
> 
> 赞同：0
> 
> 时间：2013-03-08T19:35:27.067
> 
> 标签：ruby-on-rails

你们是怎么处理这些的？比较两个人时，但使用他们的性别特定代词？“鲍勃喜欢史黛西。他一直很想念她，还有她的长发。她不喜欢鲍勃，他那令人毛骨悚然的眼神……”

所以，Bob 是数据库中的一个实体，Stacy 也是。`bob = User.find_by_name('Bob')`和`stacy = User.find_by_name('Stacy')`。 `bob.gender`返回男性，`stacy.gender`返回女性。

上面的引用也来自数据库中的一个实体。 `Match.find(23).body`. 我想在数据库中放一些通用的东西，让它可以填充，但它似乎不起作用。 `@p1.first_name likes @p2.first_name. @p1.She has always longed for @p2.her, and @p2.her_p long hair. @p2.She doesn't like @p2.first_name, and @p2.her_p creepy stares...`在这里，我有以女性代词为名称并返回实际名称的方法。

在控制器中，`@dislike = Match.find(23).body`，`@p1 = bob`，`@p2 = stacy`对吗？

在看来，`<%= @dislike %>`

这是行不通的。我还查看了 gsub，并进行了相应的剥离。我可以让它工作。我只是好奇其他人是如何处理这种情况的，或者我是否把它复杂化了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:43:02.987

如果您使用的是数据库，只需将一列添加到性别的名称表中，如果您要使用布尔字段，那么您可以这样做。

```
name_a = some_db_query_for_name
if name_a.gender = true:
    a = "she"
else:
    a = "he" 
```

然后在你的模板中只是参考

```
@name_a likes @name_b, @a is ... 
```

对不起，它不是 ruby​​/rails 代码，但我看到了这个问题，这似乎是解决它的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:46:27.373

```
def rend(p1, p2)
  body = self.body
  body = body.gsub(/p1.first_name/, p1.first_name)
  body = body.gsub(/p2.first_name/, p2.first_name)
  if p1.gender == 'male'
    body = body.gsub(/p1.she/, 'he')
    body = body.gsub(/p1.her_p/, 'his')
    body = body.gsub(/p1.her/, 'him')
    body = body.gsub(/p1.herself/, 'himself')
    body = body.gsub(/p1.hers/, 'his')
    body = body.gsub(/p1.She/, 'He')
    body = body.gsub(/p1.Her_p/, 'His')
    body = body.gsub(/p1.Her/, 'Him')
    body = body.gsub(/p1.Herself/, 'Himself')
    body = body.gsub(/p1.Hers/, 'His') 
  end
  if p1.gender == 'female'
    body = body.gsub(/p1.she/, 'she')
    body = body.gsub(/p1.her_p/, 'her')
    body = body.gsub(/p1.her/, 'her')
    body = body.gsub(/p1.herself/, 'herself')
    body = body.gsub(/p1.hers/, 'hers')
    body = body.gsub(/p1.She/, 'She')
    body = body.gsub(/p1.Her_p/, 'Her')
    body = body.gsub(/p1.Her/, 'Her')
    body = body.gsub(/p1.Herself/, 'Herself')
    body = body.gsub(/p1.Hers/, 'Hers')
  end
  if p2.gender == 'male'
    body = body.gsub(/p2.she/, 'he')
    body = body.gsub(/p2.her_p/, 'his')
    body = body.gsub(/p2.her/, 'him')
    body = body.gsub(/p2.herself/, 'himself')
    body = body.gsub(/p2.hers/, 'his')
    body = body.gsub(/p2.She/, 'He')
    body = body.gsub(/p2.Her_p/, 'His')
    body = body.gsub(/p2.Her/, 'Him')
    body = body.gsub(/p2.Herself/, 'Himself')
    body = body.gsub(/p2.Hers/, 'His')
  end
  if p2.gender == 'female'
    body = body.gsub(/p2.she/, 'she')
    body = body.gsub(/p2.her_p/, 'her')
    body = body.gsub(/p2.her/, 'her')
    body = body.gsub(/p2.herself/, 'herself')
    body = body.gsub(/p2.hers/, 'hers')
    body = body.gsub(/p2.She/, 'She')
    body = body.gsub(/p2.Her_p/, 'Her')
    body = body.gsub(/p2.Her/, 'Her')
    body = body.gsub(/p2.Herself/, 'Herself')
    body = body.gsub(/p2.Hers/, 'Hers')
  end

  body
end 
```

# algorithm - 计算 n 的值 选择 k

> ID：15301885
> 
> 赞同：40
> 
> 时间：2013-03-08T19:35:34.870
> 
> 标签：algorithm, language-agnostic, combinations

评估 n 选择 k 值的最有效方法是什么？我认为的蛮力方法是找到 n factorial / k factorial / (nk) factorial 。

更好的策略可能是根据这个[递归公式](http://i.stack.imgur.com/Kq3OH.png)使用 dp 。还有其他更好的方法来评估 n 选择 k 吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-08T20:10:08.527

这是我的版本，它纯粹以整数工作（除以 k 总是产生整数商）并且在 O(k) 时速度很快：

```
function choose(n, k)
    if k == 0 return 1
    return (n * choose(n - 1, k - 1)) / k 
```

我递归地写了它，因为它是如此简单和漂亮，但如果你愿意，你可以将它转换为迭代解决方案。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-08T20:06:44.713

您可以为此使用乘法公式：

![在此处输入图像描述](../Images/d1b417571328279afb985c0327898906.png)

[http://en.wikipedia.org/wiki/Binomial_coefficient#Multiplicative_formula](http://en.wikipedia.org/wiki/Binomial_coefficient#Multiplicative_formula)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-08T20:02:36.933

计算二项式系数`(n choose k)`而不溢出的最简单方法可能是使用帕斯卡三角形。不需要分数或乘法。`(n choose k)`. 帕斯卡三角形的`nth`行和`kth`条目给出了值。

[看看这个页面](http://en.wikipedia.org/wiki/Binomial_coefficient#Pascal.27s_triangle)。这是一个`O(n^2)`只有加法的操作，你可以用动态规划来解决。对于任何可以放入 64 位整数的数字来说，这将是闪电般的速度。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-08T20:08:10.067

如果你要计算很多这样的组合，计算帕斯卡三角形肯定是最好的选择。正如您已经知道递归公式一样，我想我可以在这里传递一些代码：

```
MAX_N = 100
MAX_K = 100

C = [[1] + [0]*MAX_K for i in range(MAX_N+1)]

for i in range(1, MAX_N+1):
    for j in range(1, MAX_K+1):
        C[i][j] = C[i-1][j-1] + C[i-1][j];

print C[10][2]
print C[10][8]
print C[10][3] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T19:54:59.797

该`n!/k!(n-k)!`方法的问题与其说是成本问题，不如说是`!`快速增长的问题，因此，即使其值`nCk`在 64 位整数范围内，中间计算也不是。如果您不喜欢 kainaw 的递归加法方法，您可以尝试乘法方法：

`nCk == product(i=1..k) (n-(k-i))/i`

where表示取值`product(i=1..k)`时所有项的乘积。`i``1,2,...,k`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-08T20:20:23.520

最快的方法可能是使用公式，而不是帕斯卡三角形。当我们知道以后要除以相同的数字时，让我们开始不做乘法。如果 k < n/2，让我们有 k = n - k。我们知道 C(n,k) = C(n,nk) 现在：

```
n! / (k! x (n-k)!) = (product of numbers between (k+1) and n) / (n-k)! 
```

至少使用这种技术，您永远不会除以以前用来相乘的数字。你有 (nk) 乘法和 (nk) 除法。

我正在考虑一种避免所有除法的方法，通过在我们必须相乘的数字和我们必须除的数字之间找到 GCD。我稍后会尝试编辑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-08T19:53:09.440

如果您有一个阶乘查找表，那么 C(n,k) 的计算将非常快。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-03-08T19:45:52.260

“最有效”是一个糟糕的要求。你想提高什么效率？堆栈？记忆？速度？总的来说，我认为递归方法是最有效的，因为它只使用加法（一种廉价的操作），并且对于大多数情况，递归不会太糟糕。功能是：

```
nchoosek(n, k)
{
    if(k==0) return 1;
    if(n==0) return 0;
    return nchoosek(n-1, k-1)+nchoosek(n-1,k);
} 
```

# matlab - 如何在 Matlab 中对这段代码进行矢量化？

> ID：15301886
> 
> 赞同：2
> 
> 时间：2013-03-08T19:35:35.547
> 
> 标签：matlab, vectorization

如何在不使用 for 循环的情况下实现这个 Matlab 代码？

```
b=10:10:50
a=50*rand(1,50);

for ii=2:numel(b)
    ind{ii}=find(a<b(ii) & a>b(ii-1));
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T22:37:11.593

看起来你正在做一个直方图并跟踪哪个元素最终在哪个 bin 中。这意味着您可以通过以下几行“几乎”获得您想要的东西：

```
a = 50 * rand(1, 50);
b = 10:10:50;
[h c] = histc(a, b); 
```

现在 c 包含 a 中每个元素的“bin”的索引。例如，如果

```
a = [15 22 9 7 25]; 
```

然后

```
c = [1 2 0 0 2]; 
```

不确定将这些收集到一个单元格数组中的价值 - 在我看来，无论您想对 in 中的值做什么，`ind`都可以使用`c`.

我怀疑使用“向量”操作（这意味着具有相同长度的事物）创建一个单元数组（可能具有不同的长度）可能很困难......有兴趣看到有人提出一个反例！

编辑：我发现了我自己的反例......下面的行`ind`就像你的代码一样产生一个单元格数组（`arrayfun`命令确实有一个隐含的`for`循环，但被认为是“矢量化的”）。

```
ind = arrayfun(@(x)find(x==c),1:numel(b)-1, 'uniformoutput', false); 
```

请注意，完成此操作后，单元格数组`ind`的值从单元格`ind{1}`开始，而您的原始代码从单元格索引`ind{2}`。如果这是一个问题，我相信你可以解决它......

另请注意，您的代码在`0`and之间生成随机数`50`，但您的“有效箱”仅在`10`and之间`50`（因为您编写算法的方式）。因此，收集的索引总和将略小于 50（平均为 40）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:41:45.940

下面的脚本将做同样的事情。该矩阵`newInd`将包含分配给`ind`循环并由循环打印出的相同值。

```
b=10:10:50;
a=sort(randi(50,1,10));

% create shifted version of vector b to account
% for comparison between i and i-1
newB1 = b(1:end-1);
newB2 = b(2:end);

% create tiled version of a and b
newB1 = repmat(newB1',1,numel(a));
newB2 = repmat(newB2',1,numel(a));
newA = repmat(a,numel(b)-1,1);

%find linear indices that meet required conditions
LinearInd = find(newA<newB2 & newA>newB1);
%convert linear indices to subscripts
[i,newInd] = ind2sub(size(newA),LinearInd);
% display indices that correspond to ind
newInd 
```

# sql - 通过 sql 脚本创建数据库，然后使用该数据库

> ID：15301889
> 
> 赞同：0
> 
> 时间：2013-03-08T19:35:45.063
> 
> 标签：sql, sql-server-2012, sql-scripts

我有一个脚本，它使用现有数据库创建表并输入值。现在我希望通过这个相同的脚本创建数据库，然后创建只是另一个数据库副本的表和值。

我有：

```
CREATE DATABASE MyDatabase

USE [MyDatabase]
....Code that creates the tables and values from another database. 
```

该`USE [MyDatabase]`命令无法识别，因为 MyDatabase 在任何地方都不存在。有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:38:08.873

是的，在脚本之间插入[GO](http://msdn.microsoft.com/en-us/library/ms188037.aspx)命令。

```
CREATE DATABASE MyDatabase
GO
USE [MyDatabase] 
```

# c# - 如何将 48bpp 图像的原始数据加载到位图中？

> ID：15301890
> 
> 赞同：7
> 
> 时间：2013-03-08T19:35:45.397
> 
> 标签：c#, .net, image

[我在这里](https://stackoverflow.com/q/15254990/1039947)问了一个与 24bpp 图像有关的类似问题，但我正在使用那里描述的技术并且有第二个问题，这次与 48bpp 相关......

我有一个`byte[]`包含 16 位颜色深度的图像。所以红色有两个字节，绿色有两个字节，蓝色有两个字节，依次从图像的左上角到右下角。我正在将它加载到`Bitmap`这样的状态（考虑到步幅等）：

```
byte[] data = ReadRawData();

// Swap from rgb to bgr
for (int i = 5; i < data.Length; i+=6)
{
   var r1 = data[i - 5];
   var r2 = data[i - 4];

   var b1 = data[i - 1];
   var b2 = data[i];

   data[i - 5] = b1;
   data[i - 4] = b2;

   data[i - 1] = r1;
   data[i] = r2;
}

// Load into a bitmap (I know the width and height, and the format
using (var b = new Bitmap(157, 196, PixelFormat.Format48bppRgb))
{
  var bmpData = b.LockBits(new Rectangle(0, 0, b.Width, b.Height),
    ImageLockMode.ReadWrite, b.PixelFormat);

  // Here we loop through each line and make sure it is padded to
  // the stride length
  var bytesPerLine = b.Width * 6;
  for (int i = 0; i < b.Height; i++)
  {
    IntPtr offset = bmpData.Scan0 + i * bmpData.Stride;
    Marshal.Copy(data, i * bytesPerLine, offset, bytesPerLine);
    int padding = bmpData.Stride - bytesPerLine;

    if (padding > 0)
    {
      var pad = new byte[padding];
      Marshal.Copy(pad, 0, offset + bytesPerLine, padding);
    }
  }
  b.UnlockBits(bmpData);
  // Done so save
  b.Save("c:\\out.tiff", ImageFormat.Tiff);
} 
```

它会产生这个图像：

![错误的图像](../Images/7c13bdd681d8107b02f2ced6288574ae.png)

但是，图像不正确，它应该如下所示：

![正确的图像](../Images/2dfb4611b1e96003e4399593eed0313e.png)

所以，我的问题是，好吧，我做错了什么？

* * *

**更新**

如果我在出现字节序问题的情况下切换了 r1,r2 和 b1,b2 （以及绿色的），但是它会像这样绘制图像：

![字节序开关](../Images/980e3d6d5b4153a09779075309acc701.png)

（所以仍然不对 - 但这是否给我们提供了关于可能发生的事情的线索？）

我在 github 上放了一个文件，[这](https://github.com/kmp1/misc/blob/master/data16.bin)是原始数据，因此您可以将其保存到磁盘中，然后这个小方法将打开它：

```
private static byte[] ReadRawData()
{
    byte[] data;
    using (var ms = new MemoryStream())
    {
        using (var f = File.OpenRead("c:\\data16.bin"))
        {
            byte[] buffer = new byte[2048];
            int read;
            while ((read = f.Read(buffer, 0, buffer.Length)) > 0)
            {
                   ms.Write(buffer, 0, read);
            }
        }
        data = ms.ToArray();
    }
    return data;
} 
```

如果我需要改用 WPF 库，那对我来说很好。

* * *

**更新 2**

所以，正如评论中所建议的，我想出了一些代码来生成一个我可以推理的字节数组。

因此，我所做的是输出一个长度为 196 * 200 * 6 的字节数组，这样我将有一个 196 像素宽 x 200 高的图像，每个像素有 6 个字节（大小很方便，因为它足够大看到这并不意味着我必须为 Stride 事情烦恼）。然后我决定将图片分成 4 个垂直条纹，每个条纹的字节数是：

*   0x00, 0x00,0x00, 0x00, 0xFF, 0xFF
*   0x00, 0x00, 0x00, 0x00, 0x00, 0xFF
*   0x00, 0x00, 0x00, 0x00, 0xFF, 0x00
*   0x00, 0x00, 0x00, 0x00, 0x00, 0x00

这应该意味着我可以看到颜色之间的差异吧？好吧，我实际上得到的是这个，所以我做错了什么？：

![第二次尝试后](../Images/afc051d8d86815da4c475e6f6b702877.png)

这是我生成上图的代码：

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;
using System.Runtime.InteropServices;

namespace ImagePlayingApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            const int width = 196;
            const int height = 200;
            const int columnWidth = width / 4;
            const int bytesPerPixel = 6;

            var data = new byte[width * height * bytesPerPixel];
            for (int y = 0; y < height; y++)
            {
                for (int x = 0; x < width * bytesPerPixel; x += bytesPerPixel)
                {
                    int i = y * width * bytesPerPixel + x;

                    // Blue and Green components
                    // always 0x00 since we are just
                    // interested in red
                    data[i] = 0x00;
                    data[i + 1] = 0x00;
                    data[i + 2] = 0x00;
                    data[i + 3] = 0x00;

                    if (x < columnWidth * bytesPerPixel)
                    { 
                        // Left most column, full red
                        data[i + 4] = 0xFF;
                        data[i + 5] = 0xFF;
                    }
                    else if (x < columnWidth * bytesPerPixel * 2)
                    {
                        // Next left, half red
                        data[i + 4] = 0x00;
                        data[i + 5] = 0xFF;
                    }
                    else if (x < columnWidth * bytesPerPixel * 3)
                    {
                        // Next left, other half red
                        data[i + 4] = 0xFF;
                        data[i + 5] = 0x00;
                    }
                    else
                    {
                        // Final column, no red
                        data[i + 4] = 0x00;
                        data[i + 5] = 0x00;
                    }
                }
            }

            using (var b = new Bitmap(width, 
                                      height, 
                                      PixelFormat.Format48bppRgb))
            {
                var bmpData = b.LockBits(
                    new Rectangle(0, 0, b.Width, b.Height), 
                    ImageLockMode.ReadWrite, 
                    b.PixelFormat);
                Marshal.Copy(data, 0, bmpData.Scan0, data.Length);
                b.UnlockBits(bmpData);

                b.Save(@"c:\users\public\stripes2.tiff", ImageFormat.Tiff);
            }
        }
    }
} 
```

那么，有谁知道我如何将此处描述的字节数组转换为正确的位图？正如我所说，如果 WPF 中有任何帮助，那很好，或者我可能需要将其转换为，我不知道 64bppargb 格式或什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:12:30.333

所以我已经想出了如何做到这一点，但它并不完美......

如果我添加对 的引用`System.Xaml`，`PresentationCore`并`WindowsBase`使用 WPF 图像类作为中间步骤，我可以得到一个[Bitmap](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)，就像这样（使用问题和方法中链接的[data.bin](https://github.com/kmp1/misc/blob/master/data16.bin)文件`ReadRawData`）：

```
// Declare what we know
const int width = 157;
const int height = 196;
const double dpi = 50;
var format = PixelFormats.Rgb48;
int stride = (width * format.BitsPerPixel + 7) / 8;

// Get the data (see the question for this method)
var data = ReadRawData();

// Now put the data into a WiteableBitmap
var wb = new WriteableBitmap(width, height, dpi, dpi, format, null);
wb.WritePixels(new Int32Rect(0, 0, width, height), data, stride, 0);

// Encode as a TIFF
var enc = new TiffBitmapEncoder { Compression = TiffCompressOption.None };
enc.Frames.Add(BitmapFrame.Create(wb));

// And convert to a bitmap
using (var ms = new MemoryStream())
{
    enc.Save(ms);

    using (var bmp = new Bitmap(ms))
    {
        // Blergh, I feel dirty!
        bmp.Save("c:\\works.tiff", ImageFormat.Tiff);
    }
} 
```

瞧！

![作品.tiff](../Images/d19078ccecdb0be68ab218e9b22ae18c.png)

我认为我将在我的项目中做的是`Windows.Drawing`完全放弃这个问题，以及跨步带来的整个[痛苦](https://stackoverflow.com/q/15254990/1039947)以及 RGB 实际上是 BGR 的事实（基本上我已经厌倦了它）。

# build-process - 知道内存的并行 make

> ID：15301891
> 
> 赞同：0
> 
> 时间：2013-03-08T19:35:45.697
> 
> 标签：build-process, gnu-make

我使用“make -j”（连同 makefile）来生成缩略图并计算大量电影文件的各种统计信息。根据电影的不同，我计算的一些统计数据需要占用我机器的大部分内存。有没有办法告诉 make 不要同时运行两个这样的作业？还是在内存不足时杀死工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:00:52.640

Make 不知道它调用的其他进程正在使用多少内存。你可以做到这一点的唯一方法是自己将它编码到你的makefile中，通过确保（通过先决条件）make永远不会同时运行其中两个作业。如果这些作业没有自然排序，您可以使用仅订单先决条件来确保排序而不强制“更改后重建”语义。

# php - 带有 PHP 文本放置的 HTML 表单

> ID：15301894
> 
> 赞同：0
> 
> 时间：2013-03-08T19:36:00.970
> 
> 标签：php, forms

我正在开发一个使用 PHP 创建类似博客的网页的项目。我想在表单上方的屏幕上打印文本，但这似乎是不可能的，因为变量在`$_GET`输入数据之前试图从表单中获取数据。是否可以将文本放在表单上方？

到目前为止，这是我的代码：（PHP通过将“basic.php”（文件名）放入标签的`action`属性来更新屏幕）`<form>`

```
<!-- this file is called basic.php-->
<!DOCTYPE html>
<html>
<head>
<title>My Blog</title>
<style type = "text/css">
h2
{
color:#FF2312;
text-align:center;
font-family:Impact;
font-size:39px;
}
p
{
font-family:Verdana;
text-align:center;
color:#000000;
font-size:25px;
}
</style>
</head>
<body>
<?php 
    $subject=$_GET["msg"];//variable defined but attempts to get unentered data
?>

<i>  <?php print $subject;//prints var but gets error message because $subject can't get form data ?></i>
<!--want to print text above form-->
<form name = "post" action = "basic.php" method = "get">
<input type = "text" name = "msg">
<input type = "submit">
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:44:25.520

似乎您只想在消息存在时才显示消息，对吗？

```
<?php if ( ! empty($_GET['msg'])) : ?>
<i><?= $_GET['msg']; ?></i>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:39:35.033

使用会话变量：

```
...
</head>
<body>
<?php
    session_start(); //if is not started already
    if(isset($_GET["msg"]))
        $_SESSION['subject']=$_GET["msg"];
?>

<i>  <?php if(isset($_SESSION['subject']))
            print $_SESSION['subject']; ?></i>
<!--want to print text above form-->
<form name = "post" action = "basic.php" method = "get">
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:45:02.820

通常我用以下形式的隐藏变量来解决这个问题：

```
<form name = "post" action = "basic.php" method = "get">
<input type = "text" name = "msg">
<input type = "hidden" name="processForm" value="1">
<input type = "submit">
</form> 
```

然后在处理表单之前检查该变量：

```
<?php 
    if($_GET["processForm"]){
        $subject = $_GET["msg"];//variable defined but attempts to get unentered data
    }else{
        $subject = "Form not submitted...";
    }
?> 
```

这通常是防止表单在提交之前被处理的好方法——这就是自提交表单的危险。

# c# - System.Linq.IQueryable 错误

> ID：15301905
> 
> 赞同：1
> 
> 时间：2013-03-08T19:36:54.770
> 
> 标签：c#, asp.net-mvc, linq, iqueryable

我正在开发一个 ASP.NET MVC（旧版本）应用程序，我需要创建一个表单来根据两个参数查找预订：Date 和 RoomID。数据库中有基础表：通过 RoomID 链接的 ReservationRequests 和 Rooms。

我在存储库中写了这个查询：

```
public IQueryable<ReservationRequest> FindReservationRequestInfo(DateTime date, int roomID)
    {
        return from requests in FindAllReservationRequests()
                where requests.Date == date

                    & requests.RoomID == roomID

                select requests;
    } 
```

模型看起来像：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.Mvc;
namespace RoomReservations.Models
{
    public class FindReservationRequestInfo
{
    public IQueryable<string> ReservationRequestsInfo { get; set; }
    public DateTime Date { get; set; }

    public SelectList Rooms { get; set; }

    public FindReservationRequestInfo(IQueryable<string> reservationRequestsInfo, DateTime date, SelectList rooms)
    {
        ReservationRequestsInfo = reservationRequestsInfo;
        Date = date;
        Rooms = rooms;
    }
} 
```

}

Controller中的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Mvc.Ajax;
using RoomReservations.Models;
using RoomReservations.Helpers;
using Telerik.Web.Mvc;

namespace RoomReservations.Controllers
{
    public class ReportsController : Controller
{
    IRepository Repository;

    public ReportsController()
        : this(new Repository())
    {
    }

    public ReportsController(IRepository repository)
    {
        Repository = repository;
    }

    //
    // GET: /Reports/FindReservationRequestInfo
    [Authorize(Roles = "Administrator")]
    public ActionResult FindReservationRequestInfo()
    {
        IEnumerable<Room> rooms = Repository.FindAllRooms();
        rooms = rooms.Concat(new List<Room>() { new Room() }.AsEnumerable()).OrderBy(o => o.ID);

        return View(new FindReservationRequestInfo(
            new List<string>().AsQueryable(), DateTime.Today,
            new SelectList(rooms, "ID", "Name")));
    }

    //
    // POST: /Reports/FindReservationRequestInfo
    [AcceptVerbs(HttpVerbs.Post), Authorize(Roles = "Administrator"), ValidateAntiForgeryToken]
    public ActionResult FindReservationRequestInfo(FormCollection collection)
    {
        IQueryable<string> reservationRequestsInfo;
        DateTime date = DateTime.Today;

        Room room = Repository.GetRoom(Convert.ToInt32(collection["ID"]));

        if (collection["Date.Date"] == String.Empty)
            ModelState.AddModelError("Date.Date", "Date is required");

        if (ModelState.Sum(s => s.Value.Errors.Count()) == 0)
        {
            date = DateTime.Parse(collection["Date.Date"]);

            if (room == null)
            {
                room = new Room();
                reservationRequestsInfo = Repository.FindReservationRequestInfo(date, room.ID);
            }

        }
        else
        {
            reservationRequestsInfo = new List<string>().AsQueryable();
        }

        IEnumerable<Room> rooms = Repository.FindAllRooms();
        rooms = rooms.Concat(new List<Room>() { new Room() }.AsEnumerable()).OrderBy(o => o.ID);

        return View(new FindReservationRequestInfo(
            reservationRequestsInfo, date,
            new SelectList(rooms, "ID", "Name", room.ID)));
    }
 } 
```

} //

我不确定控制器中的代码有什么问题。如果有人能帮助我理解我做错了什么，我将不胜感激。非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:41:50.387

您的查询正在返回

```
IQueryable<ReservationRequest> 
```

但是在您的控制器中，您将其设置为等于您声明为的变量

```
IQueryable<string> 
```

所以这一点

```
 [AcceptVerbs(HttpVerbs.Post), Authorize(Roles = "Administrator"), ValidateAntiForgeryToken]
    public ActionResult FindReservationRequestInfo(FormCollection collection)
    {
        IQueryable<string> reservationRequestsInfo;
        //... 
```

应该

```
 [AcceptVerbs(HttpVerbs.Post), Authorize(Roles = "Administrator"), ValidateAntiForgeryToken]
    public ActionResult FindReservationRequestInfo(FormCollection collection)
    {
        IQueryable<ReservationRequest> reservationRequestsInfo;
        //... 
```

然后针对变化的级联效应进行适当的重构。

# php - 如何比较同一数组中的对象？

> ID：15301908
> 
> 赞同：1
> 
> 时间：2013-03-08T19:37:06.897
> 
> 标签：php, arrays

第一个数组有一些以 p2p_id 作为值的元素。

```
array (size=5)
  0 => 70 
  1 => 99
  ... 
```

通过查询上面的 p2p_ids，我得到了第二个数组，每个元素都是一个带有详细信息的对象。我想比较这些元素，找到具有相同 p2p_to 值和相同 p2p_type 的元素。我想学习如何。

```
array (size=5)
  0 => 
    object(stdClass)[234]
      public 'p2p_id' => string '70' 
      public 'p2p_from' => string '1124'
      public 'p2p_to' => string '1459' 
      public 'p2p_type' => string 'd_to_x'
  1 => 
    object(stdClass)[237]
      public 'p2p_id' => string '99' 
      public 'p2p_from' => string '1327' 
      public 'p2p_to' => string '1459' 
      public 'p2p_type' => string 'd_to_x'
  2=>
  3=>
  4=>
  5=>
  ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:26:42.767

```
<?php
class Post
{
    public $p2p_id, $p2p_from, $p2p_to, $p2p_type;

    /**
     * @param posts  Array   Post objects to compare with this post object
     */
    public function findMatchingPosts($posts){
        $results = array();
        foreach($posts as $post){
            if($post->p2p_to == $this->p2p_to && $post->p2p_type == $this->p2p_type){
                $results[] = $post;         
            }
        }
        return $results;
    }
} 
```

# css - 在 2 个并排的 div 下创建 2 个重叠的 div

> ID：15301909
> 
> 赞同：0
> 
> 时间：2013-03-08T19:37:08.163
> 
> 标签：css, html, overlapping, side-by-side

我似乎找不到如何创建这个简单的对齐：

有 2 个并排 div 的行，第一个占用它需要的空间，后者占用剩余空间（这个很简单，使用 inline-block 或 float）

正确的 div 应该包含两个覆盖的子 div，每个子 div 占右父级的 100%（我不能这样做）。

我的动机是一个带有标签（在左侧）的进度条和进度条上方的百分比标签。进度标签文本应该居中（这就是为什么我需要它以 100% 的正确父级）

如果有人有任何想法，我很想听听他们的意见。

这是我的问题的说明：

```
<div id="all">
    <div id="left">
        left
    </div>
    <div id="right">
        right
    </div>
</div>

#all {
    width: 200px;
    height: 100px;
    background: grey;
    border: 1px solid;
}

#left {
    background: red;
    float: left;
    height: 100%
}

#right {
    background: blue;
    display: block;
    height: 100%;
} 
```

这是它的 jsFiddle 说明：http: [//jsfiddle.net/a9cnH/3/](http://jsfiddle.net/a9cnH/3/)

我的问题：我想在“正确”的 div 中放置 2 个 div。每个都应占正确 div 的 100%。如果我在它们上使用绝对值，那么我必须将我的“右”div 位置设置为“静态”以外的位置，但这使得它不会与左 div 并排对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:53:17.100

If you want to stack divs on top of on another, you need to use the z-index and align divs absolutely. Example:

```
 <div style="border: 1px sold red; width: 300px; height:200px; background-color:White;position:relative;">
        <div style="width:50%; height:100%; background-color:Red; z-index:2;  float:left; "></div>
        <div style="width:50%; height:100%; background-color:blue;z-index:2; float:right; "></div>
        <div style="width:50%; height:50%; background-color:green;z-index:3; top:25%; left:25%; position:absolute; "></div>   
   </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:21:17.653

我终于明白了。

我需要左右 div 来隐藏溢出。比我可以把正确的 div 位置相对。

```
<div id="all">
    <div id="left">
        left
    </div>
    <div id="right">
        <div id="right1">
            r1
        </div>
        <div id="right2">
            r2
        </div>
    </div>
</div>

#all {
    width: 200px;
    height: 100px;
    background: grey;
    border: 1px solid;
}

#left {
    background: red;
    height: 100%;
    float: left;
    overflow: hidden;
}

#right {
    background: blue;
    height: 100%;
    overflow: hidden;
    position: relative;
}

#right1 {
    width: 100%;
    background: green;
    position: absolute;
}

#right2 {
    width: 100%;
    position: absolute;
    text-align: center;
} 
```

这里看起来如何：http: [//jsfiddle.net/nSD66/](http://jsfiddle.net/nSD66/)

# c - libc中的函数地址？

> ID：15301910
> 
> 赞同：8
> 
> 时间：2013-03-08T19:37:11.290
> 
> 标签：c, linux, libc

我正在尝试获取`exit()`libc 中提供的函数的地址（十六进制），但我不确定在哪里以及如何找到它。
任何人都知道找到它的方法，请分享一些想法。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T19:45:32.597

如果您需要`exit`进程中已经存在的函数地址，请参阅 Grijesh 和其他人的回答。但是，如果您需要*通过 name*`exit`解析 libc函数，例如因为 libc已被另一个库隐藏，您可以通过以下方式获取它：*`exit``dlsym`*

 *```
#define _GNU_SOURCE     /* for RTLD_NEXT */
#include <dlfcn.h>
/* ... */
void (*exit_addr)(int) = dlsym(RTLD_NEXT, "exit"); 
```

要`dlsym`解决，您需要链接`-ldl`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T19:39:08.433

我认为这会起作用：

```
printf("%p", (void*)exit); 
```

> [IEEE Std 1003.1, 2004 版](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)：
> 
> `"%p"`参数应是指向 的指针`void`。指针的值以实现定义的方式转换为可打印字符序列。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-08T19:44:18.667

任何函数的地址就是它的名字（没有括号）。你`#include <stdlib.h>`也需要。设置一个初始化的指针：

```
void (*p)(int) = exit; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-14T17:57:33.237

您可以按如下方式使用 gdb：

```
gdb ./yourprogram
break main
run
print exit
$1 = {<text variable, no debug info>} 0xb7e4b7f0 <exit>
here is exit() address----------------^ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T19:42:53.350

```
printf("%p", exit); 
```

您必须包含用于 printf 的 stdio.h 和用于退出的 stdlib.h。这将创建一个函数指针以退出并打印它。*

# c# - 正在访问 DataTable 上的 DataRowCollection.Count O(1) 或 O(n)

> ID：15301913
> 
> 赞同：1
> 
> 时间：2013-03-08T19:37:40.903
> 
> 标签：c#, .net, collections, datatable

更多，有没有关于那些东西的性能特性的参考？我看到 MSDN 说明了它的作用，但很少说明它是如何完成的/速度保证是什么。

我提到的精确结构是[datarowcollection](http://msdn.microsoft.com/en-us/library/system.data.datarowcollection.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:49:57.513

该`Count`属性是O(1)，因为计数是存储在类中的，不是通过实际计数记录来发现的。

您是对的，文档不包含有关该类性能的太多信息，`List<T>`例如，您会找到该类的更多性能信息。您通常会查看属性或方法正在做什么，以确定性能特征。

在这种情况下，一个提示是这`Count`是一个属性，这通常意味着它是一个 O(1) 操作。作为比较，`IEnumerable<T>.Count`它是一种方法而不是属性，因为它循环遍历项目以计算它们。

# php - 删除 foreach 中每个字符串的第一个字符

> ID：15301915
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:37:56.350
> 
> 标签：php

如何删除循环`characters_to_eliminate`中每个字符串的第一个字符？`foreach`编辑：`characters_to_eliminate`是 3 个随机字符，它们并不总是相同的。在第 6 行，我尝试：

```
$val = substr($val, 3); 
```

但仅删除数组中第一个值的前 3 个字符。

```
function multiexplode ($delimiters,$string) {
    $ary = explode($delimiters[0],$string);
    array_shift($delimiters);
    if($delimiters != NULL) {
        foreach($ary as $key => $val) {
            $ary[$key] = multiexplode($delimiters, $val);
        }
    }
    return  $ary;
}

// Example of use
$string = "characters_to_eliminate abc, characters_to_eliminate def: characters_to_eliminate ghi, characters_to_eliminate jkl";
$delimiters = Array(",",":");

$res = multiexplode($delimiters,$string);
echo '<pre>';
print_r($res);
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:39:26.607

尝试`foreach($ary as $key => &$val)`

> 为了能够直接修改循环内的数组元素，`$value`以`&`. 在这种情况下，该值将通过引用分配。（通过[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:40:43.720

[str_replace()](http://php.net/manual/en/function.str-replace.php)

```
$string = str_replace('characters_to_eliminate ', '', $string); // abc, def: ghi, jkl 
```

# ember.js - 如何在 Ember.js 中将默认存储设置为 FixtureAdapter？

> ID：15301918
> 
> 赞同：4
> 
> 时间：2013-03-08T19:37:58.357
> 
> 标签：ember.js, ember-data

我正在尝试使用 Ember 1.0.0-rc1 引导一个小型应用程序。该应用程序将使用图像做一些事情。我还没有任何类型的应用程序后端，所以我试图在我嵌入网页源的一些 JSON 上使用 FixtureAdapter。

不幸的是，我似乎无法正确连接商店。我不断收到关于需要设置 YourAppName.Store 的错误。

> 未捕获的错误：断言失败：您的应用程序没有定义“存储”属性。尝试在模型类上调用“全部”将失败。请提供与 'YourAppName.Store = DS.Store.extend()' 相同的一个

但除非我完全错过了什么，否则我确实设置了它：

```
window.YIH = Ember.Application.create();

YIH.Photo = DS.Model.extend({
  url: DS.attr('string'),
});
YIH.Photo.FIXTURES = JSON.parse(document.getElementById('images').innerHTML);
YIH.Store = DS.Store.extend({
  revision: 12,
  adapter: DS.FixtureAdapter
});

YIH.photoController = Em.ArrayController.create({
  content: YIH.Photo.all(), // blows up
}) 
```

我试图让这项工作设置其他属性，但无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T20:32:15.273

**更新**：小提琴现在使用 Ember RC2 和 Ember-Data rev 12

您不需要`create`控制器，只需附加控制器类和`extend`来自`Ember.ArrayController`集合或`Ember.ObjectController`单个对象。

```
YIH.PhotosController = Em.ArrayController.extend();
YIH.PhotosPhotoController = Em.ObjectController.extend(); 
```

Ember 将实例化这些控制器并在您的应用程序生命周期内管理它们。

要使用 设置商店`FixtureAdapter`，请执行以下操作：

```
YIH.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
}); 
```

要设置`content`控制器的，建议通过路由来完成，如下所示：

```
YIH.Router.map(function() {
    this.resource('photos', function() {
        this.route('photo', { path: ':photo_id' });
    });
});

YIH.IndexRoute = Em.Route.extend({
    redirect: function() {
        this.transitionTo('photos');
    }
});

YIH.PhotosRoute = Em.Route.extend({
    model: function() {
        return YIH.Photo.find();
    }
});

YIH.PhotosPhotoRoute = Em.Route.extend({
    model: function(params) {
        return YIH.Photo.find(params.photo_id);
    }
}); 
```

即使您不编写控制器，控制器也会收到被烘焙到其中的`model`通道。它看起来像这样：`setupController``Route`

```
SomeRoute = Em.Route.extend({
    setupController: function(controller, model) {
        controller.set('content', model);
    }
}); 
```

如果你愿意，你可以修改它。

我不确定您的 JSON 格式是否正确，因为您没有添加代码。无论哪种方式，每个 JSON 对象都应该有一个`id`属性，而您的模型不应该**有**一个`id`属性，除非您将存储/适配器配置为具有不同于`id`. 在整个应用程序中，有时您会直接调用 id，但有时您必须使用命名约定（例如：“照片”路由中的动态段）。

对于这样的模型：

```
YIH.Photo = DS.Model.extend({
    url: DS.attr('string'),
    caption: DS.attr('string')
}); 
```

为了添加固定装置，您必须像这样提供 JSON：

```
YIH.Photo.FIXTURES = [
    { id: 1,
      url: 'http://ecx.images-amazon.com/images/I/516cyMC9O7L.jpg',
      caption: 'Image 1'
    },
    { id: 2,
      url: 'http://ecx.images-amazon.com/images/I/51og8BkN8jL._SS250_.jpg',
      caption: 'Image 2'
    }
]; 
```

您可能想检查这个示例小提琴：http: [//jsfiddle.net/schawaska/n3hY6/](http://jsfiddle.net/schawaska/n3hY6/)

# mongodb - 骆驼调用 Spring-Data 在删除期间导致 AmbiguousMethodCallException

> ID：15301922
> 
> 赞同：0
> 
> 时间：2013-03-08T19:38:17.927
> 
> 标签：mongodb, apache-camel, spring-data

我有一个 Spring-Data MongoDB 存储库。就是这样：

```
public interface MyDataRepository extends PagingAndSortingRepository<MyData, String> {} 
```

我正在使用骆驼，保存效果很好：

```
.beanRef("myDataRepository","save")  // saves myData from message body 
```

但删除失败。消息正文是一个字符串，它是“myData”对象的 id。这是 Spring 告诉我的（我的格式）：

```
org.apache.camel.component.bean.AmbiguousMethodCallException: 
 Ambiguous method invocations possible: [
    public final void $Proxy42.delete(java.io.Serializable), 
    public final void $Proxy42.delete(java.lang.Iterable), 
    public final void $Proxy42.delete(java.lang.Object)]. 
 Exchange[Message: 513a3b6c0364f9195eca39ed] 
```

尝试了很多排列，我不知道要调用哪些排列。这里有一些简单的：

```
.beanRef("myDataRepository","delete")
.beanRef("myDataRepository","delete(String)") 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:14:51.600

好吧，我的解决方案是稍微绕过这个问题。

改用：

```
.beanRef( "myDataRepository", "findOne" )  // lookup based on id in msg body
.beanRef( "myDataRepository", "delete" )   // delete based on object 
```

所以现在我使用对象本身删除，消除歧义。足够好，但对直接解决该问题的其他答案持开放态度。

# c++ - 如何使用 GDB 在 operator< 上设置断点

> ID：15301924
> 
> 赞同：2
> 
> 时间：2013-03-08T19:38:25.720
> 
> 标签：c++, gdb

基本上就是标题所说的。我有一个功能：

```
bool operator< (... lhs, ... rhs) 
```

我想打破。'b operator<(...)' 给了我错误：

```
malformed template specification in command 
```

如何阻止 GDB 认为 < 是模板开启器？我也尝试按行号设置断点，但是这个定义在头文件中，并且由于某种原因，GDB 认为头文件中不存在行号。

GDB 6.8

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T20:08:12.637

您可以首先打印所有出现的 operator `<`，获取您感兴趣的函数的地址并在其上设置断点。

**注意：**只要您使用 using 编译，无论您的函数定义是否在`.h`或文件中，此技术都可以使用`.cpp``g++``-g`

```
$ gdb test

(gdb) p 'operator <'
$1 = {bool (MyClass &, MyClass &)} 0x4009aa <operator<(MyClass&, MyClass&)>

(gdb) b *0x4009aa
Breakpoint 1 at 0x4009aa: file test.h, line 5.

(gdb) r
Starting program: /home/agururaghave/.scratch/gdb-test/test 

Breakpoint 1, operator< (obj1=..., obj2=...) at test.cpp:6
6           friend bool operator < ( MyClass &obj1, MyClass &obj2 ) { 
```

我使用以下代码进行了测试：

```
/* test.h */
#include <iostream>
class MyClass {
public:
    friend bool operator < ( MyClass &obj1, MyClass &obj2 ) {
        std::cout << "operator <" << "\n";  
        return true;
    }
};

/* test.cpp */    
#include "test.h"
int main() {
    MyClass myObj1;
    MyClass myObj2;

    bool result = myObj1 < myObj2;

    std::cout << result << "\n";

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:51:40.450

尝试将其放在单引号中：

```
break 'operator<(Blah, Blah)' 
```

您也可以使用 TAB-completion 来让 GDB 帮助您

如果这没有帮助，您需要更具体地说明操作员的签名，而不是说“...”，因为您忽略了问题的重要部分！

哦，我刚刚看到您正在使用即将庆祝其 5 岁生日的 GDB 6.8 ......升级。GDB 7 在解析 C++ 声明方面要好得多。

# image-processing - 谁能简要解释一下下面的代码？

> ID：15301929
> 
> 赞同：1
> 
> 时间：2013-03-08T19:38:44.340
> 
> 标签：image-processing, matlab

这是计算图像中对象数量的 MATLAB 代码步骤之一。

```
B = bwboundaries(img2);
imshow(img2)
text(10,10,strcat('\color{green}Objects Found:',num2str(length(B))))
hold on 
```

虽然对代码给出的解释是

```
> This step finds the boundaries of each object that it finds and stores
> it in B. The text function prints the number of objects that are found
> by bwboundaries. 
```

但我无法理解第 3 步。谁能简要解释每一行的代码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:51:17.070

如需帮助，`bwboundaries`请参阅[该功能的帮助文件](http://www.mathworks.co.uk/help/images/ref/bwboundaries.html)。

`imshow(img2)`

...`img2`在图形窗口中显示图像。

```
length(B) 
```

...给出向量（或矩阵）B 的标量长度，例如`8`。

```
num2str(length(B)) 
```

...将此数字转换为字符串，例如`'8'`.

```
strcat('\color{green}Objects Found:',num2str(length(B))) 
```

...附加到字符串的开头`'8'`string `\color{green}Objects Found:`。在这种情况下，您最终会得到一个完整的字符串：

```
\color{green}Objects Found:8 
```

该`text`函数将此文本定位在当前轴上的指定位置，在本例中为位置 (10, 10)。棘手的部分是`\color{green}`文本字符串的一部分，它告诉 MATLAB 使文本变为绿色（并且在绘制文本时不显示）。

```
`hold on` 
```

... 防止绘制到相同轴的新项目擦除当前项目。

您可以使用命令从 MATLAB 中了解大部分这些命令`help`。例如打字`help bwboundaries`：

```
>> help bwboundaries
 bwboundaries Trace region boundaries in binary image.
    B = bwboundaries(BW) traces the exterior boundary of objects, as well
    as boundaries of holes inside these objects. It also ... <snip> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:58:04.097

除了@BillCheatman 的回答之外，您可能还需要了解 BWBOUNDARIES 函数在做什么以及它返回了什么。查看[文档](http://www.mathworks.com/help/images/ref/bwboundaries.html)以获取完整的解释和示例。

你还会发现

> bwboundaries 返回 B，一个 P×1 元胞数组，其中 P 是对象和孔的数量。

因此，该语句`length(B)`将为您提供 cell array 的最大尺寸`B`，即`P`在上述引用或找到的对象数量中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T22:13:39.860

"text(10,10,strcat('\color{green}Objects Found:',num2str(length(B)))) "这一行是在(10,10)的位置写一行文本图片。

“B = bwboundaries(img2);” 这个是计算 img2 的边界，应该是二值图像。

让我们以这张图片为例：
![在此处输入图像描述](../Images/1a045f99d287b2c4b044666f1142ae1e.png)

从这张图片中，我们可以看到有四个边缘。所以使用“B = bwboundaries(img2);”，我们将得到 B，它是一个 4 单元数据。每个单元格是一个*2 矩阵，用于存储每个边缘点的坐标。所以矩阵的每一行都是一个边缘点。对于我们的示例，有四个边，它们的图形如下所示。 ![在此处输入图像描述](../Images/8cc4a302b051f8c1bd79cca2626ab988.png)

# android - Andengine 如何让一个孩子落后于父母

> ID：15301933
> 
> 赞同：0
> 
> 时间：2013-03-08T19:38:55.953
> 
> 标签：android, andengine

费用

```
fee = new AnimatedSprite(0, 463, this.mFairyTextureRegion); 
```

我想要一个孩子跟随费用我使用这个代码但是particleSystem总是在之前

```
 mScene.attachChild(fee);
//mScene.getLastChild().attachChild(particleSystem);    
fee.attachChild(particleSystem);
fee.setZIndex(fee.getZIndex()+1);
particleSystem.setZIndex(particleSystem.getZIndex()-1);
//fee.sortChildren();
mScene.sortChildren(); 
```

如何让孩子背后的家长收费？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:00:27.233

我通过改变 andengine 本身来管理它，如此处所述，

[http://www.andengine.org/forums/tutorials/drawing-children-behind-it-parent-not-possible-with-zindex-t4810.html](http://www.andengine.org/forums/tutorials/drawing-children-behind-it-parent-not-possible-with-zindex-t4810.html)

我改变课堂顺序，

\AndEngine\src\org\anddev\andengine\entity\IEntity.java

```
protected void onManagedDraw(final GL10 pGL, final Camera pCamera) {
    pGL.glPushMatrix();
    {
        this.onApplyTransformations(pGL);
        //Saw these next two araound
        this.onDrawChildren(pGL, pCamera); //Draw children first
        this.doDraw(pGL, pCamera); //Then the parent

    }
    pGL.glPopMatrix(); 
```

}

向此类添加公共标志可能是一个想法，以便您可以切换子项以在其父项之前/之后绘制。请注意，这是针对 GLES 1 的，我不知道 GLES2 中是否引入了更好的解决方案。

# c# - 使用 NamedPipes 会导致防病毒软件出现问题

> ID：15301934
> 
> 赞同：0
> 
> 时间：2013-03-08T19:39:01.353
> 
> 标签：c#, wcf, named-pipes, antivirus

我发现我的应用程序存在一个奇怪的问题，它使用 NamedPipes 进行 IPC 通信。唯一通过它传输的文件是序列化为 xml 的对象。我没有在我的电脑上本地看到这些问题，因为我猜我的防病毒软件没有扫描它们，但是我有一些客户看到他们收到超时消息和管道故障的问题。如果他们禁用防病毒实时扫描程序，它就可以正常工作。是什么让我们怀疑杀毒软件是客户抱怨说，自从他们安装了我们的应用程序后，他们的杀毒软件 (NOD32) 就不停地崩溃。我们禁止应用程序运行，崩溃停止，昨天打开它，今天崩溃重新开始。

过去有没有人遇到过这个问题？我想知道迁移到 WCF 是否会阻止这种情况，我只是希望我不必进行命名空间保留。我喜欢 NamedPipes，因为它们非常适合在进程之间传输信息。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:43:19.883

大约 5 年前，我在使用防病毒程序（不仅仅是 NOD32）时遇到了类似的问题。对我有用的是 string-base64 传输的消息。我希望这个技巧也对你有用。

# ios - iOS SDK 使用附加数据将照片发布到 Web 服务

> ID：15301937
> 
> 赞同：0
> 
> 时间：2013-03-08T19:39:07.607
> 
> 标签：ios, objective-c, post

我正在使用以下代码将照片发送到 Web 服务：

```
-(void)uploadPhoto:(UIImage*)image :(NSString*)fileName
{

NSData *img = UIImageJPEGRepresentation(image, 0.9f);

NSString *urlString = @"http://serverURL.com";

NSMutableURLRequest *request= [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = @"---------------------------14737809831466499882746641449";

NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *postbody = [NSMutableData data];

[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.jpg\"\r\n",fileName] dataUsingEncoding:NSUTF8StringEncoding]];

[postbody appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[postbody appendData:[NSData dataWithData:img]];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:postbody];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"%@", returnString);

} 
```

这工作正常，我可以从 PHP 中的服务器获取照片。

我的问题是，是否可以使用表单数据向服务器发送其他数据？我需要发送有关照片的更多详细信息，例如用户名和其他一些与应用程序相关的数据。

我想知道如何在请求中附加一些额外的数据。我试图将常规的 POST 数据附加到它，但它不起作用。我假设是因为数据类型。

我很困惑这是如何工作的，以及是否有办法将更多数据附加到我发送到服务器的请求中。

对此的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:54:41.360

To upload image on server one of the best way is to use **ASIFormDataRequest**.

You can send multiple values for the same parameter using the alternative add API:

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request addPostValue:@"Ben" forKey:@"names"];
[request addPostValue:@"George" forKey:@"names"];
[request addFile:@"/Users/ben/Desktop/ben.jpg" forKey:@"photos"];
[request addData:imageData withFileName:@"george.jpg" andContentType:@"image/jpeg" forKey:@"photos"];

```

For a working code [Uploading file to server using ASIFormDataRequest](https://stackoverflow.com/a/5924548/790794). Some part of how to use it...

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

[request setUseKeychainPersistence:YES];
//if you have your site secured by .htaccess

//[request setUsername:@"login"];
//[request setPassword:@"password"];

NSString *fileName = [NSString stringWithFormat:@"ipodfile%@.jpg",self.fileID];
[request addPostValue:fileName forKey:@"name"];

```

To have better idea for [Sending a form POST with ASIFormDataRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:59:16.750

只需为帖子中的每个变量重复以下几行：

```
[postbody appendData:[@"Content-Disposition: form-data; name=\"userfile\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[postbody appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[postbody appendData:[NSData dataWithData:img]];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

显然，您需要更新第一行中的`name`值、第二行中的内容类型以及第三行中的实际数据。

# php - 这种关系方法是否可扩展？

> ID：15301939
> 
> 赞同：0
> 
> 时间：2013-03-08T19:39:10.587
> 
> 标签：php, mysql, relationship

我正在开发一个任务管理器应用程序 - 其中一个方面是项目所有权和访问权限。`project_user_meta`在纸面上，制作一张桌子是有意义的，如下所示：

```
REL_ID    USER_ID    PROJECT_ID    NAME                 VALUE
     1          4            17    'owner'              true
    72        209             8    'project_access'     true
   414         17           101    'task_access_only'   14 
```

等等，等等。但是，随着这个应用程序范围的扩大，项目开始数以千计，用户数以万计，这可能会变得非常繁琐和杂乱无章。我正在努力不越界进入“我如何做得更好”。我想知道的是——随着这个设置的规模增加，我应该注意什么？

例如，假设我的公司决定公开这个应用程序——用户增长超过 10 万，项目增长超过 1 万。这种方法在更大范围内将面临哪些限制/缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:19:07.870

一开始将所有项目都放在一个数据库中会容易得多，但是*如果*您超出了一个数据库服务器，那么您会希望将每个项目拆分为自己的数据库。这更容易扩展，并且还为您提供了一定程度的容错能力——一个项目的不当行为不会影响其他项目。

# javascript - 在点击淘汰赛之前运行一些代码

> ID：15301940
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:39:12.480
> 
> 标签：javascript, knockout.js

在 div 中有一个数据绑定 onClick，如下所示：

```
data-bind='click: $root.addTable' 
```

是否可以在调用点击之前运行一些 javascript 并且如果它满足特定条件不调用点击？

就像是 ？：

```
<div id="onThisClick" data-bind='click: $root.addTable'></div>

$("#onThisClick").delegate("#all", "click", function() {
if(isTrue){
}
else {
 //run data binding as normal
}
} 
```

我正在执行一些验证，需要将一个值传递给调用的 javascript 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:11:14.653

为什么不只检查被调用的方法呢？

```
<div class="button" data-bind="click: $root.addTable">Click</div>

// in javascript
function RootViewModel() {
    this.addTable = function() {
        if(!condition) {
            return; 
        }
        // jumps out when a condition is met

        // do what you're supposed to do here
    }
} 
```

无需将其复杂化，而不仅仅是条件和回报。

* * *

编辑：如果您已经在使用 jQuery，那么使用 jQuery 从 HTML 中获取值很容易。这是一个使用隐藏字段的示例（您可以使用以下命令检索它[`val()`](http://api.jquery.com/val/)：

```
<input type="hidden" id="myvalue" value="true"></input>

// in javascript code, select the element by it's id
if ($("#myvalue").val()) return;

// plain vanilla JS is a bit more verbose
if (document.getElementById("myvalue").value === "true") return; 
```

你可以用[*这个 jsfiddle 来玩*](http://jsfiddle.net/BHY2E/1/)这个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:20:22.697

我假设您的问题是您已经调用了定义的函数，`$root`但您想访问`$data`（绑定时的视图模型）的属性。Knockout 使用该`apply()`方法调用绑定函数，并将您当前的视图模型作为第一个参数传递。所以你在你的函数中`$data`是可用的（当它通过点击事件调用时）。`this`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T20:02:42.200

我听说过knockoutJS，我有兴趣了解它，但在这个例子中，它对你没有任何好处。另一方面，jQuery：

```
$(function() {
    $root = $("#root");
    $root.addTable = function() {
        $root.html("Hooray!");
    };

    $("#onThisClick").on("click", function() {
       $root.html("");
       if($("#theText").val().match(/sad/)){
           alert("Must not be sad to see table!");
       }
       else {
          $root.addTable();
       }
   });

}); 
```

似乎工作得很好。您需要传递给的任何值`addTable()`都可以使用您的其他 HTML5`data`属性毫无问题地访问。 [检查小提琴，并分叉它以使其适合您](http://jsfiddle.net/amullins/sGeS6/2/)。

# c# - 在 WP 应用程序中正确登录后如何表现

> ID：15301945
> 
> 赞同：0
> 
> 时间：2013-03-08T19:39:25.517
> 
> 标签：c#, login, windows-phone

正确登录后处理应用程序行为的正确方法是什么？让我们想象以下机制 - 当用户设置键值设置为“false”时，用户登陆登录页面。一旦用户执行登录，他就会被导航到主页。一切正常，直到用户按下硬件“返回”按钮。然后他再次被导航到登录页面。我的第一个想法是 - 好吧，让我们检查用户是否使用 onNavigatedTo 方法登录，但显然这会使“返回”按钮覆盖其导航目的，这在提交过程中会被拒绝。因此，一旦用户导航到主菜单，我就尝试删除导航历史记录。但我不确定这个解决方案是否合适。是否有一些本机解决方案，我应该看看？期待看到在 c# 方面更有经验的人的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:29:53.270

[通过弹出窗口](http://www.geekchamp.com/tips/how-to-get-user-input-from-a-popup-in-windows-phone)而不是单独的页面推送登录流程。这样您就可以避免现在遇到的许多潜在问题，主要涉及导航/解雇流程。

# visual-studio - HTML 右键菜单的 Visual Studio CommandBar 的名称是什么？

> ID：15301957
> 
> 赞同：0
> 
> 时间：2013-03-08T19:40:39.543
> 
> 标签：visual-studio, add-in

在开发 Visual Studio 插件时，代码编辑上下文的右键菜单是（相对）常识，称为`"Code Window"`：

```
var CodeRightClickMenu = ((CommandBars)_applicationObject.CommandBars)["Code Window"]; 
```

但是，在类似 HTML 的文件中右键单击（即剃刀视图或 webforms .ascx 或 .aspx）时，将项目添加到该菜单不会显示它们。HTML 编辑器的右键菜单的 CommandBar 的名称是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:40:39.543

根据[James Wiseman的](https://stackoverflow.com/users/144491/james-wiseman/)[挖掘](http://www.jameswiseman.com/blog/2012/07/29/visual-studio-addins-adding-items-to-context-menus/)，HTML 编辑器的右键菜单名称为. 但它仅用于真正的 HTML（如 Razor 视图的 HTML 部分或 .html 文件）。其他相关内容的菜单也都以“上下文”结尾：`"HTML Context"`

```
HTML Context
ASPX Context
ASPX Code Context
ASPX VB Code Context 
```

# java - 将两个 DAO 中的数据合并到一个 TO

> ID：15301960
> 
> 赞同：1
> 
> 时间：2013-03-08T19:40:51.943
> 
> 标签：java, web-services, dao, dto

我有一种情况，我想使用一个业务对象 (TO)。但是，此 TO 包含的数据来自 2 个不同的数据源：

*   应用程序的数据库，将通过 JPA 和一个实体访问
*   旧系统的数据，将通过 Web 服务访问

在该项目的后期阶段，所有数据都将被移动到应用程序的数据库中。因此，我希望有一个业务对象 (TO) 来表示所有这些数据。

我的方法是以下之一：

1) 实体有一个 DAO，旧系统有另一个 DAO。然后是在这些之上的另一个 DAO，它将创建我想在应用程序的其余部分中使用的业务对象。

2) 只有一个 DAO 可以从实体中检索一些数据，从旧系统中检索一些数据。

您对此有何看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:46:49.370

您需要在（实体，旧系统）之上引入一个服务层`Dao's`并将所有内容注入（假设您正在使用`Spring`）`Dao's`服务中。选项 1 更好，但只需在服务中创建两个 Dao，并创建将在整个应用程序中使用的业务传输对象。工作流程是 UI -> PersonService -> Dao1 (app db), Dao2(Webservice)。PersonService 将具有必要的业务逻辑（如果有）。另外，您可以在 PersonService 内部创建一个 PersonDaoFactory 来抽象 Dao 的内部 Service 层的创建。所以，最后我们会从控制器或 UI 层得到类似下面的东西（一个假设的场景，因为我不知道域模型）：

```
Person person = personService.findUserById(personId);
Product product = person.getProducts();
Comment comment = person.getComments();
Friends friends = person.getFriends(); 
```

另外，想想一个许多 DAO 解决而一个大 DAO 无法解决的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:47:18.090

如果不了解数据，很难回答这个问题。我要做的是有两个dao：一个用于db，一个用于webservice（我将其称为服务而不是dao）并使用后者向JPA dao检索的实体添加属性。我稍后会放弃 webservice 的 service/dao 并发展 JPA dao。

正如另一个答案所述，您需要通过使用服务中的这些 dao 来抽象这一点。因此，您的第一个解决方案对我来说听起来更好。

# android - Android 手机上的 GPS 芯片和 GPS 服务

> ID：15301970
> 
> 赞同：-3
> 
> 时间：2013-03-08T19:41:26.363
> 
> 标签：android, gps

无论我使用谷歌的定位服务还是某些第三方软件提供的类似服务，我是否仍需要通过选择其中一个设置选项手动启用任何内容，如下所示？

设置 > 位置和安全 > 我的位置（选项 1）使用无线网络（选项 2）使用 GPS 卫星

由于现在有很多 GPS 软件程序可用，那么板载 GPS 芯片在 Android 手机上的作用是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:40:25.457

板载 GPS 芯片的作用是接收由大约 32 颗 GPS 卫星。这些信号中的数据用于计算设备在地球上的地理位置。这样的位置至少包括：时间、纬度和经度。如果没有这样的芯片，设备就无法确定其准确的位置。这就是芯片的作用。

(GPS) 应用程序的作用是使用这些位置并对其进行处理，例如在 (google) 地图上显示您的当前位置。

# c - 尝试将参数传递给 ioctl 调用将参数归零

> ID：15301971
> 
> 赞同：4
> 
> 时间：2013-03-08T19:41:28.153
> 
> 标签：c, linux-kernel, kernel-module, ioctl

我正在尝试在我的玩具文件系统模块中调用 ioctl 函数。我只是想让这个 ioctl 设置一个由调用者传入的变量。到目前为止，我已经建立了允许我进行 ioctl 调用的 ioctl 基础设施。我的模块中有这个函数来处理 ioctl。

```
int ospfs_ioctl(struct inode *inode, struct file *filp,
      unsigned int cmd, unsigned long arg)
{
    if(cmd == OSPFSIOCRASH)
    {
        eprintk("crash: %ld\n", arg);
        return 0;
    }
    else
        return -ENOTTY;
} 
```

我的测试功能看起来像这样。

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#define OSPFSIOCRASH 42

int main()
{
    int fd = open("/tmp/cs111/lab3-thief/test/hello.txt", O_RDWR);
    printf("ioctl call: %d\n", ioctl(fd, OSPFSIOCRASH, 100));
    close(fd);
} 
```

我希望输出是

```
crash: 100
ioctl call: 0 
```

但输出实际上是

```
crash: 0
ioctl call: 0 
```

我敢打赌我做错了一些简单的事情。有人可以帮忙并指出问题所在吗？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:23:35.727

这可能不是解决您问题的解决方案，但根据您的问题和评论中的有限信息，这是我可以收集的。

根据问题和评论，您似乎已经`struct file_operations`以这种方式定义了一个结构：

```
struct file_operations fops = { .ioctl=ospfs_ioctl }; 
```

你的签名`ospfs_ioctl`表明你正在使用旧的ioctl。

对于最近的内核（至少在 2.6.35+ 或其他版本之后），建议使用`.unlocked_ioctl`而不是`.ioctl`.

```
struct file_operations fops = { .unlocked_ioctl=ospfs_ioctl }; 
```

并且`ospfs_ioctl`函数的定义将更改为：

```
long ospfs_ioctl(struct file *filp, unsigned int cmd, unsigned long arg) 
```

和常规 ioctl之间的区别`unlocked_ioctl`可以在[这里](http://lwn.net/Articles/119652/)找到。简而言之，`BKL`在调用 ioctl 之前不需要担心。

而且根据`Chris Dodd`的建议，你应该仔细检查你是如何定义你的`OSPFIOCRASH`. 推荐的方法是使用`_IO(magic, some_num_for_ioctl)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:39:40.557

根据 Chris Dodd 的建议，我更改`#define OSPFIOCRASH 42`为`#define OSPFSIOCRASH _IO(magic, 0)`并获得了所需的行为。

# java - NetBeans：消除文本字段之间的空白

> ID：15301972
> 
> 赞同：0
> 
> 时间：2013-03-08T19:41:47.260
> 
> 标签：java, swing, netbeans

我想制作一个 20x20 的网格，我可以将每个正方形设为黑色、白色或空白。如果它是白色的，我还想在正方形中放置一个字符（这是用于填字游戏应用程序）。

我在 NetBeans 7.3 中使用 Java Swing，我的计划是有一组 20x20 的文本字段，但是 NB 不允许您将文本字段彼此齐平，总是有一个小间隙，我没有想。

有谁知道如何消除差距或知道是否有更好的方法来实现我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:45:46.053

右键单击 GUI builder 中的组件并选择属性。您可以在那里调整组件的设置。

# c++ - 模板难题

> ID：15301981
> 
> 赞同：4
> 
> 时间：2013-03-08T19:42:23.640
> 
> 标签：c++, templates, c++11, template-specialization

我遇到了一个 C++ 模板难题。我试图将它削减到最低限度，现在我什至不确定我想要做的事情是否可行。看看下面的代码（在一些 .h 文件中）。

```
template<typename T>
class A
{
public:
    template<typename S>
    void f(S x);
};

class B1 { };

template<typename S>
class B2 { };

//This one works:
template<>
template<typename S>
void A<B1>::f(S x)
{
}    

//This one does not work:
template<>
template<typename S>
void A<B2<S>>::f(S x)
{
} 
```

在我的`main`函数中，我有这样的东西：

```
//This one works:
A<B1> first;
first.f<int>(5);

//This one does not work:
A<B2<int>> second;
second.f<int>(5); 
```

由于第二部分，我收到的错误消息是

```
error C3860: template argument list following class
             template name must list parameters in the
             order used in template parameter list

error C3855: 'A<T>': template parameter 'T' is
             incompatible with the declaration 
```

知道问题是什么吗？

* * *

# 编辑

为了使问题更具体，这是我的动机。我希望上面的函数对、和`f`有专门化，其中 中的类型仍然未绑定。`T=std::tuple<T1, T2>``T=std::tuple<T1, T2, T3>``T=std::tuple<T1, T2, T3, T4>``tuple`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:50:29.370

您正在尝试部分专门化成员函数模板。这是不可能的，我怕...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T20:07:31.680

您的代码有两个问题。首先，第二个专业是非法的，因为

```
template<> // parameters useable for the specialization of A you refer to
           // since it is a function, no partial specialization is allowed.
template<typename S> // parameters for the function's parameters
void A<B2<S>>          // S can not be used here!
             ::f(S x)  // only here
{
} 
```

如果我将其更改为

```
template<>
template<typename S>
void A<B2<int>>::f(S x)
{
} 
```

它有效，现在暴露了第二个问题：

```
second.f<B2<int>>(5); 
```

这设置`S`为`B2<int>`并且函数需要一个参数`S x`- 但整数`5`不能转换为该类型。将其更改为：

```
B2<int> x;
second.f<B2<int>>(x); 
```

它也有效。

请注意，这可能无法解决您试图解决的问题，它只是解释了会发生什么。

* * *

考虑您的编辑：我认为您尝试专门化的事实`T=std::tuple<...>`已经指明了方向：`T`是模板参数，`A`这*就是*您应该专门化的内容。也许是这样的：

```
template< typename T >
class F // used to implement f(), so you can specialize
        // just F/f() instead of the whole class A
{
  void f(T x) { /* default impl */ }
};

template< typename T1, typename T2 >
class F< std::tuple< T1, T2 > >
{
  void f(T1 x, T2 y) { /* special impl */ }
};

template< typename T >
class A : public F< T >
{
    // ...other stuff...
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:46:29.527

如果要将另一个模板传递给模板，则必须使用[*模板模板参数*](https://stackoverflow.com/questions/213761/what-are-some-uses-of-template-template-parameters-in-c)，因此您的 A<> 模板如下所示：

```
template<typename T>
class A
{
public:
    template<template <typename> class H, typename S>
    void f(H<S> x);
}; 
```

现在您可以将模板传递给您的模板。

如果您的原始模板没有采用这种参数类型，我认为您不能专注于模板模板参数。

# java - 具有外键和主键公共列的休眠注释

> ID：15301986
> 
> 赞同：3
> 
> 时间：2013-03-08T19:42:33.160
> 
> 标签：java, hibernate, annotations, foreign-key-relationship

我在休眠 4.1.9 中以我喜欢的方式建模外键时遇到了一些问题

我基本上有以下代码：

```
@Entity
@XmlRootElement
@Table(name="User")
public class UserVO
{
    private String email;

    @Id
    @Column(name="email", unique=true, nullable=false)
    @XmlElement
    public String getEmail()
    {
        return this.email;
    }
} 
```

和这个：

```
@Entity
@XmlRootElement
@Table(name="Authentification")
public class AuthentificationVO
{
    private String email;
    private UserVO user;

    @Id 
    @Column(name="email", unique=true, nullable=false)
    @XmlElement
    public String getEmail()
    {
        return this.email;
    }

    @OneToOne(cascade = CascadeType.ALL)
    @ForeignKey(name="user_fk")
    public UserVO getUser()
    {
        return this.user;
    }
} 
```

这一切的重点是在两个表中都有一个名为 email 的列，它也应该作为 User 和 Authentification 表的主键。出于某种原因，当我运行它时，Hibernate 坚持要在 Authentification 表中添加一个名为 user_email 的列，但我希望它使用已经存在的名为 email 的列。

我尝试四处寻找解决方案，并尝试使用 mappedBy 注释以及 JoinColumn 来使其正确，但似乎没有任何作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T08:23:02.877

最后真正的诀窍是添加以下注释：

```
@OneToOne(cascade = CascadeType.ALL)
@JoinColumn(name="email")
@MapsId 
```

我删除了 ForeignKey 注释，因为在创建表时它被忽略了。唯一的影响是约束的命名，它现在由休眠自动生成，我可以忍受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:26:43.653

对于一对一，您需要`@JoinColumn(name="user_fk")`为映射指定。注释只是用来覆盖hibernate生成的外键的`@ForeignKey`名称，而不是告诉hibernate要使用哪个列（这是的作用`@JoinColumn`）

[评论后编辑]

实际上，当您在主键上进行映射时，您应该使用`@MapsId`注释告诉休眠您正在映射到`OneToOne`关联实体的 Id。你的映射应该变成：

```
@OneToOne(CascadeType.ALL)
@ForeignKey(name="email")
@MapsId 
```

# css - 仅首字母大写

> ID：15301990
> 
> 赞同：1
> 
> 时间：2013-03-08T19:42:49.373
> 
> 标签：css, uppercase, capitalize

我们数据库中的所有数据均以全大写形式输入。当我提取该信息（即名字和姓氏）时，我希望它说“John Smith”与“JOHN SMITH”。我尝试使用`text-transform:capitalize;`，但只大写第一个字母。它不会使所有其他字母小写。我也试过这个（没有成功）：

```
<div class="profile">
<h2 style="text-transform:lowercase;"><span style="text-transform: capitalize;">Welcome _MEM_FirstName_ _MEM_LastName_,</span></h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam neque lectus, molestie quis ullamcorper ac, vesti bu lum ut elit. Donec quis lacus sem, a pharetra neque. Cras ultricies purus ac ligula lacinia ullamcorper.</p>
<p>Your Walser Rewards card is also your My SA Rewards card. While at Super America locations you can get gas discounts and earn speedy rewards too.</p>
</div> 
```

关于如何将文本从大写转换为大写的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:59:02.570

不确定您是如何提取数据的，但您可以在提取单词后通过 Javascript 对其进行编辑。

```
var text = "JOHN SMITH"; //this would normally be the word you pulled
var textarray = text.toLowerCase().split(" "); // ["john", "smith"]
for (var i=0; i<textarray.length; i++) {
    textarray[i] = textarray[i].replace(textarray[i][0], textarray[i][0].toUpperCase());
}
//["John", "Smith"] 
```

现在，`textarray`您可以在页面上随心所欲地将其打印出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:47:46.330

这对 CSS 来说是不可能的，因为你的字母已经大写了，但是你可以用你的服务器端语言（例如 PHP）、JavaScript 甚至在数据库查询中做到这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:46:38.360

这个问题没有 CSS 解决方案，afaik。

请参阅[此处](https://stackoverflow.com/questions/1033664/force-capitalised-input-to-title-case-in-css-using-text-transform)，以获取相关帖子。请先做好功课。

最好的方法是在数据库查询和应用程序将数据发送到模板之间格式化数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:50:46.903

将字符串转换为小写， `string modifiedString = myString.ToLower();`在检索字符串后使用类似方法中的内容。然后`text-transform: capitalize;`在你的 CSS 中使用。

# ruby-on-rails - 我可以在 Rails 的 config/settings.yml 中有一个哈希吗

> ID：15301993
> 
> 赞同：0
> 
> 时间：2013-03-08T19:43:02.070
> 
> 标签：ruby-on-rails

伙计们，

在我的**config/settings.yml**的 Rails 中，我可以有一个哈希值。例如：

```
specimen_options:
  kinds: [ {:ocl => "latest"}, {:omb => "legacy"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:52:56.777

你为什么要在这里有一个哈希？阅读 YML 后，您始终可以将此属性嵌套在种类下并获得相同的结果。

```
specimen_options:
  kinds:
    ocl: latest
    omb: legacy 
```

# python - 带有 *args 和 **kwargs 的默认参数

> ID：15301999
> 
> 赞同：92
> 
> 时间：2013-03-08T19:43:12.830
> 
> 标签：python, python-2.7

在**Python 2.x**（我使用 2.7）中，将默认参数与`*args`和一起使用是正确的方法`**kwargs`吗？
我发现了一个与此主题相关的 SO 问题，但这是针对**Python 3**的：
[Calling a Python function with *args,**kwargs and optional / default arguments](https://stackoverflow.com/questions/9872824/calling-a-python-function-with-args-kwargs-and-optional-default-arguments)

在那里，他们说这种方法有效：

```
def func(arg1, arg2, *args, opt_arg='def_val', **kwargs):
    #... 
```

在 2.7 中，它会导致`SyntaxError`. 有没有推荐的方法来定义这样的功能？
我让它以这种方式工作，但我想有一个更好的解决方案。

```
def func(arg1, arg2, *args, **kwargs):
    opt_arg ='def_val'
    if kwargs.__contains__('opt_arg'):
        opt_arg = kwargs['opt_arg']
    #... 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-03-08T19:45:36.450

只需将默认参数放在`*args`：

```
def foo(a, b=3, *args, **kwargs): 
```

现在，`b`如果您将其作为关键字参数或第二个位置参数传递，将显式设置。

例子：

```
foo(x) # a=x, b=3, args=(), kwargs={}
foo(x, y) # a=x, b=y, args=(), kwargs={}
foo(x, b=y) # a=x, b=y, args=(), kwargs={}
foo(x, y, z, k) # a=x, b=y, args=(z, k), kwargs={}
foo(x, c=y, d=k) # a=x, b=3, args=(), kwargs={'c': y, 'd': k}
foo(x, c=y, b=z, d=k) # a=x, b=z, args=(), kwargs={'c': y, 'd': k} 
```

请注意，特别是`foo(x, y, b=z)`不起作用，因为`b`在这种情况下是按位置分配的。

* * *

此代码也适用于 Python 3。在 Python 3中将默认 arg 放在*后面* `*args`使其成为*只能*按名称而不是位置指定的“仅关键字”参数。如果您想要 Python 2 中的仅关键字参数，可以使用 @mgilson 的[解决方案](https://stackoverflow.com/a/15302038/355230)。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-03-08T19:45:23.387

另一个问题中的语法仅适用于 python3.x 并指定仅关键字参数。它不适用于 python2.x。

对于python2.x，我会`pop`用kwargs：

```
def func(arg1, arg2, *args, **kwargs):
    opt_arg = kwargs.pop('opt_arg', 'def_val') 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-11-20T08:53:31.110

与@yaccob 类似的方法，但简洁明了：

在**Python 3.5**或更高版本中：

```
def foo(a, b=3, *args, **kwargs):
  defaultKwargs = { 'c': 10, 'd': 12 }
  kwargs = { **defaultKwargs, **kwargs }
  print(a, b, args, kwargs)

  # Do something    

foo(1) # 1 3 () {'c': 10, 'd': 12}
foo(1, d=5) # 1 3 () {'c': 10, 'd': 5}
foo(1, 2, 4, d=5) # 1 2 (4,) {'c': 10, 'd': 5} 
```

注意：您可以在**Python 2中使用**

```
kwargs = merge_two_dicts(defaultKwargs, kwargs) 
```

在**Python 3.5中**

```
kwargs = { **defaultKwargs, **kwargs } 
```

在**Python 3.9中**

```
kwargs = defaultKwargs | kwargs  # NOTE: 3.9+ ONLY 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-30T20:31:23.253

你也可以使用这样的装饰器：

```
import functools
def default_kwargs(**defaultKwargs):
    def actual_decorator(fn):
        @functools.wraps(fn)
        def g(*args, **kwargs):
            defaultKwargs.update(kwargs)
            return fn(*args, **defaultKwargs)
        return g
    return actual_decorator 
```

然后做：

```
@default_kwargs(defaultVar1 = defaultValue 1, ...)
def foo(*args, **kwargs):
    # Anything in here 
```

例如：

```
@default_kwargs(a=1)
def f(*args, **kwargs):
    print(kwargs['a']+ 1)

f() # Returns 2
f(3) # Returns 4 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-10T02:24:23.283

在尝试使其更通用和更紧凑的同时，坚持非常接近您的解决方案方法，我建议考虑这样的事情：

```
>>> def func(arg1, arg2, *args, **kwargs):
...     kwargs_with_defaults = dict({'opt_arg': 'def_val', 'opt_arg2': 'default2'}, **kwargs)
...     #...
...     return arg1, arg2, args, kwargs_with_defaults

>>> func('a1', 'a2', 'a3', 'a5', x='foo', y='bar')
('a1', 'a2', ('a3', 'a5'), {'opt_arg2': 'default2', 'opt_arg': 'def_val', 'y': 'bar', 'x': 'foo'})

>>> func('a1', 'a2', 'a3', 'a5', opt_arg='explicit_value', x='foo', y='bar')
('a1', 'a2', ('a3', 'a5'), {'opt_arg2': 'default2', 'opt_arg': 'explicit_value', 'y': 'bar', 'x': 'foo'}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-08T17:38:03.910

处理 Python 2.x 的另一种方法：

```
def foo(*args, **kwargs):
    if 'kwarg-name' not in kwargs.keys():
        kwargs['kwarg-name'] = 'kwarg-name-default-value'
    return bar(*args, **kwargs) 
```

`*args`与@nneonneo 的答案不同，这可以将任意传递给底层调用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-18T21:54:17.837

这个答案是[Daniel Américo 建议](https://stackoverflow.com/a/50107777/11136955)的延伸。

如果没有*严格*定义，这个装饰器会分配默认的 kwarg 值。

```
from functools import wraps

def force_kwargs(**defaultKwargs):
    def decorator(f):
        @wraps(f)
        def g(*args, **kwargs):
            new_args = {}
            new_kwargs = defaultKwargs
            varnames = f.__code__.co_varnames
            new_kwargs.update(kwargs)
            for k, v in defaultKwargs.items():
                if k in varnames:
                    i = varnames.index(k)
                    new_args[(i, k)] = new_kwargs.pop(k)
            # Insert new_args into the correct position of the args.
            full_args = list(args)
            for i, k in sorted(new_args.keys()):
                if i <= len(full_args):
                    full_args.insert(i, new_args.pop((i, k)))
                else:
                    break
            # re-insert the value as a key-value pair
            for (i, k), val in new_args.items():
                new_kwargs[k] = val
            return f(*tuple(full_args), **new_kwargs)
        return g
    return decorator 
```

## 结果

```
@force_kwargs(c=7)
def f(a, b='B', c='C', d='D', *args, **kw):
    return a, b, c, d, args, kw
#                               a    b  c    d  args      kwargs
f('r')                      # 'r', 'B', 7, 'D',   (),         {}
f(1,2,3)                    #   1,   2, 7,   3,   (),         {}
f(1, 2, 3, b=3, c=9, f='F') #   1,   3, 9,   2, (3,), {'f': 'F'} 
```

### 变体

如果要使用函数定义中所写的默认值，可以使用`f.func_defaults`列出默认值的 访问参数默认值。您必须在`zip`它们的末尾`f.__code__.varnames`加上变量名来匹配这些默认值。