# StackOverflow 问答 13372000-13372999

# python - 使用 SQLAlchemy 进行多租户

> ID：13372001
> 
> 赞同：13
> 
> 时间：2012-11-14T02:02:14.860
> 
> 标签：python, postgresql, sqlalchemy, multi-tenant

我有一个使用 Pyramid/SQLAlchemy/Postgresql 构建的 Web 应用程序，允许用户管理一些数据，并且这些数据对于不同的用户几乎是完全独立的。比如说，Alice 访问`alice.domain.com`并能够上传图片和文档，Bob 访问`bob.domain.com`并且也能够上传图片和文档。Alice 永远不会看到 Bob 创建的任何东西，反之亦然*（这是一个简化的示例，多个表中可能确实有很多数据，但想法是一样的）*。

现在，在 DB 后端组织数据最直接的选择是使用单个数据库，其中每个表 (`pictures`和`documents`) 都有`user_id`字段，因此，基本上，要获取 Alice 的所有图片，我可以执行类似的操作

```
user_id = _figure_out_user_id_from_domain_name(request)
pictures = session.query(Picture).filter(Picture.user_id==user_id).all() 
```

这一切都很容易和简单，但是有一些缺点

*   我需要记住在进行查询时始终使用附加过滤条件，否则 Alice 可能会看到 Bob 的图片；
*   如果有很多用户，表格可能会变得很大
*   在多台机器之间拆分 Web 应用程序可能会很棘手

所以我认为以某种方式拆分每个用户的数据会非常好。我可以想到两种方法：

1.  在同一个数据库中为 Alice 和 Bob 的图片和文档设置单独的*表（在这种情况下，Postgres 的*[模式](http://www.postgresql.org/docs/8.0/static/ddl-schemas.html)似乎是一种正确的方法）：

    ```
    documents_alice
    documents_bob
    pictures_alice
    pictures_bob 
    ```

    然后，使用一些黑魔法，根据当前请求的域将所有查询“路由”到一个或另一个表：

    ```
    _use_dark_magic_to_configure_sqlalchemy('alice.domain.com')
    pictures = session.query(Picture).all()  # selects all Alice's pictures from "pictures_alice" table
    ...
    _use_dark_magic_to_configure_sqlalchemy('bob.domain.com')
    pictures = session.query(Picture).all()  # selects all Bob's pictures from "pictures_bob" table 
    ```

2.  为每个用户使用单独的数据库：

    ```
    - database_alice
       - pictures
       - documents
    - database_bob
       - pictures
       - documents 
    ```

    这似乎是最干净的解决方案，但我不确定多个数据库连接是否需要更多的 RAM 和其他资源，从而限制可能的“租户”数量。

所以，问题是，这一切都有意义吗？如果是，如何配置 SQLAlchemy 以在每个 HTTP 请求上动态修改表名（对于选项 1）或维护到不同数据库的连接池并为每个请求使用正确的连接（对于选项 2）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-12T06:36:22.033

在思考 jd 的回答后，我能够为 postgresql 9.2、sqlalchemy 0.8 和 flask 0.9 框架实现相同的结果：

```
from sqlalchemy import event
from sqlalchemy.pool import Pool
@event.listens_for(Pool, 'checkout')
def on_pool_checkout(dbapi_conn, connection_rec, connection_proxy):
    tenant_id = session.get('tenant_id')
    cursor = dbapi_conn.cursor()
    if tenant_id is None:
        cursor.execute("SET search_path TO public, shared;")
    else:
        cursor.execute("SET search_path TO t" + str(tenant_id) + ", shared;")
    dbapi_conn.commit()
    cursor.close() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T00:07:40.437

好的，我最终`search_path`使用 Pyramid 的`NewRequest`事件在每个请求的开头进行了修改：

```
from pyramid import events

def on_new_request(event):

    schema_name = _figire_out_schema_name_from_request(event.request)
    DBSession.execute("SET search_path TO %s" % schema_name)

def app(global_config, **settings):
    """ This function returns a WSGI application.

    It is usually called by the PasteDeploy framework during
    ``paster serve``.
    """

    ....

    config.add_subscriber(on_new_request, events.NewRequest)
    return config.make_wsgi_app() 
```

效果非常好，只要您将事务管理留给 Pyramid（即不要手动提交/回滚事务，让 Pyramid 在请求结束时执行此操作） - 这是可以的，因为手动提交事务无论如何都不是一个好方法.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T09:39:07.053

在连接池级别而不是在会话中设置搜索路径对我来说非常有效。此示例使用 Flask 及其线程本地代理来传递模式名称，因此您必须更改`schema = current_schema._get_current_object()`它并围绕它的 try 块。

```
from sqlalchemy.interfaces import PoolListener
class SearchPathSetter(PoolListener):
    '''
    Dynamically sets the search path on connections checked out from a pool.
    '''
    def __init__(self, search_path_tail='shared, public'):
        self.search_path_tail = search_path_tail

    @staticmethod
    def quote_schema(dialect, schema):
        return dialect.identifier_preparer.quote_schema(schema, False)

    def checkout(self, dbapi_con, con_record, con_proxy):
        try:
            schema = current_schema._get_current_object()
        except RuntimeError:
            search_path = self.search_path_tail
        else:
            if schema:
                search_path = self.quote_schema(con_proxy._pool._dialect, schema) + ', ' + self.search_path_tail
            else:
                search_path = self.search_path_tail
        cursor = dbapi_con.cursor()
        cursor.execute("SET search_path TO %s;" % search_path)
        dbapi_con.commit()
        cursor.close() 
```

在引擎创建时：

```
engine = create_engine(dsn, listeners=[SearchPathSetter()]) 
```

# php - 奇怪的 array_diff 结果

> ID：13372002
> 
> 赞同：0
> 
> 时间：2012-11-14T02:02:29.437
> 
> 标签：php

我正在使用 codeigniter 从各种数据库表中获取一些数据。有趣的是，在这段代码上方的 10 行中，我正在使用其他一些具有名称的数组来测试这个概念，并且一切都按预期工作。现在我正在对我的数据库中的数据尝试同样的事情，它似乎不起作用。

**代码**

```
 echo "a:";print_r($CITB);
            echo "<br />b:";print_r($PRB);
            echo "<br />c:";print_r($TB);
            echo "<br />d:";print_r($TRB);

            $a = $CITB; //I know this is empty
            $b = array_diff($PRB,$a);
            $c = array_diff($TB, $b, $a);
            $d = array_diff($TRB, $c, $b, $a);

             echo "<br /><br />a:";print_r($a);
             echo "<br />b:";print_r($b);
             echo "<br />c:";print_r($c);
             echo "<br />d:";print_r($d);die(); 
```

**结果**

```
a:
b:Array ( [0] => 8 [1] => 52 ) 
c:Array ( [0] => 8 [1] => 52 ) 
d:

a:
b:
c:
d: 
```

**预期结果**

```
a:Array()
b:Array ( [0] => 8 [1] => 52 ) 
c:Array()
d:Array() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:12:19.957

array_diff 的参数应该是数组。否则它将返回`null`。

在你的情况下`print_r($CITB);`不打印，`Array()`这意味着它不是一个空数组，很可能是一个空字符串。所以`$b = array_diff($PRB,$a);`结果`$b`是`null`。

如果您打开错误报告，您应该会看到一些警告。否则使用`var_dump`代替`print_r`来查看变量的类型。

# node.js - 多客户端无法在node.js中同时上传文件

> ID：13372014
> 
> 赞同：0
> 
> 时间：2012-11-14T02:03:36.343
> 
> 标签：node.js, concurrency, upload, express

我正在使用 express.js 和 uploadify 将大文件上传到节点服务器，一切正常，除非有多个用户登录并尝试同时上传文件，它仍然有效，但似乎服务器只能上传一个文件一次，所以用户必须等到其他用户完成上传，这是无法接受的。

这是服务器端代码

```
exports.upload = function(req, res,next){
    // console.log( req.body);
    // console.log(req.files);
    var tmp_path = req.files.product_video.path;
    var target_path = 'F:/shopping/shop/' +req.body.shop_id+'/'+ req.files.product_video.name;

    fs.rename(tmp_path, target_path, function(err) {
        if (err) {
            console.log(err)
        }
        else{
            fs.unlink(tmp_path, function() {
                if (err){
                    console.log(err)
                }else{
                    exec("C:/ffmpeg/bin/ffmpeg -i shop/"+ req.body.shop_id+ '/' + req.files.product_video.name  + " -ss 00:01:00.00 -r 1 -an -vframes 1 -s 250x150 -f mjpeg shop/"+ req.body.shop_id+ '/'  + req.files.product_video.name  + "_thumbnail.jpg", function(err){

                        var data = {
                            'thum_src':'shop/'+ req.body.shop_id+ '/'  + req.files.product_video.name  + "_thumbnail.jpg",
                            'video_name':req.files.product_video.name,
                        }
                        res.send(data);
                    });
                }
            });
        }

    });
}; 
```

这是前端代码

```
 $('#input_product_video').uploadify({
        'formData':{'shop_id':$('#shop_id').val()},
        'buttonText'    : 'add',
        'fileSizeLimit' : '100MB',
        'fileObjName' : 'product_video',
        'uploader'    : '/uploads',
        'swf'         :'/public/javascripts/lib/uploadify/uploadify.swf',
        'onUploadSuccess':function(file,data){
             console.log(file);
             console.log(JSON.parse(data));
             console.log(response);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:29:30.833

您不需要`fs.unlink`调用，因为`fs.rename`它将文件移动到正确的路径，而不是复制它，所以如果`fs.rename`成功，临时文件将已经消失。删除整个`fs.unlink`块，无论如何它都不会检查错误。然后，您需要确保在代码的每个可能路径中，您要么调用`next(err)`错误，要么调用`res.send`. 看起来这里有一些代码路径，您不会响应，只会让请求超时。进行这些更改，看看是否可以正常工作。

# windows-phone-7 - 如何录制音频 AMR 格式？

> ID：13372016
> 
> 赞同：1
> 
> 时间：2012-11-14T02:04:01.800
> 
> 标签：windows-phone-7, audio, microphone, amr

我正在创建一个 Windwows Phone 7 应用程序，它需要来自麦克风的音频应该以 AMR 格式存储。

我能够从麦克风捕捉 MemoryStream，但如何使用 AMR 编解码器保存该流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:27:27.530

恐怕没有可以直接使用的可用 amr 编码库。

似乎不可能将 c lib 翻译成 wp7 edtion。

如果你想压缩数据，你可以研究 wav 格式。降低音频采样率也可以压缩数据。

# objective-c - 我可以通过套接字发送 NSURLRequest 吗？

> ID：13372017
> 
> 赞同：1
> 
> 时间：2012-11-14T02:04:03.173
> 
> 标签：objective-c, cocoa, nsurl, nsurlrequest

我想获取一个 NSURLRequest 并将其转换为一些可以写入 socket() 的可用数据，而不是像 NSURLConnection 之类的东西。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:34:28.600

NO!

You can create a NSMutableURLRequest and provide that request with a HTTPBodyStream then create a NSURLConnection to send the request.

The HTTPBodyStream is an NSInputStream the request will read the body from. You can get it value from user, file or NSData.

# jquery - jQuery图像动画循环

> ID：13372018
> 
> 赞同：0
> 
> 时间：2012-11-14T02:04:07.227
> 
> 标签：jquery, html, css, animation, loops

对不起，但我是一个有代码的大菜鸟，我正试图弄清楚如何让云在天空中以随机间隔水平移动。这是一个链接：[https ://dl.dropbox.com/u/34829763/americasrole/index.html](https://dl.dropbox.com/u/34829763/americasrole/index.html)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>What's America's role in our world?</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <meta charset="utf-8">
    <script src="jquery-1.8.2.min.js"></script>
</head>
<body>
    <div id="background">
        <img class= "cloud" id="cloud1" src="cloud1.png"/>
        <img class= "cloud" id="cloud2" src="cloud1.png"/>
        <img class= "cloud" id="cloud3" src="cloud1.png"/>
        <img class= "cloud" id="cloud4" src="cloud1.png"/>
    </div>
    <div id="foreground">
        <img id="fg" src="foreground.png"/>
    </div>

<script>
$(document).ready(function() {
    var delay = 2000;
    var $cloud = $('.cloud');
    var numRand = Math.floor(Math.random()*2000)+9000;
    function runIt() {
        $cloud.animate({
            left: "+1100",
        }, numRand, function() {
            $cloud.removeAttr("style");
            runIt();
        });
    }

    runIt();
});

</script>
</body>
</html> 
```

CSS：

```
#background{
    background: url("background.png");
    width:1024px;
    height:768px;
}

#foreground{
    position: absolute;
    top:10px;
    left:10px;
    width:1024px;
    height:768px;
    z-index: 1000;
}

#fg{
    z-index: 10000;
}

#cloud1{
    position: absolute;
    left: 100px;
    top:10px;

}
#cloud2{
    position: absolute;
    left: 10px;
    top:150px;
    width:170px;
    height:99px;
}
#cloud3{
    position: absolute;
    left: -150px;
    top:250px;
}

#cloud4{
    position: absolute;
    left: 400px;
    top:100px;
    width:170px;
    height:99px;
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T02:15:13.763

如果您真的希望每朵云随机且单独地制作动画，那么您必须单独为每朵云制作动画，而不是将它们全部作为一组制作。实际上，您将在第一个动画完成后立即重新开始所有动画，并将它们全部保持在相同的时间表上。

改成这样：

```
$(document).ready(function() {

    function runIt(item$) {
        var numRand = Math.floor(Math.random()*2000)+9000;
        item$.animate({left: "+1100"}, numRand, function() {
            item$.css("left", "");   // set back to default
            runIt(item$);            // start again
        });
    }

    // start each cloud separately
    $('.cloud').each(function() {
        runIt($(this));
    });

}); 
```

这是一个工作版本，我调整了一些参数以使云离开右边缘，然后从左边缘进入：http: [//jsfiddle.net/jfriend00/rZRud/](http://jsfiddle.net/jfriend00/rZRud/)

# php - 用户仍在网站上时 PHP 会话到期

> ID：13372019
> 
> 赞同：2
> 
> 时间：2012-11-14T02:04:16.717
> 
> 标签：php, session

我是一名 PHP 新手，正在尝试了解会话的工作方式。我有一个关于 php 中会话行为的一般性问题。

所以我知道每次 session_start() 被调用时，垃圾收集器可能会以一定的概率被调用。所以我的第一个问题是，假设我的网站只有 100 个用户，并且 Web 服务器上的 session.save_path() 文件夹中存储了 2000 个会话。如果作为 100 个用户之一的用户 A 登录网站并调用 session_start()，那么用户 A 之前的会话之一被破坏还是属于所有用户的 2000 个会话之一被破坏？

我的第二个问题是，假设用户 A 在网站上停留了大约 30 分钟，并且“session.gc_maxlifetime”设置为 1440 秒，即 24 分钟，24 分钟后用户 A 的会话是否有可能被垃圾删除即使用户在网站上仍然活跃，收集器？

如果是这样，则每 24 分钟启动一个具有与先前删除的会话的所有相同信息的新会话，因为这必须是防止用户数据丢失的情况。

如果这些问题听起来非常初级，我深表歉意，但我对会话概念感到非常困惑，并希望澄清这个概念。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:42:36.090

PHP 的会话垃圾收集器以 session.gc_probability 除以 session.gc_divisor 定义的概率运行。默认情况下，这是 1/100，这意味着以 100 分之一的概率检查上述超时值。

这意味着每当启动一个新会话时，就有可能触发垃圾收集器。比 maxlifetime 更早的所有会话都将被删除

如果有人在该站点上处于活动状态，则此会话将永远不会被删除。在每次页面刷新时，实际会话将重置此会话的生命周期。只有未使用的会话将被删除。因此，如果用户只是在页面上闲置并且什么都不做，则可以删除此会话。他必须开始一个新的会话。

我希望这可以帮助您理解会话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:55:48.513

垃圾收集适用于所有会话，因为 PHP 不知道会话“所有权”；之前修改的所有会话对象都`time() - ini_get('session.gc_maxlifetime')`将被删除。

每当使用`session_start()`, 在请求结束时（隐式）或`session_write_close()`调用时（显式）访问特定会话对象时，它的修改时间（应该）得到更新。这意味着只要用户不断地偶尔加载页面，会话就不会被破坏。

顺便说一句，我谈论的是会话对象而不是文件，因为会话的物理存储可以使用`session_set_save_handler()`.

# javascript - 如何使这个 javascript 正则表达式匹配逗号

> ID：13372022
> 
> 赞同：-2
> 
> 时间：2012-11-14T02:05:10.777
> 
> 标签：javascript, regex

我有以下与字符串匹配的正则表达式对象。

```
var regexp = new RegExp(searchTerm, "ig");
 matchedSearchTerm = $(this).text().match(regexp); 
```

如果字符串包含在中间，我怎样才能使这种代码和平与逗号匹配（，）。它与空间相匹配。或者请建议是否有其他方法可以做到这一点

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:16:26.070

要制定可选规则，请使用“？” 特点：

```
var regexp = new RegExp(searchTerm, "(ig)(\,?)*");

```

# objective-c - Objective C 中的 Java 关键字 this

> ID：13372024
> 
> 赞同：0
> 
> 时间：2012-11-14T02:05:29.270
> 
> 标签：objective-c

第一天学习Objective-C，但有java背景。我想对参数使用与实例变量相同的变量名。在java中我们这样做

```
public class Person
{
    private String name;
    private String age;

    public void setName(String name)
    {
        this.name = name;
    }
    public void setAge(String age)
    {
        this.age = age;
    }
} 
```

到目前为止，在目标 c 中我有这个

```
@interface Person : NSObject
{
    int age;
    int name;
}
    -(void) setAge:(int) age;
    -(void) setName:(int) name;
    -(int) getAge;
    -(int) getName;
@end

@implementation Person
-(void) setName:(int) w
{
    weight = w;
}
-(void) setAge:(int) a
{
    age = a;
}
-(int) getName
{
    return name;
}
-(int) getAge
{
    return age;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:10:44.590

Objective-C 程序员不喜欢打字，所以我们这样做：

```
@interface Person : NSObject
@property(nonatomic, copy) NSString *name;
@property(nonatomic, assign) int age;
@end

@implementation Person
@end 
```

您可能想从阅读 Apple 的[Objective-C 编程语言介绍](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T02:15:16.837

在 Objective-C 中，您可以定义自己的访问器或使用`@syntehsize`自动为您创建它们。

在您想手动定义访问器的情况下，setter 声明如下：

```
- (void)setName:(NSString *)name {

    self.name = name;
}

- (void)setAge:(NSInteger)age {

    self.age = age;
} 
```

对于 getter，您只需将它们声明如下：

```
- (NSString *)name {

    return self.name;
}

- (NSInteger)age {

    return self.age;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:10:12.253

在ObjectiveC中，引用'this'的方式是'self'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T02:10:36.980

你在 ObjectiveC 中有这个，因为你使用的是 C 风格的变量。如果您将这些变量声明为[ObjectiveC](http://www.cocoacast.com/cocoacast/?q=node/103)属性并使用正确的综合指令：

```
@property (int) age;

@synthesize age; 
```

然后你可以通过`self.age`

```
self.age = age; 
```

在实现文件中。这将在内部调用将自动定义的`-(void)setAge:(int)age`方法和方法。`-(int) age`

最后，由于 ObjectiveC 对象只不过是指向 C 结构的指针，因此您可以通过跳过 ObjectiveC 来访问变量，使用语法来引用指向结构的指针的字段：`self->age = age`

# tsql - TSQL选择随机行与运行总数

> ID：13372037
> 
> 赞同：1
> 
> 时间：2012-11-14T02:08:39.370
> 
> 标签：tsql, random, sql-server-2012, cumulative-sum

TSQL，我使用的是 SQL 2012，但会使用以前版本的任何东西。我知道如何使用 NEWID() 从表中选择前 X 个随机行。另外，我知道如何使用多种方法、CTE 等选择运行总计。

但是，如何将这两个结果组合成一个查询？所以我想选择 3 条随机记录（并且不少于 3 条），其中运行总数不超过 15 条。无法围绕这个...

使用这个简单的表格和数据：

```
CREATE TABLE TblTest (
   id    int not null identity(1,1) primary key,
   value int not null
);

INSERT INTO TblTest (value) VALUES (4);
INSERT INTO TblTest (value) VALUES (3);
INSERT INTO TblTest (value) VALUES (5);
INSERT INTO TblTest (value) VALUES (6);
INSERT INTO TblTest (value) VALUES (6);
INSERT INTO TblTest (value) VALUES (5);
INSERT INTO TblTest (value) VALUES (6);
INSERT INTO TblTest (value) VALUES (5);
INSERT INTO TblTest (value) VALUES (4);
INSERT INTO TblTest (value) VALUES (7);
INSERT INTO TblTest (value) VALUES (7);
INSERT INTO TblTest (value) VALUES (6);
INSERT INTO TblTest (value) VALUES (5);
INSERT INTO TblTest (value) VALUES (4); 
```

我的尝试在下面，不确定在那里有 NEWID 是否有意义，有时它只返回 2 行，有时是 0，我希望它足够聪明，总是返回 3 行，如果可能的话，最接近 15 .. .:

```
select top(3) ourRandID,
       id, 
       value, 
       running_total
from (
    select NEWID() as ourRandID, 
            id,
           value,
           sum(value) over (order by NEWID()) as running_total
    from TblTest
) t
where running_total < 16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:46:47.957

试试这个：

```
 select     t.*
 from TblTest t
 join
 (
 select top (1) 
     t1.id [id1],t2.id [id2],t3.id [id3],
     t1.value[v1],t2.value [v2],t3.value [v3],
     t1.value+t2.value+t3.value [sum]
 from TblTest t1
 join TblTest t2 on (t1.id <> t2.id)
 join TblTest t3 on (t3.id <> t2.id and t3.id <> t1.id)
 where t1.value+t2.value+t3.value <= 15
 order by t1.value+t2.value+t3.value desc,newid() 
 ) [a] on (t.id=a.id1 or t.id=a.id2 or t.id=a.id3) 
```

# knockout.js - Knockoutjs 可观察绑定

> ID：13372039
> 
> 赞同：1
> 
> 时间：2012-11-14T02:08:57.263
> 
> 标签：knockout.js

在下面的代码中，我希望跨度文本在单击测试按钮后显示“已单击测试”。我可以看到 selectedItem.title 正在更新。为什么这个数据绑定不起作用？

[http://jsfiddle.net/TheMetalDog/C7k6d/](http://jsfiddle.net/TheMetalDog/C7k6d/)

```
<button data-bind="click: setItem">Test</button>
Item <span data-bind="text: $root.selectedItem.title"></span>
<pre data-bind="text: ko.toJSON($data, null, 2)"></pre> 
```

--

```
var viewModel = {};
viewModel.selectedItem = ko.observable();

viewModel.setItem = function() {
    viewModel.selectedItem({title: 'clicked'}); 
};

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:43:35.580

您在这里有两个错误：

1\. 您正在将绑定应用到模型并使用该`title`属性，该属性在您单击按钮之前不存在。如果你使用模型的属性，你需要在绑定之前定义它：

```
viewModel.selectedItem = ko.observable({title: null}); 
```

2\. 当你使用 observables 时，你需要把`()`它们放在后面，因为它不仅仅是一个变量，而是一个函数。所以你需要：

```
<span data-bind="text: $root.selectedItem().title"> 
```

你可以在这里玩它[http://jsfiddle.net/fMKPs/](http://jsfiddle.net/fMKPs/)

# css - onclick (onmousdown) 改变图片

> ID：13372045
> 
> 赞同：1
> 
> 时间：2012-11-14T02:10:08.447
> 
> 标签：css, onclick, buttonclick

目标：当有人点击我网站上的徽标时，通过将图像更改为具有更强内阴影的不同图像或具有几个像素的顶部填充的图像，它似乎被“推动”了。

我一直在这里阅读板，并在教程后尝试教程以使其正常工作，但仍然遇到问题。我现在要回到非常简单的代码......没有额外的CSS......没有javascript，但我发现我可能不得不使用其中一个或两个。现在（使用非常基本的 html，没有 CSS 或 JS）我发现当我的徽标被点击时，第二个图像出现，但在第一个图像后面。第一张图片并没有消失，点击后我只能看到测试图片在它后面发光（可能是因为我使用的是“背景图片”，但这是我能够看到任何变化的唯一方法）。

```
<div class="logo"><a href="index.html"><img src="images/logo.png" onmousedown="this.style.cssText='background-image:  url(images/logo-click.png)'" onmouseup="this.style.cssText='background-image:  url(images/logo.png)'" /></a></div> 
```

CSS 我可以处理，但我对 JS 的了解有限，所以如果这必须涉及 JS，请给我一个模板或教程。我找到了大量关于如何在 CSS 中从头开始创建这种效果的教程，但我不能用我的徽标来做到这一点，因为它是一个图像。

显示一个主图像似乎应该很简单，单击它可以显示不同的图像，然后松开单击以显示原始图像，没有花哨的平滑过渡效果。然而......我正在努力解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:13:51.793

如果您只想在单击鼠标时获得更改，您可以使用 CSS 的 :active 元素。
我尚未测试以下代码，但我认为它应该可以工作：

```
a {
    background-image:  url(images/logo.png)
}

a:active {
    background-image:  url(images/click.png)
} 
```

# sql - 我可以使用 INNER JOIN 代替 WHERE 吗？

> ID：13372056
> 
> 赞同：3
> 
> 时间：2012-11-14T02:12:09.923
> 
> 标签：sql, database, ms-access, inner-join, where

我有三张桌子。员工、项目（多对多）和员工项目。

我想检索每个员工的姓名及其各自的项目。

我试图使用这个查询：

```
SELECT Employee.name, Project.name 
FROM Employee, Project
INNER JOIN EmployeeProject ON Employee.empNo = EmployeeProject.empNo
INNER JOIN EmployeeProject ON Project.projectNo = EmployeeProject.projectNo; 
```

Access 给了我一个语法错误。然后我尝试了这个查询并且它有效：

```
SELECT Employee.name, Project.name 
FROM Employee, Project, EmployeeProject
WHERE Employee.empNo = EmployeeProject.empNo AND EmployeeProject.projectNo = Project.projectNo; 
```

我的问题是；可以使用 WHERE 链接表还是有更好的方法可以做到这一点，例如 INNER ...

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T02:13:57.267

使用显式`JOIN`s 时，不要在`FROM`子句中用逗号分隔表。显式的正确语法`JOIN`（优于使用该`WHERE`子句的较旧的隐式语法）是：

```
SELECT
  /* Probably will need to give these aliases since the're both called name */
  Employee.name AS empname,
  Project.name AS projname 
FROM 
  Employee
  /* Employee joins through EmployeeProject */
  INNER JOIN EmployeeProject ON Employee.empNo = EmployeeProject.empNo
  /* ...into Project */
  INNER JOIN Project ON Project.projectNo = EmployeeProject.projectNo; 
```

如果 Access 抱怨，它可能需要`()`围绕 join 子句（尽管我找不到指定它的文档）

```
FROM 
  (Employee
  INNER JOIN EmployeeProject ON Employee.empNo = EmployeeProject.empNo)
  INNER JOIN Project ON Project.projectNo = EmployeeProject.projectNo; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T02:37:10.430

1.  当您涉及超过 2 个表时，即使在 Access 2010 中，也需要**括号**。
2.  JOIN 中的表顺序很**重要**。您不能从 Employee -> Project（不相关）跳转到 EmployeeProject（同时加入）

## 这有效

```
SELECT Employee.name, Project.name 
FROM ((Employee
INNER JOIN EmployeeProject ON Employee.empNo = EmployeeProject.empNo)
INNER JOIN Project ON EmployeeProject.projectNo = Project.projectNo); 
```

注意：您可以将外括号`FROM`放在 和 final之间`;`，但更安全的做法是始终包含它。

如果您像这样嵌套它们，您**可以**嵌套连接 - 并保留表（员工、项目、员工项目）的顺序：

```
SELECT Employee.name, Project.name 
FROM Employee
INNER JOIN (Project 
            INNER JOIN EmployeeProject 
              ON EmployeeProject.projectNo = Project.projectNo)
  ON Employee.empNo = EmployeeProject.empNo; 
```

* * *

使用显式 JOIN 语法更加灵活，因为您现在可以显示员工，即使他们没有任何项目在 - 只需更改为**LEFT**连接。

```
SELECT Employee.name, Project.name 
FROM ((Employee
LEFT JOIN EmployeeProject ON Employee.empNo = EmployeeProject.empNo)
LEFT JOIN Project ON EmployeeProject.projectNo = Project.projectNo); 
```

注意：在数据表视图和表单中，生成的列被命名为“Employee.name”和“Project.name”，因此您不必明确地给它们起别名，尽管它可能很有用。

# c# - 通过 PublicKeyToken 防止外部程序集注入

> ID：13372057
> 
> 赞同：11
> 
> 时间：2012-11-14T02:12:18.527
> 
> 标签：c#, .net-4.0, assemblies, code-injection

我正在使用以下代码：

```
AppDomain.CurrentDomain.AssemblyLoad += (sender, args) =>
{
    var token = args.LoadedAssembly.GetName().GetPublicKeyToken();

    if (!IsValidToken(token))
    {
        Process.GetCurrentProcess().Kill();
    }
}; 
```

Where`IsValidToken()`将正在加载的程序集的公钥令牌与在我的应用程序中硬编码为字节数组的授权公钥令牌列表进行比较。

这是防止代码注入攻击的良好安全措施吗？此外，考虑到我稍后将使用 NetReactor 混淆我的应用程序，这是否必要？我试图防止任何“窥探”进入我的应用程序，不仅来自 Snoop 工具，还来自任何外部不受欢迎的来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T00:55:17.087

乍一看，我会说“不，这还不够”。

原因：

*   `CreateRemoteThread`攻击是直接的 win32 调用，没有托管代码跟踪会像这样触发检测器

*   我认为可以`AppDomain`在注入的 dll 中创建另一个，从而完全绕过此检查。然后可以从那里执行代码`AppDomain`，可能（我必须仔细考虑）通过回调调用“main `AppDomain`”`AppDomain.DoCallback`

*   `Process.Kill`删除应用程序是一种可怕的方式，尽管它是一种不可捕获的方式 - 也就是说，任何连接的人都无法阻止它（它`TerminateProcess`在引擎盖下使用 Win32）

我必须打破我的“注入器”工具来测试这些语句，如果我能记得我把代码放在哪里......

不管这些——你绝对想把这个程序集弄糊涂，特别是如果你打算在里面存储敏感位（事实上，如果你能提供帮助，我反对在程序集中存储**任何**敏感信息） - 你的预防方法绝对不会阻止任何反汇编程序，如 Reflector、ILSpy、dotPeek 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T21:49:56.300

如果您在运行时生成完整密钥（可能来自多个部分密钥），也会更安全。这可以静态检查您的二进制文件中的密钥。

# r - 查找矩阵的所有下标

> ID：13372059
> 
> 赞同：1
> 
> 时间：2012-11-14T02:12:20.860
> 
> 标签：r

有没有一种快速的方法来识别矩阵的所有下标，而与它的内容无关？

例如：

```
dat <- matrix(runif(20),nrow=5)

which(!is.na(dat),arr.ind=TRUE)
which(dat!="foo",arr.ind=TRUE) 
```

如果矩阵的任何值都不是 NA 或“foo”，则将起作用。但是有没有一种简单的方法可以为所有矩阵获取这些下标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:17:58.060

```
expand.grid(row = seq(nrow(dat)), col = seq(ncol(dat)))
#   row col
#1    1   1
#2    2   1
#3    3   1
#4    4   1
#5    5   1
#6    1   2
#7    2   2
#8    3   2
#9    4   2
#10   5   2
#11   1   3
#12   2   3
#13   3   3
#14   4   3
#15   5   3
#16   1   4
#17   2   4
#18   3   4
#19   4   4
#20   5   4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T02:19:00.610

不太确定所有下标是什么意思，但这将创建一个包含行和列索引的所有组合的 data.frame

```
expand.grid(sapply(dim(dat), seq_len)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T04:03:18.693

`expand.grid()`完全足够了，但这里有一个不错的选择：

```
 matrix(c(row(dat), col(dat)), ncol = 2) 
```

# jquery - 正则表达式匹配 @"*"

> ID：13372060
> 
> 赞同：2
> 
> 时间：2012-11-14T02:12:33.433
> 
> 标签：jquery, regex

我正在尝试在 jQuery 中使用正则表达式，但遇到了一些问题。这是我正在操作的字符串：

```
NSLog(@"It works!"); 
```

我希望正则表达式选择 @" 和 " 之间的所有内容，包括在内。这个正则表达式在 Reggy 中工作得很好，但是当放在我的 JavaScript 中时，它不起作用：

```
@".*" 
```

我的 jQuery 代码在本节中如下（可能是单引号问题吗？）：

```
var regex='@".*"';
$(".syntaxhighlight").highlight(regex,'string'); 
```

我知道问题不在于 highlight() 函数，因为它工作得很好：

```
$(".syntaxhighlight").highlight('nil','string'); 
```

那么，如何让这个正则表达式正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:16:45.543

是的。正则表达式以这种方式在 javascript 中定义：

```
/Your Expression/flags 
```

在你的情况下：

```
var regex = /@".*?"/; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T02:49:09.150

该`highlight()`功能在`String.indexOf()`内部使用，不支持正则表达式对象。

但是，它可以像这样重写：

```
$.fn.extend({
 highlight: function(pat) {
  function innerHighlight(node, pat) {
   var skip = 0;
   if (node.nodeType == 3) {
    var res;

    while (res = pat.exec(node.data)) {
     var spannode = document.createElement('span');
     spannode.className = 'highlight';
     var middlebit = node.splitText(res.index);
     var endbit = middlebit.splitText(res[0].length);
     var middleclone = middlebit.cloneNode(true);
     spannode.appendChild(middleclone);
     middlebit.parentNode.replaceChild(spannode, middlebit);
     skip = 1;
    }
   }
   else if (node.nodeType == 1 && node.childNodes && !/(script|style)/i.test(node.tagName)) {
    for (var i = 0; i < node.childNodes.length; ++i) {
     i += innerHighlight(node.childNodes[i], pat);
    }
   }
   return skip;
  }
  return this.length && pat ? this.each(function() {
   innerHighlight(this, pat);
  }) : this;
}
}); 
```

# pascal - 帕斯卡：常量数组的常量

> ID：13372062
> 
> 赞同：2
> 
> 时间：2012-11-14T02:12:53.080
> 
> 标签：pascal, freepascal

创建 const char 的 const char 数组时出现“非法表达式”错误。

```
Program Foo; (*excerpt*)
Const
  X : Char = 'X';
  O : Char = 'O';
  P : Array [1..2] of Char = (X,O);
Begin
  (*stuff*)
End. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:04:13.873

我是从没有帕斯卡的设备上输入的。所以我无法验证它，但这可能有效：

```
Const 
X = 'x';
O = 'o';
P : array[1..2] of char = (o,x); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T13:28:43.730

你也可以写

```
Const
 X : Char = 'X';
 O : Char = 'O';
 P : Array [1..2] of Char = ('X', 'O'); 
```

达到同样的效果

# javascript - JavaScript 中的复选框更改后更新图表

> ID：13372064
> 
> 赞同：1
> 
> 时间：2012-11-14T02:13:07.067
> 
> 标签：javascript, jquery, checkbox

晚上好，

我是 JavaScript 新手，非常感谢您的帮助。我正在尝试根据复选框的状态（选中或未选中）更新圈子统计信息。如果选中该复选框，则会使用 40% 的值创建圆形统计信息。如果不是，则其值为 100%。加载页面时一切正常，但当我选中/取消选中复选框时，圈子统计信息不会更新。

这是我的代码：

```
<script>

$(document).ready(function(){

    if ($('#checkHFX').is(':checked') == true) //This works
        {       
            $('.my-stat').cirque ({
            value: 40,
            total: 100,
            arcColor: '#FF9900',    
            label: 'percent',
            });
        }
        else    
        {
            $('.my-stat').cirque ({
            value: 100,
            total: 100,
            arcColor: '#FF9900',    
            label: 'percent',
            });
        }

    $('#checkHFX').change(function(){       
        if ($('#checkHFX').is(':checked') == true)
        {       
            alert("checked"); //Only the alert works 
            $('.my-stat').cirque ({
            value: 40,
            total: 100,
            arcColor: '#FF9900',    
            label: 'percent',
            });
        }
        else    
        {
            alert("unchecked");  //Only the alert works     
            $('.my-stat').cirque ({
            value: 100,
            total: 100,
            arcColor: '#FF9900',    
            label: 'percent',
            });
        }       
    }); 
}); 
</script> 
```

和HTML代码......

```
<div>
<input type="checkbox" id="checkHFX" name="checkHFX" value="1">HFX<br>
</div>

<div class="my-stat"></div> 
```

非常感谢您的帮助！

亲切的问候，

奥利维亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:52:59.063

逻辑可能更简洁，但看起来很合理。您确定 .cirque() 支持再次调用以更新值吗？

.cirque() 方法属于哪个库？

# php - AJAX 哈希提交表单

> ID：13372065
> 
> 赞同：4
> 
> 时间：2012-11-14T02:13:10.310
> 
> 标签：php, jquery, ajax

我很确定这与我的 core.js 文件和 ajax 哈希 URL 有关。但我正在尝试提交一个表单，但它并没有像我想要的那样提交。这是 core.js 文件：

```
// call init
$(init);

function init() {
    ajax_page_handler();
    page_load($(window.location).attr("hash")); // goto first page if #! is available
}

function page_load($href) {
    if($href != undefined && $href.substring(0, 2) == '#/') {
        // replace body the #content with loaded html
        $('#content').load($href.substring(2), function () {
            $('#content').hide().fadeIn('slow');
        });
    }
}

function ajax_page_handler() {
    $(window).bind('hashchange', function () {
        $href = $(window.location).attr("hash");
        page_load($href);
    });

    // this allow you to reload by clicking the same link
    $('a[href^="#/"]').live('click', function() {
        $curhref = $(window.location).attr("hash");
        $href = $(this).attr('href');
        if($curhref == $href) {
            page_load($href);
        }
    });
} 
```

现场观看结束于 www.krissales.com。表格在这里：[http ://www.krissales.com/#/media/5.Testing-1](http://www.krissales.com/#/media/5.Testing-1)

点击链接“发表评论”，然后您将输入信息，然后点击评论，但它只是刷新，但没有提交。

我为解决它而采取的步骤是在评论文件中，在表单操作字段中，我插入了标签`name="#content"`只是因为那是我要提交的 div 的名称。

原始内容位于[http://blog.krissales.com/article/7.Testing-3-man](http://blog.krissales.com/article/7.Testing-3-man)（您实际上可以在其中发表评论，它会起作用）

但显然它不起作用。你们知道我做错了什么吗？提前感谢您的帮助！

```
<script type="text/javascript">
    tinyMCE.init({
        mode : "textareas",
        theme : "simple"
    });
</script>
<form action="#/media/article.php" name="#content" method="POST">

    Name:
    <br />
    <input type="text" name="name" class="userpass"/>
    <br /><br />
    Comment:
    <br />
    <textarea id="elm1" name="comment" rows="7" cols="30" style="width: 500px;"> 
    </textarea>
    <br />
    <input type="submit" name="submit" value="Comment" class="button" />
    <input type="reset" name="submit" value="Reset" class="button" />

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:13:29.753

我注意到您没有在文件“comment.php”上设置 ajax 类型。

你需要...

```
 $.ajax({
            type: 'POST',
        url: 'comment_ajax.php',
        data: { form_name: name, form_comment: comment },
        success: function(data) {
            $('#new_comment').prepend(data);
                        // close modal box
            // do other shit
            // kthnxbai
        }
    }); 
```

如果未指定类型，则默认为不会发布数据的 GET 请求。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:09:04.540

您应该像这样更改表单的 action 属性：

```
<form action="script-handling-comment-data.php#/media/article.php" name="#content" method="POST"> 
```

目前，您将评论数据发送到[http://www.krissales.com/](http://www.krissales.com/)，我认为主页不处理评论发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:08:01.630

您似乎正在正确处理链接，但表单提交不是链接，您可能希望使用`$(form).submit(function(){ ... })`

在你的情况下，如果你给你的表格 id`form1`

```
$('#form1').submit(function(){
  var keyValues = $(this).serializeArray();
  var map = {};
  for(i in keyValues)
  {
    var value = keyValues.value;
    var name = keyValues.name;
    map[name] = value;
  }
  $.post($(this).attr('action'),map,function(){
    alert("Submitted values: " + $(this).serialize());
  });
  return false;
}) 
```

请参阅[`serializeArray`](http://api.jquery.com/serializeArray/)和[`$.post`](http://api.jquery.com/jQuery.post/)了解[`.submit`](http://api.jquery.com/submit/)更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T20:03:59.010

您当前的 core.js 处理 URL 哈希中的更改，并重新路由带有哈希的任何链接以将该相对路径加载到`#content`. 缺少的是重定向表单提交以执行相同操作的代码（将其添加到`ajax_page_handler`）：

```
 $('form').live('submit', function(e) {
    var $action = $(this).attr('action');

    if($action.substring(0, 2) == '#/') {
        // replace the #content with result of the form post
        $.ajax({
            url: $action.substring(2),
            type: $(this).attr('method'),
            data: $(this).serialize(),
            success: function(data) {
                $('#content').html(data);
                $('#content').hide().fadeIn('slow');
            }
        });
        // stop the real form submit from happening
        e.preventDefault();
    }
}); 
```

# django - ImportError：没有以我在 Readthedocs 上的代码命名的模块

> ID：13372068
> 
> 赞同：7
> 
> 时间：2012-11-14T02:13:22.493
> 
> 标签：django, python-sphinx, importerror, read-the-docs

我正在尝试将我的 Sphinx 文档与*ReadtheDocs*链接起来。我可以在本地构建文档，但是当我尝试让*ReadtheDocs*自动生成文档时，我收到以下错误：

狮身人面像标准错误

```
Making output directory...

Exception occurred:
  File "/var/build/user_builds/mousedb/checkouts/latest/Docs/source/conf.py", line 25, in <module>
    from mousedb import settings
ImportError: No module named mousedb
The full traceback has been saved in /tmp/sphinx-err-n_8fkR.log, if you want to report the issue to the developers.
Please also report this if it was a user error, so that a better error message can be provided next time.
Either send bugs to the mailing list at <http://groups.google.com/group/sphinx-dev/>,
or report them in the tracker at <http://bitbucket.org/birkenfeld/sphinx/issues/>. Thanks! 
```

我的项目名称是 mousedb。我不明白为什么我在自动构建中收到此导入错误，但在本地却没有。

**更新**

根据评论，我认为这是将我的设置文件导入同级`Docs`目录的问题。`settings.py`我应该根据and的位置进行相对导入，而不是进行绝对导入（就像我一直在做的那样）`conf.py`。

我想将我的设置文件导入到我`conf.py`的目录结构中：

```
-mousedb
--settings.py
-Docs
--source
---conf.py
--build 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T17:20:15.923

您最初谈到“我的代码的本地绝对路径”，现在谈到设置代码的相对路径。这可能意味着您没有使用`setup.py`文件，也没有使用 virtualenv。

在与 和 相同的目录中`Docs/`，`mousedb/`添加`setup.py`：

```
from setuptools import setup

setup(name='mousedb',
      version='0.1',
      description="My sample package",
      long_description="",
      author='TODO',
      author_email='todo@example.org',
      license='TODO',
      packages=['mousedb'],
      zip_safe=False,
      install_requires=[
          'Django',
          # 'Sphinx',
          # ^^^ Not sure if this is needed on readthedocs.org
          # 'something else?',
          ],
      ) 
```

在提交/推送/无论这个文件之后，您可以转到您的项目的 readthedocs 设置。启用“使用 virtualenv”设置。这将“使用 setup.py install 在 vi​​rtualenv 中安装您的项目”。

最终结果是 readthedocs 所做的所有与 python 相关的事情都将包含您的项目`sys.path`。

The probable cause of your problems is that you run sphinx from within your "root" directory on your local system, where python magically finds the `mousedb/` package in your current directory. But readthedocs apparently runs it from within the `Docs/` directory and thus cannot find `mousedb`.

# c# - PInvoke/互操作声明

> ID：13372074
> 
> 赞同：2
> 
> 时间：2012-11-14T02:15:13.000
> 
> 标签：c#, .net, interop, pinvoke

我正在尝试使用 Mono 中托管代码中的 libgsasl 库。我还有其他一些电话在工作，但这个特别的电话让我很适应。我不断收到我“尝试读取或写入受保护的内存。这通常表明其他内存已损坏”的异常。这显然不好。我相信我的问题可能出在双重间接 Gsasl_session 参数中，但我不确定。

本机函数定义如下：

> ```
> extern GSASL_API int gsasl_client_start (Gsasl * ctx, const char *mech,
>                      Gsasl_session ** sctx); 
> ```

我已将托管外部定义为：

> ```
> [DllImport("libgsasl-7.dll", CharSet = CharSet.Auto)]
> [SuppressUnmanagedCodeSecurity]
> [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
> public static extern int gsasl_client_start(
>     GsaslContext context,
>     string mechanism,
>     ref GsaslSession session); 
> ```

GsaslContext 和 GsaslSession 是继承自 SafeHandle 的类。

[你可以在文档](http://www.gnu.org/software/gsasl/doxygen/)中看到这个方法的使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:29:37.270

好的，不确定我刚刚做了什么，但显然我的问题在其他地方，就像向 SO 发布问题时一样。

我正在使用名为 gsasl_init 的不同函数（以前定义为 this）创建 GsaslContext。

> ```
>  [DllImport("libgsasl-7.dll", CharSet = CharSet.Auto)]
>     [SuppressUnmanagedCodeSecurity]
>     [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
>     public static extern int gsasl_init(ref GsaslContext context); 
> ```

当我将该方法调用更改为 out 而不是 ref 时，随后对 gsasl_client_start 的调用开始正常工作。除了我可能一直在双重分配内存然后为 gsasl_client_start 提供 GsaslContext 的不正确内存地址之外，我不确定有什么区别。无论如何，现在事情似乎正在发挥作用。如果有人对此有任何见解，请留下另一个答案，我会标记出来。

# jquery - 如何收集所有外部标签号

> ID：13372077
> 
> 赞同：1
> 
> 时间：2012-11-14T02:15:25.563
> 
> 标签：jquery

我想收集冠状外的数字——正确的方法是什么？

```
<body>
<div id="HQ"></div>    

<table class="table" border="2">
<tr>
<td>AAAA</td>
<td>
<span class="A"></span>
"6"
<span class="B"></span>
"4"
<span class="C"></span>
"5"
<span class="D"></span>
"5"
</td>
</tr>
</table>

<table class="table" border="2">
<tr>
<td>AAAA</td>
<td>
<span class="A"></span>
"9"
<span class="B"></span>
"4"
<span class="C"></span>
"2"
<span class="D"></span>
"2"
</td>
</tr>
</table>

<table class="table" border="2">
<tr>
<td>AAAA</td>
<td>
<span class="A"></span>
"7"
<span class="B"></span>
"4"
<span class="C"></span>
"5"
<span class="D"></span>
"1"
</td>
</tr>
</table>

</body> 
```

脚本：

```
<script>

$(function(){

var texts = $('td *').map(function() {
    if (this.nextSibling.nodeType == 3)
        return this.nextSibling.nodeValue;
});

var a = texts[0];
var b = texts[1];
var c = texts[2];
var d = texts[3];

A = Number(a)
B = Number(b)
C = Number(c)
D = Number(d)

$("#HQ").html(A);
});
</script> 
```

我想收集表格内的所有数字。

我只是想要`class="A"`。

```
<span class="A"></span>
 "6"

6 + 7 + 9 = 22 
```

尝试了上面的代码，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:48:42.637

此版本仅检索`A`类后的数字并输出等式

```
$(function() {
    var nums=[];
    var tot=0;

    $('td:has(.A)').each(function(){
        var $contents=$(this).contents();
        var numTxt=$contents.filter('.A')[0].nextSibling.nodeValue.replace(/"/g,'')
        var num=parseInt(numTxt,10)
       nums.push(numTxt);
        tot+=num
    });
   $('body').append('<br><br>'+ nums.join('+') +'='+tot) ;  

}); 
```

演示：http: [//jsfiddle.net/Mqat4/](http://jsfiddle.net/Mqat4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:18:11.053

如果您只想要“A”类的所有元素的文本，请使用：

```
$('.A').text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:28:28.073

您可以使用该`each`方法。

```
$(function() {
    var total = 0;
    $('td').find('span').each(function() {
       var n = this.nextSibling.nodeValue.replace(/"/g, '');
       total += parseInt(n, 10);
    });
    $('#HQ').text(total)
}); 
```

[http://jsfiddle.net/vDvnx/](http://jsfiddle.net/vDvnx/)

# javascript - 如何使用淡入/淡出更改 div 背景颜色？

> ID：13372080
> 
> 赞同：1
> 
> 时间：2012-11-14T02:15:41.107
> 
> 标签：javascript, jquery, fadein, background-color, fadeout

如何使用淡入/淡出更改 div 背景颜色，我只想淡化背景颜色，而不是背景图像，请给我一些有用的代码或解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T06:02:04.820

尽管[仅现代浏览器支持，](http://caniuse.com/css-transitions)但您也可以考虑使用[CSS 过渡](http://www.w3schools.com/css3/css3_transitions.asp)来实现相同的效果

HTML

```
<div class='foobar'></div> 
```

CSS

```
.foobar {
    /* transition properties */
    transition: background-color 2s;
    -moz-transition: background-color 2s;
    -webkit-transition: background-color 2s;
    -o-transition: background-color 2s;

    /* basic styling & initial background-color */
    background-color:maroon;
    width:100px;
    height:100px;
}

/* Change background color on mouse over */
.foobar:hover {
    background-color:blue;
} 
```

这里的工作示例，[http://jsfiddle.net/eRW57/14/](http://jsfiddle.net/eRW57/14/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:07:36.733

你不能只使用 jQuery 的淡入/淡出淡化元素的背景（颜色或其他）。

您可以做的是放置一个带有背景颜色的附加图层（DIV 等）并在其上淡入/淡出。

而不是这样的：

```
<div id="my-background"></div> 
```

使用这个结构：

```
<div id="container">
  <div id="my-background"></div>
</div> 
```

CSS

```
#container
{
 position:relative;
 width:200px;
 height:100px;
 background-image:url(my-background-image.jpg);
}
#my-background
{
 height:100%;
 width:100%;
 background-color:blue;
 position:absolute;
 z-index:99;
} 
```

然后使用jQuery的fadeIn/fadeOut方法

JS

```
jQuery("#my-background").fadeOut(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:07:52.650

```
<script>
$(document).ready(function(){
  $("p").toggle(function(){
    $("body").css("background-color","green");},
    function(){
    $("body").css("background-color","red");},
    function(){
    $("body").css("background-color","yellow");}
  );
});
</script> 
```

试试看..应该可以的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-15T12:14:20.247

有了这个，你可以淡出所有带有 id #my-background 的 div

```
var $div = $('#my-background');
  $div.each(function blank(){
  $(this).animate({'backgroundColor': '#fff'},2000);
}); 
```

# node.js - NodeJs 在 Dart 中请求回调

> ID：13372083
> 
> 赞同：0
> 
> 时间：2012-11-14T02:16:15.500
> 
> 标签：node.js, dart

我正在尝试将以下 Node.js 片段转换为 Dart。在我的转换中，只要有响应就会打印“返回的数据...”消息，这与 Node.js 版本不同，该版本会等到页面完成请求的 2 秒延迟。

节点.js

```
var http = require('http')    
function fetchPage() {
  console.log('fetching page');
  http.get({ host: 'trafficjamapp.herokuapp.com', path: '/?delay=2000' }, function(res) {
    console.log('data returned from requesting page');
  }).on('error', function(e) {
    console.log("There was an error" + e);
  });
} 
```

镖

```
import 'dart:io';
import 'dart:uri';

fetchPage() {
  print('fetching page');
  var client = new HttpClient();
  var uri = new Uri.fromComponents(scheme:'http', domain: 'trafficjamapp.herokuapp.com', path: '?delay=2000');
  var connection = client.getUrl(uri);

  connection.onRequest = (HttpClientRequest req) {
    req.outputStream.close();
  };

  connection.onResponse = (HttpClientResponse res){
    print('data returned from requesting page');
  };

  connection.onError = (e) => print('There was an error' ' $e');
} 
```

如何在 Dart 中实现与在 Node 中相同的延迟打印？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:11:18.680

您可以在`onResponse`回调的文档中找到它：

> 当收到响应的所有标头并准备好接收数据时，将调用回调。

所以它是这样工作的：

```
connection.onResponse = (res) {
  print('Headers received, can read the body now');
  var in = res.inputStream;

  in.onData = () {
    // this can be called multiple times
    print('Received data');
    var data = in.read();
    // do something with data, probably?
  };
  in.onClosed = () {
    // this is probably the event you are interested in
    print('No more data available');
  };
  in.onError = (e) {
    print('Error reading data: $e');
  };
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:51:27.313

你的 Dart 代码几乎是正确的，但是有一个错误。您应该使用`query`命名参数而不是`path`. 我真的不知道您的代码调用了哪个 Url，但响应有一个`400`状态代码。为了提高可读性，您还可以使用`Uri.fromString`构造函数。

此外，您可以省略您的`onRequest`设置，因为在`onRequest`未定义时执行相同的代码。

这是代码：

```
import 'dart:io';
import 'dart:uri';

main() {
  print('fetching page');
  //var uri = new Uri.fromString('http://trafficjamapp.herokuapp.com/?delay=2000');
  var uri = new Uri.fromComponents(scheme:'http',
      domain: 'trafficjamapp.herokuapp.com', query: 'delay=2000');
  var client = new HttpClient();
  var connection = client.getUrl(uri);
  connection.onResponse = (HttpClientResponse res){
    print('data returned from requesting page with status ${res.statusCode}');
  };
  connection.onError = (e) => print('There was an error' ' $e');
} 
```

# mysql - 我应该有一个数据库还是多个？

> ID：13372087
> 
> 赞同：0
> 
> 时间：2012-11-14T02:16:38.220
> 
> 标签：mysql, database-design

我想对设备进行多次测试并记录结果。

每次运行将包括

*   开始时间戳
*   结束时间戳
*   用户提供的测试运行的文本描述
*   来自各种测量设备的测量值的集合，每隔一秒进行一次

问题：我曾考虑为每个测试运行创建一个数据库（因为测量表将有多行特定于该运行，否则我将不得不添加一个额外的列作为索引）。

我是否正确使用多个数据库，还是有更好的方法，使用单个数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:19:36.697

如果你不得不问，答案总是一个。

如果您需要多个数据库，您就不会问这个问题，因为您会超越*认为*您需要多个数据库而*知道*自己需要。

您需要关注的是创建一个简单的模式，该模式可以处理您想要的内容并正确编入索引，以便快速查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T02:20:13.410

使用一个数据库。在您的测量表中，添加一个`run_id`指定特定运行的字段。

下面的示例 - 您的字段类型可能会有所不同，具体取决于您的需要。

```
CREATE TABLE IF NOT EXISTS measurements
(
    measurement_id INT NOT NULL AUTO_INCREMENT,
    run_id INT,
    start_time INT,
    stop_time INT,
    description VARCHAR(255),
    PRIMARY KEY (measurement_id)
);

CREATE TABLE IF NOT EXISTS runs
(
    run_id INT NOT NULL AUTO_INCREMENT,
    description VARCHAR(255),
    PRIMARY KEY (run_id)
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T02:20:53.877

如果您正在寻找建议，则需要使用单一数据库。就易用性而言，它将帮助您进行可扩展性和维护。使用多个数据库/模式将在后期引起头痛。但这只是一个建议。

# jquery - jQuery slideDown 每像素而不是每毫秒

> ID：13372090
> 
> 赞同：1
> 
> 时间：2012-11-14T02:16:47.450
> 
> 标签：jquery, animation, jquery-animate, css-transitions, slidedown

我们在为页面上的元素设置动画时使用[jQuery slideDown](http://api.jquery.com/slideDown/)函数。我们遇到的一个问题是，无论元素有多高，动画都需要设定时间。

如果元素高度为 100 像素，则动画看起来比元素高度为 1000 像素时慢很多，因为两个动画将在相同的时间内发生。

有没有办法以每秒像素（或一些类似的指标）测量元素的动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:21:10.083

您可以`.slideDown()`使用它的第一个参数设置持续时间，这是一个以毫秒为单位的数字`.slideDown(time)`。因此，如果您有一个设定的速度（每毫秒像素数）并将元素高度`.height()`除以它，那么这样的操作应该返回动画应该花费的时间。这样，在任何给定高度的给定元素中，函数将以相同的速度向下滚动。

# twitter-bootstrap - 导航栏中的两行，一列跨越两行

> ID：13372092
> 
> 赞同：39
> 
> 时间：2012-11-14T02:16:52.710
> 
> 标签：twitter-bootstrap

我已经尝试了所有示例代码，但由于某种原因，我无法执行以下操作：

```
+-------------------------------------------------------------------------------+
|               |                                        Login  [ search   ]    |
|  SITE LOGO    |---------------------------------------------------------------+
|               |                      Page 1  |  Page 2 |  Page 3 |  Page 4    |
+-------------------------------------------------------------------------------+ 
```

我觉得没有办法使这项工作。我试图这样做是徒劳的吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-14T03:44:41.657

这是可能的，但我认为你真的在推动 TBS 的极限/目的。使用您自己的标记可以大大简化在 TBS 中进行这项工作所需的 DIV 汤。

更新：有关我使用 Twitter Bootstrap 3 制作的此解决方案的复制情况，请参见下文。最初的问题和答案是针对 Bootstrap 2 的。

[小提琴示例](http://jsfiddle.net/technotarek/ePGa9/)

```
<div class="container">
    <div class="navbar">
        <div class="navbar-inner">

            <img src="http://placehold.it/70x70" class="span1" style="position:relative;top:10px">

            <div class="span10">
                <div class="row">
                    <div class="span2 offset5" style="text-align:right">
                        <div class="navbar-text">
                            <p><a href="#">Login</a></p>
                        </div>
                    </div>
                    <div class="span2 offset1">
                        <div class="pull-right">
                            <form class="navbar-form">
                                <div class="input-append">
                                    <input class="span2" id="appendedInputButtons" type="text">
                                    <button class="btn" type="button">Search</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="span10">
                        <ul class="nav pull-right">
                            <li><a href="#">Page 1</a></li>
                            <li class="divider-vertical"></li>
                            <li><a href="#">Page 2</a></li>
                            <li class="divider-vertical"></li>
                            <li><a href="#">Page 3</a></li>
                            <li class="divider-vertical"></li>
                            <li><a href="#">Page 4</a></li>
                        </ul>               
                    </div>
                </div>

            </div>

        </div>
    </div>
</div> 
```

推特引导 3 更新：

TBS3 导航栏的标记略有变化，脚手架也是如此。这是我的原始解决方案的两个复制品，一个与原始解决方案完全匹配，一个是变体。

精确复制 [http://jsfiddle.net/technotarek/t67Ms/](http://jsfiddle.net/technotarek/t67Ms/)

使用全宽导航栏复制 [http://jsfiddle.net/technotarek/HxvLS/](http://jsfiddle.net/technotarek/HxvLS/)

（提示，您可以通过删除紧跟在 nav 标记之后的 div.container 元素来调整第二次复制，以便所有内部元素跨越整个导航栏。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T18:44:38.333

您需要在标题中创建两个 div，一个左一个，一个右一个。然后在右边的div中，你需要再放两个div。

HTM 语言：

```
<header>
<div class="logo">
  Put logo here
</div>
<div class="right-site">
  <div class="login">
    Put login, and search bars here
  </div>
  <div class="navbar-header">
    Put navigation things here
  </div>
</div> 
```

CSS：

```
header {
  display: flex;
  flex-flow: row nowrap;
}

.navbar-header {
  display: flex;
  flex-flow: column nowrap;
} 
```

我希望我有所帮助：D

# c# - 进程锁定文件夹

> ID：13372094
> 
> 赞同：2
> 
> 时间：2012-11-14T02:17:00.500
> 
> 标签：c#, process

有很奇怪的情况。有2个应用：

1) C:\MyFolder1\First.exe

2) C:\MyFolder2\Second.exe

First.exe 运行 Second.exe 并退出。

```
Process.Start(@"C:\MyFolder2\Second.exe");

// And exit. 
```

Seconds.exe 等待几秒钟并尝试删除“C:\MyFolder1\”文件夹。

```
// Wait for 5 seconds - First.exe terminated by that time for 100%

Directory.Delete(@"C:\MyFolder1\", true); 
```

操作失败并显示“进程无法访问文件 'C:\MyFolder1\'，因为它正被另一个进程使用。” 它能够删除 First.exe 文件（实际上是文件夹中的所有文件），但不能删除文件夹本身。

有谁知道为什么该文件夹被第二个进程锁定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T02:28:29.573

一个进程有一个默认的工作目录。您使用 ProcessStartInfo.WorkingDirectory 设置其初始值。您不能猛拉该地板垫，它会一直锁定该目录，直到进程终止或使用 Environment.CurrentDirectory 更改其工作目录。Second.exe 的默认工作目录是 C:\MyFolder1，因为您没有设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:23:50.067

我不认为 First.exe 已停止。请检查进程树。（文件夹 1 被此进程锁定）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T04:58:21.123

使用 Process.WaitForExit 确保完成（并可能避免这 5 秒）

# xmlhttprequest - Fedex Web 服务 XML 错误

> ID：13372096
> 
> 赞同：0
> 
> 时间：2012-11-14T02:17:36.390
> 
> 标签：xmlhttprequest, xsd, fedex

我使用 EXPRESS 服务向 Fedex Webservices 发送 XML 请求以创建 COD 标签。以下 XML 请求适用于 GROUND 服务，但不适用于 EXPRESS。我得到以下信息，这是调试信息。封装级别到底在哪里？

确认发货时出错：2245（快递发货的包裹级别无法指定 COD）

```
--------------------------------------------------
Debug Information
--------------------------------------------------
debugMode = 1

--------------------------------------------------
XML Sent
--------------------------------------------------
<ns:ProcessShipmentRequest xmlns:ns="http://fedex.com/ws/ship/v10" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://fedex.com/ws/ship/v10 ShipService v10.xsd">
   <ns:WebAuthenticationDetail>
      <ns:UserCredential>
         <ns:Key>XXXX</ns:Key>
         <ns:Password>XXXX</ns:Password>
      </ns:UserCredential>
   </ns:WebAuthenticationDetail>
   <ns:ClientDetail>
      <ns:AccountNumber>XXXX</ns:AccountNumber>
      <ns:MeterNumber>XXXX</ns:MeterNumber>
   </ns:ClientDetail>
   <ns:TransactionDetail>
      <ns:CustomerTransactionId>CreatePendingRequest</ns:CustomerTransactionId>
   </ns:TransactionDetail>
   <ns:Version>
      <ns:ServiceId>ship</ns:ServiceId>
      <ns:Major>10</ns:Major>
      <ns:Intermediate>0</ns:Intermediate>
      <ns:Minor>0</ns:Minor>
   </ns:Version>
   <ns:RequestedShipment>
      <ns:ShipTimestamp>2012-11-13T18:59:09-07:00</ns:ShipTimestamp>
      <ns:DropoffType>REGULAR_PICKUP</ns:DropoffType>
      <ns:ServiceType>STANDARD_OVERNIGHT</ns:ServiceType>
      <ns:PackagingType>YOUR_PACKAGING</ns:PackagingType>
      <ns:Shipper>
         <ns:Contact>
            <ns:PersonName>John Doe</ns:PersonName>
            <ns:CompanyName>Company</ns:CompanyName>
            <ns:PhoneNumber>1123456789</ns:PhoneNumber>
         </ns:Contact>
         <ns:Address>
            <ns:StreetLines>1234 Street Name</ns:StreetLines>
            <ns:City>City</ns:City>
            <ns:StateOrProvinceCode>FL</ns:StateOrProvinceCode>
            <ns:PostalCode>12345</ns:PostalCode>
            <ns:CountryCode>US</ns:CountryCode>
         </ns:Address>
      </ns:Shipper>
      <ns:Recipient>
         <ns:Contact>
            <ns:PersonName>NAME</ns:PersonName>
            <ns:CompanyName>COMPANY</ns:CompanyName>
            <ns:PhoneNumber>0123456789</ns:PhoneNumber>
         </ns:Contact>
         <ns:Address>
            <ns:StreetLines>STE</ns:StreetLines>
            <ns:City>CITY NAME</ns:City>
            <ns:StateOrProvinceCode>FL</ns:StateOrProvinceCode>
            <ns:PostalCode>12345</ns:PostalCode>
            <ns:CountryCode>US</ns:CountryCode>
         </ns:Address>
      </ns:Recipient>
      <ns:ShippingChargesPayment>
         <ns:PaymentType>SENDER</ns:PaymentType>
         <ns:Payor>
            <ns:AccountNumber>XXXX</ns:AccountNumber>
            <ns:CountryCode>US</ns:CountryCode>
         </ns:Payor>
      </ns:ShippingChargesPayment>
      <ns:SpecialServicesRequested>
      </ns:SpecialServicesRequested>
      <ns:LabelSpecification>
         <ns:LabelFormatType>COMMON2D</ns:LabelFormatType>
         <ns:ImageType>PNG</ns:ImageType>
         <ns:LabelStockType>PAPER_8.5X11_TOP_HALF_LABEL</ns:LabelStockType>
      </ns:LabelSpecification>
      <ns:RateRequestTypes>LIST</ns:RateRequestTypes>
      <ns:PackageCount>1</ns:PackageCount>
      <ns:RequestedPackageLineItems>
         <ns:Weight>
            <ns:Units>LB</ns:Units>
            <ns:Value>1</ns:Value>
         </ns:Weight>
         <ns:Dimensions>
            <ns:Length>5</ns:Length>
            <ns:Width>5</ns:Width>
            <ns:Height>5</ns:Height>
            <ns:Units>IN</ns:Units>
         </ns:Dimensions>
         <ns:SpecialServicesRequested>
            <ns:SpecialServiceTypes>COD</ns:SpecialServiceTypes>
            <ns:CodDetail>
               <ns:CodCollectionAmount>
                  <ns:Currency>USD</ns:Currency>
                  <ns:Amount>115.00</ns:Amount>
               </ns:CodCollectionAmount>
               <ns:CollectionType>CASH</ns:CollectionType>
               <ns:ReferenceIndicator>TRACKING</ns:ReferenceIndicator>
            </ns:CodDetail>
         </ns:SpecialServicesRequested>
      </ns:RequestedPackageLineItems>
   </ns:RequestedShipment>
</ns:ProcessShipmentRequest>

--------------------------------------------------
XML Response
--------------------------------------------------
<?xml version="1.0" encoding="UTF-8"?>
<v10:ProcessShipmentReply xmlns:v10="http://fedex.com/ws/ship/v10"><v10:HighestSeverity xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ERROR</v10:HighestSeverity><v10:Notifications xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><v10:Severity>ERROR</v10:Severity><v10:Source>ship</v10:Source><v10:Code>2245</v10:Code><v10:Message>COD can not be specified at package level for Express Shipments</v10:Message><v10:LocalizedMessage>COD can not be specified at package level for Express Shipments</v10:LocalizedMessage></v10:Notifications><ns:TransactionDetail xmlns:ns="http://fedex.com/ws/ship/v10" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><ns:CustomerTransactionId>CreatePendingRequest</ns:CustomerTransactionId></ns:TransactionDetail><ns:Version xmlns:ns="http://fedex.com/ws/ship/v10" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><ns:ServiceId>ship</ns:ServiceId><ns:Major>10</ns:Major><ns:Intermediate>0</ns:Intermediate><ns:Minor>0</ns:Minor></ns:Version></v10:ProcessShipmentReply>

--------------------------------------------------
PHP Information
--------------------------------------------------
5.3.18

--------------------------------------------------
cURL Return Information
--------------------------------------------------
HTTP/1.1 100 Continue

HTTP/1.1 200 OK
Date: Wed, 14 Nov 2012 01:59:02 GMT
Server: Apache/2.2
Content-Length: 1167
x-wily-servlet: Clear appServerIp=204.135.252.191&agentName=ESB-servicebus-1&servletName=HttpTransportServlet&servletResponseTime=119&agentHost=qje20222&agentProcess=WebLogic
X-Powered-By: Servlet/2.5 JSP/2.1
x-wily-info: Clear guid=FCA41585CC87FCBF0C2A8683C9B05C6A
Vary: Accept-Encoding
Content-Type: text/xml; charset=utf-8

<?xml version="1.0" encoding="UTF-8"?>
<v10:ProcessShipmentReply xmlns:v10="http://fedex.com/ws/ship/v10"><v10:HighestSeverity xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ERROR</v10:HighestSeverity><v10:Notifications xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><v10:Severity>ERROR</v10:Severity><v10:Source>ship</v10:Source><v10:Code>2245</v10:Code><v10:Message>COD can not be specified at package level for Express Shipments</v10:Message><v10:LocalizedMessage>COD can not be specified at package level for Express Shipments</v10:LocalizedMessage></v10:Notifications><ns:TransactionDetail xmlns:ns="http://fedex.com/ws/ship/v10" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><ns:CustomerTransactionId>CreatePendingRequest</ns:CustomerTransactionId></ns:TransactionDetail><ns:Version xmlns:ns="http://fedex.com/ws/ship/v10" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><ns:ServiceId>ship</ns:ServiceId><ns:Major>10</ns:Major><ns:Intermediate>0</ns:Intermediate><ns:Minor>0</ns:Minor></ns:Version></v10:ProcessShipmentReply> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:09:15.060

您是否尝试使用不同的 CollectionType？现金可能不是 Express 的选项（仅适用于地面）。尝试其他方法之一，例如 ANY 或 GUARANTEED_FUNDS，看看是否能获得更好的结果。Fedex 可能会返回“不太有用”的错误消息，这些错误消息并不能真正为您指明正确的方向。（您可能还需要为 express 省略 ReferenceIndicator - 我认为这可能仅适用于 Ground）

# ember.js - ember.js 从对象数组生成链接并绑定操作

> ID：13372104
> 
> 赞同：1
> 
> 时间：2012-11-14T02:18:46.637
> 
> 标签：ember.js

我正在尝试从一组对象动态生成一些选项卡。每个对象都包含我想从视图中调用的操作名称。

这是一个例子：http: [//jsfiddle.net/arenoir/vDEKt/](http://jsfiddle.net/arenoir/vDEKt/)

在小提琴中，您将看到我是否使用 {{action 'name'}} 帮助器创建了一个链接它可以工作，但我希望能够将名称绑定到视图的 'content.name'

我对这一切都错了吗？有什么建议么？

这是代码（所以需要这个？）：

```
App = Ember.Application.create()

App.Router = Ember.Router.extend
  root: Ember.Route.extend
    goTab1: Em.Route.transitionTo('tab1')
    goTab2: Em.Route.transitionTo('tab2')
    goTab3: Em.Route.transitionTo('tab3')
  index: Ember.Route.extend
    route: '/'
    redirectsTo: 'tab1'
  tab1: Ember.Route.extend
    route: '/tab1'
    connectOutlets: (router) ->
      router.get('applicationController').set('selectedTab', 'tab1')
  tab2: Ember.Route.extend
    route: '/tab2'
    connectOutlets: (router) ->
      router.get('applicationController').set('selectedTab', 'tab2')
  tab3: Ember.Route.extend
    route: '/tab3'
    connectOutlets: (router)
      router.get('applicationController').set('selectedTab', 'tab3')

App.ApplicationController = Ember.Controller.extend
  primaryTabs: [
    Ember.Object.create({id: 'tab1', name: 'Tab1', action: 'goTab1'})
    Ember.Object.create({id: 'tab2', name: 'Tab2', action: 'goTab2'})
    Ember.Object.create({id: 'tab3', name: 'Tab3', action: 'goTab3'})
  ]

App.ApplicationView = Ember.View.extend
  templateName: 'application'

App.TabsView = Ember.CollectionView.extend
  tagName: 'ul'
  classNames: ['nav']
  selectedBinding: 'controller.selectedTab'
  contentBinding: 'controller.primaryTabs'

  itemViewClass: Ember.View.extend
    tagName: 'li'
    template: Ember.Handlebars.compile("<a {{action view.content.action}}>{{view.content.name}}</a>")
    classNameBindings: ['isActive:active']
    isActive: ( ->
      @get('content.id') is @get('parentView.selected')
    ).property('parentView.selected')

#and the template
<script type="text/x-handlebars" data-template-name="application">
  {{view App.TabsView}}
  <br>
  <a {{action goTab1 href=true}}>goTab1</a>
  <a {{action goTab2 href=true}}>goTab2</a>
  <a {{action goTab3 href=true}}>goTab3</a>
  {{outlet}}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T04:34:35.927

将选项卡对象传递给路由器，并根据选项卡确定路由器应转换到哪个状态。

例如：

```
 goTab: function(router, event) {
        router.transitionTo(event.context.get('id'));               
    } 
```

和

```
<a {{action goTab view.content}}>{{view.content.name}}</a> 
```

这是一个工作小提琴：http: [//jsfiddle.net/vDEKt/9/](http://jsfiddle.net/vDEKt/9/)

# c# - 匿名函数的 FunctionPointer 唯一性

> ID：13372109
> 
> 赞同：2
> 
> 时间：2012-11-14T02:19:06.357
> 
> 标签：c#, .net, anonymous-function

我可以确定`.Method.MethodHandle.GetFunctionPointer()`每个匿名函数都是唯一的吗？想做

```
public static T Get<T>(Func<T> getDataCallback) where T : class
{
    string cacheID = getDataCallback.Method.MethodHandle.GetFunctionPointer().ToString();
    var data = HttpRuntime.Cache.Get(cacheID) as T;
    if (data == null)
    {
        data = getDataCallback();
        HttpContext.Current.Cache.Insert(cacheID, data);
    }
    return data;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:39:17.073

我认为您的意思是匿名代表。不同的委托有不同的`d.Method.MethodHandle.GetFunctonPointer()`结果，但首先我们需要定义“不同的委托”。如果两个委托引用相同的方法，则它们被认为是相同的，例如：

```
Action a = new Action(MyMethod);
Action b = new Action(MyMethod);   
//a == b, that is, Delegate.Equals(a,b) is true 
```

匿名代表总是不同的，即使他们看起来一样：

```
Action a = delegate { MyMethod(); }; 
Action b = delegate { MyMethod(); }; 
```

所以**你的第一个问题的答案是肯定的**，但**你的缓存可能不会按预期工作**！如果您的应用程序池被回收，即使您的`getDataCallback`委托保持不变，FunctionPointer 的值也会发生变化。请注意这一点。

# opencv - 如何确定使用 openCV 绘制的椭圆的中心坐标？

> ID：13372113
> 
> 赞同：2
> 
> 时间：2012-11-14T02:20:05.673
> 
> 标签：opencv, drawing

在[这个程序](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/camshiftdemo.cpp?rev=4234)的第 151 行，它画了一个椭圆：

```
ellipse( image, trackBox, Scalar(0,0,255), 3, CV_AA ); 
```

如何计算第 151 行之后绘制的椭圆的中心坐标？

根据[这个页面](http://opencv.willowgarage.com/documentation/python/drawing_functions.html)，椭圆有一个“中心”属性，但我不知道如何访问它。

如果有人能指导我如何获得这个中心财产，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:59:05.503

代码中的“trackBox”是

> **旋转矩形**

类对象类型。所以你可以通过以下方式访问中心坐标

```
trackBox.center.x 
trackBox.center.y 
```

在第 151 行之后添加以下代码行并查看可视化中心

```
ellipse( image, trackBox, Scalar(0,0,255), 3, CV_AA );
circle(image,trackBox.center,5,Scalar(0,255,0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T06:51:11.433

您是否尝试过检查文档？

正如您在代码中看到的那样，椭圆是使用 RotatedRect 绘制的。在这里你有它：[http ://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=rotatedrect#RotatedRect](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=rotatedrect#RotatedRect)

**RotatedRect 有中心。所以就`yourRectName.center`**

# jquery - 通过ajax json将数组发送到php

> ID：13372114
> 
> 赞同：0
> 
> 时间：2012-11-14T02:20:06.863
> 
> 标签：jquery, ajax

我想通过 Ajax Json 向 php 发送一个数组，但是我做不到，当我发送它时，我在服务器端得到的只是一个 csv 字符串，

这是我创建数组的 jquery 代码

```
$('#guardar_curso').click(function(){
    var respuestas = new Array();

    var a = 0;
    var b = 0;
    var c = 0;

    var last_hidden = $('body').find('input[type="hidden"]').filter(':last');
    last_hidden = parseInt(last_hidden.val()) + 1;
    var count = 0;
    for(var a = 0; a<last_hidden; a++){
        for(var b = 0; b<4; b++){

            c = $('body').find('input[name="resp['+ a +']['+ b +']"]').val();
                if(c == ''){
                    respuestas[count] = c; //ignore this

                }else{
                    respuestas[count] = c; 
                }
            count++;
            }
        } 
```

接下来是我的 jquery 代码，我的 Ajax 调用是从提交按钮触发的：

```
 $.ajax({
                        type:"POST",
                        url:CI.base_url + 'admin/guardar_curso',
                        data: curso_data + '&respuestas=' + respuestas,
                        dataType:"json",
                        success:function(response){
                            $.each(response, function(key, value){
                                salida = salida + value + "\n";
                            }) 
```

curso_data 是我的序列化数据，“respuestas”是我的数组

这只是我代码的一部分，我希望它有助于说明我的观点

我能得到任何帮助，这让我发疯了好几个小时，我想用 php 中的 foreach 循环来循环该数组，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:29:32.153

您正在尝试连接一个无效的数组和文本。您可以将数组作为 JSON 字符串发送，并在收到时对其进行解码。

```
data: curso_data + '&respuestas=' + JSON.stringify(respuestas), 
```

然后在php中：

```
 /* convert json to php array*/
$respuestas= json_decode($_POST['respuestas']); 
```

php 中的一个简单测试是 `print_r( $respuestas)`在浏览器控制台中查看返回的数组

# java - 打包时如何更改log4j配置

> ID：13372117
> 
> 赞同：4
> 
> 时间：2012-11-14T02:20:35.067
> 
> 标签：java, maven, log4j

我有一个相当简单的 Java 应用程序，它作为可执行 JAR 文件分发给用户。为了跟踪使用情况并协助诊断，我想为应用程序添加日志记录功能，但是，从一次执行到下一次执行，我永远无法确定用户将在哪里运行此应用程序。

为了完成这项工作，我已将我的应用程序配置为使用 log4j 套接字附加程序 - 无论用户在何处运行此应用程序，消息都会发送到套接字并正确记录，这是完美的。

但是，我现在遇到的情况是，当我在本地运行时与将应用程序部署到生产环境时，我更愿意使用不同的 log4j 配置。在本地运行时（从我的 IDE，IntelliJ），出于以下几个原因，我更喜欢使用控制台附加程序：

1.  看看发生了什么是微不足道的。
2.  如果我在没有 Internet 连接的情况下进行开发，我不想因为无法连接而挂断电话。
3.  我不想将生产日志与我在开发过程中所做的事情混为一谈。

但是，当我打包应用程序并分发它时，我希望它使用套接字附加程序，而不是控制台附加程序。

有什么简单的方法可以完成我想要的吗？我正在使用 Maven 来构建我的应用程序，但我对它的熟练程度并不高。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:08:52.947

事实证明这比我最初预期的要简单——维克多的评论让我找到了正确的答案。我已经开始研究拥有多个配置文件（一个用于开发，一个用于生产），但后来意识到我真的不需要两个。在本地工作时，我并没有真正经历 Maven 构建过程——我只是在执行 Java 类。我唯一一次经历 Maven 构建过程是当我想打包我的应用程序以进行部署时。因此，我只是在我的 POM 文件中添加了一个使用 maven-antrun-plugin 的部分。我的最终代码最终看起来像这样：

文件：log4j.properties：

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=DEBUG, A1

# A1 is set to be a ConsoleAppender.
log4j.appender.A1=org.apache.log4j.ConsoleAppender

# A1 uses PatternLayout.
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

文件：log4j_production.properties

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=DEBUG, A2

log4j.appender.A2=org.apache.log4j.net.SocketAppender
log4j.appender.A2.remoteHost=my.server.com
log4j.appender.A2.port=6000
log4j.appender.A2.layout=org.apache.log4j.PatternLayout
log4j.appender.A2.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

文件：POM.xml

```
...
<build>
    <finalName>${project.artifactId}</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>run</goal>
                    </goals>
                    <configuration>
                        <tasks>
                            <delete file="${project.build.outputDirectory}/log4j.properties"/>
                            <copy file="src/main/resources/log4j_production.properties"
                                  toFile="${project.build.outputDirectory}/log4j.properties"/>
                        </tasks>
                    </configuration>
                </execution>
            </executions>
        </plugin>
... 
```

这似乎奏效了。当我在本地运行时，我加载了 log4j.properties，它为我提供了一个控制台附加程序。当我为生产发行版打包时，Maven 会将默认的 log4j.properties 文件替换为使用套接字附加程序的备用文件。

谢谢！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T15:54:11.907

这是解决您的问题的更简单方法...

将两个 log4j.properties 文件放在`src/main/resources`目录下，如下所示：-

```
src/main/resources
|- log4j.properties 
|- log4j_dev.properties 
```

`log4j.properties`包含生产配置，默认情况下，Log4J 会自动选择此文件，因为您使用的是标准文件名。

`log4j_dev.properties`包含开发配置。为确保 IntelliJ 在开发过程中选择此功能，您将使用`-Dlog4j.configuration=<configuration-file>`VM 选项覆盖日志配置。我附上了关于如何使用 IntelliJ 进行配置的屏幕截图：-

![在此处输入图像描述](../Images/f6b873b92a798e6f43a075875a5facc8.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T02:51:36.957

我强烈建议在运行时而不是构建时确定它。

例如，当您运行应用程序时，将`config/`目录放在类路径的开头，然后放在`log4j.xml`那里。当然，您仍然可以`log4.xml`在您的应用程序 JAR 中保留一个默认值，这样如果您在部署中不提供它，您的应用程序仍然可以运行。

# ios - 如何过滤字典的 NSMutableArray？

> ID：13372118
> 
> 赞同：1
> 
> 时间：2012-11-14T02:20:38.427
> 
> 标签：ios, dictionary, nsmutablearray, nsdictionary

我有一个可变数组，其中包含联系人字典

```
[
{
"name":""
"Email":""
type:"A"
},
"name":""
"Email":""
type:"B"
}
"name":""
"Email":""
type:"C"
}........100 contacts
] 
```

我想通过分段开关处理的 A、B 或 C 类型来过滤它们。我的问题是如何使用谓词来过滤这种类型的情况。

这是我的过滤实现

```
-(NSArray *)filtercontcts:(NSString *)filterParameter
{
    NSArray *filterContacts = [[NSArray alloc]init];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"type ==  %@)",filterParameter];

    filterContacts= [contacts filteredArrayUsingPredicate:predicate];

    return filterContacts;

} 
```

非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:31:52.293

创建谓词的正确方法是没有这样的右括号：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"type ==  %@", filterParameter]; 
```

您还泄漏了内存，因为您分配`filterContacts`了但是当您用 覆盖指针时丢失了对它的引用`filteredArrayUsingPredicate:`，只需删除`[[NSArray alloc]init];`即可摆脱泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T11:58:23.920

试试这样：-

```
NSArray *filterContacts = [[NSArray alloc]init];
NSPredicate *predicate=[NSPredicate predicateWithFormat:@"category type[cd] %@,filterParameter];
filterContacts=[contacts filteredArrayUsingPredicate:predicate]mutableCopy]; 
```

# forms - JSP javascript函数onclick到不同的jsp页面

> ID：13372119
> 
> 赞同：0
> 
> 时间：2012-11-14T02:20:45.357
> 
> 标签：forms, jsp, javascript

我有一个表单和 javascript 函数来打开 2.jsp 页面，但它一直给我

```
Message: Object doesn't support this property or method 
```

这是我的做法。我试图只放入重要的部分。

```
<form name = iForm action=1.jsp method=POST>
    <input type="button" value="Button2" name=button2 onclick="OnButton1()"/>
</form>

<script language="JavaScript">
    function OnButton1{
        document.iFrom.action = "2.jsp";
        document.iFrom.target = "_blank";
        document.iFrom.submit();
        return true;
}
< /script> 
```

我知道一种通过“窗口”打开的方法，但我想知道是否有这种方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:46:06.660

您没有在 JavaScript 函数名称后加上括号，并且在脚本中拼错了表单名称。

纠正这些错误，它应该可以按您的预期工作。

同样，目标属性确实适用于表单。

# c++ - 显式声明抽象基类

> ID：13372121
> 
> 赞同：2
> 
> 时间：2012-11-14T02:20:55.813
> 
> 标签：c++, abstract-class

有没有办法在 C++ 中将基类显式声明为抽象？

我知道我可以在类中创建一个纯虚函数，它将隐式地将一个类声明为抽象类。但是，我不想仅仅为了在派生类中定义而创建一个虚拟函数。

我还可以使构造函数受保护，这将阻止对象的实例化，但这实际上并没有将类标记为抽象类。

那么，有没有办法做到这一点？（我正在使用 C++11，如果这增加了一种方法来做到这一点，但我没有找到任何看起来正确的东西）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:22:42.530

您可以使析构函数成为纯虚拟的。因为你总是需要一个析构函数，所以没有额外的心理成本：

```
struct Foo
{
    virtual ~Foo() = 0;
};

inline Foo::~Foo() { } 
```

（你当然需要析构函数的实现，所以你必须提供一个外线。）

您仍然可以制作析构函数`protected`，这是遵循“使非叶类抽象”规则的好习惯。

例子：

```
struct Bar : Foo  { };

// Foo f;  // Error, Foo is abstract
Bar b;     // OK 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T02:30:16.637

我喜欢Kerrek的回答。这样类就不能被实例化，因此是抽象的。

但是，除非您扫描类的整个声明并看到析构函数是虚拟的，否则仍不清楚该类是抽象的。

我的另一个想法是，您可以使用`#define`. 这样，您可以执行以下操作：

```
abstract struct Foo {}; 
```

这与

```
struct Foo {}; 
```

我看到的问题是这不会强制类是抽象的，因此您可以使用宏来声明虚拟析构函数。就像是：

```
#define ABSTRACT_CLASS(class_name) \
  class class_name { \
    virtual ~class_name() = 0; // 
```

然后像这样使用它：

```
ABSTRACT_CLASS(Foo) {
  // class declaration
}; 
```

这将变成：

```
class foo {
  virtual ~class_name() = 0; // {
  // class declaration
}; 
```

免责声明：我的宏可能略有偏差。我不确定它是否真的会粘贴带有 ~ 的 class_name 和 () 触摸变量名。另外，我不确定自己是否会这样做，这不是最漂亮的解决方案，尤其是注释掉大括号，因为如果将其放在下一行，那将不起作用。但是您问如何将某些内容标记为抽象，我给了您！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:25:08.487

> 有没有办法在 C++ 中将基类显式声明为抽象？

不，那里没有。一个类只有在其中声明了至少一个抽象方法时才是抽象的。如果您不希望直接实例化您的基类，那么受保护的构造函数是一个不错的选择。

# list - 在 SML 的列表中查找最大元素

> ID：13372123
> 
> 赞同：2
> 
> 时间：2012-11-14T02:21:18.403
> 
> 标签：list, sml, fold

我正在尝试使用标准 ML 在列表中找到最大值。我需要使用给定的折叠功能：

```
 fun fold f [] base = base
   | fold f (x::xs) base = fold f xs (f x base); 
```

这是我到目前为止所拥有的：

```
fun max (x::xs) = fold (fn (a, b) => if a > b then a else 0) x (x::xs); 
```

我在那里有 0，因为如果列表为空，那么我需要返回 0；这只是我需要定义的另一个函数的一部分，但我正在努力处理折叠部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:29:00.220

在`fold`函数的定义中，您要求函数`f`必须以咖喱形式接受它的参数，即：`f 1 1` 而不是`f(1,1)`.

据我了解，那么您对`fold`函数的定义是正确的。因此，您需要对函数中的匿名函数进行适当的更改`max`。

在 SML 中，柯里化实际上只是语法糖。例如：

```
fun foo a b = a+b 
```

最终会变成（脱糖后）：

```
val rec foo = fn a => fn b => a+b 
```

还可以看出，这两个函数具有相同的类型：

```
- fun foo a b = a+b;
val foo = fn : int -> int -> int
- val rec foo = fn a => fn b => a+b;
val foo = fn : int -> int -> int 
```

因此，匿名函数必须在某种程度上沿着相同的路线定义。

您也将论点混合到`fold`. 在`max`函数的最后一部分，您以相反的顺序给出最后两个参数。

最后一个问题是您的匿名函数返回 0。这与您的匿名函数的不变量有关，并在某些情况下使其失败。例如：

```
max [1,4,65,7,6]; 
```

试着自己找出原因。

如果您确实*需要*`max`在输入列表为空的情况下返回 0 ，那么您应该对这种情况进行模式匹配。这也修复了关于“匹配非详尽”的警告，并且是正确的地方。

```
fun max [] =  0
  | max (x::xs) = fold (fn a => fn b => if a > b then a else b) (x::xs) x; 
```

# javascript - jQuery addClass 之后/之前

> ID：13372132
> 
> 赞同：0
> 
> 时间：2012-11-14T02:22:44.373
> 
> 标签：javascript, jquery

```
<div id="box"></div>
<div class="text"></div>?

$(document).ready(function () { 
$('#box').click(function () {
      $('.text').slideToggle('slow');
  });

});

#box{
height:40px;
width:100px;
background:red;
}

#box:hover{background:blue;}

#box:after{
content: "";
height: 10px;
position: absolute;
width: 0;
margin-top:40px;
margin-left:40px;
border: 10px solid transparent;
border-top-color: red;
}

#box:hover:after{

border-top-color: blue;
}

.text{

display:none;
height:40px;
width:100px;
background:#fd0;
margin-top:20px;
} 
```

[http://jsfiddle.net/zfQvD/16/](http://jsfiddle.net/zfQvD/16/)

是否可以使用 jQuery 添加样式`after`箭头？关闭时`text class`，删除`after`箭头类，如果`text class`显示，然后添加箭头？我试过了，但似乎不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:45:04.090

根据@elclanrs 评论，您不能使用 JS 添加伪元素。但是，您可以做的是在您的 CSS 中声明它们仅在父元素具有特定类时显示，然后使用 JS 切换该类，如下所示：

```
#box.expanded:after {
 content:'';
 height: 10px;
 position: absolute;
 width: 0;
 margin-top:40px;
 margin-left:40px;
 border: 10px solid transparent;
 border-top-color: red;
} 
```

您还必须在您的 JS 中添加一行，以便在单击该框时添加此类：

```
$('#box').click(function () {
  $(this).toggleClass('expanded');
  $('.text').slideToggle('slow');
}); 
```

请参阅此处的示例：http: [//jsfiddle.net/zfQvD/17/](http://jsfiddle.net/zfQvD/17/)

# magento - 如何保存集合以供以后在 Magento 中使用？

> ID：13372137
> 
> 赞同：2
> 
> 时间：2012-11-14T02:23:31.083
> 
> 标签：magento, cron, registry

我想在 Magento 中编写一个 cronjob，它根据某些参数加载产品集合并将其保存在我可以在 cms/page 中使用的某个地方。

我的第一种方法是使用 Magento 的注册表，但这不起作用，即一个简单的

```
Mage::register('label',$product_collection); 
```

...不起作用，因为在我的 PHTML 文件中的 Mage::registry 中似乎没有“标签”...

有人可以指出我正确的方向吗？这是正确的方法吗？如果是这样，如何使它工作；如果没有，怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T04:27:09.337

不幸的是，Mage::register 无法将您带到您想去的地方。Mage 注册表项保存在正在运行的 PHP 脚本的内存中，因此它的范围仅限于运行 PHP 代码的页面请求，因此不会在 cron 和您的 PHTML 文件之间共享。

为了完成您要查找的内容，您需要将集合缓存到持久存储，例如硬盘或 Memcache。您可能必须在缓存之前专门调用 load() 函数，如下所示：

```
<?php
// ...
// ... Somewhere in your cron script
$product_collection = Mage::getModel('catalog/product')->getCollection()
    ->addFieldToFilter('some_field', 'some_value');
$product_collection->load(); // Magento kind of "lazy-loads" its data, so
                             // without this, you might not save yourself
                             // from executing MySQL code in the PHTML

// Serialize the data so it can be saved to cache as a string
$cacheData = serialize($product_collection);

$cacheKey = 'some sort of unique cache key';

// Save the serialized collection to the cache (defined in app/etc/local.xml)
Mage::app()->getCacheInstance()->save($cacheData, $cacheKey); 
```

然后，在您的 PHTML 文件中尝试：

```
<?php
// ...
$cacheKey = 'same unique cache key set in the cron script';

// Load the collection from cache
$product_collection = Mage::app()->getCacheInstance()->load($cacheKey);

// I'm not sure if Magento will auto-unserialize your object, so if
// the cache gives us a string, then we will do it ourselves
if ( is_string($product_collection) ) {
    $product_collection = unserialize($product_collectoin);
}

// ... 
```

请参阅[http://www.magentocommerce.com/boards/viewthread/240836](http://www.magentocommerce.com/boards/viewthread/240836)

# xml - 我可以使用 XForms 要求用户创建一个任意长度的列表，然后收集每个列表项的属性吗？

> ID：13372138
> 
> 赞同：0
> 
> 时间：2012-11-14T02:23:39.823
> 
> 标签：xml, xforms, wxformbuilder

对于现场数据收集项目，有人可以提供一个关于我如何能够创建这样的表单的指针：

1.  首先，收集一个地点的人员名单。人数可能不定。
2.  一旦列表完成，然后为列表中的每个人收集年龄和性别以及其他几个固定/已知的属性。

如何创建一个循环，以便表单阅读器在上面的步骤 2 中迭代项目 1 中收集的每个项目。

一个小的 XML 片段将不胜感激。我被困在如何为第二个项目创建循环。

我打算将它与 Open Data Kit (ODK) 一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T19:25:55.933

因为列表的长度可以是任意的，处理这个问题的最好方法可能是有一个按钮或其他指示器，您可以通过它确定第一个循环应该终止，第二个循环应该开始。

其次，您应该小心地将 GUI 的职责与实际程序分开。GUI 应该非常笨拙，除了获取输入之外应该做的更多。

然后，您的实际程序（可能只是调用您的 GUI 的不同类）应该能够获取它需要的任何内容，并从/向 GUI 发送它想要显示的任何内容。

如果你想使用循环，如果有新的可用，你将有一个循环从你的 GUI 中获取一个名称（或任何你想用来识别单个人的名称）。然后，您让 GUI 告诉应用程序中断该循环（调用函数或设置值等的按钮），然后应用程序进入第二个循环。

不过，我推荐的是“保存”按钮。无需循环，只需设置一个事件处理程序，每次单击“保存”时调用类似“append_new_name_to_the_list(new_name)”的内容。然后有一个“保存”名称，另一个“保存”额外数据。您必须弄清楚如何确定哪个名称与哪个额外信息一起使用，但这可能就像从列表的开头开始并跟踪该位置一样简单。

显然，如果您可以一次收集所有信息，那会更容易，但我意识到这可能是不可取的。

# c# - Castle Windsor 使用 Typed Factory 创建后可以发布组件吗

> ID：13372142
> 
> 赞同：1
> 
> 时间：2012-11-14T02:24:16.593
> 
> 标签：c#, castle-windsor

我正在使用 Windsor 3.1.0 并`LifestyleTransient`使用[Typed Factory](http://docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)实例化一个组件。正如引用页面中所说，我必须释放从工厂获得的每个对象。但是我处于这样的场景中

```
class MyTypedFactory
{
    MyTransientCommand CreateCommand();
    void Release(MyTransientCommand command);
}

class MyTransientCommand
{
    public void Execute() { }
}

class ClassA
{
    public ClassB CommandPopulator { get; set; }

    public void Foo()
    {
        List<MyTransientCommand> commands = new List<MyTransientCommand>();

        CommandsPopulator.Commands = commands;

        for (int i=0; i<100; ++i)
        {
            CommandsPopulator.Bar();
        }

        foreach (MyTransientCommand command in commands)
        {
            command.Execute();
        }
    }
}

class ClassB
{
    public MyTypedFactory Factory { get; set; }

    List<MyTransientCommand> Commands { get; set; }

    public void Bar()
    {
        Commands.Add(Factory.CreateCommand());
    }
} 
```

这可能看起来过于复杂，但它说明了我的代码中的对象流。在这里，外部类 ( `ClassB`) 使用类型化工厂创建的命令填充`commands`队列。

当工厂不再需要它们时（在`Execute`循环之后）释放这些对象成为整个问题。我可以在循环中释放，但释放方法本身的异常是不安全的。

```
class ClassA
{
    public MyTypedFactory Factory { get; set; }

    ...

    public void Foo()
    {
        ...
        foreach (MyTransientCommand command in commands)
        {
            command.Execute();
        }

        foreach (MyTransientCommand command in commands)
        {
            Factory.Release(command);
        }
    }
} 
```

如果其中一个 Release 调用抛出其余对象将不会被释放并会造成内存泄漏（我知道这不应该发生，但我试图防止这种事情发生）。

是否可以`MyTransientCommand`在创建后立即发布`ClassB.Bar`？在方法返回之前，GC 不会释放它，`ClassA.Foo`因为它包含对命令对象集合的引用。

如果进行 WCF 客户端调用并且 WCF 客户端是使用 Windsor 设置的，`MyTransientCommand`是否可以发布？或者更一般地说，如果使用温莎提供的其他组件？`ClassB.Bar``MyTransientCommand.Execute``MyTransientCommand.Execute`

**PS**问题中的代码看起来是人为的和不自然的，确实如此。这是因为算法必须有副作用：在事务中更改数据库中的数据状态在某些情况下必须引发 WCF 调用。必须在事务完成后而不是在事务期间进行这些调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:30:48.740

通常我会依赖创建/注入对象的类来负责释放它，但它不应该导致以你描述的方式释放它的任何问题 - 你可以将发布代码放在`finally`.

```
foreach (var command in commands)
{
    try
    {
        command.Execute();
    }
    finally
    {
        Factory.Release(command);
    }
} 
```

为了扩展一点，Castle 将注入所有必要的依赖项（只要您的工厂设置正确）。从容器中释放对象只是释放该实例。如果您在方法中修改注入的`LifestyleSingleton`对象，您可能会遇到并发问题`Execute()`，但这与从容器中释放它没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:03:28.730

**不，在使用之前发布组件是不行的。**Windsor 跟踪嵌套组件的生命周期，因此释放根组件通常可能会释放它的子组件。而且我想避免使用状态可能无效的组件。

所以我最终采用了以下释放方式`commands`

```
class ClassA
{
    public MyTypedFactory Factory { get; set; }
    public ClassB CommandPopulator { get; set; }

    public void Foo()
    {
        List<MyTransientCommand> commands = new List<MyTransientCommand>();

        try
        {
            CommandsPopulator.Commands = commands;

            for (int i=0; i<100; ++i)
            {
                CommandsPopulator.Bar();
            }

            foreach (MyTransientCommand command in commands)
            {
                command.Execute();
            }
        }
        finally
        {
            foreach (MyTransientCommand command in commands)
            {
                try
                {
                    Factory.Release(command);
                }
                catch (Exception exception)
                {
                    Log(exception);
                }
            }
        }
    }
} 
```

这样我可以肯定，如果在使用`CommandsPopulator`或执行命令时发生异常，所有命令仍将被释放。此外，每个命令都在 try/catch 块中释放，以防止因`Release`打破循环而引发异常。

希望 Windsor 遵循 no-throw 语义来使用 Typed Factory 释放对象，否则发生异常的机会非常低。

# python - 重组字典键值对的更好方法？

> ID：13372146
> 
> 赞同：1
> 
> 时间：2012-11-14T02:24:56.900
> 
> 标签：python, dictionary

我从一个简单的 python 字典开始，如下所示：-

```
In [29]: date_dict
Out[29]: 
{'2003-06-24': 2,
 '2003-08-13': 1,
 '2003-08-19': 2,
 '2003-08-22': 1,
 '2003-08-24': 5} 
```

键是日期，值是整数。

我的目标是将这本字典中的数据重组为：-

```
{'datetime': ['2003-08-13',
  '2003-08-19',
  '2003-06-24',
  '2003-08-24',
  '2003-08-22'],
 'observations': [1, 2, 2, 5, 1]} 
```

`datetime`它维护了key持有的list和key持有的list之间的数据关系`observations`。

这是我完成此任务的解决方案：-

```
In [35]: new_dict
Out[35]: {'datetime': [], 'observations': []}

In [36]: for key, value in date_dict.iteritems():
   ....:     new_dict['datetime'].append(key)
   ....:     new_dict['observations'].append(value)

In [37]: new_dict
Out[37]: 
{'datetime': ['2003-08-13',
  '2003-08-19',
  '2003-06-24',
  '2003-08-24',
  '2003-08-22'],
 'observations': [1, 2, 2, 5, 1]} 
```

我的问题是 - 是否有替代方法（更好，如果更有效）这样做？

（请注意，保持两个列表之间的数据关系至关重要，即在原始 date_dict 中，“2003-08-24”对应于值“5”。数据重组后，'datetime 的第 3 个索引' 列表是“2003-08-24”，它正确对应于“观察列表”的第三个索引为“5”。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T02:31:58.737

也许：

```
new_dict = {'datetime': date_dict.keys(), 'observations': date_dict.values()} 
```

如果您需要订单，请尝试使用[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)而不是 dict：

> 返回一个 dict 子类的实例，支持常用的 dict 方法。OrderedDict 是一个 dict，它记住第一次插入键的顺序。如果新条目覆盖现有条目，则原始插入位置保持不变。删除条目并重新插入会将其移至末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T02:43:43.827

怎么样：

```
dates, observations = zip(*date_dict.items()) 
```

然后随心所欲地打包`dates`和`observations`列表。

您可以使用相同的结构进行排序：

```
dates, observations = zip(*sorted(date_dict.items())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:36:57.457

你确定你需要一本字典吗？我认为元组列表可以更好地满足您的需求：

```
observations = [('2003-08-13',1),...] 
```

# jquery - jQZoom：remove() 和 img src 更改后的内部缩放问题

> ID：13372147
> 
> 赞同：2
> 
> 时间：2012-11-14T02:24:59.693
> 
> 标签：jquery, magento, zooming, jqzoom

我有一个 magento 在线商店，我正在尝试自定义产品页面。

在页面上，我有带有 jqZoom 的主要产品图像，以及由 magento 生成的缩略图，以及更改主图像的 onmouseover 功能。

今天经过长时间的更改功能和代码后，我在 MacBook 上的两个浏览器中使一切正常，但在我测试的任何其他计算机上都存在问题。

在第一次加载时，第一张图片正在完美加载，并且缩放正在工作，但是一旦您将鼠标悬停并更改图像，缩放在大多数浏览器上就不再起作用了。

这是代码：

. . . . 在头部我添加了这个：

```
<script>
$('imgzoom').ready(function(){  
var options = {  
        zoomType: 'innerzoom',
        title:false,  
        lens:false,  
        preloadImages: true,  
        alwaysOn:false,  
        zoomWidth: 300,  
        zoomHeight: 400,  
        xOffset:10,  
        yOffset:0,  
        position:'left'  
        //...MORE OPTIONS  
};  
jQuery('.imgzoom').jqzoom(options);   
});  
</script>

<script>
function startzoom() {  
var options = {  
        zoomType: 'innerzoom',
        title:false,  
        lens:false,  
        preloadImages: true,  
        alwaysOn:false,  
        zoomWidth: 300,  
        zoomHeight: 400,  
        xOffset:10,  
        yOffset:0,  
        position:'left'  
        //...MORE OPTIONS  
};  
jQuery('.imgzoom').jqzoom(options);  
};  
</script></code> 
```

. . . . . 这是magento用来生成产品链接和大图的代码

```
<p class="product-image product-image-zoom">
<?php
    $_img = '<a href="'.$this->helper('catalog/image')->init($_product, 'image').'" class="imgzoom" rel="gal1" title="MYTITLE" id="imglink"><img width="380" name="img1" src="'.$this->helper('catalog/image')->init($_product, 'image').'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'" /></a>';
    $imagehelper = $_helper->productAttribute($_product, $_img, 'image');
    echo $imagehelper;
?>
</p> 
```

. . . . . 这是缩略图中的 foreach 循环，它进行了所有更改

```
 <?php
        ++$i;
    ?>
    <script>
        function update_img<?php echo $i; ?>()
        {
            //$.jqzoom.disable('.jqzoom')
            //jQuery('.imgzoom').disable('.imgzoom');  
            jQuery('.imgzoom').remove();
            jQuery('.product-image.product-image-zoom').append('<?php echo $imagehelper; ?>');
            img1.src =  "<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile()) ?>";
            jQuery('#imglink').attr('href', '<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile()) ?>');
            startzoom(); 
            //jQuery('#imgholdwrap').attr('style', 'width: 100%; height: 570px');
            return false;

        }
    </script>
       <a href="#" onclick="popWin('<?php echo $this->getGalleryUrl($_image) ?>', 'gallery', 'width=300,height=450,left=0,top=0,location=no,status=yes,scrollbars=yes,resizable=yes'); return false;" title="<?php echo $this->htmlEscape($_image->getLabel()) ?>"><img onmouseover="update_img<?php echo $i; ?>()" src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile()); ?>" width="66" height="100" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" /></a> 
```

. . . .

我认为的主要问题是，在我删除 jQzoom 并添加回来之间的某个地方，图片的高度没有正确传输，因此调用了函数，但是 jqZoom 生成的 & 高度为 0，如果您将代码检查器中的设置更改为某个 px 值，则缩放将起作用，但图片未正确剪切

这是网站上产品的链接：http: [//zeroinchapparel.com/index.php/men-short-sleeve/grand-experience.html](http://zeroinchapparel.com/index.php/men-short-sleeve/grand-experience.html)

ps 最终我需要将缩放图片显示为标准（在图片的右侧）但是，当我将设置设置为标准时，没有显示带有缩放图片的窗口，z-index 是否存在一些问题?

ps2。这是我第一次使用 javascript 或 jQuery，所以我是一个完整的 n00b！

更新：发现一些与 IE 不兼容的代码，很容易被替换

```
 img1.src =  "<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile()) ?>"; 
```

结果 IE 无法将新的 src 分配给 id "IMG1"，将其重写为：

```
document.getElementById('img1').src =  "<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile()) ?>"; 
```

某些版本的 Chrome 仍然存在问题，在 src 更改后鼠标悬停时不显示缩放图像...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:19:36.200

我使用了以下内容：

```
jQuery(document).ready(function(){
    // activate on mouseover since IE8/9 don't seem to fire it automatically.
    jQuery(".product-image").on('mouseover',function(){
        jQuery(".jqzoom").jqzoom(options);
    })
}); 
```

随着：

```
jQuery(document).ready(function(){
    jQuery(".thumbnail").click(function(){
        var smallUrl = jQuery(this).attr('data-img-small');
        var bigUrl = jQuery(this).attr('data-img-big');
        // Remove the old/default image. 
        jQuery(".jqzoom").remove();
        // Add the desired images back in from the thumbnails
        jQuery(".pad-image").append('<a href="'+bigUrl+'" class="jqzoom"><img src="'+smallUrl+'"/></a>');
        // Turn it off, wait for next `mouseover`.
        jQuery(".jqzoom").off();
    });
}) 
```

这似乎在其他浏览器上运行良好。

我将`data-img-small`和`data-img-big`属性设置为缩略图，`display: none;`在需要的地方使用，我还没有真正看到任何不良行为。

# opengl - OpenGL交错索引数组

> ID：13372149
> 
> 赞同：3
> 
> 时间：2012-11-14T02:25:04.607
> 
> 标签：opengl, optimization, 3d, vbo

我正在用 C++ 编写一个类来处理绘制 3D 模型（即三角形网格），我想知道如何最好地组织我的数据缓冲区。

到目前为止，这是我所知道的：

*   使用**交错数组**可以加快代码速度。它利用空间局部性并增加缓存命中。您可以通过将顶点组织到`struct`s 中来实现这一点，其中每个顶点都`struct`包含位置/法线/texcoord/等。该顶点的信息。

*   使用**索引数组**通过存储每个不同的顶点/法线/texcoord/等来减少内存消耗。仅一次，然后通过对这些数组的引用来定义人脸，而不是为每个人脸冗余地指定所有信息。你也可以*用*一个索引来实现这个`struct`到顶点属性列表中。

**我的问题：**我应该如何最好地利用这两者？有可能两者都做吗？我听说两者都应该尽可能地使用它们，但没有发现任何关于同时使用它们或两者兼而有之的东西。

**我最初的解决方案：**我打算实现一个结构，该结构在数据数组中具有索引，并将这些结构的数组以及数据数组作为 VBO 传递，基本上将两者结合起来。

我在正确的轨道上吗？有一个更好的方法吗？我应该/不应该做什么？有什么我似乎不知道会影响这个决定的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T07:25:22.877

使用交错数组和索引并不真正相关。可以同时做这两件事，因为它们之间并没有太大的关系。

如果您想将 VTNVTNVTN...（顶点、纹理、法线）等顶点打包在单个缓冲区中，或者将 VVV、TTT、NNN 打包在单独的缓冲区中，则是否使用交错数组只是一种选择。

如果您有足够的重复顶点来证明使用索引缓冲区是合理的，那么使用索引只是一个决定。在做出这个决定时，是否交错顶点几乎无关紧要。

> 我最初的解决方案：我打算实现一个结构，该结构在数据数组中具有索引，并将这些结构的数组以及数据数组作为 VBO 传递，基本上将两者结合起来。

这是非法的。请注意，您没有**索引**，您只能获得**一个**索引。您不能在采样 texcoord #1 的同时采样顶点 #0。您提供的单个索引是**所有**缓冲区的索引。

我怀疑这就是你最初感到困惑的原因，因为你认为你可以有多个索引。

# excel - 通过引用列表查找两列之间的匹配并将结果放入新列中

> ID：13372152
> 
> 赞同：0
> 
> 时间：2012-11-14T02:25:45.920
> 
> 标签：excel, excel-2010, vlookup

我有两列（P 列和 Q 列），其中包含公司列表。

在 P 和 Q 列的公司列表中，有一些公司被称为“全球公司”。

我还有一份“全球公司”的名单，我是通过电子邮件（不是 Excel 格式）获得的。在那封电子邮件中，列出了大约 85 家公司。

“全球公司”列表中的公司名称以及 P 列和 Q 列中的公司名称不一致。例如，有写成“Jane **and** Frank”的公司和写成“Jane **&** Frank”的同一公司。另一个例子是“H Tech Japan”，也有“H Tech UK”，但都是同一家公司。

如何制作excel可以在P列和Q列之间识别哪个是“全球公司”（通过参考我放置“全球公司”列表的位置；可能在同一张表的列或其他地方）并放置结果列 R 中的那个“全球公司”（Q 列旁边的一个新列）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T17:17:14.557

有一种方法，但并不容易......

1) 首先，将 P 和 Q 列的所有内容复制并粘贴到一个新工作表中，一个在另一个之下，这样它就变成了一个带有公司名称的列。

2) 在功能区数据上，选择删除重复项，然后选择确定。

3) 按字母顺序对列进行排序。从这里，您有两个选择：

3a) 如果您的列表大小可控，您可以手动完成任务。我们的想法是将此列（例如 A）复制到 B 列，并手动修复名称，使它们与模式匹配（在本例中为 85 项列表）。你会有类似的东西：

```
 A                   B
H Tech Japan      H Tech Japan
H Tech Japón      H Tech Japan
H Tech UK         H Tech Japan
H Tech jp         H Tech Japan
Jane & Frank      Jane & Frank
Jane et Frank     Jane & Frank
Jane and Frank    Jane & Frank
Jane y frank      Jane & Frank
Jane & FRaNK      Jane & Frank 
```

3B) 现在，如果列表大小无法手动执行某项操作，您可以使用名为 Fuzzy Lookup 的 Excel 加载项在合理范围内自动执行该过程（我会说 70% 或更多的匹配项是准确的）；你可以在微软上下载：

[http://www.microsoft.com/en-us/download/details.aspx?id=15011](http://www.microsoft.com/en-us/download/details.aspx?id=15011)

它做的事情几乎相同：使用模糊算法，匹配相似文本序列的模式，并返回一列匹配项。有很多 YouTube 视频解释了如何使用 Excel 的模糊查找，您“浪费”学习它的时间是完全值得的。

请注意，即使使用此程序，检查匹配项并手动更正未找到的项目或不匹配项始终是最佳实践，即使它们很少。

4）通过一种或另一种方式，您现在应该有一个列，其中包含来自原始列 P 和 Q（新工作表中的 A 列）的输入，以及它旁边的正确对应项（B 列）。现在，回到原来的表格：

*   在 P 旁边打开一个新列

*   使用 Vlookup 在更正后的列表中搜索 P 上的值 [=VLOOKUP(P2;[the list range];2;0)]

*   双击单元格 Q2 右下角的黑色小标记，将公式展开到列的最后一项。

*   现在应该选择公式范围。如果没有，请选择它（例如，Q2 到 Q[最后一行]），使用 CTRL + C 复制，使用 ALT + CV V 粘贴为值。再次选择范围，将其剪切并粘贴到单元格 P2 中（替换旧值）。

对列 Q 执行相同的过程。

5) 将 85 项列表放在另一张表中，创建两个新列（例如，IsGlobal_P 和 IsGlobal_Q）并粘贴以下公式，如果它是全局的，则返回“是”，如果不是，则返回“否”：

```
=IF(ISERROR(MATCH(P2;Sheet2!$A$1:$B$300;0));"No";"Yes") (for variable IsGlobal_P)

=IF(ISERROR(MATCH(Q2;Sheet2!$A$1:$B$300;0));"No";"Yes") (for variable IsGlobal_Q) 
```

现在您已经确定了全球公司！

希望能帮助到你...

# sql - 在关系数据库中是否为 null

> ID：13372153
> 
> 赞同：2
> 
> 时间：2012-11-14T02:25:47.660
> 
> 标签：sql, null, relational-database

有人告诉我 null 在关系数据库中是邪恶的，这是真的还是只是主观的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T22:54:59.967

我不会说它们是邪恶的，但总的来说是的，如果没有空值，数据管理世界会/会更好。我们今天所知道的 Null 是 SQL 的一个特性，而不是关系模型本身的特性。多年来，将空值引入数据库系统以及由此产生的错误必然使该行业损失了数百万美元。

[在这个视频](http://www.youtube.com/watch?v=kU-MXf2TsPE)中，我不能说它比 Chris Date 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T21:51:05.347

**回答：**

我相信黑白答案......是的，关系数据库中的 Null 值很糟糕。一些人（包括高级 DBA）会争辩说，一些 NULL 值对于这个和其他来说是可以的，但这就像说储气罐中的一些水是可以的。是的，从技术上讲，一辆汽车仍然可以运行，尽管水箱里有一些水，但如果可以的话，你不会避免它吗？数据库中的 NULL 值越多，您为报告编写的 SQL 就越多。

如果数据是可选的，那么业务模型显然“不需要”它，因此您最好将其排除在外或强制执行它以便必须捕获它。

**推荐**

对于寻找此问题和类似问题答案的个人，我不推荐 [《凡人数据库设计：](https://rads.stackoverflow.com/amzn/click/com/0201752840)足够强大的第二版》。它是由一位软件架构师推荐给我的，我还没有遇到任何推荐其他东西的人。为了以防万一，我实际上买了两本。

还有一个更新的《凡人数据库设计》：同一作者的[第三版。](https://rads.stackoverflow.com/amzn/click/com/0321884493)我还没有买这个，所以我不能说更好或更坏。

 ****个人注意：**就本问答“主要基于意见”而言，请记住，没有相反逻辑证据的意见根本不是意见——这是事实。如果另一个 SSRS 或 Crystal Reports 分析师/开发人员来到这里并说“NULL 值根本没有问题”，那么我将删除我的答案。**

# jquery - Facebook Like 按钮显示所有 Facebook 页面的 0 个喜欢

> ID：13372154
> 
> 赞同：8
> 
> 时间：2012-11-14T02:25:49.843
> 
> 标签：jquery, facebook, facebook-graph-api, facebook-like

更新：所以这很大。如果您尝试使用“赞”按钮链接到任何 Facebook 页面，则它不起作用。尝试访问 Facebook 之类的创建页面 (http://developers.facebook.com/docs/reference/plugins/like/) 并输入任何 facebook 之类页面的 URL（如 Stackoverflow 的： http: [//www.facebook.com /堆栈溢出页](http://www.facebook.com/stackoverflowpage)）。

这段代码在今天早些时候运行良好，现在我完全不知道它为什么停止工作。点赞按钮加载，但您不能点赞或发送消息，点赞数为 0（应该在 350 左右）。

这是jsfiddle。这很简单：http: [//jsfiddle.net/rqR6C/](http://jsfiddle.net/rqR6C/)

每隔一段时间，并且仅在 Google Chrome 的控制台中，我就会收到一个错误。我发现其他一些人遇到了同样的错误消息，他们也说它是间歇性的。这是错误：

```
The frame requesting access set 'document.domain' to 'facebook.com', but the frame being accessed did not. Both must set 'document.domain' to the same value to allow access. 
```

编码：

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
    // Init the SDK upon load
    window.fbAsyncInit = function() {
        FB.init({
        appId      : '464723870207650', // App ID
        channelUrl : '//'+window.location.hostname+'/channel.php', // Path to your Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true,  // parse XFBML
        frictionlessRequests: true
        });
    }

    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));
</script>
<div class="fb-like" data-href="http://facebook.com/pages/Grouptonescom/160798537354204" data-send="true" data-layout="button_count" data-width="180" data-show-faces="false"></div>​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T03:44:05.947

### 更新：一位在 Facebook 工作的朋友确认这是一个错误，现在它刚刚被修复。以下是星巴克页面的截图，供后人参考：

![Starbucks.com 有 0 个 FB 赞](../Images/d125af9ebb8125dbb01533409e1178d7.png)

* * *

零赞的原因是将`fb:like`href 设置为您的 Facebook 页面。这是一个**错误**，因为[该插件的 Facebook 文档正式声明](https://developers.facebook.com/docs/reference/plugins/like/)：

> ## 我可以将“赞”按钮链接到我的 Facebook 页面吗？
> 
> 是的。`href`只需在按钮的参数中指定您的 Facebook 页面的 URL 。

其他人在 SO 上注意到了这一点 -[将您的 Facebook 粉丝页面 URL 添加到 LIKE 按钮不再起作用？](http://facebook.stackoverflow.com/questions/13372287/adding-your-facebook-fan-page-url-to-the-like-button-doesnt-work-anymore)

Facebook[最近发布了关于 Like 迁移](https://developers.facebook.com/docs/reference/plugins/like/migration/)的公告（2011 年 11 月 7 日），所以看起来他们在这个过程中破坏了一些东西。

我添加了`<meta property="fb:app_id" content="..." />`一行，其中应用程序 ID 是从[https://graph.facebook.com/](https://graph.facebook.com/)提取的（但不确定这是否正确）。没有帮助。仍然无法指向我们的粉丝页面。

试图向 Facebook 报告这个问题是徒劳的。已知[问题页面](https://www.facebook.com/KnownIssues)似乎已基本废弃，但在“告诉我们更多”下有一个[Facebook 业务页面的联系表。](https://www.facebook.com/help.php/?page=909)我建议我们尽可能多地使用该表格来报告这个问题。这是我的报告：

> 自 11 月 7 日开始迁移 like 插件以来，将 Like 按钮链接到 Facebook 页面将显示该页面的点赞数为零。示例包括[http://fundersandfounders.com/](http://fundersandfounders.com/)（链接到[https://www.facebook.com/fundersandfounders](https://www.facebook.com/fundersandfounders)有 17,000 个赞）。

# r - 如何测试多个条件？

> ID：13372158
> 
> 赞同：2
> 
> 时间：2012-11-14T02:26:17.393
> 
> 标签：r, if-statement, boolean

假设我有一个变量`y`和一个变量`i`。

```
y<- c(TRUE, TRUE, TRUE)
i<- 0 
```

假设我想为**每个**布尔条件测试以下 if 语句`y`：

```
if (y) {
i<-1
} 
```

我该怎么做？也就是说，我想`i = 1`如果**每个**布尔条件`y`都是`TRUE`.

如果`y<- c(TRUE, FALSE,TRUE)`，那么我希望 if 语句评估为`FALSE`和`i=0`。有谁知道我会怎么做？目前我收到此警告消息：

```
Warning message:
In if (y) { :
  the condition has length > 1 and only the first element will be used. 
```

我将如何测试`y`每个布尔条件的变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:45:17.237

详细说明@Dason 的答案， `all()` `any()` `sum()`并且`which()`在使用逻辑向量时非常有用

例子：

```
 vec1 <- c(T, T, F, T, F)

>     all(vec1)   # Are all elements True
      [1] FALSE

>     any(vec1)   # Are any True
      [1] TRUE

>     sum(vec1)   # How many are True
      [1] 3

>     which(vec1) # Which elements (by index) are True
      [1] 1 2 4

>     which(!vec1) # Which elements (by index) are False
      [1] 3 5 
```

* * *

示例 2：

```
vec2 <- c(T, T, T, T, T)

all(vec2)     # TRUE
any(vec2)     # TRUE
sum(vec2)     # 5
which(vec2)   # 1 2 3 4 5
which(!vec2)  # integer(0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T02:28:31.400

您正在寻找该`all`功能。

```
> y <- c(T, T, T)
> all(y)
[1] TRUE
> y <- c(T, T, F)
> all(y)
[1] FALSE 
```

# security - 访问控制迫使我有固定的路线

> ID：13372160
> 
> 赞同：1
> 
> 时间：2012-11-14T02:26:25.760
> 
> 标签：security, symfony, routes, symfony-2.1

如果在security.yml中，在access_control中我们必须指定路径，那么拥有灵活路由有什么意义（能够在不破坏应用程序的情况下更改路由，这要归功于'admin_settings'->'/admin/settings'之类的路由标识符） （而不是ID）？

```
access_control:
    - { path: ^/test, ip: 127.0.0.1 }
    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/reset, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin, role: ROLE_ADMIN }
    - { path: ^/settings, role: ROLE_USER } 
```

每次我更改路线时，我都必须检查它是否仍然安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:30:49.920

最近我有同样的问题，所以我为 symfony security.yml 写了一个小扩展，添加了路由名称支持，也许你会感兴趣：[https ://github.com/madesst/MadesstSecurityExtraBundle](https://github.com/madesst/MadesstSecurityExtraBundle)

您将能够以这种方式编写：

```
# app/config/security.yml
security:
    firewalls:
        secured_area:
            pattern:    '@*' # Equals to '^/' in old syntax
            anonymous:  ~
            form_login:
                login_path:  '_demo_login'
                check_path:  '_security_check'

    access_control:
        - { path: '@my_bundle_post_delete', roles: ROLE_ADMIN}
        - { path: '@my_bundle_post_*', roles: ROLE_USER}
        - { path: '@my_bundle_post', roles: IS_AUTHENTICATED_ANONYMOUSLY}
        - { path: ^/esi, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
        - { path: ^/esi, roles: ROLE_NO_ACCESS } 
```

# c++ - 定义析构函数可防止内联成员函数

> ID：13372161
> 
> 赞同：8
> 
> 时间：2012-11-14T02:26:36.353
> 
> 标签：c++, inline

我看到一个奇怪的问题，如果我定义析构函数，成员方法不会被内联。

示例代码：

```
#include <cstdio>

class Foo
{
public:
    Foo(int arg) : data(arg) {}
    ~Foo(void) {}

    Foo bar(void) const { return Foo(7); }

    int data;
};

int main(void)
{
        Foo a(3);
        Foo b = a.bar();

        printf ("%i", b.data);
} 
```

如果使用默认析构函数，我会得到如下信息：

```
main:
 sub         rsp,28h  
 lea         rcx,[string "%i" (013FB8ADA0h)]  
 mov         edx,7  
 call        printf (013FB81068h)  
 xor         eax,eax  
 add         rsp,28h  
 ret 
```

但是如果我定义自己的空白析构函数，如上面的代码：

```
Foo::bar:
 mov         dword ptr [rdx],7  
 mov         rax,rdx  
 ret  

main:
 sub         rsp,28h  
 lea         rdx,[b]  
 call        Foo::bar (013FA11000h)  
 mov         edx,dword ptr [b]  
 lea         rcx,[string "%i" (013FA1ADA0h)]  
 call        printf (013FA11088h)  
 xor         eax,eax  
 add         rsp,28h  
 ret 
```

使用 Visual Studio 2012 (v110) 编译为发布版本，但也尝试了 Visual Studio 2010 (v100)。我尝试设置 /Ob2 以帮助说服它内联该方法，但没有运气。

我对汇编不够熟悉，无法确切知道它在做什么，也许明天我会试着弄清楚它是否给出任何提示。谁能解释为什么定义一个空的析构函数会阻止该方法被内联？

编辑 [17/11/2012]

我将上面的代码更新为更简单（最初我正在研究我的 Vector 类）。

从成员方法返回原始类型似乎正确内联，这只是当我返回我的类的实例时的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T23:58:52.517

Visual Studio 将带有析构函数（无论是否为空）的类视为“复杂”类，它们更有可能放弃某些优化。如果您的类简单且对速度敏感，请使用默认析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:25:47.117

在 VS 2010 中，编译器似乎在编译时计算最终值，并将其加载到堆栈中以获取`a`.
如下修改代码确实启用了定义析构函数的优化：

```
inline void operator = (const __m128 v)
{
    data = v;
}

inline __m128 operator* (const Vector4& a) const
{ 
    return _mm_mul_ps(data, a.data); 
} 
```

# arrays - 使用从 Magic Fields 2 重复文本字段中获取的帖子 ID 创建自定义循环

> ID：13372162
> 
> 赞同：0
> 
> 时间：2012-11-14T02:26:42.593
> 
> 标签：arrays, wordpress, loops, foreach, posts

我正在尝试创建一个自定义循环，其中包含与特定帖子 ID 相关的内容，我从名为“reference_posts”的魔术字段重复文本字段中获取其编号。

当我回显 $testvalue; 它输出正确的帖子列表“20432,43242,34253”，但是当我尝试在数组中输出它时，我只会得到第一个值重复“20432,20432,20432”。

我猜问题是我必须将第二个 foreach 包含在第一个中，但我无法做到这一点。

谁能帮我吗？

```
<?php 
    $value  = get_field ('reference_posts') ;
    foreach ( $value  as  $my_val ) { 
    $testvalue = $my_val . ",";
    echo $testvalue;
    $post_idarray = array( 'post__in' => array( $testvalue ) );
    $postspecial = get_posts($post_idarray);
}
    foreach( $postspecial as $post ) :
    setup_postdata($post);  
    ?> 

<div>my content</div>

<?php endforeach; ?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:56:15.613

得到它：

```
<?php 
    $value  = get_field ('reference_posts') ;
    foreach ( $value  as  $my_val );
    $args = array( 'include' => $value );
    $myposts = get_posts( $args );
    foreach( $myposts as $post ) : setup_postdata($post); ?>

<div>my content</div>

<?php endforeach; ?> 
```

# c# - 为什么我的 C# 代码不会添加到列表并显示它？

> ID：13372164
> 
> 赞同：1
> 
> 时间：2012-11-14T02:26:59.147
> 
> 标签：c#, wpf, list, addressbook

我正在尝试自学 C#，但在使用此代码时遇到了问题：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            contacts.Add(new Contact()
                {
                Name = "James",
                Email = "james@mail.com",
                PhoneNumber = "01234 111111"
            });
            contacts.Add(new Contact()
            {
                Name = "Bob",
                Email = "bob@mail.com",
                PhoneNumber = "01234 222222"
            });
            contacts.Add(new Contact()
            {
                Name = "Emma",
                Email = "emma@mail.com",
                PhoneNumber = "01234 333333"
            });
        }
        protected List<Contact>  contacts = new List<Contact>();

        public List<Contact> Contacts
        {
            get { return  contacts; }
            set {  contacts = value; }
        }

        private void NewContactButton_Click(object sender, RoutedEventArgs e)
        {
            contacts.Add(new Contact()
            {
                Name = NameTextBox.Text,
                Email = EmailTextBox.Text,
                PhoneNumber = PhoneTextBox.Text
            });
        }

        }

    } 
```

它没有在列表中显示新联系人，我不确定它是否正在创建新联系人。它显示前三个非常好。

我有一种感觉，我遗漏了一些重要的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T02:38:01.437

改变

```
 protected List<Contact>  contacts = new List<Contact>();

    public List<Contact> Contacts
    {
        get { return  contacts; }
        set {  contacts = value; }
    } 
```

至

```
protected ObservableCollection<Contact> contacts = new ObservableCollection<Contact>();

public ObservableCollection<Contact> Contacts
{
    get { return contacts; }
    set { contacts = value; }
} 
```

并添加`using System.Collections.ObjectModel;`到代码的顶部。

并对其余代码进行必要的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:26:39.667

使用下面提到的代码，它将起作用：

```
public MainWindow()
    {
        InitializeComponent();
        dgContacts.ItemsSource = Contacts;
    }

    private void btnClick_Click(object sender, RoutedEventArgs e)
    {
        Contacts.Add(new contact()
        {
            Name = "Person",
            Email = "Person Address",
            PhoneNumber = "Person Ph"
        });

    }

    protected ObservableCollection<contact> contacts = new ObservableCollection<contact>();

    public ObservableCollection<contact> Contacts
    {
        get { return contacts; }
        set { contacts = value; }
    } 
```

并且此代码的​​ xaml 将是：

```
<DataGrid Name="dgContacts" Margin="5" AutoGenerateColumns="True" ItemsSource="{Binding}"></DataGrid> 
```

WPF 的主要部分是绑定，如果你正确地进行绑定，它将为你创造魔法。如果此代码适合您；我将向您展示另一种绑定它的方法。

# c# - 单击侦听器未触发

> ID：13372165
> 
> 赞同：0
> 
> 时间：2012-11-14T02:27:00.263
> 
> 标签：c#

我无法让基本的点击监听器工作。

我创建了一个带有（名称）的基本按钮`button1`。

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, System.EventArgs e)
        {
            MessageBox.Show("button1 was clicked");
        } 
```

当我运行应用程序并单击我的按钮时，它不会触发。我正在努力解决这个问题，因为我正在遵循此处概述的指南：http: [//msdn.microsoft.com/en-us/library/dfty2w4e.aspx](http://msdn.microsoft.com/en-us/library/dfty2w4e.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:30:36.713

看来您缺少这一行`button1.Click += new EventHandler(button1_Click);`，您应该在表单构造函数中添加它。

如果您通过 UI 设计器，您可以将按钮拖到 UI 上，然后双击它，它将为您创建侦听器；您在那里拥有的所有内容，加上设计器文件中的上述行，减去`MessageBox.Show()`. 这是我推荐的用于创建所有标准侦听器的路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:33:53.450

如果您在设计器中单击表单上的按钮并查看属性并选择事件部分，您是否看到事件“单击”旁边的值？您应该会看到值“button1_click”。如果你没有看到这个，那就是你的问题。您应该能够单击下拉菜单并选择 button1_click 事件。

# c# - 绑定winforms datagridview rowheader

> ID：13372167
> 
> 赞同：2
> 
> 时间：2012-11-14T02:27:07.907
> 
> 标签：c#, winforms, datagridview, datagridrowheader

在 C# Winforms`DataGridView`中，我使用 datagriview 的`datasource`属性绑定了一个类列表。有没有办法将一个类属性绑定到 datagriview 的`rowheader`？

我不想将`iterate`所有行逐一添加行标题值，因为我将拥有数千条记录，因此我希望行标题在设置数据源时从绑定类中获取值。

例如，我有这个类，我希望行标题显示客户 ID。

```
private class Customer
{
   public string CustomerID { get; set; }
   public string CustomerFirstName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:53:58.197

恐怕您必须实现 datagridview 的`OnPaint`-Method，在其中循环绘制客户 ID。有一次，我想计算我的条目，但没有找到任何其他解决方案。

# algorithm - 二维双射函数的逆算法

> ID：13372169
> 
> 赞同：0
> 
> 时间：2012-11-14T02:27:20.993
> 
> 标签：algorithm

我想写一个函数**f_1(a,b) = (x,y)**，它近似于 f 的倒数，其中**f(x,y) = (a,b)**是一个双射函数（在特定范围内）

关于如何获得有效数值近似的任何建议？

使用的编程语言并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:47:16.873

求解`f(x,y)=(a,b)`x,y 等效于求`f(x,y)-(a,b)`(= 0) 的根或最小值，因此您可以使用任何标准的求根或优化算法。如果你自己实现这个，我推荐[坐标下降](http://en.wikipedia.org/wiki/Coordinate_descent)，因为它可能是最简单的算法。您也可以尝试[自适应坐标下降](http://en.wikipedia.org/wiki/Adaptive_coordinate_descent)，尽管这可能更难分析。

如果你想在一个范围内找到逆，你可以在不同的点计算逆，然后用[三次样条](http://en.wikipedia.org/wiki/Spline_%28mathematics%29)进行插值，或者在你想计算逆函数时求解上面的方程。即使您为每个评估求解方程，预先计算一些值仍然可能会有所帮助，以便它们可以用作求解器（例如坐标下降）的初始值。

另见[牛顿法](http://en.wikipedia.org/wiki/Newton%27s_method)和[二分法](http://en.wikipedia.org/wiki/Bisection_method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:55:26.560

没有适用于任何一般功能的“自动”解决方案。即使在 y = f(x) 的简单情况下，也很难找到合适的起点。举个例子：

```
y = x^2 
```

有一个很好的代数逆

```
x = sqrt(y) 
```

但是试图用多项式（例如）在 [0..1] 范围内逼近 sqrt 函数非常糟糕。

如果您的范围足够小，并且您的函数表现得足够好，那么您可能会使用 2D 样条曲线进行拟合。如果这可行，那么您应该尝试对 x 和 y 使用独立函数，即使用

```
y = Y_1(a,b)  and x = X_1(a,b) 
```

而不是更复杂的

```
(x,y) = F_1(a,b) 
```

# xml - oracle XMLType 到 RDMS 迁移的最佳实践是什么？

> ID：13372172
> 
> 赞同：1
> 
> 时间：2012-11-14T02:27:47.770
> 
> 标签：xml, database, oracle, oracle11g, xmltype

我们将 XBRL 文件（基本上是 XML）作为 XMLType 存储到 oracle 11.2 中。每个 XML 文件包含 500 多个标签。出于报告目的，我们从 XML 文件中提取大约 200 个值到普通表 (NORMAL_TABLE)。直接从 XML 文件中读取需要更多的执行时间，因此我们将作为从 XMLType 到 NORMAL_TABLE 的工作迁移。基本上，NORMAL_TABLE 中的每一行代表每个 XML 文件，这意味着现在我们在 NORMAL_TABLE 中有大约 200 列。

由于新的要求和 CR ，现在我们需要将更多的值从 XML 迁移到 NORMAL_TABLE。对于这种情况，哪些是最佳实践？可以在 NORMAL_TABLE 中添加更多列吗？

# c++ - 在 C++ 中使用“void”模板参数

> ID：13372173
> 
> 赞同：27
> 
> 时间：2012-11-14T02:27:59.240
> 
> 标签：c++, templates, c++11, std-function

采取以下最小示例：

```
using Type1 = std::function<void(void)>;

template <typename T>
using Type2 = std::function<void(T)>;

Type1 whyDoesThisWork;
Type2<void> andYetThisDoesNot; 
```

如果是第二种类型的别名，我会收到错误“参数可能没有 'void' 类型”。（我使用 Xcode 4.5、Clang/c++11/libc++、OS X 10.7 进行了测试。）

我觉得这很奇怪：我本来期望`Type1`并且`Type2<void>`行为相同。这里发生了什么？有没有办法重写第二种类型的别名，以便我*可以*编写`Type2<void>`和获取`std::function<void(void)>`而不是错误？

**编辑**我可能应该补充一点，我想要这样做的原因是允许以下内容：

```
template <typename ... T>
using Continuation = std::function<void(T...)>;

auto someFunc = []() -> void {
  printf("I'm returning void!\n");
};

Continuation<decltype(someFunc())> c; 
```

`Continuation<decltype(someFunc())>`变成`Continuation<void>`了，我得到了错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T02:41:10.557

我没有实际的答案，只有我在评论中所说的：你不能`void`作为函数类型，如：

```
int foo(int, char, void, bool, void, void);     // nonsense! 
```

我相信这`T(void)`仅允许作为 C 的兼容性表示法（它区分*声明*和*原型*，与 C++ 非常不同，并且需要能够说“无参数”）。

因此，解决方案应该是可变的：

```
template <typename ...Args> using myType = std::function<void(Args...)>; 
```

这样你就可以正确地*没有参数*：

```
myType<> f = []() { std::cout << "Boo\n"; } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-14T03:56:22.017

简短的回答是“模板不是字符串替换”。 `void f(void)`仅当它是`void f()`C++ 中的别名时才有意义，以便与 C 向后兼容。

第一步是使用可变参数，如其他地方所述。

第二步是弄清楚如何将`void`返回函数映射到......好吧，可能是类似的东西`std::function<void()>`，或者可能是其他东西。我说的可能是别的，因为与其他情况不同，你不能打电话`std::function<void()> foo; foo( []()->void {} );`——这不是真正的延续。

可能是这样的：

```
template<typename T>
struct Continuation
{
  typedef std::function<void(T)> type;
};

template<>
struct Continuation<void>
{
  typedef std::function<void()> type;
}; 
```

然后像这样使用它：

```
auto someFunc = []()->void {};
Continuation<decltype(someFunc())>::type c; 
```

它为您提供所需的类型。你甚至可以添加一个 apply 到 continuation：

```
template<typename T>
struct Continuation
{
  typedef std::function<void(T)> type;

  template<typename func, typename... Args>
  static void Apply( type const& cont, func&& f, Args... args)
  {
    cont( f(args...) );
  }
};

template<>
struct Continuation<void>
{
  typedef std::function<void()> type;
  template<typename func, typename... Args>
  static void Apply( type const& cont, func&& f, Args... args)
  {
    f(args...);
    cont();
  }
}; 
```

如果传入的类型是 void 或者它是非 void 类型，它可以让您统一地对函数的执行应用延续。

但是，我会问“你为什么要这样做”？

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-14T04:12:51.493

几个答案已经解释了原因。为了增加这些答案，规范说（C++11 §8.3.5[dcl.func]/4）：

> 由单个非依赖类型的未命名参数组成的参数列表`void`等效于空参数列表。除此特殊情况外，参数不得具有*cv* `void`类型。

在您的`Type2`示例中，`T`in`void(T)`是*依赖类型*——它依赖于模板参数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T02:36:01.613

当一个函数被声明为接受一个类型为 的参数时`void`，就像在 中一样`std::function<void(void)>`，这实际上只是一种愚蠢的说法，即它接受零个参数。但是您声明 Type2 的方式是`std::function`带有一个不返回任何内容（void）的签名，但它需要 1 个参数。void 不是可以用作参数的类型，它只是一种声明没有参数的方式。所以它不适用于 Type2，因为这需要一个可以用作参数的实际类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T02:37:05.810

如果将 Void 传递给函数，则可以将其解释为空参数。毕竟你没有使用空指针

```
void func (void) 
```

变成

```
void func () 
```

# jquery - 带有增量值和输入字段问题的 jQuery clone()

> ID：13372175
> 
> 赞同：2
> 
> 时间：2012-11-14T02:28:13.073
> 
> 标签：jquery

我的 clone() 脚本有两个主要问题。

1.  每当我克隆一个 div 时，我想用增量值更改文本。例如，新块的标题应该是“块 2”......等等。
2.  当我单击单选按钮并克隆它时，克隆的块仍然选择了单选。我已经在脚本中将该值设置为空值，但它似乎不适用于第一个克隆。

HTML：

```
<div>
    <div id="mydiv">
        <div class="title">Block 1</div>
        <div>
            <input type="radio" name="blockoption" value="left"> Radio 1<br />
            <input type="radio" name="blockoption" value="right"> Radio 2<br />
            <select>
                <option selected="selected">Select</option>
                <option>Option 1</option>
                <option>Option 2</option>
                <option>Option 3</option>
            </select><br />
            <input type="text" name="blocktext" />
        </div>
    </div>
</div>
<input id="addbutton" type="button" value="Add Block" />&nbsp;<input id="removebutton" type="button" value="Remove Block" /> 
```

jQuery：

```
$("#addbutton").click(function () {
var inc = $('#mydiv').siblings().length;
$('#mydiv:first-child').clone().insertAfter('#mydiv:last-child').find('input').val('');
$('#mydiv').find('.title').each(function() {
    $(this).text().replace(/\d+/, inc+2);
});
});

$("#removebutton").click(function () {
var inc = $('#mydiv').siblings().length;
if (inc > 0) {
    $('#mydiv:last-child').remove('#mydiv');
    $('#mydiv').find('.title').each(function() {
        $(this).text().replace(/\d+/, inc-2);
    });
}
}); 
```

**[在此处](http://jsfiddle.net/Ms8Ws/1/)查看实际代码。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:54:16.050

克隆具有 ID 属性的元素会使您的文档无效，您可以改用类。对于删除`checked`和`selected`属性，您可以使用`prop`方法。

```
$("#addbutton").click(function() {
    var inc = $('.mydiv').length;
    var cloned = $('.mydiv:first').clone()
        .find('.title').text('Block' + ++inc).end()
        .find('input').val('').prop('checked', false).end()
        .find('option').prop('selected', false).end()
        .appendTo('.wrapper')
});

$("#removebutton").click(function() {
    $('.mydiv:last').remove()
}); 
```

[http://jsfiddle.net/b7knT/](http://jsfiddle.net/b7knT/)

# php - 运行 file_put_contents() 时创建文件夹

> ID：13372179
> 
> 赞同：74
> 
> 时间：2012-11-14T02:28:31.530
> 
> 标签：php

我从网站上传了很多图片，需要以更好的方式组织文件。因此，我决定按月创建一个文件夹。

```
$month  = date('Yd')
file_put_contents("upload/promotions/".$month."/".$image, $contents_data); 
```

在我尝试了这个之后，我得到了错误结果。

> 消息：file_put_contents（upload/promotions/201211/ang232.png）：无法打开流：没有这样的文件或目录

如果我试图只将文件放在现有文件夹中，它会起作用。但是，它无法创建新文件夹。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-11-14T02:30:38.257

[`file_put_contents()`](http://us1.php.net/file_put_contents)不创建目录结构。只有文件。

您需要在脚本中添加逻辑以测试*月份*目录是否存在。如果没有，[`mkdir()`](http://us1.php.net/mkdir)请先使用。

```
if (!is_dir('upload/promotions/' . $month)) {
  // dir doesn't exist, make it
  mkdir('upload/promotions/' . $month);
}

file_put_contents('upload/promotions/' . $month . '/' . $image, $contents_data); 
```

**更新：** `mkdir()`接受第三个参数，`$recursive`该参数将创建*任何*缺少的目录结构。如果您需要创建多个目录，可能会很有用。

递归和目录权限设置为 777 的示例：

```
mkdir('upload/promotions/' . $month, 0777, true); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-25T09:10:21.233

修改上述答案以使其更通用，（自动检测并从系统斜杠上的任意文件名创建文件夹）

ps以前的答案很棒

```
/**
 * create file with content, and create folder structure if doesn't exist 
 * @param String $filepath
 * @param String $message
 */
function forceFilePutContents ($filepath, $message){
    try {
        $isInFolder = preg_match("/^(.*)\/([^\/]+)$/", $filepath, $filepathMatches);
        if($isInFolder) {
            $folderName = $filepathMatches[1];
            $fileName = $filepathMatches[2];
            if (!is_dir($folderName)) {
                mkdir($folderName, 0777, true);
            }
        }
        file_put_contents($filepath, $message);
    } catch (Exception $e) {
        echo "ERR: error writing '$message' to '$filepath', ". $e->getMessage();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-03T15:44:48.770

我一直在使用 Crud Generator 进行 laravel 项目，但这种方法不起作用

@aqm 所以我创建了自己的函数

> PHP方式

```
function forceFilePutContents (string $fullPathWithFileName, string $fileContents)
    {
        $exploded = explode(DIRECTORY_SEPARATOR,$fullPathWithFileName);

        array_pop($exploded);

        $directoryPathOnly = implode(DIRECTORY_SEPARATOR,$exploded);

        if (!file_exists($directoryPathOnly)) 
        {
            mkdir($directoryPathOnly,0775,true);
        }
        file_put_contents($fullPathWithFileName, $fileContents);    
    } 
```

> Laravel 方式

不要忘记在文件顶部添加

`use Illuminate\Support\Facades\File;`

```
function forceFilePutContents (string $fullPathWithFileName, string $fileContents)
    {
        $exploded = explode(DIRECTORY_SEPARATOR,$fullPathWithFileName);

        array_pop($exploded);

        $directoryPathOnly = implode(DIRECTORY_SEPARATOR,$exploded);

        if (!File::exists($directoryPathOnly)) 
        {
            File::makeDirectory($directoryPathOnly,0775,true,false);
        }
        File::put($fullPathWithFileName,$fileContents);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-01T08:42:23.293

我从@Manojkiran.A 和@Savageman 创建了一个更简单的答案。此函数可用作 file_put_contents 的直接替换。它不支持上下文参数，但我认为对于大多数情况应该足够了。我希望这可以帮助一些人。快乐编码！:)

```
function force_file_put_contents (string $pathWithFileName, mixed $data, int $flags = 0) {
  $dirPathOnly = dirname($pathWithFileName);
  if (!file_exists($directoryPathOnly)) {
    mkdir($dirPathOnly, 0775, true); // folder permission 0775
  }
  file_put_contents($pathWithFileName, $data, $flags);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-08T15:23:52.043

**简单的 Laravel 解决方案：**

```
use Illuminate\Support\Facades\File;

// If the directory does not exist, it will be create
// Works recursively, with unlimited number of subdirectories
File::ensureDirectoryExists('my/super/directory');

// Write file content
File::put('my/super/directory/my-file.txt', 'this is file content'); 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2014-03-25T09:17:42.040

我写了一个你可能喜欢的函数。它被称为 forceDir()。它基本上检查您想要的目录是否存在。如果是这样，它什么也不做。如果没有，它将创建目录。使用这个函数而不只是 mkdir 的一个原因是这个函数也可以创建下一个文件夹。例如（'upload/promotions/januari/firstHalfOfTheMonth'）。只需将路径添加到所需的 dir_path。

```
function forceDir($dir){
    if(!is_dir($dir)){
        $dir_p = explode('/',$dir);
        for($a = 1 ; $a <= count($dir_p) ; $a++){
            @mkdir(implode('/',array_slice($dir_p,0,$a)));  
        }
    }
} 
```

# jquery-ui - 带有延迟发布的 Jquery UI 工具提示触发器

> ID：13372182
> 
> 赞同：0
> 
> 时间：2012-11-14T02:29:17.527
> 
> 标签：jquery-ui, tooltip

我正在尝试使用 jQuery Tool 提示功能，并且从示例中我在更改我所追求的功能的代码时遇到了问题。

[http://jqueryui.com/tooltip/#forms](http://jqueryui.com/tooltip/#forms)

我有几个彩色圆形区域地图，我希望在单击其中一个时弹出工具提示。

以下功能有效，但在将鼠标悬停在元素上时也会弹出工具提示。然后，当您单击它时，会弹出另一个工具提示。

所以我需要的是将功能更改为仅弹出“点击”，然后在几秒钟后消失。

jQuery：

```
$(function() {        
                        var tooltips = $( "[title]" ).tooltip();

                                $( "#01-001" ).click(function() {

                                        tooltips.tooltip( "open" );            
                                })  

                        }); 
```

HTML：

```
 <area id="01-001" shape="circle" coords="99,71,10" href="#" alt="01-001" data-maphilight='{"stroke":false,"fillColor":"FF0000","fillOpacity":1,"alwaysOn":true}' title="Tool Tip Messgae." /> 
```

多谢你们。

塞缪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:15:42.780

最简单的解决方案是等到单击事件实例化工具提示。你让它们悬停是因为你一次实例化了它们。

[这里](https://stackoverflow.com/a/13084046/1827560)有详细的解答。

# iphone - 在 iOS 中测试弱链接符号无法按预期工作

> ID：13372183
> 
> 赞同：1
> 
> 时间：2012-11-14T02:29:22.857
> 
> 标签：iphone, objective-c, ios, xcode, weak-linking

在尝试测试是否存在在较新版本的操作系统中引入的符号时，我遇到了一个奇怪的问题。我遵循[Apple](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/cross_development/Using/using.html#//apple_ref/doc/uid/20002000-1114537-BABHHJBC)关于使用弱链接符号的指南，即

> 通过显式比较其地址（而不是符号的裸名）与 NULL 或 nil 来检查外部（extern）常量或通知名称的可用性。

为了重现该问题，我在最新的 Xcode 4.5.2 上使用最新的 iOS 6 SDK，使用默认编译器（Apple LLVM 编译器 4.1）。我弱链接了社交框架（仅在 iOS 6+ 上可用）。我在 iOS 5.1 上运行这段代码（部署目标低于 6）：

```
NSLog(@"%p", &SLServiceTypeFacebook);
if (&SLServiceTypeFacebook)
  NSLog(@"Yes1");
if (&SLServiceTypeFacebook != NULL)
  NSLog(@"Yes2"); 
```

输出是：

```
0x0
Yes1
Yes2 
```

换句话说，我们可以在运行时验证表达式`&SLServiceTypeFacebook`的计算结果是否为 0。然而，`if`测试该表达式的语句将其视为真。

* * *

***更新：*** 从[这个问题](https://stackoverflow.com/questions/3002833/weak-linking-on-iphone-refuses-to-work)，我发现这个解决方法没有优化，但没有优化：

```
typeof(&SLServiceTypeFacebook) foo = &SLServiceTypeFacebook;
if (foo)
  NSLog(@"Yes3"); // does not get executed on -O0, but does on any optimization 
```

* * *

***更新：*** UIKit 符号似乎不存在此问题。在 iOS 4.3 上运行以下命令：

```
NSLog(@"%p", &UIKeyboardDidChangeFrameNotification);
if (&SLServiceTypeFacebook)
  NSLog(@"Yes1");
if (&SLServiceTypeFacebook != NULL)
  NSLog(@"Yes2"); 
```

输出是：

```
0x0 
```

我假设不同之处在于 UIKit 符号`NS_AVAILABLE_IOS()`旁边有一个宏，因此编译器会以某种方式正确处理它。在社交框架符号的情况下，它没有`NS_AVAILABLE_IOS()`宏，因为整个社交框架本身仅在 iOS 6 之后才可用（即符号从框架版本开始可用，所以我猜不需要这个宏？）；但是编译器没有正确处理符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:00:31.530

您确定不想检查 SLRequest 类是否存在而不是检查此常量吗？

无论如何，问题在于编译器正在优化测试（它将这解释为测试一个在编译时为真的常量表达式）。您可以通过将此地址读入本地**volatile**变量来规避此问题。或者您可以在运行时动态搜索符号。

但我会考虑只检查 SLRequest 类。

这里至少有这三个选项：

```
#include <dlfcn.h>

NSString* const * volatile check = &SLServiceTypeFacebook;
if (check != NULL)
    NSLog(@"SLServiceTypeFacebook is defined");

// Another approach would be to call dlsym() at runtime 
// to search for this symbol:
if (dlsym(RTLD_DEFAULT, "SLServiceTypeFacebook"))
    NSLog(@"SLServiceTypeFacebook found via dlsym");

// But if you really just wanted to know is if SLRequest
// is available, you should really just do this:
if ([SLRequest class])
    NSLog(@"SLRequest class is available"); 
```

在 iOS5.1 和 iOS6 中，这些中的任何一个都应该像你所期望的那样工作。

希望有帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T21:11:56.843

只需检查 NSClassFromString 是否可以获取课程。无论如何，objC 都是所有课程：D

# css-float - 使用 CSS display:inline-block 或 float:left 与混合数量的文本

> ID：13372184
> 
> 赞同：0
> 
> 时间：2012-11-14T02:29:25.343
> 
> 标签：css-float, css

在这里寻找一些关于如何最好地设置以下 HTML 样式的专家建议：

```
<body>
-Some content-
<div class="parent" style="height:50%;">
<div class="child" style="background-color:#FF9999;">An image</div>
<div class="child" style="background-color:#9999FF;">Some text</div>
</div>
</body> 
```

要获得如下行为的结果：

![在此处输入图像描述](../Images/ca94bc8e61ab87af671a98e05d985169.png)

我正在使用的标准如下：

*   容器 div .parent 是一个块元素，填充了浏览器窗口的整个宽度。
*   我知道第一个/左内部 div 的宽度，以像素为单位，但不是百分比，基于将去那里的图像的规律性。
*   我不知道第二个/右内部 div 的宽度 - 因为它包含可变数量的文本，无论浏览器窗口宽度如何，应该自动填充右侧的整个空间
*   第一个/左 div 的高度，当比第二个/右 div 短时，应该拉伸到相同的高度（原因如下：第一个/左 div 将有一个右边框来设置它与第二个/右 div , 并且这个边框应该是 .parent div 的高度；但是，第一个/左 div 并不总是出现在标记中，在这种情况下边框不应该出现）。
*   我不能使用 JavaScript 诡计。

根据我的经验和来自网络资源的帮助，我尝试过的解决方案：

1.  Float：使用 float:left 的传统方法显然无法将第一个/左 div 拉伸到其兄弟或 .parent 的（可变）高度。

2.  内联块：.parent {background-color:#999999;} .parent > .child {display:inline-block;vertical-align:top;height:100%;}

当第二个/右 div 中的文本不足以填满整行时，使用 display:inline-block 似乎很有吸引力。然而，当有更多文本时，第二个/右 div 会增长到外部容器允许的宽度，迫使它包裹在第一个/右 div 下。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:10:09.833

Using table based markup is not the answer. However, iff you don't need to support IE7 or lower, you can use `display:table` to solve this. Check out this demonstration i threw together. Edit the amount of content in the second child div to see the effect.

[jsfiddle demonstrating display:table](http://jsfiddle.net/37bPS/10/)

```
.parent {
  display:table;
}

.child {
  display:table-cell;
} 
```

Basically, you tell the `parent` element to act like a table, the two `child` elements to act like table cells. This gives you the benefits of the table layout without the accessibility problems and extra markup of html tables. As I mentioned though, this **doesn't work in IE7**. If you need old IE support, you'll have to resort to less graceful workarounds :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:56:14.480

虽然桌子名声不好，但这对一个人来说是一个很好的应用。

```
<body>
    -Some content-
    <table class="parent" style="height:50%;">
        <tr>
            <td class="child" style="background-color:#FF9999;" width="10">An image</td>
            <td class="child" style="background-color:#9999FF;">Some text</td>
        </tr>
    </table>
</body> 
```

如果您将宽度设置为最小，即使它更大，它也会将您的内容推到上面，并且无论哪一列更高，它都会将整个内容框向下推。

# php - 如何将 codeigniter 与 redactor js 图片上传（所见即所得）集成？

> ID：13372187
> 
> 赞同：1
> 
> 时间：2012-11-14T02:29:50.740
> 
> 标签：php, ajax, codeigniter, upload, wysiwyg

我正在尝试将 Codeigniter 与称为 redactor js 的所见即所得编辑器一起使用。基本上，我想要完成的可以在这里找到：http: [//imperavi.com/redactor/docs/images/](http://imperavi.com/redactor/docs/images/)

这似乎很容易，但我无法让它工作。我的控制台中不断收到 500 错误。这是我当前的编码：

编辑器js：

```
 <script type="text/javascript">
        $(document).ready(

        function() {
            $('#redactor_content').redactor({
                imageUpload: 'user/simple_upload'
            });
        });
    </script> 
```

处理上传的 PHP 类：

```
class User extends MX_Controller
{
    public function simple_upload()
    {
        $dir = './uploads/user_post_uploads/';

        $_FILES['file']['type'] = strtolower($_FILES['file']['type']);

        if ($_FILES['file']['type'] == 'image/png' || $_FILES['file']['type'] ==
            'image/jpg' || $_FILES['file']['type'] == 'image/gif' || $_FILES['file']['type'] ==
            'image/jpeg' || $_FILES['file']['type'] == 'image/pjpeg') {
            // setting file's mysterious name
            $filename = md5(date('YmdHis')) . '.jpg';
            $file = $dir . $filename;

            // copying
            copy($_FILES['file']['tmp_name'], $file);

            // displaying file
            $array = array('filelink' => base_url() . 'uploads/user_post_uploads/' . $filename);

            echo stripslashes(json_encode($array));

        }
    }
} 
```

我基本上创建了一个类似于示例的控制器函数，然后我在 redactor 函数中引用它。似乎不起作用......我在控制台中不断收到这些错误：

```
POST http://localhost/appname/user/simple_upload 500 (Internal Server Error) - /improciety/user/simple_upload:1

Uncaught TypeError: Cannot read property '0' of null - redactor.js:3100

Redactor.uploadLoaded - redactor.js:3100

g - jquery.js:2

f.event.dispatch - jquery.js:3

h.handle.i - jquery.js:3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-06T10:52:40.363

在控制器中：

```
 function simple_upload()() {
   $config = array('upload_path' => './uploads/user_post_uploads/',
                'upload_url' => base_url()  . './uploads/user_post_uploads/',
                'allowed_types' => 'jpg|gif|png',
                'overwrite' => false,
                'max_size' => 512000,            
    );

    $this->load->library('upload', $config);

    if ($this->upload->do_upload('file')) {
        $data = $this->upload->data();
        $array = array(
            'filelink' => $config['upload_url'] . $data['file_name']
        );            
        echo stripslashes(json_encode($array));
    } else {
        echo json_encode(array('error' => $this->upload->display_errors('', '')));
    }
} 
```

鉴于：

```
<script type="text/javascript">
$(document).ready(function(){

    $('#redactor_content').redactor({
        imageUpload: "<?php echo base_url(); ?>user/simple_upload",

        imageUploadErrorCallback: function(json)
        {
            alert(json.error);
        }          
    });
}); 
</script> 
```

# c# - 在这种情况下如何删除“xmlns：y”？

> ID：13372193
> 
> 赞同：1
> 
> 时间：2012-11-14T02:30:41.190
> 
> 标签：c#, .net, xml, linq, graphml

我想制作下面的 graphml(xml) 文件。

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<graphml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:y="http://www.yworks.com/xml/graphml" schemaLocation="http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd" xmlns="http://graphml.graphdrawing.org/xmlns">
  <key for="node" id="d3" yfiles.type="nodegraphics" />
  <graph edgedefault="directed" id="G">
    <node id="3">
      <data key="d3">
        <y:ShapeNode>
          <y:Geometry height="50" width="50" x="80" y="0" />
          <y:BorderStyle color="#000000" type="line" width="1.0" />
          <y:NodeLabel alignment="center" autoSizePolicy="content">TEST</y:NodeLabel>
        </y:ShapeNode>
      </data>
    </node>
    <node id="1000">
      <data key="d3">
        <y:ShapeNode>
          <y:Geometry height="50" width="50" x="240" y="0" />
          <y:BorderStyle color="#000000" type="line" width="1.0" />
          <y:NodeLabel alignment="center" autoSizePolicy="content">TEST</y:NodeLabel>
        </y:ShapeNode>
      </data>
    </node>
  </graph>
</graphml> 
```

但是我的代码制作了以下文件

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<graphml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:y="http://www.yworks.com/xml/graphml" schemaLocation="http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd" xmlns="http://graphml.graphdrawing.org/xmlns">
  <key for="node" id="d3" yfiles.type="nodegraphics" />
  <graph edgedefault="directed" id="G">
    <node id="3">
      <data key="d3">
        <y:ShapeNode xmlns:y="http://graphml.graphdrawing.org/xmlns">
          <y:Geometry height="50" width="50" x="80" y="0" />
          <y:BorderStyle color="#000000" type="line" width="1.0" />
          <y:NodeLabel alignment="center" autoSizePolicy="content">TEST</y:NodeLabel>
        </y:ShapeNode>
      </data>
    </node>
    <node id="1000">
      <data key="d3">
        <y:ShapeNode xmlns:y="http://graphml.graphdrawing.org/xmlns">
          <y:Geometry height="50" width="50" x="240" y="0" />
          <y:BorderStyle color="#000000" type="line" width="1.0" />
          <y:NodeLabel alignment="center" autoSizePolicy="content">TEST</y:NodeLabel>
        </y:ShapeNode>
      </data>
    </node>
  </graph>
</graphml> 
```

Graphml 程序不支持输出文件，因为该文件在`<y:ShapeNode xmlns:y="http://graphml.graphdrawing.org/xmlns">`.

我想删除部分“xmlns:y="http://graphml.graphdrawing.org/xmlns"

```
<y:ShapeNode xmlns:y="http://graphml.graphdrawing.org/xmlns"> 
```

如何擦除部分？我应该怎么办？我的源代码如下

```
 XDocument xDoc = new XDocument();
    XNamespace graphmlNamespace = "http://graphml.graphdrawing.org/xmlns";
    XNamespace xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");

    XElement mainElement = new XElement(graphmlNamespace + "graphml");
    XAttribute mainAttrib2 = new XAttribute(XNamespace.Xmlns + "xsi", xsi.NamespaceName);
    XAttribute mainAttrib3 = new XAttribute(XNamespace.Xmlns + "y", "http://www.yworks.com/xml/graphml");
    XAttribute mainAttrib4 = new XAttribute("schemaLocation", "http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd");
    mainElement.Add(mainAttrib2);
    mainElement.Add(mainAttrib3);
    mainElement.Add(mainAttrib4);

    XElement subElement_key = new XElement(graphmlNamespace + "key");
    XAttribute subAttrib_key1 = new XAttribute("for", "node");
    XAttribute subAttrib_key2 = new XAttribute("id", "d3");
    XAttribute subAttrib_key3 = new XAttribute("yfiles.type", "nodegraphics");

    subElement_key.Add(subAttrib_key1);
    subElement_key.Add(subAttrib_key2);
    subElement_key.Add(subAttrib_key3);

    mainElement.Add(subElement_key);

    //
    XElement subElement_graph = new XElement(graphmlNamespace + "graph");
    XAttribute subAttrib_graph1 = new XAttribute("edgedefault", "directed");
    XAttribute subAttrib_graph2 = new XAttribute("id", "G");

    subElement_graph.Add(subAttrib_graph1);
    subElement_graph.Add(subAttrib_graph2);

    mainElement.Add(subElement_graph);

    //
    for( int i=0; i< 2; i++) // for test
    {
        XElement sub2Element_node = new XElement(graphmlNamespace + "node");
        XAttribute sub2Attrib_node1 = new XAttribute("id", row["SkillEnumID"].ToString());
        sub2Element_node.Add(sub2Attrib_node1);

        subElement_graph.Add(sub2Element_node);

        // <data key="d3">
        XElement sub3Element_data = new XElement(graphmlNamespace + "data");
        XAttribute sub3Attrib_data1 = new XAttribute("key", "d3");
        sub3Element_data.Add(sub3Attrib_data1);
        sub2Element_node.Add(sub3Element_data);

        //<y:ShapeNode>
        XElement sub4Element_yShapeNode = new XElement(graphmlNamespace + "ShapeNode");
        XAttribute sub4Attrib_yShapeNode1 = new XAttribute(XNamespace.Xmlns + "y", graphmlNamespace);
        sub4Element_yShapeNode.Add(sub4Attrib_yShapeNode1);

        sub3Element_data.Add(sub4Element_yShapeNode);

        //<y:Geometry height="30.0" width="30.0" x="-15.0" y="-15.0"/>
        int iX = 0;
        Int32.TryParse(row["ColumnNumber"].ToString(), out iX);
        iX = (iX * (m_iNodeWidth + m_iXGap));

        int iY = 0;
        Int32.TryParse(row["RowNumber"].ToString(), out iY);
        iY = (iY * (m_iNodeHeight + m_iYGap));

        XElement sub5Element_yGeometry = new XElement(graphmlNamespace + "Geometry");
        XAttribute sub5Attrib_yGeometry1 = new XAttribute("height", m_iNodeHeight.ToString());
        XAttribute sub5Attrib_yGeometry2 = new XAttribute("width", m_iNodeWidth.ToString());
        XAttribute sub5Attrib_yGeometry3 = new XAttribute("x", iX.ToString());
        XAttribute sub5Attrib_yGeometry4 = new XAttribute("y", iY.ToString());
        sub5Element_yGeometry.Add(sub5Attrib_yGeometry1);
        sub5Element_yGeometry.Add(sub5Attrib_yGeometry2);
        sub5Element_yGeometry.Add(sub5Attrib_yGeometry3);
        sub5Element_yGeometry.Add(sub5Attrib_yGeometry4);

        sub4Element_yShapeNode.Add(sub5Element_yGeometry);

        // <y:Fill color="#FFCC00" transparent="false"/>
        XElement sub5Element_yBorderStyle = new XElement(graphmlNamespace + "BorderStyle");
        XAttribute sub5Attrib_yBorderStyle1 = new XAttribute("color", "#000000");
        XAttribute sub5Attrib_yBorderStyle2 = new XAttribute("type", "line");
        XAttribute sub5Attrib_yBorderStyle3 = new XAttribute("width", "1.0");
        sub5Element_yBorderStyle.Add(sub5Attrib_yBorderStyle1);
        sub5Element_yBorderStyle.Add(sub5Attrib_yBorderStyle2);
        sub5Element_yBorderStyle.Add(sub5Attrib_yBorderStyle3);

        sub4Element_yShapeNode.Add(sub5Element_yBorderStyle);

        //<y:NodeLabel alignment="center" autoSizePolicy="content">10 테스트&lt;/y:NodeLabel>
        string strLabel = "TEST";

        XElement sub5Element_yNodeLabel = new XElement(graphmlNamespace + "NodeLabel");
        XAttribute sub5Attrib_yNodeLabel1 = new XAttribute("alignment", "center");
        XAttribute sub5Attrib_yNodeLabel2 = new XAttribute("autoSizePolicy", "content");
        sub5Element_yNodeLabel.Add(sub5Attrib_yNodeLabel1);
        sub5Element_yNodeLabel.Add(sub5Attrib_yNodeLabel2);
        sub5Element_yNodeLabel.Value = strLabel;

        sub4Element_yShapeNode.Add(sub5Element_yNodeLabel);
    }

    //

    xDoc.Add(mainElement);

    xDoc.Declaration = new XDeclaration("1.0", "utf-8", "no");
    xDoc.Save(strFileFullPath); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:10:45.217

只需删除这两行：

```
XAttribute sub4Attrib_yShapeNode1 = new XAttribute(XNamespace.Xmlns + "y", graphmlNamespace);
sub4Element_yShapeNode.Add(sub4Attrib_yShapeNode1); 
```

您的 XML 已经包含定义的默认命名空间：`http://graphml.graphdrawing.org/xmlns`并`ShapeNode`在此命名空间中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:32:51.090

为什么将 graphmlNamespace 初始化为与您想要的不同的值？如果您希望元素位于名称空间[http://www.yworks.com/xml/graphml](http://www.yworks.com/xml/graphml)中，则将它们放在该名称空间中，而不是放在[http://graphml.graphdrawing.org/xmlns](http://graphml.graphdrawing.org/xmlns)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:07:24.270

您明确地重新定义`y`为其他 ( `graphmlNamespace`) 命名空间的前缀。您`ShapNode`和其他带有前缀的节点`y:`应该在`"http://www.yworks.com/xml/graphml"`命名空间中。您的代码中需要另一个`XNamespace`名称空间/前缀。

# c# - 静态结构方法和静态类方法有什么区别？

> ID：13372194
> 
> 赞同：13
> 
> 时间：2012-11-14T02:30:53.110
> 
> 标签：c#, methods, static

我最近发现 C# 中的结构可以有方法。

很意外地，我发现自己一直在我的代码中使用空结构的静态方法，而不是我认为我正在使用的静态类的静态方法！

例如

```
public struct Foo
{
    public static void Bar(Param param)
    {
        ...
    }
} 
```

此时它并没有真正被用作结构，因为它根本没有任何属性！

这与使用类的静态方法（静态或其他）有很大不同吗？有什么理由更喜欢其中一个吗？（我的直觉告诉我，使用静态结构方法至少不太直观）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-14T02:34:42.057

不，静态成员属于*类型*，而不属于类型的*实例*。声明静态类成员和静态结构成员之间没有区别（无论是在性能还是语义方面）。

需要注意的是，如果一个类型的唯一功能是包含静态成员，则应该使用静态类。对于结构，有一个隐式且不可更改的公共、无参数构造函数。如果该类型没有任何实例方法，则应删除创建实例的能力。声明一个类`static`与声明它是一样的`abstract sealed`，因此开发人员将无法意外创建没有目的的实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T02:35:02.710

行为没有什么不同。C# 通过极大地增加结构和类特性的交集来对结构进行混蛋。就我个人而言，我只会使用一个类，因为它对我来说似乎更正确（当然更符合大多数语言的约定）。

# xcode - Xcode 4.5 构建设备 IOS 5.1

> ID：13372195
> 
> 赞同：3
> 
> 时间：2012-11-14T02:31:00.900
> 
> 标签：xcode, build, orientation, ios5.1

我在安装了 Xcode 4.5.1 的 Mt Lion 上运行。

默认情况下，当我构建并部署到 iOS 5.1 设备时，旋转设备时显示屏会旋转，但当我部署到 iOS 6 模拟器或运行 iOS 6 的 iPad 或 iPhone 时，它​​似乎不起作用。

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:55:51.690

请阅读以下内容，希望对您有所帮助。（参考[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)）

`Handling View Rotations`

在`iOS 6`中，您的应用支持在应用的 Info.plist 文件中定义的界面方向。`A view controller can override the supportedInterfaceOrientations method to limit the list of supported orientations`. 一般情况下，系统只会在窗口的根视图控制器或呈现为填满整个屏幕的视图控制器上调用该方法；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。应用程序的方向掩码和视图控制器的方向掩码的交集用于确定视图控制器可以旋转到哪些方向。

你可以覆盖一个视图控制器的 preferredInterfaceOrientationForPresentation，该视图控制器旨在以特定方向全屏显示。

在`iOS 5 and earlier`中，UIViewController 类仅以纵向模式显示视图。为了支持其他方向，`you must override the shouldAutorotateToInterfaceOrientation: method and return YES for any orientations your subclass supports`. 如果您的视图的自动调整大小属性配置正确，那么您可能只需要这样做。但是，UIViewController 类为您提供了额外的钩子来根据需要实现额外的行为。通常，如果您的视图控制器打算用作子视图控制器，它应该支持所有界面方向。

这个链接可能对你有帮助[http://www.cocos2d-iphone.org/forum/topic/40721](http://www.cocos2d-iphone.org/forum/topic/40721) 上面的链接有一些有趣的评论->`Try to override the shouldAutoRotate method on the rvc, and put the conditional there. As far as I have tested, the shouldAutoRotateToInterfaceOrientation isn't called on iOS6 even with all fixes applied, so I was forced to override several more methods.`

请给我反馈，谢谢:)

# ruby - 方法链接 chomp/chompbang

> ID：13372196
> 
> 赞同：-3
> 
> 时间：2012-11-14T02:31:31.600
> 
> 标签：ruby

为什么`chomp`允许链接但`chomp!`不允许？例如：

```
"HELLO ".chomp.downcase
#> hello
"HELLO ".chomp!.downcase
#> nil 
```

另一个有趣的例子：

```
"100 ".chomp.to_i
#> 100
"100 ".chomp!.to_i
#> 0 
```

任何想法为什么会在字符串上发生这种行为，以及为什么会`nil.to_i`返回`0`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:42:26.767

如果您记得为 chomp 提供论据，您的问题就会消失。如果没有， chomp 只会删除字符串中不存在的换行符和回车符。bang 增强的 chomp 返回 nil 因为它没有进行任何修改（根据文档）。

简而言之，你真的很想写：

```
"HELLO ".chomp(" ").downcase
 => hello 
```

和：

```
"HELLO ".chomp!(" ").downcase
 => hello 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T03:10:48.943

来自[精美手册](https://ruby-doc.org/core/String.html#method-i-chomp)：

> **chomp(分隔符=$/) → new_str**
> 
> 返回一个新`String`的，给定的记录分隔符从*str*的末尾删除（如果存在）。如果`$/`没有从默认的 Ruby 记录分隔符更改，则`chomp`还会删除回车符（也就是说，它将删除`\n`、`\r`和`\r\n`）。

和[`chomp!`](https://ruby-doc.org/core/String.html#method-i-chomp-21)：

> **chomp!(separator=$/) → str 或 nil**
> 
> 修改*str*为 描述的地方`String#chomp`，返回*str*，或者`nil`如果没有进行修改。

所以既不`chomp`也不`chomp!`做你认为他们做的事。观察：

```
>> s = '100 '
=> "100 "
>> s.chomp
=> "100 "
>> s
=> "100 "
>> s.chomp!
=> nil
>> s
=> "100 " 
```

因此，除非您告诉他们，否则没人关心尾随空格，默认情况下他们只是去掉尾随 EOL。

`'100 '.chomp!`返回`nil`，因为这就是文档所说的。没有进行替换，所以它返回`nil`。

为什么`nil.to_i`给你零？好吧，来自[精美的手册](https://ruby-doc.org/core/NilClass.html#method-i-to_i)：

> **to_i → 0**
> 
> 始终返回零。

这不会给歧义或解释留下太多空间。

我认为您实际上是在使用`strip`方法系列而不是`chomp`：

*   [`String#lstrip`](https://ruby-doc.org/core/String.html#method-i-lstrip)
*   [`String#lstrip!`](https://ruby-doc.org/core/String.html#method-i-lstrip-21)
*   [`String#rstrip`](https://ruby-doc.org/core/String.html#method-i-rstrip)
*   [`String#rstrip!`](https://ruby-doc.org/core/String.html#method-i-rstrip-21)
*   [`String#strip`](https://ruby-doc.org/core/String.html#method-i-strip)
*   [`String#strip!`](https://ruby-doc.org/core/String.html#method-i-strip-21)

那些从字符串中删除空格。

# java - 通过 return 语句调用私有方法 java

> ID：13372197
> 
> 赞同：6
> 
> 时间：2012-11-14T02:31:35.010
> 
> 标签：java

所以我是java新手，我正试图解决这个问题。到目前为止，我正在编写一个调用私有方法的公共方法，这两个方法都写在同一个类中。在测试公共方法时，我可以针对一个对象employeeOne 调用公共方法，该对象的参数由用户提供。我不确定这里的私有方法调用发生了什么，因为看起来我是在类（我认为）而不是具有已定义属性的对象上调用它。

所以这是我在一个名为 Employee 的类中编写的私有方法：

```
private static double computeGrossPay()
{
    if (hoursWorked <= 40)
    {
        grossPay = (hoursWorked * payRate);
    }
    else if (hoursWorked >= 40)
    {
        grossPay = ((40 * payRate) + ((1.5 * payRate) * (hoursWorked - 40)));
    }
    return grossPay;
} 
```

我试图找出一种在另一个类中调用这个方法的方法，显然因为它是一个私有方法，我不能在它所写的类之外的任何地方调用它。所以我写了一个公共方法来调用私有方法

```
public double grossPayDisplay()
{
    return Employee.computeGrossPay();
} 
```

这就是我的问题发挥作用的地方：到目前为止，这段代码有效，但我并不完全清楚它*为什么*有效。

这是我测试它的方法：

```
System.out.println(employeeOne.grossPayDisplay()); 
```

employeeOne 是从 Employee 类创建的对象，其参数由用户提供，我的问题是：

编译器如何从 Employee.computeGrossPay() 中的 Employee 转到 employeeOne？

或重申如何

```
return Employee.computeGrossPay() 
```

实际上将属性传递给 computeGrossPay()？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T02:41:52.740

`computeGrossPay`是一个静态方法，这意味着它属于类本身，而不是任何特定的`Employee`对象。静态方法只能访问其他静态成员，所以看起来你的字段也`hoursWorked`必须是静态的。

这“有效”，但对我来说似乎不正确。像这样的字段`hoursWorked`是应该属于每个人的属性`Employee`- 尝试`static`从该字段的声明中删除。

现在，您可能会遇到编译错误，因为`computeGrossPay`当该方法未在`Employee`. 出于这个原因`computeGrossPay`，可能应该是一个实例方法：

```
private double computeGrossPay() { ... } 
```

然后它会被这样调用：

```
public double grossPayDisplay()
{
    return this.computeGrossPay();
} 
```

（这`grossPayDisplay`看起来有点毫无意义 - 你可以`computeGrossPay`公开）

或者，`computeGrossPay`可以保持静态并以 a`Employee`作为参数：

```
private static double computeGrossPay(Employee employee)
{
    if (employee.hoursWorked <= 40)
    {
        employee.grossPay = (employee.hoursWorked * payRate);
    } else if (hoursWorked >= 40)
    {
        employee.grossPay = ((40 * payRate) + ((1.5 * payRate) * (employee.hoursWorked - 40)));
    }
    return employee.grossPay;
} 
```

但这很丑陋，而且没有多大意义。

上面，我只是假设`grossPay`也是一个实例字段 - 但它的使用方式感觉有点奇怪。由于总工资是即时计算的，因此似乎不应该将其保存在字段中。考虑使其成为方法中的局部变量：

```
private double computeGrossPay()
{
    double grossPay; //declare the local variable

    //assign it depending on hoursWorked
    if (hoursWorked <= 40)
    {
        grossPay = (hoursWorked * payRate);
    }
    else
    {
        grossPay = ((40 * payRate) + ((1.5 * payRate) * (hoursWorked - 40)));
    }

    //return its value
    return grossPay;
} 
```

（对于最后一点，该方法是否为静态无关紧要）

最后一点：您会注意到我一直将`payRate`其视为静态字段。我只是举个例子，但它似乎可以采取任何一种方式：所有员工都可以有一个单一的工资率，或者每个员工都可以有自己的工资率。这仅取决于您的程序的上下文，这取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:42:48.983

我不相信编译器会从员工到员工。您的私有方法被声明为静态，因此它引用的变量（根据静态的定义）对于该类的任何成员都是通用的。

您的 hoursWorked、grossPay 和 payRate 变量是否在全局范围内声明，因为如果它们是，那么如果它们都引用相同的变量，那么拥有该类的对象是没有意义的。

# php - 从站点上传后，文件可以在 FTP 中打开，但不能在 HTTP 中打开

> ID：13372203
> 
> 赞同：1
> 
> 时间：2012-11-14T02:32:34.200
> 
> 标签：php, forms, http, ftp

我正在编写一个 PHP 脚本，使用户能够上传图片，然后将其显示在他们的页面上。一切正常，直到他们需要显示它的部分。我运行表单并提交它，图片显示在我的 FTP 目录中。我可以从 FTP 下载该文件并在我的计算机上查看它。我可以访问该图像的 FTP url，登录并查看它。

当我转到完全相同 URL 的 HTTP 版本时，我收到 404 错误。我已经检查了文件夹的权限，可以为用户读写。我什至在文件上传后检查了文件本身的权限，这很好。这是我上传文件时的 PHP 代码：

```
<?php
include('connect.php');
$user_id = $_SESSION['user_id'];
if($_POST['submit']){
//GET FILE ATTRIBUTES
$name = $_FILES['myfile']['name'];
$size = $_FILES['myfile']['size'];
$tmp_name = $_FILES['myfile']['tmp_name'];

if ($name){
//start upload process
$location = "pics/$name";
move_uploaded_file($tmp_name,$location);

$sql = "UPDATE tbl_name SET imagelocation='$location' WHERE user_id='$user_id'";
$query = $mysqli->query($sql);

header('location:profile.php');
}
else{
die("Please select a file! <a href='profile.php'>GO BACK</a>");
}
}
?> 
```

知道这可能是什么吗？我以前没见过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:21:17.000

我认为当您使用 mkdir() 创建文件夹时，文件夹权限可能不正确。希望设置正确的权限可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:07:00.770

现在可以了。我删除了该文件夹并重新创建了同名的文件夹。该文件夹最初是通过 PHP 中的 mkdir 创建的，所以我确信这与它有关。如果有人对为什么该文件夹不能与 mkdir 一起使用有任何见解，请随时在此处发布。谢谢！

# php - PHP成本计算器如何

> ID：13372205
> 
> 赞同：0
> 
> 时间：2012-11-14T02:33:14.583
> 
> 标签：php, jquery, calculator

我对 php 很陌生，所以我坚持使用更简单的计算器脚本……嗯……对我来说并不容易，但至少听起来不太复杂。

首先，我需要创建一个具有 2 个输入的计算器...一个包含汽车（其中 4 个）的下拉列表，每个汽车都有一个值（每公里的价格）和一个用户填写公里值（多少公里）的文本框他想开车）。然后输出应该是jquery（实时结果）。运算当然是倍增。

如果有人能帮我解决这个问题，我将不胜感激。我擅长 html 和 css，但完全没有 php。

```
<div class="styled-select"> 
  <select name="dropdown"> 
    <option value="<?=$car1;?>">Mercedes</option> 
    <option value="<?=$car2;?>">Scania</option> 
    <option value="<?=$car3;?>">Renault</option> 
    <option value="<?=$car4;?>">MAN</option> 
  </select> </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:16:55.943

我想这就是你所追求的

HTML

```
<input id="distance"/>
<select name="dropdown" id="cars">/* options*/
<input id="result"/> 
```

jQuery：

```
$(function(){
    $('#cars, #distance').on('keyup change',function(){
        var dist=$('#distance').val();  
        var car=$('#cars').val();
        var res=  dist * car ;
        $('#result').val( res || 0 );
    });
}); 
```

演示：http: [//jsfiddle.net/d8ETu/](http://jsfiddle.net/d8ETu/)

# php - 根据用户名显示删除消息 URL

> ID：13372211
> 
> 赞同：0
> 
> 时间：2012-11-14T02:33:52.623
> 
> 标签：php, jquery, css

我有一条 PHP + Jquery 墙消息，显示来自任何人的所有消息。现在我想在每条消息中设置删除 URL。但是规则，如果消息不是他自己的，用户就看不到删除 url。

```
.childs {
opacity: 0;
color: #000;
margin-left: 10px;
float: right;
}

.childs:hover {
opacity: 1.0;
text-decoration: underline;
cursor: pointer;
}

.parents:hover > .childs {
opacity: 1.0;
} 
```

-- 以 Greg 身份登录

```
<section class="parents">
Greg : Today is holiday
<div class="childs"><a href="delete.php">Delete</a></div> 
```

这以 Jeremy 的身份登录

```
<section class="parents">
Jeremy : Beautiful day
<div class="childs"><a href="delete.php">Delete</a></div> 
```

我希望根据登录的用户名显示删除链接。因此，如果 Jeremy 将鼠标悬停在 Greg 消息上，删除链接将不会显示，因为这不是他的消息，如果 Greg 将鼠标悬停在他自己的消息上，他可以看到删除 url 链接并可以删除它.

那么我该如何设置呢？
感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:38:54.553

这是一种简单的方法。存储会话的登录信息，`$_SESSION`然后在您的视图类/代码上进行比较。

喜欢

```
<div class="childs">
<?php
if($_SESSION['logged_in_user'] == true) { 
   echo "<a href='delete.php'>Delete</a></div>";
}?></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T02:39:10.880

您可以将 SESSION 变量用于登录用户名并将其与消息所有者进行比较。如果是同一所有者，则回显删除 div。

```
<?php
if($_SESSION['username'] == $comment_owner){
    echo '<div class="childs"><a href="delete.php">Delete</a></div>';
}
?> 
```

这是最简单的方法，但非常混乱。

# jakarta-ee - EclipseLink“创建或扩展表”不起作用：“......未知列......”

> ID：13372213
> 
> 赞同：1
> 
> 时间：2012-11-14T02:34:09.887
> 
> 标签：jakarta-ee, jpa, glassfish, eclipselink

我将 EclipseLink 2.4.1 与 Glassfish 和 MySQL 数据库一起用于持久化实体。
我向实体添加了一个字段，当我尝试保留该实体时，它说新字段是“未知”。
我们应该如何使用新的“创建或扩展表”功能？我原以为它会为这个字段创建一个新列。

下面是一些相关信息，如果您需要更多信息，请告诉我。

提前致谢！

**堆栈跟踪**

```
...
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20121003 ad44345): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 't0.TESTFIELD' in 'field list'
Error Code: 1054
at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)
... 
```

**持久性.xml**：

```
<persistence-unit name="myApp" transaction-type="JTA">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<jta-data-source>jdbc/mysql</jta-data-source>
<mapping-file>META-INF/orm.xml</mapping-file>
<properties>
  <property name="eclipselink.ddl-generation.output-mode" value="database"/>
  <property name="eclipselink.jdbc.batch-writing" value="Buffered"/>
  <property name="eclipselink.logging.level" value="INFO"/>
  <property name="eclipselink.ddl-generation" value="create-or-extend-tables"/>
</properties> 
```

**额外信息**

drop-and-create-tables 确实有效。
我正在使用 merge(entity) 来持久化新实体（因为它们有很多多对一的字段，否则会导致重复的主 ID 问题） - 我觉得这可能是问题所在。
查看 MySQL 日志以及来自 EclipseLink 的最佳日志级别，EclipseLink 首先尝试从数据库中选择实体，如下所示：
mysql_log：

```
121115 10:49:03 9 Query SELECT t0.LISTINGID, t0.DTYPE, ... , t0.TESTFIELD FROM the_entity... 
```

这是最后一个 mysql 日志条目，这意味着它在这里崩溃，它从不尝试删除表等。这是否意味着您不能将合并与 drop-and-create 或 create-or-extend 一起使用？我只是做了一个谷歌并没有找到任何关于此的信息。

EclipseLink 日志记录：

```
FINER: client acquired: 64279491
FINER: TX binding to tx mgr, status=STATUS_ACTIVE
FINER: acquire unit of work: 161130796
FINEST: Merge clone with references nz.co.site.api.v1.ListedItemDetail@8d88ca1
FINEST: Execute query ReadObjectQuery(referenceClass=ListedItemDetail )
FINEST: Connection acquired from connection pool [read].
FINEST: reconnecting to external connection pool
FINE: SELECT t0.LISTINGID, t0.DTYPE, ... , t0.TESTFIELD, ... , FROM ITEM t0, LISTEDITEMDETAIL t1 WHERE ((t0.LISTINGID = ?) AND ((t1.LISTINGID = t0.LISTINGID) AND (t0.DTYPE = ?)))
bind => [2 parameters bound]
FINE: SELECT 1
FINEST: Connection released to connection pool [read].
WARNING: Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DatabaseException 
```

我使用 bean 事务管理来合并新实体：

```
userTransaction.begin();
entityManager.merge(entity);
entityManager.flush();
userTransaction.commit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:14:07.660

Glassfish 拦截 eclipselink.ddl-generation.output-mode 属性并强制将其写入文件，如下面的答案所述：[eclipselink does not generate tables from annotated JPA classes](https://stackoverflow.com/questions/4612187/eclipselink-does-not-generate-tables-from-annotated-jpa-classes) 所以你需要检查你是否在 Glassfish 中启用了 java2db为“drop-and-create-tables”工作。

“create-or-extend-tables”虽然需要数据库连接才能查看数据库中的内容，因此目前不适用于 sql-script 输出模式。我不确定如何强制 Glassfish 不覆盖 output-mode 属性，但如果无法完成，您将需要运行持久性单元端 glassfish 才能使用此功能。

glassfish 的一种解决方法是尝试这样的方法：

```
Map properties = new HashMap();
properties.put(PersistenceUnitProperties.DDL_GENERATION, PersistenceUnitProperties.CREATE_OR_EXTEND);
//create-or-extend only works on the database
properties.put(PersistenceUnitProperties.DDL_GENERATION_MODE, PersistenceUnitProperties.DDL_DATABASE_GENERATION);
//this causes DDL generation to occur on refreshMetadata rather than wait until an em is obtained
properties.put(PersistenceUnitProperties.DEPLOY_ON_STARTUP, "true");
JpaHelper.getEntityManagerFactory(em).refreshMetadata(properties); 
```

# ember.js - Emberjs 1.x-pre- Ember.Router 和 Ember.computed 问题

> ID：13372214
> 
> 赞同：2
> 
> 时间：2012-11-14T02:34:22.333
> 
> 标签：ember.js, ember-old-router

我正在阅读**http://code418.com/blog/2012/03/26/advanced-emberjs-bindings/**并遇到了**Ember.Binding.and for transform**，它在当前的 emberjs 中已弃用**Ember.computed**。我决定更新旧的 emberjs 0.9.x 小提琴**http://jsfiddle.net/Wjtcj/**以使用 emberjs 1.x 并提供了一个 Ember.computed.and，如新小提琴**http://jsfiddle.net/中所示wjtcj/5/** . 虽然它有效，但我不能让它返回与旧输出相同的输出，但是当代码**http://jsfiddle.net/Wjtcj/28/**的改进版本失败时

```
 STATEMANAGER: Sending event 'navigateAway' to state root.
 STATEMANAGER: Sending event 'unroutePath' to state root.
 STATEMANAGER: Sending event 'routePath' to state root. 
 STATEMANAGER: Entering root.index
 <error> 
```

似乎 setSync 函数是问题所在并且失败了，因为我正在调用它的计算属性。

```
The handlebars template:

<script type="text/x-handlebars" data-template-name="application" >

 {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="obj" >
 {{#each App.ObjController}}
    <p>{{this}}</p>
 {{/each}}
</script>​ 
```

**更新，请使用此链接获取更新的代码[http://jsfiddle.net/Wjtcj/28/](http://jsfiddle.net/Wjtcj/28/)。下面的代码不再适用**

```
 App = Ember.Application.create();

  Ember.computed.and = function(dependentKey, otherKey) {    
    return Ember.computed(dependentKey, otherKey, function(key) {
    return get(this, dependentKey) && get(this, otherKey);    
   });
  };

 Ember.computed.or = function(dependentKey, otherKey) {    
    return Ember.computed(dependentKey, otherKey, function(key) {
    return get(this, dependentKey) || get(this, otherKey);    
   });
 };

 App.ApplicationController = Em.Controller.extend();

 App.ApplicationView = Ember.View.extend({
   templateName: 'application'
 });

App.ObjView = Em.View.extend({
   templateName: 'obj'
});

App.ObjController = Ember.ArrayController.extend({
  content: [],
  user: Ember.Object.create({isAdmin: false, isOwner: false}),

  isSelected: false,
  isSaveEnabled: false,
  canRead: false,
  isSaveEnabledBinding: Ember.computed.and('user.isAdmin', 'isSelected'),
  canReadBinding: Ember.computed.or('user.isAdmin', 'user.isOwner'),
  setSync: function(property, value) {
    this.set(property, value);
    Ember.run.sync(); // synchronize bindings
    this.pushObject('isSaveEnabled = %@ ; canRead = %@'.fmt(this.get('isSaveEnabled'),     this.get('canRead')));
   }
  });

  App.ObjController.setSync('isSelected', false);
  App.ObjController.setSync('user', Ember.Object.create({isAdmin: true, isOwner: false}));
  App.ObjController.setSync('isSelected', true);
  App.ObjController.setSync('user', Ember.Object.create({isAdmin: false, isOwner: true}));
  App.ObjController.setSync('user', Ember.Object.create({isAdmin: false, isOwner: false}));

 App.Router = Ember.Router.extend({
   enableLogging: true,
   location: 'hash',
   root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
        connectOutlets: function(router) {
      router.get('applicationController').connectOutlet('application');
        }

      }),

    obj: Ember.Route.extend({
       route: '/obj',
       enter: function(router) {
         console.log("The obj sub-state was entered.");
       },

        index: Ember.Route.extend({
          route: '/',
          connectOutlets: function(router, context) {
                router.get('applicationController').connectOutlet( 'obj');
            }
        })
    })
  })
}); 
```

​</p>

感谢您的任何建议或修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:23:52.610

您的示例中出现了很多问题，我不确定这是否能说明问题，但我认为这就是您要完成的工作：http: [//jsfiddle.net/machty/Wjtcj/31/](http://jsfiddle.net/machty/Wjtcj/31/)

要点

1.  您很少需要手动调用 Ember.run.sync() ，除非您正在执行测试用例或其他一些不寻常的情况。
2.  你试图在 ObjController 中塞进太多东西。预期目的是显示用户列表及其权限；我采用了使用 ArrayController 来管理用户列表的常见模式，然后用 UserView 显示每个用户。
3.  您原来`<error>`的原因是试图将 applicationController 的出口连接到... applicationController，因此递归和堆栈溢出
4.  绑定和计算属性之间存在差异。如果您使用计算属性，请不要将“绑定”放在属性的末尾

所以代替这个：

```
isSaveEnabledBinding: Ember.computed.and('user.isAdmin', 'isSelected'),
canReadBinding: Ember.computed.or('user.isAdmin', 'user.isOwner'), 
```

做这个

```
isSaveEnabled: Ember.computed.and('isAdmin', 'isSelected'),
canRead: Ember.computed.or('isAdmin', 'isOwner'), 
```

# python - 在 Python 中捕获句点之间的输入

> ID：13372221
> 
> 赞同：2
> 
> 时间：2012-11-14T02:35:04.700
> 
> 标签：python, regex

如何在没有句点的情况下捕获句点之间的数字？

这些数字最多可以是 3 位数，但小于 3 位数。0 <= 我 < 1000

例子：

*   领域。**3.**大黄蜂
*   领域。**56.**玛莎比
*   领域。**第898**章

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T02:36:48.443

```
your_string.split(".")[1] 
```

会给你号码

我的 ipython shell 中的示例：-

```
In [47]: your_string = "domain.3.bumblebee"

In [48]: your_string.split(".")[1]
Out[48]: '3' 
```

您的用例并不需要正则表达式。

当然，如果你想返回整数，你需要做的就是强制转换它。

```
In [49]: int(your_string.split(".")[1])
Out[49]: 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T02:57:44.763

# 关于正则表达式

正则表达式并不总是解决方案。有一个关于使用正则表达式的引用。

> 有些人在遇到问题时会想
> “我知道，我会使用正则表达式”。现在他们有两个问题。
> 
> > 参考：[http ://regex.info/blog/2006-09-15/247](http://regex.info/blog/2006-09-15/247)

# 一个可能的解决方案使用`regex`

1.  使用该`re`模块进行正则表达式。这是[文档的链接](http://docs.python.org/3.3/library/re.html)。
2.  匹配使用正则表达式术语`r"\.(\d{1,3})\."`. 此匹配将找到一个文字句点，后跟一个 1、2 或 3 位数字，然后是另一个文字句点。
3.  要帮助仅捕获数字，请使用正则表达式捕获组`(...)`。在这种情况下，括号中捕获了 1、2 或 3 位数字的匹配。这是[一些正则表达式示例的链接](http://www.regular-expressions.info/examples.html)。

## 您的用例的示例代码

```
>>> import re
>>>
>>> subject = """
... domain.3.bumblebee
... domain.56.mashabee
... domain.898.barista
... """
>>>
>>> matches = re.finditer(r"\.(\d{1,3})\.",subject)
>>> results = [int(match.group(1)) for match in matches]
>>>
>>> results
[3, 56, 898] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:37:39.940

尝试这样做：

```
>>> import re
>>> text = 'domain.56.mashabee'
>>> mystr = re.compile(r'^\w+\.(\d{1,3})\.')
>>> print mystr.search(str(text)).groups()[0]
56 
```

# sql - SQL 两个表之间所有可能的循环组合

> ID：13372232
> 
> 赞同：3
> 
> 时间：2012-11-14T02:37:27.040
> 
> 标签：sql, oracle, combinations, round-robin

给定表：

```
create table Person( Name varchar(100) ) 
```

其中 Name 对于所有 Person 都是唯一的

什么 SQL 查询可以生成所有可能的 n!/((n-2)!2!) 循环组合？

假设 Person 的基数总是等于 4

示例人 = {'Anna','Jerome','Patrick','Michael')

输出：

```
Anna, Jerome
Anna, Patrick
Anna, Michael
Jerome, Patrick
Jerome, Michael
Patrick, Michael 
```

任何帮助，将不胜感激。谢谢！

这是我的答案（我使用了 oracle SQL）：

```
select P1.NAME PERSON1, P2.NAME PERSON2
  from (select rownum RNUM, NAME
        from PERSON) P1,
       (select rownum RNUM, NAME
          from PERSON) P2
 where P1.RNUM < P2.RNUM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:31:03.957

这里有两个解决问题的方法

```
SELECT  t1.Name + ',' +  t2.Name AS NamesCombination
FROM Person t1
INNER JOIN Person t2
ON t1.Name < t2.Name 
```

**或（甲骨文 11i R2+）**

```
WITH NamesCombination AS 
( 
    SELECT  1 AS Cntr
            ,Name 
            , CAST(Name AS VARCHAR(MAX))AS NamesCombinations
    FROM Person 
    UNION ALL 
    SELECT  
        nc.Cntr+1
        ,p.Name 
        ,nc.NamesCombinations + ',' +  CAST(p.Name AS VARCHAR(MAX))                      
    FROM Person AS p JOIN NamesCombination nc ON p.Name < nc.Name
    WHERE nc.Cntr < 2  
)
SELECT NamesCombinations
FROM NamesCombination
WHERE Cntr  = 2 
```

![在此处输入图像描述](../Images/c731ed5fb04616017b5948c88c37208d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:03:16.567

```
select P1.NAME PERSON1, P2.NAME PERSON2
  from (select rownum RNUM, NAME
        from PERSON) P1,
       (select rownum RNUM, NAME
          from PERSON) P2
 where P1.RNUM < P2.RNUM 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:56:33.547

请注意，这是 TSQL (Sql Server) 语法。我知道 Oracle 支持窗口函数，尤其是 row_number()，这是该解决方案所必需的。

通过一些试验和错误，让它在 Oracle 中工作应该不会太难

```
select p1.name, p2.name
from 
(
    select name,  row_number() over(order by name) as rownumber 
    from person
) p1
inner join
(
    select name, row_number() over(order by name) as rownumber
    from person
) p2
on p1.name <> p2.name
and p1.rownumber > p2.rownumber
order by 1 
```

row_number 为每一行分配一个行号。然后，您需要按照前面的建议加入 p1.rownumber > p2.rownumber 的附加连接子句

# javascript - JavaScript 中奇怪的布尔求值（Ruby on Rails）

> ID：13372233
> 
> 赞同：0
> 
> 时间：2012-11-14T02:37:27.780
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

在我的一个 RoR 项目中的一些 JavaScript 代码中，我遇到了一个奇怪的问题。这是代码：

```
alert(<%= params[:browse_view]%>)

<% if params[:browse_view] == true %>
  alert('Changing to browse view...')
  changeToBrowseView();
<% else %>
  alert('Changing to list view...')
  changeToListView();
<% end %> 
```

*发生的情况是顶部的警报将显示为 false，但随后if*语句的顶部将运行。这将是一个非常愚蠢的问题，但我不知道发生了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:39:01.047

你确定`params[:browse_view]`是一个`boolean`而不是一个字符串？

我会看看经过验证的将字符串值解析为相应的布尔值的方法：

[在 Ruby on Rails 中将字符串解析为布尔值](http://jeffgardner.org/2011/08/04/rails-string-to-boolean-method/)

# jquery - 带有主干页面转换的 jQuery-mobile

> ID：13372239
> 
> 赞同：1
> 
> 时间：2012-11-14T02:38:27.420
> 
> 标签：jquery, jquery-mobile, backbone.js

我在这里遵循了这个非常好的教程

[http://www.appliness.com/getting-started-with-html-mobile-application-development-using-jquery-mobile-requirejs-and-backbonejs/#codesyntax_9](http://www.appliness.com/getting-started-with-html-mobile-application-development-using-jquery-mobile-requirejs-and-backbonejs/#codesyntax_9)

这是 jQuery Mobile 和 Backbone 的起点。

据我了解，由于主干网和 jQuery-Mobile 都内置了路由服务，因此 jQuery-Mobile 已将其关闭。

我想使用这样一个包（以及 UI 样式）的主要原因之一是页面转换（即弹出或翻转），但是当我将它们添加到所附示例的索引页面时，它们什么也没做（我猜这是因为某些东西被禁用了）。

有谁知道解决这个问题的方法以及我的诊断是否正确？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:59:51.573

我不确定你在哪里看到 jQuery-mobile 关闭了它的“路由”，但 jQuery-mobile 和 Backbone.js 确实都可以使用哈希标签，并且同时使用两者存在一些问题时间。

您可能想要查看的是专门为此目的制作的[jQuery-mobile-router](https://github.com/azicchetti/jquerymobile-router)插件（即使用 jQuery-mobile 和backbone.js），此外它还支持 jQuery-mobile 页面事件。

您可能还想查看以下与一起使用backbone.js 和jQuery-mobile 相关的SO 帖子。

[无需 hack 或其他路由器的 Backbone.js 和 jQueryMobile 路由](https://stackoverflow.com/q/7172294/384985)

[jquery-mobile 骨干网.js 路由](https://stackoverflow.com/q/6466300/384985)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T20:43:10.363

本教程中描述了解决此问题的方法：http: [//andidog.de/blog/2012/06/using-jquery-mobile-with-backbone-how-to-solve-routing-conflicts-and-use-mvc -为应用程序/](http://andidog.de/blog/2012/06/using-jquery-mobile-with-backbone-how-to-solve-routing-conflicts-and-use-mvc-for-the-application/)

在 router.js 中，更改此行：

```
$.mobile.changePage($(view.el), {changeHash:false}); 
```

对此：

```
$.mobile.changePage($(view.el), {transition: 'slide', changeHash:false}); 
```

或者在 jqm-config.js 中你可以像这样添加一个默认的页面转换：

```
$.mobile.defaultPageTransition = "slide"; 
```

现在，这将始终使用向前滑动（从右到左）过渡。如果您希望它在返回时以相反的方式滑动，您可以执行以下操作。这对我有用。这个 SO 答案帮助我弄清楚了：[https](https://stackoverflow.com/a/11660991/1665818) ://stackoverflow.com/a/11660991/1665818 。在 router.js 中添加这些变量：

```
previousFragments: [],
backDetected: false, 
```

并更改changePage函数：

```
changePage:function (view) {
    //add the attribute 'data-role="page" ' for each view's div
    view.$el.attr('data-role', 'page');

    var currentFragment = Backbone.history.getFragment();
    this.backDetected = false;

    if(!window.linkClicked && currentFragment == this.previousFragments[this.previousFragments.length-2]) {
        this.backDetected = true;
        this.previousFragments.pop();
    } else {
        this.previousFragments.push(currentFragment);
    }
    //reset
    window.linkClicked = false;
    console.log("this.backDetected= "+this.backDetected);

    //append to dom
    $('body').append(view.$el);

    if(!this.init){
        $.mobile.changePage($(view.el), {reverse: this.backDetected, changeHash:false});
    }else{
        this.init = false;
    }
} 
```

然后在 main.js 的顶部添加一个 window.linkClicked 变量：

```
window.linkClicked = false; 
```

并在文档就绪函数中添加一个事件监听器：

```
$(document).ready(function() {
  console.log("DOM IS READY");// Handler for .ready() called.

  $(document).on('click', 'a', function() {
    window.linkClicked = true;
  });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T04:30:57.290

我遇到了类似的问题。请在下面找到我的解决方案

第 1 步）默认情况下 $.mobile.linkBindingEnabled 为 true，因此您可以评论代码中是否有类似“$.mobile.linkBindingEnabled = false;”的行。

步骤 2）在您不希望 jquery mobile 打扰的超链接中使用 data-ajax=false 。因此，通过使用它，我们可以在应用程序中使用 Backbone.js 路由器以及 jQuery mobile 的页面转换效果。

例子

编辑页面

你会在你的 Backbone.js 路由器中使用这个“#edit”并且不希望 jQuery 干扰，所以这里这个 data-ajax 将满足我们的需要。

我已经使用了上述技术并且成功了。

# python - 为什么我没有得到完整的索引！（蟒蛇名单）

> ID：13372242
> 
> 赞同：1
> 
> 时间：2012-11-14T02:39:00.067
> 
> 标签：python, list, indexing, range

输入：

```
def part3 (x):  
    for i in range (len(x)):  
        while i <= len(x):  
            print (x[i]) 
            return x[i+1]  

x=[5,2,3]  
x.sort()  
print(x[0],x[1], x[2])  
print(part3(x)) 
```

输出：

```
2 3 5  
2  
3 
```

我的问题：为什么我在 3 之后没有得到 5？！？！函数不应该转到 x[2] 吗？！？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:45:49.937

该函数在循环的第一次迭代时返回，因为`return`那里有一个语句。所以当你有

```
print(part3(x)) 
```

首先`print(x[i])`（`i = 0`因为这是第一次迭代）在您的`while`-loop 中执行，然后函数 ( `x[i+1]`) 的返回值由上面的原始打印语句打印。

在您致电`x.sort()`, `x`will be `[2, 3, 4]`, so `x[0]`is`2`和`x[0+1] = x[1]`is`3`之后, 这解释了您的输出。

不太确定你想用这段代码实现什么，所以很难给你建议如何修复它。如果你只是想打印的内容，`x`那么你*让它*变得比它必须的更复杂，因为你可以简单地做

```
for i in x:
    print(i) 
```

* * *

请注意，这里*不需要*return 语句，因此不需要多余的`print`; IE

```
print(part3(x)) 
```

会变成

```
part3(x) 
```

因为您正在函数本身中进行打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T02:46:24.437

你做错了循环。我认为重点是打印`x`.

你要：

```
def part3(x):
    for element in x:
        print(element) 
```

现在注意：

1.  您不需要在 for 循环中使用 while 循环。
2.  您不想在循环中返回任何内容，因为这将跳出循环并退出函数。
3.  在python中，您可以直接循环数组而不使用索引变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:49:06.793

你可以看到'2'是内部打印的结果，你看到'3'是打印'return x [i + 1]'的结果，你没有看到'5'，因为你离开了你的while循环和一个函数.

如果您只需要打印所有值并返回最后一个值，您可以试试这个：

```
def part3 (x):  
    for val in x:  
       print val 
    return x[-1] 
```

如果您需要知道索引，那么您可以尝试枚举：

```
def part3 (x):  
    for i, val in enumerate(x):  
       print i, val 
    return x[-1] 
```

# c++ - 为什么这个 C++ 程序即使不构造类对象也能成功运行？

> ID：13372249
> 
> 赞同：5
> 
> 时间：2012-11-14T02:39:47.370
> 
> 标签：c++

为什么这个C++程序即使不构造类对象也能成功运行？让我们看看下面的代码：

```
#include<iostream>

using namespace std;

class Dopey
{
  public:
    Dopey() {cout << "Dopey\n";}
};

class Bashful
{
  public:
    Bashful() { cout << "BashFul\n";}
    void f() { cout << " f \n";}
    int i;
};

class Sneezy
{
  public:
    Sneezy(int i) {cout << "copy int \n";}
    Sneezy(Bashful d) { cout << "copy Bashful\n";}
    Sneezy(Bashful* d) {d->f();d->i=100;} //How could this be correct without    
                                              //  constructing d !!!!!!!!
    Sneezy();
};

class Snow_White
{
  public:
    Snow_White();
    Dopey dopey;
    Sneezy sneezy;
    Bashful bashful;
  private:
    int mumble;
};

Snow_White::Snow_White() : sneezy(&bashful)
{
    mumble = 2048;
}

int main()
{

    Snow_White s;

    return 0;
} 
```

该程序可以成功运行，cout如下：

```
Dopey
f
BashFul 
```

看看`without constructing bashful,the f() could be invoked`，为什么？当我将功能更改`Snow_White::Snow_White()`为以下内容时：

```
Snow_White::Snow_White() : sneezy(bashful)
{
    mumble = 2048;
} 
```

它也`runs successfully without constructing bashful`，cout如下：

```
Dopey
copy Bashful
Bashful 
```

任何解释将不胜感激！谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T02:52:26.193

您的程序具有未定义的行为，因为您`bashful`在构建之前访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T03:17:36.220

您的问题与您的初始化列表有关。bashful 在打喷嚏之后声明。因此，在这段代码中：

```
Snow_White::Snow_White() : sneezy(&bashful) 
```

bashul 还没有构建，因为根据白雪公主的声明，sneezy 必须先构建（是的，顺序很重要）。因此，sneezy的构造函数传入的参数指向了一个未初始化的对象。在这一点上，它起作用的原因是[chris 与](https://stackoverflow.com/questions/2505328/calling-class-method-through-null-class-pointer). 请记住，虽然这可行，但**根据 C++ 标准，行为是未定义的**，这意味着**您不能也不能依赖它来工作**。

然而，真正的问题是 bashful 还没有被构建。

要解决这个问题，您需要更改 Snow_White 类的声明，以便 bashful 出现在 sneezy 之前：

```
class Snow_White
{
  public:
    Snow_White();
    Dopey dopey;
    Bashful bashful;
    Sneezy sneezy;
  private:
    int mumble;
}; 
```

避免这种事情发生的一种方法是始终按字母顺序保留您的声明和初始化列表。

另一种方法是从一开始就让你的班级小，所以这永远不是问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:54:29.777

The bashful member is being constructed as is shown by the inclusion of Bashful in the output. It is true that it is not constructed prior to the address of bashful being taken and passed to the other member's constructor.

There are specific rules as to the order in which member are initialized, but the order initialization or use in the constructor initialization list is not one of the factors in those rules.

# html - 正则表达式替换 为

> ID：13372251
> 
> 赞同：-1
> 
> 时间：2012-11-14T02:40:07.673
> 
> 标签：html, regex

我需要一个正则表达式来帮助我关闭`<br>`标签以符合`xhtml`标准。在我的 html`br`中并不总是出现`empty`，所以`regex`必须考虑到它。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:46:21.887

寻找这种模式

```
(\<br[^\>]*)(\/)?(\>) 
```

并用这个替换

```
$1/$3 
```

根据您可能需要使用的引擎，`\1/\2`而不是`$1/$3`在替换字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:43:20.597

正则表达式也可能看起来更简单一些：

代替

```
/<br.*?>/i 
```

和

```
<br\/> 
```

# c# - 数据库驱动的网站，使用 userControls 以编程方式呈现 html 表

> ID：13372253
> 
> 赞同：0
> 
> 时间：2012-11-14T02:40:25.980
> 
> 标签：c#, asp.net, sql-server-2008, user-controls, dynamic-data

请原谅我的英语，因为它到目前为止不是我的主要英语（：

我有一个问题想请教一下，我会尽量具体一点。

尽管这看起来像是一个长篇故事，但这只是一个可以帮助我思考的实际问题：

使用哪些工具来尝试实现全面的多合一解决方案，并将其包含在我未来的大多数/大多数项目中：

因为我的应用程序（我的第一个“客户”的要求）（......因为我仍在学习通过 C# Dot.Net 进行开发）

是数据驱动的 + 几乎在我需要完成的每一项任务中都会重复。

我在想一套：最佳实践工具，使用......与一些主要的类似模板的解决方案，所以：

**形成这个 List ，什么是最好的？**（最容易/最简单的实现将匹配 html 表）

有几个选项可供选择（与数据库交互）

`ado.net`VS `LINQ To SQL`<<--- EOL/过时？

`datareader`对比`DataAdapter`

`List<Dictionary<string,Object>`对比`DataTable Dataset DataColumnCollection`

..ETC

您会使用列出的工具中的哪一组（以上或如果我没有提到您可以推荐的任何工具）？

所以通过选择的方法，我可以做类似的事情：

调用`StoredProcedureName`:paramaters - 取自`DDL ID`,`DDL NAME`

`for/each` `row``DataBasetable`, _

绘制适合从数据库检索的数据类型的 html 表

`<input type=text>`对于`dates`/`nvarchar`

`<input type=checkBox>`如果它有点

如果其货币类型应用验证：附加事件属性`onkeyPress="ValidationfucName(this)"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:21:01.377

试试 asp:GridView。您可以根据需要对其进行广泛配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:05:04.860

创建 linq to sql 类后，使用您的代码如下

```
objectclassname object = new objectclassname() 
```

对于 grideview，您使用以下 linq 查询

```
objectclassname objectname = new objectclassname();
var txtvalue = objectname.tablename.single(p=> p.stratwith("value you want to find"));
grideviewidname.datasource = txtvalue.tolist();
grideviewname.databind(); 
```

# android - 我可以在到达距离之前停止位置更新吗？

> ID：13372255
> 
> 赞同：1
> 
> 时间：2012-11-14T02:40:44.630
> 
> 标签：android, android-location

```
 LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

             LocationListener ll = new mylocationlistener();

               lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, ????, 20, ll); 
```

1.如果只应用minDistance（20m），我应该输入什么minTime参数？0、-1 还是 100000000？

2.顺便说一句，我想提示用户已经到了距离原地20米的距离，但是程序启动时请求立即更新并调用位置改变函数我可以忽略位置改变函数直到到达距离吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:10:06.313

试试这个（未经测试，但基于[文档](http://developer.android.com/reference/android/location/LocationListener.html)）：

```
final LocationManager locationManager =  LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
class implements LocationListener {
    Location storedLocation;
    public void onLocationChanged(Location newLocation) {
        if (storedLocation.equals(null)) {
            storedLocation = newLocation;
        }
        if ((newLocation.distanceTo(storedLocation) > 20.0) { 
            locationManager.removeUpdates(self);   
            return;
        }
        storedLocation = newLocation;
    }
    public void onProviderDisabled(String provider) { }
    public void onProviderEnabled(String provider) { }
    public void onStatusChanged(String provider, int status, Bundle extras) { }
} 
```

# ruby-on-rails - Ruby on Rails - 创建错误的 Schema.rb 文件？

> ID：13372260
> 
> 赞同：0
> 
> 时间：2012-11-14T02:41:42.497
> 
> 标签：ruby-on-rails, activerecord, rake, migrate

我是否正确地说 db/schema.rb 文件应该从 rake db:migrate 上的 db/migrate 文件中提取？我正在运行一个 rake db:migrate 并且它正在添加一个未在迁移中定义的表，也不是模型。有任何想法吗？

迁移文件（只有一个）：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :email
      t.string :hashed_password
      t.timestamps
    end
  end
end 
```

耙后的结果架构：

```
ActiveRecord::Schema.define(:version => 20121113214159) do

  create_table "user_categories", :force => true do |t|
    t.string   "title"
    t.string   "description"

    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

  create_table "users", :force => true do |t|
    t.string   "email"
    t.string   "hashed_password"

    t.datetime "created_at",                  :null => false
    t.datetime "updated_at",                  :null => false
  end

end 
```

我之前添加了一个 user_categories 脚手架，但不正确，所以我将其销毁。不知道我在破坏零件时哪里出错了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:38:13.217

如果您的数据库中没有任何重要数据，则可以运行`rake db:drop`then `rake db:create`。然后运行`rake db:migrate`，它应该更新您的架构干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-03T22:20:27.353

需要注意的是，`rake db:migrate`它将轮询您的数据库以了解其当前状态（与迁移分开）并相应地更新 schema.rb。例如，如果您进入 SQL 命令行并添加一个表，然后运行`rake db:migrate`，无论是否有迁移，schema.rb 都会反映该新表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T17:21:20.950

可能是您忘记定义环境变量。

1.  打开`Gemfile`并验证您没有将`sqlite`gem 用于您的环境
2.  如果作为输出收到空字符串，则键入`rake db:drop`then`rake db:drop`命令，您可能忘记设置环境变量
3.  签出`config/database.yml`文件并找到可以使用它们的地方。你应该找到类似的东西：`database: <%= ENV["<DB_NAME"] %>`
4.  确保您的变量之前已设置。如果您使用`dotenv`or `figaro`gems，可能您忘记在此处创建适当的文件或定义变量

# jquery - 调用函数的jQuery滑块始终关闭1，直到释放句柄

> ID：13372263
> 
> 赞同：1
> 
> 时间：2012-11-14T02:42:24.190
> 
> 标签：jquery, slider

我以前问过这个问题，很惊讶没有人能帮助我。您可以在这里确切地看到我正在尝试的内容[http://training.mercury.stellarbluewebdesign.com/GainOil/](http://training.mercury.stellarbluewebdesign.com/GainOil/)您会注意到，在释放句柄之前，对顶部值的更新是不正确的。有人告诉我，我必须在计算它们的函数中使用 ui.value，但似乎没有人确切知道如何使用。jquery 代码在这里[http://training.mercury.stellarbluewebdesign.com/GainOil/js/functions.js](http://training.mercury.stellarbluewebdesign.com/GainOil/js/functions.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:59:54.820

您正在调用的“幻灯片”事件正在向您传递新值：

> 变量值 = ui.value;

不过，这还不是实际设置的值。直到您释放鼠标或再次继续设置该值。

如果您添加：

```
var realval = $( ".slider" ).slider( "option", "value" );
console.log(realval); 
```

在您的幻灯片事件函数中，它将返回用于执行计算的数字。

您应该向 calculate_savings 函数添加一个参数，您可以通过它来执行该计算。但根据您拥有的滑块数量，这可能是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:06:17.250

inKit 是正确的。“幻灯片”事件预测如果回调函数不取消它（例如通过返回 false）**将发生的值变化。**虽然它不适合您的用例，但以这种方式编程使开发人员能够选择是否允许幻灯片事件通过；不幸的是，这意味着在您的回调函数运行时，该值实际上尚未更新。

我认为 inKit 建议修改 calculate_savings 函数以便它可以处理传递正在更改的特定滑块的“未来”值可能是更强大的解决方案，但它可能需要比您有兴趣解决的更多重构。

另一种方法是使用 0 毫秒的 setTimeout 将您的 calculate_savings 调用从回调周期中中断。

这是您的代码的相关部分：

```
// hook all sliders to their span.value (display)
$( '.slider' ).bind( 'slide', function( e, ui )
{    
    var field = $( this ).attr( 'field' );
    var value = ui.value;
    var $matchingElem = $( '.value[field="' + field + '"]' )
    var decimals = $matchingElem.attr( 'decimals' ) || 0
    $matchingElem.text( addCommas( value ) )

    // Allow the slide event time to complete successfully and update the slider's value before calculating the savings.
    setTimeout(function(){calculate_savings();},0);
} ) 
```

可以在这里看到新的代码：http: [//jsfiddle.net/maXcs/1/](http://jsfiddle.net/maXcs/1/)

*注意：随着更新现在按预期工作，现在可以根据 VIDesignz 的建议删除 slidechange 绑定。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:12:19.433

如果这是您更改右侧值的代码...

```
 // hook all sliders to their span.value (display)
$( '.slider' ).bind( 'slide', function( e, ui )
{   
    var field = $( this ).attr( 'field' );
    var value = ui.value;
    var $matchingElem = $( '.value[field="' + field + '"]' )
    var decimals = $matchingElem.attr( 'decimals' ) || 0
    $matchingElem.text( addCommas( value ) )
    calculate_savings();

} ).bind( 'slidechange', function()
{
    calculate_savings();
} ) // Ps. your missing a semicolon in your original script here <<<< 
```

为什么要单独绑定计算储蓄？这不可行吗？

```
 // hook all sliders to their span.value (display)
$( '.slider' ).bind( 'slide', function( e, ui )
{   
    var field = $( this ).attr( 'field' );
    var value = ui.value;
    var $matchingElem = $( '.value[field="' + field + '"]' )
    var decimals = $matchingElem.attr( 'decimals' ) || 0
    $matchingElem.text( addCommas( value ) )
    calculate_savings();

} ); 
```

# haskell - 试图将包装类型族变成类似 Functor 的东西

> ID：13372265
> 
> 赞同：7
> 
> 时间：2012-11-14T02:42:31.107
> 
> 标签：haskell

下面是一个简单的例子，其中恒等函数运行良好：

```
newtype R a = R a

instance Functor R where
    fmap f (R a) = R $ f a 
```

但是如果我添加一个中间类型系列，事情就会变得不稳定：

```
data IntT
data a :-> b

type family   Sem a         :: *
type instance Sem IntT      = Int
type instance Sem (a :-> b) = Sem a -> Sem b

newtype S a = S (Sem a) 
```

现在我不能把 S 变成一个仿函数。我可以很容易地定义一个新的类 Functor 类的东西，但是我还需要一类 Applicative-like 和 Monad-like，这似乎是一条不愉快的道路。特别是作为

```
smap f (S a) = S $ f a 
```

实际上有我想要的类型，即`smap :: (Sem a -> Sem b) -> S a -> S b`. 但是，当然，这不是 Functor 的类型。（当“相同”的代码有两种不同的、不兼容的类型时，你不讨厌它吗？）

我已经探索过[Data.Category.Functor](http://hackage.haskell.org/packages/archive/data-category/0.3.1.1/doc/html/Data-Category-Functor.html)和[Generics.Pointless.Functors](http://hackage.haskell.org/packages/archive/pointless-haskell/0.0.4/doc/html/Generics-Pointless-Functors.html)，但似乎也没有完全解决我的问题。 [PointlessTypeFamilies](http://code.google.com/p/pointfree/wiki/PointlessTypeFamilies)似乎有更多好主意，但我仍然不确定如何从中获得足够类似 Functor 的东西。

我突然意识到，尽管 for 的代码与 for 的代码*相同*，`smap`但发生的事情略有不同。在某种程度上，如果我有一个从to的自然转变，那么我应该能够以某种方式解除它以获得。那时我想我不妨在这里问一下，这样可能会为我省去不少麻烦！`fmap``R``Sem``S``smap`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:59:59.463

当我遇到这样的情况时，我通常会切换到类似的东西：

```
data S b = forall a. S (a -> b) (Sem a) 
```

很容易变成守法的`Functor`

```
instance Functor S where
  fmap f (S g s) = S (f . g) s 
```

或者我转向[`Coyoneda`](http://hackage.haskell.org/packages/archive/kan-extensions/3.1/doc/html/Data-Functor-Yoneda-Contravariant.html)为我打包这种行为。

# shopify - 在 Shopify 应用代理中加载 javascript 和 CSS 文件

> ID：13372268
> 
> 赞同：1
> 
> 时间：2012-11-14T02:42:51.473
> 
> 标签：shopify

我正在制作一个使用 jquery-ui 及其 CSS 库的 Shopify 应用程序。我想知道我是如何加载这些的，因为 Shopify 使用商店的液体模板呈现应用程序的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T02:44:32.393

您可以在模板中添加 js 和 css 链接。

# .htaccess - 如何使用 .htaccess 保护 index.php

> ID：13372273
> 
> 赞同：2
> 
> 时间：2012-11-14T02:43:52.980
> 
> 标签：.htaccess, .htpasswd

我正在尝试使用 .htaccess 保护子文件夹的 index.php 页面。

当我导航到 时，保护按预期工作`example.com/subfolder/index.php`。但是，当我刚去时，`example.com/subfolder`我得到一个 401 错误。

这是相关的 .htacess 代码：

```
AuthUserFile /home/myfolder/subfolder/.htpasswd

AuthName "Please enter your password"

AuthType Basic

<files index.php>
  require valid-user
</files> 
```

我需要做些什么不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:46:40.970

您应该在目录中放置一个新的 .htaccess 文件，`subfolder`其中仅包含以下内容：

```
AuthUserFile /home/myfolder/subfolder/.htpasswd
AuthName "Please enter your password"
AuthType Basic

require valid-user 
```

这将密码保护整个目录

# c# - 如何从后面的代码中设置 WPF StrokeDashArray？

> ID：13372274
> 
> 赞同：6
> 
> 时间：2012-11-14T02:44:09.617
> 
> 标签：c#, wpf

我可以知道如何从后面的代码中设置 StrokeDashArray 吗？我尝试使用设置边距的方法......但它不起作用。

以下是我的代码：

```
public static void DrawCircle(MainWindow main)
    {
        Ellipse myCircle = new Ellipse();
        myCircle.Stroke = Brushes.Orange;
        myCircle.Width = 25;
        myCircle.Height = 25;
        myCircle.StrokeThickness = 2;
        myCircle.StrokeDashArray = new System.Windows.Thickness("2,2,2,2");

        Canvas.SetLeft(myCircle, 10);
        Canvas.SetRight(myCircle, 10);
        Canvas.SetBottom(myCircle, 20);
        Canvas.SetTop(myCircle, 20);
        main.MyCanvas.Children.Add(myCircle);

    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T04:21:33.800

问题是这条线

```
myCircle.StrokeDashArray = new System.Windows.Thickness("2,2,2,2"); 
```

StrokeDashArray 是一个[DoubleCollection](http://msdn.microsoft.com/en-us/library/system.windows.media.doublecollection.aspx)

试试这个

```
myCircle.StrokeDashArray = new DoubleCollection() { 2 }; 
```

# vb.net - 是否有我可以访问的内置驱动程序以在 Windows 上获取原始磁盘访问权限？

> ID：13372275
> 
> 赞同：0
> 
> 时间：2012-11-14T02:44:10.843
> 
> 标签：vb.net, disk, hard-drive

我正在使用 vb.net。有没有办法可以访问低级驱动程序或类似的东西以获得原始磁盘访问？

我的意思是这样的：

```
Dim data(255) As Byte
data = ReadSector("C:", 5)
data(125) = asc("h")
data(126) = asc("e")
data(127) = asc("l")
data(128) = asc("l")
data(129) = asc("o")
WriteSector("C:", 5, data) 
```

其中 ReadSector 具有参数（驱动器为字符串，扇区为长），而 WriteSector 具有（驱动器为字符串，扇区为长，data() 为字节）。

这将在驱动器 C 的第 5 个扇区的第 126 个字符上写入“hello”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:30:03.380

您正在寻找[`DeviceIOCtrl()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216%28v=vs.85%29.aspx)允许您使用 WinAP 进行低级磁盘访问的功能。如果您使用 VB.NET 编写，那么使用起来会非常困难。

没有简单`ReadSector`或`WriteSector`功能，也不应该有。对硬盘的低级访问不适合初学者；如果您不知道自己在做什么，则非常容易破坏整个操作系统安装和/或丢失数据。

# sql - 在 SQL 中转置列和行的简单方法？

> ID：13372276
> 
> 赞同：125
> 
> 时间：2012-11-14T02:44:20.350
> 
> 标签：sql, sql-server, tsql, pivot

如何在 SQL 中简单地用行切换列？有没有简单的转置命令？

即转这个结果：

```
 Paul  | John  | Tim  |  Eric
Red     1       5       1       3
Green   8       4       3       5
Blue    2       2       9       1 
```

进入这个：

```
 Red  | Green | Blue
Paul    1       8       2
John    5       4       2
Tim     1       3       9
Eric    3       5       1 
```

`PIVOT`对于这种情况似乎太复杂了。

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2012-11-14T10:33:34.497

有几种方法可以转换此数据。在您原来的帖子中，您说这`PIVOT`对于这种情况来说似乎太复杂了，但是可以很容易地使用SQL Server 中的[`UNPIVOT`和函数来应用它。`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx?ppud=4)

但是，如果您无权访问这些函数，则可以使用`UNION ALL`to复制此`UNPIVOT`函数，然后使用带有`CASE`语句 to的聚合函数`PIVOT`：

**创建表：**

```
CREATE TABLE yourTable([color] varchar(5), [Paul] int, [John] int, [Tim] int, [Eric] int);

INSERT INTO yourTable
    ([color], [Paul], [John], [Tim], [Eric])
VALUES
    ('Red', 1, 5, 1, 3),
    ('Green', 8, 4, 3, 5),
    ('Blue', 2, 2, 9, 1); 
```

**联合所有、聚合和案例版本：**

```
select name,
  sum(case when color = 'Red' then value else 0 end) Red,
  sum(case when color = 'Green' then value else 0 end) Green,
  sum(case when color = 'Blue' then value else 0 end) Blue
from
(
  select color, Paul value, 'Paul' name
  from yourTable
  union all
  select color, John value, 'John' name
  from yourTable
  union all
  select color, Tim value, 'Tim' name
  from yourTable
  union all
  select color, Eric value, 'Eric' name
  from yourTable
) src
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9a05d/1)

通过将列转换为单独的行来`UNION ALL`执行数据。然后将聚合函数与语句一起应用以获取每个.`UNPIVOT``Paul, John, Tim, Eric``sum()``case``color`

**Unpivot 和 Pivot 静态版本：**

SQL Server 中的`UNPIVOT`和函数都使这种转换变得更加容易。`PIVOT`如果您知道要转换的所有值，则可以将它们硬编码为静态版本以获得结果：

```
select name, [Red], [Green], [Blue]
from
(
  select color, name, value
  from yourtable
  unpivot
  (
    value for name in (Paul, John, Tim, Eric)
  ) unpiv
) src
pivot
(
  sum(value)
  for color in ([Red], [Green], [Blue])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/09920/4)

带有 的内部查询`UNPIVOT`执行与 相同的功能`UNION ALL`。它获取列列表并将其转换为行，`PIVOT`然后执行最终转换为列。

**动态枢轴版本：**

如果您有未知数量的列（`Paul, John, Tim, Eric`在您的示例中），然后有未知数量的颜色要转换，您可以使用动态 sql 生成列表`UNPIVOT`，然后`PIVOT`：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name <> 'color'
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(color)
                    from yourtable t
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select name, '+@colsPivot+'
      from
      (
        select color, name, value
        from yourtable
        unpivot
        (
          value for name in ('+@colsUnpivot+')
        ) unpiv
      ) src
      pivot
      (
        sum(value)
        for color in ('+@colsPivot+')
      ) piv'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/09920/5)

动态版本查询两者`yourtable`，然后查询`sys.columns`表以生成 和 的项目`UNPIVOT`列表`PIVOT`。然后将其添加到要执行的查询字符串中。动态版本的优点是如果您有一个不断变化的列表`colors`和/或`names`这将在运行时生成列表。

所有三个查询都将产生相同的结果：

```
| NAME | RED | GREEN | BLUE |
-----------------------------
| Eric |   3 |     5 |    1 |
| John |   5 |     4 |    2 |
| Paul |   1 |     8 |    2 |
|  Tim |   1 |     3 |    9 | 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-14T02:58:55.903

这通常需要您事先了解所有列和行标签。正如您在下面的查询中看到的那样，标签全部在 UNPIVOT 和 (re)PIVOT 操作中完全列出。

**MS SQL Server 2012 架构设置**：

```
create table tbl (
    color varchar(10), Paul int, John int, Tim int, Eric int);
insert tbl select 
    'Red' ,1 ,5 ,1 ,3 union all select
    'Green' ,8 ,4 ,3 ,5 union all select
    'Blue' ,2 ,2 ,9 ,1; 
```

**查询 1**：

```
select *
from tbl
unpivot (value for name in ([Paul],[John],[Tim],[Eric])) up
pivot (max(value) for color in ([Red],[Green],[Blue])) p 
```

**[结果](http://sqlfiddle.com/#!6/82a70/1/0)**：

```
| NAME | RED | GREEN | BLUE |
-----------------------------
| Eric |   3 |     5 |    1 |
| John |   5 |     4 |    2 |
| Paul |   1 |     8 |    2 |
|  Tim |   1 |     3 |    9 | 
```

## 补充说明：

1.  *给定一个表名，您可以使用local-name()从**sys.columns*或 FOR XML技巧中确定所有列名。
**   您还可以使用 FOR XML 建立不同颜色的列表（或一列的值）。*   以上可以组合成一个动态的sql批处理来处理任何表。*

 ** * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-06-28T08:36:32.857

我想指出更多在 SQL 中转置列和行的解决方案。

第一个是 - 使用 CURSOR。尽管专业社区的普遍共识是远离 SQL Server 游标，但仍有一些情况建议使用游标。无论如何，Cursors 为我们提供了另一种将行转换为列的选项。

*   **纵向扩展**

    与 PIVOT 类似，游标具有在数据集扩展以包含更多策略编号时追加更多行的动态能力。

*   **横向扩展**

    与 PIVOT 不同，光标在此区域中表现出色，因为它能够扩展以包含新添加的文档，而无需更改脚本。

*   **性能细分**

    使用 CURSOR 将行转换为列的主要限制是与使用游标相关的一个缺点——它们会带来显着的性能成本。这是因为 Cursor 会为每个 FETCH NEXT 操作生成一个单独的查询。

将行转换为列的另一种解决方案是使用 XML。

将行转换为列的 XML 解决方案基本上是 PIVOT 的最佳版本，因为它解决了动态列限制。

脚本的 XML 版本通过使用 XML 路径、动态 T-SQL 和一些内置函数（即 STUFF、QUOTENAME）的组合来解决此限制。

*   **纵向扩展**

    与 PIVOT 和 Cursor 类似，可以在 XML 版本的脚本中检索新添加的策略，而无需更改原始脚本。

*   **横向扩展**

    与 PIVOT 不同，新添加的文档可以在不更改脚本的情况下显示。

*   **性能细分**

    在 IO 方面，XML 版本脚本的统计数据几乎与 PIVOT 相似——唯一的区别是 XML 对 dtTranspose 表进行了第二次扫描，但这次来自逻辑读取——数据缓存。

您可以在本文中找到有关这些解决方案的更多信息（包括一些实际的 T-SQL 示例）： [https ://www.sqlshack.com/multiple-options-to-transposing-rows-into-columns/](https://www.sqlshack.com/multiple-options-to-transposing-rows-into-columns/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-11-11T02:21:47.590

基于[bluefeet的这个](https://stackoverflow.com/users/426671/bluefeet)[解决方案](https://stackoverflow.com/a/13377114/2293703)，这里是一个使用动态 sql 生成转置表的存储过程。它要求所有字段都是数字，除了转置列（将成为结果表中的标题的列）：

```
/****** Object:  StoredProcedure [dbo].[SQLTranspose]    Script Date: 11/10/2015 7:08:02 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Paco Zarate
-- Create date: 2015-11-10
-- Description: SQLTranspose dynamically changes a table to show rows as headers. It needs that all the values are numeric except for the field using for     transposing.
-- Parameters: @TableName - Table to transpose
--             @FieldNameTranspose - Column that will be the new headers
-- Usage: exec SQLTranspose <table>, <FieldToTranspose>
-- =============================================
ALTER PROCEDURE [dbo].[SQLTranspose] 
  -- Add the parameters for the stored procedure here
  @TableName NVarchar(MAX) = '', 
  @FieldNameTranspose NVarchar(MAX) = ''
AS
BEGIN
  -- SET NOCOUNT ON added to prevent extra result sets from
  -- interfering with SELECT statements.
  SET NOCOUNT ON;

  DECLARE @colsUnpivot AS NVARCHAR(MAX),
  @query  AS NVARCHAR(MAX),
  @queryPivot  AS NVARCHAR(MAX),
  @colsPivot as  NVARCHAR(MAX),
  @columnToPivot as NVARCHAR(MAX),
  @tableToPivot as NVARCHAR(MAX), 
  @colsResult as xml

  select @tableToPivot = @TableName;
  select @columnToPivot = @FieldNameTranspose

  select @colsUnpivot = stuff((select ','+quotename(C.name)
       from sys.columns as C
       where C.object_id = object_id(@tableToPivot) and
             C.name <> @columnToPivot 
       for xml path('')), 1, 1, '')

  set @queryPivot = 'SELECT @colsResult = (SELECT  '','' 
                    + quotename('+@columnToPivot+')
                  from '+@tableToPivot+' t
                  where '+@columnToPivot+' <> ''''
          FOR XML PATH(''''), TYPE)'

  exec sp_executesql @queryPivot, N'@colsResult xml out', @colsResult out

  select @colsPivot = STUFF(@colsResult.value('.', 'NVARCHAR(MAX)'),1,1,'')

  set @query 
    = 'select name, rowid, '+@colsPivot+'
        from
        (
          select '+@columnToPivot+' , name, value, ROW_NUMBER() over (partition by '+@columnToPivot+' order by '+@columnToPivot+') as rowid
          from '+@tableToPivot+'
          unpivot
          (
            value for name in ('+@colsUnpivot+')
          ) unpiv
        ) src
        pivot
        (
          sum(value)
          for '+@columnToPivot+' in ('+@colsPivot+')
        ) piv
        order by rowid'
  exec(@query)
END 
```

您可以使用此命令提供的表对其进行测试：

```
exec SQLTranspose 'yourTable', 'color' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-02T10:32:28.110

我`UnPivot`首先将结果存储在`CTE`并使用`CTE`in`Pivot`操作。

[演示](http://www.sqlfiddle.com/#!6/a70afd/25)

```
with cte as
(
select 'Paul' as Name, color, Paul as Value 
 from yourTable
 union all
 select 'John' as Name, color, John as Value 
 from yourTable
 union all
 select 'Tim' as Name, color, Tim as Value 
 from yourTable
 union all
 select 'Eric' as Name, color, Eric as Value 
 from yourTable
 )

select Name, [Red], [Green], [Blue]
from
(
select *
from cte
) as src
pivot 
(
  max(Value)
  for color IN ([Red], [Green], [Blue])
) as Dtpivot; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-19T18:25:38.237

添加到上面@Paco Zarate 的绝妙答案，如果要转置具有多种类型列的表，则将其添加到第 39 行的末尾，因此它只转置`int`列：

```
and C.system_type_id = 56   --56 = type int 
```

这是正在更改的完整查询：

```
select @colsUnpivot = stuff((select ','+quotename(C.name)
from sys.columns as C
where C.object_id = object_id(@tableToPivot) and
      C.name <> @columnToPivot and C.system_type_id = 56    --56 = type int
for xml path('')), 1, 1, '') 
```

要查找其他`system_type_id`'s，请运行以下命令：

```
select name, system_type_id from sys.types order by name 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-16T19:00:52.030

这种方式将表中文件（列）中的所有数据转换为记录（行）。

```
Declare @TableName  [nvarchar](128)
Declare @ExecStr    nvarchar(max)
Declare @Where      nvarchar(max)
Set @TableName = 'myTableName'
--Enter Filtering If Exists
Set @Where = ''

--Set @ExecStr = N'Select * From '+quotename(@TableName)+@Where
--Exec(@ExecStr)

Drop Table If Exists #tmp_Col2Row

Create Table #tmp_Col2Row
(Field_Name nvarchar(128) Not Null
,Field_Value nvarchar(max) Null
)

Set @ExecStr = N' Insert Into #tmp_Col2Row (Field_Name , Field_Value) '
Select @ExecStr += (Select N'Select '''+C.name+''' ,Convert(nvarchar(max),'+quotename(C.name) + ') From ' + quotename(@TableName)+@Where+Char(10)+' Union All '
         from sys.columns as C
         where (C.object_id = object_id(@TableName)) 
         for xml path(''))
Select @ExecStr = Left(@ExecStr,Len(@ExecStr)-Len(' Union All '))
--Print @ExecStr
Exec (@ExecStr)

Select * From #tmp_Col2Row
Go 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-03T15:33:59.203

我喜欢分享我用来转置基于 +bluefeet 答案的拆分文本的代码。在这种方法中，我被实现为 MS **SQL 2005中的一个过程**

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      ELD.
-- Create date: May, 5 2016.
-- Description: Transpose from rows to columns the user split function.
-- =============================================
CREATE PROCEDURE TransposeSplit @InputToSplit VARCHAR(8000)
    ,@Delimeter VARCHAR(8000) = ','
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @colsUnpivot AS NVARCHAR(MAX)
        ,@query AS NVARCHAR(MAX)
        ,@queryPivot AS NVARCHAR(MAX)
        ,@colsPivot AS NVARCHAR(MAX)
        ,@columnToPivot AS NVARCHAR(MAX)
        ,@tableToPivot AS NVARCHAR(MAX)
        ,@colsResult AS XML

    SELECT @tableToPivot = '#tempSplitedTable'

    SELECT @columnToPivot = 'col_number'

    CREATE TABLE #tempSplitedTable (
        col_number INT
        ,col_value VARCHAR(8000)
        )

    INSERT INTO #tempSplitedTable (
        col_number
        ,col_value
        )
    SELECT ROW_NUMBER() OVER (
            ORDER BY (
                    SELECT 100
                    )
            ) AS RowNumber
        ,item
    FROM [DB].[ESCHEME].[fnSplit](@InputToSplit, @Delimeter)

    SELECT @colsUnpivot = STUFF((
                SELECT ',' + quotename(C.NAME)
                FROM [tempdb].sys.columns AS C
                WHERE C.object_id = object_id('tempdb..' + @tableToPivot)
                    AND C.NAME <> @columnToPivot
                FOR XML path('')
                ), 1, 1, '')

    SET @queryPivot = 'SELECT @colsResult = (SELECT  '','' 
                    + quotename(' + @columnToPivot + ')
                  from ' + @tableToPivot + ' t
                  where ' + @columnToPivot + ' <> ''''
          FOR XML PATH(''''), TYPE)'

    EXEC sp_executesql @queryPivot
        ,N'@colsResult xml out'
        ,@colsResult OUT

    SELECT @colsPivot = STUFF(@colsResult.value('.', 'NVARCHAR(MAX)'), 1, 1, '')

    SET @query = 'select name, rowid, ' + @colsPivot + '
        from
        (
          select ' + @columnToPivot + ' , name, value, ROW_NUMBER() over (partition by ' + @columnToPivot + ' order by ' + @columnToPivot + ') as rowid
          from ' + @tableToPivot + '
          unpivot
          (
            value for name in (' + @colsUnpivot + ')
          ) unpiv
        ) src
        pivot
        (
          MAX(value)
          for ' + @columnToPivot + ' in (' + @colsPivot + ')
        ) piv
        order by rowid'

    EXEC (@query)

    DROP TABLE #tempSplitedTable
END
GO 
```

我正在将此解决方案与有关如何在没有 order by ( [SQLAuthority.com](http://blog.sqlauthority.com/2015/05/05/sql-server-generating-row-number-without-ordering-any-columns/ "SQL 授权") ) 的情况下对行进行排序的信息以及 MSDN ( [social.msdn.microsoft.com](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/4126a010-6885-4eb0-b79c-c798c90edb85/how-to-split-comma-delimited-string?forum=transactsql "MSDN 论坛") )上的拆分功能的信息混合使用

当你执行程序时

```
DECLARE @RC int
DECLARE @InputToSplit varchar(MAX)
DECLARE @Delimeter varchar(1)

set @InputToSplit = 'hello|beautiful|world'
set @Delimeter = '|'

EXECUTE @RC = [TransposeSplit] 
   @InputToSplit
  ,@Delimeter
GO 
```

你得到下一个结果

```
 name       rowid  1      2          3
  col_value  1      hello  beautiful  world 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-04T12:48:01.830

我能够使用 Paco Zarate 的解决方案，而且效果很好。我确实必须添加一行（“SET ANSI_WARNINGS ON”），但这可能是我使用或调用它的方式所独有的。我的使用有问题，希望有人可以帮助我：

该解决方案仅适用于实际的 SQL 表。我用一个临时表和一个内存（声明的）表尝试了它，但它不适用于这些表。所以在我的调用代码中，我在我的 SQL 数据库上创建了一个表，然后调用 SQLTranspose。再次，它工作得很好。这正是我想要的。这是我的问题：

为了使整体解决方案真正动态化，我需要创建该表，在其中临时存储准备“即时”发送到 SQLTranspose 的信息，然后在调用 SQLTranspose 后删除该表。表删除给我的最终实施计划带来了问题。代码需要从最终用户应用程序（Microsoft Access 表单/菜单上的按钮）运行。当我使用此 SQL 过程（创建 SQL 表、调用 SQLTranspose、删除 SQL 表）时，最终用户应用程序遇到错误，因为使用的 SQL 帐户没有删除表的权限。

所以我认为有几个可能的解决方案：

1.  找到一种方法使 SQLTranspose 与临时表或声明的表变量一起工作。

2.  找出另一种不需要实际 SQL 表的行和列转置方法。

3.  找出允许我的最终用户使用的 SQL 帐户删除表的适当方法。它是编码到我的 Access 应用程序中的单个共享 SQL 帐户。似乎权限是无法授予的 dbo 类型特权。

我认识到其中一些可能需要另一个单独的线程和问题。但是，由于一种解决方案可能只是一种不同的方式来进行行和列的转置，因此我将在此线程中发表我的第一篇文章。

编辑：正如 Paco 建议的那样，我也确实在最后的第 6 行用 max(value) 替换了 sum(value)。

编辑：

我想出了一些对我有用的东西。我不知道这是否是*最好*的答案。

我有一个只读用户帐户，用于执行存储过程并因此从数据库生成报告输出。由于我创建的 SQLTranspose 函数仅适用于“合法”表（不是已声明的表，也不是临时表），因此我必须想办法让只读用户帐户创建（然后删除）表.

我推断，出于我的目的，允许用户帐户创建表是可以的。用户仍然无法删除该表。我的解决方案是创建一个授权用户帐户的架构。然后，每当我创建、使用或删除该表时，请使用指定的模式引用它。

我首先从“sa”或“sysadmin”帐户发出此命令：CREATE SCHEMA ro AUTHORIZATION

每当我提到我的“tmpoutput”表时，我都会像这个例子一样指定它：

删除表 ro.tmpoutput*

# apache-flex - 通过设置它的源或更改它的引用来重置 ArrayCollection 有什么区别吗

> ID：13372277
> 
> 赞同：0
> 
> 时间：2012-11-14T02:44:25.483
> 
> 标签：apache-flex, arraycollection

我现在有两个 ArrayCollection (a, b) 并且 a 设置为可绑定的。我想用b重置a。

我们项目中的旧代码是这样的：

```
a = new ArrayCollection();
for (var i:int = 0; i < b.length; i++) {
    a.addItem(b.getItemAt(i));
} 
```

然后，我认为这可能会导致潜在的内存泄漏。所以我把它改成：

```
a.removeAll();
for (var i:int = 0; i < b.length; i++) {
    a.addItem(b.getItemAt(i));
} 
```

然后我看了一个题目：[Flex 优化技巧：ArrayCollection.removeAll() vs. ArrayCollection.source = new Array()。这是一个错误吗？](http://www.arpitonline.com/blog/2008/02/16/flex-optimization-tip-arraycollectionremoveall-vs-arraycollectionsource-new-array-is-this-a-bug/) 它说当数据集很大时 removeAll() 会导致性能问题。

那么这是否意味着有一个诡计？如果数据集小我应该使用removeAll，如果数据集很大我不应该使用removeAll()？

另一个问题，我还阅读了有关[更改 ArrayCollection 的来源的](http://www.arpitonline.com/blog/2007/05/28/flex-tip-changing-the-source-of-an-arraycollection/)主题。它说如果直接使用 a = b，“它将杀死所有正在侦听 ArrayCollection 实例上的事件的数据绑定控件”。我不明白这一点。我尝试了 a = b，它工作正常（使用 a 作为数据提供者更新的视图）。

使用 a=b 和 a.source = b.source 有什么区别？

我是 Flex 的新手。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:29:57.690

[ArrayCollection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ArrayCollection.html) is a wrapper class around [Array](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html), and underlying Array can be access using source property

> The ArrayCollection class is a wrapper class that exposes an Array as a collection that can be accessed and manipulated using the methods and properties of the ICollectionView or IList interfaces. Operations on a ArrayCollection instance modify the data source; for xample, if you use the removeItemAt() method on an ArrayCollection, you remove the item from the underlying Array.

*   so one should always use Source property of ArrayCollection, if have populated Array i suggest to declare **b** as Array not as ArrayCollection and initialize **a** as

> ```
> a = new ArrayCollection(b); or 
> 
> a= new ArrayCollection();// Default constructor ArrayCollection(source:Array=null);
> a.source = b; //updates data in Arraycollection 
> ```

[Data Binding](http://livedocs.adobe.com/flex/3/html/help.html?content=databinding_2.html) means bound controls with datasource(could be any thing like functions, objects, other control, Array, XML, Collection, List etc)

> Data binding is the process of tying the data in one object to another object. It provides a convenient way to pass data between the different layers of the application. Data binding requires a source property, a destination property, and a triggering event that indicates when to copy the data from the source to the destination. An object dispatches the triggering event when the source property changes.

*   Data Binding could be harmful for application with large data because it would creates multiple changes events and both getter and setter executes on change, which need extra proccessing so it would be good practice to shorter scope of **a** and provide data directly to source as

> ```
> private function handler_B_DataChange(event:Event)
> {
> var a:Arraycollection = new ArrayCollection(b);
> controlA.dataProvider = a;
> //or just
> controlB.dataProvider = new ArrayCollection(b);
> } 
> ```

Details of binding could be view on [Binding to functions, Objects, and Arrays](http://livedocs.adobe.com/flex/3/html/help.html?content=databinding_4.html)

Hopes that Helps

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:21:54.437

我也会尝试：

```
a.removeAll();
a.addAll(b.list); 
```

当您声明：

```
a = new ArrayCollection() 
```

它丢失了指向绑定到应用程序的“旧”ArrayCollection 的指针。因此，这就是为什么当您执行“new ArrayCollection”时绑定不再起作用的原因。但是，在您的示例中，您并没有创建“新的 ArrayCollection”......您只是用其他东西替换了 ArrayCollection 中的对象......所以绑定仍然有效。

如果您有成千上万的数据，您可能需要考虑实现某种分页。如果只是几百个，那么我认为您不必太担心 a.removeAll(); 的性能。

# ruby-on-rails-3 - 单表继承 (STI)... 多表继承 (MTI)... 多态关联

> ID：13372284
> 
> 赞同：0
> 
> 时间：2012-11-14T02:45:24.590
> 
> 标签：ruby-on-rails-3

所以我找到了很多关于这些主题的帖子，但没有一个回答我（可能是非常新手）的问题。这个月我是 Rails 的新手，但我已经在 OOL 中编程了一段时间。我认为我的问题可能涉及有关 Ruby on Rails 的多个主题。我不介意阅读多个博客或教程来平息这一切。

我有 4 个位置模型。每个都有一个“名称”属性。

1.  国家（has_many :states）
2.  州（belongs_to :country has_many :counties has_many :cities, :through => :counties）
3.  县 (belongs_to :state has_many :cities)
4.  城市

我的最终目标是为城市、县、州创建一个自动填充文本框。用户将选择一个国家来缩小结果范围。例如，用户输入“SA”，自动完成文本框将显示：

1.  堪萨斯
2.  阿肯色州
3.  加利福尼亚州圣克拉拉县
4.  加利福尼亚州圣克拉拉县圣何塞
5.  等等

所以我可以轻松地返回我想要显示的文本。每个模型都有类似的东西：

> 定义位置名称
> 
> // 此模型的显示名称。例如，我们希望县模型返回“加利福尼亚州圣克拉拉县”
> 
> “#{name}，#{state.name}”
> 
> 结尾

我试图研究的解决方案：

1.  **Active Record Query Interface**用于在多个表中创建一个 select 语句。我的目标是在多个模型中进行搜索，并获得一个名称包含搜索文本的对象列表。

2.  **STI** - 也许创建一个所有都可以继承的 Location 模型，但我在网上找不到任何包含具有不同属性的模型的基本教程。我是否“生成”一个模型，其中包含所有 5 个需要的所有字段，然后从自动生成的 .rb 文件中删除它们？我假设我将能够使用 Location.where("name like ? and country_id = ?", params[:search], params[:country_id]) 并获得适合搜索参数的所有位置的完整列表。

3.  **MTI** - 我看了这个，因为我不喜欢数据库中的多余列，这些列大多是空白的。例如 :country_id 只会被州使用。所以它对于所有县市等都是空的。但是所有的教程似乎都暗示 STI 会是更好的方法。

4.  **多态关联**——我几个小时前才开始研究这个。我发现了一些关于 ":polymorphic => true" 的内容，并且我阅读了另一篇关于子类特性的文章。

根据 Ruby，我花了好几天的时间研究这样做的“正确”方式。我真的很想学习并整合所有 ruby​​ 所提供的东西。感谢您的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:37:44.233

也许您也可以观看此视频以进一步发展。

[http://railscasts.com/episodes/88-dynamic-select-menus](http://railscasts.com/episodes/88-dynamic-select-menus)

我猜你的情况一对多应该没问题。就像这个国家有很多州，相应的州有很多城市。

如我错了请纠正我 @@

# c# - C# 到 Coldfusion 的 Base64String 翻译

> ID：13372285
> 
> 赞同：1
> 
> 时间：2012-11-14T02:45:35.337
> 
> 标签：c#, coldfusion, base64, azure-storage, coldfusion-9

试图将 C# 代码转换为 CF 并且我坚持翻译以下行

```
StorageKey = 'abcd';
Convert.FromBase64String(StorageKey) 
```

上面的行产生一个 105,183,29 的字节数组

该行取自 Azure 的创建授权标头；

```
System.Security.Cryptography.HMACSHA256 SHA256 = new System.Security.Cryptography.HMACSHA256(Convert.FromBase64String(StorageKey)); 
```

我在 msdn 库上查找了 FromBase64String 方法，但它在我头上。我希望有人能指出我正确的 Coldfusion 方向。

我试过 BinaryDecode(StorageKey,"BASE64")，对我来说这似乎是最合乎逻辑的翻译，但我得到了 105-7329，这不是我的预期结果。

请参阅下面 Leigh 对 CF10+ 的回答，如果您在使用 CF7-9 解决方案，这是我的尝试

```
var javaMsg = javacast("string", arguments.sigMsg).getBytes("UTF-8");
var javaKey    = JavaCast("string", arguments.sigKey);
var myKey     = createObject('java', 'javax.crypto.spec.SecretKeySpec' );
var mac     = createObject('java', "javax.crypto.Mac");
var myKeyB64  = CreateObject("java", "org.apache.commons.codec.binary.Base64").decodeBase64(javaKey.getBytes());
var secret  = myKey.Init(myKeyB64, 'HmacSHA256');
mac         = mac.getInstance("HmacSHA256");
mac.init(secret);
</cfscript>
<cfdump var="#mac.doFinal(javaMsg)#"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:29:36.520

C# 将结果视为无符号字节，而 ColdFusion 将它们视为有符号字节。

128 以下的值在 C# 和 ColdFusion 中相同，而在 C# 中超过 128 的值在 ColdFusion 中为负数（[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)）。

因此，要转换回来，请将 256 添加到任何负值。

**编辑**

对于从 BinaryDecode 返回的实际字节，这可能不是问题。在调试期间，ColdFusion 如何决定将这些字节打印到屏幕上可能只是一个问题。

比较从 C# 和 ColdFusion 获得的实际二进制值（例如，通过将值保存到二进制文件而不是打印到屏幕上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:54:29.193

> 该行取自 Azure 的创建授权标头；

mbeckish 关于 C# 和 CF/java 之间的符号差异是正确的。但是，我认为内部表示不应该对您的*最终结果产生*任何影响，这通常是您所关心的。通常，您不需要匹配低级整数值，只需匹配 base64 或十六进制字节的*字符串表示形式*。只要您以通用格式（如 base64）比较最终的 HMAC 值，它们应该完全相同。

例如，如果您在[此处获取示例签名字符串](http://blogs.msdn.com/b/sergeim/archive/2008/12/10/request-authorization-in-azure-sdk.aspx)，则 CF10 和 C# 都返回相同的值。因此，您的问题似乎可能是其他问题。

```
<cfscript>
    savecontent variable="signatureString" {
        WriteOutput("GET#chr(10)##chr(10)##chr(10)##chr(10)#x-ms-date:Mon, 01 Dec 2008 05:17:57 GMT#chr(10)#/accountname/queuename/messages");
    };
    key = binaryDecode("abcd", "base64");
    resultInHex = hmac(signatureString, key,"HMACSHA256");
    // result: wxR7Bt6sWEKVJ9vEjCiuqA8OKCZOKYfbxaXj85whOkM=
    WriteDump(binaryEncode(binaryDecode(resultInHex, "hex"), "base64"));
</cfscript> 
```

**编辑：**我知道有一堆 CF10 之前的 hmac 函数。但是他们中的许多人忘记了编码。这是一个接受算法（“hmacsha256”、“hmacsha1”、..）和编码（“utf-8”）的通用适配。它*应该*适用于 CF7-9。

```
<cfset result = hmacX( signatureString, "abcd", "HmacSHA256") />
<cfdump var="#result#" />

<cffunction name="hmacX" returntype="string" hint="">
    <cfargument name="message" type="string" required="true" />
    <cfargument name="keyInBase64" type="any" required="true" />
    <cfargument name="algorithm" type="string" default="HmacSHA256" />
    <cfargument name="encoding" type="string" default="UTF-8" />

    <cfset var dataBytes  = charsetDecode( arguments.message, arguments.encoding ) />
    <cfset var keyBytes  = binaryDecode( arguments.keyInBase64, "base64" ) />
    <cfset var keySpec = createObject("java", "javax.crypto.spec.SecretKeySpec") />
    <cfset var secret = keySpec.init( keyBytes, arguments.algorithm ) />
    <cfset var mac  = createObject("java", "javax.crypto.Mac").getInstance( arguments.algorithm ) />

    <cfset mac.init( secret ) />

    <cfreturn binaryEncode( mac.doFinal(dataBytes), "base64") />
</cffunction> 
```

# jquery - jquery - 缩短代码

> ID：13372291
> 
> 赞同：0
> 
> 时间：2012-11-14T02:46:08.837
> 
> 标签：jquery

我只是想知道如何将这段代码变成一个函数，而不是像下面这样重写 6 次。我对这些东西很害怕。我相信有办法做到这一点，我只是不知道。任何帮助都会很棒。

```
 (function() {
    $('.one').click(function() {
      $('.glennpage').show();
      $('.emmapage').hide();
      $('.brodiepage').hide();
      $('.laurenpage').hide();
      $('.mattpage').hide();
      $('.jeremypage').hide();
    });
  });
$(function() {
    $('.two').click(function() {
      $('.glennpage').hide();
      $('.emmapage').show();
      $('.brodiepage').hide();
      $('.laurenpage').hide();
      $('.mattpage').hide();
      $('.jeremypage').hide();
    });
});
$(function() {
    $('.three').click(function() {
      $('.glennpage').hide();
      $('.emmapage').hide();
      $('.brodiepage').show();
      $('.laurenpage').hide();
      $('.mattpage').hide();
      $('.jeremypage').hide();
    });
});
$(function() {
    $('.four').click(function() {
      $('.glennpage').hide();
      $('.emmapage').hide();
      $('.brodiepage').hide();
      $('.laurenpage').show();
      $('.mattpage').hide();
      $('.jeremypage').hide();
    });
});
$(function() {
    $('.five').click(function() {
      $('.glennpage').hide();
      $('.emmapage').hide();
      $('.brodiepage').hide();
      $('.laurenpage').hide();
      $('.mattpage').show();
      $('.jeremypage').hide();
    });
});
$(function() {
    $('.six').click(function() {
      $('.glennpage').hide();
      $('.emmapage').hide();
      $('.brodiepage').hide();
      $('.laurenpage').hide();
      $('.mattpage').hide();
      $('.jeremypage').show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:49:15.077

您可以通过添加 1 个函数来缩短代码：

```
function hideAll() {
      $('.glennpage').hide();
      $('.emmapage').hide();
      $('.brodiepage').hide();
      $('.laurenpage').hide();
      $('.mattpage').hide();
      $('.jeremypage').hide();
} 
```

然后，供您点击：

```
$(function() {
    $('.three').click(function() {
      hideAll();
      $('.brodiepage').show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T02:52:33.697

您的 HTML 中可以包含 HTML-5 数据属性。

```
$(function() {
    $('.one,.two,.three,.four,.five , .six ').on('click' , function() {
        $('.glennpage,.emmapage,.brodiepage,.laurenpage , 
                                .mattpage,.jeremypage ').hide() ;   
       // Hide All

        var class = $(this).data('class');
        $('.'+class).show();
    });
}); 
```

假设 .one ， .two 是 div 的我会添加 data-class 属性给他们。

```
<div class="one" data-class="glennpage"​​​​​​​​​​ ></div>

<div class="two" data-class="emmapage" ></div>​ 
```

.. 等等

更好的方法是为 Question 中的所有元素设置一个通用类，这样也可以完成工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T03:00:50.107

这应该适用于您当前的设置：

```
var $names = $('.glennpage, .emmapage, .brodiepage, .laurenpage, .mattpage, .jeremypage'),
    classes = ['one', 'two', 'three', 'four', 'five', 'six'];
$.each( classes, function( i,v ) {
  $('.'+ v).click(function() { $names.hide().eq( i ).show(); });
}); 
```

尽管我建议您摆脱非语义类“一”、“二”等，并为所有这些类仅使用一个有意义的类，然后按索引定位您的页面元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T03:17:10.617

首先，您有多个 document.ready 函数，它们可以组合成一个。

```
$(function() {
    $('.one').click(function() {

    });
    $('.two').click(function() {

    });
    $('.three').click(function() {

    });
    etc...
}); 
```

然后正如@Shivan Raptor 提到的，您可以将显示/隐藏代码移动到一个函数中。但是@Shivan Raptor 的代码功能的问题在于它只是隐藏了您选择的所有元素，这似乎不是您想要做的。根据您所拥有的，您似乎正在尝试执行一组选项卡之类的操作，其中单击一个会显示某个选项卡部分，并隐藏所有其他选项卡部分。单击下一个选项卡会显示其相应的选项卡部分，并隐藏所有其他选项卡，等等...

如果这就是你想要的，我建议为你的每个 html 元素添加一个 ID。所以不要这样做：

```
<div class='glennpage'></div>
<div class='emmapage'></div>
<div class='brodiepage'></div>
etc... 
```

这样做：并添加一个类，以便您可以轻松地一次选择它们

```
<div id='glennpage' class="tabContent"></div>
<div id='emmapage' class="tabContent"></div>
<div id='brodiepage' class="tabContent"></div>
etc... 
```

然后，不要在您的按钮元素（或您的触发器是什么元素）上使用 .one、.two、.three 等，而是使用与您的 tabContent 部分之一上的其中一个 id 匹配的类：

```
<button class="glennpage"></button>
<button class="emmapage"></button>
<button class="brodiepage"></button>
etc... 
```

现在我们可以将您的 jquery 重写为如下内容：

```
$('.one','.two','.three','.four','.five','.six').click(function() {
    $('.tabContent').hide();
    $(this).find('#' + $(this).attr('id')).show();
}); 
```

现在，当您单击其中一个按钮时，jquery 将隐藏所有具有 .tabContent 类的元素，这是您的所有部分，然后它将查找具有相应 id 的元素并显示该元素。希望有帮助！

# ruby-on-rails - 当内部抛出错误时，如何使循环完成？

> ID：13372295
> 
> 赞同：1
> 
> 时间：2012-11-14T02:46:36.337
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如果我有一个循环，并且在循环中的某个地方，我会得到一个异常或错误。我如何保持循环继续？

```
Foos.each do |foo|
  ....
  # Random error/exception thrown here
  ....
end 
```

我应该`rescue`在循环中有一个块吗？这会使循环完成吗？还是有更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T02:48:08.107

您可以使用添加`begin/rescue`块。如果出现错误，我不确定是否有其他方法可以保持循环继续进行。

```
4.times do |i|
  begin
    raise if i == 2
    puts i
  rescue
    puts "an error happened but I'm not done yet."
  end
end
# 0
# 1
# an error happened but I'm not done yet.
# 3
#=> 4 
```

另一方面，由于您的标题要求一种结束循环的方法。
如果您希望循环以 结束`rescue`，您可以使用`break`.

```
4.times do |i|
  begin
    raise if i == 2
    puts i
  rescue
    puts "an error happened and I'm done."
    break
  end
end
# 0
# 1
# an error happened and I'm done.
#=> nil 
```

# ruby - 为什么要在框架 Web 服务器前使用 http 服务器？

> ID：13372297
> 
> 赞同：22
> 
> 时间：2012-11-14T02:46:44.763
> 
> 标签：ruby, scala, playframework, sinatra, lift

Web 应用程序框架，例如 sinatra (ruby)、play (scala)、lift (scala) 会产生一个监听特定端口的 Web 服务器。

我知道有一些原因，例如安全性、集群以及在某些情况下的性能，这可能会导致我在我的 Web 应用程序前面使用 apache Web 服务器。

根据你的经验，你有什么理由吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-14T03:08:58.403

*   任何 Web 应用程序的一部分都是完全标准化和商品化的功能。像 nginx 或 apache 这样成熟的 web 服务器可以做以下事情。他们可以以一种更正确、更有效、更稳定、更安全、系统管理员更熟悉的方式来执行以下操作，并且比您在应用程序服务器中重写的任何内容都更容易配置。
    *   提供静态文件，例如 HTML、图像、CSS、javascript、字体等
    *   处理虚拟主机（单个 IP 地址上的多个域）
    *   网址重写
    *   主机名重写/重定向
    *   TLS 终止（感谢 @emt14）
    *   压缩（感谢@JacobusR）
*   当您的应用程序服务器重新启动或崩溃时，一个单独的 Web 服务器提供了提供“停机维护”页面的能力
*   反向代理可以为您的应用程序框架提供负载平衡和容错
*   Web 服务器具有内置且经过测试的机制，用于以 root 身份绑定到特权端口（低于 1024），然后以非特权用户身份执行。大多数 Web 应用程序框架默认情况下不这样做。
*   成熟的网络服务器是久经沙场且稳定的。稳定，我的意思是它们几乎从不崩溃。您的 Web 应用程序几乎可以肯定远没有那么稳定。这使您能够至少向用户提供一个漂亮的错误页面，说您的应用程序已关闭，而不是 Web 浏览器仅显示一般的“无法连接”错误。
    *   轶事案例：nginx 处理否则会 DoS node.js 的攻击：http: [//blog.nodejs.org/2013/10/22/cve-2013-4450-http-server-pipeline-flood-dos/](http://blog.nodejs.org/2013/10/22/cve-2013-4450-http-server-pipeline-flood-dos/)

[以防万一您想在2013 年 1 月 30 日](https://www.youtube.com/watch?v=zM-gUM9C5SA)的 Airbnb 技术演讲中获得 Isaac Schluetter 的半官方回答，他在 40 分钟内解决了节点是否足够稳定和安全以直接连接到 Internet 的问题。他的回答基本上是“是的”，这很好。所以你可以这样做，从稳定性和安全性的角度来看你可能会很好（假设你正在使用集群来处理应用程序服务器进程的意外终止），但正如上面所详述的，当前操作的现实是几乎每个人都运行节点在单独的 Web 服务器或反向代理/缓存后面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T05:19:05.803

框架通常可以满足您的所有需求，但有时，在其上添加一层可以为您提供看似免费的功能，如压缩、安全、会话管理、负载平衡等。不过，添加 Web 服务器也可能会引入安全问题，例如，您的 Web 服务器安全性可能比 Lift 本身更容易受到威胁。此外，一些 Web 框架具有极强的可扩展性，甚至可能会受到选择不当的 Web 服务器的阻碍。

总之，如果您需要框架未提供的类似 Web 服务器的功能，那么 Web 服务器可能是一个非常好的选择，但请记住，正确配置并定期更新安全补丁等是另一回事。

例如，如果您只需要加密或压缩，那么您可能会发现将正确的库或插件添加到您的框架中可能会做到这一点（并且仅此而已）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T05:54:28.803

我要补充：

*   ssl 处理
*   对于某些服务器，如 apache 很多模块（即 ntml/kerberos 身份验证）
*   与您的应用程序相比，Web 服务器在某些方面要好得多，例如提供静态服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T06:19:10.347

使用代理 http 服务器，框架不需要保持打开 http 连接来提供计算内容，然后可以开始服务其他请求。它充当缓冲区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T08:04:20.197

这是一个重新发明轮子的问题。大多数框架都会为您提供一个开发环境，但对于生产来说，使用能够处理生产过程中出现的所有问题的商业/开源项目通常是一种很好的做法。

构建框架的人将专注于框架，而构建服务器的人正在做同样的事情（完美）。

# windows-8 - 在启动时运行 autostart_console.bat 或 ConEmu 中的新选项卡？

> ID：13372299
> 
> 赞同：15
> 
> 时间：2012-11-14T02:46:49.530
> 
> 标签：windows-8, cmd, conemu

我在 Windows 8 Pro 上使用 ConEmu（强大的 cmd）。

在启动 ConEmu 或打开新选项卡时，如何/在哪里设置 conemu 以运行 autostart_console.bat？

谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-14T07:39:02.547

在大多数情况下，您需要在`Command line`字段中使用以下命令（设置 -> 启动）。

```
cmd /k autostart_console.bat 
```

如果您需要启动其他 shell（不是 cmd.exe），例如[Far Manager](http://www.farmanager.com/)

```
cmd /c autostart_console.bat & far.exe 
```

如果 autostart_console.bat 或 far.exe 不在`%PATH%`.

# php - 原则分离、缓存和合并

> ID：13372305
> 
> 赞同：10
> 
> 时间：2012-11-14T02:47:27.150
> 
> 标签：php, doctrine, doctrine-orm

我在教义2.3。我有以下查询：

```
$em->createQuery('
    SELECT u, c, p
    FROM Entities\User u
    LEFT JOIN u.company c
    LEFT JOIN u.privilege p
    WHERE u.id = :id
')->setParameter('id', $identity) 
```

然后我接受它，得到结果（这是一个数组，我只取第一个元素），然后运行 ​​detach `$em->detach($result);`。

当我从缓存中获取（使用 Doctrine 的 APC 缓存驱动程序）时，我会：

```
$cacheDriver = new \Doctrine\Common\Cache\ApcCache();
if($cacheDriver->contains($cacheId))
{
    $entity = $cacheDriver->fetch($cacheId);
    $em->merge($entity);
    return $entity;
} 
```

我希望这将重新启用实体上的关系加载，因为除了该查询中显示的内容之外，还有许多其他关系与 User 对象相关联。

我正在尝试创建一个像这样的新实体：

```
$newEntity = new Entities\ClientType();
$newEntity['param'] = $data;
$newEntitiy['company'] = $this->user['company'];
$em->persist($newEntity);
$em->flush(); 
```

当我这样做时，我得到一个错误：

```
A new entity was found through the relationship 'Entities\ClientType#company' that was not configured to cascade persist operations for entity:
Entities\Company@000000005d7b49b500000000dd7ad743\. 
To solve this issue: Either explicitly call EntityManager#persist() on this unknown entity or configure cascade persist this association in the mapping for example @ManyToOne(..,cascade={"persist"}). 
If you cannot find out which entity causes the problem implement 'Entities\Company#__toString()' to get a clue. 
```

当我不使用从缓存中获得的用户实体下的公司实体时，这工作得很好。有什么办法可以使这项工作，这样我就不必每次想在与新实体的关系中使用它时都从数据库中重新获取公司实体？

**编辑：** 这就是我在处理这两种关系的用户实体中所拥有的：

```
/**
    * @ManyToOne(targetEntity="Company" , inversedBy="user", cascade={"detach", "merge"})
    */
    protected $company;

    /**
    * @ManyToOne(targetEntity="Privilege" , inversedBy="user", cascade={"detach", "merge"})
    */
    protected $privilege; 
```

我仍然遇到同样的错误。

**第二次编辑：** 尝试 a`$em->contains($this->user);`并且`$em->contains($this->user['company']);`两者都返回 false。这听起来……错了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T08:35:57.393

合并用户时，您希望关联的公司和权限也合并，对吗？

这个过程称为级联：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)

在您的 User 实体中，为 and 放入`cascade={"merge"}`注释（`@ManyToOne`或您正在使用的另一种关联定义）。`$company``$privilege`

如果您也希望 detach 调用也被级联（推荐），请输入`cascade={"detach", "merge"}`.

ps：不要把这样的级联放在一个关联的两边，你会创建一个无限循环；）

**编辑：**

这段代码：

```
$entity = $cacheDriver->fetch($cacheId);
$em->merge($entity);                      // <-
return $entity; 
```

应该：

```
$entity = $cacheDriver->fetch($cacheId);
$entity = $em->merge($entity);            // <-
return $entity; 
```

问题`merge()`是它使您作为参数传递的实体保持不变，并返回一个表示实体的托管版本的**新对象。**所以你想使用返回值，而不是你传递的参数。

# mongodb - 如何使用 C# 驱动程序在 MongoDB 中查询/更新子文档

> ID：13372309
> 
> 赞同：1
> 
> 时间：2012-11-14T02:48:17.727
> 
> 标签：mongodb, select, document, mongodb-.net-driver, updates

```
public class DayData
{
    public string _id
    {get;set;}

    public string Data
    {get;set;}

    public HourData HR1
    {get;set;}

    public HourData HR2
    {get;set;}

    ...

    public HourData HR24
    {get;set;}
 }

public class HourData
{
    public long _id
    {get;set;}

    public int Count
    {get;set;}

    public string Data
    {get;set;}
} 
```

// 样本数据

```
{ 
    "_id": "2012_11_10", 
    "Data": "some data", 
    "HR1": 
    { 
        "_id": 1 
        "Count": 100, 
        "Data": "Hour 1 Data" 
    },
    "HR2": 
    { 
        "_id": 2 
        "Count": 200, 
        "Data": "Hour 2 Data" 
    },

    ...

    "HR24": 
    { 
        "_id": 24 
        "Count": 2400, 
        "Data": "Hour 24 Data" 
    }
} 
```

我有以下问题（通过使用 C# 官方驱动程序）：

1.  如何从 DayData 集合中检索单个 HourData 文档（*使用单个数据库查询*）？例如，我需要为 DayData 检索 HR1 的 HourData 文档（其中 _id="2012_11_10"）。请参阅我尝试作为 Edit-1 的代码片段。

2.  如何更新/更新 HourData 文档以增加其计数（*使用单个数据库操作，例如：collection.update(Query, Update)*）？例如，我需要增加 DayData 的 HR1 计数（其中 _id="2012_11_10"）。

3.  如何检索 DayData 的 HR1、HR2、...、HR24 的所有计数值的总和（其中 _id="2012_11_10"）（*使用一些聚合函数*）。

4.  将所有小时的 HourData 计数转换为数组（对于任何 DayData）的最佳方法是什么。例如，对于 _id="2012_11_10" 的 DayData，我需要：

    int []Counts = [100,200,300, ... , 2400]

**编辑-1**

使用此代码，我打算获取 HR1 的 HourData，其中 _id=1 和 DayData，_id="2012_11_10"，但它不返回任何内容。

```
MongoCollection<HourData> dayInfo = mdb.GetCollection<HourData>("HourData");
var query = Query.And(Query.EQ("_id", "2012_11_10"), Query.EQ("HR1._id", 1));
MongoCursor<HourData> hri = dayInfo.Find(query);' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:46:48.397

1)

```
QueryComplete = Query.EQ(_id, "2012_11_10");
DayData myData = db.GetCollection<DayData>("DayDataCollection").FindOne(query);
// As HourData is the class member you can retrieve it from the instance of the DayData:
HourData myHour = myData.HR1; 
```

2)

```
QueryComplete = Query.EQ(_id, "2012_11_10");
UpdateBuilder update = Update.Inc("HR1.Count", 1);
db.GetCollection<DayData>("DayDataCollection").Update(query, update, SafeMode.True) 
```

;

3）在您的情况下，您只需检索 DayData 实例，然后明确总结所有需要的值：

```
QueryComplete = Query.EQ(_id, "2012_11_10");
DayData myData = db.GetCollection<DayData>("DayDataCollection").FindOne(query);
// As HourData is the class member you can retrieve it from the instance of the DayData:
int sum = myData.HR1.Count + myData.HR2.Count + ... + myData.HR24.Count; 
```

但这并不优雅。如果您想要优雅的解决方案，您需要将字段转换为数组，例如：

```
DayData
{
HR:
[{
Count: 1,
Data: "Hour 1 data"
},
{
},
...
]
} 
```

并像使用数组一样工作。让我知道是否可以将其转换为数组。

4）在你的情况下，同样没有任何优雅的解决方案。您可以做的只是浏览您的字段并创建一个数组：

```
int[] Counts = new int[24];
Counts[0] = myData.HR1.Count;
... 
```

或者您可以在课堂上直接创建枚举器，但我认为在您的情况下这太过分了。

# linux - 从 perl 更改 PATH

> ID：13372310
> 
> 赞同：1
> 
> 时间：2012-11-14T02:48:24.487
> 
> 标签：linux, perl, bash, path, environment-variables

所以我需要从另一个脚本中调用一些 perl 脚本。为了让它从终端工作，我需要去 bash 然后更改 PATH：

```
 export PATH=$PATH:/home/lsk250/www/portfolio 
```

现在我需要将它作为 CGI 运行并从浏览器调用它，但显然当我尝试从浏览器调用脚本时，PATH 未设置，因此脚本无法找到所需的程序。如何从 perl 脚本中更改 PATH？我尝试了以下方法，但没有成功：

```
system "export PATH=\$PATH:/home/lsk250/www/portfolio"; 
```

和

```
$ENV{PATH} = '/home/lsk250/www/portfolio';
exec 'env',cwd().'/'.$0,@ARGV; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:00:13.337

```
$ENV{PATH} = "$ENV{PATH}:/home/lsk250/www/portfolio"; 
```

确实是正确的。Perl 等价于`sh`'s

```
export PATH="$PATH:/home/lsk250/www/portfolio" 
```

与您所说的相反，后续`exec`将使用此路径来定位可执行文件，并且该可执行文件将看到更新的 PATH。

您似乎误诊了问题。实际发生了什么？是`exec`失败吗？如果是这样，它返回了什么错误？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T02:53:21.370

2个解决方案：

```
my $myPath = "/foo/bar";
exec("PATH=$PATH:$myPath command"); 
```

或者

```
my $myPath = "/foo/bar";
exec("$myPath/command"); 
```

# ruby-on-rails - Rails：正则表达式排除红宝石字符后的输入？

> ID：13372312
> 
> 赞同：2
> 
> 时间：2012-11-14T02:48:42.383
> 
> 标签：ruby-on-rails, ruby, regex

我有一个 Rails 应用程序，在“新”视图的某个字段中，用户可以输入一些总是看起来像这样的字符串：

```
1303031110012015¿999999999999999 
```

（因为是磁卡读卡器获取的会员卡号）

我想要做的是在模型中使用该字段的正则表达式进行验证，这让我只捕获没有它的“¿”之前的数字，例如：

**（在模型中）：**

```
validates_format_of :card_id, :with => /regex/i 
```

并且无论用户是否输入整个内容（因为机器总是这样做），我只想保存在数据库中：

```
1303031110012015 
```

怎样才能做到这一点？哪个是正确的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:32:37.847

验证检查数据是否有效，它们不会清理内容。您希望`before_validation`在验证之前进行回调以清理它们。像这样的东西：

```
before_validation :clean_up_card_id, :if => :card_id_changed?

#...

private

def clean_up_card_id
    self.card_id = self.card_id.to_s.scan(/^\d+/)[0]
end 
```

然后，因为你很偏执并且知道每个人都真的想出去，所以也要验证它：

```
validates :card_id, :format => { :with => /\A\d+\z/, :msg => 'It done broke!' } 
```

如果您知道它应该多长时间，请也验证它（使用`:length`或通过将`+`正则表达式中的 替换为适当的`{m,n}`限制）。

# excel - 在不使用填充句柄的情况下填充 Excel 中的列

> ID：13372313
> 
> 赞同：1
> 
> 时间：2012-11-14T02:48:46.783
> 
> 标签：excel, excel-formula

晚上所有：

有没有办法在不使用填充句柄的情况下填充具有相同值的列？有没有办法在列中以相同的方式填充公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:09:10.010

根据您要达到的目标，有多种选择，但填充手柄是最好的选择之一。其他一些是：

*   选择范围，输入公式，使用 `Ctrl`+验证`Enter`
*   复制公式，选择目的地，粘贴。
*   主页功能区\编辑\填充

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T05:48:23.327

不要忘记在列中的每个单元格中输入值。在 Excel 2003 或更早版本中，您将在大约 65,000 个单元格之后完成 - 没什么。Excel 2007+ 需要更长的时间，因为每列有超过一百万个单元格。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T23:16:50.493

如果公式是与故事相邻的列，则为是。如果您有一个数据表，即由行和列组成的数据区域，请选择该区域并从功能区中选择插入 > 表。该区域现在是一个 Excel 表格，可以做各种整洁的事情。如果您将公式添加到第一行的下一个空闲列中，Excel 将为所有行复制它。每次您向表中添加新行时，它也会继续重复 - 无需工作。

Excel 表格是处理手动维护数据的一种非常好的方式，它们具有自动总计等加载功能，并且您可以创建使用列标题而不是无意义的单元格引用的公式。

如果您想了解更多信息，请在 Excel 的帮助中搜索表格并查看表格概述。

如果您想对值执行相同的操作，则必须将它们作为公式输入，例如 =1。

另一种选择是在 Worksheet_Change 事件上创建一个宏。

# php - 使用 Ajax PHP 和 jQuery 从 MySQL 获取数据的问题

> ID：13372315
> 
> 赞同：0
> 
> 时间：2012-11-14T02:49:03.643
> 
> 标签：php, jquery, ajax

嗨，我已经问过这个问题，但不幸的是我没有得到适当的答案。我在 MySQL 数据库中有两个名为 Items 和 Item 的表，如下所示：

![在此处输入图像描述](../Images/8fa0f32822be7132b3046d58174884da.png)

我有两个 .php 文件作为 bwlow；index.php 和 results.php index.php 是这样的：

```
 <html>
 <head></head>
 <body>
 <?php
   $mysqli = new mysqli('localhost', 'root', '', 'moviedb');
    if ($mysqli->connect_errno) 
     {
      die('Unable to connect!');
     }
    else{
         $query = 'SELECT * FROM tblItems';
         if ($result = $mysqli->query($query)) {
            if ($result->num_rows > 0) {
   ?>  
    <p> Select a Genre
       <ul>
    <?php     
       while($row = $result->fetch_assoc()){
     ?>      
  <li><div class="selectGenre"><?php echo $row['item']; ?></div></li>     
  <?php           
    }
   ?>
        </ul>
</p>
<p id="result"></p>
<?php
}
else 
{
    echo 'No records found!';
}
$result->close();
}
else 
{
echo 'Error in query: $query. '.$mysqli->error;
 }
}
$mysqli->close();
?>
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"           type="text/javascript"></script>
 <script type="text/javascript">
    $(document).ready(function()
    {
        $('.selectGenre').click(function()
        {
          if($(this).html() == '') return;
            $.get(
                'results.php',
                { id : $(this).html() },
                function(data)
                {
                    $('#result').html(data);
                }
            );
        });
    });
   </script>
  </body>
  </html> 
```

结果.php是：

```
<?php
  $mysqli = new mysqli('localhost', 'root', '', 'moviedb');
  $resultStr = '';
   $query = 'SELECT type FROM tblItem where id='.$_GET['id'];
   if ($result = $mysqli->query($query)) 
   {
    if ($result->num_rows > 0) 
   {
    $resultStr.='<ul>';
     while($row = $result->fetch_assoc())
     {
    $resultStr.= '<li><strong>'.$row['id'].'</strong> - '.$row['type'];
   '</li>';
  }
   $resultStr.= '</ul>';
  }
  else
  {
$resultStr = 'Nothing found';
  }
 }
echo $resultStr;
?> 
```

好吧，第一部分（index.php）是根据 tblItems 表填充列表，但单击列表不会从 results.php 文件返回任何值到页面，甚至没有错误消息。你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:35:05.477

这对你来说会更容易：试试这个，我编辑你的 index.php 代码：

```
 <html>
 <head></head>
 <body>
 <?php
   $mysqli = new mysqli('localhost', 'root', '', 'moviedb');
    if ($mysqli->connect_errno) 
     {
      die('Unable to connect!');
     }
    else{
         $query = 'SELECT * FROM tblItems';
         if ($result = $mysqli->query($query)) {
            if ($result->num_rows > 0) {
   ?>  
    <p> Select a Genre
       <ul>
    <?php     
       while($row = $result->fetch_assoc()){
     ?>      
  <li><div class="selectGenre" onclick="return printSearch('<?php echo $row['id']; ?>');"><?php echo $row['item']; ?></div></li>     
  <?php           
    }
   ?>
        </ul>
</p>
<p id="result"></p>
<?php
}
else 
{
    echo 'No records found!';
}
$result->close();
}
else 
{
echo 'Error in query: $query. '.$mysqli->error;
 }
}
$mysqli->close();
?>
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"           type="text/javascript"></script>
 <script type="text/javascript">
    function printSearch(idVal)
    {

            $.get(
                'results.php',
                { id : idVal },
                function(data)
                {
                    $('#result').html(data);
                }
            );
    }
   </script>
  </body>
  </html> 
```

好的，这是 result.php

```
<?php

$mysqli = new mysqli('localhost', 'root', '', 'moviedb');
$resultStr = '';
 $query = 'SELECT * FROM tblItem where id='.$_GET['id'];
if ($result = $mysqli->query($query)) 
{
    if ($result->num_rows > 0) 
    {
        $resultStr.='<ul>';
        while($row = $result->fetch_assoc())
        {
            $resultStr.= '<li><strong>'.$row['id'].'</strong> - '.$row['Name'].
                            '</li>';
        }
        $resultStr.= '</ul>';
    }
    else
    {
        $resultStr = 'Nothing found';
    }
 }
echo $resultStr;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:00:59.857

你的问题是：

```
$query = 'SELECT type FROM tblItem where id='.$_GET['id']; 
```

什么时候

```
$_GET['id'] = 'Drama'; // Action, etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:22:05.063

在 results.php 中尝试以下查询

```
$sql  = "SELECT tblItem.* FROM tblItems 
  INNER JOIN tblItem USING(id)
  WHERE tblItems.item = '".$mysqli->real_escape_string($_GET['id'])."'"; 
```

也`$row['type']`改为`$row['Name']`.

# lisp - 返回的计划程序

> ID：13372318
> 
> 赞同：-1
> 
> 时间：2012-11-14T02:49:08.973
> 
> 标签：lisp, scheme

这是正确的反向方法吗？我想从以下列表中创建一个“oddrev”函数：

```
(DEFINE list0 (LIST 'j 'k 'l 'm 'n 'o 'j) )
(DEFINE list1 (LIST 'a 'b 'c 'd 'e 'f 'g) )
(DEFINE list2 (LIST 's 't 'u 'v 'w 'x 'y 'z) )
(DEFINE list3 (LIST 'j 'k 'l 'm 'l 'k 'j) )
(DEFINE list4 (LIST 'n 'o 'p 'q 'q 'p 'o 'n) )
(DEFINE list5 '( (a b) c (d e d) c (a b) ) )
(DEFINE list6 '( (h i) (j k) l (m n) ) )
(DEFINE list7 (f (a b) c (d e d) (b a) f) ) 
```

`(oddrev '(a b c d e f g))` 这将/应该返回： `(g e c a)`

`(oddrev (LIST 's 't 'u 'v 'w 'x 'y 'z))` 这将/应该返回： `(y w u s)`

`(oddrev '((h i) (j k) l (m n)))` 这将/应该返回： `(l (h i))`

和

`(oddrev '())` 这将/应该返回一个空列表等。

**此代码看起来是否正确，我如何将反向命令合并到其中：**

```
(define mylist '(1 2 3 4 5 6 7))
(define (oddrev lst)
(define (do-oddrev lst odd)
    (if (null? lst)
        lst
    (if even
        (do-oddrev (cdr lst) #f)
        (reverse (cons (car lst) (do-oddrev (cdr lst) #t))))))
        (do-evens lst #f)) 
```

还是我应该这样做：

```
(define (oddrev 1st)
    (if (NULL? 1st) '()
        (append (reverse (cdr 1st)) (list (car 1st))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:45:29.293

最简单的方法是构建一个 (odd *lis* ) 过程来获取列表的奇数元素，然后创建一个 (oddrev *lis* ) 过程来调用奇数过程，并将相反的过程应用于它的结果。

奇怪的过程应该是这样的：

```
 (define (odd lis)
      (if (null? lis)
          '()
          (if (= (length lis) 1)
              (list (car lis))
              (cons (car lis) (odd (cddr lis)))))) 
```

鉴于此，我们现在必须定义oddrev。这部分很简单，只需调用奇数，然后将其反转，如下所示：

```
 (define (oddrev lis)
      (reverse (odd lis)) 
```

我在 DrRacket 5.3 中对此进行了测试以确保它有效，并且结果完全符合您问题中概述的规范。如果您对代码有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T00:00:51.543

```
(define (oddrev L)
 (oddrev-helper L '()))

 (define (oddrev-helper L-in L-out)
  (cond 
   ((null? L-in) L-out)
   ((null? (cdr L-in)) (cons (car L-in) L-out))
   (else (oddrev-helper (cddr l-in) (cons (car L-in) L-out))))) 
```

递归地使用 append 通常是一个很好的信号，表明有更好的方法来做到这一点，通常是通过调用一个带有空列表作为附加参数的助手并在此基础上构建你的列表。

# java - 使用工厂方法的 Spring 自动装配对象

> ID：13372319
> 
> 赞同：3
> 
> 时间：2012-11-14T02:49:12.863
> 
> 标签：java, spring

我试图弄清楚如何将此java代码更改为spring

```
private MyObject myObject = MyObjectFactory.getService(); 
```

在我的 Foo.java 类中，我有

```
@Autowired
private MyObject myObject; 
```

在spring xml中，我有：

```
<bean id="MyObject" class="path.to.MyObjectFactory" factory-method="getService"></bean>

<bean id="Foo" class="path.to.Foo">
    <property name="myObject" ref="MyObject"/>
</bean> 
```

错误是

```
No matching bean of type [path.to.MyObject] found for dependency: 
expected at least 1 bean which qualifies as autowire candidate for this dependency. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:52:30.840

您尝试将一个类型的对象注入`MyObjectFactory`到 path.to.Foo 中，其中需要一个类型的对象`MyObject`。请像这样更改您的代码：

福：

```
public class Foo {
    private MyObject myObject;
    public void setMyObject(MyObject value) { myObject=value;}
} 
```

我的对象工厂：

```
public class MyObjectFactory {
    public MyObject getService() {
        return new MyObject();
    }
} 
```

春天的xml：

```
<bean class="MyObjectFactory" id="factory" />
<bean id="myObject" factory-bean="factory" factory-method="getService" scope="prototype" />

<bean id="Foo" class="path.to.Foo">
    <property name="myObject" ref="MyObject"/>
</bean> 
```

顺便说一句，在你的情况`@Autowired`下`<property ...>`表达同样的事情，这样你就可以把一个或另一个排除在外。

**更新：**

在[这里](http://static.springsource.org/spring/docs/3.1.3.RELEASE/spring-framework-reference/html/beans.html#beans-factory-class-instance-factory-method)查看更多信息，了解更多春季工厂豆类的信息。

我以为您不想要单身人士，这就是我添加的原因`scope="prototype"`。如果您的实例`MyObject`假设是单例，请删除它。

# sorting - 用于对整数值进行排序的正确 Solr fieldType 是什么？

> ID：13372323
> 
> 赞同：6
> 
> 时间：2012-11-14T02:49:59.287
> 
> 标签：sorting, solr, lucene

我正在使用 Solr 3.6.1。用于包含整数值的 Solr 排序字段的正确字段类型是什么？我只需要这个字段来进行排序，并且永远不会对其进行范围查询。我应该使用`integer`or`sint`吗？

我看到在 schema.xml 中，`sint`类型声明为：

```
 <!-- Numeric field types that manipulate the value into
         a string value that isn't human-readable in its internal form,
         but with a lexicographic ordering the same as the numeric ordering,
         so that range queries work correctly. -->
    <fieldType name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/> 
```

而`integer`说以下：

```
 <!-- numeric field types that store and index the text
         value verbatim (and hence don't support range queries, since the
         lexicographic ordering isn't equal to the numeric ordering) -->
    <fieldType name="integer" class="solr.IntField" omitNorms="true"/> 
```

我问这个的主要原因是因为我在一个`sint`字段上执行的每个 Solr 排序（我有很多声明为动态字段）都会填充（不可配置的）lucene fieldCache。我在 fieldCache 下的统计页面 (http://HOST:PORT/solr/CORE/admin/stats.jsp) 上看到`sint`排序存储为

`org.apache.lucene.search.FieldCache$StringIndex`

而`integer`排序存储为

`org.apache.lucene.search.FieldCache.DEFAULT_INT_PARSER`

我相信哪个消耗更少的空间？

* * *

更新： Solr 3.6.1 schema.xml 已`int`声明为`TrieIntField`ie as

`<fieldType name="int" class="solr.TrieIntField" precisionStep="0" positionIncrementGap="0"/>`

上面的一个来自较旧的 solr 版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T03:52:55.650

如果您不需要范围查询，请使用“整数”，因为 [排序在两者上都能正常工作](http://lucene.472066.n3.nabble.com/sint-vs-integer-td495185.html)

[文档](http://wiki.apache.org/solr/SchemaDesign)：-

> sint、sdouble 等可排序的字段类型有点用词不当。上述意义上的排序不需要它们，但在进行 RangeQuery 查询时需要它们。事实上，Sortables 指的是使数字按字典顺序正确排序为字符串的概念。也就是说，如果不这样做，数字 1..10 按字典顺序排序为 1,10, 2, 3... 使用 sint，但是可以解决此问题。但是，如果您不需要执行 RangeQuery 查询而只需要对字段进行排序，则只需使用 int 或 double 或等效的适当类。您将节省自己的时间和记忆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-03T15:23:44.317

Solr 5 中不推荐使用 Sortable 字段类型，因此不应使用。您可以使用 solr int 或 tint 字段类型

# php - WordPress 表单/离线信用卡/优惠券插件

> ID：13372324
> 
> 赞同：0
> 
> 时间：2012-11-14T02:50:03.703
> 
> 标签：php, forms, wordpress, plugins, credit-card

我的一个客户希望我使用 WordPress 开发他们的网站，他们需要一个包含用户姓名、地址信息、信用卡信息（离线处理）、优惠券信息（如果有）和相应地计算总金额。

我以前使用 WordPress 开发过网站，但从来没有真正为它使用过任何表单插件。是否有一个（可定制的）插件已经提供了我上面概述的功能？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:23:58.577

有一个名为[Gravity Forms](http://www.gravityforms.com/)的高级插件非常适合。我有一个开发者许可证，可以在我开发的每个网站上使用它，这绝对物有所值。

请记住，如果您正在获取信用卡信息，您将希望在数据库中对其进行加密，并确保您在网站上启动并运行 SSL，以保护前端和管理区域的表单。我以前用过[这个插件](http://wordpress.org/extend/plugins/wordpress-https/screenshots/)。

# objective-c - Xcode 4.5 单视图应用程序 viewDidLoad 未在启动时调用

> ID：13372325
> 
> 赞同：0
> 
> 时间：2012-11-14T02:50:36.693
> 
> 标签：objective-c, ios6, xcode4.5

我是 iOS 开发的新手，所以我使用本[教程](http://www.appcoda.com/use-storyboards-to-build-navigation-controller-and-table-view/)和本[教程](http://jleeiii.blogspot.com/2012/01/uistoryboard-power-drill.html)开始了一个项目，其中包含嵌入在 NavigationController 中的 TableView。但是我遇到了几个问题，即在模拟器中启动时没有命中 viewDidLoad。我已经获取了教程附带的示例项目并运行了它，并且点击了 viewDidLoad 中的断点。这是我创建一个简单的单视图应用程序（开箱即用，未更改）的真正关键，当我运行 iPad 6.0 模拟器而不是 iPhone 6.0 模拟器时，断点被击中！任何想法我做错了什么？

**评论答案：**在所有情况下，我都没有在我的 AppDelegate 中手动实例化导航控制器，并且我的视图控制器类通过情节提要绑定到我的视图。

# java - 如何在使用 Intent 集调用 Activity 后让 getIntent() 返回 null

> ID：13372326
> 
> 赞同：14
> 
> 时间：2012-11-14T02:50:44.277
> 
> 标签：java, android, android-intent, orientation-changes

这个问题与我最初的问题相似，但我认为有更好的方法来解决问题。

[当 setIntent 后跟旋转时，getIntent 返回错误的意图](https://stackoverflow.com/questions/4348537/getintent-returns-wrong-intent-when-setintent-is-followed-by-a-rotation)

基本上，在我的 main`Activity`扩展`FragmentActivity`中，有两个实例在 Fragment 中我将 Intent 传递给该 Activity。

这是有问题的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(...);

    if (getIntent() != null && getIntent().getData() != null) {
        String data = getIntent().getDataString();
        //setIntent(null); 
```

这`setIntent`是试图解决我的问题，但没有奏效。

发生的情况是，当我单击一个链接，该链接作为 Intent 返回到我的 Activity，然后转到下一个 Fragment，然后旋转手机，两个 Fragment 之前传递的 Intent 在我调用时再次出现`getIntent`。

那么，当我从 Intent 中获取数据时，如何设置它以便下一次调用`getIntent`将返回 null？或者，将 Intent 中的数据改为 null 是否有意义？

我试图避免更新 SharedPreferences 中的信息来处理这个问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T03:06:56.683

我找到了一个似乎可行的解决方案，但我希望有更好的方法来做到这一点。

```
 if (getIntent() != null && getIntent().getData() != null) {
        String data = getIntent().getDataString();
        getIntent().setData(null);
        setIntent(null); 
```

我认为`setIntent`没有任何用处，但`setData(null)`似乎可以解决问题。

# codeigniter - IF 语句在视图中 - 未出现

> ID：13372328
> 
> 赞同：1
> 
> 时间：2012-11-14T02:51:29.600
> 
> 标签：codeigniter, codeigniter-2

好的，我正在尝试验证来自数据库的订阅（这似乎工作正常，因为我在其他地方使用过这个模型）。但是，我正在尝试获取返回的 $data 并将其用作我认为的 IF 语句......但我试图“如果”的 DIV 没有出现。也不会出现任何错误。如果我在视图中删除 DIV 周围的 IF，就会出现内容......我做错了什么？

这是我的控制器中的代码：

```
// Check subscription and display appropriate content if "freebie" package 
$subscribe_result = $this -> subscribe_model -> upgrade_message($this->session->userdata('user_id')); // session sends user id to model
$data['subscription'] = $subscribe_result; 
```

模型：

```
// Checks to see what package user has subscribed to
public function upgrade_message($id) //$id is session id pulled from controller
{
    $this -> db -> select('subscription'); // select the subscription column
    $this -> db -> where('id', $id); //find id in table that matches session id
    $query = $this -> db -> get("subscriptions"); // connect to this database

    return $query->result_array(); //returns the result of the above
} 
```

最后，我试图输出的视图中的 IF 语句：

```
<? if($subscription == 'Freebie') : ?>
    <div>some "freebie" content</div>
<? endif ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:18:09.413

您可以使用

```
if($subscription[0]['subscription'] == 'Freebie') 
```

代替

```
if($subscription == 'Freebie') 
```

有关[生成查询结果](http://codeigniter.com/user_guide/database/results.html)的更多信息。

# opengl - 在opengl中的对象中分配给定的ID

> ID：13372333
> 
> 赞同：0
> 
> 时间：2012-11-14T02:52:19.670
> 
> 标签：opengl, picking

我正在开发一个多代理应用程序。在模拟过程中，我会显示在任何时间步出现的代理。该代理有自己的特定 ID。

我想通过使用拾取来识别这些对象并与之交互。我的挑选方法有效，但我无法获得代理的 ID（我只获得与代理之一不相关的几何图形的 ID）。因此，我需要找到将代理的相应 ID 分配给任何新绘制的几何图形的方法。

当你绘制一个对象（可能在 glBegin() 和 glEnd() 之间）时，opengl 有没有办法分配一个 id ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:56:22.133

过去，我曾成功地在后台缓冲区/FBO 中为每个对象绘制不同的颜色，进行选择，读取该点的像素，然后以适当的颜色渲染实际帧以供人类查看。使用着色器，您可以同时进行这两项操作。

然后您只需在表格中查找颜色即可确定对象是什么。这种方法非常缓慢。

更好（更快）的替代方法是从您单击的位置投射光线，以查看它与场景中的哪些对象相交。你也可以做一些原始的截锥体剔除来减少潜在的可拾取对象的集合。

# ruby-on-rails-3.2 - 在 Rails 3.2.8 应用程序中从 jQuery BBQ 更改为 History.js

> ID：13372334
> 
> 赞同：0
> 
> 时间：2012-11-14T02:52:24.210
> 
> 标签：ruby-on-rails-3.2, history.js

我在页面上用一个又大又丑的不可见表单来管理状态。我会在 click 事件上序列化表单中的值并执行 ajax 提交，这将为页面上的 div 提供内容。我正在序列化和反序列化大表单中的值，并使用 jQuery BBQ 插件（我从未完全理解）来管理状态。

我正在尝试在我的应用程序中重做 jQuery BBQ 东西以使用 history.js。我将`ajaxify-html5`要点插入我的应用程序。

我的应用程序深入到一个数据库表中，将该表中的列作为页面上的链接列出。他们有分配给他们的类“.attrs”。

我看到正在调用的“点击”事件`ajaxify`。看起来它调用了 History.pushState，我想它就像 bbq.pushState，因为它会为我完成我的提交。

尽管我的 URL 保持不变，但我的请求似乎没有按我在 Rails 应用程序中的预期执行。我正在使用的示例 URL 是：

```
http://myapp/brands/get_attributes?brand_id=539page_attribute=attribute1&attribute1=Whirlpool 
```

当我使用 BBQ 插件时，我指定了发送到 $.ajax() 调用的哈希值，如下所示：

```
hash = type: "POST", url: "brands/get_attributes", data: $("#buyersguideform").serialize() 
```

由于它是在执行 Ajax 请求，Rails 会识别它并使用适当的 .js.erb 模板进行响应。

不幸的是，我的 URL 似乎没有包含足够的信息来告诉 History.js 提出什么样的请求。因此，代码正在执行常规的旧 GET 请求，甚至没有`get_attributes`在控制器中获得正确的操作。

我真的需要用这个 History.js 解决这些问题：

1）弄清楚如何摆脱我建立的疯狂的本土状态管理隐形形式。我已经开始使用我正在生成的参数化 URL 来做到这一点。我只是不确定如何从一个 Ajax 请求到下一个请求。换句话说，我不知道我应该何时/如何使用`getState()`.

2) 了解如何让 History.js 执行 Ajax POST 而不是非 Ajax GET。

3）了解更多[这个要点](https://gist.github.com/854622)。说明说我所要做的就是插入脚本，但显然在声明部分提到了一些类，我应该以某种方式在我的应用程序中工作。

我是状态管理的新手，因此有点不知所措。我已经在这工作了 8 个小时，并且正在取得一些进展，但是速度非常慢。非常感谢任何帮助。

更新 1：

我可以看到要点只会做`GET`s，因为它没有指定提供给调用`type`的哈希中的键。`$.ajax()`当我在那里对其进行硬编码时，它当然会执行`POST`. 在进一步审查中，使用要点似乎不是我所需要的。

看起来我错了，我会以某种方式`History.pushState()`为我做 Ajax 请求。它似乎只将条目推送到状态。这是完全合适的。我感到困惑的原因是这个应用程序之前使用了一个 pushState 包装器，它可以处理状态管理和随后的 Ajax 请求。因此，当我不使用要点时，我的 Ajax 帖子没有发生的原因是它一开始就不应该发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:25:22.950

History.js 插件似乎只有付费支持。虽然看起来它可能做得很好，但我一直无法真正找到任何关于使用它的真正答案。如果您是 Javascript*专家*，正如作者对他自己所说的那样，那么您可能会做得很好。如果您对状态管理比较陌生并且正在寻找文档，那么您可能会遇到困难。

我已经回到 BBQ 插件来满足我的简单要求，并且它工作正常。它比 History.js 插件记录得更完整。我确信 History.js 的功能更胜一筹。当文档赶上来并且我能够得到我的问题的答案时，我会切换。

# java - 注释 @RolesAllowed 不适用于部署在 Tomcat 7.0.32 中的 Web 服务

> ID：13372337
> 
> 赞同：6
> 
> 时间：2012-11-14T02:52:36.817
> 
> 标签：java, web-services, annotations, jax-ws, tomcat7

我想我现在真的坚持了 4 个小时。我有一个在 JAX-WS 中开发的示例 Web 服务，我已经在 web.xml 中成功配置了 BASIC 身份验证，但是我无法使注释“@RolesAllowed”工作。该注释被简单地忽略。我正在使用 servlet 3.0 API 和 tomcat 7.0.32，所以我相信应该支持 @RolesAllowed。

以下是我的代码： 在 Web.xml 我有以下配置：

```
<security-constraint>
    <display-name>SecurityConstraint</display-name>
    <web-resource-collection>
        <web-resource-name>ApexeWebServiceCollection</web-resource-name>
        <description>These resources are only accessible by authorised client.</description>
        <url-pattern>/*</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <description>These are the roles who have access.</description>
        <role-name>developer</role-name>
        <role-name>tester</role-name>
    </auth-constraint>
    <user-data-constraint>
        <description>This is how the user data must be transmitted.</description>
        <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>default</realm-name>
</login-config>
<security-role>
    <description>Service developer</description>
    <role-name>developer</role-name>
</security-role>
<security-role>
    <description>Service tester</description>
    <role-name>tester</role-name>
</security-role> 
```

然后我在服务端实现了下面的方法。我想要方法：“sayNumber”只能由“开发人员”访问，而不是“测试人员”：

@SchemaValidation(handler = SchemaValidationErrorHandler.class) @WebService(endpointInterface = "com.webservice.HelloWorld")

公共类 HelloWorldImpl 实现 HelloWorld {

```
@Resource
WebServiceContext wsContext;

@Override
@WebMethod
@RolesAllowed("developer")
public int sayNumber(double number) throws SOAPException {
    MessageContext messageContext = wsContext.getMessageContext();
    boolean isAllowed=wsContext.isUserInRole("developer");
    System.out.println("Authorization:"+isAllowed);
    return (int) ++number;
} 
```

}

然后在 Spring 配置中（是的，我也使用 Spring 3.1.2）我有以下内容来连接 URI 和服务：

```
<wss:binding url="/hello">
    <wss:service>
        <ws:service bean="#helloWorldWebService"
            bindingID="http://www.w3.org/2003/05/soap/bindings/HTTP/" />
    </wss:service>
</wss:binding> 
```

接下来，我使用客户端调用此 Web 服务。客户端在“tester”角色中使用用户名和密码。我可以看到服务正在打印“Authorization:false”，因为 HelloWorldImpl 中的代码：

```
boolean isAllowed=wsContext.isUserInRole("developer");
    System.out.println("Authorization:"+isAllowed); 
```

当然，我可以在这里抛出一个异常来踢出测试人员。但是，我想要注释“@RolesAllowed”来完成这项工作。我尝试了很多方法，但这个注释根本不起作用（注释被忽略）。请帮忙。

# wpf - 浮动窗口和功能区与键盘导航集成

> ID：13372339
> 
> 赞同：4
> 
> 时间：2012-11-14T02:52:47.750
> 
> 标签：wpf, focus, ribbon, docking, keyboard-navigation

我正在开发一个具有功能区并且还支持停靠/浮动窗口的 MDI 应用程序。在访问功能区上的某些命令时，我无法将注意力集中在最后一个浮动窗口上。

我发现这篇很棒[的帖子](https://stackoverflow.com/questions/6410146/dockable-windows-floating-window-and-mainwindow-menu-integration)给了我指导。

通过一些修改，我让我的应用程序正常工作，但后来意识到我无法再通过键盘导航功能区了。

上述文章建议`e.Handled = true`在 PreviewGotKeyboardFocus() 中设置。不幸的是，这会阻止键盘焦点放在功能区上，因此无法导航。

以前有人遇到过这个问题吗？

# mysql - 加载数据输入文件时 db 和 csv 文件中的不同列名

> ID：13372340
> 
> 赞同：3
> 
> 时间：2012-11-14T02:52:53.743
> 
> 标签：mysql

我正在尝试使用`LOAD DATA LOCAL INFILE`. 数据库表中指定的某些数据元素与数据文件（多个 csv 文件）中的列名不同。例如：数据库有一个列“location_affected”，数据文件有一个相同数据元素的列名“location_name”。此外，数据文件的列数和列名都不相同。在数据库表中指定的约 200 个数据元素中，每个数据文件可能包含大约 30-40 列。谁能建议如何在 db 表和 csv 文件之间映射列名？我尝试了以下方法，但它引发了错误：“location_name 不存在”

```
LOAD DATA LOCAL INFILE 'pathtothefile' INTO TABLE tablename 
 FIELDS TERMINATED BY ',' ENCLOSED BY '"'
 LINES TERMINATED BY '\r'
 IGNORE 1 LINES 
(col1,col2,col3..............)
SET location_name = location_affected ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:11:03.167

您可以通过将列分配给虚拟变量来跳过列：

```
LOAD DATA LOCAL INFILE 'pathtothefile' INTO TABLE tablename 
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\r'
IGNORE 1 LINES 
(col1,col2,@skipme,@skipme,col3..............); 
```

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:55:54.067

映射在您的`LOAD DATA`语句中定义。如果您想重新排序列，您应该在那里调整它们以匹配 CSV 文件中存在的任何内容。

该`IGNORE 1 LINES`部分跳过了典型的 CSV 标题标签。导入过程不使用这些。

在这种情况下，`SET location_name=location_affected`没有任何意义。如果要导入`location_name`列，请在定义中指定。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-15T19:10:46.187

映射在您的 LOAD DATA 语句中定义。如果您想重新排序列，您应该在那里调整它们以匹配 CSV 文件中存在的任何内容。

IGNORE 1 LINES 部分跳过了典型的 CSV 标题标签。导入过程不使用这些。

在这种情况下， SET location_name=location_affected 没有意义。如果要导入 location_name 列，请在定义中指定

# ios - 在模拟器旋转之前，仅横向视图不会自动调整大小

> ID：13372341
> 
> 赞同：3
> 
> 时间：2012-11-14T02:52:57.190
> 
> 标签：ios, iphone-5

我有一个仅限景观的观点（两者）。它显示为模态视图控制器。

在 iphone 5（模拟器，我还没有尝试过设备）上，当视图显示时，它的大小为 320x480，而不是 320x568，并且左对齐。

但是......如果我将模拟器旋转到另一个横向，或者纵向并再次返回，它会正确自动调整大小并填满屏幕。

如果我确切知道要粘贴什么，我会粘贴代码……但是这里涉及的内容太多了，我不知道从哪里开始。

我所有的其他视图都可以很好地调整大小，但它们也都包含在 UITabbarControllers 或 UINavigationControllers 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:43:36.227

我对这个问题的短/粗/简单的解决方案只是将我的视图框架设置为主屏幕的边界。

```
[self.view setFrame:[[UIScreen mainScreen] bounds]]; 
```

与往常一样...在 self.view 实际加载之前无法完成，以便可以设置它的框架！所以我必须这样做 - (void)viewDidAppear

我没有费心去检测设备，因为我总是希望这个视图是全屏的，不管是什么设备（包括 iPad.

我的猜测是内置控制器（UINavigationController 等）具有检测 iPhone 5 并相应地设置帧边界的逻辑。

* * *

更新：事实证明，我有一个更大的问题。我在 MainWindow.xib 中的主“窗口”未设置为“启动时全屏”。这是 .xib 中窗口的复选框实用程序视图

因为它没有被检查，我的触摸目标也被屏蔽在 xib 文件 3:2 尺寸的边界之外。选中此框可修复我的触摸目标并修复了我上面问题中的屏幕填充问题。我删除了原始答案中的代码，并且视图很好地填充了整个屏幕/窗口，因为“窗口”现在是屏幕的大小。

现在更有意义...

# jsf - 两个不同的 Maven Web 项目如何共享相同的 EJB

> ID：13372348
> 
> 赞同：3
> 
> 时间：2012-11-14T02:55:22.567
> 
> 标签：jsf, jakarta-ee, maven, glassfish, ejb

我有两个不同的基于 Maven 的 JSF Web 项目（Netbeans 和 Glassfish），一个用于管理员用户，另一个用于普通用户。我想让它们分开，因为这样更简单。实体类将是相同的，我希望这两个战争项目共享这些实体类。

这样做的最佳方法是什么？我不希望用户和管理员共享相同的 UI，因为它变得太复杂了。我想让他们的用户界面分开，这对我来说更容易和清晰。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T03:19:29.617

我建议您将两个项目分成至少 4 个 Maven 项目：

*   common-ejb：maven 项目类型“EJB”，保留所有 EJB/实体
*   customer-web：maven 项目类型“WAR”，为普通用户保留所有 UI，依赖于“common-ejb”
*   admin-web：maven 项目类型“WAR”，为管理员用户保留所有 UI，依赖于“common-ejb”
*   common-ear：maven 项目类型“EAR”，包括“common-ejb”作为 EJB 依赖项，并包含 2 个 Web 项目 (WAR)。

EAR pom.xml 可能如下所示：

```
<groupId>com.example</groupId>
<artifactId>example-ear</artifactId>
<version>1.0</version>
<packaging>ear</packaging>

<dependencies>

  <dependency>
    <groupId>com.example</groupId>
    <artifactId>example-ejb</artifactId>
    <version>${project.parent.version}</version>
    <type>ejb</type>
  </dependency>

  <dependency>
    <groupId>com.example</groupId>
    <artifactId>customer-web</artifactId>
    <version>${project.parent.version}</version>
   <type>war</type>
  </dependency>
  <dependency>
    <groupId>com.example</groupId>
    <artifactId>admin-web</artifactId>
    <version>${project.parent.version}</version>
   <type>war</type>
  </dependency>
<dependencies> 
```

`maven-ear-plugin`如果您需要对上下文根或库部署进行一些自定义，请查看文档。

# java - spring mvc 防止直接访问方法

> ID：13372351
> 
> 赞同：0
> 
> 时间：2012-11-14T02:55:49.413
> 
> 标签：java, spring, spring-mvc, data-access

我刚开始学习spring mvc 3。我发现了一个小问题，我的控制器将处理一个发布请求（注册表单）。但是如果在地址栏中输入映射值（bla3/save.html），它将执行它不应该执行的方法。这就是为什么我需要一个解决方案，如果有人直接输入地址，它应该重定向到其他页面而不是尝试添加新用户。

```
@RequestMapping(value = "/save", method = RequestMethod.POST) //save new user
public ModelAndView saveUser(@ModelAttribute("user") User user, BindingResult result){
    userService.addUser(user);  
    return new ModelAndView("redirect:/users.html");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:08:58.250

如果您在地址栏中直接有 URL，这将是一个 GET 请求，您可以针对该请求处理不同的行为，例如，该 URL 禁止使用 GET，或者在提交时为用户呈现空白表单，将调用 POST 方法之上。

```
@RequestMapping(value = "/save", method = RequestMethod.GET)
public ModelAndView saveUser(@ModelAttribute("user") User user, BindingResult result){
    userService.addUser(user);  

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:19:38.570

在您的控制器类中添加此方法。

```
@RequestMapping(value = "bla3/save", method = RequestMethod.GET)
public ModelAndView saveUser(@ModelAttribute("user") User user, BindingResult result){
    userService.addUser(user);  
...
return new ModelAndView("redirect:/users.html");
} 
```

如果在地址栏中键入映射​​值 (bla3/save.html)。该方法将执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:52:36.103

您可以让该方法仅在有特定标头（如下面的代码）时才执行。

```
 @RequestMapping(value = "/save", method = RequestMethod.POST, headers="X-Requested-With=XMLHttpRequest") 
```

在这种情况下，该方法仅在它是 jquery ajax 请求时执行（jQuery 自动添加标头）

当然，这只是一种 Poka-yoke

# arrays - Visual Studio 的调试器可以禁用其“数组安全”吗？

> ID：13372353
> 
> 赞同：1
> 
> 时间：2012-11-14T02:56:04.530
> 
> 标签：arrays, debugging, release-mode

我指的是这样一个事实，在调试模式下，您有时可以避免数组溢出，但在发布模式下，它会崩溃，您不知道是哪个数组出现问题（我的代码真的很大） . 我可以禁用额外的填充，所以在调试模式下也会发生崩溃，所以我可以检查哪个函数在调用堆栈上导致它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T02:58:19.580

`Release`像往常一样构建但[启用调试符号](http://msdn.microsoft.com/en-us/library/fsk896zz.aspx)，这样您就可以在`Release`二进制文件中跟踪崩溃。

**[建议始终为`Release`构建](http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/05/11/pdb-files-what-every-developer-must-know.aspx)**启用符号；生成和保存`.pdb`文件使您可以轻松地从现场打开转储或小型转储并找出问题所在，而不必在内部重现它。您不必将它们包含在您的安装程序中或将它们提供给客户，只需将它们放在您的二进制文件旁边您可以轻松检索它们的地方。

# android - android sqlite 从列表菜单中删除

> ID：13372356
> 
> 赞同：1
> 
> 时间：2012-11-14T02:56:15.213
> 
> 标签：android, sqlite

大家好，我有一个从数据库的字符串列创建的列表菜单。当用户单击列表菜单项时，他们将删除它。我通过将列表项位置传递给我的 DBAdapter 上的删除函数来做到这一点。

```
protected void onListItemClick(ListView l, View v, int position, long id) {
  super.onListItemClick(l, v, position, id);
  db.deleteContact(position);
  } 
```

该函数找到相应的行索引并将其删除。

```
public boolean deleteContact(long rowId) {
  return db.delete(DATABASE_TABLE, KEY_NAME + "=" + rowId, null) > 0;
  } 
```

问题（这对你们大多数人来说可能很明显）是当用户删除时，比如说列表菜单项 2，并且从表中删除相应的索引，列表菜单刷新并且之前在位置 3 的项目现在是在位置 2。如果用户试图删除它，删除函数接收“2”作为参数，但要删除的所需行的索引是 3。

我知道这是一个愚蠢的问题，但有人可以提出一个有效的解决方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:08:54.743

你不应该按位置删除。方法中`id`提供的`onListClickItem`内容可以帮助您。将上面的代码替换为：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
  super.onListItemClick(l, v, position, id);
  db.deleteContact(id);
  } 
```

前提是您`KEY_NAME`是表的主键。如果不是，则替换`KEY_NAME`为主键字段的名称。

# c# - 在线与代码隐藏中的数据绑定控件

> ID：13372358
> 
> 赞同：3
> 
> 时间：2012-11-14T02:56:45.633
> 
> 标签：c#, asp.net, webforms

这更多的是首选方法和任何一种方法的好处的问题。在开发一些数据驱动的控件和带有Repeaters之类的页面时，我陷入了僵局。

我是否创建 ASP.NET 标记（标签等）并将它们内嵌绑定？

```
<asp:Label ID="companyName" runat="server" Text="<%# ((BillToCustomer)Container.DataItem).CompanyName %>" /> 
```

还是将 .aspx/.ascx 文件保留为普通标记并将所有逻辑放在代码隐藏中更好？

```
<asp:Label ID="companyName" runat="server" ondatabinding="companyName_DataBinding"/>

protected void legCustomerName_DataBinding(object sender, EventArgs e)
{
    ((Label)sender).Text = ((BillToCustomer)Page.GetDataItem()).CompanyName;
} 
```

我可以为任何一种选择争论到死，但在我采用一种方法之前，我想知道所有的事实和观点。

我能找到讨论这个问题的唯一资源（[OnDataBinding 与 Inline：优点、缺点和开销](https://stackoverflow.com/questions/702343/ondatabinding-vs-inline-pros-cons-and-overhead)）并没有太多令人信服的细节答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T23:33:48.397

在折腾了一段时间并从同事那里反弹之后，我想我已经得出结论，我最好使用Repeater的ItemDataBound事件将我的值绑定保留在后面的代码中。

标记严格由带有 ID 的 Web 控件组成 - 在我的情况下，主要是标签。如果标记/设计和代码隐藏职责分开，设计人员可以根据需要自由移动标记，开发人员可以控制设置值。设计者不会关心数据绑定表达式。

这也允许一些更整洁和更直观的代码，而不是试图将所有内容都塞进一个表达式中。

我将接受这个作为答案，因为这是我最终使用的解决方案，但我当然仍然对进一步讨论感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:01:17.967

这两个完全一样。您的“代码隐藏”版本与 ASP.NET 页面编译成的版本相同。

# java - Eclipse中使用m2e插件的Maven项目依赖错误（对于maven）

> ID：13372359
> 
> 赞同：4
> 
> 时间：2012-11-14T02:57:29.610
> 
> 标签：java, eclipse, maven, m2e

我正在使用 m2e 插件在 Eclipse 中开发一个 java maven 项目。我更新了我的系统，我的 jvm 从 icedtea-bin-6.1.11.4 更新到了 icedtea-bin-6.1.11.5。Eclipse 现在在我的 pom 文件中输出以下错误，我无法运行我的项目。我是 maven 和 eclipse 的新手，经过一天的谷歌搜索，我仍然没有找到解决方案。

我个人认为这是 eclipse 的某种问题（配置错误？），因为我能够在命令行上成功构建`mvn clean install -U`. 此外，即使在没有安装插件的全新 Eclipse 安装中，我也会遇到同样的错误。

错误：

> 执行目标 org.apache.maven.plugins:maven-resources-plugin:2.5:resources 的默认资源失败：无法解析插件 org.apache.maven.plugins:maven-resources-plugin:2.5 或其依赖项之一: 从[http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)传输 commons-cli:commons-cli:jar:1.0 失败被缓存在本地仓库中，直到 Central 的更新间隔过去后才会重新尝试解析或强制更新。原始错误：无法将工件 commons-cli:commons-cli:jar:1.0 从/传输到中央（http://repo.maven.apache.org/maven2）：到[http://repo.maven 的连接超时。 apache.org/maven2/commons-cli/commons-cli/1.0/commons-cli-1.0.jar](http://repo.maven.apache.org/maven2/commons-cli/commons-cli/1.0/commons-cli-1.0.jar) (org.apache.maven.plugins:maven-resources-plugin:2.5:resources:default-resources:process-resources)

环境细节。

Maven：Apache Maven 2.2.1 (r801777; 2009-08-06 20:16:01+0100) Java 版本：1.6.0_24 Java 主页：/opt/icedtea-bin-6.1.11.5/jre

Eclipse：版本：Juno Service Release 1 Build id：20121004-1855

插件：m2e - Eclipse 1.2.0.20120903-1050 的 Maven 集成 m2e - 通过 logback 日志记录的 slf4j（可选）1.2.0.20120903-1050

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-
  instance"xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.test</groupId>
  <artifactId>mf</artifactId>
  <version>0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>mf</name>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>cc.mallet</groupId>
      <artifactId>mallet</artifactId>
      <version>2.0.7-RC2</version>
    </dependency>

    <dependency>
      <groupId>com.googlecode.efficient-java-matrix-library</groupId>
      <artifactId>ejml</artifactId>
      <version>0.20</version>
    </dependency>

    <dependency>
      <groupId>jfreechart</groupId>
      <artifactId>jfreechart</artifactId>
      <version>1.0.0</version>
    </dependency>
  </dependencies>

   <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.1</version>
        <configuration>
          <archive>
            <manifestEntries>
              <Main-Class>lda.TMRS</Main-Class>
            </manifestEntries>
          </archive>
        </configuration>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>1.7</version>
        <executions>
          <execution>
            <id>shade</id>
            <goals>
              <goal>shade</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>

</project> 
```

有人对如何摆脱此错误有任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:23:10.867

您已在本地存储库中缓存文件。看：
`Failure to transfer commons-cli:commons-cli:jar:1.0 from http://repo.maven.apache.org/maven2 was cached in the local repository`

尝试`$M2_HOME/repository`从您的以下文件中删除一个或仅提到的文件`$M2_HOME/repository`：

*   公共-cli/公共-cli*

# php - 安装 suPHP 后出现 500 内部服务器错误。而在线解决方案只会导致更多问题

> ID：13372360
> 
> 赞同：0
> 
> 时间：2012-11-14T02:57:31.110
> 
> 标签：php, apache, configuration, suphp

由于我安装了 suPHP（为了能够正确运行 Wordpress），我收到“500 内部服务器错误”。不是在我加载 WP`index.php`时，而是在我加载时`phpinfo.php`（只是 phpinfo 函数）。phpMyAdmin 也无法再登录（Chrome 会弹出“文件另存为”对话框）。

所以我找到[了这个答案](http://www.watters.ws/mediawiki/index.php/Use_custom_php.ini_file_with_suPHP)。只是现在该`php.ini`文件似乎引起了麻烦，并且*每个*页面都抛出了 500 错误，即使`index.php`之前正在加载。正如该网站所建议的，这是我`php.ini`的全部内容，只是由于某种原因它破坏了一切：

```
register_globals = On 
allow_url_fopen = On
upload_max_filesize = 80M 
post_max_size = 80M 
memory_limit = 80M 
upload_tmp_dir = 80M 
max_execution_time = 20000 
```

这是`.htaccess`：

```
suPHP_ConfigPath /home/computer/Documents/Cf 
<Files php.ini> 
order allow,deny 
deny from all 
</Files> 
```

我在 Ubuntu 桌面 12.10 上。我的虚拟主机指向我的`~/Documents`目录（在安装 suPHP 之前一切正常）。

这是我第一次设置 LAMP（直到现在我一直在使用重新打包的 MAMP/LAMPP……我想学习如何管理一个完整的 LAMP 设置，但是我整天都在和这个东西作斗争并且无法完成任何工作）。

**编辑：**将所有文件的所有权（`sudo chown -R www-data`）更改为 Apache 使我能够从脚本编写文件......但我仍然无法弄清楚 suPHP 出了什么问题。在解决此问题之前，我已禁用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:54:08.693

Chrome 要求您“将文件另存为”，因为您的 php 文件处理程序很糟糕，并且当 Apache 不知道如何使用文件时，它只是将其提供给下载。手动配置 Apache 以使用 PHP 处理程序（在 mod_php 之外）并不适合胆小的人，所以我为迎接这一挑战而鼓掌。虽然我只使用过 CentOS 而不是 Ubuntu，但除了任何 get/make 差异之外，本指南应该普遍适用于涵盖这些步骤并查看您是否遗漏了任何内容。

[http://markus.revti.com/2010/03/installing-suphp-on-centos-5/](http://markus.revti.com/2010/03/installing-suphp-on-centos-5/)

您的问题很可能不是来自错误的 php.ini 或 htaccess 设置，而是您在加载 suPHP 模块、打开 suPHP 引擎、设置 suPHP 处理程序、设置 suphp.conf 的 httpd/virtualhosts 配置中缺少某些内容文件等。如果这一切都是正确的，并且这只是 suPHP_UserGroup 的权限问题，那么您的服务器将不会拒绝 .php 源代码文件。

在你去调整你的 php.ini 之前让它服务页面。我不确定这些值的建议是什么，但这些值并不理想，例如 max_execution_time 为 20000 秒（5.56 小时），或者发布和上传限制与 PHP 脚本内存限制的大小相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T16:40:14.453

我还可以让 suPHP 与 Ubuntu RackSapace Cloud Server 很好地配合使用。即使我告诉 root 将是用户。

# python - Emacs preview-latex 格式化 python 注释和文档字符串

> ID：13372362
> 
> 赞同：4
> 
> 时间：2012-11-14T02:57:46.760
> 
> 标签：python, emacs, latex

我最喜欢的 Emacs 功能之一是 preview-latex 包：它将 LaTeX 文档中的 LaTeX 方程呈现为内联图形。像这样：

![预览-乳胶屏幕截图](../Images/4df103a0b690d3ad8f337042f18b9ca2.png)

我想在 Emacs 中为 Python 注释和函数文档字符串提供类似的功能。我的文档字符串中有很多数学：

```
def proj_levenberg(x,y,wsqrt,A):
    """
    Finds a homography between two sets of 2d points.

    Specifically, approximately minimize the weighted image plane
    error

       min_A  sum_{X,y,w}  w  ||(A_12 x_) /  (A_3 x_)  -  y||^2

    where x_=[x;1], A_12 are the first two rows of A and A_3 is the
    third row of A.
    ... 
```

我想用 LaTex 写这些，这样当我浏览我的代码时，我可以看到渲染的文档字符串和注释。

有没有办法做到这一点，还是我必须在预览乳胶上做手术？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-11T14:49:44.660

我稍微修改了您的代码示例，以便 emacs 了解需要用乳胶片段替换的部分：

```
def proj_levenberg(x,y,wsqrt,A):
    """
    Finds a homography between two sets of 2d points.

    Specifically, approximately minimize the weighted image plane
    error

       \(min_A  sum_{X,y,w}  w  ||(A_12 x_) /  (A_3 x_1)  -  y||^2\)

    where \(x_1\)=[x;1], \(A_{12}\) are the first two rows of A and \(A_3\) is the
    third row of A.
    """ 
```

请注意，我已经在`\(`和`\)` [Source之间包裹了乳胶碎片](http://orgmode.org/manual/LaTeX-fragments.html)

您需要安装 org 模式。org 默认安装在 emacs 中，但我使用 emacs 包管理器安装了最新的 org 模式（版本 8.0+）。

我的 emacs 设置中有以下用于预览乳胶片段：

```
;; Previewing latex fragments in org mode
(setq org-latex-create-formula-image-program 'imagemagick) ;; Recommended to use imagemagick

(load "auctex.el" nil t t)
(load "preview-latex.el" nil t t)
(setq LaTeX-command "latex -shell-escape") 
```

[我的 emacs 组织模式设置](https://github.com/kaushalmodi/.emacs.d/blob/master/setup-files/setup-org.el)

[我的 emacs 乳胶设置](https://github.com/kaushalmodi/.emacs.d/blob/master/setup-files/setup-latex.el)

当我这样做时，使用此设置`M-x org-preview-latex-fragment`，我得到以下信息。您可以使用注意删除预览`M-x org-ctrl-c-ctrl-c` **，我不需要将主要模式设置为`org-mode`.** 即使缓冲区处于 Python 模式并且文件是 temp.py，此函数也可以工作。

*问题是每次重新打开该文件时都必须运行此函数；emacs 不会保存每个文件的预览状态。*

![乳胶片段预览](../Images/6d8cdac7d7fa8ccd921ee077167fe1d0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:55:14.837

IIUC，preview-latex 中有一个函数，您可以调用它来表示“将 START 和 END 之间的文本渲染为 LaTeX 公式”。如果你问 David Kastrup，他会告诉你那个函数是什么。因此，剩下要做的就是检测您希望以这种方式呈现代码的哪些部分。

# jquery - 使用 jqGrid 将行放入选定的 div

> ID：13372368
> 
> 赞同：1
> 
> 时间：2012-11-14T02:59:06.080
> 
> 标签：jquery, jqgrid, drag-and-drop

几周前我开始使用 jqGrid。它看起来好像可以做我需要的一切（基本的东西）。现在我的雄心壮大了一点，我想将各个行从网格中拖出，并将它们的 ID 放入一个 div 中，该 div 是许多 div 网格的一部分。这就像将 jqGrid 行中包含的一些信息分配到位于该 jqGrid 之外的 div 中。jqGrid可以做到这一点吗？如果是，请问如何？如果没有，请您指出正确的方向吗？

# sql - 表在插入后触发器中发生变异

> ID：13372370
> 
> 赞同：0
> 
> 时间：2012-11-14T02:59:33.163
> 
> 标签：sql, database, triggers

由于某些触发器，我在将数据插入表时遇到问题。例如，以下触发器确保教授不是学生。

```
CREATE TRIGGER StudentOrProfessor2
AFTER INSERT ON Professor
FOR EACH ROW
BEGIN
   DELETE FROM Professor
   WHERE (:NEW.ID IN (SELECT Student.ID FROM Student));
END;
/ 
```

但是，当我在教授关系中插入一个元组时，出现以下错误。

```
SQL> INSERT INTO Professor VALUES('44415676', '246813579', 'Mathematics', '2', '000070000', '317', '3921234');
INSERT INTO Professor VALUES('44415676', '246813579', 'Mathematics', '2', '000070000', '317', '3921234')
           *
ERROR at line 1:
ORA-04091: table S11022CZ.PROFESSOR is mutating, trigger/function may not see
it
ORA-06512: at "S11022CZ.STUDENTORPROFESSOR2", line 2
ORA-04088: error during execution of trigger 'S11022CZ.STUDENTORPROFESSOR2' 
```

我不太确定该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:59:59.913

我相当确定您不能在表上创建触发器，然后在触发器中修改该表。您是否试图确保不会将学生插入教授表中？ID 是内部数据库密钥（1,2,3,4....）还是具有某些含义的业务密钥？（即S11022CZ）

如果它是一个无意义的内部数据库键（例如递增的数字），那么如果您有 Student Joe Bloggs，ID 73。然后您创建一个教授记录 Prof Juluis Sumner，他的 ID 为 73？

基本上我认为这里存在数据库设计问题。

# ios - NS词典；难以获得价值

> ID：13372375
> 
> 赞同：0
> 
> 时间：2012-11-14T03:00:32.227
> 
> 标签：ios, json, nsdictionary

这是我用于字典的 JSON 文件：

```
{

    "Reports": {
        "Title of sheet": {
            "id": "1",
            "active": "0",
            "title": "Title of sheet",
            "date": "October 22, 2012",
            "description": "description",
            "ext": "DOCX",
            "fortest": "Tuesday, October 23",
            "subject": "Budget",
            "author": "xxxxxxxxxx",
            "email": "xxxxx@gmail.com"
        }
    }
} 
```

这是我用来把它变成字典的代码（在我发出请求之后）

```
self.tableDataSource = [NSMutableArray array];

 for (NSString *key in object.allKeys) // object is your root NSDictionary
    {
        NSDictionary *subDict = [object valueForKey:key];
        //create a new dictionary with two values - one for the key and one for the value.
        NSMutableDictionary *newDict = [NSMutableDictionary dictionary];
        [newDict setValue:subDict forKey:@"value"];
        [newDict setValue:key forKey:@"key"];
        [self.tableDataSource addObject:newDict];
    } 
```

这会生成以下输出：

```
(
        {
        key = Reports;
        value =         {
            "Sheet Title" =             {
                    active = 0;
                    author = "xxx xxxxxx";
                    date = "October 22, 2012";
                    description = "Description";
                    dl = "9 downloads";
                    email = "xxxxxxx@gmail.com";
                    ext = DOCX;
                    fortest= "Tuesday, October 23";
                    id = 1;
                    subject = Budget;
                    title = "Sheet title";
            };
        };
    }
) 
```

这是我的问题...如何将“工作表标题”更改为 info = 就像我对报告（键）和值所做的那样？报告数组将包含更多条目，其中所有条目都带有不同的“工作表标题”数组。我不想具体并按名称调用数组，因为总会有数组添加到我的 json 中。请帮忙，谢谢！

PS我试过摆弄for循环，但无济于事......

* * *

编辑：我想要这样的东西：

```
(
        {
        key = Reports;
        value =         {
            info =             {
                active = 0;
                author = "xxx xxxxxx";
                date = "October 22, 2012";
                description = "Description";
                dl = "9 downloads";
                email = "xxxxxxx@gmail.com";
                ext = DOCX;
                fortest = "Tuesday, October 23";
                id = 1;
                subject = Budget;
                title = "Sheet title";
            };
        };
    }
) 
```

* * *

编辑2：

知道了！我终于通过一个颇有创意的解决方案找到了答案。我基本上将我的 NSDictionary 转换为 NSArray 并在两者之间切换，如果这有意义的话......我回家后会发布一些代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:47:32.383

根据我对您的问题的理解，添加`subDict = [NSDictionary dictionaryWithObject:[subDict valueForKey:[[subDict allKeys] objectAtIndex:0]] forKey:@"info"];`到方法中。只需在该行之后添加它`NSDictionary *subDict = [object valueForKey:key];`

例如：-

```
 self.tableDataSource = [NSMutableArray array];

 for (NSString *key in object.allKeys) // object is your root NSDictionary
    {
        NSDictionary *subDict = [object valueForKey:key];
        subDict = [NSDictionary dictionaryWithObject:[subDict valueForKey:[[subDict allKeys] objectAtIndex:0]] forKey:@"info"];
        //create a new dictionary with two values - one for the key and one for the value.
        NSMutableDictionary *newDict = [NSMutableDictionary dictionary];
        [newDict setValue:subDict forKey:@"value"];
        [newDict setValue:key forKey:@"key"];
        [self.tableDataSource addObject:newDict];
    } 
```

那应该打印，

```
(
        {
        key = Reports;
        value =         {
            info =             {
                active = 0;
                author = "xxx xxxxxx";
                date = "October 22, 2012";
                description = "Description";
                dl = "9 downloads";
                email = "xxxxxxx@gmail.com";
                ext = DOCX;
                fortest = "Tuesday, October 23";
                id = 1;
                subject = Budget;
                title = "Sheet title";
            };
        };
    }
) 
```

**更新：** 根据下面的评论，您需要`subDict = [NSDictionary dictionaryWithObject:[subDict valueForKey:[[subDict allKeys] objectAtIndex:i]] forKey:@"info"];`在另一个循环中使用来获取所有子数组。根据您的要求修改此行。

# mysql - 使用 SQL Server 2008 R2 进行 Redmine

> ID：13372376
> 
> 赞同：0
> 
> 时间：2012-11-14T03:00:47.237
> 
> 标签：mysql, sql-server, sql-server-2008, sqlite, redmine

我使用[此处](http://www.helicontech.com/articles/installing-redmine-on-windows-in-production/)的安装指南使用 IIS 7 将 Redmine 安装到我们的 Windows 生产服务器。安装很顺利，几乎不需要我输入 --- 我只需点击“开始”，它就完成了一切。

但是，我们的生产服务器已经有 SQL Server 2008 R2。在设置 Redmine 时，它​​似乎已在单独的引擎中自动安装和设置所需的数据库。我想将它迁移到我们的 SQL Server 2008 R2，只是为了将所有内容集中到一个引擎中，这样我们就少了一件需要关注的事情。

根据该安装指南，Redmine 支持多个数据库引擎。但我不明白“自定义数据库”部分中给出的说明。一方面，它说去 Redmine 应用程序的配置文件夹并选择与我所需的数据库引擎相对应的文件并将其重命名为 database.yml。

这是我的 Redmine 配置文件夹中的内容：

```
[folder] environments
[folder] initializers
[folder] locales
additional_environment.rb.example
application.rb
boot.rb
configuration.yml.example
database.yml
database.yml.example
environment.rb
preinitializer.rb
routes.rb
settings.yml 
```

所以首先，我没有看到任何我希望的“database.yml.mssql”文件。我继续在记事本中打开 database.yml 只是为了看看我正在使用什么，这是该文件的内容：

```
production:
  adapter: sqlite3
  database: db/test.sqlite3
  host: localhost
  username: root
  password:
  encoding: utf8

development:
  adapter: mysql
  database: redmine_development
  host: localhost
  username: root
  password:
  encoding: utf8 
```

我对 Microsoft SQL Server 2008 R2 以外的数据库的经验绝对为零。我的第一个问题是，mysql 和 sqlite3 到底是在哪里安装的？我找不到它们的任何踪迹，而且我不知道如何“查看”数据库，即使是通过命令行也是如此。

有趣的是 Redmine 应用程序文件夹中名为“db”的文件夹。该文件夹包含：

```
[folder] migrate
schema.rb
test.sqlite3 
```

这些文件几乎肯定是相关的，但我没有看到一切是如何联系在一起的。migrate 文件夹包含一堆 .rb 文件，例如 001_setup.rb 和 105_build_projects_tree.rb。

我确实在 Google 上搜索过“redmine sql server”，但结果的问题是，在某些情况下，一个线程是从同一个问题开始的，并且从未跟进，或者，帖子/线程已有多年历史，可能不再存在可靠的。

现在Redmine似乎正在工作。我可以创建用户、登录等等。但它是一个巨大的黑匣子。如果迁移到 SQL Server 2008 R2 不可行并且我坚持使用默认值，我想知道 Redmine 使用的数据库在哪里，以及如何查看表等。

**底线问题：如何修改 Redmine 以使用 SQL Server 2008 R2？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:39:43.033

我没有任何使用 Redmine 和 MSSQL 的经验，所以我无法回答你的主要问题。但我可以就您的两个子问题提供一些信息：

首先，我很确定“开发”数据库（mysql 数据库）不存在。database.yml 似乎总是包含这一点（我想作为一个示例，说明如何拥有一个同时具有测试和产品数据库的 Redmine 实例），但安装只创建生产数据库。

您还询问了如何查看数据库，如果您现在无法使用 sqlite db。[http://www.sqlite.org/sqlite.html](http://www.sqlite.org/sqlite.html)上有一个命令行程序，应该可以让您查询和修改数据库。

# r - 从R中的公式获取回归函数

> ID：13372378
> 
> 赞同：0
> 
> 时间：2012-11-14T03:00:56.110
> 
> 标签：r, formula, regression

我只是想写一个 R 函数，它给我这个表达式的回归函数：y~(k,l,m,n)。这些字母代表非线性函数中的参数。当我以封闭形式（y〜（））编写模型时，这个R函数应该从模型中提取回归函数。它可以是具有两个或多个参数的任何非线性函数。谁能帮我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:51:04.973

我认为你的症结在于得到一个可以解析的公式

你不能只是有`y~(a,b,d)`，你需要一些函数名，即`y ~ f(a, b, d)`

然后您可以使用`all.vars`提取变量名称并创建模型矩阵并编写您的拟合函数

例如

```
all.vars(y ~ f(a,b,d))

## [1] "y" "a" "b" "d"

# get the response

as.character(y ~ f(a,b,d))[2]
## [1] "y" 
```

您可以使用这些从搜索路径中提取对象

# json - 如何从 SoundCloud 活动 API 获取收听活动？

> ID：13372380
> 
> 赞同：4
> 
> 时间：2012-11-14T03:01:05.740
> 
> 标签：json, api, soundcloud

我有兴趣展示用户最近听过的曲目；但这似乎在活动 API 中不可用：

[http://developers.soundcloud.com/docs/api/reference#activities](http://developers.soundcloud.com/docs/api/reference#activities)

我错过了什么吗？是否有另一个 API 端点可以“监听”？

# css-transitions - “transition:all”是否包括“transition:transform”？

> ID：13372386
> 
> 赞同：0
> 
> 时间：2012-11-14T03:01:57.453
> 
> 标签：css-transitions

我可以看到`css`属性列表没有`transform`.so`transition:all`包含`transition:transform`? 我该如何测试呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:04:44.110

是的。快速搜索会将我带到以下菜单：

[http://www.the-art-of-web.com/css/css-animation/#section_2](http://www.the-art-of-web.com/css/css-animation/#section_2)

# c++ - C ++中的列表迭代器查找函数错误

> ID：13372390
> 
> 赞同：1
> 
> 时间：2012-11-14T03:02:58.777
> 
> 标签：c++, list, iterator

我的 C++ 程序中有一个编译错误：“ `no matching function for call to find(std::_List_iterator<Process>, std::_List_iterator<Process>, Process&)`”。

该类`mfqueue`看起来像：

```
MFQueue::MFQueue() {
        list<Process> queue;
        vector<int> ran;
        int time_quantum = 0;
        int run_for = 0;
}

MFQueue::MFQueue(int quantum) {
        list<Process> queue;
        vector<int> ran;
        int time_quantum = quantum;
        int run_for = 0;
} 
```

* * *

“过程”是我的课之一

```
bool MFQueue::contains(Process p) {
        list<Process>::iterator itr = find(queue.begin(), queue.end(), p);
        return (p == *itr);;
} 
```

有谁知道如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T03:09:38.753

添加`#include <algorithm>`到您的 CPP 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:14:13.843

您需要重载`operator==`算法`std::find`，假设您想比较 Process 的 id 说：

```
 bool operator==(const Process &lhs, const Process& rhs)
 {
   return lhs.id== rhs.id;
 } 
```

现在，你可以让它工作了

```
#include <algorithm>
std::list<Process>::iterator itr = std::find(queue.begin(), queue.end(), p); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:12:28.647

你为什么`list<Process> queue;`在构造函数中声明不使用它们？

# sql - 案例陈述是答案吗

> ID：13372392
> 
> 赞同：2
> 
> 时间：2012-11-14T03:03:16.183
> 
> 标签：sql, case

对于要跟踪的每个呼叫，我都有多行数据。数据看起来像这样

```
Call_ID | site | Agent_key | starttime | exit_reason
----------------------------------------------------
1234     |   7   |           |     1     | transfer
1234     |   3   |  1010101  |     15    | transfer
1234     |   7   |  2121212  |     302   | transfer
1234     |   5   |  3232323  |     680   | transfer 
```

我想创建一个名为“first_site”的列。当 starttime 为 min(starttime) 且 Agent_key 不为空时，参数为 site。（如果 Agent_key 为空，则表示呼叫仍在呼叫中心系统中，所以我不在乎那里代表​​什么站点。

结果看起来像

```
Call_ID | site | Agent_key | starttime | exit_reason | first_site |
-------------------------------------------------------------------
1234     |   7   |           |     1     | transfer    |      3     |
1234     |   3   |  1010101  |     15    | transfer    |      3     |
1234     |   7   |  2121212  |     302   | transfer    |      3     |
1234     |   5   |  3232323  |     680   | transfer    |      3     | 
```

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:08:54.807

希望这会有所帮助

```
Select t.*, x.first_site
From YourTable t
Inner Join

(Select Call_Id,Min(site) As first_site
From YourTable
Where agent_key is not null -- Where Len(agent_key) > 0
Group By Call_Id)X

On t.Call_Id = x.Call_Id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T04:08:44.673

You can use a simple SCALAR SUBQUERY to achieve this.

```
select outr.*, (select TOP 1 site
                 from tbl
                where call_id=outr.call_id
                  and agent_key is not null
             order by starttime asc) first_site
  from tbl outr; 
```

If you need to make up a site, e.g. "IVR" when there isn't any, then use `ISNULL()`

```
select outr.*, ISNULL((select TOP 1 site
                 from tbl
                where call_id=outr.call_id
                  and agent_key is not null
             order by starttime asc), 'IVR') first_site
  from tbl outr; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:51:24.733

我的查询在没有额外的表连接的情况下执行。;)

```
SELECT Call_ID, site, Agent_key, starttime, exit_reason,
       CASE WHEN MIN(CASE WHEN Agent_key IS NOT NULL THEN starttime END) OVER () = starttime 
            THEN site 
            ELSE CASE WHEN MIN(CASE WHEN Agent_key IS NOT NULL THEN starttime END) OVER () != starttime
                      THEN MIN(CASE WHEN Agent_key IS NOT NULL THEN site END) OVER () END
       END AS first_site
FROM dbo.your_table 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/7705f/1/0)上的演示[](http://sqlfiddle.com/#!3/7705f/1/0)

# ruby - 在 JRuby 中，如何确定导致 java.lang.ThreadDeath 的原因？

> ID：13372394
> 
> 赞同：9
> 
> 时间：2012-11-14T03:03:58.643
> 
> 标签：ruby, debugging, jruby

在为一些与 JRuby 中的临时文件交互的代码运行单元测试时，我有时会得到以下信息：

```
Exception: java.lang.ThreadDeath thrown from the UncaughtExceptionHandler in thread "Thread-6395" 
```

它似乎没有引起任何问题，但是发生了什么，我如何确定它发生在哪里？我尝试打开`-d`，但这并没有给我异常的堆栈跟踪。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-07T09:14:32.527

FWIW：这可能与[http://jira.codehaus.org/browse/JRUBY-7074](http://jira.codehaus.org/browse/JRUBY-7074)有关。

我偶尔会看到这个 Thread-Death 输出与一个不使用反引号但调用 system.

# mysql - DOB 字段的平均年龄 - MySQL / PHP

> ID：13372395
> 
> 赞同：8
> 
> 时间：2012-11-14T03:03:59.210
> 
> 标签：mysql, average, date

我不确定如何计算我的联系人的平均年龄，他们都存在于一个带有 DOB 日期字段（如 YYYY-MM-DD）的 mysql 表中。

有没有办法处理 MySQL 调用（请注意我使用的是 cakephp，但这应该不是问题）

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T03:09:16.843

您可以使用以下方法确定年龄[`DATEDIFF()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_datediff)：

```
DATEDIFF(TO_DAYS(NOW()), TO_DAYS(DOB)) 
```

平均值在 MySQL 中使用[`AVG()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)：

```
AVG(Column) 
```

所以结合这些：

```
SELECT AVG(DATEDIFF(TO_DAYS(NOW()), TO_DAYS(DOB))) as `Average` FROM Contacts; 
```

请注意，这将返回以天为单位的平均年龄，而不是年。要获得年份，您可以平均每个日期的年份部分：

```
SELECT AVG(DATEDIFF(YEAR(NOW()), YEAR(DOB))) as `Average` FROM Contacts; 
```

或者正如@TimDearborn 建议的那样，将日平均值除以 365.242199。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T12:51:57.797

这是你的答案

```
SELECT AVG(TIMESTAMPDIFF(YEAR, DOB, CURDATE())) AS `Average` FROM Contacts WHERE DOB IS NOT NULL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-26T16:40:07.020

如果您使用的是 Bailey Parker 的第二种方法，则实际上不需要进行 datediff。只需减去年份并取平均值。

```
SELECT AVG(YEAR(NOW())-YEAR(dob)) as `Average` FROM users; 
```

# flash - Flash CS6 编辑多个关键帧

> ID：13372398
> 
> 赞同：0
> 
> 时间：2012-11-14T03:04:20.307
> 
> 标签：flash

我在舞台上有所有关键帧中的符号。我想修改所有关键帧上 2 个符号的属性。多重编辑不起作用，或者我不知道如何让它保存更改。如果有一个技巧可以做到这一点，我似乎找不到它。我选择编辑多个帧。然后我选择滑块结束在时间轴顶部的帧。我进行更改并单击编辑多个帧按钮。我有 500 多帧，更改所有这些属性让我抓狂....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:06:27.537

最好的方法是使用 Javascript Flash 语言 (JSFL)，您可以使用它来自动执行 Flash 创作工具中的重复操作。

这是一个简短的脚本，可以满足您的要求（您需要确保带有您要更改的符号的图层是唯一未解锁的图层）：

```
var doc = fl.getDocumentDOM();
var tl = doc.getTimeline();
var selFrames = tl.getSelectedFrames();

for(var i=selFrames[1];i<selFrames[2];i++)
{
    tl.currentFrame = i;
    tl.setSelectedFrames(i,i+1);
    doc.selectAll();
    var sel = doc.selection[0];
    if(doc.getSelectionRect())
    {
        //set symbol properties to what you want here eg. .x, .y, etc.
        sel.x = 20;
        sel.y = 20;
    }
} 
```

您可以将其保存为具有 JSFL 扩展名的文件并从 Flash 创作环境中运行它。

您可以在此处阅读 JSFL 的全部 API：http: [//help.adobe.com/en_US/flash/cs/extend/index.html](http://help.adobe.com/en_US/flash/cs/extend/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:20:01.893

我认为最简单的解决方案是编辑库中的两个符号并将内容包装到子符号中并应用属性...

当您将影片剪辑放到舞台上并在每一帧中应用属性时，在幕后（在 addFrameScript 内）它只是一次又一次地做同样的事情。这样的重复确实需要一点代码。单独的时间线对于基本动画来说已经足够了，但是即使是一点点 AS3 也可以给你很好的可重复使用的东西。

# java - java.io.IOException：写入错误：系统调用期间的 I/O 错误，对等方重置连接

> ID：13372401
> 
> 赞同：-1
> 
> 时间：2012-11-14T03:05:02.887
> 
> 标签：java, android, exception

我不时遇到此错误消息。

```
11-14 10:46:04.693: W/System.err(14814): java.io.IOException: Write error: I/O error during system call, Connection reset by peer
11-14 10:46:04.693: W/System.err(14814):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.nativewrite(Native Method)
11-14 10:46:04.693: W/System.err(14814):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.access$600(OpenSSLSocketImpl.java:55)
11-14 10:46:04.693: W/System.err(14814):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLOutputStream.write(OpenSSLSocketImpl.java:583)
11-14 10:46:04.693: W/System.err(14814):    at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:175)
11-14 10:46:04.693: W/System.err(14814):    at java.io.BufferedWriter.flush(BufferedWriter.java:158) 
```

有任何想法吗？

我在这里看到了同样的问题： [http ://code.google.com/p/k9mail/issues/detail?id=970](http://code.google.com/p/k9mail/issues/detail?id=970)

他们说这只是一个连接问题。是吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:18:43.180

这可能是“只是一个临时的连接问题”，但也可能是您试图将 SSL 与非 SSL 服务器通话。如果您使用的是 JSSE 而不是 OpenSSL，则异常消息甚至可能会这样说。

# php - 用 PHP 编写一些过滤器和发布的更好方法

> ID：13372402
> 
> 赞同：1
> 
> 时间：2012-11-14T03:05:04.027
> 
> 标签：php

我有一个正在工作的表单，并且正在使用 strip_tags 和 htmlentities 来尝试阻止联系表单提交的任何恶意代码或垃圾邮件链接。有没有更好的写法，就是结合以下：

```
$comments = $_POST['comments'] ;
$comments = strip_tags($comments);
$comments = htmlentities($comments); 
```

如果可能的话，我想弄清楚如何在一个语句中写出来。此外，当我按照上面的顺序使用它时，只有 strip_tags 或 htmlentities 只有第一个列出的（在上面的 strip_tags 中）有效。

最后一个问题，是 htmlentities 还是 stripslahses 更好地防止在联系表格中发送垃圾链接？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:08:21.537

> 如果可能的话，我想弄清楚如何在一个语句中写出来

```
$comments = htmlentities(strip_tags($_POST['comments'])); 
```

# ruby - Ruby：没有类的“新”

> ID：13372404
> 
> 赞同：7
> 
> 时间：2012-11-14T03:05:51.610
> 
> 标签：ruby

我对 Ruby 的理解是，“new”关键字总是与类名相结合来创建类的新实例。在下面的代码中，可在[https://gist.github.com/e9c0da1a6e92dd12cbc7](https://gist.github.com/e9c0da1a6e92dd12cbc7)找到，该代码是作为 Ruby Programming Challenge for Newbies 竞赛的解决方案提交的，作者在没有实例化类的情况下使用了 3 次“new”关键字。

在一种情况下，new(0,0) 被分配给一个常数 CLOSED。在另一种情况下，new(open,close) 是函数的返回值。为什么要这样做？以这种方式使用时，“新”在做什么？它在创造什么？

```
class OpenHours

    attr_reader :open, :close

    def initialize(open, close)
      @open, @close = open, close
    end

    def duration
      @duration ||= @open < @close ? @close - @open : 0
    end

    CLOSED = new(0, 0)                #first new

    def self.parse(open, close)
      open  = Time.parse(open)
      close = Time.parse(close)

      open  = TimeUtils::seconds_from_midnight(open)
      close = TimeUtils::seconds_from_midnight(close)

      new(open, close)                        #second new

    end

    def offset(seconds)
      self.class.new([@open, seconds].max, @close)     #third new
    end

  end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T03:09:09.403

在 Ruby 中，*不是*`new`运算符或关键字。它是实例的实例方法。例如，对象是一个类，因此是 的实例，因此具有实例方法。*`Class``OpenHours``Class``new`*

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T03:16:24.247

当receiver为`self`时，receiver可以省略。您质疑的前两个`new`调用是在 的上下文中调用的`OpenHours`，这意味着`self`设置为`OpenHours`。因此`new`，没有显式接收者等价于`self.new`and `OpenHours.new`。在您的第三个示例中，上下文是`OpenHours`. `self`指代那个实例，并且`self.class`指代`OpenHours`，所以`self.class.new`等价于`OpenHours.new`。在所有情况下，创建的对象都是`OpenHours`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:09:39.000

OpenHours::CLOSED 是 OpenHours 的一个实例

```
irb(main):034:0> OpenHours::CLOSED
=> #<OpenHours:0x3ee2e85d @open=0, @close=0>
irb(main):035:0> OpenHours::CLOSED.class
=> OpenHours 
```

老实说，我不知道他们在这里做什么。我认为这是糟糕的代码。

**回复评论**：如果你这样做`foo = OpenHours.parse(open, close)`，那么实例将被分配到`foo`*

# c# - 使用 System.Drawing 更改形状

> ID：13372405
> 
> 赞同：4
> 
> 时间：2012-11-14T03:06:00.973
> 
> 标签：c#, .net, winforms, drawing, system.drawing

我们如何改变 Windows 窗体的形状`Form`？我的意思是，就像完全破坏了这件事。

像这样的东西？改变事物的形状是`System.Drawing`最好的方法吗？比如形式？或者还有其他我需要使用的东西吗？

![在此处输入图像描述](../Images/9610ea1e647a7507ebbc2edb7abc9547.png)

我不追求代码或任何东西，只是一些有用的参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:10:58.090

MSDN 有一个关于[如何：创建非矩形 Windows 窗体](http://msdn.microsoft.com/en-us/library/6k15y9et.aspx)的参考页面。它贯穿整个过程。

# facebook - 在 iframe 中跟踪 FB Likes - 事件未触发

> ID：13372408
> 
> 赞同：2
> 
> 时间：2012-11-14T03:06:21.140
> 
> 标签：facebook, facebook-like

我们的服务允许任何公司为其业务进行促销。

用户设置促销，复制一段代码，并将其放置在他们的网站上，该网站在 iframe 中显示促销。

促销页面嵌入了 Facebook 点赞按钮，点击后会自动“点赞”该公司的 Facebook 页面。

我们希望跟踪这些点击并在他们的仪表板中为我们的用户显示它们，这样他们就可以看到促销给他们带来了多少新的“喜欢”。

我们尝试使用 FB.Event.subscribe，但单击“赞”按钮时未触发事件。我们对使用 FB SDK 真的很陌生，所以我们可能遗漏了一些东西......这是我们所拥有的：

```
 window.fbAsyncInit = function() {
    FB.init({
      appId      : '424426844274364', // App ID
      channelUrl : '//www.viralsweep.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    FB.Event.subscribe('edge.create',
        function(response) {
            alert('You FB liked the URL: ' + response);
        }
    );

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-11T16:51:17.367

首先你需要加载 sdk.js

```
<script src ="https://connect.facebook.net/en_GB/sdk.js" ></script> 
```

然后你调用函数

```
FB.Event.subscribe('edge.create',
        function(response) {
            alert('You FB liked the URL: ' + response);
        }
    ); 
```

现在，由于在加载 sdk 之前调用了该函数，因此无法找到 FB 对象。

# wpf - XamlReader .net 3.5“样式中的触发器类型无法识别”

> ID：13372414
> 
> 赞同：3
> 
> 时间：2012-11-14T03:07:18.760
> 
> 标签：wpf, xaml, datatrigger, xamlreader

在我的 wpf 应用程序中，我扩展了 datatrigger 类，如下所示

```
public class DescriptiveTrigger : System.Windows.DataTrigger
{
    public DescriptiveTrigger()
    {
    }

    private String _Description = "";
    public String Description
    {
        get { return _Description; }
        set { this._Description = value; }
    }
} 
```

这样用户就可以向他们创建的触发器添加描述（使用简单的上下文菜单来添加和删除它们）。然后在使用 xamlreader 重新加载文件时，使用 xamlwriter 将 xaml 导出并保存到文件中，我明白了

```
'MyControls.DescriptiveTrigger' trigger type in Style not recognized.  Error at object 'System.Windows.Style', Line 283 Position 22. 
```

我有一个用 .net4 编写的应用程序版本，即使使用 .net 3.5 版本创建的文件也能正常工作，所以我知道保存效果很好。

这是一个减去非重要部分的产品样本

```
 <Control1 xmlns="clr-namespace:MyControls.Controls;assembly=MyControls" 
    xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:dc="clr-namespace:MyControls;assembly=MyControls" 
        xmlns:dcc="clr-namespace:MyControls.Converters;assembly=MyControls" 
        xmlns:s="clr-namespace:System;assembly=mscorlib">
        .........
        <av:Label BorderBrush="#FF000000" BorderThickness="1,1,1,1" Background="#FF008000" Foreground="#FFFFFFFF" HorizontalAlignment="Left" VerticalAlignment="Center" ContextMenu="{av:DynamicResource LabelContextMenuKey}" av:Grid.Column="1">
          <av:Label.Style>
            <av:Style TargetType="av:IFrameworkInputElement">
              <av:Style.Triggers>
                <dc:DescriptiveTrigger Description="Background Color Trigger Where Value Is Greater Than 100">
                  <dc:DescriptiveTrigger.Binding>
                    <av:Binding Path="Content" ConverterParameter="100" RelativeSource="{av:RelativeSource Mode=Self}">
                      <av:Binding.Converter>
                        <dcc:GreaterThanToBooleanConverter />
                      </av:Binding.Converter>
                    </av:Binding>
                  </dc:DescriptiveTrigger.Binding>
                  <av:Setter Property="av:Panel.Background">
                    <av:Setter.Value>
                      <av:SolidColorBrush>#FF0000FF</av:SolidColorBrush>
                    </av:Setter.Value>
                  </av:Setter>
                  <dc:DescriptiveTrigger.Value>
                    <s:Boolean>True</s:Boolean>
                  </dc:DescriptiveTrigger.Value>
                </dc:DescriptiveTrigger>
              </av:Style.Triggers>
              <av:Style.Resources>
                <av:ResourceDictionary />
              </av:Style.Resources>
            </av:Style>
          </av:Label.Style>000
       </av:Label>
       ..........
       </Control1> 
```

我怎样才能解决这个问题？不，我不能只使用 .net4 版本：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:52:59.540

似乎触发器集合不接受 .NET 3.5 中的自定义触发器（它实际上在 4.0 中工作）

但是，如果您只想添加 Description 属性，则不需要继承 DataTrigger 类。这就是附加属性的用途:)

在 Control1.xaml.cs 中定义此附加属性：

```
 public static string GetDescription(DependencyObject obj)
    {
        return (string)obj.GetValue(DescriptionProperty);
    }

    public static void SetDescription(DependencyObject obj, string value)
    {
        obj.SetValue(DescriptionProperty, value);
    }

    // Using a DependencyProperty as the backing store for Description.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty DescriptionProperty =
        DependencyProperty.RegisterAttached("Description", typeof(string), typeof(Control1), new UIPropertyMetadata(string.Empty)); 
```

只需将其设置在您的 xaml 中：

```
<DataTrigger dc:Control1.Description="Background Color Trigger Where Value Is Greater Than 100"> 
```

# java - PSQLException：错误：列中的空值违反非空约束

> ID：13372422
> 
> 赞同：10
> 
> 时间：2012-11-14T03:08:34.630
> 
> 标签：java, postgresql, jdbc, null, constraints

我在 Debian 4.4.5-8 64 位的 x86_64-pc-linux-gnu 上使用 PostgreSQL 8.4.13。

我创建了下表：

```
CREATE TABLE users (
user_id     serial PRIMARY KEY NOT NULL,
name        varchar(200),
username    varchar(150),
password    varchar(150),
); 
```

然后，使用 Java 应用程序，我执行以下代码：

```
String insertTableSQL = "INSERT INTO USERS"
                + "(name, username, password) VALUES"
                + "(?,?,?)";
PreparedStatement preparedStatement = DBCon.prepareStatement(insertTableSQL);
preparedStatement.setString(1, userInfo.get("name"));           
preparedStatement.setString(2, userInfo.get("username"));
preparedStatement.setString(3, userInfo.get("password")));

preparedStatement.executeUpdate(); 
```

问题是`executeUpdate()`产生以下异常：

> ```
> ERROR: null value in column "user_id" violates not-null constraint 
> ```

奇怪的是，如果我使用 psql 执行相同的插入语句，它就会成功执行。为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T10:22:43.043

正如@mu 评论的那样，错误消息与您的其余问题相矛盾。
剩下的唯一合理解释是，事实上，您正在写信给**另一张桌子**。

尝试：

```
INSERT INTO users (user_id, name, username, password)
VALUES
  (1234,'foo', 'foo', 'foo')"; 
```

并检查你的桌子。`INSERT`到达您预期的餐桌了吗？如果没有，请检查您的设置：

*   IP，端口，数据库名称？
*   数据库中的相同模式？检查您的`search_path`设置。
*   您没有意外地将表名“USERS”双引号？双引号标识符不会转换为小写。[有关详细信息，请阅读标识符和关键字](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)一章。

找到另一个表实例`users`并修复您可能造成的潜在损坏。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:12:47.967

```
String insertTableSQL = "INSERT INTO USERS"
            + "(name, username, password) VALUES"
            + "(?,?,?)";
PreparedStatement preparedStatement = DBCon.prepareStatement(insertTableSQL);
preparedStatement.setString(1, userInfo.get("name"));           
preparedStatement.setString(2, userInfo.get("username"));
preparedStatement.setString(3, userInfo.get("password")));

preparedStatement.executeUpdate(); 
```

只注意三个问号，现在字段正确排列。

也不用担心`NOT NULL`约束。它会自行处理（它怎么可能`NULL`，它是`SERIAL`）并且可能导致您的错误。只需将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-25T11:26:14.847

解决。

我的问题是我在数据库中有 2 列，而在实体中有一个映射。这是由于属性文件中的 sql 更新而发生的

一旦删除一个并得到修复

# linux - AWS beanstalk cgi-bin 权限

> ID：13372432
> 
> 赞同：2
> 
> 时间：2012-11-14T03:09:46.693
> 
> 标签：linux, perl, cgi, amazon-elastic-beanstalk, cgi-bin

我在使用 aws 的 beanstalk 和运行我的 webapp 时遇到问题。

我已经以与上一个托管帐户相同的方式设置了所有内容，但是在尝试运行脚本时，在 var/www/cgi-bin/server.pl 中的 cgi-bin 中出现权限错误。

必须有什么地方我需要改变才能运行它。

我已将 cgi-bin 和 sever.pl 的权限设置为 755

在 httpd.conf 我添加了

选项 +ExecCGI AddHandler cgi-script cgi pl

所以看起来像这样

```
<Directory "/var/www/cgi-bin">
AllowOverride None
Options +ExecCGI
AddHandler cgi-script cgi pl
Order allow,deny
Allow from all 
```

我最后有关闭目录它只是没有出现在这里

还有什么你可以看到我失踪了吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:53:19.883

为了让脚本在 Apache 中工作，我不得不添加这一行：

```
ScriptAlias /cgi-bin/ "/var/www/cgi-bin/" 
```

# cocoa - 可可窗口在较新的操作系统上无法正确显示（或根本没有）

> ID：13372433
> 
> 赞同：0
> 
> 时间：2012-11-14T03:09:48.810
> 
> 标签：cocoa, osx-mountain-lion, ikscannerdeviceview

我开发了一个简单的应用程序，看起来与 Image Capture 几乎相同。我正在使用 Quartz 框架`IKDeviceBrowserView`和`IKScannerDeviceView`.

当我在装有 OSX 10.7 的 iMac 或 macbook 上测试它时，它工作正常，但是当我在另一台 macbook 上测试时，应用程序无法正常显示。一个运行 10.8.2 显示一个空的灰色窗口，另一个运行 10.8.1 显示一个窗口并且只显示下部区域。

我对 Cocoa 完全陌生，所以我不知道发生了什么或如何解决它。任何想法将不胜感激。

编辑：一切都是使用 Interface Builder 创建的：我有一个 MainWindow 和上面提到的两个扫描仪视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:48:33.547

这个问题实际上是我之前找不到的[IKDeviceBrowserView 在 OSX Mountain Lion 上显示没有内容的副本。](https://stackoverflow.com/questions/11841349/ikdevicebrowserview-displays-no-contents-on-osx-mountain-lion)

这个问题可以通过`AutoLayout`在笔尖上设置`translatesAutoresizingMaskIntoConstraints = YES`并同时设置`IKDeviceBrowserView`和设置来解决`IKScannerDeviceView`。

# java - Gradle - 权限被拒绝：连接

> ID：13372434
> 
> 赞同：3
> 
> 时间：2012-11-14T03:09:54.253
> 
> 标签：java, maven, gradle

当 gradle 检查 maven 的依赖项时，我收到以下错误：

```
Error transferring file: Permission denied: connect 
```

我发现这个问题可能与JDK 1.7 中与 IPv6相关的一个[已知错误有关。](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696)解决方法是`-Djava.net.preferIPv4Stack=true`在 Java VM 选项中进行设置。

我已经这样做了，但仍然收到同样的错误。我已经尝试设置我能想到的所有可能的环境参数，包括 MAVEN_OPTS、GRADLE_OPTS、_JPI_VM_OPTIONS、JAVA_OPTS 等。似乎没有任何效果。我可以在这里忽略一些简单的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T19:41:13.590

`-Djava.net.preferIPv4Stack=true`从命令行（使用 Minecraft Forge）使用 gradle 时，我尝试过使用。当它获取依赖项和其他文件时，它会抛出一个`permission denied: connect`错误。

我对此问题的解决方案是查找配置文件 (.ini) 并添加`-Djava.net.preferIPv4Stack=true`，或者我将其用作 CLI 中的参数，在这种情况下：

`gradlew cleancache --refresh-dependencies -Djava.net.preferIPv4Stack=true setupDecompWorkspace eclipse`.

这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:16:13.673

这听起来更像是缺少针对给定存储库的凭据。在 Maven 中，您必须在 settings.xml 文件中设置这些信息。

您需要针对给定的存储库进行身份验证。

```
repositories {
    maven {
        credentials {
            username 'user'
            password 'password'
        }
        url "http://repo.mycompany.com/maven2"
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-28T11:31:25.010

在 Windows 打开 -> 网络和共享中心，通过在 Windows 开始 -> 搜索中搜索

它将列出 LAN 连接和 VPN

转到 VPN

单击连接。

单击属性按钮取消选择 ipv6 以禁用

# r - 正则表达式；消除所有标点符号，除了

> ID：13372438
> 
> 赞同：8
> 
> 时间：2012-11-14T03:10:33.083
> 
> 标签：r, regex, strsplit

我有以下正则表达式，可以拆分任何空格或标点符号。如何从中排除 1 个或多个标点符号`:punct:`？假设我想排除撇号和逗号。我知道我可以明确地使用`[all punctuation marks in here]`而不是，`[[:punct:]]`但我希望有一种排除方法。

```
X <- "I'm not that good at regex yet, but am getting better!"
strsplit(X, "[[:space:]]|(?=[[:punct:]])", perl=TRUE)

 [1] "I"       "'"       "m"       "not"     "that"    "good"    "at"      "regex"   "yet"    
[10] ","       ""        "but"     "am"      "getting" "better"  "!" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T03:56:41.443

我不清楚你想要的结果是什么，但你也许可以使用[像这个答案这样](https://stackoverflow.com/a/4786560/271616)的否定类。

```
R> strsplit(X, "[[:space:]]|(?=[^,'[:^punct:]])", perl=TRUE)[[1]]
 [1] "I'm"     "not"     "that"    "good"    "at"      "regex"   "yet,"   
 [8] "but"     "am"      "getting" "better"  "!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T22:33:06.150

如果右侧的下一个字符是or ，您可以直接使用`(?![',])` [**否定前瞻**](http://www.rexegg.com/regex-lookarounds.html)对 PCRE 子模式施加限制，该匹配失败：`'``,`

```
[[:space:]]|(?=(?![',])[[:punct:]])
               ^^^^^^^^ 
```

请参阅[**正则表达式演示**](https://regex101.com/r/s2lKog/1)。

**细节**

*   `[[:space:]]`- 任何空格
*   `|`- 或者
*   `(?=(?![',])[[:punct:]])`- 一个积极的前瞻，要求在当前位置的右侧没有`'`and`,`并且有任何 1 个不是`'`or的标点符号（实际上，需要除and之外的`,`任何标点符号）。`'``,`

查看[R 在线演示](https://ideone.com/gVEp0q)

```
X <- "I'm not that good at regex yet, but am getting better!"
strsplit(X, "[[:space:]]|(?=(?![',])[[:punct:]])", perl=TRUE)
[[1]]
 [1] "I'm"     "not"     "that"    "good"    "at"      "regex"   "yet,"   
 [8] "but"     "am"      "getting" "better"  "!" 
```

# jquery - 如何在 angularJs 中使用 jquery columnize

> ID：13372440
> 
> 赞同：1
> 
> 时间：2012-11-14T03:10:35.070
> 
> 标签：jquery, angularjs, multiple-columns

我想使用 jquery 中的[columnize](http://welcome.totheinter.net/columnizer-jquery-plugin/columnize)插件在我的 AngularJS 应用程序中设置列。我超级天真的方法是：

```
.directive('columnize', function() {
    return {
        restrict: 'A',
        link: function(scope, iElement, iAttrs) {
            $(iElement).columnize({columns: 2});
        }
    };
}); 
```

使用此 HTML 代码：

```
<ol class="questions" columnize>
    <li ng-repeat="question in questions" class="question">
        <span>{{question.text}}</span>
        <ul class="choices" sortable="question.choices">
            <li ng-repeat="choice in question.choices">
                {{choice}}
            </li>
        </ul>
    </li>
</ol> 
```

但问题是在元素内部我使用了 ng-repeat。columnize destroy 的 dom 然后 ng-repeat 抛出一个它不能 insertBefore 空元素的异常。我觉得我的方法是错误的。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:31:48.580

```
.directive('columnize', function($timeout) {
   return {
     restrict: 'A',
     link: function(scope, iElement, iAttrs) {
              $timeout( function(){ iElement.columnize({columns: 2}), 0});
           } 
```

尽管这似乎可行，但我认为这不是正确的方法。我记得读过[另一篇文章](https://stackoverflow.com/questions/12176925/angularjs-reset-of-scope-value-doesnt-change-value-in-template-random-behav)，其中 $timeout 用于在初始渲染后运行一个函数，这似乎在这里工作。

希望你能得到更好的答案。

[小提琴](http://jsfiddle.net/mrajcok/4BCMs/)

# c# - C#语言比较

> ID：13372444
> 
> 赞同：2
> 
> 时间：2012-11-14T03:11:00.590
> 
> 标签：c#

我想比较两个 xml 文件并找出它们的异同，

```
private void checkLanguage(string file1, string file2)
        {
            XmlDocument xmldoc1 = new XmlDocument();
            XmlDocument xmldoc2 = new XmlDocument();

            XmlNodeList xmlnode1;
            XmlNodeList xmlnode2;
            int i = 0;
            int j = 0;

            string str = null;
            FileStream fs1 = new FileStream(file1, FileMode.Open, FileAccess.Read);
            xmldoc1.Load(fs1);

            FileStream fs2 = new FileStream(file2, FileMode.Open, FileAccess.Read);
            xmldoc2.Load(fs2);

            xmlnode1 = xmldoc1.GetElementsByTagName("data");
            xmlnode2 = xmldoc2.GetElementsByTagName("data");

            for (i = 0; i <= xmlnode1.Count - 1; i++)
            {
                str = xmlnode1[i].Attributes["name"].Value;

                for (j = 0; j <= xmlnode2.Count - 1; j++)
                {
                    if (str == xmlnode2[j].Attributes["name"].Value)
                    {
                        lblResult.ForeColor = Color.Green;
                        lblResult.Text += Environment.NewLine + xmlnode1[i].Attributes["name"].Value;   
                    }

                    else
                    {
                        label4.ForeColor = Color.Red;
                        label4.Text += Environment.NewLine + xmlnode1[i].Attributes["name"].Value;
                    }
                }

            }
} 
```

我的问题是差异字段中两个xml文件列表中的类似语言也是..如何解决这个问题..

有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:27:10.100

最好的方法是使用 linq to xml。将 xml 和外展都加载到语言值以进行比较。其他标签的方法相同。

谢谢阿哈里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:23:44.847

如果进行一般差异就足够了，我根本不会使用 XML 解析器。相反，我会使用 Google 的 DiffMatchPatch 库。下面是一些示例代码；

```
 var dmf = new diff_match_patch();
    var diffs = dmf.diff_main(FileOneAsString, FileTwoAsString); 
```

之后，您将获得所有差异的列表。这些分类为 EQUAL、ADD 或 DELETE。它们显示了在 file2 中必须进行哪些转换才能到达 file1。为了使其更具人类可读性，我建议使用语义清理方法。您可以设置一个 int 来确定清理的主要程度（我不记得名称，但如果您走这条路线，您可以轻松找到它）。

```
 dmf.diff_cleanupSemantic(diffs); 
```

此时，您可以通过遍历 diff 并查看字符串（diff 是具有类型和字符串的对象）来查看什么相等和什么不相等。

该库可以在此处下载[http://code.google.com/p/google-diff-match-patch/](http://code.google.com/p/google-diff-match-patch/)并且您可以使用 diff 演示测试您想要进行多少语义清理。

如果您想要的只是两个文件的差异，这将比使用 xml 解析器简单得多。

# pointers - 尝试在函数内添加指向数组的指针时程序失败 (C)

> ID：13372447
> 
> 赞同：1
> 
> 时间：2012-11-14T03:11:28.513
> 
> 标签：pointers, struct, segmentation-fault, sorting

我无法让此代码正常工作。当我尝试编译它时，会发生以下三种情况之一：要么我不会出错，但是当我运行程序时，它会立即锁定；或者它会编译得很好，但是当我运行它时说“分段错误”并退出；或者在编译时给出警告：

```
"conflicting types for ‘addObjToTree’
previous implicit declaration of ‘addObjToTree’ was here" 
```

但是然后说“分段错误”并在我尝试运行它时退出。

我在使用 gcc 的 Mac OS X 10.6 上。

游戏-obj.h：

```
typedef struct itemPos {
    float x;
    float y;
} itemPos;

typedef struct gameObject {
    itemPos loc;
    int uid;
    int kind;
    int isEmpty;
       ... 
 } gameObject; 
```

内部例程.h：

```
void addObjToTree (gameObject *targetObj, gameObject *destTree[]) {
    int i = 0;
    int stop = 1;
    while (stop) {
        if ((*destTree[i]).isEmpty == 0)
            i++;
        else if ((*destTree[i]).isEmpty == 1)
            stop = 0;
        else
            ;/*ERROR*/
            }

    if (stop == 0) {
        destTree[i] = targetObj;
    }
    else
    {
        ;/*ERROR*/
    }

}

/**/

void initFS_LA (gameObject *target, gameObject *tree[], itemPos destination) {

    addObjToTree(target, tree);
    (*target).uid = 12981;
    (*target).kind = 101;
    (*target).isEmpty = 0;
    (*target).maxHealth = 100;
    (*target).absMaxHealth = 200;
    (*target).curHealth = 100;
    (*target).skill = 1;
    (*target).isSolid = 1;
    (*target).factionID = 555;
    (*target).loc.x = destination.x;
    (*target).loc.y = destination.y;

} 
```

主.c：

```
 #include "game-obj.h"
    #include "internal-routines.h"
    #include <stdio.h>

    int main()
{
    gameObject abc;
    gameObject jkl;
    abc.kind = 101;
    abc.uid = 1000;

    itemPos aloc;
    aloc.x = 10;
    aloc.y = 15;

    gameObject *masterTree[3];
    masterTree[0] = &(abc);

    initFS_LA(&jkl, masterTree, aloc);
    printf("%d\n",jkl.factionID);
    return 0;
} 
```

我不明白为什么它不起作用。我只想`addObjToTree(...)`在masterTree的下一个空闲空间中添加一个指向gameObject的指针，它是一个指向gameObject结构的指针数组。更奇怪的是，如果我从中删除这条线`addObjToTree(target, tree);`就`initFS_LA(...)`可以完美地工作。我已经创建了一个搜索的函数，`masterTree`它`uid`也可以正常工作，即使我`gameObject`用`initFS_LA(...)`（不带`addObjToTree`行）初始化一个新函数。我已经尝试重新排列头文件中的函数，将它们放入单独的头文件中，对它们进行原型设计，重新排列`#include`s 的顺序，显式创建指针变量而不是使用`&jkl`，但绝对没有任何效果。有任何想法吗？我很感激任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:23:09.270

如果我没看错，那么您就不会在`masterTree`任何地方初始化数组的元素 1 和 2。然后，您的`addObjToTree()`函数在未初始化的数组中搜索一个空闲元素。

在 C 中声明变量`gameObject *masterTree[3];`不会对数组进行零初始化。添加一些`memset (masterTree, 0, sizeof (masterTree));`进行初始化。

请注意，您在这里声明的是指向结构的指针数组，而不是结构数组（另请参见[此处](https://stackoverflow.com/questions/859634/c-pointer-to-array-array-of-pointers-disambiguation)），因此您还需要调整`addObjToTree()`以检查 NULL 指针而不是`isEmpty`.

将该数组的长度传递给该函数以避免缓冲区溢出也是一种好习惯。

如果你想要一个结构数组，那么你需要将它声明为，`gameObject masterTree[3];`并且你的参数`addObjToTree()`become `gameObject *tree`。

# python - 键和列表作为它们的值的字典。如何识别列表中的项目，并移动到另一个列表？（Python）

> ID：13372450
> 
> 赞同：0
> 
> 时间：2012-11-14T03:12:08.090
> 
> 标签：python, list, dictionary

在我的计算机科学课上，我们刚刚谈到了字典。我试图弄清楚如何从字典中的列表中删除一个项目并将其移动到另一个列表中。

例如，

```
dict1={ 'colors':[red,blue,green], 'sweaters':[mine, his, hers]} 
```

假设我想检查字典中是否有“红色”，它确实存在。那么我怎样才能将它从“颜色”中删除，并将其添加到“毛衣”中呢？列表部分让我失望了。

这是我到目前为止的功能（实际问题）

`def nowRead(yourDict, title):

```
key1, key2, key3, key4 = yourDict.values() 
if title in key2: 
    key2.remove(title)
    key3.append(title)
return yourDict 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:15:31.923

你知道 (a) 如何访问字典中的对象吗？(b) 如何在列表中添加内容？这些是您需要的操作。

您还需要弄清楚如何从列表中删除，但以上内容将带您完成大部分工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:14:39.280

```
if "red" in d["colors"]:
    d["colors"].remove("red")
    d["sweaters"].append("red") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:14:53.950

```
for key in dict1.keys():
    if 'red' in dict1[key]:
        theList = dict1[key]
        # remove 'red' from theList
        # append 'red' to another list in dict1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T03:19:55.163

试试这个：

```
colorsToLook = ['red']
dVals = { 'colors': ['red','blue','green'], 'sweaters':['mine', 'his', 'hers']}

for k in set(colorsToLook):
    if k in dVals['colors']:
        dVals['sweaters'].append(dVals['colors'].pop(dVals['colors'].index(k))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T03:20:18.657

你正在寻找类似的东西

```
dict1['colors'].remove('red')
dict1['sweaters'].append('red') 
```

您可以在[docs](http://docs.python.org/2/tutorial/datastructures.html)中找到更多列表方法。

此外，如果您对使用 Python 感兴趣，那么[Dive Into Python](http://www.diveintopython.net/)是一个很好的开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T03:36:27.190

```
dict1={ 'colors':['red','blue','green'], 'sweaters':['mine', 'his', 'hers']}

def change_lists(target):
    try:
        dict1['colors'].remove(target)
        dict1['sweaters'].append(target)
    except ValueError:
        pass 
```

结果：

```
>>> dict1
{'colors': ['red', 'blue', 'green'], 'sweaters': ['mine', 'his', 'hers']}
>>> change_lists('red')
>>> dict1
{'colors': ['blue', 'green'], 'sweaters': ['mine', 'his', 'hers', 'red']}
>>> change_lists('black')
>>> dict1
{'colors': ['blue', 'green'], 'sweaters': ['mine', 'his', 'hers', 'red']} 
```

# backbone.js - 主干渲染不渲染选择标签

> ID：13372451
> 
> 赞同：1
> 
> 时间：2012-11-14T03:12:11.170
> 
> 标签：backbone.js

我有一个简单的 div，我希望主干在其中渲染一个`select`盒子并`options`从我的服务器。

选项似乎渲染得很好，但选择框却没有。我确定这是一个简单的调整，但似乎无法找到它。

我为它创建了一个简化的小提琴：http: [//jsfiddle.net/thunderrabbit/BNZY3/](http://jsfiddle.net/thunderrabbit/BNZY3/)

的HTML

```
<div id="where_fields"></div> 
```

我使用的脚本`fetch()`用于获取数据。上面的小提琴硬编码数据，但问题是一样的。

```
(function($){
    var Field = Backbone.Model.extend();

    var UnitFields = Backbone.Collection.extend({
        url: '/<?php echo CONFIG_ADMIN_DIR; ?>/api/fieldnames/units',
        model: Field
    });

    var BuildingFields = Backbone.Collection.extend({
        url: '/<?php echo CONFIG_ADMIN_DIR; ?>/api/fieldnames/buildings',
        model: Field
    });

    var FieldView = Backbone.View.extend({
        tagName: "option",

        initialize: function(){
            _.bindAll(this, 'render');
        },
        events: {
            "click":"clicked"
        },
        clicked: function(e) {
            var data_type = this.model.get("DATA_TYPE");
            if(data_type == "varchar") {
                console.log("it's a varchar");
            }
            if(data_type == "int") {
                console.log("it's an int");
            }

        },
        render: function(){
            $(this.el).attr('value', this.model.get('COLUMN_NAME')).html(this.model.get('display_name'));
            return this;
        }
    });

    var FieldsView = Backbone.View.extend({
        tagName: "select",
        el: $('#where_fields'),
        initialize: function(){
            _.bindAll(this, 'render', 'renderItem');
            this.collection.bind('reset', this.render);
        },
        renderItem: function(model) {
            console.log('rendr item');
            var fieldView = new FieldView({model:model});
            fieldView.render();
            $(this.el).append(fieldView.el);
        },
        render: function(){
            console.log('rendr');
            this.collection.each(this.renderItem);
            return this;
        }
    });

    var units_fields = new UnitFields();
    var buildings_fields = new BuildingFields();

    var unitsView = new FieldsView({collection: units_fields});
    var buildingsView = new FieldsView({collection: buildings_fields});

    units_fields.fetch();
    buildings_fields.fetch();

})(jQuery); 
```

为什么我的主干脚本不呈现`select`标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:20:35.193

您的班级中同时具有`tagName`和`el`属性。`FieldsView`你不需要两者。如果`tagName`您想渲染与 DOM 分离的视图，则使用该标签，然后主干将使用该标签而不是默认的`div`. 但是，在您的 中`render()`，您实际上并没有`select`涉及到标签。`$(this.el)`是您的`#where_fields`div，您只需附加 fieldView.el，它是一个`option`元素。这就是为什么没有`select`元素。一些快速提示：

*   用作`this.$el`更有效的速记`$(this.el)`
*   最好让您的视图与 DOM 松散耦合，这样`el: $('#where_fields')`设计不如渲染与 DOM 分离的元素并让其他代码决定它应该在现有 DOM 中的确切位置附加。
*   因此，您应该`el`正确删除您的设置`tagName`，`select`如果您愿意，则设置为，然后您的`render()`方法将执行您想要的操作，即附加`options`到`select`标签，然后移动实际代码以将您的视图渲染`el`到视图中的`#where_fields`div 附加到您的路由器中.

# windows-8 - 适用于 Windows 8 桌面的虚拟光传感器

> ID：13372452
> 
> 赞同：4
> 
> 时间：2012-11-14T03:12:14.080
> 
> 标签：windows-8, sensors, light

我想开发一个支持光传感器的桌面应用程序 (C#)，但我没有真正的光传感器，有没有办法在 Windows 8 上安装“虚拟环境光传感器”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T03:04:28.533

为什么你不能简单地模拟光传感器来测试你的应用程序？请参阅[lightsensor api](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.sensors.lightsensor)，此外 Scott Hanselman 已经在博客中写了一些关于[如何从 Desktop Ap 访问 RT API 的](http://www.hanselman.com/blog/HowToCallWinRTAPIsInWindows8FromCDesktopApplicationsWinRTDiagram.aspx)示例。通过以上两个，您可以直接在您的应用程序中模拟、测试和使用光传感器。

# linux - Linux 终端字符显示为符号，而不是在键盘上键入

> ID：13372457
> 
> 赞同：4
> 
> 时间：2012-11-14T03:12:40.523
> 
> 标签：linux, terminal, ocaml

我正在从 Linux 终端使用 Ocaml。有时它会卡在一个奇怪的模式中，它没有按预期响应我的键盘。例如，如果我按向上、向下、向右和向左箭头，它会`^[[A^[[B^[[C^[[D`在输入中生成。或者，有时如果我只键入一次字母，它可能会连续三次重复相同的字母和/或如果我键入删除按钮，它会键入“^H”。

有谁知道这里发生了什么？我假设我无意中做了一些事情来切换模式，但我不知道如何将它切换回来或为什么它首先会切换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T03:51:42.497

我相信这本质上是另一个 Stack Overflow 问题的重复：

> [是否可以在 OCaml 解释器中使用箭头键？](https://stackoverflow.com/questions/13225070/is-it-possible-to-use-arrow-keys-in-ocaml-interpreter)

OCaml 解释器的库存版本不解释像箭头键这样的特殊键。所以它只会回应他们的控制代码（正如 Ben Graham 指出的那样）。要获得您可能想要的那种行为（编辑输入、返回上一行等），您需要使用行编辑工具包装 OCaml 解释器。有关一些建议，请参阅上面链接的另一个问题。

这并不能解释为什么你会看到不同的行为“模式”，但我仍然认为这就是你想如何思考你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:02:29.323

您应该使用 Utop。[Utop](http://forge.ocamlcore.org/projects/utop/)是一个 OCaml 解释器，它提供自动完成（如 bash）和命令历史记录。当然，箭头键的所有问题都消失了。

你需要编译[Zed](http://forge.ocamlcore.org/projects/zed/)和[Lambda-Term](https://forge.ocamlcore.org/projects/lambda-term/)来编译 Utop。

# jquery - jquery 验证表单（codeigniter）

> ID：13372459
> 
> 赞同：0
> 
> 时间：2012-11-14T03:12:53.603
> 
> 标签：jquery, codeigniter

JS：

```
 $(document).ready(function(){
            $('#username').change(function(){
                var username = $('#username').val();
                $('#usernamemsg').html('<img src="<?php echo base_url()?>images/ajax_loader.gif"/> Checking');
                $.ajax({
                    type: "POST",
                    url: "<?php echo base_url()?>user/username_validation",
                    dataType: "json",
                    data: "username="+username,                     
                    success: function(data){
                        if(data.valid){
                            $('#usernamemsg').html(data.msg);
                        }else{
                            $('#usernamemsg').html(data.msg);
                        }
                    }
                });
            });
        }); 
```

意见：

```
<form id="add" method="post" action="">
        <table>
            <tr>
                <td>Username</td>
                <td><input type="text" id="username" name="username" />
                <div id="usernamemsg"></div></td></tr>      
            <tr>
                <td>Password</td>
                <td><input type="password" id="password" name="password" /></td></tr>
            <tr>
                <td><input type="submit" name="add" value="OK" id="submit" /></td></tr>
            </table></form> 
```

控制器：

```
 public function index(){
            $data['title']          = 'Register';
            $data['template']       = 'outside/validation/validation';
            $this->load->view('templates/home_template',$data);

        $add = $this->input->post('add');
        if($add){
            $data                = array(
            'username'           => trim($this->input->post('username')),
            'password'           => trim($this->input->post('password')));
            $this->data_mod->insert('user',$data);
            redirect('registration/welcome');
        }
    }   
public function username_validation(){
        $user = $this->data_mod->validation('user',array('username' => $this->input->post('username')));                        
        if($user >= 1){
            $msg = array(
            'valid' => false,
            'msg'   => 'Username is already taken');
        }else{
            $msg = array(
            'valid' => true,
            'msg'   => 'Username is available');
        }
        echo json_encode($msg);
    } 
```

***我正在努力学习英语，所以我说得不好。

当我按下提交时，表单不会通知用户名字段并且它会提交到服务器，尽管当我输入用户名时 js 的代码工作正常。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:01:21.463

然后在你的里面试试这个`js`

```
var username = $('#username').val();
if($.trim(username).length==0)
{
    alert('Please enter user name !');
    return false;
} 
```

就在下一行之前

```
$('#usernamemsg').html('<img src="<?php echo base_url()?>images/ajax_loader.gif"/> Checking'); 
```

并且在你的`success`回调中替换

```
if(data.valid){
    $('#usernamemsg').html(data.msg);
}else{
    $('#usernamemsg').html(data.msg);
} 
```

和

```
$('#usernamemsg').html(data.msg); 
```

# mysql - phpMyAdmin 是否有相当于 CTRL + Z

> ID：13372460
> 
> 赞同：1
> 
> 时间：2012-11-14T03:12:57.393
> 
> 标签：mysql, phpmyadmin

我只是为数据库的所有行覆盖了一个字段。我没有备份文件。phpMyAdmin 中是否有一个字段可以让我撤消此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:20:09.343

这可能会对您有所帮助。希望一切都会以某种方式解决。

[https://stackoverflow.com/a/4836463/1693248](https://stackoverflow.com/a/4836463/1693248)

# ruby-on-rails - 如何为 Rails 单页应用程序编写单独的控制器？

> ID：13372462
> 
> 赞同：0
> 
> 时间：2012-11-14T03:13:35.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rendering

我正在创建表格列表说

```
Questions form  
Answers form  
Hints form 
```

所有这些都有不同的控制器和视图，question_controller、answers_controller、hints_controller。

现在我需要在主页的选项卡式 UI 中获取所有这些视图（比如 home_controller ， home#index）

我尝试了**render : partial ,render :template**也与**locals**，我无法实现。

可以通过将所有对象移动到同一个控制器（home_controller，但我不确定这种方法，因为它会使家庭控制器过于复杂而无法管理）来轻松完成，但我需要将它保存在单独的控制器中（question_controller，answers_controller , hints_controller) 并将其呈现到同一页面。我正在使用客户端验证，简单的表单宝石。

**下面是我的问题控制器**

```
class QuestionsController < ApplicationController

def index
    @question = Question.new

    @question_status = []
    @question_mode = []
    @question_type = []

    @question_lookups = Lookup.where({:lookup_for => "question"})

    @question_lookups.each do |lk|
        case lk.lookup_type
            when 'mode'
                @question_mode << lk
            when 'status'
                @question_status << lk
            else
                @question_type << lk
        end
    end

    @caa = Questioncaa.new

end

end 
```

**问题视图（简单形式）**

```
<%= simple_form_for @question, :validate => true do |q| %>
<%= q.input :question_info,  :as => :ckeditor, :input_html => { :toolbar => 'Easy', :width => 750 }  %> 
<%= q.input :question_source %>
<%= q.input :is_mobile %>
<%= q.input :is_similar_question %>
<%= q.input :is_boss_question %>
<%= q.input :is_racing_question %>
<%= q.input :is_speed_question %>
<%= q.input :difficulty_level %>
<%= q.input :ideal_time %>

<%= q.input :lookups, :collection => @question_mode, :value_method => :id, :label_method => :lookup_value,:prompt => "Choose Mode", :label => :QuestionMode %>
<%= q.input :lookups, :collection => @question_status, :value_method => :id, :label_method => :lookup_value,:prompt => "Choose Status", :label => :QuestionStatus %>
<%= q.input :lookups, :collection => @question_type, :value_method => :id, :label_method => :lookup_value,:prompt => "Choose Type", :label => :QuestionType %>

<%= simple_fields_for @caa do |c| %>
    <%= c.input :needs_hints %>
    <%= c.input :needs_video_solution %>
    <%= c.input :needs_tips_tricks %>
    <%= c.input :needs_formulae %>
    <%= c.input :needs_key_concepts %>
<% end %>

<%= q.button :submit %>

<% end %> 
```

**主页视图**

```
<div class="tab-content">
          <div class="tab-pane active" id="learning_map">

                <!-- I need to acheive this -->
                <%= render :template => "learning_map/index" %>

            </div>
            <div class="tab-pane" id="questions">

                <!-- I need to acheive this -->
                <%= render :template => "questions/index", :collection => @question_mode %>

            </div>
            <div class="tab-pane" id="answers">.

                <!-- I need to acheive this -->
                <%= render :templates => "answers/index" %>

            </div>
        </div> 
```

请给我建议，这将非常有帮助。感谢您阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:04:34.753

您应该稍微更改模板的逻辑（这里是“问题”视图的示例）：

1) 将您的问题模板拆分为 2 个文件： - 带有 simple_form_for 表单声明的标题 - _form.html.erb 文件`<%= fields_for @question do |q| %>`以及您的问题字段列表，例如`<%= q.input %>`

2）添加`<%= render :partial => 'form' %>`你的头文件

3)`<%= render :partial => 'question\form' %>`在您的主页视图模板中使用

4) 不要忘记在 home_controller 中初始化 @question 变量。

# jquery - 在 JQuery 中触发单击上下文菜单

> ID：13372463
> 
> 赞同：0
> 
> 时间：2012-11-14T03:13:36.917
> 
> 标签：jquery, contextmenu

我正在使用[jQuery 上下文菜单插件](http://www.abeautifulsite.net/blog/2008/09/jquery-context-menu-plugin/)。

我有以下内容：

```
$('div').contextMenu({
    menu: 'menu'
},function(action, el, pos) {
    //some statements
}); 
```

当用户“单击”而不是右键单击时如何激活它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:27:45.573

哈哈

我要说：更改插件代码，第 40 行

```
if( evt.button == 1 ) { 
```

到

```
if( true ) { 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T03:18:35.027

```
$('div').click(function(){
$("").contextMenu({
    menu: 'menu'
},function(action, el, pos) {
    //some statements
});
}); 
```

这应该可以正常工作

# css - css 选择器链中的 html 5 个元素

> ID：13372470
> 
> 赞同：0
> 
> 时间：2012-11-14T03:15:01.017
> 
> 标签：css, html, requirejs, modernizr

[这里](http://cryptic-shore-5927.herokuapp.com/browse?p=0)有一个工作示例

我已经运行了 Modernizr；我有

```
article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
  display: block;
} 
```

...在 css 中，但在 IE8 及以下样式中不携带，即使元素正确包装了子元素？

谁能告诉我我做错了什么？

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:39:11.600

据我所知，您没有在源代码的任何地方包含modernizr。

我确实注意到您`require.min.js`在页面底部有一个缩小的脚本。如果该脚本动态加载modernizr，它将破坏HTML5 shiv，因为在DOM 中使用任何元素*之前*`document.createElement`需要在旧版本的IE 中调用。

 *来自[Modernizr 文档](http://modernizr.com/docs/)：

> 将脚本标签放在 HTML 中。为了获得最佳性能，您应该在样式表引用之后让它们跟随。我们建议将 Modernizr 放在头部的原因有两个：HTML5 Shiv（在 IE 中启用 HTML5 元素）必须在 .防止FOUC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:34:35.770

在 IE8 及以下版本中，元素显示为`</element/>`，对吗？

您将需要使用为您翻译元素的东西。例如，您可以使用[HTML5 Shiv](http://code.google.com/p/html5shiv/)让浏览器正确理解元素。*

# ruby-on-rails-3 - 多个关联

> ID：13372473
> 
> 赞同：0
> 
> 时间：2012-11-14T03:15:17.843
> 
> 标签：ruby-on-rails-3, model-associations

我有一个活动、一个供应商和一个场地模型。

一个活动可以有多个供应商，但只有一个场地。

一个场地可以有多个供应商和多个活动。

供应商可以有多个场所和多个活动。

我有一个事件表、一个场地表、一个供应商表、一个 events_vendor 表和一个 events_venue 表。

如何设置我的模型？

```
class Event < ActiveRecord::Base
attr_accessible :name, :budget, :client, :date, :description, :attendees,   
:assets_attributes, :tag_list
belongs_to :user
has_many :assets, :dependent => :destroy
has_many :vendors
has_one :venue
accepts_nested_attributes_for :assets, :allow_destroy => true
acts_as_taggable
end

class EventsVendors < ActiveRecord::Base
  attr_accessible :event_id, :vendor_id
end

class EventsVenues < ActiveRecord::Base
  attr_accessible :event_id, :venue_id
end

class Vendor < ActiveRecord::Base
  attr_accessible :city, :contact, :country, :description, :email, :employees, 
  :latitude, :longitude, :minimum, :name, :state, :street, :tel, :type
  belongs_to :event
end

class Venue < ActiveRecord::Base
  attr_accessible :capacity, :city, :contact, :country, :email, :exclusiveVendors, :fee, 
  :latitude, :longitude, :name, :state, :street, :tel, :union
  belongs_to :event
  has_many :vendors
end 
```

我的 events_venues 模型是否同时属于活动和场所？我是否必须指定 :through 关系？

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:25:13.697

是的，连接表应该看起来像这样。

**活动场地**

属于_to：事件

归属地：地点

**事件**

has_many :venues, 通过: :events_venues

has_many :events_venues

**场地**

has_many :events，通过: :events_venues

has_many :events_venues

# c# - 这个事件处理程序代码会导致内存泄漏吗？

> ID：13372479
> 
> 赞同：6
> 
> 时间：2012-11-14T03:15:48.873
> 
> 标签：c#, .net, wpf

假设我派生了一个 WPF 控件，例如 TextBox，并且我重写了其中一个 On- 方法，例如 OnInitialized

假设我这样做：`this.Initialized += delegate { };`

如果包含此控件的窗口关闭 - 如果不执行任何其他操作，这会导致内存泄漏吗？

如果这确实导致了内存泄漏，那么实现终结器是否是一个足够的、最小的补救措施？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T03:40:55.410

我相信您正在考虑的内存泄漏是当您将事件处理程序附加到对象上的事件（称为“A”）然后丢失对拥有该处理程序的对象（“B”）的所有引用时。垃圾收集器仍然可以通过对象“A”的事件到达对象“B”，因此永远不会收集它。有关更多讨论，请参阅[此问题。](https://stackoverflow.com/questions/1198076/c-sharp-explicitly-removing-event-handlers)

在您的情况下，您从`Form`. 当`Form`关闭并删除对它的所有引用时，无法从其余代码中获取表单，因此 GC 会愉快地收集它（当它找到它时）。不会发生泄漏。

根据您最后的评论，实现终结器可能不会像您认为的那样。这只是运行时提供给您执行一些清理代码的钩子，您最好实现`IDisposable` [interface 和 pattern](http://www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P)。我倾向于在暴露事件的类中做的一件事是在`Dispose`方法中将事件设置为 null。IE：

```
class Foo : IDisposable
{
    public event EventHandler SomethingHappened;

    // ... normal IDisposable implementation details left out

    protected virtual void Dispose(bool Disposing)
    {
        if (Disposing)
        {
            SomethingHappened = null;
        }
    }
} 
```

我不会在我的所有课程中都这样做，但这是一种在对象消失时从对象中删除所有处理程序的相对干净的方法。您只能从类本身内部执行此操作。

在任何情况下，如果您要`Form`基于`PreviewMouseLeftButtonDown`事件进行工作，则应该重写该`OnPreviewMouseLeftButtonDown`方法。附加事件处理程序来监听类自己的事件通常是不好的形式。请改为执行以下操作：

```
protected override void OnPreviewMouseLeftButtonDown(MouseButtonEventArgs e)
{
    // Actually raise the event to let other classes know it happened
    base.OnPreviewMouseLeftButtonDown(e);

    // your code...
} 
```

# php - Drupal：基本页面的正文新行不起作用

> ID：13372482
> 
> 赞同：0
> 
> 时间：2012-11-14T03:16:14.717
> 
> 标签：php, drupal, ckeditor, wysiwyg

我在我的 drupal 站点上安装了所见即所得的模块和 ckeditor。
当我键入几行文本时，结果会在一行中显示所有内容。
谁能告诉可能是什么问题。
当我在保存前按预览时，它显示相同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:33:44.493

确保您选择的输入格式是“完整的 html”，希望这会工作......

# c++ - 如何在没有对象副本的情况下使用 map::equal_range？

> ID：13372488
> 
> 赞同：3
> 
> 时间：2012-11-14T03:17:23.673
> 
> 标签：c++, map

我有一个性能敏感的函数，它使用 a`map<string, ...>`来存储一些数据。

我需要能够以其他任何子项***作为`string`***`string`键来查找值，**而无需**创建中间值`string`（即，目标是防止仅因为我想查找某些内容而发生堆分配）。

显而易见的解决方案是保存两个单独的数据结构（可能还有另一个`map`，以从某个键映射到每个字符串）——一个用于字符串，一个用于对这些字符串的引用。

但我想知道，有没有更好的方法来`map`单独使用一个，或者我*需要*另一个数据结构？如果可能的话，我想避免创建太多额外的间接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T04:01:50.903

对不起，如果我误解了，但是如果您可以使用查询字符串的“子字符串视图”来搜索多图而不是普通`std::string`对象，您的问题会得到解决吗？

在这种情况下，以下几行将起作用（使用基于 C++11 的编码）：

定义子字符串视图对象类型。它由字符串和（从，到）偏移量构成，但不复制子字符串：

```
class substrview
{
  std::string::const_iterator _from;
  std::string::const_iterator _to;
public:
  substrview(
       const std::string &s,
       const std::size_t from,
       const std::size_t to)
    : _from(s.begin()+from), _to(s.begin()+to)
  { }

  std::string::const_iterator begin() const
  { return _from; }

  std::string::const_iterator end() const
  { return _to; }
}; 
```

为了使用子字符串视图搜索多地图，我建议使用`std::lower_bound`和`std::upper_bound`方法`<algorithm>`：

```
int main()
{
  std::multimap<std::string,int> map {
    { "hello" , 1 },
    { "world" , 2 },
    { "foo" , 3 },
    { "foobar" , 4 },
    { "foo" , 5 },
  };

  std::string query { "barfoo" };
  /* Search for all suffixes of "barfoo", one after the other: */
  for (std::size_t i = 0 ; i < query.size() ; ++i) {
    substrview subquery { query,i,query.size() };
    auto found_from = std::lower_bound(begin(map),end(map),subquery,cmpL);
    auto found_to   = std::upper_bound(begin(map),end(map),subquery,cmpU);

    /* Now [found_from,found_to) is the match range in the multi-map.
       Printing the matches: */
    while (found_from != found_to) {
      std::cout << found_from->first << ", " << found_from->second << '\n';
      ++found_from;
    }

  }
} 
```

为此，我们只需要定义比较运算符`cmpL`和`cmpU`(一个 for `lower_bound`，另一个 for `upper_bound`- 我们需要两个，因为比较是不对称的：将 multi-map 条目与`substringview`in`cmpL`进行比较，并将 a`substringview`与 multi-map 条目进行比较在`cmpU`）：

```
inline bool cmpL(
    const std::pair<std::string,int> &entry,
    const substrview                 &val)
{
  return std::lexicographical_compare
    (entry.first.begin(),entry.first.end(),val.begin(),val.end());
}

inline bool cmpU(
   const substrview                 &val,
   const std::pair<std::string,int> &entry)
{
  return std::lexicographical_compare
    (val.begin(),val.end(),entry.first.begin(),entry.first.end());
} 
```

完整代码的工作要点：[https ://gist.github.com/4070189](https://gist.github.com/4070189)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:54:36.930

您需要一个`string_ref`参与`<`关系的类型`std::string`。在 TS [n3442](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3442.html)中，Jeffrey Yaskin 建议引入一种`string_ref`受 Google[`StringPiece`](http://src.chromium.org/viewvc/chrome/trunk/src/base/string_piece.h?view=markup)和 llvm影响的类型[`StringRef`](http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html)。如果您可以使用其中任何一个，那么您就完成了；否则，将您自己的接口写入建议的接口应该相当容易，尤其是当您只需要功能的一个子集时。

请注意，如果您有来自的隐式构造函数`std::string`：

```
string_ref(const std::string &s): begin(s.begin()), end(s.end()) {} 
```

然后与的`<`关系`std::string`是免费的。

# php - PHP Echo 包含文件名

> ID：13372489
> 
> 赞同：0
> 
> 时间：2012-11-14T03:17:33.070
> 
> 标签：php, apache, include, webserver, echo

嗨我只想问我是否可以回显包含文件脚本

* * *

```
**index.php**
<?php

include('inc.php');

?> 
```

* * *

```
**inc.php**

<?php

echo  $_SERVER['PHP_SELF'] ;

?> 
```

+++++++++++++++++++++++++++++++++++++++++

我的文件位于 localhost/test/file/

上面脚本的输出是**/test/file/index.php**

我想要的是输出应该是**/test/file/inc.php** 请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:26:49.700

我想你想要`__FILE__`而不是`$_SERVER['PHP_SELF']`

见： http: [//php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:27:04.423

我相信你正在寻找这样的东西：

```
$pathToInc = dirname(__FILE__); 
```

然后你可以在你的 inc.php 中回显 $pathToInc 或任何你命名的变量。这应该输出该变量中的路径，而不是 index.php 的补丁。

# c# - 一次在十个图片框中显示多张图片

> ID：13372491
> 
> 赞同：3
> 
> 时间：2012-11-14T03:17:42.010
> 
> 标签：c#, .net, winforms, image, picturebox

我的程序有十张图片，它们显示了我想要的文件夹中的图像。添加下一个按钮和上一个按钮允许用户浏览下十张图片或最后十张图片。前十张图片显示成功，但是*下一个按钮只有在文件夹正好有二十张图片时才起作用*，如果图片是十五张就会崩溃。这是我的代码：

```
PictureBox[] myPicBoxArray = new PictureBox[10];
string path = @"\\Documents\Pictures\Camera";

private void Form1_Load(object sender, EventArgs e)
{
    myPicBoxArray[0] = pictureBox1;
    myPicBoxArray[1] = pictureBox2;
    myPicBoxArray[2] = pictureBox3;
    myPicBoxArray[3] = pictureBox4;
    myPicBoxArray[4] = pictureBox5;
    myPicBoxArray[5] = pictureBox6;
    myPicBoxArray[6] = pictureBox7;
    myPicBoxArray[7] = pictureBox8;
    myPicBoxArray[8] = pictureBox9;
    myPicBoxArray[9] = pictureBox10;
}

//Show button to display first ten pictures
private void showButton_Click(object sender, EventArgs e)
{
    string[] files = Directory.GetFiles(path);
    int i = 0;
    foreach (string ofile in files)
    {
        myPicBoxArray[i].SizeMode = PictureBoxSizeMode.StretchImage;
        myPicBoxArray[i].Image = Image.FromFile(files[i]);

        i++;
        if (i >= 10)
            break;
    }
}

private void nextButton_Click(object sender, EventArgs e)//The problem is here,
{
    DirectoryInfo fileDir = new DirectoryInfo(path);
    while (i2 < 10)
    {
        myPicBoxArray[i2].SizeMode = PictureBoxSizeMode.StretchImage;
        if (i2 + 10 < picArrFileNames.Length)
        {
            myPicBoxArray[i2].Image = Image.FromFile(picArrFileNames[i2 + 10]);
        }
    }
} 
```

上一个按钮没有线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:12:59.667

[`ImageList`](http://msdn.microsoft.com/en-us/library/system.windows.forms.imagelist.aspx)您可以简单地将这些图像存储在其中并使用该属性`myImageList.Images.Count`来计算 ImageList 中的图像数量， 而不是使用有限的数组。
问题解决了.. :) 或者继续`Lists`使用`myList.Count`.

你可以这样做：

```
 DirectoryInfo dir = new DirectoryInfo(filePath);
   foreach (FileInfo file in dir.GetFiles())
   {               
       this.myImageList.Images.Add(Image.FromFile(file.FullName));
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:50:49.793

我不知道你为什么这样做：

```
if (i2 + 10 < picArrFileNames.Length)
  {
      myPicBoxArray[i2].Image = Image.FromFile(picArrFileNames[i2 + 10]);
  } 
```

但是，请针对您的计数问题尝试此操作，还请按照以下 MrGreen 的建议进行文件扩展名检查以避免系统文件。

```
private void nextButton_Click(object sender, EventArgs e)//The problem is here,
    {
        DirectoryInfo fileDir = new DirectoryInfo(path);
        int count = fileDir.GetFiles().Length;            
        while (i2 < count)
        {
            myPicBoxArray[i2].SizeMode = PictureBoxSizeMode.StretchImage;
            if (i2 + 10 < picArrFileNames.Length)
            {
                myPicBoxArray[i2].Image = Image.FromFile(picArrFileNames[i2 + 10]);
            }                                               
        }            
    } 
```

在此处某处的循环中使用此进行扩展检查 在此处的循环中使用此进行扩展检查

```
string e = Path.GetExtension("YourFilePathHere");
if (e == ".jpeg")
{
   //Do your stuff
} 
```

# php - 使用 php 代码创建一个新文件夹

> ID：13372493
> 
> 赞同：0
> 
> 时间：2012-11-14T03:17:53.530
> 
> 标签：php

我只是想问一下，我的代码中需要什么代码才能显示此警告

> 警告：mkdir() [function.mkdir]: 文件存在于 C:\xampp\htdocs\php-robert\dir\dir.php

我的程序也正确吗？我在我的程序中想要的是，如果该文件夹不存在，则创建一个文件夹，如果它存在则什么都不做.. 什么都不显示，什么都不做

**目录.php**

```
<?php
$var = "MyFolder";
$structure = "../../file/rep/$var";

if (!mkdir($structure, 0700)) {

}
else
{
echo"folder created";
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:27:34.123

尝试以下操作：

```
$folder = "folder_name";
// if folder does not exist or the name is used, just not for a folder
if (!file_exists($folder) || !is_dir($folder)) {
    if (mkdir($folder, 0755)) {
        echo 'Folder created';
    } else {
        echo 'Unable to create folder';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:28:22.810

```
if (!is_dir($structure)) {
  mkdir($structure);
}
else
{
  echo "folder already exists";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T03:26:37.360

```
if (is_dir($structure) == false and mkdir($structure, 0700) == false)
{
  echo "error creating folder";
}
else
{
  echo "folder exists or was created";
} 
```

您还可以测试文件是否存在，但它不是文件夹

# java - Android：File（）的资产文件夹的路径？

> ID：13372500
> 
> 赞同：10
> 
> 时间：2012-11-14T03:18:47.197
> 
> 标签：java, android, directory, assets

我的项目的资产文件夹中有一些文件，我想列出它们，所以我把它放在我的代码中：

```
File dir = new File("com.packagename/assets/fonts");
File[] fileList = dir.listFiles(); 
```

我应该使用哪条路径才能使其工作？我想要它，以便用户可以安装新字体（我还不知道该怎么做）所以我需要列出文件夹中的所有字体，包括安装后的字体。如果有其他解决方案，请分享。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:29:26.450

可以使用 file:///android_asset 和 file:///android_res 访问资产和资源。

但在这种情况下，你会想要做这样的事情：

```
Resources res = getResources()
AssetManager am = res.getAssets();
String fileList[] = am.list(dirFrom);

if (fileList != null) {   
   for ( int i = 0;i<fileList.length;i++) {
        Log.d("",fileList[i]); 
    }
} 
```

# python - 我需要一个以正整数（n）开头并返回2的幂列表的函数，从2开始

> ID：13372501
> 
> 赞同：1
> 
> 时间：2012-11-14T03:19:01.117
> 
> 标签：python, list, function, integer, return

> **可能重复：**
> [如何返回 2 的幂的数字列表？](https://stackoverflow.com/questions/13354685/how-to-return-a-list-of-numbers-of-the-power-of-2)

我所知道的是：

```
l = []

for i in range(2, n=2):
    l.append(1**2)

return l 
```

我不需要一个完整的方程，我只需要知道如何做这样一个方程的基础知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:23:39.983

你是这个意思？

```
def get_powered_vals(endVal):
    return [2**val for val in xrange(endVal+1)]

get_powered_vals(4)
>>> [2,4,8,16] 
```

或者没有列表理解：

```
def get_powered_vals(endVal):
    vals = []
    for val in xrange(endVal+1):
        vals.append(2**val)
        print val, vals[-1]
    return vals

get_powered_vals(4)
>>> 1, 2
>>> 2, 4
>>> 3, 8
>>> 4, 16   
>>> [2,4,8,16] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:31:04.920

像这样的东西？

```
def powers(n):
    return [2**i for i in range(1, n+1)] 
```

（[更多信息](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)）

这是相同的方式，但使用了 for 循环：

```
def powers(n):
    l = []
    for i in range(1, n+1):
        l.append(2**i)
    return l 
```

您在上面发布的代码片段不起作用，原因如下：

*   你做到了`l.append(1**2)`——那是一到二次方，它总是等于一。您可能打算这样做`l.append(2**i)`，这是变量的 2 次方`i`
*   您从 2 开始您的范围，但您想从 1 开始，以便列表中的第一项是 2，而不是 4。
*   您错误地使用了范围。有几种方法可以做范围

    > range(stop) # start 默认为 0
    > range(start, stop)
    > range(start, stop, step) # 如果未指定，step 默认为 1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T05:59:17.883

而不是所有低效的求幂，只需取最后一个计算值并将其乘以 2。

作为一个函数：

```
>>> def powers(n):
...   ret = [1]
...   while len(ret) < n:
...     ret += [ret[-1]*2]
...   return ret
...
>>> powers(10)
[1, 2, 4, 8, 16, 32, 64, 128, 256, 512] 
```

作为生成器：

```
>>> def gen_powers(n):
...   last = 1
...   while n:
...     yield last
...     last *= 2
...     n -= 1
...
>>> list(gen_powers(10))
[1, 2, 4, 8, 16, 32, 64, 128, 256, 512] 
```

作为代码高尔夫单线：

```
reduce(lambda a,b:a+[2*a[-1]],range(10),[1]) 
```

# ruby - Rails3：功能测试因 NoMethodError 失败：nil:NilClass 的未定义方法“用户”

> ID：13372502
> 
> 赞同：3
> 
> 时间：2012-11-14T03:19:20.093
> 
> 标签：ruby, ruby-on-rails-3, devise, functional-testing

我正在使用带有 Omniauth 的 Devise (v2.1.2) 进行用户验证。我正在对一个控制器进行功能测试，该控制器将 JSON 对象作为 POST 主体，因此使用[此问题](https://stackoverflow.com/questions/2103977/how-to-send-raw-post-data-in-a-rails-functional-test)中的技术来设置原始 POST 主体。这适用于开发，但是当我运行测试时，我在完全未经身份验证的方法上遇到异常：

```
NoMethodError: undefined method `user' for nil:NilClass 
```

示例测试：

```
test "should be able to create an item" do    
  m = FactoryGirl.attributes_for(:item)
  raw_post :create, {}, m.to_json 
  assert_response :success   
end 
```

我的模型都没有`user`方法，这个控制器中没有任何东西使用身份验证，所以我很困惑。完整的堆栈跟踪显示错误来自设计中此函数的第一行：

```
def sign_out_all_scopes(lock=true)
  users = Devise.mappings.keys.map { |s| warden.user(:scope => s, :run_callbacks => false) }

  warden.raw_session.inspect
  warden.logout
  expire_devise_cached_variables!
  warden.clear_strategies_cache!
  warden.lock! if lock

  users.any?
end 
```

因此，在我的功能测试中（并且仅在我的功能测试中），该对象看起来`warden`为零。

1.  为什么在未经身份验证的请求上调用此函数？
2.  为什么这里不`warden`存在对象？
3.  我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T03:19:20.093

1.  不知道，Devise 正在做自己的事情。
2.  见 1。
3.  包括`Devise::TestHelpers`.

设计[文档](https://github.com/plataformatec/devise)说您需要包含帮助程序才能使用它们。它并不是说如果您不包含帮助程序，您的功能测试将失败，*包括那些不使用任何身份验证*的测试，但这就是发生的情况。

（注意这里的 JSON 处理，我最初认为是问题，最终只是一个红鲱鱼。即使使用标准 post 或 get 你也会遇到这个问题。）

# c++ - 没有可用的源抛出

> ID：13372505
> 
> 赞同：1
> 
> 时间：2012-11-14T03:19:33.230
> 
> 标签：c++, unhandled-exception, throw

我正在尝试查看无效索引处的元素以测试我的错误捕获，但是当我尝试调试它时，我不断收到 No Source Available 或当我尝试正常运行它时收到 Unhanded Exception Error：

```
#include <iostream>
#include "MyArray.h"

using namespace std;

int main()
{
    MyArray<int> arr1;
    MyArray<int> arr2(2);

    arr2.Add(11);
    arr2.Add(22);
    arr2.Add(33);

    arr2.At(5); // Test to check error

    system("pause");
    return 0;
} 
```

`arr2.At(5);`在我的 MyArray.h 文件中调用这个函数，我得到了我的错误：

```
// MyArray.h
template <class elemType>  
elemType & MyArray<elemType>::At(int index)
{
    if (index < 0 || index >= _size)
        throw "elemType & MyArray<elemType>::At(int index) Index out of range!"; // Where the problem is

    return list[index];
} 
```

正常运行时出现的错误：

```
Unhandled exception at 0x763ec41f in MyArrayProject.exe: Microsoft C++ exception: char at memory location 0x0032fa60.. 
```

当我尝试调试它`arr2.At(5);`并命中时出现错误`throw "elemType & MyArray<elemType>::At(int index) Index out of range!";`：

```
No Source Available
There is no source code available for the current location.

Call stack location:
    msvrc100d.dll!_CxxThrowException(void * pExceptionObject, const_s__ThrowInfo) Line 91 
```

以前没有遇到过这个错误并且不确定如何修复它，任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:26:53.277

No Source Available 只是调试器/IDE 告诉您在哪里捕获了异常（或者在您的情况下没有），它没有要显示的源代码来显示它当前的执行行在哪里。

在您的示例中，您没有捕捉到它，因此它将位于自动生成的代码（调用 main()）的深处。

在 At(5) 调用周围放置一个 try/catch ，它会在那里抓住它（假设你在那里放了一个断点）。

# c# - DeviceIoControl 调用失败，Windows 错误代码 183

> ID：13372506
> 
> 赞同：5
> 
> 时间：2012-11-14T03:19:33.697
> 
> 标签：c#, windows, ioctl, iscsi

我正在尝试将缓冲区数据写入 SCSI 设备，但是当我触发 deviceIoControl 调用时，我收到 Windows 错误代码 183。错误代码表明文件已经退出，但我无法理解与 IOCTL 调用有关的错误。

CreateFile 函数传递，因为我能够获得适当的设备句柄，如下所示。

int devHandle = DeviceIoControlHelper.CreateFile（设备名称，DeviceIoControlHelper.GENERIC_READ | DeviceIoControlHelper.GENERIC_WRITE，DeviceIoControlHelper.FILE_SHARE_READ | DeviceIoControlHelper.FILE_SHARE_WRITE，IntPtr.Zero，DeviceIoControlHelper.OPEN_EXISTING，0，IntPtr.Zero）；

但是，当我尝试写入缓冲区时，出现错误：

```
 dwReturned = 0;
        int b = DeviceIoControlHelper.DeviceIoControl(
                devHandle,
                DeviceIoControlHelper.IOCTL_SCSI_PASS_THROUGH,
                inpBuffer,
                (uint)Marshal.SizeOf(info),
                inpBuffer, //out pDriveLayout,
                (uint)Marshal.SizeOf(info), //(uint)Marshal.SizeOf(typeof(DRIVE_LAYOUT_INFORMATION_EX)),
                out dwReturned,
                IntPtr.Zero);

        Log.Write(Log.TraceLevel_5,"ExecuteDeviceIoControl return pass_through scsistatus = " + info.spt.ScsiStatus);
        if (b == 0)
        {
            int win_err = this.GetWindowsErrorCode();
            Log.Write(Log.TraceLevel_5, "ExecuteDeviceIoControl failed, error =  " + win_err);
            LogMyTrace.Write(LogMyTrace.TraceLevel_5, "ExecuteDeviceIoControl failed, error =  " + win_err);

            this.CloseOpenHandle(devHandle);
            Marshal.FreeHGlobal(inpBuffer);
            throw new Exception("DeviceIoControl  failed " + deviceName +
                    " is '" + deviceName + "'. Windows Err is " + win_err);
        }
The error code is 183. 
```

请提供一些输入，说明导致此错误的原因和建议。

我使用的是 Windows 2008 R2 (x64)，它是 iSCSI 路径。

# python - Python 使用 Threading 生成一个线程并在 main 完成时终止

> ID：13372508
> 
> 赞同：1
> 
> 时间：2012-11-14T03:19:41.857
> 
> 标签：python, multithreading

我有一个脚本可以做很多事情，我想生成一个线程来监视正在发生的事情的 cpu 和内存使用情况。

监控部分是：

```
import psutil
import time
import datetime

def MonitorProcess():
    procname = "firefox"

    while True:
            output_sys = open("/tmp/sysstats_counter.log", 'a')

            for proc in psutil.process_iter():
                    if proc.name == procname:
                            p = proc

            p.cmdline

            proc_rss, proc_vms =  p.get_memory_info()
            proc_cpu =  p.get_cpu_percent(1)

            scol1 = str(proc_rss / 1024)
            scol2 = str(proc_cpu)

            now = str(datetime.datetime.now())

            output_sys.write(scol1)
            output_sys.write(", ")
            output_sys.write(scol2)
            output_sys.write(", ")
            output_sys.write(now)
            output_sys.write("\n")

            output_sys.close( )

            time.sleep(1) 
```

我确信有更好的方法来进行监控，但我现在不在乎。

主脚本调用：

```
RunTasks() # which runs the forground tasks 
MonitorProcess() # Which is intended to monitor the tasks CPU and Memory Usage over time 
```

我想同时运行这两个功能。为此，我假设我必须使用线程库。那么方法是否可以执行以下操作：

```
thread = threading.Thread(target=MonitorProcess())
thread.start 
```

还是我走远了？

另外，当 RunTasks() 函数完成时，如何让 MonitorProcess() 自动停止？我假设我可以测试该进程是否存在，如果它没有杀死该函数？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:24:01.283

听起来你想要一个守护线程。从[文档](http://docs.python.org/2/library/threading.html)：

> 可以将线程标记为“守护线程”。这个标志的意义在于，当只剩下守护线程时，整个 Python 程序就退出了。初始值继承自创建线程。可以通过 daemon 属性设置标志。

在您的代码中：

```
thread = threading.Thread(target=MonitorProcess)
thread.daemon = True
thread.start() 
```

当 main 退出时，程序将退出，即使守护线程仍然处于活动状态。设置并启动监视线程后，您将需要运行前台任务。

# ruby - URI.parse 文档

> ID：13372514
> 
> 赞同：1
> 
> 时间：2012-11-14T03:20:27.477
> 
> 标签：ruby, uri

在[文档中`URI.parse`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html#method-c-parse)是以下代码：

```
require 'uri'

uri = URI.parse("http://www.ruby-lang.org/")
p uri
# => #<URI::HTTP:0x202281be URL:http://www.ruby-lang.org/> 
```

我想知道为什么在这个例子中，有字母`p`，例如`p uri`。

此外，使用`.parse`与做有什么不同`uri = URI("http://...")`，如页面顶部的示例所示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:36:24.097

看起来`URI(url)`和`URI.parse(url)`做的完全一样：

```
u1 = URI("http://stackoverflow.com/")
u2 = URI.parse("http://stackoverflow.com/")
u1 == u2 # => true 
```

# python - 只下载带有 urllib2 的 html 页面

> ID：13372518
> 
> 赞同：1
> 
> 时间：2012-11-14T03:21:05.770
> 
> 标签：python, beautifulsoup, urllib2

我正在尝试使用 urllib2 和 beautifulsoup 来爬网。但是我的代码内存不足，其中一些链接如下：

[http://downloads.graboidvideo.com/download_filter.php?file=GraboidVideoSetup.pkg&platform=Mac](http://downloads.graboidvideo.com/download_filter.php?file=GraboidVideoSetup.pkg&platform=Mac)

这是一个视频下载链接。当我使用 urllib2.urlopen() 时，它将下载视频，这不是我想要的。有没有办法只下载url的html？如果 url 引用视频文件或其他文件，我基本上想跳过它，但我不知道该怎么做。

我的代码如下：

```
toy_url=http://downloads.graboidvideo.com/download_filter.php?file=GraboidVideoSetup.pkg&platform=Mac
headers = {'USER-Agent':'crawltaosof'}
req = urllib2.Request(url, None,headers)
page = urllib2.urlopen(req,timeout=0.51).read() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T03:49:48.313

`read()`考虑在使用该方法之前检查响应标头。这是一个例子。

```
>>> import urllib2
>>>
>>> request = urllib2.Request('http://downloads.graboidvideo.com/download_filter
.php?file=GraboidVideoSetup.pkg&platform=Mac')
>>> response = urllib2.urlopen(request)
>>>
>>> print response.info().getheader('Content-Type')
application/octet-stream
>>>
>>>
>>> request = urllib2.Request('http://www.yahoo.com')
>>> response = urllib2.urlopen(request)
>>>
>>> print response.info().getheader('Content-Type')
text/html;charset=utf-8 
```

最终，您将希望在响应标头中进行测试，`Content-Type`并使用它来确保它是类型`text\html`，然后再通过您的网络爬虫运行 url。如果您想了解其他类型，请参阅有关[Internet 媒体类型](http://en.wikipedia.org/wiki/Internet_media_type#Type_text)`text`的维基百科文章。

# html - 如何在视频 HTML5 上从 gstreamer 流接收 rtp、rtcp 或 udp？

> ID：13372519
> 
> 赞同：1
> 
> 时间：2012-11-14T03:21:15.877
> 
> 标签：html, udp, gstreamer, rtp, rtcp

我正在尝试使用 HTML5 获取视频流 RTP/RTCP，该流是由 gstreamer 生成的。我使用了gstreamer的例子，所以我可以通过RTP端口：5000和RTCP：5001，并且可以使用gstreamer接收流。但是使用 HTML5 无法接收它们。于是我试着读了一下HTML5，发现它可以接收theora/ogg，webm/vp8，mp4/avc，协议可能是，HTTP，RTP，RTCP，UDP等，但是我不能使用RTP， RTCP 或 UDP，HTTP 只能设法接收。但是使用 Mozilla Firefox 的 VLC 插件，使用 UDP 协议，我得到了非常令人满意的结果。不知道有没有人有任何提示，我不想使用源文件，因为 src="/tmp/test.avi" 需要是可以是 udp、RTP、RTCP 的视频流。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T08:30:45.227

如果您不需要以低 fps 流式传输，您可以使用 GStreamer 将您的流转码为 MJPEG 并在 TCP 中流式传输，然后使用 VLC 获取此 TCP 流并将其流式传输到 HTTP。它工作得很好（0.5 秒的延迟），但如果你降低 fps (1 fps) VLC 会引入大约 11 秒的延迟。

以下是一些可以使用 GStreamer videotestsrc 开箱即用的测试命令：

*   GStreamer：

    > gst-launch -v videotestsrc 水平速度=1！去隔行！视频速率！视频缩放！视频/x-raw-yuv，帧率=15/1，宽度=256，高度=144！jpegenc 质量=20 ！multipartmux 边界="--videoboundary" ！tcpserversink 主机=localhost 端口=3000

*   VLC：

    > vlc -vvv -I rc tcp://localhost:3000 --sout '#standard{access=http{mime=multipart/x-mixed-replace;boundary=--7b3cc56e5f51db803f790dad720ed50a},mux=mpjpeg,dst=localhost:8081 }'

*   然后打开浏览器`http://localhost:8081`（或创建一个带有“src”属性为的 img 标签的 HTML 页面`http://localhost:8081`）

# javascript - 如何使用phonegap和sqlite在GROUP BY之后访问个人行

> ID：13372520
> 
> 赞同：1
> 
> 时间：2012-11-14T03:21:21.857
> 
> 标签：javascript, cordova, sqlite

我知道这是一个相当简单的问题。我一直在使用谷歌无济于事。我希望能够使用这样的 SQL 查询：

```
SELECT * FROM the_table GROUP BY attr 
```

当我访问这个查询的结果时，我似乎每个属性只得到一个元素。有什么方法可以获取可以访问每个元素的项目组？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:51:43.227

每组获得一条记录是`GROUP BY`.

如果您想获取所有记录，请尝试`ORDER BY attr`。

# r - 改变ggplot直方图中一个值的颜色

> ID：13372523
> 
> 赞同：0
> 
> 时间：2012-11-14T03:21:37.397
> 
> 标签：r, ggplot2, histogram

我有一个简化的数据框

```
library(ggplot2)
df <- data.frame(wins=c(1,1,3,1,1,2,1,2,1,1,1,3))
ggplot(df,aes(x=wins))+geom_histogram(binwidth=0.5,fill="red") 
```

我想获得序列中的最终值，3，用不同的填充或 alpha 显示。识别其价值的一种方法是

```
tail(df,1)$wins 
```

另外，我想让直方图条移动，使它们以数字为中心。我尝试从获胜值中减去失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-10T20:18:24.470

您可以`geom_histogram()`使用`aes(fill = cond)`.

要选择不同的颜色，请使用其中一种`scale_fill_*()`功能，例如`scale_fill_manual(values = c("red", "blue")`。

```
library(ggplot2)
df <- data.frame(wins=c(1,1,3,1,1,2,11,2,11,15,1,1,3))
df$cond <- df$wins == tail(df,1)$wins
ggplot(df, aes(x=wins, fill = cond)) +
  geom_histogram() +
  scale_x_continuous(breaks=df$wins+0.25, labels=df$wins) +
  scale_fill_manual(values = c("red", "blue")) 
```

[![在此处输入图像描述](../Images/2923af8afbb29988be9682574b98fdb7.png)](https://i.stack.imgur.com/MXfce.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T12:16:55.487

1）要绘制不同颜色的垃圾箱，您可以将`geom_histogram()`其用于子集。

2) 要在 x 轴上沿数字居中条形，您可以调用`scale_x_continuous(breaks=..., labels=...)`

所以，这段代码

```
library(ggplot2)
df <- data.frame(wins=c(1,1,3,1,1,2,11,2,11,15,1,1,3))
cond <- df$wins == tail(df,1)$wins

ggplot(df, aes(x=wins)) +
  geom_histogram(data=subset(df,cond==FALSE), binwidth=0.5, fill="red") +
  geom_histogram(data=subset(df,cond==TRUE), binwidth=0.5, fill="blue") +
  scale_x_continuous(breaks=df$wins+0.25, labels=df$wins) 
```

产生情节：

![在此处输入图像描述](../Images/55a258ca37fd2cc6843732aa1714974a.png)

# iphone - 子类 UIView 不显示添加到它的 UIImageViews

> ID：13372525
> 
> 赞同：0
> 
> 时间：2012-11-14T03:21:37.780
> 
> 标签：iphone, ios, uiview, uiimageview, addsubview

所以我有一个名为 CSImageViews 的类（uiview 的子类），它本质上是包含在单个子类 UIView 中的一行 UIImageViews。

我已经像这样添加了一个自定义初始化方法（节点/yaml 包含 uiimage 名称数据）：

```
- (id)initWithFrame:(CGRect)frame withNode:(NSDictionary *)node
{
    self = [super initWithFrame:frame];
    if (self) {
        _node = node;
        _imageViewYAML = [node objectForKey:@"items"];
        _imageViews = [self getImageViewsForItems:_imageViewYAML];
    }
    return self;
} 
```

我的 getImageViewsforItems 就是这样（将它们全部添加到子视图中）：

```
-(NSArray *)getImageViewsForItems:(NSArray *)items
{
    NSMutableArray *ivs = [NSMutableArray arrayWithCapacity:[items count]];
    for (int i = 0; i < [items count]; i++) {
        NSDictionary *item = [items objectAtIndex:i];
        NSString *type = [item objectForKey:@"type"];
        NSString *name = [item objectForKey:@"name"];
        UIImage *image = [UIImage imageNamed:name];
        UIImageView *iv = [[UIImageView alloc] init];
        iv.image = image;
        iv.tag = i;
        [ivs addObject:iv];
        [self addSubview:iv];
    }
    return ivs;
} 
```

现在，当我像这样将这个自定义视图添加到我的主视图时，什么也没有发生：

```
CSImageViews *imageViews = [[CSImageViews alloc] initWithFrame:frame withNode:node];
[view addSubview:imageViews]; 
```

但是，如果我首先将此“csimageviews”容器添加到新的 uiview 中，则会出现：

```
CSImageViews *imageViews = [[CSImageViews alloc] initWithFrame:frame withNode:node];
UIView *v = [[UIView alloc] initWithFrame:frame];
[v addSubview:imageViews];
[view addSubview:v]; 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:36:07.317

我犯的愚蠢错误。在这个特定的子类 UIView 中，我有一个方法，每次显示其父视图控制器时都会调用该方法。这个方法实际上从视图中删除了所有子视图......所以当我在初始视图中渲染它时，我无法看到 uiimageviews...... doh。

# python - 如何使用 Python 和 GraphAPI 更新 FB 状态？

> ID：13372528
> 
> 赞同：4
> 
> 时间：2012-11-14T03:22:08.717
> 
> 标签：python, facebook, facebook-graph-api

之前有人问过这个问题，但许多解决方案已被弃用，而且 GraphAPI 的要求似乎使许多解决方案变得无关紧要。我摆弄了 fbpy、facebook、oauth、oauth2 包，并查看了他们的示例，但仍然无法弄清楚如何让它工作。我不信任我一直在使用的任何代码或软件包，并且想知道是否有人有任何他们知道可行的明确解决方案。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T13:16:48.777

首先你需要做的是了解[登录流程](http://developers.facebook.com/docs/concepts/login/login-architecture/)。如果您想轻松地切换不同的 Facebook 库，您*应该了解。*因此，它可以具有非常冗长的代码，而基于*实现*的非常简单的代码。

接下来是有不同的方式来实现处理 OAuth 以及在 Python 中显示和启动 Web 应用程序的不同方式。没有点击浏览器就无法授权。否则，您将不得不继续将 access_token 复制粘贴到代码中。

假设您选择`web.py`处理 Web 应用程序演示并`requests.py`处理 Graph API HTTP 调用。

```
import web, requests 
```

然后设置我们希望所有请求通过的 URL

```
url = (
'/', 'index'
) 
```

现在获取您想要使用的应用程序 ID、密码和登录后 URL

```
app_id = "YOUR_APP_ID"
app_secret = "APP_SECRET"
post_login_url = "http://0.0.0.0:8080/" 
```

此代码将有一个类`index`来处理逻辑。在这个类中，我们要处理`code`登录后 Facebook 将返回的授权

![登录流程](../Images/e5482acefb4b7ea3dfab0adbe44e40a2.png)

```
user_data = web.input(code=None)
code = user_data.code 
```

从这里设置一个条件来检查`code`

```
if not code:
    # we are not authorized
    # send to oauth dialog
else:
    # authorized, get access_token 
```

在“未授权”分支中，将用户发送到对话框

```
dialog_url = ( "http://www.facebook.com/dialog/oauth?" +
                           "client_id=" + app_id +
                           "&redirect_uri=" + post_login_url +
                           "&scope=publish_stream" )

return "<script>top.location.href='" + dialog_url + "'</script>" 
```

否则我们可以提取`access_token`使用`code`收到的

```
token_url = ( "https://graph.facebook.com/oauth/access_token?" +
                          "client_id=" + app_id +
                          "&redirect_uri=" + post_login_url +
                          "&client_secret=" + app_secret +
                          "&code=" + code )
            response = requests.get(token_url).content

            params = {}
            result = response.split("&", 1)
            for p in result:
                (k,v) = p.split("=")
                params[k] = v

            access_token = params['access_token'] 
```

从这里您可以选择如何处理更新状态的调用，例如表单，

```
graph_url = ( "https://graph.facebook.com/me/feed?" +
"access_token=" + access_token )

return ( '<html><body>' + '\n' +
         '<form enctype="multipart/form-data" action="' +
         graph_url + ' "method="POST">' + '\n' +
         'Say something: ' + '\n' +
         '<input name="message" type="text" value=""><br/><br/>' + '\n' +
         '<input type="submit" value="Send"/><br/>' + '\n' +
         '</form>' + '\n' +
         '</body></html>' ) 
```

或使用 face.py

```
from facepy import GraphAPI
graph = GraphAPI(access_token)
try:
    graph.post(
            path = 'me/feed',
            message = 'Your message here'
    )
except GraphAPI.OAuthError, e:
    print e.message 
```

所以最后你可以得到一个瘦身版，比如

```
import web
from facepy import GraphAPI
from urlparse import parse_qs

url = ('/', 'index')

app_id = "YOUR_APP_ID"
app_secret = "APP_SECRET"
post_login_url = "http://0.0.0.0:8080/"

user_data = web.input(code=None)

if not user_data.code:
    dialog_url = ( "http://www.facebook.com/dialog/oauth?" +
                               "client_id=" + app_id +
                               "&redirect_uri=" + post_login_url +
                               "&scope=publish_stream" )

    return "<script>top.location.href='" + dialog_url + "'</script>"
else:
    graph = GraphAPI()
    response = graph.get(
        path='oauth/access_token',
        client_id=app_id,
        client_secret=app_secret,
        redirect_uri=post_login_url,
        code=code
    )
    data = parse_qs(response)
    graph = GraphAPI(data['access_token'][0])
    graph.post(path = 'me/feed', message = 'Your message here') 
```

有关更多信息，请参阅

[* Facebook API - 用户供稿： http: [//developers.facebook.com/docs/reference/api/user/#feed](http://developers.facebook.com/docs/reference/api/user/#feed)
* 用 Python 发布 Facebook 照片 - 基本调料： http: [//philippeharewood.com/facebook/publish -a-facebook-photo-in-python-the-basic-sauce/](http://philippeharewood.com/facebook/publish-a-facebook-photo-in-python-the-basic-sauce/)
* Facebook 和 Python - 基本酱汁： http: [//philippeharewood.com/facebook/facebook-and-python-the-basic-sauce/](http://philippeharewood.com/facebook/facebook-and-python-the-basic-sauce/)]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:22:57.133

One possible (tested!) solution using [facepy](http://pypi.python.org/pypi/facepy/):

1.  Create a new [application](https://developers.facebook.com/apps) or use an existing one previously created.
2.  Generate a user access token using the [Graph API explorer](https://developers.facebook.com/tools/explorer) with the `status_update` extended permission for the application.
3.  Use the user access token created in the previous step with [facepy](http://pypi.python.org/pypi/facepy/):

    ```
    from facepy import GraphAPI

    ACCESS_TOKEN = 'access-token-copied-from-graph-api-explorer-on-web-browser'

    graph = GraphAPI(ACCESS_TOKEN)
    graph.post('me/feed', message='Hello World!') 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T21:27:24.873

你也可以试试[这个](http://blog.carduner.net/2011/09/06/easy-facebook-scripting-in-python/)博客。它正在使用*fbconsole*应用程序。

来自博客的代码：

```
from urllib import urlretrieve
import imp
urlretrieve('https://raw.github.com/gist/1194123/fbconsole.py', '.fbconsole.py')
fb = imp.load_source('fb', '.fbconsole.py')
fb.AUTH_SCOPE = ['publish_stream']
fb.authenticate()
status = fb.graph_post("/me/feed", {"message":"Your message here"}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-08T14:38:00.200

这就是我让它工作的方式。您绝对不需要为此创建任何应用程序。我将描述如何将状态更新发布到您的个人资料和您的 Facebook 页面。

首先，将状态更新发布到您的个人资料：

转到[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)。
您将看到一个带有访问令牌的文本框。单击此文本框旁边的“获取访问令牌”按钮。它将打开一个弹出窗口，询问您访问令牌的各种权限。基本上，这些权限定义了您可以使用此令牌通过 Graph API 执行的操作。选中您需要的所有权限旁边的复选框，其中一项将更新您的状态。
现在继续安装 facepy 模块。最好的方法是使用 pip install。
在此之后，在任何 .py 文件中粘贴以下代码片段：

```
from facepy import GraphAPI

access_token = 'YOUR_GENERATED_ACCESS_TOKEN'
apiConnection = GraphAPI(access_token)
apiConnection.post(path='me/feed',
                            message='YOUR_DESIRED_STATUS_UPDATE_HERE') 
```

现在以标准的 python 方式执行这个 .py 文件并检查你的 facebook。您应该会看到`YOUR_DESIRED_STATUS_UPDATE_HERE`已发布到您的 Facebook 个人资料。

接下来，对你的 Facebook 页面做同样的事情：

除了生成访问令牌之外，该过程几乎完全相同。
现在您不能使用相同的访问令牌发布到您的 Facebook 页面。您需要生成一个新的，这对于刚接触 Graph API 的人来说可能有点棘手。这是您需要做的：

转到相同的 developers.facebook.com/tools/explorer 页面。

找到一个显示“Graph API Explorer”的下拉菜单并点击它。从下拉列表中，选择您要从中发布更新的页面。为此页面生成一个新的访问令牌。[此处](https://developers.facebook.com/docs/facebook-login/access-tokens/#pagetokens)描述了该过程：。不要忘记检查扩展权限选项卡中的 manage_pages 权限。

现在在与之前使用的代码相同的代码中使用此令牌并运行它。

转到您的 Facebook 页面。您应该`YOUR_DESIRED_STATUS_UPDATE`发布到您的页面。

希望这可以帮助！

# php - 如何将 php foreach 语句的输出作为变量检索？

> ID：13372531
> 
> 赞同：1
> 
> 时间：2012-11-14T03:22:28.557
> 
> 标签：php, foreach

向自己证明我仍然是一个 PHP 新手，我真的可以使用一些帮助。我有以下代码（底部），它以这种格式为我提供了我需要的数据：

```
2012-11-01;;1;;200, 2012-11-02;;1;;200, 2012-11-03;;1;;200, 2012-11-04;;1;;200, 2012-11-04;;1;;200, 2012-11-05;;1;;200, 2012-11-06;;1;;200, ...etc... 
```

但问题是我需要将 foreach 语句的总输出设置为变量。我知道我已经很接近了，但我一直在搞砸。如何将变量设置为与 foreach 语句的总输出具有相同的值，当 echo 出来时，它仍然看起来像上面的输出？

```
function getDatesBetween2Dates($startTime, $endTime) {
    $day = 86400;
    $format = 'Y-m-d';
    $startTime = strtotime($startTime);
    $endTime = strtotime($endTime);
    $numDays = round(($endTime - $startTime) / $day) + 1; // + 1
    $days = array();

    for ($i = 0; $i < $numDays; $i++) {
        $days[] = date($format, ($startTime + ($i * $day)));
    }
    return $days;
}

$days = getDatesBetween2Dates('2012-11-01', '2012-11-30');

    foreach($days as $key => $value){
    echo $value.";;1;;200,\n";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:26:57.973

像这样的东西

```
$value='';
foreach($days as $key => $val){
    $value.=$val.";";
}
echo $value; // Output will be 2012-11-01;2012-11-02;2012-11-03; and more... 
```

[**演示**](http://sandbox.onlinephpfunctions.com/code/c0c405b13031193ed847096afe7250daeb9568c6)。

# mysql - 使用 mysql-proxy 操作登录信息

> ID：13372537
> 
> 赞同：5
> 
> 时间：2012-11-14T03:23:22.613
> 
> 标签：mysql, mysql-proxy

是否可以在 mysql-proxy 的 lua 脚本中拦截和更改登录信息。

例如，如果用户要像这样点击代理：

```
mysql -h localhost -P 4040 -u bob -D orders -p 
```

我不仅希望连接重定向到后端服务器，而且还希望更改用户名/数据库名称，以便上述命令与此等效：

```
mysql -h production.server -P 3306 -u bob_production -D bob_orders -p 
```

我注意到我似乎只能在通过身份验证后才能在脚本中获取身份验证信息，即使我之前可以得到它，我也没有看到一种轻松注入它的方法。

有没有人知道如何在 mysql-proxy 或其他解决方案中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:11:18.787

有可能的。在安装包的 share/docs 目录中查看教程脚本 tutorial-scramble.lua，这是一个验证来自远程客户端的散列密码并替换服务器所需的身份验证凭据的示例。

教程示例中使用的函数是：[read_auth](http://dev.mysql.com/doc/refman/5.6/en/mysql-proxy-scripting-read-auth.html) ()

您可能还想监视来自服务器的身份验证响应，这可以使用[read_auth_result](http://dev.mysql.com/doc/refman/5.6/en/mysql-proxy-scripting-read-auth-result.html) () 来完成。

# javascript - jquery爆炸怎么做

> ID：13372538
> 
> 赞同：0
> 
> 时间：2012-11-14T03:23:28.313
> 
> 标签：javascript, jquery, exploded

我有一个问题问你...

首先让我们说我有一个像这样的javascript变量..

```
var string = 'a,b,c';
var exploded = string.split(','); 
```

然后我有一个像这样的html元素

```
<ul id='myTags'>
</ul> 
```

我的问题是..如何创建/附加到我的“ **ul id='myTags'** ”内部，所以它会是这样的......

```
<ul id='myTags'>
<li>a</li>
<li>b</li>
<li>c</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T03:27:21.893

```
$('#myTags').append('<li>'+ exploded.join('</li><li>') +'</li>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:31:35.357

最好的方法是只追加一次：

**jQuery**

```
var string = 'a,b,c';
var exploded = string.split(',');
var items = [];

$.each(exploded, function() {
    items.push('<li>'+this+'</li>');
}); 

$('#myTags').append( items.join('') ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T03:26:33.667

```
var stringLI = "";
for (i=0;i<exploded.length;i++) {
   stringLI += "<li>"+exploded[i]+"</li>";
}
$("#myTags").append(stringLI); 
```

# php - header.php 与 div 的最佳实践？

> ID：13372548
> 
> 赞同：0
> 
> 时间：2012-11-14T03:24:06.363
> 
> 标签：php, html

我有一个包含标题的页面，它是一个包含两个子 div 的 div。我想知道在 header div 中是否需要 header.php 并让 header.php 创建两个细分，或者我是否应该在脚本的开头需要 header.php 并让它创建带有两个的 header div细分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:29:00.307

> “在脚本的开头需要 header.php 并让它创建带有两个子 div 的标题 div”

这样，您可以更轻松地更改包括该父 div 在内的任何内容。在开始任何 html 输出之前包含头文件通常是一个好习惯。您将来可以用它做几件事......比如编写一些需要发送标头（http标头）的语句，例如启动会话等。

# org-mode - Orgmode：在标题下显示孩子的数量

> ID：13372550
> 
> 赞同：6
> 
> 时间：2012-11-14T03:24:36.073
> 
> 标签：org-mode

我的 orgmode 文件中有一个标题。它会定期自动更新新的孩子。我希望标题行显示孩子的数量。

所以如果我有一个孩子，它会说类似`(1)`

```
* Heading (1)
** Subheading 
```

用另一个子标题更新后，数字应自动更改为`(2)`

```
* Heading (2)
** Subheading
** A new added subheading 
```

我希望它这样做，因为顶级标题通常会被折叠。我希望能够查看是否添加了任何新的孩子而无需扩展它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T04:12:55.893

与您正在搜索的内容最相似的内容称为统计 cookie。它们在[手册的本页](http://orgmode.org/manual/Checkboxes.html)末尾进行了描述。起初用于列表，但也可以算作头条新闻。只需放在`[/]`标题的末尾，如下所示：

```
* Main header [/]
** sub-header 1
** sub-header 2
** sub-header 3 
```

并按下`C-c C-c`cookie 来更新它（让它更新它的计数）。您**需要添加**到您所描述的用例中的是`TODO`标题中的关键字，因为*cookie 将计算多少已完成而不是要完成多少*。因此，我建议您将它们全部标记为`DONE`，如下所示：

```
* Main header [3/3]
** DONE sub-header 1
** DONE sub-header 2
** DONE sub-header 3 
```

然后，柜台会告诉你你想要什么。

您可能会调整这些 cookie 的代码以满足您的确切需求。

# objective-c - 在 Objective-C 中 C 结构成员未初始化为零？

> ID：13372551
> 
> 赞同：0
> 
> 时间：2012-11-14T03:24:54.690
> 
> 标签：objective-c

有人可以解释为什么我会得到这个吗？

```
CGRect rect;
NSLog(@"rect is %@", NSStringFromCGRect(rect));
// rect is {{-1.99891, 2.58159e-38}, {1.91754e-41, 8.46552e-39}} 
```

那么原始人呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T03:33:52.390

Objective-C 将*实例*变量初始化为 0。它不一定将*局部*变量初始化为 0。

`NSObject *`如果您启用了 ARC，Objective-C 会将作为对象指针（例如,`UIView *`等）的局部变量初始化为 nil。但它不会初始化任何其他局部变量。除非您明确初始化它们，否则其他局部变量（以及禁用 ARC 时的对象指针）将具有随机值。

# memcached - Memcached 密钥过期

> ID：13372552
> 
> 赞同：3
> 
> 时间：2012-11-14T03:24:54.823
> 
> 标签：memcached

当您将密钥设置为过期时`memcached`，它实际上是在过期时被删除，还是在请求密钥（`get`）并且过期已过期时被删除。换句话说，过期会自动从 memcached 中删除值，还是简单地将其标记为过期？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T06:33:19.330

过期是懒惰的。如果您对过期的密钥执行获取操作，则会将其删除。否则，它会被标记，当您的缓存空间不足时，它将被删除，以便为新项目腾出空间。

# php - 如何在 .php 中的类中实例化一个类

> ID：13372556
> 
> 赞同：0
> 
> 时间：2012-11-14T03:25:26.133
> 
> 标签：php, oop, class

我是 OOP 的新手，我不知道为什么这不起作用。在一个类中实例化一个类是不是可以的。我已经在方法中使用包含的文件尝试了这个，它没有做出改变。

```
include('Activate.php');

class First {
    function __construct() {
    $this->activate();
    }       
    private function activate() {
    $go = new Activate('Approved');
    }
}

$run = new First(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:39:44.617

你是说你想访问`$go`？因为，如果是这种情况，您需要更改它的范围。

如您所见，`$go`此方法仅在内部可用`activate()`：

```
private function activate() {
    $go = new Activate('Approved');
} 
```

要使其可从类中的其他位置访问，您需要在外部声明它`activate()`：

```
private $go = null; 
```

您`$go`使用以下方式调用`$this`：

```
private function activate() {
    $this->go = new Activate('Approved');
} 
```

之后，如果要从外部类访问 go，则需要创建包装器：

```
public function getGo(){
   return $this->go;
} 
```

希望这有帮助。此外，您可以阅读[PHP 中有关 OOP 的文档](http://php.net/manual/en/language.oop5.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:44:10.747

好的，我发现了我的问题。我的代码有两个错误。一个是我的方法被设置为私有，其次是我`$parms`发送给班级的错误。

```
include('Activate.php');

class First {
    function __construct() {
    $this->activate();
    }       
    private function activate() {
    $go = new Activate('Approved');
    }
}

$run = new First(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-13T22:37:11.480

您可以通过在同一个类中创建另一个公共函数并在公共方法或函数中调用私有函数来访问您的私有方法。**现在您可以在$run**实例的帮助下调用您的私有函数。

**例如：**

汽车类{

```
function getting(){
    echo ("Hello World");   
}

private function getting2(){
    echo ("Hello World Againg");
}

public function getting3(){
    $this->getting2();
} 
```

}

$class_object=新车；

打印($class_object->getting3());

* * *

**您的输出屏幕如下图所示。**

[![在此处输入图像描述](../Images/2eced10968afa7ac89396ae2badd8454.png)](https://i.stack.imgur.com/Z03fK.png)

* * *

# php - HttpRequest 和 HttpRequestPool 错误以及如何处理它们

> ID：13372557
> 
> 赞同：0
> 
> 时间：2012-11-14T03:25:26.223
> 
> 标签：php, httprequest

我正在使用`HttpRequest`and`HttpRequestPool`发送并行 http 请求，请求数最多为 200 或其他东西，问题是某些接收器可能处于脱机状态，因此`HttpRequestPool::send()`将等到它得到响应或直到它超时。

使用示例：

```
 $query = "CALL GetBoardsURLS()";
    $result = mysql_query($query) or die("ERROR:QUERY_FAILED 8" . mysql_error());       

    $pool = new HttpRequestPool();

    //Add the data to the request pool.     
    while($row = mysql_fetch_row($result))
    {  
        $req = new HttpRequest($row[0].'/', HTTP_METH_POST);
        $req->setBody($message);
        $pool->attach($req);
    }

    $pool->send(); 
```

在我的 php 错误日志中，我得到了错误，有人可以告诉我我必须做些什么来避免它们吗？我猜这主要是因为对无效目的地的请求超时，因为所有有效的接收者都会收到消息并采取相应的行动。有什么建议么？提前泰。

```
**ERRORS**:
[13-Nov-2012 14:20:00 UTC] PHP Fatal error:  Uncaught exception HttpRequestPoolException' with message 'Exception caused by 2 inner exception(s)' in C:\inetpub\wwwroot\DeusTesting\TimeSet.php:130
 inner exception 'HttpInvalidParamException' with message 'Empty or too short HTTP message: ''' in C:\inetpub\wwwroot\DeusTesting\TimeSet.php:0
 inner exception 'HttpRequestException' with message 'Timeout was reached; Connection time-out (http://sim6261.agni.lindenlab.com:12046/cap/11b23456-63bd-1c56-8692-b640ac992a76/)' in C:\inetpub\wwwroot\DeusTesting\TimeSet.php:130
Stack trace:
#0 C:\inetpub\wwwroot\DeusTesting\TimeSet.php(0): HttpRequestPool->send()
#1 {main}
thrown in C:\inetpub\wwwroot\DeusTesting\TimeSet.php on line 130
[13-Nov-2012 14:30:03 UTC] PHP Fatal error:  Uncaught exception 'HttpRequestPoolException' with message 'Exception caused by 12 inner exception(s)' in  C:\inetpub\wwwroot\DeusTesting\TimeSet.php:130 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:18:22.030

好的，这个问题在这里有一段时间了，没有回答。所以我会说我做了什么来摆脱错误。

```
$pool = new HttpRequestPool(); 

//Add the data to the request pool.
foreach($boardsURLS as $boardURL)
{   
    $req = new HttpRequest($boardURL.'/', HTTP_METH_POST); 
    $req->setBody($message);
    $req->setOptions(array('connecttimeout' => 3, 'timeout' => 3));
    $pool->attach($req);    
} 

$ErrorLog = fopen('Logs/GameEnd.txt', "a+");

try
{
    $pool->send();
}
catch(HttpException $ex)
{
    fprintf($ErrorLog, '%s', $ex);  
}

fclose($ErrorLog); 
```

“错误”是例外，因为我没有处理它们，所以它们被添加到`php53_errors.log`. 现在通过添加try和catch，可以处理异常，从而解决它。现在我将异常（超时异常）存储在一个单独的文件中（那是因为我想要）其他人当然可以以不同的方式处理它们。所以我对此无能为力。

**下一个**

```
$req->setOptions(array('connecttimeout' => 3, 'timeout' => 3)); 
```

这是我喜欢的部分。由于我并不真正关心响应，我只想将我的 http 请求传输到接收器。我设置了 3 秒的超时时间。这可以防止我的脚本继续运行并等待响应。

希望这会对某人有所帮助。干杯

# java - Java SwingWorker 锁定 GUI

> ID：13372562
> 
> 赞同：2
> 
> 时间：2012-11-14T03:26:16.420
> 
> 标签：java, multithreading, swing, swingworker, event-dispatch-thread

我有以下代码...

```
runNow.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {

    final Search s = (Search) node.getUserObject();

    // Swing worker
    SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>() {
        @Override
        public Void doInBackground() {
            s.run();
            return null;
        }

        @Override
        public void done() {
            window.updateResultsPanel(s.getResults(), s.getName());
         }
    };

    worker.run();

    }
}); 
```

这是一个弹出菜单动作，它应该创建一个新的 SwingWorker，释放 GUI，做一些工作，然后更新窗口的结果。但是，现在当我单击菜单项时，GUI 会被锁定，直到工作完成，这令人费解，使用 SwingWorker 的重点是不会发生这种情况。

任何关于我做错了什么的想法都将不胜感激。

-科迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T03:31:24.793

你应该打电话[`SwingWorker#execute`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#execute%28%29)来启动工人，而不是`run`

Run 是由接口暴露出来的`Runnable`，但 execute 实际上是调度 worker 在未来的某个时间运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:31:10.293

必须改变方法`SwingWorker.run()`，`SwingWorker.execute()`它就像一个魅力。

# perl - 有没有办法/Perl 模块来控制远程主机上的 CRON

> ID：13372563
> 
> 赞同：1
> 
> 时间：2012-11-14T03:26:18.887
> 
> 标签：perl, cron

这个想法是有一个中央控制器，可以管理许多主机的 cron。我看过[Schedule::Cron](http://search.cpan.org/~roland/Schedule-Cron-1.01/lib/Schedule/Cron.pm)和[Config::Crontab](http://search.cpan.org/~scottw/Config-Crontab-1.33/Crontab.pm)

但是它们都没有提供远程功能。有一个看起来很有希望，IPC::PerlSSH，但不确定我是否了解如何使用[IPC::PerlSSH运行 Config::Crontab](http://search.cpan.org/~pevans/IPC-PerlSSH-0.16/lib/IPC/PerlSSH.pm)

如果有人在这方面有经验，请告诉我。Perl 确实声称对 Linux 管理任务有好处，这似乎是最需要编写脚本的任务之一。但是只在本地机器上做，在 ssh'ng 进入它之后听起来并不有趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:41:11.633

`IPC::PerlSSH`只需使用 SSH 远程执行 Perl 代码。问题是所有远程节点还必须安装`Schedule::Cron`or`Config::Crontab`模块才能正常工作。

最好使用 SCP 库（例如`Net::SCP`或`Net::SCP::Expect`）简单地从远程节点引入感兴趣的 crontab，使用`Cron`您选择的库在本地对其进行按摩，然后将按摩后的 crontab 上传回远程节点。使用这种方法，远程节点甚至不需要安装 Perl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:08:06.117

```
# untested!
use Net::OpenSSH;
use Config::Crontab;

my $ssh = Net::OpenSSH->new($host, ...);
$ssh->system({stdout_file => 'crontab.out'}, 'crontab -l');
my $cc = Config::Crontab->new;
$cc->read('crontab.out');

# manipulate $cc crontab here:
# ...

$cc->write('crontab.out.1');
$ssh->system({stdin_file => 'crontab.out.1'}, 'crontab -'); 
```

# xcode - Jenkins xcode 插件 - 如何解决库搜索路径问题？

> ID：13372566
> 
> 赞同：0
> 
> 时间：2012-11-14T03:26:40.790
> 
> 标签：xcode, jenkins, continuous-integration, restkit, continuous-deployment

我在尝试设置的 jenkins xcode 构建中遇到了这个错误：

```
clang: error: no such file or directory: '/Users/boo/.jenkins/jobs/myProject/workspace/DerivedData/Release-iphoneos/libIBAForms.a'
clang: error: no such file or directory: '/Users/boo/.jenkins/jobs/myProject/workspace/DerivedData/Release-iphoneos/libLambdaAlert.a'
clang: error: no such file or directory: '/Users/boo/.jenkins/jobs/myProject/workspace/DerivedData/Release-iphoneos/libRestKit.a' 
```

我无法弄清楚有关配置的一些事情：

1.  是什么促使 jenkins-xcode-plugin ( [https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin) )`/DerivedData/Release-iphoneos/`在路径中使用 .a 文件的查找

2.  相反，为什么它没有选择`/DerivedData/Debug-iphoneos/`作为查找 .a 文件的路径中的片段

3.  最后，产生的子模块——libIBAForms、libLambdaAlert、libRestKit——都是具有一个`release`和一个`debug`配置文件的项目......所以为什么文件实际上从`/DerivedData/Release-iphoneos/`它们应该在的路径中丢失......我无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:44:39.187

关于第 1 点和第 2 点，这是基于XCode 插件（和 Xcode 本身）的**配置参数进行配置的。**默认情况下，插件使用参数的“Release”值。如果你想使用“调试”，你应该这样设置。

#3 不知道该说什么

就个人而言，我发现 Xcode 插件具有限制性，并且没有为我提供所需的选项。我正在使用 xcode 附带的命令行工具（通过常规的**Execute Shell**构建步骤）

```
// Below are my build parameters for the job through regular means
CONFIGURATION=Debug
CODE_SIGN_IDENTITY=iPhone Developer: <DeveloperNameHere>
PROVISIONING_PROFILE=3000000B-7000-4000-9CD5-D0000B0F0000
//

// Code for Execute Shell
xcodebuild -verbose -alltargets -configuration ${CONFIGURATION} clean build CODE_SIGN_IDENTITY="${CODE_SIGN_IDENTITY}" PROVISIONING_PROFILE=${PROVISIONING_PROFILE}
&&
/usr/bin/xcrun -sdk iphoneos PackageApplication -v "${WORKSPACE}/path_here/${CONFIGURATION}-iphoneos/application.app" -o "${WORKSPACE}/path_here/${CONFIGURATION}-iphoneos/application.ipa" --sign "${CODE_SIGN_IDENTITY}" --embed "/Users/<youruser>/Library/MobileDevice/Provisioning Profiles/${PROVISIONING_PROFILE}.mobileprovision" 
```

像往常一样为作业设置参数
xcodebuild 命令执行实际构建 xcrun 命令将应用程序打包到 IPA 中（Xcode 中的存档步骤），对其进行签名，并将配置文件直接嵌入到 IPA 中。

请注意，其中一些开关是选项，您可能不需要。但这就是通过命令行做的好处：你可以完全控制你想做的事情

小提示：确保提供第二个命令的完整路径`-v`并`-o`打开

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:03:32.610

当我将生成 libIBAForms 和 libLambdaAlert 的子模块作为主项目的“目标依赖项”时，我能够克服这一切

# ios - 如何以最小的质量损失通过网络传输小的 UIImages？

> ID：13372570
> 
> 赞同：3
> 
> 时间：2012-11-14T03:27:02.227
> 
> 标签：ios, uiimage

我需要通过 Internet 发送 UIImage，但到目前为止我遇到了一些问题。

我目前使用 UIImage，将其设为第 16 个维度，将其转换为 NSData，然后使用 NSData+base64 创建一个 NSString。然后我将其作为 JSON 请求的一部分传输到服务器。

大多数情况下，这非常有效。

但是，文件大小很大。在蜂窝连接上，加载一张图片可能需要大约 10 秒。

如何通过网络传输 UIImage，使其体积小并保持质量？即使我把它设为之前像素数的 16 分之一，一张照片也可以是 1.5MB。我想把它弄到 300KB 左右。

使用 zip 或 gzip 压缩它似乎只节省了微不足道的 (<.1MB)。

谢谢，罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:37:04.257

我建议将其存储为带有一些压缩的 JPEG 或 PNG，使用类似的方法

```
 UIImageJPEGRepresentation(UIImage *image, CGFloat compressionQuality) 
```

然后发布您从中获得的 NSData 对象。通过使用compressionQuality 变量，您应该能够找到一个良好的尺寸/质量折衷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:38:33.830

您没有说如何将图像转换为数据。你提到“照片”。如果您的图像是照片，则应使用[`UIImageJPEGRepresentation`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageJPEGRepresentation)，而不是`UIImagePNGRepresentation`. 您将不得不使用该`compressionQuality`参数来找到平衡数据大小和图像质量的压缩级别。

# jquery - 如何在jquery中停止此代码的动画循环

> ID：13372574
> 
> 赞同：2
> 
> 时间：2012-11-14T03:27:15.760
> 
> 标签：jquery

我有这个代码：

```
$("#RUN").focusout(function() {
if ($(this).val().length > 0) {
    $.post('index.php?User=CheckUser', { "UserName": $("#RUN").val() }, function(result) {
        // Var's
        var OrigMsg = $("#RUI").text();
        var OrigColor = $("#RUI").css("color");
        // Code
        $("#RUI").slideUp(1000);
        $("#RUI").delay(500).queue(function(next) {
            $(this).empty();
            $(this).css("color", result.color);
            $(this).append(result.message);
            next();
        });
        $("#RUI").slideDown(1000).delay(3000).slideUp(1000);
        $("#RUI").delay(500).queue(function(next) {
            $(this).empty();
            $(this).css("color", OrigColor);
            $(this).append(OrigMsg);
            next();
        });
        $("#RUI").slideDown(1000);
    }, "json");
}
}); 
```

每次我退出带有 ID #RUN 动画的项目时，我都尝试设置：

```
$("#RUN").focusout(function() {
    $("#RUN").stop();
}); 
```

以及所有的停止组合：stop(true), stop(true,true)

也试过：

```
if ($("#RUN").is(":animated")) {
    $("#RUN").stop(true,true);
} 
```

以及所有的停止组合。

我真的不太清楚在哪里放置 .stop() 东西来停止动画循环。

编辑： HTML 代码是：

```
<td>
    <input type="text" id="RUN" name="RUN" maxlength="30" />
</td>
<td>
    <div id="RUI" class="InfoItem">
        Letras y Numeros, longitud minima 8 caracteres.
    </div>
</td> 
```

至于 jsFiddle 有点难以制作，因为它使用 $.post() 并且现在我只有本地 PC 上的页面。

# php - 更新 symfony 2.0.0-DEV 到新版本

> ID：13372576
> 
> 赞同：2
> 
> 时间：2012-11-14T03:27:29.040
> 
> 标签：php, symfony, symfony-2.0

我有一个 symfony 项目（2.0.0-DEV = RC5），我想升级到最新版本（2.0.18）。如果我只是复制我的包并进行一些更改（例如自动加载路径），它仍然不起作用并引发许多错误。当然我可以修复所有错误，但是有很多捆绑包并且需要太多时间。我考虑过搜索 2011 年 7 月以来的所有帖子并应用每个版本的所有更改，但我认为这也需要很多时间。

有没有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:20:35.047

从我在[更新文件](https://github.com/symfony/symfony/blob/v2.0.18/UPDATE.md)中看到的内容来看， RC5 和 2.0.18 之间不应该有任何重大变化。

您应该阅读[CHANGELOG-2.0 文件](https://github.com/symfony/symfony/blob/v2.0.18/CHANGELOG-2.0.md)并更新您的代码。这将需要很多时间。

你也可以做一些其他的事情：

*   你可以等到 2013 年 2 月。Symfony2.2 出来了，你可以改变你的代码在 Symfony2.2 上工作。在 2013 年 11 月，您可以升级到 Symfony2.3，这是一个[长期支持版本](http://symfony.com/doc/current/contributing/community/releases.html#long-term-support-releases)。这意味着您将在发布后 3 年内获得支持，而不是正常的 8 个月。
*   你可以等到 2013 年 11 月，这个时间真的很长，直接升级到 Symfony2.3。您必须在此处进行一次迁移，因此它可能比以前的选项更容易。

问题是没有像“简单的方法”这样的东西。这就是 Symfony 进入发布流程圈和 LTR 的原因。您需要选择一种对您的应用程序有益且不会花费太多时间的方式。这就是为什么我不建议升级到最新的 2.0.x 或 2.1.x 版本，因为它只支持 8 个月。最好的办法是在 2013 年 11 月使用 2.3 并定期更新您的应用程序（这对于 composer 来说很容易）。但 2013 年 11 月几乎是一年，我认为这太长了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T11:18:26.743

您可以为此使用作曲家。我可以向你解释，但我认为 KnpLabs 公司的专家会做得更好：[http](http://knpuniversity.com/screencast/composer) ://knpuniversity.com/screencast/composer :)

# java - Spring 2.5.6 和 ojdbc6 的数据源配置错误

> ID：13372577
> 
> 赞同：1
> 
> 时间：2012-11-14T03:27:29.327
> 
> 标签：java, oracle, spring, jdbc

我正在尝试在 Spring 2.5.6 中配置数据源。我的数据库是oracle 11g，jdbc驱动是ojdbc6。以下是我的配置：

```
<bean id="databaseConnectionPool" class="oracle.jdbc.pool.OracleDataSource" destroy-method="close">

    <property name="connectionCachingEnabled" value="true"/>
    <property name="URL"><value>${jdbc.dburl}</value></property>
    <property name="connectionCacheName" value="PSSMST"/>
    <property name="user"><value>${jdbc.dbusername}</value></property>
    <property name="password"><value>${jdbc.dbpassword}</value></property>
    <property name="maxStatements" value="75"/>
    <property name="connectionCacheProperties">
        <props merge="default">
            <prop key="MinLimit">20</prop>
            <prop key="MaxLimit">150</prop>
            <prop key="InitialLimit">20</prop>
        </props>
    </property>

</bean> 
```

但是当 Tomcat 服务器启动时，我收到以下消息：

> bean 类 [oracle.jdbc.pool.OracleDataSource] 的属性“connectionCachingEnabled”无效：Bean 属性“connectionCachingEnabled”不可写或设置方法无效。setter 的参数类型是否与 getter 的返回类型匹配？

这真的让我很沮丧。我检查了`OracleDataSource`类，当然，`setConnectionCachingEnabled`方法存在。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:49:15.427

可能的原因是您使用的 ODBC 版本比预期的要旧。请检查您的应用程序的 lib 文件夹，并检查 Tomcat 的 lib 文件夹。

# c++ - Arduino - 如何返回正确的位图图像数组

> ID：13372585
> 
> 赞同：0
> 
> 时间：2012-11-14T03:28:08.903
> 
> 标签：c++, arduino

我有三个数组，像这样，包含我的位图图像：

```
static unsigned char __attribute__ ((progmem)) impostazioni_logo[]={

0x00, 0x02, 0x7E, 0x02, 0x00, 0x00, 0x78, 0x10, 0x08, 0x08, 0x08, 0x70, 0x10, 0x08,    0x08, 0x08,
0x70, 0x00, 0x00, 0x78, 0x10, 0x08, 0x08, 0x08, 0x10, 0x60, 0x00, 0x00, 0x60, 0x10, 0x08, 0x08,
0x08, 0x10, 0x60, 0x00, 0x00, 0x30, 0x48, 0x48, 0x08, 0x08, 0x10, 0x00, 0x00, 0x08, 0x7E, 0x08,
0x08, 0x08, 0x00, 0x00, 0x50, 0x48, 0x48, 0x48, 0x70, 0x00, 0x00, 0x08, 0x08, 0x08, 0x48, 0x28,
0x18, 0x00, 0x00, 0x7A, 0x00, 0x00, 0x60, 0x10, 0x08, 0x08, 0x08, 0x10, 0x60, 0x00, 0x00, 0x78,
0x10, 0x08, 0x08, 0x08, 0x08, 0x70, 0x00, 0x00, 0x7A, 0x00, 0x00, 0x08, 0x0F, 0x08, 0x00, 0x00,
0x0F, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x7F, 0x08, 0x08,
0x08, 0x08, 0x04, 0x03, 0x00, 0x00, 0x03, 0x04, 0x08, 0x08, 0x08, 0x04, 0x03, 0x00, 0x00, 0x04,
0x08, 0x08, 0x09, 0x09, 0x06, 0x00, 0x00, 0x00, 0x07, 0x08, 0x08, 0x08, 0x00, 0x07, 0x08, 0x08,
0x08, 0x04, 0x0F, 0x00, 0x00, 0x0C, 0x0A, 0x09, 0x08, 0x08, 0x08, 0x00, 0x00, 0x0F, 0x00, 0x00,
0x03, 0x04, 0x08, 0x08, 0x08, 0x04, 0x03, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F,
0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  }; 
```

现在我想要一个函数通过传递 page 参数返回正确的数组以在 lcd 上显示。

```
unsigned char logo(int page){
 char buffer[32];
  switch(page){
    case 1:
       for(int i=0;i<sizeof(impostazioni_logo);i++){
        strcpy_P(buffer,pgm_read_byte(&(impostazioni_logo[i]))); //<==pgm_read_byte comes from here:http://www.arduino.cc/en/Reference/PROGMEM
       }  
    break;
  }
   return buffer; 
```

} 它不起作用。编译器告诉我关于转换的一些错误。

```
EDIT: 
```

caller 是一个绘制正确图像的简单函数。不同页面的图像可能不同。页数接近20：

```
void drawLogo(){
 glcd.drawbitmap(15,1, logo(), 90,16); //display lcd library for ST7565

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:41:07.453

这段代码有几个问题：

1.  返回类型`logo`是`unsigned char`当您返回时`char *`
2.  pgm_read_byte 应该返回一个字节，所以你可以简单地做`buffer[i]=pgm_read_byte(...)`
3.  `buffer`您尝试返回的内容分配在堆栈上，并且在函数返回后将不存在。

您可能应该`strlcpy_P`改用。

**更新：**
1.假设您有固定数量的页面。尝试为每页创建一个位图，例如：

```
static unsigned char __attribute__ ((progmem)) impostazioni_logo_page1[]={..} 
```

2\. 返回指向每个页面徽标的指针：

```
unsigned char* logo(int page)
{
  switch(page)
  {
    case 1:
       return impostazioni_logo_page1;
    break;
  }
  return NULL;
} 
```

如果您希望将所有位图放在一个数组中，请计算数组中的偏移量并将其返回：

```
int offset = page_num*page_size_in_chars;    
return &impostazioni_logo_all_pages[offset]; 
```

**更新 2**：管理页面的另一个选项：

```
static unsigned char* pages[] = { impostazioni_logo_page1, impostazioni_logo_page2, ... }
...
glcd.drawbitmap(15,1, pages[page_index], 90,16); 
```

# c# - 如何在gridview中插入多个下拉列表框？

> ID：13372589
> 
> 赞同：1
> 
> 时间：2012-11-14T03:28:38.487
> 
> 标签：c#, asp.net, gridview

GridView 显示来自不同表的数据，所以我不能在[此处输入链接描述](http://www.codeproject.com/Articles/23471/Editable-GridView-in-ASP-NET-2-0)或在此处[输入链接描述](http://aspsnippets.com/Articles/%E2%80%A6)

它是如何动态的？

在我绑定GridView的地方有我的代码：

```
 OracleCommand oracleCom = new OracleCommand();
        oracleCom.Connection = oraConnect;
        oracleCom.CommandText = "Select * From " + Session["tableNameIns"];

        OracleDataAdapter adapter = new OracleDataAdapter();
        DataTable tableD = new DataTable();
        tableD.Locale = System.Globalization.CultureInfo.InvariantCulture;
        adapter.SelectCommand = oracleCom;
        adapter.Fill(tableD);           
        tableResults.DataSource = tableD.AsDataView();
        tableResults.DataBind(); 
```

示例： 1\. 表对象：列 object_type 的下拉列表。 ![在此处输入图像描述](../Images/8ca3b8c0fff2015c84e2e04f3179ca25.png) 2\. 表详细信息：列点、对象、补丁的下拉列表。 ![在此处输入图像描述](../Images/588dbb160a52f436124c521ee94e29b8.png) 3\. ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:37:48.040

对于编辑模式的网格视图中的下拉列表，您应该设置标签**EditItemTemplete**并从数据库绑定此网格视图，您应该处理**RowDataBound**事件，从该事件中您可以绑定来自不同表的下拉列表。这一切都已经在文章中进行了描述。
只是从参考链接下载源代码的一个建议尝试通过应用断点进行调试以简要理解......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:02:52.167

在这里检查[带有文本框、复选框、单选按钮和下拉列表的可编辑 Gridview](http://www.codeproject.com/Articles/37207/Editable-Gridview-with-Textbox-CheckBox-Radio-Butt)

# java - 读取 .xlsm 文件时出错

> ID：13372599
> 
> 赞同：0
> 
> 时间：2012-11-14T03:30:15.053
> 
> 标签：java, xlsm

我正在尝试使用 POI 读取 .xlsm 文件。我的代码是：

```
import java.io.*;
import java.util.List;
import jxl.*;
import jxl.write.WritableSheet;
import jxl.write.WritableWorkbook;
import jxl.read.biff.BiffException;
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.apache.poi.xssf.usermodel.*;;

public class ReadExcelSheet {

public static void main(String[] args) throws IOException {
final Workbook wb;
FileInputStream fileIn = new           FileInputStream("C:\\Users\\my\\Desktop\\ExcelPORead\\Purchace.xlsm");

wb = WorkbookFactory.create(fileIn); // Error in this line

}
} 
```

我在“wb = WorkbookFactory.create(fileIn)”行出现错误，它说“配置构建路径”。我正在使用 Eclipse 并下载 poi-ooxml-3.5-beta5.jar 并将其添加到构建路径中。但我没有得到我需要做的事情来使它工作。

请建议我如何删除此错误，或者如果您有更好的方法来阅读 Java 中的 .xlsm 文件。

感谢您的答复。

问候， 拉曼

# java - Apache CXF WS 中的请求为空

> ID：13372600
> 
> 赞同：2
> 
> 时间：2012-11-14T03:30:26.000
> 
> 标签：java, web-services, jaxb, cxf, java-ee-5

我使用 Apache CXF 编写了一个 WS，在实现类中获取请求数据时，它给出了所有空值。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://www.sample.project.com.au/registration/services/GetCountry/GetCountryRequest/v1" xmlns:v11="http://www.sample.project.com.au/common/message/Request/v1">
       <soapenv:Header/>
       <soapenv:Body>
          <v1:getCountryRequest>
             <v11:header>
                <from>?</from>
                <to>?</to>
                <eventTime>?</eventTime>
                <requestId>?</requestId>
                <channelCode>?</channelCode>
                <enduserCode>?</enduserCode>
                <usecaseName>?</usecaseName>
             </v11:header>
             <v1:message>
                <v1:id>123</v1:id>
                <v1:name>123</v1:name>
                <v1:code>213</v1:code>
             </v1:message>
             <v1:id>213</v1:id>
          </v1:getCountryRequest>
       </soapenv:Body>
    </soapenv:Envelope> 
```

* * *

**au.com.project.sample.registration.services.getcountry.GetCountryRequest@219baf0b null null java.lang.NullPointerException**

我试图打印的值

```
System.out.println(request);
System.out.println(request.getHeader());
System.out.println(request.getHeader().getFrom());
System.out.println(request.getMessage());
System.out.println(request.getMessage().getId());
System.out.println(request.getMessage().getName());
System.out.println(request.getMessage().getCode()); 
```

并得到空指针异常。

这可能是什么原因。

谢谢，班纳特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:56:59.007

```
System.out.println(request);  // print GetCountryRequest@219baf0b, so it's bot null
System.out.println(request.getHeader()); // is null
System.out.println(request.getHeader().getFrom()); // NPE becouse header is null 
```

所以跳过 NPE 行，或添加 if 语句

```
System.out.println(request);
System.out.println(request.getHeader());
if (request.getHeader() != null)
{
   System.out.println(request.getHeader().getFrom());
}
System.out.println(request.getMessage());
System.out.println(request.getMessage().getId());
System.out.println(request.getMessage().getName());
System.out.println(request.getMessage().getCode()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:43:40.220

确保您使用的是最新版本的 CXF。对于更新版本的 CXF，可能会引发异常，其中包含有关消息错误的更多详细信息。造成这种情况的正常原因是元素的命名空间错误。例如，如果每个模式的命名空间不完全正确，JAXB 将不知道如何处理它。默认情况下，JAXB 只是跳过它，这是 CXF 过去所做的。最近的版本在 JAXB 中添加了一个侦听器，该侦听器将捕获它并由于未知元素而引发异常。（并且它通常会打印出当时期望的元素名称）

# python - Python ElementTree解析未绑定前缀错误

> ID：13372604
> 
> 赞同：21
> 
> 时间：2012-11-14T03:30:54.357
> 
> 标签：python, xml, prefix, elementtree

我正在python中学习ElementTree。一切似乎都很好，除非我尝试使用前缀解析 xml 文件：

`test.xml`：

```
<?xml version="1.0"?>
<abc:data>
   <abc:country name="Liechtenstein" rank="1" year="2008">
   </abc:country>
   <abc:country name="Singapore" rank="4" year="2011">
   </abc:country>
   <abc:country name="Panama" rank="5" year="2011">
   </abc:country>
</abc:data> 
```

当我尝试解析 xml 时：

```
import xml.etree.ElementTree as ET
tree = ET.parse('test.xml') 
```

我收到以下错误：

```
xml.etree.ElementTree.ParseError: unbound prefix: line 2, column 0 
```

我是否需要指定某些内容才能解析带前缀的 xml 文件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T09:07:07.640

将 abc 命名空间添加到您的 xml 文件中。

```
<?xml version="1.0"?>
<abc:data xmlns:abc="your namespace"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-16T07:17:30.757

看看这是否有效：

```
from bs4 import BeautifulSoup

xml_file = "test.xml"

with open(xml_file, "r", encoding="utf8") as f:
    contents = f.read()
    soup = BeautifulSoup(contents, "xml")

    items = soup.find_all("country")
    print (items) 
```

以上将产生一个数组，然后您可以对其进行操作以实现您的目标（例如删除 html 标签等）：

> ```
> [<country name="Liechtenstein" rank="1" year="2008">
> </country>, <country name="Singapore" rank="4" year="2011">
> </country>, <country name="Panama" rank="5" year="2011">
> </country>] 
> ```

# ruby-on-rails - git post-receive 钩子没有运行 bundle install

> ID：13372609
> 
> 赞同：6
> 
> 时间：2012-11-14T03:31:14.333
> 
> 标签：ruby-on-rails, ruby, linux, git, bundle

我在运行接收后挂钩时遇到问题，如下所示：

```
#!/bin/sh
unset $(git rev-parse --local-env-vars)
cd ~/commodity
git pull origin master
bundle install
bundle exec rake assets:precompile
thin restart 
```

我正在从本地推送到远程，我收到此错误：

```
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 319 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)
remote: From /var/www/html/test
remote:  * branch            master     -> FETCH_HEAD
remote: Updating a06129c..c3c3da3
remote: hooks/post-receive: line 19: bundle: command not found
remote: hooks/post-receive: line 20: bundle: command not found
remote: hooks/post-receive: line 21: thin: command not found
error: cannot run hooks/post-receive: No such file or directory 
```

当我在服务器上克隆我的存储库并推送时，钩子运行并且一切都很好。任何想法为什么从我的本地机器推送时推送不会触发捆绑命令？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-27T20:30:37.917

Try to add this line to your post-receive hook (at least before your first `bundle ...` call):

`[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"`

On Unix systems, rvm adds this line automatically to the `~/.bash_profile`. In any none-bash contexts (crontab, git hooks) you have to add it manually.

# ajax - Ajax 组合框排序错误

> ID：13372613
> 
> 赞同：0
> 
> 时间：2012-11-14T03:31:41.550
> 
> 标签：ajax, c#-4.0, sorting, combobox

我已经在 ajax 组合框中应用了排序，除了我的组合框中的一个特殊情况外，一切正常：所有项目都显示在下面的排序（按名称排序）--选择--，但一个项目显示在选择上方。我也检查了 ID，ID 也是“1388”，其中 --Select 的 ID 为“0”。

谁能预测可能是什么原因？asp代码：

```
<ajax:ComboBox ID="LendersCmbx" runat="server" Width="150px" CssClass="AquaStyle textfont"
                                    OnSelectedIndexChanged="LendersCmbx_SelectedIndexChanged" AutoPostBack="true"
                                    DropDownStyle="DropDownList" AutoCompleteMode="SuggestAppend" CaseSensitive="false"
                                    ItemInsertLocation="OrdinalText">
                                </ajax:ComboBox> 
```

我的 aspx.cs 代码：

```
 LendersCmbx.DataSource = LenBobj.FillLenders();
        LendersCmbx.DataTextField = "LenderName";
        LendersCmbx.DataValueField = "LenderId";
        LendersCmbx.DataBind(); 
```

我的 BL 代码：

```
 public List<Lender> FillLenders()
    {
        return obj.GetLenders();
    } 
```

和 DAL 代码：

```
 public List<Lender> GetLenders()
    {
        return context.Lenders.OrderBy(Lender=>Lender.LenderName).ToList();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:54:39.693

当我找到解决方案时，我在这里回答我自己的问题：有一个原因，我们在该项目中只有一开始就有间距，所以空间是它首先出现的原因。选择是最初显示的项目，它的 ID 为“0”，但显示项目 Raina-el-main 之前 RI 错误地给出了间距。

# c# - 将 C# 表单设置为负位置

> ID：13372617
> 
> 赞同：6
> 
> 时间：2012-11-14T03:32:00.893
> 
> 标签：c#, winforms, screen-scraping, multiple-monitors

我正在开发一种适用于 Windows 的工具，该工具将使用 CloudApp 的 API 与 CloudApp 交互。我在这里找到了一些关于如何实现区域捕获的文章，我曾经修改过这些文章以满足我的确切需求。一切进展顺利，但我在设置多显示器时遇到了问题。问题的原因是我在 1920x1080 运行一台显示器，第二台是 1080x1920。

总体流程是我创建了整个屏幕（3000、1920）的图像，然后将其显示为表单中的背景。问题是我无法让该表格从负面开始，因此它会将所有内容都向下移动。

如果我在进行区域选择之前查看我捕获的原始图像，一切都很好：

[http://img.paronity.com/KsiA](http://img.paronity.com/KsiA)

![在此处输入图像描述](../Images/a7ce7ef02adf42391f1df4f704e1fee9.png)

问题是我什么时候去调出区域表格。为了使它成为表单的背景并位于正确的位置，我需要表单的左上角 X,Y 为 (0,-670)。无论我尝试哪种方法，我都无法做到这一点。

有什么方法可以实现我所缺少的负面观点？为了完整起见，我制作了一个非常简单的表格，当你移动它时输出它的“顶部”坐标，当我将它移动到垂直监视器的上部时，我得到负分，所以我知道它们是有效的.

让我知道我的代码的任何部分是否有帮助，我会发布它。我只是不确定这是否有必要。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:57:43.610

对不起这个帖子。这是可能的。问题是我在表单的构造函数中设置了表单的大小。我不知道这行不通。一旦我将它设置在表单加载事件上，它就会将它移动到正确的位置。

谢谢@dognose！你说你的测试有效让我认为这可能是一个范围/放置问题，它是！感谢大家关注这个问题！

# github-api - 使用没有定义回调 URL 的 Github Authentication API

> ID：13372619
> 
> 赞同：2
> 
> 时间：2012-11-14T03:32:32.760
> 
> 标签：github-api

使用 omniauth-github 登录 Github。有没有办法在 Github 应用程序中省略 Callback URL，以便我们可以在 localhost 和生产环境之间切换？

# vim - 在 Vim 中，如何使用 vimscript 获取当前文件的行数？

> ID：13372621
> 
> 赞同：66
> 
> 时间：2012-11-14T03:32:48.703
> 
> 标签：vim

我正在尝试使用 vimscript 获取当前文件中的行数，但我不知道如何（谷歌返回一堆关于显示行号的废话）。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-11-14T03:44:25.573

您可以使用`line()`功能：

```
:echo line('$') 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-03-23T07:44:18.957

按下`ctrl-g`将显示文件名、当前行、行数、当前位置（百分比）和光标当前列号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-20T22:55:09.833

你也可以使用

```
wc -l <filename> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-08T11:43:19.790

当您选择一个区域时，如果您的 .vimrc 文件中有以下内容，vim 会在角落显示您选择了多少行： `set statusline=%f\ %l,%c`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-05-21T01:14:39.583

该变量`%L`已经包含总行数。

您可以使用`:echo %L`或`:set statusline+=%L`将其附加到状态

# java - JPA/Hibernate OneToOne 关联，持久调用插入具有空 Id 的实体

> ID：13372622
> 
> 赞同：1
> 
> 时间：2012-11-14T03:32:52.967
> 
> 标签：java, hibernate, jpa, one-to-one

我的实体如下：

```
@Entity
@Table(name="`surveys`")
@Inheritance
@DiscriminatorColumn(name="`type`")
public abstract class Survey implements Serializable, Comparable<Survey> {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Integer id;

    [...]
} 
```

上面抽象的 Survey 可以有两种具体的类：

```
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorValue(value="SV")
public class SupervisorSurvey extends Survey implements Serializable {

    @OneToOne(mappedBy="supervisorSurvey",cascade=CascadeType.ALL)
    private SurveyPair surveyPair;

    [...]
}

@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorValue(value="US")
public class UserSurvey extends Survey implements Serializable {

    @OneToOne(mappedBy="userSurvey",cascade=CascadeType.ALL)
    private SurveyPair surveyPair;

    [...]
} 
```

然后，SurveyPair 的一个实例抓取了这两种类型中的一种：

```
@Entity
@Table(name="`surveypairs`")
public class SurveyPair implements Serializable {

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int id;

    @OneToOne
    @JoinColumn(name="`userSurveyId`",unique=true)
    private UserSurvey userSurvey;

    @OneToOne
    @JoinColumn(name="`supervisorSurveyId`",unique=true)
    private SupervisorSurvey supervisorSurvey;
} 
```

现在的问题：在我创建这样的对象之后：

```
// survey pair
SurveyPair surveyPair = new SurveyPair(reference);

// user side
UserSurvey usSurvey = new UserSurvey(user);
usSurvey.setSurveyPair(surveyPair);
surveyPair.setUserSurvey(usSurvey);

// supervisor side
SupervisorSurvey svSurvey = new SupervisorSurvey(Application.getLoggedUser(), user);
svSurvey.setSurveyPair(surveyPair);
surveyPair.setSupervisorSurvey(svSurvey);

SurveyInput.getInstance().persist(surveyPair); 
```

上述呼吁坚持：

```
JPAHelper db = new JPAHelper();
EntityManager em = db.getEntityManager();
em.getTransaction().begin();
em.persist(surveyPair.getUserSurvey());
em.persist(surveyPair.getSupervisorSurvey());
em.persist(surveyPair);
em.getTransaction().commit();
em.close(); 
```

正确插入 SurveyPair（UserSurvey 和 SupervisorSurvey 的外来 ID 列值不为空），但插入 UserSurvey 和 SupervisorSurvey 时使用 NULL ID。

为什么会这样？如果我在persist 方法之后调试代码，我可以检查对象实例的ID 并导致它们被实际填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T18:09:27.227

当我们使用实体调用 persist() 时，JPA 会为数据库创建一个新对象。当您将 @GeneratedValue(strategy=GenerationType.AUTO) 用于 id 时，JPA 将负责 id 生成。由于 JPA 在刷新时为关联实体生成 id，因此您需要刷新 entityManager 实例。

```
Entity entity = new Entity();
entity.setAddresse("Address");
em.persist(entity);
em.flush(); 
```

刷新后，您将获得实体的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T03:37:40.923

我放弃了`@OneToOne`并将其转换为与约束的`@ManyToOne`关系：`unique=true``@JoinColumn`

```
@XmlElement(name="userSurvey")
@ManyToOne(optional=false)
@JoinColumn(name="`userSurveyId`",unique=true)
private UserSurvey userSurvey;

@XmlElement(name="supervisorSurvey")
@ManyToOne(optional=false)
@JoinColumn(name="`supervisorSurveyId`",unique=true)
private SupervisorSurvey supervisorSurvey; 
```

这样就可以了；但是如果有人提出这样的解决方案，我仍然会接受替代答案`@OneToOne`，因为问题集中在那个特定的注释上。

# java - 扩展泛型类但削弱子类中的泛型绑定

> ID：13372624
> 
> 赞同：2
> 
> 时间：2012-11-14T03:33:10.220
> 
> 标签：java, generics, inheritance

理论上，子类方法中的输入参数应该与超类（逆变）的输入参数等效或限制更少。

我想要做的基本上是创建一个`A`具有泛型绑定`<T extends SomeType>`的类，然后创建一个`B`没有泛型绑定的子类（应该允许任何类型）`<T>`：

```
 class A<T extends SomeType> {....}

    class B<T> extends A<T extends SomeType> { ..... } 
```

这在java中甚至可能从理论的角度来看是可能的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T03:42:08.237

不，这是不正确的。考虑一个在`A`返回中声明的方法`T`：

```
abstract class A<T extends SomeType> {

    abstract T foo();
} 
```

一个静态类型的对象，`A`预期符合该类声明的边界：

```
A<?> a = ...;
SomeType someObject = a.foo(); 
```

但是如果`B`取消了这些界限：

```
abstract class B<T> extends A<T> { }

class C extends B<String> {

    @Override
    String foo() {
        return "foo";
    }
} 
```

我们有混乱：

```
A<?> a = new C();
SomeType someObject = a.foo(); // ??? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:50:47.690

您的问题相当令人困惑，主要是因为某些术语的不正确使用，但如果我理解正确，以下示例看起来就像您描述的那样：

```
class A<T extends CharSequence> { }
class B extends A<String> { } 
```

因此，根据您的问题，A 类有一个*类型参数，其上限为 CharSequence*，而 B 类（扩展 A）根本没有类型参数。

# amazon-web-services - 实例状态更改通知

> ID：13372625
> 
> 赞同：0
> 
> 时间：2012-11-14T03:33:12.747
> 
> 标签：amazon-web-services

有没有办法从 AWS 中获取一些日志，例如“实例 i-XXXX 是在 13:45.34 UTC 使用 ami-YYYY 开始的”，可能会同时转储有关该实例的大量其他信息，例如 az，密钥对等...当然我可以使用云手表来监控 CPU 使用情况，但我只想要一个简单的日志，我可以查看亚马逊认为在一夜之间在我们的云中发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-16T15:49:49.597

CloudTrail 拥有所有这些信息。你不需要做任何事情： [![在此处输入图像描述](../Images/61302c6260da75728054e599e8a90b0c.png)](https://i.stack.imgur.com/AjYqb.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T07:42:53.827

Amazon 有可用的[DescribeInstanceStatus](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeInstanceStatus.html)。虽然我没有个人经验，但您似乎可以使用它获取所有实例的状态或事件信息。[您可以在AWS 博客](http://aws.typepad.com/aws/2011/11/ec2-instance-status-monitoring.html)上阅读相关内容。可以通过[DescribeInstances API 调用](http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeInstances.html)找到有关详细实例状态的更多信息。

# facebook - 喜欢按钮的正确说明？

> ID：13372631
> 
> 赞同：-2
> 
> 时间：2012-11-14T03:34:11.353
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

我现在对此感到非常沮丧，而且我读到的所有内容都已过时（我一直在谷歌上搜索几天的感觉）。

我要做的就是为特定的 facebook 页面 url（不是网站 url）制作一个喜欢的按钮。

显然，Facebook 页面上的点赞数应该显示在 facebook 的点赞按钮（而不是框）中。

我还想使用 facebook 上的“分享”按钮，比如小部件。

首先，当我将 facebook 页面 url 放入其中时，它显示 0 个赞，这是第一个问题（有很多赞）。

其次，无论我尝试什么 URL……它喜欢并立即不喜欢该页面。我已经尝试完全调试和删除 facebook 页面 url，并尝试只使用标准 URL。它做同样的事情。

我过去安装了很多这样的东西，现在它们都非常有问题 - WTF 是 facebook 做的，我不知道这会导致这样做吗？

PS：我也在努力让这个尽可能简单......我不需要各种疯狂的功能和应用程序集成和垃圾。我只想要一个页面的赞按钮。

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

html:

```
<div class="fb-like" data-href="http://example.com" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:18:22.980

从这里获取点赞按钮的代码：[https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

解决方法是，使用按钮发起发布请求，该请求会通过 Graph API 自动共享用户的提要

```
https://graph.facebook.com/brent/feed?
  link=https://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.& 
```

这是另一个黑客，它通过单击一个按钮将用户发送到 sharer.php，他们可以从中共享。

从另一个stackoverflow问题复制：

```
<a id="fb-share" style='text-decoration:none;' type="icon_link" onClick="window.open('http://www.facebook.com/sharer.php?s=100&amp;p[title]=foo&amp;p[summary]=bar&amp;p[url]=https://www.foobar.com/&amp;p[images][0]=https://www.foobar.com/thumb.gif','sharer','toolbar=0,status=0,width=580,height=325');" href="javascript: void(0)">
    <img src="img/share.gif" width="62" height="18" alt="Share"/>
</a> 
```

# r - R中的多图与Normal

> ID：13372632
> 
> 赞同：0
> 
> 时间：2012-11-14T03:34:16.253
> 
> 标签：r, graph, distribution

我试图用正态曲线绘制实验数据（用于比较）。我可以很好地绘制其中一条曲线，但无法正确绘制正常曲线，我只能看到一条沿着屏幕向下延伸的线。我对 dcauchy 得到了相同的结果。唯一正确绘制的曲线是“pdf_cauchy”变量。

这就是我想要做的：

```
plot(pdf_cauchy, type = "l", col = "red", lwd = 4)
curve(dnorm(x, 0, 1), add = T, col = "blue", lwd = 4)
x <- seq(-5, 5, by = .001)
lines(dcauchy(x, 0, 1, FALSE), type = "l", col = "green", lwd = 4) 
```

这是“pdf_cauchy”中的数据

```
c(0.00127277, 0.00132412, 0.0013786, 0.00143646, 0.00149797, 
0.00156345, 0.00163324, 0.00170772, 0.00178731, 0.00187247, 0.00196372, 
0.00206165, 0.00216691, 0.00228022, 0.00240241, 0.00253439, 0.0026772, 
0.00283202, 0.00300018, 0.00318319, 0.00338278, 0.0036009, 0.0038398, 
0.00410205, 0.00439061, 0.00470887, 0.00506072, 0.00545067, 0.00588391, 
0.00636639, 0.00690497, 0.00750753, 0.00818301, 0.00894155, 0.00979444, 
0.010754, 0.0118334, 0.0130459, 0.0144036, 0.015916, 0.0175867, 
0.0194097, 0.0213637, 0.0234058, 0.0254655, 0.0274413, 0.0292036, 
0.0306076, 0.0315168, 0.0318319, 0.0315168, 0.0306076, 0.0292036, 
0.0274413, 0.0254655, 0.0234058, 0.0213637, 0.0194097, 0.0175867, 
0.015916, 0.0144036, 0.0130459, 0.0118334, 0.010754, 0.00979444, 
0.00894155, 0.00818301, 0.00750753, 0.00690497, 0.00636639, 0.00588391, 
0.00545067, 0.00506072, 0.00470887, 0.00439061, 0.00410205, 0.0038398, 
0.0036009, 0.00338278, 0.00318319, 0.00300018, 0.00283202, 0.0026772, 
0.00253439, 0.00240241, 0.00228022, 0.00216691, 0.00206165, 0.00196372, 
0.00187247, 0.00178731, 0.00170772, 0.00163324, 0.00156345, 0.00149797, 
0.00143646, 0.0013786, 0.00132412, 0.0012 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:23:58.210

考虑一下这些图中的 x 轴是什么。您的初始绘图没有给出 x 轴，因此仅使用 1:100 来表示 100 个柯西值。现在你添加一条从 0 开始到 100 的正态曲线，平均值为 0。你只会得到曲线的右半部分和极值。平均值为 50，sd 为 25，你会得到更合理的结果，你也可以用 dcauchy 做类似的事情。

您可能确实需要在初始图中放置一些 x 值，但我不知道它们会是什么。您是否希望展示位置的峰值为 0？... 其他值？只有您知道 x 轴的位置和范围应该是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:40:48.030

这是一个很好的绘图方法：

```
plot(x, dcauchy(x, 0, 1, FALSE), type = "l", col = "red", lwd = 4)
par(new = TRUE)
plot(x, pdf_cauchy, type = "l", col = "blue", lwd = 2)
par(new = TRUE)
plot(x, dnorm(x, 0, 1), type = "l", col = "green", lwd = 3) 
```

# jakarta-ee - RemoteServiceServlet 和 RemoteService 有什么区别？

> ID：13372633
> 
> 赞同：2
> 
> 时间：2012-11-14T03:34:18.480
> 
> 标签：jakarta-ee, gwt

我知道第一个是一个类，第二个是一个接口，但关键是，为什么客户端服务要扩展**RemoteService**而**ServiceImpl**类扩展**RemoteServiceServlet**

那么幕后究竟是什么？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:09:53.547

您正在尝试比较苹果和橙子。请阅读[文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideRemoteProcedureCalls)并制作任何简单的演示[项目](https://www.google.by/#q=gwt+rpc+example)以清楚地理解这些概念。

**RemoteService**是客户端的 RPC 接口应该扩展的接口。RemoteServiceServlet是**服务器**上 RPC 服务实现的 servlet 基类。它反序列化来自客户端的请求并序列化传出的响应。

要使用 RPC，您需要在`client`包中创建和定义自己的接口应该扩展[RemoteService](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/rpc/RemoteService.html)接口并指定服务器应该实现的方法。

```
package com.yourproject.client;

import com.google.gwt.user.client.rpc.RemoteService;

public interface CustomInfoService extends RemoteService {
    Info getInfo(String infoId);
} 
```

然后你需要在服务器端提供这个接口的实现。这应该是`server`包中的一个 servlet，它扩展了[RemoteServiceServlet](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/server/rpc/RemoteServiceServlet.html)并实现了`CustomInfoService`.

```
package com.yourproject.server;

import com.yourproject.client.CustomInfoService;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

public class InfoServiceImpl extends RemoteServiceServlet implements CustomInfoService {
   public Info getInfo(String infoId) {
       //implementation (for example getting info from database)
   }
} 
```

确保正常工作，您还需要设置 servlet 映射，创建异步接口，调用它并在生成的回调中处理结果，为通过 RPC 传递的实例类实现接口[Serializable](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)或[IsSerializable 。](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/rpc/IsSerializable.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:15:34.447

**RemoteService**是一个标记接口，它允许 GWT 找到您的 RPC/RPCAsync 接口（以验证它们/与您的实现建立链接）。

**RemoteServiceServlet**是接收来自客户端的调用、反序列化参数、调用您的方法、序列化您的方法返回的内容（异常或返回的对象）并将其发送给客户端的 servlet。

# php - 如何在我的网页中显示 facebook 共享内容？

> ID：13372635
> 
> 赞同：0
> 
> 时间：2012-11-14T03:34:25.730
> 
> 标签：php, facebook-apps

我正在为 facebook 应用程序创建网页，我想知道如何在我的网页中显示我在 facebook 中朋友的所有共享内容，例如照片、链接、视频等？我使用 PHP 作为编程语言。

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:56:30.150

您可以尝试使用 FQL 从[链接表](https://developers.facebook.com/docs/reference/fql/links/)中检索链接，如下所示：-

> 从所有者 IN 的链接中选择标题、摘要、url、所有者（从 source_id = me() 和 target_type = 'user' 的连接中选择 target_id）

使用[状态表](https://developers.facebook.com/docs/reference/fql/status/)的状态如下：-

> 从 uid IN 的状态中选择消息（从 source_id = me() 和 target_type = 'user' 的连接中选择 target_id）

使用[视频表](https://developers.facebook.com/docs/reference/fql/video/)的视频，例如：-

> 从所有者 IN 的视频中选择标题、描述（从 source_id = me() 和 target_type = 'user' 的连接中选择 target_id）

同样，您可以检索其他详细信息，尽管结果的数量可能会有所不同，并且您可能必须处理本[博客文章中提到的分页](https://developers.facebook.com/blog/post/478/)

# embedded - 系统重置时的内存映射

> ID：13372640
> 
> 赞同：1
> 
> 时间：2012-11-14T03:36:00.243
> 
> 标签：embedded, device-driver, mmu

据我了解，代码指令的地址是虚拟地址，但是为了访问各种设备（例如RAM，Parallel NOR Flash），这些虚拟地址需要转换为物理地址，这个任务由MMU完成。问题是这个翻译过程在系统复位时如何表现（上电时，我认为 MMU 中还没有条目），以便可以从并行 NOR 闪存中获取第一条指令并开始执行。任何人都可以解释这个过程（对于任何 CPU 架构 ARM、PowerPC ......，我只是猜想这种行为在架构中是通用的）。任何建议表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T04:16:53.397

上电时，实际上 MMU 将被禁用。这么多是通用的。

要访问 NOR 闪存，（至少）某些地址空间会有一个默认映射。第一条指令通常会从 0xFFFF0000 (ARM) 或 0xFFFFFFFC (Power PC) 及其附近获取。但是有一些 pinstrap 选项会影响这一点。启动处理器并不是真正的通用。

还有很多其他选项（NAND 闪存、SPI ROM、MMC）用于存储引导代码。对于一般概念，[Hallinan](https://rads.stackoverflow.com/amzn/click/com/0137017839)包含有关引导的一章。有关详细信息，您必须查看特定 CPU 的技术手册，例如[OMAP4 TRM](http://focus.ti.com/pdfs/wtbu/OMAP4430_ES2.x_Public_TRM_vK.zip)是 ARM 的示例，然后找到描述引导过程的部分。

# perl - 使用多行正则表达式 perl 查找多个匹配项

> ID：13372641
> 
> 赞同：1
> 
> 时间：2012-11-14T03:36:07.323
> 
> 标签：perl

这段代码：

```
#!/bin/perl

BEGIN { $/ = undef; };
open (FILE,"file.txt") ||  die "Cannot open $FILE:$!";

while (<FILE>) {
    my @matches;

    if  ( m#SelectEditPolicy\.do\?policyID=[0-9]{1,4}.*?">(.*?)</a>#sg) {
        push (@matches,$1);
    }

    foreach $rec (@matches) {
        print "$rec\n";
    }
} 
```

针对这个文件：

```
>cat file.txt
SelectEditPolicy.do?policyID=2958')">
Test123  OLD</a>
SelectEditPolicy.do?policyID=6643')">
Test123 </a> 
```

执行 file.pl 仅返回第一个匹配项。我已经阅读了尽可能多的帖子，但没有任何成功？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:46:31.577

你做错了很多事情。突出的第一个是`BEGIN { $/ = undef; };`如果您想 slurp 文件，请设置`$/ = undef`在最小的适用范围内。此外，一旦您决定读取文件，就没有理由使用`while`循环假装逐行读取它。

其次，您似乎对 HTML 文件进行了一些预处理，以将其简化为可以应用正则表达式的形式。[使用HTML::TokeParser::Simple 之](http://search.cpan.org/perldoc/HTML%3a%3aTokeParser%3a%3aSimple)类的东西会更轻松。

```
#!/usr/bin/env perl

use strict;
use warnings;

my $content = do { local $/; <DATA> };

my @matches = ($content =~ m{
        SelectEditPolicy\.do\?
        policyID=[0-9]{1,4}[^>]*?">
        ([^<]*?)
        </a>
}xsg );

print "$_\n" for @matches;

__DATA__
SelectEditPolicy.do?policyID=2958')">
Test123  OLD</a>
SelectEditPolicy.do?policyID=6643')">
Test123 </a> 
```

输出：

```
Test123 旧

测试123

```

将[HTML::TokeParser::Simple](http://search.cpan.org/perldoc/HTML%3a%3aTokeParser%3a%3aSimple)与原始 HTML 一起使用，我可能做过这样的事情（未经测试）：

```
#!/usr/bin/env perl

use strict;
use warnings;

use HTML::TokeParser::Simple;

my $parser = HTML::TokeParser::Simple->new(url => 'http://example.com/');

my @policies;

while (my $tag = $parser->get_tag('a')) {
    my $href = $tag->get_attr('href');
    next unless defined $href;
    next unless $href =~ /SelectEditPolicy\.do\?policyID=([0-9]{1,4})/;
    push @policies, { $1 => $parser->get_text('/a') };
} 
```

# php - 从数据库而不是通过静态 html 提取数据时，如何在每张幻灯片上显示 3 个项目？

> ID：13372643
> 
> 赞同：0
> 
> 时间：2012-11-14T03:36:13.673
> 
> 标签：php, javascript, jquery

我正在查看此滑块文档的文档

```
http://www.slidesjs.com/#docs 
```

而且我似乎找不到如何在幻灯片上显示 3 个项目，例如，如果我有一个 $data 对象并且做了一个 php foreach 循环，例如

```
foreach($data as $item){

//echo out ul li to display image of the data

} 
```

但如果我这样做，它只会在幻灯片上显示 1 个项目。在静态 html 版本中。有 3 批`ul li`在每张幻灯片上显示 3 个图像，例如

```
<ul>
  <li></li>
</ul>
<ul>
 <li></li>
</ul>
<ul>
 <li></li>
</ul> 
```

如果要在 foreach 循环中包含 3 批 ul 和 li，它只会产生冗余数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:42:39.427

它会正常工作

```
foreach($data as $item){
   echo"<ul>
     <li>{$item}</li>
   </ul>";

} 
```

# java - 负数输出应该是正数

> ID：13372644
> 
> 赞同：4
> 
> 时间：2012-11-14T03:36:18.710
> 
> 标签：java, math

我正在做一个java项目，我有一个让我发疯的循环。

该程序接受一个输入 N，它是一个正整数。我想要我的循环做的是：

假设 N = 10。循环将从 1 到 10 的所有数字，将其提高到五次方，并将每个值存储在长度为 N 的数组中。

我认为它（似乎）可以正常工作，直到`N = 73`。一旦`N`达到 74 或更高，它就会开始随机给我 74^5 的负数。这显然是不正确的。数字越高，它给我的负面影响就越多。

```
private static int _theLimit = EquationSolver.getLimit(); //input "N"
private static int length = (int) (_theLimit); //length of possible solutions array = N
static int[] _solutions = new int[length]; 

public static void solutionRun() {
    for(int i = 1; i <=_theLimit ;) { 
        //theLimit refers to the input N; for numbers from 1 until N
        for (int p = 0; p <= _solutions.length-1; p++) { 
            //solutions is an array that stores all possible solutions to ^5 from 1 to N; 
            _solutions[p] = i*i*i*i*i; 
            //p refers to the array location, increments with each new i
            i++;
        }           
    }
    for(int q = 0; q<=_solutions.length-1; q++){ //outputs solutions for debugging purposes
        System.out.println(_solutions[q]);
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T03:39:53.573

问题是您刚刚通过了整数允许的范围。

`Int`允许从 **-2,147,483,648**到最大值**2,147,483,647**（包括）（[来源](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)）的数字，因为`74^5 = 2,219,006,624`. 因此，更多的`Int`可以处理。

如果你想要更大的范围，你可以使用 java [BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)类。代码示例：

```
BigInteger pow(BigInteger base, BigInteger exponent) {
  BigInteger result = BigInteger.ONE;
  while (exponent.signum() > 0) {
    if (exponent.testBit(0)) result = result.multiply(base);
    base = base.multiply(base);
    exponent = exponent.shiftRight(1);
  }
  return result;
} 
```

**注意事项：** 这可能不是很有效，并且可能不适用于负基数或指数。使用它作为如何使用 BigIntegers 的示例。

除了 BigInteger，您还可以使用`long`从 - **9,223,372,036,854,775,808**到**9,223,372,036,854,775,807**（包括）（[source](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)）的类型。

不要`double`用于此目的，因为您可能会遇到精度[问题](https://stackoverflow.com/questions/322749/retain-precision-with-doubles-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:46:39.337

我不在Java中工作，但我希望这会有所帮助！

试试这个命令：`public static final int MAX_VALUE`查看 int 在当前环境中的最大值。默认值为 2147483647（即 2^31 - 1）。74^5 = 2073071593 有效，但是 75^5 = 2219006624 太高了。使用[BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)支持您的数字范围。

# c++ - 在 C++ 中使用它在内存中的起始地址编辑字符串

> ID：13372647
> 
> 赞同：5
> 
> 时间：2012-11-14T03:36:29.773
> 
> 标签：c++, string, edit, inject, memory-address

我真的希望以前没有人问过这个问题，但是我的谷歌搜索没有任何结果，所以我想我会问。

我正在处理一个小脚本，我在其中将 DLL 注入游戏并编辑特定事件发生时显示的特定字符串。我找到了这个字符串在内存中的位置，并编写了一个基本的 sigscanning 函数来在运行时找到它。我现在的问题是，给定起始地址，我如何/可以用我自己的特定字符串替换这个字符串？

例如，字符串是“我喜欢煎饼”，我想将其替换为“煎饼很糟糕，华夫饼是最好的！”。一个人会怎么做呢？

谢谢！

哦，是的，如果重要的话，源中的字符串是一个 const char。我很确定它没有，但添加该信息并没有什么坏处！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:43:01.380

如果要替换它的字符串至少与替换它一样长，那么它是微不足道的：将其替换到位。否则，您无法可靠地表明您对煎饼的厌恶和对华夫饼的喜爱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:37:37.103

如您所述，引用字符串的汇编指令通常如下所示：

```
push offset aString 
```

组装和链接后，这被解析为实际地址说：

```
push 0x00ABCDEF 
```

这为您提供了两种选择：

*   **写入数据：**修改`aString`（即指向的内存`0x00ABCDEF`）的内容
*   **编写代码：**修改引用`aString`

## 写入数据

当源代码编译涉及标准 C 字符串字面量（内存中的不可变字符数组）时，在运行时该字符串通常映射到具有所有其他只读数据的某个只读页面。这些数据通常被连续打包以减少程序的内存占用。这是您尝试编写更大的字符串时遇到的问题。您将覆盖下一条数据，并且对该覆盖数据的任何引用现在都将指向大字符串的中间。

通过更改数据来编写更长的字符串并非易事，因为为了不丢失原始的功能行为，您必须在字符串之后移动所有数据。之后，您必须更新对移位数据的所有引用（其中一些可以使用指针算法动态计算）。正如我所说，这个过程并非微不足道 - 您试图在没有完整（如果有）符号信息的情况下重现链接器的重定位任务。

## 编写代码

最简单的方法是在任意位置写入新字符串。这可能是进程中未使用但已保留的内存（通常称为“代码洞穴”），或者它可能是您在注入 DLL 时映射的字符串文字。或者，您可以在注入后在运行时动态分配它。

下一步是查找所有引用`aString`并将它们替换为引用您的新字符串。

## 奖金方法:)

由于您在此级别研究逆向工程，因此您可能遇到了绕道/拦截/仪器的概念。在这里可以应用类似的方法来拦截所有引用并在运行时重定向它们。这将比上面概述的“编写代码”方法对性能造成更大的影响，但会保证所有访问都被捕获和重定向。

访问时的硬件断点设置为字符串指向的数据。当断点被触发时，一些寄存器将保存字符串的地址。在汇编中，这可能看起来像这样：

```
mov esi, 0x00ABCDEF
... 
```

如果访问第一个字符，代码可能会这样做：

```
mov al, byte ptr ds:[esi] 
```

当您的断点被命中时，您可以设置线程上下文（`SetThreadContext`在 Windows 上）以修改 的值`esi`以指向您的新字符串。

# c# - 正则表达式 如果单词与给定前缀不匹配，则替换所有找到的匹配项

> ID：13372648
> 
> 赞同：0
> 
> 时间：2012-11-14T03:36:33.720
> 
> 标签：c#, regex, regex-negation, regex-lookarounds

如何在不匹配给定文本前缀的情况下替换文本值？

**例如：**

`test hello world... I know hello world, this seems hello world..`

那么我们的替换值为“HI”

文本将是..

`test hello world... I know HI, this seems HI..`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:48:09.643

```
(?<!test\s)\bhello world\b 
```

这假设您对直接进行的测试感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:55:20.667

要有点聪明并避免使用正则表达式，您可能会做这样的事情

```
string v = s.Replace("hello world", "HI"); //replace hello world in all occurrences with HI 

string newstring  = v.Replace("test HI", "hello world"); //place hello world where hi is after test 
```

# ruby-on-rails - Rails - 带有自定义路线的 link_to

> ID：13372658
> 
> 赞同：6
> 
> 时间：2012-11-14T03:38:00.160
> 
> 标签：ruby-on-rails, routes, link-to

我是 Rails 新手，所以请耐心等待。

我想在我的食堂模型上实现“喜欢”，所以我在我的食堂资源中创建了一个自定义路由

```
resources :canteens do
  resources :meals
  resources :comments
  match "/like", :to => "canteens#like", :as => "like"
end 
```

因此在食堂控制器中创建了这个动作，我只是在其中增加一个计数器

```
def like    
  canteen = Canteen.find(params[:canteen_id])
  Canteen.increment_counter("likes_count", canteen.id)
  redirect_to canteen
end 
```

因此，手动输入 URL localhost:3000/canteens/1/like 就可以了，但是显然我想创建一个按钮，所以我做了一个

```
<h2>Likes count</h2>
<p><%= @canteen.likes_count %> likes</p>
<p><%= link_to "Like this canteen", canteen_like_path %></p> 
```

它不起作用。我检查了耙子路线，它就在那里（canteen_like）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T03:48:05.270

您必须将`Canteen`对象传递给路径。如果你不这样做，Rails 不知道你指的是哪个食堂：

```
<%= link_to "Like this canteen", canteen_like_path(@canteen) %> 
```

# java - 在数组上使用 next() 方法

> ID：13372664
> 
> 赞同：0
> 
> 时间：2012-11-14T03:39:05.957
> 
> 标签：java, arrays

有没有办法让 for 循环停止并且只在调用 next 时打印下一个元素？似乎其他一切都运行顺利，此时我正在打字，因为除非我解释更多，否则它不会让我发布我的问题。我觉得我的问题很直接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:47:47.293

如果你真的需要一个 next() 方法，你可以在你的 Fibonacci 中创建一个。创建一个全局变量

```
int index = 0; 
```

那么你的 next() 将如下所示

```
public int next(){
  return fib[index++];
} 
```

然后你可以使用 next() 函数来打印下一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:46:10.610

我想你在追求类似的东西[`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)

> [`BlockQueue#take`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#take%28%29)
> 
> 检索并删除此队列的头部，如有必要，等待元素可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T04:12:08.080

我的 next 最终代码如下所示：

```
 public int next()
    {
        for ( int i = 0; i< howMany; i++)
        { 
        if ( fib[i] == currentNum)
        index = i+1;
        }
        return fib[index++];
    } 
```

这样，如果首先询问第 n 个数字，也可以使用 next 来打印数组中该位置的每个下一个元素。谢谢！

# ruby-on-rails - 在 helper 中调用 yield

> ID：13372666
> 
> 赞同：4
> 
> 时间：2012-11-14T03:39:21.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

以下导致 LocalJumpError （没有块给产量）

在助手中：

```
def yield_wrapper
  yield
end 
```

在视图中：

```
<%= yield_wrapper %> 
```

* * *

这样的事情怎么办？我想将它与子布局一起使用：

```
<%= content_for?(:content) ? yield(:content) : yield %> 
```

而且我认为调用辅助方法会更好，例如：

```
<%= special_yield(:content) %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:47:51.057

我不认为你可以。

`yield`需要一个块，它被调用以向实现该块的代码返回一个值。您将上下文与其在布局文件中的使用混合在一起，以从 erb 文件中注入内容。

此外，我认为这是一个坏主意。这似乎没有必要，而且似乎它会创建比它摆脱的更多的代码。

# actionscript-3 - 处理普通对象时解耦类

> ID：13372668
> 
> 赞同：0
> 
> 时间：2012-11-14T03:39:29.517
> 
> 标签：actionscript-3, oop, design-patterns, architecture

我的问题与处理显示对象数组时类的解耦有关。

假设正在制作 PacMan 游戏，在我的 main.as 文件中，我会调用constructLevel.as 来构建关卡的不同部分（图形）。

现在让我们说 pacman 吃的“食物”在一个数组 foodArray 中，现在最好将 foodArray 保存在 main.as 中以便 main 可以轻松访问它，或者将 foodArray 放在constructLevel 中会更好。

在第一个场景中，constructLevel 要求 main.as 中存在适当的变量，在本例中为 foodArray。然而，在另一种情况下，main 总是需要引用constructLevel.foodArray 来获取数据，仍然和以前一样的耦合，但是数据已经从main 转移到了constructLevel

第三种解决方案是创建一个封装所有数据的黑板。

我不确定在这种情况下的最佳做法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:11:46.540

我会这样……创建类：**Level**，**LevelConstructor**。这样**LevelConstructor**将构建**Level**对象并返回它们。因此，从**主**类中，我们创建一个新关卡，如下所示：

```
var newLevel: Level = levelConstructor.build(..); 
```

在这种情况下，我们在**newLevel**对象中有**foodArray**和关卡的所有其他细节。通过这样做，我们将关卡数据和关卡构建算法分开。levelConstructor对象可以有任意数量的属性和方法来构建**关卡**，你的游戏需要的任何东西。

# ios - 如何使用 ARC 将委托替换为块

> ID：13372669
> 
> 赞同：0
> 
> 时间：2012-11-14T03:39:28.910
> 
> 标签：ios, automatic-ref-counting

我可以使用此方法将委托替换为块： [Best Technique for Replacing Delegate Methods with Blocks](https://stackoverflow.com/questions/8646476/best-technique-for-replacing-delegate-methods-with-blocks)

我使用这种方法来替换委托：

```
// Generic Block Delegate
@interface __DelegateBlock:NSObject
typedef void (^HeapBlock)(NSInteger);
@property (nonatomic, copy) HeapBlock callbackBlock; 
@end

@implementation __DelegateBlock
@synthesize callbackBlock;
- (id) initWithBlock:(void(^)(NSInteger))callback
{
    // Init and copy Callback Block to the heap (@see accessor)
    if (self = [super init]) 
        [self setCallbackBlock:callback];
    return [self autorelease];
}
- (void) dealloc
{
    // Release the block
    [callbackBlock release], callbackBlock = nil;    
    [super dealloc];
}
- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // Return the result to the callback
    callbackBlock(buttonIndex);

    // Detach the block delegate, will decrement retain count
    SEL key = @selector(alertWithTitle:message:clickedBlock:cancelButtonTitle:otherButtonTitles:);
    objc_setAssociatedObject(alertView, key, nil, OBJC_ASSOCIATION_RETAIN);
    key = nil;

    // Release the Alert
    [alertView release];
}
@end

@implementation UIAlertView (BlocksDelegate)
+ (id) alertWithTitle:(NSString*)title
              message:(NSString*)message
         clickedBlock:(void(^)(NSInteger))buttonIndexClickedBlock
    cancelButtonTitle:(NSString*)cancelButtonTitle
    otherButtonTitles:(NSString*)otherButtonTitles
{
    // Create class to hold delegatee and copy block to heap
    DelegateBlock *delegatee = [[__DelegateBlock alloc] initWithBlock:buttonIndexClickedBlock];
    [[delegatee retain] autorelease];
    // Create delegater
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title 
                                                    message:message 
                                                   delegate:delegatee
                                          cancelButtonTitle:cancelButtonTitle 
                                          otherButtonTitles:otherButtonTitles, nil];

    // Attach the Delegate Block class to the Alert View, increase the retain count
    objc_setAssociatedObject(alert, _cmd, delegatee, OBJC_ASSOCIATION_RETAIN);

    // Display the alert
    [alert show];
    return alert;
}

@end 
```

我应该保留委托使用

```
// Create class to hold delegatee and copy block to heap
DelegateBlock *delegatee = [[__DelegateBlock alloc] initWithBlock:buttonIndexClickedBlock];
[[delegatee retain] autorelease]; 
```

但如何在 ARC 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:06:59.277

您无需在 ARC中调用`release`,`retain`和。`autorelease`所以你不再需要在 ARC 中添加以下行了。

```
[[delegatee retain] autorelease]; 
```

# objective-c - NSLog 与 NSString 并分解 main.m

> ID：13372672
> 
> 赞同：0
> 
> 时间：2012-11-14T03:39:45.863
> 
> 标签：objective-c

在我运行这个程序之前，我有 0 个错误或警告。但是当我运行它时，我得到的输出是`(lldb)`XCode 突出显示我的 NSLog 输出并说`Thread 1 Breakpoint 1`？我的第一个问题是为什么我没有得到任何输出，我该如何解决我必须得到输出的问题？我的第二个问题是如何分解这些部分并将它们放入自己的类中。所以不要把它们都放在 main.m 中。这是我第一天使用来自 Java 的 XCode 编码，所以我仍在学习这门语言。谢谢你。

**第1部分**

```
#import <Foundation/Foundation.h>

@interface Person : NSObject
{
    NSString * name;
    int age;
    int weight;
}
    /***************************************
     * MUTATORS FOR PERSON INTERFACE
     ***************************************/
    - (void) setName : (NSString *) n;
    - (void) setAge : (int) a;
    - (void) setWeight : (int) w;

    /***************************************
    * MUTATORS FOR PERSON INTERFACE
    ***************************************/
    -(NSString *) getName;
    -(int) getAge;
    - (int) getWeight;
@end 
```

**第2部分**

```
@implementation Person
    /***************************************
     * MUTATORS FOR PERSON IMPLEMENTATION
     ***************************************/
    -(void) setName:(NSString *) n
    {
        name = n;
    }
    -(void) setAge:(int) a
    {
        age = a;
    }
    -(void) setWeight:(int)w
    {
        weight = w;
    }

    /**********************************
     * ACCESSORS FOR PERSON IMPLEMENTATION
     **********************************/
    -(NSString *) getName
    {
        return name;
    }
    -(int) getAge
    {
        return age;
    }
    -(int) getWeight
    {
        return weight;
    }
@end 
```

**第 3 部分**这是我遇到的问题。它不喜欢 NSLog

```
int main (int argc, const char * argv[])
{
    @autoreleasepool
    {
        Person *p1 = [[Person alloc]init];

        [p1 setName: @"Chris"];
        [p1 setAge:18];
        [p1 setWeight:200];

        NSLog(@"\nName: %@ \nAge: %i \nWeight: %i", p1.getName, p1.getAge, p1.getWeight);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:44:57.293

使用 NSLog 时，`%@`用于记录对象，但这些方法返回 int（原始类型）。将它们替换为`%d`（十进制 int 的字符串格式），该行应该停止崩溃。

要拆分它们，只需创建新的 .m 和 .h 文件。XCode 应该能够帮助您完成这个过程。.m 文件将被自动编译，并且 .h 文件应该（一般来说）包含在任何需要有关它所引用的类的信息的文件中。所以第 1 部分将是 Person.h，第 2 部分将是 Person.h（并包括行`@import Person.h`，第 3 部分将保留在 main.m 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T07:42:50.087

如果你不介意我问，为什么不直接使用属性？它将使您的代码保持干净和简单，并且还可以为您节省大量输入。如果您需要实现属性无法提供的自定义行为，您应该只实现访问器。

# spring - 使用 Spring DSL 配置 Camel 线程名称

> ID：13372675
> 
> 赞同：0
> 
> 时间：2012-11-14T03:40:00.353
> 
> 标签：spring, apache-camel

如何配置 Camel（2.8.1 版）创建的线程名称？为了记录目的，我需要更简洁的线程名称。

[Camel 文档](http://camel.apache.org/threading-model.html)声明默认值为：

```
Camel (#camelId#) thread ##counter# - #name# 
```

这导致名称如下：

```
Camel (bundle_camel) thread #114 - JmsConsumer[SomeClassNameHere] 
```

但我只想：

```
#camelId#-#counter# 
```

这会给我类似的东西：

```
bundle_camel-114 
```

文档说明了如何通过调用管理器方法来更改线程名称模式，但我们只通过 Spring DSL 配置文件与 Camel 交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:03:47.530

是的，您需要`<bean>`使用执行程序服务策略定义 a 并设置其模式。虽然我认为我们应该允许将命名模式配置为`<camelContext>`可以为 JMX 命名执行的属性。我将记录一张票以在 Camel 中增强此功能（尽管 ASF JIRA 目前处于维护模式）

[请参阅http://camel.apache.org/advanced-configuration-of-camelcontext-using-spring.html](http://camel.apache.org/advanced-configuration-of-camelcontext-using-spring.html)和[http://camel.apache.org/threading-model.html](http://camel.apache.org/threading-model.html)的一些详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-17T20:09:11.757

Camel 2.11 使这更容易。

您可以在 XML 文件中使用 threadNamePattern 属性，如下所示：

```
<camelContext xmlns="http://camel.apache.org/schema/spring" threadNamePattern="#camelId#-#counter#">
  <route>
      ...
  </route>
</camelContext> 
```

记录[在这里](http://camel.apache.org/threading-model.html)。

# ios - 在另一个 UIScrollView 中滚动一个 UIScrollView

> ID：13372678
> 
> 赞同：2
> 
> 时间：2012-11-14T03:40:35.783
> 
> 标签：ios, uiscrollview

我有 2 个嵌套的 UIScrollView 实例。它们都启用页面滚动和反弹。内滚动视图和外滚动视图都可以在滚动时执行正确的行为。

唯一的问题是当我将内部滚动视图滚动到其内容边界时，缺少反弹效果。效果被外部滚动视图替换为开始滚动。

我想在内部滚动视图中保持反弹效果。

我怎样才能实现它？先谢谢了。

我觉得一个demo可以更准确地描述我的问题，所以我写了下面的demo代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIScrollView * outer = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    outer.pagingEnabled = YES;
    outer.contentSize = CGSizeMake(300 * 3, 460);
    outer.bounces = YES;
    outer.scrollEnabled = YES;
    outer.backgroundColor = [UIColor redColor];

    UIScrollView * inner = [[UIScrollView alloc] initWithFrame:CGRectMake(10, 10, 300, 200)];
    inner.pagingEnabled = YES;
    inner.contentSize = CGSizeMake(320 * 3, 200);
    inner.bounces = YES;
    inner.scrollEnabled = YES;
    inner.backgroundColor = [UIColor yellowColor];

    [outer addSubview:inner];
    [self.view addSubview:outer];

} 
```

# javascript - 使用 JS 从 txt 文件中检索 2 个数组

> ID：13372683
> 
> 赞同：0
> 
> 时间：2012-11-14T03:41:13.487
> 
> 标签：javascript, arrays

用javascript从1个txt文件中检索2个数组的最简单方法是什么？

所以

```
Steve~kid
Bob~adult
Chris~kid 
```

变成

名称数组

```
Steve, Bob, Chris 
```

& 类型数组

```
kid, adult, kid 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:51:44.487

默认情况下，您无法从浏览器访问系统文件，尽管在一些现代浏览器中存在一些选项，例如[fileReader API](https://developer.mozilla.org/en-US/docs/DOM/FileReader)，当然还有[Node JS](http://nodejs.org/)，但那是用于服务器的东西。

**注意：**如果文件*在* ***您的***服务器上，那么您可以执行 AJAX 请求。

但是假设您知道如何将文件的内容放入字符串变量中，您可以创建如下数组：

```
var str = 'Steve~kid\nBob~adult\nChris~kid', // string from file
    lines = str.split('\n'),
    names = [],
    types = [];

lines.forEach(function( v ) {
  var a = v.split('~');
  names.push( a[0] );
  types.push( a[1] );
});

console.log( names ); //=> ['Steve', 'Bob', 'Chris']
console.log( types ); //=> ['kid', 'adult', 'kid'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:52:22.113

使用 jQuery：

```
$.get('/something.txt', function(data){
        var first=data.split('\n');
        var second = new Array();
        for(i=0;i<first.length;i++)
        {
          second[i] = first[i].substring(first[i].indexOf("~")+1);
        }
        //Do something with arrays
}); 
```

# linux - nohup启动程序时如何获取pid？

> ID：13372685
> 
> 赞同：1
> 
> 时间：2012-11-14T03:41:36.417
> 
> 标签：linux, bash

我的 store_plus.py 程序开始于：

```
WORK_DIR=/usr/local/gdnsplus_reducecname
SPOOL_DIR=$WORK_DIR/var/spool
STORE_PLUS_SERVER="$WORK_DIR/bin/store_plus.py"
/usr/bin/nohup /usr/bin/python $STORE_PLUS_SERVER  1>$SPOOL_DIR/store_plus_nohup.out 2>&1 & 
```

现在，我想获取 store_plus.py 的 pid。我尝试一种方法：

```
store_plus_prog="store_plus"
STORE_PID=`ps aux | grep $store_plus_prog | grep python | awk '{print $2}'` 
```

如您所见，这种方式很复杂，并且使用了一些管道。所以，我想使用**pidof** 和**pgrep**命令。

```
pidof store_plus.py 
```

或者

```
pgrep store_plus.py 
```

但他们不能工作。请给我一些建议。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:01:48.570

我相信这会达到你想要的。

```
pgrep -f store_plus.py 
```

根据手册页：

-f：模式通常只与进程名匹配。设置 -f 时，将使用完整的命令行。

# asp.net-mvc - 通过使用 Web Client Software Factory 2010 在 mvvp 中完成一个项目，我们可以在 mvc razor 中继续剩下的吗

> ID：13372686
> 
> 赞同：1
> 
> 时间：2012-11-14T03:41:37.000
> 
> 标签：asp.net-mvc

我有一个使用 Web Client Software Factory 2010 在 mvvp 中开发的大型 Web 应用程序，该项目是 4-5 年前开始的，由于某些原因没有完成。

现在，我们正在尝试在 mvc razor 中完成项目的其余部分。

谁能告诉我这可能吗？

从技术上讲，我想做的是同时使用 mvvp 和 mvc 来开发一个 Web 应用程序，即一半在 mvvp 中，其余在 mvc 中。现在可能会有一个问题“为什么不完全在 mvc 中使用 web 应用程序而不是使用 mvvp 和 mvc ”的答案是它已经在 mvvp 中使用了一半。

# c# - LINQ Join 的内存使用量是多少？

> ID：13372687
> 
> 赞同：3
> 
> 时间：2012-11-14T03:41:51.560
> 
> 标签：c#, .net, linq, memory

1.  如果两个 IEnumerable(s) 在内存中，加入它们的内存使用量是多少？假设选择所有列。是左表的大小+右表的大小+连接表中的行数吗？

2.  如果两个 IEnumerable(s) 是由文件流定义的，如果它们太大而无法放入内存，Join 会抛出内存异常吗？或者它会加载到内存接近不足并多次运行扫描（类似于数据库连接）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:22:43.663

在 Reflector 中查看`Enumerable.JoinIterator`，似乎整个`inner`（第二个）序列被加载到内存中（到 a`Lookup`中），但是`outer`（第一个）序列随后被流式传输（即*不是*全部加载到内存中）。

`inner`如果序列太大而无法放入内存，则似乎没有什么聪明的事情发生。

[Jon Skeets 似乎同意第一点](http://msmvps.com/blogs/jon_skeet/archive/2010/12/31/reimplementing-linq-to-objects-part-19-join.aspx)：

> 当涉及到如何使用输入序列时，真正的 Join 运算符使用与 except 和 Intersect 相同的行为：
> 
> ...
> 
> *   当第一次在结果序列上调用 MoveNext 时，它会立即消耗整个内部序列，并对其进行缓冲。
>     
>     
> *   外部序列是流式传输的——一次只读取一个元素。当结果序列开始从外部的第二个元素产生结果时，它已经忘记了第一个元素。

# c - 排序结构数组的成员

> ID：13372688
> 
> 赞同：17
> 
> 时间：2012-11-14T03:42:06.127
> 
> 标签：c, arrays, sorting, structure

给定一个结构数组（在 C 中），我试图按性别分组并按数字顺序按子顺序打印结果。例如：

```
struct employee{
char gender[13]
char name[13];
int id;
}; 
```

假设我像这样定义结构数组：

```
struct employee info[2]={{"male","Matt",1234},{"female","Jessica",2345},{"male","Josh",1235}}; 
```

我怎么能去打印像这样的结果

```
1234 Matt
1235 Josh

2345 Jessica 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-14T03:52:36.903

您需要实现一个排序功能，根据需要比较结构

```
int compare(const void *s1, const void *s2)
{
  struct employee *e1 = (struct employee *)s1;
  struct employee *e2 = (struct employee *)s2;
  int gendercompare = strcmp(e1->gender, e2->gender);
  if (gendercompare == 0)  /* same gender so sort by id */
    return e1->id - e2->id;
  else
    return -gendercompare;  /* the minus puts "male" first as in the question */
} 
```

然后使用标准库中的 qsort 。

```
qsort(data, count, sizeof(struct employee), compare); 
```

在 compare 函数中，您可能想要检查 id 是否相等，然后您可以按名称排序（也可以使用`strcmp()`）但是您喜欢。

编辑：刚刚编译并修复了这个。这是一个小测试程序

```
 #include <stdio.h>
    #include <stdlib.h>

    struct employee{
      char gender[13];
      char name[13];
      int id;
    };

    int compare(const void *s1, const void *s2)
    {
      struct employee *e1 = (struct employee *)s1;
      struct employee *e2 = (struct employee *)s2;
      int gendercompare = strcmp(e1->gender, e2->gender);
      if (gendercompare == 0)  /* same gender so sort by id */
        return e1->id - e2->id;
      else
        return -gendercompare;
    }

    main()
    {
      int i;
      struct employee info[]={{"male","Matt",1234},{"female","Jessica",2345},{"male","Josh",1235}};

      for (i = 0; i < 3; ++i)
        printf("%d\t%s\t%s\n", info[i].id, info[i].gender, info[i].name);

      qsort(info, 3, sizeof(struct employee), compare);

      for (i = 0; i < 3; ++i)
        printf("%d\t%s\t%s\n", info[i].id, info[i].gender, info[i].name);
    } 
```

带输出：

```
$ ./a.exe
1234    male    Matt
2345    female  Jessica
1235    male    Josh
1234    male    Matt
1235    male    Josh
2345    female  Jessica 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T03:50:38.897

在 struct 数组上使用您最喜欢的排序算法。在比较数组的两个元素以决定哪个“更大”时，比较它们的性别；如果性别相同，请比较他们的数字。（您可能希望定义一个单独的函数来进行此比较，以使事情更清楚。）然后，使用所需的格式按顺序打印排序的数组。跟踪性别何时从男性变为女性，以便您可以添加额外的三个换行符，如您的示例中所示。

编辑：为了无耻地从 kallikak 借用，您可以将比较函数传递给 qsort，但如果一个结构“更大”，则返回 1，如果“更少”则返回 -1，如果相同则返回 0（如有必要） （使用我上面概述的程序）。看看[How to write a compare function for qsort from stdlib?](https://stackoverflow.com/questions/327893/how-to-write-a-compare-function-for-qsort-from-stdlib) 获取有关编写自定义比较函数的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-26T18:16:18.190

认为它更容易理解，因为我的指针很弱

```
#include<bits/stdc++.h>

using namespace std;

struct employee{
  char gender[13];
  char name[13];
  int id;
};

bool compare(employee s1,employee s2)
{
  return s1.id<s2.id;
}

main()
{
  int i;
  struct employee info[]={{"male","Matt",1234},{"female","Jessica",2345},{"male","Josh",1235}};
  sort(info,info+3,compare);
  for (i = 0; i < 3; i++)
  printf("%d\t%s\t%s\n",info[i].id,info[i].gender,info[i].name);
} 
```

# python - 切片字符串时Python中的奇怪行为 - 返回空字符串？

> ID：13372696
> 
> 赞同：1
> 
> 时间：2012-11-14T03:42:51.283
> 
> 标签：python, windows, python-2.7, slice

我有一个`conts`包含二进制文件内容的变量（以`rb`as 模式读取）。现在，当我尝试通过切片获取字符串片段时，我希望看到变量的正确长度（当然还有内容），但我没有。

这是我可以重现的代码，我不知道这里发生了什么：

```
hdr1, hdr2 = conts[0:6], conts[10:7]
print "----------------"
print len(conts)
print len(hdr1)
print len(hdr2)
print len(conts)
print "----------------"
print type(hdr1)
print type(hdr2)
print type(conts) 
```

然而，我得到的输出是：

```
----------------
32174321
6
0
32174321
----------------
<type 'str'>
<type 'str'>
<type 'str'> 
```

这里发生了什么？我认为切片会为每个切片创建一个新字符串？

蟒蛇版本：`2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)]`

**注意：**切片之间的四字节间隙*是*故意的。问题在于第二个切片返回一个长度为零的字符串，即使有足够的数据。我没有发现任何文件（切片时）需要相邻。

**编辑：**在意识到我的错误之后：我打算从一个长度超过 17 个字节的字符串中获取字节 0 到 6 和字节 10 到 17。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T03:46:37.173

这是一个空字符串的原因是因为您没有提到您想要切片的负步骤，假设您确实打算向后切片。

```
hdr1, hdr2 = conts[0:6], conts[10:7:-1] 
```

会做你想做的事，注意`-1`让python知道你在切片时要后退而不是前进。

顺便说一句，这也导致了一种反转字符串的简单方法：

```
reverse = string[::-1] 
```

切片格式为：

`[start_index:end_index:step]`

* * *

从您的编辑中，我可以看到这个答案对于您的目的可能是多余的，但这是您知道的很好的信息，所以我将保留它。
以下是您将如何执行您在编辑中所说的操作：

```
hdr1, hdr2 = conts[0:6], conts[10:17] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T03:45:33.587

也许不吧

```
hdr1, hdr2 = conts[0:6], conts[10:7] 
```

但：

```
hdr1, hdr2 = conts[0:6], conts[7:10] 
```

我的意思是除了指定的负步骤（第三个参数）之外，切片中的第一个>第二个索引应该是什么？

因此，根据您的编辑：

```
hdr1, hdr2 = conts[0:6], conts[10:17] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T03:45:32.753

`conts[10:7]`你可能是说`conts[7:10]`

# c# - List.contains 在特定位置

> ID：13372698
> 
> 赞同：0
> 
> 时间：2012-11-14T03:42:54.620
> 
> 标签：c#, arrays, string, search

Titles 数组中有名字，我想知道里面有什么名字，我想把数字放在一个单独的数组上。示例我想以这种格式获取所有名称：“Name 1”，“Name 2”，“Name 3”，但发生的情况是它还获取了具有以下格式的名称：“Name 1”，“Name1”，“SampleName1” " 和 "FirstNameLast" 因为我使用的是子字符串。我提供了下面的代码。

```
List<int> ArrayCounter = new List<int>();

foreach(Title titlename in Titles)
{
    int length = "StringFromResource".length;
    if(titlename.name.length == length)
    {
        if (!UntitledPolicyArrayCounter.Contains(0))
            UntitledPolicyArrayCounter.Add(0);
    }
    else
    {
        if (!ArrayCounter.Contains(Convert.ToInt32(titlename.name.Substring(length + 1))))
            ArrayCounter.Add(Convert.ToInt32(titlename.name.Substring(length + 1)));
    }
} 
```

我希望能够只获取格式为：“名称 1”的名称。我如何在不使用正则表达式的情况下完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:15:29.073

您可以使用 StartsWith 函数。我对你的代码试图做什么仍然很模糊。我觉得示例输入和预期输出可能会更好地阐明您想要什么。如果我了解您要做什么，这里有一些代码可能会有所帮助。我的子字符串函数可能有点偏离（您可能需要额外的 +1）。

[http://msdn.microsoft.com/en-us/library/baketfxw.aspx](http://msdn.microsoft.com/en-us/library/baketfxw.aspx)

```
string findThis = "SomeTitle";
string name = "SomeTitle 1";

if(findThis.Length + 2 == name.Length
    && name.StartsWith(findThis))
{
  int number;
  //make sure there is exactly one space followed by an integer
  if( name.Substring(findThis.Length, 1) == " " 
    && Int32.TryParse(name.Substring(findThis.Length + 1, 1), out number))
  {
     //number now contains 1 parsed from the string
  } 
} 
```

# java - 在 Java 中读取文本文件 (.txt) 时出错

> ID：13372699
> 
> 赞同：0
> 
> 时间：2012-11-14T03:42:59.833
> 
> 标签：java, error-handling, compiler-errors, text-files, runtime-error

我读取文本文件的java代码如下：

```
package practice.java;
import java.io.IOException;

public class SearchFiles {
    public static void main(String[] args) throws IOException {
        String file_name = "C:/Java/test.txt";

        try {
            ReadFile file = new ReadFile(file_name);
            String[] aryLines = file.OpenFile();

            int i;
            for (i=0; i < aryLines.length; i++) {
                System.out.println(aryLines[i]);
            }
        }
        catch (IOException e) {
            System.out.println( e.getMessage() );
        }
    }
} 
```

以下是其他代码：

```
package practice.java;

import java.io.IOException;
import java.io.FileReader;
import java.io.BufferedReader;

public class ReadFile {
    private String path;

    public ReadFile (String file_path) {
        path = file_path;
   }

    public String[] OpenFile() throws IOException {

        FileReader fr = new FileReader(path);
        BufferedReader textReader = new BufferedReader(fr);

        int numberOfLines = readLines();
        String[] textData = new String[numberOfLines];

        int i;

        for (i=0; i < numberOfLines; i++) {
            textData[i] = textReader.readLine();
        }

        textReader.close();
        return textData;
        }

        int readLines() throws IOException {

            FileReader file_to_read = new FileReader(path);
            BufferedReader bf = new BufferedReader(file_to_read);

            String aLine;
            int numOfLines = 0;

            while ((aLine = bf.readLine()) != null) {
                numOfLines++;
            }    
            bf.close();

            return numOfLines;
        }
    } 
```

结果是空的。我究竟做错了什么？我要纠正哪些部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:49:49.903

您正在阅读文件以确定行数。然后您尝试再次阅读它以实际阅读和捕获这些行。这是很多不必要的工作。如果您使用 a `List<String>`，则不需要此两次操作。试试这个：

```
public List<String> OpenFile() throws IOException {

    List<String> lines = new ArrayList<String>();
    FileReader fr = new FileReader(path);
    BufferedReader textReader = new BufferedReader(fr);
    try {
        String aLine;
        while ((aLine = bf.readLine()) != null) {
            lines.add(aLine);
        }
    } finally {
        textReader.close();
    }
    return lines;
} 
```

如果您确实需要 a`String[]`而不是 a `List<String>`，则可以将列表转换为数组。只需更改方法返回类型，然后将行替换为`return lines;`：

```
 return lines.toArray(new String[0]); 
```

# php - 如何在我的 Windows 7 机器上下载 Apache 服务器、PHP 和 MySQL 或其他数据库？

> ID：13372703
> 
> 赞同：0
> 
> 时间：2012-11-14T03:44:03.327
> 
> 标签：php, mysql, database, apache, installation

我想将 Apache2.x 和 Php 5.4.x 和 MySQL 或任何其他类型的数据库类型安装到我的 Windows 7 计算机上进行托管。

有没有人有一个很好的教程链接供我使用？（如果没有，请告诉我或尝试解释如何安装它们。

我基本上是从头开始，因为我已经尝试过多次安装它，但不幸的是在让事情正常工作时遇到了很多麻烦。

感谢您抽出时间回复，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:53:35.617

我建议您可以继续使用更方便满足您所有要求的 XAMPP 服务器，

[从这里下载](http://www.afterdawn.com/software/general/download_splash.cfm/xampp_for_windows_portable?software_id=3539&version_id=52166)

[XAMPP手册](http://www.a3webtech.com/index.php/xampp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:47:00.167

几周前我最近遇到了这个问题，我也花了很长时间才找到一个好的教程。

请参考本[教程](http://lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/)。

该指南非常直截了当，是一个很好的参考（我会收藏它，以防您需要重新安装它）

祝你好运，

希望我对你有所帮助！

# ruby-on-rails - rails模型导致服务器冻结

> ID：13372711
> 
> 赞同：0
> 
> 时间：2012-11-14T03:45:08.190
> 
> 标签：ruby-on-rails, model, freeze, no-response

我是一名业余程序员，正在开发 ruby​​ on rails 应用程序。到目前为止，一切都运行顺利，但现在我遇到了问题。每次我尝试访问我的“约会”模型时，服务器都会卡住并且无法加载页面。这是我的控制器的索引：

```
class AppointmentsController < ApplicationController
load_and_authorize_resource
before_filter :get_appointments, :only => :index
def index
    @appointments = Appointment.all
    @months = ["January","February","March","April","May","June","July","August", "September", "October", "November", "December"]
    @appointments = @appointments.select {|appointment| appointment.seller_id == current_user.id }
    @appointments = @appointments.select {|appointment| appointment.completed == false }
    @appointments.sort! { |a,b| a.date_time <=> b.date_time }
end 
```

我不认为问题出在视图上，因为我可以注释掉这段代码，然后服务器会加载页面。这是模型

```
class Appointment < ActiveRecord::Base
  attr_accessible :buyer_id, :item_id, :seller_id, :location, :date_time
  belongs_to :item

end 
```

知道问题可能是什么吗？请帮忙！谢谢！

罗汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:35:27.463

好吧，这很尴尬..查看页面有问题。它陷入了无限循环。问题已解决，还是感谢您的帮助！

# php - 如何检查嵌套数组的键中是否存在值？

> ID：13372712
> 
> 赞同：1
> 
> 时间：2012-11-14T03:45:24.323
> 
> 标签：php, multidimensional-array, foreach, boolean

我如何编写一个函数来检查 - 只要嵌套数组中的键中**存在**`true`一个值然后返回？

例如，

```
$input = array(
    "path" => null,
    "type" => array (
            "post" => null,
            "page" => null
        ),
    "title" => null, 
    "category" => array(
            "image" => "on"
     )
);

function validate_array($input = array())
{

    # Loop the array.
    foreach($input as $key => $value)
    {
        if($value && !is_array($value)) return true;

        elseif(is_array($value))
        {
            validate_array($value);
        }
        elseif($value)
        {
            return true;
        }
    }

    # Return the result.
    return false;
}

var_dump(validate_array($input)); // return bool(false) 
```

它应该返回`true`，因为嵌套数组之一 -**类别-****有**一个值

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:47:15.307

```
# Loop the array.
foreach($input as $key => $value)
{
    if($value && !is_array($value)) return true;

    elseif(is_array($value))
    {
        //--->change this line to this<----
        if validate_array($value) return true;
    }
    elseif($value)
    {
        return true;
    }
} 
```

另外，我不相信你需要最后一个 elseif

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:21:09.877

经过测试，应该可以工作。找到值时返回 true，否则返回 false。

```
function validate_array($input = array())
{
    # Loop the array.
    foreach($input as $key => $value) { 
        if (isset($value)) {
            if (is_array($value)) {
                if (validate_array($value)) {
                    return true;
                }
            } else {
                return true;
            }
        }
    }
    # Return the result.
    return false;
} 
```**

# c# - 设计类以应对频繁的数据库模式更改

> ID：13372715
> 
> 赞同：5
> 
> 时间：2012-11-14T03:45:39.890
> 
> 标签：c#, class-design

我正在处理由另一个系统维护的数据库，因此我无法对表进行任何重大更改。这个数据库中的表有很多字段（超过 30+），没有两个表具有相同的命名约定、类型或相同数量的字段。这些表也经常更改（添加、删除字段或更改它们的类型），更糟糕的是，新表也经常创建。现在我确实有一张可以严格输入的表，用作队列。

**问题：**

我必须从给定表名和该表中的某些列的表中获取数据。列名作为字符串提供。由于这些表经常更改，因此很难为每个表维护严格类型的实体。

我将如何以松散耦合但允许我使用这些表的方式设计我的类？

感谢您的帮助，如果我的解释很糟糕，我们深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:14:16.780

我不确定您可以从不稳定的数据中得出什么样的业务逻辑。我的假设是您正在对与记录关联的元数据进行一些工作。使用数据的聚合（计数、平均值等）而不是实际数据。

我会使用 DataSet，使用通用 SQL 语句，例如：

```
SELECT * FROM {dynamic table name} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:58:43.157

一种想法是使用带有[表的](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.table.aspx)[SQL 管理对象 (SMO)](http://msdn.microsoft.com/en/library/ms162169.aspx)来动态创建强类型。

```
Server srv = new Server(conn);
Database db = srv.Databases["AdventureWorks"];

foreach (Table table in db.Tables)
{
    Console.WriteLine(" " + table.Name);
    foreach (Column col in table.Columns)
    {
        Console.WriteLine("  " + col.Name + " " + col.DataType.Name);
    }
} 
```

我已经以这种方式为数据访问层编写了单元测试生成器，您可以使用 DataTypes 列组成类，例如（在线查找更好的实现 - 在 C# 中）：

```
Public Function SQLParameterType(ByVal ParameterDataType As String) As String

    ParameterDataType = ParameterDataType.ToUpper

    If ParameterDataType.IndexOf("NVARCHAR") > 0 Then
        Return "string"
    ElseIf ParameterDataType.IndexOf("VARCHAR") > 0 Then
        Return "string"
    End If

    Select Case ParameterDataType

        Case Is = "BIGINT"
            Return "Int64"
        Case Is = "INT"
            Return "Int32"
        Case Is = "SMALLINT"
            Return "Int16"

        Case Is = "BIT"
            If gIsVBdotNet Then
                Return "boolean"
            Else
                Return "bool"
            End If

        Case Is = "DATETIME"
            Return "DateTime"

        Case Is = "DATETIME2"
            Return "DateTime"

        Case Is = "SMALLDATETIME"
            Return "DateTime"

        Case Is = "MONEY"
            Return "single" 'float
        Case Is = "FLOAT"
            Return "single" 'float
        Case Is = "REAL"
            Return "double"
            'Case Is = "INT"
            '    Return "int32"
            'Case Is = "INT"
            '    Return "int32"
        Case Else
            Return "666"
    End Select

End Function 
```

使用这个以模式中立的方式连接到数据库的简单 ORM，您可以将动态生成的类松散地耦合到 dB。.Net 4 中的新[动态](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject%28v=vs.95%29.aspx)类型似乎是该应用程序的一个很好的多态数据类型候选者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T04:44:31.270

一种快速修复（不是解决方案）是使用[像这样](http://www.codeproject.com/Articles/27830/SQL-Class-Shell-Generator)的代码生成实用程序，它会根据您的模板或数据表模式定义本身更新/创建您的类文件。通过一些工作，这可以通过[自定义 MsBuild 任务](http://blogs.msdn.com/b/msbuild/archive/2006/01/21/515834.aspx)在您的项目中完全自动化，该任务将在您构建项目时运行，并且您的文件将直接更新到您的解决方案文件夹中。

但最重要的是，当您的表定义更新时，它会在构建时破坏您的代码 - 向您显示由于表定义更改而必须修复的地方。为此，您的自定义 MsBuild 任务必须在主构建任务之前运行，如此[处所述](http://msdn.microsoft.com/en-us/library/ms366724%28v=vs.80%29.aspx)。

这肯定会使您受益并使事情变得容易，因为我已经看到这样的设计使类似的项目受益，但最终“废话 - 废话”原则仍然盛行，因此上述“修复”只会治疗症状而不是原因可能是设计不佳并且缺乏对解决方案数据需求的抽象和分析。因此，您会得到一个需要重新编程才能重新配置的程序：）但对于 LOB 编程，这并不罕见：）

** 注意：如果您决定使用第一段中描述的设计，为了获得完整的解决方案，您可能需要一个额外的 MsBuild 任务，当架构更改。如果您需要更多信息，请在下方评论。

**总结一下**：当您按下 F5 在 Visual Studio 中构建您的解决方案时，您的所有类都将使用数据库中的最新定义神奇地更新。您还可以将其限制为`Release`仅在构建上发生，这样您就不会在开发时每次在`Debug`模式下构建时都完成此操作。

# windows - 用于更改音轨的 Windows API

> ID：13372717
> 
> 赞同：3
> 
> 时间：2012-11-14T03:45:56.690
> 
> 标签：windows, api, audio

当我点击下一个/上一个和 windows media player/itunes 中的播放曲目按钮时调用的 windows API 函数是什么？如果您不知道确切的 API 功能，是否有一些快速方法（通过使用某些软件）来找到您点击按钮时调用的功能？

谢谢

比诺伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:38:50.270

我不确定 Windows Media Player，但有一个 iTunes COM 接口，用于以编程方式与 Windows 上的 iTunes 交互。这里有一个关于在 C# 中使用 COM API 的简短教程：http: [//www.ohscope.com/2009/04/02/itunes-com-api-in-c/](http://www.ohscope.com/2009/04/02/itunes-com-api-in-c/)

我也不确定您是否要让 iTunes 播放曲目（您可以这样做），或者您是否只想在曲目开始播放时获得回调（您也可以这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:40:37.687

如果您指的是下一个和上一个 CD 曲目，您可能正在寻找[媒体控制接口 (MCI)](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757151.aspx)。

如果您的意思是来自播放列表，那么就没有这样的 API。媒体播放器自己管理播放列表，改变歌曲包括停止旧的和开始新的。Win32 提供的播放列表没有下一个/上一个。

# c - 重复使用同一个线程

> ID：13372721
> 
> 赞同：4
> 
> 时间：2012-11-14T03:46:25.917
> 
> 标签：c, multithreading

我正在编写一个赋值程序，它使用线程实现两个给定数组之间的矩阵乘法。

我必须给出我想用作命令行参数的线程数，如果它们的数量小于第一个数组的行数，则重复使用一些相同的线程，直到整个工作完成。

我设法让它工作，但只为数组的每一行使用一个线程。例如，如果 a 有 5x5 乘法并且使用少于 5 个线程，我会出现分段错误，这是有道理的。

我的问题是：该线程完成工作后如何重用线程？在前面的示例中，我的意思是如果我想为 5x5 使用 2 个线程，我的程序应该像这样工作：

线程 1-> 第 1 行

线程 2->第 2 行

线程 2-> 第 3 行

线程 1-> 第 4 行

等等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:51:16.117

您有多种可能性，但主要思想是您必须监视线程以检测它们何时完成工作，并且有办法知道是否还有一些事情要做。

想到的第一个方法是有一个专用线程来跟踪所有正在运行的线程，并在它们完成后回收它们。但是为了做到这一点，您需要一种让线程同步的机制，这可以使用信号量或互斥锁或消息来实现，但如果您不需要它，仅为此目的编写代码可能会很麻烦.

第二种方法是简单地要求他们回收自己，因为他们知道何时完成。在许多其他语言中，有一种称为延续的机制，它可以让你完全做到这一点，但由于我们正在处理 C，我们需要手动完成。幸运的是，这里的延续实际上只是一个单一的任务。

所以调用continuation的机制其实只是一个函数，它会先运行要被线程执行的任务，然后要么：

*   检查任务列表。此任务列表必须在设置时填写任务需要完成的所有工作，
*   将线程添加到可用线程队列中，必须由其他线程再次检查并重新分配新任务，

显然，第一个选项会更容易，并且在您的情况下，您在设置时已经知道必须做什么，因此您的设置功能可以填写任务列表，然后启动任意数量的线程，并让它们自己做回收。

这是一个你可以开始的简单骨架：

```
 typedef struct {
    /* task related data */
 } task_t;

 // basic list structure
 typedef struct {
   list_t *next;
   void *data; // here app specific data
 } list_t;

 list_t task_list; // your task list

 // a few operators to manipulate a list
 // implementation must use a mutex to avoid race conditions
 void list_push(list *l, void *data);
 void *list_pop(list *l);

 // thread function

 void do_task(task_t *task){
     while (task) {
       run_task(task); // that would be the matrix related function
       task = list_pop(&task_list);
 }

 // here a simple define for the number of threads
 // you might want to check the number of available cores instead

 #define MAX_THREAD_COUNT 4 

 int main() {

   pthread_t threads[MAX_THREAD_COUNT];

   setup_task_list();  // push all the work that must be done in the list
   int i;
   for (i = 0; i < MAX_THREAD_COUNT; i++) {
      pthread_create(threads + i, NULL, do_task, list_pop(&task_list));
   }

   // here wait for all the threads, or detach them

 } 
```

这是您可以做什么的基本大纲，应该可以帮助您入门。关于 SO 处理 C 链表有几个问题。这里的那个必须是同步的，不应该阻塞，`NULL`空的时候返回。

# bash - 翻转目录中的所有其他图片

> ID：13372728
> 
> 赞同：1
> 
> 时间：2012-11-14T03:47:07.210
> 
> 标签：bash

我有一堆要打印的图片，但是为了让它们正确打印出来，其他每张图片都需要水平翻转。现在，这些图片都是 png 文件，并标有`"Foo 001.png"`, `"Foo 002.png"`. 我在想我需要做的就是查看字符串中包含数字的部分，将其转换为整数，`n%2==0`检查它是否是偶数，如果是偶数则翻转它。

我不知道是否有一种方便的方法可以使用 bash 从字符串转换为整数，或者我会用什么来翻转图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:56:10.440

使用切换变量翻转列表中的所有其他图像。

```
X=0

cat filenames | while read -r filename ; do
  if [ $X -eq 1 ] ; then
    # flip $filename
  fi
  # print $filename
  X=$((1-$X))
done 
```

您可以将`cat filenames`上面替换`ls -1 *.jpg`为按字母顺序打印`*.jpg`文件，或[`ls -1v`对它们进行版本排序](http://www.gnu.org/software/coreutils/manual/html_node/Details-about-version-sort.html#Details-about-version-sort)，这种方式不需要将文件名中的序列号补零。

如果有数千个文件，可以使用`ls`（无通配符）和/或and`grep`之一的组合来代替上述文件，以避免超出限制。`find``sort`[`ARG_MAX`](https://stackoverflow.com/questions/6461227/limits-of-length-for-the-output-of-in-bash)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:56:31.550

如果我理解得很好，你想翻转 1/2 png 图像吗？如果是，那么：

```
convert -flip "Foo *{0,2,4,6,8,10}.png" 
```

或者如果您有太多文件：

```
# making an array of files
files=( *.png )

# C style for loop (iterating 2 by 2)
for ((i=0; i< ${#files[@]}; i+=2)) {
     # fliping the image
     convert -flip "${files[i]}"
} 
```

convert 命令是著名的[imagemagick](http://www.imagemagick.org/script/index.php)库的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T03:53:34.053

由于 bash 使用字符串比使用数字好得多，所以我的第一个想法是

```
flip Foo\ *{0,2,4,6,8}.png 
```

`flip`您用来翻转图片的命令在哪里。

这假设该命令可以接受多个文件名。如果没有，您可以使用循环：

```
for f in Foo\ *{0,2,4,6,8}.png; do flip "$f"; done 
```

# macos - OpenALSDKInstaller 下载不适用于 OSX？

> ID：13372731
> 
> 赞同：2
> 
> 时间：2012-11-14T03:47:26.130
> 
> 标签：macos, sdk, installation, openal

尝试从[http://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx](http://connect.creativelabs.com/openal/Downloads/Forms/AllItems.aspx)下载 mac openALSDKInstaller 时，是否有其他人出现错误？有没有其他地方可以下载sdk的mac版？有很多地方可以下载PC SDK，但我找不到任何用于mac的...

# r - 如何在ggplot的多面箱线图中显示中值？

> ID：13372734
> 
> 赞同：-2
> 
> 时间：2012-11-14T03:47:49.010
> 
> 标签：r, ggplot2

继续我之前关于[如何在箱线图中显示值标签的](https://stackoverflow.com/questions/13370164/how-to-display-the-median-value-in-a-boxplot-in-ggplot)问题 现在我喜欢在多面箱线图中显示值标签。我又有点卡住了。问题更多是让 geom_text() 识别二维数组或数据框。

```
p <- structure(list(PROVIDER = structure(c(4L, 3L, 4L, 4L, 3L, 4L, 
3L, 4L, 4L, 3L, 4L, 3L, 4L, 3L, 3L, 4L, 3L, 4L, 3L, 4L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 3L, 3L, 4L, 1L, 1L, 1L, 1L, 
1L, 4L, 1L, 3L, 4L, 4L, 4L, 4L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 2L, 4L, 3L, 3L, 4L, 4L, 4L, 3L, 2L, 2L, 3L, 3L, 
3L, 4L, 3L, 4L, 3L, 4L, 3L, 4L, 3L, 3L, 4L, 1L, 3L, 3L), .Label = c("Other", 
"Skinny Mobile", "TNZMobile", "Vodafone NZ Mobile"), class = "factor"), 
    TYPE = structure(c(3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
    3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 3L, 3L, 3L, 3L, 2L, 3L, 3L, 
    3L, 3L, 3L, 2L, 3L, 3L, 2L, 3L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 
    3L, 2L, 3L, 3L, 3L, 1L, 2L, 3L, 3L, 2L, 3L, 3L, 3L, 1L, 3L, 
    3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
    3L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
    3L, 3L, 3L, 3L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 1L, 1L
    ), .Label = c("PM BUSINESS", "PM CONSUMER", "PREPAY"), class = "factor"), 
    AVGREV = c(10.426, 4.4175, 33.0408333333333, 49.71, 0, 6.778, 
    15.2858333333333, 0, 14.5558333333333, 13.3955555555556, 
    51.6075, 14.25, 11.85, 6.42833333333333, 4.1725, 14.7383333333333, 
    12.97375, 66.65, 11.4866666666667, 15.6533333333333, 16.7541666666667, 
    2.38428571428571, 77.475, 16.3316666666667, 3.414, 13.2466666666667, 
    13.905, 0.740833333333333, 36.2158333333333, 6.91, 16.4141666666667, 
    65.3116666666667, 18.0225, 127.831666666667, 15.2888888888889, 
    4.35166666666667, 7.38416666666667, 13.904, 4.34833333333333, 
    30.685, 11.6575, 42.844, 13.6216666666667, 24.6241666666667, 
    26.6441666666667, 93.391, 66.3966666666667, 9.89333333333333, 
    0, 34.998, 12.8836363636364, 7.44571428571429, 10.4772727272727, 
    35.5233333333333, 11.7911111111111, 12.82, 0.161111111111111, 
    0.36, 14.0775, 4.96571428571429, 20.7675, 8.4375, 7.3075, 
    1.71833333333333, 0.0725, 1.44916666666667, 0, 2.875, 10.9466666666667, 
    0, 11.8255555555556, 25.745, 0, 0, 21.3858333333333, 38.9108333333333, 
    6.32142857142857, 28.2625, 5.95166666666667, 22.5675, 12.1541666666667, 
    55.8766666666667, 15.5883333333333, 14.2175, 12.7991666666667, 
    1.8075, 13.845, 8.08333333333333, 8.7, 43.0991666666667, 
    19.2316666666667, 7.055, 7.47571428571429, 33.2175, 14.1625, 
    0, 5.204, 0, 77.39, 77.39)), .Names = c("PROVIDER", "TYPE", 
"AVGREV"), row.names = 23961:24060, class = "data.frame")

ar_meds <-ddply(p,.(list(TYPE,PROVIDER)), summarise, med = median(AVGREV))
ar.m <- ggplot(p,aes(x=TYPE, y=TOTALREV))+geom_boxplot() +facet_wrap(~TYPE)
ar.m+geom_text(data = ar_meds, aes(x = TYPE, y = med, label = round(med)),size = 3, vjust = -0.5) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T04:11:20.420

您的问题充满了语法错误以及对不存在的变量和对象的引用。

如果您想要在图被分面时每个箱线图的中值，那么您需要确保分面变量存在于每次调用的 data.frame （或调用环境）中`geom_....`

一个简单的、可重复的例子

```
set.seed(1)
library(plyr)
DF <- data.frame(TYPE = sample(letters[1:3], 500, replace = TRUE), 
  PROVIDER = letters[1:5], VALUE = rnorm(500))

# get the medians by type and provider (both columns
# will exist in the new data.frame

meds <- ddply(DF, .(TYPE, PROVIDER), summarize, med = median(VALUE))

ggplot(DF, aes(x=PROVIDER,y=  VALUE)) + 
   geom_boxplot() + facet_wrap(~TYPE) + 
   geom_text(data = meds, aes(y = med, label = round(med,2)),size = 3, vjust = -0.5) 
```

![在此处输入图像描述](../Images/a45a5f57b7a9cf19dea6e85d37b07c6d.png)

# jetty - 每秒请求的骆驼码头基准测试

> ID：13372739
> 
> 赞同：1
> 
> 时间：2012-11-14T03:49:34.903
> 
> 标签：jetty, apache-camel

我正在构建一个高负载 http 服务，它每秒会消耗数千条消息并将其传递给像 activemq 这样的消息传递系统。

我目前有一个休息服务（非骆驼，非码头），它接受来自http客户端的帖子并返回一个简单的成功响应，我可以使用apache ab对此进行负载测试。

我们还将 camel-jetty 视为输入端点，因为它具有用于 activemq 的集成组件，并且如果需要可以成为 esb 的一部分。在我开始构建骆驼码头到 activemq 路线之前，我想测试骆驼码头可以支持的负载。我的码头唯一路线应该是什么样子，

我在想路线

from("jetty:http://0.0.0.0:8085/test").transform(constant("a"));

并使用 apache ab 进行测试。我担心这条路线是否提供真正的骆驼码头容量，因为转换可能会增加开销。还是不会。

基于这些测试，我计划在有或没有骆驼的情况下构建 http-mq。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:02:32.623

转换 API 不会增加大量开销...我只是针对您的基本路线进行了测试...

```
ab -n 2000 -c 50 http://localhost:8085/test 
```

并得到以下...

```
Concurrency Level:      50
Time taken for tests:   0.459 seconds
Complete requests:      2000
Failed requests:        0
Write errors:           0
Non-2xx responses:      2010
Total transferred:      2916510 bytes
HTML transferred:       2566770 bytes
Requests per second:    4353.85 [#/sec] (mean)
Time per request:       11.484 [ms] (mean)
Time per request:       0.230 [ms] (mean, across all concurrent requests)
Transfer rate:          6200.21 [Kbytes/sec] received 
```

# python - 关键字参数性能（python）

> ID：13372740
> 
> 赞同：3
> 
> 时间：2012-11-14T03:49:42.227
> 
> 标签：python, performance, keyword-argument

我正在尝试通过使用 timeit 测试（计时）各种功能来优化一些 python 代码。

我发现我得到不同的速度取决于变量是关键字参数还是函数内。

那是：

```
def test_function(A = value()):
    #rest of function.... 
```

返回的结果不同于：

```
def test_function():
    A = value()
    #rest of function ... 
```

我会认为他们会有非常相似的结果 - 我猜我在这里不理解/遗漏了一些东西......

（也为测试做 10,000 个循环）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T03:58:15.163

关键字参数在函数定义时评估一次。因此，在您的第一个示例`value()`中，无论您多久调用一次测试函数，都只调用一次。如果`value()`是昂贵的，这解释了两个版本之间运行时的差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T04:08:04.937

没有理由期望您的两个函数做同样的事情，更不用说具有相同的性能特征了。

```
def test_function(A = value()):
    #rest of function.... 
```

此函数没有“关键字参数”；没有这样的事情。它有一个带有默认值的参数。任何函数的任何参数（除了一些顽固的内置函数）都可以**通过**关键字或位置传递，但参数本质上不是“关键字参数”。

关键字参数和默认值之间的唯一关联是，当您有*多个*带有默认值的参数时，在接受较早参数的默认值的同时为后面的参数提供显式值的唯一方法是通过关键字传递后面的参数。

这两个函数之间的巨大区别在于，当您为 声明默认值时`A`，它是默认**值**，而不是在未提供显式值时每次都会重新生成该值的代码。当你这样说时：

```
def test_function(A = value()):
    #rest of function.... 
```

您正在**为**. `A`与任何其他上下文一样，当您提供 Python 需要值的复杂表达式时，Python 将评估该表达式，然后使用结果值。因此，当您在函数定义时为 设置默认值`A`时，它会被设置为`value()`当时返回的任何值。那么这个单一的值就是 的默认值`A`。

```
def test_function():
    A = value()
    #rest of function ... 
```

在此函数中，`value()`每次调用该函数时都会对其进行评估。因此，如果`value()`价格昂贵，那么此版本将比第一个版本花费更长的时间。但是如果`value()`返回一个你稍后改变的对象，那么默认参数版本将始终使用一个对象，无论它在调用函数时处于什么状态，而第二个版本将`value`每次都构造一个新对象. 您使用哪个版本应该由您希望程序具有的语义决定。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T04:02:35.577

有关于为什么这种方法不是确定方法有效性的最佳方法的讨论，但如果你`dis`用来检查函数的字节码，你会发现它们以不同的方式构造，即`t1`在定义它的时间，因此不需要在后续函数调用中重新定义它：

```
>>> import dis
>>> def t1(A=1):
...   pass
>>> def t2():
....  A=1
>>> dis.dis(t1)
  2           0 LOAD_CONST               0 (None)
              3 RETURN_VALUE        
>>> dis.dis(t2)
  2           0 LOAD_CONST               1 (1)
              3 STORE_FAST               0 (A)
              6 LOAD_CONST               0 (None)
              9 RETURN_VALUE 
```

# java - 包含作为参数传递的对象的函数的设计困难

> ID：13372746
> 
> 赞同：0
> 
> 时间：2012-11-14T03:50:23.847
> 
> 标签：java, eclipse

因此，我现在正在使用 java 进行一些编程练习，而我正在使用的当前练习涉及使用 acm.graphics 库。基本形状和绘制图片的东西。

我想要做的是创建一个函数，该函数具有 GObject 和 Color 对象的参数，并适当地调用 setFilled() 和 setColor （因为为每个形状对象重新键入它是非常多余的）。

我遇到的问题是这样的

GObject 类是 GRect、GOval、GLine 等的超类，但实际上不包含 setFilled 函数（因此在尝试诸如函数 f(GOBject A, Color ArgC) 之类的参数标头时会引发错误。

那么我应该如何创建这个函数，或者甚至可以不编辑 GObject 的标准化库。我在想我可以通过简单地在 GObject 中创建一个空的 setFilled 函数来处理这个错误，但据我所知，进入标准化库并随意进行更改通常是一个坏主意，并且进行更改的正确方法应该是扩展/重载根据需要从子类中。无论如何，我的编译器陷入僵局，所以我对想法持开放态度，谢谢。

PS/Nonrelevant Question 为什么标题框中禁止使用“问题”一词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:55:12.777

改为为 GFillable 接口编写它，因为这是由您所追求的形状实现的。[http://jtf.acm.org/javadoc/complete/acm/graphics/GFillable.html](http://jtf.acm.org/javadoc/complete/acm/graphics/GFillable.html)

# oracle - 以 'table of varchar 和 sys_refcursor 作为参数的动态过程执行

> ID：13372747
> 
> 赞同：0
> 
> 时间：2012-11-14T03:50:25.253
> 
> 标签：oracle, plsql, oracle11g

尝试使用 DBMS_SQL 动态执行一个过程，该过程使用以下代码将 'table of varchar' 和 sys_refcursor 作为参数：

```
 DECLARE
   TYPE CriteriaMap IS TABLE OF VARCHAR (100)
                          INDEX BY VARCHAR2 (100);

   o_cursor             SYS_REFCURSOR;
   v_cid                INTEGER;
   v_dummy              INTEGER;
   v_date_to_run        DATE := SYSDATE;
   v_sql_execute_proc   VARCHAR2 (1024);
   v_filter_criteria    CriteriaMap;
BEGIN
   v_sql_execute_proc :=
      'begin MY_PROCEDURE(:v_date_to_run, :filter_criteria, :o_cursor); end;';
   v_cid := DBMS_SQL.open_cursor;
   DBMS_SQL.parse (v_cid, v_sql_execute_proc, DBMS_SQL.native);
   DBMS_SQL.bind_variable (v_cid, 'v_date_to_run', v_date_to_run);
   DBMS_SQL.bind_variable (v_cid, 'filter_criteria', v_filter_criteria);
   DBMS_SQL.bind_variable (v_cid, 'o_cursor', o_cursor);
   v_dummy := DBMS_SQL.execute (v_cid);
   DBMS_SQL.close_cursor (v_cid);
END; 
```

结果引发以下错误

```
Error report:
ORA-06550: line 14, column 3:
PLS-00306: wrong number or types of arguments in call to 'BIND_VARIABLE' 
```

文档[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sql.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sql.htm)说 BIND_VARIABLE 只采用有限数量的数据类型，并且“varchar 表”和 sys_refcursor 不在列表中。

是否有任何解决方法可以将参数传递给列表中没有数据类型的动态函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T09:44:45.533

我知道它很旧......但如果有人遇到这个 - 可以（在 11g 中，不确定之前）将 sys ref 光标转换为光标编号，绑定它，然后在执行后将其转换为 refcursor -就像是：

```
declare
   vSQL varchar2(1000) := 'declare 
                              v_rc sys_refcursor;
                           begin 
                              open v_rc for select ''this is a test'' from dual;
                              :v_cursor_number := dbms_sql.to_cursor_number(v_rc);
                           end;';
   v_rc sys_refcursor;
   v_cursor_number   NUMBER;
   v_cur number;
   v_result number;

   vFetchValue varchar2(20);
begin
   --open the cursor
   v_cur := DBMS_SQL.OPEN_CURSOR;
   --parse
   DBMS_SQL.PARSE(v_cur, vSQL, dbms_sql.native);
   --bind the cursor number
   DBMS_SQL.BIND_VARIABLE(v_cur, 'v_cursor_number', v_cursor_number);
   --execute
   v_result := DBMS_SQL.EXECUTE(v_cur);
   -- get back the value of the bind cursor number
   DBMS_SQL.VARIABLE_VALUE(v_cur,'v_cursor_number', v_cursor_number);
   --transform it to a standard sys_refcursor
   v_rc := DBMS_SQL.TO_REFCURSOR (v_cursor_number);
   --close the cursor
   DBMS_SQL.CLOSE_CURSOR(v_cur);

   fetch v_rc into vFetchValue;
   close v_rc;
   dbms_output.put_line(vFetchValue);

end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:11:24.667

varchar 表是通过 bind_array 支持的（尽管它必须符合 dbms_sql 中的规范，该规范由整数而不是 varchar2 索引）。

您能详细解释一下为什么在这种情况下使用动态 SQL 吗？因为您的示例不保证动态 SQL，因为调用的结构在这里是固定的。

# visual-c++ - 使用反余弦函数尝试输出 3 个不同数量的百分比的百分比错误

> ID：13372749
> 
> 赞同：-1
> 
> 时间：2012-11-14T03:50:36.163
> 
> 标签：visual-c++

我对所有这些都进行了编码，但它不会输出我的任何百分比错误我不太确定将百分比放在哪里？假设输出 3 个不同的数字，但由于此错误，我什至无法输出，我不知道我尝试将所有内容更改为浮点数和整数，但 % 的错误消息正在重载函数？

```
double dRandom()
{
    return double(rand()/RAND_MAX); 
}

int main()
{
    int loop_count=100, count=0;

    int result=0; 
    float x=dRandom(); 
    double y=dRandom(); 
    float arccos (float x);
    float function=0; 
    srand(time(NULL)); 

    for(int i=1; i<4;++i) 
    { 
        for (int k=1; k<= loop_count; ++k) 
        { 
            function= (x* arccos(x)-sqrt(1- pow(x,2)))%RAND_MAX;//this line is where i'm not sure how to add the percent sign in correctly 
        }  
    } 

    if(x<y)  
        cout<<result; 

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:15:28.957

如果你想要百分比，它应该是这样的：function=(x* arccos(x)-sqrt(1- pow(x,2)))/RAND_MAX*100;

它应该是你想要的东西。

# asp.net - 停止运行 Flash 文件超过一次

> ID：13372751
> 
> 赞同：2
> 
> 时间：2012-11-14T03:50:59.807
> 
> 标签：asp.net, flash

我正在使用 Flash 模板创建网站。我有一个带有 Flash 标题和 Flash 菜单的母版页。当我的主页运行时，flash header 运行。flash 文件应该只运行一次，但每次单击菜单项时它都会运行。我尝试使用更新面板，但我不知道如何设置更新模式，因为我的菜单正在使用闪存。知道我应该使用什么吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:59:02.190

在客户端中存储一些数据，表明他们以前查看过闪存。当您执行您的闪存文件时，请检查此数据是否存在，并做出相应的反应。您可能想在[http://www.flash-db.com/Tutorials/saving/](http://www.flash-db.com/Tutorials/saving/)上了解如何保存数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T06:29:37.453

您可以使用本地存储，如下[所示](http://drawlogic.com/2008/01/10/howto-sharedobjects-for-local-storage-as3/)：

写成：

```
import flash.net.SharedObject;
var so:SharedObject = SharedObject.getLocal("userData");
so.data.isUsed= "true";
so.flush(); // writes changes to disk 
```

读为：

```
import flash.net.SharedObject;
var so:SharedObject = SharedObject.getLocal("userData");
var isUsed = so.data.isUsed; 
```

* * *

如果它是一个网站页面，您还可以使用[ExternalInterface.addCallback](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29)添加一个可以从 javascript 调用的函数。

# c++ - 动态创建新对象的最佳方法

> ID：13372753
> 
> 赞同：1
> 
> 时间：2012-11-14T03:51:10.283
> 
> 标签：c++, vector, dynamic-data

我正在寻找一种在程序运行时动态创建新类对象的方法。到目前为止，我所阅读的内容让我相信这并不容易，并且通常保留用于更高级的程序要求。

到目前为止，我尝试过的是：

```
// create a vector of type class
vector<class_name> vect;

// and use push_back (method 1)
vect.push_back(*new Object);

//or use for loop and [] operator (method 2)
vect[i] = *new Object; 
```

这些都不会从编译器中抛出错误，但我正在使用 ifstream 从文件中读取数据并动态创建对象......读取的文件正在接收一些奇怪的数据并偶尔读取内存地址，这对我来说很明显这是由于我使用/误用了上面的代码片段。

文件读取代码如下：

```
// in main
ifstream fileIn
fileIn.open( fileName.c_str() );

// passes to a separate function along w/ vector
loadObjects (fileIn, vect);

void loadObjects (ifstream& is, vector<class_name>& Object) {
    int data1, data2, data3;
    int count = 0;
    string line;

    if( is.good() ){
        for (int i = 0; i < 4; i++) {    
            is >> data1 >> data2 >> data3;
            if (data1 == 0) {
                vect.push_back(*new Object(data2, data3) )
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T03:55:24.173

```
vector<Object> vect;
vect.push_back(Object()); // or vect.emplace_back(); 
```

而已。这是正确的方法，期间。您描述的从文件中读取对象的任何问题都是另一回事，我们需要查看该代码以帮助您找出问题所在。

如果您需要多态性，请使用智能指针：

```
vector<unique_ptr<Base>> vect;
vect.emplace_back(new Derived); 
```

如果由于某种原因，您无法使用智能指针，那么老式的、容易出错的方法是这样的：

```
vector<Base *> vect;
vect.push_back(new Derived);
....
for (int i=0; i<vect.size(); ++i)
{
    delete vect[i];
    vect[i] = NULL;
} 
```

当然，这不是例外安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T03:55:10.110

```
vector<classType> vect; 
```

声明了包含 类型的向量容器`classType`，但是您正在添加`a pointer to classType`到 vect 中，这确实会使编译器不高兴。

如果您需要`polymorphism`在向量容器中显示对象，则需要存储指向对象的指针，将您的 vect 类型更改为：

```
vector<std::shared_ptr<classType> > vect; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T04:00:32.447

如果您绝对必须使用指针（您的对象在内部存储大型数据集），那么您应该将代码更改为：

```
// create a vector of type class
vector<class*> vect;

// and use push_back (method 1)
vect.push_back(new Object);

//or use for loop and [] operator (method 2)
vect[i] = new Object; 
```

请记住，您将不得不`delete`在某些时候使用您的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T03:55:45.187

声明动态对象使用以下格式：

```
TypeName * Name = new TypeName 
```

你的向量有点快，你需要做的是创建一个对象类的新对象，然后将它推入向量。

```
Object * MyObj = new Object //allocate space for new object
vect.push_back(MyObj) //push back new object 
```

请记住删除您分配的任何内容，这意味着在最后循环遍历每个元素以删除其成员：

```
for(int i = 0; i < vectLen; i++) //probably will be replaced with iterators for vectors
{
    delete vect[i];
} 
```

**[在此处](http://www.cs.fsu.edu/~myers/cgs4406/notes/dma.html)更深入地阅读动态分配**

# c++ - 异常的服务器行为与套接字

> ID：13372758
> 
> 赞同：0
> 
> 时间：2012-11-14T03:52:28.890
> 
> 标签：c++, c, serversocket

在编写我的服务器代码时，我有这一行：

```
newsockfd =  accept(sockfd, (struct sockaddr *)&cli_addr, &clilen); 
```

当我运行程序时，我没有收到任何错误，但程序只是冻结了，我在第一行放置了一个打印语句`main()`（因此它应该在任何运行之前运行）但打印语句永远不会被执行。

这行代码绝对是问题所在，因为一旦我将其注释掉，我的打印语句就会起作用。

什么会造成这种奇怪的行为？
（我不允许发布作业代码，所以很遗憾我不能全部发布）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:02:47.720

由于这显然是答案，我将在此处写下它：如果您的`printf`格式字符串不以“ `\n`”结尾，那么它们将被缓冲，直到您打印换行符或您的程序退出。（我正在简化一点。）由于您的`accept`调用在该输出被缓冲后停止了您的程序，因此即使`printf`调用工作正常，您也看不到输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:38:01.223

您的另一个选择是`fflush()`，`stdout`这将强制它“打印”任何缓冲的内容，而不管`'\n'`：

```
printf("print this now!");
fflush(stdout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T03:55:53.657

它正在等待连接。这就是`accept`函数的目的。

# ruby - 如何使用 Ruby 关闭 PDF 文件？

> ID：13372760
> 
> 赞同：1
> 
> 时间：2012-11-14T03:52:48.207
> 
> 标签：ruby, windows, pdf

我一直在研究**[Vanilla](http://github.com/adhithyan15/vanilla)**，一个 LaTex 预处理器。我和大多数人打开他们的 PDF 文件，看看他们的输出是什么样子。但有时，我们忘记在再次开始编译过程之前将其关闭。如果 PDF 文件已打开，则 LaTex 编译器会抱怨它无法写入该文件。所以我想向预处理器添加代码，它将查看输出 PDF 文件是否打开，如果 PDF 文件打开，它将关闭它。我一直在到处寻找如何去做。我不是 Ruby 方面的专家。**我不想杀死 Acrobat32.exe 或用于查看该文件的任何其他 PDF 查看程序的整个进程，因为用户可能在同一程序中打开了其他 PDF。**我只需要一种方法来终止该 PDF 文件的进程。那么任何人都可以建议我一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:58:16.430

难道你不能先移动旧文件，如果可能的话将其删除，然后用你想要的名称生成同一个 PDF 的新版本？

# c++ - 我如何处理算术溢出？

> ID：13372762
> 
> 赞同：3
> 
> 时间：2012-11-14T03:52:58.550
> 
> 标签：c++, overflow, arithmetic-expressions

我试图弄清楚如何处理两个非常大的整数的加法、减法、乘法和除法溢出。任何反馈/输入将不胜感激。有谁知道我可以咨询的任何算法和/或来源？

（我在发布之前做过研究，只是不知道如何解决这个问题）

编辑：对于两个非常大的整数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:52:15.640

如果要避免发生溢出的情况，一种方法是使用链表存储数字的部分，然后对部分进行单独计算，并在需要时将更多节点添加到列表中以处理多余的数字。

例子

1234567890 可以存储为 -> 12,34,56,78,90 相乘，每个单元将相乘并转移到下一个单元 -> 1,23,45,67,89,0

但请记住，将其划分为个位数单位更容易，例如 1,2,3,4,5 而不是 1,23,45，因为这会使操作更简单。

编辑::“句柄”这个词不是你应该使用的词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:42:59.123

这似乎类似于 [检查算术运算中的溢出条件](https://stackoverflow.com/questions/7932340/check-for-overflow-condition-in-an-arithmetic-operation) 和 [如何检测整数溢出的问题？](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:41:59.980

因为一个整数除以一个整数很少是整数，这通常是不可能的。

也就是说，这就是我认为你想要的：http: [//gmplib.org/](http://gmplib.org/)

它处理任意大小的整数和有理数。

# ipad - 如何将存储在 filder 中的本地网站（我的 PC 上的目录）转换为 .webarchive 文件？

> ID：13372772
> 
> 赞同：0
> 
> 时间：2012-11-14T03:55:05.843
> 
> 标签：ipad, webarchive

我的本地硬盘上有一个完整的网站 html、css、图像、javascript 和视频，所有这些都包含在一个文件夹中。

该网站在我的 PC 上运行良好，但我需要将其传输到 iPad，我认为这应该很容易......好吧，这不是因为我不能像在我的 PC 上一样复制网站并运行它。

所以我的下一步是尝试制作该网站的 .webarchive，但由于它有很多 jquery 和视频文件，我不能只使用 safari，因为它不会包含任何视频文件等等。

希望有人知道将文件夹转换为网络存档的工具或方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:47:59.317

只需通过 safari 打开网站，然后另存为... web 存档。我目前未解决的问题正好相反。

# java - Servlet处理文件上传，为什么比原来大？

> ID：13372775
> 
> 赞同：5
> 
> 时间：2012-11-14T03:55:14.723
> 
> 标签：java, servlets, file-upload

Servlet doPost 处理文件上传，

```
 InputStream in = req.getInputStream();

    File file = new File("c:/8.dat");
    OutputStream out = new FileOutputStream(file);
    byte[] buffer = new byte[1024];

    int len =0;
    while((len=in.read(buffer))!=-1){
        out.write(buffer, 0, len);
    }
    bao.close();
    out.close();
    in.close(); 
```

Dose Request 的 getInputStream 方法获取http头信息？

为什么上传的文件比原来的大？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T14:21:56.153

在 HTTP 请求中发送文件通常使用`multipart/form-data`编码完成。这使服务器能够在单个请求中区分多个表单数据部分（否则将无法在单个请求中发送多个文件和/或输入字段）。每个部分由一个边界分隔，并且前面是表单数据标题。整个请求正文大致如下所示（以一个示例表单为例，其中包含 3 个普通`<input type="text">`字段，名称为`name1`，`name2`并且`name3`具有值`value1`，`value2`并已`value3`填充）：

```
--SOME_BOUNDARY
content-disposition: form-data;name="name1"
content-type: text/plain;charset=UTF-8

value1
--SOME_BOUNDARY
content-disposition: form-data;name="name2"
content-type: text/plain;charset=UTF-8

value2
--SOME_BOUNDARY
content-disposition: form-data;name="name3"
content-type: text/plain;charset=UTF-8

value3
--SOME_BOUNDARY-- 
```

使用名称为单个`<input type="file">`字段`file1`的整个请求正文如下所示：

```
--SOME_BOUNDARY
content-disposition: form-data;name="file1";filename="some.ext"
content-type: application/octet-stream

binary file content here
--SOME_BOUNDARY-- 
```

因此，这基本上就是您正在阅读的内容`request.getInputStream()`。您应该从请求正文中解析二进制文件内容。正是这个边界和表单数据标题使您上传的文件看起来更大（实际上也损坏了）。如果您使用的是 servlet 3.0，则应该使用它`request.getPart()`来获取唯一的文件内容。

```
InputStream content = request.getPart("file1").getInputStream();
// ... 
```

如果您仍在使用 servlet 2.5 或更早版本，那么您可以使用 Apache Commons FileUpload 来解析它。

### 也可以看看：

*   [如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

# macos - 在 OSX 10.8 中，如何将子视图限制为与其父视图相同的大小

> ID：13372778
> 
> 赞同：9
> 
> 时间：2012-11-14T03:55:33.470
> 
> 标签：macos, cocoa, constraints, nsview

我在具有单个 NSView 的新应用程序中创建了默认 NSWindow。然后我创建一个新的 NSViewController，它有自己的 XIB 和一个视图。在应用程序委托中，我做了显而易见的事情

```
self.mainViewController = [[MainViewController alloc] initWithNibName:@"MainViewController" bundle:nil];
[self.window.contentView addSubview:self.mainViewController.view];
self.mainViewController.view.frame = ((NSView*)self.window.contentView).bounds; 
```

好的，我如何以新的方式设置约束以使我的子视图保持其大小与窗口相同，即它的超级视图。它似乎不会自动工作。两个视图的 Autoresizessubviews 都打开。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T19:41:25.257

基本上，您需要限制四件事：

1.  您的子视图到其父视图的**前导空间**为零
2.  您的子视图与其父视图的**顶部空间**为零
3.  子视图的**宽度**等于其父视图的宽度
4.  子视图的**高度**等于其父视图的宽度

如果视觉约束不适合您，您可以在代码中单独构建这四个约束。使用该方法[`+constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier: constant:`](https://developer.apple.com/library/mac/documentation/AppKit/Reference/NSLayoutConstraint_Class/NSLayoutConstraint/NSLayoutConstraint.html#//apple_ref/doc/uid/TP40010628-CH1-SW18)指定不同视图属性之间的确切关系。例如，上面的约束 #1 可以表示为：

```
[NSLayoutConstraint constraintWithItem:mySubview
                             attribute:NSLayoutAttributeLeading
                             relatedBy:NSLayoutRelationEqual
                                toItem:mySuperview
                             attribute:NSLayoutAttributeLeading
                            multiplier:1.0f
                              constant:0.0f] 
```

#3 可能是：

```
[NSLayoutConstraint constraintWithItem:mySubview
                             attribute:NSLayoutAttributeWidth
                             relatedBy:NSLayoutRelationEqual
                                toItem:mySuperview
                             attribute:NSLayoutAttributeWidth
                            multiplier:1.0f
                              constant:0.0f] 
```

一旦你建立了这四个约束，你可以根据需要将它们添加到你的超级视图中。

请注意，有多种方法可以达到与上述相同的效果：

*   您可能会限制**尾随空间**和**底部空间**而不是宽度和高度
*   您可能会限制**中心 X**和**中心 Y**而不是前导和顶部空间

您也可以在视觉表示中提出相同的约束，如 Peter Hosey 的回答。例如，等宽约束可能看起来像`@"[mySubview(==mySuperview)]"`适当的视图字典。

请记住，[Auto Layout Guide](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-DontLinkElementID_2)包含大量有关约束的信息，包括在出现问题时如何调试它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T18:34:43.643

在 nib 编辑器中，拖动子视图的大小，直到它与其父视图的大小相同。Xcode 会自动创建一个合适的宽度约束。

在代码中，我会尝试`|-0-[mySubview]-0-|`（改编自[约束语法文档](http://developer.apple.com/library/mac/documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html#//apple_ref/doc/uid/TP40010853-CH3-SW11)中的示例）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T19:59:33.197

就像彼得写的那样，你应该使用可视化格式语言。

但是，这样做时，顺序很重要：创建约束时，它引用的所有视图都必须是同一视图层次结构的一部分。

因此，鉴于您的示例，代码必须变为：

```
self.mainViewController = [[MainViewController alloc] initWithNibName:@"MainViewContoller" bundle:nil];
NSView *containerView = self.window.contentView;
NSView *contentView = self.mainViewController.view;
[contentView setTranslatesAutoresizingMaskIntoConstraints: NO];
[containerView addSubview:contentView];

NSDictionary *viewBindings = NSDictionaryOfVariableBindings(contentView);
[containerView addConstraints: [NSLayoutConstraint constraintsWithVisualFormat:@"H:|[contentView]|" options:0 metrics:nil views:viewBindings]];
[containerView addConstraints: [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[contentView]|" options:0 metrics:nil views:viewBindings]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-15T12:43:06.363

如果您可以使用 3rd 方库，您可以使用[ReactiveCocoaLayout](https://github.com/ReactiveCocoa/ReactiveCocoaLayout)在一行中完成此操作：

```
RAC(view,rcl_frame) = parentView.rcl_frameSignal; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T19:06:49.403

您可以覆盖 setContentView:、contentView: 和 contentRectForFrameRect:，以便它们处理 window.frame 大小的视图。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-11-02T20:26:01.173

我遇到了同样的问题，我最终得到了这个与 SDK 10.10 配合使用的解决方案。只需将`autoresizingMask`新视图的 设置为与父窗口相同即可。只有一行代码，它就像一个魅力......

```
self.masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];

[self.window.contentView addSubview:self.masterViewController.view];
self.masterViewController.view.frame = ((NSView *)self.window.contentView).bounds;
self.masterViewController.view.autoresizingMask = ((NSView *)self.window.contentView).autoresizingMask; 
```

# perl - Perl中按长度排序

> ID：13372784
> 
> 赞同：4
> 
> 时间：2012-11-14T03:55:59.030
> 
> 标签：perl, sorting

有人知道如何按长度对数字进行排序吗？

例如：（11,111,122,12,2,13,21,15,211,22,213,2004）

我希望排序后的数组是：

```
11
12
13
15
111
122
2
21
22
213
2004年
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T04:10:19.757

所需的输出似乎表明您不只是想按位数排序，而是先按第一个数字排序，然后按长度排序。

您显示的所需输出省略了`211`，所以我只是根据我的理解将它放在它所属的位置。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Test::More;

my @source = (11, 111, 122, 12, 2, 13, 21, 15, 211, 22, 213, 2004);
my @desired = (11, 12, 13, 15, 111, 122, 2, 21, 22, 211, 213, 2004);

my @sorted =sort {
    substr($a, 0, 1) <=> substr($b, 0, 1) ||
    length($a) <=> length($b) || 
    $a <=> $b # thanks @ikegami
} @source;

is_deeply(\@sorted, \@desired, 'Sorted and desired are the same'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T04:24:48.620

```
my @sorted =
   sort { substr($a,0,1) <=> substr($b,0,1) || $a <=> $b }
    @unsorted; 
```

给出您要求的订单。或者，也许你想要

```
my @sorted =
   sort {  substr($a,0,1) <=> substr($b,0,1)
        || length($a) <=> length($b)
        || $a <=> $b }
   @unsorted; 
```

如果`211`您提供的输出中没有遗漏，我可以告诉您您想要哪一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T12:22:16.290

考虑一个所谓的[Schwartzian 变换](https://en.wikipedia.org/wiki/Schwartzian_transform)，它通过临时将排序键与输入项关联来避免重新计算排序键：

```
my @sorted =
    map { $_->[0] }
    sort { $a->[1] cmp $b->[1] or $a->[0] <=> $b->[0] }
    map { [ $_ => sprintf "%.1s%08x", $_, length ] }
    @source; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T12:14:52.857

这是由`List::UtilsBy::sort_by`

```
use List::UtilsBy qw( sort_by );

my @sorted = sort_by { sprintf "%.1s%08x", $_, length } @source; 
```

它与其他人建议的 Schwartzian Transform 解决方案大致相同，但包含在一个简洁的抽象中。

# xaml - 适用于 Surface 的 Windows Store APP 的翻页应用程序，滚动视图无法正常工作

> ID：13372786
> 
> 赞同：3
> 
> 时间：2012-11-14T03:56:16.457
> 
> 标签：xaml, windows-store-apps, scrollview, page-flipping

我们正在为我们出版物的电子版开发一个 PageFlip 应用程序。我们使用了类似的东西（这不是确切的代码）

```
<FlipView>
   <FlipViewItem>
      <scrollView>
         <Image>
      </scrollView>
  </FlipViewItem>
  <FlipViewItem>
      <scrollView>
         <Image>
      </scrollView>
  </FlipViewItem>
</FlipView> 
```

但问题是，当图像被缩放并且图像的一半不可见时，如果我尝试滑动查看图像的右侧部分，它会弹回左侧部分。一旦我的手指离开屏幕，它就会返回到以前的位置。有没有人知道它为什么会发生。用户应该能够翻阅和放大/缩小页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T23:52:10.497

我知道这是一个迟到的回应，但我遇到了同样的问题。您需要`HorizontalScrollBarVisibility = "Auto"`在`ScrollViewer`.

# git - 我无法在 Windows 7 中推送到我的新远程服务器 GIT

> ID：13372789
> 
> 赞同：1
> 
> 时间：2012-11-14T03:56:22.680
> 
> 标签：git, ssh

我在 Win7 上用 WinSSH 持有的 SSHD 创建了一台 Git 服务器，

我在那里用语法构建了远程 git

```
ssh user@128.21.33.5
cd GitRepo/GitCRM/
git --bare init
exit 
```

我可以用语法做 scp

```
scp myFile user@128.21.33.5:GitRepo/GitCRM/ 
```

但这样做时我总是失败：

```
git push user@128.21.33.5:GitRepo/GitCRM/ master 
```

错误信息是：

```
fatal : ''GitRepo/GitCRM/'' does not appear to be a git repository
fatal : the remote end hung up enexpectedly 
```

我应该解决什么问题？

==更新==我在openSSH中安装cygwin作为我的新SSH服务器并且一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:09:04.520

即使 ssh 连接到您的 HOME，git 可能仍需要完整路径：

```
git push user@128.21.33.5/home/YourLogin/GitRepo/GitCRM/ master 
```

（你在`GitCRM`这里使用是对的，不是`GitCRM.git`：因为你已经在其中创建了一个裸仓库`GitCRM/`，所以该目录是它自己的' `.git`'）

* * *

关于 SSH 服务器，[OP kreamik](https://stackoverflow.com/users/1099057/kreamik)使用了带有 Cygwin 的 OpenSSH，比 WinSSH 更容易设置。

# c - 客户端套接字不会在聊天客户端中使用 socket() 函数打开

> ID：13372794
> 
> 赞同：0
> 
> 时间：2012-11-14T03:56:41.877
> 
> 标签：c, linux, sockets, client, chat

所以这是一项正在进行的工作，但是当我运行命令时： ./server 4444 并从不同的终端窗口 ./client localhost 4444

客户端在“打开套接字时出错”处停止。我不知道为什么，任何建议将不胜感激。我完全知道这段代码有问题且不完整，但是如果不先让我的客户端和服务器正确连接，我就无法继续前进。

这是我的代码：

客户端.c

```
#include "../lib/sockettalk.h"
#include "../lib/my.h"
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netdb.h>
#include <string.h>
#include <stdio.h>

//#define MAX_SIZE=255

int main(int argc, char **argv)
{
int sockfd = socket(AF_INET, SOCK_STREAM, 0);//only need one socket since you are the only one connecting
int n;
char buffer[MAX_SIZE];
struct sockaddr_in serv_addr;
struct hostent *server;
int portnum = atoi(argv[2]);
if(argc < 3)
{
    printf("Check your arguments.");
    exit(0);
}

//printf("%d", portnum);
if(portnum < 2000 || portnum > 65535)//must be greater than 5000 to avoid conflictin ports
{
    printf("Error, port number is out of bounds. Must be >2000 AND <65535.");
    printf("Please enter a valid port number next time.");
    exit(0);
}

if(sockfd < 0);
    printf("Error opening socket. \n");
else
    printf("Opened socket directly. \n");

if((server = gethostbyname(argv[1])) == 0)
{
    printf("Error, no host. \n");
    exit(0);
}

//memset(&serv_addr, '0', sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
serv_addr.sin_port = htonl(portnum); 

if((connect(sockfd, (struct sockaddr*)&serv_addr, sizeof(serv_addr))) < 0)
{
    printf("Error connecting. \n");

}

while(1)
{
    //clear and write a message
    memset(buffer, '0', sizeof(buffer));
    if((n = write(sockfd, buffer, my_strlen(buffer))) < 0)
    {
        printf("Error writing to server. \n");
        exit(1);
    }
    printf("Client: ");
    printf("%s", buffer);
    printf(" \n");

    //clear and read
    memset(buffer, '0', sizeof(buffer));
    if((n = read(sockfd, buffer, MAX_SIZE)) < 0)
    {
        printf("Error reading from server. \n");
        exit(1);
    }
    printf("Server: ");
    printf("%s", buffer);
    printf(" \n");
}
return 0;
} 
```

服务器.c

```
#include "../lib/my.h"
#include "../lib/sockettalk.h"
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <string.h>
#include <stdio.h>

int main(int argc, char **argv)
{
int port = atoi(argv[1]);
int pid;
int n; //to read and write 
char buffer[MAX_BUFFER_SIZE];
int sockfd = socket(AF_INET, SOCK_STREAM, 0);
int newsockfd;
int clilen; //to be used in accept step as a dummy, need size of bytes
struct sockaddr_in cli_addr, serv_addr;
memset(&serv_addr, 0, sizeof(serv_addr));

if (sockfd<0)
    printf("Problem openning socket.\n");
else
{
    printf("Openned socket successfully.\n");
}

serv_addr.sin_family = AF_INET;  //address family
serv_addr.sin_port = port; //IP port
serv_addr.sin_addr.s_addr = htonl(INADDR_ANY); //IP address, INADDR_ANY allows program to work without knowing the IP address of machine it is running on.

if(bind(sockfd, (struct sockaddr*)&serv_addr, sizeof(serv_addr)) < 0)//assigns a name to a socket. we must also cast serv_addr to a pointer to a struct socketDDR
{   
    printf("Error binding socket. \n");
    exit(1);
}
else
{
    printf("Bound socket successfully. \n");
}

if(listen(sockfd, 5) < 0) //should be an already bound socket. 5 is the number of clients that can connect at once
{
    printf("Error listning.\n");
    exit(1);
}

while(1) //place into loop so that process can repeat for every new connection
{
//now a newsockfd needs to be created so that it gives every new client a unique identifir
    newsockfd = accept(sockfd,(struct sockaddr*) &cli_addr, &clilen);
    if(newsockfd < 0)
    {
        printf("Error accepting\n");
        exit(1);
    }
    else
    {
        printf("Client is connected.\n");
    }

    if ((pid = fork()) < 0) //problem
    {
        printf("Error forking. \n");
        exit(1);
    }
    else if(pid == 0) //forking is sucessful, is a child
    {
        close(sockfd); //closes from the child side
        while(1)
        {
            memset(buffer, 0, sizeof(buffer));
            n = read(newsockfd, buffer, MAX_BUFFER_SIZE);
            if (n < 0)
            {
                printf("Error reading from client.\n");
                exit(1);
            }
            printf("%s", buffer);
            printf("\n");

            memset(buffer, 0, sizeof(buffer));
            fgets(buffer, 254, stdin);
            n = write(newsockfd, buffer, strlen(buffer));
            if(n < 0)
            {
                printf("Error writing to client.\n");
                exit(1);
            }
            printf("Server: ");
            printf("%s", buffer);
            printf("\n");
        }
        close(sockfd);
    }       
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:14:43.900

在客户端中，您实际上并没有使用`server = gethostbyname(...)`任何地方的结果。事实上，你`serv_addr.sin_addr`没有初始化，所以你试图连接到一些随机的 IP 地址（可能是 0.0.0.0），这当然是失败的。

# php - 提交表单并重新加载页面后添加类名

> ID：13372796
> 
> 赞同：0
> 
> 时间：2012-11-14T03:56:51.320
> 
> 标签：php, forms

谁能帮我解决这个问题：

我正在尝试使用 jquery 添加类名/更改 div 的 css；在我点击表单上的提交后。意味着，在点击提交后，当页面重新加载时，这个类名/更改应该坚持到目标元素。我正在使用 php 来获取提交的表单的值。（没有ajax，但如有必要我可以修改我的代码）。我试图通过 jquery 来做到这一点，但是当页面重新加载时，更改就消失了！

谢谢。

**更新：**这是我正在处理的示例代码（so.php 本身）。提交表单并重新加载页面后；假设我想在输入中添加一个被点击的类并在 CSS 中管理样式：

```
<html>
<head>
</head>
<body>
<form id="myForm" action="so.php" method="get">
    <input name="Load" type="submit" value="Google" />
    <input name="Load" type="submit" value="MSN" />
    <input name="Load" type="submit" value="Yahoo" />
</form>     
<div id="container">
    <?php
        if (isset($_GET['Load'])) {
            $value = $_GET['Load'];
            echo "<iframe width=\"560\" height=\"349\" src=\"http://www.{$value}.com\"></iframe>";
        }
    ?>
</div>
</body>
</html> 
```

**update2：**我尝试了@NoPyGod 提供的逻辑，它奏效了。但事情就是这样。我正在尝试向选定的按钮添加一个类，并在提交表单并重新加载页面后使用单击的输入值或处于活动状态的输入值更新 id 为“hello”的 div 中的文本。这是我最终的结果，但是一旦提交表单，所有输入都具有相同的类名，并且 div 中的文本也不会更新。

```
<html>
<head>
<?php if (isset($_GET['Load'])): ?>
<script>
    $(document).ready(function() {
        $('#hello').text('Hello');
    });
</script>
<?php endif; ?>
</head>
<body>
<form id="myForm" action="so.php" method="get">
    <input class="<?php if (isset($_GET['Load'])) { echo "some_class"; } if (isset($_GET['Load1'])) { echo "some_class1"; }?>" name="Load" type="submit" value="Google" />
    <input class="<?php if (isset($_GET['Load'])) { echo "some_class"; } if (isset($_GET['Load1'])) { echo "some_class1"; }?>" name="Load1" type="submit" value="Rediff" />
    <input class="<?php if (isset($_GET['Load'])) { echo "some_class"; } if (isset($_GET['Load1'])) { echo "some_class1"; }?>" name="Load" type="submit" value="Yahoo" />
  <input class="<?php if (isset($_GET['Load'])) { echo "some_class"; } if (isset($_GET['Load1'])) { echo "some_class1"; }?>" name="Load1" type="submit" value="Sify" />
</form>

<div id="container" >
    <?php
        if (isset($_GET['Load'])) {
            $value = $_GET['Load'];
            echo "<iframe width=\"560\" height=\"349\" src=\"http://www.{$value}.com\"></iframe>";
        }
        if (isset($_GET['Load1'])) {
            $value = $_GET['Load1'];
            echo "<iframe width=\"560\" height=\"349\" src=\"http://www.{$value}.com\"></iframe>";
        }
    ?>
</div>

<div id="hello"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:59:12.330

提交页面时，像这样设置一个变量

```
$was_submitted = true; 
```

然后在你的 HTML 中做这样的事情

```
<div id="myid" class="<?php if ($was_submitted) { echo "some_class"; } ?>"> 
```

或者，如果您绝对坚持使用 jQuery 来更改它，请将其包含在您的 html 中——

```
<?php if ($was_submitted): ?>

<script>
    $(document).ready(function() {
        $("#myid").addClass("some_class");
    });
</script>

<?php endif; ?> 
```

更新：

```
<html>
<head>
</head>
<body>
<form id="myForm" action="so.php" method="get">
    <input name="Load" type="submit" value="Google" />
    <input name="Load" type="submit" value="MSN" />
    <input name="Load" type="submit" value="Yahoo" />
</form>

    <!-- I changed this line below -->

    <div id="container" class=<?php if (isset($_GET['Load'])) { echo "some_class"; } ?>>
    <?php
        if (isset($_GET['Load'])) {
            $value = $_GET['Load'];
            echo "<iframe width=\"560\" height=\"349\" src=\"http://www.{$value}.com\"></iframe>";
        }
    ?>
</div>
</body>
</html> 
```

# ruby-on-rails - 为用户模型设计登录注销太慢。管理员模式正常工作

> ID：13372797
> 
> 赞同：2
> 
> 时间：2012-11-14T03:56:54.250
> 
> 标签：ruby-on-rails, heroku, devise

我以前用过设计，在heroku上没有任何问题。它工作正常，但登录和注销功能真的很慢。大约需要 3 秒才能开始工作。

我从基本设置中唯一改变的是路径。我有一个用户表，所以我更改了成员的路径：

```
devise_for :users, :path => "member", :path_names => { :sign_in =>
    'login', :sign_out => 'logout', :password => 'secret', :confirmation
    => 'verification', :unlock => 'unblock', :registration => 'register', :sign_up => 'signup' } 
```

日志没有显示任何内容，但是当它花费太长时间时有时会给我一个错误：

```
Error R14 (Memory quota exceeded) 
```

管理员模型可以快速登录和注销。模型的不同之处在于：

```
admin
  devise :database_authenticatable, :recoverable, :trackable, :validatable, :timeoutable, :lockable

user
  devise :database_authenticatable, :recoverable, :trackable, :validatable, :rememberable, :confirmable, :registerable 
```

我尝试从用户中删除可记忆并且注销变得更快，但登录仍然非常慢。

我不知道如何给出细节，因为我认为我没有做任何其他不同的事情，但如果有其他事情可以帮助回答这个问题，我很乐意提供更多答案。

希望有人可以帮助我。

# php - 如何从 php 中的用户代理字符串中检测浏览器欺骗和机器人

> ID：13372799
> 
> 赞同：9
> 
> 时间：2012-11-14T03:57:15.517
> 
> 标签：php, user-agent, bots, spoof

到目前为止，我能够通过将这些字符串与已知的用户代理匹配来从用户代理字符串列表中检测机器人，但我想知道还有什么其他方法可以使用 php 来做到这一点，因为我使用这种方法检索的机器人比预期的要少。

我也在寻找如何检测浏览器或机器人是否使用用户代理字符串欺骗另一个浏览器。

任何建议表示赞赏。

编辑：这必须使用带有如下行的日志文件来完成：

129.173.129.168 - - [11/Oct/2011:00:00:05 -0300] "GET /cams/uni_ave2.jpg?time=1318302291289 HTTP/1.1" 200 20240 "http://faculty.dentistry.dal.ca /loanertracker/webcam.html" "Mozilla/5.0 (Macintosh; U; PPC Mac OS X 10.4; en-US; rv:1.9.2.23) Gecko/20110920 Firefox/3.6.23"

这意味着除了访问时间之外，我无法检查用户行为。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T04:09:22.483

In addition to filtering key words in the user agent string, I have had luck with putting a hidden honeypot link on all pages:

```
<a style="display:none" href="autocatch.php">A</a> 
```

Then in "autocatch.php" record the session (or IP address) as a bot. This link is invisible to users but it's hidden characteristic would hopefully not be realized by bots. Taking the style attribute out and putting it into a CSS file might help even more.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T11:51:30.750

Because, as previously stated, you can spoof user-agents & IP, these cannot be used for reliable bot detection.

I work for a security company and our bot detection algorithm look something like this:

1.  **Step 1 - Gathering data:**

    a. Cross-Check user-agent vs IP. (both need to be right)

    b. Check Header parameters (what is missing, what is the order and etc...)

    c. Check behavior (early access and compliance to robots.txt, general behavior, number of pages visited, visit rates and etc)

2.  **Step 2 - Classification:**

    By cross verifying the data, the bot is classified as "Good", "Bad" or "Suspicious"

3.  **Step 3 - Active Challenges:**

    Suspicious bots undergo the following challenges:

    a. JS Challenge (can it activate JS?)

    b. Cookie Challenge (can it accept coockies?)

    c. If still not conclusive -> CAPTCHA

This filtering mechanism is VERY effective but I don't really think it could be replicated by a single person or even an unspecialized provider (for one thing, challenges and bot DB needs to be constantly updated by security team).

We offer some sort of "do it yourself" tools in form of [Botopedia.org](http://www.Botopedia.org), our directory that can be used for IP/User-name cross-verification, but for truly efficient solution you will have to rely on specialized services.

There are several free bot monitoring solutions, including our own and most will use the same strategy I've described above (or similar).

GL

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T04:03:32.430

Beyond just comparing user agents, you would keep a log of activity and look for robot behavior. Often times this will include checking for /robots.txt and not loading images. Another trick is to ask the client if they have javascript since most bots won't mark it as enabled.

However, beware, you may well accidently get some people who are genuinely people.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T04:14:12.197

不，用户代理可以被欺骗，因此它们不被信任。

除了检查 Javascript 或图像/css 加载之外，您还可以测量页面加载速度，因为机器人通常会比任何人类访问者跳来跳去更快地抓取您的网站。但这仅适用于小型站点，在共享外部 IP 地址（大型公司或大学校园）后面有大量访问者的热门站点可能会以类似机器人的速度访问您的站点。

我想你也可以测量它们加载的顺序，因为机器人会以先到先得的爬行顺序爬行，因为人类用户通常不适合这种模式，但跟踪起来有点复杂

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T15:39:26.310

您的问题特别与使用用户代理字符串的检测有关。正如许多人所提到的，这可以被欺骗。

要了解欺骗的可能性以及检测它的难度，最好建议您使用 cURL 学习 PHP 中的艺术。

从本质上讲，使用 cURL 几乎可以在浏览器（客户端）请求中发送的所有内容都可以被欺骗，但 IP 是一个明显的例外，但即使在这里，一个确定的欺骗者也会将自己隐藏在代理服务器后面，以消除您检测到他们的 IP。

不用说，每次发出请求时使用相同的参数将能够检测到欺骗者，但是使用不同的参数轮换将使得在真正的流量日志中检测到任何欺骗者非常困难，如果不是不可能的话。

# ajax - 在 Firefox 插件页面脚本中加载 JSON 文件，包中的所有内容都在本地

> ID：13372801
> 
> 赞同：6
> 
> 时间：2012-11-14T03:57:23.360
> 
> 标签：ajax, json, firefox, firefox-addon, firefox-addon-sdk

我一直在使用 Addon SDK 开发一个 Firefox 扩展，并且需要加载一些存储在同一个包中的数据，作为一个单独的文件：“data.json”。它需要从页面脚本加载，即“loader.js”，它使用脚本 src 标签包含在“panel.html”中。

结构是这样的：

```
+data
 panel.html
 panel.js
 loader.js
 data.json
 ...
+lib  
 main.js
 ... 
```

panel.html 有：

```
<script type="text/javascript" src="loader.js"></script> 
```

最初，我们将数据作为“data.js”简单地存储到一个 js 文件中，并使用 script src 标签从“panel.html”中包含在内，它可以正常工作。但是，当我们将插件提交到 Mozilla 插件网站时，这被作为要修复的问题之一解决，说我们需要使用不可执行的格式，例如 JSON 文件以使其更安全。

现在问题似乎不允许“loader.js”向“data.json”发出 AJAX 请求。（使用 JQuery $.ajax() 调用返回没有成功，给出错误代码 0）所以我一直在考虑的解决方案是使用 SDK 的 request() 函数从“main.js”加载“data.json”并以某种方式将其传递给页面脚本“loader.js”。但这似乎很复杂，因为据我所知，数据需要首先发送到内容脚本，然后从那里发送到页面脚本。这需要在页面脚本加载时发生！我对此感到困惑，因为我不确定我是否缺少更实用的解决方案，或者我想要做的事情真的很复杂，只需将包中的本地 JSON 数据加载到本地页面脚本中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T03:36:30.503

这是一个关于探索和解决此问题的附加组件构建器的示例。

首先，您可以从数据中加载 json 文件并使用 self.data.load 对其进行解析：

```
let data = require('self').data;

let taps_data = JSON.parse(data.load('taps.json')); 
```

这是同步加载的，所以它不是你想要经常做的事情，在这个例子中，它只会在插件首先在浏览会话中激活时发生。

接下来，您将使用内容脚本和消息传递将数据传递到面板。

在 main.js 脚本中：

```
panel.on('show', function() {
    if (!loaded)
        panel.port.emit('taps-data', taps_data);
}); 
```

在内容脚本中：

```
self.port.on('taps-data', function(data) {
    $('#list').html('');
    data.forEach(function(item) {
        $('#list').append('<div>'+ item.name +'</div>');
    });
    self.port.emit('taps-loaded');
}); 
```

我做了一些额外的工作来确保我只发出一次数据。数据，仅供参考，是从[我本地 pub](http://live-menu.staugustinesvancouver.com/taps.json)的 live beer keg data api 中保存的。

# python - 使用 ElementTree 在 Python 中解析嵌套的 XML 数据

> ID：13372802
> 
> 赞同：1
> 
> 时间：2012-11-14T03:57:37.323
> 
> 标签：python, xml, elementtree

## 更新：寻求解决方案

这段代码：

```
tree = ET.parse(assetsfilename)
root = tree.getroot()
assets = {}

def find_rows(rowset, container):
    for row in rowset.findall("row"):
        singleton = int((row.get('singleton')))
        flag = int((row.get('flag')))
        quantity = int((row.get('quantity')))
        typeID = int((row.get('typeID')))
        locationID = int((row.get('locationID', '0')))
        itemID = int((row.get('itemID')))
        dkey = (singleton, flag, quantity, typeID, locationID, itemID)

        container[dkey] = {}
        child_rowset = row.find("rowset")
        if child_rowset is not None:
            find_rows(child_rowset, container[dkey])

first_rowset = root.find('.//rowset[@name="assets"]')
find_rows(first_rowset, assets)
#print singleton, flag, quantity, typeID, locationID, itemID
pp = pprint.PrettyPrinter(indent=4)
pp.pprint(assets) 
```

给出这个输出：

```
{   (0, 4, 1, 3317, 61000419, 1000913922710L): {   },
    (0, 4, 1, 6159, 60003463, 1007025519384L): {   },
    (0, 4, 1, 7669, 60000361, 1007215573625L): {   },
    (0, 4, 1, 23566, 61000419, 1000992661686L): {   },
    (1, 4, 1, 51, 60001345, 1004073218074L): {   },
    (1, 4, 1, 51, 60001345, 1004073218075L): {   },
    (1, 4, 1, 596, 60003337, 1007908184113L): {   (0, 5, 1, 34, 0, 1007908184132
L): {   },
                                                  (1, 27, 1, 3634, 0, 1007908184
129L): {   },
                                                  (1, 28, 1, 3651, 0, 1007908184
130L): {   }},
    (1, 4, 1, 3766, 61000419, 1000973178550L): {   (0, 5, 25, 16273, 0, 10009731
88870L): {   },
                                                   (1, 27, 1, 21096, 0, 10006872
93796L): {   }}} 
```

这基本上在我已经拥有的字典的末尾添加了一个嵌套字典，并用来自孩子的数据（如果存在）填充它。但是，理想情况下，父数据和子数据都在主字典中，并且字典末尾的额外字段将包含父项的 itemID（如果该行是子行）或为空（如果该项目是父行或没有任何子行的行。）

## 问题

我正在尝试将嵌套 .xml 文件中的数据读入某种字典，以便我可以以其他格式输出它（我目前的目标是 sqlite3 和一个 sqlite .db 文件，但这不是我的重点问题。）我可以读取所有主要级别的数据，但我不知道如何读取嵌套数据（如果存在）。

## 数据

这是一个示例 .xml 文件：

```
<?xml version='1.0' encoding='UTF-8'?>
<eveapi version="2">
  <currentTime>2012-11-14 03:26:35</currentTime>
  <result>
    <rowset name="assets" key="itemID" columns="itemID,locationID,typeID,quantity,flag,singleton">
      <row itemID="1007215573625" locationID="60000361" typeID="7669" quantity="1" flag="4" singleton="0" />
      <row itemID="1004073218074" locationID="60001345" typeID="51" quantity="1" flag="4" singleton="1" rawQuantity="-1" />
      <row itemID="1004073218075" locationID="60001345" typeID="51" quantity="1" flag="4" singleton="1" rawQuantity="-1" />
      <row itemID="1007908184113" locationID="60003337" typeID="596" quantity="1" flag="4" singleton="1" rawQuantity="-1">
        <rowset name="contents" key="itemID" columns="itemID,typeID,quantity,flag,singleton">
          <row itemID="1007908184129" typeID="3634" quantity="1" flag="27" singleton="1" rawQuantity="-1" />
          <row itemID="1007908184130" typeID="3651" quantity="1" flag="28" singleton="1" rawQuantity="-1" />
          <row itemID="1007908184132" typeID="34" quantity="1" flag="5" singleton="0" />
        </rowset>
      </row>
      <row itemID="1007025519384" locationID="60003463" typeID="6159" quantity="1" flag="4" singleton="0" />
      <row itemID="1000913922710" locationID="61000419" typeID="3317" quantity="1" flag="4" singleton="0" />
      <row itemID="1000973178550" locationID="61000419" typeID="3766" quantity="1" flag="4" singleton="1" rawQuantity="-1">
        <rowset name="contents" key="itemID" columns="itemID,typeID,quantity,flag,singleton">
          <row itemID="1000687293796" typeID="21096" quantity="1" flag="27" singleton="1" rawQuantity="-1" />
          <row itemID="1000973188870" typeID="16273" quantity="25" flag="5" singleton="0" />
        </rowset>
      </row>
      <row itemID="1000992661686" locationID="61000419" typeID="23566" quantity="1" flag="4" singleton="0" />
    </rowset>
  </result>
  <cachedUntil>2012-11-14 07:05:29</cachedUntil>
</eveapi> 
```

请注意，有些项目如何在其下嵌套子项目，但有些则没有，并且子项目（如果存在）的数量不固定（因此一个项目可以有 3 个孩子，另一个项目可以有 2 个孩子，而许多其他项目根本没有孩子。）

（对于那些好奇的人，这些数据来自名为 EVE Online 的在线游戏中提取的完整 id 密钥 Asset List API。）

## 我能得到什么

我可以得到这个代码：

```
import xml.etree.ElementTree as ET

tree = ET.parse(assetsfilename)
root = tree.getroot()

singleton = []
flag = []
quantity = []
typeID = []
locationID = []
itemID = []
assets = {}
for row in root.findall(".//*[@name='assets']/row"):
    singleton.append (int((row.get('singleton'))))
    flag.append (int((row.get('flag'))))
    quantity.append (int((row.get('quantity'))))
    typeID.append (int((row.get('typeID'))))
    locationID.append (int((row.get('locationID'))))
    itemID.append (int((row.get('itemID'))))
assets = zip(singleton, flag, quantity, typeID, locationID, itemID)
print singleton, flag, quantity, typeID, locationID, itemID
print assets 
```

在屏幕上输出：

```
[0, 1, 1, 1, 0, 0, 1, 0] [4, 4, 4, 4, 4, 4, 4, 4] [1, 1, 1, 1, 1, 1, 1, 1] [7669
, 51, 51, 596, 6159, 3317, 3766, 23566] [60000361, 60001345, 60001345, 60003337,
 60003463, 61000419, 61000419, 61000419] [1007215573625L, 1004073218074L, 100407
3218075L, 1007908184113L, 1007025519384L, 1000913922710L, 1000973178550L, 100099
2661686L]
[(0, 4, 1, 7669, 60000361, 1007215573625L), (1, 4, 1, 51, 60001345, 100407321807
4L), (1, 4, 1, 51, 60001345, 1004073218075L), (1, 4, 1, 596, 60003337, 100790818
4113L), (0, 4, 1, 6159, 60003463, 1007025519384L), (0, 4, 1, 3317, 61000419, 100
0913922710L), (1, 4, 1, 3766, 61000419, 1000973178550L), (0, 4, 1, 23566, 610004
19, 1000992661686L)] 
```

请注意这是如何读取所有开始的主要级别行`<row itemID=`但它没有获得嵌套行（我希望也以某种方式显示它与它上面的父 itemID 相关联。）

## 期望的输出

我对这里的建议持开放态度，但这是一种选择。我可以将主要级别的行解析为一个字典（就像我已经拥有的那样），然后创建另一个字典，其中包含来自子级别行的数据，并添加一个额外的片段，说明它是哪个 itemID 的子级。另一种选择是将子级别行中的数据添加到我已经可以制作的主字典中，然后添加一个额外的字段，例如`Null`或`None`对于没有父项并提供父项的 itemID 的项目确实有父项的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:14:02.793

这个片段（有点大）递归地将 xml 结构解析为嵌套字典，就像您描述的可能的解决方案一样。它适用于您提供的示例，但我认为它无论如何都适用于实时数据。如果没有别的，你可以使用这个想法。

**更新：**好的，这个更新的版本将 itemID 存储为键，并将 parent_id 添加为附加的 dict 属性，检查它是否是所需的行为：

```
import xml.etree.ElementTree as ET

from StringIO import StringIO
tree = ET.parse(StringIO(xml_data))
root = tree.getroot()

assets = {}

def find_rows(rowset, parent_id):
    for row in rowset.findall("row"):
        singleton = int((row.get('singleton')))
        flag = int((row.get('flag')))
        quantity = int((row.get('quantity')))
        typeID = int((row.get('typeID')))
        locationID = int((row.get('locationID', '0')))
        itemID = int((row.get('itemID')))

        assets[itemID] = {'singleton': singleton,
                          'flag': flag,
                          'quantity': quantity,
                          'typeID': typeID,
                          'locationID': locationID,
                          'parentID': parent_id}
        child_rowset = row.find("rowset")
        if child_rowset is not None:
            find_rows(child_rowset, itemID)

first_rowset = root.find('.//rowset[@name="assets"]')
find_rows(first_rowset, None) 
```

# java - 通过从 java 传递在 ZK 中获取价值

> ID：13372804
> 
> 赞同：3
> 
> 时间：2012-11-14T03:58:10.780
> 
> 标签：java, spreadsheet, zk

我无法获取从 ZK 电子表格 (http://www.zkoss.org) 文件中的 JAVA 代码传递的值。

这是我正在做的事情：

*   在 java 端，我调用 .zul 文件

    ```
    String filenames = "test.txt";
    htmlPane.setContentsURL("preview.zul?filename=" + filename); 
    ```

*   在 preview.zul 文件中

    < zk > < zscript >< ![CDATA[ System.out.println(execution.getArg().get("文件名")); ]] ></zscript>
    <zk>

结果为空

你能帮助如何编写正确的脚本吗？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:50:59.547

我认为您与 ZKOSS.org 论坛中所述的问题相同：[http ://www.zkoss.org/forum/listComment/6098](http://www.zkoss.org/forum/listComment/6098)

它可能适用于以下代码：

```
<zk xmlns="http://www.zkoss.org/2005/zul">
<window id="win">
    <zscript>

        import javax.servlet.http.HttpServletRequest;
        import org.zkoss.zk.ui.Executions;

        HttpServletRequest request = (HttpServletRequest) Executions.getCurrent().getNativeRequest();
        String info = request.getParameter("name");

    </zscript>

    <caption id="caption">${info}</caption>

   </window>
</zk> 
```

请测试并查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:57:43.740

您使用了错误的逗号。
Args 是用户设置的值，您要使用的是参数。
mtrs 解决方案应该可以工作，但不是必需的，因为 zk 有一个隐式对象参数。
看看[这个](http://books.zkoss.org/wiki/ZUML_Reference/EL_Expressions/Implicit_Objects/param)。
对于 Java 端使用：

```
String filename = Executions.getCurrent().getParameter("filename"); 
```

# servicestack - servicestack.text 格式化缩进 json

> ID：13372807
> 
> 赞同：8
> 
> 时间：2012-11-14T03:58:23.260
> 
> 标签：servicestack

是否可以让 servicestack.text 生成格式化/缩进的 json？

我希望它将 json 写入文本文件。如果它已经被很好地格式化，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:22:17.267

检查[.Dump()](https://github.com/ServiceStack/ServiceStack.Text/blob/c9ae1446f883ed609abcffc0812e4706b3a30a1e/src/ServiceStack.Text/TypeSerializer.cs#L200 "。倾倒（）")扩展方法。应该是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-23T20:39:44.083

从 2017 年开始更新，来自[这个答案](https://stackoverflow.com/a/13757113/)：

> v4.5.5 提供的新`string.IndentJson()`扩展方法可以让您漂亮地打印 JSON，否则您可以为 Chrome 或 Firefox 安装漂亮的 JSONView 扩展程序以查看漂亮的 JSON，或者您可以将 JSON 粘贴到[jsonprettyprint.com](http://jsonprettyprint.com/)

# java - java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] 参数无效

> ID：13372809
> 
> 赞同：0
> 
> 时间：2012-11-14T03:58:43.573
> 
> 标签：java, sql, database

我遇到了一些从 MS Access 数据库获取信息的代码的错误。

这是我用来从数据库加载信息的 SQL 语句

```
SELECT * FROM tblIRPolicyInfromation WHERE (((StatusID)='I34C28AF3567FFE37B5FAB2FB73210DE1System201209031224')); 
```

这会产生以下错误

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Invalid argument. 
```

直接在 MS Access 中运行代码不会产生错误，而且表名太长。该错误使它看起来与 where 部分有关。不知道，虽然我在这方面可能完全错了。

# hashtable - 是否有安全的 p2p 分布式数据库？

> ID：13372811
> 
> 赞同：1
> 
> 时间：2012-11-14T03:59:03.850
> 
> 标签：hashtable, distributed, p2p, bittorrent

我正在寻找一个分布式哈希表来安全地存储和检索值。这些是我的要求：

*   它必须使用现有的流行 p2p 网络（我必须保证我的键/值将存储并保存在多个对等点中）。
*   除了我自己之外，没有人应该能够编辑或删除键/值。理想情况下，只有我有权访问的加密密钥才能编辑我的密钥值。
*   所有对等方都可以读取密钥值（只读访问，只有密钥持有者可以编辑该值）

有这样的p2p分布式哈希表吗？bittorrent 分布式哈希表能满足我的要求吗？

我在哪里可以找到文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:55:50.913

你不需要加密，你需要签名。

主线bittorrent DHT目前不允许任意key-value存储，只支持key -> IP:Port存储，其中IP固定为存储请求的发起者。另一方面，vuze DHT 确实支持二进制 blob 存储，在此之上您可以实现一些签名方案。

# c++ - 构造和初始化列表：编译器做什么？

> ID：13372814
> 
> 赞同：3
> 
> 时间：2012-11-14T03:59:45.927
> 
> 标签：c++, compiler-construction, constructor, c++11, standards-compliance

我对 C++ 中的构造函数有一些疑问。对于每个问题（从（1）到（4）），我想知道行为是否完全符合标准。

A）第一个是关于成员的初始化：

```
class Class
{
    public:
        Class() 
        : _x(0)
        , _y(_x)
        , _z(_y) // <- (1) Can I initialize a member with other members ?
        {
            ;
        }

    protected:
        int _x;
        int _y;
        int _z;
}; 
```

B) 编译器为每个类添加了哪些函数？

```
template<typename T> class Class
{
    public:
        template<typename T0>
        Class(const Class<T0>& other)
        {
            std::cout<<"My copy constructor"<<std::endl;
            _x = other._x;   
        }

        template<typename T0 = T>
        Class (const T0 var = 0)
        {
            std::cout<<"My normal constructor"<<std::endl;
            _x = var;
        }

    public:
        T _x;
};

// (2) Are 
// Class(const Class<T>& other) 
// AND 
// inline Class<T>& operator=(const Class<T>& other)
// the only functions automatically added by the compiler ? 
```

例如，如果我打电话：

```
Class<int> a;
Class<int> b(a); // <- Will not write "My copy constructor"
Class<double> c(a); // <- Will write "My copy constructor" 
```

(3) 根据标准，这种行为是否完全正常？

(4) 我是否保证不会自动添加空构造函数并且`Class<int> x;`会写入`"My normal constructor"`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T04:09:53.077

> 我可以用其他成员初始化一个成员吗？

是的，只要那些其他成员已经被初始化；即只要他们的声明出现在被初始化的成员之前。

> [复制构造函数] 和 [复制赋值运算符] 是编译器自动添加的唯一函数吗？

它还将隐式声明一个析构函数，该析构函数将`_x`使用其析构函数进行销毁。

在 C++11 中，移动构造函数 ( `Class(Class&&)`) 和移动赋值运算符 ( `Class& operator=(Class&&)`) 也被隐式声明，除非您声明了复制或移动构造函数，或者复制或移动赋值运算符。

请注意，您的构造函数模板*不是*复制构造函数，而是使用隐式构造函数：

```
Class<T1> t1;
Class<T1>(t1); // prints nothing
Class<T2>(t1); // prints "My copy constructor" (which is a lie) 
```

> 根据标准，这种行为是否完全正常？

是的，见第 12 章。

> 我是否保证不会自动添加空构造函数并且`Class<int> x;`会写入`"My normal constructor"`？

是的，只有在您根本不声明任何构造函数时才会隐式声明默认构造函数。

# php - foreach step 5 在数组中前进

> ID：13372818
> 
> 赞同：0
> 
> 时间：2012-11-14T04:00:33.643
> 
> 标签：php

使用 foreach 输出数组值时如何前进 5 步？所以在这个看跌期权将是 1, 5

```
$array = ("1","2","3","4","5","6","7","8","9");
foreach ($array as &$value) {
    echo $value; //Where do I tell it to move 5 paces forward?
    echo "<br/ >";
} 
```

如果不能使用 foreach 循环，我愿意使用其他东西。我不认为这里可以使用“while”或“for”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:02:11.107

我会使用一个while循环。只需在循环之外设置一个索引，并在循环的每次迭代中添加 5。当索引大于列表的长度时，终止循环。

表达这些指令的更紧凑的方式是 for 循环：

```
for ($i=0; $i<count($array); $i = $i+5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:05:09.243

```
$array = array("1","2","3","4","5","6","7","8","9");
for($i=0; $i<count($array); $i+=5) {
    echo $array[$i];
    echo "<br/ >";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T04:07:10.663

如果没有数字索引

```
$count = -1;
foreach ($array as &$value) {
  $count++;
  if ($count%4 != 0) continue;
  echo "$value".PHP_EOL;
} 
```

# css - 如何强制悬停状态 div 显示在其他元素上方和容器外部？

> ID：13372820
> 
> 赞同：3
> 
> 时间：2012-11-14T04:00:46.500
> 
> 标签：css, hover

我已经检查了这个大约两天了。

**例子**

这是一个相当复杂的设计，所以为了减少粘贴在这里的代码，我在这个 jsfiddle 上重新创建了主要结构，并在这篇文章的末尾包含了简化的代码：

[http://jsfiddle.net/rwone/zwxpG/10/](http://jsfiddle.net/rwone/zwxpG/10/)

**设想**

我有一个容器，`<li>`其中包含多个 div（包含来自数据库的动态内容），最初具有属性 display: none。

然而，在将鼠标悬停在这些图像上`<li>`时，我希望显示 div。

它正在工作，但是 div 似乎位于容器中具有固定高度和溢出-y：auto 的其他元素下方。

**我试过的**

我已经尝试过 z-index 以及绝对和相对定位的组合，但我还没有找到解决方案。

我在下面的代码和 jsfiddle（显示为`/* comments */`）中隔离了两个原因，但这些在实时测试站点上不起作用。

**问题**

因此，我的问题是，是否有另一种方法可以强制将悬停状态 div 显示在包含它的容器的顶部和外部？

这不是一个理想的解决方案，我可以在 jsfiddle 但不能在实时站点中解决这些问题，但我只是想问是否有另一种方法可以完全解决这个问题？

谢谢你。

**html**

```
<div id="wrapper">
<div id ="hbar_one"></div>
<div id="hbar_two"></div>
<div id="container_a">
<div  id="container_b">
<ul>
<li>
hover me #1
<div id="container_c">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. In fringilla porttitor ante ut varius. Fusce volutpat velit ut orci porttitor cursus. Donec est eros, tempor ac elementum et, volutpat sit amet lorem. Mauris iaculis eros nec sapien hendrerit at sodales nibh iaculis. Morbi imperdiet porta est vitae suscipit. Curabitur sit amet diam in nulla consectetur placerat. Etiam in sapien ac mi scelerisque congue eu id lectus. Proin fermentum auctor turpis vel adipiscing. Maecenas at convallis sapien.
</div>
</li>
<li>
hover me #2
<div id="container_c">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. In fringilla porttitor ante ut varius. Fusce volutpat velit ut orci porttitor cursus. Donec est eros, tempor ac elementum et, volutpat sit amet lorem. Mauris iaculis eros nec sapien hendrerit at sodales nibh iaculis. Morbi imperdiet porta est vitae suscipit. Curabitur sit amet diam in nulla consectetur placerat. Etiam in sapien ac mi scelerisque congue eu id lectus. Proin fermentum auctor turpis vel adipiscing. Maecenas at convallis sapien.
</div>
</li>
</ul>
</div>
</div>
<div id="hbar_three"></div>
<div id="hbar_four"></div>
</div> 
```

**css**

```
#wrapper {
 width: 300px;   
}
#hbar_one {
 background: #cc0000;   
 height: 50px;
}

#hbar_two {
 background: #ffcc00;   
 height: 50px;
}

#container_b {
    height: 50px;
/* cause one - on its own, this causes the undesired 'underneath' effect */
    overflow-y: auto;
}

ul li {
    display: inline;
/* cause two - on its own, this causes the undesired 'underneath' effect */
    position: relative;   
}

#container_c {
    display: none;
}

ul li:hover #container_c {
 background: #00AFF0;
 display: block;
 width: 200px;
 height: 200px;
 position:absolute;
 top: -20px;
 left: 50px; 
 z-index: 999;  
overflow: hidden;    
}

#hbar_three {
 background: #cccccc;   
 height: 50px;
}

#hbar_four {
 background: #000000;   
 height: 50px;
} 
```

**更新**

作为对下面答案的回应，这里是有关悬停时显示的实际内容的更多信息（`#container_c`div 中的所有内容）。每个`<li>`都有自己独特的内容：

```
​&lt;li class=".class1 .class2">
<img src="http://path/to/image.jpg">
<div id="container_c">
<h4>title</h4>
<div id="container_c_left">
<span id="cl1">text</span>
<span id="cl2">text</span>
<span id="cl3">text</span>
</div>
<div id="container_c_right">
<span id="cr1">text</span>
<span id="cr2">text</span>
</div>
<span id="cc1">text</span>
<span id="cc2"><a class= "linkclass" href="http://path/to/link.html">link</a></span>
</div>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:06:17.133

您一次只想显示其中一个悬停元素？

将单个 DIV 放在主体外部并使其隐藏。

然后每次将鼠标悬停在 LI 上时使用 javascript 调整其位置和内容。

无需为每个 LI 提供自己的 DIV。

将内容存储在数据属性中

```
<li id=something data-some-content="Hello joe"> 
```

然后你可以像这样用jQuery检索它

```
$("#something").data('some-content') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:12:33.407

您的 CSS 样式是正确的，但在您的 HTML 中，您有两个无效的`<div>`元素`id='container_c'`，ID 是唯一的，您不能为两个或多个元素提供相同的 id。如果你有两个或更多元素被赋予相同的样式，那么尝试`class='container_c'`在 CSS`#container_c` 中将`.container_c`

检查这个小提琴的固定版本 [http://jsfiddle.net/DeepakKamat/zwxpG/13/](http://jsfiddle.net/DeepakKamat/zwxpG/13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:23:02.027

解决方案是@NoPyGod 的 jquery 建议的混合，并更好地了解绝对定位和相对定位的工作原理。

基本上，当绝对和相对定位应用于 div 时，此位置相对于定义了绝对或相对定位的最后一个元素的位置，并且是您正在使用的 div 的“容器”。

为了从溢出的“容器”中逃脱：自动和固定的高度和宽度，我必须将错误的定位移回到不受溢出和影响悬停状态 div 的高度和宽度限制的父 div。

一个工作的jsfiddle在这里：

[http://jsfiddle.net/rwone/eeaAr/](http://jsfiddle.net/rwone/eeaAr/)

我还实施了@Deepak Kamat 的建议，即每页只有一个 id，并将其余的 div 更改为由类标识。

我随后阅读了下面的文章，这次和在这种情况下工作后对我来说更有意义：

[http://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)

感谢大家的帮助！

**html**

```
<div id="wrapper">
<div id ="hbar_one"></div>
<div id="hbar_two"></div>
<div id="container_a">
<div id="container_b">
<div class="class1 class2 magic" data-unique-content=".hidden_db_data_div">
<img src="http://lorempixel.com/g/50/50/">
<div class="hidden_db_data_div">
some amazing html
</div>
</div>
<div class="class1 class2 magic" data-unique-content=".hidden_db_data_div">
<img src="http://lorempixel.com/g/50/50/">
<div class="hidden_db_data_div">
more amazing html
</div>
</div>
<div class="class1 class2 magic" data-unique-content=".hidden_db_data_div">
<img src="http://lorempixel.com/g/50/50/">
<div class="hidden_db_data_div">
even more amazing html
</div>
</div>
</div>
</div>
<div id="hbar_three"></div>
<div id="hbar_four"></div>
</div> 
```

**css**

```
#wrapper {
width: 300px;   
}
#hbar_one {
background: #cc0000;   
height: 50px;
}

#hbar_two {
background: #ffcc00;   
height: 50px;
}

#container_b {
height: 100px;
overflow-y: auto;
}

.hidden_db_data_div {
display: none;
background: #00AFF0;
width: 120px;
height: 150px;
color: red;
position:absolute;
overflow: hidden; 
z-index: 999;  
}

img {
width: 50px;
height: 50px;
}

.magic {
display: inline;
}

#container_a { position:relative; }

#hbar_three {
background: #cccccc;   
height: 50px;
}

#hbar_four {
background: #000000;   
height: 50px;
} 
```

**脚本**

```
$(".magic").hover(
function () {
$(this)
.find('.hidden_db_data_div')
.css({'left':$(this).position().left+20 + "px", 'top':'-20px'})
.fadeIn(200);
},
function() { 
$(this)
.find('.hidden_db_data_div')
.fadeOut(100);
}                
); 
```

# oracle - 创建数据源时 SSIS Connect Oracle 10g 返回错误

> ID：13372822
> 
> 赞同：1
> 
> 时间：2012-11-14T04:01:08.987
> 
> 标签：oracle, ssis

我在我的操作系统 Windows Server 2008 R2 上安装了 Oracle 10g 客户端（32 位）。我能够使用 Oracle SQL Plus 连接到 Oracle 服务器。

但是当我通过 Visual Studio BI（SSIS 数据源）2008 R2 连接时。它给了一个

错误：

```
TITLE: Connection Manager
------------------------------
Test connection failed because of an error in initializing provider. ORA-12154: TNS:could not resolve the connect identifier specified 
```

在 Datasource 中，我选择 Oracle Data Client Provider 并在 Server Name 框中填写 tns 服务名称。

# java - 使用数组、列表或其他数千个字符串？

> ID：13372824
> 
> 赞同：2
> 
> 时间：2012-11-14T04:01:23.267
> 
> 标签：java, arrays, string, list

我有以下获取目录名称的方法：

```
 private List<String> getListOfDirectories(String rootDirectoryPath) {

        List<String> listOfDirectories = new ArrayList<>();

        File directory = new File(rootDirectoryPath);
        File[] listOfFiles = directory.listFiles();

        for (int i = 0; i < listOfFiles.length; i++) {

            if (listOfFiles[i].isDirectory()) {
                listOfDirectories.add(listOfFiles[i].getName());
            }
        }

        return listOfDirectories;
    } 
```

我暂时将这些目录名称存储在列表中（不确定存储是否是正确的术语）。如果有 50000 个目录名，List 是正确的选择吗？它的内存效率高吗？它可以处理 50000 个或更多的字符串吗？

**编辑：我正在开发一个在本地目录中搜索 html 文件并解析这些 html 文件的应用程序。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T04:04:18.533

`List`只是一个接口，所以它真的取决于列表实现。假设`ArrayList<String>`，它将大致与`String[]`. 数组列表的*最坏*情况是底层数组是一个常数因子（通常为 2），大于它实际存储的数据量。

如果您需要内存效率，这取决于您稍后*使用*列表的方式，您可以使用[trie](http://en.wikipedia.org/wiki/Trie)或[Bloom filter](http://en.wikipedia.org/wiki/Bloom_filter)之类的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T04:04:15.727

An的内存使用量`ArrayList<String>`几乎`String[]`为零。如果您知道要存储大约 50,000 个字符串，那么`ArrayList`使用该初始容量构建 将有助于；它将大大减少重新分配。但是，我绝对不会使用 a `LinkedList`。这有相当多的开销。

只要字符串本身适合内存，存储 50,000 个条目就没有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T04:05:01.363

列表可以处理它，它只取决于是否有那么多可用的内存。

如果您真的知道您将拥有 50000 个元素，那么最好将列表声明如下

```
List<String> list = new ArrayList<String>(50000); //specify the initial capacity 
```

这将消除列表调整开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T05:05:43.433

正如你所指出的；您正在寻找在本地目录中搜索 html 文件的有效方法。

所以我认为将所有细节存储在 ArrayList 的内存中是没有意义的，因为 html 文件的数量会不断变化。我建议你应该运行一个搜索所有这些文件的进程，并将 html 文件名存储在一个单独的物理文件中（比如一个 txt 文件）。这样，您可以通过运行作业定期更新您的文件列表（您可以拥有一个 unix 脚本，甚至可以通过 java 来完成）。

而当你真正需要对那些 html 文件执行一些操作时；从 txt 文件中读取 html 文件名。

从 txt 文件读取后，您可以使用 ArrayList；但不建议将所有名称都保存在内存中。

# ruby-on-rails-3 - 在 PostgreSQL 中将列类型从字符变化更改为没有时区的时间戳

> ID：13372825
> 
> 赞同：5
> 
> 时间：2012-11-14T04:01:40.333
> 
> 标签：ruby-on-rails-3, postgresql, datetime, types

在 Rails 中，我创建了一个名为 open_time 的字符串列，但后来我意识到我应该使用 datetime 类型。我做了

```
change_column :polls, :open_time, :datetime 
```

但它说：

```
PG::Error: ERROR:  column "open_time" cannot be cast to type timestamp without time zone
: ALTER TABLE "polls" ALTER COLUMN "open_time" TYPE timestamp 
```

如果我只是删除字符串列并添加新的日期时间列，我将丢失存储在字符串列中的数据。或者，在 PostgreSQL 中我添加列：

```
 ALTER TABLE polls ADD COLUMN published_time timestamp; 
```

然后我尝试从字符串列中获取数据，例如：

```
UPDATE polls SET published_time = strToTimeStamp(open_time); 
```

所以我的问题是我可以使用任何函数`strToTimeStamp`来将字符变化类型转换为没有时区类型的时间戳？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T10:03:02.247

> .. 有没有可以用作 strToTimeStamp 的函数，可以将字符变化类型转换为没有时区类型的时间戳？

用于[**`to_timestamp()`**](http://www.postgresql.org/docs/current/interactive/functions-formatting.html)更改列的数据类型。

```
ALTER TABLE tbl ALTER COLUMN col TYPE timestamp
USING to_timestamp(col, '<your pattern here>'); 
```

更多在这些非常相似的问题下：
[Alter character field to date](https://stackoverflow.com/questions/8099352/alter-character-field-to-date-in-postgres/8099692)
[Cast varchar type to date](https://stackoverflow.com/q/13287618/939860)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-14T04:07:35.183

不要认为你可以这样做，因为它受到数据库能力的限制。这个想法正在做以下事情：

*   创建了一个具有不同名称的新列
*   每行数据转换后复制列内容
*   删除原来的col
*   将新 col 重命名为原始 col 名称

这些步骤可以放在同一个迁移文件中，并将它们保存在一个事务中以防万一。

# database - 如果实施地狱禁令，什么是有效的方法？

> ID：13372828
> 
> 赞同：1
> 
> 时间：2012-11-14T04:01:52.223
> 
> 标签：database, database-design, forum

我正在为一个更大的项目开发一个论坛组件，并考虑添加一个地狱禁令功能，其中一个模块可能会阻止除该用户之外的任何人查看用户的帖子。这基本上执行了“不要喂巨魔”规则，迫使每个人都忽略麻烦制造者。与此同时，麻烦制造者可能会变得无聊，因为他没有成功地从任何人那里得到提升，并希望继续前进。

我的第一个想法是在 post 表中添加一个“hellbanned”列，并创建一个“hellbanend”表。hellbanned 用户会将其 user_id 作为记录添加到 hellbanned 表中，此后他们所有未来的帖子都将其 hellbanned 列设置为 true。

因此，显示所有主题帖子的查询只会显示“hellbanned = False”的所有帖子。并且，post 操作将检查用户是否在 hellban 表中，如果是，则将 post 的“hellbanned”列设置为 True。

我不禁想到有更好的方法来做到这一点；我真的很感激一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T07:57:47.853

Hellbanning 存在于用户级别，而不是单个帖子，因此您根本不必将标志保留在帖子表的级别 - 事实上，这样做会使您面临数据不一致的情况（例如，应用程序错误可能导致“不完全”被地狱禁止的用户）。

相反，将被禁止的用户 ID 放到一个单独的表中（如果您的 DBMS 支持它：将其[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)以避免“不必要的”表堆）...

```
CREATE TABLE HELLBANNED_USER (
    USER_ID INT PRIMARY KEY,
    FOREIGN KEY (USER_ID) REFERENCES USER (USER_ID)
) 
```

...当需要排除被禁止的用户的帖子时，请执行以下操作：

```
SELECT * FROM POST
WHERE USER_ID NOT IN (
    SELECT USER_ID FROM HELLBANNED_USER
) 
```

由于 HELLBANNED_USER.USER_ID 上的索引，这应该可以很好地执行。

被地狱禁止的用户仍在常规的 USER 表中，因此其他所有内容都可以继续为他们工作，而无需对您的代码进行重大更改。

* * *

显然，一旦用户在上面被地狱封禁，它的*所有*帖子（即使是在地狱封禁之前发布的帖子）都将变得不可见。如果您不希望这样，请将 HELLBANNED_DATE 字段添加到 hellbanned 表中，然后在 hellbanning 之后隐藏帖子，类似于...

```
SELECT * FROM POST
WHERE NOT EXISTS (
    SELECT * FROM HELLBANNED_USER
    WHERE POST.USER_ID = HELLBANNED_USER.USER_ID
        AND POST_DATE >= HELLBANNED_DATE
) 
```

* * *

或者，您可以只在 USER 表中保留 HELLBANNED 标志（和/或 HELLBANNED_DATE），但您需要小心正确地对其进行索引以获得良好的性能。

这实际上可能是比 HELLBANNED_USER 更好的解决方案，*如果*您仍然需要与 USER 联接（以显示每个帖子的其他用户信息），因此无需通过 HELLBANNED_USER 表进行额外搜索即可轻松访问该标志。

# android - 安装 Android 4.2 API 时遇到问题

> ID：13372835
> 
> 赞同：89
> 
> 时间：2012-11-14T04:03:02.483
> 
> 标签：android

我今天通过 Eclipse 将 ADT 更新到了 21 版。现在，当我打开 SDK 管理器时，我希望会有一个像“Android 4.2 (API 17)”这样的文件夹，其中包含 SDK 平台和 API、文档等。但是，相反，我只得到一个名为“API 17”的文件夹，其中唯一的东西是“Google APIs”，我什至无法安装它，因为

> 安装此软件包还需要安装： - 缺少 SDK 平台 Android、API 17

我在这里做什么？谢谢

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-11-14T04:11:38.003

经过一番摸索，我自己弄清楚了这一点。我进入 SDK Manager 的设置，清除缓存，并告诉它使用 HTTPS，然后刷新列表，一切正常。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-11-26T18:54:00.023

Eclipse > 窗口 > **Android SDK 管理器**>**包**>**重新加载**

然后它正确更新了 UI，让我选择更新的软件。

为什么我需要手动点击“重新加载”？！我希望这会在我打开 SDK 管理器时自动发生。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-02-23T08:08:16.857

到这一步~

1) Eclipse > Window > Android SDK Manager > Packages > Reload

2）然后安装sdk

参考： http: [//my.eoe.cn/iceskysl/archive/1027.html](http://my.eoe.cn/iceskysl/archive/1027.html)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-26T04:41:01.623

Eclipse > Window > Android SDK Manager > Preferences > Clear Cache Button click > Done。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-20T22:45:39.913

我在ubuntu中遇到了这个问题。

*   打开终端并导航到 android-sdk-linux 文件夹： `cd android-sdk-linux`

*   然后手动更新sdk： `tools/android update sdk -u`

完成后，重新启动 Eclipse。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-11T05:12:02.593

正如错误提示：API 18 取决于 SDK 版本 n 等。所以首先将 SDK 工具更新到最新版本（取消选择 API 18）然后尝试安装 API 18。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-16T06:39:57.890

尝试逐个批准每个包，而不是全部批准。如果任何包有错误，您不能同时下载所有包。

# android - How should I make my mobile website support video playing in iphone, android?

> ID：13372836
> 
> 赞同：0
> 
> 时间：2012-11-14T04:03:03.927
> 
> 标签：android, asp.net, ios, mobile, web

I want to develop a mobile version of my website, in which I need to embed youtube video/ upload my own flv file and play it in my website, How should I implement this? Should I develop an Flash player by myself? How can I make iPhone play my flv files/Youtube ?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:14:56.797

您可以在 youtube 上上传视频并将其添加到您的网站，方法是`iframe`：

```
<iframe src="http://www.youtube.com/embed/VIDEO_ID"
   width="yourwidth" height="yourheight"></iframe> 
```

如果设备不支持 Flash，它将自动切换到 HTML5 播放器。

# perl - 使用 perl 的代理 URL 重定向

> ID：13372838
> 
> 赞同：1
> 
> 时间：2012-11-14T04:03:13.373
> 
> 标签：perl, proxy, perl-module, http-redirect

我想从 perl 做一个代理重定向。我一直在使用 Location Header 进行重定向。

```
 print ("Location: http://www.example.com\n"); 
```

问题在于客户端的 url 更改为新的（即 www.example.com ）。我不希望这种情况发生，因此最终用户不知道我们从哪个位置提供请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:17:48.790

如果客户端要进行抓取，它将显示正在抓取的 URL，除非被抓取的页面嵌入到另一个页面中（例如，通过使用 iframe）。即便如此，如果用户查看，也很容易发现 url。

相反，如果您确实想成为代理（并且所有迹象表明您是），也就是说您想要获取文档并将其返回给客户端，那么您必须首先获取要返回的文档给客户。

请注意，您可以将 apache 配置为[代理](http://httpd.apache.org/docs/2.4/mod/mod_proxy.html)。

# javascript - 从父级调用函数并将参数传递给 iframe

> ID：13372841
> 
> 赞同：1
> 
> 时间：2012-11-14T04:03:20.043
> 
> 标签：javascript, iframe

我正在尝试调用一个函数并将参数从父级传递给 iframe javascript 函数。

我有

```
document.getElementById('iframeD').contentWindow.detect(name); 
```

在我的父母 javascript

在我的 iframe 中..如果我有

```
function detect(name){

   console.log(name);
} 
```

它会给我

```
Uncaught SyntaxError: Unexpected token name 
```

但是，如果我只调用没有参数的函数

```
document.getElementById('iframeD').contentWindow.detect(); 
```

并使我的 iframe 功能

```
function detect(){

   console.log('I want to pass the pare');
} 
```

它会起作用的。

我能做些什么来解决这个问题？谢谢您的帮助！！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-14T04:08:25.903

`name`是 JS 中的保留关键字，因此不能将其用于变量/参数。只需为您的参数和调用时使用不同的名称`detect`。您的代码看起来还不错。

# javascript - jQuery's get() not properly returning

> ID：13372845
> 
> 赞同：0
> 
> 时间：2012-11-14T04:03:42.700
> 
> 标签：javascript, jquery, get

I have a very simple code that when the document is ready it tries to get some data using jQuery's get():

```
 $(document).ready(function() {
        startGetting();
    });

    function startGetting(){
        console.log("entering");
        $.get('prediction.pl', function(data){
            console.log(data)
        });

    } 
```

My expected results on the console are:

```
entering
>data 
```

but for some reason no `data` is being returned or anything.

If I execute the get() function straight in the console it does print out `data`. Any ideas why it doesn't work when called from the code, but does work when run from the console?

EDIT:

I noticed that if I change startGetting() to:

```
 function startGetting(){
        console.log("entering");
        foo=$.get('prediction.pl', function(data){
            console.log(data)
        });
  console.log(foo);
  } 
```

Now `foo` has the data I want. But I have no idea why is this happening, any ideas?

# lisp - 可以选择列表第 n 项的 Scheme 函数

> ID：13372846
> 
> 赞同：3
> 
> 时间：2012-11-14T04:03:48.950
> 
> 标签：lisp, scheme

所以在这里我有几个我想使用的已定义列表：

```
(DEFINE list0 (LIST 'j 'k 'l 'm 'n 'o 'j) )
(DEFINE list1 (LIST 'a 'b 'c 'd 'e 'f 'g) )
(DEFINE list2 (LIST 's 't 'u 'v 'w 'x 'y 'z) )
(DEFINE list3 (LIST 'j 'k 'l 'm 'l 'k 'j) )
(DEFINE list4 (LIST 'n 'o 'p 'q 'q 'p 'o 'n) )
(DEFINE list5 '( (a b) c (d e d) c (a b) ) )
(DEFINE list6 '( (h i) (j k) l (m n) ) )
(DEFINE list7 (f (a b) c (d e d) (b a) f) ) 
```

我想做的是为“中间”函数创建一个递归函数，它可以这样做：

MIDDLE: (middle 1st) 应该返回一个仅由 1st 的中间元素组成的单元素列表 [或者如果 1st 中有偶数个元素，则返回空列表]。那是，

`(middle '(a b c d e f g) )` 应该/将返回： `(d)`

`(middle '(s t u v w x y z) )` 应该/将返回空字符串。

`(middle '( (a b) c (d e d) c (b a) ) )` 应该/将返回： `( (d e d) )` 请注意，这`( (d e d) )`是一个包含中间事物的列表，它本身就是一个列表。

我认为我必须把它分成两个问题。首先是我需要一个可以选择列表第 n 项的函数。我对创建它知之甚少。其次，您需要一个函数来确定中间项的位置以及是否存在中间项。（我对如何创建它也知之甚少。然后

```
(define middle
    (lambda (L)
        (if (middle? L)
        (nth-term (middle L) L)
        '()))) 
```

这是我的 evens 函数，我想知道是否有更简单的方法来解决它：

```
(define evens
    (lambda (L)
    (if (or (NULL? (cddr L)))
        '()
    (cons (cadr L) (evens (cddr L)))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:33:15.813

最简单的方法是使用 length 函数来获取列表的长度，然后确保长度不是偶数（如果是，则返回一个空列表）。一旦我们知道长度是奇数，返回列表中一半长度减去 1 的元素。结果是列表的中间。以下是代码的实际样子：

```
 (define (middle lis)
      (let ((list-length (length lis)))
        (if (even? list-length)
            '()
            (list (list-ref lis (/ (- list-length 1) 2)))))) 
```

要回答主题行中的问题，您可以使用 list-ref 过程获得列表的第 n 项，如下所示：

```
 > (list-ref '(a b c d) 2)
    'c 
```

如果您仍然对任何事情感到困惑，请告诉我，我会尽力澄清。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T11:53:18.550

答案可以稍微改进如下：

```
(define (middle lst)
  (let ((len (length lst)))
    (if (even? len)
        '()
        (list (list-ref lst (quotient len 2)))))) 
```

请注意，有一种更简单的方法可以获取中间元素的索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T12:34:33.837

显而易见的方法（计算长度；除以二；在列表中查找）需要两次遍历列表。

这是一种只需要一次通过的替代方法：

```
(define (middle lst)
  (letrec
    ((middle-odd
       (lambda (x y) (if (null? x) (list (car y)) (middle-even (cdr x) (cdr y)))))
     (middle-even
       (lambda (x y) (if (null? x) '() (middle-odd (cdr x) y)))))
    (middle-even lst lst))) 
```

# android - How to disable click style in android GridView

> ID：13372848
> 
> 赞同：0
> 
> 时间：2012-11-14T04:03:58.747
> 
> 标签：android, gridview

I have a android.widget.GridView and I'm setting setOnItemClickListener() on it. It works perfectly but adds a style to the UI when a cell is clicked. Any ideas how to remove this style?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T21:36:34.080

好的，谢谢@Sam，你让我走上了正确的道路。无法开始 `<item android:color="#00000000" />`工作，我认为对于网格，您需要沿[Android ListView Selector Color](https://stackoverflow.com/questions/2038040/android-listview-selector-color)的行使用可绘制对象。最后我的工作代码是

Java代码：

```
mygrid.setSelector( R.color.empty_selector ); 
```

res/color/empty_selector.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@color/transparent"/>
</selector> 
```

资源/颜色/透明.xml：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android" android:gravity="center" android:src="@drawable/transparent" /> 
```

不确定是否有更简单的方法，但这很有效，所以我很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:09:27.293

I believe you are referring to the color selector or [color state list](http://developer.android.com/guide/topics/resources/color-list-resource.html). You can probably create a dummy selector, that has no alternate values, then set it to the GridView with `setSelector()` in Java or `android:listSelector` in XML.

* * *

A dummy selector, it is transparent:

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:color="#00000000" />
</selector> 
```

# browser - 从不同的安卓浏览器打开应用

> ID：13372849
> 
> 赞同：1
> 
> 时间：2012-11-14T04:04:02.747
> 
> 标签：browser

到目前为止，我一直在使用三星 Galaxy S2 的默认浏览器。浏览时，如果我找到并单击来自 Wikipedia 或 IMDB 的链接，它会询问并选择是否要在“Internet”浏览器或已安装的 IMDB/Wikipedia 应用程序中打开它们。我已经尝试过其他浏览器应用程序。（Firefox、Dolphin、Skyfire、Opera 等）并且这些似乎都没有弹出在应用程序中打开它们的选项。他们直接进入网站。我发现唯一提供选择的应用程序是 Chrome，但它似乎经常崩溃。我只是想知道我是否在我看过的其他浏览器中遗漏了一些东西。我喜欢 Dolphin 和 Firefox，但希望看到它们提供在已安装应用程序中打开网站的选项。有没有办法让他们这样做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-13T12:12:20.207

这是因为您在 2012 年底测试过的那些浏览器（Firefox、Dolphin、Skyfire、Opera）不支持或调用外部意图存在问题。

[这是](https://bugzilla.mozilla.org/show_bug.cgi?id=653833)有关在 Firefox 上实现该功能的问题。

相关信息 - [如何使用意图过滤器从浏览器打开外部 Android 应用程序](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)。

# javascript - 宣布在线游戏获胜后结束互动

> ID：13372854
> 
> 赞同：0
> 
> 时间：2012-11-14T04:04:48.470
> 
> 标签：javascript, jquery, html, javascript-events

我有一个非常简单的 JavaScript 井字游戏，目前似乎运行良好。它由一个包含 X 和 O 的数组组成，不允许两次选择相同的点，并且计算机轮流基于生成的随机数，该随机数在数组中仍然是开放的。

我唯一剩下的问题是当宣布获胜者（计算机或人类）时该怎么办。

那时，我需要结束运行游戏的 JavaScript，直到用户选择重置棋盘并重新开始。

这需要我努力解决的两个细节：

1.  一旦宣布获胜者，我需要井字游戏板的扇区变为“不可点击”或不再注册点击。目前，即使在决定了一场比赛的输赢之后，如果还有剩余空间，则用户可以继续在棋盘上标记这些空间。

2.  解决上述问题应该有助于部分解决这个问题，但一旦宣布游戏的获胜者，完全停止游戏也可能会很好。目前，再次因为用户可以继续点击开放空间（如果存在），只要棋盘上存在胜利，计数器（计算用户的胜利）将继续增加。同样，通过解决问题 1，也可以传递地解决这个问题，因为点击不起作用，因此计数器不会增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:35:13.687

如果结束游戏只是让方块不响应点击，那么您可以创建一个绑定到框的点击事件的函数。

例如，如果每个盒子都是一个带有“盒子”类的链接，那么你可以这样做：

```
var boxes = document.getElementsByClassName('box');
for(var key in boxes) { 
  boxes[key].onclick = function(e) {
  e.preventDefault();
} 
```

或者，使用 jQuery

```
$(document).on("click", ".boxes", function(e) {
   e.preventDefault();
} 
```

找到获胜者后，您将这样做：

```
var endGame = function() {
   $(document).on("click", ".boxes", function(e) {
      e.preventDefault();
   }
}

if ( there is a winner ) {
    endGame();
} 
```

# replace - GREP 表达式

> ID：13372855
> 
> 赞同：-2
> 
> 时间：2012-11-14T04:04:54.930
> 
> 标签：replace, adobe, adobe-indesign, grep-indesign

我需要 GREP 表达式的帮助来查找和替换一组可变的单词。句子总是以相同的两个单词（粗斜体）开头，总是以（冒号）结尾，但中间的位会有所不同。所以我需要搜索：

`Bold italicized`那么任何一串单词`:`

IE。以“Bold italicized”开头，然后是任何一组单词，以“:”结尾

例如：

```
Bold italicized May 6, 2010: 
```

然后，我将对该文本应用一些格式。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:10:45.320

这样做的正确工具不是[grep](/questions/tagged/grep "显示标记为“grep”的问题")而是[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

**外壳中的**示例：****

 **```
$ cat file.txt 
Bold italicized foo bar:
Bold italicized qux:
$ sed 's/^Bold italicized\(.*\):/do something with "\1"/g' file.txt
do something with " foo bar"
do something with " qux"
$ 
```

**笔记**

*   [您会在此处](http://sed.sourceforge.net/)或[此处](https://www.google.com/search?q=%5Bsed%5D&sitesearch=stackoverflow.com/questions)找到大量示例和文档
*   基本的`sed`替换命令是`s/regex/substitution/modifier`
*   使用[regex](http://en.wikipedia.org/wiki/Regex)，我使用`^`这意味着行首，并`\( \)`进行捕获

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T14:14:32.677

这应该可以做到，虽然这是一个非常简单的，所以看起来你应该能够自己想出这个，即使是初学者。

```
^Bold italicized.+?: 
```

如果您想了解更多有关如何使用 GREP 的信息，我会推荐[InDesign GREP 参考](http://help.adobe.com/en_US/indesign/cs/using/WSFB3603CC-8D84-48d8-9F77-F3E0644CB0B6a.html)。**

# php - 显示的 PHP 代码，未解释

> ID：13372856
> 
> 赞同：0
> 
> 时间：2012-11-14T04:05:00.077
> 
> 标签：php

我最近设置了一个 AWS EC2 实例并使用 yum 在 64 位 Linux 服务器上安装了 Apache、PHP 和 MySQL

然后我在 /var/HTML/WWW 中上传了我的联系表单的 php 文件

除了显示我的联系表格的某些部分外，它显示得很好。它们是 PHP — 显示 PHP 标记和其中的代码。

这是一个活生生的例子：23.23.152.36

这是另一台服务器上的一个版本[，它工作正常](http://www.the-irf.com/contact/index2.php)。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:08:27.143

Do you have PHP enabled on your webserver? For Apache, you may need to modify httpd.conf to enable PHP.

Can you run `phpmyinfo()` on your webserver?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T04:10:54.590

在 php.ini 中启用 short_open_tag

```
 short_open_tag
   Default Value: On
   Development Value: Off
   Production Value: Off 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T04:16:59.473

速记符号正在走向贬值，我不会再建议使用速记符号构建代码了。

只需使用`<?php echo ?>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T04:07:30.227

您想更改`<?php=$name;?>`为`<?= $name ?>`. 如果您想使用速记符号，这就是您需要做的。

# sockets - 我如何破译dns消息？

> ID：13372860
> 
> 赞同：1
> 
> 时间：2012-11-14T04:05:14.187
> 
> 标签：sockets, networking, dns, network-programming, rfc1035

我正在编写一个程序来接收 dns 消息并响应适当的答案（一个仅回复 A 记录的简单 dns 服务器）。
但是当我收到消息时，它不像 1035 RFC 中描述的格式。
例如，这是一个由 nslookup 生成的 dns 查询：

```
'\xe1\x0c\x01\x00\x00\x01\x00\x00\x00\x00\x00\x00\x06google\x03com\x00\x00\x01\x00\x01' 
```

我知道 1035 RFC 中定义的 dns 标头和位，但为什么它应该是十六进制的？
我应该将它们视为十六进制数字还是它们的 utf-8 等价物？
我的回复也应该采用这种格式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T04:38:00.043

它以十六进制形式出现，因为它是一个原始二进制请求，但您可能正试图将其打印为字符串。显然，这就是您用来打印不可打印字符的方式；它将它们作为十六进制序列转义。

您根本不会将其解释为“十六进制”或 UTF-8；您需要解释 RFC 描述的二进制格式。如果您提及您使用的是什么语言，我（或其他人）也许能够向您描述如何处理像这样的二进制格式的数据。

在那之前，让我们看一下[RFC 1035](http://www.ietf.org/rfc/rfc1035.txt)，看看如何手动解释您的查询：

```
The header contains the following fields:

                                    1  1  1  1  1  1
      0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                      ID                       |
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |QR|   Opcode  |AA|TC|RD|RA|   Z    |   RCODE   |
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                    QDCOUNT                    |
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                    ANCOUNT                    |
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                    NSCOUNT                    |
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                    ARCOUNT                    |
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
```

每行有 16 位，所以是 12 个字节。让我们将前 12 个字节填充到那里：

```
 1  1  1  1  1  1
      0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                   ID = e10c                   |  \xe1 \x0c
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    | 0|  Opcode=0 | 0| 0| 1| 0| Z=0    |  RCODE=0  |  \x01 \x00
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                  QDCOUNT = 1                  |  \x00 \x01
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                  ANCOUNT = 0                  |  \x00 \x00
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                  NSCOUNT = 0                  |  \x00 \x00
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                  ARCOUNT = 0                  |  \x00 \x00
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
```

所以。我们有一个 ID = 的查询`e10c`（只是一个任意数字，因此客户端可以将查询与响应匹配），QR = 0 表示它是一个查询，操作码 = 0 表示它是一个标准查询，AA 和 TC 用于响应，RD = 1 表示需要递归（我们正在对本地名称服务器进行递归查询）。Z 保留供将来使用，RCODE 是响应的响应代码。QDCOUNT = 1 表示我们有 1 个问题，其余都是响应中不同类型记录的数量。

现在我们来回答问题。每个都有以下格式：

```
 1  1  1  1  1  1
      0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                                               |
    /                     QNAME                     /
    /                                               /
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                     QTYPE                     |
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                     QCLASS                    |
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
```

QNAME 是查询的名称。格式是一个八位字节，指示标签的长度，后跟标签，以长度为 0 的标签终止。

所以我们有：

```
 1  1  1  1  1  1
      0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |       LEN = 6         |           g           |  \x06 g
    |           o           |           o           |  o    o
    |           g           |           l           |  g    l
    |           e           |       LEN = 3         |  e    \x03
    |           c           |           o           |  c    o
    |           m           |       LEN = 0         |  m    \x00
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                   QTYPE = 1                   |  \x00 \x01
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
    |                  QCLASS = 1                   |  \x00 \x01
    +--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+ 
```

这表明我们正在查找的名称是`google.com`（有时写为`google.com.`，末尾的空标签是明确的）。QTYPE = 1 是 A（IPv4 地址）记录。QCLASS = 1 是一个 IN（互联网）查询。所以这是要求 google.com 的 IPv4 地址。

# javascript - 仅显示一次“必须完成所有字段”错误

> ID：13372861
> 
> 赞同：1
> 
> 时间：2012-11-14T04:05:36.317
> 
> 标签：javascript, html

我正在尝试用javascript制作一个页面。我对这一切都很陌生，所以请耐心等待。

我有一个表格，当您按下提交时，我有以下信息来查看这些字段是否留空：

```
function calculatePrice() 
{

var GasPrice = document.getElementById("number1").value;
var Distance = document.getElementById("number2").value;
var Mileage = document.getElementById("number3").value;
var norepeat = false;

if (norepeat==false && (GasPrice =="" || Distance =="" || Mileage =="")) 
{
var para=document.createElement("p"); 
para.setAttribute("class", "error");
var node=document.createTextNode("All fields must be completed");
para.appendChild(node);
var element=document.getElementById("content");
element.appendChild(para);
var norepeat = true;
} 
```

我将错误创建为出现的段落标签。问题是当我多次按下提交时，它每次都会写入错误消息。我尝试了 norepeat 变量，但它似乎不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:09:23.183

Though I'm not completely sure your intentions, it'd have to look something more like:

```
var norepeat = false;

function calculatePrice() {
    if(!norepeat && (/* other conditions here */)) {
        norepeat = true;
    }

    return !(/* other conditions above */);
} 
```

Where `norepeat` is defined in a global scope. Also, remember to use `===` as opposed to `==`. And trimming the string before testing it wouldn't be a horrible idea...

But, wouldn't you want the errors to still persist if the user hasn't corrected them - isn't that the point of validation?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:21:22.147

我认为你想要做的是这个。这假设您添加了一个包含错误消息的新 div“myError”。如果验证未通过，您还需要考虑不提交表单。

```
function calculatePrice() {

        var GasPrice = document.getElementById("number1").value;
        var Distance = document.getElementById("number2").value;
        var Mileage = document.getElementById("number3").value;
        var error = document.getElementById("myError");

        if (GasPrice == "" || Distance == "" || Mileage == "") {
            error.style.display = "block";
            return false;
        }
        else {
            error.style.display = "none";
            return true;
        }
    } 
```

# python - 如何在多个平台上运行 python 代码覆盖

> ID：13372862
> 
> 赞同：0
> 
> 时间：2012-11-14T04:05:40.750
> 
> 标签：python, code-coverage, coverage.py, python-coverage

我在 Windows 上的 PyDEV 内的代码（python 2.7）上使用了coverage.py。

我有一些仅在 UNIX 上运行的代码，通常以：

```
if os.name == 'posix': 
```

我想确保这也包括在内。以某种方式在 UNIX 上运行覆盖，并将结果合并到 PyDEV。

不过，我不知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:15:37.657

这更像是一个集成问题。

1.  您必须在不同的机器（但可以是远程或虚拟机）上运行测试才能测试不同的操作系统。
2.  您可能希望将这些测试集成或自动化作为长期解决方案。为此有很多[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)软件。
3.  **如果您需要从不同的机器或流程中收集覆盖率数据，覆盖率可以将多个文件合并为一个进行报告。在执行期间使用`-p`标志将区分信息附加到`.coverage`数据文件名。**
    可以在[`coverage.py`文档站点](http://nedbatchelder.com/code/coverage/cmd.html#cmd-combining)上找到详细信息。

# javascript - 在 JavaScript/jQuery 中，如何在调用完成后检索 ajax 调用的 url？

> ID：13372864
> 
> 赞同：-1
> 
> 时间：2012-11-14T04:05:50.130
> 
> 标签：javascript, jquery

我正在尝试用 JavaScript 编写一个 Web 程序，我必须在其中进行多个 ajax 调用，并且我需要弄清楚在对 url 进行 ajax 调用后如何获取 url。ajax 调用是在一个 for 循环中进行的，该循环遍历一个 url 数组。所以 ajax 请求的代码和处理请求返回的函数看起来像这样：

```
requester = function(url){
    $.ajax({
        url : "http://url of my proxy?url=" + escape(url),
        type : "GET",
        data-type : "xml"
    }).done(dataProcessor);
};

dataProcessor = function(data){
    //a bunch of code, including things where I must have the url for the ajax request
}; 
```

那么，我怎样才能得到那个网址呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:08:59.920

利用闭包

```
requester = function(url){
    $.ajax({
        url : "http://url of my proxy?url=" + escape(url),
        type : "GET",
        data-type : "xml"
    }).done(function(data) {

         alert(url);

    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:10:12.537

您可以简单地保存它并将其传递给您的函数：

```
requester = function(url){
    var fullURL = "http://url of my proxy?url=" + escape(url)
    $.ajax({
        url : fullURL,
        type : "GET",
        data-type : "xml"
    }).done(function(data) {dataProcessor(data, fullURL)});
};

dataProcessor = function(data, url){
    //a bunch of code, including things where I must have the url for the ajax request
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T04:10:27.007

它可以从`this`value 中获得，即[`jqXHR`object](http://api.jquery.com/Types/#jqXHR)。

```
dataProcessor = function(data){
    console.log(this.url);
}; 
```

# c# - 通过 .NET 绑定在 TFS 中检出 .csproj 文件会引发 ItemNotFound 非致命错误

> ID：13372865
> 
> 赞同：1
> 
> 时间：2012-11-14T04:05:54.223
> 
> 标签：c#, .net, asp.net-mvc, version-control, tfs

```
/* Make some changes to .csproj file */
...
Workspace workspace    = GetWorkspace( localBranchPath, serverBranchPath );
workspace.PendEdit( csprojFilePath ); 
```

此时，我的 VersionControlServer 非致命错误处理程序捕获了 ItemNotFound 错误。但是，如果我`workspace.PendEdit( csprojFilePath + ".balls" )`在 Visual Studio 调试器的 Watch 窗口中运行，则不会发生错误并且文件已正确签出。

我已确认该文件未标记为只读，并且运行 IIS / 应用程序部署的用户和被模拟的用户都具有对 .csproj 文件的 NTFS 和 TFS 完全控制权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:41:07.220

TFS 及其“工作区”概念可能是您遇到麻烦的原因。如果机器上有超过 1 个工作区，可能会发生奇怪的事情。您可以记录在 IIS 中运行应用程序时获取的工作区吗？它可能与 Visual Studio 自动为您创建并在您从 VS 运行时获取/使用的那个不同（或根本没有！）。

**编辑**：当我是一名“构建工程师”时，我从工作中想起了一些事情：TFS 为*每个*用户创建工作区，并将这些工作区缓存在一个文件夹中的 xml 文件中，以便快速访问，例如 C:\Users[sepcific user]\AppData\Local\微软\团队基金会 ... . 检查那个 xml 文件。因此，我很确定您的 IIS 应用程序池在其下运行的用户无法看到您在其下运行 VS 的普通用户工作区。尝试将您自己的用户设置为 IIS 应用程序池用户，看看会发生什么。很肯定会像在 Visual Studio 中一样工作。所以映射工作区**到***user 是非常具体的——您可能需要为您的 IIS 帐户创建一个新的工作区，并且可能还需要下载文件。

* * *

其他可能性：权限问题或 IIS 机器看不到您需要查看的（网络？）文件夹。

以运行 IIS 上的应用程序池的用户身份启动 Visual Studio（在 Windows 7 中按住`shift`并右键单击以查看以不同用户身份运行的选项）并查看是否可以获得相同的异常。如果你这样做，这是一个权限问题。

如果您没有收到相同的错误，请从运行您的应用程序的托管位置转到 IIS 服务器，并尝试访问该路径，就像您的应用程序可以访问它一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:57:05.930

结果发现我的代码有两个问题（可以预见，.csproj 扩展名与它无关）：

1.  在 .csproj 之前，我一直在签入不同的文件；尽管我最初递归设置了非只读+完全控制，但这会自动重新设置所有内容的只读属性，这显然导致了我随后的签出尝试出现问题。

2.  在某些情况下，无论是因为冲突还是其他原因，我都需要在修改和签出 .csproj 文件之前强制获取最新（GetOptions.Overwrite）。

# r - 对向量进行反向评分

> ID：13372866
> 
> 赞同：5
> 
> 时间：2012-11-14T04:05:58.143
> 
> 标签：r, numeric

我有数字向量，例如`c(1, 2, 3, 3, 2, 1, 3)`or `c(1, 4, 1, 4, 4, 1)`，我想保留单个元素的位置，但交换/反转值，以便我们`c(3, 2, 1, 1, 2, 3, 1)`分别得到`c(4, 1, 4, 1, 1, 4)`。

为了实现这一点，我在下面提出了一个相当粗糙和丑陋的代码，其中包含大量的调试和修补......

```
blah <- c(1, 4, 1, 4, 4, 1, 3)
blah.uniq <- sort(unique(blah))
blah.uniq.len <- length(blah.uniq)
j <- 1
end <- ceiling(blah.uniq.len / 2)
if(end == 1) {end <- 2} # special case like c(1,4,1), should get c(4,1,4) 
for(i in blah.uniq.len:end) {
  x <- blah == blah.uniq[i]
  y <- blah == blah.uniq[j]
  blah[x] <- blah.uniq[j]
  blah[y] <- blah.uniq[i]
  j = j + 1
}
blah 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T04:17:04.017

我认为您正在尝试反转分数。算法是 (1 + max(x_i)) - x_i

所以...

```
x <- c(1, 2, 3, 3, 2, 1, 3)
y <- c(1, 4, 1, 4, 4, 1)

(max(x, na.rm=T) + 1) - x
(max(y, na.rm=T) + 1) - y 
```

产生：

```
> (max(x, na.rm=T) + 1) - x
[1] 3 2 1 1 2 3 1
> (max(y, na.rm=T) + 1) - y
[1] 4 1 4 1 1 4 
```

根据 OP 的评论：

```
rev.score <- function(x) {
    h <- unique(x)
    a <- seq(min(h, na.rm=T), max(h, na.rm=T))
    b <- rev(a)
    dat <- data.frame(a, b)
    dat[match(x, dat[, 'a']), 2]
}

x <- c(1, 2, 3, 3, 2, 1, 3)
rev.score(x)
y <- c(1, 4, 1, 4, 4, 1)
rev.score(y)
z <- c(1, 5, 10, -3, -5, 2)
rev.score(z) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T12:29:31.120

恭喜！你可能终于找到了`factor`s 的用途，我还在寻找一个:-)

```
x <- c(1, 2, 3, 3, 2, 1, 3)
# [1] 1 2 3 3 2 1 3
y <- factor(x)
# [1] 1 2 3 3 2 1 3
# Levels: 1 2 3
levels(y) <- rev(levels(y))
# [1] 3 2 1 1 2 3 1
# Levels: 3 2 1 
```

基于这个想法，这里有一个函数，它返回一个与输入具有相同类的对象：

```
swap <- function(x) {
    f <- factor(x)
    y <- rev(levels(f))[f]
    class(y) <- class(x)
    return(y)
}
swap(c(1, 2, 3, 3, 2, 1, 3))
# [1] 3 2 1 1 2 3 1
swap(c(1, 4, 1, 4, 4, 1))
# [1] 4 1 4 1 1 4 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T06:08:40.733

一个可能的泛化函数。

```
revscore <- function(x) {
  rx <- min(x):max(x)
  rev(rx)[sapply(1:length(x), function(y) match(x[y],rx))]
}

x1 <- c(-3,-1,0,-2,3,2,1)
x2 <- c(-1,0,1,2)
x3 <- 1:7 
```

一些测试：

```
> x1
[1] -3 -1  0 -2  3  2  1
> revscore(x1)
[1]  3  1  0  2 -3 -2 -1

> x2
[1] -1  0  1  2
> revscore(x2)
[1]  2  1  0 -1

> x3
[1] 1 2 3 4 5 6 7
> revscore(x3)
[1] 7 6 5 4 3 2 1 
```

# c++ - 如何在其中心旋转 2d 对象

> ID：13372867
> 
> 赞同：1
> 
> 时间：2012-11-14T04:05:59.340
> 
> 标签：c++, opengl

```
float carX   = 0.0;
float carY   = 0.0;
float carSpeed = 1.0;
float direction = 0.0;
bool exhaust;

void reshape(void)
{
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0, 10.0, 0, 10.0, 0.0, 10.0);
glMatrixMode(GL_MODELVIEW);
}

void keys(int key, int x, int y){

if(key == GLUT_KEY_UP){
    carY = carY + carSpeed;
    direction = 0.0;
    glutPostRedisplay();
}
if(key == GLUT_KEY_DOWN){
    carY = carY - carSpeed;
    direction = 90.0;
    glutPostRedisplay();

}

if(key == GLUT_KEY_LEFT){
    carX = carX - carSpeed;
    direction = -90.0;
    glutPostRedisplay();
}

if(key == GLUT_KEY_RIGHT){
    carX = carX + carSpeed;
    direction = 180.0;
    glutPostRedisplay();
}}

void renderScene(void){
glClear (GL_COLOR_BUFFER_BIT);
glLoadIdentity();
drawPlayground();
glPushMatrix();
glRotatef(direction, 0.0, 0.0, 1.0);
glTranslatef(carX, carY,0.0);
drawcar();
glPopMatrix();
glFlush();}

int main(int argc, char** argv){
   glutInit(&argc, argv);
   glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
   glutInitWindowSize (400, 400);
   glutInitWindowPosition (100, 100);
   glutCreateWindow("courseWork_2DGame");
   reshape();
   glutDisplayFunc(renderScene);
   glutSpecialFunc(keys);
   glutMainLoop();
   return 0;} 
```

这是我的openGL代码，我画了汽车移动的操场。小车将被移动但箭头，并且随着它移动的方向是根据按下的箭头键小车的旋转。但是，当按下按键时，汽车可以正常平移，但旋转不正确，我认为是因为它没有在其中心旋转，而是在不同的点上旋转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:21:22.673

[我记得有一篇文章在这里](https://stackoverflow.com/questions/685176/opengl-rotation-problem)详细解释了这一点。这家伙在解释整个矩阵层次结构方面做得非常出色。

* * *

如果要围绕其中心旋转对象，首先必须将其平移到原点，然后旋转并将其平移回来。由于变换矩阵从右到左影响您的向量，因此您必须以相反的顺序对这些步骤进行编码。

这是一些伪代码，因为我不知道 OpenGL 例程：

```
PushMatrix();
LoadIdentity();  // Start with a fresh matrix
Translate();     // Move your object to its final destination
Rotate();        // Apply rotations
Draw();          // Draw your object using coordinates relative to the object center
PopMatrix(); 
```

这些矩阵得到应用：

```
v_t = (I * T * R) * v = (I * (T * (R * v))) 
```

所以顺序是：旋转，平移。

编辑：对上述等式的解释。

变换旋转、缩放和平移影响模型-视图-矩阵。模型的每个 3D 点（矢量）都乘以该矩阵以得到其在 3D 空间中的最终点，然后乘以投影矩阵以接收 2D 点（在 2D 屏幕上）。

忽略投影的东西，模型视图矩阵转换的点是：

```
v_t = MV * v 
```

意思是原点v，乘以模型-视图-矩阵MV。

在上面的代码中，我们通过单位矩阵 I、平移 T 和旋转 R 构造了 MV：

```
MV = I * T * R 
```

将所有内容放在一起，您会看到您的点 v 首先受到旋转 R 的影响，然后是平移 T，因此您的点在平移之前先旋转，就像我们希望的那样：

```
v_t = MV * v = (I * T * R) * v = T * (R * v) 
```

在 Translate() 之前调用 Rotate() 将导致：

```
v_t = (I * R * T) * v = R * (T * v) 
```

这会很糟糕：翻译到 3D 中的某个点，然后围绕原点旋转，导致模型出现一些奇怪的失真。

# php - MySQL 语法错误，使用 PHP

> ID：13372869
> 
> 赞同：2
> 
> 时间：2012-11-14T04:06:09.463
> 
> 标签：php, mysql

提前感谢我得到的任何帮助！

我正在用 PHP 编写一个脚本来删除（此时）已经设置了到期日期的所有用户。我收到一个 MySQL 语法错误，我不知道我做错了什么。

错误：

> 查询失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''tablename' WHERE date='01' 附近使用正确的语法

代码：

```
$query="DELETE FROM 'tablename' WHERE date='$exdate'"; 
```

我做了一个回声只是为了测试变量是否被正确传递，它是。

编辑：“dbname”更改为“tablename”只是为了澄清，我的错误。

已解决：再次感谢您的帮助，我没有使用正确的“引号语法”。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T04:08:54.533

Don't use single quote (') on your table name, use (`) instead ( samething lower case of [ ~ ] on your keyboard ).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:14:34.457

date 是保留关键字，您不能在查询中使用它，请使用`date`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T04:15:23.603

不要单引号你的表名，如果有的话使用魔术引号（`）

您不应该通过连接字符串来构建查询。

为了避免 SQL 注入的潜在问题，明智的做法是使用准备好的查询。

我刚刚在 mysql 服务器上确认了这一点

```
mysql> delete from 'sessions' where `last_activity` = 0;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''sessions' where `last_activity` = 0' at line 1
mysql> delete from sessions where `last_activity` = 0;
Query OK, 0 rows affected (0.00 sec) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T04:23:44.150

最简单的修正

```
$query="DELETE FROM tablename WHERE date='$exdate'"; 
```

最好（最安全）的版本是

```
$query="DELETE FROM `tablename` WHERE `date`='$exdate'"; 
```

解释 ：

```
tableNames, columnnames etc are enclosed in quotes like `name` instead of 'name'
Enclosing them in `` is optional usually, but if your tablename,columnane is some
what special word e.g 'table' then you can use `table` and not simply table 
```

在这里你可以使用

```
`tablename` (best) tablename (simplest) but not 'tablename'(worng) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T04:09:15.310

You may need tick marks around `date`:

```
$query="DELETE FROM 'dbname' WHERE `date`='$exdate'"; 
```

However, from your error, it appears the syntax is not correct earlier. If you are doing some sort of escaping, that may be causing this error.

# selenium - 如何使用 phpUnit / selenium 模拟对特定位置的点击？

> ID：13372877
> 
> 赞同：1
> 
> 时间：2012-11-14T04:07:20.777
> 
> 标签：selenium, phpunit

我正在使用 phpunit 3.7 和 selenium 进行测试。为了测试文本突出显示功能，我想单击 div 中的特定 x,y 位置（包含文本）。

我尝试了 moveTo() 函数（[请参阅](https://github.com/sebastianbergmann/phpunit-selenium/blob/master/Tests/Selenium2TestCaseTest.php)），但我总是收到错误，尽管该元素是 PHPUnit_Extensions_Selenium2TestCase_Element 类的一个实例：“PHPUnit_Extensions_Selenium2TestCase_Exception：仅支持移动元素。请传递 PHPUnit_Extensions_Selenium2TestCase_Element 实例。”。

```
$div = $this->byCssSelector('#texthighlight-instant_feedback div div');

if ($div instanceof PHPUnit_Extensions_Selenium2TestCase_Element) {
     $this->moveto(array(
        'element' => $div,
        'xoffset' => 100,
        'yofsset' => 5
     ));
     $this->click();
} else {
    throw new PHPUnit_Extensions_Selenium2TestCase_Exception('no instanceof PHPUnit_Extensions_Selenium2TestCase_Element');
} 
```

此外，“点击”命令似乎不存在或不受支持。我刚开始使用 phpunit / selenium 并希望其他人现在可以如何模拟对元素中特定位置的点击？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:20:30.890

当您检查 SessionCommand\MoveTo.php 中的源代码时，您似乎不应该这样做

```
$this->moveto(array(
    'element' => $div,
    'xoffset' => 100,
    'yofsset' => 5
 )); 
```

但反而：

```
$this->moveto($div); 
```

但是，我得到了 BadMethodCallException：命令 'moveTo' 不存在或不支持，无论我尝试了哪种调用方式。

我想移动光标的原因：所以我可以右键单击一个元素...

**编辑：**

浏览代码时，我突然意识到我正在调用 moveTo，而不是 moveto.... 至少我摆脱了我的异常。顺便说一句：我的建议仍然适用于您的问题。

click() 有什么问题？有两种不同的 click() 方法，一种在会话上 ($this->click())，另一种在元素上 ($div->click)。

**编辑2：**

click() 似乎没有被初始化为会话中的可用命令。定义了 Buttondown 和 buttonup。使用第一个 buttondown 然后 buttonup 应该给你你的点击。

不过我还是不走运。buttondown 和 buttonup 似乎没有将关联数组作为 JSON 参数传递给 Selenium 服务器，因此我无法模拟鼠标中键或右键。

现在我在 Session.php 中添加 click 作为 genericpost 选项，因为这样我可以调用：

```
$this->click('button'=>2); 
```

右键单击我刚刚将光标移到的元素。

# ios - 播放声音文件 iOS

> ID：13372887
> 
> 赞同：0
> 
> 时间：2012-11-14T04:08:54.213
> 
> 标签：ios, avaudioplayer, nsdocumentdirectory

我正在使用`viewDidLoad`方法播放声音文件。声音文件保存在文档目录中。在第一次加载视图时成功播放。但是当我弹出这个视图并返回时，它不会播放。

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *localFilePathSound =[[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"sound.caf"]]];

    if ([[NSFileManager defaultManager] fileExistsAtPath:localFilePathSound]) {
        //NSString *clapPath = [[NSBundle mainBundle] pathForResource:@"scaryVoice" ofType:@"wav"];
        CFURLRef clapURL = (CFURLRef ) [NSURL fileURLWithPath:localFilePathSound];
        AudioServicesCreateSystemSoundID (clapURL, &clappingFileId);
        AudioServicesPlaySystemSound(clappingFileId);
    }
    // Do any additional setup after loading the view from its nib.
    else{
        NSString *clapPath = [[NSBundle mainBundle] pathForResource:@"scaryVoice" ofType:@"wav"];
        CFURLRef clapURL = (CFURLRef ) [NSURL fileURLWithPath:clapPath];
        AudioServicesCreateSystemSoundID (clapURL, &clappingFileId);
        AudioServicesPlaySystemSound(clappingFileId);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:10:52.480

如果您想在从视图返回后播放此方法。`- (void)viewWillAppear:(BOOL)animated` **只需在or** `- (void)viewDidAppear:(BOOL)animated`方法中编写上述代码即可。

```
- (void)viewWillAppear:(BOOL)animated
{
   NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *localFilePathSound =[[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"sound.caf"]]];

    if ([[NSFileManager defaultManager] fileExistsAtPath:localFilePathSound])
    {
        //NSString *clapPath = [[NSBundle mainBundle] pathForResource:@"scaryVoice" ofType:@"wav"];
        CFURLRef clapURL = (CFURLRef ) [NSURL fileURLWithPath:localFilePathSound];
        AudioServicesCreateSystemSoundID (clapURL, &clappingFileId);
        AudioServicesPlaySystemSound(clappingFileId);
    }
    // Do any additional setup after loading the view from its nib.
    else
    {
        NSString *clapPath = [[NSBundle mainBundle] pathForResource:@"scaryVoice" ofType:@"wav"];
        CFURLRef clapURL = (CFURLRef ) [NSURL fileURLWithPath:clapPath];
        AudioServicesCreateSystemSoundID (clapURL, &clappingFileId);
        AudioServicesPlaySystemSound(clappingFileId);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:13:40.823

您的`viewDidLoad`方法仅在视图第一次出现时被调用。要在每次视图出现时都发生一些事情，请将您的代码放入`viewWillAppear:`.

一定`[super viewWillAppear:animated]`要从你的方法调用。

# javascript - 设置javascript变量=“变量”

> ID：13372898
> 
> 赞同：0
> 
> 时间：2012-11-14T04:09:35.650
> 
> 标签：javascript, variables

我有一个名为`temp`.

最终，`temp`将等于许多字符串之一，假设现在它等于`"stack"`。

如何动态设置变量（在这种情况下`stack`，这是一个现有的全局变量）等于字符串`"stack"`？

因此，如果在另一个时间点`temp`设置为`"overflow"`，我该如何设置`overflow = "overflow"`？

谢谢你的帮助！

我已经看到一些答案提到`eval`，而其他人提到使用括号 ~ `this[variable]`，但似乎无法弄清楚..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:14:16.647

运行它，看看会发生什么

```
var x = "something";

window[x] = x;

alert(window.something); 
```

这是有效的，因为 javascript 对象的行为类似于哈希表

但是你最好不要使用 window 对象，否则你可能会覆盖你真正需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:14:20.540

实现这一点的最简单方法是创建一个对象来保存这些动态变量分配。

```
// object to hold temporary variables
var tempVars = {};

// as per your example, we set temp to 'overflow'
var temp = 'overflow';

// now we can set tempVars.overflow
tempVars[temp] = temp; 
```

`tempVars.overflow`然后使用或访问“溢出” `tempVars['overflow']`。从技术上讲，您*可以*通过使用`window`object 而不是 以这种方式分配全局变量`tempVars`，但这通常是一个坏主意。

# java - Sorting with 2D Arrays

> ID：13372899
> 
> 赞同：0
> 
> 时间：2012-11-14T04:09:46.103
> 
> 标签：java, sorting, multidimensional-array

I need help with sorting Random numbers into a 2D array. I have to generate 50 random numbers into a column of the array, then sort the numbers in order (ascending or descending). This is what I have so far and am so lost. Please Help.

***UPDATED VERSION***

```
public static void main(String[] args) 
{
    int rows = 2;
    int columns = 50;

    int[][] anArray = new int[rows][columns];

    Random rand = new Random();

    for (int i = 0; i < anArray.length; i++) 
    {
        for (int j = 0; j < anArray[0].length; j++) 
        {
            int n = rand.nextInt(100);
            anArray[i][j] = n;
        }
    }

    int []temp;
    for (int i=0;i<anArray.length;i++)
        {  
            for (int j=0;j<anArray.length-i;j++ )
            {
                if (anArray[i][j]>anArray[i][j+1])
                {  
                    temp =anArray[j];
                    anArray[j+1]=anArray[j];
                    anArray[j+1]=temp;
                }
            }
        } 

    for (int i = 0; i < anArray.length; i++) 
    {
        for (int j=0;j<anArray.length-i;j++ )
        { 
            System.out.println(anArray[i][j]);
        }
    }          
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:24:57.237

您可以使用自定义对 2D 数组的初始元素进行排序[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)：

```
Arrays.sort(anArray, new Comparator<int[]>() {
    public int compare(int[] lhs, int[] rhs) {
        return lhs[0]-rhs[0];
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:28:39.773

首先，您需要嵌套 for 循环才能将随机数正确插入二维数组。我还更新了我的回复以显示应该如何进行排序。希望这可以帮助！

编辑以满足下面评论中提到的要求。

```
import java.util.Arrays;
import java.util.Random;

public class Test {

/**
 * @param args
 */
public static void main(String[] args) {
    int rows = 2;
    int columns = 50;

    int[][] anArray = new int[rows][columns];

    Random rand = new Random();
    //initialize the first row only
    for (int j = 0; j < anArray[0].length; j++) 
    {
       int n = rand.nextInt(100);
       anArray[0][j] = n;
    }
    System.out.println("-----------Before the Sort----------------");
    for (int i = 0; i < anArray.length; i++) 
    {
        for (int j = 0; j < anArray[0].length; j++)
        {               
           System.out.print(anArray[i][j] + ", ");  //format any way you want
        }
        System.out.println(); //to make each row print on a new line.
    }
    anArray = mySort(anArray);
    System.out.println("-----------After the Sort----------------");
    for (int i = 0; i < anArray.length; i++) 
    {
        for (int j = 0; j < anArray[0].length; j++)
        {               
           System.out.print(anArray[i][j] + ", ");  //format any way you want
        }
        System.out.println(); //to make each row print on a new line.
    }
}

private static int[][] mySort(int[][] anArray) {
    int [][] result = new int[anArray.length][anArray[0].length];
    int thisRow[] = getRow(anArray, 0);
    Arrays.sort(thisRow);
    for(int j = 0; j < thisRow.length; j++){
        result[0][j] = anArray[0][j];
        result[1][j] = thisRow[j];
    }
    return result;
}

private static int[] getRow(int[][] anArray, int row) {
    int thisRow[] = new int[anArray[row].length];
    for(int j = 0; j < anArray[row].length; j++){
        thisRow[j] = anArray[row][j];
    }
    return thisRow;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-07T01:57:18.340

您可以通过考虑 2D 数组 1D 进行排序。让我们考虑一个 3x4 数组。第一个元素的索引是 0，第二个是 1，第三个是 2，第四个是 3，第五个是 4，等等。

从一维索引转换为二维的通用公式：

```
row_index = _1D_index % nRows;
col_index = _1D_index % nCols; 
```

例如，第 5 个元素的一维索引为 4，获取行：4 % 3 = 1，获取 col，4 % 4 = 0，因此您的元素位于 1,0。这一切有什么意义？现在你可以做一个函数

```
int GetAt(int index)
{
    return array[index % nRows][index % nCols];
} 
```

以及类似的东西：

```
void Swap(int index1, int index2)
{
   int r1 = index1 % nRows;
   int c1 = index1 % nCols;
   int r2 = index2 % nRows;
   int c2 = index2 % nCols;
   int temp = array[r1][c1];
   array[r1][c1] = array[r2][c2];
   array[r2][c2] = temp;
} 
```

并对数组进行排序，就好像它是一维的:)

# java - Parsing a XMl to be used in a java servlet

> ID：13372900
> 
> 赞同：0
> 
> 时间：2012-11-14T04:09:45.817
> 
> 标签：java, xml, sax

My XML is the following

```
<result cover="http://ia.mediaimdb.com/images      
/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_
CR0,0,54,74_.jpg" title="The Amazing Spider-Man(2012)"year="2012"
director="Marc Webb" rating="7.5"
details="http://www.imdb.com/title/tt0948470"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BMzk3MTE5MDU5NV5BMl5BanBnXkFtZTYwMjY3NTY3._V1._SX54_CR0,
0,54,74_.jpg" title="Spider-Man(2002)" year="2002"director="Sam Raimi"
rating="7.3" details="http://www.imdb.com/title/tt0145487"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BODUwMDc5Mzc5M15BMl5BanBnXkFtZTcwNDgzOTY0MQ@@._V1._SX54_
CR0,0,54,74_.jpg" title="Spider-Man 3 (2007)" year="2007" director="Sam
Raimi" rating="6.3" details="http://www.imdb.com/title/tt0413300"/>

<result cover="http://i.mediaimdb.
com/images/SF1f0a42ee1aa08d477a576fbbf7562eed/realm/feature.gif" title="
The Amazing Spider-Man 2 (2014)" year="2014" director="Sam Raimi"
rating="6.3" details="http://www.imdb.com/title/tt1872181"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BMjE1ODcyODYxMl5BMl5BanBnXkFtZTcwNjA1NDE3MQ@@._V1._SX54_
CR0,0,54,74_.jpg" title="Spider-Man 2 (2004)" year="2004" director="Sam
Raimi" rating="7.5" details="http://www.imdb.com/title/tt0316654"/>
</results> 
```

I need to parse this XML file using a parser like saxp and output the result as a json string. I am new to SAXParser. All this while i have been googling out but i cannot simply understand it.

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:23:56.513

让我用一个简单的例子来解释。

输入 XML：

```
<Employees>
    <employee name="vels" gender="male"/>
    <employee name="steave" gender="male"/>
</Employees> 
```

使用解析xml`SAXParser`

```
final JSONObject jsonObj = new JSONObject();
SAXParserFactory factory = SAXParserFactory.newInstance();
SAXParser saxParser = factory.newSAXParser();

DefaultHandler handler = new DefaultHandler() {
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        try {
            if (qName.equals("Employees")) {
                // reject root node
                return;
            }
            int len = attributes.getLength();
            HashMap<String, String> map = new HashMap< String, String>();
            for (int i = 0; i < len; i++) {
                String attribName = attributes.getLocalName(i);
                String attribVal = attributes.getValue(i);
                map.put(attribName, attribVal);

            }
            jsonObj.append("employee", map);
        } catch (JSONException ex) {
            // handle excep
        }

    }
};

saxParser.parse("c:/employee.xml", handler);
String jSonOutput = jsonObj.toString();
// process this json outpout
System.out.println(jSonOutput); 
```

输出（手动格式化）：

```
 {"employee":
    [
     {"name":"vels","gender":"male"},
     {"name":"steave","gender":"male"}
    ]
   } 
```

这是[Java SAX Parser 和 Java SAX DefaultHandler](http://tutorials.jenkov.com/java-xml/sax.html)的一个简单而体面的示例。希望你能继续前进。

# javascript - 用双引号替换所有使用单引号的html属性定义

> ID：13372908
> 
> 赞同：2
> 
> 时间：2012-11-14T04:10:46.587
> 
> 标签：javascript, jquery, dom

我有一个 html 字符串，我想用双引号替换任何用单引号设置的 html 属性实例。

例如，我想替换

```
<script src='foo.js'></script> 
```

和

```
<script src="foo.js"></script> 
```

但是，我想这样做而不影响可能在 javascript 语句或 html 中的文本中的任何单引号。

例如

```
<script> var foo = '67'; </script> 
```

应该不受影响并且

```
<div id='foo'> 'hi' </div> 
```

应该成为

```
<div id="foo"> 'hi' </div> 
```

有什么简单的方法可以做到这一点？

对于给定的元素，使用 jquery 选择它然后读取它的 outerHTML 会这样做，但我想一次对整个 html 页面执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:17:37.427

试试这个：

```
var str = "<br style   = 'width:100px'/>   test link<a href=\"http://www\"></a>";
var regex = /<\w+\s*(\w+\s*=\s*(['][^']*['])|(["][^"]*["]))*\s*[\/]?>/g;
var rstr = str.replace(regex, function($0,$1,$2){
    return $0.replace($2, $2.replace(/'/g, '"'));
});
console.log('replaced string = ' + rstr); 
```

您可以对其进行反思以严格匹配您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:21:34.110

回答我自己的问题，因为我认为最简单的解决方案是这个小提琴中显示的内容，不需要 jquery 或正则表达式：

[http://jsfiddle.net/QdUR5/1/](http://jsfiddle.net/QdUR5/1/)

```
<html id="foo"></html>​
var htmlString = 
  '<head>' +
  '<script type="text/javascript" src=\'main.js\'></scr' + 'ipt>' +
  '</head>' +
  '<body onload=\'onLoad()\'>' +
  '</body>' ;

document.getElementById('foo').innerHTML = htmlString;
console.log(document.getElementById('foo').outerHTML); 
```

​</p>

基本上你只需要将html元素的内部html设置为不带html标签的html字符串，然后输出html元素的外部html。

我认为这比使用正则表达式要简单一些，尽管这是一个很棒的正则表达式 Mike :)

# python-3.x - Cairo 示例适用于 Python 2.7，但不适用于 Python 3

> ID：13372909
> 
> 赞同：4
> 
> 时间：2012-11-14T04:10:47.867
> 
> 标签：python-3.x, cairo

最简单的例子。我们通过 Gtk 创建一个窗口，我们在其中添加 Gtk.DrawingArea 的绘图区域，并在其上通过 Cairo 绘制文本。

例子：

```
#!/usr/bin/env python
from gi.repository import Gtk
import cairo

class MyWindow (Gtk.Window):

    def __init__(self):
        Gtk.Window.__init__(self, title='MyWindow')

        darea = Gtk.DrawingArea()
        darea.connect('draw', self.on_draw)
        self.add(darea)

    def on_draw(self, widget, ctx):
        ctx.set_source_rgb(0, 0, 0)
        ctx.select_font_face("Sans", cairo.FONT_SLANT_NORMAL,
            cairo.FONT_WEIGHT_NORMAL)
        ctx.set_font_size(20)
        ctx.move_to(10, 20)
        ctx.show_text("Text...")

win = MyWindow()
win.connect('delete-event', Gtk.main_quit)
win.show_all()
Gtk.main() 
```

在我看来，Python 2.7 上的一切都完美无缺，但只需要为 Python3 更改 Python 并且不再绘制文本。可能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T19:37:52.197

有同样的问题...事实证明，如果您丢失了一些包裹，您将不会收到任何投诉。

尝试 apt-get install python3-gi-cairo 并再试一次。为我工作（包括你的代码）。

# ios - 在 RemoteIO 音频单元中播放 vorbis 时出现严重失真

> ID：13372918
> 
> 赞同：1
> 
> 时间：2012-11-14T04:11:42.467
> 
> 标签：ios, audiounit

我正在尝试在 RemoteIO 中播放 Ogg Vorbis 文件，我使用以下代码从 vorbis 获取 PCM 样本：我正在尝试在 RemoteIO 中播放 Ogg Vorbis 文件，我使用以下代码从沃尔比斯：

```
ssize_t r = ov_read(ds->vf,pcm->buf,sizeof(pcm->buf),SYSTEM_ENDIAN,2,1,NULL); 
```

根据 ov_read 上的文档，这会将样本以小端格式（16 位有符号样本）放入缓冲区中。这很好用，我一直在向 RemoteIO 提供这些数据，但是声音严重失真，尽管可以识别并在正确的时间播放。这是我正在使用的格式：

```
AudioStreamBasicDescription streamFormat;
streamFormat.mSampleRate = 44100.0;
streamFormat.mFormatID = kAudioFormatLinearPCM;
streamFormat.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
streamFormat.mBytesPerPacket = 4;
streamFormat.mFramesPerPacket = 1;
streamFormat.mBytesPerFrame = 4;
streamFormat.mChannelsPerFrame = 2;
streamFormat.mBitsPerChannel = 16; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:54:16.310

查看您的代码时，有一些事情会跳出来，尽管我不确定它们中的任何一个（或全部）是否一定对您所描述的问题负责。

首先，`streamFormat.mBytesPerPacket`如果你在做立体处理，应该是 8。在 iOS/OSX 上，了解帧、通道和数据包之间的关系很重要。它看起来像这样：

![帧、通道和数据包，哦，天哪！](../Images/faff8b025b2078ea1822125943b17582.png)

此外，我会添加`kAudioFormatFlagsNativeEndian`到`streamFormat.mFormatFlags`. 另外，为了安全起见，我建议设置`streamFormat.mReserved`为 0。

我有点怀疑`SYSTEM_ENDIAN`您调用中的标志`ov_read()`是否会正确地为您提供数据，因此如果有相应的大/小端标志，我建议您也尝试一下。

# c - scanf 第二次不会要求输入

> ID：13372923
> 
> 赞同：6
> 
> 时间：2012-11-14T04:12:22.867
> 
> 标签：c, scanf

```
#include "stdio.h"

int main(void)
{

     int order, nextp, N=3;
     char cont;
     nextp = 0;
     printf("\nShould we continue (y or n): ");
     scanf("%c", &cont);
     if (cont != 'y') return;
     for(; nextp < N; nextp++)
     {
        printf("Enter order number: ");
        scanf("%d", &order);
        printf("you have entered %d\n", order);
        printf("okay now continue with cont\n");

        printf("enter cont y or n: ");
        scanf("%c", &cont);
        if (cont != 'y')
        {
            printf("\nnot equal to y\n");
            break;
        }
        printf("after intepreting t[0]");
      }

   return 0;
} 
```

输出看起来像这样

```
Should we continue (y or n): y
Enter order number: 45
you have entered 45
okay now continue with cont
enter cont y or n: 
not equal to y 
```

第二个输入被跳过。为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-22T14:11:42.913

由于 stdin 中已经有换行符，这种情况正在发生。利用

```
scanf(" %c", &cont); 
```

代替

```
scanf("%c", &cont); 
```

注意 %c 前的一个空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T04:18:35.570

消耗完数字（本例中为 45）后`scanf("%d", &order);`，还剩下一个换行符。您可以使用`scanf("%d\n", &order)`它来消耗回报。

可以在这里找到另一个答案：

[scanf() 将新行字符留在缓冲区中？](https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-buffer)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T04:17:37.560

这就是为什么`scanf`通常不首选字符输入的原因。在前一个输入之后有一个左回车。

例如，如果您`getchar()`在订单输入后添加一个，您的问题将得到解决，但这不是干净的代码。您也可以通过替换`cont != 'y'`来明确地看到这一点`cont != '\n'`。

相反，使用`getchar()`您的所有输入并检查 \n

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T09:03:05.747

您可以使用 fflush()

```
printf("enter cont y or n: ");
fflush(stdin);
scanf("%c", &cont); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T04:40:46.980

对于大多数转换，scanf 将跳过空格，但对于 char 格式（“%c”），您必须使用格式（“%c”）中的显式空格来跳过空格，如下所述：

[C - 试图读取单个字符](https://stackoverflow.com/questions/1959255/c-trying-to-read-a-single-char-from-stdin-and-failing-w-scanf-getchar)

这也在[scanf](http://linux.die.net/man/3/scanf)文档中进行了解释，但它令人困惑，并且可能更好地使用其他人提到的其他东西。

# php - 在维护wordpress mysql期间锁定写入数据库

> ID：13372931
> 
> 赞同：1
> 
> 时间：2012-11-14T04:13:09.630
> 
> 标签：php, mysql, wordpress

我正在手动更新 WordPress。

我将数据库备份到`.sql`文件中。

有什么方法可以暂时阻止写入数据库，同时仍然允许读取整个 MySQL 数据库？这是为了确保

*   备份的数据库是最新的
*   用户仍然可以在不中断的情况下浏览我网站上的内容（我会发布维护通知，您的帖子将不会被保存等）

更新
升级活动在此仅作为示例。我也计划直接对数据库进行一些更改，这需要一段时间。

我确定我已经看到网站（著名的）显示它们正在维护中，并且我的评论/帖子不会被记录（不写），但我仍然能够浏览他们的网站（阅读没问题）。我认为这是一个非常合理的需求，不是吗？

我相信一定有办法

*   向用户提供网页缓存（服务器端），同时在长达几个小时内完全不连接数据库（用户无法登录/注册，但没关系）？你认为我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:51:12.777

要阻止任何访问者发表评论等，您可以进入 phpmyadmin，找到 wordpress 用户帐户（在 wp-config.php 中定义的 DB_USER）并撤销其插入、编辑和更新权限。但是，当他们仍然尝试忽略您的消息时，这可能不会优雅地降级为用户友好的错误消息。而且，如果您通过 php 脚本以 wordpress 自行安装的方式进行更新，它可能仍需要这些权限来进行任何必要的修改，例如向选项表添加选项。

您从哪个版本升级到哪个版本？我知道安装花了我 30 秒，我无法想象更新之间的数据库会有巨大的变化。但话又说回来，WP 可以高度定制，我不知道您的网站偏离标准安装的程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:51:38.797

抱歉，我要睡觉了，所以我不会深入讨论，但可以肯定的是，如果您有两个 MySQL 用户，一个用于您的网站读/写，另一个用于维护。您的第一个用户，您可以暂时将他的权限更改为只读，这应该可以工作。

# c - C 中的类型提升和类型转换

> ID：13372935
> 
> 赞同：2
> 
> 时间：2012-11-14T04:13:20.383
> 
> 标签：c, operators, type-conversion, binary-operators

我有以下变量：

```
UWORD64 length;     
UWORD32 thumbnail_offset;
UWORD32 thumbnail_length;
UWORD64 sum; 
```

这就是我想要做的：

```
sum = (UWORD64)(thumbnail_offset + thumbnail_length);
main_image_length = (UWORD32)(length - sum); 
```

但是，第一行给了我错误：*conversion to non-scalar type requested*

第二行给了我错误：*二进制的无效操作数-（有'UWORD64'和'UWORD64'）*

我不明白问题是什么。不应该提升低等的类型吗？为什么这会引起问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:35:03.523

它可能是类型 def 或未定义的值。我正在使用 MSVC 2012 并且只使用 Microsoft 内置类型。编译没有问题。

```
unsigned __int64 length = 100;     
unsigned __int32 thumbnail_offset = 32;
unsigned __int32 thumbnail_length = 25000000;
unsigned __int64 sum = 0;
unsigned __int32 main_image_length = 0;

//And this is what I want to do:

sum = (unsigned __int64 )(thumbnail_offset + thumbnail_length);
main_image_length = (unsigned __int32)(length - sum); 
```

# php - 如何在 jQuery Datepicker 中插入 PHP 值

> ID：13372937
> 
> 赞同：2
> 
> 时间：2012-11-14T04:13:27.523
> 
> 标签：php, jquery, datepicker

我有以下代码来设置 datepicker 的最小日期。

```
$( "#sd" ).datepicker({
    // before datepicker opens run this function
    beforeShow: function(){
        // this gets today's date       
        var theDate = new Date();
        // sets "theDate" 2 days ahead of today
        theDate.setDate(theDate.getDate() + 2);
        // set min date as 2 days from today
        $(this).datepicker('option','minDate',theDate);         
    },
    // When datepicker for start date closes run this function
    onClose: function(){
        // this gets the selected start date        
        var theDate = new Date($(this).datepicker('getDate'));
        // this sets "theDate" 1 day forward of start date
        theDate.setDate(theDate.getDate() + 1);
        // set min date for the end date as one day after start date
        $('#ed').datepicker('option','minDate',theDate);

    }
}); 
```

如果今天的日期是 11/14/2012，那么 datepicker 的值就是 11/16/2012。但是，由于日期应该基于服务器的日期时间，所以我不能使用 javascript 日期，因为它将获取计算机的当前日期而不是服务器的日期。

所以我所做的就是将其更改为以下代码：

```
$( "#sd" ).datepicker({
    // before datepicker opens run this function
    beforeShow: function(){
        // this gets today's date       
        var theDate = new Date();
        // sets "theDate" 2 days ahead of today
        //theDate.setDate(theDate.getDate() + 2);
        theDate.setDate(<?php echo $this->session->userdata('checkin') ?>);
        // set min date as 2 days from today
        $(this).datepicker('option','minDate',theDate);         
    },
    // When datepicker for start date closes run this function
    onClose: function(){
        // this gets the selected start date        
        var theDate = new Date($(this).datepicker('getDate'));
        // this sets "theDate" 1 day forward of start date
        theDate.setDate(theDate.getDate() + 1);
        // set min date for the end date as one day after start date
        $('#ed').datepicker('option','minDate',theDate);

    }
}); 
```

请看一下这一行：

```
theDate.setDate(<?php echo $this->session->userdata('checkin') ?>); 
```

顺便说一句，我正在使用 codeigniter 会话。

这很好用，但问题是 datepicker 中的最小日期未设置为 2012 年 11 月 16 日，而是设置为 2012 年 11 月 2 日。

任何人都知道如何将 PHP 值正确插入到 jQuery 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:32:35.730

我已经找到了答案。这里是：

```
$( "#sd" ).datepicker({
    // before datepicker opens run this function
    beforeShow: function(){
        // this gets today's date       
        var theDate = new Date();
        theDate.setDate(<?php echo date('d', strtotime($this->session->userdata('checkin'))) ?>);
        // set min date as 2 days from today
        $(this).datepicker('option','minDate',theDate);         
    },
    // When datepicker for start date closes run this function
    onClose: function(){
        // this gets the selected start date        
        var theDate = new Date($(this).datepicker('getDate'));
        // this sets "theDate" 1 day forward of start date
        theDate.setDate(theDate.getDate() + 1);
        // set min date for the end date as one day after start date
        $('#ed').datepicker('option','minDate',theDate);

    }
}); 
```

它应该只提取日期而不是整个日期。

```
theDate.setDate(<?php echo date('d', strtotime($this->session->userdata('checkin'))) ?>); 
```

代替

```
theDate.setDate(<?php echo $this->session->userdata('checkin') ?>); 
```

# ruby-on-rails-3 - 得到 mongoid <-> 制造不工作 habtm

> ID：13372945
> 
> 赞同：0
> 
> 时间：2012-11-14T04:14:21.123
> 
> 标签：ruby-on-rails-3, mongoid3, fabrication-gem

我对制造和 mongoid 上下文中的“has_and_belongs_to_many”和“accept_nested_attributes_for”有疑问

我有一个可以提供许多服务的位置

```
class Location
  include Mongoid::Document

  field :name
  field :service

  has_and_belongs_to_many :services, inverse_of: :locations, autosave: true, dependent: :delete
  accepts_nested_attributes_for :services

  attr_accessible :services, :name

class Service
  include Mongoid::Document

  field :name, type: String

  has_and_belongs_to_many :locations, inverse_of: :services, autosave: true
  accepts_nested_attributes_for :locations
  attr_accessible :name, :icon, :description 
```

在我的制造文件上我有这个

```
Fabricator(:service) do
  initialize_with { Location.produce(:location) }
  name "Service Name"
  description "Lorem ipsum est lauda en radios"
  location
end

Fabricator(:location) do
  name "Special Club"
  service
end 
```

在这种情况下，我的 rspec 挂断了。

有人可以提供一个带有 *accept_nested_attributes* 和/或 *has_and_belongs_to_many* 以及 mongoid 和制造宝石的工作示例（它与 mongoid 一起“开箱即用”吗？

有什么建议么？

我正在使用 mongoid3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T05:16:07.633

这一切都取决于您如何使用 Fabrication。

用于测试控制器的嵌套参数是一个痛苦的世界，您需要为您的 params 哈希进行一些手工制作。

对于模型，你应该试试这个：

```
Fabricator(:service) do
  name "Service Name"
  description "Lorem ipsum est lauda en radios"
  locations {[Fabricate.build(:location)]}
end

Fabricator(:location) do
  name "Special Club"
  service
end 
```

您的关系可能不需要`:inverse_of`。

# javascript - 邪恶的 PDF - 等待 AJAX 请求完成

> ID：13372946
> 
> 赞同：1
> 
> 时间：2012-11-14T04:14:25.687
> 
> 标签：javascript, ruby-on-rails, ajax, pdf-generation, wicked-pdf

我正在尝试使用 WickedPDF 生成 PDF，并且我的所有静态 HTML/CSS 都在加载。我在页面上有一些使用 AJAX 请求填充的元素，但它们没有显示在 PDF 中。

我知道 :redirect_delay 可以作为参数传递，但这在等待我的 AJAX 调用完成的情况下没有帮助。由于我没有看到任何提到 Wicked PDF 和 AJAX 调用生成的页面，我想我会问：

我正在尝试使用 Wicked PDF（或其他项目）做的事情，还是我必须在生成 PDF 之前将所有内容传递到前端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:03:15.803

这应该有效：

```
render :pdf => 'out.pdf',
       :javascript_delay => 5000 
```

# python - 使用 uuid.uuid4() 创建新文件

> ID：13372951
> 
> 赞同：15
> 
> 时间：2012-11-14T04:15:21.443
> 
> 标签：python

创建文件时如何将 uuid.uuid4() 值与文字连接起来？以下内容不正确，但应该说明我正在尝试做的事情......

```
fo = open(uuid.uuid4() + ".txt", "wb") 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-14T04:17:08.413

您需要将 转换`uuid`为`str`：

```
>>> import uuid
>>> str(uuid.uuid4()) + ".txt"
'13eb9327-f40e-4ef1-8020-1c36af1b4b70.txt' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T04:24:46.477

此版本不包含`-`字符串中的

```
fo = open(uuid.uuid4().hex + ".txt", "wb") 
```

使用上下文管理器打开文件通常是个好主意

```
with open(uuid.uuid4().hex + ".txt", "wb") as fo:
    # do stuff with fo
    # fo will be closed automatically 
```

这是一个循环中的示例

```
for item in data:
    with open(uuid.uuid4().hex + ".txt", "wb") as fo:
        fo.write(item) 
```

# css - 全宽背景具有顶部边距以不切断图像顶部（wp-supersized）

> ID：13372956
> 
> 赞同：2
> 
> 时间：2012-11-14T04:15:39.927
> 
> 标签：css, background, responsive-design

我正在使用 wp-supersized 设置动态调整大小的全宽背景。[http://wordpress.org/extend/plugins/wp-supersized/](http://wordpress.org/extend/plugins/wp-supersized/)

这是我已经实施的：http: [//www.preview.sharonblance.com/](http://www.preview.sharonblance.com/)

我有一个高度为 154px 的固定高度标题，我希望图像的顶部从标题的底部填充屏幕，这样图像的顶部就不会被切断。

我认为该插件使用了浏览器的全高，但我想尝试改变这一点。谁能建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T19:47:55.037

希望现在回答其中之一永远不会太晚。我的回复受到这篇文章的启发，不幸的是，这对我不起作用，但让我们找到一个解决方案：[https ://github.com/buildinternet/supersized/issues/72#issuecomment-6427232](https://github.com/buildinternet/supersized/issues/72#issuecomment-6427232)

首先，你需要添加这个 javascript（我把它放在 $.supersized 调用之后）：

```
$('#supersized li').height($(window).height() - 154); 
```

然后，添加一些 CSS：

```
#supersized li { top: 154px !important; }
#supersized li img {
    width: auto !important;
    max-height: 100% !important;
    top: 0 !important;
} 
```

最后，您可能希望在调试时禁用超大覆盖：

```
#supersized_overlay { display: none !important; } 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:13:31.107

我想这已经解决了，但无论如何都在这里！

找到你的 supersized.css 文件并编辑如下：

```
#supersized img {
padding-top:154px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T06:56:22.640

`#supersized li`对于这个类添加`top: 154px;`我的意思是标题的高度。希望它会奏效。

# javascript - 检查字符串是否包含 JavaScript 中的特定数字

> ID：13372958
> 
> 赞同：0
> 
> 时间：2012-11-14T04:15:56.650
> 
> 标签：javascript, regex

> **可能重复：**
> [JavaScript：字符串包含](https://stackoverflow.com/questions/1789945/javascript-string-contains)

我想检查一个字符串是否包含 JavaScript 中的特定数字，如何`s contain d`在下面的代码中重写语句？

```
var s = '11/14/2012';
var d = '14';
if (s contain d) {
    //...
} 
```

我的情况类似于[Check if a string contains a certain number](https://stackoverflow.com/questions/1553462/check-if-a-string-contains-a-certain-number)，但是如何在 JavaScript 中实现此操作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:18:08.363

更简单的方法是使用 index Of。

```
if(s.indexOf(d) > -1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T04:23:04.417

```
var s = '11/14/2012';
var d = '14';
if (s.match(d)) {
   alert('Found');
}​ 
```

# asp.net - ASP>NET devexpress 网格高度的问题

> ID：13372960
> 
> 赞同：1
> 
> 时间：2012-11-14T04:16:04.653
> 
> 标签：asp.net, devexpress

我正在使用带有editform模板的devexpress gridview。我的问题是网格中有很多行，所以当我在页面底部编辑行时，编辑表单位于屏幕下方，我必须向下滚动才能查看整个编辑表单。有没有办法将此网格设置为自动高度，所以我不必向下滚动。即使我将其设为假，也会始终显示垂直滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:17:39.630

您可以使用 PopUpEditForm 这样您就不必在屏幕上向下滚动并且它出现在屏幕本身的中间。

您可以对网格的 PopupEditForm 使用以下设置

```
<SettingsEditing EditFormColumnCount="2" Mode="PopupEditForm" PopupEditFormWidth="800px"
PopupEditFormHeight="320px" PopupEditFormVerticalAlign="Below" PopupEditFormHorizontalAlign="Center"
PopupEditFormAllowResize="false" /> 
```

PopupEditFormWidth,PopupEditFormHeight - 您可以将其更改为您想要的任何大小，以便正确放置所有控件。

# bundle - 在光盘中分发 Java jar 应用程序

> ID：13372969
> 
> 赞同：1
> 
> 时间：2012-11-14T04:17:24.000
> 
> 标签：bundle, java, executable-jar, dvd

我正在尝试使用 DVD 发布我的 Jar 应用程序，并且只需要用户运行一个 exe 并启动该程序。所以我编写了一个批处理文件，它使用同一张 DVD 中附带的私有 JRE 运行 jar。

现在，当我从 DVD 运行批处理文件时，启动应用程序需要一分钟多的时间，因为 JRE 也在 DVD 中。

当我将 JRE 复制到硬盘中并在我的批处理文件中使用它来启动程序时，它运行得很快。但是，我不会在用户的硬盘中复制 JRE 的路径。我将如何在我的批处理文件中检测到相同的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:30:12.733

我认为解决问题的最佳方法是使用 Java 应用程序安装程序，并将安装程序放在 DVD 上。一些 Java 应用程序安装程序包括捆绑 JRE 的能力，例如[Launch4J](http://launch4j.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:32:05.710

好的，我建议更新您的批处理脚本以查找 JAVA_HOME。如果存在并且与您正在运行的版本相同或更新，则改用该 JRE。

有关如何执行此操作的说明，请参阅以下博客。 [http://www2.hawaii.edu/~sdunan/study_guides/ics211/WindowsCommandLineCompiling.html](http://www2.hawaii.edu/~sdunan/study_guides/ics211/WindowsCommandLineCompiling.html)

# visual-studio-2010 - 将 Qt 与 Visual Studio 2010 Express 一起使用

> ID：13372971
> 
> 赞同：1
> 
> 时间：2012-11-14T04:17:27.950
> 
> 标签：visual-studio-2010, qt

如何将 Qt 与 Visual Studio 2010 Express Edition 一起使用？express 版不允许插件，所以我不能使用 VS 的 Qt 插件。我找不到任何我可以关注的东西；关于这个中心的大多数讨论都集中在为 VS 2010 构建 Qt 上，但现在已经有预编译的库，这应该不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:08:18.403

*   [从http://releases.qt-project.org/qt4/source/qt-win-opensource-4.8.3-vs2010.exe](http://releases.qt-project.org/qt4/source/qt-win-opensource-4.8.3-vs2010.exe)下载并安装 Qt 库
*   使用 qmake 项目文件 (.pro) 设置您的项目
*   在命令行上，`qmake`然后调用`nmake`
*   使用 IDE，[QtCreator](http://qt.digia.com/Product/Developer-Tools/)或[Eclipse](https://stackoverflow.com/questions/12670710/eclipse-integrate-with-qt/12670991)都可以工作 - 两者都可以设置为使用 qmake 作为构建工具

本质上，您基本上只需要来自 VS Express 的编译器和链接器来构建 Qt 应用程序。

# python - 在 Amazon AWS 上的 Python 中捕获 SMTP 异常

> ID：13372981
> 
> 赞同：2
> 
> 时间：2012-11-14T04:18:57.627
> 
> 标签：python, amazon-web-services, smtp

我正在使用 Python 和 smtplib 通过 Amazon SES 发送电子邮件。如何捕获特定的发送错误？

例如，Amazon SES 可能会告诉我“此地址已列入黑名单”或“您已超出您的费率”或“您已超出您的容量配额”，我想对这些消息采取行动。

我有一个捕获黑名单的片段（我认为），如下所示。我真的不知道如何调试这些东西，因为异常只会出现在重型环境中，如果我触发异常，那么我担心亚马逊会取消我的配额。

```
try:
    msg = EmailMultiAlternatives(subject, plain, from_address, [to_address])
    msg.attach_alternative(html, "text/html")
    msg.send()
except smtplib.SMTPResponseException as e:
    error_code,error_msg = e.smtp_code, e.smtp_error
    if error_code==554 and error_msg=='Message rejected: Address blacklisted.':
        # do appropriate action for blacklisting
    else:
        # do appropriate action for throttling
    else:
        # log any other SMTP exceptions 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:04:43.830

您可以使用[Amazon SES 邮箱模拟器](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/MailboxSimulator.html)生成黑名单错误。

发送电子邮件至 blacklist@simulator.amazonses.com 以验证您的应用程序是否正确处理了由此产生的错误。如果您使用邮箱模拟器地址，您的退回统计信息不会受到影响。无论您的 Amazon SES 账户是处于沙盒模式还是生产模式，您都可以运行这些测试。

邮箱模拟器当前不允许您测试限制或配额异常。但是，您的异常处理代码应该足以处理这些异常。我建议您检查异常字符串 using`find()`以适应错误消息的任何添加。

```
if error_code == 554 and error_msg.find('Address blacklisted') >= 0:
    # handle blacklisting
else: 
    ... 
```

作为参考，以下是您可以检查的一些 SMTP 响应：

*   黑名单是“554 邮件被拒绝：地址被列入黑名单”
*   未验证地址为“554 邮件被拒绝：电子邮件地址未验证”。
*   Exceeded Send Rate 是“454 Throttling failure: Maximum sent rate exceeded”。
*   Exceeded Quota 是“454 限制失败：已超出每日邮件配额”。

# ssl - SSL 证书中间 CA

> ID：13372982
> 
> 赞同：1
> 
> 时间：2012-11-14T04:19:13.447
> 
> 标签：ssl, openssl

所以我有一个私钥和一个 SSL 证书。有没有办法找出哪个 CA 签署了它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:50:59.000

您可以使用大多数浏览器进行检查。确保您已导航到您的站点，以便证书已与您的浏览器握手。使用 Firefox，转到工具 -> 选项，然后在弹出的对话框中，您会看到一个“高级”图标。单击它，然后您将在下方看到另一个“加密”选项卡。也单击该选项卡。

现在您可以看到一个显示“查看证书”的按钮。单击该按钮将打开一个对话窗口，显示您的系统识别的证书。“服务器”选项卡是您可以找到站点证书的地方，它会显示哪个 CA 签署了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:02:50.213

颁发您的证书的 CA 的名称在颁发者专有名称 (DN) 中。

您可以使用 OpenSSL 看到所有这些：

```
openssl x509 -text -noout -in the-certificate.pem 
```

证书颁发者 DN 的名称应与 CA 证书主题 DN 的名称匹配。

# windows-8 - 在 Windows Metro App C#/XAML 中使用 Share Charm 以编程方式将文件附加到电子邮件时遇到问题

> ID：13372983
> 
> 赞同：3
> 
> 时间：2012-11-14T04:19:17.473
> 
> 标签：windows-8, windows-runtime, charms-bar

我只是尝试使用 Share Charm 将 DocumentsLibrary 中名为**Document.pdf**的**文件**附加到电子邮件中。我下面的代码在本地机器上完美运行：

```
 private async void OnDataRequestedFiles(DataTransferManager sender, DataRequestedEventArgs e)
    {
        List<IStorageItem> shares = new List<IStorageItem>();
        StorageFile filetoShare = await Windows.Storage.KnownFolders.DocumentsLibrary.GetFileAsync("Document.pdf");

        if (filetoShare != null)
        {
            shares.Add(filetoShare);
            filetoShare = null;
        }

        if (shares != null)
        {
            DataPackage requestData = e.Request.Data;
            requestData.Properties.Title = "Title";
            requestData.Properties.Description = "Description"; // The description is optional.
            requestData.SetStorageItems(shares);
            shares = null;

        }
        else
        {
            e.Request.FailWithDisplayText("File not Found.");
        }
    } 
```

但是当我在 Windows Surface 平板电脑上运行*完全相同的代码*时，我会感到可怕**的“现在没有什么可分享的”。**在 Charms 弹出区域的右侧。

这里有一些背景知识可以提供帮助：

*   我不想**使用**文件选择器...我知道我正在寻找的确切文件
*   我已经在清单中启用了文档库功能
*   我在清单中为 pdf 添加了文件类型关联
*   是的，该文件确实存在并且在文档库中
*   在表面上的邮件应用程序中正确设置了电子邮件帐户
*   我可以从平板电脑成功发送文本电子邮件...只是不能发送带有附件的电子邮件

就像我说的那样，这可以在我的 Win 8 开发机器上正常运行……只是在 Surface 上不行。我想知道 Surface 是否有不同的文件或文件夹权限？

感谢您的帮助...这让我发疯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T20:37:50.493

我终于弄明白了——问题是我的事件处理程序是**异步**的（这样我就可以使用**await**来设置**StorageFile**变量）。

我通过在代码前面设置**StorageFile**变量来解决它，以便在调用事件处理程序时它已经可用。

我仍然不知道为什么它在我的开发机器上工作，但在 WinRT 表面上没有......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T23:06:27.173

处理程序可以是异步方法。在这种情况下，使用 DataTransferManager 至关重要。请参阅[专门针对此方案的 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/apps/hh871371.aspx)。为方便起见，将页面中的代码复制到此处：

```
private void RegisterForShare()
{
    DataTransferManager dataTransferManager = DataTransferManager.GetForCurrentView();
    dataTransferManager.DataRequested += new TypedEventHandler<DataTransferManager, 
        DataRequestedEventArgs>(this.ShareStorageItemsHandler);
}

private async void ShareStorageItemsHandler(DataTransferManager sender, 
    DataRequestedEventArgs e)
{
    DataRequest request = e.Request;
    request.Data.Properties.Title = "Share StorageItems Example";
    request.Data.Properties.Description = "Demonstrates how to share files.";

    // Because we are making async calls in the DataRequested event handler,
    // we need to get the deferral first.
    DataRequestDeferral deferral = request.GetDeferral();  

    // Make sure we always call Complete on the deferral.
    try
    {
        StorageFile logoFile = 
            await Package.Current.InstalledLocation.GetFileAsync("Assets\\Logo.png");
        List<IStorageItem> storageItems = new List<IStorageItem>();
        storageItems.Add(logoFile);
        request.Data.SetStorageItems(storageItems);       
    }
    finally
    {
        deferral.Complete();
    }
} 
```

在调用任何异步方法之前放置以下语句至关重要：

```
DataTransferManager dataTransferManager = DataTransferManager.GetForCurrentView(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T21:55:13.657

您只有半秒钟的时间来完成整个工作（获取文件、附加...等）。如果出现半秒截止日期，您将收到此“疯狂驾驶”消息。考虑实施一些可恢复的逻辑并将消息替换为“正在准备附件，请在几秒钟后重试”（或其他）。你的 WinRT 设备可能只是比你的开发机器慢。后者只是在截止日期前完成工作......

# jquery - 在 div 中排除选择器

> ID：13372985
> 
> 赞同：1
> 
> 时间：2012-11-14T04:19:45.090
> 
> 标签：jquery

我有一个要启用点击功能的 div，但不是 div 内的“a”标签或它正在切换的 div：

**HTML**

```
 <div class='row client-outstandings'>
  <div class='twelve columns'>
    <div class='panel'>
      <h3><a href="{% url clients.views.view_client c.client.id %}" target="_blank">{{ c.client }}</a> - {{ c.total|currency }}</h3>
      <div class='client-outstandings-details' style='display:none;'><a href="">Blah blah</a> </div>
    </div>
  </div>
</div> 
```

**代码：**

```
$(function () {

    $('.client-outstandings').live('click', function () {
        $(this).find('.client-outstandings-details').toggle('fade');
    });

}); 
```

我正在尝试使“.client-outstandings”div 或“.client-outstandings-details”中的任何“a”标签都不会触发切换。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:34:58.953

`live`不推荐使用方法，您可以改用`on`方法：

```
$(document).on('click', '.client-outstandings', function () { 
```

为了防止事件冒泡，您可以使用`stopPropagation`方法：

```
$('a').click(function(event) {
    event.stopPropagation()
}) 
```

请注意，对于使用`on`方法委托事件，您应该使用静态父元素（*更好*）或文档对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:51:54.983

我认为您正在寻找以下内容：

**HTML**

```
<div class='row client-outstandings'>
  <div class='twelve columns'>
    <div class='panel'>
      <h3><a href="{% url clients.views.view_client c.client.id %}" target="_blank">{{ c.client }}</a> - {{ c.total|currency }}</h3>
      <a href="" class="outstandingsAnchor">Blah blah</a>
    </div>
  </div>
</div> 
```

**jQuery**

```
$(function () {
    $(document).on('click', 'a.outstandingsAnchor', toggle(function() {(
       $(this).wrap('<div class="client-outstandings-details" />');
    }, function() {
       $(this).unwrap();
   )};
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T04:32:59.607

你可以试试这个

```
$('.client-outstandings').live('click', function () {
    $(this).find('.client-outstandings-details').toggle('fade');
});

$('.client-outstandings a').live('click', function(e){
    e.stopPropagation();
    return true;
}); 
```

[**演示**](http://jsfiddle.net/zpXty/5/)。

但我建议你使用`on`. 使用`on`代码是

```
$(document).on('click', '.client-outstandings', function () {
    $(this).find('.client-outstandings-details').toggle('fade');
});

$('.client-outstandings').on('click', 'a', function(e){
    e.stopPropagation();
    return true;
}); 
```

[**演示**](http://jsfiddle.net/zpXty/4/)。

# matlab - 如何在 Matlab 中使用 plot3 限制到某个区域？

> ID：13372986
> 
> 赞同：8
> 
> 时间：2012-11-14T04:19:49.233
> 
> 标签：matlab, wolfram-mathematica

例如，我想绘制函数

```
f(x,y) =sin(x^2+y^2)/(x^2+y^2),       x^2+y^2 <=4π 
```

在 Mathematica 中，我可以这样做：

```
Plot3D[Sin[x^2 + y^2]/(x^2 + y^2), {x, -4, 4}, {y, -4, 4}, 
 RegionFunction -> (#1^2 + #2^2 <= 4 Pi &)] 
```

其中`RegionFunction`指定要绘制的 x,y 区域。 ![在此处输入图像描述](../Images/14ba16aaa5f0a9cc437aaabdf94fe93e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T04:30:08.620

这是一个不是特别优雅的解决方案，它将您不想看到的区域的函数值设置为 -infinity。

```
[x, y] = meshgrid(-4:0.1:4, -4:0.1:4);
z = sin(x.^2+y.^2)./(x.^2+y.^2);
idx = x.^2 + y.^2 > 4*pi;
z(idx) = -Inf;
surf(x, y, z); axis vis3d; 
```

***编辑***. 实际上，如果您尝试使用更精细的网格（例如 -4:0.01:4）并添加`shading interp`它看起来还不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T05:07:30.373

与 3lectrologos 的解决方案略有不同，重点是保持您想要的：

```
x = -4*pi:0.01:4*pi;
y = -4*pi:0.01:4*pi;
[X,Y] = meshgrid(x,y);
Clean = (X.^2 + Y.^2)<=4*pi;
Y = Y.*Clean;
X = X.*Clean;

X(~any(X,2),:) = [];
X(:, ~any(X,1)) = [];
Y(~any(Y,2),:) = [];
Y(:, ~any(Y,1)) = [];

F = sin(X.^2+Y.^2)./(X.^2+Y.^2);
mesh(X,Y,F) 
```

请注意，在这种情况下，您需要确保 (0,0) 在您的解决方案配置文件中。

编辑：压缩矩阵以便于绘图

# c++ - （详细）如何计算从 1900 年到现在使用 boost 的持续时间？

> ID：13372988
> 
> 赞同：1
> 
> 时间：2012-11-14T04:20:30.633
> 
> 标签：c++, date, datetime, boost, time

作为标题，如何计算从 1900 年到现在使用 boost 的持续时间？

编辑：抱歉之前的问题太短了。我将再次描述我的问题。我有关于将生日作为整数保存到数据库的问题。我创建了四个函数，如下所示：

1.  ptime 到整数（按天）：

    ```
     int ti=time_to_int(ptime(date(2012,1,1),0));
     => ti = 15430;//number of day from 1970 to 2012 
    ```

2.  整数到 ptime：

    ```
     ptime pt = int_to_time(15430); 
    ```

3.  ptime 到字符串：

    ```
     ptime pt(date(2012,1,1), 0);
     string s = time_to_string(pt, "%d.%m.%Y"); 
    ```

4.  字符串到 ptime：

    ptime pt = string_to_time(%d.%m.%Y);

问题：上面，我从 1970 年开始使用 epoch，一切都很好。那么如何将 01/01/1945 转换为整数呢？我认为需要使用 1900 年的纪元。但是，当将 01/01/2012 转换为 1900 年的 int 时，它返回负数，因为“我认为”以毫秒为单位的滴答计数溢出（32 位）。使用一些方法手动将日期计算为 int 是可以的，但将 int 转换回日期似乎很糟糕。我想使用 boost 来做到这一点。

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T05:04:29.700

整数（int）不够大，无法容纳自1900年以来的秒数。它只能容纳大约68年。您需要使用 long（64 位）。Boost 的[time_duration](http://www.boost.org/doc/libs/1_31_0/libs/date_time/doc/class_time_duration.html)将使您可以访问 long 的秒数。您还可以使用@jogojapan 提到的天数。然而，白天的长度并不总是相同的（23-25 小时），所以有时在几天内跟踪事情更容易出错（如果你小心的话，应该没问题）。

查看[文档](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/examples.html#date_time.examples.time_math)中的一些示例。您可以减去两个 ptime 对象以获得 time_duration：

```
time_duration td = ptime1 - ptime2;
long secElapsed = td.total_seconds(); 
```

# javascript - JavaScript 自动更改 src 和 []

> ID：13372996
> 
> 赞同：2
> 
> 时间：2012-11-14T04:21:55.957
> 
> 标签：javascript, html, css, web

所以，我有一个网站正在建设只是为了做一些事情。

我对javascript没有很多经验，但我希望这个代码链接适用于4个按钮，它会根据它是什么按钮来更改src和方括号之间的任何内容。

```
function changehome(){
    document.images["homeimg"].src= "homelinku.jpg";
    return true;
} 
```

谁能告诉我如何做到这一点，我希望可以使用括号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:36:54.400

您可以使用参数定义函数并将其传递给函数：

```
<input type="button" onClick = "changehome('homeimg', 'homelinku.jpg')" /> 
```

...

```
function changehome(img, src){
    document.images[img].src= src;
    return true;
} 
```

# node.js - 为什么 Node.js 无法提供 .woff 文件

> ID：13372997
> 
> 赞同：8
> 
> 时间：2012-11-14T04:22:12.353
> 
> 标签：node.js, http, nginx

`.woff`由于某些网络原因，我在中国从谷歌网络字体下载了文件。以前我`@font-face`在[Github Pages](http://jiyinyiyong.github.com/she/bin/)上尝试过，它可以工作。但这一次我花了一个小时才找到坏的地方。

我使用 Node 来提供静态文件`mime`，并且`content-type`看起来是`application/x-font-woff`，以及我在 CoffeeScript 中的代码：

```
exports.read = (url, res) ->
  filepath = path.join __dirname, '../', url
  if fs.existsSync filepath
    file_content = fs.readFileSync filepath, 'utf8'
    show (mime.lookup url)
    res.writeHead 200, 'content-type': (mime.lookup url)
    res.end file_content
  else
    res.writeHead 404
    res.end() 
```

由于Github Pages 上的 是`content-type`，我只是在我的代码中删除了该行以使其相同..但它仍然失败：`.woff``application/octet-stream`

```
exports.read = (url, res) ->
  filepath = path.join __dirname, '../', url
  if fs.existsSync filepath
    file_content = fs.readFileSync filepath, 'utf8'
    show (mime.lookup url)
    # res.writeHead 200, 'content-type': (mime.lookup url)
    res.end file_content
  else
    res.writeHead 404
    res.end() 
```

最后，我切换到 Nginx 服务器来提供`.woff`文件。最后它开始工作了。

但是如何在 Node 上解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-17T15:51:29.987

在这一行中，`fs.readFileSync(filepath, 'utf8')`编码设置为`'utf8'`。它需要是`'binary'`。

此外，该`res.end(file_content)`函数需要传递正确的编码。试试`res.end(file_content, 'binary')`。

我有同样的问题，不得不自己解决，这个答案似乎在网上的任何地方都不存在。

# c# - 监控多个可变数量的进程的启动和退出

> ID：13372999
> 
> 赞同：3
> 
> 时间：2012-11-14T04:22:30.190
> 
> 标签：c#, vb.net, process, monitor

我需要一些代码来异步监视程序何时启动和停止。

我可以使用 VB.NET 或 C# 代码。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:29:56.307

这是进行实际监控的方法。`FileSystemWatcher`就动态配置文件而言，产生这些监控线程的主线程可以使用[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)来监控 xml/文本文件与进程名称。您可以将取消令牌传递给函数，并在每次迭代时检查令牌是否被取消。

```
static Task MonitorProcessAsync(string process, Action<string> startAction, Action<string> exitAction)
{
    return Task.Factory.StartNew(() =>
    {
        bool isProcessRunning = false;

        while (true)
        {
            int count = Process.GetProcessesByName(process).Count();
            if (count > 0 && !isProcessRunning)
            {
                startAction(process);
                isProcessRunning = true;
            }
            else if (count == 0 && isProcessRunng)
            {
                exitAction(process);
                isProcessRunning = false;
            }

            Thread.Sleep(1000);
        }
    });
} 
```

* * *

例子

```
Action<string> startAction = (process) => Console.WriteLine(process + " Started!");
Action<string> exitAction = (process) => Console.WriteLine(process + " Stopped!");
MonitorProcessAsync("notepad.exe", startAction, exitAction); 
```