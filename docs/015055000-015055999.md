# StackOverflow 问答 15055000-15055999

# uwsgi - uWSGI: --master 和 --emperor 产生两个皇帝

> ID：15055002
> 
> 赞同：30
> 
> 时间：2013-02-24T18:25:32.993
> 
> 标签：uwsgi

我可以看到，如果我像这样启动 uwsgi：

```
sudo /usr/local/bin/uwsgi --emperor /etc/uwsgi/vassals --uid www --gid www 
```

它创建一个皇帝副本。但如果我`--master`另外启动它（如[这里](https://gist.github.com/evildmp/3094281)推荐的那样），它会创建两个皇帝副本。`--master`使用with有意义`--emperor`吗？我会说不，但如果我在没有该选项的情况下运行它，我会收到以下警告：

`*** WARNING: you are running uWSGI without its master process manager ***`

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-06T22:44:03.520

这是[官方文档](http://uwsgi-docs.readthedocs.org/en/latest/Emperor.html)所说的：

> Emperor 通常不应该使用 --master 运行，除非特别需要高级日志记录等主特性。

如果您想知道`master`选项的作用，[这里](https://uwsgi-docs.readthedocs.org/en/latest/Glossary.html?highlight=master)是答案：

> 掌握
> 
> uWSGI 内置 prefork+threading 多线程管理模式，通过轻拨主开关激活。对于所有实际的服务部署，不使用主模式并不是一个好主意。

所以，总结一下：

*   用于`--master`通常的 uWSGI 实例，
*   不要`--master`用于 uWSGI Emperor。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-23T15:17:50.127

我不同意 - 文档说无论如何在生产中**不**使用它不是一个好主意；我想双重否定可以写得更清楚。

因此，使用它似乎是一个好主意，因此发出警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T14:39:53.803

我想添加一些关于在皇帝手下运行的附庸使用 harakiri 模式的具体信息。如果 master 不在附庸国的配置中，则无论是否在 Emperor 配置中指定 master/harakiri 都将无效。给定一个示例皇帝配置：

```
[uwsgi]
emperor = ...
daemonize = ...
emperor-pidfile = ...
vassal-set = enable-metrics=1
emperor-stats = 127.0.0.1:6000 
```

封臣需要以下物品才能使 harakiri 工作：

```
[uwsgi]
strict
processes = 4
stats = 127.0.0.1:5000
memory-report
daemonize = ...
pidfile = ...
close-on-exec
py-tracebacker = /tmp/tbsocket
master
harakiri = 5
harakiri-verbose 
```

请注意，master 和 harakiri 都存在于 vassal 中，并且在 Emperor 配置中设置它们对 uwsgi 版本 2.0.12 的 vassal 没有影响

# javascript - 如何使用 Bootstrap 实现平滑滚动？

> ID：15055003
> 
> 赞同：2
> 
> 时间：2013-02-24T18:25:38.287
> 
> 标签：javascript, twitter-bootstrap, scroll

我已经用几个不同的 jQuery 插件努力了两个小时，试图让我的网站平滑滚动。

这是现在的相关代码：

```
<div class="row-fluid">
 <header class="span12 hero-unit">
 <ul class="thumbnails">
  <li class="span3"></li>
  <li class="span2">
   <a href="#Blog" class="thumbnail">
   <img src="images/nav_icon-01.png" alt="Blog"/>
   </a>
  </li>
  <li class="span2">
   <a href="#Projects" class="thumbnail">
   <img src="images/nav_icon-02.png" alt="Projects"/>
   </a>
  </li>
  <li class="span2">
   <a href="#Contact" class="thumbnail">
   <img src="images/nav_icon-03.png" alt="Contact"/>
   </a>
  </li>
  <li class="span3"></li>

 </ul>
 </header>
</div> 
```

我已经删除了我所有的 JS 代码（因为我知道我没有正确使用它们中的任何一个并且想重新开始）除了这个，因为这似乎确实有效，但只在页面加载时激活并且我想要知道是否有可能让它在点击时工作。

```
<script type="text/javascript">
$('html, body').animate({
scrollTop: $("#Blog").offset().top
}, 2000);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:31:37.707

我不知道这个插件，但基于什么工作，比如（假设最近的 JQuery）：

```
$('a.thumbnail').on('click', function() {
  var to = $(this).attr('href'); // $(this) is the clicked link. We store its href.
  $('html, body').animate({ scrollTop: $(to).offset().top }, 2000);
)}; 
```

如果您的 JQuery < 1.7，您可以尝试 .click()，无论 JQuery 版本如何，它都可以工作：

```
$('a.thumbnail').click(function() {
  var to = $(this).attr('href');
  $('html, body').animate({ scrollTop: $(to).offset().top }, 2000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T01:00:54.140

mddw 提到的工作，除了它会导致相当大的闪烁，除非你阻止浏览器的默认操作如下（另外，他的结束大括号的顺序错误）：

```
$('a.thumbnail').on('click', function(event) {
  var to = $(this).attr('href');
  $('html, body').animate({ scrollTop: $(to).offset().top }, 500);
  event.preventDefault();
}); 
```

# c# - 从泰米尔语（印度语）音译成英语的代码

> ID：15055009
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:26:07.487
> 
> 标签：c#, javascript, asp.net

我想做泰米尔语（印度语言）到英语的音译。

例如

泰米尔语

பஞ்சவர்ணம்

我想音译成英语，比如“Pancavarnam”

请帮我提供代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:29:21.060

您可以使用在线翻译服务，例如[`Google Translate API`](https://developers.google.com/translate/)或[`Microsoft Translator`](http://www.microsofttranslator.com/dev/)可以在运行时执行此翻译。但是，如果您想要可靠的翻译，您最好自己在 RESX 文件中进行翻译。当然，这只有在您尝试翻译的数据不是动态的情况下才有可能。

# java - 在播放 2 中使用锚重定向

> ID：15055010
> 
> 赞同：1
> 
> 时间：2013-02-24T18:26:11.480
> 
> 标签：java, playframework-2.0

我正在寻找将锚点添加到控制器中返回的 url 的可能性：

```
public static Result open(String id) {
  // here I want to add acnhor like #foo to the produced url
  return redirect(routes.MyPage.show(id));
}
```

我[发现](https://stackoverflow.com/questions/4699180/how-to-get-the-anchor-of-url-in-plays-controller/4699764#comment5186899_4699764)在 play 1 中使用`addRef`方法是可能的，但我在 play 2 中找不到任何替代方法。

当然我可以使用像这样的连接：

```
public static Result open(String id) {
  // here I want to add acnhor like #foo to the produced url
  return redirect(routes.MyPage.show(id).url + "#foo");
}
```

但它看起来很丑。

感谢您的任何帮助！祝你有美好的一天！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:53:54.767

在尝试回答这个问题之前。我应该建议您更改当前设置的任何行为。

因为，URL 片段的目的只是客户端。这样的片段永远不会发送到服务器，因此反之则很麻烦。

但是，这是您可以遵循的（相当？）优雅解决方案的雏形。

我将尝试做的是让浏览器处理片段，以保持潜在的行为（去 ID 甚至处理历史......）。

为此，您可以`implicit`向模板添加一个参数，该参数`main`将定义 URL 应具有的片段：

```
@(title: String)(content: Html)(urlFragment:Option[UrlFragment] = None) 
```

如您所见，我将参数包装在 an 中`Option`并默认为`None`（为了避免 AMAP 污染）。

此外，它只是包装了 a`String`但您可以`String`单独使用——使用专用类型将强制执行语义。这是定义：

```
case class UrlFragment(hash:String) 
```

非常简单。

现在这里是如何告诉浏览器处理它。`head`在元素的结尾和 的开头之前`body`，只需添加以下内容：

```
@urlFragment.map { f =>
  <script>
    $(function() {
      //after everything is ready, so that other mechanism will be able to use the change hash event...
      document.location.hash = "@Html(@f.hash)";
    });
  </script>
} 
```

如您所见，使用`map`（即`urlFragment`is not时`None`）我们添加了一个脚本块，该块将在`urlFragment`.

然而，这可能是一个开始……为整个场景考虑另一种解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-19T23:23:04.290

从 Play 2.4 开始，可以使用[`Call.withFragment()`](https://www.playframework.com/documentation/2.4.x/api/java/play/mvc/Call.html).

```
routes.Application.index.withFragment("some-id").absoluteURL(request) 
```

这是[PR #4152](https://github.com/playframework/playframework/pull/4152)添加的。

# jquery - 如何为 pushState 添加书签

> ID：15055012
> 
> 赞同：1
> 
> 时间：2013-02-24T18:26:18.920
> 
> 标签：jquery, ajax, html, history, pushstate

拜托，谁能用这个 pushState 代码指导我。

有一个更好的方法吗？

此外，它不能添加书签。为什么？

谢谢！

```
$(function(){
    if (Modernizr.history) {
        wrap = $('#wrap');
        $('a').click(function(event){
           url = $(this).attr('href');
           wrap.load(url + ' #main', function() {
               title = $('#main').find('h1').text();
               $('head').find('title').text(title);
               history.pushState(null, title, url);
           });
       event.preventDefault();
       });
   }
}); 
```

# java - java - 计算文件中的单词和字符数时出错

> ID：15055015
> 
> 赞同：2
> 
> 时间：2013-02-24T18:27:06.480
> 
> 标签：java

我编写了以下代码来打印文件内容并打印文件中的字符数和单词数

```
import java.io.*;
import java.util.*;

 class Ass53
{ 

public static void main(String args[]) throws Exception
{
    File file=new File("sample.txt");
    Scanner sc=new Scanner(new FileInputStream(file));
    String line,line1;
    int count1=0;
    int count=0;        

    /*Loop for printing contents of file*/
    while(sc.hasNextLine())
    {
        line=sc.nextLine();
        System.out.println(line);
    }

    /*loop for counting number of character in file*/
    while(sc.hasNext())
    {
            line1=sc.next();
        for(int i=1;i<=line1.length();i++)
            count1++;
    }
    System.out.println(count1); 

    /*loop for counting number of words in a file*/
    while(sc.hasNext())
    {
            sc.next();
            count++;
    }
    System.out.println("Number of words: " + count);

    }

 } 
```

问题是只有第一个while循环正在执行。我猜原因可能是第一个while循环的sc.nextLine。在第一个while循环之后我猜什么都没有？

有什么办法可以解决吗？我希望我的另一个 while 循环也能工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:34:00.043

每次您这样做时，`nextLine()`您都会将扫描仪推进到当前行之外。当第一个循环结束时，您位于文件的末尾，没有要扫描的内容。

一个解决方案是在每个循环之前重新创建扫描仪。在第二个和第三个之前重复这个`while`：

```
sc=new Scanner(new FileInputStream(file)); 
```

另一种解决方案将涉及更多工作但更优雅：使用单个循环将所有行存储在 a 中`List<String>`，然后分析所有行以计算单词和字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:33:10.500

每次完成循环后，您需要将 sc 设置回流的开头。

我不会发布代码，因为这看起来像家庭作业，我猜类名 Ass53 是“Assignment53”。查找并弄清楚如何将流设置回开始应该不会太难。

您可以尝试将其组合成一个循环，因为就目前而言，您实际上是在读取同一个文件 3 次。如果它是一个小文件可能不会那么糟糕，但如果它是一个较大的文件会很慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T18:33:41.327

第一个循环说“直到我用完文件中的行，读取该行并打印它。” 然后第二个循环在文件中寻找更多的字符，当然那里什么都没有。

一种选择是在每个循环之前重置扫描仪。在第一个之后的每个循环之前，只需关闭并丢弃扫描仪，然后创建一个新的。

不过，还有更好的方法。您可以逐个字符地浏览文件（例如，使用[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)），并增加每个字符的字符数，以及每个换行符的换行数。不要忘记考虑不以换行符结尾的文件。只需要一个循环，并且您已经计算了总字符数和行数。

# ruby-on-rails - vim 新手 - MAC OSX Mountain Lion

> ID：15055018
> 
> 赞同：1
> 
> 时间：2013-02-24T18:27:10.387
> 
> 标签：ruby-on-rails, ruby, vim

我是 vim 的新手，我只是按照[这个设置教程](http://thedrearlight.com/blog/tmux-vim.html)进行操作，但是出了点问题。我是一名 ruby​​ 开发人员，我没有得到 ruby​​ 高亮语法。我已经安装了janus，在使用病原体之前我有语法突出显示但不知道。

此外，我正在使用该人建议的日光化主题，但在列出目录时，我的终端中的文件夹和文件之间现在（颜色）没有区别。

有人可以告诉我是否可以使用 janus 安装病原体吗？这会破坏我的vim吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:26:35.340

1.  不要安装任何东西（也不要安装 Janus）。

2.  `$ vimtutor`在您的终端中运行。根据需要多次（并且不要安装 Janus）。

3.  一旦您准备好使用 Vim 进行日常编码，请安装 MacVim，它具有比默认 Vim 更好的功能集。它带有一个 CLI 可执行文件，因此您可以在终端和 tmux 中使用它（并且不要安装 Janus）。

4.  安装[vim-ruby](https://github.com/vim-ruby/vim-ruby)包以获得更好、更新的 Ruby 支持（不要安装 Janus）。

5.  不要安装 Janus。这东西是一堆废话，会让你的生活变得过于复杂，把你挂在可能是也可能不是最适合你需要的插件上，并阻止你真正正确地学习 Vim，以换取人为扁平化的学习曲线。

6.  决定插件/运行时路径管理解决方案（VAM、vundle 或普通 Pathogen）并根据*您的*需要自行选择插件（不要安装 Janus）。

7.  如果您在使用 Solarized 时遇到问题，请查看他们的问题跟踪器和他们的 wiki。它很脆弱，您需要一些工作才能正确设置它（并且……您知道其余的）。

# ruby-on-rails - 如何根据从下拉菜单中选择的值隐藏 Rails 3 表单的一部分

> ID：15055020
> 
> 赞同：6
> 
> 时间：2013-02-24T18:27:29.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

对于我在 Rails 中的一个观点，我有一个部分的 _form。它看起来像这样：

```
<%= form_for(@project) do |f| %>
  <div class="field">
    <%= f.label "Project Status" %><br />
    <%= f.select :status, ["In Progress", "Cancelled"] %>
  </div>

  <div class="field">
    <%= f.label "Capital Cost" %><br />
    <%= f.text_field :capital_cost %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>

<% end %> 
```

我希望表单的“资本成本”部分显示为灰色，除非从下拉菜单中选择“进行中”，而无需重新加载页面。这可能吗？我看到了一些使用 javascript 的解决方案，但我是一个完整的初学者，无法理解它们（不幸的是，在我必须完成这个项目之前，我没有时间学习使用 js）。干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T18:33:23.723

为此，您需要一些 JavaScript。使用`onchange`事件处理程序来监视`<select>`输入的更改。比较输入值并有条件地设置/取消设置输入的`disabled`属性`#project_capital_cost`。您可以为此使用 jQuery。

默认情况下，Rails 3 通过`jquery_rails`在 Gemfile 中包含 gem 来启用 jQuery。假设您已`jquery_rails`包含在您的应用中，并且您的`<select>`和`<input>`标签分别具有`#project_status`和`#project_capital_cost`ID，请将以下脚本添加到您的`_form`部分中并进行必要的修改：

```
<script>
  $(document).ready(function(){
     if($('#project_status').val() != "In Progress"){
        $("#project_capital_cost").attr('disabled','disabled');
     }
     else{
        $("#project_capital_cost").removeAttr('disabled');
     }

     $('#project_status').change(function(){
        if($(this).val() != "In Progress"){
          $("#project_capital_cost").attr('disabled','disabled');
        }
        else{
          $("#project_capital_cost").removeAttr('disabled');
        }
     })
  });

</script> 
```

**编辑：**

隐藏`div`给`id`它一些：

```
 <div class="field" id="my_div">
    <%= f.label "Capital Cost" %><br />
    <%= f.text_field :capital_cost %>
  </div> 
```

然后更换

`$("#project_capital_cost").attr('disabled','disabled');`和`$("#my_div").css('display','none')`

和

`$("#project_capital_cost").removeAttr('disabled');`在`$("#my_div").css('display','block')`脚本中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T18:33:12.900

要使输入变灰，请使用禁用的 HTML 输入标记属性。

```
<input disabled="disabled"> 
```

Rails 中的哪个是

```
<%= f.text_field :capital_cost, :disabled => "disabled", :id => "capital_cost_input" %> 
```

在选择“进行中”时启用它需要 AJAX 和 Javascript，但 Rails 提供了一些帮助。

第一的

```
<%= f.select :status, ["In Progress", "Cancelled"],
             {},
             "data-remote" => true, "data-url" => ..._path %> 
```

这将为您设置 onchange 属性并进行 AJAX 调用。

添加一个路由来处理 AJAX 调用，并为“data-url”提供 URL。

在 AJAX 操作的视图模板中，编写 Javascript 以启用输入。就像是

```
$('#capital_cost_input').removeAttr("disabled") 
```

# twitter-bootstrap - 具有覆盖响应图像的 Twitter Bootstrap 轮播

> ID：15055025
> 
> 赞同：1
> 
> 时间：2013-02-24T18:27:47.423
> 
> 标签：twitter-bootstrap, overlay, responsive-design, carousel

我正在尝试找到一种方法，让“响应式”图像覆盖来自 Twitter 引导程序的轮播。

我发现[如何在引导元素之上添加掩码？](https://stackoverflow.com/questions/12370447/how-do-i-add-a-mask-on-top-of-a-bootstrap-element?answertab=active#tab-top)这有助于我进行叠加 - 但是当我将图像添加到该 div 时，它不会像轮播一样调整大小。

从我在引导程序中读取的图像来看`max-width:100%`- 这是否意味着必须为覆盖 div 设置宽度？

小提琴： http: [//jsfiddle.net/CF8m8/](http://jsfiddle.net/CF8m8/) - 更改结果窗口的宽度以了解我的意思。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T03:06:36.200

我认为有更好的解决方案。@Shail。我将使用您的示例本身。

将如下所示的图像添加到 div=overlay 并添加“图像响应”类。然后 bootstrap 会处理剩下的事情。

```
<div class="overlay">
<img src="images/slideshowfx.png" class="image-responsive"/>
</div> 
```

我使用了尺寸 width="1200px" 和 height="300px（或任何你想要的高度）"

删除不必要的样式后，CSS 将是这样的。

```
.overlay {
position: absolute;
top: 0;
left: 0;
z-index: 10;
} 
```

这就是您需要做的所有事情。您可以消除所有其他不必要的 CSS 样式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T08:03:06.480

您可以执行以下操作： Jsfiddle [Jsfiddle with resized overlay](http://jsfiddle.net/shail/sUzc7/5/)

浏览器中的Jsfiddle[检查浏览器](http://jsfiddle.net/shail/sUzc7/5/show/)

编辑：我建议你使用不同尺寸的图像来适应不同的屏幕，这样你就不会失去质量，甚至比例可以根据你的选择来固定。比使用媒体查询加载这些图像，因此对于每个不同的屏幕，您都可以为它们提供调整大小的图像，这将非常适合您的 carousal。

```
<div class="container">
 <div class="carousel slide">
  <div class="carousel-inner">
    <div class="overlay"></div>
    <div class="item active">
        <a href=""><img src="http://www.placehold.it/900x500&text=One" /></a>
    </div>
    <div class="item">
        <a href=""><img src="http://www.placehold.it/900x500&text=Two" /></a>
    </div>
    <div class="item">
        <a href=""><img src="http://www.placehold.it/900x500&text=Three" /></a>
    </div>
 </div>
 <a class="carousel-control left" href=".carousel" data-slide="prev">‹&lt;/a>
 <a class="carousel-control right" href=".carousel" data-slide="next">›&lt;/a>
  </div>
 </div> 
```

在 css 中使用以下内容：

```
.overlay {
background: url(http://lorempixel.com/310/310/cats/) top left no-repeat;
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 10;
pointer-events: none;
  }
     @media (min-width: 768px) and (max-width: 979px) {
      .overlay{

         width:50%;
        height:50%;
  }    
 }

  @media (max-width: 767px) {
     .overlay{

  width:50%;
  height:50%;
  }

  }
@media (max-width: 480px) {
   .overlay{
   width:50%;
  height:50%;

  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-01T22:44:06.720

让您的图像在没有媒体查询的情况下调整大小的最佳选择是为您的图像提供一类“img-responsive”。

Bootstrap 已经构建了必要的媒体查询，并将按比例缩小您的图像。请记住，图像所在的容器没有固定高度，否则缩小只会影响宽度，因为您的固定高度可能会覆盖任何以前的 CSS 来缩放高度。

至于覆盖部分......上面已经充分回答了。

# python - view_config 装饰器中的多个权限？

> ID：15055029
> 
> 赞同：10
> 
> 时间：2013-02-24T18:27:57.470
> 
> 标签：python, web-applications, permissions, security, pyramid

我正在为基于 Pyramid 框架的 Web 应用程序配置访问控制。`@view_config`我正在使用装饰器为我的视图可调用对象设置权限。我有两个权限，即`'read'`和`'write'`。现在，我希望某些视图需要*这两种*权限。我无法弄清楚如何做到这一点`view_config`- 我是否遗漏了什么，或者是否有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T23:21:17.387

做一个`readwrite`许可。每个视图获得一个且只有一个权限，但每个主体可以映射到多个权限。

# python - 安排定期上传，好的做法？

> ID：15055032
> 
> 赞同：0
> 
> 时间：2013-02-24T18:28:06.650
> 
> 标签：python

我正在使用 3g 网络将一堆传感器读数从我的 raspberrypi 发送到托管的 php+mysql 数据库。

为了节省带宽和能源，[建议](https://stackoverflow.com/questions/15050761/post-request-to-php-mysql-using-pythons-requests)不要每秒上传传感器读数，而应该只定期上传，即每 5 分钟上传一次。所以我决定使用 JSON 格式收集读数以简化上传 POST 过程：

```
>>> import json
>>> url = 'https://api.github.com/some/endpoint'
>>> payload = {'some': 'data'} 
```

我还使用 timer2 模块设置了一个计时器：

```
>>> timer2.apply_interval(msecs, fun, args, kwargs, priority=0) 
```

现在 fun 每 5*3600*1000 调用一次。有趣的是，我上传了有效载荷并重置了有效载荷内容以进行下一轮数据收集：

```
>>> r = requests.post(url, data=json.dumps(payload)) 
```

* * *

问题：

*   在从主线程收集数据时，从乐趣中重置变量有效负载的内容是一种好习惯吗？

*   有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:03:05.540

您应该组织您的程序来对从传感器到数据库的数据流进行建模。因此，您将有一个计时器以轮询速率调用采样方法。将采样方法的结果传递给缓冲方法。填充缓冲区，直到缓冲期结束。最后，发布缓冲区，每次它填满。

```
import random
import time

def generate_samples():
    while True:
        input('Press ENTER to simulate next sample...')
        yield random.random()

def period_elapsed(period_start, period_duration):
    return period_start + period_duration < time.time()

def collect_buffers(samples, buffer_period):
    buffer_time = time.time()
    buffer_samples = []
    for sample in samples:
        buffer_samples.append(sample)
        if period_elapsed(buffer_time, buffer_period):
            yield buffer_samples
            buffer_samples = []
            buffer_time = time.time()

def post_buffers(buffers, url):
    for b in buffers:
        requests.post(url, data=json.dumps(buffer))

post_buffers(collect_buffers(generate_samples(), 300), 'http://localhost:3000') 
```

# wget - 使用 wget 从网页下载所有数据

> ID：15055034
> 
> 赞同：1
> 
> 时间：2013-02-24T18:28:16.970
> 
> 标签：wget

我需要能够仅将页面中的数据下载到文本文件中，以便稍后使用不同的程序进行解析。我已经在其他网站上使用过这种语法并且效果很好，但是我遇到了一个带有一个网站的程序。

这是我正在使用的站点和语法：

WGET.EXE [http://quotes.morningstar.com/fund/AAAAX/f?t=AAAAX](http://quotes.morningstar.com/fund/AAAAX/f?t=AAAAX) -O AAAAX.TXT --no-check-certificate -owebdata/logfile.txt

这会下载页面，但我需要查看的关键数据不存在。例如：费用 营业额和状态数据不存在

我知道脚本正在使用子程序来生成数据，但我知道 WGET 能够将输出下载到文件中，我只是不清楚要设置什么标志或选项来让它做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:33:30.153

费用和营业额和其他状态数据使用页面上的 javascript 设置。据我所知，当javascript在浏览器上运行时，您无法获得它，因为它是在客户端生成的。

# php - 从 MySQL 获取多行输出

> ID：15055037
> 
> 赞同：0
> 
> 时间：2013-02-24T18:28:26.907
> 
> 标签：php, mysql

我想获取多行输出，我知道可以使用 while 循环轻松完成，但我的问题是，如果我使用 while 循环，相应行的标题就会出现。我只是不想更改标题，但想更改内容。这是我想要的简单数据

```
 tableA

    id                title                            msg

    1                 eeee                              frrffrfrrfrr
    2                 vvfdfd                           ffvfvdfvddd
    3                 vffdcadvg                         fdfvddfgvre
    4                 dfdf                              fvvvf 
```

因此，如果我将使用 while 循环，那么该行的标题也会出现，所以我只想继续更改 row['message'] 值。我的简单 MySQL 查询是

```
 $res = mysql_query("select * from tableA");
   $row = mysql_fetch_array($res);
    $msg=$row['msg'] 
```

如您所见，它将轻松显示相应行的标题和消息，但我想要一行的标题和 4 行的消息输出如何完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:29:26.267

使用循环：

```
$res = mysql_query("select * from tableA");
while ($row = mysql_fetch_array($res)) {
    echo $row['msg'];
} 
```

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# .htaccess - htaccess 重写规则另一个参数

> ID：15055038
> 
> 赞同：0
> 
> 时间：2013-02-24T18:28:31.323
> 
> 标签：.htaccess, mod-rewrite

我的 htaccess 中有这个规则：

```
RewriteRule  ^video_(.*)$ show-video2/?txtkey=$1 [L] 
```

有时我可能会在 GET 中需要另一个参数，例如：

```
.../show-video2/?txtkey=122312421&anotherparam=1232 
```

问题是使用这个 RewriteRule 我无法看到 $_GET 中的第二个参数：

```
RewriteRule  ^video_(.*)$ show-video2/?txtkey=$1 [L] 
```

我必须如何修改 RewirteRule 才能看到第二个参数（如果有）？事实上，如果`var_dump($_GET)`我只能看到 txtkey 参数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:32:59.013

将您的 RewriteRule 更改为：

`RewriteRule ^video_(.*)$ show-video2/?txtkey=$1 [L,QSA]`

这`QSA`就是您所追求的 - 这意味着查询字符串附加 - 并且可以让您捕获其余的 GET

# twitter-bootstrap - twitter引导下拉菜单的动态宽度？

> ID：15055040
> 
> 赞同：2
> 
> 时间：2013-02-24T18:28:56.497
> 
> 标签：twitter-bootstrap, asp.net-4.5

我正在为我的 ASP.Net 网站设计一个新布局，并且正在利用 twitter 引导程序，但无法让下拉菜单 100% 工作。我有一个标有“媒体”的菜单，当您单击子菜单时，它应该会弹出，但子菜单的宽度不会动态扩展它的宽度以适应 1 行中的所有文本。[您可以通过访问http://finfo.azurewebsites.net/webform1.aspx](http://ffinfo.azurewebsites.net/webform1.aspx)查看我在说什么。如果您查看 Media drop out，最后的菜单选项应该在一行，但由于菜单没有动态调整它的宽度，最后一个菜单项被强制为 3 行。如何使子菜单动态调整其宽度，以便它可以将第三个选项全部放在一行中？这是我用来生成该菜单的代码：

```
<div class="column-main">
            <div class="row-fluid">
                <div class="navbar main-nav">
                    <div class="navbar-inner">
                        <ul class="nav">
                            <li>
                                <a href="http://www.ffinfo.com/">
                                    <i class="icon-home"></i>
                                </a>
                            </li>

                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <asp:Literal ID="lblSiteTitle" Text="<%$Resources:Navigation, Site%>" runat="server" />
                                    <b class="caret"></b>
                                </a>

                                <ul class="dropdown-menu">
                                    <li>
                                        Temp
                                    </li>
                                </ul>
                            </li>

                            <li class="divider-vertical" />

                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <asp:Literal ID="lblMediaTitle" Text="<%$Resources:Navigation, Media%>" runat="server" />
                                </a>
                                <b class="ceret"></b>

                                <ul class="dropdown-menu">
                                    <li class="nav-header text-center">
                                        <asp:Literal ID="lblFanTitle" Text="<%$Resources:Navigation, Fan%>" runat="server" />
                                    </li>

                                    <li class="nav-header text-center">
                                        <asp:Literal ID="lblMediaSubTitle" Text="<%$Resources:Navigation, MediaSub%>" runat="server" />
                                    </li>

                                    <li class="nav-header text-center">
                                        <asp:Literal ID="lblTest" Text="<%$Resources:Navigation, Chronicles%>" runat="server" />
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T20:20:50.910

在锚`<a>`标签内添加链接，下拉菜单框将调整其宽度。像这样：

```
<li class="nav-header text-center">
    <a href="#">Final Fantasy Crystal Chronicles Series</a>
</li> 
```

它来自 bootstrap.css 中的这个 css：

```
.dropdown-menu > li > a {
...
    white-space: nowrap;
...
} 
```

# php - 几个按钮打印不同的代码部分

> ID：15055041
> 
> 赞同：0
> 
> 时间：2013-02-24T18:29:04.473
> 
> 标签：php, javascript, printing

在我的项目中，我需要能够打印出包含租用巴士信息的信件。我没有太多经验，所以我所做的就是将非常简单的字母放到网页上，然后我的想法是能够为每个字母设置一个打印按钮并打印我想要打印的任何内容。我想我已经做了所有事情，但我无法让打印工作，这个按钮似乎是一个毫无意义的按钮。我的 JavaScript 编码很差，所以我不太确定如何解决这个问题。任何帮助将不胜感激。我从[如何使用 php 下载/打印页面的特定部分中](https://stackoverflow.com/questions/5125641/how-to-download-print-specific-portion-of-a-page-using-php)获得了很多想法，但是我有这个特定的问题，所以仅仅看一下对我没有特别的帮助。

```
<?php
include "connection.php";

$id = 0;
$result = mysql_query("SELECT cost, date, time, pickuplocation, destination,    numberofpeople, endtime, hireid, payment FROM hire WHERE information='letter'");

while ($row = mysql_fetch_array($result)) {
    $id = $id + 1;
    echo "<div id=" . $id . ">";
    echo "The Hurst and Hassocks Community Bus Association <br> 
            Invoice <BR> <BR>
            Thank you for hiring with the Association. <BR>
            The total cost for the hire is: &pound;" . $cost = $row['cost'] . "<BR><BR>
            Your details for the hire: <BR>
            Date: " . $date = $row['date'] . " <BR>
            Time: " . $time = $row['time'] . " <br>
            Pick up location: " . $pickuplocation = $row['pickuplocation'] . " <br>
            Destination: " . $destination = $row['destination'] . " <br>
            Number of people: " . $numberofpeople = $row['numberofpeople'] . " <br>
            End time: " . $endtime = $row['endtime'] . " <br>
            Hire ID: " . $hireid = $row['hireid'] . " <br><br>";

    if (($payment = $row['payment']) == "cheque") {
        echo "In order to pay for your hire and therefore confirm it, please address your     cheque to The Hurst and Hassocks Community Bus Association and include the total cost. Put your cheque in an envelope and send to the following address:  <BR><BR>";
    }

    if (($payment = $row['payment']) == "transfer") {
        echo "In order to pay for your hire and therefore confirm it, you will need to make an online bank transfer to The Hurst and Hassocks Community Bus Association. You will need to enter the Account Number and Sort Code when making the transfer. <BR>
            Account Number:  <BR>
            Sort Code: <BR><br>";
    }

    echo "We will need to receive payment at least 3 days before the date of the hire in order to confirm details with you. If payment is not received by then, the hire will be cancelled. Once payment is received we will send you a confirmation letter. Your driver for the hire will then contact you a few days before the hire to confirm details. <BR><br>
            Thank you for hiring with us, <br><br>

            Simon Strange, <br>
            The Hurst and Hassocks Community Bus Association<br><br><br>--------------------------------------------------------------<br><br>";
    echo "</div>";
    echo "<input type='button' value='Print' onclick='printPage(" . $id . ");'></input>";
    echo $id;

    echo "<br>--------------------------------------------------------------<br><br>";
}
?>

<script>
    function printPage('<?php $id; ?>') {

        var html='<html>';
        html+= document.getElementById(id).innerHTML;
        html+='</html>';
        var printWin = window.open('','','left=0,top=0,width=1,height=1,toolbar=0,scrollbars=0,status =0');
        printWin.document.write(html);
        printWin.document.close();
        printWin.focus();
        printWin.print();
        printWin.close();
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:35:37.817

你需要改变：

```
function printPage('<?php $id; ?>') { 
```

至：

```
function printPage(id) { 
```

试试看？

# mysql - MySQL 查询不同值和 SUM 值

> ID：15055042
> 
> 赞同：0
> 
> 时间：2013-02-24T18:29:16.987
> 
> 标签：mysql

我有这样的数据库

```
ID      DATE        QTY  PRICE
1   05-02-13 00:45  70  0
1   05-02-13 00:45  25  20000
1   05-02-13 00:45  3   1750000
1   05-02-13 00:45  50  0
1   05-02-13 00:45  5   0
1   05-02-13 00:45  200 0
1   05-02-13 00:45  15000   8500
8   11-02-13 16:27  150 17000
8   11-02-13 16:27  150 2000
9   11-02-13 21:40  1   7500000
9   11-02-13 21:40  1   15000000
1   15-02-13 15:15  70  0
1   15-02-13 15:15  25  20000
1   15-02-13 15:15  3   1750000
1   15-02-13 15:15  50  0
1   15-02-13 15:15  5   0
1   15-02-13 15:15  200 0
1   15-02-13 15:15  15000   8500 
```

我需要 MySQL 中的 Query 来显示这样的数据：

```
ID     DATE         QTY  PRICE
8   11-02-13 16:27  150 17000
8   11-02-13 16:27  150 2000
9   11-02-13 21:40  1   7500000
9   11-02-13 21:40  1   15000000
1   15-02-13 15:15  70  0
1   15-02-13 15:15  25  20000
1   15-02-13 15:15  3   1750000
1   15-02-13 15:15  50  0
1   15-02-13 15:15  5   0
1   15-02-13 15:15  200 0
1   15-02-13 15:15  15000   8500 
```

所以我可以求和 QTY * PRICE

它唯一的用户最新 ID 和总和数量 * 价格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:40:04.753

您应该能够使用子查询`max(date)`为每个选择`id`，然后将其连接回您的表以获得结果：

```
select t1.id,
  t1.date,
  t1.qty,
  t1.price
from yourtable t1
inner join
(
  select id, max(date) MaxDate
  from yourtable
  group by id
) t2
  on t1.id = t2.id
  and t1.date = t2.maxdate 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/08e0f/4)。

然后，如果您想要`sum()`结果，您将使用：

```
select t1.id,
  t1.date,
  sum(t1.qty *t1.price) Total
from yourtable t1
inner join
(
  select id, max(date) MaxDate
  from yourtable
  group by id
) t2
  on t1.id = t2.id
  and t1.date = t2.maxdate
group by t1.id, t1.date 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/08e0f/6)

# ios - UIPageViewController ios5 & ios6

> ID：15055048
> 
> 赞同：1
> 
> 时间：2013-02-24T18:29:30.807
> 
> 标签：ios, ipad

我有一个导航控制器，它`UIViewController`被推到它上面（**VC0**）。

此 VC0 有一个`pageViewController`( **PVC** ) 属性，该属性使用一个 ( **VC1** ) 或两个 ( **VC1** & **VC2** ) “页面幻灯片”视图控制器，具体取决于纵向或横向设备方向。

这一切似乎在 iOS6 中运行良好。在 iOS 5 中，几乎一切都很好。

但是，我在 iOS5 中遇到的问题是，如果设备是横向的，并且在推送**VC0**并创建**PVC**时打开了应用程序，则没有调用 spinLocationForInterfaceOrientation **:(**

它确实在 iOS6 中被调用。

有没有其他人遇到过这个并找到解决方法？

# lua - 按钮 gotoScene 不起作用

> ID：15055049
> 
> 赞同：0
> 
> 时间：2013-02-24T18:29:32.787
> 
> 标签：lua, coronasdk, corona-storyboard

如果我点击按钮，`storyboard.gotoScene("facebook", "fade", 400)`它不起作用，并且我在终端中没有收到任何错误消息。我究竟做错了什么 ？

```
-- requires 
display.setStatusBar( display.HiddenStatusBar ) 
_W = display.contentWidth; --Returns Screen Width
_H = display.contentHeight; --Returns Screen Height

local storyboard = require ("storyboard")
local scene = storyboard.newScene()

-- background

function scene:createScene(event)

    local screenGroup = self.view
    background = display.newImage("restart.png")
    screenGroup:insert(background)

    button = display.newImage("share2.png") 
    button.x = display.contentWidth / 2
    button.y = display.contentHeight -400
end

  function listener(event) 
    if event.phase == "began" then
          print(event.name.." occurred") 
        storyboard.gotoScene("facebook", "fade", 400)
    end
end 

function scene:enterScene(event)
    storyboard.purgeScene("game")
    button:addEventListener( "tap", listener ) 
end

function scene:exitScene(event)
    button:removeEventListener( "tap", listener ) 
end

function scene:destroyScene(event)
end

scene:addEventListener("createScene", scene)
scene:addEventListener("enterScene", scene)
scene:addEventListener("exitScene", scene)
scene:addEventListener("destroyScene", scene)

return scene 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:17:39.257

“点击”事件和“触摸”事件是不同的，它们将不同的“阶段”传递给事件处理程序。按照您对事件处理程序进行编程的方式，您期待“触摸”事件（开始、结束、移动）。点击事件并不会真正产生任何阶段，无论您是否被点击。

要么改变这两行：

```
button:addEventListener( "tap", listener ) 
button:removeEventListener( "tap", listener ) 
```

到：

```
button:addEventListener( "touch", listener ) 
```

和

```
button:removeEventListener( "touch", listener ) 
```

或者您可以将您的侦听器更改为：

```
function listener(event) 
    print(event.name.." occurred") 
    storyboard.gotoScene("facebook", "fade", 400)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:14:53.593

试试这个：

```
storyboard.gotoScene("facebook", {effect = "fade", time=400}) 
```

或者：

```
local options =
{
    effect = "fade",
    time = 400,
}

storyboard.gotoScene("facebook", options) 
```

[http://docs.coronalabs.com/api/library/storyboard/gotoScene.html](http://docs.coronalabs.com/api/library/storyboard/gotoScene.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:34:47.410

当您将场景称为“facebook”或将 facebook 重命名为“postmyscore”时，看起来电晕不喜欢它并且它可以工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:17:39.570

自 Coronas 上次更新以来，我遇到了同样的问题。我通过删除事件阶段的 if 检查解决了这个问题。只需在侦听器函数中注释掉 event.phase 检查：

```
function listener(event) 
--if event.phase == "began" then
    print(event.name.." occurred") 
    storyboard.gotoScene("facebook", "fade", 400)
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-31T12:23:48.490

facebook.lua 已经集成在 inbuild API 中，所以它可能会产生问题，更多的是你使用的是点击事件，所以在监听器中不需要检查相位或者你可以使用触摸事件。

# java - Vigenere解密奇数

> ID：15055052
> 
> 赞同：1
> 
> 时间：2013-02-24T18:29:40.560
> 
> 标签：java, encryption, vigenere

我编写了一个使用 Vigenere 密码进行编码的 java 程序，加密工作正常，但是对于某些特殊情况，解密并不适用。

例如，如果纯文本是 'k' 并且密钥是 'y' 它正确地产生密文 'i' ((10 + 24 = 34 % 26 = 8))

但是，当解密密文是“i”并且密钥是“y”时，我得到（（8-24）=-16%26=-16）），即使它是肯定的，也会是 Q。什么时候应该正确解密回到“k”，即 10。

有谁可以帮我离开这里吗？如果需要，我可以发布更多代码。

---链接到 wiki Viginare 密码算法[http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher](http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher) ---

```
 //decryption
    else{
        for (int i=0; i < a.length(); i++){

                for (int j=0; j < full.length(); j++){
                    //finding the index of the current cipher text letter
                    if (a.charAt(i) == full.charAt(j)){
                        positionP = j;

                    }
                    //finding the index of the current key letter
                    if(key.charAt(i)==full.charAt(j)){
                        positionK = j;
                    }

                }
                //using the formula for vigenere encoding it adds the newly encrypted character to the output
                output = output + full.charAt((positionP - positionK)%26);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:45:12.500

请注意，Java 中的余数运算符被定义*为结果的大小始终小于除数的大小，如果被除数为负* [[JLS]](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.17.3) ，则余数运算的结果为负。

您可以通过执行以下操作获得所需的输出：

```
 output = output + full.charAt((positionP - positionK + 26)%26); 
```

如果`positionP-positionK`为正，则加法不会改变结果（因为 26%26=0）。如果`positionP-positionK`是负数（介于 -25 和 0 之间），那么`positionP - positionK + 26`将是非负数，从而产生正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:48:10.123

如果您的密钥是 'y'=24 并且字母表的长度是 26，那么您必须将 alphabet-key= 26 - 24 = 2 转换为解密。您总是必须添加然后计算 mod 26。

所以你的代码必须是

```
 //decryption
else{
    for (int i=0; i < a.length(); i++){

            for (int j=0; j < full.length(); j++){
                //finding the index of the current cipher text letter
                if (a.charAt(i) == full.charAt(j)){
                    positionP = j;

                }
                //finding the index of the current key letter
                if(key.charAt(i)==full.charAt(j)){
                    positionK = j;
                }

            }
            //using the formula for vigenere encoding it adds the newly encrypted character to the output
            output = output + full.charAt((positionP + (26-positionK))%26);
        }
    } 
```

# ios6 - iPad 方向不适用于 SDK 6.1

> ID：15055053
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:29:53.120
> 
> 标签：ios6, monodevelop

我有使用 monodevelop 开发的 iPad 应用程序

现在我在使用 SDK 6.1 时遇到问题

方向不适用于 SDK 6.1 或设备 /simulator 6.1

我试图调用返回 true 但它不起作用的 ShouldAutoRotate 函数

函数 willrotate 也根本不调用！

我认为还有另一种使用 SDK 6 启用方向的方法

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:08:27.873

在 iOS6 中，自动旋转和方向更改已更改，因此我使用以下步骤解决了问题

1) 您需要在 FinishedLaunching 上为您的主应用程序窗口分配一个根视图控制器。

所以如果以前像我一样，你`FinishedLaunching(UIApplication app)`在 main.cs 的方法中有这个：

```
window.AddSubview(mainVC.View); 
```

用这个替换它：

```
window.RootViewController = mainVC; 
```

2）替换这个：

```
public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation) 
```

有了这两个功能：

```
public override bool ShouldAutorotate()
 {
    return true;
 }

public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations()
{

    return UIInterfaceOrientationMask.All;
} 
```

`WillRotate`3-您可以使用函数触发旋转动作

# php - VAR 显示从 Javascript 到 PHP 显示

> ID：15055060
> 
> 赞同：0
> 
> 时间：2013-02-24T18:30:30.787
> 
> 标签：php, javascript, get

我正在编写一个脚本，该脚本要求用户验证他们的帐户（来自另一个网站，而不是我自己的网站）。一旦用户输入正确的登录信息，并且登录服务器响应我的脚本，它将用户名显示为

```
" + usernameUrl + " 
```

这是定义该值的脚本部分。

```
var usernameUrl = encodeURIComponent(username); 
```

我需要将其放入文件上传器脚本中，该脚本将允许用户将图像上传为 .png，并且只有他们自己的用户名，没有其他人。但是我已经制作了那个脚本，我只需要知道如何将它添加到脚本本身中。需要更改的行是...

```
move_uploaded_file($_FILES["file"]["tmp_name"], $path."/"<USERNAME>".png"); 
```

如果我需要提供更多信息，请告诉我。:D

他们可能会或可能不会帮助解决此问题的更多代码

```
 document.getElementById("spanServerResponse").style.display = "inline";
    var loginName = document.getElementsByName("loginName")[0].value;
    var loginNameUrl = encodeURIComponent(loginName);
    document.getElementById("spanClientLogin").style.display = "none";

    var username = parts[2];  

    //alert("Username: " + username + "\nSessionId: " + sessionId);

    var usernameUrl = encodeURIComponent(username);
    var sessionIdUrl = encodeURIComponent(sessionId);
    var serverHash = "123"; 
    var urlStr = "http://domain.tld/test.jsp?user=" + usernameUrl + "&sessionId=" + sessionIdUrl + "&serverId=" + serverHash; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:05:19.217

You can send that varaible via ajax and save it in session. using jquery:

```
$.get('save_var.php', {username: username}, function() {
   // you can now upload a file
}); 
```

save_var.php should be:

```
<?php
session_start();
$_SESSION['username'] = $_GET['username'];

?> 
```

and you get username from session in your upload script

```
move_uploaded_file($_FILES["file"]["tmp_name"], $path."/" . $_SESSION['username'] . ".png"); 
```

Maybe you will need to start session before ajax call in the same php file that have javascript code.

# linux - 使用 poll() 在命名管道上的 O_RDWR

> ID：15055065
> 
> 赞同：15
> 
> 时间：2013-02-24T18:30:58.173
> 
> 标签：linux, ipc, pipe, mkfifo

我经历了各种不同的 linux 命名管道客户端/服务器实现，但它们中的大多数都在读/写时使用阻塞默认值。

因为我已经在使用 poll() 来检查其他标志，所以虽然通过 poll() 检查传入的 FIFO 数据也是一个好主意......

经过所有研究后，我认为以 O_RDWR 模式打开管道是在没有编写器打开管道时防止管道上无限数量的 EOF 事件的唯一方法。

这样管道的两端都是关闭的，其他客户端也可以打开可写端。为了回应我会使用单独的管道......

我的问题是，尽管我找到了一些使用 O_RDWR 标志的示例，但 open() 联机帮助页将该标志描述为在分配给 FIFO 时未定义。( [http://linux.die.net/man/3/open](http://linux.die.net/man/3/open) )

但是你将如何在没有 O_RDWR 的管道上使用 poll() 呢？您认为“O_RDWR”是打开管道的合法方式吗？？？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-06-29T19:42:18.973

首先，一些准备工作：

使用`O_NONBLOCK`and`poll()`是常见的做法——而不是相反。要成功工作，您需要确保正确处理所有状态`poll()`并`read()`返回状态：

*   `read()`返回值的`0`意思是EOF——对方已经关闭了它的连接。这对应于（通常，但不是在所有操作系统上）`poll()`返回一个`POLLHUP`revent。您可能想`POLLHUP`在尝试之前检查`read()`，但这不是绝对必要`read()`的，因为保证`0`在写入端关闭后返回。
*   如果您`read()`在编写器连接之前调用，并且您已经连接，`O_RDONLY | O_NONBLOCK`您将重复获得 EOF （`read()`返回`0`），正如您所注意到的。但是，如果您在调用之前使用`poll()`等待事件，它将等待编写器连接，并且不会产生 EOF。`POLLIN``read()`
*   `read()`返回值`-1`通常意味着错误。但是，如果`errno == EAGAIN`，这仅仅意味着现在没有更多可用数据并且您没有阻止，因此您可以返回`poll()`以防其他设备需要处理。如果`errno == EINTR`, then`read()`在读取任何数据之前被中断，您可以立即返回`poll()`或简单地`read()`再次调用。

现在，对于 Linux：

*   如果您在阅读端打开`O_RDONLY`，则：
    *   将`open()`阻塞，直到有相应的写入器打开。
    *   `poll()``POLLIN`当数据准备好读取或发生 EOF 时，将给出一个revent。
    *   `read()`将阻塞，直到读取请求的字节数、关闭连接（返回 0）、被信号中断或发生某些致命的 IO 错误。这种阻塞方式违背了 using 的目的`poll()`，这就是为什么`poll()`几乎总是与 with 一起使用`O_NONBLOCK`。您可以在超时后使用 an`alarm()`来唤醒`read()`，但这过于复杂。
    *   如果作者关闭，那么读者将收到一个`poll()` `POLLHUP`revent，然后`read()`将`0`无限期地返回。此时，阅读器必须关闭其文件句柄并重新打开它。

*   如果您在阅读端打开`O_RDONLY | O_NONBLOCK`，则：
    *   `open()`不会阻塞。
    *   `poll()``POLLIN`当数据准备好读取或发生 EOF 时，将给出一个revent。`poll()`如果没有写入器，也会阻塞直到写入器可用。
    *   在读取所有当前可用的数据后，如果连接仍然打开，则`read()`返回 -1 并设置，或者如果连接已关闭 (EOF)*或尚未由 writer*打开，则返回。当 时，这意味着是时候返回 了，因为连接已打开但没有更多数据。当,尚未读取任何字节并被信号中断时，可以重新启动。`errno == EAGAIN``0`*`errno == EAGAIN``poll()``errno == EINTR``read()`*
    **   如果作者关闭，那么读者将收到一个`poll()` `POLLHUP`revent，然后`read()`将`0`无限期地返回。此时阅读器必须关闭其文件句柄并重新打开它。* 
**   （Linux 特定的：）如果您在阅读端打开`O_RDWR`，那么：
    *   `open()`不会阻塞。
    *   `poll()``POLLIN`当数据准备好被读取时会给出一个revent。但是，对于命名管道，EOF 不会导致`POLLIN`或`POLLHUP`恢复。
    *   `read()`将阻塞，直到读取请求的字节数，被信号中断，或发生其他一些致命的 IO 错误。对于命名管道，它不会返回`errno == EAGAIN`，甚至不会`0`在 EOF 上返回。它只会坐在那里，直到读取到请求的确切字节数，或者直到它收到信号（在这种情况下，它将返回到目前为止读取的字节数，或者`errno == EINTR`如果到目前为止没有读取任何字节，则返回 -1 并设置） .
    *   如果 writer 关闭，如果另一个 writer 打开命名管道，reader 将不会失去读取命名管道的能力，但 reader 也不会收到任何通知。
        *   （Linux 特定的：）如果您在阅读端打开`O_RDWR | O_NONBLOCK`，那么：
    *   `open()`不会阻塞。
    *   `poll()``POLLIN`当数据准备好被读取时会给出一个revent。但是，EOF 不会在命名管道上引起`POLLIN`或恢复。`POLLHUP`
    *   读取所有当前可用的数据后，`read()`将返回`-1`并设置`errno == EAGAIN`. 这是返回`poll()`等待更多数据的时间，可能来自其他流。
    *   如果 writer 关闭，如果另一个 writer 打开命名管道，读者将不会失去读取命名管道的能力。连接是持久的。*

 *正如您所关心的那样，使用`O_RDWR`管道不是标准的，POSIX 或其他地方。

然而，由于这个问题似乎经常出现，在 Linux 上制作“弹性命名管道”的最佳`POLLHUP`方法`0`是`read()`使用`O_RDWR | O_NONBLOCK`.

我看到在 Linux 上处理命名管道的三种主要方法：

1.  （便携式。）没有`poll()`, 和有一个管道：

    *   `open(pipe, O_RDONLY);`
    *   主循环：
        *   `read()`尽可能多的数据，可能会循环`read()`调用。
            *   如果`read() == -1`和`errno == EINTR`，`read()`从头再来。
            *   如果`read() == 0`，则关闭连接，并且已接收到所有数据。

2.  （便携式。）使用`poll()`，并期望管道，即使是命名的管道，也只打开一次，一旦它们关闭，必须由读取器和写入器重新打开，从而建立一个新的管道：

    *   `open(pipe, O_RDONLY | O_NONBLOCK);`
    *   主循环：
        *   `poll()`对于`POLLIN`事件，可能同时在多个管道上。（注意：这可以防止`read()`在编写器连接之前获得多个 EOF。）
        *   `read()`尽可能多的数据，可能会循环`read()`调用。
            *   如果`read() == -1`和`errno == EAGAIN`，则返回`poll()`步骤。
            *   如果`read() == -1`和`errno == EINTR`，`read()`从头再来。
            *   如果`read() == 0`，则连接已关闭，您必须终止或关闭并重新打开管道。

3.  （不可移植，特定于 Linux。）使用`poll()`，并期望命名管道永远不会终止，并且可以多次连接和断开连接：

    *   `open(pipe, O_RDWR | O_NONBLOCK);`
    *   主循环：
        *   `poll()`对于`POLLIN`事件，可能同时在多个管道上。
        *   `read()`尽可能多的数据，可能会循环`read()`调用。
            *   如果`read() == -1`和`errno == EAGAIN`，则返回`poll()`步骤。
            *   如果`read() == -1`和`errno == EINTR`，`read()`从头再来。
            *   如果`read() == 0`，则有问题——它不应该发生`O_RDWR`在命名管道上，而只发生在命名管道`O_RDONLY`或未命名管道上；它表示必须关闭并重新打开的封闭管道。如果在同一个`poll()`事件处理循环中混合命名和未命名管道，这种情况可能仍需要处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:59:20.077

根据[open(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)手册页，您可以通过`O_RDONLY|O_NONBLOCK` 或`O_WRONLY|O_NONBLOCK`避免`open`系统调用被阻止（`errno == ENXIO`在这种情况下您会得到）

正如我所评论的，还阅读了[fifo(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/fifo.7.html)和[mkfifo(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/mkfifo.3.html)手册页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-10T00:07:44.210

Just keep an open O_WRONLY file descriptor in the reading process alongside the O_RDONLY one. This will achieve the same effect, ensuring that read() never returns end-of-file and that poll() and select() will block.

And it's 100% POSIX*

# c# - 如何唯一标记文件及其各种版本？

> ID：15055066
> 
> 赞同：0
> 
> 时间：2013-02-24T18:31:14.100
> 
> 标签：c#, .net, io

我正在开发一个小型应用程序，以允许我在每次更改之前修改文件和版本每个文件。我希望该应用程序做的是对每个文件进行唯一标记，以便每当打开同一个文件时，都可以拉回该特定文件的历史记录。我没有为此使用任何大版本控制工具。请问我如何在语法上执行此程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:19:14.063

简单的解决方案。使用已经存在的版本控制（例如 Git），但如果你真的想这样做，那么试试这个。

每次创建新版本时，将文件的先前版本复制到单独的隐藏目录中，并在该目录中有一个配置文件，其中包含该文件的校验和。校验和“很可能”是唯一的，因为它是文件的哈希值（每次文件更改时，校验和都会不同 - 您需要自己计算校验和。）

当您打开文件时，只需检查目录中是否存在该配置文件，并将校验和与已打开的校验和进行比较。如果它们相同，那么您在同一个文件中。这就是它的工作原理。

您可以使用校验和来优化它。因此，如果用户进入文件更改内容，则更改回原来的方式并保存。校验和应该返回相同的东西（除非您包括修改的日期和时间等）

每个文件夹都应该有一个遵循模式的名称（filenameVn.n 例如 someTextFile.txt.v1.0），然后您将能够弄清楚您在历史记录中导航到的目录应该说什么。

另一种方法是简单地复制文件并在其末尾附加一些标签（可能是校验和？版本号？），这样你就不需要额外的文件夹了。

另一种方法是调用文件，无论记录的校验和是什么，并将版本的历史记录（连同相应的校验和）存储在一个单独的配置文件中，然后在您想弄清楚您想要访问的文件时引用它是叫。所以每个版本都将根据自己的校验和来引用（就像在 Git 中一样。）

因此，总而言之，每个文件版本都将存储在某处，您将能够验证它们是否相同（因此您可以通过避免存储多个文件而没有更改并浪费空间来进行优化）并且您将能够动态确定每个版本在哪里并可以访问它。

希望它能让您对如何开始有更多的了解。

# java - 不能将 IplImage 与 OpenCV 2.4.4 一起使用

> ID：15055073
> 
> 赞同：2
> 
> 时间：2013-02-24T18:32:00.013
> 
> 标签：java, opencv, image-processing, iplimage

我刚刚下载并安装了新的 opencv 版本。它本机支持 java 的事实非常令人兴奋。但是我在移植我的 javacv 代码时遇到了一些麻烦。我似乎无法再使用 IplImage，因为它无法解决，即使我已经导入了 org.opencv.core.*；切换到 Mat 似乎并不理想，因为我使用的许多 opencv 函数都需要 IplImage。

例子：

```
public static IplImage getAbsDifference (IplImage source1, IplImage source2){

        IplImage result = cvCreateImage(new CvSize(source1.width(),source1.height()),source1.depth(),3);

        cvAbsDiff(source1, source2, result);

        return result;

    } 
```

那么我需要对旧代码进行哪些更改才能与新版本的 opencv for java 一起使用？

抱歉，如果这是一个愚蠢的问题，对于图像处理领域来说还是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T21:15:36.543

另一个答案：将 IplImage 更改为 Mat。

似乎为 Mats 实现了许多功能（至少在 Java 中），例如 find/drawContour [http://docs.opencv.org/java/index-all.html](http://docs.opencv.org/java/index-all.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T21:06:34.647

鉴于缺乏答案，而且我自己无法找到它，我建议你做同样的事情：使用 JavaCV [https://code.google.com/p/javacv/](https://code.google.com/p/javacv/)

据我所知，OpenCV 自己对 Java 的支持似乎是最近才出现的，而 JavaCV 似乎已经存在了更长时间。

# c# - 如何在函数之间等待

> ID：15055074
> 
> 赞同：1
> 
> 时间：2013-02-24T18:32:07.923
> 
> 标签：c#, .net, multithreading, wait

我想在不使用 Thread.sleep 的情况下执行以下操作。基本上我必须调用 3 个函数，每个函数之间都有一些等待时间，并在循环中运行整个事情 100 次。

我尝试使用 Timer 类，但似乎我使用不正确。

```
 func test()
 for(int i=0;i<100;i++){
      func A()
      wait for 20 seconds
      func B()
      wait for 45 seconds
      func C()
      wait for 2 mins
}//repeat for 100 times 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:24:42.043

您可能正在寻找任务框架。你可以这样做：

```
async void Run()
{
    for (int i=0; i<100; i++)
    {
        A();
        await Task.Delay(TimeSpan.FromSeconds(20));
        B();
        await Task.Delay(TimeSpan.FromSeconds(45));
        C();
        await Task.Delay(TimeSpan.FromMinutes(2));
    }
} 
```

该函数将立即返回，但该循环将继续在后台运行。

编辑：正如下面提到的 svick，这是一个新的 .NET 4.5 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:24:02.093

我要去做一个很大的假设（所有线索都指向那个方向）：

我假设您在 Windows 窗体中执行所有这些操作，并且您希望 GUI 在 Thread.Sleep() 调用期间不要冻结，对吗？如果是这种情况，那么您可以编写此方法：

```
public static class Foo {
  public static void MySleep(int milliseconds) {
    int startTick = Environment.TickCount;
    while (Environment.TickCount - startTick < milliseconds)
      Application.DoEvents();
  }
} 
```

然后用 Foo.MySleep 调用替换 Thread.Sleep 调用（但**要**注意 Application.DoEvents 的含义，它允许在控件位于任何 MySleep 调用内部时重新执行整个过程。**我不推荐**如果您不采取预防措施，就以这种方式做事——例如，您应该在**测试执行时始终禁用调用****func test()**的按钮，因为它可以在永无止境的递归中一次又一次地执行）：

 **```
func test()
  for(int i=0;i<100;i++){
    func A()
    Foo.MySleep(20 * 1000);
    func B()
    Foo.MySleep(45 * 1000);
    func C()
    Foo.MySleep(2 * 60 * 1000);
}//repeat for 100 times 
```

还有另一种方法（更安全一点）可以做到这一点。它涉及辅助线程和一些 Control.Invoke 调用。它还允许您使用标准 System.Thread.Sleep(int milliseconds) 方法。

它是这样的：

```
public class Form1 : Form {

  public void triggerTestAndReturnImmediately() {
    new Thread(start: () => {

      Action callA = () => funcA();
      Action callB = () => funcB();
      Action callC = () => funcC();

      for(int i=0;i<100;i++){
        this.Invoke(callA);
        Thread.Sleep(20 * 1000);

        this.Invoke(callB);
        Thread.Sleep(45 * 1000);

        this.Invoke(callC);
        Thread.Sleep(2 * 60 * 1000);
      }//repeat for 100 times

    }).Start();
  }

} 
```

“this.Invoke(someDelegate)”位基于“triggerTestAndReturnImmediately”方法是 Form 子类的成员而“this”是 Form 实例这一事实。

这里发生的是您在单独的线程上运行等待操作 + 触发实际工作人员（funcA、funcB、funcC）。为什么你只运行实际工人的触发而不是实际工人本身？因为您很可能会从这些函数访问 GUI 对象，而这在 WinForms（以及许多其他 .NET 或非 .NET GUI 框架）中是不允许的。

因此，您要求 GUI 线程（正如您在问题中指出的那样）必须在 99% 的时间内空闲才能执行这些功能 - 因此是 this.Invoke （ someDelegate ）调用。

您应该采取与我之前提到的相同的预防措施，但这一切都取决于您以及您希望您的应用程序做什么。假设您想要一个按钮的 Click 事件处理程序调用**triggerTestAndReturnImmediately**并且您希望它在此过程中被禁用，您将如何禁用和重新启用该按钮？

如果你这样做：

```
void buttonBar_Click(object sender, EventArgs e) {
  this.buttonBar.Enabled = false;
  this.triggerTestAndReturnImmediately();
  this.buttonBar.Enabled = true;
} 
```

那么这对你没有任何好处，因为**triggerTestAndReturnImmediately**方法正如它的名字所暗示的那样：“它立即返回”。

那么你将如何解决这个问题？您可以执行以下操作：

```
void buttonBar_Click(object sender, EventArgs e) {
  this.triggerTestAndReturnImmediately();
}

  public void triggerTestAndReturnImmediately() {
    this.buttonBar.Enabled = false;

    new Thread(start: () => {

      Action callA = () => funcA();
      Action callB = () => funcB();
      Action callC = () => funcC();
      Action reenableButton = () => this.buttonBar.Enabled = true;

      for(int i=0;i<100;i++){
        this.Invoke(callA);
        Thread.Sleep(20 * 1000);

        this.Invoke(callB);
        Thread.Sleep(45 * 1000);

        this.Invoke(callC);
        Thread.Sleep(2 * 60 * 1000);

        this.Invoke(reenableButton);
      }//repeat for 100 times

    }).Start();
  } 
```

还要确保您始终重新启用按钮，无论调用序列是否因某些**try finally**语句或其他体操而崩溃。

所以我认为您可以了解我所说的预防措施是什么（它们取决于您希望您的应用程序做什么）。**

# java - 为什么我的计数器不起作用？爪哇

> ID：15055075
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:32:08.377
> 
> 标签：java

我试过运行它，但打印出来的`circleCounter`只打印 0。如果我将计数器代码放在底部的测试器功能下，那么它会起作用。我究竟做错了什么？我错过了什么吗？

```
public class Project1 {
    public int circleCounter; // Number of non-singular circles in the file.
    public int posFirstLast;  // Indicates whether the first and last circles overlap or not.
    public double maxArea;       // Area of the largest circle (by area).
    public double minArea;       // Area of the smallest circle (by area).
    public double averageArea;   // Average area of the circles.
    public double stdArea;       // Standard deviation of area of the circles.
    public double medArea;       // Median of the area.
    public int stamp = 189375;

    public Project1() {
        // This method is complete.
    }

    public void results(String fileName) {
        MaInput F1 = new MaInput("DataFile.data");
        double x, y, rad;
        int circleCounter = 0;
        double sumArea = 0;
        Circle A = new Circle();

        while (!F1.atEOF()) {
            x = F1.readDouble();
            y = F1.readDouble();
            rad = F1.readDouble();

            circleCounter++;

            if (A.area() > maxArea) {
                maxArea = A.area();
            }

            if (A.area() < minArea) {
                minArea = A.area();
            }

            sumArea += A.area();
            averageArea = sumArea / circleCounter;

            stdArea = Math.sqrt((Math.pow(A.area() - averageArea, 2) / circleCounter));

            //Array for points
            Circle[] points = new Circle[circleCounter];
            for (int j = 0; j < points.length; j++) {
                if (rad > Point.GEOMTOL) {
                    points[j] = A;
                }
            }

            posFirstLast = points[1].overlap(points[points.length]);

            //Array of areas
            double[] areas = new double[circleCounter];
            for (int i = 0; i < areas.length; i++) {
                if (rad > Point.GEOMTOL) {
                    areas[i] = A.area();
                }
            }

            //Bubble Sort
            for (int i = 0; i < areas.length; i++) {
                if (areas[i + 1] < areas[i]) {
                    double temp = areas[i + 1];
                    areas[i + 1] = areas[i];
                    areas[i] = temp;
                }
            }

            //Median
            if (areas.length % 2 == 0) {
                medArea = (0 / 5) * (areas[(areas.length / 2) - 1] + areas[areas.length / 2]);
            } else {
                medArea = (0.5) * (areas[((areas.length) - 1) / 2]);
            }

        }
    }

    public static void main(String args[]) {

        Project1 pleasework = new Project1();
        System.out.println("Number of (non-singular) circles: " + pleasework.circleCounter);
        System.out.println("Whether the first and last circles overlap: " + pleasework.posFirstLast);
        System.out.println("Maximum Area: " + pleasework.maxArea);
        System.out.println("Minimum Area: " + pleasework.minArea);
        System.out.println("Average Area: " + pleasework.averageArea);
        System.out.println("Standard deviation of the areas: " + pleasework.stdArea);
        System.out.println("Median of the areas: " + pleasework.medArea);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:37:46.080

所以，如果*只有*你`circleCounter`仍然给你 0，那么你应该注意隐藏你的变量。

`private int circleCounter = 0;`适用于全局范围。

`int circleCounter = 0;`适用于您方法的本地范围`results`。最局部的范围优先于变量，因此您通过在此处重新声明全局变量来隐藏全局变量。

只需取出该声明，您的变量就不会被遮蔽。

编辑：这也假定您实际上也*调用*了该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T18:38:44.647

代码中的 main 不调用 results() 方法，因此所有字段的默认值都打印在控制台上，即 0 或 0.0（对于双精度），因为 main 是程序中 java 的唯一入口点。

# jsf - bean方法完成后渲染richfaces popupPanel

> ID：15055076
> 
> 赞同：1
> 
> 时间：2013-02-24T18:32:12.560
> 
> 标签：jsf, richfaces

我有一个简单的问题，如果我的托管 bean 出现问题，我想显示一个弹出窗口。bean 包含一个可以使用 getter/setter 方法引发的异常列表。

xhtml 看起来像这样

```
 <rich:panel>
    <h:form>
        <a4j:commandButton value="Compute Mission"
            action="#{missionHandler.generateMissionFeasability}"
            render="popupPanel">
        </a4j:commandButton>
    </h:form>
   </rich:panel>
   <rich:popupPanel id="popupPanel" modal="true" autosized="true"
    resizeable="false" moveable="false" rendered="#{not empty    missionHandler.exceptions}">
    <f:facet name="header">
        <h:outputText value="Exceptions raised during the processing    " />
    </f:facet>
    <f:facet name="controls">
        <h:outputLink value="#"
            onclick="#{rich:component('popupPanel')}.hide();return false;">
        </h:outputLink>
    </f:facet>
    </rich:popupPanel> 
```

如您所见，我有一个命令按钮，应该在 bean 中调用 generateMissionFeasibility 方法。该方法将（除其他外）在异常列表中添加异常。

我想检查列表（是否为空）以显示弹出窗口

上面的代码不起作用，因为我认为弹出窗口是在bean中的方法结束之前呈现的，并且列表一开始是空的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:13:27.477

渲染后显示弹出面板的一种方法是更改

```
rendered="#{not empty missionHandler.exceptions}" 
```

到

```
show="#{not empty missionHandler.exceptions}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:52:12.603

代码不起作用，因为第一次要渲染视图时，`missionHandler.exceptions`它将是空的，这意味着`popupPanel`永远不会进入浏览器。对 reRender 的后续请求`popupPanel`将失败，因为在 DOM 中找不到该组件。

对于要进行 ajax 更新的组件，它必须已经在浏览器的 DOM 中，这就是 ajax 的工作方式。因此解决方案是将弹出面板的内容包装在一个始终会呈现的组件中。

除此之外，即使您的渲染正确，您的弹出窗口也只会放置在 DOM 中。您实际上需要调用`show()`弹出窗口以使其显示

但是，为了实现您想要的，更好的选择是

1.  使用 javascript 有条件地显示弹出窗口。如果满足条件，`show()`则为弹出窗口调用该函数。否则，将调用一个空的、什么都不做的 JavaScript 函数。

    ```
    <a4j:commandButton value="Compute Mission" action="#missionHandler.generateMissionFeasability}"
        oncomplete="#{not empty missionHandler.exceptions ? #{rich:component('popupPanel')}.show()" : doNothing()}" render="popupPanel">
    </a4j:commandButton> 
    ```

    对于 doNothing js：

    ```
    <script> function doNothing(){} <script/> 
    ```

2.  从模态面板中取出渲染条件

编辑：此外，`show`弹出组件上的属性可以基于与`oncomplete`属性相同的 EL 条件

# asp.net - 每个循环 vb.net razor 2（ASP.NET 网页）出错

> ID：15055078
> 
> 赞同：1
> 
> 时间：2013-02-24T18:32:13.910
> 
> 标签：asp.net, vb.net, asp.net-webpages, razor-2

我的 vb.net razor 2 代码“对象变量或未设置块变量”中有此错误。11号线

```
 Line 9:      Dim i = 0
   Line 10:         
   Line 11:     @For Each color In PageData("Colors")
   Line 12:         @<p style="background-color:@color; font-family:@Page.Fonts(i)">
   Line 13:             This paragraph is @color 
```

这是我的 _PageStart.vbhtml 代码：

```
 @Code
       Layout = "~/Shared/_Layout1.vbhtml"
       PageData("Colors") = {"LightCyan", "Gainsboro", "Chocolate"}
   End Code 
```

这是我的 default.vbhtml 代码：

```
 @Code
       Page.Title = "Level 1 Start page"
       Layout = "~/Shared/_Layout2.vbhtml"
   End Code

   <h1>Testing _PageStart From Level 1</h1>

   @Code
       Dim i = 0

       @For Each color In PageData("Colors")
           @<p style="background-color:@color; font-family:@Page.Fonts(i)">
               This paragraph is @color 
           </p>
           i += 1
       Next

   End Code

   <p><a href="/Level1/Page">Click</a> to visit Level 1</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:59:50.650

从您显示的代码来看，您似乎没有初始化 Page.Fonts ，这在您正在使用的书中相关 Try It Out 的第 10 步中有所介绍。这是一个VB版本：

```
Page.Fonts = {"Verdana", "Arial", "Courier New"} 
```

# android - 自己的 csv 阅读器以字符串数组内存不足

> ID：15055080
> 
> 赞同：0
> 
> 时间：2013-02-24T18:32:21.477
> 
> 标签：android, csv, arrays

因为我只阅读一个非常简单的 csv，其中只有字符串用逗号分隔，应该转换为字符串 []。

我认为这很容易，一个外部罐子会有点多，我可以很容易地处理这个。但是会发生什么是第一个项目被添加，直到内存已满并崩溃！

public List readWinkels(Activity a){ List winkelList = new ArrayList();

```
 try{
            InputStream winkelcsv =  a.getResources().getAssets().open("winkels.csv");

            BufferedReader br = new BufferedReader(new InputStreamReader(winkelcsv, "UTF-8"));
            String s  = br.readLine();
            while (s != null){
                winkelList.add(s);
                System.out.println(s.toString());
            }

            br.close();
            for(int i =0;i<winkelList.size();i++) {
                System.out.println(winkelList.get(i));
                }
        }catch(IOException ioe){
            ioe.printStackTrace();
        }

        return winkelList; 
```

这是我的代码....我不明白为什么它不起作用，有人可以帮忙吗？readline 读取该行，然后读取点跳到下一行（我认为）那么为什么第一行添加了无数次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:36:26.083

这是使用`while`循环遍历文件行的标准习惯用法，应用于您的代码：

```
String s;
while ((s = br.readLine()) != null){
    winkelList.add(s);
    System.out.println(s.toString());
} 
```

您需要`readLine()`在循环的每次迭代中调用。原始代码只不过是一个无限循环，因为`s`只读取一次。假设`s`is not `null`，则循环条件永远不会为假，因此列表会无限增长，直到使用完所有可用内存。

# c# - 具有动态列和行的 DataGrid

> ID：15055086
> 
> 赞同：0
> 
> 时间：2013-02-24T18:32:57.543
> 
> 标签：c#, wpf, mvvm, wpfdatagrid, wpf-4.0

我有一个要求，我必须显示一个带有表格列表的树视图，如果用户选择任何表格，那么它应该显示一个带有列列表的网格，并且行应该有一个 DataGridCheckboxColumns，并且用户可以编辑复选框列。

目前，我在执行此操作时面临技术挑战。

我能够创建列，但没有显示行，并且在更改树视图选择时更多，尽管我更新了数据表，但如果我分配给网格，它不会反映在 UI 中。请帮助我，这确实是一个紧急要求。

提前致谢。请在下面找到代码片段。

![在此处输入图像描述](../Images/aa5b3d18ff47689441755340a12a24d6.png)

```
//DataGrid Add Columns and Rows
private void DataGridInitialize(string tableName)
{
    DataSet ds = selectionViewBAL.GetColumnNames(tableName);
    DataSet dataset = new DataSet();
    DataTable dt = new DataTable();
    dt.Columns.Add("Functions");
    dt.Columns.Add("AllColumns");

    foreach (var row in ds.Tables[0].Rows)
    {
        string rowname = ((System.Data.DataRow)(row)).ItemArray[0].ToString();
        dt.Columns.Add(rowname);
    }

    int i = 0;
    foreach (DataColumn col in dt.Columns)
    {
        if (i == 0)
        {
            dataGrid1.Columns.Add(
              new DataGridTextColumn
              {
                  Header = "Functions",
                  Binding = new Binding(string.Format("[{0}]", "Functions"))
              });
        }
        else
        {
            dataGrid1.Columns.Add(
              new DataGridCheckBoxColumn
              {
                  Header = col.ColumnName,
                  Binding = new Binding(string.Format("[{0}]", col.ColumnName))
              });
        }
        i++;
    }

    DataSet fetchFunctionNames = new DataSet();
    fetchFunctionNames = selectionViewBAL.GetListOfFunctions(); //FetchFunctions();

    DataRow dr = dt.NewRow();

    var itemsArray = new object[dataGrid1.Columns.Count];
    for (int j = 0; j < fetchFunctionNames.Tables[0].Rows.Count; j++)
    {
        itemsArray[0] = fetchFunctionNames.Tables[0].Rows[j].ItemArray[1];
        for (i = 1; i < itemsArray.Length; i++)
        {
            itemsArray[i] = true;
        }

        dr.ItemArray = itemsArray;

        dt.Rows.Add(dr);
        dr = dt.NewRow();
    }

    dataGrid1.DataContext = dt;
} 
```

我可以看到 dt 中的所有内容，但我无法将其分配给 datagrid，但我无法编辑。

```
<DataGrid Grid.Row="0" Grid.ColumnSpan="4" Grid.Column="1"
          HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"
          HorizontalAlignment="Left" VerticalAlignment="Top" Margin="7,9,0,0"
          Name="dataGrid1" ItemsSource="{Binding}"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:45:24.663

绑定到[DataTable.DefaultView 属性](http://msdn.microsoft.com/en-us/library/system.data.datatable.defaultview.aspx)。

```
dataGrid1.ItemsSource = dt.DefaultView; 
```

请参阅此[WPF 片段教程 - 也将 DataTable 绑定到 DataGrid](http://tech.pro/tutorial/1054/wpf-snippet-tutorial-binding-a-datatable-to-a-datagrid)。

# colors - 如何更改 ColorBox 中框架的颜色？

> ID：15055091
> 
> 赞同：0
> 
> 时间：2013-02-24T18:33:13.920
> 
> 标签：colors, frame, colorbox

我是 jQuery 新手，虽然我已经整理了 90% 的我想做的事情，但我无法将 ColorBox 中框架的颜色从灰色更改。我已经阅读了代码并阅读了[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)的设置部分，但看不到它的设置位置。帮助会很受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:14:51.943

没有 javascript 选项可供您更改颜色。你必须通过 CSS 来完成。它会根据您使用的“主题”而有所不同，您可能需要为其编辑或创建新图像。

# c# - BLL 是否应该验证与 UI 相同的内容

> ID：15055097
> 
> 赞同：1
> 
> 时间：2013-02-24T18:33:24.420
> 
> 标签：c#, asp.net-mvc

在我的 Web 应用程序中，我有以下层：

*   用户界面
    *   控制器、视图模型、视图
*   BLL
    *   服务
*   达尔
    *   存储库
*   楷模

在我的 UI 层中，我使用 ViewModels 上的 DataAnnotations 来验证输入。控制器与服务通信以使用它来做一些事情，比如注册一个新用户。我的问题是：我是否应该在服务中验证 DataAnnotations 已经在 ViewModel 上执行的相同操作，例如用户名、密码和电子邮件验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:34:54.333

如果此服务层打算在您的 ASP.NET MVC 应用程序之外重用，那么您应该进行验证。如果不是，那么可能没有必要进行**相同**的验证。在您的服务层上，您应该验证业务需求，例如*指定的用户名已经存在，*或者*您不能将 3000 美元汇入账户 X，因为您当前账户中只有 2000 美元*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:35:51.327

如果要在其他地方使用，再次在您的服务层中再次验证可以帮助“未来证明”您的应用程序，例如向您的应用程序添加 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:36:14.077

您应该始终验证进入您的服务的所有数据。UI 层可能会执行相同的验证（甚至共享代码来执行此操作）。

请注意，某些验证（即“电子邮件是真实的”、“用户创建成功”）只能在服务上执行。

# git - Git push 或 pull 在远程服务器上不起作用

> ID：15055106
> 
> 赞同：0
> 
> 时间：2013-02-24T18:34:16.587
> 
> 标签：git, version-control, github, git-push, git-pull

我正在关注[Dan Eden 的 Github 工作流程指南](http://daneden.github.com/github-workflow/)。尝试从远程将我的更改推送到 Github 时，我遇到了一个问题，使用`git push -u origin master`. 我已将所有文件添加到舞台并提交它们，当我使用上面的命令时，它会返回：

```
To git@github.com:tomoakley/5-lines.git
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:tomoakley/5-lines.git'
hint: Updates were rejected because the tip of your current branch is behind 
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

`git pull`因此，正如它所建议的那样，我尝试使用它，它会返回：

```
git: 'pull' is not a git command. See 'git --help'.

Did you mean this?
    shell 
```

我已经联系了我的两个网络主机，他们说这不是 Git 安装的问题，而是我的 ssh 密钥的问题（使用`ssh -T git@github.com`带有正常身份验证消息的返回），所以不可能这样。我还联系了 Github，目前正在调查中。Github 支持人员告诉我使用我现在正在做的[SSH 代理转发。](https://help.github.com/articles/using-ssh-agent-forwarding)

关于我的服务器和 git 的一些细节：

*   `git --version`: git 版本 1.7.12
*   `git --exec-path`：/usr/local/libexec/git-core

感谢任何回答的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:39:27.800

[This answer](https://stackoverflow.com/a/2717404/1095946) to a similar question建议修复 /usr/local/libexec 目录的权限

```
sudo chmod a+rx /usr/local/libexec 
```

不过，不确定它是否适用于您的情况。

另一种选择是将 GIT_EXEC_PATH 变量添加到您的 .bashrc 中（将其添加到底部）：

```
export GIT_EXEC_PATH=/usr/local/libexec/git-core 
```

# android - Android AlertDialog EditText 关闭错误

> ID：15055113
> 
> 赞同：0
> 
> 时间：2013-02-24T18:34:58.473
> 
> 标签：android, android-edittext, android-alertdialog

我必须通过 AlertDialog 和 EditText 从用户那里获取密码。当用户打开此 AlertDialog 然后按**Cancel**或**back button**时，它会正常消失。但是，当用户再次打开此 AlertDialog 时，应用程序将被破坏。我的代码在这里，我在哪里犯错了？

```
sifrePencere.setTitle("Çıkış");
sifrePencere.setMessage("Uygulamayı kapatmak için lütfen şifreyi giriniz:");
sifrePencere.setView(sifre);

sifrePencere.setPositiveButton("Tamam", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {

        String girilenSifre = sifre.getText().toString();

        SQLiteDatabase db = vt.getReadableDatabase();

        Cursor kayit = db.rawQuery("SELECT sifre FROM CocukTableti", null);
        kayit.moveToFirst();

        if (girilenSifre.equals(kayit.getString(0))) {

            android.os.Process.killProcess(android.os.Process.myPid());

        } else {

            dialog.dismiss();
            dialog.cancel();
            Toast.makeText(getApplicationContext(), "Girilen şifre hatalı!", Toast.LENGTH_SHORT).show();

        }

    }
});

sifrePencere.setNegativeButton("Vazgeç", null);

sifrePencere.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:20:25.003

在你的代码之上写

```
mybuilder = new AlertDialog.Builder(this); 
```

和之前

```
sifrePencere.show(): 
```

写下这个声明

```
myAlertDialog = mybuilder.create(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:12:00.737

我在 OptionsMenu 中显示了这个 AlertDialog。但是我在代码之上定义了变量。所以，错误来自这里。我将这些变量定义到 OnOptionsItemClick 中，它已修复！

# android - 真机收件箱收件失败

> ID：15055114
> 
> 赞同：1
> 
> 时间：2013-02-24T18:35:02.557
> 
> 标签：android, cursor

我正在尝试获取收件箱并发送消息。为此，我在下面编写了我的代码。我的代码在模拟器中运行良好，但是当我尝试在真实设备上运行它时它不起作用。即使收件箱中有消息，它也无法收集收件箱消息。我想补充一点，我想使用联系号码进行查询以检索消息。

```
Cursor cursorsender = contentResolverSender.query(
            Uri.parse("content://sms/sent"), null, "address = "
                    + senderAddress, null, null); 
```

```
Cursor cursor = contentResolver.query(Uri.parse("content://sms/inbox"),
            null, "address = " + senderAddress, null, null); 
```

我的 cursorsender.movetofirst() 返回 false。

# php - 如何将表单输入值传递给php函数

> ID：15055115
> 
> 赞同：3
> 
> 时间：2013-02-24T18:35:07.873
> 
> 标签：php, html, forms, function

我想写一个 php 页面，其中有一个 html 表单。我想将表单的所有输入（例如数字）发送到 php 函数（而不是 javascript 函数；我这样做是为了隐藏我的 javascript 函数代码）。

如何将输入值发送到 php 函数？
是否可以通过调用php函数`onclick="function(param1, param2)"`？
我知道 javascript 是一种客户端语言，而 php 是服务器端。

如果可能的话，如何在输入字段中编写函数的返回？
我想留在我的页面中。
是否正确- `action="#"`？
我的代码是：

```
<form action="#" method="get">
    Inserisci number1: 
    <input type="text" name="val1" id="val1"></input>

    <?php echo "ciaoooo"; ?>

    <br></br>
    Inserisci number2:
    <input type="text" name="val2" id="val2"></input>

    <br></br>

    <input type="submit" value="send"></input>
</form> 
```

帮助我实现简单的 php 函数以及从输入到函数的值传递！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T18:40:57.000

让你`action`空。您不需要设置 `onclick`属性，这只是 javascript。当您单击提交按钮时，它将使用表单输入重新加载您的页面。因此，在表单顶部编写您的 PHP 代码。

```
<?php
if( isset($_GET['submit']) )
{
    //be sure to validate and clean your variables
    $val1 = htmlentities($_GET['val1']);
    $val2 = htmlentities($_GET['val2']);

    //then you can use them in a PHP function. 
    $result = myFunction($val1, $val2);
}
?>

<?php if( isset($result) ) echo $result; //print the result above the form ?>

<form action="" method="get">
    Inserisci number1: 
    <input type="text" name="val1" id="val1"></input>

    <?php echo "ciaoooo"; ?>

    <br></br>
    Inserisci number2:
    <input type="text" name="val2" id="val2"></input>

    <br></br>

    <input type="submit" name="submit" value="send"></input>
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T18:39:52.353

这是非常基本的，只需将要用于处理的 php 文件放入元素中。

例如

```
<form action="process.php" method="post"> 
```

然后在 process.php 中，您将使用以下方式获取表单值`$_POST['name of the variable]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T18:45:41.390

您需要研究 Ajax；[从这里开始，](http://www.w3schools.com/ajax/default.asp)这是留在当前页面并能够将输入发送到 php 的最佳方式。

```
<!DOCTYPE html>
<html>
<head>
<script>
function showHint(str)
{
var xmlhttp;
if (str.length==0)
  { 
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","gethint.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<h3>Start typing a name in the input field below:</h3>
<form action=""> 
First name: <input type="text" id="txt1" onkeyup="showHint(this.value)" />
</form>
<p>Suggestions: <span id="txtHint"></span></p> 

</body>
</html> 
```

这将获取用户在文本框上的输入并从此处打开网页 gethint.php?q=ja php 脚本可以使用 $_GET['q'] 执行任何操作并回显到页面 James, Jason....等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T18:37:33.413

不，动作应该是 php 文件的名称。通过点击，您只能调用 JavaScript。请注意，对用户隐藏您的代码会破坏信任。JS 在浏览器上运行，因此需要一些信任。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T18:42:53.370

您可以将 php 文件写入`action`表单元素的 attr。
在 php 端，您可以通过`$_POST['element_name']`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-06-08T18:21:35.920

你一定读过函数调用。这里我给你举个例子。

```
<?php
 funtion pr($n)
{
echo $n;
 }
?>
<form action="<?php $f=$_POST['input'];pr($f);?>" method="POST">
<input name=input type=text></input>
</form> 
```

# jquery - 在尝试获取下一个请求之前同步 jquery 请求等待完成

> ID：15055116
> 
> 赞同：0
> 
> 时间：2013-02-24T18:35:20.853
> 
> 标签：jquery

我已经阅读了很多线程，我的问题的问题，我找到了答案。但我想问一下我的功能是否正常。

我必须在 onclick 事件中处理具有不同网络 ID 的表单。

```
function setBoocking() {
    if ($('.ajaxre').length) {
        var key = 0;
        //var ajaxboocking = [];
        var sotredPDF = new Array();
        $('.ajaxre').each(function () {
            var form = $(this);
            var data = form.serialize();
            $.ajax({
                async: false,
                timeout: 4000,
                url: "ajaxloader.php",
                type: "POST",
                data: data,
                dataType: "json",
                success: function ($data) {
                    if ($data != null) {
                        if ($data.status == 1) {
                            alert("all fine"):
                        }
                    }
                },
                error: function ($databack) {
                    ajaxfehler('normal');
                    loading('end');
                }
            });
        });
    }
} 
```

html

```
<div class="ajaxre">
    <form class="ajaxre" id="1">
        <input type="hidden" name="test" value="test1" />
    </form>
</div>
<div class="ajaxre">
    <form class="ajaxre" id="2">
        <input type="hidden" name="test" value="test2" />
    </form>
</div>
<div class="ajaxre">
    <form class="ajaxre" id="3">
        <input type="hidden" name="test" value="test3" />
    </form>
</div>
<br />
<br /><a onclick="setBoocking();">test</a> 
```

所以你看到我在我的 ajax 请求 async:false 中有。这样可行。但是我可以让我的函数使用异步请求“我将设置 timout 函数”不与 asnc 一起工作，并等待一个 reuest 完成或出错，然后尝试下一个请求吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:09:50.913

Ajax 请求返回所谓的延迟，您可以做的是将所有 ajax 请求的响应存储在一个数组中然后使用。

```
$.when.apply($, promises).then(function(){
}); 
```

然后，这将允许您的所有调用异步运行。（Promises 是 ajax 延迟对象的数组）。

这篇文章应该可以帮助您充分理解：

[http://richardneililagan.com/2011/05/using-deferred-objects-in-jquery-1-5/](http://richardneililagan.com/2011/05/using-deferred-objects-in-jquery-1-5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:54:54.440

如果请求发生，您可以尝试这样的事情，延迟函数调用一秒钟。

```
var pause = false;
function request(data) {
    if (!pause) {
        pause = true;
        $.ajax({
            url: "ajaxloader.php",
            type: "POST",
            data: data,
            dataType: "json",
            success: function ($data) {
                if ($data != null) {
                    if ($data.status == 1) {
                        alert("all fine");
                        pause = false;
                    }
                }
            },
            error: function ($databack) {
                ajaxfehler('normal');
                loading('end');
                pause = false;
            }
        });
    } else {
        setTimeout(function() {
            request(data);
        }, 1000);
    }
}

function setBoocking() {
    if ($('.ajaxre').length) {
        var key = 0;
        //var ajaxboocking = [];
        var sotredPDF = new Array();
        var in_request = false;
        $('.ajaxre').each(function () {
            request($(this).serialize());
        });
    }
} 
```

# javascript - 如何将数组传递给Javascript中的另一个函数？

> ID：15055124
> 
> 赞同：0
> 
> 时间：2013-02-24T18:36:03.643
> 
> 标签：javascript, arrays, function, get

我不确定如何将此数组传递`foo`给我需要它的另一个函数。这是我的设置：

```
if (XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200) 
            {
                var xmlResponse = XMLHttpRequestObject.responseXML;
                var foo = parseXML(xmlResponse);
                dataOutput.innerHTML += foo;
            } 
```

`foo = (2,4,Party---12:00,2,22,Eventalist Launch---6:00,2,18,Play Day---12:00)`

JSON =`["2","4","Party---12:00","2","22","Eventalist Launch---6:00","2","18","Play Day---12:00"]`

所以我需要将此数组传递给 HolidayName 变量。

```
function getHoliday(monthSelected,theday)
{
    monthSelected = monthSelected + 1
    var holiday = ""
    var HolidayName = "NEEDS TO BE foo"
} 
```

我不确定是否可以在不更改 getHoliday 参数的情况下移动此数组。这是因为这个函数也在其他地方被调用，我不能混淆不同的参数。有没有办法构建一个“get”函数来获取我的数组 foo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:42:16.490

如果您不想更改 的参数，请`getHoliday(),`创建另一个接收所有 3 个参数的函数，将其中两个传递给 的调用`getHoliday()`，然后处理数组。

```
function getHolidayWithArray(monthSelected, theday, fooArray) {

    getHoliday(monthSelected, theday);  // invoke getHoliday

    // work with fooArray
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:41:13.910

向 getHoliday 添加附加参数不会影响调用它的其他函数。

因此，您可以添加一个附加参数`getHoliday`并使用一些条件逻辑为其设置默认值，或者如果它是`undefined`或则忽略它`foo`on `window`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T18:44:17.990

您可以将参数添加到`getHoliday`函数的末尾，如下所示：

```
function getHoliday(monthSelected, theday, foo) {
    //...
} 
```

任何只用两个参数调用的东西都将继续起作用，并且`foo`将是`undefined`. 因此，您可能需要检查并`holidayName`在这种情况下设置默认值，例如：

```
var holidayName = foo || "Some default"; 
```

# java - 禁用 JButton

> ID：15055126
> 
> 赞同：-6
> 
> 时间：2013-02-24T18:36:25.203
> 
> 标签：java, swing, jbutton

我正在编写一个 Java 程序，我想启用一个`JButton`在开始时禁用的 Java 程序（在完成该程序中的所有文本字段之后）。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:57:22.007

称呼

```
button.setEnabled(true); 
```

为了启用它，并且

```
button.setEnabled(false); 
```

为了禁用它。但首先[尝试理解](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)所有这些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T21:45:27.567

将相同的 DocumentListener 添加到所有文本字段。每次从任何文本字段的文档中添加/删除文本时都会生成一个事件。

然后在触发事件时检查所有文本字段以确保它们都包含一些文本。如果它们都包含文本，那么您可以启用该按钮。如果其中一个不包含文本，则禁用按钮。

# maven - Apache Karaf 2.2.10 的正确 Maven 存储库是什么？

> ID：15055129
> 
> 赞同：1
> 
> 时间：2013-02-24T18:37:07.397
> 
> 标签：maven, apache-karaf

我正在将我的构建从 升级`Karaf` `2.2.2`到`2.2.10`并且在找到一个工件时遇到问题：

```
Can't resolve bundle org.apache.karaf:org.apache.karaf.management:jar:2.2.10: 
Failure to find org.apache.karaf:org.apache.karaf.management:jar:2.2.10
in http://repo1.maven.org/maven2 was cached in the local repository,
resolution will not be reattempted until the update interval of central
has elapsed or updates are forced 
```

这是在tarball 的特性中声明`karaf-standard-features.xml`的：`Karaf` `2.2.10``karaf-framework`

```
<bundle>mvn:org.apache.karaf/org.apache.karaf.management/2.2.10</bundle> 
```

我注意到主 Maven 存储库中不存在此工件：

[http://mvnrepository.com/artifact/org.apache.karaf/org.apache.karaf.management](http://mvnrepository.com/artifact/org.apache.karaf/org.apache.karaf.management)

但我不知道我还能在哪里找到它？

请为我指出一个合适的 Maven 存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:50:37.700

似乎组 ID 和工件 ID 已更改（请参见[此处](http://mvnrepository.com/artifact/org.apache.karaf.management/org.apache.karaf.management.server/2.2.10)）：

```
<dependency>
    <groupId>org.apache.karaf.management</groupId>
    <artifactId>org.apache.karaf.management.server</artifactId>
    <version>2.2.10</version>
</dependency> 
```

# sql - 使用 SQL Server CTE 扁平化层次结构系列

> ID：15055141
> 
> 赞同：2
> 
> 时间：2013-02-24T18:38:08.107
> 
> 标签：sql, sql-server, database, tsql, hierarchy

寻找 SQL Server CTE 示例以创建层次结构，以便我可以输出所有系列，例如展平每个层次结构。例如，在家庭树中，如果根从父级开始，我需要每个家庭成员的层次结构列表以及成员详细信息 + 父级的行详细信息，例如

> ```
>  child1 row
>   child1 +Parent row
>   child1 + Grand parent Row
> 
>   child2 Row
>   child2 + parent row
>   child2 + grand parent's row
> 
>  and so on 
> ```

```
 CREATE TABLE Family(id int NULL,
Name varchar(20) null,  Parent_id int NULL, level int NULL  ) 

INSERT INTO Family VALUES
    (1, 'Grand Parent',NULL,    1),         
    (2, 'Parent'    ,   1,      2),
    (3, 'Child1'    ,   2,      3),
    (4, 'Child2'    ,   2,      3)     

    select * from Family;

id  Name          Parent_id   level
 1  Grand Parent  NULL         1
 2  Parent        1            2
 3  Child1        2            3
 4  Child2        2            3 
```

这就是我目前能做的。父行的详细信息在第 5 列和第 6 列中。

```
with cte as
(
    select ID,Parent_id,level,Name,id as  parent_id,level, 'a' as type
        from family 
        --where ID=3
    union all
    select  f.ID,f.Parent_id,f.level,f.Name,c.id as parent_id,c.level, 'r' as type
    from family f
    inner join cte c
    on f.parent_id=c.id
)
select * from cte order by id 
```

结果应该是这样。（注意第 5 栏和第 6 栏）

```
Child_ID  Parent_id   Child_level   Name    parent_id   level   
1          NULL        1          Grand Parent    1           1  
2          1           2          Parent          2           2  
2          1           2          Parent          1           1  
3          2           3          Child1          1           1  
3          2           3          Child1          2           2  
3          2           3          Child1          3           3   
4          2           3          Child2          4           3  
4          2           3          Child2          2           2   
4          2           3          Child2          1           1 
```

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T18:54:53.280

```
with cte as (
    select ID, Name, level, Parent_id
    from family

    union all

    select cte.ID, cte.Name, cte.level, family.Parent_id
    from cte
    inner join family on cte.Parent_id = family.ID
)
select cte.ID as Child_ID, f2.Parent_ID, cte.level as Child_level, cte.Name, isnull(cte.Parent_id, cte.ID) as parent_ID, isnull(f.level, cte.level) as level
from cte
left outer join family f on cte.Parent_id = f.ID
inner join family f2 on cte.id = f2.ID
order by 1, 5 
```

# asp.net - 添加访问规则后，Web 导航不起作用

> ID：15055142
> 
> 赞同：0
> 
> 时间：2013-02-24T18:38:07.820
> 
> 标签：asp.net

嘿，我在添加身份验证角色和访问规则后遇到了问题。我将文件夹添加到我的网站，以便我可以对位于这些文件夹中的网页设置限制。我将所有适当的页面移动到相应的文件夹中（管理页面进入管理文件夹，员工页面进入员工文件夹）。完成后，我在 ASP.NET 配置中设置了所有访问规则和角色。一切似乎都运行良好，但现在我的站点地图无法正常工作，并且在尝试浏览我的网站时出现未找到文件的错误。这可能是一个简单的修复，但我是 ASP.NET 的新手，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:41:02.403

您所要做的就是进入您的 web.sitemap 文件并添加您放置相应文件的文件夹名称。

前任。您将管理页面放在管理文件夹中，因此在站点地图文件中应该如下所示：~\Admin\AdminPage.aspx

希望这可以帮助

# python - 随机抽样 Github 存储库

> ID：15055145
> 
> 赞同：3
> 
> 时间：2013-02-24T18:38:23.667
> 
> 标签：python, github, random

我正在寻找一种从 Github 随机抽样 repos 的解决方案。最终的结果是对样本进行一些数据分析。

我想做的是按存储库的 id 进行采样：对 0 到 270 万之间的 int 进行采样并找到相关的 repo。获得用户名/repo-name 后，我将使用 api 获取详细信息。

问题是我不知道如何通过 repo id 进行搜索。有什么建议么？我对网页抓取或 Python 解决方案持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:27:50.047

您可以使用 python 访问 Github V3 Api（如“[最适合 Github API v3 的 python 库](https://stackoverflow.com/questions/10625190/most-suitable-python-library-for-github-api-v3)”）。

并且您可以从某个 id ( ，作为参数，您看到的最后一个 Repository 的整数 ID[访问 GitHub repos](http://developer.github.com/v3/repos/#list-all-repositories)`GET /repositories`：这样可以提供一种迂回的方式来访问带有其 id 的 repos。

# android - 打开按钮上的链接

> ID：15055147
> 
> 赞同：0
> 
> 时间：2013-02-24T18:38:25.530
> 
> 标签：android, cordova

我还是新手，完全是菜鸟，所以请继续。在android中单击按钮时如何打开链接？

```
one.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
        }
    }); 
```

编辑：我正在使用 phonegap 插件。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:39:33.607

在 onClick 中写下这段代码：

```
Uri uri = Uri.parse("http://www.google.com");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

还要将以下行添加到您的 manifest.xml 中，因为您需要拥有 Internet 权限才能实际使用 Internet：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

阅读有关[Android 权限](http://developer.android.com/guide/topics/security/permissions.html)的更多信息。

要了解有关 Uri 的更多信息，请参阅[此](http://developer.android.com/reference/java/net/URI.html)链接。另请阅读[Intents](http://developer.android.com/guide/components/intents-filters.html)如何在 Android 中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:39:52.253

由于您使用的是 PhoneGap，请取消注释以下任一方法：

```
one.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View arg0) {
        //super.loadUrl("www.google.com");
        // or
        //loadUril("www.google.com");
    }
}); 
```

# php - PHP 将 \ 添加到 JSON

> ID：15055153
> 
> 赞同：-3
> 
> 时间：2013-02-24T18:38:56.817
> 
> 标签：php, get, httprequest, json

我的共享虚拟主机将 \ 添加到 JSON。我使用 ExtJS，它通常会发送这些数据

```
[{"property":"id","direction":"ASC"}] 
```

Howere PHP 将其接收或更改为`[{\"property\":\"id\",\"direction\":\"ASC\"}]`

因此我不能使用`json_decode($_REQUEST['sort'])`

我认为这是因为他们想防止 SQL 注入，但现在他们破坏了我的应用程序。我必须做什么？

编辑：

```
$sort = json_decode($_GET['sort']);
print_r($_GET); // [sort] => [{\"property\":\"id\",\"direction\":\"ASC\"}]
print_r($sort); // 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:42:12.263

请检查您的虚拟主机是否启用了[魔术引号](http://www.php.net/manual/de/security.magicquotes.what.php)。

[这里](http://www.php.net/manual/de/security.magicquotes.whynot.php)有人提出这个来获得不变的值：

```
if (get_magic_quotes_gpc()) {

    function strip_array($var) {

        return ( is_array($var)
               ? array_map("strip_array", $var)
               : stripslashes($var)
               );
    }

    $_POST = strip_array($_POST);
    $_SESSION = strip_array($_SESSION);
    $_GET = strip_array($_GET);

} 
```

# c++ - 如何在 C++ 中使用传入的值作为数组索引？

> ID：15055154
> 
> 赞同：1
> 
> 时间：2013-02-24T18:38:57.897
> 
> 标签：c++, arrays, parameter-passing

所以我试图通过创建一个基本的国际象棋游戏来学习 C++。用户可以创建非标准尺寸的板（即不一定是 8x8）。

不过，一旦我从用户那里收到了电路板的尺寸，我应该设置为以固定尺寸创建它。所以我想在这里使用一个数组。

编译器不喜欢我的声明：

```
 tile arrayOfTiles[numX][numY]; 
```

它似乎告诉我它想要一个常量作为数组索引。这是我什至可以用数组做的事情吗？

```
class gameBoard{
    public:
    gameBoard(int x=8, int y=8)
    :   numX(x),
        numY(y)
{
    //construct board
    tile arrayOfTiles[numX][numY];

    /*
    for (int i=0; i<numX; i++) {
        for (int j=0; j<numY; j++){
            arrayOfTiles[i][j]=tile();
            }
        }
    */
}

protected:
    int numX;  //total number of rows, typically 8 (A-H) on a chessboard
    int numY;  //total number of columns, typically 8 (1-8) on a chessboard

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T18:43:26.083

使用`std::vector`：

```
std::vector<std::vector<tile>> arrayOfTiles(numX, std::vector<tile>(numY)); 
```

用`typedef`它来简化它：

```
typedef std::vector<tile>  vectiles;

std::vector<vectiles> arrayOfTiles(numX, vectiles(numY)); 
```

`vectiles`是 tile 的向量，并且`arrayOfTiles`是 的向量`vectiles`。您可以将其视为二维数组。

```
for(size_t i = 0 ; i < numX; ++i)
{
     for(size_t j = 0 ; j < numY; ++j)
         //use arrayOfTiles[i][j]
} 
```

代替`numX`and `numY`，您可以分别使用`arrayOfTiles.size()`and `arrayOfTiles[i].size()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:47:12.887

您可以在这里做的最好的事情是让`gameBoard`内部`arrayOfTiles`作为其数据成员之一，而不是 C 样式的数组，您应该`std::vector`改用：

```
protected:
    std::vector< std::vector<tile> > arrayOfTiles; 
```

然后你可以在你的初始化列表中初始化它：

```
public:
    gameBoard(int x = 8, int y = 8)
    : numX(x), numY(y), arrayOfTiles(x, std::vector<tile>(y));
    {
        // ...
    } 
```

# ios - iPod touch 2nd Gen 仍然是简单 iOS 开发的可行选择吗？

> ID：15055155
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:39:05.537
> 
> 标签：ios, ipod-touch

我的朋友正试图出售他的一些旧技术，而我正在考虑购买他的 iPod touch 2G 用于开发目的，它是否仍然以任何方式支持（即我会找到任何可以构建它的开发工具包）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:47:33.493

仅当您希望下载旧版本的 Xcode 并且您只想学习 2 年前的 iOS 应用程序开发时，使用第 2 代 iPod touch 才有用。

如果您想学习现代 iOS 开发，那么您需要一台运行 iOS 6.0 或更高版本的 iOS 设备。这至少需要第 4 代 iPod touch、iPad 2 或 iPhone 3GS。

# joomla - Joomla 模板文件中缺少 html 标记

> ID：15055157
> 
> 赞同：0
> 
> 时间：2013-02-24T18:39:16.337
> 
> 标签：joomla, joomla2.5

我正在尝试在标签之前向 Joomla 网站添加一些代码。我以前从未使用过Joomla，但从我读到的应该是这样的 -

*   登录：[http ://www.yoursite.com/administrator/](http://www.yoursite.com/administrator/)
*   在顶部菜单中选择：“扩展”>“模板管理器”
*   现在选择标记为默认的模板，然后单击“编辑”
*   在模板编辑页面点击“编辑 HTML”

或模板文件夹中的 index.php 文件，但是当我同时执行这两个选项时，唯一的事情是：

```
<?php
if (class_exists('T3Template')) {
    $tmpl = T3Template::getInstance($this);
    $tmpl->render();
    return;
} else {
    //Need to install or enable JAT3 Plugin
    echo JText::_('Missing jat3 framework plugin');
} 
```

有什么想法可以找到带有标签的普通 HTML 标记吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:50:00.670

您的模板的标记通常在 /templates/template_name/index.php 中，但您的 joomlart 模板使用框架（这不是标准的 joomla，但在大型模板提供者中很常见）。您应该查看 joomlart 文档，以确保您将遵循他们的最佳实践。快速浏览他们的论坛，尝试查看 \plugins\system\jat3\jat3\base-themes\default\page\default.php 文件（参见此处：[http ://www.joomlart.com/forums/showthread .php?55256-Add-code-before-lt-body-gt-amp-lt-head-gt&highlight=template+edit+jat3](http://www.joomlart.com/forums/showthread.php?55256-Add-code-before-lt-body-gt-amp-lt-head-gt&highlight=template+edit+jat3) )

在标准的 Joomla 模板中，您会在上述 index.php 中找到代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T18:45:09.657

您可以在以下位置找到模板文件：*Your_Base_URL/templates/mynewtemplate/*

# python - Python：如何在记事本中打开 json 和 html 文件？

> ID：15055159
> 
> 赞同：0
> 
> 时间：2013-02-24T18:39:29.217
> 
> 标签：python

我试图在记事本中打开 json 和 html 文件。我有以下代码：

```
def openFile():
    fileName = listbox_1.get(ACTIVE)
    if fileName.endswith("json") or fileName.endswith("htm"):
        os.system("notepad.exe" + fileName)
    elif fileName.endswith("jpeg"):
        os.startfile(fileName)
    else:
        messagebox.showerror(title="Error", message="File is not relevant, please choose one with a directory") 
```

问题是目前发生的所有事情是命令提示符窗口闪烁大约一秒钟然后消失。我需要在记事本中显示文件的内容。

在 Windows 上使用 python 3.3

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:47:00.327

您错过了`system`通话中的空间。建议修复：

```
os.system('notepad.exe {}'.format(fileName)) 
```

# javascript - jquery在密码和文本字段之间切换IE错误

> ID：15055162
> 
> 赞同：0
> 
> 时间：2013-02-24T18:39:41.160
> 
> 标签：javascript, jquery, css, input, toggle

我正在使用下面链接中的这个 jquery 在密码和文本字段之间进行登录切换

[http://www.electrictoolbox.com/jquery-toggle-between-password-text-field/](http://www.electrictoolbox.com/jquery-toggle-between-password-text-field/)

我在 IE 上进行测试，基本上当您切换密码字段（用户名很好）时，输入字段在焦点上变小，这真的让我很恼火，花了最后一个小时试图弄清楚，但不能这么想如果你能帮助我，请寻求帮助

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:46:07.960

因此，在查看该示例时，它似乎在显示和隐藏以下密码字段之间切换：

```
<input id="password-clear" type="text" value="Password" autocomplete="off" />
<input id="password-password" type="password" name="password" value="" autocomplete="off" /> 
```

我认为 2 个输入的高度和宽度（密码清除和密码密码）在您的代码中是不同的，因此当您显示一个时，它的大小不同。确保应用于两个输入的 CSS 相同。

***更新***：似乎 IE 正在从隐藏的输入中呈现一些空间（向下推其他字段）。我通过使两个密码字段绝对定位并添加一些分隔 div 来修复它。 [http://jsfiddle.net/LqXnx/5/](http://jsfiddle.net/LqXnx/5/)

# youtube - 关闭inappbrowser后如何停止youtube视频声音

> ID：15055167
> 
> 赞同：5
> 
> 时间：2013-02-24T18:40:03.010
> 
> 标签：youtube, cordova

关闭由inappbrowser打开的webview后如何停止youtube视频声音（Android Phonegap 2.4.0插件）

我用了两个星期来解决这个问题，累坏了............

当我单击“完成”按钮关闭 webview（youtube 页面）时，视频仍在后台播放。

即使关闭应用程序后，也无法停止视频声音。为了停止视频，我不得不关掉手机。

这是我的代码

```
<script type="text/javascript" charset="utf-8">

 function OpenWin(juso) {
        window.open(juso, '_blank', 'location=yes');
         }

</script>  

<body>
...................
<a href="#" onclick="OpenWin('http://m.youtube.com')"> 
...................
</body> 
```

我的代码有什么问题吗？我可以得到一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-15T04:53:19.370

我正在使用 Sencha Touch 并使用以下技巧来停止 Youtube Video 声音。你可以作为参考。

```
var ref = window.open(url,'_blank',options);
ref.addEventListener('exit',function(){
    Ext.defer(function(){
        ref.removeEventListener('exit',function(){
            console.log('Closed');
        });
        var ref2 = window.open('about:blank','_blank','hidden=yes');
        Ext.defer(function(){
            ref2.close();
        },350);
    },350);
}); 
```

# jakarta-ee - Glassfish/JBoss 同一应用程序的不同数据库，取决于谁登录？

> ID：15055169
> 
> 赞同：0
> 
> 时间：2013-02-24T18:40:09.550
> 
> 标签：jakarta-ee, jboss, glassfish, multi-tenant, jaas

我正在开发一个 Java EE 6 应用程序，它将作为 SaaS 运行，但每个客户端都有一个完全隔离的数据库。此外，将使用服务器（JBoss 或 Glassfish）JAAS 来管理安全性。我需要的是根据子域（client1.domain.com，client2.domain.com）获取正确的数据库。

最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:35:52.590

在这种情况下，需要应用程序隔离来解决 JPA 缓存和 EJB 问题。有很多方法可以让一个应用程序与多个数据库一起使用，但是否值得在应用程序级别处理隔离？您可以为处理一个客户端的每个应用程序使用不同的 AS 域或不同的上下文路径。

# html - 当我尝试通过 `http://localhost/xampp/htdocs/index.html` 打开 HTML 文件时，它说无法连接到 localhost

> ID：15055171
> 
> 赞同：4
> 
> 时间：2013-02-24T18:40:11.897
> 
> 标签：html, xampp

我已经安装了 XAMPP，有一个 `htdocs`文件夹和里面 的`index.html`文件，当我尝试在浏览器中打开它时，`http://localhost/xampp/htdocs/index.html`它说无法连接到 localhost。

怎么了 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-07T09:13:29.990

代替

```
 http://localhost/xampp/htdocs/index.html 
```

试试看

```
http://localhost/index.html 
```

或者如果 index.html 保存在 htdocs 的文件夹中，那么

```
http://localhost/<folder-name>/index.html 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T18:50:43.990

`htdocs`是您的默认文档根目录，因此您必须使用`localhost/index.html`才能查看该 html 文件。换句话说，`localhost`被映射到`xampp/htdocs`，所以`index.html`在`localhost`自身。您可以通过修改`httpd.conf`并重新启动服务器来更改文档根目录的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T18:52:51.613

使用以下命令启动 XAMPP 服务器：

*   `{XAMPP}\xampp-control.exe`
*   `{XAMPP}\apache_start.bat`

然后您必须使用 URI `http://localhost/index.html`，因为`htdocs`它是 Apache 服务器的文档根目录。

如果您被重定向到`http://localhost/xampp/*`，则问题`index.php`位于`htdocs`文件夹中，因为*index.php*文件的优先级高于*index.html*文件。您可以暂时重命名*index.php*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T18:49:45.957

您需要正常启动 Apache 服务器，您应该在任务栏的信息部分有一个 xampp 图标，使用此工具您可以启动 apache 服务器以及 mysql 数据库（如果需要）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-03T13:40:55.353

全部由用户创建的文件`C:\xampp\htdocs`默认保存在目录中，因此无需在浏览器窗口中输入默认路径，只需输入， `http://localhost/yourfilename.php`否则`http://localhost/yourfoldername/yourfilename.php`将显示新页面的内容。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-19T19:44:46.997

您应该简单地在 htdocs 中创建自己的文件夹并将 .html 和 .php 文件保存在其中。一个例子是直接在 htdocs 中创建一个名为 myNewFolder 的文件夹。不要把它放在 index.html 中。然后像这样保存你的所有.html和.php文件->“localhost/myNewFolder/myFilename.html”或“localhost/myNewFolder/myFilename.php”我希望这会有所帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-10-17T09:12:03.920

我只是将 index.html 文件放在 /htdocs 中并输入[http://127.0.0.1/index.html](http://127.0.0.1/index.html) - 然后就是 html。

添加一个文件夹“命名论坛”并输入 127.0.0.1/forum/???.???

# jquery - DOM加载后的jQuery访问元素

> ID：15055172
> 
> 赞同：0
> 
> 时间：2013-02-24T18:40:16.613
> 
> 标签：jquery, dom

我已经通过 innerHTML 加载了一些内容。

```
 $('#load-text-button').click(function () {
         document.getElementById("text-area").innerHTML="Some text <span class="footnote">The Footnote</span> Some other text.
    }); 
```

现在我想在单击“粗体脚注按钮”时访问新创建的跨度（带有“脚注”类）。脚注按钮是在文档加载时加载的，但文本是在加载 DOM 之后加载的。

```
 $('#bold-footnote-button').click(function () {
        $(".footnote").addClass('bold');
    }); 
```

找不到“.footnote”元素。我读过的所有内容都指向使用 .live 方法，但文档说它现在已被弃用。如何访问新的“.footnote”元素而无需直接单击它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:48:09.740

click 函数应该可以正常工作，因为您不是使用事件处理程序来定位新插入的元素，而是在事件处理程序内部。问题可能是没有插入这样的元素，因为您在引用时遇到了一些问题，请这样做：

```
$('#load-text-button').click(function () {
    $("#text-area").html('Some text <span class="footnote">The Footnote</span> Some other text.');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:50:44.783

也许我遗漏了一些东西，但是如果您在第一次单击（）时更改您的 html，当您要求 $(".footnote") 时，您应该会找到新创建的跨度。有时 DOM 修改和 DOM 查询之间存在延迟问题，但只有当您一个接一个地编写语句时才会出现这些问题。在您的情况下，当用户转到#bold-footnote-button 时，浏览器一直在自我更新。也许问题是您在第一个示例中对字符串和类属性使用了双引号。

检查您的浏览器开发工具是否正确获取类属性

# php - 为什么 MySQL 从 1 计数而不是 0？

> ID：15055175
> 
> 赞同：5
> 
> 时间：2013-02-24T18:40:33.063
> 
> 标签：php, python, mysql, ruby

数组的第一个元素（在大多数编程语言中）的 id（索引）为 0。MySQL 表的第一个元素（行）的（自动递增）id 为 1。后者似乎是个例外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:20:35.203

更好的问题是“为什么数组是零索引的？” 原因与指针算法有关。数组的索引是相对于指针地址的偏移量。在 C++ 中，给定数组`char x[5]`，表达式`x[1]`和`*(x + 1)`是等价的，给定`sizeof(char) == 1`.

所以从 1 开始的自动递增字段是有意义的。数组和这些字段之间没有真正的关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:46:05.740

您可以将自动增量列的开始设置为任意数字，如下所示：

```
ALTER TABLE tbl AUTO_INCREMENT = 1;
ALTER TABLE tbl AUTO_INCREMENT = 10;
ALTER TABLE tbl AUTO_INCREMENT = 100; 
```

默认值为 1。

也可以看看：

[http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:58:46.143

我想的主要原因是数据库中的一行不是数组，并且从数组索引的意义上来说，自动增量值不是索引。主键 id 可以是任何值，并且在很大程度上它只是必不可少的，它是唯一的并且不保证是其他任何值（例如，您可以删除一行并且它不会重新编号）。

这有点像比较苹果和橘子！

数组从 0 开始，因为这是第一个数字。Autoinc 字段也可以从您想要的任何数字开始，在这种情况下，我们都希望它是 1。

# jquery - jquery $().load 不工作

> ID：15055180
> 
> 赞同：0
> 
> 时间：2013-02-24T18:41:08.357
> 
> 标签：jquery, timer

好的，所以我一直在寻找几个小时的答案，但我无法弄清楚为什么这不起作用：

```
function updateClock(){
setInterval(function() {
        $(".time").load("/real/js/time.php", function(data){
            $(".time").empty().append(data);
        });
}, 1000); 
```

}

控制台看到它正在尝试加载，但页面的内容实际上并没有改变。这是我拥有的 PHP 时钟，它必须是 PHP 我不能使用 JS 时钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:44:35.560

`load()`自动插入内容，因此当您在回调中执行相同操作时，您将覆盖内容：

```
function updateClock(){
    setInterval(function() {
        $(".time").empty().load("/real/js/time.php");
    }, 1000);
} 
```

编辑：听起来您有缓存问题，请尝试：

```
function updateClock(){
    setInterval(function() {
        $.ajax({
            type : 'GET',
            url  : '/real/js/time.php',
            cache: false
        }).done(function( data ) {
            $(".time").html(data);
        });
    }, 1000);
} 
```

# actionscript-3 - 将声音输出到耳机和扬声器

> ID：15055183
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:41:18.687
> 
> 标签：actionscript-3, audio, output

我想知道是否可以同时向耳机和内置扬声器输出声音。Iv 搜索但我能找到的只是对使用 android 的可能尝试的引用。但我的应用程序将基于 Web，使用 flash 和 AS3。谁能确认这是否可能？

本质上我试图制作一套 DJ 卡座，因此需要能够分别但同时收听 2 种声音（以进行节拍）

非常感谢

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:16:49.140

不，不是没有非常具体的设置。Flash 只会从应用程序输出一个全局混合的音频流。您无法将声音分开以路由到单独的输出。

* * *

但是，如果您不是在寻找一般设置，而是在寻找一次性的东西，您可以控制它应该运行的机器 - 可能有一种方法。如果您正在编写 Adob​​e AIR 应用程序，则可以编写*两个单独*的应用程序：

1.  **应用 A**控制 UI 和所有声音
2.  **应用 B**只是从第一个应用接收声音流并播放它

**然后， App A**将“耳机音轨”路由到**App B**并正常播放“主音轨”。然后，您可以（也许）使用诸如[Soundflower](http://cycling74.com/products/soundflower/)之类的应用程序将声音从**App A**和**App B**路由到单独的输出（其中一个可能是耳机，另一个可能是某些扬声器。）

这一切都非常依赖于您的声卡。您很可能需要一个外部声卡来处理两个单独的音频流。

# php - PHP RecursiveIteratorIterator - 反向计算结果

> ID：15055184
> 
> 赞同：3
> 
> 时间：2013-02-24T18:41:25.477
> 
> 标签：php, object, count, reverse

我有以下内容：

```
<?php

$path = '/home/user/test';

$dir = new RecursiveDirectoryIterator( $path  );
$iterator = new RecursiveIteratorIterator( $dir );
$dir_iterator = new RegexIterator( $iterator, '/^.+\.php/i', RecursiveRegexIterator::GET_MATCH );

?> 
```

到目前为止一切顺利，但我需要**反转结果**，以存档与 array_reverse() 相同的效果

我试过这样，没有成功：

```
<?php

$dir_iterator = array_reverse( (array)$dir_iterator );

?> 
```

另外，我怎样才能得到**返回的结果数**？我试过这个，但不工作：

```
<?php

$total_results = count( $dir_iterator );

?> 
```

有人可以帮帮我吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T18:51:27.640

你需要的是`iterator_to_array`你可以尝试

```
$dir_iterator =  array_reverse(iterator_to_array($dir_iterator )); 
```

要计算迭代器，您需要的是：

```
$total_results = iterator_count( $dir_iterator ); 
```

Better Sill 实现你的

```
$dir_iterator = new ReverseIterator($dir_iterator);

foreach ( $dir_iterator as $file ) {
    // do your thing
}

// To get total
echo count($dir_iterator); 
```

使用的类

```
class ReverseIterator extends ArrayIterator implements Countable {
    private $t;

    public function __construct(Iterator $it) {
        $r = array_reverse(iterator_to_array($it));
        $this->t = count($r);
        parent::__construct($r);
        unset($r);
    }

    function count() {
        return $this->t;
    }
} 
```

# javascript - document.getElementsByClassName 与类完全匹配

> ID：15055185
> 
> 赞同：3
> 
> 时间：2013-02-24T18:41:31.107
> 
> 标签：javascript

有两个相似的类 - 'item' 和 'item one'

当我使用`document.getElementsByClassName('item')`它时，它会返回与上述两个类匹配的所有元素。

我如何才能获得只有“项目”类的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T18:43:53.283

```
document.querySelectorAll('.item:not(.one)'); 
```

（见[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)）

另一种方法是遍历`document.getElementsByClassName('item')`返回的内容，并检查`one`该类是否存在（或不存在）：

```
if(element.classList.contains('one')){
  ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T18:44:01.843

类名`item one`意味着元素有 class`item`和 class `one`。

因此，当您这样做时`document.getElementsByClassName('item')`，它也会返回该元素。

你应该做这样的事情来选择只有类的元素`item`：

```
e = document.getElementsByClassName('item');
for(var i = 0; i < e.length; i++) {
    // Only if there is only single class
    if(e[i].className == 'item') {
        // Do something with the element e[i]
        alert(e[i].className);
    }
} 
```

这将检查元素是否只有 class `item`。

[**现场演示**](http://jsfiddle.net/2Yzmr/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T18:53:13.017

您将要为完全匹配创建自己的函数，因为类中的空格意味着它有多个类。就像是：

```
function GetElementsByExactClassName(someclass) {
  var i, length, elementlist, data = [];

  // Get the list from the browser
  elementlist = document.getElementsByClassName(someclass);
  if (!elementlist || !(length = elementlist.length))
    return [];

  // Limit by elements with that specific class name only
  for (i = 0; i < length; i++) {
    if (elementlist[i].className == someclass)
      data.push(elementlist[i]);
  }

  // Return the result
  return data;
} // GetElementsByExactClassName 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-09T15:08:13.677

如果您有 jQuery，则可以使用[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)语法来完成，如下所示：`$('[class="item"]')`.

如果您坚持使用`document.getElementsByClassName`，请参阅其他答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T18:54:17.133

您可以使用[`Array.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)将匹配集过滤为仅具有 class 的集`test`：

```
var elems = Array.filter( document.getElementsByClassName('test'), function(el){
    return !!el.className.match(/\s*test\s*/);
}); 
```

或者只有那些有`test`但没有`one`：

```
var elems = Array.filter( document.getElementsByClassName('test'), function(el){
    return el.className.indexOf('one') < 0;
}); 
```

（`Array.filter`可能会因您的浏览器而有所不同，并且在旧版浏览器中不可用。）为了获得最佳浏览器兼容性，[jQuery](http://api.jquery.com/)非常适合：`$('.test:not(.one)')`

# excel - 将 Word.Document 传递给 vba 中的 sub

> ID：15055186
> 
> 赞同：1
> 
> 时间：2013-02-24T18:41:45.313
> 
> 标签：excel, vba

我正在尝试将对 Word.Documents 的引用传递给 VBA 中的子程序（以便子程序可以运行多次，始终使用相同的“目标”word 文档和不同的“源”文档）。

```
Public Sub StructuredFileParse(wrdDocSource As Word.Document, _
                            Optional wrdDocTarget As Word.Document = Nothing)

Dim wrdApp As Object

Set wrdApp = wrdDocSource.Application

If wrdDocTarget Is Nothing Then
    Set wrdDocTarget = wrdApp.Documents.Add
End If

wrdDocTarget.Activate
With wrdApp.Selection.PageSetup
    .LeftMargin = CentimetersToPoints(2#) 'Code fails here second time it runs
    .RightMargin = CentimetersToPoints(2#)
End With

'Do stuff

Set wrdApp = Nothing

End Sub

Public Sub TestSub()

Const ERR_APP_NOTFOUND As Long = 429

Dim wrdApp As Word.Application

Dim wrdDocSource As Word.Document
Dim wrdDocTarget As Word.Document

On Error Resume Next
' Attempt to reference running instance of Word.
Set wrdApp = GetObject(, "Word.Application")
' If Word isn't running, create a new instance.
If Err = ERR_APP_NOTFOUND Then
   Set wrdApp = New Word.Application
End If
On Error GoTo 0

wrdApp.Visible = True

'Create a new word target file
Set wrdDocTarget = wrdApp.Documents.Add

'Set the first word source file
Set wrdDocSource = wrdApp.Documents.Open(ThisWorkbook.Path & "\" & _
                    "AdvisorChargeQuoteSource.dot")

Call StructuredFileParse(wrdDocSource:=wrdDocSource, wrdDocTarget:=wrdDocTarget)

wrdDocSource.Close

Set wrdDocSource = Nothing
Set wrdDocTarget = Nothing
Set wrdApp = Nothing
End Sub 
```

我第一次调用 sub 时，一切都按预期工作。然而，我第二次在上面的 PageSetup 部分的末尾收到错误（没有错误文本，只有一个 Ok/Help 窗口和执行停止）。

任何人都可以突出错误吗？

谢谢

史蒂夫

编辑：在[http://support.microsoft.com/kb/189618找到的解决方案](http://support.microsoft.com/kb/189618)

改变了

```
With wrdApp.Selection.PageSetup
    .LeftMargin = CentimetersToPoints(2#) 'Code fails here second time it runs
    .RightMargin = CentimetersToPoints(2#)
End With 
```

至

```
With wrdApp.Selection.PageSetup
    .LeftMargin = wrdApp.CentimetersToPoints(2#)
    .RightMargin = wrdApp.CentimetersToPoints(2#)
End With 
```

到目前为止，它似乎每次运行都没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:57:27.083

[在http://support.microsoft.com/kb/189618](http://support.microsoft.com/kb/189618)找到的解决方案

改变了

```
With wrdApp.Selection.PageSetup
    .LeftMargin = CentimetersToPoints(2#) 'Code fails here second time it runs
    .RightMargin = CentimetersToPoints(2#)
End With 
```

至

```
With wrdApp.Selection.PageSetup
    .LeftMargin = wrdApp.CentimetersToPoints(2#)
    .RightMargin = wrdApp.CentimetersToPoints(2#)
End With 
```

到目前为止，它似乎每次运行都没有错误。

# python - 在 linux 上的 sqlite 中存储空的 python 元组与 windows 不同

> ID：15055189
> 
> 赞同：2
> 
> 时间：2013-02-24T18:42:06.180
> 
> 标签：python, linux, windows-7, sqlite

我有一个在 sqlite3 中存储一些数据的 python 程序，我想在不同的操作系统中使用它。

在 Windows 7 中，该程序运行良好，但在 Ubuntu 12.04 中却不行。

问题是：当我在我的 sqlite 数据库中存储一个空元组（作为来自 的字符串 `" ".join( ... )`）然后在 windows 中读回它时，我得到一个空元组`()`，而在 Ubuntu 中我得到`None`.

我的测试代码是：

```
import sqlite3
import os

def adapt_tuple(tpl):
    return " ".join(str(n) for n in tpl)

def get_tuple(s):
    return tuple([int(x) for x in s.split()])

emptytuple=()
goodtuple=(1,2)

sqlite3.register_adapter(tuple,adapt_tuple)
sqlite3.register_converter("tuple_of_ints",get_tuple)

myconn=sqlite3.connect('test.db',detect_types=sqlite3.PARSE_DECLTYPES)
myconn.execute("""CREATE TABLE test(number int, tuple tuple_of_ints);""")

goodentry=(1,goodtuple)
emptyentry=(2,emptytuple)

myconn.execute("""INSERT INTO test VALUES (?,?);""", goodentry)
myconn.execute("""INSERT INTO test VALUES (?,?);""", emptyentry)

for row in myconn.execute("""SELECT * FROM test;"""):
    print row

myconn.close()
os.remove('test.db') 
```

这给了我一个输出：

```
(1, (1, 2))
(2, ()) 
```

在 Windows 和：

```
(1, (1, 2))
(2, None) 
```

在ubuntu中。

我已经检查过了

```
get_tuple(adapt_tuple(emptytuple)) 
```

在两个系统中给出相同的输出`()`，所以它必须与通过 sqlite3 有关。

python 中的输出`sys.version_info`在两个系统中是相同的，`sqlite3.version`所以我很确定这与操作系统有关。

总而言之，我的问题是：为什么会这样？以及如何让 Ubuntu 版本在最后返回一个空元组？

感谢您的回复。苹果。

**笔记**

我最初应该提到，如果我打印我的`adapt_tuple`输出，我会`" "`在两个操作系统上得到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:13:29.690

I can not explain the discrepancy between Windows and Ubuntu, though here is a workaround for Ubuntu:

```
def adapt_tuple(tpl):
    return " ".join(str(n) for n in tpl) or ' ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:13:58.173

~~It looks like that one of your `sqlite` versions is treating empty string in the return of an adapter as a NULL, and maybe you have different `sqlite` versions that could explain the different behavior.~~

~~If that is the case, then you need to modify the adapter in order to not return empty strings. Then it is also needed to adjust the converter to handle the new format. Here is an example for that:~~

```
def adapt_tuple(tpl):
    return repr(tpl)

def get_tuple(s):
    if len(s) > 2:
        return tuple(int(x) for x in s[1:-1].split(','))
    return () 
```

The actual problem is related to `register_converter`, which relies on `sqlite3_column_blob`. The later returns NULL for a zero-length BLOB (see the [sqlite's documentation](http://www.sqlite.org/c3ref/column_blob.html)). Then in `pysqlite`'s code there is a check in the following form:

```
if (!sqlite3_column_blob(...)) converted_col = Py_None; 
```

As a consequence, your converter is never called for empty strings and None is returned.

The problem is that `pysqlite` depends on the behavior of `sqlite3_column_blob`, which might change between `sqlite` versions. In fact, that is the case. Starting on sqlite 3.7.3, `sqlite3_column_blob` was modified to comply with the documentation. Before that, it wouldn't return NULL on empty blobs. So, to be consistent, ensure that your adapter never returns an empty string.

# php - 为什么 Windows 需要 `utf8_decode` 文件名才能使 `file_get_contents` 工作？

> ID：15055192
> 
> 赞同：7
> 
> 时间：2013-02-24T18:42:12.500
> 
> 标签：php, linux, windows, character-encoding, filesystems

如果`$filename`包含变音符号 (ä,ö,ü)`file_get_contents($filename)`在我的 Windows 操作系统上不起作用。通过反复试验，我发现我需要做`file_get_contents(utf8_decode($filename))`才能让它工作。

但是，当我将它实时推送到我的服务器时（猜想它是某种 Linux），它又返回了一个错误，所以我删除了`utf8_decode`它，突然它完美地工作了。

作为一种解决方法（所以我不需要在每次更改代码时手动更改这段代码）我已经尝试过

```
(mb_detect_encoding($filename, 'UTF-8', true)) ? utf8_decode$filename) : $filename; 
```

因为这已经反过来解决了同样的问题（与 有同样的问题`utf8_encode`），但`$filename`结果证明在每个（服务器）环境中都是 UTF8 编码的，所以这不起作用，因为它总是正确的。

任何想法如何让它在两个系统上工作？（请不要“只迁移到 Linux 进行 PHP 开发”——我有 Linux，但出于多种原因我使用 Windows 的 ATM）

* * *

编辑：问题也出现了，`fopen`并且接受的解决方案也有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:14:50.010

最好的方法是检测您是否使用 Windows 服务器。从中您可以应用正确的命令

```
if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN') {
    echo 'This is a server using Windows!';
} else {
    echo 'This is a server not using Windows!';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T19:48:27.650

问题是对于不支持文件名或目录名的 UTF-8 但 Linux 在 php 6 中支持 UTF-8 的窗口文件系统，这个问题解决了，为了在当前版本的 php 中解决这个问题，我们可以做一些工作，例如：

1) window 支持 UTF-16 和 linux 对这种 Unicode 没有任何问题 我们可以用这种 Unicode 保存所有文件名和目录名

2)编码 UTF-8 的**urlencode** ，这是解决此问题的另一种方法，我建议使用此方法。

我写了这个脚本来解决这个问题测试它。

```
 function GetExt($sFileName)//ffilter
 {
     $sExt="";
     $sTmp=$sFileName;
     while($sTmp!="")
     {
        $sTmp=strstr($sTmp,".");
        if($sTmp!="")
        {
            $sTmp=substr($sTmp,1);
            $sExt=$sTmp;
        }
     }
     return ($sExt);
 }
  function LocatePath($Path='/',$Mode="rb",$Root="",$Open=true,$IsFile=false){//make real Path and create new Directory
     switch(strtolower($Mode)){
          case 'r':
            $Read=true;
            $Write=false;
            $Create=false;
          break;
          case 'rb'://Open for reading only; place the file pointer at the beginning of the file. 
            $Read=true;
            $Write=false;
            $Create=false;
          break;
          case 'r+'://Open for reading and writing; place the file pointer at the beginning of the file.
            $Read=true;
            $Write=true;
            $Create=false;
          break;
          case 'x'://Create and open for writing only; place the file pointer at the beginning of the file. If the file already exists, the open() call will fail by returning FALSE
            $Read=false;
            $Write=true;
            $Create=false;
          break;
          case 'wb':
            $Read=false;
            $Write=true;
            $Create=true;
          break;
          case 'ab':
            $Read=false;
            $Write=true;
            $Create=true;
          break;
          case 'w'://Open for writing only; place the file pointer at the beginning of the file and truncate the file to zero length. If the file does not exist, attempt to create it. 
            $Read=false;
            $Write=true;
            $Create=true;
          break;
          case 'w+'://Open for reading and writing; place the file pointer at the beginning of the file and truncate the file to zero length. If the file does not exist, attempt to create it. 
            $Read=true;
            $Write=true;
            $Create=true;
          break;
          case 'a'://Open for writing only; place the file pointer at the end of the file. If the file does not exist, attempt to create it. 
            $Read=false;
            $Write=true;
            $Create=true;
          break;
          case 'a+'://Open for reading and writing; place the file pointer at the end of the file. If the file does not exist, attempt to create it. 
            $Read=true;
            $Write=true;
            $Create=true;
          break;
          case 'x+'://Create and open for reading and writing; otherwise it has the same behavior as 'x'. 
            $Read=true;
            $Write=true;
            $Create=true;
          break;
          case 'c'://Open the file for writing only. If the file does not exist, it is created. If it exists, it is neither truncated (as opposed to 'w'), nor the call to this function fails (as is the case with 'x'). The file pointer is positioned on the beginning of the file.
            $Read=false;
            $Write=true;
            $Create=true;
          break;
          case 'c+'://Open the file for reading and writing; otherwise it has the same behavior as 'c'. 
            $Read=true;
            $Write=true;
            $Create=true;            
     }
     $Path=str_replace("./",'/',trim($Path));
     $Path=str_replace("../",'/',$Path);
     $Path=str_replace(".../",'/',$Path);
     $Path=ltrim($Path,'/');
     if($Path==NULL or $Path=="")$Path="/";
     $DOCUMENT_ROOT=$_SERVER['DOCUMENT_ROOT'];
     $FileRoot=$DOCUMENT_ROOT."/".$Root;
     $FileRoot=str_replace("\\",'/',$FileRoot);
     $FileRoot=rtrim(str_replace('//','/',$FileRoot),'/');
     $TMkDir=0;
     $ISDir=true;
     $RelativePath=$Path;
     $Type=GetExt($FileRoot."/".$Path);
     if($Type!=""){
         $FileName=basename($FileRoot."/".$Path);
     }
     $ParentDir=dirname($Path);
     $T=urlencode($FileRoot."/".$Path);
     $T=str_replace("%3A",':',$T);
     $T=str_replace("%2F",'/',$T);
     if(is_file($T)){
         if($IsFile){
             return array("ISDir"=>false,"Handle"=>false,"Path"=>$T,'FileName'=>$FileName,"Type"=>$Type,"RelativePath"=>$RelativePath,'ParentDir'=>$ParentDir,'Read'=>$Read,'Write'=>$Write);
         }
         $Handle=fopen($T,$Mode);
         return array("ISDir"=>false,"Handle"=>$Handle,"Path"=>$T,'FileName'=>$FileName,"Type"=>$Type,"RelativePath"=>$RelativePath,'ParentDir'=>$ParentDir,'Read'=>$Read,'Write'=>$Write);
     }
     if(is_dir($T)){
         return array("ISDir"=>true,"Handle"=>NULL,"Path"=>$T,"RelativePath"=>$RelativePath,'ParentDir'=>$ParentDir,'Read'=>$Read,'Write'=>$Write);
     }
     $PathSplit=explode("/",$Path);
     if($Create==true){
         try{
            foreach($PathSplit as $PartDir){
               $TPartDir=$PartDir;
               $PartDir=urlencode($PartDir);
               $Temp=$FileRoot."/".$PartDir;
               if(!is_file($Temp) and $TPartDir!=$FileName){
                  if(!is_dir($Temp)){
                     mkdir($Temp);
                  }
               }else{
                   $ISDir=false;
                   $Temp=$FileRoot."/".$FileName;
                   $Handle=fopen($Temp,$Mode);
                   $FileRoot=$FileRoot."/".$PartDir;    
                   break;
               }
               $FileRoot=$FileRoot."/".$PartDir;    

            }
         }catch(Extension $e){
             echo ($e);
             return false;
         }
     }else{
         try{
            foreach($PathSplit as $PartDir){
               $TPartDir=$PartDir;
               $PartDir=urlencode($PartDir);
               $Temp=$FileRoot."/".$PartDir;
               if(!is_file($Temp) and $TPartDir!=$FileName){
                  if(!is_dir($Temp)){
                     return false;
                  }
               }else{
                   $ISDir=false;
                   $Handle=fopen($Temp,$Mode);
                   $FileRoot=$FileRoot."/".$PartDir;    
                   break;
               }
               $FileRoot=$FileRoot."/".$PartDir;    
            }
         }catch(Extension $e){
             echo ($e);
             return false;
         } 
     }
     if($Open!=true){//keep open Handle for User
        fclose($Handle); 
     }
     return array("ISDir"=>$ISDir,"Handle"=>$Handle,"Path"=>$FileRoot,'FileName'=>$FileName,"Type"=>$Type,"Create"=>(!$ISDir)?true:false,"RelativePath"=>$RelativePath,'ParentDir'=>$ParentDir,'Read'=>$Read,'Write'=>$Write);
 } 
```

样本：

如果目录或文件不存在，则打开文件进行写入和读取创建它。1)

```
 print_r(LocatePath('/er/ert/aیgfسبd/ی.af',"w+")); 
```

返回一些信息，例如 fopen 的句柄

输出

```
Array
(
[ISDir] => 
[Handle] => Resource id #3
[Path] => F:/xampp/htdocs/er/ert/a%DB%8Cgf%D8%B3%D8%A8d/%DB%8C.af
[FileName] => ی.af
[Type] => af
[Create] => 1
[RelativePath] => er/ert/aیgfسبd/ی.af
[ParentDir] => er/ert/aیgfسبd
[Read] => 1
[Write] => 1
) 
```

2) 打开文件进行读取，如果不存在则返回 false

```
 print_r(LocatePath('/er/ert/aیgfسبd/ی.af',"rb")); 
```

以及与 fopen 相同的另一种模式

# jquery - 如何使用 jQuery 将值传递给具有顺序 ID 的输入字段？

> ID：15055199
> 
> 赞同：1
> 
> 时间：2013-02-24T18:42:33.000
> 
> 标签：jquery, ajax, onclick

我有一个 AJAX 脚本，可以处理页面上的多个表单之一。因为每个页面上都有许多由 PHP 循环生成的表单，所以各个输入字段的 ID 都有一个序号，使用变量 $form

每个表单都有两个提交按钮，具有不同的值，我想将其作为变量传递，使用隐藏的输入字段，以触发处理表单的不同操作，即

```
<input type='hidden' id='button$form' value='' />
<button type='submit' class='submit_s' value='view' style='margin-right:20px' onclick='return setHiddenButtonValue(this.value);'>View</button>
<button type='submit' class='submit_s' value='email' style='margin-right:20px' onclick='return setHiddenButtonValue(this.value);'>Email</button> 
```

表单中的数据使用表单中的 AJAX 脚本进行处理：

```
var form_data = {
            name: $jform.find("[id^=name]").val(),
            date: $jform.find("[id^=date_hidden]").val(),
            time: $jform.find("[id^=time]").val(),
} 
```

所以我可以为此添加一个隐藏按钮输入的条目，即：

```
 button: $jform.find("[id^=button]").val(), 
```

然后以这样的方式使用它：

```
 if (form_data.button == 'email') {
        $jform.fadeOut(800);
    } 
```

我不知道该怎么做是如何将变量传递给隐藏的按钮输入。如您所见，我已经为每个提交按钮添加了一个 onclick 事件，然后我希望将以下内容添加到我的 jQuery 中会起作用：

```
 function setHiddenButtonValue(buttonValue)
{
    $j("[id^=button]").value = buttonValue;
    return true;
} 
```

但它不起作用。有人可以让我直截了当吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:01:56.827

我不确定您是否可以修改所有浏览器中的隐藏输入。另外，恐怕jquery中没有 .value() 方法:)所以只需使用`$j("[id^=button]").val(buttonValue);`或`.attr('value', buttonValue);`

# javascript - 如果其他情况，更好的方法

> ID：15055202
> 
> 赞同：1
> 
> 时间：2013-02-24T18:42:34.297
> 
> 标签：javascript, if-statement

我有一个功能可以根据滑块的值更改背景颜色

有 35 种不同的颜色，我现在使用这个代码（当然它更长）

```
if (value < 25) {
    color = '#FFFFFF';
} else if (value > 25 && value < 50) {
    color = '#F8F8F8';
} else if (value > 50 && value < 75) {
    color = '#F0F0F0 ';
} 
```

有没有办法缩短这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:48:20.493

如果要增加 25，则制作一个颜色数组：

```
var colors = ['#FFFFFF', '#F8F8F8', '#F0F0F0 ', ... ] 
```

然后做一些数学运算，看看要使用哪个索引。

```
color = colors[(value - (value % 25)) / 25]; 
```

* * *

或者，如果您愿意：

```
color = colors[Math.floor(value / 25)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:54:26.373

您可以通过执行类似于此的操作使其成为一个没有数组的两行语句：

```
var rgbvalue = 255-Math.floor(value/25);
var color = 'rgb('+rgbvalue+','+rgbvalue+','+rgbvalue+');'; 
```

当然，您必须限制该值，以使 rgbvalue 不会小于 0，但我想如果您知道可能的值，您可以轻松做到这一点。如果你想让它变黑得更快，你可以乘以 Math.floor 操作的结果，如下所示：

```
var rgbvalue = 255-(Math.floor(value/25)*5); 
```

而且您的优势在于您不必编写大量的灰色阴影。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T18:55:44.030

更多防弹版本（虽然不是完全防弹）

```
var colors = ['#FFFFFF','#F8F8F8','#F0F0F0'];

/* this is not that necessary */
var value = input_value || default_input_value;

var color = colors[ Math.floor(value/25) ]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:46:11.010

```
colors = {'#FFFFFF','#F8F8F8','#F0F0F0 '}
color=colors[(int)value/25]; 
```

您可能需要根据`value`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T18:46:25.813

抛弃`&&`and 级联

```
if(values > 75){
  //anything above 75 falls here
} 
else if(value > 50){
  //anything <= 75 but > 50 falls here
} 
else if(values > 25){
  //anything <= 50 but > 25 falls here
} 
else {
  //anything <= 25 falls here
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T18:54:19.230

您可以使用描述颜色以及范围的最小值和最大值的对象数组，然后使用函数遍历数组以查找范围之间的颜色。

```
function getColor(value) {

    var colorRanges = [
        { color : '#FFFFFF', min : 0, max : 25 },
        { color : '#F8F8F8', min : 25, max : 50 },
        { color : '#F0F0F0', min : 50, max : 75 }
    ],
    length = colorRanges.length;

    while(length--) {
        var colorRange = colorRanges[length];
        if (value >= colorRange.min && value < colorRange.max) {
            return colorRange.color;
        }
    }

    // default color
    return colorRanges[0].color;
} 
```

通过一些额外的努力，您可以公开一种添加新颜色和范围的方法，为范围间隔设置默认值等。但是，如果您的颜色和范围间隔是固定的，那么这可能是矫枉过正。

# android - 参考图像存储在 android

> ID：15055207
> 
> 赞同：1
> 
> 时间：2013-02-24T18:43:16.977
> 
> 标签：android

我开发了一个用于图像比较的应用程序。现在我将参考图像存储在 sdcard 上，应用程序运行良好。我的问题是.. 如果有人删除了 SD 卡，那么该应用程序将无法运行。是否有任何方法可以将参考图像存储在应用程序本身中，以便任何用户都可以下载并使用该应用程序？我使用的是安卓 2.2

# security - 未经验证的 SSL 加密 (SSH Like)

> ID：15055213
> 
> 赞同：0
> 
> 时间：2013-02-24T18:43:47.757
> 
> 标签：security, networking, ssl, client-server, ssl-certificate

我正在用java构建一个网络认证系统。我想用 SSL 加密我的连接，所以我使用 SSLServerSocket。我用 keytool 生成了一个密钥库：（在 ssl 目录中）

```
keytool -genkey -keystore myKeystore -keyalg RSA 
```

然后在我的服务器类中：

```
System.setProperty("javax.net.ssl.keyStore", "ssl/myKeystore");
System.setProperty("javax.net.ssl.keyStorePassword", "123456"); 
```

然后在我的客户中：

```
System.setProperty("javax.net.ssl.trustStore", "ssl/myKeystore");
System.setProperty("javax.net.ssl.trustStorePassword", "123456"); 
```

这行得通，但我不能依赖客户端来制作密钥库。

我的目标是一个类似 SSH 的模型：客户端有一个私钥，它将发送到服务器，服务器使用公钥验证它。

我不能使用简单的 RSA 密钥文件而不是密钥库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:32:31.390

您似乎在这里混淆了许多方面。尽管 SSH 不依赖 SSL/TLS，但这些概念确实大体相似。

通过在客户端上设置与服务器上的密钥库匹配的信任库，您所做的就是使客户端信任服务器的公钥（在其证书内）。

这是预加载受信任服务器密钥指纹的 SSH 等效项。当您建立第一个连接时，大多数 SSH 客户端将学习服务器的公钥或其指纹（原则上您应该手动验证此指纹）：您可以使用 Java 中的 SSL/TLS 来实现这一点，这或多或少是什么[Andreas Sterbenz 的 InstallCert](http://code.google.com/p/java-use-examples/source/browse/trunk/src/com/aw/ad/util/InstallCert.java)可以。

这样做的目的是允许客户端验证服务器的身份（没有它可能会发生 MITM 攻击）。

> 客户端有一个私钥，它将发送到服务器，服务器使用公钥对其进行验证。

当客户端有一个私钥（它实际使用，但从*不发送*到服务器）时，它仅用于验证客户端。这样做的目的是允许服务器验证客户端的身份（例如，作为密码身份验证的替代方法）。

这也可以通过 SSL/TLS 使用客户端证书身份验证来完成。

SSH 和 SSL/TLS 在这方面的主要区别（协议除外）是 SSL/TLS 倾向于使用 X.509 证书（其中包含公钥和描述实体身份的附加属性），而 SSH 倾向于使用原始公钥直接地。（那里也有使用 X.509 证书的 SSH 扩展，但它们并不常见。）

在这两种情况下，客户端都需要验证服务器的身份以防止 MITM 攻击。这通常使用公钥基础设施（和 X.509 证书）通过 SSL/TLS 完成，但您也可以在第一次连接时学习密钥，例如 SSH：这需要更多工作（您需要自定义信任管理器） . 一个合理的折衷方案（在受控环境中）是使用客户端上的信任库，预加载服务器的证书。这或多或少是你已经做过的，除了你永远不应该泄露服务器的私钥。 **您真的不应该在此处使用相同的密钥库**，因为服务器的密钥库将包含其私钥：相反，仅导出证书并将其导入密钥库，您将在另一端用作信任库。

# vb.net - 如何在 msgbox vb.net 中传递字符串值

> ID：15055217
> 
> 赞同：0
> 
> 时间：2013-02-24T18:44:02.900
> 
> 标签：vb.net, vbscript

我在 vb.net 和 else 语句中有一个 msgbox ......我想在其中传递一个字符串值以显示字符串和消息文本，如下所示 -

```
Normal

    msgbox("student is not eligible for the company")

TO

    MSGBOX([string]"is not eligible for the company")

RESULT

    Anthony is not eligible for the company 
```

有什么解决方法………​​…？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T18:52:14.487

```
dim StudentName as string
StudentName = "Student"

If (specificStudent) Then
   StudentName = "SpecificName"
End If

MsgBox(StudentName + " is not eligible") 
```

编辑：另外，你可以`string.Format`在这里使用

```
dim StudentName as string
StudentName = "Student"

If (specificStudent) Then
   StudentName = "SpecificName"
End If

'I suppose string.format works same way in vb.net, as it does in c#    
MsgBox(String.Format("{0} is not eligible", StudentName)) 
```

# batch-file - 启用/禁用 USB 端口

> ID：15055222
> 
> 赞同：0
> 
> 时间：2013-02-24T18:44:38.597
> 
> 标签：batch-file, vbscript, usb

我必须使用程序或 .bat 或 .vbs 文件禁用特定的 USB 端口。

这个程序必须检查端口是否启用，禁用它，如果禁用，启用它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:00:23.790

您应该可以使用[`devcon`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544746%28v=vs.85%29.aspx#ddk_example_30_disable_devices_by_an_id_pattern_tools). 请注意，如果您使用的是 Windows 7，则必须使用[Windows Driver Kit](http://www.microsoft.com/en-us/download/details.aspx?id=11800)随附的版本。早期版本在 Windows 7 上无法正常工作。

# php - 无法创建用于创建具有不同名称的数据库的脚本。PHP/MYSQL

> ID：15055223
> 
> 赞同：0
> 
> 时间：2013-02-24T18:44:39.540
> 
> 标签：php, mysql

伙计们。我想制作这个脚本，或者其他具有相同效果的脚本：

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

if (mysql_query("CREATE DATABASE my_db",$con))
  {
  echo "Database created";
  }
else
  {
  echo "Error creating database: " . mysql_error();
  }

mysql_close($con);
?> 
```

要创建不同名称的数据库，例如：第一次将创建名为“news1”的数据库，下一次，脚本将做某事。像这样：news1+1 = news2，然后会创建一个名为 news2 的数据库，以此类推……

我希望你明白我的意思，如果你能帮助我做到这一点，我将非常感激......问候，丹尼斯赛多夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:14:32.487

The database should be static. It is a one off event to create the database along with:

*   Tables
*   Indexes
*   Various constraints
*   Triggers
*   Stored procedures

This can be done with a SQL script.

Then the PHP stuff accessing this database only needs to use `select`, `insert`, `delete` or `update` statements - or as I prefer using stored procedures.

You are going to have a lot of headaches having multiple databases. Also I would hate to have to write a PHP script to do that each time and to administrate them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:01:21.617

要做到这一点，我猜你不只是想循环 100 次？

您需要将变量保存到文本文件中，然后再次调用它。

将 $text 写入文件：

```
$var_str = var_export($text, true);
$var = "<?php\n\n\$$text = $var_str;\n\n?>";
file_put_contents('filename.php', $var); 
```

再次检索它：

```
include 'filename.php';
echo $text; 
```

全部一起：

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
$db_number = get_var();
$my_db = 'news' . $db_number;
if (mysql_query("CREATE DATABASE ".$my_db,$con))
  {
  echo "Database created";
  }
else
  {
  echo "Error creating database: " . mysql_error();
  }
$new_db_number = $db_number + 1;
save_var($new_db_number);
mysql_close($con);

function save_var($var) {
$var_str = var_export($text, true);
$var = "<?php\n\n\$$text = $var_str;\n\n?>";
file_put_contents('filename.php', $var);
}
function get_var()
include 'filename.php';
return $text;
}
?> 
```

PS我认为这应该只适用于未测试的打字

# asp.net - ASP.NET Gridview TemplateField 中的 RadDatePicker

> ID：15055224
> 
> 赞同：0
> 
> 时间：2013-02-24T18:44:41.077
> 
> 标签：asp.net, gridview, dotnetnuke

我在 GridView 的模板字段中声明了一个日期选择器字段，如下所示：

```
<asp:TemplateField HeaderText="Shipping Date">
    <ItemTemplate>
        <asp:Label ID="lblShippingDate" runat="server" CssClass="dnnFormLabel" 
            AssociatedControlID="ShippingDatePicker" />
        <dnn:DnnDatePicker runat="server" ID="ShippingDatePicker" />
    </ItemTemplate>
</asp:TemplateField> 
```

我可以很好地选择日期，它会出现在我的标签控件中 - 然后我单击一个标准的*asp:Button*来查找选定的行，尽管它找到了行上的所有其他控件，包括显示选定日期的标签控件，标签的*Text*属性为空：

```
var txtShippingDate = row.Cells[7].FindControl("lblShippingDate") as Label; 
```

请注意，我使用的是 DotNetNuke *dnn:DnnDatePicker*控件，但这实际上是一个*RadDatePicker*。

谁能建议我如何成功读取该值？

谢谢你看:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:43:58.190

找到标签后尝试以下操作：

```
如果（txtShippingDate ！= null）{
    字符串日期 = Request.Form[txtShippingDate.UniqueID].ToString();
}
```

# c# - 如何包装H1标签的内容

> ID：15055225
> 
> 赞同：3
> 
> 时间：2013-02-24T18:44:42.970
> 
> 标签：c#, asp.net, html, css, tags

我无法解释我的问题。但是，如果有人理解我想要什么，请进行编辑。

我有以下代码

```
<table style="width:100%">

        <tr style="border-style: none solid solid solid; border-width: thin; border-color: #C0C0C0; background-color: #FFFFFF">
            <td class="style4" width="100%" 

                style="border-bottom-style: solid; border-bottom-width: thin; border-bottom-color: #C0C0C0" 
                align="left">
                <h1 style="font-style: normal; font-weight: normal;">
                            <%=t.getTitle() %>
                </h1> 
```

每当`t.getTitle()`返回一行中的较大字符串时，我的标题就会超出页面（溢出）。我想把它的内容包装`h1`起来`td`。

就像 stackoverflow.com 使用它的问题标题一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:03:36.250

很少有文本溢出文本框。在这种情况下，可以强制浏览器更改换行。[网页设计师墙](http://webdesignerwall.com/)[在这里](http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap)解释：

```
.break-word {
  word-wrap: break-word;
} 
```

像这样改变渲染行为：

![在此处输入图像描述](../Images/ba4e25b7ac24d3bca80ee4abfe7551a2.png)

此外，虽然在当前情况下可能没有帮助，但可以使用 CSS**隐藏任何溢出：**

```
style="overflow:hidden;" 
```

*PS：实际上，我想知道，换行是否是您问题的根本原因。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:03:02.163

1000字将被包装。1 个 1000 个字符的单词不会被换行。尝试：

```
word-wrap:break-word; 
```

# c++ - 作者对下面的伪代码是什么意思？

> ID：15055227
> 
> 赞同：4
> 
> 时间：2013-02-24T18:44:47.383
> 
> 标签：c++, templates

以下内容来自 B.Stroustrup 的“The C++ Programming Language”第三版的第 330 页：

```
template<class C> struct String<C>::Srep {
  C* s;   // pointer to elements
  int sz; // number of elements
  int n; // reference count
  // ...
};

template<class C> C String<C>::read(int i) const { return rep->s[i];}

template<class C> String<C>::String()
{
  p = new Srep(0, C());
} 
```

我对上述构造函数有两个问题：

1) 不`p`应该替换为`rep`?

2) ctor`Srep(0, C())`应该如何在 store 中构造一个`Srep`对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:52:29.883

1）：是的。在我的书中，我有以下代码：

```
template<class C> struct String<C>::Srep {
  C* s;   // pointer to elements
  int sz; // number of elements
  int n; // reference count
};

template<class C> C String<C>::read(int i) cont { return rep->s[i];}

template<class C> String<C>::String<C>()
{
  rep = new Srep(0, C());
} 
```

# javascript - 推送到 Heroku 时，简单的 Javascript 不起作用

> ID：15055233
> 
> 赞同：0
> 
> 时间：2013-02-24T18:45:13.843
> 
> 标签：javascript, heroku

[我知道由于资产管道编译问题](https://stackoverflow.com/questions/9869180/heroku-cedar-javascript-not-working)等原因，有一些关于 Javascript 在 Heroku 中无法工作的问题......这超出了我的想象。

我只是想在我用 Middleman 构建的简单应用程序中添加一个简单的链接（见下文），它应该重新加载页面 onclick 并反过来触发 shuffle！方法：

```
<a href="javascript:;" onClick="window.location.reload()">Click to refresh</a> 
```

这甚至可能吗？它在本地运行良好，但当我推送到 Heroku 时不再运行。任何想法/帮助表示感谢。

这是 Heroku 上实际应用程序的链接：http: [//coastguard-quiz.herokuapp.com/](http://coastguard-quiz.herokuapp.com/)

我的 index.html.erb 代码如下：

```
---
title: Coast Guard Quiz
---

<h1>Coast Guard Rank Quiz</h1>

<h3>Guess the enlisted insignia below:</h3>

<%

seaman_recruit = {
    img: "<img src = 'images/USCG_SR.png'>",
    name: "Seaman Recruit",
    en_class: "Seaman",
}

seaman_apprentice = {
    img: "<img src = 'images/USCG_SA.png'>",
    name: "Seaman Apprentice",
    en_class: "Seaman",
}

seaman = {
    img:  "<img src = 'images/USCG_SM.png'>",
    name: "Seaman",
    en_class: "Seaman",
    abbr: "SN",
    title:"Seaman (last name)",
    paygrade: "E3"
}

ranks = [seaman_recruit, seaman_apprentice, seaman, pettyofficer3, pettyofficer2, pettyofficer1]

current_rank = ranks.shuffle!.first

img_now = current_rank[:img]
name_now = current_rank[:name]
class_now = current_rank[:en_class]
abbr_now = current_rank[:abbr]
title_now = current_rank[:title]
paygrade_now = current_rank[:paygrade]

%>

<div id="container" class="shadow">

    <p><%= img_now %></p>
    <div id="hideaway" style="display:none;">
        <p class="bld"><%= name_now %></p>
        <p><%= class_now %></p>
        <p><%= abbr_now %></p>
        <p><%= title_now %></p>
        <p><%= paygrade_now %></p>
        <a href="javascript:;" onClick="document.getElementById('hideaway').style.display='none'; document.getElementById('showme').style.display='block'">Hide Answer</a>
    </div>

    <div id="showme">
    <a class="show" href="javascript:;" onClick="document.getElementById('hideaway').style.display='block'; document.getElementById('showme').style.display='none';">Get answer</a>
    </div>

</div>

<a href="javascript:;" onClick="window.location.reload()">Click to refresh</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:51:50.407

鉴于字符串有多简单，我认为这不是问题的根源。资产的缩小更有可能使您的 JS 混乱，并且在评估代码之前某处出现 JS 错误导致 JS 无法工作。

建议您使用 JavaScript 开发工具（例如[Google Chrome JS 控制台](https://developers.google.com/chrome-developer-tools/docs/console)）打开页面，并检查控制台中是否记录了任何错误。

* * *

更新：您发布的链接非常适合我使用 Google Chrome。

# css - @media 适用于除桌面电脑以外的所有设备

> ID：15055244
> 
> 赞同：1
> 
> 时间：2013-02-24T18:46:14.307
> 
> 标签：css, iphone-web-app, iphone-standalone-web-app

有没有一种方法可以查询所有手持设备/智能手机的 css-@media，而与它们的尺寸（宽度、高度）无关。

我知道，我不能使用@handheld。

**我试过这样：**

```
@media only screen and (orientation: portrait) or (orientation:landscape){ 
```

}

**这样：**

```
@media only screen and (max-device-width:3000px) or (max-device-height: 1300px){ 
```

}

但它不起作用。我不想给出一堆与数十种不同尺寸的智能手机相关的@media-queries。有没有办法通过@media 查询来指示手持设备？我不想通过 javascript 使用浏览器嗅探。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:39:38.887

所有可用的媒体都是那些，所以我猜不是：

```
media_query_list: <media_query> [, <media_query> ]*
media_query: [[only | not]? <media_type> [ and <expression> ]*]
  | <expression> [ and <expression> ]*
expression: ( <media_feature> [: <value>]? )
media_type: all | aural | braille | handheld | print |
  projection | screen | tty | tv | embossed
media_feature: width | min-width | max-width
  | height | min-height | max-height
  | device-width | min-device-width | max-device-width
  | device-height | min-device-height | max-device-height
  | aspect-ratio | min-aspect-ratio | max-aspect-ratio
  | device-aspect-ratio | min-device-aspect-ratio | max-device-aspect-ratio
  | color | min-color | max-color
  | color-index | min-color-index | max-color-index
  | monochrome | min-monochrome | max-monochrome
  | resolution | min-resolution | max-resolution
  | scan | grid 
```

来自[https://developer.mozilla.org/en-US/docs/CSS/Media_queries#Pseudo-BNF_(for_those_of_you_that_like_that_kind_of_thing)](https://developer.mozilla.org/en-US/docs/CSS/Media_queries#Pseudo-BNF_(for_those_of_you_that_like_that_kind_of_thing))

# java - Play 2 框架应用的后端服务器

> ID：15055248
> 
> 赞同：1
> 
> 时间：2013-02-24T18:46:45.163
> 
> 标签：java, amazon-ec2, playframework-2.0, playframework-2.1, sox

我正在计划一个 Web 应用程序，用户可以在其中上传和处理他们的文件。该应用程序的细节与我的问题无关，但我们假设该应用程序将处理 mp3 音频文件。我将把我的应用程序分成两个不同的部分：前端和后端。

前端应用程序将是一个为用户提供 html 页面的常用 Web 应用程序。通常，用户将上传他的文件并填写一个 html 表单以指定他想对文件执行哪些操作。这些文件最初将上传到存储设施，例如 Amazon S3，然后由后端服务器处理。我正在使用 Play 2.0.4 框架来开发前端应用程序，这对我来说非常顺利。我设法实现了用户授权，起草了大部分 UI，还实现了文件上传到 S3。该应用程序目前部署在 Heroku 上，没有任何问题。

对于我的后端服务器，我正在考虑再次使用 Play 2 框架。后端服务器将从前端服务器接收有关创建新作业的通知（http 请求）。作业规范将包括存储中原始用户文件的链接和描述作业的参数。该作业应添加到队列中。现在最重要的部分是将实际的处理工作委托给第三方程序，这肯定是一个已编译的命令行实用程序，例如[SoX](http://sox.sourceforge.net)对于音频处理，由好人使用他们选择的编程语言编写。据我所知，可以从 java 调用外部程序，传递命令行参数并收集结果。处理完成后，后端服务器会将处理后的文件上传回存储，并向前端应用程序发送通知（http请求），前端应用程序将存储处理后文件的链接并稍后显示给用户时间。为了能够使用命令行实用程序，我将使用 Typesafe 堆栈安装将后端应用程序部署到 Amazon EC2 实例。

以下是有关此基本计划的一些问题：

1.  Play 2 是后端的合理选择，还是我应该寻找替代方案？其中一个似乎是 CGI，根据 Wikipedia 的说法，它“是一种标准方法，用于 Web 服务器软件将 Web 内容的生成委托给可执行文件。” 不幸的是，我对此没有任何经验。
2.  使用 Play 实现作业队列应该没有任何问题吗？
3.  是否可以在 EC2 上安装命令行实用程序并从 Play 调用它？
4.  我应该期待在 EC2 上安装 Typesafe 堆栈会出现任何问题吗？这篇文章简要描述了我打算做什么[https://www.assembla.com/spaces/bufferine/wiki/Typesafe_stack_on_Amazon_EC2](https://www.assembla.com/spaces/bufferine/wiki/Typesafe_stack_on_Amazon_EC2)
5.  假设将来应用程序会增长，我将如何在 EC2 上的多个实例之间分配作业？我应该在我的前端和后端之间创建一个单独的工作平衡应用程序吗？

我将不胜感激任何建议！谢谢！

注意：我在 Play 2 框架中使用 Java api，因为我不熟悉 Scala 语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T03:07:33.273

您可以考虑使用 Akka 进行处理，它内置在 Play2 中。它将帮助您轻松管理任务，如果与高级功能一起使用，甚至可以节省硬件资源。有一个 Java API 可以满足您的所有需求。并且在后端应用程序中没有必要，如果您需要更多功能，您可以使用两个相同的实例更好地扩展。Play 和 Akka 是无状态的，您只需添加新实例即可扩展。要使其在 EC2 上运行，只需使用`play dist`命令。

是的，你可以在 EC2 中安装任何你想要的东西，然后从你的应用程序中调用它。

你可能喜欢：

*   [http://akka.io/](http://akka.io/)
*   [http://www.playframework.com/documentation/2.1.0/JavaAkka](http://www.playframework.com/documentation/2.1.0/JavaAkka)
*   [http://www.playframework.com/documentation/2.1.0/ProductionDist](http://www.playframework.com/documentation/2.1.0/ProductionDist)

也，但在斯卡拉

*   [http://blog.greweb.fr/2013/01/playcli-play-iteratees-unix-pipe/](http://blog.greweb.fr/2013/01/playcli-play-iteratees-unix-pipe/)
*   [http://blog.greweb.fr/2012/11/play-framework-enumerator-outputstream/](http://blog.greweb.fr/2012/11/play-framework-enumerator-outputstream/)

# java - 使用 I/O 表达式将数组中的数据存储到硬盘中 (Java)

> ID：15055256
> 
> 赞同：0
> 
> 时间：2013-02-24T18:47:55.293
> 
> 标签：java, performance

我正在为书店开发一个应用程序，比如购买、销售、搜索书籍……等等

现在我需要将我的信息从阵列存储/检索到硬盘，但不使用文件（I/O 表达式），因为它对应于会影响我的应用程序的速度或性能的顺序行为，我需要类似的东西随机内存访问！！

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:23:42.220

使用数据库，并找到适合您的性能要求的数据库。

# c# - Windows Phone 8 中 Slider 的无绑定值属性

> ID：15055257
> 
> 赞同：0
> 
> 时间：2013-02-24T18:48:01.827
> 
> 标签：c#, silverlight, windows-phone-8

我是 Windows Phone 8 编程新手。我正在学习“绑定”。我尝试绑定 Slider 的属性“Value”，但是在运行应用程序时我看不到任何变化。

XAML 代码是这样的：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <StackPanel>
        <Slider Minimum="1" Maximum="100" Value="{Binding Valor}" />
    </StackPanel>
</Grid> 
```

ViewModelBase 类是这样的：

```
public class VMBase : INotifyPropertyChanged {
    public event PropertyChangedEventHandler PropertyChanged;

    public VMBase() {}

    public void RaisePropertyChanged(string PropertyName) {
        if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
    }
} 
```

ViewModel 类是这样的：

```
public class VMSlider : VMBase {
    private int _valor;

    public VMSlider() {
        _valor = 43;
    }

    public int Valor {
        get { return _valor; }
        set { 
            _valor = value;
            RaisePropertyChanged("Valor");
        }
    }
} 
```

在我的 XAML 的代码隐藏类中，您可以这样写：

```
this.DataContext = new ViewModel.VMSlider(); 
```

我需要说一下为什么。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:26:39.650

Slider 控件上的 Value 属性是[Double](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.rangebase.value%28v=vs.95%29.aspx)类型。您的 Binding 不起作用，因为 Valor 是错误类型的值。

您必须实现一个[值转换器](http://msdn.microsoft.com/en-gb/library/system.windows.data.ivalueconverter%28v=vs.95%29.aspx)或`change Valor to a Double`.

# java - 如何将视频从服务器流式传输到 Android 应用程序？

> ID：15055260
> 
> 赞同：3
> 
> 时间：2013-02-24T18:48:10.813
> 
> 标签：java, android, video-streaming

我当地的教堂每周举办一次节目，并将视频上传到 Youtube。我被要求为他们开发一个应用程序，到目前为止一切都很好，但是，我必须实现一个功能，允许我将节目的视频流式传输到应用程序。

老实说，我不知道如何去做（对android编程来说还是新手）！我环顾四周，发现有一些人已经尝试过这样做，但与大多数人已经做过或尝试过的事情不同，视频是在当天发布的（不是直播）。例如，`10/02/13`视频将在 上发布`10/02/13`。

[这个](https://stackoverflow.com/questions/14262094/android-is-there-a-way-to-stream-video-on-a-app)链接让我了解了如何在 Android 上流式传输视频，但这表明我必须明确输入视频的链接。

有没有办法做同样的事情，但不是自己添加链接，应用程序应该从服务器检索视频？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:52:13.943

> 有没有办法获取链接，但不是自己添加链接，应用程序应该从服务器检索视频？

要实现这一点，您需要制作有助于移动和 Web 服务器通信***的Web 服务。***当您将请求从移动设备发送到服务器时，然后创建 Web 服务，该服务会为您提供具有视频链接的响应，然后您可以流式传输视频。

流式传输视频。

[在这里](https://stackoverflow.com/questions/14262094/android-is-there-a-way-to-stream-video-on-a-app)阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:50:35.457

在示例中的 API DEMOS 中。

API DEMOS >> 媒体 >> Mediaplayer >> 播放流媒体视频

您需要使用 SDK 管理器进行下载，然后在 Eclipse 中从现有示例中创建新项目，然后阅读代码并将其复制到您的应用程序中。

# c# - 为不同的字符串生成唯一的 ID？

> ID：15055265
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:48:51.293
> 
> 标签：c#, string, hash, uniqueidentifier

我正在尝试找到一种为字符串生成唯一 ID 的方法。生成该唯一 ID 后，我必须能够通过使用该 ID 来取回我的字符串。

String s = "这是字符串";

在一系列代码之后，我会得到一个字符串 uniqueID

最后通过使用这个 uniqueID，我应该得到我的字符串（“这是字符串”）。

关于如何解决这个问题的任何想法？

我尝试用 String.GetHashCode 解决这个问题，但我遇到了来自 msdn 的警告：

> 每个唯一字符串值没有唯一的哈希码值。不同的字符串可以返回相同的哈希码。

！观察：我想在更长的字符串上使用这个代码序列。（说1000字或更多）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T18:51:05.127

你可以使用Base64吗？

看看这里：http: [//msdn.microsoft.com/en-us/library/dhx0d524.aspx](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)

```
static void Main(string[] args)
{
    var encoded = Base64Encode("test string");
    var decoded = Base64Decode(encoded);
}

static string Base64Encode(string text)
{
    var bytes = System.Text.UTF8Encoding.UTF8.GetBytes(text);
    return System.Convert.ToBase64String(bytes);            
}

static string Base64Decode(string encodedText)
{
    var bytes = System.Convert.FromBase64String(encodedText);
    return System.Text.UTF8Encoding.UTF8.GetString(bytes);            
} 
```

# python - 发送带有源端口但没有绑定的 UDP 数据包

> ID：15055266
> 
> 赞同：3
> 
> 时间：2013-02-24T18:48:52.853
> 
> 标签：python, sockets, udp, port

我想在 Python 中发送一个 UDP 数据包并指定源端口但没有绑定。

与 hping3 等效：

```
hping3 -s $sourceport -p $remoteport --udp --file message.bin -d 1024 -c 1 $remoteaddr 
```

我试图做这样的事情：

```
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_UDP)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

s.bind((SHOST, SPORT)) 
```

但是当然，Python 尝试绑定，但它不起作用。现在，如果我不绑定，我可以这样做：

```
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, 0)
s.sendto("message", (RHOST, RPORT)) 
```

消息已发送，但现在未定义源端口。

有人有想法吗？

**编辑**：扩展描述：我的 python 脚本补充了另一个应用程序，它是一个绑定到定义端口（1024 以上）的 UDP 服务器。我的脚本只需要将 UDP 数据包发送到远程服务器，但与我的本地 UDP 服务器具有相同的源端口，以便远程 UDP 服务器认为本地 UDP 服务器是数据包的作者，并将继续传输。

我想我还不得不说这是一个完全合法的应用程序，与任何黑客攻击都没有关系（事实上，它已经与 hping3 一起工作，但我想删除这种依赖关系）。

**编辑 2**：解决方案在[Nos 答案](https://stackoverflow.com/a/15055312/1324)下方的评论中：

使用 pyip python 包并创建一个原始套接字。不要忘记成为 root，因为只有 root 可以发送原始数据包（这不是 Python 的限制，而是操作系统的限制，这是为了防止安全问题，所以要以用户身份发送原始数据包，您需要调整操作系统配置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:52:32.767

在 python 中没有用于发送具有已定义源端口的 UDP 数据包的 API，在大多数（全部？）python 运行的操作系统上都没有先将套接字绑定到本地端口。

因此，如果您想控制源端口，则必须绑定（）您的套接字。

如果 bind() “不起作用”，那么您要么绑定到另一个进程拥有的端口，要么绑定到只有 root 用户可以绑定的端口号 < 1024，或者您提供了一些其他错误的参数来绑定() - 但我们需要更多信息来帮助您，例如您收到的错误消息、您传递给绑定的实际参数等。

# java - PostgreSQL 和 JDBC：是否支持`UPDATE table ... RETURNING ... INTO`？

> ID：15055267
> 
> 赞同：0
> 
> 时间：2013-02-24T18:48:54.073
> 
> 标签：java, sql, postgresql, jdbc

我有一个带有 [主键计数器] 的表，用于 [在另一个表中的每页评论]。
这些主键是每页的：*对于每一页*，评论 ID 从 1 开始。

我想自动分配 10 个 ID 来写 10 条新评论。
— 我可以用 PostgreSQL 和 JDBC 做到这一点吗？

（您是否有任何示例/相关 JDBC 文档的链接？）

[我只找到了关于`returning`新插入行的主键如何使用的示例，这些示例`getGeneratedKeys`在我的情况下似乎没有用。]

                                                      ***

我认为 SQL UPDATE 语句看起来像这样：

```
update PAGES
set NEXT_COMMENT_ID = NEXT_COMMENT_ID + 10
where PAGE_ID = ?                    <-- next-comment-id is *per page*
returning NEXT_COMMENT_ID into ? 
```

因此，不同的线程和服务器不会尝试重用/覆盖相同的 ID（对吗？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:36:05.493

这在不使用对象的`execute()`and`getResult()`方法的情况下得到支持`Statement`：

像这样的东西（排除任何错误处理）：

```
String sql = "update ... returning ...";
boolean hasResult = statement.execute(sql);
int affectedRows = 0;
ResultSet rs = null;
if (hasResult) {
  rs = statement.getResultSet();
}
int affectedRows = statement.getUpdateCount(); 
```

如您所知，该语句的作用应该没问题。处理“未知”的 SQL 语句有点复杂，因为您需要在循环中调用`getMoreResults()`和。`getUpdateCount()`有关详细信息，请参阅 Javadocs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:23:19.490

要使表包含逻辑顺序，您可能需要在子表中创建复合键和外键。

```
sd=# create table x (x int);
CREATE TABLE
sd=# create table y (x int, y int);
CREATE TABLE

sd=# alter table x add primary key (x);
NOTICE:  ALTER TABLE / ADD PRIMARY KEY will create implicit index "x_pkey" for table "x"
ALTER TABLE
sd=# alter table y add foreign key (x) references x (x);
ALTER TABLE
sd=# alter table y add primary key (x,y);
NOTICE:  ALTER TABLE / ADD PRIMARY KEY will create implicit index "y_pkey" for table "y"
ALTER TABLE

sd=# insert into x values (1);
INSERT 0 1
sd=# insert into x values (2);
INSERT 0 1
sd=# insert into x values (3);
INSERT 0 1
sd=# insert into y values (1,1);
INSERT 0 1
sd=# insert into y values (1,2);
INSERT 0 1
sd=# insert into y values (1,3);
INSERT 0 1
sd=# insert into y values (1,1);
ERROR:  duplicate key value violates unique constraint "y_pkey" 
DETAIL:  Key (x, y)=(1, 1) already exists.

sd=# select * from x;
 x
---
 1
 2
 3
(3 rows)

sd=# select * from y;
 x | y
---+---
 1 | 1
 1 | 2
 1 | 3
(3 rows) 
```

这应该让你到达你想去的地方？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:49:41.283

所以你想要以下结构？：

x = 页面主键 y = 评论主键

页表

```
x
-
1
2
3
4 etc 
```

评论表

```
x y
- -
1 1
1 2
1 3
1 4
2 1
2 2 
2 3
etc? 
```

在这里有一个外键结构对子记录有上限是最有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T09:06:50.147

创建一个有效的存储函数`update ... returning ... into`：

```
create or replace function INC_NEXT_PER_PAGE_REPLY_ID(
  site_id varchar(32), page_id varchar(32), step int) returns int as $$
declare
  next_id int;
begin
  update DW1_PAGES
    set NEXT_REPLY_ID = NEXT_REPLY_ID + step
    where SITE_ID = site_id and PAGE_ID = page_id
    returning NEXT_REPLY_ID into next_id;
  return next_id;
end;
$$ language plpgsql; 
```

并这样称呼它：

```
statement = connection.prepareCall(
    "{? = call INC_NEXT_PER_PAGE_REPLY_ID(?, ?, ?) }")
statement.registerOutParameter(1, java.sql.Types.INTEGER)
bind(values, statement, firstBindPos = 2)  // bind pos no. 1 is the return value
statement.execute()
nextNewReplyIdAfterwards = statement.getInt(1) 
```

相关文档：

*   [http://jdbc.postgresql.org/documentation/91/callproc.html](http://jdbc.postgresql.org/documentation/91/callproc.html)
*   [类 CallableStatement 和 registerOutParameter()](http://docs.oracle.com/javase/6/docs/api/java/sql/CallableStatement.html)
*   StackOverflow 问题：[如何从函数返回更新的行](https://stackoverflow.com/questions/3940473/how-to-return-updated-rows-from-function)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-29T07:29:38.160

您正在进行更新，但该语句会生成结果，因此请使用`executeQuery()`而不是`executeUpdate()`. 这就是调用之间的真正区别：`executeQuery()`处理产生`ResultSet`;的语句。while`executeUpdate()`返回受影响的行数。

# android - 如何隐藏操作栏中的向上按钮

> ID：15055272
> 
> 赞同：8
> 
> 时间：2013-02-24T18:49:21.217
> 
> 标签：android, user-interface, actionbarsherlock

我想做一个编辑模式，采用平板电脑 gmail 应用程序的风格。如果用户按下操作栏上的编辑按钮，我想向他/她展示一个操作视图，左侧有一个完成按钮，右侧有一个删除按钮。

我在这里有一个没有 actionbarsherlock 的示例： [https ://code.google.com/p/romannurik-code/source/browse/misc/donediscard](https://code.google.com/p/romannurik-code/source/browse/misc/donediscard)

出于兼容性原因，我想坚持使用 actionbarsherlock。

这是我在 onCreateOptionsMenu 中解决它的方式：

```
getSupportActionBar().setBackgroundDrawable(getResources().getDrawable(R.drawable.white));
getSupportActionBar().setIcon(R.drawable.white);

for (int i = 0; i < menu.size(); i++) {
    menu.getItem(i).setVisible(false); } 
```

`getSupportActionBar().setDisplayHomeAsUpEnabled(false);`什么都不做，所以我不得不将主页图标设置为白色 1x1 像素可绘制。

我还必须将操作栏的背景颜色设置为操作视图的背景颜色。如果我没有，那么 1x1 主页图标将在其周围填充，并且原始背景颜色将在白色主页按钮周围可见。

有人对此有更好的解决方案吗？

编辑：我也不得不改变风格：

```
<style name="Theme.Styled" parent="Theme.Sherlock.Light">
        <item name="android:homeAsUpIndicator">@drawable/white</item>
        <item name="homeAsUpIndicator">@drawable/white</item>
</style> 
```

此外..settings android:homeAsUpIndicator 将我的最低 api 级别从 8 提高到 11，这也是一个问题。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-07-26T05:27:34.737

如果您处于 API 级别 14 或更高版本并且未使用 ActionbarSherlock，则此代码`onCreateOptionsMenu`将禁用向上按钮、删除左侧插入符号并删除图标：

```
ActionBar actionBar = getActionBar();
if (actionBar != null) {
    actionBar.setHomeButtonEnabled(false); // disable the button
    actionBar.setDisplayHomeAsUpEnabled(false); // remove the left caret
    actionBar.setDisplayShowHomeEnabled(false); // remove the icon
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T19:01:22.350

你快到了。要完全隐藏图标/徽标，请使用[`setDisplayShowHomeEnabled(false)`](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowHomeEnabled%28boolean%29). 您正在使用的呼叫只是删除了指示图标也充当“向上”按钮的小箭头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-04T12:07:00.490

这对我有用，尽管上述解决方案略有变化

```
android.support.v7.app.ActionBar actionBar = getSupportActionBar();
        if (actionBar != null) {
            actionBar.setHomeButtonEnabled(false); // disable the button
            actionBar.setDisplayHomeAsUpEnabled(false); // remove the left caret
            actionBar.setDisplayShowHomeEnabled(false); // remove the icon
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-09T20:57:19.610

虽然这是一篇较旧的帖子，但我想分享一个对我有用的答案。

要在操作栏中隐藏 UP 按钮，请在 OnCreateOptionsMenu 中使用以下命令：

```
if (getSupportActionBar() != 
           getSupportActionBar().hide();
       } 
```

要删除操作栏中的 UP 按钮，请在 OnCreateOptionsMenu 中使用以下内容：

```
if (getSupportActionBar() != 
           getSupportActionBar().setDisplayHomeAsUpEnabled(false);
       } 
```

希望对新手有所帮助。

# forms - 使用 preg_match 进行表单验证

> ID：15055273
> 
> 赞同：1
> 
> 时间：2013-02-24T18:49:43.150
> 
> 标签：forms, validation

我创建了一个表单，用于获取有关他离开的城市的用户数据。该表单将数据存储在一个名为 profile 的表中。我正在使用一个将数据插入配置文件表的函数。如果已经有数据，该函数只会更新表。如果用户没有在 city 字段中插入数据并按下提交，表格将继续保留之前的数据，因为没有提交。

在表单中，我想进行验证，以便用户仅插入 az 或空格字符。

我使用以下代码进行验证：

```
if(  empty($_POST) === false  ){

  if(  empty($errors) === true  ){

   if( preg_match('/^[a-zA-Z ]+$/', $_POST['city']) ===0 ){
     $errors[]='<font color="#963">City must only contains a-z and spaces</font>';
     }

    }
   } 
```

有用！但是现在的问题是，如果用户将表单留空并按提交，上面的代码会强制他放置数据（说：城市必须只包含 az 和空格）。仅当用户输入数据时，如何使用上述代码验证表单。如果没有，那么继续没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:56:13.597

您甚至可以在不产生错误的情况下执行此操作。代替

```
if( preg_match('/^[a-zA-Z ]+$/', $_POST['city']) ===0 ){ 
```

和

```
$_POST['city'] = preg_replace("&[^a-zA-Z ]&","",$_POST['city']); 
```

这将在插入数据库之前将所有非小写字母和非空格替换为空。

**编辑：**

如果您仍想生成错误，请使用

```
if( preg_match("&[^a-zA-Z ]&",$_POST['city']) ){
    $errors[]='<font color="#963">City must only contains a-z and spaces</font>';
} 
```

在 preg_replace 之前。

# php - 浏览器/手机检测有哪些可用的解决方案

> ID：15055277
> 
> 赞同：6
> 
> 时间：2013-02-24T18:49:59.440
> 
> 标签：php, javascript, jquery, html, jquery-mobile

我正在为各种移动平台创建一个 phonegap 应用程序，我想知道目前浏览器/手机检测的最佳解决方案是什么？

我应该使用服务器还是客户端检测，还是可以通过媒体类型屏幕宽度使用 css 解决方案？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-24T18:56:50.617

## 变化：

*   06.03.2013 - 在 WURFL 章节中添加一些评论

## 介绍 ：

可用的解决方案很少，但我只会命名开源的，至少是主要用于 jQuery/jQuery Mobile 的解决方案。还要注意，这个话题有可能引发一场战争。一方面，我们有服务器端检测的支持者，他们的社区维护的数据库，另一方面，我们有客户端的支持者，他们的浏览器嗅探。

## 服务器端：

**[WURFL](http://wurfl.sourceforge.net/apis.php)** -

> WURFL（无线通用资源文件）创建于 2002 年，是一种流行的开源框架，旨在为移动 Web 开发人员和移动生态系统中的其他利益相关者解决设备碎片化问题。WURFL 一直是并且仍然是移动开发人员采用的事实上的标准设备描述存储库。WURFL 是开源的 (AGPL v3) 和 ScientiaMobile 的商标。

**好的 ：**

非常详细的检测，您可能会获得更多真正需要的数据。

良好的平台支持，API 可用于 Java、PHP 和 .Net。

**坏的 ：**

并不总是最新的，严重依赖社区

如果是 iPhone，则无法知道 iOS 版本，因此使用媒体类型查询来检测像素比率。

仅对非商业用途收费，旧版本仍可免费用于商业用途，但他们只能使用更新至 WURFL EULA 更改的数据库。

*   可以在这里找到：[http ://wurfl.sourceforge.net/apis.php](http://wurfl.sourceforge.net/apis.php)

**PHP 示例：**

```
<?php
    // Include the configuration file
    include_once './inc/wurfl_config_standard.php';

    $wurflInfo = $wurflManager->getWURFLInfo();

    if (isset($_GET['ua']) && trim($_GET['ua'])) {
        $ua = $_GET['ua'];
        $requestingDevice = $wurflManager->getDeviceForUserAgent($_GET['ua']);
    } else {
        $ua = $_SERVER['HTTP_USER_AGENT'];
        // This line detects the visiting device by looking at its HTTP Request ($_SERVER)
        $requestingDevice = $wurflManager->getDeviceForHttpRequest($_SERVER);
    }
?>  
<html>
<head>
    <title>WURFL PHP API Example</title>
</head>
<body>
    <h3>WURFL XML INFO</h3>
    <ul>
        <li><h4>VERSION: <?php echo $wurflInfo->version; ?> </h4></li>
    </ul>
    <div id="content">
        User Agent: <b> <?php echo htmlspecialchars($ua); ?> </b>
        <ul>
            <li>ID: <?php echo $requestingDevice->id; ?> </li>
            <li>Brand Name: <?php echo $requestingDevice->getCapability('brand_name'); ?> </li>
            <li>Model Name: <?php echo $requestingDevice->getCapability('model_name'); ?> </li>
            <li>Marketing Name: <?php echo $requestingDevice->getCapability('marketing_name'); ?> </li>
            <li>Preferred Markup: <?php echo $requestingDevice->getCapability('preferred_markup'); ?> </li>
            <li>Resolution Width: <?php echo $requestingDevice->getCapability('resolution_width'); ?> </li>
            <li>Resolution Height: <?php echo $requestingDevice->getCapability('resolution_height'); ?> </li>
        </ul>
        <p><b>Query WURFL by providing the user agent:</b></p>
        <form method="get" action="index.php">
            <div>User Agent: <input type="text" name="ua" size="100" value="<?php echo isset($_GET['ua'])? htmlspecialchars($_GET['ua']): ''; ?>" />
            <input type="submit" /></div>
        </form>
    </div>
</body>
</html> 
```

如果要自定义此代码，请更改**wurfl_config_standard.php**文件中的配置参数。

* * *

**[Modernizr - 服务器](https://github.com/jamesgpearce/modernizr-server)**-

> Modernizr 是了解用户浏览器功能的好方法。但是，您只能在浏览器本身上访问其 API，这意味着您无法轻松地从了解服务器逻辑中的浏览器功能中受益。modernizr-server 库是一种将 Modernizr 浏览器数据引入服务器脚本环境的方法。

**好的 ：**

像 WURFL 非常详细的检测，但我们需要考虑到它是为不同目的而构建的 WURFL。

**坏的 ：**

仅在 PHP 上受支持，但有时这已经足够了。

**例子 ：**

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Modernizr Server Example</title>
</head>
<body>
<?php
    include('modernizr-server.php');

    print 'The server knows:';
    foreach($modernizr as $feature=>$value) {
        print "<br/> $feature: "; print_r($value);
    }
?>
</body>
</html> 
```

*   可以在这里找到：[https ://github.com/jamesgpearce/modernizr-server](https://github.com/jamesgpearce/modernizr-server)

## 客户端：

**[现代化者](http://modernizr.com/)**-

> 利用很酷的新 Web 技术非常有趣，除非您必须支持落后的浏览器。Modernizr 使您可以轻松编写条件 JavaScript 和 CSS 来处理每种情况，无论浏览器是否支持某个功能。它非常适合轻松进行渐进增强。

**好的 ：**

只有客户端，服务器端组件不存在

对于 12kb 的 javascript 框架来说，速度很快但仍然很大。由于其模块化，它可以变得更小，具体取决于您的需要。

**坏的 ：**

只能做这么多，更少的信息然后服务器端检测。

Modernizr 本身是了解用户浏览器功能的好方法。但是，您只能在浏览器本身上访问其 API，这意味着您无法轻松地从了解服务器逻辑中的浏览器功能中受益。

*   可以在这里找到：http: [//modernizr.com/](http://modernizr.com/)

例子 ：

```
 <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <title>Modernizr Example</title>
      <script src="modernizr.min.js"></script>
    </head>
    <body>
      <script>
        if (Modernizr.canvas) {
          // supported
        } else {
          // no native canvas support available :(
        }  
      </script>
    </body>
    </html> 
```

**[基于 JavaScript 的浏览器嗅探](http://www.quirksmode.org/js/detect.html)**

> 有争议的是，这可能（在学术上）是检测移动设备的最糟糕的方法，但它确实有其优点。

**好的 ：**

简单的

**坏的 ：**

从哪里开始

**例子 ：**

```
<script type="text/javascript">     
    var agent = navigator.userAgent;      
    var isWebkit = (agent.indexOf("AppleWebKit") > 0);      
    var isIPad = (agent.indexOf("iPad") > 0);      
    var isIOS = (agent.indexOf("iPhone") > 0 || agent.indexOf("iPod") > 0);     
    var isAndroid = (agent.indexOf("Android")  > 0);     
    var isNewBlackBerry = (agent.indexOf("AppleWebKit") > 0 && agent.indexOf("BlackBerry") > 0);     
    var isWebOS = (agent.indexOf("webOS") > 0);      
    var isWindowsMobile = (agent.indexOf("IEMobile") > 0);     
    var isSmallScreen = (screen.width < 767 || (isAndroid && screen.width < 1000));     
    var isUnknownMobile = (isWebkit && isSmallScreen);     
    var isMobile = (isIOS || isAndroid || isNewBlackBerry || isWebOS || isWindowsMobile || isUnknownMobile);     
    var isTablet = (isIPad || (isMobile && !isSmallScreen));     

    if ( isMobile && isSmallScreen && document.cookie.indexOf( "mobileFullSiteClicked=") < 0 ) mobileRedirect(); 
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T20:29:40.327

这可能不是最好的解决方案，但我将此功能用于我个人在 javascript 中的使用。

顺便说一句，@Gajotres 感谢您提供深入而有用的信息。

```
function mobilMi()
{
  if( navigator.userAgent.match(/Android/i) ||
   navigator.userAgent.match(/webOS/i) ||
   navigator.userAgent.match(/iPhone/i) ||
   navigator.userAgent.match(/iPod/i)||
   navigator.userAgent.match(/iPad/i)
   ){
    return 1;
  }
  else
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T09:07:51.823

我编写了类似这样的代码来获取设备操作系统类型... $test 将是用户代理的字符串

```
 if (preg_match("/linux/i", $test) && preg_match("/android/i", $test)) {
        $device_type = 'Android';
    } else if (preg_match("/windows phone/i", $test)){
        $device_type = '<font size="6">Windows Mobile</font>';
    } else if (preg_match("/windows nt/i", $test)){
        $device_type = 'Windows';
    } else if (preg_match("/linux/i", $test)){
        $device_type = 'Linux';
    } else if (preg_match("/macintosh/i", $test)){
        $device_type = 'Macintosh';
    } else if (preg_match("/iphone/i", $test)){
        $device_type = 'iPhone';
    } else if (preg_match("/ipad/i", $test)){
        $device_type = 'iPad';
    }  else if (preg_match("/symbian/i", $test)){
        $device_type = 'Symbian';
    } else if (preg_match("/blackberry/i", $test)){
        $device_type = 'Blackberry';
    } else
        $device_type = 'None'; 
```

我认为您需要了解模式并获取关键字。使用 WURFL 有时无法得到您想要的。

# ios - 如何使用 StoreKit 更新订阅？

> ID：15055278
> 
> 赞同：9
> 
> 时间：2013-02-24T18:50:17.360
> 
> 标签：ios, objective-c, nstimer, storekit

我正在尝试制定处理自动续订部分的最佳机制，以便它处理订阅的延续到下一个时期。

处理这个的最好方法是什么？

我是否应该设置一个 NSTimer 来检查是否已达到当前 expires_date .. 然后尝试发送购买请求？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T17:24:49.540

Apple iOS 应用内购买提供产品“自动续订订阅”。此产品将由 Apple 自动更新。

当您使用此类产品时，您的应用必须验证自动续订订阅是否仍然有效，因为用户可能已取消订阅。当用户取消订阅时，订阅将一直有效，直到订阅期结束。

要验证自动续订订阅，您必须使用购买收据和在 iTunes Connect 中为您的应用内购买生成的共享密钥。您必须将这两件事发布到 App Store。这将返回一个 JSON，您必须从该数据中获取“订阅的最新购买日期”。从该日期开始，您必须计算到期日期并验证或使订阅无效。

您可以在应用程序启动后和/或模型更新后进行所有这些验证。

## 附加信息

您可以在 Apple 文档中找到有关自动续订订阅的信息。此外，您可以查看[MKStoreKit](http://mk.sg/8j)，它是一个框架，可减少您为使用 StoreKit 而必须编写的代码量，并支持自动更新订阅。

# asp.net - 建立与 SQL Server 的连接错误

> ID：15055280
> 
> 赞同：0
> 
> 时间：2013-02-24T18:50:31.927
> 
> 标签：asp.net, sql-server

我今天打开了我的网络项目，由于某种原因我无法访问我的数据库文件。`exception`每当我尝试添加、编辑或刷新我的数据库时，我都会得到以下信息：

> 与 SQL Server 建立连接时发生与网络相关的实例特定错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。

我查看了我的连接字符串是否有任何拼写错误，并删除了我的数据库并将其替换到我所在的文件夹中。我似乎无法找到解决此问题的方法，因此我们将不胜感激。我正在为这个 Web 项目使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:52:49.023

这听起来就像我前一段时间遇到的同样的问题。我的问题是我的 SQL Service Pack 1 没有正确安装，所以我必须安装 Microsoft SQL Server System CLR Types、Microsoft SQL Server 2008 Management Objects 和 Microsoft SQL Server 2008 Native Client。之后，我可以创建新的 SQLdatasources，但我无法编辑我之前遇到的问题。我不得不以安全模式重新启动计算机并删除我的 SQLEXPRESS 文件夹，然后在 Visual Studio 中重新创建数据库连接。当我完成时，一切正常。

这是我下载的网站，[http://blogs.cametoofar.com/post/cannot-load-file-or-assembly-microsoftsqlservermanagementsdksfc.aspx](http://blogs.cametoofar.com/post/cannot-load-file-or-assembly-microsoftsqlservermanagementsdksfc.aspx)

# javascript - 停止滚动条上的可拖动功能

> ID：15055286
> 
> 赞同：1
> 
> 时间：2013-02-24T18:50:47.517
> 
> 标签：javascript, jquery, html, jquery-ui

我有这个名为“标题”的 div。它是可拖动的并且有一个滚动条。为了防止在单击滚动条时拖动 div，我在下面有此代码，但是如果拇指位于绝对顶部并且有人单击顶部箭头或用拇指向上滚动，则它无效。然后它将开始拖动。底部也一样。我怎样才能防止这种情况发生。谢谢。

```
$("#header").draggable({
    start: function() {
        if ($(this).data("scrolled")) {
            $(this).data("scrolled", false).trigger("mouseup");
            return false;
        }
    }
}).find("*").andSelf().scroll(function() {               

    $(this).parents(".ui-draggable").data("scrolled", true);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:33:40.910

如果您使用“取消”选项，您可以轻松解决。

请查看他们的官方文档 [http://api.jqueryui.com/draggable/#option-cancel](http://api.jqueryui.com/draggable/#option-cancel)

# c# - XNA 游戏分辨率高于电脑分辨率 - 会导致问题吗？

> ID：15055292
> 
> 赞同：3
> 
> 时间：2013-02-24T18:51:09.910
> 
> 标签：c#, windows, xna, resolution

在为 PC 开发 xna 游戏时，一个问题是人们使用不同的分辨率。

但是当目标电脑的分辨率低于游戏时会发生什么？我必须使用矢量图形吗？

使用较低分辨率的唯一方法是缩小视口，但我不想这样做。我测试了将分辨率设置为超高清，但它在我的全高清屏幕上保持全高清。全高清只是xna的最大值还是游戏在较低时自动使用屏幕分辨率？

游戏全屏运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:13:59.460

此问题的常见解决方案是始终将游戏渲染为设定的分辨率，然后缩放整个屏幕图像以适应。如何做到这一点的例子可以在[XNA resize window without increase resolution中找到](https://stackoverflow.com/questions/7591466/xna-resize-window-without-increasing-resolution/7592112#7592112)

# c++ - 如何链接到 cpp-netlib

> ID：15055298
> 
> 赞同：12
> 
> 时间：2013-02-24T18:51:48.667
> 
> 标签：c++, boost, linker, cpp-netlib

我想将库 cpp-netlib 用于 C++ 项目。因此，我在 homebrew 的帮助下安装了 boost 库（操作系统是 Mac OS X 10.8）。然后我从项目主页下载了cpp-netlib，使用cmake为g++创建了Makefile，并成功应用了make。“make test”通过了所有的测试。然后我将cpp-netlib的include文件夹复制到boost目录中。

所以这就是麻烦开始的时候：我试图编译文档的第一个示例[http-client](http://cpp-netlib.org/0.9.4/examples/http/http_client.html)但无法让它工作。当我使用

```
g++ test.cpp -o out -I/usr/local/Cellar/boost/1.53.0/include 
-L/usr/local/Cellar/boost/1.53.0/lib 
-lboost_system-mt -lboost_filesystem-mt -lboost_thread-mt 
```

我收到了这些链接器错误：

```
Undefined symbols for architecture x86_64:
  "boost::network::uri::detail::parse(__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, boost::network::uri::detail::uri_parts<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&)", referenced from:
      boost::network::uri::uri::parse()  in ccs87Dq3.o
  "boost::network::http::impl::normal_delegate::normal_delegate(boost::asio::io_service&)", referenced from:
      boost::network::http::impl::connection_delegate_factory<boost::network::http::tags::http_async_8bit_udp_resolve>::new_connection_delegate(boost::asio::io_service&, bool, boost::optional<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, boost::optional<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >)in ccs87Dq3.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我真的使用了搜索功能，但我找不到任何解决我的问题的方法。我究竟做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T21:37:56.203

构建 cpp-netlib (>=0.9.3) 后应该有 3 个静态库：

```
libcppnetlib-client-connections.a
libcppnetlib-server-parsers.a
libcppnetlib-uri.a 
```

**在构建您的 http-client 项目时，您应该为 cpp-netlib (-L)**和要链接**(-l)**的库指定一个库路径：`cppnetlib-uri`和`libcppnetlib-client-connections`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-25T22:49:42.263

这对我有用。您将需要修改某些部分以处理不同版本的 boost、不同的安装路径等。

```
g++ -o demo \
    demo.cpp \
    -lcppnetlib-uri \
    -lcppnetlib-server-parsers \
    -lcppnetlib-client-connections \
    -lboost_thread-mt \
    -lboost_system-mt \
    -lssl \
    -lcrypto \
    -I/usr/local/include \
    -L/usr/local/lib 
```

如果您正在编写服务器端代码，那么我想您还需要包含`-lcppnetlib-server-parsers`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T05:11:21.017

如果有人对 Visual Studio 有同样的问题，请将库输入提供给链接器。

项目属性 > 链接器 > 输入 >

```
libcppnetlib-client-connectionsd.lib
libcppnetlib-urid.lib 
```

用于调试配置和

```
libcppnetlib-client-connections.lib
libcppnetlib-uri.lib 
```

用于发布配置。

在此处指定库路径，

项目属性 > 链接器 > 常规 > 其他包含目录

# ubuntu - 无法在 UBUNTU 中挂载 SAMSUNG_Android

> ID：15055304
> 
> 赞同：38
> 
> 时间：2013-02-24T18:52:07.543
> 
> 标签：ubuntu

当我在 android 手机中启用`USB debugging`并将其连接到 Ubuntu 时，我会弹出类似

```
Unable to mount SAMSUNG_Android
Error initializing camera: -60: Could not lock the device 
```

如何禁用或忽略弹出窗口？在 Windows 中工作正常；问题只是在 Ubuntu

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-06T21:57:32.687

问题是 Ubuntu 还没有原生支持 MTP。我希望在下一个 13.04 版本中他们能解决这个烦人的问题。同时，您可以手动将 MTP 支持添加到您的 ubuntu 的 PPA 并无缝访问您的 android 设备。

在终端中，发出：

```
sudo add-apt-repository ppa:langdalepl/gvfs-mtp
sudo apt-get update 
```

然后

```
sudo apt-get install gvfs 
```

重启你的电脑。您可能需要在 Android 设备上打开 USB 调试。下次插入时，应该不会出现烦人的错误弹出窗口，它应该在 Nautilus 中显示为单个设备，其中 SD 卡和内部存储器作为子文件夹，而不是两个已安装的设备。数据传输应该可以工作，但是您可能在从某些应用程序访问设备时遇到问题，在这种情况下，您可能想尝试一下[Go-mtpfs](http://www.webupd8.org/2012/12/how-to-mount-android-40-ubuntu-go-mtpfs.html)。它需要手动安装/卸载设备（只需单击两次即可完成），但是一切都应该像访问普通文件夹一样快速和简单。

希望对您有所帮助。这个对我有用。Ubuntu 12.04、三星 Galaxy S III 和 Nexus 7。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-07-09T17:31:09.280

在 Ubuntu 14.04 LTS 上，我只需要

```
sudo apt-get install mtpfs 
```

像魔术一样工作——甚至不需要拔掉我的手机。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-10-05T14:52:15.553

今天我用 Wiko DARKMOON 解决了​​这个问题。linux的gvfs解决方案的问题是，文件“/lib/udev/rules.d/69-libmtp.rules”中没有我的设备的映射

注意：您可能需要启用“usb 调试”才能通过“lsub”查看设备。这可以这样做：

*   Android 2.3 - Gingerbread：设置 > 应用程序 > 开发 > USB 调试
*   Android 4.0 - Ice Cream Sandwich：设置 > 开发人员选项 > USB 调试
*   Android 4.1 - Jelly Bean：设置 > 开发人员选项 > USB 调试
*   Android 4.2 或更高版本 - 果冻豆：
    *   设置 > 关于
    *   滚动到内部版本号并点击它 7 次
    *   现在您将在“设置”-菜单中找到“开发者选项”
    *   转到它并启用“USB调试”

接下来的步骤帮助我在已安装“gfvs”的 Linux Mint 上自动挂载我的设备：

1.  使用 lsub 查找 vendorid 和 productid：

    ```
    $> lsusb
    Bus 001 Device 013: ID 0bb4:0c02 HTC (High Tech Computer Corp.) Dream / ADP1 / G1 / Magic / Tattoo (Debug)
    ... 
    ```

    “0bb4”是供应商 ID，“0c02”是产品 ID

2.  打开文件“/lib/udev/rules.d/69-libmtp.rules”进行编辑：

    ```
    $> gksudo gedit /lib/udev/rules.d/69-libmtp.rules 
    ```

3.  插入新设备，复制前一个设备并更正 id 并保存文件：

    ```
    # Wiko DARKMOON
    ATTR{idVendor}=="0bb4", ATTR{idProduct}=="0c02", SYMLINK+="libmtp-%k", MODE="660", GROUP="audio", ENV{ID_MTP_DEVICE}="1", ENV{ID_MEDIA_PLAYER}="1" 
    ```

4.  拔下智能手机并重新插入。您的 Linux 应该像安装其他设备一样安装您的设备。

# javascript - 单击元素时引导崩溃中断

> ID：15055308
> 
> 赞同：1
> 
> 时间：2013-02-24T18:52:14.800
> 
> 标签：javascript, jquery-plugins, twitter-bootstrap, accordion, collapse

我不确定出了什么问题，因为这与 bootstrap 网站中的非常相似

单击第一个元素（列表 A）后，它几乎会中断。其他元素都可以，但是一旦单击列表 A，它就会中断。

```
<div class="accordion" id="notification_types">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-parent="#notification_types"
            data-toggle="collapse" href="#a">List A</a>
        </div>

        <div class="accordion-body collapse" id="a" style="height: 0px;">
        </div>
    </div>

    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-parent="#notification_types"
            data-toggle="collapse" href="#b">List B</a>
        </div>

        <div class="accordion-body collapse" id="b" style="height: 0px;">
            <div class="accordion-inner" dir="auto" id="a123">
                <a data-method="get" data-remote="true" href="/123">123</a>
            </div>
        </div>
    </div>

    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-parent="#notification_types"
            data-toggle="collapse" href="#c">List C</a>
        </div>

        <div class="accordion-body collapse" id="c" style="height: 0px;">
            <div class="accordion-inner" dir="auto" id="a456">
                <a data-method="get" data-remote="true" href="/456">456</a>
            </div>
        </div>
    </div>
</div> 
```

我在 jsfiddle 中做了一个例子 - [http://jsfiddle.net/uycBa/157/](http://jsfiddle.net/uycBa/157/) 测试时，之前按 List B 或 C，因为按 A 会破坏整个事情......

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:26:50.497

将 div 添加到第一个手风琴主体有效。找不到原因。

```
<div class="accordion" id="notification_types">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-parent="#notification_types"
            data-toggle="collapse" href="#a">List A</a>
        </div>

        <div class="accordion-body collapse" id="a" style="height: 0px;">
           <div class="accordion-inner">  
           </div>
        </div>
    </div>

    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-parent="#notification_types"
            data-toggle="collapse" href="#b">List B</a>
        </div>

        <div class="accordion-body collapse" id="b" style="height: 0px;">
            <div class="accordion-inner" dir="auto" id="a123">
                <a data-method="get" data-remote="true" href="/123">123</a>
            </div>
        </div>
    </div>

    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle" data-parent="#notification_types"
            data-toggle="collapse" href="#c">List C</a>
        </div>

        <div class="accordion-body collapse" id="c" style="height: 0px;">
            <div class="accordion-inner" dir="auto" id="a456">
                <a data-method="get" data-remote="true" href="/456">456</a>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:40:43.210

已知错误：[https ://github.com/twitter/bootstrap/issues/5849](https://github.com/twitter/bootstrap/issues/5849)

* * *

过渡阻止插件，因为您的第一个可折叠没有高度：

插件处于*过渡*状态，正在等待过渡结束，但是由于元素的高度为0，过渡从未开始也不会结束（我认为是这样）。当插件处于这种状态时，它不会做任何事情。

如果您停用转换，您可以看到它：http: [//jsfiddle.net/Sherbrow/uycBa/158/](http://jsfiddle.net/Sherbrow/uycBa/158/)

* * *

您可以通过调用事件来停止此`preventDefault()`操作：`show`

```
$('.accordion-body.empty').on('show', function(event) {
    event.preventDefault();
}); 
```

（`empty`也添加在标记中以定位空手风琴体）

演示：http: [//jsfiddle.net/Sherbrow/uycBa/159/](http://jsfiddle.net/Sherbrow/uycBa/159/)

# c++ - 这是使用升压信号的正确和适当的方式吗？

> ID：15055313
> 
> 赞同：0
> 
> 时间：2013-02-24T18:52:42.927
> 
> 标签：c++, boost, boost-signals, boost-signals2

我正在创建一个 MVC 应用程序，并且我希望模型能够将输出文本发送到要显示的 GUI。

一些人推荐了函数指针，但我现在了解到，如果你传递一个成员函数的函数指针，你还必须传递一个指向对象的指针（为什么不只传递对象指针以便可以在其上调用方法呢？ )

无论如何，我也被推荐使用 boost::signals2。我已经实现了一个非常简单的工作示例。我基本上将信号绑定到 GUI 对象的函数。然后将指向信号的指针传递给可以触发信号的对象。请参阅下面的代码...

```
struct GUI
{
    void talk()
    {
        cout << "hello" << endl;
    }
};

class Person {
public:
    Person(){}
    Person(const signal<void ()>* sig) : sig(sig){}
    virtual ~Person(){}

    void testSig()
    {
       (*sig)();
    }

private:
    const signal<void ()>* sig;
};

int main() {
    boost::signals2::signal<void ()> sig;
    GUI gui;
    sig.boost::signals2::connect(boost::bind(&GUI::talk, &gui));

    Person tom(&sig);
    tom.testSig();
} 
```

由于我是信号的初学者，我不完全确定我是否按照它们的预期使用它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T21:11:37.067

为什么不将信号放在 person 类中？你可以这样做：

```
struct GUI
{
    void talk() {
        cout << "hello" << endl;
    }
};

class Person {
    boost::signals2::signal<void ()> sig_;
public:
    Person() {}
    virtual ~Person() {}

    template <typename F>
    void connect(F f) {
        sig_.connect(f);
    }

    void testSig() {
       sig_();
    }
};

int main()
{
    GUI gui;
    Person tom;

    tom.connect(boost::bind(&GUI::talk, &gui));
    tom.testSig();
} 
```

# .net - SignalR 跨多个页面聊天

> ID：15055317
> 
> 赞同：0
> 
> 时间：2013-02-24T18:52:55.467
> 
> 标签：.net, chat, signalr

我正在开发一个学习管理系统，我对考试模块有一个要求，让学生能够在考试期间通过与教授的一对一聊天来提问。基本上学生会问一个与考试问题相关的问题，然后教授会回应那个特定的学生。我认为这将是试用 SignalR 的理想用例。

因此，我在此链接（[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)）之后设置了基本示例，但考虑到我的继续进行，我感到很困惑要求是：

1.  对话总是在教授和提出原始问题的单个学生之间进行。
2.  教授查看/接收问题的页面和学生提出问题的页面是两个不同的页面。

所以我的问题是：

1.  SignalR 可以用于将客户端在一个页面上发布的消息传递到另一个页面上的客户端的位置吗？
2.  我如何最好通过我的应用程序中的用户 ID 而不是 SignalR 客户端的连接 ID 来定位特定客户端？有没有办法设置connectionID以及如何设置？这里的正确方法是什么？显然，我可以将我的用户 ID 传递给客户端，并使用某种 JavaScript 来验证返回的用户 ID 是否与客户端的用户 ID 相同。但这是正确的方法吗？

我为冗长的文字墙道歉，任何建议将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:24:30.543

1.  是的，您甚至可以使用 SignalR 将消息传递给完全独立域上的客户端。
2.  Clients.Client("您要发送到的连接 ID").
    不，您可以通过 Context.ConnectionId 访问它。[管理连接 ID SignalR 1.0 beta 连接工厂](https://stackoverflow.com/questions/14350158/signalr-1-0-beta-connection-factory/14350859#14350859)
    的最佳实践。 你永远不想拥有验证客户端，因为它可以很容易地改变，做身份验证服务器端。

最后，如果您正在寻找一个关于 Chat checkout [JabbR](http://jabbr.net)的示例，它是开源的！[https://github.com/davidfowl/JabbR](https://github.com/davidfowl/JabbR)。

希望这可以帮助！

# matlab - 从分组数据中绘制表面

> ID：15055322
> 
> 赞同：0
> 
> 时间：2013-02-24T18:53:36.950
> 
> 标签：matlab, plot

我将文本导入**矩阵**。我需要的是把它画成一个表面

```
1,1,1
1,2,3
1,3,2
2,1,4
2,4,6
3,1,2
3,2,1
3,4,2
... 
```

如何将导入的矩阵转换为可用于*冲浪*的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:43:08.467

[`scatter3`](http://www.mathworks.com/help/matlab/ref/scatter3.html)如果确实有 3 个坐标 x、y、z ，则可以使用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:00:45.410

如果您真的想使用`surf`，则需要将分散的数据插入到常规网格中。尝试使用`meshgrid`在您的独立坐标 x 和 y 中生成规则网格，然后使用`TriScatteredInterp`将您的相关 z 数据插入到您的规则网格中。然后可以将这个插值数据与“surf”一起使用。

# javascript - 让一个 HTML 元素镜像另一个最优雅的方式？

> ID：15055323
> 
> 赞同：3
> 
> 时间：2013-02-24T18:53:55.250
> 
> 标签：javascript, html

如果我有两个 HTML 元素应该始终包含相同的内部 HTML 文本，那么同时更新它们的最优雅的方法是什么？

例如：

```
<head>
    <title id="pageTitle">My Application</title>
</head>
<body>
    <h1 id="screenTitle">My Application</h1>
</body> 
```

我希望 screenTitle 和 pageTitle 的 innerHTML 在 JavaScript 函数更改其中之一时保持相同。

我知道我可以遍历 pageTitle 和 screenTitle 元素，每当我更改字符串“我的应用程序”时更新它们中的每一个，但有没有更优雅的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:30:05.107

`document.title.innerHTML`在 IE 中是只读的。这应该是一种跨浏览器的方法：

```
document.getElementById('screenTitle').innerHTML = document.title = 'My Application'; 
```

当然，您可以使用变量来代替文字值。

如果你真的需要一些“优雅”的东西（=== 异国情调），你可以使用[setter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/set)：

```
var page = {
    set title(text) {
        document.getElementById('screenTitle').innerHTML = document.title = text;
    }
}; 
```

当您需要更改标题时，只需设置它：`page.title = newTitle;`. 只有您需要关心的是，您可以`page`从当前范围内引用对象。此外，这仅适用于现代浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:56:39.147

使用一个函数来封装对这两个元素的写入。因此，您的其余代码将使用以下函数，而不是直接使用 DOM 方法：

```
function setTitle(newTitle)
{
    document.getElementById('pageTitle').innerHTML = newTitle;
    document.getElementById('screenTitle').innerHTML = newTitle;
} 
```

当然，这可以优化/干燥/重构/过度设计令人作呕......

```
function setTitle(newTitle)
{
    if (setTitle.elements)
    {
        var id = document.getElementByIdl
        setTitle.elements = [id('pageTitle'), id('screenTitle')];
    }

    setTitle.elements.forEach(function (elt)
    {
        elt.innerHTML = newTitle;
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:20:27.403

只要您控制要修改元素的所有代码，就应该创建一个同时更新两者的 JS 方法。就像是：

```
function updateElementGroup( newInnerHTML ) {
    document.getElementById( 'pageTitle' ).innerHTML = newInnerHTML;
    document.getElementById( 'screenTitle' ).innerHTML = newInnerHTM;
} 
```

您可以像这样使用它：

```
updateElementGroup( 'New Text' ); 
```

如果您无法控制所有代码，则可以设置一些侦听器以在一个更改时捕获并相应地更新另一个，如下所示：

```
var isUpdating = false;
var elements = [
    document.getElementById( 'pageTitle' ),
    document.getElementById( 'screenTitle' ),
];

for ( i in elements ) {
    elements[i].addEventListener( 'DOMCharacterDataModified', function( evt ) {
        if ( isUpdating ) {
            return;
        }

        isUpdating = true;

        for ( i in elements ) {
            elements[i].innerHTML = evt.newValue;
        }

        isUpdating = false;
    } );
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-24T19:04:22.947

使用 jQuery：

```
$('#pageTitle').bind('DOMSubtreeModified', function() {
    if ($('#pageTitle').html() != $('#screenTitle').html())
        $('#screenTitle').html($('#pageTitle').html());
});

$('#screenTitle').bind('DOMSubtreeModified', function() {
    if ($('#pageTitle').html() != $('#screenTitle').html())
        $('#pageTitle').html($('#screenTitle').html());
}); 
```

# c# - 权限被拒绝 C# 注册表

> ID：15055331
> 
> 赞同：-3
> 
> 时间：2013-02-24T18:54:46.323
> 
> 标签：c#, windows-8

我正在尝试添加一些注册表项，以允许我的应用程序在单击 IE 中的特定文件扩展名时打开。（请参阅[如何将超链接与我们的程序连接](https://stackoverflow.com/questions/14997114/how-to-connect-hyperlink-with-our-program)）

但是，我收到“权限被拒绝”消息。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T18:58:37.770

以管理员身份运行您的程序。和/或重新设计它以不依赖非管理用户无法使用的注册表位置。

例如，整个 HKEY_LOCAL_MACHINE 树是有特权的。

# c# - 将依赖属性添加到自定义控件会导致样式出现奇怪的错误

> ID：15055332
> 
> 赞同：1
> 
> 时间：2013-02-24T18:54:47.087
> 
> 标签：c#, .net, silverlight, xaml

我正在尝试创建一个从 ListBoxItem 扩展的自定义控件，如下所示：

```
public class MainNavListBoxItem : ListBoxItem
{
    public MainNavListBoxItem()
    {
        this.DefaultStyleKey = typeof(MainNavListBoxItem);
    }
} 
```

我有一个在 ResourceDictionary 中定义的样式，如下所示：

```
<Style TargetType="assets:MainNavListBoxItem">
        <Setter Property="Padding" Value="3"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Top"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="TabNavigation" Value="Local"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="assets:MainNavListBoxItem">
                    <Grid Height="50">
                        <VisualStateManager.VisualStateGroups>
... 
```

现在它像这样编译并运行良好，但是一旦我向`MainNavListBoxItem`类添加额外的依赖属性，我就会开始收到如下错误：

> 无法从文本“填充”创建“System.Windows.DependencyProperty”。

如果我在样式中重新排列 Setter 标签，它总是会报告最上面的标签。

以及我的依赖属性代码供参考：

```
public ImageSource ImageDark
{
    get { return (ImageSource)GetValue(ImageDarkProperty); }
    set { SetValue(ImageDarkProperty, value); }
}
public static readonly DependencyProperty ImageDarkProperty =
    DependencyProperty.Register("ImageDark", typeof(ImageSource), typeof(MainNavListBoxItem), new PropertyMetadata(0)); 
```

这里发生了什么？！我希望能够在样式中使用这个 ImageDark 依赖属性！

我已经对此错误进行了大量搜索，但似乎与此问题无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:25:21.307

这个问题是因为我忘记将`new PropertyMetadata(0)`我的依赖属性更改为`new PropertyMetadata(null)`. 谢谢肯特。

# mysql - MySQL 查询和复选框方法

> ID：15055336
> 
> 赞同：0
> 
> 时间：2013-02-24T18:54:55.953
> 
> 标签：mysql, sql, join, filter

**我的表：**

```
pno     name         lesson
-----------------------------
1       John         Math
1       John         Biology
2       Lisa         Biology
3       Emma         Math
3       Emma         Art
3       Emma         Pyhsic 
```

您可以将课程视为“复选框”，当用户检查课程时，它将过滤我的表格。问题就在这里，我想过滤只选数学和生物学！

* * *

当用户只检查数学时；

**我的过滤表：**

```
pno     name         lesson
-----------------------------
1       John         Math
3       Emma         Math 
```

* * *

当用户检查数学和生物学时；

**我的过滤表：**

```
pno     name         lesson
-----------------------------
1       John         Math
1       John         Biology 
```

我的 HTML 设计是[http://jsbin.com/adarih/2/](http://jsbin.com/adarih/2/)

当用户检查数学和生物学时，我标记了石灰颜色。所以丽莎有生物学但没有数学。我不带丽莎。艾玛选修数学，但不选生物。我不带艾玛。

实际上，这似乎很容易。但这对我来说是至关重要的 sql 查询......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:03:01.497

我不能 100% 确定您想要返回什么结果，但是您可以通过如下查询获得具有数学和生物学的每个结果的不同 pno 和名称：

```
SELECT DISTINCT Table1.pno, Table1.name
FROM SomeTable Table1
  INNER JOIN SomeTable Table2 ON Table2.pno = Table1.pno AND Table2.lesson = 'Biology'
WHERE Table1.lesson = 'Math'
ORDER BY Table1.pno 
```

对于支持任意数量匹配的更灵活的查询，假设您只有一种课程类型（您可能希望在 pno 和课程上执行唯一键以保证这一点），您可以执行以下操作：

```
SELECT pno, name
FROM SomeTable
WHERE lesson IN ({Match List})
GROUP BY pno, name
HAVING COUNT(1) = {Total Number of options}
ORDER BY pno 
```

其中 {Match List} 是您的列表（例如原始问题中的“数学”、“生物学”），其中 {Total Number of options} 等于所有必须匹配的唯一值的数量（在此案子）。再次强调，这只有在每个 pno 的每节课都是独一无二的情况下才有效……如果不是，你就会得到误报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:05:30.073

you may looking for this

```
$sql="select * from your_table 
where lesson =  '$biology'";
                      ^^-------this is the variable of which they select from check box 
```

and when they select the other checkbox

you may add this

```
$sql .= "OR lesson= '$math' " ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:25:21.687

如果你想要同时学习数学和生物学的人的名单，这应该有效：

```
SELECT t1.pno, t1.name
FROM myTable t1
WHERE EXISTS
(
SELECT 1
FROM myTable t2
WHERE t1.pno = t2.pno
AND t2.lesson = 'Math'
)
AND EXISTS
(
SELECT 1
FROM myTable t3
WHERE t1.pno = t3.pno
AND t3.lesson = 'Biology'
) 
```

# translation - waf - 更新并生成翻译pot文件

> ID：15055337
> 
> 赞同：2
> 
> 时间：2013-02-24T18:55:09.010
> 
> 标签：translation, waf

是否有特定的 API 调用（可能未记录，此处未列出[http://docs.waf.googlecode.com/git/apidocs_16/tools/intltool.html](http://docs.waf.googlecode.com/git/apidocs_16/tools/intltool.html)）允许我创建和/或更新翻译模板？

还是我需要使用本机系统工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:31:52.453

我也找不到，所以我在我的主 wsript 文件中引入了一个选项。

```
opt.add_option('--update-po',                action='store_true', default=False, dest='update_po', help='Update localization files')
// ...
def shutdown(self):
    if Options.options.update_po:
        os.chdir('./po')
        try:
            try:
                size_old = os.stat (APPNAME + '.pot').st_size
            except:
                size_old = 0
            subprocess.call (['intltool-update', '-p', '-g', APPNAME])
            size_new = os.stat (APPNAME + '.pot').st_size
            if size_new <> size_old:
                Logs.info("Updated po template.")
                try:
                    command = 'intltool-update -r -g %s' % APPNAME
                    self.exec_command (command)
                    Logs.info("Updated translations.")
                except:
                    Logs.error("Failed to update translations.")
        except:
            traceback.print_exc(file=open("errlog.txt","a"))
            Logs.error("Failed to generate po template.")
            Logs.errors("Make sure intltool is installed.")
        os.chdir ('..') 
```

不幸的是，我还没有时间把它变成一个工具。在我的名单上。但是你可以在这里找到一个完整的样本：[https ://bazaar.launchpad.net/~diodon-team/diodon/trunk/view/head:/wscript](https://bazaar.launchpad.net/~diodon-team/diodon/trunk/view/head:/wscript)

# javascript - 将多个 javascript 值放入表中

> ID：15055339
> 
> 赞同：0
> 
> 时间：2013-02-24T18:55:21.850
> 
> 标签：javascript, jquery

我有一个脚本，将一组链接放入 1 帧，并检查它们的加载时间：

```
<script type="text/javascript">
$(document).ready(function(){   
var array = ['http://www.example1.come', 'http://www.example2.com', 'http://www.example3.com'];
var beforeLoad = (new Date()).getTime();
var loadTimes = [];
$('#1').on('load', function() {
   loadTimes.push((new Date()).getTime());                  
   $('#1').attr('src', array.pop());
    if (array.length === 0) { 
        $.each(loadTimes, function(index, value) {
           alert(value - beforeLoad); 
        });
    }
}).attr('src', array.pop());
});
</script> 
```

我想将所有值放入表中，而不是提醒它们。我的意思是将它们放在这里（创建 3x td 并在每个中放置加载时间值）：

```
<table>
  <tr>
   <?php for ($i=0; $i<=2; $i++){ ?>
    <td id="loadingtime<?php echo $i; ?>">  
    <?php  } ?>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:06:31.950

你的 PHP 循环有点坏了。但这没关系，因为它是不必要的 - 只需抽出 3 个 TD。

```
<table>
    <tr>
        <td id="loadingtime1">  
        </td>
        <td id="loadingtime2">  
        </td>
        <td id="loadingtime3">  
        </td>
    </tr>
</table> 
```

向表中添加 javascript 变量的捷径不是通过 PHP。您可以使用直接添加它们`$.().html`。

代替`alert(value - beforeLoad);`

采用：`$("#loadingtime"+index).html(value - beforeLoad);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:19:27.623

你可以在 jquery 而不是 php 中做到这一点。

```
$(document).ready(function(){   
    var array = ['http://www.example1.come', 'http://www.example2.com', 
                 'http://www.example3.com'];
    var beforeLoad = (new Date()).getTime();
    var loadTimes = [];
    $('#1').on('load', function() {
       loadTimes.push((new Date()).getTime());                  
       $('#1').attr('src', array.pop());
        if (array.length === 0) {
            var table = $('<table><tr></tr></table>');
            var tr = table.find('tr');
            $.each(loadTimes, function(index, value) {
               tr.append('<td>' + (value - beforeLoad) + '</td>');
            });
            table.appendTo('body');
        }
    }).attr('src', array.pop());

}); 
```

# python - Python：在字符串中添加字符的副本

> ID：15055340
> 
> 赞同：3
> 
> 时间：2013-02-24T18:55:23.823
> 
> 标签：python, string, character

我试图弄清楚如何在字符串中添加字符的副本，只要该字符是元音。例如，如果我输入单词 copy('app')，理想情况下它会返回 'aaaapp!'。我知道字符串是不可变的，但必须有办法！我已经盯着这个看了好几个小时了。

注意：我不想要我的代码的解决方案，最好只是提示让我朝着正确的方向前进。编辑：感谢所有帮助！

我的一个想法是： word += word + i*4 但这会返回类似“appaaaa！”的内容。

```
def copy(word):
     "('string') ==> ('string') Adds four copies of vowel and an '!' to the string"
     vowel = 'aeiouAEIOU'
     for i in word:
          if i in vowel:
                #Missing code Here
     return word + '!' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T18:57:35.693

你可以`re.sub`很容易地使用：

```
>>> re.sub('([aeiouAEIOU])',r'\1\1\1\1','string')
'striiiing' 
```

或者，如果您希望替换的数量可变：

```
>>> N=4
>>> re.sub('([aeiouAEIOU])',r'\1'*N,'string')
'striiiing' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T19:00:46.587

关键是创建一个新字符串。如果字符不是元音，则只需将其复制到新字符串中。如果它是元音，则将它的*四个*副本复制到新字符串中。然后你返回新的字符串。这是一种方法：

```
def copy(word):
    vowels = set ("AEIOUaeiou")
    return "".join(char * 4 if char in vowels else char for char in word) + "!" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T18:57:52.763

在扫描输入时编写一个单独的字符串：

```
s = ''
for i in word:
  if i in vowel:
     s += i*4
  else:
     s += i
s += '!' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:59:14.557

您可以将字符串的每个字符复制到列表中，在闲暇时插入元音，然后将列表重新加入字符串：''.join(mylist))

# git - 在 Git 中，是否需要远程跟踪分支？

> ID：15055342
> 
> 赞同：0
> 
> 时间：2013-02-24T18:55:42.533
> 
> 标签：git, remote-branch

2个Git克隆可以相互推/拉而没有代表另一个的远程跟踪分支吗？我知道它们在大多数情况下都非常有用，但我可能偶尔想在辅助存储库（不是我的裸服务器）之间拉/推，我不想把事情弄得乱七八糟。如果我不关心远程跟踪分支，是否可以将其删除或从不创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:42:32.937

不需要远程跟踪分支。它们只是为了方便（a）提供 git push 和 pull 一个默认行为，以及（b）接收有关本地分支状态的信息，而不是 git status 输出中的远程分支。你也不需要使用 Git。

> 我不想把事情弄得乱七八糟

请注意，设置远程跟踪分支根本不会使事情变得混乱。它所做的只是在本地存储库的配置文件中添加三行。它不做任何其他事情。期间的所有附加信息`git status`仅在命令执行时生成；没有任何东西被存储或以其他方式使事情变得混乱。因此，设置远程跟踪分支通常不是问题，即使您不需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:48:20.610

**如果您的意思是在远程分支上没有本地分支跟踪更改：**

您不必让您的分支跟踪远程分支。这是一种便利，有一些您没有的好处；例如`git status`声明您的分支是 x 提交在原点之前。

不设置跟踪分支不会阻止您使用遥控器。遥控器仍然可以在所有命令中使用，而不是输入 URL。

要查看跟踪了哪些分支，请使用`git branch -avv`. 任何跟踪远程分支的分支都会在提交哈希的左侧列出远程分支。

除了删除它并在不跟踪的情况下重新创建之外，我不知道从分支中删除跟踪的方法。

**如果您指的是远程分支的本地副本（如 所示`git branch -r`）：**

你可以用 -- 删除它们，`git branch -dr <remote/branch>`但下次你拉或取它时它会回来。它们是`git fetch ...`工作和`git pull ...`使用所必需的`git fetch ...`。每次都必须手动删除它们——或者编写脚本。

但是，它们不会给存储库增加任何真正的混乱或开销。远程跟踪分支在磁盘上只是一个包含提交哈希的文件。提交被保存在其他地方，并且大概，因为您想获取它们，它们已被合并或重新定位到一个或多个本地分支中。

可以使用 URL 而不是远程获取此信息。这不会创建在 FETCH_HEAD 文件之外的任何地方获取的内容的记录。由于每次提取都会覆盖此文件，因此如果在执行另一次提取之前未合并或重新定位到本地分支，则提交数据将丢失。远程跟踪分支用于防止获取的数据被垃圾收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T19:29:36.453

是的，您只需不添加遥控器即可轻松实现。

在存储库之间推/拉的常用方法是 to `git remote add NAME URL`，但这只是一种方便（远程跟踪分支也需要）。

而不是使用`git pull REMOTE_NAME BRANCH`，您可以`git pull URL BRANCH`以相同的方式使用 pull 。基本上，您可以在大多数 git 命令中将 URL 替换为远程的名称。

# objective-c - 测试FTP连接的方法

> ID：15055344
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:55:52.083
> 
> 标签：objective-c, cocoa, methods, ftp

我需要一个简单的方法 ( `objective-C`) 来测试给定的`FTPdata`（url、用户名、密码）并检查是否可以连接到`FTP`. 如果没有，它应该返回错误，告诉你出了什么问题。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:27:14.850

Apple 提供了一些示例代码。

[http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)

# cuda - Cuda：使用共享内存计算元素

> ID：15055345
> 
> 赞同：1
> 
> 时间：2013-02-24T18:55:55.140
> 
> 标签：cuda, parallel-processing, shared-memory

在内核计算之后，我产生了不同的值，范围从 0 到 6399，它们存储在共享内存中。我有 24336 个块，因此有 24336 个`__shared__`大小为 256 的数组实例。每个块数组都以没有特定顺序的计算值填充。

我想要的是计算所有这些块共享内存中有多少次某个值，并且该值应该是另一个数组（驻留在全局内存中）的索引，其各自的值将是它的次数出现了。

在一个带有 2 个块和一个`__shared__ int array1[3]`

`__device__ array2`我可能有 ：

为了`blockIdx.x=0`

```
array1[0]=10;
array1[1]=20;
array1[2]=30; 
```

而在`blockIdx.x=1`

```
array1[0]=30;
array1[1]=0;
array1[2]=10; 
```

结果应该是

```
array2[0]=1;   //value 0 has appeared one time
array2[10]=2;  //value 10 has appeared two times
array2[20]=1;  //value 20 has appeared one time
array2[30]=2;  //value 30 has appeared two times 
```

如何尽可能地并行完成？

**编辑**：

从我的问题后面的答案中，我发现了很多关于我的问题的帮助。尤其是生成任何类型的直方图并将任意数量的 bin 和包含 bin 的数组作为输入的代码。[https://devtalk.nvidia.com/default/topic/511531/code-general-purpose-histogram/](https://devtalk.nvidia.com/default/topic/511531/code-general-purpose-histogram/) 我忘记了我最初的计划，只是创建了一个`__global__`数组并将所有垃圾箱存储在那里。

在我的例子中，我使用了一个包含 68000000 个整数的数组，其 bin 范围从 0 到 6399。它工作得很好，而且我得到了加速，所以我忘记了将所有 bin 存储在共享内存中并从那里计算 bin 数量的最初想法，但我对执行时间不太满意，我想尝试其他方法。

我想知道是否有人知道如何回到我最初的想法以及我应该使用什么技术（即独家扫描等）。我记得有一个 stackoverflower 同事对此发表了一个答案，但我认为他很快就删除了他的帖子，而我没有时间彻底查看它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:19:08.627

我理解这个问题与直方图相同。存在许多好的解决方案，可以通过谷歌搜索，包括[Nvidia 自己的示例](http://docs.nvidia.com/cuda/cuda-samples/index.html#cuda-histogram)。

特别值得一提的是这些代码：

*   [http://www.moderngpu.com/sort/hist.html](http://www.moderngpu.com/sort/hist.html)
*   [https://devtalk.nvidia.com/default/topic/511531/code-general-purpose-histogram/](https://devtalk.nvidia.com/default/topic/511531/code-general-purpose-histogram/)
*   [https://devtalk.nvidia.com/default/topic/492929/fast-histogram-code-released-source-code-for-two-new-histogramming-methods/](https://devtalk.nvidia.com/default/topic/492929/fast-histogram-code-released-source-code-for-two-new-histogramming-methods/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:21:59.290

据我所知，这只是建立一个直方图。虽然这种方法可能不是最快的（除非您使用的是 Kepler K20），但您可以在内核末尾做一些相对简单的事情（假设您的共享数组 1 的大小为 256 个元素并且您在一维中启动至少 256 个线程线程块）：

```
if (threadIdx.x < 256)
  atomicAdd(&(array2[array1[threadIdx.x]]), 1); 
```

[（假设原子函数](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions)的计算能力为 1.1 或更高）

# java - 如何从 ViewPager 中动态删除页面？

> ID：15055350
> 
> 赞同：1
> 
> 时间：2013-02-24T18:56:42.037
> 
> 标签：java, android, android-viewpager, fragment

如何在 ViewPager 中正确销毁视图？我创建了一个包含 ListFragment 的应用程序，其中填充了列表项。单击列表项时，将创建新片段并将其添加到 FragmentPagerAdapter。一切正常，直到我尝试从 ViewPager 中删除视图。调用方法 mViewPager.removeViewAt(position); 在给定位置留下空白页。如果我在删除视图后滚动到另一个页面并滚动回该空页面应用程序崩溃。

```
@Override
public void onListItemClicked(int position) {
    Log.i("MainActivity", "Listitem clicked! position: " + position);

    FragmentContent fragment = new FragmentContent();
    Bundle bundle = new Bundle();
    bundle.putString("url", Directory.urls[position]);
    fragment.setArguments(bundle);
    Tab tab = mActionBar.newTab().setText(Directory.boards[position]).setTag(fragment).setTabListener(this);
    mActionBar.addTab(tab, true);
    // Call this method to update ActionBar
    invalidateOptionsMenu();

}

public class SectionsPagerAdapter extends FragmentPagerAdapter {
    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        Log.i("MainActivity", "SectionsPagerAdapter.getItem() position: " + position);
        // ActionBar tag contains fragment
        Fragment frag = (Fragment)mActionBar.getTabAt(position).getTag();
        return frag;
    }

    @Override
    public int getCount() {
        return mActionBar.getTabCount();
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object){
        // Remove page and tab at given position
        mViewPager.removeViewAt(position);
        // ActionBar tag contains fragment
        Fragment frag = (Fragment)mActionBar.getTabAt(position).getTag();
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.remove(frag).commit();
        mActionBar.removeTab(mActionBar.getTabAt(position));
        // Update options menu
        invalidateOptionsMenu();
        notifyDataSetChanged();
    }

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()){

    case R.id.menu_close:
        Log.i("MainActivity", "onOptionsItemSelected() close thread button pressed!");
        mSectionsPagerAdapter.destroyItem(null, mActionBar.getSelectedTab().getPosition(), null);
        mSectionsPagerAdapter.notifyDataSetChanged();
        break;
    }
    return true;
} 
```

日志：

```
2-24 20:41:32.578: I/FragmentList(10185): Item clicked: 4
02-24 20:41:32.593: I/MainActivity(10185): SectionsPagerAdapter.getItem() position: 1
02-24 20:41:32.593: I/FragmentContent(10185): FragmentContent onAttach
02-24 20:41:32.601: I/FragmentContent(10185): FragmentContent onResume()
// This is the point where i try to destroy page
02-24 20:41:47.273: I/MainActivity(10185): onOptionsItemSelected() close thread button pressed!
02-24 20:41:47.289: I/FragmentContent(10185): FragmentContent onPause()
02-24 20:41:47.289: I/FragmentContent(10185): FragmentContent onDestroy

// This is the point i scroll back to that empty page
02-24 20:42:09.546: W/dalvikvm(10185): threadid=1: thread exiting with uncaught exception (group=0x40ab21f8)
02-24 20:42:09.546: E/AndroidRuntime(10185): FATAL EXCEPTION: main
02-24 20:42:09.546: E/AndroidRuntime(10185): java.lang.NullPointerException
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.support.v4.app.Fragment.setUserVisibleHint(Fragment.java:801)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.support.v4.app.FragmentPagerAdapter.setPrimaryItem(FragmentPagerAdapter.java:130)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.support.v4.view.ViewPager.populate(ViewPager.java:1010)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:523)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:495)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:476)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at com.MoTo.ylilauta.MainActivity.onTabSelected(MainActivity.java:198)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:512)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at com.android.internal.app.ActionBarImpl.addTab(ActionBarImpl.java:441)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at com.MoTo.ylilauta.MainActivity.onListItemClicked(MainActivity.java:147)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at com.MoTo.ylilauta.FragmentList.onListItemClick(FragmentList.java:48)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.widget.AbsListView.performItemClick(AbsListView.java:1082)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2625)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.widget.AbsListView$1.run(AbsListView.java:3296)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.os.Handler.handleCallback(Handler.java:605)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.os.Looper.loop(Looper.java:137)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at android.app.ActivityThread.main(ActivityThread.java:4697)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at java.lang.reflect.Method.invokeNative(Native Method)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at java.lang.reflect.Method.invoke(Method.java:511)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
02-24 20:42:09.546: E/AndroidRuntime(10185):    at dalvik.system.NativeStart.main(Native Method)
02-24 20:42:11.632: I/Process(10185): Sending signal. PID: 10185 SIG: 9 
```

# android - 在 Nexus 4 上使用 Google Cloud Messaging (GCM) 获取 NoClassDefFoundError

> ID：15055351
> 
> 赞同：1
> 
> 时间：2013-02-24T18:56:47.267
> 
> 标签：android, google-cloud-messaging

我的类路径中有 gcm.jar，因此 eclipse 编译了该项目，但它在我的 Nexus 4 设备上失败了

```
02-24 11:52:12.645: E/AndroidRuntime(30240): FATAL EXCEPTION: main
02-24 11:52:12.645: E/AndroidRuntime(30240): java.lang.NoClassDefFoundError: com.google.android.gcm.GCMRegistrar
02-24 11:52:12.645: E/AndroidRuntime(30240):    at com.foo.closethedoor.CloseTheDoorActivity.onCreate(CloseTheDoorActivity.java:77) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:03:44.227

> 我的类路径中有 gcm.jar

它需要在您的项目`libs/`目录中。不要仅仅手动操作 Eclipse 构建路径——这将允许您针对 JAR 进行*编译*，但不会*将*JAR 与您的 APK 一起提供。将 JAR 放入其中即可`libs/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:09:47.033

NoClassDefFoundError 意味着应用程序无法在应用程序的文件夹中找到文件的位置。建议将所有库文件和 jar 文件保存在项目的“libs”文件夹中。尝试这样做。它将解决问题。如果没有，请在将代码推送到设备之前再次尝试构建代码。

# sql-server - 意外的查询结果

> ID：15055360
> 
> 赞同：2
> 
> 时间：2013-02-24T18:57:42.903
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2012

为什么我从 sql-server 得到以下结果？

```
SELECT '' + 12 C1, CONVERT(int, '') C2,
       CASE WHEN '' = ' ' THEN 'equal' ELSE 'not equal' END C3 
```

[Sql-Server 小提琴演示](http://sqlfiddle.com/#!3/d41d8/9429)

```
--Results
| C1 | C2 |    C3 |
-------------------
| 12 |  0 | equal | 
```

**编辑：** C3 已回答。每个人都回答认为`'' + 12 = 12`是字符串连接，但它是一种数学运算。目前尚不清楚为什么（*不是*如何）`''`在 sql-server 中转换为 0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T19:34:54.353

这或多或少是预期的行为。从 SQL (ISO/ANSI) 标准的副本：

> 两个字符串表达式的比较取决于用于比较的排序规则。当比较长度不等的值时，如果用于比较的排序规则具有`NO PAD`特征并且较短的值等于较长值的某个前缀，则认为较短的值小于较长的值。如果用于比较的排序规则具有`PAD SPACE`特征，则为了比较的目的，***通过将右侧的 <space> 串联起来，将较短的值有效地扩展到较长的值***。

现在，大多数 DBMS 已经实现了略有不同的字符串比较。在 SQL_Server 和 MySQL 中，你会发现`''`,`' '`和(0, 1, 2`'  '`和`'   '`3 个空格的字符串) 都是相等的，无论它们是否定义为`VARCHAR`or `CHAR`。

在 Postges 中，如果它们相等，它们都是不相等的，`VARCHAR`但如果相等（因此在列`CHAR`中没有填充）。`VARCHAR`如果其中一个是 VARCHAR 和一个 CHAR，那么它们是相等的，所以我猜想在比较之前填充。

Oracle 与 Postgres 类似，但空字符串的`''`行为（几乎无处不在）为`NULL`. 因此，当您将其与具有一个或多个空格的字符串（或与自身）进行比较时，结果既不是 True 也不是 False，而是`UNKNOWN`. Oracle还有一个区别，如果一个字符串定义为`VARCHAR`，另一个字符串定义为`CHAR`，比较比较复杂。从测试中，我假设仅`CHAR`在这种情况下被填充，直到它们的（定义的数据类型）长度，然后与 unpadded 进行比较`VARCHAR`。

**[您可以在SQL-Fiddle](http://sqlfiddle.com/#!4/ad51e/1)**中检查（所有 4 个 DBMS）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T19:27:57.120

`C1`- 这里发生了隐式转换，空字符串被转换为 0。这解释了为什么你得到`12`(`0 + 12)。

`C2`- 显式转换`''`为整数会导致`0`. 有点艺术，但这就是它的工作方式（并且可能会改变 - 据我所知，这没有记录，如果有人知道，请纠正我）。

`C3`- 查看[muhmud 的答案](https://stackoverflow.com/a/15055436/1583)- 基本上在比较不同长度的字符串时，较短的字符串首先用空格填充到较长的长度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T19:04:47.203

SQL Server 有一个奇怪的特性，如果比较两个字符串，并且它们的长度不相等，那么它会将较短的字符串填充到较长字符串的长度，然后进行比较。填充字符是一个空格。[http://support.microsoft.com/kb/316626](http://support.microsoft.com/kb/316626)

C1 和 C2 只是将空字符串隐式和显式转换为 0。

# jquery - jquery绑定动态创建的mediaplayer.js播放事件

> ID：15055367
> 
> 赞同：0
> 
> 时间：2013-02-24T18:58:26.310
> 
> 标签：jquery, html, dynamic, media-player, playback

我有一个动态添加到网页的 mediaplayer.js html5 音频播放器。我希望能够对这个元素的播放事件采取行动。以下代码片段适用于静态/非动态 mediaplayer.js 元素。

```
$('audio, video').on('play',function(){alert('test');}); 
```

所以我已经将它改编为像这样的动态元素

```
$('body').on('play','audio, video',function(){alert('test');}); 
```

但它不适用于动态或静态元素。

有没有人遇到过这个？有解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:26:22.390

经过一番挖掘，我想出了一个解决方案。使用 mediaelementplayer 选项的成功回调，不完全是我想要的，但做同样的事情。

```
$('video,audio').mediaelementplayer(
{
    success:function(player)
    {
        player.addEventListener('play',function()
        {
            alert('hello');
        });
    }
}); 
```

# html - 使用 CSS 的目标操作系统？

> ID：15055368
> 
> 赞同：-1
> 
> 时间：2013-02-24T18:58:27.303
> 
> 标签：html, css, windows, macos, google-chrome

我的理解是这样的事情是不可能的。但是我为朋友开发的网站在 Chrome for Windows 7/8 和 Chrome for Mac OS X 中的呈现方式不同。

链接到有问题的网站：[Phillip Elder Music](http://phillipeldermusic.com/)

请注意其中一个版本中“联系人”选项卡的悬挂。

在 IE9 中渲染显示了同样的问题，但我能够创建一个对齐所有内容的 IE 特定工作表。

这是 Chrome 目前使用的 CSS。请让我知道如何在两个操作系统上对齐底部。

```
 /*________Navigation and Body_________*/
body {
    background-image: url(../images/drumKeyboard.png);
    background-color: #fbfbfb;
    background-size: 960px 208px;
    background-repeat:no-repeat;
    background-position: top center;
}

nav ul {
    font-family: 'Cabin', sans-serif;
    list-style: none;
    text-align: right;
    margin-top: 30px;
    margin-right: -15px;
}

nav ul a {
    text-decoration: none;
    color: black;
}

nav ul li:hover {
    background-color: black;
    color: #fbfbfb;
}

nav ul li {
    padding: 3px 20px 6px 0px;
    margin-left: 25px;
    margin-bottom: 3px;
    border-radius: 13px 0px 0px 13px;
}

img.logo {
    border: none;
    height: 180px;
    width: 180px;
}

/*________Content________*/

.tabs .active {
    color: #fbfbfb;
    position: relative;
}

.tabs .active li {
    background-color: black;
}

.panelContainer {
    clear: both;
    margin-bottom: 25px;    
    padding: 10px;
    font-family: sans-serif;
}

.panel p {
    color: black;   
}

/*_________Unordered Lists CSS______*/

ul.upcoming {
    list-style: none;
    margin-left: -40px;
}

ul.upcoming li {
    margin:31px 0px 0px 0px
}

ul.media {
    list-style: none;
    margin-left: 0px;
}

ul.media li {
    margin:24px 0px 0px 0px
}

ul.works {
    list-style: none;
    margin-left: -40px;
}

ul.works li {
    margin:24px 0px 0px 0px
}

/*____________Link CSS_____________*/

a {
    border: none;
    color: #73b3e1;
}

a:visited {
    border: none;
    color: #73b3e1;
}

a.media {
    border: none;
    color: #000000;
}

a.media:visited {
    border: none;
    color: #000000;
}

/*__________Images CSS___________*/

img.follow {
    border: none;
    height: 70px;
    width: 320px;
}

img.social.first{
    border: none;
    padding-left: 40px;
    padding-right: 20px;
    width: 8%;
}

img.social.middle{
    border: none;
    padding-left: 20px;
    padding-right: 20px;
    width: 8%;
}

img.social.last{
    border: none;
    padding-left: 20px;
    padding-right: 40px;
    width: 8%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:20:57.297

您可以使用 msie 条件注释来定位不同的 msie 版本：

```
<!--[if IE 7]><body class="lt-ie10 lt-ie9 lt-ie8 ie7"><![endif]-->
<!--[if IE 8]><body class="lt-ie10 lt-ie9 ie8"><![endif]-->
<!--[if IE 9]><body class="lt-ie10 ie9"><![endif]-->
<!--[if gt IE 9]><!--><body><!--<![endif]--> 
```

您可以在 css 中使用一些媒体查询来过滤 webkit/moz：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {

    button>span+span, .button>span+span {
        margin-left: 7px;
    }

} 
```

对于其他一切，您可以使用 javascript 来找出[jQuery/Javascript 之类的东西来检测没有插件的操作系统？](https://stackoverflow.com/questions/7044944/jquery-javascript-to-detect-os-without-a-plugin)

但是，问题是，先尝试在没有所有这些东西的情况下修复它。

更新：

您正在用 a 包装 li，也许这就是您行为不一致的原因。

试试这个：http: [//jsfiddle.net/cwNKX/1/](http://jsfiddle.net/cwNKX/1/)

HTML

```
<div id="menu">
    <div>
        <a href="#">Home</a>
        <a href="#">Biography</a>
        <a href="#">Works</a>
        <a href="#">Media</a>
        <a href="#">Contact</a>
    </div>
</div> 
```

CSS

```
#menu {
    position: relative;
    width: 587px;
    height: 208px;
    background: #fbfbfb url("http://phillipeldermusic.com/images/drumKeyboard.png") no-repeat -1522px 0;
}

#menu div {
    position: absolute;
    bottom: 0;
    right: 477px;
    width: 110px;
}

#menu a {
    display: block;
    padding: 5px;
    text-align: right;
    font-family: Cabin, sans-serif;
    font-size: 14px;
    line-height: 20px;
    text-decoration: none;
    color: #000;
    border-radius: 15px 0 0 15px;
}

#menu a:hover {
    color: #fff;
    background-color: #000;
}

#menu a + a {
    margin-top: 3px;
} 
```

顺便说一句，调整该背景图像的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:27:08.010

这仅在 CSS 中是不可能的。相反，通过 JavaScript 检测浏览器并采取相应措施。

一种常见的方法是让 JavaScript 添加表示浏览器、浏览器版本、平台或其他内容的主体类。像[BAPS](http://www.mitya.co.uk/scripts/BAPS-browser-and-plugin-sniffer-191)这样的东西会为你做这件事（检查演示页面上的 DOM，你会看到它添加的主体类）。

因此，例如，如果您只想为 Mac Opera 上的用户添加一些样式，您可以将 BAPS JS 脚本包含到您的页面中，然后在您的 CSS 中编写以下内容：

```
.opera.platform-macintel .some_class { /* styles only for Opera on Mac */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T16:03:33.570

忘记修复症状。去寻找原因。 [这篇文章](https://hsivonen.fi/png-gamma/)将告诉你关于这个问题你应该知道的一切：PNG 伽马校正。

最有用的解决方案是从 PNG 图像中分割颜色配置文件。我已经做到了

```
pngcrush -rem gAMA -rem cHRM -rem iCCP -rem sRGB infile.png outfile.png 
```

[pngcrush官方网站](http://pmt.sourceforge.net/pngcrush/)

# url - MVC 4 中的 URL 加密

> ID：15055373
> 
> 赞同：2
> 
> 时间：2013-02-24T18:58:41.203
> 
> 标签：url, encryption, asp.net-mvc-4, parameters

我正在加密 MVC url 中的参数..例如

`http:/localhost:xxxx/Movies/Edit/1`，加密参数值1，赋值给id。

基本上我遵循的是实现自定义操作链接，该链接将`RoutedValueDictionary`基于盐字符串加密值并使用相同的文本作为加密值的前缀，`Encrypt_`这样输出将是`Encrypt_dfhwo=23nbsdkfhskdf`。

所以网址是

```
http:/localhost:xxxx/Movies/Edit/Encrypt_dfhwo=23nbsdkfhskdf 
```

已实现`DefaultControllerFactory.CreateController`，我正在检查路由值是否以前缀 Encrypt_ 开头，然后解密该值，然后传递给控制器​​。

一切正常。我看到的问题是，如果黑客操纵 url 并将 url 更改为`http:/localhost:xxxx/Movies/Edit/5`（随机数，与数据库中的记录匹配），那么我的控制器将在没有任何解密机制的情况下处理请求。

如何克服这个问题..你们在这里看到任何潜在的漏洞吗？

任何建议都是最受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:08:45.473

1.  你通过加密数据库记录得到什么？看起来该值仍然可以重播。
2.  如果您只想通过加密值访问记录，请在您的操作中解密它而不是在它之前，并且不要仅通过您的操作中的数字来允许它，
3.  黑客仍然可以发送随机值，只允许加密值，并且仍然学会加密他们想要的任何值，有很多侧通道攻击的可能性，在这种情况下你*需要*使用[Authenticated Encryption 。](http://en.wikipedia.org/wiki/Authenticated_encryption)
4.  您应该使用 url-safe base 64，您的示例看起来并非如此。

如果您想要的只是某人无法随机猜测记录值，请使用高级加密框架，该框架为您提供更少的选择以减少加密错误。我将 Google 的[Keyczar 移植到 C#](http://jbtule.github.com/keyczar-dotnet/)中，这样 C# 就会有这样的框架。它具有经过[身份验证的加密](https://github.com/jbtule/keyczar-dotnet/wiki/Authenticated-Encryption)，可为标题、随机 IV 和标签的加密添加 41 个字节，默认情况下使用 Web 安全 base64。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T10:17:04.337

```
**Add A Folder with two classes 
Class 1 : EncryptedActionParameterAttribute

using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Security.Cryptography;
using System.Web;
using System.Web.Mvc;

namespace MVCInvoicClient.Extensions
{
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
    public class EncryptedActionParameterAttribute : ActionFilterAttribute
    {

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {

            Dictionary<string, object> decryptedParameters = new Dictionary<string, object>();
            if (HttpContext.Current.Request.QueryString.Get("q") != null)
            {
                string encryptedQueryString = HttpContext.Current.Request.QueryString.Get("q");
                string decrptedString = Decrypt(encryptedQueryString.ToString());
                string[] paramsArrs = decrptedString.Split('?');

                for (int i = 0; i < paramsArrs.Length; i++)
                {
                    string[] paramArr = paramsArrs[i].Split('=');
                    decryptedParameters.Add(paramArr[0], Convert.ToInt32(paramArr[1]));
                }
            }
            for (int i = 0; i < decryptedParameters.Count; i++)
            {
                filterContext.ActionParameters[decryptedParameters.Keys.ElementAt(i)] = decryptedParameters.Values.ElementAt(i);
            }
            base.OnActionExecuting(filterContext);

        }

        private string Decrypt(string encryptedText)
        {

                string key = "jdsg432387#";
                byte[] DecryptKey = { };
                byte[] IV = { 55, 34, 87, 64, 87, 195, 54, 21 };
                byte[] inputByte = new byte[encryptedText.Length];

                DecryptKey = System.Text.Encoding.UTF8.GetBytes(key.Substring(0, 8));
                DESCryptoServiceProvider des = new DESCryptoServiceProvider();
                inputByte = Convert.FromBase64String(encryptedText);
                MemoryStream ms = new MemoryStream();
                CryptoStream cs = new CryptoStream(ms, des.CreateDecryptor(DecryptKey, IV), CryptoStreamMode.Write);
                cs.Write(inputByte, 0, inputByte.Length);
                cs.FlushFinalBlock();
                System.Text.Encoding encoding = System.Text.Encoding.UTF8;
                return encoding.GetString(ms.ToArray());
        }

    }
}

class 2 : MyExtensions

using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Security.Cryptography;
using System.Text;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace MVCInvoicClient.Extensions
{
    public static class MyExtensions
    {
        public static MvcHtmlString EncodedActionLink(this HtmlHelper htmlHelper, string linkText, string actionName, string controllerName, object routeValues, object htmlAttributes)
        {
            string queryString = string.Empty;
            string htmlAttributesString = string.Empty;
            if (routeValues != null)
            {
                RouteValueDictionary d = new RouteValueDictionary(routeValues);
                for (int i = 0; i < d.Keys.Count; i++)
                {
                    if (i > 0)
                    {
                        queryString += "?";
                    }
                    queryString += d.Keys.ElementAt(i) + "=" + d.Values.ElementAt(i);
                }
            }

            if (htmlAttributes != null)
            {
                RouteValueDictionary d = new RouteValueDictionary(htmlAttributes);
                for (int i = 0; i < d.Keys.Count; i++)
                {
                    htmlAttributesString += " " + d.Keys.ElementAt(i) + "=" + d.Values.ElementAt(i);
                }
            }

            //<a href="/Answer?questionId=14">What is Entity Framework??</a>
            StringBuilder ancor = new StringBuilder();
            ancor.Append("<a ");
            if (htmlAttributesString != string.Empty)
            {
                ancor.Append(htmlAttributesString);
            }
            ancor.Append(" href='");
            if (controllerName != string.Empty)
            {
                ancor.Append("/" + controllerName);
            }

            if (actionName != "Index")
            {
                ancor.Append("/" + actionName);
            }
            if (queryString != string.Empty)
            {
                ancor.Append("?q=" + Encrypt(queryString));
            }
            ancor.Append("'");
            ancor.Append(">");
            ancor.Append(linkText);
            ancor.Append("</a>");
            return new MvcHtmlString(ancor.ToString());
        }

        private static string Encrypt(string plainText)
        {
            string key = "jdsg432387#";
            byte[] EncryptKey = { };
            byte[] IV = { 55, 34, 87, 64, 87, 195, 54, 21 };
            EncryptKey = System.Text.Encoding.UTF8.GetBytes(key.Substring(0, 8));
            DESCryptoServiceProvider des = new DESCryptoServiceProvider();
            byte[] inputByte = Encoding.UTF8.GetBytes(plainText);
            MemoryStream mStream = new MemoryStream();
            CryptoStream cStream = new CryptoStream(mStream, des.CreateEncryptor(EncryptKey, IV), CryptoStreamMode.Write);
            cStream.Write(inputByte, 0, inputByte.Length);
            cStream.FlushFinalBlock();
            return Convert.ToBase64String(mStream.ToArray());
        }               
    }
}

**Controller** 

Add this line above the controller class Example for your Index
 [EncryptedActionParameter]

**In your View** 

 @Html.EncodedActionLink("Download Invoice", "FileDownload","DataFiles", new { id = item.DataFilesID }, null)

add a using statement 

@using MVCInvoicClient.Extensions 
```

# c++ - 类型促进 abs 实现

> ID：15055378
> 
> 赞同：2
> 
> 时间：2013-02-24T18:59:17.487
> 
> 标签：c++, c++11, std

虽然`std::abs`（或`::abs`对于*C*开发人员）不提升返回值，因此不处理`std::numeric_limit<T>::min()`，但我希望有一个`abs`实现，它可以进行更“安全”的处理。

```
template <typename T>
typename std::make_unsigned<typename std::enable_if<std::is_signed<T>::value, T>::type>::type secure_abs( T value ) {
    if( value >= 0 )
        return value;

    if( value == std::numeric_limits<T>::min() )
        return *reinterpret_cast<typename std::make_unsigned<T>::type*>(&value);

    return -value; //TODO: Prevent promotion to int
} 
```

我还没有弄清楚的事情是如何防止在提升为 int 后出现转换警告（删除减号时）。

有没有更优雅/正确的去除减号的方法？

编辑：

现在对于 INT_MIN 和 2complement 应该是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:24:04.610

`int`由于在使用“等级”低于“等级”的类型的算术运算时，类型提升是不可避免的，`int`我只看到了两种方法来克服这个警告：

1.  复杂的。`return adder(!value, 1);`其中`adder`function 是按位求和器。您可能会发现它是如何在硬件中实现并自己实现的。
2.  简单的。`return static_cast<T>(-value)`. 由于您没有任何可能导致类型溢出的算术运算，`T`因此“取消”提升是绝对安全的`int`

# layout - 网络布局

> ID：15055379
> 
> 赞同：0
> 
> 时间：2013-02-24T18:59:35.137
> 
> 标签：layout, matplotlib, networkx

我目前有一个形式为（node1、node2、weight_of_edge）的三元组列表。我有什么方法可以绘制，以便它们之间有边缘的节点在布局中保持靠近？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:28:01.987

您应该看看[NetworkX](http://networkx.github.com)库，它提供了许多用于创建和操作网络的工具。

基于三元组列表的基本示例：

```
list_of_triplets = [("n1", "n2", 4),
                    ("n3", "n4", 1),
                    ("n5", "n6", 2),
                    ("n7", "n8", 4),
                    ("n1", "n7", 4),
                    ("n2", "n8", 4),
                    ("n8", "n9", 6),
                    ("n4", "n9", 12),
                    ("n4", "n6", 1),
                    ("n2", "n7", 4),
                    ("n1", "n8", 4)]

# The line below in the code change the list in a format that take
# a weight argument in a dictionary, to be computed by NetworkX

formatted_list = [(node[0], node[1], {"weight":node[2]}) for node in list_of_triplets] 
```

要绘制图形：

```
import matplotlib.pyplot as plt
import networkx as nx

G = nx.Graph()
G.add_edges_from(formatted_list)
nx.draw(G)
plt.show() 
```

![节点](../Images/5cc9481181b95913782b579ef39c57a8.png)

# cakephp - CakePHP - 将选择文本设置为值

> ID：15055381
> 
> 赞同：0
> 
> 时间：2013-02-24T18:59:52.163
> 
> 标签：cakephp, select

我最近一直在玩 CakePHP，遇到了以下问题：

在使用表单助手创建视图时，我一直在执行以下操作来输出选择

```
 echo $this->Form->input('fee', array(
        'empty' => '---',
        'options' => array(
        __('Yes'),
        __('No'))
    )); 
```

我为 i18n 准备了字符串，这就是为什么用 __(' ') 声明它们的原因

因此，它完美地工作 - 并生成以下代码：

```
<div class="input select">
<label for="GameFee">Fee</label>
<select name="data[Game][fee]" id="GameFee">
<option value="">---</option>
<option value="0">Yes</option>
<option value="1">No</option>
</select>
</div> 
```

然而 cake 确实 - 像往常一样 - 将 ID 作为值。我如何强制蛋糕将字段描述作为值

是的

“游戏”表中的“费用”字段由 varchar(100) 组成

希望你能帮忙:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:07:16.423

我不会那样做的！截至目前 cake 不支持开箱即用的枚举。但是有很多选项可以解决它 - 其中一些通常比首先使用枚举要好得多。

就你而言，我想知道为什么你会在这里想要一个枚举？它显然是一个布尔值（两种状态：0 或 1，是或否）。所以我总是使用 tinyint1 存储这个布尔值。

您应该以低成本（与整个字符串相比没有）和低回归错误将基本信息（0 或 1）存储在数据库中，并且仅在输出时翻译/解释它（例如，在您看来）。

如果您确实需要两个以上的确定状态，请阅读 [http://www.dereuromark.de/2010/06/24/static-enums-or-semihardcoded-attributes/](http://www.dereuromark.de/2010/06/24/static-enums-or-semihardcoded-attributes/)例如。通过在此处坚持您的 tinyint2 字段，您可以轻松实现您想要的：

```
$this->Form->input('fee', array('options' => Model::fees())); 
```

无论如何，回答您的问题：如果您真的必须在此处保存一个字符串，请确保它是键的一部分或在保存之前将其映射到控制器中。

```
'options' => array(
    __('Yes') => __('Yes'),
    __('No') => __('No')) 
```

# cakephp - htaccess mod_rewrite cakephp 文件夹内的规则

> ID：15055382
> 
> 赞同：1
> 
> 时间：2013-02-24T18:59:53.513
> 
> 标签：cakephp, mod-rewrite

一个知道语法的人的一个小问题`mod_rewrite.`

我有`cakephp app`一个域。那里的`.htaccess`文件非常简单：

```
RewriteEngine on
RewriteRule    ^$ app/webroot/    [L]
RewriteRule    (.*) app/webroot/$1 [L] 
```

但我想添加一个目录，我们称之为**“test_dir”**，这样当我在浏览器中输入时，`domain.com/test_dir/`它会转到该`test_dir`目录而不是`app/webroot/`

我试过这个并且只在某种程度上成功了，只输入

```
RewriteRule    ^test_dir.$ test_dir/ [L] 
```

但是像这样，正常的，其他的规则就没有了。那么有没有`"if"`声明或类似的东西？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:21:53.583

```
 RewriteRule    ^$ app/webroot/    [L]

   RewriteCond    %{REQUEST_URI} !^/test_dir/.*
   RewriteRule    (.*) app/webroot/$1 [L] 
```

# r - 在data.table中加入与不加入的组合？

> ID：15055383
> 
> 赞同：7
> 
> 时间：2013-02-24T18:59:55.943
> 
> 标签：r, data.table

我的问题与具有多个键的 R data.table 有关。举个例子：

```
library(data.table)
example(data.table)
key(DT)
[1] "x" "y" 
```

并假设我想要“x 不等于 b 和 y 不等于 3”的变体，如下所示：

```
DT[!J("b",3)]
   x y  v v2  m
1: a 1 42 NA 42
2: a 3 42 NA 42
3: a 6 42 NA 42
4: b 1  4 84  5
5: b 6  6 84  5
6: c 1  7 NA  8
7: c 3  8 NA  8
8: c 6  9 NA  8 
```

我想要的变化是“x 等于 b 和 y 不等于 3”，如下所示：

```
DT[J("b",!3)]
Error in `[.data.table`(DT, J("b", !3)) : 
  typeof x.y (double) != typeof i.V2 (logical) 
```

有机会告诉 J() 否定某些键吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T19:22:26.770

**对于复合键**，您可以使用以下

```
 DT[.("b")][!.(x, 3)]   # x is the name of first column of key 
```

通常，您可以将几个链接在一起`[ ] [ ]`以过滤到您需要的结果。

* * *

请注意，您还可以轻松地在`i`of中使用逻辑语句`data.table`。
--`J()`或 now `.( )`-- 语法只是一种简写的便利。

您几乎可以使用任何会进入`if`子句的内容，其优势在于可以将列名作为变量进行访问。

在您的具体示例中，您将使用`x=="b" & y != 3` *note the single `&`，而不是`&&`。*

```
 DT[  x=="b" & y != 3] 
```

您还可以将矢量扫描与 data.table 的二进制搜索结合起来，如下所示

```
 DT[.("b")][y != 3] 
```

# c++ - 如何知道一个字符串在数组中出现的次数？

> ID：15055387
> 
> 赞同：-1
> 
> 时间：2013-02-24T19:00:37.810
> 
> 标签：c++, arrays, string

基本上，我想检查一个字符串在数组中出现了多少次。

我正在做在线挑战，我遇到了这个。

首先，输入数组有多少个元素。然后你输入一些字符串。

例子：

```
5
LOL
CODE
CODE
LOL
CODE 
```

所以，我必须输出输入次数最多**的字符串。**在这种情况下，将是`CODE`。

我怎么能用 C++ 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:50:39.537

我不确定使用哈希映射或类似方法的方法，但我编写了一个程序，它本质上是蛮力的做事方式。基本上，您需要使用动态数组跟踪每个字符串以及它出现的类型。一旦您完成了输入并分析了每个字符串以及它出现了多少次，您就可以查看动态数组并查看哪个字符串出现最多。然后你只需输出它。

在没有我的程序帮助的情况下尝试自己做。如果你不能或者如果你卡住了，请参考下面的工作程序，它可以满足你的要求：

```
#include <vector>
#include <string>
#include <iostream>

using namespace std;

//This struct represents a string and how many times it appears
struct strRefCount { //String and Reference Count
    unsigned int count;
    string str;
};

strRefCount strMode(string data) //String mode: returns the string which appears most often
{

    vector<strRefCount> allStrings; //Count of each time a string appears and what the string is
    string curString = ""; //The string we are currently reading (initialize to be empty)
    unsigned int strPos = 0; //The position (in the form of data[strPos]) which represents how far we have gotten in analyzing the string
    strRefCount *modeStringp; //Pointer to the string that appears most often

    while(data[strPos] != NULL) { //We will advance through data until we hit the null terminator in this loop
        curString.clear();
        while(data[strPos] != ' ' && data[strPos] != NULL) //Advance in the string until we hit a space or terminating null byte
        {
            curString += data[strPos]; //Append the string
            strPos++; //Advance one byte in data
        }

        bool flagStringFound = false; //This flag indicates that the string was already found before
        for(unsigned int i = 0; i < allStrings.size(); i++)
        {
            if(allStrings[i].str == curString) //If this string is the same as the current entry
            {
                allStrings[i].count++;
                flagStringFound = true;
                break;
            }
        }

        if(flagStringFound == false) //If the string is not present in allStrings, put it there and initialize it
        {
            strRefCount addElem; //Element to add to the end of the vector
            addElem.str = curString; //Last element's string is curString
            addElem.count = 1; //Last element's reference count is curString
            allStrings.push_back(addElem); //Add the element
        }

        //Make sure we don't repeat the loop if we are at the end of the string
        if(data[strPos] != NULL)
        {
            break;
        }
    }

    //Now we have every string which appears in data and the number of times it appears
    //Go on to produce the correct output
    modeStringp = &(allStrings[0]); //Set modeStringp to the first string
    for(unsigned int i = 1; i < allStrings.size(); i++) //Note that by setting i to 1 we skip the first element which is already in modeStringp
    {   
        if(allStrings[i].count > modeStringp->count) //If the current entry in allStrings is bigger than 
        {
            modeStringp = &(allStrings[i]); //Replace modeStringp with the current entry in allStrings
        }
    }

    return *modeStringp;
}

int main()
{
    string data;
    getline(cin, data); //Get the input (can't use cin as it doesn't allow for an entire line just space seperated string)

    strRefCount dataModeString = strMode(data); //Call out strMode function

    cout << endl << dataModeString.str << " appears most often with a total of " << dataModeString.count << " appearances.";

    getchar(); //This line is only here to make sure we don't quit before we see the output.

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:35:02.607

[这个程序](http://paste.ubuntu.com/5563017/)对我有用。

该程序创建一个包含下一条记录的数组：

```
"Lucio", "John", "Lucio" 
```

然后它将该信息发送到返回被引用最多的名称的函数。所以它返回`Lucio`

# php - 使用 PHP 上传文件会导致权限 600

> ID：15055391
> 
> 赞同：1
> 
> 时间：2013-02-24T19:01:05.167
> 
> 标签：php, file-upload, permissions, file-permissions

我们有一个允许用户上传文件的基本表单。表单有一个`<input type="file">`，在做一些验证后，我们保存文件如下：

```
 if($file_upload) {
        // this is a file that we can upload and manage
        rename($_FILES['file']['tmp_name'], ABSPATH . 'path/to/files/file_' . $user_resume_record_id[0]->id . '.' . $file_extension); 
```

}

保存文件的父方向的权限为 755。由于某种原因，我们上传的新文件以 600 的权限到达，因此用户以后看不到它们。我们做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:03:55.080

您最好使用[move_uploaded_file()](http://php.net/manual/en/function.move-uploaded-file.php)，这适用于这种精确情况。

此外，这已在 PHP 手册（[链接此处](http://www.php.net/manual/en/function.move-uploaded-file.php#85371)）中报告，建议的解决方案是使用 chmod() 或 copy()

# iphone - InApp 购买奇怪的排列在 Array

> ID：15055393
> 
> 赞同：1
> 
> 时间：2013-02-24T19:01:13.657
> 
> 标签：iphone, ios, objective-c, in-app-purchase

我正在尝试做 inaAppPurchases 并使用以下代码

```
 NSSet *myProductIdentifiers = [NSSet setWithObjects:
                                     @"inapppurchase.first",
                                     @"inapppurchase.second",
                                     @"inapppurchase.third",
                                     @"inapppurchase.fourth",
                                     @"inapppurchase.fifth",
                                     @"inapppurchase.sixth",
                                     nil];

        if ((self = [super initWithProductIdentifiers:myProductIdentifiers]))
        {

        }
        return self;
///////////////////////////////////    

    - (id)initWithProductIdentifiers:(NSSet *)identifiers
    {
        if ((self = [super init]))
        {
        }
        self.productIdentifiers = identifiers;

        return self;
    }

    - (void)requestProducts
    {
        self.request = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
        request.delegate = self;
        [request start];
    }

    - (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
    {
        self.products = response.products;
        SKProduct *product = [self.products objectAtIndex:0];
        NSLog(@"%@", product.price);
        self.request = nil;
    } 
```

问题是，当我调用`requestProducts`然后调用委托函数 时`- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response`，产品的顺序与我的 NSSet 值不同

我的self.products的顺序是第五，第一，第二，第四，第六和第三。这是为什么？为什么顺序不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:20:44.163

与数组不同， A`NSSet`不会按特定顺序保存对象。事实上，`objectAtIndex`不会与`NSSet`. 为了查看 a 中的对象`NSSet`，您可以使用它的一个属性，例如`anyObject`，它随机返回集合中的一个对象，或者`allObjects`，它返回`NSArray`集合中所有对象的 a，它们在返回的数组中随机排序. `SKProductsRequest`很可能访问，然后枚举数组中的`NSSet.allObjects`每个对象以确定它是否为有效产品。

一旦您返回随机订购的有效产品集，只需将该集与内部正确订购产品的数组进行比较。您将能够识别任何无效产品，同时保留您的产品订单。

# javascript - JavaScript id 输出仅显示一秒钟然后消失

> ID：15055396
> 
> 赞同：1
> 
> 时间：2013-02-24T19:01:43.400
> 
> 标签：javascript

我正在制作一个简单的 JavaScript 函数，您在表单中输入两个数字，然后该函数确定这两个数字的总和是否为质数。一切正常，但是当函数显示带有 document.getElementById("demo").innerHTML 和

它只在网页上停留一秒钟然后消失。我想这样做，以便消息一直存在，直到您再次单击该按钮。我已经搜索了这个网站和其他网站，但没有找到任何东西。

这是代码：

```
<!DOCTYPE html>
<html>
<head>
<link href="/prime.css" rel="stylesheet" type="text/css" />
<script>
function prime()
 {
  // get the values from the form
 var x= document.forms["frm1"]["x"].value; 
 var y= document.forms["frm1"]["y"].value;
  //test the values of the form
 if (x == "null"|| x=="" || isNaN(x)|| y=="null" || y==""|| isNaN(y)){
 alert("You must enter two numbers.");
 exit;
 }
  //change variables to number and add them together
  var number = (parseInt(x)+ parseInt(y));
   var a="";
 var prime = true;

  //check to make sure number is not less than one
 if (number <= 1){
 alert("Sorry " +number+ " is not a prime.");
 prime = false;
 exit;
 }
   //check if number is a prime
for (var dividby = 2; dividby <= number / 2; dividby++){
if(number % dividby == 0)
    prime = false;
break;

}
    //send congratulations
if(prime==true){

a="congratulations " + number + " is a prime!";
}
   //send condolences
else{
a="Sorry "+number+ " is not a prime.";
}
document.getElementById("demo").innerHTML=a;

}

</script>
</head>

<body id="elem">
<div class="div"></div>
<div> 
    <br>
<h1>PRIME NUMBERS</h1>
<p>Please enter two numbers to be added and see if the result is a prime.</p><br>
<form name="frm1" >
<input type="text" name="x"> 
+ <input type="text" name="y">
<button onclick="prime()">click me</button>
</form>
<br>
<p id="demo"></p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:05:40.620

The problem is that your "click me" button is actually submitting the form, causing the page to reload (since your `<form>` doesn't have an `action` attribute, it submits to the same page). The `<button>` tag defaults to `type="submit"`. To make it NOT a submit button, you need to change it like this:

`<button onclick="prime()" type="button">click me</button>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:06:32.217

I just tried the code, and what happens is simple: your form is posted when you click the button.

In the button onClick, write onClick=" return prime();" and add a

```
return false; 
```

in your javascript function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:43:16.390

在您的表单标签中，只需添加 onsubmit="return false;" 像这样-

```
<form name="frm1" onsubmit="return false;" > 
```

这将阻止您的表单被提交。

# java - 用于从 Java 中的 JPEG/EXIF 读取纬度和经度的开源库？

> ID：15055397
> 
> 赞同：2
> 
> 时间：2013-02-24T19:01:45.257
> 
> 标签：java, gps, latitude-longitude, exif

我想从 jpeg 图像中的 EXIF 信息中提取经纬度。我正在寻找一个基于 Java 的开源库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:06:53.803

I've never used it myself, but I have been told good thinks about this:

[http://drewnoakes.com/code/exif/](http://drewnoakes.com/code/exif/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T21:16:32.933

我还在寻找一个库来读取 jpeg 地理标记数据。根据 mjshaw 的建议，我查看了 Drew Noakes 编写的 Metadata Extractor。然而，它比我需要的要多得多。所以我在这里创建了一个精简版：[https ://github.com/alecdhuse/Java-Jpeg-Geotag-Reader](https://github.com/alecdhuse/Java-Jpeg-Geotag-Reader)

它将从照片的 exif 数据中返回纬度、经度、高度和时间。

# html - 使用“文本转换：大写；”时，Internet Explorer 不会将“ß”（ß/es-zed）更改为“SS”

> ID：15055398
> 
> 赞同：7
> 
> 时间：2013-02-24T19:01:54.510
> 
> 标签：html, internet-explorer, character, css

Internet Explorer 9 和 10在使用 CSS 规则时不会正确地将德语*es-zed* " `ß`" ( `&szlig;`, ' *sz* ') 更改为 " " 。这只是没有实现，还是我可以以某种方式处理的错误，而不是手动替换所有“”？`SS``text-transform: uppercase;``ß`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-24T21:12:17.407

这是一个特点。CSS 2.1 没有定义大写和小写的含义，IE 9 处理 U+00DF LATIN SMALL LETTER SHARP S “ß” 使其大写映射为 U+1E9E LATIN CAPITAL LETTER SHARP S “ẞ”（虽然有区别可能很难看到）。这发生在“标准模式”；在 Quirks 模式下，IE 9 将“ß”视为自己的大写映射。

这个特性很奇怪，因为*通常*的方法是将“ß”映射到“SS”，而大写的“ẞ”是几年前添加的，用于在单词大写的相对少数情况下*可选*使用，以便区分例如必须保留 Strauss 和 Strauß 的名称

[CSS 3 文本](http://www.w3.org/TR/css3-text/#text-transform0)工作草案规定应根据 Unicode 应用大小写映射，它们将“ß”映射到“SS” 。如果它将成为推荐，那么该功能就会变成一个错误。

通常，在 CSS 中进行大小写映射是不可靠的。最好在适当的情况下生成内容，如果需要，在服务器端执行映射。然后您可以单独处理任何特殊情况。您还可以使用客户端 JavaScript；在 JavaScript 中，大小写转换是 Unicode 感知的（JavaScript 已经很好地全球化的少数领域之一）。

# asp.net - 此页面的状态信息无效，可能已损坏，现在无法正常工作（在 Citrix 下）

> ID：15055399
> 
> 赞同：3
> 
> 时间：2013-02-24T19:02:02.060
> 
> 标签：asp.net, exception, viewstate, citrix

我有一个客户刚刚报告了 ASP.Net Web 应用程序的错误。他们通过 Citrix 运行它，并且多年来一直运行良好。在最近的更新之后，不会更改与视图状态远程相关的任何内容，他们开始收到以下错误：

```
System.Web.HttpException: The state information is invalid for this page and might be corrupted.
---> System.Web.UI.ViewStateException: Invalid viewstate.
 Client IP: ...
 Port: 4191
 User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; WOW64; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
 ViewState: 822106
 Referer: http://....
 Path: /...aspx
---> System.FormatException: Invalid length for a Base-64 char array.
at System.Convert.FromBase64String(String s)
at System.Web.UI.ObjectStateFormatter.Deserialize(String inputString)
at System.Web.UI.ClientScriptManager.EnsureEventValidationFieldLoaded() 
```

注意奇怪的视图状态 - 822106。这应该看起来像 /wEPDwUJLTc4OTg3Mjg4D2Q....（等）。他们给了我一个 IP 地址，这样我就可以直接进去测试（通过 VPN），一切都运行良好。但是，这样做时我没有通过 Citrix 运行它。我通过设置以下内容关闭了视图状态：

```
<pages enableViewState="false" enableViewStateMac="false"> 
```

在 web.config 中，但这没有任何区别。奇怪的是它已经工作了多年。任何和所有建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-15T23:39:13.997

在 .aspx 页面顶部的 @page 指令中，添加 ValidateRequest 属性并将其设置为 false。

不过，我只会在 Intranet 应用程序上推荐这个，因为它会打开一个安全漏洞。您可以使用 EnableViewStateMac 属性以同样的方式禁用 MAC 消息。这可能会有所帮助：

[http://support.microsoft.com/en-us/kb/2915218](http://support.microsoft.com/en-us/kb/2915218)

# android - 简单的 xml 到 android 的字典转换器

> ID：15055400
> 
> 赞同：0
> 
> 时间：2013-02-24T19:02:08.687
> 
> 标签：android, xml-parsing

我知道有 xmlpull 解析器可以在 android 平台上解析 xml。是否有任何适用于 android 的通用自定义 xml 解析器类似于以下链接中提到的内容。

**[http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)**

# php - 如何在php中选择项目后获取所选项目的值并执行某些操作

> ID：15055402
> 
> 赞同：-2
> 
> 时间：2013-02-24T19:02:11.397
> 
> 标签：php, html, events

我有这个代码，它首先查询数据库并填充一个下拉列表：我想确保这个代码将项目的值设置为第二个检索到的 ID：我想在上一个选定的项目上填充另一个下拉列表

代码看起来像这样

```
<?php
 $query="SELECT * FROM city ORDER BY ID";
 $result = mysql_query($query, $con);
 $options = array();
  while ($query_data = mysql_fetch_array($result)) {
  $options[$query_data["ID"]] = $query_data["Cname"];
  }
  ?>
      <select name="dropdown_city" >
 <?php foreach ($options as $key => $value) : ?>
<?php $selected = ($key == $_POST['dropdown_city']) ? 'selected="selected"' : ''; ?>
<option value="<?php echo $key ?>" <?php echo $selected ?>>
<?php echo $value ?>    </option>
<?php endforeach; ?>
 </select>
  </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:34:15.047

您可以对填充另一个查询的 php 文件进行 ajax 调用并在 jquery 中构建您的其他选择

```
</script>
$(function() {
    $('#dropdown_city').change(function() {
       $.getJSON('get_values.php', {city: $(this).val()}, function(data) {
           var dropdown = $('#dropdown_other').empty();
           $.each(data, function(i, item) {
              $('<option value="' + item[0] + '">' + item[1] +
                '</option>').appendTo(dropdown);
           });
       });
    });
});

</script>
...
<select name="dropdown_city" id="dropdown_city">

</select>
<select id="dropdown_other">
</select> 
```

在 get_values.php 中，您只需从数据库中返回另一个选择：

```
$city = mysql_real_escape_string($_GET['city']);
$result = mysql_query("SELECT id, name FROM other_table WHERE city = $city", $con);
$options = array();
echo json_encode(mysql_fetch_array($result)); 
```

# loops - 游标提前终止的 DB2 LOOP 语句

> ID：15055405
> 
> 赞同：0
> 
> 时间：2013-02-24T19:02:28.127
> 
> 标签：loops, db2

我在 DB2 (iSeries V5R3M0) 中有一个存储过程，它打开一个游标并进入一个循环语句。循环从输入（工作队列）表中获取下一行，处理记录，然后从输入表中删除该行。该过程工作正常，除了在循环终止之前处理随机数量的行 - 通常是 1 行，有时是 2 行，偶尔是 3 行。

有谁知道为什么它会提前完成？我在逻辑中看不到任何错误，所以我假设它可能与删除输入行有关，但在那种情况下，为什么它有时会处理 2 或 3 行？

这是该程序的精简版本：-

```
CREATE PROCEDURE DOTRANSFER (
 OUT PROCESSED INTEGER)
LANGUAGE SQL
BEGIN
DECLARE V_PTNO INTEGER ;
*** lot more declares
--
DECLARE AT_END SMALLINT DEFAULT 0 ;
DECLARE NOT_FOUND CONDITION FOR SQLSTATE '02000' ;
DECLARE CURREQUESTS ASENSITIVE NO SCROLL CURSOR WITH HOLD WITHOUT RETURN FOR
    SELECT *
    FROM PENDTRPF
    ORDER BY PTNO ;
DECLARE CONTINUE HANDLER FOR NOT_FOUND
    SET AT_END = 1 ;
--
-- Initialise
--
SET PROCESSED = 0 ;
OPEN CURREQUESTS ;
FETCH_LOOP : LOOP
    --
    -- Fetch the next transfer request
    --
    FETCH CURREQUESTS INTO
        V_PTNO , ...;
    IF AT_END <> 0 THEN
        LEAVE FETCH_LOOP ;
    END IF ;
*** Initialisation code
    --
    -- Start the update
    --
    COMMIT ;
*** Update or insert target table records
    --
    -- Done
    --
    DELETE FROM PENDTRPF WHERE PTNO = V_PTNO ;
    SET PROCESSED = PROCESSED + 1 ;
    COMMIT ;
END LOOP ;
END@ 
```

# php - 从服务器在 php 中运行套接字服务器

> ID：15055411
> 
> 赞同：-1
> 
> 时间：2013-02-24T19:03:03.543
> 
> 标签：php, sockets, websocket

好吧，最近我搜索了很多关于 php socket 服务器的信息，我看到在 PC 上运行，但找不到在服务器上运行它的方法。我的目标是使用 php websockets 与服务器聊天。我会感谢谁能给我一些建议，或者尝试这个工具的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:17:08.123

只需使用[Ratchet](http://socketo.me/)它更简化，这里的 PHP 套接字是一个[简单的聊天服务器](http://socketo.me/docs/hello-world)

```
use Ratchet\Server\IoServer;
use MyApp\Chat;

    require dirname(__DIR__) . '/vendor/autoload.php';

    $server = IoServer::factory(
        new Chat()
      , 8080
    );

    $server->run(); 
```

也可以考虑[phpwebsocket](https://code.google.com/p/phpwebsocket/)

# javascript - 如何在 Object.defineProperty 值标志中访问此变量？

> ID：15055418
> 
> 赞同：0
> 
> 时间：2013-02-24T19:03:48.750
> 
> 标签：javascript, properties, pseudo-class

我试图找到一种方法来初始化附加到具有本地化值引用的 JavaScript 伪类的所有实例的属性值，而无需手动迭代每个实例，例如以下代码：

```
function A() {
    this.a = '0';
}

var a = new A();
var b = new A();

document.write(a.a + a.b + a.c + '<BR />');

A.prototype.b = '1';
Object.defineProperty(A.prototype, 'c', {
    writable: true,
    value: (function() { return(this.a + '|'); })()
});

document.write(a.a + a.b + a.c + '<BR />');

b.c = '3';

document.write(a.a + a.b + a.c + '<BR />');
document.write(b.a + b.b + b.c + '<BR />'); 
```

输出：

```
0undefinedundefined
01undefined|
01undefined|
013 
```

但在所需条件下会输出：

```
0undefinedundefined
010|
010|
013 
```

编辑：

为澄清起见，该值应初始化为通过“this”访问的对象的属性。当属性附加到对象时，不会在 get 或 set 调用中以延迟方式进行，也不会使用其他本地属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:06:28.587

如果您希望能够访问`this`，则不能使用`value`和`writable`描述符选项。您将需要使用`get`和`set`。在这种情况下，由于您希望分配的值优先于默认值，因此由您来执行该逻辑。

```
Object.defineProperty(A.prototype, 'c', {
    get: function(){
      // If an overridden values was provided, then return that instead.
      if ('_c' in this) return this._c;
      return (this.a + '|');
    },
    set: function(val){
      this._c = val;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:17:36.050

您似乎想要一个动态计算`a`属性值的 getter 函数：

```
Object.defineProperty(A.prototype, 'c', {
    get: function() {
        return(this.a + '|');
    },
    set: function(x) { // overwritable:
        // create normal property directly on the object (not on the prototype)
        Object.defineProperty(this, 'c', {
            value: x,
            writable: true
        });
    }
}); 
```

您当前的代码就像

```
A.prototype.c = (function() { return(this.a + '|'); })(); // IEFE 
```

`this`全局对象在哪里`a`，当然是未定义的。

# windows-store-apps - Windows存储获取调度程序的正确方法，异步

> ID：15055419
> 
> 赞同：0
> 
> 时间：2013-02-24T19:03:49.260
> 
> 标签：windows-store-apps, silverlight-5.0, dispatcher

我目前正在研究 Windows 商店应用程序和 wp8 应用程序，它们都是 sl 和 c# 项目。

获取调度程序与 wpf 不同，我有点困惑，因为 Window.Current 中的调度程序似乎在我的一些异步方法中消失了。

我所能做的基本上只是在 App 类中放置一个属性，但这似乎很不安全，我不遵循这里的逻辑。

我将发布一个示例：

```
internal class MainviewModel : ViewModelBase 
{
 ..............
    private async void GetLastDocumetAsync()
    {
            // Window.Current is null here, but not outside async!
            await Window.Current.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
            {
                ObservableCollection<ScannedDocument> docs = await ServiceLocator.DocumentClient.GetLastScannedDocumentsAsync();                    
                ScannedDocuments.AddRange(docs);
                SelectedDocument = ScannedDocuments.LastOrDefault();
            }
    }
    ...
    public void SomeMethod(){
        // Window.Current is not null
        Task.Factory.StartNew(() => GetLastDocumetAsync());

    }
} 
```

调用 SomeMethod() 时，Window.Current 不为空。当我们在异步方法中时，我需要调度程序，它是空的。

任何指针？

兄弟，

波尔卡极端主义者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:18:58.223

首先，我强烈建议尽可能重构代码，这样就不需要显式捕获和恢复上下文。只要您只使用普通的`async`and `await`，您根本不需要捕获上下文。

在您的示例代码中，不需要`StartNew`，因此您可以执行以下操作：

```
private async Task GetLastDocumentsAsync()
{
    ObservableCollection<ScannedDocument> docs = await ServiceLocator.DocumentClient.GetLastScannedDocumentsAsync();                    
    ScannedDocuments.AddRange(docs);
    SelectedDocument = ScannedDocuments.LastOrDefault();
}

public async Task SomeMethodAsync()
{
    await GetLastDocumentsAsync();
    ...
} 
```

如果您确实*需要*显式捕获上下文，我建议您使用`SynchronizationContext`. 你可以把它想象成一个跨平台的`Dispatcher`；[我的MSDN 文章](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)中有更多信息。

# php - 如何在 Wordpress 页面模板中正确嵌入 php 代码？

> ID：15055420
> 
> 赞同：0
> 
> 时间：2013-02-24T19:03:51.650
> 
> 标签：php, wordpress, constructor

我正在使用带有构造函数主题的 Wordpress。我遇到了以下关于构建简单的 crud 应用程序的教程：http: [//www.jeasyui.com/tutorial/app/crud3.php](http://www.jeasyui.com/tutorial/app/crud3.php)

我已经根据我的需要对其进行了定制，可以在此处找到正确工作的演示： [http ://www.szerelmifajdalomklinika.hu/wp-content/themes/constructor/index2.html#](http://www.szerelmifajdalomklinika.hu/wp-content/themes/constructor/index2.html#)

index2.html 的代码是：

```
<link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/icon.css">

<style type="text/css">
    form{
        margin:0;
        padding:0;
    }
    .dv-table td{
        border:0;
    }
    .dv-table input{
        border:1px solid #ccc;
    }
</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.min.js"></script>
<script type="text/javascript" src="http://www.jeasyui.com/easyui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="http://www.jeasyui.com/easyui/datagrid-detailview.js"></script>
<script type="text/javascript">
    $(function(){
        $('#dgpartner').datagrid({
            view: detailview,
            detailFormatter:function(index,row){
                return '<div class="ddv"></div>';
            },
            onExpandRow: function(index,row){
                var ddv = $(this).datagrid('getRowDetail',index).find('div.ddv');
                ddv.panel({
                    border:false,
                    cache:true,
                    href:'show_form.php?index='+index,
                    onLoad:function(){
                        $('#dgpartner').datagrid('fixDetailRowHeight',index);
                        $('#dgpartner').datagrid('selectRow',index);
                        $('#dgpartner').datagrid('getRowDetail',index).find('form').form('load',row);
                    }
                });
                $('#dgpartner').datagrid('fixDetailRowHeight',index);
            }
        });
    });
    function saveItem(index){
        var row = $('#dgpartner').datagrid('getRows')[index];
        var url = row.isNewRecord ? 'save_user.php' : 'update_user.php?partner_id='+row.partner_id;
        $('#dgpartner').datagrid('getRowDetail',index).find('form').form('submit',{
            url: url,
            onSubmit: function(){
                return $(this).form('validate');
            },
            success: function(data){
                data = eval('('+data+')');
                data.isNewRecord = false;
                $('#dgpartner').datagrid('collapseRow',index);
                $('#dgpartner').datagrid('updateRow',{
                    index: index,
                    row: data
                });
            }
        });
    }
    function cancelItem(index){
        var row = $('#dgpartner').datagrid('getRows')[index];
        if (row.isNewRecord){
            $('#dgpartner').datagrid('deleteRow',index);
        } else {
            $('#dgpartner').datagrid('collapseRow',index);
        }
    }
    function destroyItem(){
        var row = $('#dgpartner').datagrid('getSelected');
        if (row){
            $.messager.confirm('Confirm','Are you sure you want to remove this user?',function(r){
                if (r){
                    var index = $('#dgpartner').datagrid('getRowIndex',row);
                    $.post('destroy_user.php',{partner_id:row.partner_id},function(){
                        $('#dgpartner').datagrid('deleteRow',index);
                    });
                }
            });
        }
    }
    function newItem(){
        $('#dgpartner').datagrid('appendRow',{isNewRecord:true});
        var index = $('#dgpartner').datagrid('getRows').length - 1;
        $('#dgpartner').datagrid('expandRow', index);
        $('#dgpartner').datagrid('selectRow', index);
    }
</script>

<table id="dgpartner" title="Partnerek" style="width:900px;height:250px"
        url="get_users.php"
        toolbar="#toolbar" pagination="true"
        fitColumns="true" singleSelect="true">
    <thead>
        <tr>
            <th field="partner_nickname" width="50">Partner beceneve</th>
            <th field="partner_description" width="50">Partner leírása</th>

        </tr>
    </thead>
</table>
<div id="toolbar">
    <a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newItem()">New</a>
    <a href="#" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="destroyItem()">Destroy</a>
</div> 
```

我想把它做成一个页面模板。可以在这里找到[http://www.szerelmifajdalomklinika.hu/kapcsolati-vazlat/](http://www.szerelmifajdalomklinika.hu/kapcsolati-vazlat/)

模板文件 template-szerelmi-partner_raw.php 的代码如下（粘贴到容器中）：

```
<?php
/*
Template Name: Kapcsolat-oldal
*/
/**
 * @package WordPress
 * @subpackage Constructor
 * 
 */

get_header(); ?>
<div id="content" class="box shadow opacity <?php the_constructor_layout_class() ?>">
    <div id="container" >

    <?php $post = get_page(get_query_var('page_id')); $content = apply_filters('the_content', $post->post_content); echo $content;  ?>

        <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="http://www.jeasyui.com/easyui/themes/icon.css">

 <style type="text/css">
        form{
            margin:0;
            padding:0;
        }
        .dv-table td{
            border:0;
        }
        .dv-table input{
            border:1px solid #ccc;
        }
    </style>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.min.js"></script>
    <script type="text/javascript" src="http://www.jeasyui.com/easyui/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="http://www.jeasyui.com/easyui/datagrid-detailview.js"></script>
    <script type="text/javascript">
        $(function(){
            $('#dgpartner').datagrid({
                view: detailview,
                detailFormatter:function(index,row){
                    return '<div class="ddv"></div>';
                },
                onExpandRow: function(index,row){
                    var ddv = $(this).datagrid('getRowDetail',index).find('div.ddv');
                    ddv.panel({
                        border:false,
                        cache:true,
                        href:'show_form.php?index='+index,
                        onLoad:function(){
                            $('#dgpartner').datagrid('fixDetailRowHeight',index);
                            $('#dgpartner').datagrid('selectRow',index);
                            $('#dgpartner').datagrid('getRowDetail',index).find('form').form('load',row);
                        }
                    });
                    $('#dgpartner').datagrid('fixDetailRowHeight',index);
                }
            });
        });
        function saveItem(index){
            var row = $('#dgpartner').datagrid('getRows')[index];
            var url = row.isNewRecord ? 'save_user.php' : 'update_user.php?partner_id='+row.partner_id;
            $('#dgpartner').datagrid('getRowDetail',index).find('form').form('submit',{
                url: url,
                onSubmit: function(){
                    return $(this).form('validate');
                },
                success: function(data){
                    data = eval('('+data+')');
                    data.isNewRecord = false;
                    $('#dgpartner').datagrid('collapseRow',index);
                    $('#dgpartner').datagrid('updateRow',{
                        index: index,
                        row: data
                    });
                }
            });
        }
        function cancelItem(index){
            var row = $('#dgpartner').datagrid('getRows')[index];
            if (row.isNewRecord){
                $('#dgpartner').datagrid('deleteRow',index);
            } else {
                $('#dgpartner').datagrid('collapseRow',index);
            }
        }
        function destroyItem(){
            var row = $('#dgpartner').datagrid('getSelected');
            if (row){
                $.messager.confirm('Confirm','Are you sure you want to remove this user?',function(r){
                    if (r){
                        var index = $('#dgpartner').datagrid('getRowIndex',row);
                        $.post('destroy_user.php',{partner_id:row.partner_id},function(){
                            $('#dgpartner').datagrid('deleteRow',index);
                        });
                    }
                });
            }
        }
        function newItem(){
            $('#dgpartner').datagrid('appendRow',{isNewRecord:true});
            var index = $('#dgpartner').datagrid('getRows').length - 1;
            $('#dgpartner').datagrid('expandRow', index);
            $('#dgpartner').datagrid('selectRow', index);
        }
    </script>

    <table id="dgpartner" title="Partnerek" style="width:900px;height:250px"
            url="get_users.php"
            toolbar="#toolbar" pagination="true"
            fitColumns="true" singleSelect="true">
        <thead>
            <tr>
                <th field="partner_nickname" width="50">Partner beceneve</th>
                <th field="partner_description" width="50">Partner leírása</th>

            </tr>
        </thead>
    </table>
    <div id="toolbar">
        <a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newItem()">New</a>
        <a href="#" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="destroyItem()">Destroy</a>
    </div>

    </div><!-- id='container' -->
    <?php get_constructor_sidebar(); ?>
</div><!-- id='content' -->
<?php get_footer(); ?> 
```

如您所见，第二个变体无法正常工作。甚至表头也呈现得很糟糕。**如何将此代码正确导入页面模板？**

关于可能是什么问题的一些想法：在调用的文件中，（例如get_users.php），有一个可能，这需要与wordpress默认连接互换`include 'conn.php';`？`$conn = @mysql_connect(xxx);`如果是这样，怎么做？

提到的文件有包含，并且在主题的 header.php 之外还有一些东西。如果我在那里复制所有内容，它并不能解决问题。

感谢您的帮助。

西罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:24:38.943

如果我 iframe 所说的 html 页面，它实际上可以工作。

```
<iframe name="FRAME2" src="http://www.szerelmifajdalomklinika.hu/wp-content/themes/constructor/index2.html" frameborder="1" width="450" height="400"></iframe> 
```

到页面模板。

# c++ - 如何正确旋转 GLM 四元数？

> ID：15055423
> 
> 赞同：7
> 
> 时间：2013-02-24T19:03:58.530
> 
> 标签：c++, rotation, transformation, quaternions, glm-math

我想在我的游戏中将我的车向左旋​​转 90 度。

当我使用此代码时：

```
 glm::quat rot(info.Rotation.w,info.Rotation.x,info.Rotation.y,info.Rotation.z);
            glm::quat done(glm::rotate(rot,glm::eulerAngles(rot)+glm::vec3(90.0f,0.0,0.0)));
            info.Rotation.x = done.x;
            info.Rotation.y = done.y;
            info.Rotation.z = done.z;
            info.Rotation.w = done.w; 
```

汽车发生了奇怪的旋转。

然而，以下代码根本不会改变汽车的旋转（正如我所期望的，只是为了确保 GLM 与游戏中的 quats 兼容）：

```
 glm::quat rot(info.Rotation.w,info.Rotation.x,info.Rotation.y,info.Rotation.z);
            glm::quat done(rot);
            info.Rotation.x = done.x;
            info.Rotation.y = done.y;
            info.Rotation.z = done.z;
            info.Rotation.w = done.w; 
```

每当我尝试这个来检查旋转是否随它改变时：

```
 glm::quat rot(info.Rotation.w,info.Rotation.x,info.Rotation.y,info.Rotation.z);
            glm::quat done(glm::rotate(rot,vec3(0.0,0.0,0.0)));
            info.Rotation.x = done.x;
            info.Rotation.y = done.y;
            info.Rotation.z = done.z;
            info.Rotation.w = done.w; 
```

汽车旋转在游戏中设置为 0,0,0,0 旋转。我希望这段代码不会改变旋转，因为我希望下面的代码将汽车向左旋转 90 度：

```
 glm::quat rot(info.Rotation.w,info.Rotation.x,info.Rotation.y,info.Rotation.z);
            glm::quat done(glm::rotate(rot,vec3(90.0,0.0,0.0)));
            info.Rotation.x = done.x;
            info.Rotation.y = done.y;
            info.Rotation.z = done.z;
            info.Rotation.w = done.w; 
```

但这不是我想要的方式。它只是设置旋转，而不是将其添加到“rot”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T05:57:37.500

[虽然这不是 GLM，但乘法中四元数的*顺序*仍然很清楚，这通常是问题所在]

我使用这样的代码来避免万向节锁定（因为任何将万向节锁定引入已经有四元数的代码的解决方案都太讽刺了，无法考虑）。

这是 C 代码， QuaternionFromAngles() 和 QuaternionMultiply() 正在覆盖第一个参数的目标。 `world->axis6_input_rotation`只是一个 Quaternionf_t。输入来自 6 轴控制器，它比您的车辆模拟更自由一些，除非您实际上在代码中传递向量。

```
typedef struct { float w, x, y, z; } Quaternionf_t; 

void GuiMotion6axis(World_t *world, Port_t *port,
                    int x,  int y,  int z,
                    int xr, int yr, int zr)
{
    // convert spaceball input to World->rotation (a quaternion)
    //    Source http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/index.htm
    const float scale = 0.0004; // should factor in the time delta it covers as well.
    float xrf = (float)xr * scale;
    float yrf = (float)yr * scale;
    float zrf = (float)zr * scale;

    QuaternionFromAngles(& world->axis6_input_rotation, xrf, yrf, zrf);
    QuaternionMultiply(& world->rotation,  // worldrot = inputrot * worldrot
                       & world->axis6_input_rotation,  // a read-only use
                       & world->rotation               // a read-only use
                       );

    world->position.x += (float)x * scale;  // really should factor in the
    world->position.y += (float)y * scale;  //   elasped time.
    world->position.z += (float)z * scale;
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T20:26:34.053

如果您不关心*万向节锁*，那么这应该可以。

```
glm::quat rot(info.Rotation.w,info.Rotation.x,info.Rotation.y,info.Rotation.z);
glm::quat rot_euler_angles = glm::gtx::quaternion::eulerAngles(rot);
rot_euler_angles.x += 90;

glm::quat done(glm::rotate(rot,rot_euler_angles));
info.Rotation.x = done.x;
info.Rotation.y = done.y;
info.Rotation.z = done.z;
info.Rotation.w = done.w; 
```

我认为这也是有效的

```
glm::vec3 rot(90.0*(float)M_PI/180.0, 0, 0);
info.Rotation = glm::normalize(info.Rotation * glm::quat(rot)); 
```

四元数很棒，因为它们可以复合以进行非常复杂的旋转。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-04T21:27:34.737

这是我写的一个简单的函数，它将随着参考轴旋转（度数）。您可以通过在单独的部分（w 和 (x,y,z) 分量）中创建四元数来创建它。GLM 有一个初始化器来接受这个，然后您可以将其转换为 4x4 或 3x3 矩阵进行转换。

```
 void QuaternionRotate(const glm::vec3& axis, float angle)
    {
        float angleRad = glm::radians(angle);
        auto& axisNorm = glm::normalize(axis);

        float w = glm::cos(angleRad / 2);
        float v = glm::sin(angleRad / 2);
        glm::vec3 qv = axisNorm * v;

        glm::quat quaternion(w, qv);
        glm::mat4 quatTransform = glm::mat4_cast(quaternion);

       // Now with the quaternion transform you rotate any vector or compound it with another transformation matrix
    } 
```

# mysql - 哪些索引可以加快这个运行缓慢的查询？

> ID：15055424
> 
> 赞同：0
> 
> 时间：2013-02-24T19:04:03.460
> 
> 标签：mysql, sql, query-optimization

为什么这个查询在 MySQL 5.5.30 上运行很慢？：

* * *

```
SELECT message.mid,
       message.sender,
       message.date,
       message.subject,
       message.body,
       message.folder,
       sender.firstname,
       sender.lastname,
       sender.status,
       Group_concat(DISTINCT recipientinfo.rvalue) AS recipientAddresses,
       Group_concat(DISTINCT recipients.lastname)  AS recipientLastNames,
       Group_concat(recipients.status)             AS recipientPositions
FROM   message
       LEFT JOIN employeelist AS sender
              ON message.sender = sender.email_id
       LEFT JOIN recipientinfo
              ON message.mid = recipientinfo.mid
       LEFT JOIN employeelist AS recipients
              ON recipientinfo.rvalue = recipients.email_id
GROUP  BY recipientinfo.mid
ORDER  BY NULL; 
```

![解释的结果](../Images/2aef68f9b3e9359f9f2f9a423a59febc.png)

编辑：添加了 CREATE TABLE 输出：

```
| message | CREATE TABLE `message` (
  `mid` int(10) NOT NULL DEFAULT '0',
  `sender` varchar(127) NOT NULL DEFAULT '',
  `date` datetime DEFAULT NULL,
  `message_id` varchar(127) DEFAULT NULL,
  `subject` text,
  `body` text,
  `folder` varchar(127) NOT NULL DEFAULT '',
  PRIMARY KEY (`mid`),
  KEY `sender` (`sender`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 |

| employeelist | CREATE TABLE `employeelist` (
  `eid` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `firstName` varchar(31) NOT NULL DEFAULT '',
  `lastName` varchar(31) NOT NULL DEFAULT '',
  `Email_id` varchar(31) NOT NULL DEFAULT '',
  `Email2` varchar(31) DEFAULT NULL,
  `Email3` varchar(31) DEFAULT NULL,
  `EMail4` varchar(31) DEFAULT NULL,
  `folder` varchar(31) NOT NULL DEFAULT '',
  `status` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`eid`),
  UNIQUE KEY `Email_id` (`Email_id`),
  KEY `firstName` (`firstName`),
  KEY `lastName` (`lastName`),
  KEY `status` (`status`),
  KEY `Email2` (`Email2`,`Email3`,`EMail4`)
) ENGINE=MyISAM AUTO_INCREMENT=153 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC |

| recipientinfo | CREATE TABLE `recipientinfo` (
  `rid` int(10) NOT NULL DEFAULT '0',
  `mid` int(10) unsigned NOT NULL DEFAULT '0',
  `rtype` enum('TO','CC','BCC') DEFAULT NULL,
  `rvalue` varchar(127) DEFAULT NULL,
  `dater` datetime DEFAULT NULL,
  PRIMARY KEY (`rid`),
  KEY `rvalue` (`rvalue`),
  KEY `mid` (`mid`),
  KEY `rtype` (`rtype`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 | 
```

* * *

我已经在收件人信息表上添加了索引，但我不知道我应该在消息表上索引什么以使其使用键。我猜从其他信息中我发现我应该使用复合索引，但是使用哪个表的哪些列？“使用临时”是可以避免的吗？任何提示或帮助表示赞赏:)

# python - Python 子进程：为什么 stdin=PIPE 会改变某些命令的输出？

> ID：15055426
> 
> 赞同：0
> 
> 时间：2013-02-24T19:04:18.550
> 
> 标签：python, windows, subprocess, pipe, stdin

如果标准输入是管道，则某些交互式命令的输出会有所不同。这是为什么？

下面我在 3 个不同的命令上测试 subprocess.Popen，有和没有标准输入管道。

**代码：**

```
import subprocess, time

def run_command(command, enable_input):
    print 'command="{}", enable_input={}:'.format(command, enable_input)

    # Launch the process and set up pipes.
    if enable_input:
        stdin = subprocess.PIPE
    else:
        stdin = None
    child = subprocess.Popen(command, stdin=stdin)

    # Wait a second for output.
    time.sleep(1)

    # Terminate the child if it hasn't finished.
    if child.poll() == None:
        child.terminate()

    print '\n-----' # Print a separator

commands = ('cmd', 'python', 'timeout 1')
for command in commands:
    run_command(command, enable_input=False)
    run_command(command, enable_input=True) 
```

**输出：**

```
command="cmd", enable_input=False:
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\>
-----
command="cmd", enable_input=True:
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\>
-----
command="python", enable_input=False:
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>>
-----
command="python", enable_input=True:

-----
command="timeout 1", enable_input=False:

Waiting for 0 seconds, press a key to continue ...

-----
command="timeout 1", enable_input=True:
ERROR: Input redirection is not supported, exiting the process immediately.

----- 
```

下面链接的问题的答案表明，一些程序试图检测它们是由人还是由脚本运行。这里是这样吗？如果是这样，他们如何在 Windows 上检测到这一点？

[为什么向 subprocess.Popen 提供标准输入会导致写入标准输出的内容发生变化？](https://stackoverflow.com/questions/2356391/why-does-supplying-stdin-to-subprocess-popen-cause-what-is-written-to-stdout-to)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:08:33.553

是的，如果您正在管道或重定向输入，某些程序的行为会有所不同。你可以像这样检测它：

```
import sys
print sys.stdin.isattty()   # True if it's a terminal, False if it's redirected 
```

这适用于 *nix 以及 Windows。

# r - 离线 ggplot2 文档？

> ID：15055427
> 
> 赞同：3
> 
> 时间：2013-02-24T19:04:19.700
> 
> 标签：r, ggplot2

这本身不是一个编程问题，但是看到 R 和 ggplot2 在这里很受欢迎，我想我会问是否有人知道是否有办法在[http://docs.ggplot2 下载 ggplot2 的所有文档。 org](http://docs.ggplot2.org)以便它们可以离线访问。我经常处于无法访问互联网的情况。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T19:58:21.493

Winston Chang的[R Graphics Cookbook](https://rads.stackoverflow.com/amzn/click/com/1449316956)怎么样？

**编辑：**或使用`wget`，正如 Ben Bolker 建议的那样：

```
 wget --recursive --no-clobber --page-requisites --html-extension --convert-links   --restrict-file-names=windows --domains=docs.ggplot2.org  http://docs.ggplot2.org/current/ 
```

--domains 选项应防止关注[http://docs.ggplot2.org](http://docs.ggplot2.org)之外的链接（如页面底部的链接）。但是我没有测试。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-24T21:06:45.030

页面本身是使用 Hadley 的 staticdocs 包创建的。您可以自己在 ggplot2 上运行 staticdocs 来创建页面。您将需要该`highlight`软件包来安装 staticdocs。你可以在[这里](http://cran.r-project.org/web/packages/highlight/index.html)得到它，或者为方便起见我将它托管在 github 上，你可以使用 devtools 和命令得到它

```
library(devtools)
install_github("highlight", "Dasonk") 
```

要安装 staticdocs，您也可以使用 devtools

```
install_github("staticdocs") 
```

要运行 staticdocs，您需要 ggplot2 代码，使用 git 获取它是最简单的。假设您位于希望将 ggplot2 文件夹下载到的目录中，您可以使用以下内容（假设您已安装 git）。

```
git clone https://github.com/hadley/ggplot2.git 
```

或者，您可以从[CRAN 页面](http://cran.r-project.org/web/packages/ggplot2/index.html)获取包源并将其解压缩。

确保您有 ggplot2 的建议包（如果没有，则 staticdocs 将在遇到无法运行的示例时突然退出，因为您没有安装建议的包）。如果您不确定是否拥有所有建议的软件包，最简单的方法是使用参数安装 ggplot2 `dependencies=TRUE`。

```
install.packages("ggplot2", dependencies = TRUE) 
```

然后您可以使用以下命令运行 staticdocs：

```
library(staticdocs)
setwd("path/to/ggplot2/folder")
build_package(".", "inst/staticdocs") 
```

然后你可以在 inst/staticdocs 子文件夹中找到你需要的所有文件，打开 index.html 可以让你在本地浏览。

请注意，一旦您运行它，使用 wget 或其他方法可能会更快、更容易。 `staticdocs`完成完成需要相当多的时间，而且我没有浏览所有页面以确保一切正常。这种方法的另一个缺点是它基于包的当前开发状态​​运行，因此它可能比你在系统上实际安装的要提前一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T09:31:59.603

我的回答不是 R 特定的。

当您有互联网时，您可以手动打开每个页面并保存它们。例如，如果您有 Google Chrome（我相信其他浏览器有其扩展列表），您可以从 Chrome Web Store 安装 Awesome Screenshot: Capture & Annotate 或 Screen Capture（由 Google 提供），然后选择捕获整个页面. 还有一些扩展可以让您将页面保存为 PDF 文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T19:59:08.043

另一种方法是使用包`knit_rd()`中的函数`knitr`。这将获取帮助页面的 HTML 版本，提取示例，并运行它们以捕获输出（文本或图形）`knitr`。这将为您提供一个 HTML 文件（和图形）目录，无需连接到 Internet 即可查看。它看起来与通过 创建的网站不完全相同`staticdocs`，但它具有相同的信息，包括工作示例和这些示例的图形输出。

# xcode - 创建自动布局按钮组

> ID：15055439
> 
> 赞同：1
> 
> 时间：2013-02-24T19:05:21.120
> 
> 标签：xcode, cocoa, autolayout

好的，所以我被困在这个问题上。我正在获取一个包含 2-15 个标题（NSStrings）的数组，它被传递到我的自定义类 TriButtonGroup 中，以变成一行/多行按钮！如果按钮组（UIButton 的子类）都可以容纳，则按钮组将水平排列！只要所有标题都适合按钮，这就很好用！但是如果水平空间不足，我需要 TriButtonGroup 将一些按钮移动到新行。有关详细信息，请参阅随附的图像。

![在此处输入图像描述](../Images/c079c9a362d7455132c4aa21b6b6de25.png)

![在此处输入图像描述](../Images/0b54f58138828fc0f62fb64ee4dd808d.png)

![在此处输入图像描述](../Images/384325f836329522745caaf77f4512dc.png)

这是我的代码，现在，它不能处理字符串太长的情况。我只是无法理解这个！:(

```
int numButtons = [titleArray count];
        int counter = 0;
        TriButtonCell *previousButton = nil;

        for(NSString *title in titleArray) {

            TriButtonCell *button = [[TriButtonCell alloc] initWithFrame:CGRectMake(0,0,0,0)];
            [button setTitle:title forState:UIControlStateNormal];
            [button setTag:1250+counter];
            [button addTarget:nil action:@selector(pushButton:) forControlEvents:UIControlEventTouchDown];
            [button.titleLabel setNumberOfLines:1];
            [button setTranslatesAutoresizingMaskIntoConstraints:NO];
            [self addSubview:button];

            //Add the correct sizing!
            if(previousButton != nil) {
                [self addConstraint:[NSLayoutConstraint constraintWithItem:button attribute:NSLayoutAttributeLeft relatedBy:NSLayoutRelationEqual toItem:previousButton attribute:NSLayoutAttributeRight multiplier:1.0f constant:0.0f]];
                [self addConstraint:[NSLayoutConstraint constraintWithItem:button attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:previousButton attribute:NSLayoutAttributeWidth multiplier:1.0f constant:0.0f]];
            } else {
                //This is the first button! Set the correct width!
                [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[button]" options:0 metrics:metricsDictionary views:NSDictionaryOfVariableBindings(button)]];
            }
            [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[button(60)]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(button)]];

            previousButton = button;

            counter++;
        }

        //Set the distance to the last button!
        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"[previousButton]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(previousButton)]];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:53:57.890

我唯一能想到的就是询问每个按钮并手动`TriButtonCell`计算`intrinsicContentSize`出哪些按钮适合一行，并分别为每一行创建约束。

像这样的东西（写在我的头上，所以它可能不是 100% 准确的）

```
CGFloat rowWidth = 0.0;
NSView *previousButton;

for (NSString *title in titleArray) {
    TriButtonCell *button = [[TriButtonCell alloc] initWithFrame:NSZeroRect];
    // rest of button init here

    NSSize intrinsicSize = [button intrinsicContentSize];

    if(rowWidth + intrinsicSize.width < [self bounds].size.width) {
        if(previousButton != nil) {
            NSDictionary *viewsDict = {@"previousButton":previousButton, @"currentButton": button};
            [self addConstrints:[NSLayoutConstraint constraintsWithVisualFormat:@"[previousButton][currentButton(==previousButton)" 
                                                                        options:0
                                                                        metrics:nil
                                                                        views:viewsDict];
        } else {
            //This is the first button! Set the correct width!
            [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[button]"
                                                                         options:0
                                                                         metrics:nil 
                                                                           views:NSDictionaryOfVariableBindings(button)]];
        }
    } else {
        // We need a new row.
        rowWidth = 0.0;

        NSDictionary *viewsDict = {@"previousButton":previousButton, @"currentButton": button};
        // Connect the top of the current button to the bottom of the button of the previous row
        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[previousButton][currentButton]"
                                                                     options:0
                                                                     metrics:nil
                                                                       views:viewsDict];

        // Also connect it to the left side of the parent view
        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[currentButton]"
                                                                     options:0
                                                                     metrics:nil
                                                                       views:viewsDict];
    }

    previousButton = button;
    counter++;

}

[self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:"@[previousButton]|"
                options:0
                metrics:nil
                  views:NSDictionaryOfVariableBindings(previousButton)]]; 
```

# wpf - MVVM , TabControl , 引用相同的内容

> ID：15055445
> 
> 赞同：0
> 
> 时间：2013-02-24T19:05:59.300
> 
> 标签：wpf, mvvm, tabcontrol

我正在使用 MVVM 构建一个 WPF 应用程序，它包含一组我在 XMAL 文件中引用到我的 tabItemViewModel 的 observableCollection 的 tabcontrols ......问题是我所有的 tabitems 都包含相同的东西！（我的选项卡每个都包含一个文本框，如果我在一个选项卡中更改文本框的内容，我会在所有其他选项卡中看到相同的内容！如果我创建一个新选项卡，我编辑的所有内容都会消失！ ) ，就像我所有的选项卡都与同一个视图模型或类似的东西相关！

我正在使用 Josh Smith 示例继续，我确信我遵循了相同的理念和架构！！！！

请问有什么帮助吗？？谢谢 ：） ：）

* * *

```
my static ressources :

        <ResourceDictionary
          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          xmlns:view="clr-namespace:DealSaverMargo"
          xmlns:modelView="clr-namespace:ViewModelDealSaver;assembly=ViewModelDealSaver"
          >

            <DataTemplate DataType="{x:Type modelView:ClientCreationViewModel}">
                <view:ClientCreation />
            </DataTemplate>

            <DataTemplate DataType="{x:Type modelView:TabItemClientsListingModelView}">
                <view:ClientListing />
            </DataTemplate> (........)

            <DataTemplate x:Key="ClosableTabItemTemplate">
                <DockPanel >
                    <Button
                  Command="{Binding Path=CloseCommand}"
                Content="X"
                Cursor="Hand"
                DockPanel.Dock="Right"
                Focusable="False"
                FontFamily="Courier"
                FontSize="9"
                FontWeight="Bold"
                Margin="0,1,0,0"
                Padding="0"
                VerticalContentAlignment="Bottom"
                Width="16" Height="16"
                />
                    <ContentPresenter Content="{Binding Path=Header}"
                VerticalAlignment="Center">
                    </ContentPresenter>
                </DockPanel>
            </DataTemplate>

            <DataTemplate x:Key="TabsTemplate">
                <TabControl
              IsSynchronizedWithCurrentItem="True"
              ItemsSource="{Binding}"
              ItemTemplate="{StaticResource ClosableTabItemTemplate}"
              Margin="4"
              />
            </DataTemplate>

    </ResourceDictionary>

My MainWindowViewModel : 

public class MainWindowViewModel : ViewModelBase
{
    //Propriétés
    ObservableCollection<TabViewModel> _tabItems;

   //Propriétés publiques: 
    public ObservableCollection<TabViewModel> Workspaces
    {
        get
        {
            if (_tabItems == null)
            {
                _tabItems = new ObservableCollection<TabViewModel>();
                _tabItems.CollectionChanged += this.OnWorkspacesChanged;
            }
            return _tabItems;
        }
    }

    void OnWorkspacesChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.NewItems != null && e.NewItems.Count != 0)
            foreach (TabViewModel workspace in e.NewItems)
                workspace.RequestClose += this.OnWorkspaceRequestClose;

        if (e.OldItems != null && e.OldItems.Count != 0)
            foreach (TabViewModel workspace in e.OldItems)
                workspace.RequestClose -= this.OnWorkspaceRequestClose;
    }
    void OnWorkspaceRequestClose(object sender, EventArgs e)
    {
        TabViewModel workspace = sender as TabViewModel;
        workspace.Dispose();
        this.Workspaces.Remove(workspace);
    }
    public MainWindowViewModel()
    {
        _tabItems = new ObservableCollection<TabViewModel>();
        //Assignation des commandes: 
        _clientCreationCommand = new RelayCommand(new Action<object>(ClientCreationTabCommand));
        _dealCreationCommand = new RelayCommand(new Action<object>(DealCreationTabCommand));
        _clientsManagementCommand = new RelayCommand(new Action<object>(ClientListingTabcommand));
    }
    #region //Commandes :

    public ICommand _clientCreationCommand
    {
        get;
        set;
    }

    public ICommand _dealCreationCommand
    {
        get;
        set;
    }

    public ICommand _clientsManagementCommand
    {
        get;
        set;
    }

    #endregion
    #region //Gestion des commandes :
    /// <summary>
    /// Rajout des workspaces :
    /// </summary>
    /// <param name="param"></param>
    public void ClientCreationTabCommand(object param)
    {
        TabViewModel clientsManager = new ClientCreationViewModel("Client Creation");
        _tabItems.Add(clientsManager);
        ICollectionView collection = CollectionViewSource.GetDefaultView(_tabItems);
        collection.MoveCurrentTo(clientsManager); //the corresponding view is set to active. 

    }

    public void ClientListingTabcommand(object param)
    {
        TabViewModel clientsListing = new TabItemClientsListingModelView("Client Management");
        _tabItems.Add(clientsListing);
        ICollectionView collection = CollectionViewSource.GetDefaultView(_tabItems);
        collection.MoveCurrentTo(clientsListing); //the corresponding view is set to active. 
    }
    #endregion

}

my Client Creation user control : 

     <UserControl x:Class="DealSaverMargo.ClientCreation"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

                xmlns:view="clr-namespace:DealSaverMargo.Views">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="1*"/>
                    <RowDefinition Height="6*"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <Label Content="Deals Database" Grid.Row="0" FontSize="20" FontWeight="Bold" Background="#FFBFBFBF"></Label>

                <Grid Grid.Row="1" VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <!--Définition des elements-->
                    <Label Content="ID" HorizontalAlignment="Left" Width="90" />
                    <TextBox x:Name="ID" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Stretch" Margin="3"></TextBox>
                    <Label Grid.Row="1" Content="Social Identity" HorizontalAlignment="Left" Width="90" />
                    <TextBox x:Name="socialIdentityBox" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Stretch" Margin="3"></TextBox>
                    <Label Grid.Column="0" Grid.Row="2" Content="Phone Number"/>
                    <TextBox x:Name="phoneNumberBox" Grid.Column="1" Grid.Row="2" HorizontalAlignment="Stretch" Margin="3"></TextBox>
                    <Label Grid.Column="0" Grid.Row="3" Content="Mail Address"/>
                    <TextBox x:Name="mailAddressBox" Grid.Column="1" Grid.Row="3" HorizontalAlignment="Stretch" Margin="3"></TextBox>
                    <Label Grid.Column="0" Grid.Row="4" Content="Created By"/>
                    <TextBox x:Name="createdByBox" Grid.Column="1" Grid.Row="4" HorizontalAlignment="Stretch" Margin="3"></TextBox>
                </Grid>
                <Grid Grid.Row="2">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"></ColumnDefinition>
                            <ColumnDefinition Width="1*"></ColumnDefinition>
                            <ColumnDefinition Width="1*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="1" Margin="5" Content="Add"></Button>
                        <Button Grid.Column="2" Margin="5" Content="Cancel"></Button>
                    </Grid>
                </Grid>
            </Grid>
        </UserControl>

My client creation viewmodel :

        public class ClientCreationViewModel : TabViewModel
            {
                public ClientCreationViewModel(string header)
                    : base(header)
                {
                }
                private string _socialIdentity;
                public string SocialIdentity
                {
                    get
                    {
                        return this._socialIdentity;
                    }
                    set
                    {
                        if (_socialIdentity != value)
                        {
                            _socialIdentity = value;
                            OnPropertyChanged("SocialIdentity");
                        }
                    }
                }

                private string _phone;
                public string Phone
                {
                    get
                    {
                        return _phone;
                    }
                    set
                    {
                        if (value != _phone)
                        {
                            _phone = value;
                            OnPropertyChanged("Phone");
                        }
                    }
                }

                private string _mail;
                public string Mail
                {
                    get
                    {
                        return _mail;
                    }
                    set
                    {
                        _mail = value;
                        OnPropertyChanged("Mail");
                    }
                }

                private string _createdBy;
                public string CreatedBy
                {
                    get
                    {
                        return _createdBy;
                    }
                    set
                    {
                        if (value != _createdBy)
                        {
                            OnPropertyChanged("CreatedBy");
                        }
                    }
                }
            }

    and my tabviewmodel ( from which all my tabitems inherits)

            public class TabViewModel : ViewModelBase
            {

                //Fields : 
                RelayCommand _closeCommand;

                //Constructor:
                public TabViewModel(string header)
                {
                    this.Header = header;
                }

                #region CloseCommand

                /// <summary>
                /// Returns the command that, when invoked, attempts
                /// to remove this workspace from the user interface.
                /// </summary>
                public ICommand CloseCommand
                {
                    get
                    {
                        if (_closeCommand == null)
                            _closeCommand = new RelayCommand(param => this.OnRequestClose());

                        return _closeCommand;
                    }
                }

                #endregion // CloseCommand

                #region RequestClose [event]

                /// <summary>
                /// Raised when this workspace should be removed from the UI.
                /// </summary>
                public event EventHandler RequestClose;

                void OnRequestClose()
                {
                    EventHandler handler = this.RequestClose;
                    if (handler != null)
                        handler(this, EventArgs.Empty);
                }

                #endregion // RequestClose [event]

                public String Header { get; set; }

            }

The viewmodelbase is the classic modelbase which can be found everywhere in internet :D

Thanks !!!! 
```

* * *

@David 这是我的主窗口 XXAML

```
<Window.DataContext>
        <!-- Declaratively create an instance of our MainWindowVie -->
        <modelView:MainWindowViewModel></modelView:MainWindowViewModel>
    </Window.DataContext>

    <Window.Resources>
        <ResourceDictionary Source="MainWindowRessources.xaml"/>  
    </Window.Resources>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Application" >
                <MenuItem Header="_Deal Creation" Command="{Binding Path=_dealCreationCommand}"/>
                <MenuItem Header="_Client Creation" Command="{Binding Path=_clientCreationCommand}" />

                <MenuItem Header="Clients _Managment" Command="{Binding Path=_clientsManagementCommand}"/>
                <MenuItem Header="_Sectors Management"/>
                <MenuItem Header="S_tatistics"/>
                <Separator></Separator>
                <MenuItem Header="_Exit"/>
            </MenuItem>

            <MenuItem Header="Help">
                <MenuItem Header="Help"/>
                <MenuItem Header="Deal Saver"/>
            </MenuItem>
        </Menu>

        <ContentControl Content="{Binding Path=Workspaces}" ContentTemplate="{StaticResource TabsTemplate}" >

        </ContentControl>
    </DockPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:09:01.020

看起来您缺少 ClientCreation 用户控件中文本框的 Text 属性的数据绑定。

例如：

```
<TextBox x:Name="socialIdentityBox" Text="{Binding SocialIdentity, Mode=TwoWay}" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Stretch" Margin="3" /> 
```

尝试设置这些，看看会发生什么。

# python - Django - 处理从表单发布的数据

> ID：15055451
> 
> 赞同：2
> 
> 时间：2013-02-24T19:06:52.087
> 
> 标签：python, django, forms

我有一个 Django 表单，一切正常，但是我需要在用户发布表单后更新一个文件，我想这应该在视图中完成？我的代码在下面的有问题的视图定义中。

```
def edit_change(request, change_id):
change = get_object_or_404(Change, id=int(change_id))
form = ChangeForm(request.POST or None, instance=change)
change_id = Change.objects.get(id=int(change_id))

context = dict(change=change, id=change_id,form=form)

if form.is_valid():
    if form['change_id'] = ""
        form.['change_id'] = "TEST_NUM"

    cmodel = form.save()

    cmodel.save()
    return redirect(changes)

return render_to_response('editchange.html',context,   context_instance=RequestContext(request)) 
```

基本上我想看看change_id是否有值，如果没有添加值（日期+（当天的更改次数+1）），则继续保存数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T02:40:44.793

```
def edit_change(request, change_id):

    ............

    if form.is_valid():
        change_id = form.cleaned_data['change_id']

        cmodel = form.save()

        if not change_id:
            cmodel.change_id = "TEST_NUM"
            cmodel.save()
        return redirect(changes)

    return render_to_response('editchange.html',context,   context_instance=RequestContext(request) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:35:19.167

当您`form.is_valid()`创建一个`form.data`dict`form.save()`然后将其传递`model`给与`form`. 如果您添加中间步骤`model_object = form.save(commit=False)`，您将创建一个模型实例，其中填充了所有`form.data`值。您可以根据需要更改和保存此模型实例。例如`model_object.change_id = "TEST_NUM"`。完成后，您可以完成`model_object.save()`，无需使用`form.save()`

更多详细信息：[https ://stackoverflow.com/questions/14982699/django-using-savecommit-false-to-add-user-id-to-a-form-dont-modify-save-or](https://stackoverflow.com/questions/14982699/django-using-savecommit-false-to-add-user-id-to-a-form-dont-modify-save-or)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:09:17.370

我会重新定义表单的 clean 方法，以便在 clean_data 字典中进行修改。

# ruby - 使用 rvm 安装 ruby 2 时出错

> ID：15055457
> 
> 赞同：1
> 
> 时间：2013-02-24T19:07:41.303
> 
> 标签：ruby, rvm

我试图以这种方式安装它：

> brew install autoconf brew install automake brew install libyaml rvm install ruby​​-head

我试图用 rvm 安装 ruby​​2 但我收到了这个错误：

> ruby-head - #compile Error running 'make', please read /Users/boti/.rvm/log/ruby-head/make.log 运行 make 时出错。停止安装。Ruby 'ruby-head' 是使用 clang 构建的 - 但它不（完全）受支持，预计会出现错误。

这是我的编译日志：

> 编译 ./missing/setproctitle.c 编译 dmyext.c 链接 miniruby /Users/boti/.rvm/src/ruby-head/lib/fileutils.rb:111: [BUG] 堆栈一致性错误 (sp: 38, bp: 36 ) 红宝石 2.0.0dev (2013-02-25) [x86_64-darwin12.2.0]
> 
> -- 崩溃报告日志信息 --------------------------------------------------------请参阅以下之一下的崩溃报告日志文件： * ~/Library/Logs/CrashReporter * /Library/Logs/CrashReporter * ~/Library/Logs/DiagnosticReports * /Library/Logs/DiagnosticReports 的更多详细信息。
> 
> -- 控制帧信息 --------------------------------------------------------- -- c:0006 p:0038 s:0038 e:000037 类 /Users/boti/.rvm/src/ruby-head/lib/fileutils.rb:111 c:0005 p:0035 s:0034 e:000033 类 /用户/boti/.rvm/src/ruby-head/lib/fileutils.rb:107 c:0004 p:0009 s:0032 e:000031 TOP
> /Users/boti/.rvm/src/ruby-head/lib/fileutils .rb:85 [完成] c:0003 p:---- s:0030 e:000029 CFUNC :require c:0002 p:0098 s:0026 E:000f88 EVAL ./tool/mkconfig.rb:11 [完成] c:0001 p:0000 s:0002 E:0017a8 顶部 [完成]
> 
> ./tool/mkconfig.rb:11:in`<main>' ./tool/mkconfig.rb:11:in`需要' `<top (required)>' /Users/boti/.rvm/src/ruby-head/lib/fileutils.rb:107:in` /Users/boti/.rvm/src/ruby-head/lib/fileutils.rb:85:in'/Users/boti/.rvm/src/ruby-head /lib/fileutils.rb:111:in `'
> 
> -- 其他运行时信息 --------------------------------------------------------- --
> 
> *   加载的脚本：./tool/mkconfig.rb
>     
>     
> *   加载的功能：
>     
>     
>     
>     0 枚举器.so
>     
>     
> 
> [注意] 您可能在 Ruby 解释器或扩展库中遇到了错误。欢迎提交错误报告。详情： [http ://www.ruby-lang.org/bugreport.html](http://www.ruby-lang.org/bugreport.html)
> 
> 制作：*** [.rbconfig.time] 中止陷阱：6

这是我的编译日志的开始：

> [2013-02-24 20:58:47] 使 CC = /usr/bin/gcc-4.2 LD = ld LDSHARED = /usr/bin/gcc-4.2 -dynamiclib CFLAGS = -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-括号 -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Werror=pointer-arith -Werror=write-strings -Werror=declaration-after -statement -Werror=shorten-64-to-32 -Werror=implicit-function-declaration -fno-common -pipe XCFLAGS = -include ruby​​/config.h -include ruby​​/missing.h -D_FORTIFY_SOURCE=2 -fstack-protector -fno-strict-overflow -fvisibility=hidden -DRUBY_EXPORT CPPFLAGS = -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT -I。-I.ext/include/x86_64-darwin12.2.0 -I./include -I. DLDFLAGS = -Wl，-undefined，dynamic_lookup -Wl，-multiply_defined，抑制 -install_name /Users/boti/.rvm/rubies/ruby-head/lib/libruby。

我将不胜感激任何帮助...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T19:16:22.287

试试这个：

```
CC=clang rvm reinstall 2.0.0-p0 
```

它会编译，但以后可能会导致其他错误（我正在努力寻找导致原始问题的原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:29:33.547

我在使用 XCode 4.6 和 brew 的 Mac OS X 10.8.2 上也遇到了围绕 miniruby 的构建错误。

当只是尝试运行“rvm install 2.0.0”时，结果如下所示：

[https://gist.github.com/polarapfel/5080946](https://gist.github.com/polarapfel/5080946)

尝试将 CC 设置为 /usr/bin/clang 时，结果如下所示：

[https://gist.github.com/polarapfel/5081054](https://gist.github.com/polarapfel/5081054)

无论哪种方式，结果对我来说都是一样的。

有趣的是：我可以毫无问题地建立头脑。我认为 2.0.0p0 在 Mac OS X 上不是一个干净的构建，需要更多的工作来解决问题。

--

好的，这对我有用：只需运行“rvm get stable”即可解决构建问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T10:26:47.120

确保您使用带有 clang -v 的 clang 3.0。
否则，如果您使用的是较旧的 clang 版本，请使用 gcc 4.2 编译 2.0.0-p0：

```
rvm install ruby --with-gcc=gcc-4.2 
```

我会首先删除旧的红宝石尝试：

```
rvm remove 2.0.0-p0 
```

还要确保你有 rvm head（不稳定）：

```
rvm get head  --autolibs=3 
```

如果这应该解决 miniruby / enc 编译问题，那么 2.0.0-p0 是一个干净的构建，但是您使用的是过时的编译器。安装最新的 Xcode 不一定包含最新的 clang 版本。

# android - 以编程方式检测 7 英寸和 10 英寸平板电脑

> ID：15055458
> 
> 赞同：96
> 
> 时间：2013-02-24T19:08:08.397
> 
> 标签：android, android-layout, screen

有没有办法以编程方式查找安装应用程序的设备是 7 英寸平板电脑还是 10 英寸平板电脑？

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2013-02-28T10:59:47.367

您可以使用`DisplayMetrics`获取有关您的应用程序正在运行的屏幕的大量信息。

首先，我们创建一个`DisplayMetrics`度量对象：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

从中，我们可以获得显示大小所需的信息：

```
int widthPixels = metrics.widthPixels;
int heightPixels = metrics.heightPixels; 
```

这将返回宽度和高度的绝对值（以像素为单位），因此 Galaxy SIII、Galaxy Nexus 等为 1280x720。

这本身通常没有帮助，因为当我们在 Android 设备上工作时，我们通常更喜欢在与密度无关的像素中工作，dip。

您再次以设备比例因子的形式获得`density`屏幕的，`metrics`它基于[Android 设计资源](http://developer.android.com/guide/practices/screens_support.html#DesigningResources)等。 `mdpi``hdpi`![DPI 刻度](../Images/152fc5d8e37c41e8dcc45ec1041d1573.png)

```
float scaleFactor = metrics.density; 
```

从这个结果中，我们可以计算出在某个高度或宽度下与密度无关的像素的数量。

```
float widthDp = widthPixels / scaleFactor
float heightDp = heightPixels / scaleFactor 
```

从中获得的结果将帮助您确定正在使用的屏幕类型以及[Android 配置示例](http://developer.android.com/guide/practices/screens_support.html#ConfigurationExamples)，它为您提供每种屏幕尺寸的相对 dp：

> *   320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
> *   480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
> *   600dp：7 英寸平板电脑 (600x1024 mdpi)。
> *   720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

通过以上信息，我们知道如果设备的最小宽度大于 600dp，则该设备为 7" 平板电脑，如果大于 720dp，则该设备为 10" 平板电脑。

我们可以使用 class 的`min`函数计算出最小宽度`Math`，传入 the`heightDp`和 the`widthDp`以返回`smallestWidth`.

```
float smallestWidth = Math.min(widthDp, heightDp);

if (smallestWidth > 720) {
    //Device is a 10" tablet
} 
else if (smallestWidth > 600) {
    //Device is a 7" tablet
} 
```

然而，这并不总是给你一个精确的匹配，尤其是在使用不起眼的平板电脑时，这些平板电脑可能会将其密度错误地表示为 hdpi 而不是，或者可能只有 800 x 480 像素但仍然在 7" 屏幕上.

除了这些方法之外，如果您需要知道设备的确切尺寸（以英寸为单位），您也可以使用该`metrics`方法计算出每英寸屏幕有多少像素。

```
float widthDpi = metrics.xdpi;
float heightDpi = metrics.ydpi; 
```

您可以使用每英寸设备中有多少像素以及总像素量的知识来计算设备的英寸数。

```
float widthInches = widthPixels / widthDpi;
float heightInches = heightPixels / heightDpi; 
```

这将以英寸为单位返回设备的高度和宽度。这对于确定它是什么类型的设备并不总是那么有帮助，因为设备的广告尺寸是对角线，我们所拥有的只是高度和宽度。

但是，我们也知道，给定三角形的高度和宽度，我们可以使用勾股定理计算出斜边的长度（在这种情况下，是屏幕对角线的大小）。

```
//a² + b² = c²

//The size of the diagonal in inches is equal to the square root of the height in inches squared plus the width in inches squared.
double diagonalInches = Math.sqrt(
    (widthInches * widthInches) 
    + (heightInches * heightInches)); 
```

由此，我们可以确定该设备是否为平板电脑：

```
if (diagonalInches >= 10) {
    //Device is a 10" tablet
} 
else if (diagonalInches >= 7) {
    //Device is a 7" tablet
} 
```

这就是您计算正在使用的设备类型的方式。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-28T10:59:22.887

没有什么可以说`7"`或`10"`AFAIK。大致有两种方法可以获得系统在解码位图时使用的屏幕尺寸等等。它们都可以[`Resources`](http://developer.android.com/reference/android/content/res/Resources.html)在`Context`.

第一个是[`Configuration`](http://developer.android.com/reference/android/content/res/Configuration.html)可以通过 获取的对象`getContext().getResources().getConfiguration()`。在里面你有：

`Configuration#densityDpi`- 渲染到的目标屏幕密度，对应于密度资源限定符。

`Configuration#screenHeightDp`- 可用屏幕空间的当前高度，以 dp 为单位，对应于屏幕高度资源限定符。

`Configuration#screenWidthDp`- 可用屏幕空间的当前宽度，以 dp 为单位，对应于屏幕宽度资源限定符。

`Configuration#smallestScreenWidthDp`- 应用程序在正常操作中看到的最小屏幕尺寸，对应于最小屏幕宽度资源限定符。

这样，您几乎可以使用屏幕指南来确定您的设备是否从相应的专用资源文件夹（`hdpi`、`xhdpi`、`large`、`xlarge`等）中提取。

请记住，这些是一些桶：

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp
*   普通屏幕至少为 470dp x 320dp
*   小屏幕至少为 426dp x 320dp

*   320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。

*   480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
*   600dp：7 英寸平板电脑 (600x1024 mdpi)。
*   720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

[更多信息](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

二是[`DisplayMetrics`](http://developer.android.com/reference/android/util/DisplayMetrics.html)得到的对象`getContext().getResources().getDisplayMetrics()`。你有：

`DisplayMetrics#density`- 显示的逻辑密度。

`DisplayMetrics#densityDpi`- 以每英寸点数表示的屏幕密度。

`DisplayMetrics#heightPixels`- 显示的绝对高度（以像素为单位）。

`DisplayMetrics#widthPixels`- 显示的绝对宽度（以像素为单位）。

`DisplayMetrics#xdpi`- X 维度上每英寸屏幕的精确物理像素。

`DisplayMetrics#ydpi`- Y 维度上每英寸屏幕的精确物理像素。

如果您需要屏幕的精确像素数而不是密度，这很方便。但是，重要的是要注意这是屏幕的**所有像素。**不仅仅是您可以使用的。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-28T11:06:04.823

将此方法放在 onResume() 中并可以检查。

```
public double tabletSize() {

     double size = 0;
        try {

            // Compute screen size

            DisplayMetrics dm = context.getResources().getDisplayMetrics();

            float screenWidth  = dm.widthPixels / dm.xdpi;

            float screenHeight = dm.heightPixels / dm.ydpi;

            size = Math.sqrt(Math.pow(screenWidth, 2) +

                                 Math.pow(screenHeight, 2));

        } catch(Throwable t) {

        }

        return size;

    } 
```

通常平板电脑在 6 英寸大小后开始。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-02-08T16:23:55.107

在切换纵向与横向时，上述内容并不总是有效。

如果您的目标是 API 级别 13+，如上所述很容易 - 使用 Configuration.smallestScreenWidthDp，然后进行相应的测试：

```
resources.getConfiguration().smallestScreenWidthDp 
```

否则，如果您负担得起，请使用以下方法，通过让系统告诉您，这是一种非常准确的方法来检测 600dp（如 6"）与 720dp（如 10"）：

1）添加到 layout-sw600dp 和 layout-sw720dp （如果适用，它的横向）具有适当 ID 的不可见视图，例如：

对于 720，在 layout-sw720dp 上：

```
<View android:id="@+id/sw720" android:layout_width="0dp" android:layout_height="0dp" android:visibility="gone"/> 
```

对于 600，在 layout-sw600dp 上：

```
<View android:id="@+id/sw600" android:layout_width="0dp" android:layout_height="0dp" android:visibility="gone"/> 
```

2）然后在代码上，例如Activity，进行相应的测试：

```
private void showFragment() {
    View v600 = (View) findViewById(R.id.sw600);
    View v720 = (View) findViewById(R.id.sw720);
    if (v600 != null || v720 !=null)
        albumFrag = AlbumGridViewFragment.newInstance(albumRefresh);
    else
        albumFrag = AlbumListViewFragment.newInstance(albumRefresh);
    getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.view_container, albumFrag)
        .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE)
        .commit();
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-08-23T16:26:28.063

很棒的信息，正是我想要的！但是，在尝试了这个之后，我发现使用此处提到的指标时，Nexus 7（2012 型号）报告的尺寸为 1280x736。我还有一个运行 Jelly Bean 的摩托罗拉 Xoom，它错误地报告了 1280x752 的分辨率。[我在这里](https://stackoverflow.com/questions/14616881/smallest-width-layouts-bug-in-nexus-7)偶然发现了这篇文章，证实了这一点。基本上，在 ICS/JB 中，使用上述指标的计算似乎排除了导航栏的尺寸。更多的研究使我找到了 [Frank Nguyen 的答案，](https://stackoverflow.com/questions/10991194/android-displaymetrics-returns-incorrect-screen-size-in-pixels-on-ics/17512853#17512853)该答案使用不同的方法为您提供屏幕的原始（或真实）像素尺寸。我的初步测试表明，来自 Frank correclty 的以下代码报告了 Nexus 7（运行 JB 的 2012 型号）和运行 JB 的摩托罗拉 Xoom 上的尺寸：

```
int width = 0, height = 0;
final DisplayMetrics metrics = new DisplayMetrics();
Display display = getWindowManager().getDefaultDisplay();
Method mGetRawH = null, mGetRawW = null;

try {
    // For JellyBeans and onward
    if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN) {
        display.getRealMetrics(metrics);

        width = metrics.widthPixels;
        height = metrics.heightPixels;
    } else {
        mGetRawH = Display.class.getMethod("getRawHeight");
        mGetRawW = Display.class.getMethod("getRawWidth");

        try {
            width = (Integer) mGetRawW.invoke(display);
            height = (Integer) mGetRawH.invoke(display);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} catch (NoSuchMethodException e3) {
    e3.printStackTrace();
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-13T06:40:18.790

我有两个分辨率相同的安卓设备

Device1 -> 分辨率 480x800 屏幕对角线尺寸 -> 4.7 英寸

Device2 -> 分辨率 480x800 屏幕对角线尺寸 -> 4.0 英寸

它提供了两个设备对角线屏幕尺寸 -> 5.8

你的问题的解决方案是..

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
int width=dm.widthPixels;
int height=dm.heightPixels;
int dens=dm.densityDpi;
double wi=(double)width/(double)dens;
double hi=(double)height/(double)dens;
double x = Math.pow(wi,2);
double y = Math.pow(hi,2);
double screenInches = Math.sqrt(x+y); 
```

在这里查看[详细信息](https://stackoverflow.com/questions/19155559/how-to-get-android-device-screen-size)..

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-11-25T03:42:20.887

Android 指定[屏幕尺寸](http://developer.android.com/guide/practices/screens_support.html#range)的方式是通过四种通用尺寸：*small*、*normal*、*large*和*xlarge*。

虽然 Android[文档](http://developer.android.com/guide/practices/screens_support.html#range)指出尺寸组已被弃用

> ...这些尺寸组已被弃用，取而代之的是一种基于可用屏幕宽度管理屏幕尺寸的新技术。如果您正在为 Android 3.2 及更高版本进行开发，请参阅 [Declaring Tablet Layouts for Android 3.2]( hdpi (high) ~240dpi) 了解更多信息。

通常，大小限定符*large*指定 7" 平板电脑。大小限定符*xlarge*指定 10" 平板电脑：

![在此处输入图像描述](../Images/d7f6186b873eb7f32e6df4d88a52e642.png)

在大小限定符上触发的好处是，您可以保证您的资产和代码在使用哪个资产或激活代码路径上是一致的。

要在代码中检索大小限定符，请进行以下调用：

```
int sizeLarge = SCREENLAYOUT_SIZE_LARGE // For 7" tablet
boolean is7InchTablet = context.getResources().getConfiguration()
    .isLayoutSizeAtLeast(sizeLarge);

int sizeXLarge = SCREENLAYOUT_SIZE_XLARGE // For 10" tablet
boolean is10InchTablet = context.getResources().getConfiguration()
    .isLayoutSizeAtLeast(sizeXLarge); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-08T08:41:12.617

您可以使用以下方法获取以英寸为单位的屏幕尺寸，基于此您可以简单地检查设备是哪个平板电脑或手机。

```
private static double checkDimension(Context context) {

    WindowManager windowManager = ((Activity)context).getWindowManager();
    Display display = windowManager.getDefaultDisplay();
    DisplayMetrics displayMetrics = new DisplayMetrics();
    display.getMetrics(displayMetrics);

    // since SDK_INT = 1;
    int mWidthPixels = displayMetrics.widthPixels;
    int mHeightPixels = displayMetrics.heightPixels;

    // includes window decorations (statusbar bar/menu bar)
    try
    {
        Point realSize = new Point();
        Display.class.getMethod("getRealSize", Point.class).invoke(display, realSize);
        mWidthPixels = realSize.x;
        mHeightPixels = realSize.y;
    }
    catch (Exception ignored) {}

    DisplayMetrics dm = new DisplayMetrics();
    windowManager.getDefaultDisplay().getMetrics(dm);
    double x = Math.pow(mWidthPixels/dm.xdpi,2);
    double y = Math.pow(mHeightPixels/dm.ydpi,2);
    double screenInches = Math.sqrt(x+y);
    Log.d("debug","Screen inches : " + screenInches);
    return screenInches;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-05-07T14:09:52.703

我在**values 文件夹**中存储了一个值，它给我的屏幕是 7 英寸或 10 英寸，但我们可以使用 values 文件夹为任何设备执行此操作。

比如为不同的 2 设备创建不同的 2 值文件夹。但这件事取决于要求。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-28T11:02:22.177

您必须使用[DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html)类提供的数据进行一些计算。

你有 heightPixel 和 widthPixels （以像素为单位的屏幕分辨率）

您需要对角线，因为“​​英寸屏幕尺寸”总是描述对角线长度。您可以获得以像素为单位的屏幕对角线（使用 pythagore）

对角像素 = √(heightPixel² + widthPixels² )

那么您可以通过 densityDPI 值将像素值转换为英寸：

inchDiag = 对角像素 / 密度 DPI。

我希望我没有在这里犯错，请注意您从 DisplayMetrics 类中获得的值是由构造函数给出的，看起来（在极少数情况下）它们没有根据物理材料很好地设置......

这将为您提供物理屏幕尺寸，但它可能不是管理多个布局的更好方法。[有关此主题的更多信息](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-02-01T05:03:22.850

其他方式：

*   再创建 2 个文件夹：values-large + values-xlarge

*   放入：`<string name="screentype">LARGE</string>`在 values-large 文件夹中（strings.xml）

*   放入：`<string name="screentype">XLARGE</string>`在 values-xlarge 文件夹中（strings.xml）

*   在代码中：

    字符串 mType = getString(R.string.screentype);

    if (mType != null && mType.equals("LARGE") {

    // 从 4~7 英寸

    } else if (mType != null && mType.equals("XLARGE") {

    // 从 7~10 英寸

    }

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-07-06T07:26:22.760

## 瞧！这就是区分平板电脑和手机所需的全部内容

**1.获取屏幕宽度的辅助函数：**

```
private float getScreenWidth() {
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    return Math.min(metrics.widthPixels, metrics.heightPixels) / metrics.density;
} 
```

**2.判断设备是否为平板电脑的功能**

```
boolean isTablet() {
    return getScreenWidth() >= 600;
} 
```

**3\. 最后，如果您希望针对不同的设备尺寸执行不同的操作：**

```
boolean is7InchTablet() {
    return getScreenWidth() >= 600 && getScreenWidth() < 720;
}

boolean is10InchTablet() {
    return getScreenWidth() >= 720;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-14T07:51:57.153

**这里有一些有用的 kotlin 扩展：**

```
 fun DisplayMetrics.isTablet(): Boolean {
        return getScreenWidth() >= 600
    }

    fun DisplayMetrics.is7InchTablet(): Boolean {
        return getScreenWidth() >= 600 && getScreenWidth() < 720
    }

    fun DisplayMetrics.is10InchTablet(): Boolean {
        return getScreenWidth() >= 720
    }

    fun DisplayMetrics.getScreenWidth(): Float {
        return widthPixels.coerceAtMost(heightPixels) / density
    } 
```

# java - how to check whether webcam is connected or not in java?

> ID：15055465
> 
> 赞同：0
> 
> 时间：2013-02-24T19:09:00.837
> 
> 标签：java, webcam

I have been working on a java project, which requires webcam. I want to check whether webcam is plugged in or not.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:18:26.950

您可能想看看 Java 媒体框架 ( [http://en.wikipedia.org/wiki/Java_Media_Framework](http://en.wikipedia.org/wiki/Java_Media_Framework) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:14:50.567

如果未连接网络摄像头，则使用 JMF 会获得 NoDataSourceException。看看像[Web Cam Capture Image](http://www.ivoronline.com/Coding/Languages/JAVA/APIS/JAVA%20-%20JMF%20-%20Web%20Cam%20-%20Capture%20-%20Image.php)这样的例子。

# javascript - 使用 javascript 访问下拉列表的选定选项

> ID：15055469
> 
> 赞同：0
> 
> 时间：2013-02-24T19:09:26.970
> 
> 标签：javascript, html

我创建了一个小的 JS 函数来检查输入字段的值并将它们放在表单上：

```
function insertText()
{
result = document.new_link['link[link]'].value;
document.getElementById("link-link").innerHTML=result;
} 
```

效果很好。（new_link 是表单的名称）

现在我对选择下拉菜单做同样的事情：

```
<select name="link[link_category]">
<option value="1">Something</option>
</select>

function insertText2()
{
result = document.new_link['link[link_category]'].value;
document.getElementById("link-category").innerHTML=result;
} 
```

这里的结果是我不喜欢的值“1”。我想要输出“Something”，所以当它被选中时，选项的内容到底是什么。

我试过这个：

```
function insertText2()
{
result = document.new_link['link[link_category]'].content;
document.getElementById("link-category").innerHTML=result;
} 
```

但它给了我输出“未定义”。我也尝试过“文本”，但没有成功。我需要做什么才能达到我的目标？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:18:47.733

这个怎么样：

```
function insertText2()
{
   var dropdown = document.new_link['link[link_category]'];
   var selOption = dropdown[dropdown.selectedIndex];
   document.getElementById("link-category").innerHTML=selOption.innerHTML;
} 
```

所以你抓住下拉元素。然后找出选定的索引并使用它来获取实际选定的选项。一旦你得到了，你就可以显示 innerHTML 这应该是你所追求的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:23:14.357

您可以将“某物”作为值。您在这里使用“1”是有原因的吗？

```
<select name="link[link_category]">
    <option value="Something">Something</option>
</select> 
```

各个选项元素可作为 HTMLCollection 使用：

```
document.new_link['link[link_category]'].childNodes
    OR
document.new_link['link[link_category]'].options 
```

当前选择的选项可用作索引：

```
document.new_link['link[link_category]'].selectedIndex 
```

所选选项的“标签”可以在以下位置找到：

```
var selectElement = document.new_link['link[link_category]'];
selectElement.options[selectElement.selectedIndex].innerHTML; 
```

# html - How to set nested inner divs to 100% height?

> ID：15055472
> 
> 赞同：0
> 
> 时间：2013-02-24T19:09:59.757
> 
> 标签：html, css

It seems I can only set the first outermost div (#base_wrapper) to 100% heigth. I have not found a way to set the hight of any of the inner nested divs to 100% height.

Does anyone know how to properly do this?

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            html {
                height: 100%;
            }
            body {
                background-color: #FFF;
                font-family: helvetica, arial, sans-serif;
                font-size: 10pt;
                color: #000;
                margin: 0px;
                padding: 0px;
                height: 100%;
                border: none;
            }
            #base_wrapper {
                min-height: 100%;
                background-color: #F00;
            }
            #base_inner_wrapper {
                min-height: 100%; /* does not work */
                padding-bottom: 16px;
                background-color: #0F0;
            }
            #base_body {
                min-height: 100%; /* does not work */
                background-color: #00F;
            }
            #base_statusbar {
                background: #25272B;
                height: 16px;
            }
            #base_footer {
                height: 16px;
                width: 100%;
                color: #F47920;
                position: absolute;
                bottom: 0;
                background: #25272B;
            }
        </style>
    </head>

    <body>
        <div id="base_wrapper">
            <div id="base_statusbar">
                HEADER
            </div>
            <div id="base_inner_wrapper">
                <div id="base_body">
                    CONTENT
                </div>
            </div>
            <div id="base_footer">
                FOOTER
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:27:25.810

而不是`min-height`在你的 CSS 中设置，只需设置`height`.

生成的代码应该可以工作：

```
body {
    background-color: #FFF;
    font-family: helvetica, arial, sans-serif;
    font-size: 10pt;
    color: #000;
    margin: 0px;
    padding: 0px;
    height: 100%; /* changed from min-height */
    border: none;
}
#base_wrapper {
    height: 100%; /* changed from min-height */
    background-color: #F00;
}
#base_inner_wrapper {
    height: 100%; /* changed from min-height */
    padding-bottom: 16px;
    background-color: #0F0;
}
#base_body {
    height: 100%; /* changed from min-height */
    background-color: #00F;
} 
```

有关更多信息，请参阅： [百分比高度 HTML 5/CSS](https://stackoverflow.com/questions/1622027/percentage-height-html-5-css)

# c# - .net Distinct() 和复杂的条件

> ID：15055473
> 
> 赞同：5
> 
> 时间：2013-02-24T19:10:04.563
> 
> 标签：c#, .net, duplicates, distinct

假设我有一堂课

```
public class Audio
{
    public string artist   { get; set; }
    public string title    { get; set; }
    // etc.
} 
```

现在我想通过相似性（不是完全匹配）条件过滤此类音频列表中的重复项。基本上它是列文斯坦距离，按字符串总长度进行阈值校正。问题是，关于 IEqualityComparer 的一般提示是“始终同时实现 GetHashCode 和 Compare”。我显然无法计算 GetHashCode 中字符串之间的距离，因为它根本不是比较方法。然而，在这种情况下，即使是相似的音频也会返回不同的哈希值，并且 Distinct() 会将其视为不同的对象，并且不会触发 compare() 方法。

我试图强制 GetHashCode 始终返回 0，因此对集合中的每个对象都调用了 Compare，但这很慢。所以，最后，一个问题：我可以用 .net 做些什么，或者我应该搜索一些好的过滤算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:11:17.993

我建议（首先）不要使用**Distinct**或**GetHashCode**。

**GetHashCode**对您的情况来说太严格了（正如@Gabe 完美指出的那样）。你可以做的是：

1.  承认您将不得不使用 Levenshtein 比较整个三角形（O(n^2) 复杂度）的实例对
2.  尝试使用书中的每一个技巧来优化它：如何计算**从空字符串到当前一个声音的 Levenshtein 距离**（即针对 Audio 的每个实例，并且可能分别针对两个字符串属性）？

这可能会以一个非常好的**GetHashCode**告终（有人可能会说） 。但是你不能像**GetHashCode**那样使用它，你应该像这样使用它：

```
bool AreSimilar(Audio me, Audio you) {
  int cheapLevenshtein = Math.Abs(me.AbsoluteQuasiLevenshtein - you.AbsoluteQuasiLevenshtein);

  if (cheapLevenshtein < THRESHOLD) {

    int expensiveLevenshtein = Audio.LevenshteinBetween(me, you);
    var result = (expensiveLevenshtein < LIMIT);
    return result;

  } else
    return false;
} 
```

然后你会得到一个更好或更差的算法。这只是一个想法，当然：你不能使用 Distinct()。如果您愿意，您可以编写自己的扩展方法，以从用户程序员的角度使整个事情看起来不错。

是的，**AbsoluteQuasiLevenshtein**对于诸如“ab”和“zy”之类的东西是相等的，但是在“ab”和“blahblahblahblah”之间会有很大的不同，至少你会优化一些东西。（**GetHashCode** + **Distinct方法带来了另一个问题 -** **GetHashCode**的严格性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:16:28.163

BKTree 的代码，带有简单的“c# 互操作性”层和 c# 中的示例在这里：

[https://bitbucket.org/ptasz3k/bktree](https://bitbucket.org/ptasz3k/bktree)

这是VS 2012的解决方案。

您首先从所有对象构建树，传递选择器函数（例如 x => x.Key.ToLowerInvariant()），然后搜索给定的键和 levenshtein 距离，然后树返回所有匹配的对象。

所以，如果我正确理解你的问题：

```
var bk = BKTree.CSharp.CreateBK(x => x.artist, audios);
var allArtists = audios.Select(x => x.artist);
var possibleDuplicates = allArtists.Select(x => new 
    { Key = x, Similiar = BKTree.CSharp.FindInBk(bk, x, treshold).ToList()); 
```

希望这可以帮助。

# cocoa-touch - 持有金额的对象

> ID：15055474
> 
> 赞同：-1
> 
> 时间：2013-02-24T19:10:10.290
> 
> 标签：cocoa-touch

什么对象类型用于存储一定数量的钱？我有一个`UITextField`用户可以输入以美元为单位的金额，我将其转换为另一种货币，我想知道以哪种类型存储金额（`float`/`double`不利于金钱），以及为键盘选择什么那个领域？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:12:23.657

您可以使用 NSDecimal 或 NSDecimalNumber 它们是精确的，存储为与浮点数或双精度数不同的以 10 为基数的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:27:31.263

你应该做以下事情

1.  设置键盘类型小数
2.  在键盘附件视图中设置文本字段（非强制）
3.  应用一个正则表达式，一旦用户使用了浮点 (.)，他将不允许重新输入它。
4.  在完成编辑的文本字段上，您可以将其保存为 NSDecimal

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T19:28:14.483

我会使用[NSDecimalNumber](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/) 或 NSDecimal，因为它们存储在 base10 中。

对于键盘，有[Decimal pad](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/occ/intf/UITextInputTraits)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T19:40:03.853

我建议使用 NSDecimalNumber。此外，您将需要使用以下方法：

```
- (NSDecimalNumber *)decimalNumberByAdding:(NSDecimalNumber *)decimalNumber withBehavior:(id < NSDecimalNumberBehaviors >)behavior 
```

在更基本的

```
- (NSDecimalNumber *)decimalNumberByAdding:(NSDecimalNumber *)decimalNumber 
```

因为您可以提供的行为之一是：

> NSRound银行家
> 
> 四舍五入到最接近的可能返回值；当两个可能性中间时，返回最后一位为偶数的可能性。在实践中，这意味着从长远来看，数字将像向下舍入一样频繁地向上取整；不会有系统偏差。

当然也可以使用 NSDecimal，但我更喜欢 NSDecimalNumber 的 OO API，而不是 NSDecimal 的基于 C 的 API。

# c# - 通过 Emit 通过委托调用静态通用方法

> ID：15055475
> 
> 赞同：1
> 
> 时间：2013-02-24T19:10:17.607
> 
> 标签：c#, generics, reflection, static, reflection.emit

我尝试创建一个委托来调用静态泛型方法。但我得到了错误：检测到无效代码！有人知道我的 IL 有什么问题吗？

示例代码中的 FindStaticMethod 调用正在工作并返回带有给定类型参数的方法信息！

```
 public delegate object GenericStaticInvoker(params object[] arguments);

 public static GenericStaticInvoker GenericMethodInvokerStaticMethod(Type type, string methodName, Type[] typeArguments, Type[] parameterTypes)
    {
        MethodInfo methodInfo;
        ParameterInfo[] parameters;

        // find the method to be invoked
        FindStaticMethod(type, methodName, typeArguments, parameterTypes, out methodInfo, out parameters);

        string name = string.Format("__MethodInvoker_{0}_ON_{1}", methodInfo.Name, methodInfo.DeclaringType.Name);

        DynamicMethod dynamicMethod;
        dynamicMethod = new DynamicMethod(name, typeof(object), new Type[] { typeof(object[]) }, methodInfo.DeclaringType);

        ILGenerator generator = dynamicMethod.GetILGenerator();

        // define local vars
        if (methodInfo.ReturnType != typeof(void))
            generator.DeclareLocal(methodInfo.ReturnType);

        for (int i = 0; i < parameters.Length; i++)
        {
            // load paramters they are passed as an object array
            generator.Emit(OpCodes.Ldarg_1);

            // load array element
            generator.Emit(OpCodes.Ldc_I4, i);
            generator.Emit(OpCodes.Ldelem_Ref);

            // cast or unbox parameter as needed
            Type parameterType = parameters[i].ParameterType;
            if (parameterType.IsClass)
            {
                generator.Emit(OpCodes.Castclass, parameterType);
            }
            else
            {
                generator.Emit(OpCodes.Unbox_Any, parameterType);
            }
        }

        // call method
        generator.EmitCall(OpCodes.Call, methodInfo, null);

        // handle method return if needed
        if (methodInfo.ReturnType == typeof(void))
        {
            // return null
            generator.Emit(OpCodes.Ldnull);                
            generator.Emit(OpCodes.Ret);
        }
        else
        {
            // box value if needed
            if (methodInfo.ReturnType.IsValueType)
            {
                generator.Emit(OpCodes.Box, methodInfo.ReturnType);
            }

            // store to the local var
            generator.Emit(OpCodes.Stloc_0);

            // load local and return
            generator.Emit(OpCodes.Ldloc_0);
            generator.Emit(OpCodes.Ret);
        }

        // return delegate
        return (GenericStaticInvoker)dynamicMethod.CreateDelegate(typeof(GenericStaticInvoker));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:07:54.183

*   在实例方法中，“this”参数可以通过 Ldarg_0 加载到评估堆栈，然后可以使用 Ldarg_{x}（x 1 到 N）加载“实际”参数。

*   当您有一个静态方法时（也适用于任何 lambda，无论是否反射），可以使用 Ldarg_{x} 加载“实际”参数（x 0 到 N-1）。

*   总结一下一般情况：“this”引用本身就是一个参数。它的缺失不会在堆栈上留下一个空槽（**ldarg.0**将并且必须用于第一个非“this”参数）。

因此，在您的特定情况下，您不能使用**OpCodes.Ldarg_1**加载您的*params object[] 参数*唯一参数：

```
// ...etc...
for (int i = 0; i < parameters.Length; i++)
{
    // load paramters they are passed as an object array
    generator.Emit(OpCodes.Ldarg_1);

    // ...etc... 
```

您应该使用**OpCodes.Ldarg_0**：

```
// ...etc...
for (int i = 0; i < parameters.Length; i++)
{
    // load paramters they are passed as an object array
    generator.Emit(OpCodes.Ldarg_0);

    // ...etc... 
```

# c++ - Which data structure can handle 2d line segments

> ID：15055476
> 
> 赞同：1
> 
> 时间：2013-02-24T19:10:19.897
> 
> 标签：c++, data-structures

I have huge list of 2d line segments. I want to find nearest line segments for a given segments and then to store in a vector. So, I want to do this for each and every line segment so that I know nearest line segments for any line segments. All my line segments are in vector form that is, I know both end point coordinates. So in my data line-number, begin (x,y,z), end(x,y,z) are there.

For obtaining the line segments, I want to check the distance between the line segment and end point of another line segment ([this](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)).

I think there might be some data structures that all these things happen and give a vector of vector line segment numbers or some other way to recognize proximity line segments. I know kd-tree (k-nearest) can do the similar thing. But it is for point data.

I was trying to figure out this with opencv r-tree function. But as I do not have any experience of using r-tree I was not able and I am confused now because it says about a classifier and has a training phase. But for my case, I feel I don’t want such things to follow.

If anyone knows any function or codes or library to do this type of thing, please let me know.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-14T17:28:57.530

虽然 OpenCV 没有用于线段的数据结构，但以下内容已经足够好了。

```
struct LineSegment{
  Point2f a,b;
}; 
```

# jquery - jQuery Mobile 和 jQuery 验证

> ID：15055479
> 
> 赞同：0
> 
> 时间：2013-02-24T19:10:57.717
> 
> 标签：jquery, jquery-mobile, jquery-validate

我正在使用 jQuery Mobile 和 jQuery validate 并且无法使其正常工作。到目前为止，这是我的代码。

```
$('#submit').on('click', function() {
    $("#page2 form").validate({
        rules: {
            firstName: "required",
            lastName: "required"
        },
    });
}); 
```

这行不通。我也试过了，只是在没有点击事件的情况下包含验证，这也不起作用。想法？

**更新：如果有人看到这个，代码很好，我的标记有错误。Sparky在下面仍然是一个很好的答案。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T22:24:35.473

**你的代码：**

```
$('#submit').on('click', function() { // <-- REMOVE this
    $("#page2 form").validate({
        rules: {
            firstName: "required",
            lastName: "required"
        },
    });
}); 
```

[`.validate()`应该只使用*一次*来*初始化***DOM ready 上**](http://docs.jquery.com/Plugins/Validation/validate#options)[的表单](http://docs.jquery.com/Plugins/Validation/validate#options)。将插件的初始化包含在点击处理程序中是没有意义的。该插件已经内置了所有将触发实际验证测试的事件处理程序。

纯 jQuery 示例：http: [//jsfiddle.net/RmG2g/](http://jsfiddle.net/RmG2g/)

```
$(document).ready(function() { 
    $("#page2 form").validate({ ... });
}); 
```

* * *

**但是，由于您使用的是 jQuery Mobile**：

```
$(document).on('pageinit', function(){ // <-- you must use this to ensure the DOM is ready

    $("#page2 form").validate({
        rules: {
            firstName: "required",
            lastName: "required"
        },
    });

}); 
```

**工作演示：http: [//jsfiddle.net/6FYyv/](http://jsfiddle.net/6FYyv/)**

* * *

对于 jQuery Mobile，您需要使用....

```
$(document).on('pageinit', function(){ 
```

代替

```
$(document).ready(function(){ 
```

请参阅：http: [//jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

> **重要提示：**使用`$(document).bind('pageinit')`，而不是`$(document).ready()`
> 
> 在 jQuery 中学习的第一件事是调用 `$(document).ready()`函数内部的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到`pageinit`事件。

# c# - 如何接受任何类型的泛型参数？

> ID：15055496
> 
> 赞同：7
> 
> 时间：2013-02-24T19:13:14.697
> 
> 标签：c#, generics

假设我有一个通用类。

```
public class PagerInfo<T>
{
    // ...
} 
```

我想将这个类的一个实例传递给另一个类中的方法。

```
public void Pagination(PagerInfo pagerInfo)
{
    // ...
} 
```

上面的方法不会编译，因为我没有提供类型参数。但是，如果我希望这种方法不管类型如何都可以工作。也就是说，我希望此方法对`PagerInfo`实例进行操作，而不管其类型如何。而且我的方法不会访问任何特定于类型的方法或属性。

*另外，请注意，我的实际方法是在 ASP.NET MVC cshtml 帮助器方法中，而不是常规 cs 文件中。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T19:22:28.870

如果该方法不访问使用泛型类型参数的类型的成员，则通常定义派生泛型类型的非泛型基类型：

```
public abstract class PagerInfo
{
    // Non-generic members
}

public class PagerInfo<T> : PagerInfo
{
    // Generic members
} 
```

```
public void Pagination(PagerInfo pagerInfo)
{
    // ...
} 
```

# php - Parsing json with jquery wont working

> ID：15055500
> 
> 赞同：0
> 
> 时间：2013-02-24T19:13:51.783
> 
> 标签：php, javascript, jquery, json

I run `json_encode` PHP function and get following output:

```
[{"id":"1","size":"124","name":"Team1","picture":1},
{"id":"5","size":"76","name":"Team 4","picture":2},
{"id":"3","size":"25","name":"Team2","picture":3},
{"id":"4","size":"17","name":"Team3","picture":4}] 
```

Now I want to parse it using JQUERY and add it to my web page. I run following script:

```
<script>
    $(function() {
      $('#myButton2').click(function(e) {
        $.get("http://localhost:99/result/getBestOne", function(data) {
        alert(data+"");
        var obj = JSON.parse(data);
        alert(obj+"");

       });
    });
});

</script> 
```

My problem is that first alert is working, but in second one, I get error:`**Ucought SyntaxError: Unexpected Token**`

Where is the problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T19:18:18.413

问题是它不是有效的 JSON。最后 2 个对象的起始大括号丢失了。

```
{"id":"1","size":"124","name":"Team1","picture":1},
{"id":"5","size":"76","name":"Team 4","picture":2},
{"id":"3","size":"25","name":"Team2","picture":3},
{"id":"4","size":"17","name":"Team3","picture":4} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:18:59.920

这两行的大括号“{”在哪里？

> "id":"3","size":"25","name":"Team2","图片":3},
> 
> "id":"4","size":"17","name":"Team3","图片":4}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:44:21.337

您尝试解析的文本不是有效的 JSON，因此您会收到语法错误。

如果您不确定出了什么问题，我建议您将 JSON 代码复制并粘贴到此网站中：

[http://jsonlint.com/](http://jsonlint.com/)

# inheritance - Jasmine + 测试一个继承的方法已被调用

> ID：15055507
> 
> 赞同：6
> 
> 时间：2013-02-24T19:14:49.587
> 
> 标签：inheritance, jasmine

用 Jasmine 测试已调用继承方法的最佳方法是什么？

我只对测试它是否被调用感兴趣，因为我为基类设置了单元测试。

例子是：

```
YUI().use('node', function (Y) {

    function ObjectOne () {

    }

    ObjectOne.prototype.methodOne = function ()  {
        console.log("parent method");
    }

    function ObjectTwo () {
        ObjectTwo.superclass.constructor.apply(this, arguments);
    }

    Y.extend(ObjectTwo, ObjectOne);

    ObjectTwo.prototype.methodOne = function () {
        console.log("child method");

        ObjectTwo.superclass.methodOne.apply(this, arguments);
    }
}) 
```

我想测试 ObjectTwo 的继承 methodOne 是否已被调用。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T19:18:52.917

为此，您可以在`ObjectOne`.

```
spyOn(ObjectOne.prototype, "methodOne").andCallThrough();
obj.methodOne();
expect(ObjectOne.prototype.methodOne).toHaveBeenCalled(); 
```

此方法的唯一警告是它不会检查对象是否`methodOne`被调用`obj`。如果您需要确保它是在`obj`对象上调用的，您可以这样做：

```
var obj = new ObjectTwo();
var callCount = 0;

// We add a spy to check the "this" value of the call.    //
// This is the only way to know if it was called on "obj" //
spyOn(ObjectOne.prototype, "methodOne").andCallFake(function () {
    if (this == obj)
        callCount++;

    // We call the function we are spying once we are done //
    ObjectOne.prototype.methodOne.originalValue.apply(this, arguments);
});

// This will increment the callCount. //
obj.methodOne();
expect(callCount).toBe(1);    

// This won't increment the callCount since "this" will be equal to "obj2". //
var obj2 = new ObjectTwo();
obj2.methodOne();
expect(callCount).toBe(1); 
```

# javascript - Facebook 的 Like 按钮 iframe 如何通过弹出框展开而不搞砸其他所有内容？

> ID：15055512
> 
> 赞同：2
> 
> 时间：2013-02-24T19:15:24.437
> 
> 标签：javascript, html, facebook, iframe

当您在非 FB 网站上单击 FB 的 Like 按钮时，会出现一个弹出窗口，要求您写一条消息。他们如何做到这一点？看起来他们以某种方式扩展了 iframe，但我不知道如何不搞砸其他一切。谢谢。

试试看（如果你没有 FB，这将不起作用）：[https](https://developers.facebook.com/docs/reference/plugins/like/) ://developers.facebook.com/docs/reference/plugins/like/点击“Like”查看弹窗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:36:45.567

万一有人好奇——它是一个绝对定位的 iframe，可以改变 div 的大小。

# java - Java，将单个字符串与字符进行比较

> ID：15055515
> 
> 赞同：0
> 
> 时间：2013-02-24T19:15:33.893
> 
> 标签：java

有没有一种简单的方法来比较一个字符串（你知道它只包含一个字符）和一个字符？我目前使用的方法感觉有点“笨拙”。

```
c == "x".charAt(0) 
```

其中 c 是一个字符。我使用“x”（字符串）的原因是因为我不知道如何将 x 写为 char，所以我必须这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:17:57.463

`'x'`是一个字符，`"x"`是一个字符串。

## 解决方案

```
c == 'x' 
```

请参阅[Java 教程：字符](http://docs.oracle.com/javase/tutorial/java/data/characters.html)

## 笔记

```
"x".equals(Character.toString(c)) 
```

也可以，但出于以下原因，我总是会采用第一个解决方案：

1.  更容易阅读
2.  它更节省内存（一个 char 需要 2 个字节，而具有一个字符的 String 需要大约 40 个字节（[source](http://www.javamex.com/tutorials/memory/string_memory_usage.shtml)））
3.  更省时（无需强制转换，无需复杂的对象比较）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:18:07.670

```
char c = 'c'; 
```

`'c'`是一个字符并且`"x"`是一个字符串。 `if ("x".equals(Character.toString(c)))`比较他们。

正如在接受的答案中指出的那样，我的比较确实有它的缺点，但更具动态性。

# javascript - 使用句点访问对象的属性但未定义

> ID：15055522
> 
> 赞同：4
> 
> 时间：2013-02-24T19:16:12.427
> 
> 标签：javascript

我正在做codecademy的javascript教程并遇到以下问题：

```
变朋友 = {};
朋友.bill = {
  名字：“比尔”，
  姓氏：“盖茨”，
  号码：“（206）555-5555”，
  地址：['One Microsoft Way','Redmond','WA','98052']
};
朋友.史蒂夫= {
  名字：“史蒂夫”，
  姓氏：“工作”，
  号码：“（408）555-5555”，
  地址：['1 无限循环','Cupertino','CA','95014']
};
变量列表 = 函数（obj）{
    for(obj 中的 var 属性){
        控制台.log(prop);
    }
};
变种搜索=功能（名称）{
  for（朋友中的 var 道具）{
        控制台.log(prop);
        console.log(friends.prop);//friends[prop] 会打印出来

  }

};
列表（朋友）；
搜索（“史蒂夫”）；

```

console.log(friends.prop) 将打印出 undefined 但如果我将其更改为

friends[prop]，它将打印出账单和史蒂夫对象信息。

我看到w3c教程说两种访问方法是正确的，我想不通

问题是什么？

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:18:26.303

数组符号 ( `[prop]`) 提供了额外的间接级别，一种反射。

所以，`friends.bill`并且`friends["bill"]`将是相同的。但是，如果你想做类似的事情`var prop = 'bill'`，那么使用它的唯一方法就是 as `friends[prop]`。

如果你尝试`friends.prop`，你实际上是在要求它寻找一个名为“prop”的朋友。

# python - 将函数结果写入标准输入

> ID：15055524
> 
> 赞同：10
> 
> 时间：2013-02-24T19:16:23.487
> 
> 标签：python, python-3.x, stdin

我正在尝试将函数的结果写入标准输入。

这是代码：

```
def testy():
    return 'Testy !'

import sys
sys.stdin.write(testy()) 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "stdin_test2.py", line 7, in <module>
    sys.stdin.write(testy())
io.UnsupportedOperation: not writable 
```

我不完全确定，这是正确的做事方式吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-24T19:27:08.110

你可以模拟`stdin`一个类似文件的对象吗？

```
import sys
import StringIO

oldstdin = sys.stdin
sys.stdin = StringIO.StringIO('asdlkj')

print raw_input('.')       #  .asdlkj 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-06T19:11:35.690

我自己在谷歌上搜索如何做到这一点并弄清楚了。对于我的情况，我从hackerrank.com 获取一些示例输入并将其放入一个文件中，然后希望能够将所述文件用作我的`stdin`，以便我可以编写一个可以轻松复制/粘贴到他们的IDE 中的解决方案。我使我的 2 个 python 文件可执行，添加了 shebang。第一个读取我的文件并写入`stdout`.

```
#!/Users/ryandines/.local/share/virtualenvs/PythonPractice-U9gvG0nO/bin/python
# my_input.py
import sys

def read_input():
    lines = [line.rstrip('\n') for line in open('/Users/ryandines/Projects/PythonPractice/swfdump')]
    for my_line in lines:
        sys.stdout.write(my_line)
        sys.stdout.write("\n")

read_input() 
```

第二个文件是我为解决编程挑战而编写的代码。这是我的：

```
#!/Users/ryandines/.local/share/virtualenvs/PythonPractice-U9gvG0nO/bin/python
def zip_stuff():

    n, x = map(int, input().split(' '))
    sheet = []

    for _ in range(x):
        sheet.append( map(float, input().split(' ')) )

    for i in zip(*sheet): 
        print( sum(i)/len(i) )

zip_stuff() 
```

然后我使用操作系统的管道命令来提供 STDIN 的缓冲。工作方式与hackerrank.com 完全相同，因此我可以轻松剪切/粘贴示例输入以及相应的代码，而无需更改任何内容。像这样称呼它：`./my_input.py | ./zip_stuff.py`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-09T07:00:01.287

在 Linux 上是可能的：

```
import fcntl, termios
import os
tty_path = '/proc/{}/fd/0'.format(os.getpid())

with open(tty_path, 'w') as tty_fd:
        for b in 'Testy !\n':
            fcntl.ioctl(tty_fd, termios.TIOCSTI,b)
# input() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T19:25:50.387

`stdin`是输入流，而不是输出流。你不能给它写信。

您可能可以做的是使用创建管道`os.pipe`，使用将可读端转换为文件对象`os.fdopen`，并用它替换标准输入，然后写入可写端。

```
r, w = os.pipe()
new_stdin = os.fdopen(r, 'r')
old_stdin, sys.stdin = sys.stdin, new_stdin 
```

不过，我看不出那个结局很好。重写应用程序中使用`input`.

# php - Sphinx 返回数组和权重。

> ID：15055525
> 
> 赞同：0
> 
> 时间：2013-02-24T19:16:42.500
> 
> 标签：php, arrays, sphinx

我试图简单地回应返回的重量并做一些非常错误的事情。

这是返回数据的示例： Array ( [error] => [warning] => [status] => 0 [fields] => Array ( [0] => phrase ) [attrs] => Array ( )

```
 [matches] => Array
     (
        [34] => Array
            (
                [weight] => 1707
                [attrs] => Array
                    (
                    )

            )

    ) 
```

所以这是获取id的工作代码。这对我来说很有意义..

```
 if ( ! empty($result["matches"]) ) {
      foreach ( $result["matches"] as $doc => $docinfo ) {
            echo "DOC ID:$doc\n";
      }

      print_r( $result );
  } 
```

我已经尝试使用 doc id 进行另一个 foreach，然后循环并获取权重..

```
foreach $doc as $weight  { 
```

那行不通。我猜我在这里用多维数组做错了，但我不确定如何寻址嵌套数组..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:33:21.677

你必须尝试递归函数

```
$array =array(
    "matches" => array(
        array("weight"=>1707,"attrs"=>array("weight"=>100)),
        array("weight"=>1700,"attrs"=>array("weight"=>170)),
        array("weight"=>10,"attrs"=>array("weight"=>170,"attr"=>array("weight"=>"something other")))
    )
);

function recurse($array){
    foreach ($array as $arr){
        if (is_array($arr)){
            recurse($arr);
        } else {
            echo $arr . "<br>";
        }
    }
}

recurse($array); 
```

`Note`：此函数将返回`weight`任何级别数组中的每个参数值

**更新**

如果你只想`weight`从下面的数组中输出参数值，试试这个

```
$array =array(
    "matches" => array(
        array("weight"=>1707,"attrs"=>"other param"),
        array("weight"=>1700,"attrs"=>"something other too"),
    )
);

foreach($array['matches'] as $arr){
    echo $arr['weight'] . "<br>";
} 
```

# javascript - JSLint - 如何修复 ActiveXObject 在定义错误之前被使用

> ID：15055528
> 
> 赞同：0
> 
> 时间：2013-02-24T19:16:54.920
> 
> 标签：javascript, jslint

JSLint 对象到第 22 行：

```
function() { return new ActiveXObject('Msxml2.XMLHTTP'); }, 
```

在 reqTry 数组中。有什么办法可以更改代码以防止 JSLint 出现此错误？

它还反对下一行。

```
function Ajax() {
  this.req = null;
  this.url = null;
  this.status = null;
  this.statusText = '';
  this.method = 'GET';
  this.async = true;
  this.dataPayload = null;
  this.readyState = null;
  this.responseText = null;
  this.responseXML = null;
  this.handleResp = null;
  this.responseFormat = 'text'; // 'text', 'xml', 'object'
  this.mimeType = null;
  this.headers = [];

  this.init = function() {
    var i = 0;
    var reqTry = [
      function() { return new XMLHttpRequest(); },
      function() { return new ActiveXObject('Msxml2.XMLHTTP'); },
      function() { return new ActiveXObject('Microsoft.XMLHTTP' ); } ];

    while (!this.req && (i < reqTry.length)) {
      try {
        this.req = reqTry[i++]();
      }
      catch(e) {}
    }
    return true;
  };
  this.doGet = function(url, hand, format) {
    this.url = url;
    this.handleResp = hand;
    this.responseFormat = format || 'text';
    this.doReq();
  };
  this.doPost = function(url, dataPayload, hand, format) {
    this.url = url;
    this.dataPayload = dataPayload;
    this.handleResp = hand;
    this.responseFormat = format || 'text';
    this.method = 'POST';
    this.doReq();
  };
  this.doReq = function() {
    var self = null;
    var req = null;

    if (!this.init()) {
      alert('Could not create XMLHttpRequest object.');
      return;
    }
    req = this.req;
    req.open(this.method, this.url, this.async);
    if (this.method == "POST") {
      this.req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    }
    if (this.method == 'POST') {
      req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    }
    self = this;
    req.onreadystatechange = function() {
      var resp = null;
      self.readyState = req.readyState;
      if (req.readyState == 4) {

        self.status = req.status;
        self.statusText = req.statusText;
        self.responseText = req.responseText;
        self.responseXML = req.responseXML;

        switch(self.responseFormat) {
          case 'text':
            resp = self.responseText;
            break;
          case 'xml':
            resp = self.responseXML;
            break;
          case 'object':
            resp = req;
            break;
        }

        if (self.status > 199 && self.status < 300) {
          if (!self.handleResp) {
            alert('No response handler defined ' +
              'for this XMLHttpRequest object.');
            return;
          }
          else {
            self.handleResp(resp);
          }
        }

        else {
          self.handleErr(resp);
        }
      }
    };
    req.send(this.dataPayload);
  };
  this.abort = function() {
    if (this.req) {
      this.req.onreadystatechange = function() { };
      this.req.abort();
      this.req = null;
    }
  };
  this.handleErr = function() {
    var errorWin;
    // Create new window and display error
    try {
      errorWin = window.open('', 'errorWin');
      errorWin.document.body.innerHTML = this.responseText;
    }
    // If pop-up gets blocked, inform user
    catch(e) {
      alert('An error occurred, but the error message cannot be' +
      ' displayed because of your browser\'s pop-up blocker.\n' +
      'Please allow pop-ups from this Web site.');
    }
  };
  this.setMimeType = function(mimeType) {
    this.mimeType = mimeType;
  };
  this.setHandlerResp = function(funcRef) {
    this.handleResp = funcRef;
  };
  this.setHandlerErr = function(funcRef) {
    this.handleErr = funcRef;
  };
  this.setHandlerBoth = function(funcRef) {
    this.handleResp = funcRef;
    this.handleErr = funcRef;
  };
  this.setRequestHeader = function(headerName, headerValue) {
    this.headers.push(headerName + ': ' + headerValue);
  };

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:21:06.640

在 JavaScript 中，全局变量实际上是全局对象的属性。在浏览器中，全局对象是`window`. 所以你可以写：`window.ActiveXObject`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:23:45.027

您可以在文件级别将该对象作为假定的全局对象提供：

```
/*global ActiveXObject: false */ 
```

`windows`或通过将属性设置为全局`true`。[有关*Assume Windows*属性的更多信息。](http://www.jslint.com/lint.html#windows)

# php - MYSQL & PHP 将 LAST_INSERT_ID() 保存为局部变量

> ID：15055531
> 
> 赞同：2
> 
> 时间：2013-02-24T19:17:12.967
> 
> 标签：php, mysql

我在从 PHP 表单将数据存储在数据库中时遇到了一些问题。该表单调用了一个名为 insert 的文件，我在下面复制了该文件。基本上，我需要将详细信息存储到表 scout 中，并将 last_insert_id() 保存为局部变量，以便在我将项目插入表紧急联系人时使用。然后需要保存emergencycontacts last_insert_id() 然后存储在scout 表中。但是目前它不起作用。我认为我还没有正确存储/使用变量。

```
<?php
$con = mysql_connect("localhost","user","password");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("lex", $con);

mysql_query("INSERT INTO Scout (Unit_id, FirstName, SurName, DOB, Address, Telephone, School, Religion, Ethenic, Child_Doc, Doc_Phone, Allergies, Active)
VALUES ('$_POST[unitid]','$_POST[firstname]','$_POST[lastname]','$_POST[dob]','$_POST[address]','$_POST[phone]','$_POST[school]','$_POST[religion]','$_POST[ethnicidentity]','$_POST[doctorsname]','$_POST[doctorsnumber]','$_POST[health]','$_POST[radio]')");

mysql_query("SET @scout_id = LAST_INSERT_ID()");

mysql_query("INSERT INTO EmergencyContact (Scout_id, Name, Tel, Address) 
VALUES(@scout_id,'$_POST[emergencycontact]','$_POST[emergencyphone]',$_POST[emergencyaddress]')");

mysql_query("SET @emergency_id = LAST_INSERT_ID()");

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T09:35:18.563

利用`mysql_insert_id()`

```
$idInsertLast = mysql_insert_id(); 
```

结果是从此连接/用户插入的最后一个 AUTOINCREMENT id。如果您有 200 个不同的用户大约在同一时间执行插入事务，则每个用户都会收到他/她的最后一个 id，而不是其他任何人的，即使在 userA 插入记录的时间和他/她调用 mysql_insert_id()、userB 和 userC 的时间之间插入了自己的记录。

注意不要在用户之间共享连接，只要每个用户打开他/她自己的数据库连接，一切都会好起来的。

注意：mysql_query 和库的其余部分已被弃用，最终将从未来的 php 版本中删除。

# android - 我不明白 TypedValue

> ID：15055532
> 
> 赞同：0
> 
> 时间：2013-02-24T19:17:17.270
> 
> 标签：android

至：

> (metrics.density) 密度：1.0 (metrics.densityDpi) 密度 Dpi：160

区别：

```
float mm_1 = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_MM, 1, getResources().getDisplayMetrics()); 
```

和

```
float mm_2 = 1 * metrics.densityDpi * (metrics.density/25.4f); 
```

为什么会有这种差异？

```
mm_1 = 1.33333333
mm_2 = 6.2992125 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:32:14.890

`TypedValue.applyDimension()`不会从单位转换为英寸（我假设您正在尝试这样做，基于`25.4`）。

它只是将值转换为系统将使用的值，具体取决于电流密度。我假设您正在使用`hdpi`屏幕来执行此操作，因为密度因子`hdpi`为`4/3`. 用 a 试试`mdpi`，它可能最终会是 1.0，因为它不需要转换。

# php - PHP使用参数获取目录中的图像

> ID：15055533
> 
> 赞同：-2
> 
> 时间：2013-02-24T19:17:23.583
> 
> 标签：php, image, function, fetch, glob

我正在使用 PHP 获取目录中的所有图像，但我正在寻找一种方法来避免为此创建多个函数。我的代码如下所示：

```
function getAllImages() {
    $dir = "images/work/*";  
    foreach(glob($dir) as $file)  
    {  
        echo '<img src="'.$file.'">';
    }  
} 
```

我在外部文件中调用函数

`getAllImages();`

事情是；这些文件需要位于“work”目录的子文件夹中，因此基本上一个子目录可以是*images/work/project1*，其中包含名为“project1”的项目的图像。

我这样做的简单方法是创建多个函数，如“getAllImagesProject1”等，但我想要以某种方式使用参数（或类似的东西）来访问子目录，例如

`getAllImages('project1');`

我无论如何都不是代码向导，所以如果有人知道如何让它工作，我会很高兴！谢谢您阅读此篇！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:19:51.383

也许你应该试试这个：

```
function getAllImages($directory) {
    $dir = "images/work/{$directory}/*";  
    foreach(glob($dir) as $file)  
    {  
        echo '<img src="'.$file.'">';
    }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:36:48.447

我认为您还应该在输出图像之前对其进行验证

```
function getAllImages($path) {
    $it = new FilesystemIterator($path, FilesystemIterator::SKIP_DOTS);
    $it = new RegexIterator($it, '#\.(gif|png|jpg|jpeg)$#i');
    foreach ( $it as $img )
        @getimagesize($img) and printf("<img src='%s' />", $img);
} 
```

# java - 模式编译错误

> ID：15055534
> 
> 赞同：2
> 
> 时间：2013-02-24T19:17:24.037
> 
> 标签：java, android, regex

我创建了两个模式来编译`ls -l`RegexBuddy 中的输出，但在 Android 模式中编译给了我一个错误。在 Java 7 中，它编译得很好。

原始模式是

1.  `(^[l,d,-][-,r,w,x]{9})[\t,\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\t,\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\t,\s]{1,}([0-9]{0,})[\t,\s]{1,}([0-9]{4}-[0-9]{1,2}-[0-9]{1,2}\s[0-9]{2}:[0-9]{2})[\t,\s]{1,}(.{1,})`
2.  `(^[l,d,-][-,r,w,x]{9})[\t,\s]{1,}[0-9]{1,}[\t,\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\t,\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\t,\s]{1,}([0-9]{0,})[\t,\s]{1,}(\w{3}\s[0-9]{1,2}[\t,\s]{1,}([0-9]{1,2}:[0-9]{2}|[0-9]{4}))[\t,\s]{1,}(.{1,})`

第一个是为了匹配

```
-rwxr-xr-x  1 doctor users    399 2011-11-11 13:33 shot.s 
```

或者

```
-rwxr-xr-x  1 100 100    399 2011-11-11 13:33 file.txt 
```

第二个是为了匹配

用于匹配

```
-rwxr-xr-x  1 doctor users    399 Nov 22  2011 shot.s 
```

或者

```
-rwxr-xr-x  1 100 100    399 Nov 22 13:33 shot.s 
```

在代码中：

1.  ```
    private static final Pattern LS_L =
        Pattern.compile("(^[l,d,-][-,r,w,x]{9})[\\t,\\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\\t,\\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\\t,\\s]{1,}([0-9]{0,})[\\t,\\s]{1,}([0-9]{4}-[0-9]{1,2}-[0-9]{1,2}\\s[0-9]{2}:[0-9]{2})[\\t,\\s]{1,}(.{1,})"); 
    ```

2.  ```
    private static final Pattern LS_L_1 =
        Pattern.compile("(^[l,d,-][-,r,w,x]{9})[\\t,\\s]{1,}[0-9]{1,}[\\t,\\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\\t,\\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\\t,\\s]{1,}([0-9]{0,})[\\t,\\s]{1,}(\\w{3}\\s[0-9]{1,2}[\\t,\\s]{1,}([0-9]{1,2}:[0-9]{2}|[0-9]{4}))[\\t,\\s]{1,}(.{1,})"); 
    ```

第一个扔

```
02-24 21:14:21.854: E/AndroidRuntime(3072): Caused by: java.util.regex.PatternSyntaxException: Missing closing bracket in character class near index 219:
02-24 21:14:21.854: E/AndroidRuntime(3072): (^[l,d,-][-,r,w,x]{9})[\t,\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\t,\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\t,\s]{1,}([0-9]{0,})[\t,\s]{1,}([0-9]{4}-[0-9]{1,2}-[0-9]{1,2}\s[0-9]{2}:[0-9]{2})[\t,\s]{1,}(.{1,})
02-24 21:14:21.854: E/AndroidRuntime(3072):                                                                                                                                                                                                                            ^
02-24 21:14:21.854: E/AndroidRuntime(3072):     at java.util.regex.Pattern.compileImpl(Native Method)
02-24 21:14:21.854: E/AndroidRuntime(3072):     at java.util.regex.Pattern.compile(Pattern.java:400)
02-24 21:14:21.854: E/AndroidRuntime(3072):     at java.util.regex.Pattern.<init>(Pattern.java:383)
02-24 21:14:21.854: E/AndroidRuntime(3072):     at java.util.regex.Pattern.compile(Pattern.java:374) 
```

第二个给我

```
02-24 21:00:24.166: E/AndroidRuntime(1366): Caused by: java.util.regex.PatternSyntaxException: Missing closing bracket in character class near index 250:
02-24 21:00:24.166: E/AndroidRuntime(1366): (^[l,d,-][-,r,w,x]{9})[\t,\s]{1,}[0-9]{1,}[\t,\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\t,\s]{1,}([[a-z_][a-z0-9_]{0,30}|[0-9]{1,})[\t,\s]{1,}([0-9]{0,})[\t,\s]{1,}(\w{3}\s[0-9]{1,2}[\t,\s]{1,}([0-9]{1,2}:[0-9]{2}|[0-9]{4}))[\t,\s]{1,}(.{1,}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:11:33.847

对我来说，错误是通过转义字符类中的 - 每个正则表达式中的两个来`[`消除的。`[[a-z_]`

```
 [\\[a-z_] 
```

一些正则表达式实现不需要`[`在字符类中进行转义，但 java 这样做是因为*“字符类可能出现在其他字符类中”*。请参阅[字符类减法](https://stackoverflow.com/questions/3201689/character-class-subtraction-converting-from-java-syntax-to-regexbuddy)和[文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)。

`[0-9]`顺便说一句，您可以通过将所有替换为 并从所有 中`\\d`删除来缩短您的正则表达式，因为也匹配选项卡，并从您的字符类中删除所有逗号，例如应该是。`\\t``[\\t,\\s]``\\s``[-,r,w,x]``[-rwx]`

如果你不担心匹配不区分大小写，你可以`[a-z0-9_]`用`\\w`.

*编辑*

再看一遍，似乎没有理由`[`在字符类中有 ，所以`[[a-z_]`应该是`[a-z_]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:12:47.987

除了@Mike 所说的：

1.  将 {1,} 替换为 +
2.  `[a-z_][a-z0-9_]{0,30}`你会搭配什么？当然不是 UNIX 文件名，因为这更像是`[^\0/]+`

# mysql - Mysql创建频率分布

> ID：15055540
> 
> 赞同：10
> 
> 时间：2013-02-24T19:18:07.010
> 
> 标签：mysql, count, distribution, frequency

我在下面有一个简单的表 BIRDCOUNT，显示在任何一天计算了多少只鸟：

```
+----------+
| NUMBIRDS |
+----------+
| 123      |
| 573      |
| 3        |
| 234      |
+----------+ 
```

我想创建一个频率分布图，显示多少次鸟类被计算在内。所以我需要 MySQL 来创建类似的东西：

```
+------------+-------------+
| BIRD_COUNT | TIMES_SEEN  |
+------------+-------------+
| 0-99       | 17          |
| 100-299    | 23          |
| 200-399    | 12          |
| 300-499    | 122         |
| 400-599    | 3           |
+------------+-------------+ 
```

如果鸟类数量范围是固定的，这将很容易。但是，我永远不知道看到多少只鸟的最小值/最大值。所以我需要一个选择语句：

1.  创建与上述类似的输出，始终创建 10 个计数范围。
2.  （更高级）创建类似于上面的输出，总是创建 N 个计数范围。

我不知道＃2是否可以在一次选择中进行，但任何人都可以解决＃1吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T21:52:52.783

```
SELECT
    FLOOR( birds.bird_count / stat.diff ) * stat.diff as range_start, 
    (FLOOR( birds.bird_count / stat.diff ) +1) * stat.diff -1 as range_end, 
    count( birds.bird_count ) as times_seen
FROM birds_table birds, 
    (SELECT 
        ROUND((MAX( bird_count ) - MIN( bird_count ))/10) AS diff
    FROM birds_table
    ) AS stat
GROUP BY FLOOR( birds.bird_count / stat.diff ) 
```

在这里，您可以回答您的两个问题；] 不同之处在于范围的开始和结束位于单独的列中，而不是连接在一起，但是如果您需要在一列中使用它，我想您可以从这里开始。要更改范围数，只需编辑数字 10 您可以在子查询中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T20:43:23.227

当创建这样的东西时，GROUP BY 是你的朋友。基本思想是将每个值放入一个桶中，然后统计每个桶中的元素个数。要创建存储桶，您需要定义一个函数来获取该值并计算存储桶的唯一值。

像这样的东西：

```
SELECT
  @low := TRUNCATE(bird_count/100, 0) * 100 as Low,
  TRUNCATE(@low + 99, 0) as High,
  COUNT(*) AS Count
FROM birds_seen
GROUP BY Low; 
```

在这种情况下，您定义一个函数来计算鸟类数量，并计算桶的下限。然后，您将下限范围内的所有值分组，例如，这会将 123 和 145 放入标有“100”的存储桶中，将 234 和 246 放入标有“200”的存储桶中。

现在，每个值都放在一个桶中，您可以按桶标签对值进行分组，并计算每个桶中元素的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T20:41:19.597

我猜你的实际 SQL 查询：

```
SELECT dateColumn, COUNT(*) AS NUMBIRDS
FROM birdTable
GROUP BY dateColumn 
```

如果是这样，您所要做的就是“分类”您的计数：

```
SELECT CONCAT_WS('-', 
   FLOOR( NUMBIRDS/100 )*100,
   ((FLOOR( NUMBIRDS/100 )+1)*100) - 1
) AS BIRD_COUNT
,COUNT(*) AS TIMES_SEEN
FROM (
    SELECT dateColumn, COUNT(*) AS NUMBIRDS
    FROM birdTable
    GROUP BY dateColumn
) AS birdCounts
GROUP BY BIRD_COUNT 
```

当然，如果缺少其中一个范围，您将不会获得匹配的行 - 但如果这是一个问题，您可以使用 LEFT JOIN 轻松解决该问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-21T03:37:15.520

在@gustek[答案](https://stackoverflow.com/a/15057082/2562746)和维基百科的[直方图](https://en.wikipedia.org/wiki/Histogram#Number_of_bins_and_width)页面的基础上，这里有几个解决方案，使用斯科特规则和赖斯规则，使用箱数公式动态设置箱宽 h， ![k = \ceil{ (最大值 - 最小值) / h }](../Images/6dc460dba8e28702c70fa4a08e811985.png)

```
# Histogram generator using Scott's rule, width(h) = (max - min) / k
SELECT any_value(FLOOR(r2.value / stat.width) * stat.width) as range_start,
       count(r2.value)                                      as times_seen,
FROM RESULT r2,
 (
     select 3.49 * stddev(r.value) / (power(count(*), 1 / 3)) as width
     from RESULT r
 ) as stat
GROUP BY FLOOR(r2.value / stat.width);

# Histogram using Rice rule k = ceil(2*n^1/3), width(h) = (max - min) / k
SELECT any_value(FLOOR(r2.value / stat.width) * stat.width) as range_start,
       count(r2.value)                                      as times_seen,
FROM RESULT r2,
 (
     select (max(r.value) - min(r.value)) / ceil(2 * power(count(*), 1 / 3)) as width
     from RESULT r
 ) as stat
GROUP BY FLOOR(r2.value / stat.width); 
```

该`any_value()`函数用于解决新的 MySQL`ONLY_FULL_GROUP_BY`问题。

# phpunit - 如何在 phpunit.xml 文件中引用环境变量？

> ID：15055552
> 
> 赞同：3
> 
> 时间：2013-02-24T19:18:59.940
> 
> 标签：phpunit, environment-variables

在我的 phpunit.xml 文件中，我有一个用于记录代码覆盖率报告的块，如下所示：

```
<logging>
    <log type="coverage-html" target="./logs/coverage" ...
</logging> 
```

但是，我不喜欢对目标路径使用硬编码字符串。我希望每个用户都能够通过环境变量指定他们的目标，这样他们就可以将日志放在他们喜欢的任何地方，而无需更改源代码控制的文件。我想做这样的事情：

```
<logging>
    <log type="coverage-html" target="$LOG_PATH" ...
</logging> 
```

我在 PHPUnit 文档中没有看到对这种替换的任何支持。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T11:24:45.020

实际上你不应该`phpunit.xml`在你的存储库中。PHPUnit 在执行时查找两个 XML 文件，即`phpunit.xml`和`phpunit.xml.dist`. 如果找到，它将始终优先考虑`phpunit.xml`，否则将回退到`phpunit.xml.dist`. 从[文档](http://www.phpunit.de/manual/current/en/textui.html)中：

> 如果当前工作目录中存在 phpunit.xml 或 phpunit.xml.dist（按此顺序）并且未使用 --configuration，则将自动从该文件中读取配置。

话虽如此，您应该`phpunit.xml.dist`在存储库中作为模板/样板设置来运行测试。`phpunit.xml`然后，如果每个单独的开发人员希望添加他们的特定设置，他们可以从中创建自己的。

此外`phpunit.xml`，您的存储库中应该忽略该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:47:51.897

根据[伯格曼先生](http://sebastian-bergmann.de/archives/797-Global-Variables-and-PHPUnit.html)的说法：

```
protected $backupGlobals = FALSE; 
```

在您的测试类中将禁用备份和恢复全局变量的（默认）行为。但是，请注意，将其放在 setUp 方法中不会产生任何效果。希望有帮助。

# php - 如何在 PHP 中从 Unicode 转换为 UTF-8？

> ID：15055553
> 
> 赞同：0
> 
> 时间：2013-02-24T19:19:05.147
> 
> 标签：php, file, unicode, utf-8

我保存了名为“File1.txt”的文件，内容（英语和希伯来语）“שלום hello”。它的编码是Unicode。当我执行“readfile”并发送标头时：

```
Content-type: text/plain;charset=utf-8 
```

希伯来字符消失。奇怪的是，当我再次打开文件时，我看到了希伯来字符（Unicode 支持希伯来语），而 UTF-8 扩展了 Unicode，所以理论上我不需要进行任何转换。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:23:24.957

“其编码 [ing] 是 Unicode”这一行毫无意义。Unicode 可以通过多种方式在文本文件中表示（UTF-8 就是其中之一）。

如果您的意思是 - 它在记事本中保存为 Unicode，这意味着该文件是 UTF-16LE。发送相应的标头：

```
Content-type: text/plain;charset=utf-16 
```

它会起作用的。

要回答标题中的问题，通常`iconv()`在 PHP 中使用该函数在编码之间进行转换。不过请注意 - 它可能在托管环境中的 Web 服务器上不可用。

# flash - 从 Flash Pro 在 FlashDevelop 中放置符号

> ID：15055556
> 
> 赞同：0
> 
> 时间：2013-02-24T19:19:32.927
> 
> 标签：flash, flashdevelop, flash-cs6

我正在使用 Flash 开发一个 Web 应用程序，并使用 Flash Pro 来设计我的应用程序的更多图形部分，并使用 FlashDevelop 来设计代码。

到目前为止，我已经在 Flash Pro 中创建了一个 UI。我想把这个UI导入FlashDevelop，所以我把部分UI保存为symbol，导出为SWC等屏幕。虽然我可以编写代码在程序启动时将每个符号移动到 FlashDevelop 中的正确位置，但这种技术听起来效率低下。

我应该如何导入我的符号，以便它们与我在 Flash Pro 中放置在舞台上的位置相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:26:55.967

在导出 SWC 之前，您可以尝试将所有 UI 符号放入一个“容器”影片剪辑中。基本上将它们“分组”在另一个movieClip中。为此，只需一次选择 UI 中的所有项目，然后转换为影片剪辑。提供名称以通过 FlashDevelop 代码访问它。而已。无需移动、更改或删除任何内容。只需选择并转换。

现在在 Flash Develop 中，您可以移动添加和定位那个“容器”MC 来定位整个界面。您现在必须在代码中作为“容器”的子项访问您原来的 UI 元素。

要编辑现有代码以说明新的容器 MC 名称？这就是文本工具“查找和替换”派上用场的地方......替换例如“playBTN”。使用“containerMC.playBTN”。（注意句号？）单击确定和 taa-daa，您编辑了 X 数量的代码行，而无需繁琐的重新输入。希望能帮助到你。

# python - 使用 winappdbg 设置断点后不断出现访问冲突

> ID：15055561
> 
> 赞同：0
> 
> 时间：2013-02-24T19:20:14.850
> 
> 标签：python, debugging, breakpoints, access-violation, ida

我正在使用 winappdbg 框架在 python 中构建调试器。

我可以使用 event.debug.break_at(event.get_pid(),address) 设置一些断点以设置断点，但是在设置某些断点之后（而不是在设置它们时，而是在程序命中它们时！）我得到访问冲突例外。

例如，我可以在 0x48d1ea 或 0x47a001 处设置一个访问点，但如果我在 0x408020 处设置一个访问点，则会出现异常。

模块基地址为 0x400000。

`0048D0BE: xor esi,eax`

`0048D0C0: call [winamp!start+0x25c1]`

`760DCC50: add [ebx],dh`

`Access Violation`

`Exception event (00000001) at address 779315DE, process 9172, thread 9616`

顺便说一句，我从 IDA 生成的 pida 文件中获取地址来设置断点。我重新设置了文件的基础，因此地址应该对齐

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T19:43:44.233

我的第一个猜测是你试图在指令中间设置断点。我的第二个猜测是，您还修改了寄存器的内容，这就是写入 [ebx] 时访问冲突的原因。（另请注意 0x779315DE 可能位于 ntdll.dll 而不是 winamp.exe，因此它可能完全是另一回事）。

但如果没有更多信息，我不确定。你能把代码贴在你提到的那些地址上吗？您是否尝试继续异常并查看会发生什么？寄存器的内容也会有所帮助，就像尝试 Microsoft 的调试器 (ntsd.exe) 以查看问题是否特定于 WinAppDbg。

关于来自 IDA 的地址，您可以尝试使用相对地址来避免 ASLR 出现问题。例如，如果“winamp”模块基址是 0x400000，断点应该在 0x408020，您可以像这样在“winamp!0x8020”处设置断点：

```
address = event.get_process().resolve_label("winamp!0x8020")
event.debug.break_at(event.get_pid(), address) 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T22:47:20.353

显然 pida_dump 脚本没有得到正确的基地址，所以当我进行变基时，代码就像

地址 - old_base_address + new_base_address

并且由于 old_base_address 已磨损，它错过了我的 BP。

感谢任何方式的帮助！

# autohotkey - 单击按钮时想要产生按键

> ID：15055562
> 
> 赞同：2
> 
> 时间：2013-02-24T19:20:18.687
> 
> 标签：autohotkey

我正在尝试制作一个持久的浮动工具栏，以帮助我在 Windows 平板电脑（无键盘）上执行常见任务，例如“撤消”、“复制”和“删除”。现在我有这个：

```
Gui, Destroy
Gui,+AlwaysOnTop
Gui,+ToolWindow
Gui,+Border
Gui, Add, Button, y5 w60, &Undo
Gui, Add, Button, y5 w60, &Delete
Gui, Add, Button, y8 h18, X
Gui, Show, y0
Return

ButtonUndo:
ControlSend,, ^z
Return

ButtonDelete:
ControlSend,, {Backspace}
Return

ButtonX:
ButtonCancel:
Gui, Destroy
ExitApp

End:
Reload
Return 
```

但它似乎没有做任何事情，只是在我单击按钮时发出错误声音。我是否需要先告诉它以某种方式关注不同的窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:35:02.373

我真的很喜欢这个主意！问题是，一旦您单击其中一个按钮，焦点就会从您要控制的应用程序中移开……所以您将命令发送到您自己的 AutoHotKey 应用程序……

解决此问题的一种简单方法是首先发送一个`Alt`+ `Esc`，然后在 20 毫秒睡眠后发送您的命令。

```
ButtonUndo:
    Send, !{Esc} ; Changed from Alt+Tab
    Sleep, 20
    Send, ^z
Return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:08:10.403

这是一个使用 Settimer 进行切换的示例

```
SetTimer, CheckWin, 100; Put at the beginning of your script   

CheckWin:
WinGetTitle, CurrName, A
if (CurrName = PrevName) ; check if window has been changed
    Return ; Only continue if an other application was activated
LastName = %PrevName% ; Use %LastName% in winactivate
PrevName = %CurrName% ; When new app, then sync AppName and PrevName
Return 
```

# cocoa - NSMutableURLRequest setHTTPBody 不起作用

> ID：15055564
> 
> 赞同：2
> 
> 时间：2013-02-24T19:20:25.690
> 
> 标签：cocoa, nsurlrequest

我想向服务器发出 HTTP 请求并获取一些数据。
这是我的代码：

```
NSString *post = @"mode=1";  
NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding];  
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];  
NSURL *url = [NSURL URLWithString:[@"http://example.com" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];  
//if i will give the url http://example.com?mode=1 it works  
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];  
[theRequest setHTTPMethod:@"POST"];  
[theRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];  
[theRequest setHTTPBody:postData];` 
```

如果服务器将采用 mode=1 参数，它将进行 sql 查询并返回一些数据。
这样它不起作用，我认为这是关于`setHTTPBody`.
如果我将参数`mode=1`直接放到网址中，它将起作用。
你能告诉我我哪里错了吗？如果您需要进一步解释，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:49:48.183

> 如果我给网址[http://example.com?mode=1](http://example.com?mode=1)它可以工作

那么这是一个 GET，而不是一个 POST 请求。所以使用 GET 或让您的服务器处理 POST。

# asp.net - 使用 SQL Server 的简单 ASP.NET 站点是否称为 2 层架构？

> ID：15055566
> 
> 赞同：1
> 
> 时间：2013-02-24T19:20:28.110
> 
> 标签：asp.net, sql-server, architecture, 2-tier

假设我有一个用 C# 构建的简单 Web 应用程序，其中包括几个 aspx 页面和一个包含 SQL Server 数据库详细信息的 web.config 文件。一些 aspx 页面将从数据库调用存储过程 - SELECT 或 INSERT 查询，并且将使用表单身份验证。

从应用程序架构的角度来看，这是 2 层架构（数据层 - 客户端层）还是 3 层架构（客户端层 - 业务层 - 数据层）？

这听起来像是 2 层，但由于 aspx.cs 是服务器端，这会被视为业务层吗？

另外，如果我不应该在这里问这个问题，我很抱歉，但我不记得你姐妹网站的名字了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:15:05.603

术语`Tier`和`Layer`不是同义词。

A`Tier`是应用程序中的“物理”分离。每一层都是部署和执行一个或多个层的地方。这包括 Web 服务器、数据库服务器等项目。请注意，整个 2（或 20！）层系统甚至可以从单台机器上执行。例如，当 Web 服务器和数据库服务器安装在同一硬件上时。

A`Layer`是应用程序中的逻辑分隔，使用诸如表示、业务逻辑和数据访问等术语来描述应用程序中的各种逻辑分隔。

系统可以是 n-Tier 和 n-Layer。

因此，如果您有一个由 1 个 Web 服务器（运行应用程序本身）和 1 个数据库服务器（您的数据库服务器）组成的 Web 应用程序，那么您就有一个 2 层应用程序。如果应用程序中唯一的分隔是表结构所在的位置，那么它很可能也是一个 2 层应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:06:34.713

是的，在我看来，您所描述的是一个 2 层架构，因为即使代码是服务器端的，也没有业务层。业务层应该包含所有业务对象和逻辑，并且您的 .cs 页面将简单地调用这些业务对象。

我以相同的方式构建我的大多数应用程序：Asp.net 前端调用 SQL Server 存储过程进行 CRUD 操作。但是，如果我曾经使用不同的数据库平台，我将不得不更改很多代码，因为没有真正的业务层。最后，业务层也将使您的代码更具可测试性。

抱歉，我无法帮助解决姐妹网站的问题：）

# jquery - 不断将一个 div 高度与另一个进行比较，两者都包含动态内容

> ID：15055567
> 
> 赞同：1
> 
> 时间：2013-02-24T19:20:29.137
> 
> 标签：jquery, dynamic, height, sidebar

好的，所以我正在做一个网站。基本上，网站（或至少我正在处理的页面）遵循以下基本结构：

![](../Images/aaec3d9ca6884091b91d61523fb711be.png)

页眉、左侧边栏、内容（未显示，页脚）

左侧边栏和内容的高度必须相等（较小的扩展到较大的高度）。有时侧边栏有更大的高度，有时是内容。内容区域具有可变宽度，而侧边栏具有静态宽度。内容区域使用 AJAX 在用户单击内容时将内容动态加载到其中。

我还有一个内置 AJAX 和 PHP 的主题转换器，用户可以在其中选择不同的配色方案、标题类型以及固定或流体布局。

侧边栏和内容的基本设置是：

```
<div id="main">
  <div id="sidebar"></div>
  <div id="content"></div>
</div>

#main {
position: relative;
width: 100%;
overflow: hidden;
border-bottom: 1px solid #dddddd;
}

#sidebar {
width: 239px;
padding: 0px 0px 0px 15px;
background: #f6f6f6;
border-right: 1px solid #ddd;
position: relative;
}

#content {
position: relative;
background: #fff;
top: 1px;
margin-left: 280px;
padding-top: 10px;
} 
```

无论如何，这就是它的要点。无论如何，我有它，所以无论选择固定布局样式还是流体布局样式，当侧边栏高度大于内容时，一切都可以正常工作。但是，当内容高度大于侧边栏高度时，侧边栏高度只会填满侧边栏部分（即它不会向下延伸到内容为止）。现在，可以通过添加 position: absolute 到侧边栏部分轻松解决此问题，如果内容高度大于侧边栏高度。

所以基本上，我需要知道是否可以对侧边栏 div 的高度和内容 div 的高度进行连续的动态比较，并且当内容 div 的高度大于侧边栏 div 的高度时，添加 position: absolute 到侧边栏 div (并删除 position: absolute 如果侧边栏 div 的高度大于内容 div 的高度）。

抱歉，如果我不是很清楚，如果您不理解或有任何问题，请随时要求我澄清任何事情。

感谢您的任何帮助，您可以提供！

当前当侧边栏高度大于内容的高度时：

[http://i.imgur.com/h6AWSdR.png](https://i.imgur.com/h6AWSdR.png)（这很好）

当前，当侧边栏高度小于内容的高度时：

[http://img845.imageshack.us/img845/9093/11d97de76d7d499389bc6a2.png](http://img845.imageshack.us/img845/9093/11d97de76d7d499389bc6a2.png)（这很糟糕---侧边栏需要位置：绝对添加到它以更正）

编辑：

感谢尼尔森，到目前为止，我几乎可以正常工作。

现在我有：

```
<script>
  $(document).ready(function() {
    if ($('#contentbody-wrapper').prop('offsetHeight') > $('#sidebar').prop('offsetHeight') ) {
      $('#sidebar').css('position','absolute');
    } else { $('#sidebar').css('position','relative'); }

  $('#contentbody-wrapper').on('ajaxComplete', function() {
    if ($('#contentbody-wrapper').prop('offsetHeight') > $('#sidebar').prop('offsetHeight') ) {
      $('#sidebar').css('position','absolute');
    } else { $('#sidebar').css('position','relative'); }
   });
});
</script> 
```

它适用于页面加载，但是如果您单击一个按钮以将内容替换为 ajax 加载的内容它可以工作，但是如果您单击该按钮以拉回原始内容，它会给出它的位置：当它应该是绝对的时，相对，然后，如果您再次单击该按钮以再次加载 ajax 内容，则它会给它 position: absolute 当它应该是相对的。然后，如果您单击按钮再次加载原始内容，它会给出正确的位置：relative，并且当您再次单击 ajax 内容加载按钮时，它会给出正确的位置：absolute。

所以它似乎每隔一段时间都有效......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:41:07.643

正如您所说，您的**内容**div 通过 ajax 调用加载其内容，您可以侦听[全局 ajax 事件](http://docs.jquery.com/Ajax_Events#Global_Events) `ajaxComplete`，该事件将在您所需的 div 容器（如您的内容父 div）内完成的任何时候触发 ajax 调用，然后检查高度。

像这样的东西：

```
$('#content_container').on('ajaxComplete', function() {
   setTimeout(function() {
      if ($('#content_container').prop('offsetHeight') > $('#sidebar').prop('offsetHeight') ) {
         $('#sidebar').css('position','absolute');
      }
   }, 300); //check for heights after 300ms of ajaxComplete event
}); 
```

**更新：**
更新以在 ajax 完成后在一个小的超时时间内检查高度，从而为 DOM 提供额外的时间来更新新尺寸。

# c# - 运营商的预制代表？

> ID：15055572
> 
> 赞同：3
> 
> 时间：2013-02-24T19:20:56.093
> 
> 标签：c#

假设我想使用加法运算符 ( `+`) 作为委托，我将如何将它传递给方法？

寻找类似于 Python 的[`operator.add`](http://docs.python.org/release/3.1/library/operator.html#operator.add).

例如，而不是

```
var center = _drawingPoly.Aggregate((a, b) => a + b)/_drawingPoly.Count; 
```

我想写一些类似的东西：

```
var center = _drawingPoly.Aggregate(operator+)/_drawingPoly.Count; 
```

（仅供参考，`+`这里超载）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:33:20.893

没有内置任何东西，但你可以使用表达式树来做到这一点：

```
public static Func<T, T, T> OpAdd<T>()
{
    var param1Expr = Expression.Parameter(typeof(T));
    var param2Expr = Expression.Parameter(typeof(T));
    var addExpr = Expression.Add(param1Expr, param2Expr);
    var expr = Expression.Lambda<Func<T, T, T>>(addExpr, param1Expr, param2Expr);

    return expr.Compile();
} 
```

然后你可以使用它：

```
var center = _drawingPoly.Aggregate(OpAdd<int>())/_drawingPoly.Count; 
```

不幸的是，这种方法不是类型安全的，您可能希望缓存创建的结果委托。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:26:27.140

唉，该语言没有这样的功能。

# ios - 如何访问对象恢复 ID（为什么它为空？）

> ID：15055574
> 
> 赞同：3
> 
> 时间：2013-02-24T19:21:06.127
> 
> 标签：ios, objective-c, null, nsarray, nslog

我在 xib 中有 uiButtons。我已经为所有这些设置了恢复 ID。我需要打印这些恢复 ID 的列表。为此，我在 viewDidload 中调用以下代码：

```
-(void)loadViewFromNIB:(NSString *)nibName owner:(id)owner
{

NSArray *objects = [[NSBundle mainBundle] loadNibNamed:nibName owner:owner options:nil];
NSArray *subviews = [[objects objectAtIndex:0]subviews];
for (id key in subviews) {
        [key addTarget:self
        action:@selector(touchB:)
        forControlEvents:UIControlEventTouchDown];
        [key addTarget:self
                   action:@selector(touchE:)
         forControlEvents:UIControlEventTouchUpInside];
        NSString *ident = self.restorationIdentifier;
        NSLog(@"%@",ident);

} 
```

我得到这个输出：

```
2013-02-24 13:05:38.817 fozbKEY[3939:11603] (null)
2013-02-24 13:05:38.822 fozbKEY[3939:11603] (null)
2013-02-24 13:05:38.824 fozbKEY[3939:11603] (null) 
```

这只是重复一堆。我做错了什么？我如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T19:25:18.000

您正在记录视图控制器的恢复 ID。尝试记录按钮的恢复 ID。现在你做：

```
NSString *ident = self.restorationIdentifier; 
```

将该行更改为：

```
NSString *ident = [key restorationIdentifier]; 
```

对您的代码进行更好的更改是：

```
for (UIView *subview in subviews) {
    if ([subview isKindOfClass:[UIButton class]]) {
        UIButton *key = (UIButton *)subview;
        [key addTarget:self action:@selector(touchB:) forControlEvents:UIControlEventTouchDown];
        [key addTarget:self action:@selector(touchE:) forControlEvents:UIControlEventTouchUpInside];

        NSString *ident = key.restorationIdentifier;
        NSLog(@"%@",ident);
    }
} 
```

# android - 将文本从服务发送到视图？

> ID：15055577
> 
> 赞同：0
> 
> 时间：2013-02-24T19:21:18.230
> 
> 标签：android

我有一个观点：

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/textLOG"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:ems="10"
        android:inputType="textMultiLine"
        android:scrollbars="vertical" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="17dp"
        android:text="@string/systemStarted"
        />

</RelativeLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity
{

    @Override
    protected void onCreate( Bundle savedInstanceState ) 
    {
        super.onCreate( savedInstanceState );

        setContentView( R.layout.activity_main );
        Globals.getInstance().setParent( this );
    }

    @Override
    public boolean onCreateOptionsMenu( Menu menu ) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate( R.menu.main, menu );
        return true;
    }
} 
```

以及每秒向视图发送文本的服务。

```
public class CameraService extends Service
{
    private final long   mDelay  = 0;
    private final long   mPeriod = 1000;
    private final String LOGTAG  = "BootDemoService";

    private Timer mTimer;

    private class LogTask extends TimerTask 
    {
        public void run() 
        {
            Log.i( LOGTAG, "scheduled" );
            Globals.getInstance().addToLog( new Date().toString() );
        }
    }

    private LogTask mLogTask;

    @Override
    public IBinder onBind( final Intent intent ) 
    {
        return null;
    }

    @Override
    public void onCreate() 
    {
        super.onCreate();

        Log.i( LOGTAG, "created" );

        mTimer   = new Timer();
        mLogTask = new LogTask();
    }

    @Override
    public void onStart( final Intent intent, final int startId )
    {
        super.onStart( intent, startId );

        Log.i( LOGTAG, "started" );

        mTimer.schedule( mLogTask, mDelay, mPeriod );
    }
} 
```

通过这个单身人士：

```
public class Globals 
{   
    private Activity parent;

    private static Globals instance = null;

    public static Globals getInstance()
    {
        if( instance == null ) 
        {
            instance = new Globals();
        }

        return instance;
    }

    public Globals()
    {
        super();
    }

    public void setParent( Activity parent ) 
    {
        this.parent = parent;
    }

    public void addToLog( String o )
    {

        if( parent != null )
        {
            TextView text = (EditText)parent.findViewById( R.id.textLOG );

            text.setText( text.getText() + "\n" + o );
        }
    }
} 
```

但文本从未显示在视图中。

*   如何将文本从服务发送到视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:50:43.213

这不是在`service`and之间进行通信的适当方式`activity`，最简单的替代方法是使用[`LocalBroadcast`](https://stackoverflow.com/questions/8802157/how-to-use-localbroadcastmanager).

`service`如果和之间的交互`activity`比较频繁，可以`bind`到服务中，在服务中设置一个对象，当某个事件发生时`listener`通知。`activity`

# mercurial - Mercurial diff 文件的子集，按文件内容

> ID：15055578
> 
> 赞同：1
> 
> 时间：2013-02-24T19:21:18.463
> 
> 标签：mercurial, diff

我想对我的工作副本中包含给定字符串的所有文件进行视觉差异 - 比如“TODO”或“REL 1.00.01”

差异是针对另一个修订版（特别是另一个分支的负责人）。

我的平台是 Windows，我认为通过将“hg grep”或“findstr”的结果传递到“hg diffmerge”可能会有一个解决方案，但无法理解语法......

我该如何做到这一点“包含字符串 X 的文件子集的差异”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:57:55.890

我认为您可以使用[文件集](http://www.selenic.com/mercurial/hg.1.html#filesets)来做到这一点。我将 kdiff3 用于图形差异，但我想 diffmerge 也会这样做：

```
hg kdiff -r<OTHER_HEAD> -r. "set:grep('TODO')" 
```

文件集 ( `set:grep('TODO')`) 选择包含给定字符串的*第二个*指定修订版中的文件，然后在第一个和第二个修订版之间正常比较该文件集。

[Revsets](http://www.selenic.com/mercurial/hg.1.html#revsets)也有一个`grep`功能，但它看起来不像搜索文件内容，只搜索变更集元数据。

# entity-framework-4 - 实体框架连接的记录在列表中变为空

> ID：15055582
> 
> 赞同：0
> 
> 时间：2013-02-24T19:22:15.410
> 
> 标签：entity-framework-4

这是一个很难描述的。我有一个带有表格测试和表格学生以及记分卡的数据库。每个测试都有一个学生的 FK，记分卡也是如此。

学生可以多次参加考试，因此可以有许多指向同一学生的考试记录。

我目前仅在内存中使用记分卡。我有这些记分卡对象的列表：liScoreCard。我遍历所有测试，每次迭代我创建一个新的记分卡对象，最后 - 如果它是最好的 - 我将它添加到列表中（如果不是，我只需更改列表中已经存在的记分卡上的测试数量):

liScoreCards.Add(SC);

如果学生只有一个测试，则列表中的 SC 包含学生对象（当我获得测试列表时，我在查询中使用“Include("Student")”。

如果在以后的测试中我再次找到同一个学生（在以后的测试中），当我这样做时：（将学生对象从测试添加到新的记分卡对象）sc.Student = test.Student

在列表中： liScoreCards - 前一个 SC object.Student 变为 NULL 而不是那里的 Student 对象。

我究竟做错了什么 ？

将学生对象分配给新的 ScroeCard 对象是否有可能将其从存储在列表中的旧记分卡对象中“删除”？

代码示例：

```
 // Psuedo code:
 liTest = DB.GetTests().Include("Student");
 // Code: 
   List<ScoreCard> liScoreCard = new List<ScoreCard>();

    foreach(Test st in liTest)
    {
ScoreCard SC = new ScoreCard();
SC.Student = st.Student;        // This line makes SC with the same StudentID in liScoreCard have the Student become null.

ScoreCard oldSC = liScoreCard.Find(x->x.StudentID == SC.StudentID);
// Some logic to see which grade is higher)
// either update oldSC or...
liScoreCard.Add(SC);
} 
```

}

# r - 找不到 R 函数 row_sums 和 col_sums 的文档

> ID：15055584
> 
> 赞同：3
> 
> 时间：2013-02-24T19:22:21.957
> 
> 标签：r, tm

我正在尝试解决我自己关于更改`tm`包中的 tf-idf 加权函数的问题：[https ://stackoverflow.com/questions/15045313/changeing-tf-idf-weight-function-weight-not-by-occurrences-长期但按数量](https://stackoverflow.com/questions/15045313/changing-tf-idf-weight-function-weight-not-by-occurrences-of-term-but-by-numbe)

在这样做时，我正在查看`weightTfIdf`包含以下代码的函数`m`，即 TermDocumentMatrix。

```
cs <- col_sums(m) 
```

和

```
rs <- row_sums(m) 
```

但我找不到函数的任何文档`row_sums`或`col_sums`；当我尝试使用它们编写自己的加权函数时，出现错误：`Error in weighting(x) : could not find function "col_sums"`

这些函数在哪里定义？

我从`R`下面粘贴了完整的功能信息：

```
function (m, normalize = TRUE) 
{
    isDTM <- inherits(m, "DocumentTermMatrix")
    if (isDTM) 
        m <- t(m)
    if (normalize) {
        cs <- col_sums(m)
        if (any(cs == 0)) 
            warning("empty document(s): ", paste(Docs(m)[cs == 
                0], collapse = " "))
        names(cs) <- seq_len(nDocs(m))
        m$v <- m$v/cs[m$j]
    }
    rs <- row_sums(m > 0)
    if (any(rs == 0)) 
        warning("unreferenced term(s): ", paste(Terms(m)[rs == 
            0], collapse = " "))
    lnrs <- log2(nDocs(m)/rs)
    lnrs[!is.finite(lnrs)] <- 0
    m <- m * lnrs
    attr(m, "Weighting") <- c(sprintf("%s%s", "term frequency - inverse document frequency", 
        if (normalize) " (normalized)" else ""), "tf-idf")
    if (isDTM) 
        t(m)
    else m
}
<environment: namespace:tm>
attr(,"class")
[1] "WeightFunction" "function"      
attr(,"Name")
[1] "term frequency - inverse document frequency"
attr(,"Acronym")
[1] "tf-idf" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T19:40:39.073

您正在寻找的功能在`slam`包中。由于`slam`只是导入而不是依赖项，因此查看文档需要做一些工作。这是一个示例会话，说明如何解决这个问题并查看文档。

```
> # I'm assuming you loaded tm first
> library(tm)
> # See if we can view the code
> col_sums
Error: object 'col_sums' not found
> # Use getAnywhere to grab the function even if the function is 
> # in a namespace that isn't exported
> getAnywhere("col_sums")
A single object matching ‘col_sums’ was found
It was found in the following places
  namespace:slam
with value

function (x, na.rm = FALSE, dims = 1, ...) 
UseMethod("col_sums")
<environment: namespace:slam>
> # So the function is in the slam package
> slam::col_sums
function (x, na.rm = FALSE, dims = 1, ...) 
UseMethod("col_sums")
<environment: namespace:slam>
> # We can tell help to look in the slam package now that we know
> # where the function is from    
> help(col_sums, package = "slam")
> # alternatively
> library(slam)
> ?col_sums
> # If we want to view the actual code for col_sums we need to 
> # do a little work too
> methods("col_sums")
[1] col_sums.default*               col_sums.simple_triplet_matrix*

   Non-visible functions are asterisked
> # We probably want the default version?  Otherwise change to the other one
> getAnywhere("col_sums.default")
A single object matching ‘col_sums.default’ was found
It was found in the following places
  registered S3 method for col_sums from namespace slam
  namespace:slam
with value

function (x, na.rm = FALSE, dims = 1, ...) 
base:::colSums(x, na.rm, dims, ...)
<environment: namespace:slam> 
```

所以这个`col_sums`函数只是基本函数 colSums 的一个包装器。

# ios - 设置 GData iOS 项目的问题

> ID：15055590
> 
> 赞同：0
> 
> 时间：2013-02-24T19:22:50.650
> 
> 标签：ios, objective-c, linker-errors, gdata

我在为 iPhone 设置 GData 项目时遇到问题。我按照[如何在 iPhone 中使用 GData？](https://stackoverflow.com/questions/4543582/how-to-use-gdata-in-iphone). 该项目编译良好，但如果我尝试运行它会给我一个链接器错误。链接器错误是

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_GDataServiceGoogleYouTube", referenced from:
  objc-class-ref in BWC_ViewController-C85FBF830F43777.o
ld: symbol(s) not found for architecture i386 
```

请查看随附的屏幕截图

![在此处输入图像描述](../Images/dffe61b49cbf1c5daef97b6211d56a57.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T13:28:03.557

您必须为设备和模拟器创建运行时库。

在下面的链接中获取详细信息 [http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:03:20.540

通常，您的错误意味着您在 BWC_ViewController 中使用 GDataServiceGoogleYoutube，而目标中没有`#import "GDataServiceGoogleYoutube"`或缺少一些 GData`.m`文件。请参阅以下评论[https://stackoverflow.com/a/14148008/2092007](https://stackoverflow.com/a/14148008/2092007)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:19:01.433

是的，我知道了。

此错误是因为 Gdata api 使用非弧并且您的项目使用弧。为了避免这两种选择

1.  转到项目目标选择构建阶段选项卡转到编译源找到 GDataServiceGoogleYoutube.m 文件并双击，键入 -fno-objc-arc。

2.  将您的项目更改为非弧（我建议您执行第一个选项）。

注意：您必须将所有 gdata 类更改为 -fno-objc-arc。

# github - Github 克隆命令 - 几个问题

> ID：15055594
> 
> 赞同：0
> 
> 时间：2013-02-24T19:23:02.727
> 
> 标签：github

是否需要在克隆后使用 --recursive 命令才能使存储库正常工作？（如果它包含供应商文件夹）

克隆存储库后，下载位置中有一个 .git 文件夹 - 我可以安全地删除它吗？

最后一个问题 - 有一次我克隆了一个存储库，我收到了一个密码 ssh 请求……下载的存储库中不会有我的密码痕迹吗？

非常感谢任何答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:32:10.507

如果适用，该`--recursive`标志用于初始化子模块。

不要删除 .git 目录，因为这会使您的文件集合成为“存储库”。

密码要么用于对 Github 服务器进行身份验证，要么用于您使用 SSH 私钥。无论哪种方式，它都不会影响存储库中的内容（实际上，您可能需要在每次推送或拉取到 Github 时输入此密码）。

听起来您可以阅读一些 Git 和 SSH 基础知识。快速的 Google 搜索返回[了这个 Git 教程列表](http://sixrevisions.com/resources/git-tutorials-beginners/)。此外，[github:help](https://help.github.com/)是 Github 上初学者的宝贵资源。

# windows - Komodo Edit 7 运行按钮被禁用

> ID：15055599
> 
> 赞同：0
> 
> 时间：2013-02-24T19:23:27.937
> 
> 标签：windows, perl, 64-bit, disabled-control, komodoedit

我已经安装了 Komodo Edit 7。我正在尝试运行一个简单的 Perl 脚本。在 Run Command 弹出框中，我选择了 Run as "%F"，但 Run 按钮仍处于禁用状态。即使选择了不同的选项，它也始终保持禁用状态。它在我的 32 位 Windows 机器上运行良好。问题出在 64 位 Windows 机器上。请让我知道如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T23:02:07.167

出于故障排除的目的，请尝试运行一些更简单的方法，例如 Google 搜索：

*   [谷歌运行命令](http://docs.activestate.com/komodo/8.0/tutorial/tourlet_googrun.html)

# c++ - 将第三个参数传递给 C++(STL) 的排序函数

> ID：15055606
> 
> 赞同：0
> 
> 时间：2013-02-24T19:24:14.043
> 
> 标签：c++, stl

`sort`c++ 中的比较函数通常需要两个参数，例如：

```
sort(v.begin(),v.end(),compare);

bool compare(int a,int b)
.
.
. 
```

但是在向量中，我存储了一个数组，我想`sort`基于特定索引的向量。即：

```
int arr[3];

vector<arr> v; 
```

如果我想根据索引 0 或 1 或 2（取决于用户的输入）对 v 进行排序，如何使用排序功能？这里的问题是当我将编写比较函数时：

```
bool compare(int *arr,int *arr1) 
```

那么我怎样才能告诉这个函数根据特定索引进行排序呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T19:27:02.067

只需使用仿函数对象：

```
struct coord { int *arr; };
struct Comparer : std::binary_function<coord,coord,bool> {
    Comparer( int base ) : m_base( base ) {}
    bool operator()( const coord &c1, const coord &c1 ) 
    { 
        return c1.arr[m_base] < c2.arr[m_base]; 
    }
private:
    int m_base;
};
//...
std::sort( v.begin(), v.end(), Comparer( 1 ) ); 
```

# python - Python：使用 Tkinter 动态更改条目颜色

> ID：15055618
> 
> 赞同：1
> 
> 时间：2013-02-24T19:25:16.793
> 
> 标签：python, tkinter, tkinter-entry

我在使用 Tkinter after() 方法时遇到问题。实际上，我想要做的是随着时间的推移改变一些输入框的背景颜色。让我们来看这段代码（它与我正在处理的脚本不同，但描述的情况是相同的）：

```
import Tkinter as tk

root = tk.Tk()
root.option_add("*Entry.Font","Arial 32 bold")

emptyLabel=tk.Label()
emptyLabel.grid(row=4) #Empty label for geometry purpose
entryList=[]

for x in range(4):
    entryList.append([])
    for y in range(4):
        entryList[x].append('')
        entryList[x][y]=tk.Entry(root, bg="white",width=2,justify="center",
                                 takefocus=True,insertofftime=True)
        entryList[x][y].grid(row=x,column=y)

solvebt=tk.Button(root,text='Solve').grid(row=5,column=2)
newgamebt=tk.Button(root,text='New').grid(row=5,column=1)

#BROKEN PART STARTS HERE 

def changebg(x,y):
    entryList[x][y]['bg']='yellow'

for x in range(4):
    for y in range(4):
        entryList[x][y].after(300,changebg(x,y))
        #Same result with root.after(300,changebg(x,y))

root.mainloop() 
```

问题是，当我启动程序时，我希望它会在“绘制”时向我显示，一次一个，所有的输入框都是黄色的。相反，程序会冻结 (300*16) 毫秒，然后突然间，每个输入框都是黄色的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:50:12.613

问题在这里：

```
def changebg(x,y):
    entryList[x][y]['bg']='yellow'

for x in range(4):
    for y in range(4):
        entryList[x][y].after(300,changebg(x,y))
        #Same result with root.after(300,changebg(x,y)) 
```

您`changebg`在双重 for 循环中立即调用 to - 然后将返回值 ( `None`) 传递给`root.after`. 这不会导致您描述的延迟。也许您的实际代码如下所示：

```
for x in range(4):
    for y in range(4):
        entryList[x][y].after(300,lambda x=x,y=y : changebg(x,y)) 
```

这将导致您实际描述的行为。最终，您需要的是展平您的小部件列表，然后一次传递一个 - 如果存在下一个，则注册下一个：

```
import itertools
all_entries = itertools.chain.from_iterable(entryList)
def changebg(ientries):
    ientries = iter(ientries) #allow passing a list in as well ...
    entry = next(ientries,None)
    if entry is not None:
        entry['bg'] = 'yellow' #change the color of this widget
        root.after(300,lambda : changebg(ientries)) #wait 300ms and change color of next one.

changebg(all_entries) 
```

# java - 在 Java 中生成随机双精度

> ID：15055624
> 
> 赞同：3
> 
> 时间：2013-02-24T19:25:21.883
> 
> 标签：java, double

我是一个 Java 菜鸟，试图在 -10 和 10 之间生成随机双精度值。我知道整数我会做以下事情：

```
Random r = new Random(); 
int i = -10 + r.nextInt(21); 
```

但是，对于双打，这不起作用：

```
Random r = new Random(); 
double i = -10 + r.nextDouble(21); 
```

有人可以解释一下在双打的情况下该怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T19:29:28.110

试试这个：

```
 Random r = new Random(); 
    double d = -10.0 + r.nextDouble() * 20.0; 
```

注意：应该是 20.0（不是 21.0）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T19:28:55.747

尝试使用它来生成给定范围内的值：

```
Random random = new Random();
double value = min + (max - min) * random.nextDouble(); 
```

或者尝试使用这个：

```
public double doubleRandomInclusive(double max, double min) {
   double r = Math.random();
   if (r < 0.5) {
      return ((1 - Math.random()) * (max - min) + min);
   }
   return (Math.random() * (max - min) + min);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:28:44.613

> > 从该随机数生成器的序列中返回 0.0 到 1.0 之间的下一个伪随机、均匀分布的双精度值。

nextDouble 不带参数，您只需将其乘以您的范围。或更一般地说：

```
minimum + (maximum - minimum) * r.nextDouble(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T19:28:52.723

中没有`nextDouble(int)`方法`Random`。用这个：

```
double i = -10.0 + r.nextDouble() * 20.0; 
```

[API 参考](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextDouble%28%29)

# javascript - Opera 在 jQuery 1.9.1 中的 nodeType 上引发安全错误

> ID：15055625
> 
> 赞同：0
> 
> 时间：2013-02-24T19:25:22.907
> 
> 标签：javascript, jquery, opera

自从将 jQuery 更新到 1.9.1 后，Opera 开始抛出与 nodeType 相关的错误。

我有以下代码：

```
$("p, td, div, span").children().andSelf().contents().each(function(){
    if (this.nodeType == 3)
    {
        ...
    }
}); 
```

和 Opera 抛出

> 未处理的错误：安全错误：试图读取受保护的变量

即使我删除了那个代码块，Opera 也会抛出同样的错误，这次是在一行`jquery-1.9.1.min.js`本身：

```
return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : b.isFunction(e) ? r.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), b.makeArray(e, this)) 
```

如果这有任何改变，我将从[http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js加载 jQuery](http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js)

更新：

相同的代码会在 Firefox 中导致类似的错误：

```
Permission denied to access property 'nodeType' 
```

在 Chrome 中一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:03:11.160

用于`$("p, td, div, span").children().addBack().not("iframe").contents()`不在[`.contents()`](http://api.jquery.com/contents/)iframe 上应用。

顺便说一句，如果您只想使用 获取内容节点`nodeType == 3`，您可能宁愿只使用`.children()`.

# python - 在 node.js 中使用 python 模块

> ID：15055630
> 
> 赞同：6
> 
> 时间：2013-02-24T19:26:21.483
> 
> 标签：python, node.js, binding

是否可以创建一种胶水，使 python 模块（更具体地说，库绑定）可以在 node.js 中使用？一些数据结构可以直接映射到 V8 对象——例如数组、字典。

更重要的是 - 这将是一种比手动或通过 FFI 创建绑定的更优雅的方式。简而言之，值得吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-27T02:21:36.257

试试这个 node.js 模块，它是一个桥梁：[Node-Python](https://npmjs.org/package/node-python)，

注意：该项目已有 7 年历史，仍停留在 v0.4。仍然缺少许多功能，例如在 Python 和 Node 数组之间进行转换。可以安全地假设它不再得到其原始作者的支持

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T15:50:54.023

[Edge.js](https://github.com/tjanczuk/edge "Edge.js")在这方面做得很好。它允许您编写 Python 脚本，然后从 Node.js 调用例程，这可用于轻松创建与 Python 模块的绑定。

# linux - 从 stat 函数输出中理解和解码文件模式值

> ID：15055634
> 
> 赞同：25
> 
> 时间：2013-02-24T19:26:58.577
> 
> 标签：linux, perl, unix, permissions, stat

我一直试图了解下面提到的代码中到底发生了什么。但我无法理解。

```
$mode = (stat($filename))[2];
printf "Permissions are %04o\n", $mode & 07777; 
```

**假设我的 $mode 值为 33188**

**$mode & 07777 产生一个值 = 420**

*   $mode 值是十进制数吗？

*   为什么我们选择 07777 以及为什么我们要进行按位运算。我无法理解这里的逻辑。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-25T04:08:13.513

您问题中的模式对应于具有 644 权限的常规文件（所有者为读写，其他所有人为只读），但不要相信我的话。

```
$ touch foo
$ chmod 644 富
$ perl -le '打印 +(stat "foo")[2]'
33188
```

的值`$mode` *可以*看作是十进制整数，但这样做并不是特别有启发性。看到八进制表示会让人更熟悉一些。

```
$ perl -e 'printf "%o\n", (stat "foo")[2]'
100644
```

按位与 07777 给出数字二进制表示的最后 12 位。对于 Unix 模式，此操作提供权限或模式位并丢弃任何类型信息。

```
$ perl -e 'printf "%d\n", (stat "foo")[2] & 07777' # 十进制，没用
420
$ perl -e 'printf "%o\n", (stat "foo")[2] & 07777' # 八进制，尤里卡！
644
```

下面是一个更好的方法。请继续阅读以了解所有详细信息。

* * *

## 模式位

`stat`从（对应于`st_mode`in ）返回的第三个元素`struct stat`是一个[位字段](https://en.wikipedia.org/wiki/Bit_field)，其中不同的位位置是二进制标志。

例如，`st_mode`POSIX names中的一位`S_IWUSR`。模式设置了该位的文件或目录可由其所有者写入。相关的一点是`S_IROTH`，当设置意味着其他用户（*即*，既不是所有者也不是组中的用户）可以读取该特定文件或目录。

[perlfunc 文档`stat`](http://perldoc.perl.org/functions/stat.html)给出了常用模式位的名称。我们可以检查它们的值。

```
#! /usr/bin/env perl

use strict;
use warnings;
use Fcntl ':mode';

my $perldoc_f_stat = q(
  # Permissions: read, write, execute, for user, group, others.
  S_IRWXU S_IRUSR S_IWUSR S_IXUSR
  S_IRWXG S_IRGRP S_IWGRP S_IXGRP
  S_IRWXO S_IROTH S_IWOTH S_IXOTH

  # Setuid/Setgid/Stickiness/SaveText.
  # Note that the exact meaning of these is system dependent.
  S_ISUID S_ISGID S_ISVTX S_ISTXT

  # File types.  Not necessarily all are available on your system.
  S_IFREG S_IFDIR S_IFLNK S_IFBLK S_IFCHR S_IFIFO S_IFSOCK S_IFWHT S_ENFMT
);

my %mask;
foreach my $sym ($perldoc_f_stat =~ /\b(S_I\w+)\b/g) {
  my $val = eval { no strict 'refs'; &$sym() };
  if (defined $val) {
    $mask{$sym} = $val;
  }
  else {
    printf "%-10s - undefined\n", $sym;
  }
}

my @descending = sort { $mask{$b} <=> $mask{$a} } keys %mask;
printf "%-10s - %9o\n", $_, $mask{$_} for @descending; 
```

在 Red Hat Enterprise Linux 和 System V 系列中的其他操作系统上，上述程序的输出将是

```
S_ISTXT - 未定义
S_IFWHT - 未定义
S_IFSOCK - 140000
S_IFLNK - 120000
S_IFREG - 100000
S_IFBLK - 60000
S_IFDIR - 40000
S_IFCHR - 20000
S_IFIFO - 10000
S_ISUID - 4000
S_ISGID - 2000
S_ISVTX - 1000
S_IRWXU - 700
S_IRUSR - 400
S_IWUSR - 200
S_IXUSR - 100
S_IRWXG - 70
S_IRGRP - 40
S_IWGRP - 20
S_IXGRP - 10
S_IRWXO - 7
S_IROTH - 4
S_IWOTH - 2
S_IXOTH - 1
```

## 有点玩弄

上面的数字是八进制（以 8 为底），所以任何给定的数字必须是 0-7 并且位值是 8 ^(*n*)，其中*n*是小数点左侧从零开始的位数。要查看它们如何映射到位，八进制具有每个数字对应于三个位的便利属性。四、二和 1 都是 2 的精确幂，因此在二进制中，它们分别是 100、10 和 1。二进制中的七（= 4 + 2 + 1）是 111，所以 70 [8]是 111000 [2]。后一个示例显示了来回转换是多么简单。

使用位字段，您并不关心该位置的位值究竟是什么，而是*它**是*零还是非零，所以

 *```
if ($mode & $mask) { 
```

`$mode`测试是否设置了对应的任何位`$mask`。举个简单的例子，给定 4 位整数 1011 和掩码 0100，它们的按位与为

```
 1011
& 0100
------
  0000 
```

所以那个位置的位是明确的——而不是像 0010 或 1100 这样的掩码。

清除 1011 的最高位看起来像

```
 1011      1011
& ~(1000) = & 0111
            ------
              0011 
```

回想一下，`~`在 Perl 中是按位补码。

为了完整起见，使用按位或设置一个位，如

```
$bits |= $mask; 
```

## 八进制和文件权限

八进制数字直接映射到三位对于 Unix 权限来说很方便，因为它们以三个一组的形式出现。例如，产生上述输出的程序的权限是

```
-rwxr-xr-x 1 gbacon 用户 1096 Feb 24 20:34 modebits
```

即所有者可以读、写和执行；但其他人都可以阅读和执行。在八进制中，这是 755——一个紧凑的速记。根据上表，模式中的设置位为

*   `S_IRUSR`
*   `S_IWUSR`
*   `S_IXUSR`
*   `S_IRGRP`
*   `S_IXGRP`
*   `S_IROTH`
*   `S_IXOTH`

我们可以通过在上面的程序中添加几行来从您的问题中分解模式。

```
my $mode = 33188;
print "\nBits set in mode $mode:\n";
foreach my $sym (@descending) {
    if (($mode & $mask{$sym}) == $mask{$sym}) {
        print "  - $sym\n";
        $mode &= ~$mask{$sym};
    }
}

printf "extra bits: %o\n", $mode if $mode; 
```

模式测试必须更加小心，因为某些掩码是多个位的简写。当一些位被设置但不是全部时，测试我们得到准确的掩码可以避免误报。

该循环还清除所有检测到的命中中的位，因此最后我们可以检查我们是否已经考虑了每个位。输出是

```
在模式 33188 中设置的位：
  - S_IFREG
  - S_IRUSR
  - S_IWUSR
  - S_IRGRP
  - S_IROTH
```

没有额外的警告，所以我们得到了一切。

## 那魔法07777

将 7777 [8]转换为二进制给出`0b111_111_111_111`. 回想一下，7 [8]是 111 [2]，四个 7 对应于 4×3 个。此掩码对于选择最后 12 个中的设置位很有用。回顾我们之前生成的位掩码

```
S_ISUID - 4000
S_ISGID - 2000
S_ISVTX - 1000
S_IRWXU - 700
S_IRWXG - 70
S_IRWXO - 7
```

我们看到最后 9 位是用户、组和其他的权限。前面的三位是 setuid、setgroupid 和有时称为粘滞位的东西。例如，`sendmail`我系统上的完整模式是`-rwxr-sr-x`or 34285 [10]。按位 AND 的结果是

```
 (dec)      (oct)                (bin)
  34285     102755     1000010111101101
&  4095 = &   7777 = &     111111111111
-------   --------   ------------------
   1517 =     2755 =        10111101101 
```

被丢弃的模式中的高位是`S_IFREG`，表示它是一个常规文件。请注意，与以十进制或二进制表示的相同信息相比，以八进制表示的模式要清晰得多。

该[`stat`文档](http://perldoc.perl.org/functions/stat.html)提到了一个有用的功能。

> ……`S_IF*`功能是
> 
> **`S_IMODE($mode)`**
> 包含`$mode`权限位和 setuid/setgid/sticky 位的部分

[在`ext/Fcntl/Fcntl.xs`](https://github.com/mirrors/perl/blob/v5.17.8/ext/Fcntl/Fcntl.xs#L66)中，我们在最后一行找到了它的实现和一个熟悉的常量。

```
void
S_IMODE(...)
    PREINIT:
        dXSTARG;
        SV *mode;
    PPCODE:
        if (items > 0)
            mode = ST(0);
        else {
            mode = &PL_sv_undef;
            EXTEND(SP, 1);
        }
        PUSHu(SvUV(mode) & 07777); 
```

为了避免源代码中[幻数](https://en.wikipedia.org/wiki/Magic_number_%28programming%29)的不良做法，请编写

```
my $permissions = S_IMODE $mode; 
```

Fcntl 模块提供的using`S_IMODE`和其他功能也隐藏了低级位旋转，并专注于程序想要的域级信息。文档继续

> **`S_IFMT($mode)`**
> 包含文件类型的部分，可以使用（例如）或以下函数`$mode`进行位与运算`S_IFREG`
> 
> ```
> # The operators -f, -d, -l, -b, -c, -p, and -S.
> S_ISREG($mode) S_ISDIR($mode) S_ISLNK($mode)
> S_ISBLK($mode) S_ISCHR($mode) S_ISFIFO($mode) S_ISSOCK($mode)
> 
> # No direct -X operator counterpart, but for the first one
> # the -g operator is often equivalent.  The ENFMT stands for
> # record flocking enforcement, a platform-dependent feature.
> S_ISENFMT($mode) S_ISWHT($mode) 
> ```

使用这些常量和函数将通过更直接地表达您的意图使您的程序更清晰。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-24T19:51:56.413

[perldoc -f stat](http://perldoc.perl.org/functions/stat.html)对此进行了解释，我假设您在这里找到了这个示例：

```
Because the mode contains both the file type and its
permissions, you should mask off the file type portion and
(s)printf using a "%o" if you want to see the real permissions. 
```

的输出`printf "%04o", 420`是`0644`文件的权限。`420`只是八进制数的十进制表示`0644`。

如果您尝试以二进制形式打印数字，则更容易看到：

```
perl -lwe 'printf "%016b\n", 33188'
1000000110100100
perl -lwe 'printf "%016b\n", 33188 & 07777'
0000000110100100 
```

您会注意到，按位`and`删除上面数字中最左边的位，这可能代表文件类型，只留下文件权限。这个数字 07777 是二进制数：

```
perl -lwe 'printf "%016b\n", 07777'
0000111111111111 
```

它在 bitwise 中充当“掩码” `and`。由于 1 & 1 = 1，且 0 & 1 = 0，这意味着任何与 07777 中的 1 不匹配的位都设置为 0。*

# wordpress - Wordpress 在单独的 ul 中列出所有页面和子项

> ID：15055635
> 
> 赞同：0
> 
> 时间：2013-02-24T19:26:59.013
> 
> 标签：wordpress

我整个周末都在尝试这样做，现在我正在转圈。

我想在单独的 ul 中列出所有页面及其子项

页面设置是这样的

```
 HOME        ABOUT         CONTACT
                Who we are    Where we are 
                What we do    How to find us
                How we do it 
```

我想这样输出

```
 <ul>
      <li>Home</li>
    </ul>

    <ul>
      <li>About</li>
      <li>Who we are</li>
      <li>What we do</li>
      <li>How we do it</li>
    </ul>

    <ul>
      <li>Contact</li>
      <li>Where we are</li>
      <li>How to find us</li>
    </ul> 
```

下面的代码将为我提供单独 ul 的首页

```
 <?php
      $args = array(
        'sort_column' => 'menu_order',
        'parent' => 0,
      );
      $pages = get_pages($args);
      foreach($pages as $page){
        ?>
        <ul>
          <li>
            <?php 
                        echo $page->post_title;
                    ?>  
          </li>
        </ul>
        <?php
      }

    ?> 
```

我现在正在尝试将子页面添加到同一个 ul

我在想这样的事情，但这给了我每个 ul 中的所有页面

```
 <?php
      $args = array(
        'sort_column' => 'menu_order',
        'parent' => 0,
      );
      $pages = get_pages($args);
      foreach($pages as $page){
        ?>
        <ul>
          <li>
            <?php 
                        echo $page->post_title;
                        wp_list_pages('title_li=&depth=0&child_of'.$page->ID.'');
                    ?>  
          </li>
        </ul>
        <?php
      }

    ?> 
```

有没有办法说这个页面的所有孩子。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:40:26.490

> wp_list_pages('title_li=&depth=0&child_of'.$page->ID.'');

您在“child_of”之后缺少“=”

```
wp_list_pages('title_li=&depth=0&child_of='.$page->ID.''); 
```

更好的方法是创建一个自定义walker，但这更复杂 [http://codex.wordpress.org/Function_Reference/Walker_Class](http://codex.wordpress.org/Function_Reference/Walker_Class)

# c# - 从另一个应用程序文本框中读取特定密钥

> ID：15055636
> 
> 赞同：0
> 
> 时间：2013-02-24T19:26:59.043
> 
> 标签：c#

我需要知道何时在另一个应用程序的特定文本框上按下回车键。我可以使用 user32.dll 找到文本框并从中写入/读取文本。但是我如何获得一个特定的密钥？

该应用程序只是一个聊天。目标是当我在此应用程序文本框上键入“/time”之类的内容并按回车键时，我希望我的应用程序读取此命令并输出当前时间，例如。

这是我必须检索应用程序及其文本字段子句柄并写入/读取它的代码。

```
 [DllImport("user32.dll")]
    public static extern int SendMessage(IntPtr hWnd, int uMsg, IntPtr wParam, string lParam);

    [DllImport("user32.dll")]
    public static extern int SendMessage(IntPtr hWnd, int msg, int Param, System.Text.StringBuilder text);

    [DllImport("user32.dll")]
    private static extern IntPtr PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

    public delegate bool Win32Callback(IntPtr hwnd, IntPtr lParam);
    [DllImport("user32.Dll")]
    public static extern bool EnumChildWindows(IntPtr parentHandle, Win32Callback callback, IntPtr lParam);

    [DllImport("user32.dll")]
    static extern int GetClassName(IntPtr hWnd, StringBuilder lpClassName, int nMaxCount);

    [DllImport("user32.dll")]
    public static extern IntPtr FindWindow(string strClassName, string strWindowName);

    private IntPtr handle = IntPtr.Zero;
    private string childClassName = "TComboEdit";

    public bool findChildHandle(IntPtr hwnd, IntPtr lParam)
    {
        StringBuilder className = new StringBuilder();
        GetClassName(hwnd, className, 120);
        if (className.ToString() == childClassName)
        {
            handle = hwnd;
            return false;
        }
        return true;
    }

    private void findControl(string className, string title)
    {
        IntPtr application = IntPtr.Zero;
        application = FindWindow(className, title);
        if (application == IntPtr.Zero)
            MessageBox.Show("Aplicativo não encontrado");
        else
            EnumChildWindows(application, findChildHandle, IntPtr.Zero);
    }

    private void setTextToHandle(string msg)
    {
        SendMessage(handle, 0x000c, IntPtr.Zero, msg); //set text
        PostMessage(handle, 0x0100, new IntPtr(0x0D), IntPtr.Zero); // key down (enter)
    }

    private void getTextFromHandle()
    {
        StringBuilder t = new StringBuilder();
        SendMessage(handle, 0x0D, 100, t); //get text
        MessageBox.Show(t.ToString());
    } 
```

# javascript - 使用 angularjs 插入 html 表单模板

> ID：15055643
> 
> 赞同：1
> 
> 时间：2013-02-24T19:27:22.947
> 
> 标签：javascript, angularjs, angularjs-directive

我是一个有角度的 js 新手，所以这听起来可能微不足道。我正在尝试通过 angularjs 指令插入 html 表单模板。就像用户选择特定的表单模板，然后将该模板插入到页面中一样。作为 angularjs 的新手，我不知道如何实现这一点。任何实现这一点的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:34:20.077

阅读[AngularJS 指令文档](http://docs.angularjs.org/guide/directive)- 具体来说，您会对`template`和`templateUrl`参数感兴趣。

您可以将模板写为字符串，例如`template: '<div>foo</div>'`，或传入包含您的 html 的文件的路径，例如`templateUrl: 'partials/mytemplate.html'`.

# java - 在 Java 中跨类变量进行迭代和计数

> ID：15055647
> 
> 赞同：0
> 
> 时间：2013-02-24T19:27:35.880
> 
> 标签：java, variables, hashmap

我有一个类，其中包含多种类型的变量，其中大多数（大约 30 个）是双重的：

```
String something;
double x;
double y;
double z;
... 
```

我想迭代双打，但也要让它们以这种“经典方式”而不是在数组中编写，因为派生类使用它们中的大部分。我现在遇到的问题是如何遍历所有双精度类型变量，找出其中有多少是非零的，然后随机选择所有这些变量中的一个。这个类会有数千个实例，正如我所说，有一些类可以扩展这个类。所以我正在研究解决方案，最好是伪类：

```
nonzeros = 0
foreach doubleVarInClass variable
{
    if (variable != 0)
    nonzeros++;
}
if (nonzeros < parameter)
{
    randomDoubleVarInClass = random.next(...);
} 
```

我正在考虑的一种解决方案是使用 HashMap 来保留所有变量，但是我将不得不重写所有使用这个的类并且不确定它会如何影响性能，因为它会一直被大量使用. 我应该害怕性能并尝试使用经典数组吗？如果没有的话，我想至少保留变量名。我想到了引用这些变量的数组，所以我可以这样写，由于Java中的值传递，不确定它是否可能。

也可能有一些结构可以保留有关其中有多少是非零或具有有效功能的信息？

感谢您提供任何可以解决我的问题的信息:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:40:08.453

我建议为此使用反射。假设您有一个名为的类的实例`o`：

```
int nonzeros = 0;
for (Field f : o.getClass().getDeclaredFields()) {
  f.setAccessible(true);
  if (f.getType().equals(Double.TYPE) && f.getDouble(o) != 0.0) {
    nonzeros++;
  }
} 
```

注意：从性能的角度来看，Java 反射可能不是一个好主意，从这个角度来看，您应该首先测试它。除此之外，这提供了简单的检查，而无需对您的类定义进行任何更改。在 Java 6 中，反射的性能略好于旧版本，您应该在您的个人用例和您的环境中检查这一点。

# linux - UDP recvmsg 上的 EHOSTUNREACH

> ID：15055655
> 
> 赞同：2
> 
> 时间：2013-02-24T19:28:14.220
> 
> 标签：linux, sockets

在这个问题上有点困惑:-)。我在 Ubuntu 10.04 上运行了一些代码，它使用 recvmsg 调用来接收音频 UDP 数据包。这件作品是一个更大的 SIP 客户端的一部分，我一直在通过网络使用远程系统对其进行测试。

通常，我可以毫无问题地建立呼叫，并且音频可以愉快地从远程源传输到我的程序。但是，经过随机时间后，我在端口上遇到了读取错误。发生这种情况时，我会得到 errno EHOSTUNREACH。在这个错误上，我关闭了我的端口并终止了连接。

奇怪的是，我的印象是这会在响应 ICMP 消息时发生。也许是由于暂时的网络故障。然而，在重现此问题并进行完整的数据包捕获后，我看到的都是 ICMP ping 和响应的位置。我没有看到内核解释为 EHOSTUNREACH 的任何 ICMP 错误消息。

我的 UDP 端口非常基本。如果真的需要，我可以发布代码。但这只是一个基本的 SOCK_DGRAM。套接字在遇到此错误条件之前，有时能够接收超过 8 小时的数据。

任何想法我可以如何进一步解决这个问题。我试图理解为什么我收到这个 errno 而没有 ICMP 消息与之关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:46:49.373

您是否使用相同的套接字发送数据包？或者不同的套接字共享同一个端口？我很好奇是否有可能另一个套接字实际上正在产生错误。

我记得几年前处理 ICMP 消息导致 sendto 和 recvfrom 间歇性失败，就像你描述的那样。如果我记得，解决方法是忽略它并执行另一个recvfrom/recvmsg。

至于为什么在没有看到线路上的 ICMP 消息的情况下收到该错误代码，我无法理解。您确定您将观察到的 ICMP 消息正确地视为“ping 和响应”吗？ICMP 消息没有端口号，因此与该远程主机关联的所有套接字（或随机套接字）都可能返回此错误代码。

我认为可能有一个 ioctl 来禁用此行为，但我找不到它。

[这里](http://www.textndata.com/forums/ignore-icmp-port-unreachable-wsaeconnreset-37433.html)有类似的讨论。

# php - MySQL 通过视频标记（CodeIgniter）查询类似视频

> ID：15055661
> 
> 赞同：0
> 
> 时间：2013-02-24T19:28:51.690
> 
> 标签：php, mysql, codeigniter, video, tags

我正在开发一个包含视频部分的 PHP 应用程序。到目前为止，我已经将视频标记构建为视频分类。添加视频时，您可以从 25 个预定义标签中选择最能描述您的视频内容的标签。

然后将这些标签保存在一个单独的表中，`videotags`如下所示：

```
video_id | first_tag | second_tag | third_tag | etc.
----------------------------------------------------
     123 |         1 |          0 |          1| ... 
```

这意味着，当您在表单中签入某个标签时，它在数据库中存储为 1，未选中为 0。

现在，当您查看视频时，您可以看到一个主体，即视频和描述所在的位置，以及一个右侧列，应在其中类似视频的位置。

我想构建一个 MySQL 查询，它将返回 6 个类似的视频，基于具有如下规则的视频标签：

**这些视频与观看的视频具有最相同的视频标签，将被订购并限制为 6 个。**

例如，我正在尝试查看一个 ID 为 12、有六个填充标签的视频，在我的数据库中我有 3 个视频：

*   ID 为 22 的视频有 7 个标签和 4 个标签与 ID 为 12 的视频相同。
*   ID 25 的视频有 8 个标签和 5 个标签与 ID 12 的视频相同。
*   ID 45 的视频有 4 个标签和 3 个标签与 ID 12 的视频相同。

正如我在主题名称中提到的，我正在 CodeIgniter 中构建这个 PHP 应用程序，所以这个查询将作为一个函数在特定模型中运行，我将在这个函数中传递这样的`$tags`数组`$tags['first_tag'] = 1`。

谁能帮我按照指定的方式构建这个查询？我正在使用 CI 中的 Active Record 类，因此使用它会很受欢迎。

谢谢各位回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:30:11.147

查询应该看起来像这样：

```
SELECT video_id 
FROM videotags 
ORDER BY ABS(
  first_tag - 1 +
  second_tag - 0
) ASC
LIMIT 3 
```

在 ActiveRecord 函数中看起来像这样：

```
function getTop($n, $tags) {
  $this->db->select('video_id');
  $order = array();
  foreach ($tags as $field => $value) {
    if ($value) {
      $order[] = $field .' - '. $value;
    }
  }
  $this->db->order_by('ABS('.implode(' + ', $order).')', 'ASC');
  return $this->db->get('videotags', $n);
} 
```

请注意，我没有测试过它。此外，对于许多行，查询会相当慢。

# asp.net-mvc - MVC 4 - 我想根据条件使表格可见或隐藏

> ID：15055665
> 
> 赞同：3
> 
> 时间：2013-02-24T19:29:00.493
> 
> 标签：asp.net-mvc, html, asp.net-mvc-4

我有以下 MVC 4 Razor 代码：

```
<h4>You currently have @Model.Count() items listed for sale. @Html.ActionLink("Click here to add a new listing", "Create")</h4>
<br />

<table style="visibility: hidden">
.... 
```

如果@Model.Count() 为零，我想隐藏表的可见性，如果计数大于零，则表可见。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T19:33:37.043

您可以使用条件运算符来构建样式：

```
<table style="visibility: @(Model.Count() == 0 ? "hidden" : "visible") "> 
```

顺便说一句，您应该使用`Model.Any()`而不是`Model.Count() == 0`检查，因为它具有更好的性能。

或者根据您的需要，您可以将整个包装`table`在一个中`if`，这样它就不会被渲染，并且您不会向客户端发送不必要的数据：

```
@if(Model.Any())
{
    <table>
        ....
    </table>
} 
```

# javascript - 链接对象。

> ID：15055672
> 
> 赞同：1
> 
> 时间：2013-02-24T19:29:49.403
> 
> 标签：javascript, chaining, prototype-programming

我很难弄清楚如何以我想要的方式链接对象。

举个例子：

```
var s = function(){
    this.text = {
        hi: function(){
            //do something
            return new s().text;
        }
    };
    return null;
};

var a = new s(); 
```

让我们说它在哪里`//do something`，你有某种代码可以做某事（返回某事）。您希望返回该结果，同时仍允许人们将更多功能链接到结果。

但是，如果我要返回一些东西，比如：

```
console.log(a.text.hi().hi()); 
```

不再起作用，因为最后一个 return ( `new s().text`) 不会被返回，因为你不能返回两件事，我明白这一点。

我的主要问题是，是否可以进行链接，您可以将另一个函数链接到前一个函数的结果，但如果没有函数链接到前一个函数，则返回结果。

我发现的唯一解决方案是使用如下语法：

```
a.text.hi().hi().end; 
```

为了指示代码返回最后一个函数的结果。但是，我觉得这不是很实用，我希望有更好的方法来完成我想做的事情。

# javascript - 具有纵横比的最小尺寸调整图像大小

> ID：15055674
> 
> 赞同：2
> 
> 时间：2013-02-24T19:29:51.213
> 
> 标签：javascript, jquery, html

我正在使用以下代码对图像执行调整大小功能：

```
$('.image_resize').each(function(){
    var ww = $(window).width() - 80 - 400;
    var wh = $(window).height() - 60;
    var iar = $(this).attr('height') / $(this).attr('width');
    var war = wh / ww;
    if(iar <= war){
        $(this).attr("width" , ww);
        $(this).attr("height" , ww * iar);
    }else{
        $(this).attr("height" , wh);
        $(this).attr("width" , wh / iar);
    }
}) 
```

这个标记：

```
<div id="home_image">
    <img class="image_resize" src="img/home_image.jpg" alt="home_image" width="945" height="557">
</div> 
```

该代码运行良好，并以正确的纵横比调整图像大小，但问题是**该调整大小没有最小限制，因此图像可以小至 20 像素 * 比率，我想限制它。**

如何将图像限制为 400px 的最小高度并在其上裁剪容器或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:39:24.570

您可以通过简单地检查窗口高度是否小于 400 来做到这一点。如果是，则使用以下代码将其强制为 400。

```
var wh = $(window).height() - 60;
wh = wh < 400 ? 400 : wh; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:45:21.047

这里有两点需要考虑：

1）图像的大小受ww和wh的限制。您可能希望为图像区域指定最小宽度和高度。

```
var ww = $(window).width() - 80 - 400;
var wh = $(window).height() - 60;
ww= ww<50 ? 50 : ww;
wh= wh<50 ? 50 : wh; 
```

2）图像的大小也受其纵横比的影响。因此，假设您有一张全景图像 - 上面的代码将确保最小宽度为 50 像素，但由于其纵横比，它的高度可能仅为 15 像素。如果您想在这些情况下强制执行最小高度，则必须使用条件块更改代码。请注意，这也会将实际宽度更改为比 ww 限制的宽得多。

```
if(iar <= war){
    if (ww*iar<50) { 
        $(this).attr("width" , 50 / iar);
        $(this).attr("height" , 50);
    } else {
        $(this).attr("width" , ww);
        $(this).attr("height" , ww * iar);
    }
}else{
    if (wh*iar<50) {
        $(this).attr("height" , 50 * iar);
        $(this).attr("width" , 50);
    } else {
        $(this).attr("height" , wh);
        $(this).attr("width" , wh / iar);
    }
} 
```

# javascript - 在同一域上使用 javascript 读取 php 文件

> ID：15055678
> 
> 赞同：0
> 
> 时间：2013-02-24T19:30:05.143
> 
> 标签：javascript

我想做的很简单。我`read.html`在域上有一个，其中有一个`Javascript`代码可以读取同一域上的 php 文件。我能够获得另一个 html 文件的代码。但是当我尝试读取一个 php 文件时，我只能得到我在浏览器中看到的内容。

我得到的输出：

> 行政

我想要的是：

```
<?
echo "admin";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:38:54.913

在浏览器中运行的 JavaScript 只能以与任何其他远程应用程序相同的方式访问服务器上的数据（由于它在沙箱中运行而导致一些额外的限制，因为您不希望任意网站能够在您的计算机上运行任何旧代码）。

由于 Web 服务器通常配置为运行 PHP 程序并将其输出提供给客户端，因此您的 JavaScript 程序可以看到输出。这通常是可取的，服务器端代码通常包含机密的业务逻辑和数据，例如不应向任何使用浏览器的人公开的凭据。

如果你想要 PHP 源代码，那么你需要：

*   提供一个不同的 URL 来提供源代码而不是运行程序（最简单的方法是将 PHP 复制到一个`.txt`文件中）
*   配置您的服务器以从它所在的位置提供 PHP 脚本，而不是运行它

# javascript - 通过Javascript传递带参数的变量：未定义的含义

> ID：15055682
> 
> 赞同：-2
> 
> 时间：2013-02-24T19:30:11.507
> 
> 标签：javascript, arrays, parameters, parameter-passing

在这里，我试图传递`foo`给另一个函数。`foo`被定义为作为字符串的数组。以下是显示时的外观：

`foo = 2,4,"Party--12:00",2,22,"Eventalist Launch--6:00",2,18,"Play Day--12:00"`

由于我只传递 1 个变量，`pp and dd`因此未定义并且什么都不是。

```
if (XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200) 
                {
                    var xmlResponse = XMLHttpRequestObject.responseXML;
                    var foo = parseXML(xmlResponse);
                    //var string = JSON.stringify(foo);
                    dataOutput.innerHTML += foo;

                    getHoliday(pp,dd,foo);

                } 
```

我正在尝试将变量传递给我的日历函数，但我正在摸不着头脑，因为变量在这里变得未定义。这有什么关系？我有变量`event`我的字符串数组，但它显示为未定义。`HolidayName= new Array()`当`foo`已经将数组传递给时，我是否感到困惑`HolidayName`？

```
function getHoliday(monthSelected,theday,names)
    {   
        var events = names;
        monthSelected = monthSelected + 1
        var holiday = ""
        var HolidayName = new Array(event);
} 
```

事件结束时没有数据，如果我这样做了，则未定义`HolidayName = events`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:44:13.410

在这里，您将值分配给名为 的变量`events`：

```
var events = names; 
```

在这里，您尝试使用变量，但名称为`event`：

```
var HolidayName = new Array(event); 
```

# algorithm - 找到子数组的最大值

> ID：15055687
> 
> 赞同：0
> 
> 时间：2013-02-24T19:30:49.140
> 
> 标签：algorithm, dynamic-programming

在 O(n log n) 时间内对数组 A 进行预处理，以便您可以回答 findmax(i,j) 形式的查询：找到区间 [i; 中的最大值；j]（即数组元素 A[i],A[i + 1],...,A[j]）中的最大值 O(1)）每次查询的时间。

附加问题：展示如何在 O(n) 时间内进行预处理，以便您可以在 O(log n) 时间内回答上述查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:39:52.087

该问题被称为范围最小（最大）查询 - [RMQ](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor)。该链接基本上回答了您的两个问题。

经典的解决方案是动态规划和分段树。

# maven - Sonatype buildNumber 和时间戳不同步

> ID：15055688
> 
> 赞同：0
> 
> 时间：2013-02-24T19:30:52.820
> 
> 标签：maven, deployment, sbt, sonatype

我的快照部署有一个非常奇怪的问题：[https ://gist.github.com/fommil/5042065](https://gist.github.com/fommil/5042065)

```
<groupId>com.github.fommil</groupId>
<artifactId>emokit</artifactId>
<version>1.0-SNAPSHOT</version>
<versioning>
    <snapshot>
        <timestamp>20130226.204310</timestamp>
        <buildNumber>13</buildNumber>
    </snapshot>
    <lastUpdated>20130226204310</lastUpdated>
    <snapshotVersions>
        <snapshotVersion>
            <extension>jar</extension>
            <value>1.0-20130226.204248-12</value>
            <updated>20130226204310</updated>
        </snapshotVersion>
    ... 
```

基本上，`buildNumber`and`timestamp`不同意`snapshotVersion`s 的名称，这使 SBT 和 IntelliJ 感到困惑，以至于我无法依赖这些快照。

我已经尝试删除并重新部署所有快照，但它没有修复它。

我希望有人帮我解决这个问题，以便所有领域都同意，我可以在上游应用程序中使用 SBT 作为我的构建工具。我在 SBT 上提交了一个问题，但它没有受到关注（这可以说是一个 SBT 错误，没有处理这个问题）：[https ://github.com/sbt/sbt/issues/679](https://github.com/sbt/sbt/issues/679)

该项目本身托管在[https://github.com/fommil/emokit-java](https://github.com/fommil/emokit-java)并且上传的文件（将更改）来自[https://oss.sonatype.org/content/repositories/snapshots/com/github /fommil/emokit/1.0-SNAPSHOT/maven-metadata.xml](https://oss.sonatype.org/content/repositories/snapshots/com/github/fommil/emokit/1.0-SNAPSHOT/maven-metadata.xml)

有时它会自行修复 - 我希望有一些 sonatype cronjob 可以整理这一切。

（注意：我投票关闭，因为我认为它似乎可以自行修复，但问题又出现了。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:57:49.470

您是否在您的 pom 中专门声明了 maven-deploy-plugin？仔细检查该插件的版本和版本。

# forms - Symfony 2 表单验证

> ID：15055689
> 
> 赞同：0
> 
> 时间：2013-02-24T19:31:10.590
> 
> 标签：forms, validation, symfony

我有一个简单的表单，没有用于发送电子邮件的实体。现在我在 Firefox 中进行测试，如果我将字段留空，我会收到一条消息。但是现在如果我在 Safari 中打开相同的表单（忽略所需的属性），我将不会收到任何消息。`form->isValid()`即使我将所有字段都留空，回报也是如此......

如何验证这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-24T19:34:34.183

浏览器内验证只是在字段为空白时避免向服务器发出请求的一种节省时间的方法，但它不是正确的验证，因为它可以在浏览器级别禁用。您仍然应该在服务器端进行验证。

请参阅[本节](http://symfony.com/doc/master/book/forms.html#adding-validation)- 您需要`NotBlank`约束。

# r - 更改 ggplot2 图例标题而不更改图形参数

> ID：15055690
> 
> 赞同：5
> 
> 时间：2013-02-24T19:31:17.480
> 
> 标签：r, graphics, ggplot2

我用 ggplot2 找到了很多关于图例标题的话题，但是几个小时后我还是没能处理好我的情况。

这是数据集：

```
> dat
  FACTOR1 FACTOR2 lsmean lower.CL upper.CL
1       A      aa   26.2     25.6     26.8
2       B      aa   24.8     23.9     25.7
3       A      bb   26.0     25.2     26.7
4       B      bb   24.9     23.9     25.9
5       A      cc   24.4     23.9     24.8
6       B      cc   23.9     22.9     25.0
7       A      dd   24.9     24.3     25.6
8       B      dd   23.2     22.3     24.0 
```

和感兴趣的图形：

```
gp0 <- ggplot(dat, aes(x=FACTOR2, y=lsmean, group=FACTOR1, colour=FACTOR1)) 
( gp1 <- gp0 +  geom_line(aes(linetype=FACTOR1), size=.6) + 
    geom_point(aes(shape=FACTOR1), size=3) + 
    geom_errorbar(aes(ymax=upper.CL, ymin=lower.CL), width=.1) +
    geom_errorbar(aes(ymax=upper.CL, ymin=lower.CL), width=.1) ) 
```

![GP1](../Images/b4a069d3a7bc22ef500d2c2b610b5eef.png)

如果我`scale_colour_manual()`用来更改图例标题，那么我会得到一个意想不到的附加图例：

```
gp1 + scale_colour_manual("NEW TITLE",values=c("red","blue")) 
```

![GP1+](../Images/69c8ebfed0d340e1977eebbfa23406a0.png)

我压制了这个额外的传说，`scale_"aes"_manual("guide=none", values=...)`但我不明白如何控制参数（点和线的样式）：

```
gp1 + scale_colour_manual("NEW TITLE",values=c("red","blue")) +
    scale_shape_manual(guide = 'none', values=c(1,2))   + 
    scale_linetype_manual(guide = 'none', values=c(1,3)) 
```

![GP1++](../Images/88b22dbdd29288881b4902ec44e7661c.png)

请问如何用新的图例标题重现第一个情节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T19:42:27.780

您必须为您使用的所有属性设置相同的标题`aes()`，例如，使用 function `labs()`。

```
gp1 + scale_colour_manual(values=c("red","blue"))+
    labs(colour="NEW TITLE",linetype="NEW TITLE",shape="NEW TITLE") 
```

# c# - 正在添加但未删除的项目的 ObservableCollection 事件

> ID：15055691
> 
> 赞同：6
> 
> 时间：2013-02-24T19:31:21.133
> 
> 标签：c#, events, observablecollection

有没有办法在将项目添加到 ObservableCollection 时触发事件，而不是在删除项目时触发事件？

我相信没有实际的事件，但也许是一种过滤 CollectionChanged 事件的方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T20:59:11.030

该`CollectionChanged`事件包括诸如对集合执行了哪些操作（例如，添加或删除）以及哪些项目受到影响等信息。

只需在您的处理程序中添加一个检查，以仅在执行时执行所需的操作`Add`。

```
ObservableCollection<T> myObservable = ...;
myObservable.CollectionChanged += (sender, e) =>
{
    if (e.Action == NotifyCollectionChangedAction.Add)
    {
        // do stuff
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:50:50.843

我认为继承 ObservableCollection 类并创建自己的 ItemAdded 事件应该可以工作。

```
public class MyObservableCollection<T> : ObservableCollection<T>
{
    public event EventHandler<NotifyCollectionChangedEventArgs> ItemAdded;

    public MyObservableCollection()
    {
        CollectionChanged += MyObservableCollection_CollectionChanged;
    }

    void MyObservableCollection_CollectionChanged(object sender,            NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Add)
            ItemAdded(sender, e);
    }
} 
```

# php - 邮件功能 - 更改 SMTP 中继

> ID：15055693
> 
> 赞同：2
> 
> 时间：2013-02-24T19:31:42.547
> 
> 标签：php, smtp

我使用 PHP 的`mail`函数从我的服务器发送电子邮件，该服务器目前也处理邮件。但是，我希望 PHP 开始通过不同的 SMTP 中继发送消息，而不是运行它的服务器。我检查了`php.ini`，似乎只能在 Windows PC 上指定不同的中继，而我的服务器正在运行 OS X Snow Leopard。是否可以更改继电器设置？理想情况下，我不想在我的 PHP 代码中加入任何新的东西，因为我`mail`到处都在使用这个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:38:10.840

[如果没有在服务器上设置通过 SMTP 路由邮件的 sendmail 替代方案，或者使用Swiftmailer 之](http://swiftmailer.org/docs/sending.html)类的库更容易，您就无法做到这一点。

PHP 无法使用内置的外部 SMTP 服务器（除非您在 Windows 平台上）。

# spring-security - ZK 应用程序。Spring Security 不会在事件侦听器中返回用户

> ID：15055694
> 
> 赞同：0
> 
> 时间：2013-02-24T19:32:02.387
> 
> 标签：spring-security, zk

我有 ZK 和 Spring Security 的应用程序。我通过spring安全机制登录了应用程序。在索引页面上，我有一些动态创建的组件。“A”组件有点击监听；

```
***point1**
userComponent = new A("link");
userComponent.addEventListener(Events.ON_CLICK, new EventListener<Event>() {    
    public void onEvent(Event event) throws Exception {        
        **point2**
        //do something with current user    
    }
}); 
```

在第*1 点*中，我尝试让当前用户使用`Authentication authentication = SecurityContextHolder.getContext().getAuthentication();`它的工作完美，并且我收到登录用户。但是在*point2* `SecurityContextHolder.getContext().getAuthentication()`中返回null。如何在点击事件中获取当前用户？

也许堆栈跟踪可以提供帮助。我在堆栈跟踪中看到没有 SecurityFilters 到*point2*

这是*到点 1的堆栈跟踪* [http://pastebin.com/raw.php?i=k4EhXrAi](http://pastebin.com/raw.php?i=k4EhXrAi) [到点](http://pastebin.com/raw.php?i=v1mbfbwi)
2 的 堆栈跟踪*http://pastebin.com/raw.php?i=v1mbfbwi*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:15:14.647

看起来您已经为与事件事件处理程序匹配的任何 URL 定义了一个空过滤器链（我可以[从这一行](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/FilterChainProxy.java#L186)包含在您的第二个堆栈跟踪中的事实中看出这一点）。所以你是对的——请求绕过了 Spring Security，因此不会获取当前的用户信息。从调试日志中应该很明显，因为您将看到以下消息：

> 有一个空的过滤器列表*或*没有匹配的过滤器

如果没有看到您的配置，很难确切地说出它是什么（我对 zk 一无所知），但是您应该能够轻松地调试来自浏览器的请求并将它们与调试日志输出相匹配，该输出详细解释了如何他们被处理。

如果您发布 Ajax 调用使用的配置和 URL，那么应该更容易给出准确的答案。

# android - ViewPager 中的 onPageScrolled 方法没有被调用

> ID：15055702
> 
> 赞同：0
> 
> 时间：2013-02-24T19:32:43.857
> 
> 标签：android, android-viewpager

我正在尝试`SlidingMenu`由 jfeinstein 实施并使用`ViewPager`.

但是，我无法获取`onPageScrolled`要调用的方法。然后我意识到，它们并没有被覆盖，当我添加它时，它说必须覆盖超类方法。

这是设置：

```
mSectionsPagerAdapter = new SectionsPagerAdapter(
                    getSupportFragmentManager());

    mViewPager = (ViewPager) findViewById(R.id.viewpager);
    mViewPager.setAdapter(mSectionsPagerAdapter);
    mViewPager.setOffscreenPageLimit(3);
    mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

        public void onPageScrollStateChanged(int arg0) {
            // TODO Auto-generated method stub

        }

        public void onPageScrolled(int arg0, float arg1, int arg2) {
            // TODO Auto-generated method stub

        }

        public void onPageSelected(int position) {
            switch (position) {
            case 0:
                smenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
                break;
            default:
                smenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
                break;
            }

        }

    }); 
```

任何人都可以看到为什么`onPageScrolled`不被调用，如果是这样，缺少什么？（我已经烤了位置变量来证明这一点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:44:08.200

我的错，我需要调用`TitlePageIndicator`这些方法的版本，而不是`ViewPager's`

# vba - 循环遍历带有选择案例的表格以替换文本

> ID：15055703
> 
> 赞同：1
> 
> 时间：2013-02-24T19:32:50.560
> 
> 标签：vba, select, replace

我正在使用 MS Access 2010-2013 并且我有一个更新查询，它将一些文本替换为另一个文本。我想在我的表单上将查询转换为 VBA“Sub Removereplace ()”，以循环遍历每个有问题的文本的选择案例，并在其存在时替换它。我不知道如何做到这一点，并试图通过护目镜找到一个可行的例子，但没有运气。有任何想法吗？谢谢！！！

```
UPDATE tbl_ImportedTabDelimited SET tbl_ImportedTabDelimited.[Long Description] = Replace(Replace(Replace(Replace([Long Description]," ft","'")," in","""")," ""L""",""),",","")
WHERE (((tbl_ImportedTabDelimited.[Long Description]) 
Like "*ft*" Or   (tbl_ImportedTabDelimited.[Long Description]) 
Like "*in*" Or (tbl_ImportedTabDelimited.[Long   Description]) 
Like "*,*" Or (tbl_ImportedTabDelimited.[Long Description]) 
Like "*""L""*")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:01:54.230

好的，如果您真的必须在循环中更新 VBA 中的内容：

```
Sub ThisIsABadIdea()
    Dim rs As DAO.Recordset
    Set rs = CurrentDb.OpenRecordset("SELECT Title, Name, Salary FROM Table1")

    rs.MoveFirst
    While Not rs.EOF
        rs.Edit

        ' Multiple field update
        If Left(rs!Title, 1) = "Z" Then
            rs!Title = "Omega Man"
            rs!Name = "Heston"
            rs!Salary = 15000
        End If

        ' Multiple condition on one field
        Select Case rs!Title
        Case rs!Title = "aa":
            rs!Title = "no way!"
        Case Left(rs!Title, 4) = "xyxy":
            rs!Title = "Double Fem!"
        Case Right(rs!Title, 2) = "-2":
            rs!Title = "It's a dash two experience"
        Case Else
            rs!Title = "It is indescribable"
        End Select

        rs.Update
        rs.MoveNext
    Wend
    rs.Close
End Sub 
```

# php - PHP 要求 - 可见性范围

> ID：15055705
> 
> 赞同：0
> 
> 时间：2013-02-24T19:32:56.010
> 
> 标签：php, scope, visibility, require

我发现了类似的问题，但它们并没有真正针对我的问题。

我的配置文件有问题。我有 index.php 需要 config.php （它包含设置数组），后来 index.php 需要 init.php （包含很多 require 子句，最重要的 atm 是它需要的 router.php ）。Router.php 使用来自 config.php 的设置，但显然它在 router.php 中不可见（以及在 router.php 中的任何要求），但它在 init.php 中可见。

我应该怎么做才能让它工作？我听说我应该将 config.php 中的东西设为全局，但是我应该把它放在哪里以使其对 router.php 和它所需的任何文件（以及这些文件也需要）可见。？

谢谢大家的回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:35:52.387

如果您需要`config.php`，它看起来像这样：

```
<?php
$config = array();
$config['someOption'] = 'someValue'; 
```

$config 应该在代码中的其他任何地方都可用。但是，如果您尝试`$config`从函数访问，则必须使用 global 关键字。

```
<?php
function someFunction()
{
    global $config;

    echo $config['someOption'];
} 
```

我的猜测是您缺少`global $config;`代码中的部分。

# java - 在 Ubuntu 12.10 上使用 Tomcat 7 --- 如何？

> ID：15055707
> 
> 赞同：0
> 
> 时间：2013-02-24T19:33:06.883
> 
> 标签：java, tomcat, servlets, ubuntu, environment-variables

我是 Ubuntu 12.10 的新手，并从 Windows 迁移到它。

在 Windows 中，我已将环境变量配置为包含`servlet-api.jar`在`CLASSPATH`变量中，因此我不必`-cp <path to servlet-api.jar>`每次编译时都键入。

对于普通的Java程序，我已经设置了`JAVA_HOME`using：
`export JAVA_HOME="/usr/lib/jvm/java-7-openjdk-i386" >> ~/.bashrc`
解决了这个问题，我需要设置`CLASSPATH`但不知道如何设置。

请帮忙！
此外，我在一些论坛上读到，`CLASSPATH`每次编译时我都应该手动更改，因为更改`CLASSPATH`可能会扰乱其他应用程序。

接下来，我尝试使用此命令启动 Tomcat
`service tomcat7 start`，但出现错误：
`You need root privileges to run this script`我不知道为什么。帮我解决！

如果在范围内，请告诉我 Windows 中 tomcat 的目录结构与 Ubuntu 中的目录结构有何不同。

### 杂项

我曾经`sudo apt-get install tomcat7`得到Tomcat 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-30T15:46:02.020

您没有说您使用的是 Ubuntu Tomcat 包还是独立的 Tomcat 安装。

对于独立的 Tomcat，您将使用其`bin`目录中的脚本启动和停止它：`startup.sh`和`shutdown.sh`. 在这种情况下，Tomcat 将使用调用时设置的环境变量值。执行此操作时，您可以在运行这些命令之前设置环境变量。

Ubuntu 作为软件包分发的 Tomcat 6 或 Tomcat 7 也是如此。这些巧妙地将`$CATALINA_HOME`目录（应该是 Tomcat 7 发行版的位置）与`$CATALINA_BASE`目录（应该是特定 Tomcat 实例的所有更改和添加的位置）分开。对于`tomcat7`包，第一个目录是`/usr/share/tomcat7`，而第二个目录是`/var/lib/tomcat7`. 你可以在里面找到，`startup.sh`当然你也可以使用它们。`shutdown.sh``/usr/share/tomcat7/bin`

但是，如果您使用 Ubuntu 提供的 Tomcat，您可能希望像任何其他标准系统服务一样运行它，并且软件包支持这一点：例如，在 的情况下`tomcat7`，您可以只使用

```
sudo service tomcat7 status
sudo service tomcat7 start
sudo service tomcat7 stop
sudo service tomcat7 restart 
```

就像您对任何系统服务一样，它使用与其他系统服务相同的机制：

*   shell脚本`/etc/init.d/tomcat7`用于启动和停止Tomcat 7
*   `/etc/default/tomcat7`是它的配置文件，允许设置一些参数

使用此方法，您无法通过在 shell 或`/etc/default/tomcat7`;中设置来指定 Tomcat 使用的其他环境变量。它们不会被传递给 Tomcat。

但是，还有第二种设置环境变量的方法：如果您在 shell 脚本中设置它们`/var/lib/tomcat7/bin/setenv.sh`（或者，如果必须，`/usr/share/tomcat7/bin/setenv.sh`），它们将被拾取并传递给 Tomcat。这种方法总是有效的。

最后，Tomcat 在指定启动时加载的其他类或 JAR 时提供了比仅使用更好的控制`$CLASSPATH`：在其`conf/catalina.properties`配置文件中，您可以将`common.loader`,`server.loader`和设置`shared.loader`为要加载的目录和/或 JAR 文件的列表除了标准的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:36:39.357

这意味着您应该以超级用户的身份执行此操作 - 在 Windows 中转换为管理员，因此您应该尝试类似的操作`sudo service tomcat7 start`

尝试`export CLASSPATH=/usr/share/tomcat7/lib/servlet-api.jar:/usr/share/tomcat7/lib/jsp-api.jar`- 这将取决于您的 Tomcat 安装位置。

你可以 [在这里获得更多](http://doc.ubuntu-fr.org/tomcat)

干杯

# java - 尝试捕获循环

> ID：15055708
> 
> 赞同：0
> 
> 时间：2013-02-24T19:33:12.090
> 
> 标签：java

我没有要求任何人做我的工作，我只需要一点帮助来解决这种不匹配。这是我的程序：

```
import java.util.InputMismatchException;
import java.util.Scanner;
class FibonacciNumbers {

    FibonacciNumbers()          //default constructor
    {
    }

    Scanner in = new Scanner(System.in);

    public int fOf(int n)
    {

        if (n == 0)                        //the base case
        {

            return 0;

        }
        else if (n==1)
        {

            return 1;
        }

        else 
        {

           return fOf(n-1)+fOf(n-2); 
        }
        }

 public static void main(String[] args)
    {
       FibonacciNumbers fNumbers = new FibonacciNumbers();    //creates new object

        Scanner in = new Scanner(System.in);
        String userInput;
         int n = 0;
        boolean IsRepeat = true ;  
        boolean isQuit; 
        boolean checkException = false;

     isQuit = false;  

     while (!isQuit) 
     {

try {

    {

        System.out.print("Enter the number you want to convert to Fibanocci('q' to quit): ");

        n = in.nextInt();
        System.out.print("The Fibanocci number for "+n+" is: ");
        n = fNumbers.fOf(n);
        System.out.println(n);

        System.out.print("Do you want to run again? Press 'N' for No or anything else to continue: ");  

        userInput = in.next();  

       if(userInput.equalsIgnoreCase("N") )
          {  
              isQuit = true;
              System.out.println("Good-bye!"); 
           }  
        else 

         {  
        IsRepeat = true; 
         }
       }
    }

catch(InputMismatchException ex) {  
          userInput = in.nextLine();  

           if  ((userInput.charAt(0) == 'q') || (userInput.charAt(0) == 'Q') )  
             {  

                  isQuit = true; 
                  System.out.println("Good-bye!");  

             }  

           else {  
                 checkException = true;
                 IsRepeat = true;
                 System.out.println("Invalid entry, Try again!");
              }    
    }

    catch (ArrayIndexOutOfBoundsException a)
         {
            n = in.nextInt();
             if  (n<0 || n>46) 
                        {
                            System.out.println("Invalid entry! Please enter an integer that is greater than 0 but less than 46 :");
                            checkException = false;//sets boolean value to false, continues the loop

                        }
                      else
                          {
                            IsRepeat = true;   
                          }
    }
    }
}
} 
```

我做了一切我得到的一切工作，但在这部分它并没有像我想要的那样运行：

```
catch (ArrayIndexOutOfBoundsException a)
         {
            n = in.nextInt();
             if  (n<0 || n>46) 
                        {
                            System.out.println("Invalid entry! Please enter an integer that is greater than 0 but less than 46 :");
                            checkException = false;//sets boolean value to false, continues the loop

                        }
                      else
                          {
                            IsRepeat = true;   
                          }
    } 
```

当我运行它时，如果用户输入高于 46 或低于 0，然后要求他们提供不同的输入，但它只是在做数学运算。它不会像我写程序那样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:47:17.947

它抛出“java.lang.StackOverflowError”而不是“ArrayIndexOutOfBoundsException”。

更好的方法是在

```
System.out.print("Enter the number you want to convert to Fibanocci('q' to quit): ");
n = in.nextInt(); 
```

你可以设置“n = in.nextInt();” 进入一个do-while-循环，

喜欢：

```
do {
    ask for number
} while (check if number is correct); 
```

# android - Facebook android sdk 的 Session.requestNewPublishPermissions 给出异常

> ID：15055713
> 
> 赞同：2
> 
> 时间：2013-02-24T19:33:28.660
> 
> 标签：android, facebook, integration, android-facebook

我正在将 facebook 集成到我的 android 应用程序中，当用户第一次登录时，我正在使用我的 requestFacebookPermissions(session) 方法请求 publish_actions 权限。但是每当我调用此方法时，它都会给我以下异常...

```
java.lang.UnsupportedOperationException: Session: an attempt was made to request new permissions for a session that has a pending request. 
```

我没有任何其他待处理的请求，可能是其他一些内部请求，但是我如何在不获得此异常的情况下请求权限？如果我必须等到其他请求完成也没关系，但我不知道如何获取挂起的请求是否完成。

```
private void requestFacebookPermissions(Session session) {

        if (session != null && session.getState().isOpened()) {
            List<String> permissions = session.getPermissions();

            Log.i("Facebook", "Permissions Count: " + permissions.size());

            for (String string : permissions) {
                Log.i("FacebookPermissions", string);
            }

            if (!permissions.containsAll(PERMISSIONS)) {
                try {
                    session.requestNewPublishPermissions(new Session.NewPermissionsRequest(FacebookActivity.this, PERMISSIONS));
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        } else {
            return;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T02:21:38.803

我在登录后请求发布权限

这是我的代码

```
public class FacebookAccount extends FragmentActivity {
    private UserSettingsFragment userSettingsFragment;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.facebook_login);

        FragmentManager fragmentManager = getSupportFragmentManager();
        userSettingsFragment = (UserSettingsFragment) fragmentManager
                .findFragmentById(R.id.login_fragment);

        userSettingsFragment.setReadPermissions(Utility.READ_PERMISSIONS);

        userSettingsFragment
                .setSessionStatusCallback(new Session.StatusCallback() {
                    @Override
                    public void call(Session session, SessionState state,
                            Exception exception) {
                        if (state == SessionState.OPENED
                                && !session.getPermissions().containsAll(
                                        Utility.PUBLISH_PERMISSIONS)) {
                            session.requestNewPublishPermissions(new Session.NewPermissionsRequest(
                                    FacebookAccount.this,
                                    Utility.PUBLISH_PERMISSIONS));
                        }
                        if (session.isOpened()
                                && state == SessionState.OPENED_TOKEN_UPDATED) {
                            ....Save session access token
                        }
                    }
                });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (userSettingsFragment != null)
            userSettingsFragment
                    .onActivityResult(requestCode, resultCode, data);
        super.onActivityResult(requestCode, resultCode, data);
    }

} 
```

# php - 真正比较数组的函数

> ID：15055715
> 
> 赞同：0
> 
> 时间：2013-02-24T19:33:39.847
> 
> 标签：php, compare

我有一个函数可以比较通过我的函数推送的两个数组。问题是，我可以根据计数比较两个不同数组的值。我的代码如下：

```
 function Array_Smoke($Array_1, $Array_2)
            {
                    $Return_Array = array();
                    $Array_Count = count($Array_1);             
                foreach ($Array_1 AS $SmokedKeys => $SmokedValues)
                {
                    if (in_array($SmokedValues, $Array_2))
                    {
                        $Return_Array[] = $SmokedValues;
                    }

            }
                if ($Array_Count == count($Return_Array))
                {
                    return "Arrays Match Up"; 
                }
                else
                {
                    return "Arrays Do Not Match Up";
                }
        }

   $Array_1 = array(
        "Primary Key Number 1" => "Primary Value Number 2", 
        "Sub Key Number 1" => "Sub Value Number 1",
        "Sub key Number 3" => "Sub Value Number 3", 
        "Sub Key Number 2" => "Sub Value Number 2",
   );
   $Array_2 = array(
        "Primary Key Number 1" => "Primary Value Number 2", 
        "Sub Key Number 1" => "Sub Value Number 1",
        "Sub key Number 2" => "Sub Value Number 2", 
        "Sub Key Number 3" => "Sub Value Number 3",
   );
        echo Array_Smoke($Array_1, $Array_2); 
```

我将如何修改我的函数以根据数组的键和值进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:36:03.993

你试过`array_diff_assoc()`吗？

[http://php.net/manual/en/function.array-diff-assoc.php](http://php.net/manual/en/function.array-diff-assoc.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:50:00.633

好的，你可以像这样使用内置的 php 运算符：

```
function Array_Smoke ($array1, $array2) {
    return $array1 == $array2;
} 
```

关于[PHP 数组运算符](http://www.php.net/manual/en/language.operators.array.php)'==' 运算符返回 true 如果两个数组具有相同的键/值对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:55:21.500

听起来像 array_diff_assoc() 是你需要的。如果没有返回任何内容，则数组匹配。请记住，键和值必须匹配。

# c# - 使用实体框架对通用列表进行动态过滤、排序和分页

> ID：15055718
> 
> 赞同：1
> 
> 时间：2013-02-24T19:33:56.353
> 
> 标签：c#, entity-framework, sorting, asp.net-mvc-4, generic-programming

我在我的 MVC4 应用程序中使用 jQuery 数据表 ( [http://www.datatables.net )，您可能知道该表允许服务器端处理。](http://www.datatables.net)我将在绑定到多个控制器的多个视图中使用该表，因此我想实现一种通用的方法来过滤、排序和分页数据，而无需为每个控制器编写方法。如果我这样做，它们看起来都一样，但它们会针对数据库中的不同实体，并对不同的列进行文本过滤和排序。这是我今天要做的：

```
 public virtual ActionResult AjaxHandler(jQueryDataTableParamModel param)
    {
        var myProducts = _productRepository.Products;
        IEnumerable<Product> filteredProducts = myProducts;

        // Filtering
        if (!string.IsNullOrEmpty(param.sSearch))
        {
            var searchTermLower = param.sSearch.Trim().ToLower();
            filteredProducts = filteredProducts
                     .Where(c => c.Title.Contains(param.sSearch)
                                 ||
                      c.Manufacturer.ManufacturerName.ToLower().Contains(searchTermLower)
                                 ||
                      c.Category.CategoryTitle.ToLower().Contains(searchTermLower)
                                 ||
                      c.Size.Title.ToLower().Contains(searchTermLower)
                                 ||
                      c.Price.ToString("C").Contains(searchTermLower));
        }

        // Sorting
        var sortColumnIndex = Convert.ToInt32(Request["iSortCol_0"]);
        var sortDirection = Request["sSortDir_0"];
        if (sortColumnIndex == 0)
        {
            filteredProducts = sortDirection == "asc" ? filteredProducts.OrderBy(x => x.CreatedDate) : filteredProducts.OrderByDescending(x => x.CreatedDate);
        }
        else if (sortColumnIndex == 1)
        {
            filteredProducts = sortDirection == "asc" ? filteredProducts.OrderBy(x => x.Title) : filteredProducts.OrderByDescending(x => x.Title);
        }
        else if (sortColumnIndex == 2)
        {
            filteredProducts = sortDirection == "asc" ? filteredProducts.OrderBy(x => x.Manufacturer.ManufacturerName) : filteredProducts.OrderByDescending(x => x.Manufacturer.ManufacturerName);
        }
        else if (sortColumnIndex == 3)
        {
            filteredProducts = sortDirection == "asc" ? filteredProducts.OrderBy(x => x.Size.Title) : filteredProducts.OrderByDescending(x => x.Size.Title);
        }
        else if (sortColumnIndex == 4)
        {
            filteredProducts = sortDirection == "asc" ? filteredProducts.OrderBy(x => x.Category.CategoryTitle) : filteredProducts.OrderByDescending(x => x.Category.CategoryTitle);
        }
        else if (sortColumnIndex == 4)
        {
            filteredProducts = sortDirection == "asc" ? filteredProducts.OrderBy(x => x.Price) : filteredProducts.OrderByDescending(x => x.Price);
        }

        // Paging
        var displayedProducts = filteredProducts.Skip(param.iDisplayStart).Take(param.iDisplayLength);
        var result = from c in displayedProducts
                     select new[] { c.ProductId.ToString(CultureInfo.InvariantCulture), c.CreatedDate.ToString("G"), c.Title, c.Manufacturer.ManufacturerName, c.Size.Title, c.Category.CategoryTitle, c.Price.ToString("C") };
        return Json(new
        {
            sEcho = param.sEcho,
            iTotalRecords = myProducts.Count(),
            iTotalDisplayRecords = filteredProducts.Count(),
            aaData = result
        }, JsonRequestBehavior.AllowGet);
    } 
```

我尝试了几件事来使这个通用的没有一个完全有效 - 有些是因为我过滤所有列和其他原因是因为其他原因。我希望有更好的方法来做到这一点，这样我就可以传递选择列的列或函数并让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:05:44.207

最近刚刚处理了这个问题，我可以告诉你，你想在你的项目中实现动态 linq。动态 linq 允许您编写查询，例如

results.OrderBy("id desc")

和

results.Where("Name.Contains('foo')")

希望这些帮助：

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx) [http://codefucius.blogspot.com /2012/11/implementing-jqgrid-search.html](http://codefucius.blogspot.com/2012/11/implementing-jqgrid-search.html)

注意 - 我使用了 jqGrid，但想法保持不变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T23:09:43.073

动态 SortingAndPagingHelper 扩展方法

```
/// <summary>
/// Extension method for sorting and filtering
/// </summary>
public static class SortingAndPagingHelper
{
    public static IEnumerable<TSource> SortingAndPaging<TSource>(this IEnumerable<TSource> source, SortingAndPagingInfo sortingModal)
    {
        // Gets the coloumn name that sorting to be done on
        PropertyInfo propertyInfo = source.GetType().GetGenericArguments()[0].GetProperty(sortingModal.SortColumnName);

        // sorts by ascending if sort criteria is Ascending otherwise sorts descending
        return sortingModal.SortOrder == "Ascending" ? source.OrderByDescending(x => propertyInfo.GetValue(x, null)).Skip(sortingModal.PageSelected * sortingModal.PageSize).Take(sortingModal.PageSize)
                           : source.OrderBy(x => propertyInfo.GetValue(x, null)).Skip(sortingModal.PageSelected * sortingModal.PageSize).Take(sortingModal.PageSize);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T16:10:12.950

```
 /// Used to indicate the sort order.
    /// </summary>
    public enum SortOrder
    {
        /// <summary>
        /// Indicates whether the order is ascending.
        /// </summary>
        Ascending = 0,

        /// <summary>
        /// Indicates whether the order is descending.
        /// </summary>
        Descending = 1,

        /// <summary>
        /// Indicates whether the order is neutral.
        /// </summary>
        Neutral = 2
    }

    /// <summary>
    /// DTO for sorting and paging
    /// </summary>
    public class FilterProperties
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="FilterProperties"/> class.
        /// </summary>
        public FilterProperties()
        {
            // parameterless constructor
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="FilterProperties"/> class.
        /// </summary>
        /// <param name="sortColumnName">column name of sorting.</param>
        /// <param name="sortOrder">order of the sorting</param>
        /// <param name="pageSize">items in the page.</param>
        /// <param name="filterValue">value of the filter.</param>
        /// <param name="pageselected">current page selected.</param>
        public FilterProperties(string sortColumnName, SortOrder sortOrder, int pageSize, string filterValue = "All", int pageselected = 0)
        {
            this.SortColumnName = sortColumnName;
            this.SortOrder = sortOrder;
            this.PageSize = pageSize;
            this.PageSelected = pageselected;
            this.FilterValue = filterValue;
        }

        /// <summary>
        /// Gets or sets the filter column name
        /// </summary>
        public string FilterColumnName { get; set; }

        /// <summary>
        /// Gets or sets the filter value
        /// </summary>
        public string FilterValue { get; set; }

        /// <summary>
        /// Gets or sets the sort field name.
        /// </summary>
        public string SortColumnName { get; set; }

        /// <summary>
        /// Gets or sets the sort direction.
        /// </summary>
        public SortOrder SortOrder { get; set; }

        /// <summary>
        /// Gets or sets the page size.
        /// </summary>
        [Obsolete("Use RecordCount instead (remove this)")]
        public int PageSize { get; set; }

        /// <summary>
        /// Gets or sets the current page index.
        /// </summary>
        [Obsolete("Use StartRecord instead (remove this)")]
        public int PageSelected { get; set; }

        /// <summary>
        /// Gets or sets the zero-based index of the starting record to return in
        /// the filtered result set.         
        /// </summary>
        public int StartRecord { get; set; }

        /// <summary>
        /// Gets or sets the number of records to return in the filtered result set.         
        /// </summary>
        public int RecordCount { get; set; }
    }
}

Extension Method for sorting and paging
public static class SortingAndPagingHelper
    {
        /// <summary>
        /// Returns the list of items of type on which method called
        /// </summary>
        /// <typeparam name="TSource">This helper can be invoked on IEnumerable type.</typeparam>
        /// <param name="source">instance on which this helper is invoked.</param>
        /// <param name="sortingModal">Page no</param>
        /// <returns>List of items after query being executed on</returns>
        public static IEnumerable<TSource> SortingAndPaging<TSource>(
            this IEnumerable<TSource> source, 
            FilterProperties sortingModal)
        {
            // Is there any sort column supplied?
            IEnumerable<TSource> data = source;
            if (!string.IsNullOrEmpty(sortingModal.SortColumnName))
            {
                // Gets the coloumn name that sorting to be done on
                PropertyInfo propertyInfo =
                    data.GetType().GetGenericArguments()[0].GetProperty(sortingModal.SortColumnName);

                // Define the sorting function
                data = sortingModal.SortOrder == SortOrder.Ascending
                    ? data.OrderBy(x => propertyInfo.GetValue(x, null))
                    : data.OrderByDescending(x => propertyInfo.GetValue(x, null));
            }

            // Apply paging to (sorted) data
            return sortingModal.RecordCount > 0
                ? data.Skip(sortingModal.StartRecord).Take(sortingModal.RecordCount)
                : data.Skip((sortingModal.PageSelected - 1) * sortingModal.PageSize).Take(sortingModal.PageSize);
        }
    } 
```

# ios - iOS：背景图像黑色而不是请求的图像？

> ID：15055722
> 
> 赞同：0
> 
> 时间：2013-02-24T19:34:29.223
> 
> 标签：ios, background, uiimage

我正在尝试将背景设置为图像。

代码：

```
 [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"myPic"]]]; 
```

我最初的计划是将 self.window 设置为背景图像，然后让其他视图清晰。（在应用程序委托中使用 self.window）但在那之后，我们给我一个纯黑屏（？？），我将代码移动并调整到我的 RootViewController。我仍然得到一个纯黑屏。我尝试使用一些不同的图像，但我在所有图像上都得到了相同的结果。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T10:52:09.487

图片名称“myPic”应包含文件扩展名，即 myPic.jpg

# c++ - c++中的类和虚函数

> ID：15055725
> 
> 赞同：0
> 
> 时间：2013-02-24T19:34:46.607
> 
> 标签：c++, class, virtual

我想创建两种类。这些类将具有类似的函数“set”，但 set 函数将在 B 类中获得“int”，在 C 类中获得双倍。（A 是抽象类，但它不需要）。我需要做什么？

```
class A{
    int x;
public:
    A (int t=1): x(t){}
    virtual void set ()=0;
}

class B: public A{
    int y;
public:
    virtual void set (int y);
};

class C: public A{
    double y;
public:
    virtual void set (double y);
};

void main ()
{
    B b; //error
    C c; //error
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:46:30.443

创建一个模板类并实例化您当时需要的任何一个，或者从模板类中 typedef B 和 C：

```
template< typename T > class A
{
public:             A() : mValue() {}

            void    Set( T value ) { mValue = value; }

private:    T       mValue;
};

typedef A< int >    B;
typedef A< double > C; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:57:04.197

有很多变体可以解决这个问题，但首先，虚函数必须具有相同的签名（可能有一个例外，但这与您的情况无关）。因此，解决方案是拥有可以解决所有情况的论点。有变种：

将所有变体传递给函数，并且只使用特定的一个：

```
class A {
public:
    virtual void set( int, double ) = 0;
};
class B {
   int y;
public:
   virtual void set( int val, double ) { y = val; }
};
class C {
   double y;
public:
   virtual void set( int , double val ) { y = val; }
}; 
```

这不是很好的解决方案，也不能很好地扩展，所以我们可以使用联合：

```
Union Arg {
   int i;
   double d;
};

class A {
public:
    virtual void set( Arg a ) = 0;
};
// derived classes are trivial, so omitted 
```

Union 不是类型安全的，所以我们可以使用 boost::variant

另一种为参数设置另一个层次结构的解决方案：

```
struct Arg {
    virtual ~Arg();
};
struct IntArg : Arg {
    int m_value;
};
struct DoubleArg : Arg {
    double m_value;
};
class A {
    virtual void set( const Arg &a ) = 0;
};
class B {
   int y;
public:
   virtual void set( const Arg &a ) { y = dynamic_cast<const IntArg &>( a ).m_value; }
};
class C {
    double y;
public:
   virtual void set( const Arg &a ) { y = dynamic_cast<const DoubleArg &>( a ).m_value; }
}; 
```

您可以使用 static_cast ，然后在 Arg 中不需要虚拟析构函数，但这不太安全。

这些只是一些变体，可能还有更多，哪一个最适合您，您只能根据您的程序要求来决定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T19:57:14.630

抛弃继承和虚拟的东西。您不能通过虚函数轻松访问静态未知类型的结果。所以：

```
class A
{
private:
    int x_;
public:
    A( int const t = 1 ): x_( t ) {}
};

class B
   : public A
{
private:
    int y_;
public:
    void set( int const y );
};

class C
    : public A
{
private:
    double y_;
public:
    void set( double const y );
};

int main ()
{
    B b; // OK
    C c; // OK
} 
```

注意类末尾的分号`A`和`int main`代替`void main`.

这样的细节很重要。

否则，您可以派出想帮助您的人，进行漫长的追逐。而你不想那样，是吗？因此，请确保您发布的代码已被编译器接受，除非您想要显示的麻烦部分无法编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T19:44:29.617

诀窍是找到 B 和 C 的共同部分，并将它们放入基类。不同的东西应该去派生类的构造函数参数：

```
class A { 
   virtual std::string get() const=0;
   virtual void set(std::string s)=0; 
};
class B : public A { B(int a) : a(a) { } int a; };
class C : public A { C(float b) : b(b) { } float b; } 
```

要实现这些功能，您需要以下内容：

```
void B::set(std::string s) {
   stringstream ss(s);
   ss >> a; 
}
void C::set(std::string s) {
   stringstream ss(s);
   ss >> b;
} 
```

函数看起来相同，但实际上调用不同的运算符>>。

# javascript - 如何定义使用先前值来确定 Knockout 中的类的自定义绑定？

> ID：15055726
> 
> 赞同：4
> 
> 时间：2013-02-24T19:34:49.827
> 
> 标签：javascript, knockout.js

我需要用淘汰赛绑定一个表格，如果新值高于或低于前一个值，我希望表格单元格获得不同的 css 类。

我想到了不同的可能性，例如将先前的值存储在 bindingContext 中并具有返回正确类的函数，但是是否可以添加一个自定义绑定处理程序来接收先前的值和新值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-09T13:38:38.167

尽管[Jeff](https://stackoverflow.com/users/390278/jeff-mercado)和[Sławomir](https://stackoverflow.com/users/540884/slawomir-rosiek)的答案可行，但我找到了一种替代方案，它不需要对视图模型进行任何更改，也不依赖于更改 DOM 元素对象。

```
function subscribeToPreviousValue(observable, fn) {
  observable.subscribe(fn, this, 'beforeChange');
}

ko.bindingHandlers['bindingWithPrevValue'] = {
  init: function (element, valueAccessor) {
    var observable = valueAccessor();
    var current = observable();

    console.log('initial value is', current);

    subscribeToPreviousValue(observable, function (previous) {
      console.log('value changed from', previous, 'to', current);
    });
  }
}; 
```

当然，这只有在绑定属性是可观察的情况下才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T20:35:32.633

我查看了敲除[源](https://github.com/SteveSanderson/knockout/blob/master/src/subscribables/observable.js)，我想您无法在 bindingHandler 的更新方法中访问先前的值，但您可以将其存储在元素中

```
ko.bindingHandlers['bindingWithPrevValue'] = {
    update: function (element, valueAccessor) {
        var prevValue = $(element).data('prevValue');
        var currentValue = valueAccessor();
        $(element).data('prevValue', currentValue());

        // compare prevValue with currentValue and do what you want
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T22:04:40.943

您可以做的是创建一个扩展器来扩展您希望跟踪其先前值的可观察对象。然后，您可以检查先前的值以按照您的意愿进行操作。

只需传入将保存先前值的属性的名称。

```
ko.extenders.previousValue = function (target, propertyName) {
    var previousValue = ko.observable(null);

    target[propertyName] = ko.computed(previousValue);

    target.subscribe(function (oldValue) {
        previousValue(oldValue);
    }, target, 'beforeChange');

    return target;
}; 
```

然后使用它：

```
function ViewModel() {
    this.value = ko.observable('foo').extend({ previousValue: 'previousValue' });
}

var vm = new ViewModel();

console.log(vm.value()); // 'foo'
console.log(vm.value.previousValue()); // null

vm.value('bar');

console.log(vm.value()); // 'bar'
console.log(vm.value.previousValue()); // 'foo' 
```

在你的情况下，你可能会使用这样的东西：

```
function TableCell(value) {
    this.value = ko.observable(value).extend({ previousValue: 'previousValue' });
    this.cssClass = ko.computed(function () {
        // I'm assuming numbers
        var current = Number(this.value()),
            previous = Number(this.value.previousValue());

        if (current < previous)
            return 'lower';
        else if (current > previous)
            return 'higher';
    }, this);
} 
```

# c# - KeyDown 时布尔切换？

> ID：15055730
> 
> 赞同：0
> 
> 时间：2013-02-24T19:35:03.437
> 
> 标签：c#, winforms

所以这就是问题所在。我正在使用 keyDown 事件将 bool 设置为 true - 只要它为 true，mouseMove 事件就会在图片框上绘制。本质上是一个绘图程序。问题是，只要我按住绘图按钮，bool 似乎会打开和关闭，我会得到一个奇怪的条纹结果（参见示例图片中的蓝线）。bool 没有在代码中关闭，所以我不知道是什么原因造成的（好吧，它被关闭了，但我禁用了那部分代码，但问题仍然存在）。

有任何想法吗？

编辑：这是一些代码。我省略了 keyUp 事件，因为我可以禁用它但仍然遇到同样的问题。更有趣的是，如果我松开键盘按钮，我会得到一条实线，但只要我按住按钮，它就可以正常工作大约一秒钟，然后开始做条纹的事情（类似于你按住的时候）文本中的一个按钮 - 它稍等片刻，然后开始重复字符）。

```
private void Main_KeyDown(object sender, KeyEventArgs e)
    {
        string clicked = e.KeyData.ToString().ToLower(); // I'm comparing the clicked key to make sure the right button is clicked (there's a controls changing system)
        cursorLocation = pictureBox1.PointToClient(System.Windows.Forms.Cursor.Position);

        if (clicked == ctkey && MapLoaded)
        {
                readyForDraw();
                pen = new Pen(Color.DodgerBlue, penSize);
        }
        else if (clicked == tkey && MapLoaded)
        {
                readyForDraw();
                pen = new Pen(Color.Red, penSize);
        }
        else if (clicked == neutralkey && MapLoaded)
        {
                readyForDraw();
                pen = new Pen(neutralColour, penSize);
        } 
    } 

private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {
        if (isDrawing && MapLoaded && addPlayerMode == false)
        {
            g.DrawLine(pen, cursorLocation, e.Location);
            pictureBox1.Invalidate();
            pictureBox1.Image = mainBitmap;

            cursorLocation = pictureBox1.PointToClient(System.Windows.Forms.Cursor.Position);
        } 
    }   

private void readyForDraw()
    {
        g = Graphics.FromImage(mainBitmap);            
        isDrawing = true;
        saveBackup();
    } 
```

示例图片。使用 MouseDown 事件绘制红色 - 工作正常。蓝色是 keyDown 事件，已损坏。

![http://imgur.com/r8AHlh0](../Images/e533c3c55ffb2544ac3ca39e6831a0e5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:06:47.023

像这样使用WPF中的[Keyboard.GetKeyStates](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboard.getkeystates.aspx)：

```
public static bool IsDown(Key key) {
  return Keyboard.GetKeyStates(key) & KeyStates.Down != 0;
} 
```

即使您的应用程序是 WinForms 而不是 WPF，它也应该可以正常工作。（从您的项目中引用 PresentationCore.dll）

# git - 如何在 sonatype 快照中使用提交 SHA 作为 buildNumber

> ID：15055731
> 
> 赞同：0
> 
> 时间：2013-02-24T19:35:07.627
> 
> 标签：git, maven, deployment, sonatype

如何设置我的快照版本，以便将其`buildNumber`替换为 Git 提交 SHA？这必须适用于 Sonatype OSS 快照。

而且，如果可能的话，如果我的存储库中有未提交的更改，我如何强制部署失败？

[我在与Sonatype buildNumber 和时间戳不同步](https://stackoverflow.com/questions/15055688)搏斗时开始考虑这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:52:37.127

您可以配置[buildnumber-maven-plugin](http://mojo.codehaus.org/buildnumber-maven-plugin/)从 Git 配置的 SHA-1标签。如果任何文件已更新，则配置[doCheck参数以使构建失败（默认为](http://mojo.codehaus.org/buildnumber-maven-plugin/create-mojo.html#doCheck)*false*）。

有关详细信息，请阅读我前段时间写的[博客文章。](http://www.jayway.com/2012/04/07/continuous-deployment-versioning-and-git/)

# java - 使用缓冲阅读器时出错

> ID：15055732
> 
> 赞同：0
> 
> 时间：2013-02-24T19:35:16.533
> 
> 标签：java

我编写了以下代码来计算文件中的行数、字符数和单词数。我用过BufferedReader。

```
import java.io.*;

class FileCount
 {

public static void main(String args[]) throws Exception
{
    FileInputStream file=new FileInputStream("sample.txt");
    BufferedReader br=new BufferedReader(new InputStreamReader(file));
    int i;
    int countw=0,countl=0,countc=0;
    do
    {
        i=file.read();
        if((char)i==("\t"))
            countw++;
        else if((char)i=="\n")
            countl++;
        else
            countc++;

    }while(i!=-1);
    System.out.println("Number of words"+countw);
    System.out.println("Number of lines"+countw);
    System.out.println("Number of characters"+countc);
}
} 
```

问题是我只能使用缓冲阅读器。我知道我们无法比较我在代码中完成的字符和字符串。这段代码还有其他出路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:38:16.240

首先，您需要实际阅读`BufferedReader`- 但如上所述，您真的忽略了您甚至拥有这个。而不是`file.read()`，你需要做的`br.read()`。

`file`您使用当前方法可能已经观察到的部分问题是，在附加 a 后直接从 读取时，您可能会丢失字符`BufferedReader`。可能会从流中`BufferedReader`预先读取字符以填充缓冲区 - 因此直接读取`file`将导致这些字符被遗漏。

那么，你是对的，你不能比较字符和字符串 - 所以比较字符：

```
if((char)i == ('\t'))
  countw++;
else if((char)i == '\n')
  countl++; 
```

一旦你解决了这些问题，我希望你会发现其他问题 - 但希望这足以让你开始。（例如，您的单词是否真的由制表符分隔 - 或者您是否要查找空格等？）

# c++ - Netbeans下无DLL依赖Mingw

> ID：15055733
> 
> 赞同：0
> 
> 时间：2013-02-24T19:35:20.413
> 
> 标签：c++, netbeans, mingw

我正在尝试使用 Mingw 和 Netbeans 回到 C++，但如果在另一台 PC 上运行，所有发布的 .exe 都需要一些 .dll 文件。

我应该怎么做才能将这些库添加到已发布的 .exe 文件中。【我没有太多真正的C++编程经验】

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:13:24.503

请告诉我们缺少哪些 dll。但通常你可以在`bin`mingw 的文件夹中找到它们。如果您发布您的程序，请将这些 dll 放在您的 exe 所在的位置。

替代方案：使用静态链接

## 编辑：

1.  `bin`您可以从您的 mingw 安装文件夹中获取此文件。复制到你的exe
2.  使用链接器标志编译：`-static-libstdc++`和`-static-libgcc`

# javascript - 如何从其他咖啡脚本文件导入文件

> ID：15055735
> 
> 赞同：1
> 
> 时间：2013-02-24T19:35:23.547
> 
> 标签：javascript, coffeescript

我正在尝试避免在我的咖啡脚本文件中出现重复的导入语句。

假设我需要从我所有的 *.coffee 中的这三个文件中导入

```
#import "../node_modules/moment/moment.js"
#import "../testhelpers.js"
#import "../tuneup/tuneup.js" 
```

如何避免代码重复？我试过了

1.  创建一个单独的帮助咖啡文件并导入它
2.  创建一个单独的帮助 JS 文件并导入它

但两者都没有奏效。

这不是一个 Web 应用程序，因此 javascript 的大小和不必要的 JS 加载不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:44:42.100

如果您使用的是 node.js，则使用 require：

```
moment = require "../node_modules/moment/moment.js"
testhelpers = require "../testhelpers.js"
tuneup = require "../tuneup/tuneup.js" 
```

此外，您需要在要导入的文件中使用导出对象。

例如在 moment.js 中：

```
exports.somefunc = (foo) -> console.log(foo) 
```

然后，当您导入时：

```
moment = require "../node_modules/moment/moment.js"
moment.somefunc("hello world") 
```

`exports`当您调用 require 时，将无法访问任何未绑定的内容。

# java - java中的费马方程

> ID：15055737
> 
> 赞同：1
> 
> 时间：2013-02-24T19:35:45.967
> 
> 标签：java, math, recursion

我正在尝试使用费马的最后一个方程制作一个递归分析程序，但它不断返回我不明白的方程是错误的？

```
public class fermatdata 
{
    public static void data(int a, int b, int c, int n)
    {
        if ((Math.pow(a, n)) + (Math.pow(b, n)) == (Math.pow(c, n)))
        {   
            System.out.println("Holy smokes, Fermat was wrong!");
            return;             
        }
        else
        {               
            data(a-1, b-1, c-1, n-1);
            if (n < 2)
            {                   
                return;                 
            }
            else
            {                   
                data(a-1, b-1, c-1, n-1);                   
            }               
        }
        System.out.println("No, that doesn't work. Fermat was right");          
    }       
    public static void main(String[] args)
    {
        System.out.println("Fermat's last theorem stated that the formula a^n + b^n = c^n while n>2 and all of the numbers are integers will never be correct. Here I am going to do an analysis with all the numbers starting at 100,000 and count backwords to 3");
        data(100000, 100000, 100000, 100000);   
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:45:50.203

尝试像这样删除第一行：

```
 data(a-1, b-1, c-1, n-1); 
```

好的，现在看看 Math.pow(100000,100000) 给出了什么（无穷大）。我认为问题在于您使用的值太高（至少对于 n）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:51:34.243

问题是你使用的权力导致“无限”，因为数字太大了。

由于 'Infinity==Infinity' 程序声明该行

```
 ((Math.pow(a, n)) + (Math.pow(b, n)) == (Math.pow(c, n))) 
```

是正确的

# java - SQLite 光标崩溃

> ID：15055739
> 
> 赞同：0
> 
> 时间：2013-02-24T19:35:50.250
> 
> 标签：java, android, sqlite, cursor

我的 SQLite 类有问题。事实上，我正在学习如何在 android 上设置（更新和读取）数据库，并且我成功地在数据库上写入，但是当我尝试读取信息并将它们显示在屏幕上时，我的应用程序就崩溃了。
我搜索了问题，发现崩溃的原因是Cursor。我评论了光标的方法，所以如果有人可以帮助我，我将不胜感激。

这是我的数据库类。

```
 package com.example.sqlprogramming;

    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseClass {
public static final String KEY_ROWID = "_id"; 
public static final String KEY_NAME = "person_name";
public static final String KEY_RATE = "person_rate";
private static final String DATABASE_NAME = "HotOrNotdb"; 
private static final String DATABASE_TABLE = "peopleTable"; 
private static final int DATABASE_VERSION = 2; 

private Dhelper ourHelperdb; 
private final Context ourContext; 
private SQLiteDatabase ourDatabase; 
private static class Dhelper extends SQLiteOpenHelper{

    public Dhelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("create table if not exists " + DATABASE_TABLE + " (" + 
        KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
        KEY_NAME + "VARCHAR NOT NULL, " + 
        KEY_RATE + "VARCHAR NOT NULL);");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }

}
public DatabaseClass(Context c){
    ourContext = c; 
}
public DatabaseClass open() throws SQLException{
    ourHelperdb = new Dhelper(ourContext); 
    ourDatabase = ourHelperdb.getWritableDatabase();
    return this; 
}
public void close(){
    ourHelperdb.close();
}
public long addEntry(String personName, String personHotness) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, personName);
    cv.put(KEY_RATE, personHotness);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}
            //HERE IS MY PROBLEM WITH THE CURSOR 
public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_RATE};
    String result = "hello"; 
    Cursor c = ourDatabase.query(true, DATABASE_TABLE, columns, null, null, null, null, null, null);

    int iRowId = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iRate = c.getColumnIndex(KEY_RATE);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            result = result + c.getString(iRowId) + " " + c.getString(iName) +" " + c.getString(iRate) + "\n";
    }

    c.close();
    return result;
}
    } 
```

而这个类调用数据库类，应该从数据库中获取信息以将其显示在屏幕上。

```
package com.example.sqlprogramming;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class SQLview extends Activity{
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.layout_sqlview);
    TextView textInfo = (TextView) findViewById (R.id.tvSQLinfo); 
    DatabaseClass info = new DatabaseClass(this);
    info.open(); 
    String _data = info.getData();
    info.close();
    textInfo.setText(_data);
}
} 
```

再次感谢你。我很快就会发布 stacktrace 和 logcat。

这是我的 Logcat/Stacktrace

```
02-24 20:08:12.378: E/Curosr!(1221): I got an error here : 
02-24 20:08:12.378: E/Curosr!(1221): android.database.sqlite.SQLiteException: no such     column: person_name (code 1): , while compiling: SELECT _id AS _id, person_name, person_rate FROM peopleTable
02-24 20:08:12.378: E/Curosr!(1221):    at                 android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
02-24 20:08:12.378: E/Curosr!(1221):    at     android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
02-24 20:08:12.378: E/Curosr!(1221):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
02-24 20:08:12.378: E/Curosr!(1221):    at com.example.sqlprogramming.DatabaseClass.getData(DatabaseClass.java:75)
02-24 20:08:12.378: E/Curosr!(1221):    at com.example.sqlprogramming.SQLview.onCreate(SQLview.java:14)
02-24 20:08:12.378: E/Curosr!(1221):    at android.app.Activity.performCreate(Activity.java:5104)
02-24 20:08:12.378: E/Curosr!(1221):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-24 20:08:12.378: E/Curosr!(1221):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-24 20:08:12.378: E/Curosr!(1221):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-24 20:08:12.378: E/Curosr!(1221):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-24 20:08:12.378: E/Curosr!(1221):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-24 20:08:12.378: E/Curosr!(1221):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-24 20:08:12.378: E/Curosr!(1221):    at android.os.Looper.loop(Looper.java:137)
02-24 20:08:12.378: E/Curosr!(1221):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-24 20:08:12.378: E/Curosr!(1221):    at java.lang.reflect.Method.invokeNative(Native Method)
02-24 20:08:12.378: E/Curosr!(1221):    at java.lang.reflect.Method.invoke(Method.java:511)
02-24 20:08:12.378: E/Curosr!(1221):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-24 20:08:12.378: E/Curosr!(1221):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-24 20:08:12.378: E/Curosr!(1221):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:38:57.070

如果您正在阅读，则需要使用：

```
ourDatabase = ourHelperdb.getReadableDatabase(); 
```

当您打开数据库时，您将其设置为写入。

（这是我的第一个猜测，发布堆栈跟踪）。

这是我的一些关于如何读取游标的代码的工作示例：

```
mDb = mDbHelper.getReadableDatabase();

Cursor c = mDb.query("Timesheets", new String[] {
        KEY_TIMESHEETS_ROWID + " AS _id", KEY_TIMESHEETS_DESCRIPTION,
        KEY_TIMESHEETS_TITLE, KEY_TIMESHEETS_DATE_START,
        KEY_TIMESHEETS_DATE_END, KEY_TIMESHEETS_INVOICED,
        KEY_TIMESHEETS_PROJECTID }, "timesheet_id = ?",
        new String[] { String.valueOf(timesheetId) }, null, null, null);

c.moveToFirst();

SimpleDateFormat dateFormat = new SimpleDateFormat(
        "yyyy-MM-dd HH:mm:ss");

Timesheet timesheet = new Timesheet();

while (c.isAfterLast() == false) {

    timesheet.setTimesheetId(c.getInt(0));

    // ...

    c.moveToNext();
}

c.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:15:14.830

您的 create 语句缺少几个空格。尝试使用：

```
 db.execSQL("create table if not exists " + DATABASE_TABLE + " (" + 
    KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
    KEY_NAME + " VARCHAR NOT NULL, " + 
    KEY_RATE + " VARCHAR NOT NULL);"); 
```

根据您当前的陈述，您的最后两个列名`person_nameVARCHAR`变为`person_rateVARCHAR`

# android - 从 zip 文件播放媒体而不解压缩

> ID：15055747
> 
> 赞同：6
> 
> 时间：2013-02-24T19:36:31.137
> 
> 标签：android, zip, android-mediaplayer

我知道在 SO 上已经有一些这样的问题，但它们与在播放文件之前提取文件有关。

[在此处](http://developer.android.com/google/play/expansion-files.html)的 Android 文档中，它解释说您可以直接从 .zip 文件播放文件而无需解压缩。

> 提示：如果您将媒体文件打包到 ZIP 中，您可以对带有偏移和长度控件（例如 [MediaPlayer.setDataSource()](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.io.FileDescriptor,%20long,%20long%29)和 SoundPool.load()）的文件使用媒体播放调用，而无需解压缩 ZIP。为了使其正常工作，您在创建 ZIP 包时不得对媒体文件执行额外的压缩。例如，使用 zip 工具时，应使用 -n 选项指定不应压缩的文件后缀：
> 
> zip -n .mp4;.ogg main_expansion media_files

我制作了一个（未压缩的）zip 包，但我不知道如何从 a`ZipEntry`到 a `FileDescriptor`，他们也没有进一步解释。如何在`FileDescriptor`不解压缩 zip 文件的情况下获得一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-20T11:11:36.870

即使您的应用中没有使用 APK 扩展，您也可以使用**APK 扩展 Zip 库来执行此操作。**

按照此文档获取库：[使用 APK 扩展 Zip 库](http://developer.android.com/google/play/expansion-files.html#ZipLib)

使用您最喜欢的压缩工具压缩您的声音文件**而不进行压缩。**

使用此代码加载音乐：

```
ZipResourceFile expansionFile = new ZipResourceFile("myZipFile.zip");
AssetFileDescriptor assetFileDescriptor = expansionFile.getAssetFileDescriptor("myMusic.mp3");
try {
    mediaPlayer.setDataSource(assetFileDescriptor.getFileDescriptor());
    mediaPlayer.prepare();
    mediaPlayer.start();
}
catch (IOException e) {
    // Handle exception
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-31T10:15:42.417

这个问题最近没有很多解决方案，所以我也被困在这个问题上——直到我在试图读取 zip 文件的函数中创建了一个新的 MediaPlayer 实例。突然开始播放没有问题。现在，相反，我将我的（全局）MediaPlayer 传递给这样的函数：（Kotlin）

```
private fun preparePlayer(mp: MediaPlayer, position: Int) {

    // Path of shared storage
    val root: File = Environment.getExternalStorageDirectory()
    Log.i("ROOT", root.toString())

    // path of the zip file
    val zipFilePath = File(root.absolutePath+"/Android/obb/MY_PACKAGE_NAME/MY_ZIP_FILE.zip")

    // Is zip file recognized?
    val zipFileExists = zipFilePath.exists()
    Log.i("Does zip file exist?", zipFileExists.toString())

    // Define the zip file as ZipResourceFile
    val expansionFile = ZipResourceFile(zipFilePath.absolutePath)

    // Your media in the zip file
    val afd = expansionFile.getAssetFileDescriptor("track_01.mp3")

    // val mp = MediaPlayer()   // not necessary if you pass it as a function parameter
    mp.setDataSource(afd.fileDescriptor, afd.startOffset, afd.length)
    mp.prepare()
    mp.start()   // Music should start playing automatically 
```

也许这可以帮助别人。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T04:46:26.850

```
try {
    ZipFile zf= new ZipFile(filename);
    ZipEntry ze = zip.getEntry(fileName);
    if (ze!= null) {
        InputStream in = zf.getInputStream(ze);
        File f = File.createTempFile("_AUDIO_", ".wav");
        FileOutputStream out = new FileOutputStream(f);
        IOUtils.copy(in, out);
        // play f
    }
} catch (IOException e) {

} 
```

[可能重复的问题](https://stackoverflow.com/questions/8900249/can-android-mediaplayer-play-audio-in-a-zipped-file)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-26T17:47:02.790

如果您想在不解压缩的情况下使用 zip 中的媒体文件，您还必须将起始偏移量和长度添加到`setDataSource`.

```
ZipResourceFile expansionFile = new ZipResourceFile("myZipFile.zip");
AssetFileDescriptor assetFileDescriptor = expansionFile.getAssetFileDescriptor("myMusic.mp3");
try {
    mediaPlayer.setDataSource(assetFileDescriptor.getFileDescriptor(),
                              assetFileDescriptor.getStartOffset(),
                              assetFileDescriptor.getLength());
    mediaPlayer.prepare();
    mediaPlayer.start();
}
catch (IOException e) {
    // Handle exception
} 
```

# cookies - 与语言无关的 cookie 编码/解码标准

> ID：15055749
> 
> 赞同：8
> 
> 时间：2013-02-24T19:36:42.230
> 
> 标签：cookies, encoding, language-agnostic, decoding, web-standards

无论后端平台如何，我都很难弄清楚编码/解码 cookie 值的标准是什么（或者有什么标准？）。

根据[RFC 2109](http://www.ietf.org/rfc/rfc2109.txt)：

> VALUE 对用户代理是不透明的，可以是源服务器选择发送的任何内容，可能是服务器选择的可打印 ASCII 编码。“不透明”意味着内容仅对原始服务器感兴趣和相关。事实上，任何检查 Set-Cookie 标头的人都可以读取该内容。

这听起来像“服务器是老板”，它决定了编码将适用什么。这使得从 PHP 后端设置 cookie 并从 Python 或 Java 或其他任何方式读取它变得非常困难，而无需在双方都编写任何手动编码/解码处理。

假设我们有一个需要编码的值。俄语`/"печенье (*} значения"/`的意思是“cookie 值”，其中包含一些额外的非字母数字字符。

**Python：**

几乎每个 WSGI 服务器都这样做并使用 Python 的[SimpleCookie类，该类对](http://docs.python.org/2/library/cookie.html#Cookie.SimpleCookie)[八进制文字](http://hg.python.org/cpython/file/2.7/Lib/Cookie.py#l235)进行编码/解码，尽管许多人说八进制文字在 ECMA-262 严格模式下[已被贬低。](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Integers)什么？

因此，我们的原始 cookie 值变为`"/\"\320\277\320\265\321\207\320\265\320\275\321\214\320\265 (*} \320\267\320\275\320\260\321\207\320\265\320\275\320\270\321\217\"/"`

**节点.js：**

根本没有测试过，但我只是猜测 JavaScript 后端会使用使用[十六进制](http://mathiasbynens.be/notes/javascript-escapes#hexadecimal)转义/取消转义的本机[encodeURIComponent](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)和[decodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent)函数来做到这一点？

**PHP：**

PHP 将[urlencode](http://php.net/manual/en/function.urlencode.php)应用于类似于[encodeURIComponent](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)但不完全相同的 cookie 值。

所以原始值变成了；`%2F%22%D0%BF%D0%B5%D1%87%D0%B5%D0%BD%D1%8C%D0%B5+%28%2A%7D+%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F%22%2F`这甚至没有用双引号括起来。

然而; 如果 JavaScript`value`变量具有上面的 PHP 编码值，`decodeURIComponent(value)`则给出`/"печенье+(*}+значения"/`，请参阅“+”字符而不是空格。

**Java、Ruby、Perl 和 .NET 的情况如何？**哪种语言遵循（或最接近）期望的行为。实际上，W3对此是否有任何标准？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:11:27.557

我认为您在这里有些混乱。服务器的编码对客户端无关紧要，也不应该如此。这就是 RFC 2109 在这里想要表达的。

http 中 cookie 的概念与现实生活中的类似：支付俱乐部的入场费后，您的手腕上会得到一个墨水印章。这使您可以离开并重新进入俱乐部而无需再次付款。您所要做的就是向保镖展示您的手腕。在这个现实生活中的例子中，你并不关心它的样子，它甚至可能在普通光线下是不可见的——重要的是保镖能识别出它。如果您将其洗掉，您将失去重新进入俱乐部而无需再次付款的特权。

在 HTTP 中，同样的事情正在发生。服务器使用浏览器设置 cookie。当浏览器返回服务器时（阅读：下一个 HTTP 请求），它会将 cookie 显示给服务器。服务器识别 cookie，并采取相应的行动。这样的 cookie 可以像“WasHereBefore”标记一样简单。同样，浏览器理解它是什么并不重要。如果你删除你的 cookie，服务器就会表现得好像它以前从未见过你一样，就像那个俱乐部的保镖如果你洗掉了那个墨水印章一样。

今天，许多 cookie 只存储一个重要信息：会话标识符。其他所有内容都存储在服务器端并与该会话标识符相关联。该系统的优点是实际数据永远不会离开服务器，因此可以信任。存储在客户端的所有内容都可能被篡改，不应被信任。

**编辑：**在阅读您的评论并*再次*阅读您的问题之后，我想我终于理解了您的情况，以及为什么您对 cookie 的实际编码感兴趣，而不是仅仅将其留给您的编程语言：如果您有两个不同的软件环境相同的服务器（例如：Perl*和*PHP），您可能想要解码由其他语言设置的 cookie。在上面的例子中，PHP 必须解码 Perl cookie，反之亦然。

*数据在 cookie 中的存储方式没有标准*。该标准只说浏览器将*完全按照收到*的 cookie 发送回去。使用的编码方案是您的编程语言认为合适的。

回到现实生活中的例子，你现在有两个保镖，一个说英语，另一个说俄语。两者必须就一种类型的墨水印章达成一致。这很可能会涉及其中至少一个人学习另一个人的语言。

由于浏览器行为是标准化的，您可以在服务器上使用的所有其他语言中模仿一种语言编码方案，或者简单地在所有正在使用的语言中创建自己的标准化编码方案。您可能必须使用较低级别的例程，例如 PHP，`header()`而不是较高级别的例程，例如`start_session()`才能实现此目的。

顺便说一句：以同样的方式，决定如何存储服务器端会话数据的是服务器端编程语言。您不能`CGI::Session`使用 PHP 的`$_SESSION`数组来访问 Perl。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T00:00:45.157

不管 cookie 对客户端是不透明的，它仍然需要符合 HTTP 规范。[rfc2616](https://www.rfc-editor.org/rfc/rfc2616)指定所有 HTTP 标头都应为 ASCII (ISO-8859-1)。[rfc5987](https://www.rfc-editor.org/rfc/rfc5987)将其扩展为支持其他字符集，但我不知道它的支持范围有多广。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T07:21:32.607

我更喜欢编码成 UTF8 并使用 base64 编码进行包装。它快速、无处不在，并且永远不会在任何一端破坏您的数据。

即使在包装时，您也需要确保显式转换为 UTF8。其他语言和运行时，虽然支持 Unicode，但可能不会像许多 Windows API 一样在内部将字符串存储为 UTF8。根据我的经验，Python 2.x 很少在没有显式转换的情况下正确获取 Unicode 字符串。

编码：nativeString -> utfEncode() -> base64Encode()

解码：base64Decode() -> utfDecode() -> nativeString

这些天来，我所知道的几乎所有语言都支持这一点。您可以寻找通用的单功能编码，但我会谨慎行事并选择两步方法......尤其是使用外来字符集。

# c# - 在运行时添加图标

> ID：15055750
> 
> 赞同：0
> 
> 时间：2013-02-24T19:36:42.420
> 
> 标签：c#, winforms

我有一个gui。我正在单击按钮以编程方式从原始表单创建一个新表单。

```
Form frm1 = new Form();
frm1.ShowDialog(); 
```

我还想在此表单中添加图标（默认除外）。我看了看主表单是如何添加图标的，我发现了

```
this.Icon = ((System.Drawing.Icon)(resources.GetObject("$this.Icon"))); 
```

我怎样才能对新表单做同样的事情，我应该在哪个目录中放置新图标？（从我上面发布的主表单的自动生成代码中不清楚）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:03:35.600

你有2个选项在这里

1) 如果你有一个扩展名为 .ico 的文件，你可以使用 Icon 的类构造函数加载它

```
string pathToIconFile = ...
this.Icon = new Icon(pathToIconFile); 
```

2）您可以在Properties项目文件夹中创建一个图标资源。当您打开“属性”时，单击 Resources.resx，然后单击“添加资源”->“添加新图标”菜单项。这将创建一个图标。您还可以将现有文件中的图标加载到资源中，在这种情况下，图标将构建在您的可执行文件中。与选项 1 的不同之处在于，您不需要将图标文件与可执行文件一起分发，因此它可以在运行时加载（记住 pathToIconFile）因此，当您的图标作为资源添加时，它将被赋予一些名称。如果它是 myIconResource ，您可以像这样设置表单的图标：

```
this.Icon = Properties.Resource.myIconResource; 
```

# javascript - Javascript 表单验证

> ID：15055765
> 
> 赞同：1
> 
> 时间：2013-02-24T19:38:23.183
> 
> 标签：javascript

我想知道，是否有一个 JavaScript 命令（我正在寻找的东西的正确名称是什么？）我可以在其中选择表单中的所有输入框，而不仅仅是一个？

例如：

```
 function checkform(id){
var theForm = document.getElementById( id );
if (theForm.surname.value == '') {
  alert( "you didn't type in your surname");
  theForm.surname.focus();
  return false;
}
else if (theForm.surname.value.length == 0) {
  alert( 'You\'ve left some of the fields blank' );
  theForm.surname.focus();
  return false;
}
return true;
} 
```

我有这个代码。其目的是检查表单中的每个输入框以查看是否已输入信息，如果没有，则在用户提交表单时出现警报。

有没有一种方法可以更改这段 JavaScript 以检查每个输入框，而不仅仅是姓氏（如示例中所示）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:42:48.863

该方法`getElementsByTagName`可以为您提供所有输入，该`elements`属性将保存表单中所有控件的 NodeList。

```
var nodeList = theForm.getElementsByTagName('input'); 
```

或者

```
var nodeList = theForm.elements; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:43:08.133

我认为你需要这个`document.getElementsByTagName()`方法。您可以将其与您当前的功能联系起来，如下所示：

```
var inputs = document.getElementsByTagName('input'), // get all input tags in the document
    i = 0, // set counter to zero
    l = inputs.length; // get number of inputs you have found
for (i; i < l; i += 1) { // loop through the inputs you have found
    checkform(inputs[i].id); // send the id of each input to the `checkform` method
} 
```

当然，您可能想要重写必须使其更高效的函数，但您可能会将其直接放入您的代码中（在`checkform`函数之外），它应该做您想做的事情。

# python - Python隐藏错误

> ID：15055766
> 
> 赞同：0
> 
> 时间：2013-02-24T19:38:26.703
> 
> 标签：python, python-3.3

好吧，我对 python 还很陌生，我正在制作一个控制台女巫，它将允许多种功能，其中之一是获取页面源并将其打印在页面上，或者如果他们有另一个 arg 则命名该 arg 的文件...第一个参数将是从中获取源的网站 url。

我的进口是：

```
import os, urllib.request 
```

这是我的代码：

```
def grab(command, args, argslist):
    if args == "":
        print("The " + command + " command wan't used correctly type help " + command + " for help...")
    if args != "":
        print("This may take a second...")
        try:
            argslistcheck = argslist[0]
            if argslistcheck[0:7] != "http://":
                argslist[0] = "http://" + argslist[0]
            with urllib.request.urlopen(argslist[0]) as url:
                source = url.read()
                source = str(source, "utf-8")
        except IndexError:
            print("Couln't connect")
            source = ""
        try:
            filesourcename = argslist[1] + ".txt"
            filesourceopen = open(filesourcename, "w")
            filesourceopen.write(source)
            filesourceopen.close()
            print("You can find the file save in " + os.getcwd() + " named " + argslist[1] + ".txt.")
        except IndexError:
            print(source) 
```

现在，虽然我现在可以改进我的代码，但我专注于要点。现在它可以工作了，我稍后会改进代码，唯一的问题是如果用户输入一个假网站或一个不存在的网站页面，那么它会返回很多错误。然而，如果我改变：

```
except IndexError:
    print("Coulnd't connect")
    source = "" 
```

只是：

```
except:
    print("Couldn't connect")
    source = "" 
```

然后总是说无法连接...

有什么帮助吗？我没有放其余代码，因为我认为它没有用，如果您需要它，我可以全部放上。

我命名这个隐藏错误的原因是因为它仍然可以工作，它只是说它无法连接，如果用户键入第二个参数，那么它会将源代码保存到他命名的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:53:27.490

```
try:
    argslistcheck = argslist[0]
    if argslistcheck[0:4] != "http://":
        argslist[0] = "http://" + argslist[0]
    with urllib.request.urlopen(argslist[0]) as url:
        source = url.read()
        source = str(source, "utf-8")
except IndexError:
    print("Couln't connect")
    source = "" 
```

在该代码块中，唯一可以引发`IndexError`异常的是`argslist[0]`. 如果该列表中没有元素，则会发生这种情况。这很可能不是您的问题。

现在如果输入了无效的地址，`urlopen`将会失败。但它不会提出一个`IndexError`，而是一个[`urllib.error.URLError`](http://docs.python.org/3.1/library/urllib.error.html#urllib.error.URLError)或更专业的[`urllib.error.HTTPError`](http://docs.python.org/3.1/library/urllib.error.html#urllib.error.HTTPError)。

如果你只是写`except IndexError`，你只会捕捉到那个错误，但不会捕捉到`urlopen`. 如果你也想抓住这些，你必须添加另一个`except`案例：

```
except IndexError:
    print('Argument is missing')
except urllib.error.URLError:
    print('Could not connect to the URL.') 
```

另一种方法是通过不指定任何异常来捕获*任何*异常（这是您在上一个代码中所做的）。请注意，通常不建议这样做，因为它会隐藏您可能不会发生的任何异常；即它将隐藏错误。因此，如果您知道只有少数可能的异常，只需捕获并明确处理它们。

# aptana - 保存远程文件的更改

> ID：15055767
> 
> 赞同：0
> 
> 时间：2013-02-24T19:38:34.207
> 
> 标签：aptana

我正在 aptana studio 中更改我的文件并保存我的更改。但是当我这样做时，我收到以下错误？这是为什么？

这是错误：

由于“打开文件失败”异常，无法保存远程文件。您想将文件保存在本地吗？

将感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T17:51:03.357

是的，这是文件权限问题。

确保您的远程服务器具有正确的权限。

```
chown -R YOURUSER:YOURGROUP . 
```

它很困惑，因为您可以打开阅读它，但是它无法通过烦人的对话框进行保存以将其保存在本地。

# java - 无法获得 PHP 脚本的结果

> ID：15055770
> 
> 赞同：0
> 
> 时间：2013-02-24T19:38:44.570
> 
> 标签：java, php, android, emulation

我有一个 PHP 脚本，它应该从我的数据库中返回一小部分 ID，它在浏览器中运行良好，但是当我尝试在我的应用程序中执行它时出现错误。

这是我的代码：

```
public static String makeCall(String scriptName) {
    String address = "http://10.0.2.2/" + scriptName + ".php";

    HttpPost httpPost = new HttpPost(address);
    HttpClient httpClient = new DefaultHttpClient();
    StringBuilder total = new StringBuilder();
    try {
        //httpPost.setEntity(new UrlEncodedFormEntity(params));

        // Execute HTTP Post Request
        HttpResponse response = httpClient.execute(httpPost);
        InputStream is = response.getEntity().getContent();
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        String line = "";
        // Read response until the end
        while ((line = rd.readLine()) != null) {
            total.append(line);
        }

        // Return full string
        //System.out.println(total.toString());

        return total.toString();
    } catch (Exception e) {
        System.out.println(total == null ? "null" : "notnull");
        Log.d("error", e.getMessage());
        Log.e("main", "connection error");
    }
    return "empty";
} 
```

堆栈跟踪：

```
02-24 19:30:08.583: I/System.out(1220): notnull 02-24 19:30:08.594:
D/AndroidRuntime(1220): Shutting down VM 02-24 19:30:08.594:
W/dalvikvm(1220): threadid=1: thread exiting with uncaught exception
(group=0x40a70930) 

E/AndroidRuntime(1220): FATAL EXCEPTION: main

java.lang.RuntimeException: Unable to start activity

ComponentInfo{com.example.phptest/com.example.phptest.MainActivity}:

java.lang.NullPointerException: println needs a message
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
at android.app.ActivityThread.access$600(ActivityThread.java:141) 
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99) 
at android.os.Looper.loop(Looper.java:137)      
at android.app.ActivityThread.main(ActivityThread.java:5039) 
at java.lang.reflect.Method.invokeNative(Native Method) 
at java.lang.reflect.Method.invoke(Method.java:511)      
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 
at dalvik.system.NativeStart.main(Native Method)      

Caused by: java.lang.NullPointerException:
println needs a message       
at android.util.Log.println_native(Native Method)      
at android.util.Log.d(Log.java:138) 
at com.example.phptest.MainActivity.makeCall(MainActivity.java:61) 
at com.example.phptest.MainActivity.onCreate(MainActivity.java:25) 
at android.app.Activity.performCreate(Activity.java:5104) 
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
 ... 11 more 
```

当我删除 Log 语句或首先检查它们是否为空时，我收到以下错误：

```
02-24 20:29:27.523: E/ActivityThread(648): Service
com.android.exchange.ExchangeService has leaked ServiceConnection
com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0ce98
that was originally bound here

E/ActivityThread(648): android.app.ServiceConnectionLeaked: Service
com.android.exchange.ExchangeService has leaked ServiceConnection
com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0ce98

that was originally bound here     

at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
at android.app.ContextImpl.bindService(ContextImpl.java:1418)
at android.app.ContextImpl.bindService(ContextImpl.java:1407) 
at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
at android.os.AsyncTask$2.call(AsyncTask.java:287)     
at java.util.concurrent.FutureTask.run(FutureTask.java:234)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:53:54.390

改变

```
Log.d("error", e.getMessage()); 
```

到

```
if (e.getMessage() != null) {
    Log.d("error", e.getMessage());
} 
```

# java - 如何使用 EJB 发送电子邮件

> ID：15055777
> 
> 赞同：-7
> 
> 时间：2013-02-24T19:39:38.250
> 
> 标签：java, email, jakarta-ee, ejb

我是 Java EE 的新手，对于我的项目，我需要发送一封电子邮件。如果有人能把步骤和一些代码，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:42:55.647

以下代码在 Google SMTP 服务器上运行良好。您需要提供您的 Google 用户名和密码。

```
import com.sun.mail.smtp.SMTPTransport;
import java.security.Security;
import java.util.Date;
import java.util.Properties;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class GoogleMail {
    private GoogleMail() {
    }

    /**
     * Send email using GMail SMTP server.
     *
     * @param username GMail username
     * @param password GMail password
     * @param recipientEmail TO recipient
     * @param title title of the message
     * @param message message to be sent
     * @throws AddressException if the email address parse failed
     * @throws MessagingException if the connection is dead or not in the connected state or if the message is not a MimeMessage
     */
    public static void Send(final String username, final String password, String recipientEmail, String title, String message) throws AddressException, MessagingException {
        GoogleMail.Send(username, password, recipientEmail, "", title, message);
    }

    /**
     * Send email using GMail SMTP server.
     *
     * @param username GMail username
     * @param password GMail password
     * @param recipientEmail TO recipient
     * @param ccEmail CC recipient. Can be empty if there is no CC recipient
     * @param title title of the message
     * @param message message to be sent
     * @throws AddressException if the email address parse failed
     * @throws MessagingException if the connection is dead or not in the connected state or if the message is not a MimeMessage
     */
    public static void Send(final String username, final String password, String recipientEmail, String ccEmail, String title, String message) throws AddressException, MessagingException {
        Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());
        final String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";

        // Get a Properties object
        Properties props = System.getProperties();
        props.setProperty("mail.smtps.host", "smtp.gmail.com");
        props.setProperty("mail.smtp.socketFactory.class", SSL_FACTORY);
        props.setProperty("mail.smtp.socketFactory.fallback", "false");
        props.setProperty("mail.smtp.port", "465");
        props.setProperty("mail.smtp.socketFactory.port", "465");
        props.setProperty("mail.smtps.auth", "true");

        /*
        If set to false, the QUIT command is sent and the connection is immediately closed. If set 
        to true (the default), causes the transport to wait for the response to the QUIT command.

        ref :   http://java.sun.com/products/javamail/javadocs/com/sun/mail/smtp/package-summary.html
                http://forum.java.sun.com/thread.jspa?threadID=5205249
                smtpsend.java - demo program from javamail
        */
        props.put("mail.smtps.quitwait", "false");

        Session session = Session.getInstance(props, null);

        // -- Create a new message --
        final MimeMessage msg = new MimeMessage(session);

        // -- Set the FROM and TO fields --
        msg.setFrom(new InternetAddress(username + "@gmail.com"));
        msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipientEmail, false));

        if (ccEmail.length() > 0) {
            msg.setRecipients(Message.RecipientType.CC, InternetAddress.parse(ccEmail, false));
        }

        msg.setSubject(title);
        msg.setText(message, "utf-8");
        msg.setSentDate(new Date());

        SMTPTransport t = (SMTPTransport)session.getTransport("smtps");

        t.connect("smtp.gmail.com", username, password);
        t.sendMessage(msg, msg.getAllRecipients());      
        t.close();
    }
} 
```

# ruby-on-rails - 为 Ruby 2.0 配置 Rails

> ID：15055783
> 
> 赞同：16
> 
> 时间：2013-02-24T19:40:05.443
> 
> 标签：ruby-on-rails, ruby, linux, macos, ruby-2.0

Ruby 2.0 已经发布，见：

[http://www.ruby-lang.org/en/news/2013/02/24/ruby-2-0-0-p0-is-released/](http://www.ruby-lang.org/en/news/2013/02/24/ruby-2-0-0-p0-is-released/)

将我的系统升级到 Ruby 2.0 后，我应该对我的 Rails 应用程序/安装进行哪些更改？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-24T20:20:44.317

所以这是我升级后必须做的。

Bundler 1.2.x 不兼容，它会引发一个错误，提示升级到 >= 1.3，该版本尚未发布。因此，如果您使用的是 RVM，请跳转到 2.0 ruby​​ 的全局 gemset 并升级到 1.3.pre 版本，直到 1.3.0 发布。rubygems api似乎也有问题。我的包安装没有使用新的 API，而是使用旧的“获取索引”方法，这当然需要更长的时间。

除此之外，我的包确实安装得很干净，我的全套规范测试都顺利完成。我做了一些计时测试，看看 Rails 加载时间改善了多少。

```
# Using 1.9.3-p327

RSpec Time: 24.87s
Wall Time : 34.40s
Load Time :  9.53s

# Using 2.0.0-p0

RSpec Time: 22.49s (90.4%)
Wall Time : 26.89s (78.2%)
Load Time :   4.4s (46.2%) 
```

显然，所有测试 gem 的 rspec 加载时间都稍长一些，但加载时间下降 50% 以上，测试运行时间下降 10% 还是不错的。

我做了一个类似的测试，使用`rails runner 'puts User.count'`它会跳过测试引导。

```
1.9.3 : 7.27s
2.0.0 : 3.36s (46.2%) 
```

再次，下降超过 50% :)

有点偏离轨道......我猜新玩具会这样做，但似乎我必须做的唯一改变是升级到预发布捆绑器。

这是对不同迭代器的另一个测试

```
$ rvm 1.9.3-p327,2.0.0-p0 --verbose do ruby test.rb
ruby-1.9.3-p327: ruby 1.9.3p327 (2012-11-10 revision 37606) [i686-linux] 
       user     system      total        real
for    0.610000   0.000000   0.610000 (  0.607189)
times  0.580000   0.000000   0.580000 (  0.587303)
upto   0.590000   0.000000   0.590000 (  0.585730)
each   0.590000   0.000000   0.590000 (  0.593494)
ruby-2.0.0-p0: ruby 2.0.0p0 (2013-02-24 revision 39474) [i686-linux] 
       user     system      total        real
for    0.590000   0.000000   0.590000 (  0.582743)
times  0.560000   0.000000   0.560000 (  0.565961)
upto   0.560000   0.000000   0.560000 (  0.562400)
each   0.570000   0.000000   0.570000 (  0.573469) 
```

边际，大约 4-5% 的收益。

更有趣的是，调用 Object.new 5 亿次

```
1.9.3 : 129.063s
2.0.0 :  97.234s 
```

对象创建时间减少了大约 25%。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T09:49:13.397

我用 rails 4 和 ruby​​ 2.0 开始了一个新项目。我就是这样做的。

首先，我将 RVM 设置为 Ruby 2.0。

然后安装捆绑器 1.3：

```
$ gem install bundler 
```

更新了这些 gem 和“捆绑安装”。

```
gem 'rails',     :git => 'git://github.com/rails/rails.git'
gem 'journey',   :git => 'git://github.com/rails/journey.git'
gem 'arel',      :git => 'git://github.com/rails/arel.git'

group :assets do
  gem 'sass-rails',   :git => 'git://github.com/rails/sass-rails.git'
  gem 'coffee-rails', :git => 'git://github.com/rails/coffee-rails.git'
end 
```

# ios - 从添加为子视图的视图控制器加载新的视图控制器

> ID：15055793
> 
> 赞同：0
> 
> 时间：2013-02-24T19:40:51.723
> 
> 标签：ios, uiviewcontroller, pagination

您好我在我的项目中使用以下库[https://github.com/firebaseco/FireUIPagedScrollView](https://github.com/firebaseco/FireUIPagedScrollView)我已经添加了一些视图控制器作为页面。我现在的问题是，当用户在作为页面加载的一个视图控制器上选择一个按钮时，该页面只是替换为我的新视图控制器，而不是保存页面的视图控制器。任何人都知道当在其中一个页面上按下某些东西时我可以如何移动到一个全新的视图控制器？

我用来从页面加载我的其他视图寻呼机的代码如下

```
 WebViewController *dvController = [[WebViewController alloc] initWithNibName:@"WebViewController" bundle:[NSBundle mainBundle]];
    dvController.url = url;
    UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:dvController];
    nc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:nc animated:YES]; 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:56:13.207

简单的解决方案最终是在页面中创建一个属性并将其设置在已添加页面的 ViewController 中

在 Page.h 中

```
@property (nonatomic, retain) UINavigationController *navController; 
```

在 Page Holding View Controller 中，将属性设置为持有者 navigationController

```
Page  *pageVC = [[Page alloc] initWithNibName:@"Page" bundle:nil];
pageVC.navController = self.navigationController; 
```

然后在 Page.m 中，当我想推送新的视图控制器时，只需在推送新的视图控制器时使用 now set 属性

```
@synthesize navController
...
NewViewController *dvController = [[NewViewController alloc] initWithNibName:@"NewViewController" bundle:[NSBundle mainBundle]];
[self.navController pushViewController:dvController animated:NO]; 
```

# c# - 在 ListView 控件中访问 TextBox 控件

> ID：15055797
> 
> 赞同：3
> 
> 时间：2013-02-24T19:41:37.970
> 
> 标签：c#, asp.net

如何访问“ListView”控件中的“TextBox”控件？

例如，我想`this.AddCommentTextbox.Text`在代码隐藏中使用属性。

asp代码：

```
 <asp:ListView ID="PostsListView" runat="server" DataSourceID="EntityDataSourcePosts">
   <ItemTemplate>
     <asp:TextBox Text="active" ID="AddCommentTextbox" runat="server"  TextMode="MultiLine" Height="100" Width="370"></asp:TextBox>
   </ItemTemplate>
 </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:53:29.823

你可以尝试这样的事情：

```
TextBox tmpControl = (TextBox)PostsListView.FindControl("AddCommentTextbox"); 
```

然后你可以用 tmpControl.text 做点什么

希望有帮助。

# php - Zend框架插件共享库的一种方法

> ID：15055798
> 
> 赞同：0
> 
> 时间：2013-02-24T19:41:57.030
> 
> 标签：php, zend-framework, architecture, shared-libraries

搜索我注意到通常在基于 Zend 框架的应用程序中，插件位于库文件夹中。但我正在尝试以不同的应用程序使用相同的插件库的方式工作。

我的直觉告诉我，如果其他应用程序可以使用这些插件，这些插件应该在应用程序外部。我想要做的是我的 ZF 应用程序的插件库。我正在寻找的结构是这样的：

```
www/
    zf-app-1/
    zf-app-2/

www-library/
    zf-my-plugins/
        database/
            EnttityManager.php
            DoctrineEntityManager.php 
```

因此，zf-app-1 和 zf-app-2 使用相同的外部插件。我可能是错的，但这种方法对我来说比 zf-app-1 更合乎逻辑，并且 zf-app-2 在你的库中拥有每个相同插件文件夹的副本。你想对我的想法发表意见吗？

但我的问题是关于如何配置应用程序 zf-app-1 和 zf-app-2 以使用这个共享库。我会通过每个的application.ini 来完成。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T22:00:55.430

如果您想要一个项目文件夹之外的共享库，如下所示：

*stuff/projects/zfproject1*
*stuff/projects/zf2project2*
*stuff/projects/zf2project3*
......
*stuff/shared/library* <--- 共享库进入这里

让我们假设一个名为*MyLib的共享库*

*东西/共享/库/MyLib*

您将需要

1.  将库文件夹添加到包含路径
2.  将库命名空间添加到自动加载器

你的应用程序.ini：

```
autoloaderNamespaces[] = "MyLib_"
includePaths.library = APPLICATION_PATH "/../../../library" 
```

# c++ - 字符串数组中出现次数最多的元素

> ID：15055800
> 
> 赞同：0
> 
> 时间：2013-02-24T19:42:08.023
> 
> 标签：c++, arrays, string

我需要在字符串数组中找到出现次数最多的元素。我不确定该怎么做，因为我对此没有太多经验。我不知道指针/哈希表。

我已经为整数做了这个，但我不能让它适用于字符串。

我的版本：

```
#include <iostream>
using namespace std;
int main(int argc, char *argv[])
{
    int a[]={1,2,3,4,4,4,5};
    int n = sizeof(a)/sizeof(int );
    int *b=new int [n];
    fill_n(b,n,0); // Put n times 0 in b

    int val=0; // Value that is the most frequent
    for (int i=0;i<n;i++)
        if( ++b[a[i]] >= b[val])
            val = a[i];

    cout<<val<<endl;
    delete[] b;
    return 0;
    } 
```

感谢您在字符串数组中查找最频繁出现的元素的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:12:38.303

首先，考虑使用像向量这样的 C++ 容器而不是普通数组。（如果需要，搜索“数组到向量”或类似的在它们之间进行转换。）

然后，如果你可以使用 C++11，你可以做这样的事情（如果没有 C++11，它会变得有点冗长，但仍然可行）：

```
std::string most_occurred(const std::vector<std::string> &vec) {
  std::map<std::string,unsigned long> str_map;
  for (const auto &str : vec)
    ++str_map[str];

  typedef decltype(std::pair<std::string,unsigned long>()) pair_type;

  auto comp = [](const pair_type &pair1, const pair_type &pair2) -> bool {
    return pair1.second < pair2.second; };
  return std::max_element(str_map.cbegin(), str_map.cend(), comp)->first;
} 
```

* * *

这是与旧 C++ 兼容的版本

```
bool comp(const std::pair<std::string,unsigned long> &pair1,
          const std::pair<std::string,unsigned long> &pair2) {
  return pair1.second < pair2.second;
}

std::string most_occurred(const std::vector<std::string> &vec) {
  std::map<std::string,unsigned long> str_map;
  for (std::vector<std::string>::const_iterator it = vec.begin();
       it != vec.end(); ++it)
    ++str_map[*it];
  return std::max_element(str_map.begin(), str_map.end(), comp)->first;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:28:25.703

您可以考虑使用字符串[向量](http://www.cplusplus.com/reference/vector/vector/)并使用[映射](http://www.cplusplus.com/reference/map/map)来计算出现次数：

```
#include <iostream>
#include <vector>
#include <map>

using namespace std;

int main(int argc, char *argv[])
{
  vector<string> a;
  map<string, int> m;

  // fill a with strings
  a.push_back("a");
  a.push_back("b");
  a.push_back("b");
  a.push_back("c");
  a.push_back("c");
  a.push_back("c");
  a.push_back("d");
  a.push_back("e");

  // count occurrences of every string
  for (int i = 0; i < a.size(); i++)
    {
      map<string, int>::iterator it = m.find(a[i]);

      if (it == m.end())
        m.insert(pair<string, int>(a[i], 1));

      else
        m[a[i]] += 1;
     }

  // find the max
  map<string, int>::iterator it = m.begin();
  for (map<string, int>::iterator it2 = m.begin(); it2 != m.end(); ++it2)
    {
      if (it2 -> second > it -> second)
      it = it2;
    }

  cout << it -> first << endl;  
  return 0;
} 
```

就优雅和效率而言，这个解决方案可能不是最好的，但它应该给出这个想法。

# mysql - 哪些数据库即服务提供商（最好是 Mongo 或 MySQL 数据源）提供 REST API 以将数据检索为 JSON？

> ID：15055801
> 
> 赞同：0
> 
> 时间：2013-02-24T19:42:23.323
> 
> 标签：mysql, json, mongodb, cloud, mlab

我们希望将 iPhone 应用程序直接连接到云中的数据库。在 iPhone 应用程序中，我们想使用一些 REST API 从云数据库中检索数据。我们更喜欢使用 MySQL 或 Mongo 作为数据存储。

我们不希望在 AWS 或其他托管提供商上设置我们的数据库系统。我们想要一个提供开箱即用的数据库层的云服务。

哪些数据库即服务公司支持这一点，每个公司的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:14:43.103

我们环顾四周，似乎 MongoLab 是唯一提供 REST API 的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:27:13.923

Mongo 是用于 API 交互的出色数据库，因为查询语言使用 javascript 表达式。以下是在 Python 中实现的开源 API 库

1.  [昏昏欲睡的猫鼬](http://www.kchodorow.com/blog/2010/02/22/sleepy-mongoose-a-mongodb-rest-interface/)
2.  [前夕](https://github.com/nicolaiarocci/eve)

主要优势

*   JavaScript 可以处理数据检索的查询部分

主要劣势

*   上面的 API 库难以捕获复杂的查询

# html - 标题图像始终位于屏幕中间

> ID：15055804
> 
> 赞同：0
> 
> 时间：2013-02-24T19:42:31.450
> 
> 标签：html, css

我想为我的网站创建一个标题图像。

我想图像总是在中间会有站立。当某人的浏览器缩小时，中心的图像就会出现。现在我有一个例子，这个网站只包含 get there 不管如何完成。

[http://aarkcollective.com/](http://aarkcollective.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:32:51.907

@Leeish 有正确的想法。

另一种方法是使用以下css

```
.center_element {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -50px;   /* half of the height of the header */
    margin-left: -150px; /* half of the width of the header*/
} 
```

使用 HTML：

```
<img class="center_element" src="images/header_image.jpg" width="300" height="100"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:46:08.217

```
div{
    margin: 0 auto;
    width: [whatever]%;
} 
```

只要您的图像/div 具有固定的宽度或百分比以便缩放，它将保持居中，左右边距为`auto.`这可能是一个重复的问题，因此您可能应该四处寻找另一个答案。

**编辑**

我正在根据您的评论编辑我的答案。我做了这个小提琴来做我正在谈论的事情。[http://jsfiddle.net/P8eDT/](http://jsfiddle.net/P8eDT/)我`divs`在里面放了两个。一个有图像，一个没有，所以你可以看到。内部 div 是灵活的宽度，设置高度，并保持居中。第二个中的图像是“响应式”的，因为它始终与`div`. 据我所知，这正是他们在您发布的示例网站中所做的事情。下面发布的是 INNER div 的代码（即图像）。

```
#inner {
    width: 50%;
    height: 100px;
    margin: 0 auto;
    background-image: url(/path/to/image.jpg);
    background-size: cover;
    background-position: center;
} 
```

请注意，对于不支持`background-size:cover`. 我以前做过这个，我只是使用javascript来测量宽度/高度，我只是设置那个更长的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:45:54.290

你可以`position:fixed`在你的css中使用
说你的标题在你的css中有一个类`.header`和一个宽度和高度为800x50
的尝试：

```
.header{position:fixed; top:50%; left:50%; margin:-25px 0 0 -400px;} 
```

**编辑**如果你不希望它垂直居中`Leeish`有更好的解决方案

# c# - 如何修复 SqlException Time-out 在等待页面的缓冲区闩锁类型 2 (1:37660679)，数据库 ID 10

> ID：15055815
> 
> 赞同：6
> 
> 时间：2013-02-24T19:43:29.587
> 
> 标签：c#, asp.net, sql-server-2012, sqlexception

我运行了一个应用程序几个小时，然后突然：

SqlException 未被用户代码处理：

> 等待页面 (1:37660679)、数据库 ID 10 的缓冲区锁存器类型 2 时发生超时。

查看异常的详细信息显示它是“数字”“845”。错误代码和 HRESULT -2146232060

问题：如何解决或调试此问题？

*   我正在运行 ASP.NET C# .NET 4.5 和 SQL Server 2012。

*   我运行了 chkdsk 但没有发现任何错误。

日志中没有关于 845 事件的信息。这是我在应用程序日志中找到的一些内容（对于事件 ID 847）：

> 等待闩锁时发生超时：类 'FGCB_ADD_REMOVE'，id 00000004F146FBD8，类型 2，任务 0x00000004F60450C8：0，等待时间 300 秒，标志 0x1a，拥有任务 0x00000004EDC38928。继续等待。

有很多 847 看起来差不多。然后事件 id 为 846 的情况要少得多：

> 等待缓冲区锁存器时发生超时——类型 2，bp 00000004F96EE880，页面 1:37660679，stat 0x10b，数据库 ID：10，分配单元 ID：72057594048544768，任务 0x00000004D502E188：0，等待时间，300 秒，标志拥有 01任务 0x00000004D5316558。没有继续等待。

这是 847 事件的 xml 视图：

```
- <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
- <System>
  <Provider Name="MSSQLSERVER" /> 
  <EventID Qualifiers="16384">847</EventID> 
  <Level>4</Level> 
  <Task>2</Task> 
  <Keywords>0x80000000000000</Keywords> 
  <TimeCreated SystemTime="2013-02-24T19:21:54.000000000Z" /> 
  <EventRecordID>281870</EventRecordID> 
  <Channel>Application</Channel> 
  <Computer>xyz-PC</Computer> 
  <Security UserID="S-1-and-so-on" /> 
  </System>
- <EventData>
  <Data>FGCB_ADD_REMOVE</Data> 
  <Data>00000004F146FBD8</Data> 
  <Data>2</Data> 
  <Data>00000004D5316188</Data> 
  <Data>0</Data> 
  <Data>1200</Data> 
  <Data>1a</Data> 
  <Data>00000004EDC38928</Data> 
  <Binary>4F0300000A00000006000000540053002D005000430000000800000053006300680061006200650072000000</Binary> 
  </EventData>
  </Event> 
```

错误发生在一行

```
 db.SubmitChanges(); 
```

在监视窗口中，我可以看到：

```
db.GetChangeSet() {Inserts: 1, Deletes: 0, Updates: 0} System.Data.Linq.ChangeSet 
```

谷歌搜索显示了一些来自 microsoft 的修补程序，但它们仅适用于 SQL server 2008。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T22:32:06.603

在您的情况下，`FGCB_ADD_REMOVE`闩锁可能意味着文件由于自动增长而被扩展。这会导致大量等待和 IO 负载。

或者这可能只是一般 IO 过载服务器的症状（由于负载或由于磁盘故障）。是的，这可能只是一个症状，因为您也看到其他 IO 等待超时。

确定服务器磁盘是否过载（例如使用 perfmon）并改善情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T07:45:55.660

我建议检查/更改受影响的数据库以及可能的 tempdb 的自动增长设置。右键单击，属性，文件到达那里。然后，如果您只有默认设置（数据自动增长 1mb，日志自动增长 10%），请将其更改为 10mb 和 10mb。您可能也想对 tempdb 做类似的事情。通常将这些设置为适合您的数据库大小和使用的值。随着时间的推移，你会比我更了解这一点。

如果您知道“正确的大小”，您的数据库应该直接在文件属性页面中设置该大小并抢占任何相关的文件扩展错误。我的意思是，例如，如果您的数据库当前为 10GB，并且您预计在接下来的几周内您将添加另外 3 或 4 GB 的数据，那么只需将初始大小设置为 15GB。在估计可能的文件增长时，不要忘记索引也会占用空间。

一些更一般的“好管家”想法 -

确保您定期进行碎片整理。

根据 CPU 的数量考虑几个数据文件。如果可能，将数据文件和日志文件放在不同的磁盘上。

# android - android.database.Cursor：类还是接口？

> ID：15055816
> 
> 赞同：0
> 
> 时间：2013-02-24T19:43:34.347
> 
> 标签：android, android-sqlite

好的，我对此有点困惑......我知道在标准 Java 中，即使接口只是您指定方法的东西。所以我现在很惊讶地看到我正在尝试测试使用的教程代码（和甚至实例化）游标是根据 developer.android.com 的接口 那么，接口实际上可以在其中定义方法吗？我不认为.. 顺便说一句，如果有人在这里重新审视我以前的问题，我将非常感激：[Android 中简单 SQLite 测试的问题](https://stackoverflow.com/questions/15027767/problems-with-simple-sqlite-test-in-android)。如果您要查看它，请务必阅读评论。

# arrays - 一般编程，垂直添加两个数组

> ID：15055817
> 
> 赞同：-2
> 
> 时间：2013-02-24T19:43:41.117
> 
> 标签：arrays

我知道如何连接两个数组，但这并不是我想要在这里做的。假设我有这两个数组；

```
a = [1 2 3 0 5 0 7]
b = [1 0 3 0 0 6 0] 
```

我想将这些组合成一个新数组，以便值是

```
c = [1 2 3 0 4 6 7] 
```

基本上，如果两个数字相同，那么它将是那个数字。如果有一个数字和一个零，我希望它是那个数字。如果有两个零，我希望它为零。

我真的很感激任何帮助。谢谢你。首选通用编程语言的答案，但任何编码语言的帖子都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:45:59.477

假设`a.length`== `b.length`：

在 Java 中：

```
int[] c = new int[a.length];
for(int i=0; i < c.length; i++){
  if(a[i] > 0){
    c[i] = a[i];
  }else{
    c[i] = b[i];
  }
} 
```

这只是一个代码示例，不能充分说明您可能有 2 个不相同的非零值的情况。处理这将需要进一步的要求，并且是留给读者的练习。

# ruby-on-rails - 比较两个数据集，以确保管理员只能编辑其区域内的用户

> ID：15055819
> 
> 赞同：0
> 
> 时间：2013-02-24T19:43:50.477
> 
> 标签：ruby-on-rails, activerecord

我创建了一个`users`有很多`areas`（通过`subscriptions`）的应用程序。有些`users`人有这个`:admin`角色，这些用户也有很多`administrative_areas`（通过`administrations`。我正在努力寻找最好的方法来确保给定区域 A 的管理员进入用户索引页面，他们只能看到区域 A 中的其他用户，但不是这个区域之外的。我的模型设置如下：

```
class User < ActiveRecord::Base
  has_many :subscriptions
  has_many :areas, through: :subscriptions

  has_many :administrations
  has_many :administrative_areas, through: :administrations, :source => :area, :class_name => "Area"
end

class Area < ActiveRecord::Base      
  has_many :subscriptions
  has_many :users, :through => :subscriptions

  has_many :administrations
  has_many :admins, :through => :administrations, :class_name => "User", :source => :user
end 
```

我可以成功设置用户/管理员，但我正在努力获取正确的 ActiveRecord 查询以仅返回管理员的相关用户。

关于解决这个问题的任何想法，或更好的方法的建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:47:28.123

假设`@admin_user`某些具有管理员角色的用户。

```
 @admin_areas = User.joins(:subscriptions).where('subscriptions.area_id' => @admin_user.administrative_areas.map(&:id)) 
```

您可以对角色使用[cancan](https://github.com/ryanb/cancan) gem`manage`并为不同的角色提供控制。

**编辑：**您可以尝试以下内容

在用户.rb

```
scope :users_to_manage, lambda{ joins(:subscriptions).where('subscriptions.area_id' => current_user.administrative_areas.map(&:id)) #if you have access current_user in model 
```

在能力.rb

```
can :manage, Area.users_to_manage 
```

# django - 如何使用 Xapian 在 Django Haystack 中启用部分匹配

> ID：15055825
> 
> 赞同：3
> 
> 时间：2013-02-24T19:44:15.610
> 
> 标签：django, search, partial, django-haystack, xapian

我已经下载了 xapian-core 和 xapian-bindings 并通过以下命令安装了它们

```
./configure --prefix=/path/to/virtualenv
./configure --prefix=/path/to/virtualenv --with-python

pip install django-haystack xapian-haystack 
```

到目前为止，我的搜索与整个单词匹配一起工作，但无法弄清楚如何启用部分单词匹配。我什至尝试过使用 ngram 字段，但仍然没有运气。我已经尝试在谷歌上搜索并找不到任何明确的说明，所以希望这里有人可以帮助我。

# visual-c++ - 为 X64 平台重新编译 VC++ 6 代码

> ID：15055827
> 
> 赞同：2
> 
> 时间：2013-02-24T19:44:22.700
> 
> 标签：visual-c++, 64-bit

我有一个旧的 VC++ 6 代码编译为 DLL，我使用了很多年没有问题，现在我需要在 x64 应用程序中使用它，我可以重新编译旧代码以生成 X64 DLL 吗？我需要相同的 VC++ 6 IDE 还是其他编译器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:10:12.410

不幸的是，您的两个问题的答案都是：也许。

我很幸运为旧的 32 位 DLL 获取 VC++ 源代码并将其重新编译为 64 位。有时它是一个简单的重新编译。其他时候，必须进行微调。我最担心的是 32 位 DLL 是否依赖于您可能没有源代码的其他 32 位 DLL。在这种情况下，除非您拥有其他 DLL 的 64 位副本，否则您可能不走运。

现在，我从来没有尝试过用 VC++ 6 做到这一点。我用 Visual Studio 2010 做过。但是，Windows 平台 SDK 过去支持用 VC6 编译 64 位。我的理解是支持这个的 SDK 的最后一个版本是 2003 年 2 月的版本。我刚刚查看了 MSDN，但没有看到可供下载的内容。这并不意味着您无法获得一份副本（您可能已经拥有一份）。这确实意味着获取副本并不像访问 MSDN 并下载它那么容易。

现在，话虽如此，我的建议是使用更新的编译器来制作 64 位 DLL。假设 Windows，只要您安装了 64 位工具，所有最新的 Visual Studio 编译器（2008、2010、2012）都将执行 64 位。

# php - 如何使用 AJAX 调用 PHP 函数从 MySQL 数据库中正确选择和显示（或插入）数据？

> ID：15055829
> 
> 赞同：0
> 
> 时间：2013-02-24T19:44:27.170
> 
> 标签：php, mysql, ajax, function, jquery

到目前为止，我有这样的事情：

```
//HTML
<body onload=getRoomTemp();>

//JS
function getRoomTemp() {
$.ajax({
    type: "POST",
    url: "getRoomTemp.php",
    datatype: "text";
    data: {
        temp: temp
    }
}).done(function () { $('#getRoomTemp').append(text); });
}

//PHP
<?php
if (isset($_POST['temp'])) {
require('database.php');

$query = ("SELECT temp FROM tempWHERE tempID=1");

$res = mysql_query($query) or die("ERROR ".__LINE__.": ".mysql_error());
while ($ar = mysql_fetch_array($res)) {
    $temperatureIn = $ar['temp'];
    echo $temperatureIn;
    }
}
?> 
```

因此，当我的 HTML 正文加载时，我想使用 AJAX 在名为“getRoomTemp”的 div 中进行查询并显示查询结果。稍后，我将需要相同的技术在单击按钮时在 MySQL 中插入数据（单个数值）。

我找不到当前代码的问题，为 ajax 尝试了不同的 dataType 但没有成功。请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:48:44.190

您有 2 个未定义的标识符`temp`，`text`请尝试

```
function getRoomTemp() {
  $.ajax({
    type: "POST",
    url: "getRoomTemp.php",
    dataType: "text",
    data: {
        temp: 'temp'
    }
  }).done(function (text) { $('#getRoomTemp').append(text); });
} 
```

# javascript - 如何将文本中的空间转移到新页面？

> ID：15055832
> 
> 赞同：0
> 
> 时间：2013-02-24T19:44:51.547
> 
> 标签：javascript, jquery, regex, firefox

当用户单击“下一步”按钮时，来自两个单独文本框的数据将被传输到新页面，但有 %20 代替空格。我怎样才能避免这种情况？

来自 originalpage.html 的内联 javascript

```
$('#next').click(function(){
        var coachFullName = $('#coach_txt_box').val();
        var teamName = $('#team_txt_box').val();
        if(!!coachFullName){
window.location.href = 'newpage.html?zip=' + coachFullName + teamName;
        } else {
            $('# coach_txt_box').watermark('please enter coach name',{className: 'watermarkError'});
        }
    }); 
```

来自 newpage.html 的内联 javascript

```
function getParameterByName(name)
{
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.search);
    if(results == null)
        return "";
    else
        document.signupform.coach_and_team_name.value = results[1];
        return decodeURIComponent(results[1].replace(/\+/g, " "));
}

getParameterByName('coach'); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-24T23:00:58.247

你应该使用 [`urldecode()`](http://php.net/manual/en/function.urldecode.php)php 或[`decodeURIComponent()`](http://www.w3schools.com/jsref/jsref_decodeuricomponent.asp)..

不需要正则表达式来完成你想要的

# javascript - 初学者 JavaScript 帮助（函数）

> ID：15055834
> 
> 赞同：0
> 
> 时间：2013-02-24T19:44:58.730
> 
> 标签：javascript, html, calendar

我在从[refdesk.com](http://refdesk.com)上的日历复制脚本和 HTML 时遇到了一些问题。我需要将 JavaScript 放在不同的样式表上，并使用这些函数在 HTML 页面上重新创建日历。这是我到目前为止所拥有的，任何提示都会有所帮助。这是一个家庭作业，所以我不是在寻找答案。

JavaScript -

```
function initialize()
{
    buildCal();
    updateCalender();
}

var themonths = ['January','February','March','April','May','June',
'July','August','September','October','November','December'];

var todaydate = new Date();
var curmonth = todaydate.getMonth() + 1; //get current month (1-12)
var curyear = todaydate.getFullYear(); //get current year

function buildCal(month, year, cM, cH, cDW, cD, border)
{
var mn = ['January','February','March','April','May','June','July','August','September','October','November','December'];
var dim = [31,0,31,30,31,30,31,31,30,31,30,31];

var firstDaySelectedMonth = new Date(year, month - 1, 1); //DD replaced line to fix date bug when current day is 31st
firstDaySelectedMonth.od=firstDaySelectedMonth.getDay() + 1; //DD replaced line to fix date bug when current day is 31st

var todaydate = new Date(); //DD added
var scanfortoday = (year == todaydate.getFullYear() && month == todaydate.getMonth() + 1) ? todaydate.getDate() : 0; //DD added

dim[1] = (((firstDaySelectedMonth.getFullYear() % 100 != 0) && (firstDaySelectedMonth.getFullYear() %4 == 0)) || (firstDaySelectedMonth.getFullYear() % 400 == 0)) ? 29 : 28;
var t = '<div class="' + cM + '"><table class="' + cM + '" cols="7" cellpadding="0" border="' + brdr + '" cellspacing="0"><tr align="center">';
t += '<td colspan="7" align="center" class="' + cH + '">' + mn[month - 1] + ' - ' + year + '</td></tr><tr align="center">';
for (s = 0; s < 7; s++)
{
    t += '<td class="' + cDW + '">' + "SMTWTFS".substr(s,1) + '</td>';
    t += '</tr><tr align="center">';
}

for(i = 1;i <= 42; i++)
{
    var x = ((i-firstDaySelectedMonth.od >= 0) && (i-firstDaySelectedMonth.od < dim[month -1 ])) ? i-firstDaySelectedMonth.od + 1 : '&nbsp;';
        if (x == scanfortoday) //DD added
        {   
            x = '<span id="today">' + x + '</span>'; //DD added
            t += '<td class="' + cD + '">' + x +'</td>';
        }
        if(((i) % 7 == 0) && (i < 36))
        {
            t += '</tr><tr align="center">';
        }
}
return t += '</tr></table></div>';
}   
// update calender function
function updateCalendar(theSelection)
{
    var themonth = parseInt(theSelection[theSelection.selectedIndex].value) + 1;
    var calendarstr = buildCal(themonth, curyear, "main", "month", "daysofweek", "days", 0);

    if (document.getElementById)
    {
        document.getElementById("calendarspace").innerHTML = calendarstr;
    }
    document.write('<option value="'+(curmonth - 1) + '" selected="yes">Current Month</option>');
    for (i = 0; i < 12; i++) //display option for 12 months of the year
    {
    document.write('<option value="' + i + '">' + themonths[i] + ' ' + curyear + '</option>');
    }
} 
```

HTML -

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="refdesk.css">
        <script src="refdesk.js"></script>
    </head>

    <body onload="initialize()">
    <!-- CALENDAR START -->
        <form>
            <div id="choicespace">
                <p>(This will be replaced with JavaScript-generated HTML)</p>
                <select onchange="updatecalendar(this.options)">
                <script>
                updatecalendar(theselection);
                </script>
                <option value="1" selected="yes">Current Month</option><option value="0">January 2013</option><option value="1">February 2013</option><option value="2">March 2013</option><option value="3">April 2013</option><option value="4">May 2013</option><option value="5">June 2013</option><option value="6">July 2013</option><option value="7">August 2013</option><option value="8">September 2013</option><option value="9">October 2013</option><option value="10">November 2013</option><option value="11">December 2013</option>
                </select>
            </div>
            <div id="calendarspace">
                <p>(This will be replaced with JavaScript-generated HTML)</p>
            </div>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:51:39.970

首先，试着弄清楚你的 javascript 代码是如何工作的。看一下[javascript中的日历](http://www.jscodes.com/calendar-javascript-code/)作为一个简单的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T01:15:10.187

就我个人而言，我会缩进更多以使事情井井有条。我要做的另一件事就是制作更短的变量，因为有时我发现自己编码错误，因为我的变量名很大。

# android - 或 switch/case 中的声明？

> ID：15055835
> 
> 赞同：4
> 
> 时间：2013-02-24T19:45:05.510
> 
> 标签：android, switch-statement, case

是否可以在 switch/case 结构中使用 OR 语句？假设我想在点击两个不同的项目时做同样的事情。

我试过

```
(case R.id.bOne || case R.id.tvOne): 
```

和

```
case (R.id.bOne || R.id.tvOne): 
```

但他们似乎都没有工作..

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-24T19:46:11.287

这将起作用：

```
case R.id.bOne:
case R.id.tvOne:
  // do your stuff 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T19:48:52.190

试试这个：

```
switch(id){
    case R.id.bOne:
    case R.id.tvOne:
        // do your stuff here
        break;
    case R.id.x:
        // do your stuff here
        break;
    default:
        // do your stuff here
} 
```

# linux - 如何创建规范文件（RPM）

> ID：15055841
> 
> 赞同：3
> 
> 时间：2013-02-24T19:45:42.223
> 
> 标签：linux, shell, rpm

我有 2 个文件，其中包括要执行的 shell 命令，我有一个`iptables-save`包含需要安装的链的文件

如何将规范文件写入：

1.  将我的 2 个 shell 文件复制到 /etc/
2.  执行`iptables-restore < /home/iptables-save`

> PS：我经历了这个方法。不幸的是，我是这方面的新手，我找不到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T20:55:13.673

昨天不得不这样做。

以普通用户的身份在您的家中创建您的构建目录，不要使用 root，这样很聪明。

```
mkdir -p ~/rpmbuild/BUILD
mkdir -p ~/rpmbuild/BUILDROOT
mkdir -p ~/rpmbuild/RPMS
mkdir -p ~/rpmbuild/SOURCES
mkdir -p ~/rpmbuild/SPECS
mkdir -p ~/rpmbuild/SRPMCS
mkdir -p ~/rpmbuild/tmp 
```

接下来创建 rpmmacros 以便 rpmbuild 知道在哪里构建， ~/.rpmmacros 的内容应该包含以下内容

```
%packager Chris Hinshaw
%_topdir /home/chinshaw/rpmbuild
%_tmppath /home/chinshaw/rpmbuild/tmp 
```

接下来创建 ~/rpmbuild/SPECS/ 中的 rpm 规范。这个示例规范文件将处理一个名为演示脚本的脚本，它是进入 etc 的配置文件，以及将安排脚本每小时运行的第三个 cron 脚本。

~/rpmbuild/SPECS/demoproject.spec

```
Name:   demoproject     
Version:    0.1 
Release:    1%{?dist}
Summary:    Demo script for doing something cool

Group:  DemoGroup
License:    GPL
Source0:    demoproject-0.1.tar.gz
BuildRoot:  %(mktemp -ud %{_tmppath}/%{name}-%{version}-%{release}-XXXXXX)

%description
Demo project that does something interesting

%prep
%setup -q

%build

%install
install --directory $RPM_BUILD_ROOT/usr/sbin
install --directory $RPM_BUILD_ROOT/etc
install --directory $RPM_BUILD_ROOT/etc/cron.d/

install -m 0755 demoscript $RPM_BUILD_ROOT/usr/sbin
install -m 0744 demoscript.conf $RPM_BUILD_ROOT/etc
install -m 0744 cron/democronscript $RPM_BUILD_ROOT/etc/cron.d/

%clean
rm -rf $RPM_BUILD_ROOT

%files
/usr/sbin/demoscript
/etc/demoscript.conf
/etc/cron.d/democronscript

%changelog 
```

我发现的唯一怪癖是我真的需要将我的 3 个源文件压缩到一个 tarball 中，无论如何这似乎是个好主意。

内容或 rpmbuild/SOURCES 目录应如下所示。

```
$ cd ~/rpmbuild/SOURCES
$ ls 
demoproject-0.1.tar.gz
$ tar -tvzf demoproject-0.1.tar.gz
demoproject-0.1/
demoproject-0.1/demoscript.conf
demoproject-0.1/demoscript
demoproject-0.1/cron/
demoproject-0.1/cron/democronscript 
```

那么你所要做的就是构建它 rpmbuild -ba ~/rpmbuild/SPECS/demoproject.spec

这将创建 arch rpms 和 srpms 并将它们放在 ~/rpmbuild/RPMS 和 ~/rpmbuild/SRPMS 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:41:03.947

使用`%post`and`%preun`部分在安装之后和卸载之前运行操作，只需将您的 shell 命令放在那里。

# wordpress - WordPress WP电子商务用户注册

> ID：15055846
> 
> 赞同：0
> 
> 时间：2013-02-24T19:46:03.630
> 
> 标签：wordpress

如果有一种方法可以将注册直接添加到我的注册页面而不是结帐，我会很有趣。

例如，我根本不想拥有用户名，而是想使用电子邮件地址作为一个。而在通常的 WP 注册页面中，我需要填写用户名和电子邮件，密码将通过电子邮件发送给我，我只想有一个页面，我可以在其中填写电子邮件和 wp 电子商务详细信息或仅电子邮件 -> 然后是我的密码，然后我转到填写其余详细信息的页面。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:40:04.693

有很多方法可以做到这一点，例如使用正确的输入为自己的表单硬编码，以及使用许多自定义表单的插件。

就我而言，最后我使用了插件，因为我有 Multisite

[http://wordpress.org/extend/plugins/s8-custom-login-and-registration/](http://wordpress.org/extend/plugins/s8-custom-login-and-registration/) S8

非常适合 WordPress 3.5

# html - 覆盖背景颜色

> ID：15055850
> 
> 赞同：1
> 
> 时间：2013-02-24T19:46:31.243
> 
> 标签：html, css

我有关于 CSS 的问题。

我有 2 个 div，一个带有`background-color: #000;`透明 png 文件，第二个带有部分没有背景的透明 png 文件（如此透明），我们称之为`background-image: url(images/scrolltotop.png);`.

我想要的是`background-color`用 png 文件的透明度覆盖，所以背景不会覆盖我的 png 文件。我会给你图片来告诉你我的意思：

![透明png文件](../Images/c1b995760c47e44eaf095639c96a416b.png)

![没有透明度的情况](../Images/4a2b97bac053c821325ba1ac8f5a0ed2.png)

![结果](../Images/c8b86d9c96a4ca18071af4e2e19e6cdf.png)

现在图像与我想要得到的结果（上图） - 背景来自 html 样式。

有没有办法用透明度覆盖背景颜色？

![在此处输入图像描述](../Images/6bebd02f33b4efc5377b5aac47d7f2d8.png) ![在此处输入图像描述](../Images/ccebf2d8aaa654bb8ad22cb3cf9659a6.png)

编辑：也许这个 img 会告诉你更多，我想做什么（上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:48:29.043

```
background-color: transparent; 
```

你试过吗？

**编辑**

[http://jsfiddle.net/FCXGu/3/](http://jsfiddle.net/FCXGu/3/)

```
border-width: 20px;
border-image: url("//i.imgur.com/hg2Thfa.png") 20 stretch;
-moz-border-image: url("//i.imgur.com/hg2Thfa.png") 20 stretch;
-webkit-border-image: url("//i.imgur.com/hg2Thfa.png") 20 stretch; 
```

需要一点时间来理解它是如何工作的。图像的边框本质上类似于“填充”，因为它通常比正常情况更厚。你可以认为你的切口只需要厚边框的顶部，在这种情况下你的代码可能看起来像：

```
 border-image: url("//i.imgur.com/hg2Thfa.png") 20 0 0 0 stretch; 
```

这意味着您的 div 的顶部边框将使用您正在使用的图像的前 20 个像素，而图像的其余部分将仅用于您的 div 的内容区域。不管怎样，你想要的效果都可以通过border-image来实现。

这是最好的方式/唯一的方式吗？可能不是，但这是一种方式。

这是小提琴：http: [//jsfiddle.net/FCXGu/3/](http://jsfiddle.net/FCXGu/3/)

我添加了一个内容区域，只是为了说明这一切的位置：http: [//jsfiddle.net/FCXGu/4/](http://jsfiddle.net/FCXGu/4/)

如果没有看到您的确切图像、页面和用法，我无法告诉您创建 png、使用拉伸与重复等的最佳方法。但是边框图像非常灵活。但是，它不适用于所有浏览器。只有好的。

# google-drive-api - 获取 Google Drive SDK 中共享用户的电子邮件地址

> ID：15055851
> 
> 赞同：0
> 
> 时间：2013-02-24T19:46:30.927
> 
> 标签：google-drive-api

由于令人难以置信的是，Google 驱动器中缺少通知功能来通知人们将新文件添加到他们的共享文件夹中，我不得不写一个。我的这个系统的第一个版本是使用 Google App Script 编写的。我不得不终止该版本，因为我的客户端的负载超出了应用脚本的配额限制，并且系统在早上 9:30 左右关闭。

所以我用 GAE/GWT 重写了这个应用程序并取得了相当大的进展，我认为我没有遇到另一个问题。我找不到获取文件夹/文件上共享用户列表的方法。系统的工作方式，他创建了一个文件。该文件被放在一个文件夹中，他启动这个应用程序并点击按钮。然后，此应用程序会扫描文件夹，如果找到新文件，它会进入文件权限，获取与文件共享的电子邮件地址列表，并向他们发送一封电子邮件，说明有新文件。但是，Drive SDK 会返回文件共享对象的所有信息，但电子邮件地址除外。是否有一些我在文档中没有找到的开关可以给我这些电子邮件地址？

我真的很讨厌不得不再次重写这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:12:35.523

有一些关于这个的讨论，电子邮件地址是为了隐私而隐藏的。您可以获取有权访问该文件的用户的 ID，但不能获取电子邮件地址。

[与共享的 Google Drive 文件相关的电子邮件 ID](https://stackoverflow.com/questions/14402746/email-ids-related-to-shared-google-drive-file) [Google Drive api 更改文件的所有权？](https://stackoverflow.com/questions/12249232/google-drive-api-change-ownership-of-files/12250559#12250559) [响应中未填充权限资源的值属性](https://stackoverflow.com/questions/11846293/value-attribute-for-permissions-resource-not-populated-in-responses/11848221#11848221)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T18:52:22.860

如果您有权访问用户的 permissionId 和 fileId，听起来像您这样做，您可以使用[Permissions API 的 get()](https://developers.google.com/drive/v2/reference/permissions/get)方法（JavaScript 版本）获取文件的电子邮件地址：

```
var fileId = 'Some Drive fileId';

gapi.client.drive.about.get().execute(function (data) {
    gapi.client.drive.permissions.get({
        'fileId': fileId,
        'permissionId': data.permissionId
    }).execute(function (perms) {
        console.log(perms.emailAddress);
    });
}); 
```

也可以看看：

[权限资源](https://developers.google.com/drive/v2/reference/permissions#resource)

[关于资源](https://developers.google.com/drive/v2/reference/about#resource)

# ruby - 如何更改 Struct 属性的默认值？

> ID：15055852
> 
> 赞同：41
> 
> 时间：2013-02-24T19:46:41.070
> 
> 标签：ruby

根据[文档](http://www.ruby-doc.org/core-1.9.3/Struct.html#method-c-new)未设置的 Struct 属性设置为`nil`：

> 未设置的参数默认为零。

是否可以为特定属性指定默认值？

例如，对于以下结构

```
Struct.new("Person", :name, :happy) 
```

我希望该属性`happy`默认为`true`而不是`nil`. 我怎样才能做到这一点？如果我这样做

```
Struct.new("Person", :name, :happy = true) 
```

我明白了

```
-:1: syntax error, unexpected '=', expecting ')'
Struct.new("Person", :name, :happy = true)
                                    ^
-:1: warning: possibly useless use of true in void context 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-08-09T03:51:55.260

这也可以通过将 Struct 创建为子类并 `initialize`使用默认值覆盖来实现，如下例所示：

```
class Person < Struct.new(:name, :happy)
    def initialize(name, happy=true); super end
end 
```

一方面，这种方法确实会导致一些样板；另一方面，它可以简洁明了地满足您的需求。

一个副作用（取决于您的偏好/用例可能是好处或烦恼）是您失去了`Struct`所有默认属性的默认行为`nil`- 除非您明确将它们设置为这样。实际上，上面的示例将创建`name`一个必需参数，除非您将其声明为`name=nil`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-02-03T22:00:16.317

按照@rintaun 的示例，您还可以在 Ruby 2+ 中使用关键字参数来执行此操作

```
A = Struct.new(:a, :b, :c) do
  def initialize(a:, b: 2, c: 3); super end
end

A.new
# ArgumentError: missing keyword: a

A.new a: 1
# => #<struct A a=1, b=2, c=3> 

A.new a: 1, c: 6
# => #<struct A a=1, b=2, c=6> 
```

**更新**

代码现在需要编写如下才能工作。

```
A = Struct.new(:a, :b, :c) do
  def initialize(a:, b: 2, c: 3)
    super(a, b, c)
  end
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-13T22:04:40.607

我还发现了这个：

```
Person = Struct.new "Person", :name, :happy do
  def initialize(*)
    super
    self.location ||= true
  end
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-25T01:28:46.047

@Linuxios 给出了一个覆盖成员查找的答案。这有几个问题：您不能将成员显式设置为 nil，并且每个成员引用都有额外的开销。在我看来，您真的只想在使用提供给`::new`or的部分成员值初始化新结构对象时提供默认值`::[]`。

这是一个使用附加工厂方法扩展 Struct 的模块，该方法允许您使用散列描述所需的结构，其中键是成员名称，而值是在初始化时未提供时填充的默认值：

```
# Extend stdlib Struct with a factory method Struct::with_defaults
# to allow StructClasses to be defined so omitted members of new structs
# are initialized to a default instead of nil
module StructWithDefaults

  # makes a new StructClass specified by spec hash.
  # keys are member names, values are defaults when not supplied to new
  #
  # examples:
  # MyStruct = Struct.with_defaults( a: 1, b: 2, c: 'xyz' )
  # MyStruct.new       #=> #<struct MyStruct a=1, b=2, c="xyz"
  # MyStruct.new(99)   #=> #<struct MyStruct a=99, b=2, c="xyz">
  # MyStruct[-10, 3.5] #=> #<struct MyStruct a=-10, b=3.5, c="xyz">
  def with_defaults(*spec)
    new_args = []
    new_args << spec.shift if spec.size > 1
    spec = spec.first
    raise ArgumentError, "expected Hash, got #{spec.class}" unless spec.is_a? Hash
    new_args.concat spec.keys

    new(*new_args) do

      class << self
        attr_reader :defaults
      end

      def initialize(*args)
        super
        self.class.defaults.drop(args.size).each {|k,v| self[k] = v }
      end

    end.tap {|s| s.instance_variable_set(:@defaults, spec.dup.freeze) }

  end

end

Struct.extend StructWithDefaults 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-08-14T14:42:18.977

只需添加另一个变体：

```
class Result < Struct.new(:success, :errors)
  def initialize(*)
    super
    self.errors ||= []
  end
end 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-09T00:15:48.247

我认为重写该`#initialize`方法是最好的方法，调用`#super(*required_args)`.

这还有一个额外的优势，那就是能够使用散列式参数。请参阅以下完整和编译示例：

## 哈希样式参数、默认值和 Ruby 结构

```
# This example demonstrates how to create Ruby Structs that use
# newer hash-style parameters, as well as the default values for
# some of the parameters, without loosing the benefits of struct's
# implementation of #eql? #hash, #to_s, #inspect, and other
# useful instance methods.
#
# Run this file as follows
#
# > gem install rspec
# > rspec struct_optional_arguments.rb --format documentation
#
class StructWithOptionals < Struct.new(
    :encrypted_data,
    :cipher_name,
    :iv,
    :salt,
    :version
    )

    VERSION = '1.0.1'

    def initialize(
        encrypted_data:,
        cipher_name:,
        iv: nil,
        salt: 'salty',
        version: VERSION
        )
        super(encrypted_data, cipher_name, iv, salt, version)
    end
end

require 'rspec'
RSpec.describe StructWithOptionals do
    let(:struct) { StructWithOptionals.new(encrypted_data: 'data', cipher_name: 'AES-256-CBC', iv: 'intravenous') }

    it 'should be initialized with default values' do
        expect(struct.version).to be(StructWithOptionals::VERSION)
    end

    context 'all fields must be not null' do
        %i(encrypted_data cipher_name salt iv version).each do |field|
            subject { struct.send(field) }
            it field do
                expect(subject).to_not be_nil
            end
        end
    end
end 
```

# c# - mdi 中的显示对话框

> ID：15055854
> 
> 赞同：0
> 
> 时间：2013-02-24T19:46:48.837
> 
> 标签：c#, mdi, showdialog, mdichild

我需要以 mdi 形式使用 Showdialog() 打开，因为我需要停止代码直到 mdichild 完成。

程序的结构是这样的，我在这个的 onCreate 中打开一个 mdichild，而不是类，在构造函数中我打开 de SearchForm

有代码：

```
 frm_bsq_persona busqueda_persona = new frm_bsq_persona();
   busqueda_persona.MdiParent = this.MdiParent.MdiParent;
   busqueda_persona.Show(); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:51:50.723

**MDI 子作为对话框形式（MDI 模态解决方法）**
[http://www.codeproject.com/Articles/48436/MDI-child-as-dialog-form-MDI-modal-workaround](http://www.codeproject.com/Articles/48436/MDI-child-as-dialog-form-MDI-modal-workaround)

它的工作原理是禁用父窗体上的所有控件，并为您提供 EventReceiver 方法以从对话框接收 DialogResult。

有一些警告。父表单的状态没有完美地保留，因为所有控件都在返回时重新启用。如果需要，您必须在创建对话框之前保存父窗体的状态（或者可能只是那些已禁用的控件），并在调用事件接收器时恢复状态。

# python - django 的 View 类是如何工作的

> ID：15055856
> 
> 赞同：15
> 
> 时间：2013-02-24T19:47:09.040
> 
> 标签：python, django, python-2.7, django-views, django-generic-views

我正在深入研究 Django 的通用视图，弄清楚它们如何返回一个简单的 HttpResponse 对象，就像一个简单的视图函数一样。
我编写了一个简单的测试项目，并在 django/views/generic/base.py 文件中定义的基本视图类中添加了一些日志记录命令，这样我就可以跟踪幕后发生的事情。

我在研究过程中遇到了一些问题。
然而，我一直试图保持这篇文章的简短，为了全面理解，我认为包含代码片段和日志是必不可少的。
我将非常感谢任何花时间提供一些有用评论的人，可能会回答我的一些问题。

**网址.py**

```
from django.conf.urls import patterns, url
from views import WelcomeView

urlpatterns = patterns('',
    url(r'^welcome/(?P<name>\w+)/$', WelcomeView.as_view()),
) 
```

**视图.py**

```
from django.http import HttpResponse
from django.views.generic import View

class WelcomeView(View):
    def get(self, request, name):
        return HttpResponse('What is up, {0}?'.format(name)) 
```

**django/views/generic/base.py**

```
class View(object):
    """
    Intentionally simple parent class for all views. Only implements
    dispatch-by-method and simple sanity checking.
    """

    http_method_names = ['get', 'post', 'put', 'delete', 'head', 'options', 'trace']

    def __init__(self, **kwargs):

        #####logging
        logging.error('*** View.__init__ is started with kwargs: {0} ***'.format(
            repr(kwargs)))

        """
        Constructor. Called in the URLconf; can contain helpful extra
        keyword arguments, and other things.
        """

        # Go through keyword arguments, and either save their values to our
        # instance, or raise an error.
        for key, value in kwargs.iteritems():
            setattr(self, key, value)

        #####logging
        logging.error('*** View.__init__ reached its end. No return value. ***')

    @classonlymethod
    def as_view(cls, **initkwargs):

        #####logging
        logging.error('*** View.as_view is started with initkwargs: {0} ***'.format(
            repr(initkwargs)))

        """
        Main entry point for a request-response process.
        """

        # sanitize keyword arguments
        for key in initkwargs:
            if key in cls.http_method_names:
                raise TypeError(u"You tried to pass in the %s method name as a "
                                u"keyword argument to %s(). Don't do that."
                                % (key, cls.__name__))
            if not hasattr(cls, key):
                raise TypeError(u"%s() received an invalid keyword %r" % (
                    cls.__name__, key))

        def view(request, *args, **kwargs):

            #####logging
            logging.error('*** View.as_view.view is called with args: {0};\
                and kwargs: {1} ***'.format(
                repr(args),
                repr(kwargs)))

            self = cls(**initkwargs) 
            if hasattr(self, 'get') and not hasattr(self, 'head'):
                self.head = self.get

            #####logging
            logging.error('*** View.as_view.view reached its end.\ 
                Now calls dispatch() and returns the return value.')

            return self.dispatch(request, *args, **kwargs)

        # take name and docstring from class
        update_wrapper(view, cls, updated=())

        # and possible attributes set by decorators
        # like csrf_exempt from dispatch
        update_wrapper(view, cls.dispatch, assigned=())

        #####logging
        logging.error('*** View.as_view reached its end. Now returns view. ***')
        return view

    def dispatch(self, request, *args, **kwargs):
        # Try to dispatch to the right method; if a method doesn't exist,
        # defer to the error handler. Also defer to the error handler if the
        # request method isn't on the approved list.

        #####logging
        logging.error('*** View.dispatch called, with args: {0};\
            and kwargs: {1} ***'.format(
            repr(args),
            repr(kwargs)))

        if request.method.lower() in self.http_method_names:
            handler = getattr(self, request.method.lower(), self.http_method_not_allowed)
        else:
            handler = self.http_method_not_allowed
        self.request = request
        self.args = args
        self.kwargs = kwargs

        #####logging
        logging.error('*** View.dispatch reached its end.\ 
            Now calls handler and returns the return value. ***')
        return handler(request, *args, **kwargs)

    def http_method_not_allowed(self, request, *args, **kwargs):
        allowed_methods = [m for m in self.http_method_names if hasattr(self, m)]
        logger.warning('Method Not Allowed (%s): %s', request.method, request.path,
            extra={
                'status_code': 405,
                'request': self.request
            }
        )
        return http.HttpResponseNotAllowed(allowed_methods) 
```

**一些测试请求的日志**

```
Django version 1.4.5, using settings 'try1.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.

ERROR:root:*** View.as_view is started with initkwargs: {} ***
ERROR:root:*** View.as_view reached its end. Now returns view. ***
ERROR:root:*** View.as_view.view is called with args: (); and kwargs: {'name': u'Dude'} ***
ERROR:root:*** View.__init__ is started with kwargs: {} ***
ERROR:root:*** View.__init__ reached its end. No return value. ***
ERROR:root:*** View.as_view.view reached its end. Now calls dispatch() and returns the return value.
ERROR:root:*** View.dispatch called, with args: (); and kwargs: {'name': u'Dude'} ***
ERROR:root:*** View.dispatch reached its end. Now calls handler and returns the return value. ***
[24/Feb/2013 12:43:19] "GET /welcome/Dude/ HTTP/1.1" 200 17

ERROR:root:*** View.as_view.view is called with args: (); and kwargs: {'name': u'Dude'} ***
ERROR:root:*** View.__init__ is started with kwargs: {} ***
ERROR:root:*** View.__init__ reached its end. No return value. ***
ERROR:root:*** View.as_view.view reached its end. Now calls dispatch() and returns the return value.
ERROR:root:*** View.dispatch called, with args: (); and kwargs: {'name': u'Dude'} ***
ERROR:root:*** View.dispatch reached its end. Now calls handler and returns the return value. ***
[24/Feb/2013 12:43:32] "GET /welcome/Dude/ HTTP/1.1" 200 17

[24/Feb/2013 12:44:43] "GET /welcome/ HTTP/1.1" 404 1939

ERROR:root:*** View.as_view.view is called with args: (); and kwargs: {'name': u'Bro'} ***
ERROR:root:*** View.__init__ is started with kwargs: {} ***
ERROR:root:*** View.__init__ reached its end. No return value. ***
ERROR:root:*** View.as_view.view reached its end. Now calls dispatch() and returns the return value.
ERROR:root:*** View.dispatch called, with args: (); and kwargs: {'name': u'Bro'} ***
ERROR:root:*** View.dispatch reached its end. Now calls handler and returns the return value. ***
[24/Feb/2013 12:44:59] "GET /welcome/Bro/ HTTP/1.1" 200 16 
```

**毕竟我的问题**

**1**
、根据日志，as_view是在View.init之前调用的。
这是否意味着它甚至在创建 View 实例之前就调用了 View 方法？

**2.**
as_view()为什么第一次调用执行后不调用？
我还不是 Python 的导入、编译和内存使用方面的专家，
但我有一种感觉，它们在这里发挥了一些作用。

**3**
、在view()的定义中，下面的代码片段做了什么？

```
self = cls(**initkwargs) 
```

根据日志，它触发了 View.init。
是不是它用initkwargs创建了一个新的View实例并将其分配给正在使用的实例（self）？
如果是这样，为什么需要它？

**4.**
我们如何利用 initkwargs（as_view 的参数）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-24T20:53:10.793

这些视图的底层实现涉及到一些相当高级的 Python，因此，如果您是一个相对初学者，如果您发现其中一些代码令人困惑，这不足为奇。

1.  您应该了解的主要内容是`@classmethod`装饰器对`as_view()`. 这意味着这个方法不是一个普通的方法，它是在类的实例上调用的（并以实例为`self`参数），而是一个类方法，它是在*类本身*上调用的（并以*类*为`cls`参数） . 一些语言将其称为静态方法，尽管在 Python 中这是我们不需要在这里介绍的第三种方法。

2.  这是因为视图在 urlconf 中是如何定义的。你说得对`WelcomeView.as_view()`——这样做是*在导入 urlconf 时*`as_view`调用classmethod 。

**   正如我们从第 1 点所知道的，`cls`是视图类本身。与一个类一样，当你调用它时，你会得到一个对象。因此，正如您所说，我们在这里所做的是实例化类，然后将该实例分配给名为 的变量`self`，就好像我们在该实例的方法中一样。这里的重点是，正如我上面所说，`as_view`在导入时调用，它返回一个函数——`view`当浏览器请求该 URL 时，该函数又由 URL 调度程序调用。因此，在该函数内部，我们构造并调用构成基于类的视图的类的其余部分。至于为什么需要它，请参见下文。

    *   该`__init__`方法负责将 的每个成员设置`initargs`为实例属性，您可以通过通常的`self.whatever`语法在视图代码中访问它。* 

 *那么，为什么这一切都是必要的呢？

基于类的视图有一个巨大的潜在陷阱，即直接在 URLconf（或模块级别的任何其他地方）中实例化的任何类都将在整个过程的生命周期中持续存在。而 Django 通常部署的方式——通过 WSGI——通常意味着一个进程可以持续处理许多请求。而且，如果您在多个请求中持续存在某些内容，则可能会出现一些非常讨厌的线程安全错误-例如，如果您在一个请求中为实例属性设置了某些内容，那么它将在后续请求中可见。

因此，这段代码不仅确保了每个请求都获得了一个新实例，而且还使得通过每次在视图函数中动态构造实例来打破请求隔离变得非常困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T21:03:44.053

1.首先as_view()是一个[类方法](http://docs.python.org/2/library/functions.html#classmethod)。这是一种可以在类而不是类的实例上调用的方法。在这种情况下，您可以看到它正在被调用`View`，它是一个类而不是一个实例。

2. `as_view()`在加载 url.conf 模块时调用 - 它返回函数`view()`。每次请求视图时都会调用此函数 -`as_view`不需要再次调用。

3\. 在`view()`函数的范围内，`cls`变量是`View`类（例如`DetailView`，，或调用函数的`ListView`任何子类）。`View`引用类方法的第一个参数是[PEP8](http://www.python.org/dev/peps/pep-0008/#function-and-method-arguments)`cls`的编码风格规范。这类似于我们将 am 实例方法的第一个参数称为 self 的方式。所以

```
self = cls(**initkwargs) 
```

基本上是一样的

`self = View(**initkwargs)`或者`self = DetailView(**initkwargs)`

（取决于哪个类继承了这个函数）。

正如您所说，这是实例化该类的新实例。到目前为止，`View`尚未实例化对象。

4\. 最后，在创建类的实例时使用 initkwargs。这真的就像将每个键值对添加为新视图对象的属性一样简单 -

```
for key, value in kwargs.iteritems():
    setattr(self, key, value) 
```*

# php - 将 PDO 对象发送到类

> ID：15055864
> 
> 赞同：0
> 
> 时间：2013-02-24T19:48:09.823
> 
> 标签：php, database, pdo, connection

我是新来的...我在课堂上使用 PDO 对象时遇到问题...这是代码： *创建 PDO 连接：*

```
<?php 
    try {
        $konekcija = new PDO(DSN, USERNAME, PASSWORD);
        $konekcija->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    } catch (PDOException $e) {
        echo "Error connecting to database: " . $e->getMessage();
        die();
    }
?> 
```

*班级：*

```
class Nastavnik
{
    private $zvanje = "";
    private $konekcija;

    public function __construct($konekcija){
        $this->konekcija = $konekcija;
    }

    public function registracija($korIme, $lozinka, $ime, $prezime, $telefon, $email, $zvanje, $tipKorisnika){
        $upitRegistracija = "INSERT INTO projekat_vst.korisnici (kor_ime, lozinka, ime, prezime, telefon, email, zvanje, tip_korisnika) 
                                                            VALUES (:korIme, :lozinka, :ime, :prezime, :telefon, :email, :zvanje, :tip_korisnika);";
        try {
            $stmt = $konekcija->prepare($upitRegistracija);
            $stmt->execute($korIme, $lozinka, $ime, $prezime, $telefon, $email, $zvanje, $tipKorisnika);
            return 1;
        } catch (PDOException $e) {
            echo "Greška pri kreiranju korisnika." . $e->getMessage();
            return 0;
        }
    }

} 
```

*这是创建新类的代码：*

```
$korisnik = new Nastavnik($konekcija); 
```

当我尝试创建 Nastavnik 类的新实例时，我收到以下消息：

```
Notice: Undefined variable: konekcija in D:\php_dev\xampp\htdocs\projekatVST\includes\klasaNastavnik.php on line 24 
```

我不明白我在哪里犯错...谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:50:40.350

不是`$konekcija`但是`$this->konekcija`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:51:11.317

你失踪了`$this`：

```
$stmt = $konekcija->prepare($upitRegistracija); 
```

应该：

```
$stmt = $this->konekcija->prepare($upitRegistracija); 
```

# object - SVG 对象显示 SVG 代码而不是 SVG 图形？

> ID：15055865
> 
> 赞同：2
> 
> 时间：2013-02-24T19:48:14.683
> 
> 标签：object, svg

在我的网站上，我有一个用于显示矢量图像的 SVG 对象，在离线测试时，一切正常，但是当我将其上传到我的网站时，该对象显示了相关 SVG 的代码。可在此处查看：[链接到带有 svg 的网站](http://www.pinpointbadges.com/lanyarddesigner.php)

对象代码：

```
<object type="image/svg+xml" data="ppvisual.svg" width="702px" height="259.37px">
<param name="colour" value="<?php echo $colour; ?>" />
<param name="textcolour" value="<?php echo $textcolour; ?>" />
<param name="lanyardtext" value="<?php echo $lanyardtext; ?>" />
</object> 
```

Doctype：（万一这与它有什么关系？）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

SVG 代码：

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="702px" height="259.37px" viewBox="0 0 702 259.37" enable-background="new 0 0 702 259.37" xml:space="preserve">
<g>
<g>
    <polygon fill="none" points="0,80.811 0.053,113.105 48.17,112.998 48.117,80.705         "/>

        <image overflow="visible" width="109" height="188" xlink:href="fitment1.png"  transform="matrix(4.854395e-04 0.2963 -0.2559 5.628683e-04 48.1172 80.7046)">
    </image>
</g>
</g>
<g>
<path fill-rule="evenodd" clip-rule="evenodd" fill="param(colour) white" d="M43.807,108.613c-0.241,0-0.476-0.086-0.659-0.248
    c-0.217-0.189-0.341-0.463-0.341-0.752v-22.26c0-0.502,0.372-0.926,0.87-0.991l633.935-83.34c0.043-0.005,0.086-0.008,0.129-0.008
    c0.264,0,0.52,0.104,0.707,0.293l22.26,22.26c0.188,0.188,0.293,0.442,0.293,0.707v61.08c0,0.553-0.447,1-1,1h-22.26
    c-0.553,0-1-0.447-1-1v-59.94L43.938,108.605C43.894,108.611,43.851,108.613,43.807,108.613z"/>
<path fill="#636466" d="M677.74,2.013L700,24.273v61.08h-22.26v-61.08l-633.933,83.34v-22.26L677.74,2.013 M677.74,0.013
    c-0.086,0-0.174,0.005-0.26,0.017L43.546,83.371c-0.995,0.13-1.739,0.979-1.739,1.982v22.26c0,0.576,0.248,1.125,0.681,1.504
    c0.367,0.322,0.836,0.496,1.319,0.496c0.086,0,0.174-0.006,0.261-0.016L675.74,26.553v58.8c0,1.104,0.896,2,2,2H700
    c1.105,0,2-0.896,2-2v-61.08c0-0.53-0.211-1.039-0.586-1.414l-22.26-22.26C678.777,0.222,678.268,0.013,677.74,0.013L677.74,0.013z
    "/>
</g>
<g>
<path fill-rule="evenodd" clip-rule="evenodd" fill="param(colour) white" d="M43.807,108.613c-0.552,0-1-0.447-1-1v-22.26c0-0.552,0.448-1,1-1
    H700c0.404,0,0.77,0.244,0.924,0.617c0.155,0.374,0.069,0.804-0.217,1.09l-22.26,22.26c-0.188,0.188-0.441,0.293-0.707,0.293
    H43.807z"/>
<path fill="#636466" d="M700,85.353l-22.26,22.26H43.807v-22.26H677.74H700 M700,83.353h-22.26H43.807c-1.104,0-2,0.896-2,2v22.26
    c0,1.104,0.896,2,2,2H677.74c0.53,0,1.039-0.211,1.414-0.586l22.26-22.26c0.572-0.572,0.743-1.432,0.434-2.18
    C701.538,83.84,700.809,83.353,700,83.353L700,83.353z"/>
</g>
<rect x="0" y="186.505" fill-rule="evenodd" clip-rule="evenodd" fill="param(colour) white" width="702" height="70.865"/>
<path fill="#636466" d="M702,257.37H0v2h702V257.37z M702,186.505v-2l0,0H0v2H702"/>
<g>
<defs>
    <polygon id="SVGID_1_" points="677.74,107.613 43.807,107.613 43.807,85.353 677.74,85.353 700,85.353         "/>
</defs>
<clipPath id="SVGID_2_">
    <use xlink:href="#SVGID_1_"  overflow="visible"/>
</clipPath>
<g clip-path="url(#SVGID_2_)">
    <text transform="matrix(1 0 0 1 372 102.272)" fill="param(textcolour) white" font-family="'Verdana-Bold'" font-size="16" text-anchor="middle" content-value="param(lanyardtext)">Enter Your Text          Enter Your Text          Enter Your Text          Enter Your Text</text>
</g>
</g>
<g>
<defs>
    <rect id="SVGID_3_" x="0" y="186.505" width="702" height="70.865"/>
</defs>
<clipPath id="SVGID_4_">
    <use xlink:href="#SVGID_3_"  overflow="visible"/>
</clipPath>
<g clip-path="url(#SVGID_4_)">
    <text transform="matrix(1 0 0 1 350 240.0977)" fill="param(textcolour) white" font-family="'Verdana-Bold'" font-size="50.9319" text-anchor="middle" content-value="param(lanyardtext) white">Enter Your Text          Enter Your Text          Enter Your Text          Enter Your Text</text>
</g>
</g>

<script type="text/ecmascript" xlink:href="param.js" />
</svg> 
```

我在想这可能与服务器设置有关？有人知道我将如何解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:51:22.383

您正在发送带有 mime 类型的 text/plain 的 SVG 数据。您需要重新配置您的 Web 服务器以使用图像/svg+xml 的 mime 类型发送它。你如何做到这一点取决于你使用的网络服务器。

# c# - 从列表类中选择特定值

> ID：15055867
> 
> 赞同：0
> 
> 时间：2013-02-24T19:48:20.427
> 
> 标签：c#, list

我有以下列表类

```
public class Users
{
    public string Username
    {
        get;
        set;
    }

    public string PlayerID
    {
        get;
        set;
    }
} 
```

我想知道如何选择 username = x 的 playerID ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:49:28.913

```
var player = playerList.FirstOrDefault(p => p.Username == "x");
if(player != null)
{
    string id = player.PlayerID;
} 
```

# javascript - 如何在 CRM 2011 UR 12 中将客户查找设置为联系人而不是帐户

> ID：15055871
> 
> 赞同：1
> 
> 时间：2013-02-24T19:48:38.930
> 
> 标签：javascript, dynamics-crm-2011

以下代码帮助我将 Customer Lookup 设置为 Contact 而不是 Account。

```
document.getElementById("customerid").setAttribute("defaulttype", "2"); 
```

在 IE 中就是这样，但我怎样才能为 Chrome 做到这一点？谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T23:40:20.603

我假设您在这里使用 Polaris 以获得多浏览器支持。

这不支持 JavaScript，所以我不希望它在 Chrome 中工作。据我所知，目前没有支持将查找设置为默认特定实体的方法（尽管我很高兴在这里被证明是错误的）。

我只支持 Xrm.Page API 中的 JavaScript 函数。

相关文章：[将 JavaScript 与 Microsoft Dynamics CRM 结合使用 - 为多个浏览器编写 JavaScript](http://msdn.microsoft.com/en-gb/library/hh771584.aspx#BKMK_WriteJavaScriptForMutlipleBrowsers)。

# c# - 如何在C#中将html标签呈现为字符串

> ID：15055873
> 
> 赞同：1
> 
> 时间：2013-02-24T19:48:47.403
> 
> 标签：c#, asp.net, asp.net-mvc, string, escaping

我正在做一个用C#开发的项目，我对C#的了解并不广泛，我前几天才开始学习:)

我遇到了这个功能：

```
public static IHtmlString RenderEditData<T>(string linkText) where T : CorinaEntity
{
    string id = new IdGenerator().Generate<T>();

    return new HtmlString(String.Format("<a href=\"#\" data-corina='{{ \"id\" : \"{0}\", \"clrType\" : \"{1}\" }}'>{2}</a>", id, typeof(T).AssemblyQualifiedName, linkText));
} 
```

上面返回了一个链接标签，当我第一次开始做这个项目时这很好，但现在我只需要将`data`属性输出为字符串。所以我只是尝试了这个：

```
public static String RenderEditData<T>() where T : CorinaEntity
{
    string id = new IdGenerator().Generate<T>();

return String.Format("data-corina='{{ id : \'{0}\', 'clrType' : \'{1}\' }}", id, typeof(T).AssemblyQualifiedName);
} 
```

问题是，而不是导致这个：

```
data-corina="{ "id" : "-[Model.Content]", "clrType" : "Model.Content, Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" }" 
```

它返回如下内容：

```
data-corina="'{" id="" :="" &#39;-[model.content]&#39;,="" &#39;clrtype&#39;="" &#39;model.content,="" model,="" version="1.0.0.0," culture="neutral," publickeytoken="null'" }="" 
```

显然，我做错了一些字符串转义，但我不知道该怎么做，也不会弄乱我需要的变量。有人可以为我指出正确的解决方案吗？`public static IHtmlString RenderEditData`如果我更改为`public static String RenderEditData`，如果我想要的结果只是一个字符串，我是否也做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:51:16.273

使用[`Html.Raw`](http://msdn.microsoft.com/en-us/library/gg568896%28v=vs.111%29.aspx)帮助器输出原始 HTML。

或者，将字符串包装在`HtmlString`：

```
public static String RenderEditData<T>() where T : CorinaEntity
{
    string id = new IdGenerator().Generate<T>();

    return new HtmlString(
           string.Format("data-corina='{{ id : \'{0}\', 'clrType' : \'{1}\' }}", 
                                        id, 
                                        typeof(T).AssemblyQualifiedName));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:52:47.133

MVC 将转义您返回的任何纯字符串。这就是为什么您的原始函数返回一个`IHtmlString`. 当您返回`HtmlString`时，管道知道您肯定希望结果包含原始 HTML。

# java - 为什么我的变量不返回答案？

> ID：15055875
> 
> 赞同：0
> 
> 时间：2013-02-24T19:49:01.687
> 
> 标签：java

所以我正在尝试构建一个程序。一切正常，但程序的数学部分除外。我希望以分钟为单位的时间转换为小时。这应该是一个十进制数，例如 30 mins=.5 hrs。我将尝试尽可能多地省略我认为与使其更易于阅读无关的代码。

```
public class StudentReader
{
    private static String studentName= "";
    private static int pages;
    private static int time;
StudentReader(String name,int pagenum, int totalTime)
    {
        studentName=name;
        pages=pagenum;
        time=totalTime;
    }
public double getTotalTimeInHours()
    {
        double total=0;
        total=time / 60;
        return total;

    }
} 
```

这个类被另一个类调用：

```
System.out.println("What is the total amount of time spent reading?: ");
totalTime=scanner.nextInt();
System.out.println(StudentReader.getTotalTime()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:50:37.683

这是一个问题：

```
total=time / 60; 
```

`time`和都是值，`60`所以`int`它使用整数除法，然后将*结果*提升为一个`double`值，以便将其分配给`total`.

这个简单的更改将迫使它使用`double`算术：

```
total=time / 60.0; 
```

但是，鉴于您实际上`total`除了 return 它之外没有做任何其他事情，代码会更简单：

```
public double getTotalTimeInHours() {
    return time / 60.0;
} 
```

此外，正如 Leeish 指出的那样，您试图将其称为`getTotalTime`，这不是方法名称......

# gpu - 如何从内存时钟/内存速度获取内存带宽

> ID：15055877
> 
> 赞同：9
> 
> 时间：2013-02-24T19:49:18.137
> 
> 标签：gpu, memory-bandwidth

仅供参考，这是我从 Nvidia 获得的规格

[http://www.geforce.com/hardware/desktop-gpus/geforce-gtx-680/specifications](http://www.geforce.com/hardware/desktop-gpus/geforce-gtx-680/specifications)

[http://www.geforce.com/hardware/desktop-gpus/geforce-gtx-titan/specifications](http://www.geforce.com/hardware/desktop-gpus/geforce-gtx-titan/specifications)

请注意，内存速度/内存时钟在他们的网站上是相同的，都以 Gbps 为单位。

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-24T19:51:54.123

Titan 有 384 位总线，而 GTX 680 只有 256，因此内存带宽增加了 50%（假设时钟和延迟相同。

**编辑：**我将尝试更多地解释整个概念：以下是决定 RAM 性能的因素的简化模型（不仅在显卡上）。

**因素 A：频率**

RAM 以时钟速度运行。以 1 GHz 运行的 RAM 每秒“滴答”1,000,000,000（十亿）次。对于每个滴答声，它可以在每个通道上接收或发送一个位。因此，理论上只有一个内存通道以 1GHz 运行的 RAM 模块将提供每秒 1 吉比特的速度，因为字节有 8 位，这意味着每秒 125 兆字节。

**因素 B：“泵速”**

DDR-RAM（双倍数据速率）可以在每个滴答中传输两位，甚至还有“四泵”总线可以在每个滴答中传输 4 位，但我还没有听说后者用于显卡。

**因素 C：总线宽度。**

RAM 不仅仅只有一个通道来发送数据。甚至 Intel 4004 也有 4 位总线。你连接的显卡分别有256条公交专用道和384条公交专用道。

将上述所有因素相乘以计算可以发送或接收数据的理论最大值：

**每秒最大吞吐量（以字节为单位）= 频率 * 泵送率 * BusWidth / 8 **

现在让我们对您链接的两个显卡进行数学计算。它们似乎都使用相同类型的 RAM（GDDR5，泵速为 2），均以 3 GHz 运行。

```
GTX-680: 3 Gbps * 2 * 256 / 8 = 192 GB/s

GTX-Titan: 3 Gbps * 2 * 384 / 8 = 288 GB/s 
```

**因素 D：延迟 - 或现实开始**

这个因素比上述所有因素的总和更难计算。基本上，当你告诉你的内存“嘿，我想要这个数据”时，它需要一段时间才能给出答案。这种延迟取决于许多因素，并且很难计算，并且通常会导致 RAM 系统的交付量低于其理论最大值。这就是所有时间、预取和大量其他内容出现的地方。由于不仅仅是可用于营销的数字，更高的数字意味着“更好”，因此营销重点主要集中在其他方面。如果您想知道，这主要是 GDDR5 与您主板上的 DDR3 不同的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-31T07:58:26.580

来自[https://www.goldfries.com/computing/gddr3-vs-gddr5-graphic-card-comparison-see-the-difference-with-the-amd-radeon-hd-7750/](https://www.goldfries.com/computing/gddr3-vs-gddr5-graphic-card-comparison-see-the-difference-with-the-amd-radeon-hd-7750/)：

( `memory clock in Hz`× `bus width`÷ 8) × `memory clock type multiplier`= 以 MB/s 为单位的带宽

其中`memory clock type multiplier`是以下之一：

HBM1/HBM2：2
GDDR3：2
GDDR5：4
GDDR5X：8

让我们以撰写本文时的顶级显卡之一，即使用 GDDR5X 内存的 GTX 1080 Ti 为例。根据[techPowerUp！](https://www.techpowerup.com/gpudb/2877/geforce-gtx-1080-ti)，此卡的规格为：

内存时钟：1376MHz
总线宽度：352-bit
内存类型：GDDR5X

如果我们将这些值代入上述公式，我们得到：

(1376 * 352 / 8) * 8 = 484 352 MB/s = ~484 GB/s

同样对于使用较旧 GDDR5 内存的[GTX 1070 ：](https://www.techpowerup.com/gpudb/2840/geforce-gtx-1070)

内存时钟：2002MHz
总线宽度：256-bit
内存类型：GDDR5

(2002 * 256 / 8) * 4 = 256 256 MB/s = ~256 GB/s

最后，对于使用 HBM1 的 AMD Fury X：

内存时钟：500MHz
总线宽度：4096-bit
内存类型：HBM1

(500 * 4096 / 8) * 2 = 512 000 MB/s = 512 GB/s

和使用 HBM2的[Vega 64 ：](https://www.techpowerup.com/gpudb/2871/radeon-rx-vega-64)

内存时钟：945MHz
总线宽度：2048-bit
内存类型：HBM2

(945 * 2048 / 8) * 2 = 483 840 MB/s = ~484 GB/s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T15:06:23.010

我认为这里解释了正确的计算：https:
[//www.goldfries.com/computing/gddr3-vs-gddr5-graphic-card-comparison-see-the-difference-with-the-amd-radeon-hd-7750 /](https://www.goldfries.com/computing/gddr3-vs-gddr5-graphic-card-comparison-see-the-difference-with-the-amd-radeon-hd-7750/)

简而言之：
“（内存时钟 x 总线宽度 / 8）* GDDR 类型乘数 = 以 GB/s 为单位的带宽

GDDR 类型乘数对于 GDDR3 是 2，对于 GDDR5 是 4。”

那里有更多的细节，很好的解释和详细。

# playframework-2.0 - Play 应用程序中模块之间的路由

> ID：15055884
> 
> 赞同：0
> 
> 时间：2013-02-24T19:49:49.073
> 
> 标签：playframework-2.0

我刚刚阅读了文档[Working with sub-projects](http://www.playframework.com/documentation/2.1.0/SBTSubProjects)并尝试创建一个包含两个模块的测试应用程序......老实说，有一些事情我不清楚。

例如，我创建了一个由主模块和授权模块组成的测试应用程序。如果用户未登录，应用程序应重定向到授权模块......完成后重定向回主模块。此外，主模块总是依赖于授权模块来确定是否允许用户访问给定的功能或资源。

也就是说，我的问题是：

1.  让应用程序的模块相互引用是否正确（例如，主模块引用授权模块和授权模块引用主模块）？
2.  如何在模块（主要是 HTML 模板）之间共享资源？
3.  资产怎么了？应该共享它们还是每个模块都应该有自己的资产？

这个想法是让一个应用程序由一组模块组成——每个模块都显示相同的菜单，并让它们从一个跳到另一个。不幸的是，周围的例子似乎不多。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:51:28.777

这里有很多问题，一个答案。

您必须有一个根应用程序和模块。这些模块被引用为依赖项，因此在主应用程序中，您可以使用模块的资源（和资产），就像它们在根应用程序中一样（如果两个资源都在两个资源中，则使用根的资源）。但反之则不然，模块不应该知道根应用程序。

如果您确实想在所有模块（可能还有您的应用程序）之间共享资源，则应该创建一个在所有模块中作为依赖项引用的通用模块。

# python - 在 Gtk.ComboBoxText 中设置占位符文本？

> ID：15055885
> 
> 赞同：1
> 
> 时间：2013-02-24T19:49:51.083
> 
> 标签：python, linux, user-interface, gtk, pygobject

我知道如何在 ComboBox 中设置默认选择，但我有一个 ComboBoxText 小部件，允许用户输入他/她的性别。所以，我可以使用`Gtk.ComboBox.set_active()`，但这会表达某种性别歧视，因为默认选择是“男性”或“女性”。

我的问题是如何在我的 ComboBox 上设置占位符字符串，但它不在选项列表中？

将 python3 与 gobject 内省一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:16:22.523

您可以使用条目创建 GtkComboBoxText，然后连接到`format-entry-text`信号，如果没有进行其他选择，则返回默认字符串。Gtk+ 文档在此处包含此信号的示例（在 C 中）：http: [//developer.gnome.org/gtk3/3.4/GtkComboBox.html#GtkComboBox-format-entry-text](http://developer.gnome.org/gtk3/3.4/GtkComboBox.html#GtkComboBox-format-entry-text)。

# php - 使用 AJAX 从服务器获取 php 文件的值

> ID：15055889
> 
> 赞同：0
> 
> 时间：2013-02-24T19:50:03.677
> 
> 标签：php, ajax

我制作了一个从特定目录获取所有文件（文件名）的 php 页面。我想使用 ajax 从 php 文件中获取值。我从来没有使用过ajax。任何人都可以建议我实现这一目标的方法吗？

我猜我的php代码很简单。它将在下拉列表中使用，这就是为什么有“选项”。

```
 <?php

foreach(glob('../files/videos/*.*') as $filename){
     $name1 = str_replace('../files/videos/', '', $filename);
     $ext = pathinfo($name1, PATHINFO_EXTENSION);
     $notneeded=".".$ext;
     $name = str_replace($notneeded, '', $name1);

     echo "<option  value='".$name1."'>".$name."</option>"."<br/>";

 }

 ?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:52:59.430

您可以简单地使用 echo，但更有用的方法是将结果编码为 JSON 字符串。但是，您可以像这样做您想做的事。

```
$.get('url/to/php/file.php',function(data){
    $('select').html(data);
}); 
```

这当然是一个 jQuery 解决方案，只是为了展示您想要实现的简单性。你可以用 vanilla javascript 编写所有这些。基本上是一个 XHR 请求，然后将返回的内容注入`data`到页面中的 select 元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:37:55.680

```
 <div style="float:left;" id="success"></div>
<div id="error"></div>
<script>
$("#success").load("yourfile.php", function(response, status, xhr) {
  if (status == "error") {
    var msg = "Sorry but there was an error: ";
    $("#error").html(msg + xhr.status + " " + xhr.statusText);
  }
});
  </script> 
```

# javascript - JavaScript 函数中的范围变量

> ID：15055890
> 
> 赞同：0
> 
> 时间：2013-02-24T19:50:09.777
> 
> 标签：javascript

问：您将如何命名位于另一个函数内部的函数中的局部作用域？

让我解释：

我想使用的命名约定有问题。这是一个简单的例子：

```
!function($, window, undefined) {
    var Variables = {};
    Variables.X = 1;

    function myFunction() {
        var local = {};
        local.X = 2;
        $('.myClass').each(function() {
            var local = {};
            local.X = 3;
        });
    }
}(jQuery, window); 
```

现在，我决定使用名为“变量”的对象来容纳所有在函数之间共享的所有对象。一个全局范围，如果你愿意的话，限制在外部 !function() {} 定义内。

我决定使用名为“local”的对象来容纳函数内的所有对象。我的问题是函数内部的函数范围。我想我必须以某种方式合并函数的名称以使其独一无二。我知道在这个简单的例子中，local.X 是两个独立的变量。但我想分别命名它们，以便人类更容易阅读。我不想在 6 个月后回来想知道 local.X 是什么。

添加到问题的是它是一个匿名函数，因此没有函数名称可以绑定以使“本地范围”唯一可识别。我可能必须制定一个规则，如果在回调函数中需要一个变量，那么给回调函数一个名称并将本地范围与该名称绑定（以某种方式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:00:31.260

您尝试设置范围的方式有点奇怪，并没有真正利用 Javascript 设计来处理这个问题的方式......

更标准的方法是这样的：

```
function($, window, undefined) {
    var x = 1;

    function myFunction() {
        var y = 2;
        $('.myClass').each(function() {
            var z = 3;
        });
    }
}(jQuery, window); 
```

当然，您似乎想重用相同的变量名...对于最外层`x` ，您可以给它一个名称空间，例如 myPlugin.x，但是尝试为传递给的函数设置本地范围对`each`我来说没有多大意义...为了让它影响自身之外的任何东西，它必须只使用 . 范围内的变量`myFunction`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T20:10:52.403

我建议依靠语义。即，每个（甚至是匿名的）函数都有*一些*创建它的目标。

此外，它还提供了两个额外的好处：1）更好的可读性，2）自我证明的代码（我的意思是，如果你没有困难给范围起一个有意义的名字，这意味着你的模型是好的，并且你根据[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)）。

希望这可以帮助。

# c# - 无法从 Func 转换 功能

> ID：15055900
> 
> 赞同：2
> 
> 时间：2013-02-24T19:50:55.293
> 
> 标签：c#, generics, casting, delegates

我对这个错误感到很困惑：

> `Cannot implicitly convert type 'System.Func<T,T,T> [c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\mscorlib.dll]' to 'System.Func<T,T,T> [c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\mscorlib.dll]' path\to\my\project\Operators.cs`

类型是相同的，为什么它甚至试图做一个演员？这是代码：

```
public static class Operators<T>
{
    private static Func<T,T,T> _add = null;

    public static T Add<T>(T a, T b)
    {
        if (_add == null) {
            var param1Expr = Expression.Parameter(typeof (T));
            var param2Expr = Expression.Parameter(typeof (T));
            var addExpr = Expression.Add(param1Expr, param2Expr);
            var expr = Expression.Lambda<Func<T, T, T>>(addExpr, param1Expr, param2Expr);
            _add = expr.Compile(); // <--- error occurs here
        }
        return _add.Invoke(a, b);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T19:52:53.000

问题是您的*方法*是通用的，引入了一个新的类型参数`T`。所以`T`外部方法与`T`内部方法不同。

只需将您的方法更改为不是通用的：

```
public static T Add(T a, T b) 
```

……应该没问题。

更清楚地说，您的代码当前*等效*于：

```
public static class Operators<TC>
{
    private static Func<TC, TC, TC> _add = null;

    public static TM Add<TM>(TM a, TM b)
    {
        if (_add == null) {
            var param1Expr = Expression.Parameter(typeof(TM));
            var param2Expr = Expression.Parameter(typeof(TM));
            var addExpr = Expression.Add(param1Expr, param2Expr);
            var expr = Expression.Lambda<Func<TM, TM, TM>>
                          (addExpr, param1Expr, param2Expr);
            _add = expr.Compile();
        }
        return _add.Invoke(a, b);
    }
} 
```

请注意我如何将*类*`T`引入的重命名为，将*方法*引入的重命名为。错误消息现在看起来更合理：*`TC``T`*`TM`**

 **```
Test.cs(19,20): error CS0029: Cannot implicitly convert type
        'System.Func<TM,TM,TM>' to 'System.Func<TC,TC,TC>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T19:53:00.673

`T`for 你的类`Operators<T>`和`T`type 参数`Add`是不同的类型，所以不能保证这些类型是兼容的。

例如你可以这样做：

```
Operators<string>.Add<int>(1, 2); 
```

编译器会为此发出警告：

> 类型参数 'T' 与外部类型 'Operators' 中的类型参数同名**

# javascript - Javascript：无法从数组中检索值

> ID：15055901
> 
> 赞同：0
> 
> 时间：2013-02-24T19:50:57.370
> 
> 标签：javascript

我有一个代码

```
alert(JSON.stringify((this.shop.get('selectedOrder')).get('orderLines'))); 
```

结果看起来像这样

```
[{"cart_weight":0,"total_weight":1,"quantity":1,"list_price":1,"discount":0,"ean13":false,"product_image_small":false,"name":"Watermelon1","pos_categ_id":[1,"Others"],"taxes_id":[],"id":2}] 
```

当我运行这段代码

```
alert((this.shop.get('selectedOrder')).get('orderLines').total_weight); 
```

结果变成

```
undefined 
```

任何出口都可以提供帮助吗？

我怀疑是双括号导致问题 [{ }]，但我是 javascript 新手。无法解决问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:52:29.990

尝试`alert((this.shop.get('selectedOrder').get('orderLines')[0].total_weight);`

正如您所怀疑的，您的结果不是一个对象（在 javascript 术语中，介于 之间的任何数据）而是一个包含一个对象`{}`的数组 ( )。`[]`因此，您必须在访问属性之前访问数组的第一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:53:40.313

您选择的订单有多行。您需要选择从哪条线获取`total_weight`。在这种情况下，只有一行 - 因此您可以使用`[0]`. IE：

```
alert((this.shop.get('selectedOrder')).get('orderLines')[0].total_weight); 
```

例如，如果您需要计算整个订单的权重，则可以遍历所有订单行并计算总和。

# haskell - Haskell - 使用高级类型功能帮助简化功能

> ID：15055902
> 
> 赞同：3
> 
> 时间：2013-02-24T19:51:07.993
> 
> 标签：haskell, interpreter, dynamic-typing

我正在为 Haskell 中的动态类型语言编写解释器。

像大多数动态类型的语言解释器一样，我的程序也需要在运行时检查类型。我的程序中最常用的代码之一是：

```
interpreterFunction :: Value -> SomeMonadicContext ReturnType
interpreterFunction p = do
    VStr s <- ensureType p TString
    ..
    some code that uses s 
```

在这里我确保它`p`有 type `TString`，然后我用`VStr s <- ...`. 这永远不会失败，因为`VStr`它是唯一具有 type 的值`TString`。

我的数据结构基本上是这样的：

```
data Value = VStr String | VInt Int | VBool Bool
data Type  = TStr | TInt | TBool 
```

所以我根据它们的类型来区分我的值。IE。我只有一个具有`TStr`as 类型的值构造函数。

现在我想知道是否有办法简化我的`ensureType`函数和解构代码。例如，这样的事情是否可能：

```
interpreterFunction p = do
    s <- ensureType p
    ..
    same code that uses s 
```

这里从后面的代码`s <-`可以推导出它`s`有类型`String`，并且静态知道只有`Value`构造函数有一个`String`部分`VStr`，所以动态检查是否是a后`ensureType`返回。`String``p``VStr`

我实际上不知道这是否有意义或可能。我只是想借助 Haskell 的高级类型系统功能来改进我的设计。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T00:04:23.540

是的，您实际上可以在类型类的帮助下做到这一点。是否明智值得商榷（对于您的简单`Value`类型，模式匹配可能是更好的解决方案），但它仍然很有趣:)

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE TypeSynonymInstances #-}
module Main where

data Value = VStr String | VInt Int | VBool Bool

class FromValue a where
    fromValue :: Value -> Maybe a
instance FromValue String where
    fromValue (VStr s) = Just s
    fromValue _ = Nothing

ensureType :: (Monad m, FromValue a) => Value -> m a
ensureType = maybe (fail "type error!") return . fromValue

interpreterFunction :: Value -> IO ()
interpreterFunction val = 
    do s <- ensureType val
       putStrLn s

main =
    do interpreterFunction (VStr "asd")
       interpreterFunction (VInt 1) 
```

印刷：

```
asd
*** Exception: user error (type error!) 
```

`ScopedTypeVariables`当无法推断特定类型时，您还可以使用扩展来强制它：

```
{-# LANGUAGE ScopedTypeVariables #-}
interpreterFunction2 :: Value -> IO ()
interpreterFunction2 val = 
    do (s :: String) <- ensureType val
       print s 
```

顺便说一句，你最初的方法对我来说似乎有点“不合理”：

```
VStr s <- ensureType p TString 
```

尽管您可能确定（通过自省）`ensureType x TString`除了字符串之外永远不会返回任何内容，但这不是由类型系统强制执行的，并且模式匹配是非穷举的。这不是一个大问题，但您可以通过使用特殊的“字符串提取”函数轻松消除该函数运行时失败的可能性：

```
ensureString :: (Monad m) => Value -> m String
{- ... -}
s <- ensureString val 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T02:21:54.850

## 1.干净，清晰的简单方法：

我认为您定义的标记联合类型

```
data Value = VStr String | VInt Int | VBool Bool 
```

将您需要的所有运行时类型检查内置为普通的旧模式匹配，并且将其包装在一些高级类型系统功能中缺少一个干净清晰的解决方案：

```
interpreterFunction :: Value -> SomeMonadicContext ReturnType
interpreterFunction (Vstr s) = do
    some code that uses s
interpreterFunction _ = do
    some error handling code 
```

你喜欢的：

```
interpreterFunction p = do
    s <- ensureType p
    ..
    same code that uses s 
```

说

> “这里从s<-之后的代码可以推断出s的类型是String，并且静态知道只有带有String部分的Value构造函数是VStr，所以ensureType在动态检查p是否为VStr后返回String。

我的版本还动态检查 p 是否为 VStr。*静态地*知道，唯一具有 String 部分的 Value 构造函数是 VStr，但这实际上很难利用。

## 2\. 不太干净的基于类型类的方式

我们需要创建一个 String 实例，所以我们需要

```
{-# LANGUAGE TypeSynonymInstances, FlexibleInstances #-}

class FromValue a where 
   ensureType :: Value -> SomeMonadicContext a 
```

示例实例：

```
instance FromValue String where
   ensureType (VStr s) = return s
   ensureType  _       = fail $ unlines 
                          ["Yikes, I'd rather have thrown a Nothing than a fail,"
                          ,"but then I'd have to have detagged the Just later"
                          ,"and then I may as well have used solution 1 anyway!"]

instance FromValue Int where
   ensureType (VInt i) = return i
   ensureType  _       = fail "Oh no, do I really have to use catch?" 
```

哪个会给

```
interpreterFunction :: Value -> IO String
interpreterFunction p = do
    s <- ensureType p
    return $ s ++ ", yay!" -- example String-specific code. 
```

这样做的缺点是它会失败而不是选择对用户的适当响应。您可以使用`catch`恢复，但同样，您正在做大量的工作只是为了复制模式匹配解决方案提供的可定制的案例处理功能。

**2b。也许？**

在其中使用 Maybe 数据类型`ensureType`可以避免烦人的失败/捕获，但是您必须执行 `Just s <- ensureType p`或使用该`maybe`函数，所有这些至少与普通模式匹配一​​样多。

## 3\. 一些聪明而新颖但不合适的东西

或者，如果您的主要目标是使用更酷的和更新的类型系统功能，您可以使用 GADT 来复制存在类型，或者 Dynamic 以更结构化、动态类型的方式来实现，但不要这样做；这些都没有直接模式匹配的清晰、简单和优雅。

# mongodb - 如何在 mongo 中更新数组中的数组？

> ID：15055908
> 
> 赞同：1
> 
> 时间：2013-02-24T19:51:40.563
> 
> 标签：mongodb, document

```
user{
      '_id' : ObjectId(...),
      'Post' : [
                   {
                     'id' : ObjectId(...),
                      'Reply' : [
                                   '_id' : ObjectId(...),
                                   'Reply' : [
                                               ....*Repeated results*

                                             ]

                                ]
                    }                 

               ]

} 
```

我试图对我的 mongo 数据库有一个递归结构。例如，回复回复。我将如何访问我想要的结构，比如说底部结构。Post.Reply.$.Reply 似乎不起作用。（回复也有其他字段，如实际消息、时间，但我在示例中省略了它们）。

这是我尝试过的查询。

```
({
    'Post._id': ObjectId('512a48518f24a04b77946888'),
    '_id': ObjectId('5119cf32decedf8257ef6acf'), 
    'Post.Reply._id': ObjectId('512a49548f24a04b9b74ad6b')
}, {
    '$push': {
        'Wall.Reply.$.Reply': {
            'ParentId': ObjectId('512a49548f24a04b9b74ad6b'), 
            'UserId': ObjectId('511747a18f24a0069b7ed655'), 
            'Depth': 2, 
            'Time': datetime.datetime(2013, 2, 24, 14, 40, 52, 420056), 
            'Message': 'This post is not good!', 
            '_id': ObjectId('512a6cc48f24a04d189a1e3a')
        }
    }
}) 
```

# django - 自定义夹层以允许用户编辑和发布自己的博客

> ID：15055909
> 
> 赞同：2
> 
> 时间：2013-02-24T19:51:43.020
> 
> 标签：django, django-models, blogs, mezzanine

我正在尝试使用 Mezzanine 创建一个多用户博客平台，该网站的每个用户都将获得一个博客仪表板，用于发布和编辑他们的博客。夹层中有没有办法给喜欢添加和管理他们博客的用户一些管理员权限？我不想让用户完全访问站点管理员。

我探索了其他博客包，但因为我已经为其他用例定制了夹层，所以很难移开。基本上试图在夹层本身中找到解决方案。

您能否指导我如何在夹层中实现这一目标。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:08:57.883

这大多是可能的。您可以创建只能访问博客应用程序的管理员用户，并且只会列出他们自己的博客文章。

# javascript - 屏幕上的恒定和重复动画

> ID：15055922
> 
> 赞同：1
> 
> 时间：2013-02-24T19:52:48.693
> 
> 标签：javascript, jquery

**我正在尝试创建气泡慢慢上升到屏幕顶部的效果，我现在拥有的是这个，**

[http://jsfiddle.net/PMF7k/](http://jsfiddle.net/PMF7k/)

*（不知道为什么它不起作用，但你知道我目前计划解决这个问题的方式。）*

```
function bubbles() {
$(".bubble").animate({
    'background': "rgba(0,0,0,0.4)",
        'top': '-300px'
}, 200);
}

bubbles();
setInterval(function () {
bubbles();
}, 200); 
```

我的问题是，有没有一种有效的方法可以重用屏幕外的元素？例如，当浏览器窗口无法查看气泡 A 时，它会走到底部并再次重复其循环？

另外作为一个简短的附带问题，是否最好通过 jQuery 对其进行动画处理，将其包装在一个函数中并使用 setInterval 不断调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:08:31.350

jquery的动画

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

允许您指定将在动画完成时调用的回调函数。

设置一个回调来重置气泡的位置，并将该回调指定为 animate的**完整参数**

您还希望回调重新调用动画以重新启动动画（您不需要 setInterval）。

可选的初始位置（x 和 y）、速度、颜色等可以随机更改。

根据需要添加许多气泡，为每个气泡调用**animate jquery 方法。**

*顺便说一句：jsfiddle 不起作用，因为您没有指定加载 jquery*

# c++ - 带有堆指针的复制构造函数

> ID：15055926
> 
> 赞同：1
> 
> 时间：2013-02-24T19:53:05.073
> 
> 标签：c++, pointers

我试图让一个指针在创建时调用复制构造函数，但似乎继续引用该对象。那是我在做什么完全错了。

```
Queue<int> * a = new Queue<int>();
Queue<int> * b = a; 
```

这一直引用 a 而不是使用在堆栈分配的对象上工作正常的复制构造函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T19:54:20.920

您不能通过这样的指针调用复制构造函数。

要调用复制构造函数，您需要更明确：

```
Queue< int >* b = new Queue< int >( *a ); 
```

# android - 在 Android 应用中发送电子邮件

> ID：15055927
> 
> 赞同：4
> 
> 时间：2013-02-24T19:53:08.147
> 
> 标签：android, email

我正在开发 android 应用程序，有一个页面**Forgot password**。当用户点击它时，应用程序只需验证他输入的电子邮件并将密码发送到该电子邮件。意思是，我只想从 android 应用程序发送私人电子邮件，

我已经使用 JavaMail Api 完成了工作，从我的 gmail 帐户发送电子邮件，但这不是一个好方法，因为 gmail 会阻止邮件帐户，如果它同时从多个国家访问等（将邮件视为垃圾邮件并阻止它）

有没有经过身份验证的好方法来完成这项工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T10:29:15.230

使用以下代码在后台发送电子邮件。

```
public class EmailGengerator extends javax.mail.Authenticator {

private String _user;
private String _pass;

private String[] _to;
private String _from;

private final String _port;
private final String _sport;

private final String _host;

private String _subject;
private String _body;

private final boolean _auth;

private final boolean _debuggable;

private final Multipart _multipart;
private final Context context;

private Properties props ;
private MimeMessage msg;
private Session session; 
private boolean status;

/**
 * Public Constructor. 
 * @param context
 */
public EmailGengerator(Context context) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy); 

    this.context=context;
    _host = "smtp.gmail.com"; // default smtp server
    _port = "465"; // default smtp port
    _sport = "465"; // default socketfactory port
    status = false;
    _user = ""; // username
    _pass = ""; // password
    _from = ""; // email sent from
    _subject = ""; // email subject
    _body = ""; // email body

    _debuggable = false; // debug mode on or off - default off
    _auth = true; // smtp authentication - default on

    _multipart = new MimeMultipart();

    // There is something wrong with MailCap, javamail can not find a
    // handler for the multipart/mixed part, so this bit needs to be added.
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap
            .getDefaultCommandMap();
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
    CommandMap.setDefaultCommandMap(mc);
}

public EmailGengerator(Context context,String user, String pass) {
    this(context);

    _user = user;
    _pass = pass;
}

/**
 * Function will handle the Sending Part,
 * @return
 * @throws Exception
 */
public boolean send() {
    try{

        props = _setProperties();

        session = Session.getInstance(props, this);

        msg = new MimeMessage(session);

        if (!_user.equals("") && !_pass.equals("") && _to.length > 0
                && !_from.equals("") && !_subject.equals("")
                && !_body.equals("")) {
            msg.setFrom(new InternetAddress(_from));
            InternetAddress[] addressTo = new InternetAddress[_to.length];
            for (int i = 0; i < _to.length; i++) {
                addressTo[i] = new InternetAddress(_to[i]);
            }
            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

            msg.setSubject(_subject);
            msg.setSentDate(new Date());
            BodyPart messageBodyPart = new MimeBodyPart();
            messageBodyPart.setText(_body);
            _multipart.addBodyPart(messageBodyPart);

            // Put parts in message
            msg.setContent(_multipart);

            // send email
            Transport.send(msg);

            status=true;            

        }else {

            status =false;
        }
    }catch(Exception ee){
        ((Activity)this.context).finish();
        ee.printStackTrace();
    }

    return status;
}

@Override
public PasswordAuthentication getPasswordAuthentication() {
    return new PasswordAuthentication(_user, _pass);
}

private Properties _setProperties() {
    Properties props = new Properties();

    props.put("mail.smtp.host", _host);

    if (_debuggable) {
        props.put("mail.debug", "true");
    }

    if (_auth) {
        props.put("mail.smtp.auth", "true");
    }

    props.put("mail.smtp.port", _port);
    props.put("mail.smtp.socketFactory.port", _sport);
    props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "false");

    return props;
}

// the getters and setters
public String getBody() {
    return _body;
}

public void setBody(String _body) {
    this._body = _body;
}

public void setTo(String[] toArr) {
    this._to = toArr;
}

public void setFrom(String string) {
    this._from = string;
}

public void setSubject(String string) {
    this._subject = string;
}

public void sendEmail(Context context, String toAddress) {

    /**
     * Setting Mail Creator.
     */
    EmailGengerator m = new EmailGengerator(context,"your mail id",
            "your password");

    String[] toArr = { toAddress };
    m.setTo(toArr);
    m.setFrom("your mail id");
    m.setSubject(your subject);
    m.setBody("message");

    m.send(); }

} 
```

**注意：您需要添加 Mail.Jar 和 Activation.jar 才能使此代码正常工作。**

# eclipse - 尽管有所有说明，但客观化错误

> ID：15055928
> 
> 赞同：1
> 
> 时间：2013-02-24T19:53:09.927
> 
> 标签：eclipse, gwt, objectify

我明白了... [错误] 无法找到 'com/googlecode/objectify/Objectify.gwt.xml'... 当我尝试使用 objectify 运行 GWT 应用程序时。

应用程序本身运行，直到我插入然后它给我错误

*加载继承的模块 'com.googlecode.objectify.Objectify' [错误] 无法在您的类路径中找到 'com/googlecode/objectify/Objectify.gwt.xml'；可能是拼写错误，或者您忘记包含源的类路径条目？*

我不知道如何解决这个问题。我做了外部库添加路径，导入到war/WEB-INF/lib文件夹（objectify-4.0b1-javadoc.jar）

这都是使用 Eclipse

环境1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:46:29.310

不要将 -javadoc.jar 文件放在 WEB-INF/lib 中，将普通的 objectify jar 放在那里。

# python - -> 在 python 函数定义中

> ID：15055929
> 
> 赞同：2
> 
> 时间：2013-02-24T19:53:26.147
> 
> 标签：python, python-3.x

我正在查看[python 3.3 语法](http://docs.python.org/3.1/reference/grammar.html)，并注意到其中的这一行：

```
funcdef: 'def' NAME parameters ['->' test] ':' suite 
```

这意味着 -> 在定义函数时是一个有效符号，但我在网上找不到任何说明它是什么的地方，据我所知，它被忽略了。例如，我可以编写执行此操作的代码：

```
def a() -> True: pass 
```

或者

```
def a() -> 5 == 3:
    return 8 
```

都是有效的陈述，但似乎没有做任何事情。

谁能告诉我`->`python中的语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:00:53.123

这些是[PEP 3107](http://www.python.org/dev/peps/pep-3107/)中涵盖的函数注释。具体来说，`->`标记返回函数注释。

例子：

```
>>> def kinetic_energy(m:'in KG', v:'in M/S')->'Joules': 
...    return 1/2*m*v**2
... 
>>> kinetic_energy.__annotations__
{'return': 'Joules', 'v': 'in M/S', 'm': 'in KG'} 
```

注释是字典，所以你可以这样做：

```
>>> '{:,} {}'.format(kenetic_energy(20,3000),
      kenetic_energy.__annotations__['return'])
'90,000,000.0 Joules' 
```

或者，您可以使用函数属性来验证调用的值：

```
def validate(func, locals):
    for var, test in func.__annotations__.items():
        value = locals[var]
        try: 
            pr=test.__name__+': '+test.__docstring__
        except AttributeError:
            pr=test.__name__   
        msg = '{}=={}; Test: {}'.format(var, value, pr)
        assert test(value), msg

def between(lo, hi):
    def _between(x):
            return lo <= x <= hi
    _between.__docstring__='must be between {} and {}'.format(lo,hi)       
    return _between

def f(x: between(3,10), y:lambda _y: isinstance(_y,int)):
    validate(f, locals())
    print(x,y) 
```

印刷

```
>>> f(2,2) 
AssertionError: x==2; Test: _between: must be between 3 and 10
>>> f(3,2.1)
AssertionError: y==2.1; Test: <lambda> 
```

# c# - 使用 HTML 帮助标签创建链接

> ID：15055934
> 
> 赞同：0
> 
> 时间：2013-02-24T19:53:42.317
> 
> 标签：c#, jquery, asp.net, asp.net-mvc, asp.net-mvc-3

我已经使用 HTML 帮助标签创建了一个链接。根据下面给出的代码，当用户点击链接时，页面将导航到另一个名为`Hello`.

```
 @Html.ActionLink("Hello", "Hello", new {  id=item.pk  }) 
```

但是，我想做的是调用一个 JS 方法并在同一页面中打开一个 div。我怎样才能做到这一点 ？**示例**：当用户单击编辑时显示和隐藏一些控件

```
@foreach (var item in Model.exampleAll)
{

@Html.ActionLink("Hello", "Hello", new {  id=item.pk  }) 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:00:28.770

将 ActionLink 更改为：

```
 @Html.ActionLink("Hello", "Hello","YourController", new { onclick = "yourFunction();"}) 
```

或者甚至更好地添加一个 js 函数来拦截您的链接的点击，这里是 JQuery：

```
@Html.ActionLink("Hello", "Hello","YourController", new { id= "someLink"}) 

$('#someLink').click(function() { alert('hello'); }); 
```

编辑：如果您需要将一个函数应用于多个元素，请使用 css 类作为选择器，更改操作链接：

```
@Html.ActionLink("Hello", "Hello","YourController", new { id= item.pk, @class = "classname"}) 

$('.classname').click(function() { alert(this.id); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:01:55.507

听起来很平凡，我会使用 html 锚

```
<a href='' id='@(item.pk)' class='itemsList'> click me </a> 
```

然后是一个 JQuery 事件处理程序

```
$('.itemsList').click(function(){
      var currentId = this.id; // get id of object that was clicked
      // populate or make visible your div here
}); 
```

它不像“MVC 方式”，但您不需要更多。

**重要提示：**如果您不想使用锚点/链接进行任何导航，使用 Html.ActionLink 似乎有点过头了。

# php - 提交错误后，PHP在复选框数组中保留复选框

> ID：15055938
> 
> 赞同：0
> 
> 时间：2013-02-24T19:54:17.570
> 
> 标签：php, arrays, post, checkbox, checked

我查看了stackoverflow，似乎无法准确找到我正在寻找的内容。我试图弄清楚这一点，到目前为止已经花了几个小时。

我通过 foreach 输出数据库结果并生成带有文本的框，在 foreach 语句中，有以下代码为 print_select 构建数组。如果我的表单有错误，我需要保留复选框选择，然后有人返回复选框所在的初始页面（我已完成所有表单和错误部分）。

这是我的html：

```
<input type=\"checkbox\" name=\"print_select[]\" value=\"{$value['id']}\"> 
```

{$value['id']} 代表数值，每一个都是不同的。

现在如果这是一个简单的 name="something" 我可以在页面重新加载一些 php 后将其设置为选中，但这使用了一个数组，这对我来说有点棘手。

使用数组时，有没有人能够在发布后保留复选框选择？我可能错过了一些非常简单的东西，但我认为在这里也值得一问。

# javascript - 将txt文件数据读入javascript数组

> ID：15055940
> 
> 赞同：0
> 
> 时间：2013-02-24T19:54:39.963
> 
> 标签：javascript

我有一个脚本，它按顺序将 url 放入一个 iframe：

```
 <script type="text/javascript">
    $(document).ready(function(){   
    var array = ['http://www.example1.come', 'http://www.example2.com', 'http://www.example3.com'];
    var beforeLoad = (new Date()).getTime();
    var loadTimes = [];
    $('#1').on('load', function() {
       loadTimes.push((new Date()).getTime());                  
       $('#1').attr('src', array.pop());
        if (array.length === 0) { 
            $.each(loadTimes, function(index, value) {
               $("#loadingtime"+index).html(value - beforeLoad); 
            });
        }
    }).attr('src', array.pop());
    });
    </script> 
```

我得到了一个包含 url 列表的 txt 文件。该文件中的 url 写在一列中（1 列，每个 url 从新行开始）。如何用该 txt 文件的内容替换 javascript 中的“var 数组”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:17:47.953

这是基本要点，您需要在我放置评论的位置检索文件后嵌入您想要运行的任何代码。

```
$.get("your_url", 
       function(data) {
           var array = data.split(/\r\n|\r|\n/) //regex to split on line ending
           var beforeLoad = (new Date()).getTime();
           var loadTimes = [];
           //.... rest of your code here
       }
); 
```

请注意，如果文件不存在，这不会进行任何错误处理，您可能希望重写它以使用[此处描述的 jQuery 的“Promise”接口。](http://api.jquery.com/jQuery.post/#jqxhr-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:12:44.113

使用 jQuery 的 get 方法直接从服务器请求文件，或者使用 get 调用 php 脚本，将文件解析为 JSON 等友好格式。

```
$.get('file.txt'); 
```

如果您将 url 解析为 JSON 格式，那么当您收到它时，您可以轻松地使用这些 url。

```
$.get('file.txt', function(data){
    obj = JSON.parse(data);
    // ....
}); 
```

# html - 我如何制作“显示：无；” 适用于包含 div 的元素 awell

> ID：15055949
> 
> 赞同：0
> 
> 时间：2013-02-24T19:55:51.907
> 
> 标签：html, css

我正在尝试隐藏一些内容，并且仅在在`<select>`字段中选择某些内容时才显示它。

据我了解，我需要隐藏内容作为开始，所以我正在尝试这样做：

```
 <div id="abc" style="display:none;">
       <tr> <!-- Third row -->
        <td>
            from
        </td>

        <td>
           <select name="serv" id="serv" style="width:100%; text-align:center; font-weight:bold;">

                <option value="US" name="US">Some other US option</option>
                <option value="US" name="US">some US option</option>

            </select>
        </td>
       </tr>
      </div> 
```

这只隐藏了`<div>`而不是它的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:06:49.907

浏览器解析此代码

```
<table>
    <div>
        <tr>
            <td>TABLE CELL</td>
        </tr>
    </div>
</table> 
```

进入这个结构

![截屏](../Images/4888bfeffa0c80fe51426d17fd977a5b.png)

请注意 DIV 如何**不**包裹您的表格行，而是放置**在**表格之前（作为相邻的兄弟）。因此，如果隐藏 DIV，表格行将不会随之隐藏。

无效的 HTML 会导致意外行为。编写有效的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:02:43.333

那`<div>`看起来不对。我假设您的`<table>`代码中的其他地方有一个标签，但您没有将它粘贴到这里。

您可以尝试将样式应用于`<tr>`标签。元素的子元素应始终继承该元素的样式，因此您放错`<div>`位置的标签可能是问题所在。试试这个：

```
<tr id="abc" style="display:none;"> <!-- Third row -->
    <td>
        from
    </td>

    <td>
       <select name="serv" id="serv" style="width:100%; text-align:center; font-weight:bold;">

            <option value="US" name="US">Some other US option</option>
            <option value="US" name="US">some US option</option>

        </select>
    </td>
</tr> 
```

# jquery - 在html中使用jquery从数组中拉出项目

> ID：15055951
> 
> 赞同：0
> 
> 时间：2013-02-24T19:56:02.557
> 
> 标签：jquery, html, responsive-design

我正在尝试为我的博客设置一个响应式幻灯片放映，并希望使用 Flickr api 让它工作。我在 flickr 上设置了我的图像所在的 url 数组，但随后我想将它们动态加载到幻灯片中。在 responsiveSlides.js 中，当我加载图像时，它不起作用，页面上的所有内容都呈现得非常糟糕。关于如何实现这一点的任何想法？

```
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jquery</title> 

    $(function () {

      // Slideshow 1
      $("#slider1").responsiveSlides({
        maxwidth: 800,
        speed: 800
      });

      // Slideshow 2
      $("#slider2").responsiveSlides({
        auto: false,
        pager: true,
        speed: 300,
        maxwidth: 540
      });

      // Slideshow 3
      $("#slider3").responsiveSlides({
        manualControls: '#slider3-pager',
        maxwidth: 540
      });

      // Slideshow 4
      $("#slider4").responsiveSlides({
        auto: false,
        pager: false,
        nav: true,
        speed: 500,
        namespace: "callbacks",
        before: function () {
          $('.events').append("<li>before event fired.</li>");
        },
        after: function () {
          $('.events').append("<li>after event fired.</li>");
        }
      });

    });

    var apiCall = "flickr json callback"; 
    var urls = new Array();

    $(document).ready(function() {
    $.getJSON(apiCall, function(data){

        $.each(data.photoset.photo, function(i, photo){
            var img_src = "http://farm" + photo.farm + ".static.flickr.com/" + photo.server + "/" + photo.id + "_" + photo.secret + "_" + "s.jpg";
            urls.push(img_src);
        });
    });

  </script>
</head>
<body>
  <div id="wrapper">
    <h1>ResponsiveSlides.js</h1>

    <!-- Slideshow 1 -->

    <ul class="rslides" id="slider1">
WHERE I WANT TO IMPORT THE IMAGE FROM THE ARRAY POPULATED IN JQUERY
      <li><img src="images/1.jpg" id="image" alt="nothing"></li>
     <script src="jquery-1.9.1.min.js">
        document.getElementById('image').src = urls.get(0);
     </script>
      <li><img src=urls[2] alt=""></li>
      <li><img src="images/3.jpg" alt=""></li>
    </ul>

  </div>

</body>
</html> 
```

编辑：我想我的问题是：当我有一个 html img src=x 时，x 可以从 jquery 数组中拉出并用作源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:19:56.417

还要确保检查您的插件功能是否在 $document.ready 之后运行。（当然 $(document).ready() 将首先运行）。

试试这个 ：

```
 $.getJSON(apiCall, function(data){

   $.each(data.photoset.photo, function(i, photo){//Populate your array});
    // Sanity : please check the size of array is equivalent to the number of  
    //the image tags in <li>
   $( "li img" ).each(function( index ) {
         $(this).attr('src', urls.pop());
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:14:22.357

因为`urls`是一个数组，所以用来`urls[index]`从中检索元素。如果您想获取该项目并同时删除该项目，请使用`pop`方法。

```
document.getElementById('image').src = urls.pop(); 
```

# mysql - 数据库（反）规范化 - 包含不同实体图像的表

> ID：15055955
> 
> 赞同：0
> 
> 时间：2013-02-24T19:56:15.740
> 
> 标签：mysql, database, normalization, denormalization

我有一个存储产品图像元数据的数据库模式，如下所示：

```
image_sizes (this is purely metadata - what sizes to create of given image, eg "thumb", "main image", "sidebar widget icon of the product", etc):
image_size_id (auto-increment, pk)
name (thumb, main)
max_width
max_height
crop (flag, to crop or just resize to fit)

images table:
image_id (auto-increment, pk)
image_size_id (fk to image_sizes)
image_batch_id (fk to batches, when there is uploaded image for the product, an image is created for each product size, all the images have same batch_id, described below)
location (relative path to the project eg uploads/products/thumbs)
width (result after processing, in pixels
height (result after processing, in pixels)
size (in bytes)

image_batches tables:
image_batch_id (auto-increment, pk)
product_id (fk, to which product it belongs)
original_filename (eg the file was called 123.jpg when uploaded)
is_default (if the product 10 images, one is default) 
```

因此，此架构允许我获取产品的所有“缩略图”并显示它们。现在的问题是我想在应用程序中为用户或其他实体（也可以说场所）拥有相同的模式。

如果我修改下面的模式是否合适，以便：

`image_batches`有额外的专栏`image_type_id`。会有`image_type`, `products`, . `users`_ `everything else that needs images`而不是`product_id`让`entry_id`image_type`products`将是产品 ID，而对于图像类型`users`将是 user_id 等等。

我知道这是可能导致问题的非规范化（如果应用程序端存在错误）。但是，如果我需要新类型实体的图像来创建一组 3 个新表来处理相同的问题，这似乎开销太大。同样，在应用程序端也会有（某种）代码重复。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:14:46.677

简短回答：不，那将使用数据库反模式——主要问题是缺乏参照完整性，因为您*将无法*在该表上定义外键。

长答案：您要做的事情的名称是“多态关联”。有几种方法：

**解决方案 A)**有两个可为空的列：product_id 和 user_id

这比只有 entry_id 更好，因为您可以定义外键。您的应用程序只需确保对于 image_batches 表中的每一行，这些列中的一个（并且只有一个）为 NULL。

**解决方案 B）**有两个中间表：product_image_batches 和 user_image_batches，每个都引用您的 image_id

这将减轻维护应用程序完整性的负担，并将其移至数据库，但会引入两个新表。

# java - AsyncTask 中的 NullPointerException

> ID：15055958
> 
> 赞同：0
> 
> 时间：2013-02-24T19:57:01.907
> 
> 标签：java, android, nullpointerexception

这是我的 AsyncTask 类。

```
class AsyncLoad extends AsyncTask<Void, Void, ArrayList<ListData>> {

    int i = 0;

    protected ArrayList<ListData>[] onPostExecute(ArrayList<ListData>... result) {

        return result;
    }

    protected ArrayList<ListData> doInBackground(Void... parameter) {

        ArrayList<ListData> news = null;

        int[] id = { 1, 2, 3, 4, 5 };
        String[] title = { "title1", "title2", "title3", "title4", "title5" };
        String[] category = { "category1", "category2", "category3",
                "category4", "category5" };
        int[] image = { R.drawable.pic01, R.drawable.pic02, R.drawable.pic03,
                R.drawable.pic04, R.drawable.pic05, R.drawable.pic06 };

        for (i = 0; i <= id.length - 1; i++) {

            news.add(new ListData(id[i], title[i], category[i], image[i]));

        }

        return news;

    }
} 
```

当我尝试执行此任务时，出现此错误：LOG

```
02-24 21:44:51.265: E/AndroidRuntime(7684): FATAL EXCEPTION: AsyncTask #1
02-24 21:44:51.265: E/AndroidRuntime(7684): java.lang.RuntimeException: An error     occured while executing doInBackground()
02-24 21:44:51.265: E/AndroidRuntime(7684): at    android.os.AsyncTask$3.done(AsyncTask.java:278)
02-24 21:44:51.265: E/AndroidRuntime(7684): at    java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-24 21:44:51.265: E/AndroidRuntime(7684):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-24 21:44:51.265: E/AndroidRuntime(7684):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-24 21:44:51.265: E/AndroidRuntime(7684):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-24 21:44:51.265: E/AndroidRuntime(7684):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
02-24 21:44:51.265: E/AndroidRuntime(7684):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-24 21:44:51.265: E/AndroidRuntime(7684):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-24 21:44:51.265: E/AndroidRuntime(7684):     at java.lang.Thread.run(Thread.java:856)
02-24 21:44:51.265: E/AndroidRuntime(7684): Caused by: java.lang.NullPointerException 
```

这是 ListData.java：

```
package com.example.test2;

public class ListData {
int id;
String title;      
String category;          
int image;     

ListData(int _id, String _title, String _category, int _image) {
  id = _id;
  title = _title;
  category = _category;
  image = _image;     

} 
```

}

在 MainActivity 我只是执行 AsynTask ( AsyncLoad load = new AsyncLoad(); load.execute(); )

**请帮我找出我错在哪里！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T19:58:38.037

嗯，是。看这个：

```
ArrayList<ListData> news = null; 
```

接着：

```
news.add(new ListData(id[i], title[i], category[i], image[i])); 
```

你期望它如何工作？`news`永远不会有非空值，所以当你打电话时`news.add`你*会*得到一个`NullPointerException`. 你想要这样的东西：

```
List<ListData> news = new ArrayList<ListData>(); 
```

（注意我是如何用作`ArrayList`具体实现的，但我更喜欢对接口进行一般编程，我将`news`变量本身设置为 type `List<ListData>`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:58:54.260

你从来没有实例化你的 list `news`。你需要这样做：

```
ArrayList<ListData> news = new ArrayList<ListData>(); 
```

# android - android-maven-plugin：禁用 apk 的调试构建

> ID：15055961
> 
> 赞同：15
> 
> 时间：2013-02-24T19:57:14.833
> 
> 标签：android, debugging, maven, build, maven-plugin

我不清楚使用 android-maven-plugin 构建时禁用调试构建的确切过程：

我知道带有 ADT(21.1) 的导出向导会自动禁用调试，但由于 BuildConfig.DEBUG 总是返回 true 并且我的日志记录曾经依赖它，所以它被破坏了。（现在我在我的 Maven 构建配置文件中定义了我自己的日志记录属性。）

因此，如果我必须使用 android-maven-plugin 禁用调试，那么正确的方法是什么？

我使用以下插件：

1.  maven 编译器插件
2.  maven-jarsigner-插件
3.  proguard-maven-插件
4.  带有 zipalign 目标和配置的 android-maven-plugin。

我不确定签名和 zipaligning 是否会自动禁用调试，因为我在 maven 输出中看到以下行：

```
[INFO] --- android-maven-plugin:3.5.0:apk (default-apk) @ stackx ---
[INFO] Copying local assets files to combined assets directory.
[INFO] Enabling debug build for apk. 
```

有没有明确的方法来禁用调试？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-24T21:15:47.653

查看Android Maven 插件 3.5.0的[更改日志- 2012-12-18 发布：](http://code.google.com/p/maven-android-plugin/wiki/Changelog)

***注意力***

由于默认情况下非发布版本现在是可调试的，因此您需要确保在发布版本中将发布参数设置为 true。

在 pom 中，这将是例如

```
<groupId>com.jayway.maven.plugins.android.generation2</groupId>
<artifactId>android-maven-plugin</artifactId>
<configuration>
    <release>true</release> 
```

或者您可以使用例如在命令行上激活

```
mvn clean deploy -Dandroid.release=true 
```

或者如果您使用发布插件，只需将上述 pom 配置添加到发布配置文件中。

## 源代码：

[com/jayway/maven/plugins/android/phase09package/ApkMojo.java](https://github.com/jayway/maven-android-plugin/blob/master/src/main/java/com/jayway/maven/plugins/android/phase09package/ApkMojo.java#L1149)

## 相关拉取请求：

*   [非发布版本现在将自动可调试](https://github.com/jayway/maven-android-plugin/pull/149)
*   [支持 BuildConfig 生成](https://github.com/jayway/maven-android-plugin/pull/123)

## 无关：

对于日志管理，更优雅和战略性的方法是使用 Proguard 在项目发布阶段删除所有日志调用，有关更多详细信息，请参阅[此处](https://stackoverflow.com/questions/12390466/android-proguard-not-removing-all-log-messages/12396486#12396486)的答案。

# sql - 在 SQL Server 中获取 datetimeoffset 的偏移量

> ID：15055963
> 
> 赞同：30
> 
> 时间：2013-02-24T19:57:28.170
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2012

在 SQL Server 中，我需要找到给定`datetimeoffset(7)`.

我已经研究了文档，并且有各种方法可以更改偏移量，但不能知道特定值的偏移量（如果我错过了，抱歉）。

好吧，我想出了以下一段代码，尽管似乎可行，但我发现它太复杂了。

```
DECLARE @datetimeOffset datetimeoffset(7)

SET @datetimeOffset = CAST('2007-05-08 22:35:29.1234567-05:00' AS datetimeoffset(7))

DECLARE @result datetimeoffset(7)
DECLARE @offsetMin int

SET @offsetMin = DATEDIFF(mi, cast(SWITCHOFFSET(@datetimeOffset, '+00:00') as datetime), cast(@datetimeOffset as datetime)) 

SELECT @offsetMin 
```

我仍然需要转换为 +00:00 格式，但想检查是否有更好的方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-24T20:45:32.110

datepart 函数有一个 tz 选项，它是以分钟为单位的时区偏移量。

```
datepart(tz,@datetimeoffset) 
```

# c# - 为 c# 解决方案构建优化

> ID：15055964
> 
> 赞同：0
> 
> 时间：2013-02-24T19:57:28.703
> 
> 标签：c#, c#-4.0, optimization, dll, msbuild

我正在研究项目，该解决方案有 40 多个项目。我有两个构建配置 Lite 和 Release。Lite 构建 AG 项目，Release 构建 A-M 项目。是否可以创建一个构建 Lite 并使用来自 lite 的 dll 进行发布的发布目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:18:45.827

我处理这个的方式是。

1.  让所有内容都从相对文件夹中引用其依赖项。

    .\MySolution01.sln

    .\MyCSProj01\MyCSProj01.csproj

    .\MyCSProj02\MyCSProj02.csproj

    .\MyCSProjN\MyCSProjN.csproj

    .\第三方参考\

    .\ThirdPartyReferences\MyCoolDll.dll

    .\ThirdPartyReferences\SomePDFLibrary.dll

在 csproj 中

```
 <Reference Include="SomePDFLibrary">
     <HintPath>..\ThirdPartyReferences\SomePDFLibrary.dll</HintPath>
</Reference> 
```

2.

编写 msbuild 任务

A. 下拉“Lite”的代码。B. 构建“精简版”。C. 下拉“发布”代码。D. 将文件从“Lite”复制到“Release”的 ThirdPartyReferences 文件夹。E. 构建“发布”。

另一种想法。

当“Lite”构建时，将这些 dll“发布”到二进制存储库。“常春藤”（apache）是非微软的。（您可以使用 ivy 的命令行版本。但大多数 Microsoft 开发人员不会去这里） Nuget（带有本地存储库）是 ~binary 存储库的“微软风味”。

[http://gregorsuttie.com/2011/01/03/using-a-nuget-local-repository/](http://gregorsuttie.com/2011/01/03/using-a-nuget-local-repository/)

然后，当“发布”构建时，它会从二进制存储库中“拉下”其二进制文件。

# iphone - 使用自定义 UIButton 以编程方式调用 ViewController PopOver

> ID：15055966
> 
> 赞同：0
> 
> 时间：2013-02-24T19:57:32.940
> 
> 标签：iphone, ios, objective-c, xcode, ipad

`UIButton`我在`viewDidLoad`我的实现文件部分定义了自定义的宽度、高度和位置。如果我要将此按钮拖放到 IB 中，我可以 ctrl 并将其拖到另一个视图控制器并选择`PopOver`.

除非有一种方法可以将一个附加`IBOutlet`到我不知道的这个自定义`UIButton`上，因为我的自定义按钮没有显示在界面生成器中，否则我如何在我的实现中单击我的自定义的操作中调用`PopOver`一个文件？`UIViewController``UIButton`

这就是我定义自定义按钮的方式：

```
self.hard1 = [UIButton buttonWithType:UIButtonTypeCustom];
[self.hard1 setFrame:CGRectMake(884, 524, 105, 60)]; // set the x,y,width and height
UIImage *buttonImage = [UIImage imageNamed:@"green.jpg"];
self.hard1.layer.cornerRadius = 10;
self.hard1.clipsToBounds = YES;
[self.hard1 addTarget: self
          action: @selector(buttonTapped:)
forControlEvents: UIControlEventTouchUpInside];
[self.hard1 setImage:buttonImage forState:UIControlStateNormal];
[self.view addSubview:self.hard1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:11:06.937

如果我理解正确，您的自定义按钮是 UIButton 的子类。所以在 IB 中，在正确的位置放置一个常规按钮，然后导航到右侧窗格中的身份检查器，并在类字段中输入您的自定义按钮类名称，以便 IB 按钮变为 CustomUIButton。您可以像使用常规按钮一样处理其他所有内容。

您必须在视图控制器的 .h 文件中导入自定义类。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:26:38.770

通过接口构建器将操作连接`touchupinside`到方法。`buttonTapped:`这样做

*   右键单击 Interfacebuider 上的按钮，
*   在窗口中会有动作列表。
*   单击并拖动 touchUpInside 并将其放在 viewcontroller 对象上
*   然后另一个窗口显示方法并将其与所需的方法连接。就是这样

浏览本[教程](http://klanguedoc.hubpages.com/hub/IOS-5-A-Beginners-Guide-to-Storyboard-Connection)

编辑 ：

```
 [hardButton1 addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

self 是您定义方法 buttonPressed 的地方：

编辑2：

从评论中我认为问题可能出在按钮图像或框架上。为图像设置背景颜色并进行测试。还要检查您是否设置了带有扩展名的正确图像名称。放置断点并测试如果按钮可见则点击该方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:27:16.267

像这样的东西：

```
- (IBAction) buttonTapped:(id) sender
{
    [self performSegueWithIdentifier:@"mySegue" sender:self];
} 
```

`mySegue`你从包含的 viewController 拖到你想要弹出的那个的 popover segue在哪里。您创建 segue，然后在 IB 中的 segue 的“标识符”框中输入一个名称，然后在此处使用我放置“mySegue”的相同名称。

![显示 segue 标识符的屏幕截图](../Images/8b0a515aba03737aea693c2358cbf0ea.png)

我已经按下了您必须按下的两个按钮才能看到此显示；那么你只需要选择你想要处理的segue。您可以在图片中（单击箭头中间）或情节提要的项目列表中选择它。

# java - Java EE 简单登录

> ID：15055968
> 
> 赞同：0
> 
> 时间：2013-02-24T19:57:44.567
> 
> 标签：java, mysql, jakarta-ee, login

我是 Java EE 的新手，并不真正知道应该如何实现登录系统。假设我有一个带有用户表的 mysql 数据库，它得到了用户名和密码列。我应该如何实施安全的登录系统？所谓安全，是指我发送密码时的基本网络安全性，例如散列密码和 SSL 连接。

我查看[基于表单的登录](http://docs.oracle.com/javaee/6/tutorial/doc/glxce.html)，但我可以理解如何通过内置页面 j_security_check 从数据库中获取数据？我不需要以某种方式定义连接字符串吗？然后我在哪里定义使用哈希和 SSL？

我正在使用tomcat v7.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:08:52.163

第一件事：不要将密码存储在数据库中。您可以存储哈希值。

这是一个简单的方法：

1.  添加一个包含用户名和密码字段的表单。
2.  创建一个会话范围的托管 bean，称为示例用户。
3.  在 bean 中创建属性用户名和密码（不要忘记访问器）。
4.  将表单与您创建的属性绑定（作为 JSF #{userBean.username} 中的示例）。
5.  在 bean 中创建一个名为 authorize 的方法。
6.  将方法与表单上的提交按钮绑定。
7.  在授权方法中创建密码哈希，并尝试在用户表中找到具有表单中用户名和密码的行。
8.  成功重定向到另一个页面时，将密码字段设为空并使用用户名字段来识别谁已登录。

这是我能想象到的在 Java EE 中实现授权的最简单方法。

放一张这样的表格：

```
<h:form id="loginForm">
    <h:inputText maxlength="255" size="20" tabindex="10" value="#{userBean.login}"
                    styleClass="inputField" id="username"/>
    <h:inputSecret maxlength="255" size="20" tabindex="20"
                     value="#{userBean.password}" styleClass="inputField" id="password"/>
    <h:commandButton value="login"
                                 action="#{userBean.validate}" id="submit"/>
</h:form> 
```

和托管bean：

```
@ManagedBean(name = "userBean")
@SessionScoped
public class UserBean {
    private User user;
    private String login;
    private String password;

    @PostConstruct
    private void init() {
        this.user = new User();
    }

    public String validate() {
        // Validate given login and password here
        // When user seems to be valid assign it to this.user and return "/someFileForAuthorizedUsers.xhtml";
        this.login = null;
        this.password = null;

        return null;
    }
} 
```

不要忘记访问器。JSF 需要它们。

# drop-down-menu - 将表单文本输入转换为选择选项下拉列表

> ID：15055969
> 
> 赞同：0
> 
> 时间：2013-02-24T19:57:51.510
> 
> 标签：drop-down-menu, input

我正在尝试将以下文本字段输入转换为带有选项的下拉菜单。

```
<form id='reForm' method='post' name='form2' action='index.php' enctype="multipart/form-data" >
    <input size='32' type='text' class='textinput5' name='city' value='<?php print $reCity; ?>' id='reCity'>
</form> 
```

这是我想出的，但它不起作用：/

```
<select class='textinput5' name='city' value='<?php print $reCity; ?>' id='reCity'>
    <option value="montreal">Montreal</option>
    <option value="california">California</option>
</select> 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:00:13.853

选择不能有值。如果要选择一个值，则必须将其添加到选项中，而不是选择中。所以`<option value="montreal" selected>Montreal</option>`

您可能需要在每个选项中添加一个 if 语句。

如果我记得 PHP

```
<option value="montreal" <? if($reCity == 'montreal'){echo 'selected'; }?>>Montreal</option> 
```

我认为你可以做一些接近的事情。我的语法很可能是错误的。

# c# - C# Sorting a list of strings that contains numbers

> ID：15055971
> 
> 赞同：6
> 
> 时间：2013-02-24T19:58:05.227
> 
> 标签：c#, list, sorting

I am creating a score system which reads/writes to a text file. My current format reads each line of the file and stores each line into a `List<string>`. A typical line would be something like `50:James (50 being the score, James being the username)`.

I need to order the list by the score while keeping the name with the string. Here's an example of what I mean:

Unordered text file:

```
50:James
23:Jessica
70:Ricky
70:Dodger
50:Eric 
```

(Notice how there are some scores that are the same, hindering my use of creating a list using numerical keys)

Ordered List:

```
70:Dodger
70:Ricky
50:Eric
50:James
23:Jessica 
```

My current code (That does NOT work with two or more of the same score)

```
Dictionary<int, string> scoreLines = new Dictionary<int, string>();

if (!File.Exists(scorePath))
{
    File.WriteAllText(scorePath, "No Scores", System.Text.Encoding.ASCII);
}

StreamReader streamReader = new StreamReader(resourcePath + "\\scoreboard.txt");

int failedLines = 0;

while (failedLines < 3)
{
    string line = streamReader.ReadLine();

    if (String.IsNullOrEmpty(line))
    {
        failedLines++;
        continue;
    }

    scoreLines.Add(int.Parse(line.Split(':')[0]), line.Split(':')[1]);
}

var arr = scoreLines.Keys.ToArray();
arr = (from a in arr orderby a descending select a).ToArray();

List<string> sortedScoreLines = new List<string>();

foreach (int keyNum in arr)
{
    sortedScoreLines.Add(keyNum + ":" + scoreLines[keyNum]);
}

return sortedScoreLines; 
```

Yes, I know this is TERRIBLY inefficient and ugly, but I spent ages trying so many different methods.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-24T20:03:33.383

You can use `String.Split`:

```
var ordered = list.Select(s => new { Str = s, Split = s.Split(':') })
            .OrderByDescending(x => int.Parse(x.Split[0]))
            .ThenBy(x => x.Split[1])
            .Select(x => x.Str)
            .ToList(); 
```

**Edit**: Here's a demo with your data on Ideone: [http://ideone.com/gtRYO7](http://ideone.com/gtRYO7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T20:04:44.813

You can use the `ReadAllLines` method to easily read the file, then `OrderByDescending` to sort the strings on values that you parse from them:

```
string[] sortedScoreLines =
  File.ReadAllLines(resourcePath + "\\scoreboard.txt")
  .OrderByDescending(s => Int32.Parse(s.Substring(0, s.IndexOf(':'))))
  .ThenBy(s => s)
  .ToArray(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-18T14:45:07.923

Lots of good answers already. I just wanted to provide an even shorter version:

```
List<string> ordered = list.OrderByDescending(s => int.Parse(Regex.Match(s, @"\d+").Value)).ToList(); 
```

(of course, this assumes that there are no other numbers in your items besides the ones at the beginning)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T20:18:57.877

Based on Guffa's answer with some more comments

```
string[] sortedScoreLines =
            File.ReadAllLines(resourcePath + "\\scoreboard.txt");

        // parse into an anonymous class
        var parsedPersons = from s in sortedScoreLines
                            select new
                                       {
                                           Score = int.Parse(s.Split(':')[0]),
                                           Name = s.Split(':')[1]
                                       };

        // sort the list
        var sortedPersons = parsedPersons.OrderByDescending(o => o.Score).ThenBy(i => i.Name);

        // rebuild the resulting array
        var result = (from s in sortedPersons
                     select s.Score + ":" + s.Name).ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T20:11:07.933

Check this:

```
var sortedScoreLines = GetLines("inputFilePath")
        .Select(p => new { num = int.Parse(p.Split(':')[0]), name = p.Split(':')[1] })
        .OrderBy(p => p.num)
        .ThenBy(p => p.name)
        .Select(p => string.Format("{0}:{1}", p.num, p.name))
        .ToList();

    private static List<string> GetLines(string inputFile)
    {
        string filePath = Path.Combine(Directory.GetCurrentDirectory(), inputFile);
        return File.ReadLines(filePath).ToList();
    } 
```

# typescript - 初始化 TypeScript 数组接口

> ID：15055972
> 
> 赞同：3
> 
> 时间：2013-02-24T19:58:12.977
> 
> 标签：typescript

为什么这在 TypeScript 中是非法的？

```
interface numarr {
    [i : number] : number;
}

var p : numarr = [3,6,8]; 
```

编译器说“无法将 'number[]' 转换为 'numarr'。”

恐怕我在这里误解了一些非常基本的东西。我认为上述接口的重点是描述一个由数字索引的数字数组，这正是 [3,6,8] 的含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T02:13:22.520

如果我没弄错的话，您也可以使用以下语法。

```
var arr : number[] = [3, 6, 8]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-07T10:07:25.027

我在 2013 年问过这个问题。它不再相关。我的问题中的代码现在已被编译器接受。

# java - 如何获取音频文件信息（专辑，艺术家，图像，...）Android？

> ID：15055976
> 
> 赞同：2
> 
> 时间：2013-02-24T19:58:42.410
> 
> 标签：java, android, mp3

我想知道我是否可以获得 mp3 文件信息，例如专辑名称、艺术家、存储在 mp3 文件中的图像等等？如果有办法做到这一点，请帮忙。顺便说一句：我创建了一个名为 Entagged 的​​ Java 库，但我不能使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-17T16:25:57.053

使用 MediaMetadataRetriever 解决了问题。

```
MediaMetadataRetriever mediaMetadataRetriever = (MediaMetadataRetriever) new MediaMetadataRetriever();
        Uri uri = (Uri) Uri.fromFile(mp3File);
        mediaMetadataRetriever.setDataSource(MainActivity.this, uri);
        String title = (String) mediaMetadataRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:05:53.907

[jd3lib](http://sourceforge.net/projects/jd3lib/)是一个处理 MP3 及其标签的 Java 库。可能是一个有用的起点。

# java - jtree transferhandler，数据未正确插入

> ID：15055980
> 
> 赞同：1
> 
> 时间：2013-02-24T19:59:07.893
> 
> 标签：java, drag-and-drop, jtree

我尝试将组件拖到 jtree 上。

这不适用于某些案例示例：

根

A 它是一片叶子 B 它是 A 的孩子

如果我尝试像 B 的孩子一样插入它，它将像根公共类 TreeTransferHandler 的孩子一样插入

```
JTree tree;
DataFlavor nodesFlavor;
DataFlavor[] flavors = new DataFlavor[1];
DefaultMutableTreeNode[] nodesToRemove;
String mimeType = DataFlavor.javaJVMLocalObjectMimeType + ";class=" + CommandBeans.class.getName();
DataFlavor dataFlavor = new DataFlavor(mimeType, "command");

public TreeTransferHandler(JTree tree) {
    this.tree = tree;
}

public TreeTransferHandler() {
}

@Override
public boolean canImport(TransferHandler.TransferSupport info) {

    if (!info.isDataFlavorSupported(dataFlavor)) {
        return false;
    }

    return true;
}

@Override
public int getSourceActions(JComponent c) {
    //Nous n'autorisons donc que la copie ici
    return COPY;
}

@Override
public boolean importData(TransferHandler.TransferSupport support) {

    if (!canImport(support)) {
        return false;
    }

    JTree.DropLocation dl = (JTree.DropLocation) support.getDropLocation();

    TreePath path = dl.getPath();
    int index = dl.getChildIndex();
    CommandBeans command = null;

    Transferable data = support.getTransferable();
    try {
        command = (CommandBeans) data.getTransferData(dataFlavor);
    } catch (UnsupportedFlavorException ex) {
        Logger.getLogger(TreeTransferHandler.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(TreeTransferHandler.class.getName()).log(Level.SEVERE, null, ex);
    }

    DefaultMutableTreeNode newNode = new DefaultMutableTreeNode(command.getName());

    DefaultMutableTreeNode parentNode = (DefaultMutableTreeNode) path.getLastPathComponent();

    DefaultTreeModel model = (DefaultTreeModel) this.tree.getModel();
    index = (index == -1) ? model.getChildCount(path.getLastPathComponent()) : index;
    model.insertNodeInto(newNode, parentNode, index);

    tree.makeVisible(path.pathByAddingChild(newNode));
    tree.scrollPathToVisible(path);

    return true;
}
} 
```

就像放置位置和插入一样不好。

它似乎有一个错误：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6560955#](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6560955#)

有什么建议吗？

# bash - URL 中的空格导致 wget 失败

> ID：15055981
> 
> 赞同：3
> 
> 时间：2013-02-24T19:59:10.053
> 
> 标签：bash, wget

我有一个这样的 URL：“今天真是美好的一天”
`http://localhost:8999/createAudio?method=createAudio&sessionId=1234&text=${line}&voice=Paul&encoder=MP3";`
在哪里。 我用来捕获上述http请求的输出，如下所示：`${line}`
`wget`
`cURL="http://localhost:8999/createAudio?method=createAudio&sessionId=1234&text=${line}&voice=Sangeeta&encoder=MP3";
wget -O test.html ${cURL}`

我的问题是 http 请求在第一个空白处被切断。因此，将发出的 http 请求将如下所示：
`http://localhost:8999/createAudio?method=createAudio&sessionId=1234&text=This`

如何确保`${line}`在 http 请求中使用整个内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T20:09:41.863

一种答案是简单地将您的空间 URL 编码为`%20`，摆脱任何文字空间。

但是，`wget`将为您执行此操作。您的问题是您在初始化变量时正确引用了该`cURL`变量，但在 curl 命令行中实际*使用它时却没有正确引用。*您还需要在此处引用，否则 bash 会将该变量中的任何空格解释为参数分隔符：

```
wget -O test.html "$cURL" 
```

# php - PHP 检查一个值是否为真，如果是，则执行此操作 - 不起作用

> ID：15055984
> 
> 赞同：0
> 
> 时间：2013-02-24T19:59:30.730
> 
> 标签：php

我有一个简单的投票系统，可以在您投票后生成一个随机代码。我有一个小回调系统来检查用户是否在网站上投票。

看起来像这样：

[http://gamingtoplist.net/?hasvoted=187&ip=82.81.33.168](http://gamingtoplist.net/?hasvoted=187&ip=82.81.33.168)

187 = 顶部列表中的服务器 ID IP = 刚刚投票的 ip。

如果当您转到此页面时显示为 true，则表示 IP 已投票支持该服务器 ID。如果它显示为 false，则表示该 IP 没有为服务器 ID 投票。

我刚刚投票，正如你所见，它说的是真的。

现在检查是否投票我这样做：

```
if (isset($_POST['submit'])) {
    $check_GTL = file_get_contents("http://gamingtoplist.net/?hasvoted=187&ip=".$_SERVER['REMOTE_ADDR']);
        if ($check_GTL != "true") {
                $errors[] = "Sorry, but it seems like you haven't voted on all links, please contact Jony.";
        } 
```

该行检查您是否已投票：

```
$check_GTL = file_get_contents("http://gamingtoplist.net/?hasvoted=187&ip=".$_SERVER['REMOTE_ADDR']); 
```

但出于某种随机原因，脚本告诉我 check_GTL 不是“真”。然而这是真的....

它有什么问题？

谢谢！

所有的：

```
if (isset($_POST['submit'])) {
    $check_GTL = file_get_contents("http://gamingtoplist.net/?hasvoted=187&ip=".$_SERVER['REMOTE_ADDR']);
        if ($check_GTL != "true") {
                $errors[] = "Sorry, but it seems like you haven't voted on all links, please contact Jony.";
        }

if($check_GTL == "true") { // if($votes > 0 && $check_GTL == "true") { disab led $votes cause runelocus didnt work lately for some reason.

        $insert = "INSERT INTO votes(auth, ip, received, time) VALUES('".$auth."', '".$_SERVER['REMOTE_ADDR']."', '0', '".time()."')";
        $insert = $connect->query($insert) or die(mysqli_error($connect));
        echo '<center><div class="movingerror" style="color: yellow">Thank you for voting! Your auth is <b>'.$auth.'</b>. Please type ::auth '.$auth.' to claim your reward</div></center>';

        $file = fopen("votes.txt", 'w');    
        fwrite($file, --$votes);
        fclose($file);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:02:36.347

编辑：误解了这个问题，打这个。

file_get_contents() 返回一个布尔值而不是字符串。两者之间存在巨大差异：

```
if ($check_GTL == "true") 
```

和：

```
if ($check_GTL == true) 
```

你想要后者。

# c# - 将 Timer 设置为在两个间隔之间交替以生成随机数

> ID：15055985
> 
> 赞同：1
> 
> 时间：2013-02-24T19:59:53.517
> 
> 标签：c#

我想在两个不同的文本框中显示两个不同的随机生成的数字。文本框中的数字每秒都在变化。我正在调用 System.Random 来创建随机数：

```
 private int RandomNumber(int min, int max)
    {
        Random random = new Random();
        return random.Next(min, max);
    } 
```

我遇到的问题是 System.Random 根据系统时间生成数字，因此文本框每秒生成两个相同的随机数。我试图通过将数字的生成错开 20 毫秒来解决这个问题。为此，我创建了两个不同的计时器（每个文本框一个），它们以 980 和 1020 毫秒的间隔交替：

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        int xgpscoord;

        timer1.Interval = 980;
        xgpscoord = RandomNumber(10000, 90000);
        textBoxGPSx.Text = xgpscoord.ToString();
        timer1.Interval = 1020;

    }

    private void timer2_Tick(object sender, EventArgs e)
    {

        int ygpscoord;

        timer2.Interval = 1020;
        ygpscoord = RandomNumber(10000, 90000);
        textBoxGPSy.Text = ygpscoord.ToString();
        timer2.Interval = 980;

    } 
```

但是，这不会同步计时器。我希望它们每 1000 毫秒同时打勾。我认为（如果我错了，请纠正我）我将间隔设置在错误的位置，并且我在每个计时器中设置的两个间隔中只有一个实际上被计算在内。

如果有更好的方法在 c# 中生成随机数而不是基于系统时间，那也可以解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T20:01:50.147

你应该让你的随机静态例如：

```
private static Random random = new Random();
private int RandomNumber(int min, int max)
{
    return random.Next(min, max);
} 
```

这样，您将只创建一个随机实例，并且在调用 RandomNumber 时将继续创建新的随机数。

关于间隔，它们应该最初设置（例如类构造函数）

```
public Form1()
{
    InitializeComponent();
    timer1.Interval = 1000;
}

private void timer1_Tick(object sender, EventArgs e)
{
    textBoxGPSx.Text = RandomNumber(10000, 90000).ToString();
    textBoxGPSy.Text = RandomNumber(10000, 90000).ToString();    
} 
```

希望这对您的探索有所帮助。

# itextsharp - itextsharp：PDF 表单没有方法

> ID：15055986
> 
> 赞同：0
> 
> 时间：2013-02-24T20:00:03.387
> 
> 标签：itextsharp

多年来，我一直在使用 itextsharp 用我编写的程序填写我的附表 D 税表。在 2012 年的表单上，我的程序执行正常，但是当我尝试在 acrobat 中读取输出 pdf 文件时，出现错误：“表单没有方法”。对于表单中的每个字段，我都会收到此错误。

由于过去 5 年来我一直在运行我的程序，因此今年的 pdf 表单似乎有一些新功能。

有人知道“表单没有方法”是什么意思吗？代码示例来纠正吗？谢谢。

# html - 文本比另一侧更偏向一侧

> ID：15055987
> 
> 赞同：0
> 
> 时间：2013-02-24T20:00:03.803
> 
> 标签：html, css

正如您从[JSFiddle](http://jsfiddle.net/QJwy9/)中看到的，如果您将鼠标悬停在文本上，一侧之间的空间比另一侧多，我该如何解决这个问题。

我的问题的 HTML 如下：

```
<div id="mission"><a href="#">Our Mission</a></div> 
```

CSS如下：

```
 #mission{
 -webkit-font-smoothing: antialiased;
  display:inline-block;
  font: 800 1.313em "proxima-nova",sans-serif; 
  padding: 30px 30px;
  margin-top:150px;
  letter-spacing: 8px;
  text-transform: uppercase;
  font-size:3.125em;
  text-align: center; 
  line-height: 1.45em;
  position: scroll;
  background-color:black;
 }

#mission a{
color:#fff;
text-decoration: none;

 }

#mission a:hover{
color:;
text-decoration: none;
cursor:pointer;
background-color:green; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:14:32.667

这种行为主要是由于规范（据我所知）在使用 letter-spacing 属性时对文本的行为非常模糊。目前尚不完全清楚该属性是否应该只处理字母之间的空格，或者是否在每个字母之后应用空格。

在这种情况下，间距似乎在每个字母之后。[例如，通过完全删除 letter-spacing 属性，您可以看到最后一个字母（小提琴](http://jsfiddle.net/QJwy9/2/)）后面没有空格

```
#mission{
    -webkit-font-smoothing: antialiased;
        display:inline-block;
      font: 800 1.313em "proxima-nova",sans-serif; 
      padding: 30px 30px;
      margin-top:150px;
      text-transform: uppercase;
        font-size:3.125em;
        text-align: center; 
        max-width: 606px;
        line-height: 1.45em;
        position: scroll;
        background-color:black;
} 
```

据我所知，没有具体的解决方法。围绕它的一个技巧可能是为文本添加负边距，以使边缘更靠近文本的右侧。除此之外，希望在未来的 CSS 版本中能提供更多的网页排版控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:03:47.440

您可以将左填充添加到锚标记。

```
#mission a{
    color:#fff;
    text-decoration: none;
    padding-left: 0.15em;
} 
```

[http://jsfiddle.net/QJwy9/1/](http://jsfiddle.net/QJwy9/1/)

# php - 如何将使用 mysql_ 函数的脚本转换为使用 mysqli_ 函数？

> ID：15055990
> 
> 赞同：7
> 
> 时间：2013-02-24T20:00:16.497
> 
> 标签：php, mysql, pdo, mysqli

**编辑：**是否使用`mysqli_`超出了这个问题的范围。考虑使用 PDO。

* * *

需要采取哪些步骤将脚本从使用过时的`mysql_`函数转换为`mysqli_`?

`mysqli_`使用代替时有什么需要做的不同的事情`mysql`吗？

`mysql_`这是一个使用函数的基本脚本：

```
<?php

//define host, username and password

$con = mysql_connect($host,$username,$password);
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

$db_name ="db1";
mysql_select_db($dbname, $con);

$value1 = mysql_real_escape_string($input_string);

$query = 'SELECT * FROM table1 WHERE table1.col1=' . $value1 . '';
$result = mysql_query($query, $con);

while($row = mysql_fetch_assoc*$result)
{
    $col1 = $row['col1'];
    $col2 = $row['col2'];

    echo $col1 . ' ' . $col2 . '<br />';
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-24T20:00:16.497

## **注意：**从 转换`mysql_`为[`mysqli_`](http://php.net/mysqli)可能不是最佳的。如果您准备将所有代码转换为[OOP](http://php.net/manual/en/language.oop5.php) ，请考虑使用[**PDO**](http://php.net/pdo)。

尝试替换`mysql_`with的所有实例`mysqli_`并祈祷它有效可能很诱人。你会很接近，但不是很准确。

## **连接数据库：**

幸运的是，[`mysqli_connect`](http://www.php.net/manual/en/mysqli.construct.php)它的工作方式足够紧密`mysql_query`，您可以换掉它们的函数名称。

mysql_:

```
$con = mysql_connect($host, $username, $password); 
```

mysqli_：

```
$con = mysqli_connect($host, $username, $password); 
```

## **选择数据库**

现在，对于库中的大多数其他函数`mysqli_`，您需要将`mysqli_select_db`数据库连接作为其**第一个**参数传递。大多数`mysqli_`功能首先需要连接对象。

对于此函数，您只需切换传递给函数的参数的顺序即可。如果您之前没有将连接对象传递给它，**那么您现在必须将其添加为第一个参数。**

mysql_:

```
mysql_select_db($dbname, $con); 
```

mysqli_：

```
mysqli_select_db($con, $dbname); 
```

作为奖励，您还可以将数据库名称作为第四个参数传递给`mysqli_connect`- 绕过需要调用`mysqli_select_db`.

```
$con = mysqli_connect($host, $username, $password, $dbname); 
```

## **清理用户输入**

使用`mysqli_real_escape_string`与`mysql_real_escape_string`. 您只需要将连接对象作为第一个参数传递。

mysql_:

```
$value1 = mysql_real_escape_string($input_string); 
```

mysqli_：

```
$value1 = mysqli_real_escape_string($con, $input_string); 
```

## **非常重要：准备和运行查询**

`mysql_`这些函数一开始就被弃用的原因之一是它们无法处理准备好的语句。如果您只是将代码转换为`mysqli_`不采取这一重要步骤，那么您将受到这些`mysql_`功能的一些最大弱点的影响。

值得阅读这些关于准备好的陈述及其好处的文章：

[维基百科 - 准备好的陈述](http://en.wikipedia.org/wiki/Prepared_statement)

[PHP.net - MySQLi 准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)

注意：使用准备好的语句时，最好明确列出您尝试查询的每一列，而不是使用`*`表示法来查询所有列。通过这种方式，您可以确保您已将调用中的所有列都计算在内`mysqli_stmt_bind_result`。

mysql_:

```
$query = 'SELECT * FROM table1 WHERE table1.col1=' . $value1 . '';
$result = mysql_query($query, $con);
while($row = mysql_fetch_assoc*$result)
{
    $col1 = $row['col1'];
    $col2 = $row['col2'];

    echo $col1 . ' ' . $col2 . '<br />';
} 
```

mysqli_：

```
$query = 'SELECT col1,col2 FROM table1 WHERE table1.col1=?';
if ($stmt = mysqli_prepare($link, $query)) {

    /* pass parameters to query */
    mysqli_stmt_bind_param($stmt, "s", $value1);

    /* run the query on the database */
    mysqli_stmt_execute($stmt);

    /* assign variable for each column to store results in */
    mysqli_stmt_bind_result($stmt, $col1, $col2);

    /* fetch values */
    while (mysqli_stmt_fetch($stmt)) {
        /*
            on each fetch, the values for each column 
            in the results are automatically stored in 
            the variables we assigned using 
            "mysqli_stmt_bind_result"
        */
        echo $col1 . ' ' . $col2 . '<br />';
    }

    /* close statement */
    mysqli_stmt_close($stmt);
} 
```

## **显示错误**

显示错误与`mysqli_`. [`mysqli_error`](http://www.php.net/manual/en/mysqli.error.php)需要连接对象作为其第一个参数。但是如果连接失败怎么办？`mysqli_`引入了一小组不需要连接对象的函数：[`mysqli_connect_*`](http://www.php.net/manual/en/mysqli.connect-error.php)函数。

mysql_:

```
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

if (!$result) {
    die('SQL Error: ' . mysql_error());
} 
```

mysqli_：

```
/* check connection error*/
if (mysqli_connect_errno()) {
    die( 'Could not connect: ' . mysqli_connect_error() );
}

/* check query error */
if ($stmt = mysqli_prepare($link, $query)) {

    // ... execute query

    if (mysqli_stmt_error($stmt)) {
        echo 'SQL Error: ' . mysqli_stmt_error($stmt);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:39:51.800

**例子。**

这是你的 dbc 类

```
<?php

class dbc {

    public $dbserver = 'server';
    public $dbusername = 'user';
    public $dbpassword = 'pass';
    public $dbname = 'db';

    function openDb() {    
        try {
            $db = new PDO('mysql:host=' . $this->dbserver . ';dbname=' . $this->dbname . ';charset=utf8', '' . $this->dbusername . '', '' . $this->dbpassword . '');
        } catch (PDOException $e) {
            die("error, please try again");
        }        
        return $db;
    }

    function getAllData($qty) {
        //prepared query to prevent SQL injections
        $query = "select * from TABLE where qty = ?";
        $stmt = $this->openDb()->prepare($query);
        $stmt->bindValue(1, $qty, PDO::PARAM_INT);
        $stmt->execute();
        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
        return $rows;
    }    
?> 
```

您的 PHP 页面：

```
<?php 
require "dbc.php";

$getList = $db->getAllData(25);

foreach ($getList as $key=> $row) {
         echo $row['columnName'] .' key: '. $key;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T20:04:24.463

# 不要将 mysql_ 函数转换为 mysqli_。时期。

没有一个理由这样做。

**首先，没有理由机械地这样做，只更改函数名称而使算法保持不变：**

如果不实现参数化查询，这样的举动几乎没有意义。
如果您唯一关心的是“已弃用”错误 - 您可以将它们关闭

```
error_reporting(E_ALL & ~E_DEPRECATED); 
```

并继续愉快地使用旧的 mysql_*
请注意，只有在 2-3 年内 PHP 5.5 将到达共享主机时，您才需要它。
所以，也没有必要着急。

**其次，您真正需要的是从代码中消除所有裸 API 调用**

将它们封装到某种抽象库中。这应该是你主要关心的问题，而不是这个库中使用的特定 API，它可以在眨眼之间改变。

**`mysql_*`最后，从 切换到的唯一真正原因`mysqli_*`是参数化查询。**

## mysqli 完全无法与它们一起使用。

使用准备好的语句 PDO 是您唯一的选择。

让我告诉你我的意思。
想象一下，我们有一组来自 HTML 表单的复选框，可以动态添加到查询中。
使用 PDO，我们可以拥有一些相对健全且相当简洁（但仍然无用的复杂和污染）的代码：

```
$in  = str_repeat('?,', count($_GET['cat']) - 1) . '?';
$sql = "SELECT * FROM table WHERE category IN ($in)";
$stm = $db->prepare($sql);
$stm->execute($_GET['cat']);
$data = $stm->fetchAll(); 
```

## 使用 mysqli，这样一个微不足道的案例将花费您数小时编写和调试几页极其复杂的代码。

试试看。

然而，即使是 PDO 也需要一些晦涩无用的代码来创建某些查询部分。因此，最好的方法是使用一些更智能的库，例如[safemysql](https://github.com/colshrapnel/safemysql)，它将在内部完成所有工作，从绑定到获取，**将所有代码变成单行**：

```
$data = $db->getALL("SELECT * FROM table WHERE category IN (?a)", $_GET['cat']); 
```

# php - 由于缺少撇号原则而无法运行固定装置？(Symfony 2)

> ID：15055991
> 
> 赞同：2
> 
> 时间：2013-02-24T20:00:18.740
> 
> 标签：php, symfony, doctrine-orm

当我尝试创建我的固定装置时，我 100% 确定它们是正确的，但是在尝试加载它们关于表名时它们给了我错误。

```
[Doctrine\DBAL\DBALException]                                                
An exception occurred while executing 'DELETE FROM group': 
```

哪个当然不能加载，因为它缺少撇号 (`)

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T20:11:40.770

您需要实体`Table`上带有转义表名称的注释：`Group`

```
use Doctrine\ORM\Mapping\Entity;
use Doctrine\ORM\Mapping\Table;

/**
 * @Entity
 * @Table("`group`")
 */
class Group {
} 
```

# c# - 当我们有 ASP.NET 路由值而不是 QueryString 值时缓存 Vary BY Param

> ID：15055994
> 
> 赞同：2
> 
> 时间：2013-02-24T20:00:27.577
> 
> 标签：c#, asp.net, outputcache

通常我们可以做缓存并依赖 Request.QueryString 值，比如

```
<%@ OutputCache Duration="15" VaryByParam="search" %> 
```

此类的网址可能类似于：

```
http://www.demo.com/default.aspx?search=name 
```

但在我的应用程序中，我使用的是 ASP.NET 4.0 路由，我在其中传递产品的 id，例如：

```
 http://www.demo.com/searchdetails/40563 
```

或者

```
http://www.demo.com/searchdetails/40564 
```

等等.....

在这种情况下，我访问产品 ID 为

```
 Page.Route.Value["product_id"] 
```

在这种情况下，我应该如何使页面依赖于该路由值。

我是缓存新手，所以我没有太多相同的知识。

我们是否需要做一些自定义缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:31:38.483

我认为您必须使用 VaryByCustom。像这样的东西：

```
<%@ OutputCache Duration="15" VaryByParam="None" VaryByCustom="productIdInUrl" %> 
```

然后将您的自定义过滤器添加到 global.asax 文件中：

```
public override string GetVaryByCustomString(HttpContext context, 
string arg)
{
   if(arg == "productIdInUrl")
   {
      return context.Request.RawUrl;
   }
   return base.GetVaryByCustomString(context, arg);
} 
```

这会因您的所有 URL 而异，而不仅仅是 productId。我想您可以在 Request 对象上做更多的工作，以便在需要时做一些更聪明的事情

# java - 如何从 SQLite 读取选择性数据？

> ID：15055997
> 
> 赞同：-3
> 
> 时间：2013-02-24T20:00:33.827
> 
> 标签：java, android, sqlite

我想从 SQLite DB 中读取存储在 id 10 到 20 中的数据。我需要在以下代码中添加/更改什么？

```
 mNumOneTest = new Vector<Test>();
    DiagnoseTestOpenHelper helper = new DiagnoseTestOpenHelper(
            TestOneTimeTable.this);
    mDb = helper.getReadableDatabase();

    Cursor cursor = mDb.rawQuery("SELECT * FROM TEST;", null);
    if (cursor.getCount() > 0) {
        cursor.moveToFirst();
        do {
            Test test = new Test();
            test.setId(cursor.getInt(0));
            test.setNumber_one(cursor.getInt(1));
            test.setNumber_two(cursor.getInt(2));
            mNumOneTest.add(test);

        } while (cursor.moveToNext());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T20:02:28.137

将您的 SQL 更改为`SELECT * FROM TEST WHERE id >= 10 AND id <= 20`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T20:02:43.777

```
"SELECT * FROM TEST WHERE id >= 10 AND id <= 20" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T20:03:11.073

```
SELECT * FROM TEST WHERE id BETWEEN 10 AND 20 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T20:07:26.137

> 我想从 SQLite DB 中读取存储在 id 10 到 20 中的数据。我需要在以下代码中添加/更改什么？

您需要学习[`SQL basics`](http://www.w3schools.com/sql/default.asp)，因为这是一个非常“原始”的问题，当您想使用任何数据库、子句 as`WHERE`等时，`LIKE`您应该知道。

您可以使用`between`and 子句、`in`子句或简单地使用`<>=`操作数

```
where id between 10 and 20
where id >= 10 and id <=20 
```