# StackOverflow 问答 13535000-13535999

# c# - EntityFramework 中的公用表表达式

> ID：13535003
> 
> 赞同：9
> 
> 时间：2012-11-23T19:52:17.987
> 
> 标签：c#, .net, linq, entity-framework-4, common-table-expression

我在 Sql Server 中有这个查询，我需要在 EntityFramework 中使用它，那么我怎样才能编写一个与此结果相同的 EntityFramwork 代码

```
WITH    cte AS
        (
        SELECT  *
        FROM    StockGroups
        WHERE   GroupParent ='Stationery' 
        UNION ALL
        SELECT  g.*
        FROM    StockGroups g
        JOIN    cte
        ON      g.GroupParent = cte.GroupName
        )
SELECT  *
FROM    cte 
```

我不知道如何在 EF 中转换它，所以我尝试加入。

```
from a in db.StockGroups
join b in db.StockGroups on new { GroupParent = a.GroupParent } equals new { GroupParent = b.GroupName }
where
  b.GroupName == "Stationery"
select new {
  a.GroupName,
  a.GroupParent,
  Column1 = b.GroupName,
  Column2 = b.GroupParent
} 
```

但结果不一样，和 CTE 一样递归。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T19:55:08.697

EF 不支持递归 CTE。使用视图或表值函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T20:20:14.440

[从其他专家那里得到关于 SO 的意见](https://stackoverflow.com/a/1757302/3195477)，我想出了自己的方法来实现这一点。

```
IEnumerable<StockGroup> sg = dbContext.ExecuteStoreQuery<StockGroup>(
                        @"WITH    q AS
                                    (
                                    SELECT  *
                                    FROM    LedgerGroups
                                    WHERE   GroupParent = 'Customers'
                                    UNION ALL
                                    SELECT  m.*
                                    FROM    LedgerGroups m
                                    JOIN    q
                                    ON      m.GroupParent = q.GroupName
                                    )
                            SELECT  *
                            FROM    q
                        "); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-23T19:54:53.920

您不能在实体框架中使用 CTE 递归。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-10T12:53:38.070

使用存储过程并通过 EF 调用该存储过程

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-14T14:01:17.127

我认为 LINQ 和 EF 都不支持递归 CTE。解决方案是将 CTE 公开为视图。有关使用 EF 代码优先和迁移的递归或分层查询的文章展示了如何使用 EF 代码优先迁移部署此类视图。[使用 EF Code First 和迁移的递归或分层查询](https://code.msdn.microsoft.com/windowsdesktop/Recursive-or-hierarchical-bf43a96e)

原文来源： [https ://stackoverflow.com/a/11929928/3850405](https://stackoverflow.com/a/11929928/3850405)

# assembly - 汇编程序没有显示任何输出？

> ID：13535010
> 
> 赞同：-1
> 
> 时间：2012-11-23T19:52:37.943
> 
> 标签：assembly, x86-16

我想在屏幕上显示'F'。当我编译我的代码时，它没有任何问题，但它没有显示'F'。编译器是：emu8086 代码是：

```
stseg segment
db 64 dup(?)
stseg ends

dtseg segment
dtseg ends

cdseg segment
main  proc far
assume cs:cdseg,ds:dtseg,ss:stseg
mov   ax,dtseg
mov   ds,ax
call  clear
call  color
call  moh
mov   ah,4ch
int   21h
main  endp

clear proc
mov  ax,0600h
mov  bh,07
mov  cx,0000
mov  dx,184fh
clear endp

color proc
mov   ah,0b
mov   bh,0
mov   bl,4
int   10h
color endp

moh  proc
mov cx,100
mov dx,30
back:mov ah,0ch
mov al,01
int 10h
inc cx
cmp cx,130
jnz back
mov cx,100
mov dx,50
loo: mov ah,0ch
mov al,01
int 10h
inc cx
cmp cx,130
jnz loo
mov cx,100
mov dx,30
joo: mov ah,0ch
mov al,01
int 10h
inc cx
cmp cx,50
jnz joo
cdseg  ends 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:23:42.067

在绘制 F 时，您需要先将视频模式设置为图形，例如 int 10，ah 0x00 和 al 0x04（选择 320x200 4 色图形模式）

# python - gmpy sqrt 精度

> ID：13535016
> 
> 赞同：1
> 
> 时间：2012-11-23T19:53:03.213
> 
> 标签：python, sqrt

我想知道为什么这段代码在 Python 中

```
print gmpy.sqrt(2009) 
```

给出结果 44，而不是 44.82186966 ......就像我想要的那样？如何设置函数以显示十进制数字。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:03:06.687

坦率地说，因为它是这样定义的。无法设置该选项。

编辑：@casevh 是正确的：`gmpy2.sqrt()`返回你想要的。

# jquery - 在jquery中替换图像按钮的最佳方法

> ID：13535019
> 
> 赞同：0
> 
> 时间：2012-11-23T19:53:20.293
> 
> 标签：jquery

下面我有一个图像按钮：

```
<table id="question">
<tr>
<td colspan="2">
<a onclick="return plusbutton();">
<img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" id="mainPlusbutton" name="plusbuttonrow"/>
</a>
<span id="plussignmsg">(Click Plus Sign to look up Previous Questions)</span>
</td>
</tr>
</table> 
```

现在我想做的是通过使用 jquery 我想隐藏当前图像并在下面的 if 语句中`Images/plussign.jpg`替换为另一个图像：`Images/plussigndisabled.jpg`

```
if (qnum == <?php echo (int)$_SESSION['textQuestion']; ?>) {

} 
```

然后在文档准备功能中，我希望它替换`Images/plussigndisabled.jpg`为`Images/plussign.jpg`

我想知道在 jquery 中实现这一目标的最佳方法是什么？

更新：

以下是我尝试过的：

```
var x = "<img src='Images/plussigndisabled.jpg' width='30' height='30' alt='Look Up Previous Question' class='plusimage' name='plusbuttonrow'/><span id='plussignmsg'>(Click Plus Sign to look <br/> up Previous Questions)</span>" ;

    if (qnum == <?php echo (int)$_SESSION['textQuestion']; ?>) {

     $('#plus th').html($(x)); 

        $("#showGridId").unbind('click').click(function (event) {
        event.preventDefault();
        return false;
    }).css('color', '#BBBBBB');
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T19:56:19.913

全部在 PHP 中完成：

```
$imgsrc = "Images/plussign.jpg";
if (qnum == $_SESSION['textQuestion']) {
   $imgsrc = "Images/plussigndisabled.jpg";
} 
```

然后像这样输出图像：

```
<img src="<?php echo $imgsrc ?>" 
```

您无法在 JavaScript 中访问 PHP 变量，也无法在 PHP 中访问 JavaScript 变量……如果您在第一个实例中将变量存储在会话中，我看不到强制转换的意义！

## 更新

不太确定你为什么要这样做......但试试类似的东西：

```
var x = "<img src='Images/plussigndisabled.jpg' width='30' height='30' alt='Look Up Previous Question' class='plusimage' name='plusbuttonrow'/><span id='plussignmsg'>(Click Plus Sign to look <br/> up Previous Questions)</span>";

if (qnum == <?php echo (int)$_SESSION['textQuestion']; ?>) {

   $('#plus th').html(x); // no need to create a jQuery object

   $("#showGridId").unbind('click').click(function (event) {
       event.preventDefault();
       return false;
    }).css('color', '#BBBBBB');
} 
```

# xaml - Windows 8 Image UniformFill 居中

> ID：13535022
> 
> 赞同：29
> 
> 时间：2012-11-23T19:53:37.970
> 
> 标签：xaml, windows-8, windows-store-apps

我有一个小问题，我有一个组项目，我想提供一个背景图像，它应该缩放以保持其正确的尺寸，但默认情况下它从左上角显示图像，我希望图像居中。

这是一个插图，以进一步解释我的问题。（灰色部分是被剪掉的部分）

![我的问题](../Images/143ebb8cf18f5577bf6c727addd3ebba.png)

我有这个 XAML

```
<Image Source="/url/to/image.jpg" Stretch="UniformToFill"/> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-24T15:45:22.987

我设法解决了我的问题，我使图像大于放置它的容器，并将其垂直对齐在中心。

```
<Grid HorizontalAlignment="Left" Width="250" Height="125">
    <Image Source="/url/to/image.jpg" Stretch="UniformToFill" Height="250" Margin="0" VerticalAlignment="Center"/>
</Grid> 
```

图像的溢出是不可见的:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-05T13:22:01.887

如果事先不知道源图像的大小，我不得不使用不同的技巧：

```
<Border Width="250" Height="250">
    <Border.Background>
        <ImageBrush ImageSource="/url/to/image.jpg"
                    Stretch="UniformToFill"/>
    </Border.Background>
</Border> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T14:39:30.247

我为 Silverlight/Windows Phone 编写了一个处理类似情况的行为。我必须展示的图片可能更大或更高，我必须将它展示在一个正方形中。

该行为计算容器和图片的宽度/高度比。根据哪个是最大/最高，我调整 Image 控件的大小以使父控件具有这种剪切效果。

这是用于我的行为的示例 XAML。

```
<Border Height="150" Width="150">
    <Image Source="{Binding BitmapImage}" Stretch="UniformToFill"
            HorizontalAlignment="Center" VerticalAlignment="Center">
        <i:Interaction.Behaviors>
            <b:FillParentBehavior />
        </i:Interaction.Behaviors>
    </Image>
</Border> 
```

这是 C# 代码的摘录。完整的代码可以在这里找到：[FillParentBehavior.cs](https://gist.github.com/sandrock/5363885)

```
double width = this.AssociatedObject.Width;
double height = this.AssociatedObject.Height;
var parentSize = new Size(this.parent.ActualWidth, this.parent.ActualHeight);
var parentRatio = parentSize.Width / parentSize.Height;

// determine optimal size
if (this.AssociatedObject is Image)
{
    var image = (Image)this.AssociatedObject;
    if (image.Source is BitmapImage)
    {
        var bitmap = (BitmapImage)image.Source;
        var imageSize = new Size(bitmap.PixelWidth, bitmap.PixelHeight);
        var imageRatio = imageSize.Width / imageSize.Height;
        if (parentRatio <= imageRatio)
        {
            // picture has a greater width than necessary
            // use its height
            width = double.NaN;
            height = parentSize.Height;
        }
        else
        {
            // picture has a greater height than necessary
            // use its width
            width = parentSize.Width;
            height = double.NaN;
        }
    }
}

this.AssociatedObject.Width = width;
this.AssociatedObject.Height = height; 
```

# ios - 如何在 iOS 6 中启动具有特定地址的 iOS 地图应用程序？

> ID：13535027
> 
> 赞同：3
> 
> 时间：2012-11-23T19:53:52.133
> 
> 标签：ios, google-maps, ios6-maps

我有一个应用程序，允许用户启动地图应用程序（谷歌或苹果）来查看地址。

我曾经这样做：

```
Address *address = [self.person.addresses objectAtIndex:0]; 

NSString *addressString = [NSString stringWithFormat:@"%@ %@ %@ %@, %@ %@",
                                   address.line1 == nil ? @"" : address.line1,
                                   address.line2 == nil ? @"" : address.line2,
                                   address.line3 == nil ? @"" : address.line3,
                                   address.city == nil ? @"" : address.city,
                                   address.state == nil ? @"" : address.state,
                                   address.zip == nil ? @"" : address.zip];

NSString *mapsURL = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@", [addressString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:mapsURL]]; 
```

但为了支持 iOS 6，我将其更改为：

```
Address *address = [self.person.addresses objectAtIndex:0]; 

        NSString *addressString = [NSString stringWithFormat:@"%@ %@ %@ %@, %@ %@",
                                   address.line1 == nil ? @"" : address.line1,
                                   address.line2 == nil ? @"" : address.line2,
                                   address.line3 == nil ? @"" : address.line3,
                                   address.city == nil ? @"" : address.city,
                                   address.state == nil ? @"" : address.state,
                                   address.zip == nil ? @"" : address.zip];

        // Check for iOS 6
        Class mapItemClass = [MKMapItem class];
        if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
        {
            /*
            // Create an MKMapItem to pass to the Maps app
            MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:nil
                                                           addressDictionary:nil];

            MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
            [mapItem openInMapsWithLaunchOptions:nil];
            */

            // I want something like this:
            MKMapItem *mapItem = [[MKMapItem alloc] initWithAddressQuery:addressString];
            [mapItem openInMapsWithLaunchOptions:nil];
        }
        else
        {
            NSString *mapsURL = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@", [addressString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:mapsURL]];

        } 
```

基本上，使用原始地址（没有`ABPersonRef`'s 或任何东西）我需要在 Apple Maps 中打开该位置。谷歌曾经这样做很好。

我尝试了简单的从`maps.google.com`to切换，`maps.apple.com`但在 iOS 5 中它打开到 Google Maps 网络应用程序——我不想要！有一个非常好的原生应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:13:48.077

[在这里](https://stackoverflow.com/questions/12504294/programmatically-open-maps-app-in-ios-6)找到了答案。它是通过使用`CLGeocoder`类来完成的：

```
// Check for iOS 6
    Class mapItemClass = [MKMapItem class];
    if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
    {
        CLGeocoder *geocoder = [[CLGeocoder alloc] init];
        [geocoder geocodeAddressString:addressString
                     completionHandler:^(NSArray *placemarks, NSError *error) {

                         // Convert the CLPlacemark to an MKPlacemark
                         // Note: There's no error checking for a failed geocode
                         CLPlacemark *geocodedPlacemark = [placemarks objectAtIndex:0];
                         MKPlacemark *placemark = [[MKPlacemark alloc]
                                                   initWithCoordinate:geocodedPlacemark.location.coordinate
                                                   addressDictionary:geocodedPlacemark.addressDictionary];

                         // Create a map item for the geocoded address to pass to Maps app
                         MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
                         [mapItem setName:geocodedPlacemark.name];

                         // Set the directions mode to "Driving"
                         // Can use MKLaunchOptionsDirectionsModeWalking instead
                         NSDictionary *launchOptions = @{MKLaunchOptionsDirectionsModeKey : MKLaunchOptionsDirectionsModeDriving};

                         // Get the "Current User Location" MKMapItem
                         MKMapItem *currentLocationMapItem = [MKMapItem mapItemForCurrentLocation];

                         // Pass the current location and destination map items to the Maps app
                         // Set the direction mode in the launchOptions dictionary
                         [MKMapItem openMapsWithItems:@[currentLocationMapItem, mapItem] launchOptions:launchOptions];

                     }];
    }
    //iOS 4/5:
    else
    {
        NSString *mapsURL = [NSString stringWithFormat:@"http://maps.google.com/maps?q=%@", [addressString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        ... 
```

# mdx - 在具有多个层次结构的维度上选择一个层次结构

> ID：13535028
> 
> 赞同：0
> 
> 时间：2012-11-23T19:54:06.293
> 
> 标签：mdx, olap, data-warehouse, mondrian

我确实有一个立方体 V，它有一个度量 Q 和一些维度 D、F。在维度 DI 中想要有 2 个共享一些共同成员的层次结构，它们是（2 个层次结构是 A 和 T，共同成员是 M 和我）：

```
-D
   -A
       +A
       +M
       +I
   -T
       +T
       +M
       +I 
```

我试图创建一个 MDX 查询来访问 A 和 T，但没有成功：

```
select {[Measures].[Q]} ON COLUMNS,
  {([F], [D].[A]} ON ROWS
from [V] 
```

但我确实从 JPivot 那里得到了一个错误，使用 Mondrian 说

Mondrian 错误：在多维数据集“V”中找不到 MDX 对象“[D].[A]”。所以我也不能访问。

这是我第一次尝试 MDX，所以我意识到我可能错过了立方体构造或语言理解方面的一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:14:35.483

通常，当您引用的成员在您的维度中不存在时，会返回该错误。引用特定层次结构的正确语法（除了默认值）是`[Dimension.Hierarchy]`，所以试试这个

```
select {[Measures].[Q]} ON COLUMNS,
  {([F], [D.A])} ON ROWS
from [V] 
```

假设您的 A 层次结构有一个 All 成员，那么它应该可以工作。

编辑：我以为你不能在蒙德里安做到这一点，但在尝试之后，事实证明你可以：尝试交叉加入两个层次结构的成员：

```
SELECT NON EMPTY {[Measures].[Q]} ON COLUMNS,
  NON EMPTY CROSSJOIN([D.A].[Year].Members, [D.T].[Type].Members) ON ROWS
FROM [V] 
```

NON EMPTY 函数将防止没有值的 A 和 T 层次结构的组合出现在输出中。请注意，这实际上不会让您从年份向下钻取到类型，而是它们会并排显示。

# matrix - 矩阵的零碎处理 - CUDA

> ID：13535029
> 
> 赞同：1
> 
> 时间：2012-11-23T19:54:07.833
> 
> 标签：matrix, cuda

好的，假设我有一个 ( N x N ) 矩阵要处理。这个矩阵对于我的计算机来说非常大，如果我尝试一次将它全部发送到设备，我会收到“内存不足错误”。

那么有没有办法将矩阵的各个部分发送到设备？我可以看到的一种方法是在主机上复制矩阵的部分，然后将这些可管理的复制部分从主机发送到设备，然后最后将它们放回原处。

这是我尝试过的方法，但 for 循环中的 cudaMemcpy 返回错误代码 11，“无效参数”。

```
int h_N = 10000;
size_t h_size_m = h_N*sizeof(float);
h_A  = (float*)malloc(h_size_m*h_size_m);

int d_N = 2500;
size_t d_size_m = d_N*sizeof(float);

InitializeMatrices(h_N);

int i;
int iterations = (h_N*h_N)/(d_N*d_N);

for( i = 0; i < iterations; i++ ) 
{
    float* h_array_ref = h_A+(i*d_N*d_N);
    cudasafe( cudaMemcpy(d_A, h_array_ref, d_size_m*d_size_m, cudaMemcpyHostToDevice), "cudaMemcpy");
    cudasafe( cudaFree(d_A), "cudaFree(d_A)" );
} 
```

我试图用上面的代码完成的是：我没有将整个矩阵发送到设备，而是发送一个指向该矩阵中某个位置的指针，并在设备上保留足够的空间来完成这项工作，然后使用循环的下一次迭代将指针在矩阵中向前移动，等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:25:33.657

您不仅*可以*做到这一点（假设您的问题很容易以这种方式分解为子数组），而且对性能来说也是一件非常有用的事情；一旦您获得了您描述的基本方法，您就可以开始使用[异步内存副本](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf)和双缓冲来重叠一些内存传输时间与计算已经在卡上的时间所花费的时间。

但是第一个让简单的事情起作用。下面是一个 1d 示例（将向量乘以标量并添加另一个标量），但使用线性化的 2d 数组将是相同的；关键部分是

```
CHK_CUDA( cudaMalloc(&xd, batchsize*sizeof(float)) );
CHK_CUDA( cudaMalloc(&yd, batchsize*sizeof(float)) );
tick(&gputimer);

int nbatches = 0;
for (int nstart=0; nstart < n; nstart+=batchsize) {

    int size=batchsize;
    if ((nstart + batchsize) > n) size = n - nstart;

    CHK_CUDA( cudaMemcpy(xd, &(x[nstart]), size*sizeof(float), cudaMemcpyHostToDevice) );

    blocksize = (size+nblocks-1)/nblocks;
    cuda_saxpb<<<nblocks, blocksize>>>(xd, a, b, yd, size);

    CHK_CUDA( cudaMemcpy(&(ycuda[nstart]), yd, size*sizeof(float), cudaMemcpyDeviceToHost) );

    nbatches++;
}
gputime = tock(&gputimer);

CHK_CUDA( cudaFree(xd) );
CHK_CUDA( cudaFree(yd) ); 
```

您在开始时分配缓冲区，然后循环直到完成，每次都进行复制，启动内核，然后再复制回来。你最后自由了。

完整的代码是

```
#include <stdio.h>
#include <stdlib.h>
#include <getopt.h>
#include <cuda.h>
#include <sys/time.h>
#include <math.h>

#define CHK_CUDA(e) {if (e != cudaSuccess) {fprintf(stderr,"Error: %s\n", cudaGetErrorString(e)); exit(-1);}}

__global__ void cuda_saxpb(const float *xd, const float a, const float b,
                           float *yd, const int n) {

    int i = threadIdx.x + blockIdx.x*blockDim.x;
    if (i<n) {
        yd[i] = a*xd[i]+b;
    }
    return;
}

void cpu_saxpb(const float *x, float a, float b, float *y, int n) {

    int i;
    for (i=0;i<n;i++) {
        y[i] = a*x[i]+b;
    }
    return;
}

int get_options(int argc, char **argv, int *n, int *s, int *nb, float *a, float *b);
void tick(struct timeval *timer);
double tock(struct timeval *timer);

int main(int argc, char **argv) {
    int n=1000;
    int nblocks=10;
    int batchsize=100;
    float a = 5.;
    float b = -1.;
    int err;
    float *x, *y, *ycuda;
    float *xd, *yd;
    double abserr;
    int blocksize;
    int i;
    struct timeval cputimer;
    struct timeval gputimer;
    double cputime, gputime;

    err = get_options(argc, argv, &n, &batchsize, &nblocks, &a, &b);
    if (batchsize > n) {
        fprintf(stderr, "Resetting batchsize to size of vector, %d\n", n);
        batchsize = n;
    }
    if (err) return 0;

    x = (float *)malloc(n*sizeof(float));
    if (!x) return 1;

    y = (float *)malloc(n*sizeof(float));
    if (!y) {free(x); return 1;}

    ycuda = (float *)malloc(n*sizeof(float));
    if (!ycuda) {free(y); free(x); return 1;}

    /* run CPU code */

    tick(&cputimer);
    cpu_saxpb(x, a, b, y, n);
    cputime = tock(&cputimer);

    /* run GPU code */

    /* only have to allocate once */
    CHK_CUDA( cudaMalloc(&xd, batchsize*sizeof(float)) );
    CHK_CUDA( cudaMalloc(&yd, batchsize*sizeof(float)) );
    tick(&gputimer);

    int nbatches = 0;
    for (int nstart=0; nstart < n; nstart+=batchsize) {

        int size=batchsize;
        if ((nstart + batchsize) > n) size = n - nstart;

        CHK_CUDA( cudaMemcpy(xd, &(x[nstart]), size*sizeof(float), cudaMemcpyHostToDevice) );

        blocksize = (size+nblocks-1)/nblocks;
        cuda_saxpb<<<nblocks, blocksize>>>(xd, a, b, yd, size);

        CHK_CUDA( cudaMemcpy(&(ycuda[nstart]), yd, size*sizeof(float), cudaMemcpyDeviceToHost) );

        nbatches++;
    }
    gputime = tock(&gputimer);

    CHK_CUDA( cudaFree(xd) );
    CHK_CUDA( cudaFree(yd) );

    abserr = 0.;
    for (i=0;i<n;i++) {
        abserr += fabs(ycuda[i] - y[i]);
    }

    printf("Y = a*X + b, problemsize = %d\n", n);
    printf("CPU time = %lg millisec.\n", cputime*1000.);
    printf("GPU time = %lg millisec (done with %d batches of %d).\n",
                  gputime*1000., nbatches, batchsize);
    printf("CUDA and CPU results differ by %lf\n", abserr);

    free(x);
    free(y);
    free(ycuda);
    return 0;
}

int get_options(int argc, char **argv, int *n, int *s, int *nb, float *a, float *b) {

  const struct option long_options[] = {
    {"nvals"     , required_argument, 0, 'n'},
    {"nblocks"   , required_argument, 0, 'B'},
    {"batchsize" , required_argument, 0, 's'},
    {"a", required_argument, 0, 'a'},
    {"b", required_argument, 0, 'b'},
    {"help",      no_argument, 0, 'h'},
    {0, 0, 0, 0}};

  char c;
  int option_index;
  int tempint;

  while (1) {
    c = getopt_long(argc, argv, "n:B:a:b:s:h", long_options, &option_index);
    if (c == -1) break;

    switch(c) {
      case 'n': tempint = atoi(optarg);
          if (tempint < 1 || tempint > 500000) {
            fprintf(stderr,"%s: Cannot use number of points %s;\n  Using %d\n", argv[0], optarg, *n);
          } else {
            *n = tempint;
          }
          break;

      case 's': tempint = atoi(optarg);
          if (tempint < 1 || tempint > 50000) {
            fprintf(stderr,"%s: Cannot use number of points %s;\n  Using %d\n", argv[0], optarg, *s);
          } else {
            *s = tempint;
          }
          break;

      case 'B': tempint = atoi(optarg);
          if (tempint < 1 || tempint > 1000 || tempint > *n) {
            fprintf(stderr,"%s: Cannot use number of blocks %s;\n  Using %d\n", argv[0], optarg, *nb);
          } else {
            *nb = tempint;
          }
          break;

      case 'a': *a = atof(optarg);
          break;

      case 'b': *b = atof(optarg);
          break;

      case 'h':
          puts("Calculates y[i] = a*x[i] + b on the GPU.");
          puts("Options: ");
          puts("    --nvals=N      (-n N): Set the number of values in y,x.");
          puts("    --batchsize=N  (-s N): Set the number of values to transfer at a time.");
          puts("    --nblocks=N    (-B N): Set the number of blocks used.");
          puts("    --a=X          (-a X): Set the parameter a.");
          puts("    --b=X          (-b X): Set the parameter b.");
          puts("    --niters=N     (-I X): Set number of iterations to calculate.");
          puts("");
          return +1;
        }
    }

    return 0;
}

void tick(struct timeval *timer) {
    gettimeofday(timer, NULL);
}

double tock(struct timeval *timer) {
    struct timeval now;
    gettimeofday(&now, NULL);
    return (now.tv_usec-timer->tv_usec)/1.0e6 + (now.tv_sec - timer->tv_sec);
} 
```

运行这个得到：

```
$  ./batched-saxpb --nvals=10240 --batchsize=10240 --nblocks=20
Y = a*X + b, problemsize = 10240
CPU time = 0.072 millisec.
GPU time = 0.117 millisec (done with 1 batches of 10240).
CUDA and CPU results differ by 0.000000

$ ./batched-saxpb --nvals=10240 --batchsize=5120 --nblocks=20
Y = a*X + b, problemsize = 10240
CPU time = 0.066 millisec.
GPU time = 0.133 millisec (done with 2 batches of 5120).
CUDA and CPU results differ by 0.000000

$ ./batched-saxpb --nvals=10240 --batchsize=2560 --nblocks=20
Y = a*X + b, problemsize = 10240
CPU time = 0.067 millisec.
GPU time = 0.167 millisec (done with 4 batches of 2560).
CUDA and CPU results differ by 0.000000 
```

在这种情况下，GPU 时间会增加（我们正在做更多的内存副本），但答案保持不变。

**已编辑：**此代码的原始版本有一个选项可以运行内核的多次迭代以用于计时目的，但这在这种情况下会造成不必要的混淆，因此已将其删除。

# virtual-machine - 适用于 mac OS X 10.5.8 (Leopard) 的免费虚拟机

> ID：13535031
> 
> 赞同：0
> 
> 时间：2012-11-23T19:54:16.490
> 
> 标签：virtual-machine

是否有适用于 Mac OS X 10.5.8 (Leopard) 的免费 VM？我看过虚拟盒子，但它只适用于 10.6（雪豹）及更高版本。我也真的不想花钱升级我的操作系统。还查看了 VMWare，它不是免费的。

更新：目前通过 Virtual Box 3.0 版运行我的方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:04:41.910

Leopard 有可用的旧版本：[链接](http://mac.oldapps.com/virtualbox.php?system=mac_os_x_10.5_leopard_intel)。但无法测试和验证，没有可用的那个版本的 Mac。

# php - 在 Android 中使用 JSON 列表数组

> ID：13535035
> 
> 赞同：0
> 
> 时间：2012-11-23T19:54:51.003
> 
> 标签：php, android, mysql, json, image

我在一个项目的中间，有点卡住了。我有一个图像查看器，它采用一系列 URL 并显示一个图片库。所有这些都很好。我正在努力的不是让它使用预先确定的链接，而是让它使用我数据库中的链接。当我调用数据库时，我得到类似“名称”的结果：“http://lh6.googleusercontent.com/-jZgveEqb6pg/T3R4kXScycI/AAAAAAAAAE0/xQ7CvpfXDzc/s1024/sample_image_01.jpg”我不知道如何能够使用此结果并将其放入我的图像查看器中。现在所有的 URL 都在一个数组中，我的查询是一个数组列表。这是另一件事让我感到困惑

```
ArrayList<String> list = new ArrayList<String>(); 
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                list.add(jArray.get(i).toString()); 
        } 
```

这就是我的查询调用以及我如何获取我的数组列表。任何指针或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:15:41.543

是你想要的吗？迭代列表？

```
for (String url : list) {
    // Do something with url
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:52:23.527

因此，您想使用预定义的数据（来自数据库）来填充您的图片库。首先，您必须从数据库中取出光标并遍历所有行并添加到 arraylist

```
//Get db crusor
Cursor cursor = db.rawQuery("SELECT  * FROM table", null);
ArrayList<String> list = new ArrayList<String>();
// looping through all rows and adding to Arraylist
if (cursor.moveToFirst()) {
    do {
        //get string from database cursor and add it to arraylist
        list.add(cursor.getString(1));
    } while (cursor.moveToNext());
} 
```

[此链接](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)可以帮助您了解在 android 中使用数据库

# bash - 修复 shell 脚本中的 if 条件

> ID：13535040
> 
> 赞同：0
> 
> 时间：2012-11-23T19:55:06.413
> 
> 标签：bash

我有这些 if 条件，但它有编译错误。我该如何解决？

```
if [ $DEVICE_ID == "" ]; then 
```

我得到错误：

```
line 63: [: ==: unary operator expected

if [ 'ls -l Mytest*.log | wc -l' -eq 1 ]; then 
```

我得到错误：

```
line 68: [: ls -l Kernel*.log | wc -l: integer expression expected 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T19:55:45.917

引用变量：

```
if [ "$DEVICE_ID" == "" ]; then 
```

但最好这样做：

```
if [ -z "$DEVICE_ID" ]; 
```

第二个错误是您需要使用反引号：

```
if [ $(ls -l Mytest*.log | wc -l) -eq 1 ]; then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:27:12.493

如果您使用 bash，请在条件表达式中使用双括号：它们对不带引号的变量更智能

```
if [[ $DEVICE_ID = "" ]]; then ... 
```

会工作（注意：`=`而不是`==`普通字符串相等而不是模式匹配）

对于文件的存在，使用数组

```
shopt -s nullglob
files=( *.log )
if (( ${#files[@]} > 0 )); the. Echo "there are log files"; fi 
```

# ios - RKResponseDescriptor vs RKRouter

> ID：13535044
> 
> 赞同：4
> 
> 时间：2012-11-23T19:55:14.310
> 
> 标签：ios, ios6, restkit

所以我有点困惑这两个功能有什么区别，或者至少，如何将它们合并在一起。我有这种情况，我有这个描述符：

```
RKResponseDescriptor *responsePlant = 
    [RKResponseDescriptor
        responseDescriptorWithMapping:plantMapping
                          pathPattern:@"/api/rest/plants/:plant_id"
                              keyPath:nil
                          statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]; 
```

现在，我想做这样的事情

```
RKResponseDescriptor *responsePlantAll = 
    [RKResponseDescriptor
        responseDescriptorWithMapping:plantMapping
                          pathPattern:@"/api/rest/plants/"
                              keyPath:@"objects"
                          statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]; 
```

**请注意 keyPath 在一个地方是 nil ，而不是在另一个地方**。

这行得通......但它是大量的复制粘贴。我可以为此使用 RKRouter 吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:38:02.013

您调用了两条不同的路径，因此使用两条不同的路径`RKResponseDescriptor`对我来说非常有意义！

> 我还想知道您是否可以或应该将 RKRouter 与 RKResponseDescriptor 一起使用？

我真的建议使用路线。有了它们，我的所有路径都集中在我的`RKObjectManager`子类中，所以如果我必须更改路径，我不必到处寻找！

# java - 线程“主”org.owasp.esapi.errors.ConfigurationException 中的异常：

> ID：13535055
> 
> 赞同：2
> 
> 时间：2012-11-23T19:56:37.213
> 
> 标签：java, jar, libraries, esapi

```
import org.owasp.esapi.*;

public class esapiTest
{
public static void main(String args[])
{
test();
}
public static void test()
{
String clean = ESAPI.encoder().canonicalize("someString");
Randomizer r=ESAPI.randomizer();    
System.out.println(r);
System.out.println(".....................");
System.out.println(clean);
}
} 
```

为什么我会在运行时收到这些错误？我正在使用 ESAPI-2.0.1.jar，我不想在服务器上运行它。只是在 Eclipse 中测试它。它们在我的构建路径和引用库中。任何帮助都会很棒。谢谢。

```
Attempting to load ESAPI.properties via file I/O.
Attempting to load ESAPI.properties as resource file via file I/O.
Found in 'org.owasp.esapi.resources' directory: C:\resources\ESAPI.properties
Loaded 'ESAPI.properties' properties file
Attempting to load validation.properties via file I/O.
Attempting to load validation.properties as resource file via file I/O.
Found in 'org.owasp.esapi.resources' directory: C:\resources\validation.properties
Loaded 'validation.properties' properties file
Exception in thread "main" org.owasp.esapi.errors.ConfigurationException: java.lang.reflect.InvocationTargetException Encoder class (org.owasp.esapi.reference.DefaultEncoder) CTOR threw exception.
    at org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:129)
    at org.owasp.esapi.ESAPI.encoder(ESAPI.java:99)
    at esapiTest.test(esapiTest.java:12)
    at esapiTest.main(esapiTest.java:7)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:86)
    ... 3 more
Caused by: org.owasp.esapi.errors.ConfigurationException: java.lang.reflect.InvocationTargetException LogFactory class (org.owasp.esapi.reference.Log4JLogFactory) CTOR threw exception.
    at org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:129)
    at org.owasp.esapi.ESAPI.logFactory(ESAPI.java:137)
    at org.owasp.esapi.ESAPI.getLogger(ESAPI.java:154)
    at org.owasp.esapi.reference.DefaultEncoder.<init>(DefaultEncoder.java:75)
    at org.owasp.esapi.reference.DefaultEncoder.getInstance(DefaultEncoder.java:59)
    ... 8 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.owasp.esapi.util.ObjFactory.make(ObjFactory.java:86)
    ... 12 more
Caused by: java.lang.NoClassDefFoundError: org/apache/log4j/spi/LoggerFactory
    at org.owasp.esapi.reference.Log4JLogFactory.<init>(Log4JLogFactory.java:62)
    at org.owasp.esapi.reference.Log4JLogFactory.getInstance(Log4JLogFactory.java:68)
    ... 17 more 
```

不知道该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:31:37.183

您似乎在查找 Log4j.jar (org.apache.log4j) 时遇到问题

# jquery - Jquery mouseOver/mouseEnter 在不应该发生时发生

> ID：13535058
> 
> 赞同：0
> 
> 时间：2012-11-23T19:57:00.623
> 
> 标签：jquery, hover, mouseover, mouseenter

我正在开发一个导航插件，它接受一个列表并将每个项目放在其上的 div 中，这就像一个按钮。它类似于标准的下拉菜单。

我的问题出在函数 setFocus() 上。这将采用一个选定的 div 并添加一个 hover/mouseOver/mouseEnter 功能。

我列出了所有三个，因为我已经尝试了所有三个并且对它们都有相同的问题。如果您在该函数中注意到，我目前将其设置为在鼠标进入 div 时使用文本“over”进行警报。

出于某种原因，无论光标是否进入 div 都会运行。当页面加载时，即使光标不在窗口空间内，警报也会触发，就好像光标已进入 div 并且即使您滚动 div，mouseLeave 也不会响应。有没有其他人遇到过类似的问题？我难住了。

[http://jsfiddle.net/cFEdb/5/](http://jsfiddle.net/cFEdb/5/)

```
 var divCode = String();

 //grab each list item and put it in its own div

 $('#nav li').each(function() {
     divCode += "<div>" + $(this).html() + "</div> ";
 });

 //get rid of the list and replace it with a plane ol' div
 //then fill that it with our new "button" divs 

 $('#nav').replaceWith('<div id="newNav"> </div)');
 $('#newNav').html(divCode);

 //add some functionality to the divs

 $('#newNav div').addClass('fader')
                 .each(function() {

             if ($(this).css('position')!='relative' || $(this).css('position')!='absolute'){
                 $(this).css('position','relative');
             }       
         })
         .css('cursor', 'pointer')
        .click(function() {                        
            switchDivs($(this));
        });

 //set the min-height of the nav div
 $('#newNav').css('minHeight', $('#newNav').height());

 setFocus($('#newNav div').first());

 $('.fader').hide();

 function fadeOn(speed) {

     $('.fader').fadeTo(speed, 100);
     alert('over');
 }

 function fadeWipe(speed) {

     $('.fader').fadeTo(speed, 0);
     alert('out');
 }

 function setFocus(obj) {

     obj.removeClass('fader')
        .addClass('focus')
        .css('backgroundColor', 'red')
       .hover(fadeOn(500),fadeWipe(500));
 }

 function switchDivs(obj2) { //obj2 is the object to become the focus div

    var obj1 = $('.focus');

    //if the two objects are the same, quit
    if (obj1.text() == obj2.text()) { 
        return;
    }

    var oneOff = obj1.offset();
    var oneDirectionY = "-"; //lol...one direction

    var twoOff = obj2.offset();
    var twoDirectionY = "-"; 

    var movementTotalY = 0;

    if (oneOff.top <= twoOff.top) {
        oneDirectionY = "+";
        movementTotalY = twoOff.top - oneOff.top;
    } else {
        twoDirectionY = "+";
        movementTotalY = oneOff.top - twoOff.top;
    }

    var oneDirectionX = "-"; //lol...one direction
    var twoDirectionX = "-";

    var movementTotalX = 0;

    if (oneOff.left <= twoOff.left) {
        oneDirectionX = "+";
        movementTotalX = twoOff.left - oneOff.left;
    } else {
        twoDirectionX = "+";
        movementTotalX = oneOff.left - twoOff.left;
    }

    obj1.animate({ top : oneDirectionY+"="+movementTotalY+"px",
               left : oneDirectionX+"="+movementTotalX+"px"
             },1500);

    obj2.animate({ top : twoDirectionY+"="+movementTotalY+"px",
               left : twoDirectionX+"="+movementTotalX+"px"
             },1500);

    //remove focus from object 1
    obj1.removeClass('focus')
                .addClass('fader');

    //add focus to object 2
    obj2.removeClass('fader')
                .addClass('focus');

 } 
```

});​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:19:43.327

```
setFocus($('#newNav div').first()); 
```

这行将在 JavaScript 被解析时执行，即立即执行。mouseEnter/Leave 代码也将执行此操作，但是当调用 setFocus() 时会发出警报 - 您的倒数第二行。

**在对问题进行上述更正后回答：**

您用来*调用*fadeOn/Wipe 函数的jQuery.hover() 函数会执行这些函数，*而不是*将它们附加到悬停事件。

悬停回调应该在[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)内，以避免在流程到达该点时被执行：

```
 function setFocus(obj) {
        obj.removeClass('fader')
        .addClass('focus')
        .css('backgroundColor', 'red')
        .end()
        .hover(function() {
                fadeOn(500);
               }, 
               function() {
                fadeWipe(500);
               });
    } ​ 
```

**注意：**我在 jQuery.css() 调用之后添加了一个[jQuery.end()](http://api.jquery.com/end/)，因为[.css()](http://api.jquery.com/css/)返回 String。您需要将悬停事件绑定到 jQuery 对象而不是字符串。查找您已调用 .css() 的其他事件并检查是否存在。

警报也应该在闭包中调用，以便在元素完成其淡入淡出动画之后执行它们，*而不是*在调用淡入淡出/擦除函数时执行。

```
 function fadeOn(speed) {
        $('.fader').fadeTo(speed, 100, function() {
            alert('over');
        });
    }​ 
```

# c# - Wix 隐藏命令行窗口

> ID：13535061
> 
> 赞同：4
> 
> 时间：2012-11-23T19:57:36.560
> 
> 标签：c#, installation, wix, wix3.5

我正在开发一个 MSI 安装程序，其中包含一个 tool.exe 文件作为`<Binary>`元素。在安装过程中的某个时刻，我需要运行 tool.exe。所以我有一个自定义操作来执行它：

```
<CustomAction Id="RunToolExe"
                      BinaryKey="ToolExe"
                      ExeCommand=" -r 240 -name appservice"
                      Execute="immediate"
                      Return="check"
                    /> 
```

然后我安排在`<InstallExecuteSequence>`

问题：自定义操作运行时，安装过程中 cmd 行窗口快速闪烁。这对用户来说有点不舒服。有没有办法隐藏这个屏幕？

我不能使用 WixQuietExecCA，因为我无法在 Wix 中引用 Binary tool.exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:56:49.697

```
<CustomAction Id="SettoolEXEPATH" Property="EXEPATH" Value="&quot;[INSTALLDIR]tool.exe&quot; <additional commands> Execute="immediate"/>

<CustomAction Id="EXEPATH" BinaryKey="WixCA" DllEntry="CAQuietExec" Execute="deferred" Return="ignore" Impersonate="no"/> 
```

您可以像上面显示的示例一样使用 WixQuietExecCA，相应地安排自定义操作。第一个动作 SettoolEXEPATH 将属性 EXEPATH 设置为 tool.exe 的路径，该属性名称用作 WixQuietExecCA 的自定义动作 ID，它充当命令行参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:21:58.147

您是否尝试在此[页面](http://wix.sourceforge.net/manual-wix3/qtexec.htm)上这样做，以静默模式运行 CA

查看此链接以获取[RemoveFiles](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371199%28v=vs.85%29.aspx)

# spring - 速度聚类问题

> ID：13535063
> 
> 赞同：0
> 
> 时间：2012-11-23T19:57:47.473
> 
> 标签：spring, jakarta-ee, tomcat, velocity, session-replication

在负载均衡器下运行多个 tomcat 的集群环境中，我们遇到了一个问题，我们认为这可能是速度引擎，随着环境从简单节点转移到集群，它需要某种配置。

这就是我遇到的方式，如果我按照以下步骤操作，就可以重现。步骤是；例如，在集群开发环境中，开发人员有两台不同的（虚拟）服务器，每台服务器 Tomcat 与另一台通信，发送序列化会话，另一台在其末端反序列化。这样，如果一个服务器关闭（或未响应），两个服务器都具有相同的会话，另一台服务器将处理该请求。用户会话持续和任何类型的服务器故障都不会导致用户烦恼。

假设在浏览器中浏览应用程序时，您正在观察每个服务器的“catalina.out”日志。将有一台服务器将处理您的所有请求，而另一台服务器只是同步会话（处于待机状态）。您杀死了服务器的 tomcat，所有请求都在其中提供服务，现在备用服务器已准备好为您提供服务。您浏览到一个页面，您可以在其中搜索记录，该页面最初显示为空。有一次，你点击搜索，你会看到 3 条记录，但每一行列第一列都有一些奇怪的东西：

```
Names                                      |  Last Logged in Time
_________________________________________________________________________________
 #dotPaddingWithoutTitle(Amir Ali, 60)     |  10/11/2012 6:00 PM
 #dotPaddingWithoutTitle(Saif Uddin, 60)   |  10/11/2012 6:00 PM
 #dotPaddingWithoutTitle(Reemsha Ayaz, 60) |  10/11/2012 6:00 PM 
```

#dotPaddingWithoutTitle 是一个速度宏；似乎它无法在这种情况下呈现它，但我不明白为什么整个视图（页眉、页脚、导航、工具栏等）能够呈现但不是这个。

如果您对此有任何想法，请提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:45:04.053

**尝试升级velocity框架（velocity-1.7），我希望它能解决你的问题......更多细节可以在[这里](https://issues.apache.org/jira/browse/VELOCITY-362)找到**

# php - krumo() 和 PHP ActiveRecord 可以在 CodeIgniter 中一起工作吗？

> ID：13535067
> 
> 赞同：1
> 
> 时间：2012-11-23T19:58:52.510
> 
> 标签：php, codeigniter, codeigniter-2, phpactiverecord, krumo

更新： Krumo 似乎已经过时了，我发现了[Kint](https://github.com/raveren/kint "金特")，它可以满足我对 Krumo 的所有要求。

我创建了一个使用 PHP ActiveRecord 的 CI 站点。请注意：PHP ActiveRecord**与**CI ActiveRecord 不同。

ActiveRecord 效果很好；比我希望的还要多。

然后我添加了 Krumo，它有时也很有效；除非我在 ActiveRecord 对象上运行 Krumo，否则 Krumo 可以正常工作。

```
print_r($this->user); // Works
krumo($this->user); // Does not work 
```

krumo() 调用的输出是：

```
Fatal error: Uncaught exception 'ActiveRecord\UndefinedPropertyException' with message 'Undefined property: User_model->krumo50afd2e8f24af in /Users/ted/Sites/cnc/sparks/php-activerecord/0.0.2/vendor/php-activerecord/lib/Model.php on line 514' in /Users/ted/Sites/cnc/sparks/php-activerecord/0.0.2/vendor/php-activerecord/lib/Model.php:514 Stack trace: #0 /Users/ted/Sites/cnc/sparks/php-activerecord/0.0.2/vendor/php-activerecord/lib/Model.php(333): ActiveRecord\Model->read_attribute('krumo50afd2e8f2...') #1 /Users/ted/Sites/cnc/application/libraries/krumo/Krumo.php(951): ActiveRecord\Model->__get('krumo50afd2e8f2...') #2 /Users/ted/Sites/cnc/application/libraries/krumo/Krumo.php(1104): krumo::_vars(Object(User_model)) #3 /Users/ted/Sites/cnc/application/libraries/krumo/Krumo.php(789): krumo::_object(Object(User_model), '...') #4 /Users/ted/Sites/cnc/application/libraries/krumo/Krumo.php(584): krumo::_dump(Object(User_model)) #5 [internal function]: krumo::dump(Object(User_model)) #6 /Users/ted/Sites/cnc/application/librarie in /Users/ted/Sites/cnc/sparks/php-activerecord/0.0.2/vendor/php-activerecord/lib/Model.php on line 514 
```

如果我能让这两个人一起工作，那就太好了。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:03:41.183

刚刚经历了描述，看起来你可以用`xdebug`它来很好地输出你的常规颜色`var_dump`；

看起来 krumo 也已过时且不受支持。我不会使用这样的图书馆

# scala - 在 scala 中保留推导的更高种类的类型

> ID：13535068
> 
> 赞同：3
> 
> 时间：2012-11-23T19:58:56.833
> 
> 标签：scala

我有一个高阶类型，并努力用它构建一些 DSL。而且我正在寻找一种方法来定义可以接受类型而无需明确指定此类型的函数。

自我描述的例子：

```
class Wrap[T] (val data : T)

class DSL {
  def doSomething[T](x : Wrap[T]) =
    println(x.data)
  def <<=[T,W <: Wrap[T]](arg : W) : W = {
    doSomething(arg)
    arg
  }
  def <<-[T](arg : Wrap[T]) : Wrap[T] = {
    doSomething(arg)
    arg
  }
  def <<+[W <: Wrap[_]](arg : W) = {
    doSomething(arg)
    arg
  }
  def <<~(arg : Wrap[_]) = {
    doSomething(arg)
    arg
  }
}

class ExtendedInt(x : Int) extends Wrap[Int](x) {
  def expose() = println(data)
}

object Test {
  val dsl = new DSL
  val exi = new ExtendedInt(3)

  val x1 = dsl <<= exi
  val x2 = dsl <<- exi
  val x3 = dsl <<+ exi
  val x4 = dsl <<~ exi

  x1.expose()
  x2.expose()
  x3.expose()
  x4.expose()
} 
```

我尝试了 4 种不同的方法，得到了 4 种不同的错误：

```
Casting.scala:15: error: no type parameters for method doSomething: (x: Wrap[T])Unit exist so that it can be applied to arguments (W)
 --- because ---
argument expression's type is not compatible with formal parameter type;
 found   : W
 required: Wrap[?T]

    doSomething(arg)
    ^
Casting.scala:32: error: inferred type arguments [Nothing,ExtendedInt] do not conform to method <<='s type parameter bounds [T,W <: Wrap[T]]
  val x1 = dsl <<= exi
               ^
Casting.scala:38: error: value expose is not a member of Wrap[Int]
  x2.expose()
     ^
Casting.scala:40: error: value expose is not a member of Wrap[_$2]
  x4.expose()
     ^
four errors found 
```

所有错误都非常具有描述性。我不反对 scala 笨拙的类型系统和局限性。但我离我的目标还很远，我很乐意寻找另一种黑客来实现所需的功能。

还有其他我忽略的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:47:58.383

请参阅我的答案（以及[此处链接的](https://stackoverflow.com/a/12961911/334519)[其他答案](https://stackoverflow.com/a/10347307/334519)），以讨论导致您出现问题的类型推断限制。您最好的选择可能是视图绑定方法：

```
class Wrap[T](val data: T)

class DSL {
  def doSomething[T](x : Wrap[T]) { println(x.data) }

  def <<=[T, W <% Wrap[T]](arg : W): W = {
    doSomething(arg)
    arg
  }
} 
```

请注意，您的`<:`已替换为`<%`. 这将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T21:35:21.617

@Travis-Brown 提出了一个我无法合并到我的代码中的解决方案，因为我需要保留所有输入信息。

更新的示例包含新的要求：

```
class DSL {
  def doSomething[T](x : Wrap[T]) =
    println(x.data)
  /** Should really receive both types */
  def realWork[T, W <: Wrap[T]]( arg : W ) : W = {
    doSomething(arg)
    arg
  }

  /** syntax sugar for calling realWork*/
  def <<=[T, W <: Wrap[T]](arg : W) : W = realWork[T,W](arg) // This doesn't work
} 
```

我需要用`<<=`有效的方法替换方法。视图边界无法为我提供足够的类型信息来调用 realWork。

我发现只需将参数加倍就可以正常工作并将所需的类型信息发送给编译器。

```
 def <<=[T, W <: Wrap[T]](arg : W, trash : Wrap[T]) : W = realWork[T,W](arg) 
```

使用不方便，但可以很容易地改进：

```
implicit def doubleArg[T](arg : T) : (T,T) = (arg,arg)
...
def <<=[T, W <: Wrap[T]]( args : (W, Wrap[T]) ) : W = realWork[T,W](args._1) 
```

隐式转换有一个缺点：Tuple2 是一种非常流行的类型，将任何单个转换为元组是危险的。

所以我引入了我自己的类型只用于隐式转换，不会污染整个类型系统。

```
class SugarPair[+T1 <: T2, +T2] (val s1 : T1) {
  def apply() : T1 = s1
}
implicit def toSugarPair[T](sugar : T) : SugarPair[T,T] = new SugarPair[T,T](sugar)
...
def <<=[T, W <: Wrap[T]](arg : SugarPair[W,Wrap[T]]) : W = realWork[T,W](arg() ) 
```

# java - 如何动态注入spring bean（原型范围）

> ID：13535070
> 
> 赞同：0
> 
> 时间：2012-11-23T19:59:03.103
> 
> 标签：java, spring, dependency-injection, factory

我正在使用 Spring 3.1.1，在我的业务逻辑中，我有一个循环，每次迭代都需要一个新的 spring bean 实例（原型范围）。

最好的方法是什么？我必须创建自己的 BeanFactory 类，我可以将其注入到我的类中，并且每次都调用它以根据请求生成 bean？在查看[Spring 3 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-beanfactory)时，似乎暗示我应该改用 ApplicationContext 。但是，使用 ApplicationContext 使我的代码依赖于 Spring。

这种事情的最佳方法是什么？Spring 是否已经提供了一种我可以利用的工厂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:51:41.517

`ApplicationContext` *是*工厂。您不必将其注入您的班级；您实例化一个并使用它来创建 bean 并连接它们的依赖项。

我不明白“使用 ApplicationContext 使我的代码依赖于 Spring”的评论。是的，它确实。你觉得DI值不值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:37:57.067

我想你应该和春天一起去。Spring 满足您的需求。您可以使用一种方法从应用程序上下文中查找特定类型的 bean。因此，如果您将该 bean 设为原型。那么当你调用这个特殊方法时，你会得到一个你想要的bean的新实例。

你会在这里找到它的详细[信息！](http://nurkiewicz.blogspot.com/2010/08/creating-prototype-spring-beans-on.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T17:02:37.203

您可以使用自定义范围并使注入 bean 代理，并在自定义范围 bean 上侦听一些可以注入底层代理 bean 的动态事件

# c - 为什么编译器在使用结构变量时说“缺少类型说明符”

> ID：13535071
> 
> 赞同：-1
> 
> 时间：2012-11-23T19:59:05.883
> 
> 标签：c, struct

我正在学习 C 语言并尝试学习一些有关 Structs 的知识，我在下面有这个示例，我试图了解结构内存分配是如何组成的。我了解到结构中的每个字段都是字长的，因此如果没有使用足够的内存，将会有空的内存空间，这应该在示例中看到，但是编译器给了我几个错误，例如***Type specifier missing***、***Expected '***和***Type名称需要说明符或限定符***。怎么来的？

```
#include <stddef.h>
#include <stdio.h>

typedef struct
{
    char name[25];
    int id;
    int year;
    char material;
} Student;

int
main(void)
{
    Student talu;
    printf("Size of tAlu %d\n", (int)sizeof(talu));
    printf("name size is %d\n", offsetof(talu, name));
    printf("id size is %d\n", offsetof(talu, id));
    printf("year size is %d\n", offsetof(talu, year));
    printf("material size is %d\n", offsetof(talu, material));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:00:12.607

这是因为您忘记了右括号：

```
char name[25];
//         ^^^   ! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T20:00:31.197

你错过了一个括号。

```
 char name[25; 
```

应该是 `char name[25];`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T20:08:13.590

我也尝试编译你的代码并得到错误，所以我最终修复它是这样的：

```
#include <stddef.h>
#include <stdio.h>

typedef struct
{
    char name[25];
    int id;
    int year;
    char material;
} Student;

int
main(void)
{
    printf("Size of tAlu %d\n", (int)sizeof(Student));
    printf("name size is %d\n", offsetof(Student, name));
    printf("id size is %d\n", offsetof(Student, id));
    printf("year size is %d\n", offsetof(Student, year));
    printf("material size is %d\n", offsetof(Student, material));
    return 0;
} 
```

这是使用 GCC 作为编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T20:25:11.080

**OFFSETOF(3)**：“宏 `offsetof()` 返回字段成员从结构类型开始的偏移量。”

未报告字段的大小，但未报告它们在结构中放置的位置，`offsetof()`之所以使用是因为：

“组成结构的字段的大小可能因实现而异，编译器可能会在字段之间插入不同数量的填充字节”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T20:13:10.743

`offsetof()`取成员偏移量的类型作为第一个参数计算。

阅读手册页会有所帮助。

# sbt - sbt 任务依赖 liquibase

> ID：13535073
> 
> 赞同：2
> 
> 时间：2012-11-23T19:59:15.943
> 
> 标签：sbt, liquibase

我将 sbt 用于我的项目并使用 liquibase 插件进行数据库管理。我想配置一个构建周期，以便在集成测试之前运行 liquibase-update 任务。我需要一些关于如何做到这一点的帮助。所以在运行 it:test 任务时，必须先运行 liquibase-update 任务。在使用以下配置运行测试任务之前，我设法运行了 liquibase-update 任务：

（测试中的测试）<<=（测试中的测试）依赖（liquibaseUpdate）

但我希望在运行集成测试之前触发它。我尝试了以下配置，但它不起作用：

(IntegrationTest 中的测试) <<= (IntegrationTest 中的测试).dependsOn(liquibaseUpdate)

# emacs - 如何让speedbar列出C函数+无法使用sr-speedbar+macro+command history

> ID：13535083
> 
> 赞同：1
> 
> 时间：2012-11-23T20:00:13.670
> 
> 标签：emacs, emacs-speedbar

我是 Windows XP 上的 Emacs 新手，经过大量搜索后我无法找到/理解多个查询。

1.  我了解 speedbar 将支持显示 C 函数列表。如 http://stackoverflow.com/questions/259364/how-do-i-configure-emacs-speedbar-for-c-sharp-mode 中所述，我将 .emacs 中的代码添加为

    ```
    (speedbar 1)
       (add-to-list 'speedbar-fetch-etags-parse-list
                    '("\\.c" . speedbar-parse-c-or-c++tag)) 
    ```

    我看到 speedbar 启动，但它从不显示功能。也许我需要安装 etags 但找不到它。我也找到了 gtags 但找不到二进制文件
2.  我将 sr-speedbar.el 复制到 ~/emacs.d/ 目录中。我在.emacs中添加（需要'sr-speedbar），注释掉speedbar相关代码，重新加载Mx ~/.emacs但没有找到任何sr-speedbar。如果我取消注释 speedbar 代码并注释 sr-speedbar，它会在加载时显示 speedbar。Emacs 能够在 ~/emacs.d/ 目录中找到 sr-speedbar.el，因为如果我更改文件名，它会显示错误：无法找到 sr-speedbar。
3.  我想制作一个键盘宏，用于使用 tramp 和 ssh 进行日志记录。但是，当我录制宏时，我必须删除多个字符以提供从头开始的路径，即 emacs 会自动显示最后一个路径，因此我必须删除所有字符，然后以 ssh:// 重新开始。键盘宏记录所有退格，如果退格超过当前路径的长度，则返回错误。有没有办法避免它
4.  我配置了 linum 包。我希望它在 emacs 会话开始时自动启动，输入 Mx linum。我怎样才能做到这一点？
5.  有没有办法检索命令历史记录（不是 shell 命令）然后重播一些命令再次感谢您耐心阅读直到这一点:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:45:21.933

1.  对于 CEDET/Semantic 支持的 C、C++ 和其他语言，Speedbar 能够显示函数和其他对象。但是你需要正确设置语义，例如，你可以使用[我](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)在 CEDET 中的文章。

2.  据我了解，要全局启用 linum-mode，您需要`(global-linum-mode 1)`将`~/.emacs`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:00:58.893

对于 3，有两种选择：

*   只需在预插入目录的末尾键入“/ssh:blabla”（此目录将被忽略，因为它会变成灰色）。

*   执行`C-a C-k`擦除 minibuffer 的内容。

对于 5，有`repeat-complex-command`必然`C-x ESC ESC`，有`repeat`必然`C-x z`。

# java - 在 PreferenceActivity 的主要活动中做事？

> ID：13535097
> 
> 赞同：2
> 
> 时间：2012-11-23T20:01:19.937
> 
> 标签：java, android, android-intent, android-preferences

`info.setTextSize(TypedValue.COMPLEX_UNIT_SP, number_config);`我在 onItemSelected 的案例下方有这条线作为微调器。（它使用微调器设置的值设置 EditText 的 textsize）然后我有一个偏好活动，其中我有一个 switchpreference，当开关设置为“开”时，我希望上面的行是“活动的” " 并且在设置为关闭时处于非活动状态。所以当它设置为关闭时 textsize 不会改变。你会怎么做？

非常感谢

我在ItemSelected 上的微调器：

```
 public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {

            switch (position) {
            case 0:
                config_textsize = "10.0f".toString();
                break;

            case 1:
                config_textsize = "12.0f".toString();
                break;
                ...
            }

            String number_config = Float.valueOf(config_textsize);
 /*This line */ EditText info.setTextSize(TypedValue.COMPLEX_UNIT_SP, number_config);

            } 
```

偏好活动：

```
public class Settings extends PreferenceActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);  
    }

} 
```

这是我在 xml 中的 switchpreference：

```
 <SwitchPreference
     android:key="EditTextSize"
     android:title="Text Size" 
     android:summary="Change text size when editing" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:23:07.850

尝试：

如果打开，这应该返回 true，否则返回 false。这只是一个假设，我从未使用过 SwitchPreference，但尝试一下......

## 编辑

创建一个返回整数的方法：

```
 private int getPosition(){

    SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(YourActivity.this);
    boolean switchOn = prefs.getBoolean("EditTextSize",
            false);

     int position=-1;

    if(switchOn==false){

         position=0;
     }else if(switchOn==true){

        position=1
       }
    return position;} 
```

# javascript - 在 IE9 上使用 iFrame 出现多个错误

> ID：13535099
> 
> 赞同：0
> 
> 时间：2012-11-23T20:01:31.747
> 
> 标签：javascript, jquery, asp.net, internet-explorer-9

我的页面中有一个这样的`iframe`内部`div`：

```
<div id="ModalContato" style="display: none; text-align: center;">
    <iframe id="IfrModalContato" frameborder="0" scrolling="yes" src="" style="width: 100%;
        height: 100%;"></iframe>
</div> 
```

在我的页面中，网格内有一个调用此函数的按钮：

```
function AbreModalContato() {
    $("#IfrModalContato")[0].src = "ContatoModal.aspx?Modal=1&IdContatoPai=" + $("#ctl00_Corpo_HidIdContato").val();
    $("#ModalContato").dialog({ modal: true, title: 'Cadastro de contatos', width: 970, height: 570 });
    $("#ModalContato").dialog('open');
} 
```

当我单击打开模式的按钮时，我收到很多 JS 错误，例如：

```
'Array' is not defined
'Object' is not defined
'Function' is not defined 
```

在[这个问题](https://stackoverflow.com/questions/10898487/javascript-array-object-date-not-defined)上，有一个人似乎和我一样有问题（我的也只发生在 IE9 上），但作为 JS 和 jQuery 的菜鸟，我不知道如何使我的代码适应他所说的。

我试过这样的事情：

```
function onShow() {
    $("#IfrModalContato").attr("src", "ContatoModal.aspx?Modal=1&IdContatoPai=" + $("#ctl00_Corpo_HidIdContato").val());
    $("#ModalContato").dialog({ modal: true, title: 'Cadastro de contatos', width: 970, height: 570 });
    $("#ModalContato").dialog('open');         
} 
```

但这对我不起作用。任何人？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:12:06.417

这只是一个猜测，但请确保您没有在框架和页面中包含相同的 jquery 脚本文件。IE 不喜欢这样，这就是为什么我不使用 iFrame 或只在父页面中使用一组脚本，您可以在 iFrame 窗口上使用这些脚本。

# xamarin.android - 适用于 Android 的 Mono 上 TextView 中的 HTML 样式

> ID：13535100
> 
> 赞同：3
> 
> 时间：2012-11-23T20:01:44.593
> 
> 标签：xamarin.android

我的strings.xml 中有这种情况。

```
<string name="mensagem">Olá <b><i> {0} </i></b>,</string> 
```

在我的代码中，我这样做：

```
string msg = String.Format(Resources.GetString(Resource.String.mensagem).ToString(), cliente.Nome.ToUpper());
lblNome.Text = Html.FromHtml(msg).ToString(); 
```

但是样式标签 (b,i) 不起作用。我需要连接有风格和没有风格的单词，所以我需要这样做。我不能使用`setTypeface`，因为我需要设置单个单词的样式，然后在句子中加入这些单词。

方法是什么？

问候，马塞洛。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T23:13:56.067

您需要将代码更改为以下内容。

```
string msg = String.Format(Resources.GetString(Resource.String.mensagem).ToString(), cliente.Nome.ToUpper());
lblNome.TextFormatted = Html.FromHtml(msg); 
```

`Html.FromHtml(string).ToString()`只是将格式转换`ISpannable`回字符串，因此您将丢失格式。

# c++ - 重写的构造函数

> ID：13535105
> 
> 赞同：1
> 
> 时间：2012-11-23T20:02:02.387
> 
> 标签：c++

我试图在另一个类的构造函数中分配一个类的成员。但我收到“无法分配，因为成员是私人的”的错误。代码是这样的：

```
Class Class1 {
    private:
        string name;
        string city;
}

Class Class2 {
    private: 
        string id;
        string age;

            Class1 var; //Class1 type variable defined.

    Public:    
        Class2(){   // Now I will define constructor.

        }
        Class2(Class1&, string name1, string city1) {
            var.name = name1;     // error reported , class1 private member
            var.city = city1;     // error reported , class1 private member
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:21:49.327

首先，让我们解决一些简单的问题。你`Class Class1 { ... }`用来定义一个类，当它应该是`class Class1 { ... };`. 也就是说，关键字 is`class`并且您需要以分号结束定义。此外，您的`Class2`构造函数的第一个参数是类型`Class1&`，但您甚至没有使用它。`Class1`您在这里传递的任何内容都将被浪费。

在您的示例中，是`var`类型*并且*`Class1`是. 这并没有赋予任何特殊的特权来访问s 私人成员。他们是完全私人的。*`Class2``Class2``Class1`*

 *在您的标题中，您说您正在覆盖构造函数。覆盖仅适用于类继承。从另一个类继承的类可能会覆盖其成员函数。所以现在，不清楚你是想`Class1`成为基类还是`Class2`.

如果继承是您正在寻找的，您应该更改您的声明`Class2`to `class Class2 : public Class1 { ... };`。这意味着`Class2`继承自`Class1`. 您仍然无法访问其中的成员`Class1`，因为它们是私有的。要使它们可用于您的派生类，您需要使它们成为`protected`或`public`- 前者是首选。

```
class Class1 {
  protected:
    Class1(string name, string city) : name(name), city(city) { }
    string name;
    string city;
};

class Class2 : public Class1 {
  private: 
    string id;
    string age;

  public:
    Class2(string name1, string city1)
      : Class1(name1, city1)
    { }
}; 
```

如果您想要组合 - 也就是说，`Class1`是的成员`Class2`- 那么您需要提供`Class2`一些方法来设置`Class1`. 目前，它的成员是私人的，所以你不能做任何事情。你*可以*制作它们`public`，但那将是*非常不鼓励*的。一种更好的方法是提供允许这样做的公共`setName`和`setCity`功能：`Class1``Class2`

```
var.setName(name1);
var.setCity(city1); 
```

更好的是，因为我倾向于认为为了它而制作 setter 是非常糟糕的设计，所以您应该提供`Class`一个构造函数来设置名称和城市并`var`在`Class1`的初始化列表中进行初始化：

```
class Class1 {
  public:
    Class1(const string& name, const string& city)
      : name(name), city(city)
    { }
  private:
    string name;
    string city;
};

class Class2 {
  private: 
    string id;
    string age;
    Class1 var;

  public:
    Class2(string name1, string city1)
      : var(name1, city1)
    { }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:59:41.280

您不能从 class2 为 class1 的私有成员赋值。

我将在类 1 中创建一个构造函数，用于初始化变量名称和城市：

```
Class1(string n, string c)
{
 name=n;
 city=c;
} 
```

然后在 class2 构造函数中，我将调用该构造函数，如下所示：

```
Class2(Class1&, string name1, string city1) 
{
   var = Class1(name1,city1);        
} 
```

根据您的代码片段，这是我可以建议的最好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T21:40:14.827

正如在另一个答案中所说，您可以使用构造函数来初始化类 1 的变量：

现在要获取值，您应该在类 1 中执行以下操作：

```
public string getName()
{
 return name;
}

public string getCity()
{
 return city;
} 
```

将这两个函数添加到您的 class1： 然后在 class2 中，您可以通过调用它们来获取 city 的值：

```
var.getCity(); 
```

或者

```
var.getName(); 
```

这些将使您能够访问 class2 中的 class1 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T20:05:11.120

正如您的编译器告诉您的那样，name 和 city 对 Class1 1 是私有的，因此只能从 Class 2 中访问。

使用 name 和 city 的唯一方法是向 Class1 添加一个以 name 和 city 作为参数的 Ctor，然后提供（公共）方法（getter/setter）来获取这些值并设置这些值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T20:05:18.157

您不能在该类之外设置私有成员变量。

尝试 protected（如果您使用继承）、public（简单的方法）或（最好的！）**创建 setter 和 getter 函数**，并将这些函数公开。

简单地说（实际上过于简化），您希望所有变量都是私有的，而某些函数是公共的。如果每个变量是私有的并且您想在类外调用它，则每个变量都需要一个 setter 和 getter 函数。

[http://www.cplusplus.com/forum/beginner/70937/](http://www.cplusplus.com/forum/beginner/70937/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T20:13:42.943

正如其他人所说，您不能从另一个（非朋友）类型访问一个类型的私有成员。曾经。

此外，您正在两阶段初始化您的`var`成员，这似乎完全没有必要。写一个合适的构造函数

```
Class1::Class1(std::string const& name, std::string const& city)
: name(name), city(city) {
} 
```

并从以下位置调用它`Class2`：

```
// what is that first parameter for?
Class2(Class1&, string name, string city)
: var(name,city) {
} 
```

您可以将`Class1`的构造函数设为公开，也可以将其设为私有并显式地成为好友`Class2`。*

# c# - 在 Raspberry Pi 上使用单声道编译 C# Windows 窗体应用程序时出错

> ID：13535112
> 
> 赞同：2
> 
> 时间：2012-11-23T20:03:14.633
> 
> 标签：c#, mono, compiler-errors, debian, raspberry-pi

我正在尝试将我的 C# 应用程序编译到 Raspberry Pi（运行 Debian）。

我已经在 Pi 上成功安装了 mono，编译并运行了一个基本的 hello world 应用程序。我现在正在运行以下命令（[从这里](http://www.mono-project.com/WinForms_Getting_Started_Guide)）来尝试编译我的 Windows 窗体应用程序：

```
`dmcs -pkg:dotnet Login.cs /r:system.Windows.Forms /r:System.Drawing` 
```

但是我收到以下错误：

```
Error CS006; Metadata file 'cscompmgd.dll' could not be found Compilation failed: 1 error(s) 
```

所以我的问题是：

1）这可能是因为我想参考

> 使用 MySql.Data.MySqlClient；

2) 如果对 1 的回答是否定的，还有什么可能导致该错误？

3）相关问题：我的应用程序有几种不同的形式，编译这个 Login.cs 文件是否足以运行整个应用程序，或者我应该；一次编译它们，还是编译program.cs？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:09:06.323

这个文件我与编译器有关。这可能会有所帮助：[http](http://ubuntuforums.org/showthread.php?t=914626) ://ubuntuforums.org/showthread.php?t=914626 。至于 MySQL 客户端，您可能需要更多库，我建议您在单独的计算机上编译您的应用程序（使用更多硬盘和内存将您的二进制文件传输到树莓派（额外的步骤可能会使构建有点棘手，但额外的空间和电源可能会使完整的构建环境更容易）

# c# - 如何在c#中将条形图放置在图表上的正确位置

> ID：13535113
> 
> 赞同：0
> 
> 时间：2012-11-23T20:03:26.193
> 
> 标签：c#, .net, visual-studio-2010, charts

嗨，我目前正在尝试让条形图与 x 轴上的数字对齐。正如您在下图中看到的，图表中的条形图似乎与左对齐或右对齐。

[URL=http://imageshack.us/photo/my-images/528/stackoverflowexample.png/][IMG=http://img528.imageshack.us/img528/19/stackoverflowexample.png][/IMG][ /网址]

使用 [URL=http://imageshack.us]ImageShack.us[/URL] 上传

我想知道是否有一种方法可以使用代码行使它们直接对齐数字 1、2 和 3？

我还想知道是否可以将 1、2 和 3 更改为名称 temprature、vcc 和 light？

我已经对其进行了一些调查，但无法找到解决此问题的方法（从我尝试过的注释掉的代码行中可以看出），这就是我求助于你们的原因。我已经发布了我的代码下面（稍作修改，因此它可以在没有我的变量的任何 c# 中工作）。

感谢您花时间阅读本文

```
chart1.ChartAreas.Add("area");
                    //chart1.ChartAreas["area"].AxisX.Minimum = 0;
                    //chart1.ChartAreas["area"].AxisX.Maximum = 2;
                    //chart1.ChartAreas["area"].AxisX.Interval = 1;
                    //chart1.ChartAreas["area"].AxisX.IntervalAutoMode;
                    chart1.ChartAreas["area"].AxisY.Minimum = 0;
                    chart1.ChartAreas["area"].AxisY.Maximum = sumLight + 100;
                    chart1.ChartAreas["area"].AxisY.Interval = 50;
                    chart1.ChartAreas["area"].AxisY.Title = "Average Value";
                    //chart1.ChartAreas["area"].AxisX.Title = "Speed (m/s)";

                    chart1.Series.Add("Temprature");
                    chart1.Series.Add("VCC");
                    chart1.Series.Add("Light");

                    chart1.Series["Temprature"].Color = Color.Red;
                    chart1.Series["VCC"].Color = Color.Green;
                    chart1.Series["Light"].Color = Color.Yellow;

                    chart1.Series["Temprature"].Points.AddXY(1, 78.32);
                    chart1.Series["VCC"].Points.AddXY(2, 3.92);
                    chart1.Series["Light"].Points.AddXY(3, 333);
                    chart1.Series["Temprature"].IsValueShownAsLabel = true;
                    chart1.Series["VCC"].IsValueShownAsLabel = true;
                    chart1.Series["Light"].IsValueShownAsLabel = true;

                    chart1.Legends.Add("legend");
                    chart1.Titles.Add("Average for Temperature, Light & VCC using timestamp");

                    chart1.Visible = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:38:26.820

我猜你可能会通过插入空数据点来解决问题。所以这个块：

```
chart1.Series["Temprature"].Points.AddXY(1, 78.32);
chart1.Series["VCC"].Points.AddXY(2, 3.92);
chart1.Series["Light"].Points.AddXY(3, 333); 
```

应该成为

```
chart1.Series["Temprature"].Points.AddXY(1, 78.32);
chart1.Series["Temprature"].Points.Add(new DataPoint(2,0){IsEmpty=true});
chart1.Series["Temprature"].Points.Add(new DataPoint(3,0){IsEmpty=true});

chart1.Series["VCC"].Points.Add(new DataPoint(1,0){IsEmpty=true});
chart1.Series["VCC"].Points.AddXY(2, 3.92);
chart1.Series["VCC"].Points.Add(new DataPoint(3,0){IsEmpty=true});

chart1.Series["Light"].Points.Add(new DataPoint(1,0){IsEmpty=true});
chart1.Series["Light"].Points.Add(new DataPoint(2,0){IsEmpty=true});
chart1.Series["Light"].Points.AddXY(3, 333); 
```

此外，您可以尝试仅使用 3 个彩色 DataPoints 的系列：

```
chart1.Series[0].Points.AddXY("Temprature", 78.32);
chart1.Series[0].Points[chart1.Series[0].Points.Count - 1].Color = Color.Red;
chart1.Series[0].Points.AddXY("VCC", 3.92);
chart1.Series[0].Points[chart1.Series[0].Points.Count - 1].Color = Color.Green;
chart1.Series[0].Points.AddXY("Light", 333);
chart1.Series[0].Points[chart1.Series[0].Points.Count - 1].Color = Color.Yellow; 
```

# python - 使用 Python 从 ftp 下载

> ID：13535123
> 
> 赞同：1
> 
> 时间：2012-11-23T20:04:18.163
> 
> 标签：python, ftp, download, ftplib

我有一段 Python 代码可以从 ftp 下载文件。该代码会下载*可用日期*列表中的第一个文件，但无法下载第二个文件。可能是什么问题呢？

```
import os, ftplib 
destdir='D:\precipitation\dl' 
ftp = ftplib.FTP('ftp.itc.nl')  
ftp.login('anonymous', '') 
ftp.cwd('pub/mpe/msg') 
available_days=['summsgmpe_20100101.zip','summsgmpe_20100102.zip', 'summsgmpe_20100103.zip', 'summsgmpe_20100104.zip', 'summsgmpe_20100105.zip', 'summsgmpe_20100106.zip', 'summsgmpe_20100107.zip', 'summsgmpe_20100108.zip'] 
hdfs = list() 
for day in available_days : 
    file = available_days[available_days.index(day)] 
    print 'file=', file 
    local_file = os.path.join(destdir, file) 
    ftp.retrbinary('RETR %s' %file, open(local_file, 'wb').write) 
    hdfs.append(os.path.abspath(local_file)) 
    ftp.cwd('..')  
ftp.quit() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:27:38.363

删除您的呼叫`ftp.cwd(..)`

这是为列表的每次迭代向上移动一个目录，而不是停留在文件所在的正确文件夹中。

# php - 每次悬停链接时调用的PHP代码？

> ID：13535132
> 
> 赞同：0
> 
> 时间：2012-11-23T20:04:44.080
> 
> 标签：php, html, css

我有一个 css/html 菜单，现在我想在每次用户悬停按钮时执行这个 PHP 脚本：

CSS：

```
background: <?php printf( "#%06X\n", mt_rand( 0, 0xFFFFFF )); ?>; 
```

这是在我的 CSS 中。当我重新加载页面时，它会被正确调用，但即使我将按钮悬停，颜色也会保持不变......我该如何改变这个？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T20:08:09.350

PHP 只在服务器上执行一次。

您可以使用 Javascript（最好是 jQuery）重现您想要的内容。

看到这个答案。[jquery随机颜色悬停](https://stackoverflow.com/questions/7379353/jquery-random-color-hover)

# vb.net - VB.NET加速循环功能

> ID：13535133
> 
> 赞同：0
> 
> 时间：2012-11-23T20:04:45.723
> 
> 标签：vb.net, cycle

我有这个函数可以在 bin 文件中写入字节。

```
 Public Shared Function writeFS(path As String, count As Integer) As Integer
        Using writer As New BinaryWriter(File.Open(path, FileMode.Open, FileAccess.Write, FileShare.Write), Encoding.ASCII)
            Dim x As Integer
            Do Until x = count
                writer.BaseStream.Seek(0, SeekOrigin.End)
                writer.Write(CByte(&HFF))
                x += 1
            Loop
        End Using
        Return -1
    End Function 
```

我有一个文本框，它是`count`值。Count 是要写入文件的字节数。

问题是当我想写 1mb+ 时，由于循环需要 10+ 秒。

我需要一种更好/更快的方法来在文件时间`FF`结束时写入十六进制值。`'value'`

如果我没有很好地解释，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:08:17.993

这应该更好：

```
Public Shared Function writeFS(path As String, count As Integer) As Integer
    Using writer As New BinaryWriter(File.Open(path, FileMode.Open, FileAccess.Write, FileShare.Write), Encoding.ASCII)
        Dim x As Integer
        Dim b as Byte
        b = CByte(&HFF)
        writer.BaseStream.Seek(0, SeekOrigin.End)
        Do Until x = count
            writer.Write(b)
            x += 1
        Loop
    End Using
    Return -1
End Function 
```

这样你就不会每次都调用 CByte。并且无需在每次写入后移动到流的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:34:36.660

之前的一些问题：为什么要共享函数？为什么使用 FileSHARE.Write？WriteShare 意味着其他进程可以写入文件，而您写入文件。为什么你写的都是一样的单个字节？为什么函数每次都返回-1？可能更适合使用 SUB？为什么不使用简单的 for 循环来代替 while？

```
Public Sub writeFS(path As String, count As Integer)
    Using Stream As New FileStream("", FileMode.Append, FileAccess.Write, FileShare.Read)
        Stream.Write(Enumerable.Repeat(Of Byte)(255, count).ToArray, 0, count)
    End Using
End Sub 
```

好的，如果您需要写入 100MB，这不合适，但您可以对写入进行分区。

# linux - 在 Linux 中计算 CPU 使用率

> ID：13535136
> 
> 赞同：0
> 
> 时间：2012-11-23T20:04:51.380
> 
> 标签：linux, bash, cpu

使用计算平均CPU使用率`100 - idle%`时，CPU使用率百分比是通过计算计算出来的吗？`mpstat`这是正确的还是我必须以任何其他方式计算 CPU 利用率？谢谢！

# python - sgp4 轨道计算中的单位

> ID：13535141
> 
> 赞同：3
> 
> 时间：2012-11-23T20:05:25.840
> 
> 标签：python, orbital-mechanics, sgp4

我正在做一个项目来使用包[sgp4](http://pypi.python.org/pypi/sgp4/ "sgp4")计算卫星的矢量位置。给定一个输入文件，它应该从地球中心吐出一个以米为单位的位置向量。但是，在给出的示例中以及我看到的所有输出中，x、y 和 z 值始终在数千米范围内，这意味着卫星被埋在地球表面以下很远的地方。我已经尝试过假设它们意味着公里，并且假设它们意味着从表面而不是中心，以没有更有意义的结果。有谁知道位置向量中的数字代表什么？

样本输出向量：[5576.056952400586，-3999.371134576452，-1521.9571594376037]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:12:43.203

单位是公里。指示单位为米的python包文档不正确。

鉴于地球平均半径为 6371 公里，您显示的数字表明地球表面上方约 657 公里的高度。你为什么不相信这是有意义的？

# c# - 如何在组合框中显示值

> ID：13535143
> 
> 赞同：0
> 
> 时间：2012-11-23T20:05:31.223
> 
> 标签：c#, combobox

我有一个包含世界上所有国家的组合框。我的问题是如何在程序启动时在组合框中显示“英格兰”。

我知道我可以使用下面的代码获取一个国家/地区的索引，但不知道如何显示所选国家/地区。

```
int index = cmbCountry.Items.IndexOf(address.Country); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:08:57.493

```
cmbCountry.SelectedIndex = index; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T20:12:20.983

```
cmbCountry.SelectedValue = "England"; 
```

# javascript - 带有分页点的 JQuery jCarousel？

> ID：13535144
> 
> 赞同：3
> 
> 时间：2012-11-23T20:05:38.490
> 
> 标签：javascript, jquery, jcarousel

我正在使用 jCarousel 插件来显示一系列项目。我从网站上按照[这个例子来获取外部控件和分页控件。](http://sorgalla.com/projects/jcarousel/examples/static_controls.html)

这种方法有两个问题：

1.  我需要手动添加数字的项目（而不是只用 JS 计算轮播中的项目数），尽管我可以忍受这个，并且

2.  似乎没有办法突出显示（通过类更改）当前幻灯片的项目

我正在做的是使用项目符号作为分页点，正如你[在这个小提琴中看到的那样](http://jsfiddle.net/smlombardi/KZjYx/)

```
<div class="carousel-nav cf">
<table>
<tr>
    <td><a href="#" id="mycarousel-prev">&#x25C0;</a></td>
    <td>
        <div class="jcarousel-control">
          <a href="#">&bull;</a>
          <a href="#">&bull;</a>
          <a href="#">&bull;</a>
        </div>
    </td>
    <td><a href="#" id="mycarousel-next">&#x25BA;</a></td>
</tr>
</table>
</div> 
```

并希望将当前项目的类设置为“活动”或类似。

有任何想法吗？或者有更好的插件吗？我尝试了 Cycle，但我需要两个同时显示 2 个或更多项目。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-29T12:44:36.013

html:

```
<ul class="jcarousel-control"></ul> 
```

脚本：

```
 $('.jcarousel-control')
        .on('jcarouselpagination:active', 'li', function() {
            $(this).addClass('active');
        })
        .on('jcarouselpagination:inactive', 'li', function() {
            $(this).removeClass('active');
        })
        .jcarouselPagination({
            'perPage':1,
            'item': function(page, carouselItems) {
                return '<li class="' + (page == 1 ? "active" : "") + '"><a href="#' + page + '"></a></li>';
            }
        });

    $('.mycarousel-prev').jcarouselControl({target:'-=1'});
    $('.mycarousel-next').jcarouselControl({target:'+=1'}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T20:56:58.637

实际上，您可以使用回调函数来突出显示当前活动的轮播元素

```
function highlighttab1(carousel, state, liindex) {
document.getElementById(liindex).className = "selected";}

function removehighlighttab1(carousel, state, liindex) {
document.getElementById(liindex).className = "unselected";} 
```

几天前，我与 jcarousel 一起工作，在那里我有菜单标签面板（因为你有点）和所有静态超链接，单击它们时将滚动到预期的轮播元素

# list - python匹配列表列表

> ID：13535147
> 
> 赞同：0
> 
> 时间：2012-11-23T20:06:14.187
> 
> 标签：list, python-3.x

```
def compare_two_lists(list1,list2):
   i=0
   j=0
   while i < len(list2) :
      if i%2 == 0:
         j == 0
      else:
         j == 1
      for sublist2 in list2[i:] :
         for sublist in list1[j:]:
            #sublist.intersection(sublist2)
            intersect =  [x for x in sublist if x in sublist2]
            print('from set ',sublist, len(intersect),' matched number(s): ', intersect)
            i=i +1

compare_two_lists([[1,2,3,4,5],[20,30]],[[5,3,7,8,1],[20,10],[4,10,1,7,8],[30,20]]) 
```

我正在尝试获取列表 1 的列表 0 和 1 以适当地比较列表 2 的列表 0、1、2 和 3 并返回匹配项。该程序几乎可以正常工作，因为它确实会在其他迭代中返回列表的匹配项。我似乎无法让迭代发生两次并返回`[1,3,5],[20], [1,4],[20,30]`。请帮忙。我非常想了解如何正确地分隔函数并在逻辑上使用循环！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:26:24.273

```
def compare_two_lists(list1,list2):
    lRet = []                         #a
    for i in range(len(list2)):       #b
        j= i%2                        #c
        sublist1 = list1[j]           
        sublist2 = list2[i]           
        lRet.append([x for x in sublist1 if x in sublist2])   
    return lRet 

compare_two_lists([[1,2,3,4,5],[20,30]],[[5,3,7,8,1],[20,10],[4,10,1,7,8],[30,20]]) 
```

这似乎可以解决问题。这是一个解释（见上面的行标签）：

*   a: lRet 被初始化。我们正在这个变量中建立一个列表列表
*   b: i 遍历 list2 的每个索引
*   c：如果 i 是偶数，则 j 为零，否则 j 为一。你有`j==1`并且 `j==0`在你的代码中。这些运算符不会更改任何操作数值。你的意思是`j=1`等等，但这种方式更快

为了解释其余部分，我将使用您的示例输入列表来讨论实际迭代：

*i = 0（第一次迭代）*

```
j=0 
sublist1 = [1,2,3,4,5]
sublist2 = [5,3,7,8,1]
intersection is [1,3,5]. we APPEND this to lRet. 
thus lRet = [[1,3,5],] 
```

*我=1*

```
j=1
sublist1 = [20,30]
sublist2 = [20,10]
the intersection is [20,]
thus lRet = [[1,3,5],[20]] 
```

*我=3*

```
j=0
sublist1 = [1,2,3,4,5]
sublist2 = [4,10,1,7,8]
etc 
```

# javascript - 单击标记时如何关闭所有打开的信息窗口？

> ID：13535148
> 
> 赞同：-1
> 
> 时间：2012-11-23T20:06:19.667
> 
> 标签：javascript, google-maps, google-maps-api-3, infowindow

> **可能重复：**
> [谷歌地图：信息窗口未关闭](https://stackoverflow.com/questions/12953332/google-maps-infowindow-is-not-closing)

我花了几个小时试图弄清楚如何做到这一点，但似乎并没有接近解决方案。请在下面查看我的代码：

```
function initialize() {
var latlng = new google.maps.LatLng(50.71608,-1.993761);
var settings = {
        zoom: 14,
        center: latlng,
        mapTypeControl: true,
        mapTypeControlOptions: {style: 
        google.maps.MapTypeControlStyle.DROPDOWN_MENU},
        navigationControl: true,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
        mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"),      settings);

var contentString = '<div>'+
              '<p><strong>name</strong></p>'+
                '</div>';
var infowindow = new google.maps.InfoWindow({
                content: contentString
            });
var contentString2 = '<div>'+
              '<p><strong>name</strong></p>'+
                '</div>';
var infowindow2 = new google.maps.InfoWindow({
                content: contentString2
            });
var contentString3 = '<div>'+
              '<p><strong>name</strong></p>'+
                '</div>';
var infowindow3 = new google.maps.InfoWindow({
                content: contentString3
            });

var oldIcon = new google.maps.MarkerImage('images/maplogo.png',
        new google.maps.Size(100,50),
        new google.maps.Point(0,0),
        new google.maps.Point(50,50)
    );
    var oldShadow = new google.maps.MarkerImage('images/mapshadow.png',
        new google.maps.Size(100,50),
        new google.maps.Point(0,0),
        new google.maps.Point(50, 50)
    );
    var old = new google.maps.LatLng(50.714110196782485,-1.9864332675933838, 3);
    var oldMarker = new google.maps.Marker({
        position: old,
        map: map,
        icon: oldIcon,
        shadow: oldShadow,
        title:"title",
        animation: google.maps.Animation.DROP
    });

    var hamIcon = new google.maps.MarkerImage('images/maplogo.png',
        new google.maps.Size(100,50),
        new google.maps.Point(0,0),
        new google.maps.Point(50,50)
    );
    var hamShadow = new google.maps.MarkerImage('images/mapshadow.png',
        new google.maps.Size(100,50),
        new google.maps.Point(0,0),
        new google.maps.Point(50,50)
    );
    var ham = new google.maps.LatLng(50.71584417870842,-2.006630301475525, 1);

    var hamMarker = new google.maps.Marker({
        position: ham,
        map: map,
        icon: hamIcon,
        shadow: hamShadow,
        title:"title",
        animation: google.maps.Animation.DROP
    });

var centreIcon = new google.maps.MarkerImage('images/maplogo.png',
        new google.maps.Size(100,50),
        new google.maps.Point(0,0),
        new google.maps.Point(50,50)
    );
    var centreShadow = new google.maps.MarkerImage('images/mapshadow.png',
        new google.maps.Size(100,50),
        new google.maps.Point(0,0),
        new google.maps.Point(50,50)
    );
    var centre = new google.maps.LatLng(50.71712636698597,-1.9832682609558105, 2);
    var centreMarker = new google.maps.Marker({
        position: centre,
        map: map,
        icon: centreIcon,
        shadow: centreShadow,
        title:"title",
        animation: google.maps.Animation.DROP
    }); 

            google.maps.event.addListener(oldMarker, 'click', function() {
    infowindow.open(map,oldMarker);
    });
            google.maps.event.addListener(hamMarker, 'click', function() {
    infowindow2.open(map,hamMarker);
    });
            google.maps.event.addListener(centreMarker, 'click', function() {
    infowindow3.open(map,centreMarker);
    });
    } 
```

对此的任何帮助将不胜感激，因为我有一个截止日期，并且对 javascript 的理解非常低。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:16:16.693

`infowindow.close()`在`click`回调中调用。

您应该能够将您的听众替换为：

```
google.maps.event.addListener(oldMarker, 'click', function() {
    infowindow.open(map,oldMarker);
    infowindow2.close();
    infowindow3.close();
});

google.maps.event.addListener(hamMarker, 'click', function() {
    infowindow2.open(map,hamMarker);
    infowindow.close();
    infowindow3.close();
});

google.maps.event.addListener(centreMarker, 'click', function() {
    infowindow3.open(map,centreMarker);
    infowindow.close();
    infowindow2.close();
}); 
```

# c++ - 从 Ruby 代码访问用 OCaml 和 C++ 编写的库

> ID：13535149
> 
> 赞同：5
> 
> 时间：2012-11-23T20:06:26.653
> 
> 标签：c++, ruby, ocaml

我正在编写一个 Ruby 程序，我想在其中使用以下库：

1.  LTL3 工具。[http://ltl3tools.sourceforge.net/](http://ltl3tools.sourceforge.net/)
2.  AT&T FSM 库。[http://www2.research.att.com/~fsmtools/fsm/](http://www2.research.att.com/~fsmtools/fsm/)
3.  LTL2BA 库 www.lsv.ens-cachan.fr/~gastin/ltl2ba/

LTL3 工具是用 OCaml 编写的，AT&T FSM 库是用 C++ 编写的，LTL2BA 库是用 C++ 编写的。LTL3 工具依赖于 AT&T FSM 库和 LTL2BA 库。我有所有这些库的可执行文件和源代码。

如何从 Ruby 代码访问所有这些库？对不起，菜鸟问题，这是我在 Ruby 的第一周。顺便说一句，如果有帮助，我正在使用 Linux Ubuntu。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T21:49:31.177

与用不同语言编写的库进行交互的最简单方法*不是*找到 API 桥以使其作为程序的一部分运行，而是让它作为您通过管道传输数据的不同进程运行（以文本格式，或无论它容易支持什么）。

从描述来看，L3LTools 似乎用于将某种东西转换成另一种东西，*它*可以以文档化的文本格式读取和打印它们，*并且*有一个 shell 脚本包装器可以为您完成管道。

您甚至不需要知道它是用哪种语言编写的。只需为其输出格式获取解析器，为其输入格式获取打印机，然后从您的代码中调用脚本。

# sql - ExecuteNonQuery 命令中缺少参数，在 VB.NET 和 Access 中使用

> ID：13535150
> 
> 赞同：0
> 
> 时间：2012-11-23T20:06:33.193
> 
> 标签：sql, vb.net, ms-access-2007, oledb

我在 Access 2007 中有一个非常简单的数据库，我正在使用 VB 2010 连接它。有两个表，MenuItems 和 Orders，Orders.orderDate 的类型为“Date”。

我正在我的一种 VB 表单中运行以下代码（连接字符串和其他一切都很好）：

```
 sql = "SELECT OrderDate, MenuItem FROM MenuItems, Orders WHERE Orders.itemID = MenuItem.ID AND Orders.orderDate BETWEEN '" + fromDate + "' AND '" + toDate + "'"
  Dim cmd As New OleDb.OleDbCommand(sql, con)
  Dim count As Integer = cmd.ExecuteNonQuery() 
```

但我收到一个错误：

```
System.Data.OleDb.OleDbException (0x80040E10): value wan't given for one or more of the required parameters 
```

似乎什么都没有。我对另一个查询使用了相同的代码，除了 sql 不同。但我认为我的 sql 足够简单。这是在一个实例中生成的 sql（我已经仔细检查过，所有表名和列名都是正确的）：

```
SELECT OrderDate, MenuItem From MenuItems, Orders WHERE Orders.itemID = MenuItem.ID AND Orders.orderDate BETWEEN '11/21/2012' AND '11/24/2012' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:01:53.690

好吧，ExecuteNonQuery 方法用于更改数据的语句，即。DELETE / UPDATE /INSERT，返回值是受该语句影响的行数。由于您使用的是 Select 语句，因此您应该使用 oledbDataAdapter 和 Fil DataSet 来使用。

```
Dim conn As New OleDbConnection(con)
Dim adapter As New OleDbDataAdapter()
sql = "SELECT OrderDate, MenuItem FROM MenuItems, Orders WHERE Orders.itemID = MenuItem.ID AND Orders.orderDate BETWEEN '" + fromDate + "' AND '" + toDate + "'"
adapter.SelectCommand = new OleDbCommand(sql, con)
adapter.Fill(dataset)
Return dataset 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T17:07:29.480

问题是一个拼写错误的表格。（MenuItem而不是MenuItems），但它没有解决问题，我仍然得到一个错误。事实证明，数据库与用作查询参数的日期选择器值之间的匹配格式存在问题。

所以我确保我以简短的日期格式保存到数据库中：

```
sql = "INSERT INTO Orders(itemID, OrderDate) VALUES('" + ListBox1.SelectedValue.ToString() + "','" + FormatDateTime(OrderDate.Value, DateFormat.ShortDate) + "')" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T17:39:11.090

您应该使用参数化查询至少有两个原因。

1.  您不必担心日期（和其他）文字和语言环境问题。

2.  您不必担心 SQL 注入攻击，即有人在文本框中输入恶意代码，从而将 SQL 语句变为有害语句。

将您的声明更改为

```
sql = "SELECT Orders.OrderDate, MenuItems.MenuItem " & _
    "FROM MenuItems INNER JOIN Orders ON MenuItems.ID = Orders.itemID " & _
    "WHERE Orders.orderDate BETWEEN ? AND ?" 
```

然后像这样执行命令

```
Dim fromDate, toDate As DateTime

fromDate = DateTime.Parse(fromDateTextBox.Text)
toDate = DateTime.Parse(toDateTextBox.Text)

Dim dataset As New DataSet()
Using conn As New OleDbConnection(connectionString)
    Using adapter As New OleDbDataAdapter()
        Dim cmd As New OleDbCommand(sql, conn)
        cmd.Parameters.Add("?", fromDate)
        cmd.Parameters.Add("?", toDate)
        adapter.SelectCommand =  cmd
        adapter.Fill(dataset)
    End Using
End Using 
```

# database - 在数据库中处理用户配置文件的最佳方法是什么？

> ID：13535152
> 
> 赞同：0
> 
> 时间：2012-11-23T20:06:39.300
> 
> 标签：database, settings

现在几乎每个 Web 应用程序都允许您设置基本配置文件（甚至 Stack Exchange 也可以）。问题是您应该如何将数据存储在数据库中？

您应该只向您的**用户**数据库表添加更多列，还是应该设置另一个名为**user_profiles**的表，其外键为 user_id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:20:17.493

这是相当主观的：

# 单独的表

*   更容易获取没有个人资料的用户
*   当某些用户没有个人资料（一对一的可选关系）时，您无需支付任何存储费用
*   共享个人资料（？！？） - 无法想象这样的场景，但是......

# 单表

*   加载时不需要 JOIN
*   相关信息集中在一处
*   强大的一对一关系（通常每个用户都有一个配置文件，可能是隐式创建的）关系倾向于合并到单个表中

# facebook - Oauth - 合并帐户 - Twitter 和 Facebook 使用相同的 Oauth Id 吗？

> ID：13535157
> 
> 赞同：0
> 
> 时间：2012-11-23T20:07:04.633
> 
> 标签：facebook, twitter, oauth, twitter-oauth, facebook-oauth

我正在构建一个使用 Facebook 和 Twitter 凭据登录/注册以使用它的小应用程序。

我想知道一旦用户完成注册，如果用户决定这样做，是否有任何已知的策略将帐户合并在一起。

一个想法是确认匹配 oauth id's-

意思是，如果用户要在 Facebook 上登录一次，然后再用 Twitter 登录——前提是 oauth id 匹配——Boom!——账户现在合并了。

这是可接受的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T00:49:19.560

答案是……请打鼓……

不。

# .net - C# Web 服务客户端仅返回部分数据，但 SOAP UI 返回完整数据

> ID：13535158
> 
> 赞同：1
> 
> 时间：2012-11-23T20:07:27.897
> 
> 标签：.net, web-services, null, xsi

我正在编写一个 .NET c# Web 服务客户端，它查询 Web 服务并获取结果集作为响应。

当我使用此客户端查询 Web 服务时，它返回结果集但仅返回部分集。通过 SOAPUI 调用相同的 Web 服务时返回 58 条记录，但在 .NET 客户端中它只返回 5 条。58 是预期的记录数，我在从 .NET 客户端发出请求时没有应用任何过滤器。

.NET 客户端收到的这 5 条记录具有返回 xsi:nil="true" 的元素之一。结果集的 XSD 带有 nillable 属性，对于该元素为 true。

我已经验证了 SOAP UI 中的请求和响应，这些都验证得很好。

不确定为什么 .NET 客户端无法接收完整数据。有什么想法吗？

更新：在 .NET 中生成的引用类具有 [System.Xml.Serialization.XmlElementAttribute(IsNullable=true)] 针对 XSD 中标记为 isnullable 的元素。因此，当我撰写帖子对象时，此元素会自动添加。由于这是发布对象的一部分，因此 Web 服务将其视为过滤条件，因此返回 xsi:nill=true 的记录。现在问题已经解决了。感谢大家的支持。

# android - 找不到 Eclipse SDK 管理器文件

> ID：13535161
> 
> 赞同：0
> 
> 时间：2012-11-23T20:07:42.207
> 
> 标签：android, eclipse, sdk

我正在设置一个新的 eclipse 环境。我刚刚安装了 ADT 插件并以管理员身份重新启动了 eclipse。当我尝试通过 Window -> Android SDK Manager 打开 SDK Manager 时，我在控制台中看到以下内容：

![SDK 管理器错误](../Images/2e58472b8c3567998c94be1fa3af1400.png)

我不确定是什么导致了 [编码问题]x86_64 错误。我假设我需要手动手动编辑一些配置文件，以便路径不包含错误字符，但我不确定哪个文件/在哪里。有谁知道我需要编辑什么文件来解决这个问题，或者可能是一些替代修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:10:22.063

Eclipse -> 首选项 -> Android（左侧列表）-> SDK 位置（右侧框）

将您的 SDK 文件夹的正确位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:37:34.793

在 Windows 中，有时您可能无法访问文件。也许您可以将 eclipse 文件夹的位置切换到桌面。然后再次为 eclipse 重新安装 sdk。我们按照这种方式在我朋友的计算机上解决了类似的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:24:48.003

在 Android SDK 安装目录 ( `...\Android\android-sdk`) 下有一个工具目录，其中包含一个名为 android.bat 的文件。线

```
for /f %%a in ('%java_exe% -jar lib\archquery.jar') do set swt_path=lib\%%a 
```

设置`swt_path`为无效字符串`lib\♀x86_64`。

您可以通过删除`@echo off`第一行的命令并在命令之后添加这一行来看到这一点`for /f...`。

```
echo %swt_path% 
```

我的解决方法是在命令之后立即硬编码正确的路径`for \f...`，就像这样

```
set swt_path=lib\x86_64 
```

我假设这是 bat 文件本身的错误（未使用正确的编码或类似的东西）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T20:12:54.853

如果您正确下载了所有必需的软件，则可能您忘记在 Eclipse 中设置 SDK 位置。转到 Windows--> 首选项--> Android。窗口顶部是一个字段 SDK-Location。在那里您应该浏览到您的 SDK 位置，完成此操作后，按应用按钮。

# sublimetext2 - 在 PHPStorm 中使用 Sublime text 2 片段？

> ID：13535167
> 
> 赞同：1
> 
> 时间：2012-11-23T20:08:11.707
> 
> 标签：sublimetext2, phpstorm

过去几个月我一直在使用 Sublime text 2 和 PHPStorm，我想知道是否有人知道我是否可以将 Sublime 中的片段导入 PHPStorm？Sublime 有一些非常棒的片段，我想将它们集成到 PHPStorm 中，而无需手动添加它们。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-04T10:51:57.950

我遇到了这两个解决方案： [https://drupal.org/project/phpstorm-templates](https://drupal.org/project/phpstorm-templates) [https://github.com/DjebbZ/Drupal-PHPStorm-Live-Templates](https://github.com/DjebbZ/Drupal-PHPStorm-Live-Templates)

我希望这将对您在 PHPStorm 中有所帮助。

# iphone - 如何让 UIButton 的 UIControlTouchDragInside 和 UIControlTouchDragOutside 阈值成为框架？

> ID：13535169
> 
> 赞同：2
> 
> 时间：2012-11-23T20:08:12.797
> 
> 标签：iphone, ios, uibutton, uicontrol

似乎 UIButton 的[UIControlEventTouchDragInside](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIControlEventTouchDragInside)和[UIControlEventTouchDragOutside](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIControlEventTouchDragOutside)阈值超出了按钮框架的某个未知量。这个距离似乎大约是手指宽度的大小。有没有办法让这个阈值成为没有这个手指宽度缓冲区的实际帧/边界？

这在 iPad 上不是问题，但在 iPhone 和较小的空间上，它会导致我的自定义控件偶尔工作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:26:17.620

作为一种解决方法，我正在执行以下操作。

我已经更改了[UIControlEventTouchUpInside](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIControlEventTouchUpInside)和[UIControlEventTouchUpOutside](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIControlEventTouchUpOutside)的处理程序。

```
-(IBAction)myButtonsUpInside:(id)sender event:(UIEvent*)event 
```

和

```
-(IBAction)myButtonsUpOutside:(id)sender event:(UIEvent*)event 
```

to 首先检查是否应该将事件作为不同的按钮处理。像这样：

```
NSArray* theTouches = [[event allTouches] allObjects];
UITouch* touch = [theTouches objectAtIndex:0];
if([btnMyOtherButton pointInside:[touch locationInView:btnMyOtherButton] withEvent:event])
     //Call myOtherButton's action.
//Otherwise do this button's action. 
```

你也可以用[UIControlEventTouchDragInside](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIControlEventTouchDragInside)和[UIControlEventTouchDragOutside](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIControlEventTouchDragOutside)处理程序做同样的事情来做类似的事情。我只需要在修饰事件上采取行动。

仍然想知道是否有人有任何其他解决方案来摆脱这个奇怪的缓冲区。

# unicode - 所有 unicode 的开/关括号的列表？

> ID：13535172
> 
> 赞同：94
> 
> 时间：2012-11-23T20:08:30.677
> 
> 标签：unicode, square-bracket, braces, parentheses, curly-brackets

什么是每个 unicode 括号状字符的列表（包括，例如：）`{}[]()<>`？什么是搜索 unicode 字符的好方法？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-11-23T20:22:10.823

Unicode 联盟有一个关于每个 Unicode 字符信息的[纯文本数据库；](http://www.unicode.org/Public/UNIDATA/)该格式在[Unicode Annex #44](http://www.unicode.org/reports/tr44/)中进行了描述。主要信息包含在[UnicodeData.txt](http://www.unicode.org/Public/UNIDATA/UnicodeData.txt)中。在 General_Category 字段（第三个字段，由 分隔）中，开始和结束标点字符用`Ps`(punctuation start) 和(punctuation end) 表示。寻找那些角色，你会找到你要找的东西。`Pe``;`

请注意，并非所有您认为是括号的字符都可以列出；例如，引号（包括“«»”）。用`Pi`and `Pf`（初始和最终标点符号）表示，因此您可能也希望包括这些。并且某些字符，如`<`和`>`，在某些上下文（例如 HTML/XML）中用作括号，而`Sm`在 UnicodeData.txt 中它们被视为数学符号 ( )。那些你必须手动找到的；没有预先确定的清单。

这是获取此信息及其输出的快速 Bash 脚本。我已经包括了括号和引号。（注意：在某些 Bash 实现中，UTF-8 打印存在一个错误，导致它将 U+00AB "«" 和 U+00BB "»" 打印为 "?"，并且某些终端无法呈现所有字符正确。）

```
while IFS=';' read number name category rest
do 
    if [[ "$category" =~ Ps|Pe|Pi|Pf ]]
    then 
        printf "%s (U+%s, %s): \u"$number"\n" "$name" "$number" "$category"
    fi
done <UnicodeData.txt 
```

```
左括号 (U+0028, Ps): (
右括号 (U+0029, Pe):)
左方括号（U+005B，Ps）：[
右方括号 (U+005D, Pe): ]
左大括号（U+007B，Ps）：{
右花括号 (U+007D, Pe): }
左双角引号 (U+00AB, Pi): «
右指向双角引号 (U+00BB, Pf): »
TIBETAN MARK GUG RTAGS GYON (U+0F3A, Ps): ༺
TIBETAN MARK GUG RTAGS GYAS (U+0F3B, Pe): ༻
西藏马克 ANG KHANG GYON (U+0F3C, Ps): ༼
西藏 MARK ANG KHANG GYAS (U+0F3D, Pe): ༽
OGHAM FEATHER MARK (U+169B, Ps): ᚛
OGHAM REVERSED FEATHER MARK (U+169C, Pe): ᚜
左单引号 (U+2018, Pi): '
右单引号 (U+2019, Pf): '
单低 9 引号 (U+201A, Ps): ‚
单高反转 9 引号 (U+201B, Pi)：‛
左双引号（U+201C，Pi）：“
右双引号（U+201D, Pf）：”
双低 9 引号 (U+201E, Ps): „
双高反转 9 引号 (U+201F, Pi): '
单左点角引号 (U+2039, Pi): ‹
单指向右引号 (U+203A, Pf): ›
带羽毛笔的左方括号 (U+2045, Ps)：⁅
带套筒的右方括号 (U+2046, Pe): ⁆
上标左括号 (U+207D, Ps): ⁽
上标右括号 (U+207E, Pe): ⁾
左括号 (U+208D, Ps): ₍
右括号 (U+208E, Pe): ₎
左指向角括号 (U+2329, Ps): 〈
直角支架（U+232A，Pe）：〉
中左括号装饰 (U+2768, Ps): ❨
中号右括号装饰 (U+2769, Pe): ❩
中等扁平左括号装饰（U + 276A，Ps）：❪
中等扁平右括号装饰 (U+276B, Pe): ❫
中左指向角支架装饰 (U+276C, Ps): ❬
中号直角支架装饰 (U+276D, Pe): ❭
重左点角引号装饰 (U+276E, Ps): ❮
重度右指向角引号装饰 (U+276F, Pe): ❯
重型左指向角支架装饰 (U+2770, Ps): ❰
重型右指向角支架装饰 (U+2771, Pe): ❱
轻型左龟壳支架饰品 (U+2772, Ps): ❲
轻型右龟壳支架装饰 (U+2773, Pe): ❳
中号左花括号装饰（U+2774，Ps）：❴
中号右花括号装饰 (U+2775, Pe): ❵
左 S 形包分隔符 (U+27C5, Ps): ⟅
右 S 形袋分隔符 (U+27C6, Pe): ⟆
数学左白方括号 (U+27E6, Ps)：⟦
数学右白方括号 (U+27E7, Pe): ⟧
数学左角括号 (U+27E8, Ps): ⟨
数学直角括号 (U+27E9, Pe): ⟩
数学左双角括号 (U+27EA, Ps): ⟪
数学右双角括号（U+27EB，Pe）：⟫
数学左白龟甲支架（U+27EC，Ps）：⟬
数学右白龟甲支架 (U+27ED, Pe): ⟭
数学左平括号 (U+27EE, Ps): ⟮
数学右平括号 (U+27EF, Pe): ⟯
左白花括号 (U+2983, Ps): ⦃
右白花括号 (U+2984, Pe): ⦄
左白括号（U+2985，Ps）：⦅
右白括号 (U+2986, Pe): ⦆
Z 符号左图像括号 (U+2987, Ps): ⦇
Z 表示法右图像括号 (U+2988, Pe): ⦈
Z 符号左绑定括号 (U+2989, Ps): ⦉
Z 表示法右装订括号 (U+298A, Pe)：⦊
带下划线的左方括号 (U+298B, Ps)：⦋
带底条的右方括号 (U+298C, Pe): ⦌
左方括号，顶角有勾号（U+298D，Ps）：⦍
右方括号，底角有刻度（U+298E，Pe）：⦎
左方括号，底角有刻度（U+298F，Ps）：⦏
右上角带勾号的右方括号（U+2990，Pe）：⦐
带点的左角括号（U+2991，Ps）：⦑
带点直角括号 (U+2992, Pe): ⦒
左圆弧小于括号（U+2993，Ps）：⦓
右圆弧大于括号 (U+2994, Pe): ⦔
双左圆弧大于括号 (U+2995, Ps): ⦕
双右圆弧小于括号 (U+2996, Pe): ⦖
左黑龟甲支架 (U+2997, Ps): ⦗
右黑色龟甲支架 (U+2998, Pe): ⦘
左摆动栅栏 (U+29D8, Ps): ⧘
右摆动栅栏 (U+29D9, Pe): ⧙
左双摆动栅栏 (U+29DA, Ps): ⧚
右双摆动栅栏 (U+29DB, Pe): ⧛
左弯角支架 (U+29FC, Ps): ⧼
右弯角支架（U+29FD，Pe）：⧽
左替换括号 (U+2E02, Pi): ⸂
右替换括号 (U+2E03, Pf): ⸃
左虚线替换括号（U+2E04，Pi）：⸄
右虚线替换括号 (U+2E05, Pf)：⸅
左转置括号（U+2E09，Pi）：⸉
右转置括号 (U+2E0A, Pf): ⸊
左凸省略括号 (U+2E0C, Pi): ⸌
右凸起省略括号 (U+2E0D, Pf): ⸍
左小括号（U+2E1C，Pi）：⸜
右下解释括号（U+2E1D，Pf）：⸝
带羽毛笔的左垂直杆 (U+2E20, Pi): ⸠
带套筒的右垂直杆 (U+2E21, Pf): ⸡
左上半括号 (U+2E22, Ps): ⸢
右上半括号 (U+2E23, Pe): ⸣
左下半括号 (U+2E24, Ps): ⸤
右下半括号 (U+2E25, Pe): ⸥
左侧 U 型支架 (U+2E26, Ps): ⸦
右侧 U 型支架 (U+2E27, Pe): ⸧
左双括号 (U+2E28, Ps): ⸨
右双括号 (U+2E29, Pe): ⸩
左角括号 (U+3008, Ps): 〈
直角支架（U+3009，Pe）：〉
左双角括号（U+300A，Ps）：《
右双角括号（U+300B，Pe）：》
左角括号 (U+300C, Ps): 「
右角支架 (U+300D, Pe): ”
左白角括号 (U+300E, Ps): 『
右白角支架 (U+300F, Pe): 』
左黑色柱状括号（U+3010，Ps）：【
右黑色柱状支架（U+3011，Pe）：】
左玳瑁支架（U+3014，Ps）：〔
右玳瑁支架 (U+3015, Pe): 〕
左白色柱状括号 (U+3016, Ps): 〖
右白色柱状括号 (U+3017, Pe): 】
左白龟甲支架（U+3018，Ps）：〘
右白龟甲支架 (U+3019, Pe): 〙
左白方括号（U+301A，Ps）：〚
右白方括号 (U+301B, Pe): 〛
反双引号 (U+301D, Ps): 〝
双引号 (U+301E, Pe): 〞
低位双引号 (U+301F, Pe): 〟
华丽的左括号 (U+FD3E, Ps): ﴾
右括号（U+FD3F，Pe）：﴿
垂直左侧白色柱状支架（U+FE17，Ps）的演示文稿：︗
垂直右白色透镜支架 (U+FE18, Pe) 的演示文稿：︘
竖直左括号 (U+FE35, Ps) 的演示文稿：︵
垂直右括号 (U+FE36, Pe) 的演示文稿：︶
竖直左花括号 (U+FE37, Ps) 的演示文稿：︷
竖直右花括号 (U+FE38, Pe) 的演示文稿：︸
竖式左龟甲支架（U+FE39，Ps）演示表：︹
竖直右龟甲支架（U+FE3A，Pe）演示表：︺
垂直左黑色柱状支架（U+FE3B，Ps）的演示文稿：︻
垂直右黑色柱状支架（U+FE3C，Pe）的介绍表：︼
竖直左双角括号（U+FE3D，Ps）的表示形式：︽
垂直直角双角支架（U+FE3E，Pe）的介绍表：︾
垂直左角支架 (U+FE3F, Ps) 的演示文稿：︿
垂直直角支架（U+FE40，Pe）的介绍表：﹀
垂直左角支架（U+FE41，Ps）的演示文稿：﹁
垂直右角支架（U+FE42，Pe）的介绍表：﹂
垂直左白角支架（U+FE43，Ps）的演示文稿：﹃
垂直右白色角支架（U+FE44，Pe）的演示文稿：﹄
竖直左方括号（U+FE47，Ps）的演示文稿：﹇
竖直右方括号（U+FE48，Pe）的介绍表：﹈
左小括号 (U+FE59, Ps)：﹙
右小括号（U+FE5A，Pe）：﹚
小左花括号（U+FE5B，Ps）：﹛
小右花括号（U+FE5C，Pe）：﹜
小左龟壳支架（U+FE5D，Ps）：﹝
小右龟甲支架（U+FE5E，Pe）：﹞
左括号 (U+FF08, Ps): （
全角右括号 (U+FF09, Pe): ）
全宽左方括号（U+FF3B，Ps）：［
全宽右方括号 (U+FF3D, Pe): 】
全宽左花括号（U+FF5B，Ps）：｛
全宽右花括号（U+FF5D，Pe）：｝
左白括号（U+FF5F，Ps）：｟
全宽右白括号 (U+FF60, Pe): ｠
半角左角括号 (U+FF62, Ps): ｢
半角右角括号 (U+FF63, Pe): ｣

```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-23T20:28:09.400

Unicode 中没有这方面的规范列表——您必须定义自己的列表。您可以从使用 Python 的[`unicodedata`](http://docs.python.org/2/library/unicodedata.html)模块开始探索 Unicode 数据库。`<>`请注意，即使它们具有其他官方含义，即作为小于和大于符号，也不会发现类似的东西被用作大括号。

```
#!/usr/bin/env python2.7

import re
import unicodedata

for i in range(0x10000):
    char = unichr(i)
    category = unicodedata.category(char)
    name = unicodedata.name(char, '')
    if ('bracket' in name.lower() or 'paren' in name.lower()
            or category in ['Ps', 'Pe']):
        print 'U+%04x %s %s %c' % (i, category, name, char) 
```

输出：

```
U+0028 Ps LEFT PARENTHESIS (
U+0029 Pe RIGHT PARENTHESIS )
U+005b Ps LEFT SQUARE BRACKET [
U+005d Pe RIGHT SQUARE BRACKET ]
U+007b Ps LEFT CURLY BRACKET {
U+007d Pe RIGHT CURLY BRACKET }
U+0f3a Ps TIBETAN MARK GUG RTAGS GYON ༺
U+0f3b Pe TIBETAN MARK GUG RTAGS GYAS ༻
U+0f3c Ps TIBETAN MARK ANG KHANG GYON ༼
U+0f3d Pe TIBETAN MARK ANG KHANG GYAS ༽
U+169b Ps OGHAM FEATHER MARK ᚛
U+169c Pe OGHAM REVERSED FEATHER MARK ᚜
U+201a Ps SINGLE LOW-9 QUOTATION MARK ‚
U+201e Ps DOUBLE LOW-9 QUOTATION MARK „
U+2045 Ps LEFT SQUARE BRACKET WITH QUILL ⁅
U+2046 Pe RIGHT SQUARE BRACKET WITH QUILL ⁆
U+207d Ps SUPERSCRIPT LEFT PARENTHESIS ⁽
U+207e Pe SUPERSCRIPT RIGHT PARENTHESIS ⁾
U+208d Ps SUBSCRIPT LEFT PARENTHESIS ₍
U+208e Pe SUBSCRIPT RIGHT PARENTHESIS ₎
U+2329 Ps LEFT-POINTING ANGLE BRACKET 〈
U+232a Pe RIGHT-POINTING ANGLE BRACKET 〉
U+239b Sm LEFT PARENTHESIS UPPER HOOK ⎛
U+239c Sm LEFT PARENTHESIS EXTENSION ⎜
U+239d Sm LEFT PARENTHESIS LOWER HOOK ⎝
U+239e Sm RIGHT PARENTHESIS UPPER HOOK ⎞
U+239f Sm RIGHT PARENTHESIS EXTENSION ⎟
U+23a0 Sm RIGHT PARENTHESIS LOWER HOOK ⎠
U+23a1 Sm LEFT SQUARE BRACKET UPPER CORNER ⎡
U+23a2 Sm LEFT SQUARE BRACKET EXTENSION ⎢
U+23a3 Sm LEFT SQUARE BRACKET LOWER CORNER ⎣
U+23a4 Sm RIGHT SQUARE BRACKET UPPER CORNER ⎤
U+23a5 Sm RIGHT SQUARE BRACKET EXTENSION ⎥
U+23a6 Sm RIGHT SQUARE BRACKET LOWER CORNER ⎦
U+23a7 Sm LEFT CURLY BRACKET UPPER HOOK ⎧
U+23a8 Sm LEFT CURLY BRACKET MIDDLE PIECE ⎨
U+23a9 Sm LEFT CURLY BRACKET LOWER HOOK ⎩
U+23aa Sm CURLY BRACKET EXTENSION ⎪
U+23ab Sm RIGHT CURLY BRACKET UPPER HOOK ⎫
U+23ac Sm RIGHT CURLY BRACKET MIDDLE PIECE ⎬
U+23ad Sm RIGHT CURLY BRACKET LOWER HOOK ⎭
U+23b0 Sm UPPER LEFT OR LOWER RIGHT CURLY BRACKET SECTION ⎰
U+23b1 Sm UPPER RIGHT OR LOWER LEFT CURLY BRACKET SECTION ⎱
U+23b4 So TOP SQUARE BRACKET ⎴
U+23b5 So BOTTOM SQUARE BRACKET ⎵
U+23b6 So BOTTOM SQUARE BRACKET OVER TOP SQUARE BRACKET ⎶
U+23dc Sm TOP PARENTHESIS ⏜
U+23dd Sm BOTTOM PARENTHESIS ⏝
U+23de Sm TOP CURLY BRACKET ⏞
U+23df Sm BOTTOM CURLY BRACKET ⏟
U+23e0 Sm TOP TORTOISE SHELL BRACKET ⏠
U+23e1 Sm BOTTOM TORTOISE SHELL BRACKET ⏡
U+2474 No PARENTHESIZED DIGIT ONE ⑴
U+2475 No PARENTHESIZED DIGIT TWO ⑵
U+2476 No PARENTHESIZED DIGIT THREE ⑶
U+2477 No PARENTHESIZED DIGIT FOUR ⑷
U+2478 No PARENTHESIZED DIGIT FIVE ⑸
U+2479 No PARENTHESIZED DIGIT SIX ⑹
U+247a No PARENTHESIZED DIGIT SEVEN ⑺
U+247b No PARENTHESIZED DIGIT EIGHT ⑻
U+247c No PARENTHESIZED DIGIT NINE ⑼
U+247d No PARENTHESIZED NUMBER TEN ⑽
U+247e No PARENTHESIZED NUMBER ELEVEN ⑾
U+247f No PARENTHESIZED NUMBER TWELVE ⑿
U+2480 No PARENTHESIZED NUMBER THIRTEEN ⒀
U+2481 No PARENTHESIZED NUMBER FOURTEEN ⒁
U+2482 No PARENTHESIZED NUMBER FIFTEEN ⒂
U+2483 No PARENTHESIZED NUMBER SIXTEEN ⒃
U+2484 No PARENTHESIZED NUMBER SEVENTEEN ⒄
U+2485 No PARENTHESIZED NUMBER EIGHTEEN ⒅
U+2486 No PARENTHESIZED NUMBER NINETEEN ⒆
U+2487 No PARENTHESIZED NUMBER TWENTY ⒇
U+249c So PARENTHESIZED LATIN SMALL LETTER A ⒜
U+249d So PARENTHESIZED LATIN SMALL LETTER B ⒝
U+249e So PARENTHESIZED LATIN SMALL LETTER C ⒞
U+249f So PARENTHESIZED LATIN SMALL LETTER D ⒟
U+24a0 So PARENTHESIZED LATIN SMALL LETTER E ⒠
U+24a1 So PARENTHESIZED LATIN SMALL LETTER F ⒡
U+24a2 So PARENTHESIZED LATIN SMALL LETTER G ⒢
U+24a3 So PARENTHESIZED LATIN SMALL LETTER H ⒣
U+24a4 So PARENTHESIZED LATIN SMALL LETTER I ⒤
U+24a5 So PARENTHESIZED LATIN SMALL LETTER J ⒥
U+24a6 So PARENTHESIZED LATIN SMALL LETTER K ⒦
U+24a7 So PARENTHESIZED LATIN SMALL LETTER L ⒧
U+24a8 So PARENTHESIZED LATIN SMALL LETTER M ⒨
U+24a9 So PARENTHESIZED LATIN SMALL LETTER N ⒩
U+24aa So PARENTHESIZED LATIN SMALL LETTER O ⒪
U+24ab So PARENTHESIZED LATIN SMALL LETTER P ⒫
U+24ac So PARENTHESIZED LATIN SMALL LETTER Q ⒬
U+24ad So PARENTHESIZED LATIN SMALL LETTER R ⒭
U+24ae So PARENTHESIZED LATIN SMALL LETTER S ⒮
U+24af So PARENTHESIZED LATIN SMALL LETTER T ⒯
U+24b0 So PARENTHESIZED LATIN SMALL LETTER U ⒰
U+24b1 So PARENTHESIZED LATIN SMALL LETTER V ⒱
U+24b2 So PARENTHESIZED LATIN SMALL LETTER W ⒲
U+24b3 So PARENTHESIZED LATIN SMALL LETTER X ⒳
U+24b4 So PARENTHESIZED LATIN SMALL LETTER Y ⒴
U+24b5 So PARENTHESIZED LATIN SMALL LETTER Z ⒵
U+2768 Ps MEDIUM LEFT PARENTHESIS ORNAMENT ❨
U+2769 Pe MEDIUM RIGHT PARENTHESIS ORNAMENT ❩
U+276a Ps MEDIUM FLATTENED LEFT PARENTHESIS ORNAMENT ❪
U+276b Pe MEDIUM FLATTENED RIGHT PARENTHESIS ORNAMENT ❫
U+276c Ps MEDIUM LEFT-POINTING ANGLE BRACKET ORNAMENT ❬
U+276d Pe MEDIUM RIGHT-POINTING ANGLE BRACKET ORNAMENT ❭
U+276e Ps HEAVY LEFT-POINTING ANGLE QUOTATION MARK ORNAMENT ❮
U+276f Pe HEAVY RIGHT-POINTING ANGLE QUOTATION MARK ORNAMENT ❯
U+2770 Ps HEAVY LEFT-POINTING ANGLE BRACKET ORNAMENT ❰
U+2771 Pe HEAVY RIGHT-POINTING ANGLE BRACKET ORNAMENT ❱
U+2772 Ps LIGHT LEFT TORTOISE SHELL BRACKET ORNAMENT ❲
U+2773 Pe LIGHT RIGHT TORTOISE SHELL BRACKET ORNAMENT ❳
U+2774 Ps MEDIUM LEFT CURLY BRACKET ORNAMENT ❴
U+2775 Pe MEDIUM RIGHT CURLY BRACKET ORNAMENT ❵
U+27c5 Ps LEFT S-SHAPED BAG DELIMITER ⟅
U+27c6 Pe RIGHT S-SHAPED BAG DELIMITER ⟆
U+27e6 Ps MATHEMATICAL LEFT WHITE SQUARE BRACKET ⟦
U+27e7 Pe MATHEMATICAL RIGHT WHITE SQUARE BRACKET ⟧
U+27e8 Ps MATHEMATICAL LEFT ANGLE BRACKET ⟨
U+27e9 Pe MATHEMATICAL RIGHT ANGLE BRACKET ⟩
U+27ea Ps MATHEMATICAL LEFT DOUBLE ANGLE BRACKET ⟪
U+27eb Pe MATHEMATICAL RIGHT DOUBLE ANGLE BRACKET ⟫
U+27ec Ps MATHEMATICAL LEFT WHITE TORTOISE SHELL BRACKET ⟬
U+27ed Pe MATHEMATICAL RIGHT WHITE TORTOISE SHELL BRACKET ⟭
U+27ee Ps MATHEMATICAL LEFT FLATTENED PARENTHESIS ⟮
U+27ef Pe MATHEMATICAL RIGHT FLATTENED PARENTHESIS ⟯
U+2983 Ps LEFT WHITE CURLY BRACKET ⦃
U+2984 Pe RIGHT WHITE CURLY BRACKET ⦄
U+2985 Ps LEFT WHITE PARENTHESIS ⦅
U+2986 Pe RIGHT WHITE PARENTHESIS ⦆
U+2987 Ps Z NOTATION LEFT IMAGE BRACKET ⦇
U+2988 Pe Z NOTATION RIGHT IMAGE BRACKET ⦈
U+2989 Ps Z NOTATION LEFT BINDING BRACKET ⦉
U+298a Pe Z NOTATION RIGHT BINDING BRACKET ⦊
U+298b Ps LEFT SQUARE BRACKET WITH UNDERBAR ⦋
U+298c Pe RIGHT SQUARE BRACKET WITH UNDERBAR ⦌
U+298d Ps LEFT SQUARE BRACKET WITH TICK IN TOP CORNER ⦍
U+298e Pe RIGHT SQUARE BRACKET WITH TICK IN BOTTOM CORNER ⦎
U+298f Ps LEFT SQUARE BRACKET WITH TICK IN BOTTOM CORNER ⦏
U+2990 Pe RIGHT SQUARE BRACKET WITH TICK IN TOP CORNER ⦐
U+2991 Ps LEFT ANGLE BRACKET WITH DOT ⦑
U+2992 Pe RIGHT ANGLE BRACKET WITH DOT ⦒
U+2993 Ps LEFT ARC LESS-THAN BRACKET ⦓
U+2994 Pe RIGHT ARC GREATER-THAN BRACKET ⦔
U+2995 Ps DOUBLE LEFT ARC GREATER-THAN BRACKET ⦕
U+2996 Pe DOUBLE RIGHT ARC LESS-THAN BRACKET ⦖
U+2997 Ps LEFT BLACK TORTOISE SHELL BRACKET ⦗
U+2998 Pe RIGHT BLACK TORTOISE SHELL BRACKET ⦘
U+29d8 Ps LEFT WIGGLY FENCE ⧘
U+29d9 Pe RIGHT WIGGLY FENCE ⧙
U+29da Ps LEFT DOUBLE WIGGLY FENCE ⧚
U+29db Pe RIGHT DOUBLE WIGGLY FENCE ⧛
U+29fc Ps LEFT-POINTING CURVED ANGLE BRACKET ⧼
U+29fd Pe RIGHT-POINTING CURVED ANGLE BRACKET ⧽
U+2e02 Pi LEFT SUBSTITUTION BRACKET ⸂
U+2e03 Pf RIGHT SUBSTITUTION BRACKET ⸃
U+2e04 Pi LEFT DOTTED SUBSTITUTION BRACKET ⸄
U+2e05 Pf RIGHT DOTTED SUBSTITUTION BRACKET ⸅
U+2e09 Pi LEFT TRANSPOSITION BRACKET ⸉
U+2e0a Pf RIGHT TRANSPOSITION BRACKET ⸊
U+2e0c Pi LEFT RAISED OMISSION BRACKET ⸌
U+2e0d Pf RIGHT RAISED OMISSION BRACKET ⸍
U+2e1c Pi LEFT LOW PARAPHRASE BRACKET ⸜
U+2e1d Pf RIGHT LOW PARAPHRASE BRACKET ⸝
U+2e22 Ps TOP LEFT HALF BRACKET ⸢
U+2e23 Pe TOP RIGHT HALF BRACKET ⸣
U+2e24 Ps BOTTOM LEFT HALF BRACKET ⸤
U+2e25 Pe BOTTOM RIGHT HALF BRACKET ⸥
U+2e26 Ps LEFT SIDEWAYS U BRACKET ⸦
U+2e27 Pe RIGHT SIDEWAYS U BRACKET ⸧
U+2e28 Ps LEFT DOUBLE PARENTHESIS ⸨
U+2e29 Pe RIGHT DOUBLE PARENTHESIS ⸩
U+3008 Ps LEFT ANGLE BRACKET 〈
U+3009 Pe RIGHT ANGLE BRACKET 〉
U+300a Ps LEFT DOUBLE ANGLE BRACKET 《
U+300b Pe RIGHT DOUBLE ANGLE BRACKET 》
U+300c Ps LEFT CORNER BRACKET 「
U+300d Pe RIGHT CORNER BRACKET 」
U+300e Ps LEFT WHITE CORNER BRACKET 『
U+300f Pe RIGHT WHITE CORNER BRACKET 』
U+3010 Ps LEFT BLACK LENTICULAR BRACKET 【
U+3011 Pe RIGHT BLACK LENTICULAR BRACKET 】
U+3014 Ps LEFT TORTOISE SHELL BRACKET 〔
U+3015 Pe RIGHT TORTOISE SHELL BRACKET 〕
U+3016 Ps LEFT WHITE LENTICULAR BRACKET 〖
U+3017 Pe RIGHT WHITE LENTICULAR BRACKET 〗
U+3018 Ps LEFT WHITE TORTOISE SHELL BRACKET 〘
U+3019 Pe RIGHT WHITE TORTOISE SHELL BRACKET 〙
U+301a Ps LEFT WHITE SQUARE BRACKET 〚
U+301b Pe RIGHT WHITE SQUARE BRACKET 〛
U+301d Ps REVERSED DOUBLE PRIME QUOTATION MARK 〝
U+301e Pe DOUBLE PRIME QUOTATION MARK 〞
U+301f Pe LOW DOUBLE PRIME QUOTATION MARK 〟
U+3200 So PARENTHESIZED HANGUL KIYEOK ㈀
U+3201 So PARENTHESIZED HANGUL NIEUN ㈁
U+3202 So PARENTHESIZED HANGUL TIKEUT ㈂
U+3203 So PARENTHESIZED HANGUL RIEUL ㈃
U+3204 So PARENTHESIZED HANGUL MIEUM ㈄
U+3205 So PARENTHESIZED HANGUL PIEUP ㈅
U+3206 So PARENTHESIZED HANGUL SIOS ㈆
U+3207 So PARENTHESIZED HANGUL IEUNG ㈇
U+3208 So PARENTHESIZED HANGUL CIEUC ㈈
U+3209 So PARENTHESIZED HANGUL CHIEUCH ㈉
U+320a So PARENTHESIZED HANGUL KHIEUKH ㈊
U+320b So PARENTHESIZED HANGUL THIEUTH ㈋
U+320c So PARENTHESIZED HANGUL PHIEUPH ㈌
U+320d So PARENTHESIZED HANGUL HIEUH ㈍
U+320e So PARENTHESIZED HANGUL KIYEOK A ㈎
U+320f So PARENTHESIZED HANGUL NIEUN A ㈏
U+3210 So PARENTHESIZED HANGUL TIKEUT A ㈐
U+3211 So PARENTHESIZED HANGUL RIEUL A ㈑
U+3212 So PARENTHESIZED HANGUL MIEUM A ㈒
U+3213 So PARENTHESIZED HANGUL PIEUP A ㈓
U+3214 So PARENTHESIZED HANGUL SIOS A ㈔
U+3215 So PARENTHESIZED HANGUL IEUNG A ㈕
U+3216 So PARENTHESIZED HANGUL CIEUC A ㈖
U+3217 So PARENTHESIZED HANGUL CHIEUCH A ㈗
U+3218 So PARENTHESIZED HANGUL KHIEUKH A ㈘
U+3219 So PARENTHESIZED HANGUL THIEUTH A ㈙
U+321a So PARENTHESIZED HANGUL PHIEUPH A ㈚
U+321b So PARENTHESIZED HANGUL HIEUH A ㈛
U+321c So PARENTHESIZED HANGUL CIEUC U ㈜
U+321d So PARENTHESIZED KOREAN CHARACTER OJEON ㈝
U+321e So PARENTHESIZED KOREAN CHARACTER O HU ㈞
U+3220 No PARENTHESIZED IDEOGRAPH ONE ㈠
U+3221 No PARENTHESIZED IDEOGRAPH TWO ㈡
U+3222 No PARENTHESIZED IDEOGRAPH THREE ㈢
U+3223 No PARENTHESIZED IDEOGRAPH FOUR ㈣
U+3224 No PARENTHESIZED IDEOGRAPH FIVE ㈤
U+3225 No PARENTHESIZED IDEOGRAPH SIX ㈥
U+3226 No PARENTHESIZED IDEOGRAPH SEVEN ㈦
U+3227 No PARENTHESIZED IDEOGRAPH EIGHT ㈧
U+3228 No PARENTHESIZED IDEOGRAPH NINE ㈨
U+3229 No PARENTHESIZED IDEOGRAPH TEN ㈩
U+322a So PARENTHESIZED IDEOGRAPH MOON ㈪
U+322b So PARENTHESIZED IDEOGRAPH FIRE ㈫
U+322c So PARENTHESIZED IDEOGRAPH WATER ㈬
U+322d So PARENTHESIZED IDEOGRAPH WOOD ㈭
U+322e So PARENTHESIZED IDEOGRAPH METAL ㈮
U+322f So PARENTHESIZED IDEOGRAPH EARTH ㈯
U+3230 So PARENTHESIZED IDEOGRAPH SUN ㈰
U+3231 So PARENTHESIZED IDEOGRAPH STOCK ㈱
U+3232 So PARENTHESIZED IDEOGRAPH HAVE ㈲
U+3233 So PARENTHESIZED IDEOGRAPH SOCIETY ㈳
U+3234 So PARENTHESIZED IDEOGRAPH NAME ㈴
U+3235 So PARENTHESIZED IDEOGRAPH SPECIAL ㈵
U+3236 So PARENTHESIZED IDEOGRAPH FINANCIAL ㈶
U+3237 So PARENTHESIZED IDEOGRAPH CONGRATULATION ㈷
U+3238 So PARENTHESIZED IDEOGRAPH LABOR ㈸
U+3239 So PARENTHESIZED IDEOGRAPH REPRESENT ㈹
U+323a So PARENTHESIZED IDEOGRAPH CALL ㈺
U+323b So PARENTHESIZED IDEOGRAPH STUDY ㈻
U+323c So PARENTHESIZED IDEOGRAPH SUPERVISE ㈼
U+323d So PARENTHESIZED IDEOGRAPH ENTERPRISE ㈽
U+323e So PARENTHESIZED IDEOGRAPH RESOURCE ㈾
U+323f So PARENTHESIZED IDEOGRAPH ALLIANCE ㈿
U+3240 So PARENTHESIZED IDEOGRAPH FESTIVAL ㉀
U+3241 So PARENTHESIZED IDEOGRAPH REST ㉁
U+3242 So PARENTHESIZED IDEOGRAPH SELF ㉂
U+3243 So PARENTHESIZED IDEOGRAPH REACH ㉃
U+fd3e Ps ORNATE LEFT PARENTHESIS ﴾
U+fd3f Pe ORNATE RIGHT PARENTHESIS ﴿
U+fe17 Ps PRESENTATION FORM FOR VERTICAL LEFT WHITE LENTICULAR BRACKET ︗
U+fe18 Pe PRESENTATION FORM FOR VERTICAL RIGHT WHITE LENTICULAR BRAKCET ︘
U+fe35 Ps PRESENTATION FORM FOR VERTICAL LEFT PARENTHESIS ︵
U+fe36 Pe PRESENTATION FORM FOR VERTICAL RIGHT PARENTHESIS ︶
U+fe37 Ps PRESENTATION FORM FOR VERTICAL LEFT CURLY BRACKET ︷
U+fe38 Pe PRESENTATION FORM FOR VERTICAL RIGHT CURLY BRACKET ︸
U+fe39 Ps PRESENTATION FORM FOR VERTICAL LEFT TORTOISE SHELL BRACKET ︹
U+fe3a Pe PRESENTATION FORM FOR VERTICAL RIGHT TORTOISE SHELL BRACKET ︺
U+fe3b Ps PRESENTATION FORM FOR VERTICAL LEFT BLACK LENTICULAR BRACKET ︻
U+fe3c Pe PRESENTATION FORM FOR VERTICAL RIGHT BLACK LENTICULAR BRACKET ︼
U+fe3d Ps PRESENTATION FORM FOR VERTICAL LEFT DOUBLE ANGLE BRACKET ︽
U+fe3e Pe PRESENTATION FORM FOR VERTICAL RIGHT DOUBLE ANGLE BRACKET ︾
U+fe3f Ps PRESENTATION FORM FOR VERTICAL LEFT ANGLE BRACKET ︿
U+fe40 Pe PRESENTATION FORM FOR VERTICAL RIGHT ANGLE BRACKET ﹀
U+fe41 Ps PRESENTATION FORM FOR VERTICAL LEFT CORNER BRACKET ﹁
U+fe42 Pe PRESENTATION FORM FOR VERTICAL RIGHT CORNER BRACKET ﹂
U+fe43 Ps PRESENTATION FORM FOR VERTICAL LEFT WHITE CORNER BRACKET ﹃
U+fe44 Pe PRESENTATION FORM FOR VERTICAL RIGHT WHITE CORNER BRACKET ﹄
U+fe47 Ps PRESENTATION FORM FOR VERTICAL LEFT SQUARE BRACKET ﹇
U+fe48 Pe PRESENTATION FORM FOR VERTICAL RIGHT SQUARE BRACKET ﹈
U+fe59 Ps SMALL LEFT PARENTHESIS ﹙
U+fe5a Pe SMALL RIGHT PARENTHESIS ﹚
U+fe5b Ps SMALL LEFT CURLY BRACKET ﹛
U+fe5c Pe SMALL RIGHT CURLY BRACKET ﹜
U+fe5d Ps SMALL LEFT TORTOISE SHELL BRACKET ﹝
U+fe5e Pe SMALL RIGHT TORTOISE SHELL BRACKET ﹞
U+ff08 Ps FULLWIDTH LEFT PARENTHESIS （
U+ff09 Pe FULLWIDTH RIGHT PARENTHESIS ）
U+ff3b Ps FULLWIDTH LEFT SQUARE BRACKET ［
U+ff3d Pe FULLWIDTH RIGHT SQUARE BRACKET ］
U+ff5b Ps FULLWIDTH LEFT CURLY BRACKET ｛
U+ff5d Pe FULLWIDTH RIGHT CURLY BRACKET ｝
U+ff5f Ps FULLWIDTH LEFT WHITE PARENTHESIS ｟
U+ff60 Pe FULLWIDTH RIGHT WHITE PARENTHESIS ｠
U+ff62 Ps HALFWIDTH LEFT CORNER BRACKET ｢
U+ff63 Pe HALFWIDTH RIGHT CORNER BRACKET ｣ 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-10-26T23:22:45.893

最近的 Unicode 版本添加了一个属性 Bidi_Paired_Bracket，它给出了 Unicode 认为是这个问题的答案。这与镜像的不同。从 Unicode 8.0 开始有 60 个括号对。下表将每个映射到其配对。第一列给出一个代码点；第二个给出了它被引入的 Unicode 版本；第三个显示映射，最后一列按字符名称给出映射。此外，为了查看 Unicode 字符数据库，Perl5 与模块 Unicode::UCD 打包在一起，具有许多用于检查事物的功能，包括 Perl v5.22 中的新功能，它将输出给定代码点的所有属性的值。CPAN 上的 Unicode::Tussle 提供了类似的功能和其他功能

```
0028 1.1 '(' => ')';  LEFT PARENTHESIS => RIGHT PARENTHESIS
0029 1.1 ')' => '(';  RIGHT PARENTHESIS => LEFT PARENTHESIS
005B 1.1 '[' => ']';  LEFT SQUARE BRACKET => RIGHT SQUARE BRACKET
005D 1.1 ']' => '[';  RIGHT SQUARE BRACKET => LEFT SQUARE BRACKET
007B 1.1 '{' => '}';  LEFT CURLY BRACKET => RIGHT CURLY BRACKET
007D 1.1 '}' => '{';  RIGHT CURLY BRACKET => LEFT CURLY BRACKET
0F3A 2.0 '༺' => '༻';  TIBETAN MARK GUG RTAGS GYON => TIBETAN MARK GUG RTAGS GYAS
0F3B 2.0 '༻' => '༺';  TIBETAN MARK GUG RTAGS GYAS => TIBETAN MARK GUG RTAGS GYON
0F3C 2.0 '༼' => '༽';  TIBETAN MARK ANG KHANG GYON => TIBETAN MARK ANG KHANG GYAS
0F3D 2.0 '༽' => '༼';  TIBETAN MARK ANG KHANG GYAS => TIBETAN MARK ANG KHANG GYON
169B 3.0 '᚛' => '᚜';  OGHAM FEATHER MARK => OGHAM REVERSED FEATHER MARK
169C 3.0 '᚜' => '᚛';  OGHAM REVERSED FEATHER MARK => OGHAM FEATHER MARK
2045 1.1 '⁅' => '⁆';  LEFT SQUARE BRACKET WITH QUILL => RIGHT SQUARE BRACKET WITH QUILL
2046 1.1 '⁆' => '⁅';  RIGHT SQUARE BRACKET WITH QUILL => LEFT SQUARE BRACKET WITH QUILL
207D 1.1 '⁽' => '⁾';  SUPERSCRIPT LEFT PARENTHESIS => SUPERSCRIPT RIGHT PARENTHESIS
207E 1.1 '⁾' => '⁽';  SUPERSCRIPT RIGHT PARENTHESIS => SUPERSCRIPT LEFT PARENTHESIS
208D 1.1 '₍' => '₎';  SUBSCRIPT LEFT PARENTHESIS => SUBSCRIPT RIGHT PARENTHESIS
208E 1.1 '₎' => '₍';  SUBSCRIPT RIGHT PARENTHESIS => SUBSCRIPT LEFT PARENTHESIS
2308 1.1 '⌈' => '⌉';  LEFT CEILING => RIGHT CEILING
2309 1.1 '⌉' => '⌈';  RIGHT CEILING => LEFT CEILING
230A 1.1 '⌊' => '⌋';  LEFT FLOOR => RIGHT FLOOR
230B 1.1 '⌋' => '⌊';  RIGHT FLOOR => LEFT FLOOR
2329 1.1 '〈' => '〉';  LEFT-POINTING ANGLE BRACKET => RIGHT-POINTING ANGLE BRACKET
232A 1.1 '〉' => '〈';  RIGHT-POINTING ANGLE BRACKET => LEFT-POINTING ANGLE BRACKET
2768 3.2 '❨' => '❩';  MEDIUM LEFT PARENTHESIS ORNAMENT => MEDIUM RIGHT PARENTHESIS ORNAMENT
2769 3.2 '❩' => '❨';  MEDIUM RIGHT PARENTHESIS ORNAMENT => MEDIUM LEFT PARENTHESIS ORNAMENT
276A 3.2 '❪' => '❫';  MEDIUM FLATTENED LEFT PARENTHESIS ORNAMENT => MEDIUM FLATTENED RIGHT PARENTHESIS ORNAMENT
276B 3.2 '❫' => '❪';  MEDIUM FLATTENED RIGHT PARENTHESIS ORNAMENT => MEDIUM FLATTENED LEFT PARENTHESIS ORNAMENT
276C 3.2 '❬' => '❭';  MEDIUM LEFT-POINTING ANGLE BRACKET ORNAMENT => MEDIUM RIGHT-POINTING ANGLE BRACKET ORNAMENT
276D 3.2 '❭' => '❬';  MEDIUM RIGHT-POINTING ANGLE BRACKET ORNAMENT => MEDIUM LEFT-POINTING ANGLE BRACKET ORNAMENT
276E 3.2 '❮' => '❯';  HEAVY LEFT-POINTING ANGLE QUOTATION MARK ORNAMENT => HEAVY RIGHT-POINTING ANGLE QUOTATION MARK ORNAMENT
276F 3.2 '❯' => '❮';  HEAVY RIGHT-POINTING ANGLE QUOTATION MARK ORNAMENT => HEAVY LEFT-POINTING ANGLE QUOTATION MARK ORNAMENT
2770 3.2 '❰' => '❱';  HEAVY LEFT-POINTING ANGLE BRACKET ORNAMENT => HEAVY RIGHT-POINTING ANGLE BRACKET ORNAMENT
2771 3.2 '❱' => '❰';  HEAVY RIGHT-POINTING ANGLE BRACKET ORNAMENT => HEAVY LEFT-POINTING ANGLE BRACKET ORNAMENT
2772 3.2 '❲' => '❳';  LIGHT LEFT TORTOISE SHELL BRACKET ORNAMENT => LIGHT RIGHT TORTOISE SHELL BRACKET ORNAMENT
2773 3.2 '❳' => '❲';  LIGHT RIGHT TORTOISE SHELL BRACKET ORNAMENT => LIGHT LEFT TORTOISE SHELL BRACKET ORNAMENT
2774 3.2 '❴' => '❵';  MEDIUM LEFT CURLY BRACKET ORNAMENT => MEDIUM RIGHT CURLY BRACKET ORNAMENT
2775 3.2 '❵' => '❴';  MEDIUM RIGHT CURLY BRACKET ORNAMENT => MEDIUM LEFT CURLY BRACKET ORNAMENT
27C5 4.1 '⟅' => '⟆';  LEFT S-SHAPED BAG DELIMITER => RIGHT S-SHAPED BAG DELIMITER
27C6 4.1 '⟆' => '⟅';  RIGHT S-SHAPED BAG DELIMITER => LEFT S-SHAPED BAG DELIMITER
27E6 3.2 '⟦' => '⟧';  MATHEMATICAL LEFT WHITE SQUARE BRACKET => MATHEMATICAL RIGHT WHITE SQUARE BRACKET
27E7 3.2 '⟧' => '⟦';  MATHEMATICAL RIGHT WHITE SQUARE BRACKET => MATHEMATICAL LEFT WHITE SQUARE BRACKET
27E8 3.2 '⟨' => '⟩';  MATHEMATICAL LEFT ANGLE BRACKET => MATHEMATICAL RIGHT ANGLE BRACKET
27E9 3.2 '⟩' => '⟨';  MATHEMATICAL RIGHT ANGLE BRACKET => MATHEMATICAL LEFT ANGLE BRACKET
27EA 3.2 '⟪' => '⟫';  MATHEMATICAL LEFT DOUBLE ANGLE BRACKET => MATHEMATICAL RIGHT DOUBLE ANGLE BRACKET
27EB 3.2 '⟫' => '⟪';  MATHEMATICAL RIGHT DOUBLE ANGLE BRACKET => MATHEMATICAL LEFT DOUBLE ANGLE BRACKET
27EC 5.1 '⟬' => '⟭';  MATHEMATICAL LEFT WHITE TORTOISE SHELL BRACKET => MATHEMATICAL RIGHT WHITE TORTOISE SHELL BRACKET
27ED 5.1 '⟭' => '⟬';  MATHEMATICAL RIGHT WHITE TORTOISE SHELL BRACKET => MATHEMATICAL LEFT WHITE TORTOISE SHELL BRACKET
27EE 5.1 '⟮' => '⟯';  MATHEMATICAL LEFT FLATTENED PARENTHESIS => MATHEMATICAL RIGHT FLATTENED PARENTHESIS
27EF 5.1 '⟯' => '⟮';  MATHEMATICAL RIGHT FLATTENED PARENTHESIS => MATHEMATICAL LEFT FLATTENED PARENTHESIS
2983 3.2 '⦃' => '⦄';  LEFT WHITE CURLY BRACKET => RIGHT WHITE CURLY BRACKET
2984 3.2 '⦄' => '⦃';  RIGHT WHITE CURLY BRACKET => LEFT WHITE CURLY BRACKET
2985 3.2 '⦅' => '⦆';  LEFT WHITE PARENTHESIS => RIGHT WHITE PARENTHESIS
2986 3.2 '⦆' => '⦅';  RIGHT WHITE PARENTHESIS => LEFT WHITE PARENTHESIS
2987 3.2 '⦇' => '⦈';  Z NOTATION LEFT IMAGE BRACKET => Z NOTATION RIGHT IMAGE BRACKET
2988 3.2 '⦈' => '⦇';  Z NOTATION RIGHT IMAGE BRACKET => Z NOTATION LEFT IMAGE BRACKET
2989 3.2 '⦉' => '⦊';  Z NOTATION LEFT BINDING BRACKET => Z NOTATION RIGHT BINDING BRACKET
298A 3.2 '⦊' => '⦉';  Z NOTATION RIGHT BINDING BRACKET => Z NOTATION LEFT BINDING BRACKET
298B 3.2 '⦋' => '⦌';  LEFT SQUARE BRACKET WITH UNDERBAR => RIGHT SQUARE BRACKET WITH UNDERBAR
298C 3.2 '⦌' => '⦋';  RIGHT SQUARE BRACKET WITH UNDERBAR => LEFT SQUARE BRACKET WITH UNDERBAR
298D 3.2 '⦍' => '⦐';  LEFT SQUARE BRACKET WITH TICK IN TOP CORNER => RIGHT SQUARE BRACKET WITH TICK IN TOP CORNER
298E 3.2 '⦎' => '⦏';  RIGHT SQUARE BRACKET WITH TICK IN BOTTOM CORNER => LEFT SQUARE BRACKET WITH TICK IN BOTTOM CORNER
298F 3.2 '⦏' => '⦎';  LEFT SQUARE BRACKET WITH TICK IN BOTTOM CORNER => RIGHT SQUARE BRACKET WITH TICK IN BOTTOM CORNER
2990 3.2 '⦐' => '⦍';  RIGHT SQUARE BRACKET WITH TICK IN TOP CORNER => LEFT SQUARE BRACKET WITH TICK IN TOP CORNER
2991 3.2 '⦑' => '⦒';  LEFT ANGLE BRACKET WITH DOT => RIGHT ANGLE BRACKET WITH DOT
2992 3.2 '⦒' => '⦑';  RIGHT ANGLE BRACKET WITH DOT => LEFT ANGLE BRACKET WITH DOT
2993 3.2 '⦓' => '⦔';  LEFT ARC LESS-THAN BRACKET => RIGHT ARC GREATER-THAN BRACKET
2994 3.2 '⦔' => '⦓';  RIGHT ARC GREATER-THAN BRACKET => LEFT ARC LESS-THAN BRACKET
2995 3.2 '⦕' => '⦖';  DOUBLE LEFT ARC GREATER-THAN BRACKET => DOUBLE RIGHT ARC LESS-THAN BRACKET
2996 3.2 '⦖' => '⦕';  DOUBLE RIGHT ARC LESS-THAN BRACKET => DOUBLE LEFT ARC GREATER-THAN BRACKET
2997 3.2 '⦗' => '⦘';  LEFT BLACK TORTOISE SHELL BRACKET => RIGHT BLACK TORTOISE SHELL BRACKET
2998 3.2 '⦘' => '⦗';  RIGHT BLACK TORTOISE SHELL BRACKET => LEFT BLACK TORTOISE SHELL BRACKET
29D8 3.2 '⧘' => '⧙';  LEFT WIGGLY FENCE => RIGHT WIGGLY FENCE
29D9 3.2 '⧙' => '⧘';  RIGHT WIGGLY FENCE => LEFT WIGGLY FENCE
29DA 3.2 '⧚' => '⧛';  LEFT DOUBLE WIGGLY FENCE => RIGHT DOUBLE WIGGLY FENCE
29DB 3.2 '⧛' => '⧚';  RIGHT DOUBLE WIGGLY FENCE => LEFT DOUBLE WIGGLY FENCE
29FC 3.2 '⧼' => '⧽';  LEFT-POINTING CURVED ANGLE BRACKET => RIGHT-POINTING CURVED ANGLE BRACKET
29FD 3.2 '⧽' => '⧼';  RIGHT-POINTING CURVED ANGLE BRACKET => LEFT-POINTING CURVED ANGLE BRACKET
2E22 5.1 '⸢' => '⸣';  TOP LEFT HALF BRACKET => TOP RIGHT HALF BRACKET
2E23 5.1 '⸣' => '⸢';  TOP RIGHT HALF BRACKET => TOP LEFT HALF BRACKET
2E24 5.1 '⸤' => '⸥';  BOTTOM LEFT HALF BRACKET => BOTTOM RIGHT HALF BRACKET
2E25 5.1 '⸥' => '⸤';  BOTTOM RIGHT HALF BRACKET => BOTTOM LEFT HALF BRACKET
2E26 5.1 '⸦' => '⸧';  LEFT SIDEWAYS U BRACKET => RIGHT SIDEWAYS U BRACKET
2E27 5.1 '⸧' => '⸦';  RIGHT SIDEWAYS U BRACKET => LEFT SIDEWAYS U BRACKET
2E28 5.1 '⸨' => '⸩';  LEFT DOUBLE PARENTHESIS => RIGHT DOUBLE PARENTHESIS
2E29 5.1 '⸩' => '⸨';  RIGHT DOUBLE PARENTHESIS => LEFT DOUBLE PARENTHESIS
3008 1.1 '〈' => '〉';  LEFT ANGLE BRACKET => RIGHT ANGLE BRACKET
3009 1.1 '〉' => '〈';  RIGHT ANGLE BRACKET => LEFT ANGLE BRACKET
300A 1.1 '《' => '》';  LEFT DOUBLE ANGLE BRACKET => RIGHT DOUBLE ANGLE BRACKET
300B 1.1 '》' => '《';  RIGHT DOUBLE ANGLE BRACKET => LEFT DOUBLE ANGLE BRACKET
300C 1.1 '「' => '」';  LEFT CORNER BRACKET => RIGHT CORNER BRACKET
300D 1.1 '」' => '「';  RIGHT CORNER BRACKET => LEFT CORNER BRACKET
300E 1.1 '『' => '』';  LEFT WHITE CORNER BRACKET => RIGHT WHITE CORNER BRACKET
300F 1.1 '』' => '『';  RIGHT WHITE CORNER BRACKET => LEFT WHITE CORNER BRACKET
3010 1.1 '【' => '】';  LEFT BLACK LENTICULAR BRACKET => RIGHT BLACK LENTICULAR BRACKET
3011 1.1 '】' => '【';  RIGHT BLACK LENTICULAR BRACKET => LEFT BLACK LENTICULAR BRACKET
3014 1.1 '〔' => '〕';  LEFT TORTOISE SHELL BRACKET => RIGHT TORTOISE SHELL BRACKET
3015 1.1 '〕' => '〔';  RIGHT TORTOISE SHELL BRACKET => LEFT TORTOISE SHELL BRACKET
3016 1.1 '〖' => '〗';  LEFT WHITE LENTICULAR BRACKET => RIGHT WHITE LENTICULAR BRACKET
3017 1.1 '〗' => '〖';  RIGHT WHITE LENTICULAR BRACKET => LEFT WHITE LENTICULAR BRACKET
3018 1.1 '〘' => '〙';  LEFT WHITE TORTOISE SHELL BRACKET => RIGHT WHITE TORTOISE SHELL BRACKET
3019 1.1 '〙' => '〘';  RIGHT WHITE TORTOISE SHELL BRACKET => LEFT WHITE TORTOISE SHELL BRACKET
301A 1.1 '〚' => '〛';  LEFT WHITE SQUARE BRACKET => RIGHT WHITE SQUARE BRACKET
301B 1.1 '〛' => '〚';  RIGHT WHITE SQUARE BRACKET => LEFT WHITE SQUARE BRACKET
FE59 1.1 '﹙' => '﹚';  SMALL LEFT PARENTHESIS => SMALL RIGHT PARENTHESIS
FE5A 1.1 '﹚' => '﹙';  SMALL RIGHT PARENTHESIS => SMALL LEFT PARENTHESIS
FE5B 1.1 '﹛' => '﹜';  SMALL LEFT CURLY BRACKET => SMALL RIGHT CURLY BRACKET
FE5C 1.1 '﹜' => '﹛';  SMALL RIGHT CURLY BRACKET => SMALL LEFT CURLY BRACKET
FE5D 1.1 '﹝' => '﹞';  SMALL LEFT TORTOISE SHELL BRACKET => SMALL RIGHT TORTOISE SHELL BRACKET
FE5E 1.1 '﹞' => '﹝';  SMALL RIGHT TORTOISE SHELL BRACKET => SMALL LEFT TORTOISE SHELL BRACKET
FF08 1.1 '（' => '）';  FULLWIDTH LEFT PARENTHESIS => FULLWIDTH RIGHT PARENTHESIS
FF09 1.1 '）' => '（';  FULLWIDTH RIGHT PARENTHESIS => FULLWIDTH LEFT PARENTHESIS
FF3B 1.1 '［' => '］';  FULLWIDTH LEFT SQUARE BRACKET => FULLWIDTH RIGHT SQUARE BRACKET
FF3D 1.1 '］' => '［';  FULLWIDTH RIGHT SQUARE BRACKET => FULLWIDTH LEFT SQUARE BRACKET
FF5B 1.1 '｛' => '｝';  FULLWIDTH LEFT CURLY BRACKET => FULLWIDTH RIGHT CURLY BRACKET
FF5D 1.1 '｝' => '｛';  FULLWIDTH RIGHT CURLY BRACKET => FULLWIDTH LEFT CURLY BRACKET
FF5F 3.2 '｟' => '｠';  FULLWIDTH LEFT WHITE PARENTHESIS => FULLWIDTH RIGHT WHITE PARENTHESIS
FF60 3.2 '｠' => '｟';  FULLWIDTH RIGHT WHITE PARENTHESIS => FULLWIDTH LEFT WHITE PARENTHESIS
FF62 1.1 '｢' => '｣';  HALFWIDTH LEFT CORNER BRACKET => HALFWIDTH RIGHT CORNER BRACKET
FF63 1.1 '｣' => '｢';  HALFWIDTH RIGHT CORNER BRACKET => HALFWIDTH LEFT CORNER BRACKET 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-10-04T21:39:08.980

如果您想选择不被正式视为分组符号的字符`<`，`>`您可以按照@roeland [here的建议查看](https://stackoverflow.com/a/32938372/2829764)[http://www.unicode.org/Public/UNIDATA/BidiMirroring.txt](http://www.unicode.org/Public/UNIDATA/BidiMirroring.txt)。该文件列出了所有应该是彼此镜像的字符对。

这是完整列表：

```
( ) # { LEFT, RIGHT } PARENTHESIS
< > # { LESS-THAN, GREATER-THAN } SIGN
[ ] # { LEFT, RIGHT } SQUARE BRACKET
{ } # { LEFT, RIGHT } CURLY BRACKET
« » # { LEFT-POINTING, RIGHT-POINTING } DOUBLE ANGLE QUOTATION MARK
༺ ༻ # TIBETAN MARK GUG RTAGS { GYON, GYAS }
༼ ༽ # TIBETAN MARK ANG KHANG { GYON, GYAS }
᚛ ᚜ # OGHAM { , REVERSED } FEATHER MARK
‹ › # SINGLE { LEFT-POINTING, RIGHT-POINTING } ANGLE QUOTATION MARK
⁅ ⁆ # { LEFT, RIGHT } SQUARE BRACKET WITH QUILL
⁽ ⁾ # SUPERSCRIPT { LEFT, RIGHT } PARENTHESIS
₍ ₎ # SUBSCRIPT { LEFT, RIGHT } PARENTHESIS
∈ ∋ # { ELEMENT OF, CONTAINS AS MEMBER }
∉ ∌ # { NOT AN ELEMENT OF, DOES NOT CONTAIN AS MEMBER }
∊ ∍ # SMALL { ELEMENT OF, CONTAINS AS MEMBER }
∼ ∽ # { TILDE OPERATOR, REVERSED TILDE }
≒ ≓ # { APPROXIMATELY EQUAL TO OR THE IMAGE OF, IMAGE OF OR APPROXIMATELY EQUAL TO }
≔ ≕ # { COLON EQUALS, EQUALS COLON }
≤ ≥ # { LESS-THAN, GREATER-THAN } OR EQUAL TO
≦ ≧ # { LESS-THAN, GREATER-THAN } OVER EQUAL TO
≪ ≫ # MUCH { LESS-THAN, GREATER-THAN }
≶ ≷ # { LESS-THAN OR GREATER-THAN, GREATER-THAN OR LESS-THAN }
≺ ≻ # { PRECEDES, SUCCEEDS }
≼ ≽ # { PRECEDES, SUCCEEDS } OR EQUAL TO
⊂ ⊃ # { SUBSET, SUPERSET } OF
⊆ ⊇ # { SUBSET, SUPERSET } OF OR EQUAL TO
⊏ ⊐ # SQUARE { IMAGE, ORIGINAL } OF
⊑ ⊒ # SQUARE { IMAGE, ORIGINAL } OF OR EQUAL TO
⊢ ⊣ # { RIGHT, LEFT } TACK
⊰ ⊱ # { PRECEDES, SUCCEEDS } UNDER RELATION
⊲ ⊳ # { NORMAL SUBGROUP OF, CONTAINS AS NORMAL SUBGROUP }
⊴ ⊵ # { NORMAL SUBGROUP OF, CONTAINS AS NORMAL SUBGROUP } OR EQUAL TO
⊶ ⊷ # { ORIGINAL, IMAGE } OF
⋉ ⋊ # { LEFT, RIGHT } NORMAL FACTOR SEMIDIRECT PRODUCT
⋋ ⋌ # { LEFT, RIGHT } SEMIDIRECT PRODUCT
≃ ⋍ # { ASYMPTOTICALLY EQUAL TO, REVERSED TILDE EQUALS }
⋐ ⋑ # DOUBLE { SUBSET, SUPERSET }
⋖ ⋗ # { LESS-THAN, GREATER-THAN } WITH DOT
⋘ ⋙ # VERY MUCH { LESS-THAN, GREATER-THAN }
⋚ ⋛ # { LESS-THAN EQUAL TO OR GREATER-THAN, GREATER-THAN EQUAL TO OR LESS-THAN }
⋜ ⋝ # EQUAL TO OR { LESS-THAN, GREATER-THAN }
⋞ ⋟ # EQUAL TO OR { PRECEDES, SUCCEEDS }
⋰ ⋱ # { UP, DOWN } RIGHT DIAGONAL ELLIPSIS
⋲ ⋺ # { ELEMENT OF, CONTAINS } WITH LONG HORIZONTAL STROKE
⋳ ⋻ # { ELEMENT OF, CONTAINS } WITH VERTICAL BAR AT END OF HORIZONTAL STROKE
⋴ ⋼ # SMALL { ELEMENT OF, CONTAINS } WITH VERTICAL BAR AT END OF HORIZONTAL STROKE
⋶ ⋽ # { ELEMENT OF, CONTAINS } WITH OVERBAR
⋷ ⋾ # SMALL { ELEMENT OF, CONTAINS } WITH OVERBAR
⌈ ⌉ # { LEFT, RIGHT } CEILING
⌊ ⌋ # { LEFT, RIGHT } FLOOR
〈 〉 # { LEFT-POINTING, RIGHT-POINTING } ANGLE BRACKET
❨ ❩ # MEDIUM { LEFT, RIGHT } PARENTHESIS ORNAMENT
❪ ❫ # MEDIUM FLATTENED { LEFT, RIGHT } PARENTHESIS ORNAMENT
❬ ❭ # MEDIUM { LEFT-POINTING, RIGHT-POINTING } ANGLE BRACKET ORNAMENT
❮ ❯ # HEAVY { LEFT-POINTING, RIGHT-POINTING } ANGLE QUOTATION MARK ORNAMENT
❰ ❱ # HEAVY { LEFT-POINTING, RIGHT-POINTING } ANGLE BRACKET ORNAMENT
❲ ❳ # LIGHT { LEFT, RIGHT } TORTOISE SHELL BRACKET ORNAMENT
❴ ❵ # MEDIUM { LEFT, RIGHT } CURLY BRACKET ORNAMENT
⟃ ⟄ # OPEN { SUBSET, SUPERSET }
⟅ ⟆ # { LEFT, RIGHT } S-SHAPED BAG DELIMITER
⟈ ⟉ # { REVERSE SOLIDUS PRECEDING SUBSET, SUPERSET PRECEDING SOLIDUS }
⟋ ⟍ # MATHEMATICAL { RISING, FALLING } DIAGONAL
⟕ ⟖ # { LEFT, RIGHT } OUTER JOIN
⟝ ⟞ # LONG { RIGHT, LEFT } TACK
⟢ ⟣ # WHITE CONCAVE-SIDED DIAMOND WITH { LEFTWARDS, RIGHTWARDS } TICK
⟤ ⟥ # WHITE SQUARE WITH { LEFTWARDS, RIGHTWARDS } TICK
⟦ ⟧ # MATHEMATICAL { LEFT, RIGHT } WHITE SQUARE BRACKET
⟨ ⟩ # MATHEMATICAL { LEFT, RIGHT } ANGLE BRACKET
⟪ ⟫ # MATHEMATICAL { LEFT, RIGHT } DOUBLE ANGLE BRACKET
⟬ ⟭ # MATHEMATICAL { LEFT, RIGHT } WHITE TORTOISE SHELL BRACKET
⟮ ⟯ # MATHEMATICAL { LEFT, RIGHT } FLATTENED PARENTHESIS
⦃ ⦄ # { LEFT, RIGHT } WHITE CURLY BRACKET
⦅ ⦆ # { LEFT, RIGHT } WHITE PARENTHESIS
⦇ ⦈ # Z NOTATION { LEFT, RIGHT } IMAGE BRACKET
⦉ ⦊ # Z NOTATION { LEFT, RIGHT } BINDING BRACKET
⦋ ⦌ # { LEFT, RIGHT } SQUARE BRACKET WITH UNDERBAR
⦎ ⦏ # { RIGHT, LEFT } SQUARE BRACKET WITH TICK IN BOTTOM CORNER
⦍ ⦐ # { LEFT, RIGHT } SQUARE BRACKET WITH TICK IN TOP CORNER
⦑ ⦒ # { LEFT, RIGHT } ANGLE BRACKET WITH DOT
⦓ ⦔ # { LEFT ARC LESS-THAN, RIGHT ARC GREATER-THAN } BRACKET
⦕ ⦖ # DOUBLE { LEFT ARC GREATER-THAN, RIGHT ARC LESS-THAN } BRACKET
⦗ ⦘ # { LEFT, RIGHT } BLACK TORTOISE SHELL BRACKET
⊘ ⦸ # CIRCLED { DIVISION SLASH, REVERSE SOLIDUS }
⧀ ⧁ # CIRCLED { LESS-THAN, GREATER-THAN }
⧄ ⧅ # SQUARED { RISING, FALLING } DIAGONAL SLASH
⧏ ⧐ # { LEFT TRIANGLE BESIDE VERTICAL BAR, VERTICAL BAR BESIDE RIGHT TRIANGLE }
⧑ ⧒ # BOWTIE WITH { LEFT, RIGHT } HALF BLACK
⧔ ⧕ # TIMES WITH { LEFT, RIGHT } HALF BLACK
⧘ ⧙ # { LEFT, RIGHT } WIGGLY FENCE
⧚ ⧛ # { LEFT, RIGHT } DOUBLE WIGGLY FENCE
∕ ⧵ # { DIVISION SLASH, REVERSE SOLIDUS OPERATOR }
⧸ ⧹ # BIG { , REVERSE } SOLIDUS
⧼ ⧽ # { LEFT-POINTING, RIGHT-POINTING } CURVED ANGLE BRACKET
⨫ ⨬ # MINUS SIGN WITH { FALLING, RISING } DOTS
⨭ ⨮ # PLUS SIGN IN { LEFT, RIGHT } HALF CIRCLE
⨴ ⨵ # MULTIPLICATION SIGN IN { LEFT, RIGHT } HALF CIRCLE
⨼ ⨽ # { , RIGHTHAND } INTERIOR PRODUCT
⩤ ⩥ # Z NOTATION { DOMAIN, RANGE } ANTIRESTRICTION
⩹ ⩺ # { LESS-THAN, GREATER-THAN } WITH CIRCLE INSIDE
⩽ ⩾ # { LESS-THAN, GREATER-THAN } OR SLANTED EQUAL TO
⩿ ⪀ # { LESS-THAN, GREATER-THAN } OR SLANTED EQUAL TO WITH DOT INSIDE
⪁ ⪂ # { LESS-THAN, GREATER-THAN } OR SLANTED EQUAL TO WITH DOT ABOVE
⪃ ⪄ # { LESS-THAN OR SLANTED EQUAL TO WITH DOT ABOVE RIGHT, GREATER-THAN OR SLANTED EQUAL TO WITH DOT ABOVE LEFT }
⪋ ⪌ # { LESS-THAN ABOVE DOUBLE-LINE EQUAL ABOVE GREATER-THAN, GREATER-THAN ABOVE DOUBLE-LINE EQUAL ABOVE LESS-THAN }
⪑ ⪒ # { LESS-THAN ABOVE GREATER-THAN, GREATER-THAN ABOVE LESS-THAN } ABOVE DOUBLE-LINE EQUAL
⪓ ⪔ # { LESS-THAN ABOVE SLANTED EQUAL ABOVE GREATER-THAN, GREATER-THAN ABOVE SLANTED EQUAL ABOVE LESS-THAN } ABOVE SLANTED EQUAL
⪕ ⪖ # SLANTED EQUAL TO OR { LESS-THAN, GREATER-THAN }
⪗ ⪘ # SLANTED EQUAL TO OR { LESS-THAN, GREATER-THAN } WITH DOT INSIDE
⪙ ⪚ # DOUBLE-LINE EQUAL TO OR { LESS-THAN, GREATER-THAN }
⪛ ⪜ # DOUBLE-LINE SLANTED EQUAL TO OR { LESS-THAN, GREATER-THAN }
⪡ ⪢ # DOUBLE NESTED { LESS-THAN, GREATER-THAN }
⪦ ⪧ # { LESS-THAN, GREATER-THAN } CLOSED BY CURVE
⪨ ⪩ # { LESS-THAN, GREATER-THAN } CLOSED BY CURVE ABOVE SLANTED EQUAL
⪪ ⪫ # { SMALLER, LARGER } THAN
⪬ ⪭ # { SMALLER, LARGER } THAN OR EQUAL TO
⪯ ⪰ # { PRECEDES, SUCCEEDS } ABOVE SINGLE-LINE EQUALS SIGN
⪳ ⪴ # { PRECEDES, SUCCEEDS } ABOVE EQUALS SIGN
⪻ ⪼ # DOUBLE { PRECEDES, SUCCEEDS }
⪽ ⪾ # { SUBSET, SUPERSET } WITH DOT
⪿ ⫀ # { SUBSET, SUPERSET } WITH PLUS SIGN BELOW
⫁ ⫂ # { SUBSET, SUPERSET } WITH MULTIPLICATION SIGN BELOW
⫃ ⫄ # { SUBSET, SUPERSET } OF OR EQUAL TO WITH DOT ABOVE
⫅ ⫆ # { SUBSET, SUPERSET } OF ABOVE EQUALS SIGN
⫍ ⫎ # SQUARE { LEFT, RIGHT } OPEN BOX OPERATOR
⫏ ⫐ # CLOSED { SUBSET, SUPERSET }
⫑ ⫒ # CLOSED { SUBSET, SUPERSET } OR EQUAL TO
⫓ ⫔ # { SUBSET ABOVE SUPERSET, SUPERSET ABOVE SUBSET }
⫕ ⫖ # { SUBSET ABOVE SUBSET, SUPERSET ABOVE SUPERSET }
⊦ ⫞ # { ASSERTION, SHORT LEFT TACK }
⊩ ⫣ # { FORCES, DOUBLE VERTICAL BAR LEFT TURNSTILE }
⊨ ⫤ # { TRUE, VERTICAL BAR DOUBLE LEFT TURNSTILE }
⊫ ⫥ # DOUBLE VERTICAL BAR DOUBLE { RIGHT, LEFT } TURNSTILE
⫬ ⫭ # { , REVERSED } DOUBLE STROKE NOT SIGN
⫷ ⫸ # TRIPLE NESTED { LESS-THAN, GREATER-THAN }
⫹ ⫺ # DOUBLE-LINE SLANTED { LESS-THAN, GREATER-THAN } OR EQUAL TO
⸂ ⸃ # { LEFT, RIGHT } SUBSTITUTION BRACKET
⸄ ⸅ # { LEFT, RIGHT } DOTTED SUBSTITUTION BRACKET
⸉ ⸊ # { LEFT, RIGHT } TRANSPOSITION BRACKET
⸌ ⸍ # { LEFT, RIGHT } RAISED OMISSION BRACKET
⸜ ⸝ # { LEFT, RIGHT } LOW PARAPHRASE BRACKET
⸠ ⸡ # { LEFT, RIGHT } VERTICAL BAR WITH QUILL
⸢ ⸣ # TOP { LEFT, RIGHT } HALF BRACKET
⸤ ⸥ # BOTTOM { LEFT, RIGHT } HALF BRACKET
⸦ ⸧ # { LEFT, RIGHT } SIDEWAYS U BRACKET
⸨ ⸩ # { LEFT, RIGHT } DOUBLE PARENTHESIS
〈 〉 # { LEFT, RIGHT } ANGLE BRACKET
《 》 # { LEFT, RIGHT } DOUBLE ANGLE BRACKET
【 】 # { LEFT, RIGHT } BLACK LENTICULAR BRACKET
〔 〕 # { LEFT, RIGHT } TORTOISE SHELL BRACKET
〖 〗 # { LEFT, RIGHT } WHITE LENTICULAR BRACKET
〘 〙 # { LEFT, RIGHT } WHITE TORTOISE SHELL BRACKET
〚 〛 # { LEFT, RIGHT } WHITE SQUARE BRACKET
﹙ ﹚ # SMALL { LEFT, RIGHT } PARENTHESIS
﹛ ﹜ # SMALL { LEFT, RIGHT } CURLY BRACKET
﹝ ﹞ # SMALL { LEFT, RIGHT } TORTOISE SHELL BRACKET
﹤ ﹥ # SMALL { LESS-THAN, GREATER-THAN } SIGN
（ ） # FULLWIDTH { LEFT, RIGHT } PARENTHESIS
＜ ＞ # FULLWIDTH { LESS-THAN, GREATER-THAN } SIGN
［ ］ # FULLWIDTH { LEFT, RIGHT } SQUARE BRACKET
｛ ｝ # FULLWIDTH { LEFT, RIGHT } CURLY BRACKET
｟ ｠ # FULLWIDTH { LEFT, RIGHT } WHITE PARENTHESIS 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-03-05T15:26:31.680

> 什么是搜索 unicode 字符的好方法？

这 - 显然 - 取决于你究竟打算做什么。我建立了网站[http://write-math.com](http://write-math.com)。在我的学士学位论文中，我创建了一个符号分类器（现在在这个网站上的“分类”下），它让用户可以绘制一个符号并获得 LaTeX / unicode 结果（目前只支持 369 个符号）。如果您想排版文档并搜索单个特定字符，您知道它们的外观/如何调用它们，但不知道如何用 LaTeX（或您用于排版的任何内容）编写它们，这非常好：

![在此处输入图像描述](../Images/d965c47fd014b7e8877caf543ab0d4d8.png)

它还具有符号搜索功能。它仍在大量开发中，但该数据库中有 1166 个符号。

对于您的括号：

*   [http://www.martin-thoma.de/write-math/search/?search=bracket](http://www.martin-thoma.de/write-math/search/?search=bracket)
*   [http://www.martin-thoma.de/write-math/search/?search=parenthesis](http://www.martin-thoma.de/write-math/search/?search=parenthesis)

`unicode.xml`（来自[http://www.w3.org/2003/entities/2007doc/#source](http://www.w3.org/2003/entities/2007doc/#source)）也值得一试。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-23T20:22:59.103

“类括号”字符的概念可能或多或少与 Ps（标点符号，打开）和 Pe（标点符号，关闭）的通用类别 (gc) 属性值相同。这个类别包含几十个成对的标点符号，大部分不包括引号（类别 Pi 和 Pf）。

在编程中，许多语言都有用于测试字符的一般类别的工具，例如`\p{Ps}`在 Perl 中。

如果您只需要一些列表，您可以使用 fileformat.info 中的[Unicode 字符类别](http://www.fileformat.info/info/unicode/category/index.htm)信息。

通常，搜索 Unicode 字符的方式取决于您要查找的内容和您的条件。在许多情况下，通用类别是一个很好的起点。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-03-19T08:18:37.103

[http://xahlee.info/comp/unicode_matching_brackets.html](http://xahlee.info/comp/unicode_matching_brackets.html)

这是一个优秀且非常全面的网站（对于括号和其他所有内容），看起来它们都使用 Arial、sans-serif 显示它们，所以如果你能看到这个字符，那么它应该在良好的浏览器支持下工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-29T04:14:56.140

因为[andrewdotn 的回答](https://stackoverflow.com/a/13535350/11777065)使用 Python 2，所以这里是 Python 3 版本：

```
import re
import unicodedata

for i in range(0x10000):
    char = chr(i)
    category = unicodedata.category(char)
    name = unicodedata.name(char, '')
    if ('bracket' in name.lower() or 'paren' in name.lower()
            or category in ['Ps', 'Pe']):
        print('U+%04x %s %s %c' % (i, category, name, char)) 
```

# data-mining - 将新观察分配给集群

> ID：13535175
> 
> 赞同：1
> 
> 时间：2012-11-23T20:08:45.497
> 
> 标签：data-mining, cluster-analysis, binary-data, mahout

假设我在 Mahout 中有一个用户/项目特征矩阵，并且我已经导出了用户的对数似然相似性并确定了三个用户集群。现在我有一个带有一组项目（相同格式和相同项目集）的新用户，如何在不重新计算相似度矩阵和重新聚类过程的情况下为新用户分配这三个集群中的一个？问题是如果我使用当前的集群质心并计算对数似然相似度或任何距离度量，质心不再是二元的。如果我使用 k 中位数，它们就有可能全为零。解决这个问题的好方法是什么？您是否推荐使用任何模型基础聚类，特别是在 MAhout 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:13:47.727

为集群训练分类器怎么样？

为避免出现零点，您可以改用 k-medoids。这里的关键区别在于 k-medoids**将从您的数据集中**选择最中心的对象，因此它实际上与您的数据对象具有相同的稀疏性。

由于我不使用 Mahout，我不知道 Mahout 中是否有此功能。据我所知，它比 k-means 或 k-median 的计算密集度更高。

# cuda - 将数据复制到“cufftComplex”数据结构？

> ID：13535182
> 
> 赞同：7
> 
> 时间：2012-11-23T20:09:33.897
> 
> 标签：cuda, memcpy

我将数据存储为浮点数组（单精度）。我有一个数组用于我的真实数据，一个数组用于我的复杂数据，我将其用作 FFT 的输入。`cufftComplex`如果我想使用 CUDA cufft 库，我需要将此数据复制到数据类型中。来自 nVidia：“`cufftComplex`是一种单精度、浮点复杂数据类型，由交错的实部和虚部组成。” cufft 操作的数据存储在`cufftComplex`.

如何快速将我的数据从普通 C 数组复制到数组中`cufftComplex`？我不想使用`for`循环，因为它可能是最慢的选项。我不知道如何`memcpy`在这种类型的数组上使用数据，因为我不知道它是如何存储在内存中的。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T22:32:45.987

您可以将其作为主机-> 设备副本的一部分来执行。每个副本将获取主机上的一个连续输入数组，并以跨步方式将其复制到设备。CUDA 中复杂数据类型的存储布局与 Fortran 和 C++ 中为复杂类型定义的布局兼容，即实部后跟虚部的结构。

```
float * real_vec;       // host vector, real part
float * imag_vec;       // host vector, imaginary part
float2 * complex_vec_d; // device vector, single-precision complex

float * tmp_d = (float *) complex_vec_d;

cudaStat = cudaMemcpy2D (tmp_d, 2 * sizeof(tmp_d[0]), 
                         real_vec, 1 * sizeof(real_vec[0]),
                         sizeof(real_vec[0]), n, cudaMemcpyHostToDevice);
cudaStat = cudaMemcpy2D (tmp_d + 1, 2 * sizeof(tmp_d[0]),
                         imag_vec, 1 * sizeof(imag_vec[0]),
                         sizeof(imag_vec[0]), n, cudaMemcpyHostToDevice); 
```

# drupal-7 - 在drupal主页上显示幻灯片

> ID：13535183
> 
> 赞同：1
> 
> 时间：2012-11-23T20:09:34.763
> 
> 标签：drupal-7

我正在使用 drupal 7 构建一个网站，其中我有两个用户角色，即成员和专家。我想在幻灯片的每个实例中显示专家类型用户的幻灯片，其中包含他们的图像、姓名和几行描述他们的内容。当用户在注册时输入这些详细信息时，我需要的所有 3 个字段都存储在 mysql 数据库中。我使用了 view_slideshow 模块，但我无法按照自己的方式配置它。无法创建新的内容类型。可以以我想要的方式显示幻灯片吗？如果需要，我正在使用“忙碌”主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T14:36:26.603

使用视图幻灯片模块，您应该能够创建一个视图，而不是显示您显示用户的内容。在创建视图页面上有一个位置显示“显示：内容”作为下拉菜单。将此更改为用户，然后当您拥有视图幻灯片模块时，将同一页面上的显示格式更改为幻灯片。

# netty - 在netty中，如何在下游和上游处理程序之间共享数据

> ID：13535186
> 
> 赞同：1
> 
> 时间：2012-11-23T20:09:43.473
> 
> 标签：netty

我正在用netty编写异步客户端。我需要有关发送到服务器的请求消息类型的信息，以便能够解码从服务器返回的响应。换句话说，解码逻辑需要有关请求消息类型的信息。如何在上游处理程序或解码器中获取这些信息？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:17:33.887

您可以使用 Channel.setAttachment(..)、Channel.getAttachment()

# cordova - 使用 PhoneGap 1.6.1 中的 mediaRec.startRecord() 损坏音频文件

> ID：13535190
> 
> 赞同：3
> 
> 时间：2012-11-23T20:10:09.693
> 
> 标签：cordova, android-audiorecord, ibm-mobilefirst

我正在尝试使用 media.startRecord() PhoneGap 1.6.1 API（[http://docs.phonegap.com/en/1.6.1/cordova_media_media.md.html#media.startRecord](http://docs.phonegap.com/en/1.6.1/cordova_media_media.md.html#media.startRecord)在实际设备上录制示例音频）。startRecord() API 可以正常执行。录制完成后会创建音频文件。但是录制的音频文件的大小非常小（~9kB），与来自商业录音应用程序的相同长度的录音文件相比，但大小约为~100kB。我将音频文件从我的应用程序下载到 Windows，但无法播放。

我使用 PhoneGap 的示例代码进行录音：

```
function startRecording() {  
    // Create your Media object

    var src="recording.wav"
    mediaRec = new Media(src,

        // Success callback
        function() {
            console.log("mediaRec -> success");
        },

        // Error callback
        function(err) {
            if (typeof err.message != 'undefined')
                err = err.message;
            console.log("Error : " + err);
   });

    // Record audio
    mediaRec.startRecord();
}

function stopRecording(){  
    console.log("stop recording...");  
    mediaRec.stopRecord();  
} 
```

我在 AndroidManifest.xml 中添加了以下权限：

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

执行 mediaRec.startRecord() 和 mediaRec.startRecord() 时没有错误。日志如下所示：

```
11-23 11:46:34.975: I/Web Console(3646): start recording...  
11-23 11:46:35.178: I/AudioHardwareQSD(3216): AudioHardware PCM record is going to standby.  
11-23 11:46:35.178: I/AudioHardwareQSD(3216): do input routing device 40000  
11-23 11:46:35.178: I/AudioHardwareQSD(3216): Routing audio to speaker(builtin-mic)  
11-23 11:46:35.178: D/AudioHardwareQSD(3216): Switching audio device to   
11-23 11:46:35.178: D/AudioHardwareQSD(3216): Speakerphone  
11-23 11:46:35.178: I/MPEG4Writer(3216): limits: 2147483647/0 bytes/us, bit rate: 12200 bps and the estimated moov size 3072 bytes  
11-23 11:46:35.205: I/AudioHardwareQSD(3216): AudioHardware PCM record is going to standby.  
11-23 11:46:35.205: I/AudioHardwareQSD(3216): do input routing device 40000  
11-23 11:46:35.205: I/AudioHardwareQSD(3216): Routing audio to speaker(builtin-mic)  
11-23 11:46:35.205: D/AudioHardwareQSD(3216): Switching audio device to   
11-23 11:46:35.205: D/AudioHardwareQSD(3216): Speakerphone  
11-23 11:46:35.205: I/AudioHardwareQSD(3216): do input routing device 40000  
11-23 11:46:35.205: I/AudioHardwareQSD(3216): Routing audio to speaker(builtin-mic)  
11-23 11:46:35.445: I/MPEG4Writer(3216): setStartTimestampUs: 269619  
11-23 11:46:35.445: I/MPEG4Writer(3216): Earliest track starting time: 269619  
11-23 11:46:35.495: D/CordovaLog(3646): mediaRec -> success  
11-23 11:46:35.495: D/CordovaLog(3646): file:///data/data/com.voiceRec2/files/www/default/js/voiceRec2.js: Line 34 : mediaRec -> success  
11-23 11:46:35.495: I/Web Console(3646): mediaRec -> success at file:///data/data/com.voiceRec2/files/www/default/js/voiceRec2.js:34  
11-23 11:46:40.005: D/dalvikvm(3512): GC_EXPLICIT freed 290K, 45% free 3809K/6855K, external 1685K/2133K, paused 48ms  
11-23 11:46:44.995: D/CordovaLog(3646): mediaRec sr: recording.wav  

11-23 11:46:45.045: I/MPEG4Writer(3216): Received total/0-length (481/0) buffers and encoded 481 frames. - audio  
11-23 11:46:45.045: I/MPEG4Writer(3216): Audio track drift time: 118795 us  
11-23 11:46:45.085: I/AudioHardwareQSD(3216): AudioHardware PCM record is going to standby.  
11-23 11:46:45.085: I/AudioHardwareQSD(3216): do input routing device 40000  
11-23 11:46:45.085: I/AudioHardwareQSD(3216): Routing audio to speaker(builtin-mic)  
11-23 11:46:45.085: D/AudioHardwareQSD(3216): Switching audio device to   
11-23 11:46:45.085: D/AudioHardwareQSD(3216): Speakerphone  
11-23 11:46:45.085: I/AudioHardwareQSD(3216): do input routing device 0  
11-23 11:46:45.085: I/AudioHardwareQSD(3216): Routing audio to Speakerphone  
**11-23 11:46:45.085: D/MPEG4Writer(3216): 0 chunks are written in the last batch**  
11-23 11:46:45.105: D/CordovaLog(3646): mediaRec -> success 
```

“最后一批中写入了 0 个块”看起来很可疑，但我不知道这是什么意思。谁能告诉我我在哪里做错并指出正确的方向？先感谢您！！:)

明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:44:52.170

v1.6 的 API 文档没有提到这一点，但[最新的 API 文档](http://docs.phonegap.com/en/2.4.0/cordova_media_media.md.html#media.startRecord)说 Android 以 AMR 格式而不是 WAV 记录。

# mips - 打开二进制文件进行读取

> ID：13535197
> 
> 赞同：0
> 
> 时间：2012-11-23T20:10:56.573
> 
> 标签：mips, binaryfiles, system-calls, mars-simulator

我正在尝试打开二进制文件以在 mars mips 模拟器中读取：

```
.data
file: .asciiz "o.bmp"
.text
li $v0, 13
la $a0, file
li $a1, 0
li $a2, 0
syscall         #file descriptor of oepened file in v0
beq $v0, -1, end            #my program every time jumps to end so sth is wrong 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:49:02.627

解决方案：

文件 mars.jar（或其他名称的 mars 程序）必须与文件“o.bmp”在同一目录中

# javascript - 无法访问 JSON 对象的子对象

> ID：13535200
> 
> 赞同：1
> 
> 时间：2012-11-23T20:11:08.230
> 
> 标签：javascript, jquery, facebook, json

我有一个 JSON 对象音乐家obj，我在下面粘贴了一个示例：

```
{
id: "451026389391"
name: "John Frusciante"
type: "profile"
url: "http://open.spotify.com/artist/XXXXXXXXXXXXXX"
} 
```

我使用 Javascript SDK 从 Facebook API 得到了这个。我可以运行`console.log(musicianobj);`它成功地将对象打印到 Chrome 中的日志，但是`console.log(musicianobj.name);`,`console.log(musicianobj[1]);`和`console.log(musicianobj["name"]);`所有返回 undefined 都没有明显的原因。有任何想法吗？

编辑：下面的代码。

```
var playFriendsTrack = function(friend){
  FB.api("/"+friend+"/music.listens", function(data) {
    var songname = data.data[0].data.song.title;
    var artistname = "";
    FB.api(data.data[0].data.song.id,function(trackdata){
      var musicianobj = trackdata.data.musician;
      console.log(musicianobj);
      console.log(musicianobj["name"]); // Doesn't work
      console.log(musicianobj.name); // Doesn't work
      artistname = musicianobj[1]; // Doesn't work
    });
    if(artistname.length <= 0){
      alert("Error! Please try another friend.")
    }
    }
  );} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:15:46.657

你解码了吗？它似乎仍然是一个字符串。

```
musicianobj = JSON.parse(musicianobj);
console.log(musicianobj.name); // Now this should work 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:54:33.330

得到它的工作！我不得不放一个`[0]`after `musicianobj`。显然我并不像我想的那样了解 JSON。工作代码粘贴在下面：

```
var playFriendsTrack = function(friend){
FB.api("/"+friend+"/music.listens", function(data) {
  var songname = data.data[0].data.song.title;
  var artistname = "";
  FB.api(data.data[0].data.song.id,function(trackdata){
    var musicianobj = trackdata.data.musician;
    console.log(musicianobj);
    console.log(musicianobj[0]["name"]);
    console.log(musicianobj[0].name);
    artistname = musicianobj[0].name;
  });
  if(artistname.length <= 0){
    alert("Error! Please try another friend.")
  }
  }
);} 
```

# thor - 测试任务时使用默认选项

> ID：13535204
> 
> 赞同：1
> 
> 时间：2012-11-23T20:11:39.480
> 
> 标签：thor

我想用 rspec 测试 thor 任务，但是从 rspec 调用它们时，我有两个要求：

1.  我想有可用的 Thor 类实例
2.  我想用默认选项调用任务（因为它将从命令行调用）

我无法同时实现这两个，请考虑以下代码：

```
require 'thor'
require 'thor/runner'
class App < Thor
  method_option :foo , :default => "foovalue"
  desc "xlist", "list"
  def xlist(search="")
    p options
  end
end

app = App.new

app.xlist
app.invoke(:xlist)

App.start ARGV 
```

输出是：

```
> ruby contrib/thor_test.rb xlist
{}
{}
{"foo"=>"foovalue"} 
```

在前两个示例中，我可以通过实例调用任务，但默认选项不会传递给方法（这使得规范不切实际）

在第三个示例中，我获得了默认选项，但我无法对类实例设置期望值，也无法存根任何难以测试的方法。这是因为类实例是动态创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:34:20.310

如果您问如何测试 thor cli 实用程序，我会按照[此 SO answer](https://stackoverflow.com/a/9085513/1638982)中的建议通读 thor 规范。[这里](https://github.com/wycats/thor/blob/master/spec/thor_spec.rb)的例子特别有用，可以直接使用。

规格：

```
require 'my_thor'

describe MyThor do
  it "should work" do
    args = ["command", "--force"]
    options = MyThor.start(args)
    expect(options).to eq({ "force" => true })
  end
end 
```

代码：

```
class MyThor < Thor
  desc "command", "do something"   
  method_option :force, :type => :boolean, :aliases => '-f'
  def command
    return options
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-11T17:42:30.630

我能够通过以下方式提取 Thor 命令的默认选项：

1.  获取 Thor 对该命令的选项列表的内部表示
2.  `Thor::Options`从该命令列表构建对象
3.  使用该`Thor::Options`对象解析一个空的选项数组，该数组仅返回默认值的哈希。

代码在`get_default_options_for_command`下面。老实说，我希望有更好的方法来做到这一点，但我找不到。

一旦你有了一个 Thor 对象，你可以替换它的选项以包括那些默认值以及你想要添加的任何其他选项，然后使用`#xlist`.

我用你上面的例子写了这一切：

```
require 'thor'

def get_default_options_for_command(klass,command_name)
  option_precursors = klass.all_commands[command_name].options
  parser = Thor::Options.new(option_precursors)
  parser.parse([])
end

class App < Thor

  desc "xlist", "list"
  method_option :foo , :default => "foovalue"
  method_option :bar
  def xlist(search="")
    puts "search: #{search}"
    puts "options: #{options}"
  end
end

app = App.new
xlist_default_opts = get_default_options_for_command(App,'xlist')
new_opts = { :bar => 3 }

app.options = xlist_default_opts.merge(new_opts)
app.xlist('search-term') 
```

输出是：

```
$ ./test.rb
search: search-term
options: {"foo"=>"foovalue", "bar"=>3} 
```

# javascript - JQuery 有时在 IE 中不起作用

> ID：13535209
> 
> 赞同：0
> 
> 时间：2012-11-23T20:12:27.997
> 
> 标签：javascript, jquery, internet-explorer, load

我正在一个网站上工作，上面有一些 jquery 滑块，以及其他一些功能。但是，在 IE 中每隔几个页面跳转（并且 IE 仅据我所见）jquery 将不会加载，从而破坏页面。在 IE 中有时不会加载的部分来自 jquery.cycle.all.js 文件。这是我的代码的 javascript 部分。

```
<script type="text/javascript" src="javascript/modernizr.js"></script>
<script type="text/javascript" src="javascript/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="javascript/jquery.cycle.all.js"></script>

<script type="text/javascript">

$(document).ready(function() {

    if (!Modernizr.input.placeholder) {
        $('input[placeholder], textarea[placeholder]').each(function(index, elem) {
            elem = $(elem);
            placeholder = elem.attr('placeholder');
            elem_id = elem.attr('id');
            elem_name = elem.attr('name');

            clone = elem.clone();
            clone.hide();

            if (elem_id) {
                clone.attr({'id': elem_id+'-fake'});
            }
            if (elem_name) {
                clone.attr({'name': elem_name+'-fake'});
            }
            clone.addClass('fake');
            clone.data({'original': $(elem)});
            clone.val(placeholder);

            clone.focus(function(e) {
                e.preventDefault();
                $(this).hide();
                $(this).data('original').show().focus();
            });
            elem.blur(function() {
                if ($(this).val() == '') {
                    $(this).hide();
                    $(this).next().show();
                }
            });

            elem.after(clone);
            elem.blur();
        });
    }

    $('#image-slider').cycle({
        speed: 1000,
        timeout: 1000
    });

    $('#text-slider').cycle({
        speed: 1000,
        timeout: 10000
    });

    $('#ad-1').cycle({
        speed: 1000,
        timeout: 1000
    });

    $('#ad-2').cycle({
        speed: 1000,
        timeout: 1000
    });

    $('#gallery-slider').cycle({
        speed: 2000,
        timeout: 2500
    });
});

function PopupCenter(pageURL, title, w, h) {
    var left = (screen.width/2)-(w/2);
    var top = (screen.height/2)-(h/2);
    var targetWin = window.open (pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no,   width='+w+', height='+h+', top='+top+', left='+left);
} 

</script> 
```

据我所见，占位符和#image-slider 部分每次都有效。#text-slider、#ad-1 和 #ad-2 仅在 IE 中偶尔失败。有人请告诉我我错过了什么，我在这里扯头发。可以在此处找到该站点的链接[http://memorysquare.com/testSite/](http://memorysquare.com/testSite/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:18:49.987

当我在 Chrome 中打开您的示例页面时，我得到

> [循环] 终止；选择器找到的零个元素

也许您的问题不在 JS 中，而在您的标记中。也许您还没有关闭某些 div 或定义了空的元素集。此外，页面在 Chrome 中也不起作用。

编辑：是的，我认为问题出在您的标记中。在您的常见问题解答页面上，IE 只是中断，但在您的页脚中显示 4 张图片，但 Chorme 没有显示任何内容。如果我去 Chrome 开发人员工具，我会看到它正在为您的页脚中的某些元素设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:42:47.490

看看这个例子，尽量不要责怪 Internet Explorer，我可以给你一些建议。

首先，我认为您遇到的问题不在 jQuery 或 IE 中（即使大多数问题在 IE 中），而是在您的“循环”插件中。如果您的目标是轮播效果，我建议您查看 Twitter 的 Bootstrap @ [http://twitter.github.com/bootstrap](http://twitter.github.com/bootstrap)

在那里，您会发现一组令人惊叹的样式和脚本，它们允许您使用基本标记来设置滑块。这是一个使用 Bootstrap 的示例。

标记看起来像这样：

```
<!-- The carousel container -->
<div id="slider" class="carousel slide">
    <!-- The carousel -->
    <div class="carousel-inner">
        <div class="active item">
            <!-- Here you can put the image itself, as well as a custom element to hold a caption -->
            <img src="/path/to/image.png" alt="Image Not Found" title="Bootstrap Rocks!" />
            <div class="carousel-caption">
                  <h4>The Title</h4>
                  <p>Some text.</p>
                </div>
        </div>
        <div class="active item">
            <img src="/path/to/image.png" alt="Image Not Found" title="Bootstrap Rocks!" />
        </div>
        <div class="active item">
            <img src="/path/to/image.png" alt="Image Not Found" title="Bootstrap Rocks!" />
        </div>
        </div>
    <!-- The anchors to move through the carousel -->
    <a class="carousel-control left" href="#slider" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#slider" data-slide="next">&rsaquo;</a>
</div> 
```

最好的部分是，您不必为它编写任何脚本。您可以按原样使用它，只是标记会自动初始化。

几个小贴士。

我只是觉得我应该给你一些提示，因为你的目标是让你的网站支持 Internet Explorer。

当让网站即使在 Internet Explorer 糟糕的一切下也能运行时，最好使用可以为您优化网站的小工具和工具。您不再需要进行切换/案例来优化您的网站。

当您使用 HTML5 元素时，请尝试包含“HTML5Shiv @ [http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/) ”。对于 CSS3，我正在写 'CSS3Shiv @ [http://github.com/karimsa/css3shiv](http://github.com/karimsa/css3shiv) '，但要到 1 月才会发布。

无论如何，浏览并检查您使用的插件是否能够自我优化是个好主意，如果没有，我真的建议您寻找其他插件。

# symfony - 如何让 Symfony 2 缓存动态创建的路由？

> ID：13535216
> 
> 赞同：0
> 
> 时间：2012-11-23T20:13:37.583
> 
> 标签：symfony

在另一个问题中，我询问了如何在 SF2 中动态生成路由（因为我想在路由上强制使用前缀），它工作正常：

[如何在容器编译之前向 Symfony 2 添加自定义路由？](https://stackoverflow.com/questions/12995842/how-to-add-custom-routes-to-symfony-2-before-container-compilation)

问题是这些路由没有被缓存，这可能对性能不太好。我想知道我是否在这里做错了什么，如果没有，也许有办法让 SF2 缓存我的路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:14:09.060

我在这里遵循了本教程，这似乎对我有用：

[http://forum.symfony-project.org/viewtopic.php?t=38793&p=127825](http://forum.symfony-project.org/viewtopic.php?t=38793&p=127825)

去引用：

装载机：

```
namespace MyName\MyBundle;

use Symfony\Component\Config\Loader\Loader;
use Symfony\Component\Routing\RouteCollection;
use Symfony\Component\Routing\Route;

class MyRouteLoader extends Loader 
{
    public function supports($resource, $type=null) 
    {
        return 'my_new_resource_type' === $type;
    }

    public function load($resource, $type=null) 
    {
        $collection = new RouteCollection();
        $collection->addRoute(new Route(...));
        return $collection;
    }
} 
```

服务：

```
services:
    my_route_loader:
        class: MyName\MyBundle\MyRouteLoader
        tags:
            - {name: routing.loader} 
```

# c++ - 显式特化语法

> ID：13535223
> 
> 赞同：1
> 
> 时间：2012-11-23T20:14:16.353
> 
> 标签：c++

是吗

```
template <typename T>
void foo(T) {}

template <>
void foo(int) {} 
```

显式特化或函数重载，对于显式初始化编译器想看下面的代码吗？

```
template <typename T>
void foo(T) {}

template <>
void foo<int>(int) {} 
```

我认为该标准接受这两个：

**ISO/IEC 14882:2011**

> ```
> 14.7.3 Explicit specialization [temp.expl.spec]
> 
> 1 ...
> 
> can be declared by a declaration introduced by template<>; that is:
> explicit-specialization:
> template < > declaration 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:17:34.873

任何一个都是允许的。在专业化

```
template <>
void foo(int) {} 
```

`T = int`编译器从函数参数推断模板参数。从 14.7.3p10 开始：

> 如果可以从函数参数类型推导出来，则可以在命名显式函数模板*特化的模板 ID*中未指定尾随*模板参数。*

 *给出的示例涉及从类模板中进行推导，但它同样适用于从直接使用的类型中进行推导：

```
template<class T> class Array { /∗ ... ∗/ };
template<class T> void sort(Array<T>& v);
// explicit specialization for sort(Array<int>&)
// with deduced template-argument of type int
template<> void sort(Array<int>&); 
```*

# c# - 使用类和引用表单控件执行计算

> ID：13535225
> 
> 赞同：0
> 
> 时间：2012-11-23T20:14:22.013
> 
> 标签：c#

我正在尝试学习课程，这意味着在 Windows 表单之外编写代码并在表单中调用该代码。我在表单中创建了一个基本计算，它可以工作。问题是，我想知道如何将整个计算移动到一个类中，并在加载时或单击控件时将其调用到表单中。这没用！

**这是我的本地版本或表单版本：** 请注意，表单将在第一次计算时加载，因为单选按钮在加载时被选中。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Calculations
{
    public partial class Calculations : Form
    {
        public Calculations()
        {
            InitializeComponent();
        }

        public  decimal SalesTax = 0.065M;
        public  decimal AppliedTax;
        public  decimal Price;
        public  decimal SubTotal;
        public  decimal GrandTotal;

        public object Calc()
        {
            Int32 GetQuantity = Convert.ToInt32(txtQuantity.Text);
            SubTotal = (Price * GetQuantity);
            AppliedTax = (SubTotal * SalesTax);
            GrandTotal = (SubTotal + AppliedTax);

            if (radRed.Checked == true)
            {
                Price = 100;
            }

            else if (radBlue.Checked == true)
            {
                Price = 200;
            }

            else if (radGreen.Checked == true)
            {
                Price = 300;
            }

            lblPrice.Text = GrandTotal.ToString("c");

            return GrandTotal;
        }

        private void Calculations_Load(object sender, EventArgs e)
        {
            txtQuantity.Text = "10";
            radRed.Checked = true;
            Calc();

        }

        private void radRed_CheckedChanged(object sender, EventArgs e)
        {
            Calc();
        }

        private void radBlue_CheckedChanged(object sender, EventArgs e)
        {   
            Calc();

        }

        private void radGreen_CheckedChanged(object sender, EventArgs e)
        {
            Calc();
        }

        private void btnCalculate_Click(object sender, EventArgs e)
        {  
          Calc();
        }
    }
} 
```

这是我尝试将所有这些放在一个类中：它可以工作但不能加载，您必须先检查另一个单选按钮

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Calculations
{
    class ClsCalc
    {
        class ClsRef
        {
            public static Calculations FormCtrls
            {
                get
                {
                    return Calculations.ActiveForm as Calculations;
                }
            }
        }

        public static decimal SalesTax = 0.065M;
        public static decimal AppliedTax;
        public static decimal Price;
        public static decimal SubTotal;
        public static decimal GrandTotal;

        public static object Calc()
        {
            Int32 GetQuantity = Convert.ToInt32(ClsRef.FormCtrls.txtQuantity.Text);
            SubTotal = (Price * GetQuantity);
            AppliedTax = (SubTotal * SalesTax);
            GrandTotal = (SubTotal + AppliedTax);

            if (ClsRef.FormCtrls.radRed.Checked == true)
            {
                Price = 100;
            }

            else if (ClsRef.FormCtrls.radBlue.Checked == true)
            {
                Price = 200;
            }

            else if (ClsRef.FormCtrls.radGreen.Checked == true)
            {
                Price = 300;
            }

            ClsRef.FormCtrls.lblPrice.Text = GrandTotal.ToString("c");

            return GrandTotal;
        }
    }
} 
```

最后我以 Load 事件的形式调用它：

> ClsCalc.Calc();

请注意，这不是一个真正的项目，只是一种学习方式，对我来说就是这样。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:26:22.920

您的计算方法几乎完全涉及与 UI 元素的交互。您从文本框和各种复选框中收集了一堆信息，然后只有三行实际计算，然后显示结果。

UI 交互*不应*移到表单之外。您不应该公开公开表格的内部控制；只能从其父表单（或用户控件，如果是这样的话）中访问它们。

在执行某些表单提交操作时，您将看到的一种常见模式是从输入控件收集信息，对数据进行一些计算，然后在表单上显示结果。收集信息和显示结果都应该保留在表单中，唯一应该（可能）移出表单定义的东西是计算。在这种情况下，工作量如此之小，没有令人信服的理由这样做。

# javascript - 对象嵌套属性访问

> ID：13535226
> 
> 赞同：3
> 
> 时间：2012-11-23T20:14:23.647
> 
> 标签：javascript, recursion, javascript-objects

我正在尝试编写一个函数，为对象中的每个嵌套属性添加一个访问器。为了使这一点更清楚一点，给定 object`o`和表示路径的字符串，我应该能够将该路径上的属性作为命名属性访问：

```
var o = {
    child1: "foo",
    child2: {
        child1: "bar",
        child2: 1
        child3: {
            child1: "baz"
        }
    }
};

addAccessors(o);

o["child2.child1"]; // "bar"
o["child2.child2"]; // 1
o["child2.child3.child1"]; // "baz" 
```

请注意，名称并不总是统一的。

这是我到目前为止所拥有的：

```
function addAccessors(parent) {
    function nestedProps(o, level) {
        if (typeof o == "object") {
            var level = level || "";
            for (p in o) {
                if (o.hasOwnProperty(p)) {
                    if (level && typeof(o[p]) != "object") {
                        parent[level + "." + p] = o[p];
                    }
                    nestedProps(o[p], (level ? level + "." : "") + p);
                }
            }
        }
    }
    nestedProps(parent);
} 
```

从这一行可以看出：`obj[level + "." + p] = o[p];`，我只是将值作为新属性添加到数组中。

我想要做的是添加一个从适当的属性中检索值的访问器，以便它是“活的”。参考我之前的例子：

```
o["child2.child2"]; // 1
o["child2"]["child2"] = 2;
o["child2.child2"]; // Still 1, but I want it to be updated 
```

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:27:43.457

这对于现在使用的浏览器是不可能的。没有办法分配回调或类似的分配。而是使用函数实时获取值：

```
o.get=function(path)
{
    var value=this;
    var list=path.split(".");
    for (var i=0; i<list.length; i++)
    {
        value=value[list[i]];
        if (value===undefined) return undefined;
    }
    return value;
}
o.get("child2.child1"); 
```

# mysql - 在 MySQL 截断后 Rails 持久化表数据

> ID：13535230
> 
> 赞同：0
> 
> 时间：2012-11-23T20:15:09.593
> 
> 标签：mysql, ruby-on-rails, ruby

我在 MySQL 中截断了我的数据库中的 2 个表（对于 Rails 项目），以便我可以用测试数据重新填充它。但是由于某种原因，应用程序仍在计算曾经有多少条目（250），尽管现在只有 9 个条目。

我什至使用（ruby 脚本/rails 控制台）进入 ruby​​ 控制台，然后使用以下命令截断：

```
ActiveRecord::Base.connection.execute("TRUNCATE TABLE bars;") 
```

但这并没有做任何不同的事情，然后通过 MySQL 运行查询。我很困惑，我唯一能想到的就是重新启动服务器。我只是想知道是否有另一种方法可以做到这一点而不必重新启动一切。

将搜索结果打印到记录器中，我可以看到 bar 的结果是一堆 nil 值，这些值用于曾经有 bar_profile 的位置，但我已经截断了引用 bar 或 bar_profiles 的表。

所以我不明白为什么它只会返回表格被截断之前的结果。除了现在而不是返回实际结果，它们只是零。

# ios - MBProgressHUD 不会显示标签

> ID：13535232
> 
> 赞同：0
> 
> 时间：2012-11-23T20:15:11.377
> 
> 标签：ios, components, refresh, mbprogresshud

我在我的应用程序中使用 MBProgressBar 来在调用某个 webService 时显示反馈。

为此，在 ASIHTTPRequest 的“requestStarted”方法中，我调用：

```
[NSThread detachNewThreadSelector:@selector(startLoader) toTarget:self]; 
```

`startLoader`弹出HUD的方法在哪里。

现在，问题是，每当我`startLoader`直接调用时，HUD 都会毫无问题地显示，但是当我使用该`detachNewThreadSelector`事物（这是必需的）调用方法时，会显示 HUD，但没有文本标签。

如果我不得不猜测，我会说我需要强制刷新组件，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:50:37.777

与 HUD 相关的任何事情都需要在主/UI 线程上完成。如果您分离并放在后台线程上，HUD 可能永远不会获得这些更新，因为您的请求将在返回主线程之前完成。

# javascript - 使用 xpath 访问特定元素

> ID：13535233
> 
> 赞同：2
> 
> 时间：2012-11-23T20:15:11.730
> 
> 标签：javascript, xpath, titanium, yql

我想使用 xpath 访问特定元素。这是我的 yql 查询结果。看看这个链接 http://developer.yahoo.com/yql/console/#h=select%20content%20from%20html% 20where%20url%3D%22http%3A//www.riqapp.be/qld-quaddie.html%22%20and%20xpath%3D%22//h6[1]%22

```
 <h6>First qld Quaddie</h6>
    <h6>second qld quaddie</h6> 
```

我正在使用这个 yql 查询

```
 select content from html where url="http://www.riqapp.be/qld-quaddie.html" and xpath="//h6" 
```

现在我想使用 xpath 访问唯一的第一个元素，它说 First qld Quaddie.Plz 在这方面帮助我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:20:35.993

XPath`//h6[1]`应该可以解决问题。（通过[http://www.xpathtester.com/](http://www.xpathtester.com/)测试。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:40:56.877

**使用**：

```
(//h6)[1] 
```

**这是 XPath 中最常见的问题之一**——XPath`[]`运算符的优先级高于`//`XPath 伪运算符。

# html - 是否可以在 html5 中更改音频播放器的大小

> ID：13535235
> 
> 赞同：11
> 
> 时间：2012-11-23T20:15:20.610
> 
> 标签：html, html5-audio

如果 html5 中的音频播放器使用音频标签生成，是否有可能改变大小。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-25T13:34:14.040

`<audio>`可以将样式设置为任何其他 html 元素。

要增加宽度，只需使用 css 属性`width`。

一些html：

```
<audio id="player" controls autoplay>
  <source src="http://xseignard.github.com/webGLWebAudioAPI/sound/OGLikeCapone.ogg" type="audio/ogg">
  Your browser does not support the audio tag.
</audio>​​​ 
```

和CSS：

```
#player {
 width: 100%;
}​ 
```

问候

# c++ - Boost 函数“tuple_list_of”无法解析

> ID：13535238
> 
> 赞同：0
> 
> 时间：2012-11-23T20:15:35.930
> 
> 标签：c++, boost, ubuntu-12.04

**编辑回答评论和关闭问题：**

实际上没有问题：该行使eclipse分析器显示“幽灵错误”，但g ++可以正确处理它。我之前在使用 boost 及其一些复杂的模板元编程结构时遇到了这个问题。

我没有注意到它，因为它与其他错误混合在一起。抱歉这个愚蠢的问题，谢谢你的帮助。

PS：请注意——不要在 10 小时编程后尝试解决这些问题

**-- 编辑结束 --**

我在 32 位 Ubuntu 12.04（Precise Pangolin）系统中安装了 boost 库（版本 1.52）。

我遵循了[安装说明](http://www.boost.org/doc/libs/1_52_0/doc/html/bbv2/installation.html)中的标准过程，包括执行“引导”脚本，然后调用 b2\. 一切都很好：没有错误，也没有跳过目标。

我发现`boost::assign::tuple_list_of`根据 g++ 的函数“无法解析”。我在以下行中使用它（可以安全地忽略受让人）：

```
#include <vector>
#include "boost/assign/list_of.hpp"

std::vector<boost::tuple<int,int> > vec = boost::assign::tuple_list_of(0,0)(2,2)(4,0)(6,2); 
```

我查看了文件 [include]boost/assign/list_of.hpp，对“tuple_list_of”的唯一引用在以下宏中：

```
#define BOOST_PP_LOCAL_MACRO(n) \
    template< class U, BOOST_ASSIGN_PARAMS1(n) > \
    inline assign_detail::generic_list< tuple<U, BOOST_ASSIGN_PARAMS4(n)> > \
    tuple_list_of(U u, BOOST_ASSIGN_PARAMS2_NO_REF(n) ) \
    { \
        return assign_detail::generic_list< tuple<U, BOOST_ASSIGN_PARAMS4(n)> >()( tuple<U,BOOST_ASSIGN_PARAMS4(n)>( u, BOOST_ASSIGN_PARAMS3(n) )); \
    } \ 
```

关于这种行为的任何线索？我错过了一些“基本”步骤吗？

# matlab - Matlab 将 defaultTextInterpreter 设置为 LaTeX

> ID：13535243
> 
> 赞同：6
> 
> 时间：2012-11-23T20:15:54.893
> 
> 标签：matlab, plot

我在 OS X 10.7.5 上运行 Matlab R2010A

我有一个简单的 matlab 图，想在轴和图例中使用 LaTeX 命令。但是设置：

`set(0, 'defaultTextInterpreter', 'latex');`

效果为零，并导致无法解析我的 tex 命令的 TeX 警告。如果我打开这个绘图的绘图工具，默认解释器设置为“TeX”。手动将其设置为“LaTeX”显然可以解决此问题，但我无法为数百个地块执行此操作。

现在，如果我通过 Matlab 提示符检索默认解释器，即 `get(0,'DefaultTextInterpreter')`

它说'LaTeX'，但是当我通过绘图工具菜单查看图形的属性时，解释器仍然设置为'TeX'。

完整的绘图代码：

```
figure
f = 'somefile.eps'
set(0, 'defaultTextInterpreter', 'latex'); 
ms = 8;
fontSize = 18;
loglog(p_m_sip, p_fa_sip, 'ko-.', 'LineWidth', 2, 'MarkerSize', ms); hold on;
xlabel('$P_{fa}$', 'fontsize', fontSize);
ylabel('$P_{m}$', 'fontsize', fontSize);
legend('$\textbf{K}_{zz}$', 'Location', 'Best');
set(gca, 'XMinorTick', 'on', 'YMinorTick', 'on', 'YGrid', 'on', 'XGrid', 'on');
print('-depsc2', f); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T22:37:27.087

这对我有用（R2011B）

```
figure
ms = 8;
fontSize = 18;

xx = 0:.1:1;
plot(xx,sin(xx))

xlabel('P_{fa}', 'fontsize', fontSize);  %No need for latex explicitly (Tex is enabled by default)
ylabel('P_{m}', 'fontsize', fontSize);

legend({'$$\textbf{K}_{zz}$$'}, 'interpreter', 'latex','fontsize',fontSize); %Explicit latex
      %REM: legend needs a cell 
```

![在此处输入图像描述](../Images/d3bf59b92f3b523818ef7ee69951e69d.png)

我能改变`'defaultTextInterpreter'`

```
set(0, 'defaultTextInterpreter', 'latex'); 

xlabel('$$P_{fa}$$', 'fontsize', fontSize);
ylabel('$$P_{m}$$', 'fontsize', fontSize);

legend({'$$\textbf{K}_{zz}$$'},'interpreter', 'latex','fontsize',fontSize) 
```

获得更好的版本

![在此处输入图像描述](../Images/8be801be1a8785cb8a5907173e85b668.png)

但是，如果我`'interpreter', 'latex'`从`legend`通话中删除，我会得到不好的结果：

![在此处输入图像描述](../Images/a01ed5a2d27316ea405a45db738ef83f.png)

# wordpress - Wordpress 自定义帖子类型 - 相同的帖子名称，不同的帖子类型

> ID：13535245
> 
> 赞同：3
> 
> 时间：2012-11-23T20:16:17.083
> 
> 标签：wordpress

我有 4 种自定义帖子类型：

服务 常见问题 之前和之后的价格

我希望能够在这些帖子类型中使用相同的帖子名称，例如：

> 服务
> 皮肤 (example.com/Services/skin)
> 霜 (example.com/Services/cream)
> 身体 (example.com/Services/body)
> 
> 皮肤
> (example.com/FAQs/skin)
> 面霜 (example.com/FAQs/cream)
> 身体 (example.com/FAQs/body)
> 
> 价格
> 皮肤 (example.com/Prices/skin)
> 奶油 (example.com/Prices/cream)
> 身体 (example.com/Prices/body)
> 
> 皮肤前后(example.com/before-and-after/skin)
> 面霜 (example.com/before-and-after/cream)
> 身体 (example.com/before-and-after/body)

我怎样才能做到这一点？现在，如果我创建一个与当前帖子同名的新帖子，它会在帖子 slug 的末尾添加一个“-2”或“-3”：

坏的：

> example.com/services/body
> 
> example.com/faqs/body-2
> 
> example.com/prices/body-3
> 
> example.com/before-and-after/body-4

有人请帮忙！！！！

```
add_action('init', 'create_post_type_html5'); // Add our HTML5 Blank Custom Post Type
function create_post_type_html5()
 {
  register_taxonomy_for_object_type('category', 'html5-blank'); // Register Taxonomies for Category
register_taxonomy_for_object_type('post_tag', 'html5-blank');
register_post_type('html5-blank', // Register Custom Post Type
    array(
    'labels' => array(
        'name' => __('Services', 'html5blank'), // Rename these to suit
        'singular_name' => __('Services', 'html5blank'),
        'add_new' => __('Add New', 'html5blank'),
        'add_new_item' => __('Add New Services', 'html5blank'),
        'edit' => __('Edit', 'html5blank'),
        'edit_item' => __('Edit Services', 'html5blank'),
        'new_item' => __('New Services', 'html5blank'),
        'view' => __('View Services', 'html5blank'),
        'view_item' => __('View Services', 'html5blank'),
        'search_items' => __('Search Services', 'html5blank'),
        'not_found' => __('No Servicess found', 'html5blank'),
        'not_found_in_trash' => __('No Service\'s found in Trash', 'html5blank')
    ),
    'rewrite' => array('slug' => 'service','with_front' => true),
    'public' => true,
    'hierarchical' => true, // Allows your posts to behave like Hierarchy Pages
    'has_archive' => true,
    'supports' => array(
        'title',
        'editor',
        'excerpt',
        'thumbnail'
    ), // Go to Dashboard Custom HTML5 Blank post for supports
    'can_export' => true, // Allows export in Tools > Export
    'taxonomies' => array(
        'post_tag',
        'category'
    ) // Add Category and Post Tags support
));

 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-08T17:21:28.853

我写了一个函数，可以添加到你的主题的functions.php文件中，其中包括这张票中mboynes编写的补丁：[http ://core.trac.wordpress.org/ticket/18962#comment:14](http://core.trac.wordpress.org/ticket/18962#comment:14)

```
function wp_cpt_unique_post_slug($slug, $post_ID, $post_status, $post_type, $post_parent, $original_slug) {
    if ( in_array( $post_status, array( 'draft', 'pending', 'auto-draft' ) ) )
        return $slug;

    global $wpdb, $wp_rewrite;

    // store slug made by original function
    $wp_slug = $slug;

    // reset slug to original slug
    $slug = $original_slug;

    $feeds = $wp_rewrite->feeds;
    if ( ! is_array( $feeds ) )
        $feeds = array();

    $hierarchical_post_types = get_post_types( array('hierarchical' => true) );
    if ( 'attachment' == $post_type ) {
        // Attachment slugs must be unique across all types.
        $check_sql = "SELECT post_name FROM $wpdb->posts WHERE post_name = %s AND ID != %d LIMIT 1";
        $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql, $slug, $post_ID ) );

        if ( $post_name_check || in_array( $slug, $feeds ) || apply_filters( 'wp_unique_post_slug_is_bad_attachment_slug', false, $slug ) ) {
            $suffix = 2;
            do {
                $alt_post_name = substr ($slug, 0, (200 - ( strlen( $suffix ) + 1 )) ) . "-$suffix";
                $post_name_check = $wpdb->get_var( $wpdb->prepare($check_sql, $alt_post_name, $post_ID ) );
                $suffix++;
            } while ( $post_name_check );
            $slug = $alt_post_name;
        }
    } elseif ( in_array( $post_type, $hierarchical_post_types ) ) {
        if ( 'nav_menu_item' == $post_type )
            return $slug;
        // Page slugs must be unique within their own trees. Pages are in a separate
        // namespace than posts so page slugs are allowed to overlap post slugs.
        $check_sql = "SELECT post_name FROM $wpdb->posts WHERE post_name = %s AND post_type = %s AND ID != %d AND post_parent = %d LIMIT 1";
        $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql, $slug, $post_type, $post_ID, $post_parent ) );

        if ( $post_name_check || in_array( $slug, $feeds ) || preg_match( "@^($wp_rewrite->pagination_base)?\d+$@", $slug ) || apply_filters( 'wp_unique_post_slug_is_bad_hierarchical_slug', false, $slug, $post_type, $post_parent ) ) {
            $suffix = 2;
            do {
                $alt_post_name = substr( $slug, 0, (200 - ( strlen( $suffix ) + 1 )) ) . "-$suffix";
                $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql, $alt_post_name, $post_type, $post_ID, $post_parent ) );
                $suffix++;
            } while ( $post_name_check );
            $slug = $alt_post_name;
        }
    } else {
        // Post slugs must be unique across all posts.
        $check_sql = "SELECT post_name FROM $wpdb->posts WHERE post_name = %s AND post_type = %s AND ID != %d LIMIT 1";
        $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql, $slug, $post_type, $post_ID ) );

        if ( $post_name_check || in_array( $slug, $feeds ) || apply_filters( 'wp_unique_post_slug_is_bad_flat_slug', false, $slug, $post_type ) ) {
            $suffix = 2;
            do {
                $alt_post_name = substr( $slug, 0, (200 - ( strlen( $suffix ) + 1 )) ) . "-$suffix";
                $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql, $alt_post_name, $post_type, $post_ID ) );
                $suffix++;
            } while ( $post_name_check );
            $slug = $alt_post_name;
        }
    }

    return $slug;
}
add_filter('wp_unique_post_slug', 'wp_cpt_unique_post_slug', 10, 6); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:04:53.607

我认为这是 wordpress 程序员团队尚未解决的错误。这里有一些关于它的其他解释：[允许不同内容的重复 slugs](http://core.trac.wordpress.org/ticket/18962)

我在这个函数中发现了一个不正确的编写代码：位于核心文件 (wp_includes/post.php) 中的 wp_unique_post_slug 检查插入的永久链接是否唯一。

不幸的是，我被迫破解核心代码来修复这个错误。我已经替换了从第 2859 行开始的代码部分：

```
} elseif ( in_array( $post_type, $hierarchical_post_types ) ) {
    // Page slugs must be unique within their own trees. Pages are in a separate
    // namespace than posts so page slugs are allowed to overlap post slugs.
    $check_sql = "SELECT post_name FROM $wpdb->posts WHERE post_name = %s AND post_type IN ( '" . implode( "', '", esc_sql( $hierarchical_post_types ) ) . "' ) AND ID != %d AND post_parent = %d LIMIT 1";
    $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql, $slug, $post_ID, $post_parent ) );

    if ( $post_name_check || in_array( $slug, $feeds ) || preg_match( "@^($wp_rewrite->pagination_base)?\d+$@", $slug )  || apply_filters( 'wp_unique_post_slug_is_bad_hierarchical_slug', false, $slug, $post_type, $post_parent ) ) {
        $suffix = 2;
        do {
            $alt_post_name = substr( $slug, 0, 200 - ( strlen( $suffix ) + 1 ) ) . "-$suffix";
            $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql, $alt_post_name, $post_ID, $post_parent ) );
            $suffix++;
        } while ( $post_name_check );
        $slug = $alt_post_name;
    }
} 
```

用我写的这段代码：

```
} elseif ( in_array( $post_type, $hierarchical_post_types ) ) {

    // HACK
    foreach($hierarchical_post_types as $pt){

            // Page slugs must be unique within their own trees. Pages are in a separate
            // namespace than posts so page slugs are allowed to overlap post slugs.                                

            // HACK
            $check_sql_andrea = "SELECT post_name FROM $wpdb->posts WHERE post_name = %s AND post_type = %s AND ID != %d AND post_parent = %d LIMIT 1";
            // HACK
            $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql_andrea, $slug, $pt, $post_ID, $post_parent ) );

            if ( $post_name_check || in_array( $slug, $feeds ) || preg_match( "@^($wp_rewrite->pagination_base)?\d+$@", $slug )  || apply_filters( 'wp_unique_post_slug_is_bad_hierarchical_slug', false, $slug, $post_type, $post_parent ) ) {
                $suffix = 2;
                do {
                    $alt_post_name = substr( $slug, 0, 200 - ( strlen( $suffix ) + 1 ) ) . "-$suffix";
                    // HACK
                    $post_name_check = $wpdb->get_var( $wpdb->prepare( $check_sql_andrea, $alt_post_name, $pt, $post_ID, $post_parent ) );
                    $suffix++;
                } while ( $post_name_check );
                $slug = $alt_post_name; 
                break;                          
            }
    }// END HACK

} 
```

请...如果有人知道此案的任何其他解决方案，或者更重要的是，如果有人知道任何会影响我找到的解决方案的不可预测的后果，请告诉我，我将非常感激！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T03:08:49.327

我已经搜索了对这个问题的其他参考（它也发生[在不同父类别](http://wordpress.org/support/topic/duplicate-child-category-slug-in-wp-23?replies=6#post-729671 "WP论坛")的子类别中），甚至标记[为未来版本的增强](http://core.trac.wordpress.org/ticket/18962 "允许不同内容的重复 slug")，在该票证中，我在 wp-includes/ post.xml 中找到了对函数**wp_unique_post_slug**的引用。 php。也许你应该看看它并找出解决当前 WP 不当行为的方法。

一个肮脏的解决方案可能是重新检查完整的 slug 输出，如果没有重复，修剪添加的数字后缀，但我是*阅读*WP 源代码的新手，以提供更多建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T21:16:53.990

只有一种解决方案。您的帖子需要一个唯一标识符（slug），并且不能在 url 中使用相同的名称。除非它们是分层的。您可以使用自定义帖子类型来做到这一点。利用 ：

```
 register_post_type(
            'customposttype', 
            array(
                'label' => '...',
                'description' => '...',
                'public' => true,
                'exclude_from_search' => false,
                'hierarchical' => true, ... 
```

然后，您将能够拥有具有不同自定义帖子类型的相同名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T22:17:43.837

请注意不要在您发送的两个问题上发布不同的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-24T15:33:59.260

一种解决方案可能是将您的`rewrite`规则更改为`with_front`false。例如，如果您设置

```
'rewrite => array( 
    'slug' => 'service',
    'with_front' => 'false'
) 
```

您应该能够在每个类别中使用相同的类别/分类法而不会发生冲突。

根据您所做的事情，您可能还必须为每个自定义帖子类型定义一个独特的分类法。

# c++ - OpenGL 显示两个数组

> ID：13535246
> 
> 赞同：0
> 
> 时间：2012-11-23T20:17:07.723
> 
> 标签：c++, arrays, opengl, polygon

我需要一些 c++/OpenGL 编码方面的帮助。我正在做的是一个多边形逼近算法。

我的代码首先从 .txt 文件中提取一组点，将它们全部存储在一个数组中，然后显示该数组。然后它获取这些点并对它们执行算法，并创建一个新的点数组。我不知道该怎么做，是如何让第二组点显示在与第一组相同的窗口上。我必须创建一个新的显示函数并调用它吗？或者也许修改我现在必须接受数组的基本显示功能？这是我的显示功能的代码：

```
void display(void){
    glClearColor(0,0,0,0);
    glClear(GL_COLOR_BUFFER_BIT);
    glColor3f(1,1,1);

    glBegin(GL_POINTS);
    for(int i=0; i<2000; i++)
        glVertex2i(pixel[i].x,pixel[i].y);
    glEnd();

    glFlush();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:36:16.667

您只需要绘制处理后的数组。考虑到您只想渲染结果点，就像在您的代码示例中一样，您可以使用：

```
void display(void){
  glClearColor(0,0,0,0);
  glClear(GL_COLOR_BUFFER_BIT);
  glColor3f(1,1,1);

  glBegin(GL_POINTS);
  for(int i=0; i<2000; i++)
    glVertex2i(pixel[i].x,pixel[i].y);
  // here goes the rendering of the new set of points.
  glColor3f(1,0,0); // change the color so we can see better the new points.
  for(int i=0; i<2000; i++)
    glVertex2i(result[i].x,result[i].y);
  glEnd();

  glFlush();
} 
```

变量`result`是带有处理结果的数组。

您不能修改该`display`函数，因为它由 OpenGL 调用并且它不知道您的数组。但是没有什么不利于您将代码拆分为您的函数调用的许多`display`函数。

希望能帮助到你。

# android - 每当应用程序访问联系人应用程序时如何获得通知

> ID：13535248
> 
> 赞同：1
> 
> 时间：2012-11-23T20:17:20.750
> 
> 标签：android

我希望每当任何系统或用户应用程序访问系统联系人应用程序时，我的应用程序都会以某种方式得到通知。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:21:48.147

抱歉，这在普通的 SDK 应用程序中是不可能的。任何应用程序都可以根据需要访问联系人`ContentProvider`（假设他们有权限），并且您的应用程序无法发现这一点。

欢迎您创建一个包含您所需功能的自定义 Android 分支，并将其安装在您能够使用的任何设备上。

# javascript - 避免内存泄漏 winjs EventListeners

> ID：13535251
> 
> 赞同：3
> 
> 时间：2012-11-23T20:17:29.753
> 
> 标签：javascript, memory-leaks, windows-8, winjs

我想知道是否将事件侦听器添加到按钮，是否必须将其删除`unload`？按“后退”按钮会自动删除我不需要担心内存泄漏的所有当前页面元素吗？

```
(function () {
"use strict";
ui.Pages.define("/pages/registraton/registraton.html",{
    ready: function (element, options) {
        document.getElementById("submitRegister").addEventListener(
            "click", postRegistration , false);

    },
    unload: function () {
        document.getElementById("submitRegister").removeEventListener(
       "click", postRegistration, false);
    }
});... 
```

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T22:35:31.237

您需要担心 WinJS.Navigation 命名空间促进的单页导航模型中的内存泄漏。

你建立的模型——你在哪里实现卸载——绝对是正确的方法。您想要获得的复杂程度和深度取决于您的应用程序的复杂性。具体来说，如果您有多个控件，并且带有多个手动事件处理程序，您可能希望创建一组帮助程序，以便您能够一次性清理这些处理程序。这可能就像将元素、事件名称和处理程序实例推入一个数组一样简单，当离开该页面并从 DOM 中销毁/删除它时，您只需烧毁该数组即可删除需要清理的项目。

请注意，您只需要显式清理处理程序和 DOM 对象具有不同生命周期的情况。如果它们一起消失——例如，附加到页面中 DOM 元素的控件，那么您不必*显*式清理所有内容。垃圾收集器最终会清理它。如果你是一个内存特别重的应用程序，你*可能*会通过更积极地删除监听器来获得一些胜利。

还有一些其他的事情要记住：

*   这也适用于实现 addEventListener 契约的纯 javascript 对象，即列表视图
*   不要使用 attachEvent - 由于它是旧的实现，它会导致牢不可破的循环。*它实际上是一个已弃用的 API，因此无论如何*都不应该使用
**   当您提供绑定 this 指针的事件处理程序时，当您尝试解除绑定时要小心。例如*

 *例子：

```
var element = getInterestingElement();
element.addEventListener("click", this.handleClick.bind(this)); 
```

如果你试图分离事件，你就迷路了——来自 .bind() 的返回值在风中丢失了，你永远无法解开它：

```
var element = getInterestingElement();
element.removeEventListener("click", this.handleClick); // Won't remove the listener
element.removeEventListener("click", this.handleClick.bind(this)); // Won't remove, since it's a different function object 
```

最好的解决方案是`handleClick`在附加猴子补丁之前对其进行修补： this.handleClick = this.handleClick.bind(this);

或将其存放起来以备后用：

```
this.handlerClickToCleanup = this.handleClick.bind(this);
element.addEventListener("click", this.handleClickToCleanup); 
```*

# c++ - 为什么 C++ 不会打印 char 的内存地址，但会打印 int 或 bool？

> ID：13535254
> 
> 赞同：12
> 
> 时间：2012-11-23T20:17:36.727
> 
> 标签：c++, char, memory-address

> **可能重复：**
> [为什么不显示字符数据的地址？](https://stackoverflow.com/questions/4860788/why-is-address-of-char-data-not-displayed)

这是代码和输出：

```
int main(int argc, char** argv) {

    bool a;
    bool b;

    cout<<"Address of a:"<<&a<<endl;
    cout<<"Address of b:"<<&b<<endl;

    int c;
    int d;

    cout<<"Address of c:"<<&c<<endl;
    cout<<"Address of d:"<<&d<<endl;

    char e;    
    cout<<"Address of e:"<<&e<<endl;

    return 0;
} 
```

输出：

a地址：0x28ac67

b的地址：0x28ac66

c的地址：0x28ac60

d地址：0x28ac5c

e地址：

我的问题是：char的内存地址在哪里？为什么不打印？

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-23T20:19:48.370

C/C++ 中的字符串可以用 表示`char*`，类型与 相同`&e`。所以编译器认为你正在尝试打印一个字符串。如果要打印地址，可以转换为`void*`.

```
std::cout << static_cast<void *>(&e) << std::endl; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-23T20:20:05.640

我怀疑 的重载`char *`版本`ostream::operator<<`需要一个以 NUL 结尾的 C 字符串——而你只传递了一个字符的地址，所以你在这里拥有的是未定义的行为。您应该将地址转换为 a`void *`以使其打印您期望的内容：

```
cout<<"Address of e:"<< static_cast<void *>(&e) <<endl; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T20:29:03.583

看看这个之前问过的问题：[为什么不显示字符数据的地址？](https://stackoverflow.com/questions/4860788/why-is-address-of-char-data-not-displayed)

此外，如果您使用`printf("Address of e: %p \n", &e);`它也可以。

# c# - 如何将 int 值强制转换为等价的泛型类型参数，例如 char？

> ID：13535255
> 
> 赞同：9
> 
> 时间：2012-11-23T20:17:48.663
> 
> 标签：c#, generics, casting, linked-list, type-conversion

我是泛型的新手，我在实现一个小的自我练习代码时遇到了一些麻烦。

我正在创建一个链接列表。我希望它存储 char 或 int 值。所以我决定使实现通用：

```
public class Node<T> where T : struct, IConvertible
{
    public Node<T> next = null;
    public T data = default(T);

    public Node(T value) { this.data = value; }
} 
```

我有一个方法通过生成[33,127)范围内的随机值来创建链表，将值转换为T指定的类型（例如，如果生成86并且T是Char，那么要存储在链表中的值节点将是“V”；如果 T 是 Int32，则值将简单地为 86）。我面临两个问题：

```
 static Node<IConvertible> CreateList<T>(int len) where T : struct, IConvertible
    {
        Random r = new Random((int)DateTime.Now.Ticks);
        T value = (T)r.Next(33, 127);       // Problem #1

        Node<T> head = new Node<T>(value);
        Node<T> n = head;

        for (int i = 1; i < len; i++)
        {
            n.next = new Node<T>(value);
            n = n.next;
        }
        return head;  // Problem #2
    } 
```

这些是问题：

1) 通常这是可能的：(int) value = (char) r.Next(33, 127)。为什么如果 T 是 Char 类型，编译器会说“无法将类型 'int' 转换为 'T'”，即使我指定了“where T : struct, IConvertible”？

2）“不能将类型' `LinkedList.Node<T>`'隐式转换为' `LinkedList.Node<System.IConvertible>`'”如果T是Int32或Char并且它们都实现了IConvertible，那么转换或转换的方法`Node<Int32>`是`Node<Char>`什么`Node<IConvertible>`？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T20:37:24.027

问题是**T**可以是任何结构，例如 Guid、SByte... 或*custom-new-one*。虽然我们可以确定**T**是`struct`and `IConvertible`，但不一定要显式转换运算符

```
public static explicit operator AnyStruct(int i) 
```

`Node<System.IConvertible>`铸造到的第二个问题`Node<System.IConvertible>`是通常的。任何列表`List<T>`都不能转换为`List<System.IConvertible>`.

我们需要的是 interface: 上的协方差声明`INode<out T>`。然后`INode<T>`可以转换为`INode<System.IConvertible>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T20:36:20.423

您使用`Random`来生成一些数据与使用泛型有些不一致。我会像这样将两者分开：

```
static Node<T> CreateList<T>(int len, Func<T> dataProvider) where T : struct, IConvertible
{   
    Node<T> head = new Node<T>(dataProvider());
    Node<T> n = head;

    for (int i = 1; i < len; i++)
    {
        n.next = new Node<T>(dataProvider());
        n = n.next;
    }
    return head;
} 
```

调用代码：

```
Random r = new Random();
Node<char> list = CreateList(10, () => (char)r.Next(33, 127)); 
```

第二个问题是`Node<IConvertible>`您`struct`对`Node<T>`. 只需返回一个`Node<T>`. 即使您确实`struct`从 中删除了约束`Node<T>`，也无法返回 a `Node<IConvertible>`，因为泛型类不支持方差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T20:24:43.627

利用

```
T value = (T)Convert.ChangeType(r.Next(33, 127), typeof(T)); 
```

# java - 是否有保证在自定义肥皂处理程序中获取操作名称的方法？

> ID：13535277
> 
> 赞同：8
> 
> 时间：2012-11-23T20:20:54.597
> 
> 标签：java, web-services, soap, jax-ws, soaphandler

我有一个用于传入消息的自定义 SOAP 消息处理程序，这些消息将根据调用的操作运行不同的代码。我第一次尝试获取操作名称看起来像这样：

```
public boolean handleMessage(SOAPMessageContext context)
{
    String op = context.get(MessageContext.WSDL_OPERATION);
    ... 
```

这失败了，因为该属性`MessageContext.WSDL_OPERATION`似乎从未被设置。然后我尝试使用这个：

```
public boolean handleMessage(SOAPMessageContext context)
{
    Map<?, ?> headers = (Map<?, ?>)context.get(MessageContext.HTTP_REQUEST_HEADERS);    
    ArrayList<String> SOAPAction = ((ArrayList<String>) headers.get("SOAPAction"));
    String opName = SOAPAction.get(0);
    //opName will be formatted like "urn#myOperation", so the prefix must be removed
    opName = ((opName.replace("\"","").split("#"))[1]); 
```

这可行，但我担心可能存在未设置标头属性“SOAPAction”（或什至不存在）或不具有我期望的值的情况。我也有点担心，因为我不知道这是否是获取操作名称的“官方”方式——我是通过查看`context`调试器中的内容来弄清楚的。

在处理传入的 SOAP 消息时，有没有更好的方法来获取操作名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-21T19:03:42.657

我参加这个聚会很晚了，但在过去的一周里我试着这样做了。接受的答案实际上并不适用于每个 JAX-WS 实现（至少不是我尝试过的）。

我一直在尝试在我的开发环境中的独立 Metro 上进行这项工作，但也在真实环境中使用与 WebSphere 7 捆绑的 Axis2。

我在 Metro 上发现了以下作品：

```
String operationName = body.getChildNodes().item(0).getLocalName(); 
```

以及以下在 Axis2 上的工作：

```
String operationName = body.getChildNodes().item(1).getLocalName(); 
```

正在发生的事情是 Axis2 将类型节点`Text`作为第一个孩子插入到 Body 中，但 Metro 没有。此文本节点返回一个空本地名称。我的解决方案是执行以下操作：

```
NodeList nodes = body.getChildNodes();

// -- Loop over the nodes in the body.
for (int i=0; i<nodes.getLength(); i++) {
  Node item = nodes.item(i);

  // -- The first node of type SOAPBodyElement will be
  // -- what we're after.
  if (item instanceof SOAPBodyElement) {
    return item.getLocalName();
  }
} 
```

如评论中所述，我们实际上是在寻找 type 的第一个节点`SOAPBodyElement`。希望这将帮助其他任何人在未来看到这个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T16:42:44.913

您可以调用`body.getElementName().getLocalName()`以检索消息有效负载的 SOAP 正文元素的名称。它有点冗长和手动，但它有效。您的处理程序中可能有以下内容

```
if ((boolean) context.get(MessageContext.MESSAGE_INBOUND_PROPERTY){ //for requests only
            SOAPEnvelope msg = context.getMessage().getSOAPPart().getEnvelope(); //get the SOAP Message envelope
                SOAPBody body = msg.getBody();
            String operationName = body.getChildNodes().item(1).getLocalName();
} 
```

上述代码的结果保证带有您的 WSDL 中指定的操作名称

编辑：此解决方案仅基于将 Web 服务实现为文档/文字包装或 RPC/文字的条件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-16T17:22:47.243

SOAPMessageContext 包含此信息，可以像这样超级轻松地检索：

```
public boolean handleMessage(SOAPMessageContext msgContext) {
    QName svcn = (QName) smc.get(SOAPMessageContext.WSDL_SERVICE);      
    QName opn = (QName) smc.get(SOAPMessageContext.WSDL_OPERATION);
    System.out.prinln("WSDL Service="+ svcn.getLocalPart());
    System.out.prinln("WSDL Operation="+ opn.getLocalPart());

    return true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-12T12:04:12.080

如果有人搜索“优雅”的方式来获得所需的属性，请使用

```
 for(Map.Entry e : soapMessageContext.entrySet()){
            log.info("entry:"+ e.getKey() + " = " + e.getValue());
    } 
```

然后决定你需要什么信息并得到它！

```
soapMessageContext.get(YOUR_DESIRED_KEY); 
```

# android - 将视图添加到布局

> ID：13535278
> 
> 赞同：0
> 
> 时间：2012-11-23T20:21:03.663
> 
> 标签：android, layout

我已经创建了扩展 View 的类，我正在尝试在布局中进行 layout.addView(somthing)，没有例外。

布局

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content" >
</RelativeLayout> 
```

班级

```
public class Navigator extends View {
Context context;
RelativeLayout layout = (RelativeLayout) findViewById(R.layout.navigator);

public Navigator(Context context) {
    super(context);
    this.context = context;
}

TextView tab1 = new TextView(context);
tab1.setText("blah");
PROBLEM-> layout.addView(tab1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:31:57.377

您是否将扩展视图添加到活动？

因为您正在修改您的视图，但我看不到您将“导航器”视图附加到哪里。

另一件事是您在 XML 上声明的 RelativeLayout 没有 ID，因此您将永远找不到具有 R.id.navigator id 的 RelativeLayout。

# ms-word - Inno Setup Microsoft Word 模板子目录安装

> ID：13535279
> 
> 赞同：3
> 
> 时间：2012-11-23T20:21:11.887
> 
> 标签：ms-word, ms-office, inno-setup

我是小型企业管理局的程序员。SBA 创建并向借款人和贷款人免费提供一些程序。下面的安装代码是我们为最终用户机器提供的免费程序之一。

我花了一周的时间寻找解决问题的方法，然后决定我需要学习如何编程我需要的东西。我是 Pascal 和 Inno Setup 的新手。我窃取了代码并测试了这个站点和其他站点中的所有示例。感谢所有的帮助。我一遍又一遍地修改和测试。下面是我的代码。

注意：我提供这个是希望它对其他人有用，但它并没有按计划工作。希望在其他人的帮助下发布一个工作版本。我提供了完整的代码来帮助其他人理解我努力学习的内容。;-)

***问题***：安装工作完美，除了 [代码] 部分重复。在到达 [Files] 部分中的 {code:GetInstallDirectory} 调用***之前***，它至少运行一次

它运行一次 Word 14 的 If 语句，然后运行一次 [Files] 部分。我的消息“MsgBox ('1\. Setup...”出现了两次。以前它出现了 3 或 4 次，但我做了一个我不记得的更改，现在它只运行了两次。

谁能帮我找到问题？也许它与 If,Then,Else 语句有关。再一次，它可能是语句的顺序。提前致谢。

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!
; Script written by Daniel H. Smith, Lead Programmer/Analyst, Base Technologies
;                   Washington, DC

#define MyAppName "IDAP mini-Wizard"
#define MyAppVersion "v 2013"
#define MyAppPublisher "Small Business Administration"
#define MyAppURL "http://www.sba.gov/"
#define MyAppExeName "IDAPv2013.exe"
#define MyAppCopyright "(c) 2013-2014"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{459E8784-C110-4348-A294-229C58CB00D2}
AppName={#MyAppPublisher}'s {#MyAppName} {#MyAppVersion}
AppVersion={#MyAppVersion}
AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
AppCopyright={#MyAppCopyright}
DefaultDirName={app}
CreateAppDir=false
OutputDir=C:\Users\Dan\Documents\IDAP Development\Setup
OutputBaseFilename=IDAPv2013Setup
SetupIconFile=C:\Users\Dan\Documents\My Shapes\_private\folder.ico
Compression=lzma
SolidCompression=true
UsePreviousGroup=false
UsePreviousAppDir=false
InfoBeforeFile=C:\Users\Dan\Documents\IDAP Development\Setup\IDAPInfo.txt
WizardImageFile=compiler:WizModernImage-IS.bmp
WizardSmallImageFile=compiler:WizModernSmallImage-IS.bmp
InfoAfterFile=C:\Users\Dan\Documents\IDAP Development\Setup\IDAPWord.txt
AppContact=Auth-IDAP@sba.gov
PrivilegesRequired=none
RestartIfNeededByRun=False
VersionInfoVersion=1.0
VersionInfoCompany={#MyAppPublisher}
VersionInfoCopyright={#MyAppCopyright}

[Languages]
Name: english; MessagesFile: compiler:Default.isl

[Files]
Source: "C:\Users\Dan\Documents\IDAP Development\IDAP 2013 Boilerplate_V10.Clean.pdf"; DestDir: "{userdocs}\IDAP Documents"; Flags: ignoreversion
Source: "C:\Users\Dan\Documents\IDAP Development\IDAP Borrower Certification (9-25-12)(initials) final.docx"; DestDir: "{userdocs}\IDAP Documents"; Flags: ignoreversion
Source: "C:\Users\Dan\Documents\IDAP Development\IDAP Loan Note (Draft July 25).docx"; DestDir: "{userdocs}\IDAP Documents"; Flags: ignoreversion
Source: "C:\Users\Dan\AppData\Roaming\Microsoft\Templates\IDAPLoan2013.dotm"; DestDir: "{code:GetInstallDirectory}"; DestName: "IDAPWizard2013v111.dotm"; Flags: confirmoverwrite

[Messages]
// define wizard title and tray status msg
// both are normally defined in innosetup's default.isl (install folder)
SetupAppTitle = Install {#MyAppName} {#MyAppVersion}
SetupWindowTitle = Install {#MyAppName} {#MyAppVersion} -- {#MyAppPublisher}

[Run]
//Opens Word if User leaves checkbox checked on Finish
  Filename: "{code:GetWordDirectory}"; Flags: postinstall; Description: "Open Word after Finish"; StatusMsg: "Opening Word ..."

[Code]
function GetWordDirectory(S: string) : String;
Begin
  IF RegKeyExists(HKCU, 'Software\Microsoft\Office\14.0\Common\General') THEN BEGIN
    Result := ExpandConstant('{pf32}\Microsoft Office\Office14\winword.exe');
  end Else begin
    Result := ExpandConstant('{pf32}\Microsoft Office\Office12\winword.exe');
  end;
End;
//--------
function GetInstallDirectory(S: String) : String;
var installDirectory : String;
    Version: TWindowsVersion;
Begin
//Word 14 Start
IF RegKeyExists(HKCU, 'Software\Microsoft\Office\14.0\Common\General') THEN BEGIN
    GetWindowsVersionEx(Version);
    if RegQueryStringValue(HKCU, 'Software\Microsoft\Office\14.0\Common\General', 'UserTemplates', installDirectory) then begin
    //Successfully read the registry value
        If (Version.Major = 6) and (Version.Minor = 1) and (Version.ProductType = VER_NT_WORKSTATION) //Windows 7
          then begin
            MsgBox ('1\. Setup is installing to Word User Templates directory for:      '+#10+#13+#10+#13+'---> Word 2010 and Windows 7 <---', mbInformation, MB_OK);
            Result := installDirectory
          end else begin //begin c2
        //FAILED READING USERTEMPLATES DIRECTORY
        //Windows <= 6.0 Not Windows 7 and above
        If (Version.Major = 6) and (Version.Minor = 0) and (Version.ProductType = VER_NT_WORKSTATION)  //Windows Vista or XP
          then begin
            MsgBox ('2\. Setup is installing to Word default template directory for:      '+#10+#13+#10+#13+'---> Word 2010 and Windows 7 <---', mbInformation, MB_OK);
            Result := ExpandConstant('C:\Users\{username}\AppData\Roaming\Microsoft\Templates');
          end else
            MsgBox ('3\. Setup is installing to Word default template directory for:      '+#10+#13+#10+#13+'---> Word 2010 and Windows Vista/XP <---', mbInformation, MB_OK);
            Result := ExpandConstant('C:\Documents and Settings\{username}\Application Data\Microsoft\Templates');
        end;
    end;
//End Word 14
//Start Word 12
END ELSE IF RegKeyExists(HKCU, 'Software\Microsoft\Office\12.0\Common\General') THEN     BEGIN
    GetWindowsVersionEx(Version);
    if RegQueryStringValue(HKCU, 'Software\Microsoft\Office\12.0\Common\General', 'UserTemplates', installDirectory) then begin  
//    Successfully read the value
      If (Version.Major = 6) and (Version.Minor = 0) and (Version.ProductType = VER_NT_WORKSTATION)  //Windows 7
      then begin //c3
        MsgBox ('4\. Setup is installing to Word User Templates directory for:      '+#10+#13+#10+#13+'---> Word 2007 and Windows 7 <---', mbInformation, MB_OK);
        Result := installDirectory
      end else begin //begin c4
      //FAILED READING VALUE
      If (Version.Major = 6) and (Version.Minor = 0) and (Version.ProductType = VER_NT_WORKSTATION)  //Windows Vista/XP
      then begin
        MsgBox ('5\. Setup is installing to Word User Templates directory for:      '+#10+#13+#10+#13+'---> Word 2007 and Windows 7 <---', mbInformation, MB_OK);
        Result := ExpandConstant('C:\Users\{username}\AppData\Roaming\Microsoft\Templates');
      end else
        MsgBox ('6\. Setup is installing to Word default templates directory for:      '+#10+#13+#10+#13+'---> Word 2007 and Windows XP or Vista <---', mbInformation, MB_OK);
        Result := ExpandConstant('C:\Documents and Settings\{username}\Application Data\Microsoft\Templates');
      end;
    end;
END;
//End Word 12
end;  //Function GetInstallDirectory end
//End All
//------------------------------------------------------------------------------
//Following are reference notes
//How to code a if-elseif-else
//  if condition then begin
    // ...
//  end else if condition then begin
    // ...
//  end else begin
    // ...
//  end;
//+------------+------------+-------+-------+---------+
//| Version    | PlatformId | Major | Minor | Release |
//+------------+------------+-------+-------+---------+
//| Win32s     |      0     |   ?   |   ?   |         |
//| Win95      |      1     |   4   |   0   | 1995 08 |
//| Win98      |      1     |   4   |  10   | 1998 06 |
//| WinME      |      1     |   4   |  90   | 2000 09 |
//| WinNT351   |      2     |   3   |  51   | 1995 04 |
//| WinNT4     |      2     |   4   |   0   | 1996 07 |
//| Win2000    |      2     |   5   |   0   | 2000 02 |
//| WinXP      |      2     |   5   |   1   | 2001 10 |
//| Win2003    |      2     |   5   |   2   | 2003 04 |
//| WinXPx64   |      2     |   5   |   2   | 2003 03 |
//| WinCE      |      3     |   ?   |   ?   |         |
//| Vista      |      2     |   6   |   0   | 2007 01 |
//| Win2008    |      2     |   6   |   0   | 2008 02 |
//| Win2008R2  |      2     |   6   |   1   | 2009 10 |
//| Win7       |      2     |   6   |   1   | 2009 10 |
//+------------+------------+-------+-------+---------+
//Word Templates default subdirectory before Windows 7
//C:\Documents and Settings\"user name"\Application Data\Microsoft\Templates\  
//Word Templates default subdirectory after Windows 7
//C:\Users\"username"\AppData\Roaming\Microsoft\Templates\
//
//For MS Word WinWord.Exe location and registry entry
//HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\Word\Options
//C:\Program Files (x86)\Microsoft Office\Office14\ -- For Word 14
//MS Word 14 UserTemplates registry
//HKCU, 'Software\Microsoft\Office\14.0\Common\General', 'UserTemplates'
//MS Word 12 UserTemplates registry
//HKCU, 'Software\Microsoft\Office\12.0\Common\General', 'UserTemplates'
//------------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:16:04.163

***更新：***

没错，从`DestDir`参数调用的代码函数被调用了两次。第一次是在准备安装时，第二次是在处理文件时。我不知道原因（它在源代码中很深），但您实际上并不需要关心这一点。该参数函数过去只是用于获取目标目录，而不是用于任何类型的用户交互，因此您不必担心它会被调用两次。

尽管我已经对您的代码进行了审查。请注意，它**未经测试**是从下面列出的资源中编写的。需要指出的一点：

*   使用常量，更容易维护一个常量而不是脚本中的许多地方
*   不要依赖于所有用户都会在默认的 Program Files 目录中安装 Office
*   默认模板目录在用户的应用程序数据中，在 InnoSetup 中，您可以用`{userappdata}`常量替换它，在您的情况下可以安全使用，因为您正在使用 运行设置`PrivilegesRequired=none`，因此强制管理员用户差异没有风险
*   如果您的用户必须至少安装一个 Word 版本，请检查在您显示向导表单之前，请参阅`InitializeSetup`下面的事件功能

```
...

[Run]
; the Check parameter here use only when you remove the InitializeSetup event
; function (see below), otherwise it's useless because the setup won't even start 
; when there's not at least Word 2007 or 2010 version installed
Filename: "{code:GetLatestWordAppPath}"; Flags: postinstall; Description: "Open Word after Finish"; StatusMsg: "Opening Word ..."; Check: IsWordInstalled('12.0') or IsWordInstalled('14.0');

[Code]
// better for maintenance is to use constants
const  
  PathDefaultUserTemplates = '{userappdata}\Microsoft\Templates';
  RegKeyOfficeTemplatesPath = 'SOFTWARE\Microsoft\Office\%s\Common\General';
  RegKeyWordInstallRootPath = 'SOFTWARE\Microsoft\Office\%s\Word\InstallRoot';

// helper function for checking if the Word version specified by the input parameter
// is installed or not; inspired by https://stackoverflow.com/a/3267832/960757
function IsWordInstalled(const Version: string): Boolean;
begin
  Result := RegValueExists(HKEY_LOCAL_MACHINE, 
    Format(RegKeyWordInstallRootPath, [Version]), 'Path');
end;

// this is used for the application path for the check box from the [Run] section
// you shouldn't rely on that everyone installs Office to Program Files directory
function GetLatestWordAppPath(S: string): string;
begin
  Result := '';
  if not RegQueryStringValue(HKEY_LOCAL_MACHINE, 
    Format(RegKeyWordInstallRootPath, ['14.0']), 'Path', Result) 
  then
    RegQueryStringValue(HKEY_LOCAL_MACHINE, 
      Format(RegKeyWordInstallRootPath, ['12.0']), 'Path', Result);
end;

// helper function for getting the Office user templates path (if available)
function GetUserTemplatesPath(const Version: string; var Path: string): Boolean;
begin
  Result := RegQueryStringValue(HKEY_CURRENT_USER, 
    Format(RegKeyOfficeTemplatesPath, [Version]), 'UserTemplates', Path);
end;

// function returning target installation directory
function GetInstallDirectory(S: string): string;
var 
  InstallDirectory: string;
begin
  // initialize the Result first
  Result := '';
  // check if Word 2010 application is installed and if so, then...
  if IsWordInstalled('14.0') then
  begin
    // try to get the Office 2010 user templates location from registry, if succeed then...
    if GetUserTemplatesPath('14.0', InstallDirectory) then 
    begin
      Result := InstallDirectory;
      MsgBox('Office 2010 user templates directory was found in registry!' + #10#13 + #10#13 +
        Result, mbInformation, MB_OK);
    end
    else
    // the Office 2010 user templates location was not found in registry, so...
    begin
      // you're running your setup with PrivilegesRequired=none, so you can safely use {userappdata}
      // constant with no risk of getting different user path (forced administrator)
      Result := ExpandConstant(PathDefaultUserTemplates);
      MsgBox('Office 2010 user templates directory was not found in registry!' + #10#13 + #10#13 +
        Result, mbInformation, MB_OK);
    end;
  end
  else
  // Word 2010 was not found, check for Word 2007 and if it's found, then...
  if IsWordInstalled('12.0') then
  begin
    // try to get the Office 2007 user templates location from registry, if succeed then...
    if GetUserTemplatesPath('12.0', InstallDirectory) then 
    begin
      Result := InstallDirectory;
      MsgBox('Office 2007 user templates directory was found in registry!' + #10#13 + #10#13 +
        Result, mbInformation, MB_OK);
    end
    else
    // the Office 2007 user templates location was not found in registry, so...
    begin
      // you're running your setup with PrivilegesRequired=none, so you can safely use {userappdata}
      // constant with no risk of getting different user path (forced administrator)
      Result := ExpandConstant(PathDefaultUserTemplates);
      MsgBox('Office 2007 user templates directory was not found in registry!' + #10#13 + #10#13 +
        Result, mbInformation, MB_OK);
    end;
  end;
end;

// this event function is for the first check before the wizard form is shown if you 
// return False to this event function, the setup will exit, what is here conditioned 
// by presence of Word 2007 or Word 2010
function InitializeSetup: Boolean;
begin
  Result := IsWordInstalled('12.0') or IsWordInstalled('14.0');
  if not Result then
    MsgBox('You don''t have installed neither Word 2007 nor Word 2010.' + #10#13 +
      'Setup will now exit.', mbCriticalError, MB_OK);
end; 
```

*   [`How to get path to the MS Office executables ?`](https://stackoverflow.com/a/3267832/960757)
*   [`How to manage templates in 2007 Office programs and in 2010 Office programs`](http://support.microsoft.com/kb/924460/en-us)

# scala - 将前 15 个元素从一个数组复制到另一个数组

> ID：13535282
> 
> 赞同：1
> 
> 时间：2012-11-23T20:21:26.890
> 
> 标签：scala

我正在尝试使用以下代码制作一个简单的前十五名：

```
 var top = Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
    val numbers = Array(4,5,8,1,33,23,45,6,11,10,87,46,43,66,55,98,78,71,19,20)

    def getTop() : Unit = {
        for ( i <- 0 to (numbers.length - 1)) {
            set(0, numbers(i), top)
        }

        top.map(x => println(x))
    }

    def set(index: Int, number: Int, top: Array[Int]) : Unit = {
        if (index <= top.length-1) {
            if(top(index) < number) {
                top(index) = number
            }
            else {
                set(index+1, number, top)
            }
        }
    } 
```

该函数应将数组中的前十五个元素复制`numbers`到 array `top`，但目前我只得到：

```
98,78,71,20,0,0,0,0,0,0,0,0,0,0,0 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:44:52.940

您的代码不起作用，因为您覆盖了以前设置的数字：

```
top = Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)  //initially  
top = Array(4,0,0,0,0,0,0,0,0,0,0,0,0,0,0)  // let's call set for '4'  
top = Array(5,0,0,0,0,0,0,0,0,0,0,0,0,0,0)  // now for 5 ...   
top = Array(8,0,0,0,0,0,0,0,0,0,0,0,0,0,0)  
top = Array(8,1,0,0,0,0,0,0,0,0,0,0,0,0,0)  
.... 
```

您可以使用要替换到正确位置的相邻放置编号来修复它：

```
val top = Array.fill(15)(0)
val numbers = Array(4,5,8,1,33,23,45,6,11,10,87,46,43,66,55,98,78,71,19,20)

def printTop() : Unit = {
    for (n <- numbers) {
        set(0, n, top)
    }

    top.foreach(x => println(x))
}

def set(index: Int, number: Int, top: Array[Int]) : Unit = {
    if (index < top.length) {
        val current = top(index)
        if(current < number) {
            top(index) = number
            set(index+1, current, top) // send replaced number down the street
        }
        else {
            set(index+1, number, top)
        }
    }
} 
```

# iphone - 无法运行 ipad 应用程序

> ID：13535283
> 
> 赞同：-7
> 
> 时间：2012-11-23T20:21:30.807
> 
> 标签：iphone, ios, ipad, ios-simulator

我需要一些帮助。我从 App-Store（免费）下载了一个 ipad 应用程序，现在我想在任何模拟器上运行该应用程序。我尝试了很多模拟器，但都失败了。即使我尝试在 MAC OS 系统中运行它，也说无法运行。

所以我需要指导在模拟器上运行以下应用程序。

应用程序名称是：“apsley 裁缝”

下载地址：[https ://itunes.apple.com/gb/app/apsley-tailors/id473679792?mt=8](https://itunes.apple.com/gb/app/apsley-tailors/id473679792?mt=8)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:24:08.837

您根本无法在模拟器上运行 App Store 应用程序。
iOS 模拟器适用于开发人员：您只能在模拟器上运行您拥有源代码的应用程序。App Store 二进制文件是为 ARM 编译的，而模拟器需要 Intel 版本。让它运行的唯一方法是为英特尔编译它，如果没有源代码，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:23:45.610

你不能在模拟器上运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:27:36.417

如果你有源代码，你可以在 Xcode 中打开它，编译它，然后在模拟器或注册到你的开发者帐户的设备上运行它。

但是，源代码没有`.app`扩展名——所以我怀疑这就是你所拥有的。

# sql - SQL DML 查询 - 需要帮助

> ID：13535291
> 
> 赞同：0
> 
> 时间：2012-11-23T20:22:28.717
> 
> 标签：sql, dml

我是 SQL 的初学者，我正在尝试创建一个查询。

我有这些表：

```
CREATE TABLE Hospital (
    hid INT PRIMARY KEY,
    name VARCHAR(127) UNIQUE,
    country VARCHAR(127),
    area INT
);
CREATE TABLE Doctor (
    ic INT PRIMARY KEY,
    name VARCHAR(127),
    date_of_birth INT,
);
CREATE TABLE Work (
    hid INT,
    ic INT,
    since INT,
    FOREIGN KEY (hid) REFERENCES Hospital (hid),
    FOREIGN KEY (ic) REFERENCES Doctor (ic),
    PRIMARY KEY (hid,ic)
 ); 
```

问题是：1980 年以后出生并在英国和西班牙工作的医生的姓名和身份证是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:27:12.563

您可以使用类似的东西：

```
select d.name
from doctor d
left join work w
  on d.ic = w.ic
left join hospital h
  on w.hid = h.id
where d.date_of_birth >= '1980-01-01'
  and h.country in ('England', 'Spain')
group by d.name
having count(distinct h.country) = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:30:37.313

试试这个：

```
SELECT d.name, d.ic
FROM doctor d
JOIN work w ON d.ic = i.ic
JOIN hospital h ON w.hid = h.hid
WHERE YEAR(d.date_of_birth) >= 1980
AND UPPER(h.country) IN ('ENGLAND', 'SPAIN'); 
```

我希望这已经足够了。

# c# - 尝试在 Windows 应用程序中附加自动命名的数据库

> ID：13535294
> 
> 赞同：-1
> 
> 时间：2012-11-23T20:22:37.437
> 
> 标签：c#, database, ado.net, enterprise-architect

当尝试在 C# 中创建 Enterprise Architect 插件时，在我完成代码并在 VS 2010 中运行它之后，我可以将记录添加到数据库或删除，但是当我使用同一个项目的插件项目时但是使用允许我访问 Enterprise Architect 事件的类库，我收到以下错误：

> *应用程序的组件中发生了未经处理的异常。如果您单击继续，应用程序将忽略此错误并尝试继续。*
> 
> *尝试为 C:\Program Files\Sparx Systems\EA\DataBase\DBMetric.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件或其位于 UNC 共享上。*

当我去的`C\...EA`时候没有数据库文件夹！

这是我的`app.config`文件

```
<configuration>
    <connectionStrings>
        <add name="WindowsFormsApplication19.Properties.Settings.DBMetricConnectionString" 
             connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\DataBase\DBMetric.mdf;Integrated Security=True;User Instance=True" 
             providerName="System.Data.SqlClient"/>
    </connectionStrings>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    </startup>
</configuration> 
```

这是我的连接字符串代码：

```
public static string myConnectionString = ConfigurationManager.ConnectionStrings["WindowsFormsApplication19.Properties.Settings.DBMetricConnectionString"].ConnectionString; 
```

有任何想法吗？

提前致谢

这是类库

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using EA;
using System.Windows.Forms;
using WindowsFormsApplication19;

namespace ClassLib
{
    public class Class
    {
        // define menu constants
        const string menuHeader = "-&Metrics";
        const string menuOpen = "&Open";

        // remember if we have to say hello or goodbye
        private bool OPEN_TOOL = true;

        ///
        /// Called Before EA starts to check Add-In Exists
        /// Nothing is done here.
        /// This operation needs to exists for the addin to work
        ///
        /// <param name="Repository" />the EA repository
        /// a string
        public String EA_Connect(EA.Repository Repository)
        {
            //No special processing required.
            return "a string";
        }

        ///
        /// Called when user Clicks Add-Ins Menu item from within EA.
        /// Populates the Menu with our desired selections.
        /// Location can be "TreeView" "MainMenu" or "Diagram".
        ///
        /// <param name="Repository" />the repository
        /// <param name="Location" />the location of the menu
        /// <param name="MenuName" />the name of the menu
        ///
        public object EA_GetMenuItems(EA.Repository Repository, string Location, string MenuName)
        {
            switch (MenuName)
            {
                // defines the top level menu option
                case "":
                    return menuHeader;
                // defines the submenu options
                case menuHeader:

                    string[] subMenus = { menuOpen };//, menuGoodbye// };
                    return subMenus;
            }

            return "";
        }

        ///
        /// returns true if a project is currently opened
        ///
        /// <param name="Repository" />the repository
        /// true if a project is opened in EA
        bool IsProjectOpen(EA.Repository Repository)
        {
            try
            {
                EA.Collection c = Repository.Models;
                return true;
            }
            catch
            {
                return false;
            }
        }

        ///
        /// Called once Menu has been opened to see what menu items should active.
        ///
        /// <param name="Repository" />the repository
        /// <param name="Location" />the location of the menu
        /// <param name="MenuName" />the name of the menu
        /// <param name="ItemName" />the name of the menu item
        /// <param name="IsEnabled" />boolean indicating whethe the menu item is enabled
        /// <param name="IsChecked" />boolean indicating whether the menu is checked
        public void EA_GetMenuState(EA.Repository Repository, string Location, string MenuName, string ItemName, ref bool IsEnabled, ref bool IsChecked)
        {
            if (IsProjectOpen(Repository))
            {
                switch (ItemName)
                {
                    // define the state of the hello menu option
                    case menuOpen:
                        IsEnabled = OPEN_TOOL;
                        break;
                    // define the state of the goodbye menu option
                    //case menuGoodbye:
                    //    IsEnabled = !OPEN_TOOL;
                    //    break;
                    // there shouldn't be any other, but just in case disable it.
                    default:
                        IsEnabled = false;
                        break;
                }
            }
            else
            {
                // If no open project, disable all menu options
                IsEnabled = false;
            }
        }

        ///
        /// Called when user makes a selection in the menu.
        /// This is your main exit point to the rest of your Add-in
        ///
        /// <param name="Repository" />the repository
        /// <param name="Location" />the location of the menu
        /// <param name="MenuName" />the name of the menu
        /// <param name="ItemName" />the name of the selected menu item
        public void EA_MenuClick(EA.Repository Repository, string Location, string MenuName, string ItemName)
        {
            switch (ItemName)
            {
                // user has clicked the menuOpen menu option
                case menuOpen:
                    this.sayHello();
                    break;
                    // user has clicked the menuGoodbye menu option
                    //case menuGoodbye:
                    //    this.sayGoodbye();
                    //    break;
            }
        }

        ///
        /// Say Hello to the world
        ///
        private void sayHello()
        {
            //MessageBox.Show("MS.C Project");
            Form1.frmMain.ShowDialog();
            this.OPEN_TOOL = true;
        }

        ///
        /// Say Goodbye to the world
        ///
        //private void sayGoodbye()
        //{
        //    MessageBox.Show("MS.C Project Close");
        //    Form1.frm1.Hide();
        //    this.OPEN_TOOL = true;
        //}

        ///
        /// EA calls this operation when it exists. Can be used to do some cleanup work.
        ///
        public void EA_Disconnect()
        {
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:27:03.227

问题是安全性 - 在当前的 Windows 版本中，您没有`C:\Program Files\`. 你需要设置你的 EA-AddIn 为数据库使用不同的文件夹——例如[`SpecialFolder.ApplicationData`](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)是一个好地方。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-18T07:59:59.400

我一直在尝试解决这个问题，我设法做到了：

1) 键入 RUN 以搜索 Windows 开始按钮。2) 在运行中键入 %appdata% 3) 打开本地文件夹中的 Temp Windows 文件找到您的系统正在寻找的路径 egLocal\Apps\2.0\Data\HXPRLJDX.YRE\YQK631H5.H15 4) 复制并粘贴您的数据库那里

运行您的程序并查看结果。它对我有用。

# asp.net-mvc-3 - 允许用户更改 ASP.NET MVC 3 表单上的私有信息

> ID：13535296
> 
> 赞同：0
> 
> 时间：2012-11-23T20:22:55.007
> 
> 标签：asp.net-mvc-3

在 ASP.NET MVC 3 表单上，我们有一个字段，其中包含我们从不向用户显示的私人帐号，并且我们不会将它存储在我们的系统中（我们将它单向传递给后端系统）。我们只知道它是否以前提供过。用户有时可能会选择修改该值，所以我们显示如下：

```
@Html.PasswordFor(x => x.Private, new { id = "txtPrivate" }) 
```

然后，如果我们收到该字段为空，我们知道用户没有更改任何内容。它工作正常，但对用户来说有点混乱，因为他在 UI 上看到该字段为空。理想情况下，我们希望显示几个点以向用户表明之前输入过的内容，并且可以更改。最好的方法是什么？

我认为简单的解决方法是将五个字母的“魔术”值发送到 UI，然后比较帖子上的模型，但这显然不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:31:27.283

奇怪的要求需要奇怪的解决方案，如果你会用`placeholder`这个怎么办：

```
@Html.PasswordFor(x => x.Private, new { id = "txtPrivate", placeholder="*******" }) 
```

据我所知，它的值不会提交给服务器。

除了血腥的 IE 之外，每个人都支持它，但是有解决方法。

# html - img src 标签不起作用

> ID：13535297
> 
> 赞同：0
> 
> 时间：2012-11-23T20:22:55.143
> 
> 标签：html

我已经上传了我的网站，但是 img src 标签不起作用，因为图片不可见，我该如何纠正它。在 img src 标签中有该图片在我的本地机器上的路径。

> img src="D:\Office\Website\舞池实验\pages\video\HTMLContentScroller\assets\Corporate.jpg"

这是我的道路

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:26:17.257

当您在网络服务器上上传网站时，您的 img 源 ,`src`应引用公开可用的图像。

将本地计算机上的图像上传到您的网络服务器，然后将其更改`src`为引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:27:50.310

您的网站无法访问您的本地机器（因为它托管在另一台机器 - 服务器上），因此它无法找到它正在寻找的图像文件。

您必须将图像文件上传到服务器并在那里提供路径。

假设如果您将图像文件上传到根文件夹中，则 src 可以简单地是“filename.extension”。只需相应地检查放置图像文件的文件路径即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T20:40:39.543

引用页面上的图像时应该使用相对路径。假设您的页面文件位于“Office\Website\”文件夹中，您的图像标签将是：

```
<img src="Dance floor experiment\pages\video\HTMLContentScroller\assets\Corporate.jpg"> 
```

# android - Android - 如何验证应用内购买？

> ID：13535299
> 
> 赞同：1
> 
> 时间：2012-11-23T20:23:00.470
> 
> 标签：android

[我正在尝试按照本教程http://blog.blundell-apps.com/simple-inapp-billing-payment/](http://blog.blundell-apps.com/simple-inapp-billing-payment/)了解应用内购买

到目前为止，这是我的代码：

```
public class main extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("BillingService", "Starting");
        setContentView(R.layout.main);

        startService(new Intent(this, BillingService.class));
        BillingHelper.setCompletedHandler(mTransactionHandler);

    }

    ////////////////////////////////

    public Handler mTransactionHandler = new Handler(){
            public void handleMessage(android.os.Message msg) {

                Log.e("IN APP", "Transaction complete");
                Log.e("IN APP", "Transaction status: "+BillingHelper.latestPurchase.purchaseState);
                Log.e("IN APP", "Item purchased is: "+BillingHelper.latestPurchase.productId);

                if(BillingHelper.latestPurchase.isPurchased())
                {
                    showItem();
                }

            };

    };

    ////////////////////////////////

    public void BuyButtonClick(View v) {

        if(BillingHelper.isBillingSupported()){
            Log.e("IN APP","Trying to buy...");
            BillingHelper.requestPurchase(this, "android.test.purchased"); 
        } else {
            Log.e("IN APP","Can't purchase on this device");
        }

    }

    ////////////////////////////////////////////////

    private void showItem() {

        TextView tv1 = (TextView)findViewById(R.id.tv1);
        tv1.setText("PAID!");

    }

    ////////////////////////////////////////////////

    @Override
    protected void onDestroy() {
        BillingHelper.stopService();
        super.onDestroy();
    }

    ////////////////////////////////

} 
```

一切似乎都很好，但我还想要一些方法来检查应用程序启动时是否购买了该项目。我认为它可能会使用**BillingHelper.verifyPurchase(signedData, signature)**，但是我应该在那里输入什么数据和签名？或者也许还有其他方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:51:16.047

您可以使用**restoreTransactions**检查应用程序何时启动。如果您使用了托管产品或订阅，那么只有您才能获得用户的所有详细信息。

对于非托管产品，谷歌没有维护任何细节。

所以在你的主要活动中调用它

```
mBillingService = new BillingService();
mBillingService.setContext(this);
mBillingService.restoreTransactions(); 
```

一旦你在 ResponseHandler 类中调用它，就会有一种方法**purchaseResponse**

```
purchaseResponse(final Context context,
        final PurchaseState purchaseState, final String productId,
        final String orderId, final long purchaseTime,
        final String developerPayload, final String purchaseToken) {
 } 
```

这将返回所有详细信息。

您可以在之后检查 purchaseState

```
 if (purchaseState == PurchaseState.PURCHASED) {

            } else if (purchaseState == PurchaseState.REFUNDED) {

            } else if (purchaseState == PurchaseState.CANCELED) {

            } 
```

# c++ - 将 C 结构转换为 C++ 类

> ID：13535302
> 
> 赞同：-1
> 
> 时间：2012-11-23T20:23:42.733
> 
> 标签：c++, c, class, structure, iostream

我希望每个人昨天都和家人度过了愉快的时光！在城外拜访我的家人时，我想我会在即将到来的最后期限内开始我的一些项目，其中一个是将用 C 编写的代码转换为 C++，该代码使用结构数组来存储和修改数据使用对象数组的代码。虽然我最近熟悉了 C 编程语法，但这将是我在 C++ 中的第一个项目。我知道类应该与结构非常相似，但我对语法以及访问说明符的概念感到困惑。以下是我的原始 C 代码，以及要进行的更改列表。任何有关如何开始的建议，包括此类工作的良好资源/教程，将不胜感激。预先感谢您的考虑！

改动：

1.  将类中的所有数据声明为私有；
2.  提供方法（类函数），为您的程序工作提供所有必需的功能。特别是，为该类声明一个构造方法。
3.  除了程序所需的方法外，还要为类中的每个私有数据成员编写访问 (\get") 和修改器 (\set") 函数。

我的代码：

```
#include <stdio.h>
#include <conio.h>
#include <string.h>
#include <stdlib.h>

//Function Prototypes
void insertFirstName(struct structureName[], char[], int);
void insertLastName(struct structureName[], char[], int);
void insertHomeNumber(struct structureName[], char[], int);
void insertCellNumber(struct structureName[], char[], int);
void printPhoneBook(struct structureName[], int);
int deleteFriend(struct structureName[], char[], int);
void showFriend(struct structureName[], char[], int);
void saveFile(FILE*, struct structureName[], int);
int loadFile(FILE*, struct structureName[]);

//Structure Declaration
typedef struct structureName{
   char *fName;  //member for First Name
   char *lName;  //member for Last Name
   char *hPhone; //member for Home Phone
   char *cPhone; //member for Cell Phone
} pbFriend;

int main(){

   int x = 0;
   int flag = 0; //returned in delete function to account for empty phonebook
   int entryCount = 0;//variable for count of entries
   int menuChoice = 0; //variable for switch statement
   int count = 0; //counter keeps track of entry numbers 
   char name[100] = {'\0'}; //place holder for entries
   pbFriend phoneBook[1000] = {'\0'}; //create instance
   char fileSave = '\0'; //variable for selection on file save query
   char fileLoad = '\0'; //variable for selection on file load query
   FILE *pbData; //file pointer

   do{
      //load file to phone book query
      printf("Welcome! Would you like to load a file into the phonebook? (y/n): ");
      scanf("%c",&fileLoad);
      getchar();

      if(fileLoad=='y'||fileLoad=='Y'){
         count = loadFile(pbData,phoneBook);
         printf("Success! File loaded!\n");
         entryCount = count;
      } //end if

      else{
         if(fileLoad!='n'&&fileLoad!='N'){
            printf("Invalid selection.\n");
         } //end if
      } //end else
   }while( fileLoad!='y'&&fileLoad!='Y'&&fileLoad!='n'&&fileLoad!='N');  //end do while

   do{
      //display menu                 
      printf("\nPhone Book Application\n");
      printf("1) Add friend\n");
      printf("2) Delete friend\n");
      printf("3) Show a friend\n");
      printf("4) Show phone book\n");
      printf("5) Quit\n");
      printf("What do you want to do?: ");
      scanf("%d",&menuChoice);
      getchar();
      switch(menuChoice){

      case 1:  //add friend case
         printf("\nFirst name: ");  //insert first name
         scanf("%s",name);
         getchar();
         //allocate memory
         phoneBook[count].fName = (char*)malloc(100*sizeof(char));

         //memory failed to allocate
         if(phoneBook[count].fName == NULL){
            printf("ERROR! Out of memory!");
         }//end if

         //memory allocated
         else{
            insertFirstName(phoneBook, name, count);   
         }//end else

         printf("Last name: "); //insert last name
         scanf("%s",name);
         getchar();

         //allocate memory
         phoneBook[count].lName = (char*)malloc(100*sizeof(char));

         //memory failed to allocate
         if(phoneBook[count].lName == NULL){
            printf("ERROR! Out of memory!");
         }//end if

         //memory allocated
         else{
            insertLastName(phoneBook, name, count);   
         }//end else

         printf("Phone number (home): "); //insert home number
         scanf("%s",name);
         getchar();

         //allocate memory
         phoneBook[count].hPhone = (char*)malloc(100*sizeof(char));

         //memory failed to allocate
         if(phoneBook[count].hPhone == NULL){
            printf("ERROR! Out of memory!");
         }//end if

         //memory allocated
         else{
            insertHomeNumber(phoneBook, name, count);   
         }//end else

         printf("Phone number (cell): "); //insert cell number
         scanf("%s",name);
         getchar();

         //allocate memory
         phoneBook[count].cPhone = (char*)malloc(100*sizeof(char));

         //memory failed to allocate
         if(phoneBook[count].cPhone == NULL){
            printf("ERROR! Out of memory!");
         }//end if

         //memory allocated
         else{
            insertCellNumber(phoneBook, name, count);   
         }//end else

         printf("Entry added to phone book!\n");
         printf("\n");
         count++;
         entryCount++;
         break;

      case 2:  //delete friend case
         printf("\nPlease provide a last name for entry deletion: ");
         scanf("%s",&name);
         getchar();
         strcat(name," "); //white space for string values
         flag = deleteFriend(phoneBook, name, count);

         //successful deletion
         if(flag == 1){
            printf("The entry has been deleted from the phonebook.\n");
            entryCount--;
         }//end if

         //no deletion
         else{
            printf("No deletion has been made.\n");
         } 
         printf("\n");
         break;

      case 3:  //show friend case
         printf("\n");
         printf("Please provide a last name: ");
         scanf("%s",&name);
         getchar();
         strcat(name," ");
         showFriend(phoneBook, name, count);
         printf("\n");
         break;

      case 4:  //show phone book case
         printf("\n");
         //empty phonebook
         if(entryCount == 0){
            printf("The phonebook is empty.\n");
         }//end if
         else{
            printPhoneBook(phoneBook, count);
         }//end else
         printf("\n");
         break;

      case 5:  //quit case
         do{
            printf("\nWould you like to save the phonebook to a file? (y/n): ");
            scanf("%c",&fileSave);
            getchar();

            switch(fileSave){
            case 'y': case 'Y': //save case
               saveFile(pbData,phoneBook,count);
               printf("Success! File saved!");
               break;       

            case 'n': case 'N': //exit without saving case 
               printf("Good bye!\n");
               break;

            default: //invalid case
               printf("Invalid selection.\n");
               break;
            } //end switch
         }while(fileSave!='y'&&fileSave!='Y'&&fileSave!='n'&&fileSave!='N'); //end do while
         break;

      default: //invalid case
         printf("Invalid menu choice.\n\n");
         break;
      }//end switch statement
   }while(menuChoice != 5); //end do while loop

   getch();
   return 0;
}//end main

//Function Definitions
//function to insert first name
void insertFirstName(pbFriend phoneBook[], char name[], int count){
   strcpy(phoneBook[count].fName, name);
   strcat(phoneBook[count].fName," ");  
}

//function to insert last name
void insertLastName(pbFriend phoneBook[], char name[], int count){
   strcpy(phoneBook[count].lName, name);
   strcat(phoneBook[count].lName," ");
}

//function to insert home phone number
void insertHomeNumber(pbFriend phoneBook[], char name[], int count){
   strcpy(phoneBook[count].hPhone, name);
   strcat(phoneBook[count].hPhone," ");
}

//function to insert cell phone number
void insertCellNumber(pbFriend phoneBook[], char name[], int count){
   strcpy(phoneBook[count].cPhone, name);
   strcat(phoneBook[count].cPhone," ");
}

//function to delete entry
int deleteFriend(pbFriend phoneBook[], char name[], int count){
   int x;
   int foundFlag = 0; //foundFlag for seeing if query is in structure
   char nullStr[30] = {'\0'}; //NULL string
   char name2[30] = {'\0'}; //string to store first name query
   //get first name to prevent multiple deletions due to same last name
   printf("Please provide the first name of the entry to be deleted: ");
   scanf("%s", &name2);
   getchar();
   strcat(name2," ");
   for(x=0;x<count;x++){
      if((strcmp(phoneBook[x].lName,name)==0)&&(strcmp(phoneBook[x].fName,name2)==0)){
         foundFlag = 1; //entry found, proceed with delete
         //free previously allocated memory
         free(phoneBook[x].fName);
         free(phoneBook[x].lName);
         free(phoneBook[x].hPhone);
         free(phoneBook[x].cPhone);
         //set free strings to NULL
         strcpy((phoneBook[x].fName), nullStr);
         strcpy((phoneBook[x].lName), nullStr);
         strcpy((phoneBook[x].hPhone), nullStr);
         strcpy((phoneBook[x].cPhone), nullStr);
      }//end if
   }//end for
   //entry not found
   if(foundFlag == 0){ 
      printf("\nSorry, there is nobody with that name in the phone book.\n");
   }//end if
   return foundFlag;
}//end function

//function to search entries by last name
void showFriend(pbFriend phoneBook[], char name[], int count){
   int x;
   int foundFlag = 0; //foundFlag for seeing if query is in structure
   printf("\n");
   for(x=0;x<count;x++){
      if(strcmp((phoneBook[x].lName), name) == 0){
         foundFlag = 1; //entry found, proceed with display
         printf("%s",phoneBook[x].fName);
         printf("%s",phoneBook[x].lName);
         printf("%s(home) ",phoneBook[x].hPhone);
         printf("%s(cell)",phoneBook[x].cPhone);
         printf("\n");
      }//end if   
   }//end for
   //entry not found
   if(foundFlag == 0){
      printf("Sorry, there is nobody with that name in the phone book.\n");
   }//end if                               
}//end function

//function to print phone book contents
void printPhoneBook(pbFriend phoneBook[], int count){
   int x;
   for(x=0;x<count;x++){
      //check to avoid NULL strings, which have been deleted
      if(strlen(phoneBook[x].fName) > 0){ 
         printf("%s", phoneBook[x].fName);
         printf("%s", phoneBook[x].lName);
         printf("%s(home) ", phoneBook[x].hPhone);
         printf("%s(cell)", phoneBook[x].cPhone);
         printf("\n");
      }//end if
   }//end for
}//end function

//function to save to a file
void saveFile(FILE *pbData, pbFriend phoneBook[], int count){
   char fileName[100] = {'\0'}; //string to store desired name to save file as
   int x = 0; //counter variable
   printf("Please enter the file name: ");
   scanf("%s",fileName);
   getchar();
   //open file
   pbData = fopen(fileName,"w");
   //file open fail case
   if(pbData == NULL){
      printf("ERROR! File not saved!\n");
      perror("The following error occurred"); //specifies i/o error
      getchar();
      exit(EXIT_FAILURE); //exit program with error
   } //end if
   //file open success case
   else{
      //write to file   
      for(x=0;x<count;x++){
         fprintf(pbData, "%s", phoneBook[x].fName);
         fprintf(pbData, "%s", phoneBook[x].lName);
         fprintf(pbData, "%s", phoneBook[x].hPhone);
         fprintf(pbData, "%s", phoneBook[x].cPhone);
      } //end for
      fclose(pbData);
   } //end else
}// end function

//function to load a file into the phone book
int loadFile(FILE *pbData, pbFriend phoneBook[]){
   char fileName[100] = {'\0'}; //variable to store name of file to load
   int count = 0; //counter variable
   char tabulaRasa[30] = {'\0'}; /*NULL string to clear garbage data from the
                                 last loop of the feof() condition when loading 
                                 files*/
   printf("Please enter the name of the file you wish to load: ");
   scanf("%s",fileName);
   getchar();
   //open file
   pbData = fopen(fileName,"r");
   //file open fail case
   if(pbData == NULL){
      printf("ERROR! Unable to load file!\n");
      perror("The following error occurred"); //specifies i/o error
      getchar();
      exit(EXIT_FAILURE); //exit program with error
   } //end nested if
   //file open success case
   else{
      //allocate memory to store data from a file
      while(!feof(pbData)){
         phoneBook[count].fName = (char*)malloc(100*sizeof(char));
         if(phoneBook[count].fName == NULL){
            printf("ERROR! Out of memory!");
         } //end double nested if
         phoneBook[count].lName = (char*)malloc(100*sizeof(char));
         if(phoneBook[count].lName == NULL){
            printf("ERROR! Out of memory!");
         } //end double nested if
         phoneBook[count].hPhone = (char*)malloc(100*sizeof(char));
         if(phoneBook[count].hPhone == NULL){
            printf("ERROR! Out of memory!");
         } //end double nested if
         phoneBook[count].cPhone = (char*)malloc(100*sizeof(char));
         if(phoneBook[count].cPhone == NULL){
            printf("ERROR! Out of memory!");
         } //end double nested if
         //load from file
         fscanf(pbData,"%s",phoneBook[count].fName);
         strcat(phoneBook[count].fName," "); 
         fscanf(pbData,"%s",phoneBook[count].lName);                         
         strcat(phoneBook[count].lName," ");
         fscanf(pbData,"%s",phoneBook[count].hPhone);
         strcat(phoneBook[count].hPhone," ");
         fscanf(pbData,"%s",phoneBook[count].cPhone);
         strcat(phoneBook[count].cPhone," ");
         count++; //show that entry/entries have been made from file
      }//end while loop
      //free memory of last entry (junk data from feof() condition)
      free(phoneBook[count-1].fName);
      free(phoneBook[count-1].lName);
      free(phoneBook[count-1].hPhone);
      free(phoneBook[count-1].cPhone);
      //set newly free strings to NULL
      strcpy((phoneBook[count-1].fName), tabulaRasa);
      strcpy((phoneBook[count-1].lName), tabulaRasa);
      strcpy((phoneBook[count-1].hPhone), tabulaRasa);
      strcpy((phoneBook[count-1].cPhone), tabulaRasa);
      count--;
   } //end nested else
   fclose(pbData);
   return(count); //show that phone book is not empty
} //end if 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:56:44.243

开始手头任务的一个绝妙方法是查看[C++ 入门](http://isocpp.org/get-started)页面中的一些项目。

# php - PHP - if isset 简写

> ID：13535319
> 
> 赞同：1
> 
> 时间：2012-11-23T20:24:55.217
> 
> 标签：php

快速提问。我在教程中看到简单的 if 语句是这样写的：

```
if($vest) echo $vest->naslov 
```

但是当我这样写时，我得到一个错误 **Undefined variable: vest**并且我必须以旧方式编写代码：

```
if(isset($vest)) echo $vest->naslov 
```

**php.ini**文件中是否有任何设置来规范这一点？目前我在 Ubuntu（最新版本）上使用 LAMP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:29:57.950

你有`E_STRICT`，如果你在检查变量之前没有声明变量，它会抱怨。您*可以*通过关闭`E_STRICT`in来解决此问题`php.ini`，但更好的主意是提前声明变量 - 只需在函数顶部执行此操作：

```
$vest = null; 
```

在你的其他逻辑之前。这是一种很好的做法，因为它迫使您以更接近现实的方式思考程序的执行方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T20:29:18.283

您可以降低`error_reporting`到`E_ALL ^ E_NOTICE`，但这实际上是一种不好的做法，可能会导致很多难以追踪的错误。如果`$vest`是一个错字，你不会知道，你的条件永远不会奏效。

相反，尝试构建您的应用程序，以便您始终知道哪些变量已定义，哪些未定义。然后，您*可以*放心使用速记版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T20:34:19.930

我会说最好将变量声明为负状态，然后 - 如果它们没有设置，或者它们被设置为 false 那么 - 速记`if`将按照你的意图行事。

忽略错误是不好的（它们的存在是有原因的，并且您的代码将更具可读性，因此可维护）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T20:40:05.140

`if($foo)`和`if(isset($foo))`不是一回事，不应该互换使用。

`if($foo)`检查`$foo`计算结果是否为真。另一种写作方式是：`if( (bool) $foo === true )`. 因此，如果`$foo`未定义，则需要来自 PHP 的通知。

与其像某些人建议的那样关闭通知，不如以正确的方式编写代码。要检查是否`$foo`已定义，请始终使用`isset()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T20:29:46.943

`Undefined variable: vest`错误意味着`$vest`无法识别变量。`isset($vest)`不产生错误的原因是因为`isset()`检查是否`$vest`已经设置。因此 if(isset($vest)) 将对`isset($vest)`.

如果您只使用`if($vest)`，php 将假定`$vest`已设置（实际上`$vest`仍然未定义）并执行布尔检查操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-23T20:33:14.567

您可以调低错误报告级别并*忽略*错误，但这将是危险的编程实践。

当你输入这个:`if($vest)`时，你真的是指`$vest==null`or `$vest==''`or or or `$vest===''`or `isempty($vest)`or `$vest===true`or isset($vest)`？

if 语句有很多用途；您应该在代码中明确说明您在做什么。在脚本顶部初始化变量真的很难吗？

# r - ITime 的毫秒/微秒分辨率

> ID：13535325
> 
> 赞同：1
> 
> 时间：2012-11-23T20:25:36.160
> 
> 标签：r, time-series, data.table

我正在尝试更广泛地使用[data.table](http://cran.r-project.org/web/packages/data.table/index.html)并且`ITime`是 UDT 复制 POSIXlt“DateTime”类型。

```
> strptime("01-04-2012 09:23:45.987364", format="%d-%m-%Y %H:%M:%OS")
[1] "2012-04-01 09:23:45.987364"
> time = strptime("01-04-2012 09:23:45.987364", format="%d-%m-%Y %H:%M:%OS")
> class(time)
[1] "POSIXlt" "POSIXt" 
```

但我无法使用 ITime 获得 ms 或 micro

```
> time = as.ITime("09:23:45.987364", format="%H:%M:%OS")
> time
[1] "09:23:45" 
```

如何使用 ITime 处理分数？干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:30:21.147

似乎不可能。

```
IDateTime {data.table}  R Documentation
Integer based date class

Details

ITime is a time-of-day class stored as the integer number of seconds in the day. as.ITime does not allow days longer than 24 hours. Because ITime is stored in seconds, you can add it to a POSIXct object, but you should not add it to a Date object. 
```

# grails - 指定控制器和操作？

> ID：13535328
> 
> 赞同：0
> 
> 时间：2012-11-23T20:26:11.160
> 
> 标签：grails, groovy

我试图从我的 grails 项目中的控制器调用一个方法，我可以迭代并在列表中显示项目。

```
//Controller code
Class TicketController {

static allowedMethods = [save: "POST", update: "POST", delete: "POST"]

def ticketsByDate = {
    return [tickets : Ticket.list(sort: 'dateCreated')]
}
...

GSP code

<div class="box-content">
        <ul class="tickets">
            <g:each var="ticket" in="${ticketsByDate}" controller="ticket">
                <li>${ticket.id}</li>
            </g:each> 
```

我可能从错误的角度看待这个问题，但我想要做的是从一个聚合来自多个不同来源的数据的页面进行多次这样的调用。这些来源很可能是调用服务的控制器方法。

有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:37:16.280

查看[每个标签的文档](http://grails.org/doc/latest/ref/Tags/each.html)。它用于迭代集合。您必须将此集合从控制器传递到视图。

对于您的示例 - 将以下代码段放入您的`ticketsByDate`视图中：

```
<g:each var="ticket" in="${tickets}">
    <li>${ticket.id}</li>
</g:each> 
```

如果要遍历数据源的不同对象，则必须在控制器中聚合数据并将它们传递给视图：

```
def ticketsByDate = {
    return [tickets : Ticket.list(sort: 'dateCreated'), 
            moreTickets : AnotherThicket.list(), 
            users: User.list(),                 
            ...]
} 
```

# c++ - 具有最小依赖关系的跨平台 C/C++ RabbitMQ 库

> ID：13535333
> 
> 赞同：1
> 
> 时间：2012-11-23T20:26:24.310
> 
> 标签：c++, c, rabbitmq, amqp

我正在寻找具有最小依赖性的跨平台 C/C++ RabbitMQ 库。

我检查了 RabbitMQ 网站上提到的所有库，但它们似乎都不被我接受。

我正在寻找可以开箱即用的东西，而不需要大量的库或特定的操作系统。一个头文件和一个源文件就可以了。

你用什么来使用 AMQP？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-21T05:12:25.257

LibRabbitmq 是 RabbitMQ 的 C/C++ 实现的选项。

源代码和好的示例位于[https://github.com/alanxz/rabbitmq-c](https://github.com/alanxz/rabbitmq-c)。

使用 libRabbitmq 创建一个简单的消费者和发布者非常免费。您将需要一个库和几个头文件。

# c++ - 将带有参数的程序输出重定向到文件

> ID：13535334
> 
> 赞同：0
> 
> 时间：2012-11-23T20:26:42.067
> 
> 标签：c++, redirect, count

我运行一个

> $我的程序.exe

主函数签名是哪个`int main(int argc, char *argv[])` 程序获取一个参数作为目录路径，并对其中的文件进行一些处理。在处理过程中，它会将一些结果打印到标准输出（或标准错误）。我想将这些结果重定向到文件。所以我运行我的程序如下：

> $ myprogram.exe C:\dir > res.txt

结果仍会打印到屏幕上并`res.txt`保持空白。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:32:04.180

您的程序可能会将结果打印到*标准错误流*( `stderr`)，而不是*标准输出流*( `stdout`)。

要重定向`stderr`，（即文件描述符`2`），请使用

```
myprogram.exe C:\dir 2> res.txt 
```

如果要同时重定向*and* `stdout`，`stderr`则应将它们重定向到不同的文件，例如

```
myprogram.exe C:\dir > res.txt 2> errors.txt 
```

或将一个流重定向到另一个流并将后者重定向到文件

```
myprogram.exe C:\dir >res.txt 2>&1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T20:40:50.807

要记住的一件事是 ">" 运算符将标准输出重定向到输出屏幕，而不是标准错误，为了重定向标准错误，您也需要编写 2>res.txt，所以它应该是 1>res.txt 2>res。 txt，我没有尝试过，所以它可能会因为重定向到同一个文件而出错，所以更安全的方法是：1>res.txt 2>&1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T20:52:15.617

正确发送你的论点，如果你想同时发送`stdout`和`stderr`文件使用：

> $ myprogram.exe "C:\dir" > rest.txt 2>&1

`>`您可以在标志之前使用要重定向的文件描述符的数量。当我们使用时`2>&1`，文件描述符`TWO`（`stderr`）被重定向到文件描述符`ONE`，这使得`stderr`输出结果显示为`stdout`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T20:51:51.107

由于这个问题是用 C++ 标签问的，这里是如何将输出重定向到程序内部`std::cout`和`std::cerr`从程序内部重定向输出（这有点小技巧，因为代码泄漏了一个指向 a 的指针，`std::filebuf`但如果需要，可以防止这种情况发生）：

```
int main() {
    std::filebuf* fb = new std::filebuf;
    fb->open("res.txt", std::ios_base::out);
    std::cout.rdbuf(fb);
    std::clog.rdbuf(fb);
    std::cerr.rdbuf(fb);
    ...
} 
```

当然，这仅适用于写入标准 C++ 流对象的输出，即它不会重定向发送到`stdout`or的输出`stderr`。

# c++ - 在构造函数初始化列表中初始化字符串流引用成员，没有任何内容

> ID：13535335
> 
> 赞同：0
> 
> 时间：2012-11-23T20:26:43.577
> 
> 标签：c++, reference, constructor, initialization-list

我试图初始化一个没有任何内容的字符串流引用成员，说我希望它引用 null 或者只是让它未初始化。

.hpp 文件

```
class Class{
    private:
        int n;
        stringstream& css;
    public:
        Class(int n);
        Class(stringstream& ss, int i);
    }; 
```

.cpp 文件

```
Class::Class(int n)
    :   n(n)    
{} 
```

编译器给出： Error 1 error C2758: 'Class::css' : must be initialized in constructor base/member initializer list

我必须初始化初始化列表中的所有变量吗？因为我没有将任何字符串流引用传递给构造函数，我该如何初始化它？或者，如果我不想初始化它，请将其留空。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:28:44.657

*必须*初始化引用成员。你不想要一个引用，你想要一个指针。

```
class Class{
private:
    int n;
    stringstream* css;
public:
    Class(int n);
    Class(stringstream& ss, int i);
};

Class::Class(int n)
    :n(n), css(nullptr)    
{}

Class::Class(stringstream& ss, int i)
    :n(i), css(&ss)
{} 
```

# php - mysql左调整类型功能

> ID：13535336
> 
> 赞同：1
> 
> 时间：2012-11-23T20:26:53.907
> 
> 标签：php, mysql, database

mysql中是否有一个功能或php中的一个函数可以让我自动调整左侧列的所有内容？基本上我允许用户从那里的表中删除信息，但信息的设置方式是在我的行中的 n+1 个位置只能有空空间。因此，我需要能够让用户删除可能位于行中间的内容，然后我需要调整位于该空字段右侧的所有信息左侧一列。从而消除了我行中的一个空列。我认为我只需要通过操纵数据库中的信息来查找空空间，然后在该位置之后将所有信息拉出然后从空空间开始重新插入来执行此操作。但是，如果有一个更简单的解决方案，我很乐意在这里讨论它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:28:14.703

```
update your_table
set your_column = ltrim(your_column) 
```

[MySQL LTRIM](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_ltrim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T00:34:26.350

我最终编写了一些 php 代码来检查该行在哪里有一个空空间，然后将所有数据拉出该行并将数据重新插入该行。我真的不喜欢这个主意，但因为我没有更好的东西，所以我就这么做了。它起作用了，这才是最重要的。

# backbone.js - Backbone.Marionette 填充渲染“实时”信息

> ID：13535340
> 
> 赞同：0
> 
> 时间：2012-11-23T20:27:14.997
> 
> 标签：backbone.js, marionette

我正在使用 Backbone.Marionette，并希望在实时信息进入时重新渲染它。例如，汽车加速和减速时的速度。

我已经设置了视图来监听模型的更改，但本质上，我需要模型每隔一段时间就监听来自 JSON 的更改，以查看“速度”属性是否不同。这会简单地在模型上做一个 setInterval 吗？有没有更好的方法来做到这一点？

# asp.net-mvc-3 - 服务器端，当用户离开 asp.net mvc 3 中的页面时，什么会失去作用域？

> ID：13535342
> 
> 赞同：0
> 
> 时间：2012-11-23T20:27:24.687
> 
> 标签：asp.net-mvc-3

服务器端，当用户离开 asp.net mvc 3 中的页面时，什么会失去作用域或有资格进行垃圾收集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:34:54.457

与 .Net 中任何其他已编译代码发生的情况完全相同，如果您处理对象，当 CLR 告知时间时，垃圾收集器将尽快收集它们，否则，资源会一直挂起，直到您的发生 IIS 和/或服务器中的 CLR 需要清除内存以分配其他资源。

# asp.net - Url Rewrite 似乎无法在 Windows Azure 上运行？

> ID：13535347
> 
> 赞同：1
> 
> 时间：2012-11-23T20:27:50.400
> 
> 标签：asp.net, iis, azure, url-rewriting

我正在尝试从 domain.net 重定向到 www.domain.net。但是，我得到的只是 IIS 404 错误页面。

我的网络配置看起来像这样。但即使是 http 错误声明也被忽略了，我只得到 IIS 的 404 页面，而不是我指定的文件。

```
<system.webServer>
  <httpErrors errorMode="Custom" defaultPath="/404.html" defaultResponseMode="Redirect" existingResponse="Replace"/>
  <rewrite>
      <rules>
          <rule name="Redirect to WWW" stopProcessing="true">
              <match url=".*" />
              <conditions>
                  <add input="{HTTP_HOST}" pattern="^mylifelessons.net$" />
              </conditions>
              <action type="Redirect" url="http://www.mylifelessons.net/{R:0}"
              redirectType="Permanent" />
          </rule>
      </rules>
  </rewrite>
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true">
  <remove name="UrlRoutingModule" />
  <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" preCondition="managedHandler" />
</modules>
<handlers>
  <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</handlers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:41:28.000

从 domain.net 重定向到 www.domain.net 在您的注册商的域设置中更容易处理 - 将 www 指向您的 Azure DNS，并将您的根域转发到 www

如果您坚持使用重写规则，请使用 IIS URL 重写模块来帮助您创建锥形重写规则 - web.config 的输出将类似于：

```
 <rewrite>
        <rules>
            <rule name="CanonicalHostNameRule1">
                <match url="(.*)" />
                <conditions>
                    <add input="{HTTP_HOST}" pattern="^www\.test\.com$" negate="true" />
                </conditions>
                <action type="Redirect" url="http://www.test.com/{R:1}" />
            </rule>
        </rules>
    </rewrite> 
```

# android - Android 活动在进入后台后两次收到相同的意图

> ID：13535349
> 
> 赞同：2
> 
> 时间：2012-11-23T20:28:05.450
> 
> 标签：android, android-intent, android-activity

在我的应用程序中，我具有以下结构：

活动 A 调用活动 B，并完成，将自己从堆栈中移除；活动 B 从活动 A 接收到一个意图，该意图指定要执行的某些操作，当执行这些操作时，用户将看到一条指示它的消息（仍在活动 B 中）。如果用户按下主页按钮，应用程序将进入后台，打电话`"onPause"`，然后`"onStop"`。一切都按预期工作。

问题是，如果用户将应用程序留在后台几个小时，并尝试再次打开应用程序（几个小时后） ，则`onCreate`活动 B 中的方法将被调用，其意图与几小时前从活动A。

（如果用户几分钟后返回应用程序，他会看到活动 B，就像他离开时一样）

我想要的是，在这种情况下，我的应用程序将打开活动 A 而不是活动 B 或活动 B，但在用户离开时屏幕上显示的消息。

查看活动生命周期，似乎应用程序正在被操作系统杀死，所有这些都是有道理的，我真正不明白的是为什么活动 B 以与`onCreate`以前相同的方法和意图打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:06:52.487

这是 Activity 生命周期中描述的预期行为。

当一个活动开始时，它总是收到一个`Intent`对象。当您的活动被杀死时，操作系统会保留用于启动活动 B 的意图，并在活动返回“活动”时重新发送。

您的活动将保留状态并根据需要恢复它。根据您的问题描述，我建议使用`onStop()`so save 到`SharedPreferences`活动状态和消息，然后`onResume()`再读回来。在`onDestroy()`您应该清除首选项以确保新的清洁周期开始。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:31:33.320

我遇到了同样的问题，我不知道这样做的方式或权利，但我只是`Intent`在需要时更改了 Extra。

```
intent.putExtra(SEARCH_EXTRA, false);
setIntent(intent); 
```

所以你的活动不会执行操作，因为它没有收到它想要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T23:08:23.820

用于`onSaveInstanceState()`记录ActivityB的状态。Android 会在终止进程之前调用它。当用户返回应用程序时，它将重新创建进程，然后重新创建活动堆栈顶部的任何活动（在您的情况下为 ActivityB）。当它这样做时，它会将保存的实例状态作为`onCreate()`调用中的参数传递给活动。您应该能够在其中放置一些东西，以便您的 ActivityB 可以告诉它在进程终止/重新启动后正在重新创建。在这种情况下，ActivityB 可以再次向用户显示消息（它必须保存在`onSaveInstanceState()`方法中），或者它可以将用户重定向回 ActivityA，以便他可以重新开始。

# ruby - Ruby 重构

> ID：13535354
> 
> 赞同：1
> 
> 时间：2012-11-23T20:28:23.293
> 
> 标签：ruby, refactoring

我正在制作一个简单的 Rails 站点，它将存储一些日期并执行基本的条件检查。我在下面写了一些方法，并被告知我可以让它们更有效率。我一直在挠头，我不知道该怎么做。我应该让 entry.find 全球化吗？还是有更明显的解决方案？提前致谢

```
 def name
     @fname = params[:fst_name]
     @lname = params[:lst_name]
     @entry = Entry.create({:first_name => @fname, :last_name =>  @lname})
  end

  def attribs
     @person = Entry.find(:last)
     @fname = @person.first_name
     @lname = @person.last_name
     @person.update_attributes({:address => params[:st_name], 
         :salary => params[:salary], :loan => params[:loan], 
         :loan_reason => params[:reason]})
     if !@person.address.nil? then render "show" end
  end

 def show
     @person = Entry.find(:last)
 end

  def modify
     @person = Entry.find(:last)
     @fname = @person.first_name
     @lname = @person.last_name
     @entry = Entry.create({:first_name => @fname, :last_name =>  @lname,  
                            :salary => params[:salary], :loan => params[:loan]})
  end

 def borrow
     @person = Entry.find(:last)
     if !@person.salary.nil? then
       if (@person.salary *  3) < @person.loan
            then @message = "You have asked for too much"
       else  @message = "No problem" 
       end
    else @message = "empty record?"
    end
 end

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T20:47:27.100

*   在您反复使用的情况下使用 before_filter`@person = Entry.find(:last)`

*   不要让每个变量都成为实例变量：for `name`: 你不需要`@fname`在视图中访问，`@entry.first_name`如果需要，你可以这样做。

*   不要使用 inline `if then`，使用`do_something if condition`. 也`then`从你的其他`if`s 中删除。

*   您可能希望将`Event`创建移动到模型中。就像是`self.create_from_person_and_modify_params`

*   使用`Event.last`代替`Event.find(:last)`

*   使用`if @person.salary`代替`if !@person.salary.nil?`

*   将`if (@person.salary * 3) < @person.loan`条件移动到模型中。就像是`asks_for_reasonable_raise?`

# c++ - 对字符串数组进行合并排序

> ID：13535358
> 
> 赞同：4
> 
> 时间：2012-11-23T20:28:56.920
> 
> 标签：c++, mergesort

我正在尝试使用合并排序算法对字符串数组进行排序。我编写了这段代码，它适用于整数数组，但令人惊讶的是，字符串数组却没有！似乎它只是对数组的第二部分进行排序。我不知道是什么这段代码中的一块是错误的！我将不胜感激您的帮助。

```
 `#include <iostream>
#include <list>
#include <string>
using namespace std;

void MergeSortA(int low , int high);
void MergeA(int low ,int mid ,int high);

string currentArray[5];
int main()
{
    for(int i = 0; i < 5; i++)
        cin >> currentArray[i];

    MergeSortA(0,4);

    for(int i = 0; i < 5; i++)
        cout << currentArray[i] <<endl;

    return 0;
}

void MergeSortA(int low , int high)
{
    int mid = 0;
    if(low < high)
    {
        mid = ((low+high)/2);
        MergeSortA(low , mid);
        MergeSortA(mid+1,high);
        MergeA(low,mid,high);
    }
}
void MergeA(int low ,int mid , int high)
{
    int i = low, j = mid+1 , k = low;
    string Temp[5];

    while(i <= mid && j <= high)
    {
        if( currentArray[i] < currentArray[j] )
        {
            Temp[k].assign(currentArray[i]);
            i++;
        }
        else
        {
            Temp[k].assign(currentArray[j]);
            j++;
        }
        k++;
    }
    if(i > mid )
    {
        for(int h = j ;h <= high ; h++ )
        {
            Temp[k].assign(currentArray[h]);
            k++;
        }
    }
    else
        for(int h = i; h<= mid ; h++ )
        {
            Temp[k].assign(currentArray[h]);
            k++;
        }
   for(int i = 0; i <= high ; i++)
   {
       currentArray[i].assign(Temp[i]);
   }
}` 

            回答 #1

赞同：2

时间：2012-11-23T20:44:56.933

在将值从*Temp*数组复制回*currentArray时，您需要进行更正：* *```
for(int i = low; i <= high ; i++) //copy from low to high
   {
       currentArray[i].assign(Temp[i]);
   } 
```* 
```

# git - git：更新后结帐不起作用

> ID：13535360
> 
> 赞同：1
> 
> 时间：2012-11-23T20:29:02.130
> 
> 标签：git, post-update

我正在尝试使用[http://danielmiessler.com/study/git/#website](http://danielmiessler.com/study/git/#website)设置 git来管理我的网站。我在win7中使用git gui

我已经到了说明的最后一步：git push website

推送到网站后，我能够确认 ~/website.git 中的对象目录已更新。

我的钩子叫做'post_update'它有以下内容

```
#!/bin/sh
echo
echo "**** Pushing data to Live Server.">>~/hi.txt
echo
GIT_WORK_TREE=/home/***/public_html/b1a git checkout -f 
```

当我转到 /public_html/b1a 时，它是一个空目录。我也将钩子目录和 b1a 更改为 777。在推送到网站远程后，我可以看到 hi.txt 已创建，所以我假设钩子正在工作，但该行

```
GIT_WORK_TREE=/home/***/public_html/b1a git checkout -f 
```

不是。我怎样才能解决这个问题

我将不胜感激任何帮助，

提前致谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:58:28.913

我终于想通了。钩子一直试图发送到“b1a”目录，该目录不是我的设置中的 git 目录（既不裸也不正常）。我认为这很明显（回想起来，但我没有想到）-问候，比尔

# bash - 删除 bash 中的双重扩展

> ID：13535364
> 
> 赞同：13
> 
> 时间：2012-11-23T20:29:24.847
> 
> 标签：bash, shell, rename

我熟悉重命名，但我很好奇重命名是否仍然适用于删除重复的扩展名？

假设我有几个文件名为：

*   图片2.jpg.jpg
*   图片9.jpg.jpg
*   图片3.jpg.jpg
*   图片6.jpg.jpg

您将如何删除重复的扩展名？

最终结果：

*   图片2.jpg
*   图片9.jpg
*   图片3.jpg
*   图片6.jpg

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-23T20:33:30.657

假设：

*   您只想在当前工作目录中执行此操作（非递归）
*   双扩展名的格式精确为`.jpg.jpg`：

然后以下脚本将起作用：

```
#!/bin/bash

for file in *.jpg.jpg
do
    mv "${file}" "${file%.jpg}"
done 
```

**解释：**

*   `${file%.jpg}`：这部分称为[参数替换。](http://tldp.org/LDP/abs/html/parameter-substitution.html)
*   来自同一来源：*“${var%Pattern} 从 $var 中删除与 $var 后端匹配的 $Pattern 的最短部分。”*
*   请注意，这里提到的“模式”称为 globbing，它[与正则表达式在重要方面有所不同](http://lwn.net/Articles/96687/)。

**要使用此脚本：**

*   `clean_de.sh`在该目录中创建一个名为的新文件
*   将其设置为可执行`chmod +x clean_de.sh`
*   然后运行它`./clean_de.sh`

* * *

**警告说明**：

正如@gniourf_gniourf 所指出的，`-n`如果您`mv`支持，请使用该选项。

否则 - 如果您在同一目录中，它将重命名为`a.jpg`并在此过程中覆盖已经存在而不发出警告。`a.jpg.jpg``a.jpg.jpg``a.jpg``a.jpg`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-24T08:07:52.140

一行重命名命令也应该足够了（至少对于您的情况）：

```
rename 's/\.jpg\.jpg$/.jpg/' *.jpg.jpg 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T09:38:26.357

对于这个问题，这是一个更通用但仍然很简单的解决方案：

```
for oldName in `find . -name "*.*.*"`; do newName=`echo $oldName | rev | cut -f2- -d'.' | rev`; mv $oldName $newName; done 
```

简短说明：
`find . -name "*.*.*`- 这将仅递归查找具有重复扩展名的文件

`echo $oldName | rev | cut -f2- -d'.' | rev`- 诀窍发生在这里：rev 命令对字符串执行反向操作，因此您现在可以看到，您想要从第一个点开始的整个文件名。(gpj.gpj.fdsa)

`mv $oldName $newName`- 实际重命名文件

*发行说明：由于是简单的一行脚本，所以可以找到未处理的案例。文件名中带有额外点的文件、超深目录结构等。*

# android - 如何在 android 中获取 google 帐户个人资料照片？

> ID：13535366
> 
> 赞同：1
> 
> 时间：2012-11-23T20:29:34.520
> 
> 标签：android, gmail, photo, account

我想问一下是否有办法获取我实际上已经登录到我的安卓设备（lvl 10）的谷歌账户的个人资料照片。我可以从 Android 设备检索我的帐户电子邮件，但我找不到获取此电子邮件的个人资料照片的解决方案。

请回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:33:54.487

您可以从[Contacts Provider](http://developer.android.com/guide/topics/providers/contacts-provider.html#UserProfile)检索设备的用户信息。

# jquery - jQuery不同的插件实例

> ID：13535367
> 
> 赞同：0
> 
> 时间：2012-11-23T20:29:38.463
> 
> 标签：jquery, jquery-plugins

我的插件必须为每个对象做不同的事情，同时我需要能够调用各种方法，做很多其他的事情。

我想在这里发生的是，当用户单击`first`按钮时，它应该调用函数 for `test_one`div 而不是 for `test_two`。

[**我在 jsFiddle 上的代码**](http://jsfiddle.net/q6e38/2/)：

```
<button class="test_one">First</button >

<button class="test_two">Second</button >

<div class="called_for"></div> 
```

```
(function($){
    var globalSettings = {
        success: function(){}
    };

    var methods = {
        init : function(options){
            settings            = $.extend({},globalSettings,options);

            $(this).click(function(){
                settings.success();                
            });                
        }                
    }

    $.fn.test = function(method, options){
        if(methods[method])
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        else if(typeof method === 'object' || !method)
            return methods.init.apply(this, arguments);
        else
            $.error('Method ' + method + ' does not exist');
    };

})(jQuery);

$(".test_one").test({
    success: function(){
        $(".called_for").text("I got called for 'test_one'");
    }
});

$(".test_two").test({
    success: function(){
         $(".called_for").text("I got called for 'test_two'");
    }
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:35:13.607

您没有声明`settings`，因此它是全局的，因此被第二个插件调用覆盖。请使用`var`：http: [//jsfiddle.net/q6e38/4/](http://jsfiddle.net/q6e38/4/)。

```
var settings = $.extend({}, globalSettings, options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:43:09.613

使用这个骨架，运行良好： [https ://github.com/OscarGodson/jQuery-Plugin-Skeleton](https://github.com/OscarGodson/jQuery-Plugin-Skeleton)

# objective-c - 在 Prefix.pch 中过度导入？(#ifdef __OBJC__)

> ID：13535368
> 
> 赞同：0
> 
> 时间：2012-11-23T20:29:41.710
> 
> 标签：objective-c, ios, import

所以，如果我没记错的话，在我的项目中 Prefix.pch 中导入的任何东西都会被导入到我的每个新类中。但是，默认情况下，任何 NSObject 子类都导入 Foundation/Foundation.h 和视图子类在其各自的头文件中导入 UIKit/UIKit.h。

这不是过度进口吗？我没有在我的类中两次导入框架头文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:37:10.670

它是无害的。`#import`如果指定的文件已经被导入，预处理器指令什么也不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:03:38.243

没有任何方法可以避免警告。警告是警告而不是错误，因为它们可能是错误的。在这种情况下，请忽略警告。

# facebook - 通过图形 API 删除 Facebook 主页收件箱消息

> ID：13535378
> 
> 赞同：3
> 
> 时间：2012-11-23T20:31:14.820
> 
> 标签：facebook, facebook-graph-api, messages

目前有没有一种方法可以使用 API 为 Facebook 页面“删除”收件箱消息？

我了解在 facebook.com 上删除收件箱消息只会将其从您的收件箱中删除，而不会完全删除该消息。是否有使用 API 提供相同功能的调用？

我试过 DELETE [https://graph.facebook.com/m_id.123456789?access_token=](https://graph.facebook.com/m_id.123456789?access_token=) {page_access_token} 无济于事（OAuthException（＃3）未知方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T16:30:29.723

您目前无法使用 API 删除收件箱消息。正如权限状态 ( `read_mailbox`) 所示，API 仅提供对消息的只读访问权限。

# c# - MVC # URI 片段

> ID：13535381
> 
> 赞同：1
> 
> 时间：2012-11-23T20:31:27.670
> 
> 标签：c#, asp.net-mvc, facebook-graph-api

所以我正在使用 Facebook API，我想知道是否有一种简单的方法可以从这样的 URL 访问 URI 片段：

```
http://localhost/MyController/MyAction#access_token=LONGTOKENSTRINGHERE&expires_in=6355 
```

我需要“#”之后的值。Request 下面唯一可用的选项在“#”之前返回。我会使用客户端 JS，但我需要服务器来获取访问令牌的值以及过期时间。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:37:43.987

锚点（用 指定`#`）根本不会发送到服务器...它们由浏览器在本地（即客户端）解析...javascript可以通过`window.location.hash`.

如果您需要这些服务器端，您可以找到一种方法告诉 facebook 使用查询字符串而不是锚点，或者您使用一些 javascript 来访问该信息并将其与请求一起发送......

# c++ - C++：如何让动态数组的索引由文件中的行确定

> ID：13535382
> 
> 赞同：0
> 
> 时间：2012-11-23T20:31:31.553
> 
> 标签：c++, arrays, dynamic, io

我正在尝试创建三个动态数组，其索引由文本文件中的行数确定。然后我需要修改它们的索引值。我在想全局数组将是我最好的选择。

出于某种原因，我不断收到以下编译器错误： secondLab.obj : error LNK2019: unresolved external symbol "void __cdecl arrayInput(...)

问题，我该如何解决这个问题并基本上满足我的程序目标。

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
#include <new>

using namespace std;

int INDEXES = 0;

string *names_Array = new string[INDEXES];
double *rates_Array = new double[INDEXES];
double *hours_Array = new double[INDEXES];

void subscript(ifstream&, int&, string&, double&, double&);
void arrayInput(istream&, string [], double [], double[],
     string&, double&, double&);

int main ()
{
    string names;
    double rates;
    double hours;

    string filename("employee sample file.txt");
    ifstream employeeInfo(filename.c_str());

    if (employeeInfo.fail())
    {
        cout << "Sorry, file was not successfully opened. "
             << "Please make sure your file exists and\n" 
             << "re-run the program." << endl;
    }   

    subscript(employeeInfo, INDEXES, names, rates, hours);

    arrayInput(employeeInfo, names_Array, rates_Array, hours_Array,
    names, rates, hours);

    cout << names_Array[0] << endl
         << names_Array[1] << endl
         << names_Array[2] << endl
         << names_Array[3] << endl
         << names_Array[4] << endl;

    delete[] names_Array;
    delete[] rates_Array;
    delete[] hours_Array;

    system("pause");
    return 0;
}

void subscript(ifstream& employeeInfo, int& INDEXES,
    string& names, double& rates, double& hours)
{
    while(!employeeInfo.eof())
    {   
        employeeInfo >> names >> rates >> hours;

        INDEXES++;
    }
}

void arrayInput(ifstream& employeeInfo, string names_Array[], 
    double rates_Array[], double hours_Array[], string& names, double& rates, double& hours)
{
    int i = 0;

    while(!employeeInfo.eof())
    {
        employeeInfo >> names >> rates >> hours;

        names_Array[i] = names;
        rates_Array[i] = rates;
        hours_Array[i] = hours;

        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:42:49.117

的声明和定义`arrayInput`不匹配，具体来说，一个带`ifstream`参数，另一个带`istream`. 改变

```
void arrayInput(istream&, string [], double [], double[],
 string&, double&, double&); 
```

到

```
void arrayInput(ifstream&, string [], double [], double[],
 string&, double&, double&); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:45:21.973

你可以先计算行数..然后启动数组..并将数据填充到数组..

```
 subscript(employeeInfo, INDEXES, names, rates, hours);
 names_Array = new string[INDEXES];
 rates_Array = new double[INDEXES];
 hours_Array = new double[INDEXES];
 arrayInput(employeeInfo, names_Array, rates_Array, hours_Array,names, rates, hours); 
```

试试这样..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T21:06:43.480

@jrok 在评论中已经回答了您关于链接错误的问题。然而，您的问题的主题是“如何让动态数组的索引由文件中的行确定”，您似乎已经通过遍历文件两次来做到这一点。这无论如何都不是“最佳”解决方案，甚至对于某些流（例如终端输入）也是不可能的。

`std::vector`不仅是“你最好的选择”（正如@jrok 所指出的那样），而且是标题问题的更好解决方案。事实上，整个代码只有几行，没有丑陋的全局“动态”数组。（更不用说你的实现是错误的，因为这些数组永远不会分配给`INDEXES>0`），更干净，更快（单次遍历）：

```
#include <vector>
#include <fstream>

int main () {
   using namespace std;
   vector<string> names;
   vector<double> rates;
   vector<double> hours;

   ifstream file("employee sample file.txt");

   while( !file.eof() ) {
      string name;
      double rate, hour;
      file >> name >> rate >> hour >> ws;
      names.push_back(name);
      rates.push_back(rate);
      hours.push_back(hour);
   }
} 
```

笔记：

*   push_back() 是摊销的常数时间。所以，不用担心效率
*   std::ws 是为了在迭代开始之前跳过任何尾随空格（例如文件中的尾随行）。
*   没有乱七八糟的`delete[]`，`new`所有的垃圾。

hth

# sql - 批量插入后的 SQL 触发器

> ID：13535384
> 
> 赞同：2
> 
> 时间：2012-11-23T20:31:53.550
> 
> 标签：sql, sql-server, triggers, sql-server-2012

我每周都会收到一个 CSV 文件，我使用 BULK INSERT 将其导入我的 SQL 数据库。我插入一个临时表，然后通过插入新记录并更新任何已修改的记录将其与主表合并。代码是：

```
BULK INSERT dbo.temp
FROM 'C:\Users\Administrator\Documents\20120125.csv'
WITH (FIELDTERMINATOR = ',', ROWTERMINATOR = '\n' );

MERGE dbo.main AS TargetTable                            
USING dbo.temp AS SourceTable                    
ON (TargetTable.name = SourceTable.name)                
WHEN NOT MATCHED BY TARGET                              
    THEN INSERT (name, age, gender, father, mother, teacher, mathsrating, historyrating, sciencerating, englishrating)
        VALUES(SourceTable.name, SourceTable.age, SourceTable.gender, SourceTable.father, SourceTable.mother, SourceTable.teacher, SourceTable.mathsrating, SourceTable.historyrating, SourceTable.sciencerating, SourceTable.englishrating)
WHEN MATCHED                                            
    THEN UPDATE SET
        TargetTable.name = SourceTable.name,
        TargetTable.age = SourceTable.age,
        TargetTable.gender = SourceTable.gender,
        TargetTable.father = SourceTable.father,
        TargetTable.mother = SourceTable.mother,
        TargetTable.teacher = SourceTable.teacher,
        TargetTable.mathsrating = SourceTable.mathsrating,
        TargetTable.historyrating = SourceTable.historyrating,
        TargetTable.sciencerating = SourceTable.sciencerating,
        TargetTable.englishrating = SourceTable.englishrating;

DELETE FROM dbo.temp 
```

我想要实现的是将被更新覆盖的记录及其“先前”值存储在一个新表中，以便我了解更改的历史。我对 SQL 相当陌生，但经过一些研究，似乎触发器可能是采用的方法，但欢迎任何有关如何解决此问题的建议。

谢谢

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:39:31.463

合并语句有一个[输出子句](http://technet.microsoft.com/en-us/library/ms177564.aspx)，它将受影响的行输出到表中，或者作为查询的结果。

您还可以在“匹配时”部分中指定额外的条件。在这种情况下，使用它来确保如果所有值都与现有行相同，则不会更新行。如果列可以为空，这有点棘手，因为`(1 != Null)`返回`Null`。对于您的评分，我假设它不会是负面的，您可以`IsNull(s.rating, -1) != IsNull(t.rating, -1)`查看它是否已更改

由于输出子句可以是查询的结果，因此您可以将其嵌套为内部查询。我已经用它来`UpdateTimestamp`向您的历史记录表添加一个。

示例：[http ://sqlfiddle.com/#!6/1651a/2](http://sqlfiddle.com/#!6/1651a/2)

为什么需要空值检查的示例：[http ://sqlfiddle.com/#!6/bd99b/2](http://sqlfiddle.com/#!6/bd99b/2)

```
Insert Into 
  history_table  
Select
  GetDate(), [name], age, gender, father, mother, teacher, 
  mathsrating, historyrating, sciencerating, englishrating
From (
  Merge
    dbo.main As t
  Using
    dbo.temp AS s
      On (t.[name] = s.[name])
  When Not Matched By Target Then
    Insert (
      [name], age, gender, father, mother, teacher, 
      mathsrating, historyrating, sciencerating, englishrating
    ) values (
      s.[name], s.age, s.gender, s.father, s.mother, s.teacher, 
      s.mathsrating, s.historyrating, s.sciencerating, s.englishrating
    )
  When Matched And -- assume ratings can't be negative, but can be null
    t.age != s.age Or
    t.gender != s.gender Or
    t.father != s.father Or
    t.mother != s.mother Or
    t.teacher != s.teacher Or
    IsNull(t.mathsrating, -1) != IsNull(s.mathsrating, -1) Or
    IsNull(t.historyrating, -1) != IsNull(s.historyrating, -1) Or
    IsNull(t.sciencerating, -1) != IsNull(s.sciencerating, -1) Or
    IsNull(t.englishrating, -1) != IsNull(s.englishrating, -1)
  Then Update
    Set
      t.[name] = s.[name],
      t.age = s.age,
      t.gender = s.gender,
      t.father = s.father,
      t.mother = s.mother,
      t.teacher = s.teacher,
      t.mathsrating = s.mathsrating,
      t.historyrating = s.historyrating,
      t.sciencerating = s.sciencerating,
      t.englishrating = s.englishrating
  Output
      $action as Action, deleted.*
  ) as Updates 
```

# dependencies - 安装 RavenDb 客户端的 Nuget 依赖错误

> ID：13535387
> 
> 赞同：3
> 
> 时间：2012-11-23T20:32:38.170
> 
> 标签：dependencies, ravendb, nuget

所以我试图将 RavenDB.Client 安装到一个新的 Asp.Net Mvc 4.0 项目中并得到以下错误。

```
PM> Install-Package RavenDB.Client -Version 1.0.980
Attempting to resolve dependency 'Newtonsoft.Json (= 4.0.8)'.
Attempting to resolve dependency 'NLog (= 2.0.0.2000)'.
Successfully installed 'Newtonsoft.Json 4.0.8'.
Successfully installed 'NLog 2.0.0.2000'.
You are downloading RavenDB.Client from Hibernating Rhinos, the license agreement to which is available at http://www.ravendb.net/licensing. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'RavenDB.Client 1.0.980'.
Install failed. Rolling back...
Install-Package : Updating 'Newtonsoft.Json 4.5.6' to 'Newtonsoft.Json 4.0.8' failed. Unable to find a version of 'Microsoft.AspNet.WebApi.Client' that is compatible with 'Newtonsoft.Json 4.0.8'.
At line:1 char:1
+ Install-Package RavenDB.Client -Version 1.0.980
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

不幸的是，Microsoft.AspNet.WebApi.Client 是我实际需要使用的默认安装的一连串东西之一。我在这里有什么选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:21:54.387

[这个问题之前](https://stackoverflow.com/questions/12795378/ravendb-client-issue-with-newtonjson-net-version-4-0-8-0)已经问过[很多](https://stackoverflow.com/questions/10970591/can-i-install-ravendb-client-alongside-microsoft-aspnet-webapi-client) [次](https://stackoverflow.com/questions/13212303/asp-net-web-api-and-ravendb-compatibility) 了。

迄今为止最好的建议是使用 RavenDB 的预发布“不稳定”版本。2.0 版本接近 RTM，且不稳定的版本非常好。

# jquery - 在 jquery 模态窗口中呈现 rails 动作的正确方法是什么？

> ID：13535396
> 
> 赞同：0
> 
> 时间：2012-11-23T20:33:24.190
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui, modal-dialog

我会尽量保持我的问题简洁。因此，我试图通过 jquery 的 .html 函数在 jquery 模态窗口中进行 rails“渲染”调用。但它不能正常工作。相关的控制器称为用户，其动作称为新的。因此，我尝试进行的相关 jquery 调用是 .html('<%=render('users/new') %>') 用于模式窗口。这是我的代码。

```
 <script>
        $(document).ready(function(){
            var $dialog = $('<section></section>')
                                    .html('<%=render('users/new') %>')
                .dialog({
                    autoOpen: false,
                    modal:true
                });

            $('#target').click(function() {
                $dialog.dialog('open');
                return false;
            });
        });
        </script> 
```

当我用 .html('<%=link_to("TEST", {:controller=>'users', :action =>'new'})%>') 窗口和链接工作正常。所以我知道这个问题特别涉及渲染调用。

我可以做些什么来解决这个问题并允许渲染在 jquery 模态窗口中工作？希望我的描述清楚。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:51:56.677

在 JS 中使用`escape_javascript`时始终使用。`render`像下面这样的东西会起作用：

```
<%= escape_javascript(render "users/new") %> 
```

# objective-c - iOS：在后台更新媒体信息

> ID：13535397
> 
> 赞同：0
> 
> 时间：2012-11-23T20:33:27.210
> 
> 标签：objective-c, ios, background-process, avplayer, mpnowplayinginfocenter

我目前正在为我的应用程序使用 MPNowPlayingInfoCenter 来显示正在播放的歌曲，但我希望将 HTTP Live Streaming 合并到我的应用程序中，这将在后台出现任意数量的不同轨道。

有没有办法在应用程序处于后台时设置 nowPlayingInfo（在一定时间后调用函数？），即使应用程序在技术上实际上并不在后台运行？

或者有没有办法在我的服务器上使用一个简单的调用来设置正在播放的信息，这将返回正确的信息 - 使用返回字符串或图像的 API 调用？

我知道这是可能的，因为 Songza 已经这样做了，但也许他们已经获得了使用 Apple 的某些私有方法的许可（如果你能做到的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:10:20.367

如果您正在使用`AVPlayer`该类并且您的应用程序的主要目的是播放音乐，那么您将能够在后台运行它，从而在`nowPlayingInfo`更改曲目时更新。

只是一个简单的例子：

```
- (void)viewDidLoad {
    [super viewDidLoad]

    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
    [[AVAudioSession sharedInstance] setActive: YES error: nil];

    if ([[UIApplication sharedApplication] respondsToSelector:@selector(beginReceivingRemoteControlEvents)]){
        [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
        [self becomeFirstResponder];
        //These two steps are important if you want the user to be able to change tracks with remote controls (you'll have to handle the remote control events yourself).
    }
    self.yourPlayer = [[AVPlayer alloc] init];
} 
```

`dealloc`在您的方法中取消注册远程控制事件：

```
[[UIApplication sharedApplication] endReceivingRemoteControlEvents] 
```

将*info.plist中的***所需背景模式**更改为**App 播放音频**

# c# - 避免 dotnetopenauth 网址中的“必须包含句点”限制

> ID：13535398
> 
> 赞同：2
> 
> 时间：2012-11-23T20:33:27.520
> 
> 标签：c#, .net, openid, dotnetopenauth

背景（这可能已经从我迄今为止提出的关于 DNOA 的众多问题中显而易见）：我正在开发一个在我雇主的 Intranet 中运行的 Web 应用程序门户。但是，由于这是一个 Intranet，所有各种依赖方（和提供者）都有如下所示的 url `http://servername/path`：尤其是缺少一个顶级域名。

DotNetOpenAuth ( `UntrustedWebRequestHandler.IsUriAllowable(Uri uri)`) 中的代码执行以下检查：

```
if (!uri.Host.Contains(".")) {
    return failsUnlessWhitelisted("it does not contain a period in the host name.");
} 
```

显然，由于我所有的 RP 只是没有 TLD 的服务器名称，因此它们都未通过此检查。现在，我意识到我可以将它们全部添加到 web.config 白名单中（我已经尝试了一些并且它按预期工作），但是看到新服务器将被动态添加，我不认为这是一个理想的解决方案。

所以我的问题是：我应该尝试动态修改 web.config 吗？（我对此进行的初步研究表明这会很痛苦）或者，有没有办法以编程方式设置白名单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:27:39.180

不幸的是，没有编程方式来修改主机白名单。

如果您处于受信任的环境中，则可以绕过`UntrustedWebRequestHandler`该类并使用不包括主机名检查（或检查它是否与您需要的任何策略匹配）的 Web 请求处理程序。如果您信任您将要求 DotNetOpenAuth 连接到的所有服务器，建议您使用内置`DotNetOpenAuth.Messaging.StandardWebRequestHandler`的直接传递（不添加任何额外的网络级安全检查）。

```
var rp = new OpenIdRelyingParty();
rp.Channel.WebRequestHandler = new StandardWebRequestHandler();

var op = new OpenIdProvider();
op.Channel.WebRequestHandler = new StandardWebRequestHandler(); 
```

如果你想应用一些更谨慎的策略（也许有一些集中的白名单主机列表），你可以`IDirectWebRequestHandler`自己实现，如果需要，你可以使用[现有的`UntrustedWebRequestHandler`类来获得灵感](https://github.com/DotNetOpenAuth/DotNetOpenAuth/blob/master/src/DotNetOpenAuth.Core/Messaging/UntrustedWebRequestHandler.cs)。然后当然将上述属性设置为您自己的实现。

# c++ - 将特征矩阵映射到 C 数组

> ID：13535399
> 
> 赞同：7
> 
> 时间：2012-11-23T20:33:29.073
> 
> 标签：c++, arrays, matrix, eigen

我最近开始使用[Eigen](http://eigen.tuxfamily.org/)库。我有一个将特征矩阵映射到 C/C++ 数组的问题。默认情况下，特征矩阵是列专业的。因此，如果我使用以下代码将矩阵映射到 C/C++ 数组，

```
double a[10];
double *p = &a[0];
MatrixXd(2,5) m;
for (int i=0; i<2;i++)
    for (int j=0; j<5;j++)
        m(i,j) = i+j;
cout<<m<<endl;
Eigen::Map<MatrixXd>(p,2,5) = m;
for (int i=0; i<10; i++)
    cout<<a[i]<<" ";
cout<<endl; 
```

输出是：

```
0 1 2 3 4
1 2 3 4 5
0 1 1 2 2 3 3 4 4 5 
```

如果我将 m 的定义更改为 row majored：

```
Matrix <double,2,5,RowMajor> m; 
```

我预计输出如下所示：

```
0 1 2 3 4
1 2 3 4 5
0 1 2 3 4 1 2 3 4 5 
```

但实际上结果还是和第一个一样。我的问题是，有没有办法将特征矩阵映射到 C/C++ 数组，以便数组的数据是基于行的？

我发现我可以使用 matrix.data() memember 函数来获得所需的结果，但我想知道我是否可以使用 map：

使用 matrix.data() 作品：

```
double a[10];
double *p = &a[0];
Matrix <double,2,5,RowMajor> m;
for (int i=0; i<2;i++)
    for (int j=0; j<5;j++)
        m(i,j) = i+j;
double *p1 = m.data();
for (int i=0; i<10; i++)
    cout<<p1[i]<<" ";
cout<<endl; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T21:10:17.590

重要的不是矩阵`m`的类型，而是`Map`模板中使用的类型。您必须将`Map`模板中使用的类型更改为行专业。

```
Eigen::Map<Matrix<double,2,5,RowMajor> >(p,2,5) = m; 
```

# wpf - 显示项目集合但仅选择一个的组合框

> ID：13535403
> 
> 赞同：1
> 
> 时间：2012-11-23T20:33:49.900
> 
> 标签：wpf, combobox

我正在寻找一种 ComboBox 类型，它将其项目显示为网格（像这个问题 - [Combobox Dropdown Like An Image Gallery](https://stackoverflow.com/questions/9038995/combobox-dropdown-like-an-image-gallery)）

但有一个额外的功能。

我需要将包含所选项目的整个“行”显示为框中的所选项目。

这可以通过建立在上述问题上来完成吗？ComboBox 甚至是首先要使用的正确控件吗？

我的第一个想法是将 ComboBox 绑定到包含数据集的较小列表的列表中的项目列表切割成块。

在我走这条路之前，我只是想通过一些 WPFers 伙伴来运行它。我希望这是有道理的。

谢谢！

克里斯

# php - 为日期时间 HTML 模式分配正确的值

> ID：13535405
> 
> 赞同：0
> 
> 时间：2012-11-23T20:34:09.970
> 
> 标签：php, html, mysql, datetime

我正在尝试将通知的日期从我的 MySQL 数据库转换并输出为 HTML 格式。

```
<time datetime=$DATE> $DATE-FOR-HUMANS </time> 
```

因此，它会因通知而异。

选择通知：

```
"select id,title,date_format(date, '%a %b %d, %Y %h:%i') as date from NOTICES"; 
```

变量：

```
$id = $arr['id'];
$date = $arr['date']; 
```

日期将如下所示：

```
Mon Jan 01, 2012 - 01:01 
```

我注意到“日期日期时间”的正确值应该是这样的：

```
Y-m-d\TH:i:s\Z 
```

所以，我必须改变输出。一个必须更易于人类阅读（2012 年 1 月 1 日星期一 - 01:01），另一个用于 HTML 模式。

我的问题是：如何将“$DATE”变量转换为可接受的格式并保留/制作另一个供人类阅读。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:37:19.767

如果您将查询更改为：

```
select id,title,UNIX_TIMESTAMP(date) as timestamp from NOTICES 
```

然后，您可以很容易地将其传递`$arr['timestamp']`给 PHP 的[`date`](http://php.net/date)函数并以多种方式对其进行格式化，因为您有日期的时间戳表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:45:23.013

让您的查询结果两种日期格式。

```
"select id, title, date, date_format(date, '%a %b %d, %Y %h:%i') as formatted_date from NOTICES"; 
```

# android - 在 Android 4.2 果冻豆上读取外部存储

> ID：13535406
> 
> 赞同：2
> 
> 时间：2012-11-23T20:34:10.210
> 
> 标签：android

请帮忙....

我已经为 Android 2.2 创建了一个应用程序，它创建一个文本文件并保存到 sd 卡。在另一个活动中，它读取此文件并存储到数组中。该应用程序在 2.2 上运行良好，在我的 samsung nexus 与 4.1 上运行良好。（ICS）但是我刚刚更新到果冻豆（4.2）并且应用程序现在在尝试打开文件时崩溃。我已经阅读了关于在 4.2 的清单中添加读取权限的文档，并添加了这个，但应用程序仍然崩溃。没有日志猫，因为它在模拟器上运行良好，但在我的手机上却不行。

4.2 或打开文件以进行读取的不同方式是否需要任何特殊权限？

这是我用于创建目录和写入文件的代码...

```
 //Create Reports Folder...........................................
      File directory = new File 
      (Environment.getExternalStorageDirectory().getPath()+"/PatRecords");
              if (!directory.exists()) { 
                      directory.mkdir(); 

                      Toast.makeText(this, "NEW FOLDER CREATED", Toast.LENGTH_SHORT).show();
              } 

            //If Sd card available, and writable with no errors, then write file.........
            if ((mExternalStorageAvailable = true)&(mExternalStorageWriteable = true)&(Error==0))
                {       

                try {
                    File ReportFile = new File(directory.getPath()+"/"+FileName$);
                    ReportFile.createNewFile();

                    FileOutputStream fOut = new FileOutputStream(ReportFile);                   
                    OutputStreamWriter OutWriter = new OutputStreamWriter(fOut);

                    OutWriter.write(Tester$+"\r\n");
                    OutWriter.write(Company$+"\r\n");
                    OutWriter.write(Customer$+"\r\n");
                    OutWriter.write(Address1$+"\r\n");
                    OutWriter.write(Address2$+"\r\n");
                    OutWriter.write(PCode$+"\r\n");
                    OutWriter.write(Instr$+"\r\n");
                    OutWriter.write(Serial$+"\r\n");

                    OutWriter.close();
                    fOut.close();

                    Toast.makeText(this, "NEW FILE CREATED", Toast.LENGTH_SHORT).show();

                } catch (Exception e) {
                    Toast.makeText(getBaseContext(), e.getMessage(),
                            Toast.LENGTH_SHORT).show();
                }//End of try/catch

              }//End Write..... 
```

这是用于阅读的代码....在 4.1 之前可以正常工作，但不能在 4.2...

```
FilePath=getIntent().getStringExtra("FileToOpen");

    //Open File and read first all data.......
    try {
        BufferedReader br = new BufferedReader(new FileReader(FilePath));

        Tester$ = br.readLine();
        Company$ = br.readLine();
        Customer$ = br.readLine();
        Address1$ = br.readLine();
        Address2$ = br.readLine();
        PCode$ = br.readLine();
        Instr$ = br.readLine();
        InstrSerial$ = br.readLine();
        NumOfTests$ = br.readLine();        
 br.close();
          Toast.makeText(this, "FILE LOADED OK.", Toast.LENGTH_SHORT).show();

          n = n+1;    //Increment n for next test number....

    }
    catch (IOException e) {
        //You'll need to add proper error handling here
        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show(); 
```

非常感谢任何帮助...感谢您的关注

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:51:31.490

在回答我自己的问题时，android 4.2 允许多个用户，现在可以打开文件，除非它们是由该用户创建的。由于我试图读取的文件是在 4.1 中创建的，因此它不允许应用程序打开和读取它。我运行了应用程序并创建了一个新文件，它运行良好。

希望这可以帮助任何有类似问题的人。

# xulrunner - 如何减小 XULRunner 的大小？

> ID：13535407
> 
> 赞同：3
> 
> 时间：2012-11-23T20:34:16.497
> 
> 标签：xulrunner

XULRunner 很大，是我们平台的一个依赖项。

它是 OSX 的两倍——我猜是因为它是为 32 位和 64 位构建的。

如何最好地减小 XULRunner 的大小？对于最大的文件（XUL 数据）来说，像 UPX 这样的东西是不可能的。从源代码构建是可能的，但对于 3 个平台来说有点痛苦......

有任何想法吗？

# windows-installer - 在安装屏蔽中从 zip 文件中读取数据

> ID：13535410
> 
> 赞同：1
> 
> 时间：2012-11-23T20:34:30.003
> 
> 标签：windows-installer, installshield

我正在为我的数据文件创建安装程序，数据文件存在于 zip 文件夹中，我希望每当用户单击安装程序时，应该将 zip 中的数据文件提取到指定的文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:24:14.287

只需创建自定义操作，即可将您的文件提取到指定文件夹。
例如：添加到安装您的 DATA.zip 和 7za.exe（来自 7Zip 的控制台实用程序）。创建使用所需参数（存档文件、指定目录等）运行 7za 的自定义操作，并提取您的文件。

# html - HTML5 离线存储用例？

> ID：13535412
> 
> 赞同：0
> 
> 时间：2012-11-23T20:34:50.817
> 
> 标签：html, offlineapps

对不起这个问题，但是这里的每个人都在谈论IndexedDB，WebSQL，本地存储，所以我的问题很简单：

如果应用程序总是在刷新新内容（想想 Facebook 或电子商务网站），那么使用离线存储是否有意义？如果是，那么我要存储什么？用户的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:36:35.410

是的，这是有道理的。

假设，我们有很多用户数据和应用程序数据。应用程序数据对所有用户共享，而用户数据对登录用户是私有的。使用了两个客户端数据库。数据存储在 IndexedDB（或 WebSQL）中。一旦用户访问该页面，数据就会立即呈现，而无需向后端服务器发送请求。

呈现页面后，发送带有 If-None-Match etag 标头的 XHR GET 请求。根据我们是否需要更新，服务器将回复 302 或 200。这样可以节省带宽和服务器负载。

# javascript - 如何使用循环获取 JSON 数据的值？

> ID：13535413
> 
> 赞同：-1
> 
> 时间：2012-11-23T20:34:50.380
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [遍历 JSON 数据？](https://stackoverflow.com/questions/13472572/iterate-through-json-data)

我又在问这个问题。

我有一个如下的 JSON 数据

```
{
    "computer": [
        {
            "product_id": "6",
        },
        {
            "product_id": "10",
        }
    ],
    "Stationery": [
        {
            "product_id": "11",
        }
    ]
} 
```

我想在 jQuery/javascript 中遍历这些类型的 JSON 数据。我怎样才能做到这一点 ？？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T20:36:11.063

如果`obj`是你的对象，你可以这样做：

```
for (var key in obj) {
  console.log(obj[key]);
} 
```

我在这里假设您没有一些[JSON](http://json.org/)，而是一个普通的 javascript 对象。

如果它真的是 JSON，那是一个字符串，你必须先解析它：

```
var obj = JSON.parse(yourJsonString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T20:47:41.750

你可以这样迭代

```
var dataObj = {
    "computer": [
        {
            "product_id": "6",
        },
        {
            "product_id": "10",
        }
    ],
    "Stationery": [
        {
            "product_id": "11",
        }
    ]
};

for (var key in dataObj) {
  console.log(key + ' ' + dataObj[key]);
} 
```

# algorithm - 使用动态规划最大化

> ID：13535415
> 
> 赞同：6
> 
> 时间：2012-11-23T20:34:54.690
> 
> 标签：algorithm, optimization, dynamic-programming

我正在尝试为类似于以下问题的问题提出解决方案：

*   设 M 为 n 行 T 列的矩阵。
*   让每一行都有正的非递减值。（例如行 = [1, 2, 30, 30, 35]）
*   令 M[i][j] 对应于在考试 i 上花费 j 单位时间获得的分数。

使用动态规划，解决问题，以找到花费 T 单位时间学习的最佳方式，这将产生最高的总分。

在此先感谢您的帮助:)

我的尝试：

```
S[][] = 0

for i = 1:n
   for j = 0:T
       max = 0
       for k = 0:j
           Grade = G[i][j]+ S[i-1][T-k]
           if Grade > max
              max = Grade
       end for
       S[i][j] = max
    end for
end for 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T20:43:24.470

让我们代表您在第一次考试中`S[i][j]`花费时间单位可以获得的最佳分数。您可以通过查看的每个值来计算。对于 的每个元素，请记住前一行中给出最佳结果的值。及时学习所有考试的最佳分数的答案是公正的，您可以使用您记住的值来确定每次考试花费多少时间。`j``i``S[i][j]``S[i-1][k]``k``S``k``T``S[n][T]``k`

```
S[][] = 0

for j = 0:T
   S[0][j] = M[0][j]

for i = 1:n
   for j = 0:T
       max = 0
       for k = 0:j
           # This is the score you could get by spending j time, spending
           # k time on this exam and j-k time on the previous exams.
           Grade = S[i-1][j-k] + M[i][k]
           if Grade > max
              max = Grade
       end for
       S[i][j] = max
    end for
end for 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T20:58:55.760

我假设你的问题中的 vy G 和 M 是同一个意思，如果你根本不花任何时间参加考试，你会得到 0 分。

在这种情况下，我将 DP 矩阵定义为 D[i,t] = 通过在从 0 到 i 的考试子集上花费 t 个总单位时间可获得的最佳分数。

Wlog 您可以假设矩阵的第一列全为 0。

在这种情况下，您可以观察到 D 满足以下递归：

*   D[0, t] = M[0, t]
*   D[i, t] = max_{0 <= k <= t} (M[i, k] + D[i-1, tk])

这是您应用动态规划所需要的

# php - PHP - 全局设置修剪功能

> ID：13535418
> 
> 赞同：0
> 
> 时间：2012-11-23T20:35:09.040
> 
> 标签：php, echo, global, trim

我正在尝试在全局包含的文件中修剪 GET 变量。

我正在尝试在我的全局包含中设置以下代码，

```
$profile = $_GET["profile"];
trim($profile, "/"); 
```

然后，当我尝试回显 $profile 时，修剪/输出的唯一方法是在我回显它的文件中手动修剪它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:38:15.943

怎么样，将修剪后的值返回给变量：

```
$profile = $_GET["profile"];
$profile = trim($profile, "/"); 
```

或者

```
$_GET["profile"] = trim($_GET["profile"], "/");
$profile = $_GET["profile"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:38:32.113

我不喜欢提倡在全球范围内进行修改（通常*是不好的*）但是..

```
$_GET["profile"] = trim($_GET["profile"], '/'); 
```

并将在超全局数组中进行修改。

最好将您的 tmmed 版本存储在会话或类似文件中。

# php - PHP：如何在 ascii 文件的 2 个条件之间查找和解析文本

> ID：13535421
> 
> 赞同：0
> 
> 时间：2012-11-23T20:35:22.440
> 
> 标签：php, string, parsing

我需要在 PHP 中解析的文件 (sample.txt) 中有一些文本。它的结构是：

```
--Forwarded Message Attachment--
To: sample@sample.org
Subject:  W W Cadena
Date: Thu, 15 Nov 2012 19:33:10 -0600
From: sample@gmail.com

Nombre y Apellido       W w c
Email       sample@gmail.com
Edad        27
 México
Ciudad      Sabinas
hi there!

--Forwarded Message Attachment--
To: sample@sample.org
Subject: Z M
Date: Thu, 15 Nov 2012 18:44:30 -0600
From: sample@gmail.com

Nombre y Apellido       Zaida Macias
Email       sample@gmail.com
Edad        28
 México
Ciudad      tijuana
hi there!
hi there!

--Forwarded Message Attachment--
To: sample@sample.org
Subject: W W Cadena
Date: Thu, 15 Nov 2012 19:33:10 -0600
From: sample@gmail.com

Nombre y Apellido       W w c
Email       sample@gmail.com
Edad        27
 México
Ciudad      Sabinas
:D 
```

我已经减去了： - Nombre y Apellido - 电子邮件 - Edad - Ciudad

我不知道该怎么做，是解析以下部分，即“消息”。我一直在考虑逐行阅读，直到找到“--”，这将是下一个数据块。

被困在那部分，使用：

```
$line = fgets($fh); 
$incioLine = "--";
$mensaje ="";

$check =substr ($line, 0,1 );
    if ($check != $incioLine){
        $mensaje .= $line;
    } 
```

但是“mensaje”附加了我的所有数据。

非常感谢帮助，问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:39:21.607

尝试

```
$check = substr($line, 0, 2); 
```

那应该行得通。你需要 2 个字符。

# types - Go 类型转换和未导出的 CGo 类型

> ID：13535422
> 
> 赞同：2
> 
> 时间：2012-11-23T20:35:25.637
> 
> 标签：types, type-conversion, go

假设有一个 CGo 包，其结构定义如下：

```
package test
...
type Test struct {
    Field *C.C_Test
}
... 
```

现在假设我从其他地方得到`unsafe.Pointer`的我知道指向`C_Test`C 结构。

我是否正确理解在除 之外的包中*完全*没有*办法*从值创建新`test.Test`实例？`unsafe.Pointer`*`test`*

 *尝试使用类似`&test.Test{ptr}`, where `ptr`is `unsafe.Pointer`value 之类的东西，由于字段值中的消息显而易见的原因而失败`cannot use ptr (type unsafe.Pointer) as type *test._Ctype_C_Test`，并且类型转换为`*test._Ctype_C_Test`也无法正常工作，因为此类型未导出。
而且我认为让我的另一个模块使用 CGo 并在其中重新定义相同的 C 结构也不起作用，因为该包将具有类似`client._Ctype_C_Test`但`test.Test`requires的内容`test._Ctype_C_Test`，并且从类型检查器的角度来看它们是不同的。

**一些背景知识：**当我使用库时，我需要一种方法来创建这种`GtkBuilder`结构[`go-gtk`](https://github.com/mattn/go-gtk)。
它的`GtkBuilder.GetObject(name)`方法返回`*GObject`指针，该指针又包含`unsafe.Pointer`我需要以某种方式转换为`gtk.GtkEntry`结构的字段。`gtk.GtkEntry`本身包含类型的隐式字段，该字段具有类型`gtk.GtkWidget`的显式字段`*C.GtkWidget`，因此我需要转换`unsafe.Pointer`为`*C.GtkWidget`，但我不能，正如我在上面的简单示例中所描述的那样。

**更新：**这是我试图强制工作的代码：[https ://gist.github.com/4141343](https://gist.github.com/4141343)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:42:23.920

我问了一个关于 golang-nuts 的[问题](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/PsbWJeWD0VQ)，并给出了一个关于如何做我想做的事的例子。它现在似乎起作用了。这是伊恩回答的代码：

```
var t test.Test
p := (*unsafe.Pointer)(unsafe.Pointer(&t.Field))
*p = unsafe.Pointer(u) 
```

因此，所需要的只是双重转换为`unsafe.Pointer`然后转换为`*unsafe.Pointer`. 我想出了以下代码来简化分配过程：

```
func Assign(to unsafe.Pointer, from unsafe.Pointer) {
    fptr := (*unsafe.Pointer)(from)
    tptr := (*unsafe.Pointer)(to)
    *tptr = *fptr
}

func Init(builder *gtk.GtkBuilder) {
    messageNameEntryWidget := gtk.GtkWidget{}
    Assign(unsafe.Pointer(&messageNameEntryWidget.Widget),
           unsafe.Pointer(&builder.GetObject("messageNameEntry").Object))
} 
```

但是，然后，我决定放弃使用 GTK，因为这样做很痛苦）但这与问题无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:05:11.723

有点像

```
foo := test.Test{}
*(unsafe.Pointer)(&foo.Field) = ptr 
```

也测试了？我希望这能奏效。（希望如此。有点。）

编辑 2012-11-24 13:42 UTC：第二次尝试

```
package main

/*

#include <stdio.h>
#include <stdlib.h>

typedef struct {
        int foo;
        char *bar;
} Test_t;

void test_dump(Test_t *test) {
        printf(".foo %d, .bar %s\n", test->foo, test->bar);
}

void *test_new(int foo, char *bar) {
        Test_t *p = malloc(sizeof(Test_t));
        p->foo = foo;
        p->bar = bar;
        return p;
}

*/
import "C"

import "unsafe"

type Test struct {
        Field *C.Test_t
}

func main() {
        hello := C.CString("Hello")
        defer C.free(unsafe.Pointer(hello))
        test := &Test{(*C.Test_t)(C.test_new(42, hello))}
        C.test_dump(test.Field)
} 
```

* * *

```
$ go clean && go build && ls
main.go  13535422
$ ./13535422 
.foo 42, .bar Hello
$ 
```*

# java - Android 密钥库停止工作

> ID：13535424
> 
> 赞同：54
> 
> 时间：2012-11-23T20:35:33.627
> 
> 标签：java, android, apk, keystore, jarsigner

就在最近，我遇到了密钥存储问题。我知道已经有很多关于这个问题的问题了。我已经阅读了所有内容并疯狂地用谷歌搜索。

# 错误：

```
keytool error: java.io.IOException: Keystore was tampered with, or password was incorrect
java.io.IOException: Keystore was tampered with, or password was incorrect
    at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:772)
    at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:55)
    at java.security.KeyStore.load(KeyStore.java:1214)
    at sun.security.tools.KeyTool.doCommands(KeyTool.java:885)
    at sun.security.tools.KeyTool.run(KeyTool.java:340)
    at sun.security.tools.KeyTool.main(KeyTool.java:333)
Caused by: java.security.UnrecoverableKeyException: Password verification failed
    at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:770)
    ... 5 more 
```

# 我正在使用的软件：

### 爪哇

```
java version "1.7.0_21"
Java(TM) SE Runtime Environment (build 1.7.0_21-b11)
Java HotSpot(TM) 64-Bit Server VM (build 23.21-b01, mixed mode) 
```

### 蚀

```
Version: 3.8.0
Build id: I20120502-2000 
```

### 最新的 ADT 插件

### 最新的安卓 SDK

# 这是我所知道的：

*   我没有丢失密码，它从未改变过。
*   我无法找回密码（我知道密码）。
*   如果不发布全新的应用程序，我无法使用不同的密钥签署现有应用程序（因此我无法发布任何更新）。

# 这是我所做的：

*   我已经多次卸载并重新安装了 Eclipse。
*   我已经卸载并重新安装了 android ADT 插件。
*   我已经多次删除并重新下载了最新的 Android SDK。
*   我已经卸载并重新安装了JDK7。
*   我尝试使用我的密钥库的备份。
*   我已经使用“md5sum KEYSTORE”检查了 MD5 校验和，并与备份进行了比较（相同的 MD5 输出 - 未被篡改）。
*   我试过暴力破解密钥库（我已经找回了我知道的密码）。
*   我创建了一个测试密钥（使用当前设置）并测试了密码，它似乎工作正常（所以有些东西发生了变化）。
*   我尝试手动导出 android .apk，然后尝试对其进行签名（在 Eclipse 之外）。

# 这是我导出签名应用程序的方式：

*   **通过 Eclipse：**使用 File > Export > Export Android Application 导出。
*   **JDK7 之前：** jarsigner -verbose -keystore KEYSTORE FILE ALIAS。
*   **使用 JDK7：** jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore KEYSTORE FILE ALIAS。

# 还有什么需要弄清楚或尝试的？

*   ~~一些引用/URL 说要删除“trusted.certs”文件？~~
*   ~~尝试删除“debug.keystore”？~~
*   ~~更新 Eclipse 或任何 Android 开发工具会影响我的密钥库吗？~~
*   ~~将 Java 从 jdk6 更新到 jdk7 会产生任何问题吗？~~
*   ~~这是否会扰乱或改变 jarsigner 的工作方式？~~

# 用户建议：

*   尝试使用 JDK6，但我最近能够导出应用程序。
*   ~~在我的 local.properties 中检查了 key.store.password 或 key.alias.password~~
*   ~~在eclipse中自动取消选中构建并清理您的项目~~
*   ~~尝试删除工作区中的 .metadata 文件夹并清除所有临时文件夹。~~

# 概括

*   密钥库没有改变，
*   我有密钥库的密码，
*   我最近使用以下方法成功导出了一个应用程序：
    *   Eclipse 3.8（和 Eclipse 4.0+），
    *   最新的 Java 7，
    *   最新的 ADT 插件。
*   我最后一次成功导出和构建是在几周前使用 Eclipse 3.8、最新的 Android 工具和 Java 7 并使用相同的密码。

# 更新 (6/29/14)

*   我已经使用：*keytool -list -keystore KEYSTORE*成功证明并显示我的 4 个密钥中的 3 个有效。
*   我暴力破解了最后一个密钥并从密钥库中获取了密码（我已经知道的密码），但是当我输入签名时密码不起作用。我用过：*java -jar* AndroidKeystoreBrute_v1.02.jar *-m 3 -k KEYSTORE -d WORDLIST*。
*   奇怪的是，有时当我很快在eclipse中输入密码时，我的别名会出现，我可以成功导出我的应用程序。（我知道这很疯狂）。
*   更新了 Java 版本。

如果我很快输入密码，它有时会起作用。

似乎第一次打开 Eclipse 并输入密码让我可以使用密钥库。

显然，如果一切都失败了，我将不得不创建一个新的密钥库。我真的很想解决这个问题，除了用新密钥重新发布之外，我不确定现在该怎么做。

如果密钥无法正常恢复，我可能会在 Github 上开源。

* * *

# 解决方案（2014 年 6 月 29 日）：

特别感谢用户 Erhannis！

这是我所做的：

该命令每次都会对我出错：

```
keytool -importkeystore -srckeystore old.keystore -destkeystore new.keystore -v 
```

既然你告诉我我们可以从 Java Keystore(.jks) 中提取私钥，我深入挖掘并最终使用了该命令的变体。我按照您在[此处](https://security.stackexchange.com/a/3795)和[此处](http://www.tbs-certificates.co.uk/FAQ/en/626.html)发布的链接进行操作：

```
keytool -importkeystore -srckeystore old.keystore -destkeystore new.keystore -deststoretype pkcs12 
```

在提取私钥并存储为 PKCS12 后，我认为提取了我的私钥并将其放回了一个全新的 Java Keystore：

```
keytool -importkeystore -srckeystore new.keystore -srcstoretype pkcs12 -destkeystore final.keystore -deststoretype jks 
```

* * *

## 参考：

[http://developer.android.com/tools/publishing/app-signing.html#signapp](http://developer.android.com/tools/publishing/app-signing.html#signapp)

[http://code.google.com/p/android-keystore-password-recover/](http://code.google.com/p/android-keystore-password-recover/)

## 我已阅读的 StackOverflow URL 列表：

[如何在 Android 中处理丢失的 KeyStore 密码？](https://stackoverflow.com/questions/6089813/please-advice-needed-lost-keystore-password)

[无效的密钥库问题？](https://stackoverflow.com/questions/6035970/invalid-keystore-problem)

[Android：我丢失了我的 android 密钥库，我该怎么办？](https://stackoverflow.com/questions/4459719/android-i-lost-my-android-key-store-what-should-i-do)

[我丢失了 .keystore 文件？](https://stackoverflow.com/questions/4322367/i-lost-my-keystore-file)

[忘记 Keystore 密码，考虑暴力检测。它会破坏密钥库吗？](https://stackoverflow.com/questions/6149530/forgot-keystore-password-thinking-of-brute-force-detection-will-it-corrupt-the)

[我丢失了 android Keystore 文件的密码](https://stackoverflow.com/questions/8877354/i-have-lost-the-password-for-android-keystore-file)

[在 Eclipse 中运行我的签名、发布密钥库时出现问题](https://stackoverflow.com/questions/4280507/problem-running-my-signed-release-keystore-in-eclipse)

[Android - 忘记密钥库密码。我可以解密密钥库文件吗？](https://stackoverflow.com/questions/8894987/android-forgot-keystore-password-can-i-decrypt-keystore-file)

[Android 发布密钥库问题：“密钥库被篡改，或密码不正确”](https://stackoverflow.com/questions/9309975/android-release-keystore-issue-keystore-was-tampered-with-or-password-was-inc)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-02T03:17:40.217

我可能有同样的问题。我从来没有弄清楚它失败的原因（尽管我想知道是不是因为密钥库密码短于 6 位），但是我能够将我的密钥复制到一个新的密钥库中，然后我将其重命名以替换旧的，之后它神秘地工作了（使用新密码）。顺便说一句，需要密钥密码。关闭[https://security.stackexchange.com/a/3795](https://security.stackexchange.com/a/3795)，我做了以下事情：

1.  `keytool -importkeystore -srckeystore old.keystore -destkeystore new.keystore -v`
2.  两次输入新的密钥库密码
3.  当它询问我源密钥库密码时点击`Enter`（留空）
4.  输入密钥密码

在仔细检查了新的工作后，我只是将它复制到旧的上。希望对你有帮助; 祝你好运。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-04T09:40:28.240

我遇到了同样的问题，我尝试了这个线程中建议的所有内容，但没有任何东西能够保存我的别名密码。关键是我**绝对确定**密码，因为我已经更新了应用程序四次。我收到*“密钥库被篡改或密码不正确”*消息。

# 解决方案

似乎在使用 eclipse 创建密钥库**时，在密码前添加了一个空格字符！**

这个讨厌的错误显然已在更高版本中修复，导致我无法使用我认为正确的密码签署我的应用程序。

基于此 SO 链接：[Ant failed to build signed apk after update to android v20](https://stackoverflow.com/questions/11625262/ant-fails-to-build-signed-apk-after-updating-to-android-v20)我建议您**尝试在密码之前或之后添加一个空格字符**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-29T22:29:53.873

尝试删除工作区中的*.metadata*文件夹并清除所有临时文件夹。如果您的密钥库文件没有损坏，并且您尝试正确重新安装 Eclipse、ADT、Android SDK 和 Java SDK，我看不出这个奇怪问题的其他可能原因，除了 .metadata 缓存文件和\或一些临时损坏。

**另一个建议**

尝试使用[Portecle](http://portecle.sourceforge.net/)一个实用程序来管理和检查密钥库、密钥、证书、证书请求、证书吊销列表等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T13:01:07.133

我会建议更多的热量和试验。

有耐心应用这些，

## 脚步：

1.  在eclipse中取消自动构建（Project-> Build Automatically）并清理您的项目。
2.  再次构建它。（右键单击项目+构建项目）
3.  出口项目。
4.  选择 Android 导出。（为您自动对齐）
5.  选择你的钥匙。提供密码。别名应该出现在列表中。（请确保大写锁定）。有时我们提供正确的密码，但由于大写，它总是失败；）
6.  请让我知道这对你有没有用。

希望这会对你有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T19:59:02.613

您是否在 local.properties 文件中存储了诸如 key.store.password 或 key.alias.password 之类的值？其中任何一个都不正确吗？

我很好奇使用 JDK6 创建并在 JDK7 中验证的密钥是否会出现一些错误 - 它可以解释为什么您为测试创建的新密钥有效，但旧密钥没有。尝试降级到 JDK6，看看是否能解决它 - 其他人在 JDK7 中遇到 jarsigner 问题，当他们降级到 6 时就消失了。如果可行，请提交错误报告并要求提供补丁，以便您可以安全地升级到 Java 7 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-07T18:13:01.790

我最近也在与这个问题作斗争，并尝试了此处和其他地方列出的所有建议。最后确定了一个导致我最终错误的愚蠢错误 - 我想在这里分享它以防它对你们中的任何人有所帮助。

如果您像我一样在您的机器上有多个 Java 版本并且在您最初创建密钥库和现在尝试签署 APK 之间升级了 JRE/JDK，则更可能出现这种情况。

出于某种原因，我们的编译指令引用了完整的 Java 路径，如下所示：

C:\Progra~1\Java\jdk1.6.0_45\bin\jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore cre80ve.keystore unsigned.apk cre80ve

上面的一个建议让我认为这可能根本不是密码问题，可能是版本不兼容导致了问题。所以我运行了以下命令：

keytool -list -keystore cre80ve.keystore

使用我知道是正确的密码，你瞧，它确认它是正确的密码。

然后，我在（旧）Java 版本的路径中删除了显式引用。这使它自动获取最新版本的 Java（在我的例子中为 jdk1.8.0_31）：

jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore cre80ve.keystore unsigned.apk cre80ve

一切都开始正常了！

底线：这可能根本不是密码问题，而是不同版本的 Java 或 Android SDK 导致了问题，所以记得检查一下。

一旦它开始工作，请记住将您的密钥库和密码备份在安全的地方:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-08T21:53:56.633

我的关键别名突然停止工作。（好的，经过 Android Studio 和 Java 的几次更新）。

我尝试了该线程以及其他线程的所有解决方案。就我而言，解决方案令人惊讶。我有几个别名的密钥库。除了一个密码与密钥库相同的密码外，没有一个在工作。但不幸的是，它不是我需要的。这让我在没有任何逻辑的情况下思考。我将单个别名复制到新的密钥库

```
keytool -importkeystore -srckeystore old.keystore -destkeystore new.keystore -srcalias importantalias 
```

然后我将别名密码更改为与密钥库的密码相同：

```
keytool -keypasswd -keystore new.keystore -alias importantalias 
```

最后我能够签署我的apk。它看起来像愚蠢的错误，可以浪费一天的开发时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-26T00:05:39.597

刚遇到这个问题 - 突然间，Android Studio 忘记了我的密码，并且不会使用我在 gradle 文件中的密码。我在同一个项目中拥有相同的密钥文件和密码已有 6 年了！

所以我手动输入了它们 - 但它一次又一次地验证失败。我尝试了一些方法，例如使缓存无效、重新启动 Android Studio 和恢复密钥库的备份，但没有任何帮助。

最后，我绝望地尝试切换密钥库密码和密钥密码。瞧——它奏效了！几年前，当我将密码输入 Gradle 构建文件时，我发现我已经切换了密码，出于某种原因，我从未注意到。

**结论：永远不要 100% 确定你做对了。**

# asp.net - 将 sessionid 传递给 url asp.net

> ID：13535425
> 
> 赞同：0
> 
> 时间：2012-11-23T20:35:40.360
> 
> 标签：asp.net, url-rewriting, sessionid, unique-id

我已经手动为 url 分配了一个 sessionid： [http](http://www.mysite.com/(S(jdave010098uqfraiasdp9999))/place.aspx) ://www.mysite.com/(S(jdave010098uqfraiasdp9999))/place.aspx 以便标签捕获“jdave010098uqfraiasdp9999”以识别对链接的点击并存储在D B。但大多数时候 sessionid 会发生变化，当点击链接时会导致结果 url 中的 sessionid 不同。我的网络配置是：

```
<sessionState cookieless="true" regenerateExpiredSessionId="false" timeout="30"/> 
```

关于如何将销售生成的 ID 分配给 URL 的任何想法？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:20:58.863

如果您的应用程序在会话容器中存储任何内容，则会话 ID 不应更改。另一方面，如果您不在会话中存储任何内容，则会话 ID 可以在连续请求时自由更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:39:55.153

您可以像这样分配 sessionID

```
Session["UserId"] = something; 
```

# c# - WinRT：独立显示上下AppBar

> ID：13535427
> 
> 赞同：2
> 
> 时间：2012-11-23T20:35:47.383
> 
> 标签：c#, windows-runtime, windows-store-apps, appbar

我需要提供用户通过向下滑动打开上部 AppBar 但保持下部 AppBar 关闭的功能。

这在 Windows 应用商店应用中可行吗？谁能指出我正确的解决方案或给出几行代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:07:04.347

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.page.topappbar.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.page.topappbar.aspx)

使用 a`Page.TopAppBar`但不使用`Page.BottomAppBar`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:00:17.017

[您可以使用WinRT XAML Toolkit](http://winrtxamltoolkit.codeplex.com/)中的 CustomAppBar 来解决此问题。

这允许您覆盖事件以正确显示/隐藏。

# ajax - jqgrid在显示在表格之前修改从ajax调用返回的数据

> ID：13535429
> 
> 赞同：3
> 
> 时间：2012-11-23T20:35:53.693
> 
> 标签：ajax, jqgrid

我必须将从服务器接收到的一些数据显示为像这样的 json 对象

```
{"rowndx":"0","rows":"25","rowstotal":"100","rowsdata":[ 
["00","DEVICE001","T0_IHOME","1","***","1","10"], 
["01","DEVICE002","NO_DEVICE","1","***","1","10"],
["02","DEVICE003","NO_DEVICE","0","***","1","10"],
..... 
```

在表格中显示收到的数据之前，我想在必要时进行更改，将单位添加到数字或用单词替换数字（例如 0 -> OFF 1-> ON）为此，我在 ajax 选项“成功”中关联“我的编码功能。但是，在这种情况下，“正在加载...”消息始终可见，并且不允许进行其他操作。我将我的重新编码过程移至“完整”ajax 选项，这一次它似乎有效。但我不明白我的错误是什么，我不知道我的程序是否可以工作。这是我的表 ajax 配置

```
 url      : "devtbl.json",
    mtype    : "POST",
    datatype : "json",
    postData : ......

    ajaxGridOptions: {
      type       : 'post',
      contentType: 'application/json',
      async      : false,
      complete   : DEVparse_serverdata,
      error      : function() { alert('Something bad happened. Stopping');},
    },

    jsonReader : {
      root        : "tablerows",
      page        : "currentpage",
      total       : "totalpages",
      records     : "totalrecords",
      cell        : "",
      id          : "0",
      userdata    : "userdata",
      repeatitems : true
    }, 
```

和我的编码功能

```
 function DEVparse_serverdata(js , textStatus) {

  var jsontablereply = {} ;
  var rowsxpage_int  = parseInt(UB.rowsxpage.DEVtable) ;
  var jsonreply =  jQuery.parseJSON(js.responseText) ;

  jsontablereply.currentpage  = "" + (1 + (parseInt(jsonreply.rowndx) / rowsxpage_int));
  jsontablereply.totalpages   = "" + parseInt((parseInt(jsonreply.rowstotal) + (rowsxpage_int-1)) / rowsxpage_int) ;
  jsontablereply.totalrecords = jsonreply.rowstotal;

  jsontablereply.tablerows = [] ;
  $.each(jsonreply.rowsdata, function(ndx, row) {
     var rowarray = [] ;

     rowarray[0] = row[0] ;
     rowarray[1] = row[1] ;
     rowarray[2] = row[2] ;
     rowarray[3] = row[3] ;
     rowarray[4] = row[4] ;

     switch (row[2]) {
       case "NO_DEVICE":
            rowarray[5] = "***" ;
            break ;

       case "T0_IHOME":
            rowarray[5] = "T=" + row[5] + "°C" ;
            break ;
     }
     jsontablereply.tablerows[ndx] = rowarray ;
  }) ; // each

  jQuery("#DEVtbl")[0].addJSONData(jsontablereply);
} 
```

（我是 Jquery 的初学者，我的编码风格很差）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T11:02:36.437

您必须通过多种可能性来实现您的要求。

在许多情况下，可以为case 使用预定义[的 formatter: "select"](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#formatter_type_select)或[formatter: "checkbox"](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#predefined_format_types)`0 ->OFF 1-> ON`。

另一种可能性是使用[自定义 formatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)和[unformatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter#unformatting)。自定义格式化程序只是回调，jqGrid 在构建相应列的单元格的 HTML 片段期间将使用它。如果您需要共同显示某些文本，格式化程序将如下所示

```
formatter: function (cellValue) { return $.jgrid.htmlEncode(cellValue); } 
```

自定义格式化程序的优点是您不仅可以对源文本进行许多修改，还可以根据*其他列*的信息构建包含单元格的单元格（参见`rawData`下面的参数）

```
formatter: function (cellValue, options, rawData, action) {
    // options is the the object defined as
    //         {rowId:rowId, colModel:cm, gid:gridId, pos:colpos }
    // rawData contains the representation of the WHOLE row
    //         the most problem of the value is that it is in the same
    //         format as the input data. So if will be array of items
    //         in your case or if could be XML fragment for the row.
    //         Additional problem one will have in case of usage of
    //         loadonce:true. Ath the first load the rawData will be
    //         array of strings and on later could be named object
    //         with the properties corresponds to the column names.
    // action is typically non-important and is 'add' or 'edit'
} 
```

例如，第 5 列的自定义格式化程序可以是

```
formatter: function (cellValue, options, rawData, action) {
    switch (rawData[2]) {
    case "NO_DEVICE":
        return "***";
    case "T0_IHOME":
        return "T=" + $.jgrid.htmlEncode(cellValue) + "°C" ;
    default:
        return $.jgrid.htmlEncode(cellValue);
    }
} 
```

另一种选择是使用`beforeProcessing`回调。它主要接近您当前代码的逻辑。在`beforeProcessing`回调内部，您可以在 jqGrid处理数据*之前*对服务器返回的数据进行任何修改。

# python - 使用 NumPy datetime64 进行矢量化年/月/日操作

> ID：13535439
> 
> 赞同：7
> 
> 时间：2012-11-23T20:36:31.763
> 
> 标签：python, numpy

我想从年、月和日的一维向量创建 NumPy datetime64 对象的向量，并且还可以反向，即从每日 datetime64 向量中提取年、月或日的向量。我正在使用 NumPy 1.7.0b2。

例如，假设

```
years = [1990, 1992, 1995, 1994]
months = [1, 6, 3, 7]
days = [3, 20, 14, 27] 
```

现在我想使用这些年、月和日创建一个长度为 4 的 np.datetime64 向量。有没有不使用 Python 循环的方法？

换个方向，假设`dates`是一个数据类型为 np.datetime64 的向量，频率是每天。然后我将能够得到类似的东西`x.DAYS()`并取回一个 vector `[3, 20, 14, 27]`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-30T22:10:27.567

```
import numpy as np
def compose_date(years, months=1, days=1, weeks=None, hours=None, minutes=None,
              seconds=None, milliseconds=None, microseconds=None, nanoseconds=None):
    years = np.asarray(years) - 1970
    months = np.asarray(months) - 1
    days = np.asarray(days) - 1
    types = ('<M8[Y]', '<m8[M]', '<m8[D]', '<m8[W]', '<m8[h]',
             '<m8[m]', '<m8[s]', '<m8[ms]', '<m8[us]', '<m8[ns]')
    vals = (years, months, days, weeks, hours, minutes, seconds,
            milliseconds, microseconds, nanoseconds)
    return sum(np.asarray(v, dtype=t) for t, v in zip(types, vals)
               if v is not None)

years = [1990, 1992, 1995, 1994]
months = [1, 6, 3, 7]
days = [3, 20, 14, 27]

print(compose_date(years, months, days)) 
```

产量

```
array(['1990-01-03', '1992-06-20', '1995-03-14', '1994-07-27'], dtype='datetime64[D]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:42:58.737

我不知道没有某种循环的方法，但我用列表理解将它内联了一点：

```
years = [1990, 1992, 1995, 1994]
months = [1, 6, 3, 7]
days = [3, 20, 14, 27]
np.array(['{0[0]}-{0[1]}-{0[2]}'.format(x) for x in zip(years, months, days)], dtype='datetime64') 
```

反过来，您必须将每个项目转换为常规的`datetime`. 您可以通过调用 来做到这一点`astype(object)`，它适用于整个数组或单个对象。你做哪一个可能取决于你如何使用数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T11:09:20.443

这可以在没有显式循环的情况下使用[pandas](https://pandas.pydata.org/pandas-docs/stable/timeseries.html#assembling-datetime-from-multiple-dataframe-columns)完成（代码取自 pandas 文档）：

```
 df = pd.DataFrame({'year': [2015, 2016],
   ....:                    'month': [2, 3],
   ....:                    'day': [4, 5],
   ....:                    'hour': [2, 3]})
   ....: 

In [32]: pd.to_datetime(df)
Out[32]: 
0   2015-02-04 02:00:00
1   2016-03-05 03:00:00
dtype: datetime64[ns] 
```

当然，您可以将日期时间“下限”为“天”并返回一个 numpy 数组`.values`

# c# - 将 IntPtr 获取到 IWin32Window 以替换 AppDomain.GetCurrentThreadId()

> ID：13535440
> 
> 赞同：1
> 
> 时间：2012-11-23T20:36:36.933
> 
> 标签：c#, winforms, intptr

嗨，在 c# WinForms 中，为了替换已弃用的，`AppDomain.GetCurrentThreadId()`我必须考虑以下内容

```
...
[DllImport("user32.dll", SetLastError = true)]
static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

private static IWin32Window _owner;
... 
```

# #

```
uint processID = 0;
IntPtr ptr =  _owner.Handle.ToPointer();
GetWindowThreadProcessId(ptr, out processID);
int replacementCurrentThreadId = processID; 
```

除非它不起作用 - 错误是

`The best overloaded method match for has some invalid arguments`

或者

`Cannot implicitly convert type 'void*' to 'System.IntPtr'. An explicit conversion exists (are you missing a cast?)`

我相信我有正确的方法（获取 currentThreadId），但它不会*让*我分配值 - 大概是因为它们是指针（？）任何帮助都会得到帮助

# c# - 如何确定存储桶中是否存在 Couchbase 视图？（.NET API）

> ID：13535442
> 
> 赞同：1
> 
> 时间：2012-11-23T20:36:47.927
> 
> 标签：c#, .net, nosql, couchbase

目前，当您在尝试检索视图后尝试执行查询时，您会发现视图不存在：

```
var result = _couchClient.GetView<etc>("DocumentName", "ViewNameThatDoesNotExist");
result.Count(); // This returns a service exception 
```

在 Count 抛出异常后发现它不存在，所以目前我使用 try/catch 来确定是否存在异常。

有没有更优雅的解决方案，它不需要与执行查询一样多的资源？似乎没有类似的东西

```
result.exists() 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:41:39.500

我创建了一个重载的 CouchbaseClient 来解决这个问题。它速度很快，而且效果很好。

编辑：我做了一个小改动，我没有使用 string.contains，我使用 Json 对象。

```
public class CouchbaseClientExtended : CouchbaseClient
{
    private string _bucket;
    private bool _isDevMode;
    private CouchbaseCluster _cluster;

    public CouchbaseClientExtended()
    {
        LoadBaseConfig("couchbase");
    }

    public CouchbaseClientExtended(CouchbaseClientConfiguration config) : base(config)
    {
        LoadBaseConfig(config);
    }

    public CouchbaseClientExtended(string sectionName) : base(sectionName)
    {
        LoadBaseConfig(sectionName);
    }

    public CouchbaseClientExtended(ICouchbaseServerPool pool, CouchbaseClientConfiguration config) : base(pool, config)
    {
        LoadBaseConfig(config);
    }

    public CouchbaseClientExtended(string bucketName, string bucketPassword) : base(bucketName, bucketPassword)
    {
        var config = new CouchbaseClientConfiguration
        {
            Bucket = bucketName,
            BucketPassword = bucketPassword
        };
        LoadBaseConfig(config);
        _bucket = bucketName;
    }

    public CouchbaseClientExtended(CouchbaseClientConfiguration config, string bucketName, string bucketPassword) : base(config, bucketName, bucketPassword)
    {
        LoadBaseConfig(config);
        _bucket = bucketName;
    }

    public CouchbaseClientExtended(string sectionName, string bucketName, string bucketPassword)
        : base(sectionName, bucketName, bucketPassword)
    {
        LoadBaseConfig(sectionName);
        _bucket = bucketName;
    }

    private void LoadBaseConfig(string sectionName)
    {
        var config = ConfigurationManager.GetSection(sectionName) as CouchbaseClientSection;
        if (config == null)
        {
            throw new NullReferenceException(
                "Couchbase configuration cannot be null. Add it to App.Config file or pass a custom one via parameter.");
        }
        _bucket = config.Servers.Bucket;
        _isDevMode = config.DocumentNameTransformer.Type == typeof (DevelopmentModeNameTransformer);
        _cluster = new CouchbaseCluster(config);
    }

    private void LoadBaseConfig(CouchbaseClientConfiguration config)
    {
        _bucket = config.Bucket;
        _isDevMode = config.DesignDocumentNameTransformer is DevelopmentModeNameTransformer;
        _cluster = new CouchbaseCluster(config);
    }

    public bool StoreJson<T>(StoreMode storeMode, string key, T value) where T : class
    {
        return Store(storeMode, key, JsonConvert.SerializeObject(value));
    }

    public T GetJson<T>(string key) where T : class
    {
        T obj = null;
        var json = Get<string>(key);
        if (json != null)
        {
            obj = JsonConvert.DeserializeObject<T>(json);
        }
        return obj;
    }

    public bool ViewExist(string designName, string viewName)
    {
        try
        {
            var doc = _cluster.RetrieveDesignDocument(_bucket, designName);
            if (!VerifyDesignDocumentContainsView(doc, viewName))
            {
                if (_isDevMode)
                {
                    var devDoc = _cluster.RetrieveDesignDocument(_bucket, "dev_" + designName);
                    return VerifyDesignDocumentContainsView(devDoc, viewName);
                }
                return false;
            }

            return true;
        }
        catch (WebException wex)
        {
            if (((HttpWebResponse)wex.Response).StatusCode == HttpStatusCode.NotFound)
            {
                return false;
            }
            throw;
        }
    }

    private bool VerifyDesignDocumentContainsView(string doc, string viewName)
    {
        if (string.IsNullOrEmpty(doc) || string.IsNullOrEmpty(viewName))
        {
            return false;
        }

        JToken token;
        JObject jObject = JsonConvert.DeserializeObject<JObject>(doc);
        jObject.TryGetValue("views", out token);
        if (token != null)
        {
            jObject = (JObject)token;
            return jObject.TryGetValue(viewName, out token);
        }
        return false;
    }
} 
```

希望它对你有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T21:12:35.820

马特 - 感谢分享您的扩展方法！现在已经看到这个问题出现了几次，我正在为 1.2.1 客户端（将于 2013 年 2 月 5 日发布）提供支持。下面的答案在 1.2.0 中无效，但仅供将来参考。我还将它作为答案而不是评论包含在内，以更好地突出显示代码......

在 1.2.1 中，将有两种方法来检查不存在的视图。第一种是使用视图的新 CheckExists() 方法。此方法将查询设计文档并解析 JSON。类似于 Matt 的方法，但不使用 CouchbaseCluster API。

```
var view = client.GetView("designDoc", "viewName")

if (view.CheckExists())
{
  view.Count();
} 
```

第二种方法是捕获异常，这是有意义的类型（不再是 InvalidOperationException）。这种方法的优点是少了一个 HTTP 查询。

```
var view = client.GetView("designDoc", "viewName")

try {
    view.Count();
} catch (ViewNotFoundException vnfe) { //extends ViewException
    ...
} catch (ViewException ve) { //bad params for example
   log.Error("Error {0}, Reason {1}", ve.Error, ve.Reason);
} catch (Exception e) {
   ...
} 
```

Jira 请求位于[http://www.couchbase.com/issues/browse/NCBC-165](http://www.couchbase.com/issues/browse/NCBC-165)，代码正在审查中[http://review.couchbase.org/#/c/24068/1](http://review.couchbase.org/#/c/24068/1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:05:27.300

您可以尝试使用 Design REST API，不确定它是否更优雅，请参阅 [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-designdoc-api-retrieving.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-designdoc-api-retrieving.html)

这种方法是一种非常通用的方法。

当您调用 getView() 方法时，我不是 .Net 专家，而是在 Java SDK 中，如果视图不退出，则会引发异常。也许您在.Net中有类似的方式

# spring - Downcast Spring Factory Bean

> ID：13535444
> 
> 赞同：2
> 
> 时间：2012-11-23T20:36:54.453
> 
> 标签：spring

// 两个第三方工厂：

```
public class OneStaticMethodFactory {
 ...
 public static Object createFactory(String oneInstanceMethodFactoryClassName) {
  ...
 }
}

public class OneInstanceMethodFactory {
 ...
 public OneObject createObject() {
  ...
 }
} 
```

// 硬连线代码：

```
OneInstanceMethodFactory oneInstanceMethodFactory = 
 (OneInstanceMethodFactory) 
  OneStaticMethodFactory.createFactory("pkg.to.OneInstanceMethodFactory");

OneObject oneObject =
 oneInstanceMethodFactory.createObject(); 
```

// 尝试用 Spring bean 替换它们：

```
<bean id="oneInstanceMethodFactory" class="pkg.to.OneStaticMethodFactory"
 factory-method="createFactory">
  <constructor-arg value="pkg.to.OneInstanceMethodFactory">
  </constructor-arg>
</bean>

<bean id="oneObject" factory-bean="oneInstanceMethodFactory"
 factory-method="createObject">
</bean> 
```

// 运行 Spring IoC：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    ...
Caused by: org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'oneObject' defined in class path resource [applicationContext.xml]: 
No matching factory method found: factory bean 'oneInstanceMethodFactory'; 
factory method 'createObject()'. 
Check that a method with the specified name and arguments exists and that it is non-static.
        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:528)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1015)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
        at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
        at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
        at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
        at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
        ... 26 more 
```

为解决上述问题，Spring中如何将**oneInstanceMethodFactory** bean从编译时类型Object向下转换为运行时类型OneInstanceMethodFactory？（修改两个第三方工厂类不是问题的重点。）

**@编辑**

感谢来自 的提示`@Boris Treukhov`，最后我发现问题与此无关，`type downcast`但确实`OneStaticMethodFactory#createFactory`返回了其他运行时类型，`OneInstanceMethodFactory`而不是我自己的错字。现在，从硬连线代码迁移到`Spring IoC / DI`上述代码后，一切都按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:49:27.300

您应该检查`'oneInstanceMethodFactory'`, 确实是一个实例，方法是 通过容器的方法检查`OneInstanceMethodFactory`使用名称创建的 bean 类型，或者检查调试器中返回的值。`"oneInstanceMethodFactory"``getBean()``createFactory`

以我的经验，这个异常非常简单，通常真的没有这样的公共非静态方法。

向下转换没有区别，因为这些方法是通过将`Object`实例作为`this`参数的反射方法调用的。bean 类型由工厂方法返回的值决定，Spring 在 bean 初始化之前不需要知道类。事实上`oneObject`bean 依赖`oneInstanceMethodFactory`所以后者 bean 会在前者之前完全初始化，Spring 将能够调用它的`createObject`方法。

# web-applications - 如何使用 XSLT 填充 href 字符串？

> ID：13535455
> 
> 赞同：2
> 
> 时间：2012-11-23T20:37:54.097
> 
> 标签：web-applications, xslt-1.0

我正在尝试使用 XSLT 1.0 样式表（由 Web 浏览器处理）生成具有复杂查询字符串的相对 URL。

```
<xsl:variable name="queryLn">sql</xsl:variable>
<xsl:variable name="queryName">ask</xsl:variable>
<a>
    <xsl:attribute name="href">
        <xsl:text>path?action=exec&queryLn=</xsl:text>
        <xsl:value-of select="$queryLn" />
    </xsl:attribute>
    <xsl:value-of select="$queryName" />
</a> 
```

为简单起见，我更改了变量的分配方式。在实际代码中，它们从正在转换的 XML 中获得相似的值。我希望生成的文档包含以下内容：

```
<a href="path?action=exec&queryLn=sql>ask</a> 
```

Chrome 浏览器给我一个错误消息，例如`error on line XX at column YY: EntityRef: expecting ';'`，其中 XX 和 YY 紧跟在`<xsl:text>`开始标记之后。我尝试向元素添加`disable-output-escaping="yes"`属性`<xsl:text>`，但这没有任何效果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:44:43.720

**使用**：

```
<a href="path?action=exec&amp;queryLn={$queryLn}"><xsl:value-of select="$queryName"/></a> 
```

**您的代码有这些问题**：

1.  未转义`&`- 必须是`&amp;`.

2.  不必要`<xsl:attribute>`- 建议尽可能使用**[AVT](http://www.w3.org/TR/xslt#attribute-value-templates)** -s（属性 - 值模板）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:44:59.907

Firefox 提供了一个更有用的错误消息，为我指明了正确的方向。

事实证明这是无效的 XML。`&`需要`&amp;`。

# javascript - 如何在此代码中添加“添加”按钮？

> ID：13535457
> 
> 赞同：0
> 
> 时间：2012-11-23T20:38:00.163
> 
> 标签：javascript, jquery, dialog

对不起，我不了解 JS。但是我有这个 Jquery 对话框代码，需要添加一个显示“添加”的按钮并调用一个新的空白对话框？我是一名 UX/UI 设计师，语法把我搞砸了，哈哈。任何帮助都会很棒。

```
 $( "#dialog-message" ).dialog({
    autoOpen: false,
    modal: true,
    buttons: {
        Ok: function() {
            $( this ).dialog( "close" );
        }
    }
});

$( "#opener" ).click(function() {
    $( "#dialog-message" ).dialog(  "option", "width", 650  );
    $( "#dialog-message" ).dialog( "open" );
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T20:42:47.913

button 属性是一个 javascript[文字对象](http://www.dyn-web.com/tutorials/obj_lit.php)，所以你可以像这样添加一个按钮：

```
buttons: {
    Ok: function() {
        $( this ).dialog( "close" );
    },
    Add : function() {
      $('#otherDialog').dialog("open");
    }
} 
```

如您所见，它们是用逗号分隔的函数，名称将用作文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:51:51.420

试试这个：

```
$(function() {
    $( "#opener" ).click(function() {
        $( "#dialog-modal" ).dialog({
            width: 650,
            modal: true,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
}); 
```

# php - PHP preg_match 创建空数组

> ID：13535464
> 
> 赞同：0
> 
> 时间：2012-11-23T20:38:47.327
> 
> 标签：php, regex

我正在使用以下代码：

```
foreach ($_POST as $key => $value) {
    (preg_match("/^._box_(\d+)_5$/", $key, $matches));
    //$prodid[] = $matches[1];
    $firephp->log($matches, 'matches');
    }; 
```

此代码正在处理从上一页 $_POSTed 的以下信息：

```
array(
['clin'] =>
['clinmail'] =>
['quest_3'] =>
['quest_7'] =>
['quest_8'] =>
['quest_9'] =>
['quest_10'] =>
['quest_15'] =>
['quest_16'] =>
['hosp'] => 8
['user'] => 16
['a_box_15_5'] => 2
['a_box_16_5'] => 2
['b_box_1_5'] => '$0.00'
['b_box_29_5'] => 1
) 
```

问题是我得到以下结果：

```
matches: array()
matches: array()
matches: array()
matches: array()
matches: array()
matches: array()
matches: array()
matches: array()
matches: array()
matches: array()
matches: array()
matches: array('0'=>'a_box_15_5', '1'=>'15')
matches: array('0'=>'a_box_16_5', '1'=>'16')
matches: array('0'=>'b_box_1_5', '1'=>'1')
matches: array('0'=>'b_box_29_5', '1'=>'29') 
```

我不希望它匹配前 11 个位置。我只想要实际匹配我正在寻找的结果，在这种情况下，最后四个 $_POST 不是 preg_match 应该做的吗？我怎样才能将它限制在比赛中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:40:33.250

[`preg_match()`](http://php.net/preg_match)正常工作：如果没有匹配项，`$matches`将为空。但是，如果没有匹配项，您并没有做任何不同的事情，您总是调用`$firephp->log()`, 匹配或不匹配。

`preg_match()``1`如果模式匹配，则返回，`0`否则`false`如果发生错误，则可以使用它来查看是否存在匹配项，然后才调用`$firephp->log()`：

```
foreach ($_POST as $key => $value) {
    if (preg_match('/^._box_(\d+)_5$/', $key, $matches)) {
        $firephp->log($matches, 'matches');
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:40:31.043

在记录之前添加检查：

```
foreach ($_POST as $key => $value) {
    (preg_match("/^._box_(\d+)_5$/", $key, $matches));
    //$prodid[] = $matches[1];
    if(!empty($matches)){
        $firephp->log($matches, 'matches');
    }
}; 
```

# haskell - 瓷砖之间的 xmonad 间距

> ID：13535465
> 
> 赞同：2
> 
> 时间：2012-11-23T20:39:02.830
> 
> 标签：haskell, xmonad

我正在使用以下内容，

```
layoutHook = smartBorders $ lessBorders OnlyFloat $ avoidStruts $ layoutHook defaultConfig 
```

当工作区中只有一个应用程序时禁用边框。我想要实现的是当我有 2 个或更多时，瓷砖之间有空间。我尝试将间距 10 添加到有效的组合中，但是当工作区中只有一个窗口时，它仍然会留下空间。当工作空间中有超过 1 个瓷砖时，是否可以只设置间距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T01:19:56.223

这里的想法是创建一个布局修改器，它可以识别何时只有一个窗口，因此它不会缩小它。

这就是我在 xmonad.hs 中解决它的方法：

```
shrinkRect :: Int -> Rectangle -> Rectangle
shrinkRect p (Rectangle x y w h) = Rectangle (x+fi p) (y+fi p) (w-2*fi p) (h-2*fi p)
    where fi n = fromIntegral n 
```

这是缩小给定窗口的功能。

接下来你必须定义布局修饰符：

```
data SmartSpacing a = SmartSpacing Int deriving (Show, Read)

instance LayoutModifier SmartSpacing a
    where
        pureModifier _ _ _ [x] = ([x], Nothing)
        pureModifier (SmartSpacing p) _ _ wrs = (map (second $ shrinkRect p) wrs, Nothing)

        modifierDescription (SmartSpacing p) = "SmartSpacing " ++ show p 
```

最后，将其应用于布局的函数：

```
smartSpacing :: Int -> l a -> ModifiedLayout SmartSpacing l a
smartSpacing p = ModifiedLayout (SmartSpacing p) 
```

您必须申请 `smartSpacing`要更改的布局，例如（`Tall`在此处更改）：

```
myLayout = tiled ||| Mirror tiled ||| Full
    where
        -- Add spacing between windows
        tiled = smartSpacing 3 $ Tall nmaster delta ratio 
```

然后你最终使用它：

```
layoutHook = smartBorders myLayout 
```

有关更多详细信息，您可以在[此处查看我的 xmonad.hs](https://github.com/matijaSos/dotfiles/blob/master/arch/xmonad.hs)

此外，您可能必须在 xmonad.hs 中添加以下行才能编译：

```
{-# LANGUAGE FlexibleInstances, MultiParamTypeClasses #-} 
```

附言

最新版本的 xmonad 已经包含 smartSpacing 作为 XMonad.Layout.Spacing 模块的一部分，因此在这种情况下，您可以跳过定义 shrinkRect、smartSpacing 和 SmartSpacing（其中已经包含完全相同的代码）。

[最新的 xmonad 智能间距](http://www.haskell.org/pipermail/xmonad/2012-September/013050.html)

# c# - 检测一组 WPF 控件丢失的焦点

> ID：13535466
> 
> 赞同：7
> 
> 时间：2012-11-23T20:39:03.213
> 
> 标签：c#, wpf, f#, focus

我正在使用具有可编辑内容的代码构建一个 GUI。当用户单击静态显示时，控件将换成允许编辑的控件。在某些情况下，显示控件（例如`Label`）被替换为一组控件，例如 a`ComboBox`和`TextBox`。

我想检测我的可编辑控件组何时失去焦点，以便将界面从编辑器切换回该项目的显示表示。

例如，我可能在树中有一个 GUI，`Panel1(Panel2(Button1, Button2), Button3)`我想检测何时从`Panel2`. 我尝试了以下（F# 代码）：

```
open System.Windows

let button1 = Controls.Button(Content="1")
let button2 = Controls.Button(Content="2")
let button3 = Controls.Button(Content="3")

[<System.STAThreadAttribute>]
do
  let panel1 = Controls.StackPanel()
  let panel2 = Controls.StackPanel()
  panel2.Children.Add button1 |> ignore
  panel2.Children.Add button2 |> ignore
  panel1.Children.Add panel2 |> ignore
  panel1.Children.Add button3 |> ignore
  panel2.LostFocus.Add(fun _ ->
    printfn "Panel2 lost focus")
  Application().Run(Window(Content=panel1))
  |> ignore 
```

正如预期的那样，在单击后单击`panel2.LostFocus`时触发该事件，因为焦点移出到. 但是，即使从未失去焦点，在单击后单击时也会触发它。`button3``button2``panel1``button3``button2``button1``panel2`

阅读有关 WPF 中焦点的 MSDN 文档，我尝试添加：

```
Input.FocusManager.SetIsFocusScope(panel2, true) 
```

但这实际上使问题变得更糟！现在该`panel2.LostFocus`事件仅在焦点从一个孩子转移`panel2`到另一个孩子时触发，而不是在`panel2`实际失去焦点时触发。

我应该如何获得想要的效果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T00:50:06.967

感谢Twitter 上的[Ian Voyce](https://twitter.com/voyce)，我能够使用该`IsKeyboardFocusWithinChanged`事件获得所需的功能。这是一个演示：

```
open System.Windows

let Button x =
  Controls.Button(Content=x, Width=64.0, Margin=Thickness 3.0)

let Panel ctrls =
  let panel = Controls.StackPanel()
  for ctrl in ctrls do
    panel.Children.Add ctrl
    |> ignore
  panel

let label = Controls.Label(Content="Edit 12")
let button1 = Button "1"
let button2 = Button "2"
let button3 = Button "3"

let panel = Panel[button1; button2]

[<System.STAThreadAttribute>]
do
  label.HorizontalContentAlignment <- HorizontalAlignment.Center
  label.MouseLeftButtonDown.Add(fun _ ->
    label.Content <- panel)
  panel.IsKeyboardFocusWithinChanged.Add(fun e ->
    if not(unbox e.NewValue) then
      label.Content <- "Edit 12")
  Application().Run(Window(Content=Panel[label :> UIElement; button3 :> UIElement]))
  |> ignore 
```

# multithreading - 在云上部署 CPU 密集型 Web 服务

> ID：13535467
> 
> 赞同：0
> 
> 时间：2012-11-23T20:39:17.207
> 
> 标签：multithreading, web-services, cloud, cpu

我有一个要公开为 Web 服务 (SaaS) 的应用程序。该应用程序是 CPU 密集型应用程序，并且是一个多线程应用程序，执行需要大量时间（平均 15-20 秒）。因为，我想将其公开为 SaaS，并希望使用市场上现有的云服务，如 Amazon、Google App Engine 等，这样在扩展我的服务时所涉及的成本和工作量并不多。我有几个问题，比如：

1.）由于应用程序是多线程的，调用的线程数取决于服务抛出的结果数（所以基本上线程数是一个动态实体）。现在我有一个 6 核处理器，因此我将线程池大小保持为 6，但是由于我正在迁移到云上，我如何才能最佳地使用云基础架构？

2.）云服务提供商（哪个？）是否提供选择每个请求所需的 CPU 内核数量的选项（或类似的东西来满足我的目的）？

3.) 代码中需要哪些更改（与线程相关）？

4.) 我应该看到移动到云端的任何其他特定区域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:48:12.537

在 Amazon EC2 中，您基本上是为[不同类型的实例](http://aws.amazon.com/ec2/instance-types/)付费——您可以自由选择一个只有单核的实例和一个有十六个核心的实例。你得到你所付出的。

> 如何以最佳方式使用云基础架构？

你的方法很好，如果你的任务是 CPU 密集型的，那么有一个线程池，其线程数与 CPU 内核/CPU 相同。

> 选择每个请求所需的 CPU 内核数

不，至少不是亚马逊。您在给定的实例上运行您的应用程序，这就是您所得到的。您必须提前选择实例类型，当然您可以随时在它们之间自由切换、添加新实例等。云端！

在 Google App Engine[中，您无法创建线程](https://developers.google.com/appengine/kb/java#threads)，因此您无法选择。另请参阅：[为什么 Google App Engine 只支持单线程执行？](https://stackoverflow.com/questions/3800435)

> 3.) 代码中需要哪些更改（与线程相关）？

没有任何。毕竟，这是一台标准 PC。

> 4.) 我应该看到移动到云端的任何其他特定区域吗？

好吧，见上文，有些服务对你来说完全没用，比如 GAE。在您实际支付某项费用之前进行一些研究。

# java - 停止无限循环paint（）方法？用paint（）添加JButton？

> ID：13535469
> 
> 赞同：0
> 
> 时间：2012-11-23T20:39:23.557
> 
> 标签：java, paint, infinite-loop

我编写了程序来绘制轮子（有 6 段的圆圈）和不同颜色的每个段。并为轮子设置动画..

这是代码：

```
 public class ExamWheel extends JFrame implements ActionListener{
        JButton b_start = new JButton("Start");
        JButton b_stop = new JButton("Stop");
        Thread th;
        Boolean doDraw = true;

        public ExamWheel(){
            setSize(400,400);
            setVisible(true);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setLocationRelativeTo(null);
            setTitle("Wheel..");
            //add(b_start);
            this.setLayout (new FlowLayout());
            this.add(b_stop);
            b_start.addActionListener(this);
        }

        public void actionPerformed(ActionEvent e) {
            if(e.getSource()==b_start)
                doDraw=true;
        }

        public void paint(Graphics graphics) {
        if (doDraw){
            super.paint(graphics);
            Graphics2D g = (Graphics2D) graphics;
            g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            try{
            // draw the circle
            for(int i=0; ; i=i+1){
                g.setColor(Color.CYAN);
                g.fillArc(50, 50, 300, 300, i+0, 60);
                th.sleep(1);
                g.setColor(Color.red);
                g.fillArc(50, 50, 300, 300, i+60, 60);
                th.sleep(1);
                g.setColor(Color.green);
                g.fillArc(50, 50, 300, 300, i+120, 60);
                th.sleep(1);
                g.setColor(Color.blue);
                g.fillArc(50, 50, 300, 300, i+180, 60);
                th.sleep(1);
                g.setColor(Color.gray);
                g.fillArc(50, 50, 300, 300, i+240, 60);
                th.sleep(1);
                g.setColor(Color.pink);
                g.fillArc(50, 50, 300, 300, i+300, 60);
                th.sleep(1);
            }
            }
            catch(InterruptedException e){
                Thread.currentThread().interrupt();
            }
        }
        }

        public static void main(String[] args) {
            ExamWheel f = new ExamWheel();
        }

    } 
```

**问题：**它是无限循环，我无法停止它或关闭框架。

**所以我有想法：**

我创建了值为true的布尔变量（doDraw），并添加了JButton，当单击按钮时，变量将变为false，在paint（）方法中，我将首先使用paint（）的if条件

**问题：**我无法使用paint() 将JButton 添加到Frame，我该怎么办？

**注意：**我尝试使用paintComponent()，但循环（for with thread）不起作用。

**解决了感谢 Pete Kirham**

我添加了 Timer 并用paintComponent() 替换了paint()

```
public class ExamWheel extends JPanel implements ActionListener {
    int i=0;
    Timer tm = new Timer(10, this);
    public void paintComponent(Graphics graphics) {
        super.paintComponent(graphics);
        Graphics2D g = (Graphics2D) graphics;
        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        g.setColor(Color.CYAN);
        g.fillArc(50, 50, 300, 300, i+0, 60);
        g.setColor(Color.red);
        g.fillArc(50, 50, 300, 300, i+60, 60);
        g.setColor(Color.green);
        g.fillArc(50, 50, 300, 300, i+120, 60);
        g.setColor(Color.blue);
        g.fillArc(50, 50, 300, 300, i+180, 60);
        g.setColor(Color.gray);
        g.fillArc(50, 50, 300, 300, i+240, 60);
        g.setColor(Color.pink);
        g.fillArc(50, 50, 300, 300, i+300, 60);
        tm.start();
    }
    public void actionPerformed(ActionEvent e) {
        i++;
        repaint();
    }
    public static void main(String[] args) {
        ExamWheel wh = new ExamWheel();
        JFrame jf = new JFrame();
        jf.setSize(500,500);
        jf.setResizable(false);
        jf.setVisible(true);
        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jf.setLocationRelativeTo(null);
        jf.setTitle("Wheel..");
        jf.add(wh);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:45:36.637

您需要从 paintComponent 返回以允许运行 gui 的线程执行其他操作，例如响应按钮事件或实际将图形内容放到屏幕上。

使用计时器使组件无效 - 请参阅[http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)并根据当前时间更新动画，例如[当前毫秒](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#currentTimeMillis%28%29)模 5000 将给出每五秒重复一次的循环。

# css - 如何在 float:left 中绝对定位？

> ID：13535470
> 
> 赞同：5
> 
> 时间：2012-11-23T20:39:25.910
> 
> 标签：css, html, css-float, css-position

为什么添加左规则会如此剧烈地改变行为？是否可以相对于默认位置定位？

[http://jsfiddle.net/suzancioc/drDn3/6/](http://jsfiddle.net/suzancioc/drDn3/6/)

HTML：

```
 <div class='level0'>
   <div class='level1'>
       Hello

   </div>
   <div class='level1'>
       Hello
       <div id='inner2'>inner2</div>
   </div>
       <div class='level1'>
       Hello
       <div id='inner3'>inner3</div>
   </div>

</div> 
```

CSS：

```
.level0 {
   height:40px;
   width: 500px;
   background:red;
}
.level1 {
   float:left;
   margin:2px;
   border-style: solid;
   background: cyan;

}
#inner1 {
   position: absolute;
   background: green;
}

#inner2 {
   position: absolute;
   background: green;
    left:0px;
}

#inner3 {
   position: absolute;
   background: green;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T20:52:42.277

为了定位绝对的东西，您需要将该 div（在您的情况下）分配给相对定位的父级

```
.level1 {
   float:left;
   margin:2px;
   border-style: solid;
   background: cyan;
   position:relative;

} 
```

添加为其中的所有元素`position:relative`创建`.level1`了一种坐标系。

看看[**这个 JSFIDDLE**](http://jsfiddle.net/drDn3/9/)

# php - 未知算法。预期 HMAC-SHA256。由于签名请求 cookie 为空而导致的错误

> ID：13535474
> 
> 赞同：1
> 
> 时间：2012-11-23T20:40:23.610
> 
> 标签：php, facebook-javascript-sdk, facebook-php-sdk

出于某种原因，已设置签名的请求 cookie（fbsr_APP-ID，例如：fbsr_121341354354354）**但**它是空的，所以我收到了`Unknown algorithm. Expected HMAC-SHA256.`错误。

我无法重现此错误，因此我已将日志记录添加到 PHP SDK 中的[getSignedRequest()](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L478)方法。查看日志后：

*   fbsr_APP-ID cookie 已设置，但为空。所以它通过了[getSignedRequest()内部的验证](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L478)
*   错误出现在不同的页面上，它不仅限于一个页面甚至一组页面
*   它发生在不同的浏览器和不同的用户上

除了`getSignedRequest`在子类上添加一个空检查以消除错误之外，不确定发生了什么或什么是更好的解决方案。有什么提示吗？:)

谢谢！

# php - 如何发送使用 php 验证的表单？

> ID：13535494
> 
> 赞同：1
> 
> 时间：2012-11-23T20:42:12.123
> 
> 标签：php, forms, authentication

'正在尝试使用此表单的问题，因为所有垃圾邮件都来了。有谁知道我如何使用相同的表格进行身份验证？

感谢任何可以提供帮助的人！

```
 <?php

    $para = "martins.ago@gmail.com";
    $assunto = "Orçamento";
    $headers = "MIME-Version: 1.0\n"; 
    $headers .= "Content-type: text/html; charset=iso-8859-1\n"; 
    $headers .= "From:Log Materiais <martins.ago@gmail.com>\r\n";
    $headers .= "Reply-To: ".$_POST['razaosocial_nome']." <".$_POST['email'].">\r\n";
    mail("martins.ago@gmail.com",$assunto,$corpo,$headers); 

    mail($_POST['email'],$assunto,$corpo,$headers); 
    unset($_SESSION['Carrinho']['Produto']);
    unset($_SESSION['Carrinho']);
?>
<script>
alert("Seu pedido de orçamento foi enviado, em 24 horas entraremos em contato, aguarde.");
window.location = '../home/index.php?orcamento=Sucesso';
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:53:04.077

使用验证码。有关 reCaptcha PHP 文档，请参阅[https://developers.google.com/recaptcha/docs/php](https://developers.google.com/recaptcha/docs/php)。

# bash - Linux shell 脚本删除/恢复/垃圾第 2 部分

> ID：13535495
> 
> 赞同：0
> 
> 时间：2012-11-23T20:42:20.707
> 
> 标签：bash, shell

提前感谢您的帮助，这是课程作业，因此非常感谢您的进一步阅读/指导。

前几天我问了一个与我自己的删除/回收/恢复脚本有关的问题，我已经完成了删除和回收，并删除了一个备份文本文件以供稍后恢复使用。

但是，还原脚本并没有给我错误，而是在控制台中停止了。就像当我输入 # ~/Restore -n 时，光标会跳到没有通常的 # 的下一行，我必须手动关闭它。同样没有 -n 选项。-n 选项应该要求一个新的位置来恢复，没有它应该恢复到文件的原始位置。我会发布我的脚本，看看你们的想法。

```
#!/bin/bash
if [ "$1" == "-n" ]
then  cd ~/rubbish
  restore= grep $2 ~/store      
  filename= basename "$restore"
  echo "Type the files new location"
  read location
  location1 = "readlink -f $location"       
  mv -i $filename "$location1" /$filename       
else  cd ~/rubbish          
  restore= grep $2 ~/store      
  filename= basename "$restore"         
  mv -i $filename "$location1" $location            
fi 
```

所以，~/rubbish 是我自己创建的目录，用作回收站，而 ~/store 是我的文本文件，它在删除时附加已删除的文件 readlink 详细信息。如有必要，我可以发布整个 3 个脚本吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:21:26.693

如果您调用`~/Restore -n`它，它将转到该`if`部分并执行`grep $2 ~/store`. 由于没有参数`$2`，它将导致`grep ~/store`，它告诉 grep 在来自标准输入的输入中搜索“~/store”。

这就是您的脚本停止并等待输入的原因。

您可以测试第二个参数或`$2`用双引号括起来以确保 grep 获取正确数量的参数。更好的是，两者都做：1\. 测试第二个参数*和*2\. 将 $2 括在双引号中。

还有几点：

*   不要在周围放置空格`=`
*   如果要捕获输出，请将命令括在反引号中
*   目录和文件名之间没有空格

所以，你大概应该写

```
restore=`grep "$2" ~/store`
filename=`basename "$restore"`
echo "Type the files new location"
read location
location1=`readlink -f "$location"`
mv -i $filename "$location1/$filename" 
```

我建议您查看[bash 信息](https://stackoverflow.com/tags/bash/info)并遵循“书籍和资源”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T14:43:43.330

我很久以前写过其中的一篇，我今天仍在使用。我没有恢复脚本，因为我编写了它以便您可以打开桌面垃圾桶，右键单击并选择“恢复”。换句话说，它遵循 Linux “垃圾信息”标准。

[http://wiki.linuxquestions.org/wiki/Scripting#KDE4_Command_Line_Trash_Can](http://wiki.linuxquestions.org/wiki/Scripting#KDE4_Command_Line_Trash_Can)

# html - HTML页面根据内容拉长

> ID：13535496
> 
> 赞同：1
> 
> 时间：2012-11-23T20:42:23.537
> 
> 标签：html

我正在用 php、html 和 css 构建一个站点。我主要写在我定义为 mainContent 的空间中，如下所示：

```
.mainContent{
    padding-top: 10px;
    height: 74%;
    width: 70%;
    position: absolute;
    margin-top: 95px;
    margin-right: 100px;
    margin-left: 250px;
    padding-left: 10px;
} 
```

我也有一个看起来像这样的页脚：

```
.footer{
    text-align: center;
    position: absolute;
    bottom: 5px;
    width: 87.2%;
    height: 40px;
    margin-right: 100px;
    margin-left: 25px;
} 
```

但是，只要我输入的内容足够多以至于页面需要滚动，文本就会继续超出 mainContent 块的末尾和页脚块的下方。有没有办法让mainContent块向下扩展[在文本结束后留下一点空间]并且页脚块也向下移动？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:47:40.457

从 mainContent 中删除“高度”

# ios - 使用 UIImageView 为人工制品中的 UITableView 结果绘制背景图像

> ID：13535500
> 
> 赞同：0
> 
> 时间：2012-11-23T20:42:56.790
> 
> 标签：ios, cocoa-touch, uiimageview

我对 Xcode 很陌生，对所有功能都不熟悉。我只是想在我的 UITabelView 下有一个背景图像。这个问题有很多答案，但所有答案都给了我这些白色的人工制品边框。所以我的问题是，有没有人最终遇到同样的问题并解决了它？为了得到一个想法，图片附在下面。

感谢您的帮助！

这里只是对我的实施的快速查看

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:
(NSDictionary *)launchOptions{

  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
  // Override point for customization after application launch  
  //initialise main views
  UIImageView *backGround = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 
  self.window.bounds.size.width, self.window.bounds.size.height)];
  [backGround setImage:[UIImage imageNamed:@"Default.png"]];
  [self.window addSubview:backGround];
  LoginViewController *loginViewController = [[LoginViewController alloc] 
  initWithNibName:@"LoginViewController" bundle:nil];
  self.navigationController = [[UINavigationController alloc] 
  initWithRootViewController:loginViewController];
  self.window.rootViewController = self.navigationController;
  self.window.backgroundColor = [UIColor whiteColor];
  [self.window makeKeyAndVisible];

  return YES;
} 
```

![在此处输入图像描述](../Images/e8a4d196dc4a72ef72afe1d765ead95c.png)

* * *

[另一个 UI 项目上的相同问题]

现在我在以编程方式创建的带有圆角矩形的 UIButtons 上遇到了同样的问题。但我不知道如何摆脱它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:27:40.303

我以前遇到过这个问题

我想你将你的 tableview 分隔符属性设置为 Single Line Etched 样式，为了解决这个问题，在 cellforrowatindexpath 委托中设置你的 tableview 分隔符：

```
tableview.separatorStyle = tableview.UITableViewCellSeparatorStyleSingleLine; 
```

或者

```
tableview.separatorStyle = tableview.UITableViewCellSeparatorStyleNone; 
```

或者您可以在分隔符部分下的 xib 文件中设置它。

可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:51:31.810

只是一个想法...但是您采用 [UIScreen mainScreen] 的大小。由于您启用了 ApplicationBar，因此您的窗口高度小了 20 像素......（？）

# css - 水平排列列表项

> ID：13535509
> 
> 赞同：0
> 
> 时间：2012-11-23T20:44:10.053
> 
> 标签：css

好的，我错过了一些东西，但我似乎无法排列一个简单的 ul 列表项列表，以便它们拉伸父 div 的整个宽度。这是我的问题的示例 [http://jsfiddle.net/37E55/17/](http://jsfiddle.net/37E55/17/)。

我要做的是让灰色框排成一行，以便第一个框的左边缘与#wrapper div的左边缘内联，最后一个框的右手边缘与#wrapper div的内联右手边。

我已经尝试通过给它们一个绝对定位来成功地将盒子排成一行，但是有没有办法使用我缺少的边距和填充的组合？

```
#wrapper {
 width: 400px;
 height: 300px;
 background-color:#F0F0F0;
 margin: 10px auto;    
}

.box {
 width: 92px;
 height:92px;
 background-color:#333;
 margin:0px 10px 10px 0px;
 float:left;
}

<div id="wrapper">

<ul>
  <li class="box"></li>
  <li class="box"></li>
  <li class="box"></li>
  <li class="box"></li>
</ul>

</div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:39:46.730

我知道有一种方法可以`inline-block`代替浮动（如果您不必支持过于旧的浏览器）。

[这是一个小提琴演示](http://jsfiddle.net/37E55/34/)！

`li`没有应用边距，它们均匀地分布在区域中并**紧贴**边界。我按照[这个指南](http://kristinlbradley.wordpress.com/2011/09/15/cross-browser-css-justified-block-list/)。

```
ul {
    font-size: 0 !important; /* remove physical spaces between items */
    text-align: justify;
    text-justify: distribute-all-lines; /* distribute items in IE */
    list-style-type: none;
    margin: 0;
    padding: 0;
}

/* fully justify all items in browsers other than IE */
ul:after {
    content: "";
    display: inline-block;
    width: 100%;
}

ul li {
    text-align: left; /* customize to suit */
    vertical-align: top; /* can customize to suit */
    display: inline-block;
    width: 31.3%; /* optional, only need for text content to wrap */
    margin-bottom: 1em; /* optional, customize to suit */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:46:44.557

您需要做的第一件事是删除最后一个元素的右边距。

```
.box:last-child { margin-right:0; } 
```

除此之外，有时您无法根据元素的空间和容器的大小来匹配元素，例如，精确均匀的边距。有时您可以在（例如）每个其他元素上应用不同的边距以保持布局看起来“均匀”，但要处理空间不足，例如：

```
.box:nth-of-type(2n) { margin-right:14px } /* add extra pixels to right margin of even elements*/ 
```

但是，在您的情况下，只有一个框需要额外的边距，例如第一个。 [这是我的做法](http://jsfiddle.net/NR6jP/)（增加颜色对比度只是为了更容易看到）。

```
.box {
  width: 90px;
  height:90px;
  background-color:blue;
  margin:0px 13px 10px 0px;
  float:left;
}

.box:last-child {
    background:green;
    margin-right:0;
}

.box:first-child {
    background:yellow;
    margin-right:14px;
} 
```

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T20:55:09.970

用于`:last-child`选择最后一个框并应用`margin-right: 0`到它。确保剩余边距将正确填充空间。

```
.box {
    width: 92px;
    height:92px;
    background-color:#333;
    margin:0px 10px 10px 0px;
    float:left;
}

.box:last-child {
    margin-right: 0;
} 
```

如果您必须坚持使用 92px 的宽度，您将无法让它们正确对齐。边距需要填充的剩余空间是 32px，它不会被 3 整除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T20:47:04.643

您的边距框太大。请注意，填充是在指定的`height`and之外的`width`。看到它在[http://jsfiddle.net/37E55/32上工作](http://jsfiddle.net/37E55/32)

# ruby - 如何测试包装在 eventmachine 中的 sinatra 应用程序？

> ID：13535519
> 
> 赞同：1
> 
> 时间：2012-11-23T20:45:34.687
> 
> 标签：ruby, sinatra, rack, eventmachine

我有这个应用程序：

```
require 'sinatra/base'
require 'thin'

class WebService < Sinatra::Base
  get '/' do
    'hello'
  end
end

EM.run do
  EventMachine.add_periodic_timer(1) do
    puts 'hello'
  end

  Thin::Server.start(WebService)
end 
```

我需要为此编写一个测试脚本。通常的方法不起作用，因为测试永远不会被执行：

```
class WebServiceTest < Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    WebService
  end

  def test
    get '/'
    assert last_response.ok?
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:53:45.800

您需要将您的网络应用程序与您的事件机器代码分开，这样您就可以在没有 EM 阻塞线程的情况下要求它：

### 网络服务.rb：

```
require 'sinatra/base'

class WebService < Sinatra::Base
  get '/' do
    'hello'
  end
end 
```

### 应用程序.rb：

```
require 'thin'
require './webservice'

EM.run do
  EventMachine.add_periodic_timer(1) do
    puts 'hello'
  end

  Thin::Server.start(WebService)
end 
```

然后在您的测试文件中，您可以要求`webservice.rb`测试它：

```
require './webservice'

class WebServiceTest < Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    WebService
  end

  def test
    get '/'
    assert last_response.ok?
  end
end 
```

# asp.net - 命名管道引用不适用于 ASP.NET MVC 4

> ID：13535522
> 
> 赞同：7
> 
> 时间：2012-11-23T20:46:03.423
> 
> 标签：asp.net, visual-studio, asp.net-mvc-4, asp.net-web-api, named-pipes

我正在开发一个 API 并使用 ASP.NET Web API 来公开它。我尝试将服务引用添加到负责身份验证和授权的命名管道服务，但我无法在我的代码中引用它。

该命名管道服务工作正常，并用于各种项目。这是我们第一次尝试将它与 ASP.NET MVC 4 一起使用。它在另一个使用 ASP.NET MVC 3 的项目上运行良好。

就像您在下图中看到的那样，我可以添加服务参考。但它没有出现在对象浏览器上或自动完成！

![服务参考](../Images/224612ac3e4486e1ee1b8c47395bba90.png)

当我尝试调用该服务时，它只是没有出现在任何地方。

![代码](../Images/aaafd078145f56d9124aa8efa377958f.png)

这似乎是 ASP.NET MVC 4 项目和命名管道服务引用的问题。

我真的不知道这是否是众所周知的/记录在案的行为，但我无法在互联网上找到与该问题相关的任何有用信息。

我可以在任何类型的项目上使用 Visual Studio 2012 添加对该服务的引用，除了 ASP.NET MVC 4 项目。该问题与 ASP.NET MVC 4 项目特别相关。

我尝试使用 Visual Studio 2010 添加引用，但遇到了同样的问题：与 ASP.NET MVC 3 和任何其他类型的项目配合得很好。同样，该问题与 ASP.NET MVC 4 项目特别相关。

有没有人有同样的问题？我怎么能通过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:10:43.310

由于它似乎是 Visual Studio / ASP.NET MVC 错误，我刚刚找到了一种解决方法。

我只是发现我可以使用[svcutil](http://msdn.microsoft.com/en-us/library/aa347733.aspx)命令行工具来生成服务客户端和数据结构的代码。以下是该命令的语法：

```
> svcutil net.pipe://my_sevice/mex /namespace:"*, MyNamespace" 
```

它生成了以下文件：

*   安全服务.cs
*   输出配置

然后我只是将生成的 SecurityService.cs 文件导入到我当前的项目中，并将生成的 output.config 上可用的绑定配置与我自己的 web.config 合并。

# python - 更改字符串中的字符然后返回字符串的问题

> ID：13535527
> 
> 赞同：0
> 
> 时间：2012-11-23T20:46:29.690
> 
> 标签：python

代码太长了，无法在这里过去，所以它在 PasteBin 上：http: [//pastebin.com/UDPFYsLJ](http://pastebin.com/UDPFYsLJ)

我想要发生的是能够放入“555-GET-FOOD”之类的内容并获得“555-438-3663”。

我有将字母更改为数字的代码……只是在完全不同的行上。这是一个小摘录：

```
Number:  555-GET-FOO3
Number:  555-4ET-FOOD
Number:  555-GET-3OOD 
```

它正确地更改了字母并保留了数字，但它们都在不同的行上。我知道我让它在 for 循环中运行，但我希望对前一个循环所做的更改与当前循环保持一致。

例如，如果第一个循环返回 555-GET-FOO3，我希望下一个循环能够获取它，以便它可以返回 555-4ET-FOO3。

我只是不知道该怎么做。

任何提示都会很棒。我也一直在查看这个线程：[删除字符串中的字符列表](https://stackoverflow.com/questions/10017147/python-replace-characters-in-string)

但是，我没有对 translate 函数做太多（或者，任何事情），并且很难在 Python Docs 之外找到一个好的演练。

这是给学校的，我们不能使用 Python 3，我们必须使用 Python 2.7，所以我认为 maketranslate 不会起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:49:44.000

你所要做的就是改变这个

```
for i, j in dict.iteritems():
    newNumber = phoneNum.replace(i, j)
    print "Number: ",newNumber 
```

对此：

```
for i, j in dict.iteritems():
    phoneNum = phoneNum.replace(i, j)
    print "Number: ",newNumber 
```

**说明**：

在您的方法中，您替换原始电话号码中的一些字符并将结果分配给一个名为 的新变量`newNumber`。但是，你什么都不做`newNumber`，所以它被扔掉了。

相反，如果您用`phoneNum`翻译结果覆盖输入 ( )，那么您所做的任何新翻译都将使用新覆盖的值 进行`phoneNum`，从而使所有更改累积

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:54:01.857

假设你有一个字母到数字的映射，你可以试试这个：

```
In [1]: s = '555-GET-FOOD'

In [2]: num_map = {'D': 3, 'F': 3, 'O': 6}

In [3]: reduce(lambda x, y: x.replace(y, str(num_map[y])), num_map, s)
Out[3]: '555-GET-3663' 
```

其工作原理是将字母映射到数字 ( `num_map`)，然后使用`reduce`迭代映射的每个键（字母），将字母替换为相应的数字。

但是，由于这是针对学校的，因此这种方法可能有点晦涩难懂（以一种不好的方式:)），而@inspectorG4dget 的答案是我要采用的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T20:59:14.977

尝试不同的方法：与其替换字符，不如从您的输入字符串中创建一个新字符串，并翻译字母。您可以像这样遍历字符串的字符：

```
for ch in a_string:
    print ch 
```

一旦你能做到这一点，只需创建一个字母到数字的映射，你就可以在其中查找一个字符并找到其对应的数字。如果您在映射中得到匹配，则使用它，如果没有，则使用原始字符：

```
# Map of letters to digits: you'd pad this out.
letter_map = {'G': 4, 'E': 3, 'T': 7, 'D': 3}
def remap_phone_number(original):
    result = []
    for ch in original:
        result.append(letter_map[ch] if ch in letter_map else ch)
    return ''.join(result) 
```

# c# - 以编程方式运行 Windows 8 应用程序

> ID：13535531
> 
> 赞同：1
> 
> 时间：2012-11-23T20:47:15.917
> 
> 标签：c#, windows-8

是否可以从 C# 2010 中的 Win32 应用程序以编程方式运行 Metro UI 应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:52:47.100

您应该能够按照[此问题的答案中的建议使用](https://stackoverflow.com/questions/10984786/how-to-run-a-metro-app-from-powershell-on-windows-8)[IApplicationActivationManager::ActivateApplication](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706903.aspx)接口

# web-config - MVC 4 网站加载显示 HTTP 错误 500.19

> ID：13535533
> 
> 赞同：7
> 
> 时间：2012-11-23T20:47:39.410
> 
> 标签：web-config, asp.net-mvc-4, visual-studio-2012, iis-7.5

我基于 Internet 应用程序模板创建了一个新的 ASP.NET MVC 4 应用程序，我可以成功运行它并在 VS 2012 Express 中验证用户。

然后将其发布到 wwwroot 中的文件夹，然后在 IIS 7.5 管理器中创建指向该文件夹的虚拟目录，并使用单独的 4.0 集成池将其转换为应用程序。

当我尝试从 IIS 管理器中浏览应用程序时，出现下一个错误：

HTTP 错误 500.19 - 内部服务器错误，无法访问请求的页面，因为该页面的相关配置数据无效。

配置错误：无法添加类型为“add”且唯一键属性“name”设置为“ExtensionlessUrlHandler-Integrated-4.0”的重复集合条目

配置来源：

```
56:       <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
57:       <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />   
58:     </handlers> 
```

[在这里搜索](http://support.microsoft.com/kb/942055)，我找到了相应的答案：

决议 1

**从 ApplicationHost.config 文件或 Web.config 文件中删除格式错误的 XML 元素。**

我的 web.config 文件如下：

```
 <?xml version="1.0"?>
    <configuration>
      <configSections>
        <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
      </configSections>
      <connectionStrings>
        <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-digixMVC4-20120915233326;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-digixMVC4-20120915233326.mdf" providerName="System.Data.SqlClient"/>
      </connectionStrings>
      <appSettings>
        <add key="webpages:Version" value="2.0.0.0"/>
        <add key="webpages:Enabled" value="false"/>
        <add key="PreserveLoginUrl" value="true"/>
        <add key="ClientValidationEnabled" value="true"/>
        <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
      </appSettings>

      <!--
        The following attributes can be set on the <httpRuntime> tag.
          <system.Web>
            <httpRuntime targetFramework="4.5"/>
          </system.Web>
      -->
      <system.web>
        <compilation targetFramework="4.5"/>
        <httpRuntime/>
        <authentication mode="Forms">
          <forms loginUrl="~/Account/Login" timeout="2880"/>
        </authentication>
        <pages controlRenderingCompatibilityVersion="4.0">
          <namespaces>
            <add namespace="System.Web.Helpers"/>
            <add namespace="System.Web.Mvc"/>
            <add namespace="System.Web.Mvc.Ajax"/>
            <add namespace="System.Web.Mvc.Html"/>
            <add namespace="System.Web.Optimization"/>
            <add namespace="System.Web.Routing"/>
            <add namespace="System.Web.WebPages"/>
          </namespaces>
        </pages>
      </system.web>
      <system.webServer>
        <validation validateIntegratedModeConfiguration="false"/>
        <handlers>
          <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit"/>
          <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit"/>
          <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
          <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0"/>
          <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0"/>
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
          <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />      
        </handlers>
      </system.webServer>
      <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
          <dependentAssembly>
            <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364g85"/>
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
          </dependentAssembly>
          <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364g85"/>
            <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0"/>
          </dependentAssembly>
          <dependentAssembly>
            <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364g85"/>
            <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
          </dependentAssembly>
        </assemblyBinding>
      </runtime>
      <entityFramework>
        <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"/>
      </entityFramework>
    </configuration> 
```

由于我是 MVC 4 中技术欠佳的开发人员，我会问是否有人可以在上面的文件中找出格式错误的 xml 元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-30T04:22:21.993

对于 ASP.NET WebAPI 5.2 也是如此。

我有

```
 <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

我改成了

```
 <add name="ExtensionlessUrlHandler-Integrated-4.0a" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0b" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

就是这样..它奏效了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T12:09:58.130

你有两次相同的名字。名称必须是唯一的。

当前配置

```
<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>

<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

改成

```
<add name="ExtensionlessUrlHandler-Integrated-4.0a" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>

<add name="ExtensionlessUrlHandler-Integrated-4.0b" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-13T20:37:50.870

我遇到了与此类似的问题。

对我有用的是删除，然后重新添加处理程序：

我的猜测是，如果默认情况下已在 IIS 服务器中启用此功能，则可能会触发此错误。

我正在使用 IIS 10、MVC 5、.NET Framework 4.6.1

希望这可以帮助 ：-）

# html - 如何在 HTML 中将多张图片显示在一张图片上

> ID：13535537
> 
> 赞同：0
> 
> 时间：2012-11-23T20:47:44.190
> 
> 标签：html

我想使用 HTML 并显示一张大图像。然后我希望在这个大图像上显示多个较小的图像，所有图像都在不同的位置和大小上。

我宁愿只使用 HTML 来做这件事。但是，如果这是不可能的，Javascript 或类似的东西也是一种选择...... :-) 如果有人对使用 PHP 有任何想法，那也很棒。

我已经搜索了网络和 StackOverflow，并尝试了许多可能的解决方案，但没有一个允许我显示一个大图像，然后在这个大图像之上显示多个其他图像。

任何帮助将不胜感激。

亲切的问候，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:53:29.250

您可以使用包含所有较小图像的容器 div。您可以设置该特定 div 的背景。

你的 html 为

```
<div id="container">

</div> 
```

和CSS如下：

```
div#container{

        background-image: url("image.jpg");
        background-repeat:no-repeat;
        height:100%;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:50:44.583

您不能仅在纯 HTML 中将图像覆盖在另一个图像上，但您可以做的是将图像的位置重新定位到另一个标签上，然后使用 css 相应地移动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T20:52:26.897

两种选择：

1.  使用 CSS 将大图像定义为背景，然后您可以在其上添加任何您想要的 html 标记。这样的背景也可以为像`div`s这样的元素声明，而不仅仅是整个页面。

2.  在样式定义中使用绝对定位。这样，您可以将大小图像添加到标记中，然后将它们放在彼此的顶部。

这不需要javascript，而php与此无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T20:53:17.630

您可以像我在此 JSFiddle 中所做的那样定位它们：http: [//jsfiddle.net/xxUpk/](http://jsfiddle.net/xxUpk/)

这`top:-NNNpx`是粗略的，您可以使用`float`和许多其他定位它们的方法。还要考虑将`z-index`它们分层。

# python - Python 元组列表

> ID：13535539
> 
> 赞同：2
> 
> 时间：2012-11-23T20:48:04.590
> 
> 标签：python, list, tuples

你能帮我转换 Python 列表吗：

```
[(1, 'a'), (2, 'b'), (2, 'c'), (3, 'd'), (3, 'e')] 
```

所以： `(1, 'a')`是索引 0

`(2, 'b'), (2, 'c')`都是索引 1

`(3, 'd'), (3, 'e')`都是索引 2

简单地说，所有 element[0] 相等的元组都具有相同的索引。

谢谢你，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T20:49:50.390

[`itertools.groupby`](http://docs.python.org/2/library/itertools.html#itertools.groupby)救援！：

```
lst = [(1, 'a'), (2, 'b'), (2, 'c'), (3, 'd'), (3, 'e')]
lst.sort(key=lambda x: x[0])  #Only necessary if your list isn't sorted already.
new_lst = [list(v) for k,v in itertools.groupby(lst,key=lambda x:x[0])] 
```

如果你愿意，你可以使用`operator.itemgetter(0)`而不是`lambda`...

演示：

```
>>> import itertools
>>> lst = [(1, 'a'), (2, 'b'), (2, 'c'), (3, 'd'), (3, 'e')]
>>> lst.sort(key=lambda x: x[0])
>>> new_lst = [list(v) for k,v in itertools.groupby(lst,key=lambda x:x[0])]
>>> new_lst
[[(1, 'a')], [(2, 'b'), (2, 'c')], [(3, 'd'), (3, 'e')]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T20:51:32.497

目前尚不清楚您想要什么，但这会根据项目的第一个元素将项目分组到列表中。

```
groups = collections.defaultdict(list)
for x,y in items:
    groups[x].append(y) 
```

# delphi - 如何在没有 MS Powerpoint 的计算机上的 Delphi 应用程序中显示 Powerpoint 演示文稿？

> ID：13535540
> 
> 赞同：1
> 
> 时间：2012-11-23T20:48:08.740
> 
> 标签：delphi, powerpoint, vcl

我想构建一个独立的 Delphi 应用程序，包括显示一系列 powepoint 演示文稿的能力，而无需最终用户在他们的机器上安装 MS Powerpoint 或 MS Powerpoint 查看器。

我想知道两件事：

1.  这可能吗？
2.  有哪些 vcl 组件可以实现这一点？

**更新：**

Microsoft PowerPoint 允许用户将演示文稿保存为 Windows Media Video (.wmv)。有几个组件允许您在 Delphi 中播放 .wmv 文件。这就是我使用 Delphi 解决挑战的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T22:07:05.440

1 - 如果您的应用程序复制了 MS PowerPoint 查看器的功能，这应该是可能的。PowerPoint 演示文稿文件格式规范[可从 Microsoft 获得](http://msdn.microsoft.com/en-us/library/cc313106%28v=office.12%29.aspx)。

2 - 此任务没有特殊用途的 VCL 组件。

# c++ - 使用 C++ 中的线程池服务器模型进行套接字编程

> ID：13535543
> 
> 赞同：2
> 
> 时间：2012-11-23T20:48:17.377
> 
> 标签：c++, sockets, threadpool

我正在使用 C++ 开发一个服务器，该服务器将通过 UDP 连接到多个客户端。我已经决定最好使用线程池来处理来自给定套接字的传入数据报。

那么，我的问题是，允许每个工作线程调用 sendto 在可伸缩性方面是否最好？他们应该在同一个插座上这样做还是最好使用不同的插座？所有流量都将通过一个端口。

从我准备好的情况来看，对 recvfrom 和 sendto 的调用似乎是原子的，我已经有一个专用线程来监听套接字（当前是非阻塞的，并使用调用来选择来确定套接字是否准备好从中读取）。

如果我要自己去，我可能会使用不同的套接字来发送和使用多个线程来这样做（假设所有操作都是有效的）。

不确定这会有多大帮助，但这是一般的想法： ![在此处输入图像描述](../Images/1ad81eb6e8f7f46c6501745e6d2a5cf4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:22:46.287

对多个线程使用多个 UDP 套接字没有任何好处，只要它们是非阻塞的，并且使用单个绑定的 UDP 套接字可以更好地映射到您声明的要求。这是实现无状态的、面向数据报的协议的一部分乐趣。

这是否解决/确认您的问题？

# regex - 正则表达式检查超过 999 个单词

> ID：13535544
> 
> 赞同：-1
> 
> 时间：2012-11-23T20:48:18.657
> 
> 标签：regex

我需要一个正则表达式来检查 textarea 表单的输入并检测表单是否包含超过 999 个单词。这是与语言无关的，即我正在使用一个接受正则表达式进行验证的表单插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:03:12.087

您所需要的只是针对输入字符串测试简单的正则表达式匹配。使用正则表达式模式

```
(?:\b\w+(?:\W+|$)){1000} 
```

如果您需要添加 unicode 支持，请使用模式

```
(?:\b[\w\p{L}]+(?:[^\w\p{L}]+|$)){1000} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T01:16:53.470

我怀疑每个人都让这变得比需要的更困难。你真的关心“词”是否是语言意义上的词吗？还是会这样做？

```
\S+(?:\s+\S+){999} 
```

如果是这样，并且您的正则表达式风格支持所有格量​​词，那么我推荐的实际正则表达式是：

```
\S++(?:\s++\S++){999} 
```

当无法匹配时，这将更快地失败。例如，当我尝试在 RegexBuddy 中匹配一个正好包含 999 个单词的字符串时，第一个正则表达式需要 21,870 步才能失败，而所有格版本只需要 3,996 步。如果你没有所有格量词，但你有原子组，这需要 4,008 步才能失败：

```
\S+(?>\s+\S+){999} 
```

鉴于您使用正则表达式来验证用户输入，性能可能无关紧要。我提出它是因为在这种情况下很容易创建一个锁定你的机器的正则表达式。这通常发生在找不到匹配项的情况下。当您测试正则表达式时，您应该至少有与匹配的测试一样多的非匹配测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T20:57:49.660

因为@Asad 似乎很害羞回答

```
(\b\w+\b\s+){1000,} 
```

它匹配一个单词边界 ( `\b`) 后跟一个可以成为单词一部分的字符一次或多次 ( `\w+`) 后跟一个单词边界，以及一个或多个空格字符 ( `\b\s+`- 空格也可以是制表符等...)至少 1000 次 ( `(...){1000,}`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T21:20:47.080

使用前瞻：

```
^(?=(.*\b\w+\b){1000,}) 
```

请注意，这是一个以盎格鲁为中心的解决方案。对于其他语言，`\w`需要用“非标点符号或空格”正则表达式或类似的替换。此外，这不适合单词中的撇号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T00:02:35.900

这是一个计算非空白块数的表达式。

```
^(?>\s*\S+){1000,}\s*$ 
```

这不是一个完美的解决方案，因为它在以下字符串“Ambassador T'Pel”中计算了 2 个单词，而实际上有 3 个单词。但它使正则表达式非常简单，它可能足以满足您的要求。

这个正则表达式也非常快，因为它将回溯保持在最低限度。

# razor - 在 Razor 视图中有条件地执行 JavaScript

> ID：13535547
> 
> 赞同：37
> 
> 时间：2012-11-23T20:48:56.947
> 
> 标签：razor, asp.net-mvc-4

当我的视图模型中的某个条件为真时，我想执行一段 JavaScript：

```
<script type="text/javascript">
    @if (Model.Employees.Count > 1)
    {
        executeJsfunction();
    }
</script> 
```

此代码无法编译，我该怎么做？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-06-02T07:03:09.830

试试这个：

```
<script type="text/javascript">
    @if (Model.Employees.Count > 1)
    {
        @:executeJsfunction();
    }
</script> 
```

注意“ **@:** ”

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-01-29T20:21:05.997

如果您有更复杂的 JS，您可以执行以下操作（@if 中的脚本标签或任何标签不需要额外的转义）：

```
@if (Model.Employees.Count > 1)
{
    <script type="text/javascript">
        $(function() {
            executeJsfunction();
        });
    </script>
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-02-03T12:33:19.367

对于 razor 条件块中的多行脚本，您可以使用：

```
<script type="text/javascript">
    @if (Model.Employees.Count > 1)
    {
       <text>
            executeJsfunctionOne();
            executeJsfunctionTwo();
            executeJsfunctionThree({
               "var_one": true,
               "var_two": false
            });
       </text>
    }
</script> 
```

这比在每一行添加@: 更简洁、更实用。块中的所有内容`<text></text>`都呈现为脚本。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-06-02T08:31:28.590

使用 js`if-else`块，而不是 C#。Js 有自己的`if-else`块。

```
<script type="text/javascript">
if (@Model.Employees.Count > 1)
{
    executeJsfunction();
}
</script> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-10-23T16:35:43.900

MVC 变量在服务器端处理，代码总是试图渲染 Javascript 值以生成 HTML，请尝试以下代码：

```
<script type="text/javascript">
@{if (Model.Employees.Count > 1)
    {
        @:executeJsfunction();
    }
}
</script> 
```

我希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-26T18:13:41.030

我知道之前发布的这个问题，但是我添加了一个新的解决方案作为替代解决方案：

您可以将模型中的值注入到选定 DOM 元素的数据属性中，并通过检查您在构建视图时注入的相同数据属性的值来验证您的条件。

例如，检查以下视图和脚本代码片段如何执行此操作：

```
<div id="myDiv" data-count="@Model.Employees.Count">
</div>

<script>

  if($("#myDiv").data("count") > 1){
    executeJsfunction();
  }

</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-16T13:54:44.743

如果您甚至不想根据某些条件渲染 java 脚本

在布局 html 中定义一个部分

```
<html> 
<body>  
   @RenderSection("xyz", required: false) 
</body> 
</html> 
```

在你看来

```
@if (Model.Condition)
{
   @section xyz{
      <script>
        $(function () {
             // Your Javascript
         });
    </script>
   }
} 
```

就我而言，如果未启用该功能，我不想公开我的 Javascript，它也会减小页面的大小

# matlab - 来自 Matlab 的 Powerpoint 表格大小

> ID：13535553
> 
> 赞同：1
> 
> 时间：2012-11-23T20:49:45.523
> 
> 标签：matlab, vba, powerpoint

我想用来自 Matlab (2010a) 的数据填写一个 powerpoint (我正在处理 2007) 表。

为此，我在 MATLAB 内部使用：

> ```
> % Open powerpoint with handle
> ppH = actxserver('PowerPoint.Application');
> 
> % Add new presentation
> presH = ppH.Presentation.Add;
> 
> % Add blank slide
> blankSlide = presH.SlideMaster.CustomLayouts.Item(7);
> slideH = presH.Slides.AddSlide(1,blankSlide);
> 
> % Create 10x5 table
> tableH = slideH.Shapes.AddTable(10,5,10,10,200,200); 
> ```

好的，现在我想更改单元格的高度和宽度。到目前为止我已经尝试过但没有成功：

> ```
> tableH.Table.Cell(1,1).Shape.Width = 95;
> tableH.Table.Columns(1).Shape.Width = 95;
> tableH.Table.Columns(1).Width = 95;
> tableH.Table.Cell(1,1).Parent.Columns(1).Width = 95;
> slideH.Shapes(1).Table.Columns(1).Width = 95; 
> ```

你知道怎么做吗？

星展银行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:13:41.137

这适用于 PPT 2010，其中表 OM 是半损坏的。它是否会在 PPT 2007 中工作，其中表 OM 是一个火车残骸是另一回事。如果它没有将当前选定表格的第一列设置为 2 英寸（144 点）宽，很可能是由于 PPT 错误。

```
Dim osh As Shape
Dim oTbl As Table
Set osh = ActiveWindow.Selection.ShapeRange(1)
Set oTbl = osh.Table

With oTbl
    .Columns(1).Width = 144
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:02:17.270

我让它运行：

> ```
> tableH.Table.Columns.Item(1).Width = 95; 
> ```

其中 Item(i) 表示第 i 列。

谢谢您的帮助！

# javascript - 尝试从不同邮政编码获取推文的问题

> ID：13535554
> 
> 赞同：1
> 
> 时间：2012-11-23T20:49:48.070
> 
> 标签：javascript, html, twitter

我正在尝试从不同的邮政编码获取推文。为此，我为每个邮政编码使用纬度和经度值。到目前为止，我想为每个邮政编码获取 3 条推文（我有 2 个邮政编码），但它只适用于一个邮政编码。任何建议将不胜感激。先感谢您！

这是我的代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

        <script>
            var lat=[41.9716,42.0411];
            var lng=[-87.7026,-87.6900];
            $(document).ready(function() {
            for(var i=1; i<2; i++)
            {
                $.getJSON('http://search.twitter.com/search.json?q=business&geocode='+lat[i]+','+lng[i]+',5mi&lang=en&callback=?', function(data) {
                var data = data.results;
                var html = "";  
                for(var j=0; j<3;j++){
                    html += "<div style='width:600px;border:solid thin blue'><img src='"+data[j].profile_image_url+"'/><a href='http://twitter.com/" + data[j].from_user + "'>@"+ data[j].from_user + "</a>: " + data[j].text + "</div>";
            } 
            $('.content'+i).html(html);
            }); }
            });
    </script>
</head>

<body>
    <div class="content1"></div>
    <div class="content2"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:16:39.243

我发现您的代码有 2 个问题：

1）如果你想迭代2次，你的`for`函数应该是这样的：`for (var i = 0; i < 2; i++)`

2）您必须考虑到被调用的函数是 `$.getJSON`异步运行的，因此当该函数被调用时，`for`将已经完成，因此您不能`i`在该函数中使用该值。

因此，在更正代码中的这两件事之后，您应该能够得到您想要的。尝试这样的事情：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

        <script>
            var lat = [41.9716, 42.0411];
            var lng = [-87.7026, -87.6900];
            var count = 1;
            $(document).ready(function () {
                for (var i = 0; i < 2; i++) {
                    $.getJSON('http://search.twitter.com/search.json?q=business&geocode=' + lat[i] + ',' + lng[i] + ',5mi&lang=en&callback=?', function (data) {                        
                        var data = data.results;
                        var html = "";
                        for (var j = 0; j < 3; j++) {
                            html += "<div style='width:600px;border:solid thin blue'><img src='" + data[j].profile_image_url + "'/><a href='http://twitter.com/" + data[j].from_user + "'>@" + data[j].from_user + "</a>: " + data[j].text + "</div>";
                        }
                        $('.content' + count++).html(html);
                    });
                }
            });
    </script>
</head>

<body>
    <div class="content1"></div>
    <div class="content2"></div>
</body>
</html> 
```

# c# - 属性 [Bind(Exclude="")] 无法防止过度发布

> ID：13535556
> 
> 赞同：4
> 
> 时间：2012-11-23T20:49:55.493
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, entity-framework-5

防止 MVC 4 过度发布的最佳方法是什么？

根据 MS 消息来源，[Bind] 属性应该是通过防止传入的表单值进入数据库来防止过度发布的最简单方法。使用最新版本的 MVC 和 EF，这似乎没有按预期/宣传的那样工作，除非我遗漏了一些重要的东西。

从*Wrox Professional ASP.NET MVC 4*（Jon Galloway 的第 7 章）开始，以下类应防止过度发布：

```
[Bind(Exclude="IsAdmin")]
public class User
{
    public int ID { get; set; }
    public string FirstName { get; set; }
    public bool IsAdmin { get; set; }
} 
```

但是 [Bind] 属性所做的只是阻止表单提交值绑定到模型。然后模型有一个空白/默认值，它被写回数据库。在这种情况下，它将确保您每次使用此模型调用 .SaveChanges() 时 IsAdmin = false。任何“真实”值都会被覆盖。这是一个巨大的安全失败。

另一种语法 - 将 [Bind] 放在 Edit 控制器操作参数中 - 执行完全相同的操作：

```
public ActionResult Edit([Bind(Exclude = "IsAdmin")] User user) 
```

当调用 .SaveChanges() 时，所有“真实”值都会被覆盖，这与 K. Scott Allen 关于该主题的博客文章相矛盾：http: [//odetocode.com/blogs/scott/archive/2012/03/11/complete-guide- to-mass-assignment-in-asp-net-mvc.aspx](http://odetocode.com/blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx)

唯一的选择似乎是一系列专用的 ViewModel 都与 Automapper 连接。虽然安全，但这似乎是一个非常令人头疼的问题，尤其是在：

*   您可能对 Create、Edit、Index 和 Detail 操作有不同的要求，需要不同的 ViewModel
*   您可能需要公开一些只读字段（例如 Edit 操作上的 CreatedBy），这些字段不能在属性上具有 [ReadOnly] 属性，因为它们是由 Create 操作更新的

我知道有人会回应说你**永远不**应该将数据模型绑定到视图，但这是默认的模板行为以及它在几乎所有文档中的显示方式。此外，MVC + EF 应该让生活*更轻松*，而不是*更难*，而与 AutoMapper 连接的大量 ModelView 类并不是我认为更容易的事情。

那么有人知道如何使 [Bind] 功能如宣传的那样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-24T06:52:49.687

我想你可能在这个场合被 Wrox 的书误导了。您描述的是 Bind/Exclude 属性的预期行为。请参阅[http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute.exclude(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute.exclude(v=vs.108).aspx)。

如果您不想将值绑定到模型上的每个属性，我相信 ViewModel 是他们要走的路，即使您正确指出它们是一种开销。尽管如此，使用它们的优势是显着的，在这种情况下，IMO 证明了额外的开发工作是合理的。例如：

*   允许部分实体更新
*   呈现来自多个实体的数据
*   将 UI 与域模型解耦，允许您改变标签、验证规则、错误消息

Automapper 是从实体映射到视图模型的一种选择，但如果您使用的是延迟加载，请注意。我发现 Automapper 没有按照我希望的方式处理对 EF 代理类的更新。最后，我删除了 AM，并推出了我自己的基于 IMappable 接口和通用实用程序类的映射机制。在许多情况下，只需键入代码并配置 Automapper 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T21:01:32.443

如果您恢复为手动模型绑定，则应该没有任何问题。如果您不输入“IsAdmin”，您的模型将保留其原始值。这增加了几行额外的代码，但通过不生成不维护的 ViewModel 节省了大量时间。

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Edit(Guid id, FormCollection collection)
{
    var user = db.Users.Find(id);
    if (user != null)
        TryUpdateModel(user);
    else
        return HttpNotFound();
    if (ModelState.IsValid)
    {
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(user);
} 
```

# c - 为什么 printf 返回一个值？

> ID：13535557
> 
> 赞同：14
> 
> 时间：2012-11-23T20:49:59.127
> 
> 标签：c, printf

我知道这会`printf`返回一个负错误或成功打印的字符数。检查此返回值的唯一原因是程序的执行是否以某种方式取决于`printf`状态。但是我想不出这个返回值有用的场景。一方面，我从未检查过`printf`函数的返回值。

从哪些场景返回状态`printf`有用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-23T21:04:31.150

的返回值至少有 2 种用途`printf`：

1.  检查错误。当您的输出是交互式的或纯粹的信息性输出时，这一点并不重要，但是对于处理来自 stdio 或文件的文本并将结果写入 stdout 的程序，了解错误（例如磁盘已满、管道关闭或已删除）很重要网络连接）阻止了整个输出被写入。如果输出完成后源文件将被输出删除/替换，这一点尤其重要。但是，由于缓冲，检查`printf`自身的结果通常没有帮助。您需要`ferror(stdout)`在写入最后一个输出并刷新后进行检查，以便可靠地指示是否发生任何写入错误。另一方面，检查 的返回值可以让您*及早*`printf`发现故障*因此，当第一行已经失败时，您不会浪费时间尝试写入数百万行，因此这是一个非常有用的检查；它本身并不是一个足够的检查。*

**   如果输出的字符数不明显，您可能想知道写入了多少个字符。这个数字的一​​个幼稚用法是用于排列列，但假设字符在其视觉呈现中具有固定宽度是相当过时的。不过，如果您正在格式化源代码，这可能是有意义的。另一个类似的用法（不确定这是否过时或过时）是在文件中写入固定宽度的字段。例如，如果您的字段为 80 字节并`printf`返回 52，您可能需要再写入 28 个填充字节来完成该字段。* 

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T21:03:58.257

在几种情况下，您可能需要检查 printf 的返回值。正如您所提到的，一种是检查错误；虽然如果 printf 出现错误，通常您无能为力，但如果您要打印非常大的东西并遇到错误，您可能会决定尝试以较小的块打印它。

您可能还对输出的宽度感兴趣；`printf()`返回成功时写入的字符数。如果您尝试排列输出，并且`printf()`使用可变宽度执行 a ，则可以检查返回值以找出打印了多少个字符，这样您就知道您在哪一列。当然，这仅适用于所有字符都是 1 列宽的情况（大多数 ASCII 字符都是如此），但在某些情况下这可能有用。

`snprintf()`打印到固定大小的缓冲区而不是标准输出或文件。它只会打印到您给它的缓冲区的大小；但可能需要更多空间来打印完整的字符串。它返回打印完整字符串所需的空间量；这样，您可以使用返回值分配适当大小的新缓冲区，如果您的原始缓冲区太小，请重试。`snprintf()`出于这个原因，您几乎总是使用 的返回值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T20:56:47.487

使用它的主要原因之一是用于故障排除。Printf 也可用于写入文件（不仅是 STDOUT）。确保所有字符都已写入文件在某些​​应用程序中至关重要。这方面的一个例子可以在下面找到：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
  FILE *fp;

  printf("This will display on the screen.\n");

  if((fp=freopen("OUT", "w" ,stdout))==NULL) {
    printf("Cannot open file.\n");
    exit(1);
  }

  if( printf("This will be written to the file OUT.") < 0){
      return -1;
  }

  fclose(fp);

  return 0;
} 
```

您可能会问为什么要使用 printf 来打印文件。考虑一下。开发的一些软件没有实现错误日志记录，而是使用了 printf。知识渊博的 C 程序员可以将 printf 的输出重定向到代码顶部的文件，从而实现将错误记录到文件而不是 STDOUT。此时他可以使用 printf 的返回值来确保这些错误被正确打印。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T20:54:20.680

它主要用于错误检查。您可以使用返回值来确定操作是否成功。

如果返回非负值（表示写入的字符数），则表示操作成功。如果返回负数，则会出现一些错误。

例如，

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    int result = printf("This is a test!");
    if (result > 0)
    {
        printf("%d characters were written!", result);
        return EXIT_SUCCESS;
    }
    else return EXIT_FAILURE;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T20:58:00.717

在某些情况下，`printf`只能将部分字符串放入标准输出，这不是错误。

如果您必须确保您的字符串发送完整，您可以使用返回值来查看这一点。

它在使用`fprintf`和套接字等时最有用，但仍然很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T20:53:46.380

我也从未使用过返回值。但除了错误检查之外，您可能会计算已输出的字符数，以进行某种统计或限制*

# c++ - C++中发生关系之前的数据结构

> ID：13535558
> 
> 赞同：0
> 
> 时间：2012-11-23T20:50:04.640
> 
> 标签：c++, c, data-structures, distributed-system

在 C++ 中，在关系之前维护全局的最佳结构是什么。我在考虑链表数组（数组是每个进程，链表中的项目是事件）。但是很难找出不同过程之间的循环。任何人都可以建议良好的数据结构来维持全球关系吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:00:13.087

[Boost 的](http://boost.org/) [图形库](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/index.html)具有可用于检测有向图中的循环的数据结构和算法。

# c# - 用于编程 WPF GUI 的 C# 与 F#

> ID：13535560
> 
> 赞同：38
> 
> 时间：2012-11-23T20:50:18.967
> 
> 标签：c#, wpf, xaml, f#

我正在尝试确定在企业软件开发中使用 F# 和 C# 的界限。用于数学代码的 F# 是显而易见的。我喜欢 F# 用于 GUI 工作，尽管它缺乏 GUI 设计器支持，但当然，行业中 C# GUI 人员的资源可用性更高。但是，我对 C#+XAML GUI 开发不太熟悉，所以我担心会引入偏见。

在一个客户端的情况下，他们有几十个非常静态的类似 GUI（每年更改）和一些非常动态的其他 GUI（例如业务规则引擎）。他们已经拥有 F# 代码，并且已经在 F# 培训上进行投资，因此技能可用性不是问题。我的印象是 C#+XAML 让您可以轻松构建静态 GUI（一些滑块、一些文本框等），但我看不出 GUI 设计器如何帮助编程 GUI，如业务规则引擎。我是否认为维护一组大部分是静态的 GUI（例如，向 100 个单独的 GUI 添加一个新字段）需要体力劳动？还，

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-23T22:50:52.250

我已经用 C# 和 F# 进行了大量的 GUI 和非 GUI 编程，在工作和娱乐中，繁重的编程和静态......我相信你所说的印象是准确和实用的。（请注意，我对 WinForms 比对 WPF 更熟悉，但我认为这里的差异并不重要）。

> 我的印象是 C#+XAML 让您可以轻松构建静态 GUI（一些滑块、一些文本框等），但我看不出 GUI 设计器如何帮助编程 GUI，如业务规则引擎。

这绝对是我的经验。对于大多数静态 GUI，我更喜欢使用带有 C# 的 WinForms 设计器。工具组合非常适合这些场景，并且比使用 F# 且没有设计器的 GUI 手动编码更有效率（现在，如果设计器支持 F#，我会毫不犹豫地选择它）。[I'm Only Resting](http://code.google.com/p/im-only-resting/)是一个例子，我更喜欢 C# 和 WinForms 设计器，而不是纯 F#。

对于繁重的程序化 GUI，我认为最好完全避免使用设计器，而不是尝试一半设计器一半程序化（它变得非常混乱，非常快）。因此，在这些情况下，我肯定更喜欢在 F# 中手动编写 GUI，因为每个人都知道 F# 是更具表现力的语言；) [FsEye](http://code.google.com/p/fseye/)是一个例子，我在 WinForms 设计器中更喜欢纯 F# 而不是 C#。

> 我是否认为维护一组大部分是静态的 GUI（例如，向 100 个单独的 GUI 添加一个新字段）需要体力劳动？

大概。我不相信这个问题真的有任何现成的解决方案，因为它确实是一个相当大的问题。但是可能有一些最佳实践可以为您的软件套件构建自定义解决方案。

> 另外，我是否认为 GUI 设计器在大量程序化 GUI 的上下文中几乎没有用，所以像业务规则引擎之类的东西将主要用 C#+XAML 编写，很少使用 GUI 设计器？

是的，就像我之前所说的，我认为您不应该尝试将 GUI 设计器与繁重的程序化 GUI 编程混为一谈。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-24T14:20:28.763

我最近使用纯 F# 和 WPF 构建了一个有向图可视化应用程序。

对于“程序化”GUI 部分，我基本上构建了可以使用数据绑定和 MVVM 操作的 WPF 自定义控件。

对于静态部分，我将 XAML 与开箱即用的自定义 WPF 控件一起使用。

我将 FSharpX WPF 类型提供程序广泛用于 MVVM 绑定。

而这本“书”对我的入门帮助很大。[http://wpffsharp.codeplex.com/](http://wpffsharp.codeplex.com/)

F# 和 WPF 有些事情不是自然而然的，但几乎在所有情况下都找到了一个相当优雅的解决方案。一些 WPF 数据绑定字符串确实变得很大且难以处理。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-23T22:45:42.913

我不知道如何准确回答这个问题，因为它有点难以掌握，所以我只给你我的 0.05 美元：

如果您使用良好的 MVVM（甚至有受 FP-land 影响的 Rx 版本）来执行 WPF，您将不会编写代码隐藏（或几乎没有） - 并且使用 WPF 类型提供程序和所有其他很棒的东西你周围已经可以毫无问题地编写 WPF-F# 应用程序（即使是设计器支持也没有问题 - 如果可以的话，只需使用 BLEND - 如果不能，你仍然可以将 GUI 分离成一个愚蠢的 C#-lib。）

那么为什么我不在 100% F# 中编写大多数 GUI 呢？

老实说......这是缺乏重构和 ReSharper 之类的工具 - 令人沮丧的是，我无法搜索 F#-symbols 或类型，因为现在 VS/R#er 中没有可怕的支持。

这很奇怪，但是编写 MVVM 代码，你必须为你的 Viewmodels 创建很多琐碎的代码，现在使用正确的工具在 C# 中似乎更容易完成（例如：我可以配置 R#er 来插入我所有的公共探针代码使用私有/公共设置器和基于内部字段的 INotifyPropertyChanged，只需点击 - 并选择正确的选项 - 这将生成很多非常愚蠢的代码，但在 F# 中可以执行的速度要快得多）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-23T21:41:27.443

正如您所指出的，F# 在一般 IT 行业的程序员中是一种非常稀缺的技能，而每个人和他的狗都知道 C#（或者就此而言，Java、C/C++ 很容易翻译）。

因此，从纯粹的管理角度来看，使用 C#+XAML 而不是 F# 可能更有意义，因为有许多因素：

1.  程序员的薪水 - 聘请 F# 大师会增加相当多的薪水预算
2.  开发时间——无论哪种方式都可以争论，请参见[1](http://fsharpnews.blogspot.com.au/2007/05/xaml-or-f.html)以获得良好的比较
3.  企业风险 - 使用 F# 大大增加了每个类别的风险因素：
    *   程序员离开公司并带走知识产权
    *   程序员离开公司，公司无法聘请替代人员 => 项目错过了最后期限
    *   公司没有足够的指标来衡量项目所需的时间
    *   语言变得过时并且代码必须被移植（不是那么大的问题，但仍然比 C# 风险更高）
    *   等等等等。

然而，从工程的角度来看，F#（可能带有用于可视化的附加库）能够简单地生成强大的 GUI。不过，C# 也具有此功能 - 您可以在不以编程方式使用 XAML 的情况下生成整个 GUI。

至于将新项目添加到 100 多个 GUI，这里我根本看不出 XAML 有什么缺点。如果我正确理解了您的问题，您可以使用可以在 XAML 中更新一次的数据模板，并让更改在您的所有 GUI 中传播。

总之，我建议您，除非您有充分的理由使用 F#，否则请坚持使用 C#，因为从长远来看，它会降低您公司的风险。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-29T06:03:23.543

我在这里看到很多令人困惑的答案和解决方案。F# 和 C# 可以在解决方案中组合使用。让 C# 管理 GUI 和 F# 管理包。此外，XAML 与 WinForms 的对比也不费吹灰之力。使用 XAML，后面的代码有足够的空间来完成您需要的任何事情。如果您使用的是 WinForms，那么我相信您需要立即退出它。例如，WPF 比 WinForms 的 GUI 选项更加灵活和强大。更不用说 XAML 的绑定能力了。XAML 是静态的，但可以很好地与后面的代码进行通信，并且可以与任何和所有 .NET 语言进行通信。使用 F#，一起使用 C#，绝对永远离开 WinForms 的世界。这是我做过的一个小项目。它仅使用 WPF、Silverlight、WCF、F#、C# 和 VB.NET 的组合。WinForms 不是 t 触摸，如果您仔细观察，您会发现使用 WinForms 实现这一目标需要很长时间。我可以只用一种语言完成这项工作，但根据情况交换有助于节省时间，但我只前进，从不倒退。WinForms 以及所有其他遗留选项都被忽略并且从未使用过。

# php - 网络和桌面应用程序

> ID：13535562
> 
> 赞同：3
> 
> 时间：2012-11-23T20:50:31.673
> 
> 标签：php, web, desktop

我必须为我的客户开发一个房地产营销 CRM 软件 - 该应用程序安装在桌面上，但也可以从 Web 访问。

他们希望应用程序从桌面运行的两个原因：1\. 这样它可以在有/没有互联网连接的情况下工作 2\. 他们不希望他们的完整数据在线

他们希望通过安全的登录名和密码从他们的网站访问一些数据，例如房产列表和查询（从桌面应用程序管理）。

在桌面应用程序中输入的数据应与网站应用程序自动同步。我想知道是否有办法使用 PHP 和 MySQL 开发这种软件。如果是的话，如果有人能给我提供推荐链接，那就太好了。否则，请建议我应该使用哪种语言。

任何帮助都非常感谢..

谢谢。斯内哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:00:29.703

你有三个要求：

1) Web 访问您的数据库（简单）

2) 厚客户端（Windows 桌面）访问您的数据库（简单）

3) Windows 厚客户端必须能够访问数据库，即使 Internet 处于离线状态。

至于要求 3)，看一下 Microsoft Sync Framework：

*   [http://visualstudiomagazine.com/articles/2012/06/01/database-synchronization-with-the-microsoft-sync-framework.aspx](http://visualstudiomagazine.com/articles/2012/06/01/database-synchronization-with-the-microsoft-sync-framework.aspx)

就要求 1) 和 2) 而言，您几乎可以肯定必须编写两种不同的用户界面——一种用于 Web，一种用于桌面。

是的，您可以用 PHP 和 MySQL 编写 Web 客户端

是的，您的桌面客户端也可以使用 Mysql 数据库……或网络服务

建议：

1) 考虑用 PHP 和 MySQL 编写您的 Web 客户端（因为您似乎对这些技术感到满意）

2) 考虑使用 Microsoft Sync Framework 来处理“离线”需求

3) 用 C#/.Net 编写你的桌面客户端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T18:05:11.647

查看[PHPDesktop](https://code.google.com/p/phpdesktop/)。它是免费和开源的。您可以将使用 PHP、Ruby、Perl、Python 等开发的现有网站，通过一次复制和粘贴将其变成一个完整的桌面应用程序 - 真的就这么简单。您不必更改一行代码。唯一的问题是它目前在后台使用有缺陷的 IE 浏览器引擎来渲染您的桌面应用程序，但开发人员正在开发一个 Chrome Embedded Framework 版本，该版本可能随时发布。这是一个非常令人印象深刻的工具，可能正是您正在寻找的。一探究竟。

**更新：** Chrome Embedded Framework 版本最近发布并且运行良好 - 比 IE 版本好得多。它也不需要在用户的计算机上安装 Chrome。它工作得非常好，我不能推荐它足够高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T20:57:27.833

[您可以使用 PHP+HTML+MYSQL（不确定）在Appcelerator](http://www.appcelerator.com/)中创建您的桌面应用程序，但您可以使用 sqlite，并且您可以在没有互联网连接时使用本地数据，或者您可以在线同步数据从当地

# powershell - 来自powershell函数内部的外部命令的流输出

> ID：13535567
> 
> 赞同：1
> 
> 时间：2012-11-23T20:51:07.007
> 
> 标签：powershell, powershell-3.0

考虑以下命令：

```
7z.exe a -t7z folder.7z folder 
```

我有以下两个精简的 powershell 脚本

文件 1：common.ps1

```
function Archive-Folder ($src, $dest_path, $archive_name) {

    $script_dir = split-path $script:MyInvocation.MyCommand.Path

    if ((test-path $src) -eq $false) {
        write-error "$src is not a valid source directory"
        #return
        return $false
    }

    if ((test-path $dest_path) -eq $false) {
        write-error "$dest_path is not a valid destination directory"
        #return
        return $false
    }

    if ([string]::IsNullOrWhiteSpace($archive_name) -eq $true) {
        write-error "$archive_name is not a valid archive name"
        #return
        return $false
    }

    write-verbose "archiving the folder"

    $archive_command = "$script_dir\7z.exe a -t7z $dest_path\$archive_name $src"

    $exe = "$script_dir\7z.exe"
    $arguments = @('a', '-t7z', "$dest_path\$archive_name", "$src")

    iex $archive_command

    # this doesn't stream the output. it prints it all at once.
    # & $exe $arguments | write-verbose

    return $true
} 
```

文件 2：脚本.ps1

```
$script_dir = split-path $script:MyInvocation.MyCommand.Path
. "$script_dir\common.ps1"

$VerbosePreference = "Continue"

$src = 'C:\some\source'
$backup_path = 'C:\some\destination'
$date_format = 'yyyy_MM_dd_HHmm'
$date = get-date
$date_str = $date.tostring($date_format)
$date_ticks = $date.ticks
$archive_name = "backup-$date_str-$date_ticks.7z"

# this prints the output streamed. The output ends with `True`
archive-folder $src $backup_path $archive_name 

# the following however doesn't output anything. in order to separate the command output from my function output, 
# i was printing the command output using write-verbose
$isSuccess = archive-folder $src $backup_path $archive_name
if ($isSuccess -eq $true) {
    #proceed with the rest of the code
} 
```

通过@Christian 和@zdan 的输入，我能够将问题与返回值的捕获隔离开来。与 类似`archive-folder`，我还有其他执行某些命令行工具的功能。我在想这些函数中的每一个都可以返回真或假，这取决于是否使用正确的操作调用了该函数以及是否正确执行了命令行工具。

但是，如果我捕获`archive-folder`函数的返回值，则命令的输出不会打印到控制台。此外，我的返回值不包含真值或假值。它由命令的整个输出组成。

我第一次尝试解决这个问题是将命令执行语句写为`iex $archive_command | write-verbose`，但这并没有流输出。

我想我可以检查命令行工具在成功的情况下的副作用（比如存档文件的存在）以确定我的函数是否成功执行，但不确定我是否能够对我可能的所有函数执行此操作最终创造。

有没有办法返回一个值并流式传输命令行工具的输出？

**编辑 2**

关于我为什么要把代码分成两个单独的文件/函数，我的实际使用场景如下

> 将`script.ps1`协调此流程。备份数据库（mongodb 为 db 的每个集合生成文件）。归档数据库备份。将存档上传到 S3。这些步骤中的每一个都将由`common.ps1`. 将`script.ps1`只包含胶水代码。发布所有这些可能会使问题复杂化，我觉得不需要了解所面临的问题

**编辑 1**

如果被压缩的文件夹有5个文件，7zip会先输出版权。然后它将输出文本`Scanning`。然后它会输出一行`Creating archive at some location`。然后它将处理每个文件，一个一个地输出每个文件的进度。通过这种方式，我们可以获得有关操作进度的持续反馈。

如果我执行 powershell 函数，那么我在操作期间看不到任何输出，然后一次看到所有输出。我没有收到来自 7zip 的任何反馈。我想模拟 7zip 作为独立 exe 运行时显示的行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-15T16:07:28.327

这对我有用：

`& 7z.exe a -t7z -bsp1 $archive_name $src 2>&1 | Out-Host`

[`-bsp1`](https://sevenzip.osdn.jp/chm/cmdline/switches/bs.htm)开关将流重定向到`progress information`流`stdout`。这是7z的一个特点。还要看[`-bb`](https://sevenzip.osdn.jp/chm/cmdline/switches/bb.htm)开关。

将`2>&1`错误流重定向到`stdout`. 这是 PowerShell 的一项功能。

> # -bs（设置输出/错误/进度行的输出流）开关语法
> 
> ## 句法
> 
> `-bs{o|e|p}{0|1|2}`
> 
> ```
> {id} | 流类型
> ...................................
>  ○ | 标准输出消息
>  电子| 错误信息
>  p | 进度信息
> 
> ```
> 
> ```
> {N} | 流目的地
> ...................................
>  0 | 禁用流
>  1 | 重定向到标准输出流
>  2 | 重定向到标准错误流
> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:17:50.217

为什么不这样呢？如果你需要

```
function archive-folder ($src, $archive_name) {   
$origcolor = [console]::ForegroundColor
[console]::ForegroundColor = "yellow"
"archiving $src"
$command = "7z.exe a -t7z $archive_name $src"
iex $command    
[console]::ForegroundColor = $origcolor    
} 
```

我微不足道的调用者函数：

```
Function k
{
  dir c:\ps\ita
  Write-Host "Starting 7zippping from K function"
  archive-folder -archive_name c:\ps\pippo.7z c:\ps\ita
  Write-Host "7zipping from function k ended"
} 
```

以及我在 powershell 控制台中看到的内容（黄色的输出来自`archive-folder`）

> ķ

```
 Directory: C:\ps\ita

Mode           LastWriteTime       Length Name
----           -------------       ------ ----
-a---    08/06/2011    19:26     5,502 MB ita.txt
-a---    28/05/1994    16:59   165,624 KB ITALIANO.A
-a---    28/05/1994    16:54    53,903 KB ITALIANO.B
-a---    28/05/1994    17:00   165,541 KB ITALIANO.C
-a---    08/06/2011    11:06    98,609 KB ITALIANO.D
-a---    28/05/1994    17:00    72,077 KB ITALIANO.E
-a---    28/05/1994    16:54    80,813 KB ITALIANO.F
-a---    28/05/1994    16:55    78,312 KB ITALIANO.G
-a---    28/05/1994    16:55     2,412 KB ITALIANO.H
-a---    08/06/2011    11:07   298,609 KB ITALIANO.I
-a---    28/05/1994    16:55     1,033 KB ITALIANO.J
-a---    28/05/1994    16:55     1,777 KB ITALIANO.K
-a---    28/05/1994    17:01    71,553 KB ITALIANO.L
-a---    08/06/2011    10:59   162,084 KB ITALIANO.M
-a---    28/05/1994    16:56    47,123 KB ITALIANO.N
-a---    28/05/1994    16:56    72,973 KB ITALIANO.O
-a---    08/06/2011    19:37   264,109 KB ITALIANO.P
-a---    28/05/1994    16:56    10,512 KB ITALIANO.Q
-a---    08/06/2011    19:38   327,348 KB ITALIANO.R
-a---    08/06/2011    19:40   566,512 KB ITALIANO.S
-a---    08/06/2011    10:57   184,719 KB ITALIANO.T
-a---    28/05/1994    16:57    19,378 KB ITALIANO.U
-a---    28/05/1994    16:57    61,552 KB ITALIANO.V
-a---    28/05/1994    16:57     1,334 KB ITALIANO.W
-a---    28/05/1994    16:57     1,368 KB ITALIANO.X
-a---    28/05/1994    16:57       533 B  ITALIANO.Y
-a---    28/05/1994    17:01     7,054 KB ITALIANO.Z
Starting 7zippping from K funztion
archiving c:\ps\ita

7-Zip 4.65  Copyright (c) 1999-2009 Igor Pavlov  2009-02-03

Scanning

Updating archive c:\ps\pippo.7z

Compressing  ITA\ITALIANO.H
Compressing  ITA\ITALIANO.C
Compressing  ITA\ITALIANO.F
Compressing  ITA\ita.txt
Compressing  ITA\ITALIANO.O
Compressing  ITA\ITALIANO.A
Compressing  ITA\ITALIANO.B
Compressing  ITA\ITALIANO.D
Compressing  ITA\ITALIANO.E
Compressing  ITA\ITALIANO.G
Compressing  ITA\ITALIANO.I
Compressing  ITA\ITALIANO.J
Compressing  ITA\ITALIANO.K
Compressing  ITA\ITALIANO.L
Compressing  ITA\ITALIANO.M
Compressing  ITA\ITALIANO.N
Compressing  ITA\ITALIANO.P
Compressing  ITA\ITALIANO.Q
Compressing  ITA\ITALIANO.R
Compressing  ITA\ITALIANO.S
Compressing  ITA\ITALIANO.T
Compressing  ITA\ITALIANO.U
Compressing  ITA\ITALIANO.V
Compressing  ITA\ITALIANO.W
Compressing  ITA\ITALIANO.X
Compressing  ITA\ITALIANO.Y
Compressing  ITA\ITALIANO.Z

Everything is Ok
7zipping from function k ended 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:51:44.090

在我看来，你应该能够做到：

```
&7z.exe a -t7z $archive_name $src | write-verbose 
```

除非我缺少什么。

# javascript - Javascript以天为单位计算年龄

> ID：13535570
> 
> 赞同：-1
> 
> 时间：2012-11-23T20:51:21.800
> 
> 标签：javascript

> **可能重复：**
> [如何使用 JavaScript 计算两个日期之间的天数？](https://stackoverflow.com/questions/2627473/how-to-calculate-the-number-of-days-between-two-dates-using-javascript)

我想知道当前日期，我怎样才能得到以天为单位的年龄。例如，在 1995 年 12 月 4 日，返回 6435。

是否有任何库函数可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T20:54:56.057

您可以组合两个日期并将它们相减。结果将以毫秒为单位，因此您必须将其转换为天数：

```
var days = (new Date() - new Date(1995, 11, 4)) / (1000 * 60 * 60 * 24);
//            (today)          (then)             (milliseconds per day) 
```

然后，您可以四舍五入`days`（并酌情进行。

# java - 在不旋转整个屏幕的情况下绘制带有旋转的对象

> ID：13535573
> 
> 赞同：1
> 
> 时间：2012-11-23T20:51:29.543
> 
> 标签：java

我正在尝试旋转玩家以跟随鼠标。为此，我使用转换为 Graphics2D 对象的 Graphics obj 并使用 rotate 方法。这是我的小组抽奖：

```
public void paint(Graphics g){
    g.setColor(Color.white);
    g.clearRect(0, 0, this.getWidth(), this.getHeight());
    player.draw(g);
    enemy.draw(g);
    mouseSelection.draw(g);
    wallBoard.draw(g);
    //draw the existing walls
    for(Wall w : walls)
        w.draw(g); 

    //draw the potential wall
    potentialWall.draw(g);

    //draw the lineWalls
    for(Wall w : lineWalls)
        w.draw(g);
} 
```

我所有的轮换内容都发生在 player.draw(g) 中，但我认为拥有更多信息会比拥有更少信息更好。这是我的 player.draw(g)

```
 public void draw(Graphics g){
    //draw the player as a circle for now
    g.setColor(Color.black);
    Graphics2D g2d = (Graphics2D)g;
    g2d.drawOval(getX(), getY(), 20, 20);
    sword.draw(g2d);
    g2d.rotate(rotation);
    g2d.rotate(0);
} 
```

我尝试了许多 g2d.rotate 和绘制形状的组合。关于我如何旋转玩家和剑而不是整个世界本身的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:59:08.160

我会尝试将您的播放器绘制到自己的图像（使用自己的图形对象），旋转该图像，然后在您的主图形上绘制该图像。

你会遇到一些潜在的令人讨厌的障碍，比如临时图像的透明度，但它们不是任何一点血汗和眼泪都无法解决的。

# php - 安全地存储用户的“登录”状态

> ID：13535584
> 
> 赞同：0
> 
> 时间：2012-11-23T20:52:02.887
> 
> 标签：php, database, security, codeigniter

我正在使用 PHP 和 Codeigniter 来执行此操作。目前，我只是将用户名和 $logged_in 变量设置为 true 的 cookie 保存给用户。然后，当他们尝试访问一个页面时，我会检查他们的 $logged_in 的状态，如果是，他们就可以自由访问。

我突然想到这可能不是最安全的方法。我应该使用更好的策略吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T20:54:33.370

这根本不安全。Cookie 被视为用户输入，在任何情况下都不可信。

改用会话。您也可以使用某种自定义登录加密代码（我个人建议使用 SHA1），它与数据库中的登录代码匹配，并且每隔 5 分钟刷新一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:01:46.157

CodeIgniter 为这个问题提供了一个很好的解决方案——你可以使用数据库会话。

使用数据库会话，您放入会话中的所有数据都存储在 SQL 数据库中。用户会获得一个带有唯一会话 ID 的 cookie，该 ID 会定期更改。会话 ID 连同 IP 和用户代理用于将用户与其会话数据进行匹配，从而使用户无法篡改自己的会话数据，也很难劫持他人的会话。

[您可以在CodeIgniter 用户指南](http://codeigniter.com/user_guide/libraries/sessions.html)中阅读有关 CodeIgniter 数据库会话的更多信息。

# jquery-mobile - 绑定到 pageinit 事件会生成一个带有微调器的白页

> ID：13535585
> 
> 赞同：0
> 
> 时间：2012-11-23T20:52:13.477
> 
> 标签：jquery-mobile, cordova, spinner

在页面被创建/增强并加载到 DOM（根据文档）之后，我绑定到 jQuery Mobile`pageinit`事件来做一些额外的事情，如下所示：

```
$('#home').live('pageinit', function()
{
    ...
}; 
```

但是，我得到的只是一个白色的微调器，并且该页面永远不会显示在运行 OS6 的 iOS 设备上。它在模拟器中运行良好。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:00:41.277

如果将 pageinit 放置在页面的错误部分，则有很多对 pageinit 的引用不起作用，尽管通常这不会导致页面停止加载。

事件处理程序（...部分）中的脚本错误可能会导致所描述的症状，但在模拟器中可能会以相同的方式工作。

你确定所有的文件都被正确引用了吗？与 OSX 不同，iOS 区分大小写，因此引用 jQuery.js 而不是 jquery.js 会导致您在其他任何地方都看不到的问题。您应该能够将桌面 Safari 网络检查器连接到应用程序以查找任何加载错误。

# c# - 如何在 C# 代码中创建 ImageBrush

> ID：13535587
> 
> 赞同：7
> 
> 时间：2012-11-23T20:52:21.500
> 
> 标签：c#, wpf

在 XAML 中：

```
 <Rectangle Stroke="Aqua" Opacity="0.7" StrokeThickness="10" Canvas.Left="24" Canvas.Top="22" Height="86" Width="102">
        <Rectangle.Fill>
            <ImageBrush ImageSource="C:\Users\xiaorui.dong\Pictures\profile.jpeg"></ImageBrush>
        </Rectangle.Fill>
    </Rectangle> 
```

XAML 工作正常，但如何在 C# 代码中创建上述**ImageBrush ：**

C# 应该是这样的：

```
Rectangle rectangle = new Rectangle();
rectangle.StrokeThickness = 10;
rectangle.Height = 200;
rectangle.Width = 100;
rectangle.SetValue(Canvas.LeftProperty, 100d);
rectangle.SetValue(Canvas.TopProperty, 100d);
rectangle.Fill = new ImageBrush(new BitmapImage(new Uri(@"C:\Users\xiaorui.dong\Pictures\profile.jpeg"))); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T21:01:13.760

我猜问题在于定位图像，而你得到的异常是因为你没有提供`UriKind`参数。尝试`UriKind.Relative`将其作为参数提供给`Uri`：

```
rectangle.Fill = new ImageBrush(new BitmapImage(
    new Uri(@"C:\Users\xiaorui.dong\Pictures\profile.jpeg", UriKind.Relative))); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T21:03:49.510

在 c# 中，您可以像使用它一样使用它，首先是从 XAML 中删除填充，然后在 c# 中使用与您使用它相同的代码。它必须工作。

```
ImageBrush ib = new ImageBrush();

ib.ImageSource = new BitmapImage(new Uri("your path",UriKind.Relative));
rectangle.Fill = ib; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-16T19:17:27.623

此代码使用作为 UWP 项目一部分的图像“Assets/image.png”创建 ImageBrush。相对路径在 UWP 版本的 ImageBrush 中不可用。

```
var imageBrush = new ImageBrush();
imageBrush.ImageSource = new BitmapImage(new Uri("ms-appx:///Assets/image.png")); 
```

# amazon-ec2 - 使用 Amazon Elastic MapReduce 的嵌入式 Pig 脚本

> ID：13535592
> 
> 赞同：2
> 
> 时间：2012-11-23T20:52:30.140
> 
> 标签：amazon-ec2, apache-pig

我正在尝试运行嵌入在 python 中的 Pig 脚本。我已经在我自己的机器上运行了 pig-x local pigRunner.py 之类的脚本，但是当我把它移到亚马逊的 EC2 上时，我得到了一个令人惊讶的错误：

```
File "pigRunner.py", line 3 in <module>
  from org.apache.pig.scripting import *
ImportError: No module named pig

[1]+ Exit 6 pig -x mapreduce pigRunner.py 
```

有没有其他人在亚马逊上运行 Python 脚本有困难？为了让他们处理，我应该做些什么特别的事情吗？

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T23:46:26.920

我遇到了同样的问题，发现这是一个路径问题。我在 AMI 版本“2.4.2 (Hadoop 1.0.3) - 最新”上运行。

在我嵌入的 pig python 文件中，我必须在从 pig 导入任何内容之前将以下位置添加到 python 路径：

```
#!/usr/bin/python
sys.path.append('/home/hadoop/.versions/pig-0.11.1.1/lib/pig/pig-0.11.1.1-amzn.jar/Lib')
from org.apache.pig.scripting import * 
```

然后 jython 解释器能够找到所有必要的 pig 模块。

# actionbarsherlock - ActionBar Sherlock 是否会导致 MediaRecorder 出现问题？

> ID：13535593
> 
> 赞同：0
> 
> 时间：2012-11-23T20:52:31.040
> 
> 标签：actionbarsherlock

我在使用 MediaRecorder 通过 ActionBar Sherlock 录制视频时遇到问题。我有一个基本应用程序，可以毫无问题地设置和录制视频文件，但是一旦我添加 ABS，它就会停止工作。

现在，我有一个非 ABS 应用程序可以毫无问题地录制视频，而同一个应用程序（在所有其他方面）与 ABS 不工作。

使用 CAMCORDER 设置初始化录像机可以通过 MediaRecorder 设置 OK，但是当我停止录制时，我在 logcat 中收到“-1”错误，并且生成的 .MP4 文件没有音频或视频轨道（尽管文件大小看起来好的）。

如果我尝试使用 maunaul 设置（即格式、帧速率、大小等）设置 MediaRecorder，则设置会在“setVideoSource...CAMERA”处不断下降。

有谁知道ABS会以这种方式扰乱MediaRecorder是否有任何理由？

2013 年 1 月 1 日添加：我正在开发的应用程序正在从拍照应用程序升级为视频录制应用程序。相机的预览之前是使用 ImageView 框架完成的，它可以提供图像预览，但不能用作 MediaRecorder 上的视频预览。对于 MediaRecorder，我需要使用 SurfaceView。一旦我切换到 SurfaceView，一切都很好！

# javascript - 只有第一个测试实际上在 Jasmine 中运行

> ID：13535594
> 
> 赞同：1
> 
> 时间：2012-11-23T20:52:33.870
> 
> 标签：javascript, jasmine

我有以下代码：

```
describe("Player", function() {

    var player;

    beforeEach(function(){
        player = new Player({
            name: "Mark"
        });
    });

  it("has a name", function() {
      expect(player.name).toEqual("Mark");
  });

  it("has a score"), function() {
        expect(player.score).toEqual(0);
  };

}); 
```

Jasmine 说它通过了 2 个规格，即使`player.score`是`undefined`

如果我做...

```
 it("has a score"), function() {
       console.log("hello")
       expect(player.score).toEqual(0);
  }; 
```

我可以看到第二个测试从未运行过。任何想法为什么？（这是我第一次使用 Jasmine）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:10:11.410

`it()`第二个规范（调用）中有一个放错位置的右括号。它应该是：

```
it("has a score", function() {
    expect(player.score).toEqual(0);
}); 
```

我经常遇到这个问题：Jasmine 规范中的语法错误导致测试甚至没有运行，而不是应该失败。（我相信这[可能有一个针对 Jasmine 的突出错误](https://github.com/pivotal/jasmine-gem/pull/45)。）

# jquery - LazyLoad 图像直到滚动后才出现

> ID：13535597
> 
> 赞同：9
> 
> 时间：2012-11-23T20:52:45.960
> 
> 标签：jquery, webkit, lazy-loading

我正在使用 jQuery 的[延迟加载](http://www.appelsiini.net/projects/lazyload)插件。

它工作正常，除了一个问题：在您滚动之前，图像 src 不会被替换为原始数据。一旦滚动，甚至一点点，图像就会加载 - 但我需要它们在页面准备好时立即加载。

注意：这纯粹是 Chrome/Safari 问题。我在 Firefox 或 Opera，甚至 IE9 中都没有这个问题。

我已经尝试按照这篇文章的建议： [http](http://sumanrs.wordpress.com/2011/02/08/jquery-lazy-loading-images-no-scrolling/) ://sumanrs.wordpress.com/2011/02/08/jquery-lazy-loading-images-no-scrolling/ 其中指出基本的 jQuery 库具有以下功能无需插件的延迟加载。这似乎并非如此，因为图像只是在初始页面加载时加载的。

非常感谢任何见解！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-23T10:48:25.983

您的图像很可能没有设置宽度和高度。Webkit 浏览器将在 document.ready 上看到宽度和高度为零的图像。这意味着 jQuery 将认为图像是不可见的。默认情况下，延迟加载会忽略不可见的图像。你有三个选择。

1.  修复 HTML 以在图像上具有宽度和高度属性。
2.  设置`skip_invisible`为`false`。
3.  使用插件的[至少 1.8.3 版本](https://github.com/tuupola/jquery_lazyload)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-18T14:15:27.590

```
 $(window).resize(); 
```

在我的情况下帮助了我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T21:07:35.687

解决了我自己的问题：您必须在图像上设置高度和宽度！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-16T00:04:05.993

试试这个：

```
$('img.lazy').lazyload();
$(window).scroll(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-01T08:33:17.960

我有一个类似的问题。阈值选项为我解决了这个问题：

```
$("img.lazy").lazyload({
    threshold : 400
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-18T14:43:43.427

`$('img.lazy').lazyload()`对我来说，问题是我打电话`ready`

`load`改为设置在里面。

```
$(window).load(function(){
  $('img.lazy').lazyload()
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T20:56:26.567

您可以模仿/触发滚动事件以触发页面加载效果：http: [//api.jquery.com/scroll/](http://api.jquery.com/scroll/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-19T06:48:01.027

我使用延迟加载 jquery 插件，但加载出现问题。（即）它在 crom 浏览器中更流畅。但不幸的是，它在 Mozilla fire fox 中无法正常工作。我从 mozilla fire fox 收到此通知（此页面上的脚本可能正忙，或者它可能已停止响应。您可以立即停止脚本，在调试器中打开脚本，或让脚本继续。）。因此，只需回复任何更好的想法以避免此错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-15T21:19:56.487

我遇到过同样的问题。

这样解决：

> 只需从页面上的第一张图片中替换“懒惰”类。

;-)

# visual-studio-lightswitch - 在 Lightswitch 2012 中查询用户表

> ID：13535600
> 
> 赞同：2
> 
> 时间：2012-11-23T20:52:55.893
> 
> 标签：visual-studio-lightswitch

我有一个包含一些类别的表格，我需要将有权访问该应用程序的用户分配给这些类别。我知道用户在“aspnet_Users”表中注册，但我不知道如何创建类别表和“aspnet_Users”表之间的关系，因为该表没有出现在我项目的数据源中。有了这样的关系，我可以向用户显示一个自动完成框，以便管理员可以将用户分配到可编辑网格中的类别。

我需要用户和类别之间的这种绑定，因为知道这种关系我可以限制对用户的访问仅限于他们的类别。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T15:04:53.277

我在这个博客[http://traf-o-data.blogspot.com/2011/08/linking-lightswitch-data-to-logged-in.html中找到了答案](http://traf-o-data.blogspot.com/2011/08/linking-lightswitch-data-to-logged-in.html)

# wpf - RadComboBox 错误选择值 (RadComboItem)

> ID：13535601
> 
> 赞同：0
> 
> 时间：2012-11-23T20:52:57.763
> 
> 标签：wpf, web, telerik, radcombobox

它在 WPF WEB 中有一个 RadComboBox，在运行时通过数据库调用填充。该数据集通过类似于以下的指令分配给组合：

```
dim myNewItem as RadComboBoxItem
myRadCombo.items.clear
For each CurrentRow as DataRow in myDataset.tables(0).Rows

myNewItem = new RadComboBoxItem

With myNewITem
. Content = "some text"
. Tag = "some value"
. Foreground = New solidcolor (Colors.Some color)
End with

myRadCombo.Items.Add (myNewItem)

myNewItem = Nothing

Next 
```

So far so good, the combo is filled smoothly, and deployed elements of the query product loaded ..... however when an item in the combo is selected, the application displays an error abruptly "Object reference not set to an instance of an目的 ”。

如果正确的话，我真的不明白这个错误的发生.... 有必要在 XML 中添加任何附加语句吗？

一些 XAML 代码：

```
<telerik:RadToolBar IsEnabled="True" Name="myToolBar" Grid.Row="3">

                        <telerik:Label Content="Workstation Name:" />

                        <telerik:RadComboBox Name="WorkStationList" Width="100" IsReadOnly="True">
                            <telerik:RadComboBoxItem Content="Station 1" IsSelected="True" Tag="1" />
                            <telerik:RadComboBoxItem Content="Station 2" Tag="2"/>
                            <telerik:RadComboBoxItem Content="Station 3" Tag="3"/>
                            <telerik:RadComboBoxItem Content="Station 4" Tag="4"/>
                        </telerik:RadComboBox>
                    </telerik:RadToolBar> 
```

# android - 在 Mono 中使用 Flurry 或 Localytics 是否必然意味着 iOS 和 Android 需要两个单独的实现？

> ID：13535602
> 
> 赞同：0
> 
> 时间：2012-11-23T20:52:58.030
> 
> 标签：android, ios, mono, flurry, localytics

我打算使用 Flurry 或 Localytics 在我的移动应用程序上执行分析。我正在使用 Mono 开发。Mono 的重点是您的源代码不需要更改，您可以使用相同的源代码为 iOS 和 Android 开发应用程序。但是，我发现 Flurry 和 Localytics 代码是平台相关的。所以这似乎破坏了我为 Android 和 iPhone 使用相同源代码的目的。它是否正确？有我可以使用的解决方法吗？不，我不打算使用 Google Analytics。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T23:38:49.537

我是 Localytics 团队的开发人员，负责开发客户端库。答案是肯定的，它最终需要不同的实现，因为 Android 和 iOS 库存在一些差异。正如罗伯特建议的那样，您可能想要构建自己的平台抽象类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:24:03.377

您可能需要一个桥接类来在两个实现之间切换，但您的代码的其余部分应该保持跨平台兼容。您可能还需要动态地进行 API 调用，因为您可能无法静态绑定“外部”库。

# css - 如何反转 -*-user-select:none; 的效果？

> ID：13535604
> 
> 赞同：0
> 
> 时间：2012-11-23T20:53:09.797
> 
> 标签：css

我有一页链接了 2 个 CSS 文件。

第一个文件包含主站点的格式，第二个文件包含“弹出式”iframe 的格式。

第一个文件有 2 行，不允许在页面上进行选择：

```
body {
    -moz-user-select: none;
    -webkit-user-select: none;
} 
```

我需要某种值而不是`none`，或者一些不同的属性来放入第二个 css 文件中，以便用户可以在 iframe 中进行选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:56:27.753

有关所有可能的值，请参见[http://help.dottoro.com/lcrlukea.php](http://help.dottoro.com/lcrlukea.php)。请注意，目前某些值是供应商前缀的。默认为`user-select: text`。

# c++ - 如何在 C++ 中打印已定义常量的内存地址

> ID：13535613
> 
> 赞同：0
> 
> 时间：2012-11-23T20:53:58.283
> 
> 标签：c++, constants, memory-address

代码：

```
#include <cstdlib>
#include <iostream>
#define PI 3.14159

using namespace std;

int main(int argc, char** argv) {    
    cout<<"Address of PI:"<<&PI<<endl;    
    return 0;
} 
```

这是输出：

main.cpp: 在函数`int main(int, char**)': main.cpp:20: error: non-lvalue in unary`&' make[2]: *** [build/Debug/Cygwin-Windows/main.o] 错误 1 ​​make[1]:****[.build-conf] 错误 2 make: ** * [.build-impl] 错误 2*

 *那为什么我这里看不到 PI 的内存地址呢？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:55:29.030

宏永远不会分配内存。在编译代码之前，编译器会在文件中进行文本搜索，并用它们的值替换所有宏。这也是一个文本搜索，因此文本被替换。因此，在编译之前，您的代码中的 PI 会被 3.14 替换。结果，内存运算符引发错误，因为它无法获得 3.14 的值，因为它不是变量。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T20:55:03.713

您不能获取数字文字的地址。但是，您可以使用变量：

```
// #define PI 3.14159
static const double PI = 3.14159; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T20:56:01.577

在您的代码中，`PI`没有内存地址。由于它是一个预处理器宏，因此它的值会`PI`在程序中出现的任何地方被替换。

如果你把它变成一个变量，你就可以得到它的地址：

```
const double PI = 3.1415926; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T20:56:02.157

预处理器将替换代码中`PI`的`3.14159`任何地方。因此，该数字不驻留在内存中。*

# php - 用ajax重新加载表格中的单元格

> ID：13535614
> 
> 赞同：0
> 
> 时间：2012-11-23T20:53:59.500
> 
> 标签：php, html, xml, ajax

我想创建一个日历，我可以在其中选择我的实践何时打开/关闭。该日历用作每周的标准方案。例如[http://www.restaurantterpolder.be/wachtkamer/vast.php](http://www.restaurantterpolder.be/wachtkamer/vast.php)

标准做法总是关闭，除非您单击单元格。然后将其写入数据库：tbl_open(ID, Weekday, Moment_ID, Doctor_ID)。因为这是一个每周计划，所以我使用“工作日”而不是“日期”。

更改底部单元格时，每次重新加载后页面都会跳起来，这很烦人。所以我想我可以使用 Ajax 重新加载单元格。

如果我没记错的话，我需要： - 调用脚本的页面上的事件 -> onClick=getInfo(this.id);。单击超链接时应该调用它。- 可以从 xml 文件中获取内容的 js 文件 - 从 js 文件调用的 php 文件 1）保存数据 2）加载新日期 3）创建 xml 文件

到目前为止我是对的吗？

我尝试这样开始：

```
<a onClick="getInfo(this.id);" id="tbl_close_id"><img ... /></a> 
```

阿贾克斯

```
var xmlHttp

//gegevens verzamelen om de juiste info uit de database te kunnen halen
function showInfo(str)
{ 
    xmlHttp=GetXmlHttpObject()
    if (xmlHttp==null)
{
         alert ("Browser does not support HTTP Request")
return
}

var url="responsexml_calendar.php"
url=url+"?q="+str
url=url+"&sid="+Math.random()
xmlHttp.onreadystatechange=stateChanged 
xmlHttp.open("GET",url,true)
xmlHttp.send(null)
}

//info is uit de database gehaald en wordt nu in het formulier geplaatst
function stateChanged() 
{ 
if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
{ 
        xmlDoc = xmlHttp.responseXML;
        document.getElementById("class").value = xmlDoc.getElementsByTagName("class")[0].childNodes[0].nodeValue;
        document.getElementById("link").value = xmlDoc.getElementsByTagName("link")[0].childNodes[0].nodeValue;
}
}

function GetXmlHttpObject()
{
var objXMLHttp=null
if (window.XMLHttpRequest)
{
    objXMLHttp=new XMLHttpRequest()
}
else if (window.ActiveXObject)
{
    objXMLHttp=new ActiveXObject("Microsoft.XMLHTTP")
}
return objXMLHttp
} 
```

我检查当天练习是否打开或关闭的 PHP 文件：

```
//SAVE OR DELETE DATA IN DATABASE FIRST (still need to code this)

header('Content-Type: text/xml');
header("Cache-Control: no-cache, must-revalidate");

$query = 'SELECT ID
    FROM tbl_open
    WHERE ID = '.$q.'

$result = mysql_query($query) or die('foutmelding query ajax');

if (mysql_num_rows($result) > 0)
{
    $class = 'class = "normal"';
    $link = '<a onClick="getInfo(this.id);" id="tbl_close_id"><img ... /></a><img src="./img/edit.png" /></a>'. PHP_EOL;
}
else
{
    $class = 'class="unavailable"';
    $link = '<a onClick="getInfo(this.id);" id="tbl_close_id"><img ... /></a><img src="./img/edit.png" /></a>'. PHP_EOL;
}

echo '<?xml version="1.0" encoding="ISO-8859-1"?>
<info>';
    echo "<class>" .$class. "</class>";
    echo "<link>" .$link. "</link>";
echo "</info>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:48:51.313

首先我要说的是我推荐使用 jQuery Javascript 库。使用 jQuery，一切都变得更容易和更短：

[http://jquery.com/](http://jquery.com/)

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script> 
```

jQuery 中的 ajax 请求如下所示

```
$.ajax({
  url: 'responsexml_calendar.php',
  dataType: 'json',
  success: function(data) {

    alert(data.class+' ' + data.link);
  }
}); 
```

语法有点奇怪，但是学了就会有投资回报。

您不需要整个 GetXmlHttpObject 的东西。一切都由 jQuery 管理，您无需在不同的浏览器中处理不同的实现。jQuery 是跨浏览器兼容的。

我在这里选择了数据类型“json”。Json 比 xml 简单。你应该使用 json （更少的开销）

[http://de.wikipedia.org/wiki/JavaScript_Object_Notation](http://de.wikipedia.org/wiki/JavaScript_Object_Notation)

一个 json 对象如下所示：

```
{'class':'someclass','link':'somelink'} 
```

你用过：

```
document.getElementById("class").value = "yourvalue"; 
```

使用 jQuery，它看起来像这样：

```
$('#class').val("yourvalue"); 
```

更容易和更短。

# .net - .Net 角色身份验证 PrincipalPermission 失败

> ID：13535616
> 
> 赞同：1
> 
> 时间：2012-11-23T20:54:03.073
> 
> 标签：.net, vb.net, security, active-directory, principalpermission

我有一个使用 PrincipalPermission 类的 vb.net 3.5 应用程序来确保用户是角色的成员。该代码适用于 Active Directory 域中的某些组，但不适用于其他组。起初我认为空间是一个问题，但我检查了“域用户”，它有效。运行此代码我是 App Group 的成员。

```
Imports System.Security
Imports System.Security.Principal
Imports System.Security.Permissions

    Private Function DemandSecurity() As Boolean
        AppDomain.CurrentDomain.SetPrincipalPolicy(PrincipalPolicy.WindowsPrincipal)
        Dim principalGroup As New PrincipalPermission(Nothing, "App Group")
        Try
            principalGroup.Demand()
            Debug.Print("Demanding pricipal permissions for current user on 'App Group' role succeeded. ")
        Catch secEx As SecurityException
            Debug.Print("Security Exception - Demanding pricipal permissions for current user on 'App Group' role failed. ")

            Application.DoEvents()
            MessageBox.Show("Permission denied. Output: " & vbNewLine & secEx.ToString, "App - Security Exception", MessageBoxButtons.OK, MessageBoxIcon.Error, MessageBoxDefaultButton.Button1)

            Return False
            Exit Function
        End Try
        Return True
    End Function 
```

secEx.ToString 的错误输出是

> “System.Security.SecurityException：对主体权限的请求失败。在 System.Security.Permissions.PrincipalPermission.Demand() 的 System.Security.Permissions.PrincipalPermission.ThrowSecurityException() 中的 App.My.MyApplication.DemandSecurity() 中： \Documents and Settings\me\My Documents\Visual Studio 2008\Projects\App\App\ApplicationEvents.vb:line 28
> 
> 失败的操作是：Demand 失败的第一个权限的类型是：System.Security.Permissions.PrincipalPermission
> 
> 第一个失败的权限是：IPermission class="System.Security.Permissions.PrincipalPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1"> Identity Authenticated="true" Role="应用组"/>
> 
> 需求是：IPermission class="System.Security.Permissions.PrincipalPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" version="1"> Identity Authenticated="true" Role="App Group "/>
> 
> 失败的程序集或 AppDomain 是：mscorlib，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089"

让我知道是否需要包含其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:07:12.457

我认为您最好检查您的 AD 组以查看此问题：[http ://social.technet.microsoft.com/Forums/en-US/winserverDS/thread/3e8e9209-17c7-4674-8780-7ae09c607118](http://social.technet.microsoft.com/Forums/en-US/winserverDS/thread/3e8e9209-17c7-4674-8780-7ae09c607118)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:31:08.903

好的，这只是一个疯狂的猜测，我碰巧看到了关于 SAMAccountName 和专有名称的讨论，但不知道这是否仍然是当前问题： [Active Directory 和 PrincipalPermission](https://stackoverflow.com/questions/1088041/active-directory-and-principalpermission)

老实说，我不知道“角色”是否可以执行完整的 LDAP 过滤器，但让我们试一试：假设您的组专有名称是这样的：

"CN=MyGroup,OU=SecurityGroups,OU=部门,DC=公司,DC=com"

为什么不试试这个：

```
Role="CN=MyGroup,OU=SecurityGroups,OU=Department,DC=Company,DC=com"

Role=@"Company.com\Department\Security Groups\MyGroup"  // Not sure about this one though 
```

而且因为这个看起来更合乎逻辑，可能是这样的：

```
Role=@"Company\SAMAccountNameOfYourGroup" 
```

我认为您在 CN=Users 中的组可能会成功，因为它们可能位于您的活动目录的根目录中，因此对于其他组，您可能需要提供唯一的 SAMAccount，或者为搜索提供一些结构。

# javascript - Mathjax 和 JadeJS 的集成

> ID：13535621
> 
> 赞同：1
> 
> 时间：2012-11-23T20:54:35.390
> 
> 标签：javascript, node.js, express, pug, mathjax

我在 Express 中集成 Mathjax 和 Jade 时遇到问题。我需要在“pre”中显示公式，所以我试图通过脚本配置 Mathjax。**这是我的代码：**

```
script(type="text/x-mathjax-config")
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            skipTags: ["script","noscript","style","textarea","code"]   
            }

    }); 
```

**我的问题是，当我尝试查看该页面时，它会引发此错误：**

语法错误：意外的令牌 {

```
at Object.Function (unknown source)
at Object.exports.compile (/home/andres/web/node-login/node_modules/jade/lib/jade.js:176:8)
at Function.exports.compile (/home/andres/web/node-login/node_modules/express/lib/view.js:68:33)
at ServerResponse.res._render (/home/andres/web/node-login/node_modules/express/lib/view.js:417:18)
at ServerResponse.res.render (/home/andres/web/node-login/node_modules/express/lib/view.js:318:17)
at Promise.module.exports.app.get.Pregunta.find.exec.questions (/home/andres/web/node-login/app/server/router.js:240:16)
at Promise.addBack (/home/andres/web/node-login/node_modules/mongoose/lib/promise.js:128:8)
at Promise.EventEmitter.emit (events.js:88:17)
at Promise.emit (/home/andres/web/node-login/node_modules/mongoose/lib/promise.js:66:38)
at Promise.complete (/home/andres/web/node-login/node_modules/mongoose/lib/promise.js:77:20) 
```

有谁知道可能会发生什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:30:09.637

问题似乎与`type='text/x-mathjax-config'`. 如果我删除它，视图会很好地呈现。如果我保持原样，翡翠会将脚本内容解释为翡翠标签。我不认为这是玉中的错误，因为文本模板也应该能够用玉编写。

无论如何，看起来 mathjax 需要类型才能正确执行配置，所以我们需要解决这个问题。最简单的解决方案是简单地保持一切原样，但`.`在脚本标签的末尾添加一个。这将使它下面的所有内容成为文本文字。

```
script(type="text/x-mathjax-config").
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      skipTags: ["script","noscript","style","textarea","code"]
    }
  }); 
```

或者，也许您可​​以在页面加载后配置 mathjax，如此[处所示](http://docs.mathjax.org/en/v1.1-latest/configuration.html#configuring-mathjax-after-it-is-loaded)。请注意，我对 mathjax 一无所知，我只是看了一眼文档。

# javascript - 我的脚本成功提取 API 数据，但我的脚本忽略了前几 个实例

> ID：13535624
> 
> 赞同：0
> 
> 时间：2012-11-23T20:54:53.477
> 
> 标签：javascript, json

我正在编写一个脚本来从 API 中提取和解析开放时间。*我使用常规时间*创建了接下来 7 天的对象，然后与我们的假期时间列表进行比较。

如果在这 7 天中的某一天发生假期，则营业时间将被此数据覆盖。

```
 // get regular hours
    var next7days = [];
    var storeday = new Date(2012, 12-1, 5);
    for (var i = 0; i < 7; i++) {
        var dayofweek = (storeday.getDay() + 6) % 7;
        next7days[i] = data.hours.regular_hours[dayofweek];
        next7days[i].date = storeday;
        storeday = new Date(storeday.getTime() + 86400000);
    }

    // get holiday hours
    for (var i = 0; i < data.hours.holiday_hours.length; i++) {

        // this spits out all holidays fine
        console.log('holiday:');
        console.log(data.hours.holiday_hours[i]);

        for (var j = 0; j < 7; j++) {
            var fixdate = next7days[j].date.getFullYear() + '-' + (next7days[j].date.getMonth() + 1) + '-' + (next7days[j].date.getDate());
            if (fixdate == data.hours.holiday_hours[i].date) {
                next7days[j].open_time = data.hours.holiday_hours[i].open_time;
                next7days[j].close_time = data.hours.holiday_hours[i].close_time;
                next7days[j].day_name = data.hours.holiday_hours[i].day_name;
                next7days[j].type = data.hours.holiday_hours[i].type;

                // the first seven holidays are NOT successful
                console.log('successful:');
                console.log(next7days[j]);
            }
        }
    } 
```

这非常有效，但不适用于**前七个假期日期**。该脚本可以很好地提取信息（请参阅 console.log），但它要么没有通过假期常规比较运行，要么无法识别日期匹配。

*   **这是我的小提琴：http:** [//jsfiddle.net/chicgeek/3SKYx/48/](http://jsfiddle.net/chicgeek/3SKYx/48/)
*   **以下是供参考的 API 源：** [http ://www.mec.ca/api/v1/stores/1](http://www.mec.ca/api/v1/stores/1)

作为参考，第一个假期日期是 12 月 3 日 - 12 月 9 日，但我的假期时间比较似乎忽略了这些日期。从 12 月 10 日起，一切似乎都正常。

谁能明白为什么？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T21:10:49.267

前几个日期不起作用，因为它们缺少假期日期的前导 0。然后以两位数显示，因为日期相等有效。

# ruby - 使用 Faraday 和 Syncrony 修复错误

> ID：13535631
> 
> 赞同：3
> 
> 时间：2012-11-23T20:55:19.750
> 
> 标签：ruby, faraday

这是我的第一个 Ruby 应用程序，我在使用 Faraday 和 em_syncrony 适配器修复错误时遇到问题，我的代码是这样的：

```
conn = Faraday.new(:url => "http://www.example.com") do |faraday|
  faraday.response :logger
  faraday.adapter  :em_synchrony
end

begin
  html = conn.get do |req|    
    req.options[:timeout] = 1                 
    req.options[:open_timeout] = 1     
  end
rescue
  puts "rescue block"
  return errorTreatment(598)
end 
```

即使断开互联网连接，我也无法挽救任何类型的错误。我可以看到响应状态为“0”，但代码没有引发任何错误，也没有进入救援块。

另一个问题是，无论我为超时分配什么值，它都不会超时！我已经尝试了所有关于法拉第超时的代码，但没有成功。

这有什么帮助吗？？提前致谢！！

# http - 当浏览器在请求之间关闭或刷新时，网络服务器会发生什么？

> ID：13535632
> 
> 赞同：2
> 
> 时间：2012-11-23T20:55:44.967
> 
> 标签：http, webserver

您向 asp.net mvc 网页发出请求。在网络服务器能够响应之前，假设您关闭浏览器或刷新页面。Web 服务器是否仍然继续处理原始请求，然后最终丢弃结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:58:39.077

当浏览器关闭时，TCP 连接也将关闭。Web 服务器最终会收到某种 EOF。在此之前，Web 服务器将照常处理请求。

# c - C中的MPI前缀和

> ID：13535633
> 
> 赞同：3
> 
> 时间：2012-11-23T20:55:56.653
> 
> 标签：c, mpi

我很难使用 MPI 实现前缀和。我想我遗漏了几行，但我不知道遗漏了哪些以及它们应该放在哪里。这是我所拥有的：

```
int main(int argc, char** argv){  
 int i, size, nprocs, rank;
 int array[atoi(argv[1])];

int Destination, Destination_tag;
int Source, Source_tag, RecvData;

int len = sizeof(array)/sizeof(int);

for(i = 0; i < size; i++) 
     {
    array[i] = i+rank*size;
}

MPI_Init(&argc, &argv);
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);

int id = rank;

      //I believe the error is here
for(i = 0; i < size, i++)
{
    message = (rank - pow(2,x));

    Destination = message ;
    Destination_tag = array.id; 
    MPI_Send(&message, 1, MPI_INT, Destination, Destination_tag, MPI_COMM_WORLD); 

    Source = message ;
    Source_tag = message; 
    MPI_Recv(&RecvData, 1, MPI_INT, Source, Source_tag, MPI_COMM_WORLD, &Status); 
   //End of problem area
    printf("My rank is  %d n =%d \n",i,size); 

    MPI_Finalize();
    return 0; 
```

}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T21:04:18.280

`MPI_Send`不要使用and手动计算前缀总和，而是`MPI_Recv`使用`MPI_Scan`. `MPI_Scan`对 process_{0} 到 process_{your rank} 中的元素进行部分包含缩减，让您可以非常轻松地（并且有效地！）执行前缀求和。

例如，假设单个整数像这样分布在进程中：
进程 0 = 2
进程 1 = 3
进程 2 = 4
进程 3 = 5

调用`MPI_Scan`using`MPI_SUM`作为归约操作后，结果将是：
Process 0 = 2
Process 1 = 5
Process 2 = 9
Process 3 = 14

调用`MPI_Exscan`进行独占扫描，这意味着归约不会将调用进程持有的数据包含在归约中。结果将如下所示：
Process 0 = undefined (将你的 recv_buffer 设置为 0 否则会有垃圾)
Process 1 = 2
Process 2 = 5
Process 3 = 9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:01:26.137

您的 MPI 发送和接收呼叫可能是错误。一般来说，我被教导说你应该总是告诉 MPI 进程它的发送和接收是通过一个

```
 if (rank == 0)
    {
      MPI_Send(...
    }

if (rank == 1)
    {
     MPI_Recieve(... 
```

# android - 捕获 RatingBar 点击

> ID：13535640
> 
> 赞同：10
> 
> 时间：2012-11-23T20:56:26.993
> 
> 标签：android, android-layout, ratingbar

我似乎在捕捉我的评分栏点击时遇到了问题。评级栏显示得很好并且具有默认值。唯一的问题是我无法更改任何值或未启用它。我尝试了许多不同的东西（例如，在布局中启用，完全用 java 构建）。它们似乎都没有影响。这是我最新的评分栏化身。我必须做一些愚蠢的事情才能捕捉到点击。

Java 代码：

```
 RatingBar showRatingBar = (RatingBar) findViewById(R.id.showRatingBar);
    showRatingBar.setEnabled(true);
    showRatingBar.setClickable(true);
    showRatingBar.setRating(0);
    showRatingBar.setOnRatingBarChangeListener(new RatingBar.OnRatingBarChangeListener(){
        @Override
        public void onRatingChanged(RatingBar ratingBar, float rating,
                boolean fromUser) {
            System.out.println("showRating.buildRatingBar:  " +rating);
            ratingBar.setRating(rating);

        }});
    showRatingBar.refreshDrawableState(); 
```

布局：

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/showQualityLabel"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:text="@string/show_rating_label"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#E6E6E6"
            android:textSize="12sp" />

        <RatingBar
            android:id="@+id/showRatingBar"
            style="?android:attr/ratingBarStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:max="5"
            android:numStars="5"
            android:rating="0"
            android:stepSize="1"/>
    </LinearLayout> 
```

先感谢您。

克雷格

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-23T21:12:32.743

setOnClickListener() 不起作用是 RatingBar 覆盖 onTouchEvent() 并且永远不会让 View 处理它，因此永远不会调用 View#performClick() （它会调用 OnClickListener）。

从 RatingBar 派生并覆盖 onTouchEvent()

```
ratingBar.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_UP) {
                     float touchPositionX = event.getX();
                     float width = ratingBar.getWidth();
                     float starsf = (touchPositionX / width) * 5.0f;
                     int stars = (int)starsf + 1;
                     ratingBar.setRating(stars);

                     Toast.makeText(MainActivity.this, String.valueOf("test"), Toast.LENGTH_SHORT).show();                   
                     v.setPressed(false);
                }
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    v.setPressed(true);
                }

                if (event.getAction() == MotionEvent.ACTION_CANCEL) {
                    v.setPressed(false);
                }

                return true;
            }}); 
```

# awk - awk 从列表中选择输入文件

> ID：13535642
> 
> 赞同：5
> 
> 时间：2012-11-23T20:56:29.950
> 
> 标签：awk

基本的 Awk 问题，但我似乎无法在任何地方找到答案：

我有一个包含 50000 个 txt 文件的文件夹，我想从中对一个子集运行 AWK 搜索。我已将要限制搜索的文件名保存在单独的文档中。这将大大加快搜索速度，目前看起来像这样：

```
awk -F "searchTerm" '{print NF-1}' data/output/*>> output.txt 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:03:53.793

假设调用了包含要搜索的子集的文件，`subset.txt`并且其内容具有这种格式（每个文件在单独的行上）：

```
file1.txt
file2.txt
file3.txt
...
fileN.txt 
```

然后这将做的伎俩：

```
awk -F "searchTerm" '{print NF-1}' $(<subset.txt) >> output.txt 
```

**解释：**

*   `$(<subset.txt)`将提供文件的子集列表`awk`作为输入。（见下面乔纳森莱弗勒的评论）

* * *

我还应该指出，`-F "searchTerm"`实际上是将字段分隔符（awk 在每一行上使用的限制器）设置为`searchTerm`. 如果要在包含“searchTerm”的每一行上打印字段数 - 1，请执行以下操作：

```
awk '/searchTerm/ {print NF-1}' $(cat subset.txt) >> output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:05:41.687

我认为这对你有用。

```
awk '/searchTerm/{print $(NF-1)}' data/output/*>> output.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T23:37:42.720

如果您将列表放在名为 filelist.txt 的文件中，则可以只使用 cat 命令中的标准输出。

```
 awk -F "searchTerm" '{print NF-1}' `cat data/output/filelist.txt` >> output.txt` 
```

# ios - 初学者iOS应用数据上传到网站

> ID：13535650
> 
> 赞同：1
> 
> 时间：2012-11-23T20:57:27.167
> 
> 标签：ios, web-services, cocoa-touch

首先，我是 iOS 新手，处于开发的早期阶段，但想从正确的方向开始，我做了一些基本的 iOS 教程并完成了 html/c++ 开发。我们有两个成员制作这个应用程序，他将负责 UI 和本地数据存储，而我需要将数据从 iOS 上传到网站。会有一个本地数据库快速记录，我想做两种类型的上传。

1.  数据的“实时流”，每秒左右更新网站上的文本。
2.  一旦这个数据记录会话完成，它将有一个上传按钮来上传整个数据库。

我正在寻找我应该使用哪些方法、数据库和 API。我一直在环顾四周，人们使用不同的 API，我不确定什么最适合我的应用程序。如果您有教程的链接，也将不胜感激。环顾四周，我应该使用 sql（在电话和 Web 服务器上）、php 和 post。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:22:43.777

我建议使用平台即服务提供商 (PAAS) 之一，他们提供服务器基础设施和 iOS 客户端 API。有很多可供选择。例如[Stackmob](http://www.stackmob.com)、[Parse](http://www.parse.com)、[Kinvey](http://www.kinvey.com)，但还有许多其他的。所有这些都提供免费服务，直到您获得大量流量，然后开始扩展成本。如果你决定自己动手，那么在客户端，[RestKit](https://github.com/RestKit/RestKit)绝对是一个从客户端框架开始到基于 REST 的服务 API 的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:41:22.993

我编写了一个自定义类，它使用 AFNetworking 来处理网络请求。我已经将它与基于 PHP 和 .NET 的 Web 服务一起使用。由于请求使用 POST 参数，因此非常灵活。

这是课程：

接口文件：

```
/*
 NetworkClient.h

 Created by LJ Wilson on 2/3/12.
 Copyright (c) 2012 LJ Wilson. All rights reserved.
 License:

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
 and associated documentation files (the "Software"), to deal in the Software without restriction, 
 including without limitation the rights to use, copy, modify, merge, publish, distribute, 
 sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is 
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or 
 substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT 
 NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT 
 OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

#import <Foundation/Foundation.h>

extern NSString * const APIKey;

@interface NetworkClient : NSObject

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block;

+(void)handleNetworkErrorWithError:(NSError *)error;

+(void)handleNoAccessWithReason:(NSString *)reason;

@end 
```

实施文件：

```
/*
 NetworkClient.m

 Created by LJ Wilson on 2/3/12.
 Copyright (c) 2012 LJ Wilson. All rights reserved.
 License:

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
 and associated documentation files (the "Software"), to deal in the Software without restriction, 
 including without limitation the rights to use, copy, modify, merge, publish, distribute, 
 sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is 
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or 
 substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT 
 NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT 
 OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

#import "NetworkClient.h"
#import "AFHTTPClient.h"
#import "AFHTTPRequestOperation.h"
#import "SBJson.h"

NSString * const APIKey = @"APIKEY IF SO DESIRED (ADDS SECURITY)";

@implementation NetworkClient

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block {

    [self processURLRequestWithURL:url andParams:params syncRequest:NO alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block {
    [self processURLRequestWithURL:url andParams:params syncRequest:syncRequest alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block {

    // Default url goes here, pass in a nil to use it
    if (url == nil) {
        url = @"DEFAULT URL HERE";
    }

    NSMutableDictionary *newParams = [[NSMutableDictionary alloc] initWithDictionary:params];
    [newParams setValue:APIKey forKey:@"APIKey"];

    NSURL *requestURL;
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:requestURL];

    NSMutableURLRequest *theRequest = [httpClient requestWithMethod:@"POST" path:url parameters:newParams];

    __block NSString *responseString = @"";

    AFHTTPRequestOperation *_operation = [[AFHTTPRequestOperation alloc] initWithRequest:theRequest];
    __weak AFHTTPRequestOperation *operation = _operation;

    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        responseString = [operation responseString];

        id retObj = [responseString JSONValue];

        // Check for invalid response (No Access)
        if ([retObj isKindOfClass:[NSDictionary class]]) {
            if ([[(NSDictionary *)retObj valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                block(nil);
                [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
            }
        } else if ([retObj isKindOfClass:[NSArray class]]) {
            if ([(NSArray *)retObj count] > 0) {
                NSDictionary *dict = [(NSArray *)retObj objectAtIndex:0];
                if ([[dict valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                    block(nil);
                    [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
                }
            }
        }
        block(retObj);
    } 
                                      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                          NSLog(@"Failed with error = %@", [NSString stringWithFormat:@"[Error]:%@",error]);
                                          block(nil);
                                          if (alertUserOnFailure) {
                                              // Let the user know something went wrong
                                              [self handleNetworkErrorWithError:operation.error];
                                          }

                                      }];

    [operation start];

    if (syncRequest) {
        // Process the request syncronously
        [operation waitUntilFinished];
    } 

}

+(void)handleNetworkErrorWithError:(NSError *)error {
    NSString *errorString = [NSString stringWithFormat:@"[Error]:%@",error];

    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"Connection Error" 
                            message:errorString 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

+(void)handleNoAccessWithReason:(NSString *)reason {
    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"No Access" 
                            message:reason 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

@end 
```

一个示例调用将类似于：

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"GetMeetingRooms", @"Command",
                            nil];

    [NetworkClient processURLRequestWithURL:nil andParams:params block:^(id obj) {
        // Check to make sure we got back a response message (NSArray of NSDictionaries in JSON format
        if ([obj isKindOfClass:[NSArray class]]) {
            NSArray *response = (NSArray *)obj;
            // So dome work here with the response here
        }
    }]; 
```

如果您有任何问题，请告诉我。

# c - 权限位说明

> ID：13535654
> 
> 赞同：1
> 
> 时间：2012-11-23T20:57:49.547
> 
> 标签：c, linux, posix, gnu

我正在查看各种函数中使用的权限位，例如`stat()`and `chmod()`，我想要描述实际定义的宏是什么。例如`S_IRUSR`说它由`00400`(GNU/Linux) 表示。我的问题是，有人可以描述一下`00400`实际情况吗？是数字吗，什么？我了解如何 OR 宏，我只是不明白宏实际上是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T02:09:24.990

我将在许可中描述最左边的三个数字，这也将解释 S_IRUSR，

所以每个数字都是一个八进制数。每个数字可以是 0 到 7。每个八进制数可以转换为 3 位二进制数。每个位代表一个权限。

```
Left most bit = Read permission
Middle bit    = Write permission
Right most bit= Execute permission 
```

让我们将 0 到 7 写入二进制并查看权限位：

```
Octal    Binary 
0        0 0 0 (No Read,  No Write,  No Execute) -- No permission
1        0 0 1 (No Read,  No Write,  Yes you can execute)
2        0 1 0 (No Read,  Can Write, No execute)
3        0 1 1 (No Read,  Can Write, Can execute)
4        1 0 0 (Can Read, No Write,  No Execute)
5        1 0 1 (Can Read, No Write,  Can execute)
6        1 1 0 (Can Read, Can Write, No execute)
7        1 1 1 (Can Read, Can Write, Can execute) 
```

所以每个数字代表权限。现在下一部分是针对这些权限的人。让最左边的三个数字是 XYZ：现在，

```
X means permission given to the owner of the file.
Y means permission given to the group of the owner.
Z means permission given to all other users in system , outside of user's group. 
```

鉴于此，Z_ISUSR = 00400，现在 4 表示用户可读 IRUSR = 用户可读。

这三个是权限中的重要数字，它们仅指定赋予文件的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:00:30.543

[Wiki在这里](http://en.wikipedia.org/wiki/Filesystem_permissions)有很好的解释

从链接页面：

```
0 --- no permission
1 --x execute
2 -w- write
3 -wx write and execute
4 r-- read
5 r-x read and execute
6 rw- read and write
7 rwx read, write, and execute 
```

# css - 如何控制响应流

> ID：13535658
> 
> 赞同：4
> 
> 时间：2012-11-23T20:58:06.930
> 
> 标签：css, html, layout, responsive-design

我正在制作一个响应式网站，并且在正文的右上角有一个标注样式框。当窗口较窄时，我希望标注显示在正文下方全宽，而不是上方。

这是一个代码示例：[http ://codepen.io/creativetags/full/ydozx](http://codepen.io/creativetags/full/ydozx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:53:18.050

使用 CSS[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)。首先，将 main-col 移到 side-col 上方。然后你的 .css 文件中的这个应该给你控制权。

```
@media only screen and (max-width: 360px) {
.main-col {
float: none;
width: 100%;
}

.side-col {
float: none;
width: 100%;
background-color: silver;
} 
```

这将为 360 像素或以下的屏幕尺寸应用 css。

```
@media only screen and (min-width: 360px) {
.main-col {
float: left;
width: 83%;
}

.side-col {
float: left;
width: 17%;
background-color: silver;
} 
```

这将适用于 360 像素以上的屏幕尺寸。

如果必须有文本换行，那么试试这个：[http ://codepen.io/anon/pen/KlmIF](http://codepen.io/anon/pen/KlmIF)

# android - 数据库中的光标问题

> ID：13535663
> 
> 赞同：0
> 
> 时间：2012-11-23T20:59:10.030
> 
> 标签：android, sqlite, cursor

我在登录后尝试获取用户详细信息时遇到问题。我不知道问题是来自数据库本身还是使用光标的问题。

**这是** ***代码***

```
public void onCreate(SQLiteDatabase db) {
    Log.d("SQLite OnCreate", "Creating table");
    String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("

    + KEY_NAME + " VARCHAR (255), " + KEY_MAIL + " VARCHAR (255), "
            + KEY_PASSWORD + " VARCHAR (255), " + KEY_ID
            + " VARCHAR(255), " + "unique_id " + "VARCHAR (255), "
            + KEY_COURSE1 + " VARCHAR(255), " + KEY_COURSE2
            + " VARCHAR(255), " + KEY_COURSE3 + " VARCHAR(255), "
            + KEY_COURSE4 + " VARCHAR(255), " + KEY_COURSE5
            + " VARCHAR(255), " + KEY_COURSE6 + " VARCHAR(255) " +     ");";
    db.execSQL(CREATE_LOGIN_TABLE);
    Log.d("SQLite OnCreate", "table created");

}

public HashMap<String, String> getUserDetails() {
    HashMap<String, String> user = new HashMap<String, String>();
    String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    // Move to first row
    cursor.moveToNext();
    if (cursor.getCount() > 0) {
        user.put("name", cursor.getString(1));
        user.put("password", cursor.getString(3));
        user.put("email", cursor.getString(2));
        user.put("regId", cursor.getString(4));
        user.put("unique_id", cursor.getString(5));
        user.put("course1", cursor.getString(6));
        user.put("course2", cursor.getString(7));
        user.put("course3", cursor.getString(8));
        user.put("course4", cursor.getString(9));
        user.put("course5", cursor.getString(10));
        user.put("course6", cursor.getString(11));
    }
    cursor.close();
    db.close();
    // return user
    return user;
} 
```

在活动中：

```
DatabaseStudents dbo = new DatabaseStudents(getApplicationContext());
            HashMap<String, String> details = dbo.getUserDetails();
             course1 = Integer.parseInt(details.get("course1"));
             course2 = Integer.parseInt(details.get("course2"));
             course3 = Integer.parseInt(details.get("course3"));
             course4 = Integer.parseInt(details.get("course4"));
             course5 = Integer.parseInt(details.get("course5"));
             course6 = Integer.parseInt(details.get("course6")); 
```

但是 logcat 显示错误消息：

```
11-23 22:49:28.051: E/AndroidRuntime(2059): FATAL EXCEPTION: main
11-23 22:49:28.051: E/AndroidRuntime(2059): java.lang.RuntimeException: Unable to start      activity ComponentInfo{guc.edu.iremote/guc.edu.iremote.Main}:     java.lang.IllegalStateException: Couldn't read row 0, col 11 from CursorWindow.  Make sure     the Cursor is initialized correctly before accessing data from it.
11-23 22:49:28.051: E/AndroidRuntime(2059):     at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.os.Looper.loop(Looper.java:137)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at java.lang.reflect.Method.invokeNative(Native Method)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at java.lang.reflect.Method.invoke(Method.java:511)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at dalvik.system.NativeStart.main(Native Method)
11-23 22:49:28.051: E/AndroidRuntime(2059): Caused by: java.lang.IllegalStateException:     Couldn't read row 0, col 11 from CursorWindow.  Make sure the Cursor is initialized     correctly before accessing data from it.
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.database.CursorWindow.nativeGetString(Native Method)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.database.CursorWindow.getString(CursorWindow.java:434)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:51)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at guc.edu.iremote.DatabaseStudents.getUserDetails(DatabaseStudents.java:117)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at guc.edu.iremote.Main.onCreate(Main.java:87)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.app.Activity.performCreate(Activity.java:5008)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-23 22:49:28.051: E/AndroidRuntime(2059):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-23 22:49:28.051: E/AndroidRuntime(2059):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:08:26.603

改变这个：

```
 cursor.moveToNext();
    if (cursor.getCount() > 0) {
        user.put("name", cursor.getString(1));
        user.put("password", cursor.getString(3));
        user.put("email", cursor.getString(2));
        user.put("regId", cursor.getString(4));
        user.put("unique_id", cursor.getString(5));
        user.put("course1", cursor.getString(6));
        user.put("course2", cursor.getString(7));
        user.put("course3", cursor.getString(8));
        user.put("course4", cursor.getString(9));
        user.put("course5", cursor.getString(10));
        user.put("course6", cursor.getString(11));
    } 
```

对此：

```
if (cursor.moveToFirst()) {
        do {

            user.put("name", cursor.getString(1));
            user.put("password", cursor.getString(3));
            user.put("email", cursor.getString(2));
            user.put("regId", cursor.getString(4));
            user.put("unique_id", cursor.getString(5));
            user.put("course1", cursor.getString(6));
            user.put("course2", cursor.getString(7));
            user.put("course3", cursor.getString(8));
            user.put("course4", cursor.getString(9));
            user.put("course5", cursor.getString(10));
            user.put("course6", cursor.getString(11));
        } while (cursor.moveToNext());
    } 
```

`cursor.moveToFirst()`将光标移动到第一行，如果光标为空，则返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T01:48:04.823

游标中的列索引从零索引开始，很像数组和数组列表。这是您的表格列的样子：

```
String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
// column index:    + title
0:    + KEY_NAME + " VARCHAR (255), " 
1:    + KEY_MAIL + " VARCHAR (255), "
2:    + KEY_PASSWORD + " VARCHAR (255), " 
3:    + KEY_ID + " VARCHAR(255), "  
4:    + "unique_id " + "VARCHAR (255), "
5:    + KEY_COURSE1 + " VARCHAR(255), " 
6:    + KEY_COURSE2 + " VARCHAR(255), " 
7:    + KEY_COURSE3 + " VARCHAR(255), "
8:    + KEY_COURSE4 + " VARCHAR(255), " 
9:    + KEY_COURSE5 + " VARCHAR(255), " 
10:    + KEY_COURSE6 + " VARCHAR(255) " +     ");"; 
```

如您所见，没有`cursor.getString(11)`您尝试请求的内容。这个问题很容易解决。但是您应该知道，您不仅可以通过索引请求列，还可以通过名称请求它`cursor.getString(cursor.getColumnIndex(columnName))`，其中`columnName`是您在 create table 语句中分配给列的 String 值。有点冗长，但如果另一个证明很麻烦，它可能会导致更少的错误。

# android - Android ParseException 与 SimpleDateFormat 但 JUnit 测试有效？

> ID：13535666
> 
> 赞同：2
> 
> 时间：2012-11-23T20:59:33.667
> 
> 标签：android, date, simpledateformat, parseexception

我有一个看起来像这样的类：

```
public class DateUtil {
    private final static SimpleDateFormat origDateFormat = new SimpleDateFormat("EEE MMM dd HH:mm:ss z yyyy", Locale.ENGLISH);
    private final static SimpleDateFormat reformatedDateFormat = new SimpleDateFormat("EEE., dd. MMM yyyy", Locale.GERMAN);
    private final static String TAG = DateUtil.class.getSimpleName();

    public static String reformatDateString(String origDateString)  {
        String reformattedDateString = origDateString;
        try {
            Date parsedDate = origDateFormat.parse(origDateString);
            reformattedDateString = reformatedDateFormat.format(parsedDate);
        } 
        catch (ParseException e) {
            //if we can't parse the date, we don't change the format
            Log.i(TAG, "Parse exception: " + e.getMessage());
        }

        return reformattedDateString;
    }

    public static boolean isBeforeCurrentDate(String dateString) throws ParseException  {
        Date parsedDate = origDateFormat.parse(dateString);

        if (parsedDate.before(new Date(System.currentTimeMillis())))  {
            return true;
        }

        return false;
    }
} 
```

...及其相应的 JUnit 测试：

```
public class DateUtilTest {

    @Test
    public void formatCorrectString() {
        String dateString = "Mon Sep 03 00:00:00 CEST 2007";
        String expectedResult = "Mo., 03\. Sep 2007";

        String resultString = DateUtil.reformatDateString(dateString);

        assertEquals(expectedResult, resultString);
    }

    @Test
    public void testBeforeCurrentDate() throws ParseException  {
        String dateString = "Mon Sep 03 00:00:00 CEST 2007";

        assertTrue(DateUtil.isBeforeCurrentDate(dateString));
    }
} 
```

这行得通。但是在我的 Android 应用程序上，我总是得到一个 ParseException ，它的日期字符串相同**Mon Sep 03 00:00:00 CEST 2007**。有什么想法吗？

**[更新]**
我想出了问题所在。它是传递字符串的时区。如果我删除 DateFormat 中的“z”并从传递的日期字符串中删除时区，它可以在 Android 中使用：

```
String dateString = zone.getEffectiveFrom().trim().replace("CEST", "").replace("GMT", "").replace("CET", "").replace("MESZ", ""); 
```

SimpleDateFormat：**EEE MMM dd HH:mm:ss yyyy**
传递的字符串：**Mon Sep 03 00:00:00 2007**

这只是一种解决方法，没有解决方案，尽管我可以忍受，因为我不需要日期字符串的时间，所以对我来说没关系。但我想知道这是否是一个错误，或者 Android 中是否有什么特别之处？

# c++ - 使用 mmap 逐行读取文件

> ID：13535672
> 
> 赞同：4
> 
> 时间：2012-11-23T20:59:59.423
> 
> 标签：c++, file, mmap

我有一个程序可以逐行读取大小不同的文件，我想使用 mmap 但如何使用它逐行读取文件？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T21:06:53.453

编辑完文件后，您`mmap()`可以使文件可用于从现有内存读取数据的合适的流缓冲区，然后使用`std::getline()`：

```
#include <streambuf>
#include <string>
#include <istream>

struct membuf
    std::streambuf {
    membuf(char* start, size_t size) {
        this->setg(start, start, start + size);
    }
};

int main() {
    // mmap() the file yielding start and size
    membuf      sbuf(start, size);
    std:istream in(&sbuf);
    for (std::string line; std::getline(in, line); ) {
        ...
    }
} 
```

# facebook - Facebook 链接自定义信息

> ID：13535678
> 
> 赞同：0
> 
> 时间：2012-11-23T21:00:45.673
> 
> 标签：facebook, api

我什至不知道它叫什么，但是当你在 Facebook 的评论中添加一个链接时，会出现一张图片和一些描述。我正在为我的网站做这个，我只是不知道从哪里开始，有人可以对此有所了解。

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:12:23.157

当用户在他们的墙上发布你的 URL 时，你可以帮助 Facebook 为你选择这个，方法是把它放在你的网页`<head>`标签中：

```
<meta name="title" content="Your Title" />
<meta name="description" content="You Description" />
<link rel="image_src" href="http://example.com/image.jpg" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:17:20.207

IMB 的答案可能会奏效，但您真正想要的是其中的[Open Graph](http://ogp.me/)元数据。

这是 Facebook 解析器在扫描页面以获取描述和图像时首先查找的内容。

添加元数据后，您可以使用[Facebook 调试器](https://developers.facebook.com/tools/debug)确认一切如您所愿。该工具不仅会向您显示 Facebook 正在检测的属性，它还有一个额外的好处是可以清除 Facebook 对该页面的缓存，因此您可以确保它为您的网站显示最新的数据信息。

# python - 用于多处理的 python 调试工具

> ID：13535680
> 
> 赞同：8
> 
> 时间：2012-11-23T21:00:49.590
> 
> 标签：python, debugging

我有一个 python 脚本，它与线程、进程和与数据库的连接一起工作。当我运行我的脚本时，python 崩溃了。

我无法明确检测到发生这种情况的情况。

现在我正在寻找在 python 崩溃时获取更多信息的工具，或者寻找查看我创建的所有进程/连接的查看器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:31:09.280

我创建了一个模块[RemoteException.py](https://gist.github.com/niccokunzmann/5763860)，它显示了进程中异常的完整回溯。蟒蛇2。[下载它](https://gist.github.com/niccokunzmann/5763860)并将其添加到您的代码中：

```
import RemoteException

@RemoteException.showError
def go():
    raise Exception('Error!')

if __name__ == '__main__':
    import multiprocessing
    p = multiprocessing.Pool(processes = 1)
    r = p.apply(go) # full traceback is shown here 
```

**旧答案**

我也有这个问题。

这就是我所做的......一个远程异常来调试多处理调用

[远程异常.py](https://github.com/niccokunzmann/pynet/blob/master/process/RemoteException.py)

复制源代码并删除第 19 行： `file.write('\nin %s ' % (Process.thisProcess,))` 和行 `import Process`

问题是：多处理只传输异常但丢失了回溯。下面的代码创建一个保存回溯的异常对象。并在调用过程中打印出来。

在您的脚本中，您可以执行以下操作：

```
import RemoteException

def f():
    try:
        # here is code that fails but you do know not where
        pass
    except:
        ty, err, tb = RemoteException.exc_info() # like sys.exc_info but with better message
        raise ty, err, tb

# here follows your multiprocessing call to f 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-20T05:03:22.747

```
pip install celery 
```

然后在您的代码中：

```
from celery.contrib import rdb; rdb.set_trace() 
```

这就像一个远程 pdb，如下所示：

```
Remote Debugger:6899: Ready to connect: telnet 127.0.0.1 6899

Type `exit` in session to continue.

Remote Debugger:6899: Waiting for client... 
```

从另一个窗口 telnet localhost 6899 ，你有一个完整的功能 pdb 可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T19:58:59.753

我不知道您的情况，但是如果您使用线程或多处理，那么您的代码（通常）适用于并行处理。在困难的情况下，我所做的一切只是调用没有池的函数，捕获错误，然后再次进入池。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T20:06:00.677

有一个名为 WinPDB 的图形调试器，它使您可以选择遵循特定的 Python 进程。您可以单步执行并查看调用堆栈中不同位置的所有变量。

它为您提供了在 fork 中遵循哪个进程的选项。

它甚至会捕获最终异常并让您查看它的来源。

[http://winpdb.org/](http://winpdb.org/)

# .net - 在 TFS 中构建多个解决方案时已加载测试 DLL

> ID：13535681
> 
> 赞同：1
> 
> 时间：2012-11-23T21:00:50.573
> 
> 标签：.net, tfs, appdomain

我在 TFS 的一个循环中构建了 2 个解决方案，并且在这两个解决方案中我都有相同的测试 DLL（针对第一个解决方案中的 2.0 和第二个解决方案中的 3.5）。第一遍一切都很好，但在第二遍，我明白了：

*API 限制：程序集 'file:///D:\Builds\1\Project\Main\Binaries\FF3.5\Potato.dll' 已从其他位置加载。它不能从同一 appdomain 中的新位置加载。*

我该如何解决这个问题，我可以强制卸载 DLL 吗？我可以对 appdomain 做点什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:39:44.993

您可以尝试此解决方案，它只涉及更改查找所有测试 dll 的表达式[http://geekswithblogs.net/jakob/archive/2010/06/08/tfs-2010-build-dealing-with-the-api-限制错误.aspx](http://geekswithblogs.net/jakob/archive/2010/06/08/tfs-2010-build-dealing-with-the-api-restriction-error.aspx)

编辑：

我对此进行了进一步调查，似乎测试程序集文件规范（2\. 基本 -> 自动测试 -> 测试程序集 -> 默认模板上的测试程序集文件规范）正在使用 FindMatchingFiles 活动。因此，您必须编写一个仅与您认为应该加载的文件匹配的模式。我找不到使用该模式的指南，但这样的东西有效：

1.  _PublishedWebsites***test*.dll（在_PublishedWebsites文件夹中查找名称中包含单词test的所有dll）
2.  *test* .dll（在基本文件夹中查找名称中包含单词 test 的所有 dll）
3.  * **test* .dll（在基本文件夹下的所有文件夹中查找名称中包含单词 test 的所有 dll）

像这样的东西没有：

1.  _PublishedWebsites**\bin*test*.dll
2.  * *\bin*测试*.dll
3.  _PublishedWebsites*test****test*.dll

# c# - 如何只使用一个列表

> ID：13535682
> 
> 赞同：0
> 
> 时间：2012-11-23T21:00:57.720
> 
> 标签：c#, list, polymorphism

嘿，所以我需要设计一个程序，可以将公司的取货或送货添加到我的课程列表中，我制作了一个名为访问的列表，如下所示。

我想知道如何将每个取件或交付添加到列表中，以便区分原始内容，以便我可以显示仅取件或仅交付。

```
class List
{
/*
 * This object represents the List. It has a 1:M relationship with the Visit class
 */

    private List<Visits> visits = new List<Visits>();
    //List object use to implement the relationshio with Visits

    public void addVisits(Visits vis)
    {
        //Add a new Visit to the List
        visits.Add(vis);
    }

    public List<String> listVisits()
    {//Generate a list of String objects, each one of which represents a Visit in List.

        List<String> listVisits = new List<string>();
        //This list object will be populated with Strings representing the Visits in the lists

        foreach (Visits vis in visits)
        {
            String visAsString = vis.ToString();
            //Get a string representing the current visit object

            listVisits.Add(visAsString);
            //Add the visit object to the List
        }

        return listVisits;
        //Return the list of strings
    }

    public Visits getVisits(int index)
    {
        //Return the visit object at the <index> place in the list

        int count = 0;
        foreach (Visits vis in visits)
        {
            //Go through all the visit objects
            if (index == count)
                //If we're at the correct point in the list...
                return vis;
            //exit this method and return the current visit
            count++;
            //Keep counting
        }
        return null;
        //Return null if an index was entered that could not be found
    } 
```

显示代码

```
 /*
         * Update the list on this form the reflect the visits in the list
         */
        lstVisits.Items.Clear();
        //Clear all the existing visits from the list

        List<String> listOfVis = theList.listVisits();
        //Get a list of strings to display in the list box

        lstVisits.Items.AddRange(listOfVis.ToArray());
        //Add the strings to the listBox. Note to add a list of strings in one go we have to 
        //use AddRange and we have to use the ToArray() method of the list that we are adding 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:16:06.250

看起来您拥有两者`Pickup`并`Delivery`继承了一个名为`Visits`^*的通用类。

更改`Visits`以提供一种区分访问类型的方法，例如，如下所示：

```
enum VisitKind {
    Pickup,
    Delivery
}

public class Visits {
    public VisitKind KindOfVisit {get;private set;}
    protected Visits(VisitKind kind) {
        KindOfVisit = kind;
    }
} 
```

现在修改 和 的构造函数，`Pickup`将`Delivery`正确的类型传递给其超类的构造函数，如下所示：

```
public class Pickup : Visits {
    public Pickup() : base(VisitKind.Pickup) {}
}
public class Delivery : Visits {
    public Delivery() : base(VisitKind.Delivery) {}
} 
```

现在您可以检查`KindOfVisit`共同的属性`Pickup`，`Delivery`以便在运行时判断访问的类型：

```
public IList<Delivery> GetDeliveries() {
    var res = new List<Delivery>();
    foreach (var v in visits) {
        if (v.KindOfVisit == VisitKind.Delivery) {
            res.Add((Delivery)v);
        }
    }
    return res;
} 
```

这种解决方案并不理想，因为当有人添加一种新的访问时，处理访问的代码会照常继续编译。不过，这个问题的解决方案比添加属性要困难得多：一种解决方案是使用比简单属性更好的[*访问者模式*](http://en.wikipedia.org/wiki/Visitor_pattern)`Kind`，但它有其自身的局限性。

* * *

^*用名词的复数来命名一个类是非常规的——`Visit`可能是一个更好的名字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:11:46.590

在您的 Visits 类中添加一个参数来跟踪它是取货还是交付，并在 Visits 类中添加一个 getType() /setType() 方法来检索它是哪种类型

# django - Django 多对多关系排列关系

> ID：13535683
> 
> 赞同：1
> 
> 时间：2012-11-23T21:01:11.213
> 
> 标签：django, django-models

我有一个自我引用的多对多关系，如下所示：

```
class User(models.Model):
    groups = models.ManyToManyField('self', blank=True, null=True) 
```

当我在用户 1 和用户 2 之间创建关系时，这是双向的。我可以看到这个：

```
User_1_obj.groups.all()
User_2_obj.groups.all() 
```

但是，当我使用以下方法将用户 3 添加到关系中时：

```
User_1_obj.groups.add(User_3_obj) 
```

用户 1 和用户 3 是双向链接的。但我也希望用户 2 和用户 3（以及要链接的关系中的任何其他用户）。换句话说，我希望所有排列都相互关联，其中：

```
User 1 linked to User 2, User 3, User 4
User 2 linked to User 1, User 3, User 4
User 3 linked to User 1, User 2, User 4
User 4 linked to User 1, User 2, User 3 
```

有没有比遍历所有链接并添加缺少的连接更简单的方法？

谢谢！感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T03:48:21.713

我认为您在错误的情况下使用了自我参照关系。如果您尝试创建用户之间的任意无向连接图，则自引用关系很有用。

如果连接到用户意味着您自动连接到所有其他用户，并且所有这些连接在语义上是完全等效的，那么在我看来，您正在尝试定义更像具有[完整](http://en.wikipedia.org/wiki/Complete_graph) [连接组件](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)的图形的东西。如果是这样的话，那么每个用户实际上只能属于一个组。

您*可以*使用您的方案来做到这一点，但正如您所看到的，这将需要大量的手动管理来强制执行您的完全连接条件，过度描述。朝着更好的方向迈出的一步是通过对一个简单的字段进行分组，比如一个可为空的 IntegerField。

```
class User(models.Model):
    group = models.IntegerField(null=True) 
```

然后，您可以查询与给定的同一组中的所有用户`myUser`by `User.objects.filter(group=myUser.group)`。唯一棘手的部分是，如果以前未连接的组中的两个用户连接起来，您将不得不立即为一组用户重新分配组。但是您可以进行[批量更新](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once)以将第二组中的所有用户重新分配给第一个组，从而合并组。

但是，您需要问自己的一个问题是，用户与同一组中的任何其他用户断开连接是否会导致该用户与该组中的所有用户断开连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:58:18.183

如果您的目标是**获取所有其他用户**，不包括您已经拥有的实例，那么这将起到作用：

```
class User(models.Model):
    def groups(self):
        return User.objects.exclude(pk=self.pk) 
```

但是，如果您只想搜索`User`实例的子集，您可以创建第二个模型，称为`Group`. （这一切似乎有点傲慢，因为我们现在基本上是在复制`django.contib.auth.models`。）

```
class Group(models.Model):
    # Some attributes you would like (maybe a name, or code)

class User(models.Model):
    groups = models.ManyToManyField(Group, related_name='users')

    def get_linked_users(self, group):
        return group.users.exclude(pk=self.pk) 
```

您想要实现的定义过于模糊，但这些是表示 Django 中实例之间关系的几种方法。

* * *

但是，我不确定是否应该在数据库中表示排列。我只会检索`User`我希望包含的所有对象，并在事后用 Python 计算出排列。

也许您可以更详细地了解这次尝试背后的原因。也许有更简单的方法。

# jquery - Jquery获取先前使用的元素的父级

> ID：13535689
> 
> 赞同：0
> 
> 时间：2012-11-23T21:01:46.283
> 
> 标签：jquery, parent

我正在创建一个完整的可编辑菜单并遇到一个奇怪的问题。我制作了用于编辑菜单按钮文本的脚本，它隐藏了链接并将输入附加到 div。这是代码：

```
$('#edit_button').click(function() {
        var temp = id;
        $("#" + temp + " a").hide("fast", function(){
            if($("#link_editor").length > 0){
                var temp_id = $("#link_editor").parent().attr("id");
                $("#link_editor").hide("fast", function(){
                    $("#link_editor").remove();
                    $("#" + temp_id + " a").show("fast");
                });
            }
            $("<input type='text' id='link_editor' value='" + $("#" + temp + " a").html() + "'>").hide().appendTo("#" + temp).show("fast");
        });
    }); 
```

菜单看起来像这样 => 主页博客联系人 所以当我先点击主页，然后点击博客等 - 一切正常，但如果我从联系人开始并返回它不起作用。[您可以在此处](http://temporaryaddress.hopto.org/)查看实时示例。只需将鼠标悬停在任何菜单按钮上，然后单击编辑图标。鼠标悬停时接收全局 ID。

这是菜单代码：

```
<div id="sortable" class="ui-sortable">
        <div id="0"><a href="?page=Home" id="0" class="prevent_doubleclick" title="" style="display: block; ">Home</a></div>
        <div id="1"><a href="?page=Gallery" id="1" class="prevent_doubleclick" title="" style="display: block; ">Gallery</a></div>
        <div id="2"><a href="?page=Blog" id="2" class="prevent_doubleclick" title="" style="display: block; ">Blog</a></div>
        <div id="3"><a href="?page=About" id="3" class="prevent_doubleclick" title="" style="display: none; ">About</a><input type="text" id="link_editor" value="About" style=""></div>
        <div id="4"><a href="?page=Contact" id="4" class="prevent_doubleclick" title="">Contact</a></div>
    <div class="add_button" style="margin-top: -10px; display: none; "><a style="cursor: pointer; text-decoration: none;"><img src="/img/add.png">Add Button</a></div>
</div> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:26:03.393

我找到了我自己问题的答案。不知何故 .remove() 函数不会等待 .hide() 函数完成。也许有更好的方法来解决这个问题，但我发现它只是这样：改变了这个：

```
$("#link_editor").hide("fast", function(){
                    $("#link_editor").remove();
                    $("#" + temp_id + " a").show("fast");
                }); 
```

对此：

```
 $("#link_editor").remove();
                $("#" + temp_id + " a").show("fast"); 
```

# java - 从 java 类调用 doGet Servlet 方法

> ID：13535691
> 
> 赞同：1
> 
> 时间：2012-11-23T21:01:54.330
> 
> 标签：java, web-applications, servlets, httpurlconnection, urlconnection

我有一个预定的作业类，实现了 Quartz Job 类，我想从中调用一个 Servlet 类，该类更新数据库表中的标志，然后将电子邮件发送到适当的电子邮件列表。

我得到一个`java.net.ConnectException`. 尽管通过在浏览器中输入其 URL 或在 JSP 页面中通过 JavaScript 正确调用 servlet。

我的 Java 类如下：

```
public class ExpirationJob implements Job {
    org.apache.log4j.Logger log = org.apache.log4j.Logger.getLogger("ExpirationJob.class");

    public void execute(JobExecutionContext context)
            throws JobExecutionException {
        try {
            URL serv = new URL("http://localhost:8080/app/emailExpirationServlet");
            URLConnection sr = serv.openConnection();
            sr.connect();
            InputStream is = sr.getInputStream();
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader in = new BufferedReader(isr);

            String inputLine;
            int i =0;
            while ((inputLine = in.readLine()) != null)
                i = i +1;
            log.debug("Input line: " + inputLine);
            in.close();
        } catch (MalformedURLException e) {
            log.debug("Error while calling the emailExpirationServlet -- MalformedURLException: "+ e.getMessage());
            e.printStackTrace();
        } catch (IOException e) {
            log.debug("Error while calling the emailExpirationServlet -- IOException: "+ e.getMessage());
            e.printStackTrace();
        }
    }
} 
```

我的servlet代码是：

```
public class emailExpireServlet extends HttpServlet {
    private static final String CONTENT_TYPE = "text/html; charset=UTF-8";
    org.apache.log4j.Logger log = org.apache.log4j.Logger.getLogger("emailExpireServlet.class");

    public void init(ServletConfig config) throws ServletException {
        super.init(config);
        log.debug("Initializing emailExpireServlet");
    }

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        request.setCharacterEncoding("UTF-8");
        response.setContentType("text/html;charset=UTF-8");
        response.setDateHeader("Expires", 0);
        response.setHeader("Cache-Control", "no-cache");
        log.debug("Starting emailExpireServlet");

        //do some business logic here - I have commented it out to rule out any other blocking issue
        response.setStatus(200);
        response.getOutputStream().print("Invoked emailExpireServlet! Status is OK");

    }

    public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doGet(request, response);
    }
} 
```

我得到的例外是：

```
java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:525)
    at java.net.Socket.connect(Socket.java:475)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:394)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:529)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:233)
    at sun.net.www.http.HttpClient.New(HttpClient.java:306)
    at sun.net.www.http.HttpClient.New(HttpClient.java:323)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:860)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:801)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:726)
    at schedulers.ExpirationJob.execute(Unknown Source)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:557) 
```

我正在使用 Tomcat 5.5。

我看过很多其他相关帖子但没有帮助，我也尝试过`HttpClient`但同样的例外。

谁能弄清楚问题出在哪里？

上面的servlet配置`web.xml`是：

```
<servlet>
    <servlet-name>emailExpireServlet</servlet-name>
    <servlet-class>emailExpireServlet</servlet-class>
</servlet>
...
<servlet-mapping>
    <servlet-name>emailExpireServlet</servlet-name>
    <url-pattern>/emailExpireServlet</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:13:53.030

您应该重构您的代码以将此功能移出 servlet 并移到可以从您的 servlet 和您计划的作业中访问的公共类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:42:22.533

`URLConnection`*如果尚未建立这样的连接*，则打开指向 URL 引用的资源的通信链接。 `URL.openConnection()`返回一个`URLConnection`对象，该对象表示与 URL 引用的远程对象的连接。*每次*调用`openConnection`此 URL 的协议处理程序的方法都会打开一个新连接。

# vb.net - 更改鼠标滚轮滚动线？

> ID：13535693
> 
> 赞同：1
> 
> 时间：2012-11-23T21:02:28.093
> 
> 标签：vb.net, scroll, scrollbar, mouseevent, mousewheel

我有一个带自动滚动的面板，我需要更改鼠标滚动行数

我的意思是：

（西班牙语鼠标属性，抱歉）

![在此处输入图像描述](../Images/d0a3092f938c29c39fad98e17e1ea29e.png)

但是我会在我的程序中更改它，对于我的面板，obvius，而不是在 SO！

PS：例如 Winamp 媒体播放器有一个选项。

我在任何地方都找不到信息，请帮助。

> 更新

我的滚动条是一个带有“AutoScroll”属性的面板

我的活动是这样的：

```
 Private Sub Panel1_MouseScroll(sender As Object, e As MouseEventArgs) Handles Panel1.MouseWheel

    Panel1.Invalidate()

    End Sub 
```

这是我的面板的内容：

```
 ' Checkbox drawing
Public Sub updatecheckboxes()
    ' delete the old checkboxes
    Panel1.Controls.Clear()
    ' create the new checkboxes
    Dim filesystem = CreateObject("Scripting.FileSystemObject")
    Dim ThisDir = filesystem.GetFolder(My.Settings.folderpath)
    Dim i As Int32 = 0
    Dim pos As Int32 = 10
    For Each folder In ThisDir.Subfolders
        Array.Resize(mcheck, i + 1)
        mcheck(i) = New CheckBox
        With mcheck(i)
            .AutoSize = True
            .Location = New Point(10, pos)
            .Name = "CheckBox" & i + 1
            .Text = folder.Name
        End With
        Me.Panel1.Controls.Add(mcheck(i))
        AddHandler mcheck(i).CheckedChanged, AddressOf LlamadaCheckBox
        i += 1
        pos += 20
    Next

End Sub 
```

![在此处输入图像描述](../Images/ebed1e8f0ac77b9e077afc7e59b041db.png)

由于面板内的失真效果，我想更改滚动行数，如果我像 Windows SO 属性的图像一样使用“一个 scoll-page”或“10 次滚动”，那么我可以修复它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:28:30.173

该`MouseEventArgs`对象具有`Delta`确定鼠标滚轮滚动量的属性。此外，还有`SystemInformation.MouseWheelScrollLines`. 有一个称为电流常数`WHEEL_DELTA = 120`，它反映了每个鼠标滚轮刻度添加的增量。

所以一个好的定义是：

```
Dim numberOfTextLinesToMove As Integer = CInt(e.Delta * SystemInformation.MouseWheelScrollLines / 120) 
```

来源：[MSDN 上的 Control.MouseWheel 事件](http://msdn.microsoft.com/en-US/library/system.windows.forms.control.mousewheel%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:22:13.137

您可以查看[MouseWheel](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousewheel.aspx)事件的 MSDN 示例。他们建议这样的事情，您可以通过将 SystemInformation.MouseWheelScrollLines 替换为您要滚动的行数来更改更改的数量。

来自链接：

```
Private Sub panel1_MouseWheel(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles panel1.MouseWheel
        ' Update the drawing based upon the mouse wheel scrolling. 
    Dim numberOfTextLinesToMove As Integer = CInt(e.Delta * SystemInformation.MouseWheelScrollLines / 120)
    Dim numberOfPixelsToMove As Integer = numberOfTextLinesToMove * fontSize

    If numberOfPixelsToMove <> 0 The
        Dim translateMatrix As New System.Drawing.Drawing2D.Matrix()
        translateMatrix.Translate(0, numberOfPixelsToMove)
        mousePath.Transform(translateMatrix)
    End If
    panel1.Invalidate()
End Sub 
```

* * *

另一个例子：

我关闭了 AutoScroll，因为它似乎想至少给你一个最小的系统滚动线。我不得不进行一些检查，以防止不断滚动通过范围。玩它，看看它是否适合你。

```
Private Sub panel1_MouseWheel(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles Panel1.MouseWheel
    Dim numberOfTextLinesToMove As Integer = CInt(e.Delta * 20 / 120)
    Dim numberOfPixelsToMove As Integer = numberOfTextLinesToMove * mcheck(0).Font.Size

    If numberOfPixelsToMove <> 0 Then
        If (numberOfPixelsToMove > 0) Then
            If (mcheck(0).Top >= 0) Then Exit Sub
        Else
            If (mcheck(mcheck.Length - 1).Top) <= Panel1.Height Then Exit Sub
        End If

        TranslateCheckboxes(numberOfPixelsToMove)
    Else
        Exit Sub
    End If
    Panel1.Invalidate()
End Sub

Private Sub TranslateCheckboxes(pixels As Integer)
    For x = 0 To mcheck.Length - 1
        mcheck(x).Top += pixels
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T21:47:03.920

`SendMessage`无论`SystemInformation.MouseWheelScrollLines`. _ [对于 Panel 不会发生 MouseWheel 事件](http://social.msdn.microsoft.com/Forums/en/vblanguage/thread/a90d3574-afaa-4990-bade-6ddcb053c61f)。所以我在一个文本框上测试了这个：

```
Private Declare Function SendMessage Lib "user32" Alias "SendMessageA" _
               (ByVal handle As IntPtr, ByVal wMsg As Integer,
                ByVal wParam As Integer, ByVal lParam As Integer) As Integer 
```

向上滚动一行：

```
SendMessage(TextBox1.Handle, &HB6, 0, -1) 
```

向下滚动一行：

```
SendMessage(TextBox1.Handle, &HB6, 0, 1) 
```

最后一个参数是行数，符号表示方向。负-向上，正--向下。

您应该能够覆盖/抑制鼠标滚轮处理并插入这两个语句，具体取决于`delta`传递的值的符号。

# java - 读取文本文件并通过HashMap获取距离值

> ID：13535694
> 
> 赞同：0
> 
> 时间：2012-11-23T21:02:39.710
> 
> 标签：java

我有这个文本文件（dis.txt）包含：

```
 1="A" (Z75)(T118)(S140)
    2="B" (U85)(G90)(F211)(P101)
    3="C" (P138)(D120)(R146)
    4="D" (M75) 
```

这些数字是距离，例如 A 和 Z 之间的距离是 75

我不会通过java程序读取这些距离和城市，如（Z75）（T118）（S140）我认为HashMap在我创建HashMap之后对我的问题有好处，正如你所看到的我写了myMap.get（“A”）; 我不会给我结果 (Z75)(T118)(S140) 。我希望你能理解我的问题谢谢..

```
 import java.io.FileInputStream;
    import java.util.HashMap;
    import java.util.Properties;

    public class nodes {

    public static void main(String[] args) {

    Properties pro = new Properties();
    {

    try {
    pro.load(new FileInputStream("dis"));
    } catch (Exception e) {
    System.out.println(e.toString());
    }
    for (int i = 0; i <= 13; i++) {
    String abu = pro.getProperty("" + i);
    //System.out.println(abu);
    }
    HashMap<String, String> myMap = new HashMap<String, String>();
    myMap.get("A");
    myMap.get("B");
    myMap.get("C");
    myMap.get("D");

    System.out.println(myMap.get("A"));
    System.out.println(myMap.get("B"));
    System.out.println(myMap.get("C"));
    System.out.println(myMap.get("D"));

    }
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:05:12.597

当然，您需要先填充 HashMap，然后才能从中获取任何数据。

在循环中，您正在读取每个属性的值，将数据放入您的`Map`. 并且始终在您`abstract`的. 使用而不是.`reference type``LHS``Map``HashMap`

```
Map<String, String> myMap = new HashMap<String, String>();

for (int i = 1; i <= 13; i++) {  // Start loop from 1, as properties in txt file are from 1
    String abu = pro.getProperty("" + i);  

   // Split the string on space, and put 1st and 2nd element of array 
   // as `key-value` pair in HashMap
   String[] arr = abu.split(" ");
   myMap.put(arr[0], arr[1]);
}

// Now you can fetch the data
for (String str: myMap.keySet()) {
     System.out.println(myMap.get(str));
} 
```

# cuda - 对于不同的运行，以前的值保留在全局内存中，用于 CUDA GPU 的内核参数

> ID：13535698
> 
> 赞同：1
> 
> 时间：2012-11-23T21:03:05.970
> 
> 标签：cuda, gpu

设备 GeForce GTX 680 在我的程序中，使用 CUDA Memcpy 将值从主机复制到设备变量。我可以看到以前的值在程序的不同执行中保留在全局内存中。（多次运行可执行文件）代码 test.cu：

第一次运行：

```
const test[]="overflowhappen";
cudaMalloc((void **) &test_d, sizeof(char)*strlen(test));

cudaMemcpy(test_d,test,sizeof(char)*strlen(test),cudaMemcpyHostToDevice);
function<<<1,1>>>(testfn);

nvcc test.cu
cuda-gdb a.out

<gdb> b testfn
<gdb>p test_d  ->>overflowhappen 
```

第二次运行（我将测试字符串更改为 var）

```
const test[]="var"
cudaMalloc((void **) &test_d, sizeof(char)*strlen(test));
cudaMemcpy(test_d,test,sizeof(char)*strlen(test),cudaMemcpyHostToDevice);
function<<<1,1>>>(testfn);

nvcc test.cu
cuda-gdb a.out

<gdb> b testfn
<gdb>p test_d  ->> varrflowhappen 
```

“rflowhappen”是从以前的运行中复制的。我尝试将 cudaMemset 设置为变量，但是它仍然将以前运行的值显示为变量值。是不是代码有问题？.我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:54:19.787

I think the bug may be trivial: you didn't copy the end-string character 0. When copying C strings, you should always take strlen+1. As a result, in your second run, you allocate memory and copy `{'v','a','r'}`, instead of `{'v','a','r','\0'}`.

When you then try to print it, you get `var#####` where `####` is whatever garbage was there in memory. My guess is that in the first run, that garbage was 0 so the string ended seemingly correct, while in the second run it was the garbage left by the first program.

# photoshop - 我怎样才能在Photoshop中做锯齿形边框

> ID：13535701
> 
> 赞同：-2
> 
> 时间：2012-11-23T21:03:16.667
> 
> 标签：photoshop, zigzag

我只是想知道如何在 Photoshop 中制作这种三角形效果（也带有那个阴影）。顺便说一句，我正在使用 Photoshop CS6。

[图片](http://i.stack.imgur.com/Zyi3e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:07:16.560

本视频教程将向您展示如何绘制锯齿形边框。 [http://www.youtube.com/watch?v=J9Y8YFqYDxc](http://www.youtube.com/watch?v=J9Y8YFqYDxc)

# python - nagare ColorChooser 类的 answer 和 on_answer 方法在哪里定义？

> ID：13535708
> 
> 赞同：1
> 
> 时间：2012-11-23T21:04:03.860
> 
> 标签：python, web-applications

在[Nagare 组件模型文档](http://www.nagare.org/trac/wiki/ComponentModel)的逻辑组合部分，参考了组件的两种方法`ColorChooser`-但没有给出它们的定义或文档。`answer()``on_answer()`

我希望能参考这些方法所指的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:12:20.210

所有 Nagare 组件都有这些方法，请参阅[类`component.Component()`文档](http://www.nagare.org/trac/api/component.py)。

这在组件模型一章的第一句话中提到：

> 组件是一个对象，是`Component`类中的实例[`component.py#component.Component`](http://www.nagare.org/trac/api/component.py#component.Component)。

# sql - SQL聚合/查找值问题并防止过度计数

> ID：13535715
> 
> 赞同：0
> 
> 时间：2012-11-23T21:05:11.270
> 
> 标签：sql, sql-server

我有以下两个表：

**表十**

```
Product  Type   Sales
1   a   1
1   b   1
1   c   0
1   a   2 
```

**表 Y**

```
Product Inventory
1   10 
```

我希望我的查询返回：

```
Product type    sales   inventory
1          a    3       10
1          b    1       0
1          c    0       0 
```

问题是使用聚合函数而不是过度计算库存。例子：

```
select X.product, X.type, sum(X.sales), sum( case when X.sales > 0 then Y.inventory else 0 end) 
from x,y
where x.product = y.product 
group by x.product,x.type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:23:54.203

~~如果您将最终结果基于`sales`，这应该会给您结果：~~

 ~~```
select distinct x1.product,
  x1.type,
  x2.totalsales,
  case when x1.sales > 0 then y.inventory else 0 end
from x x1
left join
(
  select product,
      type,
      sum(sales) as TotalSales
  from x
  group by Product, Type
) x2
  on x1.product = x2.product
  and x1.type = x2.type
left join y
  On Y.Product = x1.Product 
```~~ 

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/aca5c/16)

~~考虑到它的总销售额大于零，我不确定为什么在示例结果中将`inventory`for列为零。`b`~~

**编辑＃1**：

根据您的评论，我建议查看使用`row_number()`：

```
select product, 
  type,
  totalsales,
  case when rn = 1 then inventory else 0 end inventory
from
(
  select x.product,
    x.type,
    sum(sales) TotalSales,
    row_number() over(partition by x.product order by x.type) rn,
    y.inventory
  from x 
  inner join y
    on x.product = y.product
  group by x.product, x.type, y.inventory
) src 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f86a5/11)

或者，如果您不能按分组`inventory`，则在子查询之外加入：

```
select src.product, 
  src.type,
  src.totalsales,
  case when rn = 1 then inventory else 0 end inventory
from
(
  select x.product,
    x.type,
    sum(sales) TotalSales,
    row_number() over(partition by x.product order by x.type) rn
  from x 
  group by x.product, x.type
) src
inner join y
  on src.product = y.product 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f86a5/13)

# android - toUpperCaseLocale() 与 toUpperCase() - 现在针对 Android 4.2

> ID：13535717
> 
> 赞同：19
> 
> 时间：2012-11-23T21:05:15.907
> 
> 标签：android

由于我针对的是 Android 的较新 SDK 版本，因此我收到了关于这行代码的警告：

```
return getString(R.string.usertab1).toUpperCase() 
```

当我将鼠标悬停在它上面时，它会说：

> 隐式使用默认语言环境是常见的错误来源：`toUpperCase(Locale)`改为使用。

有谁知道如何消除这个错误？为什么现在是使用这种方法的首选方式？

我知道这就是答案，可以使用`toUpperCase(Locale)`但无法实施。`Locale`对象从何而来？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-23T21:13:29.913

您可以*显式*使用默认语言环境：

```
return getString(R.string.usertab1).toUpperCase(Locale.getDefault()); 
```

基本上，您不想*隐式*允许设备使用默认值，因为这可能意味着您只是忽略了它可能是一个问题的事实。对于机器可读的内容，您可能需要指定特定的语言环境（例如`Locale.ENGLISH`），以确保始终从数据中获得所需的可重用性。为了向用户显示，明确指定默认语言环境应该没问题。

更完整的阅读：

> 一个常见的错误是在生成机器可读的输出时隐式使用默认语言环境。这往往适用于开发人员的测试设备（特别是因为许多开发人员使用 en_US），但在用户处于更复杂区域设置的设备上运行时会失败。
> 
> 例如，如果您正在格式化整数，则某些语言环境将使用非 ASCII 十进制数字。再举一个例子，如果您正在格式化浮点数，某些语言环境将`','`用作小数点和`'.'`数字分组。这对于人类可读的输出是正确的，但如果呈现给另一台计算机可能会导致问题（`parseDouble(String)`例如，无法解析这样的数字）。您还应该警惕不采用 Locale的`toLowerCase()`and重载：例如，在土耳其，字符and不会被转换为and 。这是土耳其语文本（例如用户输入）的正确行为，但不适用于 HTTP 标头。`toUpperCase()``'i'``'I'``'I'``'i'`
> 
> --[`Locale`开发者文档](http://developer.android.com/reference/java/util/Locale.html)

# php - 通过 PHP 访问 WCF Soap 服务

> ID：13535726
> 
> 赞同：0
> 
> 时间：2012-11-23T21:06:23.053
> 
> 标签：php, wcf

我目前正在尝试学习如何制作 WCF 肥皂服务。然后我试图通过 PHP 访问它，但我目前遇到错误。

下面是访问 WCF 肥皂服务的代码。

```
try
{
    $client = new SoapClient("http://localhost:8732/Design_Time_Addresses/SoapServer/Service1/?wsdl",
            array('soap_version'=>'SOAP_1_2', "trace" => 1, "exception" =>0));
    $result = $client->__soapCall("getData", array());

    echo "<pre>";
    print_r($result);
    echo "</pre>";
}
catch (Exception $e)
{
    echo $e->getMessage();
} 
```

目前我收到以下错误：

```
Cannot process the message because the content type 'text/xml; charset=utf-8' was not the expected type 'application/soap+xml; charset=utf-8'. 
```

我用谷歌搜索了这个，但到目前为止对我来说没有任何意义。我确实在某个地方读过，`'soap_version'=>'SOAP_1_2'`但没有任何区别。

使用 WcfTestClient 软件时，soap 服务工作正常，因此我在执行 PHP 的方式一定有问题。

**更新** 下面是肥皂请求标头

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-GB,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:PHPSESSID=o9iaupn13vq7p812t4bhos97p6; user=cboard
Host:localhost
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11 
```

下面是响应头

```
Content-Length:142
Content-Type:text/plain
Date:Fri, 23 Nov 2012 21:35:55 GMT
Server:Microsoft-IIS/7.5
X-Powered-By:PHP/5.3.13
X-Powered-By:ASP.NET 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:50:35.193

感谢大家的帮助和建议，奇迹般地我设法找出了问题所在。

我需要将绑定从更改`wsHttpBinding`为`basicHttpBinding`，现在可以通过 PHP 访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:12:45.770

这里的问题是返回的响应是错误页面（文本/纯文本）而不是 Web 服务响应（应用程序/xml）

要尝试修复它首先找出错误是什么。使用 Wire Shark（或类似的东西）查看发回的内容。

如果错误中的信息不足以发现问题。再次使用 Wire Shark 并从您的 php 客户端和 WCF 测试客户端捕获请求，然后比较两者。

# jquery - jQuery validate errorPlacement 移除

> ID：13535731
> 
> 赞同：1
> 
> 时间：2012-11-23T21:07:01.757
> 
> 标签：jquery, jquery-validate

验证字段后，我很难从 errorPlacement 分配的区域中删除错误。非常感谢任何帮助！

```
$('document').ready(function(){
$('form').validate({
    rules: {
       a: {required:true, minlength:2}
    },      
    messages: {
       a: {required: "enter your name!"}       
    },
    errorPlacement: function(error, element) {
     if(element.attr('name') == 'a'){
         error.appendTo($('#restErrorDate'));                    
     }
    },
    success: function(error){

    },
    debug:true
});
$('#a').blur(function(){
    $("form").validate().element("#a");
});
}); 
```

这是html：

```
<div>
<form action="#" id='commentForm'>
    <input type="text" name="a" id="a">
</form>
</div>
<div id="restErrorDate" class="restErrorDate" style="border:1px solid blue;"></div> 
```

这是jsfiddle：

[http://jsfiddle.net/mmw562/Evxd9/](http://jsfiddle.net/mmw562/Evxd9/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:10:06.450

而不是追加（将继续添加更多），只需覆盖所有现有的 HTML：

```
errorPlacement: function(error, element) {
    if(element.attr('name') == 'a'){
        // error.appendTo($('#restErrorDate'));
        $('#restErrorDate').html(error);                
    }
}, 
```

演示：http: [//jsfiddle.net/Evxd9/2/](http://jsfiddle.net/Evxd9/2/)

# python - GTK 3 - 添加项目后展开的弹出菜单

> ID：13535732
> 
> 赞同：6
> 
> 时间：2012-11-23T21:07:02.600
> 
> 标签：python, menu, popup, gtk3

我将 GTK 3.4 与 python 一起使用（带有 GObject 内省）。

我使用 Gtk.UIManager 构建了弹出菜单，当菜单实例化时，某些菜单项不活动/不可见。后来它们被激活并在菜单中可见。

但是有一个小问题 - 弹出菜单的大小（高度）似乎保持不变 - 我现在必须滚动菜单项 - 在菜单区域的顶部和底部有 ^ v 箭头表示项目不适合区域，并且可以上下滚动。但是，如果弹出窗口的大小在显示时发生变化，我会非常喜欢。

弹出窗口在应用程序上实例化一次。像这样的对象：

```
menu_manager=Gtk.UIManager()
menu_manager.insert_action_group(self.core_actions)
menu_manager.insert_action_group(self.power_type_actions)
menu_manager.add_ui_from_file(os.path.join(_curr_dir, 'ui', 'menus.xml'))
self.menu_manager=menu_manager
self.popup=menu_manager.get_widget('/popup') 
```

以及带有此信号处理程序的托盘图标上显示：

```
def show_menu(self, tray_icon, button, activate_time, user_data=None):  
    def pos(menu, icon): 
        p= Gtk.StatusIcon.position_menu(menu, icon)
        return p
    log.debug( 'Menu button=%s, time=%s', button, activate_time)
    self.popup.popup(None, None, pos, tray_icon, button, activate_time ) 
```

有什么办法可以强制弹出菜单调整大小以显示其所有项目而无需滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T18:02:18.737

根据您的要求，我假设您希望菜单足够大以避免滚动。根据 GTK+ 3 文档，GtkMenu 是 GtkWidget 的子类。因此，从逻辑上讲，您应该能够请求菜单的大小。尝试各种尺寸，直到一个足够大。该文档适用于 C，但仍应适用于 Python。 [https://developer.gnome.org/gtk3/stable/GtkWidget.html](https://developer.gnome.org/gtk3/stable/GtkWidget.html) [https://developer.gnome.org/gtk3/3.1/GtkMenu.html](https://developer.gnome.org/gtk3/3.1/GtkMenu.html)

# mysql - MySQL中的深度优先搜索

> ID：13535733
> 
> 赞同：12
> 
> 时间：2012-11-23T21:07:03.440
> 
> 标签：mysql, algorithm, search, stored-procedures, depth-first-search

我正在尝试编写一个 MySQL `PROCEDURE`，它将一条边`e`和一条边集`eset`作为输入并输出一个布尔值`iscyclic`以确定附加边是否会导致循环图。除了创建一个包含所有顶点的表之外，还有什么更直接的方法可以做到这一点，其中包含类似“ `visit count`”的列，然后检查是否在运行边集时多次访问了任何顶点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:38:54.710

正如 Billiska 的评论所表明的，您需要跟踪您的森林中的各个树，即连接集。

[不相交集数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)的最简单实现将由一个临时表组成，该表将`ID`每个顶点的 映射到`ID`父节点的 。您可以从一个顶点跟随这些父链接到下一个顶点，直到您最终得到这棵树的根，它是一个指向自身的顶点。该根用作标识整个连接集的唯一代表。

因此，要检查两个集合是否已经连接，您可以计算它们的根并简单地比较它们。

*   最初每个顶点都是它自己的父节点。
*   连接两个节点是通过计算它们的根并使它们中的一个成为另一个的父节点来建模的。

还有其他工具可以保持树的深度较低：

*   您总是让较深的树成为较不深的树的父级，并且您可以执行路径压缩以减少找到的节点的深度。

所有这些也可以在 MySQL 中建模，但性能行为可能与内存中的实现不同。

所以我建议推迟它，直到你真正知道你需要更高的性能，并且有一些数据来测试和比较不同的实现。

# android - 如何在带有自定义适配器的 GridView 中使用多选？

> ID：13535735
> 
> 赞同：0
> 
> 时间：2012-11-23T21:07:04.280
> 
> 标签：android, gridview

我在每个单元格中都有`GridView`和`ImageView`。`TextView`效果很好，没有问题。但我需要多选`GridView`。我希望选定的单元格为灰色，未选定的单元格必须为白色。我尝试使用以下代码制作选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_selected="false" android:drawable="@drawable/item_unselected" />
    <item android:state_selected="true" android:drawable="@drawable/item_selected" />
</selector> 
```

并设置`android:choiceMode="multipleChoice"`在 my 中`GridView`，但它不起作用。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:10:36.317

看看这个演示说明了[CHOICEMODEMULTIPLEMODALakaselectionmodeonGridView的使用](http://www.java2s.com/Code/Android/UI/ThisdemoillustratestheuseofCHOICEMODEMULTIPLEMODALakaselectionmodeonGridView.htm)

# asp.net-mvc - ASP.NET MVC 3 url 路由

> ID：13535741
> 
> 赞同：2
> 
> 时间：2012-11-23T21:07:45.017
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我在掌握 MVC 路由时遇到了一些麻烦。我读了又读，仍然没有多大意义。我正在尝试映射路线“Teams/Summary?teamID=30”，以便它在浏览器中显示“Teams/30”。这就是我目前所拥有的，但我不明白为什么它不起作用：

```
//Teams routes
routes.MapRoute(
        "TeamsSummary",
        "Teams/{teamID}",
        new { controller = "Teams", action = "Index", teamID = UrlParameter.Optional }
    ); 
```

“不起作用”是指网页已加载，但仍会在浏览器地址栏中显示“Teams?teamID=30”。

有人可以帮助我了解执行如此简单的映射需要做什么吗？顺便说一句，我没有设置任何其他我认为会干扰的路由，并且它列在我的 Global.asax.cs 文件中的默认路由之前。

如果你有一些关于这个主题的好文章和教程，那也会很有帮助。谢谢。

**编辑：** 如果我手动输入 URL，路由工作正常。现在当我使用表单回发到控制器时会出现问题：

控制器：

```
public ActionResult Index(TeamsViewModel model)
    {
        if (model.teamID != null)
            model.TeamSummary = new TeamSummaryViewModel(model.teamID);

        return View(model);
    } 
```

看法：

```
@{
ViewBag.Title = "Teams";
}

@using (Html.BeginForm("Index","Teams",FormMethod.Get))
{
    @Html.DropDownList("teamID", new SelectList(Model.Teams,"teamID","Name"))    
    <input type="submit" value="Filter"/>
}
@if (Model.TeamSummary != null)
{
    Html.RenderPartial("_TeamSummary", Model.TeamSummary);
} 
```

**Edit2：** 将原始操作更改为 TeamsController 上的索引，而不是之前的摘要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:29:54.513

乍一看，这条路线似乎没有任何明显的问题。

也许您需要为`TeamID`? `TeamID`对参数添加限制以更好地定义路由并允许其他路由下不会有什么坏处`Teams`

例如

```
context.MapRoute(
        "TeamsSummary",
        "Teams/{teamID}",
        new { controller = "Teams", action = "Summary", teamID = "" },
        new { teamID = @"\d+" }
    ); 
```

**更新**

你的代码

```
Html.BeginForm("Index","Teams",FormMethod.Get) 
```

将创建一个表单，将信息作为 GET 而不是 POST 发送回浏览器。这基本上意味着所有输入值都将作为查询字符串值附加......这是在客户端完成的，与 ASP.NET MVC 路由无关。

如果您不熟悉，可以查看关于表单操作的 W3 Schools 文章 - [http://www.w3schools.com/tags/att_form_action.asp](http://www.w3schools.com/tags/att_form_action.asp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:04:24.447

你的路由工作得很好：

```
Global.asax 
```

* * *

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "TeamsSummary",
                "Teams/{teamID}",
                new { controller = "Teams", action = "Summary" }
            );

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

在 html 视图中创建的链接：

```
<%= Html.ActionLink("Summary", "Summary", "Teams", new {teamID = 11 },null)%> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T02:44:32.113

发生的情况是在匹配的 TeamsSummary 路由之前定义了另一条路由，您需要更改路由的顺序或添加约束以确保匹配所需的路由。路由可能很棘手，如果您想了解更多信息，我建议您阅读[这篇文章](http://maxtoroq.blogspot.com/2012/04/putting-aspnet-routing-to-test.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T05:54:39.463

请检查正确的路由名称，必须与创建 ActionLink 时在 Global.asax 文件中指定的相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T07:31:03.530

如果你愿意，你可以去掉传统的路由，正如这个家伙[在这里所建议的那样](http://www.codeproject.com/Articles/774807/Attribute-Routing-in-ASP-NET-MVC-WebAPI)

如果您遵循该指南，很可能这将是您可能出现的地方：

```
[Route("Teams/{teamID}")] 
```

public ActionResult Index(TeamsViewModel model) { if (model.teamID != null) model.TeamSummary = new TeamSummaryViewModel(model.teamID);

```
 return View(model);
} 
```

# php - 生成的 mysqli 自动递增的主 ID

> ID：13535742
> 
> 赞同：3
> 
> 时间：2012-11-23T21:07:55.887
> 
> 标签：php, mysql, mysqli

```
$insert = "INSERT INTO event_tracker_table (event_name, event_location, location_number, event_creator_username, event_creator_email)

            VALUES (
                    '".$_POST['event_name']."',
                    '".$_POST['event_location']."',
                    '".$_POST['location_number']."',
                    '".phpCAS::getAttribute('uid')."',
                    '".phpCAS::getAttribute('mail')."'
                    )";

            $mysqli->query($insert); 
```

如何获得由 MySQL 生成的这个 AUTO INCREMENT？我已经尝试过了，但它不起作用：

```
$statement = $mysqli->query($insert);

echo $statement->insert_id; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T21:14:38.400

插入 id 是 MYSQLI 对象的属性，而不是 MYSQLI 结果对象：

```
$statement = $mysqli->query($insert);
echo $mysqli->insert_id; // correct
echo $statement->insert_id; //not correct 
```

[http://php.net/manual/en/mysqli.insert-id.php](http://php.net/manual/en/mysqli.insert-id.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:14:10.177

您可以通过以下方式获取 auto_increment 值

```
$id = mysqli_insert_id($mysqli); 
```

有关更多信息，请参见[mysqli_insert_id](http://php.net/manual/de/mysqli.insert-id.php)。

# javascript - Highcharts Graph：样条线每秒更新一次需要暂停按钮

> ID：13535746
> 
> 赞同：2
> 
> 时间：2012-11-23T21:08:22.297
> 
> 标签：javascript, highcharts

我指的是这张图表：[http ://www.highcharts.com/demo/dynamic-update](http://www.highcharts.com/demo/dynamic-update)

对我们来说，我们需要显示这个图表，同时需要提供一个暂停按钮来暂停图表。任何想法/帮助/建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:48:52.567

[如果设置了某些标志（在我的示例](http://jsfiddle.net/oceog/FEE2J/)中为复选框），只需从更新事件中返回：

```
setInterval(function() {
    if ($('#pause:checked').length>0) return;
    var x = (new Date()).getTime(), // current time
    y = Math.random();
    series.addPoint([x, y], true, true);
}, 1000); 
```

请注意，该示例使用时间轴来表示一个点，因此暂停不会停止时间，

* * *

你可能也会喜欢

```
setInterval(function() {
  var flag=true;
  if ($('#pause:checked').length>0) flag=false;;
  var x = (new Date()).getTime(), // current time
      y = Math.random();
  series.addPoint([x, y], flag, flag);
}, 1000); 
```

[demo](http://jsfiddle.net/oceog/FEE2J/3/)，这将继续更新图表，但不会滚动到最后一个位置

# android - 在 ActionBar 的下拉菜单中单击（选择、显示）了哪些项目

> ID：13535751
> 
> 赞同：0
> 
> 时间：2012-11-23T21:08:50.330
> 
> 标签：android, onclick, android-actionbar, android-spinner

我在操作栏上做了一个下拉项目，就像这里所说的 [如何在操作栏上添加下拉项目，](https://stackoverflow.com/questions/8312344/how-to-add-a-dropdown-item-on-the-action-bar) 所以我有一个 menu.xml

```
<item
android:id="@+id/menuSpinner"
android:showAsAction="ifRoom"
android:actionLayout="@layout/options"  /> 
```

和 options.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Spinner xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:entries="@array/my_array" /> 
```

和 strings.xml 中的数组

```
<string-array name="my_array">
    <item>ONE</item>
    <item>TWO</item>
    <item>THREE</item>
</string-array> 
```

Activity 中的一切看起来都很好。

请帮忙，我应该如何获得 onClick 消息，或者我如何知道在操作栏上选择了（可见）什么项目。可能是这段代码中的东西..？

```
if (item.getItemId() == R.id.menuSpinner) {
                      ...
            } 
```

**UPD：现在我做到了**

1.  在 options.xml 中为我的微调器添加一个 id

2.  在代码中写了这个

    Spinner sp = (Spinner) findViewById(R.id.spinner_menu);

    if (sp.getSelectedItemId()==0) {

    ...

    }

这适合 mi，因为我不需要立即对用户微调器点击采取行动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T01:35:42.857

尝试这个。

1.  将项目添加到微调器列表
2.  实现 onNavigationItemSelected() 分别获取项目位置和项目 ID。

## 例子：

@覆盖

```
public boolean onNavigationItemSelected(int itemPosition, long itemId) {
    switch (itemPosition) {
    case 0:
        Toast.makeText(getApplicationContext(), "location 1",
                Toast.LENGTH_SHORT).show();

    return true;
    case 1:
        Toast.makeText(getApplicationContext(), "location 2",
                Toast.LENGTH_SHORT).

    default:
        Toast.makeText(getApplicationContext(), "location 4",
                Toast.LENGTH_SHORT).show();
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:41:24.747

将下拉菜单添加到操作栏

详细[解释](http://fizzylogic.azurewebsites.net/2012/03/05/mono-for-android-by-example-the-action-bar/)

![在此处输入图像描述](../Images/e8b76ccbd61fdcede2402c482c316e20.png)

```
private void InitializeActionBar()
{
    ActionBar.NavigationMode = ActionBarNavigationMode.List;

    ActionBar.SetListNavigationCallbacks(
        new NavigationSpinnerAdapter(this),
        new NavigationListener());
}

public class NavigationSpinnerAdapter : BaseAdapter
{
    private List<Java.Lang.Object> _spinnerItems;
    private LayoutInflater _layoutInflater;

    public NavigationSpinnerAdapter(Context context)
    {
        _spinnerItems = new List<Java.Lang.Object>();

        // Create java strings for this sample.
        // This saves a bit on JNI handles.
        _spinnerItems.Add(new Java.Lang.String("Sample item 1"));
        _spinnerItems.Add(new Java.Lang.String("Sample item 2"));
        _spinnerItems.Add(new Java.Lang.String("Sample item 3"));

        // Retrieve the layout inflater from the provided context
        _layoutInflater = LayoutInflater.FromContext(context);
    }

    public override Object GetItem(int position)
    {
        return _spinnerItems[position];
    }

    public override long GetItemId(int position)
    {
        return position;
    }

    public override View GetView(int position, View convertView, ViewGroup parent)
    {
        var view = convertView;

        // Try to reuse views as much as possible.
        // It is alot faster than inflating new views all the time
        // and it saves quite a bit on memory usage aswell.
        if (view == null)
        {
            // inflate a new layout for the view.
            view = _layoutInflater.Inflate(Resource.Layout.SpinnerItem, parent, false);
        }

        var textView = view.FindViewById<TextView>(Resource.Id.DisplayTextLabel);
        textView.Text = _spinnerItems[position].ToString();

        return view;
    }

    public override int Count
    {
        get { return _spinnerItems.Count; }
    }
}

public class NavigationListener: Java.Lang.Object, ActionBar.IOnNavigationListener
{
    public bool OnNavigationItemSelected(int itemPosition, long itemId)
    {
        // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
        // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        //catch clicked item
        // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

        return false;
    }
}
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/menu_search" android:title="Save" android:showAsAction="always"
        android:actionViewClass="android.widget.SearchView"/>
</menu>

public override bool OnCreateOptionsMenu(IMenu menu)
{
    MenuInflater.Inflate(Resource.Menu.ActionItems, menu);

    var searchView = (SearchView)menu.FindItem(Resource.Id.menu_search).ActionView;
    searchView.SearchClick += OnSearchClicked;

    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:47:58.583

如果您只是想将其用作子菜单，您是否查看过子菜单 API？

有关[此问题](https://stackoverflow.com/questions/9344160/how-to-add-submenu-items-to-actionbar-action-in-code)的更多信息，请参阅此问题。最初的问题有一个示例，说明如何从您的菜单 xml 开始执行此操作，然后详细介绍如何从数据源动态生成菜单项。如果您只有静态子菜单项要呈现（似乎是这种情况，因为您有一个字符串数组在您的问题中定义它们）您应该能够在初始菜单 xml 定义处停止，然后像处理子菜单项点击一样它们是任何其他菜单项。

# css - 边距设置为 0px 时怎么会有边距

> ID：13535752
> 
> 赞同：1
> 
> 时间：2012-11-23T21:09:10.283
> 
> 标签：css, margin

请看下面的代码：

HTML

```
<input class="input-form" type="text">
<input class="input-form" type="password">
       ​ 
```

CSS

```
.input-form{
    width:250px;
    height:30px;
    border: 2px solid red;
    margin:0px;
} 
```

JSFIddle -> [http://jsfiddle.net/TypYn/](http://jsfiddle.net/TypYn/)

我的问题：我不明白为什么两个输入之间有一个边距，尽管我确实将边距设置为 0px。预先感谢您的回复。干杯。马克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T21:13:13.550

问题是，HTML 将换行符解释为空格。只需将您的 HTML 更改为：

```
<input class="input-form" type="text"><input class="input-form" type="password"> 
```

# ruby-on-rails - 在 Rails 中存储 GPX 文件？

> ID：13535753
> 
> 赞同：1
> 
> 时间：2012-11-23T21:09:44.857
> 
> 标签：ruby-on-rails, ruby, xml, xml-parsing, nokogiri

我一直在尝试使用 Nokogiri 或 ReXML 解析 GPX 文件，但看起来如此简单的方法却行不通。`nil`当我确定它应该没问题时，我经常得到空数组或“未定义”输出。我正在拔头发。有人可以告诉我他们会怎么做吗？我想将带有`lat`,`lon`和`ele`值的点提取到一个干净的哈希数组中。

这是 XML（它有更多的点）：

```
<?xml version="1.0"?>
<gpx creator="GPS Visualizer http://www.gpsvisualizer.com/" version="1.0" xmlns="http://www.topografix.com/GPX/1/0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd">
<trk>
  <name>20090426-144136</name>
  <trkseg>
    <trkpt lat="54.0663350" lon="-2.0050000">
      <ele>171.1</ele>
    </trkpt>
    <trkpt lat="54.0663400" lon="-2.0050000">
      <ele>172.8</ele>
    </trkpt>
    <trkpt lat="54.0663380" lon="-2.0049970">
      <ele>172</ele>
    </trkpt>
  </trkseg>
</trk>
</gpx> 
```

这就是我想要得到的：

```
:route => [{ :lat => 54.0663350, :lon => -2.0050000, :ele => 171.1 },
 { :lat => 54.0663400, :lon => -2.0050000, :ele => 172.8 }, ...] 
```

或类似的（如果您有更好的建议）。

最终，数据将以 JSON 格式发送，以在 JavaScript 谷歌地图中显示路线。但是，我还想将它作为序列化哈希保存在我的数据库中，这样我就可以查询单点。

这是我与 Nokogiri 的令人头疼的时刻之一：

```
1.9.3p194 :179 > doc = Nokogiri::XML(File.open("gpx/short.gpx"))
 => #<Nokogiri::XML::Document:0x816dbe34 name="document" children=[#<Nokogiri::XML::Element:0x816dba38 name="gpx" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> attributes=[#<Nokogiri::XML::Attr:0x816db948 name="creator" value="GPS Visualizer http://www.gpsvisualizer.com/">, #<Nokogiri::XML::Attr:0x816db934 name="version" value="1.0">, #<Nokogiri::XML::Attr:0x816db920 name="schemaLocation" namespace=#<Nokogiri::XML::Namespace:0x816dad40 prefix="xsi" href="http://www.w3.org/2001/XMLSchema-instance"> value="http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd">] children=[#<Nokogiri::XML::Text:0x816da3f4 "\n">, #<Nokogiri::XML::Element:0x816da278 name="trk" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d9da0 "\n  ">, #<Nokogiri::XML::Element:0x816d9c60 name="name" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d95a8 "20090426-144136">]>, #<Nokogiri::XML::Text:0x816d9148 "\n  ">, #<Nokogiri::XML::Element:0x816d901c name="trkseg" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d8a7c "\n    ">, #<Nokogiri::XML::Element:0x816d898c name="trkpt" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> attributes=[#<Nokogiri::XML::Attr:0x816d8928 name="lat" value="54.0663350">, #<Nokogiri::XML::Attr:0x816d8914 name="lon" value="-2.0050000">] children=[#<Nokogiri::XML::Text:0x816d7a3c "\n      ">, #<Nokogiri::XML::Element:0x816d7938 name="ele" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d7370 "171.1">]>, #<Nokogiri::XML::Text:0x816d712c "\n    ">]>, #<Nokogiri::XML::Text:0x816d6e0c "\n    ">, #<Nokogiri::XML::Element:0x816d6ccc name="trkpt" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> attributes=[#<Nokogiri::XML::Attr:0x816d6c54 name="lat" value="54.0663400">, #<Nokogiri::XML::Attr:0x816d6bf0 name="lon" value="-2.0050000">] children=[#<Nokogiri::XML::Text:0x816d5db8 "\n      ">, #<Nokogiri::XML::Element:0x816d5cb4 name="ele" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d57c8 "172.8">]>, #<Nokogiri::XML::Text:0x816d5430 "\n    ">]>, #<Nokogiri::XML::Text:0x816d500c "\n    ">, #<Nokogiri::XML::Element:0x816d4eb8 name="trkpt" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> attributes=[#<Nokogiri::XML::Attr:0x816d4e54 name="lat" value="54.0663380">, #<Nokogiri::XML::Attr:0x816d4e40 name="lon" value="-2.0049970">] children=[#<Nokogiri::XML::Text:0x816d41e8 "\n      ">, #<Nokogiri::XML::Element:0x816d40a8 name="ele" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816bafe0 "172">]>, #<Nokogiri::XML::Text:0x816bacd4 "\n    ">]>, #<Nokogiri::XML::Text:0x816ba9c8 "\n  ">]>, #<Nokogiri::XML::Text:0x816ba734 "\n">]>, #<Nokogiri::XML::Text:0x816ba4c8 "\n">]>]> 
1.9.3p194 :205 > doc.xpath("*")
 => [#<Nokogiri::XML::Element:0x816dba38 name="gpx" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> attributes=[#<Nokogiri::XML::Attr:0x816db948 name="creator" value="GPS Visualizer http://www.gpsvisualizer.com/">, #<Nokogiri::XML::Attr:0x816db934 name="version" value="1.0">, #<Nokogiri::XML::Attr:0x816db920 name="schemaLocation" namespace=#<Nokogiri::XML::Namespace:0x816dad40 prefix="xsi" href="http://www.w3.org/2001/XMLSchema-instance"> value="http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd">] children=[#<Nokogiri::XML::Text:0x816da3f4 "\n">, #<Nokogiri::XML::Element:0x816da278 name="trk" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d9da0 "\n  ">, #<Nokogiri::XML::Element:0x816d9c60 name="name" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d95a8 "20090426-144136">]>, #<Nokogiri::XML::Text:0x816d9148 "\n  ">, #<Nokogiri::XML::Element:0x816d901c name="trkseg" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d8a7c "\n    ">, #<Nokogiri::XML::Element:0x816d898c name="trkpt" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> attributes=[#<Nokogiri::XML::Attr:0x816d8928 name="lat" value="54.0663350">, #<Nokogiri::XML::Attr:0x816d8914 name="lon" value="-2.0050000">] children=[#<Nokogiri::XML::Text:0x816d7a3c "\n      ">, #<Nokogiri::XML::Element:0x816d7938 name="ele" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d7370 "171.1">]>, #<Nokogiri::XML::Text:0x816d712c "\n    ">]>, #<Nokogiri::XML::Text:0x816d6e0c "\n    ">, #<Nokogiri::XML::Element:0x816d6ccc name="trkpt" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> attributes=[#<Nokogiri::XML::Attr:0x816d6c54 name="lat" value="54.0663400">, #<Nokogiri::XML::Attr:0x816d6bf0 name="lon" value="-2.0050000">] children=[#<Nokogiri::XML::Text:0x816d5db8 "\n      ">, #<Nokogiri::XML::Element:0x816d5cb4 name="ele" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816d57c8 "172.8">]>, #<Nokogiri::XML::Text:0x816d5430 "\n    ">]>, #<Nokogiri::XML::Text:0x816d500c "\n    ">, #<Nokogiri::XML::Element:0x816d4eb8 name="trkpt" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> attributes=[#<Nokogiri::XML::Attr:0x816d4e54 name="lat" value="54.0663380">, #<Nokogiri::XML::Attr:0x816d4e40 name="lon" value="-2.0049970">] children=[#<Nokogiri::XML::Text:0x816d41e8 "\n      ">, #<Nokogiri::XML::Element:0x816d40a8 name="ele" namespace=#<Nokogiri::XML::Namespace:0x816db970 href="http://www.topografix.com/GPX/1/0"> children=[#<Nokogiri::XML::Text:0x816bafe0 "172">]>, #<Nokogiri::XML::Text:0x816bacd4 "\n    ">]>, #<Nokogiri::XML::Text:0x816ba9c8 "\n  ">]>, #<Nokogiri::XML::Text:0x816ba734 "\n">]>, #<Nokogiri::XML::Text:0x816ba4c8 "\n">]>] 
1.9.3p194 :206 > doc.xpath("*/trk")
 => [] 
1.9.3p194 :207 > doc.xpath("//trk")
 => [] 
1.9.3p194 :208 > doc.xpath("trk")
 => [] 
1.9.3p194 :209 > doc.xpath("//trkpt")
 => []
1.9.3p194 :210 > doc.xpath("*/gpx")
 => [] 
1.9.3p194 :211 > doc.xpath("*/gpx/trk")
 => [] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:56:37.237

在“ [Ruby GPX 文件解析器](https://stackoverflow.com/questions/2987480/ruby-gpx-file-parser)”的帮助下，我发现了问题：我必须为我的 XML 标签声明命名空间：`doc.xpath('//xmlns:trkpt')`而不是`doc.xpath('//trkpt')`.

这是我在 Rails 模型中的方法：

```
def self.parse_gpx(filename)
  file = File.open(filename)
  doc = Nokogiri::XML(file)
  trackpoints = doc.xpath('//xmlns:trkpt')
  route = Array.new
  trackpoints.each do |trkpt|
    lat = trkpt.xpath('@lat').to_s.to_f
    lon = trkpt.xpath('@lon').to_s.to_f
    ele = trkpt.text.strip.to_f
    route << {lat: lat, lon: lon, ele: ele}
  end
  route
end 
```

这是我的输出：

```
1.9.3p194 :329 > Route::parse_gpx("gpx/short.gpx")
 => [{:lat=>54.066335, :lon=>-2.005, :ele=>171.1}, {:lat=>54.06634, :lon=>-2.005, :ele=>172.8}, {:lat=>54.066338, :lon=>-2.004997, :ele=>172.0}] 
```

# ios - 提取某些 Div 类中的第一个 URL

> ID：13535754
> 
> 赞同：0
> 
> 时间：2012-11-23T21:09:58.850
> 
> 标签：ios, html, nsstring, extract

我正在考虑构建一个显示月刊的应用程序。期刊没有 XML，他们只是每个月更改 PDF 的标题标题和 URL。这总是存储在源代码中的相同位置，所以我正在寻找在

> div class=entry clearfix post /div

标记，然后提取第一个 URL。我以前曾研究过解析 XML，但从来没有解析过 HTML。我最好的选择是什么？

更新：

页面仅在源代码中的某一点说`To Download the PDF, click here`. 所以，我设置了以下扫描仪：

```
NSURL *url = [NSURL URLWithString:@"http://www.thejenkinsinstitute.com/Journal/"];
NSString *content = [NSString stringWithContentsOfURL:url];
NSString * aString = content;
NSMutableArray *substrings = [NSMutableArray new];
NSScanner *scanner = [NSScanner scannerWithString:aString];
[scanner scanUpToString:@"<p>To Download the PDF, <a href=\"http://michaelwhitworth.com/wp-content/HE22.pdf\">" intoString:nil]; // Scan all characters before #
while(![scanner isAtEnd]) {
    NSString *substring = nil;
    [scanner scanString:@"<p>To Download the PDF, <a href=\"" intoString:nil]; // Scan the # character
    if([scanner scanUpToString:@"\"" intoString:&substring]) {
        // If the space immediately followed the #, this will be skipped
        [substrings addObject:substring];
    }
    [scanner scanUpToString:@"#" intoString:nil]; // Scan all characters before next #
}
NSLog(@"Here is the Substring%@", substrings);
// do something with substrings
[substrings release]; 
```

在控制台中，首先要返回的是 PDF 的 URL，但它包含更多内容。这是一个简短的摘录。

`"2012-11-23 15:33:36.383 Jenkins[8306:c07] Here is the Substring( "http://michaelwhitworth.com/wp-content/HE22.pdf", "#8220;As the Bible School Goes So Goes the Congregation&#8221; by Ira North</a></p>\n<p style=","`

我做错了什么来阻止它只给我 URL，仅此而已？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:23:46.793

我做了类似的事情，我建立了一个小型 Web 服务（API，它基本上是一个简单的 Ruby 应用程序，它正在废弃我需要的 html，并以 REST 方式返回它。Web 服务/API 是一个好主意，因为如果有的话HTML 中的更改（如 id 的元素更改），您不必更新您的 iOS 应用程序来更改您正在解析的节点的路径。

# python - re.match 接受除空之外的任何返回值

> ID：13535758
> 
> 赞同：2
> 
> 时间：2012-11-23T21:10:12.653
> 
> 标签：python, regex

我目前正在尝试使用 python 中的 re.match 函数。然后我有一个 if 语句，如果 re.match 返回任何内容（表明正则表达式包含在字符串中），那么它将返回原始字符串的内容。否则，如果它失败，我想返回“失败”这个词。

我怎么能做到这一点？

简短形式：if 语句如何接受任何非非返回值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:12:21.253

```
def func(s):
    pattern = "somepattern"
    return s if re.match(pattern, s) else 'failed' 
```

此外，返回`"failed"`听起来是个坏主意。如果输入是`"failed"`怎么办？考虑使用类似`None`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:12:56.950

您可以使用真实性：

```
if re.match(r'your_regex', your_string):
    return your_string
else:
    return 'failed' 
```

如果`re.match`返回任何不是假的（`[]`、`{}`、`()`、`0`、`''` `None`、`False`等） ，那么它被评估为[。](https://stackoverflow.com/questions/1452489/evaluation-of-boolean-expressions-in-python)`True`

# android - 在 WebView 上加载的每个页面上注入 JavaScript API

> ID：13535759
> 
> 赞同：0
> 
> 时间：2012-11-23T21:10:17.220
> 
> 标签：android, android-webview, scorm

我正在编写一个离线 Scorm 播放器，因此需要在 WebView 实例加载的每个 html 页面上注入一个 JavaScript API。我尝试使用框架集方法，但 WebView 的行为方式不应该（除此之外，它在 HTML5 中已弃用）。我怎样才能做到这一点？我需要在页面加载之前注入脚本，因为那些 html 页面会消耗 body onLoad 事件上的 API。

当试图覆盖 'onPageStarted' WebViewClient 方法时，虽然触发了事件，但无法访问注入的 JS 代码。

在此先感谢，巴勃罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:34:44.117

您可以使用以下代码注入 javascript everpageload，希望对您有所帮助

```
final WebView webview = (WebView)findViewById(R.id.webView1);  
        /* JavaScript must be enabled if you want it to work, obviously */  
        webview.getSettings().setJavaScriptEnabled(true);  

        /* WebViewClient must be set BEFORE calling loadUrl! */  
        webview.setWebViewClient(new WebViewClient() {  
            @Override  
            public void onPageFinished(WebView view, String url)  
            {  

                webview.loadUrl("javascript:myFunction()");  
            }  
        });  

        webview.loadUrl("http://code.google.com/android"); 

HTML 

<!DOCTYPE html>
<html>
<head>
<script>
function myFunction()
{
   alert("Hello World!");
}
</script>
</head>

<body>
<button onclick="myFunction()">Try it</button>
</body>
</html> 
```

# objective-c - 将方法添加到默认类

> ID：13535763
> 
> 赞同：1
> 
> 时间：2012-11-23T21:10:26.083
> 
> 标签：objective-c

我正在寻找向 UIButton 类添加 .owner 和 .number 方法。我需要为每个单独的数字分配一个（int）数字，以便我可以使用数字来分隔按钮。

例如，我可以写`buttonName.number = 1`和`buttonName.owner = @"Player1";`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:04:10.860

做这件事的方法很少。更简单的方法是继承 UIButton 类并根据需要添加属性，这可以实现为；

```
@interface MyButton:UIButton
@property(nonatomic, assign) int number;
@property(nonatomic, strong) NSString *owner
@end 
```

另一种方法是使用运行时将属性添加到类中。为此，您将为该类创建一个类别，然后将属性添加到接口中，然后使用运行时将属性添加到它；

```
@interface UIButton(MyCategory)
@property(nonatomic, assign) float number;
@property(nonatomic, strong) NSString *owner;
@end

@implementation UIButton(MYCategory)
NSString *const numberKey = @"kNumberKey";
NSString *const ownerKey = @"kOwnerKey";

 - (float)number{ 
    return [objc_getAssociatedObject(self, &numberKey) floatValue]; 
 } 

-(void)setNumber:(float)num{ 
  objc_setAssociatedObject(self, &numberKey,[NSNumber numberWithFloat:num], OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
}

-(NSString*)owner{
    return objc_getAssociatedObject(self, &ownerKey);
}

-(void)setOwner:(NSString *)own{
    objc_setAssociatedObject(self, &ownerKey, own, OBJC_ASSOCIATION_COPY);
}

@end 
```

有了这个，您将能够将自定义属性添加到 UIButton 类本身。

# c# - 数据量大的 TreeView 优化

> ID：13535777
> 
> 赞同：3
> 
> 时间：2012-11-23T21:12:20.770
> 
> 标签：c#, wpf, performance, optimization, treeview

我有一个树视图，其中放入了大约 4000 个对象。树视图的初始加载和填充来自对象列表，并且需要很长时间。这就是我填写它的方式：

```
private List<ItemIdPair> m_itemList;
public List<ItemIdPair> ItemList {
    get { return m_itemList; }
    set { m_itemList = value; }
}

public void Window_Loaded(object sender, RoutedEventArgs e) {
    try {
        ItemList = ItemListParse(); // data from .txt file (NOT the performance problem)
        ItemList = ItemList.OrderBy(o => o.ItemName).ToList();
        ItemTreeView.DataContext = ItemList;
    } catch(Exception ex) { }
    } 
```

我的树视图绑定到 XAML 中的 Datacontext。

我还有一个文本框来搜索树视图并缩小结果，这对性能也有很大影响。它看起来像这样：

```
public void LoadTree(string search) {
        try {
            List<ItemIdPair> items = ItemList.Where(i => i.ItemName.ToLower().Contains(search.ToLower())).ToList();
            ItemTreeView.DataContext = items;
        } catch(Exception ex) { }
    } 
```

关于如何优化它或重构它以提高性能的任何提示？Treeview 不可能表现得这么慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:32:55.127

尝试将虚拟化添加到您的 TreeView。

```
<TreeView Name="MyTreeView" VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:46:41.017

尝试使用`VirtualizingStackPanel`你的`TreeView`，我有类似的问题，`ComboBox`这解决了我的问题。

# python - 如何将字典中的字符串值更改为int值

> ID：13535779
> 
> 赞同：0
> 
> 时间：2012-11-23T21:12:21.230
> 
> 标签：python, dictionary, python-3.x

我有一本字典，例如：

```
{'Sun': {'Satellites': 'Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris', 'Orbital Radius': '0', 'Object': 'Sun', 'RootObject': 'Sun', 'Radius': '20890260'}, 'Earth': {'Period': '365.256363004', 'Satellites': 'Moon', 'Orbital Radius': '77098290', 'Radius': '63710.41000.0', 'Object': 'Earth'}, 'Moon': {'Period': '27.321582', 'Orbital Radius': '18128500', 'Radius': '1737000.10', 'Object': 'Moon'}} 
```

我想知道如何将数字值更改为整数而不是字符串。

```
def read_next_object(file):    
        obj = {}               
        for line in file:      
                if not line.strip(): continue
                line = line.strip()                        
                key, val = line.split(": ")                
                if key in obj and key == "Object": 
                        yield obj                       
                        obj = {}                              
                obj[key] = val

        yield obj              

planets = {}                   
with open( "smallsolar.txt", 'r') as f:
        for obj in read_next_object(f): 
                planets[obj["Object"]] = obj    

print(planets) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:29:59.480

而不是只是将值添加到字典中，而是`obj[key] = val`首先检查值是否应该存储为`float`. 我们可以通过使用`regular expression`匹配来做到这一点。

```
if re.match('^[0-9.]+$',val):  # If the value only contains digits or a . 
    obj[key] = float(val)      # Store it as a float not a string
else: 
    obj[key] = val             # Else store as string 
```

注意：您需要`re`通过将此行添加到脚本顶部来导入 python 正则表达式模块： `import re`

可能会浪费一些`0's`，`1's`但**请**阅读以下内容：

1.  [Python 教程](http://docs.python.org/2/tutorial/)

2.  [Python 数据类型](http://docs.python.org/2/library/stdtypes.html)

3.  [导入 Python 模块](http://effbot.org/zone/import-confusion.htm)

4.  [正则表达式 HOWTO 与 python](http://docs.python.org/2/howto/regex.html)

停止尝试*'get teh codez'*并开始尝试发展你的问题解决和编程能力，否则你只会到目前为止......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:14:13.797

```
s = '12345'
num = int(s) //num is 12345 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T21:16:53.553

我怀疑这是基于[您之前的问题](https://stackoverflow.com/questions/13498484/convert-text-into-a-dictionary-with-certain-keys-and-values)。如果是这种情况，您应该考虑在将“轨道半径”的值放入字典之前将其输入。我在那个帖子上的回答实际上是为你做的：

```
elif line.startswith('Orbital Radius'):

    # get the thing after the ":". 
    # This is the orbital radius of the planetary body. 
    # We want to store that as an integer. So let's call int() on it
    rad = int(line.partition(":")[-1].strip())

    # now, add the orbital radius as the value of the planetary body in "answer"
    answer[obj] = rad 
```

但是，如果您真的想在创建字典后处理字典中的数字，您可以这样做：

```
def intify(d):
    for k in d:
        if isinstance(d[k], dict):
            intify(d[k])
        elif isinstance(d[k], str):
            if d[k].strip().isdigit():
                d[k] = int(d[k])
            elif all(c.isdigit() or c=='.' for c in d[k].strip()) and d[k].count('.')==1:
                d[k] = float(d[k]) 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T21:16:19.463

如果这是一个一级递归字典，如您的示例所示，您可以使用：

```
for i in the_dict:
    for j in the_dict[i]:
        try:
            the_dict[i][j] = int (the_dict[i][j])
        except:
            pass 
```

如果它是任意递归的，您将需要一个更复杂的递归函数。由于您的问题似乎与此无关，因此我不会为此提供示例。

# c - UDP 多播：由计算机接收，但不是由应用程序接收

> ID：13535784
> 
> 赞同：3
> 
> 时间：2012-11-23T21:12:54.530
> 
> 标签：c, linux, sockets, multicast

我正在尝试在 Linux 上设置一个应用程序以通过 WiFi 通过 UDP 多播接收 MIDI 数据。

Wireshark 显示从 MIDI 控制器发送的数据包已被我的机器接收（从 Wireshark[粘贴](http://pastebin.com/b1Vb8HAh)）。

我用来侦听网络流量并产生 ALSA midi 事件（称为[multimidicast](http://llg.cubic.org/tools/multimidicast/)）的实用程序的源代码设置了像[这样](http://pastebin.com/RVAn8XDW)的侦听套接字。基本上它设置了 20 个套接字，将它们绑定到端口 21928-21948，`setsockopt()`使用 IP_ADD_MEMBERSHIP 调用“225.0.0.37”的组，然后开始监听。据我所知，这与所有关于如何侦听 UDP 多播流量的教程和建议一致。

但是，该实用程序不接收数据。

如果我从我的 PC 将数据包发送到“225.0.0.37”（`s.sendto("hello", ("225.0.0.37", 21928))`在 Python 中）上的相关端口，该工具仍然没有接收到数据。如果我发送到 localhost ( `s.sendto("hello", ("", 21928))`) 上的端口，它*会*收到数据。

我一直在阅读和尝试很多，但我无法弄清楚我错过了什么。我什至不确定这是否是我正在使用的代码或我的盒子配置中的错误。

任何人都可以对此有所了解吗？

# html - CSS垂直文本对齐

> ID：13535788
> 
> 赞同：5
> 
> 时间：2012-11-23T21:13:03.793
> 
> 标签：html, css

我有一个 div，其中包含一个图像和一个跨度。我希望跨度中的文本与图像居中对齐。当然，为了您的方便，我做了一个**[小提琴。](http://jsfiddle.net/nYbwf/)**

这是HTML：

```
<div id="legend">
    <img src="http://fate.holmes-cj.com/plus.png"/>
    <span> * 5</span>
</div> 
```

以下是我尝试过的一些事情：

*   `span {vertical-align:middle;}`似乎什么都不做。
*   `span {vertical-align:top;}`将文本与图像顶部对齐。你会认为如果`top`有效，那么`middle`.
*   `span {vertical-align:20px;}`给了我想要的东西，但它取决于（并与之交互）div 高度、图像高度和字体大小。
*   在 SO 的其他地方建议添加`display:table-cell`，但在 Chrome 中似乎没有做任何事情。

你可以在我的[Fate Dice Roller](http://fate.holmes-cj.com/)中看到这个问题。单击“滚动”几次，然后将鼠标悬停在直方图上。您在掷骰子时获得了一些简洁的统计数据，但文本部分未对齐。

我只是运气不好，还是垂直对齐真的应该这么乱？我想要一个在更改字体大小时无需调整的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T21:14:51.427

给你：http: [//jsfiddle.net/nYbwf/3/](http://jsfiddle.net/nYbwf/3/)

就`vertical-align: middle`在图像元素上，这样它就会在中间垂直对齐而不是基线。

# c# - Html.DisplayFor 和属性的方法

> ID：13535789
> 
> 赞同：0
> 
> 时间：2012-11-23T21:13:08.430
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个模型，其中包含一个`DateTime`字段`TimeRecorded`。我还为 定义了一个扩展方法，它将它与非正式英语的“多久以前”`DateTime`进行比较并大致描述了它（与 StackOverflow 主页上的时间戳不同）。`DateTime.Now`

在我看来，我尝试了以下方法：

```
@String.Format("{0} - {1}", Html.DisplayFor(m => m.Value),
    Html.DisplayFor(m => m.TimeRecorded.ToRelativeString())) 
```

我收到一个`InvalidOperationException`，通知我只能`DisplayFor`与“字段访问、属性访问、单维数组索引或单参数自定义索引器表达式”一起使用。

现在，我知道我可以轻松地为此创建一个显示模板；但是，我宁愿避免仅仅为了格式化单个值而拥有一个完整的单独文件。在我目前的观点中，是否有一种“传统”的方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:17:40.227

您可以创建代理属性：

```
RelativeStringTimeRecord
{
    get{return TimeRecorded.ToRelativeString()}
} 
```

并使用`Html.DisplayFor(m => m.RelativeStringTimeRecord())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:19:00.577

做就是了：

```
@String.Format("{0} - {1}", Html.DisplayFor(m => m.Value), Model.TimeRecorded.ToRelativeString()) 
```

事实上......我不知道是什么`Model.Value`，但你可以简单地做：

```
@string.Format("{0} - {1}", Model.Value, Model.TimeRecorded.ToRelativeString()) 
```

# git - git push 被拒绝时如何修复错误

> ID：13535795
> 
> 赞同：2
> 
> 时间：2012-11-23T21:14:05.797
> 
> 标签：git

我已经通过首先克隆一个存储库然后'git commit'来启动git，但是当我执行'git push'时我收到这个错误：但它说'拒绝更新结帐分支'？

```
$ git push
Counting objects: 17, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (13/13), done.
Writing objects: 100% (13/13), 2.72 KiB, done.
Total 13 (delta 5), reused 0 (delta 0)
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error:
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error:
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
To ssh://michael@16.336.22.38/home/michae/scripts
 ! [remote rejected] master -> master (branch is currently checked out) 
```

这是什么意思？

我搜索并阅读 [如何应对 git push 上的“拒绝”？](https://stackoverflow.com/questions/1641015/how-to-cope-with-rejected-on-git-push)

我什至尝试'git push origin HEAD'，它给了我同样的错误：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:32:01.397

有两种类型的 Git 存储库：裸存储库和非裸存储库。一个裸仓库只包含提交、分支、标签等；非裸存储库还包含当前工作副本。如果您查看存储库，您可以判断它是否是裸露的。如果您有一个包含项目中文件的目录以及一个`.git`目录，那是一个非裸存储库；目录之外的那些文件`.git`是当前工作副本。如果您只有存储库的内容，例如`refs`、`objects`等，那是一个裸存储库。它没有工作副本。

您只能推送到裸存储库（除非您覆盖默认配置）。您可以从非裸存储库中拉取，也可以拉入非裸存储库，但不能推入其中。这是为了防止更新工作副本时出现问题。工作副本是您当前状态的副本；您可能已经编辑过文件，等等。当您拉入存储库时，最新的更改将签出到您的工作副本中；如果您有一些未签入的本地更改，它们会与您从中提取的存储库中的更改合并，或者签出被拒绝，您需要修复本地副本才能签出那些新的变化。

在您推送到的存储库上，如果存在冲突，您将无法立即进行更改。工作树反而会过时；存储库中的内容和工作树中的内容将不同步。为了防止这种情况，Git 拒绝让你推送到非裸仓库。

建议使用裸存储库作为您的“中央”存储库，您可以推入和拉出，为您的工作树使用非裸存储库；你实际工作的地方。由于看起来您已经有一个从中克隆的存储库，因此您需要从中创建一个裸存储库，并将您的更新`origin`为指向裸存储库而不是非裸存储库。您可以使用`git clone --bare path/to/original/repo path/to/bare/repo.git`（习惯上命名为 bare repos `name.git`）创建裸仓库。如果这将在同一台机器上的多个人之间共享，您还应该通过`--shared`正确设置权限。然后在您的工作副本中，运行`git remote set-url origin path/to/bare/repo.git`, 和`git remote set-url --push origin path/to/bare/repo.git`（或者`user@host:/path/to/bare/repo.git`如果您通过 SSH 访问它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:18:55.987

目标上的存储库不是“裸露的”。也就是说，它有文件检出，而不仅仅是一个 .git 数据库。

惯例是使用裸“存储库”作为推送的目标。

错误消息会告诉您您需要知道的一切：您可以更改远程存储库中的配置以允许这样做，或者您可以将其渲染为裸露。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T21:25:00.777

也许您应该将遥控器转换为没有工作副本的裸仓库。

```
ssh user@remote
cd /path/containing/repo
git clone --bare repo/ repo.git 
```

现在，在您的工作存储库中，编辑 .git/config 以更新远程的 URL。`.git`在它的末尾添加一个。

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = user@remote:/path/to/repo.git 
```

然后运行

```
git push origin HEAD 
```

推送当前分支。

# javascript - 使用 Backbone 的事件函数捕获超链接上的点击事件

> ID：13535796
> 
> 赞同：2
> 
> 时间：2012-11-23T21:14:07.493
> 
> 标签：javascript, html, backbone.js, hyperlink, click

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T15:08:17.557

您必须在视图中创建函数。

```
 events: {
        "click #expense-delete-button": "deleteRow",
        "click #expense-copy-button": "copyRow",
    },

    deleteRow:function(e){
        e.preventDefault();
        //Element clicked on
        var target =  $(e.currentTarget);
        console.log('whatever you want');
    },

    copyRow:function(e){
        //Element clicked on
        var target =  $(e.currentTarget);

        console.log('copy your row');
    },

    initialize:function(){
        //view code....
    } 
```

# tomcat - 如何让更多登录tomcat

> ID：13535799
> 
> 赞同：0
> 
> 时间：2012-11-23T21:14:19.353
> 
> 标签：tomcat, logging

我有这个错误

```
SEVERE: Context [] startup failed due to previous errors 
```

我记得在一些网络上阅读过有关配置 tomcat 以显示有关此“先前错误”的更详细信息

有谁知道这是怎么回事？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:29:22.727

我使用 log4j。以下是位于 WEB-INF/classes 中的 logging.properties 的简单示例：

```
# Log4j logging (also required log4j.jar to be in classpath)
org.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger
org.apache.catalina.core.ContainerBase.[Catalina].level = FINEST
org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler 
```

希望能帮助到你。

# xcode - xcode中的ipad故事板无法拖动按钮

> ID：13535803
> 
> 赞同：10
> 
> 时间：2012-11-23T21:14:52.203
> 
> 标签：xcode, drag-and-drop, storyboard

我正在运行 xcode 4.5.2 为 iphone 和 ipad（“通用”应用程序）编写一个 iOS 应用程序。

我可以使用 iphone 故事板将按钮、标签等拖放到它上面。事实上，我在 iphone 端有功能代码。

但是，从一开始，我就无法将任何内容拖放到 ipad 故事板上。当我尝试这样做时，按钮、标签等只是“反弹”。

有没有办法重置 iPad 故事板，以便我可以重新开始？可能是我错误地（这是我的第一个 iOS 应用程序）将视图或视图控制器拖到 ipad 故事板上。我尝试删除它，但之后整个 ipad 情节提要消失了。

这可能是非常简单的事情，但我对此很陌生。谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-23T21:26:54.100

如果您以最“放大”的方式查看项目，则只能将项目拖放到视图中。当您打开 iPad 故事板时，尝试按右下角的“=”（这将在最近放大和最近缩小之间切换）。一旦它一直放大您，请尝试再次将某些东西放到您的视图中。

编辑：根据 Xcode 8 发行说明，Interface Builder 现在应该允许在所有缩放级别进行编辑。

# php - 使用附加值填充 php 下拉列表

> ID：13535804
> 
> 赞同：0
> 
> 时间：2012-11-23T21:15:13.020
> 
> 标签：php, mysql, drop-down-menu

我有一个从表中的值生成的下拉列表，但是，我想添加两个不在此表中的附加值。

```
$sql = mysql_query("select category_id,category_name from categories"); 
    $selection="";
    while ($row=mysql_fetch_array($sql)){ 
        $id=$row["category_id"]; 
        $category_name = $row["category_name"]; 
        $selected = ($id == $idlookup) ? 'selected="selected"' : '';
        $selection.="<OPTION " . $selected . " VALUE=\"$id\">".$category_name."</OPTION>";
    }

<tr><td><input type = "text" name ="search_value"></input></td><td><select name ="category"><Option >Choose Category<? echo $selection; ?></Select></td> 
```

这很好用，但我不确定如何在列表的开头再添加两个值。如何将值“用户”和“组”添加到此列表的开头？我不希望它们出现在类别表中，因为这只会在一页上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:19:28.130

不要实例化没有内容 () 的变量，而是`$selection="";`用以下方法实例化它：

```
$selection="<OPTION VALUE=\"id\">User</OPTION><OPTION VALUE=\"id\">Group</OPTION>"; 
```

# c# - 从套接字读取字节到字节数组

> ID：13535808
> 
> 赞同：-1
> 
> 时间：2012-11-23T21:15:45.127
> 
> 标签：c#, java, sockets, networking

我正在使用一个客户端/服务器应用程序，我必须从服务器上接收到的数据中读取字节。我正在尝试将其从 Java 转换为 C#，但我似乎无法解决这个问题！吨

Java代码：

```
byte[] bucket = new byte[4];
this.socket.getInputStream().read(bucket, 0, 2); 
```

现在我需要 C# 中的相同代码！希望你能帮帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:28:39.180

如果你想要一个类似的端口，最明智的做法可能是将套接字包装在 a`NetworkStream`中，然后它的行为很像`getInputStream`结果（除了你只会做一次），即

```
var ns = new NetworkStream(socket);
...
int bytesRead = ns.Read(bucket, 0, 2); 
```

但请记住确保`ns`在完成后处理它（最好是通过`using`）。如果要直接使用套接字，则必须使用`Receive`套接字上的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:21:29.643

您可能想使用 [TCP Client](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)。

```
 TcpClient client = new TcpClient(server, port);
   NetworkStream stream = client.GetStream();
   Byte[] data = new Byte[4;
   stream.Read(data, 0, data.Length); 
```

**编辑**：假设您已经可以访问套接字，请在下面尝试（使用[Socket#Receive](http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx)）：

```
 byte[] bucket = new byte[4];
   int bytesRec = socket.Receive(bucket); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:21:19.550

[在System.Net.Sockets.TcpListener](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)的示例代码中有一个超级简单的 http 服务器实现。该示例显示了如何从套接字读取。

# jquery - 我需要创建一个包含 2 个部分的表单。仅当未完成第二部分答案时才会收到第一部分答案

> ID：13535812
> 
> 赞同：1
> 
> 时间：2012-11-23T21:16:10.370
> 
> 标签：jquery, ajax, webforms

我基本上需要让第一部分是一个简单的名称/电子邮件字段..然后一个按钮说下一步。然后第二部分有大约 10 个字段，然后是提交。

我正在尝试创建它，以便在第二部分让某人转身的情况下，我仍然会收到第一部分。但是，如果他们填写第二部分，我就会得到全部。

请我拔掉我的头发！

（我可以制作表格，我的问题是如果第二部分未完成，如何提交第一部分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:25:22.397

在下一步按钮的单击事件中插入第一部分是否有任何问题。如果没有，那么这是最简单的方法。我不认为还有其他方法，因为如果用户填写第一部分并关闭浏览器或选项卡，那么您将如何获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:28:43.073

“下一个”是一个 javascript 按钮/事件还是带你到一个新的 php 页面？

如果它带你到一个 php 页面，那很简单。只需将数据保存在第二页的顶部即可。

但是，如果“next”只是显示更多字段，您也许可以使用 jquery 将数据发布到页面，例如“save.php”，所以问题是：您的下一个按钮如何工作？我们可以看看这个例子吗？

# java - 尝试从扫描仪读取时文件内容被擦除

> ID：13535815
> 
> 赞同：1
> 
> 时间：2012-11-23T21:16:27.383
> 
> 标签：java, file, java.util.scanner

所以我正在尝试使用扫描仪读取文件，但是，文件的所有内容都被擦除了，然后它什么也没有读取。以下是我在 Main 方法中连续运行的方法：

```
private static Scanner x;
private static Formatter y;

public void openMainFile(String name){
    try{
        x = new Scanner(new File("main.mcmm");
        y = new Formatter("main.mcmm");
    }catch(Exception e){
        GUI.error(2);
    }
} 
```

这种方法运行得很好

```
public void readModMainFile(){
    while(x.hasNext()){
        Main.name = x.next();
        Main.ver = x.nextFloat();
        Main.base = x.nextBoolean();
        Main.dev = x.next();
        Main.date = x.next();
    }
} 
```

此方法运行后，文件为空，并且“Main.-”变量没有任何值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:25:22.763

不要同时打开同一个文件进行读写。先写入临时文件，然后重命名。或者，您可以先读取整个文件，存储所有内容，关闭`Scanner`然后覆盖文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:21:32.407

您`Formatter`每次都在截断输出文件。从您在这篇文章中的评论中，您指出变量的数量将保持不变。您可以使用临时文件来实现此目的（+1 到 @biziclop）：

```
File inputFile = new File("main.mcmm");
Scanner scanner = new Scanner(inputFile);
File tempFile = File.createTempFile("main.mcmm",".temp");
Formatter y = new Formatter(tempFile);

y.format("%s", name);
 // more reading & formatting, etc.

y.close();
scanner.close();
inputFile.delete();
tempFile.renameTo(inputFile); 
```

请记住关闭 `Scanner`和，`Formatter`以便可以分别删除和重命名输入和输出文件。

# python - 使用 SQL Server Management Studio 2008 r2 和 adodbapi 设置并连接到本地 SQLEXPRESS 数据库

> ID：13535822
> 
> 赞同：0
> 
> 时间：2012-11-23T21:16:53.490
> 
> 标签：python, sql-server, sql-server-2008, ssms, adodbapi

出于测试目的，我试图在我的本地机器上设置一个 SQL Server 数据库，并使用 Python 中的 adodbapi 连接到它。我使用 SQL Server Management Studio 2008 r2 创建数据库和表。我启用了 SQL Server Browser 服务，但仍然无法使用 adodbapi 进行连接。使用此连接字符串：

```
adodbapi.connect(r'Provider=SQLOLEDB;Data Source=COMPUTERNAME.\SQLEXPRESS;Initial Catalog=Test;User ID=userName; Password=password;') 
```

我收到以下错误：

> Traceback（最近一次调用最后一次）：文件“”，第 1 行，在文件“C:\Python26\ArcGIS10.0\lib\site-packages\adodbapi\adodbapi.py”中，第 307 行，在连接中引发 OperationalError(e, "打开连接时出错：" + connection_string) OperationalError: (com_error(-2147352567, '发生异常。', (0, u'Microsoft OLE DB Provider for SQL Server', u'[DBNETLIB][ConnectionOpen (Connect()))。 ]SQL Server 不存在或访问被拒绝。', None, 0, -2147467259), None), '打开连接时出错：Provider=SQLOLEDB;Data Source=COMPUTERNAME.\SQLEXPRESS;Initial Catalog=Test;User ID=userName;密码=密码;')

对我所缺少的有任何见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:44:53.543

我做了更多的挖掘工作，最终偶然发现了答案。我的连接字符串中缺少“Integrated Security=SSPI”，事实证明我不需要数据源中“\SQLEXPRESS”之前的点。这是对我有用的连接字符串：

```
adodbapi.connect(r'Provider=SQLOLEDB;Data Source=COMPUTERNAME\SQLEXPRESS;Initial Catalog=Test;User ID=COMPUTERNAME\USERNAME; Password=PASSWORD;Integrated Security=SSPI') 
```

# actionscript-3 - Flash - 有没有办法获取实例变量列表？

> ID：13535823
> 
> 赞同：1
> 
> 时间：2012-11-23T21:16:59.057
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, flash-cs6

在 flash pro 或 flash builder 中是否有办法获取实例变量的完整列表？我有一个现有的 FLA，舞台上有数百个带有实例名称的对象。如果我可以获得一个现有实例名称的列表，我将在其中添加更多交互性，那将会很有用。

编辑：我将使用它在 Flash Builder 中在 Flash Pro 中创建的现有 FLA 上进行进一步开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:32:12.417

您可以使用 describeType 追踪内容。将此添加到您的主时间线上进行测试。

```
import flash.utils.describeType;
var a1:String = 'oi';
var b1:Array = [1,2,3];
var c1:int = 123;
trace(describeType(this)); 
```

通过 xml 循环查找变量（那里有更多的东西）
[...]

```
<extendsClass type="Object"/>
<implementsInterface type="flash.events::IEventDispatcher"/>
<implementsInterface type="flash.display::IBitmapDrawable"/>
<variable name="a1" type="String"/>
<variable name="b1" type="Array"/>
<variable name="c1" type="int"/>
<accessor name="enabled" access="readwrite" type="Boolean" declaredBy="flash.display::MovieClip"/> 
```

# c++ - std::weak_ptrs 是否会影响 std::make_shared 分配的内存何时被释放？

> ID：13535827
> 
> 赞同：22
> 
> 时间：2012-11-23T21:17:21.100
> 
> 标签：c++, memory

如果我调用`std::make_shared<T>`（而不仅仅是`shared_ptr<T>`显式分配），那么出于性能原因，我希望引用计数与 T 的实例一起分配在内存中。一切都很好。

但是，如果我有`weak_ptr`引用同一个对象的实例，大概他们将需要访问该引用计数，以了解该对象是否仍然存在。

因此，当 T 的实例的最后一个 shared_ptr 被销毁时，对系统的幼稚理解意味着它无法释放存储 T 的内存，因为weak_ptrs 仍然需要访问该计数。

似乎有一个[单独的弱引用计数器](https://stackoverflow.com/a/5671308/28875)，理论上可以与 T 的实例分开保存，以便可以在弱引用仍然存在时销毁 T 并释放内存。但随后我们又回到了 2 个单独的分配，阻碍了`make_shared`.

我想我在这里误解了一些东西。`std::make_shared`当弱引用存在时，如何释放为通过构造的实例分配的内存？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T21:20:11.047

如果您使用`make_shared`并且如果实现对对象和引用计数使用单个分配，则在释放所有引用（强引用和弱引用）之前无法释放该分配。

但是，对象会在所有强引用被释放后被销毁（不管是否还有弱引用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T21:53:46.503

常见的实现是让 an 的 ref 控制块分别`std::shared_ptr`包含强引用计数和弱引用计数。当强引用计数变为零时，托管对象被销毁，但是只有当弱引用计数也变为零时，引用控制块本身才被释放。

（当您使用`std::make_shared`时，ref 控制块本身包含足够的内存来保存托管对象。这只是一个细节。）

换句话说，托管对象的可观察行为独立于弱指针。

# jquery - jQuery随机颜色 - 悬停时设置不起作用

> ID：13535828
> 
> 赞同：-1
> 
> 时间：2012-11-23T21:17:24.460
> 
> 标签：jquery, html, css

我有这段代码，我正在生成一个随机颜色并将其转换为 HEX，然后我想将其设置为`backgroundColor`span`.ribbon a:hover`类：

```
<script type="text/javascript">
$(function() {

    var randomColor = Math.floor(Math.random()*16777215).toString(16);
    alert(randomColor);
    $(".ribbon a:hover span").css({

        backgroundColor: '#' + randomColor

    });

});
</script> 
```

这是我的CSS：

```
.ribbon a:hover span {
    background: /*<?php printf( "#%06X\n", mt_rand( 0, 0xFFFFFF )); ?>*/ #FFF;
    margin-top:0;
} 
```

它甚至不会提醒我的 randomColor 变量...我已将此脚本放在`</body>`标签之前...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:24:54.833

jQueryUI 不包括 jQuery ：您仍然需要加载它（之前）。

所以你应该更换

```
<script src="http://www.google.com/jsapi"></script>
<!-- load JQuery and UI from Google (need to use UI to animate colors) -->
<script type="text/javascript"> google.load("jqueryui", "1.5.2"); </script> 
```

和

```
<script src="http://www.google.com/jsapi"></script> <!-- load JQuery and UI from Google (need to use UI to animate colors) -->
<script type="text/javascript">
google.load("jquery", "1.5.2");
google.load("jqueryui", "1.5.2");
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:25:40.303

首先，您必须加载 jQuery - 您提供的代码仅加载 jQuery UI。

```
<script src="http://www.google.com/jsapi"></script>
<!-- load JQuery and UI from Google (need to use UI to animate colors) -->
<script type="text/javascript">
    google.load("jquery", "1.5.2");
    google.load("jqueryui", "1.5.2");
</script> 
```

其次，您不能`:hover`像这样将函数绑定到选择器，您需要使用 jQuery 函数`.hover`：

```
<script type="text/javascript">
$(function() {

    $(".ribbon a").hover(function() {
        // change to random color on mouseover
        var randomColor = Math.floor(Math.random()*16777215).toString(16);
        alert(randomColor);
        $(this).find('span').css({
            backgroundColor: '#' + randomColor
        });
    }, function() {
        // change back to original color on mouseout
        $(this).find('span').css({
            backgroundColor: '#FFF'
        });
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:32:23.290

要么你没有导入 jQuery，要么你的代码中的其他地方有 JS 错误，导致你的脚本作为一个整体中断。首先，检查您的控制台是否有任何错误。如果这没有显示任何内容，请尝试将您的脚本更改为：

```
<script type="text/javascript">
    $(function(){
        alert('jQuery is alive!');
    });
</script> 
```

# r - 对数似然优化，传入不同的数据集

> ID：13535832
> 
> 赞同：4
> 
> 时间：2012-11-23T21:17:42.783
> 
> 标签：r, function, optimization, normal-distribution

我正在尝试对正态分布的对数似然进行优化。对数似然函数有效，它识别传入的数据集，但优化不识别数据集存在？如果我们设置`data_x=rnorm(100,0,1)`此代码返回正确答案，但我需要能够传入不同的数据集。

```
x <- rnorm ( 100, 0, 1)
loglike <- function( pars, data_x=x) {
  mu <- pars[1]
  sigma2 <- pars[2]^2
  numobs <- length( data_x )
  sumsq <- sum( ( data_x-mu )^2 )
  val.log.like <- -numobs / 2 * log( sigma2 ) - ( 1 / (2*sigma2) ) * sumsq
  return( val.log.like )
}

optimization <- optim( c( 0, 1), loglike)
answer <- matrix( optimization$par, 2, 1) 
answer 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T21:26:05.840

`optim`允许您将其他参数传递给您正在优化的函数。在这种情况下，只需添加`data_x=your_new_data_set`优化参数即可。

```
optim(c(0,1), loglike, data_x = your_new_data_set) 
```

这就是`...`参数 for`optim`允许您执行的操作。检查`?optim`更多细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:25:36.293

使用`...`参数进行优化：

```
y <- 1:100
optimization<-optim(c(0,1), loglike, data_x=y) 
```

# objective-c - 更改视图在 viewDidLoad 中有效，但在按钮单击 IBAction 上无效

> ID：13535834
> 
> 赞同：0
> 
> 时间：2012-11-23T21:17:55.530
> 
> 标签：objective-c, ios, xcode

`AddSourceViewController`单击按钮时，我想用标识符打开一个新视图。我正在使用以下代码来执行此操作：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"AddSourceViewController"];
[vc setModalPresentationStyle:UIModalPresentationFullScreen];
[self presentModalViewController:vc animated:YES]; 
```

当在`viewDidLoad`初始视图中使用时，此代码可以完美运行并打开附加视图。但是，我在初始视图上的按钮上添加了一个 IBAction，当我添加上面的代码以尝试在按钮单击时打开新视图时，我只得到一个`Thread 1: breakpoint 5.1 6.1`. 我怎样才能让它在按钮动作上起作用？

编辑：下面更好的错误信息。

```
2012-11-23 16:33:40.399 Marketr[23454:c07] -[SecondViewController addSourceButton:]: unrecognized selector sent to instance 0x6e2f5c0
2012-11-23 16:33:40.400 Marketr[23454:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[SecondViewController addSourceButton:]: unrecognized selector sent to instance 0x6e2f5c0' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:24:56.327

您是否为您的操作方法设置了断点？查看该方法的代码旁边的左侧，看是否有一个蓝色箭头指向代码。

# scala - 如何在lift crudify中使一个字段只读

> ID：13535837
> 
> 赞同：2
> 
> 时间：2012-11-23T21:18:21.213
> 
> 标签：scala, lift

我有一个字段，我希望它是只读的并且有一个默认值。

这是我到目前为止所拥有的：

```
 object passwd extends MappedString(this, 20) 
    {
       override def defaultValue = "XXX" + Random.alphanumeric.take(12).mkString // some default value
//  readOnly = true // Or something similar??? 
    } 
```

我尝试覆盖 toHtml、asHtml、toForm、displayHtml 但它们都更改了视图或标签或其他内容。

我只希望自动生成 defaultValue （有效），但用户在创建/编辑实体时无法编辑该字段。

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:58:15.407

知道了，

只需覆盖 _toForm 并禁用输入元素：

```
import net.liftweb.http.S

override def _toForm =  
    S.fmapFunc({s: List[String] => this.setFromAny(s)}){name =>  
    Full(<input disabled='disabled' type='text' id={fieldId} maxlength={maxLen.toString}  
    name={name}  
    value={is match {case null => "" case s => s.toString}}/>)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T22:22:55.080

该特征`MappedField`定义了方法`writePermission_?`和`readPermission_?`：

```
/**
 * Given the current execution state, can the field be written?
 */
def writePermission_? = false
/**
 * Given the current execution state, can the field be read?
 */
def readPermission_? = false 
```

所以你可以用

```
object passwd extends MappedString(this, 20) {
  override def defaultValue = "XXX" + Random.alphanumeric.take(12).mkString // some default value
  override writePermission_? = false
  override readPermission_? = true
} 
```

那是你要找的吗？

# java - 在二十一点游戏中创建虚拟荷官时应该考虑什么？

> ID：13535838
> 
> 赞同：-1
> 
> 时间：2012-11-23T21:18:33.837
> 
> 标签：java, artificial-intelligence, blackjack

我需要构建代码来决定庄家何时应该“击中”或何时“停留”在二十一点游戏中。

我不知道如何让庄家掌握一些有根据的猜测是抽另一张牌还是保留原牌等。

我不想硬编码任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:24:39.263

这听起来更像是关于二十一点规则的问题，而不是编程问题。庄家的规则是庄家必须继续打牌，直到达到 17 点或更高。这可以被硬编码为游戏规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:24:22.763

庄家可以作弊并数牌。如果得到一张好牌的概率大于 50%，它会尝试得到下一张牌。否则，它会停止。

你只需要计算所有“好”的牌，看看计数是否大于一副牌中牌总数的一半。

这显然会给经销商带来优势。通过改变概率，您可以更容易或更难战胜庄家。

# mercurial - 为什么当我的项目只有几个修订版时，MacHg 告诉我它正在推动数十万个变更集？

> ID：13535839
> 
> 赞同：0
> 
> 时间：2012-11-23T21:18:34.430
> 
> 标签：mercurial, bitbucket, machg

![在此处输入图像描述](../Images/692966b6fc7ea500d8c923026ad3f946.png)

谁能向我解释这里发生了什么？Hg 中有两种“变更集”吗？

我有一个包含很多大文件的大项目，而且它变得缓慢，所以我删除了 .Hg 文件夹并重新开始使用 bitbucket 中的新存储库。或者我是这么想的。

这个特定的推送应该只有 200K 左右的添加/更改文件，所以我不仅不知道为什么它报告了这么多被推送的变更集，而且我也不知道为什么它需要这么长时间。（按照这个速度，需要一个小时。）

当它最终完成时，它说它已经在对话框中推送了 2 个变更集。

这是hg日志，fwiw：

```
changeset:   3:e21eca3496ea
tag:         tip
user:        Jamie Fristrom <***@gmail.com>
date:        Fri Nov 23 12:58:21 2012 -0800
summary:     Project settings, fixed duplicate buildings, reshadow

changeset:   2:9ecb5aab03c2
user:        Jamie Fristrom <***@gmail.com>
date:        Thu Nov 22 21:59:09 2012 -0800
summary:     Fresh new repo

changeset:   1:5b95e18a6377
user:        Jamie Fristrom <***@gmail.com>
date:        Tue Nov 20 17:20:02 2012 -0800
summary:     Fresh new repo

changeset:   0:e2ad59f1136e
user:        Jamie Fristrom <***@gmail.com>
date:        Tue Nov 20 17:03:36 2012 -0800
summary:     initialize repository 
```

这可能与 BitBucket 的工作方式有关吗？我在 BitBucket 中有一堆存储库。

# python - python statsmodels.tsa.stattools.pacf 带掩码数组？

> ID：13535844
> 
> 赞同：1
> 
> 时间：2012-11-23T21:19:24.090
> 
> 标签：python, statistics, statsmodels

在 statsmodels 例程中使用掩码数组（或包含 nan 的数组）是否有一般技巧？例如 pacf 和 acf？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T13:53:26.003

一般来说，这些函数对掩码数组一无所知。模型类接受缺失关键字来处理缺失值。但是，我认为 acf/pacf 中没有任何内容。您希望这些函数如何处理丢失的数据？如果您在 github 上提交了一个带有示例的问题，并且理想情况下是来自另一个 stats 包的比较结果的参考，我可以查看它。

[https://github.com/statsmodels/statsmodels/issues](https://github.com/statsmodels/statsmodels/issues)

# android - Android用户提示api？

> ID：13535846
> 
> 赞同：0
> 
> 时间：2012-11-23T21:19:40.533
> 
> 标签：android

> **可能重复：**
> [在 Android 布局上显示“帮助”覆盖](https://stackoverflow.com/questions/10757093/display-a-help-overlay-over-an-android-layout)

是否有任何 api 使我们能够为用户创建用户提示/教程，类似于第一次使用时出现在 Android 4 中的提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:32:57.940

你可以看看那个[例子](http://prasanta-paul.blogspot.com/2010/08/overlay-on-android-layout.html)，我想它会给你一个想法

# ios - 使用 Scollview 进行垂直分页，类似于 CNN App

> ID：13535847
> 
> 赞同：0
> 
> 时间：2012-11-23T21:19:44.927
> 
> 标签：ios, xcode, uiscrollview, uipagecontrol

我正在尝试在文章视图中实现 CNN App 的类似行为，在滚动结束时，您可以弹性拉下一篇文章。

有谁知道如何实现这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:39:01.303

你可以用这个

pageControl.transform = CGAffineTransformMakeRotation(M_PI / 2);

# sharepoint - SharePoint 将图像从网站的文档库复制到另一个网站的文档库

> ID：13535850
> 
> 赞同：0
> 
> 时间：2012-11-23T21:19:53.450
> 
> 标签：sharepoint, document

我正在将图像文件从网站的文档库移动到另一个网站的文档库。我收到以下错误@ line SPListItem oListItemDest = oFileDest.Item;

错误：[Microsoft.SharePoint.SPException] = {“指定的对象不属于列表。”}

代码：

```
 try
   {
      using (SPSite oSiteCollectionSrc = new SPSite("http://dev:32223/"))
      {
                SPWeb oWebsiteSrc = oSiteCollectionSrc.AllWebs["en/people"];
                SPList oListSrc = oWebsiteSrc.Lists["Images"];  

                SPListItemCollection collListItemsSrc = oListSrc.Items;

                foreach (SPListItem oListItemSrc in collListItemsSrc)
                {
                    SPFile oFileSrc = oListItemSrc.File;
                    Stream srcStream = oFileSrc.OpenBinaryStream();

                    using (SPSite oSiteCollectionDest = new SPSite("http://www.devmysites.com/"))
                    {
                        SPWeb oWebsiteDest = oSiteCollectionDest.OpenWeb("en/people");
                        SPList oListDest = oWebsiteDest.Lists["Images"];

                        SPFileCollection collFilesDest = oListDest.RootFolder.Files;

                        try
                        {

                            SPFile oFileDest = collFilesDest.Add(oListDest + @"/" + oFileSrc.Name, srcStream, true);
                            SPListItem oListItemDest = oFileDest.Item;
                            oListItemDest["Created"] = oFileDest.TimeCreated;
                            oListItemDest["Modified"] = oFileDest.TimeLastModified;
                            oListItemDest.Update();
                        }
                        catch(Exception es1)
                        {
                            Console.WriteLine("# Exception:#");
                            Console.WriteLine(es1.Message);
                        }

                        oWebsiteDest.Dispose();
                    }
                }
                oWebsiteSrc.Dispose();
            }
        }
        catch (Exception es)
        {
            Console.WriteLine("# Exception:#");
            Console.WriteLine(es.Message);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:49:33.297

我还不得不在共享点列表之间复制文档，我曾经这样做的代码在这个问题的答案中：[SharePoint 2010：在列表之间复制文档](https://stackoverflow.com/questions/3186736/sharepoint-2010-copy-documents-between-lists)

# php - 编码动态锚标签

> ID：13535851
> 
> 赞同：0
> 
> 时间：2012-11-23T21:19:56.973
> 
> 标签：php, mysql

我想将锚标记从一个页面链接到另一个页面。第二个是从数据库中提取数据的查看所有页面。当运行下面的代码时，第二个页面被加载但不会移动到标签。这是第一页的代码：

```
echo "<h2>$dd. $info and ID is 
                             **<a href=\"v.php#".$row['id']."\">$id</a>**</h2><hr />"; 
```

这是它应该指向的页面的代码：

```
while($row = mysql_fetch_array( $result )) {   

     **$ggg = $row['id'];**

            echo "<tr>";
                            echo '<td><a href="delete.php?id=' . $row['id'] . '"><input type="button"   value="Delete"></a></td>**<a name="$ggg"></a>**';

                            echo '<td>' . $row['id'] . '</td>';
            echo '<td>' . $row['info'] . '</td>';           
                            echo "</tr>"; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:21:43.770

您的 php 变量`$ggg`将不会被解析，因为它在单引号内被回显，`''`因此您的`<a>`锚点将不正确-

```
echo '<td><a href="delete.php?id=' . $row['id'] . '"><input type="button"   value="Delete"></a></td><a name="$ggg"></a>'; 
```

将其更改为 -

```
...<a name="'.$ggg.'"></a>... 
```

现在是这样——

```
echo '<td><a href="delete.php?id=' . $row['id'] . '"><input type="button"   value="Delete"></a></td><a name="'.$ggg.'"></a>'; 
```

# list - Prolog中子列表中所有元素的列表

> ID：13535855
> 
> 赞同：-1
> 
> 时间：2012-11-23T21:20:32.937
> 
> 标签：list, recursion, prolog

我需要编写一个谓词 f(L,R) 当且仅当 L 是包含 R 中所有非列表项的列表时才成功。例如：

```
f(L,[1,2,3,[4,5,6],[[7,8,9]],[]]). 
```

应该给：

```
L = [1,2,3,4,5,6,7,8,9] 
```

我写了一个谓词，它给出了以下结果：

```
L = [1,2,3,4,5,6,7,8,9,[]] 
```

结果中不应出现空列表。我的谓词如下：

```
f([],[]).
f(V,[H|T]):-  H = [_|_] -> append(L,R,V),
              f(L,H),  f(R,T),!;
              V = [H1|T1], H1=H, f(T1,T). 
```

我有两个疑问。首先，结果中不应出现空列表。另外我不知道为什么如果我不切（！）它不起作用。事实上，如果我不删减它会给我上面的结果，但如果我要求另一个结果，它会永远循环。我真的不明白为什么这应该循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:55:14.537

To remove the empty list, handle that case (discard it).

About the loop: I think the cause could be that you're calling append(L,R,V) with **all** arguments not instantiated: move append after the recursive calls.

Finally, maybe you don't use rightly the 'if then else' construct: I've indented using the usual SWI-Prolog source style, using indentation to highlight 'sequential' calls

```
f([], []).
f(V, [H|T]) :-
    (   H = []      % if H = []
    ->  f(V, T)     %  then discard
    ;   H = [_|_]   % else if H is list
    ->  f(L,H),     %  flat head
        f(R,T),     %  ...
        append(L,R,V)
    ;   V = [H|T1], % else 
        f(T1,T)     %  ...
    ). 
```

# python - 我的相机跟随算法（包括图片）

> ID：13535865
> 
> 赞同：2
> 
> 时间：2012-11-23T21:21:36.303
> 
> 标签：python

这是我的旧算法

```
def spawn(self):
    self.position_move() #to adjust when the player is spawned
def position_move(self):
    #gets called everytime the player moves
    camera.x = -object.x+Window.size[0]/2.0
    camera.y = -object.y+Window.size[1]/2.0 
```

它运作良好，但当我接近一个角落时，我可以看到房间的“外面”。 ![在此处输入图像描述](../Images/c2394968afb75e83f5392ee367543764.png)

我更新算法的全部目的是防止看到房间的“外面”：

```
 def spawn(self): #when the player is first spawned
        self.position_move() #to adjust when the player is spawned

    def position_move(self):
            #camera.x = -(top left x corner of camera coordinate)
            #camera.y = -(top left y corner of camera coordinate)
             #room_size= total room (or world) size

        diff=(object.x-Window.size[0]/2)
        if diff<0:
            camera.x = object.x+diff
        else:
            diff=(object.x+Window.size[0]/2)-room_size[0]
            if diff<0:
                camera.x = -object.x+Window.size[0]/2.0
        diff=(object.y-Window.size[1]/2)

        if diff<0:
            camera.y = diff+Window.size[1]/2
        else:
            diff=room_size[1]-(object.y+Window.size[1]/2)

            if diff>0:
                camera.y = -object.y+Window.size[1]/2.0 
```

我对更新算法的想法是将相机转换回房间，它在房间外有多少。尽管出于某种原因我更新的算法有时会变得不稳定（飞走，或者甚至不跟随玩家）。

所以，是的，对于我认为是一项简单的任务来说，这有点复杂。有谁知道我的算法中有错误？

（我使用的框架有这样的坐标系） ![在此处输入图像描述](../Images/a0a716982d6609b0f7a0c629c15dfa6b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:50:56.650

不确定您的代码中的错误是什么（我还没有真正看过），但这是将相机绑定到世界的一种简单方法：

```
# This assumes coordinates refer to the top-left of the desired viewport

# Since this is not the case, first invert the object's y to make it so:
object_y = room_size[1] - object.y

camera.x = max(0, object.x - window.size[0] / 2)
camera.y = max(0, object_y - window.size[1] / 2)

if camera.x + window.size[0] > room_size[0]:
    camera.x = room_size[0]  - window.size[0]
if camera.y + window.size[1] > room_size[1]:
    camera.y = room_size[1]  - window.size[1]

# Again, since you're using bottom-left coordinate system, invert the y:
camera.y = room_size[1] - camera.y 
```

# mysql - Grails DB 性能 H2 与 MySQL

> ID：13535866
> 
> 赞同：1
> 
> 时间：2012-11-23T21:21:42.360
> 
> 标签：mysql, performance, grails, h2

我目前正在使用开箱即用的 H2 文件存储 DB 来测试我的 Grails (2.1.0) 应用程序。我有 4 个域类，总共大约 20 个字段。这是一个小应用程序。

最近我注意到，一旦我通过了 14000 条记录（H2 文件数据库），Grails 应用程序开始运行缓慢 - CPU 利用率相当高，记录插入似乎变得缓慢。注意：我有多达 250 个线程插入数据。以上情况让我提出以下问题：

1.  MySQL 的性能是否优于 H2？

2.  如何测试 Grails 应用程序并清楚地显示/证明缓慢来自 H2 交互？我不想简单地转述我自己的观察。

3.  有人可以详细说明在 Grails 项目中使用 H2 吗？我想知道使用 H2 的“截止”点在哪里，是时候转移到 MySQL 了吗？--也许我用这么多的记录滥用了H2。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T08:21:17.483

性能问题可能有很多原因。确实，对于大型数据库（千兆字节的数据）和并发（许多并发连接），MySQL 具有更高级的机制。

但是对于这么小的数据库（14000 条记录？），我认为问题出在其他地方，很可能与应用程序有关，而不是与数据库有关。我要做的是[分析问题](http://h2database.com/html/performance.html)所在。它可能是缺少索引或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T10:47:30.537

[您可能会在“ Profiler for a Grails Application](https://stackoverflow.com/questions/3395167/profiler-for-a-grails-application) ”上找到一些答案，这对于在进行任何更改之前获取有关应用程序性能的一些数据很有用。

# c - Linux中为CFS定义的函数在哪里

> ID：13535867
> 
> 赞同：0
> 
> 时间：2012-11-23T21:21:44.467
> 
> 标签：c, linux-kernel, operating-system, scheduling, kernel

在完全公平调度程序 (CFS) 的[sched_class](http://lxr.linux.no/linux+v3.6.6/include/linux/sched.h#L1093)中，为`enqueue_task`. 实际的功能实现在哪里定义？搜索让我在[这里](http://lxr.linux.no/linux+v3.6.6/kernel/sched/core.c#L713)（下）有了一个定义。但那是任务排队发生的地方吗？如果是的话在哪里`p->sched_class->enqueue_task`

```
 713 static void enqueue_task(struct rq *rq, struct task_struct *p, int flags)
 714 {
 715        update_rq_clock(rq);
 716        sched_info_queued(p);
 717        p->sched_class->enqueue_task(rq, p, flags);
 718 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:36:52.043

它似乎被分配给[kernel/sched/fair.c:5343](http://lxr.linux.no/linux+v3.6.6/kernel/sched/fair.c#L5343)`sched_class`的结构并在[kernel/sched/fair.c:2178](http://lxr.linux.no/linux+v3.6.6/kernel/sched/fair.c#L2178)定义。

# javascript - 使用 WordPress 临时缓存和 AJAX json 脚本的问题

> ID：13535869
> 
> 赞同：0
> 
> 时间：2012-11-23T21:21:50.063
> 
> 标签：javascript, json, wordpress, jsonp, transient

我有一个正在开发的 WordPress 插件，它可以对所有主要的社交网站进行投票，并返回特定用户的社交人数（关注者）。

这在服务器上可能会非常缓慢和密集，因此我使用 WordPress 瞬态缓存构建了插件来存储从社交网络站点返回的详细信息，并且还使用 jQuery AJAX json 来显示数据。

这些是主要功能：

**检索 Facebook 计数**

```
/**
 * Fetch Facebook count.
 *
 * @param string $url The url to fetch.
 * @return int of Facebook counts.
 */
function ass_get_fb_likes($facebook_id) {

    try {
        $json = wp_remote_get("http://graph.facebook.com/".$facebook_id);

        if(is_wp_error($json))
            return false;

        $fbData = json_decode($json['body'], true);
        return format(intval($fbData['likes']));

    } catch (Exception $e) {
        return false;
    }
} 
```

上面的这个函数也连接到另一个处理瞬态缓存的函数。这方面效果很好。

**处理社交网络数据的初始显示**

```
jQuery(function($) {

    $('#fblikes').advanceddashboardwidget({
        'action':'get_facebook_likes',
        'service':'facebook',
        'countof':'likes',
        'callback':'formatCount'
    });
}); 
```

**格式化显示的辅助函数**

```
function formatCount(element,count){
    var display_count='';
    count=parseInt(count,10);
    if(count>1000000)
    {
        count=count/1000000;
        count=count.toFixed(0);
        display_count=count+'m';
    }
    else if(count>1000)
    {
        count=count/1000;
        count=count.toFixed(0);
        display_count=count+'k';
    }
    else
    {
        display_count=count;
    }
    element.html(display_count);
} 
```

如果给我的问题，请使用以下功能。它用于与 WordPress 通信以调用 PHP 函数并检索数据。

```
(function($) {
    $(document).ready( function() {

        var AdvancedDashboardWidget = function(element, options)
        {
            var ele = $(element);
            var settings = $.extend({
                action: '',
                service: '',
                countof: '',
                query:   '',
                callback:''
            }, options || {});
            this.count=0;
            var url='';
            switch(settings.service)
            {
                case 'facebook':
                    if(settings.countof=='likes' || settings.countof=='talks')
                    {
                        ajaxCall(action,ele,settings);  
                    }
                    break;
            }
        };

    var ajaxCall = function(action,ele,settings){
        opts = {
            url: ajaxurl, // ajaxurl is defined by WordPress and points to /wp-admin/admin-ajax.php
            type: 'POST',
            async: true,
            cache: false,
            dataType: 'json',
            data:{
                action: settings.action // Tell WordPress how to handle this ajax request
            },
            success:function(response) {
                //alert(response);
                ele.html(response);
                return; 
            },
            error: function(xhr,textStatus,e) {  // This can be expanded to provide more information
                alert(e);
                //alert('There was an error deleting the cache');
                return; 
            }
        };
        $.ajax(opts);
    };

        $.fn.advanceddashboardwidget = function(options)
        {
            return this.each(function()
            {
                var element = $(this);

                // Return early if this element already has a plugin instance
                if (element.data('advanceddashboardwidget')) return;

                // pass options to plugin constructor
                var advanceddashboardwidget = new AdvancedDashboardWidget(this, options);

                // Store plugin object in this element's data
                element.data('advanceddashboardwidget', advanceddashboardwidget);
            });
        };

    });
})(jQuery); 
```

**问题**

问题是，当从瞬态函数返回数据时，总是会在数字后面附加一个额外的 0（零）。从我一直在阅读的内容来看，这可能是因为我使用的是“ `json`”而不是“ `jsonp`”。

当我将其更改为“ `jsonp`”时，出现错误“错误：未调用 jQuery172011280598581866697_1353705456268”。我想这与回调函数有关。

到目前为止，我发现这是在网站上显示此信息的最快方式。如果数据存在于瞬态缓存中，则页面加载速度很快，但如果不是，则可能需要几秒钟，这就是我希望 jQuery 进入的地方，并且可能会显示加载图形，直到检索到数据。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:26:24.940

在将 AJAX 数据返回给 AJAX 函数之前，您需要`die()`，否则它会落入以 . 结尾的 WordPress' `die('0')`。

编辑：WordPress 现在（自 3.5.0 起）为此提供了功能：

`wp_send_json_success( $data )`：[http ://codex.wordpress.org/Function_Reference/wp_send_json_success](http://codex.wordpress.org/Function_Reference/wp_send_json_success)

和`wp_send_json_error( $data )`：[http](http://codex.wordpress.org/Function_Reference/wp_send_json_error) ://codex.wordpress.org/Function_Reference/wp_send_json_error 。

# macos - 根据一组条件更改变量

> ID：13535871
> 
> 赞同：2
> 
> 时间：2012-11-23T21:21:57.337
> 
> 标签：macos, bash

这个问题与这里的线程有关：

[今天的日期，减去 shell 脚本中的 X 天](https://stackoverflow.com/questions/13533661/todays-date-minus-x-days-in-shell-script#13533753)

但是因为我现在正在操作变量，所以我启动了另一个线程。

如上所述，我需要将今天的日期减去 200 天，并将年、月和日放在单独的变量中（在这个问题中，我将使用 200，尽管在另一个问题中是 222）。但是，我需要将一月表示为 0，二月表示为 1（或 01），三月表示为 2（或 02），等等......我试过这个：

```
MONTHS200=$(date -j -v-200d -v-1m +"%m")
if ${MONTHS200}=01; then 
${MONTH200}=0
else ${MONTHS200}=${MONTH200}
fi 
```

但我收到错误`./update_newdateformat.sh: line 20: 12=01: command not found ./update_newdateformat.sh: line 23: 12=: command not found`The `-v-1m`works for all months except 一月，因为它变为 12，而不是 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:24:36.890

以下是如何将所有月份数字向下移动 1 n 您的脚本：

```
MONTHS200=$(date -j -v-320d +"%m")

# Remove leading zero if there is one, so it doesn't cause problems later
MONTHS200=${MONTHS200#0}

MONTHS200=$((MONTHS200-1)) 
```

以下是如何在 shell 中使用`if`和`=`（赋值）语法：

```
if [[ "${MONTHS200}" == "01" ]]; then
    MONTHS200="0"
else
    MONTHS200=${AnotherVariable}
fi 
```

请注意，对于数值比较，您需要使用：

*   `-eq`代替`==`
*   `-ne`代替`!=`
*   `-lt`代替`<`
*   `-le`代替`<=`
*   `-gt`代替`>`
*   `-ge`代替`>=`

例如：

```
 if [[ "${MONTHS200}" -eq 1 ]]; then 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T01:24:54.393

我会利用 bash 功能（我假设 OSX bash 已经足够新了——我可能错了）。您只需拨打`date`一次

```
read year month day < <(date -j -v-200d +"%Y %m %d")
month=$(( 10#$month - 1 )) 
```

您可以通过强制 bash 使用 base-10 来避免八进制问题

# bash - Bash 中类似 Glob 的大括号通配符

> ID：13535877
> 
> 赞同：0
> 
> 时间：2012-11-23T21:22:24.150
> 
> 标签：bash, list, conditional-statements, glob, rm

假设我有一个目录`/etc/php5/conf.d/`，其中包含以下假设文件：

```
mysql.ini
mysqli.ini
20-mysql.ini
20-mysqli.ini
20-pdo_mysql.ini 
```

我想删除除最后一个（`pdo`）之外的所有这些文件，这是我目前拥有的：

```
for phpIni in mysql mysqli; do
    if [[ -f /etc/php5/conf.d/$phpIni.ini ]]; then
        rm /etc/php5/conf.d/$phpIni.ini
    if [[ -f /etc/php5/conf.d/20-$phpIni.ini ]]; then
        rm /etc/php5/conf.d/20-$phpIni.ini
    fi
done 
```

它有效，但我不禁注意到上面可以用 glob 模式简化，例如：

```
if [[ ! -z /etc/php5/conf.d/{,20-}mysql*ini ]]; then
    rm /etc/php5/conf.d/{,20-}mysql*ini
fi 
```

但是有一个问题，如果任何扩展不存在，`rm`就会抱怨它：

```
$ if [[ ! -z /etc/php5/conf.d/{,20-}mysql*ini ]]; then rm /etc/php5/conf.d/{,20-}mysql*ini; fi
rm: cannot remove `/etc/php5/conf.d/20-mysql*ini': No such file or directory 
```

如何使 rm 仅删除现有文件？或者至少防止它抛出所有这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:24:39.667

您可以使用`rm -f`，如果文件不存在，它不会抱怨：如手册页中所示，“忽略不存在的文件，从不提示”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T21:24:50.350

添加*-f*作为 rm 参数将防止这种情况发生。但是，另一方面，您需要确保您的 glob 是可靠的，以免删除太多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T01:29:23.750

添加`shopt -s nullglob`-- 如果没有匹配模式的文件，则替换空字符串而不是模式字符串。

要删除除一个以外的所有内容，请使用

```
shopt -s extglob
rm !(*pdo*).ini 
```

# php - 如果语句未输出预期结果

> ID：13535882
> 
> 赞同：0
> 
> 时间：2012-11-23T21:22:55.200
> 
> 标签：php, cakephp, if-statement

我在 cakePHP 应用程序中有一个 if 语句，但我无法弄清楚为什么它没有达到我的预期。

```
public function isAuthorized($user) {         
        if ($user['role'] === 'admin'){
            return true;
        }
        if ((in_array($this->action, array('view', 'index')))&&($user['role'] === 'senior' || 'junior')) {

          return true;
        }
        return false;
       } 
```

我希望如果有一个具有“代理”角色的用户，它将拒绝所有操作。

如果我使用它而不是一切都是玫瑰色的，只是不确定为什么在将布尔值设置为 True 之前不检查两个参数？

```
public function isAuthorized($user) {
        if ($user['role'] === 'admin'){
            return true;
        }
        if ($user['role'] == 'agent'){
            return false;
        }
        if (in_array($this->action, array('edit', 'add', 'delete'))) {
            if ($user['role'] == 'senior' || 'junior') {
                return false;
            }

        }
        return true;
    } 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:28:37.197

您的一项测试是错误的，并且始终评估为真。

```
if($user['role'] === 'senior' || 'junior'){
  //will always be true 
} 
```

因为您正在评估`'junior'`为布尔值，这在 PHP 中是正确的。

你的情况应该是：

```
if($user['role'] == 'senior' || $user['role'] == 'junior'){
  ...
} 
```

请注意，您也可以这样写：

```
if(in_array($user['role'], array('senior', 'junior'))){

} 
```

# c# - 在javascript中传递参数

> ID：13535883
> 
> 赞同：1
> 
> 时间：2012-11-23T21:23:20.143
> 
> 标签：c#, javascript, asp.net, parameters, query-string

我有一个`firePie.aspx`页面，`c#`其中只有一个按钮，当它被点击时，

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        string cadenaValor, valores;
        cadenaValor = "Audi(28%)','BMW(29%)','Mercedes(22%)" ;
        valores = "28,29,22";
        Response.Redirect("pieChart.aspx?values="+cadenaValor+"&valores="+valores);
    } 
```

参数是带有逗号分隔值的字符串，我想将此值传递`piechart.aspx`给函数以`javascript`捕获这些参数并打印饼图，代码`pieChart.aspx`为：

```
<body>
<canvas id="cvs" width="450" height="300">[No canvas support]</canvas>        
<form id="frm" method="get" >
        <script type ="text/javascript" >
            var pie1 = new RGraph.Pie('cvs', ['<%=this.Request.QueryString["valores"]%>']);
        pie1.Set('chart.radius', 100);
        pie1.Set('chart.tooltips', ['<%=this.Request.QueryString["values"]%>']);
        pie1.Set('chart.labels', ['<%=this.Request.QueryString["values"]%>']);
        pie1.Set('chart.strokestyle', 'white');
        pie1.Set('chart.linewidth', 5);
        pie1.Set('chart.shadow', true);
        pie1.Set('chart.shadow.blur', 10);
        pie1.Set('chart.shadow.offsetx', 0);
        pie1.Set('chart.shadow.offsety', 0);
        pie1.Set('chart.shadow.color', '#000');
        pie1.Set('chart.text.color', '#999');

        var explode = 20;

        function myExplode (obj)
        {
            window.__pie__ = pie1;

            for (var i=0; i<obj.data.length; ++i) {
                setTimeout('window.__pie__.Explode('+i+',10)', i * 50);
            }
        }

        if (RGraph.isOld()) {
            pie1.Draw();

        } else if (navigator.userAgent.toLowerCase().indexOf('firefox') >= 0) {
            RGraph.Effects.Pie.RoundRobin(pie1);

        } else {
            /**
            * The RoundRobin callback initiates the exploding
            */

            RGraph.Effects.Pie.RoundRobin(pie1, null, myExplode);
            RGraph.Effects.Pie.Implode(pie1);
        }
    </script>          

 </form>
</body> 
```

`QueryString["valores"]`不工作，如果我写原始字符串，我的意思是，28,29,22 在`var pie1 = new RGraph.Pie('cvs'...`它工作的行中，我认为出于任何原因`javascript`都没有识别这个值，但`QueryString["values"]`被正确捕获。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:14:57.700

Try to remove additional quotes in pieChart.aspx

```
<body>
<canvas id="cvs" width="450" height="300">[No canvas support]</canvas>        
<form id="frm" method="get" >
        <script type ="text/javascript" >
            var pie1 = new RGraph.Pie('cvs', [<%=this.Request.QueryString["valores"]%>]);
    pie1.Set('chart.radius', 100);
    pie1.Set('chart.tooltips', [<%=this.Request.QueryString["values"]%>]);
    pie1.Set('chart.labels', [<%=this.Request.QueryString["values"]%>]);
... 
```

and add quotes to code behind

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string cadenaValor, valores;
        cadenaValor = "'Audi(28%)','BMW(29%)','Mercedes(22%)'" ; //added here
        valores = "28,29,22"; //No quotes here
        Response.Redirect("pieChart.aspx?values="+cadenaValor+"&valores="+valores);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:31:11.167

你能从查询字符串中捕捉到值吗？

我有一个 js 函数来从查询字符串中获取值：

```
function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split("&");
    for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if(pair[0] == variable) {
            return pair[1];
        }
    }
    return(false);
} 
```

您可以根据您的情况调用该函数`getQueryVariable("valores")`。

看看这是否有帮助

# php - 在图像悬停和更新页面上查询MySql DB而不刷新

> ID：13535890
> 
> 赞同：1
> 
> 时间：2012-11-23T21:24:04.200
> 
> 标签：php, mysql, sql, ajax

我目前正在整理一个页面，其中列出了 15 张员工图片。我正在尝试对此进行配置，以便当用户将鼠标悬停在图像上时，右上角的 div 会使用从 MySql DB 查询的信息进行更新。例如，Web 用户将鼠标悬停在 Staff #112 的图片上 -> Div 更新以包括来自 mysql 的身高、体重、位置和位置，而无需刷新。我研究了一段时间，但只能找到如何使用 Ajax、Php、Jquery 和表单元素来完成。任何帮助、教程或信息将不胜感激。谢谢！

更新

我最终更改了一些提供的代码，最终版本是：

```
 <script type="text/javascript">

              $('.staff_hover').on('click', function(){
             id = $(this).attr('id');
              $.post('staff_php.php',{id: id}, function(data) {             var obj = jQuery.parseJSON(data);
                    var staffnum = obj.staffnum;
                       var height = obj.height;
                       var eye = obj.eye;
                    var hair = obj.hair;
                    var abt1 = obj.abt1;
                    var abt2 = obj.abt2; alert(obj.height);
                       $('#staff_info').html('<b>STAFF #</b>: ' + staffnum + ' <br /><b>HEIGHT</b>: ' + height + ' <br /><b>EYE  COLOR</b>: ' + eye + '<br /> <b>HAIR COLOR</b>: ' + hair + '<br /><b>ABOUT</b>:<br /> <b>-</b> ' + abt1 +  '<br/><b>-</b> ' + abt2);
           });
           }); </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:32:30.373

以下是您的应用程序流如何与 jQuery、PHP、MySQL 一起使用：

1.  浏览器通过 jQuery 将请求发送到服务器。
2.  PHP 将收到对 MySQL 的查询请求。并返回结果。
3.  jQuery 会得到响应并填充 div。

所以你需要 PHP 脚本和 JavaScript。

从 PHP 开始并尝试从 db 获取内容（查看 PHP PDO）

比查看 jQuery.ajax()。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:41:30.873

您将需要这样的结构：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function(){
            $('img').hover(function() {
                id = $(this).attr('id');
                $.ajax({
                    type: "POST",
                    url: "ax_get_staff.php",
                    data: 'hovered_id='+id,
                    success:function(data){
alert(data);
                        var obj = jQuery.parseJSON(data);
                        var height = obj.height;
                        var weight = obj.weight;
alert(obj.height);
                        $('#upper_right_div').html('Height is: ' + height + ' and weight is: ' + weight);
                    }
                });
            },function(){
                //Hover-out function
                //Clear your div, or some such
                $('#upper_right_div').html('');
            });
        });
    </script>
</head>
<body>
    <div id="myDiv">
        Hover over picture below to GO:<br />
        <img id="6" src="http://www.gravatar.com/avatar/783e6dfea0dcf458037183bdb333918d?s=32&d=identicon&r=PG">
    </div>
    <div id="upper_right_div"><div>
</body>
</html> 
```

* * *

您的 AJAX (ax_get_staff.php) 文件将如下所示：

```
<?php
include 'login_to_database.php';

$id = $_POST['hovered_id'];

$result = mysql_query("SELECT `height`, `weight`, `location` FROM `staff` WHERE `user_id` = '$id'") or die(mysql_error());
$staff = mysql_fetch_assoc($result);
//print_r($staff);
echo json_encode($staff);

?> 
```

# macos - 我如何使用 bash 和 xmllint 解析 adobe xml swidtag

> ID：13535893
> 
> 赞同：1
> 
> 时间：2012-11-23T21:24:15.593
> 
> 标签：macos, bash, unix, namespaces, xmllint

下面我有一个用于跟踪库存的 Adob​​e XML swidtag 示例。我需要使用 bash 解析出相关信息并将其输出到一个新的文本文件。仅供参考，我在 Mac 上使用终端。

例如我想解析以下

```
swid:entitlement_required_indicator
swid:product_title
swid:product_version
swid:name
swid:numeric
swid:major
swid:minor
swid:build
swid:review 
```

我试过使用

```
xmllint --xpath '//swid:product_version/swid:name/text()' nameoffile.xml 
```

Creative Suite 5 的示例标签文件 以下示例适用于 Adob​​e Photoshop CS5，序列化为 Creative Suite 5 Master Collection (Suite)

```
<?xml version="1.0" encoding="utf-8"?>
<swid:software_identification_tag xsi:schemaLocation="http://standards.iso.org/iso/19770/-2/2008/schema.xsd software_identification_tag.xsd" 
     xmlns:swid="http://standards.iso.org/iso/19770/-2/2008/schema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<!--Mandatory Identity elements -->
<swid:entitlement_required_indicator>true</swid:entitlement_required_indicator>
<swid:product_title>Acrobat XI Pro</swid:product_title>
<swid:product_version>
    <swid:name>1.0</swid:name>
    <swid:numeric>
        <swid:major>1</swid:major>
        <swid:minor>0</swid:minor>
        <swid:build>0</swid:build>
        <swid:review>0</swid:review>
    </swid:numeric>
</swid:product_version>
<swid:software_creator>
    <swid:name>Adobe Systems Incorporated</swid:name>
    <swid:regid>regid.1986-12.com.adobe</swid:regid>
</swid:software_creator>
<swid:software_licensor>
    <swid:name>Adobe Systems Incorporated</swid:name>
    <swid:regid>regid.1986-12.com.adobe</swid:regid>
</swid:software_licensor>
<swid:software_id>
    <swid:unique_id>CreativeCloud-CS6-Mac-GM-MUL</swid:unique_id>
    <swid:tag_creator_regid>regid.1986-12.com.adobe</swid:tag_creator_regid>
</swid:software_id>

<swid:tag_creator>
    <swid:name>Adobe Systems Incorporated</swid:name>
    <swid:regid>regid.1986-12.com.adobe</swid:regid>
</swid:tag_creator>
<!--Optional Identity elements -->
<swid:license_linkage>
    <swid:activation_status>activated</swid:activation_status>
    <swid:channel_type>SUBSCRIPTION</swid:channel_type>
    <swid:customer_type>RETAIL</swid:customer_type>
</swid:license_linkage>
<swid:serial_number>909702426602037824854600</swid:serial_number>
</swid:software_identification_tag> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:09:50.700

也许我误解了你的问题。为什么不

`grep '<swid:' inputfile | sed 's/<\/.*//'`

或非常接近它的东西（例如适当的转义）工作？

# .net - 委托签名不匹配时没有错误

> ID：13535899
> 
> 赞同：5
> 
> 时间：2012-11-23T21:24:40.153
> 
> 标签：.net, vb.net, visual-studio, anonymous-function

我在代码中定义了以下类和委托（为简洁起见，剪掉了许多其他行）。

```
Public Delegate Sub TimerCallback(canceled As Boolean)

Public Class Timer
    Implements TimerManager.ITimer

    Public Sub New(delay As Integer, callback As TimerCallback)
        mState = TimerState.Setup
        mCallback = callback
        CType(TimerManager.Instance, TimerManager.ITimerManager).RegisterTimer(Me, delay)
    End Sub
End Class 
```

当我使用以下代码创建计时器的新实例时，即使匿名函数的签名与委托的签名不匹配（它缺少“取消为布尔值”参数），我也不会收到编译错误。

```
 Dim timer As New Timer(Me.CookTime, Sub()
                                         Dim cooked As FoodBase = CType(Activator.CreateInstance(SuccessfulResult), FoodBase)
                                         player.GetBackpack.AddItem(cooked)
                                     End Sub) 
```

我希望以这种方式实例化计时器时会出现编译错误，谁能解释为什么它正在编译而没有错误？有没有我可以设置的选项会导致它产生编译错误？我在项目属性中有选项显式打开、选项严格打开和选项推断关闭。事实上，忘记包含取消的参数太容易了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:30:33.007

是的。*这很好 - 编译器可以生成一个知道*所需签名的匿名方法，而根本不使用它给出的参数。因此编译器生成的方法将*具有*参数 - 它*只是不会使用它*。您可以在 C# 中使用`delegate { ... }`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T22:01:56.097

这种现象称为[Relaxed Delegate Conversion](http://msdn.microsoft.com/en-us/library/bb531336.aspx)`on` ，当 Option Strict 为和时，其行为略有不同`off`。请点击链接了解更多详情。

它是 VB 的一个特性，它允许紧凑的代码，例如：

```
Private Sub Form1_Load() Handles MyBase.Load 
```

如果您不使用任何参数，为什么要全部声明它们？我个人认为这是 VB 的好处，而不是问题。如果您尝试在 C# 中执行相同操作，则会收到如下编译错误：

> “Form1_Load”没有重载匹配委托“System.EventHandler”。

# jquery-ui - 工具提示不会显示在 Yii jquery 按钮中

> ID：13535900
> 
> 赞同：1
> 
> 时间：2012-11-23T21:24:41.147
> 
> 标签：jquery-ui, yii, tooltip

如果你在 Yii 中创建一个 jQuery UI 按钮，默认行为是按钮的文本应该显示为工具提示。你可以用 'label' 选项覆盖它，但在 Yii 中这些都不适合我。有什么建议么？这是我正在使用的代码：

```
<button id="btnClose"></button>

<script type="text/javascript" >
$(function() {
    $("#btnClose").button({
        text: false,
        label: 'Close Wizard'
    });
});
</script> 
```

该按钮显示得很好，只是没有工具提示。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:09:52.297

[在title 属性](http://www.w3schools.com/tags/att_global_title.asp)中设置了一个工具提示。你给我们的例子不是 Yii 而是简单的 jQuery。

```
<script type="text/javascript" >
$(function() {
    $("#btnClose").button({
        'text': false,
        'title': 'Close Wizard'
    });
});
</script> 
```

# visual-studio-2010 - 从进入组合框的数组中添加/删除项目

> ID：13535901
> 
> 赞同：1
> 
> 时间：2012-11-23T21:24:40.900
> 
> 标签：visual-studio-2010

这是需要做的。

这个项目/分配将维护一个数组中的电影标题列表。用户可以从列表中添加和删除电影标题，清除和打印列表。

该表单将包含一个组合框，该组合框初始化为以下条目：家属工资、美国居民、与傻瓜共舞、自己回家和鬼人。

表格上有六个按钮。一个添加按钮，它将使用输入框将条目添加到列表中。用户不得将重复的标题添加到列表中。一个删除按钮，用于将所选项目从列表中删除。如果用户在未先选择一个标题的情况下尝试添加空白标题或删除标题，则会显示错误。清除所有按钮将从列表中删除所有条目。一个计数按钮将显示在消息框中，可以显示电影标题的数量。打印按钮将在打印预览窗口中显示“电影列表”报告。在报告中包含您的姓名。最后，一个退出按钮。

这是我到目前为止所拥有的：

```
Public Class frmlist

  Dim movielist(100) As String

  Private Sub ExitToolStripMenuItem_Click(sender As System.Object, e As System.EventArgs) Handles ExitToolStripMenuItem.Click
    Me.Close()
  End Sub

  Private Sub frmlist_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    movielist(0) = "A Dependent's Pay"
    movielist(1) = "An American Resident"
    movielist(2) = "Dancing With Fools"
    movielist(3) = "Home By Yourself"
    movielist(4) = "Ghost Man"

    cboxlist.Items.AddRange(movielist)
  End Sub

  Private Sub AddToolStripMenuItem_Click(sender As System.Object, e As System.EventArgs) Handles AddToolStripMenuItem.Click
    movielist(5) = InputBox("Enter a movie title: ", "Movies")
    cboxlist.Items.AddRange(movielist)
  End Sub
End Class 
```

# android - 切换到动态壁纸中的设置活动时出现 IllegalArgumentException

> ID：13535912
> 
> 赞同：2
> 
> 时间：2012-11-23T21:25:24.527
> 
> 标签：android, surfaceview, live-wallpaper, illegalargumentexception

我有一个运行良好的动态壁纸。我想为其添加一个设置活动，所以我完成了所有必需的步骤，当我进入动态壁纸选择器时，设置按钮出现了。但是，当我单击设置按钮时，出现以下异常。

```
11-23 16:12:53.158: E/AndroidRuntime(5141): FATAL EXCEPTION: main
11-23 16:12:53.158: E/AndroidRuntime(5141): java.lang.IllegalArgumentException
11-23 16:12:53.158: E/AndroidRuntime(5141):     at android.view.Surface.nativeUnlockCanvasAndPost(Native Method)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at android.view.Surface.unlockCanvasAndPost(Surface.java:457)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at com.android.internal.view.BaseSurfaceHolder.unlockCanvasAndPost(BaseSurfaceHolder.java:215)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at com.gulshansingh.hackerlivewallpaper.HackerWallpaperService$HackerWallpaperEngine.draw(HackerWallpaperService.java:48)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at com.gulshansingh.hackerlivewallpaper.HackerWallpaperService$HackerWallpaperEngine.access$0(HackerWallpaperService.java:36)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at com.gulshansingh.hackerlivewallpaper.HackerWallpaperService$HackerWallpaperEngine$1.run(HackerWallpaperService.java:31)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at android.os.Handler.handleCallback(Handler.java:725)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at android.os.Looper.loop(Looper.java:137)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at android.app.ActivityThread.main(ActivityThread.java:5039)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at java.lang.reflect.Method.invokeNative(Native Method)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at java.lang.reflect.Method.invoke(Method.java:511)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-23 16:12:53.158: E/AndroidRuntime(5141):     at dalvik.system.NativeStart.main(Native Method) 
```

这是导致异常的代码，到目前为止一直运行良好（已指示导致异常的行）：

```
 /** Draws all of the bit sequences on the screen */
    private void draw() {
        SurfaceHolder holder = getSurfaceHolder();
        Canvas c = holder.lockCanvas();
        if (c != null) {
            try {
                c.drawARGB(255, 0, 0, 0);

                for (int i = 0; i < sequences.size(); i++) {
                    sequences.get(i).draw(c);
                }

            } finally {
                holder.unlockCanvasAndPost(c); // line 48
            }
        }

        // Remove the runnable, and only schedule the next run if visible
        handler.removeCallbacks(drawRunnable);
        if (visible) {
            handler.post(drawRunnable);
        } else {
            stop();
        }
    } 
```

方法`sequences.get(i).draw()`如下

```
synchronized public void draw(Canvas canvas) {
    paint.setAlpha(0);
    float prevY = y;
    for (int i = 0; i < bits.size(); i++) {
        canvas.drawText(bits.get(i), x, y, paint);
        y += TEXT_SIZE;
        paint.setAlpha(paint.getAlpha() + INCREMENT);
    }
    y = prevY;
} 
```

在我看来，这是唯一相关的代码，但如果你想看到更多我可以在这里发布（请在投票前询问）。此外，完整的代码可以在 Github 上[找到](https://github.com/gsingh93/hacker-live-wallpaper/tree/settings)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T01:39:45.373

在过去的几周里，我一定花了 10 多个小时来解决这个问题，但我终于弄明白了。

创建 SettingsActivity 时，壁纸不再可见，但仍会尝试在表面上绘制。我更改了底部的 if 语句以包装整个绘图函数，因此当表面不可见时，我不会尝试在表面上绘图。这解决了我的问题。

希望这可以避免有人像我一样浪费时间。

# javascript - Ruby 中的 POST 请求

> ID：13535916
> 
> 赞同：-2
> 
> 时间：2012-11-23T21:25:49.793
> 
> 标签：javascript, ruby, post, request

> **可能重复：**
> [在 ruby​​ 中发出这个 HTTP POST 请求](https://stackoverflow.com/questions/10919287/make-this-http-post-request-in-ruby)

您如何在 Ruby 中执行以下 JavaScript 请求？

```
url = 'http://www.example.com/';
data 'name=aren&age=22';

$.ajax({
    type: "POST",  
    url: url,
    data: data,
    dataType: "json",

    error: function() {
        console.log('error');
    },
    success: function(data) {
        console.log('success');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:13:59.240

查看 HTTParty，伟大的宝石[https://github.com/jnunemaker/httparty](https://github.com/jnunemaker/httparty)

例子：

```
response = HTTParty.post(url, body: data)
puts response.body, response.code, response.message, response.headers.inspect 
```

虽然我相信它是同步的——但不要引用我的话

# passwords - Jablon 或 Ford 和 Kaliski 密码认证协议中的质数？

> ID：13535919
> 
> 赞同：-3
> 
> 时间：2012-11-23T21:26:07.193
> 
> 标签：passwords, cryptography, protocols, primes, password-encryption

正如我们在这篇关于**Jablon协议的**[论文](http://www.jablon.org/jab01.pdf)中看到的那样，我们使用某些大素数 ( **p,q,r** )。

 ****这些数字是如何存储的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T22:42:52.597

不假定第 4.2 节中的素数参数 p,q,r 是秘密的。

“仅密码多服务器漫游协议”的主要目标是密码是客户端使用的唯一凭证（秘密或其他）。这意味着不需要其他秘密，因此不需要其他实现参数是秘密的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:52:54.323

我不知道这个`Jablon`协议，这篇论文有 16 页长（我不确定你为什么希望有人阅读它......）
但只需阅读序言并得出我看到的结论（我的重点）：

> 我们已经展示了似乎是对仅密码的多服务器漫游协议的第一个描述。**它从多个相关的凭据服务器检索敏感数据，除非所有服务器都被破坏，否则**不会将密码暴露给离线猜测

 **所以我猜你问的这些数字存储在不同的服务器中，使用它们你可以重建秘密。因此，要窃取它，必须破坏所有服务器。******

# sql - 根据 SQL 中另一个表中的出现减少一个表中的值

> ID：13535924
> 
> 赞同：2
> 
> 时间：2012-11-23T21:26:53.410
> 
> 标签：sql, db2, where

我正在尝试更新一个表中存在于第二个表中的所有值，每次出现一次。

示例`feeding_view`表：

```
fishnr | food_name | stock
-------+-----------+-------
1      | f1        | 25
2      | f1        | 25
3      | f2        | 30 
```

示例`inventory`表：

```
item_name | stock
----------+-------
f1        | 25
f2        | 30
f3        | 10 
```

目前我正在尝试这样做：

```
UPDATE inventory SET stock = stock - 1 WHERE item_name IN (SELECT food_name FROM feeding_view) 
```

所发生的`f1`只是减少一次，但我希望它`f1`为`feeding_view`. 因此，所需的库存为`f1`23，而 for`f2`为 29，但`f1`仅减少一次至 24。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:41:54.267

```
UPDATE inventory AS i
SET stock = stock - COALESCE(
            ( SELECT COUNT(*)
              FROM feeding_view AS f
              WHERE  f.food_name = i.item_name
            ), 0 ) ; 
```

或者这个，不确定：

```
UPDATE 
    ( SELECT i.item_name, i.stock, f.cnt
      FROM inventory AS i
        JOIN 
          ( SELECT food_name, COUNT(*) AS cnt
            FROM feeding_view
            GROUP BY food_name
          ) AS f
          ON f.food_name = i.item_name
    ) AS upd 
SET stock = stock - cnt ; 
```

# driver - RT5370 SH4 交叉编译驱动错误

> ID：13535926
> 
> 赞同：3
> 
> 时间：2012-11-23T21:27:04.687
> 
> 标签：driver

我尝试从文件[2011_0719_RT3070_RT3370_RT5370_RT5372_Linux_STA_V2.5.0.3_DPO.bz2](http://www.ralinktech.com/en/04_support/license.php?sn=5016)到 RT5370 芯片组构建 2.5.0.3 驱动程序。

在Ubuntu 10.04.4 x32下安装STLinux 2.4，在内核linux-sh4-2.5.32.59_stm24_0211下制作。但是我在path中写了/opt/STM/STLinux-2.2/devkit/sources/kernel/linux-sh4-2.5.32.59_stm24_0211而不是STLinux-2.4，因为Makefile有一些缺陷：

```
install:
ifeq ($(TARGET), LINUX)
ifneq (,$(findstring 2.4,$(LINUX_SRC)))
$(MAKE) -C $(RT28xx_DIR)/os/linux -f Makefile.4 install
else
$(MAKE) -C $(RT28xx_DIR)/os/linux -f Makefile.6 install
endif
endif 
```

在路径 2.4 中提到将内核构建为 2.4，在我的情况下这是一个错误。

在 Makefile 中写道：

```
PLATFORM = ST
...
LINUX_SRC = /opt/STM/STLinux-2.2/devkit/sources/kernel/linux-sh4-2.5.32.59_stm24_0211
CROSS_COMPILE = /opt/STM/STLinux-2.2/devkit/sh4/bin/sh4-linux- 
```

在 ./os/linux/config.mk 中写道：

```
HAS_WPA_SUPPLICANT=y
HAS_NATIVE_WPA_SUPPLICANT_SUPPORT=y
CC := sh4-linux-gcc
LD := sh4-linux-ld 
```

在运行 make 命令时构建。但是有错误：

```
script/Makefile.build:49: *** CFLAGS was changed in "/home/vitaliy/drv_src/os/linux/Makefile". Fix it to use EXTRA_CFLAGS. 
```

在 ./os/linux/config.mk 建立字符串：

```
ifeq ($(PLATFORM),ST)
CFLAGS := -D__KERNEL__ -I$(LINUX_SRC)/include -I$(RT28xx_DIR)/include -Wall -O2 -Wundef -Wstrict-prototypes -Wno-trigraphs -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-aliasing -fno-common -fomit-frame-pointer -ffreestanding -m4-nofpu -o $(WFLAGS) 
export CFLAGS
endif 
```

并在其中将 CFLAGS 更改为 EXTRA_CFLAGS。

再次错误：

```
sh4-linux-gcc: error: -pg and -fomit-frame-pointer are incompatible. 
```

好的。删除标志 -fomit-frame-pointer。

再次错误：

```
error: cpu/cache.h: No such file or directory. 
```

在字符串中：

```
WFLAGS := -DAGGREGATION_SUPPORT -DPIGGYBACK_SUPPORT -DWMM_SUPPORT -DLINUX -Wall -Wstrict-prototypes -Wno-trigraphs 
```

删除标志 -DLINUX。

再次出现未知类型的错误（例如：./os/linux/../../common/crypt_md5.c:638:1: error: unknown type name 'VOID' 等类型为 'UCHAR'、'ULONG ' ETC）。

第二种构建方式

KBUILD_NOPEDANTIC=1 不更改驱动程序的源文件。

在这种情况下也会出错：

```
./os/linux/../../common/crypt_md5.c:28:23: fatal error: rt_config.h: No such file or directory. 
```

我的大楼出了什么问题？或者我可以修复源代码并为 SH4 平台构建驱动程序。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T12:01:53.143

我最近给自己买了同一个适配器，我试图交叉编译 ARM，遇到了同样的问题。

基本上，您只需从驱动程序包的根目录添加包含文件夹。

我做了这些修改以使其正常工作：

中`DRIVER_DIR/Makefile`，补充说：

```
PLATFORM = MYPLATFORM 
```

所有其他平台均已注释掉。

稍后在同一文件中：

```
ifeq ($(PLATFORM),MYPLATFORM)
    LINUX_SRC = /DIR_TO_MY_KERNEL_SRC/freescale_mainline/linux-mainline
    CROSS_COMPILE =  /DIR_TO_MY_CROSS_COMPILER/arm-unknown-linux-uclibcgnueabi-
    CROSS_COMPILE_INCLUDE = /DRIVER_DIR/include /*Might not be necessary*/
endif 
```

然后在 中`DRIVER_DIR/os/linux/config.mk`，添加：

```
ifeq ($(PLATFORM),MYPLATFORM)
    EXTRA_CFLAGS := $(WFLAGS) -I$(RT28xx_DIR)/include
endif 
```

另外，请注意，在您的内核配置中，您需要启用几个标志：

```
CONFIG_WEXT_CORE=y
CONFIG_WEXT_PROC=y
CONFIG_WEXT_SPY=y
CONFIG_WEXT_PRIV=y 
```

你可以在下面找到它们`Device Drivers-->Network Device Support-->Wireless LAN-->IEEE 802.11 for Host AP`

我现在像这样编译它：

```
DRIVER_DIR$ ARCH=arm make 
```

希望能帮助到你！

# java - 使用特殊参数从 Ant 构建文件运行 GWT？

> ID：13535927
> 
> 赞同：1
> 
> 时间：2012-11-23T21:27:10.180
> 
> 标签：java, gwt, ant, gwt-compiler

我想使用带有以下标志的编译器从我的 Ant 构建文件运行 GWT 编译器：

*   `-compileReport`
*   `-XsoycDetailed`
*   `-extra`
*   `-XfragmentCount <x>`（其中`<x>`是一个整数，我将随着时间的推移确定）

我查看了[`ant-gwt`](http://code.google.com/p/ant-gwt/)，它看起来很稳定，但是在彻底检查了文档和代码之后，该插件似乎无法处理这些 GWT 编译器选项。

查看[GWT 命令行工具](https://developers.google.com/web-toolkit/doc/1.6/RefCommandLineTools)，我看到一个 Ant 任务的代码片段，该任务运行`com.google.gwt.dev.Compiler`从构建文件内部调用的 GWT 类：

```
<java failonerror="true" fork="true" classname="com.google.gwt.dev.Compiler">
    <classpath>
        <pathelement location="src"/>
        <path refid="project.class.path"/>
    </classpath>
    <!-- add jvmarg -Xss16M or similar if you see a StackOverflowError -->
    <jvmarg value="-Xmx256M"/>
    <!-- Additional arguments like -style PRETTY or -logLevel DEBUG -->
    <arg value="com.example.foo.Foo"/>
</java> 
```

**这是从 Ant 运行 GWT 编译器的正确方法（ant-gwt 可能会包装）吗？**我认为`dev`包名称中的单词让我失望：这是一些智能编译器存根还是实际上是 GWT 编译器？

如果不是，那么从 Ant 内部运行 GWT 的正确方法是什么？我能想到的唯一另一件事是从 Ant 任务中启动一个 Python 脚本，并让 Python 脚本调用 GWT 编译器，但即便如此，也不确定从该 Python 脚本调用哪个命令行工具（也许`webAppCreator`？）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:34:02.307

`com.google.gwt.dev.Compiler` **是**GWT 编译器；*dev*用于开发人员工具：编译器、DevMode 等。

顺便说一句，编译器的文档在[这里](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T07:58:12.547

从[http://code.google.com/p/google-web-toolkit/downloads/list](http://code.google.com/p/google-web-toolkit/downloads/list)下载 GWT 后，从 zip 文件夹中提取内容。请参考 GWT 团队在“示例”文件夹项目中提供的构建脚本“build.xml”，例如“Hello”。

或者

[示例 Hello World Ant build.xml](https://docs.google.com/viewer?url=http://code.google.com/p/google-web-toolkit/source/browse/releases/2.5/samples/hello/build.xml) 修改第 4 行以添加您的编译器选项 -`<property name="gwt.args" value="-draftCompile -ea -style pretty -logLevel TRACE -workDir work" />`

# javascript - 在 HTML5 拖放图像上获取 url 而不是文件

> ID：13535930
> 
> 赞同：0
> 
> 时间：2012-11-23T21:27:33.697
> 
> 标签：javascript, html

[http://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

按照这个示例，我需要检索图像的 URL 而不是图像内容本身，即使它来自桌面（因为我正在编写的 web 应用程序不一定要在线工作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:41:42.130

AFAIK，图像的文件路径将不可用，因为这将是一个安全问题。以前可以在旧版本的 Firefox 上使用，但如果您正在寻找 HTML5 DND 支持，这将无济于事。

[研究Filesystem API](http://www.html5rocks.com/en/tutorials/file/filesystem/ "文件系统 API")以支持离线使用可能是值得的。（我的意思是，在删除图像后，获取原始图像数据并使用 FileWriter 将其存储在文件系统沙箱中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:45:32.793

您可以使用数据 URL，请参阅此示例[http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-selecting-files-dnd](http://www.html5rocks.com/en/tutorials/file/dndfiles/#toc-selecting-files-dnd)

# iphone - 移除导航栏和按钮上的白色渐变

> ID：13535934
> 
> 赞同：3
> 
> 时间：2012-11-23T21:27:48.970
> 
> 标签：iphone, objective-c, xcode, ipad, uinavigationbar

在 Mainstoryboard 和 Simulator 中，您会在导航栏和按钮上获得纯色。但是，如果您在真正的 iPhone 或 iPad 上运行，您会得到带有颜色的白色渐变。有没有办法去除它。

![在此处输入图像描述](../Images/17db05e76b4e381a209714c092332b97.png)iPhone图像 ![](../Images/94f196207231829f6340fa4a59392d59.png) 改进图像

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T22:29:59.520

在 ios5 及更高版本中，您可以使用协议轻松自定义它。现在所有的视图控制器和 UI 元素都符合这个协议。UIView 中通常有两种不同类型的方法可以访问 UIAppearance 协议，要么**+ (id)appearance** 要么 **+ (id)appearanceWhenContainedIn:(Class )ContainerClass**。

使用第一种方法，您一次只能自定义一个导航栏。因此，如果您想自定义您将使用的所有导航栏实例；

**[[UINavigationBar 外观] setTintColor:myColor];**

或者，如果您想根据导航栏的位置和通常使用的位置设置自定义导航栏，

```
[[UINavigationBar appearanceWhenContainedIn:[UIViewController class], nil]
       setTintColor:myNavBarColor]; 
```

这将修改视图控制器内的所有现有导航控制器。

但是在 ios5 之前，为某些特定的视图控制器设置导航栏的颜色更加容易，而且只是一行代码；

```
[self.navigationController.navigationBar setTintColor:[UIColor whiteColor]]; 
```

但是，如果您创建的导航栏不是导航控制器的一部分，而只是一个视图控制器，那么请为其保留一个出口并按上述方式对其进行自定义，或者，

```
[self.navigationBar setTintColor:[UIColor violetColor]]; 
```

在 viewDidLoad;

```
UIImage *backgroundImage = [self drawImageWithColor:[UIColor blueColor]];
 [self.navigationBar setBackgroundImage:backgroundImage forBarMetrics:UIBarMetricsDefault];

-(UIImage*)drawImageWithColor:(UIColor*)color{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *imagePath;
    imagePath = [[paths lastObject] stringByAppendingPathComponent:@"NavImage.png"];
    if([fileManager fileExistsAtPath:imagePath]){
      return  [UIImage imageWithData:[NSData dataWithContentsOfFile:imagePath]];
    }
    UIGraphicsBeginImageContext(CGSizeMake(320, 40));
    [color setFill];
    UIRectFill(CGRectMake(0, 0, 320, 40));
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData *data = UIImagePNGRepresentation(image);
    [data writeToFile:imagePath atomically:YES];
    return image;
} 
```

# c - 可变长度参数列表

> ID：13535935
> 
> 赞同：1
> 
> 时间：2012-11-23T21:28:10.943
> 
> 标签：c

```
/* va_arg example */
#include <stdio.h>
#include <stdarg.h>

void PrintLines ( char* first, ...)
{
  char* str;
  va_list vl;

  str=first;

  va_start(vl,first);

  do {
    str=va_arg(vl,char*);
    if
    printf ("%s\n",str);

     } while (str!=NULL);

  va_end(vl);
}

int main ()
{
  PrintLines ("First","Second","Third","Fourth",NULL);
  return 0;
} 
```

我们可以调用这样的`PrintLines`函数吗`PrintLines("First","Second","Third",6,NULL);`，将整数作为变量参数列表的一部分。如果是，任何人都可以请解释如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:39:49.303

因此，对于您的情况，您只需对其进行硬编码，例如：

```
void PrintLines ( char* first, ...)
  ...
  str1=va_arg(vl,char*);
  str2=va_arg(vl,char*);
  str3=va_arg(vl,char*);
  int4=va_arg(vl,int);

  va_end(vl);
} 
```

但我认为这不是您想要的：您有时可能想在 pos 4 处使用整数调用 PrintLines，有时使用字符串。然后你必须告诉它 pos 4 的那个东西是什么，因为这个糟糕的函数应该如何找出 112312123 是整数还是字符串的地址？所以你必须为这个函数提供一些类型信息，可能类似于它在 printf 和朋友中所做的：第一个 arg 包含一个描述其余参数的字符串。也许像 vsprintf 这样的东西会为你做一个完美的工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:42:01.350

考虑C++ 11 中的[可变参数模板](http://en.wikipedia.org/wiki/Variadic_template)。我知道它可以做到这一点，但以前从未使用过它。

# c# - WPF 内存泄漏和折叠的组合框

> ID：13535936
> 
> 赞同：1
> 
> 时间：2012-11-23T21:28:22.393
> 
> 标签：c#, .net, wpf, memory-leaks

我有一个 .net 4.0 wpf 应用程序，它有一个扩展器，在扩展器内部，我有 2 个组合框。扩展器视图和视图模型的生命周期是无限的（即只要应用程序还活着）。

组合框 itemsource 的内容与我的对象模型的当前工作副本相关联。

我可以选择加载或创建一个新的对象模型，它只是删除旧的对象模型并指向新的对象模型。在我的视图模型（实现 INotifyPropertyChanged）中，我跟踪更改并确保为 itemsource 创建一个全新的集合。

我注意到的是，在展开器折叠时创建新对象模型（因此组合框也折叠）并且我运行 ANTS 内存分析器后，我仍然有组合框引用旧对象模型......这可以防止垃圾收集器摆脱旧的对象模型。

我确实在我的视图模型中为 itemssource 属性和所选项目设置了一些断点，并且我可以看到，每当创建新对象模型时，我的代码确实将它们设置为新值（根据新对象模型），我可以看到在我对 itemsource 和选定项目进行属性更改后，组合框绑定正在调用我的 getter。但是，ANTS 仍然报告组合框引用了旧的对象模型。然后有趣的是，如果我展开扩展器并且我的组合框变得可见，ANTS 报告所有对旧对象模型的引用都消失了。什么可以解释这种行为？

```
<ComboBox 
    Grid.Row="0" Grid.Column="1" VerticalAlignment="Center"
    ItemsSource="{Binding Path=AvailableSitesA, Mode=OneWay}"
    SelectedValue="{Binding Path=SelectedSiteA}"
    DisplayMemberPath="Name"></ComboBox>

ObservableCollection<Site> AvailableSitesA
    {
        get { return _availableSitesA; }

        private set
        {
            if (value != _availableSitesA)
            {
                _availableSitesA = value;
                RaisePropertyChanged("AvailableSitesA");
            }
        }
    } 
```

# php - 如何确认 mysql 数据库中键列表的存在

> ID：13535937
> 
> 赞同：1
> 
> 时间：2012-11-23T21:28:23.087
> 
> 标签：php, mysql, sql

我有一个包含系统生成密钥的“密钥”字段的数据库表。

```
| 编号 | 关键 | 等等
|====|=======================|=================
| 1 | osi32i4kjwlqe |
|----|---------------------|------
| 2 | klwjeklj1343k |
|----|---------------------|------
| 3 | dfk32ld32ll23 |
|----|---------------------------------|----
| 4 | lk3jkl3j42lk4 |
------------------------------------------

```

另外，我有一个键列表：

```
{'osi32i4kjwlqe','ksadalala12','klwjeklj1343k','dfk32ld32ll23','lk3jkl3j42lk4','askalksl56'}

```

请注意，列表中的某些键存在于数据库中，而其他键则不存在。

如果可以的话，我想运行一个有效的查询来遍历列表，并确认数据库中存在密钥。

即：如果密钥存在，则什么也不做。如果没有，请使用此键插入一个新行。

有人知道一种有效的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T21:31:12.290

我假设您的键列是用`UNIQUE`. 如果是这样，只需循环并使用

```
INSERT IGNORE INTO table ... 
```

对于 JSON 数组中的每个键。如果不是，那么，我认为这就是你想要完成的事情:)

# android - android选项卡中片段的BackStack实现

> ID：13535943
> 
> 赞同：4
> 
> 时间：2012-11-23T21:29:05.023
> 
> 标签：android, tabs, android-fragments, out-of-memory

我的 Android 应用程序需要 Iphone 类型的设计，例如具有选项卡和多个内部屏幕。我完成了应用程序开发，如果我长时间使用该应用程序，现在将面临 OutOfMemoryError。所以我做了谷歌搜索，发现在选项卡中设置活动会消耗更多内存，我在 FragmentTransactions 中使用 replace() 来更改片段。因此，当单击后退键 Fragments 视图被重新创建，这在我的应用程序中非常昂贵，也消耗大量内存。所以我想通过将视图直接设置为选项卡并为片段导航实现自己的后台堆栈来更改我的应用程序架构。我已经实现了下面的代码，它工作正常，但是在整个应用程序过程中使用显示/隐藏是好还是不好？有人可以建议我在下面的代码中实现 backstack 或纠正我的示例。

```
package com.fragment;

import java.util.ArrayList;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;

public class MainActivity extends FragmentActivity implements OnTabChangedListener {
    ArrayList<Fragment> alTab1 = new ArrayList<Fragment>();
    ArrayList<Fragment> alTab2 = new ArrayList<Fragment>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    TabHost tabHost = findViewById(android.R.id.tabhost);
    tabHost.setup();
        // Tab for Photos
        TabSpec photospec = tabHost.newTabSpec("Photos");
        // setting Title and Icon for the Tab
        photospec.setIndicator("Photos", getResources().getDrawable(R.drawable.icon_photos_tab));
        photospec.setContent(R.id.tab1content);
        // Tab for Videos
        TabSpec videospec = tabHost.newTabSpec("Videos");
        // setting Title and Icon for the Tab
        videospec.setIndicator("Videos", getResources().getDrawable(R.drawable.icon_videos_tab));
        videospec.setContent(R.id.tab2content);
    tabHost.addTab(photospec);
tabHost.addTab(videospec);
tabHost.setOnTabChangedListener(this);
        FragmentManager fm = getSupportFragmentManager();
        if (fm != null) {
            FragmentTransaction ft = fm.beginTransaction();
            Tab1Fragment1 t1f1 = new Tab1Fragment1();
            ft.add(R.id.tab1content, t1f1, "t1f1");
            addToBackStack(t1f1);
            ft.commit();
        }
    }

    public void onTabChanged(String tabId) {
        if (tabHost.getCurrentTab()==0) {
        }
        if (tabHost.getCurrentTab()==1) {
            if (alTab2.size() == 0) {
                FragmentManager fm = getSupportFragmentManager();
                if (fm != null) {
                    FragmentTransaction ft = fm.beginTransaction();
                    Tab2Fragment1 t2f1 = new Tab2Fragment1();
                    ft.add(R.id.tab2content, t2f1, "t2f1");
                    addToBackStack(t2f1);
                    ft.commit();
                }
            }
        }
    }

    public void addToBackStack(Fragment f) {
        if (tabHost.getCurrentTab()==0) {
            if (alTab1.size() > 0) {
                FragmentTransaction ft = getSupportFragmentManager()
                        .beginTransaction();
                ft.hide(alTab1.get(alTab1.size() - 1));
                ft.commit();
            }
            alTab1.add(f);
        }
        if (tabHost.getCurrentTab()==1) {
            if (alTab2.size() > 0) {
                FragmentTransaction ft = getSupportFragmentManager()
                        .beginTransaction();
                ft.hide(alTab2.get(alTab2.size() - 1));
                ft.commit();
            }
            alTab2.add(f);
        }
    }

    @Override
    public void onBackPressed() {
        if (tabHost.getCurrentTab()==0) {
            if (alTab1.size() > 1) {
                FragmentTransaction ft = getSupportFragmentManager()
                        .beginTransaction();
                ft.remove(alTab1.get(alTab1.size() - 1));
                alTab1.remove(alTab1.size() - 1);
                ft.show(alTab1.get(alTab1.size() - 1));
                ft.commit();
                return;
            }
        }
        if (tabHost.getCurrentTab()==1) {
            if (alTab2.size() > 1) {
                FragmentTransaction ft = getSupportFragmentManager()
                        .beginTransaction();
                ft.remove(alTab2.get(alTab2.size() - 1));
                alTab2.remove(alTab2.size() - 1);
                ft.show(alTab2.get(alTab2.size() - 1));
                ft.commit();
                return;
            }
        }
        super.onBackPressed();
    }

} 
```

# javascript - 将javascript注入iframe的最佳方法

> ID：13535944
> 
> 赞同：1
> 
> 时间：2012-11-23T21:29:12.660
> 
> 标签：javascript, html, iframe, web

我正在尝试将 javascript 注入 iframe，但没有任何效果。我已经在这个问题上花了几天时间，如果有人能给我一些提示，那就太好了。

主题示例：

`example.html`: _

```
<html>
<head>

</head>
<body>
<iframe src="http://example.com/test.html" id="myFrame">
</iframe>
</body>
</html> 
```

`test.html`: _

```
<html>
<head>

</head>
<body background="./bg.jpg">
<p >Text </p>
<p >(<i>Something</i>)<br><img src="./img1.gif" align="left">Text</p>´
</body>
</html> 
```

* * *

所需的输出`test.html`：

```
<html>
<head>
<script type="text/javascript"> src="myscript.js</script>
</head>
<body background="./bg.jpg">
<p >Text </p>
<p >(<i>Something</i>)<br><img src="./img1.gif" align="left">Text</p>´
</body>
</html> 
```

* * *

* * *

我试过这个，但它不起作用：

`example.html`: _

```
<html>
<head>

<script type="text/javascript">
var rawframe = document.getElementById('myFrame');
var doc = rawframe.contentDocument;
if (!doc && rawframe.contentWindow) {
    doc = rawframe.contentWindow.document;
}
var script = doc.createElement('script');
script.type = "text/javascript";
script.src = "myscript.js";
document.body.appendChild(script);
</script>

</head>
<body>
<iframe src="http://example.com/test.html" id="myFrame">
</iframe>
</body>
</html> 
```

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:34:42.493

不幸的是，我不相信这是可能的。我知道我之前尝试过这些方法，但由于安全原因，浏览器阻止了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:35:00.090

您将脚本附加到父页面的文档，而不是框架页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:36:06.397

我不确定这是否可以实现，但我看到的一个问题是时机。您会在加载 iframe 的内容之前运行 javascript 代码，对吗？

# ruby-on-rails - update_attributes 不起作用

> ID：13535945
> 
> 赞同：0
> 
> 时间：2012-11-23T21:29:13.893
> 
> 标签：ruby-on-rails, activerecord

这是我的控制器

```
class ActivitiesController < ApplicationController 
  def exercises
    if current_user.userprofile.present? #chef whether there is a userprofile object
     @weeknum = current_user.userprofile.week 
     @dayly_activity = Activity.where(:week => 1, :day => 'Monday').first   
    end #end check userprofile     
  end

 def updatexercises
   respond_to do | format | 
    @dayly_activity = Activity.where(:week => 1, :day => 'Monday').first 
    @dayly_activity.update_attributes(params[:@dayly_activity])  
    @dayly_activity.save 
    format.html { render action: "exercises" }
  end
 end  
end 
```

还有我的模板

```
<h1>WEEKLY EXERCICES</h1>

Day : <%= @dayly_activity.day %>

<%= form_for(@dayly_activity, :url => { :action => "updatexercises" }) do | f | %>
<table>
<tr>
    <td>Jogging:</td>
    <td>
        <% list = (0..20).to_a %>
        <%= f.select :jog, list %>
        x 0.1 km
    </td>
</tr>
<tr>
    <td>Bicycling:</td>
    <td>
        <% list = (0..10).to_a %>
        <%= f.select :bicycl, list %>
        km
    </td>
</tr>
<tr>
    <td>Push ups:</td>
    <td>
        <% list = (0..20).to_a %>
        <%= f.select :pushups, list %>
        x 10 times
    </td>
</tr>
<tr>
    <td colspan = "2"><%= f.submit %></td>
</tr>
  </table>

<% end %> 
```

当我单击按钮时，Daily+activity 对象没有被保存。我错过了什么吗

# 编辑

我试图以这种方式进行硬编码并将其保存到数据库中。

```
@dayly_activity.jog = 17
@dayly_activity.pushups = 13
@dayly_activity.save 
```

显然，问题一定出在**update_attributes**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:35:30.323

您需要使用`params[:dayly_activity]`（删除@ 符号）。

另外，我会放这两行：

```
 @dayly_activity = Activity.where(:week => 1, :day => 'Monday').first 
   @dayly_activity.update_attributes(params[:dayly_activity]) 
```

在你的`respond_to`街区之外（把它们放在上面）。

您也可以删除`@dayly_activity.save`, update_attributes 自动执行它，如果它工作/失败，将返回 true/false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:37:26.257

你有错误`[:@dayly_activity]`

在那个代码中

```
@dayly_activity.update_attributes(params[:@dayly_activity])  
@dayly_activity.save 
```

`save`没用。`update_attributes`保存记录。

最好检查`update_attributes`. 因此，您可以捕获验证错误。

例如

```
if @dayly_activity.update_attributes(params[:dayly_activity]) 
  redirect_to dayli_activity_path, :notice => "Updated"
else
  render :edit
end 
```

# java - 一元“~”运算符 - 这里到底发生了什么？

> ID：13535947
> 
> 赞同：12
> 
> 时间：2012-11-23T21:29:25.243
> 
> 标签：java, binary

我最近上了一门 Java 课程（1 周速成课程），我们涵盖了一些二进制数学。

这个一元 ~ 运算符（我认为它被称为波浪号？）是这样向我们解释的：

*它反转位模式，将每个“0”变为“1”，将每个“1”变为“0”。例如，一个字节有 8 位。如果您有以下字节：00000000，则反转后的值将变为 11111111。*

上面的解释清晰简洁，对我来说完全有道理。直到，也就是说，我尝试实现它。

鉴于这种：

```
byte x = 3;
byte y = 5;
System.out.println(~x);
System.out.println(~y); 
```

输出是：

```
-4  
-6 
```

我很困惑这是怎么发生的。

如果二进制中的 +3 是 11，那么它的反转将是 00，这显然不是 -3。

但是由于一个字节有8位，那么+3的二进制表示不应该写成00000011吗？

这将反转为 11111100。转换回十进制值这将是 252。但是，如果您将 +3 写为 011，那么它确实会转换为 100，即 +4，但是您怎么知道它是负数?

如果您尝试 0011，它将转换为 1100，如果您使用第一位作为符号，那么它确实会变成 -4。

啊-所以在这一点上，我以为我到了某个地方。

但后来我得到了 y = 5 的第二个值。

我们怎么写这个？使用相同的逻辑，+5 转换为二进制 0101，其反转为 1010。

现在我非常困惑。这看起来代表有符号值 -2 还是 +10 十进制无符号值？我打印出来的 -6 都不是。

同样，如果我将长度增加到一个字节的 8 位，+5 是 00000101，它反转为 11111010。我真的找不到将其变为 -6 的方法。

有没有人明白这一点，因为我不知道这里发生了什么，我打印的数字越多，我变得越困惑。

谷歌似乎对此并没有提出任何建议——也许它不喜欢看小运营商标志.. :-(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T21:32:40.480

看这个演示： -

```
3 ->  0011
~3 -> 1100  -> -4 (2's complement)

5 -> 0101
~5 -> 1010 -> -6 (2's complement) 
```

由于有符号整数存储为 2 的补码，因此`2's complement`取. 现在since是一个负数。所以，结果是。情况也是如此。`1100``4``1100``-4``1010`

```
1100 
0011  - 1's complement
0100  - 2's complement  - value = 4 (take negative) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T22:25:15.497

来自维基百科：在二进制补码表示法中，非负数由其普通二进制表示形式表示；在这种情况下，最高有效位为0。二进制补码运算是取反运算，因此负数由绝对值的二进制补码表示。
为了获得二进制数的二进制补码，通过使用按位非运算将位反转或“翻转”；然后将 1 的值添加到结果值中，忽略在取 0 的二进制补码时发生的溢出。[http://en.wikipedia.org/wiki/Two%27s_complement](http://en.wikipedia.org/wiki/Two%27s_complement)

因此，如果您有 0101，即 +5，则它的倒数是 1010，即 -5。

虽然您并没有真正将 010 读为 5，但是当您在开头看到 1 时，您知道要获得该数字，您必须再次反转其余数字以获得您想要否定的正数. 如果这是有道理的。

如果您以前没有使用过它，这有点陌生。这当然不是十进制数字的工作方式，但一旦你看到发生了什么，它实际上很简单。

十进制的 8 值写为 01010，它与 10101 取反。第一个数字 (1) 表示它是负数，然后将其余数字翻转回来得到数值：1010。

要记住的一件事是二进制补码与普通的旧二进制计数不同。在普通二进制中，10101 的值（在二进制补码中为 -8 如上所述）当然是 21。我想这就是混淆的地方 - 你如何通过查看它们来区分它们？您必须知道使用了哪种表示形式才能确定数字的实际值是多少。还有一个略有不同的补码。

这里给出了一个关于二进制数学的很好的教程，包括一个和两个的补码。 [http://www.math.grin.edu/~rebelsky/Courses/152/97F/Readings/student-binary](http://www.math.grin.edu/~rebelsky/Courses/152/97F/Readings/student-binary)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T21:33:00.870

有符号整数几乎普遍使用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)存储。这意味着反转位（取反码）并加一。这样一来，您就没有整数零的两种表示形式（+0 和 -0），并且某些带符号的操作变得更容易在硬件中实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T21:34:39.387

[Java 在二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)中使用有符号数。当使用类型为“unsigned int”或“unsigned char”时，您的推理在 C 或其他语言中是正确的。

# signalr - 有什么方法可以检查连接 ID 是否存在？

> ID：13535949
> 
> 赞同：1
> 
> 时间：2012-11-23T21:29:35.990
> 
> 标签：signalr, signalr-hub

我正在构建一个具有多个 SignalR 实例的系统，每个实例都连接到消息总线。

给定一个连接 id，有没有办法检查连接 id 是否存在？如果不是，那么在服务器端执行此操作的最佳做​​法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T22:33:58.207

当 OnDisconnected 在您的集线器上触发时，有问题的连接 ID 不再存在。

# java - Java 随机类不是真正随机的吗？

> ID：13535952
> 
> 赞同：4
> 
> 时间：2012-11-23T21:30:01.690
> 
> 标签：java, random

我正在尝试模拟我在[http://blog.xkcd.com/2010/02/09/math-puzzle/](http://blog.xkcd.com/2010/02/09/math-puzzle/)上找到的数学难题。但是，java 随机类返回奇怪的结果。在下面的代码中，结果是预期的。第一行的输出在 0.612 左右，第二行的输出在 0.49 和 0.51 之间。整数试验 = 10000000；诠释成功 = 0;

```
 int returnstrue = 0;

    for (int i = 0; i < trials; i++) {
        Random r = new Random();
        //double one = r.nextDouble()*10000;
        //double two = r.nextDouble()*10000;
        double one = 1;
        double two = Math.PI;

        double check = r.nextDouble();
        boolean a = r.nextBoolean();

        if(a)
        {
            returnstrue++;
        }
        if(a){
            if((check>p(one)) && two > one)
            {
                success++;
            }
            if((check<p(one))&& two<one)
            {
                success++;
            } 
        }
        else{
            if((check>p(two)) && two < one)
            {
                success++;
            }
            if((check<p(two))&& two>one)
            {
                success++;
            }      
        }
    }
    System.out.println(success/(double)trials);
    System.out.println(returnstrue/(double)trials); 
```

但是，当我切换

```
 double check = r.nextDouble();
 boolean a = r.nextBoolean(); 
```

到

```
 boolean a = r.nextBoolean();
  double check = r.nextDouble(); 
```

第一个数字的输出约为 0.476，第二个数字约为 0.710。这意味着 nextBoolean() 方法在后面的配置中有 70% 的时间返回 true。我做错了什么还是这只是一个错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T21:34:28.020

将 的实例化移到`r`循环外，如下所示*：*`for`

```
Random r = new Random();
for (int i = 0; i < trials; i++) {
    :
} 
```

您现在所做的是在每次循环迭代时创建一个新的，并且由于种子是基于时间（毫秒）的，因此您很可能会得到很多具有*相同*种子的种子。

几乎可以肯定，这就是扭曲您的结果的原因。

所以，是的，这*是*一个错误，只是在*您的*代码中而不是在 Java 中。在大约 99.9999% 的情况下，当人们问这个问题时，情况往往是这样，因为 Java 本身正在不断地被全世界数以百万计的人测试，而你的代码片段已经被测试了，好吧，只有你 :-)

# git - 如何更新子模块的父仓库中的提交哈希？

> ID：13535953
> 
> 赞同：2
> 
> 时间：2012-11-23T21:30:05.143
> 
> 标签：git

我有一个 git repo 和另一个 repo 作为子模块。该子模块仅在本项目中使用。我在 subrepo 中提交了更改，但父 repo 仍然引用旧版本（子项目提交 989471 ......等..）

如何更新父仓库以指向最新版本的子仓库。有没有更好的方法来做到这一点，以便在我更改子存储库时它们保持同步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:34:31.697

在子模块中提交后，您将目录更改为父存储库并执行以下操作：

```
git add path/to/submodule 
```

并提交更改。这将更新跟踪的提交 ID。您必须为子模块中的每个（组）提交执行此操作。

这实际上是相当合理的，因为父目录的状态很可能取决于子存储库中的某个状态（例如，如果为程序捆绑库；您可能需要特定版本才能进行编译），即为什么跟踪父存储库中的子模块提交而不是盲目地检查指定分支的 HEAD 是明智的。

# java - 排序和限制脚轮查询

> ID：13535961
> 
> 赞同：0
> 
> 时间：2012-11-23T21:31:29.903
> 
> 标签：java, castor, oql

我正在尝试通过具有最早日期的 castor 查询返回一个对象。

这是我一直在尝试的事情： **SELECT p FROM model.objects.Product p LIMIT $1 WHERE p.status=$2 ORDER BY p.statusDate;**

这会导致：**org.exolab.castor.jdo.oql.OQLSyntaxException：在 WHERE 附近发现了不正确的令牌类型（找到了 KEYWORD_WHERE，但预期为 END_OF_QUERY**

我使用的是 0.9.6 版本，我相信它支持这种事情。

非常感谢任何提示或指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:16:13.443

根据我的评论，确实 LIMIT 子句必须出现在 ORDER BY 子句之后。请参阅[Castor 查询语法](http://www.castor.org/1.2/oql.html#Syntax)。

# css - -webkit-transform: translate3d(); 触发整个页面的硬件加速，还是仅针对目标元素？

> ID：13535967
> 
> 赞同：3
> 
> 时间：2012-11-23T21:32:11.323
> 
> 标签：css, performance, google-chrome, css-transforms, hardware-acceleration

我正在开发一个相当 CPU 密集型的 Web 应用程序。[正如http://davidwalsh.name/translate3d](http://davidwalsh.name/translate3d)和[http://www.html5rocks.com/en/tutorials/speed/html5/](http://www.html5rocks.com/en/tutorials/speed/html5/)等所建议的，我已经开始使用`-webkit-transform: translate3d(0, 0, 0)`某些元素来提高平均帧速率。这种调整对渲染性能产生了相当大的影响，尤其是在 Chrome 中。

如果我将此技术应用于单个动画元素，它会触发整个页面的硬件加速，还是仅触发该元素？或者它可能只触发该元素的渲染层的硬件加速？

研究 Chrome 的“合成渲染层边框”（在 中`chrome://flags`）的输出似乎表明该行为仅限于指定的元素，但最好有一个更具体的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T21:50:52.693

仅在元素的动画期间。硬件加速，根据[http://www.html5rocks.com/en/tutorials/speed/html5/](http://www.html5rocks.com/en/tutorials/speed/html5/)只适用于：

“General layout compositing”（页面的初始渲染）
“CSS3 transitions”和“CSS3 3D transitions”（在过渡期间应用于单个元素以辅助帧率）
“Canvas Drawing”和“WebGL Drawing”（不适用于你的问题）

# c++ - 带有 OpenCv 2.4 的火线相机。不工作

> ID：13535969
> 
> 赞同：0
> 
> 时间：2012-11-23T21:32:22.820
> 
> 标签：c++, opencv, camera, firewire

我正在使用 OpenCV 2.4 和 C++ 进行图像处理和视频流。我想知道我们如何使用像pixilink这样的火线相机来捕捉帧？我尝试了 VideoCapture 类，但它似乎只适用于与火线相机不同的 USB 相机。如果有人用火线相机做了同样的事情，那么请给一些指导如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T11:39:51.673

您可以使用 firewire SDK 捕获图像，也可以使用[libdc1394 API](http://sourceforge.net/projects/libdc1394/)。我发现 libdc1394 更可靠且易于使用，并且有几个示例可供入门。

# jquery - 在链接/按钮单击事件上模拟 POST

> ID：13535977
> 
> 赞同：3
> 
> 时间：2012-11-23T21:33:09.593
> 
> 标签：jquery, rest, post, click, hyperlink

有一个与给定用户相关的可编辑项目列表，我希望它是非 GET 发起的；即，当单击给定条目的编辑按钮时，我希望启动`POST`目标编辑表单屏幕。

我如何才能实现将列表中的每个编辑按钮都包装在 中的这一点`<form>...</form>`？

目前我有一个 jQuery location.href 将用户踢到目标编辑屏幕；然而，使用 GET 用户可以通过简单地输入他们选择的 URI 来输入他们喜欢的任何 id。

```
$('.game-edit').click -> 
  location.href = '/admin/linescore/edit/' + getID($(this)) 
```

我可以点击事件 POST a la`location.href`吗？

想法赞赏，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:39:40.383

```
$('a').click(function(){
$('#formID').action = $(this).href
$('#formID').submit();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:46:12.183

你有什么理由不能让 jQuery 为你做 POST 吗？鉴于：

```
<a class="edit" href="...">Click Me</a> 
```

...然后：

```
$('a.edit').click(function(){
    var postUrl = $(this).attr('href');  // href attribute of clicked link
    $.post(.....); 
}); 
```

**编辑**- 为清楚起见更新

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T22:47:46.167

好的，这里有很好的答案，但在易于实现方面并不是我真正想要的（是的，只是 ajax，但不想处理将表单内容响应注入 DOM 容器然后处理注入表单的 ajax 事件jq“live”和任何脚本加载问题）。

工作原理很简单：创建一个空的表单块：

```
<form id="game-list" action="" method="post"></form> 
```

然后，给定一个编辑按钮：

```
<input id="edit-@x.id" type="button" value="edit" class="game-edit" /> 
```

在单击事件上，填充表单的操作并提交：

```
$('.game-edit').click ->
  $('#game-list').attr('action', '/admin/linescore/edit/' + getID($(this)))
  gamesForm.submit() 
```

这比我认为我需要做的要直接得多，我认为我需要将每个编辑按钮包装在表单包装器中。当然，时区时差 6 小时，我想的不是很清楚，工作的好时机 ;-)

# c# - 从 JavaScript 设置的 HiddenField 不持久

> ID：13535979
> 
> 赞同：2
> 
> 时间：2012-11-23T21:33:39.527
> 
> 标签：c#, asp.net, .net

我有一个带有 HiddenField、UpLoad 控件和 DropDownList 的 UserControl，这些控件在 SharePoint 解决方案的 ASPX 页面上被引用。控件的标记是：

```
<ig:WebDropDown ID="WebDropDownDocumentType" runat="server" Width="135px" DataSourceID="DataSourceDocumentType" DataKeyFields="Id" ValueField="Id" TextField="Name" AutoPostBack="False" ClientEvents-SelectionChanged="WebDropDownDocumentType_SelectionChanged">
<asp:HiddenField ID="hdnDocumentType" runat="server" />
<ig:WebUpload ID="WebUploadSupportingDocuments" runat="server" ProgressUrl="/WebUploadStatusHandler.ashx" Height="100px" MaxSimultaneousFilesUploads="1" Width="100px" OnUploadFinished="WebUploadSupportingDocuments_UploadFinished" AutoStartUpload="True" OnUploadStarting="WebUploadSupportingDocuments_UploadStarting" > 
```

当为 DropDownList 更改所选索引时，将调用一个 javascript 函数来设置 HiddenField 值。我还添加了一个警报来验证 HiddenField 是否包含该值并且它确实显示了预期值。这是功能：

```
function WebDropDownDocumentType_SelectionChanged(sender, e) {
        var wddObject = sender, 
        selectedIndex = wddObject.get_selectedItemIndex(), value;
        value = wddObject.get_items().getItem(selectedIndex).get_value();
        document.getElementById('<%=hdnDocumentType.ClientID %>').value = value;       
        alert(document.getElementById('<%=hdnDocumentType.ClientID %>').value);
    } 
```

从 DropDownList 中选择一个项目后，我看到函数调用并验证警报中的值是否正确。然后我单击按钮选择要上传的文件并触发 UploadFinished 事件。当我在 UploadFinished 事件中设置断点并检查 HiddenField 的值而不是预期值时，它是一个空字符串。

```
string sDocumentType = hdnDocumentType.Value; 
```

如果我不关闭页面并上传另一个文件，则它在下拉列表中具有所选项目的值。如果我然后从下拉列表中选择另一个项目并上传另一个文件，它具有上一个选择，然后在下一个文件上上传下一个选择。所以它第一次是一个空字符串，然后我上传的每个文件后面都有一个选择。

我不确定为什么该值没有持续存在，并且正在寻找有关如何解决该问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:04:56.527

The cause of the problem can be upload component. It can use iframe to upload files to server (this is how for example Async File Upload from Ajax Control Toolkit and some other upload component work). This can be the cause of the problem why hidden field is empty (because request was done from iframe). If this is your case then you need to handle client side event which will notify you when upload is completed (of course if this component support them) and perform postback manually (or ajax request) to perform required actions.

# c++ - WIA 2.0 - IWiaDevMgr2::GetImgDlg() - 如何声明/初始化 ppbstrFilePaths 参数

> ID：13535981
> 
> 赞同：0
> 
> 时间：2012-11-23T21:33:49.260
> 
> 标签：c++, wia, bstr, double-pointer

我正在尝试在我的 VS2012 C++ 库中实现一些 WIA 2.0 代码，并且遇到了**IWiaDevMgr2::GetImageDlg**调用的问题，特别是 ppbstrFilePaths 参数。我不太确定如何声明/初始化它。

从[http://msdn.microsoft.com/en-us/library/windows/desktop/aa359932(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa359932%28v=vs.85%29.aspx)的文档中：

> ppbstrFilePaths [in] 类型 - BSTR**
> 
> 指向已扫描文件的路径数组的指针的地址。在调用 IWiaDevMgr2::GetImageDlg 之前，将指针初始化为指向大小为零 (0) 的数组。见备注。

我已经尝试了各种不同的声明方式，但都没有成功，例如：

```
 // No scanner selection dialog, hr = E_OUTOFMEMORY
    BSTR *files = new BSTR[0];
    HRESULT hr = _pWiaDevMgr->GetImageDlg(0, NULL, *_parentHwnd, path, fileTemplate, numFiles, &files, &_pWiaItemRoot); 
```

我也尝试过类似的事情：

```
 // No scanner selection dialog, hr = E_OUTOFMEMORY
    BSTR **files = (BSTR**)CoTaskMemAlloc(0);
    *files = new BSTR[0];
    HRESULT hr = _pWiaDevMgr->GetImageDlg(0, NULL, *_parentHwnd, path, fileTemplate, &numFiles, files, &_pWiaItemRoot); 
```

谁能指出我声明和初始化此 BSTR ** 的正确方向？我不是一个大的 C++ 开发人员，在这一点上几乎是在猜测。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:30:33.527

事实证明，我的第一次尝试走在了正确的轨道上：

```
CComBSTR path("D:\\TestWiaScan");
CComBSTR fileTemplate("FileName");
LONG numFiles = 0L;

BSTR *files = new BSTR[0];
HRESULT hr1 = _pWiaDevMgr->GetImageDlg(0, NULL, _parentHwnd, path, fileTemplate, &numFiles, &files, &_pWiaItemRoot);
if (files)
{
    for(int i=0;i < numFiles;i++)
    {
        SysFreeString(files[i]);
    }
}
CoTaskMemFree(files);

if (_pWiaItemRoot)
{
    _pWiaItemRoot->Release();
    _pWiaItemRoot = NULL;
} 
```

我第一次尝试失败的原因是我传入的 BSTR 参数存在问题。使用 CComBSTR 或 SysAllocString 解决了这个问题。

# xml - 为多个文件附加一个 XML 文件

> ID：13535985
> 
> 赞同：1
> 
> 时间：2012-11-23T21:34:29.530
> 
> 标签：xml, vb.net, file

所以，我有这个程序从用户那里收集“源”、“目标”和“工作名称”，然后以这种方式将这些信息添加到 XML 文件中

```
-<Jobs> -<Job> <JobName>a</JobName> 
<Source>C:\Users\Public\Pictures\SamplePictures\Chrysanthemum.jpg</Source> 
<Source>C:\Users\Public\Pictures\Sample Pictures\Desert.jpg</Source>
<Source>C:\Users\Public\Pictures\Sample Pictures\Hydrangeas.jpg</Source>  
<Destination>C:\Users\Public\Pictures\Sample Pictures\a.zip</Destination> 
<Timestamp>11/23/2012 3:43:42 PM</Timestamp> </Job> 
```

但是，我的问题来自我第二次运行该程序时。我希望它只收集程序中输入的新信息并附加（添加到）XML 文件。但是，当我第二次运行程序时，xml 文件仅更新单个文件的源节点（程序读取的最后一个文件）

有什么帮助吗？下面是我的 fJobDup() 函数代码。

```
Dim doc As New XmlDocument()
doc.Load("C:\Users\Matt Taylor\Desktop\Backup\Backup.xml")
Dim job As XmlElement = doc.CreateElement("Job")
Dim jName As XmlElement = doc.CreateElement("JobName")
Dim jsource As XmlElement = doc.CreateElement("Source")
Dim jdestin As XmlElement = doc.CreateElement("Destination")
Dim jtime As XmlElement = doc.CreateElement("Timestamp")

job.AppendChild(jName)
job.AppendChild(jsource)
job.AppendChild(jdestin)
job.AppendChild(jtime)
doc.DocumentElement.AppendChild(job)

jName.InnerText = JobName.Text.ToString()

Dim filesEnum3 As IEnumerator
filesEnum3 = OpenFileDialog1.FileNames.GetEnumerator()

While filesEnum3.MoveNext

jsource.InnerText = filesEnum3.Current

End While

jdestin.InnerText = boxDestin.Text.ToString()
jtime.InnerText = Now()

doc.Save("C:\Users\Matt Taylor\Desktop\Backup\Backup.xml") 
```

我已经检查了文件是否存在。当我单击“完成”按钮时，这会在最后出现。

```
If Dir("C:\Users\Matt Taylor\Desktop\Backup\Backup.xml") <> "" Then
        fjobdup()
    Else
        fJob()
    End If 
```

fJobDup() 函数是我在此线程顶部列出的函数。

下面的代码是 fJob() 函数。

```
 Dim Backxml As New XmlWriterSettings()
    Backxml.Indent = True
    Dim xmlwrt As XmlWriter = XmlWriter.Create =
    ("C:\Users\MattTaylor\Desktop\Backup\Backup.xml",   Backxml)

    Dim filesEnum2 As IEnumerator
    filesEnum2 = OpenFileDialog1.FileNames.GetEnumerator()

    With xmlwrt
        .WriteStartDocument()
        .WriteComment("XML Backup.")
        .WriteStartElement("Jobs")

        .WriteStartElement("Job")

        Dim jName As String = JobName.Text.ToString
        .WriteElementString("JobName", jName.ToString)

        While filesEnum2.MoveNext
            .WriteStartElement("Source")
            .WriteString(filesEnum2.Current)
            .WriteEndElement()
        End While

        .WriteStartElement("Destination")
        .WriteString(boxDestin.Text)
        .WriteEndElement()

        .WriteStartElement("Timestamp")
        .WriteString(Now())
        .WriteEndElement()

        .WriteEndDocument()
        .Close()
    End With 
```

如果更多代码会有所帮助。这是用于将文件添加到列表框（名为 boxSource）的按钮的代码。

```
OpenFileDialog1.ShowDialog()

    Dim filesEnum As IEnumerator

    filesEnum = OpenFileDialog1.FileNames.GetEnumerator()

    While filesEnum.MoveNext
        boxSource.Items.Add(filesEnum.Current)
    End While
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:58:54.867

您在每次运行时都创建一个新的 XMLDocument。

尝试检查文件是否存在。

看看这是否有帮助..请验证语法一次..

```
Dim doc as XmlDocument()

If My.Computer.FileSystem.FileExists("C:\Users\Matt Taylor\Desktop\Backup\Backup.xml") Then
    doc.Load("C:\Users\Matt Taylor\Desktop\Backup\Backup.xml")
Else
    Dim doc As New XmlDocument()
End If 
```

# java - 爪哇。需要读取文件两次

> ID：13535992
> 
> 赞同：0
> 
> 时间：2012-11-23T21:35:04.270
> 
> 标签：java

我是编程界的新手，现在我正在编写一个简单的代码来读取每行存储学生姓名和年龄的文本文件。出于某种原因，我需要读取该文件两次，所以我想问有没有比这更简单的方法？

```
File inputFile = new File("students.txt");

try {
    Scanner in = new Scanner (inputFile);

    // count how many lines are in the file
    while (in.hasNext())
    {
        in.nextLine();
        count++;
    } 

    in.close();
} catch (FileNotFoundException e) {
    System.out.println ("Check your file mate");
}

ArrayStudent s = new ArrayStudent(count);

try {
    Scanner in2 = new Scanner (inputFile);

    while (in2.hasNext())
    {
        String name = in2.next();
        int age = in2.nextInt();
        s.insertStudent(new Student (name, age));
    } 

    in2.close();
} catch (FileNotFoundException e) {
    System.out.println ("Check your file mate");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T21:40:57.783

有一种更简单的方法，您只需读取一次文件

而不是 ArrayStudent 似乎有一个固定大小的数组，使用

```
 List<Student> students 
```

ArrayList 在您添加元素时自动增长。

你初始化

```
students= new ArrayList<Student>(); 
```

并将学生添加到列表中

```
students.add(new Student(name, age)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T21:41:29.787

首先，您不应该复制和粘贴您的代码。改用函数（方法）。您可以创建自己的方法来打开文件并返回一个`Scanner`实例。在这种情况下，您不会创建重复的代码。

其次，`Scanner`具有接受输入流的构造函数。您可以在输入流上使用`mark()`和（请参阅 参考资料）从文件开头开始读取。`reset()``FileInputStream`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:43:35.817

您根本不需要读取文件两次。我假设你的`ArrayStudent`类包含一个`Student[]`数组。相反，您应该使用可动态调整大小的数据结构，例如`ArrayList`.

使用`ArrayList`，您无需事先了解要添加多少元素；它会在幕后自动增加其大小。

这是它的用法示例：

```
List<Student> students = new ArrayList<Student>();
students.add(new Student(name1, age1));
students.add(new Student(name2, age2));
students.add(new Student(name3, age3)); 
```

# jquery - 如何动态加载控制器和动作（Zend Framework + AJAX）？

> ID：13535996
> 
> 赞同：1
> 
> 时间：2012-11-23T21:35:32.257
> 
> 标签：jquery, zend-framework, zend-controller

我正在尝试为 AJAX 编写通用代码。我将在电子商店管理面板的示例中说明我的意思。我们可以编辑一些内容，例如：类别、产品、属性。这些元素中的每一个都有其带有输入文本和输入复选框字段等的表单。保存将看起来像在 Gmail 中，当您在字段中写入内容时，它会自动向服务器发送请求。对于每个模块（类别、产品、属性...），我都有一个控制器和一个动作，例如用于编辑 editAction、删除 deleteAction 等。有时我在一个视图中拥有多个关于控制器的表单。在主布局中，我有一个 JS 代码：

```
$.ajax({
      url: 'http://localhost/fa.fronted/public/en/controller/action/',
      type: 'POST',
      data: 'websiteid='+iWebId+'&formid='+iFormId+'&formfieldid='+iFieldId+'&'+dataName+'='+dataValue,
      success: function(data) {
          if(data=='OK') {
              $('#ajaxmessage').text('All changes saved');
          }
          else{
              $('#ajaxmessage').text('Error: ' + data);
          }
      },
      error: function() {
          $('#ajaxmessage').text('Error');
      }
  });
} 
```

我想为不同的控制器和操作使用不同的 URL 地址 - 我想动态地执行此操作或以表单管理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:46:44.857

```
function onChangeCallback(controller,action,formId){
    var data = getFormData(formId); 
    // or if you want to save by field $(this).val() will get you the input value
    // make the ajax request from the code posted in your question
}

<input type="text" name="username" onchange="return onChangeCallback('<?=$this->ControllerName?>'
,'<?=$this->actionName?>','myForm')" /> 
```

# ruby-on-rails - 在 Rails 中验证

> ID：13535997
> 
> 赞同：-1
> 
> 时间：2012-11-23T21:35:44.027
> 
> 标签：ruby-on-rails, validation, model

我有一个包含有效数据的模型；一切正常。

在表格中，我选择如何选择我选择的选项我也想在 2 个字段中有效

```
validates_presence_of :is_ranking, :on => :update
validates :awards_count, :on => :update, :unless => :is_ranking == 1 
```

现在作为 is_ranking == 1 再次检查：awards_count 在添加到数据库之前从表单发送的所有

如何强制 rails 验证表单上的这两个附加字段，我选择在选择中翻录选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:43:42.337

你应该[使用符号或](http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-a-symbol-with-if-and-unless)`:if`字符串和`:unless`

尝试用方法替换条件

```
validates :awards_count, :on => :update, :unless => :is_ranking?

# You actually don't need that method in case your `is_ranking` field is `boolean`.
def is_ranking?
  is_ranking == 1
end 
```

或者用字符串

```
validates :awards_count, :on => :update, :unless => "is_ranking?" 
```

# grails - Grails 登录的用户名拥有创建的记录

> ID：13535998
> 
> 赞同：1
> 
> 时间：2012-11-23T21:35:44.973
> 
> 标签：grails, spring-security

我确信这必须是编程中最常见的事情之一，即如何将某个表单提交与某个登录用户相关联。

我已经尝试了很长一段时间，但我最终还是在圈子里跑，一个接一个地出错。

我的问题是，让用户拥有他们提交的记录的正确方法是什么？

我尝试了很多选择，都没有成功。:\ 我什至尝试了创建字符串字段并将当前用户插入到 gsp 的隐藏字段中的不太安全的方法，这甚至无法正常工作。

静态的 belongsTo = 用户

在域类中，很好，但这只能让我在用户表单中看到它。

也许问题在于它是如何搭建的。Generate Controllers, Generate Views 为所有记录做了一个很好的通用列表。我需要这个列表来只显示他们的记录。但另外我需要我的管理员查看所有记录。

谁能帮我指出正确的方向？

SalesOrderController.groovy

```
@Secured(['IS_AUTHENTICATED_REMEMBERED'])
def list(Integer max) {     

    params.max = Math.min(params.max ? params.max.toInteger() : 10, 100)
    [salesOrderInstanceList: SalesOrder.list(params), salesOrderInstanceTotal: SalesOrder.count()]
//      def user = params.id ? SecUser.findByUsername(params.id) : SecUser.get(springSecurityService.principal.id)
//      [salesOrderInstanceList: SalesOrder.findAllBySoldBy(user), salesOrderInstanceTotal: SalesOrder.count()]
//      if (!user) {
//          response.sendError(404)
//          return
//      }
} 
```

类销售订单{

```
static searchable = {
    user(component:true)
}

enum JobStatus {
    PENDING, APPROVED, COMPLETE
}

enum JobType {
    INSTALL, REPAIR, WARRANTY, TINT
}

enum PaymentType {
    INSURANCE, CASH
}

enum InstallLocation {
    INSHOP, HOME, BUSINESS
}

enum InstallTime {
    MORNING, MIDDAY, AFTERNOON
}

JobStatus jobStatus
JobType jobType
PaymentType paymentType

String custFirstName
String custLastName
String custBestNumber
String custAlternateNumber
String custEmail
String custAddress
String custAddress2
String custCity
String custState
String custZip

String vehicleYear
String vehicleMake
String vehicleModel
String vehicleVin

static hasMany = [glassTypes: GlassType, options: GlassOption]

Date insuranceDateOfLoss
String insuranceCompany
String insurancePolicyNumber
String insuranceClaimNumber
String insuranceDeductible

Date installDate
InstallTime installTime
InstallLocation installLocation
String installCrossStreet1
String installCrossStreet2
String installAddress
String installCity

String notes

Date dateCreated
String soldBy

static constraints = {

    jobType blank: false
    custFirstName blank: false
    custLastName blank: false
    custBestNumber blank: false, size:10..10
    custAlternateNumber nullable: true, sizeMax: 10
    custEmail blank: false, email: true
    custAddress blank: false
    custAddress2 nullable: true
    custCity blank: false
    custState blank: false, size: 2..2
    custZip blank:false, size: 5..5

    vehicleYear blank: false, size:4..4
    vehicleMake blank: false
    vehicleModel blank: false
    vehicleVin blank: false, size:17..17

    glassTypes blank: false
    options blank: false

    insuranceDateOfLoss nullable: true
    insuranceCompany nullable: true
    insurancePolicyNumber nullable: true
    insuranceClaimNumber nullable: true
    insuranceDeductible nullable: true

    installDate blank: false
    installTime blank: false
    installLocation blank: false
    installCrossStreet1 blank: false
    installCrossStreet2 blank: false
    installAddress nullable: true
    installCity nullable: true

    paymentType blank: false
    jobStatus blank: false
    notes nullable: true, size:0..1024
    soldBy blank: false     
}

static belongsTo = SecUser 
```

}

```
<div class="fieldcontain ${hasErrors(bean: salesOrderInstance, field: 'soldBy', 'error')} required">
<label for="soldBy">
    <g:message code="salesOrder.soldBy.label" default="Sold By" />
</label>
<g:textField name="soldBy" value="${salesOrderInstance?.soldBy}" default="${sec.loggedInUserInfo(field:'username')}" />
<sec:loggedInUserInfo field="username"></sec:loggedInUserInfo> 
```

我尝试了一个使用服务的示例，但这只是让我迷失了，因为该示例只需要传递一个字段。正如你所看到的，我有不止一个，还有一些多对一的加入。给我留下的问题多于答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T00:38:49.143

关于用户查看自己的数据与管理员查看每个人的数据的问题，[请参阅我对类似问题的回答](https://stackoverflow.com/questions/13301090/seeing-only-your-own-data-in-grails/13301307#13301307)。

至于将用户与他们自己的数据相关联......如果数据应该属于某个用户，只需将用户域与所述数据相关联，就像您已经完成的那样，但稍作修改：

```
class SalesOrder {

   static belongsTo = [secUser : SecUser]

} 
```

然后将适当的映射添加到您的 SecUser 类：

```
class SecUser {

   static hasMany = [salesOrders : SalesOrder]

} 
```

然后，当您将数据发布到服务器时：

```
@Secured(['IS_AUTHENTICATED_REMEMBERED'])
def save() {

   def authenticatedUser = SecUser.findByUsername(springSecurityService.principal.username)
   def salesOrder = new SalesOrder(params)
   // this assumes you're SecUser and SalesOrder are a 1-to-many bidirectional association
   authenticatedUser.addToSalesOrders(salesOrder)
   authenticatedUser.save()
} 
```

无需将信息存储在隐藏字段中，因为控制器中可以使用相同的数据。脚手架是开始概念验证的好方法。但是，我不再使用脚手架了。