# StackOverflow 问答 14185000-14185999

# c# - Lambda 表达式 C# 未能转换为对象类型并因 ref 失败

> ID：14185007
> 
> 赞同：0
> 
> 时间：2013-01-06T17:58:30.397
> 
> 标签：c#, linq, lambda, expression

有这样的功能：

```
 private static void EncodeString(ref string str)
    {
        using (RLE inst_rle = new RLE())
        {
            string str_encoded = inst_rle.Encode(ref str);
            Console.WriteLine(

              "\r\nBase string ({0} chars): {1}\r\nAfter RLE-encoding ({2} chars): {3}\r\nCompression percentage: %{4}",
              str.Length, str, str_encoded.Length, str_encoded,
              () => { (100 * (str.Length - str.encoded.Length) / str.Length); }

                             );
        }
    } 
```

我记得这是 C# 中的一种 lambda 风格： () => { < action > ; }

但是遇到这样的错误：

*   *无法将 lambda 表达式转换为类型“对象”，因为它*
*   *只有赋值、调用、递增、递减和新对象表达式可以用作语句*
*   *不能在匿名方法、lambda 表达式或查询表达式中使用 ref 或 out 参数“str”*
*   *不能在匿名方法、lambda 表达式或查询表达式中使用 ref 或 out 参数“str”*

***如何在我的应用程序（控制台应用程序）中使用 C# EXACLTY 中的 Lambda 而无需明确使用***

***Delegate / Func<T>，喜欢在`() => { }`方式吗？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:01:46.460

我不太确定你为什么要在这里使用 lambda，看起来你想要：

```
Console.WriteLine(@"\r\nBase string ({0} chars): {1}\r\nAfter RLE-encoding
            (
             {2} chars): {3}\r\nCompression percentage: {4}",
             str.Length, str, str_encoded.Length, str_encoded,
             (100 / str.Length) * (str.Length / str_encoded.Length)
            ); 
```

正如评论指出的那样，您需要在格式字符串前面加上前缀，`@`因为它跨越多行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:11:03.560

我同意 Lee 的观点，但是当你真的想创建一个这样的 Lamba 并获得它的输出时，你需要明确地转换如下内容：

```
(Func<int>)(() => (100 / str.Length) * (str.Length / str_encoded.Length)))(); 
```

我在玩线程时这样做，而不是在生产代码中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:31:23.077

字符串常量可以在多个带有`@`前缀的代码行上定义，但是这样你`\r\n`就行不通了。因此，您可以将字符串片段添加在一起`+`以达到相同的效果：

```
private static void EncodeString(ref string str)
{
    using (RLE inst_rle = new RLE())
    {
        string str_encoded = inst_rle.Encode(ref str);
        Console.WriteLine("\r\nBase string ({0} chars): {1}\r\nAfter RLE-encoding" +
        "(" +
         "{2} chars): {3}\r\nCompression percentage: {4}",
         str.Length, str, str_encoded.Length, str_encoded,
         () => { (100 / str.Length) * (str.Length / str_encoded.Length);}
        );
    }
} 
```

# rest - 自链接在超媒体 API 中的重要性是什么？

> ID：14185011
> 
> 赞同：21
> 
> 时间：2013-01-06T17:58:44.403
> 
> 标签：rest, hateoas, hypermedia

我在 REST 上阅读的所有文章和书籍都重复了将“自我”相关链接添加到您的超媒体响应的重要性，但它们都对原因和用例有所了解。

为什么要添加自我链接，它有什么用处？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-06T18:40:27.450

主要原因是客户端（甚至某些服务器）没有将表示的位置与表示一起存储。例如，如果你`wget http://.../foo.json`，表示将被保存到磁盘，但获取它的 URI 不会。如果表示中没有嵌入“自我”链接，则会导致两个问题：

1.  文档中的相对链接可能不再具有解析的基础，因此将被“破坏”；和

2.  客户端将没有嵌入的概念，例如`PUT`如果他们修改文档，将文档返回到服务器的位置。少数客户独立维护此信息，但大多数客户不这样做。

重要的是要理解，表示可能在 HTTP 对话之外存在，甚至可能通过其他协议（电子邮件、FTP、书本等）传输。因此，经验丰富的媒体类型设计师通常会包含“自我”链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-06T20:12:56.993

返回资源时，它可能不是完整的表示。该`self`链接应提供一个 url 以访问该完整表示

例如

`GET /objects`

```
[
  {
    "name": "tech",
    "links": [
      "rel": "self",
      "href": "/objects/1"
    ]
  },
  {
    "name": "book",
    "links": [
      "rel": "self",
      "href": "/objects/2"
    ]
  }
] 
```

`GET /objects/1`

```
{
  "name": "tech",
  "ratio": 1,
  "precision": 2,
  "links": [
    {
      "rel": "self",
      "href": "/objects/1"
    }
  ]
} 
```

# xcode - Xcode 版本和内部版本号并提交到 iTunes Connect

> ID：14185015
> 
> 赞同：2
> 
> 时间：2013-01-06T17:59:12.517
> 
> 标签：xcode, versioning, app-store-connect

希望这是一个简单的问题，我正在努力了解 xCode 和 iTunes Connect 如何使用并检查 xCode 应用程序版本和内部版本号。此外，我正在处理一个从未正确管理内部版本号并且已经可以通过 iTunes 获得的遗留应用程序。

我想要做的是使用版本号，版本控制并希望版本号如下：

1.0.0 1.0.1 1.1.4 等等

每次发布内部构建时，我们都会增加构建号，它只是一个类似于 102 的数字，只会增加。

到目前为止，我的理解是，当我上传应用程序的新版本时，内部版本号必须大于以前的版本。但是这个过程是否考虑到版本号。所以....

版本：1.0.0 内部版本：100 <<<<< 这是 iTunes 的初始版本 版本：1.0.0 内部版本：101 <<<<< 为此，内部版本号必须大于以前的版本

版本：1.0.1 内部版本：001 <<<<< 这行得通吗，iTunes 会接受吗？

如果这不是它的工作方式，我假设无法重置版本和内部版本号，以便在提交到 iTunes 后它们可以正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T18:28:33.607

XCode 在目标属性的 General 选项卡中显示为 Build 实际上是 Long Version String，而它显示为 Version 的是 Short Version String。

当您向 iTunesConnect 提交更新时，版本和内部版本都必须高于以前的版本并在 AppStore 上构建。

从苹果开发者网站：

*   构建 - [info.plist 中的 CFBundleVersion](https://developer.apple.com/library/iOs/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-102364)
*   版本 - [info.plist 中的 CFBundleShortVersionString](https://developer.apple.com/library/iOs/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-111349)

版本是在 iTunes App Store 上显示的内容，而构建是只有开发人员和 iTunes Connect 才能看到的内容。

# asp.net-mvc - 在逗号分隔的列表中跨回发 asp.net mvc 保留数组

> ID：14185021
> 
> 赞同：3
> 
> 时间：2013-01-06T17:59:55.423
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试以下场景。

在初始 GET 中，我的控制器返回一个带有`string[]`属性的默认模型。

在视图中，我使用文本框显示此属性：

```
@Html.TextBoxFor(model => model.MyProperty) 
```

该数组显示为逗号分隔列表。伟大的！

问题是，当我回发时，列表以单个字符串数组的形式结束，所有项目都以逗号分隔在该字符串中。

有没有一种方法可以提供一个反序列化器（可能相当于 WPF 中的转换器），可以使它回到正确的数组？

我知道我也可以使用@Html.EditorFor(...)，但这会将我的数组呈现为我不想要的单独文本框的列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T11:11:19.260

您可以创建自定义模型绑定器来绑定字符串数组，如下所示：

```
public class StringArrayBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        string key = bindingContext.ModelName;
        ValueProviderResult val = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        if (val != null && string.IsNullOrEmpty(val.AttemptedValue) == false)
        {
            bindingContext.ModelState.SetModelValue(key, val);
            string incomingString = ((string[])val.RawValue)[0];

            var splitted = incomingString.Split(',');
            if (splitted.Length > 1)
            {
                return splitted;
            }
        }
        return null;
    }
} 
```

然后在应用程序启动时注册它`global.asax`：

```
ModelBinders.Binders[typeof(string[])] = new StringArrayBinder(); 
```

甚至更简单但可重用性较低的方法是：

```
public string[] MyStringPropertyArray { get; set; }

public string MyStringProperty
{
    get
    {
        if (MyStringPropertyArray != null)
            return string.Join(",", MyStringPropertyArray);
        return null;
    }
    set
    {
        if (!string.IsNullOrWhiteSpace(value))
        {
            MyStringPropertyArray = value.Split(',');
        }
        else
        {
            MyStringPropertyArray = null;
        }
    }
} 
```

在这里，您将绑定到`MyStringProperty`视图中。然后在您的业务代码中使用`MyStringPropertyArray`（填充来自 的值）。`MyStringProperty`

# html - 不显示所有行信息（仅当我按“查看”时）

> ID：14185027
> 
> 赞同：1
> 
> 时间：2013-01-06T18:00:31.347
> 
> 标签：html, rows, tabular

我有一个奇怪的问题！我做了一个简单的创建/删除笔记表单和一个脚本来查询它们。但是如果有人插入一个 100KM 的笔记并且表格显示了它就不会很漂亮。

我请您向我推荐一个仅显示该行的某些内容的脚本，其余的则在您按“查看全部”之类的内容时显示。例如 ：

![在此处输入图像描述](../Images/d28b4b73696390063b7379787767b5c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:12:24.727

您需要考虑截断内容字符串，这里有大量适用于基于 JavaScript 和 PHP 的解决方案的答案：

**JavaScript：** [用 javascript 缩短长字符串的聪明方法](https://stackoverflow.com/questions/1199352/smart-way-to-shorten-long-strings-with-javascript)
**PHP：** [用“...”正文缩短字符串](https://stackoverflow.com/questions/2122042/shorten-string-with-a-body)

因此，您首先显示截断的字符串，然后在完整视图中使用原始字符串。

根据示例中表格的设置方式，您还可以尝试使用 CSS 截断并添加省略号。

**CSS：** [http ://css-tricks.com/snippets/css/truncate-string-with-ellipsis/](http://css-tricks.com/snippets/css/truncate-string-with-ellipsis/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:28:14.707

好吧，我想你想要这样的东西：
[**Live jsfiddle**](http://jsfiddle.net/BlackSRC/tcu2Z/1/)

**js**

```
$(function()
{
    var maxShow = 50;
   $( ".holder" ).each(function() 
   {
       var txt = $(this).text();
       txt = txt.substr(0,maxShow)+' ...';
       $(this).prev().prev().text(txt);
   });
  $(".show").click(function()
  {
      var txt = $(this).next('span').text();
      $(this).parent().text(txt);
  });
}); 
```

**html**

```
<div class='txt'><span class='summery'></span><a href="#" class="show">view</a><span class='holder'> 0 I have a strange question ! I made a simple create/delete notes form and a script to query them all.But it will not be beautiful if someone inserts a 100KM note and the table shows it</span></div>
<div class='txt'><span class='summery'></span><a href="#" class="show">view</a><span class='holder'> 1 I have a strange question ! I made a simple create/delete notes form and a script to query them all.But it will not be beautiful if someone inserts a 100KM note and the table shows it</span></div>
<div class='txt'><span class='summery'></span><a href="#" class="show">view</a><span class='holder'> 2 I have a strange question ! I made a simple create/delete notes form and a script to query them all.But it will not be beautiful if someone inserts a 100KM note and the table shows it</span></div> 
```

**css**

```
.holder
{
  display:none;
} 
```

# jsf - EL 空运算符在 JSF 中是如何工作的？

> ID：14185031
> 
> 赞同：90
> 
> 时间：2013-01-06T18:00:39.023
> 
> 标签：jsf, el

在 JSF 中，可以使用 EL 空运算符渲染或不渲染组件

```
rendered="#{not empty myBean.myList}" 
```

据我了解，该运算符既可用作空检查，又可检查列表是否为空。

我想对我自己的自定义类的一些对象进行空检查，我需要实现哪些接口或接口的一部分？空算子兼容哪个接口？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-01-06T18:04:47.820

来自[EL 2.2 规范](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)（获取下面的“单击此处下载规范以进行评估”）：

> ## 1.10 空运算符 -`empty A`
> 
> 运算符是前缀运算符，`empty`可用于确定值是空还是空。
> 
> 评估`empty A`
> 
> *   如果`A`是`null`，则返回`true`
> *   否则，如果`A`是空字符串，则返回`true`
> *   否则，如果`A`是空数组，则返回`true`
> *   否则，如果`A`为空`Map`，则返回`true`
> *   否则，如果`A`为空`Collection`，则返回`true`
> *   否则返回`false`

因此，考虑到接口，它[`Collection`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)只能运行[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)。在你的情况下，我认为`Collection`是最好的选择。或者，如果它是一个类似 Javabean 的对象，那么`Map`. 无论哪种方式，在幕后，该[`isEmpty()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#isEmpty%28%29)方法都用于实际检查。在您不能或不想实现的接口方法上，您可以抛出`UnsupportedOperationException`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-07T18:51:58.737

使用 BalusC 的实现 Collection 的建议，我现在可以在我的扩展上使用非空运算符隐藏我的`p:dataTable`primefaces`dataModel``javax.faces.model.ListDataModel`

代码示例：

```
import java.io.Serializable;
import java.util.Collection;
import java.util.List;
import javax.faces.model.ListDataModel;
import org.primefaces.model.SelectableDataModel;

public class EntityDataModel extends ListDataModel<Entity> implements
        Collection<Entity>, SelectableDataModel<Entity>, Serializable {

    public EntityDataModel(List<Entity> data) { super(data); }

    @Override
    public Entity getRowData(String rowKey) {
        // In a real app, a more efficient way like a query by rowKey should be
        // implemented to deal with huge data
        List<Entity> entitys = (List<Entity>) getWrappedData();
        for (Entity entity : entitys) {
            if (Integer.toString(entity.getId()).equals(rowKey)) return entity;
        }
        return null;
    }

    @Override
    public Object getRowKey(Entity entity) {
        return entity.getId();
    }

    @Override
    public boolean isEmpty() {
        List<Entity> entity = (List<Entity>) getWrappedData();
        return (entity == null) || entity.isEmpty();
    }
    // ... other not implemented methods of Collection...
} 
```

# html - 将 input[type=text] 放在标签中在 Firefox 中的行为很奇怪（仅）

> ID：14185034
> 
> 赞同：-3
> 
> 时间：2013-01-06T18:01:09.890
> 
> 标签：html, firefox

看看这个样本：http: [//jsbin.com/imivek/1/edit](http://jsbin.com/imivek/1/edit)

单击作为标签一部分的文本字段在 Firefox 中的行为很奇怪（在 v17.0.1 中测试）：

*   单击它一次，它会在很短的时间内获得焦点，之后焦点将移动到单选按钮。
*   在彼此之后不久单击它两次将保持焦点。
*   通过其他方式（fe 选项卡）聚焦它可以正常工作并且符合预期。
*   处理文本字段的点击事件并防止它冒泡（`e.stopPropagation()`用 jQuery 术语）不会改变任何东西。

谁能解释这种行为并建议如何最好地解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:10:05.643

标签内可能只有一个表单控件。你有两个。您的 HTML 无效，因此在浏览器试图弥补您的错误时会出现奇怪的行为。

> 单击它一次，它会在很短的时间内获得焦点，之后焦点将移动到单选按钮。

你点击了标签。这会将焦点设置为单选按钮（因为标签似乎是它的标签）。

> 在彼此之后不久单击它两次将保持焦点。

可能是某种错误恢复

> 通过其他方式（fe 选项卡）聚焦它可以正常工作并且符合预期。

然后你没有点击标签

> 处理文本字段的点击事件并防止它冒泡（jQuery 术语中的 e.stopPropagation() ）不会改变任何东西。

它是本机功能，而不是脚本功能。

编写有效的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:10:17.610

为什么你有两个`<input>`在同一个`<label>`？你想做什么？标签应该绑定到**一个**输入元素并充当它的标题，这样当您单击它时，输入就会获得焦点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:44:44.150

这是一个 FF 错误 [https://bugzilla.mozilla.org/show_bug.cgi?id=213519](https://bugzilla.mozilla.org/show_bug.cgi?id=213519) 2003 年报告，仍未修复！

# jquery - jQuery - paddingTop 动画问题？

> ID：14185035
> 
> 赞同：1
> 
> 时间：2013-01-06T18:01:11.220
> 
> 标签：jquery, css, jquery-animate

所以，我正在为一个客户建立一个网站，当超链接悬停在上面时，我试图将它们向下推。paddingLeft 使用此方法，当我使用它时它会移动链接但是当我将值更改为“paddingTop”或“marginTop”时，我没有得到响应。我在这里想念什么？

[http://jsfiddle.net/Raylin/XLrBH/](http://jsfiddle.net/Raylin/XLrBH/)

对于那些只能说出问题所在的人，这是我的 jQ 代码：

```
$(document).ready(function(){
$(".sublink").hover(
    function(){
        $(this).stop().animate({paddingTop: "+=40px"},200);
    },
    function(){
        $(this).stop().animate({paddingTop: "0px"},200);
    });
}); 
```

前几天我刚刚学习了 HTML/CSS/jQuery，所以我相信这很简单。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:03:31.563

```
$(document).ready(function(){
$(".circle").hover(
    function(){
        $(this).stop().animate({paddingTop: "+=40px"},200);
    },
    function(){
        $(this).stop().animate({paddingTop: "0px"},200);
    });
}); 
```

将外部元素作为动画的“the”元素。

-- 在看这个动画的时候，我想你应该看看“+=40px”。它真的能满足你的需要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:50:56.100

为什么不试试这个：

```
$(document).ready(function(){
$(".sublink").hover(
    function(){
        $(this).stop().animate({top: "+=40px"},200);
    },
    function(){
        $(this).stop().animate({top: "0px"},200);
    });
}); 
```

这假设您将以下 CSS 属性添加到您的`.subLink`类中：

```
position: relative 
```

我没有测试它，但它应该没有任何借口。

希望能帮助到你。

# java - 在 Java 中动态更改 BorderLayout

> ID：14185037
> 
> 赞同：0
> 
> 时间：2013-01-06T18:01:15.803
> 
> 标签：java, user-interface, border-layout

我有一个带有 BorderLayout 的窗口，其中 JPanel 包含放在 CENTER 上的东西，大小为 800*250。我希望点击一个按钮，JPanel 移动到 NORTH，另一个 JPanel 位于 CENTER。我试过这个，但它只调整了我的窗口大小而没有做任何其他事情。

我试过这个，但它似乎不起作用。

```
public void actionPerformed(ActionEvent e) {
            frame.setPreferredSize(new Dimension(800,550));
            frame.removeAll();
            frame.add(northpanel, BorderLayout.NORTH);
            frame.add(southpanel, BorderLayout.CENTER);
            frame.getContentPane().repaint();
            frame.getContentPane().revalidate();
            frame.pack();
        } 
```

北面板之前设置在中心。

谢谢你。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:21:57.397

add() 和 remove() 方法被覆盖，因此它们在内容窗格上自动执行所有操作。请记住，JFrame 只是一个容器，重要的是您的内容窗格。removeAll() 方法不会像那样被覆盖。你应该做的是：

```
frame.getContentPane().removeAll(); 
```

您可以在 Oracle 网站上阅读更多信息 :)

[使用顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

# c++ - 使用来宾对象更改类中调用构造函数的顺序

> ID：14185038
> 
> 赞同：0
> 
> 时间：2013-01-06T18:01:19.953
> 
> 标签：c++, class, constructor

```
class a
{
   object guest;
}

a::a() : guest(required_argument)
{
} 
```

问题是我需要在创建类对象之后调用来宾的构造函数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T18:02:32.700

如果你想保持`guest`作为一个对象，不。

如果您可以随意将其设为指针，则可以对其使用延迟初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:11:01.520

真正的问题是*为什么*需要`guest`在构造函数之后调用`a`构造函数？

`guest`是 的一部分，因此在' 的构造函数*之后*`a`调用其构造函数**在术语上是矛盾的**：一个对象只有在其所有子对象都已完全构造时才完全构造，因此完成' 构造函数的执行意味着完成的构造函数。 *`a`**`a``guest`***

 ***当然，这并不意味着您不能只在 ' 的构造`guest`期间默认`a`构造并在之后为其分配不同的值，或者，如果您根本不希望`guest`在`a`' 的构造期间构造对象，则使用指针（更好if 智能指针）用于对`a`和之间的关联进行建模`object`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:28:01.327

*我想在之后*`guest`构造的原因是在构造. 在这种情况下，您可以将该功能外包到之前构造的单独类中。因此 *`host``host``guest``guest`*

 *```
class some_interface { /* some abstract functionality needed by guest::guest() */ };

class guest
{
public:
  guest(some_interface const&); // calls pure virtual functions of some_interface
  /* more stuff */
};

class host_interface : public some_interface 
{
  /* implements pure virtual methods of its base */
};

class host
{
  host_interface _interface;
  guest _guest;
public:
  host(...)
  : _interface(...)
  , _guest(_interface)
  {}
  /* more stuff */  
}; 
```

请注意，以下天真的实现将失败

```
class host : some_interface
{
  /* some_data */
  guest _guest;
public:
  host(...)
  : some_data(...)
  , _guest(*this)
  {}
  /* more stuff */
}; 
```

因为`this`在传递给时尚未构造`guest::guest()`，并且纯虚函数将被调用（我确实遇到过这个错误并得到*运行时*错误“调用纯虚函数”，即使编译器应该能够检测到这一点）。****

# java - 避免覆盖 Java 中的所有抽象方法

> ID：14185039
> 
> 赞同：2
> 
> 时间：2013-01-06T18:01:29.753
> 
> 标签：java, overriding, abstract-class

我想知道是否有任何方法可以避免实现接口或其他类中不必要的方法。
假设我有简单的类实现 `MouseListener`，而实际上我只需要一种方法`mousePressed( MouseEvent e)`来覆盖。但是，在这种情况下，我还必须覆盖接口中的所有其他方法，但像这样保持它们为空：

```
public void mouseExited( MouseEvent e) {}
public void mouseClicked( MouseEvent e) {}
public void mouseReleased( MouseEvent e) {}
public void mouseEntered( MouseEvent e) {} 
```

是否有任何棘手的解决方案可以仅覆盖我真正需要的方法，即使其他方法在接口/超类中是抽象的并且仍然保持我的类为非抽象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T18:03:44.660

扩展`MouseAdapter`. 它`MouseListener`通过对每种方法都不做任何事情来实现。所以你可以覆盖你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:09:45.317

JB Nizet 的解决方案很好，但顺便问一下，为什么会出现问题？使用像 Eclipse 这样的现代 IDE，您可以一键添加所有要实现的方法（源 > 覆盖/实现方法）。如果您使用适配器，这是实用的，但您不能扩展适配器以外的其他类。

# ember.js - 如何使用新路由器重新渲染应用程序模板？

> ID：14185040
> 
> 赞同：5
> 
> 时间：2013-01-06T18:01:33.620
> 
> 标签：ember.js

# 编码

我在新路由器上使用版本[4fcdbf2560 。](https://github.com/emberjs/ember.js/tree/4fcdbf256039e8ca8d2647050e0c9a71234c922c)

在我的应用程序中，用户可以通过身份验证或不通过身份验证。根据身份验证状态，呈现的模板将不同。

我通过重新定义以下函数`renderTemplate`来解决这个问题`ApplicationRoute`：

```
App.ApplicationRoute = Ember.Route.extend({
    renderTemplate: function() {
        this.render(App.authenticated() ? 'authenticated' : 'unauthenticated');
    }
}); 
```

我的路由器很简单：

```
App.Router.map(function(match) {
    match('/').to('index');

    match('/sign').to('sign', function(match) {
        match('/in').to('signIn');
    });

    match('/dashboard').to('dashboard');
}); 
```

`IndexRoute`只是在这里根据身份验证状态重定向用户：

```
App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo(App.authenticated() ? 'dashboard' : 'signIn');
    }
}); 
```

# 工作流程

1.  用户导航到`/`
2.  输入`ApplicationRoute`了，因为用户没有被认证，所以`unauthenticated`模板被渲染
3.  `IndexRoute`输入，因为用户未通过身份验证，所以重定向到`signIn`
4.  模板被`signIn`渲染到其父模板 ->`unauthenticated`模板
5.  用户登录成功，`route.transitionTo('dashboard')`被调用
6.  模板被`dashboard`渲染到其父模板 ->`unauthenticated`模板

# 问题

*   我的实施有什么问题？
*   为什么渲染模板`renderTemplate`时不调用该函数？`dashboard`
*   如何强制应用程序重新呈现其模板？

# 编辑 2013-01-07

我根据埃文的回答修改了我的代码。

我的应用程序模板现在看起来像这样：

```
{{#if isAuthenticated}}
    <h1>Authenticated</h1>
    {{outlet}}
{{else}}
    <h1>Unauthenticated</h1>
    {{outlet}}
{{/if}} 
```

当用户登陆应用程序页面时，由于他没有经过身份验证，因此呈现的是未经身份验证的块。一切都运行良好，除了没有任何东西渲染到`{{outlet}}`标签中......

但是当我的应用程序模板看起来像这样（=没有条件标签）时：

```
<h1>Unauthenticated</h1>
{{outlet}} 
```

...有用 ！所以我想知道是否`{{outlet}}`可以在条件标签之间插入标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:48:39.087

我认为在路由器中有这个逻辑可能是错误的；相反，这应该是 ApplicationController 的一部分。

由于 ember 会在应用程序状态更改时自动更新模板，因此您可以创建一个 ApplicationController 来跟踪身份验证状态

```
App.ApplicationController = Ember.Controller.extend({
    isAuthenticated: null
}); 
```

并像这样构建您的模板：

```
<script type="text/x-handlebars" data-template-name="application">
    {{ #if isAuthenticated }}
        You are now logged in
    {{ else }}
        Please Log In
    {{ /if }}
</script> 
```

现在您实际上不必担心手动更新/渲染模板。随着内部 (JS) 状态的变化，您的模板将自动更新以反映应用程序状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T23:22:56.537

[sly7_7 评论](https://stackoverflow.com/questions/14185040/how-to-re-render-application-template-with-new-router/#comment-19698380)就是答案。有关块内的插座，请参阅[github.com/emberjs/ember.js/pull/1671](http://github.com/emberjs/ember.js/pull/1671)。

这刚刚被合并到master中：[https ://github.com/emberjs/ember.js/pull/1671#issuecomment-11982451](https://github.com/emberjs/ember.js/pull/1671#issuecomment-11982451)

# java - Java 最佳实践/标准绘图实践

> ID：14185047
> 
> 赞同：-1
> 
> 时间：2013-01-06T18:02:18.397
> 
> 标签：java, swing, graphics, standards, graphics2d

在 java 中绘制图形的最佳实践或标准是什么？我的 Jframe 带有一个 Jpanel 和一个包含多边形（形状）的类（foo）。如果我想显示类的形状，我应该调用 foo.draw（将 graphics2d 和其他一些东西传递给它）并让它自己绘制（我认为这将是封装？我认为这是首选？）或者做所有的绘图在我的 drawScreen() 方法中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:01:43.623

如果 Foo 不应该与任何其他图形重叠，例如它是一个标签或按钮，那么它肯定应该绘制自己。我建议它扩展 JComponent，实现 paintComponent()，并使用 LayoutManager 等添加。

如果 Foo 可以与其他图形重叠（例如，这是一些太空游戏，而多边形是一颗快速移动的小行星，正朝着地球前进），那么事情就会变得更加棘手。我仍然认为最好是 Foo 知道如何将自己绘制到 Graphics，但您可能不想扩展 JComponent。

选项 1：扩展 JComponent 并实现 paintComponent，但请注意在 javadocs 中这不是“真正的”JComponent，并且它永远不会使用 LayoutManager 添加。您甚至可以更改 addNotify() 以引发异常以防止这种情况发生。

选项 2：让 Foo 实现 Icon - 一个用于轻量级绘图的漂亮小界面。

这仍然引出了问题，需要*其他东西*告诉它自己绘制。所以有些东西需要保留这些 JComponents 或 Icons 的列表并告诉他们绘制......

# octave - 无法从 *.m 文件中读取以前保存的数据

> ID：14185050
> 
> 赞同：1
> 
> 时间：2013-01-06T18:02:26.677
> 
> 标签：octave

```
[layer1 layer2 layer3] = trainNeuralNetwork4L(tlab, tvec, clab, cvec, 150, 100, 10);
save layerOne100SECOND.m layer1
save layerTwo100SECOND.m layer2
save layerThree100SECOND.m layer3
[efficiency errorsMatrix] = testClassifier4L(layer1, layer2, layer3, 150, 100, 10, tstv, tstl)
1 min 55 s
efficiency =  0.96150
[....]
load "layerTwo100SECOND.m"
layerTwo100SECOND
parse error near line 6 of file /home/yob/studies/rob/lab5/src/layerTwo100SECOND.m

 syntax error

>>> 0.3555228566483329 1.434063629132475 0.3947326168010625 -0.2081288665103496 2.116026824600183 -3.72004826748463 -5.971912014167303 -1.831568668193203 -0.5698533706125537 -0.302019433067382 2.105773052363495 -1.386054572212726 1.379784981138861 2.086342965563345 1.686560884521974 1.501297857975125 5.491292848790862 -3.068496819708705 1.709375867569474 -0.0007631747244577478 -3.408706829842817 3.633531634060732 -4.848485685095641 -7.071386223304461 1.005495674207059 1.729698733795992 1.332654214742491 -2.757799109392227 0.5703177663227227 -3.962183321109198 -1.862612684812663 0.002426506616464667 -1.0133423788506 0.9856584491014603 3.261391305445486 -0.238792116035831 7.213403195852512 -0.4550088635822298 2.014786513359268 5.439781417403554 -1.780067076293333 -1.141234270367437 -3.716379329290984 1.329603499392993 0.6289460687541696 1.38704906311103 -1.799460630680088 -1.231927489757737 -1.199171465361949 6.464325931161664 0.7819466841352927 1.518220081499355 -0.3605511334486079 6.646043807207327 -1.885519415534916 1.164993883529136 -0.6867734922571105 -3.487015662787853 0.6052594571214193 0.9747958246654298 -6.681621035920442 6.539828816493673 0.4174688104699146 1.804835542540412 3.099980655618463 0.1957057586983393 -0.5199262355448695 -0.05556003295310553 0.5458621853042805 4.053727148988344 5.08596174444348 -4.4719975219626 4.718638484049811 4.579389030123606 -0.3683947372431971 0.9758069969974679 0.4742051227060113 6.761326112144753 0.9816521216523206 1.790072342537753 0.4513686207416066 -2.880053219384659 -3.256083938937911 3.099498881741825 -0.4967119404782309 -0.6140345297878478 -0.9933076418596357 7.522343253108136 4.93675021253316 -2.693878828387868 -1.358775970578509 -0.7940899801569826 4.867002040829598 4.418439759567837 -2.014761152547027 0.2349575211823655 -4.494720934106189 -2.674441246174409 -0.8495958842163256 0.1921793737146104
                                   ^ 
```

为什么无法使用以前保存的数据？有没有办法再使用一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:10:20.877

好的，我处理了它。我不得不打电话：`load -ascii filename`。

# c# - Linq to SQL SubmitChanges 仅适用于特定表

> ID：14185051
> 
> 赞同：1
> 
> 时间：2013-01-06T18:02:30.773
> 
> 标签：c#, .net, sql, sql-server, linq-to-sql

我一直在使用 linq to sql 一段时间，经常遇到这种类型的问题....

例如，我有 2 个数据库表

-表：发票（“Id”int自动增量，“InvoiceDate”日期时间）

-表：InvoiceItems ("Id" int auto-increment, "InvoiceId" int (FK), "SomeReference" varchar(50))

“SomeReference”字段包含一个值，它是来自父 Invoice 记录的 Id 和一些随机字符的组合。例如。“145AHTL”

在我可以设置 SomeReference 的值之前，我需要知道 Invoice Id 的值，但这只有在保存到数据库时才会填充。我在同一个 Linq to SQl DB 上下文中有父记录和子记录，但我只想对父 Invoice 记录执行“SubmitChanges”，这样我就可以在子记录中填充 SomeReference。我不想在设置 SomeReference 之前将子 InvoiceItem 记录保存到数据库中。

如何使用 Linq to Sql 实现这一点？

我知道 linq to sql 使用“工作单元”的想法保存到数据库，但我不明白如何避免在尚未准备好保存记录时将它们不必要地保存到数据库。如果没有办法解决这个问题，那么为什么开发人员还要使用 linq to sql，因为这似乎是一个巨大的缺点？

编辑：应该注意，这个例子只是我想出来帮助描述我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:12:37.803

你不能。不是这样。这是唯一的方法（linq会费不支持序列）。残酷地说 - 你必须修正你的逻辑。发票的 ID 不是参考字段。它不应该永远是数字。这是一个逻辑字段，应由您的逻辑在 Id 之外处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:37:25.337

您的示例可以完成，但是您需要忘记 SQL 和数据库，而是以 ORM 方式思考。

您的示例中需要解决两个问题

**首先同时插入master和detail**

其工作原理的伪代码：

```
using (var dc = new datacontext())

var master = new masterentity;
master.somedata = "data";
dc.tb_master.InsertOnSumbut(master)
var detail = new detailentity
detail.tb_master = master
dc.tb_detail.InsertOnSubmit(detail)
Submitchanges() 
```

因此，您将实体分配给彼此，而不是键。

第二：**SomeReference**

然而，这第一部分没有给你 somereference 字段，只是正确设置了外键。

您的 somereference 字段包含冗余数据（不是必需的），因此需要解决。

somereference 是一个字符串+ ID。

因此，您将字符串部分存储在数据库中的列中（仅此而已），并使用部分类实现自定义属性 somereference。

```
 public partial class tb_detail
    {
        public string somereference
        {
             get
            {
               return _id.ToString() + _somestring;
}}} 
```

# wpf - 如何在应用程序中使用 HRTF

> ID：14185054
> 
> 赞同：1
> 
> 时间：2013-01-06T18:02:41.563
> 
> 标签：wpf, database, audio

我正在尝试将 HRTF 合并到 wpf 应用程序中。我正在使用 MIT Kemar HRTF 数据集，但不知道如何使用它所包含的 wav 文件。我得到了角度和仰角，但是如何使用 wav 文件使我的音频文件听起来像是来自特定方向？

如果有任何更简单的方法在 wpf 中使用 HRTF，那当然会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T12:27:25.310

您需要对输入信号进行一些复杂的卷积。这里很难解释，所以请阅读一些与 MIT 数据集相关的科学文章。我们有一个学生在这里实现它们，所以如果你不理解它，可以考虑聘请具有信号/音频处理技能的学术背景的人来做。

我不熟悉 wpf 的具体实现，但您可能会寻找使用相同原理的基于硬件的解决方案。

# java - iframe over applet 闪烁

> ID：14185056
> 
> 赞同：1
> 
> 时间：2013-01-06T18:03:02.110
> 
> 标签：java, javascript, html, css, applet

我正在使用 iFrame 在我的在线游戏中通过我的 Applet 显示内容。

它在 Safari、Chrome、Firefox、Opera 等中完美运行。但在 Windows 上的 Internet Explorer 中却始终没有。

当 iframe 在小程序上打开时，内容变成“闪烁”/“闪烁”，就像小程序更新很多一样，但它没有。

我能做些什么？我正在使用这个：

```
<applet id="applet" code="main.AvatarClient.class" archive="qqqqqAvatarClient.jar" name="Chat" width="760" height="582" scriptable="true" MAYSCRIPT="true" >
   <param name="cache_option" value="YES" / >
   <param name="localization" value="locDK/" />
   <param name="userName" value="<?=$user?>" />
   <param name="password" value="<?=$pass?>" /> 
```

以及 iframe 所在的叠加层：

```
 <div class="add-block qw no-rounded-borders" id="wo" style="position:absolute;left:756px;margin-top:-30px;z-index:99999999999999999999999999999999999999999999999999999999999999;height:380px;width:495px;display:none;">   
            <iframe id="my" src="loading.php" frameborder="0" height="380" width="496" scrolling="no" style="z-index:9999999999999999999999999999999999;position:absolute"></iframe>
 </div> 
```

# jquery - 如何保持隐藏的div显示？

> ID：14185059
> 
> 赞同：0
> 
> 时间：2013-01-06T18:03:06.710
> 
> 标签：jquery, forms, radio-button, show-hide, hidden

我有这个用于单选框的 jquery 片段，我说如果单击了属于此类且具有此 ID 的单选框，则显示此隐藏的 div。问题是，当您刷新页面时，仍然单击单选框但隐藏的 div 不显示。它仅显示我是否单击不同的单选框，然后单击返回到单击的原始单选框。

这是我正在使用的 javascript：

```
$(function(){     
    $('.display').click(function(){
        if ($(this).attr("id") == "rows"){
            $('.section').show();
        } else {
            $('.section').hide();
        }
    });
}); 
```

以下是我从中获取这段 javascript 的示例，向您展示了一个工作示例。[工作示例](http://jsbin.com/ivozo5/1/edit)

现在，如果这是一个表单，并且您单击了 offer 2，然后保存了表单并返回到页面，那么隐藏的 div 将不会显示。只要始终单击该单选框，我如何让它显示 div？

**注意：**示例使用jquery 1.5.1，我使用的是最新版本的jquery。

应该注意的是，如何保存单选框并不重要，单选框用户选择被保存，因此在页面刷新时，用户选择的单选框仍然“选中”。然后应该显示隐藏的 div - 但从来没有。

仅当我选择不同的单选框然后返回到最初选择的单选框时才会显示。请参阅上面的工作示例以了解当您选择单选框时隐藏的 div 是如何显示的。

**如果选择了单选框，我希望始终显示此 div。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:26:03.913

```
$(function(){     

    // your function
    $('.display').click(function(){
        if ($(this).attr("id") === "rows"){
            $('.section').show();
        } else {
            $('.section').hide();
        }
    });

    // initial check
    if ($('input:radio:checked').attr('id') === "rows") {
        $('.section').show();
    }

}); 
```

如果页面上有一组以上的单选按钮，则需要向 jQuery 选择器添加一个标识符。您可以像这样使用输入字段的名称：

```
$('input[name=myradiobutton]:radio:checked') 
```

# android - 使用 OpenGL ES 2.0 的二维三角形

> ID：14185062
> 
> 赞同：0
> 
> 时间：2013-01-06T18:03:15.730
> 
> 标签：android, 2d, opengl-es-2.0

**编辑 2：**查看[此 GitHub 项目的](https://github.com/ibraim-gm/opengles2-2d-demos)[Triangle2d 示例](https://github.com/ibraim-gm/opengles2-2d-demos/blob/master/src/ibraim/opengles2/Triangle2dActivity.java)以获得完整的工作示例。

**编辑：**有关正交矩阵如何工作的很好解释的链接，请参阅[接受的答案。](https://stackoverflow.com/a/14203877/851863)最后，我稍微调整了提供的代码：

```
 float[] mvp = {
     2f/width,   0f,         0f, 0f,
     0f,        -2f/height,  0f, 0f,
     0f,         0f,         0f, 0f,
    -1f,         1f,         0f, 1f
   }; 
```

请注意，我的 z 固定为 0，w 固定为 1。这个矩阵使原点 (0,0) 位于屏幕的左下角；如果您希望原点位于左上角，请尝试：

```
 float[] mvp = {
     2f/width,   0f,         0f, 0f,
     0f,         2f/height,  0f, 0f,
     0f,         0f,         0f, 0f,
    -1f,        -1f,         0f, 1f
   }; 
```

另一个问题是`GLES20.glUniformMatrix4fv`我改成的电话：

```
FloatBuffer b = ByteBuffer.allocateDirect(mvp.length * 4).order(ByteOrder.nativeOrder()).asFloatBuffer();
b.put(mvp).position(0);
GLES20.glUniformMatrix4fv(uMvpPos, b.limit() / mvp.length, false, b); 
```

如果你想弄乱这个，试试[这个在线计算器](http://www.bluebit.gr/matrix-calculator/matrix_multiplication.aspx)。请记住，**您的 sorce 文件**中的行将是**计算器中的列**。

**原始问题：** 我正在尝试在 android 上使用 OpenGLES 2.0 绘制 2d 三角形，但到目前为止，并没有多大成功。这些是我的着色器：

```
(Vertex shader)
uniform mat4    uMvp;
attribute vec3 aPosition;
attribute vec3 aColor;
varying vec4 vColor;
void main() {
  vColor = vec4(aColor.xyz, 1.0);
  vec4 position = vec4(aPosition.xyz, 1.0);
  gl_Position = uMvp * position;
};

(Fragment shader)
precision mediump float;
varying vec4 vColor;
void main(void)
{
  gl_FragColor = vColor;
}; 
```

然后，在 GLSurfaceView.Renderer 的 onSurfaceChanged 方法中，我放了以下内容：

```
public void onSurfaceChanged(GL10 gl, int width, int height)
{
  // here I load and compile the shaders and link the program.
  // in the end, I use GLES20.glUseProgram(programHandle);
  // (code omitted)

  // create the matrix for the uniform
  int uMvpPos = GLES20.glGetUniformLocation(programHandle, "uMvp");
  float[] mvp = {width, 0f, 0f, 0f,
                 0f, -height, 0f, 0f,
                 0f, 0f, -2f, 0f,
                 -1f, 1, -1f, 1};
  GLES20.glUniformMatrix4fv(uMvpPos, mvp.length * 4, false, mvp, 0);

  // set viewport and clear color to white
  GLES20.glViewport(0, 0, width, height);
  GLES20.glClearColor(1f, 1f, 1f,1.0f);
} 
```

[我使用了这个问题](https://gamedev.stackexchange.com/questions/4309/opengl-es-2-0-setting-up-2d-projection/4312#4312)上显示的矩阵值。我的意图是以与画布相同的方式使用坐标：屏幕左上角的 (0,0) 和右下角的 (width, height)。

最后但同样重要的是，这是 onDrawFrame 的代码：

```
public void onDrawFrame(GL10 gl)
{
  int aPos = GLES20.glGetAttribLocation(programHandle,"aPosition");
  int aColor = GLES20.glGetAttribLocation(programHandle,"aColor");

  // assuming I correctly set up my coordinate system,
  // these are the triangle coordinates and color
  float[] data =
      {
        // XYZ, RGB
        100f, 100f, 0f,
        1f, 0f, 0f,

        50f, 50f, 0f,
        1f, 0f, 0f,

        150f, 50f, 0f,
        1f, 0f, 0f,
      };

  // put all my data into a float buffer
  // the '* 4' is because a float has 4 bytes
  FloatBuffer dataVertex = ByteBuffer.allocateDirect(data.length * 4).order(ByteOrder.nativeOrder()).asFloatBuffer();
  dataVertex.put(data).position(0);

  // set the POSITION values
  // attribute, dataSize(number of elements), data type, normalized?, size(bytes), data
  GLES20.glEnableVertexAttribArray(aPos);
  GLES20.glVertexAttribPointer(aPos, 3, GLES20.GL_FLOAT, false, 6 * 4, dataVertex);

  // set the COLOR values
  dataVertex.position(3); // offset
  GLES20.glEnableVertexAttribArray(aColor);
  GLES20.glVertexAttribPointer(aColor, 3, GLES20.GL_FLOAT, false, 6 * 4, dataVertex);

  // put a white background
  GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

  // and finally draw the triangle!
  GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 3);
} 
```

最终结果是......一个无聊的白色屏幕，没有三角形。我想我犯了一个非常简单的错误，但我无法发现它。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:56:06.477

您的正交投影矩阵是错误的。 [正交投影定义为](http://www.songho.ca/opengl/gl_projectionmatrix.html)（按列主要顺序）：

```
2/(r-l), 0, 0, 0,
0, 2/(t-b), 0, 0,
0, 0, 2/(f-n), 0,
(r+l)/(l-r), (t+b)/(b-t), (f+n)/(n-f), 1 
```

在你的情况下`r=0, l=width, t=height, b=0, f=1, n=0`，你得到：

```
-2/width, 0, 0, 0,
0, 2/height, 0, 0,
0, 0, 2, 0,
1, -1, -1, 1 
```

# python - Django ModelForm 和 Model 实例保存方法的区别

> ID：14185064
> 
> 赞同：5
> 
> 时间：2013-01-06T18:03:25.417
> 
> 标签：python, django, modelform, django-forms

我试图了解 Django 的 ModelForm 保存方法和直接保存 Model 实例之间的区别。

就个人而言，我发现直接保存更直观，更清楚地显示数据何时保存。另外，如果我需要在保存之前修改实例，那么我必须使用模型保存方法，正如 Django 文档[在此处](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#the-save-method)解释的那样。

那么，一旦表单被验证，有什么区别呢？如果表单使用多个模型或其他更复杂的用例，会有区别吗？

如果这很重要，我正在使用 Django 1.4 版。下面是一些代码，显示了我如何倾向于保存经过验证的表单数据。

提前致谢！

```
# models.py
class Project(models.Model):
    project_name = models.CharField(unique=True, null=False, blank=False)

# views.py
def add_project(request):
    if request.method == 'POST':
        project = Project()
        form = ProjectForm(request.POST, instance=project)

        if form.is_valid():
            project.save() ### <-- project.save() vs form.save() ###

            return HttpResponseRedirect(reverse('view_project', args=(project.id,)))
    else:
        form = ProjectForm()

    return render_to_response(
        'add_project.html',
        {
            'form': form,
        },
        context_instance=RequestContext(request)
    )

# forms.py
class ProjectForm(ModelForm):
    class Meta:
        model = Project 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T18:50:18.460

在您拥有的评论行中，`project.save()`根本不会做任何事情。该实例尚未使用表单数据更新，它只是您之前创建的两行空实例。更新现有实例的唯一方法是保存其表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T21:33:09.080

`ModelForm.save()`返回从放入表单的数据中保存`Model.save()`的对象，从初始化对象的数据或创建后设置的值返回对象。因此，当从用户在表单上输入的内容中获取数据到持久对象时，调用`ModelForm.save()`比自己验证数据、初始化对象然后保存它更有意义，因为所有这些工作由`ModelForm`.

# javascript - 使用 javascript 显示/隐藏多个类

> ID：14185065
> 
> 赞同：-1
> 
> 时间：2013-01-06T18:03:27.680
> 
> 标签：javascript, class, show-hide

> **可能重复：**
> [在纯 JavaScript 中删除/添加类的解决方案是什么？](https://stackoverflow.com/questions/6787383/what-is-the-solution-to-remove-add-a-class-in-pure-javascript)

首先请原谅似乎是一个简单的 javascript 问题，我刚刚开始掌握该语言。我看过很多关于按类或 id 显示和隐藏内容的帖子，但它们似乎都一次只适用于一个。我想一次更改三个类，显示更改取决于用户已准备好单击的链接。我知道令人困惑的解释，但我的代码示例如下。

我正在构建一个包含一系列缩略图的图片库，这些缩略图都分配了类；`.photo`,`.print`和`.logo`. 希望有四个“按钮”；照片，打印，标志和显示所有。当用户单击“照片”时，代码会将 .photo 设置为`display:block`，`.print`并将 .logo 设置为`display:none`。当用户单击“打印”时，代码会将 .print 设置为`display:block`，并将 .photo 和 .logo 设置为`display:none`。当用户点击“logo”时，代码会将 .logo 设置为`display:block`，并将 .photo 和 .print 设置为`display:none`。显然，当用户单击“全部显示”时，所有类都设置为`display:block`.

```
<div id="menu">
<ul class"toplevel">
<li id="photoselect"><a href="photo.html">Photography</a></li>
<li id="logoselect"><a href="logo.html">Print</a></li>
<li id="printselect"><a href="print.html">Logo</a></li>
</ul>
</div>
<div id="content">
<a href="photo/photo01.jpg" class="" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb photo" src="photo/photo01.jpg"></a>
<a href="photo/photo02.jpg" class="" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb photo" src="photo/photo02.jpg"></a>
<a href="photo/photo03.jpg" class="" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb print" src="photo/photo03.jpg"></a>
<a href="photo/photo04.jpg" class="" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb print" src="photo/photo04.jpg"></a>
<a href="photo/photo05.jpg" class="" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb logo" src="photo/photo05.jpg"></a>
<a href="photo/photo06.jpg" class="" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb logo" src="photo/photo06.jpg"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:22:13.827

或者您可以利用 css3（对于支持它的浏览器）

```
<!doctype html>
<html>
<head>
<style>
#content > input.hidden{ display:none; }
#content > a{ display:none; }
#po:checked ~ a.photo{ display:block; }
#pi:checked ~ a.print{ display:block; }
#lo:checked ~ a.logo{ display:block; }
#al:checked ~ a{ display:block; }
</style>
</head>
<body>
<div id="menu">
<ul class"toplevel">
<li><label for="po">Photography</label></li>
<li><label for="pi">Print</label></li>
<li><label for="lo">Logo</label></li>
<li><label for="al">All</label></li>
</ul>
</div>
<div id="content">
<input type="radio" name="bfc" id="po" class="hidden" />
<input type="radio" name="bfc" id="pi" class="hidden" />
<input type="radio" name="bfc" id="lo" class="hidden" />
<input type="radio" name="bfc" id="al" class="hidden" />
<a href="photo/photo01.jpg" class="photo" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb" src="photo/photo01.jpg"></a>
<a href="photo/photo02.jpg" class="photo" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb" src="photo/photo02.jpg"></a>
<a href="photo/photo03.jpg" class="print" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb" src="photo/photo03.jpg"></a>
<a href="photo/photo04.jpg" class="print" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb" src="photo/photo04.jpg"></a>
<a href="photo/photo05.jpg" class="logo" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb" src="photo/photo05.jpg"></a>
<a href="photo/photo06.jpg" class="logo" rel="lightbox" title="Caption from the anchor's title attribute"><img class="thumb" src="photo/photo06.jpg"></a>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:37:53.313

只是为了让您了解如何在没有任何库（以及您发布的 HTML）的情况下执行此操作，这是一种基本的方法：

1.  在要响应`click`事件的链接上添加事件侦听器
2.  单击时，浏览所有匹配元素并更改其样式

缓存你的`photos` `prints`和是很好的，`logos`这样你就不必在每次点击时查询它们。

```
var content = document.getElementById('content'); 
var photos = content.getElementsByClassName('photo');
var prints = content.getElementsByClassName('print');
var logos = content.getElementsByClassName('logo');

function changeDisplay(elements, display) {
  var i = 0, l = elements.length;
  for( ; i < l; i++) {
    elements[i].style.display = display;
  }
}

document.getElementById('photoselect').addEventListener('click', function (e) {
  changeDisplay(prints, 'none');
  changeDisplay(logos, 'none');
  changeDisplay(photos, 'block');
}, false); 
```

# spring - spring security:intercept-url 模式访问="#id == 1

> ID：14185070
> 
> 赞同：4
> 
> 时间：2013-01-06T18:03:50.383
> 
> 标签：spring, spring-mvc, spring-security

我的项目是 iam spring security 3.1.3 和 mvc 3.2

我也想允许路径中的用户 ID 中的 url 与主要用户 ID 匹配

```
 <security:intercept-url pattern="/user/{id}/edit" access="#id == principal.userId"/> 
```

http use-expressions 它设置为 true 并且当 try principal.userId == 1 时它可以工作，但我需要使用从 url 中提取的值。

我已经尝试了所有可能的组合。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T15:38:49.813

这是不可能的。但还有另一种方式。您可以定义自己的 Web 表达式，负责从 URL 中提取 id 参数。它可能看起来像这样：

```
<security:intercept-url pattern="/user/{id}/edit" access="getIdUrlPathParameter() == principal.userId"/> 
```

为此，您需要：
1\. 添加扩展**WebSecurityExpressionRoot**
的 CustomWebSecurityExpressionRoot 2\. 添加 getIdUrlPathParameter() 方法。它将有权访问 HttpServletRequest 对象。
3\. 定义扩展**DefaultWebSecurityExpressionHandler**的 CustomWebSecurityExpressionHandler 。覆盖 createSecurityExpressionRoot 方法 abd 在此处使用您的 CustomWebSecurityExpressionRoot。
4\. 定义自定义访问决策管理器（下面的 xml） 5.通过 access-decision-manager-ref 属性将
其注入您的**http元素**

```
<security:http access-decision-manager-ref="customAccessDecisionManagerBean" >
    <security:intercept-url pattern="/user/{id}/edit" access="getIdUrlPathParameter() == principal.userId"/>
</security:http>
<bean id="customWebSecurityExpressionHandler" class="com.domain.security.CustomWebSecurityExpressionHandler"/>
<bean id="customAccessDecisionManagerBean" class="org.springframework.security.access.vote.AffirmativeBased">
    <property name="decisionVoters">
        <list>
            <bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
                <property name="expressionHandler" ref="customWebSecurityExpressionHandler" />
            </bean>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T22:03:57.467

Spring Security[无法做到](http://forum.springsource.org/showthread.php?130413-Web-Security-Expressions-and-PathVariables&p=425360#post425360)这一点。

# php - 根据注册日期每月更新数据库总和

> ID：14185072
> 
> 赞同：0
> 
> 时间：2013-01-06T18:04:13.513
> 
> 标签：php, sql, database

需要帮助为数据库编写函数。我想根据会员的注册日期跟踪每个月会员订单的总成本。因此，如果有人在月中注册，该函数应该在他们的注册日期上增加 30 天，并将该期间的销售额汇总并放入数据库中。然后显示在用户页面上。使用 mysql 函数（暂时不是 PDO 或 mysqli）。

就像是：

```
<?php
     $query = ("SELECT SUM(cost) FROM memberOrders WHERE 
              memberNumber='$memberNumber' GROUP BY signupdate+30days");
?> 
```

但它不能只是 30 天……应该是 +30、+60、+90……这就是我坚持的部分。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:35:26.147

计算 PHP 中的开始/结束日期并使用子查询：

```
SELECT SUM(cost) FROM 
      (Select cost, membernumber from memberOrders WHERE 
      memberNumber='$memberNumber' and date >= '$startdate' and date <= '$enddate' 
      GROUP BY substr(date, 7))
GRoup by membernumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:49:29.407

假设您在 中同时拥有注册日期和订单日期`MemberOrders`，以下将返回所有有订单的月份：

```
SELECT datediff(orderdate, signupdate, interval month) as MonthsAfter,
       SUM(cost) as MonthCost
FROM memberOrders
WHERE memberNumber='$memberNumber'
GROUP BY datediff(orderdate, signupdate, interval month) 
```

如果您所有月份都有 30 天，您可以执行以下操作：

```
SELECT floor(datediff(orderdate, signupdate, interval day)/30) as Months,
       SUM(cost) as MonthCost
FROM memberOrders
WHERE memberNumber='$memberNumber'
GROUP BY floor(datediff(orderdate, signupdate, interval day)/30) 
```

注意：这两个都将“0”分配给注册后的第一个月。`+1`如果您想从 1 开始，请添加。

# javascript - JQuery .prop(checked,true) 未将其他单选按钮设置为 false

> ID：14185078
> 
> 赞同：1
> 
> 时间：2013-01-06T18:04:37.407
> 
> 标签：javascript, jquery

我有一个单选按钮列表，我根据用户从不同列表中的选择以编程方式更新它们。此代码正确找到与所选项目匹配的单选按钮并选择它，但它不会取消选择先前选择的单选按钮。

```
$('#major_groups input[type=radio]').each(function(){
        if($(this).attr("value") == group_name){
            $(this).prop("checked",true).checkboxradio('refresh');
        }
}); 
```

major_groups div 中的所有单选按钮都具有相同的名称，所以我认为选择一个会取消选择其他按钮。我通过再次循环按钮并刷新所有按钮来使其工作，但这似乎效率低下。

另外，会`.prop("checked",true)`触发更改事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:07:41.860

在单选按钮上触发点击事件怎么样，如下所示：

```
$('#major_groups input[type=radio]').each(function(){
    if($(this).attr("value") == group_name){
        $(this).click();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:30:34.723

您的每个循环只会在具有特定值的收音机上调用刷新，而不会在同一组中的其他人上调用。该组的实际输入将自动取消选中，但您的插件将无法识别被取消选择的输入，除非您也刷新它们。

试试这个：

```
var $radios=$('#major_groups input[type=radio]');
/* first check the appropriate radio*/
var $radioToUpate=$radios.filter(function(){
        return this.value=group_name;       
}).prop("checked",true);
/* then refresh all radios with same name*/
$radios.filter('[name="'+ $radioToUpate.attr('name') +'"]').checkboxradio('refresh'); 
```

插件文档的链接可能有助于查看插件是否具有处理可能照顾整个组的属性更改的方法

# iphone - 在iphone中加载文件时如何更改目标c中html文件的内容

> ID：14185083
> 
> 赞同：-2
> 
> 时间：2013-01-06T18:04:58.357
> 
> 标签：iphone, objective-c

嗨，我正在我的 webview 中加载谷歌地图街景，我想在 uitextfield 中输入位置它应该更改 html 文件的 lat long 怎么能做到这是 html 文件的代码

```
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Embedded StreetView</title>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      function initialize() {
        var bryantPark = new google.maps.LatLng(37.869260, -122.254811);
        var panoramaOptions = {
          position:bryantPark,
          pov: {
            heading: 165,
            pitch:0,
            zoom:1
          }
        };
        var myPano = new google.maps.StreetViewPanorama(document.getElementById('pano'), panoramaOptions);
        myPano.setVisible(true);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="pano" style="width: 425px; height: 240px"></div>
  </body>
</html> 
```

我在 webview 中加载这个 html 文件，然后我想在我的 uitextfield 中传递地址后更改 lat long 但我不知道如何在运行时更改 html 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:13:43.780

您可以使用 javascript 更改它。例如，为了通过编写以下代码将新段落添加到正文中：

```
NSString *js = @"document.body.appendChild(document.createElement(\"p\"));";
[webView stringByEvaluatingJavaScriptFromString:js]; 
```

# hibernate - hibernate.TransientObjectException:object references an unsaved transient instance - 在刷新之前保存瞬态实例 - 在休眠升级之后

> ID：14185084
> 
> 赞同：1
> 
> 时间：2013-01-06T18:05:05.387
> 
> 标签：hibernate, cascade

升级到休眠 3.6.0.FINAL 后出现错误，但它正在使用 3.3.2.GA

我的问题类似于[https://forum.hibernate.org/viewtopic.php?p=2452617](https://forum.hibernate.org/viewtopic.php?p=2452617)

在这种情况下，他们设置了 cascade="all" 来解决问题。

但就我而言，我不想更新引用的实体。我没有双向关系，它只是多对一。此处发布的大多数类似问题都建议全部进行级联，但就我而言，它不想级联。

我的映射

```
<class name="org.hmil.ams.com.model.MyUserDetails" table="CMUPMST_TB">
        <id name="username" column="UPMST_USER_NAME" type="java.lang.String"
            unsaved-value="0">
            <generator class="assigned" />
        </id>
        <property name="password" column="UPMST_USER_PWD" type="java.lang.String"
            not-null="true" />
        <property name="UPMST_ROLE_ID" type="long" not-null="true" />

        <many-to-one name="UPMST_ROLE" fetch="join" cascade="none"
            insert="false" update="false"         class="org.hmil.ams.setup.model.CodeMst">
            <column name="UPMST_ROLE_ID" />
        </many-to-one>
</class> 
```

我正在使用 Spring BlazeDS/flex，我的对象已分离。现在，当我尝试保存新创建的 MyUserDetails 实体时，它说存在 CodeMst 的瞬态实例，（我没有更新实体，但可能是 BlazeDS，而它在反序列化新创建的 MyUserDetail 时，它正在实例化引用的 CodeMst 实体，使用空值，这可能会导致问题，但相同的代码在升级之前工作）任何帮助解决这个问题表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T16:50:59.643

我实际上在这里找到了解决方案： [https ://hibernate.atlassian.net/browse/HHH-5908](https://hibernate.atlassian.net/browse/HHH-5908)

部署补丁。我刚刚为 TypeHelper.findDirty 方法添加了相同的修复（第 287 行）

```
OLD: final boolean[][] includeColumns,
NEW: final boolean[] includeProperties, final boolean[][] includeColumns, 
```

然后在 AbstractEntityPersister.findDirty 中（第 3408 行）：

```
OLD: propertyColumnUpdateable,
NEW: getPropertyUpdateability(), propertyColumnUpdateable, 
```

**更新：** 打破这个的休眠修复是[https://hibernate.atlassian.net/browse/HHH-2350](https://hibernate.atlassian.net/browse/HHH-2350)

# c++ - 合并两个 cv::Mat 而不复制数据

> ID：14185085
> 
> 赞同：0
> 
> 时间：2013-01-06T18:05:11.353
> 
> 标签：c++, opencv

考虑两个矩阵作为以下`sample_method()`方法的输入参数，我想合并这两个矩阵`m1`并`m2`在一个新的矩阵`m12`中。我阅读[了这个参考](https://stackoverflow.com/questions/10481411/opencv-copy-an-cvmat-inside-a-roi-of-another)，然后也阅读了这个[参考](https://stackoverflow.com/questions/11179957/merge-multiple-cvmat)，但这两种解决方案将数据从源矩阵复制到目标矩阵。

```
bool sample_method(const Mat& m1, const Mat& m2)
{
    if(m1.cols != m2.cols)
    {
        cout << "Error: m1.cols != m2.cols" << endl;
        return false;
    }

    Mat m12(m1.rows+m2.rows,m1.cols,DataType<float>::type);
    // merging m1 and m2
    m12(Rect(0,0,m1.cols,m1.rows)) = m1;
    m12(Rect(0,m1.rows,m2.cols,m2.rows)) = m2;

    return true;
} 
```

如何在不复制数据的情况下将两个 Mat 连接到一个 Mat 中？为什么我的代码不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T00:54:08.723

我认为你永远不会让它发挥作用。Mat 对象有一个指向其数据的指针，然后是帮助它解释该数据的参数。您要求用两个不相关的内存块制作一个 Mat ，如果不以某种方式存储指向它们的指针，并且 Mat 没有成员变量可以放入它，就无法做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T10:44:41.200

```
m12(Rect(0,0,m1.cols,m1.rows)) = m1; 
```

左边部分为 m12 矩阵的指定部分创建一个标题。当您将 m1 分配给此标头时 - 此标头开始指向与 m1 相同的数据。注意：不要在那里复制数据。这段代码什么都不做

不复制数据就不可能合并两个矩阵。

# c# - 将（嵌入式资源）架构添加到 XmlReaderSettings 而不是文件名？

> ID：14185087
> 
> 赞同：12
> 
> 时间：2013-01-06T18:05:12.833
> 
> 标签：c#, xml, validation, xsd, embedded-resource

我正在编写一个解析 Xml 文件的应用程序。在尝试反序列化之前，我有用于验证 Xml 的架构 (.xsd) 文件：

```
XmlReaderSettings settings = new XmlReaderSettings();
settings.Schemas.Add(null, "./xml/schemas/myschema.xsd");
settings.ValidationType = ValidationType.Schema;
XmlReader reader = XmlReader.Create(xmlFile, settings);
XmlDocument document = new XmlDocument();
document.Load(reader);
ValidationEventHandler eventHandler = new ValidationEventHandler(settings_ValidationEventHandler);
document.Validate(eventHandler); 
```

请注意，参数 *./xml/schemas/myschema.xsd" 是 .xsd 相对于程序执行的路径。

我不想使用文件名/路径，而是将 .xsd 文件编译为我的项目中的嵌入式资源（我已经添加了 .xsd 文件并将构建操作设置为嵌入式资源）。

我的问题是....如何将嵌入式资源架构添加到 XmlReaderSettings 架构列表？*settings.Schemas.Add*有 4 个重载方法，但没有一个将嵌入资源作为参数。它们都采用模式文件的路径。

我过去曾使用嵌入式资源来动态设置标签图像，因此我对使用嵌入式资源有些熟悉。查看我的其他代码，看起来我最终得到的是一个包含内容的*Stream ：*

```
System.Reflection.Assembly myAssembly = System.Reflection.Assembly.GetExecutingAssembly();
Stream myStream = myAssembly.GetManifestResourceStream(resourceName); 
```

我假设嵌入式 .xsd 也将作为流读入，因此这会缩小我的问题范围。当我引用包含架构而不是文件名的流时，如何将架构添加到 XmlReaderSettings？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-26T23:23:22.503

您可以使用将 an作为其第二个参数的`Add()`重载：`XmlReader`

```
Assembly myAssembly = Assembly.GetExecutingAssembly();
using (Stream schemaStream = myAssembly.GetManifestResourceStream(resourceName)) {
  using (XmlReader schemaReader = XmlReader.Create(schemaStream)) {
    settings.Schemas.Add(null, schemaReader);
  }
} 
```

或者您可以先加载架构，然后添加它：

```
Assembly myAssembly = Assembly.GetExecutingAssembly();
using (Stream schemaStream = myAssembly.GetManifestResourceStream(resourceName)) {
  XmlSchema schema = XmlSchema.Read(schemaStream, null);
  settings.Schemas.Add(schema);
} 
```

# c# - 使用 LINQ 过滤列表 不改变变量类型

> ID：14185101
> 
> 赞同：0
> 
> 时间：2013-01-06T18:06:28.297
> 
> 标签：c#, linq, list

我正在用 C# 编写一个网络爬虫。在获取页面上所有链接的方法中，我想返回链接列表，但使用 LINQ 对其进行“过滤”，以便列表仅包含存在的 url。我有一个名为 RemoteFileExists 的辅助方法，它返回一个布尔值。在方法结束时，我编写了以下 LINQ 行：

```
//Links is a List<string> that hasn't been filtered
return (from link in Links
                where RemoteFileExists(link)
                select link).ToList<string>(); 
```

出于某种原因，当我这样做时，列表返回为空。

远程文件存在：

```
static bool RemoteFileExists(string url)
    {
        try
        {
            HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
            request.Method = "HEAD";
            HttpWebResponse response = request.GetResponse() as HttpWebResponse;
            return (response.StatusCode == HttpStatusCode.OK);
        }
        catch
        {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:19:24.747

我猜要么你的链接不正确，要么你的网站不支持`HEAD`. 由于此代码有效

```
List<string> Links = new List<string>() {"http://www.google.com"};
var res = ( from link in Links
            where RemoteFileExists(link)
            select link).ToList<string>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:37:10.857

我一直在我的代码中使用 RemoteFileExists 方法。有时程序挂起是因为请求没有关闭。现在我正在使用以下代码：

```
static bool RemoteFileExists(string url)
{
  try
  {
    HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
    request.Method = "HEAD";
    HttpWebResponse response = request.GetResponse() as HttpWebResponse;
    response.Close();

    return (response.StatusCode == HttpStatusCode.OK);
  }
  catch
  {
    return false;
  }
} 
```

此外，上面的代码没有检测到重定向。这对爬虫很重要，因为您需要知道何时前进到另一个页面，而不是跟随重定向到同一页面。

# c# - 如何在 C# 中获取网格中单元格的内容？

> ID：14185102
> 
> 赞同：4
> 
> 时间：2013-01-06T18:06:42.160
> 
> 标签：c#, wpf, xaml, grid

我需要`Grid`在 C# 中获取单元格的内容。有没有办法做这样的事情？

```
UIElement element = MyGrid.Children.getElementAt(x, y) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T18:09:50.827

你可以使用 Linq：

```
// using System.Linq;

var element = grid.Children.Cast<UIElement>().
    FirstOrDefault(e => Grid.GetColumn(e) == x && Grid.GetRow(e) == y); 
```

或者如果指定单元格中有多个元素：

```
var elements = grid.Children.Cast<UIElement>().
    Where(e => Grid.GetColumn(e) == x && Grid.GetRow(e) == y); 
```

其中元素是一个`IEnumerable<UIElement>`。

# jquery - Jquery - Mouseenter 和 Mouseleave

> ID：14185103
> 
> 赞同：1
> 
> 时间：2013-01-06T18:06:48.397
> 
> 标签：jquery

到目前为止，我有以下内容：

```
$("#main-link-bottom-about").mouseenter(function() {
    $("#main-about-hover").slideDown("slow");
});

$("#main-about-hover, #main-link-bottom-about").mouseleave(function() {
    $("#main-about-hover").slideUp("slow");
}); 
```

当您将鼠标悬停在链接上时，这基本上是一个下拉菜单。我想要实现的是，当您将鼠标悬停在上方时`#main-link-bottom-about`，`#main-about-hover`鼠标离开时会向上滑动`#main-about-hover`，`#main-link-bottom-about`.

但是，问题是，如果鼠标离开,会`#main-about-hover`向上滑动，因为我不希望这种情况发生。`#main-link-bottom-about``#main-about-hover`

是否可以添加此异常，或者我是否以错误的方式进行此操作？

编辑：：

HTML：

```
<!-- Navigation Links Bottom -->

<div id="main-links-bottom" class="shadow">

    <a href="index.php" id="main-link-bottom-about" class="main-infotext-bottom">About</a>

    <a href="#" class="main-infotext-bottom">Information</a>

    <a href="#" class="main-infotext-bottom">Services</a>

    <a href="#" class="main-infotext-bottom">Support</a>

    <a href="#" class="main-infotext-bottom">Careers</a>

    <a href="#" class="main-infotext-bottom">Mobile Site</a>

    <a href="#" class="main-infotext-bottom">Site Map</a>

    <a href="#" class="main-infotext-bottom" onclick="alert('Coming Soon!')">Mobile App</a>

    <div id="main-links-bottom-hover">

        <div id="main-about-hover">

            <div id="main-about-div">

                <li id="lnk1" class="about-lnk"><a href="#">Contact</a></li>
                <li id="lnk2" class="about-lnk"><a href="#">Technology</a></li>
                <li id="lnk3" class="about-lnk"><a href="#">Coverage</a></li>
                <li id="lnk4" class="about-lnk"><a href="#">Environment</a></li>
                <li id="lnk5" class="about-lnk"><a href="#">T&amp;C's</a></li>
                <li id="lnk6" class="about-lnk"><a href="#">Refund Policy</a></li>

            </div>

        </div>

    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:08:30.903

这是一个很好的起点。使导航比示例更漂亮（将其放在每个类别下），但这会起作用。

jsfiddle：http: [//jsfiddle.net/xtBXj/2/](http://jsfiddle.net/xtBXj/2/)

HTML：

```
<!-- Navigation Links Bottom -->
<input id="test"></input>
<div id="main-links-bottom" class="shadow">

    <a href="index.php" id="main-link-bottom-about" class="main-infotext-bottom">About</a>

    <a href="#" class="main-infotext-bottom">Information</a>

    <a href="#" class="main-infotext-bottom">Services</a>

    <a href="#" class="main-infotext-bottom">Support</a>

    <a href="#" class="main-infotext-bottom">Careers</a>

    <a href="#" class="main-infotext-bottom">Mobile Site</a>

    <a href="#" class="main-infotext-bottom">Site Map</a>

    <a href="#" class="main-infotext-bottom" onclick="alert('Coming Soon!')">Mobile App</a>

    <div id="main-links-bottom-hover">

        <div id="main-about-hover">

            <div class="hovers" id="About">

                <li id="lnk1" class="about-lnk"><a href="#">Contact</a></li>
                <li id="lnk2" class="about-lnk"><a href="#">Technology</a></li>
                <li id="lnk3" class="about-lnk"><a href="#">Coverage</a></li>
                <li id="lnk4" class="about-lnk"><a href="#">Environment</a></li>
                <li id="lnk5" class="about-lnk"><a href="#">T&amp;C's</a></li>
                <li id="lnk6" class="about-lnk"><a href="#">Refund Policy</a></li>

            </div>

          <div class="hovers" id="Information">

                <li id="lnk1" class="about-lnk"><a href="#">InfoContact</a></li>
                <li id="lnk2" class="about-lnk"><a href="#">InfoTechnology</a></li>
                <li id="lnk3" class="about-lnk"><a href="#">Coverage</a></li>
                <li id="lnk4" class="about-lnk"><a href="#">Environment</a></li>
                <li id="lnk5" class="about-lnk"><a href="#">T&amp;C's</a></li>
                <li id="lnk6" class="about-lnk"><a href="#">Refund Policy</a></li>

            </div>

                    <div class="hovers" id="Services">

                <li id="lnk1" class="about-lnk"><a href="#">ServInfoContact</a></li>
                <li id="lnk2" class="about-lnk"><a href="#">ServInfoTechnology</a></li>
                <li id="lnk3" class="about-lnk"><a href="#">Coverage</a></li>
                <li id="lnk4" class="about-lnk"><a href="#">Environment</a></li>
                <li id="lnk5" class="about-lnk"><a href="#">T&amp;C's</a></li>
                <li id="lnk6" class="about-lnk"><a href="#">Refund Policy</a></li>

            </div>

        </div>

    </div>

</div> 
```

JS：

```
$(".hovers").hide();

//$("#main-links-bottom-hover").hide();

$(".main-infotext-bottom").mouseenter(function() {
    $(".hovers").slideUp();
    var m = $(this).html();
    $("#test").val(m);
    $("#" + m).slideDown();
});

$("#main-links-bottom").mouseleave(function() {
    $(".hovers").slideUp();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:28:09.777

试试这个代码

```
$("#main-link-bottom-about, #main-links-bottom-hover").mouseenter(function () {
  $("#main-about-hover").stop().slideDown("slow");
});

$("#main-about-hover, #main-link-bottom-about").mouseleave(function () {
  $("#main-about-hover").stop().slideUp("slow");
}); 
```

在此处查看[JSFiddle 演示](http://jsfiddle.net/ZcWMg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T18:39:58.543

您最好将链接和悬停菜单嵌套在同一个元素中。这将允许您将鼠标事件绑定到单个元素。此外，考虑使用类而不是 DOM ID，这样您就可以根据需要轻松地将悬停菜单添加到其他链接。

例如：

**HTML**

```
<div id="main-links-bottom">
    <div class="main-link-container">
        <a href="index.php" class="main-infotext-bottom">About</a>
        <div class="hover-menu">
             <a href="#">Contact</a>
             <a href="#">Technology</a>
             <a href="#">Coverage</a>
             <a href="#">Environment</a>
             <a href="#">T&amp;C's</a>
             <a href="#">Refund Policy</a>
        </div>
    </div>
    <div class="main-link-container">
         <a href="#" class="main-infotext-bottom">Information</a>
    </div>
    ...
</div> 
```

JS 现在可以相当简单，甚至更简单`slideToggle()`：

**Javascript**

```
 $('#main-links-bottom .main-link-container').bind('mouseenter mouseleave',
      function() {
          $(this).find('.hover-menu').slideToggle('slow');
      }
 ); 
```

# java - 如果我更改 grails 域中的字段名称会发生 什么？

> ID：14185106
> 
> 赞同：3
> 
> 时间：2013-01-06T18:07:08.463
> 
> 标签：java, mysql, grails, grails-orm

我有一个 grails 域，其中有一个名为 While 的字段，`created`现在我已将其更改为`dateCreated`. 但是，我的数据库表仍然有列命名`created`，所以每当我尝试保存记录时，grails 都会抱怨说`Field 'created' doesn't have a default value`，即使我的域中不再有这个字段。

如何解决这个问题？我必须打开我的数据库并删除此列吗？在 rails 中，这是通过迁移来处理的，grails 中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T19:05:02.130

如果只是重命名域字段，可以在映射块中指定列名，重命名相关字段时不要更改。因此，根本不需要更改数据库。

```
class MyDomain {
    Date dateCreated
    static mapping = {
        dateCreated column: 'created'
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:37:53.557

您必须`dbCreate = "update"`在 DataSource.groovy 中指定。

如果您处于开发阶段，您可以将其更改`dbCreate = "create"`为启用自动模式刷新。否则，在生产环境中，您必须保留该配置并手动更改表。

您可以参考[Grails DataSource doc](http://grails.org/doc/2.1.0/guide/single.html#dataSource)，其中也提出了一些迁移工具：

> 您也可以完全删除 dbCreate 设置，如果您的架构相对稳定，并且绝对是在您的应用程序和数据库部署在生产环境中时，建议您这样做。然后通过适当的迁移管理数据库更改，可以使用 SQL 脚本或像 Liquibase 这样的迁移工具（**数据库迁移插件**使用 Liquibase 并与 Grails 和 GORM 紧密集成）。

# twitter-bootstrap - 向图标字体添加深度/尺寸？

> ID：14185107
> 
> 赞同：0
> 
> 时间：2013-01-06T18:07:31.760
> 
> 标签：twitter-bootstrap, fonts, font-face, css

我想在图标周围放置一个边框，即给出一些深度或尺寸，但它看起来不像 CSS 的`text-shadow`属性是我应该使用的。

我正在使用与[Twitter Bootstrap一起使用的](http://twitter.github.com/bootstrap/)[FontAwesome 图标集合](http://fortawesome.github.com/Font-Awesome/)。

下面是一个 JSFiddle 演示的链接（下面也显示了它的 HTML 和 CSS），带有向上和向下箭头，我希望看起来更有质感：

[http://jsfiddle.net/trpeters1/PcmNC/14/](http://jsfiddle.net/trpeters1/PcmNC/14/)

HTML：

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap.no-icons.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.0/css/font-awesome.css" rel="stylesheet">

<ul class='well'>  
   <li class='alignCenter'> 
     <i class='icon-caret-up icon-green icon-4x'></i>
   </li>
   <li class='voteTots alignCenter' >3</li>            
   <li class='alignCenter'> 
     <i class=' icon-caret-down icon-gray icon-4x'></i>           
   </li>
</ul> 
```

CSS：

```
body {
  font-size:200%; /* resets the page font size */
}
ul li.alignCenter{
  margin:auto;
  width:50%;
  text-align:center;
}
.icon-green{
  color:#58A279;    
}
.icon-gray{
  color:gray;   
}
.voteTots{
  font-size:60px;
  color:#666;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:25:39.210

你确定文字阴影不是你想要的吗？

看看这个：http: [//jsfiddle.net/panchroma/PcmNC/17/](http://jsfiddle.net/panchroma/PcmNC/17/)

用途

```
.shadow {
text-shadow: 5px 5px 5px #666; /* horizontal vertical blur colour */
} 
```

# python - Python 的 glob 模块和 unix 的 find 命令无法识别非 ascii

> ID：14185114
> 
> 赞同：5
> 
> 时间：2013-01-06T18:08:47.970
> 
> 标签：python, unix, encoding

我在 Mac OS X 10.8.2

当我尝试查找文件名包含非 ASCII 字符的文件时，虽然我确定它们存在，但我没有得到任何结果。以控制台输入为例

```
> find */Bärlauch* 
```

我没有得到任何结果。但是，如果我尝试不使用变音符号，我会得到

```
> find */B*rlauch*
images/Bärlauch1.JPG 
```

所以文件肯定是存在的。如果我将文件重命名为“ae”替换“ä”，则会找到该文件。

同样，Python 模块`glob`无法找到该文件：

```
>>> glob.glob('*/B*rlauch*')
['images/Bärlauch1.JPG']
>>> glob.glob('*/Bärlauch*')
[] 
```

我发现它一定与编码有关，但我的终端设置为 utf-8 并且我使用的是使用 unicode 字符串的 Python 3.3.0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T18:44:02.500

*Mac OS X总是*对 HFS+ 上的文件名使用非规范化字符。用于`unicodedata.normalize('NFD', pattern)`非规范化 glob 模式。

```
import unicodedata

glob.glob(unicodedata.normalize('NFD', '*/Bärlauch*')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:21:59.800

Python 程序基本上是文本文件。传统上，人们只使用 ASCII 字符集中的字符来编写它们，因此不必考虑他们编写它们的编码：所有字符集都同意如何解码 ASCII 字符。

您已经使用非 ASCII 字符编写了 Python 程序。因此，您的程序带有隐式编码（您没有提到）：要保存这样的文件，您必须决定如何在磁盘上表示变音符号。我猜想也许你的编辑为你选择了一些非 Unicode 的东西。

无论如何，有两种方法可以解决这个问题：要么你可以限制自己在程序的源代码中只使用 ASCII 字符，要么你可以向 Python 声明你希望它读取具有特定编码的文本文件。

要执行前者，您应该将 a-umlaut 替换为其 Unicode 转义序列（我认为这是`\x0228`但目前无法测试）。要执行后者，您应该在文件顶部添加一个编码声明：

```
# -*- coding: <your encoding> -*- 
```

# concurrency - Camel + ActiveMQ：处理竞争消费者的两个不同的并发约束

> ID：14185120
> 
> 赞同：0
> 
> 时间：2013-01-06T18:09:27.973
> 
> 标签：concurrency, apache-camel, activemq, apache-servicemix

**问题：**

处理积压的消息，其中每条消息具有三个标头“服务”、“客户端”和“流”。我想以最大并发处理积压的消息，但我有一些要求：

*   一次只能处理 10 条具有相同服务的消息。
*   一次只能处理具有相同服务和客户端的 4 条消息。
*   具有相同服务和客户端和流的所有消息必须保持有序。

* * *

**附加信息：**

我一直在 ServiceMix（Camel + ActiveMQ）上下文中使用“maxConcurrentConsumers”和“JMSXGroupID”，我似乎能够满足我的 3 个要求中的 2 个。

例如，如果我做一些基于内容的路由将积压工作拆分为单独的“服务”队列（每个服务一个队列），那么我可以将 JMSXGroupID 设置为（服务 + 客户端 + 流），并设置 maxConcurrentConsumers=10在从每个队列消耗的路线上。这解决了第一个和最后一个要求，但是我可能有太多消息同时用于同一个客户端处理。

请注意，如果一个解决方案需要为服务+客户端的每个组合使用单独的队列和路由，那将变得难以管理，因为可能有成千上万的组合。

非常感谢任何反馈！如果我的问题不清楚，请随时建议我如何改进它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:28:48.107

据我所知，如果你有 10k+ 连击，这将很难实现。

您可以通过使用消费者和选择器来绕过每个服务/客户端组合的一个队列。但是，如果您无法以某种方式预测一组有限的服务/客户端一次处于活动状态，那么这几乎同样难以处理（您根本不会创建 10k+ 选择器消费者而没有受到伤害并且没有重要的性能考虑）。

你能详细说明第二个要求吗？您是否需要它来确保您的客户之间存在某种公平感？请详细说明，如果我能想到其他内容，我会更新。

更新：您可以浏览队列，循环浏览消息并选择“有空闲插槽”的消息，而不是仅仅通过收听消息来消费。假设您在单个实例中运行，您可能可以弄清楚某些共享变量是否已达到限制。

# objective-c - 在没有 UIImagePicker 且没有预览的情况下在 iOS 中拍照

> ID：14185126
> 
> 赞同：5
> 
> 时间：2013-01-06T18:09:41.683
> 
> 标签：objective-c, ios, photo

**您是否知道在 iOS 中拍摄照片**并将其保存到相机胶卷的任何方式/方法，只需按下简单的按钮而不显示任何预览？

我已经知道如何显示相机视图，但它显示图像的预览，用户需要单击拍照按钮才能拍照。

**简而言之：**用户单击按钮，拍摄照片，无需预览，也无需仔细检查即可拍摄/保存照片。

我已经找到了Class [http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instm/UIImagePickerController/takePicture](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instm/UIImagePickerController/takePicture)`takePicture`的方法`UIIMagePickerController`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-06T18:21:38.727

将- 属性设置`showsCameraControls`为`NO`。

```
 poc = [[UIImagePickerController alloc] init];
    [poc setTitle:@"Take a photo."];
    [poc setDelegate:self];
    [poc setSourceType:UIImagePickerControllerSourceTypeCamera];
    poc.showsCameraControls = NO; 
```

您还必须将自己的控件作为自定义视图添加到`poc.view`. 但这非常简单，您可以通过这种方式添加自己的 UI 样式。

您通常会在`imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:`

要拍照，请致电

```
[poc takePicture]; 
```

从您的自定义按钮。

希望，这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:19:36.860

假设您想要一个傻瓜式方法，您可以创建一个 AVSession 并调用 UIImageWriteToSavedPhotosAlbum 方法。这是进入该确切过程的链接：http: [//www.musicalgeometry.com/?p=1297](http://www.musicalgeometry.com/?p=1297)

还值得注意的是，您的用户需要授予应用访问他们的相机胶卷的权限，否则您可能会在保存图像时遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T07:17:22.227

您需要根据您的大小设计自己的自定义预览，按下捕获按钮并调用`buttonPressed`方法并做您想做的事情

```
(void)buttonPressed:(UIButton *)sender {

    NSLog(@" Capture Clicked");

    [self.imagePicker takePicture];

    //[NSTimer scheduledTimerWithTimeInterval:3.0f target:self
                                  selector:@selector(timerFired:) userInfo:nil repeats:NO];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T17:44:16.010

以下是在不显示预览屏幕的情况下拍照的代码。当我尝试使用 UIImagePickerController 接受的答案时，预览屏幕显示，然后自动消失。使用下面的代码，用户点击“拍照”按钮，设备拍照时对 UI 进行零更改（在我的应用程序中，我在拍照按钮旁边添加了一个绿色复选标记）。下面的代码来自苹果[https://developer.apple.com/LIBRARY/IOS/samplecode/AVCam/Introduction/Intro.html](https://developer.apple.com/LIBRARY/IOS/samplecode/AVCam/Introduction/Intro.html)，其中“额外功能”（与拍摄静态照片无关）已被注释掉。感谢 incmiko 在您的答案中建议此代码[iOS 从没有 modalViewController 的相机拍照](https://stackoverflow.com/questions/19386787/ios-take-photo-from-camera-without-modalviewcontroller)。

更新代码，2015 年 3 月 26 日：

触发快照：

```
[self snapStillImage:sender]; 
```

在 .h 文件中：

```
#import <AVFoundation/AVFoundation.h>
#import <AssetsLibrary/AssetsLibrary.h>

// include code below in header file, after #import and before @interface
// avfoundation copy paste code
static void * CapturingStillImageContext = &CapturingStillImageContext;
static void * RecordingContext = &RecordingContext;
static void * SessionRunningAndDeviceAuthorizedContext = &SessionRunningAndDeviceAuthorizedContext;

// avfoundation, include code below after @interface
// avf - Session management.
@property (nonatomic) dispatch_queue_t sessionQueue; // Communicate with the session and other session objects on this queue.
@property (nonatomic) AVCaptureSession *session;
@property (nonatomic) AVCaptureDeviceInput *videoDeviceInput;
@property (nonatomic) AVCaptureMovieFileOutput *movieFileOutput;
@property (nonatomic) AVCaptureStillImageOutput *stillImageOutput;

// avf - Utilities.
@property (nonatomic) UIBackgroundTaskIdentifier backgroundRecordingID;
@property (nonatomic, getter = isDeviceAuthorized) BOOL deviceAuthorized;
@property (nonatomic, readonly, getter = isSessionRunningAndDeviceAuthorized) BOOL sessionRunningAndDeviceAuthorized;
@property (nonatomic) BOOL lockInterfaceRotation;
@property (nonatomic) id runtimeErrorHandlingObserver; 
```

在 .m 文件中：

```
#pragma mark - AV Foundation
- (BOOL)isSessionRunningAndDeviceAuthorized
{
    return [[self session] isRunning] && [self isDeviceAuthorized];
}

+ (NSSet *)keyPathsForValuesAffectingSessionRunningAndDeviceAuthorized
{
    return [NSSet setWithObjects:@"session.running", @"deviceAuthorized", nil];
}

// call following method from viewDidLoad
- (void)CreateAVCaptureSession
{
    // Create the AVCaptureSession
    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    [self setSession:session];

    // Check for device authorization
    [self checkDeviceAuthorizationStatus];

    // In general it is not safe to mutate an AVCaptureSession or any of its inputs, outputs, or connections from multiple threads at the same time.
    // Why not do all of this on the main queue?
    // -[AVCaptureSession startRunning] is a blocking call which can take a long time. We dispatch session setup to the sessionQueue so that the main queue isn't blocked (which keeps the UI responsive).

    dispatch_queue_t sessionQueue = dispatch_queue_create("session queue", DISPATCH_QUEUE_SERIAL);
    [self setSessionQueue:sessionQueue];

    dispatch_async(sessionQueue, ^{
        [self setBackgroundRecordingID:UIBackgroundTaskInvalid];

        NSError *error = nil;

        AVCaptureDevice *videoDevice = [ViewController deviceWithMediaType:AVMediaTypeVideo preferringPosition:AVCaptureDevicePositionFront];
        AVCaptureDeviceInput *videoDeviceInput = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:&error];

        if (error)
        {
            NSLog(@"%@", error);
        }

        if ([session canAddInput:videoDeviceInput])
        {
            [session addInput:videoDeviceInput];
            [self setVideoDeviceInput:videoDeviceInput];

            dispatch_async(dispatch_get_main_queue(), ^{
                // Why are we dispatching this to the main queue?
                // Because AVCaptureVideoPreviewLayer is the backing layer for AVCamPreviewView and UIView can only be manipulated on main thread.
                // Note: As an exception to the above rule, it is not necessary to serialize video orientation changes on the AVCaptureVideoPreviewLayer’s connection with other session manipulation.
            });
        }

        /*      AVCaptureDevice *audioDevice = [[AVCaptureDevice devicesWithMediaType:AVMediaTypeAudio] firstObject];
         AVCaptureDeviceInput *audioDeviceInput = [AVCaptureDeviceInput deviceInputWithDevice:audioDevice error:&error];

         if (error)
         {
         NSLog(@"%@", error);
         }

         if ([session canAddInput:audioDeviceInput])
         {
         [session addInput:audioDeviceInput];
         }
         */
        AVCaptureMovieFileOutput *movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];
        if ([session canAddOutput:movieFileOutput])
        {
            [session addOutput:movieFileOutput];
            AVCaptureConnection *connection = [movieFileOutput connectionWithMediaType:AVMediaTypeVideo];
            if ([connection isVideoStabilizationSupported])
                [connection setEnablesVideoStabilizationWhenAvailable:YES];
            [self setMovieFileOutput:movieFileOutput];
        }

        AVCaptureStillImageOutput *stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
        if ([session canAddOutput:stillImageOutput])
        {
            [stillImageOutput setOutputSettings:@{AVVideoCodecKey : AVVideoCodecJPEG}];
            [session addOutput:stillImageOutput];
            [self setStillImageOutput:stillImageOutput];
        }
    });
}

// call method below from viewWilAppear
- (void)AVFoundationStartSession
{

    dispatch_async([self sessionQueue], ^{
        [self addObserver:self forKeyPath:@"sessionRunningAndDeviceAuthorized" options:(NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew) context:SessionRunningAndDeviceAuthorizedContext];
        [self addObserver:self forKeyPath:@"stillImageOutput.capturingStillImage" options:(NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew) context:CapturingStillImageContext];
        [self addObserver:self forKeyPath:@"movieFileOutput.recording" options:(NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew) context:RecordingContext];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(subjectAreaDidChange:) name:AVCaptureDeviceSubjectAreaDidChangeNotification object:[[self videoDeviceInput] device]];

        __weak ViewController *weakSelf = self;
        [self setRuntimeErrorHandlingObserver:[[NSNotificationCenter defaultCenter] addObserverForName:AVCaptureSessionRuntimeErrorNotification object:[self session] queue:nil usingBlock:^(NSNotification *note) {
            ViewController *strongSelf = weakSelf;
            dispatch_async([strongSelf sessionQueue], ^{
                // Manually restarting the session since it must have been stopped due to an error.
                [[strongSelf session] startRunning];
            });
        }]];
        [[self session] startRunning];
    });
}

// call method below from viewDidDisappear
- (void)AVFoundationStopSession
{
    dispatch_async([self sessionQueue], ^{
        [[self session] stopRunning];

        [[NSNotificationCenter defaultCenter] removeObserver:self name:AVCaptureDeviceSubjectAreaDidChangeNotification object:[[self videoDeviceInput] device]];
        [[NSNotificationCenter defaultCenter] removeObserver:[self runtimeErrorHandlingObserver]];

        [self removeObserver:self forKeyPath:@"sessionRunningAndDeviceAuthorized" context:SessionRunningAndDeviceAuthorizedContext];
        [self removeObserver:self forKeyPath:@"stillImageOutput.capturingStillImage" context:CapturingStillImageContext];
        [self removeObserver:self forKeyPath:@"movieFileOutput.recording" context:RecordingContext];
    });
}

- (BOOL)prefersStatusBarHidden
{
    return YES;
}

- (BOOL)shouldAutorotate
{
    // Disable autorotation of the interface when recording is in progress.
    return ![self lockInterfaceRotation];
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    //  [[(AVCaptureVideoPreviewLayer *)[[self previewView] layer] connection] setVideoOrientation:(AVCaptureVideoOrientation)toInterfaceOrientation];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (context == CapturingStillImageContext)
    {
        BOOL isCapturingStillImage = [change[NSKeyValueChangeNewKey] boolValue];

        if (isCapturingStillImage)
        {
            [self runStillImageCaptureAnimation];
        }
    }
    else if (context == RecordingContext)
    {
        BOOL isRecording = [change[NSKeyValueChangeNewKey] boolValue];

        dispatch_async(dispatch_get_main_queue(), ^{
            if (isRecording)
            {
                //              [[self cameraButton] setEnabled:NO];
                //              [[self recordButton] setTitle:NSLocalizedString(@"Stop", @"Recording button stop title") forState:UIControlStateNormal];
                //              [[self recordButton] setEnabled:YES];
            }
            else
            {
                //              [[self cameraButton] setEnabled:YES];
                //              [[self recordButton] setTitle:NSLocalizedString(@"Record", @"Recording button record title") forState:UIControlStateNormal];
                //              [[self recordButton] setEnabled:YES];
            }
        });
    }
    else if (context == SessionRunningAndDeviceAuthorizedContext)
    {
        BOOL isRunning = [change[NSKeyValueChangeNewKey] boolValue];

        dispatch_async(dispatch_get_main_queue(), ^{
            if (isRunning)
            {
                //              [[self cameraButton] setEnabled:YES];
                //              [[self recordButton] setEnabled:YES];
                //              [[self stillButton] setEnabled:YES];
            }
            else
            {
                //              [[self cameraButton] setEnabled:NO];
                //              [[self recordButton] setEnabled:NO];
                //              [[self stillButton] setEnabled:NO];
            }
        });
    }
    else
    {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
}

#pragma mark Actions

- (IBAction)toggleMovieRecording:(id)sender
{
    //  [[self recordButton] setEnabled:NO];

    dispatch_async([self sessionQueue], ^{
        if (![[self movieFileOutput] isRecording])
        {
            [self setLockInterfaceRotation:YES];

            if ([[UIDevice currentDevice] isMultitaskingSupported])
            {
                // Setup background task. This is needed because the captureOutput:didFinishRecordingToOutputFileAtURL: callback is not received until AVCam returns to the foreground unless you request background execution time. This also ensures that there will be time to write the file to the assets library when AVCam is backgrounded. To conclude this background execution, -endBackgroundTask is called in -recorder:recordingDidFinishToOutputFileURL:error: after the recorded file has been saved.
                [self setBackgroundRecordingID:[[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:nil]];
            }

            // Update the orientation on the movie file output video connection before starting recording.
            //          [[[self movieFileOutput] connectionWithMediaType:AVMediaTypeVideo] setVideoOrientation:[[(AVCaptureVideoPreviewLayer *)[[self previewView] layer] connection] videoOrientation]];

            // Turning OFF flash for video recording
            [ViewController setFlashMode:AVCaptureFlashModeOff forDevice:[[self videoDeviceInput] device]];

            // Start recording to a temporary file.
            NSString *outputFilePath = [NSTemporaryDirectory() stringByAppendingPathComponent:[@"movie" stringByAppendingPathExtension:@"mov"]];
            [[self movieFileOutput] startRecordingToOutputFileURL:[NSURL fileURLWithPath:outputFilePath] recordingDelegate:self];
        }
        else
        {
            [[self movieFileOutput] stopRecording];
        }
    });
}

- (IBAction)changeCamera:(id)sender
{
    //  [[self cameraButton] setEnabled:NO];
    //  [[self recordButton] setEnabled:NO];
    //  [[self stillButton] setEnabled:NO];

    dispatch_async([self sessionQueue], ^{
        AVCaptureDevice *currentVideoDevice = [[self videoDeviceInput] device];
        AVCaptureDevicePosition preferredPosition = AVCaptureDevicePositionUnspecified;
        AVCaptureDevicePosition currentPosition = [currentVideoDevice position];

        switch (currentPosition)
        {
            case AVCaptureDevicePositionUnspecified:
                preferredPosition = AVCaptureDevicePositionBack;
                break;
            case AVCaptureDevicePositionBack:
                preferredPosition = AVCaptureDevicePositionFront;
                break;
            case AVCaptureDevicePositionFront:
                preferredPosition = AVCaptureDevicePositionBack;
                break;
        }

        AVCaptureDevice *videoDevice = [ViewController deviceWithMediaType:AVMediaTypeVideo preferringPosition:preferredPosition];
        AVCaptureDeviceInput *videoDeviceInput = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:nil];

        [[self session] beginConfiguration];

        [[self session] removeInput:[self videoDeviceInput]];
        if ([[self session] canAddInput:videoDeviceInput])
        {
            [[NSNotificationCenter defaultCenter] removeObserver:self name:AVCaptureDeviceSubjectAreaDidChangeNotification object:currentVideoDevice];

            [ViewController setFlashMode:AVCaptureFlashModeAuto forDevice:videoDevice];
            [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(subjectAreaDidChange:) name:AVCaptureDeviceSubjectAreaDidChangeNotification object:videoDevice];

            [[self session] addInput:videoDeviceInput];
            [self setVideoDeviceInput:videoDeviceInput];
        }
        else
        {
            [[self session] addInput:[self videoDeviceInput]];
        }

        [[self session] commitConfiguration];

        dispatch_async(dispatch_get_main_queue(), ^{
            //          [[self cameraButton] setEnabled:YES];
            //          [[self recordButton] setEnabled:YES];
            //          [[self stillButton] setEnabled:YES];
        });
    });
}

- (IBAction)snapStillImage:(id)sender
{
    dispatch_async([self sessionQueue], ^{
        // Update the orientation on the still image output video connection before capturing.
        //      [[[self stillImageOutput] connectionWithMediaType:AVMediaTypeVideo] setVideoOrientation:[[(AVCaptureVideoPreviewLayer *)[[self previewView] layer] connection] videoOrientation]];

        // Flash set to Auto for Still Capture
        [ViewController setFlashMode:AVCaptureFlashModeAuto forDevice:[[self videoDeviceInput] device]];

        // Capture a still image.
        [[self stillImageOutput] captureStillImageAsynchronouslyFromConnection:[[self stillImageOutput] connectionWithMediaType:AVMediaTypeVideo] completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error) {

            if (imageDataSampleBuffer)
            {
                NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
                UIImage *image = [[UIImage alloc] initWithData:imageData];

                // do someting good with saved image
                [self saveImageToParse:image];

            }
        }];
    });
}

- (IBAction)focusAndExposeTap:(UIGestureRecognizer *)gestureRecognizer
{
    //  CGPoint devicePoint = [(AVCaptureVideoPreviewLayer *)[[self previewView] layer] captureDevicePointOfInterestForPoint:[gestureRecognizer locationInView:[gestureRecognizer view]]];
    //  [self focusWithMode:AVCaptureFocusModeAutoFocus exposeWithMode:AVCaptureExposureModeAutoExpose atDevicePoint:devicePoint monitorSubjectAreaChange:YES];
}

- (void)subjectAreaDidChange:(NSNotification *)notification
{
    CGPoint devicePoint = CGPointMake(.5, .5);
    [self focusWithMode:AVCaptureFocusModeContinuousAutoFocus exposeWithMode:AVCaptureExposureModeContinuousAutoExposure atDevicePoint:devicePoint monitorSubjectAreaChange:NO];
}

#pragma mark File Output Delegate

- (void)captureOutput:(AVCaptureFileOutput *)captureOutput didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL fromConnections:(NSArray *)connections error:(NSError *)error
{
    if (error)
        NSLog(@"%@", error);

    [self setLockInterfaceRotation:NO];

    // Note the backgroundRecordingID for use in the ALAssetsLibrary completion handler to end the background task associated with this recording. This allows a new recording to be started, associated with a new UIBackgroundTaskIdentifier, once the movie file output's -isRecording is back to NO — which happens sometime after this method returns.
    UIBackgroundTaskIdentifier backgroundRecordingID = [self backgroundRecordingID];
    [self setBackgroundRecordingID:UIBackgroundTaskInvalid];

    [[[ALAssetsLibrary alloc] init] writeVideoAtPathToSavedPhotosAlbum:outputFileURL completionBlock:^(NSURL *assetURL, NSError *error) {
        if (error)
            NSLog(@"%@", error);

        [[NSFileManager defaultManager] removeItemAtURL:outputFileURL error:nil];

        if (backgroundRecordingID != UIBackgroundTaskInvalid)
            [[UIApplication sharedApplication] endBackgroundTask:backgroundRecordingID];
    }];
}

#pragma mark Device Configuration

- (void)focusWithMode:(AVCaptureFocusMode)focusMode exposeWithMode:(AVCaptureExposureMode)exposureMode atDevicePoint:(CGPoint)point monitorSubjectAreaChange:(BOOL)monitorSubjectAreaChange
{
    dispatch_async([self sessionQueue], ^{
        AVCaptureDevice *device = [[self videoDeviceInput] device];
        NSError *error = nil;
        if ([device lockForConfiguration:&error])
        {
            if ([device isFocusPointOfInterestSupported] && [device isFocusModeSupported:focusMode])
            {
                [device setFocusMode:focusMode];
                [device setFocusPointOfInterest:point];
            }
            if ([device isExposurePointOfInterestSupported] && [device isExposureModeSupported:exposureMode])
            {
                [device setExposureMode:exposureMode];
                [device setExposurePointOfInterest:point];
            }
            [device setSubjectAreaChangeMonitoringEnabled:monitorSubjectAreaChange];
            [device unlockForConfiguration];
        }
        else
        {
            NSLog(@"%@", error);
        }
    });
}

+ (void)setFlashMode:(AVCaptureFlashMode)flashMode forDevice:(AVCaptureDevice *)device
{
    if ([device hasFlash] && [device isFlashModeSupported:flashMode])
    {
        NSError *error = nil;
        if ([device lockForConfiguration:&error])
        {
            [device setFlashMode:flashMode];
            [device unlockForConfiguration];
        }
        else
        {
            NSLog(@"%@", error);
        }
    }
}

+ (AVCaptureDevice *)deviceWithMediaType:(NSString *)mediaType preferringPosition:(AVCaptureDevicePosition)position
{
    NSArray *devices = [AVCaptureDevice devicesWithMediaType:mediaType];
    AVCaptureDevice *captureDevice = [devices firstObject];

    for (AVCaptureDevice *device in devices)
    {
        if ([device position] == position)
        {
            captureDevice = device;
            break;
        }
    }

    return captureDevice;
}

#pragma mark UI

- (void)runStillImageCaptureAnimation
{
    /*
     dispatch_async(dispatch_get_main_queue(), ^{
     [[[self previewView] layer] setOpacity:0.0];
     [UIView animateWithDuration:.25 animations:^{
     [[[self previewView] layer] setOpacity:1.0];
     }];
     });
     */
}

- (void)checkDeviceAuthorizationStatus
{
    NSString *mediaType = AVMediaTypeVideo;

    [AVCaptureDevice requestAccessForMediaType:mediaType completionHandler:^(BOOL granted) {
        if (granted)
        {
            //Granted access to mediaType
            [self setDeviceAuthorized:YES];
        }
        else
        {
            //Not granted access to mediaType
            dispatch_async(dispatch_get_main_queue(), ^{
                [[[UIAlertView alloc] initWithTitle:@"AVCam!"
                                            message:@"AVCam doesn't have permission to use Camera, please change privacy settings"
                                           delegate:self
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil] show];
                [self setDeviceAuthorized:NO];
            });
        }
    }];
} 
```

# ios - 使用协议接收消息？

> ID：14185127
> 
> 赞同：0
> 
> 时间：2013-01-06T18:09:42.693
> 
> 标签：ios, protocols

我目前正在学习 Obj-C，更具体地说 - 协议。为了让我的问题有意义，我需要在这里编造一个场景。

第一个例子（有一个代表）。

1.  我是一个 UIView 子类，它请求从它的控制器显示信息（或者更确切地说应该如何显示信息）。我声明了一个协议并创建了一个委托引用对象（或其他任何名称）：

    ```
    @property (nonatomic, weak) id <protocolName> dataSource; 
    ```

2.  我的控制器符合此协议并实现所需的方法。

3.  View 向 Controller 发送消息，Controller 应答，一切正常。

据我所知，这是通过协议**授权**，我相信我理解它。

**但是让我们考虑另一种情况。**

1.  我是一个类，它是一个简单的基于级别的游戏的大脑。我说何时显示菜单或何时开始玩游戏关卡。**但我需要知道一个关卡何时完成。**

这意味着这个类需要准备好接收来自任何实现该协议的人的消息，例如来自负责当前级别的另一个类。**现在这是我不明白**的。协议应该是什么样子以及在哪里/如何实现它？

如果我的问题仍然没有意义，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:23:57.210

委托是一种用于在实体之间发送消息的一对一关系方法。如果你想从不同的班级接收相同的消息，你可以使用`NSNotification`一对多的关系。

查看`NSNotificationCenter`类，尤其是`postNotification`方法（用于发送消息）和`addObserver`方法（在收到通知时使用）

编辑：这是委托的示例代码。

让我们以您的基于游戏关卡的示例为例。你有一个`LevelManager`班级和`FirstLevel`班级。如果你想在结束`LevelManager`时得到通知`FirstLevel`，你必须在你的`FirstLevel`类中声明一个协议

```
// FirstLevel.h
@protocol SomeProtocol <NSObject>
-(void)levelDidEnd;
@end

@interface FirstLevel : NSObject
@property (nonatomic, weak) id<SomeProtocol> delegate;
@end 
```

然后在您的 FirstLevel.m 中某处，当关卡结束时调用您的协议方法

```
// FirstLevel.m
- (void)playGame {
    if ([player isDead]) {
        [delegate levelDidEnd];
    }
} 
```

下一步是将您的协议实现到您的 LevelManager ：

```
// LevelManager.h
@interface LevelManager : NSObject <SomeProtocol>
@property (strong, nonatomic) FirstLevel *firstLevel;
@end 
```

然后，设置`firstLevel.delegate`并实现您的协议方法

```
// LevelManager.h
- (void)viewDidLoad {
    firstLevel.delegate = self;
}

- (void) didLevelEnd {
    // do actions here like showing the menu
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:06:21.183

您仍然可以使用代表团：

让关卡成为具有类型委托的对象`id<LevelDelegate>`

```
@protocol LevelDelegate <NSObject>
-(void)completedLevel:(Level *)level;
@end 
```

BrainController 符合`LevelDelegate`并创建所有级别。对于每个级别，它都将自己设置为委托。

如果一个关卡认识到它已经完成，它会调用`[self.delegate completedLevel:self];`.

BrainController 得到通知并执行必要的操作。

# clojure - :tag 元数据clojure

> ID：14185129
> 
> 赞同：3
> 
> 时间：2013-01-06T18:09:47.423
> 
> 标签：clojure, metadata

在以下示例中（取自[Programming Clojure，第 2 版](http://pragprog.com/book/shcloj2/programming-clojure)一书：

```
(defn ^{:tag String} shout [^{:tag String} s] (.toUpperCase s)) 
```

*:tag*元数据的价值是什么？做一个：

```
((map #'shout) :tag) 
```

产生**java.lang.String**但如果我无法区分输入和输出参数，究竟传达了什么信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-26T20:16:38.083

我在阅读第三版 Programming Clojure 时遇到了同样的问题，该版本稍微更新了示例：

```
(defn ^{:tag String} shout [^{:tag String} s] (clojure.string/upper-case s)) 
```

这相当于简写形式：

```
; I guess tags and type hints are equivalent
(defn ^String shout [^String s] (clojure.string/upper-case s)) 
```

就像你说的，如果你查找函数元数据，如果标签是指输入或输出参数，那么它是不明确的：

```
(meta #'shout) 
```

...返回

```
{:tag java.lang.String,
 :arglists ([s]),
 etc... } 
```

如果您考虑一下，它必须是返回类型，因为函数可以有 N 个参数，但 Clojure 不允许多个返回值。元数据中的 :tag 不是向量，而是单个值。

如果您实际上以编程方式需要函数参数的标记/类型提示，您可以调用 :arglists 上的元函数，如下所示：

[https://stackoverflow.com/a/26116353/695318](https://stackoverflow.com/a/26116353/695318)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-15T04:11:08.150

> :tag 元数据的价值是什么？

我找到了一个clojure官方文档

[Clojure - 元数据](https://clojure.org/reference/metadata)

```
^String obj - Sets the value of :tag key in the object’s metadata.
Equivalent to ^{:tag java.lang.String} obj
Used to hint an objects type to the Clojure compiler. 
See Java Interop: 
  Type Hints for more information and a complete list of special type hints. 
```

[类型提示](https://clojure.org/reference/java_interop#typehints)

```
Clojure supports the use of type hints to assist the compiler 
in avoiding reflection in performance-critical areas of code. 
```

> 如果我无法区分输入和输出参数，究竟传达了什么信息？

您不需要指定输入或输出参数的类型。并且，如果未指定，clojure 将使用反射执行函数（根据此描述）。

还有一篇[博文](https://kotka.de/blog/2012/06/Did_you_know_IX.html)。根据这篇文章，Clojure 正在为 Clojure 代码创建的所有方法使用 IFn 接口。

```
IFn defines all arguments of .invoke to be of type Object.
So you can pass anything you like to a Clojure function.
It doesn't matter which type it is, because everything is an Object anyway. 
```

所以，我认为调用没有类型提示的Clojure方法和调用Java的反射`.invoke`是一样的。

# java - 从命令行调用 java 应用程序

> ID：14185137
> 
> 赞同：-3
> 
> 时间：2013-01-06T18:10:03.397
> 
> 标签：java

> **可能重复：**
> [Java 库：命令行选项解析器](https://stackoverflow.com/questions/2473557/java-library-command-line-option-parser)

我必须构建一个`Java`将使用此命令行启动的应用程序：

```
myapplicationname [–n num] [-x num –y num] [-t] [-a] 
```

我怎样才能做到这一点？我使用 args[i] 从命令行收集参数，但我正在寻找其他形式来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:14:09.423

你绝对应该看看[commons-cli](http://commons.apache.org/cli/)来解析你的命令行参数。另外，您需要创建一个脚本（bash 或批处理）来启动您的应用程序，或者做一些类似的事情：[自我执行 jar 文件（来自我的博客的文章）](http://en.newinstance.it/2012/04/17/self-executing-jar-files/)。

# java - 规范和政策之间的区别？

> ID：14185139
> 
> 赞同：34
> 
> 时间：2013-01-06T18:10:08.983
> 
> 标签：java, domain-driven-design, policy, specifications

我正在阅读 Eric Evans 撰写的精彩著作《领域驱动设计》。Eric 在他的书中描述了两个不同的概念：规范模式和策略。

以下是规范的示例：

```
public interface ProjectSpecification {
  public boolean isSatisfiedBy(Project p);
}

public class ProjectIsOverdueSpecification implements ProjectSpecification {
  public boolean isSatisfiedBy(Project p) { … }
}

//client:
if {
  (projectIsOverdueSpecification.isSatisfiedBy(theCurrentProject) { … }
} 
```

下面是一个策略示例：

```
public class CargoBooking {

  private OverBookingPolicy overBookingPolicy = new OverBookingPolicy();

  public int makeBooking(Cargo cargo, Voyage voyage) {
    if (!overbookingPolicy.isAllowed(cargo, voyage)) 
      return –1;
    int confirmation = orderConfirmationSequence.next();
    voyage.addCargo(cargo, confirmation);
    return confirmation;
  }
}

public OverBookingPolicy {
  public boolean isAllowed(Cargo cargo, Voyage voyage) {
    return (cargo.size() + voyage.bookedCargoSize()) <= (voyage.capacity() * 1.1);
  }
} 
```

我知道政策实际上是一种策略，但在上面的两个示例中绝对没有区别。所以我现在的问题是：这两种模式有什么区别？这两种模式都明确了业务规则，那么我们为什么要区分这两种模式呢？对我来说，两者都是谓词。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-06T19:27:00.920

SPECIFICATION 背后的主要思想是它是一个谓词，这通常意味着使用逻辑运算符

> 规范是对既定形式主义的改编（Eric Evans DDD，第 274 页）

例如，我们可以说盒子是红色的，即满足一些 RedSpecification。我们可以声明一些 GreenSpecification，甚至是复合 RedOrGreenSpecification。如果我们有一些支持规范逻辑操作的高级框架，它可能类似于

```
BoxSpecification redBoxSpec = BoxSpecification.forColor(BoxColor.RED);
BoxSpecification greenBoxSpec = BoxSpecification.forColor(BoxColor.GREEN);
BoxSpecification redOrGreenBoxSpec = redBoxSpec.or(greenBoxSpec); 
```

然后我们可以使用规范来查询某个存储库中的所有红色/绿色框：

```
Collection<Box> boxes = boxRepository.findAll(redOrGreenBoxSpec); 
```

至于 POLICY - 它是 STRATEGY 模式的变体，但其主要目的是封装业务规则是某种声明形式。

从技术上讲 - 它并不总是 STRATEGY 的直接实现 - 在第一阶段它可以只是一个单独的类（如蓝皮书的第一章所示），但它可以在以后轻松扩展

> *Policy*是称为 STRATEGY 的设计模式的另一个名称。它的动机通常是需要替换不同的规则，据我们所知，这里不需要。但我们试图捕捉的概念确实符合政策的*含义*，这在领域驱动设计中同样重要

例如，我们在一月份用黄色盒子包装礼物，在二月份用红色盒子包装礼物

```
public class Box{
  public BoxColor getColor(){}
  public void recolor(BoxColor color){} 
}

public class BoxFactory{
    public Box createDefaultBox(SomeDate date){
         NewBoxPolicy boxPolicy = PolicyRegistry.getNewBoxPolicyForDate(date);
         Box box = new Box();
         boxPolicy.prepareBox(box);
         return box;
   }
}
public interface NewBoxPolicy{
   void prepareBox(Box box);
}
public class FebruaryNewBoxPolicy implements NewBoxPolicy{
    public void prepareBox(Box box) { box.recolor(BoxColor.RED}; }
}
public class JanuaryNewBoxPolicy implements NewBoxPolicy{
    public void prepareBox(Box box) { box.recolor(BoxColor.YELLOW}; }
}
public class PolicyRegistry{
   public static NewBoxPolicy getNewBoxPolicyForDate(SomeDate date){
      switch (date.month()){
         case SomeMonth.JANUARY: return JANUARY_NEW_BOX_POLICY;
         case SomeMonth.FEBRUARY: return FEBRUARY_NEW_BOX_POLICY;
         default: throw new AssertionError();
      }
} 
```

重要的是要理解 POLICY 可以封装动作，而 SPECIFICATION 只描述对象的属性（这些属性可以满足或不满足业务需求）。当然，某些验证 POLICY 可以使用 SPECIFICATION 来检查要求是否得到满足。

因此，您的项目中可以有许多不同的 SPECIFICATION 实例，它们可以从业务角度描述有效和无效的对象。实际上，规范根本没有意义：例如，如果您有一个产品搜索站点，用户可以指定一个请求来搜索名为“XBOX”的产品，但供应商名称为“Sony”，如果知道只有特定供应商可以生产的特定产品未包含在您的模型中。

POLICY 的重要方面是它的意图是封装*实际*的业务规则（因此代码不会分散在项目的不同部分），因此当规则发生变化时，您可以轻松找到相应的类。因此，您的项目中可以有许多 SPECIFICATION，但 POLICIES 的数量是可管理的，并且这些 POLICIES 应该很容易找到和更改。

PS请注意，这篇文章只是一个例子，并不是过度设计的许可，当然你应该使用最简单的设计，这是常识。

# c++ - C ++ 11`T&&`参数丢失了`&&`正确的术语？

> ID：14185142
> 
> 赞同：5
> 
> 时间：2013-01-06T18:10:26.430
> 
> 标签：c++, c++11

以下 C++11 代码无法编译：

```
struct T {};

void f(T&&) { }

void g(T&& t) { f(t); }

int main()
{
    g(T());
} 
```

正确的方法是：

```
void g(T&& t) { f(move(t)); } 
```

这很难用正确的自然语言术语来解释。该参数`t`似乎失去了它需要恢复的“&&”状态`std::move`。

你叫`T()`什么`g(T())`？

你叫`T&&`什么`g(T&& t)`？

你叫`t`什么`g(T&& t)`？

你怎么称呼`t`in`f(t)`和`f(move(t))`？

什么叫返回值`move(t)`？

什么叫整体效果？

标准的哪些部分处理这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T18:16:15.847

所有参数都是左值，即使它们的类型是“右值引用”。它们有名称，因此您可以根据需要随时引用它们。如果命名的右值引用是右值，你会得到令人惊讶的行为。我们不希望从左值进行隐式移动，这就是您必须显式编写`std::move`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T18:19:34.407

关键是一个参数`T&& b`只能绑定到一个右值，但是当后面提到时，表达式`b`是一个左值。

所以函数的参数必须是一个右值，但在函数体内，参数是一个左值，因为到那时你已经绑定了一个对它的引用并给它一个名字，它不再是一个未命名的临时值。

表达式有一个*类型*（例如`int`等`string`），它有一个*值类别*（例如左值或右值），这两个东西是不同的。

一个被声明为`T&& b`“rvalue reference to `T`”类型的命名变量，并且只能绑定到一个rvalue，但是当您稍后使用该引用时，表达式`b`具有值类别“lvalue”，因为它有一个名称并引用了某个对象（无论引用绑定到什么，即使那是一个右值。）这意味着传递`b`给另一个函数，该函数接受一个右值，你不能只说`f(b)`因为`b`它是一个左值，所以你必须将它（返回）转换为右值，通过`std::move(b)`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-06T18:15:36.353

> g(T()) 中的 T() 叫什么？

临时的（可移动的）。

> 您将 g(T&& t) 中的 T&& 称为什么？

T&& 是一个右值引用，代表一个可以移动的对象。

> g(T&& t) 中的 t 叫什么？

t 实际上是一个左值，因为您可以通过名称来引用它。

> 您将 f(t) 和 f(move(t)) 中的 t 称为什么？

1.  左值
2.  当 move() 返回时，左值被转换为右值引用

> 你把 move(t) 的返回值叫做什么？

r 值参考

作为说明；您也许应该调用结构 C，并编写一个单独的示例，其中 T 实际上是模板化的。那么代码需要有所不同，因为在一个函数中`template< typename T > void f( T&& t );`你不能简单地使用`std::move()`而不**非常**小心，因为 T 实际上可以是 a `const&`，在这种情况下你**不能**使用`std::move()`而是使用完美*转发*`std::forward< T >( t )`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-06T18:17:02.210

> g(T()) 中的 T() 叫什么？

那是一个临时对象和一个 r 值。

> 您将 g(T&& t) 中的 T&& 称为什么？

你称之为右值参考。

之所以

```
void g(T&& t) { f(t); } 
```

不起作用是因为 r 值引用无法绑定到命名对象（即使该命名对象恰好是另一个 r 值引用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-06T18:16:48.867

该参数`t`不会丢失其“状态”。简单地说，参数`t`是一个左值，即使它是一个右值引用。请记住，左值和右值是正交概念，并且适用于值引用（包括右值引用）的值。因此，右值引用可以是左值或右值。如果它有一个名称，如您的示例所示，它是一个左值。这使得类型系统正交，恕我直言，这是一个*很好*的功能。

# prolog - Prolog中的“？-”是什么意思？

> ID：14185144
> 
> 赞同：4
> 
> 时间：2013-01-06T18:10:31.017
> 
> 标签：prolog, prolog-toplevel

Prolog 中的含义是什么`?-`？

例如：

```
?- consult(solve) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:33:22.150

`?-`通常是顶级循环或顶级 shell 的提示符——您可以在此处进行查询和输入命令。它具有与其他语言中的 read-eval-print 循环类似的功能。

在某些系统中，这个提示是或曾经`| ?-`是更传统的提示。该提示来自~1978 年早期的 Prolog 系统之一，DECsystem 10 Prolog。输入的操作系统提示是`|`，用户必须输入`?- X is 1+1.`才能输入查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:15:04.273

在 prolog 解释器中，您可以请求数据（基本上是在运行 prolog 脚本），系统会回答是或否。解释`?-`器用 表示他在等待请求。

例子：

```
?- male(adam).
yes.
?- male(eve).
no. 
```

[在维基百科文章](http://en.wikipedia.org/wiki/Prolog)中阅读更多内容

# ruby-on-rails - ID 未保存在 Rails 中

> ID：14185165
> 
> 赞同：0
> 
> 时间：2013-01-06T18:12:35.673
> 
> 标签：ruby-on-rails, database

我是一个 Rails 新手，我遇到了一个我无法超越的问题。我已经查看了所有内容，但找不到有效的答案。我有一个允许用户建立友谊的应用程序。那部分工作得很好。然而，我最近通过将朋友加入圈子（有点像 Google+）为友谊增加了另一个层次。我遇到的问题是圆圈没有保存在数据库中。以下是正在发生的事情：

```
Processing by UserFriendshipsController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"cupb6S+IdrxqSuEqgfqehJh++POHUMQQ9QqbQVrGtHk=", "user_friendship"=>{"circle_id"=>"9", "friend_id"=>"jimbo"}, "commit"=>"Yes, Add Friend"}
User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."profile_name" = 'jimbo'     LIMIT 1
(0.0ms)  begin transaction
SQL (0.7ms)  INSERT INTO "user_friendships" ("circle_id", "created_at", "friend_id", "state", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?)  [["circle_id", nil], ["created_at", Sun, 06 Jan 2013 17:40:30 UTC +00:00], ["friend_id", 2], ["state", "pending"], ["updated_at", Sun, 06 Jan 2013 17:40:30 UTC +00:00], ["user_id", 1]]
SQL (0.2ms)  INSERT INTO "user_friendships" ("circle_id", "created_at", "friend_id", "state", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?)  [["circle_id", nil], ["created_at", Sun, 06 Jan 2013 17:40:30 UTC +00:00], ["friend_id", 1], ["state", "requested"], ["updated_at", Sun, 06 Jan 2013 17:40:30 UTC +00:00], ["user_id", 2]] 
```

这是表格：

```
<%= simple_form_for @user_friendship, method: :post do |f| %>
<div class="form-inputs">
  <%= f.collection_select :circle_id, current_user.circles.all(:order => 'name'), :id, :name %>
</div>
<div class="form form-actions">
  <%= f.hidden_field :friend_id, value: @friend.profile_name %>
  <%= f.button :submit, "Yes, Add Friend", class: 'btn btn-primary' %>
  <%= link_to "Cancel", profile_path(@friend), class: 'btn' %>
</div>
<% end %> 
```

以下是关联：

```
class UserFriendship < ActiveRecord::Base
  belongs_to :circle

class Circle < ActiveRecord::Base
  has_many :friends, through: :user_friendships 
```

在用户到达表单之前已经创建了圆圈。我已经通过迁移将 circle_id 添加到 user_friendships 表中，因此可以保存 id。对于我的生活，我无法弄清楚这里出了什么问题。表格上没有错误，友谊仍然保存，只是没有圈子。我可能做错了什么？

（如果您需要更多信息，请告诉我）

**编辑** 这是控制器动作

```
def create
  if params[:user_friendship] && params[:user_friendship].has_key?(:friend_id)
    @friend = User.where(profile_name: params[:user_friendship][:friend_id]).first
    @user_friendship = UserFriendship.request(current_user, @friend)
    if @user_friendship.new_record?
      flash[:error] = "There was problem creating that friend request."
    else
      flash[:success] = "Friend request sent."
    end
    redirect_to profile_path(@friend)
  else
    flash[:error] = "Friend required"
    redirect_to root_path
  end
end 
```

这是 user_friendships 表：

```
 create_table "user_friendships", :force => true do |t|
    t.integer  "user_id"
    t.integer  "friend_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "state"
    t.integer  "circle_id"
  end

  add_index "user_friendships", ["circle_id"], :name => "index_user_friendships_on_circle_id"
  add_index "user_friendships", ["state"], :name => "index_user_friendships_on_state"
  add_index "user_friendships", ["user_id", "friend_id"], :name => "index_user_friendships_on_user_id_and_friend_id" 
```

这是请求方法：

```
 def self.request(user1, user2)
    transaction do
      friendship1 = create!(user: user1, friend: user2, state: 'pending')
      friendship2 = create!(user: user2, friend: user1, state: 'requested')

      friendship1.send_request_email
      friendship1
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:51:49.197

为什么它不保存的简单答案`circle_id`是你从不使用它。

从您向我们展示的日志消息中，它以`params[:user_friendship][:circle_id]`

但你永远不会对此做任何事情。

我建议进行以下更改

```
def self.request(user1, user2, circle)
  transaction do
    friendship1 = create!(user: user1, friend: user2, state: 'pending', circle: circle)
    friendship2 = create!(user: user2, friend: user1, state: 'requested', circle: circle)

    friendship1.send_request_email
    friendship1
  end
end 
```

然后从控制器传入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:17:26.503

我认为参数是 params[:user_friendship][:circle_id] 并检查您是否使用此参数保存 circle_id。还要检查从视图中获得的 circle_id 是否是“整数”类型。

# jquery - 如何在jquery中将一个div的最小高度更改为另一个div的高度 - 代码不起作用

> ID：14185167
> 
> 赞同：0
> 
> 时间：2013-01-06T18:12:37.310
> 
> 标签：jquery, html, dynamic, css

我已经根据此处和其他网站上发现的类似问题的许多答案搜索和玩弄了这段代码——我认为它应该可以工作，但事实并非如此。我肯定错过了什么。

如果左 div 大于原始最小高度，我想动态地将侧边栏 div 的高度更改为与左 div 相同的高度。两个 div 中都没有背景图像，但有一个对设计很重要的边框，该边框以最小高度结束。

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
  $(document).ready(function() {
    var leftHeight = $('#left-area').height();
    var sidebarHeight = $('#sidebar').height();

    if( leftHeight > 690 ) {
      $('#sidebar').css('min-height' , leftHeight+'px' );
      }
    else {
      }
    });
  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:19:51.743

你需要分开你的javascript：

此外，您不需要“px”。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    var leftHeight = $('#left-area').height();
    var sidebarHeight = $('#sidebar').height();

    if( leftHeight > 690 ) {
      $('#sidebar').css('min-height' , leftHeight);
      }
    else {
      }
    });
</script> 
```

如果您遇到 javascript 错误，您可以随时检查控制台。

# java - 如何使用唯一值从 CSV 文件中选择特定行

> ID：14185171
> 
> 赞同：0
> 
> 时间：2013-01-06T18:13:01.440
> 
> 标签：java, opencsv

我有几行包含这些值的 CSV 文件：

```
2, Joe, BMW
6, Mark, Audio
7, Jeff, Fiat
9, Mike, Toyota 
```

现在我知道如何使用 OpenCSV 选择特定的行，即。第 1、2 或 3 行等。但我不知道如何选择例如第一个值为 6 的行。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:20:38.643

你可以：

```
Reader reader = new FileReader("data.csv");
List<String[]> rows = new CSVReader(reader).readAll();

for(String[] column: rows) {
if (column[1].equals("6")){
    System.out.println("Found row No. is " + rows.indexOf(column));
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:53:22.100

@Dharanae

你应该使用`String[] rows`而不是`List<String[]> rows`因为`readNext()`返回你一个`String[]`

# c - lex - 如何从字符串文字中消除双引号

> ID：14185172
> 
> 赞同：0
> 
> 时间：2013-01-06T18:13:03.750
> 
> 标签：c, lex

我想消除字符串开头和结尾的双引号。

我使用 Lex 规则从输入文件中获取字符串文字，如下所示：

```
\".*\"   {yyno++; yylval.string = strdup(yytext); return STRINGLITERAL;} 
```

但是当我在 Yacc 程序的某个地方使用字符串时，我只想使用字符串部分。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:25:12.110

您只需要参加相关部分，例如：

```
 // you allocate a string which is the length of the token - 2 " + 1 for '\0'
 yylval.string = calloc(strlen(yytext)-1, sizeof(char));
 // you copy the string
 strncpy(yylval.string, &yytext[1], strlen(yytext-2));
 // you set the NULL terminating at the end
 yylval.string[yytext-1] = '\0'; 
```

因此，如果`yytext == "\"foobar\""`首先分配长度`8 - 2 + 1 = 7`字节的字符串（这是正确的，因为它将是`foobar\0`，然后从 开始复制 8-2 个字符`'f'`，最后设置`NULL`终止字符。

实际上，使用 calloc 内存已设置为 0，因此您不需要放置`NULL`终止字符，但您会这样做`malloc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T20:38:55.570

```
\".*\" {
    yylval.string = (char*)calloc(strlen(yytext)-1, sizeof(char));
    strncpy(yylval.string, &yytext[1], strlen(yytext)-2);
    return STRINGLITERAL;
} 
```

Jan 解释得很好，我只是在澄清 lex 并为下一个可怜的灵魂修正一些错别字。

# java - 向服务器发送请求 java

> ID：14185173
> 
> 赞同：1
> 
> 时间：2013-01-06T18:13:12.687
> 
> 标签：java

我为服务器和客户端编写了一些代码，以将文件从服务器传输到客户端，它就像一个魅力；但是我有几个问题。我想在 GUI 下构建此代码，并且我想列出文件夹中的所有文件，但是如何让客户在看到提供的文件列表后选择他想要的文件（如何将字符串发送到服务器以选择文件）？

服务器代码

```
import java.io.*;
import java.net.*;

class TCPServer {

    public static void listfile(){

    File folder = new File("c:/");
    File[] listOfFiles = folder.listFiles();

    for (int i = 0; i < listOfFiles.length; i++) {
      if (listOfFiles[i].isFile()) {
        System.out.println("File " + listOfFiles[i].getName());
      } else if (listOfFiles[i].isDirectory()) {
        System.out.println("Directory " + listOfFiles[i].getName());
      }
    }
  }

    public static void main(String args[]) {

        listfile();

        while (true) {
            ServerSocket welcomeSocket = null;
            Socket connectionSocket = null;
            BufferedOutputStream outToClient = null;

            try {
                welcomeSocket = new ServerSocket(3248);
                connectionSocket = welcomeSocket.accept();
                outToClient = new BufferedOutputStream(connectionSocket.getOutputStream());
            } catch (IOException ex) {
                // Do exception handling
            }

            if (outToClient != null) {

                String FileName = "carexception.java";

                File myFile = new File("C:\\"+FileName);

                byte[] mybytearray = new byte[(int) myFile.length()];

                FileInputStream fis = null;

                try {
                    fis = new FileInputStream(myFile);
                } catch (FileNotFoundException ex) {
                    // Do exception handling
                }
                BufferedInputStream bis = new BufferedInputStream(fis);

                try {
                    bis.read(mybytearray, 0, mybytearray.length);
                    outToClient.write(mybytearray, 0, mybytearray.length);
                    outToClient.flush();
                    outToClient.close();
                    connectionSocket.close();

                    // File sent, exit the main method
                    return;
                } catch (IOException ex) {
                    // Do exception handling
                }
            }

        }
    }
} 
```

客户代码

```
import java.io.*;
import java.net.*;
import java.util.*;

class TCPClient {

    public static void main(String args[]) {
        Scanner s = new Scanner(System.in);
        byte[] aByte = new byte[1];
        int bytesRead;

        Socket clientSocket = null;
        InputStream is = null;

        try {
            clientSocket = new Socket("127.0.0.1", 3248);
            is = clientSocket.getInputStream();
        } catch (IOException ex) {
            // Do exception handling
        }
        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        if (is != null) {

            FileOutputStream fos = null;
            BufferedOutputStream bos = null;
            try {
                fos = new FileOutputStream("E:\\sss.java");
                bos = new BufferedOutputStream(fos);
                bytesRead = is.read(aByte, 0, aByte.length);

                do {
                        baos.write(aByte);
                        bytesRead = is.read(aByte);
                } while (bytesRead != -1);

                bos.write(baos.toByteArray());
                bos.flush();
                bos.close();
                clientSocket.close();
            } catch (IOException ex) {
                // Do exception handling
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T13:57:41.450

为了完成你的目标，你必须改变很多事情。

您可以假设特定的协议顺序，即客户端需要向服务器发送请求以使服务器执行任何操作，因此在建立连接时服务器始终处于侦听状态。

你应该，

1.  引入发送请求和接收响应的循环
2.  弄清楚如何发送一个字符串对象
3.  分解文件发送部分，这样您就不会分配比操作系统可以提供的更大的字节数组（例如，考虑一个 4GB 的文件，为整个文件分配一个字节数组可能很麻烦）

因此，考虑到这一点，我们可以开始了。关于步骤 1，这可以使用 while 循环来完成。如果我们假设服务器总是监听一个请求，那么服务器“请求循环”可能看起来像这样。

```
ClientRequest request;
while (request.getType() != RequestType.Complete) {
    // receive new request
    // depending on type, send response
} 
```

我们在这里简单地添加了两个类，一个`ClientRequest`封装来自客户端的消息，一个`RequestType`定义客户端感兴趣的请求类型的枚举，例如文件列表或文件内容。

```
public enum RequestType {
   None, Complete, RequestFileList, RequestFileContent
}

public class ClientRequest {
   private RequestType type;
   public ClientRequest() {
       type = RequestType.None;
   }

   public RequestType getType() {
       return type;
   }
} 
```

现在我们需要以某种方式将它附加到套接字，因此我们添加了一个接收请求的方法，并将该请求分配给当前请求实例。

```
ClientRequest request = new ClientRequest();
while (request.getType() != RequestType.Complete) {
    // receive new request
    receiveRequest(clientSocket.getInputStream(), request);
    if (request.getType() != RequestType.Complete) {
        // pick a response
    }
}

private void receiveRequest(DataInputStream socketStream, ClientRequest request) {
    // get a type of request
    byte type = socketStream.readByte();
    request.setType(RequestType.from(type));
    // get parameters for request, depending on type
    if (request.getType() == RequestType.RequestFileContent) {
        // receive file id (file name for instance, or some other id that you prefer)
        String argument = readString(socketStream);
        request.setArgument(argument);
    }
} 
```

这`from`在 RequestType 中添加了一个方法，用于将一个字节转换为一个请求、一个`setType`in 中的方法`ClientRequest`和一个`readString`方法。我们还在 ClientRequest 中添加了一个新字段以及相应的 get 和 set 方法。

```
public enum RequestType {
    // types as before
    ;
    public static RequestType from(byte b) {
        switch (b) {
            case 1: return RequestType.Complete;
            case 2: return RequestType.RequestFileList;
            case 3: return RequestType.RequestFileContent;
            default: return RequestType.None;
         }
    }
}

public class ClientRequest {
    private String argument;
    public void setType(RequestType value) {
        type = value;
    }

    public String getArgument() {
        return argument;
    }

    public void setArgument(String value) {
        this.argument = value;
    }
}

private String readString(DataInputStream socketStream) {
    int length = socketStream.readInt();
    byte[] stringBytes = new byte[length];
    socketStream.read(stringBytes);
    return new String(stringBytes, "UTF-8");
} 
```

现在我们进入下一步，响应请求。只需添加一个开关盒并处理请求的类型。

```
{
    // depending on type, send response
    handleRequest(clientSocket.getOutputStream(), request);
}

private void handleRequest(DataOutputStream socketStream, ClientRequest request) {
    switch (request.getType()) {
        case RequestType.RequestFileList: {
            String[] fileList = getFileList(getCurrentDirectory());
            // send response type
            socketStream.write(ResponseType.ResponseFileList.getByte());
            // send number of files
            socketStream.writeInt(fileList.length);
            // send each string
            for (String fileName : fileList) {
                sendString(socketStream, fileName);
            }
        }
        break;
        case RequestType.RequestFileContent: {
            // send response type ResponseType.ResponseFileContent
            // send length of file so other party can determine number of bytes to receive
            // send file contents in chunks of a fixed byte array length
            // send last part of file contents, if length of file is not evenly divided by array chunk size
        }
        break;
    }
} 
```

sendString 方法只是 readString 方法的“倒序”。

```
private void sendString(DataOutputStream socketStream, String value) {
    int length = value.length();
    socketStream.writeInt(length);
    byte[] stringBytes = value.getBytes("UTF-8");
    socketStream.write(stringBytes);
} 
```

`ResponseType`是类似于 中的值的枚举，`RequestType`因此客户端可以处理服务器发送的响应类型。

通过这些更改，您将能够请求文件列表并显示服务器发送的文件的响应。当用户选择要接收的文件时，客户端可以向服务器发送新请求，服务器可以向客户端发送适当的文件内容。

客户端应用程序将必须定义一个类似的`ClientRequest`类（可能使用 name `ServerResponse`），其中包含服务器指定的用于读取和写入套接字流的相应方法。这可以通过将套接字封装在一个类中来进一步抽象，使用监听器模式来接收 GUI 可以订阅的请求或响应，..尽管这超出了我的示例。

如果您觉得我需要澄清任何事情，请发表评论，我会尽力回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:57:15.973

你怎么问文件？按名字！我认为服务器接受命令并响应响应。您可以将命令的格式用于服务器：CMD_NAME, arg1, arg2, ... 参数可以是二进制的，取决于命令。通过 CMD_NAME，您的服务器将区分您想要的内容（接受文件或提供文件）。

您有一个问题，即您只接受一种类型的请求。您需要一个命令机制来向服务器询问不同的请求。服务器需要解析这些请求，而不是立即给出硬编码的答案。这将使其灵活。

[http://www.javamex.com/tutorials/networking/simple_server_s_side.shtml](http://www.javamex.com/tutorials/networking/simple_server_s_side.shtml)我相信还有很多这样的例子。Java 套接字是可靠的，不会有问题。刚开始学习基础知识，如何在客户端和服务器之间传递不同的消息。但是，您的问题根本与套接字无关。想象一下，您通过文件进行通信：从一个文件读取请求并将响应写入另一个文件。那你会写哪些信息？这称为协议。你需要设计一个简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T18:24:34.913

您是否尝试过创建一个数组，所以每个文件都有自己的索引......当客户选择他想要的文件时，您返回某个数组索引上的文件。

〜顺便说一句，您可以序列化您的数组并将其发送给客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T19:50:27.023

您可以使用`ObjectOutputStream`发送字符串或任何其他类型的`Object`via `writeObject`。

# windows - 将整个子文件复制到 Windows 平台中没有路径的其他（只有一个）文件夹

> ID：14185174
> 
> 赞同：0
> 
> 时间：2013-01-06T18:13:14.183
> 
> 标签：windows, file, batch-file, copy, xcopy

我做了很多搜索，但是我无法实现我想做的事情：

我有一个文件夹，其中包含许多文件夹和文件。我只想将此文件夹中的整个 JPEG 文件复制到另一个文件夹，而不复制以前的路径树。我这样使用这个批处理命令：

for /r "C:\source" %%f in ("*.JPG") do @copy %%f "C:\dest" /Y

它适用于一些文件名中不包含任何空格的文件。但是，它不适用于文件名中包含空格的文件：

它可以找到并复制“aabb.JPEG” 它不能复制“aa bb.JPEG”

任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T17:10:32.677

以下对我很有用

```
@ECHO OFF
FOR /R "c:\source" %%F IN (*.jpg) DO (
  copy "%%F" "c:\dest\" /Y
) 
```

# android - xml放下按钮

> ID：14185176
> 
> 赞同：0
> 
> 时间：2013-01-06T18:13:30.620
> 
> 标签：android

我再次花了几个小时来解决这个问题（很容易），但对我来说是个难题。我不能将按钮放在视图底部。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

            <ImageView
                android:id="@+id/imageView1"

                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                 />

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <WebView
                    android:id="@+id/webView1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" />
            </ScrollView>
</LinearLayout>

<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:text="Button" />

</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:19:02.123

你不能在`LinearLayout`. 而是尝试`RelativeLayout`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imageView1"

            android:layout_width="match_parent"
            android:layout_height="wrap_content"
             />

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <WebView
                android:id="@+id/webView1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />
        </ScrollView>
  </LinearLayout>

<Button
   android:id="@+id/button1"
   style="?android:attr/buttonStyleSmall"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_alignParentBottom="true"
   android:text="Button" />

</LinearLayout> 
```

# matlab - 陷阱整合

> ID：14185179
> 
> 赞同：0
> 
> 时间：2013-01-06T18:13:44.433
> 
> 标签：matlab

我有一个数字数组，我想整合数组 seperatley 中的每一列，最后在整合后取回一个数字数组。

我尝试了“trapz”函数，但我得到了一个值，我该怎么做上面我想要的？

这是我的代码：

```
t=-1:0.001:1;
x1=100*sinc(100*t);
x2= 100*(sinc(100*t)).^2;
W= -2000*pi:2*pi:2000*pi;
T=-1:0.001:1;
u=x1.*exp(-1i.*W.*t);
v=x2.*exp(-1i.*W.*t);
X11= trapz(t,u);
X22= trapz(t,v); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:02:10.080

如果我正确地跟随你，你需要`u`和`v`成为矩阵。为此，您必须解决代码中的两个问题：

1.  `ω⋅t`乘积应该是矩阵而不是向量。为此，您需要使用矩阵乘法`W.' * t`（注意添加的转置！）而不是逐元素乘法 ( `.*`)。这会产生转换所需的所有必要组合`ω⋅t`。

2.  以类似的方式，您需要`x`逐`exp(-iωt)`列相乘。使用`bsxfun`而不是逐元素乘法，如下所示：

    ```
    u = bsxfun(@times, x1(:), exp(-i * W.' * t)); 
    ```

    这同样适用于`v`。

由于您使用相同`exp(-i * W.' * t)`的 for`u`和 for `v`，我建议计算一次并将其存储在一个变量中：

```
E = exp(-i * W' * t);
u = bsxfun(@times, x1(:), E);
v = bsxfun(@times, x2(:), E); 
```

进行此修复后，`trapz`现在应该会产生所需的结果，*即* `X11`和`X12`应该是分别应用于`x1`和的傅里叶变换`x2`。

# bash - 在 bash 和 csh 中读取用户输入

> ID：14185180
> 
> 赞同：0
> 
> 时间：2013-01-06T18:13:47.917
> 
> 标签：bash, csh

我正在尝试创建一个脚本来做简单的事情。我需要提示用户回答问题，输入是或否。该脚本是为 csh 编写的，但在默认用户 shell 为 bash 时不起作用。我的环境是 Red Hat Enterprise Linux 5

```
#!/bin/csh -f
echo -n Type yes to continue
set answer = $<
#... 
```

此代码适用于 csh 但不适用于 bash 打印以下错误：

```
syntax error near unexpected token 'newline'
bash 'set answer =$<' 
```

我真的需要为两个 shell 使用相同的脚本（我认为这是放在`#!/bin/csh`文件开头的目的！）

我真的不知道如何修改我的脚本以使其在 bash 中工作。请问你能帮帮我吗？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:06:56.010

很难想出比 csh 和 bash 更多不同的 shell。它们是不同的语言，你不能期望 csh 代码在 bash 中工作，或者相反。

在 bash 中，您使用内置的 shell 从 STDIN 读取`read`，在 csh 中，您使用构造`$<`。不同语言。

*我真的需要为两个 shell 使用相同的脚本* 为什么？当您放置`#!/bin/csh`在脚本的开头时，它将运行 c-shell，`#!/bin/bash`然后使用它将运行 bash。常见的错误是在 之前有空格或其他字符`#!`，它们必须绝对是文件中的前两个字节。

# nhibernate - NHibernate - 有效搜索分层数据的标准

> ID：14185183
> 
> 赞同：0
> 
> 时间：2013-01-06T18:14:22.247
> 
> 标签：nhibernate

假设我们有一个像这样的对象模型：

```
public class Category
{
    public virtual Category Parent { get; set; }
    public virtual string Name { get; set; }
    public virtual ISet<Category> Children { get; protected set; }
}

public class Product
{
    public virtual string Name { get; set; }
    public virtual Category Category { get; set; }
    public virtual decimal Price { get; set; }
} 
```

在数据库方面，关系将通过多对多关系表来完成，因此数据模式将是这样的：

```
Category
=================
Id int PK
Name varchar(50)
Parent_Id int FK

Product
=================
Id int PK
Name varchar(50)
Price money

ProductToCategory
=================
Product_Id int PK
Category_Id int PK 
```

现在让我们假设类别树中有一个如下所示的分支：

*   食物

    *   坚果
        *   腰果
        *   花生
        *   胡桃
    *   面包
        *   黑麦
        *   小麦
        *   白色的

假设我们的产品可能只分配了一个子类别，是否有可能构造一个`Criteria`将所有类别的产品返回`Food`到数据库并且不使用 CTE 的单次命中？

或者，鉴于不会有丰富的类别，将完整的类别映射加载到内存中并构建标准以便搜索产品`where Category_Id in (...)`并从内存树中构建列表会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:16:04.057

您必须使用 CTE 来执行此操作。我想不出一个单独的 SQL 查询会在不使用的情况下加载分层类别的所有产品，更不用说让 NHibernate 为你做这件事了。

> > 或者，鉴于不会有丰富的类别，最好将完整的类别映射加载到内存中并构建标准，以便它搜索 Category_Id in (...) 和列表构建的产品内存树？

是的。如果没有太多数据并且这是一个选项，那么它是最简单、最快、维护成本低、最不复杂的方法。

# android - 拍摄照片而不保存

> ID：14185184
> 
> 赞同：2
> 
> 时间：2013-01-06T18:14:23.640
> 
> 标签：android, android-camera

我正在尝试使用此代码拍照：

```
capturarFoto.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Log.d("debugging","Has clicat al botó");
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, 1888);
        }           
    });

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if( requestCode == 1888 && resultCode == -1) { //-1 = TOT HA ANAT BE.
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        Log.d("debugging",""+photo.getHeight());
        Log.d("debugging",""+photo.getWidth());
        ((ImageView) myFragmentView.findViewById(R.id.fotoCapturada)).setImageBitmap(photo);
    }
} 
```

这是完美的，当我拍摄照片时，它会显示在 ImageView 中。但我正在尝试创建某种可编辑的选项、旋转等。所以我不想保存它（所以画廊已经缓存了它！！）。

我读过一些类似的问题，这是一件很棒的事情：

*   在 SDCARD 上创建一个文件夹
*   在那里保存临时图片
*   创建一个 .nomedia 文件，这样画廊就不会访问它。
*   删除或保存适用于图片，并将其保留在该文件夹中。

我正在尝试更新上面的代码，以适应它以实现这些点，但我在谷歌找到的代码，总是使用其他 api，其中一些，旧的......

有没有“简单”的方法来实现这一目标？

创建文件夹和创建该文件的部分没什么大不了的，所以：

**- 我如何为我用我的应用程序拍摄的照片设置保存路线？**

谢谢你。

编辑：

好的，我找到了一些代码，但它不起作用（即使我授予了 SD 写入权限）：

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            File file = new File(Environment.getExternalStorageDirectory().getPath() + "/folder/" + "filename" + ".jpg");
            Uri imageUri = Uri.fromFile(file);
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);

            startActivityForResult(cameraIntent, 1888); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:30:06.563

好吧，最后我找到了如何将图片保存到我们想要的 URI 中：

```
public void onClick(View v) {
            Log.d("debugging","Has clicat al botó");

            File folder = new File(Environment.getExternalStorageDirectory().toString()+"/ImagesFolder/");
            folder.mkdirs();

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            Uri uriSavedImage=Uri.fromFile(new File(Environment.getExternalStorageDirectory().toString()+"/ImagesFolder/imatge.jpg"));
            cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);

            startActivityForResult(cameraIntent, 1888);
        } 
```

就是这样。

请记住授予在 SDCard 上写入的权限。

# c# - 实体框架 4.1 两个属性名相同的表

> ID：14185189
> 
> 赞同：5
> 
> 时间：2013-01-06T18:14:51.267
> 
> 标签：c#, entity-framework, ef-code-first, wcf-data-services

我在实体框架和 sql 数据库方面遇到了一些问题。所以我的问题是这样的：在我的数据库中有两个表具有相同的属性，它们的类型和长度相同，但它们没有任何关系。没有任何外键。一旦我开始与数据库实体框架交互，就会吐出著名的错误：

> 错误 0019：类型中的每个属性名称都必须是唯一的。属性名称已定义。

顺便说一句，我正在使用代码优先方法。

这是表的类表示之一：

```
[Table("bo")]
public class TbPBO
{
   [Required(AllowEmptyStrings = false, ErrorMessage = "O campo de nome nao pode ser nulo")]
    [MaxLength(55, ErrorMessage = "O campo de nome nao pode ter mais que 55 caracteres")]
    [Column("nome", TypeName = "char", Order = 4)]
    public string TbBonome { get; set; }
 } 
```

这是表的另一个类表示：

```
[Table("bi")]
public class TbPBi
{
    [Required(AllowEmptyStrings = false, ErrorMessage = "O campo nome nao pode ser nulo")]
    [MaxLength(55, ErrorMessage = "O campo nome nao pode ter mais que 55 caracteres")]
    [Column("nome", TypeName = "char", Order = 62)]
    public string TbBinome { get; set; }
} 
```

我尝试使用它来修改我的上下文，但没有任何运气。

```
public class PHCDbContext:DbContext
{
     public PHCDbContext(string connection):base(connection)
     {

        Database.SetInitializer<PHCDbContext>(null);
     }
     protected override void OnModelCreating(DbModelBuilder modelBuilder)
     {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<TbPBO>()
            .Map(mbo => { mbo.Properties(tnome => new { tnome.TbBonome }); mbo.ToTable("bo"); });

        modelBuilder.Entity<TbPBi>()
            .Map(mbo => { mbo.Properties(tnome => new { tnome.TbBinome }); mbo.ToTable("bi"); });

    }
} 
```

关于如何解决这个问题的任何想法？还有一件事。不得以任何方式更改数据库。我无法修改它。

帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:45:25.727

经过多次谷歌搜索和反复试验。我发现了 ef 电动工具，安装了它并让它对我的数据库进行逆向工程。我让进程运行。它映射了表格。创建了类和上下文。对于我一直在测试的问题，问题已经解决了。谢谢您的帮助

# c# - WPF 网格中的独立宽度

> ID：14185191
> 
> 赞同：1
> 
> 时间：2013-01-06T18:14:58.007
> 
> 标签：c#, silverlight, windows-phone-7, grid

我在 WPF 中有一个 2 行 2 列的网格。我希望每行的列宽都是独立的。我试过“自动”，但没有成功。这是一张图片以便解释：

![在此处输入图像描述](../Images/4d7d40fecbacab7b42f7054861a657a9.png)

如何使用网格完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:01:27.660

如果您必须使用网格布局，那么您有几个选择：

选项 1：将每一行设为单列，然后在您想要独立列的每一行中嵌套一个网格：

**XAML**

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <TextBlock Text="AAAAAAAAAAAAAAAAAAAA" />

    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
      </Grid.ColumnDefinitions>

      <TextBlock Text="BBBBBBB"">
      <TextBlock Grid.Column="1" Text="CCCCCCC" />
    </Grid>
</Grid> 
```

选项 2：在行中使用 ColumnSpan：

**XAML**

```
<Grid>
  <Grid.RowDefinitions>
    <RowDefinition />
    <RowDefinition />
  </Grid.RowDefinitions>

  <Grid.ColumnDefinitions>
    <ColumnDefinition />
    <ColumnDefinition />
  </Grid.ColumnDefinitions>

      <TextBlock Grid.ColumnSpan="2" Text="AAAAAAAAAAAAAAAAAAAA" />
      <TextBlock Grid.Row="1" Text="BBBBBBB"">
      <TextBlock Grid.Row="1" Grid.Column="1" Text="CCCCCCC" />
    </Grid>
</Grid> 
```

*这些是在没有编辑器的情况下输入的，可能需要一些调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:05:18.763

两个格子？

```
<StackPanel Width="277">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <TextBlock Text="AAAAAAAAAAAAAAAAAAAA" Grid.Row="0" Grid.Column="0"/>            
    </Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <TextBlock Text="BBBBBBB" Grid.Row="0" Grid.Column="0"/>
        <TextBlock Text="CCCCCCC" Grid.Row="0" Grid.Column="1"/>
    </Grid>
</StackPanel> 
```

# android - JSONException：Google Place Api 中的 url 没有值

> ID：14185193
> 
> 赞同：0
> 
> 时间：2013-01-06T18:15:21.390
> 
> 标签：android, json

我正在开发一个需要解析 JSON 的 android 应用程序。我试图解析但遇到异常。

```
JSONObject pontoReferencia = {"html_attributions":[],"status":"OK","result":{"utc_offset":330,"id":"9e66cc8fb57ff106b8d2f0b2bfc3a0098343b29b","icon":"http:\/\/maps.gstatic.com\/mapfiles\/place_api\/icons\/generic_business-71.png","vicinity":"Ashok Nagar, Jaipur","address_components":[{"types":["sublocality","political"],"short_name":"Ashok Nagar","long_name":"Ashok Nagar"},{"types":["locality","political"],"short_name":"Jaipur","long_name":"Jaipur"},{"types":["administrative_area_level_2","political"],"short_name":"Jaipur","long_name":"Jaipur"},{"types":["administrative_area_level_1","political"],"short_name":"Rajasthan","long_name":"Rajasthan"},{"types":["country","political"],"short_name":"IN","long_name":"IN"}],"name":"Axis Mall","formatted_address":"Ashok Nagar, Jaipur, Rajasthan, India","types":["shopping_mall","establishment"],"url":"https:\/\/plus.google.com\/102521013990997599439\/about?hl=en-US","reference":"CpQBggAAABI29kI2gyoevkgdjJzq0laeUzYt9SHoms1EM19Jgio6PS6inqWz8BICZRH728ez1evezArY72tB30e8BdF_PpYAgB5RzkamKzg30SR7zQusZm1KOWMvWNJRfIhPOQmh35nv_P4dNLzDoh1sTct3Ue20rw8driI4b93tuDLqBw7Fj22WG9arHKirmeUvbGfrkRIQQxj-Pqop8NJUwpwgxGBHKBoUrneQW_mt9s7SBLmNeTssG1HS8nw","geometry":{"location":{"lng":75.807495,"lat":26.910624}}}} 
```

我正在尝试获取如下所示的 URL，但出现异常。

```
String url = pontoReferencia.getString("url"); 
```

异常：org.json.JSONException：url 没有值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:17:38.710

该字段`url`位于 json 对象内`result`。所以你应该尝试：

```
JSONObject result = pontoReferencia.getJSONObject("result");
String url = result.getString("url); 
```

# mercurial - 如何启用 hg rebase

> ID：14185194
> 
> 赞同：7
> 
> 时间：2013-01-06T18:15:26.947
> 
> 标签：mercurial, rebase

我将这些行添加到我的 .hg 文件夹中的 hgrc 中：

```
[extension]
rebase = 
```

但 hg rebase 仍然返回错误：Unknow command 'rebase'。这可能是一个愚蠢的问题，但我是否需要在 "=" 之后包含 rebase 扩展的路径？如果是，我在哪里可以找到扩展程序的位置？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T18:55:35.373

该部分的标题应该是`extensions`，而不是`extension`。

# javascript - 带有附件的电子邮件编写器 Phonegap 插件在 iOS 中无法与 imageURI 一起使用

> ID：14185197
> 
> 赞同：0
> 
> 时间：2013-01-06T18:16:00.843
> 
> 标签：javascript, ios, html, cordova, email-attachments

我正在尝试使用带有附件电话间隙插件的电子邮件编辑器从我的 phonegap 应用程序中发送一张图片作为附件。但是我无法让它工作。

我尝试了两种不同的方法。第一种是使用Phonegap 相机API 将imageURI 传递给电子邮件编辑器。代码如下：

```
function camera1()
        {
            navigator.camera.getPicture(sendEmail, onFail, { quality: 20,
                                        destinationType: Camera.DestinationType.FILE_URI});

            function sendEmail(imageURI) {

                window.plugins.emailComposer.showEmailComposer("Test","Test","test@gmail.com","","",true,imageURI)
            }

            function onFail(message) {
                alert('Failed because: ' + message);
            }

        } 
```

此方法启动 iphone 相机应用程序并允许我拍照。但是，一旦我点击“使用”按钮，我的 xcode 调试控制台中就会出现以下错误：

> 2013-01-06 17:57:50.741 Saffron Housing Mobile App[1203:907] -[_ *NSCFString countByEnumeratingWithState:objects:count:]：无法识别的选择器发送到实例 0x1dd9d6a0 2013-01-06 17:57:50.906 Saffron Housing Mobile App[1203:907] EmailComposer - 无法设置收件人；错误：-[* _NSCFString countByEnumeratingWithState:objects:count:]：无法识别的选择器发送到实例 0x1dd9d6a0 2013-01-06 17:57:50.914 Saffron Housing Mobile App[1203:907] -[_ *NSCFString countByEnumeratingWithState:objects:count:]：无法识别的选择器发送到实例 0x1dd1abf0 2013-01-06 17:57:50.916 Saffron Housing Mobile App[1203:907] EmailComposer - 无法设置附件；错误： -[*_NSCFString countByEnumeratingWithState:objects:count:]：无法识别的选择器发送到实例 0x1dd1abf0 2013-01-06 17:57:51.524 Saffron Housing Mobile App[1203:907] 警告：尝试在演示过程中进行演示！

我尝试使用的第二种方法是将图像保存到本地存储，然后将其作为变量传递给电子邮件编写器。我还在此方法中实现了一个通知事件，因为前面的错误消息让我认为电子邮件编写器插件在相机事件后试图打开太快（纯猜测基于“警告：在演示过程中尝试演示” !') 代码如下：

```
function camera1()
        {
            navigator.camera.getPicture(sendAlert, onFail, { quality: 20,
                                        destinationType: Camera.DestinationType.FILE_URI});
                                        localStorage.setItem('photo', imageURI);

            function sendAlert()
                navigator.notification.confirm('Send Picture?',sendEmail,'Send Picture?','Yes,No')

            function sendEmail(1) {

                var photo = localStorage.getItem('photo')
                window.plugins.emailComposer.showEmailComposer("Test","Test","test@gmail.com","","",true,photo);
            }

            function onFail(message) {
                alert('Failed because: ' + message);
            }

        } 
```

这段代码的问题是相机根本没有启动。当我单击按钮时没有任何反应。调试控制台中甚至没有任何东西。

更复杂的是，我尝试打开一个基本的电子邮件编写器事件，看看我是否正确地实现了插件。当不尝试附加图片时，电子邮件撰写者至少会打开并填写我的主题和正文。但它不会填写任何收件人。代码是：

```
function camera()
        {
            window.plugins.emailComposer.showEmailComposer("Test","Test","test@gmail.com","","",true,"")

        } 
```

我的问题是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:24:24.777

`toRecipients`, `ccRecipients`, `bccRecipients`, 和`attachments`参数应该是数组，但您将它们作为字符串传递。

```
window.plugins.emailComposer.showEmailComposer("Test", "Test", ["test@gmail.com"], [], [], true, [imageURI]); 
```

这样做，然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:00:21.653

我不知道这是否是您的错误的原因，但您的附件路径应该有点像**["/var/mobile/Applications/351............F3/yourapp.app /www/images/yourimage.png"]**

# java - 查找更新信息最多的文件

> ID：14185198
> 
> 赞同：0
> 
> 时间：2013-01-06T18:16:09.850
> 
> 标签：java, random-access

我有一个日志文件列表，我需要找到哪一个具有特定行的最新版本，并且所有或没有都可以具有此行。

文件中的行如下所示：

```
2013/01/06 16:01:00:283  INFO ag.doLog: xxxx xxxx xxxx xxxx 
```

我需要一条线让我们说

```
xx/xx/xx xx:xx:xx:xxx  INFO ag.doLog: the line i need 
```

我知道如何获取文件数组，如果我向后扫描，我可以在每个文件中找到最新的行（如果存在）。

最大的问题是文件可能很大（2k 行？），我想以相对快速的方式（几秒钟）找到该行，所以我愿意接受建议。

个人想法：如果一个文件在X时间有行，那么在X时间之前没有找到该行的任何文件都不应该再扫描了。这将需要同时搜索所有文件，我不知道如何。

Atm 代码中断，我想如果内存不足。

代码：

```
if(files.length>0)  {  //in case no log files exist
    System.out.println("files.length: " + files.length);
    for(int i = 0; i < files.length; i++)  {  ///for each log file look for string
        System.out.println("Reading file: " + i + " " + files[i].getName());
        RandomAccessFile raf = new RandomAccessFile(files[i].getAbsoluteFile(), "r"); //open log file
        long lastSegment = raf.length(); //Finds how long is the files
        lastSegment = raf.length()-5;    //Sets a point to start looking
        String leido = "";
        byte array[] = new byte[1024];    
        /*
        * Going back until we find line or file is empty.
        */
        while(!leido.contains(lineToSearch)||lastSegment>0)  {
            System.out.println("leido: " + leido);
            raf.seek(lastSegment);           //move the to that point
            raf.read(array);                 //Reads 1024 bytes and saves in array
            leido = new String(array);       //Saves what is read as a string
            lastSegment = lastSegment-15;    //move the point a little further back
        }
        if(lastSegment<0)   {
           raf.seek(leido.indexOf(lineToSearch) - 23); //to make sure we get the date (23 characters long) NOTE: it wont be negative. 
           raf.read(array);                 //Reads 1024 bytes and saves in array
           leido = new String(array);       //make the array into a string
           Date date = new SimpleDateFormat("MMMM d, yyyy", Locale.ENGLISH).parse(leido.substring(0, leido.indexOf(" INFO "))); //get only the date part
           System.out.println(date); 
           //if date is bigger than the other save file name
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:11:42.603

我发现代码*难以验证*。可以在向后阅读器中拆分任务，该阅读器从文件末尾到开头读取行。并使用它来逐行解析日期。

请注意，我不想要好的代码，而是这样的：

```
public class BackwardsReader implements Closeable {

    private static final int BUFFER_SIZE = 4096;

    private String charset;
    private RandomAccessFile raf;
    private long position;
    private int readIndex;
    private byte[] buffer = new byte[BUFFER_SIZE];

    /**
     * @param file a text file.
     * @param charset with bytes '\r' and '\n' (no wide chars).
     */
    public BackwardsReader(File file, String charset) throws IOException {
        this.charset = charset;
        raf = new RandomAccessFile(file, "r");
        position = raf.length();
    }

    public String readLine() throws IOException {
        if (position + readIndex == 0) {
            raf.close();
            raf = null;
            return null;
        }

        String line = "";
        for (;;) { // Loop adding blocks without newline '\n'.

            // Search line start:

            boolean lineStartFound = false;
            int lineStartIndex = readIndex;
            while (lineStartIndex > 0) {
                if (buffer[lineStartIndex - 1] == (byte)'\n') {
                    lineStartFound = true;
                    break;
                }
                --lineStartIndex;
            }
            String line2;
            try {
                line2 = new String(buffer, lineStartIndex, readIndex - lineStartIndex,
                        charset).replaceFirst("\r?\n?", "");
                readIndex = lineStartIndex;
            } catch (UnsupportedEncodingException ex) {
                Logger.getLogger(BackwardsReader.class.getName())
                        .log(Level.SEVERE, null, ex);
                return null;
            }
            line = line2 + line;
            if (lineStartFound) {
                --readIndex;
                break;
            }

            // Read a prior block:

            int toRead = BUFFER_SIZE;
            if (position - toRead < 0) {
                toRead = (int) position;
            }
            if (toRead == 0) {
                break;
            }
            position -= toRead;
            raf.seek(position);
            raf.readFully(buffer, 0, toRead);
            readIndex = toRead;
            if (buffer[readIndex - 1] == (byte)'\r') {
                --readIndex;
            }
        }
        return line;
    }

    @Override
    public void close() throws IOException {
        if (raf != null) {
            raf.close();
        }
    }
} 
```

还有一个使用示例：

```
public static void main(String[] args) {
    try {
        File file = new File(args[0]);
        BackwardsReader reader = new BackwardsReader(file, "UTF-8");
        int lineCount = 0;
        for (;;) {
            String line = reader.readLine();
            if (line == null) {
                break;
            }
            ++lineCount;
            System.out.println(line);
        }
        reader.close();
        System.out.println("Lines: " + lineCount);
    } catch (IOException ex) {
        Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

# tapestry - Tapestry 4.1 你好世界

> ID：14185199
> 
> 赞同：0
> 
> 时间：2013-01-06T18:16:15.103
> 
> 标签：tapestry

我有很大的问题，因为我需要使用**Tapestry 4.1**创建项目。我找不到任何示例，我真的不知道如何在这样的旧版本中创建项目。

有人可以给我一个解决方案如何开始吗？对此我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:26:29.473

像这样使用可用的 Maven 原型：

```
mvn archetype:generate -DarchetypeCatalog=http://tapestry.apache.org 
```

并选择可用的 4.1 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T08:38:39.800

在这里您可以找到 Tapestry 4 的文档。希望对您有所帮助。

[Tapestry 4 文档](http://web.archive.org/web/20120528072712/http://tapestry.apache.org/tapestry4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:22:09.817

我用谷歌搜索了一下，发现了这个：

[http://tapestry.apache.org/tapestry4.1/tutorials/index.html](http://tapestry.apache.org/tapestry4.1/tutorials/index.html)

其中有：

[http://www.devshed.com/c/a/Apache/Creating-Your-First-Tapestry-Project/](http://www.devshed.com/c/a/Apache/Creating-Your-First-Tapestry-Project/)

另外，一个简单的hello world：

[http://tapestry.apache.org/tapestry4/QuickStart/index.html](http://tapestry.apache.org/tapestry4/QuickStart/index.html)

[http://tapestry.apache.org/tapestry4/QuickStart/helloworld.html](http://tapestry.apache.org/tapestry4/QuickStart/helloworld.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-12T13:25:58.927

**使用命令行创建 Tapestry 项目的步骤**

创建挂毯示例应用程序的步骤 =>

**STEP-1**在系统中安装 maven。您必须有 Maven 才能从挂毯创建示例项目。

**STEP-2**一旦你安装了 maven 然后运行这个命令 =>> mvn archetype:generate -DarchetypeCatalog= [http://tapestry.apache.org](http://tapestry.apache.org)

**STEP-3**当你运行这个命令时，它会要求你选择原型，它会要求输入数字。您可以看到以下日志

1：[http](http://tapestry.apache.org) ://tapestry.apache.org -> org.apache.tapestry:quickstart（Tapestry 5 快速启动项目）

2：[http](http://tapestry.apache.org) ://tapestry.apache.org -> org.apache.tapestry:tapestry-archetype（Tapestry 4.1.6 Archetype）

所以你想创建 Tapestry 5 quickStart 项目然后输入 1，***如果你想创建 Tapestry 4.1.6 然后输入 2。***

**STEP-4**现在根据您在步骤 3 中的选择，它将在列表中显示相应的版本。例如 - [因为我选择了 1，这就是它向我显示 5 的版本] 如果您选择 2，它将相应地显示给您]

选择版本：

1.  5.0.19
2.  5.1.0.5
3.  5.2.6
4.  5.3.7

    所以从这里你应该输入版本号。在这个我选择数字4。

**STEP-5**现在您的项目基础已准备就绪。现在你必须输入maven项目的一些基本信息。

```
 Define value for property 'groupId': : com.sample.tapestry
   Define value for property 'artifactId': : app
   Define value for property 'version':  1.0-SNAPSHOT: 
   Define value for property 'package':  com.sample.tapestry: : com.sample.tapestry.app 
```

**第 6**步最后它向您显示 Y: : 当您像这样显示时按 Enter 按钮，您可以看到日志。它会告诉你构建是成功的。

```
 Finally your project is ready. You can delete the gradle files from the project.
   You can use git init command to initialize the git in the project. 
```

# java - VTD-XML：如何获取当前元素的标签名称？

> ID：14185201
> 
> 赞同：1
> 
> 时间：2013-01-06T18:16:22.810
> 
> 标签：java, xml, vtd-xml

在[VTDNav 文档](http://goo.gl/w1HLS)中，我看到了获取属性值、获取元素文本值的方法，但我真的找不到，如何获取当前元素的标签名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:33:26.037

```
vn.toRawString(vn.getCurrentIndex()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T03:18:33.487

```
 vn.toString(vn.getCurrentIndex() 
```

# c++ - QSslSocket::startServerEncryption 因“PEM_READ_BIO_PRIVATEKEY:bad password read”而失败

> ID：14185202
> 
> 赞同：1
> 
> 时间：2013-01-06T18:16:23.980
> 
> 标签：c++, qt, ssl, openssl, qsslsocket

我使用 Qt 文档中的示例代码创建了一个 SSL 服务器。然后我使用`QSslSocket::connectToHostEncrypted`.

但是，服务器失败了，这在`QSslSocket::errorString()`

```
Cannot provide a certificate with no key, 
error:0907B068:PEM routines:PEM_READ_BIO_PRIVATEKEY:bad password read 
```

我使用以下代码设置证书和私钥：

```
serverSocket->setLocalCertificate("/home/user/Workspace/openssl/cacert.pem");
serverSocket->setPrivateKey("/home/user/Workspace/openssl/privkey.pem"); 
```

我在 Ubuntu 上创建`cacert.pem`并`privkey.pem`使用了这个命令：

```
openssl req -x509 -newkey rsa:2048 -out cacert.pem -outform PEM -days 1825 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:37:30.583

错误是因为我没有指定私钥的密码（openssl 在证书创建期间要求我输入的密码）。所以而不是

```
serverSocket->setPrivateKey("/home/user/Workspace/openssl/privkey.pem"); 
```

我现在打电话

```
serverSocket->setPrivateKey("/home/user/Workspace/openssl/privkey.pem", QSsl::Rsa, QSsl::Pem, "mypassword"); 
```

这解决了问题。

# primefaces - 来自官方网站 primefaces.org 的 Primefaces 可编辑数据表示例不起作用

> ID：14185204
> 
> 赞同：1
> 
> 时间：2013-01-06T18:16:47.160
> 
> 标签：primefaces

```
<p:dataTable var="car" value="#{tableBean.carsSmall}" id="carList" editable="true">  

    <f:facet name="header">  
        In-Cell Editing  
    </f:facet>  

    <p:ajax event="rowEdit" listener="#{tableBean.onEdit}" update=":form:messages" />  
    <p:ajax event="rowEditCancel" listener="#{tableBean.onCancel}" update=":form:messages" />  

    <p:column headerText="Model" style="width:125px">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{car.model}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{car.model}" style="width:100%"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column> 
```

来自 primefaces 官方网站的简单示例不起作用。

错误是

> javax.faces.view.facelets.TagException：/faces/default.xhtml @36,106 事件：rowEditCancel 不受支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T16:07:35.220

primefaces 3.5 支持 In-Cell Editing 数据表，需要升级 primefaces 4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T11:34:36.197

我也面临同样的问题。但我找到了我使用 3.1 版 primefaces 的解决方案。而且这个版本不支持 rowEditCancel 事件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-20T06:42:55.167

确保在你的 bean 中，你有一个这样定义的方法：

```
public void onCancel(RowEditEvent event) { 
//...put your logic here
} 
```

# macos - Mac：终端不会让我写/编辑文件

> ID：14185210
> 
> 赞同：0
> 
> 时间：2013-01-06T18:17:16.020
> 
> 标签：macos, terminal, edit

我正在尝试遵循有关如何使用 Ruby on Rails 创建 APP 的教程，但我无法从终端编辑文件！

当我在终端上浏览文件时，光标甚至不会闪烁。就像我处于仅查看模式一样。

任何人都可以帮忙吗！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:31:00.123

Apple 的 Terminal.app 中的光标默认不闪烁。这可以在首选项中进行配置（在配置文件的“文本”选项卡下，靠近窗口底部），并且是纯粹的装饰设置。它对显示的文件是否可编辑没有任何影响。

# azure - 将实体保存到 Windows Azure 表存储中时 Windows Azure 的奇怪行为

> ID：14185211
> 
> 赞同：0
> 
> 时间：2013-01-06T18:17:22.747
> 
> 标签：azure, azure-storage

我将一批实体保存到 Azure 表存储中，对于某些实体，它完美地保存到同一张表的表存储中。但是一些记录，表存储在下面抛出异常。

ErrorMessage：处理此请求时发生错误。，InnerExceptionMessage： `OutOfRangeInput` 48：其中一个请求输入超出范围。RequestId:f72230dd-55ea-4bc9-92b5-ca576af64324 时间:2013-01-05T07:16:19.4614968Z

是否有任何 1 遇到过上述错误。

-马亨德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T05:56:39.223

添加到@knightpfhor 答案：

您的错误消息中的“ **48** ”表示您的批次中的实体 #48 存在问题。除了上述可能的罪魁祸首外，请检查该实体的 PartitionKey 值。批次中的所有实体必须具有相同的 PartitionKey 值。还要检查您的批次中是否包含两次相同的实体。一个实体（即唯一的 PartitionKey/RowKey 组合）在一个批次中只能出现一次。

使用 Fiddler 跟踪发送到存储的原始数据可能也是一个好主意。通过 Fiddler 跟踪请求/响应将帮助您查明错误。

最后查看此链接以获取有关实体组事务的更多信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:36:51.060

此错误通常与它所说的完全相同，因为您的某些记录具有无法保存的值，因为它们超出了范围。常见的罪魁祸首通常是具有无效值的 PartitionKey 或 RowKey，或者您正在尝试保存表存储不支持的类型。有关您可以使用的信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T11:54:42.943

在使用 azure table rest api 查询 winjs windows store 应用程序中的实体时，我收到此错误并在搜索错误时点击此处。对我来说，发生这种情况是因为在更改代码以形成存储模拟器的 xhr 请求时出现了愚蠢的错误。

计算授权标头的代码中的错误给出了授权标头，`SharedKey devstoreaccount1/devstoreaccount1: <computed key>`而它应该是`SharedKey devstoreaccount1: <computed key>`. 由于存储帐户名称中的“/”字符，引发了此错误。

**旁注**：在授权标头计算期间，stringToSign 具有 CanonicalResource。用于查询日志表中所有实体以获取 azure 模拟存储的 CanonicalResource 是`/devstoreaccount1/devstoreaccount1/logs()`azure myaccount 存储帐户所在的位置`/myaccount/logs()`。请注意存储帐户重复两次以进行模拟存储。

# machine-learning - 数据挖掘项目的数据集

> ID：14185217
> 
> 赞同：-1
> 
> 时间：2013-01-06T18:17:43.423
> 
> 标签：machine-learning, data-mining

我正在搜索 0 和 1 形式的一些数据集。我找不到数据集。我找到了 10 到 12 条记录，但至少需要 100 条记录和 8 条不同的记录。这是我搜索过此[链接](http://searchbusinessanalytics.techtarget.com/feature/Simple-data-mining-examples-and-datasets)的链接，但这是非常低的数据[http://searchbusinessanalytics.techtarget.com/feature/Simple-data-mining-examples-and-datasets](http://searchbusinessanalytics.techtarget.com/feature/Simple-data-mining-examples-and-datasets)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:23:03.653

查看[来自 Google 的公共数据集](http://www.google.com/publicdata/directory)。也许他们会得到你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T18:23:45.087

查看[UCI 机器学习存储库](http://archive.ics.uci.edu/ml/datasets.html)。在那里，您可以过滤您想要多少属性/特征或预测类并选择一个数据集。

该`Credit Approval`数据集可能适合您的搜索条件：

[http://archive.ics.uci.edu/ml/datasets/Credit+Approval](http://archive.ics.uci.edu/ml/datasets/Credit+Approval)

还有一个名为的数据集`Mushroom dataset`也应该适合您正在寻找的内容。

# exception - 继续不在循环内

> ID：14185219
> 
> 赞同：5
> 
> 时间：2013-01-06T18:18:16.260
> 
> 标签：exception, compiler-errors, d

我正在为 TCPServer 编写一个方法。我写了如下代码：

```
 // thread run
protected void threadRun(){
    // continue running. don't stop
    while(true){
        try{
            try{
            }
            catch(Exception e1){
                try{
                } catch(Exception e2){}
                finally{
                    // skip
                    continue;
                }
            }
        }
        catch(Exception e3){
        }
    }
} 
```

内容不重要。有接受客户等的代码，但我已删除它们以确保它与细节无关。无论如何，当我尝试编译此代码时，编译器会针对该`continue`行说：

`Error: continue is not inside a loop`

通过认为也许我知道错了，我用 Java 编写了完全相同的代码，如下所示：

```
class test{
public static void main(String[] args){
    while(true){
        try{
            try{
            }
            catch(Exception e1){
                try{
                } catch(Exception e2){}
                finally{
                    continue;
                }
            }

        }
        catch(Exception e3){
        }
    }
}
} 
```

正如我所料，java编译器没有给出任何错误信息并且编译成功。问题究竟是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:07:39.840

显然，`continue`(and `break`) 不能突破`finally`块。编译这个：

```
void run() {
loop:
    while (true) {
        try {}
        catch (Exception e) {}
        finally {
            continue loop;
        }
    }
} 
```

会给你这个（省略标签会给你同样的错误）：

```
Error: cannot continue out of finally block 
```

我还没有找到这个限制的理由或解释（**编辑：**见下面棘轮怪胎的评论）。但是，我无法想象这是一个超级常见的用例。您可能想查看其他选项。

# c# - 在 WCF 中使用共享数据类型作为 DataContract

> ID：14185220
> 
> 赞同：5
> 
> 时间：2013-01-06T18:18:18.163
> 
> 标签：c#, wcf

从我所见，我必须为要通过 WCF 传输的每种数据创建一个“特殊”数据类型，所以如果我有一个共享类

```
public class District
{
    public long Id { get; set; }
    public string Name { get; set; }
} 
```

我想使用 WCF 发送一个 District 对象，我必须创建一个数据合同，因此我必须创建一个新的 WCF 类

```
[DataContract]
public class WCFDistrict
{
    [DataMember]
    public long Id { get; set; }

    [DataMember]
    public string Name { get; set; }
} 
```

然后当我在我的实现中的 WCF 服务中使用它时，我必须将数据从一个对象解析到另一个对象

```
public WCFDistrict GetDistrict(long id)
{
    var district = _districtRepository.GetDistrict(id);
    return new WCFDistrict {Id = district.Id, Name = district.Name};
} 
```

有没有办法将共享类作为 DataContract 重用，而不具有这些属性？或者我应该在他们可以共享的类上创建一个接口，以便我可以在它们之间进行转换？还是第三点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T18:38:28.433

首先，您不需要提供 DataContract；只要您使用 .Net 3.5 SP1 或更高版本，WCF 就会正确序列化普通旧类对象 (POCO)。

其次，可以在服务端和客户端的项目中共享同一个物理类文件；我们的项目有数百个类（和代码）以这种方式直接共享，它在开发和测试中节省了大量的时间和精力。

启动并运行它需要几个步骤（从内存中执行此操作，因此我可能需要调整答案）：

1）在客户端，如果您使用的是 VB，请在与要在客户端使用的类相同的默认命名空间中创建一个项目（对于 C#，这并不重要，因为命名空间嵌入在类中）。

2) 将类文件作为链接添加到项目中，以便您拥有该类的一份物理副本。

3)如果您还没有一个[dataContractSerializer到您的 WCF 配置中。](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)

4) 在客户端，右键单击服务并选择配置服务引用... 在出现的对话框中，确保`Reuse types in all referenced assemblies`选中该`Reuse types in all referenced assemblies`选项并选择该选项。

5）让这个工作最棘手的部分是收集。

[a) 使用CollectionDataContract](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.collectiondatacontractattribute.aspx)属性装饰集合。

b) 将此集合的条目添加到`reference.svcmap`'`CollectionMappings`表中。要查找 reference.svcmap，请显示项目中的所有文件，然后展开服务。要编辑它，只需双击文件。您将在此处为您正在序列化的每个特定集合添加一个条目，并且您需要区分具有 List<> 基础的项目和具有 Dictionary<> 基础的项目。如果您不采取此步骤，WCF 将自动将这些类序列化为基础泛型签名，您将失去对类的使用。

此表中的条目如下所示：

```
<CollectionMappings>
  <CollectionMapping TypeName="System.Collections.Generic.Dictionary`2" Category="Dictionary" />
  <CollectionMapping TypeName="System.Collections.Generic.List`1" Category="List" />
  <CollectionMapping TypeName="System.Collections.Specialized.StringCollection" Category="List" />
  <CollectionMapping TypeName="My.Namespace.MyDictionaryCollection" Category="Dictionary" /> 
```

当您添加这些条目并保存文件时，WCF 客户端生成器将根据您使用的语言重建 reference.cs 或 reference.vb 文件。您可以通过查看生成的代码来判断您是否没有正确配置引用：如果该代码包含类定义，则 WCF 代码生成器由于某种原因无法映射到您复制的类中。

最后一点：有时 WCF 代码生成器完全无法生成代码，这始终是由于服务中的问题造成的（通常类不够唯一，或者由于某种原因无法序列化类型） .

为了调试这类问题，最简单的做法是添加 WCF 诊断日志记录，它会生成一个文件，该文件可以由特殊工具（忘记它的名称）打开，允许您深入了解错误消息和确切地发现出了什么问题。这为我们节省了大量的工作时间。要配置此日志记录，请将以下内容添加到您的 web.config`<configuration>`部分中的任何位置：

```
 <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData="c:\log\WcfTrace.svclog"  />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

添加并保存 web.config 后，尝试更新客户端中的服务引用，然后双击您指定的日志文件，该工具将打开。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T18:33:42.133

你会需要这些属性。为了让您的生活更轻松，您可以使用诸如`AutoMapper` 连接数据传输对象之类的工具，因为手动设置所有属性可能很乏味。

无论如何，将模型类与数据协定分开是一种很好的做法，这样对模型的更改就不必直接影响您的数据协定。

# asp.net-mvc - Asp.net MVC Windows 身份验证会要求用户在使用 firefox 时输入他们的用户名和密码

> ID：14185221
> 
> 赞同：1
> 
> 时间：2013-01-06T18:18:26.540
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7, web-config

我有一个使用 IIS 7 部署的 asp.net mvc Web 应用程序，并且我已将身份验证设置为 Windows 身份验证。

```
<authentication mode="Windows" />
    <authorization>
      <deny users="?" />
    </authorization> 
```

现在，如果用户使用 IE 访问 Web 应用程序，那么他们将自动登录，而无需输入用户名和密码，而如果他们使用 Firefox 连接到 Web 应用程序，则会提示他们输入用户名和密码。那么我该如何处理这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:37:24.267

如果您希望这会自动发生在所有我的用户身上 - 您不能。与其他浏览器相比，IE 的“集成”身份验证具有不同的默认行为。每个使用 Firefox 的用户都需要将该站点添加到 Firefox 的受信任列表中，这不是一个很好的解决方案，但从安全角度来看是可以理解的，因为其他浏览器出现在中间人的时代攻击（或用于收集凭据的虚假视线）可用于获取令牌，因此其他浏览器具有不同的行为。

# .htaccess - htaccess reg exp 与参数

> ID：14185223
> 
> 赞同：0
> 
> 时间：2013-01-06T18:18:39.557
> 
> 标签：.htaccess, url-rewriting

我有这个带有可选参数的网址：

```
http://domain.local/?_escaped_fragment_=watch/1/10/test/optionalparams/optionalparams/optionalparams/optionalparams.. 
```

我想将它重定向到

```
http://domain.local/videos/watch/test?id=10 
```

我尝试了很多 htaccess 重写规则和条件，但它根本不起作用.. 这是我的 htaccess ：

```
RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)/(.*)/(.*)/(.*)(/(.*)?)$
RewriteRule ^(.*) /videos/%1/%4?id=%3 [NC,R=301] 
```

有人可以帮我找到解决方案.. :)

提前致谢 ！

* * *

**编辑更多精度：**

当我尝试这个网址时：

```
?_escaped_fragment_=watch/1/10/title 
```

使用此重写规则

```
RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)/(.*)/(.*)/(.*)$
RewriteRule ^(.*) /videos/%1/%4?id=%3 [NC,R=301] 
```

它就像我想要的那样工作！但是，如果我在 /title 之后尝试这样的 url

```
?_escaped_fragment_=watch/1/10/title/param/param/param 
```

它不起作用......我已经尝试过使用不同的条件来使用这个 reg ex

```
RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)/(.*)/(.*)/(.*)(/(.*)?)$
RewriteRule ^(.*) /videos/%1/%4?id=%3 [NC,R=301] 
```

我不明白为什么它不起作用..有人可以帮助我吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:15:38.773

好的，我找到了解决方案：

```
RewriteCond %{QUERY_STRING} ^_escaped_fragment_=/([a-zA-Z0-9\-]+)/([0-9]+)/([0-9]+)/([a-zA-Z0-9\-]+)
RewriteRule ^(.*) /videos/%1/%4/?id=%3&page=%2 [NC,R=301] 
```

# php - cron 或 TRIGGER 持续插入 table1 或 CURSOR（或替代）以更新 1m 行 InnoDB table2 而不锁定？

> ID：14185230
> 
> 赞同：0
> 
> 时间：2013-01-06T18:19:24.433
> 
> 标签：php, mysql, performance, sql-update, table-lock

有没有人有任何建议如何实施？

table1 将不断被`INSERT`编入。这需要 table2 上的每一行都`UPDATE`在每个 table1 上`INSERT`。此外，我不知道 MySQL 是否最能负责的算法（相对于 PHP 计算速度）也必须应用于 table2 的每一行。

我想让 PHP 在用户执行的时候处理它`INSERT`，但是我发现 PHP 页面在为用户提供连接后不是持久的（或者我明白，请告诉我这是错误的，所以我可以走那条路）。

所以现在我的问题是，如果我`UPDATE`在 a 中使用一个总表`TRIGGER`，我将拥有大量锁（或者我从 InnoDB 的锁定中了解到，当`UPDAT`使用复合主键对整个表进行锁定时，因为该键的一部分将是`UPDATE`d）。

现在，我正在考虑使用 cron 作业，但我宁愿他们`INSERT`在 table1 上的用户而不是按计划开火。

所以我在想也许是一个`CURSOR`...

什么方法最快并且“绝对”不锁定 table2？

提前谢谢了！

**表结构**

table2 都是`INT`速度。但是，它有一个 2 列主键。这些列中的 1 列是`UPDATE`d。该键适用于同样重要的 rapid `SELECT`s。

table1 平均大约是 table2 行数的 2.5 倍。

table2 实际上非常小，~200mb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:31:03.093

首先：您尝试的几乎是不可能的-我不知道RDBMS可以通过“绝对没有锁定”将s升级`INSERT`为一个表到另一个表的s。`UPDATE`

那说：

*   我的第一个研究点是，是否可以彻底检查架构以优化这个热点。
*   如果这无法实现，您可能需要考虑制作`table2`一种可以从现有数据重新创建的内存类型（例如将其快照与最大 PK 一起保存，`table1`如果需要重新启动数据库，则向前滚动）。由于您需要更新每行上的所有行，因此**它**不能很大。`INSERT``table1`
*   Next point of research would be to put the `INSERT` and the `UPDATE` into a stored procedure, that is called by the insertion logic. This would make a runaway situation with the resulting locking hell on catchup much less likely.

# heap-memory - 堆动态还是堆栈动态？

> ID：14185235
> 
> 赞同：4
> 
> 时间：2013-01-06T18:19:43.270
> 
> 标签：heap-memory, programming-languages, callstack

请向我解释一下“x”在这段代码中是堆栈动态变量还是堆动态变量？如果是堆动态，那么为什么它不是堆栈动态变量？谢谢

```
function foo(){ MyClass x = new MyClass();} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-20T21:43:32.607

**当您调用函数时，**堆栈动态变量就会存在。**它们存在于 C++ 运行时堆栈中，并且是临时的。它们要么在参数列表中，要么在函数内部声明（静态变量除外，它们不在堆栈上实例化）。这些变量在超出范围时会消失，并且运行时会回收其内容的内存。**

 ****堆动态**实例存在于运行时预留的另一个称为“堆”的内存区域中。这些实例通过。“new”操作符，并且必须由“delete”操作符显式释放。

我希望这是有帮助的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T18:38:58.950

我不确定这是什么语言，我会说它只是伪代码，但大多数常见的 OO 语言中的概念应该是相同的。

让我们分解一下：

```
function foo() {
    MyClass x = null;
    x = new MyClass();
} 
```

第一行将`MyClass x = null`在本地堆栈上分配一些空间。它的空间并不大，仅足以存储参考。

第二行将`x = new MyClass()`做一些事情：

1.  在堆上为 MyClass 的新实例分配空间
2.  调用正确的构造函数`MyClass`
3.  将引用更改`x`为指向这个新实例。

所以简单的答案是：两者兼而有之。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:29:32.987

这个特定的一个是：动态堆（我假设你在这里用 JAVA 编程）。至于为什么它不在堆栈上？

*   这分配内存
*   它不是一个自动变量

有关一般说明，请参阅本文：http: [//www.maxi-pedia.com/what+is+heap+and+stack](http://www.maxi-pedia.com/what+is+heap+and+stack)**

# objective-c - iOS Objective C - 指向 viewDidLoad 上的接口控制的指针

> ID：14185239
> 
> 赞同：1
> 
> 时间：2013-01-06T18:19:55.667
> 
> 标签：objective-c, ios, cocoa-touch

不幸的是，我是 ObjC 的新手。

我在底部创建了一个列表和工具栏，有两个按钮。

![在此处输入图像描述](../Images/de2dc9312424d2b5b0d931fc8955628d.png)

第一个按钮刷新列表，当您点击列表项时，第二个按钮应该是“启用”的，单击它会执行额外的工作。这需要我在开始时禁用此按钮，但在 didSelectRowAtIndexPath 上启用。

我想获取指向 viewDidLoad 方法的第二个按钮的指针，以供以后使用。像这样的东西会很棒：

```
UIBarButtonItem* m_pButtonA = (UIBarButtonItem*) some_magic_function_to_call;
UIBarButtonItem* m_pButtonB = (UIBarButtonItem*) some_magic_function_to_call; 
```

所以我以后可以在需要时调用控制方法。

```
[m_pButtonRefresh method...] 
```

这可能吗 ？感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:36:31.410

在您的自定义视图控制器类中，创建一个 IBOutlet 属性，如下所示：

```
@property (nonatomic, weak) IBOutlet UIBarButtonItem* m_pButtonA;
@property (nonatomic, weak) IBOutlet UIBarButtonItem* m_pButtonB; 
```

（我建议使用更具描述性的名称）

然后，在 Interface Builder 中，您可以将这些属性设置为每个视图的参考插座（从小 (+) 拖动到 IB 左侧边栏中的视图控件，然后选择适当的属性）。

然后，您将能够使用类似`self.m_pButtonA`. 您不需要手动创建对它们的引用，因为代码会自动生成它们。

这有点类似于您在将 GUI 事件连接到视图控制器中的方法时使用的方法（这些方法将使用标有 IBAction 类型的方法），这些方法在引发这些事件时会自动触发。IBOutlet 和 IBAction 都只是对 Interface Builder 的一点提示（IBAction 实际上只是 void 的另一个名称）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:26:09.993

听起来你来自 Android 背景？您应该阅读*outlets*，相当于您正在寻找的内容。

请参阅 Apple 的备忘单[Cocoa Application Competencies for iOS](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/Outlet.html)，如果您需要，它会链接到更详尽的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T18:37:48.457

好的，我在这里找到了答案

[从 viewDidLoad 获取 UIButton 引用](https://stackoverflow.com/questions/12929404/get-uibutton-reference-from-viewdidload)

长话短说：

只需为您的按钮添加标签并使用标签值访问您的按钮。

```
UIButton *btn = (UIButton*)[self.view viewWithTag:1];
[btn setHidden:YES]; 
```

# iframe - 提交时修改 Google Docs 表单的 iFrame 大小

> ID：14185241
> 
> 赞同：1
> 
> 时间：2013-01-06T18:20:20.317
> 
> 标签：iframe, google-docs

我有一个嵌入了 iFrame 的 Google Docs 表单的页面。表单很长，所以我最终将 iFrame 的长度设置为 1600。一旦用户单击提交，iFrame 就会更改为显示非常短的确认。但是，用户仍在查看 iFrame 的底部，因此他们看不到确认信息。

提交表单后，有没有办法修改 iFrame 的长度？因为它嵌入到 iFrame 中，所以我不知道是否可以将 onClick 操作添加到提交按钮。如果修改 iFrame 大小太难，强制页面滚动到顶部就足够了（就像我在提交按钮中添加了 onClick="window.scroll(0,0)" 一样）。

这是当前代码：

```
<iframe src="https://docs.google.com/spreadsheet/embeddedform?formkey=FORMKEY" width="795" height="1600" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:30:09.980

无法将 onClick 操作添加到 Google 文档表单上的提交按钮。请参阅此问题以获取解决方案：[iFrame src 更改事件检测？](https://stackoverflow.com/questions/2429045/iframe-src-change-event-detection)

# joomla - 文章内容不显示

> ID：14185243
> 
> 赞同：3
> 
> 时间：2013-01-06T18:20:37.963
> 
> 标签：joomla, menu, header, article

我有一个链接到文章的菜单项，我有页面中显示的菜单项，但是当用户点击链接时，它只会显示文章的标题而不显示内容。我不确定，到底发生了什么。

我检查了 html 的来源，不，内容不存在。虽然内容在数据库中。我运行了调试模式，但它会给出正确的文章，只是它不会呈现内容。

从一开始就存在的菜单之一按要求行事，但如果我添加任何菜单项和文章，我将看不到内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T04:42:11.573

我遇到了这个问题，这就是解决它的方法（使用 Joomla 3.2）：

1.  单击扩展 -> 模板管理器以转到“模板管理器：样式”
2.  单击未显示内容的页面使用的样式，对我来说是“yoo_master - 默认”
3.  在配置文件选项卡下，在内容部分中，我将“系统输出”更改为“是”

然后页面内容再次开始显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T20:09:13.107

如果您启用了主动缓存（全局配置 > 系统）并激活了缓存插件，则可能需要一段时间才能显示任何更改。刷新缓存（维护>清除缓存），然后查看内容是否显示。此外，一些模板框架（如 T3）有自己的缓存层，可能会阻止您的内容显示。

否则模板中可能存在问题，通过分配默认模板来排除。

# matlab - 使用梯度的圆形霍夫变换

> ID：14185247
> 
> 赞同：2
> 
> 时间：2013-01-06T18:20:58.323
> 
> 标签：matlab, image-processing, hough-transform

我正在尝试实现霍夫变换算法来检测灰度图像中的圆圈。我运行边缘检测器并使用每个点的梯度方向来获得半径所在的线。然后，我尝试为每个圆心 (cX,cY) 和半径 r 的圆累积选票：

```
% run edge detection on image
Edges = edgeDetect(img);
% initialize accumulator matrix
Acc = zeros(imgRows, imgCols, maxR);    
% get indices of edge points
edgePoints = find(Edges);
% get number of edg points
numOfEdges = size(edgePoints);

for currEdge = 1 : numOfEdges

    % get edge cartesian coordinate
    [eY eX] = ind2sub([imgRows, imgCols], edgePoints(currEdge));        
    % find gradient's direction at this point
    theta = Directions(eY, eX);

    for r  = minR : maxR

        % find center point according to polar representation of circle
        cX = round( eX - r*cos(theta) );
        cY = round( eY - r*sin(theta) );

        % check if (cX,cY) is within image's boundaries
        if 1 <= cX && cX <= imgCols && 1 <= cY && cY <= imgRows

            % found a circle with (cX,cY) as center and r as radius
            Acc(cY, cX, r) = Acc(cY, cX, r) + 1; % increment matching counter

        end            
    end        
end 
```

但是，累加器 (Acc) 中的最大值是 10 - 所以我猜我计算圈数的方式有问题。我试过调试它，但看不出问题出在哪里......有什么想法可能是错的吗？任何帮助都感激不尽！

# user-interface - 在窗口调整大小时重新渲染meteor.js？

> ID：14185248
> 
> 赞同：7
> 
> 时间：2013-01-06T18:21:02.247
> 
> 标签：user-interface, resize, meteor

有人想出使用 Meteor.js 在窗口调整大小时重新渲染模板的语法吗？我尝试做一个 Meteor.flush()，但这似乎不是正确的方法.... :(

```
window.onresize = function(){
    Meteor.flush();
}; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-06T18:44:10.550

在调整窗口大小时更改一些会话值，然后让模板监听该更改：

```
<template name="body">
  {{touch}}
</template>

Template.body.touch = function() {
  return Session.get("touch");
}

Meteor.startup(function() {
  $(window).resize(function(evt) {
    Session.set("touch", new Date());
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-25T10:16:40.767

Meteor 文档为这种情况提供了一个很好的例子，通过添加窗口维度作为客户端全局响应数据源的方式，可以在 Template->autorun() [https://guide.meteor.com/data-上调用加载.html#stores](https://guide.meteor.com/data-loading.html#stores)

# javascript - Greasemonkey AJAX 返回的 abort() 不是函数？

> ID：14185249
> 
> 赞同：2
> 
> 时间：2013-01-06T18:21:21.847
> 
> 标签：javascript, ajax, greasemonkey, gm-xmlhttprequest

基本上，我尝试通过`GM_xmlhttpRequest()`Greasemonkey API 发送请求并中止它。

这是一个演示脚本：

```
// ==UserScript==
// @name            example
// @namespace       example795cb636-1f35
// @include         https://www.google.com/
// ==/UserScript==

var ret = GM_xmlhttpRequest({
    method: "GET",
    url: "https://www.google.com/",
    onerror: function(response) {
        console.log("error : " + response.statusText);
    },
    onabort: function(response) {
        console.log("abort : " + response.statusText);
    },
    onload: function(response) {
        console.log("complete : " + response.statusText);
    }
});

try{
    ret.abort();
}
catch(e){
    console.log(ret);
    console.log(e);
} 
```

这是我的控制台输出： ![在此处输入图像描述](../Images/9a40df055db42fdde6a9dbc9b8eddb64.png)

我错过了什么？

*细节：*

^(火狐 20.0a1
Greasemonkey 1.5)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T20:07:02.290

**更新：**
提交了一个被[整合到 GM 版本 1.9](http://www.greasespot.net/2013/05/greasemonkey-19-release.html)的补丁。此问题现已正式解决。

* * *

这是 Greasemonkey 中的一个错误。根据 Mozilla 的 COW 界面，在[Greasemonkey 的`xmlhttprequester.js`源代码](https://github.com/greasemonkey/greasemonkey/blob/master/modules/xmlhttprequester.js)中，`abort`没有[正确公开](https://wiki.mozilla.org/XPConnect_Chrome_Object_Wrappers#COWing_Objects)。

相关代码***是***：

```
var rv = {
    __exposedProps__: {
        finalUrl: "r",
        readyState: "r",
        responseHeaders: "r",
        responseText: "r",
        status: "r",
        statusText: "r"
        },
    abort: function () { return req.abort(); }
}; 
```

但***应该是：***

```
var rv = {
    __exposedProps__: {
        finalUrl: "r",
        readyState: "r",
        responseHeaders: "r",
        responseText: "r",
        status: "r",
        statusText: "r",
        abort: "r"
        },
    abort: function () { return req.abort(); }
}; 
```

查看相关错误：

1.  [为 GM_xmlhttpRequest 提供 abort()](https://github.com/greasemonkey/greasemonkey/issues/1007)
2.  [GM_xmlhttpRequest response.responseText 在...中未定义](https://github.com/greasemonkey/greasemonkey/issues/1607)
3.  [使用**暴露道具**](https://github.com/greasemonkey/greasemonkey/issues/1595)

* * *

修补代码修复了错误。

你可以：

1.  Fork [Greasemonkey 代码](https://github.com/greasemonkey/greasemonkey/tree)，并使用您自己的版本（推荐）。
    和/或
2.  [提交错误报告](https://github.com/greasemonkey/greasemonkey/issues)。

# android - 如何在android中更新我的数据库

> ID：14185251
> 
> 赞同：0
> 
> 时间：2013-01-06T18:21:24.610
> 
> 标签：android, sql-update

我的数据库有一个未解决的问题。用户使用用户名和密码进行注册，并且可以从 EditProfile 类中更改两者。问题是，虽然它似乎可以工作，但它也没有更新。这是我的代码。

```
btnConfirm.setOnClickListener(new View.OnClickListener() {  
        public void onClick(View v) {
            if (db.getUser(1).getUsername().equals(edtOldUsername.getText().toString())) {  
                if (db.getUser(1).getPassword().equals(edtOldPassword.getText().toString())) {
                    if(edtNewPassword.getText().toString().equals(edtConfirmNewPassword.getText().toString()))
                    {
                        db.updateUser(new User(edtNewUsername.getText().toString(), edtNewPassword.getText().toString(), ""));
                        finish();
                    }else Toast.makeText(getApplicationContext(), "Password does not match!", Toast.LENGTH_LONG).show();
                } else Toast.makeText(getApplicationContext(), "Wrong Password! Try again...", Toast.LENGTH_LONG).show();
            } else Toast.makeText(getApplicationContext(), "Wrong Username! Try again...", Toast.LENGTH_LONG).show();           

        }
    }); 
```

这是我的 dbhelper 代码

```
public int updateUser(User user) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME,user.getUsername());
    values.put(KEY_PASS, user.getPassword());
    values.put(KEY_BDATE, user.getBdate());

    // updating row
    return db.update(TABLE_USER, values, KEY_ID + " = ?",
            new String[] { String.valueOf(user.getID()) });
} 
```

无需响应...问题已解决。无论如何... :)

# google-chrome - 排除某些网站的自定义 Google 搜索网址

> ID：14185253
> 
> 赞同：1
> 
> 时间：2013-01-06T18:21:40.907
> 
> 标签：google-chrome, shortcuts, google-custom-search

我是一名医生，经常寻找同事。我几乎从来都不是想要预约的潜在患者。对我来说最没用的结果是来自[vitals.com](http://www.vitals.com "生命体征")和[healthgrades.com](http://www.healthgrades.com "healthgrades.com")的结果。但是，有时我需要它们。因此，显而易见的事情是将 -site:healthgrades.com -site:vitals.com 添加到我寻找特定医生的每个谷歌搜索中。如何在 url 中编码？如果我知道 URL，那么我可以在我的浏览器中进行自定义搜索，并使用一个不错的短关键字调用它。

我查看了 Google 自定义搜索，但它坚持从某些特定网站开始。我想搜索整个互联网，但只排除两个站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:33:35.507

我已经使用谷歌自定义搜索来实现这一点。设置您的自定义搜索引擎，然后进入“站点”设置并将顶级域（*.com、*.org 等）添加到“包含的站点”部分。在“排除的网站”部分添加您希望跳过的任何网站。好走！

[这是我的设置的屏幕截图](http://i.stack.imgur.com/gNHqn.png)

谷歌声明：

> 在 Google 站点搜索中不允许添加“顶级域”，例如“ *.com”、“. travel/*”。*( [http://support.google.com/customsearch/bin/answer.py?hl=en&answer=71826](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=71826) )

但我这样做没有任何问题 - 不确定这是否会在未来发生变化，但它目前似乎有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-29T12:09:38.017

我遇到了同样的问题，所以这是我更改 Chrome 的 Google 搜索设置的方法（复制原始搜索 URL 并在搜索引擎设置中创建新的搜索类型）：

```
{google:baseURL}search?q=-site%3Avitals.com%2B-site%3A%2Bhealthgrades.com%20%s&{google:RLZ}{google:originalQueryForSuggestion}{google:assistedQueryStats}{google:searchFieldtrialParameter}{google:iOSSearchLanguage}{google:searchClient}{google:sourceId}{google:instantExtendedEnabledParameter}{google:contextualSearchVersion}ie={inputEncoding} 
```

我遇到的另一个问题是重复的结果，例如搜索结果中的“ [60654 中的初级保健医生](https://healthjoy.com/find-a-doctor/pcp/chicago-il-60654/)”页面。

[查询的 Google 搜索结果示例](http://i.stack.imgur.com/G0BFt.png)

有时谷歌从一个域返回多个页面，我不喜欢，但只能通过额外的 javascript 来影响这个:)

# java - 小程序失败并在网站上显示不兼容的魔法值 1008813135

> ID：14185254
> 
> 赞同：0
> 
> 时间：2013-01-06T18:21:43.253
> 
> 标签：java, applet

> **可能重复：**
> [不兼容的魔法值 1008813135](https://stackoverflow.com/questions/2390733/incompatible-magic-value-1008813135)

我有一个 servlet 类，它为我的网站提供一个小程序。当我连接到网站（位于我自己的计算机上）并等待小程序加载它失败并说：不兼容的魔法值 1008813135。这是什么意思？

html文件中的applet标签：

```
<applet codebase="bin" code="gui/TickTackToeApplet.class" width=500 height=500>
</applet> 
```

类文件在java项目文件夹/bin/gui(package)/classfile.class

这是html文件内容：

```
<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Henrik's tick-tack-toe game</title>
<center><h1 style="color: white">Tick-Tack-Toe Logo will be displayed here...</h1></center>
</head>
<body bgcolor="black">
<form method="POST" action="/ticktacktoe">
<left>
<SELECT NAME="players">
<OPTGROUP LABEL="Players">
<OPTION VALUE="player">playerName2
<OPTION VALUE="player">PlayerName
</OPTGROUP>
</SELECT>
<input type="SUBMIT" value="Start game">
</left>
<br><br>
<center>
<applet codebase="bin" code="gui/TickTackToeApplet.class" width=500 height=500>
<p>Testing my applet...</p>
</applet>
</center>
</form>
</body>
</html> 
```

# sql-server - 实体框架存储过程处理未分配的值

> ID：14185271
> 
> 赞同：0
> 
> 时间：2013-01-06T18:23:17.253
> 
> 标签：sql-server, entity-framework, stored-procedures

如果像这样通过身份验证，我有一个存储过程返回用户令牌

```
BEGIN
SET FMTONLY OFF --Tricky Part
DECLARE @token uniqueidentifier
DECLARE @user_id as int
SET @user_id = (SELECT UserID  FROM Users
WHERE @email = Email AND @password = PasswordKey)
IF @user_id IS NOT NULL
BEGIN
    SET @token = NEWID()
    UPDATE Users SET Token = @token
    WHERE UserID = @user_id
    SELECT * FROM Users WHERE UserID = @user_id
END
END 
```

没有`SET FMTONLY OFF`它，仅当用户输入正确的基数时才返回令牌，否则会出错

> *类型的成员“令牌”在数据读取器中没有同名的对应列。*

发生。

现在我有另一个存储过程（几乎与这个相同），它返回`Product`由我传递给存储过程的 ID 确定的单个存储过程，即使我发送不存在的存储过程它也可以正常工作。在函数导入中，一个存储过程向我显示返回的列，而另一个不显示。为清楚起见，这里有两个图像，它们显示了存储过程和函数导入[图像](http://imgur.com/a/4jT8M#0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:43:53.010

而不是使用：

```
SELECT * FROM Users WHERE UserID = @user_id 
```

列出您希望从 Users 表中返回的列的名称，而不是仅使用 SELECT *。

```
SELECT ColumnName,
       AnotherColumn,
       YouGetThePoint
FROM  ... 
```

听起来 DataReader 填充的列名与预期的列名不同。如果只是给它们指定任意名称（例如 T1、T2），您是否已使用调试器单步执行和/或列出了从过程返回的实际列名。

# delphi - Delphi XE3 文件未找到 GIFImage.dcu

> ID：14185276
> 
> 赞同：8
> 
> 时间：2013-01-06T18:23:54.033
> 
> 标签：delphi, delphi-xe3

我在这里的第一个问题 - 这是 Delphi XE3 的新安装。我认为动画 GIF 支持现在已内置到 Delphi（自 2007 年以来？）。

当我在表单上放置一个 TImage 时，一切都很好，直到我用动画 GIF 文件填充图片字段。一旦我这样做了，IDE就会在我的uses子句中添加以下内容

```
uses ... , Vcl.Imaging.GIFImg, GIFImage; 
```

那时，IDE 和编译器说它找不到 GIFImage.dcu

```
[dcc32 Fatal Error] pco.pas(7): F1026 File not found: 'GIFImage.dcu' 
```

我搜索了我的系统，但在任何地方都找不到 GIFImage.dcu 文件。在一些 RAD Studio 文件夹中有一些 TGIFImage 文件——如 .bpl、.bpi、.dcp、.lib 和两个 .hpp 文件——一个用于 TGIFImage 和 GIFImage。

如果我从 Finn 的网站[http://www.tolderlund.eu/delphi/](http://www.tolderlund.eu/delphi/)下载 GIFImage 内容，然后将 GIFImage.pas 文件放入我的项目中，情况就会自行解决。

但是根据这篇文章[How to use Animated Gif in a delphi form](https://stackoverflow.com/questions/9573572/how-to-use-animated-gif-in-a-delphi-form/9573900#9573900)， GIFImage 现在内置在 Delphi 中，所以我认为我不应该这样做......那么我在这里错过了什么？TIA。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T19:38:38.017

XE3 中的单位名称是`Vcl.Imaging.GIFImg`. 该类`TGIFImage`是在该单元中定义的。

XE3中没有`GIFImage`单元。只需删除对该单元的所有引用。

我想在某些时候该单位被重命名。可能是当它被 Embarcadero 接管并并入 Delphi 时。

> 如果我从 Finn 的网站[http://www.tolderlund.eu/delphi/](http://www.tolderlund.eu/delphi/)下载 GIFImage 内容，然后将 GIFImage.pas 文件放入我的项目中，情况就会自行解决。

不要这样做。删除那些文件。如果您沿着这条路线走，您将拥有相同 GIF 代码的两个版本。

# android - OpenGL ES 2.0 中的光线拾取

> ID：14185279
> 
> 赞同：2
> 
> 时间：2013-01-06T18:24:22.410
> 
> 标签：android, opengl-es-2.0, ray-picking

我正在尝试在 OpenGL ES 2.0 中实现光线拾取，以确定是否单击了对象。到目前为止，我只是想检查是否按下了特定的三角形。我使用这个网站作为动机[http://android-raypick.blogspot.ca/2012/04/first-i-want-to-state-this-is-my-first.html](http://android-raypick.blogspot.ca/2012/04/first-i-want-to-state-this-is-my-first.html)

这是我到目前为止所拥有的：

```
public void onClick(float x, float y)
{
    float[] temp = new float[4];
    float[] temp2 = new float[4];
    System.out.println("X coordinate: " + x);
    System.out.println("Y coordinate: " + y);
    float[] pos = new float[4];

    y = (float) viewport[3] - y;

    int res = GLU.gluUnProject(x, y, 1.0f, 
            mMVPMatrix, 0,
            mProjectionMatrix, 0,
            viewport, 0, 
            temp, 0);

    Matrix.multiplyMV(temp2, 0, mMVPMatrix, 0, temp, 0);
    float[] nearCoOrds = new float[3];

    if(res == GLES20.GL_TRUE)
    {
        nearCoOrds[0] = temp2[0] / temp2[3];
        nearCoOrds[1] = temp2[1] / temp2[3];
        nearCoOrds[2] = temp2[2] / temp2[3];
        System.out.println("Near0: " + nearCoOrds[0]);
        System.out.println("Near1: " + nearCoOrds[1]);
        System.out.println("Near2: " + nearCoOrds[2]);
    }

    res = GLU.gluUnProject(x, y, 0,
            mMVPMatrix, 0,
            mProjectionMatrix, 0,
            viewport, 0,
            temp, 0);

    Matrix.multiplyMV(temp2,0,mMVPMatrix, 0, temp, 0);
    float[] farCoOrds = new float[3];

    if(res == GLES20.GL_TRUE)
    {
        farCoOrds[0] = temp2[0] / temp2[3];
        farCoOrds[1] = temp2[1] / temp2[3];
        farCoOrds[2] = temp2[2] / temp2[3];
        System.out.println("Far0: " + farCoOrds[0]);
        System.out.println("Far1: " + farCoOrds[1]);
        System.out.println("Far2: " + farCoOrds[2]);
    }

    float[] coords = new float[3];

    coords[0] = farCoOrds[0]-nearCoOrds[0];
    coords[1] = farCoOrds[1]-nearCoOrds[1];
    coords[2] = farCoOrds[2]-nearCoOrds[2];

    System.out.println("REAL COORDS 0: " + coords[0]);
    System.out.println("REAL COORDS 1: " + coords[1]);
    System.out.println("REAL COORDS 2: " + coords[2]);

} 
```

和浮动是手指按下屏幕位置的 x 和 y 坐标`x`。`y`该函数`onClick`是从`MainActivity`.

在

```
 GLU.gluUnProject(x, y, 1.0f, 
            mMVPMatrix, 0,
            mProjectionMatrix, 0,
            viewport, 0, 
            temp, 0); 
```

`mMVPMatrix`是模型视图矩阵。`mProjectionMatrix`是投影矩阵，`viewport`其值为 {0,0,screenhwidth,screenheight}。

我得到的输出示例是（在屏幕中间触摸）：

```
REAL COORDS 0: -0.21542415
REAL COORDS 1: 0.31117013
REAL COORDS 2: 9.000003 
```

我的问题/主题是我不知道我是否在正确的轨道上？我是否得到了正确的想法，或者我似乎误解了什么？或者还有其他方法可以实现对三角形的触摸检测吗？

感谢您的任何帮助或指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:33:27.873

有一个出色的 Android OpenGL 框架，称为[Rajawali](https://github.com/MasDennis/Rajawali/blob/master/README.md)。它支持物体拾取，[示例代码](http://www.rozengain.com/blog/2012/03/23/rajawali-tutorial-12-object-picking/)看起来很简单，你应该试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T10:47:13.750

I believe you many have misunderstood a bit (or maybe I have^^). The near and far coordinates are used to construct your ray segment to testing against your polys/hitboxes. The segment is in whats called [world space](http://www.matrix44.net/cms/notes/opengl-3d-graphics/coordinate-systems-in-opengl) and to test against your vertices/models you will need to convert them from model space(what they are in when loaded) to world space by multiplying them by their mModelView matrix (has all of their transforms, rotations, etc in it). That article you linked seems to take it through that point^^ Make sense or have I missed something?

bonus link for you: [http://www.siggraph.org/education/materials/HyperGraph/raytrace/rtinter0.htm](http://www.siggraph.org/education/materials/HyperGraph/raytrace/rtinter0.htm)

# r - 在 R 中的字符串或路径中转义反斜杠 (\)

> ID：14185287
> 
> 赞同：8
> 
> 时间：2013-01-06T18:24:41.700
> 
> 标签：r, file-io, directory, path, escaping

Windows 使用反斜杠复制路径`\`，R 不接受。所以，我想写一个函数来转换`\`为`/`. 例如：

```
chartr0 <- function(foo) chartr('\','\\/',foo) 
```

然后`chartr0`用作...

```
source(chartr0('E:\RStuff\test.r')) 
```

但`chartr0`不工作。我想，我是逃不掉`/`的。我想`/`在许多其他场合逃避可能很重要。

此外，是否可以避免`chartr0`每次都使用，但通过在 R 中创建一个调用`chartr0`或使用某种临时使用（如使用）的环境来自动转换所有路径`options`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2020-07-24T17:51:30.310

从[R 4.0.0](https://cran.r-project.org/doc/manuals/r-release/NEWS.html)开始，您可以使用`r"(...)"`将路径编写为[原始字符串常量](https://en.wikipedia.org/wiki/String_literal#Raw_strings)，从而避免转义：

```
r"(E:\RStuff\test.r)"
# [1] "E:\\RStuff\\test.r" 
```

> 有一种用于指定原始字符常量的新语法，类似于 C++ 中使用的语法：`r"(...)"`使用`...`任何不包含序列的字符序列`)"`。这使得*编写包含反斜杠*或单引号和双引号的字符串变得更容易。有关更多详细信息，请参阅`?Quotes`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-06T19:01:01.250

您的基本问题是，当 R 在除几个小写字母、反斜杠本身、引号或用于输入八进制、十六进制或 Unicode 序列的某些约定之外的任何字符之前看到一个反斜杠时，它就会立即发出错误信号。那是因为解释器将反斜杠视为“逃避”通常的字符翻译并做其他事情的消息。如果要在字符元素中使用单个反斜杠，则需要键入 2 个反斜杠。这将创建一个反斜杠：

```
nchar("\\")
#[1] 1 
```

_Intro_to_R_ 的“字符向量”部分说：

“字符字符串使用匹配的双引号 (") 或单引号 (') 输入，但使用双引号（或有时不使用引号）打印。它们使用 C 风格的转义序列，使用 \ 作为转义字符，因此 \ 输入并打印为 \，而在双引号内的 " 输入为 \"。其他有用的转义序列是\n、换行符、\t、制表符和\b、退格——完整列表请参见?引号。

```
 ?Quotes 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T18:32:32.037

```
chartr0 <- function(foo) chartr('\\','/',foo)
chartr0('E:\\RStuff\\test.r') 
```

你不能写 E:\Rxxxx，因为 R 认为 R 被转义了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T18:54:12.673

问题是代码中的每个正斜杠和反斜杠都被错误地转义，导致无效字符串或使用了错误的字符串。您需要阅读哪些字符需要转义以及如何转义。查看下面链接中的转义序列列表。此处未列出的任何内容（例如正斜杠）都按字面意思处理，不需要任何转义。

[http://cran.r-project.org/doc/manuals/R-lang.html#Literal-constants](http://cran.r-project.org/doc/manuals/R-lang.html#Literal-constants)

# python - 如何通过克隆当前本地环境来创建 virtualenv？

> ID：14185288
> 
> 赞同：9
> 
> 时间：2013-01-06T18:24:41.780
> 
> 标签：python, virtualenv, virtualenvwrapper

假设我有一个 python 解释器，在我的本地系统上安装了许多模块，并且它已经被调整为可以正常工作。

现在我想创建一个 virtualenv 来冻结这些，以便将来升级不会破坏它们。

我怎样才能做到？谢谢。

* * *

我不能使用`pip freeze`，因为那是一个没有安装它的集群，`pip`而且我没有安装它的权限。而且我也不希望重新安装模块，我正在寻找是否有克隆方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T18:29:42.593

运行`pip freeze`以创建系统上当前安装的所有模块的列表。然后制作一个 virtualenv 并安装这些模块。

```
pip freeze > env_modules.txt
virtualenv my_env && cd my_env && source bin/activate
pip install -r ../env_modules.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T00:12:07.557

Virtualenv 不起作用，因为它使用本地 python 解释器。

我的解决方案是使用 conda（anoconda 或 miniconda）来构建环境，所以如果你需要一些包，你可以直接 conda 安装它们。然后将其复制到远程机器并运行。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-12-09T05:54:37.040

我认为最好的方法是像这样使用 cpvirtualenv：

```
cpvirtualenv <name_of_virtualenv_to_be_copied> <name_of_new_virtualenv> 
```

# c - erl_interface 链接器错误

> ID：14185290
> 
> 赞同：1
> 
> 时间：2013-01-06T18:24:50.660
> 
> 标签：c, gcc, erlang, erl-interface

我需要在我的 C 程序中使用**erl_interface 。**Debian Wheezy 上有 Erlang R15B01。

我只是执行以下操作（例如）。

```
// main.c
#include <ei.h>
#include <erl_interface.h>

int main() {
    erl_init(NULL,0);
    return 0;
} 
```

然后我说：

```
cc -I/usr/lib/erlang/lib/erl_interface-3.7.7/include -L/usr/lib/erlang/lib/erl_interface-3.7.7/ -lei -lerl_interface -o prog main.c 
```

指定为 -L 的目录包含`libei.a`但`liberl_interface.a`链接器滥用对 erl_init 的引用是未定义的：`undefined reference to erl_init`

可能有什么问题？抱歉问了一个非常愚蠢的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:45:36.487

最新版本的 GNU 工具链要求以相同的顺序指定目标文件和库，它们的符号相互依赖。因此，您通常应该**将库标志放在调用的末尾，**如下所示：

```
gcc -o prog main.c -L<libdir> -I<includedir> -lerl_interface -lei 
```

# python - 用 pycassa 读取 Cassandra 1.2 表

> ID：14185291
> 
> 赞同：3
> 
> 时间：2013-01-06T18:25:01.857
> 
> 标签：python, cassandra, pycassa

使用 Cassandra 1.2。我通过以下方式使用 CQL 3 创建了一个表：

```
CREATE TABLE foo (
    user text PRIMARY KEY,
    emails set<text>
); 
```

现在我正在尝试通过pycassa查询数据：

```
import pycassa
from pycassa.pool import ConnectionPool
pool = ConnectionPool('ks1', ['localhost:9160'])
foo = pycassa.ColumnFamily(pool, 'foo') 
```

这给了我

```
Traceback (most recent call last):
  File "test.py", line 5, in <module>
    foo = pycassa.ColumnFamily(pool, 'foo')
  File "/home/john/src/pycassa/lib/python2.7/site-packages/pycassa/columnfamily.py", line 284, in __init__
    self.load_schema()
  File "/home/john/src/pycassa/lib/python2.7/site-packages/pycassa/columnfamily.py", line 312, in load_schema
    raise nfe
pycassa.cassandra.ttypes.NotFoundException: NotFoundException(_message=None, why='Column family foo not found.') 
```

如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T08:23:16.317

如果您使用 CQL3 创建了表，并且希望通过基于 thrift 的客户端访问它们；您必须指定 Compact Storage 属性。例如：

```
CREATE TABLE dummy_file_test
(
 dtPtn          INT,
 pxID           INT,
 startTm        INT,
 endTm          INT,
 patID          BIGINT,
 efile          BLOB,
 PRIMARY KEY((dtPtn, pxID, startTm))
)with compact storage; 
```

这是我在使用 Pycassa 访问基于 CQL3 的列 Families 时必须做的事情

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T17:49:29.857

我正在使用 Cassandra 1.2.8 和 pycassa 1.9.0 和 CQL3 进行测试。我能够验证使用在 CREATE 表语句期间使用的“WITH COMPACT STORAGE”在 CQL3 中创建的表确实使表（列族）对 pycassa 可见。不幸的是，我无法找到如何更改表以使“WITH COMPACT STORAGE”显示在 DESCRIBE TABLE 命令中。THE ALTER TABLE WITH 语句应该允许您更改该设置但没有运气。

要验证结果，只需使用 CQL3 创建两个表，一个使用 WITH COMPACT STORAGE，另一个不使用它，结果是可重现的。

看起来要实现既定目标，需要删除表，然后使用“WITH COMPACT STORAGE”选项作为 CREATE 语句的一部分重新创建表。如果您不想丢失任何数据，则可以重命名现有表，使用正确的选项创建新的空表，然后将数据移回所需的表中。除非，当然，您可以找到正确更改表格的方法，如果可能的话，这会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T06:23:05.787

使用 CQL3 创建的列族不能使用 pycassa 使用的 Thrift API。

如果您有更多问题，可以[阅读此内容。](http://www.datastax.com/dev/blog/thrift-to-cql3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T20:00:31.413

看来您的列族（表）定义不正确。运行`cqlsh`，然后`describe keyspace ks1;`。我的猜测是你不会看到你的 CF 被列出来。检查您的键空间名称是否正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T18:06:19.930

Pycassa 不支持较新版本的 cassandra - 请参阅 Ival 的答案和[此处](https://stackoverflow.com/questions/10430417/best-cassandra-library-wrapper-for-python)了解更多信息。有关pycassa 的替代解决方案，请参阅[https://pypi.python.org/pypi/cql/1.0.4 。](https://pypi.python.org/pypi/cql/1.0.4)

# ios - 如何在 iOS 上为 HTML 5 横幅提供过渡动画？

> ID：14185296
> 
> 赞同：0
> 
> 时间：2013-01-06T18:25:32.650
> 
> 标签：ios, html, css, css-transitions, html5-animation

我正在实现一个应用程序演示，在出现提示后（它回调到服务器）在屏幕顶部显示一个 HTML5 横幅。但是，我不知道如何为 HTML5 横幅设置动画以从顶部垂直过渡到屏幕上。

我正在谈论的过渡动画类型在这里[http://www.youtube.com/watch?v=xCkg3llsxZI&t=0m8s](http://www.youtube.com/watch?v=xCkg3llsxZI&t=0m8s) - 虽然我需要的动画是一个简单的垂直过渡，没有原生 iOS 推送通知的 3D 效果.

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:31:24.163

使用 CSS3 变换/过渡。这比使用 javascript 或 jQuery 等 JS 库要快得多，也更好。 [看这里](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions)

如果您想要更详细的动画，请使用 CSS3 动画。 [看这里](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)

最重要的是，为了确保对 CSS3 的完全跨平台支持，安装 Modernizr 并运行一些 shims。 [看这里](http://www.netmagazine.com/features/making-html5-and-css3-work-polyfills-and-shims)

编辑：如果您想使用 iOS 触摸[手势功能触发上述 CSS3，请在功能](https://stackoverflow.com/questions/9898627/what-is-the-difference-between-pan-and-swipe-in-ios)[内](https://stackoverflow.com/questions/8561492/css-code-in-javascript-function)定义这些样式。

# c - 处理指针时 C 中的分段错误

> ID：14185298
> 
> 赞同：0
> 
> 时间：2013-01-06T18:25:42.183
> 
> 标签：c, string, pointers

> **可能重复：**
> [为什么这个 C 代码会导致分段错误？](https://stackoverflow.com/questions/1614723/why-is-this-c-code-causing-a-segmentation-fault)

我的代码：

```
 void strrev(char *str) {
  char temp, *end_ptr;

  /* If str is NULL or empty, do nothing */
  if( str == NULL || !(*str) )
    return;

  end_ptr = str + strlen(str) - 1;

  /* Swap the chars */
  while( end_ptr > str ) {
    temp = *str;
    *str = *end_ptr;
    *end_ptr = temp;
    str++;
    end_ptr--;
  }
}
void main() {
    char temp;
    char* x = "Hel2313lo123";
    //temp = *x;
//  strReverse(x);
    strrev(x);
    printf("\n%s", x);
} 
```

事实上，函数 strrev() 直接复制自：[How do you reverse a string in place in C or C++?](https://stackoverflow.com/questions/198199/how-do-you-reverse-a-string-in-place-in-c-or-c)

每当我尝试运行它时，我都会遇到分段错误。为什么会这样？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:28:17.690

`char* x = "Hel2313lo123";`表示只读 C 字符串。你需要数组`char x[] = "Hel2313lo123";`

# visual-studio - 先决条件在 Windows 8 上安装 .Net 3.5 框架，并使用从 Visual Studio 2005 构建的 msi

> ID：14185304
> 
> 赞同：1
> 
> 时间：2013-01-06T18:26:05.287
> 
> 标签：visual-studio, windows-8, windows-installer, installation

我在 Visual Studio 2005 c# 中有一个 msi 项目。我在 msi 的先决条件中选择了：“安装 .Net 2.0”，并选择了从当前位置运行 msi 的选项，因此 .Net 安装目录与 msi 一起而不是从 Windows 网站下载，以节省用户的时间。在 Windows 8 上运行此 msi 时，我收到一条消息，该应用程序需要 >net 2.0 并且需要从 Internet 下载 .Net 3.5。

我的问题是，如何使用 Visual Studio 2005 将 .Net 3.5 添加到我的先决条件 msi 中？或者是否有即时解决方案，所以我可以将 .Net 3.5 安装目录与 msi 一起添加，让 msi/ 或 vb 脚本安装此目录，而不是从 Internet 下载 .Net。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:13:50.520

我怀疑对您的问题最简单的“解决方案”是使用 .NET 2.0 (CLR 2.0) 编译程序集，但表明允许在 .NET 4.0 / 4.5 (CLR 4.0) 上运行。

[在 .NET 4 Runtime 下运行 .NET 2 Runtime 应用程序](http://www.davidmoore.info/2010/12/17/running-net-2-runtime-applications-under-the-net-4-runtime/)

然后在您的安装程序中，配置在检测到较新版本的 .NET 时跳过的先决条件。您必须测试这些场景，但它应该可以正常工作。FWIW 在 Windows 8 上您实际上不太可能需要 .NET 2.0/3.5。.NET 4.0/4.5 就足够了。

# haskell - 如何在haskell中向多参数类添加谓词？

> ID：14185305
> 
> 赞同：1
> 
> 时间：2013-01-06T18:26:06.600
> 
> 标签：haskell, type-inference, typeclass

GHC 抱怨此代码：

```
{-# LANGUAGE TypeFamilies, MultiParamTypeClasses, ScopedTypeVariables #-}

class Test a b where
    data Data a b
    data Marker a b
    test :: Marker a b -> Bool

work :: (Test a b, Test a2 b2) => Data a b -> Data a2 b2 
work =
    let (m :: Marker a2 b2) = undefined
    in if test m then undefined else undefined 
```

随着消息：

```
You cannot bind scoped type variables `a2', `b2'
  in a pattern binding signature
In the pattern: m :: Marker a2 b2 
```

我不想将函数的实际功能`work`移到`Test`类中，因为`test`谓词在多个函数中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:29:10.010

如果将类型变量带入作用域，它就会编译：

```
work :: forall a b a2 b2\. (Test a b, Test a2 b2) => Data a b -> Data a2 b2 
work =
    let (m :: Marker a2 b2) = undefined
    in if test m then undefined else undefined 
```

没有显式`forall`，类型变量`a2`和`b2`let-binding 是新的类型变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:32:18.407

`forall a b a2 b2.`用作a2，b2 in将`Marker a2 b2`被视为新的。使用`forall`会将它们带入范围：

```
work :: forall a b a2 b2\. (Test a b, Test a2 b2) => Data a b -> Data a2 b2 
```

有关[forall 关键字的更多信息](http://en.wikibooks.org/wiki/Haskell/Existentially_quantified_types#The_forall_keyword)

# bazaar - Bzr 拉动不起作用

> ID：14185312
> 
> 赞同：1
> 
> 时间：2013-01-06T18:27:19.967
> 
> 标签：bazaar, bazaar-plugins

我试图提取的分支有一些超过 500 mb 的文件。

我注意到如果我使用 bzr pull 我无法下载它。

我认为连接正在超时。有没有办法让连接保持活动状态，比如设置超时 = 30 秒或类似的东西？

错误是

```
Write failed: Broken pipehing revisions:Inserting stream:Estimate    
182361/182487                 
bzr: ERROR: Connection closed: Unexpected end of message. Please check connectivity and   
permissions, and report a bug if problems persist. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:09:39.880

一种可能的**解决方法**：以增量方式提取更改（例如，检索 100 x 100 的更改集）。
这可能有助于避免超时。

```
bzr pull -r 100 
```

只需将`100`数字更改为适合您需要的任何数字，小增量更好！

拉取参考： [http ://doc.bazaar.canonical.com/beta/en/user-reference/pull-help.html](http://doc.bazaar.canonical.com/beta/en/user-reference/pull-help.html)

# java - Android：比较两个地图键，如果键相等，则创建新对象

> ID：14185315
> 
> 赞同：0
> 
> 时间：2013-01-06T18:27:22.467
> 
> 标签：java, android

我有两个`LinkedHashMap<String, MyType>`可以通用的键（例如，第一个映射的键可以是“键”，第二个映射的键也可以是“键”。我需要比较这两个映射，当键相等时，我想在哪里创建新`firsMapEntry.getValue()` `secondMapEntry.getValue()`对象新对象[ `new MyObject(firsMapEntry.getValue(), secondMapEntry.getValue())`]的属性。地图在里面，`Collection`所以我遍历集合。

这是我的来源：

```
firstIterator = firsCollection.iterator();
secondIterator = secondCollection.iterator();

    while (firstIterator.hasNext() && secondIterator.hasNext()) {
        Map<String, MyType1> firsMap = firstIterator.next();
        Map<String, List<MyType2>> secondMap = secondIterator
                .next();

        firstMapIterator = firstMap.entrySet().iterator();
        secondMapIterator = secondMap.entrySet().iterator();

        while (firstMapIterator.hasNext() && secondMapIterator.hasNext()) {
            Map.Entry<String, MyType1> firstEntry = ((Map.Entry<String, MyType1>) firstMapIterator.next());
            Map.Entry<String, List<MyType2>> secondEntry = ((Map.Entry<String, List<MyType2>>) secondMapIterator.next());

           // Here I was trying to compare keys but unsuccessfuly

          // if keys are equal create new object

        My Object object = new MyObject(firsEntry.getValue(),
                    secondEntry.getValue());
                      Map<String, MyObject> map = new LinkedHashMap<String,MyObject(); map.put("key", object);

        }
    } 
```

方法的返回类型是`List<Map<String, MyObject>>`. 我不知道我的方法是否有效，但如何比较两个键并从值创建新对象。每一个帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:33:50.527

[Map.Entry](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.Entry.html)有一个名为 的方法`getKey()`，使用它来获取密钥。
由于您的密钥是 String 使用，`Object.equals()`要[比较它们](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)，请不要使用 '==' ，所以：

```
 if(firstEntry .getKey().equals(secondEntry .getKey())){
    //they are equal
    }
else{
    //they are different
    } 
```

# jquery - 滚动到标题时淡出内容

> ID：14185316
> 
> 赞同：-1
> 
> 时间：2013-01-06T18:27:27.140
> 
> 标签：jquery, html

我有一个包含文本和透明背景的标题 div。标题的位置固定为 150 像素。我有出现在标题下方的内容 div。我想做的是淡出内容 div 的每一行，因为该行从页面顶部到达 150 像素（标题的底部）。
这样它就不会显示在标题下方。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:29:08.877

**与您聊天后，我确定鉴于您拥有的背景，您将继续使用`-webkit-mask-image`. 这是一个示例，它将使用垂直不透明蒙版屏蔽页面上的所有图像。**

```
img{
  -webkit-mask-image: 
     -webkit-gradient(linear, left top, left bottom, 
       from(rgba(0,0,0,1)), 
       to(rgba(0,0,0,0)));
} 
```

* * *

您可以使用`Gradient PNG`适当`CSS`的 a 使其在页面顶部全宽，这会导致您出现伪淡入淡出。

您可能需要稍微调整一些 CSS 以使其达到所需的顶部高度，z-index 可能对您来说太高，但这应该可以让您很好地开始。

HTML（`IMG`是`150px`您需要创建的渐变 PNG）；

```
<div id="topFade">
   <img src="images/fade.png"/>
</div> 
```

CSS

```
#topFade
{
   width: 100%;
   top: 0;
   position: fixed;
   height: 150px;
   float: left;
   z-index: 9998;
   margin: 0;
   padding: 0;
}
#topFade IMG
{
   width: 100%;
   height: 150px;
   margin: 0;
} 
```

我过去在应用程序中使用过它并且效果很好。我的在底部，但顶部相同。

![在此处输入图像描述](../Images/3d13a0260491cd05536289f93125259c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:30:54.310

这对于非技术解决方案如何 -

不要使用部分透明的背景，而是使用部分透明的**渐变**。这样，在图像的顶部，背景将是纯色的（您将无法看到其后面的内容），而在底部，渐变将非常弱且透明，让您仍然可以看到内容.

当用户滚动时，这将产生淡出的效果。它也会以相反的方式工作，淡入内容。

# android - 向数字选择器小部件添加侦听器

> ID：14185317
> 
> 赞同：10
> 
> 时间：2013-01-06T18:27:28.457
> 
> 标签：android, onclicklistener, numberpicker

我正在将数字选择器集成到我的应用程序中。该活动显示一个项目列表，每个项目都有一个数字选择器。用户可以使用数字选择器增加或减少数量。当他们这样做时，我想更新一个显示价格的 TextView。

我在尝试实现这一目标时遇到了困难。我做了一个简单的项目，并尝试在用户单击小部件时显示吐司消息，但无济于事。

我的猜测是数字小部件没有被视为按钮，因此点击侦听器不起作用？对于添加听众的任何建议，我将不胜感激。

下面是我的代码：

```
NumberPicker np;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    np = (NumberPicker)findViewById(R.id.numberPicker1);
    np.setMaxValue(99);
    np.setMinValue(0);
    np.setValue(50);

    np.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(v.getContext(), "Number selected", Toast.LENGTH_SHORT).show();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-06T18:40:36.980

要使用 设置侦听`Picker`器，您的活动必须实现选择器接口侦听器。（其实你的activity并不是强制实现接口的，你也可以使用匿名内部方法。随便什么都行。）

所以在你的活动中：

```
public class MainActivity extends Activity implements NumberPicker.OnValueChangeListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        NumberPicker np = (NumberPicker)findViewById(R.id.numberPicker1);
        np.setMaxValue(99);
        np.setMinValue(0);
        np.setValue(50);
        np.setOnValueChangedListener(this);

    }

    public void onValueChange(NumberPicker picker, int oldVal, int newVal) {
        Toast.makeText(this, "change", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-15T13:14:54.680

对于较新的 Android 开发人员（如我），活动本身**不需要**实现侦听器。它只需要传递到`setOnValueChangedListener()`.

这有助于避免太多`implements`太多的重叠`@Overrides`。

例子：

```
// Number Picker
NumberPicker np = (NumberPicker) getView().findViewById(R.id.numberPicker1);
np.setMinValue(0);
np.setMaxValue(35);

np.setOnValueChangedListener(new NumberPicker.OnValueChangeListener() {
    @Override
    public void onValueChange(NumberPicker numberPicker, int i, int i2) {

        Toast.makeText(this, "Value was: " + Integer.toString(i) + " is now: " + Integer.toString(i2), Toast.LENGTH_SHORT).show();

    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T18:33:07.897

您需要将[NumberPicker.setOnValueChangedListener](http://developer.android.com/reference/android/widget/NumberPicker.html)设置为通知当前值的更改`NumberPicker`

看这个[例子](http://src.chromium.org/svn/trunk/src/content/public/android/java/src/org/chromium/content/browser/MonthPicker.java) 我们如何`setOnValueChangedListener`为 NumberPicker设置

# oauth - 如何获取 youtube 收藏夹网址

> ID：14185320
> 
> 赞同：0
> 
> 时间：2013-01-06T18:27:56.877
> 
> 标签：oauth, google-apps-script, youtube-api

我做了以下

```
var NAME = 'youtube';
var SCOPE = 'http://gdata.youtube.com';
//var URL = "https://picasaweb.google.com/data/feed/api/user/default";
var URL = "http://gdata.youtube.com/feeds/api/users/default/favorites?v=2";

function doGet(e) {
  var app = UiApp.createApplication().setTitle("youtube");
  var data = UrlFetchApp.fetch(URL, googleOAuth_()).getContentText(); 
  var xmlOutput = Xml.parse(data, false);  
  var favorites = xmlOutput.getElement().getElements('entry');  

  app.add(app.createLabel(favorites.length.toString()))
  for(var i = 0; i < favorites.length; i++){
  app.add(app.createLabel(favorites[i].getElement('title').getText()))
  //var testf = favorites[i].getElement('http://gdata.youtube.com/schemas/2007#favorite','href');
}

return app;
}   

function googleOAuth_() {
var oAuthConfig = UrlFetchApp.addOAuthService(NAME);
 oAuthConfig.setRequestTokenUrl('https://www.google.com/accounts/OAuthGetRequestToken?scope='+SCOPE);
 oAuthConfig.setAuthorizationUrl('https://www.google.com/accounts/OAuthAuthorizeToken');
 oAuthConfig.setAccessTokenUrl('https://www.google.com/accounts/OAuthGetAccessToken');
 oAuthConfig.setConsumerKey('anonymous');
 oAuthConfig.setConsumerSecret('anonymous');
 return {oAuthServiceName:NAME, oAuthUseToken:'always'};
} 
```

要获得最喜欢的视频的标题，它可以正常工作
但我找不到如何访问最喜欢的视频的网址的方法。
我在哪里可以在文档中找到它？

而不是另一个问题，当我尝试
使用另一个谷歌帐户执行脚本时，它仍然给出错误：
*需要授权才能执行该操作*

函数不是`googleOAuth_()`在处理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:35:17.200

这是一个有效的解决方案......

（编辑：更好的代码）

```
var NAME = 'youtube';
var SCOPE = 'http://gdata.youtube.com';
//var URL = "https://picasaweb.google.com/data/feed/api/user/default";
var URL = "http://gdata.youtube.com/feeds/api/users/default/favorites?v=2";

function doGet(e) {
    var app = UiApp.createApplication().setTitle("youtube").setStyleAttribute('padding','20');
    var data = UrlFetchApp.fetch(URL, googleOAuth_()).getContentText(); 
    var xmlOutput = Xml.parse(data, true);  
    var favorites = xmlOutput.getElement().getElements('entry');  
    app.add(app.createLabel('YouTube favourites entries : '+favorites.length.toString()).setStyleAttribute('padding','10'))
    var table = app.createFlexTable().setWidth('400').setStyleAttribute('background', '#ffffdd')

  for(var i = 0; i < favorites.length; i++){

      if(favorites[i].getElement('link')){  
      var url = favorites[i].getElement('link').getAttribute('href').getValue();}

      if(favorites[i].getElement('title')){
       var Title = favorites[i].getElement('title').getText()}

      table.setText(i, 0, 'Clip Title : '+Title).setWidget(i, 1, app.createAnchor('link', url)).setBorderWidth(1)  
    }
    app.add(table)
 return app;
} 
```

# xpath - 无法使用 Xpath 抓取低于 TH 数据的 TD 数据

> ID：14185326
> 
> 赞同：0
> 
> 时间：2013-01-06T18:28:23.463
> 
> 标签：xpath, selenium

对于我的生活，我不明白为什么我不能抓住 th 下面的 td 文本。

我试过这个**('//th(contains(text(), "Text I Need Is After This")]')**它确实抓住了它打算抓住的实际行，但我想要抓住的是td/a 链接中的文本。

附加**('//th(contains(text(), "我需要的文本在此之后")]/td/a')**或只是 **('//th(contains(text(), "我需要的文本在此之后")]/td')**找不到任何匹配项。

这是HTML

```
 <tr class="">
    <th scope="row" style="text-align:left;">Text I Need Is After This</th>
    <td class="" style="">
    <a href="/wiki/Queens" title="Queens">Queens</a>, 
    <a href="/wiki/New_York" title="New York">New York</a>, 
    <a href="/wiki/United_States" title="United States">United States</a>
    </td>
      </tr> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T18:32:43.493

添加`/td/a`到第一条语句是告诉 XPath 找到 的子节点`<th>`，但它们不是。因此，如果您想找到`<th>`节点，`<td>`然后`<a>`直接使用 and ，请使用该`following-sibling`函数，如下所示：

```
//th[contains(text(), "Text I Need Is After This")]/following-sibling::td 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T18:36:29.173

你应该使用类似的东西：

```
td[contains(preceding-sibling::text(), "Text I Need Is After This")] 
```

# facebook - 如何在FACEBOOK查看我们是fanpage还是fanpage

> ID：14185328
> 
> 赞同：-2
> 
> 时间：2013-01-06T18:28:48.630
> 
> 标签：facebook, facebook-page

如何检查我们是粉丝专页还是粉丝专页

id 传递给 page 方法如下：

page_id 或 page_id、page_id2、page_id3

```
function isFan(a) 
{
    FB.api('me/likes/'+a ,function(response) 
    {
    if (response.data.length == 0) 
    {
        $("#myModal2").modal()   
    }else{
        //OK i like
    }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:48:23.290

好吧，我实际上不认为您可以在没有自己处理的情况下进行 OR。但是您可以使用 fql 查询来检索某人喜欢的所有页面的列表，然后检查它们是否与每个页面匹配。

eg // 这会给你所有的用户粉丝页面喜欢

```
 FB.api('/fql?q=' + urlencode("select page_id from page_fan where uid = me()")function(res){

 }); 
```

然后，您将使用自己的代码来验证您的列表是否在返回的数据中。或者，您可以执行类似的操作（确保对查询进行 urlencode）

```
 fql?q={"isFan":"select page_id from page_fan where uid = me()","myMatches":"select page_id from #isFan where page_id in (page_id1,page_id2)"} 
```

JSON 结果中返回的“myMatches”数组将只包含针对您指定的 id 的点赞。所以检查这个结果集的长度，与你最初拥有的 page_id 数量的长度。

```
 //pseudo code so prob some syntax errors here
   var page_ids = Array(1,2,3);
   var valid = true;
   var myQuery = ''; // <- your fql query here
   FB.api('/fql?q=' + myQuery, function(res)}
         var matches = res['myMatches'];
         if(matches.length == page_ids.length){
            valid = true;
         }elseif(matches.contains(single_id)){
            //some single id if you only want to check one
            valid = true;
         }else{
            valid = false;
         }
    }); 
```

以上显然可以优化，但这只是你的一个起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T22:25:27.670

好吧，我做到了，任何人都需要。

```
function isFan(a) 
{
    var myString = a; 
    var fan_page_id = myString.split(',');

    for (var i=0;i<fan_page_id.length;i++)
    { 
        FB.api('me/likes/'+fan_page_id[i] ,function(response) 
        {
            if (response.data.length == 0) 
            {
                $("#myModal2").modal()   
                brake;
            }else{
                //OK i like
            }
        });
    }
} 
```

# php - 在 PHP 和 JavaScript 之间交换变量

> ID：14185331
> 
> 赞同：1
> 
> 时间：2013-01-06T18:29:10.977
> 
> 标签：php, javascript

选中的单选按钮将通过下拉框显示其对应的城市列表。例如，在选中单选按钮“安大略”时，将显示一个带有匹配城市的下拉框（在本例中，“地区”是安大略，id 是 77）。

下面示例中提到的所有 PHP 函数、循环和 JavaScript 代码都可以正常工作：

```
<script type="text/javascript">
$(document).ready(function(){
  $('#locationTree input:radio').change(function() {
    var buttonPressed = $('input:radio[name=Region]:checked').val();

    if(buttonPressed == 77) {
      var listCities = $("select[name='City']");
      <?php View::newInstance()->_exportVariableToView(77); ?>
      <?php while(has_list_cities()) { ?>
        $("<option><?php echo list_city_name(); ?></option>").appendTo(listCities);
      <?php } ?>                
    } 

  });   
});
</script> 
```

要获取不同地区的城市列表，而不是具体到 77，我可以稍微更改 PHP 代码，如下所示：

```
 <?php View::newInstance()->_exportVariableToView($regionCode); ?> 
```

由于变量 'buttonPressed' 检测到选定的 'Region' id，我可以添加以下简单脚本：

```
<?php $regionCode = "<script>document.write(buttonPressed)</script>"; ?> 
```

上述改动后：

```
var listCities = $("select[name='City']");
<?php $regionCode = "<script>document.write(buttonPressed)</script>"; ?>   
<?php View::newInstance()->_exportVariableToView($regionCode); ?> 
```

我知道 PHP 在服务器端运行，而 JavaScript 在客户端运行，但我认为我在 PHP 和 JavaScript 之间交换变量的简单解决方案应该可以工作……但它不起作用。我真的要求有人帮我让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:31:28.830

使用 HTML 5 提供的数据属性属性交换变量（服务器到客户端）。我这样做是为了初始页面加载。

要在初始页面加载后交换变量，可以使用 ajax 调用。

**数据属性示例**

*通过 PHP 编写 HTML*

```
<div id='universals' data-path='/zz/' data-load='1'></div> 
```

*JavaScript*

```
var data_dom = $('#universals')[0],
    key,
    universals = [];
for (key in data_dom.dataset) {
    universals[key] = data_dom.dataset[key];
} 
```

# java - Java HttpURLConnection 返回 JSON

> ID：14185338
> 
> 赞同：5
> 
> 时间：2013-01-06T18:30:05.663
> 
> 标签：java, json, http, request

我正在尝试发出一个返回 json 响应的 http get 请求。我需要将 json 响应中的一些值存储在我的会话中。我有这个：

```
public String getSessionKey(){
    BufferedReader rd  = null;
    StringBuilder sb = null;
    String line = null;
    try {
         URL url = new URL(//url here);
         HttpURLConnection connection = (HttpURLConnection) url.openConnection();
         connection.setRequestMethod("GET");
         connection.connect();
         rd  = new BufferedReader(new InputStreamReader(connection.getInputStream()));
          sb = new StringBuilder();

          while ((line = rd.readLine()) != null)
          {
              sb.append(line + '\n');
          }
          return sb.toString();

     } catch (MalformedURLException e) {
         e.printStackTrace();
     } catch (ProtocolException e) {
         e.printStackTrace();
     } catch (IOException e) {
         e.printStackTrace();
     }

    return "";
} 
```

这将返回字符串中的 JSON：

```
{ "StatusCode": 0, "StatusInfo": "Processed and Logged OK", "CustomerName": "Mr API"} 
```

我需要在会话中存储 StatusCode 和 CustomerName。如何处理用 java 返回的 JSON？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T18:32:34.387

使用 JSON 库。这是杰克逊的一个例子：

```
ObjectMapper mapper = new ObjectMapper();

JsonNode node = mapper.readTree(connection.getInputStream());

// Grab statusCode with node.get("StatusCode").intValue()
// Grab CustomerName with node.get("CustomerName").textValue() 
```

请注意，这不会检查返回的 JSON 的有效性。为此，您可以使用 JSON 模式。有可用的 Java 实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-24T20:36:02.333

对于会话存储，您可以使用应用程序上下文类：[Application](http://developer.android.com/reference/android/app/Application.html)，或使用静态全局变量。

要从 HttpURLConnection 解析 JSON，您可以使用如下方法：

```
public JSONArray getJSONFromUrl(String url) {
    JSONArray jsonArray = null;

    try {
        URL u = new URL(url);
        httpURLConnection = (HttpURLConnection) u.openConnection();
        httpURLConnection.setRequestMethod("GET");
        bufferedReader = new BufferedReader(new InputStreamReader(httpURLConnection.getInputStream()));
        stringBuilder = new StringBuilder();

        while ((line = bufferedReader.readLine()) != null) {
            stringBuilder.append(line + '\n');
        }
        jsonString = stringBuilder.toString();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (ProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        httpURLConnection.disconnect();
    }

    try {
        jsonArray = new JSONArray(jsonString);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return jsonArray;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:31:44.307

查看 GSON 库以将 json 转换为对象，反之亦然。

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-18T11:44:35.573

你可以试试这个：

```
JSONObject json = new JSONObject(new JSONTokener(sb.toString()));
json.getInt("StatusCode");
json.getString("CustomerName"); 
```

并且不要忘记将其包装成 try-catch

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-23T09:50:21.327

您可以使用 Gson。这是可以帮助您的代码：

```
Map<String, Object> jsonMap;  
Gson gson = new Gson();  
Type outputType = new TypeToken<Map<String, Object>>(){}.getType();  
jsonMap = gson.fromJson("here your string", outputType); 
```

现在您知道如何从会话中获取它们并将它们置于会话中。**您需要在 classpath 中包含 Gson 库**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-07T11:43:26.573

我的方法用参数在调用中使用Service或AsyncTask

```
public JSONArray getJSONFromUrl(String endpoint, Map<String, String> params)
        throws IOException
{
    JSONArray jsonArray = null;
    String jsonString = null;
    HttpURLConnection conn = null;
    String line;

    URL url;
    try
    {
        url = new URL(endpoint);
    }
    catch (MalformedURLException e)
    {
        throw new IllegalArgumentException("invalid url: " + endpoint);
    }

    StringBuilder bodyBuilder = new StringBuilder();
    Iterator<Map.Entry<String, String>> iterator = params.entrySet().iterator();
    // constructs the POST body using the parameters
    while (iterator.hasNext())
    {
        Map.Entry<String, String> param = iterator.next();
        bodyBuilder.append(param.getKey()).append('=')
                .append(param.getValue());
        if (iterator.hasNext()) {
            bodyBuilder.append('&');
        }
    }

    String body = bodyBuilder.toString();
    byte[] bytes = body.getBytes();
    try {

        conn = (HttpURLConnection) url.openConnection();
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setFixedLengthStreamingMode(bytes.length);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");
        // post the request
        OutputStream out = conn.getOutputStream();
        out.write(bytes);
        out.close();
        // handle the response
        int status = conn.getResponseCode();

        if (status != 200) {
            throw new IOException("Post failed with error code " + status);
        }

        BufferedReader  bufferedReader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        StringBuilder stringBuilder = new StringBuilder();

        while ((line = bufferedReader.readLine()) != null)
        {
            stringBuilder.append(line + '\n');
        }

        jsonString = stringBuilder.toString();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (ProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        conn.disconnect();
    }

    try {
        jsonArray = new JSONArray(jsonString);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return jsonArray;
} 
```

# php - 在 Kohana 中包含 Swiftmailer 库

> ID：14185340
> 
> 赞同：0
> 
> 时间：2013-01-06T18:30:24.340
> 
> 标签：php, include, kohana, swiftmailer

我无法找到将 swiftmailer 库包含在我的 Kohana 应用程序中的正确方法。我正在使用推荐的：

```
require_once Kohana::find_file('vendor','swift/lib/swift_required'); 
```

但这是我回来的错误：

```
Failed opening required '' (include_path='.:/Applications/MAMP/bin/php/php5.3.6/lib/php') 
```

为什么 Kohana 会返回 php 库的路径而不是查看我传递给的文件夹`find_file`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T22:00:50.620

我想通了，我会为像我这样的任何其他 Kohana 菜鸟发布答案。 `find_file`正在`application`目录中查找。不要使用 Kohana 附带的供应商目录，在应用程序中创建一个新目录，它会找到它。

# c# - c#从键盘读取的文本中的段落分隔符

> ID：14185344
> 
> 赞同：0
> 
> 时间：2013-01-06T18:30:55.117
> 
> 标签：c#, text, analysis, delimiter, paragraph

如何让用户在输入或回车之前输入更多段落？

知道在每个段落之后都应该按 Enter 以标记他完成了该段落。

我要数这几段。如果从文件中读取文本，那可能没问题（我仍然不确定我在寻找什么分隔符来计算段落）。

但是，当您从键盘读取用户输入的文本时，我如何计算段落 - 不知道。

假设用户开始并输入一些语句，然后按回车键...程序完成... 1 段，就是这样。

如何允许用户输入 2 段或更多段并计算它们？

我可能更喜欢简单的“初学者”方法而不是正则表达式......我可以计算句子但不能以任何方式从键盘输入段落......可能想要成为一个循环或允许用户输入多个段落的东西比用户在完成段落输入时做什么？点击再次进入......所以混乱，混乱，混乱......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:38:29.440

这个怎么样：

```
List<string> lines = new List<string>();
string line = Console.ReadLine();
while(!string.IsNullOrEmpty(line))
{
    lines.Add(line);
    line = Console.ReadLine();
} 
```

然后`lines`将包含用户输入的所有段落，他们可以在不输入任何内容的情况下按 Enter 来指示输入的结束。

编辑：如果您只需要计算用户输入的段落数（而不是存储它们），那么这将起作用：

```
int paragraphsEntered = 0;
string line = Console.ReadLine();
while(!string.IsNullOrEmpty(line))
{
    paragraphsEntered++
    line = Console.ReadLine();
}
Console.WriteLine("You entered {0} paragraph(s).", paragraphsEntered); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:44:55.957

如果您使用的是 WinForms，则可以使用 TextBox 并将 Multiline 设置为 true。请查看[TextBox 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox.aspx)文档，其中包含有关如何操作的示例，或者您可以使用[RichTextBox 类](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.aspx)

为了计算段落，您可以使用以下代码：

```
var paragraphs = myTextBoxControl.Text.Split('\n').Count; 
```

# c++ - C++11 中弱类型枚举的底层类型

> ID：14185352
> 
> 赞同：12
> 
> 时间：2013-01-06T18:31:53.857
> 
> 标签：c++, c++11

C++11 引入了强类型枚举，语法为`enum class`. 这些与整数类型不兼容，需要显式强制转换才能获得它们的数值。C++11 还引入了为弱类型枚举指定存储类的能力，其形式为`enum name : type {}`. 到这里为止都很好。

但看起来即使弱类型枚举具有给定的存储类，其项目的类型仍然是`int`. 我尝试使用 Visual Studio 2012，11 月 CTP 版本。考虑以下代码：

```
enum charEnum : char { A = 'A' };
enum longEnum : long long { Tera = 1000000000000 };

void fct(char val) {}
void fct(int val) {}
void fct(long long val) {}

int main() 
{
    static_assert(sizeof(A) == sizeof(char), "check charEnum size");
    static_assert(sizeof(Tera) == sizeof(long long), "check longEnum size");
    fct('A');  // calls fct(char)
    fct(1);    // calls fct(int)
    fct(2ll);  // calls fct(long long)
    fct(A);    // calls fct(int) !
    fct(Tera); // calls fct(int), with truncation !
    fct((long long)Tera);  // calls fct(long long)
    return 0;
} 
```

为枚举值调用的重载函数始终为`fct(int)`，即使这会导致值被截断。当然，通过显式转换，我们可以调用重载函数，但这在传统的 C++03 语法中也是可能的。

我错过了一些明显的东西吗？这是为什么？有比显式强制转换更好的解决方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T18:47:14.507

这是一个编译器错误。根据 §7.2/9 和 §4.5/4：

> §7.2/9：
> 枚举器的值或无作用域枚举类型的对象通过整数提升（4.5）转换为整数
> 
> §4.5/4：
> 其基础类型固定（7.2）的无作用域枚举类型的纯右值可以转换为其基础类型的纯右值。此外，如果可以将整型提升应用于其基础类型，则其基础类型固定的无作用域枚举类型的纯右值也可以转换为提升的基础类型的纯右值。

最后一个应该转换为`long long`，而不是`int`。[此案是一个争论](https://stackoverflow.com/questions/14206403/why-does-a-value-of-an-enum-with-a-fixed-underlying-type-of-char-resolve-to-fct)点[。`char`](https://stackoverflow.com/questions/14206403/why-does-a-value-of-an-enum-with-a-fixed-underlying-type-of-char-resolve-to-fct)（！）

* * *

测试程序：

```
#include <iostream>

enum charEnum : char      { A = 'A' };
enum longEnum : long long { Tera = 1000000000000 };

void fct(char val)      { std::cout << "fct(char)"      << std::endl; }
void fct(int val)       { std::cout << "fct(int)"       << std::endl; }
void fct(long long val) { std::cout << "fct(long long)" << std::endl; }

int main() 
{
    static_assert(sizeof(A)    == sizeof(char),      "check charEnum size");
    static_assert(sizeof(Tera) == sizeof(long long), "check longEnum size");

    fct('A');
    fct(1);
    fct(2ll);
    fct(A);
    fct(Tera);
    fct((long long)Tera);
} 
```

MSVC2012NovCTP 输出：

> fct(char)
> fct(int)
> fct(long long)
> fct(int)
> fct(int)
> fct(long long)

g++ 4.7.1：

> fct(char)
> fct(int)
> fct(long long)
> fct(int)
> fct(long long)
> fct(long long)

# java - 面包屑和支柱 1.x

> ID：14185354
> 
> 赞同：0
> 
> 时间：2013-01-06T18:32:06.367
> 
> 标签：java, struts-1, breadcrumbs

如何使用 struts 1.x 实现面包屑（例如当用户选择产品浏览类别时）？

struts 1.x有[这样](http://code.google.com/p/struts2-arianna-plugin/)的插件吗？或者？

**编辑**

我正在尝试使用[它](http://illumin-it.servehttp.com/wordpress/2012/06/how-to-make-an-easy-breadcrumb-in-java-for-mvc-framework/)，但我没有成功获得正确的结果。

我有 3 个 jsp 页面（主页、第 1 页、第 2 页）。在所有这些页面中，我都有一个侧边栏菜单（所有页面的菜单相同），其元素是从数据库中检索的。

当用户单击菜单项时，将调用一个 servlet 来检索作为所选项的子项的项，然后在 page1 的中心显示一个元素列表。

在 page1 中，通过单击一个项目，调用另一个 servlet 来检索作为所选项目的子项的项目，然后在 page2 的中心显示一个元素列表。

**编辑**

我解决了。我必须添加与所选项目相对应的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:26:48.260

我自己对 Struts 有点陌生，但这就是我在工作中看到它与瓷砖一起使用的方式。值“INQUIRY”成为面包屑的一部分。

```
<definition name="tile.view" extends=".layout">
    <put name="content" value="/search.jsp" />
    <put name="title.section" value="Inquiry"/>
    <putList name="breadcrumbs">
         <item link="/inquiry.do" value="INQUIRY"/>
    </putList>
</definition> 
```

# templates - Yii 中的不同页面模板

> ID：14185357
> 
> 赞同：1
> 
> 时间：2013-01-06T18:32:23.093
> 
> 标签：templates, yii

我正在为 Yii 项目实现模板。该网站有不同的首页和内页模板。

我知道我必须更改布局文件，但是我怎样才能拥有这些不同的页面模板？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T23:59:47.027

您可以在控制器中执行此操作。例如，我的网站除了几页外看起来都一样。其中之一是登录页面。在 SiteController 中，我已经像这样声明了 actionLogin：

```
/**
 * Displays the login page
 */
public function actionLogin()
{
    $this->layout = '//layouts/simple';
    $model=new LoginForm;

    // if it is ajax validation request
    if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
    // collect user input data
    if(isset($_POST['LoginForm']))
    {
        $model->attributes=$_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if($model->validate() && $model->login())
        //$this->redirect(Yii::app()->user->returnUrl);
        $this->redirect(array('/'));
    }
    // display the login form
    $this->render('login',array('model'=>$model));
} 
```

行 $this->layout = '//layouts/simple'; 用简单布局覆盖默认布局（主）。如果不同的控制器使用不同的布局，您还可以通过在控制器中声明变量来进行控制器范围的更改

```
public $layout='//layouts/column2'; 
```

# c++ - 这是一种通过实现来制作Qt信号的方法吗？

> ID：14185360
> 
> 赞同：0
> 
> 时间：2013-01-06T18:32:34.070
> 
> 标签：c++, qt, signals

当我声明时，我的班级发出信号

```
signal: void someSignal(); 
```

有没有办法 someSignal 将有实现？如果我尝试写类似

```
void someClass::someSignal()
{//something here
} 
```

我收到链接错误。所以它是在某个地方实现的，据我所知它是由 moc-compiler 完成的。那么我是否可以通过某种方式来编写信号的实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:39:55.937

QT 文档说：

> 信号由 moc 自动生成，**不得**在 .cpp 文件中实现

因此，没有办法实现信号。事实上，您只需要呼叫信号。如果您想将信号用作通用功能，只需声明并实现新功能:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:42:39.503

信号为您的类中的函数提供原型。当您将信号连接到插槽时，调用`emit someSignal()`将调用与其连接的插槽。所以没有必要定义你的信号应该做什么，因为连接的插槽会这样做。

苏龙仔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T06:29:25.810

好的，但请记住，插槽必须具有与信号相同的参数，而不是 return(void)，即：

发出 someSignal(int pram1, int pram2) ------ 信号

void someSignal(int pram1, int pram2) ------ 插槽

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T18:39:18.400

不，你不需要这样做，你只需要声明你的信号并使用它发出它

```
 emit someSignal(pram1,pram2); 
```

# objective-c - 使用objective-c将密码从echo传递到hdiutil

> ID：14185362
> 
> 赞同：1
> 
> 时间：2013-01-06T18:32:48.613
> 
> 标签：objective-c, hdiutil

我正在努力学习 obj-C 并且可以使用一些帮助。我正在编写一个“命令行工具”来创建加密的 DMG，然后安全地删除包含的文件。当 hdiutil 创建 DMG 时，它会要求提供加密密码，我正在尝试将此密码从 bin/echo 传输到 hdiutil。

DMG 是按预期创建的，但是当我尝试安装它时，密码不被接受。我尝试使用空白密码和末尾的额外空间进行挂载。

当我 NSLog 管道中的值时，它看起来是正确的，但这可能是因为我刚刚读取了前 4 个字符。我猜密码中添加了一些额外的字符，但我不知道为什么和什么。

两个问题 1：如何将“正确”值作为密码从 NSTask passwordCmd 传送到 NSTask backupCmd？

2：我如何 NSLog 与传递给 [backupCmd setStandardInput:pipe] 的管道中的值完全相同

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSTask *passwordCmd = [NSTask new];
        NSTask *backupCmd = [NSTask new];

        NSPipe *pipe;
        pipe = [NSPipe pipe];

        // Enter password by calling echo with a NStask
        [passwordCmd setLaunchPath:@"/bin/echo"];
        [passwordCmd setStandardOutput:pipe]; // write to pipe
        [passwordCmd setArguments: [NSArray arrayWithObjects: @"test", nil]];
        [passwordCmd launch];
        [passwordCmd waitUntilExit];

        // Log the value of the pipe for debugging 
        NSData *output = [[pipe fileHandleForReading] readDataOfLength:4];
        NSString *string = [[NSString alloc] initWithData:output encoding:NSUTF8StringEncoding];
        NSLog(@"'%@'", string);

        // Create a encrypted DMG based on a folder
        [backupCmd setLaunchPath:@"/usr/bin/hdiutil"];
        [backupCmd setCurrentDirectoryPath:@"/Volumes/Macintosh HD/Users/kalle/Desktop/test/"];
        [backupCmd setArguments:[NSArray arrayWithObjects:@"create",@"-format",@"UDZO",@"-srcfolder",@"backup",@"/Volumes/Macintosh HD/Users/kalle/Desktop/backup.dmg",@"-encryption",@"AES-256",@"-stdinpass",@"-quiet",nil]];
        [backupCmd setStandardInput:pipe]; // read from pipe
        [backupCmd launch];
        [backupCmd waitUntilExit];

        // Do some more stuff...

    }
    return 0;
} 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:02:51.583

我在您的代码中看到两个问题：

1）“hdiutil”文档指出：

> **-stdinpass**
> 从标准输入中读取以空字符结尾的密码。...请注意，密码将包含 NULL 之前的任何换行符。

但是“/bin/echo”总是在输出中附加一个换行符。所以你的密码设置为“test\n”。

2）如果您从管道中读取密码以进行日志记录，则数据“消失”并且不再被备份任务读取。（**编辑：**在我写这个答案时，这也是由 Ramy Al Zuhoury 发布的！）

我不会使用“/bin/echo”任务将密码传送到备份任务中。您可以更好地将必要的数据直接写入管道：

```
NSString *passwd = @"test\0\n"; // password + NULL character + newline
NSData *passwdData = [passwd dataUsingEncoding:NSUTF8StringEncoding];
[[pipe fileHandleForWriting] writeData:passwdData];
[[pipe fileHandleForWriting] closeFile]; 
```

（我不确定“hdiutil”是否真的希望在 NULL 字符之后有一个换行符。您也可以在没有换行符的情况下尝试它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:54:04.377

您已经从管道中读取了这些字符，这些字符非常“消耗”，下次您读取它们时，您将不再找到它们。

如果删除此行，您应该可以做到：

```
NSData *output = [[pipe fileHandleForReading] readDataOfLength:4]; 
```

使管道中仍有 4 个字符可用。

# javascript - 确保 JSON 漂亮打印在从不接触 javascript (ASP.NET MVC 4) 的简单视图模型对象上

> ID：14185364
> 
> 赞同：0
> 
> 时间：2013-01-06T18:32:58.307
> 
> 标签：javascript, jquery, asp.net-mvc-4

我有一点精神上的脱节。我已经看到如何使用 JSON[在此主题上](https://stackoverflow.com/questions/4810841/json-pretty-print-using-javascript)进行漂亮的打印`JSON.stringify(obj);`- 但我有一种情况需要这样做，但 json 从未真正触及 javascript。它只是 MVC 视图模型上的一个字符串。这是一个“错误”视图，像这样......

（我正在使用 jQuery，如果这会打开任何其他选项）

# 模型

```
public class FailureViewModel{
        public string Name { get; set; }
        public string Message { get; set; }
        public string JSON { get; set; }
    } 
```

它有点像这样。如果操作失败，它会生成以下视图。

# 控制器

```
 return View("Failure", new FailureViewModel{
            Name = "Some Error Name",
            Message = "There was an error and the changes were not submitted. Please submit this to the administrator",
            JSON = model.ToJson()
        }); 
```

# 看法

```
@model FailureViewModel

@{
    ViewBag.Title = "Error With Data Entry";
    Layout = "~/Areas/Administrator/Views/Shared/_Layout.cshtml";
}

<article>
    <aside class="red">
        @Model.Message
    </aside>
    <aside>
        <pre>
            @Model.JSON
        </pre>
    </aside>
</article> 
```

我基本上只是想对它进行“字符串化”，`@Model.JSON`这样它就可以很好地显示它并且格式化了，但是在没有真正使视图复杂的情况下我很难做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:35:00.567

从@给我的链接中，我`charlietfl`设计了以下内容来实现我的目标。

## 查看模型

```
public class SuccessViewModel {
        public string Name { get; set; }
        public string Message { get; set; }
        public string JSON { get; set; }
    } 
```

## 控制器

```
 return View("Success", new SuccessViewModel {
        Name = "The Title",
        Message = "The message",
        JSON = model.ToJson()
    }); 
```

## 看法

```
@model SuccessViewModel

@{
    ViewBag.Title = "Successful Data Entry";
    Layout = "~/Areas/Administrator/Views/Shared/_Layout.cshtml";
}

<article>
    <aside class="green">
        @Model.Message
    </aside>
    <aside>
        <pre id="json-result">
        </pre>
    </aside>
</article>

<script type="text/javascript">
    $(document).ready(function(){
        var str = JSON.stringify(@(new MvcHtmlString(Model.JSON)), undefined, 2); // indentation level = 2
        $('#json-result').html(str);
        console.log(str);
    });
</script> 
```

## 扩展方法

```
/// <summary>
/// Allows for any object to be serialized into Json very quickly.
/// </summary>
public static class JsonExtensions {
    /// <summary>
    /// Serializes an object to Javascript Object Notation.
    /// </summary>
    /// <param name="item">The item to serialize.</param>
    /// <returns>
    /// The item serialized as Json.
    /// </returns>
    public static string ToJson(this object item) {
        return Newtonsoft.Json.JsonConvert.SerializeObject(item);
    }
} 
```

# objective-c - 在 MailComposeViewController 中打印一个字符串

> ID：14185367
> 
> 赞同：0
> 
> 时间：2013-01-06T18:33:07.733
> 
> 标签：objective-c, ios, string, mfmailcomposeviewcontroller

我正在开发一个应用程序，我想将字符串显示`stringValue`为一个变量，以便在有人想通过电子邮件从我的应用程序共享某些内容时显示。

```
- (IBAction)openMail:(id)sender {
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
        mailer.mailComposeDelegate = self;
        [mailer setSubject:@"My App"];
        NSArray *toRecipients = [NSArray arrayWithObjects:@"tony@starkindustries.com", nil];
        [mailer setToRecipients:toRecipients];
        NSString *emailBody = [@"Rating is: %@", [self.app.rating stringValue];
        [mailer setMessageBody:emailBody isHTML:NO];
        [self presentModalViewController:mailer animated:YES];
    } 
```

打开邮件时如何使`[self.app.rating stringValue];`显示为“Rating Is: **some_number** ”？也许我`%@`写错了部分？任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:38:47.703

```
[NSString stringWithFormat:@"Rating is: %@", [self.app.rating stringValue]]; 
```

只要`[self.app.rating stringValue]`返回一个有效的`NSString`对象，就可以解决问题（尽管`%@`说明符对于其他可可对象（例如`NSNumber`等）也可以正常工作，因此如果`self.app.rating`是这样，`NSNumber`您甚至可以在不向其发送`stringValue`消息的情况下格式化字符串）。

有关字符串格式的更多信息，您可以在[此处查看 Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/FormatStrings.html#//apple_ref/doc/uid/20000943-CJBEAEHH)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:39:09.113

尝试以下操作：

```
NSString *emailBody = [NSString stringWithFormat:@"Rating is: %@", [self.app.rating stringValue]; 
```

[self.app.rating] 需要返回一个字符串，才能使用上面的代码。

希望它有用并回答您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T19:24:15.727

你漏掉了`stringWithFormat:`

你需要：

```
NSString *emailBody = [NSString stringWithFormat:@"Rating is: %@", [self.app.rating stringValue]]; 
```

# node.js - Socket.IO IPv6（2013年1月版）

> ID：14185370
> 
> 赞同：1
> 
> 时间：2013-01-06T18:33:17.743
> 
> 标签：node.js, socket.io, ipv6

我需要使用 Socket.IO 及其客户端通过 IPv6 网络连接两个 Node.js 服务器。

一年前，[由于与客户端解析地址，这似乎是不可能](https://stackoverflow.com/q/8550656/362536)的。现在看来，[至少有一个人让它发挥了作用](https://github.com/LearnBoost/socket.io/issues/992)。

所以，我在服务器上尝试了一些简单的测试代码：

```
var io = require('socket.io').listen(8124, '::1'); 
```

而且，在客户端：

```
io.connect('http://[::1]:8124'); 
```

这失败了。（没有输出错误，我现在正在调查。我认为这是我从 winston 使用的崩溃处理程序中的一个错误。）

我还注意到，如果我`http://[::1]:8124/`使用 Chrome，我不会收到通常的“欢迎使用 socket.io。”调试消息。奇怪的是，如果我去`http://127.0.0.1:8124/`，我确实收到了这条消息，尽管告诉服务器只听`::1`。

**从 Socket.IO 0.9.11 版开始，是否可以使用 IPv6？** 如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:18:31.403

尝试

```
var io = require('socket.io').listen(require('http').createServer().listen(8124, '::1')); 
```

或（获取调试消息）：

```
var server = require('http').createServer().on('request', function (req, res) {
    res.writeHead(200);
    res.end('Welcome to socket.io.');
}).listen(8124, '::1');
var io = require('socket.io').listen(server); 
```

我用 curl ( `curl -g http://[::1]:8124/`) 和 nodejs 测试了它：

```
require("http").get({hostname:"::1", port:8124,path:"/"}, function(res) {
    console.log("Got response: " + res.statusCode);
    res.on("data",function(chunk) {
        console.log("BODY: " + chunk);
    });
}).on("error", function(e) {
    console.log("Got error: " + e.message);
}); 
```

使用“真实”主机名适用于客户端：

```
require('socket.io-client').connect('http://ip6-localhost:8124/'); 
```

我的 /etc/hosts 包含条目`::1 ip6-localhost`，因此如果您的主机名仅指向 IPv6 地址，这应该可以工作。（如果第一次连接不起作用，它不会回退到另一个地址，因此使用 localhost 作为名称它不会从 IPv4 回退到 IPv6）。

可悲的是，nodejs url 模块（至少是 debian 中的 0.6.19 版本）看起来不支持文字地址，因此 xmlhttprequest 模块也不支持：

```
console.log(require('url').parse('http://[::1]:8124/')); 
```

socket.io-client 模块也不支持文字地址，但你可以这样欺骗它：

```
require('socket.io-client').connect('http://blank:8124/', {host:'[::1]'}); 
```

这将使用 XMLHTTPRequest 作为后端，因此它仍然不适用于 nodejs（也许它可以与浏览器中的“真实” XMLHTTPRequest 对象或更新的 nodejs 版本一起使用）。

**更新**：更新的节点版本（尝试 v0.9.6-16-g9668df8）在 url 解析器中支持文字 ipv6 地址，因此在 xmlhttprequest 中。

# asp.net - ASP.NET 3.5 和 MVC4 中的 Windows 身份验证

> ID：14185373
> 
> 赞同：-1
> 
> 时间：2013-01-06T18:33:23.270
> 
> 标签：asp.net, .net, authentication, asp.net-mvc-4, authorization

在我的公司中，我们使用 ASP.NET 3.5 门户网站，经过身份验证后，我可以打开门户网站内的任何网站（它们都是用 ASP.NET 3.5 编写的）。

现在我想在 MVC4 (.NET Framework 4.5) 中构建一个 Web 应用程序，并且我想将身份验证从门户“传递”到新站点，这样当某个具有 [Authorized] 属性的控制器将自动授权用户时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:19:58.680

听起来您需要一个单点登录解决方案，您的用户在该解决方案中进行一次身份验证并可以访问不同 Web 应用程序上的各种资源。

这是一个广泛的主题，请自行进行一些研究，然后针对特定协议/框架/实现提出具体问题。

# ruby - 子类化核心 Ruby 类，例如 Hash

> ID：14185375
> 
> 赞同：8
> 
> 时间：2013-01-06T18:33:35.833
> 
> 标签：ruby, hash, subclassing, duck-typing

我需要一个类似于 Hash 的类，尽管不一定具有所有 Hash 方法。我已经读过，对像 Hash 这样的核心类进行子类化并不是一个好主意。不管这是否属实，做这种事情的最佳做法是什么？

```
# (a) subclass Hash, add new methods and instance variables
class Book < Hash
   def reindex
     @index = .....
   end
end

# (b) create a new class from scratch, containing a hash, 
#    and define needed methods for the contained hash
class Book
  def initialize(hash)
    @data = hash
  end 
  def []=(k,v)
    @data[k] = v
  end
  # etc....
  def reindex
    @index = ....
  end

# (c) like (b) but using method_missing

# (d) like (b) but using delegation 
```

我意识到 Ruby 有不止一种方法来完成给定任务，但是在相对简单的情况下，对于上述哪种方法更可取，有什么通用规则吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T21:13:06.137

如果我绝对不希望类哈希对象具有某些哈希方法，那么我会将对象包装在我自己的类中，并且只公开我希望它具有的方法（您的选项 b）。

如果我希望它通过一些添加行为来保持其真正的哈希行为，我会在模块中将该行为添加到哈希对象本身，而不是修改核心哈希类：

```
module SpecialHash
  def reindex
    # method def
  end
end

my_hash = {}
my_hash.extend(SpecialHash)
my_hash.reindex #now is defined on my hash 
```

最常见的是，这些选项之一对我有用。

一般来说，我倾向于使用模块来扩展类行为而不是类继承，因为我认为它是一种更简洁、更轻量级的方法。创建一个新类总是让我觉得我正在向我的领域模型添加一个新的“东西”。这很好，这正是您在无数场景中想要做的，但是当您实际上不需要走那么远时，Ruby 的 mixin 功能为您提供了一个非常好的选择。

我处理创建类的主要时间是我想要跟踪的对象中是否有一些额外的状态。如果我的补充不是关于扩展对象的状态，而只是扩展它的行为，那么我几乎总是会从使用模块将该行为混合到该类的现有实例中开始。

这类问题的另一个答案也提出了一些值得牢记的其他要点： [ruby 继承 vs mixins](https://stackoverflow.com/questions/1282864/ruby-inheritance-vs-mixins)

# assembly - 装配中的 EBP、ESP 和堆栈框架

> ID：14185381
> 
> 赞同：8
> 
> 时间：2013-01-06T18:34:37.460
> 
> 标签：assembly, x86, nasm, calling-convention, stack-frame

我对以下代码中的 EBP、ESP 和堆栈框架有一些疑问。

1.  为什么我们从 esp 中减去 28？我们在 main 中有两个局部变量 x 和 y。那么为什么我们不减去 8 呢？

2.  而且我们不是将值从右（或顶部）到左（或底部）放入堆栈吗？那么为什么我们在 [eax+8] 中加 1 而不是 [eax+4] 呢？

* * *

```
func(int a, int b, int c)
{
  return a+b+c;
}
main()
{
 int x, y=3;
 x=func(y,2,1);
} 
```

![在程序集中传递参数](../Images/b7b645719d0d3a0f60695dfcd89d69e6.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T19:11:46.287

1.  堆栈指针减去 28，因为两个局部变量需要 8 个字节，函数参数需要 12 个字节。额外的 8 个字节可能是由于您的编译器尝试将 main 的堆栈与 16 字节边界对齐（堆栈上已经有 4 个字节用于 main 的返回地址，而当 EBP 被推送以在 main 的第一条指令中建立堆栈帧时，另外 4 个字节）。如果您使用 GCC，请参阅[-mpreferred-stack-boundary 。](http://gcc.gnu.org/onlinedocs/gcc-4.2.0/gcc/i386-and-x86_002d64-Options.html)

2.  参数从右到左传递。由于堆栈空间在从堆栈指针中减去时已经分配给三个参数，因此将 1 移动到相对于当前堆栈指针的“最高”位置（+8），将 2 移动到中间（+4） ，并且 y 中的值被移动到堆栈指针本身。这与将 1 压入堆栈，将 2 压入堆栈，然后将 y 压入堆栈相同。通过最后一个 push 指令，1 是来自 ESP 的 +8，2 是来自 ESP 的 +4，y 是来自 ESP 的 +0。请注意，在 func 内部，它必须将这些偏移量加 8，因为返回地址是从 call 指令压入堆栈，而 func 会压入 EBP 以建立堆栈帧。

3.  对哪种结构感到困惑？

# ajax - 对backbone.js 的跨域CORS 支持

> ID：14185383
> 
> 赞同：1
> 
> 时间：2013-01-06T18:34:48.270
> 
> 标签：ajax, node.js, backbone.js, express, cors

我正在尝试为我的主干应用程序实现跨域设置。

我的服务器（express.js）允许跨域和凭据：

```
var allowCrossDomain = function(req, res, next) {
  var allowedHost = [
    'http://localhost:3001',
    'http://localhost:7357'
  ];

  if(allowedHost.indexOf(req.headers.origin) !== -1) {
    res.header('Access-Control-Allow-Credentials', true);
    res.header('Access-Control-Allow-Origin', req.headers.origin)
    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');
    res.header('Access-Control-Allow-Headers', 'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version');
    next();
  } else {
    res.send({auth: false});
  }
}

app.configure(function(){
    ....
    app.use(allowCrossDomain);
    ....
}); 
```

我的客户端（backbone.js）也配置为接受跨域：

```
define(["backbone", "jquery", "underscore"], function (BB, $, _) {
  return BB.Model.extend({

    idAttribute: "_id",

    initialize: function () {
      var that = this;

      $.ajaxPrefilter( function( options, originalOptions, jqXHR ) {
        options.crossDomain ={
          crossDomain: true
        };
        options.xhrFields = {
          withCredentials: true
        };
      });
    }
  });
}); 
```

现在，当我测试我的代码（假设是一个`POST`请求）时，我有一个非常特殊的行为：

```
var contacts = new Contacts;
contacts.create({'name': 'my name'}); 
```

浏览器返回此消息：

> 选项 ... 404（未找到）jquery.js:8419

这完全让我感到困惑，因为`OPTIONS`骨干网不支持 http 方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T22:47:13.780

最有可能的是，您的 Express 路线仅指定`GET`和/或`POST`方法。例如，

```
app.post('/some/api/method', function(req, res) { ... }); 
```

这意味着您只为`POST`s 定义了一个路由处理程序到*/some/api/method*，并且使用任何其他方法（如`GET`or `OPTIONS`）的请求将返回 404。

[在某些情况下（例如发送自定义 HTTP 标头），使用CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)对跨域 URL 的 XHR 请求要求浏览器必须首先发出`OPTIONS`请求以查看是否允许跨域请求。仅当请求成功（**带有**`OPTIONS`CORS 标头的HTTP 200 ）时，浏览器才会发出实际请求。

 **由于您只`POST`在服务器上定义了一条路由，因此`OPTIONS`请求失败并且浏览器不会发出请求。您需要正确响应`OPTIONS`请求：

```
app.options('/some/api/method', function(req, res) {
    // At this point, the `allowCrossDomain()` middleware will already have
    // taken care of the CORS stuff, so just return OK.
    res.send(200);
}); 
```

现在，预检`OPTIONS`检查将通过，因此将向处理程序发出真正的请求`POST`。

* * *

关于您的代码的额外评论：

*   性能改进：
    *   使用对象而不是数组来查找和验证来源。使用`indexOf`需要对每个请求进行缓慢的数组迭代，而使用对象可以快速查找。（请记住，JavaScript 对象将它们的键存储在类似字典的数据结构中。）
    *   `allowedHosts` *在验证函数之外*定义——它们不会改变，所以每次`allowCrossDomain`调用都不需要创建一个新对象（需要垃圾收集）。
*   当跨域检查失败时，您可能应该发送一个不成功的 HTTP 响应代码。

```
var allowedHost = {
  'http://localhost:3001': true,
  'http://localhost:7357': true
};

var allowCrossDomain = function(req, res, next) {
  if(allowedHost[req.headers.origin]) {
    res.header('Access-Control-Allow-Credentials', true);
    res.header('Access-Control-Allow-Origin', req.headers.origin)
    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');
    res.header('Access-Control-Allow-Headers', 'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version');
    next();
  } else {
    res.send(403, {auth: false});
  }
} 
```**

# ruby - 是否可以表示`stuff.map {|x| 把 x}` 更简洁？

> ID：14185385
> 
> 赞同：3
> 
> 时间：2013-01-06T18:34:55.753
> 
> 标签：ruby, map, block

我想用某种速记来表达以下内容：

```
stuff.map {|x| puts x} 
```

像这样：

```
stuff.map {puts} 
```

我无法弄清楚语法。有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T02:03:46.030

首先：在这里使用没有意义`map`，因为您不是在进行映射操作，而是进行简单的副作用迭代。这*正是*它的`each`用途。使用`map`只会让未来的维护者（包括你自己）感到困惑。

`each`并`map`采取一个块。您可以使用一元前缀`&`运算符将任何响应的对象`to_proc`转换为块。值得庆幸的是，`Method`s*确实*响应`to_proc`，因此您可以直接传递要调用的方法：

```
stuff.each(&method(:puts)) 
```

但是，如果`stuff`是`Array`，还有一种更简单的方法，因为`puts`特殊情况`Array`s 可以完全按照您正在做的事情。因此，您的代码 100% 等同于

```
puts stuff 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T18:48:31.260

既然你有一个数组，你可以写

```
puts stuff 
```

但是，一般来说，您可以向 String 或 Object 添加一个方法，然后可以直接将其传递给一个方法，`Enumerable.`因为`Symbol`有一个`to_proc`方法，您可以在不需要块的情况下调用该方法。

```
class Object; def myputs; puts self; nil; end; end

stuff.each &:myputs # or, even better, ...

stuff.myputs 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T18:47:36.580

也许你在暗示`map(&:method)`语法，但在`puts`' 的情况下这是不可能的。

在引擎盖下，Ruby 调用`to_proc`了这个符号。这个方法的主体是：

```
def to_proc
  proc { |obj, *args| obj.send(self, *args) }
end 
```

在您的情况下， obj 是`stuff`并且 self 是`puts`。

如您所知，`stuff`不响应该`puts`方法，因此您不能在当前表达式中使用符号构造。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T18:55:26.420

虽然它已经关闭，但我建议：

```
stuff.map(&Kernel.method(:puts)) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-06T18:45:15.767

### 你需要一个接收器

[Array#map](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)的块格式返回一个数组，因此您仍然需要一个接收器（例如 Kernel，使用[Kernel#puts](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-puts)）将每个元素发送到标准输出。你可以这样做：

```
puts [1, 2, 3].map(&:to_s) 
```

但这肯定不会使事情变得更短或更清晰。也许你应该重新审视你真正想要完成的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T18:44:58.983

根据[文档](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)：

```
a.map(& puts) 
```

返回一个枚举器。您还可以执行以下操作：

```
puts a.map(&:to_s) 
```

打印出每个元素。

# javascript - SCM 音乐播放器上的单个曲目信息

> ID：14185389
> 
> 赞同：1
> 
> 时间：2013-01-06T18:35:30.533
> 
> 标签：javascript, audio-player

警告：虽然我对 HTML + CSS 很自在，但我对 JS 知之甚少。请原谅我对这些事情一无所知...

我刚刚在我们的 Wordpress 网站上实现了一个不错的开源、基于 JS 的收音机：SCM 音乐播放器（参见[https://github.com/cshum/SCM-Music-Player](https://github.com/cshum/SCM-Music-Player)）。除其他品质外，它使人们能够在流式传输时浏览网站。

参见：[www.meridian-online.com](http://www.meridian-online.com)

该电台旨在增强我们网站的浏览体验，同时也介绍了创作正在播放的音乐的各种艺术家。因此，我想做的是为每首曲目“添加”一条额外的信息：指向我们网站上展示音乐家、曲目内容等的页面的链接。

例如，当播放曲目“变形”时，我希望音乐播放器包含一个指向[讨论该曲目的页面](http://www.meridian-online.com/arcoverde-cordel-do-fogo-encantado/)的链接。

现在，我在播放器中包含了一个硬编码链接，指向显示*所有*可用曲目的页面 (http://www.meridian-online.com/mmm/)；但我不知道如何用自定义链接替换它，该链接会直接导致讨论这首歌的帖子。

现在，播放器是这样工作的：在我的 Wordpress 主题的标题中，我必须添加一段代码，包括每个音乐文件的名称 + URL（`{'title':'Transfiguracão - by Cordel do Fogo Encantado','url':'https://soundcloud.com/meridian-online/transfigurac-o-cordel-do-fogo'}`等）。

我想我必须想办法为每首曲目添加额外的元数据——即解释页面的 URL。但我不知道如何相应地修改 JS 文件。

关于如何处理这个问题的任何建议？（我已经写了插件开发者，但是过了好几个星期，仍然没有回复）

干杯，

多里安

# javascript - JavaScript 库/框架的分类

> ID：14185394
> 
> 赞同：4
> 
> 时间：2013-01-06T18:36:41.613
> 
> 标签：javascript

我开始为 Web 应用程序学习 JavaScript。在此之前，我有使用基本 JavaScript 和 jquery 操作 DOM 元素的经验。我还研究过一些 AJAX。通过最近在网上阅读，我发现：

*   JavaScript 可以像在 Node JS 中一样在**服务器端使用。**
*   **用于操作 DOM**元素和**AJAX**的传统 JavaScript
***   它还可用于使用框架/库基于**MV*** 架构 [如 Backbone JS、Angular JS、Ember JS]构建强大的应用程序（**客户端）。*****   **然后是用于微模板**的 JavaScript 框架/库 [如下划线 JS、HAML-JS]、用于 AMD [需要 JS]、Logic Less [Handlebars JS、Mustache、Dust JS]。*   还有可以编译为 JS的**咖啡脚本。******

 ****在阅读完所有这些之后，我非常困惑如何根据它们对 JavaScript 框架/库进行分类

*   **Side** [客户端、服务器端、客户端-服务器端、浏览器端]
*   **功能**[MV*、DOM 脚本、微模板等]

有人可以用每个库/框架的一些例子来解释这个混乱。还有任何**资源/书籍/幻灯片**，我可以在其中获取有关如何在 Web 上以不同方式使用 JavaScript 的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:57:15.957

Javascript 只是一种语言，您会混淆语言和它可以访问的 API。在浏览器上，API 是 DOM 周期。

在服务器上，API 是使用 Javascript 作为脚本语言的任何软件。

NodeJS 有一个与 DOM 无关的 API，此外，NodeJS javascript 并不总是与在浏览器上运行的 javascript 兼容。

MongoDB（使用 Javascript 作为脚本语言的数据库）既不支持 DOM api 也不支持 nodeJS API，但它有自己的 API。

Fireworks (Adobe) 也使用 javascript 作为脚本语言，并且 API 与其他“可用”API 无关。

Dreamweaver (Adobe) 使用 javascript 的 API 甚至与其他 Adob​​e 产品不兼容。

如果您想了解 Javascript 语言是什么，请阅读 ECMAScript（官方名称）规范。Javascript 是一种非常简单的语言。

因此，当您找到一个框架/库/whatever 时，只需检查该库打算使用的上下文。如果要对库进行排序，则必须首先了解它们的使用上下文。

在客户端，可以有纯 javascript 库（例如仅处理 javascript 对象的下划线）或处理 DOM（jQuery，任何使用 AJAX 的框架，因为 AJAX 是 DOM 的一部分，所以大多数 MVC/MVP /MVVM 框架）或两者兼而有之。

还有一些语言可以编译成 javascript（typescript、coffeescript、dart、haxe ...），这意味着你用一种语言编程，编译源代码，最后得到一些 javascript。****

# c++ - C ++中的宏指令和预处理器指令有什么区别

> ID：14185395
> 
> 赞同：4
> 
> 时间：2013-01-06T18:36:44.533
> 
> 标签：c++, macros, c-preprocessor, preprocessor-directive

> **可能重复：**
> [宏和预处理器之间的区别](https://stackoverflow.com/questions/11958171/difference-between-macro-and-preprocessor)

我对 C++ 中的宏指令和预处理器指令有疑问，它们之间有什么区别？似乎它们或多或少相同？我试着在网上查了下，还是看不懂，谁能帮忙？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T18:37:59.480

预处理器指令是任何以 开头的语言特性，`#`例如`#if`, 。在正确的编译器启动之前，它们完全由预处理器作为一个单独的阶段进行处理。`#pragma``#include`

宏是由 a 定义的任何东西`#define`；它只是一种特殊的预处理器指令。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-06T18:37:55.603

宏是预处理器指令的子集：

```
#define X 
```

这是一个宏**和**一个预处理器指令。

```
#pragma once 
```

这只是一个预处理器指令。

宏开始`#define`并定义将在预处理时扩展的元素。

# c - 复制到 C 中的 Null 位置并传递无效数据时崩溃

> ID：14185400
> 
> 赞同：0
> 
> 时间：2013-01-06T18:37:12.327
> 
> 标签：c, memory, crash, null

我有以下结构：

```
struct PList{
    Person value;
    PList* next;
} 
```

和

```
struct Person{
    char name[100];
    PersonID ID;
    float amountOwed;
} 
```

和

```
struct PersonID{
    int number;
    char letter;
} 
```

在主要方法中：

```
Person n;
// n is inputted from the user
addPersonToList(&n, &customers); //customers is a PList 
```

这是 addPersonToList 的代码：

```
void addPersonToList(Person* p, PList* pdb) {
        PList* db;
        db = pdb;
        while (db->next != NULL ) {
                db = db->next;
        }
        PList a;
        a = createNewPList();  // this simply assigns next to NULL and value to an empty Person
        a.value = *p;
        memcpy(db->next,&a,sizeof(PList)+sizeof(Person)+sizeof(PersonID));
} 
```

这里是 createNewPList

```
PList createNewPList() {
        PList a;
        a.next = NULL;
        a.value = constructPerson("", constructPersonID(' ', 0), 0);
        return a;
} 
```

**问题 1** *UNSOLVED* 当调用 addPersonToList 方法时，Person 中的所有值都正确传递，除了 p->Id.number。这在方法调用之前和方法调用之后完全混淆了。

**解决了问题 2** 而不是我尝试的 memcpy db->next = a *;* 以及手动分配所有值。但是在那条线上程序正在崩溃，我假设导致 db->next 当前为 NULL

至于错误，没有错误显示。该程序只是崩溃。

感谢您提供任何解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:41:09.967

你有

```
while (db->next != NULL )
/* ... */
memcpy(db->next 
```

根据定义，这总是错误的，因为它总是会`memcpy`进入`NULL`. 您需要将东西分配给`db->next`. 我*怀疑*你只需要放弃`memcpy`并说：

```
db->next = createNewPList(); 
```

### 编辑

在看到更多令人惊叹的代码之后，您可能想要：

```
db->next = malloc(...);
memcpy(db->next, &a ... ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:51:19.393

你`createNewPList()`应该返回一个指向堆上分配的东西的指针：

```
PList*
createNewPList(void)
{
        PList*    a;

        if ((a = malloc(sizeof(*a)) == NULL)
            return NULL;
        a->next = NULL;
        a->value = constructPerson("", constructPersonID(' ', 0), 0);
        return a;
} 
```

然后，您应该忘记这一点`memcpy()`，只需将您`next`的返回值设置为`createNewPList()`：

```
db->next = createNewPList(); 
```

`linked list`当你不再需要它们时，不要忘记通过你的和释放每个指针。

# javascript - 将回调函数传递给 jQuery AJAX 成功函数

> ID：14185402
> 
> 赞同：12
> 
> 时间：2013-01-06T18:37:23.310
> 
> 标签：javascript, jquery, ajax, callback

我试图传入一个函数以在 AJAX 调用成功时运行，但是它不起作用，因为它说“回调不是函数”。

例子：

调用代码：

```
getGrades(var); 
```

JS：

```
function getGrades(grading_company) {

    // Set file to get results from..
    var loadUrl = "ajax_files/get_grades.php";

    // Set data string
    var dataString = 'gc_id=' + grading_company;

    // Set the callback function to run on success
    var callback = 'showGradesBox';

    // Run the AJAX request
    runAjax(loadUrl, dataString, callback);

}

function showGradesBox(response) {

    // Code here...

}

function runAjax(loadUrl, dataString, callback) {

    jQuery.ajax({
        type: 'GET',
        url: loadUrl,
        data: dataString,
        dataType: 'html',
        error: ajaxError,
        success: function(response) {
            callback(response);
        }
    });    

} 
```

现在，如果我用函数名本身替换下面的这一行，它就可以工作：

```
callback(response); 
```

但是我不能让它像上面那样工作，我从传入的参数中获取函数名。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T18:41:07.007

`showGradesBox`是代码中的字符串。所以你有两个选项来执行回调函数：

如果你想保留你可以使用的字符串

```
this[callback](response); 
```

（如果`callback`在全局范围内定义，您也可以使用`window[callback](response);`

或者你可以直接传递函数：

```
var callback = showGradesBox; 
```

（在这种情况下，您可以保留现有代码以执行回调）

# java - 配置 Spring 以在 bean 初始化之前设置系统属性

> ID：14185406
> 
> 赞同：5
> 
> 时间：2013-01-06T18:37:47.203
> 
> 标签：java, spring, jakarta-ee, spring-mvc, configuration

在 Spring MVC Web 应用程序中，我在配置文件中配置了一个 bean：

```
<bean class="com.callback.CallbackService"/> 
```

在服务类中，bean 的初始化如下所示：

```
@Autowired
CallbackService service 
```

上面显示的 CallbackService 通过以下三个调用获取其连接属性（目前无法更改）：

```
System.getProperty("user");
System.getProperty("password");
System.getProperty("connectionURL"); 
```

声明 CallbackService 实例的服务类可以通过读取属性文件来访问上述三个值，如下所示：

```
@Value("${user}")
protected String userName;

@Value("${password}")
protected String password;

@Value("${connection}")
protected String connectionString; 
```

我需要为 CallbackService 设置属性就是设置系统属性（在它们被初始化之后），如下所示：

```
System.setProperty("user", userName);
System.setProperty("password", password);
System.setProperty("connectionURL", connectionString); 
```

然而，我遇到的问题是初始化对象的顺序。属性正在初始化，但看起来 System.setProperty 调用发生在 Spring 从属性文件中准备好它们之前。

我尝试了几种解决方案，但似乎 CallbackService 对象是在从属性文件中读取值并调用 System.setProperty 之前实例化的。

属性文件最终会被读取，因为如果我从 @Controller 方法之一访问它们，我可以看到这些值。问题在于初始化属性和实例化 CallbackService 实例的点。

经过几个小时的谷歌搜索，我尝试了以下解决方案，但似乎没有一个在 CallbackService 实例的初始化/实例化之前填充系统属性

1.  在方法中实现`InitiazingBean`和设置系统属性 `afterPropertiesSet()`。
2.  在方法中实现`ApplicationListener`和设置系统属性`onApplicationEvent()`。
3.  XML 中 CallbackService bean 定义的设置`lazy-init=true`。
4.  如此处所述[设置系统属性使用 Spring 配置文件设置系统属性](https://stackoverflow.com/questions/3339736/set-system-property-with-spring-configuration-file)

上面的第 4 点似乎是我想要的，但是当我将以下内容（具有我需要的三个属性）添加到我的上下文文件中时，我没有看到任何区别。

```
<bean id="systemPrereqs"
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" value="#{@systemProperties}" />
    <property name="targetMethod" value="putAll" />
    <property name="arguments">
        <!-- The new Properties -->
        <util:properties>
            <prop key="java.security.auth.login.config">/super/secret/jaas.conf</prop>
        </util:properties>
    </property>
</bean> 
```

如何确保在`System.setProperty`执行调用之前从属性文件中读取值，然后才应实例化 CallbackService 实例？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T21:13:22.620

您可以让`CallbackService` [依赖于](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-dependson)另一个初始化系统属性的bean，例如

```
 class SystemPropertiesInitializer {

      SystemPropertiesInitializer(@Value("${user}") String userName, 
              @Value("${password}") String password, 
              @Value("${connection}" String connectionString) {

          System.setProperty("user", userName);
          System.setProperty("password", password);
          System.setProperty("connectionURL", connectionString);
      }
 } 
```

下一个，

```
 <bean id="systemPropertiesInitializer" class="com.callback.SystemPropertiesInitializer"/>
 <bean class="com.callback.CallbackService" depends-on="systemPropertiesInitializer"/> 
```

或者，您可以使用[@DependsOn](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/context/annotation/DependsOn.html)注释：

```
 @Component
 @DependsOn("systemPropertiesInitializer")
 class CallbackService { 
     // implementation omitted
 } 
```

# php - 如何记录文件上传的文件名和大小

> ID：14185414
> 
> 赞同：0
> 
> 时间：2013-01-06T18:38:06.233
> 
> 标签：php, apache, logging, file-upload

我想保留一些关于上传到我的服务器的文件的静态信息，包括文件名、大小和响应时间。

我使用 PHP 来处理服务器端的上传（客户端是 POST 表单），但理想情况下我想使用 Apache 的日志记录工具来收集上述数据。所以，我正在尝试修改 access_log 的默认格式，但我只找到了如何添加响应时间（使用 %D 格式化程序）。

是否可以使用 Apache 日志至少监控 POST 请求的大小以及上传文件的文件名（如果可能）？

# jquery-selectors - jQuery 交换 DIV 内容优化

> ID：14185422
> 
> 赞同：0
> 
> 时间：2013-01-06T18:38:50.940
> 
> 标签：jquery-selectors, jquery

我有以下***工作***代码，我想使用三级运算符进行优化，并为对象提供“状态”变量。但是，我对在哪里放置点击事件来完成此操作感到困惑。

HTML（支持具有以下布局的多个 div）：

```
<div class="adbox">
  <div class="ad-image">Image 2 Goes Here <a class="swap-content" href="#">Next</a></div>
  <div class="ad-content">Ad 2 text goes here <a class="swap-image" href="#">Back</a></div>
</div> 
```

jQuery代码：

```
<script lang="javascript">
  $(document).ready(function() {
    var speed = 500;
    $('a.swap-content').click(function() {
      var myad = $(this).parent().parent();
      $(myad).find('div.ad-image').fadeOut(speed, function(){
        $(myad).find('div.ad-content').fadeIn(speed)
      });
    });
    $('a.swap-image').click(function() {
      var myad = $(this).parent().parent();
      $(myad).find('div.ad-content').fadeOut(speed, function(){
        $(myad).find('div.ad-image').fadeIn(speed)
      });
    });                            
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:55:21.490

试试这个

```
$(document).ready(function() {
    var speed = 500;
    $('.adbox').find('a').click(function() {
        var self = $(this); 
        self.parent().fadeOut(speed, function(){
            self.parent().siblings('div').fadeIn(speed)
        });
    });                   
}); 
```

[**演示**](http://jsfiddle.net/qXqbS/)

# java - 包装器类型真的是引用类型吗

> ID：14185432
> 
> 赞同：1
> 
> 时间：2013-01-06T18:40:10.623
> 
> 标签：java, oop

看看这段代码

```
 Integer x=new Integer(55);
 Integer y=x;
 y=33;
 System.out.println(x);//x still prints 55 instead of 33 
```

为什么要`x`打印`55`。

我认为`x`应该打印`33`，因为它是参考类型。这可能很愚蠢，但对`java`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:42:34.480

之后`y = x`，两者`x`和都`y`引用相同的 Integer 对象，其中包含值 55。

但是这一行：

```
y = 33; 
```

做两件事：它自动创建一个 Integer 对象（自动装箱），其值为 33 并使变量`y`指向该新对象。此时，变量`x`仍指向原始整数 (55)。

注意：这与原语无关：

```
StringBuilder x = new StringBuilder("abc");
StringBuilder y = x; //y's value is "abc"
y = new StringBuilder("def"); //y's new value is "def", but x's value still is "abc" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:42:04.513

> 为什么要`x`打印`55`。

因为它**是**引用类型。这一行：

```
y=33; 
```

真的是简写：

```
y = Integer.valueOf(33); 
```

即创建了一个新对象，*^(现在)`y`改为引用它。原始对象没有改变，`x`也没有改变。

* * *

[* 为了迂腐，这不一定是真的。但它肯定会与原始对象不同。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:42:20.597

```
y=33; 
```

方法

```
y=new Integer(33); 
```

这是通过自动装箱为您完成的。

因此 x 不会改变，您只需为 分配一个新的引用`y`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T18:42:24.160

y=33 行创建了一个值为 33 的新 Integer。x 仍然引用值为 55 的原始 Integer。

# ruby-on-rails - 从 HTML 中提取 XML？

> ID：14185439
> 
> 赞同：3
> 
> 时间：2013-01-06T18:40:52.917
> 
> 标签：ruby-on-rails, ruby, nokogiri

参考页面：[http ://www.ncbi.nlm.nih.gov/pubmed/?term=NS044283[GR]&dispmax=200&report=xml](http://www.ncbi.nlm.nih.gov/pubmed/?term=NS044283%5bGR%5d&dispmax=200&report=xml)

XML 嵌入在`<pre>`返回的 HTML 页面的标记下。我可以提取`<pre>`标签的内容，但无法将其正确转换为 XML。我尝试使用`to_xml`NodeSet 类的方法，但似乎行尾 ( `\n`) 搞砸了解析。

这是我的代码片段：

```
url = "http://www.ncbi.nlm.nih.gov/pubmed/?term=NS044283[GR]&dispmax=200&report=xml"
doc = Nokogiri::XML(open(url))
pre = doc.xpath('//pre')
xml = pre.to_xml
contents = Nokogiri::XML(xml)
articles = contents.xpath('\\PubmedArticle')
(article = []) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T18:58:07.987

因为无论如何你都要使用 Nokogiri 来解析它，所以只需调用`content`而不是`to_xml`：

```
require 'nokogiri'
require 'open-uri'
url = "http://www.ncbi.nlm.nih.gov/pubmed/?term=NS044283[GR]&dispmax=200&report=xml"
doc = Nokogiri::XML(open(url))
pre = doc.xpath('//pre')
xml = "<root>" + pre.text + "</root>"
contents = Nokogiri::XML(xml)
articles = contents.css('PubmedArticle')
puts contents.css('ArticleTitle').map{|x| x.content}.count   
=> 25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:46:51.880

正在检索的文档不是有效的 XML 或 HTML。为创造它的人感到羞耻。

这是前 200 个字符，显示了他们的一些困惑：

```
require 'open-uri'
url = "http://www.ncbi.nlm.nih.gov/pubmed/?term=NS044283[GR]&dispmax=200&report=xml"
puts open(url).read[0..200] 
```

返回：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<pre>
&lt;PubmedArticle&gt;
    &lt;Medl 
```

幸运的是，或者，也许是坚定的，Nokogiri 通过对格式错误的 HTML 有点宽容来解决这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T18:56:59.687

嵌入的 XML 无效（HTML 转义）。尝试摆脱它

```
...
xml = CGI.unescapeHTML(pre.to_xml) # or CGI.unescapeHTML(pre.to_s)
... 
```

# java - AsyncTask 非常慢

> ID：14185440
> 
> 赞同：0
> 
> 时间：2013-01-06T18:41:00.500
> 
> 标签：java, android, garbage-collection, android-asynctask

我有一个非常简单的应用程序，主要威胁启动 2 个 AsyncTasks。2 个 AsyncTask 几乎相同，这是我的一个 AsyncTask 的代码：

```
private class waitPlayer extends AsyncTask<Integer, Integer, Void> {

        @Override
        protected Void doInBackground(Integer... params) {

            try {
                Thread.sleep(200);
            } catch (InterruptedException e) {
                       CreateLog.addToLog(e.toString);
            }

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // Update your layout here
            super.onPostExecute(result);
            setCanPlay(true, lastPlayerPlayed);
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {

             //progress_p1.setProgress((int) progress[0]);
             //progress_p2.setProgress((int) progress[0]);

        }
    } 
```

AsyncTask 唯一要做的就是等待 200 毫秒，然后在完成后调用一个方法。该方法将再次调用 AsyncTask。其他的 AsyncTask 也差不多，只是等待 3000ms，然后调用另一个方法。

问题是，在我添加第二个 AsyncTask 之后，我的应用程序变得非常慢。当 AsyncTasks 运行时，它会冻结几秒钟。我的 Logcat 说充满了垃圾收集器通知。

我的手机没有冻结，只有应用程序。我有大约 200mb 的空闲 RAM。

```
01-06 19:26:00.695: W/ActivityThread(25739): Application com.obattech.twoplayergame is waiting for the debugger on port 8100...
01-06 19:26:00.705: I/System.out(25739): Sending WAIT chunk
01-06 19:26:00.710: I/dalvikvm(25739): Debugger is active
01-06 19:26:00.905: I/System.out(25739): Debugger has connected
01-06 19:26:00.905: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:01.105: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:01.305: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:01.505: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:01.705: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:01.910: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:02.110: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:02.310: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:02.510: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:02.710: I/System.out(25739): waiting for debugger to settle...
01-06 19:26:02.910: I/System.out(25739): debugger has settled (1351)
01-06 19:26:03.095: D/libEGL(25739): loaded /system/lib/egl/libEGL_mali.so
01-06 19:26:03.095: D/libEGL(25739): loaded /system/lib/egl/libGLESv1_CM_mali.so
01-06 19:26:03.100: D/libEGL(25739): loaded /system/lib/egl/libGLESv2_mali.so
01-06 19:26:03.100: D/(25739): Device driver API match
01-06 19:26:03.100: D/(25739): Device driver API version: 10
01-06 19:26:03.100: D/(25739): User space API version: 10 
01-06 19:26:03.100: D/(25739): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
01-06 19:26:03.135: D/OpenGLRenderer(25739): Enabling debug mode 0
01-06 19:26:05.680: D/AbsListView(25739): Get MotionRecognitionManager
01-06 19:26:09.415: D/dalvikvm(25739): GC_CONCURRENT freed 92K, 5% free 12473K/13127K, paused 22ms+7ms, total 67ms
01-06 19:26:09.425: D/AbsListView(25739): [unregisterDoubleTapMotionListener]
01-06 19:26:09.425: I/MotionRecognitionManager(25739):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@42bfb580
01-06 19:26:12.515: D/dalvikvm(25739): GC_CONCURRENT freed 120K, 6% free 12813K/13575K, paused 3ms+2ms, total 21ms
01-06 19:26:12.515: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 14ms
01-06 19:26:13.665: D/dalvikvm(25739): GC_FOR_ALLOC freed 183K, 7% free 13024K/13895K, paused 17ms, total 18ms
01-06 19:26:15.205: D/dalvikvm(25739): GC_CONCURRENT freed 535K, 9% free 12937K/14151K, paused 2ms+3ms, total 19ms
01-06 19:26:15.205: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 16ms
01-06 19:26:17.095: D/dalvikvm(25739): GC_CONCURRENT freed 536K, 9% free 12904K/14151K, paused 4ms+2ms, total 25ms
01-06 19:26:17.095: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 7ms
01-06 19:26:17.160: D/dalvikvm(25739): GC_CONCURRENT freed 445K, 9% free 12893K/14151K, paused 12ms+12ms, total 35ms
01-06 19:26:19.765: D/dalvikvm(25739): GC_CONCURRENT freed 196K, 7% free 13201K/14151K, paused 5ms+5ms, total 36ms
01-06 19:26:19.765: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 13ms
01-06 19:26:23.260: D/dalvikvm(25739): GC_FOR_ALLOC freed 524K, 9% free 13025K/14279K, paused 18ms, total 18ms
01-06 19:26:26.350: D/dalvikvm(25739): GC_CONCURRENT freed 536K, 10% free 12992K/14279K, paused 3ms+2ms, total 22ms
01-06 19:26:26.350: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 5ms
01-06 19:26:28.290: D/dalvikvm(25739): GC_CONCURRENT freed 548K, 10% free 12948K/14279K, paused 6ms+2ms, total 26ms
01-06 19:26:28.290: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 8ms
01-06 19:26:29.445: D/dalvikvm(25739): GC_CONCURRENT freed 548K, 10% free 12904K/14279K, paused 7ms+2ms, total 30ms
01-06 19:26:29.445: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 7ms
01-06 19:26:29.510: D/dalvikvm(25739): GC_CONCURRENT freed 137K, 8% free 13201K/14279K, paused 3ms+13ms, total 36ms
01-06 19:26:32.065: D/dalvikvm(25739): GC_FOR_ALLOC freed 480K, 9% free 13068K/14279K, paused 17ms, total 17ms
01-06 19:26:36.005: D/dalvikvm(25739): GC_CONCURRENT freed 536K, 9% free 13036K/14279K, paused 14ms+4ms, total 49ms
01-06 19:26:36.005: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 12ms
01-06 19:26:38.665: D/dalvikvm(25739): GC_CONCURRENT freed 547K, 10% free 12992K/14279K, paused 15ms+4ms, total 48ms
01-06 19:26:38.665: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 15ms
01-06 19:26:40.605: D/dalvikvm(25739): GC_CONCURRENT freed 548K, 10% free 12948K/14279K, paused 13ms+2ms, total 32ms
01-06 19:26:40.605: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 6ms
01-06 19:26:43.160: D/dalvikvm(25739): GC_CONCURRENT freed 548K, 10% free 12904K/14279K, paused 13ms+2ms, total 34ms
01-06 19:26:43.160: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 4ms
01-06 19:26:43.225: D/dalvikvm(25739): GC_CONCURRENT freed 533K, 11% free 12805K/14279K, paused 2ms+13ms, total 32ms
01-06 19:26:46.360: D/dalvikvm(25739): GC_CONCURRENT freed 108K, 8% free 13201K/14279K, paused 3ms+2ms, total 22ms
01-06 19:26:46.360: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 8ms
01-06 19:26:47.980: D/dalvikvm(25739): GC_CONCURRENT freed 524K, 9% free 13080K/14279K, paused 12ms+2ms, total 34ms
01-06 19:26:47.980: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 12ms
01-06 19:26:50.405: D/dalvikvm(25739): GC_CONCURRENT freed 547K, 9% free 13036K/14279K, paused 2ms+3ms, total 21ms
01-06 19:26:50.405: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 8ms
01-06 19:26:53.925: D/dalvikvm(25739): GC_CONCURRENT freed 548K, 10% free 12992K/14279K, paused 4ms+4ms, total 38ms
01-06 19:26:53.925: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 18ms
01-06 19:26:55.260: D/dalvikvm(25739): GC_CONCURRENT freed 548K, 10% free 12948K/14279K, paused 8ms+2ms, total 36ms
01-06 19:26:55.260: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 10ms
01-06 19:26:57.080: D/dalvikvm(25739): GC_CONCURRENT freed 548K, 10% free 12904K/14279K, paused 22ms+2ms, total 46ms
01-06 19:26:57.080: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 10ms
01-06 19:26:57.135: D/dalvikvm(25739): GC_CONCURRENT freed 489K, 11% free 12849K/14279K, paused 2ms+12ms, total 29ms
01-06 19:26:58.420: D/dalvikvm(25739): GC_CONCURRENT freed 152K, 8% free 13201K/14279K, paused 13ms+2ms, total 33ms
01-06 19:26:58.420: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 6ms
01-06 19:26:59.565: D/dalvikvm(25739): GC_FOR_ALLOC freed 524K, 9% free 13025K/14279K, paused 18ms, total 19ms
01-06 19:27:02.100: D/dalvikvm(25739): GC_CONCURRENT freed 536K, 10% free 12992K/14279K, paused 2ms+2ms, total 22ms
01-06 19:27:02.100: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 8ms
01-06 19:27:03.685: D/dalvikvm(25739): GC_CONCURRENT freed 547K, 10% free 12948K/14279K, paused 7ms+3ms, total 29ms
01-06 19:27:03.685: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 8ms
01-06 19:27:06.535: D/dalvikvm(25739): GC_CONCURRENT freed 548K, 10% free 12904K/14279K, paused 18ms+3ms, total 52ms
01-06 19:27:06.535: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 9ms
01-06 19:27:06.580: D/dalvikvm(25739): GC_CONCURRENT freed 489K, 11% free 12849K/14279K, paused 2ms+2ms, total 18ms
01-06 19:27:08.065: D/dalvikvm(25739): GC_CONCURRENT freed 152K, 8% free 13201K/14279K, paused 3ms+1ms, total 41ms
01-06 19:27:08.065: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 19ms
01-06 19:27:11.150: D/dalvikvm(25739): GC_FOR_ALLOC freed 526K, 9% free 13025K/14279K, paused 17ms, total 17ms
01-06 19:27:12.600: D/dalvikvm(25739): GC_CONCURRENT freed 545K, 10% free 12982K/14279K, paused 4ms+5ms, total 52ms
01-06 19:27:12.600: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 26ms
01-06 19:27:15.065: D/dalvikvm(25739): GC_CONCURRENT freed 550K, 10% free 12938K/14279K, paused 12ms+3ms, total 37ms
01-06 19:27:15.065: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 6ms
01-06 19:27:15.125: D/dalvikvm(25739): GC_CONCURRENT freed 521K, 11% free 12805K/14279K, paused 3ms+12ms, total 32ms
01-06 19:27:19.575: D/dalvikvm(25739): GC_CONCURRENT freed 110K, 8% free 13201K/14279K, paused 12ms+3ms, total 41ms
01-06 19:27:19.575: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 4ms
01-06 19:27:29.260: D/dalvikvm(25739): GC_FOR_ALLOC freed 534K, 9% free 13028K/14279K, paused 15ms, total 19ms
01-06 19:27:50.315: D/dalvikvm(25739): GC_CONCURRENT freed 546K, 10% free 12957K/14279K, paused 13ms+2ms, total 39ms
01-06 19:27:50.315: D/dalvikvm(25739): WAIT_FOR_CONCURRENT_GC blocked 9ms
01-06 19:27:55.140: D/dalvikvm(25739): GC_CONCURRENT freed 537K, 11% free 12803K/14279K, paused 17ms+3ms, total 36ms
01-06 19:28:05.150: W/jdwp(25739): Debugger is telling the VM to exit with code=1
01-06 19:28:05.150: I/dalvikvm(25739): GC lifetime allocation: 42530 bytes
01-06 19:28:05.510: D/libEGL(27466): loaded /system/lib/egl/libEGL_mali.so
01-06 19:28:05.520: D/libEGL(27466): loaded /system/lib/egl/libGLESv1_CM_mali.so
01-06 19:28:05.520: D/libEGL(27466): loaded /system/lib/egl/libGLESv2_mali.so
01-06 19:28:05.525: D/(27466): Device driver API match
01-06 19:28:05.525: D/(27466): Device driver API version: 10
01-06 19:28:05.525: D/(27466): User space API version: 10 
01-06 19:28:05.525: D/(27466): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
01-06 19:28:05.550: D/OpenGLRenderer(27466): Enabling debug mode 0
01-06 19:28:19.100: D/libEGL(27760): loaded /system/lib/egl/libEGL_mali.so
01-06 19:28:19.105: D/libEGL(27760): loaded /system/lib/egl/libGLESv1_CM_mali.so
01-06 19:28:19.110: D/libEGL(27760): loaded /system/lib/egl/libGLESv2_mali.so
01-06 19:28:19.110: D/(27760): Device driver API match
01-06 19:28:19.110: D/(27760): Device driver API version: 10
01-06 19:28:19.110: D/(27760): User space API version: 10 
01-06 19:28:19.110: D/(27760): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
01-06 19:28:19.165: D/OpenGLRenderer(27760): Enabling debug mode 0
01-06 19:28:48.755: D/AbsListView(27760): Get MotionRecognitionManager
01-06 19:28:50.325: D/dalvikvm(27760): GC_CONCURRENT freed 107K, 6% free 12461K/13191K, paused 3ms+13ms, total 31ms
01-06 19:28:50.330: D/AbsListView(27760): [unregisterDoubleTapMotionListener]
01-06 19:28:50.330: I/MotionRecognitionManager(27760):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@42bff9d8
01-06 19:28:55.810: D/dalvikvm(27760): GC_CONCURRENT freed 127K, 6% free 12813K/13575K, paused 3ms+3ms, total 22ms
01-06 19:28:55.810: D/dalvikvm(27760): WAIT_FOR_CONCURRENT_GC blocked 16ms
01-06 19:28:56.915: D/dalvikvm(27760): GC_FOR_ALLOC freed 181K, 7% free 13024K/13895K, paused 18ms, total 18ms
01-06 19:28:58.235: D/dalvikvm(27760): GC_CONCURRENT freed 537K, 9% free 12936K/14151K, paused 2ms+2ms, total 14ms
01-06 19:28:58.235: D/dalvikvm(27760): WAIT_FOR_CONCURRENT_GC blocked 10ms
01-06 19:28:59.130: D/dalvikvm(27760): GC_CONCURRENT freed 527K, 10% free 12793K/14151K, paused 2ms+2ms, total 13ms
01-06 19:29:00.920: D/dalvikvm(27760): GC_CONCURRENT freed 104K, 7% free 13200K/14151K, paused 3ms+3ms, total 31ms
01-06 19:29:00.920: D/dalvikvm(27760): WAIT_FOR_CONCURRENT_GC blocked 13ms
01-06 19:29:06.065: D/dalvikvm(27760): GC_CONCURRENT freed 536K, 9% free 13068K/14279K, paused 5ms+4ms, total 36ms
01-06 19:29:06.065: D/dalvikvm(27760): WAIT_FOR_CONCURRENT_GC blocked 30ms
01-06 19:29:16.625: D/dalvikvm(27760): GC_CONCURRENT freed 547K, 9% free 13027K/14279K, paused 14ms+4ms, total 50ms
01-06 19:29:16.625: D/dalvikvm(27760): WAIT_FOR_CONCURRENT_GC blocked 16ms
01-06 19:29:36.525: D/dalvikvm(27760): GC_CONCURRENT freed 540K, 10% free 12988K/14279K, paused 15ms+4ms, total 56ms
01-06 19:29:36.525: D/dalvikvm(27760): WAIT_FOR_CONCURRENT_GC blocked 21ms
01-06 19:30:06.085: W/IInputConnectionWrapper(27760): showStatusIcon on inactive InputConnection
01-06 19:30:13.920: D/dalvikvm(27760): GC_CONCURRENT freed 549K, 10% free 12926K/14279K, paused 20ms+8ms, total 100ms
01-06 19:30:13.920: D/dalvikvm(27760): WAIT_FOR_CONCURRENT_GC blocked 50ms
01-06 19:30:13.995: D/dalvikvm(27760): GC_CONCURRENT freed 137K, 8% free 13223K/14279K, paused 13ms+3ms, total 44ms 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T20:02:18.577

AsyncTask 有一个巨大的愚蠢。引用开发文档：

“首次引入时，AsyncTasks 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行以避免常见的应用程序并行执行导致的错误。

“如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。”

这意味着在 AsyncTask::doInBackground 中休眠将阻止所有其他 AsyncTask 运行，直到休眠完成。您很可能会阻止其他后台活动（可能是系统库活动）完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T20:09:40.510

如果您希望在不久的将来做某事，您可以使用[处理程序](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)或[计时器](http://developer.android.com/reference/java/util/Timer.html)。

例子 ：

这将在大约 2 秒内运行 runnable：

```
new Handler().postDelayed(new Runnable() {...} , 2000); 
```

asyncTask 仅用于小任务，您不关心它们何时完成的顺序，也不关心有多少线程正在处理它们。

例如，它们可用于从 Internet 下载小图像，如果在滚动速度过快的列表视图中使用它们，它们将被取消。

无论如何，我们需要看更多你的代码：什么是“setCanPlay”？对另一个 asyncTask 的调用在哪里？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-29T12:15:13.507

我发现问题出在 => AsyncTask 类使用串行通道在新版本的 android 上编译您的应用程序，例如 jellybean 版本 => 4.2

与 Eclair 版本 => 2.0 等旧版本不同，它使用并行通道来编译 AsyncTask 所以如果你像我所做的那样在旧版本上尝试你的应用程序，你会看到不同的 [你在这里看到的不同](https://i.stack.imgur.com/o4YFu.png)

如果你想解决这个问题，这将帮助你：-

调用[executeOnExecutor(java.util.concurrent.Executor, Object[])](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor(java.util.concurrent.Executor,%20Params...))

使用[THREAD_POOL_EXECUTOR。](http://developer.android.com/reference/android/os/AsyncTask.html#THREAD_POOL_EXECUTOR)"

# hadoop - 任何人从 cloudera 实施或使用 impala？

> ID：14185444
> 
> 赞同：-2
> 
> 时间：2013-01-06T18:41:10.660
> 
> 标签：hadoop, hbase, hive, cloudera

Hadoop 技术让我很困惑（Hbase、flume、oozie、scoop、zookeeper、Hive、hue、Bigtop、pig），现在它的 impala。有人可以定义它们的集成方式吗？（我是一名 informatica 开发人员，对 Java 知之甚少）至少在数据件外壳方面！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T16:45:01.887

最好尝试并了解每个项目分别是什么。大多数人不需要使用所有这些。

HDFS：分布式文件系统。它获取文件，将它们分成块，然后将它们分布在集群中。它复制这些块以实现冗余，并使数据靠近可能在作业中被分析的位置。它通常直接用于存储非结构化数据，如日志和文本。

MapReduce：用于运行并行程序的编程模型和软件工具集。“YARN”是一个较新的想法，它允许跨 Hadoop 集群执行其他程序，以及“MapReduce”的最新版本或在此“YARN”集群上运行的程序。这里有很多要解释的东西，你可能基本熟悉它，所以我会继续......

HBase：一种非关系型数据库，将其数据持久化到 HDFS，其结构类似于 Google 的 BigTable。它将数据存储在内存中，以提供近乎实时的查找和实时服务。它通常用于而不是直接将 HDFS 用于结构化数据，例如网站的用户。

Flume：一种用于管理数据（例如日志）的工具，因为它不断地输入 HDFS。

Oozie：一种从 MapReduce 作业序列中构建更复杂作业的工具。

Sqoop：用于在 HDFS 和关系数据库之间导入/导出数据的工具。它通过将要执行的作业编译成 MapReduce 作业来实现这一点。

Zookeeper：一个“集群协调服务”。我认为这是一个分层文件系统（用于相对较小的数据块），可让您构建集群范围的互斥锁、获取更改通知等。这可能很难解释，但它基本上为您提供了一组操作可以用来在集群中构建相当复杂的协调机制。HBase 为此目的使用 Zookeeper。

Hive：一种将类似 SQL 的查询转换为 MapReduce 作业的工具。（Pig 是一个类似的想法——它是一种编译成 MapReduce 作业的编程语言）。

Hue：“Hue 用户体验”——它是一个基于浏览器的 UI，用于使用 Hue 等 Hadoop 工具。它也是由 Cloudera 制作的，但与 Cloudera Manager 等旨在管理集群而不是使用服务本身的工具不同。

Bigtop：以各种方式打包 hadoop 生态系统的许多组件和类似工具（例如，用于 Linux 的 DEB 和 RPM、用于部署 Hadoop 的 Puppet 代码，甚至是 Live CD）。它实际上是为了开始简化和标准化您所指的“集成”。

Pig：与 Hive 类似的想法 - 一种编译成 MapReduce 作业的编程语言。

Impala：使用类似 SQL 的查询来探索 Hadoop 中的数据的工具。作为支持比 Hive 更简单的查询语言并且不使用 MapReduce（用于大型批处理作业）的交换，它应该使查询足够快以交互地探索大型数据集。

# wpf - 发布 WPF 应用程序时如何包含外部文件？

> ID：14185446
> 
> 赞同：0
> 
> 时间：2013-01-06T18:41:20.067
> 
> 标签：wpf, windows, visual-studio-2012, textblock

我正在尝试包含 .txt 文件，以便我可以从中填充`TextBlock`控件。我宁愿不要让大量的 Xaml 占用额外的文本。

我找到了一个解决方案，方法是使用 C# 在磁盘上查找文本文件并设置`TextBlock`s 的 Text 属性。但是当我去发布应用程序时，我认为没有包含文本文件。在应用程序属性的发布选项卡上，文本文件没有显示在那里，所以我无法选择它们来包含。我是否必须将这些文件放在特定位置才能找到？

我试图从属性设置的资源选项卡上的文本文件创建资源，但无法弄清楚如何从 C# 中访问这些资源。

对此有最佳实践解决方案吗？看起来应该很容易。我可能只需要在线托管文本文件并从一致的位置读取它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:50:51.563

如果您想将 txt 文件与您的项目一起部署，您可以做的是将该 txt 文件包含到项目中，然后在该文件上单击鼠标右键单击属性，然后在属性中指定`"Copy to Output Directory"`to`"Copy Always"`或`"Copy if Newer"`。

# python - python脚本中脚本头的过早结束

> ID：14185448
> 
> 赞同：0
> 
> 时间：2013-01-06T18:41:31.143
> 
> 标签：python, cgi, cgi-bin

我刚刚用 Python 编写完一个简单的战舰游戏。在终端中，它运行完美，但是当我尝试将它作为 cgi-bin 脚本在线运行时，出现了问题。我的代码是：

```
#!/usr/bin/python

print "Content-type: text/html\n\n"
print "<html>"

from random import randint

board = []

for x in range(0,5):
  board.append(["O"] * 5)

def print_board(board):
  for row in board:
    print " ".join(row)

print_board(board)

def random_row(board):
  return random.randint(0,len(board)-1)

def random_col(board):
  return random.randint(0,len(board[0])-1)

ship_row = random_row(board)
ship_col = random_col(board)
guess_row = raw_input("Guess Row:")
guess_col = raw_input("Guess Col:")

print ship_row
print ship_col

if (guess_row == ship_row and guess_col == ship_col):
print "Congratulations! You sank my battleship!<br/>"
else:
if board[guess_row][guess_col] == "X":
print "You guessed that one already.<br/>"
if not (0 <= guess_row < len(board)) or not (0 <= guess_col < len(board)):
print "Oops, that’s not even in the ocean.<br/>"
else:
print "You missed my battleship!<br/>"
board[guess_row][guess_col] == "X"
print_board(board)

print "</html>" 
```

我应该提一下，其他简单的 hello-world 脚本在网页中运行良好。错误日志根据以下内容返回这些行：

```
[Sun Jan 06 20:34:26 2013] [error] [client xxx]   File "
[Sun Jan 06 20:34:26 2013] [error] [client xxx] /usr/lib/cgi-bin/game.py
[Sun Jan 06 20:34:26 2013] [error] [client xxx] ", line
[Sun Jan 06 20:34:26 2013] [error] [client xxx] 34
[Sun Jan 06 20:34:26 2013] [error] [client xxx]
[Sun Jan 06 20:34:26 2013] [error] [client xxx]
[Sun Jan 06 20:34:26 2013] [error] [client xxx] print "Congratulations! You sank my battleship!<br/>"
[Sun Jan 06 20:34:26 2013] [error] [client xxx]
[Sun Jan 06 20:34:26 2013] [error] [client xxx]
[Sun Jan 06 20:34:26 2013] [error] [client xxx]
[Sun Jan 06 20:34:26 2013] [error] [client xxx]
[Sun Jan 06 20:34:26 2013] [error] [client xxx]
[Sun Jan 06 20:34:26 2013] [error] [client xxx] ^
[Sun Jan 06 20:34:26 2013] [error] [client xxx] IndentationError
[Sun Jan 06 20:34:26 2013] [error] [client xxx] :
[Sun Jan 06 20:34:26 2013] [error] [client xxx] expected an indented block
[Sun Jan 06 20:34:26 2013] [error] [client xxx]
[Sun Jan 06 20:34:26 2013] [error] [client xxx] Premature end of script headers: game.py 
```

你能帮我解决这个问题吗？

提前致谢！

ps：我是python新手：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:44:41.793

尝试这个：

```
#!/usr/bin/python

print "Content-type: text/html\n\n"
print "<html>"

from random import randint

board = []

for x in range(0,5):
    board.append(["O"] * 5)

def print_board(board):
    for row in board:
        print " ".join(row)

print_board(board)

def random_row(board):
    return random.randint(0,len(board)-1)

def random_col(board):
    return random.randint(0,len(board[0])-1)

ship_row = random_row(board)
ship_col = random_col(board)
guess_row = raw_input("Guess Row:")
guess_col = raw_input("Guess Col:")

print ship_row
print ship_col

if (guess_row == ship_row and guess_col == ship_col):
    print "Congratulations! You sank my battleship!<br/>"
elif board[guess_row][guess_col] == "X":
    print "You guessed that one already.<br/>"
if not (0 <= guess_row < len(board)) or not (0 <= guess_col < len(board)):
    print "Oops, that’s not even in the ocean.<br/>"
else:
    print "You missed my battleship!<br/>"
board[guess_row][guess_col] == "X"
print_board(board)

print "</html>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T10:05:28.920

帖子有点旧，但万一其他人正在寻找：

尝试运行它（从您的浏览器），看看它是否有效：

```
#!/usr/bin/python
import cgi
cgi.test() 
```

如果这没有给出错误，请尝试删除文件，创建一个新文件并将代码复制/粘贴回去。

我刚刚解决了我的问题。

# android - 安卓简单布局

> ID：14185449
> 
> 赞同：0
> 
> 时间：2013-01-06T18:41:34.587
> 
> 标签：android, android-layout, layout

我想让 2 个按钮占据屏幕宽度的一半，但是我真的只有一个按钮进入屏幕并占据整个屏幕宽度。我希望它适用于所有分辨率，所以不想固定宽度。一个按钮会占用左半边，另一个会占用右半边 它怎么做

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:gravity="center">

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Button"
            android:layout_gravity="left" />

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Button" 
            android:layout_gravity="right" />

    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:48:05.663

您可以定义`layout_weight`来定义视图的大小。如果与权重设置一起使用（根据 lint），使用`layout_width`to be是最好的方法。`0dp`当两个按钮的值相同时，都使用 50% 的宽度。玩弄这些价值观来感受一下。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Button"
        android:layout_weight="1"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Button" 
        android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:48:36.850

使用以下布局技术。使用`Linear Layout`. 将`layout_width`您的按钮分配给`0dip`. 分配`layout_weight`给`1`每个按钮，使它们占据**的总宽度相等**。将`layout_height`每个按钮分配为`match_parent`

```
 <LinearLayout 
        android:id="@+id/LinearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal">

        <Button
            android:id="@+id/ButtonLeft"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="ButtonLeft"
            />
        <Button
            android:id="@+id/ButtonRight"
            android:layout_width="0dip"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="ButtonRight"
            />

    </LinearLayout> 
```

**PS：**如果您希望它们占据半屏高度而不是宽度，请更改`orientation`布局并在上述 XML`vertical`之间交换值。`layout_width``layout_height`

**关于 layout_weight**

`layout_weight`决定父元素空间如何在其子元素之间划分。如果您想在按钮之间按 1:4 划分宽度，则将`layout_weight`1 个按钮分配给“1”，将另一个按钮分配给“3”--> 1/(1+3) = 1/4，如您所愿。再次，什么空间可以`layout_weight`工作 - 高度或宽度？`layout_weight`从空闲或未使用的空间进行分配。在上面的布局中，我们分配`0dip`了按钮的宽度。因此，父级的水平空间或宽度未使用或空闲，并且根据`layout_weight`. 希望这可以帮助。

# jquery - Fancybox 2 标题悬停在画廊更改上

> ID：14185451
> 
> 赞同：0
> 
> 时间：2013-01-06T18:41:44.873
> 
> 标签：jquery, fancybox, mouseover, fancybox-2

第一次发帖，提前致歉。

我正在使用这个 [How to display fancybox title only on image hover](https://stackoverflow.com/questions/9123886/how-to-display-fancybox-title-only-on-image-hover) and it works,除了当你点击上一个/下一个并且光标已经悬停时，标题不会出现 - 你必须将鼠标悬停并再次返回.

如果您在图像加载时已经悬停，知道如何使标题出现吗？

这里的例子 [http://www.richardbarry.co.uk/fancyhover.php](http://www.richardbarry.co.uk/fancyhover.php)

它在fancybox 1中工作，就像这样-http [: //www.richardbarry.co.uk/gallery.php](http://www.richardbarry.co.uk/gallery.php)

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:08:59.617

作为一种解决方法，您可以尝试添加一个函数来检测鼠标是否已经悬停在[这个帖子](https://stackoverflow.com/a/1857388/1055987)中的 fancybox 内容...。如果是，则显示 fancybox 标题。

```
$(".fancybox").fancybox({
  helpers: {
    title: {
      type: 'over'
    }
  },
  afterShow: function () {
    $(".fancybox-title").hide();
    // shows/hides title on hover
    $(".fancybox-wrap").hover(function () {
      $(".fancybox-title").stop(true, true).slideDown(200);
    }, function () {
      $(".fancybox-title").stop(true, true).slideUp(200);
    });
    // detects if mouse is already hovering
    $(".fancybox-outer a, .fancybox-outer img").hover(function () {
      $(this).data('timeout', setTimeout(function () {
        $(".fancybox-title").stop(true, true).slideDown(200);
      }, 100));
    }, function () {
      clearTimeout($(this).data('timeout'));
    });
  }
}); 
```

请参阅**[JSFIDDLE](http://jsfiddle.net/KTdDk/)** ...它似乎在 IE7+ 和 FF 中运行良好

# java - 使用 Oauth2.0 / OpenId Hybrid 对 Android 应用和 Web 应用（后端服务器）进行身份验证

> ID：14185452
> 
> 赞同：3
> 
> 时间：2013-01-06T18:41:50.327
> 
> 标签：java, android, oauth, openid

首先请善待，因为我仍在尝试掌握整个 OpenId/Oauth2.0。

我最近参加了在比利时举行的 Devoxx 2012 会议。Tim Bray[展示](https://oauth2-pres.appspot.com/#68)了使用 Oauth2.0 和 OpenId 的混合方法的能力（我相信它被称为 OpenId Connect）。这是描述它的[幻灯片。](https://oauth2-pres.appspot.com/#68)如果我理解正确，他说 Android 应用程序可以进行身份​​验证（接收令牌）然后为服务器端 Web 应用程序请求令牌。然后，这将允许服务器端接收服务器令牌并检查令牌是否真正有效。验证这确实是来自 Android 应用程序的经过身份验证的用户。完成此操作后，服务器端 Web 应用程序可以安全地与 Android 应用程序交互。

我已经能够使用 Android 应用程序的 com.google.android.gms.auth.GoogleAuthUtil.getToken 进行身份验证。

我在 Google API 控制台 (https://code.google.com/apis/console/) 的 API 访问下创建了一个“已安装应用程序的客户端 ID”。我还在同一个控制台下创建了一个 Web 应用程序，但是当我按照幻灯片进行操作时，我无法获取应该发送到 Web 应用程序的令牌（通过 https）。我确信我只是错过了一个简单的步骤，或者只是不完全理解它，但我将非常感谢任何帮助。

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:01:21.067

在幻灯片中，范围必须是“audience:server:XXX”。但是在[他的博客文章](http://android-developers.blogspot.de/2013/01/verifying-back-end-calls-from-android.html)中，Tim Bray 说范围是“audience:server: **client_id** :XXX”试试这个。

另外，我的错误是在同一个控制台中创建了 2 个客户端 ID，但不在同一个项目中。确保你做对了。

# c# - 滚动列表框时防止选择

> ID：14185453
> 
> 赞同：1
> 
> 时间：2013-01-06T18:41:53.477
> 
> 标签：c#, wpf, listbox, touch, wpf-4.5

我有一个将鼠标事件转换为触摸事件的应用程序，因此我可以使用惯性滚动和其他触摸功能。该代码在此处的选定答案中：

[WPF：是否有可能将普通鼠标事件“路由”到 Windows 7 中的触摸事件](https://stackoverflow.com/questions/3352529/wpf-is-there-a-possibility-to-route-ordinary-mouse-events-to-touch-events-in)

我遇到的问题`ListBox`是当我轻弹滚动时，它会选择项目。`ListBox`通常，触摸设备在滚动时不会选择项目。我在这里想念什么？

这是我正在使用的 xaml：

```
<Window x:Class="ScrollingTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="600" Width="525">
    <Grid>
        <ListBox x:Name="testListBox"               
                 VirtualizingPanel.ScrollUnit="Pixel" 
                 SelectionMode="Single">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border CornerRadius="3" Height="60" Width="480" Background="LightGray" Margin="1">
                        <Label Content="{Binding}"/>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>               
        </ListBox>
    </Grid>
</Window> 
```

后面的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        MouseTouchDevice.RegisterEvents(this);

        for (int i = 0; i < 300; i++)
        {
            testListBox.Items.Add("test " + i.ToString());
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:25:17.733

我发现这样做的唯一方法是使用 a`DataTrigger`将`ListBoxItem` `Focusable`属性设置为 false。在我的情况下`IsScrolling`，当用户轻弹滚动时，我将属性设置为 false 并在 kenitic 运动停止时返回，这会在轻弹列表时停止选择行为

此解决方案可能不适用于您的场景，但这是一个可行的示例，因为您可能能够适应为您工作。

xml:

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <ListBox Margin="0,32,0,0" ItemsSource="{Binding List}" ScrollViewer.ScrollChanged="List_ScrollChanged">
            <ListBox.ItemContainerStyle>
                <Style TargetType="{x:Type ListBoxItem}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsScrolling, ElementName=UI}" Value="True">
                            <Setter Property="IsHitTestVisible" Value="False"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Button Content="{Binding}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{

    private ObservableCollection<string> myVar = new ObservableCollection<string>();
    private DateTime _lastScroll;

    public MainWindow()
    {
        InitializeComponent();
        MouseTouchDevice.RegisterEvents(this);
        for (int i = 0; i < 1000; i++)
        {
            List.Add("StackOverflow " + i);
        }
    }

    public ObservableCollection<string> List
    {
        get { return myVar; }
        set { myVar = value; }
    }

    public bool IsScrolling
    {
        get { return !(DateTime.Now > _lastScroll.AddMilliseconds(100)); }
    }

    private void List_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        _lastScroll = DateTime.Now;
        ThreadPool.QueueUserWorkItem((o) =>
        {
            Thread.Sleep(100);
            NotifyPropertyChanged("IsScrolling");
        });
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T03:03:30.910

我认为这可以使用 Adorners 来实现。

MSDN 示例 [http://msdn.microsoft.com/en-us/library/ms771585(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms771585(VS.85).aspx)

装饰物非常简单；它可以在这里很好地使用。请参考以下链接，如果不喜欢叠加层，您可以将装饰层背景设置为透明。

[http://www.codeproject.com/Articles/57984/WPF-Loading-Wait-Adorner](http://www.codeproject.com/Articles/57984/WPF-Loading-Wait-Adorner)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-11T08:49:58.400

我知道这是一个老问题，但我有一个确认的解决方案。设置该`ScrollViewer.PanningMode`属性可以启用触摸滚动，从而防止在`MouseUp`. 例如，只需设置`PanningMode="VerticalOnly"`一个简单的滚动场景，你应该一切都好。

希望我帮助了某人

# css - css 子类 - div 不匹配 css 规则

> ID：14185456
> 
> 赞同：2
> 
> 时间：2013-01-06T18:42:16.740
> 
> 标签：css, html, subclass

出于某种原因，我的子类不适用于 DIV 元素？

CSS 规则匹配像 span + a 这样的内联标签，但不会匹配 div。

请看下面的例子：

```
<style>

.row {
    display: block;
}

.row .lbl {
    float: left;
    width: 200px;
    text-align: right;
    font-weight: bold;
    background-color: blue;
}

.row .inpt {
    float: left;
    width: 200px;
    text-align: right;
    font-weight: bold;
    background-color: red;
}

</style> 
```

作品！！！

```
<p class="row">

    <span class="lbl">Title</span>
    <span class="inpt">Data</span> 

</p> 
```

不工作！！！

```
<p class="row">

    <div class="lbl">Title</div>
    <div class="inpt">Data</div> 

</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:48:50.350

对于 P 元素，w3.org 指定如下，表示 P 元素只允许包含内联元素。

```
<!ELEMENT P - O (%inline;)*            -- paragraph --> 
```

这与[http://www.w3.org/TR/html401/struct/text.html#h-9.3.1](http://www.w3.org/TR/html401/struct/text.html#h-9.3.1)一致，即 P 元素“不能包含块级元素（包括 P 本身）”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:47:32.833

我相信，因为你`div`是一个孩子`p`。如果您将其更改`p`为 a `div`，它将再次起作用。

# android - Android - 我如何在我认为我安装的 Nook 模拟器中运行我的应用程序

> ID：14185461
> 
> 赞同：0
> 
> 时间：2013-01-06T18:42:42.330
> 
> 标签：android, nook, nook-tablet

我刚刚完成了从我的 sdk 管理器安装 NOOK 包的步骤。

但是使用 nook 模拟器实际运行应用程序的步骤是什么？

我将按照这些说明进行操作，但它们有点令人困惑： [https ://nookdeveloper.zendesk.com/entries/21943338-nook-developer-start-up-guide#_SpecifyURL](https://nookdeveloper.zendesk.com/entries/21943338-nook-developer-start-up-guide#_SpecifyURL)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:55:54.003

如果已安装，您能否仅从 Android 虚拟设备管理器（在 Eclipse 中，位于`Window`>下`Android Virtual Device Manager`）运行它，使用新按钮创建 Nook 表的实例。

[这些说明](https://nookdeveloper.zendesk.com/entries/21846516-quick-start-for-android-developers#_Using_Emulator)似乎更容易遵循，请参阅第 3.1-2 节。有趣的是，它被称为“快速入门”。

[第 3.3.3 节](https://nookdeveloper.zendesk.com/entries/21846516-quick-start-for-android-developers#_Eclipse_Starts_Emulator)专门处理通过 Eclipse 运行。

一般模拟器使用（假设 Eclipse）：一旦模拟器被创建并启动，让它完全启动，然后将您的应用程序作为 Android 应用程序运行，选择正在运行的模拟器作为目标。

如果不使用 Eclipse，则`adb install <file.apk>`如果只有一个正在运行/连接，则通过命令行将安装到当前连接的设备或模拟器。

# ruby-on-rails - 如何将 Git 子目录推送到 heroku？

> ID：14185462
> 
> 赞同：4
> 
> 时间：2013-01-06T18:42:50.597
> 
> 标签：ruby-on-rails, ruby, git, heroku, github

在 github 上，我在目录的子目录中有一个 Rails 应用程序，`github.com/sadaf2605/directory/subdirectory/{rails app}`. 当我尝试将此应用程序推送到 Heroku 时，出现错误：

```
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:damp-woodland-7566.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:damp-woodland-7566.git' 
```

在阅读“ [Heroku push denied, no Cedar-supported app detected wordpress](https://stackoverflow.com/questions/13695219/heroku-push-rejected-no-cedar-supported-app-detected-wordpress) ”后，我了解到这个子目录导致了问题。但是，我希望这个子目录保留在 github 上，因为它可以帮助我组织我的工作，但我不想更改 route.rb。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T18:34:35.667

签出[git-subtree](https://github.com/apenwarr/git-subtree)插件。您可以使用它将子树从您的项目拆分为子项目并返回。

`git subtree push --prefix {rails app} heroku master`

克隆 github 项目并运行`sudo sh install.sh`以安装插件。完整的使用说明在[这里](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt)

# php - 使用 PHP/PDO 和 MySQL 更新记录

> ID：14185464
> 
> 赞同：-2
> 
> 时间：2013-01-06T18:43:08.250
> 
> 标签：php, mysql, pdo

我试图更新我表中的记录但是我收到以下错误...

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(`First_Name`,`Surname`,`Nicknames`' at line 1Number of rows added: Go back 
```

我的代码如下......

```
// Connection data (server_address, database, name, poassword)
$hostdb = 'localhost';
$namedb = '_co_';
$userdb = '';
$passdb = '';

try {
  // Connect and create the PDO object
 $conn = new PDO("mysql:host=$hostdb; dbname=$namedb", $userdb, $passdb);
$conn->exec("SET CHARACTER SET utf8");      // Sets encoding UTF-8
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

 $sql = "UPDATE `directory` (`First_Name`,`Surname`,`Nicknames`) 
      VALUES (:firstname, :surname, :nicknames)
      WHERE ID = :cid

      ;

      ";

 $statement = $conn->prepare($sql);
 $statement->bindValue(":cid", $cid);
 $statement->bindValue(":firstname", $firstname);
 $statement->bindValue(":surname", $surname);
 $statement->bindValue(":nicknames", $nicknames); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:45:15.897

您的 SQL 语法错误：

```
UPDATE `directory`
SET `First_Name` = :firstname, `Surname` = :surname, `Nicknames` = :nicknames
WHERE ID = :cid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:45:25.453

这不是`UPDATE`查询的工作方式：

```
UPDATE `directory` SET `First_Name` = :firstname, `Surname` = :surname, `Nicknames` = :nicknames WHERE ID = :cid 
```

我建议你研究一下 sql 的一般工作原理，因为仅仅猜测不会让你走得太远。您尝试使用的语法是用于`INSERT`语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T18:45:37.507

SQL 更新的语法与插入的语法不同

```
UPDATE `directory` 
   SET `First_Name` = :firstname,
       `Surname` = :surname,
       `Nicknames` = :nicknames
 WHERE `ID` = :cid 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T18:45:48.870

您的更新声明是错误的。它应该是：

```
 update directory set firstname=:firstname, surname=:surname, ...; 
```

# c# - 在 Oxyplot 中调整矩形的大小

> ID：14185467
> 
> 赞同：0
> 
> 时间：2013-01-06T18:43:18.603
> 
> 标签：c#, wpf, canvas, charts, plot

我正在使用[OxyPlot](http://oxyplot.codeplex.com/)绘制一些数据。我想与绘制的项目进行一些鼠标交互。

我想重新调整`RectangleBarSeries`. 像[这样](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)的东西。

我无法弄清楚继续进行的方法。

我创建了一个[示例应用程序](http://www.speedyshare.com/3cJzQ/OxyResizeTesting.zip)，该应用程序可以拖放矩形我想在单击矩形项目的中心时移动元素（如当前所做的那样）。并希望通过单击代码项目链接中讨论的角来重新调整大小。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T11:43:42.330

我已经实现了这样的[相同](http://www.2shared.com/file/PMqHDC8g/OxyResizeTesting.html)。

# java - Android 自定义按钮字体

> ID：14185468
> 
> 赞同：0
> 
> 时间：2013-01-06T18:43:21.357
> 
> 标签：java, android, button, fonts

```
<Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:onClick="alertBtn1"
        android:text="Hello" 
        android:textSize="22sp" 
```

以上是xml中按钮的代码，我是assets文件夹中“fonts”文件夹中的自定义字体。如何更改按钮的字体以匹配我拥有的自定义字体？

这是按钮的作用：

```
public void onClick(View v){}

public void alertBtn(View v){

    new AlertDialog.Builder(this)
    .setTitle("Button 1")
    .setMessage("Hello")
    .setNeutralButton("Go Back", null)
    .show();
} 
```

我尝试使用

```
Button txt = (Button) findViewById(R.id.custom_font);  
Typeface font = Typeface.createFromAsset(getAssets(), "custom_font.ttf");  
txt.setTypeface(font); 
```

但它说`R.id.custom_font);`无法解析或不是字段，并且字体中存在语法错误`txt.setTypeface(font);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:44:50.623

`Button txt = (Button) findViewById(R.id.custom_font);`

应该

`Button txt = (Button) findViewById(R.id.button1);`

或者 `android:id="@+id/button1"`

应该

`android:id="@+id/custom_font"`

这将解决您无法解决的错误，但我在 setTypeface 行中看不到语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:46:55.957

改变

```
Button txt = (Button) findViewById(R.id.custom_font); 
```

至

```
Button txt = (Button) findViewById(R.id.button1); 
```

并且 因为您`android:onClick="alertBtn1"`在 Button xml`android:onClick="alertBtn"`中设置`alertBtn1`，并且在代码部分中您有`alertBtn`名称的方法

# php - vbulletin 4 搜索不起作用

> ID：14185470
> 
> 赞同：0
> 
> 时间：2013-01-06T18:43:37.760
> 
> 标签：php, mysql, vbulletin

我们最近升级到 PHP 5.3（从 5.2）和 MySQL 5.1（从 5.0）并在 vbulletin 4 论坛上进行了数据库恢复。在这些搜索完全停止工作之后。

无论您搜索什么，最终都`/forum/search.php?searchid=-2139739119`没有结果。?do=getnew、?query=your+keyword、高级搜索等这些都不起作用。所有加载该 url 时使用否定的 searchid 并说“抱歉 - 没有匹配项。请尝试一些不同的术语。”

我们尝试过：通过命令行重建搜索索引、禁用插件系统、清除缓存后等。这些都不起作用。

这个问题的原因可能是什么？

非常感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:35:29.333

1\. 请检查是否安装了 Zend Guard。很多时候它会导致 vBulletin 搜索出现问题。如果已安装，请尝试将其删除。在您的 php.ini 文件中，将此扩展名注释为注释，就像这样：

```
 ;[Zend]

 ;zend_extension="/usr/local/Zend/lib/Guard-5.5.0/php-5.3.x/ZendGuardLoader.so" 
```

2\. 如果还是不能解决问题，请尝试重新编译 PHP。

# forms - 表单验证 - 只需要填写一个字段

> ID：14185471
> 
> 赞同：1
> 
> 时间：2013-01-06T18:43:38.863
> 
> 标签：forms, validation, symfony

我有以下表单类：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
        $builder
            ->add('existingfolder', 'entity', array(
                'class'     => 'ImageBundle:Folder',
                'required'  => false,
            ))
            ->add('folder', 'text', array('required' => false))
            ->add('file', 'file');
} 
```

如何设置验证以便必须填写`existingfolder`or字段（但不能同时填写）？`folder`

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T08:28:43.777

使用[True](http://symfony.com/doc/current/reference/constraints/True.html)或[Callback](http://symfony.com/doc/current/reference/constraints/Callback.html)验证断言，这里有一个示例来检查用户是否必须提供至少一个文件夹：

```
<?php
namespace Acme\BlogBundle\Entity;

use Symfony\Component\Validator\Constraints as Assert;

class Image
{
    // ...properties, functions, etc...

    /**
     * @Assert\True(message = "You must give at least an existing folder or a new folder")
     */
    public function isThereOneFieldFilled()
    {
        return ($this->existingfolder || $this->folder); // If false, display an error !
    }
} 
```

这是另一个示例，如果用户必须只提供一个字段而不是两个字段：

```
 /**
     * @Assert\True(message = "You must give an existing folder or a new folder, not both")
     */
    public function isThereOnlyOneFieldFilled()
    {
        return (!$this->existingfolder && $this->folder || $this->existingfolder && !$this->folder);
    } 
```

**编辑：**

[表单内的回调验证（我在这里](http://www.richsage.co.uk/2011/07/20/adding-non-entity-fields-to-your-symfony2-forms/)找到了一个示例）：

```
// use ...
use Symfony\Component\Form\CallbackValidator;
use Symfony\Component\Form\FormError;
use Symfony\Component\Form\FormInterface;

// Inside the form:

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('existingfolder', 'entity', array(
            'class'     => 'ImageBundle:Folder',
            'required'  => false,
        ))
        ->add('folder', 'text', array('required' => false))
        ->add('file', 'file');

    // Use the CallbackValidator like a TrueValidator behavior
    $builder->addValidator(new CallbackValidator(function(FormInterface $form) {
        if (!$form["existingfolder"]->getData() && !$form["folder"]->getData()) {
            $form->addError(new FormError('You must give at least an existing folder or a new folder'));
        }
    }));
} 
```

# objective-c - 使用 For 循环时文档未上传到 iCloud - iOS

> ID：14185473
> 
> 赞同：6
> 
> 时间：2013-01-06T18:44:02.690
> 
> 标签：objective-c, ios, for-loop, icloud

我正在尝试将一个充满文档的本地文件夹上传到远程 iCloud 文件夹。我编写了这个方法来遍历本地文件夹中的文件数组，检查它们是否已经存在，如果它们不存在，则将它们上传到 iCloud。注意 - 此代码在后台线程而不是主线程上执行。

```
//Get the array of files in the local documents directory
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSArray *localDocuments = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:nil];

//Compare the arrays then upload documents not already existent in iCloud
for (int item = 0; item < [localDocuments count]; item++) {
    //If the file does not exist in iCloud, upload it
     if (![[iCloud previousQueryResults] containsObject:[localDocuments objectAtIndex:item]]) {
          NSLog(@"Uploading %@ to iCloud...", [localDocuments objectAtIndex:item]);
          //Move the file to iCloud
          NSURL *destinationURL = [[[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil] URLByAppendingPathComponent:[NSString stringWithFormat:@"Documents/%@",[localDocuments objectAtIndex:item]]];
          NSError *error;
          NSURL *directoryURL = [[NSURL alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:[localDocuments objectAtIndex:item]]];
          BOOL success = [[NSFileManager defaultManager] setUbiquitous:YES itemAtURL:directoryURL destinationURL:destinationURL error:&error];
          if (success == NO) {
              //Determine Error
              NSLog(@"%@",error);
          }
     } else {
          ...
     } } 
```

当我运行此代码时，For Loop 工作正常——我使用 NSLog 语句来找出它正在*上传*的文件——并且本地存储但尚未在 iCloud 中的每个文件都应该开始上传。[For Loop 完成后，我使用developer.icloud.com](http://developer.icloud.com)检查哪些文档现在在 iCloud 中。在本地存储的许多上传到 iCloud 的文件中，只有一个文件（我的应用程序不断制作但从未使用过的 sqlite 文件）。**为什么使用 for 循环时只上传一个文件？**

当我使用相同的代码上传单个文件（没有 For 循环）时，它们会完美地上传到 iCloud。为什么 For 循环会阻碍文件的上传？这是否与 For Loop 继续下一行代码而不等待最后一个进程/行完成执行有关？这里发生了什么？

**编辑**：通常当我将大文件上传到 iCloud（不使用 For Loop）时，我可以在 iCloud 开发网站上看到该文件几乎立即处于待上传状态。我正在通过 WiFi 测试所有内容，我已经等了一段时间，但什么都没有出现（除了 sqlite 文件）。

**编辑**：我还以不同的方法检查 iCloud 可用性，如果 iCloud 可用，则允许调用此方法。我还确保阅读了文档并观看了 Apple 网站上的 WWDC 视频，但是它们很复杂，并没有为我正在尝试做的事情提供太多解释。

**编辑**：修改上面的代码（添加错误功能）后，我现在在日志中收到此错误消息：

```
Error Domain=NSCocoaErrorDomain Code=512 "The operation couldn’t be completed. (Cocoa error 512.)" UserInfo=0x1f5dd070 {NSUnderlyingError=0x208ad9b0 "The operation couldn’t be completed. (LibrarianErrorDomain error 2 - No source URL specified.)"} 
```

这使事情变得更加混乱，因为其中一个文件成功上传，而其他文件则没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T22:38:19.580

好的，最后的编辑很有用。该错误抱怨源 URL（`directoryURL`在您的代码中）丢失 - 可能是因为它是`nil`. 为什么会这样`nil`？因为你创建错了。您正在使用`-[NSURL initWithString:]`，并且文档说：

> 此字符串必须符合 RFC 2396 中描述的 URL 格式。此方法根据 RFC 1738 和 1808 解析 URLString。

您传递的是文件路径，而不是 URL。如果您传递`NSURL`了一些它无法识别为有效 URL 的内容，它通常会返回`nil`. 看起来`NSURL`无论如何都会经常产生一个文件 URL，但失败是这里的预期行为。据我所知，如果文件名不包含空格，它似乎可以工作，但这没有记录，也不是你可以依赖的东西。

您应该做的是更改您初始化的行`directoryURL`以使用接受文件路径的内容。就像是：

```
NSURL *directoryURL = [NSURL fileURLWithPath:[documentsDirectory stringByAppendingPathComponent:[localDocuments objectAtIndex:item]]]; 
```

另外，请确保验证`directoryURL`不是`nil`，以防万一。

# java - 将文件差异加载到数据库中

> ID：14185476
> 
> 赞同：0
> 
> 时间：2013-01-06T18:44:23.557
> 
> 标签：java, database

我正在寻找 java 或数据库中以下问题的解决方案。请帮忙。

我们必须读取一个文件并将记录放入 oracle 数据库中。文件就像 FTP 位置的 csv 格式（列值用管道 | 分隔）。假设文件名是employee.txt，对应的表名是Employee。假设列为 -

```
ID
name
Designation
Date_of_Joining 
```

txt 文件中的记录将是 -

```
1234|saurabh srivastava|lead|06-0ct-1990
1235|a john|lead|09-nov-1992
1236|p kumar||10-dec-1991 
```

该文件将始终包含完整记录。意思是，如果第一次文件有 10 条记录，下一次它将有这 10 条记录以及新记录。但是每次我们只需要在数据库中存储新记录。有没有什么办法使用java程序或Databse（过程，查询等），考虑到更少的性能损失。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:52:23.650

您最好的选择可能是混合方法。假设没有其他任何东西修改您可以在最后一行读取的数据库中存储的文件。然后你的java程序可以打开文件，从数据库中获取最后一行（或具有最后读取行号的另一个文件）跳到下一行（假设它存在），然后开始解析/将值插入到数据库中。我不认为仅数据库方法对您有好处，因为您会将所有解析处理（假设它甚至可能）放到您的服务器上，而不是能够将其解耦到客户端或另一个“日志”该部分的服务器。

无论哪种方式，您都需要以某种方式持久读取最后一行，否则您最终将不得不每次都处理整个文件，然后只插入不存在的任何内容，这两者都不会有效并且随着时间的推移会花费越来越长的时间。

# data-binding - 如何使用带有 EF5 的流式 API 来描述类型

> ID：14185480
> 
> 赞同：0
> 
> 时间：2013-01-06T18:44:48.010
> 
> 标签：data-binding, entity-framework-5

我试图将我的类映射到现有数据库，但在部分外键声明中失败。实际上，我不想拥有字段外键，而只想拥有导航属性。这里是模型：

```
public class Template : BaseNamedType
{
    //One template may has multiple TemplateSection
    public virtual ICollection<TemplateSection> TemplateSection { get; set; }
    ...........
}

//Custom mapping class. I have field Order, without it mapping is simple
public class TemplateSection : BaseType
{
    public virtual int Order { get; set; }
    //Here is one-to-many relation, this field is required
    public virtual Template Template { get; set; }
    //Here is one-to-many relation, this field is required
    public virtual Section Section { get; set; }
}

public class Section : BaseNamedType
{
    //One section may be referenced by multiple TemplateSection
    public virtual ICollection<TemplateSection> SectionTemplates { get; set; }
    ...........

} 
```

这是我的数据库创建脚本：

```
CREATE TABLE [templates]
(
    [id]           INT NOT NULL IDENTITY(1, 1),
    [name]         NVARCHAR(300) NOT NULL,
);

GO;

CREATE TABLE [sections_to_templates]
(
    [section_id]  INT NOT NULL,               //FK to [sections]
    [template_id] INT NOT NULL,               //FK to [templates]
    [order]       INT NOT NULL DEFAULT(0)
);

GO

CREATE TABLE [sections]
(
    [id]           INT NOT NULL IDENTITY(1, 1),
    [name]         NVARCHAR(300) NOT NULL,
);

GO 
```

在我的模型绑定代码中，我绝对不确定它是否正确：

```
modelBuilder.Entity<Template>()
    .HasKey(t0 => t0.Id)
    .Map(m => m.ToTable("templates"))
    .Property(x => x.Id)
    .HasColumnName("id")
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)
    .IsRequired();
modelBuilder.Entity<Template>()
    .HasMany(t0 => t0.TemplateSection)
    .WithRequired(t1 => t1.Template)
    .Map(??????????????????)

modelBuilder.Entity<TemplateSection>()
    .HasKey(t0 => t0.Id)
    .Map(m => m.ToTable("sections_to_templates"))
    .Property(x => x.Id)
    .HasColumnName("id")
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)
    .IsRequired();
modelBuilder.Entity<TemplateSection>()
    .HasRequired(t0 => t0.Template)
    .WithMany(t1 => t1.TemplateSection)
    .Map(m => m.MapKey("template_id"));
modelBuilder.Entity<TemplateSection>()
    .HasRequired(t0 => t0.Section)
    .WithMany(t1 => t1.SectionTemplates)
    .Map(m => m.MapKey("section_id"));
//How to describe Section class???? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:56:42.507

在我看来，你几乎完成了：

*   去掉第二个映射块，这是多余的，因为关系已经被第四个映射块覆盖了。

*   您可以删除`IsRequired()`映射，因为只能要求不可为空的属性。

*   您可以删除`HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)`映射，因为默认情况下整数键是数据库生成的标识。

*   对于字符串属性`Name`，您可以添加：

    ```
    modelBuilder.Entity<Template>()
        .Property(x => x.Name)
        .HasColumnName("name")
        .HasMaxLength(300)
        .IsRequired();
    // the same for Section 
    ```

*   “*如何描述Section类？？？* ”：和你的第一个映射块完全一样。

# javascript - Javascript - 如何从文本文件导入数据然后能够将数据分配给变量？

> ID：14185493
> 
> 赞同：-1
> 
> 时间：2013-01-06T18:46:09.670
> 
> 标签：javascript, jquery, json, object

我试图让朋友通过文本文件编辑 javascript 音乐播放器的播放列表。

播放列表是这样定义的

```
 var myPlayList = [

    {name:"song name",mp3:"songpath.mp3",ogg:"ogg path"}    
]; 
```

我想让他访问一个 txt，他可以在其中自己定义对象，并将其拉入我的脚本中。

所以我的代码会读到类似

```
var myPlayList;
$.getJSON(my_url, function(data) {
myPlayList = data;
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:58:39.063

你所拥有的看起来是对的，现在你已经返回了`JSON`你可以操作的东西，`myPlayList`因为它现在是一个 JS 对象。

如果他正确地构造了文件，​​下面的例子作为一个变量：

```
var yourFriendsSongs = {
    "Song":
    {
      name:"song name",
      mp3:"songpath.mp3",
      ogg:"ogg path"
    } 
    "Song":
    {
      name:"song name",
      mp3:"songpath.mp3",
      ogg:"ogg path"
    }   
    "Song":
    {
      name:"song name",
      mp3:"songpath.mp3",
      ogg:"ogg path"
    }   
    "Song":
    {
      name:"song name",
      mp3:"songpath.mp3",
      ogg:"ogg path"
    }      
}; 
```

拨打电话：

```
$.getJSON(my_url_to_friendsSongList, function(data) {
   myPlayList = data;
}); 
```

然后使用jQuery遍历每个

```
$.each(myPlaylist.Song,function(index,item){
   alert(item[index].name);
   alert(item[index].mp3);
   alert(item[index].path);
   //Whatever you want to do with the data            
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:48:28.667

对，那是正确的。让他制作一个有效的 JSON 文件，然后简单地读入。

# jquery - 带有溢出容器的 JQuery 可排序（故障/跳转）

> ID：14185495
> 
> 赞同：3
> 
> 时间：2013-01-06T18:46:39.437
> 
> 标签：jquery, jquery-ui, google-chrome, jquery-ui-sortable

问题是当列表溢出时：滚动并且您有很多 div，当您滚动到底部并尝试移动一个时，会出现一些小故障并跳转。有位置的东西：绝对？我认为？

**在 O/MS/FF 上运行良好，但在 Chrome 上运行良好**

JSFiddle：http: [//jsfiddle.net/CezarisLT/Y7uV5/9/](http://jsfiddle.net/CezarisLT/Y7uV5/9/)

```
<ul id="sortable">
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1</li>
    <li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2</li>
    .....
</ul>

$( "#sortable" ).sortable({
    forceHelperSize: true,
    forcePlaceholderSize: true,
    revert: true,
    revert: 150,
    placeholder: "ui-state-highlight",
    axis: "y",
    tolerance: "intersect"
});

$( "#sortable" ).disableSelection(); 
```

* * *

**编辑：我刚刚注意到****官方 jquery-ui 演示页面** [http://jqueryui.com/resources/demos/sortable/default.html](http://jqueryui.com/resources/demos/sortable/default.html)上发生了同样的事情 使窗口变小，一旦向下滚动，您就会注意到该错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T09:23:38.097

我已经设法用这两行代码防止了这个故障：

```
var sortHeight = $("#sortable").innerHeight();
$("#sortable").css({"min-height" : sortHeight}); 
```

# javascript - jQuery对话框动态高度

> ID：14185496
> 
> 赞同：2
> 
> 时间：2013-01-06T18:46:40.330
> 
> 标签：javascript, jquery, html, jquery-dialog

我正在寻找一种使 jQuery UI 对话框高度根据内容动态变化的方法。

这是我的代码：

```
$( "#dialog-modal_"+productID ).html( "<iframe src='index.php?act=showProduct&amp;id="+productID+"' width='100%' height='100%' frameborder='0' scrolling='no'></iframe>" );

$( "#dialog-modal_"+productID ).dialog(
{
    width: 810,
    height: 590,
    resizable: false,
    modal: true,
    open: function(event, ui)
    {
    }
}); 
```

反正有这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:48:06.850

将高度更改为`"auto"`。有关详细信息，请参阅[http://api.jqueryui.com/dialog/#option-height](http://api.jqueryui.com/dialog/#option-height)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:54:05.193

因为您给出的示例来自相对路径。您应该能够获取 iframe 文档的 .height()

但是，您需要做一些 CSS 技巧来首先渲染 iframe 并获取其浏览器文档高度，然后将该值应用于您的容器，然后在设置新高度后显示容器。

就像是 ...

取自这里：

```
var doc=document.getElementById("frame").contentDocument;

// Earlier versions of IE or IE8+ where !DOCTYPE is not specified
var doc=document.getElementById("frame").contentWindow.document; 
```

那么你会

```
var iframeDocHeight = $(doc).height(); // assuming it is displayed
$( "#dialog-modal_"+productID ).css("height", iframeDocHeight); 
```

这当然依赖于您已经派生出一种方法（给定页面框架的其余部分）以允许 iframe 呈现而不立即显示它的基础。

我会建议结合`position:absolute`和`visibility:hidden`然后一些 js 魔法来完成这个。如果没有完整的呈现的 html 文档，那么在我已经发布的内容之外建议一个绝对路径是没有用的。

基本上将 iframe 封装在一个带有 的元素中`overflow:hidden;display:block;height0px;`，但让 iframe 完全渲染（它将被隐藏）然后检查它并根据需要进行测量

祝你好运！

# ios - 打开 GLES 2.0 绘制纹理

> ID：14185497
> 
> 赞同：0
> 
> 时间：2013-01-06T18:46:54.853
> 
> 标签：ios, opengl-es

我正在尝试将图像加载到纹理中，然后绘制到纹理中。

我是否认为要显示纹理，您总是需要一组顶点和纹理坐标？那么，要绘制一个正方形纹理，我需要绘制 2 个三角形来制作一个正方形并将纹理附加到它们上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:53:20.153

是的，这是正确的。对于方形纹理，替代方法是使用带有 GL_POINTS 的点精灵。

# wordpress - WordPress 单选框 - 只选择最后一个

> ID：14185509
> 
> 赞同：0
> 
> 时间：2013-01-06T18:47:51.437
> 
> 标签：wordpress, radio-button, wordpress-theming, checked

所以我有一个如下所示的表格。它有点长。它包含三个单选框。每次我选择一个，不管是哪个，然后点击提交，最后一个单选元素都会显示为已选中，而不是我单击的那个。我 var 转储选项（在本例中为 aisis_core['display_rows']），它将显示我选择的无线电元素的值，而不是当前选择的值。

所以我选择列表，它会显示列表，但选择的单选框是 no_posts。有人可以告诉我我做错了什么吗？

```
 <form action="options.php" method="post">
   <input type='hidden' name='option_page' value='aisis_options' /><input type="hidden"
   name="action" value="update" /><input type="hidden" id="_wpnonce" name="_wpnonce"
   value="f0385965c6" /><input type="hidden" name="_wp_http_referer" value=
   "/WordPressDev/wp-admin/admin.php?page=aisis-core-options&amp;settings-updated=true" />
     <fieldset>
       <div class="control-group">
         <label class="radio"><input type="radio" id="rows" class="display" name=
         "aisis_core[display_rows]" value="display_rows" checked="checked" /> Display
         posts as rows. <a href="#radioRows" data-toggle="modal"></a></label>

         <div class="control-group">
           <label class="radio"><input type="radio" class="display" name=
           "aisis_core[display_rows]" value="list" checked="checked" /> Display posts a
           list. <a href="#radioLists" data-toggle="modal"></a></label>
         </div>

         <div class="control-group">
           <label class="radio"><input type="radio" id="noDisplay" class="display" name=
           "aisis_core[display_rows]" value="no_posts" checked="checked" /> Display no
           posts.</label>

           <div class="no_posts_section borderBottom">
             <div class="well headLine">
               <h1>Display No Rows</h1>

               <p>If you choose to display no rows please give me a url of the page or
               content you would like to display instead.</p>

               <p class="text-info"><strong>Note:</strong> Formatting of said content is
               up you. All we do is display it.</p>
             </div>

             <div class="control-group">
               <div class="controls">
                 <input type="url" name="aisis_core[index_page_no_posts]" value=
                 "http://google.ca" placeholder="Url" />
               </div>
             </div>
           </div>

           <div class="control-group">
             <div class="form-actions">
               <input type="submit" class="btn btn-primary btn-large" />
             </div>
           </div>
         </div>
       </div>
     </fieldset>
   </form> 
```

我在 wordpress 中使用的功能是：

```
checked('radio_box_value', isset($options['display_rows']), false) 
```

**注意：** radio_box_value 被替换为单选框的值。

在这种情况下，只有最后一个单选框的标签中有“选中”，它应该是我选择的那个。

**元素是如何创建的？**

以下是我创建元素的方式，它们打印出您在 html 中为单选按钮看到的内容。这些操作类似于但不完全是 zend 框架。

它非常直截了当，创建元素，将选项添加到元素，然后返回它。我希望这可以更好地说明这些是如何创建的。

```
protected function _radio_rows_element(){
    $options = get_option('aisis_core');
    echo $options['display_rows'];
    $radio_element = array(
        'name' => 'aisis_core[display_rows]',
        'value' => 'display_rows',
        'class' => 'display',
        'id' => 'rows',
        'checked' => checked('display_rows', isset($options['display_rows']) && $options['display_rows'] == 'display_rows', false),
        'label' => ' Display posts as rows. <a href="#radioRows" data-toggle="modal">
            <i class="icon-info-sign"> </i></a>'        
    );

    $radio = new CoreTheme_Form_Elements_Radio($radio_element, $this->sub_section_rows_array());

    return $radio;
}

protected function _radio_list_element(){
    $options = get_option('aisis_core');
    echo $options['display_rows'];
    $radio_element = array(
            'name' => 'aisis_core[display_rows]',
            'value' => 'list',
            'class' => 'display',
            'checked' => checked('list', isset($options['display_rows']) && $options['display_rows'] == 'list', false),
            'label' => ' Display posts a list. <a href="#radioLists" data-toggle="modal">
            <i class="icon-info-sign"> </i></a>'
    );

    $radio = new CoreTheme_Form_Elements_Radio($radio_element);
    return $radio;
}

protected function _radio_no_posts_element(){
    $options = get_option('aisis_core');
    echo $options['display_rows'];
    $radio_element = array(
            'name' => 'aisis_core[display_rows]',
            'value' => 'no_posts',
            'class' => 'display',
            'id' => 'noDisplay',
            'checked' => checked('no_posts', isset($options['display_rows']) && $options['display_rows'] == 'no_posts', false),
            'label' => ' Display no posts.</a>'
    );

    $radio = new CoreTheme_Form_Elements_Radio($radio_element, $this->_sub_section_now_posts_array());
    return $radio;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T00:33:53.710

“checked”函数似乎需要该值作为第二个参数，如此处所述 [http://codex.wordpress.org/Function_Reference/checked](http://codex.wordpress.org/Function_Reference/checked)

试试这样：

```
protected function _radio_rows_element(){
    $options = get_option('aisis_core');
    echo $options['display_rows'];
    $radio_element = array(
        'name' => 'aisis_core[display_rows]',
        'value' => 'display_rows',
        'class' => 'display',
        'id' => 'rows',
        'checked' => checked('display_rows', (isset($options['display_rows']))?$options['display_rows']:'', false),
        'label' => ' Display posts as rows. <a href="#radioRows" data-toggle="modal">
            <i class="icon-info-sign"> </i></a>'        
    );

    $radio = new CoreTheme_Form_Elements_Radio($radio_element, $this->sub_section_rows_array());

    return $radio;
}

protected function _radio_list_element(){
    $options = get_option('aisis_core');
    echo $options['display_rows'];
    $radio_element = array(
            'name' => 'aisis_core[display_rows]',
            'value' => 'list',
            'class' => 'display',
            'checked' => checked('list',(isset($options['display_rows']))?$options['display_rows']:'', false),
            'label' => ' Display posts a list. <a href="#radioLists" data-toggle="modal">
            <i class="icon-info-sign"> </i></a>'
    );

    $radio = new CoreTheme_Form_Elements_Radio($radio_element);
    return $radio;
}

protected function _radio_no_posts_element(){
    $options = get_option('aisis_core');
    echo $options['display_rows'];
    $radio_element = array(
            'name' => 'aisis_core[display_rows]',
            'value' => 'no_posts',
            'class' => 'display',
            'id' => 'noDisplay',
            'checked' => checked('no_posts', (isset($options['display_rows']))?$options['display_rows']:'', false),
            'label' => ' Display no posts.</a>'
    );

    $radio = new CoreTheme_Form_Elements_Radio($radio_element, $this->_sub_section_now_posts_array());
    return $radio;
} 
```

当未声明变量 $options['display_rows'] 时，这不会发出警告（正如您所说，这在您的情况下是可能的）并将该值传递给 WordPress 函数进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:41:35.863

您需要检查已检查条件中的值，而不是仅检查是否选择了任何值，提交后始终为真

改变

```
checked('display_rows', isset($options['display_rows']), false) 
```

到：

```
checked('display_rows', isset($options['display_rows']) && $options['display_rows'] == 'display_rows', false), 
```

并且列表：

```
checked('display_rows', isset($options['display_rows']) && $options['display_rows'] == 'list', false), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T01:03:28.387

我确实设法写了这个：

```
public function set_element_checked($value, $option, $key){
    $options = get_option($option);
    if(isset($options[$key]) && $options[$key] == $value){
        return 'checked';
    }
} 
```

这正是我想要的。将元素值与 $option[$key] 的值进行比较，如果它们匹配，则返回检查。可以通过以下方式调用：

```
'checked' => set_element_checked('display_rows', 'aisis_core', 'display_rows'); 
```

# opencl - 尝试使用信号量的 OpenCL 会导致驱动程序崩溃

> ID：14185523
> 
> 赞同：2
> 
> 时间：2013-01-06T18:49:28.250
> 
> 标签：opencl

 在编写简单的 OpenCL 内核时，我尝试使用信号量，但它破坏了我的 GPU 驱动程序（AMD 12.10）。在查看了我发现的示例后，仅当本地工作大小不等于 1 时才会发生崩溃。此代码取自[示例](http://www.cmsoft.com.br/index.php?option=com_content&view=category&layout=blog&id=113&Itemid=168)：

```
 #pragma OPENCL EXTENSION cl_khr_global_int32_base_atomics : enable
    #pragma OPENCL EXTENSION cl_khr_local_int32_base_atomics : enable
    #pragma OPENCL EXTENSION cl_khr_global_int32_extended_atomics : enable
    #pragma OPENCL EXTENSION cl_khr_local_int32_extended_atomics : enable

    void GetSemaphor(__global int * semaphor)
    {
      int occupied = atom_xchg(semaphor, 1);
      while(occupied > 0)
      {
          occupied = atom_xchg(semaphor, 1);
      }
    }

    void ReleaseSemaphor(__global int * semaphor)
    {
       int prevVal = atom_xchg(semaphor, 0);
    }

    __kernel void kernelNoAtomInc(__global int * num,
                __global int * semaphor)
    {
      int i = get_global_id(0);
      GetSemaphor(&semaphor[0]);
      {
        num[0]++;
      }
      ReleaseSemaphor(&semaphor[0]);
    } 
```

在示例作者使用

```
CQ.Execute(kernelNoAtomInc, null, new long[1] { N }, new long[1] { 1 }, null); 
```

其中 N = global_work_size 和 local_work_size = 1
现在，如果我将 1 更改为 null 或 2 或 4 或我尝试过的任何其他数字 - AMD 驱动程序将会崩溃。

```
CQ.Execute(kernelNoAtomInc, null, new long[1] { N }, new long[1] { 2 }, null); 
```

我目前没有其他 PC 可以对其进行测试。然而，作者故意离开 local_group_size = 1 似乎很奇怪，这就是为什么我认为我在这里遗漏了一些东西。有人可以向我解释一下吗？另外，据我了解，将 local_group_size 保留为 1 会极大地影响性能，还是不会？谢谢。

主机：Win8 x64、HD6870

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2022-02-09T22:08:49.443

您的问题不可重现，而且我无法从链接中找到您的来源，但这里有一些关于它为什么会崩溃的想法，这应该会有所帮助（过去 9 年）。

它可能会崩溃，因为...

*   ...驱动程序认为您希望`atom_xchg()`执行该功能的本地版本，而您却想要全局版本。
*   ...您的循环大大减慢了该内核在旧机器上的执行速度，以至于超过了执行时间的内部限制，导致驱动程序终止内核。

我可以建议一个可能的修复：

*   不要在内核中激活本地版本的 atom 函数
*   尝试在 CPU 上运行它

除非我们可以访问您的计算机并在其上进行调试，否则无法解决此问题。

* * *

您还问，为什么作者选择 local_group_size 之一。这是因为全局工作大小需要能被局部工作大小整除，这样除以得到一个自然数。自然数除以一总是自然数，因此这非常适合实验。您说它会极大地影响性能是完全正确的。（只是也许数学没有加起来，也没有崩溃，但甚至没有开始）

* * *

不同的注释：

*   为了使增量在功能上正确，您应该`atom_inc()`在`num`缓冲区上使用 an 。我不明白这会如何导致崩溃，但它肯定会让你的程序无法按预期工作
*   我会去使用 2.0 标准中的[原子函数](http://%5Bhttps://man.opencl.org/atomic_flag_test_and_set.html%5D)，因为它们已经具有类似信号量的函数：`bool atomic_flag_test_and_set(volatile atomic_flag *object)`和`void atomic_flag_clear(volatile atomic_flag *object)`

# javascript - ie8 onresize 事件，触发两次

> ID：14185524
> 
> 赞同：0
> 
> 时间：2013-01-06T18:49:41.883
> 
> 标签：javascript, internet-explorer, internet-explorer-8

在我的 html 中：

```
<body onresize="doSomething();"> 
```

我的 javascript 中有这个：

```
function doSomething() {
    alert(1);
    // it doesn't actually have alert(1), but this is just for demonstration
} 
```

当我调整浏览器窗口的大小（通过双击其标题）时，该事件会在 IE8 中触发两次，从而弄乱了该功能。

有谁知道为什么以及如何避免它？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T18:57:34.960

您会发现，如果您通过在右下角的拖动区域中随机移动来“调整”浏览器窗口的大小，则该`onresize`事件会重复触发。

关键是，什么构成了窗口调整大小是相当有争议的。您将不得不接受，这在浏览器和操作系统之间有很大的不同。

要处理的问题包括取消（如果已设置），然后`window.setTimeout`在调整大小事件上设置计时器 ( ) 并在计时器触发时执行真正的调整大小工作。

如果你`onresize`的不是太昂贵，你应该以某种方式创建它，而不是重复调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T18:55:49.293

[这是在 jQuery 中两次触发 Window resize 事件](https://stackoverflow.com/questions/13244667/window-resize-event-fires-twice-in-jquery)的副本。onresize 事件在调整窗口大小时触发，但可以触发多次。

# meteor - 有没有办法将参数传递给 Meteor 中的 Handlebars 模板？

> ID：14185532
> 
> 赞同：6
> 
> 时间：2013-01-06T18:50:16.390
> 
> 标签：meteor, handlebars.js

我正在使用 Meteor 0.5.2 并试图解决在我看来是一个明显的模式，应该有一个简单的解决方案。

我有一个模板，它应该在每个模板实例中返回不同的数据块。

例如 - 我有一个显示电视节目的模板 - 一个节目一个节目。

然后我需要用不同的数据显示同一模板的两个实例——一个是过去的节目，一个是即将到来的节目。

所以我有一个电视节目模板：

```
<template name="tv_program">
   {{#each shows}}
   ...
</template> 
```

理想情况下，我想做类似的事情：

```
{{> tv_program past_shows}}
...
{{> tv_program upcoming_shows}} 
```

将参数传递给我可以从 JavaScript 读取的 tv_program 模板实例并调整 mongo 查询。

目前我已经复制/粘贴了我的模板/js 代码并调整了 mongo 查询，但必须有更好的方法。

我用参数研究了部分/助手，但这似乎不是我问题的解决方案。

谢谢，弗拉基米尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T19:05:24.190

你在错误的层面上解决问题。与其试图告诉你的代码从你的模板做什么，你应该告诉你的模板从你的代码做什么。例如：

```
Template.past_shows.shows = function() { return shows(-1); }

Template.upcoming_shows.shows = function() { return shows(1); }

function shows(order) {
  return Shows.find({}, {$sort: order});
}

<template name="past_shows">
  {{#each shows}}
    {{> show}}
  {{/each}}
</template>

<template name="upcoming_shows">
  {{#each shows}}
    {{> show}}
  {{/each}}
</template>

<template name="show">
  <li>{{_id}}: {{name}}</li>
</template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:25:37.547

如果您正在为您的应用程序使用状态机，例如[meteor-router](https://github.com/tmeasday/meteor-router)，您可以使用一个模板并根据应用程序状态使用即将到来的或过去的节目填充它。

# android - 动态壁纸中的警报对话框

> ID：14185535
> 
> 赞同：0
> 
> 时间：2013-01-06T18:50:21.833
> 
> 标签：android, android-activity, android-alertdialog, live-wallpaper

我正在尝试在动态壁纸中创建一个警报对话框，基本上要求人们评分..他们可以跳过它这是我所拥有的......但它没有显示出来..它适用于我的 webview 应用程序，我正在使用 livewallpapercreator .com 来制作壁纸，我知道你可以在评级对话框中添加壁纸，因为我已经看到它完成了。

```
 public class SBLiveWallpaper extends WallpaperService  {

    AlertDialog alert;
    public int n=0;
    int state;

    public static final String SHARED_PREFS_NAME="LiveWallpaperPrefs";

    @Override
    public void onCreate() {    
        super.onCreate();

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
           builder.setMessage("Please Rate Our App 5 Stars! :)")
                  .setCancelable(false)
                  .setPositiveButton("RATE NOW", new DialogInterface.OnClickListener() {
                      public void onClick(DialogInterface dialog, int id) {

                           dialog.cancel();
                           startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=") ) );     

                      }
                  })
                  .setNegativeButton("Skip", new DialogInterface.OnClickListener() {
                      public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();

                      }
                  });
   alert = builder.create();
          alert.show(); 

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T03:21:30.990

因为 WallpaperService 是一个服务，所以不能直接显示对话框：不能添加窗口！

所以我尝试另一种方式来显示`dialog:start`带有标志“ `FLAG_ACTIVITY_NEW_TASK`”的活动。

它终于奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:46:24.280

这不会出现在运行动态壁纸中。您应该在首选项屏幕中执行此操作。

# javascript - jQuery 自动完成小部件源 - 参数来自哪里？

> ID：14185539
> 
> 赞同：1
> 
> 时间：2013-01-06T18:50:51.780
> 
> 标签：javascript, jquery, jquery-ui

我正在研究[自动完成小部件源](https://github.com/jquery/jquery-ui/blob/1-9-stable/ui/jquery.ui.autocomplete.js)以尝试帮助我正在构建的小部件。[这条线](https://github.com/jquery/jquery-ui/blob/1-9-stable/ui/jquery.ui.autocomplete.js#L546)对我来说毫无意义：

```
_value: function() {
  return this.valueMethod.apply( this.element, arguments );
}, 
```

`valueMethod` [定义为](https://github.com/jquery/jquery-ui/blob/1-9-stable/ui/jquery.ui.autocomplete.js#L60)：

```
this.valueMethod = this.element[ this.element.is( "input,textarea" ) ? "val" : "text" ]; 
```

那么`arguments`参数是从哪里来的呢？据我了解，javascript 具有功能范围，因此无法`arguments`通过。

我很困惑，如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:59:25.593

`arguments`即使您没有明确定义任何参数，该参数也将始终在 javascript 的新函数中自动定义。假设valueMethod`apply`是一个函数并传递这些参数也是如此。此外，您可以假设`this.element[ this.element.is( "input,textarea" ) ? "val" : "text" ];`将返回一个函数指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:07:27.260

> [`arguments`是] 一个类似数组的对象，对应于传递给函数的参数。该`arguments`对象是所有函数中可用的局部变量；`Function`不能再使用作为属性的参数。

来源：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

换句话说，它是 - 对于*大多数*意图和目的 - 一个包含传递给函数的参数的数组，这对于许多原因很有用......尤其是在创建接受可变数量参数的方法或函数时。在这种情况下，所有参数都只是传递给另一个方法，`this.valueMethod`.

# magento - 在magento中制作不需要的电子邮件地址

> ID：14185544
> 
> 赞同：4
> 
> 时间：2013-01-06T18:51:19.160
> 
> 标签：magento, magento-1.7

我想在 magento 注册期间将电子邮件地址设为可选。我将添加一个额外的用户名属性，用户将能够使用该属性登录（我已经完成了该部分的工作）。执行此操作的步骤是什么，甚至有可能吗？我找到了一个旧的扩展程序，可以满足我的想法，但它已经过时了。 [http://www.magentocommerce.com/magento-connect/email-not-required.html](http://www.magentocommerce.com/magento-connect/email-not-required.html)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:40:36.700

您可以执行与扩展程序类似的操作。

> “此扩展程序将允许您添加没有有效电子邮件地址的客户。如果没有电子邮件地址，它将自动插入一个电子邮件地址 [customernumber]@[default customer domain]....”

您可以创建一个 gmail（或者如果您使用 google 应用程序作为您的公司电子邮件）或一个全部电子邮件

电子邮件格式

> noemail+[timestamp]-[ipaddress to long]@gmail/yourdomain.com

然后从电子邮件字段中删除验证 js，使其在您的 .phtml 中成为必需。

然后创建一个覆盖您的结帐控制器的自定义模块（假设一页结帐）

/app/code/core/Mage/Checkout/controllers/OnepageController.php

```
/**
 * save checkout billing address
 */
public function saveBillingAction()
{
   ... 
   if (isset($data['email']) && strlen($data['email']) > 3) {
        $data['email'] = trim($data['email']);
   }
   else{
       $data['email'] = getNoEmailGen(); // return noemail+[timestamp]-[ipaddress to long]...
   } 
```

（您也可以使用 JS 来执行此操作，您可以在其中预先生成电子邮件地址（在隐藏字段或变量中），如果电子邮件字段留空，您可以在提交账单之前附加/发布它）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-06T19:12:34.070

您不应该这样做，因为当您订购某些东西时，交易邮件将会发生，因此您不能拥有没有邮件的用户。这应该很奇怪。

# c# - 将 WinForm 更改为 Win Control，工作正常但在 Visual Studio 设计器中不可见

> ID：14185545
> 
> 赞同：2
> 
> 时间：2013-01-06T18:51:35.343
> 
> 标签：c#, winforms, controls

我已将 Windows 窗体转换为 Windows 控件（通过将代码的父级从窗体更改为控件，删除一些次要/不相关的窗体属性分配，并将项目设置更改为“类库”而不是 Windows 窗体应用程序）。控件在我的应用程序中运行良好，但是当我在 Visual Studio 设计器中打开它时，除了它没有向我显示的项目的标签（面板 1、按钮 1 等）之外，什么都没有。

如何让设计师重新工作？它没有给出任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:15:07.467

当你这样做时，你会得到错误的设计师。Control 类的默认设计器不是 DocumentDesigner，它是一种支持编辑嵌套控件的设计器。最简单的解决方法是将类的基类从 Control 更改为 UserControl。

# android - 修复两个活动之间的动画

> ID：14185546
> 
> 赞同：0
> 
> 时间：2013-01-06T18:51:40.203
> 
> 标签：android, android-activity

当用户从活动 A 转到活动 B 时，我想显示一个特定的动画。现在，正在显示我想要覆盖的默认动画。我希望新活动从右侧滑入。我猜这可以通过 `overridePendingTransition()`

但是我是否必须为我想要实现的动画创建一个新的 xml 文件，或者是否有一个现有的文件？我如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:01:40.147

您在此页面上有许多动画：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.5_r1/frameworks/base/core/res/res/anim/](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.5_r1/frameworks/base/core/res/res/anim/)

您可以将它与 overridePendingTransition() 一起使用。

希望这可以帮助 ：）

# servlets - servlet初始化失败时如何停止整个java webapp

> ID：14185547
> 
> 赞同：2
> 
> 时间：2013-01-06T18:51:45.897
> 
> 标签：servlets, exception-handling

如果我的任何 servlet 无法初始化，我希望我的 Web 应用程序在启动时失败。我希望如果我从该`Servlet.init()`方法中抛出一个异常，它会导致整个应用程序失败，但显然它不会。Web 容器（在我的例子中是 Tomcat 7）只是无法加载该特定的 servlet，但据报道该应用程序无论如何都已成功部署。

如果从 eg 方法抛出异常，它会按预期运行`ServletContextListener.contextInitialized()`，但为什么从 eg 方法抛出的异常`Servlet.init()`没有这种效果？

如果出现 Servlet 初始化错误，有什么方法可以停止应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T06:11:46.713

请尝试以下步骤：

1.  将您的 servlet 保存在 load-on-startup 列表中，以便您的 servlet 在应用程序启动时初始化。
2.  在 Servlet.init() 方法中，在 ServletContext 中设置一个属性，说明 servlet 已初始化。例如，*myServletInited*
3.  实现 ServletContextListener.contextInitialzied() 方法。检查*myServletInited*是否存在。如果 is 不存在，则抛出导致应用程序失败的异常。

# batch-file - 使用 SET 对批处理文件进行混淆和/或防病毒隐藏。它会起作用吗？

> ID：14185548
> 
> 赞同：1
> 
> 时间：2013-01-06T18:51:59.127
> 
> 标签：batch-file, command, dos, obfuscation

你好，我只是想知道一个普通的 SET 参数是否可以用于混淆或 Windows 批处理文件中的任何其他防病毒保护。

我问是因为我最近获得了两个“著名”的批处理病毒脚本“PiFv”和“meLT”。当然是为了学习。他们一直被杀毒软件检测到，所以我会禁用它，研究一段时间，它会再次被删除。幸运的是我有互联网；）无论如何，我试图想办法隐藏病毒'。

我想可能是因为它们是按字符串分析的，因此仅更改文本会有所帮助。所以我用了这样不起眼的词

```
SET hello="@ Echo off"
%hello% 
```

等等。不幸的是，尽管它的状态从“传染性”降低到“启发式”，但诺顿足够聪明（令人惊讶地）对其进行了怀疑。我想如果它从“是”变为“可能”可行。

接下来，我继续进行单字母更改，例如，如果我要打印“感染”；

```
set z=i
set h=n
set j=f
set x=e
set d=c
set q=t &echo %z%%h%%j%%x%%d%%q% 
```

这已经成功了一半。尽管我认为这是一个漫长的过程，但如果建立了一套字母表，那么它可能会改变。无论如何，工作的一半。它在脱离 USB 时被归类为启发式，但如果脱离软盘则不被归类。为什么？另外，你认为这是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:07:23.843

在阅读您的问题的中途，我的想法与您的第二个想法相同，将单词分开。

我无法测试，因为不同的 AV 会检测到不同的东西，但也许可以尝试将它们分成两半而不是单个字母，所以不需要那么长时间。

```
set z=inf
set h=ect
echo %z%%h% 
```

另一种选择是从文本文件中读取完整的命令

```
set /p z= <command.txt
echo %z% 
```

# c# - 注册表导出不起作用

> ID：14185551
> 
> 赞同：1
> 
> 时间：2013-01-06T18:52:34.110
> 
> 标签：c#, .net, registry, system.diagnostics

我尝试使用此代码将注册表项导出到文件。

```
private void BackupRegistry()
{
    var dir = Path.GetDirectoryName(Application.ExecutablePath);
    Process.Start("reg", string.Format("export HKEY_CURRENT_USER\\Software\\DownloadManager {0}\\idm.reg", dir));
} 
```

但是当我执行该方法时，可执行目录中没有任何 idm.reg 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:02:53.110

如果路径包含空格，您应该引用路径

```
private void BackupRegistry()
{
    var dir = Path.GetDirectoryName(Application.ExecutablePath);
    Process.Start("reg", string.Format("export HKEY_CURRENT_USER\\Software\\DownloadManager \"{0}\\idm.reg\"", dir));
} 
```

# filesystems - 在目录中搜索文件的效率？

> ID：14185552
> 
> 赞同：0
> 
> 时间：2013-01-06T18:52:34.993
> 
> 标签：filesystems, web-development-server

我正在建立一个带有用户身份验证系统的网站，允许每个用户将图像上传到他们的帐户，基本上我这样做是作为 Web 开发的经验，所以请原谅我对这个话题的无知。

我的问题涉及将文件放入目录的效率。创建更深的目录结构还是将所有文件放在一个文件夹中更有效？前者看起来很明显，但它不依赖于文件系统实现的搜索算法吗？

例如：

```
root/user/2012/----------------A/
         /2013/---------- A/   B/
         /2014/------A/   B/   C/
                     B/   C/   D/
                     C/   D/
                     D/ 
```

还是将所有文件转储到一个文件夹中？

```
root/user/ 
```

当检索图像时，例如通过`<img>`标签，哪种方式可以提供更有效的结果？我在 Google 上搜索了有关该主题的信息，但找不到任何明确的信息或在我的理解水平上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:17:28.983

访问单个文件应该大致等效。单个目录或多项选择实际上取决于您尝试使用文件列表的方式。如果您希望用户拥有数千个文件并且一次只显示一年，则将目录结构分解为多个部分以保持文件列表的可管理性可能是有意义的。如果您总是显示所有文件，我怀疑单个文件夹可能会更快，因为您必须遍历整个目录列表来执行多个文件列表。我会根据您期望您的应用程序必须处理的内容进行一些测试。我的猜测是单个目录应该没问题，除非您期望大量文件并且您可以分解列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T18:57:08.703

我不知道您打算在什么操作系统上运行，但我会采用多目录方法，因为某些 FS（例如 Windows 上的 NTFS）在处理单个目录中的 10000 多个文件时速度会非常慢

# php - 在循环中使用 mysql 和 php 用 jquery 自动完成填充 2 个输入

> ID：14185554
> 
> 赞同：0
> 
> 时间：2013-01-06T18:52:39.843
> 
> 标签：php, jquery, mysql, loops, jquery-autocomplete

好的，所以我对此有点陌生..我已经用谷歌搜索了这个问题，但我只是不明白。

我有 2 个输入，描述和条形码

我需要在描述字段中搜索，并在选择描述建议时自动完成描述和条形码。

到目前为止，这是我所拥有的，我似乎无法弄清楚如何将 php 数组添加到 Jquery 中（允许没有显示数组，这是我用于单个输入字段的工作代码）有人请帮我把这个搞砸。

```
 <?php //My Inputs (are in a loop) *** ?>

    <input name="<?php echo 'ingdes'.$y ?>" type="text"  value="<?php  issetValue($ingdes[$y]) ?>"class="autosearch" id="<?php echo 'ingdes'.$y ?>" size="45" autocomplete='off'  /> <!-- THIS IS THE DESCRIPTION -->

     DESC

     <input name="<?php echo 'ingcode'.$y ?>" type="text" value="<?php issetValue($ingcode[$y]) ?>" class="code" id="<?php echo 'ingcode'.$y ?>" size="12"  /> 
     BARCD   <!-- THIS IS THE BARCODE -->

    <?php // End My inputs ***

          // My function ***

          public function jsAutoSearch() { ?>

          <script>
          $(function() {
          var availableTags = [ <?php

          $query= mysql_query("SELECT * FROM $this->usernameid ORDER BY name");

          while (($row = mysql_fetch_assoc($query)) !== false){
          echo '"'.$row['name'].'",';}?> 
          /* $row['barcode1'] is the additional field I need to get working and send to the other input field  */  

          ""];
          $( ".autosearch" ).autocomplete({
          source: availableTags
          });
          });
          </script>

          <?php }

          // End my function 
```

我对数组的尝试***** ** *** ******

```
 public function jsAutoSearch() { 

       $return_arr = array();
    $query= mysql_query("SELECT * FROM $this->usernameid ORDER BY name");

    while (($row = mysql_fetch_assoc($query)) !== false){
    $row_array['name']  = $row['name']; // THIS IS THE DESCRIPTION
    $row_array['barcode'] = $row['barcode1']; // THIS IS THE BARCODE
          array_push( $return_arr, $row_array );
    } ?>
    <script>

    $( ".autosearch" ).autocomplete({
        source: "<?php echo json_encode($return_arr),'\n'?>",
    select: function (event, ui) {
    var item = ui.item;
    if(item) {
    $(".autosearch").val(item.name); <!-- THIS IS THE DESCRIPTION -->
    $(".ingcode1").val(item.barcode); <!-- THIS IS THE BARCODE -->
    }
    ;}
    })

</script>

<?php } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T01:00:48.647

```
 <?//*****************search.php*********************

     $searchterm = $_GET['term'];
   $return_arr = array();
$query= mysql_query("SELECT * FROM $object1->usernameid WHERE name LIKE    '%$searchterm%' ORDER BY name");

 while (($row = mysql_fetch_assoc($query)) !== false){
       $names[] = array( name => $row['name'], barcode => $row['defcode'] ) ; 
    } 

 // Cleaning up the term
$term = trim(strip_tags($_GET['term']));
// Rudimentary search
$matches = array();
foreach($names as $name){
if(stripos($name['name'], $term) !== false){
    // Add the necessary "value" and "label" fields and append to result set
    $name['value'] = $name['name'];
    $name['label'] = "{$name['name']}, {$name['defcode']}";
    $matches[] = $name;
}
  }
 // Truncate, encode and return the results
 $matches = array_slice($matches, 0, 5);
 print json_encode($matches);?>

//********************** JQuery *****************************************

       <script type="text/javascript">

     $(document).ready(function(){
var ac_config = {
    source: "search.php",
    select: function(event, ui){
        $("#ingdes<?php echo $y ?>").val(ui.item.name);
        $("#ingcode<?php echo $y ?>").val(ui.item.barcode);

    },
    minLength:1
};
$("#ingdes<?php echo $y ?>").autocomplete(ac_config);
   });
 </script> 
```

# java - 从数组中排除重复值

> ID：14185555
> 
> 赞同：0
> 
> 时间：2013-01-06T18:52:42.047
> 
> 标签：java, android, arraylist

我有一个数组，它返回特定月份的一组事件。有些月份可能在同一天有不同的事件。如何检测重复日期并在同一日期条目下显示两个事件，而不是两个单独的日期条目。

**代码：**

```
public void setListView(int month, int year, int dv) {

        events = new HolidayEvents();
        _calendar = Calendar.getInstance(Locale.getDefault());
        int totalDays = _calendar.getActualMaximum(Calendar.DAY_OF_MONTH);

        for(int i = 1; i <= totalDays; i++){
            if(isHoliday(i, month, year, dv))
            {
                date = i + " " + getMonthForInt(month-1) + " " + year;

                for (Event event : events.eventDetails(this, month, i) 
                {
                       summaries.add(new Summary(date, event.eventdetails));

                } 
            }
        }
} 
```

**输出：**

1 月 11 日有两个活动。所以它显示结果：

```
11 January 2013 
-Event Name-
11 January 2013
-Event Name- 
```

我希望输出显示如下：

```
11 January 2013
-Event Name | Event Name- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:09:18.560

如果您将`Event`s 存储在如下结构中：

```
Map<Date, List<Event>> eventMap= new HashMap<Date,List<Event>>(); 
```

您可以像这样获取给定日期的所有事件`d`：

```
List<Event> events = eventMap.get(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:11:02.510

```
ListMultiMap<Date,Event> eventMap = ArrayListMultiMap<Date,Event>.create(); 
```

对多图的放置会将事件添加到该日期的事件列表中。获取日期将返回包含该日期所有事件的列表。

您也可以使用常规地图手动执行此操作，尽管它有点麻烦。

[http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/ArrayListMultimap.html](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/ArrayListMultimap.html)

# struts2 - 如何在表单提交之前禁用 struts 2 验证？

> ID：14185558
> 
> 赞同：0
> 
> 时间：2013-01-06T18:53:08.227
> 
> 标签：struts2, struts, struts-config, struts-validation

我正在用struts2，Hibernate做一个项目。

我希望 struts 验证我的表单。我添加了一个`MyAction-validation.xml`，它工作得很好。（我说得很好，因为它没有在客户端验证。我已将`<s:form/>`标签的 validate 属性设置为 true）

首先，它给我提供了一些错误并用谷歌搜索我得到我应该添加一个带有输入名称的结果。所以现在我在我的操作中得到了一个带有输入名称的结果，但我并没有很好地理解它是如何工作的以及为什么。

当 myAction.action url 调用我的操作时，我的操作返回一个普通表单，并且当提交表单时，数据直接进入操作参数并保存在数据库中。然后将显示填写好的表格并显示成功消息。表单字段应在提交时进行验证。但是只要调用该操作，它们就会被验证。我尝试`@SkipValidation`了注释，但它完全取消了验证。即使我在执行方法中调用 validate 方法，它也不会运行。我用几`System.out.println`行测试了它。我在 struts.xml 中的动作定义如下：

```
<action name="ShowAddItemPage" class="action.clerk.ShowAddItemPage">
  <result name="success" type="tiles">addItem</result>
  <result name="generalError" type="tiles">clerkGeneralError</result>
  <result name="input" type="tiles">addItem</result>
</action> 
```

1.  如何使验证在客户端工作？
2.  如何使验证仅在提交表单时运行，并在应用程序提供表单字段时禁用它？
3.  什么是输入结果名称，为什么我必须将其添加到操作结果中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T18:59:38.973

1.  就像你说的那样，通过将 validate 属性设置为 true。
2.  通过使用不同的操作来显示表单，或者通过创建一个跳过 GET 验证的拦截器（这就是我以前做的）等。
3.  “输入”是验证失败时使用的结果，尽管您可以更改它。如果验证失败（默认情况下，类型转换也失败）它必须去某个地方，“输入”结果就是哪里。

# json - JSP 发出 http 获取请求并获取 json 响应

> ID：14185559
> 
> 赞同：4
> 
> 时间：2013-01-06T18:53:13.777
> 
> 标签：json, http, jsp, request, response

我想发出一个获取 json 响应的 http get 请求。在该会话响应中，我想将一个值存储到我的会话中。这是如何实现的？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T18:57:56.407

这是示例代码。您将在 recvbuff 中得到响应。

```
<%@page import="java.io.*" %>
<%@page import="java.net.*" %>

<%
   String recv;
   String recvbuff;
   URL jsonpage = new URL("http://www.yoursite.com/jsonresponse");
   URLConnection urlcon = jsonpage.openConnection();
   BufferedReader buffread = new BufferedReader(new InputStreamReader(urlcon.getInputStream()));

   while ((recv = buffread.readLine()) != null)
    recvbuff += recv;
   buffread.close();

   System.out.println(recvbuff);
%> 
```

# perl - 如何在 Windows 8 上安装 Perl？

> ID：14185560
> 
> 赞同：13
> 
> 时间：2013-01-06T18:53:15.207
> 
> 标签：perl, windows-8, installation

我想使用 Perl 进行 Web 开发。我试图找出如何安装它，但是当我尝试获取 ActivePerl 时它不会安装在 Windows 8 上。谁能告诉我如何在 Windows 8 上安装 Perl？我可以选择 ActivePerl、Strawberry Perl 或任何其他 Perl 版本，只要它可以在 Windows 8 上运行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T21:26:36.523

如您所知，Windows World 中有两种常用的 Perls：

*   [来自ActiveState](http://activestate.com)的ActivePerl 。
*   [Strawberry Perl](http://strawberryperl.com)这是一个由 Adam Kennedy 发起的开源项目——Perl 社区的大佬。

它们之间的最大区别是什么：

ActiveState Perl 被设计为专门用于 Windows（以及后来的 Mac 和 Linux）的 Perl 解决方案。ActiveState 提供了一个非常棒的 Perl IDE，称为 Komodo，并具有出色的 Perl 支持。你所需要的只是一些现金。毕竟，这就是 ActiveState 赚钱的方式。当然，您可以使用 EPIC 代替 Komodo，也可以从 StackOverflow 获得很多帮助。

ActiveState 已经安装了默认的 Win32 模块，并且还提供了一个*Perl 包管理器*(PPM)，而不是使用 CPAN 来安装其他 CPAN 模块。PPM 有一个漂亮的 GUI 界面，它的模块已经过预编译和测试。它也比具有依赖跟踪的 CPAN 好一点。当然，可能有一些 CPAN 模块不在 PPM 中，这可能是个问题。

Strawberry Perl 开始比 ActiveState 更加面向*开源。*默认情况下，Strawberry Perl 带有一个*Make*程序和一个完整的开发环境，因此几乎所有的 CPAN 模块都可用并且可以安装。这是因为 Strawberry Perl 带有完整的[MinGW](http://www.mingw.org)包，其中包括*Make*和*gcc*编译器。这个想法是给主要使用 Linux 和 Unix 机器的 Perl 人一个类似感觉的 Windows 解决方案。

实际上，两者非常相似。ActiveState 带有 Win32 模块，但您可以根据需要通过 CPAN 在 Strawberry Perl 上安装它们。Strawberry Perl 与 CPAN 一起工作，但 ActiveState 为您提供了安装 Strawberry Perl 使用的相同 MinGW 环境的完整[指导](http://www.activestate.com/blog/2010/10/how-install-cpan-modules-activeperl)（通过他们的 PPM），它允许您安装 Strawberry Perl 可以安装的所有 CPAN 模块。ActiveState 带有一个 GUI Perl 文档，其中包括所有已安装的 Perl 模块，但该`perldoc`命令无论如何都会为您提供相同的信息。

所以，如果你更倾向于 Linux/Unix 并且想要在 Windows 上感觉非常相似的东西，请选择 Strawberry Perl。如果您使用 Perl 作为 Win32 解决方案，请使用 ActiveState。而且，不用担心选错了。最后，Strawberry Perl 可以包含所有这些不错的 Win32 模块，而 ActivePerl 可以使用 CPAN。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T19:10:37.297

[还有另一个 SO 帖子，您可能会在此处](https://stackoverflow.com/questions/3365518/should-i-choose-activeperl-or-strawberry-perl-for-windows)找到您要查找的内容。一个类似的帖子。总之，我的印象是 Strawberry Perl 可以正常工作，ActivePerl 也可以。我更喜欢 Strawberry Perl，很久以前我把它安装在我妻子的 Windows Vista 机器上，我不记得为什么我选择它而不是 ActivePerl，ymmv。干杯！

# java - 使用 AsyncTask 在谷歌地图上显示多个标记

> ID：14185571
> 
> 赞同：0
> 
> 时间：2013-01-06T18:54:31.683
> 
> 标签：java, android, android-asynctask, maps

我又遇到了 Android 中的 AsyncTask 的问题。

我制作了一个简单的 AsyncTask 类来在 MapView 上显示多个标记。但是开始活动，有一个 NullPointerException - 我认为这是由 MapView 引起的......

```
public class MapDetail extends MapActivity {

// JSON Node names
private static final String TAG_NEWNAME = "name";
private static final String TAG_LONG = "long";
private static final String TAG_LAT = "lat";

// Variablen
private MapController mc;
private List<Overlay> mapOverlays;
private Drawable drawable;
private MapItemizedOverlay itemizedoverlay;
private MapView mapView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.offers);

    // getting intent data
    Bundle extras = getIntent().getExtras();
    String url = extras.getString("url");

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    mc = mapView.getController();

    mapOverlays = mapView.getOverlays();
    drawable = this.getResources().getDrawable(R.drawable.marker);
    itemizedoverlay = new MapItemizedOverlay(drawable, this);

    new MyAsyncTask().execute(url);

} 
```

这是我的异步任务：

```
public class MyAsyncTask extends AsyncTask<String, Void, MapItemizedOverlay > {

    @Override
    protected MapItemizedOverlay doInBackground(String... params) {
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();
        JSONArray locations = jParser.getJSONArrayFromUrl(params[0]);

        for (int i = 0; i < locations.length(); i++) {
            JSONObject c;
        try {
            c = locations.getJSONObject(i);
            // Storing each json item in variable
            String firma = c.getString(TAG_NEWNAME);
            String longitude = c.getString(TAG_LONG);
            String latitude = c.getString(TAG_LAT);
            System.out.println("Kriege ich daten"+longitude+"und"+latitude);
            double x = Double.parseDouble(latitude);
            double y = Double.parseDouble(longitude);

            GeoPoint point = new GeoPoint((int)(x * 1E6),(int)(y * 1E6) );
            OverlayItem overlayitem = new OverlayItem(point, firma, null);
            itemizedoverlay.addOverlay(overlayitem);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
        System.out.println(itemizedoverlay.toString());
        return itemizedoverlay;
    }

    @Override
    protected void onPostExecute(MapItemizedOverlay result) {
        mapOverlays.add(result);
        mapView.getOverlays().add(result);
        LocationManager myLocationManager;
        LocationListener myLocationListener;            
        myLocationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        myLocationListener = new MyLocationListener();

        myLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,myLocationListener);

        GeoPoint initGeoPoint = new GeoPoint(   (int)(myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER).getLatitude()*1000000),
                                                (int)(myLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER).getLongitude()*1000000));

        mc.animateTo(initGeoPoint);
        mc.setZoom(6); 
        mapView.invalidate();

    } 
```

}}

我的日志：

```
 01-06 19:49:23.703: E/AndroidRuntime(6064): FATAL EXCEPTION: main
    01-06 19:49:23.703: E/AndroidRuntime(6064): java.lang.NullPointerException
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at de.main.MapDetail$MyAsyncTask.onPostExecute(MapDetail.java:150)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at de.main.MapDetail$MyAsyncTask.onPostExecute(MapDetail.java:1)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at android.os.AsyncTask.finish(AsyncTask.java:631)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at android.os.Handler.dispatchMessage(Handler.java:99)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at android.os.Looper.loop(Looper.java:137)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at android.app.ActivityThread.main(ActivityThread.java:4745)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at java.lang.reflect.Method.invokeNative(Native Method)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at java.lang.reflect.Method.invoke(Method.java:511)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    01-06 19:49:23.703: E/AndroidRuntime(6064):     at dalvik.system.NativeStart.main(Native Method) 
```

# c# - 将 UserControl 依赖属性绑定到运行时数据集

> ID：14185572
> 
> 赞同：1
> 
> 时间：2013-01-06T18:54:54.873
> 
> 标签：c#, .net, wpf, xaml, data-binding

我对 xaml 很陌生。我环顾四周，发现的帖子与我正在尝试做的事情很接近，但我无法准确找到我正在寻找的内容。

我有一个具有依赖属性的外部 WPF UserControl。在另一个项目中，我从我的 UserControl 库中导入了 dll。我在我的项目中创建了一个静态网格，其中每个单元格中都有一个我的用户控件的实例。我定义的每个 UserControl DependencyProperty 在 xaml 中都可用。

在运行时，我将用数据填充 DataTable，然后我需要将网格中的 UserControls 绑定到 DataTable，以便每个 UserControl 反映来自 DataTable 的值。DataTable 中的每一行都有几个列值，我需要将它们绑定到我的 UserControl 的依赖属性。

我遇到的问题是在检索数据后定义 DataContext，以便我可以为每个 UserControls 中的 Dependency 属性定义绑定路径。如果我将网格的 DataContext 设置为 DataTable，如下所示：

```
Grid.DataContext = myDataTable; 
```

那么 UserControl 属性的绑定路径的语法是什么？

```
<my:ucControl Name="myUserControl1" MyDependencyProp="{Binding Path=??}" Grid.Column="1" Grid.Row="1" /> 
```

我看过一些帖子，其中有些人使用了“Row[0][column_name]”或其变体，但我似乎无法得到类似的东西。我接近绑定方法错了吗？

这是我的用户控件代码：

```
 public partial class ucControl : UserControl, INotifyPropertyChanged
 {

    public event PropertyChangedEventHandler PropertyChanged;

    public static DependencyProperty IndexProperty =
        DependencyProperty.Register("Index", typeof(int), typeof(ucControl));

    public static DependencyProperty StatusProperty =
        DependencyProperty.Register("Status", typeof(String), typeof(ucControl),
        new PropertyMetadata(string.Empty, new       PropertyChangedCallback(NotifyPropertyChanged)));

    #region PublicProperties

    public int Index
    {
        get { return (int)GetValue(IndexProperty); }
        set { SetValue(IndexProperty, value); }
    }

    public String Status
    {
        get { return (int)GetValue(StatusProperty); }
        set { SetValue(StatusProperty, value); }
    }

#endregion
} 
```

这是 XAML：

```
<Grid Canvas.Left="17" Canvas.Top="46" Name="MasterGrid" Width="1259" HorizontalAlignment="Left" VerticalAlignment="Top">
            <Grid.RowDefinitions>
            <RowDefinition Name="ColumnHeader" Height="25" />
            <RowDefinition Height="40" />
            <RowDefinition Height="40" />
            <RowDefinition Height="40" />
            </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Name="DateColumn" Width="80"/>
            <ColumnDefinition Width="65"/>
            <ColumnDefinition Width="65"/>
            <ColumnDefinition Width="65"/>
        </Grid.ColumnDefinitions>
            <my:ucControl Name="myControl1" Index="{Binding ??}" Status="{Binding ??}" Grid.Column="1" Grid.Row="1" Grid.RowSpan="1" />
            <my:ucControl Name="myControl2" Index="{Binding ??}" Status="{Binding ??}" Grid.Column="1" Grid.Row="2" Grid.RowSpan="1" />
            <my:ucControl Name="myControl3" Index="{Binding ??}" Status="{Binding ??}" Grid.Column="1" Grid.Row="2" Grid.RowSpan="1" />
        </Grid> 
```

这是我的 C#：

```
String strViewSelect = "SELECT index, status, FROM Table1 ORDER BY index ASC;
System.Data.DataSet dsMonthData = dataClass.mFillDataset(strViewSelect);

MasterGrid.DataContext = dsMonthData; 
```

更新：这是我解决此问题的方法：

首先，我在我的项目中创建一个静态数据源，其中包含我要绑定到的列。向查询添加参数，以便我可以指定要检索的数据。

在我的窗口中将以下内容添加到 XAML：

```
 <Window.Resources>
    <my1:myDataSet x:Key="myDataSet" />
    <CollectionViewSource x:Key="tableNameViewSource" Source="{Binding Path=tableName, Source={StaticResource myDataSet}}" />
</Window.Resources> 
```

接下来，我将以下 XAML 添加到我的网格中：

```
DataContext="{StaticResource tableNameViewSource}" 
```

现在，我可以将绑定添加到我的 UserControl 属性：

```
Status="{Binding Path=statusColumn}"

<my:ucCalendarCell Name="ucControl1" Status="{Binding Path=statusColumnName}" Index="{Binding Path=indexColumnName}" Grid.Column="1" Grid.Row="1" Grid.RowSpan="1" /> 
```

剩下一点工作来满足我的需要，但这是基本的想法。我很肯定这不仅仅是一种方法，但这应该对我有用。

# windows - 是否安排了系统调用？

> ID：14185574
> 
> 赞同：2
> 
> 时间：2013-01-06T18:55:06.243
> 
> 标签：windows, system-calls

当用户进程调用“系统调用”并且CPU切换到主管模式时，哪个系统进程负责执行系统调用？

系统调用是否由线程调度程序调度（CPU 是否可以在中断后切换到执行另一个系统调用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:08:43.790

哪个系统进程负责执行系统调用？
系统调用包装器（您调用以执行系统调用的函数，是的，它只是一个包装器，而不是实际的系统调用）将获取参数，将它们传递给适当的寄存器（或在堆栈上，取决于实现），然后它将您请求的系统调用号放入`eax`（假设x86），最后将调用`INT 0x80`汇编指令，该指令基本上告诉操作系统它收到了一个中断，这个中断是一个需要服务的系统调用，哪个系统调用serve 在 中可用，`eax`参数在寄存器中。

（现代实现停止使用`INT`，因为它的性能昂贵，现在使用`SYSENTER`and `SYSEXIT`；尽管上面仍然几乎相同）

从调度器的角度来看，是否执行系统调用没有区别；问题是，一旦您向操作系统请求服务（通过 x86 指令`INT`或`SYSENTER`and `SYSEXIT`），CPU 模式标志将更改为特权集，然后内核将代表您的进程执行您要求的任务，一旦完成，它设置标志并将执行返回到下一条指令。

因此，从调度程序的角度来看，当您执行系统调用或其他任何操作时，操作系统不会看到任何差异。

几点注意事项：-
我上面提到的是一般描述，我不确定 Windows 是否应用了这个，但如果没有，它应该做一些类似的事情。
- 许多系统调用执行阻塞任务（如 I/O 处理）；如果您的进程要求阻塞系统调用，为了提高 CPU 利用率，调度程序将让您的进程在等待队列中等待，直到它请求的内容准备好，同时其他进程在 CPU 上运行但不要将其与任何东西混淆，操作系统没有“安排系统调用”。

调度器的任务是组织任务，从它的角度来看，系统调用只是进程正在执行的一个例程。

最后一点，一些系统调用是原子的，这意味着它们应该在没有任何中断的情况下执行，如果这些系统调用被中断，一旦中断原因结束，将被要求重新开始执行；这仍然与调度概念相去甚远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:10:34.860

第一个问题：这取决于。一些系统调用会转到已经作为进程运行的服务（比如网络调用）。一些系统调用会导致创建一个新进程，然后安排执行。

最后一个问题：是的，windows 是一个多处理系统。进程调度程序处理线程何时运行，运行多长时间，硬件中断最终可能导致正在运行的进程释放 CPU 或硬件现在准备好获取 CPU 的空闲进程。

在 Windows 中（至少 > Win 7，但我认为过去也是如此）许多系统服务在称为 svchost 的进程中运行。用于查看正在运行的一个很好的应用程序是来自 sys internals 的 Process Explorer。它就像类固醇上的任务管理器，将向您显示给定进程拥有的所有线程。对于更细粒度的“我将这个 dos 命令称为发生了什么”的详细信息，您可能需要使用调试工具，您可以在其中逐步完成您的调用。通常，尽管您不必关心这些事情，但您进行系统调用，系统知道您还没有准备好继续处理，直到处理该请求的任何进程返回。您的请求可能会在您的进程释放它后立即获得 CPU，

# android - 创建 Android 仿真应用程序 例如：电路应用程序

> ID：14185575
> 
> 赞同：-1
> 
> 时间：2013-01-06T18:55:07.480
> 
> 标签：android

所以我对android应用程序开发真的很陌生，我遇到了电路应用程序，需要知道如何使用可以模拟连接的工作区创建这样的应用程序，

有人可以指导我从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:41:52.767

有一个非常有趣的基于 Java 的 SimCir 数字电路模拟器，我想可能是 MIT 许可，检查一下。项目页面在[这里，](http://www.d-project.com/simcir/index.html)[这里](http://www.ultrastudio.org/en/Category%3aProject%3aSimCir)还有一个带有许多示例电路的分支。初始版本不是基于 Swing 的，因此可以通过一些努力进行移植。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:01:01.350

最好的方法是从例子中学习（边做边学）

[在https://developer.android.com/training/index.html](https://developer.android.com/training/index.html)之类的页面上， 您会发现很多有关编程的信息

或者你可以买书阅读

最好的方法是从一个像计算器这样的小应用程序开始接触 Android 和 Eclipse。

我希望这有帮助

# java - 使用 CORS 的跨域 ajax 请求

> ID：14185576
> 
> 赞同：2
> 
> 时间：2013-01-06T18:55:10.047
> 
> 标签：java, javascript, jquery, ajax, rest

我正在尝试通过 javascript 发布到我的**跨域****休息服务**，并意识到除非我使用此规范，否则这是不可能的；

[http://www.w3.org/wiki/CORS_Enabled](http://www.w3.org/wiki/CORS_Enabled)

但是我如何实现这一点的文档非常有限，我有几个问题；

1- 我使用**Glassfish Jee6**应用服务器，所以我可以简单地在我的 web.xml 中添加一个**码头过滤器并完成工作吗？**

2-对于客户端（移动网站），是否有任何有助于实现此规范的 javascript 库？我还能在 JQuery 中使用现有的 ajax 函数还是需要更具体的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:03:37.977

码头过滤器：

```
<web-app>
 <filter>
   <filter-name>cross-origin</filter-name>
   <filter-class>org.eclipse.jetty.servlets.CrossOriginFilter</filter-class>
   <init-param>
       <param-name>allowedOrigins</param-name>
       <param-value>*</param-value>
   </init-param>
   <init-param>
       <param-name>allowedMethods</param-name>
       <param-value>*</param-value>
   </init-param>
   <init-param>
       <param-name>allowedHeaders</param-name>
       <param-value>*</param-value>
   </init-param>
 </filter>
 <filter-mapping>
     <filter-name>cross-origin</filter-name>
     <filter-pattern>*</filter-pattern>
 </filter-mapping>
</web-app> 
```

# .net - 创建模糊屏幕截图的屏幕截图代码

> ID：14185579
> 
> 赞同：1
> 
> 时间：2013-01-06T18:55:21.297
> 
> 标签：.net, vb.net, winforms, image, bitmap

我一直在我的程序中使用图像识别，并一直认为这是我的应用程序中实际图像识别代码的问题。在深入研究之后，我意识到我用来创建屏幕截图的代码，屏幕的全屏和部分矩形都在创建模糊图像。图像模糊且像素化。

我通常不保存图像，我只是使用内存中的位图进行图像识别检查。虽然以多种格式保存这些屏幕截图后，我可以看到问题。

这是我用来生成屏幕截图的代码。第一个函数创建一个完整的屏幕截图，第二个函数从屏幕上的坐标创建一个。

```
 Public Shared Function GetScreen() As Bitmap
    Dim screenSize As Size = New Size(My.Computer.Screen.Bounds.Width, My.Computer.Screen.Bounds.Height)
    Dim screenGrab As New Bitmap(My.Computer.Screen.Bounds.Width, My.Computer.Screen.Bounds.Height)
    Using g As Graphics = Graphics.FromImage(screenGrab)
        g.CopyFromScreen(New Point(0, 0), New Point(0, 0), screenSize)
        Return screenGrab
    End Using
End Function

  Public Shared Function 
    GetScreenXY(TopLeft As Point, BottomRight As Point) As Bitmap
    Dim w As Integer = BottomRight.X - TopLeft.X
    Dim h As Integer = BottomRight.Y - TopLeft.Y
    Dim screenGrab As New Bitmap(w, h)   'width and height of the rectangle you want to grab
    Using g As Graphics = Graphics.FromImage(screenGrab)
        g.CopyFromScreen(TopLeft, New Point(0, 0), screenGrab.Size)
        Return screenGrab
    End Using
End Function 
```

我最近添加的应用程序中还有一个屏幕截图工具。它有一个可以调整大小的表格，它可以截屏并保存它。这些也很模糊。它使用第二个功能。

```
 Visible = False
        Dim screenShot As Bitmap = ImageFinder.GetScreenXY(New Point(Left, Top), New Point(Right, Bottom))
        Dim sfd As New SaveFileDialog
        sfd.Filter = "Jpeg image (*.jpg)|*.jpg|Bitmap image (*.bmp)|*.bmp| PNG image (*.png)|*.png"
        sfd.Title = "Save image"
        If sfd.ShowDialog() = DialogResult.OK Then
            If sfd.FileName <> String.Empty Then
                'Set to Jpeg by default.
                Dim MyImageFormat As System.Drawing.Imaging.ImageFormat = System.Drawing.Imaging.ImageFormat.Jpeg
                If sfd.FileName.ToString.ToUpper.EndsWith("JPG") Then
                    MyImageFormat = System.Drawing.Imaging.ImageFormat.Jpeg
                ElseIf sfd.FileName.ToString.ToUpper.EndsWith("BMP") Then
                    MyImageFormat = System.Drawing.Imaging.ImageFormat.Bmp
                ElseIf sfd.FileName.ToString.ToUpper.EndsWith("PNG") Then
                    MyImageFormat = System.Drawing.Imaging.ImageFormat.Png
                End If
                screenShot.Save(sfd.FileName, MyImageFormat) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:32:10.643

这是我截取屏幕截图的方式，它非常好，我想我会与你分享。

```
 'Declare my constants here for screenshots'
Private Declare Sub keybd_event Lib "user32" (ByVal bVk As Byte, ByVal bScan As Byte, ByVal dwFlags As Integer, ByVal dwExtraInfo As Integer)
Private Const VK_SNAPSHOT As Short = &H2CS

'Create my function to take the picture of the screen'
Public Function SaveScreen(ByVal theFile As String) As Boolean
    Try
        Dim data As IDataObject
        data = Clipboard.GetDataObject()
        Dim bmap As Bitmap
        If data.GetDataPresent(GetType(System.Drawing.Bitmap)) Then
            bmap = CType(data.GetData(GetType(System.Drawing.Bitmap)), Bitmap)
            Me.picScreen.Image = bmap
            Me.picScreen.Image.Save(theFile, Imaging.ImageFormat.Jpeg)
        End If
    Catch s As Exception
    End Try
End Function 
```

现在让我们保存这张照片...

```
 Private Sub btnSavePic_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSavePic.Click
    Try

            Call keybd_event(System.Windows.Forms.Keys.Snapshot, 0, 0, 0)
            System.Threading.Thread.Sleep(200) ' To have time to catch the clipboard
            SaveScreen("YOURFILELOCATION" & Format(Now, "MM-dd-yyyy ") & " " & Format(TimeOfDay, "hhmmss") & ".bmp")

    Catch w As Exception
    End Try
End Sub 
```

试一试，当我不在时，我用它来向我报告我的屏幕......

# php - 在 wordpress 中创建 ajax 调用。我必须包括什么才能访问 wordpress 功能

> ID：14185582
> 
> 赞同：3
> 
> 时间：2013-01-06T18:55:29.953
> 
> 标签：php, ajax, wordpress

我正在我的 wordpress 中执行一个 jquery ajax 请求。这调用了一个内部 php 脚本。这个 php 脚本需要能够访问某些 wordpress 功能，例如...functions.php，这对我来说很简单。我不能做的是访问当前 wordpress 用户 $wpdb 对象之类的信息。我的问题是......是否有一些我可以包含的 wordpress 文件让我可以访问所有这些数据（和 functions.php）。我希望您了解我正在访问的内容，因为我知道这可能是世界上最糟糕的解释：D

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T19:01:35.670

**糟糕的**方式（正如其他人指出的那样）

当我创建一些自定义 PHP 以与 wordpress 一起使用时，我包含了该`wp-load.php`文件。然后加载所需的所有内容，包括`$wpdb`.

```
require_once('wp-load.php'); // relative path from your PHP file

global $wpdb;
$wpdb->show_errors = TRUE; // useful for when you first start 
```

我发现这是快速修复的一个不错的起点。但是，您必须记住，这将加载比您实际需要的更多的功能。从而导致性能时间变慢。

**好方法**

一旦功能变得更加复杂，“糟糕”的实现就不会那么好了。所以我转而写插件。WordPress codex 包含有关使用 AJAX 和插件的良好信息：http: [//codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)

在最基本的形式中，您需要注册您的 AJAX 钩子：

```
// 'wp_ajax_foo' is the hook, 'foo' is the function that handles the request
add_action( 'wp_ajax_foo', 'foo'); 
```

您还需要相应的功能（在这种情况下`foo`）：

```
function foo() {
    // handle the AJAX request
    $bar = $_POST['bar'];
} 
```

然后在您的 JavaScript 中确定要与该`action`属性一起使用的钩子，但忽略该`wp_ajax`部分：

```
$.post(ajaxurl, { action: 'foo', bar: true }, function(response) {
    // do something with response
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T20:06:51.093

我通常会设置一个动作挂钩`functions.php`来侦听基于前缀的 AJAX 请求，例如“wp_ajax_*”。您还需要`wp-load.php`在 javascript 中引用，可以使用`wp_head`. 设置完成后，只需在您的 AJAX 请求中使用一个名为“action”的变量来指示您要使用的功能。

```
// add javascript reference to wp-load.php as ajaxurl
function core_add_ajax_url(){
    ?>
    <script type="text/javascript">var ajaxurl = "<?php echo site_url( 'wp-load.php' ); ?>";</script>
    <?php 
}
add_action('wp_head', 'core_add_ajax_url', 1 );

// process all wp_ajax_* calls
function core_add_ajax_hook() {
    /* Theme only, we already have the wp_ajax_ hook firing in wp-admin */
    if ( !defined( 'WP_ADMIN' ) && isset($_REQUEST['action']) ){
        do_action( 'wp_ajax_' . $_REQUEST['action'] );
    }
}
add_action( 'init', 'core_add_ajax_hook' );

// Hook your function to the 'wp_ajax_*' for processing
function my_function(){
    // do some things and then return JSON
}
add_action( 'wp_ajax_my_function', 'my_function' ); 
```

您的 Javascript 请求将类似于以下内容：

```
jQuery.postJSON( 
    ajaxurl, // request url
    { action: 'my_function' }, // request parameters
    function (response){ // callback
        // handle the response
    }
); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-06T20:10:03.067

`admin-ajax.php`WordPress 中的 AJAX 请求通常通过目录上文件中的特殊挂钩发送`wp-admin`。从那里您将可以访问所有 WP 功能。

[这是一个很好的起点](http://wp.smashingmagazine.com/2011/10/18/how-to-use-ajax-in-wordpress/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T13:23:00.647

您永远不能包括 wp-load.php 或 wp-config.php - 这是一种不好的做法，本文解释了原因： http: [//ottodestruct.com/blog/2010/dont-include-wp-load-请/](http://ottodestruct.com/blog/2010/dont-include-wp-load-please/)。此外，Wordpress.org 团队不建议直接包含任何 Wordpress 核心文件。

相反，您可以利用 admin-ajax.php 的功能——不要被“admin”部分所欺骗——它在前端和后端脚本中都使用。这是一个例子：[http ://wp.smashingmagazine.com/2011/10/18/how-to-use-ajax-in-wordpress/](http://wp.smashingmagazine.com/2011/10/18/how-to-use-ajax-in-wordpress/)

# iphone - 在 iPhone 上将经度/纬度转换为 x/y

> ID：14185584
> 
> 赞同：6
> 
> 时间：2013-01-06T18:55:45.227
> 
> 标签：iphone, ios, math, coordinates, latitude-longitude

我在 UIImageView 中显示图像，我想将坐标转换为 x/y 值，以便可以在此图像上显示城市。这是我根据我的研究尝试的：

```
CGFloat height = mapView.frame.size.height;
CGFloat width = mapView.frame.size.width;

 int x =  (int) ((width/360.0) * (180 + 8.242493)); // Mainz lon
 int y =  (int) ((height/180.0) * (90 - 49.993615)); // Mainz lat

NSLog(@"x: %i y: %i", x, y);

PinView *pinView = [[PinView alloc]initPinViewWithPoint:x andY:y];

[self.view addSubview:pinView]; 
```

这给了我 167 作为 x 和 y=104 但这个例子应该有值 x=73 和 y=294。

mapView 是我的 UIImageView，只是为了澄清。

所以我的第二次尝试是使用 MKMapKit：

```
CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(49.993615, 8.242493);
MKMapPoint point = MKMapPointForCoordinate(coord);
NSLog(@"x is %f and y is %f",point.x,point.y); 
```

但这给了我一些非常奇怪的值：x = 140363776.241755，y 是 91045888.536491。

那么你知道我必须做什么才能让它工作吗？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T20:03:43.123

要完成这项工作，您需要了解 4 条数据：

1.  图片左上角的经纬度。
2.  图片右下角的经纬度。
3.  图像的宽度和高度（以磅为单位）。
4.  数据点的纬度和经度。

使用该信息，您可以执行以下操作：

```
// These should roughly box Germany - use the actual values appropriate to your image
double minLat = 54.8;
double minLong = 5.5;
double maxLat = 47.2;
double maxLong = 15.1;

// Map image size (in points)
CGSize mapSize = mapView.frame.size;

// Determine the map scale (points per degree)
double xScale = mapSize.width / (maxLong - minLong);
double yScale = mapSize.height / (maxLat - minLat);

// Latitude and longitude of city
double spotLat = 49.993615;
double spotLong = 8.242493;

// position of map image for point
CGFloat x = (spotLong - minLong) * xScale;
CGFloat y = (spotLat - minLat) * yScale; 
```

如果`x`or`y`为负数或大于图像大小，则该点不在地图上。

这个简单的解决方案假设地图图像使用基本的圆柱投影（墨卡托），其中所有经纬度线都是直线。

编辑：

要将图像点转换回坐标，只需反转计算：

```
double pointLong = pointX / xScale + minLong;
double pointLat = pointY / yScale + minLat; 
```

where`pointX`和`pointY`表示屏幕点中图像上的一个点。(0, 0) 是图像的左上角。

# ios - iAd 仅在特定国家/地区提供

> ID：14185587
> 
> 赞同：1
> 
> 时间：2013-01-06T18:56:01.290
> 
> 标签：ios, ios5, admob, iad, adwhirl

我已经设置了一个带有广告横幅的测试应用程序。广告横幅是使用 AdWhirl 设置的，我使用 iAd 和 AdMob。

该应用程序工作正常，运行无错误。我现在希望仅针对其可用的特定国家/地区设置 iAd。

在 iAd 文档中，它声明

> iAd Network 最近在加拿大推出。广告现已在美国、加拿大、英国、德国、意大利、西班牙、法国和日本 App Store 的应用程序中提供。请务必将您的应用配置为仅在这些国家/地区投放广告。

如何将应用程序配置为仅向使用 adWhirl 的这些国家/地区的用户显示 iAd？我想第一点是确定当时哪个广告网络正在投放广告，这可能吗？这是我的视图控制器 h 和 m 如果有任何用处，但它目前只是一个用于测试的横幅。

也可以测试这实际上是否正常工作？您可以将手机模拟器更改为就好像它来自另一个国家一样？

```
#import <UIKit/UIKit.h>

@interface AdTestViewController : UIViewController <AdWhirlDelegate> {
    AdWhirlView *adView;
}

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic,retain) AdWhirlView *adView;

@end 
```

小鬼文件

```
#import "AdTestViewController.h"
#import "Constants.h"
#import "AdTestAppDelegate.h"
#import "AdWhirlView.h"

@interface AdTestViewController ()

@end

@implementation AdTestViewController

@synthesize adView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.adView = [AdWhirlView requestAdWhirlViewWithDelegate:self];
    self.adView.autoresizingMask =
    UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin;
    [self.adView setDelegate:self];
    [self.view addSubview:self.adView];
    NSLog(@"Ad View Added");
}

#pragma mark - Delegate Methods
- (NSString *)adWhirlApplicationKey {
    NSLog(@"adWhrilApplicationKey");
    return kSampleAppKey;
}

- (UIViewController *)viewControllerForPresentingModalView {
    NSLog(@"viewControllerForPresentingModalView");
    return self;

}

- (void)adWhirlDidReceiveAd:(AdWhirlView *)adWhirlView {
    NSLog(@"adWhrilDidReceiveAd");
    // Used to animate the ad from the top to bottom 
    //[UIView beginAnimations:@"AdWhirlDelegate.adWhirlDidReceiveAd:" context:nil];
    //[UIView setAnimationDuration:0];

    CGSize adSize = [adWhirlView actualAdSize];
    CGRect newFrame = adWhirlView.frame;
    newFrame.size = adSize;
    newFrame.origin.x = (self.view.bounds.size.width - adSize.width)/ 2;
    newFrame.origin.y=  self.view.frame.size.height - adSize.height;
    adWhirlView.frame = newFrame;

    [UIView commitAnimations];
}

-(void)adWhirlDidFailToReceiveAd:(AdWhirlView *)adWhirlView usingBackup:(BOOL)yesOrNo {

}

@end 
```

AdWhril 设置 ![在此处输入图像描述](../Images/8c16a8f87a716ec8aecf2ec15bcef484.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:18:42.827

adWhirl 已弃用，中介功能现已在最后一个 adMob SDK 中可用。使用它，您可以将广告提供商的广告百分比转换为在不同国家/地区展示。查看 adMob 网站上的文档。

# php - 基于从 php 文件中提取的数据单击链接刷新 div

> ID：14185591
> 
> 赞同：0
> 
> 时间：2013-01-06T18:56:29.767
> 
> 标签：php, jquery, html, ajax

我有一个图像滚动器，其中包含一系列图像。这些图像是从数据库中提取出来的。滚动条上方是文件夹列表。

当用户单击新文件夹时，我希望在不刷新页面的情况下更新图像列表。我曾尝试使用 ajax 进行此操作，但它让我有点困惑并且根本不起作用。这是我到目前为止所得到的

首先是默认的 html/php 页面

现在那里的图像只是为了测试。这些将是编写查询时没有文件夹中的默认图像

**about.php** 文件夹列表

```
 <div id="folders">
    <ul id="foldername">

        <li><a href="javascript:void(0);" onclick="getImages()">test0</a></li>
        <li><a href="javascript:void(0);" onclick="getImages(1)">test1</a></li>
        <li><a href="javascript:void(0);" onclick="getImages(2)">test2</a></li>
    </ul>
  </div> 
```

然后是滚动条

```
 <div id="scrolimg">
    <img name="" src="" width="150" height="150" alt="" class="singlscrolimg" />

  </div> 
```

**获取图像.php**

```
 include('../Connections/dbcon.php');
   mysql_select_db($database_dbcon, $dbcon);
   $query_rs_image = "SELECT * FROM images WHERE imgfolder='".$_GET['id']."' AND     status='1'";
   $rs_image = mysql_query($query_rs_image, $dbcon) or die(mysql_error());
   $row_rs_image = mysql_fetch_assoc($rs_image);
   $totalRows_rs_image = mysql_num_rows($rs_image);

 do { ?>

 <img name="<?php echo $row_rs_image['imgname']; ?>" src="/images/uploads/<?php echo $row_rs_image['smfile']; ?>"  alt="<?php echo $row_rs_image['imgname']; ?>" />
  <?php } while ($row_rs_image = mysql_fetch_assoc($rs_image)); ?> 
```

在 about.php 的顶部

```
 <script>

   function getImages(id)
    {
     $.ajax({

      type: "GET",
      url: 'getImage.php',
      data: "id=" + id, 
      success: function(data) {

      $('#scrolimg').html(data);
     }

     });

  }
  </script> 
```

# r - 具有分组回归线的叠加 xyplot 面板

> ID：14185600
> 
> 赞同：6
> 
> 时间：2013-01-06T18:57:21.607
> 
> 标签：r, lattice

我想在格子中的一个面板上叠加多个组，并想要独立的回归线。

通过使用条件因子获得多个面板相当容易，每个面板都有一条回归线：

```
xyplot(
  Petal.Width  ~ Petal.Length | Species,
  data = iris,
  panel = function(x, y, ...) {
    panel.xyplot(x, y, ...)
    panel.abline(lm(y~x), col='#0080ff')
  },
  grid = TRUE
) 
```

![在此处输入图像描述](../Images/dcc196b510e7f7d5d3a25dd87b108c31.png)

为叠加的 xyplot 中的所有点打印单个回归也相当容易：

```
xyplot(
  Petal.Width ~ Petal.Length,
  data = iris,
  groups = Species,
  panel = function(x, y, ...) {
    panel.xyplot(x, y, ...)
    panel.abline(lm(y~x))
  },
  grid = TRUE,
  auto.key = list(title='Species', space='right')
) 
```

![在此处输入图像描述](../Images/1ba3d357626defaa5a9a79a8e9d1a20c.png)

但这不是我需要的。我会输入一个答案，但它似乎很乱。也许这就是野兽的本性。

我正在寻找更容易理解的东西。Lattice 是首选，但也可以接受一个好的 ggplot 解决方案。如果不清楚，我正在制作供 Excel 用户使用的绘图。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T18:57:58.753

这是我想出的：

```
xyplot(
  Petal.Width  ~ Petal.Length,
  groups = Species,
  data = iris,
  panel = function(x, y, ...) {
    panel.superpose(x, y, ...,
                    panel.groups = function(x,y, col, col.symbol, ...) {
                      panel.xyplot(x, y, col=col.symbol, ...)
                      panel.abline(lm(y~x), col.line=col.symbol)
                    }
    )
  },
  grid = TRUE,
  auto.key = list(title='Species', space='right')
) 
```

![在此处输入图像描述](../Images/2cbc1a930381f7f2ae318928f5cf5b90.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T08:35:39.150

*您可以使用type*参数让 Lattice 为您完成面板工作

```
xyplot(Petal.Width  ~ Petal.Length, groups = Species, data = iris, 
     type = c('p','r','g'),  
     auto.key = list(title='Species', space='right')) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-12T09:28:42.153

看来您可以将其简化为

```
xyplot(
  Petal.Width  ~ Petal.Length,
  groups = Species,
  data = iris,
  panel = panel.superpose, # must for use of panel.groups
  panel.groups=function(x, y, col, col.symbol, ...) {
                      panel.xyplot(x, y, col=col.symbol, ...)
                      panel.lmline(x, y, col.line=col.symbol)
  },
  grid = TRUE,
  auto.key = list(title='Species', space='right')
) 
```

# php - 使用 PHP/Ajax 在 Jquery Lightbox 中获取结果

> ID：14185603
> 
> 赞同：2
> 
> 时间：2013-01-06T18:57:35.163
> 
> 标签：php, javascript, jquery, sql, ajax

我正在尝试使用 AJAX 从数据库中获取信息（`u_name`和`u_email`）到 JQuery 灯箱中。我在使用 Ajax 部分时遇到问题。我的`HTML`结构是：

```
<div class="boxes">
    <a href="#" id="showe3" class="button lfloat">Show it</a>
</div>
<div class="boxes">
    <a href="#" id="showe4" class="button lfloat">Show it</a>
</div> 
```

因此，用户单击`id`数据库表中匹配的其中一个，并获取结果。

Javacript 代码是：

```
$(function() {
    $('#id').ecko({  //ecko is a JQuery lightbox function which im using
        height: 200,
        holderClass: 'custom',
        template: '<p>About</p>' +
        '<div>' +
        '<a href="#" target="_blank" class="b1">u_name</a>' +
        '<a href="#" target="_blank" class="b2">u_email</a>' +
        '<a href="#" target="_blank" class="b2">More</a>' +
        '</div>'
    });
}); 
```

将`Ajax`是：

```
 $.ajax({                                      
    url: 'functions/db.php',                        
    data: "",
    dataType: 'json',     
    success: function(data){
        var name = data[0];
        var email = data[1];

        //What should be here??

    } }); 
```

`PHP`代码将如下所示：

```
 $result = mysql_query("SELECT * FROM $tableName WHERE `id` = " what should be written here? "); 
    $array = mysql_fetch_row($result);   

    echo json_encode($array); 
```

我已经发布了我尝试过的所有内容。我不知道如何连接`id`clicked 以将其传递到id`php`行，然后连接 Ajax 和 Jquery 灯箱。`$result = mysql_query("SELECT * FROM $tableName WHERE``= "")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:08:13.367

当有人点击按钮时，将 ID 传递给 ajax 中的 data 选项，并在服务器端获取它：

```
$('.button').on('click', function() {
    $.ajax({
        type: 'POST',                              
        url: 'functions/db.php',                        
        data: {id: this.id},
        dataType: 'json'
    }).done(function(data) {
        $('#id').ecko({
            height: 200,
            holderClass: 'custom',
            template: '<p>About</p>' +
                '<div>' +
                '<a href="#" target="_blank" class="b1">'+data[0]+'</a>' +
                '<a href="#" target="_blank" class="b2">'+data[1]+'</a>' +
                '<a href="#" target="_blank" class="b2">More</a>' +
                '</div>'
        });
    });

}); 
```

然后使用标记中的数据，但只有在 ajax 调用完成后才能这样做。

PHP

```
$id = $_POST['id'];
$result = mysql_query("SELECT * FROM $tableName WHERE `id` = " $id); 
```

考虑转移到 PDO，因为 mysql 已被弃用！

# sql - PostgreSQL 中视图的触发器

> ID：14185604
> 
> 赞同：4
> 
> 时间：2013-01-06T18:57:40.433
> 
> 标签：sql, postgresql, triggers, plpgsql, sql-view

我想在 PostgreSQL 中为我的视图创建一个触发器。这个想法是所有新数据都必须满足要插入的条件。但是这里出了点问题，我在手册中找不到答案。

```
CREATE OR REPLACE VIEW My_View AS 
SELECT name, adress, count FROM club, band, country;

CREATE OR REPLACE FUNCTION insert() RETURNS TRIGGER AS $$
BEGIN
    IF(NEW.count > 10) THEN
    INSERT INTO My_View VALUES (NEW.name, NEW.adress, NEW.count);
    END IF;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER insert INSTEAD OF INSERT ON My_View
FOR EACH ROW EXECUTE PROCEDURE insert(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T20:26:27.233

*   函数中的语句末尾缺少分号 ( **; )。**`INSERT`

*   `insert`是 SQL 标准中的[**保留字**](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)，不应用作触发器或函数名称。即使在 PostgreSQL 中允许这样做，这也是一个*非常*糟糕的主意。

*   `club, band, country`视图定义中的三个表没有连接条件。这会导致 a `CROSS JOIN`，这可能**非常昂贵**。如果每个表中有**1000**行，您将获得**1,000,000,000**个组合。你绝对不希望那样。

*   此外，您应该对视图定义中的列进行表限定以避免歧义。

```
CREATE OR REPLACE VIEW my_view AS 
SELECT ??.name, ??.address, ??.mycount
FROM club    cl
JOIN band    ba ON ?? = ??
JOIN country co ON ?? = ??; 
```

你需要填写我留下问号的地方。

*   并始终将列定义列表添加到您的`INSERT`语句中。

*   最后，您**不想**再次`INSERT`进入同一个视图，这会造成无限循环，并且可能是导致错误的主要原因。

```
CREATE OR REPLACE FUNCTION f_insert()
  RETURNS TRIGGER AS
$func$
BEGIN
   IF NEW.mycount > 10 THEN
      INSERT INTO ~~my_view~~ ???? (col1?, col2?, col3?)
      VALUES (NEW.name, NEW.address, NEW.mycount);
   END IF;
END
$func$ LANGUAGE plpgsql;
```

顺便说一句，您也不应该将`count`其用作标识符。我`mycount`改用。

# mysql - MySQL - 一对多连接语句返回重复项

> ID：14185606
> 
> 赞同：1
> 
> 时间：2013-01-06T18:57:51.180
> 
> 标签：mysql, duplicates, left-join

我有一张`tbl_customers`桌子。（像许多人一样）

我有第二张桌子： `tbl_customers_tags`

这张表只是让我为单个客户记录存储无限的关键字/标签。这是列结构：

```
`tbl_customers_tags`

+-------------+---------------------+------+-----+---------+----------------+
| Field       | Type                | Null | Key | Default | Extra          |
+-------------+---------------------+------+-----+---------+----------------+
| ID          | int(11) unsigned    | NO   | PRI | NULL    | auto_increment |
| customerid  | int(11) unsigned    | NO   | MUL | NULL    |                |
| tagid       | mediumint(5)unsigned| NO   |     | NULL    |                | 
```

* * *

因此，我现在需要通过查找具有特定 tagid 的任何客户记录来提取一些报告。我得到重复。这是我当前的查询语句：

```
SELECT  c.firstname, c.lastname, c.datecreated  
FROM `tbl_customers` c 
LEFT JOIN `tbl_customers_tags` ctags ON c.customerid = ctags.customerid 
WHERE ctags.tagid IN(2,3,15) 
```

当单个记录`customerid`与多个`tagid`记录相关联时，有没有办法不返回重复项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:12:45.497

尝试这个

```
SELECT  c.firstname, c.lastname, c.datecreated  
FROM 'tbl_customers' c 
where exists
( select 'x' from tbl_customers_tags where customerid = c.customerid and
tagid IN(2,3,15)
) 
```

如果您只对在标签表中有记录的客户感兴趣，为什么不进行完全连接而不是左连接呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:00:56.643

```
SELECT  distinct c.firstname, c.lastname, c.datecreated  
FROM `tbl_customers` c 
LEFT JOIN `tbl_customers_tags` ctags ON c.customerid = ctags.customerid 
WHERE ctags.tagid IN(2,3,15) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T19:02:55.953

如果你真的不关心重复，你可以使用`DISTINCT`关键字。此外，您不需要执行 a ，`LEFT OUTER JOIN`因为您有一个`WHERE`依赖于另一个表的子句。像这样的东西：

```
SELECT  DISTINCT c.firstname, c.lastname, c.datecreated  
FROM `tbl_customers` c 
JOIN `tbl_customers_tags` ctags 
ON c.customerid = ctags.customerid 
WHERE ctags.tagid IN (2,3,15) 
```

# c++ - 不要在 Linux 中使用 C++ 对 IPv6 数据包进行分段标记

> ID：14185610
> 
> 赞同：4
> 
> 时间：2013-01-06T18:58:13.040
> 
> 标签：c++, ipv6, icmp

我无法为 IPv6/ICMPv6 数据包设置“不分段”标志。我正在做 PMTUD，我想强制路由器丢弃比 MTU 更大的数据包。使用带有 IPV6_MTU_DISCOVER 的 setsockopt 不起作用。

```
int on = IPV6_PMTUDISC_DO; // tried also IPV6_PMTUDISC_PROBE
setsockopt(socket, IPPROTO_IPV6, IPV6_MTU_DISCOVER, &on, sizeof(on)); 
```

结果： ![线鲨](../Images/b7fb74ded17f8e2018c161652dc9fb2e.png)

我也不能按照*Unix-Linux Addison-Wesley - Stevens2003 - Unix Network Programming*`IPV6_DONTFRAG`中的描述使用 setosckopt，因为我包含了标头并在. 包含在我的源代码中会导致这些重新定义错误。*`netinet/in6.h``IPV6_DONTFRAG``linux/in6.h``linux/in6.h`*

 *```
In file included from mypmtud.cc:30:0: /usr/include/linux/in6.h:30:8: error: redefinition of ‘struct in6_addr’ In file included from /usr/include/netdb.h:28:0,
                 from mypmtud.cc:23: /usr/include/netinet/in.h:198:8: error: previous definition of ‘struct in6_addr’ In file included from mypmtud.cc:30:0: /usr/include/linux/in6.h:46:8: error: redefinition of ‘struct sockaddr_in6’ In file included from /usr/include/netdb.h:28:0,
                 from mypmtud.cc:23: /usr/include/netinet/in.h:239:8: error: previous definition of ‘struct sockaddr_in6’ In file included from mypmtud.cc:30:0: /usr/include/linux/in6.h:54:8: error: redefinition of ‘struct ipv6_mreq’ In file included from /usr/include/netdb.h:28:0,
                 from mypmtud.cc:23: /usr/include/netinet/in.h:275:8: error: previous definition of ‘struct ipv6_mreq’ make: *** [mypmtud] Error 1 
```

环境：VirtualBox 4.26 上的 Ubuntu 12.10 和用于虚拟网络的 GNS3。虚拟 Cisco C3660 路由器只有基本配置：ip、ipv6 地址、不关闭和设置 mtu。

**编辑：** 我需要 IPv6 堆栈/OS 内核来丢弃大于链路 MTU 的数据包或发出“此数据包需要分段”的信号。我怎样才能实现这种行为？

我尝试`setsockopt`使用`IPV6_DONTFRAG`（在我的代码中定义`#define IPV6_DONTFRAG 62`）、`setsockopt`使用和使用。`IPV6_MTU_DISCOVER``int on = IPV6_PMTUDISC_DO``setsockopt``IPV6_RECVPATHMTU`

但我没有得到`PACKET TOO BIG`答复或`ancillary data`与`cmsg_level == IPPROTO_IPV6``cmsg_type == IPV6_PATHMTU.`

我的部分代码：

```
/** sending ICMP packet*/
 if (((length = sendto(mysocket, packet, lengthBuff, 0, result->ai_addr, result->ai_addrlen)) < 0) && (errno == EMSGSIZE)){

     // works for IPv4, doesn't work with IPv6
     cout << "changing maxBuff and lengthBuff size" << endl;

        maxBuff = lengthBuff;
        lengthBuff = (minBuff + maxBuff) / 2;

        if (packet) {
            delete(packet);
            packet = NULL;
        }

    } else if (length < 0){

     cerr << "Error: sending data." << endl;

            freeaddrinfo(result);
            close(mysocket);

            if (packet) {
                delete(packet);
                packet = NULL;
            }

            exit(1);
    } else if(((recvmsg(mysocket, &msg, 0)) != -1) && (errno != EINTR)) {

        // reading ancillary dada as described in  *Unix-Linux Addison-Wesley - Stevens2003 - Unix Network Programming, page 736*
        cmsgh = CMSG_FIRSTHDR(&msg);    

        if(cmsgh != NULL) {
            cout << "getting msg " << endl;
            cout << "msg len " << msg.msg_controllen << endl;

            if(cmsgh->cmsg_level == IPPROTO_ICMPV6 && cmsgh->cmsg_type == IPV6_PATHMTU)
            {
                cout << "CMSGHEADER - GOOD" << endl;
                //mtustruct = CMSG_DATA(&msg); 

            maxBuff = lengthBuff;
            lengthBuff = (minBuff + maxBuff) / 2;

            if (packet) {
                delete(packet);
                packet = NULL;
            }

            }
            else{

                cout << "different ancillary data. " << endl;
                cout << " level " << cmsgh->cmsg_level << " type " << cmsgh->cmsg_type << endl;
            }
        }

    } else {

        cout << "no ERROR with sendto and no RESCVMSG" << endl;
    } 

    /** receiving ICMP data */
    tv.tv_sec = 3;
    tv.tv_usec = 0;

    int retval; // select

        FD_ZERO(&mySet);
        FD_SET(mysocket, &mySet);

        retval = select(mysocket + 1, &mySet, NULL, NULL, &tv);

        if (retval == -1) {
            cerr << "select failed" << endl;
            //break;
            exit(1);
        } else if (retval) {
            if ((length = recvfrom(mysocket, buffer, MAX, 0, result->ai_addr, &(result->ai_addrlen))) == -1) {
                cerr << "Error: receiving data." << endl;
            } else {
                icmpRec = (struct icmp6_hdr*) buffer;

                if((icmpRec->icmp6_type == ICMP6_PACKET_TOO_BIG)) {

                    cout << "next hop MTU: " << ntohl(icmpRec->icmp6_mtu) << endl;
                    maxBuff = ntohl(icmpRec->icmp6_mtu);                       

                } else if ((icmpRec->icmp6_type == ICMP6_ECHO_REPLY) && (ntohs(icmpRec->icmp6_id) == pid) && (ntohs(icmpRec->icmp6_seq) == (seq - 1))) {
                    cout << "code " << ntohs(icmpRec->icmp6_code) << endl;
                    cout << "ICMP ECHO REPLY" << endl;
                    minBuff = lengthBuff;

                }
            }
        } 
```

**EDIT2：** 我意识到，`setsockopt`定义`IPV6_DONTFRAG`对我不起作用，但`setsockopt`对`IPV6_MTU_DISCOVER`自己的界面起作用。eth1 接口 MTU 为 1500（默认），如果`sendto`要发送更大尺寸的数据包，`errno`设置为`EMSGSIZE`. 同样在一段时间后，我收到`PACKET TOO BIG`了这些不发送来自**自己的内核/操作系统**的消息的消息。

我真正的问题是，我**没有**`PACKET TOO BIG`从运行在 GNS3 上的虚拟路由器（Cisco c3660）收到（在 VirtualBox 4.2.6 上运行的 Ubuntu 12.10）消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T19:02:24.887

> 我想强制路由器丢弃比 MTU 更大的数据包

在 IPv6 中，大于 MTU 的数据包将始终被丢弃。与 IPv4 不同，IPv6 路由器不会对数据包进行分段。相反，源应该执行 PMTU 并且：

*   让传输层协议产生足够大小的数据报
*   **在本地**对数据包进行分段并附加分段扩展

Linux 确实完全支持`IPV6_DONTFRAG`（我认为它是在 2.6.35 中添加的），尽管它只影响本地行为。*

# sql-server-2008-r2 - TempDB有2个数据文件，但SQL Server不知道？

> ID：14185614
> 
> 赞同：2
> 
> 时间：2013-01-06T18:59:03.240
> 
> 标签：sql-server-2008-r2, tempdb

我在 SQL Server 2008 R2 机器上。

根据 SQL Server，我的`TempDB`样子是这样的：

```
CREATE DATABASE [tempdb] ON  PRIMARY 
( NAME = N'tempdev', FILENAME = N'D:\Program Files\Microsoft SQL
 Server\MSSQL10_50.MSSQLSERVER\MSSQL\Data\tempdb.mdf' , SIZE = 6499584KB , MAXSIZE = 
81920000KB , FILEGROWTH = 10%)

LOG ON 

( NAME = N'templog', FILENAME = N'T:\Program Files\Microsoft SQL 
Server\MSSQL10_50.MSSQLSERVER\MSSQL\Data\templog.ldf' , SIZE = 512KB , MAXSIZE = 
UNLIMITED, FILEGROWTH = 10%)

GO 
```

这很好......除了我有 2 个`Tempdb`文件：`Tempdb.mdf`和`Tempdb2.mdf`.

我在 中的任何地方都找不到它`sys.masterdatafiles`，我无法在 Windows 中删除它——因为它说 Windows 正在使用它，并且当第一个`tempdb`文件增长时，它也会增长，所以我知道 SQL Server 正在使用它。

如何在 SQL Server 中找到此文件，以便将其从使用中删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:48:55.537

问题解决了：

要回答问题，是的，我已经停止并重新启动了服务——sys.master_files 或其他任何东西都没有明显变化。

我决定尝试继续添加新的 tempdb 文件。

进入 SSMS，添加了 tempdb2 和 tempdb3，点击 OK....

SQL 回来告诉我 tempdb2 已经在集合中。

WTF，我问自己，没有缩写，并尝试过

```
SELECT * 
FROM sys.master_files
WHERE DB_NAME(database_id) = 'tempdb' 
```

再次...

还有那个小混蛋，整个人平静而快乐。

刷新 SSMS 中的 tempDB 对象，右键单击属性，文件列表中有文件，可以操作了。

非常非常奇怪。谢谢你帮我整理。

# dreamweaver - CS6 流体网格 3 种背景 100% 宽？

> ID：14185618
> 
> 赞同：0
> 
> 时间：2013-01-06T18:59:30.653
> 
> 标签：dreamweaver, fluid-layout

我是流体网格的新手，顺便说一句，我已经开始学习不同的类型，现在尝试在 cs6 中构建页面（也许不是正确的选择）。我在构建不流畅的页面时遇到了一个问题。我需要为页眉和页脚创建不同的背景图像，它们的宽度为 100%，与屏幕一样宽，而不仅仅是与媒体查询一样宽，并且还需要将页面设置为 960 居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:07:54.200

您是否试图使标题比页面的其余部分更宽？为此，请在文档中创建不同的 div。例如，我通常在主 div 中工作所有 div，因此我的整个页面都会受到影响。例如，具有主 div、页眉、正文和页脚的页面： `#main` `#header` `#body` `#footer`。页眉、正文和页脚都在主 div 内创建。要使所有内容以 960 像素的宽度浮动在页面中心，您只需将属性应用于`#main`div，如下所示：

```
#main {
    width: 960px;
    margin: 0;
} 
```

边距将导致 div 浮动在中心。它不必是任何特定值，但您确实需要页面左右两侧的边距。

要仅浮动页面的其余部分，请在主 div 内创建除页眉和页脚之外的所有其他内容，并将页眉的宽度设置为 100%。因此，您将拥有以下整体代码段：

```
#header, #footer{
    width: 100%;
    margin: 0;
}
#main {
    width: 960px;
    margin: 0;
} 
```

如果您还没有这样做，明智的做法是在两侧添加一些填充，这样图像和文本就不会出现在页面的一侧（这使得阅读或查看变得困难）。我通常只添加 5px。

# python - Python - 如何在 Python 中连接字符串和整数？

> ID：14185622
> 
> 赞同：0
> 
> 时间：2013-01-06T19:00:01.113
> 
> 标签：python

我在让这段代码工作时遇到了一些麻烦：

```
count_bicycleadcategory = 0
for item_bicycleadcategory in some_list_with_integers:
    exec 'model_bicycleadcategory_%s.bicycleadcategorytype = BicycleAdCategoryType.objects.get(pk=' + str(item_bicycleadcategory) + ')' % count_bicycleadcategory
    count_bicycleadcategory = count_bicycleadcategory + 1 
```

我收到一个错误：

```
Type Error, not all arguments converted during string formatting 
```

我的问题是：关于如何将“item_bicycleadcategory”传递给 exec 表达式的任何线索？

最好的祝福，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:04:46.870

您已经在使用 python 的格式语法：

```
"string: %s\ndecimal: %d\nfloat: %f" % ("hello", 123, 23.45) 
```

更多信息在这里：[http ://docs.python.org/2/library/string.html#format-string-syntax](http://docs.python.org/2/library/string.html#format-string-syntax)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T19:13:48.163

首先，`exec`比 更危险`eval()`，因此请**绝对**确保您的输入来自受信任的来源。即使那样，你也不应该这样做。看起来您正在使用 Web 框架或类似的东西，所以真的不要这样做！

问题是这样的：

```
exec 'model_bicycleadcategory_%s.bicycleadcategorytype = BicycleAdCategoryType.objects.get(pk=' + str(item_bicycleadcategory) + ')' % count_bicycleadcategory 
```

细看。您正在尝试将字符串格式参数放在一个没有格式字符串的单括号中`')' % count_bicycleadcategory`。

你可以这样做：

```
exec 'model_bicycleadcategory_%s.bicycleadcategorytype = BicycleAdCategoryType.objects.get(pk=' % count_bicycleadcategory + str(item_bicycleadcategory) + ')' 
```

但是你真正应该做的是根本不`exec` ***使用***！

创建一个模型实例列表并使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T19:10:19.480

对于 python 2.7，你可以使用格式：

```
string = '{0} give me {1} beer'
string.format('Please', 3) 
```

出去：

> 请给我3杯啤酒

你可以用 做很多事情`format`，例如：

```
string = '{0} give me {1} {0} beer' 
```

出去：

> 请给我 3 请啤酒。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-06T19:12:48.373

试试这个 ：

```
exec 'model_bicycleadcategory_%s.bicycleadcategorytype = BicycleAdCategoryType.objects.get(pk=%s)' % (count_bicycleadcategory, str(item_bicycleadcategory)) 
```

（你不能同时混合`%s`和字符串`+`连接）

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-06T19:10:07.633

试试这个：

```
exec 'model_bicycleadcategory_%d.bicycleadcategorytype = BicycleAdCategoryType.objects.get(pk=%d)' % (count_bicycleadcategory, item_bicycleadcategory) 
```

# groovy - 具有 (im) 可变属性的 Groovy @Immutable 类

> ID：14185625
> 
> 赞同：5
> 
> 时间：2013-01-06T19:00:46.593
> 
> 标签：groovy, immutability

我正在尝试使用 Groovy`@groovy.transform.Immutable`来实现具有不受支持的“不可变”类型属性的类。就我而言，它是`java.io.File`

例如，有类

```
@groovy.transform.Immutable class TwoFiles {
    File file1,file2
} 
```

给我以下编译错误

> Groovyc：@Immutable 处理器在编译类 TwoFiles 时不知道如何处理类型为“java.io.File”的字段“file1”。@Immutable 类仅支持具有有效不可变类型的属性，包括： - 字符串、原始类型、包装器类型、BigInteger 和 BigDecimal、枚举 - 其他 @Immutable 类和已知不可变（java.awt.Color、java.net.URI） - 可克隆类、集合、映射和数组，以及其他具有特殊处理的类 (java.util.Date) 其他限制适用，请参阅@Immutable 的 groovydoc 了解更多详细信息

一个选项我发现它可以扩展`java.io.File`，`Cloneable`但我对这个解决方案不满意。以下代码可以编译和工作，但拥有自己的子类`java.io.File`不是我想要的。

```
@groovy.transform.Immutable class TwoCloneableFiles {
    FileCloneable file1,file2

    class FileCloneable extends File implements Cloneable{

        FileCloneable(String s) {
            super(s)
        }

        // ... and other constructors ...
    }
} 
```

所以我的问题是：还有其他选择如何`java.io.File` *直接*在此类中使用吗？

可能`java.io.File`出于以下目的标记为“已知不可变” （与,`@groovy.transform.Immutable`似乎相同）？`java.awt.Color``java.net.URI`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T03:07:45.170

您是否尝试过使用[`knownImmutableClasses`](http://groovy.codehaus.org/gapi/groovy/transform/Immutable.html#knownImmutableClasses)来指定`File`？像这样的东西应该工作：

```
@groovy.transform.Immutable(knownImmutableClasses = [File])
class TwoFiles {
    File file1,file2
} 
```

（使用`File`，您可能还可以通过以下方式大致获得您想要的效果：

```
@groovy.transform.Immutable
class TwoFiles {
    String file1,file2
    public File getFile1() {return new File(file1)}        
    public File getFile2() {return new File(file2)}        
}

def f = new TwoFiles("/", "/Users")
assert f.file1.class == File 
```

)

# android - 从 SQLite 数据库填充 ListView

> ID：14185630
> 
> 赞同：1
> 
> 时间：2013-01-06T19:01:14.573
> 
> 标签：android, android-listview

我正在尝试从 SQLite 数据库填充列表视图我可以创建数据库并向其中添加项目并将它们显示在 TextView 但由于某种原因不在 ListView

sData 是错误的对象类型吗？

有人可以帮忙吗？

```
public void DBTest() {

        SQLiteDatabase myDB = null;
        String TableName = "myTable";

        /* Create a Database. */
        try {
            myDB = this.openOrCreateDatabase(DATABASE_NAME, MODE_PRIVATE, null);

            /* Create a Table in the Database. */
            myDB.execSQL("CREATE TABLE IF NOT EXISTS "
                    + TableName
                    + " (_id integer primary key autoincrement, name text, script text, su short);");

            /* Insert data to a Table*/
            myDB.execSQL("INSERT INTO "
                    + TableName
                    + " (name, script, su)"
                    + " VALUES ('hello', 'reboot', 1);");

            /*retrieve data from database */
            Cursor c = myDB.rawQuery("SELECT * FROM " + TableName, null);

            int Column1 = c.getColumnIndex("name");
            int Column2 = c.getColumnIndex("script");
            int Column3 = c.getColumnIndex("su");

            // Check if our result was valid.
            c.moveToFirst();
            String sData="";
            if (c != null) {
                // Loop through all Results
                do {
                    String Name = c.getString(Column1);
                    String Script = c.getString(Column2);
                    int su = c.getInt(Column3);
                    sData = sData + Name + " " + Script + " " + su + "\n";
                } while (c.moveToNext());
            }

            ListView lv = (ListView) findViewById(R.id.mainListView);
            lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, sData));

        } catch (Exception e) {
            Log.e("Error", "Error", e);
        } finally {
            if (myDB != null)
                myDB.close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T19:03:54.773

你最终会得到一个`ListView`只有一个项目的，即 的值`sData`。您需要创建一个列表，例如：

```
c.moveToFirst();
ArrayList<String> sData = new ArrayList<String>();
if (c != null) {
    do {
        String Name = c.getString(Column1);
        String Script = c.getString(Column2);
        int su = c.getInt(Column3);
        sData.add(Name + " " + Script + " " + su);
    } while (c.moveToNext());
}

ListView lv = (ListView) findViewById(R.id.mainListView);
lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, sData)); 
```

我还建议您将光标循环更改为类似于以下内容：

```
// cursor left as it came from the database because it starts at the row before the first row
ArrayList<String> sData = new ArrayList<String>();
while (c.moveToNext()) {
    String Name = c.getString(Column1);
    String Script = c.getString(Column2);
    int su = c.getInt(Column3);
    sData.add(Name + " " + Script + " " + su);
} 
```

因为目前您没有检查 的返回值`moveToFirst`，并且它可能返回 false （意味着没有行），但是您的 do-while 循环意味着游标将至少被读取一次，无论它是否有 0 行，并且如果有 0 行，您的应用程序将崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:03:06.137

```
String sData=""; 
```

尝试制作`sData`一个字符串**数组**。将其输入适配器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T19:06:12.440

sData 不是数组尝试类似

```
ArrayList<String> sData = new ArrayList<String>();
            if (c != null) {
                // Loop through all Results
                do {
                    String Name = c.getString(Column1);
                    String Script = c.getString(Column2);
                    int su = c.getInt(Column3);
                    String newData = Name + " " + Script + " " + su;
                    sData.add(newData);
                } while (c.moveToNext());
            } 
```

# entity-framework - 使用 SqlEntityConnection，CLR 类型到 EDM 类型的映射不明确

> ID：14185631
> 
> 赞同：7
> 
> 时间：2013-01-06T19:01:17.330
> 
> 标签：entity-framework, f#, type-providers, f#-3.0

我正在尝试重写一个非常简单的应用程序，从 C# 到 F#，现在使用 SqlEntityConnection 类型提供程序，我遇到了一个 EF 问题：“CLR 类型到 EDM 类型的映射不明确”，这可能发生在打开两个 SqlEntityConnections，每个 SqlEntityConnections 都有一个同名的表。

但是，在这种情况下，这是因为 EF 通过类型提供程序显然正在映射系统表。实际错误引用了 dtproperties 表——

> {"指定的架构无效。错误：\r\nCLR 类型到 EDM 类型的映射不明确，因为多个 CLR 类型匹配 EDM 类型 'dtproperties'。以前找到的 CLR 类型 'SqlEntityConnection2.dtproperties'，新找到的 CLR 类型' SqlEntityConnection1.dtproperties'。"}

如何更改正在映射的此表？谢谢。

（这在原始 C# 版本中不是问题，它也使用 EF。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T01:44:54.870

这是因为您使用的是 POCO 并且有两个具有相同类型名称的类型。EF 忽略命名空间，因此具有相同名称但不同命名空间的两种类型对于 EF 来说是不明确的。（[http://entityframework.codeplex.com/workitem/483](http://entityframework.codeplex.com/workitem/483)）

# html - 有没有办法使用 select 和仅使用 html（没有 javascript、php 或任何其他来源）仅使用 html 来填充主题行？

> ID：14185640
> 
> 赞同：1
> 
> 时间：2013-01-06T19:02:06.933
> 
> 标签：html, mailto

有没有办法使用 select 和仅使用 html（没有 javascript、php 或任何其他来源）仅使用 html 来填充主题行？

下面的例子

```
<select>
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="opel">Opel</option>
<option value="audi">Audi</option>
</select>&nbsp;
<a href="MAILTO:mymail@home.com?Subject="><b>Sign Up</b></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:04:24.343

尝试使用带有 mailto 架构的表单标签：

```
<form method="get" action="mailto:myemail@exampe.com" enctype="application/x-www-form-urlencoded">
<select name="subject">
    <option value="Hello">Hello</option>
    <option value="Goodbye">Goodbye</option>
</select>
<input type="submit" value="Go">
</form> 
```

# c++ - CreateProcess() 函数。GetLastError() 返回 3

> ID：14185642
> 
> 赞同：-1
> 
> 时间：2013-01-06T19:02:26.633
> 
> 标签：c++, winapi

我从下面的程序中得到以下错误： CreateProcess failed(3)

```
int __cdecl main(int argc, char **argv)
{
    USES_CONVERSION;
    string name_of_bitmap;
    cout << "Name of file: ";
    cin >> name_of_bitmap;
    string arguments = "F:\\windowsqnx\\maps\\show_simulation\\Debug\\show_simulation.exe " + name_of_bitmap;
    const char * nob;
    nob = arguments.c_str();
    std::wstring stemp = s2ws("F:\\windowsqnx\\maps\\show_simulation\\Debug\\show_simulation.exe");
    LPCWSTR path = stemp.c_str();
    // runing simulation display process
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    // Start the child process. 
    if ( !CreateProcess(path,
        A2W( nob ) ,
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
        )
    {
        printf( "CreateProcess failed (%d).\n", GetLastError() );
        Sleep(2000);
        return 1;
    }
} 
```

我是流程新手，无法弄清楚我做错了什么。我阅读[了这篇](https://stackoverflow.com/questions/4053241/windows-api-createprocess-path-with-space)文章并执行了以下操作`string arguments = "\"F:\\windowsqnx\\maps\\show_simulation\\Debug\\show_simulation.exe\" " + name_of_bitmap;`，`std::wstring stemp = s2ws("\"F:\\windowsqnx\\maps\\show_simulation\\Debug\\show_simulation.exe\" ");`然后如果我将第一个参数设为 NULL，则会出现错误 123，`CreateProcess(NULL,`我得到了失败 2。请帮忙。

编辑

```
std::wstring s2ws(const std::string& s)
{
   int len;
   int slength = (int)s.length() + 1;
   len = MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, 0, 0); 
   wchar_t* buf = new wchar_t[len];
   MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, buf, len);
   std::wstring r(buf);
   delete[] buf;
   return r;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:08:34.797

错误 2 是

```
ERROR_FILE_NOT_FOUND
2 (0x2)
The system cannot find the file specified. 
```

您指定的路径用于一个不存在的文件，或者 s2ws 正在对您的字符串做一些奇怪的事情。我们可以看到 s2ws 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:08:09.170

坏：“...\show_simulation.exe\”

好：“...\show_simulation.exe”

尝试从命令行输入“show_simulation.exe\” - 你会明白我的意思:)

看起来 s2ws() 可能是附加不需要的斜杠的罪魁祸首。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T19:05:50.537

根据[Windows 错误代码文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)，错误 2 表示`ERROR_FILE_NOT_FOUND`错误 3 表示`ERROR_PATH_NOT_FOUND`，两者都可能意味着 exe 不在您告诉 Windows 的位置。

# java - 用户单击 clickme 按钮时需要显示图像

> ID：14185643
> 
> 赞同：2
> 
> 时间：2013-01-06T19:02:42.627
> 
> 标签：java, image, swing, jlabel, actionlistener

当用户单击按钮时，我需要在标签中显示图像。我在 ActionListener 中编写了一些代码，但它不起作用

```
 btnNewButton.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

            ImageIcon one = new ImageIcon("E:\\image1.jpg");
            panel_1.setLocation(20, 100);
            panel_1.setSize(115, 115);
            mbutton.setIcon(one);
            panel_1.add(mbutton);
            // mbutton.setText("You changed me");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T19:38:04.807

我对您所说的将图像添加到 a 的代码感到有些困惑，`JLabel`但代码显示您添加了一个变量`mButton`并设置了它的图标，这让我觉得它`JButton`？

无论哪种方式，`JLabel`/`JButton`已经添加到容器中还是动态添加？

1) 如果`JLabel`/`JButton`不存在于可见容器中：

在可见容器上添加/删除或更改组件的大小/布局后，您应该调用`revalidate()`容器`repaint()`实例以反映更改：

```
//code which adds component to visible panel_1

//so changes can be reflected
panel_1.revalidate();
panel_1.repaint(); 
```

2）如果`JLabel`/`JButton`是可见`setIcon`的，它应该像它调用的那样工作，`revalidate()`并且它`repaint()`本身从这里看到的`JLabel#setIcon`（`JButton`是相同的）：

```
 * 108: getfield      #294                // Field defaultIcon:Ljavax/swing/Icon;
     * 111: invokeinterface #346,  1          // InterfaceMethod javax/swing/Icon.getIconHeight:()I
     * 116: aload_2
     * 117: invokeinterface #346,  1          // InterfaceMethod javax/swing/Icon.getIconHeight:()I
     * 122: if_icmpeq     129
     * 125: aload_0
     * 126: invokevirtual #319                // Method revalidate:()V
     * 129: aload_0
     * 130: invokevirtual #318                // Method repaint:()V 
```

因此还有其他问题，例如您的 LayoutManager 没有正确支持添加新组件，因此它没有被放置在可见空间中，请发布[SSCCE](http://sscce.org)。

我也看到你在使用`setSize(..)`，`setLocation(..)`所以我觉得你在使用`Absolute`/`null` `LayoutManager`这是不推荐的，可能会导致很多问题。而是使用适当的`LayoutManager`see here了解更多信息：

*   [在容器中布置组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)

# jsf - ajax 更新期间组件值丢失

> ID：14185644
> 
> 赞同：5
> 
> 时间：2013-01-06T19:02:43.853
> 
> 标签：jsf, primefaces

我正在使用 PrimeFaces 3.3.1 和 JSF 2.0，使用的服务器是 Oracle Weblogic 11gR1

下面是我的代码。

```
<p:panel id="personDetailsPanelId" header="#{msg.personDetails}">  

            <!-- Radio Button -->  
            <h:panelGrid columns="3" style="align:center">  
                <h:outputText value="#{msg.accountCategory}" />  
                <p:spacer width="10px" />  
                <p:selectOneRadio id="singleJointAccountRadioId"  
                    layout="horizontal"  
                    value="#{captureAccountDetailBackingBean.accountCategory}">  
                    <f:selectItems  
                        value="#{captureAccountDetailBackingBean.accountcategoryList}">  
                    </f:selectItems>  
                    <p:ajax process="@this" event="change" update="@form"  
                        partialSubmit="true" />  
                </p:selectOneRadio>  
            </h:panelGrid>  

            <p:spacer height="30px;" />  

            <h:panelGrid id="accountDetailsId" columns="3">  
                <h:panelGrid id="firstAccountHolderId" columns="2"  
                    styleClass="float-left ">  
                    <p:graphicImage  
                        value="/com/cas/pages/common/images/person_icon.jpg" />  
                    <h:outputText value="#{msg.firstAccountHolder}" />  

                    <!-- Person Name -->  
                    <h:panelGrid columns="2">  
                        <h:outputText value="#{msg.nameofPerson}" />  
                        <span style="color: red;">*</span>  
                    </h:panelGrid>  
                    <p:inputText  
                        value="#{captureAccountDetailBackingBean.accountHolder1.personName}"  
                        size="25" required="true" />  

                    <!-- Person Address -->  
                    <h:panelGrid columns="2">  
                        <h:outputText value="#{msg.address}" />  
                        <span style="color: red;">*</span>  
                    </h:panelGrid>  
                    <p:inputTextarea  
                        value="#{captureAccountDetailBackingBean.accountHolder1.personAddress}"  
                        rows="3" autoResize="false" required="true" />  

                    <!-- DOB -->  
                    <h:panelGrid columns="2">  
                        <h:outputText value="#{msg.dateOfBirth}" />  
                        <span style="color: red;">*</span>  
                    </h:panelGrid>  
                    <p:calendar  
                        value="#{captureAccountDetailBackingBean.accountHolder1.personDOB}"  
                        navigator="true" showOn="button" size="6" required="true"  
                        pattern="dd/MM/yyyy" />  

                    <!-- Age -->  
                    <h:panelGrid columns="2">  
                        <h:outputText value="#{msg.age}" />  
                        <span style="color: red;">*</span>  
                    </h:panelGrid>  
                    <p:inputText  
                        value="#{captureAccountDetailBackingBean.accountHolder1.personAge}"  
                        size="2" required="true" />  

                </h:panelGrid>  

                <p:spacer width="130px;" />  

                <h:panelGrid id="secondAccountHolderId" columns="2"  
                    styleClass="float-left"  
                    rendered="#{captureAccountDetailBackingBean.accountCategory eq 'Joint'}">  
                    <p:graphicImage  
                        value="/com/cas/pages/common/images/person_icon.jpg" />  
                    <h:outputText value="#{msg.secondAccountHolder}" />  

                    <!-- Person Name -->  
                    <h:panelGrid columns="2">  
                        <h:outputText value="#{msg.nameofPerson}" style="font-size:15px;" />  
                        <span style="color: red;">*</span>  
                    </h:panelGrid>  
                    <p:inputText  
                        value="#{captureAccountDetailBackingBean.accountHolder2.personName}"  
                        styleClass="inputText-style" size="25" required="true" />  

                    <!-- Person Address -->  
                    <h:panelGrid columns="2">  
                        <h:outputText value="#{msg.address}" />  
                        <span style="color: red;">*</span>  
                    </h:panelGrid>  
                    <p:inputTextarea  
                        value="#{captureAccountDetailBackingBean.accountHolder2.personAddress}"  
                        rows="3" autoResize="false" styleClass="inputText-style"  
                        size="25" required="true" />  

                    <!-- DOB -->  
                    <h:panelGrid columns="2">  
                        <h:outputText value="#{msg.dateOfBirth}" />  
                        <span style="color: red;">*</span>  
                    </h:panelGrid>  
                    <p:calendar  
                        value="#{captureAccountDetailBackingBean.accountHolder2.personDOB}"  
                        navigator="true" showOn="button" size="6"  
                        styleClass="inputText-style" required="true" />  

                    <!-- Age -->  
                    <h:panelGrid columns="2">  
                        <h:outputText value="#{msg.age}" />  
                        <span style="color: red;">*</span>  
                    </h:panelGrid>  
                    <p:inputText  
                        value="#{captureAccountDetailBackingBean.accountHolder2.personAge}"  
                        size="2" styleClass="inputText-style" required="true" />  

                </h:panelGrid>  
            </h:panelGrid>  

            <div style="clear: both;" />  
</p:panel> 
```

支持 bean 代码：

```
public class CaptureAccountDetailBackingBean {  

    // For Radio Button  
SelectItem[] accountcategoryList = {new SelectItem("Single", "Single"), new SelectItem("Joint","Joint")};  

String accountCategory;  

    AccountHolderDetailVO accountHolder1 = new AccountHolderDetailVO();  

AccountHolderDetailVO accountHolder2 = new AccountHolderDetailVO();  

    // setter and getters  
} 
```

AccountHolderDetailVO

```
public class AccountHolderDetailVO {  

    String personName;  
    String personAge;  
    Date personDOB;   
    String personAddress;  

    // getter and setter  
} 
```

默认情况下，选择的单选按钮是“Single”。当用户单击“联合”单选按钮时，会显示“secondAccountHolderId”面板网格。

当我在“firstAccountHolderId”或“secondAccountHolderId”面板网格中输入任何值并更改单选按钮时，输入的值将丢失。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T11:41:13.597

这里，

```
<p:ajax process="@this" event="change" update="@form" partialSubmit="true" /> 
```

您基本上是在告诉 JSF 仅提交（处理）当前字段（因此*不是*表单的所有其他字段！），然后重新呈现（更新）*整个*表单（因此包括所有其他未提交的字段提交/处理！）。

因此，所有其他字段只是重新显示来自 bean 的初始值，而不是已输入但未提交的值。

您需要相应地更改`update="@form"`它仅根据单选按钮的更改更新*真正*需要更新的组件。例如

```
<p:ajax process="@this" event="change" update="secondAccountHolder" partialSubmit="true" />  
...
<h:panelGroup id="secondAccountHolder">
    <h:panelGrid id="secondAccountHolderId" columns="2"  
                styleClass="float-left"  
                rendered="#{captureAccountDetailBackingBean.accountCategory eq 'Joint'}">  
        ...
    </h:panelGrid>
</h:panelGroup> 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)

# java - 遍历hashmap并将项目添加到swing jcombobox

> ID：14185650
> 
> 赞同：2
> 
> 时间：2013-01-06T19:03:15.030
> 
> 标签：java, swing, model-view-controller, jcombobox, comboboxmodel

我正在开发我的第一个 Java 应用程序，我被困在这部分，我需要用哈希图中的项目填充我的组合框。

我正在使用模型视图控制器方法并尝试从 GUI 中填充组合框。因此，在用户单击按钮后，将调用一个方法，该方法应与控制器对话并请求组合框的项目。控制器应将项目发送回 GUI，然后可以填充组合框。

因此，在我的一个模型文件中，我创建了一个哈希图并通过我的控制器向其中添加项目。

哈希图如下所示：

```
HashMap<Integer, Customer> customerRegisterHashMap = new HashMap<Integer, Customer>(); 
```

让我们假设地图现在根据 Customer 类属性填充了示例数据。

现在，我想我需要在控制器或模型本身中实现一个方法，该方法遍历上面的哈希图并返回数据（集合？）。

我会（另一个假设，可能没有必要）需要再次遍历这些数据，只是这次在 GUI 类中，并将项目一个一个地添加到组合框中。

所以项目看起来像这样：5 个文件，Controller、Customerregister、Customer、Frame 和一个显示 Frame 的应用程序文件。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:45:38.393

这可能会给你一个想法：

```
HashMap<Integer, Customer> stuff = new HashMap<Integer, Customer>();
stuff.put(0, new Customer());
stuff.put(2, new Customer());
Iterator it = stuff.keySet().iterator();
while(it.hasNext())
{
    ComboBox.addItem(stuff.get(it.next()));
} 
```

您可以`HashMap`在您的应用程序中传递，然后将其添加到`JComboBox`上面的内容中。

# php - CodeIgniter 中的 Auth 代码结构

> ID：14185653
> 
> 赞同：1
> 
> 时间：2013-01-06T19:03:41.053
> 
> 标签：php, codeigniter, directory-structure, ion-auth

我正在使用[CodeIgniter](http://ellislab.com/codeigniter)和[Ion auth](http://benedmunds.com/ion_auth/)开发一个小型 Web 应用程序。该应用程序有 3 种不同类型的用户：

*   admin：添加、列出所有、查阅项目、删除项目；
*   作者：添加、列出、咨询；
*   普通用户：全部列出，咨询；

（想象它们是新闻条目）

我有一个**新闻**控制器，可以添加、列出所有、咨询、删除和相应的视图。

到目前为止，我的控制器是这样组织的：

控制器：

*   行政
    *   新闻.php
*   作者
    *   新闻.php
*   普通用户
    *   新闻.php
*   上市

所以登录后用户被重定向到各自的**新闻**控制器。例如，**作者新闻**控制器有`Add`，`View`和`Consult`功能，而**普通用户新闻**控制器只有`View`和`Consult`功能。

困扰我的是，这必须是一种简单的组织方式，根据用户的类型给予不同的权限。它应该重复某些代码吗？

和意见？标题将因用户而异。我应该使用相同的标题模板和一些 if 语句来显示不同的数据，具体取决于用户，还是应该重复包中的视图，更改标题？

意见：

*   行政
    *   头文件.php
    *   添加.php
    *   视图.php
    *   列表.php
    *   删除.php
    *   页脚.php
*   作者
    *   头文件.php
    *   添加.php
    *   视图.php
    *   列表.php
    *   页脚.php
*   普通用户
    *   头文件.php
    *   视图.php
    *   列表.php
    *   页脚.php

在这一刻，我有一个带有and的`template`文件夹，但是我遇到了不同标题的问题。`header.php``footer.php`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:23:30.690

不，不，不，不，不，你第二次（几乎）做同样的事情时应该会响起警钟，更不用说第三次或第四次了。

1 个带有一些 if 语句的页眉/页脚视图。可能与 list 和其他任何重复一半代码的内容相同。

除非它们完全不同，否则也不要使用三个不同的新闻控制器。同样，使用控制语句来指导程序流，无论如何，您都应该检查各个控制器中的适当访问级别。不要只在主控制器中执行一次并重定向，这些控制器可以通过 URL 直接访问。

我真的不能在这里放任何代码来提供帮助，但是如果您有任何问题，请开始并回来。此外，可能值得在代码审查[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)上发布一些代码，以获取有关如何采用 DRY 软件开发的一些提示

[http://en.wikipedia.org/wiki/Don%27t_repeat_yourself](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

# actionscript-3 - 自定义 LabelItemRenderer 中的数据错误

> ID：14185654
> 
> 赞同：0
> 
> 时间：2013-01-06T19:03:42.983
> 
> 标签：actionscript-3, flash, apache-flex, mobile, flash-builder

我有用于列表的自定义 LabelItemRenderer，并覆盖集数据功能。在每个数据中，我都有属性“销售”，可以是真假。取决于此属性，我`m adding icon. Everything seems fine until i`将向上滚动列表几次。对于设置为 false 的列表索引，销售额为 true。我检查了我的数据提供者并找不到错误，但是在我的自定义项目中呈现数据是错误的并且图标显示在错误的位置。

这是我的代码：

```
package components {

import flash.display.Bitmap;

import spark.components.LabelItemRenderer;
import spark.components.supportClasses.StyleableTextField;
import spark.primitives.BitmapImage;

public class StoresList extends LabelItemRenderer {

    private var storeName:StyleableTextField;
    private var floor:StyleableTextField;
    private var mapListIco:Bitmap;
    private var promotions:Bitmap;
    private var sales:Boolean;
    private var compData:Object;

    public function StoresList() {

        super();
    }

    override public function set data(value:Object):void {

        compData = value;

        storeName.text = compData.title;
        floor.text = 'floor : ' + compData.floor;

        if (compData.sales && compData.salesIco) {
            promotions = compData.salesIco;
            addChild(promotions);
        }
    } 

    private function createStoreName():void {

        storeName = StyleableTextField(createInFontContext(StyleableTextField));
        storeName.editable = false;
        storeName.selectable = false;
        storeName.multiline = false;
        storeName.wordWrap = false;
        storeName.styleDeclaration = styleManager.getStyleDeclaration(".titleStyleName");

        addChild(storeName);
    }

    private function createFloortextField():void {

        floor = StyleableTextField(createInFontContext(StyleableTextField));
        floor.editable = false;
        floor.selectable = false;
        floor.multiline = false;
        floor.wordWrap = false;
        floor.styleDeclaration = styleManager.getStyleDeclaration(".floor");

        addChild(floor);
    }

    override protected function createChildren():void {

        // store name
        createStoreName();

        // floor
        createFloortextField();

        // maplist ico
        mapListIco = new Textures.mapListIco160;
        addChild(mapListIco);
    }

    override protected function measure():void {

        measuredWidth = getElementPreferredWidth(storeName) + getElementPreferredWidth(floor);
        // We only care about the "real" ascent
        measuredHeight = getElementPreferredHeight(storeName) +  getElementPreferredHeight(floor); 
    }

    override protected function drawBackground(unscaledWidth:Number, unscaledHeight:Number):void {

        super.drawBackground(unscaledWidth, unscaledHeight);
    }

    override protected function layoutContents(unscaledWidth:Number, unscaledHeight:Number):void {

        // store name
        var gap:Number = Math.round(unscaledHeight * .1);
        var storeNameHeight:Number = getElementPreferredHeight(storeName);
        var floorHeight:Number = getElementPreferredHeight(storeName);
        var storenameY:Number = Math.round( (unscaledHeight - (storeNameHeight + floorHeight + gap) ) * .5 );

        setElementSize(storeName, storeName.textWidth, storeName.textHeight);
        setElementPosition(storeName, unscaledWidth * .15, storenameY);

        // floor
        var floorY:Number = Math.round(storenameY + storeNameHeight);
        setElementPosition(floor, unscaledWidth * .15, floorY + gap);

        // map list
        setElementPosition(mapListIco, unscaledWidth - mapListIco.width - unscaledWidth * .05, (unscaledHeight - mapListIco.height) * .5);

        // promotions
        if (promotions) {

            setElementPosition(promotions, 
                (unscaledWidth * .15 - getElementPreferredWidth(promotions)) * .5, 
                (unscaledHeight - getElementPreferredHeight(promotions)) * .5)
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:29:27.963

ItemRenderers 被重用 - 所以当渲染器被赋予新数据时[通过 set data()]，你需要清除所有未使用的数据。在您的情况下，您需要显式隐藏图标（因为它可能在上次使用渲染器时可见）。例如：

```
override public function set data(value:Object):void {
    //always call super on an overriden function unless you have specific reason not to
    super.data = value;
    ...
    if (compData.sales && compData.salesIco) {
        promotions = compData.salesIco;
        promotions.visible = true;
    }
    else
    {
        promotions.visible = false;
    }
} 
```

我建议在 createChildren 而不是在集合数据中创建促销位图 - 因为重复添加和删除它是一项相对昂贵的操作。

# android - SurfaceTexture.OnFrameAvailableListener 停止被调用

> ID：14185661
> 
> 赞同：7
> 
> 时间：2013-01-06T19:04:58.620
> 
> 标签：android, opengl-es

我正在我的应用程序中实现 SurfaceTexture.OnFrameAvailableListener 接口，因此我可以将视频帧用作 OpenGL 纹理。一切都按应有的方式进行设置，并且运行良好，但是 onFrameAvailable(SurfaceTexture surfaceTexture) 在几秒钟后停止被调用，实际上并且似乎冻结了 OpenGL 中的视频，因为没有通过 SurfaceTexture.updateTextImage 上传新的纹理数据。

我在 onFrameAvailable 中设置了一个标志，以便从 GL 线程进行 updateTextImage 调用，并且仅在需要时进行。目前，我在每次绘制调用时都将标志设置为 true，以便在跳过 onFrameAvailable 检查时每帧上传视频纹理数据。像这样，一切都按原样运行，但似乎效率低下，因为如果它仍然相同（电影帧）则不需要上传新的纹理数据。

AFAIK 没有内存泄漏，logcat 没有显示任何错误。此外，媒体播放器设置为循环播放，但问题发生在单次运行完成之前。

几秒钟后，什么会导致 onFrameAvailable 不再被调用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-17T23:50:48.633

我在某些设备上遇到了完全相同的问题。找到了一个修复，并认为我会分享。基本上这是@user2254894 的建议，除了因为计数器可以由2个不同的线程更改，所以使用2个不同的变量是个好主意。这是一些示例代码：

```
private int             _updateTexImageCounter = 0;
private int             _updateTexImageCompare = 0; 
```

并且 onFrameAvailable() 很简单。

```
@Override
public void onFrameAvailable(SurfaceTexture surfaceTexture) 
{
    // increment every time a new frame is avail
    _updateTexImageCounter++;
} 
```

然后在您的 GL 更新中，您将执行以下操作...

```
public void update() 
{

    .... create texture... etc.
    ..
    // compare _updateTexImageCompare and _updateTexImageCounter
    if( _surfaceTexture!=null && _updateTexImageCompare != _updateTexImageCounter ) 
    {
        // loop and call updateTexImage() for each time the onFrameAvailable() method was called below.
        while(_updateTexImageCompare != _updateTexImageCounter) {
            _surfaceTexture.updateTexImage();
            _surfaceTexture.getTransformMatrix(x);

            _updateTexImageCompare++;  // increment the compare value until it's the same as _updateTexImageCounter
        }
    }

} 
```

这对我有用。让我知道是否有更好的方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-07T16:01:24.167

我刚刚看到一个类似的问题，并对其进行了调试。我和你一样，有一个布尔标志，表示一个（或多个！）帧已准备好使用。

当我在一对 OpenGL 帧之间收到两个相机帧时出现了问题（可能是因为我的 OpenGL 重绘处理太慢了）。这意味着我设置了两次布尔标志。但是，我随后只读取了此帧数据一次，并且似乎 updateTexImage 实现了某种排队功能。

用未决相机帧的整数计数器替换布尔标志为我解决了这个问题。也许这对你也有用？

（我怀疑这比每帧调用 updateTexImage 更有效。至少在我的代码中，很少有（1-2%）OpenGL 帧需要足够长的时间来跨越两个相机帧。）

# c# - 客户端和服务器之间的通信中介（控制器？）

> ID：14185664
> 
> 赞同：0
> 
> 时间：2013-01-06T19:05:08.073
> 
> 标签：c#, wcf, model-view-controller, design-patterns, client-server

我正在寻找在客户端应用程序和服务器之间实现某种调解器（调度程序/控制器）。客户端向调解器发送命令 -> 调解器处理（执行）命令。我使用 WCF 作为交流平台。有没有办法（模式或 smth）我可以在不更改中介接口的情况下向客户端添加新命令？
假设中介解决了对客户隐藏的其他几个服务。客户端向服务器发送命令以执行某些操作。这些操作涉及各种域服务和服务器端类。稍后再说我决定向客户端添加一个新命令。该新操作可以由域服务执行，但是我如何在远程机器上触发该操作，域服务无需扩展调解器的接口（因为调解器是客户端和服务器之间的唯一通信点）。

所以一般来说，我正在寻找在 WEB 应用程序中使用的 MVC 模式中控制器的某种替代方案，而不是 WEB 应用程序。

有任何想法吗？解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:19:06.267

所以在我看来，你需要某种不知道消息格式的透明代理，只是传递给适当的后端系统。所以，换句话说，你需要像“Message API”而不是“RPC API”这样的东西。这可以通过不同的方式完成 - 您可以将消息作为 XML 传递，您可以在其中指示命令的类型、命令的名称、参数等。然后您的中介可以根据命令的类型将命令传递给适当的支持系统。这样，如果您添加新命令（名称），则只需修改后端系统。如果您添加新的命令类型，而不仅仅是新命令，则必须修改您的调解器。

您可以 google 消息 API 模式以获取更多信息，例如： [http ://www.servicedesignpatterns.com/WebServiceAPIStyles/MessageAPI](http://www.servicedesignpatterns.com/WebServiceAPIStyles/MessageAPI)

# android - 修剪 OpenCV 库

> ID：14185669
> 
> 赞同：2
> 
> 时间：2013-01-06T19:05:46.160
> 
> 标签：android, opencv, tesseract

我正在开发一个使用 OpenCV 和 Tesseract 库的 android 应用程序。我只使用这些库的某些功能。但是随着包含的库，应用程序的大小从 4 增长到 50mb。

我显然需要精简库。我该怎么做？

编辑：为了保持用户友好性，我不想使用 OpenCVManager。我不想强迫用户安装另一个应用程序。

EDIT2：我需要为 tesseract 库做同样的事情。我想这以同样的方式工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:27:07.637

我完全不确定我要建议什么，但我最近`-gc-sections`在 GCC 文档中找到了这些选项。在链接时使用，它应该从最终的可执行文件/库中删除所有未使用的代码部分。这可以避免必须手动修剪 OpenCV，鉴于该库的复杂性，这必须是一项漫长且相当不愉快的任务。

要使用它，您显然必须使用 编译每个依赖项`-ffunction-sections -fdata-sections -Os`，然后将整个代码与`-Wl,--gc-sections`. 它可能值得一试！

[我在这个页面](http://wiki.wxwidgets.org/Reducing_Executable_Size)上找到了一些细节。

如果我错了，请不要犹豫纠正我！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T14:10:02.487

如果您不想使用 OpenCVManager，您可以[按照这些说明进行操作。](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html?highlight=static%20link#application-development-with-static-initialization)

问题是，我不知道它是否仍然适用于 2.4.3 以上的版本，并且不会减少您的 apk 的大小。

如果你想减小这个大小，你必须自己编译 opencv4android 并选择你需要的模块。

# php - 文本导致 CSS 放置问题

> ID：14185671
> 
> 赞同：2
> 
> 时间：2013-01-06T19:05:55.913
> 
> 标签：php, css

我有一个漫画网站，想在每个漫画缩略图下放置文本（数据库字段“描述”）。

我有两个问题：

**问题 1）**我不知道为什么，但是当我将文本放在漫画下方时，它会强制其下方的漫画行偏移一个。

![在此处输入图像描述](../Images/952716bef7487125fee93caefb32e6cc.png)

但除此之外，没有文字......它排列得很好：

![在此处输入图像描述](../Images/3fd3bcf3e3df72dec90e22c9c08ed463.png)

CSS如下：

```
 .comics {
    float: left;
    padding: 15px 5px 30px 15px;
    margin: 10px;
    background: url(images/SiteDesign/comicbg.png) no-repeat 0 0;

    /*Need to set width on this >= to thumber width so description text will wrap*/
    width: 220px;
    font-family: "Trebuchet MS", Helvetica, sans-serif;

} 
```

PHP：

```
 echo '<li>';
    echo    '<span class="comics"><a href=".?action=viewimage&site='.$site. '&id=' . $row['id'] .'">
            <img src="./scripts/thumber.php?img=.' . $thumbpath.$row['thumb'] . '&mw=220&mh=220"/></a>' . 
            '<br /><br /> ' . $row['description'] . '</span>';                              
echo '</li>'; 
```

我觉得我在做正确的 CSS，所以不知道为什么它会偏移。

**问题2）**

我在底部添加文本的唯一原因是因为 Go Daddy 说我在我的页面上没有足够的关键词出现，例如“漫画”或“艺术品”用于 SEO。如果我添加此文本，通常包括关键字，那会改善我的 SEO 吗？

谢谢！

编辑 - - -

如果我这样做了`display: inline-block;`，`verticle-align: text-top;`对于 li，我是否需要为每个帖子添加文字？否则它似乎笨拙地推高其中一张图像。

![在此处输入图像描述](../Images/2156e8765d851c6390c2210ac25d810c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:04:34.400

您可以尝试使用明显分开的行，这些行不会影响下方行的浮动方式。您可以通过在每行的一组漫画缩略图之后添加以下内容来完成此操作：

```
<div style="clear:both;"></div> 
```

看到这个工作示例：http: [//jsfiddle.net/gLMw9/](http://jsfiddle.net/gLMw9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T20:15:50.813

如果你不能保证每个元素都具有相同的高度，那么你想要`display: inline-block`，而不是浮动。此外，它应该在`li`.

```
li {
  display: inline-block;
  vertical-align: text-top;
} 
```

你可以在里面塞进任何你想要的东西`li`，每一行都会在顶部排成一行。演示（使用 div）：http: [//jsfiddle.net/ffr3M/](http://jsfiddle.net/ffr3M/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T19:27:32.197

如果您在每部漫画下方添加相同数量的文本，我敢打赌它都会正确流动。您可以尝试在每个描述周围插入一个具有固定高度的 div，例如：

```
<div style="height:50px;">' . $row['description'] . '</div> 
```

尽管您可能希望将其他包装跨度也更改为 div...

# testing - 决策/条件覆盖

> ID：14185674
> 
> 赞同：0
> 
> 时间：2013-01-06T19:06:19.297
> 
> 标签：testing, white-box

是否有工具可以显示提供决策/条件覆盖的测试用例数量？

例如：

```
if(x>0)

if(x<=10 && y>0) 
```

3 个案例足以覆盖决策/条件。

```
if(x>0)

if(x<=10 || y>0) 
```

4 个案例足以覆盖决策/条件。

这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:08:13.430

可能不会。* 除了像这样的微不足道的情况外，很难弄清楚可能的情况的数量。

另一方面，有代码覆盖率工具，可以跟踪你的代码在测试中实际运行的百分比。

* * *

[* 我在对冲我的赌注；很难证明是否定的；）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:41:53.010

是的，有一些工具可以生成测试用例以实现覆盖。如果您只对数字感兴趣，那么您可以在它们都在那里后数一数。生成的测试套件通常至少具有每个测试用例在添加时提高覆盖率的属性（按顺序）。由于它们的工作方式，这些工具通常在要实现的覆盖标准方面是灵活的。我猜他们都允许决策/条件覆盖。

> 我们提出了一种新的符号执行工具 KLEE，它能够自动生成测试，从而在各种复杂和环境密集型程序上实现高覆盖率。

来自[http://llvm.org/pubs/2008-12-OSDI-KLEE.html](http://llvm.org/pubs/2008-12-OSDI-KLEE.html)

另一个测试用例生成工具是[PathCrawler](http://pathcrawler-online.com/)

第三个是微软使用的内部工具[Sage](http://research.microsoft.com/en-us/um/people/pg/public_psfiles/sage-in-one-slide.pdf)。

这些工具所依赖的技术的通用名称是[concolic testing](http://en.wikipedia.org/wiki/Concolic_testing)。正如 Oli 在他的回答中指出的那样，这些工具正在解决一个难题，因此设计空间非常大，并且这些工具之间的细节差异很大。

# c++ - 带有 MSVC 和 NMake 的 Qt 5 不起作用

> ID：14185679
> 
> 赞同：3
> 
> 时间：2013-01-06T19:07:00.990
> 
> 标签：c++, windows, qt, nmake, msvcrt

当我使用新的 Qt Creator 2.6.1 和 Qt 5.0 编译一个**新**的Qt 项目时，我收到以下错误：

```
C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe -f Makefile.Debug
Error: cannot open C:\Users\Ömercan\AppData\Local\Temp\main.obj.7320.31.jom for write
jom: C:\Projekte\PixelGame\src\com\pearstudios\texturepacker\TexturePacker-Debug\Makefile [debug] Error 1
19:46:21: The process "C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe" terminated with exit code 2.
Error while building/deploying project TexturePacker (kit: Desktop Qt 5.0.0 MSVC2010 32bit (SDK))
When executing step 'Make' 
```

更改选项以直接使用 NMake 后，出现以下错误：

```
"C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\nmake.exe" -f Makefile.Debug
    cl -c -nologo -Zm200 -Zc:wchar_t -Zi -MDd -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtCore" -I"debug" -I"." -I"." -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -Fodebug\ @C:\Users\Ömercan\AppData\Local\Temp\nm25A.tmp
NMAKE : fatal error U1077: ""C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\cl.EXE"": Exit-Code "0xc0000135"
Stop.
NMAKE : fatal error U1077: ""C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\nmake.exe"": Exit-Code "0x2"
Stop.
19:49:49: The process "C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\nmake.exe" terminated with exit code 2.
Error while building/deploying project TexturePacker (kit: Desktop Qt 5.0.0 MSVC2010 32bit (SDK))
When executing step 'Make' 
```

将 TEMP 和 TMP 环境变量更改为具有完整 ascii 字符的另一个路径（因此不使用非 ascii 字符“Ö”）时，我在 JOM 中收到以下错误：

```
C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe -f Makefile.Debug
    cl -c -nologo -Zm200 -Zc:wchar_t -Zi -MDd -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtCore" -I"debug" -I"." -I"." -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -Fodebug\ @C:\Projekte\TMP\main.obj.764.31.jom
jom: C:\Projekte\PixelGame\src\com\pearstudios\texturepacker\TexturePacker-Debug\Makefile.Debug [debug\main.obj] Error 2
    cl -c -nologo -Zm200 -Zc:wchar_t -Zi -MDd -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtCore" -I"debug" -I"." -I"." -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -Fodebug\ @C:\Projekte\TMP\mainwindow.obj.764.31.jom
jom: C:\Projekte\PixelGame\src\com\pearstudios\texturepacker\TexturePacker-Debug\Makefile.Debug [debug\mainwindow.obj] Error 2
jom: C:\Projekte\PixelGame\src\com\pearstudios\texturepacker\TexturePacker-Debug\Makefile [debug] Error 2
19:53:52: The process "C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe" terminated with exit code 2.
Error while building/deploying project TexturePacker (kit: Desktop Qt 5.0.0 MSVC2010 32bit (SDK))
When executing step 'Make' 
```

使用 NMAKE：

```
"C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\nmake.exe" -f Makefile.Debug
    cl -c -nologo -Zm200 -Zc:wchar_t -Zi -MDd -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\include\QtCore" -I"debug" -I"." -I"." -I"..\..\..\..\..\..\..\Qt\Qt5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -Fodebug\ @C:\Projekte\TMP\nm803F.tmp
NMAKE : fatal error U1077: ""C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\cl.EXE"": Exit-Code "0xc0000135"
Stop.
NMAKE : fatal error U1077: ""C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\nmake.exe"": Exit-Code "0x2"
Stop.
19:56:54: The process "C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\nmake.exe" terminated with exit code 2.
Error while building/deploying project TexturePacker (kit: Desktop Qt 5.0.0 MSVC2010 32bit (SDK))
When executing step 'Make' 
```

我没有减少输出，因为命令行参数可能有问题。调试和发布版本之间也没有区别，我也在 Windows 7 32 位上使用 MSVC 2010 没有问题。我安装了新的 MS.NET Framework 4.5 和 4。几个月前，我还使用 Qt Creator 和 Qt 4.8 没有问题，但我删除了它以便为其他程序腾出空间。现在我再次需要 Qt，但由于这个问题，它不可用。

有人有想法吗？我可以尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T08:09:05.437

Qt 框架在二进制文件（qmake ...）中编译了一些路径。使用安装程序时，这些将使用您决定安装的路径修补到工具中。您不能将 Qt 安装从一个目录移动到另一个目录。编译也是如此，您需要在要运行它的完全相同的目录中编译 Qt。也许这就是问题所在？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T10:20:22.500

我最近很高兴地发现，当您的路径中有空格时，Qt（不记得究竟是哪个版本）不起作用*sigh*。它只是在某个时候分崩离析，而其他部分则起作用。没有可用的错误消息。出于这个原因，我会检查它是否也会在你的路径中的“Ömercan”处发出声音。并提交错误报告，如果你在乎的话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T06:21:48.297

你自己编译了 Qt 5 吗？

过去，我遇到过未使用正确编译器标志编译的 Qt 插件问题（例如：使用 MSVC 构建的 Qt Creator 和使用 MinGw 构建的插件）、DLL 问题等。

因此，当我必须在 Windows 上处理 Qt 项目时，我通常从源代码编译 Qt 开始：http: [//qt-project.org/wiki/Building_Qt_5_from_Git](http://qt-project.org/wiki/Building_Qt_5_from_Git)

编译可能需要一段时间，具体取决于您的机器处理能力。

# eclipse - Eclipse 中的断点

> ID：14185681
> 
> 赞同：2
> 
> 时间：2013-01-06T19:07:03.977
> 
> 标签：eclipse, breakpoints

我正在尝试在 Eclipse 中添加一个断点，但它不起作用。我右键单击 jsp 文件的边距并选择添加断点，但没有任何反应。

你以前见过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:16:01.810

尝试执行以下操作：

1.  项目 -> 清理。
2.  然后尝试添加断点。
3.  如果不成功，请尝试重新启动eclipse。
4.  尝试 alsp 双击边距以添加断点。
5.  尝试同时按下这些按钮：cnrl + shift + b。
6.  选择“运行”并切换断点。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:22:18.487

您必须双击编辑器的排水沟来切换断点。[在这里](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.user/tasks/task-add_line_breakpoints.htm?cp=1_3_6_0_0)查看官方文档。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-06T19:29:55.607

在`jsp`文件中，您只能在有`java`部分的地方设置断点，例如 -`${....}`

# android - 替代或 getSupportFragmentManager？

> ID：14185690
> 
> 赞同：0
> 
> 时间：2013-01-06T19:08:10.677
> 
> 标签：android, android-fragments

我正在为 Android 2.2+ 开发应用程序，我需要使用 Fragments。所以我将支持库添加到我的项目中，并且一直成功地使用 Fragments 直到现在。

当我输入：

```
FragmentManager fm = getSupportFragmentManager() 
```

没发生什么事。我得到一个错误。那么有没有另一种方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:12:18.697

您需要a）确保您的活动扩展`FragmentActivity`而不仅仅是活动，并且b）确保您的片段扩展`android.support.v4.app.Fragment`而**不是** `android.app.Fragment`。

# javascript - 100 年前的 jQuery UI 日期选择器

> ID：14185695
> 
> 赞同：1
> 
> 时间：2013-01-06T19:08:24.600
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

我试图让 datepicker 允许我选择 100 年之前的日期。

我发现需要禁用 shortYearCutoff 选项才能正确使用此功能，因为它总是会将日期范围从 00-99 更改为 1900-99 或 2000-2099。

我希望能够在 1-99 年之间进行选择——我真的很想回到那之前的几年，但我想我将为这些日期创建另一个解决方案。

无论如何，任何人都可以想到如何轻松完成此操作，而无需进行太多更改？

我发现javascript Date 函数似乎将'xx 日期更改为19xx。

如果我能以某种方式禁用它，我应该能够让它工作。

这是我当前的代码

```
 $("#event_date").datepicker({ minDate: new Date(1, 0, 1),changeYear:true,  maxDate: new Date(4000, 11, 31) , yearRange: '1:4000'});
        $("#event_date").datepicker("option", "dateFormat", "yy-mm-dd"); 
```

日期选择器在下拉列表中显示正确的年份，但当我选择 0-100 之间的任何值时，它始终默认为 19xx

我也测试了这个...

```
 testDate = new Date(12, 11, 11);
        alert(testDate); 
```

这显然会输出以下内容：

```
Dec 11 1912 00:00:00 GMT-0500 (Eastern Standard Time) 
```

知道如何让其中任何一个自动默认显示 0 到 100 之间的年份吗？

如果我能让 Date() 做到这一点，我应该可以使用 jquery ui 的东西。对于我正在构建的应用程序中的任何日期，我不需要这种自动功能。

感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:21:30.437

[*您可以将日期写为ISO-8601*](http://www.w3.org/TR/NOTE-datetime)（[*发布*](http://www.iso.org/iso/catalogue_detail?csnumber=40874)）格式的字符串，将其作为参数传递给`new Date`

```
new Date('0000-01-01T00:00:00.000Z'); // Sat Jan 01 0 00:00:00 GMT+0000 (GMT Standard Time)
       // YYYY-MM-DD hh:mm:ss 
```

# c++ - 这是通过内存地址对两个变量进行数字顺序的有效方法吗？

> ID：14185698
> 
> 赞同：1
> 
> 时间：2013-01-06T19:08:37.517
> 
> 标签：c++, pointers

我是 C++ 的新手，我正在阅读 Alex Alllain 的这本名为[Jumping into C++](http://www.cprogramming.com/c++book/)的电子书，它非常有帮助。

我最近完成了指针一章。本章末尾有一个练习题，要求你编写一个程序，比较堆栈上两个不同变量的内存地址，并按地址的数字顺序打印出变量的顺序。

到目前为止，我已经运行了该程序，但是如果我以正确的方式实施它，我并不满意，我希望获得有关我的解决方案的专家意见，以确定我是否朝着正确的方向前进。以下是我自己对问题的解决方案（评论和提示会有所帮助）：

```
// pointersEx05.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <iostream>
#include <string>

int _tmain(int argc, _TCHAR* argv[])
{
    int x,y; // two integer type variables
    int *firstVal, *secondVal; // two pointers will point out to an int type variable

    std::cout << "enter first value: ";
    std::cin >> x; // prompt user for the first value
    std::cout << std::endl << "enter second value: ";
    std::cin >> y; // prompt user for the second value
    std::cout << std::endl;

    firstVal = &x; // point to the memory address of x
    secondVal = &y; // point to the memory address of y

    std::cout << firstVal << " = " << *firstVal; // print out the memory address of the first value and also the value in that address by dereferencing it
    std::cout << "\n" << secondVal << " = " << *secondVal;  // print out the memory address of the second value and also the value in that address by dereferencing it

    std::cout << std::endl;

    if(firstVal > secondVal){ // check if the memory address of the first value is greater than the memory address of the second value
        std::cout << *secondVal << ", "; // if true print out second value first  then the first value
        std::cout << *firstVal;
    }else if(secondVal > firstVal){ // check if the memory address of the second value is greater than the memory address of the first value
        std::cout << *firstVal << ", "; // if true print out first value first then the second value
        std::cout << *secondVal << ", ";
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:10:38.543

这是“正确的”，但它不是明确定义的行为。您只能比较同一数组中元素的地址，或同一结构实例的成员。从 C99 (6.5.8) 开始：^*

> 比较两个指针时，结果取决于所指向对象在地址空间中的相对位置。如果两个指向对象或不完整类型的指针都指向同一个对象，或者都指向同一个数组对象的最后一个元素，它们比较相等。如果指向的对象是同一个聚合对象的成员，则指向稍后声明的结构成员的指针比较大于指向结构中较早声明的成员的指针，并且指向具有较大下标值的数组元素的指针比较大于指向同一数组的元素的指针具有较低的下标值。所有指向同一个联合对象成员的指针比较相等。如果表达式 P 指向一个数组对象的一个​​元素，而表达式 Q 指向同一个数组对象的最后一个元素，**在所有其他情况下，行为是未定义的。**

（强调我的）

所以这可能是你的主管正在寻找的，它可能会“工作”，但就语言标准而言，它仍然无效。

* * *

[* C++ 标准的 [expr.rel] 部分说了类似的话，但由于对类成员的警告等原因，它更加冗长。它还指出，其他任何东西都是“未指定的”而不是“未定义的”。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:17:00.450

**作为一项学术任务，**这完全没问题..你满足了这本书的“要求”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T16:08:06.563

正如其他人指出的那样，比较未指向同一聚合中对象的指针是未定义的行为。但是您可以使用 std::less 对指针类型进行总排序（请参阅：[http](http://en.cppreference.com/w/cpp/utility/functional/less) ://en.cppreference.com/w/cpp/utility/functional/less ）

# android - 如何使用字符串中的内容进行对话？

> ID：14185700
> 
> 赞同：4
> 
> 时间：2013-01-06T19:08:56.263
> 
> 标签：android, dialog, android-alertdialog

是否可以使用 OnCreate 中定义的字符串中的内容进行对话？因为我能找到的定义对话框内容的唯一方法是使用文本或在 values/strings.xml 中定义的字符串，如下所示：

```
builder.setMessage(R.string.dialog_fire_missiles) 
```

我希望有人可以帮助我，如果我的问题足够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-06T19:11:01.180

使用`getString`方法`Context`从strings.xml中获取字符串：

```
builder.setMessage(Your_Activity.this.getString(R.string.dialog_fire_missiles)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T19:12:41.957

只需使用：

```
builder.setMessage("Your Message") 
```

有两种 setMessage() 方法，[一种用于接受 CharSequence](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setMessage%28java.lang.CharSequence%29)，另一种用于接受[R.string.*](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setMessage%28int%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-19T20:24:36.643

使用 getString 方法

```
ProgressDialog pDialog;

pDialog.setMessage(getString(R.string.your_xml_string)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T19:12:31.193

获取资源，例如：

```
builder.setMessage(getRessources.getString(R.string.dialog_fire_missiles)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T19:12:58.710

```
getApplicationContext().getString(R.string.yourstring); 
```

您的活动上下文为您提供了从“R”加载资源所需的一切。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T19:18:49.917

是的，您可以使用字符串 o_O

首先检查文档：[setMessage（CharSequence 消息）](http://developer.android.com/reference/android/app/AlertDialog.html#setMessage%28java.lang.CharSequence%29)

[然后你可以在这里](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)查看教程测试对话框

对于懒惰的人：

```
String text = "Hello";

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage(text).setPositiveButton("Wohoo", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // FIRE ZE MISSILES!
                }
            }).setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // User cancelled the dialog
                }
            }); 
```

最后添加这个，因为您已经创建了对话框并且需要显示：

```
builder.show(); 
```

# sql-server-2008 - 用户无权更改数据库

> ID：14185703
> 
> 赞同：0
> 
> 时间：2013-01-06T19:09:19.503
> 
> 标签：sql-server-2008, asp.net-mvc-4, ef-code-first, database-permissions

我正在使用 MVC 4、Entity Framework 5 和 Code First 方法。

当我对我的模型进行更改并运行应用程序时，我收到一个关于无法删除数据库的错误，因为它正在使用中。

为了解决这个问题，我已经实现了自己`IDatabaseInitializer`的强制单个连接，如下所示：

```
public class ForceDropCreateDatabaseInitializer<T> : IDatabaseInitializer<T> where T : DbContext, new()
{
    public ForceDropCreateDatabaseInitializer(Action<T> seed = null)
    {
        Seed = seed ?? delegate { };
    }

    public Action<T> Seed { get; set; }

    public void InitializeDatabase(T context)
    {
        if (context.Database.Exists())
        {
            string databaseName = context.Database.Connection.Database;
            string alterStatement = "ALTER DATABASE [{0}] SET SINGLE_USER WITH ROLLBACK IMMEDIATE";
            string dropStatement = "USE [master] DROP DATABASE [{0}]";

            context.Database.ExecuteSqlCommand(alterStatement, databaseName);
            context.Database.ExecuteSqlCommand(dropStatement, databaseName);
        }

        context.Database.Create();

        Seed(context);
    }
} 
```

但现在我在这一行收到权限错误：

`context.Database.ExecuteSqlCommand(alterStatement, databaseName);`

**异常消息：**

> 用户无权更改数据库“@p0”，数据库不存在，或数据库未处于允许访问检查的状态。
> 
> ALTER DATABASE 语句失败。

我假设使用了@p0，因为我正在使用参数。每次进行模型更改时，如何避免此错误并成功删除并创建我的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:20:55.707

我试图在这里使用您的问题来解决我删除正在使用的数据库的问题。不幸的是，我遇到了下面讨论的另一个问题。[这是我使用的代码，它可能会通过稍微不同的方式为您解决问题](http://freshbrewedcode.com/jonathancreamer/2011/12/20/espresso-tip-changing-those-nasty-constraint-names-in-code-first/)：

```
// Somewhere in Global.asax
Database.SetInitializer(new DbInitializer());

// DbInitializer    
public class DbInitializer : IDatabaseInitializer<Context>
{
    public void InitializeDatabase(Context context)
    {
        if (context.Database.Exists())
        {
            //if (!context.Database.CompatibleWithModel(true))
            //{
                string singleUserModeCommand =
                string.Format("ALTER DATABASE [{0}] SET SINGLE_USER WITH ROLLBACK IMMEDIATE",
                            "databasename" /*context.Database.Connection.Database does not seem to work here so i have "fixed" the database name rather than letting it be dynamic*/);
                if (context.Database.Exists())
                {
                    context.Database.ExecuteSqlCommand(singleUserModeCommand);
                    context.Database.Delete();
                }
                context.Database.Create();
                Seed(context);
            //}

        }
        else
        {
            context.Database.Create();
            Seed(context);
        }
    }

    protected void Seed(Context context)
    {

    }
} 
```

使用此代码时我遇到的最大问题是

```
context.Database.Connection.Database 
```

似乎不想解析数据库名称并一直给我错误：

> 缺少对象或列名称或为空。对于 SELECT INTO 语句，验证每一列都有一个名称。对于其他语句，请查找空别名。不允许使用定义为 "" 或 [] 的别名。添加名称或单个空格作为别名。

所以我只是在我的 Context 类中修复了数据库名称：

```
public class MyContext : DbContext
{
    public MyContext()
        base: ("databasename")
    {}
} 
```

# haskell - 使用二叉树类型

> ID：14185705
> 
> 赞同：0
> 
> 时间：2013-01-06T19:09:38.693
> 
> 标签：haskell, types, tree, binary-tree, instance

我有这个类型声明，代表一棵二叉树：

```
data Bst a = Empty | Node (Bst a) a (Bst a) 
```

由于我是 Haskell 的新手，我不知道如何使用它。你能告诉我如何初始化它的一些实例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:18:12.980

单个 Int 节点：

```
 2

 Node Empty (2::Int) Empty 
```

那个树：

```
 2
   / \
  1   3

Node (Node Empty 1 Empty) 2 (Node Empty 3 Empty) :: Bst Int

    2
   / \
  1   3
       \
        5

Node (Node Empty 1 Empty) 2 (Node Empty 3 (Node Empty 5 Empty)) :: Bst Int 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T19:17:37.143

您的数据声明指出有两种方法可以构造 Bst：使用`Empty`构造函数或使用`Node`构造函数。

```
-- An empty Bst
bst1 = Empty

-- A Bst containing a single value.
bst2 = Node Empty 42 Empty

-- A Bst containing 3 values, 2 at the root, 1 in the left child and 3 in the right child.
bst3 = Node (Node Empty 1 Empty) 2 (Node Empty 3 Empty) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:54:23.570

我将稍微重写您的声明，以使用更惯用的参数顺序`Node`：

```
data Bst a = Empty | Node a (Bst a) (Bst a) 
```

`Empty`并且`Node`是 Haskell 所称的*构造函数*。构造函数有两种使用方式：

1.  作为构造其类型值的函数；
2.  作为特殊模式匹配语法中的模式来分析和反汇编其类型的值。

如果我们将您的类型加载到`ghci`解释器中，我们可以使用 ghci 的`:t`命令来显示您的构造函数的类型：

```
Ok, modules loaded: Main.
*Main> :t Empty
Empty :: Bst a
*Main> :t Node
Node :: a -> Bst a -> Bst a -> Bst a
*Main> 
```

`Empty`具有`Bst a`any类型的常量也是如此`a`，而`Node`生成`Bst a`给定三个参数的函数也是如此： an`a`和 two `Bst a`。因此，要构造该类型的值，您可以使用其中一个构造函数，为其提供所需数量的参数（在 的情况下为无，在 的情况下为`Empty`三个`Node`）和正确的类型。

让我再次强调这一点：*您可以使用构造函数，就像使用与构造函数相同类型的任何表达式一样*。因此，例如，就像您可以在 Haskell 中部分应用一个函数（将其应用到比它需要的更少的参数），您可以部分应用一个构造函数：`Node "foo" Empty`has type `Bst String -> Bst String`。

# c++ - C++ 中的接口和虚函数与 Java 接口的比较

> ID：14185707
> 
> 赞同：4
> 
> 时间：2013-01-06T19:09:43.117
> 
> 标签：c++, interface, header, virtual-functions

我有一个关于 C++ 虚函数的问题。该`virtual`关键字用于`class`基类中函数的 C++ 声明中，以通知该函数的子类实现可能因子类而异。不同的子类可能有不同的功能实现。

我有点不明白。就我现在所见，当您在 C++ 中定义接口时，它不像在 Java 中那样。

事实上，我不明白 C++ 中的接口这个词是什么意思。`virtual`您可以在头文件中指定一个函数。然后基类的子类或派生类可以以任何你想要的方式覆盖它，只要它是一个虚函数。

C++中的接口是头文件吗？

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T19:17:48.827

Java 和 C++ 之间的主要区别在于，Java 中的每个函数都是`virtual`.

从历史上看，当 C++ 被开发时，在每个函数调用之间放置一个抽象层（这是使用虚拟方法表发生的事情）并不是您对每个方法调用都想要的，因为虚拟方法调用较慢。

[**所以发生的情况是，您必须指定必须通过动态绑定**](http://en.wikipedia.org/wiki/Dynamic_dispatch)调用方法，否则在编译时根据变量的声明选择方法。这意味着，如果您声明`Base *b = new Derived()`并调用了一个`b`不是虚拟的方法，则在编译时选择该方法，它将是一个`Base::method`.

座右铭是*你不为你不使用的东西付费，就是*这样。

C++ 中的接口不存在，但您可以拥有一个仅具有纯虚函数的类，它们的行为方式基本相同。实际上你可以有两种虚拟方法：

```
class Base {
  virtual void method() {
    //implementation
  }
  virtual void pureMethod() = 0;
} 
```

首先`method()`是虚拟的并服从动态绑定，但它甚至在基类中实现，同时`pureMethod()`仍然服从动态绑定，但它被声明为纯虚拟，因此它没有任何实现，因此`Base`不能按原样实例化，您需要对其进行子类化并至少覆盖纯虚方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T19:36:21.597

Java 中的接口是一种特定的语言结构或关键字。Java 有一个关键字`interface`，用于指示 Java 类不提供实际实现，而是描述派生类必须实现的接口。Java 编译器会检查这一点，以确保声称实现接口的类为该接口提供了所有必要的方法。

在 Java 中，`interface`关键字表示一个类提供一组由指定的接口类描述的服务。一个 Java 类可以实现多个不同的接口。

在与 C++ 的讨论中使用接口这个词的方式是一个有点相似的概念，因为它与类或函数或方法的参数类型有关。但是 C++ 中没有`interface`关键字。接口这个词在 C++ 中以更通用、更具描述性的方式使用，如“函数接口有两条短线和一条长线”。它表示函数调用参数及其类型，函数调用者与函数体之间的接口。

因此，将 C++ 中的接口视为实现接口的类与使用从该类实例化的对象的任何对象之间的一种契约。一个类实际上还可以提供几个不同的相关服务，每个服务都有一个特定的接口。

`interface`通过在类描述中使用纯虚方法来创建抽象类，可以做类似于 C++ 中的 Java概念的事情。这将创建一个没有实现的 C++ 类。请参阅[C++：使用抽象方法创建抽象类并覆盖子类中的方法](https://stackoverflow.com/questions/2936844/c-create-abstract-class-with-abstract-method-and-override-the-method-in-a-sub)。

虚方法的作用是提供一种机制，使使用类的派生类的对象可以依赖于特定接口，同时将实现的细节留给派生类。所以这类似于Java接口。C++ 虚拟方法是一种使用编译和静态检查方法而不是运行时方法来实现 Java 接口的方法。

使用虚拟方法，您可以创建一个超类类型，该类型可用于创建指针变量，这些变量可以从派生类型中分配变量，并且当您使用虚拟方法时，将调用派生类中的正确方法。确定调用哪个方法是在编译时而不是运行时完成的。C++ 的主要思想是与 C 一样高效，同时提供面向对象的语言结构以及编译时的静态类型检查，以减少对运行时错误检测的依赖及其额外的开销。

```
class Joe {
public:
virtual int thingOne() { return 1;}  // standard, not pure virtual method
..
};

class JoeTwo : public Joe {
public:
int thingOne() { return 2;}   // derived class provides its own version of the method
..
};

Joe *myJoe = new JoeTwo;

int i = myJoe->thingOne();  // value of 2 put into i and not value of 1 
```

使用 C++，您确实需要识别对象和指向对象的指针之间的区别，因为当将包含派生对象的变量分配给包含派生对象的超类的变量时，可能会发生对象切片。这种“[对象切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)”会发生，因为派生对象不适合派生它的基类或超类对象。派生对象具有超类对象所没有的附加内容，因此通过分配（默认分配是直接内存复制）仅将派生对象的超类部分复制到超类对象中。

```
class Joe {
public:
virtual int thingOne() { return 1;}  // standard, not pure virtual method
..
};

class JoeTwo : public Joe {
public:
int thingOne() { return 2;}   // derived class provides its own version of the method
..
};

Joe *myJoe = new JoeTwo;    // no object slicing since this is pointer
JoeTwo myJoeTwo;
Joe  myJoeSliced = myJoeTwo;  // JoeTwo object myJoeTwo sliced to fit into Joe object myJoeSliced 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T19:14:14.090

C++没有像Java那样的接口。你得到的最接近的是当你定义一个只有纯虚函数的类时，这样从那个类派生的每个人都被迫实现所有这些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T19:16:00.263

C++ 中的虚方法是一种可以被覆盖的方法。纯虚方法（定义为*virtual foo() = 0*）是一种抽象方法。要创建一个类似于您在 Java 中使用的接口，您只需指定所有方法都是纯虚拟的（抽象的）。

但是，有时“接口”指的是通常完全位于标头内的类的公共成员和类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-06T19:46:11.217

c++ 类的接口在头文件中定义。仅当您想要子类化并使用继承时才使用虚函数。

在 C++ 中，最接近类似 java 的接口是使用纯抽象类。实现具有此接口的类必须继承此抽象类。

不要忘记将你的解构器设为虚拟，否则在引用基类时不会调用子类的解构器。

例子：

```
class PuppetInterface
{
public:

    virtual ~PuppetInterface() {};

    virtual void walk() = 0;

    virtual void tellALie() = 0;
};

class Pinocchio : public PuppetInterface
{
public:

    ~Pinocchio()
    {
        //lie down look dead.
    }

    void walk()
    {
        //try moving wooden legs.
    }

    void tellALie()
    {
        //let nose grow look serious.
    }
};

int main(int argc, const char * argv[])
{
    PuppetInterface* pinocchio = new Pinocchio();
    pinocchio->walk();
    pinocchio->tellALie();

    delete pinocchio;

    return 0;
} 
```

**编辑**：由于原始指针不好，不能保存异常，可能会泄漏等。上面的代码应该重写为

```
//using c++ 11
int main(int argc, const char * argv[])  
{
    auto pinocchio = std::unique_ptr<PuppetInterface>(new Pinocchio());
    pinocchio->walk();
    pinocchio->tellALie();  
 } 
```

# perl - node.js 中的模拟 Perl crypt() 函数

> ID：14185710
> 
> 赞同：-1
> 
> 时间：2013-01-06T19:09:59.350
> 
> 标签：perl, node.js

在 node.js 中寻找 Perl crypt() 函数。

```
perl -e 'print crypt("", "12345")' 
```

返回：12UFlHxel6uMM
在 node.js 中看起来相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:16:37.323

有一个功能强大且支持良好的节点包用于密码加密 - [bcrypt](https://npmjs.org/package/bcrypt)。

你想要的是：

```
var bcrypt = require('bcrypt');
var hash = bcrypt.hashSync('', '12345'); 
```

有关更多信息，请参阅[bcrypt API 文档](https://github.com/ncb000gt/node.bcrypt.js#api)。

* * *

**更新。**您还可以使用[Node 加密模块](http://nodejs.org/api/crypto.html)。在这种情况下，您可以使用[`crypto.pbkdf2`method](http://nodejs.org/api/crypto.html#crypto_crypto_pbkdf2_password_salt_iterations_keylen_callback)。本人较新使用，无法保证其稳定性、可用性和安全性。

我也不能保证 bcrypt 或 crypto 使用与 Perl crypt 方法相同的密码散列算法。所以即使 salt 相同，结果也可能与 Perl crypt 不同。

虽然 Node crypto 是一个内置模块，但我强烈建议您尽可能使用 bcrypt，因为它更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:14:50.620

你可能会从这个库中得到一些东西：[https ://npmjs.org/package/crypt](https://npmjs.org/package/crypt)

# call - C# 使用三元运算符。什么时候？

> ID：14185711
> 
> 赞同：1
> 
> 时间：2013-01-06T19:10:01.430
> 
> 标签：call, increment, ternary-operator, assignment-operator, decrement

使用三元运算符时遇到问题。

```
...
char symbol = str_base[i];
int count = 1;
...

(count == 1) ? str_rle += symbol : str_rle += count.ToString() + symbol; 
```

得到这样的错误： ***只有赋值、调用、递增、递减和新对象表达式可以用作语句***

为什么？三元运算符真的只适用于：调用函数，++ & -- 吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T19:16:19.577

行的左侧是比较而不是分配（不确定您要在这里做什么）。我希望您可以将三元运算符用于这种条件执行，但不幸的是您不能。在这种情况下，您可以在表达式的另一侧使用三元运算符；

```
str_rle += (count == 1) ? symbol : count.ToString() + symbol; 
```

# html - 在不使用框架的情况下在具有固定内容的页面上滚动菜单

> ID：14185715
> 
> 赞同：0
> 
> 时间：2013-01-06T19:10:24.210
> 
> 标签：html, css

我在一个页面上包含了谷歌地图。左侧是菜单，右侧是内容。

我希望左侧（菜单）滚动，但右侧（在这种情况下为内容，地图）不滚动。我不想使用框架或 Javascript。

我想用这段代码做到这一点：

```
<div  id="map" style="width:100%; height:100%; position:fixed;" ></div> 
```

演示：[演示](http://jsfiddle.net/PHUnW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:43:23.437

我经历并尝试重新格式化和修复一些元素重叠，使其更具可读性，我希望这会有所帮助。

另外，我用文本替换了 PHP 代码：`PHP_INSERT_LOCATION_#`以便我可以通过验证器运行它并确保我没有犯任何错误。

你说地图没有出现，这是因为地图高度是`100%`因为`0`body 的唯一其他元素`<div id="Menu">`, 是`position:absolute;`. 由于没有设置 body 的高度，所以 body 的高度保持为 0。

为了解决上述问题，我在`height:100%;`html、body 和 div.Content 中添加了样式，以使上述元素成为窗口的宽度，否则将尝试占用尽可能少的垂直空间。

此外，Google Maps 脚本似乎已添加`position:relative;`，`<div id="map">`因此您必须改为添加`position:fixed`到`Content`div，见下文：

在这里查看：http: [//jsbin.com/ulalac/](http://jsbin.com/ulalac/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
**** PHP_INSERT_LOCATION_1 *****
<?php echo session_id(); ?>
**** PHP_INSERT_LOCATION_2 *****
<?
$ray=mysql_query("select * from rayon");
while($r=mysql_fetch_object($ray)) {
    echo '<option value="'.$r->rayon.'">'.$r->rayon.'</option>
';
}
?>
-->
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>NN MAP</title>
    <link rel="stylesheet" type="text/css" media="all" href="http://nn-gis.com/mp/css/form.css" />
    <style type="text/css">
    /*<![CDATA[*/
    html,body,div#Content,div#map{height:100%;}
    div#Content{width:100%;position:fixed;}
    /*]]>*/
    </style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false"></script>
    <script type="text/javascript" src="http://nn-gis.com/mp/js/main.js"></script>
    <script type="text/javascript" src="http://nn-gis.com/mp/js/line.js"></script>
    <script type="text/javascript" src="http://nn-gis.com/mp/js/zoom.js"></script>
</head>
<body onload="load()">
<div id="Content">
    <div id="map"></div>
</div>
<div id="Menu">  
    <fieldset>
        <legend>Control Panel</legend> - <a href="logout.php">Logout</a>
        <br/>- <a href="javascript:void(0);" onclick="window.open('change.php?sid=PHP_INSERT_LOCATION_1','Reservoirs','height=300, width=460,scrollbars=no');">Change Password</a>
    </fieldset> 
    <fieldset>
        <legend>Active Layers</legend>
        <div class="glossymenu">
            <a class="menuitem submenuheader" href="#" >Points</a>
            <div class="submenu">
                <input type="checkbox" id="intake" onclick="boxclick(this,'intake')" checked="checked"/> <label>Intake</label>
                <br/>
                <input type="checkbox" id="reservoir" onclick="boxclick(this,'reservoir')" checked="checked"/> <label>Reservoirs</label>
                <br/>
                <input type="checkbox" id="wps" onclick="boxclick(this,'wps')" checked="checked"/> <label>WPS</label>
                <br/>
                <input type="checkbox" id="wtp" onclick="boxclick(this,'wtp')" checked="checked"/> <label> WTP</label>
                <br/>
                <input type="checkbox" id="wwps" onclick="boxclick(this,'wwps')" checked="checked"/> <label>WWPS</label>
                <br/>
                <input type="checkbox" id="wwtp" onclick="boxclick(this,'wwtp')" checked="checked"/> <label>WWTP</label>
                <br/>
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>Active Lines</legend>
        <form action="">
            <select id="rayon" onchange="line();">
                <option value="rayon">Select Rayon</option>
                <option value="rayon">Qebele</option>
            </select>
        </form>
    </fieldset>
    <fieldset>
        <legend>Projects</legend>
        <form action="">
            <select id="countyLocation" onchange="zoom();search();">
                <option value="center">Select Title</option>
                <!--
                PHP_INSERT_LOCATION_2
                -->
            </select>
        </form>
    </fieldset>
    <fieldset>
        <legend>Tables</legend>
            - <a href="javascript:void(0)" onclick="window.open('data/show.php?page=Reservoirs','Reservoirs','height=600, width=660,scrollbars=no')">Reservoirs</a>
            <br/>
            - <a href="javascript:void(0)" onclick="window.open('data/show.php?page=TBL_MAIN_INV','TBL_MAIN_ING','height=600, width=1024,scrollbars=no')">Main investment</a>
            <br/>
            - <a href="javascript:void(0)" onclick="window.open('data/show.php?page=TBL_MAIN_INV_BID','linkname','height=600, width=960,scrollbars=no')">Bidding Procedures</a>
            <br/>
    </fieldset>
    <fieldset>
        <legend>Analysis</legend>
        - <a href="javascript:void(0)" onclick="window.open('backup.php','backup','height=600, width=660,scrollbars=no')">Backup Data</a>
        <br/>
        <br/>  
        <br/>
    </fieldset>              
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:45:57.557

好的，这就是你想要的：

```
<div id="Content" style="position:absolute; top:0px; right:0px; bottom:0px; left:0px; ">
    <div id="map" style="width:100%; height:100%;" ></div>
</div> 
```

# ios - 如何使用 OpenCV 解决 iOS 链接错误

> ID：14185716
> 
> 赞同：2
> 
> 时间：2013-01-06T19:10:23.973
> 
> 标签：ios, opencv, linker

我正在尝试将最新版本的 openCV 添加到我的 iOS 项目中，但是当我编译时，我收到大约 30 个链接错误：

例子：

```
Undefined symbols for architecture i386:
"cv::merge(std::vector<cv::Mat, std::allocator<cv::Mat> > const&, cv::_OutputArray const&)", referenced from: 
```

我在一个带有简单视频捕获的虚拟应用程序中添加了 OpenCV 框架[以及所有其他必需的框架](http://docs.opencv.org/doc/tutorials/ios/video_processing/video_processing.html)（按照链接中的教程进行操作），它运行良好。

我不知道为什么它可以在一个地方如此顺利地工作，但在另一个地方却不行。我唯一的想法是我正在为两个应用程序之间的不同架构进行编译，但我认为我的目标是 armv7 和 armv7s。

关于可能导致链接错误的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-06T21:22:21.327

# mysql - 组和他们的楼层 - MySQL 加入

> ID：14185721
> 
> 赞同：0
> 
> 时间：2013-01-06T19:10:47.717
> 
> 标签：mysql, join

我有一个组表（“程序员”、“设计师”、“人力资源”等）和相应的 ID。我还有一张员工表。每个员工都属于一个组。在员工表中，我有一个楼层字段 - 指示他们在哪个楼层。

预计员工表和组表在今年都将保持不变。

我想在名为“constant_floor”的组表中添加一个新字段。如果一个组中的所有员工都在同一楼层，则它将是楼层的编号。否则为0。

关于如何有效实现这一目标的任何想法？我的员工表中有大约 50,000 行和 10,000 个不同的组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T21:48:53.230

这个查询应该做你想要实现的：

```
 update 
    groups g 
      left join
    (select floor_no, group_id, count(distinct floor_no) 
       from employees group by group_id having count(distinct floor_no) = 1) temp
      on g.id = temp.group_id
  set g.constant_floor = ifnull(temp.floor_no, 0); 
```

我假设您`index`在（也许通过关系）`group_id`中有一个。如果您没有，我建议您创建一个）。那么查询应该不会花费很多时间。`employees table``foreign_key``update`

此外，也许您可​​以在 中创建一个临时`index`的`floor_no`并`employees table`在`update`.

sqlFiddle在这里：[http ://sqlfiddle.com/#!2/c9866/1](http://sqlfiddle.com/#!2/c9866/1)

# java - Android：按文件名播放/res/raw中的音频文件

> ID：14185728
> 
> 赞同：3
> 
> 时间：2013-01-06T19:11:33.800
> 
> 标签：java, android, file, audio

在我的应用程序的 /res/raw/ 文件夹中，我有：`file1.ogg file2.ogg ... fileN.ogg`

在本地数据库中，我有对文件名的引用，即`file1 file2 ... fileN`.

给定其中一个字符串，比如说`fileM`，我如何播放包含在其中的音频`fileM.ogg`？在这里寻找相关的 Java 代码。

这是我目前看到的：

```
String name = "plumber";
String link = "/res/raw/" + name + ".ogg";

try {
    mp.setDataSource(link); //earlier: mp = new MediaPlayer();
    mp.prepare();
    mp.start();
} catch (Exception e) {
    Toast.makeText(PlayScreen.this, "ERROR: audio player not working.", Toast.LENGTH_LONG).show(); 
} 
```

我在吐司中收到错误消息。我也试过`link`没有“/res/raw”的字符串。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T19:18:51.570

```
MediaPlayer player = new MediaPlayer();
String path = "android.resource://" + getPackageName() + "/raw" + filename;
try {
     player.setDataSource(context, Uri.parse(path));
     player.prepare();
     player.start();
} catch (IOException e) {
     e.printStackTrace();
} 
```

尝试使用或不使用扩展名“.mp3”

希望我能帮助你

# ide - 我可以像 javaNetbeans 一样使用 Notepad++/PyCharm 吗？

> ID：14185741
> 
> 赞同：-3
> 
> 时间：2013-01-06T19:12:47.503
> 
> 标签：ide, notepad++, pycharm

我正在 Python2.7 上用 Notepad++ 编写代码现在我正在寻找任何方式，例如提供自动关键字检测的 java Netbeans。也可以在 Notepad++ 中使用。我还可以使用notepad ++调试我的代码吗，目前从命令提示符终端运行它。另外我想知道我是否也可以在这里看到输出而无需进入命令提示符。

***PyCharm 是用于开发 python 代码的开源 IDE 吗？***

***有任何开源 IDE 来开发 python 程序吗？***

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:15:53.587

Notepad++ 是一个多语言源代码编辑器，而不是一个多语言 IDE。如果您需要 Python 开发的集成开发环境，则有商业和免费/开源选项可供您使用。

您可以参考以下 SO 问题以获取 Python IDE 的列表

[是否有适用于 Windows 的良好、免费的 Python IDE？[关闭]](https://stackoverflow.com/questions/126753/is-there-a-good-free-python-ide-for-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:15:36.887

您需要的是 Eclipse，一个广泛的 IDE，到目前为止，Eclipse 使 Notepad++ 和其他任何东西都黯然失色。最好的扩展是[PyDev](http://pydev.org/)

相关： [最好的python编辑器是什么？](https://stackoverflow.com/questions/7872640/what-is-the-best-python-editor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T19:18:27.567

Notepad ++ 是一个文本编辑器。

Netbeans 是一个 IDE。

我相信你可以用 Notepad++ 做一些花哨的事情，但是对于严肃的 Python 编码，你可以尝试具有强大的 Python 集成的 Eclipse（直接在 IDE 中进行代码调试、断点、控制台......）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T19:31:05.373

Notepad++ 是一个**文本编辑器**。这无非是花哨的语法突出显示和*一些*代码完成。文本编辑器不会为您提供全套强大的工具和选项，因为它们的目标是介于成熟的 IDE 之间但没有臃肿的东西。这些通常假定您可以使用第三方应用程序调试您的代码。

Netbeans 是一个**IDE**。IDE 的唯一目的是实现软件的快速开发，因此它添加了额外的功能，例如良好的代码完成、重构工具、调试工具，并且某些 IDE 甚至可以与版本控制系统 (VCS) 集成。

最终，答案是“不”，你不能像使用 Netbeans 那样真正使用 Notepad++。但是如果 Notepad++ 有插件支持的话，那肯定是*可以的*。相反，下载 Netbeans 并使用它会不会那么痛苦。

^(或者，您可以查看其他非免费 Python 编辑器。 [IntelliJ](http://jetbrains.com/idea)和[PyCharm](http://jetbrains.com/pycharm)是目前最好的两个。)

# java - Java RegEx 替换 XML 标记名称

> ID：14185749
> 
> 赞同：2
> 
> 时间：2013-01-06T19:14:05.207
> 
> 标签：java, regex

我正在尝试用 XXYY1 替换 XML 标记中的 MessageParam ...

```
The MessageParam has requested to travel <BR/>From <MessageParam name="0" desc="city code"/> to <MessageParam name="1" desc="city code"/> on <MessageParam name="2" desc="date"/> at <MessageParam name="3" desc="time"/>. 
```

我希望输出是

```
The MessageParam has requested to travel <BR/>From <XXYY1 name="0" desc="city code"/> to <XXYY2 name="1" desc="city code"/> on <XXYY3 name="2" desc="date"/> at <XXYY4 name="3" desc="time"/>. 
```

这是我的代码

```
private void ProcessString()
{
    String text = "The Traveler has requested to travel <BR/>From <MessageParam name=\"0\" desc=\"city code\"/> to <MessageParam name=\"1\" desc=\"city code\"/> on <MessageParam name=\"2\" desc=\"date\"/> at <MessageParam name=\"3\" desc=\"time\"/>.";
    int Counter = 0;
    StringBuffer outString = new StringBuffer();
    Pattern pattern = Pattern.compile("(<MessageParam.*?>)");
    Matcher matcher = pattern.matcher(text);

    while (matcher.find())
    {
        Counter++;
        String sReplacer = new StringBuffer("XXYY").append(Counter).toString();
        matcher.appendReplacement(outString, sReplacer);
    }
    matcher.appendTail(outString);
    System.out.println(outString.toString());
  } 
```

我得到的输出是

```
 The MessageParam has requested to travel <BR/> From XXYY1 to XXYY2 on XXYY3 at XXYY4. 
```

我很确定我的正则表达式不正确。因为我不擅长正则表达式，所以我无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:16:20.013

我不会用正则表达式做这样的事情。

我更喜欢使用 Velocity 之类的模板引擎解析源 XML 并将目标值映射到输出 XML。

我的第二个选择是从一个 XML 到另一个 XML 的 XSL-T 转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T19:38:27.977

正则表达式应该是`(?<=<)MessageParam`

那会解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T03:48:59.280

只需`<MessageParam`用作正则表达式并`<XXYY`用作替换字符串部分。

# r - 删除条形背景保留面板边框

> ID：14185754
> 
> 赞同：37
> 
> 时间：2013-01-06T19:14:49.763
> 
> 标签：r, ggplot2

我有以下类型的绘图，并希望将单个构面框上方的每个条形文本保留为各种“标题”，但没有默认的灰色背景和`strip.background`. 我将它着色为接近我想要的白色，但希望底部边缘`strip.background`或顶部边缘为`panel.border`黑色。

![在此处输入图像描述](../Images/0735aa4bc018d0137c832a1de42be335.png)

```
library(ggplot2)

ggplot(mtcars, aes(mpg, hp)) + geom_point() +
    facet_wrap(~carb, ncol = 3) + theme_bw() +
    theme(panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        strip.background = element_rect(colour="white", fill="white"),
        panel.border = element_rect(colour = "black")) 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-06T19:20:24.680

如果您设置`element_blank()`为`strip.background`并保持`element_rect(colour="black", fill = NA)`为，`panel.border`则顶部边缘`panel.border`将为黑色。正如@adrien 所指出的， for `panel.background`fill 应该设置为 NA 以避免覆盖点（已经设置为默认值`theme_bw()`）。

```
ggplot(mtcars, aes(mpg, hp)) + geom_point() +
  facet_wrap(~carb, ncol = 3) + theme_bw() +
  theme(panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        strip.background = element_blank(),
        panel.border = element_rect(colour = "black", fill = NA)) 
```

![在此处输入图像描述](../Images/e27662fbdba48890d57b51c531ba4dc6.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-06-15T14:24:21.283

设置`panel.border`可能会覆盖您的图表，除非您还`fill=NA`添加`panel.border`：

```
theme(panel.border = element_rect(fill = NA, colour = "black")) 
```

也可以使用：

```
theme(panel.background = element_rect(fill = NA, color = "black") 
```

[来源](http://docs.ggplot2.org/dev/vignettes/themes.html)（“面板属性”部分）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-24T10:05:31.210

你可以试试：

```
 strip.background = element_rect(colour=NA, fill=NA),
 panel.border = element_rect(fill = NA, color = "black")) 
```

# jquery - nthchild 用于无限数量的实例

> ID：14185756
> 
> 赞同：0
> 
> 时间：2013-01-06T19:14:57.960
> 
> 标签：jquery

我有兴趣将 nthchild 命令用于无限数量的实例。我用 jQuery 创建了一个滑块，并为底部的每张幻灯片创建了导航按钮。

```
<div id="nav">
    <ul>
        <li id="button1"></li>
        <li id="button2"></li>
        <li id="button3"></li>
    </ul>
</div> 
```

我目前使用 jQuery 通过使用此代码和循环插件单击选定的按钮来前进到选定的幻灯片。

```
$('#button1').click(function() { 
    $('#slides').cycle(0); 
    return false; 
}); 
$('#button2').click(function() { 
    $('#slides').cycle(1); 
    return false; 
});  
$('#button3').click(function() { 
    $('#slides').cycle(2); 
    return false; 
}); 
```

我不想为每个滑块按钮创建一个 jQuery 命令，而是希望有一个命令使每个按钮都成为活动链接。我认为如果我可以使用无限数量的实例来使用 nthchild 就可以了。

我试过了，但没有用。

```
$('#nav ul li:nth-child(n)').click(function(){

    $('#slides').cycle(n);
    return false;

}); 
```

如果您对如何使其与第 n 个孩子一起工作或以不同的方式进行工作有任何想法，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T19:19:20.667

```
$('#nav ul li').on('click', function(){   //select all list elements
    $('#slides').cycle($(this).index()+1);//index is zero based
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T19:17:27.313

你可以使用这个：

```
$('li[id^="button"]').click(function() { 
    $('#slides').cycle(parseInt(this.id.slice(6),10)-1); // extracts the number from the id
    return false; 
}); 
```

`'[id^="button"]'`选择 id 以 . 开头的所有元素`button`。

使用 id 比使用 index 更可靠：您可以在这种方式之间添加其他元素。

# php - 动态生成的表单无法正常工作

> ID：14185761
> 
> 赞同：3
> 
> 时间：2013-01-06T19:15:48.907
> 
> 标签：php, javascript, html, ajax, dynamic

我有这个 ajax 函数，我动态地填充来自数据库的元素列表。它们中的每一个都作为显示图片和名称。它有一个带有变量的隐藏字段，该变量通过 POST 在另一个页面上被捕获，并显示图像和一些信息。

问题是有时隐藏字段中的ID参数似乎没有发送。表单已发送，但似乎没有捕获隐藏变量，显示随机图像和信息，而不是我最初单击的图像和信息。

这是我的代码：

```
function absurdSearch(textoBuscar){
    $.ajax({
        type    : "POST",
        url     : "service.php",
        dataType: "json",
        data    : {
            action:"absurdSearch",
            absurdText: textoBuscar
        },
        success:function(data){
            $("#testDiv").empty();
            var i;
            for (i = 0; i < data.data.length; ++i) {

                console.log(data);
                var divCreator ='';
                var str='projectsearch' + i;

                data.data[i].projectCategory

                var ProjectTypeIdName = data.data[i].projectCategory;
                switch (ProjectTypeIdName) {
                    case "1":
                        var urlFormSend='proyectos_arq.php';
                        var projectTypeName ='Proyectos <br/>Arquitectónicos';
                        break;
                    case "6":
                        var urlFormSend='proyectos_urb.php';
                        var projectTypeName ='Proyectos <br/>Urbanos';
                        break;
                    case "7":
                        var urlFormSend='arquit_pai.php';
                        var projectTypeName ='Arquitectura del <br/>Paisaje';
                        break;
                    case "8":
                        var urlFormSend='arquit_int.php';
                        var projectTypeName ='Arquitectura de <br/>Interiores';
                        break;
                    case "10":
                        var urlFormSend='arquit_trans.php';
                        var projectTypeName ='Arquitectura del <br/>Transporte';
                        break;
                }

                divCreator+='<div id="grupo'+i+' class="typeface-js" style="font-family:GreyscaleBasic"">';
                divCreator+='<div class="tipo-pro">';
                divCreator+='<div id="tipo_arq" class="tipo">'+projectTypeName+'</div>';
                divCreator+='<div id="tipo_arq_abajo" class="abajo"></div>';
                divCreator+='</div>';
                divCreator+='<div>';
                divCreator+='<div id="tipo_'+i+'"></div>';
                divCreator+='<div id="tipo_arq_abajo'+i+'"></div>';
                divCreator+='</div>';
                divCreator+='<div id="fotoproyectos'+i+'" ><img src="' + data.data[i].path + '" height="128" width="160"></div>';
                divCreator+='<div id="nombreproyectos'+i+'" ><form method="post" name="projectsearch'+i+'" id="projectsearch'+ i +'" action="'+urlFormSend+'">';
                divCreator+='<span style="cursor: pointer;" onclick="document.getElementById(\'projectsearch'+i+'\').submit()">"'+ data.data[i].projectName +'"</span>'
                divCreator+='<input name="project_id" type="hidden" id="project_id" value="' + data.data[i].projectId + '">';
                divCreator+='</form></div>';
                divCreator+='</div>';
                divCreator+='</div><br><br>';

                $("#testDiv").append(divCreator);

            };
        }
    })
}; 
```

这是实际捕获 POST 变量的代码。

```
<?php
require('server/php/methods.php');
$main = new main();
$project_id = $_POST['project_id'];
if (empty($project_id)) {
    list($name, $description, $path, $_images, $next_project_id, $previous_project_id = $main->projectRandom(7);
    $images = json_encode($_images);
}
else {
    list($name, $description, $path, $_images, $next_project_id, $previous_project_id) = $main->projectNumber(7, $project_id);
    $images = json_encode($_images);
} 
```

当我检查萤火虫时，一切似乎都很好，每个隐藏字段都分配了参数（project_id）。但有时它确实有效，有时则无效。

萤火虫：

![萤火虫](../Images/b1e1dcb6ef498444d706f3270ceeae59.png)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:06:43.253

您可以尝试使用 HTML 5 数据属性。

这是一篇解释它们的文章： http: [//ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

基本上只是添加一些类似的东西

`data-projectID="' + data.data[i].projectId + '"`

然后在您的 php 脚本中查找该属性。

# memory - x86 程序集正确使用数据段？

> ID：14185768
> 
> 赞同：0
> 
> 时间：2013-01-06T19:16:11.107
> 
> 标签：memory, assembly, x86, segments

我一直在开发一个 32 位操作系统，并且刚刚实现了一个 ELF 加载器。我可以加载可执行文件，但是我想运行每个程序都有自己的数据段。现在从我在 32 位保护模式下的研究中收集到的数据段指的是 64k 块，对吗？所以假设我将 DS 设置为 16，并且有类似 mov dword eax,[test] 的代码。处理器得到测试中的内容，如 (DS * 0xFFFF) + 测试，对吗？因此，如果 test 为 0，那么它将读取的实际地址是 983025 还是 0xEFFF1？这是对的还是我完全不在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:57:59.517

现在您正在开发自己的操作系统，数据段以及代码段和堆栈段几乎可以随心所欲。

在 386 个 PE 段寄存器中“指向”驻留在物理内存中的描述符表，其中每个段被分配 8 个字节（或者在 x64 中可能是 16 个字节？）来定义基地址、读/写/执行标志和段大小.

通常，这些限制设置为 0 和 2^32(-1)，这也称为平坦模式。

即使在使用 linux/cygwin 等兼容 gcc 时，也很有可能从分段架构中受益，因为知道每个内存访问都使用取决于基址寄存器的默认段。只要使用`mov [ebp + ... ]`或`mov [esp + ...]`作为基址寄存器访问所有局部变量，就使用堆栈段。这可用于异常处理以区分堆栈损坏和堆损坏。它可以用于自动增长数据/堆栈段等。它可以用于为应用程序提供分离的数据区域——也许可以通过分段实现内存映射文件 API——而不是 linux，其中 fs: 和 gs: 是为内核保留。

# c# - NHibernate 在修改现有实体时不触发更新语句

> ID：14185771
> 
> 赞同：1
> 
> 时间：2013-01-06T19:16:27.003
> 
> 标签：c#, asp.net, mysql, nhibernate, persistence

我在我的项目中使用 NHibernate & Net Persistence API 和 C# 和 MySql db，我有 UI 层 (ASP.NET)、业务层和数据访问层 (DAL)。我在 DAL 的 UserManager 类中有以下保存方法：

```
 private EntityManager GetEm()
        {
            if (_entityManager == null)
            {
                _entityManagerFactory = Persistence.CreateEntityManagerFactory("JPUMain");
                _entityManager = _entityManagerFactory.CreateEntityManager();
            }
            return _entityManager;
        }

        public void **Save**(IGenericEntity entity)
        {
            _entityManager = GetEm();
            _entityManager.GetTransaction().Begin();
            _entityManager.Persist(entity);
            _entityManager.Flush();            
            _entityManager.GetTransaction().Commit();            
            _entityManager.Clear();
        } 
```

我的用户实体：

```
 [Entity]
 [Table(Name = "user")]
 public class User : IGenericEntity
    {
        [Id]
        [GeneratedValue]
        public virtual int ID { get; set; }

        [Basic]
        [Column(Name = "fname", Nullable = false)]
        public virtual string FirstName { get; set; }

        [Basic]
        [Column(Name = "lname", Nullable = false)]
        public virtual string LastName { get; set; 
    } 
```

现在，如果我试图通过调用来保存用户：

```
UserManager.save(user) 
```

然后它将条目正确保存到db。但是说下次（任何时候，不是在同一个会话中）如果我尝试修改用户详细信息，那么它不会触发更新命令，而是触发插入，并使用修改用户实体插入一条新记录。我正在将用户的主键正确设置为修改后的对象。

此外，当我使用 NUnit 运行相同的测试用例时，它会打印以下行：

```
NHibernate: SELECT LAST_INSERT_ID()
NHibernate: INSERT INTO user (uid, fname, lname) VALUES (?p0, ?p1, ?p2);?p0 = 2[Type: Int32 (0)], ?p1 = 'First Name' [Type: String (9)], ?p2 = 'Last Name' [Type: String (9)] 
```

我尝试直接从用户表中的 phpmyadmin 运行此语句，它总是给出 0 值。我正在使用 InnoDB 引擎。

谁能告诉我为什么它不更新现有的用户实体？相反，它正在使用修改后的实体创建新记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:17:02.863

坚持永远不会触发更新。

深入研究 NH 源代码，您可能会看到在 [DefaultPersistEventListener](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Event/Default/DefaultPersistEventListener.cs)中真正实现的 Persist检查实体的状态：

```
public class DefaultPersistEventListener : AbstractSaveEventListener, IPersistEventListener
{
    //..
    public virtual void OnPersist(PersistEvent @event, IDictionary createdAlready)
    {
        //... 
        EntityState entityState = GetEntityState(entity, @event.EntityName, source.PersistenceContext.GetEntry(entity), source);

        switch (entityState)
        {
            case EntityState.Persistent:
                EntityIsPersistent(@event, createdAlready);
                break;
            case EntityState.Transient:
                EntityIsTransient(@event, createdAlready);
                break;
            case EntityState.Detached:
                throw new PersistentObjectException("detached entity passed to persist: " + GetLoggableName(@event.EntityName, entity));
            default:
                throw new ObjectDeletedException("deleted instance passed to merge", null, GetLoggableName(@event.EntityName, entity));
        }

} 
```

只有方法 EntityIsTransient 向数据库提交插入。因此，在您进行更新的会话上下文中，所讨论的实体是瞬态的。您应该在刷新之前将此实体加载或附加到会话的上下文中。SaveOrUpdate 方法可能是一个有用的快捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:00:12.010

您将实体保存在另一个 ISession 中，而不是用于检索实体的 ISession。

您能做的最好的事情是确保您使用的是相同的 ISession。我认为你真的应该考虑如何管理它。会话应该是短暂的，所以最好的办法是创建某种服务层来处理不同的用例。

# perl - 当我在 Perl 中声明/创建变量时，默认情况下它是本地的还是全局的？

> ID：14185776
> 
> 赞同：0
> 
> 时间：2013-01-06T19:16:47.247
> 
> 标签：perl, scope

在这个例子中：

```
#!/usr/bin/perl

$a = 4; # Is $a a local variable or a global variable?
print $a, "\n"; 
```

*$a*有什么样的范围？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T19:19:04.990

该特定变量`$a`是与 一起使用的预定义变量`sort`。但是，如果您使用`$x`它将被考虑

```
$main::x; 
```

它是包“main”中的一个全局变量，它是主脚本。

请注意，如果您`use strict`始终应该使用 ， perl 将强制您在使用变量时要具体。在这种情况下，您不能只使用

```
$x = 4; 
```

因为它会产生一个致命的异常`Global symbol "$x" requires explicit package name at ...`通常你会使用`my`or`our`来声明变量：

```
my $x = 4; 
```

但是，您也可以使用`$main::x`，只要您指定完整的变量名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T20:26:53.893

[我会假装你用过`$x`，而不是`$a`因为`$a`有点特别（因为它的使用`sort`）。]

> $xa 是局部变量还是全局变量？

Perl 中的两种变量是*lexical*和*package*。

没有声明^([1])，变量是包变量^([2])。这就是你所拥有的。具体来说，它是（编译代码的包在`$main::x`哪里）的简写。`main`

包变量是全局的，这意味着可以从代码中的任何位置看到它们。也就是说，可能需要使用他们的全名（例如`$main::x`）才能从某些地方看到他们。

* * *

1.  您的问题是学术性的，因为您应该*始终*使用`use strict;`明确禁止您使用未声明变量的内容。

2.  一些变量（例如`$_`, `$1`,`$a`等）是为您预先声明的，所以这并不适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T19:21:30.060

### 使用*my*或*local*作为范围变量

除非使用[my](http://perldoc.perl.org/functions/my.html)或[local](http://perldoc.perl.org/functions/local.html)关键字声明，否则 Perl 中的变量通常在包命名空间内具有全局范围。

# deployment - 从 Eclipse 构建 Azure 部署包失败

> ID：14185777
> 
> 赞同：2
> 
> 时间：2013-01-06T19:16:49.950
> 
> 标签：deployment, azure, eclipse-plugin, cloud, azure-configuration

[我刚刚按照 Microsoft 网站http://msdn.microsoft.com/en-us/library/windowsazure/hh690944.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh690944.aspx)上的步骤使用 Eclipse 创建了一个简单的 java 项目。

当我在“Windows Azure 部署项目”对话框上单击完成时，我收到以下错误对话框。

**构建过程中发生错误。在项目“AzureSample”上运行构建器“Windows Azure Dependency Builder”时出错。java.lang.NullPointerException**

我正在使用 jdk7 和 Tomcat 7。

任何人都可以就我可能缺少的东西提出建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T21:49:17.047

我遇到过同样的问题。我认为问题源于“组件”部分（Windows Azure 角色-> 组件）中缺少/损坏的项目。
我不确定，因为我无法复制它。我删除了我的部署项目并启动了 Eclipse（比它应该更频繁地解决问题）。

然而，我所做的改变是我将 Tomcat 7 指向一个新下载并解压缩的 zip。我删除了第一个部署项目（抛出了您描述的错误）并重新开始。然后我做了以下事情： 1\. 下载 apache-tomcat-7.0.39 64bit Tomcat zip 文件。2\. 解压到目录 3\. Windows Azure 角色 -> 服务器配置 -> 服务器设置“本地”到步骤 2 中的目录。

我的一个症状也消失了，那就是在组件（Windows Azure Role -> Components）中，如果我点击任何东西，它会抛出一个错误......我点击那里是因为列表中间有一个空导入.

# javascript - jsPDF添加图表

> ID：14185778
> 
> 赞同：4
> 
> 时间：2013-01-06T19:16:56.000
> 
> 标签：javascript, jspdf

我正在使用 jsPDF 通过 Appcelerator 的 Titanium 生成 PDF 文档。现在我需要添加一个包含两个段的简单饼图。我怎么能以最简单的方式做到这一点？

它不需要什么花哨的东西。我正在考虑先生成图像，然后将该图像添加到文档中。也许有一个库可以生成饼图的图像并将其保存到手机中。但是，我不确定 jsPDF 对图像的支持，我似乎找不到该库的任何好的文档。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-06T16:49:58.067

我知道它已经闲置了将近一年，但由于它没有公认的答案，我会尝试回答。

**将图表添加到 jsPDF**

1.使用 HTML Canvas 将图表转换为支持的图像格式（JPEG 或 PNG 以 base64 编码）。

2.确保 addImage 函数可以使用图像 URL。

下面是一个将图像添加到 jsPDF 文档的示例，而无需包含原始 base64 代码。它取自 jsPDF 示例。

```
function demoImages() {
    // Because of security restrictions, getImageFromUrl will
    // not load images from other domains.  Chrome has added
    // security restrictions that prevent it from loading images
    // when running local files.  Run with: chromium --allow-file-access-from-files --allow-file-access
    // to temporarily get around this issue.
    var getImageFromUrl = function(url, callback) {
        var img = new Image(), data, ret = {
            data: null,
            pending: true
        };

        img.onError = function() {
            throw new Error('Cannot load image: "'+url+'"');
        };
        img.onload = function() {
            var canvas = document.createElement('canvas');
            document.body.appendChild(canvas);
            canvas.width = img.width;
            canvas.height = img.height;

            var ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);
            // Grab the image as a jpeg encoded in base64, but only the data
            data = canvas.toDataURL('image/jpeg').slice('data:image/jpeg;base64,'.length);
            // Convert the data to binary form
            data = atob(data);
            document.body.removeChild(canvas);

            ret['data'] = data;
            ret['pending'] = false;

            console.log("data",data);

            if (typeof callback === 'function') {
                callback(data);
            }
        };
        img.src = url;

        return ret;
    };

    // Since images are loaded asyncronously, we must wait to create
    // the pdf until we actually have the image data.
    // If we already had the jpeg image binary data loaded into
    // a string, we create the pdf without delay.
    var createPDF = function(imgData) {
        var doc = new jsPDF();

        doc.addImage(imgData, 'JPEG', 10, 10, 50, 50);
        doc.addImage(imgData, 'JPEG', 70, 10, 100, 120);

        doc.save('output.pdf');

    }

    getImageFromUrl('thinking-monkey.jpg', createPDF);
} 
```

**jsPDF的好文档**

*[你将从他们的实用文档](https://github.com/MrRio/jsPDF/blob/master/examples/basic.html)*中学到很多 jsPDF 的特性。例如源代码，不要从 GitHub 下载，因为有些文件丢失了。你可以从[这里](http://www.teedim.com/js/parall.ax/jspdf/jsPDF-0.9.0rc2.zip)下载。

**注意**：去掉 basic.js 第 312 行的分号，使代码正常工作。

干杯，...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T20:41:10.810

也许您可以先查看[jsPDF](http://jspdf.com/)站点，您可以使用库（可能是谷歌图表）生成图像，将图表保存为图像，然后使用插件`jspdf.plugin.addimage.js`和一些代码添加到 PDF。这是取自他们网站的[示例](http://jspdf.com/)

```
var imgData = 'here the jpeg image string on base64';
var doc = new jsPDF();

doc.setFontSize(40);
doc.text(35, 25, "Octonyan loves jsPDF");
doc.addImage(imgData, 'JPEG', 15, 40, 180, 180); 
```

# ios - 直接从相机胶卷播放视频，可以吗？

> ID：14185781
> 
> 赞同：1
> 
> 时间：2013-01-06T19:17:12.150
> 
> 标签：ios, ios6, mpmovieplayercontroller

我在这个问题上运行了几天。我需要从我的相机胶卷中挑选一个视频并直接在我的应用程序中播放。我想知道的很简单：这可能吗？因为我下面的代码在我从相机胶卷中挑选视频后不会播放视频，我怀疑我可能需要在播放视频之前将视频保存在本地。

我的相关代码如下：

```
//...
if (CFStringCompare((CFStringRef)mediaType, kUTTypeMovie, 0)==kCFCompareEqualTo) {
    NSString *moviePath=[[info objectForKey:UIImagePickerControllerMediaURL]path];
    NSURL *movieURL=[NSURL URLWithString:moviePath];
    self.mpController=[[MPMoviePlayerController alloc]initWithContentURL:movieURL];

    NSLog(@"%@",moviePath);
    [[NSNotificationCenter defaultCenter]addObserver:self
                                            selector:@selector(moviePlayBackDidFinish:)
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:self.mpController];

    self.mpController.movieSourceType=MPMovieSourceTypeStreaming;
    self.mpController.controlStyle=MPMediaTypeMusicVideo;
    [self.mpController prepareToPlay];
    [self.mpController.view setFrame:self.view.bounds];
    [self.mpController setFullscreen:YES animated:YES];
    [self.view addSubview:self.mpController.view];
    [self.mpController play];

}
[[picker presentingViewController] dismissViewControllerAnimated:YES completion:NULL];

//...

-(void)moviePlayBackDidFinish:(NSNotification*)notification{
    NSLog(@"moviePlayBAckDidFinish");
    MPMoviePlayerController *player = [notification object];
    [[NSNotificationCenter defaultCenter]
     removeObserver:self
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:player];

    if ([player
         respondsToSelector:@selector(setFullscreen:animated:)])
    {
        player.fullscreen=NO;
        [player.view removeFromSuperview];
    }
} 
```

**PS**：通知处理程序`moviePlayBackDidFinish`总是在压缩视频后被调用，我得到一个空白屏幕。此外，记录`moviePath`变量给了我这种路径：

```
/private/var/mobile/Applications/5912AED1-S1DE-25EF-A8B-EF7AD21E3R65/tmp//trim.‌​uUcGJU.MOV 
```

正如我所说，我想我怀疑直接从相机胶卷播放视频是不可能的。但我需要你确认。谢谢。

# web - 响应式 Web 排版（用于 ems 中的行高计算） 需要代码说明

> ID：14185783
> 
> 赞同：1
> 
> 时间：2013-01-06T19:17:19.903
> 
> 标签：web, typography, css

我试图了解进入以下 CSS 样式的 CSS 计算过程。该代码来自响应式 Wordpress 主题，我无法弄清楚作者是如何得出`<h>`元素行高的 em 值的。我在[这里完成了以下教程。](http://coding.smashingmagazine.com/2011/03/14/technical-web-typography-guidelines-and-techniques/)

该教程非常有帮助，但我看不出下面代码的作者是如何得出他/她的数字的。如果有人能解释这位作者使用的公式和过程，我将不胜感激。看起来 14px 是基本字体大小，22px 是基本边距，它产生了 1.57142857 的基本前导（22 / 14 = 1.57142857）。除此之外，我看不到作者对元素的 line-height 值的推理。

```
body { font:normal 14px/1.57142857 Arial,"Helvetica Neue",Helvetica,sans-serif; }

h1, h2, h3, h4, h5, h6, 
p, blockquote, pre, address,
dl, ol, ul, table,
legend, hr, figure {    
margin-bottom:22px;
}

li > ul,
li > ol {
margin-bottom:0; 
}

/* Headings */
h1, .h1 { font-size:60px; line-height:1.10000000; font-weight:normal;  }
h2, .h2 { font-size:36px; line-height:1.16666667; font-weight:normal;  }  
h3, .h3 { font-size:24px; line-height:1.25000000; font-weight:normal;  }
h4, .h4 { font-size:18px; line-height:1.33333333; font-weight:normal; }
h5, .h5 { font-size:14px; line-height:1.57142857; font-weight:normal; }
h6, .h6 { font-size:12px; line-height:1.57142857; font-weight:normal; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:56:05.383

作者一定使用了[模块化比例尺。](http://modularscale.com/)

检查Zurb 的 Foundation 框架如何使用它的[描述](http://foundation.zurb.com/docs/typography.php)。

# jquery - PrimeFaces 编辑器

> ID：14185787
> 
> 赞同：5
> 
> 时间：2013-01-06T19:17:42.943
> 
> 标签：jquery, jquery-ui, primefaces

如何使文本默认从右向左对齐（p:editor）。

目前使用 primefaces 3.0.M2-SNAPSHOT。现在不能更新到新版本？

这是阿拉伯语版本的应用程序所必需的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:24:58.897

在 web.xml 中添加一个条目，例如

```
<context-param>
    <param-name>primefaces.DIR</param-name>
    <param-value>RTL</param-value>
</context-param> 
```

然后默认情况下，任何 primefaces 组件都会从右到左渲染文本

参考：[http ://blog.primefaces.org/?p=2283](http://blog.primefaces.org/?p=2283)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T23:23:12.600

并非所有 PrimeFaces 组件都具有属性“dir”，并且由于您使用的不是 3.5 版，因此您不能使用应用程序范围 DIR 参数。所以基本上，你有两个选择：

*   将棘手的 CSS 类动态应用于没有 DIR 属性的组件。就像是

    .rtlclass { 浮动：对；/* ETC */ }

    或者

dirClass 属性根据视图语言环境获取其值。如果是阿拉伯语，则 getter 返回“rtlClass”，否则返回“ltrCLass”。

如果碰巧 PrimeFaces 组件具有 DIR 属性，请在 bean 中编写如下内容：

```
public class FacesBean {

private String direction = "";

public FacesBean(){}

// Getter & setter

public String getDirection() {
        if (FacesContext.getCurrentInstance().getViewRoot().getLocale()
                .getLanguage() == "ar") {
            direction = "RTL";
        } else {
            direction = "LTR";
        }
        return direction;
    }

} 
```

并在您的 xhtml 文件中：

```
<p:component dir="#{facesBean.direction}" ..... /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T08:17:20.900

我这样做的方式很糟糕，但它对我有用：

```
<h:form id="form">
    <p:editor id="content"/>
    <script type="text/javascript" >
            jQuery(document).ready(function () {
                var myDiv = document.createElement('div');
                myDiv.align = 'right';
                var myBr = document.createElement('br');
                myDiv.appendChild(myBr);
                jQuery('#form\\:content').find('iframe').contents().find('body').append(myDiv);
            });
        </script>
</h:form> 
```

# google-maps - 谷歌地图以正确的顺序添加航点

> ID：14185794
> 
> 赞同：0
> 
> 时间：2013-01-06T19:18:31.007
> 
> 标签：google-maps

我想添加通过拖动路线点来更改路线的功能。它为 1 点工作，但下一个点是在第一个点之后添加的。当我拖到最后，然后在开始时，它会越过终点 end 然后回到起点。我从结果航点中添加了点并将其用于计算。

```
 var myroute = result.routes[0];
    for (var i = 0; i < myroute.legs.length; i++) {
      ges += myroute.legs[i].distance.value;
      for (var y = 0; y < myroute.legs[i].via_waypoints.length; y++) {
          waypoints.push({
            location: myroute.legs[i].via_waypoints[y],
            stopover: false
          });
        }; 
```

我用optimizeWaypoints尝试过，但也没有用。

```
 var selectedMode = document.getElementById('mode').value;
    var request = {
        origin: start,
        destination: ende,
        waypoints: waypoints,
        optimizeWaypoints: true,
        travelMode: google.maps.TravelMode[selectedMode]
    }; 
```

它在地图上显示正确，但在图表中显示错误。（其拖动的顺序）

```
 directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);

      elevationService.getElevationAlongPath({
          path: response.routes[0].overview_path,
              samples: SAMPLES
      }, plotElevation); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T20:49:54.217

问题解决了，拖动后我没有清除变量。所以路由总是在拖动后添加

# xml - 将 XML 文件转换为 TRECTEXT 格式

> ID：14185805
> 
> 赞同：1
> 
> 时间：2013-01-06T19:19:31.883
> 
> 标签：xml, bash, shell, converter

我有来自 INEX 的 IMDB 集合，其中包含数千个目录中的数百万个 XML 文件，其结构如下：

```
- actors
-- 000
--- person_1000.xml
--- ...
-- 001
--- person_1001.xml
--- ...
...
- movies
-- 000
--- 10000.xml
--- ...
... 
```

我需要将这些文件转换为 TRECTEXT 格式，即

```
<DOC>
 <DOCNO> document_number </DOCNO>  
 <TEXT>  XML file goes here. </TEXT>  
</DOC> 
```

其中 document_number 应该是不带扩展名的文件名，例如 person_1000.xml -> person_1000 和 XML 文件的内容应该包含在标签中。

我假设我需要一些脚本来包装集合中的每个 XML 文件，以及如上所示的标签并覆盖原始文件。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T00:44:24.927

我不熟悉 TRECTEXT 格式，但这是一个使用 Perl 的单行代码，应该可以满足您的要求：

```
find . -type f -name "*.xml" -exec perl -MFile::Basename -0777pi.bak -e 's#(.*)\n#"<DOC>\n <DOCNO> ".basename($ARGV,".xml")." </DOCNO>\n <TEXT> ".$1." </TEXT>\n</DOC>\n"#es' {} \; 
```

`.bak`如果您不想保留任何备份文件，显然删除扩展名。如果您有任何问题，请告诉我。干杯。

* * *

更新，根据评论：

```
find . -type f -name "*.xml" -exec perl -MFile::Basename -0777pi.bak -e 's#.*#"<DOC>\n <DOCNO> ".basename($ARGV,".xml")." </DOCNO>\n <TEXT> ".$&." </TEXT>\n</DOC>\n"#es' {} \; 
```

# actionscript-3 - 在actionscript 3中保存文件

> ID：14185808
> 
> 赞同：0
> 
> 时间：2013-01-06T19:19:39.233
> 
> 标签：actionscript-3, bitmap

我以前使用共享对象来保存我的游戏进度数据...

所以我做了一个大数组并保存了变量的值并将其保存到一个cookie中..

但是这次我使用了一些位图屏幕截图..所以如果我创建一个在这些位图制作后获取值的变量并保存到 cookie 中，则相同的方法似乎不起作用..当我加载它时，位图消失..

有人知道我可以用 cookie 保存这些位图的方法吗？或任何其他文件保存方法？

## *编辑

```
var bmp:BitmapData;
var myImages:Array = new Array();

red_square.addEventListener( MouseEvent.CLICK, firstchoice);
    function firstchoice (e:MouseEvent){

        bmp = new BitmapData(167, 167);
       myImages[0] = new Bitmap (bmp);
        addChild(myImages[0]);
        myImages[0].x=151;
        myImages[0].y=371;
        bmp.draw (red_square);
            gotoAndStop(5);

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:47:02.077

如果要将位图数据保存在 cookie 中，可以将其传递给 byteArray，然后将其传递给 Base64 String。您可以将其保存在 cookie 中。要使用它，您只需执行相反的过程。

但我不认为将屏幕截图保存在 cookie 中是一个好政策。当您使用 actionScript 3 时，我会使用[Flash Shared Objects](http://www.republicofcode.com/tutorials/flash/as3sharedobject/)保存所有内容。

[您可以使用as3corelib](https://github.com/mikechambers/as3corelib)类将其传递给 PNG 或 JPG字节数组：

```
var jpgEncoder:JPGEncoder = new JPGEncoder( 85 );
var bytes:ByteArray = jpgEncoder.encode( btm ); 
```

或者

```
var bytes:ByteArray = PNGEncoder.encode( btm ); 
```

他们将字节保存到 LocalStorage

```
var screenshots:SharedObject = SharedObject.getLocal("screenshotsObjectID");
if (screenshots.data == null){
    screenshots.data = {};
}
if (screenshots.data.screensObject == null){
    screenshots.data.screensObject = {};
}

screenshots.data.screensObject["someStringToIdentifyTheImage"] = bytes;

screenshots.flush(); 
```

您可以根据需要保存图像。您可以将 someStringToIdentifyTheImage 更改为序列号、时间戳或任何其他内容。或者你可以说 screenObject 是一个«n 数组，然后将图像推入其中。

# java - 在客户端计算机中实现小型数据库应用程序

> ID：14185809
> 
> 赞同：1
> 
> 时间：2013-01-06T19:19:48.757
> 
> 标签：java, database, netbeans-7, embedded-database

关于在 JAVA 中使用 Netbeans 7.2 为学校生成的小型数据库应用程序的实现，我有两个问题。

1.  我正在使用 MS SQL Server 2008 和使用 Netbeans 7.2 的 java。如果我将在我的客户端计算机上实现我的数据库应用程序，我是否需要在我的客户端计算机上安装 MS SQL Server 2008 以使用小型数据库应用程序。

2.  我在 MS SQL Server 2008 中为我的小型数据库应用程序创建的数据库我可以使用 Netbeans 7.2 将我的数据库文件嵌入到我的数据库应用程序中，因为我创建的数据库文件在我的计算机上。那么我将如何在我的客户端计算机上使用数据库文件实现我的小型数据库应用程序，而无需在我的客户端计算机上安装 MS SQL Server 2008。

我的数据库应用程序开发工具：

1.  语言 JAVA
2.  IDE Netbeans 7.2
3.  数据库 MS SQL Server 2008
4.  Windows 7的
5.  贾斯珀 iReport

我的数据库应用程序 Java 数据库连接类文件源代码，因此我如何将 Java 数据库连接源代码转换为嵌入式数据库源代码，因为 Java 驱动程序管理器使用当前我的计算机 MS SQL Server 2008 实例名称以及用户名和密码。

```
import java.sql.*;
import javax.swing.*;

public class Conect {
    Connection conn=null;

    public static Connection Connector()
    {
    try 
        {
         Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
         Connection conn = DriverManager.getConnection("jdbc:sqlserver://STAR;databaseName=test","me","778899");
        return conn;
        }

         catch (Exception exp)
            {
            JOptionPane.showMessageDialog(null, exp);
            }
        return null;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:30:37.773

如果您有一个需要数据库的“桌面”应用程序（即，它需要保留一个未在用户之间共享的数据集），请使用嵌入式数据库引擎。对于 Java，[H2](http://www.h2database.com/html/main.html)是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:22:23.903

1.  可能是的，除非您的客户端可以访问在远程计算机上运行的 SQL Server。
2.  NetBeans 是一个 IDE。它应该与您如何实现和部署应用程序没有太大关系。当然没有必要部署应用程序。如果您过分依赖它，那么当它超出您的想象时，您很可能会遇到问题。

如果您需要客户端的数据库，您可以使用 Hypersonic（由 Millimoose 推荐）或 Derby（它已经是 JDK 7 及更高版本的一部分）或 SQLLite。除了 SQL Server 之外，嵌入式本地数据库还有很多选择。好消息是，只要 SQL 足够通用，您的代码只需更改连接 URL 和 JDBC 驱动程序 JAR。

# html - 如何在 IE10 Mobile 中制作固定 div？

> ID：14185811
> 
> 赞同：2
> 
> 时间：2013-01-06T19:19:57.830
> 
> 标签：html, css, windows-phone, windows-phone-8, internet-explorer-10

如何在 Windows Phone 8 上制作与 IE10 Mobile 一起使用的固定 div？我目前使用的代码是：

```
<div style="position:fixed;width:100%;background-color:blue;">
    test
</div> 
```

这仅部分有效。当用户滚动时，div 滑回原来的位置。它在横向上也根本不起作用。是否有任何替代方法可以制作 Internet Explorer 10 移动版支持的固定 div？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T19:26:54.970

```
div 
{
    position:fixed;
    width:100%;
    background:blue;
    top:0; /* bottom:0 */
    left:0; /* right:0 */
    height:200px; /* You can specify here as you want */
} 
```

使用时`position:fixed`，您必须至少给出一侧声明。它应该保持固定的地方，例如`top:0;`

# c# - C# WPF：通过单击按钮更改当前选项卡？

> ID：14185814
> 
> 赞同：4
> 
> 时间：2013-01-06T19:20:53.063
> 
> 标签：c#, wpf, tabs

我想在 tab1 上有一个按钮。单击该按钮时，我想被带到tab2。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T19:39:49.250

你可以使用`SelectedIndex`属性。

例子：

```
 <TabControl x:Name="myTabControl">
          <TabControl.Items>
                    <TabItem Header="Tab1">
                        <StackPanel>
                            <TextBlock Text="Tab1 Content" />
                            <Button Content="Go to Tab2" Margin="5" 
                                    HorizontalAlignment="Center" 
                                    Click="Button_Click"/>
                        </StackPanel>
                    </TabItem>

                    <TabItem Header="Tab2">
                        <TextBlock Text="Tab2 Content" />
                    </TabItem>
          </TabControl.Items>
   </TabControl> 
```

代码隐藏：

```
 private void Button_Click(object sender, RoutedEventArgs e)
 {
    myTabControl.SelectedIndex = 1;
 } 
```

# c++ - 在 Cygwin 上编译 MongoDB C++ 驱动程序

> ID：14185815
> 
> 赞同：1
> 
> 时间：2013-01-06T19:21:26.123
> 
> 标签：c++, mongodb, cygwin, nosql

我尝试使用“scons”命令在 Cygwin 上编译 MongoDB C++ 驱动程序，但出现以下错误：

```
src/mongo/db/nonce.cpp:48:20: error: ‘srandomdev’ was not declared in this scope 
```

那是什么库？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:03:13.737

srandomdev 函数在 BSD 或 OSX 系统上的**stdlib.h**中可用，但在 Cygwin 或 Linux 等 GNU 系统上不可用。

看起来构建脚本无法识别您在 Cygwin 上运行的事实。您可以尝试几个选项。最简单的是

## 更改 ifdef 子句

如果没有 Windows 机器对此进行测试，很难确认这是否适合您。在*src/mongo/platform/random.cpp*中，编辑第 108 行

```
#elif defined(__linux__) || defined(__sunos__) || defined(__APPLE__) 
```

成为

```
#elif defined(__linux__) || defined(__sunos__) || defined(__APPLE__) || defined(__CYGWIN__) 
```

## 删除最后一个 else 子句

*找到src/mongo/platform/random.cpp*的行（在我的版本中为 141），看起来像

```
#else
class SRandSecureRandom : public SecureRandom {
public: 
```

删除直到`#endif`子句的行，然后编辑

```
#elif defined(__linux__) || defined(__sunos__) || defined(__APPLE__) 
```

简单地成为

```
#else 
```

# xml - 检查 xslt 模板中的重复值

> ID：14185819
> 
> 赞同：0
> 
> 时间：2013-01-06T19:21:33.590
> 
> 标签：xml, templates, xslt-1.0, output

鉴于此 xml 示例文档：

```
<?xml version="1.0"?>
<Brown1>
   <Transaction>
    <Acct_Id>7801177</Acct_Id>
    <Acct_Nm>Name1</Acct_Nm>
    <Trans_Num>116902</Trans_Num>
    <Trans_Desc>Buy</Trans_Desc>
    <Trans_Result>Closed</Trans_Result>
   </Transaction> 
   <Transaction>
    <Acct_Id>7801177</Acct_Id>
    <Acct_Nm>Name1</Acct_Nm>
    <Trans_Num>116903</Trans_Num>
    <Trans_Desc>Sell</Trans_Desc>
    <Trans_Result>Closed</Trans_Result>
   </Transaction> 
   <Transaction>
    <Acct_Id>7801177</Acct_Id>
    <Acct_Nm>Name1</Acct_Nm>
    <Trans_Num>116904</Trans_Num>
    <Trans_Desc>Buy</Trans_Desc>
    <Trans_Result>Open</Trans_Result>
   </Transaction> 
   <Transaction>
    <Acct_Id>8692031</Acct_Id>
    <Acct_Nm>Name2</Acct_Nm>
    <Trans_Num>116932</Trans_Num>
    <Trans_Desc>Buy</Trans_Desc>
    <Trans_Result>Open</Trans_Result>
   </Transaction> 
    <Transaction>
    <Acct_Id>8692031</Acct_Id>
    <Acct_Nm>Name2</Acct_Nm>
    <Trans_Num>116999</Trans_Num>
    <Trans_Desc>Sell</Trans_Desc>
    <Trans_Result>Closed</Trans_Result>
   </Transaction> 
</Brown1> 
```

我想出来的是这个

```
7801177 Name1

116902 Buy Closed
116903 Sell Closed
116904 Buy Open

8692031 Name2
116932 Buy Open
116999 Sell Closed 
```

基本上只打印一次帐户和名称

设置模板有点像这样：

```
<xsl:template name="header">
  <xsl:value-of select="Acct_Id"/>
  <xsl:value-of select="Acct_Nm"/>

  <xsl:call-template name="report_data">
</xsl:template>

<xsl:template name="report_data">
  <xsl:for-each select=".">
    <xsl:value-of select="Trans_Num"/>
    <xsl:value-of select="Trans_Desc"/>
    <xsl:value-of select="Trans_Result"/>
  </xsl:for-each>
 </xsl:template> 
```

这产生`Acct_Id`&`Acct_Nm`每次。如果下一个节点处理时它们相同，我该如何排除它们？

我假设在标题模板中，但我一直无法得到解决方案。

这似乎是一件简单的事情？...

我可以将其保存`Acct_Id`在标题模板中并将其与下一个进行比较并且`Acct_Id`仅在不同时打印？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:09:26.547

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kTransByAcct" match="Transaction" use="Acct_Id"/>

 <xsl:template match=
  "Transaction[generate-id()
              =generate-id(key('kTransByAcct',Acct_Id)[1])]">
    <xsl:value-of select="concat('&#xA;',Acct_Id, ' ', Acct_Nm, '&#xA;')"/>
    <xsl:apply-templates select="key('kTransByAcct',Acct_Id)" mode="group"/>
 </xsl:template>

 <xsl:template match="*" mode="group">
  <xsl:value-of select="concat('&#9;',Trans_Num,' ',Trans_Desc,' ',Trans_Result,'&#xA;')"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Brown1>
   <Transaction>
    <Acct_Id>7801177</Acct_Id>
    <Acct_Nm>Name1</Acct_Nm>
    <Trans_Num>116902</Trans_Num>
    <Trans_Desc>Buy</Trans_Desc>
    <Trans_Result>Closed</Trans_Result>
   </Transaction>
   <Transaction>
    <Acct_Id>7801177</Acct_Id>
    <Acct_Nm>Name1</Acct_Nm>
    <Trans_Num>116903</Trans_Num>
    <Trans_Desc>Sell</Trans_Desc>
    <Trans_Result>Closed</Trans_Result>
   </Transaction>
   <Transaction>
    <Acct_Id>7801177</Acct_Id>
    <Acct_Nm>Name1</Acct_Nm>
    <Trans_Num>116904</Trans_Num>
    <Trans_Desc>Buy</Trans_Desc>
    <Trans_Result>Open</Trans_Result>
   </Transaction>
   <Transaction>
    <Acct_Id>8692031</Acct_Id>
    <Acct_Nm>Name2</Acct_Nm>
    <Trans_Num>116932</Trans_Num>
    <Trans_Desc>Buy</Trans_Desc>
    <Trans_Result>Open</Trans_Result>
   </Transaction>
    <Transaction>
    <Acct_Id>8692031</Acct_Id>
    <Acct_Nm>Name2</Acct_Nm>
    <Trans_Num>116999</Trans_Num>
    <Trans_Desc>Sell</Trans_Desc>
    <Trans_Result>Closed</Trans_Result>
   </Transaction>
</Brown1> 
```

**产生想要的正确结果：**

```
7801177 Name1
    116902 Buy Closed
    116903 Sell Closed
    116904 Buy Open

8692031 Name2
    116932 Buy Open
    116999 Sell Closed 
```

**说明**：

正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

**更新**：

OP 强烈要求“非关键解决方案”。

请注意，非密钥解决方案具有二次时间复杂度 - O(N^2)，而基于密钥的解决方案接近 O(1)。前者可能比后者慢许多数量级。

**我强烈建议并敦促您*不要*将基于非密钥的 XSLT 1.0 解决方案用于任何实际目的**。

这是请求的非基于键的分组解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Transaction[not(Acct_Id=preceding-sibling::*/Acct_Id)]">
    <xsl:value-of select="concat('&#xA;',Acct_Id, ' ', Acct_Nm, '&#xA;')"/>
    <xsl:apply-templates mode="group" select=
    ". | following-sibling::*[current()/Acct_Id = Acct_Id]"/>
 </xsl:template>

 <xsl:template match="*" mode="group">
  <xsl:value-of select="concat('&#9;',Trans_Num,' ',Trans_Desc,' ',Trans_Result,'&#xA;')"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当将此转换应用于同一个 XML 文档（上图）时，会产生相同的所需、正确的结果**：

```
7801177 Name1
    116902 Buy Closed
    116903 Sell Closed
    116904 Buy Open

8692031 Name2
    116932 Buy Open
    116999 Sell Closed 
```

# css - 在 Drupal 7 中使用 CSS 将可调整大小的图像居中在递归 div 中

> ID：14185820
> 
> 赞同：0
> 
> 时间：2013-01-06T19:21:35.190
> 
> 标签：css, drupal-7, css-float, drupal-theming, html

我正在对我创建的 Drupal 7 中的图像库进行主题化，用户通过该图像库上传多张图像，结果会在页面上看到图像列表。

我使用响应式图像和样式模块，因此图像没有固定大小。我想要的效果是这些图像排成一排并且始终居中，它们之间的间距/装订线宽度相等，无论浏览器调整大小。因此，添加媒体查询的最终结果将是一列页面，因此一个图像在另一个顶部，在 iPhone 视口中和三四列页面，图像并排放置在桌面屏幕上。

复杂的部分是 Drupal 有这么多的 div 一个内一个，我不确定我是否遵循正确的步骤来实现这种效果。虽然这可能很简单，但这些递归 div 会出现问题。

因此，如果有人可以指导我完成这些 div 并帮助我弄清楚如何实现这种对齐，我将不胜感激。每一个回复对我来说都很重要，所以不要犹豫，提出各种评论和解决方案。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:59:11.563

我个人不了解 Drupal，但正如我在 joomla 和 wordpress 中所经历的那样，最好的方法是为每个设备设置一个响应式布局，或者简单地使用一个框架来为你完成它。然后对于水平布局，直接进入页面结构中的图像，并为所有图像提供相同的高度和左边距或右边距。然后检查没有任何破坏性宽度和高度的 img 父母。对于垂直布局，只需对宽度执行此操作，并为它们提供边距底部以产生间隙。
看起来很简单

# ruby-on-rails - 如何按属性长度对 ActiveRecords 列表进行排序？

> ID：14185823
> 
> 赞同：9
> 
> 时间：2013-01-06T19:22:09.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, rails-postgresql

我有一个这样的对象：

```
irb(main):076:0> hints = Hint.where("sentence LIKE ?","%你%")
  Hint Load (4.0ms)  SELECT "hints".* FROM "hints" WHERE (sentence LIKE '%你%')
[
    [0] #<Hint:0x007fb99c6520b8> {
                :id => 214,
          :sentence => "我为你们立下模范，我向你们怎样做，你们也该照样做。",
              :user => nil,
           :learned => nil,
        :created_at => Sun, 06 Jan 2013 18:14:33 UTC +00:00,
        :updated_at => Sun, 06 Jan 2013 18:14:33 UTC +00:00
    },
    [1] #<Hint:0x007fb99c659a70> {
                :id => 229,
          :sentence => "他快要完成地上的传道工作时，曾向耶和华祷告说“我已经使他们使徒认识你的名，以后还要使他们认识”。",
              :user => nil,
           :learned => nil,
        :created_at => Sun, 06 Jan 2013 18:43:23 UTC +00:00,
        :updated_at => Sun, 06 Jan 2013 18:43:23 UTC +00:00
    },
    [2] #<Hint:0x007fb99c659458> {
                :id => 234,
          :sentence => "你的王到你这里来了。",
              :user => nil,
           :learned => nil,
        :created_at => Sun, 06 Jan 2013 18:48:12 UTC +00:00,
        :updated_at => Sun, 06 Jan 2013 18:48:12 UTC +00:00
    }
]
irb(main):077:0> hints.class
ActiveRecord::Relation < Object 
```

如何按`sentence`长度排序？

我的最终目标是，当有人在课程中点击一个汉字时，他们会看到一些最短的例句，作为对汉字含义的提示。

我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-06T19:45:11.047

Sameera207 有正确的想法，但给你答案作为红宝石代码。

```
Hint.where("sentence LIKE ?","%你%").order("LENGTH(sentence) ASC") 
```

这将解决您的问题

也许您想要这样的方法；

```
def shortest_example(word)
  Hint.where("sentence LIKE ?", "%#{word}%").order("LENGTH(sentence) ASC").first
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-06T19:34:53.667

我认为最简单的方法是从数据库端进行排序，例如 MySQL：

```
order by LENGTH(sentence) desc 
```

甚至你可以为此写一个范围。

因为如我所见，如果您尝试在 DB 选择之后对其进行排序，这将是另一个不必要的循环。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T19:44:59.917

这种：

```
hints = hints.sort { |x,y| x.sentence.length <=> y.sentence.length } 
```

会做这项工作

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T19:35:22.027

尝试

```
hints = Hint.find_by_sql("SELECT * FROM hints WHERE sentence LIKE('%你%') ORDER BY LENGTH(sentence) ASC") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-01T12:59:36.690

我无法让 .order 在我的 rails 查询中工作。我需要使用 .reorder 来代替模型的孩子。

例如

```
doc_glossaries = doc.doc_glossaries.where(active: true, trashed: false).reorder("LENGTH(src) DESC") 
```

# php - PHP > File_get_contents + json_decode 不起作用

> ID：14185830
> 
> 赞同：0
> 
> 时间：2013-01-06T19:22:47.330
> 
> 标签：php, json, file-get-contents

我在使用`Json`from 时遇到问题：[http](http://api.justin.tv/api/stream/list.json?channel=Herdyn) ://api.justin.tv/api/stream/list.json?channel=Herdyn ，我需要获取一些关于直播的信息。我的代码：

```
<?php
$json = file_get_contents('http://api.justin.tv/api/stream/list.json?channel=Herdyn');
$obj = json_decode($json);

echo $obj->{'name'};
?> 
```

当我在服务器上上传它时：http: [//blx.patrikpapso.com/herdyn/](http://blx.patrikpapso.com/herdyn/)，没有错误，只是空白页，不知道该怎么办......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T19:25:18.763

这样做`var_dump($obj);`，您会看到没有属性“名称”。JSON 是一个数组，其中包含具有此类属性的对象：

```
$firstObj = $obj[0];
echo $firstObj->name; 
```

甚至

```
echo $obj[0]->name; 
```

不过应该至少有一个 E_NOTICE。

# python - Python unittest - 将测试划分为类/函数

> ID：14185831
> 
> 赞同：0
> 
> 时间：2013-01-06T19:22:48.327
> 
> 标签：python, unit-testing

我正在尝试在 python 中学习 TDD。不幸的是，我还没有找到任何关于 unittest 的 PEP。

1.  unittest.TestCase 的一个子类是否应该包含关于一个测试函数的所有测试？
2.  命名类、方法或测试文件的建议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:33:53.117

我通常创建一个类来处理特定测试主题的设置和拆卸，并为每个测试将其子类化。也就是说，每个测试都有一个类，其名称传达了正在测试的内容。没有什么花哨。

# iphone - 推送通知未在 iPhone 应用程序中的多个设备上传递？

> ID：14185842
> 
> 赞同：1
> 
> 时间：2013-01-06T19:25:11.747
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我想将推送消息广播到多个设备。目前，如果数据库表中仅存储 2 个（可能是 1 个或 2 个）设备令牌，我可以发送消息。对于 3 个或更多设备令牌，我无法发送推送消息。它甚至不会向之前添加的 2 个设备发送消息。在服务器端，我可以看到消息已送达，但实际上并未送达。

我在开发人员配置文件和分发配置文件上对其进行了测试，但是如果数据库表中只有 1 或 2 个设备，我只能发送消息。

在这两种情况下，我都使用了一个为开发和分发而配置的应用程序 ID。

我的服务器端 php 代码如下：

```
<?php
error_reporting(0);
 include 'classfiles/Tokens.php';

if(isset($_POST))
{

$sender = $_POST['sender'];
$message = $_POST['message'];

$token = new Tokens;
$arrtokens = $token->getTokens();

$devicetoken = $_POST['device_token'];

// Settings
$apnsCert = 'test.pem';//To be changed
$apnsHost = 'gateway.push.apple.com';//To be changed
$apnsPort = 2195;

// Connect to Apple Push Notification server
$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert);
stream_context_set_option($streamContext, 'ssl', 'passphrase', 'test123');
//60 -> timeout in seconds
$apns = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $streamContext);
if (!$apns) {
    die('Error creating ssl socket');
}

stream_set_blocking ($apns, 0);

echo 'Connected to APNS' . PHP_EOL;

if(is_array($arrtokens))
{
    //foreach($arrtokens as $key=>$deviceToken)
    for($i=0;$i<count($arrtokens);$i++)
    {

        $incrementcount = 0;
        $tokenid = $arrtokens[$i][0];
        $badgecount = $arrtokens[$i][1];
        $incrementcount = $badgecount+1;

        // Prepare payload
        $payload = 
        array(
            'aps' => array(
            'alert' => $message,
            'badge' => $incrementcount,
            'sound' => 'default',
            'sender' => $sender
            )
        );
        $payload = json_encode($payload);

   /*
        // this was also working 

        $apnsMessage =
            chr(1)
            . pack('N', 88)
            . pack('N', time() + 86400)
            . chr(0) . chr(32) 
            . pack('H*', str_replace(' ', '', $tokenid)) 
            . chr(0) . chr(strlen($payload)) 
            . $payload . $payload;
   */

        $apnsMessage = chr(0) .pack('n',32) . pack('H*', str_replace(' ', '', $tokenid)) . chr(0) . chr(strlen($payload)) . $payload;

        // this was also working
        //   $apnsMessage = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $tokenid)) . chr(0) . chr(strlen($payload)) . $payload;

        // this was also working
        //  $apnsMessage = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $device_tokens_array[i])) . chr(0) . chr(strlen($payload)) . $payload;

      //  $result =fwrite($apns, $apnsMessage);

            $result = fwrite($apns, $apnsMessage, strlen($apnsMessage));

        if(!$result)
        {
            echo 'Message to the device ' . $arrtokens[$i][0] . ' not delivered' . '<br/>';
        }else
        {
            $token->updateToken($tokenid,$incrementcount);  
            echo 'Message to the device ' . $arrtokens[$i][0] . ' successfully delivered' . '<br/>';

        }

    //  sleep(10);

    }
}
else if($devicetoken != "")
{
    $apnsMessage = 
            chr(1)
            . pack('N', 88)
            . pack('N', time() + 86400)
            . chr(0) . chr(32) 
            . pack('H*', str_replace(' ', '', $deviceToken)) 
            . chr(0) . chr(strlen($payload)) 
            . $payload . $payload;

    $result = fwrite($apns, $apnsMessage);
    if(!$result)
        echo 'Message to the device ' . $token . ' not delivered' . PHP_EOL;
    else
        echo 'Message to the device ' . $token . ' successfully delivered' . PHP_EOL;
}

usleep(500000);

fclose($apns);

}

function checkAppleErrorResponse($apns)
{
$responseBinary = fread($apns, 6);
if ($responseBinary !== false && strlen($responseBinary) == 6)
{
    print(
        "\n"
        .'Error message recieved from Apple.'."\n"
        .'For the meaning, refer to: "Provider Communication with Apple Push Notification Service"'."\n"
    );
    $response = unpack('Ccommand/Cstatus_code/Nidentifier', $responseBinary);
    var_dump($response);
}
}

?> 
```

我的客户端代码在这里：

```
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error {
NSLog(@"error : %@", [error description]);
}

- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {
NSLog(@"deviceToken : %@", deviceToken);

NSString *myDeviceToken = [[[deviceToken description]
                            stringByReplacingOccurrencesOfString: @"<" withString: @""] 
                           stringByReplacingOccurrencesOfString: @">" withString: @""];

NSLog(@"%@",myDeviceToken);
[[NSUserDefaults standardUserDefaults] setObject:myDeviceToken forKey:@"myDeviceToken"];
[[NSUserDefaults standardUserDefaults] synchronize];

receivedData = [[NSMutableData alloc] initWithLength:0];
NSString        *urlString  = [NSString stringWithFormat:@"%@%@", tokenApi, myDeviceToken];//deviceToken
urlString = [urlString stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
NSLog(@"URL : %@", urlString);
NSURL           *url        = [NSURL URLWithString:urlString];
NSURLRequest    *request    = [NSURLRequest requestWithURL:url];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
[connection start];
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
if (types == UIRemoteNotificationTypeNone) {
    NSLog(@"UIRemoteNotificationTypeNone");
} else if (types == UIRemoteNotificationTypeAlert) {
    NSLog(@"UIRemoteNotificationTypeAlert");
} else if (types == UIRemoteNotificationTypeBadge) {
    NSLog(@"UIRemoteNotificationTypeBadge");
} else if (types == UIRemoteNotificationTypeSound) {
    NSLog(@"UIRemoteNotificationTypeSound");
}

UIApplicationState state = [application applicationState];
int batchNo = [[UIApplication sharedApplication] applicationIconBadgeNumber];

if (state == UIApplicationStateActive) {
    NSLog(@"applicationIconBadgeNumber : %d", [[UIApplication sharedApplication] applicationIconBadgeNumber]);
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:[[userInfo objectForKey:@"aps"] objectForKey:@"sender"]
                                                     message:[[userInfo objectForKey:@"aps"] objectForKey:@"alert"]
                                                    delegate:self 
                                           cancelButtonTitle:@"OK"
                                           otherButtonTitles:nil];
    [alert show];

    batchNo     = 0;
} else {
    NSLog(@"applicationIconBadgeNumber : %d", [[UIApplication sharedApplication] applicationIconBadgeNumber]);
    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:batchNo - 1];
    batchNo     = [[UIApplication sharedApplication] applicationIconBadgeNumber];
}

NSString *token = [[NSUserDefaults standardUserDefaults] objectForKey:@"myDeviceToken"];
receivedData = [[NSMutableData alloc] initWithLength:0];
NSString        *urlString  = [NSString stringWithFormat:@"%@%@&count=% d", updateTokenApi, token,batchNo];//deviceToken
urlString = [urlString stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
NSLog(@"URL : %@", urlString);
NSURL           *url        = [NSURL URLWithString:urlString];
NSURLRequest    *request    = [NSURLRequest requestWithURL:url];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];
[connection start];

//    NSLog(@"userInfo : %@", userInfo);
NSMutableArray *array = [[NSMutableArray alloc] initWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"alerts"]];
//    NSLog(@"Before : %@", array);

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM/dd/YYYY hh:mm a"];

NSMutableArray *alertarray = [[NSMutableArray alloc] initWithCapacity:0];
[alertarray addObject:[dateFormatter stringFromDate:[NSDate date]]];
[alertarray addObject:[[userInfo objectForKey:@"aps"] objectForKey:@"sender"]];
[alertarray addObject:[[userInfo objectForKey:@"aps"] objectForKey:@"alert"]];
[array addObject:alertarray];

NSArray *alertsArray = [[NSArray alloc] initWithArray:array];

[[NSUserDefaults standardUserDefaults] setObject:alertsArray forKey:@"alerts"];
[[NSUserDefaults standardUserDefaults] synchronize];

[[[[self accountPage] accountHistoryPage] alertsArray] removeAllObjects];
[[[[self accountPage] accountHistoryPage] alertsArray] addObjectsFromArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"alerts"]];
[[[[self accountPage] accountHistoryPage] accountDetailTableView] reloadData];

//     NSLog(@"After : %@", [[NSUserDefaults standardUserDefaults] objectForKey:@"alerts"]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T23:46:01.450

最可能的解释是第三个设备令牌无效。如果您首先发送到此设备令牌，Apple 会关闭套接字，并且忽略发送到其他两个设备的消息，即使它们似乎在服务器端已成功传递。如果您正在混合开发和生产设备令牌，那就可以解释为什么其中一些是无效的。如果您使用生产证书打开到 APNS 服务器的套接字，则只有生产设备令牌对该连接有效（反之亦然）。

# android - 如何让多个带有滚动视图的选项卡在 android 中正常工作？

> ID：14185846
> 
> 赞同：0
> 
> 时间：2013-01-06T19:25:32.080
> 
> 标签：android, button, tabs, scrollview, android-tabhost

好的，所以我有一个带有 4 个标签的标签主机。这些选项卡中的每一个都有按钮，其中 2 个选项卡具有滚动视图。我的所有选项卡都托管在同一个 xml 文件中。似乎我的 xml 像脚本一样运行，因为只有我最后一个选项卡的滚动视图有效，并且只有我最后一个选项卡上的按钮有效。我准备了一份 StackOverflow 评论，其中提到将每个选项卡托管在自己的 xml 文件中，但我尝试了但没有运气。我不知道我只是没有正确编码还是什么。如果有人可以请帮助让我知道！

XML

```
<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <RelativeLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <TextView
                    android:id="@+id/tvOffice"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center"
                    android:text="Office Location"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textStyle="bold"
                    tools:ignore="HardcodedText" />

                <TextView
                    android:id="@+id/tvOfficeLocation"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/tvOffice"
                    android:text="Smart Technologies, Inc. is currently located at:"
                    tools:ignore="HardcodedText" />

                <TextView
                    android:id="@+id/tvOfficeAdd1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/tvOfficeLocation"
                    android:text="201 South Eagle Lane"
                    tools:ignore="HardcodedText" />

                <TextView
                    android:id="@+id/tvOfficeAdd2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/tvOfficeAdd1"
                    android:text="Smart Technologies, Inc. is currently located at:"
                    tools:ignore="HardcodedText" />

                <TextView
                    android:id="@+id/tvMap"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/tvOfficeAdd2"
                    android:text="View Map"
                    tools:ignore="HardcodedText" />
                <Button
                    android:id="@+id/bMap"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/tvMap"
                    android:text="Map"
                    tools:ignore="HardcodedText" />
                <TextView
                    android:id="@+id/tvPhone"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/bMap"
                    android:text="Contact Phone Numbers"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textStyle="bold"
                    tools:ignore="HardcodedText" />

                <Button
                    android:id="@+id/bCallOffice"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/tvPhone"
                    android:text="Call Office"
                    tools:ignore="HardcodedText" />

                <Button
                    android:id="@+id/bCallTollFree"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/bCallOffice"
                    android:text="Call Toll Free"
                    tools:ignore="HardcodedText" />

            </RelativeLayout>

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <RelativeLayout
                    android:id="@+id/tab2"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <ImageView
                        android:id="@+id/ivStef"
                        android:layout_width="208dp"
                        android:layout_height="208dp"
                        android:layout_alignParentLeft="true"
                        android:contentDescription="Stef"
                        android:src="@drawable/yellow_bird_icon"
                        tools:ignore="HardcodedText" />

                    <TextView
                        android:id="@+id/tvStef"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/ivStef"
                        android:text="Stephaine Smith"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textStyle="bold"
                        tools:ignore="HardcodedText" />

                    <TextView
                        android:id="@+id/tvStefTitle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/tvStef"
                        android:text="Sales"
                        tools:ignore="HardcodedText" />

                    <Button
                        android:id="@+id/bCallStef"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/tvStefTitle"
                        android:text="Call Stephanie"
                        tools:ignore="HardcodedText" />

                    <Button
                        android:id="@+id/bEmailStef"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/bCallStef"
                        android:text="Email Stephanie"
                        tools:ignore="HardcodedText" />

                    <ImageView
                        android:id="@+id/ivGRay"
                        android:layout_width="208dp"
                        android:layout_height="208dp"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/bEmailStef"
                        android:contentDescription="G Ray"
                        android:src="@drawable/green_bird_icon"
                        tools:ignore="HardcodedText" />

                    <TextView
                        android:id="@+id/tvGRay"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/ivGRay"
                        android:text="Gerald Ray"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textStyle="bold"
                        tools:ignore="HardcodedText" />

                    <TextView
                        android:id="@+id/tvGRayTitle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/tvGRay"
                        android:text="Sales/RCDD"
                        tools:ignore="HardcodedText" />

                    <Button
                        android:id="@+id/bCallGRay"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/tvGRayTitle"
                        android:text="Call Gerald"
                        tools:ignore="HardcodedText" />

                    <Button
                        android:id="@+id/bEmailGRay"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/bCallGRay"
                        android:text="Email Gerald"
                        tools:ignore="HardcodedText" />
                </RelativeLayout>
            </ScrollView>

            <RelativeLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <ImageView
                    android:id="@+id/ivJeremy"
                    android:layout_width="208dp"
                    android:layout_height="208dp"
                    android:layout_alignParentLeft="true"
                    android:contentDescription="Jeremy"
                    android:src="@drawable/red_bird_icon"
                    tools:ignore="HardcodedText" />

                <TextView
                    android:id="@+id/tvJeremy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/ivJeremy"
                    android:text="Jeremy Walck"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textStyle="bold"
                    tools:ignore="HardcodedText" />

                <TextView
                    android:id="@+id/tvJeremyTitle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/tvJeremy"
                    android:text="Cabling Supervisor/ Vice President"
                    tools:ignore="HardcodedText" />

                <Button
                    android:id="@+id/bCallJeremy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/tvJeremyTitle"
                    android:text="Call Jeremy"
                    tools:ignore="HardcodedText" />

                <Button
                    android:id="@+id/bEmailJeremy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/bCallJeremy"
                    android:text="Email Jeremy"
                    tools:ignore="HardcodedText" />
            </RelativeLayout>

            <ScrollView
                android:id="@+id/scrollView3"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <RelativeLayout
                    android:id="@+id/tab4"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <ImageView
                        android:id="@+id/ivJerry"
                        android:layout_width="208dp"
                        android:layout_height="208dp"
                        android:layout_alignParentLeft="true"
                        android:contentDescription="Jerry"
                        android:src="@drawable/black_bird_icon"
                        tools:ignore="HardcodedText" />

                    <TextView
                        android:id="@+id/tvJerry"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/ivJerry"
                        android:text="Jerry Hedrick"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textStyle="bold"
                        tools:ignore="HardcodedText" />

                    <TextView
                        android:id="@+id/tvJerryTitle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/tvJerry"
                        android:text="Network Administrator / Vice Presedent"
                        tools:ignore="HardcodedText" />

                    <Button
                        android:id="@+id/bCallJerry"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/tvJerryTitle"
                        android:text="Call Jerry"
                        tools:ignore="HardcodedText" />

                    <Button
                        android:id="@+id/bEmailJerry"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/bCallJerry"
                        android:text="Email Jerry"
                        tools:ignore="HardcodedText" />

                    <ImageView
                        android:id="@+id/ivTanner"
                        android:layout_width="208dp"
                        android:layout_height="208dp"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/bEmailJerry"
                        android:contentDescription="Tanner"
                        android:src="@drawable/blue_bird_icon"
                        tools:ignore="HardcodedText" />

                    <TextView
                        android:id="@+id/tvTanner"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/ivTanner"
                        android:text="Tanner Hughes"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textStyle="bold"
                        tools:ignore="HardcodedText" />

                    <TextView
                        android:id="@+id/tvTannerTitle"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/tvTanner"
                        android:text="Network Administrator"
                        tools:ignore="HardcodedText" />

                    <Button
                        android:id="@+id/bCallTanner"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/tvTannerTitle"
                        android:text="Call Tanner"
                        tools:ignore="HardcodedText" />

                    <Button
                        android:id="@+id/bEmailTanner"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@+id/bCallTanner"
                        android:text="Email Tanner"
                        tools:ignore="HardcodedText" />
                </RelativeLayout>
            </ScrollView>
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

爪哇

公共类联系人扩展活动实现 View.OnClickListener {

```
TabSpec specs, specs2, specs3, specs4;
Button cStef, eStef, cGRay, eGRay, cJeremy, eJeremy, cJerry, eJerry,
        cTanner, eTanner, cOffice, cTollFree, MapOffice;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    // fullScreen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.contact);
    TabHost th = (TabHost) findViewById(R.id.tabhost);
    th.setup();
    // tab2 setup
    specs = th.newTabSpec("office");
    specs.setContent(R.id.tab1);
    specs.setIndicator("Office");
    th.addTab(specs);
    // tab2 setup
    specs2 = th.newTabSpec("sales");
    specs2.setContent(R.id.tab2);
    specs2.setIndicator("Sales");
    th.addTab(specs2);
    // tab2 setup
    specs3 = th.newTabSpec("cabling");
    specs3.setContent(R.id.tab3);
    specs3.setIndicator("Cabling");
    th.addTab(specs3);
    // tab3 setup
    specs4 = th.newTabSpec("service");
    specs4.setContent(R.id.tab4);
    specs4.setIndicator("Service");
    th.addTab(specs4);
    initialize();

}

private void initialize() {
    // TODO Auto-generated method stub
    MapOffice = (Button) findViewById(R.id.bMap);
    cOffice = (Button) findViewById (R.id.bCallOffice);
    cTollFree = (Button) findViewById (R.id.bCallTollFree);
    cStef = (Button) findViewById(R.id.bCallStef);
    eStef = (Button) findViewById(R.id.bEmailStef);
    cGRay = (Button) findViewById(R.id.bCallGRay);
    eGRay = (Button) findViewById(R.id.bEmailGRay);
    cJeremy = (Button) findViewById(R.id.bCallJeremy);
    eJeremy = (Button) findViewById(R.id.bEmailJeremy);
    cJerry = (Button) findViewById(R.id.bCallJerry);
    eJerry = (Button) findViewById(R.id.bEmailJerry);
    cTanner = (Button) findViewById(R.id.bCallTanner);
    eTanner = (Button) findViewById(R.id.bEmailTanner);

    MapOffice.setOnClickListener(this);
    cOffice.setOnClickListener(this);
    cTollFree.setOnClickListener(this);
    cStef.setOnClickListener(this);
    eStef.setOnClickListener(this);
    cGRay.setOnClickListener(this);
    eGRay.setOnClickListener(this);
    cJeremy.setOnClickListener(this);
    eJeremy.setOnClickListener(this);
    cJerry.setOnClickListener(this);
    eJerry.setOnClickListener(this);
    cTanner.setOnClickListener(this);
    eTanner.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    final Intent callOffice = new Intent(Intent.ACTION_CALL);
    callOffice.setData(Uri.parse("tel:4057877878"));

    switch (v.getId()) {
    //Tab 1
    case R.id.bMap:

        break;
    case R.id.bCallOffice:
        startActivity(callOffice);
        finish();

        break;
    case R.id.bCallTollFree:
        Intent callToll = new Intent(Intent.ACTION_CALL);
        callToll.setData(Uri.parse("tel:18006461423"));
        startActivity(callToll);
        finish();

        break;

    // Tab 2
    case R.id.bCallStef:
        startActivity(callOffice);
        finish();

        break;
    case R.id.bEmailStef:
        Intent emailStef = new Intent(Intent.ACTION_SEND);
        emailStef.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "ssmith@smart-technologies.com" });
        emailStef
                .putExtra(Intent.EXTRA_TEXT,
                        "This Email was sent by the Smart Technologies Android Application");
        emailStef.setType("text/plain");

        startActivity(emailStef);
        finish();

        break;
    case R.id.bCallGRay:
        startActivity(callOffice);
        finish();

        break;
    case R.id.bEmailGRay:
        Intent emailGRay = new Intent(Intent.ACTION_SEND);
        emailGRay.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "Gray@smart-technologies.com" });
        emailGRay
                .putExtra(Intent.EXTRA_TEXT,
                        "This Email was sent by the Smart Technologies Android Application");
        emailGRay.setType("text/plain");
        startActivity(emailGRay);
        finish();

        break;
    // Tab 3
    }
    switch (v.getId()) {
    case R.id.bCallJeremy:
        startActivity(callOffice);
        finish();
        break;
    case R.id.bEmailJeremy:
        Intent emailJeremy = new Intent(Intent.ACTION_SEND);
        emailJeremy.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "jwalck@smart-technologies.com" });
        emailJeremy
                .putExtra(Intent.EXTRA_TEXT,
                        "This Email was sent by the Smart Technologies Android Application");
        emailJeremy.setType("text/plain");
        startActivity(emailJeremy);
        finish();

        break;

    // Tab 4
    }
    switch (v.getId()) {
    case R.id.bCallJerry:
        startActivity(callOffice);
        finish();

        break;

    case R.id.bEmailJerry:
        Intent emailJerry = new Intent(Intent.ACTION_SEND);
        emailJerry.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "jhedrick@smart-technologies.com" });
        emailJerry
                .putExtra(Intent.EXTRA_TEXT,
                        "This Email was sent by the Smart Technologies Android Application");
        emailJerry.setType("text/plain");
        startActivity(emailJerry);
        finish();

        break;

    case R.id.bCallTanner:
        startActivity(callOffice);
        finish();
        break;

    case R.id.bEmailTanner:
        Intent emailTanner = new Intent(Intent.ACTION_SEND);
        emailTanner.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "thughes@smart-technologies.com" });
        emailTanner
                .putExtra(Intent.EXTRA_TEXT,
                        "This Email was sent by the Smart Technologies Android Application");
        emailTanner.setType("text/plain");
        startActivity(emailTanner);
        finish();

        break;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:30:50.060

多个滚动视图的问题是只有一个是可聚焦的。我曾经创建了一个带有多个滚动视图的应用程序

在按钮单击上，我像这样更改了视图的可见性和可聚焦性

```
public void buttonShowRankingClicked(final View v){   
    rankingScrollView.setVisibility(View.VISIBLE);
    rankingScrollView.setFocusable(true);
    rankingScrollView.setClickable(true);

    teaminfoScrollView.setVisibility(View.GONE);
    teaminfoScrollView.setFocusable(false);
    teaminfoScrollView.setClickable(false);
} 
```

这样，另一个 ScrollView 将变得可见，您可以滚动:)

# c++ - c++ 为什么我不使用内联时链接会失败？

> ID：14185847
> 
> 赞同：1
> 
> 时间：2013-01-06T19:26:13.103
> 
> 标签：c++, inline

我有一个恰好是递归的内联函数的声明。由于它是递归的，因此将其声明为内联毫无意义，那么当我删除它时，为什么我的链接会失败？

3个文件：

```
\\File1.h

#ifndef FILE1_H
#define FILE1_H

inline int Factorial(int a)
{
    if (a < 2)
        return 1;
    return a*Factorial(a-1);
}

int PermutationsNum(int b);

#endif

\\File1.cpp
#include "File1.h"

int PermutationsNum(int b)
{
    return Factorial(b);
}

\\File2.cpp

#include <iostream>
#include "File1.h"

int main()
{
    std::cout << "permutations of 7 elements: " << PermutationsNum(7) << std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T19:27:11.343

`inline`告诉编译器不要导出符号。如果您不使用它，该符号将被包含该文件的所有编译单元导出，从而导致**多重定义**。

### 3.2 一个定义规则[basic.def.odr]

> 4)**每个程序都应包含该程序中 odr 使用的每个非内联函数** 或变量的准确定义；无需诊断。定义可以显式出现在程序中，可以在标准或用户定义库中找到，或者（在适当时）隐式定义（参见 12.1、12.4 和 12.8）。内联函数应在使用它的每个翻译单元中定义。

实际上，这是关键字的唯一相关用法`inline`-实际上内联函数取决于编译器。IMO，从这个意义上说，关键字甚至不是一个提示。

# javascript - 具有多个类的 jQuery 条件逻辑

> ID：14185849
> 
> 赞同：0
> 
> 时间：2013-01-06T19:26:46.600
> 
> 标签：javascript, jquery

我有很多文章有多个类别。我对每个类别都有一个复选框。选中复选框时，应显示该类别的文章，否则应隐藏。

到现在为止还挺好。

当我检查第 1 类而不是第 2 类时，应显示所有具有第 1 类的帖子。如果它们也有第 2 类，则无论如何都应该显示它们。

```
<input type="checkbox" value="cat1" id="checkbox1" checked />
<input type="checkbox" value="cat2" id="checkbox2" checked />
<input type="checkbox" value="cat3" id="checkbox3" checked />
<input type="checkbox" value="cat4" id="checkbox4" checked /> 
```

我使用 jQuery 来显示和隐藏帖子

```
if ($('#checkbox1').is(':checked')) {
    $("article.category1").show();
} else {
    $("article.category1").hide();
}

if ($('#checkbox2').is(':checked')) {
    $("article.category2").show();
} else {
    $("article.category2").hide();
}

if ($('#checkbox3').is(':checked')) {
    $("article.category3").show();
} else {
    $("article.category3").hide();
}

if ($('#checkbox4').is(':checked')) {
    $("article.category4").show();
} else {
    $("article.category4").hide();
} 
```

我为此 [http://jsfiddle.net/oliverspies/t8qHT/1/创建了一个js小提琴](http://jsfiddle.net/oliverspies/t8qHT/1/)

如果您取消选中所有，但选中第一个复选框，则不会显示任何条目 - 但应显示所有具有类 cat1 的条目 - 即使它们有另一个未选中的类别。如果不写几十个 IF 语句，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T19:35:18.130

## 固定代码

您可以根据输入的值创建选择器。

```
$('#catselector').on("change", function() {
  $("article").hide();
  $("input[type=checkbox]:checked", this).each(function(){
    $("article." + this.value).show();
  });
}); 
```

[看这里。](http://jsfiddle.net/tU3kh/)

* * *

## 以前的代码

 ~~~~```
$('#catselector').on("change", function() {
  $("input[type=checkbox]", this).each(function(){
    $("." + this.value).toggle(this.checked);
  });
}); 
```~~  ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:35:16.877

使用 jquery 的[切换功能](http://api.jquery.com/toggle/)：

```
$('#checkbox1').click(function() {
  $("article.cat1").toggle();
});
$('#checkbox2').click(function() {
  $("article.cat2").toggle();
});
... 
```

工作示例：http: [//jsfiddle.net/SCGyY/](http://jsfiddle.net/SCGyY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T19:37:37.257

您可以在复选框的 click 方法内的对象上使用[jQuery.toggle](http://api.jquery.com/toggle/) ()方法。`article.cat`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T19:39:42.543

```
$('input[type="checkbox"]').on('change', function() {
    $("article.category" + this.id[this.id.length - 1]).toggle(this.checked);
}); 
```

定位所有复选框（或一个类，如果您愿意）并从 ID（数字）中获取最后一个字符，并在文章的选择器中使用它，并根据是否选中复选框来切换该文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T19:46:30.033

```
$('#catselector :checkbox').change(function ( e ) {
  // hide all
  $( 'article' ).hide();

  // then filter and show selected
  $( '#catselector :checked' ).each(function() {
      $( 'article.' + this.value ).show();
  });
}); 
```

[http://jsfiddle.net/t8qHT/14/](http://jsfiddle.net/t8qHT/14/)~~~~

# c# - 如何获取连接到网络的计算机列表？

> ID：14185854
> 
> 赞同：2
> 
> 时间：2013-01-06T19:27:04.237
> 
> 标签：c#, .net, networking

> **可能重复：**
> [获取没有 DNS 的网络上所有计算机的列表](https://stackoverflow.com/questions/105676/get-a-list-of-all-computers-on-a-network-w-o-dns)

我正在创建一个应用程序，您可以在其中在网络上的计算机之间发送信息。计算机侦听连接并可以将信息发送到网络上的另一台计算机。我需要知道如何获取计算机所连接网络上的主机名或 IP 地址列表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T19:35:56.073

我不知道我从哪里得到这个代码了。最后一段代码来自我（getIPAddress()）

它读取您的 ip 以获取网络的基本 ip。

致谢作者：

```
static void Main(string[] args)
    {
        string ipBase = getIPAddress();
        string [] ipParts = ipBase.Split('.');
        ipBase = ipParts[0] + "." + ipParts[1] + "." + ipParts[2] + ".";
        for (int i = 1; i < 255; i++)
        {
            string ip = ipBase + i.ToString();

            Ping p = new Ping();
            p.PingCompleted += new PingCompletedEventHandler(p_PingCompleted);
            p.SendAsync(ip, 100, ip);
        }
        Console.ReadLine();
    }

    static void p_PingCompleted(object sender, PingCompletedEventArgs e)
    {
        string ip = (string)e.UserState;
        if (e.Reply != null && e.Reply.Status == IPStatus.Success)
        {
            if (resolveNames)
            {
                string name;
                try
                {
                    IPHostEntry hostEntry = Dns.GetHostEntry(ip);
                    name = hostEntry.HostName;
                }
                catch (SocketException ex)
                {
                    name = "?";
                }
                Console.WriteLine("{0} ({1}) is up: ({2} ms)", ip, name, e.Reply.RoundtripTime);
            }
            else
            {
                Console.WriteLine("{0} is up: ({1} ms)", ip, e.Reply.RoundtripTime);
            }
            lock (lockObj)
            {
                upCount++;
            }
        }
        else if (e.Reply == null)
        {
            Console.WriteLine("Pinging {0} failed. (Null Reply object?)", ip);
        }
    }

    public static string getIPAddress()
    {
        IPHostEntry host;
        string localIP = "";
        host = Dns.GetHostEntry(Dns.GetHostName());
        foreach (IPAddress ip in host.AddressList)
        {
            if (ip.AddressFamily == AddressFamily.InterNetwork)
            {
                localIP = ip.ToString();
            }
        }
        return localIP;
    } 
```

# python - 我应该如何编码时间线的后端

> ID：14185858
> 
> 赞同：3
> 
> 时间：2013-01-06T19:28:04.453
> 
> 标签：python, qt, data-structures, timeline

我想创建一个具有时间线的程序，就像您在视频编辑器中看到的那样。放置在该时间线上的事件将具有开始时间和结束时间（或长度？）。可以自由地向前和向后移动时间线的播放头，甚至可以控制它的速度。重要的是，播放头应该在它“进入”或“退出”对象时触发事件，因为它在对象上移动。我不想使用计时器，因为可能会有很多这样的事件，而且效率可能很低。

查看此问题的最佳方法是什么？我已经对图形部分进行了编码（使用 QGraphicsView，其中使用自定义 QGraphicsItems 表示事件），现在我正在寻找实现后端的最佳方法。

我的问题有意义吗？是不是太模棱两可了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T22:45:16.333

您似乎想要一个有效支持以下操作的数据结构：

1.  插入和删除时间间隔。
2.  移动一个时间间隔。
3.  查询与某个时间重叠的所有时间间隔。

为此，您可能需要查看有效支持操作 (1) 和 (3)的**[区间树数据结构。](http://en.wikipedia.org/wiki/Interval_tree)**您可以通过删除现有段然后将其重新插入间隔树来实现操作 (2)。

要实现读取指针，您可以连续查询与当前时间重叠的所有段的段树。

希望这可以帮助！

# eclipse-plugin - Eclipse 插件在新 jvm 中运行代码的标准方式？

> ID：14185860
> 
> 赞同：0
> 
> 时间：2013-01-06T19:28:22.153
> 
> 标签：eclipse-plugin

我正在开发一个 Eclipse 插件（一个构建器），我想使用一个不是线程安全的库。当然，我想并行运行该库中的代码。Eclipse 插件是否有标准方式在新的子 jvm 中运行代码（跨平台；我不想维护 windows/mac/linux/... 版本）？我很高兴地说这个功能的内存需求会很大（多个演出很好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:48:13.570

我建议使用私有启动配置。我们在 Grails-IDE 中广泛执行此操作。我建议你看看源代码。我们的基础设施可能超出您的需要，但它可以让您获得灵感。

您只需为外部进程创建启动配置并启动它。了解我们所做工作的一个好地方是：

[https://github.com/SpringSource/grails-ide/blob/master/org.grails.ide.eclipse.core/src/org/grails/ide/eclipse/commands/GrailsExecutor.java](https://github.com/SpringSource/grails-ide/blob/master/org.grails.ide.eclipse.core/src/org/grails/ide/eclipse/commands/GrailsExecutor.java)

该`syncExec()`方法获取特定 grails 命令和特定项目的启动配置，然后为系统进程和侦听器定制它。最后，命令同步启动。这对我们来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:48:54.033

如果您有一个不是线程安全的库，那么您需要确保该库与正确的同步一起使用以避免任何问题。一种可能适合您的方法是确保该库的所有使用都发生在单个线程中。在您的情况下可能更乏味的另一种方法是使用该库的所有方法都是同步的。在与您类似的情况下，我总是更喜欢前者。

您可以创建一个特殊的线程来负责所有需要您的库的操作。根据您的需要，您可以让所有调用异步或同步，但您需要实现某种回调机制才能获得结果。实现此目的的一种便捷方法是使用[`Executor`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)接口。实现一个执行器，以确保所有任务按照它们被推送到执行器的顺序在同一个线程中运行。的文档`Executor`有一个很好的例子可以让你开始。您可以向该示例添加其他方法以进行同步执行，甚至可以添加同步返回结果的执行方法。为此，您也可以查看[`Callable`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)界面。

# php - 获取给定级别的所有级别儿童的列表

> ID：14185862
> 
> 赞同：1
> 
> 时间：2013-01-06T19:28:35.627
> 
> 标签：php, mysql, codeigniter

```
id_page | id_parent | title
-----------------------------
    1         0         sth1
    2         1         asd
    3         1         qwe
    4         2         are
    5         4         gds
    6         5         lkj
    7         4         nmn

- 1
---- 2
--------- 4
------------- 5
------------------6
--------------7
---- 3 
```

我想要实现的是为给定的 id_page 获取所有子子级的单级数组。深度没有限制。

对于 id_page 2，我应该得到`array(4,5,6,7)`或对于 id_page 4，我应该得到`array(5,6,7`）

我有点迷路了，感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:45:57.043

在您的情况下，数据库组织不正确。使用您当前的数据库结构，您将只能获得一层深度。意义`SELECT * FROM pages WHERE parent_page_id = 1`。这将为您提供`page_id=1`. 如果这些孩子中的任何一个也有孩子，您需要`SELECT * FROM pages WHERE parent_page_id = the_child_id`为每个孩子做。

那将是资源使用不足。我建议您尝试使用与此类似的[模型](http://www.sitepoint.com/hierarchical-data-database-2/)。
它将允许您通过一个查询获取父级的所有子级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:48:33.517

基于[这个](http://pastebin.com/jqFHGPBe)例子你应该可以使用这样的东西：（Ps：这都不是睾丸，但基本流程显示是正确的）

```
$root_id = 2;
$stack = array();
$childList = array();

array_push($stack, $root_id);

while (count($stack) > 0) {
  $current = array_pop($stack); // Depth first search
  //$current = array_shift($stack); //Breadth first search

  //array_push($stack, $treearr[$current]['children']); Maybe?? Something you'll have to check
  //array_push($childList, $treearr[$current]['children']); 

  for ($treearr[$current]['children'] as $child) {
    array_push($stack, $child);
    array_push($childList, $child);
  }
} 
```

`childList`应该包含在下面找到的所有子项`root_id`。

# c++ - C++ 从 VB6 中读取文件中的某些整数

> ID：14185865
> 
> 赞同：-1
> 
> 时间：2013-01-06T19:28:40.857
> 
> 标签：c++, winapi

我想使用 C++ 从文件中提取一些整数，但我不确定我是否做得正确。

我在 VB6 中的代码如下：

```
Redim iInts(240) As Integer
Open "m:\dev\voice.raw" For Binary As #iFileNr
Get #iReadFile, 600, iInts() 'Read from position 600 and read 240 bytes 
```

我对 C++ 的转换如下：

```
vector<int>iInts
iInts.resize(240)

FILE* m_infile;
string filename="m://dev//voice.raw";

if (GetFileAttributes(filename.c_str())==INVALID_FILE_ATTRIBUTES)
{
  printf("wav file not found");
  DebugBreak();
} 
else 
{
  m_infile = fopen(filename.c_str(),"rb");
} 
```

但现在我不知道如何从那里继续，我也不知道“rb”是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:35:55.933

我不知道 VB 如何读取文件，但如果您需要从文件中读取整数，请尝试：

```
m_infile = fopen(myFile, "rb")
fseek(m_infile, 600 * sizeof(int), SEEK_SET);
// Read the ints, perhaps using fread(...)
fclose(myFile); 
```

或者您可以使用**ifstream**使用 C++ 方式。

流的完整示例（注意，您应该添加错误检查）：

```
#include <ifstream>

void appendInts(const std::string& filename, 
                unsigned int byteOffset, 
                unsigned int intCount,
                const vector<int>& output)
{
    std::ifstream ifs(filename, std::ios::base::in | std::ios::base::binary);
    ifs.seekg(byteOffset);
    for (unsigned int i = 0; i < intCount; ++i)
    {
        int i;
        ifs >> i;
        output.push_back(i);
    }
}

...

std::vector<int> loadedInts;
appendInts("myfile", 600, 60, loadedInts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:50:07.210

代替向量使用整数数组并传递 poth 文件描述符和数组指针以`read()` 如下所示

```
...
int my_integers[240];
read(m_infile, my_integers, 240, 600);
.. 
```

有关更多信息，`read()`请参阅[http://pubs.opengroup.org/onlinepubs/009695399/functions/read.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/read.html)

# .net - 在 Windows 8 中随处捕捉手势

> ID：14185866
> 
> 赞同：0
> 
> 时间：2013-01-06T19:29:04.120
> 
> 标签：.net, windows-8, gestures

基本想法是为 Windows 8 提供额外的手势，类似于热键但用于手势。我明白，“Windows 8 Store”应用程序无法做到这一点，但 WPF 或 Windows 窗体应用程序仍然可以。如果我在这方面被证明是错误的，那就更好了，这样该应用程序甚至可以在 Windows 8 RT 平板电脑上运行。

有人对如何做到这一点有任何想法吗？

我更喜欢用 C# 来做，但如果我真的需要的话，我可以做 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:50:00.433

Windows 8 仅支持默认手势： ![在此处输入图像描述](../Images/768d3744ec1d639496601fad031b57d6.png)

但是您可以编写自己的手势，例如“触摸并按住 10 秒”。

你需要什么手势？

# python - 如何在 Windows 上使用 youtube-dl 提取音频

> ID：14185867
> 
> 赞同：7
> 
> 时间：2013-01-06T19:29:25.820
> 
> 标签：python, windows, ffmpeg, ffprobe, youtube-dl

我想从 Windows 上使用 youtube-dl 下载的视频中提取音频。我让 youtube-dl 工作，但无法提取音频。此问题是由于未安装正确的音频代码引起的。

当我尝试提取音频时，它会告诉我以下信息：

```
WARNING: unable to obtain file audio codes with ffprobe 
```

youtube-dl 手册说：

```
-x -extract-audio    convert video files to audio-only files (requires ffmpeg or avconv and ffprobe or avprobe) 
```

如何安装 ffprobe 或 ffmpeg？我是在 Windows 上安装它，还是将它安装为 Python 扩展？

我的操作系统是 Windows 7。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T19:38:04.167

`ffmpeg`不是 Python 模块。看一下类中的`youtube-dl`代码`FFmpegExtractAudioPP`。

它使用此调用来确定可执行文件是否存在。它检查您当前的路径：

```
subprocess.Popen([exe, '-version'], stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate() 
```

您需要下载[Windows 版本`ffmpeg`](http://ffmpeg.zeranoe.com/builds/)并将它们放在当前路径中，可能要确保它们`.exe`的名称末尾没有。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-12T07:45:32.890

适用于 Windows 用户的快速修复：

1.  [从http://ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/)下载 ffmpeg 包，解压，将 Bin 目录的所有内容复制到 youtube-dl.exe 所在目录。
2.  使用 DOS 导航到 youtube-dl 所在的目录并使用以下命令运行：

    ```
    youtube-dl --extract-audio --audio-format mp3 
    ```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-12-31T04:39:34.710

**编辑**

未来的用户可能希望从[ffmpeg.org下载最新版本](https://ffmpeg.org/download.html)

* * *

*我的代表不允许我添加评论，所以我会放在这里。*

根据 2020 年 9 月 18 日， http: [//ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/)已关闭，但仍可通过 Web Archive 访问。完整的下载仍然可以从这里获得：

[http://web.archive.org/web/20200918193047/https://ffmpeg.zeranoe.com/builds/](http://web.archive.org/web/20200918193047/https://ffmpeg.zeranoe.com/builds/)

我已从我的 Google 云端硬盘为 Windows 用户提供以下文件/版本，但请不要认为这些是理所当然的，并一如既往地扫描恶意软件或病毒：

```
ffmpeg-4.2.2-win32-static.zip
ffmpeg-4.2.2-win64-static.zip
ffmpeg-4.2.3-win32-static.zip
ffmpeg-4.2.3-win64-static.zip
ffmpeg-4.3-win32-static.zip
ffmpeg-4.3-win64-static.zip
ffmpeg-4.3.1-win32-static.zip
ffmpeg-4.3.1-win64-static.zip 
```

[https://drive.google.com/drive/folders/1oj3VndOC-bGhfpNcHW3otIR--V2wxdG-?usp=sharing](https://drive.google.com/drive/folders/1oj3VndOC-bGhfpNcHW3otIR--V2wxdG-?usp=sharing)

下载后，我在 Windows 10 上提取了最新版本 (4.3.1) 并将所有 .exe ( `ffmpeg`, `ffplay`, `ffprobe`) 复制到与 相同的目录中`youtube-dl`，然后运行：

```
youtube-dl -x --audio-format mp3 https://www.youtube.com/watch?v=... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-29T10:11:49.347

[您可以使用Chocolatey](http://www.chocolatey.org)轻松获得 win-ffmpeg

如果你仍然不能让 youtube-dl 和 ffmpeg 一起工作，

也许您可以分两步完成：

1.  获取 mp4 或 avi：youtube-dl url

2.  提取音频

    ffmpeg -i input.mp4 -vn -codec 复制输出.mp3

# api - 外部js文件错误

> ID：14185871
> 
> 赞同：0
> 
> 时间：2013-01-06T19:29:55.983
> 
> 标签：api, google-maps

我即将使用 GMaps API v3 迈出第一步。

不幸的是，我收到的错误不是在我的 js 文件上，而是在外部文件上：

外部文件是： [https](https://maps.gstatic.com/intl/de_de/mapfiles/api-3/10/19/main.js) : //maps.gstatic.com/intl/de_de/mapfiles/api-3/10/19/main.js（我觉得de_de跟德国有点关系）

```
error: main.js 28 a is null 
```

我的代码如下所示：

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script type="text/javascript"> 
  var latlng = new google.maps.LatLng(51, 10); 
  var mapOptions = {zoom: 12,
                    center: latlng, 
                    mapTypeId: google.maps.MapTypeId.ROADMAP };

  var map = new google.maps.Map(document.getElementById('map-container'),
                                mapOptions);
</script> 
```

（地图容器已设置）我真的很想知道为什么我在这个外部文件上收到一个错误。有人对此有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:18:14.387

此错误是您的脚本的结果，您向 API 提供了一些参数，该参数预期是某种对象，但改为 null。

我猜应该包含地图的元素：

```
document.getElementById('map-container') 
```

..未知。

您要么使用了错误的 ID，要么 `google.maps.Map()`在文档完成加载/元素已知之前已被调用。

`<body>`当文档的加载事件触发或将您的脚本放在（超出#map-container）末尾的某个位置时初始化地图。

# c# - 使用 RSACryptoServiceProvider 加密时如何定义哈希大小？

> ID：14185872
> 
> 赞同：2
> 
> 时间：2013-01-06T19:30:02.073
> 
> 标签：c#, encryption, rsa, rsacryptoserviceprovider

> **可能重复：**
> [RSACryptoServiceProvider（.NET 的 RSA）可以使用 SHA256 进行加密（不是签名）而不是 SHA1 吗？](https://stackoverflow.com/questions/5113498/can-rsacryptoserviceprovider-nets-rsa-use-sha256-for-encryption-not-signing)

当`RSACryptoServiceProvider`用于加密时，默认的哈希算法显然是`SHA-1`. 如何`SHA-512`在加密数据时定义另一种哈希算法（使用该`Encrypt`方法）？我没有找到与哈希算法相关的任何属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:34:46.943

[RSACryptoServiceProvider 将只允许您通过使用SignData() 重载](http://msdn.microsoft.com/en-us/library/9tsc5d0z.aspx)之一来设置用于签名的哈希函数。不幸的是，在不使用[CLRSecurity project](http://clrsecurity.codeplex.com/)之类的东西的情况下，似乎没有任何方法可以更改 OAEP 填充使用的哈希值。

如果您查看[RSACng 包装器](http://clrsecurity.codeplex.com/wikipage?title=Security.Cryptography.RSACng&referringTitle=Security.Cryptography.dll)，您可以设置 EncryptionHashAlgorithm 属性。默认看起来像是 SHA256。请参阅@owelstead 在评论中给出的[答案。](https://stackoverflow.com/questions/5113498/can-rsacryptoserviceprovider-nets-rsa-use-sha256-for-encryption-not-signing)

# javascript - 如何在 mootoolslazyload 中加载常规图像

> ID：14185874
> 
> 赞同：0
> 
> 时间：2013-01-06T19:30:12.930
> 
> 标签：javascript, mootools, lazy-loading

大卫沃尔什的延迟加载存在这个问题，有些人似乎在努力解决这个问题。

我不希望页面上的每个图像都延迟加载，问题是，没有“data-src”但只有“src”的图像根本不会加载。

我试图用 'container: 'mydiv'' 替换选项 'container: window'，但延迟加载代码仍然适用于整个页面。

您能否在代码中添加一些内容，以便延迟加载仅在看到带有 data-scr 的图像时才起作用？

```
 var LazyLoad = new Class({
        Implements: [Options,Events],

        /* additional options */
        options: {
            range: 200,
            elements: "img",
            container: window,
            mode: "vertical",
            realSrcAttribute: "data-src",
            useFade: true
        },

        /* initialize */
        initialize: function(options) {

            // Set the class options
            this.setOptions(options);

            // Elementize items passed in
            this.container = document.id(this.options.container);
            this.elements = $$(this.options.elements);

            // Set a variable for the "highest" value this has been
            this.largestPosition = 0;

            // Figure out which axis to check out
            var axis = (this.options.mode == "vertical" ? "y": "x");

            // Calculate the offset
            var offset = (this.container != window && this.container != document.body ? this.container : "");

            // Find elements remember and hold on to
            this.elements = this.elements.filter(function(el) {
                // Make opacity 0 if fadeIn should be done
                if(this.options.useFade) el.setStyle("opacity",0);
                // Get the image position
                var elPos = el.getPosition(offset)[axis];
                // If the element position is within range, load it
                if(elPos < this.container.getSize()[axis] + this.options.range) {
                    this.loadImage(el);
                    return false;
                }
                return true;
            },this);

            // Create the action function that will run on each scroll until all images are loaded
            var action = function(e) {

                // Get the current position
                var cpos = this.container.getScroll()[axis];

                // If the current position is higher than the last highest
                if(cpos > this.largestPosition) {

                    // Filter elements again
                    this.elements = this.elements.filter(function(el) {

                        // If the element is within range...
                        if((cpos + this.options.range + this.container.getSize()[axis]) >= el.getPosition(offset)[axis]) {

                            // Load the image!
                            this.loadImage(el);
                            return false;
                        }
                        return true;

                    },this);

                    // Update the "highest" position
                    this.largestPosition = cpos;
                }

                // relay the class" scroll event
                this.fireEvent("scroll");

                // If there are no elements left, remove the action event and fire complete
                if(!this.elements.length) {
                    this.container.removeEvent("scroll",action);
                    this.fireEvent("complete");
                }

            }.bind(this);

            // Add scroll listener
            this.container.addEvent("scroll",action);
        },
        loadImage: function(image) {
            // Set load event for fadeIn
            if(this.options.useFade) {
                image.addEvent("load",function(){
                    image.fade(1);
                });
            }
            // Set the SRC
            image.set("src",image.get(this.options.realSrcAttribute));
            // Fire the image load event
            this.fireEvent("load",[image]);
        }
    });

    /* do it! */
        window.addEvent("domready",function() {
            var lazyloader = new LazyLoad({/*
                onScroll: function() { console.warn("scroll!"); },
                onLoad: function(img) { console.warn("load!", img); },
                onComplete: function() { console.warn("complete!"); }
                */
            });
        }); 
```

和html

```
<img src="/images/lazy/blank.gif" data-src="/images/lazy/mypic.jpg"></img> 
```

编辑：（替换'// Elementize items pass in'的代码解决了这个问题......但创建了另一个......lazyload没有在滚动上加载图像..但都是在加载页面期间）

```
 this.container = document.id(this.options.container);
 this.elements = document.id(this.container == window ? document.body :   
 this.container).getElements(this.options.elements); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:18:40.330

出色地。看代码：

```
 // Elementize items passed in
        this.container = document.id(this.options.container);
        this.elements = $$(this.options.elements); 
```

看起来容器没有被引用。

改成：

```
 // Elementize items passed in
        this.container = document.id(this.options.container);
        this.elements = this.container.getElements(this.options.elements); 
```

并确保 options.elements 是一个明智的选择器。

# buffer-overflow - Shellcode不断突破Ability FTP Server缓冲区溢出漏洞

> ID：14185876
> 
> 赞同：1
> 
> 时间：2013-01-06T19:30:38.100
> 
> 标签：buffer-overflow, shellcode

我正在从进攻安全.com 参加带有 Backtrack 的渗透测试课程，并且正在研究 Ability Server 的缓冲区溢出漏洞利用。我可以成功重写 EIP 并跳转到我的 shellcode。但是，当我开始在调试器中检查 shellcode 时，它​​会从 shellcode 中中断。我几乎 100% 确定我已经消除了坏字符。我什至在发送它之后将它发送到调试器中的 shellcode 之前比较了 shellcode，它们是相同的。

我很抱歉不得不通过 imgur 相册发布图片。由于我是 stackoverflow.com 的新手，因此在我获得一些街头信誉之前，他们不会允许我发布图片。

图片在缓冲区溢出相册中。（唯一专辑） [http://edwardmcfellon.imgur.com/](http://edwardmcfellon.imgur.com/)

{图 1}在这里，我在 EIP 设置了一个断点。到目前为止一切都很好。

{图 2}我让程序继续，它跳转到我的 shell 代码。一切都还好。

{图 3}当程序执行 POP EBX 时，我的 shellcode 中断，这是我的问题。

{图 4}这是它在破裂后结束的地方。

任何帮助，将不胜感激。仅供参考，我对编写缓冲区溢出非常陌生，我希望了解为什么会发生这种情况以及将来如何防止它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:21:54.100

确保包含 NOP 幻灯片。它增加了你的漏洞利用的稳定性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:01:16.883

可能 ESP 指向堆栈外，因此 POP EBX 指令最终会尝试从无效内存中读取。

# spring - Spring mvc checkboxes tag：不确定路径attr的格式是什么

> ID：14185879
> 
> 赞同：0
> 
> 时间：2013-01-06T19:31:29.780
> 
> 标签：spring, spring-mvc, checkbox

我正在使用 Spring 表单复选框标签。我的 modelAttribute 是 bookmarkMapping ，它又包含一个 folderMapping 对象列表，我试图根据这些对象构建复选框。

folderMapping 对象具有 isMapping 属性，该属性决定复选框的选中属性。

我正在尝试这个

```
<form:checkboxes items="${bookmarkMapping.folderMapping}" path="isMapped"  itemValue="isMapped" itemLabel="folderName" /> 
```

但它一直说 isMapped 不是 bookMarkMapping 的属性，这是真的。但是我应该以什么方式提供 path 属性，以便它可以指向带有 bookmarkMapping.folderMapping 列表的属性。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:11:44.180

form:checkboxes 标签中涉及到两个列表：选中项的列表，以及可供选择的列表项。

所选项目的列表存储在`path`属性中。该`path`属性指向**模型**中的一个数组或字符串集合。

该`items`属性指向可用项目的列表。该列表是**请求**中的一个属性。它通常是表示标签的数组或字符串列表。

这是一些示例代码。CheckboxesModel 包含一个选定项列表。该请求包含可用项目列表。

模型

> 公共类 CheckboxesModel {
> 列出选定项；
> 
> public List getSelectedItems() { return selectedItems; }
> 
> public void setSelectedItems(List selectedItems) { this.selectedItems = selectedItems; }
> 
> }

控制器

> @RequestMapping("/index.do")
> 
> public String showCheckboxes(HttpServletRequest request, HttpServletResponse response, Model model) {
> 
> ```
>  CheckboxesModel checkboxesModel = new CheckboxesModel();
>   List<String> selectedItems = new ArrayList<String>();
>   checkboxesModel.setSelectedItems(selectedItems);
>   model.addAttribute("checkboxesModel",checkboxesModel);
> 
>   List<String> availableItems = new ArrayList<String>();
>   availableItems.add("One");
>   availableItems.add("Two");
>   availableItems.add("Three");
>   request.setAttribute("availableItems",availableItems);
> 
>   return "index"; 
> ```
> 
> }

看法

```
<form:form action="checkBoxes.do" commandName="checkBoxesModel" method="POST">
    <form:checkboxes items="${availableItems}" path="selectedItems"/>
    <input type="submit" value="Submit"/>
</form:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T01:19:19.703

您谈到了名为 isMapping 的属性，但您在 path 属性中设置了：isMapped #confused

路径是相对于 modelAttribute 的。您在 bookmarkMapping 中没有 isMapped 属性，但您有一个 folderMapping 属性。

所以你的路径应该是 folderMapping.isMapped

# scala - 如何在同一个文件中使用可变集和不可变集，在 Scala

> ID：14185881
> 
> 赞同：7
> 
> 时间：2013-01-06T19:31:48.327
> 
> 标签：scala, set

鉴于 Set 的默认实现是不可变的：

```
val Set = immutable.Set 
```

为了使其可变，需要导入

```
import scala.collection.mutable.Set; 
```

如果需要在给定文件中同时使用可变集和不可变集，应该如何处理？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-06T20:03:20.767

当您需要在同一个文件中同时使用可变和不可变集合时，规范的解决方案只是使用前缀`mutable`或`immutable`显式。

```
import collection._

val myMutableSet: mutable.Set[Int] = mutable.Set(1, 2, 3)
val myImmutableSet: immutable.Set[Int] = immutable.Set(1, 2, 3) 
```

正如 Kim Stebel 在他的回答中提到的，您还可以使用重命名导入：

```
import scala.collection.mutable.{Set => MutableSet} 
```

然而`mutable.Set`，它只比 多一个字符`MutableSet`，并且没有引入任何新名称，所以您不妨使用前一种形式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-06T19:34:42.127

您可以在导入符号时重命名它们。

```
import scala.collection.mutable.{Set => MutableSet} 
```

# google-tv - 如何使用 API 级别 14 运行 GoogleTV 模拟器

> ID：14185882
> 
> 赞同：1
> 
> 时间：2013-01-06T19:32:02.083
> 
> 标签：google-tv

Googel TV [Link](https://developers.google.com/tv/android/docs/gtv_emulator)指出

> 您应该为您的 Google TV AVD 使用以下设置：
> 
> ```
> AVD target of GoogleTV Addon (Google, Inc.) - API Level 12.
> Screen resolution of 720p or 1080p. 
> ```

不过后来也说了

> Android SDK 工具修订版 14 包括对电视和媒体控制按钮的支持

那么如何获得 API 14 GoogleTV AVD 呢？因为在 AVD 管理器中我只能选择“GoogelTV Addon API Level 12”或“Android 4.0 API Level 14”，所以没有像“Google TV Addon API Level 14”这样的选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T01:21:41.210

Google TV 支持 API 级别 13 而不是 14。无法在模拟器或 Google TV 上获得 API 14 或更高级别的支持。

建议：不要使用带有 Google TV SDK 的模拟器，您不需要它来开发 Google TV 应用程序。它仅用于帮助您测试 dpad 导航。相反，我建议您使用普通的 Android 模拟器创建 Nexus 7 AVD 并将其设置为水平模式 - 这将模拟电视的 1280x720p 分辨率。除非您正在编写特定于 Google TV 媒体堆栈的编码，否则您可以或多或少地将其视为普通的 Android 设备（没有电话、没有摄像头、没有触摸）。

# ruby-on-rails - 如何在rails中构建没有id的资源路径？

> ID：14185884
> 
> 赞同：0
> 
> 时间：2013-01-06T19:32:10.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-routing

```
class A < ApplicationController
  def step1
   @b = B.new
  end

  def step2
  end
end 
```

Step1 渲染这个表格

```
<%= form_for @b do |f| %>
  <%= f.hidden_field :redirect_to=> url_path_to_controller_A_step2_and_include_id_of_resource_b_created_after_submitting_this_form
<% end %> 
```

如何在不知道“要创建”资源 B 的 id 的情况下生成 url_path_to_controller_A_step2_and_include_id_of_resource_b_created_after_submitting_this_form？

在我的 routes.rb 文件中：

得到 "A/:b_id/step2", :controller=>:A, :action=>:step2, :as=>:A_step_2

我确信我不是第一个面临这个问题的人，但是通过谷歌和这里搜索，并没有抛出相关结果。

# php - 如何使CKEDITOR在html中显示文本

> ID：14185885
> 
> 赞同：0
> 
> 时间：2013-01-06T19:32:12.003
> 
> 标签：php, html, ckeditor

我刚刚将我网站上的编辑器从常规的十年前的 bbcode 编辑器更改为最新的 ckeditor。一切正常，期望一旦使用 CKeditor 提交评论，输出显示如下

```
<p>Testing</p> 
<p>&nbsp;</p> 
```

所以最后输出显示html代码。我如何让它不显示 html 代码并实际执行 html 指定的操作，例如粗体、斜体、居中等。

顺便说一句，我是网站开发的新手，所以尽可能简单地解释一下，否则我可能不明白你在说什么。我还在下面添加了我正在使用的代码。

```
<?php

session_start();

include "init.php";

$pg_title = "Comments";

if($_SESSION['auth'] && $_SESSION['auth']['ip_address'] == ip2long(get_real_ip()) && isset($_SESSION['auth']['sid']))
{
    include ROOT . '/templates/' . $config['template_version'] . '/files/header.php';

    $id = $_GET['id'];
    $pg = $_GET['pg'];

    if(!preg_match("/[0-9]+/", ($id or $pg)))
    {
        echo '<div style="text-align: center;">The news ID or page number cannot be found in our database.</div>';
        include ROOT . '/templates/' . $config['template_version'] . '/files/footer.php';
        exit();
    }

    if(!isset($id) or !isset($pg) or empty($id) or empty($pg))
    {
        echo '<div style="text-align: center;">The news ID or page number cannot be found in our database.</div>';
        include ROOT . '/templates/' . $config['template_version'] . '/files/footer.php';
        exit();
    }

    $sql = mysql_connect($config['mysql_host'], $config['mysql_user'], $config['mysql_pass']);
    mysql_select_db($config['mysql_name'], $sql);

    $news = mysql_fetch_array(mysql_query("SELECT * FROM news WHERE id = '$id'"));

    $limit = 20;
    $comment_num = $news['comments'];
    $pages_num = ceil($comment_num/$limit);
    $comments = "(<strong>$comment_num</strong>)";

    if($pages_num == 0) {
        $comments = "<a href=\"comments,".$news[0].",1.html\">$comments</a>";
    } else {
        $comments = "<a href=\"comments,".$news[0].",$pages_num.html\">$comments</a>";
    }
?>
        <div class="post">
            <div class="title">
                <div class="left">&nbsp;</div>
                <div class="main">
                    <h2><?php echo stripslashes($news[1]); ?></h2>
                    <p><span>Posted by:</span> <?php echo "<a href=\"profile,".strtolower($news[2]).".html\">".ucwords($news[2])."</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>On:</span> ".$news[4].""; ?></p>

                </div>
                <div class="comment"><?php echo $comments; ?></div>
                <div class="right">&nbsp;</div>
                <div class="clr">&nbsp;</div>
            </div>
            <div class="entry">
                <p><?php echo stripslashes($news[3]); ?></p>

            </div>
        </div>

<?php

    $limit_value = $pg * $limit - ($limit);

    $comment_list = mysql_query("SELECT * FROM comments WHERE news_id = '$id' LIMIT $limit_value, $limit");

    if(mysql_num_rows($comment_list) == 0) {
            echo '<div style="text-align: center; margin-bottom: 20px;"><em>No comments have been posted yet.</em></div>';
            //  echo "<div style=\"height: 1px; background: url('http://localhost/projects/bleachexile.com/templates/v3/images/split.gif') repeat-x bottom left; margin: 1px 0px 1px 0px;\"></div>";
    }
?>
<style type="text/css">
<!--
table, tr, td { border: 1px solid #2e2e2e; border-collapse: collapse; }
.bbcode a { margin-left: 5px; padding: 0; float: left; border: 1px solid #242424; line-height: 0; }
.bbcode a:hover { background-color: #242424; border: 1px solid #2e2e2e; }
.bbcode a img { border: 0; }
.spoiler { width: 80%; margin: 10px auto; visibility: hidden; cursor: default; cursor: hand; }
.spoiler div { visibility: visible; text-align: center; border: 1px solid #2e2e2e; background-color: #242424; font-weight: bold; }
.code { margin: 10px 5px; font-family: Courier New; }
-->
</style>
    <?php

    $timenow = time();

    $cc = ceil(mysql_num_rows(mysql_query("SELECT * FROM comments WHERE news_id = '$id'"))/20);

    if(mysql_num_rows($comment_list) != 0)
    {
        echo '<div style="border: 1px solid #2e2e2e; background: #242424; padding: 2px 4px 2px 4px; margin-bottom: 12px;">
              <div style="float: right; margin-top: 3px;">Current Page: '.$pg.' of '.$cc.'</div>';
        echo "<form name=\"pageForm\" method=\"get\" action=\"\" style=\"margin: 0px; padding: 0px;\">Go to page: <select name=\"pg\" onchange=\"document.location=this.value\" style='width: 40px;'>";

        for($i = 1; $i <= $cc; $i++)
        {
            if($i == $pg) {
                echo "<option value=\"comments,$id,$i.html\" selected=\"selected\">$i</option>";
            } else {
                echo "<option value=\"comments,$id,$i.html\">$i</option>";
            }
        }

        echo "</select> of $cc</form>";

        echo '</div>';

    }

    while($row = mysql_fetch_array($comment_list))
    {
        $x = mysql_fetch_array(mysql_query("SELECT * FROM users WHERE username = '{$row['poster']}'"));

        if($x['active'] < ($timenow - 300))
        {
            $y = '<strong style="color: red;">Offline</strong>';
        }
        else
        {
            $y = '<strong style="color: green;">Online</strong>';
        }

        echo '<table width="100%" border="0" cellspacing="0" cellpadding="2" style="margin-bottom: 12px;">';
        echo '<tr>';
        ?><td align="center" valign="top" width="1%" style="padding: 2px;">
<?php
$ava = explode("|", $x['user_avatar']);
if($ava[0] == "local")
{
    $img = getimagesize(ROOT . "/images/uploads/avatars/".strtolower($x['username']).$ava[1]."");
    echo '<img src="images/uploads/avatars/' . strtolower($x['username']) . $ava[1] . '" width="'.$img[0].'" height="'.$img[1].'" alt="'.ucwords($x['username']).'\'s Avatar" />';
}
else
{
    echo '<img src="templates/v3/images/no_avatar.gif" width="75" height="75" alt="No Avatar" />';
}
    echo "<div style='margin-top: -2px; text-align: center;'>";
      if ($x['custom_rank'] == NULL) {
        if($x['posts'] <= 200 and $x['rank'] != "1") {
            echo "Human";
        } elseif($x['posts'] > 200 and $x['posts'] <= 500 and $x['rank'] != "1") {
            echo "Student Exorcist";
        } elseif($x['posts'] > 500 and $x['posts'] <= 700 and $x['rank'] != "1") {
            echo "Novice Exorcist";
        } elseif($x['posts'] > 700 and $x['posts'] <= 800 and $x['rank'] != "1") {
            echo "Advanced Exorcist";
        } elseif($x['posts'] > 800 and $x['posts'] <= 900 and $x['rank'] != "1") {
            echo "Equip Type Exorcist";
        } elseif($x['posts'] >  900 and $x['posts'] <= 1000 and $x['rank'] != "1") {
            echo "Parasite Type Exorcist";
        } elseif($x['posts'] >  1000 and $x['posts'] <= 1200 and $x['rank'] != "1") {
            echo "Division Leader";
        } elseif($x['posts'] >  1200 and $x['posts'] <= 1500 and $x['rank'] != "1") {
            echo "General";
        } elseif($x['posts'] >  1500 and $x['posts'] <= 1800 and $x['rank'] != "1") {
            echo "Akuma";
        } elseif($x['posts'] >  1800 and $x['posts'] <= 2000 and $x['rank'] != "1") {
            echo "Akuma Level 2";
        } elseif($x['posts'] >  2000 and $x['posts'] <= 2500 and $x['rank'] != "1") {
            echo "Akuma Level 3";
        } elseif($x['posts'] >  2500 and $x['posts'] <= 3500 and $x['rank'] != "1") {
            echo "Akuma Level 4";
        } elseif($x['posts'] >  3500 and $x['posts'] <= 4500 and $x['rank'] != "1") {
            echo "Noah Family Member";
        } elseif($x['posts'] >  4500 and $x['posts'] <= 5000 and $x['rank'] != "1") {
            echo "S-Class Missing-nin";
        } elseif($x['posts'] >  5000 and $x['posts'] <= 6000 and $x['rank'] != "1") {
            echo "Legendary Sannin";
        } elseif($x['posts'] >  6000 and $x['posts'] <= 8000 and $x['rank'] != "1") {
            echo "Kage";
        } elseif($x['posts'] > 8001 and $x['rank'] != "1") {
            echo "Hokage";
        } elseif($x['rank'] == "1") {
            echo "<span style='font-weight: bold; color: royalblue;'>Administrator</span>";
        }
      } else {
        echo '<span style="color: maroon;">'.$x['custom_rank'].'</span>';
        if($x['rank'] == "1") {
            echo "<br /><span style='font-weight: bold; color: royalblue;'>Administrator</span>";
        }
      }
    echo "</div>";
    echo "<div style='text-align: center;'>";
    echo "<strong>Posts:</strong> " . $x['posts'];
    echo "</div>";
    echo '<td align="left" valign="top" style="background: #242424;"><div style="border-bottom: 1px solid #2e2e2e; background: #323232;"><div style="padding: 2px;">Posted by <strong><a href="profile,'.strtolower($row['poster']).'.html">'.ucwords($row['poster']).'</a></strong> on '.$row['date'].'</div></div><div style="padding: 2px;">'.stripslashes($row['comment']).'</div></td></td>';
        echo '</tr>';                                                                                                                 // comments,'.$id.','.$pg.','.$row['id'].'.html
        if($x['donor'] == 1 or $x['referrals'] >= 25)
        {
            $xxx = '<em style="font-size: 11px; font-weight: bold; color: #1b9eb2;">Supportive Member!</em>';
        }
        else
        {
            $xxx = "";
        }
        echo '<tr><td colspan="2" align="right" style="background: #323232; padding: 2px;"><div style="float: left;">'.$xxx.'</div>'.ucwords($row['poster']).' is '.$y.' | <a href="#quoteMessage" onClick="mQuoteMessage('.$row['id'].'); return false;">Quote Comment</a> | <a href="message,'.strtolower($row['poster']).'.html">Private Message</a></td></tr>';
        echo '</table>';
    }

?>
<a name="checkComments"></a>
<script type="text/javascript">
  var newComment = 'null';

  function makeRequest(url) {
    var http_request = false;

    if (window.XMLHttpRequest) { // Mozilla, Safari, ...
      http_request = new XMLHttpRequest();
            if (http_request.overrideMimeType) {
                http_request.overrideMimeType('text/xml');
                // See note below about this line
            }
        } else if (window.ActiveXObject) { // IE
            try {
                http_request = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try {
                    http_request = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {}
            }
        }

        if (!http_request) {
            return false;
        }
          http_request.onreadystatechange = function() { doContents(http_request); };
          http_request.open('GET', url, true);
          http_request.send(null);
    }

    function doContents(http_request) {

        if (http_request.readyState == 4) {
            if (http_request.status == 200) {
                newComment = http_request.responseText;
            if (newComment > 0) {
            document.getElementById('comCheck').innerHTML = 'There are ' + newComment + ' new comments. Would you like to?<br /><a href="#checkComments" onclick="SetDefault();">cancel</a> <a href="#checkComments" onclick="location.reload();">reload</a>';
        } else {
            document.getElementById('comCheck').innerHTML = 'No new comments found. <br /><a href="#checkComments" onclick="StartScan();">Try again</a>';
        }
            }
        }

    }
function SetDefault() {
   document.getElementById('comCheck').innerHTML = '<a href="#checkComments" onclick="StartScan();">Check for new comments</a>';
}
function StartScan() {
   document.getElementById('comCheck').innerHTML = 'Checking in progress, please wait...'; 
   <!-- Do The OnLine Scan -->
   makeRequest('com_update.php?id=<?=$id?>&current=<?=$comment_num?>');
}
</script>
<div style="border: 1px solid #2e2e2e; background: #242424; padding: 2px 4px 2px 4px; margin-bottom: 12px; text-align: center;" id="comCheck">
<a href="#checkComments" onclick="StartScan(); StartScan();">Check for new comments</a>
</div>
<?php
    if(mysql_num_rows($comment_list) != 0)
    {
        echo '<div style="border: 1px solid #2e2e2e; background: #242424; padding: 2px 4px 2px 4px; margin-bottom: 12px;">
              <div style="float: right; margin-top: 3px;">Current Page: '.$pg.' of '.$cc.'</div>';

        echo "<form name=\"pageForm\" method=\"get\" action=\"\" style=\"margin: 0px; padding: 0px;\">Go to page: <select name=\"pg\" onchange=\"document.location=this.value\" style='width: 40px;'>";

        for($i = 1; $i <= $cc; $i++)
        {
            if($i == $pg) {
                echo "<option value=\"comments,$id,$i.html\" selected=\"selected\">$i</option>";
            } else {
                echo "<option value=\"comments,$id,$i.html\">$i</option>";
            }
        }

        echo "</select> of $cc</form>";

        echo '</div>';
    }
        ?>
<script type="text/javascript" src="/exec/js/bbcode.js"></script>
<form name="textForm" id="textForm" method="post" action="" style="margin: 0px; padding: 0px;">

        <?
    if(!isset($_POST['submit']))
    {
        echo '<legend style="color: #1b9eb2;">Comment</legend>';
        echo '<div style="padding-bottom: 4px;"></div>';
        echo '<strong>Body Message:</strong><br /><textarea class="ckeditor" name="textArea" id="textArea" style="width: 100%; height: 100px;">';        
        echo '</textarea>';
        echo '<div style="margin-top: 8px;"></div><input type="submit" name="submit" id="submit" value="Post Comment" style="width: 88px;" /> ';
        echo '</form>';

        }
        else
        {

        $comment = trim($_POST['textArea']);

        if(!isset($comment) or empty($comment) or (strlen($comment) < 3) or (strlen($comment) > 3000))
        {

        echo '<fieldset style="padding: 4px; margin-top: 8px;">';
        echo '<legend style="color: #1b9eb2;">Comment</legend>';
        echo '<div style="padding-bottom: 4px; color: red;">The length of the entered comment was insufficient.</div>';
        echo '<strong>Body Message:</strong><br /><textarea class="ckeditor" name="textArea" id="textArea" style="width: 530px; height: 100px;">';    
        echo '</textarea>';
        echo '</fieldset>';
        echo '<div style="margin-top: 8px;"></div><input type="submit" name="submit" id="submit" value="Post Comment" style="width: 88px;" /> <input type="reset" name="reset" id="reset" value="Reset Friends" style="width: 87px;" />';
        echo '</form>';

        }
        else
        {
                $date = date("l, F jS, Y \a\\t h:i:s A");
                $comment = htmlspecialchars($comment);

        // ADVANCED BBCODE PREG PATTERNS - DON'T EVEN DARE TO MODIFY :)))
        $validUsername = "[a-zA-Z0-9]{3,16}";
        $validDate = "[a-zA-Z0-9]+,\s?[a-zA-Z]+\s+\d+[a-zA-Z]+,\s?\d+\s+\d{2}\:\d{2}\:\d{2}\s+[a-zA-Z]{2}";
        $validURL = ".*?";
        $quoteBBCodePattern = '/\[QUOTE=('.$validUsername.'),\s?('.$validDate.')\](.*?)\[\/QUOTE\]/xs';
        $urlBBCodePattern = '/\[URL=('.$validURL.')\](.*?)\[\/URL\]/';
        // SIMPLE BBCODE REPLACE
        $comment = preg_replace("/\[(B|b|I|i|U|u)\]/", "<$1>", $comment);
        $comment = preg_replace("/\[\/(B|b|I|i|U|u)\]/", "</$1>", $comment);
        $comment = preg_replace("/\[(CODE|code)\](.*?)\[\/(CODE|code)\]/xs", '<div class="code">\\2</div>', $comment);
        $comment = preg_replace("/\[URL\]((http:\/\/)?(.*?))\[\/URL\]/", "<a href=\"http://\\3\">\\1</a>", $comment);
        $comment = preg_replace("/\[QUOTE\](.*?)\[\/QUOTE\]/xs", "<div class=\"quote\">$1</div>", $comment);
        $comment = preg_replace("/\[SPOILER\](.*?)\[\/SPOILER\]/xs", "<div class=\"spoiler\" onclick=\"this.style.visibility='visible';\"><div>SPOILER</div>$1</div>", $comment);
        // ADVANCE BBCODE REPLACE
        $comment = preg_replace($quoteBBCodePattern, '<div class=\"quote\">$1 on $2<div class=\"under\">$3</div></div>', $comment);
        $comment = preg_replace($urlBBCodePattern, '<a href="$1">$2</a>', $comment);

                $comment = nl2br(addslashes($Std->parseEmoticons($comment)));
                mysql_query("INSERT INTO comments (news_id, poster, date, comment) VALUES ('$id', '".ucwords($_SESSION['auth']['username'])."', '$date', '$comment')");
                mysql_query("UPDATE news SET comments = (comments + 1) WHERE id = '$id'");
                mysql_query("UPDATE users SET posts = (posts + 1) WHERE id = '{$_SESSION['auth']['uid']}'");

                echo "<script style='text/javascript'>document.location='".$_SERVER['REQUEST_URI']."'</script>";

     /*   echo '<form name="post_comment" id="post_comment" method="post" action="" style="margin: 0px; padding: 0px;">';
        echo '<fieldset style="padding: 4px;">';
        echo '<legend style="color: #456194;">Comment</legend>';
        echo '<div style="padding-bottom: 4px; color: green;">Your comment has been successfully submitted. <a href="comments,'.$news[0].','.$pages_num.'.html">Click here</a> to display your comment.</div>';
        echo '<strong>Body Message:</strong><br /><textarea name="comment_post" id="comment_post" style="width: 495px; height: 100px;">'.stripslashes($comment).'</textarea>';
        echo '</fieldset>';
        echo '<div style="margin-top: 8px;"></div><input type="submit" name="submit" id="submit" value="Post Comment" style="width: 100px;" /> <input type="reset" name="reset" id="reset" value="Reset Friends" style="width: 88px;" /></div>';
        echo '</form>'; */

        }

        }

   //     echo "</div>";
    //echo "</div></div>";

        include ROOT . '/templates/' . $config['template_version'] . '/files/footer.php';

} else {
        header("Location: signin.html");
        exit();
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:40:45.583

`$comment = htmlspecialchars($comment);`

这是您转换所有 < 和 > 的问题，因此它们存储在数据库`&lt;`中`&gt;`

然后浏览器显示原始 < 和 > 而不是将其视为 html。

参考：[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)

# wcf - 不支持关于 WCF 的协议“net.tcp”问题

> ID：14185889
> 
> 赞同：0
> 
> 时间：2013-01-06T19:32:59.763
> 
> 标签：wcf

首先，我创建了一个 WCF 服务应用程序，其中创建了 svc 文件。然后我写我的小服务相关代码。**当我按 F5 时，wcf 测试客户端显示正常，当我选择 svc 文件并在浏览器选项中选择视图时，一切正常**。最初我在配置文件中只有一个端点......那就是**wsDualHttpBinding**然后一切正常。

当我添加另一个名为**netTcpBinding**的端点时，问题就开始了。在配置文件中添加 netTcpBinding 端点后，当我尝试在浏览器中再次浏览 svc 文件时，我收到名为**The protocol 'net.tcp' is not supported 的**错误消息，当我按 F5 时，wcf 测试客户端显示错误消息称为`** Cannot obtain Metadata from http://localhost:30996/ChatService.svc**`

我只是不明白为什么当我添加 netTcpBinding 时会发生这种情况。我想说的是我没有在任何地方托管我的服务。我只是创建 WCF 服务应用程序并在 web.config 文件中添加所有条目，然后按 F5。这是因为我没有在任何地方托管我的服务而出现错误的原因吗？

所以这是我的配置细节如下

```
<?xml version="1.0"?>
<configuration>

    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>

  <system.serviceModel>
    <services>
      <service name="BBAChatService.ChatService" behaviorConfiguration="BBAChatService.ChatServiceBehavior" >
        <host>
          <baseAddresses>
            <add baseAddress ="http://localhost:30996/ChatService.svc/"/>
            <add baseAddress ="net.tcp://localhost:30997/ChatService/"/>
          </baseAddresses>
        </host>

        <endpoint name="dual_bind"
                  address="dual"
                  binding="wsDualHttpBinding" 
                  bindingConfiguration="WSDualHttpBinding_IChatService" 
                  contract="BBAChatService.IChatService">
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

        <endpoint name="tcp_bind"
              address="net.tcp://localhost:30997/ChatService"
              binding="netTcpBinding"
              bindingConfiguration="tcpBinding"
              contract="BBAChatService.IChatService">
        </endpoint>

        <endpoint address="net.tcp://localhost:30997/ChatService/mex"
                          binding="mexTcpBinding"
                          contract="IMetadataExchange"/>

      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="BBAChatService.ChatServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <netTcpBinding>
        <binding name="tcpBinding"
                         maxBufferSize="67108864"
                         maxReceivedMessageSize="67108864"
                         maxBufferPoolSize="67108864"
                         transferMode="Buffered"
                         closeTimeout="00:00:10"
                         openTimeout="00:00:10"
                         receiveTimeout="00:20:00"
                         sendTimeout="00:01:00"
              portSharingEnabled="true"
                         maxConnections="100">
          <security mode="None">
          </security>
          <readerQuotas maxArrayLength="67108864"
                                  maxBytesPerRead="67108864"
                                  maxStringContentLength="67108864"/>
          <reliableSession enabled="true" inactivityTimeout="00:20:00"/>
        </binding>
      </netTcpBinding>
      <wsDualHttpBinding>
        <binding name="WSDualHttpBinding_IChatService"
                 closeTimeout="00:01:00"
                 openTimeout="00:01:00"
                 receiveTimeout="00:10:00"
                 sendTimeout="00:01:00"
                 bypassProxyOnLocal="false"
                 transactionFlow="false"
                 hostNameComparisonMode="StrongWildcard"
                 maxBufferPoolSize="524288"
                 maxReceivedMessageSize="65536"
                 messageEncoding="Text"
                 textEncoding="utf-8"
                 useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" 
                        maxStringContentLength="8192" 
                        maxArrayLength="16384" 
                        maxBytesPerRead="4096" 
                        maxNameTableCharCount="16384"/>
          <reliableSession 
            ordered="true" 
            inactivityTimeout="00:10:00"/>
          <security mode="Message">
            <message clientCredentialType="Windows" 
                     negotiateServiceCredential="true" 
                     algorithmSuite="Default"/>
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
  </system.serviceModel>
</configuration> 
```

只是告诉我缺少什么......我需要在我的配置文件中进行更改。

这是我的项目解决方案资源管理器的屏幕截图。

![在此处输入图像描述](../Images/0454c139e703eb1136b741c17577eb46.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T23:07:16.013

按 F5 时 VS 使用的内置 Web 服务器仅支持 HTTP 激活，因此您将无法在其中托管 net.tcp 端点。您可以：

*   在 IIS 中托管（启用非 HTTP 激活）
*   为您的服务编写一个简单的主机应用程序
*   使用可以在 %VS INSTALLATION DIR%\Common7\IDE 中找到的 WcfSvcHost.exe

正确托管服务后，您必须为其创建元数据交换端点（绑定类型为 mexTcpBinding）并在 net.tcp 端点的行为配置中设置`httpGetEnabled`为`false`。

**编辑：** 有关 WcfSvcHost.exe 的详细使用说明，请参阅[此 msdn 文章](http://msdn.microsoft.com/en-us/library/bb552363.aspx)。至于 httpGetEnabled，我打算在 net.tcp 服务端点的行为中将 serviceMetadata 设置为 false。

```
<serviceBehaviors>
    <behavior name="BehaviorName">
      <serviceMetadata httpGetEnabled="false" />
    </behavior>
<serviceBehaviors> 
```

然后只需将此行为应用于您的 net.tcp 端点。我假设您希望通过 TCP（不是 HTTP）公开此端点的元数据，在这种情况下，您需要包含一个 mexTcpBinding 端点。

# winforms - “无法在 'System.Int32' 类型上调用 AddNew”

> ID：14185890
> 
> 赞同：0
> 
> 时间：2013-01-06T19:33:07.403
> 
> 标签：winforms, c#-4.0

尽管我进入设计器的属性窗口并启用它，但我有一个`BindingNavigator`向 a 提供数据并且“添加新”按钮被禁用。`DataGrid`

所以我强制它在代码中启用。我单击它会通过`ShowDialog`. 退出添加表单后，子运行以刷新数据。然后我得到这个错误：

> 不能在“System.Int32”类型上调用 AddNew。此类型没有公共默认构造函数。如果您设置 AllowNew=true 并处理 AdditionalNew 事件，您可以在“System.Int32”类型上调用 AddNew。

在 Main 内的这一行

```
Application.Run(new Form1());

    private void PopulateForm()
    {
        totalRecords = fm.GetPPT_Count();

        PageOffsetList po = new PageOffsetList();
        po.totalRecords = totalRecords;
        vwFoodProdProdTextBindingSource.DataSource = po;

        if(bindingNavigator1.AddNewItem.Enabled == false)
        {
            bindingNavigator1.AddNewItem.Enabled = true;
        }           
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:37:13.200

如果我没记错的话，启用是只读的。如果要设置 AddNewItem 尝试查找 IsEnabled 属性，它应该是读/写的。

# ruby-on-rails - 整合铁路和骨干线路

> ID：14185891
> 
> 赞同：0
> 
> 时间：2013-01-06T19:33:14.177
> 
> 标签：ruby-on-rails, backbone.js

我在前往路线时无法触发“刽子手”功能

应用程序.js

```
var init = function(){
  console.log("init called");      #logged
  var router = new Router();
  console.log(router);
  Backbone.history.start();
}; 
```

当我检查 console.log(router) 中的“路由器”变量时，它表明在路由器对象上创建了 hangman 函数

```
child
__proto__: ctor
constructor: function (){ return parent.apply(this, arguments); }
hangman: function () {
routes: Object
/hangman: "hangman"
__proto__: Object
__proto__: Object 
```

但是，当我导航到 localhost:3000/hangman 时，没有调用警报。你能建议我可能做错了什么吗？我在 Rails 应用程序中使用主干。我不太明白 Backbone 是如何理解 Rails 路由的，因为 localhost:3000/hangman 是在我的 rails 路由器文件中定义的。我想我可能必须执行 localhost:3000/hangman/#hangman 才能激活主干路由（与 rails 路由无关），但这也不起作用。

路由器.js

```
$(function() {

  window.Router = Backbone.Router.extend({

    routes: {
    '/hangman' : 'hangman'
  },

    hangman: function() {
      console.log("hangman called");      #never logged
      alert("hangman");
  }

  });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T20:33:11.457

来自[精美`Router#extend`手册](http://backbonejs.org/#Router-extend)：

> **延长** `Backbone.Router.extend(properties, [classProperties])`
> 
> [...] 请注意，您需要避免在路由定义中使用前导斜杠：

您可能也对该[`pushState`选项](http://backbonejs.org/#History-start)感兴趣：

> **start** `Backbone.history.start([options])`
> [...]
> 要表明您希望`pushState`在应用程序中使用 HTML5 支持，请使用`Backbone.history.start({pushState: true})`.

所以首先修复你的路线：

```
routes: {
    'hangman' : 'hangman' // No more leading slash.
} 
```

然后使用`pushState: true`get `/hangman`( 而不是`/#hangman`) 工作：

Backbone.history.start({ pushState: true });

# php - Ajax 不会发布到 PHP MYSQL

> ID：14185896
> 
> 赞同：0
> 
> 时间：2013-01-06T19:34:05.287
> 
> 标签：php, javascript, mysql, ajax, forms

我有一个使用 Ajax 的具有 2 个级联选择的页面。Ajax 正确填充了第二个 Select，但是当我使用 PHP 将数据发布到 MySQL 时，我收到一个错误，即 AJAX 填充的字段是“未识别”。确切的错误是

> 注意：未定义的索引：第 21 行 ..\input.php 中的 probcode

如果没有进行 Ajax 调用并且默认选择仍然存在，它会发布。只有在 AJAX 替换 DIV 后才会出错。

我想补充一点，即使 AJAX 将它添加到表单中，它就像 from 元素从 PHP 中消失一样。我应该使用另一个 PHP 函数将 AJAX 数据发布到 MySQL 吗？

我不知道 Jquery，目前正在寻找一种方法来让它只与 JavaScript 一起工作（因为时间和我缺乏 Jquery 知识），但是如果有一种简单的方法可以将 Jquery 添加到现有代码中，我会肯定会感兴趣。我也知道目前进入 MySQL 的数据不安全，这将在此之后立即解决。我目前正在研究特定功能的线框。

首先两个选择。

```
 <tr>
                <td>Problem Type</td>
                <td><?php
                    mysql_connect("localhost", "root", "") or die("Connection Failed");
                    mysql_select_db("test")or die("Connection Failed");
                    $query = "SELECT * FROM wfprobtype ORDER BY probtype ASC";
                    $result = mysql_query($query);
                    ?>
                    <select name="probtype" id="probtype" onchange="changeContent(this.value)">
                    <?php
                    while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
                    ?>
                    <option value="<?php echo $line['ID'];?>" > <?php echo $line['probtype'];?> </option>
                    <?php
                    } 
                    mysql_close()
                    ?>
                    </select>
                </td>
                <td>Problem: </td>
                <td>
                    <div id="val2div">
                        <select name="probcode" id="probcode">
                            <option value="default"></option>
                        </select>
                    </div>
                </td>
            </tr> 
```

这就是 Ajax 调用来替换“val2div”val2.php

```
<?php
$val2=intval($_GET['val2']);
mysql_connect("localhost", "root", "") or die("Connection Failed");
mysql_select_db("test")or die("Connection Failed");
$query = "SELECT * FROM wfprobcode WHERE typeID='$val2' ORDER BY Probcode ASC";
$result = mysql_query($query);
?>
<select name="probcode" id="probcode"  onchange="">
<?php
while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
?>
<option value="<?php echo $line['Probcode'];?>"> <?php echo $line['Probcode'];?> </option>
<?php
}
mysql_close()
?> 
```

Ajax 脚本 Dny.js

```
function changeContent(val)
{
if (val=="")
  // if blank, we'll set our innerHTML to be blank.
  {
  document.getElementById("val2div").innerHTML="";
  return;
  }
if (window.XMLHttpRequest) // new browser
  {  
      xmlhttp=new XMLHttpRequest(); // new browser
      alert("newb");
  }
else // Old Browser
  {  
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); 

  }
  // on state change
  xmlhttp.onreadystatechange=function()
  {
  // if we get a good response from the webpage, display the output
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
      document.getElementById("val2div").innerHTML=xmlhttp.responseText;
  }
  }
 // GET file. 
xmlhttp.open("GET","val2.php?val2="+val, true);
xmlhttp.send();
 alert(val)
} 
```

发布到 MySQL input.PHP

```
 <?php
    $con = mysql_connect("localhost","root","");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("test", $con);

    $sql="INSERT INTO `test`.`test` (
    `ID`,
    `Dattime`, 
    `probtype`,
    `probcode`
    )
    VALUES(
    NULL,NOW(),'$_POST[probtype]','$_POST[probcode]')";

    if (!mysql_query($sql,$con))
      {
      die('Error: ' . mysql_error());
      }

mysql_close($con); ?> 
```

我希望我现在只是想念一些简单的东西。这是我第一次使用 Ajax。我非常感谢目前的任何帮助。

编辑： - 在我尝试重写整个内容之前进行最后一次编辑。有没有办法使用 Jquery 来解决这个问题？如果没有，是否有人有一种肮脏而肮脏的方式来让它在没有 AJAX 的情况下完全回发？

我真的很感谢那些迄今为止做出贡献的人，以及任何有任何想法的人。

提前致谢！

-D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:58:59.513

在无休止地查看代码后，我发现在上面的代码中使用 IE 时一切正常！问题直接在于 Firefox 解释 AJAX 返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:46:59.263

在 val2.php 中，您错过了用于 select 的关闭元素

```
 </select> 
```

我猜在 input.PHP 中，应该`'{$_POST['probtype']}'`比`'$_POST[probtype]'`

```
$sql="INSERT INTO `test`.`test` (
`ID`,
`Dattime`, 
`probtype`,
`probcode`
)
VALUES(
NULL,NOW(),'{$_POST['probtype']}','{$_POST['probcode']}')"; 
```

# javascript - 服务器端 json "ajax" 调用

> ID：14185897
> 
> 赞同：-1
> 
> 时间：2013-01-06T19:34:23.993
> 
> 标签：javascript, node.js

我正在尝试使用来自 Google frmo 的 Places API 一个 node.js 服务器

这是我要访问的网址。

[https://maps.googleapis.com/maps/api/place/textsearch/json?query=parkings+in+Madrid,Spain&sensor=true&key=key](https://maps.googleapis.com/maps/api/place/textsearch/json?query=parkings+in+Madrid,Spain&sensor=true&key=key)

哪个是处理来自服务器的请求的最佳方式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:09:34.110

使用[`https.get`](http://nodejs.org/api/https.html#https_https_get_options_callback)或[`https.request`](http://nodejs.org/api/https.html#https_https_request_options_callback)。

```
const https = require("https");

https.get("https://maps.googleapis.com/maps/api/place/textsearch/json?query=parkings+in+Madrid,Spain&sensor=true&key=key", function(res) {
  console.log("Got response: " + res.statusCode);
}).on('error', function(e) {
  console.log("Got error: " + e.message);
}); 
```

# html - 2列形式和一个跨越两者的div？

> ID：14185898
> 
> 赞同：1
> 
> 时间：2013-01-06T19:34:30.063
> 
> 标签：html, forms, css

我使用 HTML 制作了一个表单，其中两列用于输入字段，然后是一个“页脚”行，其中包含表单提交按钮和其他文本。

它的基本形式看起来像这样，

```
 _______________________________
|                               |
| Input 1          Input 2      |
|                               |
| Input 3          Input 3      |    
|                               |
| Submit           Text         |
|_______________________________| 
```

但是，我不想将提交按钮和文本浮动到右侧，但它破坏了我的布局：/

```
<div id="form-wrapper">
  <form id="contact_form" method="post" action="url/to/your/server/here">
    <!-- FIRST float left -->
    <div class="float-left c1">
      <ul>
        <li>       
          <label for="name" id="name" >Name<span class="required"> *</span></label>
          <input type="text" name="name" placeholder="John Doe" autocomplete="off" required>
        </li>
        <li>
          <label for="telephone" id="telephone" >Contact Number<span class="required"> *</span></label>
          <input type="tel" name="telephone" placeholder="(01225) 123456" autocomplete="off" required>
        </li>
        <li>
          <label for="email" id="email">Email:</label>
          <input type="email" name="email address" placeholder="example@example.com">
        </li>
      </u>
    </div>

    <!-- SECOND float left -->
    <div class="float-left c2">
      <ul>
        <li>
          <label for="enquiry">Enquiry:</label>  
          <select id="enquiry" name="enquiry">  
          <option value="general">General</option>  
          <option value="sales">Sales</option>  
          <option value="support">Support</option>  
          </select>
        </li>
        <li>
          <label for="Message" id="Message" >Message<span class="required"> *</span></label>
          <textarea name="message" cols="40" rows="6" required placeholder="Enter your message"></textarea>
        </li>
      </ul>
    </div>       

    <!-- Clear - notice this is a sibling of the els with floats -->
    <div class="form_footer">
      <ul>
        <li><span id="required_field">* Required fields</span></li>
        <li><button class="submit" type="submit">Submit</button></li>
      </ul>
    </div>
  </form>
</div>

a { 
    outline: none; 
}

html, body {
    background:url(images/bg.png);
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Helvetica, Arial, sans-serif;
    font-size: 0.915em;
    line-height: 14px;
    }

#form-wrapper {
    width: 550px;
    display: block;
    background: #f6f4f4;
    border: #d2cece solid 1px;
    }

#required_field {
    float: right;
    padding: 0 40px 10px 0;
    color: #D45252;
    font-size: 11px;
    font-weight: bold;
    font-family: Lucida Sans, Lucida Grande, Lucida Sans Unicode, sans-serif;
    }

.required {
    color: #D45252;
    font-weight: bold;
    }

#contact_form ul li {
    list-style: none;
    position:relative;
    }

input, textarea, select {
    background:url(images/bg.png);
    font-family: Helvetica, Arial, sans-serif;
    display: block;
    margin: 10px 10px 15px 0px;
    resize: none;
    -moz-border-radius: 3px;
    border-radius: 3px;
    }

/* chrome, safari */  
::-webkit-input-placeholder {  
    color:#CCC;  
}  
/* mozilla */  
input:-moz-placeholder, textarea:-moz-placeholder {  
    color:#CCC;  
}  
/* ie (faux placeholder) */  
input.placeholder-text, textarea.placeholder-text  {  
    color:#CCC;    
} 

.submit {
    font-family: Helvetica, Arial, sans-serif;
    }

.float-left {
    float: left;
}

.float-right {
    float: right;
}

.form_footer {
    clear: both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:24:04.553

如果您不清除父元素的浮动，浮动元素可能会破坏您的布局。这正是您的代码中发生的事情。

在这种情况下，您正在浮动提交按钮，而没有对主父 div 进行任何 clearfix `<div id="form-wrapper"`。

只需对包装器应用一个好的 clearfix 就可以了。我在我的[jsbin](http://jsbin.com/igayer/2)上发布了这个解决方案。

我使用了 Nicolas Gallagher 的[micro clearfix hack](http://nicolasgallagher.com/micro-clearfix-hack/)。

作为参考，您可以阅读此[SO 线程](https://stackoverflow.com/questions/9543541/what-the-clearfix-class-do-in-css)。

# windows - RequestProductPurchaseAsync 抛出 Platform::InvalidArgumentException^

> ID：14185899
> 
> 赞同：0
> 
> 时间：2013-01-06T19:34:37.673
> 
> 标签：windows, asynchronous, windows-runtime, in-app-purchase, windows-store-apps

我正在尝试应用内购买 API (C++/CX) 并`RequestProductPurchaseAsync`抛出一个`Platform::InvalidArgumentException^`

我有以下代码：

```
// loading store
create_task(CurrentAppSimulator::LoadListingInformationAsync()).then([](ListingInformation^ listing)
{
    auto product1 = listing->ProductListings->Lookup("product1");
    auto product2 = listing->ProductListings->Lookup("product2");
});

//after that finishes I try to purchase product2
auto licenseInformation = CurrentAppSimulator::LicenseInformation;
if (!licenseInformation->ProductLicenses->Lookup("product2")->IsActive)
{
 // this exact next line throws InvalidArgumentException
 auto op = CurrentAppSimulator::RequestProductPurchaseAsync("product2", true); // throws !!!!!
 auto purchaseTask = create_task(op);

 purchaseTask.then([](task<Platform::String^> currentTask)
    {
        ...
    });
}
else ... 
```

如果在 Windows Store 示例项目中使用此完全相同的代码，则它可以工作，但在我自己的项目中不起作用。（显然与相同的假冒产品 xml 文件）。

任何人都可以看看吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:00:58.867

我找到了解决方案：必须在 UI 线程上调用所有 WinRT 存储函数，因此从 UI 线程获取 CoreDispatcher 并保持它通过它调用这些函数。

# perl - perl tar 文件提取

> ID：14185903
> 
> 赞同：-1
> 
> 时间：2013-01-06T19:34:50.133
> 
> 标签：perl, tar, extraction

有谁知道 perl 是否有像 python 那样的简单 tar 提取实用程序。如果可以，他们能否提供一个简单的提取能力示例。我希望找到一个核心库，但来自外部来源的库会做

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T19:40:33.240

在许多其他模块中，您可以使用：

*   [存档::焦油](http://search.cpan.org/perldoc?Archive%3A%3ATar)

您可以查看[Perl](http://perldoc.perl.org/index-modules-A.html)文档，发现这是 Perl 中的核心模块，因此它应该始终可用。那里还列出了相关的软件包，如果由于某种原因不适合您，您可以在[http://search.cpan.org/上搜索更多信息。](http://search.cpan.org/)

* * *

您还可以在[MetaCPAN](https://metacpan.org/pod/Archive::Tar)上找到它的文档（看起来[amon](https://stackoverflow.com/users/1521179/amon)更喜欢将其作为信息来源）。

您还可以找到列为核心模块[Archive::Extract](http://perldoc.perl.org/Archive/Extract.html)。

我不需要使用其中任何一个，所以我无法评论[MikeKulls](https://stackoverflow.com/users/1944636/mikekulls)提到的内存使用问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T21:24:33.757

虽然您可以使用 Archive::Tar，但实际上没有太多理由不使用（也是核心）[Archive::Extract](http://p3rl.org/Archive%3a%3aExtract)，它是一个更通用的库。这样，当您突然不得不允许使用压缩文件或其他格式时，您的代码“就可以正常工作”。

# r - R中的语法问题

> ID：14185906
> 
> 赞同：-6
> 
> 时间：2013-01-06T19:34:57.003
> 
> 标签：r, zoo

我在 R 中有一个百分比变化的动物园对象。我想从 1 或 100 开始复合这些百分比变化，看看我们是否复合了膨胀/衰减。

```
Lines <- "obs     date   pctchng comgrowth  
  1   2010-10-04 NA        100
  2   2010-10-01 .15       NA
  3   2010-09-30 .14       NA
  4   2010-09-29 -.05      NA
  5   2010-09-28 -.12      NA
  6   2010-09-27 .07       NA
  7   2010-09-24 -.15      NA
  8   2010-09-23 .186      NA
  9   2010-09-22 .01       NA
  10  2010-09-21 .03       NA
  11  2010-09-20 -.03      NA"
data <- read.zoo(textConnection(Lines), header=TRUE, index=2)
startobs <- 1
for (i in 1:100) {
  data[startobs+i,"comgrowth"] <- data[startobs+i-1,"comgrowth"] *
    (1+data[startobs+i,"pctchng"])
} 
```

我正在简化数据以使其易于显示，但这是我正在尝试做的想法。我意识到问题出在加/减/除/乘时。出于某种原因，我可以说`data[startobs+i,"comgrowth"]=data[startobs+i-1,"comgrowth"]`，但是...

我不能说`data[startobs+i,"comgrowth"]=data[startobs+i-1,"comgrowth"]+data[startobs+i-2,"comgrowth"]`。R 不会让我添加 +/-/* 等并给我这个错误

```
Error in NextMethod("[<-") : replacement has length zero 
```

这是一个语法问题，纯粹而简单。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T20:01:58.623

即使您的问题中的对象不能是动物园对象，我还是用它来创建一个......并创建一个[可重现的示例](https://stackoverflow.com/q/5963269/271616)。

```
library(zoo)
z <- structure(c(-0.03, 0.03, 0.01, 0.186, -0.15, 0.07, -0.12, -0.05, 
  0.14, 0.15, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 100),
  .Dim = c(11L, 2L), .Dimnames = list(NULL, c("pctchng", "comgrowth")),
  index = structure(c(14872, 14873, 14874, 14875, 14876, 14879, 14880,
  14881, 14882, 14883, 14886), class = "Date"), class = "zoo")
sobs <- 1
for (i in 1:10) {
  z[sobs+i,"comgrowth"]=z[sobs+i-1,"comgrowth"]*(1+z[sobs+i,"pctchng"])
} 
```

该错误是因为`Ops`动物园对象在执行操作之前首先按索引对齐。因此，对没有重叠索引的 zoo 对象的操作会产生一个没有观察的 zoo 对象，通过运行 for 循环的一次迭代可以很容易地观察到。

```
i <- 1
sobs <- 1
z[sobs+i-1,"comgrowth"]*(1+z[sobs+i,"pctchng"]) 
```

答案是使用矢量化函数并完全避免 for 循环。

```
z <- structure(c(-0.03, 0.03, 0.01, 0.186, -0.15, 0.07, -0.12, -0.05,
  0.14, 0.15), .Dim = c(10L, 1L), .Dimnames = list(NULL, "pctchng"),
  index = structure(c(14872, 14873, 14874, 14875, 14876, 14879, 14880,
  14881, 14882, 14883), class = "Date"), class = "zoo")
z$comgrowth <- 100*cumprod(1+z$pctchng) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T20:34:54.210

除了 Ops.zoo 的注册问题外，您的数据布局还有一个额外的语义问题。操作后查看你的`data`对象`read.zoo`：

```
> data
           obs pctchng comgrowth
2010-09-20  11  -0.030        NA
2010-09-21  10   0.030        NA
2010-09-22   9   0.010        NA
2010-09-23   8   0.186        NA
2010-09-24   7  -0.150        NA
2010-09-27   6   0.070        NA
2010-09-28   5  -0.120        NA
2010-09-29   4  -0.050        NA
2010-09-30   3   0.140        NA
2010-10-01   2   0.150        NA
2010-10-04   1      NA       100 
```

日期索引颠倒了顺序，“comgrowth”条目的起始值位于序列的错误末尾。

# javascript - Backbone.js“胖路由器”设计难题

> ID：14185909
> 
> 赞同：5
> 
> 时间：2013-01-06T19:35:09.093
> 
> 标签：javascript, design-patterns, backbone.js, marionette, eventaggregator

在过去的两周里，我一直在学习主干和相关工具以及编写应用程序。我遇到了一个设计问题，想知道有哪些可用的解决方案，以及 Backbone 专家是否认为这是一个问题。

问题：我最终不得不将我所有的视图依赖项放在我的 router.js 中，并且无法弄清楚它们是否可以解决这个问题。下面是来自我的 router.js 的代码：

```
// router.js
define([
  'jquery',
  'underscore',
  'backbone',
  'text',
  'views/landing',
  'views/dashboard',
],  
    function($, _, Backbone, t,LandingView,DashboardView){
        var AppRouter = Backbone.Router.extend({
        routes: {
          // Define some URL routes
          '': 'showLanding',
          'projects': 'showProjects',
          // Default
          '*actions': 'defaultAction'
        },
        navigate_to: function(model){
                alert("navigate_to");
            },

        showProjects: function() {},
        showLanding: function() {},
    });

    var initialize = function() {
        var app_router = new AppRouter;
        Backbone.View.prototype.event_aggregator = _.extend({}, Backbone.Events);
        // Extend the View class to include a navigation method goTo
        Backbone.View.prototype.goTo = function (loc) {
            app_router.navigate(loc, true);
        };
        app_router.on('route:showLanding', function(){
            var landing = new LandingView();
        });
        app_router.on('route:showProjects', function(){
            var dashboard=new DashboardView();
        });
        app_router.on('defaultAction', function(actions){
            alert("No routes");
            // We have no matching route, lets just log what the URL was
            console.log('No route:', actions);
        });
        Backbone.history.start({pushState: true});
    };
    return {
        initialize: initialize
    };
}); 
```

router.js 包括**LandingView**和**DashboardView**视图，它们依次获取相应的模板。初始路由加载具有登录模板的 LandingView。登录后，它调用 router.js 的 goTo 方法生成一个 DashboardView()。虽然这可行，但我觉得它有点难看。但是我不知道如何从 LandingView 生成一个新的 DashboardView，而不直接从 LandingView() 内部或从路由器引用 DashboardView()。

如果我继续通过 router.js 执行此操作，我最终会直接或间接地从路由器中提取我的所有视图 js 文件。听起来有点丑！

我查看了 Derick Baileys 的事件聚合器模式，但面临的问题是，如果 DashboardView 的实例还不存在，DashboardView 如何订阅由 LandingView 生成的事件？必须有人创建并初始化它才能订阅事件聚合器，对吗？如果那个人是路由器，我是否需要在路由器中预先实例化所有视图？那没有意义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T21:08:13.657

我通过仅在首次命中路线时导入视图来解决此问题：

```
define(['backbone'], function(Backbone) {
    var AppRouter = Backbone.Router.extend({
        routes: {
            '':      'home',
            'users': 'users'
        },

        home: function() {
            requirejs(["views/home/mainview"], function(HomeView) {
                //..initialize and render view
            });
        },

        users: function() {
            requirejs(["views/users/mainview"], function(UsersView) {
                //..initialize and render view
            });
        }
    });

    return AppRouter;
}); 
```

它并没有解决**最终**必须将所有视图导入路由器的问题，但惰性`requirejs`调用不会强制加载和预先评估所有脚本和模板。

事实是，某个地方的某个人必须导入模块。路由器是一个合理的位置，因为通常它是用户导航到某个页面（视图）时命中的第一段代码。如果您觉得一个路由器负责太多，您应该考虑将您的路由器分成多个路由器，每个路由器负责您应用程序的不同“部分”。作为一个很好的类比，想想典型 MVC 场景中的控制器。

# 多路由器示例

**userrouter.js**处理所有与用户相关的视图（'users/' 下的路由）：

```
define(['backbone'], function(Backbone) {
    var UserRouter = Backbone.Router.extend({
        routes: {
            'users',        'allUsers',
            'users/:id',    'userById'
        },
        allUsers: function() {
            requirejs(["views/users/listview"], function(UserListView) {
                //..initialize and render view
            });
        },
        userById: function(id) {
            requirejs(["views/users/detailview"], function(UserDetailView) {
                //..initialize and render view
            });
        }
    });
    return UserRouter;
}); 
```

**postrouter.js**处理所有与 Post 相关的视图（'posts/' 下的路由）：

```
define(['backbone'], function(Backbone) {
    var PostRouter = Backbone.Router.extend({
        routes: {
            'posts',        'allPosts',
            'posts/:id',    'postById'
        },
        allPosts: function() {
            requirejs(["views/posts/listview"], function(PostListView) {
                //..initialize and render view
            });
        },
        postById: function(id) {
            requirejs(["views/posts/detailview"], function(PostDetailView) {
                //..initialize and render view
            });
        }
    });
    return PostRouter;
}); 
```

**approuter.js**是主路由器，它在应用程序启动时启动并初始化所有其他路由。

```
define(['backbone', 'routers/userrouter', 'routers/postrouter'], 
function(Backbone, UserRouter, PostRouter) {

    var AppRouter = Backbone.Router.extend({

        routes: {
            '',        'home',
        },
        initialize: function() {
            //create all other routers
            this._subRouters = {
                'users' : new UserRouter(),
                'posts' : new PostRouter()
            };
        },
        start: function() {
            Backbone.history.start();
        },
        home: function() {
            requirejs(["views/home/mainview"], function(HomeView) {
                //..initialize and render view
            });
        }
    });
    return UserRouter;
}); 
```

最后，您的应用程序的**main.js**启动应用程序路由器：

```
new AppRouter().start(); 
```

通过这种方式，您可以使每个单独的路由器保持精简，并避免在实际需要之前解决依赖关系树。

**旁注：**如果您使用嵌套`requirejs`调用并且正在使用 进行构建`r.js`，请记住设置构建选项`findNestedDependencies:true`，以便延迟加载的模块包含在构建中。

**编辑：**这是一个[要点，它解释了 RequireJS 中的延迟加载和立即加载模块](https://gist.github.com/4475666)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T22:00:18.747

我们为此使用了一个工厂，它只返回一个视图实例，它还可以缓存实例：

```
define(function() {
  // Classes are defined like this { key1: Class1, key2: Class2 }
  // not cachedObjects are defined like this { notCached : { key3: Class3 }}
  return function(Classes) {
    var objectCache = {};

    return {
      get: function(key, options) {
        var cachedObject = objectCache[key];
        if (cachedObject){
          return cachedObject;
        }

        var Class = Classes[key];
        if (Class) {
          cachedObject = new Class(options);
          objectCache[key] = cachedObject;
          return cachedObject;
        }

        Class = Classes.notCached[key];
        if (Class) {
          return new Class(options);
        }
      }
    };
  };
}); 
```

然后我们有一个创建工厂的模块：

```
define([
  'common/factory',
  'views/view1',
  'views/view2',
  'views/view3',
  ], function(
    viewCache,
    View1,
    View2,
    View3
  ) {

  var views = {
    route1: View1,
    route2: View2,
    notCached: {
      route3: View3,
    }
  };

  return viewCache(views);
}); 
```

在路由器中，您可以通过调用 viewCache.get(route) 轻松获取视图。好处是解耦视图的创建/缓存，现在可以单独测试。

同样，当我们使用 Marionette 时，我们不会在路由器中使用 viewCache，而是在 RegionManager 中使用，这更适合创建视图。我们的路由器只是用应用程序的实际状态和路由触发事件。

# javascript - WinJS 从网站添加相关搜索？

> ID：14185912
> 
> 赞同：0
> 
> 时间：2013-01-06T19:35:20.443
> 
> 标签：javascript, html, windows-8, winjs

当用户在搜索框中输入内容时，是否可以从网站（如 Google）获取相关搜索？

我想要谷歌的“我感觉很幸运”选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:45:38.533

您需要使用 Google 搜索 API：[LINK](https://developers.google.com/web-search/)

或 Bing 搜索 API：[链接](http://www.bing.com/developers/)

# command-line - 如何为 crons 作业编写命令行？

> ID：14185916
> 
> 赞同：0
> 
> 时间：2013-01-06T19:35:31.637
> 
> 标签：command-line, cron, command, jobs, email-notifications

我已经在一个小型博客系统上工作了一段时间，我目前正在尝试制作一个电子邮件通知系统，以在人们关注该帖子时通知他们是否有新评论。

我让通知系统工作，但我无法让每小时、每 3、6 或 12 小时（用户可以选择）工作的 crons 工作。

这是我第一次需要/使用 crons 作业，老实说，我认为命令只是假设为`/home/methodjs/public_html/classified/emailNotifications.php`. 但看看其他一些命令，似乎我做错了。

我还收到一封电子邮件，`Cron Daemon`说有`No such file or directory`。

我做错了命令吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:38:24.530

PHP 本身不是可执行文件。你必须做这样的事情：

php [你的 php 文件]

php 是一个可执行文件，将使用您的 php 文件的参数运行。

所以

```
php /home/methodjs/public_html/classified/emailNotifications.php

```

会做这项工作

# android - 无法加载片段活动

> ID：14185925
> 
> 赞同：0
> 
> 时间：2013-01-06T19:37:05.610
> 
> 标签：android, android-fragments

我似乎无法找出这个错误的含义。大家能帮帮我吗？

这是我在 MainView.java 中的源代码。登录应用程序后，这是您看到的第一个屏幕，它应该显示标题，然后是 google maps api，然后是底部的菜单。

```
public class MainView extends FragmentActivity implements OnClickListener {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        return inflater.inflate(R.layout.main_view, container, false);
    }

    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();

        Fragment fragment;

        Button openDrawer = (Button) findViewById(R.id.openDrawer);
        openDrawer.setOnClickListener(this);

        Button openUploader = (Button) findViewById(R.id.menuButtonAdd);
        openUploader.setOnClickListener(this);
        Button openEditor = (Button) findViewById(R.id.menuButtonEdit);
        openEditor.setOnClickListener(this);
        Button openMap = (Button) findViewById(R.id.menuButtonMap);
        openMap.setOnClickListener(this);
        Button openPeople = (Button) findViewById(R.id.menuButtonPeople);
        openPeople.setOnClickListener(this);

        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        Map myFragment = new Map();
        ft.add(R.id.mainFragment, myFragment);
        ft.commit();
    }

    public void onClick(View arg0) {
        Fragment newFragment = new Map();

        switch (arg0.getId()) {
        case(R.id.openDrawer):
            SlidingDrawer menuDrawer = (SlidingDrawer) findViewById(R.id.menuDrawer);
            //SlidingDrawer textDrawer = (SlidingDrawer) findViewById(R.id.textDrawer);
            if (menuDrawer.isOpened() == true) {
                menuDrawer.animateClose();
                //textDrawer.animateClose();
            } else if (menuDrawer.isOpened() == false) {
                menuDrawer.animateOpen();
                //textDrawer.animateOpen();
            }
            break;
        case(R.id.menuButtonAdd):
            newFragment = new UploadFragment();
            break;
        case(R.id.menuButtonEdit):
            newFragment = new EditGallery();
            break;
        case(R.id.menuButtonMap):
            newFragment = new Map();
            break;
        case(R.id.menuButtonPeople):
            // TODO present an error
            break;
        default:
            newFragment = new Map();
            break;
        }

        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        transaction.replace(R.id.mainFragment, newFragment);
        transaction.commit();
    }
} 
```

第 37 行的代码：

```
openDrawer.setOnClickListener(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:38:29.493

这意味着你`NullPointerException`在这条线上有一个： `com.fotolife.app.MainView.onStart(MainView.java:37)`

这是因为`openDrawer`is `null`，因为在视图中找不到它。

你需要添加这个：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_view);
} 
```

并删除该`onCreateView`方法。

# vba - VBA EXCEL - 将列表框项目与单元格值进行比较（字符串）

> ID：14185927
> 
> 赞同：0
> 
> 时间：2013-01-06T19:37:14.463
> 
> 标签：vba, excel, excel-2007

我的列表框在表单上。当用户选择列表项时，它们将存储在列中。稍后当单击 m 编辑按钮时，我想读取这些值并将它们添加到表单上的选定列表 (Listbox_selectedCategories) 中并将它们从另一个列表框 (Listbox_categories) 中删除 VBA 编辑器抛出的错误是错误 381无法获取列表属性。无效的属性数组索引。我已经检查了按预期迭代的即时窗口中的 x 和 index 的值。我也尝试过没有 Cstr 函数，同样的错误。编译器将 if 语句突出显示为错误点。我确定这是一些基本的误解，我将不胜感激任何帮助或指导。谢谢。

```
 Public Sub dataLoad()
 Dim x As Integer
 x = 0

NewQueryForm.targetingDescription.value = ActiveCell.Offset(1, 0).value
NewQueryForm.booleanDescription.value = ActiveCell.Offset(1, 1).value
NewQueryForm.startDate.value = ActiveCell.Offset(1, 3).value
NewQueryForm.endDate.value = ActiveCell.Offset(1, 4).value
NewQueryForm.dfpCount.value = ActiveCell.Offset(1, 5).value

NewQueryForm.Text_300Rates = ActiveCell.Offset(1, 8).value

NewQueryForm.Text_160Rates = ActiveCell.Offset(2, 8).value

NewQueryForm.Text_728Rates = ActiveCell.Offset(3, 8).value

NewQueryForm.Text_PollRates = ActiveCell.Offset(4, 8).value

NewQueryForm.Text_CMRates = ActiveCell.Offset(5, 8).value

NewQueryForm.Text_ExCMRates = ActiveCell.Offset(6, 8).value

Call NewQueryForm_Initialize

Sheets("CAT").Activate
Range("A1").Activate
ActiveCell.Offset(0, loopCount).Activate

While ActiveCell.Offset(1, 0).value <> ""
x = x + 1
Dim index As Integer

'Adding and removing items from list
NewQueryForm.ListBox_selectedCategories.AddItem ActiveCell.Offset(x - 1, 0).value

For index = 0 To NewQueryForm.ListBox_categories.ListCount - 1

If CStr(NewQueryForm.ListBox_categories.List(index)) = ActiveCell.Offset(x - 1, 0).value Then
            NewQueryForm.ListBox_categories.RemoveItem (index)
        End If

Next index

'Adding and Subtracting from global percent label variables
selectedCategoryLabel = selectedCategoryLabel + categoryPercent(ActiveCell.Offset(x - 1, 0).value)
categoryLabel = categoryLabel - categoryPercent(ActiveCell.Offset(x - 1, 0).value)

'Setting next cell down active
ActiveCell.Offset(1, 0).Activate
Wend

'updating labels
 NewQueryForm.selectedPercent.Caption = CStr(Round(selectedCategoryLabel, 2)) & "%"
 NewQueryForm.categoryPercent = CStr(Round(categoryLabel, 2)) & "%"

NewQueryForm.Show
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T20:44:25.647

以下是我尝试过的代码。我得到了完全相同的错误。这就是我解决它的方法。

## 宾果游戏：退出循环 :)

```
Option Explicit    
'--show form on Sheet with Reg Edit mode
 Private Sub CommandButton1_Click()
    UserForm1.Show vbModeless
 End Sub   

'--Form codes within Form

Option Explicit

Private Sub cmdAddRange_Click()
Dim ws As Worksheet
Dim rng As range
Dim inputArray As Variant
Dim lRow As Long
Dim index As Integer

Set ws = Sheets(1)
Set rng = ws.range("B2")
lRow = ws.range("B" & ws.Rows.Count).End(xlUp).Row
inputArray = Application.WorksheetFunction.Transpose(rng.Resize(lRow).Value)

'Adding item to List one by one from Array
'For index = LBound(inputArray) To UBound(inputArray)
'UserForm1.ListBox1.AddItem inputArray(i)
'Next i

'Adding items to List box at ones from Array
UserForm1.ListBox1.List = inputArray
UserForm1.ListBox2.List = inputArray

End Sub

Private Sub cmdRemoveRange_Click()
Dim ws As Worksheet
Dim index As Integer

    Set ws = Sheets(1)

    '-- Remove  from listbox1
    For index = 0 To UserForm1.ListBox1.ListCount - 1

        If Not IsEmpty(ActiveCell.Value) Then
            If UserForm1.ListBox1.List(index) = ActiveCell.Value Then
                UserForm1.ListBox1.RemoveItem (index)
                MsgBox ActiveCell.Value & " deleted. And Golden Line *Exit For*"
                Exit For '-- golden line
            End If
        End If
    Next index

End Sub 
```

这是我尝试过的表格：

![在此处输入图像描述](../Images/110264118ecf29f9346525d8d2a85f09.png)

# r - R - 重塑 - 熔体错误

> ID：14185928
> 
> 赞同：0
> 
> 时间：2013-01-06T19:37:15.870
> 
> 标签：r, reshape, melt

我试图融化一个数据框，我得到了这个奇怪的错误。任何想法为什么？

```
str(zx7)
'data.frame':   519 obs. of  5 variables:
 $ calday.new: Date, format: "2011-01-03" "2011-01-04" "2011-01-05" "2011-01-06" ...
 $ A20    : Time-Series  from 1 to 519: 0 0 0 0 0 0 0 0 0 0 ...
 $ B20    : Time-Series  from 1 to 519: 0 0 0 0 0 0 0 0 0 0 ...
 $ C20    : Time-Series  from 1 to 519: 0 0 0 0 0 0 0 0 0 0 ...
 $ D20    : Time-Series  from 1 to 519: 0 0 0 0 0 0 0 0 0 0 ...

zx7.melt <- melt(zx7, id=c("calday.new"))
Error in `[<-.ts`(`*tmp*`, ri, value = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  : only replacement of elements is allowed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:27:51.950

问题是旧的“reshape”包的`melt()`函数在遇到带有类的对象时不知道该怎么做`ts`。

因此，您有两个明显的选择（尽管可能还有更多）：

1.  `unclass`当前分类为您的数据`ts`之前的变量：`melt()`

    ```
    zx7b <- zx7         # Make a backup, just in case
    library(reshape)    # Notice this is "reshape", not "reshape2"
    head(melt(zx7b, id=c("calday.new"))) # Doesn't work
    # Error in `[<-.ts`(`*tmp*`, ri, value = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  : 
    #   only replacement of elements is allowed

    ## Unclass the relevant columns from your data.frame
    zx7b[sapply(zx7b, is.ts)] <- lapply(zx7b[sapply(zx7b, is.ts)],
                                        unclass)
    head(melt(zx7b, id=c("calday.new")))
    #   calday.new variable value
    # 1 2011-01-03      A20     0
    # 2 2011-01-04      A20     0
    # 3 2011-01-05      A20     0
    # 4 2011-01-06      A20     0
    # 5 2011-01-07      A20     0
    # 6 2011-01-08      A20     0 
    ```

2.  而是升级到“reshape2”，并且不需要取消分类。

    ```
    library(reshape2) # Notice that this is reshape2!
    head(melt(zx7, id=c("calday.new"))) # Melt the original data.frame
    #   calday.new variable value
    # 1 2011-01-03      A20     0
    # 2 2011-01-04      A20     0
    # 3 2011-01-05      A20     0
    # 4 2011-01-06      A20     0
    # 5 2011-01-07      A20     0
    # 6 2011-01-08      A20     0 
    ```

我没有花时间去做，但是你可以检查每个版本的“reshape”包的`melt.data.frame`方法代码`melt()`，看看差异在哪里。安装这两个包，然后键入`reshape2:::melt.data.frame`并`reshape:::melt.data.frame`查看底层功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:21:33.400

我不知道您是如何创建结构的，但是当我这样做时，它对我有用

```
zx7 <- data.frame( calday.new=seq(from = as.Date('2011-01-03'),by=1,length.out=519),
                   A20=ts(rep(0,519)),
                   B20=ts(rep(0,519)),
                   C20=ts(rep(0,519)),
                   D20=ts(rep(0,519))) 
```

我创建了与上面相同的结构：

```
str(zx7)
'data.frame':   519 obs. of  5 variables:
 $ calday.new: Date, format: "2011-01-03" "2011-01-04" "2011-01-05" ...
 $ A20       : Time-Series  from 1 to 519: 0 0 0 0 0 0 0 0 0 0 ...
 $ B20       : Time-Series  from 1 to 519: 0 0 0 0 0 0 0 0 0 0 ...
 $ C20       : Time-Series  from 1 to 519: 0 0 0 0 0 0 0 0 0 0 ...
 $ D20       : Time-Series  from 1 to 519: 0 0 0 0 0 0 0 0 0 0 ... 
```

然后我融化：

```
head(melt(zx7, id=c("calday.new")))
  calday.new variable value
1 2011-01-03      A20     0
2 2011-01-04      A20     0
3 2011-01-05      A20     0
4 2011-01-06      A20     0
5 2011-01-07      A20     0
6 2011-01-08      A20     0 
```

# java - Android/Java：从多个活动访问同一个 SQLite DB 对象

> ID：14185932
> 
> 赞同：7
> 
> 时间：2013-01-06T19:37:41.047
> 
> 标签：java, android, database, class

我的应用程序中有一个中央数据库，需要访问几个不同的活动。

我应该通过将其设为静态来共享此对象吗？例如在初始化数据库的活动中，我这样做：

```
protected static appDatabase db; 
```

然后其他人可以通过`FirstActivity.db`.

`private appDatabase db`另一种选择是在每个需要它的活动中创建对象，但我怀疑打开多个数据库对象来访问相同的存储数据可能是浪费。

但是我对java不太了解，这就是我要问的原因 - 这样做的首选方法是什么，为什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T20:28:51.567

你可以像这样使用单例；

```
 private static DataHelper singleton;

    public static DataHelper getDataHelper(Context context) {
            if (singleton == null) {
                    singleton = new DataHelper(context);
                    OpenHelper openHelper = new OpenHelper(singleton.context);
                    singleton.db = openHelper.getWritableDatabase();
            }
            if(!singleton.db.isOpen()){
                    OpenHelper openHelper = new OpenHelper(singleton.context);
                    singleton.db = openHelper.getWritableDatabase();
            }
            singleton.context = context;
            return singleton;
    }

    private DataHelper(Context context) {
        this.context = context;
} 
```

并像这样调用你的单例类；

```
public DataHelper dh;
this.dh = DataHelper.getDataHelper(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T21:18:34.253

我使用 Application 类和同步的数据库对象管理来处理这种情况。这是一个例子。[synchronized] 限定符是多线程应用程序的关键。

根据定义，Application 对象是 Android 中的 Singleton。

```
public class App extends Application
{

private static App _instance;
private AppLocalStorage _localStorage;

@Override
public void onCreate()
{
    super.onCreate();

    _instance = this;
}

public static App getInstance()
{
        //Exposes a mechanism to get an instance of the 
        //custom application object.
        return _instance;
}

public synchronized AppLocalStorage getDatabase()
{
    if (_localStorage == null)
    {
        _localStorage = new AppLocalStorage(this);
    }

    return _localStorage;
} 
```

}

# php - 如何在类函数bindvalue中使用全局变量？

> ID：14185933
> 
> 赞同：0
> 
> 时间：2013-01-06T19:38:00.017
> 
> 标签：php, pdo, bindvalue

我想使用全局变量并使用 bindValue() 将其分配给占位符，以便可以将值插入数据库。我正在使用的功能如下

```
public function insertComment() {
    $conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
    $sql = 'INSERT INTO comments ( name, email, commentText, articleID ) VALUES ( :name, :email, :commentText, :articleID )';
    $st = $conn->prepare ( $sql );
    $st->bindValue( ":name", $this->name, PDO::PARAM_STR );
    $st->bindValue( ":email", $this->email, PDO::PARAM_STR );
    $st->bindValue( ":commentText", $this->commentText, PDO::PARAM_STR );
    $st->bindValue( ":articleID", $this->articleID, PDO::PARAM_INT );
    $st->execute();
    $conn = null;
} 
```

我不能只创建一个公共变量的原因是因为数据正在从表单发布到它并且使用公共或公共静态是无效的语法。我正在使用的变量是

```
$name = isset($_POST['name']) ? $_POST['name'] : '';
$email = isset($_POST['email']) ? $_POST['email'] : '';
$commentText = isset($_POST['comment']) ? $_POST['comment'] : '';
$id = isset($_POST['id']) ? $_POST['id'] : ''; 
```

我想要做的甚至是可能的，还是我最好找到另一种分配值的方法，以便我可以插入数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:43:05.107

我首先将数据库实例的创建删除到函数外部，因为从外观上看，您正在打开和关闭大量数据库连接。

```
class Foo
{
    private $conn;

    public function __construct(PDO $conn)
    {
        $this->conn = $conn;
    }

    public function insertComment($name, $email, $comment, $articlId) {
        $sql = 'INSERT INTO comments ( name, email, commentText, articleID ) VALUES ( :name, :email, :commentText, :articleID )';
        $st = $this->conn->prepare ( $sql );
        $st->bindValue( ":name", $name, PDO::PARAM_STR );
        $st->bindValue( ":email", $email, PDO::PARAM_STR );
        $st->bindValue( ":commentText", $commentText, PDO::PARAM_STR );
        $st->bindValue( ":articleID", $articleID, PDO::PARAM_INT );
        $st->execute();
    }
}

$conn = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
$foo = new Foo($conn);
$foo->insertComment($_POST['name'], $_POST['email'], $_POST['commentText'], $_POST['articleId']); 
```

或者也许更好的是有一些请求对象并使用它来注入方法。

不过不确定你所说的`global`变量是什么意思，因为请求变量（`$_GET`,`$_POST`等）是超全局变量，这意味着它们默认是全局的。并且可以从任何地方访问（尽管这并不是最佳实践）。

# windows-phone-7 - 获取表单属性`无法显式调用运算符或访问器`

> ID：14185934
> 
> 赞同：0
> 
> 时间：2013-01-06T19:38:02.093
> 
> 标签：windows-phone-7

我正在为 wp7 制作一个小应用程序，当我尝试从参考中获取时出现错误。

类似这样的代码：

```
 private void refreshExistingShellTile()
    {
        using (IEnumerator<ShellTile> enumerator = ShellTile.get_ActiveTiles().GetEnumerator())
        {
            while (enumerator.MoveNext())
            {
                ShellTile current = enumerator.get_Current();
                if (null != current.get_NavigationUri() && !current.get_NavigationUri().ToString().Equals("/"))
                {
                    Black_n_Gold.Entities.Tile tile = App.CurrentApp.tileService.findById(App.CurrentApp.tileService.getTileId(current.get_NavigationUri().ToString()));
                    if (tile != null && tile.id == this.customizedTile.id)
                    {
                        current.Delete();
                        this.createShellTile(this.customizedTile);
                    }
                }
            }
        }
    } 
```

我有这个错误：

```
'Microsoft.Phone.Shell.ShellTile.ActiveTiles.get': cannot explicitly call operator or accessor
'Microsoft.Phone.Shell.ShellTile.NavigationUri.get': cannot explicitly call operator or accessor
'System.Collections.Generic.IEnumerator<Microsoft.Phone.Shell.ShellTile>.Current.get': cannot explicitly call operator or accessor 
```

当我尝试从属性添加或设置时，我遇到了同样的错误，我在网上查看，但找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:41:32.837

您正在使用底层方法名称。而不是这个：

```
ShellTile current = enumerator.get_Current(); 
```

你要：

```
ShellTile current = enumerator.Current; 
```

等等。但是，我*还*建议使用`foreach`循环而不是显式调用`GetEnumerator`等：

```
private void refreshExistingShellTile()
{
    foreach (ShellTile current in ShellTile.ActiveTiles)
    {
        Uri uri = current.NavigationUri;
        if (uri != null && uri.ToString() != "/")
        {
            Black_n_Gold.Entities.Tile tile = App.CurrentApp.tileService
                .findById(App.CurrentApp.tileService.getTileId(uri.ToString());
            if (tile != null && tile.id == customizedTile.id)
            {
                current.Delete();
                createShellTile(customizedTile);
            }
        }
    }
} 
```

另请注意，.NET 命名约定建议`findById`etc 应为 PascalCased：

*   `FindById`
*   `GetTileId`
*   `CreateShellTile`

# android - ImageButton 内的图像资源基于实际按钮的大小？

> ID：14185937
> 
> 赞同：0
> 
> 时间：2013-01-06T19:38:07.770
> 
> 标签：android, button, imagebutton

我得到了一个基于此代码的 ImageButton：

```
ImageButton btn = new ImageButton(this);
    btn.setLayoutParams(new FrameLayout.LayoutParams(someValue,someValue));
    btn.setBackgroundResource(R.drawable.some_drawable);
    store.setImageResource(R.drawable.some_other_drawable);    
    store.getBackground().setAlpha(175);
   btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Something();

        }
    }); 
```

这样做的问题是 ImageResource 不会根据实际按钮的大小更改其大小。这使得“some_other_drawable”在我的情况下大于实际按钮，即使它的像素数完全相同，因为 someValue 小于图像资源的大小。

如何根据实际按钮的大小使图像资源发生变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:49:08.387

```
int width = 300;
int height = 100;
Bitmap.createScaledBitmap(BitmapFactory.decodeByteArray(animal.getBlob(), 0, animal.getBlob().length), width, height, true);
imageView.setImageBitmap(resizedBitmap); 
```

调整图像大小，然后设置它

# android - 应用内计费：将静态响应重置为未购买

> ID：14185939
> 
> 赞同：4
> 
> 时间：2013-01-06T19:38:20.437
> 
> 标签：android

我正在使用静态响应在我的应用中测试应用计费[https://developer.android.com/google/play/billing/billing_testing.html](https://developer.android.com/google/play/billing/billing_testing.html) 我第一次使用 android.test.purchased 来测试我的购买能够假买它，但现在它列为已购买，我无法再对其进行测试。

有没有办法重置购买的状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:34:28.473

如果您使用 API 版本 3，它会将所有产品作为托管产品处理。托管意味着它被购买一次。所以这意味着您需要先消费该产品并告诉谷歌购买的商品已被消费。然后它将再次可供购买。请访问[http://developer.android.com/google/play/billing/api.html#consume](http://developer.android.com/google/play/billing/api.html#consume)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T19:42:09.367

您是否尝试在模拟器或设备上重新安装应用程序？

我认为这将是正确的结果

快速卸载使用 adb 命令

```
cd ../android-sdk/platform-tools

adb uninstall your.package.name 
```

# html - 使用输出方法 html 在 XSLT 中避免 URL 编码

> ID：14185948
> 
> 赞同：1
> 
> 时间：2013-01-06T19:38:37.990
> 
> 标签：html, xslt-1.0, urlencode

我有一个输出 HTML 的转换。为了避免可能在旧浏览器中中断的自关闭标签（例如`<img />`，而不是`<img></img>`），输出方法必须是`html`. 然后虽然应用了 URL 编码，但它破坏了我的应用程序。参见例如：

**输入**

```
<html>
<head>
</head>
<body>
{{example}}
<a href="{{example}}" >abc</a>
<img src="http://placehold.it/20x20"></img>
</body>
</html> 
```

**转型**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" /><!-- either -->
<xsl:output method="html" indent="yes" /><!-- or -->
<xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
</xsl:template>
</xsl:transform> 
```

在第一种情况下，输出是：

```
<?xml version="1.0"?>
<html>
<head>
</head>
<body>
{{example}}
<a href="{{example}}">abc</a>
<img src="http://placehold.it/20x20"/>
</body>
</html> 
```

在第二种情况下，输出是：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
{{example}}
<a href="%7B%7Bexample%7D%7D">abc</a>
<img src="http://placehold.it/20x20">
</body>
</html> 
```

第一种情况的好处是该`@href`属性**不是 URL 编码的**。这对我的应用程序来说是必须的。第二种变体虽然不好但更好地实现了，但它`<img>`是自动关闭的。这不能用于`<img>`标签和其他一些。

有没有办法获得`method="html"`没有 URL 编码的好处？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T22:54:29.677

在 XSLT 2.0 中，您可以使用序列化选项 escape-uri-attributes="no" 抑制 URL 属性的 % 编码。XSLT 1.0 中没有等价物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T00:20:05.893

如果使用 PHP 的 XSLT 1.0 处理器，那么您可以尝试以下解决方案...

1.  使用方法="html";
2.  包括这个模板...

    ```
    <xsl:template match="@href">
      <xsl:attribute name="Muttaburrasaurus">
        <xsl:value-of select="." />
      </xsl:attribute>
    </xsl:template> 
    ```

3.  将结果输出加载到字符串中，并将所有出现的 替换`Muttaburrasaurus`为`href`。

如果您将来迁移到 Java，正如您在评论提要中指出的那样，您可能会这样做，那么请确保您的处理器是 XSLT 2.0+。然后您可以使用`escape-uri-attributes`M.Kay 提到的功能。

# r - 通过平均函数聚合时间序列数据，时间优先于 HH = (HH-1):41 - HH:40 , In R

> ID：14185952
> 
> 赞同：1
> 
> 时间：2013-01-06T19:39:01.187
> 
> 标签：r, time, aggregate, time-series

我有时间数据库，我想获得时间序列数据的每小时平均值。我用过这段代码：

```
aggregate(list(ambtemp = p28$ambtemp), 
                list(d = cut(p28$dt, "1 hour")), 
                mean) 
```

样本数据：

```
1     -1.64 2007-09-29 00:01:09
2     -1.76 2007-09-29 00:03:09
3     -1.83 2007-09-29 00:05:09
4     -1.86 2007-09-29 00:07:09
5     -1.94 2007-09-29 00:09:09
6     -1.87 2007-09-29 00:11:09
7     -1.87 2007-09-29 00:13:09
8     -1.80 2007-09-29 00:15:09
9     -1.64 2007-09-29 00:17:09
10    -1.60 2007-09-29 00:19:09
11    -1.90 2007-09-29 00:21:09
12    -2.08 2007-09-29 00:23:09
13    -1.94 2007-09-29 00:25:09
14    -2.12 2007-09-29 00:27:09
15    -1.87 2007-09-29 00:29:09
16    -2.18 2007-09-29 00:31:09
17    -1.98 2007-09-29 00:33:09
18    -1.73 2007-09-29 00:35:09
19    -1.84 2007-09-29 00:37:09
20    -2.04 2007-09-29 00:39:09
21    -1.86 2007-09-29 00:41:09
22    -1.94 2007-09-29 00:43:09
23    -1.77 2007-09-29 00:45:09
24    -1.78 2007-09-29 00:47:09
25    -1.50 2007-09-29 00:49:09
26    -1.46 2007-09-29 00:51:09
27    -1.72 2007-09-29 00:53:09
28    -1.67 2007-09-29 00:55:09
29    -1.56 2007-09-29 00:57:09
30    -1.69 2007-09-29 00:59:09
31    -1.97 2007-09-29 01:01:09
32    -1.79 2007-09-29 01:03:09
33    -1.79 2007-09-29 01:05:09
34    -1.84 2007-09-29 01:07:09
35    -1.91 2007-09-29 01:09:09
36    -1.87 2007-09-29 01:11:09
37    -1.98 2007-09-29 01:13:09
38    -1.83 2007-09-29 01:15:09
39    -1.88 2007-09-29 01:17:09
40    -1.88 2007-09-29 01:19:09
41    -1.78 2007-09-29 01:21:09
42    -1.78 2007-09-29 01:23:09
43    -1.66 2007-09-29 01:25:09
44    -1.70 2007-09-29 01:27:09
45    -1.46 2007-09-29 01:29:09
46    -1.36 2007-09-29 01:31:09
47    -1.40 2007-09-29 01:33:09
48    -1.34 2007-09-29 01:35:09
49    -1.34 2007-09-29 01:37:09
50    -1.30 2007-09-29 01:39:09
51    -1.36 2007-09-29 01:41:09
52    -1.40 2007-09-29 01:43:09
53    -1.43 2007-09-29 01:45:09
54    -1.38 2007-09-29 01:47:09
55    -1.40 2007-09-29 01:49:09
56    -1.42 2007-09-29 01:51:09
57    -1.47 2007-09-29 01:53:09
58    -1.66 2007-09-29 01:55:09
59    -1.84 2007-09-29 01:57:09
60    -1.92 2007-09-29 01:59:09
61    -1.88 2007-09-29 02:01:09
62    -2.11 2007-09-29 02:03:09
63    -1.91 2007-09-29 02:05:09
64    -2.04 2007-09-29 02:07:09
65    -1.94 2007-09-29 02:09:09
66    -1.92 2007-09-29 02:11:09
67    -1.80 2007-09-29 02:13:09
68    -1.74 2007-09-29 02:15:09
69    -1.74 2007-09-29 02:17:09
70    -1.76 2007-09-29 02:19:09
71    -1.74 2007-09-29 02:21:09
72    -1.80 2007-09-29 02:23:09
73    -1.80 2007-09-29 02:25:09
74    -1.80 2007-09-29 02:27:09
75    -1.82 2007-09-29 02:29:09
76    -1.90 2007-09-29 02:31:09
77    -1.93 2007-09-29 02:33:09
78    -2.06 2007-09-29 02:35:09
79    -2.08 2007-09-29 02:37:09
80    -1.95 2007-09-29 02:39:09
81    -1.98 2007-09-29 02:41:09
82    -2.32 2007-09-29 02:43:09
83    -1.86 2007-09-29 02:45:09
84    -1.97 2007-09-29 02:47:09
85    -1.64 2007-09-29 02:49:09
86    -2.00 2007-09-29 02:51:09
87    -1.48 2007-09-29 02:53:09
88    -1.74 2007-09-29 02:55:09
89    -1.85 2007-09-29 02:57:09
90    -1.82 2007-09-29 02:59:09
91    -1.82 2007-09-29 03:01:09
92    -1.92 2007-09-29 03:03:09
93    -1.80 2007-09-29 03:05:09
94    -1.54 2007-09-29 03:07:09
95    -1.36 2007-09-29 03:09:09
96    -1.50 2007-09-29 03:11:09
97    -1.59 2007-09-29 03:13:09
98    -1.60 2007-09-29 03:15:09
99    -1.58 2007-09-29 03:17:09
100   -1.81 2007-09-29 03:19:09
101   -2.16 2007-09-29 03:21:09
102   -1.97 2007-09-29 03:23:09
103   -1.94 2007-09-29 03:25:09
104   -2.29 2007-09-29 03:27:09
105   -2.46 2007-09-29 03:29:09
106   -2.42 2007-09-29 03:31:09
107   -2.34 2007-09-29 03:33:09
108   -2.38 2007-09-29 03:35:09
109   -2.44 2007-09-29 03:37:09
110   -2.28 2007-09-29 03:39:09
111   -2.24 2007-09-29 03:41:09
112   -2.26 2007-09-29 03:43:09 
```

但代码基于**HH = (HH-1):01 - HH:59**时间单位聚合数据。

我想根据以下数据汇总数据： **HH = (HH-1):41 - HH:40** *示例：13 = 观察期 12:41 到 13:40*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T21:59:37.903

很难从上面列出的文本中重建您的示例数据。使用`dput(head(p28, 112))`to give something to work 会有所帮助。但我会做出一个有根据的猜测：

```
aggregate(list(ambtemp = p28$ambtemp), 
                list(d = cut(p28$dt - as.difftime('00:41:00'), "1 hour")),
                mean) 
```

# iphone - xcode 4.5 中的 iPhone 5 显示 320x640 而不是 640x1136 为什么会出现问题？

> ID：14185953
> 
> 赞同：3
> 
> 时间：2013-01-06T19:39:06.337
> 
> 标签：iphone, ios, xcode, screen

由于某种原因，当我在 xcode 中使用 iPhone 5 屏幕时，一切都是 340x640 模式而不是 640x1136。

例如，我有一个为 iPhone 5 准备的设计，假设我将背景设置为 640x1136，它在界面生成器和模拟器中的屏幕上要大得多。如果我将背景设置为 340x640，那么一切都是格子。

问题在于按钮和导航栏。当我设置导航栏背景图像时，它占据了屏幕的 1/4。因为该设计适用于 1136x640。

但是有人知道如何解决吗？还是处理？

这是主视图的图像（生成的界面生成器）

![视图框矩形](../Images/e220af7428ed4b04cea267be090a43dc.png)

编辑：现在我注意到它甚至不是 640h 奇怪：|

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-06T20:05:13.777

Retina 设备的参考点系统永远不会改变。

因此，无论屏幕分辨率如何，iPhone 3 与 iPhone 4 的点网格都是 320 x 480。

同样 iPad 1 与 iPad 3 的点网格是 1024 x 768。

所以对于 iPhone 5，点网格是 320 x 568。

您针对屏幕尺寸进行编程，但提供 2 倍分辨率的图像，然后在视网膜屏幕上正确渲染，因为它们具有额外的信息。

当您创建图形时，您会提供两个图像，其中一个是 2x 分辨率。`foo`因此，对于50 点 x 50 点的图形，您提供`foo.png`50 像素 x 50 像素和`foo@2x.png`100 像素 x 100 像素的视网膜显示器。

例如，当您要求`imageNamed:@"foo"`系统自动寻找`foo@2x`视网膜屏幕时，如果可以找到，则使用该图像。否则`foo.png`，您会在视网膜设备中获得毛茸茸的图像。

# asp.net - 当向 table1 插入一行时，SQL 会在 table2 上自动生成一行

> ID：14185959
> 
> 赞同：1
> 
> 时间：2013-01-06T19:40:07.797
> 
> 标签：asp.net, sql, sql-server, table-relationships

我有下一个表结构：

```
Users:

columns: user_id, ...

Users_Skins:

columns: user_id, ... 
```

我希望如果用户注册（`Users`正在填充），它将自动在 Users_Skins 上添加一行，`user_id`其中`Auto Increment`, 到`Users_Skins`.

我应该搜索 max `user_id`，然后插入一个新行，还是有更好的方法（可能）？

**编辑：**我正在使用 SQL Server

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:48:46.570

如果您不需要向 User_Skins 插入任何其他数据，则触发器可能很有用，类似于以下内容：

```
create trigger UsersInsert
on Users after insert as
begin
   insert into Users_Skins(user_id, ...)
   select i.user_id from inserted I         
end 
```

而不是试图找到最大的 user_id 并增加它，我宁愿使用 IDENTITY。

# php - 在正则表达式末尾使组成为可选会导致它永远不会匹配

> ID：14185963
> 
> 赞同：0
> 
> 时间：2013-01-06T19:40:15.057
> 
> 标签：php, regex

我在 PHP 中有一个正则表达式来匹配一些这样的文本：

> 第 24 次会议 - 敏捷的棕狐 [2012 年 1 月 10 日至 2012 年 9 月 26 日]

我想出的模式如下所示：

```
$pattern = "/(([0-9]{1,2})(st|nd|rd|th)\sMeeting\s-\s)?(.*)(\[([0-9]{1,2}\s(January|February|March|April|May|June|July|August|September|November|December)\s[0-9]{4})\sto\s([0-9]{1,2}\s(January|February|March|April|May|June|July|August|September|November|December)\s[0-9]{4})\])$/" 
```

这似乎工作正常。

但是，我希望最后的日期部分是可选的。但是，当我添加 ? 在日期分组之后， preg_match 不再提取字符串中的日期。我怀疑 .* 正在接管，但我似乎无法理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:10:00.127

```
(.*) --> (.*?) 
```

在此处阅读有关惰性量词的更多信息：

[http://www.regular-expressions.info/repeat.html](http://www.regular-expressions.info/repeat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:10:26.097

正如您所推测的那样，`.*`（贪婪的量词）消耗了太多信息。这可以通过使其变得*懒惰*或用其他东西替换它来解决，例如`[^[]*`. 但是，用后一个建议替换它将不允许`[`在字符串中使用任何文字。

除了解决此问题之外，您还应该做的是学习对不需要保存的部分使用非捕获组。这将加快您的正则表达式并节省一些内存。

这是我对您的问题的解决方案。变化不大，但我相信你能发现差异。

```
/(([0-9]{1,2})(st|nd|rd|th)\sMeeting\s-\s)?(.*)(\[([0-9]{1,2}\s(January|February|March|April|May|June|July|August|September|November|December)\s[0-9]{4})\sto\s([0-9]{1,2}\s(January|February|March|April|May|June|July|August|September|November|December)\s[0-9]{4})\])?$/ 
```

您可以在此处查看演示和正则表达式说明：[http ://regex101.com/r/vZ1nH6](http://regex101.com/r/vZ1nH6)

该网站使用 PHP，因此可以准确解决您的问题。如果您有兴趣了解更多信息，我建议您在 www.regular-expressions.info 上阅读正则表达式，并在[http://www.regex101.com/quiz/上查看测验](http://www.regex101.com/quiz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T20:24:29.757

这个小改动就可以了（粗体）

`/(([0-9]{1,2})(st|nd|rd|th)\sMeeting\s-\s)?` **`(.*?)`** `(\[([0-9]{1,2}\s(January|February|March|April|May|June|July|August|September|November|December)\s[0-9]{4})\sto\s([0-9]{1,2}\s(January|February|March|April|May|June|July|August|September|November|December)\s[0-9]{4})\]`**`|$`**`)$/`

首先，自由文本表达式由 a 扩展`?`以使其不贪婪（参见其他帖子）

than`|$`被附加到日期部分以告诉它恰好是日期或字符串的结尾。

这是你的总正则表达式

`/(([0-9]{1,2})(st|nd|rd|th)\sMeeting\s-\s)?(.*?)(\[([0-9]{1,2}\s(January|February|March|April|May|June|July|August|September|November|December)\s[0-9]{4})\sto\s([0-9]{1,2}\s(January|February|March|April|May|June|July|August|September|November|December)\s[0-9]{4})\]|$)$/`

# javascript - 输入问题的文本区域

> ID：14185964
> 
> 赞同：4
> 
> 时间：2013-01-06T19:40:21.213
> 
> 标签：javascript, jquery, events, textarea

我有一个文本区域，我想从键盘或鼠标/编辑菜单中捕获必要的事件。现在，当用户通过 CTRL-V 在文本区域中复制粘贴文本时，processUserInput 会被调用两次，无论是在**keydown**还是在**粘贴**时，由于各种原因，这是不可取的。

我以这种方式“解决”了它：

```
var IsProcessingEvent = false;

$("#textarea").on('click keydown cut paste', processUserInput);

function processUserInput(e) {
    if(!IsProcessingEvent) {
        IsProcessingEvent = true;
        // do the actual processing of user input
        IsProcessingEvent = false;
    }
} 
```

我想知道这个问题是否有更优雅的解决方案。

ps 需要 onpaste 事件，因为用户可以通过鼠标右键单击或通过浏览器编辑菜单复制粘贴文本。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-06T20:19:26.277

你做对了伙计。如果你改变`keydown`for会更好`keypress`，但如果你愿意，你可以让你的代码变得时尚：

```
var isProcessingEvent = false;

$("#textarea").on('click keypress cut paste', processUserInput);

function processUserInput(e) {
    // Is processing event, so stop here.
    if(isProcessingEvent) {
        return;
    }
    isProcessingEvent = true;

    // do the actual processing of user input

    isProcessingEvent = false;
} 
```

但是，如果我愿意，我将使用 a`promisses`来处理您的用户输入处理，这样您就不能在等待进程时冻结所有 UI 线程。

将是这样的：

```
$("#textarea").on('click keypress cut paste', processUserInput);

function processUserInput(e) {
    // Is processing event, so stop here.
    if(processUserInput.working) {
        // The user trigger the event while it was processing
        processUserInput.doAgain = {
            // save context
            ctx: this, 
            // save event
            e: e 
        };
        return;
    }
    processUserInput.working = true;

    function finished() {
        processUserInput.working = false;

        // The process finished but has new changes in the textfield so...
        var lastEvent = processUserInput.doAgain;
        if (lastEvent) {
            processUserInput.doAgain = null;

            // Process this guy again
            setTimeout(processUserInput.bind(lastEvent.ctx), 0, lastEvent.e);
        }
    }

    function theProcess(e, cb) {

        // do my async stuff here

        // Unfreeze the click/keydown/cut/past events in the textarea
        if (typeof cb === 'function') {
            cb();
        }
    }

    setTimeout(theProcess.bind(this), 0, e, finished);
} 
```

这是异步的示例，但您可以使用异步 ajax 或 web-worker 来处理您的事件，这样您就不会冻结 UI 线程。

PS.：超时不会阻止 UI 线程冻结，它只会将您的进程置于执行队列的末尾。

啊，另一个提示！

如果您正在处理 textarea 中的文本，那么您最好使用它`keypress`，`keydown`因为如果您在 keydown 中获取 textarea 值，它将不会有任何更改，但是按键将通过您按下的键来更改值。

[http://www.quirksmode.org/dom/events/keys.html](http://www.quirksmode.org/dom/events/keys.html)

当然，如果您仍想使用 keydown，您可以使用`setTimeout`我在示例中所做的延迟处理。

# python - 将安全过滤器应用于连接的 html 字符串

> ID：14185967
> 
> 赞同：3
> 
> 时间：2013-01-06T19:40:40.467
> 
> 标签：python, flask, jinja2, wtforms

我一直在尝试这样做：

```
{% set error_message = '<span class="help-inline">' + field.errors[0]|e + '</span>' %}
{# ... code ... #}
{{ error_message|safe }} 
```

尝试在 html 中获取此输出：

```
<span class="help-inline">Some message</span>' 
```

但是，html 被转义了，我将上面的内容打印为字符串。

`safe`所以问题是如何在 Jinja2中标记连接的字符串？

* * *

当前输出（萤火虫）：

![跨度为 html 编码的字符串](../Images/e74961a74a3e3432ca35a4b2ff22f1da.png)

预期输出：

![正确的html输出](../Images/4f747411427b564372165b82899f029a.png)

* * *

**更新：**试过这个但没有用：

```
{% autoescape false %}
    {{ error_message|safe }}
    {# also tried without safe #}
{% endautoescape %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:58:08.333

*然而，将连接的每个部分字符串*标记为`safe`提供所需的输出：

```
{% set error_message = '<span class="help-inline">'|safe + field.errors[0]|e + '</span>'|safe %} 
```

或者稍微好一点：

```
{% set error_message = ('<span class="help-inline">' ~ field.errors[0]|e ~ '</span>')|safe %} 
```

`safe`（用于连接的整个字符串的组合过滤器，`~`而不是。`+`不适用于此）

# c++ - glsl片段着色器黑屏

> ID：14185969
> 
> 赞同：1
> 
> 时间：2013-01-06T19:40:57.950
> 
> 标签：c++, opengl, glsl, fragment-shader

我尝试创建具有两种颜色的墙：顶部 0.8、0.8、1 和底部 0.4、0.4、0.8，其余部分我想插入这两种颜色。

我有这些片段着色器和顶点着色器：

顶点着色器

```
#version 330

uniform mat4 modelMatrix,viewMatrix, projMatrix;

layout (location = 0) in vec4 position;
layout (location = 1) in vec3 color; 
out vec3 Color;

void main()
{
    Color = color;
    gl_Position = projMatrix * viewMatrix * modelMatrix * position ;
} 
```

片段着色器

```
#version 330

in vec3 Color;

void main()
{

    gl_FragColor = vec4(Color,1.0);

} 
```

我在 c++ 中的代码的某些部分：

```
unsigned int ProgramShader,VertexShader,FragmentShader;
Mode current_mode = GPU;
float verticesBackground[] = { -200.0f, -100.0f, -100.0f,
                         200.0f, -100.0f, -100.0f,
                        200.0f, 100.0f, -100.0f,
                        -200.0f, 100.0f, -100.0f  
                    };
int indexesBackground[] =   {   0 , 1 , 2 , 
                    2 , 3 , 0 
                };
float colorsBackground[] = {  0.8f, 0.8f, 1.0f, 
                    0.8f, 0.8f, 1.0f,
                    0.4f, 0.4f, 0.8f,
                    0.4f, 0.4f, 0.8f
                    };

// vao-uri
unsigned int BackgroundVao;
// vbo-uri
unsigned int BackgroundVboPositions, BackgroundVboColors;
// ibo-uri
unsigned int BackgroundIbo;

unsigned int ProjectionMatrixLocation, ViewMatrixLocation, ModelMatrixLocation;

mat4 ModelMatrix;
mat4 ProjectionMatrix;
mat4 ViewMatrix;

void RenderBackground()
{   //glLoadIdentity();
glUseProgram(ProgramShader);
//backgroundShader.Use();
/*glUniformMatrix4fv(ProjectionMatrixLocation,  1, false, ProjectionMatrix.m);
glUniformMatrix4fv(ViewMatrixLocation,  1, false, ViewMatrix.m);
mat4 identity;
identity.setIdentity();
glUniformMatrix4fv(ModelMatrixLocation, 1, false, identity.m);

glUniformMatrix4fv(ModelMatrixLocation, 1, false, ModelMatrix.m);
glBindVertexArray(BackgroundVao);                                       //revine la starea de desenare a cubului
glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, (void*)0); //deseneaza backgroundul, 4 indecsi
*/
glBegin(GL_POLYGON);
glColor3f(0.8f,0.8f,1.0f);
glVertex3f(-200.0f,-100.0f,-100.0f);
glVertex3f(200.0f,-100.0f,-100.0f);
glColor3f(0.4f,0.4f,0.8f);  
glVertex3f(200.0f,100.0f,-100.0f);
glVertex3f(-200.0f,100.0f,-100.0f);
glEnd();
glUseProgram(0);    
} 
```

glBegin 仅用于测试并且它有效，但是当我尝试使用 glDrawElements 时，我得到黑屏。

```
void display(void) {
switch(current_mode) {
    case CPU:
        RenderCPU();
    break;

    case GPU:
        RenderBackground();
    break;

    case CUDA:
        RenderCUDA();
    break;
}   
glutSwapBuffers();
glutPostRedisplay();
} 
```

我的主要是：

```
int main ( int argc, char** argv ) 
{
glutInitContextFlags(GLUT_FORWARD_COMPATIBLE | GLUT_DEBUG);
glutInit( &argc, argv );
glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA | GLUT_MULTISAMPLE);
glutInitWindowSize(1280, 720 ); 
glutCreateWindow( "Etapa 2 - Cloth" );

glutDisplayFunc(display);  
glutReshapeFunc(reshape);
glutKeyboardFunc(keyboard);

glewExperimental =true;
glewInit();
glGetError();

glEnable(GL_MULTISAMPLE);
glEnable(GL_DEPTH_TEST);

InitShaders(std::string("shaders\\background.vs"),std::string("shaders\\background.fs"));
glBuffersInit();
ModelMatrix.setIdentity();
glutMainLoop();
} 
```

我的着色器加载器：

```
void InitShaders(std::string VertexShaderFilename, std::string FragmentShaderFilename){
int InfoLogLength=0,Result=0;

//constructie vertex shader
std::cout<<std::endl<<"Constructie vertex shader din "<<VertexShaderFilename<<std::endl;
VertexShader = glCreateShader(GL_VERTEX_SHADER);                            //creez un obiect de tip vertex shader 
std::string VertexShaderCode = LoadText(VertexShaderFilename);              //citesc fiserul si il tin in string
const char *VertexShaderCodePtr = VertexShaderCode.c_str();
const int VertexShaderCodeSize = VertexShaderCode.size();
glShaderSource(VertexShader,1,&VertexShaderCodePtr,&VertexShaderCodeSize);  //atasez codul sursa din string in obiectul de tip vertex shader
glCompileShader(VertexShader);                                              //compilez obiectul
glGetShaderiv(VertexShader, GL_COMPILE_STATUS, &Result);                    //obtin rezultatul compilarii
if(Result == GL_FALSE){
    glGetShaderiv(VertexShader, GL_INFO_LOG_LENGTH, &InfoLogLength);        //obtin lungimea logului
    std::vector<char> VertexShaderLog(InfoLogLength);
    glGetShaderInfoLog(VertexShader, InfoLogLength, NULL, &VertexShaderLog[0]); //copiez logul
    std::cout<<"EROARE :\n "<<&VertexShaderLog[0]<<std::endl;                   //output log
}else std::cout<<"Constructie vertex shader terminata cu sucess"<<std::endl<<std::endl;

CHECK_GL_ERRORS

//constructie fragment shader
std::cout<<"Constructie fragment shader din "<<FragmentShaderFilename<<std::endl;
FragmentShader = glCreateShader(GL_FRAGMENT_SHADER);                        //creez un obiect de tip fragment shader 
std::string FragmentShaderCode = LoadText(FragmentShaderFilename);          //citesc fiserul si il tin in string
const char *FragmentShaderCodePtr = FragmentShaderCode.c_str();
const int FragmentShaderCodeSize = FragmentShaderCode.size();
glShaderSource(FragmentShader,1,&FragmentShaderCodePtr,&FragmentShaderCodeSize);//atasez codul sursa din string in obiectul de tip fragment shader
glCompileShader(FragmentShader);                                            //compilez obiectul
glGetShaderiv(FragmentShader, GL_COMPILE_STATUS, &Result);                  //obtin rezultatul compilarii
if(Result == GL_FALSE){
    glGetShaderiv(FragmentShader, GL_INFO_LOG_LENGTH, &InfoLogLength);      //obtin lungimea logului
    std::vector<char> FragmentShaderLog(InfoLogLength);
    glGetShaderInfoLog(FragmentShader, InfoLogLength, NULL, &FragmentShaderLog[0]); //copiez logul
    std::cout<<"EROARE :\n "<<&FragmentShaderLog[0]<<std::endl;             //output log
}else std::cout<<"Constructie fragment shader terminata cu success "<<std::endl<<std::endl;

CHECK_GL_ERRORS

//constructie program combinat
std::cout<<"Constructie program combinat "<<std::endl;
ProgramShader = glCreateProgram();                                          //creez un obiect gol de tip program
glAttachShader(ProgramShader,VertexShader);                                 //atasez obiectul de tip vertex shader
glAttachShader(ProgramShader,FragmentShader);                               //atasez obiectul de tip fragment shader
glLinkProgram(ProgramShader);                                               //link-ez programul
glGetProgramiv(ProgramShader, GL_LINK_STATUS, &Result);                     //obtin rezultatul linkarii
if(Result == GL_FALSE){                                                     
    glGetProgramiv(ProgramShader, GL_INFO_LOG_LENGTH, &InfoLogLength);      
    std::vector<char> ProgramShaderLog(InfoLogLength);
    glGetProgramInfoLog(ProgramShader, InfoLogLength, NULL, &ProgramShaderLog[0]);
    std::cout<<"EROARE :\n "<<&ProgramShaderLog[0]<<std::endl;
}else std::cout<<"Constructie program terminata cu success "<<std::endl;
glDeleteShader(VertexShader);                                               //nu mai sunt necesare daca vom lucra doar cu programul
glDeleteShader(FragmentShader);

CHECK_GL_ERRORS

//obtine locatiile uniform-urilor din programul compilat & linkat
ProjectionMatrixLocation = glGetUniformLocation(ProgramShader, "projMatrix");
ViewMatrixLocation = glGetUniformLocation(ProgramShader, "viewMatrix");
ModelMatrixLocation = glGetUniformLocation(ProgramShader, "modelMatrix");

CHECK_GL_ERRORS
} 
```

# java - 为什么小程序大小是在 html 代码而不是 java 代码上定义的？

> ID：14185970
> 
> 赞同：1
> 
> 时间：2013-01-06T19:41:01.823
> 
> 标签：java, size, theory, japplet

是不是因为它嵌入在网站上，并且在java代码之前被读取？小程序大小如何调整到其组件大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:44:09.007

> 是不是因为它嵌入在网站上

是的

> 它是在java代码之前读取的吗？

不

> 小程序大小如何调整到其组件大小？

小程序调整其组件的大小和布局。网页负责小程序的大小。小程序可以向托管应用程序公开数据，这些数据可以通过 javascript 读取。

# jquery - 如何防止在锚点点击时跳转？

> ID：14185974
> 
> 赞同：13
> 
> 时间：2013-01-06T19:41:19.553
> 
> 标签：jquery, anchor

我`e.preventDefault();`用来禁用默认锚行为。

有没有办法防止在点击时只跳转到目标？

我试过了：

```
 var hash = window.location.hash;
  var link = $('a');
  $('a').click(function() {
    e.preventDefault();
    hash = "#"+link.attr("href");
  }); 
```

但它不起作用：http: [//jsfiddle.net/ynts/LgcmB/](http://jsfiddle.net/ynts/LgcmB/)。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-06T19:42:22.770

```
$(document).ready(function() {
  var hash = window.location.hash;
  var link = $('a');
  $('a').click(function(e) {
    e.preventDefault();
    hash = link.attr("href");
    window.location = hash;
  });
}); 
```

您还必须在函数中指定事件参数。通过将其命名为`e`or`event`然后您可以对其进行操作。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-31T09:18:10.547

这是我能想出的唯一解决方案，它可以在具有各种客户端 UI 库和框架的所有桌面和移动浏览器中始终如一地工作。通过在滚动发生之前获取窗口坐标，我们可以恢复并保持当前滚动位置。

```
$('a').click(function (e) {
    var x = window.pageXOffset,
        y = window.pageYOffset;
    $(window).one('scroll', function () {
        window.scrollTo(x, y);
    })
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-07T08:41:26.953

为了**只**防止“跳转”，您必须为目标元素使用与锚中指定的不同的 id。

例如，对于新标签使用的链接，

```
<a href="#new" /> 
```

并且对于目标元素掩码 id

```
<div id="new-tab"></div> 
```

然后在您的脚本中将掩码附加到真正的哈希中，并使用它来获取元素。

```
$(window).on("hashchange", function(){
    var hash = this.location.hash;
    var mytab = $(hash + "-tab");
}); 
```

这保留了浏览器历史记录中的哈希位置更改，可以通过后退/前进按钮控制，并且`hashchange`如果用户进入指定哈希的页面，则在页面加载时检测到该事件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-30T15:04:21.613

您应该将 onclick 事件绑定到锚点并指定`return false;`为结果。该`return false;`语句导致默认单击行为（跳转）不起作用。您可以在此处找到更多信息：[加载页面时如何禁用锚点“跳转”？](https://stackoverflow.com/questions/3659072/jquery-disable-anchor-jump-when-loading-a-page/17950528#17950528)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-06T19:43:54.810

您需要在函数上传递事件。

```
 var hash = window.location.hash;
         var link = $('a');
         //pass event here
         $('a').click(function(e) {
           e.preventDefault();
           hash = "#"+link.attr("href");
         }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-03T03:53:09.153

在第一次尝试此页面上的其他答案之后，这就是我所需要的：

```
 $('a').click(function (e) {
    e.preventDefault();
  });
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-04T09:19:14.440

您可以使用`match`with`^`来检测从`#`

```
$("a:link").on("click", function(e){
    if($(this).attr("href").match("^#")) {
        e.preventDefault();
        //some other stuff you want to do with the hash, like smooth scroll to anchor
        $('html, body').animate({ scrollTop: $($(this).attr("href")).offset().top }, 'fast');
    }
}); 
```

# php - 计算一个月的工作日数

> ID：14185975
> 
> 赞同：9
> 
> 时间：2013-01-06T19:41:23.493
> 
> 标签：php, date, datetime

> **可能重复：**
> [获取给定月份的工作日数](https://stackoverflow.com/questions/8396507/get-number-of-weekdays-in-a-given-month)

如何计算任何一个月的工作日？`cal_days_in_month`仅返回一个月中的总天数。我的任务是计算每个月的天数，除了周六和周日或仅周日。有什么方法可以找到这个吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-06T19:51:24.020

```
function countDays($year, $month, $ignore) {
    $count = 0;
    $counter = mktime(0, 0, 0, $month, 1, $year);
    while (date("n", $counter) == $month) {
        if (in_array(date("w", $counter), $ignore) == false) {
            $count++;
        }
        $counter = strtotime("+1 day", $counter);
    }
    return $count;
}
echo countDays(2013, 1, array(0, 6)); // 23 
```

本例中使用了该[`date`](http://php.net/manual/en/function.date.php)函数。关于忽略参数的注意事项：0 是星期日，...，6 是星期六。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-06T19:50:43.250

复制第二个答案：[获取给定月份的工作日数](https://stackoverflow.com/questions/8396507/get-number-of-weekdays-in-a-given-month)

> 你不需要计算每个月的每一天。您已经知道前 28 天无论如何都包含 20 个工作日。您所要做的就是确定最后几天。将起始值更改为 29。然后将 20 个工作日添加到您的返回值。

```
function get_weekdays($m,$y) {
$lastday = date("t",mktime(0,0,0,$m,1,$y));
$weekdays=0;
for($d=29;$d<=$lastday;$d++) {
    $wd = date("w",mktime(0,0,0,$m,$d,$y));
    if($wd > 0 && $wd < 6) $weekdays++;
    }
return $weekdays+20;
} 
```

这应该可以解决您的问题，并且确实是一个有效的解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T19:50:41.747

一个简单（不那么优雅）的答案就是创建该月第一天的时间戳，使用 date() 获取月份的物理名称，然后切换或确定它是否是工作日.

```
$myTime = strtotime("1/1/2013");  // Use whatever date format you want
$daysInMonth = cal_days_in_month(CAL_GREGORIAN, 1, 2013); // 31
$workDays = 0;

while($daysInMonth > 0)
{
    $day = date("D", $myTime); // Sun - Sat
    if($day != "Sun" && $day != "Sat")
        $workDays++;

    $daysInMonth--;
    $myTime += 86400; // 86,400 seconds = 24 hrs.
}

echo "There are $workDays work days this month!"; 
```

**输出**

```
There are 23 work days this month! 
```

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T19:54:07.107

做一个谷歌搜索，伙计。

对于后代，您的算法：

*   使用 date() 获取当月的天数。
*   从第 (1) 天开始，使用 mktime/gmmktime 创建一个纪元时间戳，然后使用 date() 确定它代表一周中的哪一天。
*   重复，直到找到第一个工作日（星期一）。让它成为“我”。
*   设当前计数为“t”，其初始值为 (0)。
*   令 j = i。如果 j 小于 (i + 5) - 并且 - 小于该月的最大天数，则增加 t。增加 (2)（跳过周末）并从该行的开头重复，直到“i”超过该月的最大天数。
*   应用成功和幸福，从头开始重复，直到总工作日数为（0）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-06T20:25:27.870

```
function countDays($y, $m, $ignore = false) 
{
    $result = 0;
    $loop = strtotime("$y-$m-01");
    do if(!$ignore or !in_array(strftime("%u",$loop),$ignore))
        $result++;
    while(strftime("%m",$loop = strtotime("+1 day",$loop))==$m);
    return $result;
}
echo countDays(2013,1,array(6,7));//23
echo countDays(2013,2);//28 
```

# ruby - 如果条件等于真 Ruby，则隐藏 form_for

> ID：14185979
> 
> 赞同：0
> 
> 时间：2013-01-06T19:41:53.637
> 
> 标签：ruby, ruby-on-rails-3, if-statement

我想知道如果条件为真，ruby 中是否有一种方法可以用来隐藏 form_for，例如

```
<% if current_user %> 
```

然后我想隐藏我的表格

我知道我可以使用 css 或 jquery 显示：无，但如果我可以在 if 语句中做到这一点，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T19:54:10.897

你可以输入你的视图文件：

`<% unless current_user %>`

```
 <%= form_for .... do %>
   .
   .
   .
  <% end %> 
```

`<% end %>`

这样，表单只会在`current_user`为 false 或 nil时呈现

# c# - 变态。是否存在任何方式在 C# 中使用 lambdas 本地使用引用？

> ID：14185982
> 
> 赞同：0
> 
> 时间：2013-01-06T19:42:21.400
> 
> 标签：c#, reference, lambda, expression, ref

我有一些变量是通过`ref`函数中的关键字给出的。我想在不完全使用局部变量的情况下在 lambda 表达式中使用 ref 变量。

我知道 C# 不能在工作中合并 lambda 和 ref 变量。但是不存在使 ref 变量在 lambda 表达式中工作的任何变态吗？

**伪代码（想成为 C#）**：

```
T MyFunction<T>(ref T x, ref T y)
{ 
    return (Func<T>) ( () => ( (100 * (x - y)) / x ) (); 
} 
```

我要它：

*1）。通用。*

*2）。通过引用接受泛型类型作为参数。*

*3）。使用两个选项 upper 使它与 lambdas 一起工作。*

*4）。使用泛型返回结果。*

*5）。做一个**有机编程**代码:) 笑话。*

并打电话给smth。像那样：

```
int x = 21, y = 9;
int result = MyFunction<int>(ref x, ref y); 
```

以及其他类型等...

```
double x = 21.5, y = 9.3;
double result = MyFunction<double>(ref x, ref y); 
```

遗憾的是，C# 不能给我这样的结构和愿望，所以我要看看 Lisp/Haskell（也许是 F#）。

（PS）=>（“所以我想和 C# 的可能性完全一样，就像你看到的那样。”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:31:55.640

我发布了一个简单的不安全方法，但您可以告别泛型。使用代码是**不好**的做法，但我想它在某种程度上回答了这个问题。

```
static unsafe int MyFunction(ref int value)
{
    fixed (int* temp = &value)
    {
        var pointer = temp;
        return new Func<int>(() => *pointer += 10)();
    }
} 
```

通过以下方式使用它：

```
var value = 42;
var returnedValue = MyFunction(ref value);
var success = value == returnedValue;
//success will be true 
```

我再说一遍，我不建议你在任何情况下使用它，如果你需要为这些东西设计的语言，有很多。

# iphone - 什么是正确的 iOS 通知负载格式

> ID：14185984
> 
> 赞同：0
> 
> 时间：2013-01-06T19:42:22.270
> 
> 标签：iphone, ios, apple-push-notifications

我有一个 iOS 客户端，它与一个 Java 服务器通信，该服务器也处理一个 android 客户端。由于 android 客户端是预先构建的，因此接收到的通知是通用的 xml 格式：

```
<?xml version="1.0" encoding="UTF-8"?>
   <serverAppresponse type="com.server.data.AppResponse" packetId="">
   <atom key="key1">true</atom>
   <atom key="userFirstName">ABC</atom>   
   <atom key="userLastName">PQR</atom>
</serverAppresponse> 
```

这样的格式可以接受吗？

还是[此链接](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW15)中的格式是强制性的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:48:50.933

如果要向 iOS 客户端发送推送通知，则需要使用 Apple Push Notification Service 所需的有效负载格式（您提供的链接中的那种，JSON 格式）。*如果您想从 iOS 客户端***向 Android 客户端**发送推送通知，您需要使用 Android 服务（例如 C2DM）所需的任何格式。基本上，您使用的服务格式将向推送通知的*接收者发送数据。*

# c++ - 按值传递与 const & 和 && 重载

> ID：14185985
> 
> 赞同：40
> 
> 时间：2013-01-06T19:42:32.130
> 
> 标签：c++, c++11, rvalue-reference, move-semantics

因此，在查找移动语义之后，我发现当您打算转移所有权时，普遍的共识是按价值传递。但在[Scott Meyer 关于通用引用的演讲中，](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)我注意到`std::vector::push_back`有 2 个重载：

```
void push_back( const T& value );
void push_back( T&& value ); 
```

于是我就想，这还`void push_back( T value );`不够吗？我问了几个人，最终导致了以下测试用例：

```
#include <memory>
#include <iostream>
#include <type_traits>

struct A
{
    A() { std::cout << "A Default constructor\n"; }
    A(const A &) { std::cout << "A Copy\n"; }
    A(A &&) { std::cout << "A Move\n"; }
};

std::aligned_storage<sizeof(A)> contents;
A& alias = *reinterpret_cast<A*>(&contents);

void ByVal(A a)
{
    new (&contents) A(std::move(a));
    alias.~A();
}

void ByLCRef(A const& a)
{
    new (&contents) A(a);
    alias.~A();
}

void ByRRef(A&& a)
{
    new (&contents) A(std::move(a));
    alias.~A();
}

int main()
{
    A a;
    std::cout << "\n";
    std::cout << "ByVal(a);\n";
    ByVal(a);
    std::cout << "ByVal(std::move(a));\n";
    ByVal(std::move(a));
    std::cout << "ByVal(A());\n";
    ByVal(A());
    std::cout << "ByLCRef(a);\n";
    ByLCRef(a);
    std::cout << "ByRRef(std::move(a));\n";
    ByRRef(std::move(a));
    std::cout << "ByRRef(A());\n";
    ByRRef(A());
} 
```

产生以下内容：

```
A Default constructor

ByVal(a);
A Copy
A Move
ByVal(std::move(a));
A Move
A Move
ByVal(A());
A Default constructor
A Move
ByLCRef(a);
A Copy
ByRRef(std::move(a));
A Move
ByRRef(A());
A Default constructor
A Move 
```

如您所见，`ByVal`与一对参考重载相比，产生了 1 个额外的移动。所以问题是：值得吗？你什么时候会创建两个重载而不是一个简单的按值传递函数？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-06T21:07:02.703

> 如您所见，与一对参考重载相比，ByVal 产生了 1 个额外的移动。所以问题是：值得吗？你什么时候会创建两个重载而不是一个简单的按值传递函数？

+1 大多数问这个问题的人都懒得做分析。所以你得到我的赞成，因为你自己做作业。:-)

是否值得取决于移动构造函数的成本，以及函数需要多少参数。在一种极端情况下，如果移动构造函数不是那么快，您可能会非常关心消除它们（赞成 const&、&& 重载解决方案）。在另一个极端，如果您的函数有 4 个参数，每个参数都需要左值/右值处理，您可能不愿意编写 16 个重载来涵盖所有情况。这是需要维护的大量代码，而固有的代码复杂性会招致错误。所以按值方法看起来更有吸引力（不需要重载）。

所以恕我直言，对于“是否值得”这个问题没有一般的答案。最好的答案是让自己了解每种解决方案的成本，就像您已经做过的那样，并根据具体情况做出工程判断。

**更新**

在`vector<T>::push_back`恕我直言的情况下，const&, && 重载解决方案是值得的。只有一个参数，我们不知道移动构造函数有多昂贵。事实上，我们甚至不知道**是否**有移动构造函数。修改您的实验以测试后一种情况（删除移动构造函数）：

```
ByVal(a);
A Copy
A Copy

ByLCRef(a);
A Copy 
```

你要付一两份把你的复制`A`进去`vector`吗？

也就是说，您对参数了解得越少，您就越需要向性能方面倾斜，特别是如果您正在编写像`std::vector`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-22T13:38:42.773

## 存储可移动和可复制的类

想象一下你有这个类：

```
class Data {
 public:
  Data() { }
  Data(const Data& data)            { std::cout << "  copy constructor\n";} 
  Data(Data&& data)                 { std::cout << "  move constructor\n";}
  Data& operator=(const Data& data) { std::cout << "  copy assignment\n"; return *this;}
  Data& operator=(Data&& data)      { std::cout << "  move assignment\n"; return *this;}  
}; 
```

注意，一个好的 C++11 编译器[应该为你定义所有这些函数](http://en.wikipedia.org/wiki/Special_member_functions)（一些旧版本的[Visual Studio 没有](https://stackoverflow.com/a/8991961/3422652)），但我在这里定义它们是为了调试输出。

现在，如果您想编写一个类来存储这些类之一，我可能会像您建议的那样使用按值传递：

```
class DataStore {
  Data data_;
 public: 
  void setData(Data data) { data_ = std::move(data); }
}; 
```

我正在利用[C++11 移动语义](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html)将值移动到所需位置。然后我可以`DataStore`像这样使用它：

```
 Data d;   
  DataStore ds;

  std::cout << "DataStore test:\n";
  ds.setData(d);

  std::cout << "DataStore test with rvalue:\n";
  ds.setData(Data{});

  Data d2;
  std::cout << "DataStore test with move:\n";
  ds.setData(std::move(d2)); 
```

具有以下输出：

```
DataStore test:
  copy constructor
  move assignment
DataStore test with rvalue:
  move assignment
DataStore test with move:
  move constructor
  move assignment 
```

这很好。我在上次测试中有两个动作可能不是最佳的，但动作通常很便宜，所以我可以忍受。为了使它更优化，我们需要重载`setData`我们稍后会做的函数，但这可能是过早的优化。

## 存储一个不可移动的类

但现在想象我们有一个可复制但不可移动的类：

```
class UnmovableData {
 public:
  UnmovableData() { }
  UnmovableData(const UnmovableData& data) { std::cout << "  copy constructor\n";}
  UnmovableData& operator=(const UnmovableData& data) { std::cout << "  copy assignment\n"; return *this;}  
}; 
```

在 C++11 之前，所有类都是不可移动的，所以希望今天能在野外找到很多类。如果我需要编写一个类来存储它，我就不能利用移动语义，所以我可能会写这样的东西：

```
class UnmovableDataStore {
  UnmovableData data_;
 public:
  void setData(const UnmovableData& data) { data_ = data; }
}; 
```

并通过引用到常量。当我使用它时：

```
 std::cout << "UnmovableDataStore test:\n";
  UnmovableData umd;
  UnmovableDataStore umds;
  umds.setData(umd); 
```

我得到输出：

```
UnmovableDataStore test:
  copy assignment 
```

如您所料，只有一份副本。

## 存储不可复制的类

你也可以有一个可移动但不可复制的类：

```
class UncopyableData {
 public:
  UncopyableData() { } 
  UncopyableData(UncopyableData&& data) { std::cout << "  move constructor\n";}
  UncopyableData& operator=(UncopyableData&& data) { std::cout << "  move assignment\n"; return *this;}    
}; 
```

`std::unique_ptr`是可移动但不可复制的类的示例。在这种情况下，我可能会编写一个类来存储它，如下所示：

```
class UncopyableDataStore {
  UncopyableData data_;
 public:
  void setData(UncopyableData&& data) { data_ = std::move(data); }
}; 
```

我通过[右值引用](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html)传递并像这样使用它：

```
 std::cout << "UncopyableDataStore test:\n";
  UncopyableData ucd;
  UncopyableDataStore ucds;
  ucds.setData(std::move(ucd)); 
```

具有以下输出：

```
UncopyableDataStore test:
  move assignment 
```

注意我们现在只有一个好的动作。

## 通用容器

然而，STL 容器需要是通用的，它们需要与所有类型的类一起工作并尽可能优化。如果你真的需要上面数据存储的通用实现，它可能看起来像这样：

```
template<class D>
class GenericDataStore {
  D data_;
 public:
  void setData(const D& data) { data_ = data; }
  void setData(D&& data) { data_ = std::move(data); }   
}; 
```

通过这种方式，无论我们使用不可复制或不可移动的类，我们都可以获得最佳性能，但我们必须至少有两个`setData`可能引入重复代码的方法重载。用法：

```
 std::cout << "GenericDataStore<Data> test:\n";
  Data d3;
  GenericDataStore<Data> gds;
  gds.setData(d3);

  std::cout << "GenericDataStore<UnmovableData> test:\n";
  UnmovableData umd2;
  GenericDataStore<UnmovableData> gds3;
  gds3.setData(umd2); 

  std::cout << "GenericDataStore<UncopyableData> test:\n";
  UncopyableData ucd2;
  GenericDataStore<UncopyableData> gds2;
  gds2.setData(std::move(ucd2)); 
```

输出：

```
GenericDataStore<Data> test:
  copy assignment
GenericDataStore<UnmovableData> test:
  copy assignment
GenericDataStore<UncopyableData> test:
  move assignment 
```

[现场演示。](http://ideone.com/DOcHBH)希望有帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T02:30:27.627

重要的一点是，在值传递和重载之间切换时不需要更改客户端代码。所以它真的归结为性能与维护。而且由于维护通常更受青睐，因此我提出了以下经验法则：

**按值传递，除非：**
1\. 移动构造函数或移动赋值不是微不足道的。
2\. 对象可复制但不可移动。
3.你在写一个模板库，不知道对象的类型。
4\. 尽管对象具有微不足道的移动构造函数和赋值，但您的分析器仍然向您显示程序在移动中花费了大量时间。

# c# - 动态算子解析

> ID：14185990
> 
> 赞同：6
> 
> 时间：2013-01-06T19:43:10.670
> 
> 标签：c#, dynamic, .net-4.5

我有一个通用方法，它通过将操作数之一转换为`dynamic`. 有两种不同的调用：

```
//array is T[][]
//T is MyClass
array[row][column] != default(T) as dynamic 
```

这有效并调用`static bool operator !=(MyClass a, MyClass b)`（即使双方都是`null`）。

令我惊讶的是以下行的行为：

```
//array, a and b are T[][]
//T is MyClass
array[row][column] += a[line][i] * (b[i][column] as dynamic); 
```

这调用
`public static MyClass operator *(MyClass a, object b)`和
`public static MyClass operator +(MyClass a, object b)`

而不是
`public static MyClass operator *(MyClass a, MyClass b)`和
`public static MyClass operator +(MyClass a, MyClass b)`。

删除`(MyClass, object)`运营商原因

```
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException wurde nicht behandelt.
  HResult=-2146233088
  Message=Der *-Operator kann nicht auf Operanden vom Typ "[...].MyClass" und "object" angewendet werden.
  Source=Anonymously Hosted DynamicMethods Assembly
  StackTrace:
       bei CallSite.Target(Closure , CallSite , MyClass , Object )
       bei System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
       bei [...].MatrixMultiply[T](T[][] a, T[][] b) in 
       [...]
  InnerException: 
```

（省略我的）。

为什么？
我可以在不显式调用`T Operators.Add<T>(T a, T b)`方法而不是运算符的情况下调用正确的运算符吗？

## 更新

```
public static T TestMethod<T>(this T a, T b)
    {
        return (T)(a * (b as dynamic));
    } 
```

此方法在单独的程序集中调用（或尝试调用）`operator *(T, object)`，如果相同的方法在主程序集中它正确调用`operator *(T, T)`。

我用作类型参数的类是`internal`，当我将它更改为时问题消失了`public`，所以它似乎取决于类对方法的可见性。

`operator *(T, object)`即使类不可见，也会成功调用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T04:38:53.513

听起来您偶然发现了动态特性的一个有趣的设计决定——不是错误，这是故意的。一段时间以来，我一直想写一篇关于这个的博客。

首先，让我们退后一步。动态特性的基本思想是包含动态类型操作数的表达式将其类型分析推迟到运行时。在运行时，通过启动新版本的编译器并重新进行分析，重新完成类型分析，这次将动态表达式视为其实际运行时类型的表达式。

因此，如果您有一个加法表达式，它在编译时具有左手编译时类型的对象和右手编译时类型的动态，并且在运行时动态表达式实际上是一个字符串，那么分析是重新完成，左侧为对象，右侧为字符串。 **请注意，不考虑左侧的运行时类型**。它的编译时类型是对象，而不是动态的。只有动态类型的表达式具有在运行时分析中使用其运行时类型的属性。

只是为了确保清楚：如果您有：

```
void M(Giraffe g, Apple a) {...}
void M(Animal a, Fruit f) { ... }
...
Animal x = new Giraffe();
dynamic y = new Apple();
M(x, y); 
```

然后在运行时，调用*第二个覆盖。*在运行时 x 是 Giraffe 的事实被*忽略*了，因为它不是动态的。它在编译时是 Animal，因此在运行时它继续被分析为 Animal 类型的表达式。也就是说，分析就像您说的那样进行：

```
M(x, (Apple)y); 
```

这显然选择了第二个重载。

我希望这很清楚。

现在我们来到问题的实质。**当运行时类型无法访问时会发生什么？** 让我们实际举一个例子：

```
public class Fruit {}
public class Apple : Fruit 
{
  public void M(Animal a) {}
  private class MagicApple : Apple 
  {
    public void M(Giraffe g) {}
  }
  public static Apple MakeMagicApple() { return new MagicApple(); }
}
...
dynamic d1 = Apple.MakeMagicApple();
dynamic d2 = new Giraffe();
d1.M(d2); 
```

好的，会发生什么？我们有两个动态表达式，所以根据我之前的说法，在运行时我们再次进行分析，但假装你说

```
((Apple.MagicApple)d1).M((Giraffe)d2)); 
```

所以你会认为重载决议会选择`Apple.MagicApple.M`完全匹配的方法。但事实并非如此！**我们不能假装上面的代码就是您所说的，因为该代码访问了其可访问域之外的私有嵌套类型！**该代码将无法完全编译。但同样明显的是，我们不能让这段代码失败，因为这是一种常见的情况。

所以我必须修改我之前的陈述。运行时分析引擎实际上所做的是假装您插入*了您可以合法*插入的强制转换。在这种情况下，它意识到用户可以插入：

```
((Apple)d1).M((Giraffe)d2)); 
```

并且重载决议会选择`Apple.M`.

此外：假装演员总是类类型。可能已经插入了接口类型或类型参数类型转换，这会导致重载解析成功，但是通过使用“动态”，您表示您希望*使用运行时类型*，并且运行时类型对象永远不是接口或类型参数类型。

听起来你在同一条船上。如果动态表达式的运行时类型在调用站点上是不可访问的，则出于运行时分析的目的，它被视为最接近的可访问基类型。在您的情况下，最接近的可访问基类型可能是对象。

这一切都清楚了吗？

# php - 在将参数传递给构造函数（PDO）时获取多个对象

> ID：14185991
> 
> 赞同：0
> 
> 时间：2013-01-06T19:43:21.667
> 
> 标签：php, mysql, pdo

我试图在将参数传递给构造函数（PDO 连接）时将多行提取到实例中。我可以一次取一行然后构造它们，但我正在寻找一种单行解决方案。

```
class Member {

        // PDO connection
        public $conn;

        public $Members_ID;
        public $Members_FirstName;
        public $Members_LastName;

        function __construct($conn){         
            $this->conn= $conn;
        }

        // Returns an array of Members with the email address that is given
        // (Multiple members can have the same email)
        public static function getMembersFromEmailAddress($emailAddress, $conn){

            try 
            {
                $result = $conn->query("SELECT * FROM members WHERE Members_Email ='". $emailAddress ."'"); 

               //HERE I WANT MEMBERS TO BE AN ARRAY OF MEMBER OBJECTS
                $members = $result->fetch(PDO::FETCH_INTO, new Member($conn));
                return $members
            }
            catch(PDOException $e)
            {
                echo $e->getMessage();
            }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:54:54.153

关于什么：

```
$args= array();
$args[] = $conn;

$members = $result->fetchAll(PDO::FETCH_CLASS, 'Member', $args); 
```

`FETCH_INTO`用于将数据添加到已经存在的类中，因此在您的情况下使用`FETCH_CLASS`更有意义。

* * *

旁注：由于您已经在使用 PDO，您不妨利用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)。这提供了不必担心 SQL 注入的好处。

您的代码中唯一会改变的是：

```
$stmt = $conn->prepare("SELECT * FROM members WHERE Members_Email = :member_email");
$result = $stmt->execute(array(":member_email" => $emailAddress)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T19:57:12.127

你有一个设计缺陷。如果您使用的是非常小的应用程序，则必须由存储库/实体管理器或控制器触发查询。

`$conn`绝不是 的属性`Member`。

如果它在控制器中，我会给你代码：

```
try{
    $s = $connection->prepare('SELECT * FROM members WHERE Members_Email=:mail');
    $s->execute(array('mail'=>$emailAddress));
    $result = $s->fetchAll(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE,Member);
} 
```

该`PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE`语句是一种确保在PDO 将数据放入对象*之前调用构造函数的方法*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T19:55:14.513

在您的代码中，您仅将一行提取到一个对象中。

您需要循环获取，并添加到数组中：

```
while ($row = $result->fetch(PDO::FETCH_INTO, new Member($conn)) {
    $members[] = $row;
}
return $members; 
```

# mod-rewrite - 从数据库重写 URL

> ID：14185993
> 
> 赞同：0
> 
> 时间：2013-01-06T19:43:31.143
> 
> 标签：mod-rewrite

我需要一些帮助。我在这里找到的是：

[URL重写查询数据库？](https://stackoverflow.com/questions/12972608/url-rewrite-query-database)

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

但我不能把它改成我需要的:-(

这是我需要的。

www.mySite.de/person.php?p=122

www.mySite.de/alias-of-person-from-database

我需要从数据库中获取记录集的变量的名称在哪里？

它必须是一些 $_GET，或者？

任何人都可以帮助我吗？干杯，丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:02:14.283

我在这里得到我的答案。

[如何动态重写像 Facebook 这样的 URL](https://stackoverflow.com/questions/4907730/how-to-dynamically-rewrite-a-url-like-facebook)

谢谢秋葵！

干杯，丹尼斯

# c# - win CE 6.0 设备上的按钮

> ID：14185994
> 
> 赞同：2
> 
> 时间：2013-01-06T19:43:38.510
> 
> 标签：c#, windows, compact-framework, .net-2.0, windows-ce

在您运行 win CE 6.0 的设备上是一个按钮，您需要捕捉按下它的那一刻。也就是说，直到我们按下按钮，我们的方法才被执行，释放——停止方法。请帮助解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T00:29:09.380

这是一个带有源代码的 codeproject 链接，可以执行您想要的操作：

[http://www.codeproject.com/Articles/49881/Hooking-the-keyboard-message-queue-in-compact-fram](http://www.codeproject.com/Articles/49881/Hooking-the-keyboard-message-queue-in-compact-fram)

我已在自己的 WM 项目中成功使用此代码来重新调整音量键和其他一些硬件按钮的用途（我在一个屏幕上使用音量增大/减小作为翻转屏幕方向的触发器）。

这里有太多代码要发布。在项目中是 vkmap.cs，它似乎是所有可用键的综合列表：

```
 public static vkMap[] vkValues = {
            new vkMap ( 0x00, "VK_NOTDEF"), 
            new vkMap ( 0x01, "VK_LBUTTON" ),
            new vkMap ( 0x02,"VK_RBUTTON" ),
            new vkMap ( 0x03,"VK_CANCEL" ),
...
            new vkMap ( 0x30,"VK_0" ),
            new vkMap ( 0x31,"VK_1" ),
...
            new vkMap ( 0x41,"VK_A" ),
...
            new vkMap ( 0xA6,"VK_BROWSER_BACK" ),
            new vkMap ( 0xA7,"VK_BROWSER_FORWARD" ),
            new vkMap ( 0xA8,"VK_BROWSER_REFRESH" ), 
```

等等..总共有 258 个键，但有些键被标记为未定义。

要使用代码：

```
HookKeys hook = new HookKeys();
hook.HookEvent += new HookKeys.HookEventHandler(HookEvent);
hook.Start(); 
```

然后在您的 eventHandler 代码中如您所愿 - 我使用 Switch 语句来查找我想要的键：

```
 switch (vkMap.vkValues[keyBoardInfo.vkCode].s)
        {
            case "VK_F6":
                if ((hookArgs.wParam.ToInt32() == WM_KEYDOWN) || (hookArgs.wParam.ToInt32() == WM_SYSKEYDOWN))
                // Code here
                break;
            case "VK_F7":
                if ((hookArgs.wParam.ToInt32() == WM_KEYDOWN) || (hookArgs.wParam.ToInt32() == WM_SYSKEYDOWN))
                 // Code here
                break;
            default:
                break;
        } 
```

我不记得为什么我还要检查 WM_KEYDOWN 和 WM_SYSKEYDOWN .. 对此感到抱歉；如果我记得我会发布一个编辑。

当您完成需要输入时：

```
hook.Stop(); 
```

# ruby-on-rails-3 - 记住我 cookie 的安全含义？（导轨）

> ID：14185995
> 
> 赞同：2
> 
> 时间：2013-01-06T19:43:45.483
> 
> 标签：ruby-on-rails-3, security, authentication

我正在考虑添加记住我的功能（在这个优秀的[Railscast](http://railscasts.com/episodes/274-remember-me-reset-password)之后），但是我有点担心安全性。

如果有人从另一个用户那里获得了一个 cookie，会发生什么，这会归结为他们可以访问他们的所有帐户，因为他们基本上已经登录了吗？（用户 cookie 被盗的可能性有多大？）

为用户建立一个正常会话会更好（当他们关闭浏览器时结束）并且cookie只记住那个user.id但在他们返回时**不会**重新登录，只是自动填写用户名（或电子邮件）登录表单的一部分，因此他们只需输入密码即可继续。

这对我来说似乎更安全，但也许我有点太偏执了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:52:17.693

绝对安全的系统将无法使用。可用性非常好的系统通常不是很安全。

“记住我”是经典的可用性功能，它降低了安全性。

在这种情况下，如果您进行金融交易，我宁愿不实现此功能（因为安全性更重要）。

在这种情况下，如果你做一个可以发布小猫照片的网站，我认为没问题。

此外，您可以随时制作限时 cookie，因此您的“记住我”功能最多只能记住一天。这将提高可用性，但会保持系统相当安全。

# user-interface - Java GUI builder - 将图像导入目录和使用 JFileChooser 将给定目录导入标准目录

> ID：14185997
> 
> 赞同：2
> 
> 时间：2013-01-06T19:43:53.813
> 
> 标签：user-interface, image-processing, netbeans, gui-builder

这篇文章是我几天前进行的另一项调查的第 2 部分。然后使用此代码，我将放在最后，通过 JButton1，我能够附加一个文件，并使其在应用程序北部和东部的窗口中可见。我现在正在尝试导入：

1) 将新图像放入某个目录，例如放入 C:\output

2）图像的整个目录（文件夹），可以说来自 C:\importImages

进入 C:\output 。

为此，我假设我在 C:\importImages 目录中有一些图像。下面，这些是我需要填写的 2 个代码示例，以便我想要工作。尝试加载目录的第一种方法无法运行。我认为它的错误可能与 GUI Builder 中的 Filechooser 按钮有关。

这是加载整个目录的完整方法。

```
 private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:(for importing a whole directory(folder) from C:\importImages into C:\output ).
JFileChooser chooser = new JFileChooser();
        chooser = new JFileChooser(); 

        File f = chooser.getSelectedFile();

        String filename = f.getAbsolutePath();
    try {
        ImageIcon ii=new ImageIcon(scaleImage(250, 250, ImageIO.read(new File(filename))));//get the image from file chooser (directories)
        //jLabel1.setIcon(ii);

        File srcDir = new File(filename);
        File destDir = new File("C:/output/");
        FileUtils.copyDirectoryToDirectory(srcDir, destDir);

    }
        catch (Exception ex) {
        ex.printStackTrace();
    }
    } 
```

以及仅导入单个文件的方法。

```
 private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here(for importing a single image to directory C:\output ).
--
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:18:26.483

最好的学习方法，自己尝试。
我可以向你展示可能性。试试这些有用的方法来插入你的代码。

问题：我现在正在尝试导入：

*   1) 将新图像放入某个目录，例如放入 C:\output

**回答：**

鉴于 File API 中没有将文件从一个位置复制到另一个位置的直接方法，如何将 Java 中的文件从一个目录复制到另一个目录是常见的要求。

复制文件的一种方法是从 FileInputStream 读取并将相同的数据写入 FileOutputStream 到另一个目录。

值得庆幸的是，您不需要在这里重新发明轮子，有一些可用的开源库允许我们轻松地将 Java 中的文件从一个目录复制到另一个目录。其中一个库是**Apache commons IO**，它包含一个名为**FileUtils**的类，它为文件相关操作提供实用方法。

[在不同位置复制和重命名文件](https://stackoverflow.com/questions/5388146/copy-and-rename-file-on-different-location)

[FileUtils.copyFile](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html#copyFile%28java.io.File,%20java.io.File%29)

**FileUtils.copyFile(sourceFile, targetFile)**可以使用

```
 String source = "C:/output/myImage.jpg";
    //directory where file will be copied
    String target ="C:/importImages/";

    //name of source file
    File sourceFile = new File(source);
    String Filename = sourceFile.getName();

    File targetFile = new File(target+Filename);

    //copy file from one location to other
    FileUtils.copyFile(sourceFile, targetFile); 
```

**问题：**我现在正在尝试导入：

*   2）图像的整个目录（文件夹），可以说从 C:\importImages 到 C:\output 。

**回答：**

**现在用java完成目录迭代的标准方法是什么？**

[在java中遍历目录的最佳方法？](https://stackoverflow.com/questions/3154488/best-way-to-iterate-through-a-directory-in-java)

在您的代码中添加这些方式。是不是很难。

*   测试文件扩展名 (.jpg .gif ...)
*   别忘了抓
*   NullPointerException - 如果源或目标为 null
*   IOException - 如果源或目标无效
*   IOException - 如果在复制期间发生 IO 错误