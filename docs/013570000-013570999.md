# StackOverflow 问答 13570000-13570999

# python - 来自 Selenium 的 Python 网络驱动程序

> ID：13570003
> 
> 赞同：0
> 
> 时间：2012-11-26T17:28:10.323
> 
> 标签：python, selenium

我是硒自动化的新手。我创建了一个 Selenium 测试用例和测试套件。我将测试套件导出为 Python webdriver。

我应该如何执行这个 python 代码？我试过这个：

`./pythonwebdriver <selenium test case.html>`

我收到此错误：

```
Traceback (most recent call last):
File "./pythondriver.py", line 52, in <module>
unittest.main()
File "/usr/lib/python2.7/unittest/main.py", line 94, in __init__
self.parseArgs(argv)
File "/usr/lib/python2.7/unittest/main.py", line 149, in parseArgs
self.createTests()
File "/usr/lib/python2.7/unittest/main.py", line 158, in createTests
self.module)
File "/usr/lib/python2.7/unittest/loader.py", line 128, in loadTestsFromNames
suites = [self.loadTestsFromName(name, module) for name in names]
File "/usr/lib/python2.7/unittest/loader.py", line 100, in loadTestsFromName
parent, obj = obj, getattr(obj, part)
AttributeError: 'module' object has no attribute '<testcasename>' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T18:41:44.047

没有 Python webdriver 这样的东西。[Webdriver](http://seleniumhq.org/docs/03_webdriver.html)是一个驱动网页的组件。它已被集成到 Selenium 2。它本身在 Java 中工作，但有许多语言可用的绑定，包括[Python](http://selenium.googlecode.com/svn/trunk/docs/api/py/index.html)。

这是 webdriver 文档中的一个带注释的示例，稍作修改。为了创建一个单元测试，创建一个继承单元测试模块提供的类 TestCase 的测试类。

```
#!/usr/bin/python

from selenium import webdriver
from selenium.webdriver.support.ui import WebDriverWait # available since 2.4.0
import unittest

class GoogleTest(unittest.TestCase):
    def test_basic_search(self):
        # Create a new instance of the Firefox driver
        driver = webdriver.Firefox()
        driver.implicitly_wait(10)

        # go to the google home page
        driver.get("http://www.google.com")

        # find the element that's name attribute is q (the google search box)
        inputElement = driver.find_element_by_name("q")

        # type in the search
        inputElement.send_keys("Cheese!")

        # submit the form (although google automatically searches 
        # now without submitting)
        inputElement.submit()

        # the page is ajaxy so the title is originally this:
        original_title = driver.title

        try:
            # we have to wait for the page to refresh, the last thing 
            # that seems to be updated is the title
            WebDriverWait(driver, 10).until(lambda driver :  
                                     driver.title != original_title)
            self.assertIn("cheese!", driver.title.lower())

            # You should see "cheese! - Google Search"
            print driver.title
        finally:
            driver.quit()

if __name__ == '__main__':
    unittest.main() 
```

关于 webdriver 的一个好处是您可以将驱动程序行更改为

```
driver = webdriver.Chrome()
driver = webdriver.Firefox()
driver = webdriver.Ie() 
```

取决于您需要测试的浏览器。除了[ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)、[FirefoxDriver](http://code.google.com/p/selenium/wiki/FirefoxDriver)或[InternetExplorerDriver](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)之外，还有最轻量级的[HtmlUnitDriver](http://code.google.com/p/selenium/wiki/HtmlUnitDriver)可以无头运行（但可能运行一些与浏览器不同的 javascript），[RemoteWebDriver](http://code.google.com/p/selenium/wiki/RemoteWebDriver)允许在远程机器上并行运行测试，以及许多其他（iPhone、Android、野生动物园，歌剧）。

运行它可以像运行任何 python 脚本一样完成。要么只是：

```
python <script_name.py> 
```

或在第一行包含解释器名称，`!#/usr/bin/python`如上。最后两行

```
if __name__ == '__main__':
    unittest.main() 
```

当这个文件像`./selenium_test.py`. 也可以从多个文件中自动收集测试用例并将它们一起运行（参见 unittest 文档）。在某些模块或某些单独测试中运行测试的另一种方法是

```
python -m unittest selenium_test.GoogleTest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:19:03.497

您的脚本调用`unittest.main()`处理命令行参数：`<selenium test case.html>`. `unittest.main()`期望测试模块、测试类或测试方法的名称作为命令行参数，而不是`<selenium test case.html>`.

# python - 为什么 Django 不再认为 mysqldb 是一个有效的后端？

> ID：13570004
> 
> 赞同：3
> 
> 时间：2012-11-26T17:28:10.573
> 
> 标签：python, django, apache, mod-wsgi, ubuntu-12.04

我在这里问以下问题，因为它涉及开发人员工具。

我已将 Ubuntu 10.04 LTS 工作站升级到 12.04 LTS（32 位）。今天我去尝试一个 Django Web 应用程序，它一直在没有错误地工作。它在 Apache 上运行。

该应用程序不再工作并返回错误。我一直在解决所有位于`/var/log/apache2/error.log`.

第一个错误涉及 UCS2 和 UCS4（为便于阅读而修剪了行）。

```
ImportError: /usr/local/lib/python2.7/lib-dynload/_io.so: 
undefined symbol: PyUnicodeUCS2_FromObject
mod_wsgi (pid=9246): Target WSGI script 
'/usr/local/www/wsgi-scripts/wsgi_amr_handler.py' 
cannot be loaded as Python module. 
```

通过重建和重新安装最新版本的 mod_wsgi 可以清除这一点。

当前错误涉及 mysqldb 不是有效的后端。这是错误（为清楚起见删除了时间戳）：

```
backend = load_backend(db['ENGINE'])
File "/usr/local/lib/python2.7/site-packages/django/db/utils.py", line 51, 
in load_backend
raise ImproperlyConfigured(error_msg)
ImproperlyConfigured: 'mysql' isn't an available database backend.
Try using django.db.backends.mysql instead.
Error was: No module named mysql.base 
```

这是 Django 应用程序的 settings.py 中的配置问题还是其他问题？

是否有 Python 2.7、mod_wsgi、Django 和 mysqldb 的安装顺序，这可能是问题所在吗？

这是我当前的（收到评论后）settings.py

```
DATABASES = {
'default': {
'ENGINE': ' django.db.backends.mysql', 
'NAME': 'server',      # Or path to database file if using sqlite3.
'USER': 'ox',          # Not used with sqlite3.
'PASSWORD': 'xxxx',                  # Not used with sqlite3.
'HOST': '',     
'PORT': '',  
    }
} 
```

以下是错误：

```
ImproperlyConfigured: ' django.db.backends.mysql' isn't an available database backend.
Try using django.db.backends.XXX, where XXX is one of:
'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'sqlite3'
Error was: No module named  django.db.backends.mysql.base 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:34:55.043

您显然也升级了 Django 安装。最近的 Django 版本需要后端模块的*全*名。您指定数据库的方式在[1.2 版](https://docs.djangoproject.com/en/stable/releases/1.2/#features-deprecated-in-1-2)中已更改，您需要按照升级说明更新您的 Django 项目代码库。

对于 MySQL，正确的后端现在是[`django.db.backends.mysql`](https://docs.djangoproject.com/en/stable/ref/databases/#connecting-to-the-database)；打开`settings.py`并更新您的`DATABASES`条目。

# unit-testing - ERT，相等性测试由于必须被视为相同的不同符号而失败

> ID：13570005
> 
> 赞同：1
> 
> 时间：2012-11-26T17:28:21.493
> 
> 标签：unit-testing, emacs, elisp, ert

所以，我试图熟悉 ERT，Emacs 中的单元测试包。我想测试使用`gensym`. 我可以确保 gensym 生成具有相同*名称*的符号，但它们不是相同的符号，这会导致失败。以下是为您提供更好主意的代码：

```
(ert-deftest i-test-repreat ()
  "Tests the expansion of i-iterate macro, repeat driver."
  (require 'i-iterate)
  (should
   (equal
    (macroexpand '(++ (repeat 100) (message "")))
    '(let* ((--0 0)) ;; `--0' is a result of a custom-made `gensym'
       (while (< --0 100)
         (incf --0)
         (message "")) nil)))) 
```

这是失败消息：

```
(list-elt 1
  (list-elt 0
    (list-elt 0
      (different-symbols-with-the-same-name --0 --0)))) 
```

很公平，它是一个不同的符号，但预计会如此。我怎样才能让它成功？

**编辑**

到目前为止，这是我能想到的：

```
(defun i/test-equals-ignore-gensym (a b)
  "Tests trees A and B for equality, but considers symbols
equal if their names are equal (this allows symbols generated
by `i-gensym' to pass)."
  (or (equal a b)
      (cond
       ((and (null a) (null b)) t)
       ((and (consp a) (consp b))
        (and (i/test-equals-ignore-gensym (car a) (car b))
             (i/test-equals-ignore-gensym (cdr a) (cdr b))))
       ((and (symbolp a) (symbolp b))
        (string= (symbol-name a) (symbol-name b)))
       ((and (atom a) (atom b)) (eql a b))
       (t nil))))

(defun i/test-explainer-equal (a b)
  "Explains why `i/test-equals-ignore-gensym' failed."
  ;; TODO: Write our own explanation, this will trigger when
  ;; necessary, but will not always display the correct message.
  (ert--explain-equal-rec a b))
(put 'i/test-equals-ignore-gensym
     'ert-explainer 'i/test-explainer-equal)

(ert-deftest i-test-repreat ()
  "Tests the expansion of i-iterate macro, repeat driver."
  (require 'i-iterate)
  (should
   (i/test-equals-ignore-gensym
    (macroexpand '(++ (repeat 100) (message "")))
    '(let* ((--0 0))
       (while (< --0 100)
         (incf --0)
         (message "")) nil)))) 
```

但如果有更好的方法，我会更高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:02:22.810

您可以以不同的方式解决问题：不要检查代码是否是您期望的代码，而只需检查代码是否按照您的预期运行。即运行`(++ ...)`表达式并检查输出。

顺便说一句，您想要对这些代码块进行的比较称为“相等模 alpha 转换”或只是[alpha 等价](http://en.wikipedia.org/wiki/Alpha_conversion#Alpha_equivalence)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:36:59.693

您可以将实际名称与`symbol-name`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T17:44:52.687

如果您`make-symbol`在您的定制中使用`gensym`，替换为对您`make-symbol`有`intern`帮助。所以，

```
(flet ((make-symbol (&optional prefix) (intern prefix)))
  (macroexpand '(++ (repeat 100) (message "")))) 
```

生成带有内部符号的类似代码`--0`。这足以避免您的问题。

# javascript - 一旦在用户浏览器中禁用箭头键滚动，如何启用它

> ID：13570007
> 
> 赞同：0
> 
> 时间：2012-11-26T17:28:22.807
> 
> 标签：javascript, jquery, scroll, arrow-keys

[在用户浏览器中禁用箭头键滚动](https://stackoverflow.com/questions/8916620/disable-arrow-key-scrolling-in-users-browser) Zeta 给出了如何禁用箭头键的正确答案。

一旦禁用，我需要重新启用箭头键导航。

```
$('main navigation').has('drop down').bind('keyup', function (e) {
    if (e.keyCode == 40) {hover(e,$(this));} //Down Arrow Key press, how mega menu
    if (e.keyCode == 38) {unhover(e);} //Up Arrow Key Press, hide mega menu
    if (e.keyCode == 9) {checkTab();} //check if tab pressed
}

var checkTab = function (){
        // i check, if tab focus to the main menu anchor
    if($('main navigation').is(':focus')){
        var keys = [];
        window.addEventListener("keydown",
            function(e){
                keys[e.keyCode] = true;
                switch(e.keyCode){
                    case 37: case 39: case 38:  case 40: // Arrow keys
                    case 32: e.preventDefault(); break; // Space
                    default: break; // do not block other keys
                }
            },
        false);
        window.addEventListener('keyup',
            function(e){
                keys[e.keyCode] = false;
            },
        false);             
        console.log('focused')
    }
    else {
        console.log('f out')    
    }                   
} 
```

这工作正常，但因为我有绑定 window.event 禁用。一旦禁用我无法启用。在这一点上需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:41:25.107

您可以使用 Jquery on/off 来解决这个问题。

首先像这样附加keydown..

```
$('window').on('keydown', function(){
        //Your Function Here
        }); 
```

然后分离，这样做......

```
$('window').off('keydown'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:25:17.290

使用另一个变量来确定您当前是否应该阻止箭头键：

```
var useArrowKeysToScroll = false;

/* ... */
function(e){
    keys[e.keyCode] = true;
    if(!useArrowKeysToScroll && 
           ((e.keyCode >= 37 && e.keyCode <= 40) || 
             e.keyCode == 32)){
        e.preventDefault();
    }
    /* handle other keys etc... */
}, /* ... */ 
```

如果`useArrowKeysToScroll`为假，则箭头键和空格键不会导致滚动。

# asp.net - 创建网络驱动器

> ID：13570009
> 
> 赞同：0
> 
> 时间：2012-11-26T17:28:36.597
> 
> 标签：asp.net, vb.net, c#-4.0, c#-3.0, c#-to-vb.net

我需要帮助满足以下要求。

我想创建一个桌面应用程序，它在我的本地机器上创建网络驱动器。当用户点击网络驱动器时，它会询问用户名和密码。用户名和密码将通过 Web 服务与数据库进行核对。

网络中的文档将根据存储在数据库中的权限进行过滤。例如，在服务器上，所有文档存储在单个文件夹中，不同用户的权限存储在数据库中。User1 可以读取 5 个文档，User2 可以读取 10 个文档。所以不同文件的访问是根据用户权限来的。

以上是可能的。请建议我一些与此相关的链接。

请建议我需要学习什么。
感谢和问候
果冻

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:44:10.057

与询问用户和密码相关的部分很容易。[您可以使用easyhook](http://easyhook.codeplex.com)库连接到 CreateFileW 和 CreateFileA检查此[链接](http://www.sghaida.com/transparent-encryption-layer-using-easyhook/)，因为您可以使用此[库](http://dokan-dev.net/en/)来创建虚拟驱动器。我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T09:38:13.523

为权限集创建数据库表：例如

创建表 FilePermission ( Id_User Integer, pwd varchar(100), FileName Varchar(1000) ReadRights char(1), Writable char(1), Editable char(1) )

创建一个 Windows 服务，它将执行以下操作： 1\. 使用 id_user 和 FileName 从 FilePermission 表中获取值 2\. 如果假设它具有只读访问权限（ReadRights == 1），则通过 Process exe 启动 Window 应用程序。

我希望这将有助于继续前进。

# google-apps-script - 谷歌应用脚 本查找（）

> ID：13570011
> 
> 赞同：1
> 
> 时间：2012-11-26T17:28:39.360
> 
> 标签：google-apps-script, directory

我正在寻找有关文件夹类中 find() 方法的更多文档。我使用 ...find(".pdf") 得到混合结果，并且正在寻找一种可靠的方法来在文件夹中查找 pdf 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:48:16.457

如果您得到太多不一定是 pdf 的结果，可以尝试通过检查文件扩展名是否以 .pdf 结尾来进一步过滤结果集。

```
var files = myFolder.find(".pdf");
var pdfs = [];
for (var i in files) {
  var name = files[i].getName();
  var ext = name.substr(-4); // gets last 4 chars of the name
  if (ext == ".pdf") {
    pdfs.push(files[i]);
  }
} 
```

# twitter-bootstrap - Twitter Bootstrap 选项卡 - 单击时不隐藏每个选项卡中的内容

> ID：13570021
> 
> 赞同：4
> 
> 时间：2012-11-26T17:28:53.820
> 
> 标签：twitter-bootstrap

选项卡会加载，但在单击非活动选项卡时，它会加载该内容并且仍然具有来自另一个选项卡的内容。单击该选项卡即可加载其他选项卡中的所有内容。

链接到 HTML：[http ://stl-sportszone.com/taco/](http://stl-sportszone.com/taco/)

HTML - 加载默认的 BS 导航选项卡。

```
<div  class="row">
    <div class="span4">
      <h2>Your Brands</h2>
    </div>
    <div class="span12">
        <ul  class="nav nav-tabs">
          <li class="active"><a href="#pane1" data-toggle="tab">Sewing</a></li>
          <li><a href="#pane2" data-toggle="tab">Vacs</a></li>
          <li><a href="#pane3" data-toggle="tab">Commerical</a></li>
          <li><a href="#pane4" data-toggle="tab">Fans</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="pane1">
              <div class="row">
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
              </div>
              <div class="spacer10"></div>
              <div class="row">
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
              </div>
            </div>
        </div>
        <div class="tab-content">
            <div class="tab-pane" id="pane2">
              <div class="row">
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
              </div>
            </div>
        </div>
        <div class="tab-content">
            <div class="tab-pane" id="pane3">
              <div class="row">
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
              </div>
            </div>
        </div>
        <div class="tab-content">
            <div class="tab-pane" id="pane4">
              <div class="row">
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
                <div class="span3"><img src="http://placehold.it/200x145" alt="" class="pull-left img-polaroid"/></div>
              </div>
            </div>
        </div>
    </div>
  </div>         
</div> <!-- /container --> 
```

Javascript

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<!-- Bootstrap JS: compiled and minified -->
<script src="js/bootstrap.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T18:56:21.460

你所有`div.tab-pane`的应该在一个单一的`div.tab-content`。

```
<div  class="row">
  <div class="span4">
    <h2>Your Brands</h2>
  </div>
  <div class="span12">
    <ul  class="nav nav-tabs">
      <li class="active"><a href="#pane1" data-toggle="tab">Sewing</a></li>
      <li><a href="#pane2" data-toggle="tab">Vacs</a></li>
      <li><a href="#pane3" data-toggle="tab">Commerical</a></li>
      <li><a href="#pane4" data-toggle="tab">Fans</a></li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane active" id="pane1">
        ...
      </div>
      <div class="tab-pane" id="pane2">
        ...
      </div>
      <div class="tab-pane" id="pane3">
        ...
      </div>
      <div class="tab-pane" id="pane4">
        ...
      </div>
    </div>
  </div>
</div> 
```

# vim - Explorer：是否默认安装？

> ID：13570024
> 
> 赞同：2
> 
> 时间：2012-11-26T17:29:08.643
> 
> 标签：vim

我正在尝试运行 vim 的资源管理器，`:Ex`但它说：`Not an editor command: Ex`.

我认为资源管理器默认安装在 vim 中。真的吗？如何安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:59:02.740

据我[了解](http://vimcasts.org/episodes/the-file-explorer/)，`:Explore`命令是通过[netrw pluging](https://github.com/vim-scripts/netrw.vim)添加的。它通常与 Vim 一起分发。在您的情况下，您将不得不手动安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T20:54:55.593

也许您只需要（至少）在 .vimrc 中包含以下两行：

设置 nocp 文件类型插件

# database - 与内存中的 m 个有序集合相交的有效算法？

> ID：13570026
> 
> 赞同：2
> 
> 时间：2012-11-26T17:29:13.493
> 
> 标签：database, data-structures

假设我们有*m* **个有序集合**，我们想要找到它们的**交集**。

我们应该为有序集使用哪种**数据结构，哪种****算法**最有效？

同一个问题： [N 路合并算法](https://stackoverflow.com/questions/5055909/algorithm-for-n-way-merge)

看来文献量很大。因此，一个更好的问题是：有哪些好的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:42:35.410

您可以创建链接到父节点的二叉树并实现经典的交集/联合算法：

1.  设置`iterA`为树的最左边（最小）节点（即从最左边的分支下降到叶子）。
2.  设置`iterB`为有序集合的第一个（最小）节点（如果它是用有序数组实现的，或者如果是树，则设置为最左边的节点）。
3.  通过比较`iterA`and指向的项目进行分支`iterB`
    *   如果低于：联合和推进的产量项目`iterA`
    *   如果等于：yield并集项和交集项并推进两者`iterA`和`itemB`
    *   如果更大：联合和推进的产量项目`iterB`
4.  重复直到其中一个迭代器无法前进
5.  其他迭代器可访问的其余项目作为联合项目产出

二叉树迭代器的推进：

*   如果当前节点有右孩子下降到它并尽可能下降到它最左边的孩子。输出那个项目。
*   如果节点有父节点上升，并在我们从右孩子上升时重复。输出那个项目。
*   否则：树的所有项目都已经产生（收集结束）。

**更新：** 如果您知道您的有序集（经过`iterB`）比树小得多，您可以使用更复杂的算法进行交集：

1.  最初设置`iterB`为有序集的开头（较低的值）。
2.  设置`iterA`为 value 的最小上界的节点`iterB`。
3.  通过比较`iterA`and指向的项目进行分支`iterB`
    *   如果等于：产生交集项。
4.  前进`itemB`到下一个值。
5.  从 current 开始前进`iterA`到 value 的最小上限。`itemB``itemA`
6.  重复直到`itemB`通过有序集合的所有项目。

从特定节点前进到最小上限的位置是：

*   如果当前节点的值小于目标
    *   通过遍历每个节点的右孩子找到右孩子的上限
    *   如果该分支的最右边节点甚至低于目标：从右子节点移动并从该节点重新启动时上升到父节点。
    *   其他来自我们找到上限的节点
    *   找到小于目标的第一个最左边的孩子值
        *   如果未找到：该分支的最左侧叶子是最小上限
        *   否则从该节点重新启动（更准确地说是使用遍历最左边和最右边节点缩小边界的子算法）。

搜索边界的主要思想是缩小上限和最小边界（“-”是忽略节点，“...”是新的搜索范围）：

```
for B < X < A
    U
   / \-
  L
-/ \...

for A < X < B
  L
-/ \
    U
.../ \- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:36:08.907

*这只是一个草图：请帮助我改进它。*

此解决方案将基于使用**二分搜索**将搜索限制为每个集合的 n/2^i 个元素，并且我将使用有效的数据结构来记住下一个数字的这些比较。

首先要注意的是**平衡二叉树擅长执行二叉搜索，只有当搜索的间隔与（子）树的间隔紧密匹配时。**

接受二分查找的**另外**2 个结构是**数组**和**跳过列表**。该数组对于插入和删除效率低下，因此跳过列表似乎是最佳选择。

我们将需要**m 个大小为 64 的数组，**其中将包含每个数组的每个集合的元素，这些元素在二进制搜索中进行**比较，按照比较的执行顺序插入。**

我们还需要一个**双链表，其中将插入二进制搜索中使用的所有集合中的所有元素。** 在此处使用跳过列表可以最大限度地减少所需的比较次数。

基本思路是这样的。

1.  我们使用二分搜索搜索每个集合中的最小元素。
2.  在每个二分查找步骤中，我们将新元素添加到集合的数组和双链表中。
3.  要么有一个共同的最小元素，要么没有。
4.  我们删除双链表中的最小元素。新搜索将从集合的二分搜索数组中的前一个元素开始，并将使用比以前一半的距离。我们使用数组中先前的二分搜索元素来将新搜索限制在已知的最小区间内。
5.  继续1。

# c# - 如何在 c# 中填写 RSAParameters 值

> ID：13570029
> 
> 赞同：7
> 
> 时间：2012-11-26T17:29:23.500
> 
> 标签：c#, rsa, public-key-encryption

我在我的项目中使用下面的代码进行加密，一切正常。

```
RSACryptoServiceProvider x_alg = new RSACryptoServiceProvider(  );

// export only the public key 
RSAParameters x_public_params = x_alg.ExportParameters(false);

// export the private key 
RSAParameters x_private_params = x_alg.ExportParameters(true); 
```

现在客户更改了要求，他想将所有 RSAParameters 值存储到配置文件中，并提供以下详细信息以进行演示

```
<project name="netCard Server1">
  <key length="256"></key>
  <D length="64">00000000000000000000000000000000000000000000000000000000000019C5</D>
  <DP length="32">00000000000000000000000000000061</DP>
  <DQ length="32">00000000000000000000000000000065</DQ>
  <Exponent length="6">000DCD</Exponent>
  <InverseQ length="32">0000000000000000000000000000003B</InverseQ>
  <Modulus length="64">0000000000000000000000000000000000000000000000000000000000002C95</Modulus>
  <P length="32">00000000000000000000000000000065</P>
  <Q length="32">00000000000000000000000000000071</Q>
  <text length ="64">0123456789ABCDEF111111111111111125FE2222222222222233333333334444</text>
  <cipher length ="64">0000000000000000000000000000000000000000000000000000000000000000</cipher>
</project> 
```

现在，问题是当我导入 RSAParameters 值时，我得到了 Bad Data Exception

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T18:04:04.537

您遇到的问题是您的客户给您的 XML 不是反序列化为类型对象所需的格式`RSAParameters`

我已经运行了这段代码来显示 XML 序列化程序生成的 XML 的样子

```
var provider = new RSACryptoServiceProvider();

var parameters = provider.ExportParameters(true);

var x = new XmlSerializer(parameters.GetType());
x.Serialize(Console.Out, parameters);
Console.WriteLine(); 
```

它生成的输出类似于：

```
<RSAParameters>
  <Exponent>AQAB</Exponent>
  <Modulus>ruCEpD3XnR...g/waE=</Modulus>
  <P>90amUU3dDazsqN9+...jJUQ==</P>
  <Q>tQv5hGehNLLmv4aC...NfUQ==</Q>
  <DP>azJiiZ6itPoBQph...zBcQ==</DP>
  <DQ>OmewiOw9bxi/o82...f44Q==</DQ>
  <InverseQ>wNohk0NNl...YDg==</InverseQ>
  <D>fNOOWp46FckcvtI+...PpXAE=</D>
</RSAParameters> 
```

其中 ... 是截断的输出。您的客户提供的内容看起来像是其超集（密钥、文本和密码不在参数列表中），但格式有点不同。

您可以要求他们以完全所需的格式提供数据，然后从中进行序列化；或者您可以接受它们的格式，将其反序列化为 XML 并`RSAParameters`通过将 XML 内容映射到对象上的适当字段来手动构建`RSAParameters`对象。您还需要弄清楚他们想要对密钥、文本和密码数据做什么，因为这些数据将在此过程中丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T18:07:21.803

从您提供的示例结构看来，那里有额外的数据，您可能（或可能不）能够提供。

*   创建一个包装类
*   用于调用转换函数以将 Base64 转换为 Hex 的包装器属性
*   XmlElement 属性控制输出格式
*   密码和文本不在 RSAProperties 中，因此客户端必须为您指定它们

    [XmlRoot("Project")] 公共类 RSAWrapper{ [XmlIgnore] 公共 RSAParameters RsaWrap{get;set;}

    ```
    // replicate Key for Text and Cipher, subject to client's specs
    private LenghtyValue _key = null; 
    [XmlElement]
    public LenghtyValue Key{
        get{ return (_key!=null) ? _key.Value : null;}
        set{ _key = (value!=null) ? new LenghtyValue { Value = value} : null;}
    }

    // replicate Exponent for D, DP, DQ, InverseQ, Modulus, P and Q
    [XmlElement]
    public LenghtyValue Exponent{
       get{
           return new LenghtyValue { Value = ToHexFromB64(RsaWrap.Exponent);} // look up how to convert this
       }
       set {}
    } 

    public class LenghtyValue{
        [XmlText]
        public string Value{get;set;}

        [XmlAttribute("length")]
        public int Length {get{ return (""+Value").Length;} set{}}
    } 
    ```

    }

// 然后使用上面的类： .... RSACryptoServiceProvider x_alg = new RSACryptoServiceProvider();

```
RSAParameters x_public_params = x_alg.ExportParameters(false); // or true

RSAWrapper wrapForClient = new RSAWrapper {
    RsaWrap = x_public_params,
    Key = "1024", // or whatever size you have
    Cipher = "???", // whatever this field means per client specs
    Text = "???", // whatever this field means per client specs
}

// with simplifications....
XmlSerializer xser = new XmlSerializer(typeof(RSAWrapper));
xser.Serialize(File.Create(yourFileName), wrapForClient); 
```

# facebook-graph-api - 获取更大的相册照片缩略图

> ID：13570035
> 
> 赞同：3
> 
> 时间：2012-11-26T17:29:35.397
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, photos

在检索**相册的照片**时，有没有办法获得**不同大小的照片缩略图**？

 **[文档中的示例相册照片](https://developers.facebook.com/tools/explorer/?method=GET&path=10150146071791729/photos)

现在，看起来我为每个图像获得了两个来源：

*   “图片”（缩略图）：xxxx_s.jpg
*   '来源'（原件）：xxxx_n.jpg

是否有要传递的参数来获取中型或大型版本的缩略图？

我尝试使用**'type'**参数*（例如个人资料图片）*，但我总是返回**小**（**'_s.jg'**）版本。

谢谢！**

# common-lisp - 如何在 clisp 2.33 中创建目录？

> ID：13570037
> 
> 赞同：1
> 
> 时间：2012-11-26T17:29:40.883
> 
> 标签：common-lisp, clisp

版本输出为：

```
GNU CLISP 2.33 (2004-03-17) (built 2004-05-24 16:21:45)
Software: GNU C 3.3.1 (cygming special) ANSI C program
Features: (CLISP ANSI-CL COMMON-LISP LISP=CL INTERPRETER SOCKETS GENERIC-STREAMS
LOGICAL-PATHNAMES SCREEN FFI UNICODE BASE-CHAR=CHARACTER PC386 WIN32) 
```

搜索会出现 EXT:MAKE-DIRECTORY 但在此版本上不起作用。

我知道这是一个相当旧的版本，但这是我目前所拥有的，我在尝试使用最新版本时遇到了其他问题。

我想要一些可以为完整路径创建所有目录的东西，但即使只是能够创建一个目录也会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:42:09.420

`foo`在当前工作目录中创建目录：

```
(ensure-directories-exist "foo/") 
```

它还可以为您创建一个完整的目录结构：

```
(ensure-directories-exist "/tmp/lisp/rulez/") 
```

注意，最后的斜线很重要，没有它就行不通。

另一件事是您可能没有`EXT:MAKE_DIRECTORY`正确使用。如果您只是将带有目录名称的字符串传递给它，那么它将不起作用。你需要像这样使用它：

```
 (ext:make-directory (make-pathname :directory '(:relative "foobar"))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:38:19.690

[CLISP 2.44 (2008-02-02)](http://clisp.hg.sourceforge.net/hgweb/clisp/clisp/raw-file/ae1e20274e3c/src/NEWS)重命名`EXT:MAKE-DIR`为`EXT:MAKE-DIRECTORY`.

使用[`ENSURE-DIRECTORIES-EXIST`](http://www.lispworks.com/documentation/HyperSpec/Body/f_ensu_1.htm)或`EXT:MAKE-DIR`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:42:23.837

奇怪的是你没有 EXT:MAKE-DIRETORY。2004 年是“旧的”，但就 CLISP 而言，它并没有那么旧，而 EXT:MAKE-DIRECTORY 是非常基本的功能。也许出于某种奇怪的原因，这个 CLISP 是专门在没有它的情况下构建的。

另一种解决方案是调用命令行（EXT:SHELL 和朋友），但如果您没有 EXT:MAKE-DIRECTORY，也许您也不会拥有这些。另外，这将更多地依赖于平台（例如命令依赖于平台），并且集成度不高。但这是可能的（假设它们也存在）。

有没有可能升级 CLISP？

# python - 在嵌入式 python 中创建新的 None 对象

> ID：13570040
> 
> 赞同：5
> 
> 时间：2012-11-26T17:29:51.213
> 
> 标签：python, c, null, embedding

我正在为 Python 模块编写一个简单的 C 包装器。我需要做的是创建一个`PyObject*`代表`None`. 我不知道该怎么做。是否有一个简单的函数将返回一个`PyObject*`指向`None`，类似于`PyTuple_New`返回一个`PyObject*`指向新元组或 PyString_FromString` 返回一个指向 python 字符串的方法？

**注意**是否有可能，当调用如下函数时，传递 C`NULL`会起作用？例子：

```
//pFunc points to a function with 2 arguments
PyObject *pArgs = PyTuple_New(2);
PyTuple_SetItem(pArgs, 0, PyString_FromString("hello"));
PyTuple_SetItem(pArgs, 1, NULL); // <--- will this create a python object representing None?
pValue = PyObject_CallObject(pFunc, pArgs); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T17:33:40.007

根据[文档](http://docs.python.org/2/c-api/none.html)，`None`是一个单例，可以从 C 代码中访问`Py_None`。

> `PyObject* Py_None`Python`None`对象，表示缺乏价值。这个对象没有方法。在引用计数方面，它需要像任何其他对象一样对待。
> 
> `Py_RETURN_NONE`正确处理`Py_None`从 C 函数中返回的内容。

# php - 防止直接访问 php 文件并只允许一个域

> ID：13570045
> 
> 赞同：2
> 
> 时间：2012-11-26T17:29:57.470
> 
> 标签：php

首先，如果我在搜索时已经问过这个问题并且找不到确切的问题和答案，我深表歉意。

所以让我们开始我想强制.mp3文件下载而不是播放因此我在download.php中使用以下代码

```
 <?php
/**
 * Download the mp3 file.
 */
$file_name = $_GET["filename"];
$file_url = $_GET["fileurl"];

header("Content-Description: File Transfer");
header('Content-type: application/mp3');
header("Content-Transfer-Encoding: Binary");
header("Content-disposition: attachment; filename=\"".$file_name."\"");
readfile($file_url);
exit; 
```

因此，当用户单击目标为[http://www.example.com/download.php?filename=example.mp3&url=http://www.example.com/example.mp3](http://www.example.com/download.php?filename=example.mp3&url=http://www.example.com/example.mp3)的链接时，可以保存文件。

所以我想要的是防止直接访问文件[http://www.example.com/download.php](http://www.example.com/download.php)

并允许用户使用 url 下载文件：[http ://www.example.com/download.php?filename=example.mp3&url=http://www.example.com/example.mp3](http://www.example.com/download.php?filename=example.mp3&url=http://www.example.com/example.mp3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:30:15.697

首先，盲目地`readfile()`从请求中定义的参数调用会带来巨大的安全风险。

我的建议是只接受文件名，然后构建一个包含文件名和 mp3 文件夹路径的完整文件路径。然后确保文件存在，然后执行`readfile()`

*注意*您的 mp3 文件夹应该在您的公共 html 文件夹之外，或者如果不是，至少为您的 Web 服务器配置一个访问规则，以防止直接访问该文件夹。

其次，防止在没有参数的情况下访问您的 php 文件的唯一方法是使用重写规则（如果您的 Web 服务器支持它）

一个更简单的方法可能是检查是否没有文件名参数，然后有一个默认行为，即重定向到主页等。这也可能是默认行为指定文件不存在。

最后，我有一个你可能会觉得有用的 GitHub 项目——如果没有别的想法的话：

[https://github.com/iNamik/PHP-Download-Tracker](https://github.com/iNamik/PHP-Download-Tracker)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:07:15.103

你的意思是这样的吗？

```
if($_GET['filename'] == ''){
         header("Location: http://someLocation.com/");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:33:19.933

如果您使用的是 apache 服务器，您可以使用 .htaccess 拒绝访问某些文件。

这是您可以添加到`.htaccess`文件中的示例：

```
<Files /example.mp3>
    Order Allow,Deny
    Allow from all
</Files> 
```

# svg - 使用 d3js 绘制简单的线条

> ID：13570048
> 
> 赞同：4
> 
> 时间：2012-11-26T17:30:08.377
> 
> 标签：svg, line, d3.js

我正在尝试使用 d3.svg.line() 使用 d3js 绘制线条，但没有成功。

```
var line = d3.svg.line()
    .x(function(d) { return Math.random() * 1000 })
    .y(function(d) { return Math.random() * 1000});

svg.selectAll("path")
        .data([1,2,3,4,5,6]).enter()
        .append("path")
            .attr("d", line) # line generator 
            .attr("class", "line")
            .style("stroke", "black" ); 
```

我故意插入 gğıgğı 看看它是否会出错，但我没有收到任何错误。似乎没有调用 x 和 y 函数。不管有没有 gğıgğı 我设法做的就是创建空路径元素。

```
<path class="line"></path> 
```

如果我将线路发生器“线路”替换为

```
"M0,0l100,100" 
```

线条绘制成功。

示例代码位于[http://jsfiddle.net/99mnK/1/](http://jsfiddle.net/99mnK/1/)

我在这里做错了什么？

**编辑** 工作版本位于[http://jsfiddle.net/99mnK/2/](http://jsfiddle.net/99mnK/2/)。似乎 d3.svg.line().data 需要一个二维数据数组，例如

```
[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]] 
```

代替

```
[1,2,3,4,5,6] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T00:26:52.187

`d3.svg.line()`其本身并不完全适用于选择器。因此，您应该只使用一组值来调用它——而不是`.attr()`像您正在做的那样将它作为函数传递给函数。

所以，假设你有：

```
var array = [1,2,3,4,5,6]
var line = d3.svg.line()
    .x(function(d) { return Math.random() * 1000 })
    .y(function(d) { return Math.random() * 1000}); 
```

然后，要获得具有 6 个随机点的路径描述，您只需要：

```
line(array); 
```

并且，将其应用于 svg `path`：

```
.append('path')
.attr('d', line(array)) 
```

您编辑的小提琴工作的原因是您拥有二维数组绑定，因为您的`line`函数正在使用数组的每个子元素调用：

```
.line([1,1])
.line([2,2])
.line([3,3]) 
```

这就解释了为什么您看到的线条仅用 2 个点绘制，而不是您可能预期的 6 个点。

最后，这是一个编辑过的小提琴，展示了如何绘制 6 条路径，因为您的示例可能试图这样做：http: [//jsfiddle.net/mharen/3cv3T/5/](http://jsfiddle.net/mharen/3cv3T/5/)

# android - android布局中的滚动功能

> ID：13570049
> 
> 赞同：0
> 
> 时间：2012-11-26T17:30:26.237
> 
> 标签：android, android-layout, scrollview, android-linearlayout, android-scrollview

在我的应用程序中，我想提供在屏幕上滚动整个布局的功能。在这里，我还在 ScrollView 中包装了 Linearlayout，但它不提供滚动功能。以下是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/ScrollView01"
    >

<LinearLayout  
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical"
  android:paddingTop="50dp"
  android:weightSum="1"
  android:layout_marginTop="67dp"
  >

    <ImageView 
        android:id="@+id/artistImageView"
        android:layout_width="fill_parent"
        android:layout_height="150dp"
        android:paddingTop="10dp"
        android:layout_marginTop="67dp"
        android:background="#000000"
    />

    <TextView
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:text="BIOGRAPHY"
        android:textColor="#eeeeee"
        android:background="#000000"
        android:id="@+id/txt1"
    />          
    <ImageView
        android:src="@drawable/separator_bio"
        android:scaleType="fitXY"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"            
        android:background="#000000"
        android:id="@+id/sep1"
    />                  
    <TextView  
        android:id="@+id/artistView" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"         
        android:textStyle="bold"
        android:textColor="#ffffff"              
        android:paddingLeft="10dp"
        android:paddingRight="5dp"        
        android:background="#000000"
    />
</LinearLayout>
</ScrollView> 
```

请提出解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:16:55.743

我建议将线性布局中的内容高度更改为 wrap_content

```
<LinearLayout  
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:orientation="vertical"
   android:paddingTop="50dp"
   android:weightSum="1"
   android:layout_marginTop="67dp"
   > 
```

包装内容的原因是这样滚动视图将填满屏幕并且线性布局可以自由溢出。这个溢出就是你要滚动的内容

**编辑：**

在查看您的代码之后，您实际上并不需要该`android:weightSum="1"`行，因为您从不使用重量来定义任何孩子的身高。此外，当使用 wrap_content 时，父视图中永远不会有剩余空间，因此重量不会像您期望的那样工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:07:11.753

你上面的代码对我有用意味着滚动在你上面的代码中从我这边工作。

如果您这边此代码不起作用，请尝试此操作。

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"

  >
<ScrollView

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/ScrollView01"
    >

<LinearLayout  
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  android:paddingTop="50dp"
  android:weightSum="1"
  android:layout_marginTop="67dp"
  >

    <ImageView 
        android:id="@+id/artistImageView"
        android:layout_width="fill_parent"
        android:layout_height="150dp"
        android:paddingTop="10dp"
        android:layout_marginTop="67dp"
        android:background="#000000"
    />

    <TextView
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:text="BIOGRAPHY"
        android:textColor="#eeeeee"
        android:background="#000000"
        android:id="@+id/txt1"
    />          
    <ImageView
        android:src="@drawable/separator_bio"
        android:scaleType="fitXY"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"            
        android:background="#000000"
        android:id="@+id/sep1"
    />                  
    <TextView  
        android:id="@+id/artistView" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"         
        android:textStyle="bold"
        android:textColor="#ffffff"              
        android:paddingLeft="10dp"
        android:paddingRight="5dp"        
        android:background="#000000"
    />
</LinearLayout>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:05:34.220

这是适用于我的应用程序的最终代码。

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:id="@+id/ScrollView01"
    android:layout_marginTop="65dp"
    android:layout_marginBottom="163dp"
    android:background="#000000"
    android:scrollbarStyle="insideInset"
    >   
<LinearLayout  
  android:layout_width="wrap_content"
  android:layout_height="250dp"
  android:orientation="vertical"  
  >
  <TextView android:id="@+id/artistName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textColor="#ffffff"
        android:textSize="16px"
  />
  <ImageView 
        android:id="@+id/artistImageView"   
        android:layout_width="fill_parent" 
        android:layout_height="150dp"        
        android:layout_marginTop="2dp"
        android:paddingTop="10dp"
        android:paddingLeft="100dp"
        android:background="#000000"

        android:layout_marginRight="50dp"

  />

    <TextView
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:text="BIOGRAPHY"
        android:textStyle="bold"
        android:textColor="#ffffff"

        android:background="#000000"
        android:id="@+id/txt1"
    />          
    <ImageView
        android:src="@drawable/separator_bio"
        android:scaleType="fitXY"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"            
        android:background="#000000"
        android:id="@+id/sep1"
        android:paddingBottom="2dp"
    />        

    <TextView  
        android:id="@+id/artistView" 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"         
        android:textStyle="bold"
        android:textColor="#eeeeee"              
        android:paddingLeft="20dp"                       
        android:background="#000000"                        
        android:lines="25"
      android:layout_marginRight="-20dp"  

    />
</LinearLayout>
</ScrollView>
</LinearLayout> 
```

# javascript - 重叠不同颜色的 TEXTAREA 以获得语法高亮显示...流畅的复制/粘贴——可能吗？

> ID：13570051
> 
> 赞同：1
> 
> 时间：2012-11-26T17:30:31.197
> 
> 标签：javascript, jquery, html, textarea, syntax-highlighting

我希望能够在网页中突出显示少量可编辑文本，而前景色只有一些变化。 *（让我们说三个，为了争论。）*

[我对在线富文本编辑器](http://en.wikipedia.org/wiki/Online_rich-text_editor)的恼人经历让我认为，在他们松散的结局中统治是不值得的。所以我有了一个古怪的想法，将几个固定宽度的字体`<textarea>`元素叠加在一起，并让它们保持同步。每个都有不同的前景色，并且通过背景透明度，您只需在不应该打印某个图层的地方留下空隙。浏览器会进行合成，也许一切都会好起来的。

在 Opera、Chrome、Firefox 和 Safari 中进行的一些探索性测试让我惊讶地发现这确实有效（听起来很疯狂）。但是我想使用非常纯文本的最大原因之一是复制和粘贴是万无一失的。然而，当文本像这样被分解成层时，用户无法选择并以原始形式获取所有文本。

我的第一个冲动是堆叠在顶层文本层上，该层被同步以包含来自所有层的内容，但其颜色是透明的。再一次，它“工作”了......但不幸的是，几乎所有浏览器都从活动的 textarea 颜色提示插入点颜色。这意味着插入符号变得不可见，在某些浏览器中，您选择的文本也是如此。（！）

因此，我向那些比我了解更多的人征求意见。我可以以跨浏览器的方式挂钩这样的堆栈，以便在您制作它时以及当用户“复制”时获得合并文本时选择是可读的？有没有人尝试过这样的事情？或者是否有证据证明*“这是一个糟糕的想法，你无法让它发挥作用”*？如果我可以在选择更改时获得跨浏览器通知，我可以将合并的字符注入到选择内的点处选择的图层中。：-/

*（哦，我们编织了多么纠结的网……）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:32:01.867

馊主意。你不想去那里。

您正在尝试“重新发明轮子”。一些项目已经解决了这个问题。他们的解决方案被广泛使用，因此在接下来的几周内你能想到的任何东西都更加成熟。

如果您选择一个在线富编辑器并学习如何以您想要的方式处理它，您将花费**更少的时间。**

您应该阅读[Jeff Atwood 的帖子，名为“不要重新发明轮子，除非您计划学习更多关于轮子的信息”](http://www.codinghorror.com/blog/2009/02/dont-reinvent-the-wheel-unless-you-plan-on-learning-more-about-wheels.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:34:39.517

使用现有解决方案会快得多。请看ACE编辑器：

[http://ace.ajax.org](http://ace.ajax.org)

ACE 是一个用 JavaScript 编写的可嵌入代码编辑器。它与 Sublime、Vim 和 TextMate 等原生编辑器的特性和性能相匹配。它可以很容易地嵌入到任何网页和 JavaScript 应用程序中。ACE 被维护为 Cloud9 IDE 的主要编辑器，并且是 Mozilla Skywriter (Bespin) 项目的继承者。

具体来说，这个富文本编辑器具有显示语法突出显示和显示错误/行号等功能。

# facebook - Facebook 无法从标签应用程序 url 传递 $_GET var

> ID：13570058
> 
> 赞同：0
> 
> 时间：2012-11-26T17:31:32.530
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我目前在我的 Facebook 粉丝页面上设置了一个 Facebook 标签。

似乎我无法在我的标签应用程序 url 中定义任何变量，例如：

www.facebook.com/pages/myApp/177845772355947?sk=app_379422318804869&share=var_i_want_to_pass_via_GET_to_PHP

所以在我的 PHP 中，我只是试图做一个

```
echo $_GET["share"]; 
```

但是，似乎我无法从标签应用程序 url 传递任何内容。

我对画布页面网址做了同样的事情，例如： [http ://apps.facebook.com/myCanvasApp/?share=var_i_want_to_pass_via_GET_to_PHP](http://apps.facebook.com/myCanvasApp/?share=var_i_want_to_pass_via_GET_to_PHP)

在这里，我可以很容易地回应它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:25:31.320

您需要使用`app_data`.`signed_request`

这是 Facebook 开发者网站上的两个页面，涵盖了您想要的内容。

[https://developers.facebook.com/docs/reference/login/signed-request/](https://developers.facebook.com/docs/reference/login/signed-request/) [https://developers.facebook.com/docs/appsonfacebook/pagetabs/#integrating](https://developers.facebook.com/docs/appsonfacebook/pagetabs/#integrating)

# jquery - 引导菜单 - 两个相互切换的折叠按钮？意思是，一次只能打开 1 个

> ID：13570062
> 
> 赞同：1
> 
> 时间：2012-11-26T17:31:56.187
> 
> 标签：jquery, twitter-bootstrap

我是第一次使用 Twitter Bootstrap。除了我的顶部导航需要调整外，一切似乎都正常工作。

我们有一个菜单按钮，可以打开主导航下拉菜单。然后我们有一个搜索按钮，它打开一个搜索表单下拉菜单。

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar menubutton" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="menu">Menu</span>
      </a>
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-search"><img src="images/search_03.png">Search</a>

      <div class="nav-collapse collapse">
        <ul class="nav">
          <li><a href="#">About Us</a></li>
          <li><a href="#">Research &amp; Innovation</a></li>
          <li><a href="#">Our Products</a></li>
          <li><a href="#">Responsibility</a></li>
          <li class="subnav"><a href="#" >Careers</a></li>
          <li class="subnav"><a href="#" >Newsroom</a></li>
          <li class="subnav"><a href="#" >Contact Us</a></li>
          <li class="navfoot">This is a mobile version of our website<br/>
          <a href="#">View full site</a></li>
        </ul>
      </div><!--/.nav-collapse -->
      <div class="nav-search collapse">
            <div class="search_box">
            <form action="" method="post">
                <input type="text" value="Enter Search"><a href="#">Search</a>
            </form>
            </div><!-- end search_box -->
      </div><!--/.nav-search -->
    </div>
  </div>
</div>​ 
```

我在这里创建了一个 jsfiddle：http: [//jsfiddle.net/vsF6m/3/](http://jsfiddle.net/vsF6m/3/)

客户一次只希望打开一个下拉菜单。现在，功能是每个按钮都会自行切换，但不会关闭另一个打开的下拉菜单。

一定有我想念的东西。我需要重建导航栏的组装方式吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:51:03.603

在此处查看有效的 jsfiddle：http: [//jsfiddle.net/gNUEx/](http://jsfiddle.net/gNUEx/)

```
$('.container a').click(function(){ 
  var $target = $($(this).data('target')); 
  if(!$target.hasClass('in'))
    $('.container .in').removeClass('in').height(0);    
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:42:41.670

这里有更多关于 Bootstrap 如何使用 Collapse 插件实现手风琴功能的内容。我的第一个倾向是建议仅出于您的目的使用手风琴标记，但不幸的是，一些用于设置手风琴功能的标记（即 class `.accordion-group`）具有与之相关联的视觉样式，因此使用起来可能更容易针对您需要的代码的淡化版本。

这是相关的片段：

```
$('.navbar').on('show', function () {
  var actives = $(this).find('.collapse.in')
    , hasData

  if (actives && actives.length) {
    hasData = actives.data('collapse')
    if (hasData && hasData.transitioning) return
    actives.collapse('hide')
    hasData || actives.data('collapse', null)
  }
}) 
```

这将关闭在委托父级中找到的任何其他打开`collapse`元素，在本例中为`.navbar`. 在实践中，我建议使用 ID 而不是类来选择委派的父级。

## [JSFiddle](http://jsfiddle.net/mmfansler/fzbsp/)

# javascript - rake assets:precompile 在 Windows 8 上的 rails 3.2.8 中失败

> ID：13570063
> 
> 赞同：1
> 
> 时间：2012-11-26T17:31:57.300
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, rake

在`bundle exec rake assets:precompile`我们的 rails 3.2.8 应用程序中，它失败并出现以下错误：

```
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!

  (in c:/D/code/rails_proj/biz-tools/app/assets/javascripts/application.js)
c:/Ruby193/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:142:in `exec_runtime'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec' 
```

............

```
c:/Ruby193/bin/rake:23:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [c:/Ruby193/bin/ruby.exe c:/Ruby193/bin/rak...]
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call' 
```

application.js 中只有两个数据选择器，它们在启动应用程序时工作正常。什么可能导致此失败？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T22:49:39.993

我建议尝试`rubyracer`宝石而不是`execjs`过去的经验。

或者，尝试从您的 Gemfile 中注释掉`jquery-rails`或`jquery-ui-rails`gems 以查看这些是否会导致您出现问题。您始终可以直接放入您`jquery`的`jquery-ui`资产中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T01:00:52.283

问题是 execjs 在 Windows 8 上不起作用。这是一篇[关于](https://github.com/sstephenson/execjs/issues/81)如何修复 Windows 8 的 execjs 运行时的帖子。但这个修复似乎不适用于 assets:precompile。我们可能不得不等待 Windows 8 的 execjs 更新。

# c++ - 标准是否指定按值捕获的 lambda 是捕获父对象还是仅捕获正在访问的成员？

> ID：13570068
> 
> 赞同：3
> 
> 时间：2012-11-26T17:32:05.877
> 
> 标签：c++, c++11, lambda

第一个例子：

```
struct State
{
    SomeLargeObjectThatTakesTimeToCopy obj;
    int x;
} myState;

auto f = [=]() { return myState.x * 2; }; 
```

整个`myState`结构是否被复制，即使从技术上讲，只`x`使用了成员？

第二个例子：

```
struct State
{
    struct SubState
    {
        int x;
    };

    std::vector<SubState> subStates;
} myState;

auto f = [=]() { return myState.subStates[0].x * 2; }; 
```

同样，整个`myState`对象是否被复制？如果没有，那么整个`subStates`成员都会被复制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:52:00.657

假设`myState`是一个局部变量（在函数体中定义），`myState`会被捕获；lambda 只能捕获整个变量，而不是点点滴滴。

如果您按原样获取示例，则不会捕获任何内容；lambdas 无法捕获全局变量。

# spring - 如何在 Spring 中注入静态属性？

> ID：13570070
> 
> 赞同：1
> 
> 时间：2012-11-26T17:32:12.993
> 
> 标签：spring, spring-mvc, multilingual

我正在尝试使用一些静态方法和属性创建一个实用程序类，问题是这些属性应该从messages.properties 文件中加载，用于多语言porpouse。

我想我应该使用 MessageSourceAware 但如何保持方法静态？我越来越迷路了。。

还有更多，我怎样才能获得语言环境？我们正在使用 SessionLocaleResolver 但我认为在 jsp 中会自动加载。我怎样才能在课堂上得到它？

[谢谢，我是春天的新手]

* * *

我会试着解释得更好一点。

我有一个类定义为

```
public MyClass {
    protected static final MY_PROP = "this is a static property";

    protected static String getMyProp() {
        return MY_PROP;
    }
} 
```

我想从我的messages.properties文件中注入MY_PROP，这取决于语言环境，比如

```
public MyClass {
    protected static final MY_PROP = messageSource.getMessage("my.prop", locale);

    protected static String getMyProp() {
        return MY_PROP;
    }
} 
```

这有可能以某种方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:35:41.307

您是否考虑过尝试使用[MethodInvokingFactoryBean](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/config/MethodInvokingFactoryBean.html)

**或者**，您可以通过为 applicationContext.xml 注入静态属性来获得一些帮助，如下所示：-

```
 <bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod" value="de.inweb.blog.BadDesign.setTheProperty"/>
    <property name="arguments">
        <list>
            <ref bean="theProperty"/>
        </list>
   </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:51:18.533

好的，最后我实现了 MessageSourceAware，删除了静态引用并注入了我的类。

所以像：

```
public MyClass implements MessageSourceAware {
    // this is automatically injected by Spring
    private MessageSource messageSource;
    public void setMessageSource(MessageSource messageSource) {
        this.messageSource = messageSource;
    }
    // ###################

    protected String getMyProp(Locale locale) {
        return messageSource.getMessage("my.prop", null, locale);
    }
} 
```

在我的 Rest 服务中，由于 RequestMapping，Locale 由 Spring 自动注入。我还注入了整个类以避免静态方法。

```
@Controller
public class Rest {

    @Autowired
    private MyClass myClass;

    @RequestMapping(method = RequestMethod.POST, value="/test", headers="Accept=application/json")
    public String myMethod(Locale locale) {
        return myClass.getMyProp(locale);
    }
} 
```

这是有效的。:)

# git - 来自远程服务器的 Gitolite 身份验证问题

> ID：13570074
> 
> 赞同：1
> 
> 时间：2012-11-26T17:32:21.923
> 
> 标签：git, deployment, gitolite

我在一个服务器上从另一个服务器上运行一个简单的命令（这是一个更大的部署过程问题的一部分）时遇到问题。

用户gitolite：

当它返回时，我可以使用该用户 ssh 到盒子上

```
X@repo2:~$ ssh gitolite@repo1
PTY allocation request failed on channel 0
hello repo2, this is gitolite v2.1-19-g36dfb85 running on git 1.7.0.4
the gitolite config gives you the following access:
     R   W      proto_projectname_rails
    @R_ @W_     testing
Connection to repo1.x closed. 
```

但是，当我尝试运行 git ls-remote ssh://gitolite@repo1.x:2011/proto_projectname_rails 时，它会提示输入密码。

我的 gitolite.conf 有线条

```
repo    proto_projectname_rails
    RW+     =   MBP
    RW+     =   repo2 
```

并且公钥在我的 keydir 中，具有相同的名称，例如 repo2.pub。我也跑了

```
gl-setup repo2.pub 
```

它更新了 authorised_keys 以在其中包含 repo2。

我完全不知道我还需要做什么。如果我从本地机器运行相同的命令。即从 MBP 成功完成。

对此的任何想法都将受到欢迎。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:59:02.463

如果`ssh gitolite@repo1`有效，那么这就是您必须用于 gitolite 的 ssh 地址。
Gitolite 本身将调用 git，并且服务器上的 ssh 设置可能会在内部`gitolite@repo1.x:2011`用于该 git 调用。

但对于最终用户，gitolite 的客户端，`git ls-remote ssh://gitolite@repo1/proto_projectname_rails`将起作用。

# c# - DrawableGameComponent 作为库，如何处理内容？

> ID：13570075
> 
> 赞同：2
> 
> 时间：2012-11-26T17:32:21.803
> 
> 标签：c#, windows-phone-7, xna

我正在尝试为我的游戏创建一个模块，我的想法是能够在我的所有游戏中使用它。

所以我的 lib 项目有自己的内容文件夹，一切都很好，但它与宿主项目的内容文件夹崩溃。

这是我的组件（它是它自己的项目，我参考链接到主机项目（手机应用程序））：

```
namespace FPSComponent
{
    public class FPS : DrawableGameComponent
    {
        private SpriteBatch spriteBatch;

        SpriteFont normal;
        Texture2D headerBackground;

        public FPS(Game game)
            : base(game)
        {
            spriteBatch = new SpriteBatch(Game.GraphicsDevice);

            string tempRootDirectory = Game.Content.RootDirectory;
            Game.Content.RootDirectory = "FPSComponentContent";

            headerBackground = Game.Content.Load<Texture2D>("header-background");

            normal = Game.Content.Load<SpriteFont>("normal");

            //Game.Content.RootDirectory = tempRootDirectory; <-- does not work
        }

        public override void Update(GameTime gameTime)
        {
            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        public override void Draw(GameTime gameTime)
        {
            //GraphicsDevice.Clear(Color.CornflowerBlue);

            spriteBatch.Begin();

            spriteBatch.Draw(headerBackground, Vector2.Zero, Color.White);

            spriteBatch.DrawString(normal, "FPS COMPONENT", new Vector2(20, 20), Color.White);

            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

我试图做的是创建一个独立的组件来导入我的项目，这主要是为了学习目的......而不是一个工作的 FPS 示例 atm :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:13:09.833

我认为您必须阅读这篇文章[Content Pipeline MSDN](http://msdn.microsoft.com/en-us/library/bb447745.aspx)

重点是，当您在 Visual Studio 上按 F5 时，它将编译您的项目和您的资产。

通过使用`Game.Content.Load<Texture2D>`XNA 将尝试找出一个 .xnb

当 Visual Studio 编译您的项目时，他正在将您的 .xnb 创建到特定的文件夹中。

您并没有真正将 .png 或 .jpg 文件直接加载到您的游戏中：)

您必须首先将新资产编译成 .xnb 文件（一种序列化过程）

这是一个类似的问题[https://gamedev.stackexchange.com/](https://gamedev.stackexchange.com/questions/9748/xna-am-i-screwing-up-the-loadcontent-for-texture2d)

# jquery - 在页面之间导航时如何在单击后保持打开 Div

> ID：13570081
> 
> 赞同：-2
> 
> 时间：2012-11-26T17:32:30.460
> 
> 标签：jquery

我在想是否有办法使用 jquery 而不是任何服务器端语言来实现 cookie。您认为 jquery 是否适合该选项或第二个选项？

如果您能向我展示适当的参考或教程，我将不胜感激。还是非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:05:45.280

不是一个完整的答案，一些指导。

使用 jQuery cookie 插件。[在这里](https://github.com/carhartl/jquery-cookie)。

当用户打开一个 div 时，存储它的状态

```
<div id="mydiv1" class="collapsible">
    <h3>Title</h3>
    <div class="contents" style="display:none">Bah!</div>
</div>

$('.collapsible h3').on('click', function(){
    var ref=$(this).parent().attr('id');
    $.cookie(ref, "open");
}); 
```

然后在 document.ready 上，您可以提取值：

```
if ($.cookie("mydiv1")=='open') $('#mydiv1 .contents').show(); 
```

当然，您会将所有 div 的状态存储在一个 cookie 中并遍历它们以显示应该显示的内容。

# url - AppleScript 读取和保存网站内容 (API)

> ID：13570092
> 
> 赞同：1
> 
> 时间：2012-11-26T17:33:20.070
> 
> 标签：url, safari, applescript

我有一个 AppleScript 可以逐行读取 URL 并在 Safari 中打开它们。这个：

```
set thePath to (path to desktop as Unicode text) & "sites.txt"
set theFile to (open for access file thePath)
set theContent to (read theFile)
close access theFile

set theURLs to every paragraph of theContent

tell application "Safari"
    repeat with theURL in theURLs
        make new document
        set URL of front document to theURL
        delay 1
        repeat until ((do JavaScript "document.readyState" in front document) is "complete")
            delay 30
        end repeat
        close front document
    end repeat
end tell 
```

在此示例中，我使用这些 URL - 它们与我的用例非常相似，我无法分享。

[http://www.omdbapi.com/?t=True%20Grit&y=1969](http://www.omdbapi.com/?t=True%20Grit&y=1969)

[http://www.omdbapi.com/?t=阿凡达&y=2009](http://www.omdbapi.com/?t=Avatar&y=2009)

这个 AppleScript 对我来说很好用，但我无法将内容写回桌面上的 txt 文件，按请求请求。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:33:39.727

尝试：

```
set thePath to (path to desktop as text) & "sites.txt"
set outPath to quoted form of (POSIX path of (path to desktop as text) & "sites content.txt")

set theUrls to every paragraph of (read file thePath)

set myContent to {}
repeat with aURL in theUrls
    set end of myContent to aURL & return
    set pageContent to do shell script "curl " & aURL
    set end of myContent to pageContent & return & return
end repeat

do shell script "echo " & quoted form of (myContent as text) & " >> " & outPath 
```

# asp.net-mvc - 我想了解使用按值传递的模型绑定是如何工作的

> ID：13570093
> 
> 赞同：0
> 
> 时间：2012-11-26T17:33:19.240
> 
> 标签：asp.net-mvc

我认为这里有一个棘手的问题！

我想了解如果这个 Cart 对象是如何使用模型绑定器按值传递的，那么它如何影响会话中的实际值？

```
 public RedirectToRouteResult AddToCart(Cart cart, int productId, string returnUrl) {
        Product product = repository.Products
            .FirstOrDefault(p => p.ProductID == productId);

        if (product != null) {
            cart.AddItem(product, 1);
        }
        return RedirectToAction("Index", new { returnUrl });
    } 
```

希望这能解释我的问题！

感谢您的帮助

细节

此粗体代码不会影响会话中的自定义配置文件

```
 [AllowAnonymous]
    [HttpPost]
    public ActionResult Register(RegisterModel model, CustomProfile customProfile)
    {
        if (User.Identity.IsAuthenticated)
            return RedirectToAction("Index", "Home");
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus;

            membershipProvider.CreateUser(model, null, null, true, null,
                                          out createStatus);

            if (createStatus == MembershipCreateStatus.Success)
            {
                const string message = "You have successfully reigestered, and you are now logged in.";
                authProvider.SetAuthCookie(model.UserName, false /* createPersistentCookie */);

                var newCustomProfile = new CustomProfile(model.UserName);
                var db = new CrowdFundingDB();

                **customProfile = customProfileProvider.Create(newCustomProfile);** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:51:55.023

`Cart`不是*值类型*，而是*引用类型*。

将它作为参数传递不会复制对象，该方法接收对实际对象的引用的副本。它将通过复制的引用访问同一个对象。

另请参阅：[ByRef 与 ByVal 澄清](https://stackoverflow.com/questions/4383167/byref-vs-byval-clarification)

# android - 在 Android 中将 OpenGL 纹理分层到 2D 平面

> ID：13570095
> 
> 赞同：1
> 
> 时间：2012-11-26T17:33:24.533
> 
> 标签：android, opengl-es

所以，我一直在做一个使用 Android 的 OpenGL 库等的项目，我遇到了一个症结所在。部分原因是我缺乏 OpenGL 经验，部分原因是计划好旧的过度工作问题。问题是这样的：我有两个位图，我需要将它们作为纹理叠加到一个简单的 2D 正方形中（使用链式三角形）。

现在，我知道将两个纹理绑定到 GL10.GL_TEXTURE_2D 只会把事情弄得一团糟（IE，不起作用），所以我正在寻找一种方法来处理这个问题。现在我加载纹理如下：

```
 public void loadGLTexture(GL10 gl, Context context) {
    // loading texture
    Bitmap bitmap;
    Bitmap corn;
    boolean lastBlack = false;
    try{
        FileInputStream fis = context.openFileInput(TEMP_FILE);
        BufferedInputStream buffer = new BufferedInputStream(fis);

        Bitmap immutableBitmap = BitmapFactory.decodeStream(buffer);

        if(!IsPowerOfTwo(immutableBitmap.getWidth()) | !IsPowerOfTwo(immutableBitmap.getHeight())){
            int nearestPowerWidth = pow2(immutableBitmap.getWidth());
            int nearestPowerHeight = pow2(immutableBitmap.getHeight());

            bitmap = Bitmap.createScaledBitmap(immutableBitmap,nearestPowerWidth,nearestPowerHeight,false);
        } else{
            bitmap = immutableBitmap.copy(Bitmap.Config.ARGB_8888, true);
        }

        int [] pixels = new int[bitmap.getWidth() * bitmap.getHeight()];
        Bitmap filterer = bitmap.copy(Bitmap.Config.ARGB_8888, true);

        filterer.getPixels(pixels, 0, filterer.getWidth(), 0, 0, filterer.getWidth(), filterer.getHeight());
        //int stepper = 0;

        for( int x = 0; x < pixels.length; x++ ) {
            //Log.v("MEE",String.format("%d",pixels[x]));
            if(pixels[x] == Color.WHITE){

                pixels[x] = Color.BLACK;
                lastBlack = true;
            } else{
                /*if(lastBlack){
                    pixels[x] = Color.rgb(128,153,0);
                    lastBlack = false;
                } else{
                    pixels[x] = Color.rgb(128,153,0);
                }*/
                pixels[x] = Color.TRANSPARENT;

            }
        }
        bitmap = Bitmap.createBitmap( pixels, filterer.getWidth(), filterer.getHeight(), Bitmap.Config.ARGB_8888 );
         corn = BitmapFactory.decodeResource(context.getResources(),R.drawable.corn);
    }catch(Exception e){
        Log.e("Crop Object", e.toString());
         corn = BitmapFactory.decodeResource(context.getResources(),R.drawable.corn);
         bitmap = BitmapFactory.decodeResource(context.getResources(),R.drawable.corn);
    }

        // generate one texture pointer

        gl.glGenTextures(2, textures,0);

        //Create  Texture and bind it to texture 0
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[1]);
        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, corn, 0);

} 
```

然后它们被绘制：

```
public void draw(GL10 gl) {
    // bind the previously generated texture
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_CLAMP_TO_EDGE);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_CLAMP_TO_EDGE);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    //gl.glBindTexture(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE1);
    // Point to our buffers
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    // Set the face rotation
    gl.glFrontFace(GL10.GL_CW);

    // Point to our vertex buffer
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    // Draw the vertices as triangle strip
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

    //Disable the client state before leaving
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

} 
```

有人能指出我正确的方向吗？

# powershell - Powershell删除与条件不匹配的字符串中的文本

> ID：13570098
> 
> 赞同：1
> 
> 时间：2012-11-26T17:33:37.993
> 
> 标签：powershell, powershell-2.0

我有一个文本文件，我需要逐行浏览并删除引号中的任何文本且与以下值之一不匹配：

*   192.168.10.1
*   192.168.11.1
*   192.168.12.1
*   192.168.13.1

我的初始文件看起来像这样：

IPADDRESS “192.168.10.1” “192.168.11.1” “192.168.12.1” “192.168.13.1” “10.0.0.1”
IPADDRESS “192.168.10.1” “192.168.11.1” “127.0.0.1” “192.168.8.12.1” “192.168.8.12.1” 13.1"

我希望我的输出类似于以下内容：

IPADDRESS “192.168.10.1” “192.168.11.1” “192.168.12.1” “192.168.13.1”
IPADDRESS “192.168.10.1” “192.168.11.1” “192.168.12.1” “192.168.13.1”

我已经尝试使用 -replace 选项、正则表达式、使用 trim 选项、使用过滤器、使用 -match 选项，取得了不同程度的成功，但我一直在碰壁......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:48:00.877

您可以拆分线，使用正则表达式模式删除不需要的部分并重新组装线：

```
Get-Content ip.txt | Where-Object {$_} | Foreach-Object {
   $line=$_.Split()
   $line[0] + ' ' + ($line -match '"192\.168\.1[0-3]\.1"') -join ' '
} 
```

# regex - 正则表达式匹配uri路径，除了某个页面

> ID：13570106
> 
> 赞同：1
> 
> 时间：2012-11-26T17:34:14.950
> 
> 标签：regex, mod-rewrite, nginx

我正在尝试在 nginx 中编写一个正则表达式，它将匹配`/wp-admin`除`/wp-admin/admin-ajax.php`. 任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:36:32.927

使用否定前瞻，您可以排除该特定站点：

```
^/wp-admin(?!/admin-ajax\.php) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:30:15.193

```
location /wp-admin/ {
    # here is config for /wp-admin/* except /wp-admin/admin-ajax.php

    location = /wp-admin/admin-ajax.php {
        # here is config for /wp-admin/admin-ajax.php
    }
} 
```

或者

```
location /wp-admin/ {
    # here is config for /wp-admin/* except /wp-admin/admin-ajax.php
}

location /wp-admin/admin-ajax.php {
    # here is config for /wp-admin/admin-ajax.php
} 
```

# eclipse - JBOSS NoClassDefFoundError: org/ejbca/util/InterfaceCache

> ID：13570109
> 
> 赞同：1
> 
> 时间：2012-11-26T17:34:33.053
> 
> 标签：eclipse, jsf-2, jboss5.x

`NoClassDefFoundError`尝试在我的 JSF 项目中部署 EJBCA API 时出现错误。当我在一个简单的 Java 项目中部署它时，在 Java 构建路径中导入简单的类和 JAR 一切正常，但在 JSF 中却没有。

我试图从 EJBCA 文件夹中复制我想要的 jars 并放入`MyProject\WebContent\WEB-INF\lib`，但什么也没发生。

我必须做什么？

# ios - iOS开发需要Objective-C吗？

> ID：13570110
> 
> 赞同：2
> 
> 时间：2012-11-26T17:34:33.180
> 
> 标签：ios

> **可能重复：**
> [可以使用哪些编程语言来开发 iPhone、iPod Touch 和 iPad (iOs) 应用程序？](https://stackoverflow.com/questions/3949995/what-programming-languages-can-one-use-to-develop-iphone-ipod-touch-and-ipad-i)

我有很多相当简单的科学程序，我从 Basic 转换为 C。我想将它们放到 Apple App Store，只是想知道是否有必要先将它们转换为 Obj-C，或者 C代码可以作为开始吗？它们是简单的“获取用户输入”、“进行一些逻辑检查”、“进行计算”、“输出结果”类型的程序。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:51:27.397

Objective-C 底层有一个功能齐全的 C，你可以编写纯 C 代码并让它工作。

但是，我怀疑您是否能够将命令行应用程序发布到 App Store。您必须在 Xcode 中创建一个用户界面，这肯定会将 Objective-C 引入您的程序。话虽如此，只要您将程序变量（出口）连接到 UI 上的控件，并将 UI 按钮链接回程序的功能（操作/方法），您的函数的主要处理主体就可以是您的 C 的副本代码。

# ruby-on-rails - rake gems:install 抛出错误

> ID：13570115
> 
> 赞同：1
> 
> 时间：2012-11-26T17:35:00.623
> 
> 标签：ruby-on-rails, ruby, rubygems, rake

我正在尝试`queue-tip`使用以下指南在我的星号服务器上安装：http: [//queue-tip.rubyforge.org/install.html](http://queue-tip.rubyforge.org/install.html)

但是，我无法继续执行以下步骤，因为它会引发此错误：

*rake gems：安装 rake 中止！“抽象”的未定义方法“名称”：字符串任务：TOP => 环境*

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:45:05.010

要安装 gem，请使用`gem`命令，例如`gem install rails`. 如果您在 Rails 3.x 环境中，请以`Gemfile.rb`与已包含的其他格式类似的格式添加到文件中，然后`bundle install`从您的项目目录运行。

# jsf - 没有会话范围的 Richfaces 服务器端分页

> ID：13570116
> 
> 赞同：0
> 
> 时间：2012-11-26T17:35:01.620
> 
> 标签：jsf, pagination, richfaces

我正在使用 Richfaces 实现服务器端分页，但是使用 PaginatingDataModel 的实现需要将 bean 保存在 SessionScope 中。使用 JSF 2.0、RichFaces 4.4。参考以下网址：

[http://katzmaier.blogspot.in/2010/03/richfaces-server-side-pagination.html](http://katzmaier.blogspot.in/2010/03/richfaces-server-side-pagination.html) https://community.jboss.org/thread/204250

是否有任何替代实现来使用请求范围实现服务器端分页？通过服务器端分页，我的意思是通过执行查询而不是一次检索所有记录来获取每个页面的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:47:34.143

正如评论中回答的那样，您可以使用`ViewScoped`代替`SessionScoped`。这是自 JSF 2.0 以来可用的新范围，非常适合将数据服务器端保持更短的时间。

这是一个讨论 JSF 2.0 中的新特性的博客链接 JSF 2.0 中[的新特性](http://andyschwartz.wordpress.com/2009/07/31/whats-new-in-jsf-2/)

# scala - 在 scala 中映射转换（计算标签频率）

> ID：13570120
> 
> 赞同：2
> 
> 时间：2012-11-26T17:35:11.433
> 
> 标签：scala

我仍然不精通 scala，但我正在使用它来处理一些数据，这些数据是我从文件中读取到以下数据结构中的：

`Map[Id, (Set[Category], Set[Tag])]`

在哪里

```
type Id = String

type Category = String

type Tag = String 
```

本质上， 中的每个键`Map`都是与一组类别和一组标签相关联的实体的唯一 ID。

我的问题是：这是最好的（=最**有效**和最**惯用**的）计算方法：

*   标记所有实体的频率 ( `type TagsFrequencies = Map[Tag, Double]`)
*   每个类别的标签频率 ( `Map[Category, TagsFrequencies]`)

这是我的尝试：

```
def tagsFrequencies(tags: List[Tag]): TagsFrequencies =
  tags.groupBy(t => t).map(
    kv => (kv._1 -> kv._2.size.toDouble / tags.size.toDouble))

def computeTagsFrequencies(data: Map[Id, (Set[Category], Set[Tag])]): TagsFrequencies = {
  val tags = data.foldLeft(List[Tag]())(
    (acc, kv) => acc ++ kv._2._2.toList)
  tagsFrequencies(tags)
}

def computeTagsFrequenciesPerCategory(data: Map[Id, (Set[Category], Set[Tag])]): Map[Category, TagsFrequencies] = {

  def groupTagsPerCategory(data: Map[Id, (Set[Category], Set[Tag])]): Map[Category, List[Tag]] =
    data.foldLeft(Map[Category, List[Tag]]())(
      (acc, kv) => kv._2._1.foldLeft(acc)(
        (a, category) => a.updated(category, kv._2._2.toList ++ a.getOrElse(category, Set.empty).toList)))

  val tagsPerCategory = groupTagsPerCategory(data)
  tagsPerCategory.map(tpc => (tpc._1 -> tagsFrequencies(tpc._2)))
} 
```

例如，考虑

```
val data = Map(
  "id1" -> (Set("c1", "c2"), Set("t1", "t2", "t3")),
  "id2" -> (Set("c1"), Set("t1", "t4"))) 
```

然后：

所有实体的标签频率为：

```
Map(t3 -> 0.2, t4 -> 0.2, t1 -> 0.4, t2 -> 0.2) 
```

每个类别的标签频率是：

```
Map(c1 -> Map(t3 -> 0.2, t4 -> 0.2, t1 -> 0.4, t2 -> 0.2), c2 -> Map(t3 -> 0.3333333333333333, t1 -> 0.3333333333333333, t2 -> 0.3333333333333333)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:28:52.693

这是对成语的重写，不一定是效率。我会让你的第一个方法更通用（`Iterable`参数），使用`identity`而不是`t => t`，并使用`mapValues`：

```
def tagsFrequencies(tags: Iterable[Tag]): TagsFrequencies =
  tags.groupBy(identity).mapValues(_.size / tags.size.toDouble) 
```

因为这现在需要 any `Iterable[Tag]`，所以您可以使用它来清理第二种方法：

```
def computeTagsFrequencies(data: Map[Id, (Set[Category], Set[Tag])]) =
  tagsFrequencies(data.flatMap(_._2._2)) 
```

同样对于最后一种方法：

```
def computeTagsFrequenciesPerCategory(data: Map[Id, (Set[Category], Set[Tag])]) =
  data.values.flatMap {
    case (cs, ts) => cs.map(_ -> ts)
  }.groupBy(_._1).mapValues(v => tagsFrequencies(v.flatMap(_._2))) 
```

这些更改都不应该以任何有意义的方式影响性能，但是您当然应该在自己的应用程序中进行基准测试。

# php - Yii 使用 ImageMagick 创建 PDF 缩略图

> ID：13570124
> 
> 赞同：0
> 
> 时间：2012-11-26T17:35:19.770
> 
> 标签：php, yii, imagemagick

如果我上传我的 PDF，我想创建自动缩略图，然后我将保存该路径我使用**yii**框架构建我的网站我想尝试使用**ImageMagick** Any Body Help 捕获.. Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:17:44.497

我也在使用 Yii 框架来生成图像文件。这非常简单直接。我正在使用 windows XP/apache 和 php 5.4

1.  下载并安装 imagemagick [http://www.imagemagick.org/script/download.php](http://www.imagemagick.org/script/download.php)
2.  下载并安装 imagemagic 的 php 扩展[http://pecl.php.net/package/imagick](http://pecl.php.net/package/imagick)
3.  下载并安装 ghostscript，因为 image magic 使用 ghost 脚本将 pdf 转换为图像[http://www.ghostscript.com/download/](http://www.ghostscript.com/download/)
4.  在模型类中编写一个方法来处理转换

    使用命令：[命令格式](http://snipplr.com/view/48513) 或

    使用库：[php手册](http://php.net/manual/en/book.imagick.php)

5.  提交表单后调用该方法。

检查图像是否保存在所需位置。我希望有帮助。如果您遇到任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T20:38:43.533

我知道您询问过 ImageMagick，但也许您可以使用 GD 来完成如此简单的操作。它几乎在每个主机上都可用。

文档下方评论中的示例。

[http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)

# scala - 为什么测试方法失败？

> ID：13570125
> 
> 赞同：2
> 
> 时间：2012-11-26T17:35:22.327
> 
> 标签：scala, playframework-2.0

我有一个创建方法来创建实体槽`POST`：

```
 def create = Action(parse.json) { request =>
    val address = Json.fromJson[Address](request.body)
    Ok(address.toString())
  } 
```

我想像这样测试它：

```
 "A POST request on addresses create method" should "return OK " in {
    val node = Json.toJson(Address(None, "street 2", "33", "343333", "Arad", "Romania", None))(controllers.AddressBean.addressWrites);
    val result = AddressBean.create(FakeRequest().withJsonBody(node, Helpers.POST))

    status(result) should equal(OK)
    contentType(result) should be(Some("application/json"))
  } 
```

但对我来说这个警告似乎很奇怪`status(result)`：

> 类型不匹配; 找到：play.api.libs.iteratee.Iteratee[Array[Byte],play.api.mvc.Result] 需要：play.api.mvc.Result

有谁知道为什么会发生这种类型不匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:01:06.573

我在这里发布我从詹姆斯那里收到的解决方案，在谷歌群组上，也许对其他人有用：

> 不幸的是，这种混淆来自于 Action 上有两种 apply 方法，一种接受 RequestHeader，另一种接受 Request[A]，其中 A 必须是 action 接受的主体类型。因此，如果您传递的请求正文类型错误，它将使用 RequestHeader 应用方法，该方法返回迭代对象。
> 
> 所以，你的问题是你传递了错误的体型。withJsonBody 传递 AnyContent 的内容类型，当您未在操作中明确指定解析器时，将使用该内容类型。但是您使用的是 parse.json，这意味着主体是 JsonNode。所以，试试这样的事情：

```
new FakeRequest(Helpers.POST, "/", FakeHeaders(), node) 
```

所以最后我的`POST`测试方法（使用scalatest）看起来像：

```
 "A POST request on addresses create method" should "return OK " in {
    val node = Json.toJson(Address(Some(12), "street 2", "33", "343333", "Arad", "Romania", None))(controllers.AddressBean.addressWrites);
    val result = AddressBean.create(new FakeRequest(Helpers.POST, "/", FakeHeaders(), node))

    status(result) should equal(OK)
    contentType(result) should be(Some("application/json"))
  } 
```

# c++ - 'mapped_type' std::map 错误的初始化没有匹配的构造函数

> ID：13570126
> 
> 赞同：7
> 
> 时间：2012-11-26T17:35:24.060
> 
> 标签：c++, stdmap

我有一个名为“Card”的类，我试图将它的一些对象存储在 std::map Card.hpp 中：

```
class Card
{
public:
    enum ValueType { NOVALUE, ACE };
    enum FaceType { NOFACE, CLUBS };

    Card(const ValueType & _value, const FaceType & _face);
    Card(const Card & _card);
private:
    ValueType m_value;
    FaceType m_face;
}; 
```

这是我存储和访问它的方式：Deck.hpp：

```
#include <map>

class Card;

class Deck
{
    public:
        Deck();

        std::size_t length() const;

        Card get_card(const int & _num);

    private:
        std::map<int, Card> m_deck;
}; 
```

甲板.cpp：

```
#include "Card.hpp"

Deck::Deck()
{
    m_deck.insert(std::pair<int, Card>(0, Card(Card::NOVALUE, Card::NOFACE)));
    m_deck.insert(std::pair<int, Card>(1, Card(Card::ACE, Card::CLUBS)));
}
std::size_t Deck::length() const
{
    return m_deck.size();
}

Card Deck::get_card(const int & _num)
{
    return m_deck[_num];
} 
```

现在，当我编译它时，我收到以下错误：

```
/usr/include/c++/4.6/bits/stl_map.h:453:45: error: no matching constructor for initialization of 'mapped_type' (aka 'Card')
          __i = insert(__i, value_type(__k, mapped_type()));
                                            ^
Deck.cpp:69:18: note: in instantiation of member function 'std::map<int, Card, std::less<int>, std::allocator<std::pair<const int, Card> > >::operator[]' requested here
    return m_deck[_num];
                 ^
./Card.hpp:30:2: note: candidate constructor not viable: requires 2 arguments, but 0 were provided
        Card(const ValueType & _value, const FaceType & _face);
        ^
./Card.hpp:32:2: note: candidate constructor not viable: requires 1 argument, but 0 were provided
        Card(const Card & _card);
        ^
1 error generated. 
```

为什么我会收到此错误？我只使用卡作为价值！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T17:41:48.977

问题在于，对于地图，如果元素不存在，`m_deck[_num]`则设计为插入默认构造。`Card`并且`Card`没有默认构造函数。

您可以使用`map::find`来查看条目是否存在，而无需创建条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:37:11.773

为了`Deck::get_card()`编译，`Card`需要提供一个默认的构造函数（大概是初始化对象为`Card::NOVALUE`, `Card::NOFACE`）。

原因是`m_deck[_num]`返回的默认构造实例不在地图中`Card`。`_num`

# html - 将元素扩展到表格单元格的整个高度？

> ID：13570128
> 
> 赞同：0
> 
> 时间：2012-11-26T17:35:32.067
> 
> 标签：html, css

我正在尝试创建一个行表，每个行在某些块元素中都有一些内容（为简单起见，我在此示例中使用 DIV），我想将其元素拉伸到 TD 单元格的完整高度。在此示例中，右侧的“测试”文本应使其包含的灰色 DIV 填满包含 TD 单元格的整个高度：

[http://www.game-point.net/misc/browserTests/scratchpads/fullTableCellHeight/](http://www.game-point.net/misc/browserTests/scratchpads/fullTableCellHeight/)

我不想明确设置任何东西的高度（除了可能是百分比） -`height:100%`子 DIV 上的设置不会改变它的高度。有没有办法做到这一点？显然知道表格单元格的渲染高度的浏览器在不使用 JavaScript 的情况下绝对无法调整子元素的大小以填充它，这似乎很荒谬！

注意：我知道还有其他类似的问题，但他们似乎没有考虑到 CSS3 的新 flexbox 功能——也许这可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:29:32.000

您可以将父元素设置为相对定位，将子元素设置为显示块，它应该填充高度。在尝试获取链接文本以填充整个按钮容器时，我经常使用该技术。希望它可以转化为您正在尝试做的事情，但是由于您没有要显示的代码，因此我将在使用它时为您提供一个真实生活场景的简短示例：

```
<div style="position:relative; width: 50px; height: 50px;">
    <a href="" style="display: block; width: 100%; height: 100%;">some link</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:06:20.230

Boris Zbarsky 本人告诉我，完全不可能做到这一点 - 使表格单元格的子元素填充单元格的整个高度 - 除非明确指定单元格的高度。如果他们愿意，浏览器制造商可能会完成这项工作，但他们不会被打扰。

# c++ - C++ << 操作符与数据库之间的关系

> ID：13570132
> 
> 赞同：0
> 
> 时间：2012-11-26T17:35:49.510
> 
> 标签：c++, database, output

我想使用`<<`and`>>`运算符加载并保存到外部数据库。外部数据库必须实现什么才能使其工作？

想法或经验？我正在使用 SQL 与我的 sqlite3 数据库进行交互。

例如，我想说：

```
MyClass c;
c >> databaseInstance;
c << databaseInstance; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:38:51.783

`databaseInstance`需要是某种类型，提供以您想要的方式写入数据库的函数，从而提供类似流的接口`operator>>`。`operator<<`这些函数的定义有点像这样：

```
database_type& operator<<(database_type& databaseInstance, MyClass& c)
{
  // Write to database here
  return databaseInstance;
}

database_type& operator>>(database_type& databaseInstance, MyClass& c)
{
  // Read from database here
  return databaseInstance;
} 
```

这利用了[运算符重载](https://stackoverflow.com/q/4421706/150634)。没有什么比这更多的要说的了，使用数据库是一件很奇怪的事情，因为数据库不像流。

为了与 C++ 标准库保持一致，您可能希望反转运算符的使用：

```
MyClass c;
databaseInstance << c;
databaseInstance >> c; 
```

但是，不确定最后一行将读入您的`MyClass`对象的确切内容。`databaseInstance`只有在将其配置为插入特定表时，第二行才真正有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:36:47.920

唔。有趣的..

好的，我假设您只想在 operator>> 的情况下从数据库中选择，而在 operator<< 的情况下插入/更新。这里的诀窍是知道要读/写哪些列。

您可以使用[流操纵器](https://stackoverflow.com/questions/4633864/how-do-the-stream-manipulators-work)（例如将整数输出转换为十六进制格式的“十六进制”）来确定要使用的列，因此您将拥有类似

```
int c;
DBStreamInterface db(tableA);
c << columnA << db; 
```

或者您可以定义一个与表具有相同布局的结构类型，并将整行读入其中：

```
struct TableRow {
  int columnA;
  string columnB;
};
TableRow t << db; 
```

但是您必须小心将数据库中的架构与结构的定义相匹配（除非您想全力以赴地生成模板代码，您可以通过读取架构 DDL 并动态分配来创建适当的结构类构造函数中每个字段的存储）。

# objective-c - 从通知中心删除 UILocalNotifications

> ID：13570136
> 
> 赞同：2
> 
> 时间：2012-11-26T17:35:59.073
> 
> 标签：objective-c, ios, xcode, uilocalnotification

我正在尝试从通知中心删除通知。我发现了另一个 stackoverflow 用户提供的以下代码：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0]; 
```

我尝试将该代码添加到下面的 AppDelegate.m

applicationWillEnterForeground

但是，每当我从通知中心点击通知时，它不会在通知中心本身消失。

我究竟做错了什么？我不能使用“CancelAllNotifications”，因为我已经预先安排了将来的通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:48:21.160

从我的测试来看，除了调用之外，我们似乎还需要取消现有的本地通知`setApplicationIconBadgeNumber:`

由于您想在系统中保留任何即将到来的通知，因此简单地取消显然是行不通的。因此，我要采用的策略是将那些剩余的通知添加到一个新数组中，然后将该数组`scheduledLocalNotifications.` 重新设置为文档，设置`scheduledLocalNotifications`属性首先调用`cancelLocalNotification:`......这正是我们想要做的。

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];
NSArray *notifications = [UIApplication sharedApplication].scheduledLocalNotifications;
[UIApplication sharedApplication].scheduledLocalNotifications = notifications; 
```

# php - 允许用户通过简单的下拉列表对 MySQL 结果进行排序

> ID：13570139
> 
> 赞同：0
> 
> 时间：2012-11-26T17:36:13.583
> 
> 标签：php, html

我创建了一个非常简单的 CRUD，它可以查询我的数据库以获取酒店详细信息并将它们显示在 HTML 表中。

默认情况下，我的 mysql 查询按照酒店的创建顺序返回酒店。我想出了一些不同的 sql 语句来按距离或 AZ 返回结果，我希望用户选择他们喜欢的。

如何创建一个简单的下拉列表，例如“名称”和“距离”，选择时将使用 PHP 使用正确的排序查询重新加载页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:50:08.360

您的基本结构将如下所示；

HTML;

```
<SELECT id="sort_select" onchange="javascript:re_sort();">
    //options
</SELECT> 
```

Javascript函数；

```
function re_sort() {
    //make ajax call using sort_select value
    //refresh table contents
} 
```

PHP;

```
if($_GET['sort_field'] == 'fish') {
    //execute fish sort sql
}
else if($_GET['sort_field'] == 'goat') {
    //execute goat sort sql
}
//return response 
```

**不要**`$_GET`在sql查询中直接使用值，而是使用上面的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:49:57.970

听起来很简单。您添加一个`ORDER BY`由下拉列表中的值填充的子句。

# 公平警告！

直接用户输入是非常危险的！并且准备好的语句不能用于`ORDER BY`值。您需要**非常积极的白名单**，确保您收到的值是**预定义值之一，这些值是从服务器上的某处获取的（数据库模式，或硬编码到 PHP 代码中）**。

## 永远不要让用户输入未经检查和未经处理就到达您的查询！

**[有关 SQL 注入的更多信息。](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:51:50.140

您将需要使用处理更改事件和重新加载事件的 JavaScript。但是，您也需要处理禁用的 JavaScript 浏览器。您可以通过显示一个 sumbit 按钮并使用 JavaScript 隐藏它来做到这一点。

就 PHP 而言，有几种方法可以处理它，但这里有一个想法。将排序值存储到数组中。然后让索引是一个数字，这样如果操作正确，就不会发生 SQL 注入，因为我们不想允许纯 SQL 语句。当用户更改时提交。

在代码中有一个开关，并根据输入的数字向其附加适当的 SQL 语句。

# opencv - 如何使用 Homography 在 OpenCV 中转换图片？

> ID：13570140
> 
> 赞同：13
> 
> 时间：2012-11-26T17:36:21.680
> 
> 标签：opencv, transformation, distortion, homography

我有两张图片（A 和 B）与另一张略有扭曲，它们之间存在平移、旋转和比例差异（例如，这些图片:)

![原版莉娜](../Images/81d03af143ecefe5d490dee440a01151.png) ![扭曲的莉娜](../Images/10ebf3a72e8d206670fb2b6005d582d0.png)

* * *

Ssoooooooo 我需要的是在图片 B 中应用一种转换，以便补偿存在的失真/平移/旋转，以使两张图片具有相同的大小、方向且没有平移

我已经提取了点并找到了 Homography，如下所示。但我不知道如何使用 Homography 进行转换`Mat img_B`，所以它看起来像`Mat img_A`. 任何想法？

```
//-- Localize the object from img_1 in img_2
std::vector<Point2f> obj;
std::vector<Point2f> scene;

for (unsigned int i = 0; i < good_matches.size(); i++) {
    //-- Get the keypoints from the good matches
    obj.push_back(keypoints_object[good_matches[i].queryIdx].pt);
    scene.push_back(keypoints_scene[good_matches[i].trainIdx].pt);
}

Mat H = findHomography(obj, scene, CV_RANSAC); 
```

干杯，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-13T18:59:48.787

对于这个问题，您不需要单应性。您可以改为计算仿射变换。但是，如果您确实想将单应性用于其他目的，您可以查看下面的代码。[它是从这篇](http://www.learnopencv.com/homography-examples-using-opencv-python-c/)关于[单应性](http://www.learnopencv.com/homography-examples-using-opencv-python-c/)的详细文章中复制而来的。

**C++ 示例**

```
// pts_src and pts_dst are vectors of points in source 
// and destination images. They are of type vector<Point2f>. 
// We need at least 4 corresponding points. 

Mat h = findHomography(pts_src, pts_dst);

// The calculated homography can be used to warp 
// the source image to destination. im_src and im_dst are
// of type Mat. Size is the size (width,height) of im_dst. 

warpPerspective(im_src, im_dst, h, size); 
```

**Python 示例**

```
'''
pts_src and pts_dst are numpy arrays of points
in source and destination images. We need at least 
4 corresponding points. 
''' 
h, status = cv2.findHomography(pts_src, pts_dst)

''' 
The calculated homography can be used to warp 
the source image to destination. Size is the 
size (width,height) of im_dst
'''

im_dst = cv2.warpPerspective(im_src, h, size) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T17:55:49.647

你想要[warpPerspective](http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html#cv-warpperspective)函数。该过程类似于[本](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/warp_affine/warp_affine.html#warp-affine)教程中介绍的过程（用于仿射变换和扭曲）

# vim - VIM - 多行 bash 命令序列

> ID：13570141
> 
> 赞同：1
> 
> 时间：2012-11-26T17:36:25.550
> 
> 标签：vim, vi

我有一个键盘映射，我在之前回答的问题中发布了它：

[VIM - 从项目中的多个位置采购标签](https://stackoverflow.com/questions/13537090/vim-sourcing-tags-from-multiple-locations-in-project)

我想知道是否可以将此映射作为多线映射到一组函数，以便它在我的`.vimrc`文件中更整洁。该命令目前是一个巨大的单行命令：

```
" Create a mapping to delete the old tags, re-generate them, and use them
map <F10> :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q . \| rm -f $SDK_SRC_PLUS_HEADERS/tags \| ctags -R -f $SDK_SRC_PLUS_HEADERS/tags $SDK_SRC_PLUS_HEADERS/tags  \| rm -f $THIRD_PARTY_SDK/tags \| ctags -R -f $THIRD_PARTY_SDK/tags $THIRD_PARTY_SDK/tags  \| echo "Done re-generating tags."<CR> 
```

VIM 是否支持某种转义序列，所以我可以将映射分解为更易读和块对齐的东西，如下所示：

```
" Create a mapping to delete the old tags, re-generate them, and use them
map <F10> :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .
          \| rm -f $SDK_SRC_PLUS_HEADERS/tags
          \| ctags -R -f $SDK_SRC_PLUS_HEADERS/tags $SDK_SRC_PLUS_HEADERS/tags
          \| rm -f $THIRD_PARTY_SDK/tags
          \| ctags -R -f $THIRD_PARTY_SDK/tags $THIRD_PARTY_SDK/tags
          \| echo "Done re-generating tags."<CR> 
```

我尝试了许多转义序列，但没有运气。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:38:23.117

为什么不把它做成一个 shell 脚本并在一行中简单地引用它呢？

这样你就可以轻松地在 vim 之外测试它，也可以在其他工具中使用它。

为了在下面回答您的问题，如果您的环境变量是在与 vim 相同的会话中导出的（并且在 vim 之前），那么无论您以后更改它们，它们对于子进程都将保持不变。

# asp.net-mvc - AutoMapper 和必填字段

> ID：13570145
> 
> 赞同：1
> 
> 时间：2012-11-26T17:36:33.020
> 
> 标签：asp.net-mvc, automapper

我正在尝试仅使用我的域模型中的一些字段来创建新记录。我为此创建了一个 ViewModel，并且正在使用 AutoMapper。

由于我的域模型上的必填字段，我的代码现在失败了。我在必要的字段上添加了 opt=>opt.Ignore() 但是，我仍然遇到问题。

当我从 StaffPresent 字段中删除 [Required] 时，记录被添加到数据库中。

在我的 Global.asax.cs

```
Mapper.CreateMap<CustomerSupportRecord, CustomerSupportRecordForCreation>();
Mapper.CreateMap<CustomerSupportRecordForCreation, CustomerSupportRecord>().ForMember(p=>p.StaffPresent, opt=>opt.Ignore()); 
```

领域模型

```
public class CustomerSupportRecord
{
    public int CustomerSupportRecordID { get; set; }

    [Required]
    public int CustomerID { get; set; }

    [Required]
    public string EmployeeID { get; set; }

    [Required(ErrorMessage = "Please enter a Date")]
    [DataType(DataType.Date)]
    [Display(Name = "Date")]
    public DateTime Date { get; set; }

    [Required(ErrorMessage = "Please select an Arrival Time")]
    [DataType(DataType.Time)]
    [Display(Name = "Arrival")]
    public DateTime ArrivalTime { get; set; }

    [DataType(DataType.Time)]
    [Display(Name = "Departure")]
    public DateTime? DepartureTime { get; set; }

    [Required(ErrorMessage = "Please select a Type")]
    [Display(Name = "Type")]
    public int CustomerSupportTypeID { get; set; }

    [Required(ErrorMessage = "Please enter the staff who were present at the Feedback")]
    [Display(Name = "Staff Present at Feedback")]
    public string StaffPresent { get; set; }

    [Display(Name = "Setting")]
    public string ReflectionSetting { get; set; }

    [Display(Name = "Advisor")]
    public string ReflectionAdvisor { get; set; }

    [Display(Name = "Notes")]
    public string Notes { get; set; }

    [Display(Name = "Comments")]
    public string Comments { get; set; }

    // Navigation Properties
    public virtual Customer Customer { get; set; }
    public virtual CustomerSupportType CustomerSupportType { get; set; }
    public virtual Employee Employee { get; set; }
} 
```

视图模型

```
public class CustomerSupportRecordForCreation
{
    public int CustomerSupportRecordID { get; set; }

    public int CustomerID { get; set; }

    public string EmployeeID { get; set; }

    [DataType(DataType.Date)]
    [Display(Name = "Date")]
    public DateTime Date { get; set; }

    [DataType(DataType.Time)]
    [Display(Name = "Arrival")]
    public DateTime ArrivalTime { get; set; }

    [Display(Name = "Type")]
    public int CustomerSupportTypeID { get; set; }

    [Display(Name = "Notes")]
    public string Notes { get; set; }
} 
```

最后是我的控制器

```
 //
    // GET: /CustomerSupport/CustomerSupportRecord/Create

    public ActionResult Create()
    {
        ViewBag.CustomerSupportTypeID = new SelectList(db.CustomerSupportType, "CustomerSupportTypeID", "CustomerSupportTypeName");
        var model = new CustomerSupportRecordForCreation { CustomerID = 1, EmployeeID = "20213" };

        return View("Create", model);

    }

    //
    // POST: /CustomerSupport/CustomerSupportRecord/Create

    [HttpPost]
    public ActionResult Create(CustomerSupportRecordForCreation customersupportrecord)
    {

        if (ModelState.IsValid)
        {
            var newRecord = Mapper.Map<CustomerSupportRecordForCreation, CustomerSupportRecord>(customersupportrecord);
            db.CustomerSupportRecord.Add(newRecord);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
            ViewBag.CustomerSupportTypeID = new SelectList(db.CustomerSupportType, "CustomerSupportTypeID", "CustomerSupportTypeName", customersupportrecord.CustomerSupportTypeID);
            return View(customersupportrecord);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:15:49.307

AutoMapper 的配置与验证属性没有任何关系，它只是指定了如何在彼此之间映射对象的规则。

在您的情况下，映射：

```
Mapper.CreateMap<CustomerSupportRecordForCreation, CustomerSupportRecord>().ForMember(p=>p.StaffPresent, opt=>opt.Ignore()); 
```

告诉 AutoMapper 不要复制 StaffPresent 属性。

如果您的数据库模型具有 [Required] 属性，您仍然需要在其他地方设置该数据。

根据您的评论需要注意的一件事是，向您的 ViewModel 添加验证是一个好主意，因为它可以防止您使用不正确的数据调用您的数据库方法，为您提供[客户端验证](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-validation-to-the-model)，并允许您强制执行不同于模型可能需要的约束.

# java - Google appengine 全文搜索中的总数

> ID：13570147
> 
> 赞同：5
> 
> 时间：2012-11-26T17:36:40.560
> 
> 标签：java, google-app-engine, count, full-text-search

我正在尝试计算全文搜索文档的总行数。在 [Google 文档](https://developers.google.com/appengine/docs/java/search/overview#Queries_on_Fields)中出现了表达式 count(size) 但是我没有让它工作。

我在 Java 中工作。

有没有关于如何使用'count'表达式的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T04:14:20.263

尝试这个 ：

```
 public void countRows() {
    GetRequest request = GetRequest.newBuilder().setReturningIdsOnly(true)
            .build();
    int totalResult = (int) INDEX.getRange(request).getResults().size();
} 
```

你必须声明：

```
 private Index INDEX = SearchServiceFactory.getSearchService().getIndex(
        IndexSpec.newBuilder().setName("your_doc_name")); 
```

请注意：最好不计算行数。对于分页，它应该只是下一个和上一个页面链接。对不起，如果我的英语不好。

# iis - 如何使用主机标头绑定创建第二个网站？

> ID：13570148
> 
> 赞同：2
> 
> 时间：2012-11-26T17:36:46.827
> 
> 标签：iis, web, hostheaders

我有一个在 IIS 管理器上运行良好的网站。我创建了一个新站点，它共享相同的 IP 和端口。对于我将域放入站点的主机标头。当我目前访问该域时，我得到一个 403 - 禁止访问：访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

我检查以确保启用和设置匿名但仍然没有运气。它在访问该站点时不要求提供凭据。

在这一点上，我不确定还能做什么。有没有人有我可以尝试的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:39:44.237

在我的域服务站点上呆了一段时间之后。我显然在网站服务器上输入了错误的 IP 地址，而是指向我的交换服务器。

# c++ - Ole 拖放故障排除

> ID：13570160
> 
> 赞同：2
> 
> 时间：2012-11-26T17:37:48.340
> 
> 标签：c++, winapi, atl, wtl

我使用 WTL 创建了一个对话框，继承自 CDialogImpl 类，在主对话框中我创建了另一个对话框，在第二个子对话框中创建了一个列表控件。我想向列表控件添加拖放功能，我在网上阅读了有关 WM_DROPFILES 方法和 Ole Drop Target 的信息，我选择了后者。我已经按照 [这个](http://bcbcaq.freeservers.com/project_DD.html)实现了 IDropTarget 接口方法。我已在所有对话中将接受文件选项设置为 TRUE，我已在子对话类中实例化 IDropTarget 并在其 WM_INITDIALOGUE 处理程序中调用以下方法：

```
//drag& drop 
        lpDropTarget = (LPDROPTARGET)new TDropTarget(m_hWnd);
        CoLockObjectExternal(lpDropTarget, true, true);

        // register the HWND as a drop target
        RegisterDragDrop(m_hWnd, lpDropTarget); 
```

lpDropTarget 实例化如下：

```
LPDROPTARGET lpDropTarget; 
```

就是这样。之前没有真正使用过 Ole，所以我尝试了以下场景来寻找运气：

1.  我已经为 List 控件 HWND 注册了 RegisterDragDrop，并将它的父对话框设置为接收`WM_OLEDROP WM_USER + 1`我发送的通知。好的，拖放光标显示，但没有调用 IDataTarget 函数的实现。

2.  RegisterDragDrop 也用于儿童对话和通知。

3.  RegisterDragDrop 用于主对话框和它的通知。

在后来的情况下（2和3），拖放光标甚至没有出现，它向我展示了不允许拖放的光标。现在，所有对话框和列表控件都已设置为接受来自 Visual Studio 设计器的文件。我仅限于使用 ATL /WTL/WINAPI，没有 MFC。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:46:42.253

因为你`WM_DROPFILES`是你唯一需要处理的事情。无需摆弄之类的`IDropTarget`。

如果您的应用程序不需要在管理员模式下运行，请不要在管理员模式下运行它。`UAC Execution Level = asInvoker`禁用相同 ( )的链接器设置。另外，在非管理员模式下运行 VS，这样你的应用程序也启动是非管理员进程。这样，Explorer.exe 将能够向`WM_DROPFILES`您的应用程序发送消息。

如果您的应用程序需要以管理员模式运行，您需要允许其他应用程序向您的应用程序（窗口）发送少量消息。请执行下列操作：

```
ChangeWindowMessageFilter(WM_DROPFILES, MSGFLT_ADD);
ChangeWindowMessageFilter(WM_COPYDATA, MSGFLT_ADD);
ChangeWindowMessageFilter(0x0049, MSGFLT_ADD); 
```

您可能还想使用更新的功能：[ChangeWindowMessageFilterEx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd388202%28v=vs.85%29.aspx)。

请注意，如果您的应用程序必须以管理员身份运行，并且您需要使用 动态定位这些功能之一`GetProcAddress`，以便您的应用程序可以在没有此功能的操作系统上运行（例如 Windows XP）。

# android - android绑定服务如何区分多个活动？

> ID：13570162
> 
> 赞同：1
> 
> 时间：2012-11-26T17:37:57.607
> 
> 标签：android, android-activity, android-service

我正在开发一个聊天客户端，其中我有一个从 XMPP 服务器连续监听的服务。我对此服务的架构几乎没有疑问。

1.  我在 Android 开发页面上的服务类文档中阅读了 onCreate() 将在服务第一次运行时被调用一次，这就是为什么我在服务 onCreate() 方法中编写了与服务器代码的连接。可以吗？

2.  当我在我的客户端活动中单击我朋友的名字的 ListView 元素时，将打开一个新活动，该活动将绑定到用于收听和发送聊天消息的服务。我想知道服务如何区分特定消息是针对哪个活动的？因为如果我与超过 1 个朋友聊天，就会有超过 1 个活动，并且服务必须区分哪个消息是针对哪个活动的。我需要知道如何实现这种机制？如果有任何教程或描述我需要做什么来实现这个机制，这可能会很有帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:38:27.647

> 可以吗？

这是不可能抽象地回答的。这种方法显然没有任何问题。

> 我需要知道如何实现这种机制？

老实说，那个 UI 听起来……很尴尬。话虽如此，您可以让活动为服务提供侦听器或回调对象，服务使用该对象将消息路由回该活动。

# asp.net - ASP.net Web 服务器控件，子级不维护状态

> ID：13570164
> 
> 赞同：0
> 
> 时间：2012-11-26T17:38:04.000
> 
> 标签：asp.net, user-controls

我正在开发一个自定义服务器控件，以下是我的 ASPX 页面上的控件标记，

```
<uc:NoteBook ID="nb1" runat="server">
    <NotePages>
        <uc:NotePage ID="p1" runat="server">
            <asp:DropDownList ID="ddl1" runat="server"></asp:DropDownList>
        </uc:NotePage>
    </NotePages>
</uc:NoteBook> 
```

请注意，此控件具有`NotePages`实际上是`NotePage`控件集合的属性。并且`NotePage`控制可以有任何类型的孩子。

在同一个 aspx 页面上，在`Page_Load`事件处理程序中，我正在加载一些`DropDownList`控制项，

```
if (!this.IsPostBack)
{
    this.ddl1.Items.Add(new ListItem("Class-1", "C1"));
    this.ddl1.Items.Add(new ListItem("Class-2", "C2"));
    this.ddl1.Items.Add(new ListItem("Class-3", "C3"));
} 
```

**问题：**

现在的问题是在 Post Back 之后，这些`DropDownList`项目被清除了。这清楚地表明我在这里缺少一些状态管理。

谁能指导我如何处理它？

以下是控制代码。

```
public class NoteBook : CompositeControl
{
    [PersistenceMode(PersistenceMode.InnerProperty)]
    public virtual List<NotePage> NotePages
    {
        get;
        set;
    }

    public NoteBook()
    {
        this.NotePages = new List<NotePage>();
    }

    protected override void CreateChildControls()
    {
        foreach (var c in this.NotePages)
        {
            this.Controls.Add(c);
        }
        base.CreateChildControls();
    }
}

[ParseChildren(false)]
public class NotePage : UserControl
{

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:15:09.823

您需要在初始化控件时而不是在加载事件期间添加项目。注意：需要始终添加项目，而不仅仅是在 GET 期间未加载页面时。到加载事件发生时，状态已经初始化。请参阅`[控制执行生命周期](http://msdn.microsoft.com/en-us/library/aa719775%28VS.71%29.aspx)'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:09:47.497

好的，我解决了。

我们只需要`EnsureChildControls()`在控件初始化时调用该方法，这会导致在 ViewState/etc 之前创建子控件。事情被调用。

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    this.EnsureChildControls();
} 
```

我在我的`NoteBook`控件中添加了上面的代码。

# c# - 连接到 POS 系统的 C# Web 应用程序的架构建议

> ID：13570169
> 
> 赞同：1
> 
> 时间：2012-11-26T17:38:23.573
> 
> 标签：c#, sql-server, web-applications, point-of-sale

我想开发一个 C# Web 应用程序，允许客户上网查看我拥有的零售店的当前库存水平。该商店使用带有 SQL Server 后端的 POS 系统。

该应用程序将托管在防火墙之外的单独服务器上。我想知道从安全和/或性能的角度来看，创建一个本地数据库脚本是否更谨慎，该脚本将必要的数据复制到一个单独的数据库（可能在应用程序托管的同一台服务器上）每 10 次刷新一次- 20 分钟左右，而不是简单地让网络应用程序直接与实时 POS 数据库对话。

我不能让应用程序以任何方式影响 POS 系统的性能。应用程序连接将是只读的，并且仅限于该唯一的库存表，但即使使用池，我也不确定数百个网络用户 ping 实时数据库是否会产生任何延迟或不良影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:41:44.030

如果您的 Web 应用程序是严格只读的，那么您可以通过让 Web 应用程序仅对`datareader`您的 POS 数据库具有权限来获得完美的安全性 - 不需要复制或其他复杂的步骤。

至于性能——即使是一个基本的（Core i3、5200rpm HDD、2GB RAM）服务器也可以为中等大小的数据库每秒处理几百个简单的 SQL 查询。考虑到现代数据库服务器如何在 RAM 中缓存大量数据，这意味着读取查询非常便宜。

# web-services - AppHarbor：Web App和Background Worker之间的通信

> ID：13570170
> 
> 赞同：1
> 
> 时间：2012-11-26T17:38:27.650
> 
> 标签：web-services, appharbor

我有两个问题，但让我先做个准备：

假设您有一个典型的场景，其中有一个 Web 应用程序和一个中间层 Web 服务。Web 应用程序接收来自用户的请求，查询 Web 服务并向用户发送响应。

如果 Web 服务和 Web 应用程序在同一台机器上运行，则 Web 应用程序将通过**localhost:port**访问 Web 服务。

*（我确实理解 AppHarbor 网络和后台工作人员不在传统机器上运行，但使用这个比喻更容易）*

为了稍微复杂一点，Web 服务实际上是一个运行 HTTP 服务器的控制台应用程序，因此充当 Web 服务，我们将其称为 webservice.exe。

我的第一个问题是：AppHarbor 是否会在与 Web 应用程序相同的机器上运行 webservice.exe，从而使 Web 应用程序能够通过**localhost:port**访问 Web 服务。

如果不是，运行控制台应用程序的机器名称是否始终是静态的（这允许 Web 应用程序可靠地访问**machinename:port**）。如果是这样，webservice.exe 机器是否允许来自 Web 应用程序机器的传入连接？

我的第二个问题是，如果两个应用程序在同一台机器上运行（本地主机场景），外部用户是否能够通过**myapp.apphb.com:port**访问 webservice.exe ？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:30:15.880

AppHarbor 当前不支持附加到端口的后台工作程序（这是您的控制台应用程序将运行的地方）。

如果您决定在 ASP.NET 应用程序中托管服务并在 AppHarbor 上的 Web Worker 中运行它（作为普通网站），那么它可以在 myawesomeapplication.apphb.com 上使用，或者如果您决定使用自定义主机名添加一个。

如果不需要服务抽象，您可能还想取消它并将其折叠到主网站中。

# php - 带有可移动点的 PHP XY 图表

> ID：13570171
> 
> 赞同：0
> 
> 时间：2012-11-26T17:38:33.333
> 
> 标签：php, ajax, charts

我正在尝试在 PHP 中创建一个 XY 图表，当他从中选择点并移动它们时，用户可以动态地更改它。是否有任何具有该功能的库或框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:42:12.170

这不是 PHP 真正的任务。PHP 用于服务器端任务，这是浏览器端，因此您应该使用 JavaScript 或其他基于浏览器的语言。

我不得不做一些与此非常相似的事情，并且使用 HTML5 Canvas 和[KineticJS](http://kineticjs.com/)框架取得了巨大的成功。

# php - 如何获取我在 WordPress 中上传的图像的标题、名称和描述？

> ID：13570174
> 
> 赞同：1
> 
> 时间：2012-11-26T17:38:47.187
> 
> 标签：php, wordpress

我写了这个查询：

```
$album_id = get_the_id();
$photos = $wpdb->get_results(
    "select * from wp_postmeta where post_id = '"
    . $album_id
    . "' AND meta_key = 'gallery_ph' order by meta_id desc"
); 
```

现在，我想获取这些图像的所有带有标题、名称和描述的缩略图。

我在数据库中发现：

```
meta_id | post_id | meta_key   | meta_value
577     | 346     | gallery_ph | http://url to the image 
```

和缩略图

```
meta_id | post_id | meta_key                 | meta_value
569     | 348     | _wp_attachment_image_alt | Jury Datiop 
```

这两个数据是如何连接的？我知道陪审团 Datiop 有 url `http://xxx`，因为我可以签入 wp-admin。但是如何编写选择查询？如何连接图像并获取标题、名称、描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:12:15.863

您不需要直接查询数据库。

WordPress 有很多自定义函数供您检索所需的数据。

检查：

## [WordPress Codex：函数参考](http://codex.wordpress.org/Function_Reference/)

### 特别：

*   [`get_posts`](http://codex.wordpress.org/Function_Reference/get_posts)
*   [`get_children`](http://codex.wordpress.org/Function_Reference/get_children)
*   [`wp_get_attachment_metadata`](http://codex.wordpress.org/Function_Reference/wp_get_attachment_metadata)

* * *

## 将您的数据库查询转换为 WordPress 函数：

^(***代码未测试，使用 Debug 检查每个操作的结果***)

```
$album_id = get_the_id();

$photos = get_children( array(
    'post_parent'    => $album_id, 
    'post_type'      => 'attachment', 
    'meta_key'       => 'gallery_ph', 
    'post_mime_type' => 'image', 
    'order'          => 'DESC', 
    'orderby'        => 'meta_id') 
);

// DEBUG
// echo '<pre>' . print_r( $meta, true ) . '</pre>';

if( $photos )
{
    foreach( $photos as $img )
    {
        // DEBUG
        // echo '<pre>' . print_r( $img, true ) . '</pre>';

        $meta = wp_get_attachment_metadata( $img->ID );

        // DEBUG
        // echo '<pre>' . print_r( $meta, true ) . '</pre>';
    }
} 
```

# android - 从睡眠模式恢复时保持 GridView

> ID：13570176
> 
> 赞同：12
> 
> 时间：2012-11-26T17:38:55.257
> 
> 标签：android, gridview, lifecycle, android-gridview, baseadapter

我遇到了一个相当大的 GridView 的问题。（大约 70 个孩子）如果我在 onCreate 上启动它或在按下主页按钮然后返回后恢复，GridView 工作正常。但是当我从睡眠模式恢复后恢复时，我的 BaseAdapter 再次启动并破坏了我在运行时对其所做的更改。如果我在重新启动后调用它，这也会使 getChildAt() 给出 NullPointerException。

我怎样才能让它只做常规的 onPause(home button) 对 GridView 所做的事情，并避免每次从睡眠模式恢复时 GridView 都被清除？

编辑：我尝试为调用 BaseAdpter 的 Activity 类设置唤醒锁，但没有成功

2.编辑：自从我发布这个问题以来，我一直在尝试使用 onPause 中的代码恢复 GridView：

```
 SparseArray<Parcelable> array = new SparseArray<Parcelable>();
    gridView.saveHierarchyState(array);
    bundle = new Bundle();
    bundle.putSparseParcelableArray("state", array); 
```

这在 onResume 中：

```
 try{
    gridView.restoreHierarchyState(bundle.getSparseParcelableArray("state"));
    }
    catch(Exception e){
        //Most likely first start
        Log.i("SomeTag", "No GridView state found");
    }

    } 
```

奇怪的是我似乎在屏幕上从一个地方跳到另一个地方，当我尝试 getChildAt() 时它仍然崩溃。在睡眠模式后也无法获得它。

1.  编辑这是来自 BaseAdapter getView 的代码（注意！其中一些代码无关紧要）

public View getView (int position, View convertView, ViewGroup parent) {

```
mParentView = parent;

DisplayMetrics metrics = mContext.getResources().getDisplayMetrics();
int width = metrics.widthPixels;
int height = metrics.heightPixels;

    //sets the height for every individual box
int box = width/7*6/10;

ImageCell v = null;
if (convertView == null) {
    // If it's not recycled, create a new ImageCell.
    v = new ImageCell (mContext);
    v.setLayoutParams(new GridView.LayoutParams(box, box));
    v.setScaleType(ImageView.ScaleType.CENTER_CROP);
    v.setPadding(0, 0, 0, 0);

} else {
    v = (ImageCell) convertView;
}

v.mCellNumber = position;
v.mGrid = (GridView) mParentView;
v.mEmpty = true;
int id = 200;
v.setId(++id);

String map = str[position];
int pos = position;
int up = pos-10;
int down = pos+10;
int left = pos-1;
int right = pos+1;
if(up>=0){
above = str[up];
}
else{
    //Do nothing
}
if(down<70){
    under = str[down];
    }
else{
    //Do nothing
}
if(left<=-1){
   //Do nothing
}

else{
    lefte=str[left];
}
if(right>=70){
    //Do nothing
 }     
 else{
    righte=str[right];
 }
//if(left>-1|left!=9|left!=19|left!=29|left!=39|left!=49|left!=59){
   // lefte = str[left];
  //  }
 // else{
 //     Log.i("ImageCellAdapter", "Left is trying to break walls "+left);
    //Do nothing
  // }

if (map.equals("mountain")) {
    //Checks surroundings to find out witch drawable to set  
    v.setBackgroundResource(R.color.cell_empty);
     v.mEmpty = false;
     //All
     if(above=="mountain"&&under=="mountain"&&lefte=="mountain"&&righte=="mountain"){
            v.setImageResource(R.drawable.mountain_full);
        }
     //Single
     else if(above=="mountain"&&under!="mountain"&&lefte!="mountain"&&righte!="mountain"){
            v.setImageResource(R.drawable.mountain_down);
        }
     else if(above!="mountain"&&under=="mountain"&&lefte!="mountain"&&righte!="mountain"){
            v.setImageResource(R.drawable.mountain_up);
        }
     else if(above!="mountain"&&under!="mountain"&&lefte!="mountain"&&righte=="mountain"){
            v.setImageResource(R.drawable.mountain_left);
        }
     else if(above!="mountain"&&under!="mountain"&&lefte=="mountain"&&righte!="mountain"){
            v.setImageResource(R.drawable.mountain_right);
        }
     //Double
     else if(above=="mountain"&&under!="mountain"&&lefte!="mountain"&&righte=="mountain"){
            v.setImageResource(R.drawable.mountain_left_down);
        }
     else if(above!="mountain"&&under=="mountain"&&lefte!="mountain"&&righte=="mountain"){
            v.setImageResource(R.drawable.mountain_left_up);
        }
     else if(above=="mountain"&&under!="mountain"&&lefte=="mountain"&&righte!="mountain"){
            v.setImageResource(R.drawable.mountain_right_down);
        }
     else if(above!="mountain"&&under=="mountain"&&lefte=="mountain"&&righte!="mountain"){
            v.setImageResource(R.drawable.mountain_up_right);
        }
     else if(above!="mountain"&&under!="mountain"&&lefte=="mountain"&&righte=="mountain"){
            v.setImageResource(R.drawable.mountain_up_down);
        }
     else if(above=="mountain"&&under=="mountain"&&lefte!="mountain"&&righte!="mountain"){
            v.setImageResource(R.drawable.mountain_up_down);
        }
     //Triple
     else if(above!="mountain"&&under=="mountain"&&lefte=="mountain"&&righte=="mountain"){
            v.setImageResource(R.drawable.mountain_left_right_down);
        }
     else if(above=="mountain"&&under=="mountain"&&lefte=="mountain"&&righte!="mountain"){
            v.setImageResource(R.drawable.mountain_left_up_down);
        }
     else if(above=="mountain"&&under!="mountain"&&lefte=="mountain"&&righte=="mountain"){
            v.setImageResource(R.drawable.mountain_left_up_right);
        }
     else if(above=="mountain"&&under=="mountain"&&lefte!="mountain"&&righte=="mountain"){
            v.setImageResource(R.drawable.mountain_up_right_down);
        }
     //None
        else{
    v.setImageResource(R.drawable.mountain);
        }

}
else if(map=="start"){
    List<String> posOf = Arrays.asList(str);
    startPos=posOf.indexOf("start");
    v.mEmpty=false;
    v.setBackgroundResource(R.color.cell_empty);
    getDur();

     BitmapDrawable first = (BitmapDrawable)mContext.getResources().getDrawable(R.drawable.gress);
     BitmapDrawable second =(BitmapDrawable)mContext.getResources().getDrawable(R.drawable.ic_launcher);
     BitmapDrawable third = (BitmapDrawable)mContext.getResources().getDrawable(R.drawable.gress);
     BitmapDrawable fourth = (BitmapDrawable)mContext.getResources().getDrawable(R.drawable.ic_launcher);

    final AnimationDrawable ani = new AnimationDrawable();       
       ani.addFrame(first, duration);
       ani.addFrame(second, duration);
       ani.addFrame(third, duration);
       ani.addFrame(fourth, duration);
       ani.setOneShot(true);
     v.setImageDrawable(ani);        
       checkIfAnimationDone(ani); 
    v.post(new Runnable() {   
        public void run() {
               ani.start();
                }
        });
}
else if(map=="stop"){
    v.mEmpty=false;
    v.setBackgroundResource(R.color.cell_empty);
    v.setImageResource(R.drawable.ic_launcher);
    v.setTag(1);
}
else if(map=="grass"){
    v.mEmpty=false;
    v.setBackgroundResource(R.drawable.gress);

}
else{
   //    v.setBackgroundResource (R.color.drop_target_enabled);
v.setBackgroundResource (R.color.cell_empty);
}
//v.mGrid.requestDisallowInterceptTouchEvent (true);

//v.setImageResource (R.drawable.hello);

// Set up to relay events to the activity.
// The activity decides which events trigger drag operations.
// Activities like the Android Launcher require a long click to get a drag operation started.

return v; 
```

}

并在 onCreate 中定义 GridView：

```
gridView= new BoxView(this);

        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH){

              w.getDefaultDisplay().getSize(size);

              Measuredwidth = size.x;
              Measuredheight = size.y; 
            }else{
              Display d = w.getDefaultDisplay(); 
              Measuredwidth = d.getWidth(); 
              Measuredheight = d.getHeight(); 
            }
        int width = Measuredwidth/7*6;

    gridView.setLayoutParams(new GridView.LayoutParams(width,LayoutParams.FILL_PARENT, Gravity.CENTER_HORIZONTAL));
    gridView.setNumColumns(columns);
    gridView.setVerticalSpacing(0);
    gridView.setHorizontalSpacing(0);
    gridView.setPadding(0, 0, 0, 0);
    gridView.setId(101);
    gridView.setSelector(android.R.color.transparent);
    gridView.setAdapter (new ImageCellAdapter(this, MAP)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:46:28.680

我在你的代码中注意到一件事：

```
gridView.setLayoutParams(new GridView.LayoutParams(width,LayoutParams.FILL_PARENT, Gravity.CENTER_HORIZONTAL)); 
```

即使`GridView`是 a `ViewGroup`，您也无法访问它的`LayoutParams`。想一想，如果这可能，这意味着您可以将 a`GridView`放入 another`GridView`中。

在更进一步之前解决这个问题，因为它会惹恼你。

例如，如果您希望 GridView 位于 LinearLayout 中，请尝试以下操作：

```
gridView.setLayoutParams(new LinearLayout.LayoutParams(width,LayoutParams.FILL_PARENT, Gravity.CENTER_HORIZONTAL)); 
```

这是[此答案](https://stackoverflow.com/a/13689856/1392423)的正确实现：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /*You have to implement what things from the gridView sould be "saved"*/
        GridView gridView = new GridView(this) {

            @Override
            public Parcelable onSaveInstanceState() {
                // Create the Parceable object with the things you want to save
                                Parceable stateOfGrid = ....etc
                return stateOfGrid;
            }

                        @Override
            public void onRestoreInstanceState(Parcelable state) {
                // Restore your grid's parameters that you previously implemented in onSaveInstanceState
                super.onRestoreInstanceState(state);
                                ...
            }

        };

    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onRestoreInstanceState(savedInstanceState);

                if (savedInstanceState != null) {
                    Parcelable state = savedInstanceState.getParcelable("state");
                    if (state != null) {
                        gridView.onRestoreInstanceState(state);
                        Log.d(this.getClass().getName(), "state restored!");                
                    }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // Put your grid's Parceable into the bundle
        super.onSaveInstanceState(outState);
                Parcelable state = gridView.onSaveInstanceState();
                outState.putParcelable("state", state);
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:52:34.577

尝试使用这个标签：

```
android:configChanges="keyboard|keyboardHidden|orientation|screenSize" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T18:59:59.813

您可以使用[onSaveInstanceState (Bundle outState)](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29) 来保存您的网格视图的状态

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Parcelable state = gridView.onSaveInstanceState();
    outState.putParcelable("state", state);
} 
```

然后在将适配器设置为 grdiview 后在[onCreate中添加此代码](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)

```
if (savedInstanceState != null) {
  Parcelable state = savedInstanceState.getParcelable("state");
  if (state != null) {
    gridView.onRestoreInstanceState(state);
    Log.d(this.getClass().getName(), "state restored!");                
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:38:11.240

您的应用程序是否在横向模式下运行？

如果是，那么您应该考虑添加标签

`"android:configChanges="keyboard|keyboardHidden|orientation"`用于 Manifest.xml 中的活动，这将防止 android 系统在您解锁屏幕时杀死您的活动并重新启动它。

# c# - 抽象类的访问修饰符

> ID：13570177
> 
> 赞同：6
> 
> 时间：2012-11-26T17:39:13.453
> 
> 标签：c#, abstract-class, access-modifiers

如果我有一个抽象类

```
public abstract class Player
{
    //fields
    private Sport _sport;

    //properties
    protected Sport Sport
    {
        get { return _sport; }
        set { _sport = value; }
    }      
} 
```

这个受保护的访问修饰符是多余的，因为抽象不能被实例化吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T17:40:56.073

> 由于无法实例化抽象，因此此受保护的访问修饰符是否多余？

不，绝对不是。考虑：

```
Player player = new FootballPlayer();
Sport sport = player.Sport; 
```

`Sport`如果被宣布为公共财产而不是受保护，那将是有效的。当然，这实际上可能是您*想要*的，但目前只有派生类（及其内部`Player`）中的代码才能访问该`Sport`属性。

请注意，您的整个属性将作为等效的[自动实现属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)更简单：

```
protected Sport Sport { get; set; } 
```

或允许公开获取但受保护的设置：

```
public Sport Sport { get; protected set; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T17:40:38.240

不，`protected`在抽象类中不是多余的，因为它使派生实现类“具有”派生：

```
protected Sport Sport 
```

代替：

```
public Sport Sport 
```

如果您`private`完全使用或删除了修饰符，则`sport`仅对抽象类本身可见。

例如：

```
public abstract class Player
{
    // Changed to auto property to save some key strokes...
    protected Sport Sport { get; set;}
}

public RealPlayer : Player
{
    public void Foo(Sport sport)
    {
        this.Sport = sport; // Valid
    }
} 
```

在别的班...

```
var realPlayer = new RealPlayer();
realPlayer.Sport // Compilation error. 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-11-21T10:47:40.537

```
abstract class ProgressNotesDetail
{

}

 internal class ProgressNotes : ProgressNotesDetail
{

} 
```

抽象类中的默认访问修饰符----内部

# pandas - 从一些 odbc 连接到没有 csv 的 pandas 表的 itter

> ID：13570178
> 
> 赞同：1
> 
> 时间：2012-11-26T17:39:18.013
> 
> 标签：pandas, pyodbc

我在 pandas DataFrame 中有一些基本信息。我需要将它与我可以通过 pyodbc 连接访问的一些参考表连接起来。有没有办法将 sql 结果集放入 pandas DataFrame 而无需先将结果集写入 csv？

将这个额外的步骤转移到 csv 并进入 DataFrame 似乎是一种浪费。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T18:23:36.967

I've gotten `pyodbc` to work with my `SQL Server` instance, then, with some help from this [thread](https://stackoverflow.com/questions/10065051/python-pandas-and-databases-like-mysql), I got the sql return to load a dataframe.

I already setup a `pyodbc` connection, then made a call to it.

```
import pyodbc

import pandas.io.sql as psql

cnxn = pyodbc.connect(your_connection_info) 
cursor = cnxn.cursor()
sql = ("""SELECT * FROM Source""")

df = psql.frame_query(sql, cnxn)
cnxn.close() 
```

`df` should return your dataframe now. The hardest part for me was getting `pyodbc` up and running - I had to use `freetds` and it took a lot of trial and error to get it work.

# tags - 带有多个锚标记的 URL

> ID：13570179
> 
> 赞同：0
> 
> 时间：2012-11-26T17:39:23.153
> 
> 标签：tags, anchor

我必须建立直接指向 expedia 审查的 URL。我认为最好的解决方案是在 URL 上附加多个 Anchor 标记 ID。

像这样： [http ://www.expedia.it/Padova-Hotel-Hotel-M14.h4214808.Hotel-Information#reviews#BVRRDisplayContentReviewID_39211683](http://www.expedia.it/Padova-Hotel-Hotel-M14.h4214808.Hotel-Information#reviews#BVRRDisplayContentReviewID_39211683)

但它不起作用，这个网址不直接进入用户评论。

在 URL 的末尾附加#reviews 页面选项卡是正确的，但我必须使用 ID 锚标记直接进入用户评论。

[http://www.expedia.it/Padova-Hotel-Hotel-M14.h4214808.Hotel-Information#reviews](http://www.expedia.it/Padova-Hotel-Hotel-M14.h4214808.Hotel-Information#reviews)

评论 ID 为 BVRRDisplayContentReviewID_39211683

有谁知道如何破解这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:54:12.560

你实际上不能'双锚'..

最好的起点是阅读他们提供的现有共享链接，然后破解：

```
http://reviews.expedia.com/6510-<country/language site>/<hotel id>/review/<review id>/redirect.htm 
```

例如 [http://reviews.expedia.com/6510-it_it/4214808/review/39312750/redirect.htm](http://reviews.expedia.com/6510-it_it/4214808/review/39312750/redirect.htm)

# jquery - jQuery 多步表单动画问题

> ID：13570180
> 
> 赞同：1
> 
> 时间：2012-11-26T17:39:37.447
> 
> 标签：jquery, html, css

我对这个表格有疑问。这是我的[jsFiddle 文件。](http://jsfiddle.net/T8WRM/)

这是我的 JS

```
(function($) {
    $.fn.formToWizard = function(options) {
        options = $.extend({
            submitButton: ""
        }, options);

        var element = this;

        var steps = $(element).find("fieldset");
        var count = steps.size();
        var submmitButtonName = "#" + options.submitButton;
        $(submmitButtonName).hide();

        // 2
        steps.each(function(i) {
            $(this).wrap("<div id='step" + i + "'></div>");
            $(this).append("<p id='step" + i + "commands'></p>");

            if (i == 0) {
                createNextButton(i);
                selectStep(i);
            }
            else if (i == count - 1) {
                $("#step" + i).hide();
                createPrevButton(i);
            }
            else {
                $("#step" + i).hide();
                createPrevButton(i);
                createNextButton(i);
            }
        });

        function createPrevButton(i) {
            var stepName = "step" + i;
            $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Prev'>Back</a>");

            $("#" + stepName + "Prev").bind("click", function(e) {
                $("#" + stepName).hide();
                $("#step" + (i - 1)).show(function() {
                    $('.slide').animate({
                        left: "0"
                    }, 500);
                });
                $(submmitButtonName).hide();
                selectStep(i - 1);
            });
        }

        function createNextButton(i) {
            var stepName = "step" + i;
            $("#" + stepName + "commands").append("<a href='#' id='" + stepName + "Next' class='next'>Next</a>");

            $("#" + stepName + "Next").bind("click", function(e) {
                $("#" + stepName).hide();
                $("#step" + (i + 1)).show(function() {
                    $('.slide').animate({
                        left: "0"
                    }, 500);
                });
                if (i + 2 == count) $(submmitButtonName).show();
                selectStep(i + 1);
            });
        }

        function selectStep(i) {
            $("#steps li").removeClass("current");
            $("#stepDesc" + i).addClass("current");
        }

    }
        })(jQuery);

    $("#SignupForm").formToWizard({ submitButton: 'SaveAccount' })
​ 
```

我想要它做的是当我单击下一步时从左（*左到右*）滑入，当我单击“返回”时我希望它向左滑动（*从右到左*）。

我在哪里做动画

> $("#step" + (i + 1)).show(function() { $('.slide').animate({ left: "0" }, 500); });

当您选择流派然后单击返回时，类似于[8 Tracks 。](http://8tracks.com)

非常感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:17:06.523

刚刚看了你的例子。你以错误的方式解决这个问题。

看看 8tracks 上的标记。这 3 张幻灯片从未`hidden`使用 css 或 jQuery制作`.hide()`。它们是“隐藏的”，因为它们前面还有另一个 div，所以它们对用户是“隐藏的”，但在技术上是可见的。

他们不是滑动单个“页面”，而是将所有 3 个页面作为一个单元滑动。但是，覆盖先前“隐藏”页面的 div 保持静态。

想象一下，您的表单页面是装配线上的 3 张纸，而您正以鹰的视野向下看。您一次只能看到一张纸（因为有一个隔板挡住了其他纸）。当您想移动到下一页时，您在装配线上按“下一步”。所有 3 个页面都向左移动一个插槽，您现在可以看到下一页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:08:57.920

要看到来自右边的东西，它实际上需要在那里！您的代码中缺少的是右侧的元素：

```
$("#" + stepName).animate({
    left: "100%"
}, 0); 
```

这是 jsFiddle ：

[http://jsfiddle.net/T8WRM/16/](http://jsfiddle.net/T8WRM/16/)

如果你想让你的前一个元素移动，我离开了动画功能，这样做删除 .show() 和 .hide 以查看完整的移动

编辑 ：

要清楚滑块的事情，它不是这样工作的，这意味着您应该将视图放在一边（大多数时候通过将它们绝对定位在不同的 z-index 上）并通过视图或组合移动所有视图（上一个，下一个，当前）

# scala - 如何手动过期 Play 2 缓存

> ID：13570181
> 
> 赞同：0
> 
> 时间：2012-11-26T17:39:37.930
> 
> 标签：scala, playframework, playframework-2.0, ehcache

根据 Play 2[文章](http://www.playframework.org/documentation/2.0/ScalaCache)，有一些方法可以设置缓存，包括缓存超时（在 API 规范中），但是我需要能够根据需要手动使整个缓存过期，有没有办法做到这一点？特别是，我使用`Cached`, 不是`Cache`为了缓存 HTTP 响应

```
 def get(key: String) = Cached("key-" + key, duration = 3600) {
    Action {
      Ok(some_method)
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:45:28.657

在 play2.1 你可以做`Cache.remove("item.key")`

升级到 RC1 不是主要的，而且看起来和 2.0.4 一样稳定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:27:18.233

Play 2 的当前缓存 API 是……非常综合的。

似乎唯一的方法（我也在使用）是设置秒`null`值：`0`

```
Cache.set("item.key", null, 0) 
```

**编辑**

实际上，在 Java **Cached** API 中，我从来没有很好地工作过，不知道为什么，也许我忽略了一些东西，所以我`Cache`在动作中使用 common 来缓存它`Result`

```
public static Result index() {
    Result cachedResult = (Result) Cache.get("applicationIndex");
    if (cachedResult == null) {
        Result res = ok(index.render("Ready " + Math.random()));
        Cache.set("applicationIndex", res, 5);
        cachedResult = res;
    }
    return cachedResult;
} 
```

因此，使用以前的示例，您可以使用以下方法使其无效：

```
Cache.set("applicationIndex", null, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T01:33:20.637

您可以使用这个 play [memcached 模块](https://github.com/mumoshu/play2-memcached)并运行您自己的[memcached 服务器](http://www.couchbase.com/memcached)。那有一个 api 可以手动使整个缓存过期。在生产中，此设置还为您提供了具有持续重启的缓存和一些有用的缓存统计信息的额外好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-03T11:30:28.833

如果您仍然遇到使用“缓存”而不是“缓存”无效的问题，请尝试以下两行代码：

```
Cache.remove("item.key")
Cache.remove("item.key" + "-etag") 
```

Cached 还需要删除“-etag”缓存对象。

# visual-studio - 使用较新的 Visual Studio 构建与 MSVC6 兼容的 DLL

> ID：13570187
> 
> 赞同：0
> 
> 时间：2012-11-26T17:39:48.940
> 
> 标签：visual-studio, dll, visual-studio-2010

我即将开始一个项目，为使用 MSVC6 构建的大型仿真系统构建插件，并提供使用 MSVC6 编译 DLL 的说明。

我有 MSVC10 和 2012 可用，我想知道是否甚至可以配置这些以构建“向下”到 MSVC6 兼容性。似乎上次我研究这个时，答案是响亮的“不”。我必须找到旧的 MSVC6 安装吗？

更新：还有一个我可以开发的 64 位 Visual Studio 2008 版本，所以同样的问题：我可以配置一个“新”的 Visual Studio（比如 2012 左右）来编译到 VC6 或 2008 兼容性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:08:17.350

您可以采用另一种方法，如果您将新项目创建为 COM dll，您可以从 MSVC6 与其交互，但是您还需要在生成的设置中提供任何新的链接运行时 dll。

# attributes - 动力学javascript在点击时获得价值

> ID：13570189
> 
> 赞同：1
> 
> 时间：2012-11-26T17:39:56.417
> 
> 标签：attributes, get, onclick, kineticjs

我有一个点数组（一对x，y），我用这些点画圆

```
for (var i = 0; i < points.length;i++){         

            var circle = new Kinetic.Circle({
                x: points[i].x,
                y: points[i].y,
                radius: 7,
                fill: "green",
                stroke: "black",
                name:i,
                strokeWidth: 2
            });

            circle.on("click", function() {
                alert(name); //here I want to get name of circle 
            });

            layer.add(circle);                                              
        } 
```

我为每个圆圈添加了新的属性名称，例如 ID，并且我想在单击鼠标时提醒圆圈的名称。

我不确定将新属性名称添加到 circle 是否正确。

那么，如何向圆圈添加新属性“名称”，以便在单击圆圈时提醒其名称值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:01:48.880

试试下面的代码

```
<!DOCTYPE HTML>
<html>
<head>
    <style>
        body
        {
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>
<body onload="displaycircle()">
    <div id="container">
    </div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.0.js"></script>
    <script>
        function displaycircle() {
            var stage = new Kinetic.Stage({
                container: 'container',
                width: 578,
                height: 200
            });
            var layer = new Kinetic.Layer();
            for (var i = 0; i < 10; i++) {
               var circle = new Kinetic.Circle({
                    x: Math.random() * stage.getWidth(),
                    y: Math.random() * stage.getHeight(),
                    radius: 30,
                    fill: "green",
                    stroke: "black",
                    name: i,
                    strokeWidth: 2,
                    draggable: true
                });
                layer.add(circle);
                stage.add(layer);
                circle.on("click", function() {
                    alert(this.attrs.name); //here you can get name of circle 
                });
            }
        }
    </script>

</body>
</html> 
```

# .net - 尝试在列表视图中搜索列并返回结果

> ID：13570190
> 
> 赞同：1
> 
> 时间：2012-11-26T17:39:57.897
> 
> 标签：.net, vb.net, string, visual-studio-2010, listview

我正在从指定的索引中搜索我的列表视图并返回单词的第一个结果（项目所在的索引）。它工作得很好，除了我只能搜索列表视图中的第一列。如何仅搜索第二列？

```
Private Function FindLogic(ByVal LV As ListView, ByVal CIndex As Integer, ByVal SearchFor As String) As Integer
Dim idx As Integer
Dim It = From i In LV.Items Where i.index > CIndex And i.Text = SearchFor
If It.Count > 0 Then
    idx = It(0).Index
Else
    idx = -1
End If
Return idx
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:53:55.670

您需要访问 ListViewItem 的 ListViewSubItems 以获取其他列。使用子项，您将能够按索引搜索不同的列，而不仅仅是搜索文本。您可以简单地在循环中使用循环来执行搜索。如果您愿意，您可以明确表示，因为您知道您只想搜索第二列，但是通过在循环中使用循环，您实际上可以搜索任何列。这是一个示例：

```
Dim idx As Integer = -1
For Each lvi As ListViewItem In Me.lvwData.Items
    If lvi.SubItems(1).Text = "TextToSearchFor" Then
        idx = lvi.Index
    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:52:58.343

我已经想通了。此解决方案允许您选择指定的索引开始搜索并检查索引为 1 的列。（通常是您的第二列）

```
 Private Function FindLogic(ByVal LV As ListView, ByVal CIndex As Integer, ByVal SearchFor As String) As Integer
    Dim idx As Integer
    Dim It = From i In LV.Items Where i.index > CIndex And i.SubItems(1).Text = SearchFor
    If It.Count > 0 Then
        idx = It(0).Index
    Else
        idx = -1
    End If
    Return idx
    End Function 
```

您还可以在函数中添加另一个参数，以便您可以选择不同的列来检查字符串，如下所示：

```
 Private Function FindLogic(ByVal LV As ListView, ByVal CIndex As Integer, ByVal Column As Integer, ByVal SearchFor As String) As Integer
    Dim idx As Integer
    Dim It = From i In LV.Items Where i.index > CIndex And i.SubItems(Column).Text = SearchFor
    If It.Count > 0 Then
        idx = It(0).Index
    Else
        idx = -1
    End If
    Return idx
    End Function 
```

要使用这个函数，它看起来像这样：

```
 FindLogic(Listview1, 1, 1, "Dog") 
```

你也可以让它从一个选定的项目中搜索，如下所示：

```
 FindLogic(Listview1, 1, LV.SelectedIndices(0), "Dog") 
```

# google-maps - 如何将 json 编码的 php 数组传递给谷歌地图 latlng 以重绘多边形

> ID：13570191
> 
> 赞同：1
> 
> 时间：2012-11-26T17:40:04.213
> 
> 标签：google-maps, google-maps-api-3

我一直在努力在谷歌地图上重新绘制多边形，但现在卡住了。

我有一个从 mysql 数据库收集纬度和经度信息的 php 数组。然后对其进行 json 编码以在 javascript 中使用。json 给了我我需要的东西，但我的问题是如何进一步处理 json 以在新的 google.maps.LatLng(); 当它需要2个参数时的构造函数？

这是到目前为止的内容。json 看起来像这样打印出来：

["-29.446736427714118\r\n-28.562776229541612\r\n151.33620268749996\r\n150.85280424999996\r\n"]

它给了我我需要的数组中的数字，但是我如何将它作为 2 个参数传递到以下代码中？

感谢任何先进的人！

```
var coords = [  

var polygons = [];

    var pol = new google.maps.LatLng(Latit,Longit);

]; 
```

//构造多边形polygons.push(new google.maps.Polygon({ path: coords

})); 多边形[polygons.length-1].setMap(map); //你的地图ob

# php - 删除已定义名称错误的上传文件

> ID：13570192
> 
> 赞同：0
> 
> 时间：2012-11-26T17:40:09.830
> 
> 标签：php, codeigniter

下面是我在codeigniter中的上传功能。我可以上传文件。我还检查文件名是否与 url 参数匹配。如果名称与 url 不匹配，我如何删除文件。我尝试了取消链接功能，但它不起作用

```
function do_upload() {

    $this->makeDir();

    $labref = $this->uri->segment(3);
    $filename = 'xyz/'. date('Y').'/'.date('M').'/'. $labref .'/' . $labref . '.xlsx';
    if (file_exists($filename)) {
        $data['labref'] = $this->uri->segment(3);
        $data['settings_view'] = 'analyst_file_present_v';
        $this->base_params($data);
    } else {

        $config['upload_path'] = 'xyz/'. date('Y').'/'.date('M').'/'. $labref  ;
        $config['allowed_types'] = 'xls|xlsx';
        $this->load->library('upload', $config);
        $data=  $this->upload->data();
        if ($data['file_name']=="$labref.'.xlsx'") {                
          $this->SaveFileDetails();
        $this->success();
        }else{            
         $filename = 'xyz/'.date('Y').'/'.date('M').'/'. $labref.'/'.$labref.'xlsx'  ;
           unlink($filename);
           echo 'You have uploaded a wrong file';
        }

        if (!$this->upload->do_upload('worksheet')) {
            $data['labref'] = $this->uri->segment(3);
            $data['error'] = $this->upload->display_errors();

            $data['settings_view'] = 'upload_analyst_v';
            $this->base_params($data);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:07:04.047

你有一些非常讨厌的报价不匹配：

```
 if ($data['file_name']=="$labref.'.xlsx'") {                
                                     ^-----^--- 
```

由于您在双引号字符串中，因此这些`'` 将成为文件名的一部分。也许你的意思是：

```
 if ($data['file_name']== $labref .'.xlsx') { 
```

反而？（注意缺少`"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:45:35.747

在我看来，您正在尝试删除错误的文件。

你应该更换：

```
$filename = 'xyz/'.date('Y').'/'.date('M').'/'. $labref.'/'.$labref.'xlsx'  ; 
```

和：

```
$filename = 'xyz/'.date('Y').'/'.date('M').'/'. $labref.'/' . $data['file_name']; 
```

删除上传的文件。

**编辑：**您必须先进行上传，然后才能访问错误和数据，因此您应该将`$this->upload->do_upload()`块移动到`if`语句之前。

# vb.net - 如何遍历 DataTable 并解密字段？

> ID：13570196
> 
> 赞同：0
> 
> 时间：2012-11-26T17:40:29.347
> 
> 标签：vb.net

**再会，**

在将其项目分配给 Listview 控件 (ListViewRecords) 之前，我需要帮助遍历 DataTable (dbTable) 并解密特定字段 (ccNumber)。

我已经在我的项目中的其他地方成功地使用了下面的解密代码，但无法弄清楚如何使用 DataTable。非常感谢您的帮助，谢谢。

**这是解密代码：**

```
 Dim DES As New System.Security.Cryptography.TripleDESCryptoServiceProvider
    Dim Hash As New System.Security.Cryptography.MD5CryptoServiceProvider
    Try
        DES.Key = Hash.ComputeHash(System.Text.ASCIIEncoding.ASCII.GetBytes(My.Settings.Key))
        DES.Mode = System.Security.Cryptography.CipherMode.ECB
        Dim DESDecrypter As System.Security.Cryptography.ICryptoTransform = DES.CreateDecryptor
        Dim Buffer As Byte() = Convert.FromBase64String(TextBoxCard.Text)
        TextBoxCard.Text = System.Text.ASCIIEncoding.ASCII.GetString(DESDecrypter.TransformFinalBlock(Buffer, 0, Buffer.Length))
    Catch ex As Exception
        MessageBox.Show("The following error(s) have occurred: " & ex.Message, Me.Text, MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try 
```

**这是查询数据库并填写列表视图的代码：**

```
Private Sub loadRecords()
    'FOR MySQL DATABASE USE
    Dim dbConn As New MySqlConnection
    Dim dbTable As New DataTable
    Dim dbQuery As String = ""
    Dim dbCmd As New MySqlCommand
    Dim dbAdapter As New MySqlDataAdapter
    dbTable.Clear()

    Try

        If dbConn.State = ConnectionState.Closed Then
            dbConn.ConnectionString = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
            dbConn.Open()
        End If

        dbQuery = "SELECT *" & _
                   "FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumber " & _
                   "ORDER BY nameCOMPANY ASC"
        With dbCmd
            .CommandText = dbQuery
            .Connection = dbConn
        End With
        With dbAdapter
            .SelectCommand = dbCmd
            .Fill(dbTable)
        End With
        ListViewRecords.Items.Clear()
        For i = 0 To dbTable.Rows.Count - 1
            With ListViewRecords
                .Items.Add(dbTable.Rows(i)("ccID"))
                With .Items(.Items.Count - 1).SubItems
                    .Add(dbTable.Rows(i)("nameCOMPANY"))
                    .Add(dbTable.Rows(i)("ccNumber"))
                    .Add(dbTable.Rows(i)("ccExpireMonth"))
                    .Add(dbTable.Rows(i)("ccExpireYear"))
                    .Add(dbTable.Rows(i)("ccType"))
                    .Add(dbTable.Rows(i)("ccAuthorizedUseStart"))
                    .Add(dbTable.Rows(i)("ccAuthorizedUseEnd"))
                    .Add(dbTable.Rows(i)("ccLocation"))
                    .Add(dbTable.Rows(i)("cardholderSalutation"))
                    .Add(dbTable.Rows(i)("cardholderLastname"))
                    .Add(dbTable.Rows(i)("cardholderFirstname"))
                    .Add(dbTable.Rows(i)("ccZipcode"))
                End With
            End With
        Next
    Catch ex As MySqlException
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                    vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    End Try
    dbConn.Close()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:37:17.300

将解密的东西放在一个函数中：

```
Function Decrypt(ByVal ToDecrypt) as String
Dim DES As New System.Security.Cryptography.TripleDESCryptoServiceProvider
        Dim Hash As New System.Security.Cryptography.MD5CryptoServiceProvider
        Try
            DES.Key = Hash.ComputeHash(System.Text.ASCIIEncoding.ASCII.GetBytes(My.Settings.Key))
            DES.Mode = System.Security.Cryptography.CipherMode.ECB
            Dim DESDecrypter As System.Security.Cryptography.ICryptoTransform = DES.CreateDecryptor
            Dim Buffer As Byte() = Convert.FromBase64String(ToDecrypt)
            return  System.Text.ASCIIEncoding.ASCII.GetString(DESDecrypter.TransformFinalBlock(Buffer, 0, Buffer.Length))
        Catch ex As Exception
            return "Whatever failed message you want"
        End Try
End Function 
```

然后像这样循环遍历您的表并更改值：

```
for i as Integer = 0 to dbTable.Rows.Count - 1
dbTable.Rows(i)("ccNumber")) = Decrypt(dbTable.Rows(i)("ccNumber")) 
```

如果我没有完全关闭，这应该可以工作。

# algorithm - 谜语：如何改变矩阵颜色？

> ID：13570198
> 
> 赞同：3
> 
> 时间：2012-11-26T17:40:41.110
> 
> 标签：algorithm, language-agnostic, graph, matrix

有一个矩阵 M*N。矩阵元素是黑色或白色。我们称相邻元素的同色*区域*。您可以选择任何*区域*并*翻转*其颜色（即更改其所有元素的颜色）。给定这样一个矩阵，找出使整个矩阵变为黑色或白色所需的最少*翻转次数。*

**解决方案：**它看起来像一个图形问题。矩阵元素是图顶点。如果对应的矩阵元素是“邻居”并且具有相同的颜色，则顶点是连接的。答案是图中*连通分量*的数量。

是否有意义？

**固定解决方案：**感谢@ypercube 和@Billiska，解决方案应固定如下：

*   找到连接的组件（如上）并考虑这些组件的图表。
*   找到图形[中心](http://en.wikipedia.org/wiki/Graph_center)，翻转它，制作一个新图形，然后重复，直到图形只包含一个顶点。

我们仍然需要证明翻转图形中心会使翻转次数最少。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:56:45.920

您提出了解决方案：

> 它看起来像一个图形问题。矩阵元素是图顶点。如果对应的矩阵元素是“邻居”并且具有相同的颜色，则顶点是连接的。答案是图中连通分量的数量。

以及改进：

> 然后必须找到“黑色”和“白色”连通分量的数量，并选择两者中最小的一个。

这似乎很好，但答案并不像起初看起来那么简单。考虑这个矩阵，其中有 13 个黑色连接组件和 4 个白色连接组件。：

```
B w B w B w B w B
w w w w B w w w w
B w B B B B B w B
w w B B B B B w w
B B B B B B B B B  
w w B B B B B w w
B w B B B B B w B
w w w w B w w w w
B w B w B w B w B 
```

不过，最小的解决方案只有 2 步。首先翻转（到白色）中央大黑色组件。结果，翻转的 1 个和 4 个白色组件现在连接成一个组件。将其翻转为黑色，所有板都是黑色的。

因此，在这种情况下，最小值只有 2 步，而不是 4 步。

因此，在您建立连接（黑色和白色组件）之后，我们就有了这些组件之间的连接图（就像在@Biliska 的回答中一样）。这是上述矩阵的图表：

```
 B
        |
     B--w--B
        |
    B   |   B
    |   |   |
B---w---B---w---B
    |   |   |
    B   |   B
        |
     B--w--B
        |
        B 
```

我们现在需要找到图形的**[中心](http://en.wikipedia.org/wiki/Graph_center)**，或者只是一个中心点，例如一个节点 A，其中到其他节点 B 的最大距离 d(A,B) 是最小的（这个最小的最大距离有时被称为“偏心率”） . 从图中可以明显看出，对于上图，中心点正好有一个，“偏心率”为 2。

当偏心率为`n`时，至少有一个“最大”路径长度`2n-1`或`2n`（`2n`或`2n+1`节点）。在我们的例子中：

```
B-w-B-w-B 
```

由于这些图中的任何路径中的节点都是顺序黑白的，因此不难证明所需的最小更改恰好是`n`（在这种情况下为 2）并且可以通过始终更改中心区域来实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T18:09:20.527

这个问题可以作为[最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)来解决。

将您的问题建模为状态图`G=(V,E)`，其中`V = possible states (matrix states)`和`E = { (u,v) | can move from state u to state v with single "flip" }`

现在，一旦你有了图表——你所要做的就是使用一些最短路径算法。

由于该图未加权 - 您可以使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)作为您的最短路径算法。如果你能找到一些[可接受的启发式函数](http://en.wikipedia.org/wiki/Admissible_heuristic)——你也可以使用[A* 算法](http://en.wikipedia.org/wiki/A%2a_search_algorithm)——使用下降启发式预计会更快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T18:18:21.083

首先，您不再尝试将问题建模为**单元**的连接图，而实际上您应该将问题建模为**区域的连接图**

例如

```
b w b w b
w b b w b
w w b b w 
```

转化为面积符号为：

```
1 2 3 4 5
6 3 3 4 5
6 6 3 3 7 
```

更好地表示为：

```
1 - 2   4 - 5
|   | /     |
6 - 3 - - - 7 
```

现在接下来要做的是重复执行`flip`操作以合并区域。我不确定贪婪地翻转**连接最多**的区域是否正确。

例如，我将首先翻转区域 3，因为它有 4 个连接。然后我得到：

```
1       5
  \   /
   (3) 
```

然后再次翻转区域 3，因为它有 2 个连接：

```
 (3) 
```

完毕

因此，您可以看到`flip`操作具有将所有相邻节点合并到正在翻转的节点的效果。

编辑：事实上，大多数连接的贪婪翻转区域并不是最佳的。以我之前评论过的一维示例为例。

输入：

```
 middle
                v
b w b w b w b w b w b w b w b w b
<---4 times--->   <---4 times---> 
```

您可以看到，任何区域的连接次数最多为 2。但最有效的算法只会选择翻转中间区域。

# git - Git：即时抓取哈希

> ID：13570199
> 
> 赞同：0
> 
> 时间：2012-11-26T17:40:45.190
> 
> 标签：git, github

我非常怀疑我能做到这一点，因为提交哈希是在提交时生成的，但是有没有一种方法可以在我提交时动态保存提交的哈希号。

示例：
我进行了一些更改并提交
提交哈希保存到文件
然后我将提交同步到 Github 服务器

理想情况下，我想要的是一种防弹方法，可以知道哪个提交版本是我正在查看的文件。我可以实现版本，但鉴于开发速度极快（通常在几分钟内提交 5-6 次），它非常不切实际。

我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:45:49.923

您可能会考虑使用[Git 提交后挂钩](http://git-scm.com/book/ch7-3.html)，尽管提交哈希必须存储在单独的文件中，正如其他人在上面提到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:53:46.957

不，您不能在提交中的文件中包含提交 ID。标识提交的 sha1 哈希，因此将一个 ID 插入文件将导致将用于提交的哈希更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:54:09.190

> 有没有一种方法可以在我提交时动态保存提交的哈希号

不会。标识提交的哈希是在提交对象完全创建时生成的。因此，只有在完成提交、编写提交消息等之后，您才能访问提交哈希。

但是，当您在示例中编写它时，您似乎首先提交然后将提交哈希保存到文件中。如果您不想将该文件包含在提交本身中（这不起作用，因为它会更改提交中的树），那么这是完全可能的。

获取当前 HEAD 哈希的简单命令，即指向您刚刚创建的提交的指针是这样的：

```
git rev-parse HEAD 
```

> 理想情况下，我想要的是一种防弹方法，可以知道哪个提交版本是我正在查看的文件。

您可能想要的是类似 Subversion 的`$Revision: X$`. 但由于上述原因，这是不可能的。您*可以*做的是提供在结帐时执行此类操作的清洁/涂抹过滤器，但我不建议这样做。

另一种方法是`ident`在文件上使用该属性，该属性实际上确实扩展`$Id$`为*blob* id。虽然不是提交 ID。另请参阅[此问题](https://stackoverflow.com/questions/1792838/enable-ident-string-for-git-repos)。

# visual-studio-2008 - MSTest /runco nfig - 不运行任何测试

> ID：13570201
> 
> 赞同：1
> 
> 时间：2012-11-26T17:40:47.577
> 
> 标签：visual-studio-2008, mstest, testrunconfig

如果我不指定 /runco​​nfig 文件，我正在运行 MSTest.exe 没有任何问题。但是，只要我指定了配置文件（这是完全相同的文件，但在不同的位置），测试就会输出以下内容：

```
Loading C:\myapp\conf\unit-test-local\App.config...
C:\myapp\conf\unit-test-local\App.config
C:\myapp\conf\unit-test-local\App.config 
```

如果我在*没有*/runco​​nfig 的情况下运行该命令，它会正常运行并显示：

```
Loading C:\myapp\src\UnitTests\bin\Debug\UnitTests.dll... 
```

它肯定会找到 App.config 文件，因为如果我故意输入错误的文件名，它会抱怨。我的 conf 目录中的 App.config 是我未指定 /runco​​nfig 时使用的那个的精确副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:45:50.270

`/runconfig`不是指`app.config`文件，而是在[*.Testrunco​​nfig](http://msdn.microsoft.com/en-us/library/ms182489%28v=vs.100%29.aspx#runconfig)

此文件包含有关您希望测试运行方式的几个设置。

# google-apps-script - 将 Blob 从 HTML 转换为 PDF 时图像未再现

> ID：13570205
> 
> 赞同：4
> 
> 时间：2012-11-26T17:41:16.283
> 
> 标签：google-apps-script

我想将 HTML 电子邮件转换为 PDF。我编写了以下代码。

```
 var txt = msgs[i].getBody();
      /* We need two blob conversions - one from text to HTML and the other from HTML to PDF */
      var blob = Utilities.newBlob(txt, 'text/html',"Test PDF");
      Logger.log(txt);
      var tempDoc = DocsList.createFile(blob);
      var pdf = tempDoc.getAs('application/pdf');
      pdf.setName('Email As PDF');
      DocsList.createFile(pdf); 
```

上面的代码首先从 Gmail 邮件的 HTML 中创建了一个 Blob，并使用 getAs() 函数将其转换为 PDF。但是，在 PDF 中找不到 HTML 中的图像。任何有关如何获取这些图像的想法将不胜感激。也欢迎任何关于如何将 gmail 消息转换为 PDF 的替代想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:11:13.083

有趣的问题。关于为什么这不起作用是有道理的 - PDF 转换不会打扰“渲染”HTML 去获取图像 src。

我做了一个快速测试并确认[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme#HTML)（不需要单独的 HTTP 调用的内联图像）可以处理图像。

因此，一种 hacky 解决方案可能是获取图像，然后将它们转换为 Data URI。这有一些缺点 - 很难找到这些图像（正则表达式很脆弱或不全面），大量 UrlFetch 调用（即使有一些缓存，大多数自动电子邮件发件人都会添加跟踪器，以便您最终重新获取相同的图像）和减缓。

兑换 -

`<img src="http://images.myserver.com/myimage.png..."/>`

To（您也可以动态检查内容类型）-

`<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhE..."/>`

# sql-server - 获取 SQL Server 2008 中的所有 SQL 查询计划

> ID：13570206
> 
> 赞同：0
> 
> 时间：2012-11-26T17:41:19.257
> 
> 标签：sql-server, query-optimization, sql-execution-plan, database-engine

我试图在 SQL Server Management Studio 2008 中获得估计的执行计划。

据我所知，它总是返回最佳查询计划，作为执行计划。现在我正在进行一项研究，我需要从 SQL Server 获取特定查询的所有可能查询计划，并强制引擎执行其中一个查询计划，该计划使用我的算法确定为更好的查询计划，如一个执行计划。

有谁知道我如何从 SQL Server 获取所有可能的查询计划以获取特定查询并强制它执行其中一个作为执行计划？

# ios - Cocos2d ccDrawLine 性能问题

> ID：13570211
> 
> 赞同：0
> 
> 时间：2012-11-26T17:41:31.177
> 
> 标签：ios, performance, cocos2d-iphone, drawing

我使用 cocos2d 2.0 和 Xcode 4.5。我正在努力学习如何画线。我可以画一条线，但在我画了几条线之后，模拟器上出现了严重的性能问题。

模拟器开始冻结，画线非常缓慢，最糟糕的是，我猜是因为`-(void)draw`每一帧都被调用，屏幕上的标签**变粗**

行前：

![在此处输入图像描述](../Images/176076f991cd92d75aaae9dd0fff7cda.png)

行后；

![在此处输入图像描述](../Images/e8f65a4b65d7ea064bceae1efaff61a4.png)

我使用以下代码：.m

```
-(id) init
{
    if( (self=[super init])) {

        CCLabelTTF *label = [CCLabelTTF labelWithString:@"Simple Line Demo" fontName:@"Marker Felt" fontSize:32];
        label.position =  ccp( 240, 300 );
        [self addChild: label];

        _naughtytoucharray =[[NSMutableArray alloc ] init];

         self.isTouchEnabled = YES;

    }
    return self;
}

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    BOOL isTouching;
    // determine if it's a touch you want, then return the result
    return isTouching;
}

-(void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event  {
    UITouch *touch = [ touches anyObject];
    CGPoint new_location = [touch locationInView: [touch view]];
    new_location = [[CCDirector sharedDirector] convertToGL:new_location];

    CGPoint oldTouchLocation = [touch previousLocationInView:touch.view];
    oldTouchLocation = [[CCDirector sharedDirector] convertToGL:oldTouchLocation];
    oldTouchLocation = [self convertToNodeSpace:oldTouchLocation];
    // add my touches to the naughty touch array
    [_naughtytoucharray addObject:NSStringFromCGPoint(new_location)];
    [_naughtytoucharray addObject:NSStringFromCGPoint(oldTouchLocation)];
}
-(void)draw
{
    [super draw];
    ccDrawColor4F(1.0f, 0.0f, 0.0f, 100.0f);
    for(int i = 0; i < [_naughtytoucharray count]; i+=2)
    {
        CGPoint start = CGPointFromString([_naughtytoucharray objectAtIndex:i]);
        CGPoint end = CGPointFromString([_naughtytoucharray objectAtIndex:i+1]);
        ccDrawLine(start, end);

    }
}
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    ManageTraffic *line = [ManageTraffic node];
    [self addChild: line z:99 tag:999];
} 
```

我看过一些空中交通管制游戏，例如**飞行控制，ATC Mania**效果非常好。

出现此性能问题是因为`CCDrawLine/UITouch *touch`还是常见问题？什么**飞行控制，ATC Mania**可能用于画线？

提前致谢。

编辑：：：：

好的我猜问题不是ccDrawLine，问题是我`ManageTraffic *line = [ManageTraffic node];`每次触摸结束它调用`init`节点时都会调用它所以它会覆盖场景

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    ManageTraffic *line = [ManageTraffic node];
    [self addChild: line z:99 tag:999];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:04:59.007

发生了三件事：

1.  您在模拟器上评估性能。正如 Ben 所说，在设备上进行测试。
2.  您将点存储为字符串并将字符串转换回 CGPoint。这是非常低效的。
3.  ccDrawLine 并不完全有效。对于几十个线段，没关系。在你的情况下可能不是（见下文）。

对于#2，创建一个只有 CGPoint 属性的点类，并使用它来将点存储在数组中。删除字符串转换或打包到 NSData。

对于＃3，请确保仅当新点距前一个点至少 n 点时才添加新点。例如，10 的距离应该减少点的数量，同时仍然允许相对精细的线条细节。

同样关于＃3，我注意到您将当前点和上一个点都添加到数组中。为什么？您只需添加新点，然后从索引 0 到 1、从 1 到 2 等绘制点。您只需要测试只有 1 分的情况。上一个触摸事件的位置始终是下一个触摸事件的previousLocation。因此，您存储的点数是您需要的两倍。

# c - 未读取的UDP数据包会发生什么？

> ID：13570212
> 
> 赞同：-2
> 
> 时间：2012-11-26T17:41:31.130
> 
> 标签：c, sockets, udp, buffer

在 C 语言中，我有一个简单的服务器/客户端 UDP 套接字编程示例。客户端以高速率向服务器发送数据包，而服务器读取每个传入的消息并将其发送回客户端。客户端永远不会读取任何传入的消息。

有没有理由相信发回客户端的数据包会**填满**客户端的**缓冲区**？如果客户不阅读任何内容，他们实际上会发生什么？他们会立即被**丢弃吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T17:44:40.057

内核会将数据包放入套接字的*接收缓冲区*，等待应用程序读取它们。当该缓冲区填满时，内核开始丢弃新的数据报。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T18:03:21.293

内核会将传入的数据包排队到某个限制，这可以通过设置 SO_RCVBUF 套接字选项在客户端上进行控制。当达到限制时，额外的数据包将被丢弃，内核可能会向发送者发送一个 Source Quench ICMP 消息。没有标准的方法可以在每个套接字的基础上进行控制。如果发送了 Source Quench 消息，您可以使用 IP_RECVERR 套接字选项在服务器上读取它们。

如果您什么都不做，那么 Source Quench 消息（如果已发送）可能会被忽略，尽管服务器的内核可能会在发送套接字上触发错误。但是，我不知道有任何操作系统可以执行此类操作。

一般来说，发送不需要的数据是浪费的，不应该这样做——客户端数据包可能包含一个比特，告诉服务器客户端是否期待响应，从而避免整个问题。

# java - Java - 以未知顺序将元素添加到 ArrayList

> ID：13570213
> 
> 赞同：1
> 
> 时间：2012-11-26T17:41:36.573
> 
> 标签：java, collections

发现了一个关于 ArrayList 的有趣的事情，

```
ArrayList<String> list = new ArrayList<String>();
list.add(0, "0-element");
list.add(1, "1-element");
list.add(2, "2-element"); 
```

但是，如果元素不是以未知的顺序出现的，例如。

```
ArrayList<String> list = new ArrayList<String>();
list.add(1, "1-element");  // IndexOutOfBoundsException
list.add(2, "2-element");
list.add(0, "0-element"); 
```

你得到 IndexOutOfBoundsException，这里唯一的选择是使用 Map 而不是 List？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:45:32.773

或多或少，是的。您不能`List`处于 index 有元素`i`但没有`i-1`;的状态。您不能在当前不存在的索引处添加元素`List`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T17:45:44.290

如果您阅读[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29)，它会说：

> 在此列表中的指定位置插入指定元素。将当前位于该位置的元素（如果有）和任何后续元素向右移动（将其索引加一）。
> **抛出**IndexOutOfBoundsException - 如果索引超出范围 (index < 0 || index > size())

因此，在您的第一个示例中，列表为空，并且在位置 0 中插入了一个元素（该元素尚不存在，但它是第一个可用的 - index = 0 <= size() = 0）。

在您的第二个示例中，您尝试插入位置 1，但位置 0 中没有任何内容，因此它失败（索引 = 1 > size() = 0）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:47:42.417

只需检查`add`ArrayList 中的方法实现即可得到答案

```
public void add(int index, E element) {
    if (index > size || index < 0)
        throw new IndexOutOfBoundsException(
        "Index: "+index+", Size: "+size);

    ensureCapacity(size+1);  // Increments modCount!!
    System.arraycopy(elementData, index, elementData, index + 1,
             size - index);
    elementData[index] = element;
    size++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:49:09.920

简单使用

```
list.add("element1");
list.add("element2");
list.add("element3); 
```

您得到 IndexOutOfBoundsException 的原因是您想要访问尚不存在的元素 1。

来自 ArrayList 文档

```
Throws:
IndexOutOfBoundsException - if the index is out of range (index < 0 || index > size()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T17:45:42.907

这是[记录在案](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)的：

> IndexOutOfBoundsException - 如果索引超出范围 (index < 0 || index > size())

您可以在添加之前进行测试：

```
if (pos>=list.size()) list.add(element);
else list.add(pos, element); 
```

但是你所做的很奇怪（这就是为什么没有方法进行测试和添加/插入的原因）。您真的要在索引处添加（即移动一些先前插入的元素）吗？你确定一个标准数组，允许你在任意索引处设置元素不是你需要的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T17:44:58.073

如果您的列表不包含重复项，并且您不关心订单，那么您可以使用`Set<String>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T17:45:58.077

首先你应该使用`ArrayList`as `List`：

```
List<String> list = new ArrayList<String>();
list.add("..."); 
```

我认为你也应该使用 a`Set`而不是 a `List`。

# loops - 尝试创建将在特定工作表上开始和结束的循环

> ID：13570214
> 
> 赞同：1
> 
> 时间：2012-11-26T17:41:38.180
> 
> 标签：loops, excel, excel-2007, vba

我是 VBA 新手。我正在尝试创建一组代码，允许我在一组工作表之间启动和停止循环。

背景：我有一个文件用于更新财务分析的几个重要因素，并且某些选项卡组合在一起。由于此文件总是添加和减去选项卡，因此我无法为一组工作表设置循环。我确实有一组标签，它们永远不会在每个分组之间移动。

所以我想创建一个循环，从选项卡“X+1”开始并循环直到它到达选项卡“Y-1”，因为我不希望循环到 ac。中间的代码我已经编写并完成了，但我还不太擅长循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:02:04.583

在当前工作簿中循环多个工作表的正确方法是：

```
Dim i As Integer
Dim wrksheet As Worksheet

For i = 1 To Sheets.Count
    Set wkrsheet = ThisWorkbook.Sheets(i)
    'Do work on wrksheet object
Next i 
```

您可以通过从大于 1 的数字开始或以小于 Sheets.Count 的数字结束来循环 Sheets 集合的任何子集，但请确保不要超出这些范围。

如果您希望过滤掉某些工作表，您可以通过检查来跳过基于工作表名称的逻辑`wrksheet.Name`。

确保您没有使用涉及`Sheet.Select`or的逻辑`.Activate`，这只会导致麻烦。您的代码应始终通过直接引用而不是依赖状态相关变量（如`ActiveSheet`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:38:01.537

```
Dim i as integer
For i = X+1 to Y-1
   Sheets(i).Select
    .... your code
Next i 
```

# scala - 组成两张地图

> ID：13570216
> 
> 赞同：6
> 
> 时间：2012-11-26T17:41:42.637
> 
> 标签：scala, dictionary

Scala 中是否有组合两个地图的功能，或者 flatMap 是一种明智的方法？

```
scala> val caps: Map[String, Int] = Map(("A", 1), ("B", 2))
caps: Map[String,Int] = Map(A -> 1, B -> 2)

scala> val lower: Map[Int, String] = Map((1, "a"), (2, "b"))
lower: Map[Int,String] = Map(1 -> a, 2 -> b)

scala> caps.flatMap {
     | case (cap, idx) => Map((cap, lower(idx)))
     | }
res1: scala.collection.immutable.Map[String,String] = Map(A -> a, B -> b) 
```

一些语法糖会很棒！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T17:50:06.037

如果您知道`lower`将包含中所有值的键，`caps`则可以使用`mapValues`：

```
scala> caps mapValues lower
res0: scala.collection.immutable.Map[String,String] = Map(A -> a, B -> b) 
```

如果您不想要或不需要一个新集合，只是一个映射，那么使用它会更惯用`andThen`：

```
scala> val composed = caps andThen lower
composed: PartialFunction[String,String] = <function1>

scala> composed("A")
res1: String = a 
```

这也假设没有`caps`未映射的值 in `lower`。

# ios - Facebook SDK 3.1 - 发送应用请求

> ID：13570220
> 
> 赞同：2
> 
> 时间：2012-11-26T17:41:49.210
> 
> 标签：ios, facebook

是否可以使用 iOS 3.1 的 Facebook SDK 发送应用请求？

Facebook 提供的文档不适用于新的 SDK：http: [//developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](http://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

以下是问题：

1) 文档告诉您导入 Facebook.h 并创建一个 Facebook 实例。这不是他们告诉您使用 3.1 创建 FB 连接的方式

2) 您不能使用新的 SDK 导入 Facebook.h

3) 但是，如果您将已弃用的标头导入应用程序，则可以使用新 SDK 导入 Facebook.h

4) 将不推荐使用的标头导入应用程序并按照上述链接上的说明进行操作后，您会发现数十个致命错误（重新定义/重复声明）。

我已经环顾四周，找不到任何解决方案。至少我发现其他人在同样的问题上苦苦挣扎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:57:14.953

我通过不在同一个文件中修复了所有`#import "Facebook.h"`错误`#import <FacebookSDK/FacebookSDK.h>`。

无论如何，这种支持应用请求等良好功能的方式很糟糕！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-26T18:00:00.977

我使用 CocoaPods.org 并让它为我完成所有艰苦的工作：D

[http://www.cocoapods.org](http://www.cocoapods.org)

# salesforce - 在 Salesforce 中计算合同结束日期？

> ID：13570221
> 
> 赞同：2
> 
> 时间：2012-11-26T17:42:04.567
> 
> 标签：salesforce

是否有解决方法来计算 Salesforce 中已完成交易的准确合同结束日期？我们有一个基于 计算合同结束日期的字段`[ Revenue_Date__c + ( Contract_Length__c * 30) ]`，但是，这是基于所有月份都有 30 天的假设，是否可以解决此问题以获得更准确的合同结束日期？
我们使用的是 Salesforce 专业版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:46:30.330

据我所知，用函数/公式来做这件事会非常棘手。你可以开始试验这个找到当月月底的东西：

```
DATE(
    YEAR(TODAY()),
    MONTH(TODAY()),
    CASE( MONTH(TODAY()),
        1, 31,
        2, IF( MOD( YEAR(TODAY()), 4) = 0, 29, 28),
        3, 31,
        4, 30,
        5, 31,
        6, 30,
        7, 31,
        8, 31,
        9, 30,
        10, 31,
        11, 30,
        12, 31,
        DAY(TODAY())
    )
) 
```

您可以尝试计算天数与今年年底、明年等（取决于合同期限）之间的差异，但这将是一个非常讨厌的解决方案。每次看到国产日期处理“图书馆”时，我都会哭泣......

你能把逻辑移到顶点吗？在一个简单的“插入前，更新前”触发器中，它会很容易：

```
for(My_Object__c o : trigger.new){
    o.Contract_End_Date__c = o.Contract_Start_Date__c.addMonths(o.Contract_Length__c);
} 
```

在“之前”触发器中，您可以免费保存到数据库作为奖励；）因此，如果它是公式字段，用户会看到它基本上相同。

# java - 局部方法变量，无法识别

> ID：13570222
> 
> 赞同：2
> 
> 时间：2012-11-26T17:42:07.010
> 
> 标签：java

我有一个方法`public int bar()`，我在其中声明了一个`int total`（在方法体 ofc 中）。所以这应该是一个简单的局部变量，问题是eclipse抱怨

```
Description Resource    Path    Location    Type
The local variable total may not have been initialized  Repository.java /proj_individual/src/repo   line 35 Java Problem 
```

一般示例：

```
public int foo(){
    int total;
    for(... : ...){
        total += 1; // complains
    }
    return total;// complains
} 
```

和我的确切代码：

```
public int getLocatars(){
    int total;
    for ( Map.Entry<Apartment, List<Expense>> entry : dic.entrySet() ) {
        if(entry.getKey().isDebt()){
            total += entry.getKey().getNrProple();
        }
    }
    return total;
} 
```

我不知道我做错了什么，所以任何想法都是有帮助的，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T17:44:05.800

您的变量未明确分配值，因此您无法读取它。

想象一下，如果您的条目集是空的，或者没有`debt`条目……您想要返回什么值？

不仅如此，即使它*确实*进入了循环的最内部，您希望添加到什么初始值？

与静态和实例字段不同，局部变量没有默认值：您必须在读取它们之前为其赋值。我怀疑你只是想要：

```
int total = 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T17:44:34.380

将其更改为：

```
int total; 
```

至：

```
int total = 0; 
```

为了更好地理解，请参阅：[声明和初始化之间的区别。](https://stackoverflow.com/questions/2614072/java-define-terms-initialization-declaration-and-assignment)

# ruby - 在 Win7 中的 ruby 命令提示符下安装 Rubygems 时出错

> ID：13570226
> 
> 赞同：2
> 
> 时间：2012-11-26T17:42:15.333
> 
> 标签：ruby, rubygems, devkit

尝试在 Win7（32 位）的 Ruby 命令提示符上安装 ruby​​gems 时出现以下错误。请注意，我已经安装了 Ruby1.9.3 并将 devkit (DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe) 添加到 Ruby。

以下是我尝试过的所有事情：

```
 C:\devkit>ruby dk.rb init

 [INFO] found RubyInstaller v1.9.3 at C:/Ruby193

 Initialization complete! Please review and modify the auto-generated
 'config.yml' file to ensure it contains the root directories to all
 of the installed Rubies you want enhanced by the DevKit.

 C:\devkit>ruby dk.rb install

 [INFO] Updating convenience notice gem override for 'C:/Ruby193'
 [INFO] Installing 'C:/Ruby193/lib/ruby/site_ruby/devkit.rb'

 C:\rubygems-1.8.24>ruby setup.rb install

 C:/rubygems-1.8.24/lib/rubygems/config_file.rb:53:in `sysconfdir': code converte
 r not found (UTF-16LE to Windows-1258) (Encoding::ConverterNotFoundError)
 from C:/rubygems-1.8.24/lib/rubygems/config_file.rb:53:in `<class:Config
 File>'
 from C:/rubygems-1.8.24/lib/rubygems/config_file.rb:30:in `<top (require
 d)>'
 from C:/rubygems-1.8.24/lib/rubygems/custom_require.rb:36:in `require'
 from C:/rubygems-1.8.24/lib/rubygems/custom_require.rb:36:in `require'
 from C:/rubygems-1.8.24/lib/rubygems/gem_runner.rb:9:in `<top (required)>'
 from C:/rubygems-1.8.24/lib/rubygems/custom_require.rb:36:in `require'
 from C:/rubygems-1.8.24/lib/rubygems/custom_require.rb:36:in `require'
 from setup.rb:28:in `<main>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:48:41.577

我通过在下拉列表中选择“英语（美国）”而不是之前在“区域和语言选项”窗口的“高级”选项卡中的下拉列表中选择“越南”自行解决了这个问题，然后问题已得到解决.

# symfony - Bundle 名称中的 Symfony2 TitleCase 产生命名空间错误和包配置

> ID：13570228
> 
> 赞同：0
> 
> 时间：2012-11-26T17:42:25.320
> 
> 标签：symfony, dependency-injection, namespaces, symfony-2.1

生成捆绑包时，TitleCase 名称是否有效？例如，`Acme\TitleCaseBundle`Symfony2 会自动假设路由的前缀是`acme_title_case`，服务是`acme_title_case.example:`和 in `Acme\TitleCaseBundle\DependencyInjection\Configuration`，配置树的根节点是用这个方法找到的

```
<?php
// ...

public function getConfigTreeBuilder()
{
    $treeBuilder = new TreeBuilder();
    $rootNode = $treeBuilder->root('acme_title_case');
    // ...
} 
```

它应该是`acme_titlecase`！

尝试更正这些，然后添加`acme_titlecase: ~`到`app/config/config.yml`将引发此错误

```
InvalidArgumentException: There is no extension able to load the configuration for 
"acme_titlecase" (in /Users/me/Sites/MySite/app/config/config.yml).
Looked for namespace "acme_titlecase", 
found "framework", "another_namespace", ... , "acme_title_case", ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:46:22.300

这是一个有效的名称，但是让每个单词都以大写字母开头你告诉 symfony 这是一个单独的单词，所以 TitleCase 是 Title Case，它应该命名为 TitlecaseBundle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:50:55.807

感谢[Matthias Noback 的帖子](http://php-and-symfony.matthiasnoback.nl/2011/11/symfony2-define-your-bundles-configuration-values-using-the-treebuilder/)，解决方案是覆盖`getAlias()`方法并返回您喜欢的任何内容。

```
<?php

namespace Acme\TitleCaseBundle\DependencyInjection;

// ...

class AcmeTitleCaseExtension extends Extension
{
    // ...

    public function getAlias()
    {
        return 'acme_titlecase';
    }
} 
```

# c - 不同变量名称的for循环

> ID：13570229
> 
> 赞同：0
> 
> 时间：2012-11-26T17:42:27.640
> 
> 标签：c

我正在编程一段时间，但为此我找不到答案。

假设我想在更改变量名称时循环运行。

可以说我有：

```
int ran1;
int ran2;
int ran3; 
```

现在我想运行一个为它们输入数字的 for 循环：

```
for(int k=0;k<3;k++)
 ran%k=k; // this is wrong ,but i am looking for the correct way .
          //output should be :ran1=0 ran2=1 ran3=2.. 
```

我知道其他需要更多代码行的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T17:44:10.353

让它成为一个数组！使用由数字区分的不同名称是一种不好的做法：

```
int ran[3];

for (int k = 0; k < 3; k++)
{
    ran[k % 3] = k;
} 
```

现在，您将使用or代替使用`ran1`, or 。C 中的数组非常令人困惑，它们与指针不同。`ran2``ran[1]``ran[2]`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T17:47:39.957

如果您绝对必须将这些变量分开，那么您唯一的选择是使用指针数组“索引”您的变量并通过它访问您的变量

```
int ran1, ran2, ran3;

int *rans[3] = { &ran1, &ran2, &ran3 };

for (int k = 0; k < 3; k++)
  *rans[k] = k; 
```

（但也许你应该`int`从一开始就使用数组而不是三个单独的变量。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:44:29.820

使用数组：

```
int ran[3];
for(int k=0;k<3;k++)
 ran[k]=k; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:45:24.670

您可以通过定义一个数组来简单地实现这一点，`int ran[3]`然后编写下面的代码来获取它：-

```
ran[k % 3] = k; 
```

# ruby - 有没有办法将 Ruby 类初始化仅限于子类？

> ID：13570232
> 
> 赞同：0
> 
> 时间：2012-11-26T17:42:37.567
> 
> 标签：ruby

我正在创建一个支持 API 网络的库。该库的中心当前是每个 API 客户端子类的客户端类。由于我是编写所有 API 的人，因此它们的功能都类似（restful、通过 access_token 进行授权等）。

然而，与其他 ruby​​ API 客户端库（[Twitter](https://github.com/sferik/twitter)等）不同，客户端类不应直接实例化。这是因为该库不限于单个 API。相反，每个 API 客户端都将继承 Client 类。我的问题如下：

*有没有办法要求 Ruby 类只通过子类初始化？*

此外，在阅读[这个问题](https://stackoverflow.com/questions/1282864/ruby-inheritance-vs-mixins)时，我认为一个类比一个 mixin 更好。

对于那些想要代码的人，这里有一个例子：

```
class A
    def initialize(options = {})
        #what goes on in here doesn't really matter for the purpose of this question
        #I just don't want it to be initialized directly
        options.each do |k,v|
            instance_variable_set("@#{k}",v) unless v.nil?
        end
    end
end

class B < A
    attr_accessor :class_specific_opt
    def initialize( options = {} )
        @class_specific_opt = "val" unless options[:class_specific_opt].nil?
        super(options)
    end
end 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:49:24.763

你可以这样做：

```
class A
  def self.initialize_allowed?
    raise "You cannot initialize instances of this class."
  end

  def self.allow_initialize
    class << self
      def initialize_allowed?
        true
      end
    end
  end

  def initialize(options = {})
    self.class.initialize_allowed?
    options.each do |k,v|
      instance_variable_set("@#{k}", v)
    end
  end
end 
```

调用`A.new`会引发 RuntimeError 并停止该`initialize`方法。然后，您可以`initialized_allowed?`通过调用子类来覆盖子类中的方法`allow initialize`。（也许这是矫枉过正，但我​​认为`allow_initialize`比阅读更容易`def self.initialize_allowed?;end`）：

```
class B < A
  allow_initialize
end

B.new #=> #<B:0x00000102837d10> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:56:37.953

这里有一个关于抽象类的答案：[How to implement an abstract class in ruby​​?](https://stackoverflow.com/questions/512466/how-to-implement-an-abstract-class-in-ruby) , 尽管您最好将 A 作为模块提供并将其包含在其实现者中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:07:10.287

如果您不想`A.new`被调用，只需执行以下操作：

```
class <<A
  undef :new
end 
```

然后，您将无法调用它：

```
A.new #=> NoMethodError: undefined method `new' for A:Class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T19:15:15.253

添加

```
private_class_method :new 
```

A类，和

```
public_class_method :new 
```

到 B 级。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T19:19:40.600

我认为最好的方法是制作新方法`private`。这正是 ruby`Singleton`​​ 模块所做的。[单例模块文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html)

```
class A
  private_class_method :new
end

class B < A
  public_class_method :new
end 
```

# c# - Attendee.ResponseType 未知 - Exchange 托管 API

> ID：13570239
> 
> 赞同：2
> 
> 时间：2012-11-26T17:43:06.993
> 
> 标签：c#, exchangewebservices, ews-managed-api

我在尝试获取约会所需与会者的房间的 ResponseType 时遇到问题。我可以确认我的 Exchange 2010 sp2 ru4 服务器会立即批准或拒绝会议，但是当我通过 ExchangeManaged api 以编程方式找到约会时，所要求的与会者总是返回 ResponseType 的“未知”值。

这是我的代码...

```
 public bool IsAppointmentVerifiedWithResource(Patron userSessionObj, Reservation reservation)
    {
        var emailConfig = new DataStoreManager.ConfigurationManager();
        var serviceBinding = emailConfig.GetConfiguration(Configuration.GetConfigurationName(Resource_ConfigurationConstants.ExchangeServiceBinding));

        // Create the binding.
        var service = new ExchangeService(ExchangeVersion.Exchange2010_SP2)
        {
            UseDefaultCredentials = true,
            Url = new Uri(serviceBinding)
        };

        // Set the calendar view to use
        var view = new CalendarView(reservation.Start, reservation.End);

        // Get the target folder ID using the email address
        var folder = new FolderId(WellKnownFolderName.Calendar, new Mailbox(reservation.EmailAddress));

        view.PropertySet = new PropertySet(BasePropertySet.FirstClassProperties);

        if (CheckForApptCount(service, folder, view))
        {
            var response = service.FindAppointments(folder, view);

            service.LoadPropertiesForItems(from Item item in response select item, BasePropertySet.FirstClassProperties);

            foreach (Appointment apt in response.Items)
            {
                foreach(Attendee at in apt.RequiredAttendees)
                {
                    //room mailbox matches required attendee
                    if(at.Address == reservation.EmailAddress)
                    {
                        ******at.ResponseType always = Unknown******
                        if(at.ResponseType == MeetingResponseType.Accept)
                        {
                            return true;
                        }
                    }
                }
            }

        }

        return false;

    } 
```

关于如何同步和加载 ResponseType 属性的任何想法？

谢谢，克里斯

*******************更新 - 查找组织者约会*******************

```
 public List<Appointment> RetrieveExistingReservations(DateTime selectedDate)
            {
               var service = new ExchangeService()
service.ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress, "yourorganizer@whatever.com");                

 using (WindowsIdentity.Impersonate(service.ImpersonatedUserId))
                {
                    return EwsWrapper.GetStandardCalendarItems(service, selectedDate, selectedDate.AddDays(30));
                }
            }

            public static List<Appointment> GetStandardCalendarItems(ExchangeService service, DateTime dtStart, DateTime dtEnd)
            {
                // Instantiate a collection to hold occurrences and exception calendar items.
                List<Appointment> foundAppointments = new List<Appointment>();

                // Initialize values for the start and end times, and the number of appointments to retrieve.
                DateTime startDate = dtStart.AddDays(-1);
                DateTime endDate = startDate.AddDays(30);

                //// Create a calendar view to search the calendar folder and specify the properties to return.
                CalendarView calView = new CalendarView(startDate, endDate)
                {
                    PropertySet = new PropertySet(BasePropertySet.FirstClassProperties)
                };

                // Retrieve a collection of calendar items.
                FindItemsResults<Appointment> findResults = service.FindAppointments(WellKnownFolderName.Calendar, calView);

                // Add all calendar items in your view that are occurrences or exceptions to your collection.
                foreach (Appointment appt in findResults.Items)
                {

                    foundAppointments.Add(appt);

                }

                return foundAppointments;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:21:26.427

找到的解决方案：与会者的 ResponseType 始终为空，因为我正在为与会者的邮箱执行“findappointments”，然后尝试获取该与会者的 ResponseType。获取参加者的 ResponseType 的正确方法是为组织者的邮箱运行“findappointments”。找到约会后，枚举参加者的，然后 ResponseType 将可用。

# java - 关联、组合和聚合 - 使用 java 实现

> ID：13570241
> 
> 赞同：4
> 
> 时间：2012-11-26T17:43:15.060
> 
> 标签：java, associations, uml, composition, aggregation

我有点困惑`Association, Aggregation and Composition`。尽管有大量的网站和论坛讨论这个话题，但在阅读了其中一些之后，我变得更加困惑。

我想知道以下是否正确：

1.) 聚合 - 如果整体被破坏，将存在。例如 an`Engine`可以有或没有 a 存在`Car`。

2.) 组合 - 如果对象被破坏，将不存在。例如，`Room`没有 a 就不能存在`House`。

3.) 关联 - 我不确定在什么情况下我们应该使用它。有人可以对此发表评论。

在编写用于聚合、组合和关联的 Java 代码时

4.)**聚合**

```
Class Car {

    private Engine engine;

    public void setEngine(Engine engine){
     this.engine=engine;
    }  

    public Engine getEngine(){
     return engine;
    }
} 
```

我认为如果它是一个聚合关联，那么应该有`accessors and mutators`定义。这个对吗 ？

根据我对聚合的定义，我提到如果`Car`对象被销毁，则`Engine`可以访问。但是，我没有在上面的代码中看到这种情况。如果 Car 对象被销毁，将无法像`car.getEngine()`. 那么这是怎么发生的呢？

**作品**

```
Public House {
   private Room room;
   Public House (){
      room = new Room (int noRooms, String nameOfHouse);

   }
} 
```

我认为如果它是 a `C0mposition`，那么不应该有任何`accessor mutator`功能。并且对象`Room`只能在构造函数内部创建。并且持有该`room`对象的实例方法必须是`Private`？我对么 ？

注意：再一次，我用谷歌搜索，并访问了许多网站/论坛，试图消除我的疑虑。许多论坛上都发布了类似的问题，但我对此感到更加困惑。有人可以帮我消除我的疑虑。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:53:44.670

关联的类型对您如何实现它几乎没有影响。它是聚合或组合的事实只是语义上的差异。

如果对象持久保存在某个数据库中，则会出现差异。在这种情况下，如果从数据库中删除容器对象，则包含的对象也会被删除，具体取决于关联的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T12:53:20.233

对于 Vishal 的回答，您可以有一个 Employee 类扩展 Person 类，以便 Company 持有一个 Employee 而不是 Person，当公司被销毁时，Employee 会随之而来（作为垃圾收集）而不是 Person。这只是为了更符合现实，可能没有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:28:59.680

为了定义聚合关联，我们再举一个例子......一个人和一个公司......

一个人和一个公司是两个独立的实体，但是一个人可以在公司工作，他被称为员工……所以员工作为一个人存在于外部世界。所以即使公司灭亡，但人不会灭亡......

```
 public class Example {

    public static void main(String[] args) {
        Person p1 = new Person("Vishal");
        Company abc = new Company(p1);
    }

}

class Person{
    String name;
    public Person(String name) {
        this.name = name;
    }
}

class Company{
    Person employee;
    public Company(Person p1) {
        employee = p1;
    }
} 
```

我没有深入了解公司和个人的实际定义，但我认为现在可以理解了。

而组合关联是公司与部门之间的关联。公司一旦灭亡，它的部门就没有任何意义，所以它必须灭亡……

组合关联的另一个例子是订单和订单的不同项目。您从在线商店订购了几本书 (3)。在这种情况下，如果订单被取消，则必须取消 3 个订单行（项目）。所以订单行的存在只取决于订单。

经理使用刷卡进入 XYZ 场所。经理对象和刷卡对象相互使用，但它们有自己的对象生命周期。换句话说，它们可以独立存在。这种关系中最重要的一点是没有单一的所有者。

而在聚合中，一个对象拥有另一个对象......

这是这三个概念的一个很好的链接......对于关联，您可以检查第二个要求...... [http://www.codeproject.com/Articles/330447/Understanding-Association-Aggregation-and-Composit](http://www.codeproject.com/Articles/330447/Understanding-Association-Aggregation-and-Composit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:32:12.587

涵盖所有可能的关联 java 代码是一个困难的问题。最好的办法是下载 EclipseUML Omondo，它是一种 Java 到 UML 的圣经。此工具仅用于 UML 到 Java 的映射。没有 MDD 但实时同步。你可以看看你从你的类图中得到了什么代码。

该代码与图形类图实时同步，因此您可以根据需要多次播放和重做，以涵盖所有可能的 Java 代码。

仍然有一个 30 天的评估副本，即使最新版本仅保留给付费客户，您也有足够的时间查看 Java 代码应该是什么。

# java - 如何在 Spring MVC 中映射 JSON 对象？

> ID：13570243
> 
> 赞同：3
> 
> 时间：2012-11-26T17:43:31.133
> 
> 标签：java, json, spring, spring-mvc, javabeans

我正在研究可从 di STS 仪表板下载的 Spring MVS Showcase。我正在研究 Spring 如何映射请求，但在理解以下内容时遇到了一些问题：

我有这个带有提交按钮的表单：

```
 <li>
            <form id="byConsumes" class="readJsonForm" action="<c:url value="/mapping/consumes" />" method="post">
                <input id="byConsumesSubmit" type="submit" value="By consumes" />
            </form>
        </li> 
```

当我单击提交按钮时，HTTP Post 请求传递了一个创建 JSON 对象的 Jquery 函数，这是 JQuery 函数的代码：

```
$("form.readJsonForm").submit(function() {          

    var form = $(this);                 // Variabile che si riferisce all'elemento nel DOM che ha scatenato l'evento click (il form) 
    var button = form.children(":first");       // Seleziona il bottone submit 

    var data = form.hasClass("invalid") ?       // OPERATORE CONDIZIONALE: il form ha classe "invalid" ? 
            "{ \"foo\": \"bar\" }" :            // SI: foo = bar 
            "{ \"foo\": \"bar\", \"fruit\": \"apple\" }";   // NO: foo= bar ; fruit = apple 

    /* AJAX CALL PARAMETER:
       type: Say to the servlet path, the request is a POST HTTP Request
       url: The address to which to send the call   
       data: the content of my data variable
       contentType: an object having JSON format
       dataType: the type of content returned by the server
    */
    $.ajax({ type: "POST", url: form.attr("action"), data: data, contentType: "application/json", dataType: "text", 
        success: function(text) { MvcUtil.showSuccessResponse(text, button); }, 
        error: function(xhr) { MvcUtil.showErrorResponse(xhr.responseText, button); }});

    return false;
}); 
```

我创建并传递的 JSON 对象由 data 变量表示，并包含以下键\值：**{ \"foo\": \"bar\", \"fruit\": \"apple\" }**

就像是：

**富：酒吧**

**水果：苹果**

现在，在我的控制器中，我有处理这个请求的方法：

```
@RequestMapping(value="/mapping/consumes", method=RequestMethod.POST, consumes=MediaType.APPLICATION_JSON_VALUE)
public @ResponseBody String byConsumes(@RequestBody JavaBean javaBean) {
    return "Mapped by path + method + consumable media type (javaBean '" + javaBean + "')";
} 
```

所以我很清楚，这个方法处理 HTTP Post Request 到“映射/消费”路径（只有 POST 请求），但我不确定以下项目的含义：

1.  **consumes=MediaType.APPLICATION_JSON_VALUE**：这到底是什么意思？我认为它对 Spring 说，此方法接收 JSON 格式的对象，因此可以以某种方式对其进行解析……但我不确定，也没有在文档中找到它。

    什么是**消耗**？变量或类似注释的东西？我不明白，因为这里它是 @RequestMapping 注释的参数，但在 Google 上搜索显示它被用作独立注释......

2.  在我的 byConsumes() 方法中，我有以下输入参数：**@RequestBody JavaBean javaBean**。阅读 Spring 文档我了解到：@RequestBody 方法参数注释表明使用@RequestBody 注释方法参数应该绑定到 HTTP 请求正文的值。

    因此，在实践中，这意味着我的 HTTP 请求正文字段中有我的 JSON 对象，并使用此注释将其转换为一个名为 javaBean 的对象，该对象具有 JavaBean 类？

    如果我的肯定是真的……JavaBean 类型的对象是什么类型的对象？一个只包含一些变量和相应的 getter 和 setter 方法的对象？（在前一种情况下，一个对象只包含两个变量：第一个名为 foo 且值为“bar”，第二个名为 fruit 且值为“apple”）

这样对吗？

非常感谢安德里亚

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T19:18:37.513

您对这段代码所做的事情的解释基本上是正确的。

'Consumes' 是注解的一个参数，`@RequestMapping`用于指示该方法处理的 HTTP 内容类型。在这种情况下，它向 Spring 指示该方法将 JSON 作为输入。[您可以在此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-consumes)的 Spring 文档中阅读有关此内容的更多信息。您可以类似地指出一个方法“使用”XML。

至于`@RequestBody`注解，这用于表示被注解的方法参数应该由HTTP请求的正文组成，它的文档在[这里](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestbody)。Spring 通常会通过在请求中获取 HTTP 参数的名称并使用 setter 方法在 Java bean 中设置值来执行此操作。

在您的示例中，Spring 将检查方法的注释并确定请求正文应映射到 type 的对象`JavaBean`。它将自动创建该类的实例，并且（通过消息转换器）将填充该`JavaBean`实例。Spring 将使用反射来完成所有这些工作，但它执行的代码基本上会这样做：

```
JavaBean parameter = new JavaBean();
parameter.setFoo("bar");
parameter.setFruit("apple"); 
```

您可以将类型替换`JavaBean`为任何其他为字段声明 getter/setter 的 Java 类`foo`和`fruit`.

# postgresql - psql 传递变量

> ID：13570248
> 
> 赞同：2
> 
> 时间：2012-11-26T17:44:01.977
> 
> 标签：postgresql, variables, quoting, psql

psql 脚本的新手。
我尝试将变量传递给 psql 脚本，但出现错误：

```
psql -v dateav="2012-01-28" mcdb -p 5555 -U admin -q -t -A -c 'select count (client_name) from v_activities where scheduled_start_date like :'dateav';'

ERROR:  syntax error at or near ":"
LINE 1: ...) from v_activities where scheduled_start_date like :dateav; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:08:55.073

会这样工作：

```
echo "select count (client_name) from v_activities \
where scheduled_start_date like :'dateav'" | \
psql -v dateav="2012-01-28" mcdb -p 5555 -U admin -q -t -A 
```

### 解释：

我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/app-psql.html)：

> -c 命令
> 
> (...) 命令必须是服务器完全可解析的命令字符串（即，它**不包含特定于 psql 的功能**）

大胆强调我的。您可以通过在命令中使用管道而不是使用`-c`选项来克服此限制。

```
echo 'command' | psql 
```

这种不同的调用稍微贵一些，但是这样 psql 变量会像你想要的那样被替换。

尾随反斜杠仅用于行继续。同一行中不能有任何字符。唯一的目的是更好的格式。

* * *

对于这个简单的情况，您可以在调用 psql*之前替换变量：*

```
psql mcdb -p 5555 -U admin -q -t -A \
     -c "select count (client_name) from v_activities \
         where scheduled_start_date like '2012-01-28'" 
```

我在命令行上使用双引号来输入单引号。您还可以结合[美元报价](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)和单引号：

```
-c 'select ... like $x$2012-01-28$x$' 
```

但是您在现实生活中的应用程序中可能还有其他限制。

# sql-server-2008 - 子字符串 XML 列

> ID：13570253
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:44:09.293
> 
> 标签：sql-server-2008

我需要第一次对 xml 列进行子串化。下面是 xml 列中的一行。我需要对每个 DRN、日期、金额进行子串化。有时，一行中可能有多个实例。我将如何子串这个？

```
<ITEMS><ITEM SEQ="0" INDNO="50814" DRN="N00230000004816012012" CR_GUID="FB64CD73-8048-4775-81F2-969AE2AB442C" DR_GUID="8025D121-E3B6-4479-A393-CDDC5BEB53C0" CR_ACC="" DR_ACC="" AMOUNT="0" DATE="20120202" /></ITEMS> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:24:45.763

你不使用`substring`你使用[xml 数据类型方法](http://msdn.microsoft.com/en-us/library/ms190798%28v=sql.100%29.aspx)

[SQL小提琴](http://sqlfiddle.com/#!3/184d0/1)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  XMLColumn xml
)

insert into YourTable values
('<ITEMS><ITEM SEQ="0" INDNO="50814" DRN="N00230000004816012012" CR_GUID="FB64CD73-8048-4775-81F2-969AE2AB442C" DR_GUID="8025D121-E3B6-4479-A393-CDDC5BEB53C0" CR_ACC="" DR_ACC="" AMOUNT="0" DATE="20120202" /></ITEMS>') 
```

**查询 1**：

```
select I.N.value('@DRN', 'varchar(50)') as DRN
from YourTable as T
  cross apply T.XMLColumn.nodes('/ITEMS/ITEM') as I(N) 
```

**[结果](http://sqlfiddle.com/#!3/184d0/1/0)**：

```
|                   DRN |
-------------------------
| N00230000004816012012 | 
```

# sql-server - 使用 FREETEXTTABLE 将两个查询和权重组合到一列？

> ID：13570256
> 
> 赞同：1
> 
> 时间：2012-11-26T17:44:13.520
> 
> 标签：sql-server, freetexttable

我有这两个查询给了我想要的东西：

1)

```
SELECT sr.ServicesResourcesID AS ID, sr.Title, sr.ContactFirstName, sr.ContactLastName, sr.ContactEmail, sr.ContactPhone, sr.FileName, sr.URL, sr.Description AS Description, rt.Type, KEY_TBL.RANK 
FROMvResourceType rt,vServicesResources sr
INNER JOIN FREETEXTTABLE(ServicesResources, Title, 'computers') AS KEY_TBL
ON sr.ServicesResourcesID = KEY_TBL.[KEY] 
WHERE sr.ResourceTypeID = rt.ResourceTypeID
ORDER BY RANK DESC 
```

2)

```
SELECT sr.ServicesResourcesID AS ID, sr.Title, sr.ContactFirstName, sr.ContactLastName, sr.ContactEmail, sr.ContactPhone, sr.FileName, sr.URL, sr.Description AS Description, rt.Type, KEY_TBL.RANK 
FROMvResourceType rt,vServicesResources sr
INNER JOIN FREETEXTTABLE(ServicesResources, Description, 'computers') AS KEY_TBL
ON sr.ServicesResourcesID = KEY_TBL.[KEY] 
WHERE sr.ResourceTypeID = rt.ResourceTypeID
ORDER BY RANK DESC 
```

它们基本上是相同的查询。一个搜索标题，另一个搜索描述。我想将它们结合起来，并赋予标题更多的权重。

有任何想法吗？TIA。

# javascript - 当方向改变时，Phonegap 应用程序在 Galaxy Note 上崩溃

> ID：13570262
> 
> 赞同：2
> 
> 时间：2012-11-26T17:44:32.427
> 
> 标签：javascript, android, cordova

我有几个完整的 phonegap 应用程序，功能齐全。我已经尝试了我可以访问的所有设备，但它无法在我的 Galaxy Note 上运行。这是一个全新的设备，我可以运行本机应用程序，但是每当我运行任何 phonegap 应用程序时，我都会出现黑屏并且应用程序关闭。没有崩溃，没有警报，什么都没有。

（我在这里删除了日志，因为它们不相关）

**编辑**

我已经找到了这个问题，当方向改变时它就可以工作。一旦我统计我的活动，它就会将方向设置为纵向。

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

所以我移除了那条​​车道，激活了旋转设备时更改方向的选项。现在，当我启动应用程序时，它会运行，但是当我旋转它时，它会崩溃。我不知道为什么。我的 js 代码中有几个警报，但没有一个被触发。有趣的是，当我旋转设备时，cordova 默认应用程序也会崩溃。您可以在下面找到这两个日志。

对于如何解决这个问题，有任何的建议吗？

Droidgap示例日志：

```
11-27 12:41:15.750: D/DroidGap(9129): Paused the application!
11-27 12:41:15.750: D/CordovaWebView(9129): Handle the pause
11-27 12:41:15.750: D/CordovaWebView(9129): >>> loadUrlNow()
11-27 12:41:15.750: D/webkit(9129): Firewall not null
11-27 12:41:15.750: D/webkit(9129): euler: isUrlBlocked = false
11-27 12:41:15.760: D/DroidGap(9129): onDestroy()
11-27 12:41:15.760: D/CordovaWebView(9129): >>> loadUrlNow()
11-27 12:41:15.760: D/webkit(9129): Firewall not null
11-27 12:41:15.765: D/webkit(9129): euler: isUrlBlocked = false
11-27 12:41:15.765: D/CordovaWebView(9129): >>> loadUrlNow()
11-27 12:41:15.765: D/webkit(9129): Firewall not null
11-27 12:41:15.765: D/webkit(9129): euler: isUrlBlocked = false
11-27 12:41:15.775: D/DroidGap(9129): DroidGap.onCreate()
11-27 12:41:15.780: I/webclipboard(9129): clipservice: android.sec.clipboard.ClipboardExManager@4149bc80
11-27 12:41:15.785: D/CordovaWebView(9129): Origin to allow: http://127.0.0.1*
11-27 12:41:15.785: D/CordovaWebView(9129): Origin to allow: .*
11-27 12:41:15.785: I/CordovaLog(9129): Found log level DEBUG
11-27 12:41:15.785: I/CordovaLog(9129): Changing log level to DEBUG(3)
11-27 12:41:15.785: I/CordovaLog(9129): Found preference for useBrowserHistory=false
11-27 12:41:15.785: D/CordovaLog(9129): Found preference for useBrowserHistory=false
11-27 12:41:15.785: I/CordovaLog(9129): Found preference for exit-on-suspend=false
11-27 12:41:15.785: D/CordovaLog(9129): Found preference for exit-on-suspend=false
11-27 12:41:15.785: D/JsMessageQueue(9129): Set native->JS mode to 1
11-27 12:41:15.785: D/DroidGap(9129): DroidGap.init()
11-27 12:41:15.790: D/CordovaWebView(9129): >>> loadUrl(file:///android_asset/www/index.html)
11-27 12:41:15.790: D/PluginManager(9129): init()
11-27 12:41:15.795: D/CordovaWebView(9129): >>> loadUrlNow()
11-27 12:41:15.800: D/DroidGap(9129): Resuming the App
11-27 12:41:15.800: D/CordovaLog(9129): JSCallback Error: Request failed with status 0
11-27 12:41:15.800: D/CordovaLog(9129): file:///android_asset/www/cordova-2.1.0.js: Line 3743 : JSCallback Error: Request failed with status 0
11-27 12:41:15.800: I/Web Console(9129): JSCallback Error: Request failed with status 0 at file:///android_asset/www/cordova-2.1.0.js:3743
11-27 12:41:15.800: D/JsMessageQueue(9129): Set native->JS mode to 0
11-27 12:41:15.800: D/WML_SISO(9129): InitPasteboardJni
11-27 12:41:15.805: D/SoftKeyboardDetect(9129): Ignore this event
11-27 12:41:15.810: D/SoftKeyboardDetect(9129): Ignore this event
11-27 12:41:15.810: D/JsMessageQueue(9129): Set native->JS mode to 1
11-27 12:41:15.810: D/DroidGap(9129): onMessage(onPageStarted,about:blank)
11-27 12:41:15.820: W/webcore(9129): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
11-27 12:41:15.820: W/webcore(9129):    at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:2681)
11-27 12:41:15.820: W/webcore(9129):    at android.webkit.WebViewCore$EventHub.access$13000(WebViewCore.java:1365)
11-27 12:41:15.820: W/webcore(9129):    at android.webkit.WebViewCore.removeMessages(WebViewCore.java:2793)
11-27 12:41:15.820: W/webcore(9129):    at android.webkit.WebView.sendOurVisibleRect(WebView.java:4046)
11-27 12:41:15.820: W/webcore(9129):    at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:1024)
11-27 12:41:15.820: W/webcore(9129):    at android.webkit.ZoomManager.access$2100(ZoomManager.java:57)
11-27 12:41:15.820: W/webcore(9129):    at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:1595)
11-27 12:41:15.820: W/webcore(9129):    at android.os.Handler.handleCallback(Handler.java:605)
11-27 12:41:15.820: W/webcore(9129):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-27 12:41:15.820: W/webcore(9129):    at android.os.Looper.loop(Looper.java:137)
11-27 12:41:15.820: W/webcore(9129):    at android.app.ActivityThread.main(ActivityThread.java:4517)
11-27 12:41:15.820: W/webcore(9129):    at java.lang.reflect.Method.invokeNative(Native Method)
11-27 12:41:15.820: W/webcore(9129):    at java.lang.reflect.Method.invoke(Method.java:511)
11-27 12:41:15.820: W/webcore(9129):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:995)
11-27 12:41:15.820: W/webcore(9129):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:762)
11-27 12:41:15.820: W/webcore(9129):    at dalvik.system.NativeStart.main(Native Method)
11-27 12:41:15.820: D/SoftKeyboardDetect(9129): Ignore this event
11-27 12:41:15.825: I/GATE(9129): <GATE-M>DEV_ACTION_COMPLETED</GATE-M>
11-27 12:41:15.830: V/(9129): NotificationPresenterImpl::setSettingsValue 0 
11-27 12:41:15.830: V/(9129): NotificationPresenterImpl::setSettingsValue 0 
11-27 12:41:15.835: D/webkit(9129): Firewall not null
11-27 12:41:15.835: D/webkit(9129): euler: isUrlBlocked = false
11-27 12:41:15.845: D/Cordova(9129): onPageFinished(about:blank)
11-27 12:41:15.845: D/DroidGap(9129): onMessage(onPageFinished,about:blank)
11-27 12:41:15.845: D/DroidGap(9129): onMessage(exit,null)
11-27 12:41:15.900: I/GATE(9129): <GATE-M>DEV_ACTION_COMPLETED</GATE-M>
11-27 12:41:16.245: D/DroidGap(9129): onMessage(onPageStarted,file:///android_asset/www/index.html)
11-27 12:41:16.245: D/Cordova(9129): onPageFinished(file:///android_asset/www/index.html)
11-27 12:41:16.245: D/CordovaWebView(9129): >>> loadUrlNow()
11-27 12:41:16.245: D/webkit(9129): Firewall not null
11-27 12:41:16.245: D/webkit(9129): euler: isUrlBlocked = false
11-27 12:41:16.245: D/DroidGap(9129): onMessage(onNativeReady,null)
11-27 12:41:16.245: D/DroidGap(9129): onMessage(onPageFinished,file:///android_asset/www/index.html)
11-27 12:41:16.250: D/DroidGap(9129): Paused the application!
11-27 12:41:16.250: D/CordovaWebView(9129): Handle the pause
11-27 12:41:16.250: D/CordovaWebView(9129): >>> loadUrlNow()
11-27 12:41:16.360: D/DroidGap(9129): onMessage(networkconnection,wifi)
11-27 12:41:16.370: D/DroidGap(9129): onMessage(spinner,stop)
11-27 12:41:16.375: D/webkit(9129): Firewall not null
11-27 12:41:16.375: D/webkit(9129): euler: isUrlBlocked = false
11-27 12:41:16.380: D/CordovaLog(9129): Received Event: deviceready
11-27 12:41:16.380: D/CordovaLog(9129): file:///android_asset/www/js/index.js: Line 47 : Received Event: deviceready
11-27 12:41:16.380: I/Web Console(9129): Received Event: deviceready at file:///android_asset/www/js/index.js:47
11-27 12:41:17.635: D/DroidGap(9129): onDestroy()
11-27 12:41:17.635: D/CordovaWebView(9129): >>> loadUrlNow()
11-27 12:41:17.640: D/webkit(9129): Firewall not null
11-27 12:41:17.640: D/CordovaWebView(9129): >>> loadUrlNow()
11-27 12:41:17.640: D/webkit(9129): euler: isUrlBlocked = false
11-27 12:41:17.640: D/webkit(9129): Firewall not null
11-27 12:41:17.640: D/webkit(9129): euler: isUrlBlocked = false
11-27 12:41:17.650: D/CordovaLog(9129): JSCallback Error: Request failed with status 0
11-27 12:41:17.650: D/CordovaLog(9129): file:///android_asset/www/cordova-2.1.0.js: Line 3743 : JSCallback Error: Request failed with status 0
11-27 12:41:17.650: I/Web Console(9129): JSCallback Error: Request failed with status 0 at file:///android_asset/www/cordova-2.1.0.js:3743
11-27 12:41:17.650: D/JsMessageQueue(9129): Set native->JS mode to 0
11-27 12:41:17.650: D/JsMessageQueue(9129): Set native->JS mode to 1
11-27 12:41:17.660: D/DroidGap(9129): onMessage(onPageStarted,about:blank)
11-27 12:41:17.670: I/GATE(9129): <GATE-M>DEV_ACTION_COMPLETED</GATE-M>
11-27 12:41:17.670: D/Cordova(9129): onPageFinished(about:blank)
11-27 12:41:17.670: D/DroidGap(9129): onMessage(onPageFinished,about:blank)
11-27 12:41:17.670: D/DroidGap(9129): onMessage(exit,null)
11-27 12:41:18.255: D/DroidGap(9129): onMessage(spinner,stop) 
```

我的应用日志：

```
11-27 12:36:41.810: D/DroidGap(10500): Paused the application!
11-27 12:36:41.810: D/CordovaWebView(10500): Handle the pause
11-27 12:36:41.810: D/CordovaWebView(10500): >>> loadUrlNow()
11-27 12:36:41.810: D/webkit(10500): Firewall not null
11-27 12:36:41.810: D/webkit(10500): euler: isUrlBlocked = false
11-27 12:36:41.815: D/DroidGap(10500): onDestroy()
11-27 12:36:41.850: D/CordovaWebView(10500): >>> loadUrlNow()
11-27 12:36:41.850: D/webkit(10500): Firewall not null
11-27 12:36:41.850: D/CordovaWebView(10500): >>> loadUrlNow()
11-27 12:36:41.850: D/webkit(10500): euler: isUrlBlocked = false
11-27 12:36:41.855: D/webkit(10500): Firewall not null
11-27 12:36:41.860: D/webkit(10500): euler: isUrlBlocked = false
11-27 12:36:41.865: D/DroidGap(10500): DroidGap.onCreate()
11-27 12:36:41.875: I/webclipboard(10500): clipservice: android.sec.clipboard.ClipboardExManager@4138e4e0
11-27 12:36:41.880: I/CordovaLog(10500): config.xml missing, reverting to cordova.xml
11-27 12:36:41.880: D/CordovaWebView(10500): Origin to allow: http://127.0.0.1*
11-27 12:36:41.880: I/CordovaLog(10500): Found log level DEBUG
11-27 12:36:41.880: I/CordovaLog(10500): Changing log level to DEBUG(3)
11-27 12:36:41.880: I/CordovaLog(10500): Found preference for classicRender=true
11-27 12:36:41.880: D/CordovaLog(10500): Found preference for classicRender=true
11-27 12:36:41.880: D/JsMessageQueue(10500): Set native->JS mode to 1
11-27 12:36:41.895: D/DroidGap(10500): DroidGap.init()
11-27 12:36:41.900: D/CordovaWebView(10500): >>> loadUrl(file:///android_asset/www/page_A_0.html)
11-27 12:36:41.900: D/PluginManager(10500): init()
11-27 12:36:41.900: I/PluginManager(10500): Using plugins.xml instead of config.xml.  plugins.xml will eventually be deprecated
11-27 12:36:41.905: D/CordovaWebView(10500): >>> loadUrlNow()
11-27 12:36:41.910: D/DroidGap(10500): Resuming the App
11-27 12:36:41.915: I/GATE(10500): <GATE-M>DEV_ACTION_COMPLETED</GATE-M>
11-27 12:36:41.915: D/CordovaLog(10500): exception firing pause event from native
11-27 12:36:41.915: D/CordovaLog(10500): null: Line 1 : exception firing pause event from native
11-27 12:36:41.915: I/Web Console(10500): exception firing pause event from native at null:1
11-27 12:36:41.915: D/CordovaLog(10500): exception firing destroy event from native
11-27 12:36:41.915: D/CordovaLog(10500): null: Line 1 : exception firing destroy event from native
11-27 12:36:41.915: I/Web Console(10500): exception firing destroy event from native at null:1
11-27 12:36:41.915: W/System.err(10500): java.net.SocketException: Socket closed
11-27 12:36:41.915: W/System.err(10500):    at libcore.io.Posix.accept(Native Method)
11-27 12:36:41.915: W/System.err(10500):    at libcore.io.BlockGuardOs.accept(BlockGuardOs.java:55)
11-27 12:36:41.915: W/System.err(10500):    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:98)
11-27 12:36:41.915: W/System.err(10500):    at java.net.ServerSocket.implAccept(ServerSocket.java:202)
11-27 12:36:41.915: W/System.err(10500):    at java.net.ServerSocket.accept(ServerSocket.java:127)
11-27 12:36:41.920: W/System.err(10500):    at org.apache.cordova.CallbackServer.run(CallbackServer.java:195)
11-27 12:36:41.920: W/System.err(10500):    at java.lang.Thread.run(Thread.java:856)
11-27 12:36:41.920: D/DroidGap(10500): onMessage(onPageStarted,about:blank)
11-27 12:36:41.920: D/WML_SISO(10500): InitPasteboardJni
11-27 12:36:41.920: D/SoftKeyboardDetect(10500): Ignore this event
11-27 12:36:41.920: V/(10500): NotificationPresenterImpl::setSettingsValue 0 
11-27 12:36:41.920: V/(10500): NotificationPresenterImpl::setSettingsValue 0 
11-27 12:36:41.925: D/webkit(10500): Firewall not null
11-27 12:36:41.925: D/webkit(10500): euler: isUrlBlocked = false
11-27 12:36:41.930: D/SoftKeyboardDetect(10500): Ignore this event
11-27 12:36:41.935: D/Cordova(10500): onPageFinished(about:blank)
11-27 12:36:41.935: D/DroidGap(10500): onMessage(onPageFinished,about:blank)
11-27 12:36:41.935: D/DroidGap(10500): onMessage(exit,null)
11-27 12:36:41.970: D/chromium(10500): Unknown chromium error: -6
11-27 12:36:42.315: D/DroidGap(10500): onMessage(onPageStarted,file:///android_asset/www/page_A_0.html)
11-27 12:36:42.315: D/SoftKeyboardDetect(10500): Ignore this event
11-27 12:36:42.360: D/DroidGap(10500): Paused the application!
11-27 12:36:42.360: D/CordovaWebView(10500): Handle the pause
11-27 12:36:42.360: D/CordovaWebView(10500): >>> loadUrlNow()
11-27 12:36:42.555: W/IInputConnectionWrapper(10500): showStatusIcon on inactive InputConnection
11-27 12:36:43.465: D/DroidGap(10500): onDestroy()
11-27 12:36:43.465: D/CordovaWebView(10500): >>> loadUrlNow()
11-27 12:36:43.465: D/CordovaWebView(10500): >>> loadUrlNow()
11-27 12:36:43.480: E/WindowManager(10500): Activity co.uk.precedent.tesco.CordovaTuxedoActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41449660 that was originally added here
11-27 12:36:43.480: E/WindowManager(10500): android.view.WindowLeaked: Activity co.uk.precedent.tesco.CordovaTuxedoActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41449660 that was originally added here
11-27 12:36:43.480: E/WindowManager(10500):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:414)
11-27 12:36:43.480: E/WindowManager(10500):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:282)
11-27 12:36:43.480: E/WindowManager(10500):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:218)
11-27 12:36:43.480: E/WindowManager(10500):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:143)
11-27 12:36:43.480: E/WindowManager(10500):     at android.view.Window$LocalWindowManager.addView(Window.java:548)
11-27 12:36:43.480: E/WindowManager(10500):     at android.app.Dialog.show(Dialog.java:337)
11-27 12:36:43.480: E/WindowManager(10500):     at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
11-27 12:36:43.480: E/WindowManager(10500):     at org.apache.cordova.CordovaChromeClient.onJsAlert(CordovaChromeClient.java:119)
11-27 12:36:43.480: E/WindowManager(10500):     at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:628)
11-27 12:36:43.480: E/WindowManager(10500):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-27 12:36:43.480: E/WindowManager(10500):     at android.os.Looper.loop(Looper.java:137)
11-27 12:36:43.480: E/WindowManager(10500):     at android.app.ActivityThread.main(ActivityThread.java:4517)
11-27 12:36:43.480: E/WindowManager(10500):     at java.lang.reflect.Method.invokeNative(Native Method)
11-27 12:36:43.480: E/WindowManager(10500):     at java.lang.reflect.Method.invoke(Method.java:511)
11-27 12:36:43.480: E/WindowManager(10500):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:995)
11-27 12:36:43.480: E/WindowManager(10500):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:762)
11-27 12:36:43.480: E/WindowManager(10500):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:43:58.387

首先，这不是设备兼容性问题——我这里有一个 Galaxy Note，它运行 PhoneGap 应用程序没有任何问题。

您是否尝试过运行默认的 Cordova 模板应用程序来排除更复杂的应用程序特定问题？

防火墙消息表明您的应用程序正在尝试在启动期间通过网络加载某些内容 - 您的问题没有提供有关可能是什么的任何信息，但追踪起来应该不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:39:12.633

[不久前我用这个答案](https://stackoverflow.com/questions/9045933/phonegap-app-crashes-when-switched-orientation-even-with-androidmanifest-changes)对这个进行了排序。

在每个活动中将 screenSize 属性添加到我的配置更改属性解决了这个问题。请记住，它是在 API 级别 13 中添加的。

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

# excel - 在 Excel 中使用 AverageIF 得到 DIV/0

> ID：13570265
> 
> 赞同：0
> 
> 时间：2012-11-26T17:44:42.877
> 
> 标签：excel, excel-formula

我正在尝试对表中所有女性和男性的工资进行平均，我发现了另一篇关于此的堆栈溢出文章并尝试使用 averageif 公式，但是每当我尝试它时，它都会给我一个 $DIV/0 错误，甚至虽然我不认为我在我设置的范围内的任何地方都被零除。这是图表的图片和公式栏中顶部的公式![在此处输入图像描述](../Images/4c40d98f91caa0e50e847864992b47a4.png)

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:51:48.370

你的公式应该是：

```
=AVERAGEIF(TABLE5[GENDER], "F", TABLE5[SALARY]) 
```

AVERAGEIF 的参数是（CriteriaRange、Criteria、AverageRange）。

# assembly - 在 COM 文件中使用“mov ax, code”

> ID：13570266
> 
> 赞同：1
> 
> 时间：2012-11-26T17:44:44.150
> 
> 标签：assembly

这是我的代码（我使用 TASM）

```
CODE SEGMENT                  
ASSUME CS:CODE, DS:CODE, SS:CODE

org 256     
;------start-------
STARTPROC       PROC
        mov ax, CODE
        ret
STARTPROC       ENDP    

CODE ENDS
        end STARTPROC 
```

“mov ax, CODE”行导致 TLINK 中的错误 - “无法生成 COM 文件：存在段可重定位项目”。我不明白为什么它不好？我只使用一个片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:20:02.480

.com 可执行文件是一种非常简单的文件格式，它不能有任何段。它启动时将所有段寄存器设置为唯一段，其值是不可预测的。

尝试像您那样引用一个片段会使链接器心脏病发作，您要求它预测不可预测的情况。这只能在可重定位的可执行文件 .exe 中工作。这是一种可执行文件格式，其中还包含代码中需要针对段的加载地址进行调整的位置列表。.exe 文件的编写就像每个段在 0000:0000 加载一样。操作系统加载器确定每个段在运行时实际加载的位置。并遍历该表，修补代码以添加段加载地址。然后启动程序。这不能在 .com 文件中工作，它没有那个表。

# cakephp-2.0 - 在控制台命令更改 Cakephp 数据库配置

> ID：13570267
> 
> 赞同：1
> 
> 时间：2012-11-26T17:44:44.630
> 
> 标签：cakephp-2.0, cakephp-model

我有一个应用程序，每个 URL 都有一个唯一的数据库，类似于这个答案：[CakePHP - database config based on URL](https://stackoverflow.com/questions/6382826/cakephp-database-config-based-on-url)

这很好用，但我还需要在每个数据库上运行一些控制台命令。我想使用参数，所以我会使用这样的东西：

```
cake consoleCommand databaseConfig 
```

理想情况下，这会将整个应用程序的数据库设置为“databaseConfig”，然后运行“consoleCommand”。我遇到的问题是 DATABASE_CONFIG 类在运行 consoleCommand 之前加载并运行。我当时尝试在控制台中使用 $this->Model->setDataSpource 之类的东西，但此时控制台中似乎也没有 Model 可用。

我玩弄了设置配置设置，只是在访问模型之前查找它，但它不适用于 __construct()，所以我不得不将它绑定到所有 before* 方法中。这对我来说似乎有点混乱：

```
class AppModel extends Model 
```

{

```
private function _before() {

    $conn = Configure::read('dbConnection');
    if(!empty($conn))
        $this->setDataSource($conn);
}

public function beforeValidate($options = array()) {
    $this->_before();
    parent::beforeValidate();
}

public function beforeDelete($bool = true) {
    $this->_before();
    parent::beforeDelete($bool);
}

public function beforeFind($queryData) {
    $this->_before();
    parent::beforeFind($queryData);
}

public function beforeSave($options=array()) {
    $this->before();
    parent::beforeSave($options);
} 
```

}

我很感激对此的任何见解。

# c# - 如何使用匿名方法初始化静态只读变量？

> ID：13570268
> 
> 赞同：5
> 
> 时间：2012-11-26T17:44:51.393
> 
> 标签：c#, static, delegates, anonymous-function, static-members

我正在尝试清理我的代码以初始化静态只读变量。

原来的：

```
public static readonly List<int> MyList;

//Initialize MyList in the static constructor
static MyObject() { ... } 
```

* * *

我决定清理它，因为 CodeAnalysis 说我不应该使用静态构造函数 (CA1810)。

清理：

```
public static readonly List<int> MyList = GetMyList();

//Returns the list
private static List<int> GetMyList() { ... } 
```

* * *

我真的不喜欢附加方法，所以我想我会尝试让它全部内联，但它不会工作。我不确定我在这里做错了什么......

```
public static readonly List<int> MyList =
    () =>
       {
           ...

           return list;
       }; 
```

我试图在`GetMyList()`方法中获取代码并将其放在匿名委托中以返回要分配的列表，但它说我正在尝试将 a`delegate`转换为`List<int>`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T17:53:48.017

这看起来有点奇怪，但试试这个：

```
public static readonly List<int> MyList = new Func<List<int>>(
() =>
{
    // Create your list here
    return new List<int>();
})(); 
```

诀窍是创建一个新的`Func<List<int>>`并调用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T17:50:52.400

原因是当你写

```
() =>
   {
       ...

       return list;
   }; 
```

您实际上是在声明一个委托 - 一个返回的函数`List<int>`，但您实际上并没有调用该函数，因此 this 的计算结果为`Func<List<int>>`而不是`List<int>`。

我不太确定您为什么要尝试删除静态构造函数。静态构造函数有其用途，在某些情况下甚至可以使代码更简洁、更易读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T18:02:30.843

您应该立即调用它以使其成为列表：

```
public static readonly List<int> MyList = new Func<List<int>>(() => {
    return new List<int>();
})(); //<-- the parentheses that invoke 
```

为此，C# 中的语法非常有问题，因此最好使用单独的调用或方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T17:51:57.333

> 它说我正在尝试将委托转换为`List<int>`

那是因为你是。请记住，定义 lambda 与调用 lambda 不同。你必须做更多这样的事情：

```
Func<List<int>> createList = () => { ... return list; };
MyList = createList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-08T21:30:45.443

你忘记了括号。用这个 ：

```
public static readonly List<int> MyList = (() =>
{
    ...
    return list;
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T17:50:48.050

它说对了。`() => ...`返回一个委托。但你需要一份清单。因此，您必须调用此委托并获得结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T18:11:33.823

正如许多人所说，plain`() => { ... }`返回一个委托或表达式。我认为`private static`为列表初始化创建一个单独的方法会使代码的可读性略高于`() => { ... }()`or`() => { ... }.Invoke()`

# database - Rails gem - DB Web 界面

> ID：13570271
> 
> 赞同：1
> 
> 时间：2012-11-26T17:45:10.793
> 
> 标签：database, ruby-on-rails-3, model

我正在开发一个具有非常大数据库的 Rails 应用程序，我的目标是找到一些用户友好的图形界面（如 php 中的 phpmyadmin），在内容上显示（并且可以进行一些基本的交互，如查看、插入、删除）呈现在数据库中。认为最终用户不知道如何在 RoR 中编程。

我想避免使用除 RoR 之外的其他代码（没有 php 或其他代码）。

有一个宝石可以做到这一点吗？我已经搜索但什么也没找到...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-05T07:24:14.223

[https://github.com/igorkasyanchuk/rails_db](https://github.com/igorkasyanchuk/rails_db)您也可以为您的数据库尝试这个 gem

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:19:03.450

你可以试试[http://activeadmin.info/](http://activeadmin.info/)

也许它是你可以使用的东西？

或者这可能对您有所帮助：[Ruby on Rails 是否有“phpmyadmin”？](https://stackoverflow.com/questions/8554676/is-there-a-phpmyadmin-for-ruby-on-rails)

# assembly - 在汇编程序中打印 AH、AL、BH 和 BL 寄存器中的值？

> ID：13570272
> 
> 赞同：0
> 
> 时间：2012-11-26T17:45:11.803
> 
> 标签：assembly, x86, x86-16

我想创建一个打印`AH`、`AL`、`BH`和`BL`寄存器值的过程。我有这个：

```
prntABHL:
    PUSH    BL
    PUSH    BH
    PUSH    AL
    PUSH    AH
    PUSH    fourNums  ! defined in data as "%d, %d, %d, %d\n"
    PUSH    _PRINTF
    SYS
    ADD SP, 12        ! reset stack
    RET 
```

这会导致`PUSH`指令出现​​四个寄存器错误。我假设是因为`PUSH`需要 16 位值，并且`AH`和`AL`是 8 位值。

`AH`如果、`AL`、`BH`和`BL`寄存器中的值不是 16 位长，如何将它们指定为函数的参数？有没有一种相当直接的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:58:49.247

如果您只想将 8 位寄存器的值推送为 16 位值，那么如果您有例如，这很容易。`cx`或任何其他可免费使用的 16 位通用寄存器 ( `cx`, `dx`, `bp`, `si`, `di`)：

编辑：**movzx**在 386 之前的处理器上不可用。替换为 8088/8086 指令。

```
xor   cx, cx
mov   cl, bl
push  cx
mov   cl, bh
push  cx
mov   cl, al
push  cx
mov   cl, ah
push  cx 
```

如果您没有可免费使用的 16 位通用寄存器，则必须保存要推送的值并将其从那里推送到堆栈。

# css - IE中主要内容左侧奇怪的空格

> ID：13570275
> 
> 赞同：0
> 
> 时间：2012-11-26T17:45:25.590
> 
> 标签：css, internet-explorer

您好，我不知道这是否与[我在这里提出的先前问题有关](https://stackoverflow.com/questions/13556353/website-blocks-dropping-in-ie)

但看起来是这样。当最后一个问题得到解决时，我认为最好提出一个新问题。

你可以[在这里查看我的网站](http://onlinebanter.com/latest)

如您所见，在 Internet Explorer 上，中心柱被推到了右侧。在其他浏览器上似乎没问题。我希望它只是表格宽度，但如果您查看任何其他内容，它就不是您所看到的。我一直在研究它，但我没有太多运气。

谁能明白为什么在 Internet Explorer 中会这样？如果我可以对此进行排序，那么我认为 7 年后我的网站实际上可能被认为是“完成”，我可以恢复我的生活，所以所有的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:50:22.870

这是由于 Internet Explorer Box 模型。填充在内容内部而不是外部。请参阅 - [http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)。

删除`padding-left`您的 IE 特定样式表。

# c++ - Eclipse C++ 多项目公用文件

> ID：13570279
> 
> 赞同：3
> 
> 时间：2012-11-26T17:45:38.780
> 
> 标签：c++, eclipse

在 Eclipse/CDT 中，我希望有几个 C++ 项目（projA、projB、projC 等）都将包含一些来自公共目录的`.c`,`.cpp`和/或文件。`.h`这是我现有的文件结构：

```
Workspace -> projA -> src
          -> common ->src : a.c a.h  b.cpp  c.cpp  d.c  etc.
          -> projB -> src
          -< projC -> src 
```

当我尝试将 ../common/src 中的源文件添加到 projA 时，添加源文件工具会抱怨该文件必须在项目中。

那么，我如何将 ../common/src/ac 包含到 ../projA -> src 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:52:50.130

Eclipse 有一个名为添加新源文件夹的选项和一个在该对话框中链接到现有目录的选项。您可以将“common”文件夹链接为指向同一目录的所有项目中的源文件夹。

右键单击项目->新建->文件夹->高级->链接到备用位置

添加文件夹后，

右键单击文件夹-> 构建路径-> 用作源文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:50:00.940

一个简单的方法是将文件或根文件夹从“common”拖到“projA”，同时`Ctrl`在目标“src”文件夹上按住并释放它。Eclipse 将提示您选择复制文件或从原始文件夹链接它们。链接后，它们将被构建为目标项目的一部分（例如，“projA”）。

这是我在释放文件夹时得到的提示：

![文件和文件夹操作提示](../Images/c15613a654222ef14eb9320c0301cde5.png)

我认为第二个选项可以完成您想要的（我没有弄乱第三个选项）。

# visual-studio-2010 - 如何在 Windows 上为 CUDA 链接库（例如 CUBLAS、CUSPARSE）

> ID：13570285
> 
> 赞同：7
> 
> 时间：2012-11-26T17:45:56.543
> 
> 标签：visual-studio-2010, compilation, linker, cuda

我正在尝试编译一个使用 cusparse 库的 cuda 程序。我收到链接错误：

```
kernel.cu.obj : error LNK2019: unresolved external symbol _cusparseSetMatIndexBase@8 referenced in function _main 
```

还有很多与 cusparse 库相关的同类错误。我已经包含了“cusparse_v2.h”。如何在编译期间链接 Visual Studio 2010 中的 cusparse 库？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T16:38:17.897

链接库的一般说明并不特定于 CUDA。因此，您可能想了解更多有关[使用 MS VS](https://stackoverflow.com/questions/1114914/add-library-to-visual-studio-2008-c-project)的信息。无论如何，步骤是这样的：

1.  确保您已打开要处理的项目。
2.  选择 View...Property Pages（从菜单中） 将打开一个新对话框。
3.  在此对话框的左侧，选择链接器以打开它的子​​菜单
4.  在链接器下，选择输入
5.  现在，在右侧的窗格中，观察第一项是“附加依赖项”。我相信`cudart.lib`应该已经在那里了。
6.  单击右侧的`cudart.lib` 您现在可以键入要添加的新库。输入一个空格（与 cudart.lib 分开）并输入`cusparse.lib`
7.  现在单击对话框右下角的“应用”。

如果您的项目/解决方案文件已经使用 cuda 模板设置，那么这*应该是所有需要的。*如果 cudart.lib 不存在，或者您的项目/解决方案文件尚未理解 cuda，则这是一个单独的问题。在这种情况下，我建议重新开始，从示例中克隆一个项目，并以此为起点构建您的项目。然后它将选择所有正确的目录进行搜索以及 cuda 构建规则。由于所有主要的 cuda 库（cudart、cublas、cufft、cusparse 等）都位于同一位置，因此应根据需要选择相同的搜索路径。

如果你想链接另一个库，`cublas.lib`例如，你可以按照类似的顺序，将`cusparse.lib`上面替换为`cublas.lib`

请注意，对于较新版本的 CUDA（例如 CUDA 7.5），仅需要构建 64 位项目（在修改 x64 项目属性时遵循上述步骤。） CUDA 7.5 及更高版本正在放弃对 32 位项目的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T22:50:08.377

我通过以下步骤修复了它：

1.  添加 cuda 路径：转到：“配置属性->链接器->常规->附加库目录”并将 $(CudaToolkitLibDir) 添加到列表中。

2.  添加 cuda 实时库：转到：“Solution Properties->Linker->Input->Additional Dependencies”并将 cudart.lib 添加到列表中。

3.  添加 cublas 库：转到：“Solution Properties->Linker->Input->Additional Dependencies”并将 cublas.lib 添加到列表中。

4.  将平台更改为 x64：转到：“配置属性->平台”并将其设置为 x64。

5.  以管理员身份运行 cmd.exe。输入并运行以下两行命令：

**netsh winsock 重置目录**

**netsh int ip reset reset.log 命中**

可能会说需要重新启动，但实际上这不是必需的。再次尝试调试您的应用程序，问题应该得到解决。

# python - 使用python在3d图中叠加图像

> ID：13570287
> 
> 赞同：12
> 
> 时间：2012-11-26T17:46:02.233
> 
> 标签：python, 3d, matplotlib

我有一个由 matplotlib 生成的 3d 线图。我想在特定的 xy（或 yz、xz）切片上叠加图像。我如何使用 python 做到这一点？谢谢。

我有一个简单的 3d 绘图代码：

```
fig = plt.figure(1),<br>
ax = Axes3D(fig)<br>
ax.plot(f[:,0], f[:,1], f[:,2], color='r') 
```

我还有一个图像“Im”（一个二维数组），所以我需要类似的东西：

```
ax.overlay(Im, slice='xy', sliceNo=10) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-23T21:17:10.623

我在背景图像上做了一次 3d 曲面图叠加：

![背景图像顶部的 3d 曲面图](../Images/69bcc850c31b5e1c83ad733e66c3538b.png)

如果这与您想要的相似，我可以尝试从中制作一个工作示例。

或者，如果您只想在 3d 空间中显示图像，您可以使用曲面图：

```
from pylab import *
from mpl_toolkits.mplot3d import Axes3D
from matplotlib.cbook import get_sample_data
from matplotlib._png import read_png
fn = get_sample_data("lena.png", asfileobj=False)
img = read_png(fn)
x, y = ogrid[0:img.shape[0], 0:img.shape[1]]
ax = gca(projection='3d')
ax.plot_surface(x, y, 10, rstride=5, cstride=5, facecolors=img)
show() 
```

当然，可以将步幅值降低到 1 以获得更好的图像质量，但是绘图将需要 loooong =)

上述代码生成的图像：

![在此处输入图像描述](../Images/deba3bed81edd934503020e0e2ddbfb1.png)

2020 年 11 月编辑：

由于它似乎很有趣，这是我用来生成第一张图像的代码（这是光激发后多晶硅晶片中的少数电荷载流子衰减）：

```
bg_img = Image.open(datadir + "DSC_1495_dark.jpg")
bg_img = bg_img.crop((0, 0, 4000, 2848))
dpi = pl.rcParams['figure.dpi']
figsize = float(bg_img.size[0]) / dpi, float(bg_img.size[1]) / dpi

fig = pl.figure(figsize=figsize)
ax = pl.axes([0, 0, 1, 1], frameon=False)
ax.set_axis_off()
im = pl.imshow(bg_img)

ax = pl.axes([0.01, -0.005, 1.01, 1], projection='3d')
data = (loadtxt(datadir + "pl-image.txt")[14:950, 14:950] - 30) / 270
height, width = data.shape
bin = 1
print data.min(), data.max()
X = arange(data.shape[1])
Y = arange(data.shape[0])
tau = data[:, data.shape[1] // 2][:, None]
T = 5.0
t = linspace(0, T, data.shape[1])[None, :]
f = 1 / (1 + exp(-T / (2 * tau)))
Z = where(t < T / 2, 1 - f * exp(-t / tau), f * exp(-(t - T / 2) / tau))
X, Y = meshgrid(X, Y)
colors = rbow(data)
colors[:, :, -1] = 0.6
surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, facecolors=colors,
        linewidth=0, antialiased=True, shade=True)
ax.set_xlim3d(0, data.shape[0] + 36.0 / bin)
ax.set_ylim3d(18.0 / bin, data.shape[0] + 30.0 / bin)
ax.set_zlim3d(-0.8, 1.1)
ax.grid(False)
ax.view_init(38, -55.5)
ax.dist = 9.4
for a in (ax.w_xaxis, ax.w_yaxis, ax.w_zaxis):
    for t in a.get_ticklines() + a.get_ticklabels():
        t.set_visible(False)
    a.line.set_visible(False)
    a.pane.set_visible(False)
pl.savefig(picdir + "3d-plot.png", transparent=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-19T21:01:11.723

我使用 Opencv 的解决方案更接近原始解决方案。

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from matplotlib.cbook import get_sample_data
import cv2

# Read the image with Opencv
img = cv2.imread('lena.png')
# Change the color from BGR to RGB
img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

# Orgird to store data
x, y = np.ogrid[0:img.shape[0], 0:img.shape[1]]
# In Python3 matplotlib assumes rgbdata in range 0.0 to 1.0
img = img.astype('float32')/255
fig = plt.Figure()
# gca do not work thus use figure objects inbuilt function.
ax = fig.add_subplot(projection='3d')

# Plot data
ax.plot_surface(x, y, np.atleast_2d(0), rstride=10, cstride=10, facecolors=img)
# fig.show() # Throws a AttributeError
# As above did not work, save the figure instead.
fig.savefig("results.png") 
```

我还没弄清楚为什么`fig.show()`会抛出 AttributeError 但它有效

[![我的结果](../Images/970657795665d5962712456e1a213ee0.png)](https://i.stack.imgur.com/WI3rL.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-21T03:44:18.717

```
"""you can try this program,"""
from pylab import *
from mpl_toolkits.mplot3d import Axes3D
from matplotlib.cbook import get_sample_data
from matplotlib._png import read_png
from mpl_toolkits.mplot3d import axes3d
import matplotlib.pyplot as plt
from matplotlib import cm
import numpy as np
plt.rcParams['font.sans-serif'] = ['SimHei']  # 用来正常显示中文标签
plt.rcParams['axes.unicode_minus'] = False  # 用来正常显示负号

fig = plt.figure()
ax = fig.gca(projection='3d')

# 在 matlab 命令行窗口直接输入 peaks 可以得到其表达式的 matlab 形式：
fn = get_sample_data("F:/demo3d/pic.png", asfileobj=False)
img = read_png(fn)
xx, yy = ogrid[0:img.shape[0], 0:img.shape[1]]
X = xx
Y = yy
Z1 = -5*np.ones(X.shape)
Z = np.cos(xx/10) * np.cos(xx/10) + np.sin(yy/10) * np.sin(yy/10)

# Plot the 3D surface
ax.plot_surface(X, Y, Z1, rstride=1, cstride=1, facecolors=img, shade=False)
surf = ax.plot_surface(X, Y, Z, cmap=cm.RdYlGn_r, linewidth=0, antialiased=False)

ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('Z')
# plt.axis('off')
plt.savefig('png', dpi=1000)
plt.show()

[enter image description here][1] 
```

# c++ - 检查 QFont 是 Serif 还是 Sans-Serif

> ID：13570288
> 
> 赞同：2
> 
> 时间：2012-11-26T17:46:05.950
> 
> 标签：c++, qt, fonts

我有一个用户选择的 QFont：

```
QFont font = QFontDialog::getFont(&ok, prevFont, this); 
```

我怎么知道它是否是衬线字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:54:14.493

这行得通吗？

```
bool isSansSerrif = (font.styleHint() & QFont::SansSerif);
bool isSerrif = (font.styleHint() & QFont::Serif); 
```

# css - 3 个 div，1 个固定宽度，1 个可变宽度（文本集），1 个扩展填充。可能的？

> ID：13570291
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:46:21.670
> 
> 标签：css, html

我要做的是在左侧有一个固定宽度的 div，旁边有一个 div，其宽度由文本内容设置，最后一个 div 填充剩余的宽度。

这是我到目前为止所拥有的：

```
<div style="width: 100%">
  <div style="border: 1px solid black; height: 2px; float: left; width: 100px; ">
  </div>
  <div style="float: left; position: relative; top: -10px; padding-left: 5px; padding-right: 5px;">
    Text
  </div>
  <div style="border: 1px solid black; height: 2px; float: left; ">
  </div>
</div> 
```

这里的例子：http: [//jsfiddle.net/Xjxeu/](http://jsfiddle.net/Xjxeu/)

我需要这个例子，但第三个 div 延伸到右侧。

如果没有任何重大的“黑客”，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:54:42.790

您可以使用`display: table;`

人们有时可能会不同意它是否是黑客行为，并且通常会看不起表格，但实际上这很好。你没有使用表格、tds 或任何东西，只是做一个`div`像`table`.

[演示在这里](http://jsfiddle.net/Xjxeu/2/)

这是实现这一目标的最佳、最可靠的方法。

[IE7及以下不支持。](http://www.quirksmode.org/css/display.html)

# youtube-api - 如何区分“暂停”和“结束”

> ID：13570292
> 
> 赞同：1
> 
> 时间：2012-11-26T17:46:24.680
> 
> 标签：youtube-api

据我所知，当用户暂停视频时，onStateChange 事件将触发“暂停”事件。但是，当视频结束时，该事件首先触发“暂停”事件，然后触发“结束”事件。我可以区分前者“暂停”和后者的最佳方法是什么？

我正在尝试让它在视频结束时将另一个加载到播放器中。我需要“暂停”事件，因为我在主干模型中保持状态。现在，我能做到的唯一方法是在收到“结束”事件时自动从暂停更改为播放，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:19:52.997

我希望大多数人做的是监听`ENDED`事件（就像你正在做的那样）然后打电话给`loadVideoById()`，这将负责加载新视频和开始播放。

# java - java CRC32类的使用方法

> ID：13570294
> 
> 赞同：2
> 
> 时间：2012-11-26T17:46:45.977
> 
> 标签：java, wireshark, ethernet, crc32

我正在尝试使用 Java 中的 CRC32 类。数据的输入是一个字节数组，代表一个以太网数据包（Eth + IP + payload）。然而，CRC32 类的校验和输出与wireshark 上显示的不同。

谁能告诉我 CRC32 类的 CRC 计算是否与标准以太网 II 校验和计算相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:04:35.477

是的，它是相同的 CRC，这意味着它应该是相同的 32 位。但是，这些位可能不会在您期望的地方结束。尝试反转字节，反转位，并反转两者以查看是否匹配。

# css - CSS 优化：将特定页面的 CSS 变成全局的？

> ID：13570295
> 
> 赞同：4
> 
> 时间：2012-11-26T17:46:57.487
> 
> 标签：css

当开始一个新的网站项目时，只有这么多的全局 CSS 可以预见使用。（更新：在开发过程中你也只能学习这么多东西。）

随着项目的进行，我们都在 HTML 中添加了许多特定于页面的`class`选择器，用于**使用外部 CSS 文件**`ID`进行样式和布局。（我在这里定义的“特定于页面的 CSS”有点不同——我不是说在内部，但是，例如，我通常给每个页面一个唯一的 ID。）**`<style>``<head>``body`**

 ***   总的来说，需要针对特定​​页面进行更改的最常见的 HTML 元素位于以下元素上：`p`, `img`, `figure`, `figcaption`, `section`, `article`,`div`等。
*   页面特定的更改最常使用以下 CSS 属性：`padding`、`margins`、`font`属性、`widths`、 `heights`等。

问题是——一旦项目完成并创建了一个大的 CSS 文件——**返回并减少/删除不必要的内容的最佳方法是什么？**我的意思是，通过将 CSS 规则组合成尽可能全局和包罗万象（*不破坏任何东西*）。

* * *

PS 在 HTML5 中，我尽量避免将类或 ID 设置为元素，除非我必须这样做。我相信一般规则可以很好地发挥作用（当然，在大多数情况下）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T18:51:52.183

您应该阅读 Johnathan Snook 的[Scalable and Modular CSS](http://smacss.com/)一书，了解处理这个问题的一些见解。不对元素使用类是您的特权，但它是我们编写可维护 CSS 的最强大工具之一。[Harry Roberts 的“Big CSS”](http://www.youtube.com/watch?v=R-BX4N8egEc)演示文稿还为所谓的“面向对象”css 提供了一些强大的洞察力和工具。所以，我的第一个建议是开始在你的标记中使用类。

我理解想要编写语义 html 的担忧，这可能是你回避使用类的原因 - 但是 html 元素上的类不会减损语义，只要你聪明地编写它们。事实上，它们通常（总是，真的）提供有关元素的更多信息。

*困难的部分是*编写语义类，描述元素的功能而不是表示。[雅虎的设计模式库](http://developer.yahoo.com/ypatterns/)是获取语义类名称示例的好地方，也是 Web 架构中许多有用的设计模式的重要资源。

**作为一个简短的tl;博士：**

1.  在组织 CSS 时，使用级联对您有利。首先设置您的重置，然后是全局样式 - 这些是直接应用于元素选择器的通用布局样式。接下来，编写你的模块——这些是你的类，它们应该与元素无关。

2.  避免使用标签选择器限定你的类。为了为维护您网站的其他人提供文档和指导，您应该改用“准合格选择器”

    例如，而不是：

    ```
    div.carousel { /* style information here */ } 
    ```

    而是写：

    ```
    /* div */ .carousel { /* style information here */ } 
    ```

    使用这种技术，您可以提供有关您希望如何使用组件的文档，而无需实际限定它们并提高特异性（从而破坏它们的模块化）。

3.  除此之外，请记住这一点：平衡你的特异性。架构良好的 CSS 位于通用和特定的风口浪尖。你需要使用类来使你的 CSS 模块化和可重用，但你也需要避免臃肿。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:49:16.360

# 寻找重复的样式

在大型代码库中，您必然会有选择器和/或样式重复。尝试尽可能多地找到。

有很多方法可以做到这一点，但您可能希望为您的平台（或 Web 工具）找到一个工具，该工具将扫描您的 CSS 以查找选择器和样式重复。那里有很多，但为了让你开始，[这个 SO 答案](https://stackoverflow.com/questions/2117862/tool-to-remove-repeated-css-selectors)有很多建议，包括 Dust-Me 和 CodeBeautifier。

# 在重复中寻找模式

这可能需要一些调查，特别是如果没有迹象表明给定元素是什么，但尝试找到模式。您是否定义了六个不同的导航列表，它们都具有大致相同的样式（`display: inline-block`、、`float: left`边距、填充等）？即使其中一些具有不同的左边距，您仍然可以为异常值设置默认边距以覆盖，并具有设置这些默认值的“导航”类。

对于简单的效果（颜色、边距等），您可以将它们组合到选择器列表 ( `a, span, p {}`) 中。有关更复杂的效果，请参阅下面的 OOCSS 部分。

这不仅适用于单个项目，也适用于页面。如果您发现*必须具有*特定于页面的样式，请查看它们之间是否存在模式。`#page-2`因此，您可以拥有更像或其他更模块化和描述性的东西，而不是像在您的身体上那样`#theme-wide`的东西，并允许您整合代码。

# 确保您正在利用 Cascade

CSS 的部分优点在于您可以设置通用的东西并在以后使用特异性覆盖它们。但是，很容易陷入特殊性之战，并最终导致一英里长的选择器和大量使用 . `!important`，尤其是当您有任何具有任何基本样式的第三方代码时。因此，请确保您没有做愚蠢的事情，例如`#page-2 div.navigation ul.nav li a`何时`.navigation a`或`#page-2 .navigation a`足够。

Andy Clarke 对找出 CSS 特异性和比较两个选择器有[一个很棒的解释](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)，如果你没有很好地理解它是如何工作的。

# 加入一些 OOCSS 原则

我不是面向对象 CSS 的大力倡导者（我所看到的往往在 CSS 类和诸如此类的东西上过火，而且在拥有语义 HTML 时我有点纯粹主义者），但它确实有一些好主意，可以帮助使事情更加模块化。例如，我想在任何类型的容器上使用一个特别复杂的效果（复杂之处在于涉及多个选择器块和伪元素）。我真的不在乎容器是什么。因此，我创建了一个具有有意义名称的类，它或多或少是自包含的，然后我可以坚持任何我想要的元素，其余的由 CSS 处理。

如果仔细考虑并明智地使用，您可以模块化一些更复杂的样式，而不会在 HTML 中过多地使用有问题的语义类。

# 将特定于 IE 的样式移动到单独的样式表中，而不是在主工作表中使用 hack

IE hack 丑陋、荒谬（除非阅读文件的人已经记住了它们），并且可能会在浏览器中造成意想不到的副作用。除非有理由*必须*在主样式表中保留某些内容，否则将它们放在自己的样式表中并使用条件注释可能是个好主意。虽然条件注释在技术上是非标准代码，但它*是*故意存在的，目的是为了调整 Internet Explorer（以及技术上的非 IE 浏览器）。他们不会很快去任何地方，所以不要害怕使用它们。

这样做还避免了必须设置其他浏览器识别的样式，只是稍后使用某个版本的 IE 无法识别的语法取消设置，反之亦然。是的，它给 IE 用户带来了更多的开销，但是 IE9 和更高版本的用户可能不需要下载任何额外的样式表，所以除非你的流量与谷歌或 Facebook 相媲美，而且大部分来自 IE6 或 7在拨号连接上（即，选择 IE 版本的额外调用成本大于每个浏览器的额外 CSS 成本和您的维护成本），一个额外的调用可能可以忽略不计。

# 为未来...

他们说一盎司的预防胜过一磅的治疗，尤其是在这种情况下，他们是对的。虽然您当然无法预见一切，但从长远来看，您可以从一开始就做一些事情来让您的生活更轻松。请记住，无论是 CSS 之类的前端代码还是 Java 之类的业务逻辑代码，一些可怜的傻瓜都必须维护它，并且可能不太了解代码（即使那个可怜的傻瓜是你，一两年后路）。因此，查看整个生命周期通常是一个好主意，以确保您不会错过重要的基础改进，这些改进可以从一开始就避免代价高昂的大规模重构。

## 使用 CSS 预处理器

对于您未来的项目来说，利用 SASS 或 LESS 之类的东西可能是一个好主意，这可以使大型 CSS 更容易维护，原因有很多。一个重要的原因是它允许你嵌套样式，所以而不是

```
nav {}
nav li {}
nav li a {} 
```

你得到

```
nav {
  li {
    a {}
  }
} 
```

这自然会更容易地对事物进行分组。此外，您可以在开发时将诸如重置样式之类的内容分离到自己的文件中，然后在将它们投入生产之前组合和缩小所有内容。您还可以创建基本样式（颜色主题、标准装订线宽度等）并将它们存储在变量中以便在整个 CSS 代码中使用，以便将值存储在一个位置，使其更易于维护。

## 好好看看你的设计方法/选择

你有这么多特定于页面的样式开始有充分的理由吗？如果您在同一个站点（相同的品牌等），通常认为最佳做法是保持一致的外观和感觉。逐页更改边距、填充、字体等可以消除这种一致性。用户可能不会确切知道有*什么*不同，但他们会知道有些事情发生了，因此即使他们无法确定您的网站，他们也会更少考虑您的网站。

您没有使用重置/标准化机制吗？如果不是，那可能会导致它，因为您发现您的 CSS 主要处理浏览器之间的不一致。将所有内容（或至少某些元素）设置为一个共同的、理智的、开始构建的起点通常是件好事。无论您是通过`*{margin:0; padding: 0;}`调用来彻底解决所有问题，还是使用诸如 Normalize.css 之类的选择性东西，还是介于两者之间的某种东西（例如 Eric Meyer 的 CSS 重置），最终都取决于您。但是，使用为不同元素提供一致起点的*东西将大大有助于避免无关的 CSS（在这种情况下，用于补偿基本样式之间的细微差异的东西，例如 Chrome 和 Firefox）。*

上述问题可以帮助您确定一些维护成本的根本原因，并可能帮助您从长远来看减少它们。**

# jsp - 和有什么区别 和 ?

> ID：13570298
> 
> 赞同：36
> 
> 时间：2012-11-26T17:47:08.637
> 
> 标签：jsp, jstl

我注意到`<c:if ...>`在 JSP 代码的一个地方和另一个地方的用法`<c:when ...>`。他们做的事情在我看来是一样的。这两个命令只是别名吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-26T17:52:38.340

`<c:if`是一个简单的 if 子句。`<c:when>`有多个 if 子句和一个 else 子句的选项。比较：

```
<c:if test="${foo == 'bar'}">...</c:if> 
```

和

```
<c:choose>
   <c:when test="${foo == 'bar'}">...</c:when>
   <c:when test="${foo == 'baz'}">...</c:when>
   <c:otherwise>...</c:otherwise>
</c:choose> 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-26T17:48:41.813

`<c:if>`不支持任何类型的“else”或“else if”功能。`<c:when>`做。所以如果你需要类似的东西

```
if (some_condition) {
    // ...
} 
```

然后使用`<c:if>`. 如果你需要类似的东西

```
if (some_condition) {
    // ...
} else if (some_other_condition) {
    // ...
} else {
    // ...
} 
```

然后使用`<c:choose>`with`<c:when>`和 (可选) `<c:otherwise>`。

# sql-server-2008 - 合并和连接语句有什么区别？

> ID：13570300
> 
> 赞同：2
> 
> 时间：2012-11-26T17:47:23.103
> 
> 标签：sql-server-2008, join, merge

```
 1.
 MERGE tbl AS target
USING tb2  AS source 
ON (target.id = source.id)

WHEN MATCHED and source.price >450 
then  
UPDATE SET TARGET.price = SOURCE.price, 
TARGET.group = SOURCE.group 

 2.
 update tb1 
set 
tb1.price=tb2.price, 
tb1.group=tb2.group from tb2 
left join tb1 on tb1.id =tb2.id 
where tb1.id =tb2.id 
and tb1.price>450 
```

我对上述两种类型的代码感到困惑。在第二个代码集中，当我不使用`tb1.id=tb2.id`after过滤器时，当使用 with语句不匹配`where`时，我会得到很多空值。看起来不错，但不能正确理解它是如何工作的。 我想知道这两组代码是否等效？in first的行为会像第二组代码中的过滤器一样吗？如果我在第二组代码的 where from 之后省略会发生什么。我只是对此感到困惑`id``select``merge`
`on tb1.id=tb2.id``tb1.id=tb2.id``select``update`语句，join 语句使用 with select 会产生空值，但是使用 update 时会发生什么？当我想更新一些表时，我想看看哪些表会受到影响，有时我会对这个空值感到困惑.....我没有任何正式培训，只是在网上寻找并尝试学习，但似乎也是很多事情要考虑。看过[这个](https://stackoverflow.com/questions/6735733/what-are-the-differences-between-merge-join-and-lookup-transformations-in-ssis)我也不清楚。

没有。两个表上的行数不相同，tb1 大于 tbl2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:04:29.187

您在第二个语句中的问题是左连接。LEFT OUTER JOIN 的缩写 - 即对于 tb1 中任何在 tb2 中没有匹配的行，“匹配”的 tb2 值将为空。

等效于合并的更新的正确形式是：

```
update tb1 set 
    price = source.price, 
    group = source.group 
from tb2 as source
    join tb1 as target 
        on (target.id = source.id)
where source.price > 450; 
```

# java - preRenderView 禁用 ajax

> ID：13570301
> 
> 赞同：3
> 
> 时间：2012-11-26T17:47:29.763
> 
> 标签：java, jsf, jsf-2

```
<ui:composition template="/WEB-INF/templates/base.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">    
    <ui:define name="metadata">
        <f:metadata>
            <f:event type="preRenderView" listener="#{resetPassword.loadUser}" />
            <f:viewParam name="user" value="#{resetPassword.user}" />
        </f:metadata>
    </ui:define>

    <ui:define name="content">
        <h:form rendered="#{resetPassword.user != null}">
            <h:panelGrid class="form_panel" columns="2" width="596px">
                <h:outputLabel class="form_label" for="password" value="#{base['resetPassword.password']}" />
                <h:inputSecret class="form_inputText" id="password" value="#{resetPassword.password}">
                    <f:ajax event="keyup" execute="password" listener="#{resetPassword.validatePassword}" render="scorePanel complexity" />
                </h:inputSecret>

                (...) // Other labels and inputfields, no ajax
            </h:panelGrid>
        </h:form>
    </ui:define>
</ui:composition> 
```

我已经阅读了与-calls`preRenderView`结合使用的很多问题。`ajax`我遇到的主要问题是问题。尽管`postback`在我的情况下，`ajax`使用`preRenderView`. 如果没有整个`f:event`-tag，我的`ajax`-call 确实可以正常工作。

`resetPassword.loadUser()`将设置`resetPassword.user`，不为空。我需要使用`preRenderView`代替`@PostConstruct`来填充`f:viewParam`. 提交表单时需要此参数。

为什么我的`ajax`-event 在`<f:event type="preRenderView" />`定义时会中断？

**注意**：`<ui:insert name="metadata" />`位于模板里面`<h:head>`。

**更新**

正如 BalusC 评论的那样，该问题在这部分代码中不可见。

```
public void loadUser(ComponentSystemEvent event) {
    if(!FacesContext.getCurrentInstance().isPostback()) {
        user = (hash != null) ? userService.getByIdAndPwdResetHash(userId, hash) : null;
    }
} 
```

此代码可能会返回`null`但不会（因为正在加载我的表单）。

```
public void validatePassword(AjaxBehaviorEvent event) {
    System.out.println("Ajax works"); // Just for testing purposes so far
} 
```

我不知道要进一步添加什么，因为这几乎是所有相关代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:45:57.123

`#{resetPassword}`当是请求范围并且`user`在 bean 的（后）构造期间未初始化属性时，此构造将失败。

JSF 将在应用请求值阶段，即在处理提交的值之前重新评估`rendered`输入组件（这也包括其所有父组件）的属性，作为防止篡改请求的一部分。在您的情况下，不会呈现父表单，因此不会处理所有输入组件。

你基本上有2个选择：

1.  制作 bean `@ViewScoped`（或 CDI 等价物`@ConversationScoped`）。只要您与相同的视图（分别是对话）进行交互，它就会一直存在。

2.  执行`user`in (post) 构造函数的初始化。预渲染视图为时已晚。由于您的 bean 已经在请求范围内，因此只需使用`@ManagedProperty`（或其本土 CDI 等效项；Google 在“@HttpParam”上有结果）。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 5 点适用于您的情况
*   [@Inject 通过 URL 将参数传递给 CDI @Named bean](https://stackoverflow.com/questions/10058852/inject-to-pass-params-to-a-cdi-named-bean-via-url-gives-jboss-error-on-netbean/10059245#10059245) - 包含`@HttpParam`作为 JSF 的 CDI 替换的自定义注释的具体示例`@ManagedProperty`
*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id/4889226#4889226) - 更好地了解其生命周期的差异

* * *

**与具体问题无关**，在 action(listener) 方法中执行验证不是正确的方法。而不是，请使用您通过输入组件的属性引用`<f:ajax listener>`的法线或嵌套的.`Validator``validator``<f:validator>`

# git - 用于同步本地和远程跟踪分支的脚本（修剪、删除和创建）

> ID：13570305
> 
> 赞同：1
> 
> 时间：2012-11-26T17:47:43.287
> 
> 标签：git, branch

你们中的任何一个 git 大师有没有一个脚本可以帮助刚接触 git 的人管理他们的本地和远程跟踪分支。分布式版本控制的支持者可能会对这个想法嗤之以鼻，但我相信这将有助于提高人们对 git 的了解。

我正在寻找一个脚本，它将：

*   为每个新的远程分支创建一个本地分支（同名）
*   为不再存在的远程分支修剪远程跟踪分支
*   删除那些被修剪的远程分支的本地分支（如果本地分支在远程之前，请用户确认）

我们使用一个中央 git 存储库，所有开发人员都从中推/拉。所以，我们希望 git 的功能更像 SVN（但具有更好的合并能力）。

如果你可以让它与 GUI 中的 Git 扩展一起工作，那将是额外的奖励。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:41:30.697

作为 Git 扩展插件实现。[https://github.com/gitextensions/gitextensions/pull/1451](https://github.com/gitextensions/gitextensions/pull/1451)

> 该插件允许熟悉 SVN 的用户更快地使用 Git。该插件将：
> 
> *   从远程获取更改
> *   为当前未跟踪的所有远程分支创建本地分支
> *   删除绑定到修剪的远程分支的本地分支
> *   重置本地分支以匹配远程分支
> *   不影响仅限本地的分支机构
> 
> 对用户工作目录的任何更改都会显示确认信息。

# matlab - matlab, 巴特沃思

> ID：13570306
> 
> 赞同：1
> 
> 时间：2012-11-26T17:47:52.400
> 
> 标签：matlab, filter, octave

我需要应用巴特沃斯过滤器。为了证明我的截止频率，我希望绘制残差与截止频率，如右图所示：

[![在此处输入图像描述](../Images/06e863ab2b456f420abf0dbaafae1318.png)](https://i.stack.imgur.com/gEUB4.jpg)

残差是使用左图所示的表达式计算的。

我想应用二阶低通巴特沃斯滤波器。我的采样频率是 40 Hz。

使用`help butter`读取：

> “截止频率 Wn 必须为 0.0 < Wn < 1.0，其中 1.0 对应于采样率的一半”。

这是我的代码，`x`未过滤的数据在哪里：

```
x = [386.321780100000;383.587759000000;381.800054600000;380.023872700000;376.516637700000;372.766842600000;367.938632100000;362.564671700000;356.119399400000;349.780736400000;345.535196800000;342.487775500000;343.327007400000;347.044262000000;352.155104000000;357.638520100000;363.112515900000;367.005736600000;369.969518400000;370.788505900000;370.727950800000;369.648907400000;371.655303500000;373.985894500000;374.662538300000;375.416536900000;377.716554500000;381.078738000000;384.060026700000;386.001162100000;386.230440100000;387.427096800000;388.211446400000;387.377444300000;387.621577500000;388.724233300000;389.431947300000;390.055687800000;389.897747100000;390.568256500000;390.976876100000;391.697054400000;392.307437700000;392.379471700000;393.675472100000;394.860379300000;395.811096400000;396.381388400000;398.085646700000;398.901758100000;400.678034200000;401.383476200000;402.159903200000;403.830729400000;404.584496200000;403.345648000000;402.534291300000;402.043024900000;400.591963700000;400.661529800000;401.214493200000;398.942282600000;396.136849800000;395.044892200000;391.983771800000;386.594017600000;383.401605600000;380.970551400000;376.310714500000;370.553521300000;366.878466900000;359.667106200000;352.458992900000;348.570689900000;343.701101100000;342.403147200000;345.523482600000;348.358285100000;351.430608400000;355.299118900000;358.338253800000;361.871167300000;365.253629000000;366.719133600000;371.786174300000;371.057137200000;371.100155400000;373.306458800000;376.272386700000;378.730711200000;382.095951400000;382.902277600000;383.461876500000;385.863290900000;386.271992900000;387.578084600000;388.651095700000;389.696072800000;390.282441000000;391.093495300000;391.289613800000;392.301607600000;392.159602900000;393.842911300000;393.546366500000;393.143725400000;394.750351600000;396.162576400000;397.561458700000;400.072731200000;401.171161400000;402.670562400000;403.090483400000;403.375118800000;403.742372900000;402.928992600000;403.625379400000;402.703021800000;404.445457900000;402.694859900000;404.492961300000;403.197389000000;400.246386500000;399.305927400000;395.243039500000;390.789534800000;386.215227800000;382.125630300000;378.740613300000;374.144220800000;369.667304900000;363.266125400000;358.880981700000;353.666361700000;352.930119300000;352.415712500000;354.932272100000;357.965910000000;363.210217400000;365.696508000000;368.583631400000;369.891869100000;370.457067900000;370.084533700000;371.254514800000;369.990608500000;372.512902900000;372.107388100000;372.389762900000;375.236476100000;377.180620200000;380.163700300000;383.752406800000;384.716569800000;386.690217000000;386.478825700000;387.136547300000;387.061047000000;387.614793500000;387.825040300000;388.859724400000;389.817438600000;390.783390500000;390.843715700000;391.629490100000;391.243866000000;391.117297600000;390.968419100000;392.245959800000;393.020590700000;394.630712100000;397.104264900000;397.023543100000;398.694405500000;399.038632200000;399.893340600000;401.723041400000;401.471017100000;402.798789400000;401.796557800000;401.510791300000;401.239454200000;402.555012900000;403.052252000000;402.218771700000;400.672248600000;398.567749700000;395.930037700000;393.687816300000;389.643818200000;385.300569800000;381.968732100000;379.096336600000;373.408813900000;368.723420200000;362.338487600000;357.422170600000;353.912378500000;351.497230900000;352.752737900000;355.645486800000;360.977540300000;365.115011900000;369.417573800000;374.421265000000;375.741261200000;379.482460500000;379.373812300000;381.356734700000;384.563742700000;385.998075700000;387.353239700000;387.846571200000;390.153373800000;394.202352800000;395.963324800000;398.282343000000;400.269374600000;400.557049800000;401.282810600000;402.133647600000;402.901177300000;404.506791700000;404.483256500000;405.463024500000;407.374795800000;407.037477400000;407.818079800000;408.022211200000;409.331968900000;410.195044600000;410.400538600000;411.138077700000;412.780554100000;413.371996900000;414.366633900000;416.607984600000;416.909471500000;417.903319900000;418.807274800000;418.131025900000;418.614937400000;419.355146400000;419.839171900000;420.622516800000;420.840936000000;421.415952700000;422.329106100000;419.791224700000;418.657891400000;416.303727400000;413.424186000000;409.239999100000;404.994917000000;401.405607300000;396.443609500000;391.830650800000;386.712834300000;379.305649600000;371.974335100000;367.876575200000;364.538574800000;364.350451800000;364.972675300000;368.720855400000;372.201352100000;374.288222600000;377.680482600000;378.799850200000;380.521041100000;380.363991200000;382.176218700000;384.164502100000;384.020557500000;387.386685800000;389.172806500000;391.352743100000;394.966380800000;397.758792800000;399.853885000000;399.654978000000;400.448029000000;402.805451900000;403.892553200000;403.862181700000;404.869756300000;406.689487700000;407.688509300000;407.899500500000;408.580087900000;410.215761300000;411.184311500000;412.070551500000;412.954576000000;414.074107800000;415.002936200000;416.180255400000;417.042582900000;417.210742100000;418.784222700000;419.417155900000;418.244356100000;418.892681200000;419.545868000000;419.460151500000;419.047418400000;419.924293500000;420.700464900000;420.588551400000;421.507250500000;422.020167300000;419.435987000000;417.067352800000;415.007963000000;411.769922000000;406.885412600000;402.982885100000;398.193117900000;390.465404700000;384.144538500000;375.178591500000;366.437035100000;358.028063500000;352.293817400000;349.424189400000;349.926651000000;352.430220700000;355.610311600000;360.417644500000;365.049574200000;369.087678900000;370.693150700000;371.469359300000;374.189527900000;376.566619700000;375.305055800000;375.891980400000;378.984007800000;382.437661200000;385.019999600000;387.613217500000;388.256001000000;390.440337200000;390.778502500000;394.132478900000;394.077478600000;395.934430300000;396.105431400000;396.078562100000;397.256080200000;397.439351600000;398.588204100000;398.132028000000;398.864585100000;400.041381600000;400.235601100000;401.558329500000;403.094163300000;403.243391900000;405.561711700000;405.504060100000;407.370466600000;408.555827900000;409.299491700000;410.153424800000;410.300822700000;410.367713700000;411.275381200000;410.871249900000;411.459785300000;412.533510600000;412.628470300000;414.186740100000;410.888678400000;411.371077500000;408.705744100000;406.903008300000;405.253466900000;400.188060400000;398.075866400000;394.070537500000;390.282135900000;386.964201200000;380.292136200000;374.835483700000;367.706128700000;365.908725400000;364.455562900000;364.563011500000;366.696664000000;370.685727600000;374.140337100000;375.529254600000;378.415772700000;379.025289000000;379.315148100000;379.507123000000;382.555575000000;385.180528900000;385.022058700000;388.587833500000;391.024301100000;395.008552400000;397.377134700000;399.993664600000;401.851884000000;403.349924700000;404.177882200000;404.530414400000;405.939468100000;405.167599800000;406.071639300000;406.301709800000;406.884170500000;408.251562800000;407.015528000000;407.044604300000;407.607805000000;408.133807700000;410.176208300000;410.295306300000;411.325515700000;412.468318200000;413.496999300000;414.096330200000;415.604314600000;416.924199100000;416.593331500000;418.376824200000;419.272729400000;418.891425800000;420.450437200000;419.941856000000;419.651679800000;421.103346200000;419.451771900000;417.418609800000;415.486484600000;413.071044300000;410.839635000000;405.672979600000;400.740956300000;395.880537300000;391.271580700000;385.603089900000;379.337494000000;373.292081100000;366.428944200000;359.433089600000;356.639741900000;356.870334800000;357.613582700000;360.618030500000;365.276770700000;367.955837500000;370.669455000000;374.535820600000;376.458963200000;377.488332300000;380.734952700000;380.967888300000;383.131782200000;382.965837100000;385.870830400000;388.718512600000;390.750714900000;394.412024500000;395.005689100000;396.315897800000;397.864541200000;399.388767400000;399.571308300000;400.029569200000;401.395641400000;402.391365000000;402.083481000000;402.528470400000;404.442816400000;404.884497900000;405.168726400000;405.465712800000;405.349603800000;406.533500000000;407.972460300000;409.293491400000;410.556036400000;412.133548900000;412.613902800000;412.779444300000;412.994332200000;413.556486900000;414.014261100000;415.313246400000;415.571968200000;416.646239500000;416.177362500000;416.654811500000;416.360201500000;414.128825500000;411.598404700000;410.069296900000;406.485724900000;402.166566900000;396.875429500000;393.467259500000;388.508421700000;381.249884300000;374.033839900000;367.407453700000;358.298466700000;353.014985400000;351.401607700000;351.559149200000;355.478413600000;361.579029700000;366.459723900000;370.482811700000;372.391993600000;374.133429600000;375.706849800000;376.255429100000;377.959570200000;378.150022100000;378.857670200000;381.393086700000;384.613589500000;387.134322900000;388.828588800000;388.884380500000;390.540899500000;391.078596600000;392.939800800000;393.131168700000;394.561911500000;394.940456400000;395.624279900000;396.631495200000;396.813280100000;397.271054100000;398.699067400000;397.960646900000;399.065647300000;400.495105800000;402.316133400000;402.820439400000;404.135953800000;404.902676700000;407.071295400000;408.901028400000;409.339043500000;410.856690000000;411.741902100000;411.572607400000;410.578750600000;410.866900900000;411.043940500000;412.270310500000;413.150341400000;413.186237200000;410.641084600000;407.405695900000;405.509177300000;402.693585500000;399.684704300000;394.426107300000;391.519533600000;388.224900900000;383.278789800000;378.307242300000;372.739602700000;368.478280700000;362.863358800000;361.304001000000;362.435018000000;364.634794200000;367.973272500000;370.867271600000;375.950784200000;377.760681400000;379.167124200000;379.646290600000;379.508894500000;379.045460000000;378.591352500000;384.507430200000;384.886844300000;383.932432300000;386.799684400000;391.060092500000;393.418588700000;394.132615800000;394.432453800000;398.324667600000;397.096586200000;398.005721400000;400.474732000000;400.328915300000;401.058421000000;403.238428000000;402.724730000000;403.253563800000;404.687953000000;405.079930400000;405.219330800000;407.047728400000;407.595529300000;408.057711800000;408.539252700000;409.836387000000;410.123266400000;410.313569400000;412.099500000000;412.793454600000;413.372957300000;415.066474200000;413.971619400000;414.254327400000;415.198047500000;416.134740700000;417.933600600000;417.211507700000;417.097779400000;417.708317200000;414.171904400000;412.326958700000;410.969281800000;403.879401900000;399.416247400000;393.297210900000;389.540637800000;384.152425200000;376.404144800000;372.813625800000;366.430311000000;361.093876700000;358.405677900000;358.336124000000;358.933857600000;363.550827300000;368.513013500000;373.555796400000;377.399377100000;382.541254000000;385.282657700000;389.342241000000;390.319845400000;390.834423800000;390.247456200000;392.237231500000;393.850930200000;398.146367200000;400.318802200000;404.104563600000;404.659164900000;];
wc = 0.001:0.001:1 % <----- !!!
R = zeros(1, length(wc)-1);
for nn = 1:length(wc)-1
    [B,A] = butter(2,wc(nn));
    xprime = filtfilt(B,A,x);
    R(1,nn) = sqrt(1/length(x)*(sum(abs(x-xprime).^2)))
end         
plot(wc(1:end-1)*20,R) % <------ !!!! 
```

我得到了这个：

[![在此处输入图像描述](../Images/ad9ae91e0c98a33e500ff06b8838d13f.png)](https://i.stack.imgur.com/1kdOu.jpg)

但这似乎不适合我。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:55:37.500

您需要设置您想要的截止频率。例如，如果您知道希望 -3dB 点位于 15 Hz，您可以像这样过滤数据。.

```
fs = 40; %// 40 Hz as you said
fc = 15; %// your cutoff in Hz
[b,a] = butter(2, fc/(fs/2));

y = filter(b,a,x); %// output 
```

只需更改 的值`fc`即可更改截止频率。. .

使用`filtfilt`您在代码中使用的方式将有效地使滤波器的阶数加倍，因为您要对信号进行两次过滤（一次正向，一次反向）。如果要使用 2 阶零相位离线滤波，请在使用 之前将阶数更改为 1 `filtfilt`。

**编辑**

鉴于您提供的信息，要获得您正在寻找的情节，我将使用以下脚本......

```
fs = 40;

x = [386.321780100000;383.587759000000;381.800054600000;380.023872700000;376.516637700000;372.766842600000;367.938632100000;362.564671700000;356.119399400000;349.780736400000;345.535196800000;342.487775500000;343.327007400000;347.044262000000;352.155104000000;357.638520100000;363.112515900000;367.005736600000;369.969518400000;370.788505900000;370.727950800000;369.648907400000;371.655303500000;373.985894500000;374.662538300000;375.416536900000;377.716554500000;381.078738000000;384.060026700000;386.001162100000;386.230440100000;387.427096800000;388.211446400000;387.377444300000;387.621577500000;388.724233300000;389.431947300000;390.055687800000;389.897747100000;390.568256500000;390.976876100000;391.697054400000;392.307437700000;392.379471700000;393.675472100000;394.860379300000;395.811096400000;396.381388400000;398.085646700000;398.901758100000;400.678034200000;401.383476200000;402.159903200000;403.830729400000;404.584496200000;403.345648000000;402.534291300000;402.043024900000;400.591963700000;400.661529800000;401.214493200000;398.942282600000;396.136849800000;395.044892200000;391.983771800000;386.594017600000;383.401605600000;380.970551400000;376.310714500000;370.553521300000;366.878466900000;359.667106200000;352.458992900000;348.570689900000;343.701101100000;342.403147200000;345.523482600000;348.358285100000;351.430608400000;355.299118900000;358.338253800000;361.871167300000;365.253629000000;366.719133600000;371.786174300000;371.057137200000;371.100155400000;373.306458800000;376.272386700000;378.730711200000;382.095951400000;382.902277600000;383.461876500000;385.863290900000;386.271992900000;387.578084600000;388.651095700000;389.696072800000;390.282441000000;391.093495300000;391.289613800000;392.301607600000;392.159602900000;393.842911300000;393.546366500000;393.143725400000;394.750351600000;396.162576400000;397.561458700000;400.072731200000;401.171161400000;402.670562400000;403.090483400000;403.375118800000;403.742372900000;402.928992600000;403.625379400000;402.703021800000;404.445457900000;402.694859900000;404.492961300000;403.197389000000;400.246386500000;399.305927400000;395.243039500000;390.789534800000;386.215227800000;382.125630300000;378.740613300000;374.144220800000;369.667304900000;363.266125400000;358.880981700000;353.666361700000;352.930119300000;352.415712500000;354.932272100000;357.965910000000;363.210217400000;365.696508000000;368.583631400000;369.891869100000;370.457067900000;370.084533700000;371.254514800000;369.990608500000;372.512902900000;372.107388100000;372.389762900000;375.236476100000;377.180620200000;380.163700300000;383.752406800000;384.716569800000;386.690217000000;386.478825700000;387.136547300000;387.061047000000;387.614793500000;387.825040300000;388.859724400000;389.817438600000;390.783390500000;390.843715700000;391.629490100000;391.243866000000;391.117297600000;390.968419100000;392.245959800000;393.020590700000;394.630712100000;397.104264900000;397.023543100000;398.694405500000;399.038632200000;399.893340600000;401.723041400000;401.471017100000;402.798789400000;401.796557800000;401.510791300000;401.239454200000;402.555012900000;403.052252000000;402.218771700000;400.672248600000;398.567749700000;395.930037700000;393.687816300000;389.643818200000;385.300569800000;381.968732100000;379.096336600000;373.408813900000;368.723420200000;362.338487600000;357.422170600000;353.912378500000;351.497230900000;352.752737900000;355.645486800000;360.977540300000;365.115011900000;369.417573800000;374.421265000000;375.741261200000;379.482460500000;379.373812300000;381.356734700000;384.563742700000;385.998075700000;387.353239700000;387.846571200000;390.153373800000;394.202352800000;395.963324800000;398.282343000000;400.269374600000;400.557049800000;401.282810600000;402.133647600000;402.901177300000;404.506791700000;404.483256500000;405.463024500000;407.374795800000;407.037477400000;407.818079800000;408.022211200000;409.331968900000;410.195044600000;410.400538600000;411.138077700000;412.780554100000;413.371996900000;414.366633900000;416.607984600000;416.909471500000;417.903319900000;418.807274800000;418.131025900000;418.614937400000;419.355146400000;419.839171900000;420.622516800000;420.840936000000;421.415952700000;422.329106100000;419.791224700000;418.657891400000;416.303727400000;413.424186000000;409.239999100000;404.994917000000;401.405607300000;396.443609500000;391.830650800000;386.712834300000;379.305649600000;371.974335100000;367.876575200000;364.538574800000;364.350451800000;364.972675300000;368.720855400000;372.201352100000;374.288222600000;377.680482600000;378.799850200000;380.521041100000;380.363991200000;382.176218700000;384.164502100000;384.020557500000;387.386685800000;389.172806500000;391.352743100000;394.966380800000;397.758792800000;399.853885000000;399.654978000000;400.448029000000;402.805451900000;403.892553200000;403.862181700000;404.869756300000;406.689487700000;407.688509300000;407.899500500000;408.580087900000;410.215761300000;411.184311500000;412.070551500000;412.954576000000;414.074107800000;415.002936200000;416.180255400000;417.042582900000;417.210742100000;418.784222700000;419.417155900000;418.244356100000;418.892681200000;419.545868000000;419.460151500000;419.047418400000;419.924293500000;420.700464900000;420.588551400000;421.507250500000;422.020167300000;419.435987000000;417.067352800000;415.007963000000;411.769922000000;406.885412600000;402.982885100000;398.193117900000;390.465404700000;384.144538500000;375.178591500000;366.437035100000;358.028063500000;352.293817400000;349.424189400000;349.926651000000;352.430220700000;355.610311600000;360.417644500000;365.049574200000;369.087678900000;370.693150700000;371.469359300000;374.189527900000;376.566619700000;375.305055800000;375.891980400000;378.984007800000;382.437661200000;385.019999600000;387.613217500000;388.256001000000;390.440337200000;390.778502500000;394.132478900000;394.077478600000;395.934430300000;396.105431400000;396.078562100000;397.256080200000;397.439351600000;398.588204100000;398.132028000000;398.864585100000;400.041381600000;400.235601100000;401.558329500000;403.094163300000;403.243391900000;405.561711700000;405.504060100000;407.370466600000;408.555827900000;409.299491700000;410.153424800000;410.300822700000;410.367713700000;411.275381200000;410.871249900000;411.459785300000;412.533510600000;412.628470300000;414.186740100000;410.888678400000;411.371077500000;408.705744100000;406.903008300000;405.253466900000;400.188060400000;398.075866400000;394.070537500000;390.282135900000;386.964201200000;380.292136200000;374.835483700000;367.706128700000;365.908725400000;364.455562900000;364.563011500000;366.696664000000;370.685727600000;374.140337100000;375.529254600000;378.415772700000;379.025289000000;379.315148100000;379.507123000000;382.555575000000;385.180528900000;385.022058700000;388.587833500000;391.024301100000;395.008552400000;397.377134700000;399.993664600000;401.851884000000;403.349924700000;404.177882200000;404.530414400000;405.939468100000;405.167599800000;406.071639300000;406.301709800000;406.884170500000;408.251562800000;407.015528000000;407.044604300000;407.607805000000;408.133807700000;410.176208300000;410.295306300000;411.325515700000;412.468318200000;413.496999300000;414.096330200000;415.604314600000;416.924199100000;416.593331500000;418.376824200000;419.272729400000;418.891425800000;420.450437200000;419.941856000000;419.651679800000;421.103346200000;419.451771900000;417.418609800000;415.486484600000;413.071044300000;410.839635000000;405.672979600000;400.740956300000;395.880537300000;391.271580700000;385.603089900000;379.337494000000;373.292081100000;366.428944200000;359.433089600000;356.639741900000;356.870334800000;357.613582700000;360.618030500000;365.276770700000;367.955837500000;370.669455000000;374.535820600000;376.458963200000;377.488332300000;380.734952700000;380.967888300000;383.131782200000;382.965837100000;385.870830400000;388.718512600000;390.750714900000;394.412024500000;395.005689100000;396.315897800000;397.864541200000;399.388767400000;399.571308300000;400.029569200000;401.395641400000;402.391365000000;402.083481000000;402.528470400000;404.442816400000;404.884497900000;405.168726400000;405.465712800000;405.349603800000;406.533500000000;407.972460300000;409.293491400000;410.556036400000;412.133548900000;412.613902800000;412.779444300000;412.994332200000;413.556486900000;414.014261100000;415.313246400000;415.571968200000;416.646239500000;416.177362500000;416.654811500000;416.360201500000;414.128825500000;411.598404700000;410.069296900000;406.485724900000;402.166566900000;396.875429500000;393.467259500000;388.508421700000;381.249884300000;374.033839900000;367.407453700000;358.298466700000;353.014985400000;351.401607700000;351.559149200000;355.478413600000;361.579029700000;366.459723900000;370.482811700000;372.391993600000;374.133429600000;375.706849800000;376.255429100000;377.959570200000;378.150022100000;378.857670200000;381.393086700000;384.613589500000;387.134322900000;388.828588800000;388.884380500000;390.540899500000;391.078596600000;392.939800800000;393.131168700000;394.561911500000;394.940456400000;395.624279900000;396.631495200000;396.813280100000;397.271054100000;398.699067400000;397.960646900000;399.065647300000;400.495105800000;402.316133400000;402.820439400000;404.135953800000;404.902676700000;407.071295400000;408.901028400000;409.339043500000;410.856690000000;411.741902100000;411.572607400000;410.578750600000;410.866900900000;411.043940500000;412.270310500000;413.150341400000;413.186237200000;410.641084600000;407.405695900000;405.509177300000;402.693585500000;399.684704300000;394.426107300000;391.519533600000;388.224900900000;383.278789800000;378.307242300000;372.739602700000;368.478280700000;362.863358800000;361.304001000000;362.435018000000;364.634794200000;367.973272500000;370.867271600000;375.950784200000;377.760681400000;379.167124200000;379.646290600000;379.508894500000;379.045460000000;378.591352500000;384.507430200000;384.886844300000;383.932432300000;386.799684400000;391.060092500000;393.418588700000;394.132615800000;394.432453800000;398.324667600000;397.096586200000;398.005721400000;400.474732000000;400.328915300000;401.058421000000;403.238428000000;402.724730000000;403.253563800000;404.687953000000;405.079930400000;405.219330800000;407.047728400000;407.595529300000;408.057711800000;408.539252700000;409.836387000000;410.123266400000;410.313569400000;412.099500000000;412.793454600000;413.372957300000;415.066474200000;413.971619400000;414.254327400000;415.198047500000;416.134740700000;417.933600600000;417.211507700000;417.097779400000;417.708317200000;414.171904400000;412.326958700000;410.969281800000;403.879401900000;399.416247400000;393.297210900000;389.540637800000;384.152425200000;376.404144800000;372.813625800000;366.430311000000;361.093876700000;358.405677900000;358.336124000000;358.933857600000;363.550827300000;368.513013500000;373.555796400000;377.399377100000;382.541254000000;385.282657700000;389.342241000000;390.319845400000;390.834423800000;390.247456200000;392.237231500000;393.850930200000;398.146367200000;400.318802200000;404.104563600000;404.659164900000;];
N = numel(x);

dw = 0.01;
wc = dw:dw:1-dw;

R=zeros(size(wc));
for nn =1:numel(wc)
    [b,a]=butter(1,wc(nn)); %//Potentially an order less because of filtfilt
    y = filtfilt(b,a,x);
    R(nn)=sqrt( sum((x-y).^2)/N );
end

fAxis = wc*(fs/2);

plot(fAxis,R);
xlabel('fc [Hz]'); ylabel('residuals') 
```

如果我在脚本中使用您的数据，我会得到如下所示的输出。. ![在此处输入图像描述](../Images/ef34ff6385627ec4b33caa6fffd32188.png)

..这与您在脚本链接中提出的输出并不太远...

![在此处输入图像描述](../Images/c637748aaf0e4c99f835f0d75ae0fc10.png)

# java - hashcode 和 equals 合约反之亦然

> ID：13570309
> 
> 赞同：1
> 
> 时间：2012-11-26T17:48:00.897
> 
> 标签：java, equals, hashcode

我知道合同说“如果两个对象相等，那么它们应该返回相同的哈希码”。那是为了让那些对象可以被放置在同一个哈希桶中并且改进哈希码相关的收集函数知道。再说一遍为什么它说“如果两个对象具有相同的哈希码，那么它们不应该总是相等”。我的意思是，如果在合同中是真的，我们应该说“如果两个对象相等，它们可能会返回相同的哈希码，但这不是强制性的”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T17:52:34.513

> 我的意思是，如果在合同中是真的，我们应该说“如果两个对象相等，它们可能会返回相同的哈希码，但这不是强制性的”

**不，不应该**。这是因为，每当在 a`HashMap`或 a中搜索一个对象时`HashSet`，首先会根据`hashCode`(**注意 : -** `hashCode()`不用于在`ArrayList`或的情况下进行搜索`LinkedList`。它们不是`hash based`集合)，然后如果两个对象具有相同的哈希码，它移动到`equals`比较对象本身的方法。

现在假设如果上述陈述为真，那么对于这些​​对象，第一个测试本身将失败。也就是说，如果允许两个相等的对象具有不同的 hashcode，那么在搜索特定的 hashCode 时，它​​不会返回正确的结果，因此测试将不会继续`equals method`，并声明这些对象是`unequal`即使你期望的他们是平等的。

现在让我们转到**第二个**语句：-

> 如果两个对象具有相同的哈希码，则它们不应该总是相等”

让我们这样理解： - 由于`hashCode`为每个对象生成的类型都是`int`，因此您可以生成最大`2 ^ 32`唯一性`hashcodes`。所以，想象一下如果你想存储更多的对象会发生什么。在这种情况下，必须有一个*collison*。因此，除了将相同分配给两个不同的对象`two different objects`之外，您别无他法。`hashCodes`因此，上述说法是有道理的。

* * *

因此，从上面的解释中可以清楚地看出**两件事：-**

*   两个相同的对象必须具有相同的 hashCode。
*   两个不同的对象可以有相同的 hashCodes。

* * *

以下链接中有关此主题的更多详细信息（没有比这更好的解释了）：-

*   [有效的 Java - 覆盖等于时覆盖 hashCode](http://my.safaribooksonline.com/book/programming/java/9780137150021/creating-and-destroying-objects/ch02lev1sec7#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODAxMzcxNTAwMjElMkZjaDAzbGV2MXNlYzI=)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T17:49:48.657

没有。文档是正确的，你搞混了。

*   两个相等的对象*必须*具有相同的哈希码。
*   具有相同哈希码的两个对象*可能*不相等。
*   为了哈希表的性能，您通常希望两个*不* 相等的对象尽可能多地具有不同的哈希码。

例如，以下始终是 的有效实现`hashCode()`：

```
public int hashCode() { 
  return 0;
  // clearly all equal objects have the same hash code -- 0
  // but it's totally okay that unequal objects also have the same hash code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T17:51:24.197

每个桶`HashMap`可以存储*多个*条目，选择哪个桶取决于哈希码。通过使用来标识存储桶，然后在该存储桶中查找匹配`HashMap`的键，查找键的条目。`hashcode()``equals()`

鉴于上述情况，应该清楚您可以毫无问题地重复哈希码（如果多个对象具有相同的哈希码但一切仍然有效，则会影响 HashMaps的*性能）*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T17:50:39.623

如果 2 个相同的哈希码必须来自同一个对象，那么哈希就不会那么安全。从技术上讲，根据哈希计算密码是什么是可能的。这会破坏哈希码的目的（至少在安全意义上）。

对于非安全散列，如果您可以让每个唯一值生成唯一散列，那么您将解决未解决的计算问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T17:51:49.893

哈希函数通常是

> 单向函数

：一些输入值（对象）可能会产生相同的哈希码。

# c# - Metro 风格 Windows 应用商店应用中的 WiFi 功能

> ID：13570310
> 
> 赞同：1
> 
> 时间：2012-11-26T17:48:08.253
> 
> 标签：c#, windows-8

我似乎找不到任何有关如何在 Windows 应用商店应用程序中使用 wifi 功能的信息（除了获取当前连接的网络信息等简单的东西。）

具体来说，对于可以在 ARM 平板电脑上运行的应用程序，如何以编程方式连接到指定的 SSID、访问扫描列表等？

我读到的最新消息（来自这篇文章：[http](http://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/2a51365f-5d51-41ca-b301-4d728e86c516) ://social.msdn.microsoft.com/Forums/en-US/tailoringappsfordevices/thread/2a51365f-5d51-41ca-b301-4d728e86c516 ）大约是 6 个月前，在主 SDK 发布之前，并声明基本上没有可用于 Metro 应用程序的 wlan api。

这有什么变化吗？似乎不太可能根本无法在任何 Windows 8 设备上控制 wifi ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:55:37.870

Windows 8 商店应用程序不应该控制 wifi，这违反了他们的沙盒准则，即应用程序不应在用户不知情的情况下更改系统设置。

您可以获得有关您连接到哪个网络的信息，但仅此而已。

如果某些系统功能被暴露，可能会有恶意应用程序给用户带来问题，对于有错误的应用程序也是如此。

# r - 将子字符串替换为空

> ID：13570312
> 
> 赞同：0
> 
> 时间：2012-11-26T17:48:14.133
> 
> 标签：r, regex

我怎样才能以 _ 开头的所有内容都替换掉？

这是一个简单的数据框

```
d <- data.frame(a = c("A_foo1", "B_foo2", " _foo3")) 
```

我希望 d 看起来像：

```
a
A
B
" " 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:50:17.893

```
a <- c("A_foo1", "B_foo2", " _foo3")
gsub("_.*", "", a)
#[1] "A" "B" " " 
```

# c# - Stackpanel 动画问题

> ID：13570315
> 
> 赞同：0
> 
> 时间：2012-11-26T17:48:25.273
> 
> 标签：c#, .net, wpf, animation

**我尝试使用 和 实现具有不同高度的一组不同控件的`Canvas`动画`Stackpanel`。**

所以我填充`Stackpanel`并应用了所有设置，但无论如何，在开始的动画中跳跃了一段时间，只有在这一切顺利之后，当它结束时，它又会跳跃 2-3 次等等......

任何线索为什么？我使用经典的双重动画等......

谢谢你的任何线索！

```
<Canvas  ClipToBounds="True" Name="canMain" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >
   <StackPanel  Name="tbmarquee" HorizontalAlignment="Stretch"  ></StackPanel>
</Canvas> 

private void BottomToTopMarquee()
{
     tbmarquee.Orientation = Orientation.Vertical;  
     DoubleAnimation doubleAnimation = new DoubleAnimation();
     doubleAnimation.From = -tbmarquee.ActualHeight;
     doubleAnimation.To = canMain.ActualHeight;
     doubleAnimation.RepeatBehavior = RepeatBehavior.Forever;
     doubleAnimation.Duration = new Duration(TimeSpan.FromSeconds(_marqueeTimeInSeconds));
     tbmarquee.BeginAnimation(Canvas.BottomProperty, doubleAnimation);
 } 
```

我什至试过这样

```
 Thread thread = new Thread(new ThreadStart(
            delegate()
            {
                DispatcherOperation dispatcherOp =
                  this.Dispatcher.BeginInvoke(DispatcherPriority.Normal, new Action(
                    delegate()
                    {

                        DoubleAnimation doubleAnimation = new DoubleAnimation();
                        doubleAnimation.From = -tbmarquee.ActualHeight;
                        doubleAnimation.To = canMain.ActualHeight;
                        doubleAnimation.RepeatBehavior = RepeatBehavior.Forever;
                        doubleAnimation.Duration = new Duration(TimeSpan.FromSeconds(_marqueeTimeInSeconds));
                        tbmarquee.BeginAnimation(Canvas.BottomProperty, doubleAnimation);
                    }));
                dispatcherOp.Completed += new EventHandler(DispatcherOpCompleted);
            }));
            thread.Start(); 
```

我的意思是动画开始并不顺利，它正在跳跃……但后来进展顺利……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:33:37.477

当我遇到动画性能问题时，我通常可以通过降低`FrameRate`和缓和对渲染系统的需求来缓解它们。在我的`Application`启动方法中，我添加了以下内容：

```
MediaTimeline.DesiredFrameRateProperty.OverrideMetadata(typeof(System.Windows.Media.Animation.Timeline), new FrameworkPropertyMetadata(10)); 
```

WPF 默认值为 60（这很荒谬，因为即使是现代视频也不会超过 30 FPS）。我通常会在 10 左右找到一个很好的性能平衡，但是您可以调整这个数字，直到您的动画看起来和执行您想要的那样。

我希望这有帮助。

# javascript - Javascript 404 错误检测

> ID：13570316
> 
> 赞同：3
> 
> 时间：2012-11-26T17:48:31.997
> 
> 标签：javascript, http-status-code-404

我有一个带有自定义 URL 协议链接的页面。自定义 URL 协议在用户安装 exe 时在用户系统上注册。当用户单击网页上的自定义 url 协议链接时，它会启动该 exe（目前都运行良好）。但是，当他们单击该链接并且尚未在本地安装 exe 时，他们会在浏览器中看到标准错误页面。因此，如果他们没有本地 exe，我希望浏览器显示自定义错误页面，而不是告诉他们需要下载 exe。我认为它可能就像单击链接时侦听该错误的 javascript 一样简单，如果存在错误，则显示自定义错误页面。但我不知道该怎么做。出现错误页面是“无法显示网页。最可能的原因是：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:53:32.793

我建议制作一个测试功能来确定协议是否已安装：

1.  使用您的协议从您的页面向测试页面发出 AJAX 调用。
2.  如果此操作成功且没有错误，则页面的其余部分可以安全地使用此协议。
3.  如果 AJAX 调用失败，那么您将知道该协议尚未安装。

Jquery 将使这种方法变得轻而易举。您甚至可以根据测试功能的成功/失败动态更改链接的 URL。可以制作链接以发出用户需要安装协议处理程序的弹出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T23:01:05.677

404 是一个 HTTP 状态代码，所以我认为您在调用自定义协议时不能期望它。您可能会尝试连接，`window.onerror`但如果这有效，我会感到惊讶。

我在类似情况下所做的是在安装中包含一个浏览器插件。然后，您可以在用户尝试调用它之前从脚本中检查处理程序是否已安装。此外，您可以让插件报告已安装的版本，以便提示用户升级。不利的一面是，如果您不想限制支持的浏览器，则需要处理多个插件模型和架构。

# android - 我可以使用 OpenCORE 或 StageFright 在 Android 中编码或解码视频吗？

> ID：13570326
> 
> 赞同：0
> 
> 时间：2012-11-26T17:49:25.553
> 
> 标签：android, media, codec, stagefright, opencore

这个 Android 框架是否提供了为一个 Android 应用程序开发编码和解码功能的能力？

我知道有一个名为 MediaCodec 的 4.1 高级 API 提供了编码和解码视频的功能，但我不知道它是否真的使用其中一个媒体框架作为 Stagefright 来访问编解码器。

与使用 MediaCodec API 相比，直接使用其中一个框架进行编码或解码有哪些好处？

也许我很困惑，但我必须制作一个关于使用 Android 视频编码的项目，如果有人可以帮助我，我必须为此选择更好的选择......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:48:56.150

您应该使用 MediaCodec api 而不是任何较低级别的 api。然后 MediaCodec api 将在内部使用适当的框架。这是因为 android 供应商会将他们自己的编解码器和硬件/dsp 加速编解码器集成到框架中，并将它们设置为 MediaCodec api 的默认值。他们将确保他们的编解码器与 MediaCodec api 一起工作。如果您使用 MediaCodec api，它将适用于所有设备，而与下面使用的框架无关。这就是那个 api 的用途。

除非你特别想用 OpenCore/Stagefright 做一些测试，否则不要去那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:20:28.973

您正在尝试做的事情是由供应商/集成商完成的。最好的解决方案是（如果您可以访问平台的自定义源代码 - > 如果没有，请使用任何免费板）以这种方式将您的硬件 enc 与 libstagefright（作为 OMX 组件）集成，您将完成 YUV 的编码封装成任何所需的（来自受支持的）格式，然后您可以使用一些高级 rtp api 来封装和管理流式传输（只需从谷歌叔叔关于 android 和 rtp 的回答中得出结论）。

# shell - 如何使用 shell 脚本删除子字符串

> ID：13570327
> 
> 赞同：32
> 
> 时间：2012-11-26T17:49:37.957
> 
> 标签：shell, substring

我有字符串称为：

```
abc.out
def.out 
```

如何删除子字符串

> 。出去

在这些字符串中？

我应该使用什么命令？（伯恩壳牌）

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-26T17:55:52.970

多种方式，一种选择：

`str=abc.out`

**壳：**

```
echo ${str%.*} 
```

**格雷普：**

```
echo $str | grep -o '^[^\.]*' 
```

**赛德：**

```
echo $str | sed -E 's/(.*?)\..*/\1/' 
```

**呸：**

```
echo $str | awk -F. '{print $1}' 
```

`-F.`表示将字符串拆分为 . 并`$1`表示第一列。

**切：**

`echo $str | cut -d. -f1`

**所有输出：**

```
abc 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-26T17:52:04.753

**如果这些字符串存储在一个文件中**（我们称之为`input_file`）：

```
# input_file:

abc.out abc.out abc.out
def.out def.out
def.out 
```

你可以做：

```
sed -i 's/\.out//g' input_file 
```

这`.out`将从该文件中删除任何出现的子字符串。

**解释：**

*   `sed`: 调用[sed](http://www.grymoire.com/Unix/Sed.html)工具来编辑文本流
*   `-i`：使用“就地”选项 - 这会修改您提供的输入文件，而不是将输出写入`stdout`
*   `'s/\.out//g'`: 使用正则表达式删除`.out`. 最后的`g`意思是删除所有出现的事件。
*   `input_file`: 指定输入文件

* * *

**如果这些字符串存储在变量中：**

```
var1="abc.out" 
```

您可以使用[参数替换](http://tldp.org/LDP/abs/html/parameter-substitution.html)：

```
var1=${var1%.out}
echo "$var1"

abc 
```

**解释：**

*   从上面的链接：*“${var%Pattern} 从 $var 中删除与 $var 后端匹配的 $Pattern 的最短部分。”*
*   请注意，这里提到的“模式”称为 globbing，它[与正则表达式在重要方面有所不同](http://lwn.net/Articles/96687/)。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-09-07T20:10:19.080

我发现这效果最好，因为您要使用的模式可以在变量中：

```
DATA="abc.out"
pattern=".out"
DATA=${DATA/$pattern/}
echo "DATA=${DATA}" 
```

结果是：

`abc`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-26T17:52:01.380

```
$ foo=abc.def.out
$ echo ${foo%.out}
abc.def 
```

通常，要删除最短的后缀，请使用：

```
$ echo ${foo%.*}
abc.def 
```

要删除最长的后缀，请使用

```
$ echo ${foo%%.*}
abc 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T17:57:13.173

如果这些是文件名，则可以使用 basename。

```
$ basename a.out .out 
```

会给你：

```
a 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-17T10:00:30.640

中的一个例子`zsh`：

```
% myVar="abc.out def.out ghi.out"

% myVar=${myVar:s/.out/} # replace first match of ".out" with ""
% echo myVar
abc def.out ghi.out

% myVar=${myVar:gs/.out/} # replace all matches of ".out" with ""
% echo myVar
abc def ghi 
```

# lan - 如何使用简单的 LAN 卡进行软件复制保护？

> ID：13570328
> 
> 赞同：0
> 
> 时间：2012-11-26T17:49:46.770
> 
> 标签：lan, protection, piracy-protection

我见过一些应用程序使用简单的 LAN 卡作为保护卡来防止软件盗版。
请告诉我其中使用的主要思想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:54:07.820

通常使用网卡的 MAC 地址：

[http://en.wikipedia.org/wiki/MAC_address](http://en.wikipedia.org/wiki/MAC_address)

> 媒体访问控制地址（MAC 地址）是分配给网络接口的唯一标识符，用于物理网段上的通信。MAC 地址用于多种网络技术和大多数 IEEE 802 网络技术，包括以太网。从逻辑上讲，MAC 地址用于 OSI 参考模型的媒体访问控制协议子层。

因此，这是“唯一的”，应用程序使用它来生成字符串。该字符串被传递回软件的“身份验证”服务器，在该服务器中生成一个新字符串。该新字符串被发送回软件并注册它以供使用（当然，在完成各种检查之后）。

因此，如果软件安装在不同的机器上，代码将不匹配，因为新机器将具有不同的 MAC 地址。复制保护！

这在某些平台上不是一个很好的安全机制，因为我相信您可以手动设置 MAC 地址。

# c# - 我可以代理现有的 Visual Studio LanguageService 吗？

> ID：13570330
> 
> 赞同：4
> 
> 时间：2012-11-26T17:49:49.410
> 
> 标签：c#, .net, visual-studio-2010, plugins, system.reflection

我想使用我正在编写的自定义扩展计算的附加信息来扩展 Visual Studio 对 C++ 的解析。为了省去`IScanner`为我`LanguageService`的`LanguageService`.

到目前为止，我的搜索只指出我`LanguageService`使用*例如完成重新实现。*ANTLR 或自定义扫描仪。我试图`System.Reflection`从我的 Visual Studio 插件中使用，但它似乎没有向我显示除我之外的任何类。

那么，知道如何检索`LanguageService`理解 C++ 的实例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T07:50:18.827

据我所知，不可能代理 C++ LanguageService（或任何其他语言服务），因为它的架构没有具有可扩展性点。所以你只能从头开始重新实现它（这将是一项非常艰巨的任务）。Visual Studio 中语言服务的目的是为在 IDE 中编辑源代码提供特定于语言的支持。您确定需要语言服务吗？你在做什么样的扩展？

至于获取 Visual Studio 服务，您可以看看这篇好文章“ [LearnVSXNow！#26 - 服务 — 使用无代码服务初始化](http://dotneteers.net/blogs/divedeeper/archive/2008/07/23/LearnVSXNowPart26.aspx)”

# hadoop - Oozie 中的 java 操作是否需要在 jar 文件中提供？

> ID：13570332
> 
> 赞同：0
> 
> 时间：2012-11-26T17:49:55.507
> 
> 标签：hadoop, workflow, oozie

我是否需要将我的 java 类放在某个 jar 中，该 jar 进入工作流定义根目录中的 lib/ 目录，还是有另一种方法可以在 jar 之外使用这些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:50:42.700

Oozie 中的 Java 操作在 Map Reduce 作业中运行，所以是的，这些类确实需要包装在一个 jar 中。

虽然它们不需要放在 lib 目录中，但它们可以存在于共享库文件夹 ( `oozie.libpath`) 中。

# c# - 在 C# 客户端中捕获 SOAP 消息

> ID：13570341
> 
> 赞同：2
> 
> 时间：2012-11-26T17:50:32.883
> 
> 标签：c#, web-services, logging, soap

我一直在用 C# 编写一个使用第三方 Web 服务的客户端。我从他们那里得到了一个 wsdl，它生成的参考在大多数情况下都可以正常工作。然而，我遇到了几个问题，运行该服务的好人没有提供任何帮助。

我推断出查明问题的最有效方法是捕获出站和入站 SOAP 消息，以与他们的设计文档中显示的原型进行比较。我知道，基于 wsdl 和来自现有 Java 应用程序的代码（以及他们自己的示例），我在调用服务的方法时提供了正确的参数。如果我可以证明我发送的服务消息符合他们的原型，那么我至少可以向他们提出问题，证明这是他们的错，而不是我的错，从而（希望）让他们要么提供更新的文档，要么修复服务。

我想不通的是如何在 C# 中设置这种消息捕获。我读过很多关于 SoapExtension 和 WCF 之类的东西，但这不是 WCF 应用程序，当我运行应用程序时，向 app.config 添加任何类型的日志记录信息似乎无济于事。我在网上找到的其他代码示例都没有。

我应该如何处理这个？是否有必要尝试将此客户端转换为 WCF 平台（如果我这样做，对创建控制台界面和独立 GUI 有什么影响）？我是否应该尝试创建一个从 wsdl 生成的类继承的派生类并从头开始对捕获进行编码？我是否错过了某种方便的工具，可以为我完成这一切而无需我进行大量编码？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:56:54.080

如果您只想从 Web 服务调用中捕获原始数据，请查看以下内容：

[http://www.soapui.org/](http://www.soapui.org/)

我一直用它来测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T17:57:35.170

我在使用基于 PHP 的肥皂服务的 MVC3 应用程序中遇到了同样的问题。只需启动 Fiddler 2 [http://www.fiddler2.com](http://www.fiddler2.com)并让它捕获请求。Fiddler 捕获您的计算机发出的每个 HTTP 和 HTTPS 请求。只需为您的应用程序打开调试器，这样您就可以准确地看到发出 SOAP 请求的时间并在 Fiddler 中观察它。

# html - 带日期的无表格表格

> ID：13570343
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:50:43.617
> 
> 标签：html, forms, responsive-design, css

我不是 Html 和 css 方面的专家，但我知道如何制作漂亮的响应式页面、无表格、无表格表单等...

但我陷入了一种我不知道如何处理的形式。使表格无表格对我来说很容易，只要我们每行有 1 个字段，现在我需要在同一行中有 2 个字段和标签。

我想使用纯 css 处理，我需要它们对齐。现实生活中的示例将是任何旅游公司的一种形式，他们要求提供 dateFrom 和 DateTo。

另一件事，我正在使用框架 Skeleton ( [http://www.getskeleton.com/](http://www.getskeleton.com/) )

```
1stlabel
|1stfield|

2ndlabel1   3rdlabel1
|2ndfield|  3rd|field|

4thlabel
|4thfield| 
```

我当前的标记：

```
<form>

    <div class="field">
        <label>FieldA</label>
        <input type="text">
    </div>

    <div class="doubleFields">

        <div class="first">
            <label>DateFrom</label>
            <input type="text">
        </div>

        <div class="second">
            <label>DateTo</label>
            <input type="text">
        </div>

    </div>

</form>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:53:07.537

给它们一个特定的类名，然后设置`display: inline-block`它们。

* * *

在您的具体情况下：

```
.doubleFields div {
    display: inline-block;
} 
```

应该做得很好。

# python - 有没有办法可视化 haar 级联文件？

> ID：13570344
> 
> 赞同：4
> 
> 时间：2012-11-26T17:50:43.307
> 
> 标签：python, opencv

假设我有一个 haar 级联 xml 文件。有没有办法将文件渲染成图像以创建“完美标本”？

因此，如果 xml 用于人脸检测，它将显示获得最高分数的人脸图像？

如果不可能，有没有办法对“主要成分”进行成像？

顺便说一句，我使用的是 Python 版本的 openCV。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T19:29:40.760

据我所知，这将是困难的。分类方案很复杂，我认为没有一种简单的方法可以“反转”它，得到“完美的样本”，甚至是主成分之类的东西。（下面有更多关于主成分的内容。）让我试着快速解释一下分类是如何完成的，以便更清楚为什么这些事情很难；然后我会提到你可以尝试的其他一些方法。

## 级联如何工作（大约）

级联的想法是通过尽快拒绝尽可能多的非人脸来加快分类速度。（这很重要，因为图像中的*大多数*东西都不是人脸。）你可以通过级联的分类器来做到这一点。第一个分类器经过训练，可以拒绝 90% 的非人脸，但至少保留 99.99% 的人脸。这仍然是很差的性能——如果你只使用这个分类器，你会得到大量的误报。但是，您可以非常快速地执行此分类，因此您可以快速摆脱大量非人脸。

好的，那么这些分类器之一是什么？好吧，每个分类器都是一组增强的弱分类器。这意味着，对于您传递给分类器的每张图像，它都会将其传递给*N*个非常简单的分类器中的每一个，并且每个简单分类器都会投票“真”或“假”。每个简单（弱）分类器都被加权，因此加权投票给出了强分类器的答案。

好的——那么什么是弱分类器？我认为在 OpenCV 中，弱分类器是高度为 2 的决策树（参见[OpenCV 文档](http://www.comp.nus.edu.sg/~cs4243/doc/opencv.pdf)，起始页 ~368）。所以每个弱分类器都将输入图像与一个简单的模式进行比较；如果图像与图案足够相似，则将其传递给另一个图案进行比较；如果它足够不同，它将被传递以与第三种模式进行比较。

## 为什么这会让事情变得困难，有些事情你可以尝试

因此，您可能会看到，实际上不可能制作“完美样本”，因为决策过程中存在许多非线性——对于其中一个弱分类器而言，“完美样本”可能对大多数其他分类器来说是一个糟糕的样本，这意味着总体而言，它不会成为一张好脸。映射重要组件的问题相同，但是您可以通过在第一（或最后）阶段选择最重要（即权重最高）的弱分类器，然后绘制这些过滤器使用的过滤器来到达某个地方阶段。

您可以尝试的另一种方法是我在一个艺术项目中看到的，但遗憾的是找不到链接。一位艺术家生成了形状的随机组合，并观察了它们触发面部检测器的效果。他会随机添加更多形状，并保留在触发面部检测方面做得更好的形状配置。通过这种爬山策略，他能够生成算法看起来像人脸的图像。可以说，这种方法的一个更细微的版本——在刺激空间中寻找被归类为面孔的事物——可能有助于找到一个“完美的样本”。

希望这有帮助，祝你好运！

# if-statement - 使用 List 的 IF 语句

> ID：13570345
> 
> 赞同：0
> 
> 时间：2012-11-26T17:50:44.250
> 
> 标签：if-statement, bitmap, picturebox

所以我浏览了一些以前的解决方案，但到目前为止还没有看到任何解决我的问题的方法。我试图在玩家点击图片框时更改他们的头像。我有一个像这样的图像列表：

```
List<Bitmap> avatars = new List<Bitmap>();

private void GameForm_Load(object sender, EventArgs e)
{
  avatars.Add(Properties.Resources.Head1);
  avatars.Add(Properties.Resources.Head2);
  avatars.Add(Properties.Resources.Head3);
  avatars.Add(Properties.Resources.Head4);
} 
```

这就是我试图改变它的地方：

```
private void pictureBoxAvatar1_Click(object sender, EventArgs e)
{

  if(pictureBoxAvatar1.Image == avatars.ElementAt(0))
  {
    pictureBoxAvatar1.Image = avatars.ElementAt(1);
  }
  //I have four total possibilities, but just have this one statement until I figure it out

} 
```

我的问题是我找不到评估切换图像的条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:01:03.560

您的方法存在问题，如果改变可能会使事情变得更容易。首先，当您只需要为每个图像存储一个副本时，您可以为每个化身存储一个图像的副本。虽然这在小程序中很好，但它不会很好地扩展。虽然编译器**可能**足够聪明，可以只存储每个图像一次，但您很有可能会创建大量冗余数据，我们不应该相信编译器会为我们处理这些。当然，这可能会稍微改变我们的渲染方法，但它应该会改善缓存并让程序运行得更快一些。

更好的解决方案是将图像存储在一个中央位置，并为化身存储一个指示要使用哪些图像的指针。

我会改成`pictureBoxAvatar1.Image`类似的东西`pictureBoxAvatar1.ImagePointer`，然后你的功能应该变成类似

```
private void pictureBoxAvatar1_Click(object sender, EventArgs e)
{
   pictureBoxAvatar1.ImagePointer = (pictureBoxAvatar1.ImagePointer + 1) % avatars.size(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:04:10.987

就像是

```
int avIndex = avatars.IndexOf(picturebox1.image);
avIndex++;
if (avIndex >= avatars.Count)
{ 
  avIndex = 0;
}
picturebox1.image = avatars[avIndex]; 
```

或等效的，具体取决于化身是什么。

# sql - linq 语法到 sql 语法

> ID：13570346
> 
> 赞同：1
> 
> 时间：2012-11-26T17:50:45.023
> 
> 标签：sql, string, linq

我有一个使用 linq 进行查询的 aspx 网格控件。我可以从网格控件的字符串中获取过滤器表达式，但当然它在 linq 中。linq 和 tsql 有时相同，但有时不同。我需要将 linq 字符串语法更改为 tsql 语法，以便可以查询、在数据集中获得相同的结果并加载自定义维护表单。例如：

linq: StartsWith([city], 'cedarburg') Tsql: city like '%cedarburg'

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:55:42.120

下载[LinqPad](http://www.linqpad.net/)，您可以粘贴到您的 LINQ 中，然后查看发出的 SQL。另一个更困难的选择是将 SQL Profiler 指向您想要的 SQL 服务器，触发 LINQ 线路并查看它对服务器发出的内容。

# android - 如何从另一种方法中获取价值？如何从另一种方法中获取价值并在主要活动中使用它？

> ID：13570349
> 
> 赞同：0
> 
> 时间：2012-11-26T17:50:51.620
> 
> 标签：android, android-intent, methods, contacts

我希望将电话号码加载到“字符串 xx”中……这怎么可能？电话号码（取自联系人）显示在给定的编辑文本中……但我想将相同的号码加载到字符串 xx 中在主要活动中..

```
public class MsgcontactActivity extends Activity {

private static final int CONTACT_PICKER_RESULT = 1001;
public void doLaunchContactPicker(View view) 
{  
    Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,Contacts.CONTENT_URI);  
    startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);  
}

EditText phoneTxt;
TextView tv;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv=(TextView) findViewById(R.id.textView1);
    String xx=phoneTxt.getText().toString();
    Toast.makeText(getApplicationContext(), xx,Toast.LENGTH_LONG ).show();
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
{  
     String phone="";
     Cursor contacts=null;
     try
     {
        if (resultCode == RESULT_OK) 
        {  
            switch (requestCode) 
            {  
                case CONTACT_PICKER_RESULT:  
                    Uri result = data.getData();
                    String id = result.getLastPathSegment(); 
                    contacts=getContentResolver().query(Phone.CONTENT_URI, null, Phone.CONTACT_ID + "=?", new String[] { id },  null);
                    int phoneIdx = contacts.getColumnIndex(Phone.DATA); 
                    if (contacts.moveToFirst()) 
                    {
                       phone = contacts.getString(phoneIdx);  
                       EditText phoneTxt=(EditText)findViewById(R.id.phoneno);
                       phoneTxt.setText(phone);
                    } 
                    else 
                    {  
                       Toast.makeText(this, "error", 100).show();
                    }  
                    break;  
                }
            }
            else 
            {
                Toast.makeText(this, "Warning: activity result not ok",50).show();
            }  
        }
        catch (Exception e) 
        {  
            Toast.makeText(this, e.getMessage(), 50).show();  
        } 
        finally 
        {  
            if (contacts != null) 
            {  
                contacts.close();  
            }
        }
    }
} 
```

}

使用的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativeLayout3"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<EditText  
    android:layout_height="wrap_content"  
    android:id="@+id/phoneno"  
    android:inputType="text|phone"  
    android:layout_width="wrap_content"  
    android:layout_toLeftOf="@+id/Contacts"  
    android:layout_alignParentLeft="true"/>
<Button  
    android:layout_width="wrap_content"  
    android:layout_height="wrap_content"  
    android:id="@+id/Contacts"  
    android:text="Contacts"  
    android:layout_alignParentRight="true" 
    android:onClick="doLaunchContactPicker"/>
<TextView 
    android:text="TextView" 
    android:layout_width="wrap_content" 
    android:id="@+id/textView1" 
    android:layout_height="wrap_content" 
    android:layout_below="@+id/phoneno" 
    android:layout_alignParentLeft="true"/> 
```

# arrays - Haskell repa - 如何减少数组和返回索引？

> ID：13570354
> 
> 赞同：7
> 
> 时间：2012-11-26T17:51:08.013
> 
> 标签：arrays, haskell, indexing, fold, repa

在 GNU Octave 中，这段代码 -

```
[e, ix] = min(X); 
```

将返回最小元素及其位置。**您如何在 repa 中为任意二进制函数执行此操作？**

这就是我想出的：

```
min x = z $ foldl' f (e,0,0) es
  where
    (e:es) = toList x
    f (a,ix,r) b = let ix' = ix+1 in if a < b then (a,ix',r) else (b,ix',ix')
    z (a,ix,r) = (a,r) 
```

在上面的示例中，我们将 repa 1D 矩阵转换为列表，并使用带有两个累加器的 foldl'（来自 Data.List）——一个用于计算迭代次数（ix），另一个用于保存最小元素的位置（r）。但是使用 repa 的重点是使用数组，而不是列表！

在 repa 中，Array 类型有两个折叠（foldS 和 foldP） - 但它们只能具有类型 (a -> a -> a) 的功能 - 意思是，我不能将带有累加器的元组传递给它。还有 traverse，原则上可以将一维数组归约为标量数组：

```
min x = traverse x to0D min
  where
    to0D (Z:.i) = Z
    min f (Z) = ??? -- how to get elements for comparison? 
```

首先想到的是

```
[f (Z:.i) | i <- [1..n]], where n = (\(Z:.i) -> i) $ extent x 
```

但这也会将数组转换为列表，而不是对数组进行计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:04:15.977

我不是 Repa 方面的专家，但这似乎适用于一维数组。它可能适用于其他维度。

```
import Data.Array.Repa

indexed arr = traverse arr id (\src idx@(Z :. i) -> (src idx, i))

minimize arr = foldP f h t
  where
    (Z :. n) = extent arr
    arr' = indexed arr
    h = arr' ! (Z :. 0)
    t = extract (Z :. 1) (Z :. (n-1)) arr'
    f min@(valMin, iMin) x@(val, i) | val < valMin = x
                                    | otherwise = min 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T21:55:22.597

冒着恢复僵尸帖子的风险，这是我制定的任意维度解决方案（查看评论，这正是@hammar 所建议的）。由于 的奇怪性质`foldAllP`，我在合并元组时将其用作标识元素，因此您还需要为要查找的数组的最小值提供上限。

```
import Data.Array.Repa
import Data.Array.Repa.Eval
import Data.Array.Repa.Repr.Unboxed

minimize :: (Shape sh, Source r a, Elt a, Unbox a, Monad m, Ord a) => Array r sh a -> a -> m (a,sh)
minimize arr upperBound = do
      -- Zip the array with its (Int representation of) indices
      let zippedWithIndex = Data.Array.Repa.traverse arr id (\f idx -> (f idx, toIndex (extent arr) idx))

      -- Define a function that compares two tuple of (a,Int) on the value of the first entry
      let minimumIndex t@(v,_) t'@(v',_) = if v < v' then t else t'

      -- Do a parallel fold of all elements in the array 
      (min,idx) <- foldAllP minimumIndex (upperBound, error "Empty array") zippedWithIndex

      -- convert the indice back from its Int representation
      return (min, fromIndex (extent arr) idx) 
```

自然，如果您的数组包含具有 的实例的类型`Bounded`，您可以制作更方便的函数

```
 minimize' arr = minimize arr maxBound 
```

您可以在提示符下进行一些测试：

```
 λ> let x = fromListUnboxed (ix2 2 2) [20, 30, 10, 40] :: Array U DIM2 Int
 λ> minimize' x
(10,(Z :. 1) :. 0) 
```

# android - 是什么导致此 IllegalArgumentException：服务未注册？

> ID：13570358
> 
> 赞同：5
> 
> 时间：2012-11-26T17:51:14.867
> 
> 标签：android, android-service

每当我旋转手机或按下主页按钮时，应用程序都会崩溃，并且出现以下异常：

```
11-25 22:17:23.855: E/AndroidRuntime(5033): FATAL EXCEPTION: main
11-25 22:17:23.855: E/AndroidRuntime(5033): java.lang.RuntimeException: Unable to stop activity {com.liteapps.handin_3/com.liteapps.handin_3.MainActivity}: java.lang.IllegalArgumentException: Service not registered: com.liteapps.handin_3.MainActivity$2@42116cf0
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3363)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3417)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3615)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.ActivityThread.access$700(ActivityThread.java:142)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1214)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.os.Looper.loop(Looper.java:137)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.ActivityThread.main(ActivityThread.java:4931)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at java.lang.reflect.Method.invokeNative(Native Method)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at java.lang.reflect.Method.invoke(Method.java:511)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at dalvik.system.NativeStart.main(Native Method)
11-25 22:17:23.855: E/AndroidRuntime(5033): Caused by: java.lang.IllegalArgumentException: Service not registered: com.liteapps.handin_3.MainActivity$2@42116cf0
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.LoadedApk.forgetServiceDispatcher(LoadedApk.java:917)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.ContextImpl.unbindService(ContextImpl.java:1253)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.content.ContextWrapper.unbindService(ContextWrapper.java:405)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at com.liteapps.handin_3.MainActivity.onStop(MainActivity.java:71)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.Instrumentation.callActivityOnStop(Instrumentation.java:1204)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.Activity.performStop(Activity.java:5146)
11-25 22:17:23.855: E/AndroidRuntime(5033):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3358)
11-25 22:17:23.855: E/AndroidRuntime(5033):     ... 12 more 
```

这是 mConnection

```
 /** Defines callbacks for service binding, passed to bindService() */
private ServiceConnection mConnection = new ServiceConnection() 
{

    @Override
    public void onServiceConnected(ComponentName className,
            IBinder service) {
        // We've bound to LocalService, cast the IBinder and get LocalService instance
        LocalBinder binder = (LocalBinder) service;
        mService = binder.getService();
        mBound = true;
    }

    @Override
    public void onServiceDisconnected(ComponentName arg0) {
        mBound = false;
    }
}; 
```

我已经注册了我的服务 - 至少我认为我是通过在我的清单中插入以下内容来注册的：

```
<service android:name="StationService" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:45:54.173

我意识到我的问题是有时在服务未绑定时解除绑定我的服务。只有在 onPause() 中解除绑定服务似乎解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-26T02:59:04.803

确保您从同一上下文绑定和解除绑定。我收到此错误并发现这是因为我之前实现了一个上下文包装器，我用它来绑定我的服务。我的解除绑定在 View 上下文中，因此它不知道服务绑定/注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:01:10.420

在应用程序清单文件中注册您的服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T08:21:25.277

您的服务在您的清单中未正确注册。它应该是：

`<service android:name=".StationService" />`

如果服务与清单中指定的包位于同一 Java 包中。

或者，如果它与`Service`清单中注册的 Java 包不同，那么您需要指定完整的包名：

`<service android:name="com.example.package.StationService" />`

# c# - C# 子字符串抛出异常

> ID：13570360
> 
> 赞同：1
> 
> 时间：2012-11-26T17:51:22.900
> 
> 标签：c#, .net, string

这是我的代码：

```
private string title(string pth) //I'm passing a path
{
    pth = System.IO.Path.GetFileNameWithoutExtension(pth); // I need an exact filename with no extension
    return pth.Substring(pth.IndexOf('-')+1, pth.Length).Trim(); // trying to return everything after '-'
} 
```

它抛出一个异常。我不知道为什么。这是从文件名中获取标题的一种非常简单的方法，但它不起作用。

我试过`pth.Length-1`了，但它也不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T17:55:59.030

您正在使用允许您指定要提取的字符数的[`String.Substring`方法版本。](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)

但是，您将`length`参数作为字符串本身的整个长度提供 - 因此`ArgumentOutOfRangeException`.

如果您使用[此版本的`String.Substring`](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)，您可以提供单个参数 ( `startIndex`)，然后您将自动获取字符串的其余部分，从您提供的索引开始。

因此，您可以从此更改代码：

```
return pth.Substring(pth.IndexOf('-')+1, pth.Length).Trim(); 
```

对此：

```
return pth.Substring(pth.IndexOf('-')+1).Trim(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:56:29.670

`Substring(int index, int length)`,`length`应该是子串的长度，而不是整个串的长度。

你要：

```
int index = pth.IndexOf('-');
return pth.Substring(index + 1, pth.Length - index - 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:00:51.603

在这种情况下，我建议使用正则表达式。就像是：

```
private static string title(string pth)
{
   pth = System.IO.Path.GetFileNameWithoutExtension(pth); // I need an exact filename with no extension
   Match m = Regex.Match(pth, @".*\-(?<suffix>.*)$");

   Group suffix = m.Groups["suffix"];
   return suffix.Success ? suffix.Value : pth;
} 
```

干净多了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:56:38.243

问题是您正在尝试检索比您指定的长度短的子字符串。此外，如果字符`'-'`位于字符串的末尾，您将收到异常，因为`index+1`将在字符串之外。这将有助于：

```
private string title(string pth) //I'm passing a path
    {
        pth = System.IO.Path.GetFileNameWithoutExtension(pth); // I need an exact filename with no extension
        string retStr = string.Empty;
        if(pth.IndexOf('-')<pth.Length-1)
        {
              retStr = pth.Substring(pth.IndexOf('-')+1).Trim(); // trying to return everything after '-'
        }
        return retStr;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T18:00:32.357

您需要像这样更改代码：

```
private string title(string pth) //I'm passing a path
{
  pth = System.IO.Path.GetFileNameWithoutExtension(pth);
  var indexOfDash = pth.IndexOf('-') + 1; // Add this line
  return pth.Substring(indexOfDash, pth.Length - indexOfDash).Trim();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T17:56:07.143

我不知道你的例外是什么，但我假设`-`你的字符串中不存在。

如果您查看`String.IndexOf` [此处](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)的文档，您将看到：

> 如果找到该字符串，则 value 的从零开始的索引位置，否则为 -1

当您`subString`使用`-1`起始索引执行 a 时，它将引发异常。

我会先检查是否存在`-`，然后如果找到你的子字符串：

```
if(pth.IndexOf('-') != -1)
{
    //Substring code
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T17:56:19.577

首先，你应该告诉我们你的例外是什么。这会有所帮助

```
pth.Substring(pth.IndexOf('-')+1, pth.Length) 
```

看起来它会抛出异常，因为它会尝试获取超出长度的子字符串。

尝试

```
pth.Substring(pth.IndexOf('-')+1) 
```

反而

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-26T17:57:49.173

String.Substring 方法的第二个参数是子字符串的长度。在这种情况下，子字符串的长度应始终*小于*第 p 个字符串的长度。您可能打算这样做：

```
private string title(string pth) //I'm passing a path
{
    pth = System.IO.Path.GetFileNameWithoutExtension(pth);
    return pth.Substring(pth.IndexOf('-')+1, pth.Length - pth.IndexOf('-') - 1).Trim();
} 
```

# php - PHP循环遍历数组

> ID：13570363
> 
> 赞同：5
> 
> 时间：2012-11-26T17:51:24.117
> 
> 标签：php, xml, arrays

我有一个如下所示的数组（$array）：

```
Array
(
[0] => Array
    (
        [0] => A
        [1] => B
        [2] => C
    )

[1] => Array
    (
        [0] => 1
        [1] => 2
        [2] => 3
    )

[2] => Array
    (
        [0] => apple
        [1] => orange
        [2] => banana
    )

) 
```

使用 CreateXML 我想获取数组并创建一个 XML 文档，但是我遇到了一些问题。我正在使用 foreach 从每个数组中获取第一个值，因为我希望 [0]A [0]1 [0]apple 位于一个元素中，依此类推。使用我现在拥有的代码，它适用于一个元素，我该怎么做才能生成所有元素？迷失在循环中，无法正确处理..感谢您的帮助！

```
public function CreateXML($array){

    foreach ($array as $arr) {
        $array2[] = $arr[0];
    }

    $xmlDoc = new DOMDocument();

    $root = $xmlDoc->appendChild(
      $xmlDoc->createElement("rootelement"));

    $tag = $root->appendChild(
          $xmlDoc->createElement("element"));

    $tag->appendChild(
       $xmlDoc->createElement("Letter", $array2[0]));

    $tag->appendChild(
       $xmlDoc->createElement("Number", $array2[1]));

    $tag->appendChild(
       $xmlDoc->createElement("Fruit", $array2[2]));

    header("Content-Type: text/plain");

    $xmlDoc->formatOutput = true;

    echo $xmlDoc->saveXML();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:59:19.950

```
$newArray = array();
for($i = 0; $i <= count($array[0]); $i++) {
    $newArray[] = array($array[0][$i], $array[1][$i], $array[2][$i]);
}

// Some XML here

foreach($newArray as $row) {
    $tag->appendChild(
       $xmlDoc->createElement("Letter", $row[0]));

    $tag->appendChild(
       $xmlDoc->createElement("Number", $row[1]));

    $tag->appendChild(
       $xmlDoc->createElement("Fruit", $row[2]));
}

// Some more XML and output 
```

仅当每个子数组具有完全相同数量的元素时，这才有效

# php - 删除最后一个字符

> ID：13570364
> 
> 赞同：0
> 
> 时间：2012-11-26T17:51:26.767
> 
> 标签：php

我注意到在stackoverflow中有很多这样的主题，但我读到的只有1个变量，我有两个，我有点困惑。

所以这是我的代码，

```
$query = mysql_query("SELECT Provider.provider_id, provider.company_name FROM Provider");

while($row = mysql_fetch_array($query)){
    echo "'".$row['provider_id']."':'".$row['company_name']."',";

} 
```

我正在使用它为 Jeditable 生成 javascript 代码。

我需要去掉最后一个逗号，这样我就可以结束剩下的代码了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:56:50.367

我喜欢使用数组：

```
$query = ...;
$out = Array();
while($row = mysql_fetch_assoc($query)) {
    $out[] = "'".$row['provider_id']."':'".$row['company_name']."'";
}
echo implode(",",$out); 
```

看起来您正在尝试输出某种 JSON，所以也许您可以使用：

```
$query = ...;
$out = Array();
while($row = mysql_fetch_assoc($query)) {
    $out[$row['provider_id']] = $row['company_name'];
}
echo json_encode($out); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:56:28.050

所以我通常只是把这样的东西堆成一个数组，然后内爆：

```
$parts = array();
while($row = mysql_fetch_array($query)){
    $parts[] =  "'".$row['provider_id']."':'".$row['company_name']."'";

}

echo implode(',', $parts); 
```

也就是说，看起来您正在输出 JSON 字符串的正文。如果是这样，您不应该手动构建它，而是应该使用它`json_encode`。

```
$data = array();
while($row = mysql_fetch_array($query)){
    $data[$row['provider_id']] = $row['company_name'];

}

echo json_encode($data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:56:01.783

```
$query = mysql_query("SELECT Provider.provider_id, provider.company_name FROM Provider");
$result = "";
while($row = mysql_fetch_array($query)){
    $result .= "'".$row['provider_id']."':'".$row['company_name']."',";
}
$result = rtrim($result, ','); 
```

或者

```
$query = mysql_query("SELECT Provider.provider_id, provider.company_name FROM Provider");
$result = array;
while($row = mysql_fetch_array($query)){
    $result[] = "'".$row['provider_id']."':'".$row['company_name']."',";
}
$result = implode(',' $result); 
```

或者

获取记录数（`mysql_num_rows($query)`），当你打到最后一行时，做你想做的事

# google-app-engine - 使用 Skue 或类似框架在 google-app-engine 上构建 REST API

> ID：13570366
> 
> 赞同：1
> 
> 时间：2012-11-26T17:51:38.667
> 
> 标签：google-app-engine, rest, python-2.7, google-cloud-endpoints

在寻找构建 REST API 的方法时，我找到了`skue`(https://code.google.com/p/skue/)。但是，网站上没有太多信息。我的计划是严格按照以下方式构建一个rest api：

```
Models << Business logics << Restful Resources. 
```

这意味着：模型只能由`business logic`; `restful resources`接口是客户端可以直接访问的唯一层。我指定所有这些是为了避免人们建议使用`appengine-rest-server`.

我的问题是：有没有人成功使用过 Skue？如果是这样，您有什么不介意分享的例子吗？`GET`就`POST`足够了，但欢迎更多。如果没有`Skue`，是否有任何框架允许在 google-app-engine 之上构建这样的 rest-apis？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:40:16.593

我是 Skuë 的作者。Skuë 在 Bribrí 中的意思是**“老鼠”**，这是我的国家哥斯达黎加土著群体的语言。

我知道网站上没有足够的信息：（https://code.google.com/p/skue/）

对于想要在自己的项目中使用它的开发人员。很抱歉，我只是没有时间做适当的文档，因为这只是一个副项目，而不是我的日常工作。

但是，我愿意帮助您升级，以便您能够使用它。首先要注意的是它是源代码一部分的小例子。转到该站点，然后单击 Source -> Browse，然后展开“app”分支。

“app”文件夹内的代码代表您自己的 API 实现。包“skue”包含库的实际实现，因此基本上您只需为 Google App Engine 创建 Python 项目并将 skuë 包直接包含在其中。

现在用下载的 main.py 的内容覆盖您的 main.py 文件： [main.py on Skuë project](https://code.google.com/p/skue/source/browse/main.py)。

该文件最重要的部分是您将自己的路由放置到资源实现的位置：注意此处使用“ContactResource”。

```
TASK_HANDLERS = [

                ]

API_HANDLERS = [
                   ('/contacts/(.*)', ContactResource)
               ]

API_DOC = [ ('/', ApiDocumentationResource) ] 
```

浏览到联系人资源实现。

那里有很多事情发生在引擎盖下..但我们的想法是让您不必担心这些。

您需要根据要创建的资源类型从适当的 Resource 父类继承，有四种基本类型：

**DocumentResource：**文档资源是一个类似于对象实例或数据库记录的单一概念。

**CollectionResource：**集合资源是服务器管理的资源目录。客户可以提议将新资源添加到集合中。但是，由集合决定是否创建新资源。

**StoreResource：**存储是客户端管理的资源存储库。存储资源允许 API 客户端将资源放入、取出并决定何时删除它们。

**ControllerResource：** 控制器资源对过程概念进行建模。控制器资源就像可执行函数，有参数和返回值；输入和输出。

与传统的 Web 应用程序使用 HTML 表单一样，REST API 依赖于控制器资源来执行特定于应用程序的操作，这些操作无法在逻辑上映射到标准方法之一（创建、检索、更新和删除，也称为 CRUD）。

现在看一下**ContactResource**示例上的**“describe_resource”**实现。当您从上述基本资源类型继承时，下一步是使用该方法以编程方式向外界描述您的资源。底层 Skuë 实现使用该方法来验证所需参数，并在您对端点执行 OPTIONS 请求时自我描述端点。

 **最后一步是让您实现要为资源处理的方法 (CRUD)。

再次以 ContactResource 示例为例，该资源处理联系人项目的创建、更新和读取。

我希望这至少可以帮助您了解如何开始使用该库。不过，我将来会创建更好的教程。

与此同时，您可以通过电子邮件与我联系：**greivin.lopez@gmail.com**，我会向您发送更详细的示例，甚至是符合您要求的内容。

**重要提示：** 目前 Skuë 项目仅支持 JSON 格式的响应。如果您打算使用另一种格式，则需要创建适当的类来处理它。

来自哥斯达黎加的问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:08:01.440

我没有使用过`skue`，但您正在寻找的内容听起来很适合[Google Cloud Endpoints](http://endpoints-trusted-tester.appspot.com/)。有关更多详细信息，请参阅我之前关于该主题的[答案。](https://stackoverflow.com/questions/9453561/restful-service-framework-for-appengine/11680605#11680605)**

# drupal - 在 Drupal 6 中更改内容类型机器名称

> ID：13570368
> 
> 赞同：0
> 
> 时间：2012-11-26T17:51:41.577
> 
> 标签：drupal, drupal-6

我有一个 Drupal 6 站点，其中包含约 400 个内容类型“页面”的节点。在过去几年中，我们添加了很多仅适用于产品的字段，但我们从未将这些产品拆分为它们自己的内容类型。因此，我有大约 350 个产品节点和 50 个一般内容节点，它们都在同一个“页面”内容类型中。因为我们有很多只适用于产品节点的字段，所以我现在想将它们拆分为它们自己的内容类型。

问题来了：因为大多数节点都是产品，所以最简单的方法是将现有的“页面”类型重命名为“产品”，然后创建一个名为“页面”的新类型。（之后，我只需要在新的“页面”类型中重新创建 50 个通用内容页面。）但是在我重命名第一个类型并创建新的“页面”类型后，“页面”没有显示在内容类型列表中。我假设我遇到了由更改机器名称引起的冲突，但我不确定冲突在哪里。我尝试刷新所有缓存，但这似乎没有帮助。

在这一点上，我已经恢复到我的备份，我正在尝试找出一种更好的方法来做到这一点。也许如果我更改人类可读的名称，但不理会机器名称？如果您必须依赖不匹配的机器名称，这有点令人困惑，但它似乎可以工作。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:01:53.193

如果没有更多信息，很难说到底是什么问题，但我建议避免重命名`Page`，因为它是一种核心内容类型。只需创建新的“产品”类型并从那里开始。如果您可以访问数据库，那么将您的产品节点移动到新类型中应该不难。

# enums - 恢复枚举字段值

> ID：13570370
> 
> 赞同：0
> 
> 时间：2012-11-26T17:51:44.267
> 
> 标签：enums, mysqlbinlog, mysql-backup

我从 mysql 表的枚举字段中更改了可能的值。我认为随着这种变化，来自变化字段的一些值丢失了。是否有可能以某种方式恢复这些值？我有一个用于数据库更改的 mysqlbinlog。

谢谢

# r - 提高慢 R 代码的效率

> ID：13570386
> 
> 赞同：2
> 
> 时间：2012-11-26T17:53:02.000
> 
> 标签：r, range, apply, performance

我有一个 I/GRanges Views 对象作为

** 它是数据的简化版本，实际数据巨大

```
Views on a 10000000-length Rle subject

 views:
      start      end   width
 [1]      1     1000    1000 [100 100 100 100 100 100 100 100 100 100 ...]
 [2]   1001     2000    1000 [190 190 190 190 190 190 190 190 190 190 ...]
 [3]   2001     3000    1000 [280 280 280 280 280 280 280 280 280 280 ...]
 [4]   3001     4000    1000 [370 370 370 370 370 370 370 370 370 370 ...]
 [5]   4001     5000    1000 [460 460 460 460 460 460 460 460 460 460 ...]
 ...    ...      ...     ... ...
 [9996] 995001  9996000 9001000 [89650 89650 89650 89650 89650 89650 ...]
 [9997] 996001  9997000 9001000 [89740 89740 89740 89740 89740 89740 ...]
 [9998] 997001  9998000 9001000 [89830 89830 89830 89830 89830 89830 ...]
 [9999] 998001  9999000 9001000 [89920 89920 89920 89920 89920 89920 ...]
[10000] 999001 10000000 9001000 [90010 90010 90010 90010 90010 90010 ...] 
```

每个视图（线）的宽度为 1000，这意味着 1000 个数据点，每个数据点 100 个。现在，我想将一组数据点分成 20 个箱（在这种情况下，每个箱 50 个），然后取平均值，因此输出将是一个包含 20 个数字的向量，每个数字都是该箱的平均值。

输出 ：

```
[1] 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 100 
```

现在，在真实情况下，我有 20 多个这样的视图，每行的宽度不同，有些行 > 5K。我的代码工作正常，但速度很慢，对于我的数据，对于每一行，返回一个包含 20 个 bin 的向量，大约需要 1.5 秒，我有 > 30K 行，大约需要 12.5 小时。

我敢肯定，有一些方法可以加快这些计算，如果没有的话，我可以以某种方式使用集群的并行节点。你有什么建议。

## 生成数据的测试代码：

```
library('GenomicRanges')
# generating data frame 
df=data.frame(chrom=rep('Chr1',100000),start=seq(1,1000000,by=1000),end=seq(1000,10000000,by=1000),strand=rep("+",100000))

# making GRanges object
gr=GRanges(seqnames=as.vector(df[,1]),IRanges(start=df[,2],end=df[,3]),strand=df[,4])
# obtaining coverage using function coverage in the form of RLE object
gr.cov=coverage(gr)
# generating views for specific start and end
gr.views=Views(gr.cov[[1]],start=seq(1,1000000,by=1000),end=seq(1000,10000000,by=1000))
# putting in temp variable
d=gr.views

# this following code calculates the matrix (where each line is 20 points) for 10 lines
# reduce or increase the number in the outermost sapply loop to increase/decrease the lines to be calculated

sapply(1:10,function(j)
   sapply(1:20,
   function(i)as.numeric(
     format(
       mean(
         as(d[[j]][(
           seq(0,length(d[[j]]),floor(length(d[[j]])/20))+1)[i]:
             c((seq(0,length(d[[j]]),floor(length(d[[j]])/20)))[
               -length((seq(0,length(d[[j]]),floor(length(d[[j]])/20))))
               ],length(d[[j]]))[i+1]],
            "RangedData")$score),
       digits=2)
     )
   )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:39:21.760

与其根据基因创建视图，不如根据要进行计算的窗口创建视图，然后使用`viewSums`或`viewMaxs`计算视图的统计信息？假设你有一个`GRanges`描述“基因”的开始和结束（成绩单？）

```
genes <- GRanges(seqnames, IRanges(geneStarts, geneEnds)) 
```

您可能会计算窗口开始和结束

```
n <- 50L
starts0 <- Map(function(...) floor(seq(...)), start(genes), end(genes),
               MoreArgs=list(length.out=n + 1L))
ends <- lapply(starts0, function(x) floor(x)[-1])
starts <- lapply(starts0, function(x) x[-length(x)]) 
```

然后创建您的视图

```
v <- Views(gr.cov[[1]], start=unlist(starts), end=unlist(ends)) 
```

（参见`?RleViews`“Views,RleList-method”）计算统计数据并按基因分割

```
split(viewMeans(v), rep(seq_along(genes), each=n)) 
```

[在Bioconductor 邮件列表](http://bioconductor.org/help/mailing-list)上询问可能会带来许多巧妙的解决方案。

`v`是“RleViews”类的一个实例；`v[[1]]`是 的一个实例`Rle`。您可以计算`mean(v[[1]])`作为 的确认`viewMeans`，或者更进一步并强制`v[[1]]`转换为一个普通的旧向量并计算它`mean(as.vector(v[[1]])))`。`runValue(v[[1]])`（与使用适当的访问器相同`v[[1]]@values`但使用适当的访问器，而不是在引擎盖下窥视）返回 Rle 中的值，例如，

```
> (x <- Rle(c(rep(100, 10), rep(200, 10))))
numeric-Rle of length 20 with 2 runs
  Lengths:  10  10
  Values : 100 200
> runValue(x)
[1] 100 200
> runLength(x)
[1] 10 10 
```

很明显`mean(runValue(x)) != mean(x)`。

# c# - 如何检查windowsstore应用程序中是否存在文件

> ID：13570390
> 
> 赞同：5
> 
> 时间：2012-11-26T17:53:26.287
> 
> 标签：c#, windows-8, windows-store-apps

在 windows 8 app dev 上制作实验室时。我无法加载所有需要的图像。因此，为了让共享部分与共享图像一起使用，我需要检查图像文件是否可用。该项目是一个使用 XAML 和 C# 的 windows 网格应用程序过去我使用

```
Using System.IO
 ... lost of code
privat void share()
....
    if (File.exist(filename)
    { 
       add file to share
    } 
```

如果我在我的 window8 项目中尝试这个。找不到 File 类。

我在互联网上搜索，但找不到在 C# 中检查 windowsstore 应用程序是否存在的代码示例

米歇尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T18:01:07.343

你不需要[StorageFile](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.aspx)`File`

这是检查和获取文件的简单示例

```
StorageFile file;
try {
    file = await ApplicationData.Current.LocalFolder.GetFileAsync("foo.txt");
}
catch (FileNotFoundException) {
    file = null;
} 
```

你可以写一个函数

```
public static async Task<bool> FileExistsAsync(this StorageFolder folder, string fileName)
{
    try
    {
        await folder.GetFileAsync(fileName);
        return true;
    }
    catch (FileNotFoundException)
    {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:06:21.100

如果您知道本地存储中的路径并且有一堆文件要检查，则可以执行以下操作...

```
var sourceFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;
sourceFolder = await sourceFolder.GetFolderAsync("Assets");
var files = await sourceFolder.GetFilesAsync();
var requiredFiles = new List<String> { "ThisWorks.png", "NotHere.png" };
foreach(var filename in requiredFiles)
{
    // your example logic here...
    Debug.WriteLine(filename + " " + (files.Any(f => f.Name == filename) ? "Exists" : "Doesn't exist"));
} 
```

# jquery-ui - 从 jQuery UI 对话框重新加载父页面

> ID：13570397
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:53:54.777
> 
> 标签：jquery-ui

我有一个在 jQuery UI 对话框中加载的 gridview。对话框和网格视图现在都工作得很好。但我想知道如何在单击对话框中的按钮或关闭对话框时刷新父页面？

我试过这个：

```
location.reload(true); 
```

但它只适用于FF。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:10:06.627

我讨厌回答我自己的问题，但已经 2 周了，没有答案。

经过一番研究，我决定使用简单的javascript：

```
window.location.reload(); 
```

这在我的情况下有效。

谢谢

# android - MyLocationOverlay 导致无休止的重绘

> ID：13570406
> 
> 赞同：1
> 
> 时间：2012-11-26T17:54:22.970
> 
> 标签：android, android-mapview, redraw, mylocationoverlay

我遇到了我的异常行为`MapView`，我正在使用 RoboGuice，但我不确定它是否会影响问题。

问题是，如果我`MyLocationListener`在我的地图上启用 a，那么它上面的每个叠加层都会无限地不断重绘。
看看这个例子：

我的地图活动

```
@ContentView(R.layout.map)
public class MyMapActivity extends RoboMapActivity {

@InjectView(R.id.map)
private MapView map;

private List<Overlay> mapOverlays;
private MyLocationOverlay compass;
private TestOverlay testOverlay;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    map.setBuiltInZoomControls(true);
    mapOverlays = map.getOverlays();
    compass = new MyLocationOverlay(this, map);
    testOverlay = new TestOverlay();
}

@Override
protected void onResume() {
    super.onResume();
    compass.enableCompass();
    refreshMap();
}

private void refreshMap() {
    mapOverlays.clear();
    mapOverlays.add(testOverlay);
}

@Override
protected void onPause() {
    compass.disableCompass();
    super.onPause();
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}
} 
```

测试覆盖

```
public class TestOverlay extends Overlay {

@Override
public void draw(Canvas arg0, MapView arg1, boolean arg2) {
    System.out.println("drawing...");
    super.draw(arg0, arg1, arg2);
}
} 
```

如果我运行它，我将`drawing...`永远每秒打印大约十次。但是，如果我通过注释掉这一行来
避免启用罗盘：`MyLocationOverlay`

```
// compass.enableCompass(); 
```

然后重绘停止。
知道为什么会这样吗？这是一个错误还是我做错了什么？

**编辑**

刚刚在一个没有使用RoboGuice的项目中复现，问题依旧。
我想从现在开始我会不用那个指南针

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:22:21.117

**为什么会发生**

因为您希望指南针始终指向北方（或其他方向）而与设备旋转无关，因此需要连续读取磁传感器和连续读取指南针。

使用`MapView`强制覆盖重绘，您必须使用`invalidate()`请求重绘地图中每个覆盖的方法，包括未更改的 ovarlays。

**如何解决**

我从未使用过`RoboGuice`，所以我只能就标准解决方案提供建议。

你不能真正停止重绘，如果你想让指南针指向正确的方向，你也不能只绘制一个叠加层（因为你正在绘制位图，需要清除它并让每个叠加层重绘在上面）。

就我而言，我使用了两个调整来改进这一点：

*   我将传感器更新频率设置为最小频率值。
*   在更新覆盖之前，我将当前方向与用于绘制指南针的方向进行比较。如果它们相差很小的度数（例如 3 度），我将忽略更新并等待具有更大差异的更新以请求覆盖重绘。

问候。

# java - 关于Oracle的java在线教程中使用HashMap存储字谜的例子

> ID：13570408
> 
> 赞同：0
> 
> 时间：2012-11-26T17:54:31.667
> 
> 标签：java, hashmap, hashtable, hashcode, anagram

我正在阅读 Oracle 的在线 java 教程中使用 HashMap 存储字谜的示例：

```
 // Read words from file and put into a simulated multimap
    Map<String, List<String>> m = new HashMap<String, List<String>>();

    try {
        Scanner s = new Scanner(new File(args[0]));
        while (s.hasNext()) {
            String word = s.next();
            String alpha = alphabetize(word);
            List<String> l = m.get(alpha);
            if (l == null)
                m.put(alpha, l=new ArrayList<String>());
            l.add(word);
        }
    } catch (IOException e) {
        System.err.println(e);
        System.exit(1);
    }

    // Print all permutation groups above size threshold
    for (List<String> l : m.values())
        if (l.size() >= minGroupSize)
            System.out.println(l.size() + ": " + l);
}

private static String alphabetize(String s) {
    char[] a = s.toCharArray();
    Arrays.sort(a);
    return new String(a);
} 
```

}

由于 HashMap 是用 Hash Table 实现的，我认为每个排序后的按字母顺序排列的字符串在压缩后应该有一个唯一的哈希码（否则在 HashMap 中存储值的链表将存储一个不是按字母顺序排序的字符串的变位词的值）。

我不确定 Java 的 HashMap 实现如何满足这一点 - 我假设它们使用字符串的哈希码 (a1*31^n-1 + a2*31^n-2 + ... + an)。如果我们谈论的字符串只有小写字符，这可能会保证哈希码的唯一性。但是，在将key的值放入哈希表中之前，还必须压缩哈希码（否则您将有一个无法在内存中处理的huggggggge哈希表，只是想想31^10有多大是）。在这种压缩中，我认为会有碰撞。换句话说，两个不是真正字谜的不同字符串最终将存储在同一个桶中（它应该只用于存储真正字谜的列表）......

任何人都可以帮助我了解我可能会错过什么吗？或者如果在线教程缺少一些东西？

谢谢！

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:08:46.890

永远不要假设哈希码是唯一的——但要意识到`HashMap`已经知道哈希码是非唯一的，并适当地处理它们。

换句话说，即使`a.hashCode() == b.hashCode()`, if `!a.equals(b)`, 那么 a`HashMap`也不会混淆与 关联`a`的值和与 关联的值`b`。

# python - 读写 Socket-SerialPort 使用昂贵的 CPU

> ID：13570409
> 
> 赞同：2
> 
> 时间：2012-11-26T17:54:34.963
> 
> 标签：python, python-2.7

```
def threadSocket(Socket, port):
    '''
    Thread encargado de sotener comunicacion entre Socket cliente y
    el puerto serial asignado
    Mientras se mantenga activo el thread de recepcion se intentara leer del
    puerto serial y enviarlo al socket cliente
    Se asume que socket y port son objetos vaidos validos
    '''
    #Intenta abrir el puerto serial
    try:
        COM = serial.Serial(port-1)
    except:
        #Si esta en uso no se encuentra disponible, muestra error
        print 'Error: Puerto COM'+str(port)+' no disponible'
    else:
        #Al conectarse se crea el thread de recepcion
        print 'Conectado a puerto COM'+str(port)
        rxThread = threading.Thread(target=rxThreadDef,args=(Socket,COM))
        rxThread.start()
        dato = ''
        #Mientras el thread este activo
        while rxThread.isAlive():
            try:
                #Lee del puerto serial y envia a Socket cliente
                dato += COM.read()
                if parserCOMToSocket(dato):
                    Socket.send(dato)
                    dato=''
            except:
                break
        print "Puerto cerrado!"
        #Cierra puerto Serial
        COM.close()
    #Cierra Socket
    Socket.close()
    #print "Hilo terminado"
def rxThreadDef(Socket,COM):
    '''
    Thread (Hilo) encargado de recibir la informacion del Cliente
    y enviarla por medio del puerto serial
    Si se genera algun error se rompe el ciclo y termina el thread
    '''
    dato = ''
    while 1:
        try:
            d = Socket.recv(1024)
        except:
            break
        if d:
            dato += d
            if parserSocketToCOM(dato):
                COM.write(dato)
                print dato
                dato = ''
        else:
            break

def parserSocketToCOM(dato):
    return True

def parserCOMToSocket(dato):
    return True 
```

嗨，我尝试在 Python 2.7 中使用套接字实现串行端口和 AIR 应用程序之间的桥接

当***rxThread***死时，***socketThread***将能够关闭套接字和串口，因为客户端套接字死了。但是脚本需要等待从串口读取数据才能全部关闭。

如果我尝试使用 a `timeout=0`，CPU 使用率会增加到 100%。如果我尝试使用`timeout=None`but use `COM.isWaiting()`，我会遇到同样的问题（100% 的 CPU）

我怎么知道套接字是否以其他方式关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T10:49:27.387

如果您需要从两个来源阅读，您可以愉快地使用[`select()`](http://docs.python.org/2/library/select.html#module-select). 在这种情况下，您将不需要线程。`select`阻塞直到一个或多个资源可用，然后返回一组可用资源，以便您可以对每个资源做出反应。请注意，它`select`适用于[文件描述符](http://pyserial.sourceforge.net/pyserial_api.html#serial.Serial.fileno)，您可能需要将其置于[非阻塞模式](http://pyserial.sourceforge.net/pyserial_api.html#serial.Serial.nonblocking)。

# javascript - Node JS 中的简单路由和不显眼的模板引擎

> ID：13570412
> 
> 赞同：1
> 
> 时间：2012-11-26T17:54:45.957
> 
> 标签：javascript, node.js, express, templating-engine

这是一个多部分的问题，我是 Node 的新手，所以请温柔:)

我有一个非常简单的 Node/express 应用程序设置返回 index.html 而不使用路由...

```
var app = express();
var port = process.env.PORT || 1337;

app.use('/i', express.static(__dirname + '/i'));
app.use('/Stylesheets', express.static(__dirname + '/Stylesheets'));
app.use(express.static(__dirname));

app.listen(port);
console.log('listening on port ' +  port); 
```

index.html 用作静态文件。

我的下一项工作是开始返回一些带有正确路由的页面，我已经知道我需要将我的路由放在 routes.js 文件中，并在我的 server.js 文件中“要求”该文件，但我可以不要让我的头脑设置路线，我在网上看到的每个示例/演示似乎都以不同的方式进行。任何有关如何做到这一点的明确示例都将不胜感激。

问题的下一部分是我想包含动态页面，但不知道模板引擎的去向。我想使用一些“不引人注目”的东西，这样我的原始 HTML 文件在浏览器中查看时仍然有意义。

在前端，我只需先使用选择器将 HTML 注入页面，然后使用 .html() 方法更改 html，我可以将 JSON 数据与模板绑定，然后通过查找将其注入正确的位置对于类名等。这完全不显眼，不需要任何丑陋的 {} 括号、内联 javascript 或指令。伪代码...

```
var data  = {"name":"John"};
var result = templateEngine.bind("/template.html", data)

$('.person').html(result); 
```

这样，我可以保持我的原始 HTML 干净和可见，就像这样......

```
<div class="person">
    My Name is FirstName
</div> 
```

我能找到的最接近的是 PURE - [http://beebole.com/pure](http://beebole.com/pure) - 但我不确定如何让它与 NODE 一起工作（或者即使它兼容）。

为了增加更多复杂性，我使用的任何模板引擎都需要能够使用子模板（部分？），以便我可以包含每个页面上都相同的页眉/页脚等。我假设这可以通过在需要的每个主模板中引用子模板来递归完成？

如果您仍在阅读本文，那么很明显，您会发现我在这里用新技术挣扎，任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:52:43.223

> 但我无法开始设置路线，而且我在网上看到的每个示例/演示似乎都以不同的方式进行。任何有关如何做到这一点的明确示例都将不胜感激。

不确定您在示例中看到了什么不同，但一般模式是这样的：

```
app.**[HTTP VERB]**(**[URL]**, function(req, res){
    res.end('<html>hello world</html>');
}); 
```

以下代码将接受对您站点根 URL 的所有 HTTP GET 请求：

```
app.get('/', function(req, res){
    res.end('<html>hello world</html>');
}); 
```

虽然以下代码将接受您站点中 /test 的所有 HTTP GET 请求

```
app.get('/test', function(req, res){
    res.end('<html>hello world from the test folder</html>');
}); 
```

对于 HTTP POST 请求（例如，当用户将数据提交回服务器时）有一个单独的路由是很常见的。在这种情况下，HTTP 动词是 POST，如下例所示。

```
app.post('/test', function(req, res){
    res.end('<html>Thanks for submitting your info</html>');
}); 
```

在这种情况下，我将嵌入代码以直接处理请求，而不是像您所指出的那样引用外部 routes.js，以使该问题中的示例更清晰。在真正的应用程序中，您将通过引用外部函数来完成此操作，以便您的 app.js 保持精简和干净。

```
app.get('/test', routes.NameOfFunctionToHandleGetForSlashTest);
app.post('/test', routes.NameOfFunctionToHandlePostForSlashTest); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T01:25:11.530

我知道这是一个老问题，但我最近探索了这个话题，并提出了以下解决方案：

[我原来的问题](https://stackoverflow.com/questions/16369649/include-html-blocks-using-node-js)

我在 ejs 上放置了以下配置：

```
 var ejs = require('ejs');

 server.configure(function(){
    server.set("view options", {layout: false});  
    server.engine('html', require('ejs').renderFile); 
    server.use(server.router);
    server.set('view engine', 'html');
    server.set('views', __dirname + "/www");
 }); 
```

这会将您的视图引擎设置为 ejs，将视图目录设置为静态公共 html 目录，并告诉 ejs 处理 .html 文件而不是 .ejs。

路线可以是这样的句柄：

```
 server.all("*", function(req, res, next) {
      var request = req.params[0];

          if((request.substr(0, 1) === "/")&&(request.substr(request.length - 4) === "html")) {
          request = request.substr(1);
          res.render(request);
      } else {
          next();
      }

  });

 server.use(express.static(__dirname + '/www')); 
```

这会通过视图引擎路由所有 html 请求，并将堆栈上的所有其他请求作为静态文件发送。

您的 html 现在看起来像：

```
 <%include head.html%>
  <%include header.html%>

  <p class="well">Hello world!</p>

  <%include footer.html%> 
```

您可以嵌套包含，并将变量传递到您的包含中。因此，例如您的包含头可以调用：

```
 <title> <%= title %> </title> 
```

在您的索引页面的顶部，您可以包含一个对象，例如：

```
 {var title: "Home"} 
```

无论如何，也许这会帮助那些正在寻找一种超简单的方法来处理包含内容的人，同时坚持使用普通的 html。

# linux - Bash 脚本：跳过文件和 grep

> ID：13570414
> 
> 赞同：2
> 
> 时间：2012-11-26T17:54:52.687
> 
> 标签：linux, bash, grep

Bash 脚本不是我的强项。我有一个结构为

```
% comment
filename1 pattern-to-search1
filename1 pattern-to-search2
... 
```

我想为文件中的每一行编写一个脚本来 grep for all `filename`。`pattern-to-mat`

到目前为止我有

```
while read file p
do
    if [ "${file:0:1}" != "%" ]
    then
    grep -o "$p" $file | wc -l
    fi
done
echo -e "\nDone." 
```

但它不会跳过以`%`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:07:29.320

我只是做

```
grep -v '^%' | while read file p
do
    grep -c "$p" -- "$file"
done 
```

这样，注释行甚至不会*到达*循环`read`

# iphone - 哪个更适合移动分析 Localytics 或 GoogleAnalytics？

> ID：13570419
> 
> 赞同：2
> 
> 时间：2012-11-26T17:55:11.480
> 
> 标签：iphone, google-analytics, analytics

我想在我的 iPhone 应用程序中使用移动分析，我读过它们彼此相似，但有些人说 Localytics 更好，其他人说 GoogleAnalytics 更好，非常感谢建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:14:16.800

Localytics 和 Google Analytics 之间的最大区别在于 Localytics 是为应用程序设计的，而不是网站。Localytics 默认收集更丰富的数据集，并允许您创建具有任意数量属性的任意数量的事件（GA 将您限制为一个）。SDK 适用于所有领先平台，非常轻量级并以源代码形式提供。

Localytics 有免费和付费版本。免费版本名为 Community，在事件发生、收集个人数据和数据基数方面确实有一些限制，但很少有客户达到这些限制。与 Google 不同，Localytics 不会对您的应用使用情况进行抽样。此外，Localytics Enterprise 客户可以访问会话级数据以与其他系统集成。

我们的网站上提供了更多信息，包括技术文档 (http://localytics.com/docs)。如果您在那里找不到您需要的东西或者您有更多问题，请联系我，我很乐意为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:06:48.523

我目前在我的应用程序中使用 Localytics，它是很好的分析，但与谷歌分析相比它有缺点，即您可以跟踪每个用户的有限事件，如果您尝试注册的数量超过该数量，它们将删除您的所有事件属性，这样我将删除我的 localytis 帐户并开始使用谷歌分析，因为它不使用这种限制，因为事件的重要性和属性我将离开 localytics 并使用谷歌分析，所有其他分析的东西都一样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T23:01:39.150

仅适用于截至 2015 年阅读此内容的任何人 - Google Analytics（分析）最多允许 50 个自定义维度与您的事件一起使用，并且每个事件默认包含三个分层字段，外加一个值字段。谷歌分析不会“示例应用程序使用情况”，除非您达到非常高的限制，但确实有报告限制，超过该限制的报告将基于收集的数据样本。使用 Google Analytics Premium，您还可以获得非抽样数据。GA 还支持使用唯一的成员令牌在网站和本机应用程序之间跟踪用户。

# r - 将字符列转换为因子会节省内存吗？

> ID：13570420
> 
> 赞同：17
> 
> 时间：2012-11-26T17:55:13.477
> 
> 标签：r, dataframe

我有一个 2.5 GB 的数据集，这对于我的 4GB 内存来说是相当大的。我想知道将字符变量转换为因子是否会节省空间和处理时间。

我想在内部，因子将以数字形式存储，并带有一个级别的查找表。但我不确定它实际上是如何工作的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T18:18:26.657

转换为因子不会节省空间，因为字符存储在哈希表中。请参阅第1.10 节[R Internals](http://cran.r-project.org/doc/manuals/R-ints.html)的[CHARSXP 缓存](http://cran.r-project.org/doc/manuals/R-ints.html#The-CHARSXP-cache)。

如果您的代码需要转换为因子（运行回归、分类等），则转换为因子可能会缩短处理时间，但如果您正在进行字符串操作，则不会提高处理时间，因为它必须转换因子回到一个角色。所以这真的取决于你在做什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T18:35:51.913

在将数据写入磁盘时，将分类数据存储为因子而不是字符向量确实可以节省空间：

```
## Create 2 two-million length vectors, one character and one factor
animalsChar <- c(rep("giraffe", 1e6), rep("pygmy chimpanzee", 1e6))
animalsFac  <- factor(animalsChar)

## Save them to two ".Rdata" files
charFile <- "char.Rdata"
facFile <-  "fac.Rdata"
save(animalsChar, file = "char.Rdata")
save(animalsFac, file = "fac.Rdata")

## Compare the sizes of the two files
file.info("char.Rdata", "fac.Rdata")["size"]
#             size
# char.Rdata 87390
# fac.Rdata   7921

## Clean up
unlink(c("char.Rdata", "fac.Rdata")) 
```

# python - Python程序用以下序列计算pi：pi = 4/1 - 4/3 + 4/5 - 4/7......等

> ID：13570423
> 
> 赞同：0
> 
> 时间：2012-11-26T17:55:32.340
> 
> 标签：python, function, python-3.x, pi, fractions

只是坚持这个问题，我已经尝试了很多方法，但这就是我到目前为止所拥有的。不知道有什么问题。

```
def main(n):
    summ=0
    pipe=0
    for i in range(1, n, 4):
        x = 4/i
        summ = summ + x
    for j in range(3, n, 4):
        y = 4/j
        pipe = pipe + j
    ans = summ - pipe
    print(ans) 
```

它给了我疯狂的数字......不明白为什么:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:03:11.917

```
 pipe = pipe + j 
```

应该`y`改为添加。`j`是循环变量，而不是您要添加的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:39:36.590

有更多可读的方法来编码你正在做的事情；这就是我将如何做到的。首先定义进程，然后定义操作。当提供数字的对象用完要提供的数字时，让函数退出。在这种情况下，您无需担心保留`pipe`变量，也无需担心制作两个不同的列表来保存正负减法。

```
def pi(n):
    ''' returns approximations of pi. '''
    result = 0
    odd_numbers = xgen(1, n, 2)
    while True:
        try:
            result += 4.0/odd_numbers.next()
            result -= 4.0/odd_numbers.next()
        except StopIteration:
            break
    return result

def xgen(start, stop, step):
    ''' turns an xrange into an actual generator. '''
    for i in xrange(start, stop, step):
        yield i 
```

# ios - 在 iOS 5/5.1 上关闭插页式 Flurry 广告时的空白视图控制器

> ID：13570431
> 
> 赞同：3
> 
> 时间：2012-11-26T17:55:54.757
> 
> 标签：ios, ios5, ads, flurry

我在我的 iOS 应用上实现了 FlurryAds，并创建了一个插页式/全屏广告。请求和显示广告工作正常，但在我关闭广告后，我在 .xib 文件中的所有 ViewController 元素都变得不可见。我知道它们还在那里，因为如果我点击屏幕，那里的按钮仍然会响应。

关于如何解决这个问题的任何想法？

编辑：忘记发布更多信息，我使用的是 XCode 4.5.2，我的项目使用的是 ARC，没有 Storyboard，Flurry SDK 是 4.0.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:14:26.883

**当您使用“** **”**进入 viewController 时会出现此错误 **`[self presentModalViewController: viewController animated:YES]`**

尝试使用这个 **“ `[self.navigationController pushViewController: viewController animated:YES]`”**

希望对你有帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T23:43:27.270

好的，我终于找到了问题所在，这是因为我误解了视图控制器的工作原理。

我的所有视图控制器都继承自自定义视图控制器，该控制器在 viewDidLoad 上添加了完整的背景图像，然后淡出。我所要做的就是在 viewDidLoad 上单独添加完整的背景图像，但在 viewDidAppear 方法中添加淡出动画。

# javascript - 使图像浮动在 jQuery 对话框之外

> ID：13570437
> 
> 赞同：1
> 
> 时间：2012-11-26T17:56:05.757
> 
> 标签：javascript, jquery-ui

我有一个 jQuery 对话框，我希望其中的图像看起来漂浮在对话框之外。我尝试了位于[此处](https://stackoverflow.com/questions/6115947/how-to-make-items-float-outside-of-jquery-dialogs)的解决方案，但它对我不起作用。一旦跨越对话框窗口（或对话框标题栏）的边界，我所看到的只是一个截断的图像，所以我从我的代码中摆脱了该解决方案并从头开始重新开始。我的相关代码现在如下：

jQuery：

```
$("#idForm").dialog(); 
```

HTML：

```
<div id="idForm" title="Identify">
    <img src='images/i_info.png' 
         alt="identify icon" 
         id='idFormIdentifyIcon' 
         style="position: relative; top: -20px; left: -20px; z-index: 999999" />
    ...other HTML here...
</div> 
```

我想要的只是图像漂浮在对话窗口之外。有小费吗？我已经尝试过绝对定位和相对定位，以及是否打开“溢出：可见”，如链接示例中所示。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:51:17.113

我可以通过将图像放在对话窗口的标题栏中（而不是在下面的正文中）来解决我的问题，然后按照问题开头链接示例中的其余说明进行操作。

# java - Jackrabbit，保存很多文件太慢了

> ID：13570441
> 
> 赞同：1
> 
> 时间：2012-11-26T17:56:13.927
> 
> 标签：java, jackrabbit, jcr

我在几个项目中使用 jackrabbit 作为文档存储库，它工作得很好，但我在一个系统上遇到了问题，让我描述一下情况：

*   慢是指从 40 秒到大约 2 分钟。
*   我正在保存 pdf 文档，每个文档的大小约为 100kb。
*   我在一分钟内生成大约 20 个文档。
*   每个文档都保存在它自己的会话中。
*   这只发生在负载下，当我生成一个文档时，它会在几秒钟内保存。
*   查找速度足够快，只需几秒钟。

我不太了解jackrabbit 的内部结构，但我认为可能是lucene 索引了需要这么长时间的东西。

那么，是否有可能微调某些东西以获得更好的时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:12:15.600

您可能想查看以下文档以确保您的配置合适：

*   [http://wiki.apache.org/jackrabbit/DataStore](http://wiki.apache.org/jackrabbit/DataStore)关于二进制文件的存储方式/位置
*   [http://wiki.apache.org/jackrabbit/IndexingConfiguration](http://wiki.apache.org/jackrabbit/IndexingConfiguration)关于索引配置

存储 100kb PDF 需要 40 秒到 2 分钟，这比我预期的要多得多 - 当然，您还需要检查您的环境并确保没有磁盘交换或其他导致此问题的基本系统问题。

# objective-c - GCDAsyncUdpSocket 在发送到 IPv6 地址时立即关闭

> ID：13570444
> 
> 赞同：3
> 
> 时间：2012-11-26T17:56:20.027
> 
> 标签：objective-c, ios, asyncsocket, gcdasyncsocket

我通过 UDP 连接到 Bonjour 宣传的不同设备上的服务器。当运行此代码的 iOS 设备和服务器都在我们的 wifi 网络上时，它工作得很好，因为 bonjour 服务解析为我们的 dhcp 服务器分发的 192.168.0.xxx 地址。但是，当它通过蓝牙进行广告时，有时服务会解析为 169.254.xxx.xxx (IPv4)，在这种情况下它工作得很好。但有时它会解析为 fe80::xxxx:xxxx:xxxx:xxxx (IPv6)，在这种情况下，套接字连接（我收到`udpSocket:didConnectToAddress`回调）但在我尝试发送数据时立即关闭（我`udpSocketDidClose:withError`在调用 send 时立即收到回调）。

```
- (BOOL) setupConnection: (DNSSDService*) service
{
    NSString *host = [service resolvedHost];
    NSUInteger port = [service resolvedPort];
    NSLog(@"in setupConnection: host %@ port %u",
          host, port);

    self.sock = [[GCDAsyncUdpSocket alloc]initWithDelegate:self 
                delegateQueue:dispatch_get_main_queue() ];
    NSError *err = nil;
    if (![self.sock connectToHost:host onPort:port error:&err]) {
        NSLog(@"we goofed: %@", err);
        return NO;
    }
    return YES;
} 
```

我的`udpSocket:didConnectToAddress`方法调用了发送，此时我的其他回调基本上只是信息性的（NSLog）。这是传递给的 NSError `udpSocketDidClose:withError`：

```
Error Domain=GCDAsyncUdpSocketErrorDomain Code=4 "Socket closed" UserInfo=0x2630c0 {NSLocalizedDescription=Socket closed} 
```

用处不大。

在解决这个问题时，我想让它与 IPv6 一起工作，而不是强制 IPv4 ......强制 IPv4 对我来说似乎很脆弱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T03:02:45.610

fe80 是链路本地 IPv6 地址。您要连接的机器必须有多个网络接口——大多数都有，例如以太网和WiFi。要完全指定 IPv6 地址，需要 scope_id。这是 sin6_scope_id 来自：

```
// IPv6 AF_INET6 sockets:

struct sockaddr_in6 {
    u_int16_t       sin6_family;   // address family, AF_INET6
    u_int16_t       sin6_port;     // port number, Network Byte Order
    u_int32_t       sin6_flowinfo; // IPv6 flow information
    struct in6_addr sin6_addr;     // IPv6 address
    u_int32_t       sin6_scope_id; // Scope ID
}; 
```

当与地址结合并转换为字符串时，如下所示：`fe80::e2f8:47ff:fe23:5392%eth1`

解析 DNS 后，`NSData`包装`sockaddr`结构体将包含此信息。但是，在您的代码中，您正在提取`sin6_port`and `sin6_addr`，然后将它们反馈回`GCDAsyncUDPSocket`没有`sin6_flowinfo`（您不需要）和`sin6_scope_id`（在这种情况下您需要）。

直接使用`-[GCDAsyncUDPSocket connectToAddress:error:]`，使用`NSData`你直接从你的解析服务中获得的，你应该很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:28:01.353

我所做的是调用`setPreferIPv4`和`setIPv6Enabled:FALSE`在套接字上，如果 DNS 查找仅返回 IPv6 地址，这将导致连接失败。然后，`udpSocket:didNotConnect:`我检查了那个特定的错误（`IPv6 has been disabled and DNS lookup found no IPv4 address(es).`），如果由于这个原因连接失败，回到我的`setupConnection`方法并再次尝试。最终，DNS 查找返回一个 IPv4 地址，事情从那里顺利进行。

这不是最优雅的解决方案，但它有效。

# python - Django 用户配置文件 - 表单

> ID：13570446
> 
> 赞同：0
> 
> 时间：2012-11-26T17:56:21.020
> 
> 标签：python, django, forms, web

**姜戈 1.4**

抱歉，如果这是一个愚蠢的问题，我对 Django 还很陌生。我正在尝试通过内置的身份验证配置文件系统将用户和配置文件链接在一起。我能找到的所有例子都没有使用基于类的视图，这是我真正想要使用的东西。

基本上我想要一个结合个人资料和用户的表格，允许我同时创建两者。如果可能的话，我想使用相同的表单来编辑/创建用户 + 个人资料。

我为配置文件创建了一个模型：**Profile**

创建的表格：

```
class UserForm(forms.ModelForm):
    class Meta:
        model = User

class ProfileRegisterView(FormView):
    template_name = 'profile-register-form.html'
    form_class    = UserForm
    success_url   = '/account/created/' 
```

将配置文件添加到用户模型似乎并未将其包含在 UserForm 中：

```
AUTH_PROFILE_MODULE = "creative_profile.Profile" 
```

我尝试的第二种选择是在 forms.py 中定义单个表单，但是 form_class 属性只接受一个表单模型。

任何指针的帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:20:50.907

我以更简单的方式来做（我建议）。只需使用 django build in。在**urls.py**我添加了`(r'^login/$','django.contrib.auth.views.login')`. 在**settings.py**添加**LOGIN_URL='/login/'**和**MIDDLEWARE_CLASSES**添加**'django.contrib.auth.middleware.AuthenticationMiddleware'**。如果要更改它，请在本地复制**registration/login.html模板。**进行此类操作后，您将能够以用户身份登录。忘了，您还应该从**django.contrib.auth.models**用户和组导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:27:56.853

一种可能的解决方案是在 UserForm 中包含 Profile 字段并覆盖[save()](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)方法来填充 Profile 字段。

如果您不使用[post_save 信号](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)来创建Profile 模型，则save() 方法必须包含对 Profile 模型的[get_or_create()调用。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)如果您使用 post_save 信号来创建 Profile 模型，则必须确保在调用 get_profile() 方法之前先保存用户。

# eclipse - JavaFX NoSuchMethodError：“SequenceVariable.make”

> ID：13570454
> 
> 赞同：2
> 
> 时间：2012-11-26T17:56:38.180
> 
> 标签：eclipse, makefile, javafx, nosuchmethoderror

我无法让 JavaFX 应用程序运行，我不确定如何解决这个问题。我正在使用 Eclipse 和 JavaSE 1.6

运行应用程序时，我收到 NoSuchMethodError：

```
java.lang.reflect.InvocationTargetException 
    at com.sun.javafx.runtime.Main.main(Main.java:80)
    [etc.]
Caused by: java.lang.NoSuchMethodError: com.sun.javafx.runtime.location.SequenceVariable.make(Lcom/sun/javafx/runtime/TypeInfo;)Lcom/sun/javafx/runtime/location/SequenceVariable;
    at com.sun.javafx.tk.Toolkit.<init>(Toolkit.fx:83)
    at com.sun.javafx.tk.desktop.DesktopToolkit.<init>(DesktopToolkit.fx:9)
    [etc.] 
```

但是，当我检查我的库时，SequenceVariable.class 文件列出了以下静态方法：

```
make(TypeInfo<T, ?>)
make(TypeInfo<T, ?>, boolean, BindingExpression, DependencySource...)
make(TypeInfo<T, ?>, BindingExpression, DependencySource...)
make(TypeInfo<T, ?>, Sequence<? extends T>) 
```

所以我不明白为什么它声称找不到“make”方法。有谁知道我为什么会收到这个错误，以及我应该如何修复它？

谢谢。

# php - 从服务器下载pdf文件的php代码不起作用

> ID：13570456
> 
> 赞同：1
> 
> 时间：2012-11-26T17:56:40.103
> 
> 标签：php

我已经编写了一个从服务器下载 pdf 文件的代码，但是代码不起作用，我什至看不到错误这是我正在使用的代码。

```
// place this code inside a php file and call it f.e. "download.php"
$path = $_SERVER['DOCUMENT_ROOT']."/product_images/"; // change the path to fit your     websites document structure
fullPath = $path.$_REQUEST['download_file'];

if ($fd = fopen ($fullPath, "r")) {
$fsize = filesize($fullPath);
$path_parts = pathinfo($fullPath);
$ext = strtolower($path_parts["extension"]);
switch ($ext) {
    case "pdf":
    header("Content-type: application/pdf"); // add here more headers for diff.     extensions
    header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\"");     // use 'attachment' to force a download
    break;
    default;
    header("Content-type: application/octet-stream");
    header("Content-Disposition: filename=\"".$path_parts["basename"]."\"");
}
header("Content-length: $fsize");
header("Cache-control: private"); //use this to open files directly
while(!feof($fd)) {
    $buffer = fread($fd, 2048);
    echo $buffer;
}
}
fclose ($fd);
exit;
// example: place this kind of link into the document where the file download is offered:
// <a href="download.php?download_file=some_file.pdf">Download here</a>
?> 
```

我正在从数据库中获取文件，这是我在我的网站上使用的下载链接

```
<div style="padding-left:320px; padding-top:5px;"><a href="<?php echo URL ?>download.php?download_file=<?php echo $prod_details['specification_pdf']?>">
<img src="<?php       echo URL ?>images/download_pdf.png" /></a></div>
</div> 
```

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T18:30:05.987

正如@lasar 在第 2 行中缺少 $ 可能是问题所在。我调整（并测试）你的代码更安全（见基本名称）和直接（见 readfile）：

```
<?php
$path = $_SERVER['DOCUMENT_ROOT']."/product_images/"; // change the path to fit your     websites document structure
$fullPath = $path.basename($_REQUEST['download_file']);

if (is_readable ($fullPath)) {
$fsize = filesize($fullPath);
$path_parts = pathinfo($fullPath);
$ext = strtolower($path_parts["extension"]);
switch ($ext) {
    case "pdf":
    header("Content-type: application/pdf"); // add here more headers for diff.     extensions
    header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\"");     // use 'attachment' to force a download
    break;
    default;
    header("Content-type: application/octet-stream");
    header("Content-Disposition: filename=\"".$path_parts["basename"]."\"");
}
header("Content-length: $fsize");
header("Cache-control: private"); //use this to open files directly
readfile($fullPath);
exit;
} else {
        die("Invalid request");
}
// example: place this kind of link into the document where the file download is offered:
// <a href="download.php?download_file=some_file.pdf">Download here</a> 
```

添加

*   有关下载文件的标头的详细说明，请参见[readfile 手册页](http://php.net/manual/en/function.readfile.php)
*   **记住**由于它的性质 PHP 众所周知会损坏二进制文件下载，请记住将**<?php**始终保留在第一行并避免关闭标记**?>**在仅限 PHP 的文件中

# php - 在codeigniter中将变量从控制器传递给构造函数

> ID：13570461
> 
> 赞同：0
> 
> 时间：2012-11-26T17:56:53.193
> 
> 标签：php, codeigniter-2

如何将变量从控制器传递到构造函数？

```
 function __construct()
{

    parent::__construct();

    $info['title'] = 'No title';
    $this->load->view('include/header',$info);
}

function be_cool()
{

    $info['body'] = 'template/becool';
    $info['title'] = 'This is the be cool title';

    $this->load->view('include/template',$info);
}

function be_hot()
{

    $info['body'] = 'template/behot';
    $info['title'] = 'This is the be hot title';

    $this->load->view('include/template',$info);
} 
```

我试图根据控制器中定义的值更改标题。但它似乎没有工作。知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:02:46.447

您有语法错误。在你的`be_cool()`方法中：

```
$$his->load->view('include/template',$info); 
```

应该

```
$this->load->view('include/template',$info); 
```

并且也`$his`应该`$this`在你的其他方法中。

# php - 如果 RESTful Web 服务中提交的数据验证失败，如何响应？

> ID：13570463
> 
> 赞同：1
> 
> 时间：2012-11-26T17:56:55.623
> 
> 标签：php, rest, restful-architecture

我有一个 RESTful Web 服务来编写代码，现在我必须验证发送到服务器的请求日期，同时使用多个实体执行 PUT 方法。

但现在最大的问题是：**我如何应对（可能很多）验证错误？**

请求方法和 URL：

```
PUT http://example.dev/app_dev.php/api-1.0/labels.xml 
```

请求正文（当服务器接收到它时）：

```
array(size=2)
  0 => 
    array (size=11)
      'id' => string '53' (length=2)
      'name' => string '2222' (length=4)
      'app_domain' => string '11' (length=2)
      [...]
  1 => 
    array (size=12)
      'id' => string '54' (length=2)
      'name' => string 'testname2' (length=9)
      'controllpanel_domain' => string 'testname2' (length=9)
      'label' => string 'testname2' (length=9)
      'app_domain' => string 'testname2' (length=9)
      [...] 
```

我目前得到以下回应。HTTP 状态码是 400。

在 xml 中：

```
<?xml version="1.0" encoding="UTF-8"?>
<result>
    <status>
        <![CDATA[error]]>
    </status>
    <code>400</code>
    <text>
        <![CDATA[Bad Request]]>
    </text>
    <message>
        <![CDATA[Unable to validate label entities]]>
    </message>
    <violations>
        <object>
            <object>
                <label>
                    <entry>
                        <violation_message>
                            <![CDATA[This value should not be blank]]>
                        </violation_message>
                    </entry>
                </label>
                <controllpanel_domain>
                    <entry>
                        <violation_message>
                            <![CDATA[This value should not be blank]]>
                        </violation_message>
                    </entry>
                </controllpanel_domain>
                <app_domain>
                    <entry>
                        <violation_message>
                            <![CDATA[This value is too short. It should have 3 characters or more]]>
                        </violation_message>
                    </entry>
                    <entry>
                        <violation_message>
                            <![CDATA[This value should be 333 or more]]>
                        </violation_message>
                    </entry>
                </app_domain>
            </object>
        </object>
        <object>
            <object>
                <controllpanel_domain>
                    <entry>
                        <violation_message>
                            <![CDATA[This value should be a valid number]]>
                        </violation_message>
                    </entry>
                </controllpanel_domain>
                <app_domain>
                    <entry>
                        <violation_message>
                            <![CDATA[This value should be a valid number]]>
                        </violation_message>
                    </entry>
                </app_domain>
                <login_left_text>
                    <entry>
                        <violation_message>
                            <![CDATA[This value should not be blank]]>
                        </violation_message>
                    </entry>
                </login_left_text>
            </object>
        </object>
    </violations>
</result> 
```

在json中：

```
{
    "status": "error",
    "code": 400,
    "text": "Bad Request",
    "message": "Unable to validate label entities",
    "violations": [
        {
            "object": {
                "label": [
                    {
                        "violation_message": "This value should not be blank"
                    }
                ],
                "controllpanel_domain": [
                    {
                        "violation_message": "This value should not be blank"
                    }
                ],
                "app_domain": [
                    {
                        "violation_message": "This value is too short. It should have 3 characters or more"
                    },
                    {
                        "violation_message": "This value should be 333 or more"
                    }
                ]
            }
        },
        {
            "object": {
                "controllpanel_domain": [
                    {
                        "violation_message": "This value should be a valid number"
                    }
                ],
                "app_domain": [
                    {
                        "violation_message": "This value should be a valid number"
                    }
                ],
                "login_left_text": [
                    {
                        "violation_message": "This value should not be blank"
                    }
                ]
            }
        }
    ]
} 
```

**我可以用更好的数据来回应吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:04:31.053

`400 Bad Request`在这种情况下，我会说 a将是一个很好的响应代码，因为请求的格式不正确。您显然可以在响应正文中提供有关验证错误的更多详细信息。

大多数其他 4XX 系列响应与用户的身份验证/授权问题、找不到资源或方法或未正确发送请求标头有关。

在您的情况下，问题在于发送的数据，因此 400 可能是最好的响应代码。

# android - 如何在Android中将原始文件转换为png？

> ID：13570464
> 
> 赞同：0
> 
> 时间：2012-11-26T17:56:58.217
> 
> 标签：android, android-image

我有一个应用程序，这个应用程序下载了很多图片，但我用自己的格式存储它们。这是因为我不希望 android 系统在 Gallery 中显示它们，所以这些是我自己的图片。

我想通过电子邮件发送它们，但首先我当然想将它们转换为 .png。

如何在 Java(Android) 中将文件转换为 png？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:03:56.967

将`.nomedia`文件放在您的文件夹中。或者使您的格式只是常规 png，但附加了额外的自定义标题，因此您不必转换，只需编写一个跳过标题的副本

# linux - 在 bash 头痛中转义变量

> ID：13570470
> 
> 赞同：1
> 
> 时间：2012-11-26T17:57:41.760
> 
> 标签：linux, bash, variables, escaping

我创建了一个脚本，以便自动将我的相机视频从 DV 转换为 mkv 但是，我无法使其工作，因为它没有正确转义文件名变量。脚本是：

```
#!/bin/bash
FTITLE="Tapes 2012, Tape 01 - "
i=1;
find ./ -type f -name "dv_*.dv" | while read fname; do
    CTIME=`stat -c %Y ${fname}`
    FNAME="${FTITLE} - ${i}.mkv"
    /usr/bin/ffmpeg -i ${fname} ${x264_OPTIONS} ./"$FNAME"
    let i=$i+1
done 
```

当我运行脚本时，我看到以下错误：

```
[NULL @ 0x645f40] Unable to find a suitable output format for '2012,'
2012,: Invalid argument 
```

显然，这是脚本和文件名的问题。我试图逃避它

```
/usr/bin/ffmpeg -i ${fname} ${x264_OPTIONS} ./"\"$FNAME\"" 
```

但它也没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:04:04.023

使用更多报价！！！引用你拥有的每一个变量！

而不是你的脚本，我会做以下事情：

```
#!/bin/bash

ftitle="Tapes 2012, Tape 01 - "

x264_options=( your options here in an array that is good practice "and quote if you have an option with spaces" )

shopt -s globstar
shopt -s nullglob

((i=1))

for fname in **/dv_*.dv; do
   [[ -f $fname ]] || continue
   ctime=$(stat -c %Y "$fname")
   fnameuppercase="$ftitle - $i.mkv"
   /usr/bin/ffmpeg -i "$fname" "${x264_options[@]}" ./"$fnameuppercase"
   ((++i))
done 
```

和你的有几个不同：

*   使用小写变量名。使用大写变量名被认为是不好的做法，
*   在这里没用`find`，因为您的搜索是如此微不足道：改用 bash 的 glob，
*   所有变量都被正确引用，
*   这些选项都在一个数组中（很好的做法！并且几乎解决了所有问题），
*   不使用反引号，但使用`$(...)`命令替换，
*   使用 bash 的算术运算符`((...))`，
*   不使用子shell（在您的版本中，`while`循环在子shell中执行）

# jquery-mobile - listview trigger('create') 性能问题 - jqm 增强

> ID：13570472
> 
> 赞同：1
> 
> 时间：2012-11-26T17:57:50.623
> 
> 标签：jquery-mobile

我有 JQM 应用程序，当用户单击列表视图项目时，我获取动态复选框标记并附加到它。然后我打电话`**$('#listViewItemID').trigger('create')**`大约需要 6 秒来增强。

我在这里复制了这个问题：http: [//jsfiddle.net/skusunam/MMbLW/1/](http://jsfiddle.net/skusunam/MMbLW/1/)

单击按钮后，只需大约 1.4 秒即可完成 JQM 增强。此调用使浏览器无响应。我一定遗漏了一些东西，非常感谢任何反馈\输入。

谢谢你的时间。

# delphi - 如何在 TFileDialog.OnTypeChange 事件中获取 piFileType

> ID：13570475
> 
> 赞同：0
> 
> 时间：2012-11-26T17:58:04.987
> 
> 标签：delphi, delphi-2010

如何在 FileDialog OnTypeChange 事件中获取 FileDialog 的 FileTypeIndex？

```
function TFileDialogEvent.OnTypeChange(const pfd: IFileDialog):
  HResult; stdcall;
var
  iCaption: string;
  iFilename: PWideChar;
begin
  {Get the current filename}
  pfd.GetFileName(iFilename);
  {Get the classname of the dialog to set the caption}
    if FClassName = 'TIEWin7FileOpenDialog' then
      iCaption := 'Open- ' + iFilename
    else
      iCaption := 'Save As- ' + iFilename;
    pfd.SetTitle(PWideChar(iCaption));
    FileTypeIndex := pfd.GetFileTypeIndex(???);
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:58:57.173

[`IFileDialog::GetFileTypeIndex`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb775958.aspx)包含答案的文档。该方法的 C++ 签名是：

```
HRESULT GetFileTypeIndex(
  [out]  UINT *piFileType
); 
```

将 Delphi 转换为：

```
function GetFileTypeIndex(out FileType: UINT): HRESULT; 
```

也就是说，Delphi 翻译`ShlObj`声明参数`var`是语义上不正确的。碰巧它并不重要。

把它们放在一起，你的代码应该是这样的：

```
OleCheck(pfd.GetFileTypeIndex(FileTypeIndex)); 
```

请注意，我添加了一些错误检查。你也应该。您问题中的代码调用了三种不同的 COM 方法，并且在每种情况下都无法检查错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T21:05:00.983

您可以使用该[`FileTypeIndex`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Dialogs.TFileSaveDialog.FileTypeIndex)物业。

# gridex - gridEX 复选框过滤器在未选中时显示文本值

> ID：13570482
> 
> 赞同：1
> 
> 时间：2012-11-26T17:58:48.200
> 
> 标签：gridex

我正在使用 FilterEditType.CheckBox 过滤复选框列。每当我单击过滤器时，它都可以正常工作，但是当过滤器列失去焦点时，它会显示复选框的文本表示。就我而言，现在它是 1 或 0，我知道我可以使用 CheckBoxTrueValue 或 CheckBoxFalseValue 将其更改为其他值。

我需要过滤器在应用过滤器时显示一个复选框（选中或未选中）或根本不显示任何内容。有谁知道如何做到这一点，我找不到合适的房产。

# iolanguage - Io 语言基础

> ID：13570484
> 
> 赞同：3
> 
> 时间：2012-11-26T17:58:49.900
> 
> 标签：iolanguage

我正在做一个关于 Io 语言的项目。关于该语言的文档很少。我希望你们中的一些人会就以下内容提出意见：

*   单次派遣
*   多次派遣
*   重载
*   类型重载
*   属性可见性
*   特征重命名

这些是什么？你能提供任何例子吗？感谢您提供任何帮助。到目前为止，我很喜欢我所学的东西并且喜欢这门语言，但作为初学者很难理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:11:00.923

*   单次派遣
*   多次派遣

Io 具有动态调度。

*   重载
*   类型重载
*   属性可见性
*   特征重命名

Io 可以完成所有这些，并且所有属性（至少存储在插槽中的属性）都是可见的。

# node.js - Mocha 怎么知道只有我的异步测试才能等待和超时？

> ID：13570485
> 
> 赞同：15
> 
> 时间：2012-11-26T17:58:59.657
> 
> 标签：node.js, mocha.js

当我使用 Mocha 进行测试时，我经常需要同时运行异步和同步测试。

Mocha 很好地处理了这个问题，让我可以`done`在我的测试是异步的时候指定一个回调 , 。

我的问题是，Mocha 如何在内部观察我的测试并知道它应该等待异步活动？只要我在测试函数中定义了回调参数，它似乎就在等待。您可以在下面的示例中看到，第一个测试应该超时，第二个应该在`user.save`调用匿名函数之前继续并完成。

```
// In an async test that doesn't call done, mocha will timeout.
describe('User', function(){
  describe('#save()', function(){
    it('should save without error', function(done){
      var user = new User('Luna');
      user.save(function(err){
        if (err) throw err;
      });
    })
  })
})

// The same test without done will proceed without timing out.
describe('User', function(){
  describe('#save()', function(){
    it('should save without error', function(){
      var user = new User('Luna');
      user.save(function(err){
        if (err) throw err;
      });
    })
  })
}) 
```

这是 node.js 特有的魔法吗？这是可以在任何 Javascript 中完成的事情吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T18:10:25.003

这是简单的纯 Javascript 魔法。

函数实际上是对象，并且它们具有属性（例如用函数定义的参数数量）。

看看在 mocha/lib/runnable.js 中 this.async 是如何设置的

```
function Runnable(title, fn) {
  this.title = title;
  this.fn = fn;
  this.async = fn && fn.length;
  this.sync = ! this.async;
  this._timeout = 2000;
  this._slow = 75;
  this.timedOut = false;
} 
```

Mocha 的逻辑会根据您的函数是否使用参数定义而改变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T18:07:20.740

您正在寻找的是 Function 的 length 属性，它可以告诉您一个函数需要多少个参数。当你用它定义一个回调时，`done`它可以异步地告诉和处理它。

```
function it(str, cb){
  if(cb.length > 0)
    //async
  else
    //sync
} 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/Length](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/Length)

# c# - 我将如何为我的类实现 IDisposable 以便它可以在“使用”块中使用？

> ID：13570486
> 
> 赞同：3
> 
> 时间：2012-11-26T17:58:59.777
> 
> 标签：c#, class, idisposable

我正在用 C# 编写代码，并创建了一个我想在“使用”块中使用的类。

这可能吗？如果可以，我应该如何进行以及我需要在课堂上添加什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:00:53.680

该`using`关键字可用于任何实现`IDisposable`. 要实现`IDisposable`，请在您的类中包含一个`Dispose`方法。

如果`Dispose`您的库的用户不（或忘记）调用`Dispose`.

例如：

```
class Email : IDisposable {

    // The only method defined for the 'IDisposable' contract is 'Dispose'.
    public void Dispose() {
        // The 'Dispose' method should clean up any unmanaged resources
        // that your class uses.
    }

    ~Email() {
        // You should also clean up unmanaged resources here, in the finalizer,
        // in case users of your library don't call 'Dispose'.
    }
}

void Main() {

    // The 'using' block can be used with instances of any class that implements
    // 'IDisposable'.
    using (var email = new Email()) {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:02:40.373

```
public class MyClass : IDisposable
{
    public void Dispose()
    {
    }
} 
```

这里的所有都是它的！在调用代码时，您可以执行以下操作：

```
using(var mc = new MyClass())
{
} 
```

# jquery - jquery ul多级菜单不显示

> ID：13570488
> 
> 赞同：0
> 
> 时间：2012-11-26T17:59:08.140
> 
> 标签：jquery, menu

[小提琴](http://jsfiddle.net/p9m9k/)- 我想要在悬停时打开正常的多级菜单（bbb 项目有子菜单）。它可以正常工作，但是当您在某些 bbb 项目上快速悬停和“取消悬停”几次而不是尝试打开子菜单和另一个子子菜单时，它就无法正常工作。

当我删除`.stop()`它时，它可以正常工作，但我不能这样做以使它看起来不错。

# python - 使用 Python 和 Google App Engine 的 Cookie

> ID：13570489
> 
> 赞同：6
> 
> 时间：2012-11-26T17:59:17.140
> 
> 标签：python, google-app-engine, cookies, python-2.7

我正在 Google App Engine 上开发一个应用程序并遇到了问题。我想为每个用户会话添加一个 cookie，以便能够区分当前用户。我希望他们都是匿名的，因此我不想登录。因此，我为 cookie 实现了以下代码。

```
def clear_cookie(self,name,path="/",domain=None):
    """Deletes the cookie with the given name."""
    expires = datetime.datetime.utcnow() - datetime.timedelta(days=365)
    self.set_cookie(name,value="",path=path,expires=expires,
                    domain=domain)    

def clear_all_cookies(self):
    """Deletes all the cookies the user sent with this request."""
    for name in self.cookies.iterkeys():
        self.clear_cookie(name)            

def get_cookie(self,name,default=None):
    """Gets the value of the cookie with the given name,else default."""
    if name in self.request.cookies:
        return self.request.cookies[name]
    return default

def set_cookie(self,name,value,domain=None,expires=None,path="/",expires_days=None):
    """Sets the given cookie name/value with the given options."""

    name = _utf8(name)
    value = _utf8(value)
    if re.search(r"[\x00-\x20]",name + value): # Don't let us accidentally inject bad stuff
        raise ValueError("Invalid cookie %r:%r" % (name,value))
    new_cookie = Cookie.BaseCookie()
    new_cookie[name] = value
    if domain:
        new_cookie[name]["domain"] = domain
    if expires_days is not None and not expires:
        expires = datetime.datetime.utcnow() + datetime.timedelta(days=expires_days)
    if expires:
        timestamp = calendar.timegm(expires.utctimetuple())
        new_cookie[name]["expires"] = email.utils.formatdate(timestamp,localtime=False,usegmt=True)
    if path:
        new_cookie[name]["path"] = path
    for morsel in new_cookie.values():
        self.response.headers.add_header('Set-Cookie',morsel.OutputString(None)) 
```

为了测试上面的代码，我使用了以下代码：

```
class HomeHandler(webapp.RequestHandler):
    def get(self):
        self.set_cookie(name="MyCookie",value="NewValue",expires_days=10)
        value1 = str(self.get_cookie('MyCookie'))    
        print value1 
```

当我运行它时，HTML 文件中的标题如下所示：

> 无状态：200 OK 内容类型：text/html；charset=utf-8 缓存控制：无缓存 Set-Cookie：MyCookie=NewValue；到期=格林威治标准时间 2012 年 12 月 6 日星期四 17:55:41；路径=/内容长度：1199

上面的“None”是指代码中的“value1”。

你能告诉我为什么cookie值是“无”，即使它被添加到标题中？

非常感激您的帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T18:35:39.033

当您调用 时`set_cookie()`，它会在它正在准备的响应上设置 cookie（也就是说，它会在发送响应时设置 cookie，在您的函数返回之后）。随后的调用`get_cookie()`是从当前请求的标头中读取。由于当前请求没有您正在测试的 cookie 集，因此不会读入它。但是，如果您要重新访问此页面，您应该会得到不同的结果，因为 cookie 现在将成为请求的一部分。

# html - 如何在内容下方设置摘要样式

> ID：13570492
> 
> 赞同：3
> 
> 时间：2012-11-26T17:59:26.797
> 
> 标签：html, css

我在一个`summary`元素中有一个`details`元素，现在想获取内容下`summary`显示的`details`内容。

似乎该`display`属性仅适用于内容，不包括`summary`. 有没有办法改变位置`summary`？

```
<html>
    <head>
        <style>
            details
            {
                display: -webkit-box;
                -webkit-box-orient: vertical;
            }

            details > summary
            {
                -webkit-box-ordinal-group: 2;
            }

            details > div
            {
                -webkit-box-ordinal-group: 1;
            }
        </style>
    </head>
    <body>
        <details open>
            <summary>Get Me Down!</summary>
            <div>Rise Up</div>
        </details>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:08:51.110

我有一个非常hacky的解决方案。另外，只有当您知道这两个元素的大小时，它才会起作用。但我想这是一个开始。

```
details div { position: relative; bottom: 20px;}
details summary { position: relative; top: 20px; } 
```

[http://jsfiddle.net/PUknK/10/](http://jsfiddle.net/PUknK/10/)

# jquery - javascript/JQuery 中类更改的侦听器

> ID：13570494
> 
> 赞同：0
> 
> 时间：2012-11-26T17:59:41.727
> 
> 标签：jquery, class, slider

当我单击一些箭头（基本上是滑块）时，我有一段代码会更改 div 的类，但我找不到 jquery 代码，尽管它会监听类何时更改并执行动画。例如，我需要它来执行此功能。

```
if(*classname* == slide1){
    //************ Background Settings *************
    $(".background").css('background','url("img/park.png")')
    //************ slide 1 Animations *************
    $(".s1").animate({
        opacity:1
    },500)
    $("#header1").animate({
        opacity:1
    },500)
    $("#p1").animate({
        opacity:1
    },500)
    $("#image1").animate({
        left:140
    },1000)
} 
```

我的班级更改代码是这样的

```
var page_number = 0

function next(){

var current_slide = page_number;
if(current_slide == 0){
$("section").removeClass('starterslide').addClass('slide2')
page_number = 2
}
else if(current_slide == 1){
$("section").removeClass('slide1').addClass('slide2')
page_number = 2
}
else if(current_slide == 2){
$("section").removeClass('slide2').addClass('slide3')
page_number = 3
}
else if(current_slide == 3){
$("section").removeClass('slide3').addClass('slide1')
page_number = 1
}
}

function back(){
var current_slide = page_number;

if(current_slide == 0){
$("section").removeClass('starterslide').addClass('slide3')
page_number = 3
}
else if(current_slide == 1){
$("section").removeClass('slide1').addClass('slide3')
page_number = 3
}
else if(current_slide == 2){
$("section").removeClass('slide2').addClass('slide1')
page_number = 1
}
else if(current_slide == 3){
$("section").removeClass('slide3').addClass('slide2')
page_number = 2
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:14:44.423

您也可以扩展这 2 个 jQuery 函数，例如：

```
(function($) {
    classFuncs = {add:$.fn.addClass,remove:$.fn.removeClass}
    $.fn.addClass = function() {
        classFuncs.add.apply(this,arguments);
        if ($(this).is($('section'))) {
            // do whatever you like when a class is added
            // if it is a 'section' node
        }
        return $(this);
    }
    $.fn.removeClass = function() {
        classFuncs.remove.apply(this,arguments);
        if ($(this).is($('section'))) {
            // do whatever you like when a class is removed
            // if it is a 'section' node
        }
        return $(this);
    }
})(jQuery); 
```

但这对于这种情况来说有点过头了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:04:14.763

您可以使用触发器来引发您自己的事件。

```
$(this).addClass('myClass');
$(mySelector).trigger('classChanged')
$(otherSelector).bind('classChanged', data, function(){ //do stuff here }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:02:59.467

将所有相关代码放在一个点击函数中......（下面的伪代码）

```
$('div').click(function(){
    $(this).addClass('className');
    $(this).animate();
}); 
```

# tomcat - iis7中的多个子域

> ID：13570499
> 
> 赞同：1
> 
> 时间：2012-11-26T18:00:21.063
> 
> 标签：tomcat, iis-7, subdomain

我有一个在 tomcat 8080 端口中运行的应用服务器。现在，我需要通过 iis7 配置指向单个应用程序[http://mydomin.com:8080/](http://mydomin.com:8080/)的多个子域（如 abc.mydomain.com、xyz.mydomain.com、123.mydomain.com） 。可能吗？如果是的话，请你指导我。

谢谢，赫温·雷恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:06:45.263

请按照下面给出的步骤.. 1.创建子域并指向与域相同的服务器。2.将所有子域和域绑定到同一个站点。右键单击网站并在IIS中按绑定。在那里添加 subdomian 。

# css - DotNnetNuke 6 对 css 类“dnnFormRequired”的更改所以显示为红色星号？

> ID：13570502
> 
> 赞同：1
> 
> 时间：2012-11-26T18:00:45.587
> 
> 标签：css, dotnetnuke, skinning

我开发了一个自定义 DNN 模块。为此，我遵循 DotNetNuke 6 模式以获得一致的用户体验（有关更多信息，请查看以下指南）

[http://uxguide.dotnetnuke.com/UIPatterns/SimpleFormDemo.aspx](http://uxguide.dotnetnuke.com/UIPatterns/SimpleFormDemo.aspx)

我怎么不喜欢 DNN 默认皮肤显示必填字段的方式。如何将强制指示更改为传统标签：* 文本字段

为了实现这一目标，我应该对皮肤（css 类）进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:10:56.790

这不仅需要对 CSS 进行更改，因为整体设计模式不涉及在内容中添加任何“*”。因此，您不仅需要修改类，还需要修改内容。（除非您使用我不推荐的 JS 或其他类型的解决方案。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:13:39.633

在你的 css 中做这样的事情来摆脱红色指示器 input.dnnFormRequired{border-left: 0px;}

然后我想你可以做一些 Javascript 在任何 dnnFormRequired 之后添加 *

```
<script type="text/javascript"> 
$(document).ready(function(){ 
   $("input.dnnFormRequired").after('*'); 
}); 
</script> 
```

希望让您更进一步了解您想要实现的目标。即使它确实违反了 UI 准则；）

# c# - C# - 存储由 graphicsObject 绘制的对象

> ID：13570503
> 
> 赞同：0
> 
> 时间：2012-11-26T18:00:48.343
> 
> 标签：c#, graphics, drawing

我`System.Drawing.Graphics graphicsObj`用于在`System.Windows.Forms.Panel`. 存储有关旧图纸的信息的明智方法是什么？在 MouseMove 事件期间删​​除最后一次绘图？

我必须记住笔设置和线吗？

谢谢 ：）

// 编辑。我想我的问题不清楚。我有一个小组。我把它当作绘画的容器。

我可以画多条线、圆、矩形。

每次我按下鼠标（MouseDown）时，我都想开始绘制新对象。当我移动鼠标（MouseMove）时，当前绘制的对象必须改变（例如线条，就像在油漆中一样）。当我释放鼠标（MouseUp）时，我希望我绘制的对象变得恒定。

现在，我尝试`graphicsObj.Clear();`在 MouseMove 事件上调用方法，但它清除了所有绘制的对象。

所以我推断，我必须存储有关旧绘制对象的信息。现在，我必须制作列表（向量左右）并存储有关该对象的信息？或者有什么方法可以避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:12:47.010

`Panel`您应该在'事件中处理所有绘画`Paint`，这正是它的用途。

该`Paint`事件为您提供了您应该使用`PaintEventArgs`的对象。`Graphics`这将确保您的指令在每次刷新时都被绘制，而不仅仅是一次。

如果您是从 派生的`Panel`，请改写该`OnPaint`方法。

**在扩展原始问题后进行编辑：**

您应该将存储数据的逻辑与显示数据的逻辑分开。该`Graphics`对象的目的是显示现有数据，而不是存储数据。

我认为制作`List`你正在绘制的对象的 s 或其他集合是最好的解决方案。您还需要标志来处理“活动”对象等的所有逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:13:48.797

我认为您可以将最后一个 x,y 作为历史记录存储到 Points 对象数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:16:11.920

不确定我在这里得到你想要的东西，但如果你想要一些关于油漆画的记忆。绘制到一组位图，然后让您的绘制例程将其中一个位图绘制到控件上。

# spring - Spring + Hibernate Search 动态配置

> ID：13570504
> 
> 赞同：3
> 
> 时间：2012-11-26T18:00:50.077
> 
> 标签：spring, hibernate, hibernate-search

我目前正在尝试通过 spring 在 3 台机器上配置休眠搜索，以使用 JMS 分布式索引。由于我们部署软件的方式，我必须在所有三台机器上使用相同的配置，但我需要一种方法将其中一台设置为 JMS Master。

目前正在使用以下 bean 声明通过 Spring 配置休眠：

```
<bean class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
id="productSessionFactory">
    <property name="dataSource">
        <ref local="productDataSource"/>
    </property>
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="entityInterceptor" ref="builderInterceptor"/>
    <property name="eventListeners">
        <map key-type="java.lang.String" value-type="java.lang.Object">
            <entry key="save" value-ref="saveEventListener"/>
        </map>
    </property>
</bean> 
```

在三台机器中的一台上，我需要将属性 hibernate.search.default.directory_provider 设置为 filesystem-master，而在另外两台机器上，我需要将其设置为 filesystem-slave。

我有能力在单台机器上设置标志来识别哪台机器应该是主机，但由于所有配置都是 XML，我没有任何添加逻辑来正确设置参数的能力。

有没有办法以编程方式设置此参数，同时保留其余配置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:30:17.540

编程方式通常是可能的，但我不确定你在 Spring 中是如何做到的。您不必将属性放入配置文件中，而是必须动态（或至少部分动态地）构建属性并将其传递给*AnnotationSessionFactoryBean*。如果我没记错的话，Spring SPI 中有一些钩子可以让你这样做，例如*BeanDefinitionRegistryPostProcessor*。

另一种方法是编写自己的*DirectoryProvider*。查看*org.hibernate.search.store.impl.FSMasterDirectoryProvider*和*org.hibernate.search.store.impl.FSSlaveDirectoryProvider*并根据您可以在机器上读取的标志编写一个可以充当从属或主控的提供程序。

# shell - 如何在emacs shell中向后搜索？

> ID：13570512
> 
> 赞同：11
> 
> 时间：2012-11-26T18:01:17.787
> 
> 标签：shell, emacs

我喜欢 emacs shell，但是对于过去使用 gnome shell 的人（比如我）来说，有一件令人困惑的事情。向后搜索的工作方式不同。`C-r`在缓冲区中搜索，而不是在命令历史记录中`M-r`搜索，在命令历史记录中搜索，但是当按下两次时，会在直接搜索和正则表达式搜索之间切换，即不搜索命令历史记录中的前一个匹配项。那么，该怎么做呢？

**编辑**：当我写这篇文章时，我正在寻找的 shell 就是你得到的`M-x shell`，我不知道 emacs 中还有其他 shell。参见例如[https://plus.google.com/112537550357635435516/posts/Wgpk2mH6hQh](https://plus.google.com/112537550357635435516/posts/Wgpk2mH6hQh)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T09:02:16.463

键入 Mr ，搜索某些内容，然后按 Cr 在命令历史记录中重复相同的搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T18:01:17.787

按`M-r`，然后写一些东西，然后`C-r`根据需要按多次。

# jquery - 抓取 span id 并将其作为 href 附加到上一个 span

> ID：13570516
> 
> 赞同：3
> 
> 时间：2012-11-26T18:01:31.967
> 
> 标签：jquery, html, dom

我正在尝试遍历动态生成的页面，获取特定的跨度 ID，然后将该 id 附加到上一个跨度的 href 中。目前，这会在每个 h2.classA 中生成两个链接，而不是在每个实例中生成相应的单个链接。我应该将 each() 分配给 h2 吗？任何帮助是极大的赞赏。

现有的 HTML

```
 <h2>
    <span class="classA"> </span> 
    <span class="classB" id="somename"> SomeName </span>
    </h2>

    <h2>
    <span class="classA"> </span> 
    <span class="classB" id="anothername"> SomeName </span>
    </h2> 
```

试图：

```
 $("h2 span.classB").each(function() {
    var content = $(this).attr('id');

    $('h2 span.classA').append('<a href="index.php?title='+content+'"> edit me </a>');              
    }); 
```

所需的 HTML 结果

```
 <h2>
    <span class="classA"><a href="index.php?title='+somename+'"> LINK1 </a></span> 
    <span class="classB" id="somename"> SomeName </span>
    </h2>

    <h2>
    <span class="classA"><a href="index.php?title='+anothername+'"> LINK2 </a></span> 
    <span class="classB" id="anothername"> AnotherName </span>
    </h2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:02:38.220

代替

```
$('h2 span.classA').append('<a href="index.php?title='+content+'"> edit me </a>'); 
```

和

```
$(this).prev('.classA').append('<a href="index.php?title='+content+'"> edit me </a>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:04:10.013

您将锚点附加到`classA`每次迭代中的所有元素，为了选择前一个 span 元素，您可以使用以下`prev`方法：

```
$("h2 span.classB").each(function() {
    $(this).prev().append('<a href="index.php?title='+this.id+'"> edit me</a>');              
}); 
```

[http://jsfiddle.net/c7V9z/](http://jsfiddle.net/c7V9z/)

# javascript - 使用 JavaScript 和 jQuery 开发复杂网页的最佳实践

> ID：13570517
> 
> 赞同：2
> 
> 时间：2012-11-26T18:01:38.517
> 
> 标签：javascript, jquery, html, asp.net-mvc, jquery-ui

我刚刚完成了一个使用 ASP.NET MVC、jQuery 和 jQueryUI 的项目。我写的其中一个页面仍然困扰着我，因为我最终为事件处理程序编写了很多客户端代码，并且由于页面上控件及其状态（页面是非常互动的，并且有谷歌文档的感觉）。我的问题是哪些最佳实践可用于具有复杂交互（如谷歌文档或雅虎邮件客户端）的客户端开发（特别是使用 jQuery 和 jQueryUI）？我对我的代码最大的抱怨是，对于几乎所有的事件处理程序，我最终编写了很多 if 语句，这些语句根据页面上其他控件的状态执行代码。似乎必须有一种方法以更可控的方式处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:19:41.973

我从[“丝绸计划”](http://silk.codeplex.com/)中学到了很多：

> Project Silk 为构建跨浏览器 Web 应用程序提供了指导，重点是客户端交互性。

从您给出的简短描述来看，您似乎主要对应用程序的某些部分如何与其他部分进行通信存在问题。听起来你的耦合非常紧密。
[这](http://msdn.microsoft.com/en-us/library/hh404091.aspx)可能会给你一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:14:58.923

通常，您使事情变得越模块化，就越容易将复杂的应用程序组合在一起。将事物分解为只做一件事（单一职责）并具有明确定义的 API 以与系统的其他部分交互的离散组件。理论上听起来很简单，但实际上，在开始编写任何代码之前，您确实需要对应用程序的架构进行大量思考。

John Papa 的[单页应用程序课程](http://pluralsight.com/training/Courses/TableOfContents/spa)是一个很好的起点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T18:26:17.127

在决定选择客户端框架时有很多选择。

[浏览TODOMVC](http://todomvc.com/)项目上的所有项目。

我会为中小型应用程序选择 AngularJS，为更大的应用程序选择 GWT（ASPNET 作为服务器端）

# css - Opera：按钮文本在点击时移动

> ID：13570520
> 
> 赞同：2
> 
> 时间：2012-11-26T18:01:52.217
> 
> 标签：css, button, opera

与其他浏览器不同，Opera 会导致`<button>`内部文本在单击时向右移动 1 个像素，向下移动 1 个像素。有什么办法可以防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T12:48:44.260

您可以使用 css 填充和高度、宽度和百分比

用这个

```
.stylename
          {
          height:10%;
          width:230%;
          padding-top:3px;
          padding-bottom:3px;
          padding-left:5px;
          padding-right:5px;
          font-size:10pt;
          /*You can Change height / Width and Padding according to you*/
          } 
```

# sql-injection - $this->input->xss_clean($data) 使用 codeigniter 给出致命错误

> ID：13570522
> 
> 赞同：1
> 
> 时间：2012-11-26T18:01:57.690
> 
> 标签：sql-injection, codeigniter-2

我收到一个错误致命错误：调用未定义的方法 CI_Input::xss_clean() 以下是我编写的设置和代码。

```
config.php
$config['global_xss_filtering'] = TRUE;

$data=array();
$data['fname']=$this->input->post("fname");
$this->input->xss_clean($data) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:23:32.130

xss_clean() 方法在 input 中不存在，但在**security**中。

```
$data = array();
$data['fname'] = $this->input->post("fname");
$this->security->xss_clean($data); 
```

# upnp - upnp，设备展示地址

> ID：13570523
> 
> 赞同：1
> 
> 时间：2012-11-26T18:01:58.737
> 
> 标签：upnp

我正在编程一些关于 upnp 的东西，我想清除一些东西:) 当我使用多播 M-Search 消息进行搜索时，设备必须响应，类似这样的东西（它不是完整的消息，我缩短了它）

```
HTTP/1.1 200 OK
CACHE-CONTROL: max-age = seconds until advertisement expires
DATE: when response was generated
EXT:
LOCATION: URL for UPnP description for root device 
```

因此，位置是一些 IP 和端口，我可以从中获得描述。现在，我想用单播搜索特定的设备。我的问题是：当我尝试使用 UNCAST 搜索消息搜索此设备时，我可以使用此地址吗？或者设备正在另一个地址上监听单播 msearch 消息？:) 我已阅读 upnp 设备架构 pdf 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:56:37.123

是的，您可以而且必须继续使用单播。`LOCATION`不仅仅是“*一些IP和端口*”，而是设备描述的完整资源位置。您不能对单个地址进行多播 :) 不再需要“*搜索此设备*”。您只需使用 HTTP GET 请求该 URL。而且您基本上会获得更多特定服务的 URL。

如果您正在“*对 upnp 进行编程*”并且遇到此类基本问题，我建议您下载[UPnP 规范包](http://upnp.org/resources/upnpresources.zip)并阅读文档**UPnP-arch-DeviceArchitecture**。它以易于理解的步骤描述了 UPnP 的搜索和查询阶段如何工作。

**更新OP的澄清：**

如果设备通过带有值的多播消息`SEARCH`宣布自己，则设备的重新发现作为对从原始响应（多播）和标准端口 1900 或特定端口已知的 IP 的单播请求发生。因此，如果设备需要重新发现并且没有宣布自己，则端口默认为 1900。另请参阅 UPnP 设备架构中的下一页 32，*HOST*头字段的描述。`NOTIFY``SEARCHPORT.UPNP.ORG`

 *但是请注意，这种重新发现不应该是必要的，或者很少是必要的。UPnP 设备应在连接到网络时使用`NOTIFY`类型为 的多播数据包宣布自己`ssdp:update`，并`ssdp:byebye`在断开连接时发出类型。此外，大多数设备都有*事件变量*，控制点应自动订阅这些变量，并按固定租用时间（默认为 30 分钟）续订它们的订阅。因此无论如何都会发现设备突然消失（通过订阅续订失败）。*

# git - 编译或下载静态版本的 git

> ID：13570524
> 
> 赞同：3
> 
> 时间：2012-11-26T18:02:05.113
> 
> 标签：git, static

我需要在 32 位 ubuntu 机器上运行 git 版本，我没有 root 权限。电脑在教室里，我没有安装例如 curl 的 root 权限。

对于 darcs，这一步很简单，因为我可以直接从网站下载静态二进制文件：http:
[//tereratorn.org/code/darcs-2.8.0-linux-ghc7.0.4-CURL-packed.by.ermine.tar .bz2](http://teratorn.org/code/darcs-2.8.0-linux-ghc7.0.4-CURL-packed.by.ermine.tar.bz2)

我按照上一个问题中给出的说明进行操作：[compile-git-for-32-bit-linux-on-shared-hosting](https://stackoverflow.com/questions/4147730/compile-git-for-32-bit-linux-on-shared-hosting)

我使用先前帖子中的以下命令来配置构建：

```
./configure --prefix=/home/stephan/git-static CFLAGS="${CFLAGS}
-static -m32" 
```

但是，这会导致以下错误：

```
checking whether the C compiler works... no
configure: error: in `/home/stephan/Downloads/git-1.7.12.4':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

真的没有网站可以下载 32 位系统的静态 git 二进制文件吗？

我必须在 VM 中安装 32 位 ubuntu 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-07T13:55:51.803

静态编译自己的副本并不难`Git`，您可以按照这些说明进行操作。我使用了 Musl 交叉编译器，因此生成的二进制文件是完全静态的；他们甚至没有与 glibc 链接（这是一个巨大的痛苦处理）。虽然它并不完美（见下文）：

```
# Download git and a musl compiler so that we don't depend on shitty glibc.

wget https://www.kernel.org/pub/software/scm/git/git-2.31.1.tar.gz
wget http://musl.cc/x86_64-linux-musl-cross.tgz

tar xvf git-2.31.1.tar.gz
tar xvf x86_64-linux-musl-cross.tgz

# Add the compiler to our path.
export PATH="$(pwd)/x86_64-linux-musl-cross/bin:$PATH"

cd git-2.31.1/

# Make output directory.
mkdir output

# Configure to use the musl compiler with static linking.
export CFLAGS="$CFLAGS -static"
./configure --build x86_64-linux-musl-cross --prefix="$(pwd)/output"

# Disable various dependencies to make it easier to compiler & link.
# Note that this means you can't use the https transport, you can still use
# ssh though. See https://github.com/git/git/blob/master/Makefile

make NO_OPENSSL=1 NO_CURL=1 NO_EXPAT=1 NO_GETTEXT=1 NO_PERL=1 NO_PYTHON=1 NO_TCLTK=1 -j8 install 
```

不幸的是，Git 一开始是一堆 hacky shell 脚本——有些部分仍然是 shell 脚本！因此，它会编译成大量单独的二进制文件，而不是像您对精心设计的程序所期望的那样，但它确实有效。你得到一个`output`这样的目录：

```
$ tree
.
├── bin
│   ├── git
│   ├── git-cvsserver
│   ├── git-receive-pack
│   ├── git-shell
│   ├── git-upload-archive
│   └── git-upload-pack
├── libexec
│   └── git-core
│       ├── git
│       ├── git-add
│       ├── git-add--interactive
│       ├── git-am
│       ├── git-annotate
│       ├── git-apply
│       ├── git-archimport
│       ├── git-archive
│       ├── git-bisect
│       ├── git-bisect--helper
│       ├── git-blame
│       ├── git-branch
│       ├── git-bugreport
│       ├── git-bundle
│       ├── git-cat-file
│       ├── git-check-attr
│       ├── git-check-ignore
│       ├── git-check-mailmap
│       ├── git-checkout
│       ├── git-checkout-index
│       ├── git-check-ref-format
│       ├── git-cherry
│       ├── git-cherry-pick
│       ├── git-clean
│       ├── git-clone
│       ├── git-column
│       ├── git-commit
│       ├── git-commit-graph
│       ├── git-commit-tree
│       ├── git-config
│       ├── git-count-objects
│       ├── git-credential
│       ├── git-credential-cache
│       ├── git-credential-cache--daemon
│       ├── git-credential-store
│       ├── git-cvsexportcommit
│       ├── git-cvsimport
│       ├── git-cvsserver
│       ├── git-daemon
│       ├── git-describe
│       ├── git-diff
│       ├── git-diff-files
│       ├── git-diff-index
│       ├── git-difftool
│       ├── git-difftool--helper
│       ├── git-diff-tree
│       ├── git-env--helper
│       ├── git-fast-export
│       ├── git-fast-import
│       ├── git-fetch
│       ├── git-fetch-pack
│       ├── git-filter-branch
│       ├── git-fmt-merge-msg
│       ├── git-for-each-ref
│       ├── git-for-each-repo
│       ├── git-format-patch
│       ├── git-fsck
│       ├── git-fsck-objects
│       ├── git-gc
│       ├── git-get-tar-commit-id
│       ├── git-grep
│       ├── git-hash-object
│       ├── git-help
│       ├── git-http-backend
│       ├── git-imap-send
│       ├── git-index-pack
│       ├── git-init
│       ├── git-init-db
│       ├── git-instaweb
│       ├── git-interpret-trailers
│       ├── git-log
│       ├── git-ls-files
│       ├── git-ls-remote
│       ├── git-ls-tree
│       ├── git-mailinfo
│       ├── git-mailsplit
│       ├── git-maintenance
│       ├── git-merge
│       ├── git-merge-base
│       ├── git-merge-file
│       ├── git-merge-index
│       ├── git-merge-octopus
│       ├── git-merge-one-file
│       ├── git-merge-ours
│       ├── git-merge-recursive
│       ├── git-merge-resolve
│       ├── git-merge-subtree
│       ├── git-mergetool
│       ├── git-mergetool--lib
│       ├── git-merge-tree
│       ├── git-mktag
│       ├── git-mktree
│       ├── git-multi-pack-index
│       ├── git-mv
│       ├── git-name-rev
│       ├── git-notes
│       ├── git-p4
│       ├── git-pack-objects
│       ├── git-pack-redundant
│       ├── git-pack-refs
│       ├── git-patch-id
│       ├── git-prune
│       ├── git-prune-packed
│       ├── git-pull
│       ├── git-push
│       ├── git-quiltimport
│       ├── git-range-diff
│       ├── git-read-tree
│       ├── git-rebase
│       ├── git-rebase--preserve-merges
│       ├── git-receive-pack
│       ├── git-reflog
│       ├── git-remote
│       ├── git-remote-ext
│       ├── git-remote-fd
│       ├── git-repack
│       ├── git-replace
│       ├── git-request-pull
│       ├── git-rerere
│       ├── git-reset
│       ├── git-restore
│       ├── git-revert
│       ├── git-rev-list
│       ├── git-rev-parse
│       ├── git-rm
│       ├── git-send-email
│       ├── git-send-pack
│       ├── git-shell
│       ├── git-sh-i18n
│       ├── git-sh-i18n--envsubst
│       ├── git-shortlog
│       ├── git-show
│       ├── git-show-branch
│       ├── git-show-index
│       ├── git-show-ref
│       ├── git-sh-setup
│       ├── git-sparse-checkout
│       ├── git-stage
│       ├── git-stash
│       ├── git-status
│       ├── git-stripspace
│       ├── git-submodule
│       ├── git-submodule--helper
│       ├── git-svn
│       ├── git-switch
│       ├── git-symbolic-ref
│       ├── git-tag
│       ├── git-unpack-file
│       ├── git-unpack-objects
│       ├── git-update-index
│       ├── git-update-ref
│       ├── git-update-server-info
│       ├── git-upload-archive
│       ├── git-upload-pack
│       ├── git-var
│       ├── git-verify-commit
│       ├── git-verify-pack
│       ├── git-verify-tag
│       ├── git-web--browse
│       ├── git-whatchanged
│       ├── git-worktree
│       ├── git-write-tree
│       └── mergetools
│           ├── araxis
│           ├── bc
│           ├── codecompare
│           ├── deltawalker
│           ├── diffmerge
│           ├── diffuse
│           ├── ecmerge
│           ├── emerge
│           ├── examdiff
│           ├── guiffy
│           ├── gvimdiff
│           ├── kdiff3
│           ├── kompare
│           ├── meld
│           ├── nvimdiff
│           ├── opendiff
│           ├── p4merge
│           ├── smerge
│           ├── tkdiff
│           ├── tortoisemerge
│           ├── vimdiff
│           ├── winmerge
│           └── xxdiff
└── share
    └── git-core
        └── templates
            ├── branches
            ├── description
            ├── hooks
            │   ├── applypatch-msg.sample
            │   ├── commit-msg.sample
            │   ├── fsmonitor-watchman.sample
            │   ├── post-update.sample
            │   ├── pre-applypatch.sample
            │   ├── pre-commit.sample
            │   ├── pre-merge-commit.sample
            │   ├── prepare-commit-msg.sample
            │   ├── pre-push.sample
            │   ├── pre-rebase.sample
            │   ├── pre-receive.sample
            │   ├── push-to-checkout.sample
            │   └── update.sample
            └── info
                └── exclude

10 directories, 206 files 
```

将目录添加`bin`到您的目录中`PATH`，您应该一切顺利！有两个警告：

1.  我们禁用了 OpenSSL 和 Curl 等，这意味着您不能`https://`仅使用 URL `ssh://`。

2.  如果您将其移动到任何地方，您会收到有关缺少模板的警告。

这是因为它使用`autotools`（另一个大黑客）并且`autotools`几乎拒绝承认人们可能想要可移植程序，因此您必须将其安装到编译时固定的*绝对*路径。Git 使用它来定位`templates`目录，所以如果你将`output`目录移动到其他任何地方，你就会开始收到如下警告：

```
warning: templates not found in /home/tim/local/git-2.31.1/output/share/git-core/templates 
```

但是由于某种原因，所有`git`命令本身都可以正常工作-您可以这样做`git init`，`git log`依此类推，`libexec/git_core`即使您移动它，它也会以某种方式找到目录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T12:09:51.407

我需要一个快速的解决方案，因此我只使用了 darcs。

darcs 的静态二进制文件大约 26mb 大，它们非常便携，非常适合旧系统。我很快就习惯了 darcs 命令，尽管我首先认为这需要更多时间。

SmartGit 也可以提供帮助，但我认为它不是开源的整个客户端。此外，我需要一个用于 bash 脚本的控制台客户端。

# c# - 在每个 C# 大小为 150 MB 的多个文本文件中搜索字符串

> ID：13570528
> 
> 赞同：2
> 
> 时间：2012-11-26T18:02:33.857
> 
> 标签：c#, copy

我有多个 .txt 文件，每个文件大小为**150MB**。使用 C# 我需要从每个文件中检索包含字符串模式的所有行，然后将这些行写入新创建的文件。

我已经研究过类似的问题，但他们建议的答案都不能给我最快的获取结果的方法。我尝试了正则表达式、linq 查询、包含方法、使用字节数组搜索，但所有这些都需要 30 多分钟来读取和比较文件内容。

我的测试文件没有任何特定的格式，它就像我们无法基于分号拆分和基于 DataViews 过滤的原始数据。以下是该文件中每一行的示例格式。

**样本.txt**

```
LTYY;;0,0,;123456789;;;;;;;20121002 02:00;;
ptgh;;0,0,;123456789;;;;;;;20121002 02:00;;
HYTF;;0,0,;846234863;;;;;;;20121002 02:00;;
Multiple records...... 
```

**我的代码**

```
using (StreamWriter SW = new StreamWriter(newFile))
            {
                using(StreamReader sr = new StreamReader(sourceFilePath))
                {
                while (sr.Peek() >= 0) 
                {
                   if (sr.ReadLine().Contains(stringToSearch))
                     SW.WriteLine(sr.ReadLine().ToString());
                 }
}
} 
```

我想要一个示例代码，它可以在不到一分钟的时间内从 Sample.txt中搜索*123456789 。*如果我的要求不清楚，请告诉我。提前致谢！

**编辑**

我找到了根本原因，因为文件驻留在远程服务器中会花费更多时间来读取它们，因为当我将文件复制到本地机器时，所有比较方法都很快完成，所以这不是我们阅读方式的问题或比较内容，他们或多或少花费了相同的时间。

*但是现在我该如何解决这个问题，我无法将所有这些文件复制到我的机器上进行比较并获得 OutOfMemory 异常*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:10:28.487

最快的搜索方法是使用[Boyer–Moore 字符串搜索算法](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)，因为这种方法不需要从文件中读取所有字节，但需要随机访问字节**，或者**您可以尝试使用[Rabin Karp 算法](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_string_search_algorithm)

或者您可以尝试从[这个答案](https://stackoverflow.com/a/2097538/712603)中执行以下代码：

```
 public static int FindInFile(string fileName, string value)
  {   // returns complement of number of characters in file if not found
    // else returns index where value found
  int index = 0;
   using (System.IO.StreamReader reader = new System.IO.StreamReader(fileName))
   {
    if (String.IsNullOrEmpty(value))
        return 0;
    StringSearch valueSearch = new StringSearch(value);
    int readChar;
    while ((readChar = reader.Read()) >= 0)
    {
        ++index;
        if (valueSearch.Found(readChar))
            return index - value.Length;
    }
}
return ~index;
}
 public class StringSearch
 {   // Call Found one character at a time until string found
private readonly string value;
private readonly List<int> indexList = new List<int>();
public StringSearch(string value)
{
    this.value = value;
}
public bool Found(int nextChar)
{
    for (int index = 0; index < indexList.Count; )
    {
        int valueIndex = indexList[index];
        if (value[valueIndex] == nextChar)
        {
            ++valueIndex;
            if (valueIndex == value.Length)
            {
                indexList[index] = indexList[indexList.Count - 1];
                indexList.RemoveAt(indexList.Count - 1);
                return true;
            }
            else
            {
                indexList[index] = valueIndex;
                ++index;
            }
        }
        else
        {   // next char does not match
            indexList[index] = indexList[indexList.Count - 1];
            indexList.RemoveAt(indexList.Count - 1);
        }
    }
    if (value[0] == nextChar)
    {
        if (value.Length == 1)
            return true;
        indexList.Add(1);
    }
    return false;
}
public void Reset()
{
    indexList.Clear();
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:08:55.657

我不知道这需要多长时间才能运行，但这里有一些改进：

```
using (StreamWriter SW = new StreamWriter(newFile))
{
    using (StreamReader sr = new StreamReader(sourceFilePath))
    {
        while (!sr.EndOfStream)
        {
            var line = sr.ReadLine();
            if (line.Contains(stringToSearch))
                SW.WriteLine(line);
        }
    }
} 
```

请注意，你不需要`Peek`，`EndOfStream`会给你你想要的。你打`ReadLine`了两次电话（可能不是你想要的）。并且无需调用`ToString()`.`string`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:10:24.400

150MB 就是 150MB。如果您有一个线程逐行遍历整个 150MB（“行”由换行符/组或 EOF 终止），您的进程必须读入并旋转所有 150MB 数据（不是全部在一次，它不必同时持有所有这些）。对 157,286,400 个字符进行线性搜索非常简单，需要时间，而您说您有很多这样的文件。

第一件事；您正在从流中读取该行两次。在大多数情况下，这实际上会导致您在匹配时读取两行；写入新文件的内容将是包含搜索字符串的行之后的行。这可能不是您想要的（再次，它可能是）。如果要写入实际包含搜索字符串的行，请在执行包含检查之前将其读入变量。

其次，String.Contains() 将根据需要执行线性搜索。在您的情况下，该行为实际上会接近 N^2，因为在字符串中搜索字符串时，必须找到第一个字符，并且在它所在的位置，然后将每个字符与后续字符一个接一个地匹配，直到所有字符搜索字符串已匹配或找到不匹配的字符；当发生不匹配时，算法必须返回初始匹配后的字符以避免跳过可能的匹配，这意味着在检查长字符串与具有许多部分匹配的较长字符串时，它可以多次测试相同的字符。因此，该策略在技术上是一种“蛮力”解决方案。不幸的是，当您不知道在哪里查找时（例如在未排序的数据文件中），没有更有效的解决方案。

除了能够对文件的数据进行排序然后执行索引搜索之外，我可以建议的唯一可能的加速方法是多线程解决方案；如果您只在一个查看每个文件的线程上运行此方法，那么不仅只有一个线程在做这项工作，而且该线程一直在等待硬盘驱动器提供所需的数据。有 5 或 10 个线程，每个线程一次处理一个文件，不仅可以更有效地利用现代多核 CPU 的真正功能，而且当一个线程在硬盘驱动器上等待时，另一个已加载数据的线程可以执行，进一步提高这种方法的效率。请记住，数据离 CPU 越远，CPU 获取数据所需的时间就越长，当您的 CPU 每秒可以处理 2 到 40 亿件事情时，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T18:22:38.320

As I said already, you should have a database, but whatever.

The fastest, shortest and nicest way to do it (even one-lined) is this:

```
File.AppendAllLines("b.txt", File.ReadLines("a.txt")
                                 .Where(x => x.Contains("123456789"))); 
```

But fast? 150MB is 150MB. It's gonna take a while. You can replace the `Contains` method with your own, for faster comparison, but that's a whole different question.

Other possible solution...

```
var sb = new StringBuilder();

foreach (var x in File.ReadLines("a.txt").Where(x => x.Contains("123456789")))
{
    sb.AppendLine(x);
}

File.WriteAllText("b.txt", sb.ToString()); // That is one heavy operation there... 
```

Testing it with a file size 150MB, and it found all results within 3 seconds. The thing that takes time is writing the results into the 2nd file (in case there are many results).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T18:09:33.093

不要同时读取和写入。先搜索，保存匹配行列表，最后写入文件。

```
using System;
using System.Collections.Generic;
using System.IO;
...
List<string> list = new List<string>();
using (StreamReader reader = new StreamReader("input.txt")) {
  string line;
  while ((line = reader.ReadLine()) != null) {
    if (line.Contains(stringToSearch)) {
      list.Add(line); // Add to list.
    }
  }
}
using (StreamWriter writer = new StreamWriter("output.txt")) {
  foreach (string line in list) {
    writer.WriteLine(line);
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T18:14:54.287

在进行字符串比较时，您将在阻止来自这些文件的输入的方法中遇到性能问题。

但是 Windows 有一个非常高性能的类似 GREP 的工具，用于对文本文件进行字符串搜索，称为[FINDSTR](http://technet.microsoft.com/en-us/library/bb490907.aspx)，它可能足够快。您可以简单地将其称为 shell 命令或将命令的结果重定向到您的输出文件。

预处理（排序）或将大文件加载到数据库中会更快，但我假设您已经有需要搜索的现有文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T18:06:34.017

我没有给您示例代码，但是您是否尝试过对文件内容进行排序？

尝试从价值 150MB 的文件中搜索字符串将花费一些时间来分割它，如果正则表达式对您来说花费的时间太长，那么我建议您对文件的内容进行排序，以便您大致了解where`"123456789"`将在您实际搜索之前发生，这样您就不必搜索不重要的部分。

# vba - 识别 Outlook 2010 中的电子邮件地址

> ID：13570533
> 
> 赞同：0
> 
> 时间：2012-11-26T18:02:41.820
> 
> 标签：vba, outlook

我正在使用此代码

```
 Public Sub ProcessarAnexo(Email As MailItem)

        Dim DiretorioAnexos As String
        Dim MailID As String
        Dim Mail As Outlook.MailItem
        Dim objOLmail As Object 
```

这是我需要保存附件的文件夹

```
 DiretorioAnexos = "C:\Separados\AlamoLogistica\"
        MailID = Email.EntryID
        Set Mail = Application.Session.GetItemFromID(MailID) 
```

在这部分中，代码将附件与邮件分开

```
 For Each anexo In Mail.Attachments
             If Right(anexo.FileName, 3) = "xml" Then
                 anexo.SaveAsFile DiretorioAnexos & anexo.FileName
             End If

             If Right(anexo.FileName, 3) = "zip" Then
                anexo.SaveAsFile DiretorioAnexos & anexo.FileName
             End If
        Next
        Set Mail = Nothing 
```

此代码有效，也许我需要通过电子邮件地址分隔附件

我写了这个：

```
 Dim ns As Outlook.NameSpace
          Dim Inbox As Outlook.MAPIFolder
          Dim appOl As New Outlook.Application

          Dim DiretorioAnexos As String
          Dim MailID As String
          Dim Mail As Outlook.MailItem
          Dim objOLmail As Object 
```

此处代码必须将“Caixa de Entrada”或“收件箱”分配给 Mapifolder 收件箱

```
 Set ns = appOl.GetNamespace("MAPI")
     Set Inbox = ns.GetDefaultFolder(olFolderInbox)

     For Each objOLmail In Inbox.Items 
```

这里如果来自 longfe@ifdcontroladoria.com.br 的邮件必须到文件夹 ""C:\Separados\AlamoLogistica\""

```
 If InStr(objOLmail.SenderEmailAddress, "longfe@ifdcontroladoria.com.br") >= 0 Then
       DiretorioAnexos = "C:\Separados\AlamoLogistica\"
        MailID = Email.EntryID
        Set Mail = Application.Session.GetItemFromID(MailID)

        For Each anexo In Mail.Attachments
             If Right(anexo.FileName, 3) = "xml" Then
                 anexo.SaveAsFile DiretorioAnexos & anexo.FileName
             End If

             If Right(anexo.FileName, 3) = "zip" Then
                anexo.SaveAsFile DiretorioAnexos & anexo.FileName
             End If
        Next
    End If

 Next
     Set Mail = Nothing 
```

但是代码不起作用我做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:20:09.173

该字段可能会产生与[此问题](https://stackoverflow.com/q/13516624/493055)`SenderEmailAddress`中的输出类似的内容。

尝试`objOLmail.SenderEmailAddress`在您的 If 语句中替换为`objOLmail.Sender.GetExchangeUser().PrimarySmtpAddress`

# javascript - dom中某处的jquery最近元素（模糊搜索）

> ID：13570537
> 
> 赞同：3
> 
> 时间：2012-11-26T18:02:55.187
> 
> 标签：javascript, jquery, html, dom

是否有内置的 jQuery 方法可以找到离另一个元素最近的 dom 元素？我的意思是最近 - 以从一个到另一个的相对路径（例如 XPath）的最小长度最近。

考虑以下示例（来自 Twitter Bootstrap 的下拉框）。有下拉图标 - 元素`.JS-ACTIONS`和一组链接 - 元素`.JS-DELETE`，当其中一个链接单击下拉图标上的进度条时，应该启用。

```
<div class='btn-group'>
  <a href='#' class='btn dropdown-toggle JS-ACTIONS' data-toggle='dropdown'>
    <i class='icon-cog'></i>
    <span class="caret"></span>
  </a>
  <ul class='dropdown-menu pull-right'>
    <li><a href='#' class='JS-DELETE'>Delete</a></li>
  </ul>
</div> 
```

一种方法，使用类似的东西

`$(element.currentTarget).parent().parent().find('.JS-ACTIONS').showProgress()`

但我希望 JavaScript 独立于 DOM 结构，例如

`$(element.currentTarget).nearest('.JS-ACTIONS').showProgress()`

jQuery中有这样的方法吗？

**更新**

jQuery的`closest`方法不起作用，它只搜索父母，而不搜索父母的兄弟姐妹和其他孩子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:04:34.950

您可能想要[最接近（）](http://api.jquery.com/closest/)：

> 对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

```
$(element.currentTarget).closest('.JS-ACTIONS').showProgress() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:04:43.000

您需要使用[**最接近（）**](http://api.jquery.com/closest/)它为您提供匹配元素在祖先层次结构中的第一次出现。

```
$(element.currentTarget).closest('.JS-ACTIONS') 
```

# javascript - 淘汰赛可见绑定不起作用

> ID：13570540
> 
> 赞同：10
> 
> 时间：2012-11-26T18:03:07.897
> 
> 标签：javascript, knockout.js

我有一个非常简单的视图模型：

```
var ViewModel = function() {
    this.showRow = ko.observable(false);
    this.toggleVisibility = function() {
        if(this.showRow == true){
            this.showRow = false;
        }
        else{
            this.showRow = true;
        }
        alert('showRow is now '+this.showRow); //only here for testing
    };
}; 
```

使用同样简单的标记：

```
<a href="#" data-bind="click: toggleVisibility">Toggle</a>
<br />
<table>
    <tr data-bind="visible: showRow">Some Text</tr>
</table> 
```

我的问题是，单击链接时，会显示警报框（显示正确的值-真/假）

但是，`tr`元素上的可见绑定似乎不起作用 - 无论是最初（该行在加载时应该是不可见的），还是在`showRow`切换的值时。

上面的jsFiddle- [http://jsfiddle.net/alexjamesbrown/FgVxY/3/](http://jsfiddle.net/alexjamesbrown/FgVxY/3/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T18:23:20.410

你需要修改你的html如下：

```
<table>
    <tr data-bind="visible: showRow"><td>Some Text</td></tr>
</table> 
```

和JavaScript如下：

```
var ViewModel = function() {
    var self = this;
    self.showRow = ko.observable(false);
    self.toggleVisibility = function() {

        self.showRow(!self.showRow());
        alert('showRow is now ' + self.showRow());
    };
};

ko.applyBindings(new ViewModel()); 
```

将值设置为可观察属性的语法是：`self.showRow(value);`

如果需要在标签内有标签。

我还修改了您的小提琴以简化 javascript 并遵循关于“this”的更新代码实践。见[http://jsfiddle.net/FgVxY/4/](http://jsfiddle.net/FgVxY/4/)

# ruby - 使用演示者呈现 ERB 模板

> ID：13570543
> 
> 赞同：1
> 
> 时间：2012-11-26T18:03:24.100
> 
> 标签：ruby, erb

我正在尝试渲染一个`.txt.erb`使用演示者来显示值的文件。以下代码在`ConfigurationWorker`其中由 resque 执行：

```
@configuration = Configuration.first
@view = Rails.root.join 'lib', 'templates', 'config.txt.erb' 
ERB.new(File.read(@view)).result(binding) 
```

`config.txt.erb`看起来像这样（为简单起见缩短）：

```
<% present @configuration do |presenter| %>
  Name <%= presenter.name %>
<% end %> 
```

而`present`由`ApplicationHelper`和提供`ConfigurationPresenter`。

```
module ApplicationHelper
  def present(object, klass = nil)
    klass ||= "#{object.class}Presenter".constantize
    presenter = klass.new(object, self)

    yield presenter if block_given?
    return presenter
  end
end

class ConfigurationPresenter < ApplicationPresenter
  presents :configuration
  delegate :name, :configuration

  # Presenter methods omitted
end

class ApplicationPresenter
  def initialize(object, template)
    @object = object
    @template = template
  end

  def self.presents(name)
    define_method(name) do
      @object
    end
  end

  def method_missing(*args, &block)
    @template.send(*args, &block)
  end
end 
```

但是，这会导致`NoMethodError: undefined method present for ConfigurationWorker:Class`.

我还尝试了其他方法，例如

```
@configuration = Configuration.first
renderer = ApplicationController.view_context_class.new
renderer.render :file => Rails.root.join('lib', 'templates', 'config.txt.erb') 
```

这导致`ActionView::Template::Error: uninitialized constant NilClassPresenter`.

使助手和演示者都可用并传入变量的正确方法是什么？

# linux - 用户环境不是来自 chroot

> ID：13570558
> 
> 赞同：3
> 
> 时间：2012-11-26T18:04:18.063
> 
> 标签：linux, bash, chroot, .bash-profile

我有一个 chroot 环境的小问题，希望你能帮助我:)

这是我的故事：

1 - 我创建了一个用户演示（有一个类似的家`/home/demo`），并通过如下脚本对他进行了 chroot `/bin/chrootshell`：

```
#!/bin/bash
exec -c /usr/sbin/chroot /home/$USER /bin/bash --login -i 
```

2 - 此用户禁用了通常的登录身份验证，因此我必须使用`su - demo`他的身份登录

一切正常（就像所有 chrooted 系统命令或我的 java 配置）。但是每次我成为用户演示时，似乎我的 .bashrc 或 /etc/profile 都没有来源......而且我不知道为什么。

但是，如果我启动手动 bash，它会像您在此处看到的那样工作：

```
root@test:~# su - demo
bash-4.1$ env
PWD=/
SHELL=/bin/chrootshell
SHLVL=1
_=/bin/env
bash-4.1$ bash
bash-4.1$ env
PWD=/
SHLVL=2
SHELL=/bin/chrootshell
PLOP=export variable test
_=/bin/env 
```

如您所见，我的`$PLOP`变量（在 /.bashrc == /home/demo/.bashrc 中描述）在第二个 bash 中设置得很好，但我不知道为什么

如果您对我的问题有任何线索，请提前感谢:)

编辑：我实际上不明白的是为什么`SHELL=/bin/chrootshell`？在我的 chroot 环境中，我用`/bin/bash`shell声明了我的演示用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:03:01.107

据我所知，您遇到的行为是 bash 按设计工作。

简而言之：当 bash 作为登录 shell 启动时（当您使用 --login 调用 bash 时会发生这种情况），它将读取`.profile`但不是`.bashrc`. 当 bash 作为非登录 shell 启动时，bash 将读取`.bashrc`但不会读取`.profile`.

阅读有关[启动文件](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Startup-Files)的 bash 手册章节以获取更多信息。

我建议解决这个设计决策是创建一个`.bash_profile`具有以下内容的：

```
if [ -f "~/.profile" ]; then
    source "~/.profile"
fi

if [ -f "~/.bashrc" ]; then
    source "~/.bashrc"
fi 
```

这将使 bash 读取`.profile`并且`.bashrc`如果作为登录 shell 启动，并且仅`.bashrc`在作为非登录 shell 启动时读取。现在你可以把需要做一次（登录时）的东西放进去，把`.profile`每次都需要做的东西放进去`.bashrc`。

# java - Java - 可能失败的迭代器

> ID：13570561
> 
> 赞同：3
> 
> 时间：2012-11-26T18:04:20.117
> 
> 标签：java, exception, iterator

如标题中所述，我正在尝试针对某些数据设计一个迭代器，这可能会在某处失败。一个例子是`Iterator<DatabaseObject>`，在调用`next()`从 DB 读取下一行并继续时。其他示例可能包括使用引发异常的 API 对象处理数据。问题是在这种情况下如何响应，因为不允许迭代器引发任何异常......我们应该在那里抛出`NoSUchElementException`并提供有意义的消息吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T18:07:55.683

您可以抛出未经检查的异常。throw 是有意义的`NoSuchElementException`，因为事实上，一个错误阻止了这样的元素。

如果异常可以包装任何底层异常，那就太好了。不幸的是，`NoSuchElementException`没有一个构造函数接受另一个异常。因此，如果您想向上传播根本原因，则必须走不同的路线，例如抛出`RuntimeException`：

```
try {
    ...
} catch (<some exception type> e) {
    throw new RuntimeException("Next element not accessible", e);
} 
```

或者，您可以返回一些保留值（例如`null`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:09:50.147

我认为这取决于您要如何处理错误。也许您想阅读 hasNext() 中已经存在的下一个条目，以便在出现问题时返回 false。从客户的角度考虑。客户应该如何反应？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:26:19.383

我见过的大多数试图使“可能失败的迭代器”的 API 最终都运行得非常糟糕。我强烈建议您*不要`Iterator`为此使用 an 。*

# pdf - Jira PDF View Plugin 字符串格式

> ID：13570562
> 
> 赞同：0
> 
> 时间：2012-11-26T18:04:23.313
> 
> 标签：pdf, jira

我意识到这是一个非常具体的问题，但供应商论坛不活跃。我的问题是关于一个名为*PDF View Plugin*的 JIRA 插件。它允许完成一些 Java，但我在正确格式化字符串时遇到了一些问题。我有一个 9 位数字字符串，我想在我的 PDF 模板中输出，但该字符串被格式化为科学记数法（我不想要）。关于如何在 PDF 模板中进行这种类型的字符串格式化的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:17:14.697

我辩论过只是删除这个问题，但如果其他人觉得这很有用，解决方案是使用这个工具`$!number.format('###,###.00', $variable)`。如果其他人正在评估该插件，开发人员会非常迅速地做出回应。

**编辑：**如果你只想显示一个整数，这对我有用：`$!number.format('#', $variable)`

# asp.net - 运行时网页发生变化

> ID：13570563
> 
> 赞同：0
> 
> 时间：2012-11-26T18:04:23.343
> 
> 标签：asp.net, css, visual-studio-2010

我正在尝试在 Visual Studio 2010 中使用 Asp.net 和 CSS 设计网页。问题很简单，但我不知道如何解决它。我在我的页面中创建了一个标题，这个标题是一个 div，它链接到我的样式表以进行着色。我在 div 中放了一张图片，并添加了一个标签。现在经过一段时间将图像放在 div 中间并在其下放置文本，当我运行网站时，Label 完全离开 div 并坐在外面。我该如何解决？为了将来参考，我遵循什么技术或方法以使运行前的网页在运行后看起来总是一样的？我决定为每个页面创建一个样式表并将我所有的样式都放在那里。

对不起，就在这里。

```
<html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
<title></title>
<link href="LoginStyleSheet.css" rel="Stylesheet" type="text/css" />

</head>
 <body>
<form id="form1" runat="server">
<div class="HeaderDiv">
    <img alt="" class="Logo"  longdesc="http://localhost:17260/MECIT_Logo.png" 
        src="MECIT_Logo.png" />
        <asp:Label CssClass="Title" ID="WelcomeLabel" runat="server" Text="SSS"> 
         </asp:label>                                                                                                                                                                                                                                                                                                                                                                                                     
        </div>  
      </form>
    </body>
    </html>

 body 
 {
background-color:Gray;
 }
 .HeaderDiv
  {
background-color: #0099FF;
height: 121px;
  }
 .Logo
  {
 position:absolute;
 left:40%;
  }
  .Title
  {
 position:absolute;
 left:38%;
 bottom:83%;
 font-size:xx-large;
 font-family:Cambria;
 font-weight:bold;
 color:Navy;
 width: 336px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:10:57.353

我不明白为什么您绝对将元素定位在容器内，所有这些都可以通过边距和对齐来处理。这是我的建议：

[点击这里查看小提琴](http://jsfiddle.net/TNCodeMonkey/WFKgH/)

CSS：

```
 body 
 {
background-color:Gray;
 }
 .HeaderDiv
  {
background-color: #0099FF;
height: 121px;
    text-align:center;
  }
 .Logo
  {
margin:5 auto;
  }
  .Title
  {
 font-size:xx-large;
 font-family:Cambria;
 font-weight:bold;
 color:Navy;
 width: 336px;
 }​ 
```

HTML：

```
<div class="HeaderDiv">
    <img alt="" class="Logo"  longdesc="http://localhost:17260/MECIT_Logo.png" 
    src="http://www.mecit.edu.om/images/MECIT_Logo.png" /><br />
    //Used a <span> for the Label, as I believe that is what it renders as
    <span class="Title" id="WelcomeLabel">Some Title</span>                                                                                                                                                                                                                                                                                                                                                                                                    
        </div> 
```

# java - java.util.logging 在 Gwt 和 Glassfish 中不起作用

> ID：13570570
> 
> 赞同：0
> 
> 时间：2012-11-26T18:05:17.090
> 
> 标签：java, gwt, logging, glassfish

我正在创建 gwt 应用程序并将其部署在 glassfish 上。我使用 java.util.logging 进行日志记录，但它似乎不起作用，因为我在 server.log 中找不到任何日志。我已经放入了.gwt.xml，但它没有帮助。谁能让我知道我应该怎么做才能将日志存储在 server.log 中？非常感谢。

大号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:17:50.197

如果您使用的是 GWT 2.4 及更高版本，请参阅 https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging。如果您使用的是较旧的 gwt，则可以使用 gwt-log lib。

# java - 在 ORMLite 中为 ApplicationSettings 存储多个 ArrayList 的最佳方法

> ID：13570578
> 
> 赞同：5
> 
> 时间：2012-11-26T18:05:52.453
> 
> 标签：java, database, orm, ormlite

现在，我正在尝试`DB`在`ORMLite`.

好吧，我的设置由不同的或者`String[]`实际上只是一堆. 所以我的问题是，在这种情况下我应该使用什么数据类型并且是可选的，也许你也可以为我提供一个小的.`ArrayList<String>``Map``Strings``code example`

现在我尝试了不同的东西，但我从来没有对解决方案感到满意。我尝试过类似的东西：

```
private HashMap<String, ArrayList<String>> configurationMap;

private String[] stringArr1;
private String[] stringArr2;

private ArrayList<String> arrList1; 
```

但是在设置时，`DB Datatypes`我总是想，“我不想要一个额外的表来存储数据”或“将映射序列化到数据库很糟糕......”。

也许有人知道如何以一种既方便又方便的方式解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T10:58:55.940

对于 arrayList，您可以简单地执行以下操作：

```
public class YourClass{
    @GeneratedId
    private int id;

    @ForeignCollectionField
    private Collection<MyString> bunchOfStrings = new ArrayList<MyString>();
    ...
} 
```

在 MyString 类中，您具有以下内容：

```
public class MyString{
    @DatabaseField(canBeNull = true, foreign = true)
    private YourClass yourClass;

     @DatabaseField
     private String text;
    ....
} 
```

就这样

# c# - 是否总是可以使用 Task 强制一个新线程？

> ID：13570579
> 
> 赞同：13
> 
> 时间：2012-11-26T18:05:59.570
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library

每次`Task.Factory.StartNew`调用我都试图创建一个新线程。问题是如何在不抛出异常的情况下运行下面的代码：

```
static void Main(string[] args)
{
    int firstThreadId = 0;

    Task.Factory.StartNew(() => firstThreadId = Thread.CurrentThread.ManagedThreadId);

    for (int i = 0; i < 100; i++)
    {
        Task.Factory.StartNew(() =>
        {
            while (true)
            {
                Thread.Sleep(1000);
                if (firstThreadId == Thread.CurrentThread.ManagedThreadId)
                    throw new Exception("The first thread is reused.");
            }
        });
    }
    Console.Read();
} 
```

**编辑：如果您评论第一条语句**，新代码**`for`没有问题。但是如果你有它，哇，消息“线程重用”被写入控制台。你能解释一下吗，因为我真的很困惑。**

 **```
static void Main(string[] args)
{
    ConcurrentDictionary<int, int> startedThreads = new ConcurrentDictionary<int, int>();

    for (int i = 0; i < 10; i++)
    {
        Task.Factory.StartNew(() =>
        {
            Task.Factory.StartNew(() =>
            {
                startedThreads.AddOrUpdate(Thread.CurrentThread.ManagedThreadId,
                    Thread.CurrentThread.ManagedThreadId, (a, b) => b);
            }, TaskCreationOptions.LongRunning);

            for (int j = 0; j < 100; j++)
            {
                Task.Factory.StartNew(() =>
                {
                    while (true)
                    {
                        Thread.Sleep(10);
                        if (startedThreads.ContainsKey(
                            Thread.CurrentThread.ManagedThreadId))
                                Console.WriteLine("Thread reused");
                    }
                }, TaskCreationOptions.LongRunning);
            }
        });
    }

    Console.Read();
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-26T18:08:22.613

如果您[`TaskCreationOptions.LongRunning`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcreationoptions.aspx)在启动任务时指定，则会向调度程序提供*提示*，默认调度程序将其作为为任务创建新线程的指示符。

这只是一个提示 - 我不确定我是否会*依赖*它......但我没有看到任何使用默认调度程序的反例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T18:09:28.903

添加到 Jon Skeet 的答案中，如果您想*保证*每次都创建一个新线程，您可以编写自己的`TaskScheduler`创建一个新线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T08:29:13.013

您好，谢谢大家的回答。你们都得到了+1。所有建议的解决方案都不适用于我的情况。问题是当你休眠一个线程时，它会在某个时间点被重用。上面的人建议：

*   使用 LongRunning => 如果您有嵌套/子任务，这将不起作用
*   自定义任务调度程序 => 我尝试编写自己的任务调度程序，也尝试了这个 [ThreadPerTaskScheduler](http://code.msdn.microsoft.com/Samples-for-Parallel-b4b76364/sourcecode?fileId=44488&pathId=1060235345)，它也不起作用。
*   使用纯线程 => 仍然失败...
*   你也可以在[Multithreading.Scheduler github 上查看这个项目](https://github.com/Elders/Multithreading.Scheduler)

## 我的解决方案

我不喜欢它，但它有效。基本上我阻塞了线程，所以它不能被重用。下面是扩展方法和一个工作示例。再次谢谢你。

[https://gist.github.com/4150635](https://gist.github.com/4150635)

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication
{
    public static class ThreadExtensions
    {
        /// <summary>
        /// Blocks the current thread for a period of time so that the thread cannot be reused by the threadpool.
        /// </summary>
        public static void Block(this Thread thread, int millisecondsTimeout)
        {
            new WakeSleepClass(millisecondsTimeout).SleepThread();
        }

        /// <summary>
        /// Blocks the current thread so that the thread cannot be reused by the threadpool.
        /// </summary>
        public static void Block(this Thread thread)
        {
            new WakeSleepClass().SleepThread();
        }

        /// <summary>
        /// Blocks the current thread for a period of time so that the thread cannot be reused by the threadpool.
        /// </summary>
        public static void Block(this Thread thread, TimeSpan timeout)
        {
            new WakeSleepClass(timeout).SleepThread();
        }

        class WakeSleepClass
        {
            bool locked = true;
            readonly TimerDisposer timerDisposer = new TimerDisposer();

            public WakeSleepClass(int sleepTime)
            {
                var timer = new Timer(WakeThread, timerDisposer, sleepTime, sleepTime);
                timerDisposer.InternalTimer = timer;
            }

            public WakeSleepClass(TimeSpan sleepTime)
            {
                var timer = new Timer(WakeThread, timerDisposer, sleepTime, sleepTime);
                timerDisposer.InternalTimer = timer;
            }

            public WakeSleepClass()
            {
                var timer = new Timer(WakeThread, timerDisposer, Timeout.Infinite, Timeout.Infinite);
                timerDisposer.InternalTimer = timer;
            }

            public void SleepThread()
            {
                while (locked)
                    lock (timerDisposer) Monitor.Wait(timerDisposer);
                locked = true;
            }

            public void WakeThread(object key)
            {
                locked = false;
                lock (key) Monitor.Pulse(key);
                ((TimerDisposer)key).InternalTimer.Dispose();
            }

            class TimerDisposer
            {
                public Timer InternalTimer { get; set; }
            }
        }
    }

    class Program
    {
        private static readonly Queue<CancellationTokenSource> tokenSourceQueue = new Queue<CancellationTokenSource>();
        static void Main(string[] args)
        {
            CancellationTokenSource tokenSource = new CancellationTokenSource();
            tokenSourceQueue.Enqueue(tokenSource);

            ConcurrentDictionary<int, int> startedThreads = new ConcurrentDictionary<int, int>();
            for (int i = 0; i < 10; i++)
            {
                Thread.Sleep(1000);
                Task.Factory.StartNew(() =>
                {
                    startedThreads.AddOrUpdate(Thread.CurrentThread.ManagedThreadId, Thread.CurrentThread.ManagedThreadId, (a, b) => b);
                    for (int j = 0; j < 50; j++)
                        Task.Factory.StartNew(() => startedThreads.AddOrUpdate(Thread.CurrentThread.ManagedThreadId, Thread.CurrentThread.ManagedThreadId, (a, b) => b));

                    for (int j = 0; j < 50; j++)
                    {
                        Task.Factory.StartNew(() =>
                        {
                            while (!tokenSource.Token.IsCancellationRequested)
                            {
                                if (startedThreads.ContainsKey(Thread.CurrentThread.ManagedThreadId)) Console.WriteLine("Thread reused");
                                Thread.CurrentThread.Block(10);
                                if (startedThreads.ContainsKey(Thread.CurrentThread.ManagedThreadId)) Console.WriteLine("Thread reused");
                            }
                        }, tokenSource.Token, TaskCreationOptions.LongRunning, TaskScheduler.Default)
                        .ContinueWith(task =>
                        {
                            WriteExceptions(task.Exception);
                            Console.WriteLine("-----------------------------");
                        }, TaskContinuationOptions.OnlyOnFaulted);
                    }
                    Thread.CurrentThread.Block();
                }, tokenSource.Token, TaskCreationOptions.LongRunning, TaskScheduler.Default)
                .ContinueWith(task =>
                {
                    WriteExceptions(task.Exception);
                    Console.WriteLine("-----------------------------");
                }, TaskContinuationOptions.OnlyOnFaulted);
            }

            Console.Read();
        }

        private static void WriteExceptions(Exception ex)
        {
            Console.WriteLine(ex.Message);
            if (ex.InnerException != null)
                WriteExceptions(ex.InnerException);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-24T16:15:35.017

试试这个：

```
var taskCompletionSource = new TaskCompletionSource<bool>();
Thread t = new Thread(() =>
{
    try
    {
        Operation();
        taskCompletionSource.TrySetResult(true);
    }
    catch (Exception e)
    {
        taskCompletionSource.TrySetException(e);
    }
});
void Operation()
{
    // Some work in thread
}
t.Start();
await taskCompletionSource.Task; 
```

您还可以为 Action、Func 等编写扩展方法。例如：

```
public static Task RunInThread(
    this Action action,
    Action<Thread> initThreadAction = null)
{
    TaskCompletionSource<bool> taskCompletionSource = new TaskCompletionSource<bool>();

    Thread thread = new Thread(() =>
    {
        try
        {
            action();
            taskCompletionSource.TrySetResult(true);
        }
        catch (Exception e)
        {
            taskCompletionSource.TrySetException(e);
        }
    });
    initThreadAction?.Invoke(thread);
    thread.Start();

    return taskCompletionSource.Task;
} 
```

或者

```
public static Task<TResult> RunInThread<T1, T2, TResult>(
    this Func<T1, T2, TResult> function,
    T1 param1,
    T2 param2,
    Action<Thread> initThreadAction = null)
{
    TaskCompletionSource<TResult> taskCompletionSource = new TaskCompletionSource<TResult>();

    Thread thread = new Thread(() =>
    {
        try
        {
            TResult result = function(param1, param2);
            taskCompletionSource.TrySetResult(result);
        }
        catch (Exception e)
        {
            taskCompletionSource.TrySetException(e);
        }
    });
    initThreadAction?.Invoke(thread);
    thread.Start();

    return taskCompletionSource.Task;
} 
```

并像这样使用它：

```
var result = await some_function.RunInThread(param1, param2).ConfigureAwait(true); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-26T20:00:45.510

只需使用 new Thread() 启动线程，然后 Start() 他们

```
static void Main(string[] args)
{
    ConcurrentDictionary<int, int> startedThreads = new ConcurrentDictionary<int, int>();

    for (int i = 0; i < 10; i++)
    {
        new Thread(() =>
        {
            new Thread(() =>
            {
                startedThreads.AddOrUpdate(Thread.CurrentThread.ManagedThreadId, Thread.CurrentThread.ManagedThreadId, (a, b) => b);
            }).Start();

            for (int j = 0; j < 100; j++)
            {
                new Thread(() =>
                {
                    while (true)
                    {
                        Thread.Sleep(10);
                        if (startedThreads.ContainsKey(Thread.CurrentThread.ManagedThreadId))
                            Console.WriteLine("Thread reused");
                    }
                }).Start();
            }
        }).Start();
    }

    Console.Read();

} 
```

任务应该由调度程序管理。Tasks 的整个想法是运行时将决定何时需要新线程。另一方面，如果您确实需要不同的线程，则代码中的其他内容可能是错误的，例如过度依赖 Thread.Sleep() 或线程本地存储。

正如所指出的，您可以创建自己的 TaskScheduler 并使用任务来创建线程，但是为什么要使用 Tasks 开始呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-25T21:04:15.493

这是一个[`TaskScheduler`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskscheduler)在每个任务的专用线程上执行任务的自定义：

```
public class ThreadPerTask_TaskScheduler : TaskScheduler
{
    protected override void QueueTask(Task task)
    {
        var thread = new Thread(() => TryExecuteTask(task));
        thread.IsBackground = true;
        thread.Start();
    }

    protected override bool TryExecuteTaskInline(Task task, bool taskWasPreviouslyQueued)
    {
        return TryExecuteTask(task);
    }

    protected override IEnumerable<Task> GetScheduledTasks() { yield break; }
} 
```

使用示例：

```
var parallelOptions = new ParallelOptions()
{
    MaxDegreeOfParallelism = 3,
    TaskScheduler = new ThreadPerTask_TaskScheduler()
};

Parallel.ForEach(Enumerable.Range(1, 10), parallelOptions, item =>
{
    Console.WriteLine($"{DateTime.Now:HH:mm:ss.fff}" +
        $" [{Thread.CurrentThread.ManagedThreadId}]" +
        $" Processing #{item}" +
        (Thread.CurrentThread.IsBackground ? ", Background" : "") +
        (Thread.CurrentThread.IsThreadPoolThread ? ", ThreadPool" : ""));
    Thread.Sleep(1000); // Simulate CPU-bound work
}); 
```

输出：

```
20:38:56.770 [4] Processing #3, Background
20:38:56.770 [5] Processing #2, Background
20:38:56.770 [1] Processing #1
20:38:57.782 [1] Processing #4
20:38:57.783 [8] Processing #5, Background
20:38:57.783 [7] Processing #6, Background
20:38:58.783 [1] Processing #7
20:38:58.783 [10] Processing #8, Background
20:38:58.787 [9] Processing #9, Background
20:38:59.783 [1] Processing #10 
```

[在 Fiddle 上试试](https://dotnetfiddle.net/rn61db)。

此自定义`TaskScheduler`也允许当前线程参与计算。这在上面的示例中通过`[1]`处理项目`#1`、`#4`和`#7`的线程进行了演示`#10`。如果您不希望发生这种情况，只需将其中的代码替换`TryExecuteTaskInline`为`return false;`。

另一个例子，以[`Task.Factory.StartNew`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskfactory.startnew)方法为特色。在 100 个不同的线程上启动 100 个任务：

```
var oneThreadPerTask = new ThreadPerTask_TaskScheduler();
Task[] tasks = Enumerable.Range(1, 100).Select(_ =>
{
    return Task.Factory.StartNew(() =>
    {
        Thread.Sleep(1000); // Simulate long-running work
    }, default, TaskCreationOptions.None, oneThreadPerTask);
}).ToArray(); 
```

在这种情况下，当前线程没有参与工作，因为所有任务都是通过调用它们的方法在幕后启动的[`Start`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.start)，而不是 [`RunSynchronously`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.runsynchronously).**

# javascript - 根据国家/地区更新隐藏字段值

> ID：13570581
> 
> 赞同：-2
> 
> 时间：2012-11-26T18:06:08.690
> 
> 标签：javascript, jquery

这是情况。隐藏字段需要根据国家/地区选择更新（丹麦（DK）、德国（DE）、荷兰（ML）。-如果未选择这些国家/地区，则将隐藏字段设置为常规-如果选择了其中任何一个，将其设置为 Double -还有另一个名为“请联系我”的复选框。如果选中，请将隐藏字段设置为“联系我”。

我无法修改表单代码，因此只能由 javascript 完成。

```
<script type="text/javascript">
function updateEmail_Type(country) { 
    if(document.forms[0].dUSContactMe.checked == false){
        countryValue = C_country.options[C_country.selectedIndex].value;
        if (countryValue=="DE") { document.forms[0].hiddenOfferType.value="DS Double"; }
        if (countryValue=="DK") { document.forms[0].hiddenOfferType.value="DS Double"; }
        if (countryValue=="NL") { document.forms[0].hiddenOfferType.value="DS Double"; }
        if(countryValue!= "" && countryValue!= "DE" && countryValue!="DK" && countryValue!="NL" && countryValue!="other"){ document.forms[0].hiddenOfferType.value="DS Regular"; }
        if (countryValue=="other") { document.forms[0].hiddenOfferType.value="15.00"; }
    }
    else
    {
        document.forms[0].hiddenOfferType.value="DS Contact Me";
    }
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:09:10.660

您的问题没有显示 HTML 结构，所以这里有一些指导方针，有一些假设：

```
if($("#field26").prop("checked")){
    $("#hiddenfieldid").val("Contact me");
} else
    {
    var country = $("#contryfield").val();

    if(country == "DK" || country == "DE" /*add any others that apply*/){
        $("#hiddenfieldid").val("Regular");
    } else {
    $("#hiddenfieldid").val("Double");
    }
} 
```

相应调整。

# javascript - 事件未在 JavaScript 中触发

> ID：13570582
> 
> 赞同：0
> 
> 时间：2012-11-26T18:06:10.267
> 
> 标签：javascript, events, combobox

我对 JavaScript 有点陌生。我正在使用一个名为 Spread 的网格控件，在该网格中，我有三行三列的组合框。我也有一个原生的 ASP 文本框。我想要的是在文本框中显示组合框的值，一旦它被客户端更改。为此，我使用了 Spread 控件的 DataChanged 事件。但是，当我在本地运行它并更改任何 Spread 组合框中的值时，什么都没有发生。

这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <FarPoint:FpSpread ID="FpSpread1" runat="server" ActiveSheetViewIndex="0" 
    BorderColor="Black" BorderStyle="Solid" BorderWidth="1px" 
    DesignString="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Spread /&gt;" 
    Height="200px" Width="400px">
    <ClientEvents DataChanged="dataChanged" />
    <commandbar backcolor="Control" buttonfacecolor="Control" 
        buttonhighlightcolor="ControlLightLight" buttonshadowcolor="ControlDark">
        <Background BackgroundImageUrl="SPREADCLIENTPATH:/img/cbbg.gif">
        </Background>
    </commandbar>
    <Pager Font-Bold="False" Font-Italic="False" Font-Overline="False" 
        Font-Strikeout="False" Font-Underline="False" />
    <HierBar Font-Bold="False" Font-Italic="False" Font-Overline="False" 
        Font-Strikeout="False" Font-Underline="False" />
    <sheets>
        <FarPoint:SheetView DesignString="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Sheet&gt;&lt;Data&gt;&lt;RowHeader class=&quot;FarPoint.Web.Spread.Model.DefaultSheetDataModel&quot; rows=&quot;3&quot; columns=&quot;1&quot;&gt;&lt;AutoCalculation&gt;True&lt;/AutoCalculation&gt;&lt;AutoGenerateColumns&gt;True&lt;/AutoGenerateColumns&gt;&lt;ReferenceStyle&gt;A1&lt;/ReferenceStyle&gt;&lt;Iteration&gt;False&lt;/Iteration&gt;&lt;MaximumIterations&gt;1&lt;/MaximumIterations&gt;&lt;MaximumChange&gt;0.001&lt;/MaximumChange&gt;&lt;/RowHeader&gt;&lt;ColumnHeader class=&quot;FarPoint.Web.Spread.Model.DefaultSheetDataModel&quot; rows=&quot;1&quot; columns=&quot;4&quot;&gt;&lt;AutoCalculation&gt;True&lt;/AutoCalculation&gt;&lt;AutoGenerateColumns&gt;True&lt;/AutoGenerateColumns&gt;&lt;ReferenceStyle&gt;A1&lt;/ReferenceStyle&gt;&lt;Iteration&gt;False&lt;/Iteration&gt;&lt;MaximumIterations&gt;1&lt;/MaximumIterations&gt;&lt;MaximumChange&gt;0.001&lt;/MaximumChange&gt;&lt;/ColumnHeader&gt;&lt;DataArea class=&quot;FarPoint.Web.Spread.Model.DefaultSheetDataModel&quot; rows=&quot;3&quot; columns=&quot;4&quot;&gt;&lt;AutoCalculation&gt;True&lt;/AutoCalculation&gt;&lt;AutoGenerateColumns&gt;True&lt;/AutoGenerateColumns&gt;&lt;ReferenceStyle&gt;A1&lt;/ReferenceStyle&gt;&lt;Iteration&gt;False&lt;/Iteration&gt;&lt;MaximumIterations&gt;1&lt;/MaximumIterations&gt;&lt;MaximumChange&gt;0.001&lt;/MaximumChange&gt;&lt;SheetName&gt;Sheet1&lt;/SheetName&gt;&lt;Cells&gt;&lt;Cell row=&quot;0&quot; column=&quot;0&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;Pippo&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;0&quot; column=&quot;1&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;din&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;0&quot; column=&quot;2&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;a&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;1&quot; column=&quot;0&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;pippo&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;1&quot; column=&quot;1&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;din&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;1&quot; column=&quot;2&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;a&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;2&quot; column=&quot;0&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;pippo&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;2&quot; column=&quot;1&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;din&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;2&quot; column=&quot;2&quot;&gt;&lt;Data type=&quot;System.String&quot;&gt;a&lt;/Data&gt;&lt;/Cell&gt;&lt;/Cells&gt;&lt;/DataArea&gt;&lt;SheetCorner class=&quot;FarPoint.Web.Spread.Model.DefaultSheetDataModel&quot; rows=&quot;1&quot; columns=&quot;1&quot;&gt;&lt;AutoCalculation&gt;True&lt;/AutoCalculation&gt;&lt;AutoGenerateColumns&gt;True&lt;/AutoGenerateColumns&gt;&lt;ReferenceStyle&gt;A1&lt;/ReferenceStyle&gt;&lt;Iteration&gt;False&lt;/Iteration&gt;&lt;MaximumIterations&gt;1&lt;/MaximumIterations&gt;&lt;MaximumChange&gt;0.001&lt;/MaximumChange&gt;&lt;/SheetCorner&gt;&lt;ColumnFooter class=&quot;FarPoint.Web.Spread.Model.DefaultSheetDataModel&quot; rows=&quot;1&quot; columns=&quot;4&quot;&gt;&lt;AutoCalculation&gt;True&lt;/AutoCalculation&gt;&lt;AutoGenerateColumns&gt;True&lt;/AutoGenerateColumns&gt;&lt;ReferenceStyle&gt;A1&lt;/ReferenceStyle&gt;&lt;Iteration&gt;False&lt;/Iteration&gt;&lt;MaximumIterations&gt;1&lt;/MaximumIterations&gt;&lt;MaximumChange&gt;0.001&lt;/MaximumChange&gt;&lt;/ColumnFooter&gt;&lt;/Data&gt;&lt;Presentation&gt;&lt;AxisModels&gt;&lt;Column class=&quot;FarPoint.Web.Spread.Model.DefaultSheetAxisModel&quot; orientation=&quot;Horizontal&quot; count=&quot;4&quot;&gt;&lt;Items&gt;&lt;Item index=&quot;-1&quot;&gt;&lt;SortIndicator&gt;Ascending&lt;/SortIndicator&gt;&lt;/Item&gt;&lt;/Items&gt;&lt;/Column&gt;&lt;RowHeaderColumn class=&quot;FarPoint.Web.Spread.Model.DefaultSheetAxisModel&quot; defaultSize=&quot;40&quot; orientation=&quot;Horizontal&quot; count=&quot;1&quot;&gt;&lt;Items&gt;&lt;Item index=&quot;-1&quot;&gt;&lt;SortIndicator&gt;Ascending&lt;/SortIndicator&gt;&lt;Size&gt;40&lt;/Size&gt;&lt;/Item&gt;&lt;/Items&gt;&lt;/RowHeaderColumn&gt;&lt;ColumnHeaderRow class=&quot;FarPoint.Web.Spread.Model.DefaultSheetAxisModel&quot; defaultSize=&quot;22&quot; orientation=&quot;Vertical&quot; count=&quot;1&quot;&gt;&lt;Items&gt;&lt;Item index=&quot;-1&quot;&gt;&lt;Size&gt;22&lt;/Size&gt;&lt;/Item&gt;&lt;/Items&gt;&lt;/ColumnHeaderRow&gt;&lt;ColumnFooterRow class=&quot;FarPoint.Web.Spread.Model.DefaultSheetAxisModel&quot; defaultSize=&quot;22&quot; orientation=&quot;Vertical&quot; count=&quot;1&quot;&gt;&lt;Items&gt;&lt;Item index=&quot;-1&quot;&gt;&lt;Size&gt;22&lt;/Size&gt;&lt;/Item&gt;&lt;/Items&gt;&lt;/ColumnFooterRow&gt;&lt;/AxisModels&gt;&lt;StyleModels&gt;&lt;RowHeader class=&quot;FarPoint.Web.Spread.Model.DefaultSheetStyleModel&quot; Rows=&quot;3&quot; Columns=&quot;1&quot;&gt;&lt;AltRowCount&gt;2&lt;/AltRowCount&gt;&lt;DefaultStyle class=&quot;FarPoint.Web.Spread.NamedStyle&quot; Parent=&quot;RowHeaderDefault&quot; /&gt;&lt;ConditionalFormatCollections /&gt;&lt;/RowHeader&gt;&lt;ColumnHeader class=&quot;FarPoint.Web.Spread.Model.DefaultSheetStyleModel&quot; Rows=&quot;1&quot; Columns=&quot;4&quot;&gt;&lt;AltRowCount&gt;2&lt;/AltRowCount&gt;&lt;DefaultStyle class=&quot;FarPoint.Web.Spread.NamedStyle&quot; Parent=&quot;ColumnHeaderDefault&quot;&gt;&lt;Background class=&quot;FarPoint.Web.Spread.Background&quot;&gt;&lt;BackgroundImageUrl&gt;SPREADCLIENTPATH:/img/chbg.gif&lt;/BackgroundImageUrl&gt;&lt;SelectedBackgroundImageUrl&gt;SPREADCLIENTPATH:/img/chm.png&lt;/SelectedBackgroundImageUrl&gt;&lt;/Background&gt;&lt;/DefaultStyle&gt;&lt;ConditionalFormatCollections /&gt;&lt;/ColumnHeader&gt;&lt;DataArea class=&quot;FarPoint.Web.Spread.Model.DefaultSheetStyleModel&quot; Rows=&quot;3&quot; Columns=&quot;4&quot;&gt;&lt;AltRowCount&gt;2&lt;/AltRowCount&gt;&lt;DefaultStyle class=&quot;FarPoint.Web.Spread.NamedStyle&quot; Parent=&quot;DataAreaDefault&quot; /&gt;&lt;ColumnStyles&gt;&lt;ColumnStyle Index=&quot;0&quot;&gt;&lt;CellType class=&quot;FarPoint.Web.Spread.ComboBoxCellType&quot;&gt;&lt;AutoPostBack&gt;True&lt;/AutoPostBack&gt;&lt;ShowButton&gt;True&lt;/ShowButton&gt;&lt;UseValue&gt;True&lt;/UseValue&gt;&lt;OnClientChanged&gt;updatedcell&lt;/OnClientChanged&gt;&lt;Items&gt;&lt;Item text=&quot;pippo&quot; value=&quot;pippo&quot; /&gt;&lt;Item text=&quot;pluto&quot; value=&quot;pluto&quot; /&gt;&lt;Item text=&quot;paperino&quot; value=&quot;paperino&quot; /&gt;&lt;/Items&gt;&lt;/CellType&gt;&lt;TabStop&gt;True&lt;/TabStop&gt;&lt;/ColumnStyle&gt;&lt;ColumnStyle Index=&quot;1&quot;&gt;&lt;CellType class=&quot;FarPoint.Web.Spread.ComboBoxCellType&quot;&gt;&lt;AutoPostBack&gt;True&lt;/AutoPostBack&gt;&lt;ShowButton&gt;True&lt;/ShowButton&gt;&lt;UseValue&gt;True&lt;/UseValue&gt;&lt;Items&gt;&lt;Item text=&quot;din&quot; value=&quot;din&quot; /&gt;&lt;Item text=&quot;don&quot; value=&quot;don&quot; /&gt;&lt;Item text=&quot;dan&quot; value=&quot;dan&quot; /&gt;&lt;/Items&gt;&lt;/CellType&gt;&lt;TabStop&gt;True&lt;/TabStop&gt;&lt;/ColumnStyle&gt;&lt;ColumnStyle Index=&quot;2&quot;&gt;&lt;CellType class=&quot;FarPoint.Web.Spread.ComboBoxCellType&quot;&gt;&lt;AutoPostBack&gt;True&lt;/AutoPostBack&gt;&lt;ShowButton&gt;True&lt;/ShowButton&gt;&lt;UseValue&gt;True&lt;/UseValue&gt;&lt;Items&gt;&lt;Item text=&quot;a&quot; value=&quot;a&quot; /&gt;&lt;Item text=&quot;b&quot; value=&quot;b&quot; /&gt;&lt;Item text=&quot;c&quot; value=&quot;c&quot; /&gt;&lt;/Items&gt;&lt;/CellType&gt;&lt;TabStop&gt;True&lt;/TabStop&gt;&lt;/ColumnStyle&gt;&lt;/ColumnStyles&gt;&lt;CellStyles&gt;&lt;CellStyle Row=&quot;0&quot; Column=&quot;0&quot;&gt;&lt;c class=&quot;FarPoint.Web.Spread.ComboBoxCellType&quot;&gt;&lt;p&gt;True&lt;/p&gt;&lt;s&gt;True&lt;/s&gt;&lt;u&gt;True&lt;/u&gt;&lt;h&gt;&lt;d t=&quot;Pippo&quot; v=&quot;pippo&quot; /&gt;&lt;d t=&quot;Pluto &quot; /&gt;&lt;d t=&quot;Paperino&quot; /&gt;&lt;/h&gt;&lt;/c&gt;&lt;ts&gt;True&lt;/ts&gt;&lt;/CellStyle&gt;&lt;/CellStyles&gt;&lt;ConditionalFormatCollections /&gt;&lt;/DataArea&gt;&lt;SheetCorner class=&quot;FarPoint.Web.Spread.Model.DefaultSheetStyleModel&quot; Rows=&quot;1&quot; Columns=&quot;1&quot;&gt;&lt;AltRowCount&gt;2&lt;/AltRowCount&gt;&lt;DefaultStyle class=&quot;FarPoint.Web.Spread.NamedStyle&quot; Parent=&quot;CornerDefault&quot;&gt;&lt;Background class=&quot;FarPoint.Web.Spread.Background&quot;&gt;&lt;BackgroundImageUrl&gt;SPREADCLIENTPATH:/img/chbg.gif&lt;/BackgroundImageUrl&gt;&lt;SelectedBackgroundImageUrl&gt;SPREADCLIENTPATH:/img/chm.png&lt;/SelectedBackgroundImageUrl&gt;&lt;/Background&gt;&lt;/DefaultStyle&gt;&lt;ConditionalFormatCollections /&gt;&lt;/SheetCorner&gt;&lt;ColumnFooter class=&quot;FarPoint.Web.Spread.Model.DefaultSheetStyleModel&quot; Rows=&quot;1&quot; Columns=&quot;4&quot;&gt;&lt;AltRowCount&gt;2&lt;/AltRowCount&gt;&lt;DefaultStyle class=&quot;FarPoint.Web.Spread.NamedStyle&quot; Parent=&quot;ColumnFooterDefault&quot; /&gt;&lt;ConditionalFormatCollections /&gt;&lt;/ColumnFooter&gt;&lt;/StyleModels&gt;&lt;MessageRowStyle class=&quot;FarPoint.Web.Spread.Appearance&quot;&gt;&lt;BackColor&gt;LightYellow&lt;/BackColor&gt;&lt;ForeColor&gt;Red&lt;/ForeColor&gt;&lt;/MessageRowStyle&gt;&lt;SheetCornerStyle class=&quot;FarPoint.Web.Spread.NamedStyle&quot; Parent=&quot;CornerDefault&quot;&gt;&lt;Background class=&quot;FarPoint.Web.Spread.Background&quot;&gt;&lt;BackgroundImageUrl&gt;SPREADCLIENTPATH:/img/chbg.gif&lt;/BackgroundImageUrl&gt;&lt;SelectedBackgroundImageUrl&gt;SPREADCLIENTPATH:/img/chm.png&lt;/SelectedBackgroundImageUrl&gt;&lt;/Background&gt;&lt;/SheetCornerStyle&gt;&lt;AllowLoadOnDemand&gt;false&lt;/AllowLoadOnDemand&gt;&lt;LoadRowIncrement &gt;10&lt;/LoadRowIncrement &gt;&lt;LoadInitRowCount &gt;30&lt;/LoadInitRowCount &gt;&lt;AllowVirtualScrollPaging&gt;false&lt;/AllowVirtualScrollPaging&gt;&lt;TopRow&gt;0&lt;/TopRow&gt;&lt;PreviewRowStyle class=&quot;FarPoint.Web.Spread.PreviewRowInfo&quot; /&gt;&lt;/Presentation&gt;&lt;Settings&gt;&lt;Name&gt;Sheet1&lt;/Name&gt;&lt;Categories&gt;&lt;Appearance&gt;&lt;GridLineColor&gt;#d0d7e5&lt;/GridLineColor&gt;&lt;SelectionBackColor&gt;#eaecf5&lt;/SelectionBackColor&gt;&lt;SelectionBorder class=&quot;FarPoint.Web.Spread.Border&quot; /&gt;&lt;/Appearance&gt;&lt;Behavior&gt;&lt;EditTemplateColumnCount&gt;2&lt;/EditTemplateColumnCount&gt;&lt;GroupBarText&gt;Drag a column to group by that column.&lt;/GroupBarText&gt;&lt;/Behavior&gt;&lt;Layout&gt;&lt;ColumnHeaderRowCount&gt;1&lt;/ColumnHeaderRowCount&gt;&lt;RowHeaderColumnCount&gt;1&lt;/RowHeaderColumnCount&gt;&lt;/Layout&gt;&lt;/Categories&gt;&lt;ActiveRow&gt;0&lt;/ActiveRow&gt;&lt;ActiveColumn&gt;0&lt;/ActiveColumn&gt;&lt;ColumnHeaderRowCount&gt;1&lt;/ColumnHeaderRowCount&gt;&lt;ColumnFooterRowCount&gt;1&lt;/ColumnFooterRowCount&gt;&lt;PrintInfo&gt;&lt;Header /&gt;&lt;Footer /&gt;&lt;ZoomFactor&gt;0&lt;/ZoomFactor&gt;&lt;FirstPageNumber&gt;1&lt;/FirstPageNumber&gt;&lt;Orientation&gt;Auto&lt;/Orientation&gt;&lt;PrintType&gt;All&lt;/PrintType&gt;&lt;PageOrder&gt;Auto&lt;/PageOrder&gt;&lt;BestFitCols&gt;False&lt;/BestFitCols&gt;&lt;BestFitRows&gt;False&lt;/BestFitRows&gt;&lt;PageStart&gt;-1&lt;/PageStart&gt;&lt;PageEnd&gt;-1&lt;/PageEnd&gt;&lt;ColStart&gt;-1&lt;/ColStart&gt;&lt;ColEnd&gt;-1&lt;/ColEnd&gt;&lt;RowStart&gt;-1&lt;/RowStart&gt;&lt;RowEnd&gt;-1&lt;/RowEnd&gt;&lt;ShowBorder&gt;True&lt;/ShowBorder&gt;&lt;ShowGrid&gt;True&lt;/ShowGrid&gt;&lt;ShowColor&gt;True&lt;/ShowColor&gt;&lt;ShowColumnHeader&gt;Inherit&lt;/ShowColumnHeader&gt;&lt;ShowRowHeader&gt;Inherit&lt;/ShowRowHeader&gt;&lt;ShowColumnFooter&gt;Inherit&lt;/ShowColumnFooter&gt;&lt;ShowColumnFooterEachPage&gt;True&lt;/ShowColumnFooterEachPage&gt;&lt;ShowTitle&gt;True&lt;/ShowTitle&gt;&lt;ShowSubtitle&gt;True&lt;/ShowSubtitle&gt;&lt;UseMax&gt;True&lt;/UseMax&gt;&lt;UseSmartPrint&gt;False&lt;/UseSmartPrint&gt;&lt;Opacity&gt;255&lt;/Opacity&gt;&lt;PrintNotes&gt;None&lt;/PrintNotes&gt;&lt;Centering&gt;None&lt;/Centering&gt;&lt;RepeatColStart&gt;-1&lt;/RepeatColStart&gt;&lt;RepeatColEnd&gt;-1&lt;/RepeatColEnd&gt;&lt;RepeatRowStart&gt;-1&lt;/RepeatRowStart&gt;&lt;RepeatRowEnd&gt;-1&lt;/RepeatRowEnd&gt;&lt;SmartPrintPagesTall&gt;1&lt;/SmartPrintPagesTall&gt;&lt;SmartPrintPagesWide&gt;1&lt;/SmartPrintPagesWide&gt;&lt;HeaderHeight&gt;-1&lt;/HeaderHeight&gt;&lt;FooterHeight&gt;-1&lt;/FooterHeight&gt;&lt;/PrintInfo&gt;&lt;TitleInfo class=&quot;FarPoint.Web.Spread.TitleInfo&quot;&gt;&lt;Style class=&quot;FarPoint.Web.Spread.StyleInfo&quot;&gt;&lt;BackColor&gt;#e7eff7&lt;/BackColor&gt;&lt;HorizontalAlign&gt;Right&lt;/HorizontalAlign&gt;&lt;/Style&gt;&lt;/TitleInfo&gt;&lt;LayoutTemplate class=&quot;FarPoint.Web.Spread.LayoutTemplate&quot;&gt;&lt;Layout&gt;&lt;ColumnCount&gt;4&lt;/ColumnCount&gt;&lt;RowCount&gt;1&lt;/RowCount&gt;&lt;/Layout&gt;&lt;Data&gt;&lt;LayoutData class=&quot;FarPoint.Web.Spread.Model.DefaultSheetDataModel&quot; rows=&quot;1&quot; columns=&quot;4&quot;&gt;&lt;AutoCalculation&gt;True&lt;/AutoCalculation&gt;&lt;AutoGenerateColumns&gt;True&lt;/AutoGenerateColumns&gt;&lt;ReferenceStyle&gt;A1&lt;/ReferenceStyle&gt;&lt;Iteration&gt;False&lt;/Iteration&gt;&lt;MaximumIterations&gt;1&lt;/MaximumIterations&gt;&lt;MaximumChange&gt;0.001&lt;/MaximumChange&gt;&lt;Cells&gt;&lt;Cell row=&quot;0&quot; column=&quot;0&quot;&gt;&lt;Data type=&quot;System.Int32&quot;&gt;0&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;0&quot; column=&quot;1&quot;&gt;&lt;Data type=&quot;System.Int32&quot;&gt;1&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;0&quot; column=&quot;2&quot;&gt;&lt;Data type=&quot;System.Int32&quot;&gt;2&lt;/Data&gt;&lt;/Cell&gt;&lt;Cell row=&quot;0&quot; column=&quot;3&quot;&gt;&lt;Data type=&quot;System.Int32&quot;&gt;3&lt;/Data&gt;&lt;/Cell&gt;&lt;/Cells&gt;&lt;/LayoutData&gt;&lt;/Data&gt;&lt;AxisModels&gt;&lt;LayoutColumn class=&quot;FarPoint.Web.Spread.Model.DefaultSheetAxisModel&quot; orientation=&quot;Horizontal&quot; count=&quot;4&quot;&gt;&lt;Items&gt;&lt;Item index=&quot;-1&quot;&gt;&lt;SortIndicator&gt;Ascending&lt;/SortIndicator&gt;&lt;/Item&gt;&lt;/Items&gt;&lt;/LayoutColumn&gt;&lt;LayoutRow class=&quot;FarPoint.Web.Spread.Model.DefaultSheetAxisModel&quot; orientation=&quot;Vertical&quot; count=&quot;1&quot;&gt;&lt;Items&gt;&lt;Item index=&quot;-1&quot; /&gt;&lt;/Items&gt;&lt;/LayoutRow&gt;&lt;/AxisModels&gt;&lt;/LayoutTemplate&gt;&lt;LayoutMode&gt;CellLayoutMode&lt;/LayoutMode&gt;&lt;CurrentPageIndex type=&quot;System.Int32&quot;&gt;0&lt;/CurrentPageIndex&gt;&lt;/Settings&gt;&lt;/Sheet&gt;" 
            SheetName="Sheet1">
        </FarPoint:SheetView>
    </sheets>
        <ClientEvents DataChanged="dataChanged" EditStopped="dataChanged" />
    <TitleInfo BackColor="#E7EFF7" ForeColor="" HorizontalAlign="Center" 
        VerticalAlign="NotSet" Font-Size="X-Large" font-bold="False" 
        font-italic="False" font-overline="False" font-strikeout="False" 
        font-underline="False">
    </TitleInfo>
    </FarPoint:FpSpread>
    <br />
    <asp:TextBox ID="TextBox1" runat="server" BackColor="#0000CC" BorderColor="Red" 
        ForeColor="White" Height="16px"></asp:TextBox>
    <br />
</div>
</form>

<script language="javascript" type="text/javascript">
    window.onload = function () {
        var spread1 = document.getElementById("FpSpread1");
                  if (document.all) { 
                    // IE
                    if (spread1.addEventListener) {
                    // IE9
        //            spread1.addEventListener("DataChanged", dataChanged, false);     
                    spread1.addEventListener("DataChanged", function () {return dataChanged("FpSpread1","1")}, false);
                    } else {
                    // Other versions of IE and IE9 quirks mode (no doctype set)
                    spread1.onDataChanged = dataChanged("FpSpread1","1");
                    }
                    else {
                    // Firefox
        //            spread1.addEventListener("DataChanged", dataChanged, false);
                    spread1.addEventListener("DataChanged", function () {return dataChanged("FpSpread1","1")}, false);
                  } 
    }

    function dataChanged(elementID, combo) {
        var tb = document.getElementById("TextBox1");
        var s = document.getElementById(elementID);
        tb.value = v.value;
        tb.value = tb.value;
    } 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:09:25.170

ASP.NET 服务器控件 ID 不是客户端 (javascript) ID。

也至于事件，以及一切。

所有的`FarPoint:FpSpread`处理都应该在 C#（或 VB？）代码隐藏中进行。

可以在 JS 中处理一些事件，但服务器控件应该以某种方式支持它。

阅读有关[asp.net 控件的更多信息](http://www.tutorialspoint.com/asp.net/asp.net_server_controls.htm)

# php - HTML 电子邮件中的动态图像（例如实时倒计时）

> ID：13570583
> 
> 赞同：4
> 
> 时间：2012-11-26T18:06:19.507
> 
> 标签：php, html, email

我一直在试图弄清楚 GAP、星巴克、Office Depot 等公司是如何能够发送带有实时倒数计时器的电子邮件的。显然，javascript 不会在电子邮件上运行，也不会闪烁。PHP可以做这样的事情吗？

这是星巴克今天早上发给我的样本。 [http://ink1003.com/p/lp/4a4d39bdf193841d.png?mi_t=BQsyGEAJvkyvB8vVgWNsoVfTVZ](http://ink1003.com/p/lp/4a4d39bdf193841d.png?mi_t=BQsyGEAJvkyvB8vVgWNsoVfTVZ)

我见过的最接近处理此问题的是付费服务[http://stylecampaign.com/blog/2010/12/dynamic-time-based-images/](http://stylecampaign.com/blog/2010/12/dynamic-time-based-images/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T06:17:04.043

这是一个 PNG（尽管动画 PNG 在某些浏览器上不起作用……这个以某种方式解决了这个问题）。

其中一些大公司从[http://movableink.com购买服务](http://movableink.com)

查看 lastminute.com 最近的时钟[http://www.movable-ink-4805.com/p/lp/aad7a5df0fdfe6be.png](http://www.movable-ink-4805.com/p/lp/aad7a5df0fdfe6be.png)

它运行 1 分钟。期望没有人会看更长的时间。

顺便说一句，您可能想查看开源项目[https://github.com/Omgitsonlyalex/EmailCountdown](https://github.com/Omgitsonlyalex/EmailCountdown)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:41:55.357

可能是动画图像，并且有一个服务器端脚本正在将图像替换为具有更少 X 帧的图像，或者正在删除帧。我能想到的唯一另一件事是计时器和 iframe，但不知道 iframe 是否可以在电子邮件中工作。

干杯!

PS 不，Php 不能做这样的事情——它在浏览器获取要解释的页面源之前在服务器端执行，所以在解释 JS 或 html 时几乎没有办法解释它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-24T09:57:56.467

检查此 [https://litmus.com/community/learning/27-how-to-add-a-countdown-timer-to-your-email](https://litmus.com/community/learning/27-how-to-add-a-countdown-timer-to-your-email)。这通过获取 PNG 并使用 PHP 脚本来创建一个倒计时的循环 GIF 来工作。

它需要一个平面 PNG，并根据 PHP 脚本中的变量对其进行超级倒计时。

当用户在收件箱中收到它时，他们会看到它循环 1 分钟并重置。但是，如果他们留下电子邮件并返回，它将再次调整为倒计时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T19:11:16.957

我没有真正的答案，但我有一个提示。您可能会看看是否可以找到熟悉 Zaplet 技术的人。他们是一家 2000 年左右的公司，由 Reactivity 团队在奥斯汀创立。他们产品的核心是发送包含动态 html 的电子邮件的想法，这样当用户查看电子邮件时，他们会看到最新的内容。例如，您可以发送一项调查，要求人们为某事投票，并且电子邮件中始终显示最新的投票结果。

无论如何，如果你能找到 Reactivity 团队的某个人，你可能会找到答案。他们的技术显然是由 Xobni 购买的，所以如果你能找到那些人，他们也可能会告诉你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T18:56:59.193

我可以想到几种方法可以做到这一点。使用 PHP 并在 apache 中进行细微的更改，您可以动态加载图像，因为`domain.com/whatever.gif`一旦知道这一点，剩下的只是对图像本身进行编码并优化代码，以便每次访问都不需要新图像，只有当有一个新的时间。

我相信这些细节可能会在短时间内被淘汰。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-04T10:09:12.710

我一般不喜欢在答案中引用特定产品，但[gifcountdown.com](http://gifcountdown.com/)做得很好。他们的具体技术是一个服务器，它可以保持打开的 HTTP 连接并在不关闭连接的情况下逐帧生成 GIF。初始设置由您用于访问图像的 URL 定义，然后服务器每秒生成并发送一个新帧，直到用户关闭连接。例如，这是他们服务的 2014 年新年 (GMT) 倒计时。

[Gif 倒计时示例 http://gifcountdown.com/europe-london/1420070400/141414/0f0f0f/aaaaaa/fdfdfd/faedad/true/counter.gif](http://gifcountdown.com/europe-london/1420070400/141414/0f0f0f/aaaaaa/fdfdfd/faedad/true/counter.gif)

# python - Django 注册。发送的激活链接缺少我的应用名称

> ID：13570584
> 
> 赞同：3
> 
> 时间：2012-11-26T18:06:19.837
> 
> 标签：python, django, django-registration

我遇到了 django-registration 模块的问题。当用户尝试注册时，他在电子邮件中收到的激活链接不正确。我的意思是，要使链接正常工作，我必须在域名之后手动添加我的应用程序名称。

让我用一个例子来解释一下：

这是主页的网址（注意“HELLOPROJECT”）： `http://127.0.0.1:8000/HELLOPROJECT/index`

这是注册网址（注意“HELLOPROJECT”）： `http://127.0.0.1:8000/HELLOPROJECT/accounts/register/`

这是电子邮件中发送的激活网址（注意没有“HELLOPROJECT”）： `http://127.0.0.1:8000/accounts/activate/3a97ec229308b0112cb6e1ef16f8ab32df667b9c/`

如果我单击上面的链接，则会发生错误。我必须手动添加“HELLOPROJECT”以使链接正常工作并注册用户。

那么，为什么会发生这种情况？我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:05:44.227

激活电子邮件模板包括

```
{{site}}/accounts/activate/{{ activation_key }}/ 
```

首先确保您的注册模板副本正确无误。然后确保您的`SITE_ID`in`settings.py`与`site`您创建的匹配。该`djangoproject.com`站点可能是默认的，并且具有 id 1。如果您编辑它的名称以匹配您的站点，则 id 将保持不变，如果您添加一个新的，找到新的 id 并将您的设置`SITE_ID`为那个。

**地点**

> 代表用户注册网站的对象；根据是否安装了 django.contrib.sites，这可能是 django.contrib.sites.models.Site （如果安装了站点应用程序）或 django.contrib.sites.models.RequestSite （如果没有）的实例。有关这些对象接口的详细信息，请参阅 Django 站点框架的文档

# algorithm - 图中的索林算法

> ID：13570587
> 
> 赞同：0
> 
> 时间：2012-11-26T18:06:39.913
> 
> 标签：algorithm, data-structures, graph

图论中的索林算法是什么？

你能写出这个算法的伪代码或者解释这个算法是如何工作的吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:12:10.113

Sollin 算法是一种用于在图上查找最小生成树 (MST) 的算法。[在这里](http://en.wikipedia.org/wiki/Bor%C5%AFvka%27s_algorithm)找到更多信息。

# php - 添加了更新时删除的 id/class

> ID：13570588
> 
> 赞同：0
> 
> 时间：2012-11-26T18:06:40.070
> 
> 标签：php, javascript, jquery

我试图`<li>`通过使用 jquery 在我的菜单中的元素上添加一个简单的类/ID。

但是，当我单击菜单选项时，jquery 成功添加了我的类/ID，但我的站点当然会更新，因为它重定向到选择的站点。

我最终得到的结果是，我的班级/ID 因为这次更新而被删除了。

我怎样才能绕过这个，所以我的类/ID 停留在选定的菜单`<li>`元素上。

我的代码如下所示：

```
 $(document).ready(function()  
 {  
    $('li').click(function()  
    {  
       $(this).addClass('selected');  
    });  
 }); 
```

这是网站： http: [//insatsplutonen.xedge.nu/](http://insatsplutonen.xedge.nu/) 通过菜单选项单击自己。如果您单击 ex: Blogg，则所选的类将被添加到`<li>`元素上，但会因页面加载而消失...

事情是我希望选定的菜单选项变成白色，而其他选项保持灰色:)

亲切的问候/哈里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:32:07.633

It seems like you are loading the page based on the query string. When I select "Blogg", I get [http://insatsplutonen.xedge.nu/?Blogg](http://insatsplutonen.xedge.nu/?Blogg)

When you load the page and check your query string and find a menu variable there, set a variable to the menu item value, and use it to set the class for the menu item accordingly. Ex. for Blogg item:

```
<li <?php echo ($queryStrVal == 'Blogg') ? 'class="selected"' : ''; ?>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:13:49.013

如果我理解您的要求，解决此问题的一种方法是设置一个页面类，例如在正文上，您可以使用该类来识别当前“选择”了哪个菜单选项。所以是这样的：

```
<body class="home">
    <ul>
        <li id="homeNav"></li>
        <li id="aboutNav"></li>
        <li id="contactNav"></li>
    </ul>
</body> 
```

那么你的CSS看起来像这样：

```
.home #homeNav,
.about #aboutNav,
.contact #contactNav {
    // whatever styles represent "selected" here
} 
```

这样，“选定”导航项始终在它所代表的页面上显示为选定状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:17:06.877

要在 jQuery 中做，找到`<a>`窗口位置的 href 并给出它的父类，也就是`li`那个类。一旦他们到达他们想要的页面就会发生这种情况，而不是当他们点击链接时，所以即使在浏览器中粘贴 URL 也会添加`.selected`到正确的`li`

```
var urlend= window.location.href.replace(window.location.origin + window.location.pathname, '');
$('a[href="' + urlend + '"]').parent().addClass("selected"); 
```

# java - 更改视角会导致弹出错误，调试视角不再起作用

> ID：13570592
> 
> 赞同：2
> 
> 时间：2012-11-26T18:06:55.747
> 
> 标签：java, eclipse, eclipse-juno

刚刚安装了 Eclipse Juno，从那时起就遇到了透视问题。除了编辑器窗口非常小并且仅限于显示器的一个角落（在调试中；在 Java 透视图中没问题）之外，我在更改透视图时遇到错误。建议？如果我不能解决这个问题，我会回到 Indigo。

当我从 Debug 透视图切换到 Java 透视图时，我得到一个标题为“出现问题”的弹出窗口。弹出窗口中的文本为：发生错误。有关详细信息，请参阅错误日志。

```
org.eclipse.ui.internal.WorkbenchPage.findPerspective(Lorg/eclipse/ui/IPerspectiveDescriptor;)Lorg/eclipse/ui/internal/Perspective;

The error log shows a stacktrace which starts:
!ENTRY org.eclipse.ui.workbench 4 2 2012-11-26 12:56:50.841
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.ui.workbench".
!STACK 0
java.lang.NoSuchMethodError: org.eclipse.ui.internal.WorkbenchPage.findPerspective(Lorg/eclipse/ui/IPerspectiveDescriptor;)Lorg/eclipse/ui/internal/Perspective;
    at com.google.gdt.eclipse.suite.GdtPlugin.maybeAddNewWizardActionsToPerspective(GdtPlugin.java:302)
    at com.google.gdt.eclipse.suite.GdtPlugin.access$0(GdtPlugin.java:295)
    at com.google.gdt.eclipse.suite.GdtPlugin$1.perspectiveActivated(GdtPlugin.java:206)
    at org.eclipse.ui.internal.PerspectiveListenerList$1.run(PerspectiveListenerList.java:74)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.runtime.Platform.run(Platform.java:857)
    at org.eclipse.ui.internal.PerspectiveListenerList.fireEvent(PerspectiveListenerList.java:58)
    at org.eclipse.ui.internal.PerspectiveListenerList.firePerspectiveActivated(PerspectiveListenerList.java:72)
    at org.eclipse.ui.internal.WorkbenchWindow.firePerspectiveActivated(WorkbenchWindow.java:1260)
    at org.eclipse.ui.internal.WorkbenchPage$4.handleEvent(WorkbenchPage.java:2834) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:12:52.963

请尝试以下步骤：

1.  `eclipse`以 clean 选项开始`eclipse -clean`。如果您使用的是快捷方式，请转到属性并添加`-clean`.`target`

2.  转到`debug`透视图，右键单击右上角的`debug`图标并选择`reset`。

希望这可以解决您的问题。

# php - 更改选择标签属性值

> ID：13570604
> 
> 赞同：0
> 
> 时间：2012-11-26T18:07:49.847
> 
> 标签：php, javascript

我有一个下拉菜单。默认情况下，它只允许在所有选项中进行选择。我想创建一个复选框，选中该复选框应更改该下拉菜单以允许选择多个选项。我怎样才能做到这一点？

```
<select id="test" name="host">
    <option value="host1">host1</option>
    <option value="host2">host2</option>
    .....
    .....
</select> 
```

我希望在选中复选框后将其更改为以下内容。

```
<select id="test" name="host" multiple="multiple">
    <option value="host1">host1</option>
    <option value="host2">host2</option>
    .....
    .....
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:16:40.580

你需要为此使用javascript..使用一个名为'JQuery'的库，它使它非常简单..

[工作演示](http://jsfiddle.net/QU9nw/)

```
$("#checkbox_id").change(function(){
    if($(this).is(':checked'))
       $("#test").attr('multiple', 'multiple');
}); 
```

**编辑：**用于恢复..

[工作演示](http://jsfiddle.net/QU9nw/3)

```
$("#checkbox_test").change(function(){
    if($(this).is(':checked'))
       $("#test").attr('multiple', 'multiple');
    else
       $("#test").removeAttr('multiple');
}); 
```

# regex - 正则表达式未能剥离字符串

> ID：13570605
> 
> 赞同：-1
> 
> 时间：2012-11-26T18:07:54.427
> 
> 标签：regex

我有一个骆驼端点uri

```
file:///test/csv?sortBy=file:name&include=.*.csv&move=done 
```

我正在使用正则表达式来解析文件名，我使用的正则表达式是`.*?:(.*)\??.*`

但它未能剥离选项并返回整个字符串

```
///test/csv?sortBy=file:name&include=.*.csv&move=done 
```

而预期的结果是`///test/csv`

我的模式有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:13:38.750

我建议您不要使用正则表达式来解析 URI，而是使用毫无疑问存在于您使用的任何语言中的功能。

如果您使用 PHP，请[访问 http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

如果您使用 Perl，请使用 URI 模块：[http ://search.cpan.org/dist/URI/URI.pm](http://search.cpan.org/dist/URI/URI.pm)

最好使用现有的、经过测试的代码而不是编写自己的代码，而且不要误会，正则表达式就是代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:12:03.533

您不能在模式中包含任何会消耗问号及其他内容的内容，即问题是您将文字问号及其后面的所有内容与`\?.*`

相反，您可以匹配除问号以外的所有内容：

```
^.*?:([^?]*) 
```

这将匹配所有内容，直到遇到第一个问号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:12:24.173

而不是 using `(.*)`， use`([^?]*)`这将匹配，直到有一个`?`.

这是你需要改变的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:13:02.437

使用这个正则表达式：

```
^[^:]+:([^\?]+) 
```

[现场演示](http://www.rubular.com/r/w1bEHTbs55)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T18:13:30.910

`.*`您在应该有更具体的东西的地方使用了太多：

```
^[a-z]+:([^?#]*) 
```

您的模式使用`(.*)`，因此它首先尝试匹配整个字符串。然后是`\??`，这是一个可选的问号（所以如果它丢失了也没关系），然后`.*`是 ，这是一个可选的任何东西。最终结果是`(.*)`匹配所有内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T19:21:15.967

我不确定**您指的是哪个文件名**，如果是请求 uri，还是作为参数的文件名。

* * *

如果请求 uri，则使用：

```
(?<=\/)[^\/][^\?]+ 
```

检查**[这个演示](http://www.rubular.com/r/Zr3htNRAzK)**。

如果是参数列表中的一个，则使用：

```
(?<==file:)[^&]+ 
```

检查**[这个演示](http://www.rubular.com/r/ZspxuWf2GI)**。

# sql - 关于左连接 SQL 的困惑

> ID：13570612
> 
> 赞同：-1
> 
> 时间：2012-11-26T18:08:26.793
> 
> 标签：sql, database, left-join

我必须编写一个`LEFT JOIN`查询来查找确实存在于一个表中并存在于另一个表中的记录（左连接的标准用途）。此表中只有一张表用于连接。

表名：`products`

加入条件栏：`prdname`

两个where子句条件：`subdivision='abc', subdivision='xyz'`

**客观的**

使用这两个 where 子句，我将得到两个包含两组 prdname 的结果，我必须找到在一个中存在但在另一个中不存在的 prdname。

* * *

当我编写标准时`LEFT JOIN`（下面的案例 2），它没有给出任何不正确的结果，所以我编写了一个子查询来检查结果。这是 8 条记录，所以我决定在这里将查询修改为 case1，并且它起作用了。

我的疑问是它们两者几乎相同，那么为什么第二个不正确？

谁能帮我？

此外，`abc`并且`xyz`是随机值，所以非常关心它们。

**它工作的案例：**

```
SELECT a.prdname
FROM   products a
       LEFT OUTER JOIN (SELECT prdname
                        FROM   products
                        WHERE  subdivision = 'xyz') b
                    ON a.prdname = b.prdname
WHERE  a.subdivision = 'abc'
       AND b.prdname IS NULL 
```

**不工作的情况**

```
SELECT DISTINCT( a.prdname )
FROM   products a
       LEFT OUTER JOIN products b
                    ON a.prdname = b.prdname
WHERE  a.subdivision = 'abc'
       AND b.subdivision = 'xyz'
       AND b.prdname IS NULL 
```

**要测试的子查询查询**

```
SELECT DISTINCT( prdname )
FROM   products
WHERE  subdivision = 'abc'
       AND prdname NOT IN (SELECT DISTINCT prdname
                           FROM   products
                           WHERE  subdivision = 'xyz') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:14:56.757

通过在“外部”表的列上添加`WHERE`条件，您实际上是将外部联接转变为内部联接，因为那些不满足联接条件的行将`NULL`在这些列中具有值。并且比较`NULL`从结果中删除这些行。

您需要将该条件移动到 JOIN 子句中：

```
SELECT a.prdname
FROM   products a
  LEFT JOIN products b
         ON a.prdname = b.prdname
        AND b.subdivision = 'xyz'
WHERE  a.subdivision = 'abc'
   AND b.prdname IS NULL; 
```

为了让事情更清楚一点，这里有一个简化的例子。

假设下表：

### 人

```
编号 | 名字 | 姓  
---+-----------+------------
1 | 亚瑟 | 凹痕      
4 | 玛丽 | 影星
2 | 赞福德 | 比伯布罗克斯
3 | 翠西娅 | 麦克米利安

```

### 车辆

```
编号 | 人名 | 车辆名称
---+-----------+-------------
1 | 1 | 亚瑟的车
2 | 2 | 赞福德的车

```

现在获取所有人及其车辆：

```
select p.id,
       p.firstname, 
       v.vehicle_name
from person p 
   left outer join vehicle v on p.id = v.person_id; 
```

这将返回以下内容：

```
编号 | 名字 | 车辆名称
---+-----------+-------------
1 | 亚瑟 | 亚瑟的车
2 | 赞福德 | 赞福德的车
3 | 翠西娅 | （空值）      
4 | 玛丽 | （空值）      

```

现在想想当你添加时会发生什么

```
and v.vehicle_name = 'Arthur''s car' 
```

到查询。vehicle_car 为 null 的两行将不满足该条件，因此从结果中删除。

* * *

现在到你真正的问题：

要查找细分 'xyz' 中不存在的细分 'abc' 的产品，您可以使用 except 运算符：

```
select prdname
from products
where subdivision = 'abc'
except
select prdname
from products
where subdivision = 'xyz'; 
```

（对于 Oracle，您必须替换`except`为`minus`）

# postgresql - 理解 Postgres 行大小

> ID：13570613
> 
> 赞同：25
> 
> 时间：2012-11-26T18:08:35.327
> 
> 标签：postgresql, database-design, types, storage

我有一个大的（> 100M 行）Postgres 表，其结构为 {integer, integer, integer, timestamp without time zone}。我预计行的大小为 3*integer + 1*timestamp = 3*4 + 1*8 = 20 字节。

实际上，行大小为`pg_relation_size(tbl) / count(*)`= 52 字节。为什么？

（没有对表进行删除：`pg_relation_size(tbl, 'fsm')`~= 0）

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-26T18:23:42.023

行大小的计算比这复杂得多。

存储通常划分为 8 kB**数据页**。每页有一个小的固定开销，可能的剩余部分不足以容纳另一个元组，更重要的是死行或最初与`FILLFACTOR`设置一起保留的百分比。

**每行**（元组）还有更多开销：页面开头的 4 个字节的项目标识符、`HeapTupleHeader`23 个字节和***对齐填充***。元组头的开始和元组数据的开始以 的倍数对齐，`MAXALIGN`在典型的 64 位机器上是 8 个字节。某些数据类型需要与 2、4 或 8 字节的下一个倍数对齐。

[引用系统表上的手册`pg_tpye`：](https://www.postgresql.org/docs/current/catalog-pg-type.html)

> `typalign`是存储此类型值时所需的对齐方式。它适用于磁盘上的存储以及 PostgreSQL 中值的大多数表示。当多个值连续存储时，例如在磁盘上表示完整行时，在这种类型的数据之前插入填充，以便它从指定的边界开始。对齐参考是序列中第一个基准的开始。
> 
> 可能的值为：
> 
> *   `c`=`char`对齐，即不需要对齐。
>     
>     
> *   `s`=`short`对齐（在大多数机器上为 2 个字节）。
>     
>     
> *   `i`=`int`对齐（大多数机器上为 4 个字节）。
>     
>     
> *   `d`=`double`对齐（在许多机器上为 8 个字节，但绝不是全部）。

[在此处](https://www.postgresql.org/docs/current/storage-page-layout.html)阅读手册中的基础知识。

### 你的例子

这会在 3`integer`列之后产生 4 字节的填充，因为该`timestamp`列需要`double`对齐并且需要从下一个 8 字节的倍数开始。

所以，一行占用：

```
 23   -- heaptupleheader
 +  1   -- padding or NULL bitmap
 + 12   -- 3 * integer (no alignment padding here)
 +  4   -- padding after 3rd integer
 +  8   -- timestamp
 +  0   -- no padding since tuple ends at multiple of MAXALIGN 
```

加上页眉中每个元组的项目标识符（如[注释中的@AH 指出的那样](https://stackoverflow.com/questions/13570613/making-sense-of-postgres-row-sizes#comment18595022_13570853)）：

```
 +  4   -- item identifier in page header
------
 = 52 bytes 
```

所以我们得到了观察到的**52 个字节**。

计算`pg_relation_size(tbl) / count(*)`是悲观估计。`pg_relation_size(tbl)`包括膨胀（死行）和保留的空间`fillfactor`，以及每个数据页和每个表的开销。（我们甚至没有提到[TOAST 表](https://www.postgresql.org/docs/current/storage-toast.html)`varlena`中长数据的压缩，因为它不适用于这里。）

您可以安装附加模块[pgstattuple](https://www.postgresql.org/docs/current/pgstattuple.html)并调用`SELECT * FROM pgstattuple('tbl_name');`有关表和元组大小的更多信息。

有关的：

*   [表格大小与页面布局](https://stackoverflow.com/questions/13524222/table-size-with-page-layout/13525950#13525950)
*   [在 PostgreSQL 中计算和节省空间](https://stackoverflow.com/questions/2966524/calculating-and-saving-space-in-postgresql/7431468#7431468)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T18:15:49.603

每行都有与之关联的元数据。正确的公式是（假设天真的对齐）：

```
3 * 4 + 1 * 8 == your data
24 bytes == row overhead
total size per row: 23 + 20 
```

或大约 53 个字节。实际上，我专门编写了[postgresql-varint](https://github.com/sean-/postgresql-varint)来帮助解决这个确切用例的问题。您可能想查看[类似的帖子](https://stackoverflow.com/questions/2966524/calculating-and-saving-space-in-postgresql/)以获取更多详细信息：元组开销。

# android - AChartEngine 上的错误（折线图）

> ID：13570615
> 
> 赞同：2
> 
> 时间：2012-11-26T18:08:43.007
> 
> 标签：android, graph, achartengine

我在图表上遇到问题，其中添加图形布局会出现我无法解决的异常。使用`getBarChartView ()`有效，但是当我更改为`getLineChartView`问题时。下面举个例子。

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final GraphicalView gv =createIntent();       
        RelativeLayout rl=(RelativeLayout)findViewById(R.id.lytGraficoVendaDiariaBarra);   
        rl.addView(gv);                
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public GraphicalView createIntent() {
        String[] titulos = new String[] { "Valor Faturado" };       
        int[] colors = new int[] { Color.parseColor("#0066FF")};        
        XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
        List<double[]> valores = new ArrayList<double[]>();
        valores.add(new double[] { 5230, 7300, 9240, 10230, 11300, 10040});
        renderer.setXLabels(1);   
        renderer.setYLabels(10);    
        renderer.addXTextLabel(1, "01/12");  
        renderer.addXTextLabel(2, "02/12");   
        renderer.addXTextLabel(3, "03/12");  
        renderer.addXTextLabel(4, "04/12");   
        renderer.addXTextLabel(5, "05/12");   
        renderer.addXTextLabel(6, "06/12");    
        renderer.addXTextLabel(7, "07/12");    
        int length = renderer.getSeriesRendererCount();   
        for (int i = 0; i < length; i++) {     
            SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);   
            seriesRenderer.setDisplayChartValues(true);           
        }

//        final GraphicalView grfv = ChartFactory.getBarChartView(getBaseContext(), buildBarDataset(titulos, valores), renderer, Type.DEFAULT);
        final GraphicalView grfv = ChartFactory.getLineChartView(getBaseContext(), buildBarDataset(titulos, valores), renderer);

        return grfv; 
        }    

    protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) {
        XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();     
        renderer.setAxisTitleTextSize(15);      
        renderer.setChartTitleTextSize(20);     
        renderer.setLabelsTextSize(10);             
        renderer.setLegendTextSize(15);     
        renderer.setBarSpacing(1);      
        renderer.setMarginsColor(Color.parseColor("#E0E0E0"));      
        renderer.setXLabelsColor(Color.BLACK);       
        renderer.setYLabelsColor(0,Color.BLACK);                  
        renderer.setApplyBackgroundColor(true);     
        renderer.setBackgroundColor(Color.parseColor("#FBFBFC"));       
        renderer.setOrientation(Orientation.HORIZONTAL);        
        renderer.setZoomButtonsVisible(true); 
        int length = colors.length;     
        for (int i = 0; i < length; i++) {         
            SimpleSeriesRenderer col = new SimpleSeriesRenderer();          
            col.setColor(colors[i]);                
            col.setChartValuesSpacing(15);  
            renderer.addSeriesRenderer(col);     
        }       
        setChartSettings(renderer, "Vendas Diárias", "Dias", "Valores", 0.5, 12.5, 0, 24000, Color.BLACK, Color.BLACK);     
        return renderer;     
        }       
    protected XYMultipleSeriesDataset buildBarDataset(String[] titulos, List<double[]> valores) {   
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();     
        int length = titulos.length;    
        for (int i = 0; i < length; i++) {  
            CategorySeries series = new CategorySeries(titulos[i]);    
            double[] v = valores.get(i);       
            int seriesLength = v.length;      
            for (int k = 0; k < seriesLength; k++) {   
                series.add(v[k]);        
                }           
            dataset.addSeries(series.toXYSeries());     
            }         
        return dataset;     
    }   
    protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle, String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,              int labelsColor) {         
        renderer.setChartTitle(title);      
        renderer.setYLabelsAlign(Align.RIGHT);  
        renderer.setXTitle(xTitle);      
        renderer.setYTitle(yTitle);     
        renderer.setXAxisMin(xMin);        
        renderer.setXAxisMax(xMax);        
        renderer.setYAxisMin(yMin);     
        renderer.setYAxisMax(yMax);      
        renderer.setMargins(new int[] { 30, 40, 10, 40 });     
        renderer.setAxesColor(axesColor);      
        renderer.setLabelsColor(labelsColor);                       
    }   
} 
```

布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/lytGraficoVendaDiariaBarra"
    android:layout_width="match_parent"
    android:orientation="horizontal"
    android:layout_height="match_parent" >
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:54:10.983

您从 AChartEngine 演示中复制`buildBarDataset()`和复制。`buildBarRenderer()`使用`buildDataset()`和`buildRenderer()`用于折线图。

# xpages - 是否存在与 @AttachmentModifiedTimes 等效的 Java/SSJS？

> ID：13570624
> 
> 赞同：1
> 
> 时间：2012-11-26T18:09:24.840
> 
> 标签：xpages, xpages-ssjs

我想显示附件列表并且 FileDownload 控件不是一个选项（每个文件都需要自定义操作）。

要获取附件的名称和大小，有`EmbeddedObject`. AFAIK，要获得修改的附件时间，只有一个选项：使用纯@Formula，通过`session.evaluate`或查看包含@AttachmentModifiedTimes 的列。

有没有办法（Java/SSJS）在没有本机@Formulas 的情况下获取附件的修改（和创建）时间？这意味着与 $FILE 项目的文档属性中显示的文件一起存储的日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:54:07.960

您可以使用 document1.getAttachmentList("rt_field_name") 将重复控件添加到页面并将其绑定到附件（存储在富文本字段中）。该列表中的每个项目都是类的对象

```
com.ibm.xsp.model.domino.wrapped.DominoDocument$AttachmentValueHolder 
```

该类有一个**getLastModified()**方法，它以 Double 形式返回最后修改时间。

A 在 Web 上找不到显示完整 API 的参考，但如果您使用 XPage 调试工具栏中的 API Inspector（对不起，无耻的插件...），您可以使用以下命令查看所有属性和方法：

getComponent('id_of_repeat_control').getDataModel().getRowData()

**更新**

[在这里](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/model/domino/wrapped/DominoDocument.AttachmentValueHolder.html)找到API ，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:47:39.060

我不是 100% 确定你想要实现什么。一般来说，您可以使用 @AttachmentModifiedTimes() - 以及 @AttachmentNames() - 作为 SSJS。

# r - 组间分布的视觉比较：如何修改“不对称 beanplots”的尺度？

> ID：13570629
> 
> 赞同：4
> 
> 时间：2012-11-26T18:09:42.213
> 
> 标签：r, plot, scale, distribution

我最近遇到了 R-package *beanplot*并提供了在一个图中绘制两个子组分布的可能性（*特殊的不对称 beanplot*）。您可以在[Journal of Statistical Software](http://www.jstatsoft.org/v28/c01/paper)和[cran.r-project.org](http://cran.r-project.org/web/packages/beanplot/beanplot.pdf)上找到该软件包的描述。

我使用以下**代码**制作了一个不对称的 beanplot ：

```
library(psych) 
library(beanplot)

var1 <-c(20,33,NA,39,NA,40,34,33,NA,38,NA,8,7,NA,NA,40,34,24,25,36,40,37,34,NA,35)
var2 <- c(1,0,1,1,1,0,1,0,1,NA,1,0,0,0,0,1,1,0,1,0,1,1,NA,0,1)
mydata<-data.frame(var1,var2) 
table(mydata)

par(lend = 1, mai = c(0.8, 0.8, 0.5, 0.5))
beanplot(var1 ~ var2, data= mydata,  side = "both",log="", 
what=c(1,1,1,0), border = NA, col = list("black", c("grey", "white")))
legend("bottomleft", fill =c("black", "grey"), legend = c("no", "yes")) 
```

生成的图很好地显示了两个子组分布的不同形状。

![非对称 beanplot](../Images/59a4b187acc91fe9716f86a1fe8950c1.png)

**问题**

因变量的测量范围为 7 到 40。但是，y 轴似乎从 -1 到 +55。

如果有人能解释如何修改比例，那就太好了，即这里实际绘制的内容。有没有办法使用原始比例绘制分布？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:20:37.480

`beanplot`使用`density`. 估计的密度可以为超出观测数据范围的区域提供质量。你可以试试这个来了解密度的作用——`plot(density(1:2))`你应该看到它只是取以数据点为中心的高斯密度的平均值（请注意，你可以使用不同的内核，因为`beanplot`它允许你指定内核参数） . 它如何为该高斯选择方差取决于您，但默认情况下，它看起来像 beanplot 使用`bw.SJ`“dpi”方法来选择带宽。

您可以使用 cutmin 和 cutmax 来控制 beanplot 实际绘制的范围，但这实际上并不会改变密度估计。

# java - 任何人都可以将这个 A[] 和 B[] 连接到数组 C[] 中吗？

> ID：13570631
> 
> 赞同：0
> 
> 时间：2012-11-26T18:09:50.160
> 
> 标签：java, arrays

我在编写下面的代码时犯了错误，但我没有得到 C[] 的结果，因为我想在 C[] 中同时查看 A[] 和 B[] 值！正如您在下面的代码中看到的那样，我尝试过但没有成功。

```
public class ascending {

/**
 * @param args
 */
//@SuppressWarnings("null")
public static void main(String[] args) {
    // TODO Auto-generated method stub

    int A [] = {1,2,3,4,5};
    int B [] = {6,7,8,9,10};
    int C[] = null;

    int la = A.length;
    int lb = B.length;
    int lc = A.length + B.length;

    System.out.print("ARRAYS in A: ");

    for(int x = 0; x<la;x++){
        System.out.print("  "+A[x]);
    }

    System.out.println(" ");

    System.out.print
    ("ARRAYS in B: ");

    for(int y=0;y<lb;y++){
        System.out.print(" "+B[y]);
    }

    System.out.println(" ");

    System.out.print("Arrays in C: ");

    for(int z = 0; z<lc; z++){
        System.out.print(" "+C[z]);
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:12:29.613

你也不是

*   分配`C`数组`int[] C = new int[size]`
*   `C`通过`C[x] = A[y]`或复制元素`C[x] = B[y]`

实际上，您根本没有使用`C`过，这就是为什么您没有遇到任何异常：如果您尝试访问该数组，您将得到一个`NullPointerException`（因为当前代码段中的 C 是`null`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:12:36.200

> 查看C[] 中的`A[]`和值`B[]`

要在 中查看这些值`C[]`，您必须做两件事：

1.  为 分配内存`C[]`。
2.  `A[]`将和的元素复制`B[]`到`C[]`.

由于这看起来很像家庭作业，所以我不会详细说明解决方案，让您自己解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:13:37.057

一种简单的解决方案可以是：

```
int[] c = ArrayUtils.addAll(a, b); 
```

使用[Apache Commons Lang 库。](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#addAll%28T%5B%5D,%20T...%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:13:51.897

作为另一种选择，通过使 C 成为 2D 数组，您可以更轻松地进行迭代，并且不会花费额外的空间。

```
int[][] C = {A,B};

for(int i=0; i < C.length; i++)
{
   for( int j=0; j < C[i].length; j++)
        System.out.println(C[i][j]);
} 
```

# com - 如何找到 COM 对象的 ActiveX ClassID？

> ID：13570637
> 
> 赞同：2
> 
> 时间：2012-11-26T18:10:34.640
> 
> 标签：com, activex

我开发了一个 ActiveX 控件的集成。问题是在开发过程中，创建了一个新版本，这意味着有一个不同的 ActiveX 类 ID。

有什么方法可以在不联系开发人员的情况下确定 COM 对象的 Program ID 和 ActiveX 类 ID？

在线研究时，我发现了对 OLE/COM 对象查看器的引用，但似乎没有任何方法可以在扩展每个节点之外进行搜索。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:34:41.880

如果您有 COM 服务器的类型库并且可以使用 Oleview.exe 查看它，那么您当然可以看到 CLSID。您不必查看树中的每个节点，只有**coclass**节点是相关的。

但是，您无法在类型库中看到 ProgId。找到它的一种方法是使用 Regedit.exe 中的 Edit + Find 命令，粘贴您从类型库中获得的 CLSID guid。

当您使用 SysInternals 的 ProcMon 实用程序时，您将获得一切。启动它，然后使用 Regsvr32.exe 注册服务器。您将在 ProcMon 输出中看到程序写入注册表项的跟踪。

# python - Pycharm 和 Google App Engine 呈现请求的帖子数据的问题

> ID：13570644
> 
> 赞同：1
> 
> 时间：2012-11-26T18:11:22.273
> 
> 标签：python, google-app-engine

我是一个应用程序开发菜鸟。我正在使用 pycharm 进行编码，并将其与谷歌应用程序引擎链接起来，因此我可以使用 JetBrains 提供的便捷运行和调试功能来测试我的代码。我在同一目录中有一个名为 validation.py 的单独文件，其中包含真正的 valid_month、valid_day、valid_year 函数。我遇到的问题是这个（此时我很困惑）。这段代码早些时候生成了一个显示表单数据的html页面（我认为这与我的get（self）函数被更改为write_form有关，因为它不是更早的），但即使表单数据是显示，我将输入用户所需的信息，该页面将像“get”一样操作数据并将数据放入 URL。现在，使用 write_form 我' 我什至没有生成页面我只是得到错误。请记住，我是通过 CS253 Udacity Web 开发课程来完成这项工作的，所以我的代码模仿了课堂上的代码，但我使用的是 webapp 而不是 webapp2。

**这是代码**

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp import util
from validation import valid_day, valid_month, valid_year

months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
month_abbvs = dict((m[:3], m) for m in months)

def valid_month(user_month):
    return True

def valid_day(user_day):
    return True

def valid_year(user_year):
    return True

form ="""
<form method="post">
    What is your birthday?
    <br>
    <label>Month <input type="text" name="month" value="%(month)s"></label>
    <br>
    <label>Day <input type="text" name="day" value="%(day)s"></label>
    <br>
    <label>Year <input type="text" name="year" value="%(year)s"></label>
    <div style="color:red">%(error)s</div>
    <br>
    <br>
    <input type="submit">
</form>
"""

class OTWHandler(webapp.RequestHandler):

    def write_form(self, error=""):
        self.response.out.write(form % {"error": error})

    def get(self):
        self.write_form()

    def post(self):
        user_month = valid_month(self.request.get('month'))
        user_day = valid_day(self.request.get('day'))
        user_year = valid_year(self.request.get('year'))

        if not (user_month and user_day and user_year):
            self.write_form("Invalid entry")
        else:
            self.response.out.write("That is totally a valid day!")

def main():
    app = webapp.WSGIApplication([('/', OTWHandler)], debug=True)
    util.run_wsgi_app(app) 
```

**这是错误**

```
Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\Madrigal\PycharmProjects\OTW\otw.py", line 42, in get
    self.write_form()
  File "C:\Users\Madrigal\PycharmProjects\OTW\otw.py", line 39, in write_form
    self.response.out.write(form % {"error": error})
KeyError: 'month' 
```

非常感谢您的回复。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:20:38.277

该问题与您传递给`form`字符串的字典有关。如果你看一下你的`form`，你会看到看起来像这样的值`%(month)s`——这意味着`form`期待一个被调用的参数`month`被传递给它，并且它将返回相应的值。现在的问题是您（我假设）向`GET`页面发出请求，当发生这种情况时，您传递给的值字典`form`只有一个值 - `error`。因此，当`form`查找时`month`，它找不到任何东西并返回 KeyError。

一个简单的例子可以做到这一点：

```
def write_form(self, error=""):
    test_date = datetime.date(2012, 11, 26)
    my_values = {
        'month': test_date.month, 
        'day': test_date.day, 
        'year': test_date.year, 
        'error': error
        }
    self.response.out.write(form % my_values) 
```

将日期参数作为函数的一部分会更好，但希望这个概念是有意义的——对于你的每个`%(something)`格式化字符串`form`，你需要传入一个相应的键/值参数，以便它知道要加载什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:17:52.313

顺便说一句，我已经改变了这一点。我猜在我这样做之前复制了代码。

```
def write_form(self, error="", month="", day="", year=""):
   self.response.out.write(form % {"error": error, "month": month, "day": day, "year": year} ) 
```

# java - 预压缩、GWT 和 Tomcat

> ID：13570647
> 
> 赞同：2
> 
> 时间：2012-11-26T18:11:32.510
> 
> 标签：java, gwt, tomcat

我正在使用 tomcat 6 和 7。我正在尝试创建一个过滤器来查找“resourceName”+ .gz，然后将请求转发到该资源（如果存在）（并且浏览器支持 gzip）。

我试过这个

```
httpServletRequest.getRequestDispatcher(newUri).forward(httpServletRequest, response); 
```

但是，这是行不通的。问题是，一旦执行了转发，就会使用 application/x-gzip 的内容类型提交响应。内容类型应该是没有 .gz 扩展名的任何内容类型。

我尝试将 mime-types 添加到 web.xml 文件中，但这似乎不起作用

```
<mime-mapping>
    <extension>js</extension>
    <mime-type>text/javascript</mime-type>
</mime-mapping>
<mime-mapping>
    <extension>js.gz</extension>
    <mime-type>text/javascript</mime-type>
</mime-mapping> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:23:00.533

静态资源的 Gzip 由 tomcat server.xml 中的配置设置，如以下博客[http://viralpatel.net/blogs/enable-gzip-compression-in-tomcat/中提供的](http://viralpatel.net/blogs/enable-gzip-compression-in-tomcat/)

来自项目的示例 server.xml 片段 -

```
<Connector port="8080" protocol="HTTP/1.1" acceptCount="100"
        connectionTimeout="20000" redirectPort="8443" maxHttpHeaderSize="8192"
        maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
        enableLookups="false" disableUploadTimeout="true" compression="on"
        compressionMinSize="2048"
        compressableMimeType="text/html,text/xml,text/plain,text/javascript,text/css" /> 
```

# ios - UIView 幻灯片动画使用块代替？

> ID：13570648
> 
> 赞同：0
> 
> 时间：2012-11-26T18:11:32.010
> 
> 标签：ios, animation, uiview, slide, block

如何让以下动画分块工作？

（我需要键盘在过渡动画的完成处理程序中消失）

```
- (void) showNewViewAnimatedSlideAscending:(BOOL)isAscending {
    UIView * oldView = self.myView;
    UIView * newView = self.myView;
    UIView * superView = self.myView.superview;

    [oldView removeFromSuperview];
    [superView addSubview:newView];

    // set up an animation for the transition between the views
    CATransition *animation = [CATransition animation];
    [animation setDuration:0.3];
    [animation setType:kCATransitionPush];
    if(isAscending) {
        [animation setSubtype:kCATransitionFromRight];
    } else {
        [animation setSubtype:kCATransitionFromLeft];
    }
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

    [[superView layer] addAnimation:animation forKey:@"myTransitionAnimation"];
    if(self.keyboardVisible) {
        [self.view endEditing:YES];
    }
} 
```

ps; 我知道，我正在删除并显示相同的视图。此视图在调用此方法之前已接收到新数据。不知何故，视图正确显示，仅在“新”视图中显示新数据。

# xml - 使用 xquery 删除目录内容

> ID：13570650
> 
> 赞同：0
> 
> 时间：2012-11-26T18:11:39.847
> 
> 标签：xml, xquery, marklogic

我想在不删除目录本身的情况下清空 MarkLogic 中的目录 ($directory) 的内容。使用 XQUERY 我尝试了以下方法：

```
let $_ := xdmp:directory-delete( $directory )
return xdmp:directory-create( $directory ) 
```

并作为一系列操作：

```
(xdmp:directory-delete( $directory ), xdmp:directory-create( $directory )) 
```

我收到错误“目录已存在”。

我可以尝试遍历目录中的每个文件并删除它们，但这会留下目录本身。我想完全清除目录的所有内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:37:12.863

我发现您必须使用 xdmp:eval() 函数在不同的事务中运行这些命令中的每一个。执行以下操作将起作用。

```
let $deleteCommand := "declare variable $directory as xs:string external; xdmp:directory-delete($directory)"
let $createCommand := "declare variable $directory as xs:string external; xdmp:directory-create($directory)"
let $_ := xdmp:eval($deleteCommand, (xs:QName("directory"), $directory),<options xmlns="xdmp:eval"><isolation>different-transaction</isolation><prevent-deadlocks>false</prevent-deadlocks></options>)
let $_ := xdmp:eval($createCommand, (xs:QName("directory"), $directory),<options xmlns="xdmp:eval"><isolation>different-transaction</isolation><prevent-deadlocks>false</prevent-deadlocks></options>)
return $_ 
```

在 eval 中运行其中一个命令并调用另一个命令不起作用，因为这会产生死锁。

尽管有这个答案，但我仍然对删除目录内容（如果有人有的话）的解决方案感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:45:52.787

我会简单地删除目录并停在那里。使用 MarkLogic，您几乎不需要在`xdmp:directory-create`表示的意义上存在目录。

有关更长的故事，请参阅[http://blakeley.com/blogofile/2012/03/19/directory-assistance/](http://blakeley.com/blogofile/2012/03/19/directory-assistance/)。

# facebook - Facebook 时间线 - 活动日志 - 图形 API - FQL 仅基于当前值查询所有返回数据（主要错误？）

> ID：13570652
> 
> 赞同：5
> 
> 时间：2012-11-26T18:11:46.090
> 
> 标签：facebook, facebook-graph-api, stream, facebook-fql

我们正在编写一个 FQL 查询，它使用 READ_STREAM 来查看该朋友何时更改了他们的关系状态（并将该信息公开）和/或当前城市。在这种情况下，此人的当前 relationship_status 设置为“单身”。然后，我们运行查询以查看用户何时从“恋爱中”变为“单身”。

```
SELECT post_id, created_time, source_id, actor_id, target_id, message, description, type FROM stream WHERE source_id = 100003540518168 and (strpos(description, 'relationship') >= 0 or strpos(description, 'Relationship') >= 0 or strpos(description, 'single') >= 0 or strpos(description, 'Single') >= 0) LIMIT 500 
```

它返回朋友从恋爱变为单身的那些实例，而不返回任何显示她何时进入该关系的信息（查询只查找单词，而不是特定顺序的单词，任何无论如何都应该出现关系和单身这两个词）。现在，让我们将她当前的 relationship_status 更改为“In a Relationship”并运行完全相同的查询。

```
SELECT post_id, created_time, source_id, actor_id, target_id, message, description, type FROM stream WHERE source_id = 100003540518168 and (strpos(description, 'relationship') >= 0 or strpos(description, 'Relationship') >= 0 or strpos(description, 'single') >= 0 or strpos(description, 'Single') >= 0) LIMIT 500 
```

它只返回显示她何时建立关系的数据，而没有提及她成为单身的任何事情，即使我们清楚地知道该数据存在于我们之前的查询中。

我们使用“当前城市”变量复制了相同的内容。如果您已将当前城市列为加利福尼亚州洛杉矶，则更新您的时间线以反映您搬到另一个城市（例如加利福尼亚州圣莫尼卡）的所有历史您最初住在洛杉矶的所有历史。但是，如果您将“当前城市”更改回洛杉矶，那么您在洛杉矶居住的所有时间都会返回并且现在可以使用，而不会提及圣莫尼卡。这证明它并不特定于关系状态。

这不仅在 API 中，而且在我自己的 Facebook 网站上的活动日志中。将关系状态更改为恋爱中 ![在此处输入图像描述](../Images/287e81736506abd51731e9ab8189a761.png) 后： 将关系状态更改回单身后： ![在此处输入图像描述](../Images/e0f61dd199c26a44947d71c4ab6ee572.png)

如果 Timeline 应该是您与 Facebook 分享的生活历史，那么不应该所有更改、移动、通过 Graph API、FQL 查询和在活动日志中列出（如果用户已信息公开）？数据显然在 API 中，但是，它仅根据您当前的设置提供。这是一个错误吗？是否有一种解决方法可以在一次调用中获取所有数据，而不仅仅是基于用户的当前设置？

# objective-c - 为计算器制作退格按钮

> ID：13570657
> 
> 赞同：1
> 
> 时间：2012-11-26T18:12:16.167
> 
> 标签：objective-c, ios, xcode, calculator

我正在制作一个 iOS 计算器，我在使用退格按钮时遇到了一些小问题（用于删除标签上显示的值的最后一个数字）。

要获取我使用的标签上的当前值

```
 double currentValue = [screenLabel.text doubleValue] 
```

在其他问题之后，我尝试了类似

```
-(IBAction)backspacePressed:(id)sender
{
NSMutableString *string = (NSMutableString*)[screenLabel.text];

int length = [string length];

NSString *temp = [string substringToIndex:length-1]
;

[screenLabel.text setText:[NSString stringWithFormat:@"%@",temp]];

} 
```

但它不起作用，

（Xcode 说“**不推荐使用 setText** ”，“ **NSString 可能不会响应 setText** ”，并且IBAction 内的第一行代码中需要一个**标识符）**

而且我并不真正理解这段代码以使其自己工作。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:17:16.853

它应该是

```
[screenLabel setText:[NSString stringWithFormat:@"%@",temp]]; 
```

您的 Xcode 清楚地表明您正在尝试调用`setText' method on an`NSString `where as you should be calling that on a`UILabel `. Your`screenLabel.text `is retuning an`NSString `. You should just use`screenLabel `alone and should call`setText`。

只需使用，

```
NSString *string = [screenLabel text]; 
```

问题在于，您使用`[screenLabel.text];`which is not correct as per objective-c syntax to call `text`method on `screenLabel`. 要么你应该使用，

```
NSString *string = [screenLabel text]; 
```

或者

```
NSString *string = screenLabel.text; 
```

在这种方法中，我认为您不需要使用`NSMutableString`. 你可以`NSString`改用。

简而言之，您的方法可以写成，

```
-(IBAction)backspacePressed:(id)sender
{
   NSString *string = [screenLabel text];
   int length = [string length];
   NSString *temp = [string substringToIndex:length-1];
   [screenLabel setText:temp];
} 
```

根据您在评论中的问题（现在已删除），如果您想在没有字符串时显示零，请尝试，

```
-(IBAction)backspacePressed:(id)sender
{
   NSString *string = [screenLabel text];
   int length = [string length];
   NSString *temp = [string substringToIndex:length-1];

   if ([temp length] == 0) {
     temp = @"0";
   }
   [screenLabel setText:temp];
} 
```

# sql - 如何在数据透视查询中返回整体百分比？

> ID：13570659
> 
> 赞同：1
> 
> 时间：2012-11-26T18:12:27.893
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个很棒的查询：

```
select *
from
(
  select MONTH(x.status_date) m
    , YEAR(x.status_date) y
    ,f.REQUISITION_TYPE
  from (select distinct accession_id,status_date from [XREF_WET_MASTER]) x

  join F_ACCESSION_DAILY f
    on x.accession_id=f.accession_id
) src
pivot 
(
  count(src.REQUISITION_TYPE) 
  for src.REQUISITION_TYPE in ([11/12 Panel]
,[6 Panel]
,[Non-POC]
,[Oral Fluids]
,[POC Other])
) as CountofThatTypeofReq 
```

返回：

```
+----+------+-------------+---------+---------+-------------+-----------+
| m  |  y   | 11/12 Panel | 6 Panel | Non-POC | Oral Fluids | POC Other |
+----+------+-------------+---------+---------+-------------+-----------+
|  9 | 2012 |        6941 |    1170 |    2138 |          98 |      1446 |
|  7 | 2012 |        7906 |    1384 |    1984 |          98 |      1576 |
| 11 | 2012 |        4442 |     715 |    1436 |          59 |       833 |
| 10 | 2012 |        8027 |    1036 |    2645 |          86 |      1374 |
|  4 | 2012 |        5237 |     647 |    1502 |          27 |      1072 |
|  5 | 2012 |        5968 |     807 |    1884 |          40 |      1223 |
|  6 | 2012 |        6170 |    1130 |    1947 |          55 |      1268 |
|  8 | 2012 |        8846 |    1335 |    2877 |         121 |      1598 |
+----+------+-------------+---------+---------+-------------+-----------+ 
```

对于每个面板中的每一行，我怎样才能像这样返回整体的百分比：

```
+----+------+-------------+-----+---------+-----+---------+-----+-------------+----+-----------+
| m  |  y   | 11/12 Panel |     | 6 Panel |     | Non-POC |     | Oral Fluids |    | POC Other |
+----+------+-------------+-----+---------+-----+---------+-----+-------------+----+-----------+
|  9 | 2012 |        6941 | 59% |    1170 | 24% |    2138 | 58% |          98 | 6% |      1446 |
|  7 | 2012 |        7906 | 61% |    1384 | 27% |    1984 | 54% |          98 | 6% |      1576 |
| 11 | 2012 |        4442 | 59% |     715 | 23% |    1436 | 62% |          59 | 7% |       833 |
| 10 | 2012 |        8027 | 61% |    1036 | 20% |    2645 | 64% |          86 | 6% |      1374 |
|  4 | 2012 |        5237 | 62% |     647 | 20% |    1502 | 58% |          27 | 2% |      1072 |
|  5 | 2012 |        5968 | 60% |     807 | 20% |    1884 | 60% |          40 | 3% |      1223 |
|  6 | 2012 |        6170 | 58% |    1130 | 26% |    1947 | 60% |          55 | 4% |      1268 |
|  8 | 2012 |        8846 | 60% |    1335 | 23% |    2877 | 63% |         121 | 7% |      1598 |
+----+------+-------------+-----+---------+-----+---------+-----+-------------+----+-----------+ 
```

例如，第一个百分比值`59% = 100*(6941 / (6941+1170+2138+98+1446))`

这是我尝试过的：

```
select m,y,[11/12 Panel],[11/12 Panel]/([11/12 Panel]
                                        +[6 Panel]
                                        +[Non-POC]
                                        +[Oral Fluids]
                                        +[POC Other]) percentage
                        ,[6 Panel], [6 Panel]/([11/12 Panel]
                                        +[6 Panel]
                                        +[Non-POC]
                                        +[Oral Fluids]
                                        +[POC Other]) percentage2
                        etc.......                              
from
(
select *
from
(
  select MONTH(x.status_date) m
    , YEAR(x.status_date) y
    ,f.REQUISITION_TYPE
  from (select distinct accession_id,status_date from [XREF_WET_MASTER]) x

  join F_ACCESSION_DAILY f
    on x.accession_id=f.accession_id
) src
pivot 
(
  count(src.REQUISITION_TYPE) 
  for src.REQUISITION_TYPE in ([11/12 Panel]
,[6 Panel]
,[Non-POC]
,[Oral Fluids]
,[POC Other])
) as CountofThatTypeofReq
) mypivot 
```

它有效，但我想知道是否

> **有更简洁/更智能的方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:03:52.553

```
select m, y, MAX([11/12 Panel]) AS [11/12 Panel],
             MAX(CASE WHEN [11/12 Panel] IS NOT NULL THEN [Percent] END) AS [Perc_11/12 Panel],
             MAX([6 Panel]) AS [6 Panel],
             MAX(CASE WHEN [6 Panel] IS NOT NULL THEN [Percent] END) AS [Perc_6 Panel],
             MAX([Non-POC]) AS [Non-POC],
             MAX(CASE WHEN [Non-POC] IS NOT NULL THEN [Percent] END) AS [Perc_Non-POC],
             MAX([Oral Fluids]) AS [Oral Fluids],
             MAX(CASE WHEN [Oral Fluids] IS NOT NULL THEN [Percent] END) AS [Perc_Oral Fluids],
             MAX([POC Other]) AS [POC Other],
             MAX(CASE WHEN [POC Other] IS NOT NULL THEN [Percent] END) AS [Perc_POC Other]
from
(
  select MONTH(x.status_date) m
         , YEAR(x.status_date) y
         , f.REQUISITION_TYPE
         COUNT(*) OVER(PARTITION BY f.REQUISITION_TYPE, x.status_date) AS [Count],
         100 * (COUNT(*) OVER(PARTITION BY f.REQUISITION_TYPE, x.status_date) * 1.00
         / COUNT(*) OVER(PARTITION BY x.status_date)) AS [Percent]
  from (select distinct accession_id,status_date from [XREF_WET_MASTER]) x
  join F_ACCESSION_DAILY f
    on x.accession_id=f.accession_id
) src
pivot 
(
 MAX(src.[Count])
   for src.REQUISITION_TYPE in ([11/12 Panel]
                                ,[6 Panel]
                                ,[Non-POC]
                                ,[Oral Fluids]
                                ,[POC Other])
) as CountofThatTypeofReq
GROUP BY m, y 
```

我在[**SQLFiddle上的简单示例**](http://sqlfiddle.com/#!3/9d1c0/1/0)

如果可以包含在 PIVOT [Percent] 列语句中会更聪明；）

# c# - C# 表达式 - 从另一个表达式创建一个表达式

> ID：13570664
> 
> 赞同：1
> 
> 时间：2012-11-26T18:12:40.170
> 
> 标签：c#, linq-expressions

我正在尝试使用看起来像这样的表达式创建一个可重用的方法：

```
Expression<Func<Order, bool>> CreateExpression(Expression<Func<Order, int>> parameter, FilterOperator operator, int value) 
```

所以我可以这样使用它：

```
IQueryable<Order> orders = db.Orders;

var filtered = orders.Where(CreateExpression(o => o.OrderID, FilterOperator.GreaterThan, 100)); 
```

我不确定如何编写该方法。我怎样才能编写一个方法来为我创建这个表达式？

我需要能够做这样的事情：

```
if(operator == FilterOperator.GreaterThan)
   return m => m.OrderID > value;
else if(operator == FilterOperator.LessThan)
   return m => m.OrderID < value; 
```

但我想使用传入的表达式，而不是直接使用 OrderID。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T18:23:35.700

```
static Expression<Func<T, bool>> CreateExpression<T>(Expression<Func<T, int>> parameter, FilterOperator @operator, int value)
{
    var argExpr = Expression.Parameter(typeof(T), "p");
    var paramExpr = Expression.Invoke(parameter, argExpr);
    var constExpr = Expression.Constant(value);
    Expression compExpr = null;
    switch(@operator)
    {
        case FilterOperator.GreaterThan:
            compExpr = Expression.GreaterThan(paramExpr, constExpr);
            break;
        case FilterOperator.LessThan:
            compExpr = Expression.LessThan(paramExpr, constExpr);
            break;
    }

    return Expression.Lambda<Func<T, bool>>(compExpr, argExpr);
} 
```

如果您不能使用`Invoke`并且您的`parameter`表达式是成员表达式，那么您可以使用新参数重新创建它：

```
static Expression<Func<T, bool>> CreateExpression<T>(Expression<Func<T, int>> parameter, FilterOperator @operator, int value)
{
    var memberExpr = (MemberExpression)parameter.Body;
    PropertyInfo property = (PropertyInfo)memberExpr.Member;

    var argExpr = Expression.Parameter(typeof(T), "p");
    var propertyExpr = Expression.Property(argExpr, property);
    var constExpr = Expression.Constant(value);

    Expression compExpr = null;
    switch(@operator)
    {
        case FilterOperator.GreaterThan:
            compExpr = Expression.GreaterThan(propertyExpr, constExpr);
            break;
        case FilterOperator.LessThan:
            compExpr = Expression.LessThan(propertyExpr, constExpr);
            break;
    }

    return Expression.Lambda<Func<T, bool>>(compExpr, argExpr);
} 
```

# c++ - C ++重载运算符<<在模板类中

> ID：13570667
> 
> 赞同：3
> 
> 时间：2012-11-26T18:12:53.087
> 
> 标签：c++, class, templates, operator-overloading

> **可能重复：**
> [为模板类重载友元运算符<<](https://stackoverflow.com/questions/4660123/overloading-friend-operator-for-template-class)

我正在尝试为模板类重载 operator<<，但出现错误...

* * *

最终（固定）代码：

```
template<class T>
class mytype
{
    T atr;
public:
    mytype();
    mytype(T);
    mytype(mytype&);
    T getAtr() const;
    T& operator=(const T&);
    template<class U> friend ostream& operator<<(ostream&,const mytype<U>&);
};

template<class T>
mytype<T>::mytype()
{
    atr=0;
}

template<class T>
mytype<T>::mytype(T value)
{
    atr=value;
}

template<class T>
mytype<T>::mytype(mytype& obj)
{
    atr=obj.getAtr();
}

template<class T>
T mytype<T>::getAtr() const
{
    return atr;
}

template<class T>
T& mytype<T>::operator=(const T &other)
{
    atr=other.getAtr();
    return *this;
}

template<class U>
ostream& operator<<(ostream& out,const mytype<U> &obj)
{
    out<<obj.getAtr();
    return out;
} 
```

（全部在头文件中）

* * *

VS2012 错误：

1)

错误 1 ​​错误 LNK2019：函数 _wmain 中引用的未解析外部符号“public: __thiscall mytype::mytype(int)”(??0?$mytype@H@@QAE@H@Z)

2)

错误 2 错误 LNK2019: 无法解析的外部符号 "class std::basic_ostream > & __cdecl operator<<(class std::basic_ostream > &,class mytype const &)" (??6@YAAAV?$basic_ostream@DU?$char_traits@ D@std@@@std@@AAV01@ABV?$mytype@H@@@Z) 在函数 _wmain 中引用

3)

错误 3 error LNK1120: 2 unresolved externals

* * *

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:24:01.903

你告诉编译器期待一个免费的非模板函数：

```
friend ostream& operator<<(ostream&,const mytype<T>&); 
```

...但随后您定义了一个函数模板：

```
template<class T>
ostream& operator<<(ostream& out,const mytype<T> &obj)
{
    out<<obj.getAtr();
    return out;
} 
```

告诉编译器期待一个函数模板：

```
template<class T> friend ostream& operator<<(ostream&,const mytype<T>&); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:21:12.270

似乎缺少构造函数的实现/定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:23:21.547

*编辑*我现在看到问题已经更新并且构造函数已经定义。

在这种情况下，您只需将构造函数定义放在标题中。有些人这样做的另一种方法是定义一个 .inl(inline) 文件并将其包含在标题的底部。

那么你声明构造函数

```
mytype(T); 
```

但是你从来没有真正开始定义它。

编译器不会为上述构造函数创建默认主体，因为它不知道如何去做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T18:24:21.100

您还需要`template<class T>`在类的声明中指定运算符：

```
template<class T>
class mytype
{
    T atr;
public:
    ...
    T getAtr() const;

    template<class U>
    friend ostream& operator<<(ostream&,const mytype<U>&);
    ...
}; 
```

或者，在类中实现运算符：

```
template<class T>
class mytype
{
    T atr;
public:
    ...
    T getAtr() const;

    friend ostream& operator<<(ostream&,const mytype<T>&)
    {
        ...
    }

    ...
}; 
```

至于第一个错误，可能是因为你在源文件中实现了mytype的构造函数。对于模板类，您应该在类中实现所有方法（和构造函数等）。

# java - 未找到 web.xml。模拟支柱测试用例

> ID：13570669
> 
> 赞同：0
> 
> 时间：2012-11-26T18:13:06.443
> 
> 标签：java, junit, mocking, struts, web.xml

这是我的项目目录结构：

```
TOPS-WEB
      |___
      |    Java Resources
      |___ 
           WebContent
                 |____
                      WEB-INF
                            |____
                            |    web.xml
                            |____  
                            |    lib
                            |       |__
                            |          strutstest-2.1.4.jar
                            |____
                                 struts
                                      |__
                                         struts-info-config.xml 
```

当我运行测试时，出现以下错误。此错误由 testInfo() 方法中的 setServletConfig(...) 行引发。

```
ERROR [main] org.apache.struts.action.ActionServlet initServlet - The /WEB-INF/web.xml was not found.
ERROR [main] org.apache.struts.action.ActionServlet init - Unable to initialize Struts ActionServlet due to an unexpected exception or error thrown, so marking the servlet as unavailable.  Most likely, this is due to an incorrect or missing library dependency. 
```

我的测试班

```
public class MyTest extends MockStrutsTestCase{

    @Override
    protected void setUp() throws Exception {
        super.setUp();           
    }

    @Override
    protected void tearDown() throws Exception {
        super.tearDown();
    }

    public MyTest(String testName){
        super(testName);
    }

    public void testInfo(){         
        setContextDirectory(new File("TOPS-WEB/WebContent"));       
        setConfigFile(this.getSession().getServletContext().getRealPath("/WEB-INF/struts/struts-info-config.xml"));         
        *setServletConfigFile(this.getSession().getServletContext().getRealPath("/WEB-INF/web.xml"));*
        setRequestPathInfo("/infoPopup");
        actionPerform();            
        }    
    } 
```

我看到一些地方提到你必须使用 maven，但我不是。我只需右键单击测试类并将其作为 junit 运行。这可能是原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:55:34.947

您的问题是您将上下文目录（使用`setContextDirectory`）设置为不存在的路径。

`new File(string)`，当`string`是相对路径名时，将解析为相对于当前工作目录的路径名。然后，您假设当前工作目录是 Tomcat 放置其展开的 WAR 文件的父目录。

打印这个：

`System.out.println(System.getProperty("user.dir"))`

你会得到进程的当前工作目录。然后，`setContextDirectory`进行相应的调整。

# c# - “：”在这种确切情况下会做什么？

> ID：13570670
> 
> 赞同：3
> 
> 时间：2012-11-26T18:13:07.597
> 
> 标签：c#

> **可能重复：**
> [C# ?：条件运算符](https://stackoverflow.com/questions/1171717/c-sharp-conditional-operator)

有人可以解释一下“：”在这种情况下的作用吗？

```
var skupaj = dni + zacetniDan + (((dni + zacetniDan) % 7 != 0) ? 7 - ((dni + zacetniDan) % 7) : 0); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T18:14:10.957

`:`是三元运算符的一部分。它是`if`/`else`子句的简码。

例子： `int a = b > 5 ? 2 : 3;`

是相同的：

```
int a = 0;
if (b > 5)
{
    a = 2;
}
else
{
    a = 3;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T18:14:43.113

`? :`是if / then / else 的[**条件运算符**](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)缩写形式

第一部分是条件应该在`?`表达式之前被评估为布尔值`after ? is then part`，并且当条件为真时`expression after : is else part`返回，并且当条件被评估为假时返回

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T18:16:52.150

它是一个三元运算符。

它是以下等效代码的简写：

```
int skupaj = dni + zacetniDan;

if ((dni + zacetniDan) % 7 != 0) {
    skupaj += 7 - ((dni + zacetniDan) % 7);
}
else {
    skupaj += 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T18:14:54.893

(((dni + zacetniDan) % 7 != 0) ? 7 - ((dni + zacetniDan) % 7) : 0);

这是一个三元表达式`Condition?Expr1:Expr2`

表达式的结果是`Expr1`if`Condition`为 true 和 else 的结果`Expr2`。

在您的特定情况下，条件是

```
 ((dni + zacetniDan) % 7 != 0) 
```

如果此条件为真，则三元子表达式的结果将是

```
 7 - ((dni + zacetniDan) % 7) 
```

否则为 0。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T18:14:59.130

三元运算符。它允许您将条件值视为单个值。

这是一个将布尔值转换为字符串的基本示例

```
string str = myBool ? "true" : "false"; 
```

这相当于

```
string str
if(myBool)
    str = "true";
else
    str = "false"; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T18:15:25.890

这就是三元运算符：http: [//msdn.microsoft.com/en-us/library/ty67wk28 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ty67wk28(v=vs.80).aspx)

if `(dni + zacetniDan) % 7 != 0)`is `true`then 评估为`7 - ((dni + zacetniDan) % 7)`else 评估为`0`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-26T18:15:47.230

您可以通过拆分为 3`?`轻松理解一条线。`:`

*   左边的项`?`是条件
*   如果条件为真，应使用介于`?`和之间的术语`:`
*   `:`如果条件为假，则应使用后面的术语

# c# - HttpVerbs.Get 和参数？

> ID：13570672
> 
> 赞同：0
> 
> 时间：2012-11-26T18:13:15.443
> 
> 标签：c#, asp.net-mvc, routing

我有以下行动：

```
public class IntegrationController : Controller
    {
        [AcceptVerbs(HttpVerbs.Get)]
        public ContentResult Feed(string feedKey)
        {
           ...
        }
} 
```

我曾尝试使用此网址：

```
http://MyServer/Integration/Feed/MyTest 
```

但是`feedKey`是空的吗？这与路线有关吗？

编辑 1：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Ad", action = "List", id = UrlParameter.Optional } // Parameter defaults
            );

            routes.MapRoute(
                "TreeEditing", // Route name
                "{controller}/{action}/{name}/{id}", // URL with parameters
                new { controller = "AdCategory", action = "Add", name = string.Empty, id = -1 }
            ); 
```

编辑 2：

```
routes.MapRoute(
                "IntegrationFeed", // Route name
                "{controller}/{action}/{name}/{feedKey}", // URL with parameters
                new { controller = "Integration", action = "Feed", name = string.Empty, feedKey = "" }
            ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:15:38.807

你有为 定义的路线`feedKey`吗？使用默认路由，以下应该可以工作（更改`feedKey`为`id`）。

```
 [AcceptVerbs(HttpVerbs.Get)]
    public ContentResult Feed(string id)
    {
       // ...
    } 
```

# c# - 在 SQL 作业代理中寻找 DTSX 项目？

> ID：13570675
> 
> 赞同：0
> 
> 时间：2012-11-26T18:13:27.463
> 
> 标签：c#, sql, sql-server, ssis

我使用 DTSX 项目（在 C# 中）作为代理 MSSQL2012 代理作业的一个步骤。
我和其中一个一起工作。可以找出我的 DTSX 项目是在哪个工作、哪个步骤中使用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:47:23.657

我不完全确定您要做什么，但是您可以使用如下特定包找到所有 SSIS 作业步骤：

```
select
    j.name,
    js.step_id,
    js.command
from 
    msdb.dbo.sysjobsteps js
    join msdb.dbo.sysjobs j
    on js.job_id = j.job_id
where 
    js.subsystem = 'SSIS' and 
    js.command like '%MyPackage%' 
```

# bash - bash 陷阱不会忽略信号

> ID：13570680
> 
> 赞同：4
> 
> 时间：2012-11-26T18:13:43.097
> 
> 标签：bash, signals, rsync, bash-trap

请考虑这个 bash 脚本：

```
#!/bin/bash

trap '' INT

echo sleep:  
sleep 5

echo rsync:  
rsync -a /usr/lib /var/tmp 
```

正如预期的那样，尝试使用 ctrl-c 中断睡眠失败。但是 rsync 是可中断的（睡眠和 rsync 的顺序无关紧要）？欢迎任何想法！

编辑：发现不同之处：rsync 本身启动 2 个子进程（客户端/服务器，我假设它产生 2 个错误消息），这些似乎没有继承其父级的“无知”。必须深入研究 bash 源代码并了解陷阱的工作原理......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T22:15:39.110

您是否尝试过按照 SO 问题中的建议使用`rsync`with在[subshel​​l/exec 语句](https://stackoverflow.com/questions/9624947/bash-not-trapping-interrupts-during-rsync-subshell-exec-statements)[期间不捕获中断](https://stackoverflow.com/questions/9624947/bash-not-trapping-interrupts-during-rsync-subshell-exec-statements)？`--no-detach`[`bash``rsync`](https://stackoverflow.com/questions/9624947/bash-not-trapping-interrupts-during-rsync-subshell-exec-statements)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-10T01:48:46.310

从实验中可以清楚地看出，它的`rsync`行为类似于其他工具，例如`ping`并且不从调用 Bash 父级继承信号。

因此，您必须对此进行一些创意并执行以下操作：

```
$ cat rsync.bash
#!/bin/sh

 set -m
 trap '' SIGINT SIGTERM EXIT
 rsync -avz LargeTestFile.500M root@host.mydom.com:/tmp/. &
 wait

 echo FIN 
```

现在当我运行它时：

```
$ ./rsync.bash
X11 forwarding request failed
building file list ... done
LargeTestFile.500M
^C^C^C^C^C^C^C^C^C^C
sent 509984 bytes  received 42 bytes  92732.00 bytes/sec
total size is 524288000  speedup is 1027.96
FIN 
```

我们可以看到文件确实完全传输：

```
$ ll -h | grep Large
-rw-------. 1  501 games 500M Jul  9 21:44 LargeTestFile.500M 
```

### 这个怎么运作

这里的诀窍是我们告诉 Bash via`set -m`禁用其中任何后台作业的作业控制。然后我们在后台`rsync`运行一个`wait`命令，该命令将等待最后一个运行命令`rsync`，直到它完成。

然后我们用`trap '' SIGINT SIGTERM EXIT`.

### 参考

*   [https://access.redhat.com/solutions/360713](https://access.redhat.com/solutions/360713)
*   [https://access.redhat.com/solutions/1539283](https://access.redhat.com/solutions/1539283)
*   [延迟终止脚本](https://unix.stackexchange.com/questions/450127/delay-termination-of-script)

# jboss - 如何使用自己的 JDK 版本配置 JBoss？

> ID：13570686
> 
> 赞同：6
> 
> 时间：2012-11-26T18:13:57.687
> 
> 标签：jboss, java

我有一个 Java Web 应用程序 (WAR)，它需要 JRE 的旧 (1.5.11) 版本，但我在 Linux 上并且花了很多时间为 1.6.34 设置我的环境。

Web 应用程序需要本地托管在 JBoss (4.0.4 GA) 上，我没有这方面的经验。我想知道是否可以下载 JDK 的 1.5.11 版本并进行配置，以便我的 JBoss 实例是我系统上唯一使用它的东西。这样我就不必担心会破坏 1.6.34 的任何其他配置。

如果可能的话，一般步骤是什么？我需要做哪些 JBoss 配置？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T18:39:27.220

当然这是可能的。您可以安装任意数量的 java 版本，并确保为要启动的每个进程正确设置了 path/JAVA_HOME。在`JBOSS_HOME/bin/run.conf`你可以指定你的 1.5 `JAVA_HOME`。

但是，如果您谈论的是严肃的业务，则应该让某人（例如您的软件供应商）进行升级。1.5.11 过时且不受支持。JBoss 4.0.4 也同样老旧，而且支持更少。

# php - 使用特殊字符将数据表单插入数据库

> ID：13570692
> 
> 赞同：-1
> 
> 时间：2012-11-26T18:14:16.050
> 
> 标签：php, mysql

我有我想要的表格；你能帮我在数据库中插入发送的数据吗？这是 [jsfiddle.net/AbuNidal/Rqt5u/9](http://jsfiddle.net/AbuNidal/Rqt5u/9)我的 process_form.php的形式

```
<?php 
$title=$_POST['title'];
$catid=$_POST['catid'];
$published='1';
$introtext=$_POST['text'];
$created='155';
$access='1';
$language='*';
$publish_down='0000-00-00 00:00:00';
$language=$_POST['[{"id":"4","value":"$_POST['K2ExtraField_4']"},{"id":"6","value":"$_POST['K2ExtraField_6']"},{"id":"12","value":"$_POST['K2ExtraField_12']"},{"id":"13","value":"$_POST['K2ExtraField_13']"},{"id":"7","value":"$_POST['K2ExtraField_7']"},{"id":"8","value":"$_POST['K2ExtraField_8']"},{"id":"9","value":"K2ExtraField_9"},{"id":"1","value":"K2ExtraField_1"},{"id":"2","value":"K2ExtraField_2"},{"id":"3","value":"K2ExtraField_3"},{"id":"5","value":"K2ExtraField_5"},{"id":"10","value":["","http:\/\/$_POST['K2ExtraField_10']","new"]},{"id":"11","value":["","http:\/\/$_POST['K2ExtraField_11']","new"]}]'];

$con=mysql_connect("localhost","root","");
$db=mysql_select_db("form", $con);

$query("INSERT INTO y2ium_items ( title, catid, published, introtext, extra_fields, created, publish_down, access, language)
VALUES (null,'$title',$catid,$published,'$introtext','$extra_fields',$created,$publish_down,$access,$language)");
$result=mysql_query($query,$con);
mysql_close($con);

?> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:18:24.697

这一点：

```
[{"id":"4","value":"$_POST['K2ExtraField_4']"},{"id":"6","value":"$_POST['K2ExtraField_6']"},{"id":"12","value":"$_POST['K2ExtraField_12']"},{"id":"13","value":"$_POST['K2ExtraField_13']"},{"id":"7","value":"$_POST['K2ExtraField_7']"},{"id":"8","value":"$_POST['K2ExtraField_8']"},{"id":"9","value":"K2ExtraField_9"},{"id":"1","value":"K2ExtraField_1"},{"id":"2","value":"K2ExtraField_2"},{"id":"3","value":"K2ExtraField_3"},{"id":"5","value":"K2ExtraField_5"},{"id":"10","value":["","http:\/\/$_POST['K2ExtraField_10']","new"]},{"id":"11","value":["","http:\/\/$_POST['K2ExtraField_11']","new"]}] 
```

看起来像 JSON。尝试使用 json_decode。那应该让你继续前进。并且不要使用 mysql_* 函数，如上面的评论中所述。 [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# java - 你如何调用数组

> ID：13570694
> 
> 赞同：1
> 
> 时间：2012-11-26T18:14:18.513
> 
> 标签：java, arrays

在编码中使用数组时：您可以通过以下方式调用它：

这是数组本身

```
array[]= new Int[5] 
```

我会用这个或其他什么来调用它吗？

```
array[3]= keyb.nextInt(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:17:18.500

数组声明和创建：

```
int [] x = new int[5]; 
```

任务：

```
x[3] = keyb.nextInt(); 
```

进一步阅读：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:15:37.983

```
array[3] = keyb.nextInt(); 
```

这可以。它将调用`keyb.nextInt()`并将结果分配给`array`索引 3 处的元素（请注意，数组索引从零开始）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:17:00.953

当然，您只需访问所需的索引并进行设置。您可能应该阅读[Java Arrays 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)，它将为您介绍基础知识。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T18:19:52.037

“我会用这个还是别的什么来召唤它？”

```
array[3]= keyb.nextInt(); 
```

是的，您可以这样做，只要您访问的位置在 0 和数组大小减 1 之间。

# sql-server - SQL Server 2000 计划作业

> ID：13570696
> 
> 赞同：0
> 
> 时间：2012-11-26T18:14:34.700
> 
> 标签：sql-server, sql-server-2000

实际上，我的工作是将**mysql 数据表**中的备份数据备份到**SQL Server 表中**。

所以我在 SQL Server 2000 中创建了一个 DTS 包。当我手动运行该包时，它运行成功，没有任何错误，并且数据从 MySQL 传输到 SQL Server。

但是当我使用计划作业运行包时，出现以下错误

> DTSRun：正在加载...
> DTSRun：正在执行...
> DTSRun OnStart：
> DTSStep_DTSDataPumpTask_1 DTSRun OnError：DTSStep_DTSDataPumpTask_1，错误 = -2147467259 (80004005) 错误字符串：[Microsoft] [ODBC 驱动程序管理器] 未找到数据源名称且未指定默认驱动程序错误来源：Microsoft OLE DB Provider for ODBC Drivers 帮助文件：帮助上下文：0
> 
> 错误详细记录：
> 
> 错误：-2147467259（80004005）；提供程序错误：0 (0)
> 错误字符串：[Microsoft][ODBC Driver Manager] 未找到数据源名称并且未指定默认驱动程序
> 错误源：Microsoft OLE DB Provider for ODBC Drivers
> 帮助文件：帮助上下文：0
> 
> DTSRun OnFinish：DTSStep_DTSDataPumpTask_1 DTSRun：包执行完成。

所以请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:38:34.583

正如评论者所提到的，这可能是数据源配置问题 - 如果您将 MySQL DSN 设置为用户 DSN 而不是系统 DSN，则需要更改它。打开 ODBC 配置工具并转到“系统”表，而不是“用户”（默认位置）并在那里创建您的数据源。

也可能是 x64 问题 - 如果您使用的 Windows 版本是 x64，则默认打开的 ODBC 面板显示 x64 数据源。如果您使用的是 x86 版本的 SQL Server（SQL 2000 两者都有），那么您需要在 x86 ODBC 管理员中创建数据源，可以从以下位置启动：

C:\Windows\SysWOW64\odbcad32.exe

启动后，它们看起来完全一样，因此很难判断您打开了哪个。一般的指标是 x64 驱动程序列表通常要短得多——在我的机器上，x86 版本中大约有 25 个驱动程序，而 x64 版本中只有 3 个。请记住，如果您使用的是 SQL 2000 x86，您还需要安装 MySQL 驱动程序的 x86 版本，即使您的服务器是 x64。

# php - 在 href 标记中动态填充查询字符串

> ID：13570697
> 
> 赞同：0
> 
> 时间：2012-11-26T18:14:37.263
> 
> 标签：php, get, query-string, dynamically-generated

我想提出一个问题。我有一个 index.php 文件，它动态填充数据库中包含的所有章节。我的代码是这样的：

```
foreach($chapters_titles as $title){
     echo  "<a href='index.php?chapter_id=1>". $title ['title']."</a>";
}

foreach($chapter_contents as $content){
     echo  "<br/>". $content;
} 
```

我希望能够在单击章节标题时看到每个章节的子章节，并在单击子章节时看到子章节的内容。我怎样才能做到这一点？

我知道在页面顶部我会有一段代码，比如

```
if(isset($_GET['chapter_id'])){
     code
}

if(isset($_GET['sub-chapter_id'])){
     code
} 
```

我真的很感激任何指针。

# nginx - server_names_hash_bucket_size 在端口 80 上报告，而不是在端口 443 上

> ID：13570703
> 
> 赞同：1
> 
> 时间：2012-11-26T18:14:57.780
> 
> 标签：nginx

我的 nginx conf 文件看起来像这样

```
server {
...
listen 80;
name_server www.mydomain.com;
...
}

server {
...
listen 443;
server_name phpmyadmin.mydomain.com;

} 
```

我收到错误消息无法构建 server_names_hash，您应该增加 server_names_hash_bucket_size: 32

通过注释第一台服务器，nginx 成功地配置了 conf 文件。那么为什么它抱怨 www.mydomain.com，当 phpmyadmin.mydomain.com 更长时！！？

# jquery - jQuery Ajax load() 与回调 fadeTo() 仅在第一次尊重 fadeTo() 不透明度

> ID：13570705
> 
> 赞同：0
> 
> 时间：2012-11-26T18:15:04.997
> 
> 标签：jquery, ajax, fadein, fadeout, fadeto

有问题的页面位于： http: [//pull4parkinsonsfoundation.org/clinical_trials](http://pull4parkinsonsfoundation.org/clinical_trials)

我是 Ajax `<ul>`，通过单击导航链接将链接加载到 ID 区域中，该链接通过淡出当前 html 并淡入新内容来过滤所看到的内容。这一切都有效。

根据我在***SO***上找到的输入，我了解到***在***第一次淡出后淡入有问题的 div 需要在`load()`调用的回调中处理。

不过，到目前为止一切都很好。（实际上，为了清楚起见，我使用`fadeTo('slow',0.2)`and`fadeTo('slow',1)`来表示淡出/淡入，因为实际的淡出/淡入会使页面元素发生变化）。

问题是，当单击另一个导航链接为列表选择新过滤器时，`fadeTo()`总是为零，而不是编码的 0.2。这不是一个*可怕*的问题，但我更喜欢 20% 能见度的效果，这样该区域就不会完全消失。

这是我正在使用的 jQuery：

```
$(document).ready(function() {
    $('#trial_recruitment a.loader').live('click', function() {
        var load_url = $(this).attr('href');
        $('#trial_recruitment a').removeClass('active');
        $(this).addClass('active');
        $('#article_briefs #open_trials').fadeTo('slow', 0.2).load(load_url + ' #open_trials', function() {
            $(this).fadeTo('slow', 1);
        });
            return false;
    })
}); 
```

有什么想法，或者这只是那些奇怪的 jQuery 行为之一？

# c++ - 将参数传递给编译器以设置定义的变量？

> ID：13570708
> 
> 赞同：1
> 
> 时间：2012-11-26T18:15:15.593
> 
> 标签：c++, command-line-arguments, argument-passing

可以将参数传递给编译器（命令行）并设置定义的变量：

例子：

```
#define EXVALUE 
```

我想在编译时定义 EXVALUE：

```
application.cpp -8 
```

'-8' 它是定义 EXVALUE 的命令行参数。所以我希望你会明白我想要什么，并会帮助我。

我使用 Visual Studio C++ 2008 速成版。

谢谢。（对不起英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:22:04.940

Visual Studio（也包括 Visual C++ EE）使用`/D`选项。

例子：

```
/D "BOOST_ALL_STATIC_LINK" 
```

您可以通过 GUI 执行此操作：`Project Properties`-> `C/C++`-> `Preprocessor`->`Preprocessor Definitions`

如果您需要更多信息， Google for`visual studio preprocessor definitions`中的第一个链接提供了非常好的信息。

# java - 使类生成短的顺序唯一 ID

> ID：13570711
> 
> 赞同：1
> 
> 时间：2012-11-26T18:15:26.507
> 
> 标签：java

我有一堂课（下）。我有班级的字段ID，但我不知道如何使它创建一个按顺序增加的唯一ID。

我发现 UUID.randomUUID(); 会生成一个唯一的 ID，但会以非常不友好的方式生成，并且无法限制大小。

当从下面的类创建对象时，我如何实现一些东西来增加 id 字段？

```
class Customer {

public int id;
public String name;
public String email;
public String number;
public String issue;
public String expiry;

Customer(String eName, String eEmail, String eNumber, String eIssue, String eExpiry)
{
    id = 0935091285;
    name = eName;
    email = eEmail;
    number = eNumber;
    issue = eIssue;
    expiry = eExpiry;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:19:38.337

您没有指定是否有多个进程同时生成 id。如果您不这样做，则以下内容很简单并且会很好地工作：

```
public class Customer {
  private static AtomicInteger nextId = new AtomicInteger(0);
  private static String getNextId() {
    return Integer.toString(nextId.incrementAndGet());
  }
  public Customer(...) {
    id = getNextId();
    ...
  }
} 
```

如果您希望 id 的字典顺序以反映对象创建顺序，请使用前导零格式化数字 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:19:42.537

我不确定我是否理解为什么 UUID 生成器不能满足您的需求。大小是固定的（36 个字符）。我可以理解非顺序部分可能是一个问题。

如果您需要按顺序生成唯一标识符（并且鉴于您已经尝试过 UUID，我想您已经尝试过简单的增量系统）并且可能大规模生成，我建议您看一下[snowflake](https://github.com/twitter/snowflake)，使用的服务通过 twitter 生成顺序但非增量的 id。

基本上，它是一个可以运行的简单服务器，它会在您需要时为您生成唯一标识符：

> *   用 Scala 编写的 Thrift 服务器
> *   id 由以下部分组成：
>     
>     
>     *   时间 - 41 位（毫秒精度/自定义纪元给我们 69 年）
>     *   配置的机器 id - 10 位 - 给我们最多 1024 台机器
>     *   序列号 - 12 位 - 每台机器每 4096 次翻转一次（具有保护以避免在同一毫秒内翻转）

* * *

**资源：**

*   [engineering.twitter.com - 宣布雪花](http://engineering.twitter.com/2010/06/announcing-snowflake.html)

# random - 从 ArrayList Java 中删除随机元素

> ID：13570719
> 
> 赞同：0
> 
> 时间：2012-11-26T18:15:44.767
> 
> 标签：random, arraylist, frequency

在自己尝试了几个小时后，我想我会寻求帮助。

这是试图实现多组字符并提供某些操作，例如添加、删除等。这些都运行良好，但我在最后一种方法遇到问题，该方法假设基于频率返回随机字符。我正在使用 ArrayList 来做所有事情，除了最后一部分之外，它一直都很出色。所以基本上，如果我的多组中有 50 个 z 和 50 个 e，那么它们应该有相同的机会被输出。如果有 4 个 a 和 2 个 b，则应该输出更多。我尝试使用 Collections 框架中可用的“频率”方法，并且我在 foreach 循环中拥有每个字符的频率，但不知道如何适当地随机化。此外，我尝试使用 Math.random 并将范围设置为 ArrayList 中的字符，

如果有人可以帮助我解决这个问题，我将由衷地感激。在这一点上，我真的不知道还能尝试什么。这是我的代码的完整类。共享整个文件可能更容易，这样您就可以看到我正在处理的内容。

```
public class DenseMultiSetOfChar implements MultiSetOfChar{

    private ArrayList<Character> multi;

    public DenseMultiSetOfChar() {

        multi = new ArrayList<Character>();

    }

    public DenseMultiSetOfChar(char c) {

        multi = new ArrayList<Character>();

        multi.add(c);

    }

    @Override
    public int getCardinality() {

        return this.multi.size();
    }

    @Override
    public int getElementCount(char target) {
        int cardinalityCount = 0;

        // relating get element count and get cardinality.
        // sum of get element count for each char is == to cardn
        // of the set.

        for(char wantedCh : this.multi)
        {
            if(wantedCh == target)
            {
                cardinalityCount++;
            }
        }

        return cardinalityCount;
    }

    @Override
    public Set<Character> getElementSet() {

        Set<Character> withoutDuplicates = new HashSet<Character>();
        List<Character> copiedList = new ArrayList<Character>(Arrays.asList(new Character[this.multi.size()]));

        Collections.copy(copiedList, this.multi);

        for(char ch : copiedList)
        {
             withoutDuplicates.add(ch);
        }

        return withoutDuplicates;

    }

    @Override
    public void add(char item) {
        if(this.multi.size() < Integer.MAX_VALUE)
        {
                multi.add(item);

        }

    }

    @Override
    public boolean remove(char target) {

        boolean result = false;

        if(this.multi.contains(target))
        {

            this.multi.remove(this.multi.indexOf(target));
            result = true;
        }

        return result;

    }

    @Override
    public char randomUniformChoose() {
        //does not remove or change cardinality.
        //char that appears n times in multset with
        //cardinatlity m, prob of that ch being returnd
        //is n/m

        char result;
        int count = 0;
        int probability = 0;
        int index = 0;
        int randNum = 0;
        List<Character> copiedList = new ArrayList<Character>(Arrays.asList(new Character[this.multi.size()]));

        Collections.copy(copiedList, this.multi);

        Random rand = new Random();

        // use randomNum to remove based on index. If there are more
        // 50a's and 50'b, this it will give a fair opportunity of removing
        // either one.
        randNum = rand.nextInt(copiedList.size() - 0 +1) +0;
        for(char ch : copiedList)
        {
            count = Collections.frequency(copiedList, ch);

        }

        result = copiedList.remove(count);

        return result;
    }

} 
```

这是测试驱动程序。

```
 public class TestDenseMultiSetOfCharSimple {

    public static void main(String[] args) {
        MultiSetOfChar e = new DenseMultiSetOfChar();
        MultiSetOfChar s = new DenseMultiSetOfChar('a');

        System.out.println("Cardinality is " + s.getCardinality()
                + " (should be 1)");
        System.out.println("No. of a's is " + s.getElementCount('a')
                + " (should be 1)");
        System.out.println("No. of b's is " + s.getElementCount('b')
                + " (should be 0)");

        Set<Character> basis = s.getElementSet();
        System.out.println("Cardinality of basis set is " + basis.size()
                + " (should be 1)");

        s.add('a');
        s.add('a');
        s.add('b');

        System.out.println("Cardinality is " + s.getCardinality()
                + " (should be 4)");
        System.out.println("No. of a's is " + s.getElementCount('a')
                + " (should be 3)");
        System.out.println("No. of b's is " + s.getElementCount('b')
                + " (should be 1)");

        basis = s.getElementSet();
        System.out.println("Cardinality of basis set is " + basis.size()
                + " (should be 2)");

        boolean result = s.remove('c');
        System.out.println("Able to remove element c? " + result
                + " (should be false)");

        result = s.remove('a');
        System.out.println("Able to remove element a? " + result
                + " (should be true)");
        System.out.println("No. of a's is now " + s.getElementCount('a')
                + " (should be 2)");

        System.out
                .println("Random string (should have about twice as many a's as b's");
        for (int i = 0; i < 100; i++) {
            System.out.print(s.randomUniformChoose());
        }
        System.out.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:22:23.847

您可以采用海峡前进方法：

```
public char randomUniformChoose() {
    return this.multi.get((int)(Math.random() * this.multi.size()));
} 
```

# php - 如何使 php 函数作为字符串执行真正的函数？

> ID：13570723
> 
> 赞同：1
> 
> 时间：2012-11-26T18:15:56.460
> 
> 标签：php

让我们假设我有名为的函数`printuser()`

现在如果我有类似的字符串

```
$myFunction = 'printuser()'; 
```

我如何将此字符串作为函数运行？所以它应该做这个`printuser()`功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:18:12.663

看看**[`call_user_func`](http://php.net/manual/en/function.call-user-func.php)**。你需要稍微改变你的字符串（没有括号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:17:02.497

1.  使用[eval](http://php.net/eval)。
2.  你几乎从不应该这样做。几乎总是有更好、更安全、更安全的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:19:49.827

如果您只想`$myFunction`指定要运行的函数，您可以执行类似的操作

```
$myFunction = 'printuser';
$myFunction(); 
```

这称为“[变量函数](http://php.net/manual/en/functions.variable-functions.php)”，比`eval`. （您可以调用任何现有函数，但不能运行任意代码。）

但是请注意：如果`printuser`不存在，脚本将会死掉。您可以考虑在调用它之前检查该函数的存在。

```
$myFunction = 'printuser';
if (function_exists($myFunction))
    $myFunction();
else
    throw new BadFunctionCallException("Function '$myFunction' doesn't exist"); 
```

如果该功能不存在，请将其替换为`throw`您想要执行的任何操作。这只是一个例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:19:14.423

你可以试试

```
$myFunction = 'printuser()';
# Remove brakets
$myFunction = rtrim($myFunction, "()");
# Call Function Directly
$myFunction(); 
```

对于验证，您可以使用`is_callable`

```
is_callable($myFunction) and $myFunction(); 
```

[简单演示](http://3v4l.org/Fl8v3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T18:29:09.017

带有故障保险的建议：

```
$function = str_replace("()", "", $input);
if( function_exists($function))
{
  $function();
}
else
{
  // ignore or show an error
} 
```

# javascript - jquery 淡入淡出。

> ID：13570725
> 
> 赞同：1
> 
> 时间：2012-11-26T18:16:06.893
> 
> 标签：javascript, jquery, fadein, fadeout

嗨，伙计们，他们只是在使用 jquery 做一些工作，然后遇到了一个问题。我在一个 div 中得到了一个图像，想知道是否使用 jquery 我可以通过给它一个 x 和 y 坐标来使该图像在屏幕上弹出。然后使用这个代码我可以让它向右移动

```
$('#red').pan({fps: 30, 
speed: 0.5, dir: 'right'}); 
```

然后让它在到达屏幕上的某个位置时淡出。在这个问题上的任何帮助都会很棒，因为我对 jquery atm 不太好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:19:00.447

你可以尝试这样的事情： -

```
 $('#A').fadeOut( function() {
         $('#B').fadeIn();
       }); 
```

在第一个效果完成后运行的淡出可以采取回调函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:38:31.047

我会尝试这样的事情

```
function MoveAndFade(x, y)
{
    $('.box').fadeIn('slow', function ()
    {
        $(this).animate({ left: x, top: y }, 'slow', 'swing', function ()
        {
            $(this).fadeOut();
        });
    })    
} 
```

基本上它会淡入 div，然后将其移动到您指定的位置，然后淡出。这将依次发生。

您需要将选择器更改`$('.box')`为适合您的 div 的选择器。当前的选择具有类'box'的元素。然后，您可以传入任何 x 或 y 值，例如：`MoveAndFade(50,100);`。您还需要确保 div 具有`position:absolute`css 属性。

您需要调用`MoveAndFade`传入所需参数的函数，例如

```
<input type="button" value="Click me" onclick='MoveAndFade(150,50);' /> 
```

或者，如果您想在 DOM 加载后运行，请执行以下操作：

```
$(document).ready(function(){
    $('.box').fadeIn('slow', function ()
    {
        $(this).animate({ left: '150', top: '50' }, 'slow', 'swing', function ()
        {
            $(this).fadeOut();
        });
    })    
}); 
```

或者

```
$(document).ready(function(){
    MoveAndFade(150,50);
}); 
```

where`MoveAndFade()`在节内定义`$(document).ready(function(){})`。

# html - iframe 元素中的 HTML5 数据属性

> ID：13570733
> 
> 赞同：6
> 
> 时间：2012-11-26T18:16:46.087
> 
> 标签：html, iframe, custom-data-attribute

iframe 的内容可以访问在 iframe 上设置的自定义数据属性吗？

例子：

```
<iframe src="foo.html" data-something="123"></iframe> 
```

有没有办法从 iframe 的文档中访问 data-something 的值？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T22:42:50.403

是的，使用[`frameElement`属性](https://developer.mozilla.org/en-US/docs/DOM/window.frameElement)。

```
window.frameElement.getAttribute('data-something'); 
```

演示：http: [//jsfiddle.net/Ehj2Q/](http://jsfiddle.net/Ehj2Q/)

[当然，如果 iframe 的内容来自不同的来源](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)，这根本不起作用。

# php - 你如何在 MySQL 中使用 Yii 存储过程

> ID：13570737
> 
> 赞同：2
> 
> 时间：2012-11-26T18:16:57.220
> 
> 标签：php, mysql, function, stored-procedures, yii

我需要更改此功能

```
 public function getScripts($page, $section){
        $data = Yii::app()->db->createCommand()
                ->select('*')
                ->from('scripts')
                ->where("page_id='$page' and section_id='$section'")
                ->queryAll();
        return $data;
    } 
```

进入 MySQL 中的存储过程。我将如何在 Yii for MySQL 中执行此操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T17:30:29.797

1.  不要`$page`直接`$section`插入 sql 代码。您的网站将容易受到 SQL 注入的攻击！请改用参数。
2.  您可以像执行普通查询一样运行存储过程：

    ```
    public function getScripts($page, $section){
        return Yii::app()->db->createCommand("CALL your_stored_procedure(:page, :section)")
                          ->queryAll(array(':page' => $page, ':section' => $section));
    } 
    ```

# google-chrome - nacl openal 示例在 Windows 上不起作用

> ID：13570739
> 
> 赞同：0
> 
> 时间：2012-11-26T18:17:01.900
> 
> 标签：google-chrome, windows-7, openal, google-nativeclient

我无法在 Win7 上获得开放的声音。我已经在 Mac 机器上针对pepper_23 构建了 naclports openal-ogg 示例，然后在 Win7 Chrome 中运行它们。
结果是跳过声音，我得到以下内容到 stderr：

AL lib: ppapi.c:95: 缓冲区欠载 AL lib: ppapi.c:95: 缓冲区欠载 ...

和标准输出：

可用的音频设备：PPAPI 输出无输出 ogg 文件，通道：1，速率：22050 num_samples：523734 缓冲区大小：1047468

sine_synth 示例在 Win7 上运行良好。ogg 文件显然可以正常读取，听起来它至少被部分解码（声音不是静态的）所以也许它是 openal-soft 中的一个错误？

有没有其他人看过这个？ **有人能在Win7上成功使用openal-soft吗？** 谁能给我一些关于如何调试的建议？我是新来的NACL。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:07:23.267

所以这是 openal-soft nacl 补丁中的一个错误。我为自己修复了它，最终一个项目成员在 naclports 中修复了它： [https ://code.google.com/p/naclports/issues/detail?id=57](https://code.google.com/p/naclports/issues/detail?id=57)

它现在有效，万岁。

# jquery - 无法找到需要填充的 DropDownList

> ID：13570741
> 
> 赞同：0
> 
> 时间：2012-11-26T18:17:04.453
> 
> 标签：jquery, asp.net-mvc-3, razor

我目前在一个页面上有两个下拉列表框。当用户进入页面并加载大约 12 个条目时，第一个可见。另一个下拉列表使用样式隐藏，直到在第一个下拉列表中进行选择。做出选择后，第一个 ddl 上的更改事件会触发对我的 Controller 的 ajax 调用，以获取填充第二个 ddl 所需的数据。ajax 调用正在获取正确的数据，所以一切都很好。

当我尝试填充第二个 ddl 时，问题就出现了。从 Json 返回后，jQuery 无法找到我的第二个 ddl。我得到的只是一个“未定义”错误，它指向当我尝试对返回的数据进行数据绑定时。

下面是代码。

看法

```
<table width="100%">
    <tr>
        <td class="adminTitle">
            @Html.NopLabelFor(model => model.SpecificationAttribute):
        </td>
        <td class="adminData">
            @Html.DropDownListFor(model => model.SpecificationAttribute, new SelectList(Model.SpecificationAttributes, "Id", "Name"), "Select a Specification Attribute")
        </td>
    </tr>        
    <tr>
        <td class="adminTitle">
            <div class="SAOptions" style="display:none">
                @Html.NopLabelFor(model => model.SpecificationAttributeOption):
            </div>
        </td>
        <td class="adminData">
            <div class="SAOptions" style="display:none">
                @Html.DropDownListFor(model => model.SpecificationAttributeOptions, Enumerable.Empty<SelectListItem>())
            </div>
        </td>
    </tr>
</table>
<script type="text/javascript">
    $("#SpecificationAttribute").change(function () {
        var specificationAttributeId = $("#@Html.FieldIdFor(model => model.SpecificationAttribute)").val();
        //User selected one of the Specification Attributes
        if (specificationAttributeId != "") {
            //Show the Specification Attribute Options
            $(".SAOptions").show();

            //Load the now showing dropdownlist
            $.getJSON('@Url.Action("GetSpecificationAttributeOptions", "Reports")', { specificationAttributeId: specificationAttributeId }, function (data) {
                //**************************
                //This is not finding my ddl
                //**************************
                var ddl = $("#SpecificationAttributeOptions").data("tDropDownList");
                alert(ddl != null);
                if (data.length > 0) {
                    //Bind data and reload
                    //********************
                    //Breaks here
                    //********************
                    ddl.dataBind(data);
                    ddl.reload();
                }
            });
        }
        //User selected "Select a Specification Option" for some reason, so hide everything
        else {
            $(".SAOptions").hide();
            $("#divOptions").hide();
        }
}); 
```

控制器

```
public ActionResult ProductBySpecificationAttribute()
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageReports))
            return AccessDeniedView();

        var model = new SpecificationAttributeReportListModel();
        var specificationAttributes = _specificationAttributeService.GetSpecificationAttributes();
        var specificationAttributesModel = PrepareSpecificationAttributeModel(specificationAttributes);
        model.SpecificationAttributes = specificationAttributesModel;

        //Return Model data
        return View(model);
    }

    public JsonResult GetSpecificationAttributeOptions(int specificationAttributeId)
    {
        var specificationAttributeOptions = _specificationAttributeService.GetSpecificationAttributeOptionsBySpecificationAttribute(specificationAttributeId);
        var specificationAttributeOptionsModel = PrepareSpecificationAttributeOptionsModel(specificationAttributeOptions);
        var returnData = new SelectList(specificationAttributeOptionsModel, "Id", "Name");
        return Json(returnData, JsonRequestBehavior.AllowGet);
    } 
```

我有一种感觉，这很简单，但我还没有弄清楚。我知道如果我实现不同的 ddl，它会起作用。但是，我希望所有内容都流动在一起，所以我使用了这个 ddl（不是出于选择，而是为了保持整体的一致性）。

任何帮助将非常感激。

最诚挚的问候，查德·约翰逊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:39:40.650

```
var ddl = $("#SpecificationAttributeOptions").data("tDropDownList"); 
```

该行正在尝试获取`tDropDownList`附加到 DropDownList 的数据。它不会返回您的 ddl，它可能会返回`undefined`，因为您的 ddl 没有附加数据。

请参阅此处了解更多信息：[http ://api.jquery.com/data/](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:08:24.823

所以我想出了自己的解决方案。我将辅助 ddl 的 HTML.DropDownList 替换为纯 . 这使我能够以不同的方式构建我的下拉列表。这是我所做的。

看法

```
<table width="100%">
    <tr>
        <td class="adminTitle">
            @Html.NopLabelFor(model => model.SpecificationAttribute):
        </td>
        <td class="adminData">
            @Html.DropDownListFor(model => model.SpecificationAttribute, new SelectList(Model.SpecificationAttributes, "Id", "Name"), "Select a Specification Attribute")
        </td>
    </tr>        
    <tr>
        <td class="adminTitle">
            <div class="SAOptions" style="display:none">
                @Html.NopLabelFor(model => model.SpecificationAttributeOption):
            </div>
        </td>
        <td class="adminData">
            <div class="SAOptions" style="display:none">
                <select id="SpecificationAttributeOptions"></select>
            </div>
        </td>
    </tr>
</table>
<script type="text/javascript">
//Change event for SpecificationAttribute
    $("#SpecificationAttribute").change(function () {
        var specificationAttributeId = $("#@Html.FieldIdFor(model => model.SpecificationAttribute)").val();
        //User selected one of the Specification Attributes
        if (specificationAttributeId != "") {
            //Show the Specification Attribute Options
            $(".SAOptions").show();

            //Load the now showing dropdownlist
            $.getJSON('@Url.Action("GetSpecificationAttributeOptions", "Reports")', { specificationAttributeId: specificationAttributeId }, function (data) {
                var ddl = $("#SpecificationAttributeOptions");
                if (data.length > 0) {
                    //Clear data from dropdownlist
                    ddl.html('');

                    //Bind dropdownlist
                    var elements = "";
                    $.each(data, function (id, option) {
                        elements += '<option value="' + option.id + '">' + option.name + '</option>'
                    });
                    ddl.append(elements);
                }
            });
        }
        //User selected "Select a Specification Option" for some reason, so hide everything
        else {
            $(".SAOptions").hide();
        }
    });
</script> 
```

控制器

```
public ActionResult ProductBySpecificationAttribute()
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageReports))
            return AccessDeniedView();

        var model = new SpecificationAttributeReportListModel();
        var specificationAttributes = _specificationAttributeService.GetSpecificationAttributes();
        var specificationAttributesModel = PrepareSpecificationAttributeModel(specificationAttributes);
        model.SpecificationAttributes = specificationAttributesModel;

        //Return Model data
        return View(model);
    }

/// <summary>
    /// Used to load dropdownlist for SpecificationAttributeOptions
    /// </summary>
    /// <param name="specificationAttributeId">SpecificationAttribute Identifier</param>
    /// <returns>Json data to build dropdownlist</returns>
    public JsonResult GetSpecificationAttributeOptions(int specificationAttributeId)
    {
        //Get the SpecificationAttributeOptions for this SpecificationAttributeId
        var specificationAttributeOptions = _specificationAttributeService.GetSpecificationAttributeOptionsBySpecificationAttribute(specificationAttributeId);
        //Load data into SpecificationAttributeOptionModel
        var specificationAttributeOptionsModel = PrepareSpecificationAttributeOptionsModel(specificationAttributeOptions);
        //Pluck Id and Name from data
        var returnData = (from sao in specificationAttributeOptionsModel select new { id = sao.Id, name = sao.Name }).ToList();
        //Return specific data
        return Json(returnData, JsonRequestBehavior.AllowGet);
    } 
```

感谢所有人的回答并试图提供帮助。我很感激。希望这可以帮助可能遇到相同问题的其他人。

# php - mobiquo.php 是什么？

> ID：13570745
> 
> 赞同：19
> 
> 时间：2012-11-26T18:17:15.810
> 
> 标签：php, webserver

最近，我在服务器日志中收到了大量关于“/mobiquo/mobiquo.php”的条目。但是，我的站点不使用 PHP，并且从未有过具有该名称的文件。有谁知道“mobiquo”是什么或为什么有人试图访问“/mobiquo/mobiquo.php”？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-07T15:41:10.070

您很可能有访问者使用**Tapatalk Notifier** Chrome 扩展程序。我没有在此处放置链接，因为它的行为似乎有点危险，但是您可以在 Google 上找到它。

显然，它会**盲目地**尝试`POST "/mobiquo/mobiquo.php"`在**您使用 Chrome 访问的每个网页上**查看它是否是与 Tapatalk 兼容的论坛。在这种情况下，它可以检索新消息并显示通知。

我们刚刚在我们的 Ruby on Rails 应用程序上获得了相同类型的日志。结果，访问者立即与我们的网站断开了连接，因为 Rails 对不是由网站本身发出的 AJAX 查询提供了保护（潜在的 XSS 攻击）。

# php - 无法从 codeigniter 站点 URL 中删除 index.php？

> ID：13570750
> 
> 赞同：2
> 
> 时间：2012-11-26T18:17:29.707
> 
> 标签：php, .htaccess, codeigniter, url, indexing

我已经阅读了有关它的删除指南，他们告诉我将其添加到我的 htdocs 根目录中的 .htaccess 中：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

但是我的网站目录是这样的：htdocs\mywebsite\

我尝试在 htdocs 和 mywebsite 中添加 htaccess 文件，但没有结果。我也试过修改最后一行看起来像

```
RewriteRule ^(.*)$ mywebsite/index.php/$1 [L] 
```

在 htdocs 和 mywebsite 目录中。但我不知道什么是正确的 .htaccess 语法或它是如何工作的，所以我真的没想到它会起作用。

我还尝试在 codeigniter 目录树的其他任何地方修改 .htaccess 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:26:22.353

你看过这个吗？[如何删除codeigniter路径中的“index.php”](https://stackoverflow.com/questions/1445385/how-to-remove-index-php-in-codeigniters-path)

您是否更改了配置文件中的 index_path 变量？那是application/config/config.php，2.1.3版的第29行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:43:45.077

根目录和网站目录中都需要有一个 htaccess 文件。它们都需要包含相同的内容，除了根目录中的文件需要更新索引的路径以包含您的网站目录。

根目录：

```
RewriteEngine on
RewriteBase /
# Hide the application and system directories by redirecting the request to index.php
RewriteRule ^(application|system|\.svn) index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ yourwebsite/index.php/$1 [QSA,L] 
```

网页目录：

```
RewriteEngine on
RewriteBase /
# Hide the application and system directories by redirecting the request to index.php
RewriteRule ^(application|system|\.svn) index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [QSA,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:36:29.017

确保你的虚拟主机条目中有这个：

```
 <Directory "/path...to directory">
        Order allow,deny
        Allow from all
        Allowoverride all
    </Directory>

    <IfModule mod_rewrite.c>
        RewriteEngine on
    </IfModule> 
```

除根目录外，您无需修改​​任何 .htaccess 文件。如上所述，请确保您在 config.php 文件中进行了正确设置。

# php - MySQL LOAD XML 返回“拒绝访问”

> ID：13570755
> 
> 赞同：1
> 
> 时间：2012-11-26T18:17:54.480
> 
> 标签：php, mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:45:46.377

它可以通过以下方式修复：

```
grant file on *.* to db_user@###.###.###.### identified by 'db_user_passwd'; 
```

# php - 使用另一个应用程序对 Drupal 7 用户进行身份验证？

> ID：13570756
> 
> 赞同：1
> 
> 时间：2012-11-26T18:17:54.977
> 
> 标签：php, mysql, drupal, drupal-7

所以基本上我公司网站的一部分是使用 Drupal 7 加上商务插件运行的。我想知道是否有一种安全的方法可以在网站的其他不使用 Drupal 的部分中利用该系统中已经存在的用户。这是为了避免由于程序之间缺乏通信而为一个用户拥有两个单独的用户帐户。有没有一种安全的方法可以根据 Drupal 数据库中的信息对我的应用程序中的用户进行身份验证，或者有一种标准的方法来解决这个问题？Drupal 支持数据库是一个庞大、奇怪、复杂的庞然大物，我不想激怒它。

我唯一需要做的就是确定如果用户通过我的身份验证表单登录，他们的凭据是否有效。如果我可以通过使用 Drupal 登录系统来做到这一点（也许通过传递一个 url 来转发），那就太好了。或者是否有一个已经管理这个的脚本？

我还希望能够根据我确信 Drupal 软件设置的 cookie 来确定用户是否已经登录并且仍然记得。

参考资料、我可以在 Drupal 核心中使用的适用脚本等将不胜感激。我是一个对 Drupal 一无所知的人，但拥有良好的 PHP/知识，因为我已经专业从事 Web 开发多年。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:44:23.807

是的，这很容易，您可以通过以下两种方式之一来实现。

选项 1，使用服务模块，您可以使用 REST 登录/验证用户。

选项2，您可以编写自定义代码。您可以从用户模块中包含[Drupal Boostrap或您需要的单个文件。](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/drupal_bootstrap/7)然后只需使用[user_authenticate()](http://api.drupal.org/api/drupal/modules!user!user.module/function/user_authenticate/7)函数来检查用户名和密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T05:26:57.243

使用使用 Drupal 引导程序的 PHP，
这个文件应该在 drupal 安装里面
**这很容易**

```
//set the working directory to your Drupal root
define("DRUPAL_ROOT",     "/var/www/drupal/");

//require the bootstrap include
require_once 'includes/bootstrap.inc';

//Load Drupal
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL); 
//(loads everything, but doesn't render anything)

$name = 'admin';
$password = 'admin';

//use drupal user_authenticate function
if(!user_authenticate($name, $password)){
    echo 'invalid';
}else{
    echo 'valid';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:41:21.167

您还可以使用服务模块使用 xml，请在此处查看详细信息[http://drupal.org/node/1105470](http://drupal.org/node/1105470)

# python - 在 Python 中的字典中保持相同的值

> ID：13570757
> 
> 赞同：2
> 
> 时间：2012-11-26T18:17:59.360
> 
> 标签：python, dictionary, reset

有点 Python 新手，但可以执行以下操作吗？

```
>>>random_dict=dict(a=2)
>>>addOnlyOneValue(random_dict)
{'a': 3}
>>>addOnlyOneValue(random_dict)
{'a': 3} 
```

我做了什么：

```
def addOnlyOneValue(random_dict):
    random_dict2=random_dict     #I thought random_dict and random_dict2 would be modified independently    
    for val in random_dict2.keys():
        random_dict2[val]+=1
    print (random_dict2) 
```

但如果我这样做，我会得到以下信息：

```
>>>random_dict=dict(a=2)
>>>addOnlyOneValue(random_dict)
{'a': 3}
>>>addOnlyOneValue(random_dict)
{'a': 4} 
```

是否可以在 addOnlyOneValue 函数中以某种方式将 random_dict 重置为其原始值（此处为 random_dict=dict(a=2)）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:19:29.853

你想要做的是[copy()](http://docs.python.org/3/library/stdtypes.html#dict.copy)字典：

```
random_dict2 = random_dict.copy() 
```

在您的示例中，您只是`random_dict2`引用`random_dict`- 您想要创建一个具有相同值的新字典（请注意，这是一个浅拷贝，因此如果您的字典有可变项，新字典将指向那些物品仍然存在，这可能会导致看似奇怪的行为）。

请注意，您可以使用[字典理解](http://www.youtube.com/watch?v=pShL9DCSIUw)来执行此操作，而不是手动循环：

```
def addOnlyOneValue(random_dict):
    print({key: value+1 for key, value in random_dict.items()}) 
```

字典推导是通过修改现有数据结构中的值来创建新字典的最佳方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:25:39.977

将字典（或除字符串或数字之外的任何其他对象）分配给另一个变量的结果是对该对象的引用的分配，它不会创建副本。你可能会这样做：

```
random_dict2 = dict(random_dict) 
```

列表类似：

```
my_copy = list(some_list) 
```

请注意，此副本是“浅”的，这意味着仅复制列表并将包含对所包含对象的引用，而不是对象的副本。阅读有关[在 python 中复制的](http://docs.python.org/2/library/copy.html)更多信息。

# android - Android Spring Jackson 映射：NoClassDefFoundError

> ID：13570759
> 
> 赞同：3
> 
> 时间：2012-11-26T18:18:07.223
> 
> 标签：android, spring, rest, jackson

我试图让我的 android 应用程序作为 REST 客户端运行。基本上我遵循了这个例子：[https](https://github.com/SpringSource/spring-android-samples/tree/master/spring-android-basic-auth/client/src/org/springframework/android/basicauth) ://github.com/SpringSource/spring-android-samples/tree/master/spring-android-basic-auth/client/src/org/springframework/android/basicauth 。

我正在为 Android 2.3 及更高版本开发。我添加了

```
spring-android-rest-template-1.0.0.RELEASE.jar
spring-android-auth-1.0.0.RELEASE.jar
spring-android-core-1.0.0.RELEASE.jar and
jackson-mini-1.9.11.jar 
```

到我的构建路径。

无论如何我总是得到这些错误

```
11-26 19:01:24.461: E/dalvikvm(15994): Could not find class 'org.codehaus.jackson.map.ObjectMapper', referenced from method org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.<init>
11-26 19:01:24.480: E/AndroidRuntime(15994): java.lang.RuntimeException: An error occured while executing doInBackground()
11-26 19:01:24.480: E/AndroidRuntime(15994): Caused by: java.lang.NoClassDefFoundError: org.codehaus.jackson.map.ObjectMapper 
```

在此代码的第二行：

```
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter()); 
```

有人可以帮我吗？

鸢尾花

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:21:55.793

如果您`NoClassDefFoundError`在运行时获得，那么我怀疑您没有包含在运行时工作的 .jar 文件。您必须像这样检查每个 .jar 的复选框：

![在此处输入图像描述](../Images/0768261d28c9ae4c94edaeac086c1f76.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:17:38.417

该问题的解决方案是（正如 Selvin 在他的评论中所说）包括完整的杰克逊而不是杰克逊迷你库。再次感谢塞尔文。

# android - 错误充气按钮

> ID：13570766
> 
> 赞同：0
> 
> 时间：2012-11-26T18:18:33.400
> 
> 标签：android, button

我有一个带有 Button 的布局：

```
<Button
    android:id="@+id/myapp_new"
    style="@style/header_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:background="@drawable/header_button"
    android:gravity="center"
    android:text="new" /> 
```

按钮的样式定义如下：

```
<style name="header_button" parent="@android:style/TextAppearance.Medium">
    <item name="android:textColor">@color/white</item>
    <item name="android:textSize">16sp</item>
</style> 
```

当我在手机上打开此活动时，我收到了崩溃。崩溃发生在设置内容视图的行中：

```
setContentView(R.layout.layout_tags); 
```

如果我删除`android:background`参数，崩溃就会消失。我不明白，因为 drawable 包含在应用程序中，并且它在其他设备上运行良好，包括模拟器。

我将在此线程的底部发布错误日志。

正如我所说，这种崩溃只发生在我的一台设备上（我有 2 个 + 模拟器）。它发生在运行 Android 2.2.1 的旧手机上，但没有出现在我的模拟器（运行 2.2）或我的新手机（运行 4.1.2）上。

最大的不同是我的崩溃设备的屏幕分辨率较低。我在 ldpi 文件夹中没有图像。我的印象是Android会自动从下一个文件夹中选择图像。此外，我还有很多其他加载得很好的图像。

我真的很想将我的应用程序发布到 Google Play 商店，但这阻碍了我。我担心这种崩溃会发生在其他人的手机上，即使我只能在一台设备上重现它。有没有人有任何想法？我迷路了。

```
11-26 12:03:04.740: E/AndroidRuntime(2800): FATAL EXCEPTION: main
11-26 12:03:04.740: E/AndroidRuntime(2800): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp.app/com.myapp.app.activity.ActivityTags}: android.view.InflateException: Binary XML file line #65: Error inflating class android.widget.Button
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.os.Looper.loop(Looper.java:123)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at java.lang.reflect.Method.invokeNative(Native Method)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at java.lang.reflect.Method.invoke(Method.java:521)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at dalvik.system.NativeStart.main(Native Method)
11-26 12:03:04.740: E/AndroidRuntime(2800): Caused by: android.view.InflateException: Binary XML file line #65: Error inflating class android.widget.Button
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.createView(LayoutInflater.java:513)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.app.Activity.setContentView(Activity.java:1647)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at com.myapp.app.activity.ActivityTags.onCreate(ActivityTags.java:75)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
11-26 12:03:04.740: E/AndroidRuntime(2800):     ... 11 more
11-26 12:03:04.740: E/AndroidRuntime(2800): Caused by: java.lang.reflect.InvocationTargetException
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.widget.Button.<init>(Button.java:65)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at java.lang.reflect.Constructor.constructNative(Native Method)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.view.LayoutInflater.createView(LayoutInflater.java:500)
11-26 12:03:04.740: E/AndroidRuntime(2800):     ... 26 more
11-26 12:03:04.740: E/AndroidRuntime(2800): Caused by: java.lang.StackOverflowError
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.StateListDrawable$StateListState.<init>(StateListDrawable.java:255)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.StateListDrawable.<init>(StateListDrawable.java:301)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.StateListDrawable.<init>(StateListDrawable.java:68)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:750)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:729)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.content.res.Resources.loadDrawable(Resources.java:1694)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.content.res.Resources.getDrawable(Resources.java:581)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:160)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:788)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:729)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.content.res.Resources.loadDrawable(Resources.java:1694)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.content.res.Resources.getDrawable(Resources.java:581)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:160)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:788)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:729)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.content.res.Resources.loadDrawable(Resources.java:1694)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.content.res.Resources.getDrawable(Resources.java:581)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:160)
11-26 12:03:04.740: E/AndroidRuntime(2800):     at android.graphics.drawable.Drawable.createF 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:02:59.913

这个`StackOverflowError`例外让我认为你的`header_button`背景取决于它自己，所以它递归地加载同一个文件直到它死掉。

# variables - SSIS Forloop：根据迭代次数为变量名赋值

> ID：13570767
> 
> 赞同：0
> 
> 时间：2012-11-26T18:18:37.487
> 
> 标签：variables, for-loop, ssis, iteration

我正在尝试使用 ForLoop 容器将值分配给多达 10 个不同的变量....

变量 1 变量 2 。. . var10

基于迭代次数。

我需要循环根据已根据查询的结果集分配了整数值的变量来迭代一定次数……那部分工作得很好。

我不知道如何告诉forloop使用哪个变量来分配值....即，如果我在迭代＃1然后将值分配给var1，迭代＃2然后将值分配给var2....等等。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T21:37:27.807

虽然我不是 100% 确定你为什么想要这种方法，但要回答这个问题，你可以走 2 条路线

在 2005-2008R2 环境中，您的控制流可能看起来像这样

![控制流程 2008](../Images/5a17365286ddc8dfec8d64fef02fce0b.png)

我已经定义了 11 个变量，都是 Int32 类型。计数器，然后是变量 1 到变量 10。

我的 For 循环配置为

![For循环编辑器](../Images/583cb805d0c6d54859067ce54208746c.png)

将当前值分配给变量将在脚本任务中处理。我已将 Counter 变量设置为只读变量，Variable1-10 为读写。然后我有一个基本的 Switch 语句来处理映射

```
 public void Main()
    {
        int counter = (Int32) Dts.Variables["User::Counter"].Value;

        switch (counter)
        {
            case 1:
                Dts.Variables["User::Variable1"].Value = counter;
                break;
            case 2:
                Dts.Variables["User::Variable2"].Value = counter;
                break;
            case 3:
                Dts.Variables["User::Variable3"].Value = counter;
                break;
            case 4:
                Dts.Variables["User::Variable4"].Value = counter;
                break;
            case 5:
                Dts.Variables["User::Variable5"].Value = counter;
                break;
            case 6:
                Dts.Variables["User::Variable6"].Value = counter;
                break;
            case 7:
                Dts.Variables["User::Variable7"].Value = counter;
                break;
            case 8:
                Dts.Variables["User::Variable8"].Value = counter;
                break;
            case 9:
                Dts.Variables["User::Variable9"].Value = counter;
                break;
            case 10:
                Dts.Variables["User::Variable10"].Value = counter;
                break;
            default:
                break;
        }
        Dts.TaskResult = (int)ScriptResults.Success;
    } 
```

SQL Server 2012 版提供了一个现成的表达式任务。如果您更喜欢这种方法并且不在 2012 年，那么示例项目有一个表达式任务，您可以在您的服务器上构建和安装。

无论如何，您可以使用优先约束，`Expression and Constraint`然后在其中测试您的价值。

![在此处输入图像描述](../Images/665c4435fda75850de1fbe0fdbf99e46.png)

即使我有 2012 年的安装，我可能仍然会使用代码路线，因为我认为这是一种更清洁的方法。虽然这两种方法都为您提供了到 VariableN 的硬编码映射。@STLRick（密苏里州代表！）认为将复杂变量存储在 Object 类型的变量中可能是一种更可取的方法，尽管我承认我不太明白为什么要将 For 循环的值存储为您已经知道您的范围（即使基于动态初始值和最终值）

# javascript - 如何将一些参数传递给 addEventListener 中调用的函数？

> ID：13570770
> 
> 赞同：15
> 
> 时间：2012-11-26T18:18:49.757
> 
> 标签：javascript

> **可能重复：**
> [如何将参数传递给 addEventListener 侦听器函数？](https://stackoverflow.com/questions/256754/how-to-pass-arguments-to-addeventlistener-listener-function)

如何通过事件将一些参数（在本例中为整数）传递给`addEventListener`函数`click`？

我有两个按钮；如果我按右边的我想做一些事情，如果我按左边的那么我希望它做其他事情。

这是代码：

```
document.getElementById('date_right').addEventListener( 'click', switch_date(1), false );
document.getElementById('date_left').addEventListener( 'click', switch_date(-1), false );
  function switch_date( k )
  {
    if(k==1)
    {
      //do stuff
    }
  else
  {
    //another stuff
  }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T18:20:38.783

你没有。使用匿名函数：

```
document.getElementById('date_right').addEventListener('click', function () {
    switch_date(1);
}, false);
document.getElementById('date_left').addEventListener('click', function () {
    switch_date(-1);
}, false); 
```

或者使用不带参数的命名函数：

```
function onRightDateClick() {
    switch_date(1);
}

function onLeftDateClick() {
    switch_date(-1);
}

document.getElementById('date_right').addEventListener('click', onRightDateClick, false);
document.getElementById('date_left').addEventListener('click', onLeftDateClick, false); 
```

# django-models - Django Admin - 具有外键字段的模型的自定义清理方法

> ID：13570778
> 
> 赞同：4
> 
> 时间：2012-11-26T18:19:17.450
> 
> 标签：django-models, django-forms, django-admin, django-1.4

考虑以下模型：

```
class Arena(models.Model):
  crowd_capacity = models.PositiveInteger()
  # more fields here

class Section(models.Model):
  name = models.CharField(max_length=10)
  crowd_capacity = models.PositiveInteger()
  arena = models.ForeignKey(Arena, related_name='sections') 
```

管理员.py：

```
class SectionInline(admin.StackedInline):
    model = Section
    fk_name = 'arena'
    extra = 1

class ArenaAdmin(admin.ModelAdmin):
    inlines = [
        SectionInline,
    ] 
```

我想添加一个验证方法来检查所有section.crowd_capacity 的总和是否不超过arena.crowd_capacity 的总和。

起初我想用干净的方法编写一个自定义的 SectionFormSet，但后来我没有看到如何获取 arena.crowd_capacity。

我还尝试向 Arena 添加 clean 方法，它确实显示了一个不错的红色验证错误，但不能解决问题。看起来 Arena clean 方法在保存所有部分后运行，并且更改 section.crowd_capacity 和 we section 有问题没有效果。

我尝试的验证方法：

```
def clean(self):
        super(Arena, self).clean()
        capacity = 0
        for s in self.sections.all():
            capacity += s.crowd_capacity

        if capacity > self.crowd_capacity:
            raise ValidationError('The sum of all sections crowd capacity '
                                  'exceeds arena crowd capacity') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:43:13.067

好的，我终于找到了方法。

澄清一下，我想验证所有部分的人群容量总和不超过竞技场总容量。

最终解决方案是（在 admin.py 中）：

```
class SectionFormSet(forms.models.BaseInlineFormSet):
    def clean(self):
        if any(self.errors):
            return
        capacity = 0
        for f in self.forms:
            try:
                capacity += f.cleaned_data['crowd_capacity']
                if capacity > f.cleaned_data['arena'].crowd_capacity:
                    raise ValidationError('The sum of all sections crowd capacity '
                                              'exceeds arena crowd capacity')
            except KeyError:
                # in case of empty form
                pass

class SectionInline(admin.StackedInline):
    model = Section
    formset = SectionFormSet

class ArenaAdmin(admin.ModelAdmin):
    inlines = [
        SectionInline,
    ] 
```

就是这样，模型没有变化。奇迹般有效 ：）

# javascript - 在按钮单击和执行控制器路径时运行 Javascript

> ID：13570779
> 
> 赞同：0
> 
> 时间：2012-11-26T18:19:20.557
> 
> 标签：javascript, asp.net-mvc-3, controller, action

我有以下代码

```
@using (Html.BeginForm("ConfirmBid", "Lot"))
{
    ...
    <input name="button" value="Place bid" type="submit" class="btn btn-size2" />
    ...
} 
```

我想在按下按钮时运行一些 JavaScript 代码，但前提是控制器方法 ConfirmBid 转到特定的代码行（成功路径）。这怎么可能实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:09:13.603

您可以从您的操作中返回 JavaScriptResult，这将执行以返回值编写的 js。请参阅： http: [//mazharkaunain.blogspot.com/2011/02/how-to-use-aspnet-mvc-javascriptresult.html](http://mazharkaunain.blogspot.com/2011/02/how-to-use-aspnet-mvc-javascriptresult.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:27:25.550

只需输出您想要有条件地运行的 javascript 代码。也许是这样的：

为“失败”分支输出：

```
<input name="button" value="Place bid" type="submit" class="btn btn-size2" /> 
```

为“成功”分支输出这个：

```
<input name="button" value="Place bid" type="submit" class="btn btn-size2" onclick="return some_js_function()" />
<script type="text/javascript">
function some_js_function() {
    // your logic here
} 
```

# ios - 后台tableview ios

> ID：13570781
> 
> 赞同：-1
> 
> 时间：2012-11-26T18:19:33.737
> 
> 标签：ios, user-interface, custom-controls, tableview

[http://rghost.net/41831486.view](http://rghost.net/41831486.view)

我需要为 UItableView 制作这个自定义界面，但是如果我使用下面的这段代码，我的结果很糟糕，我用作背景的图片会在每个单元格中显示出来。我需要一个示例代码，请帮助我。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[self view] setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bg"]]];

    [self fetchAudios];
    // Do any additional setup after loading the view.

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:23:24.530

您可以考虑将 tableview 设置为 viewcontroller 的子视图，在其后面添加一个 imageview，同时使 tableview 的背景清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:06:41.297

尝试这样做：

```
UIImageView *ImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.png"]];
[ImageView setFrame:self.tableView.frame];

self.tableView.backgroundView = ImageView; 
```

# symfony - 可软删除行为并真正删除实体

> ID：13570782
> 
> 赞同：9
> 
> 时间：2012-11-26T18:19:33.953
> 
> 标签：symfony, doctrine-orm, symfony-2.1, sonata-admin, soft-delete

我正在使用[DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)和[StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle)来获得可软删除的行为。

它在我的应用程序的前端工作得非常好。

在后端，我需要“硬”删除实体的选项。

我在我的管理控制器中禁用了过滤器（我使用 SonataAdmin）：

```
$filters = $this->getModelManager()->getEntityManager($this->getClass())->getFilters();

if (array_key_exists('softdeleteable', $filters->getEnabledFilters())) {
    $filters->disable('softdeleteable');
} 
```

这有效（软删除的实体出现在列表中），但是当我尝试删除它时，实体确实再次被软删除。如何强制“硬”删除？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T16:27:00.460

您不需要禁用过滤器 - 它仅用于过滤选择的记录。您必须改为禁用侦听器：

```
// $em is your EntityManager
foreach ($em->getEventManager()->getListeners() as $eventName => $listeners) {
    foreach ($listeners as $listener) {
        if ($listener instanceof \Gedmo\SoftDeleteable\SoftDeleteableListener) {
            $em->getEventManager()->removeEventListener($eventName, $listener);
        }
    }
} 
```

然后打电话

```
$em->remove($entity);
$em->flush(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-12T13:38:28.263

启用 softdeleteable 后，无需创建侦听器或任何要硬删除的东西。

原始的 softdeleteable 事件有这一行：

```
$reflProp = $meta->getReflectionProperty($config['fieldName']);
$oldValue = $reflProp->getValue($object);
if ($oldValue instanceof \Datetime) {
    continue; // want to hard delete
} 
```

这一切意味着如果你：

```
$entity->setDeletedAt(new \Datetime());
$em->flush(); 
```

接着：

```
$em->remove($entity);
$em->flush(); 
```

届时，它将被硬删除。

如果您在 ->remove($entity) 之后调用 ->flush() 时在 deletedAt 字段中已经有一个有效日期，则您的实体将被硬删除

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-17T13:38:28.673

不是最优雅的方式：你总是可以用 SQL 进行真正的删除，它会绕过 softdeletable

```
$em->createQuery("DELETE MyEntity e WHERE e = :et")->setParameter('et',$entity)->execute(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-01T16:32:44.293

虽然这个问题有点老，但它可能对某人有用：

创建自己的事件侦听器可能是更好的解决方案：

```
class SoftDeleteableListener extends BaseSoftDeleteableListener
{

/**
 * @inheritdoc
 */
public function onFlush(EventArgs $args)
{
    $ea = $this->getEventAdapter($args);
    $om = $ea->getObjectManager();
    //return from event listener if you disabled filter: $em->getFilters()->disable('softdeleteable');
    if (!$om->getFilters()->isEnabled('softdeleteable')) {
        return;
    }

    parent::onFlush($args);
}

} 
```

并添加您的配置：

```
gedmo.listener.softdeleteable:
    class: AppBundle\EventListener\SoftDeleteableListener
    tags:
        - { name: doctrine.event_subscriber, connection: default }
    calls:
        - [ setAnnotationReader, [ @annotation_reader ] ] 
```

来源：[https ://github.com/Atlantic18/DoctrineExtensions/issues/1175](https://github.com/Atlantic18/DoctrineExtensions/issues/1175)

# bash - 每 30 秒运行一次 cron 作业的最佳方式是什么？

> ID：13570784
> 
> 赞同：2
> 
> 时间：2012-11-26T18:19:39.773
> 
> 标签：bash, cron, crontab, cron-task

我想每 30 秒运行一次 cron 作业，但 cron 不允许调度作业的频率超过一分钟一次。

每 30 秒运行一次 cron 作业的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:46:36.540

这是一种避免滑动窗口问题的方法。创建两个脚本，您的主要脚本（此处为 main.sh）和睡眠脚本（sleep30.sh）：

主.sh：

```
#!/bin/bash
date >>/tmp/main.out 
```

睡眠30.sh：

```
#!/bin/bash
sleep 30
. $1 
```

crontab：

```
* * * * * /pathtoscripts/sleep30.sh /pathtoscripts/main.sh
* * * * * /pathtoscripts/main.sh 
```

这是不优雅的，但应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:23:28.180

The shortest time interval you can use with cron is 1 minute. You could put a sleep in a bash script, but that would probably be the best you can do

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-08T09:56:35.187

如果任务执行时间很短，可以忽略不计，可以这样做：

```
* * * * * /path/cmd; sleep 30; /path/cmd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:35:05.250

简短的回答是您不能在一分钟内安排 cron 作业。您可以使用`sleep 30`，但这会引入滑动窗口问题（任务现在间隔为 30 秒 + 任务的运行时间）。您可以将任务放入一个`while true`循环中，并让它检查每次迭代是否至少经过 30 秒，如果是这样 - 再次运行该任务，如果不是`sleep 1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T18:40:16.947

你可以升级到最新的 FreeBSD 测试版，它有一个特殊的新 cron 修饰符：@every_second。将您的 cronjob 包裹在 lockf 中，休眠 30 秒，运行该作业，然后终止。这样，您可以每分钟运行两次。

# entity-framework - 找不到用于使用 Entity Framework、Visual Studio 2012 添加与数据库的连接的模板

> ID：13570785
> 
> 赞同：3
> 
> 时间：2012-11-26T18:19:40.163
> 
> 标签：entity-framework, visual-studio-2012

我右键单击该项目`> Add > New item > Data >`，我看不到 ADO.NET 实体框架的模板，它不存在吗？

我可以在 NuGet 安装程序中看到已安装实体框架。我运行 Windows 8 和 Visual Studio 2012 pro。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:21:56.267

在 VS2012 中，您必须安装“Microsoft SQL Server Data Tools”或“Microsoft Web Developer Tools”才能获得 EF 工具

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:48:53.797

它应该在那里 - 它被称为“ADO.NET 实体数据模型”

`.edmx`它为数据库优先添加一个文件。

如果您使用代码优先，只需编写模型并在配置文件中添加连接字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:57:31.943

解决办法是修复Visual Studio 2012，安装出现问题。

# java - 使用 Reflections 库查询给定包中的资源，忽略子包

> ID：13570788
> 
> 赞同：0
> 
> 时间：2012-11-26T18:19:41.990
> 
> 标签：java, reflections

使用[Reflections 库](http://code.google.com/p/reflections/)，如何在一个包中获取具有特定文件扩展名的所有资源？

我试过这段代码：

```
 ConfigurationBuilder cb = new ConfigurationBuilder();
    cb.setUrls(...);
    cb.setScanners(new ResourcesScanner());
    FilterBuilder fb = new FilterBuilder();
    fb.include(FilterBuilder.prefix("org.p1")); //filtering resources in package "org.p1"
    cb.filterInputsBy(fb);
    Reflections reflections = new Reflections(cb);
    Pattern pattern = Pattern.compile(".*\\.xxx");
    Set<String> set = reflections.getResources(pattern); //resources having as extension "xxx" and located in package "org.p1" 
```

但这是回答包“org.p1”**和**其中的任何子包（例如“org.p1.p2”）中扩展名为“xxx”的所有资源。

我可以将反射配置为仅回答位于“org.p1”中的资源并忽略其子包（如果有）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:29:13.583

为什么不试试`Pattern.compile("org\\.p1\\.xxx");`呢？

# r - R中响应面的scatterplot3d

> ID：13570792
> 
> 赞同：4
> 
> 时间：2012-11-26T18:20:03.720
> 
> 标签：r, graph, scatter-plot

我想通过 scatterplot3d 绘制响应面，但以下代码通过错误。

```
library(rsm)
swiss2.lm <- lm(Fertility ~ poly(Agriculture, Education, degree = 2), data = swiss)
persp(swiss2.lm, Education ~ Agriculture, zlab = "Fertility")

library(scatterplot3d)
s3d <- 
  scatterplot3d(
      swiss
   # , type = "h"
    , highlight.3d = TRUE
    , angle = 55
    , scale.y = 0.7
    , pch = 16
     )

s3d$plane3d(swiss2.lm, lty.box = "solid") 
```

如果您能帮助解决这个问题，我将不胜感激。谢谢

**开斋节**

```
Error in segments(x, z1, x + y.max * yx.f, z2 + yz.f * y.max, lty = ltya,  : 
  cannot mix zero-length and non-zero-length coordinates 
```

我正在使用图书馆中的`swiss`数据。`rsm`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T22:24:20.113

您对使用的依恋程度如何`scatterplot3d`？如果你愿意这样做，`rgl`这很容易。按照您的示例：

设置均匀间隔的网格并进行预测：

```
newdat <- expand.grid(Education=seq(0,50,by=5),
            Agriculture=seq(0,100,by=10))
newdat$pp <- predict(swiss2.lm,newdata=newdat) 
```

绘制点并添加曲面：

```
library(rgl)
with(swiss,plot3d(Agriculture,Education,Fertility))
with(newdat,surface3d(unique(Agriculture),unique(Education),pp,
                      alpha=0.3,front="line"))
rgl.snapshot("swiss.png") 
```

![在此处输入图像描述](../Images/4759695b7b710fb3bba7647897224a21.png)

`rgl`有一些优点（隐藏线移除、照明效果、动态旋转和缩放）和一些缺点（不太适合基本包布局等；更难操作字体，包括`plotmath`方程式等；更难调整标签位置和情节风格）。包中的`scatter3d`函数`car`具有一些不错的功能，可以将回归曲面添加到`rgl`绘图中，但据我所知，它可以使用加法模型，但不允许二次多项式模型......

据我所知，为了在`scatterplot3d`框架中执行此操作，您必须构造与回归曲面中的四边形相对应的点并使用`xyz.convert`并`segments`绘制它们......

# c# - 使用 C# 如何设置移动站点地图 XML“urlset”（google 推荐）

> ID：13570795
> 
> 赞同：1
> 
> 时间：2012-11-26T18:20:23.747
> 
> 标签：c#, xml, sitemap

我正在尝试将谷歌推荐的移动站点地图标题添加到我的页面上，即：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0"> 
```

参考： http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=34648](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=34648)

如果我使用这个（C#）：

```
sitemap.WriteStartElement("urlset", "http://www.sitemaps.org/schemas/sitemap/0.9"); 
```

它产生以下xml：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"> 
```

如果我用前缀来做：

```
sitemap.WriteStartElement("mobile", "urlset", "http://www.google.com/schemas/sitemap-mobile/1.0"); 
```

然后我得到以下信息：

```
<mobile:urlset mobile:xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"> 
```

我怎样才能做到这一点？：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:46:21.987

查看 API`sitemap`对象似乎是`XmlWriter`. 要编写您的自定义命名空间，请使用以下命令：

```
sitemap.WriteStartElement("urlset", "http://www.sitemaps.org/schemas/sitemap/0.9");
sitemap.WriteAttributeString("xmlns", "mobile", string.Empty, "http://www.google.com/schemas/sitemap-mobile/1.0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:11:02.110

谢谢@Candide ...我能够在您的帮助下解决，但不得不稍微调整一下。这就是我让它工作的方式：

```
sitemap.WriteStartElement("urlset");
sitemap.WriteAttributeString("xmlns", "http://www.google.com/schemas/sitemap-mobile/1.0");
sitemap.WriteAttributeString("xmlns:mobile", "http://www.google.com/schemas/sitemap-mobile/1.0"); 
```

这在 xml 上输出为：

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0"> 
```

# javascript - 在 jQuery 中循环遍历 JSON 数据并使用正确的数组值

> ID：13570797
> 
> 赞同：0
> 
> 时间：2012-11-26T18:20:26.653
> 
> 标签：javascript, jquery

我有以下代码，我已经“拼凑”在一起。基本上它应该需要一些 JSON 数据（下面也是一个示例），预加载任何适用的图像并修改幻灯片以使用传回的数据。

它正在工作，但是图像和文本不匹配，我认为这与它有关，`currImg++%preloadArrayName.length`但我不确定这意味着什么......

任何帮助感激不尽！

```
function updateHomepageSlideshow(data)
{
var preloadArr = new Array();
var preloadArrName = new Array();
var preloadArrOffer = new Array();
var i;

/* preload images */
for(i=0; i < data.length; i++){
    preloadArr[i] = new Image();
    preloadArr[i].src = 'http://media.domain.com/restaurants/large/' + data[i]   ['restaurantCode'] + '.jpg';
    preloadArrName[i] = data[i]['restaurantName'];
    preloadArrOffer[i] = data[i]['offerName'];
}

var currImg = 1;
var intID = setInterval(changeImg(data), 6000);

/* image rotator */
function changeImg(data){
    $('#amazingOffersAt').hide();
    $('#homepageRestaurantNameId').html(preloadArrName[currImg++%preloadArrName.length]);
    $('#homepageRotatingImage').css('background-image','url(' + preloadArr[currImg++%preloadArr.length].src +')');
    $('#homepageRestaurantOfferId').html(preloadArrOffer[currImg++%preloadArrOffer.length]);
}
} 
```

**JSON**

```
[{
"restaurantName": "Caf\u00e9 des Amis",
"restaurantCode": "cafe-des-amis",
"address": "11 - 14 Hanover Place",
"town": "Covent Garden",
"county": "London",
"postcode": "WC2E 9JP",
"lat": "51.5133900",
"lng": "-0.1231300",
"largeImage": "1",
"offerTypeId": "9",
"offerName": "3 course set menu for \u00a315"
}, {
"restaurantName": "Palm Court Brasserie",
"restaurantCode": "palm-court-brasserie",
"address": "39 King Street",
"town": "Covent Garden",
"county": "London",
"postcode": "WC2E 8JS",
"lat": "51.5119700",
"lng": "-0.1243000",
"largeImage": "1",
"offerTypeId": "12",
"offerName": "3 courses and a kir royale \u00a322.50"
}, {
"restaurantName": "Clos Maggiore",
"restaurantCode": "clos-maggiore",
"address": "33 King Street",
"town": "Covent Garden",
"county": "London",
"postcode": "WC2E 8JD",
"lat": "51.5116900",
"lng": "-0.1247700",
"largeImage": "1",
"offerTypeId": "12",
"offerName": "2 courses: \u00a315.50"
}, {
"restaurantName": "Navajo Joe",
"restaurantCode": "navajo-joe",
"address": "34 King Street",
"town": "Covent Garden",
"county": "London",
"postcode": "WC2E 8JD",
"lat": "51.5116900",
"lng": "-0.1247700",
"largeImage": "1",
"offerTypeId": "1",
"offerName": "50% Off Your Food "
}, {
"restaurantName": "Le Deuxieme",
"restaurantCode": "le-deuxieme",
"address": "65a Long Acre, Covent Garden",
"town": "London",
"county": "West End London",
"postcode": "WC2E 9JD",
"lat": "51.5139100",
"lng": "-0.1227800",
"largeImage": "1",
"offerTypeId": "12",
"offerName": "Sunday offer: 3 courses &amp; half bottle of wine \u00a320"
}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:22:00.783

你应该使用

```
var currImg = 0; // let's start at first image
var intID = setInterval(changeImg, 6000); // you don't need the data and you were passing the result of the function, not the function
/* image rotator */
function changeImg(data){
    $('#amazingOffersAt').hide();
    var index = currImg++%preloadArrName.length;
    $('#homepageRestaurantNameId').html(preloadArrName[index]);
    $('#homepageRotatingImage').css('background-image','url(' + preloadArr[index].src +')');
    $('#homepageRestaurantOfferId').html(preloadArrOffer[index]);
} 
```

`currImg++`您的代码没有在每一行使用与increments相同的索引`currImg`。

更准确地说，`currImg++%preloadArrayName.length`是`(currImg++)%preloadArrayName.length`（参见[优先级](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)）：它采用模数`currImg`来确保获得一个值`[0, preloadArrayName.length[`（即数组中的有效索引）并递增`currImg`。

请注意，您的代码仅在 3 个数组具有相同大小时才有效。我不会使用 3 个数组，而是只使用一个数组但包含对象（就像你在 json 中拥有的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:47:48.667

你确定你在 changeImg() 中用来增加索引的方法吗？进行模数运算有什么意义？也许我错过了一些东西。

如果您想简单地遍历图像，为什么不这样做：

```
var currImg = 0;

function changeImg(data){

if(currImg == preloadArrName.length - 1){
   currImg = 0; // reset index to the first element
}else{
   currImg++ // increment the index to the next element
}
$('#amazingOffersAt').hide();

$('#homepageRestaurantNameId').html(preloadArrName[index]);
$('#homepageRotatingImage').css('background-image','url(' + preloadArr[index].src +')');
$('#homepageRestaurantOfferId').html(preloadArrOffer[index]); 
```

}

# winapi - 我们可以从 Windows 8 上的桌面应用程序发送磁贴通知吗？

> ID：13570799
> 
> 赞同：1
> 
> 时间：2012-11-26T18:20:36.407
> 
> 标签：winapi, windows-8, windows-runtime, windows-store-apps

[正如我们所知，我们可以通过此链接从桌面发送 toast 通知](http://msdn.microsoft.com/en-us/library/windows/desktop/hh802768%28v=vs.85%29.aspx)以及[代码示例](http://code.msdn.microsoft.com/windowsdesktop/sending-toast-notifications-71e230a2)从Windows 8 上的桌面应用程序（而不是商店应用程序）发送 toast 通知。我们正在研究是否可以从桌面应用程序发送磁贴通知，但我没有在互联网上找到信息。所以在我看来这是不可能的。但是我只想在这里与专家确认。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:29:39.650

您的假设是正确的 - 桌面应用程序不支持磁贴通知。

在[`TileUpdater`](http://msdn.microsoft.com/en-us/library/windows/apps/br208628.aspx)文档的要求部分中，该类被标记为“仅限 Windows 应用商店应用程序”。

# linux - Shell 重定向和文件 I/O 持续时间

> ID：13570803
> 
> 赞同：6
> 
> 时间：2012-11-26T18:20:42.330
> 
> 标签：linux, bash, io

我正在以三种不同的方式将一些输出重定向到文件，并且每种方式都需要明显不同的时间。

```
$ >/tmp/file ; time for i in {1..1000}; do for j in {1..1000}; do echo $i $j >> /tmp/file; done; done

real    0m33.467s
user    0m21.170s
sys     0m11.919s

$ >/tmp/file ; exec 3>/tmp/file; time for i in {1..1000}; do for j in {1..1000}; do echo $i $j >&3; done; done; exec 3>&-

real    0m24.211s
user    0m17.181s
sys     0m7.002s

$ >/tmp/file ; time for i in {1..1000}; do for j in {1..1000}; do echo $i $j; done; done >> /tmp/file 

real    0m17.038s
user    0m13.072s
sys     0m3.945s 
```

* * *

有人可以在这里解释差异。我目前的理解/怀疑是：

1.  第一个是最慢的，因为它多次打开/关闭文件，而其他只做一次。是对的吗？缓冲呢。通常，我希望所有输出都得到缓冲，在这种情况下我们不应该有这么大的时间差异。
2.  第三，如果所有输出都只写在外循环的末尾，那么当循环仍在执行时，所有输出都存储在哪里。也许在记忆中。这是否意味着如果我回显很多内容并且只在最后写入，我可能会耗尽内存。
3.  第 2 次更像第 1 次或第 3 次。为什么两者都如此不同。

PS：我已经运行了几次上述命令，发现时间是一致的。所以，我看到的差异一定是由于一些真正的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:32:08.383

1.  第一个版本做了一百万次`echo $i $j >> /tmp/file`，打开文件进行追加，写入并关闭它。

2.  执行一百万次`echo $i $j >&3`与执行一百万次的不同之处在于它不是每次都打开/关闭文件，而是写入文件描述符#3。`exec 3>/tmp/file`打开文件进行写入并将文件描述符保存为#3 。现在，当命令将其标准输出重定向到文件描述符#3（`>&3`回显后的效果）时，shell 需要在执行命令之前设置此重定向，然后将先前的分配恢复到标准输出。

3.  像这样重定向完整循环的输出`>> /tmp/file`对于 shell 来说要容易得多：它可以简单地执行 echo 命令，而无需设置额外的文件描述符。它只更改一次标准输出的分配。

关于缓冲：在所有三种情况下，底层文件系统都会缓冲对物理文件的访问，因此在该级别上没有区别。此外，大多数 linux 都在 /tmp 上安装了一个 tmpfs，它使您所做的一切都成为纯内存操作。因此，您在这里测量的不是 IO 性能，而是 shell 命令执行性能。您可以通过增加写入的字节数来证明这一点（向回显打印行添加一个常数值）：

```
>/tmp/file ; time for i in {1..1000}; do for j in {1..1000}; do echo "1000000 $i $j" >> /tmp/file; done; done

>/tmp/file ; exec 3>/tmp/file; time for i in {1..1000}; do for j in {1..1000}; do echo "1000000 $i $j" >&3; done; done; exec 3>&-

>/tmp/file ; time for i in {1..1000}; do for j in {1..1000}; do echo "1000000 $i $j"; done; done >> /tmp/file 
```

在我的 PC 上，这与没有常量“1000000”的时间相同，但写入文件的字节数是原来的两倍。

# wordpress - 使用 pre_get_posts 获取子页面

> ID：13570804
> 
> 赞同：1
> 
> 时间：2012-11-26T18:20:46.647
> 
> 标签：wordpress, loops

我正在使用 wordpress 创建一个网站，并且我有一个投资组合页面，其中显示了所有投资组合项目 - 这些项目由父页面“投资组合”的子页面组成。要在投资组合父页面上显示子页面及其内容，我需要一个特殊查询。为此，我只需为投资组合页面创建一个页面模板。在它上面我查询了数据库如下：

```
$parent = post->ID; //portfolio page ID
query_posts('post_type=page&post_parent='.$parent);//grab those children of portfolio 
```

精彩的。然而，随着时间的推移，我了解到最好使用 pre_get_posts 来完成这样的工作，因为它对服务器和 wordpress 的负担更少。更难，但可能：

```
function portfolioloop($query){

if ($query->is_page( 'portfolio') ){//query will only effect my portfolio page

 $children = get_pages(array('child_of' => 35, 'echo' => 0) ); 
    // i dont think post->ID; works here. 
   //35 is the post ID of portfolio. Let me know if im wrong.

  // get and add the children id's to array. only id's is needed. 
  for($i = 0; $i < sizeof($children); ++$i) { 
  $portfolioitems[] = $children[$i]->ID; //$portfolioitems is a list of id's only. thats what we want
   } 

   $query->set('post__in', $portfolioitems);

 }

}
add_filter('pre_get_posts','portfolioLoop'); 
```

唉，它返回找不到页面。我做错了什么？如果您能帮助我，我将不胜感激，谢谢，

# android - 等安卓

> ID：13570806
> 
> 赞同：2
> 
> 时间：2012-11-26T18:20:54.237
> 
> 标签：android, wait

我正在开发一个 Android 项目，我需要让程序等待 5 秒钟以显示一条消息，然后继续。我环顾四周，尝试了 Thread sleep(mili); 但它没有工作......我包含了我的代码，我只是做错了什么还是我还能做什么？

```
...
text.setText("You picked a goat");
lose++;
loser.setText("You have picked a goat " + lose + " time(s)");

Thread time = new Thread()
{
        @Override
        public void run(){
            try {
                synchronized(this){
                    wait(5000);
                }
            }
            catch(InterruptedException ex){}           
        }
    };

    time.start(); 
```

...

我还尝试将其放入自己的方法中并调用它。失败只是一个计数器，“文本”和“失败者”只是文本视图

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T18:25:37.433

一种方法是使用[Handler](http://developer.android.com/reference/android/os/Handler.html)类，它允许您`Runnable`在给定的毫秒数后调用 a 。这对于较短的时间跨度很有用，例如您的情况。

例如，使用[postDelayed()](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)方法：

```
new Handler().postDelayed(new Runnable()
{
    @Override
    public void run()
    {
        //do your stuff here.
    }
}, 5000); 
```

# javascript - setInterval 和对象的 Javascript 奇怪行为

> ID：13570811
> 
> 赞同：2
> 
> 时间：2012-11-26T18:21:20.460
> 
> 标签：javascript, object, settimeout

尝试在对象中使用 setInterval 时出现一些奇怪的行为。

这是我的代码：

```
var Person = {
    speech: null,

    tryToSpeak: function ()
    {
        this.speech = "hello";
        self.setTimeout (this.speak, 1000);
    },

    speak: function ()
    {
        // prints out undefined
        console.log (this.speech);
    }
}

Person.tryToSpeak (); 
```

当`speak()`通过`setTimeout()`它运行时，它无权访问任何对象数据，例如`speech`. 这到底是怎么回事？这是不可避免的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:23:24.967

这些方法不携带对象信息。您可以使用[`.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)...将该方法绑定到对象：

```
window.setTimeout(this.speak.bind( this ), 1000); 
```

阅读有关[javascript this 关键字的更多信息](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:54:03.917

先说一些注意事项：

*   一般来说，javascript 中的约定是为“类”定义保留大写名称，这些定义将使用`new`关键字创建“实例”。在我的回答中，我将使用`person`而不是`Person`.
*   setTimeout 是`window`对象的一个​​方法。`self.setTimeout`是不正确的。虽然在某些 javascript 实现`self`中是窗口，但在其他实现中不是，因此它是不可靠的。
*   `this` **总是**指*当前的执行上下文*，无论何时或如何发生。setTimeout 调用完全将函数从其正常的对象上下文中取出——它在那个时候只是一个函数，所以在执行时它没有预期的“this”对象。

我可以看到一些解决此问题的方法。

1.  使用[bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)来“创建一个新函数，在调用该函数时，将其*this*关键字设置为提供的值。”：

    ```
    window.setTimeout(this.speak.bind(this), 1000); 
    ```

2.  `this`将传递给 setTimeout 的函数包装在一个动态设置的匿名函数中：

    ```
    window.setTimeout(function(thisobj) {
       return function() {
          thisobj.speak.call(thisobj);
       }
    }(this), 1000); 
    ```

    我们正在使用一个函数在`thisobj`参数上创建一个闭包，该闭包恰好是使用`this` *调用 setTimeout 时的当前 this 对象调用的*。然后，该函数本身返回一个函数供 setTimeout 调用，并且该函数使用`call`（或者您可以使用`apply`）设置`this`对象以调用`speak`. 我们在这里所做的只是复制`bind`没有参数支持的功能——所以使用 bind 代替，除非你需要完整的跨浏览器和旧浏览器支持（在这种情况下你可以这样做，或者你可以加糖你的 javascript 所以绑定有效，代码位于我的答案底部）。但我想让你看看幕后发生了什么。

3.  显式访问您的人员对象的成员：

    ```
    speak: function () {
        console.log (person.speech); // instead of this.speech
    } 
    ```

4.  将 Person 更改为对象构造函数，可用于创建新的“person”实例：

    ```
    function Person() {
        var me = this;
        this.speech = null;
        this.tryToSpeak = function () {
            me.speech = "hello";
            window.setTimeout(me.speak, 1000);
        };
        this.speak = function () {
            console.log(me.speech);
        };
    }

    var person = new Person();
    person.tryToSpeak(); 
    ```

    `this`通过在构造函数中捕获作为私有变量的副本`me`，您可以稍后在其他方法中使用它。现在`this`捕获的内容是有意义的，因为当您运行时，`new Person()`会有一个执行上下文（与以您的方式简单地声明一个对象不同，执行上下文是`window`）。这种方法的一个很大的缺点是对象的每个实例都有自己的函数副本，因为它们不能成为对象原型的一部分（为了访问私有变量`me`）；

我相信还有其他方法可以处理它。你没有解释为什么你首先需要`person`成为一个对象，所以我不知道实现目标的最佳模式。您可能*不需要*多个人员对象，但您可能需要。对正在进行的上下文和目的进行更广泛的理解将有助于我更好地指导您。

注意：要“填充”没有的 javascript 实现`bind`，因此您可以更轻松地在函数上使用绑定，您可以这样做（注意与本机实现存在一些差异，请参阅与上面相同的[绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)链接以获取详细信息）：

```
if (!Function.prototype.bind) {
  Function.prototype.bind = function (oThis) {
    if (typeof this !== "function") {
      // closest thing possible to the ECMAScript 5 internal IsCallable function
      throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
    }

    var aArgs = Array.prototype.slice.call(arguments, 1), 
        fToBind = this, 
        fNOP = function () {},
        fBound = function () {
          return fToBind.apply(this instanceof fNOP && oThis
                                 ? this
                                 : oThis,
                               aArgs.concat(Array.prototype.slice.call(arguments)));
        };

    fNOP.prototype = this.prototype;
    fBound.prototype = new fNOP();

    return fBound;
  };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:23:33.487

这是不可避免的。当你像这样传递函数时，它们会丢失它们的执行上下文。

解决方案是捕获“this”变量：

```
var self = this;
setTimeout(function() { self.speak(); }, 1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T20:27:17.650

[ErikE 的第四个建议的](https://stackoverflow.com/questions/13570811/javascript-odd-behaviour-with-setinterval-and-objects/13571250#13571250)一个稍微不同的版本，它做同样的工作，但我认为更简单的代码是

```
function Person() {
    this.speech = null;
}
Person.prototype.tryToSpeak = function () {
    this.speech = "hello";
    var person = this;
    window.setTimeout(function() {person.speak();}, 1000);
};
Person.prototype.speak = function () {
    console.log(this.speech);
};

var person = new Person();
person.tryToSpeak(); 
```

正如 Erik 所说，您是否甚至*需要*多个`Person`对象都不是很清楚，但如果您需要，这种技术可能是最简单的。

* * *

**更新**（基于 ErikE 的评论）：这个版本为 , 添加了一个名称`Person`，并将`speech`in 作为参数传递，以明确谁在说什么。基本结构保持不变。

```
function Person(name) {
    this.name = name;
}
Person.prototype.tryToSpeak = function (speech) {
    var person = this;
    window.setTimeout(function() {person.speak(speech);}, 1000);
};
Person.prototype.speak = function (speech) {
    console.log(this.name + " says, '" + speech + "'.");
};

var lincoln = new Person("Abraham Lincoln");
var churchill = new Person("Winston Churchill");
lincoln.tryToSpeak("Four score and seven years ago...");
churchill.tryToSpeak("Never, never, never give up."); 
```

要点是`person`变量 in`tryToSpeak`是存储在闭包中的局部变量，而不是对某个单例的引用。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-26T18:28:29.717

我不知道你为什么有缺点。这是典型的范围/参考错误。想一想，这会是什么？答案：坚果。

因此，您可以直接引用该对象，如下所示：

```
 // prints out Hello
 console.log (Person.speach); 
```

或者将其作为属性传递给说话，就像这样：

```
self.setTimeout (this.speak(this), 1000); 
```

Jsfiddle 两种情况：

[http://jsfiddle.net/eukQH/](http://jsfiddle.net/eukQH/)

# data-structures - Dijkstra 算法：邻接矩阵复杂度问题

> ID：13570814
> 
> 赞同：2
> 
> 时间：2012-11-26T18:21:40.413
> 
> 标签：data-structures, graph-algorithm

我有一个任务来实现 Dijkstra 算法。我们得到了将图形作为邻接矩阵输入的骨架代码，但告诉我们的解决方案必须在 O(MlogN) {M-edges, N-vertices} 中运行。我看到了 PQ 和列表结构将如何实现这一点，但我看不出在我的情况下如何避免 O(N^2) 解决方案。摆脱矩阵的唯一方法是遍历每一行和每一列......对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:29:03.100

错误的。您的任务不是对矩阵中的每个值执行操作，而是找到 2 个节点之间的最短路径。在您的情况下，矩阵是保存数据的媒介，它不会改变算法的复杂性。该`O(MlogN)`算法可免费获得，例如：[Dijkstra's algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。

# c# - Cast Asp.Net API 方法返回为 HttpResponseMessage

> ID：13570815
> 
> 赞同：0
> 
> 时间：2012-11-26T18:21:41.270
> 
> 标签：c#, .net, asp.net-mvc, asp.net-web-api

在我尝试学习和理解 WebAPI 的过程中，我想我已经了解到 APIController 方法的返回值被包装到 HttpResponseMessage 中。

您还可以选择创建一个新的 HttpResponseMessage 并将其放入`List<Product>`其中。

例如，我对测试标头感兴趣，如果我用下面的代码传入一个接受标头，我想测试响应中返回的内容类型。

我知道我总是可以返回一个 HttpResponseMessage，因为严格来说这就是它的作用，但我只是想知道是否有一种方法可以将来自控制器方法的响应作为 HttpResponseMessage 转换回，而不必创建一个 HttpServer/HttpConfiguration 设置，如此处[所示](http://www.strathweb.com/2012/06/asp-net-web-api-integration-testing-with-in-memory-hosting/)。

```
 var config = new HttpConfiguration();

        var request = new HttpRequestMessage(HttpMethod.Post, "http://localhost/api/products");
        request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        var route = config.Routes.MapHttpRoute(
         name: "DefaultApi",
         routeTemplate: "{controller}"
            );

        var routeData = new HttpRouteData(route, new HttpRouteValueDictionary { { "controller", "GetData" } });
        var controller = new GetDataController();
        controller.ControllerContext = new HttpControllerContext(config, routeData, request);
        controller.Request = request;
        controller.Request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config;

        /************************* HELP!!!***************/
        // If Get returns List<Product> can I cast it as HttpResponseMessage??
        /************************************************/

        var result = controller.Get();

        // Assert
        Assert.Equal("application/json", result.Content.Headers.ContentType.MediaType); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:42:20.733

控制器方法不应该像那样直接调用。您必须发送 HTTP 请求才能获得 HTTP 响应。尝试使用

```
HttpResponseMessage response = HttpClient.SendAsync(request).Result; 
```

尽管如果您不在 IIS 中托管，则必须创建一个`HttpSelfHostServer`以在进程内托管控制器，以便它可以侦听请求。这将向您展示如何做到这一点，[http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)

# asp.net - ASP MVC: how to make url with passing array as parameter by RouteCollection.GetVirtualPath

> ID：13570817
> 
> 赞同：0
> 
> 时间：2012-11-26T18:21:44.580
> 
> 标签：asp.net, .net, asp.net-mvc, razor, url-routing

I have a simple model.

```
class MyModel
{
    public int id{get;set;}
    public IEnumerable<int> params{get;set;}
} 
```

my action method is declared as:

```
public ViewResult Index(int id, IEnumerable<long> params) 
```

and have a simple code on template with razor engine:

```
 @Html.BuildUrlFromExpression((ShareController c) => c.Index(Model.id, Model.params)); 
```

the thing `RouteCollection.GetVirtualPath` - this method returns an incorrect URL as result i have url fir example `@Url.Action("Index","Default",new {id=1, params = new long[]{11,33}});` get some value

```
/Default/Index/49?params=System.Int64%5B%5D; 
```

it seems rather obvious fact that the construction of the address must correctly understand what type it is passed. I would want that the `BuildUrlFromExpression` gave the correct value.

```
/Default/Index/49?params=23&params=45 
```

I have some work solution:

```
var rv = new RouteValueDictionary();
rv.Add("param[0]", 11);
rv.Add("param[1]", 33);
rv.Add("id", Model.CurrInFolderNum);
Url.Action("Index","default",rv) 
```

but it works through the transmission of some number of parameters! I wish that would have been transferred to the array. I think the answer somewhere on the surface.

# csh - csh中“来源”时如何使退出行为

> ID：13570825
> 
> 赞同：5
> 
> 时间：2012-11-26T18:22:15.183
> 
> 标签：csh

`csh`是一个非常可怕的外壳。（提前声明以避免“不要使用 csh”的不可避免的评论，或者我应该为了任何读者而声明：如果你重视你的理智，请不要使用`csh`。）我有一个`csh`我试图使其有用的相当大的脚本集合，我刚刚发现`exit`从源文件调用时不会退出脚本。换句话说：

```
#!/bin/csh
source [file with content "exit"]
echo No reasonable script should print this 
```

产生输出。

有没有办法修改这种行为？据我所知，我正在修改的脚本的原始作者打算终止主脚本，这当然是可取的行为，并且只需通过调用上面的示例即可`sh`产生该结果，但是给出了什么？这种行为有任何合理的目的吗？（这只是我在咆哮，真正的问题是：是否可以选择 csh 来改变行为？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-06T17:42:02.437

要退出 csh/tcsh 中的源脚本和父解释器，我使用`exec /bin/false`or `exec /bin/true`，这取决于我想要传递回父进程的成功条件。采购外壳以适当的返回值退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:34:11.343

我认为这与问题的原始上下文无关，但是如果`exit`用于关闭登录脚本并因此注销用户，则可以只使用`logout`而不是`exit`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-19T18:00:45.723

关于流行的社区运动，我称之为“csh bashing”：

“csh 是一个非常可怕的外壳。”

也许吧，但 tcsh 是一个非常易于使用、易于编码、轻量级且稳定的 shell，几乎随处可用，具有相当统一的功能。尽管如此，它确实有一些令人沮丧的怪癖，直到你学会在它们周围导航。它有助于为长脚本提供漂亮的打印机。

“源文件 [argv]” 特性是 tcsh 中最接近子例程的特性，并且由于它与调用者共享相同的命名空间，因此在该上下文中，exit 命令更像是“返回”语句是完全合理的。请注意，exit 语句会暂停源文件中的处理，并通过 $status 返回一个值。

源 tcsh 文件还允许调用者发布单独的 $argv 而不会丢失原始文件，在这种情况下调用者的 $argv 对源文件是可见的。如果源文件写入 $argv，它也会为调用者修改。

如果你定义一个别名来获取一个文件，你可以把一些相当通用的多功能脚本放在一起：

别名 func 'set srcf="test.tcsf" ; 设置 args=(!*) ; 源 $srcf $args'

但是，如果您有多个源文件在运行，则需要采用一些命名空间管理约定，以确保它们不会相互影响。归根结底，这些年来 tcsh 仍在使用是有原因的，主要是因为一旦您了解了这些怪癖，它就可以快速且易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:41:30.690

我对csh不太了解，我主要使用“bash”，而且我想很久以前在很远的地方我可能会使用“ksh：在Sun“pizza”boxen上。在闲逛了一下之后，我注意到一些 csh 行为更改开关，但是如果您尝试这样的操作会怎样：

```
exit [expr]
The shell exits either with the value of the specified expr (an expression, as 
described   under Expressions) or, without expr, with the value of the status variable. 
```

我从[这里得到这个](http://linux.about.com/library/cmd/blcmdl1_csh.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T13:27:25.810

您可以使用别名 exit 来设置一些值，然后检查它：

```
$ cat a.csh
#!/bin/csh
alias exit 'set abort=1; ""exit'
...
exit 
```

在获取文件时：

```
$ cat b.csh
#!/bin/csh
source a.csh
if ( $?abort ) exit 
```

附录：

我忘了说你可能会即时更改源代码：

```
$ cat b.csh
#!/bin/csh
source `sed '2 i alias exit '"'set abort=1; "'""exit'"'" a.csh`
if ( $?abort ) exit 
```

与直接更改脚本相比，这将受到一些惩罚，但您无需再为原始脚本而烦恼。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-03T09:54:51.803

未设置终止

unsetenv 终止

回声“$TERMINATE”

# iphone - How to use tiled map without Cocos2d?

> ID：13570826
> 
> 赞同：1
> 
> 时间：2012-11-26T18:22:20.817
> 
> 标签：iphone, objective-c, map, tile

I know how to use tiled maps (.tmx files) with cocos2d. But I want to use it without Cocos2d. Can i do that? If yes, How?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:35:45.210

`TMX`文件格式记录在[Tiled wiki](https://github.com/bjorn/tiled/wiki/TMX-Map-Format)中。它是一种基于 XML 的格式。iOS 有两个 XML 解析器可供选择：

*   事件驱动[`NSXMLParser`类](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)，也在[*Event-Driven XML Programming Guide*](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/XMLParsing.html#//apple_ref/doc/uid/10000186i)中讨论过。

*   [`libxml2`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)，它具有事件驱动和分析树生成接口，并在[其自己的网站上](http://xmlsoft.org/index.html)记录。

# python - Using scipy fft and ifft to solve ordinary differential equation numerically

> ID：13570828
> 
> 赞同：6
> 
> 时间：2012-11-26T18:22:25.010
> 
> 标签：python, scipy, fft, ode, ifft

I have an `ordinary differential equation` in time domain as follows:

```
C*du/dt = -g*u + I 
```

where `I = A*t/tau*exp^(1-t/tau)`

in the freq domain:

```
u(w) = I(w)/(g*(1+C/g*j*w)) 
```

`j` being the complex number `sqrt(-1)`

hence i can get `u(t)` by going into the freq domain using [fast Fourier transform](https://en.wikipedia.org/wiki/Fast_Fourier_transform) (`fft`) and then back using `ifft`.

the codes:

```
t = np.linspace(0.,499.9,5000)
I = q*t*np.exp(1-t/Tau_ca)/Tau_ca
u1 = np.fft.ifft(np.fft.fft(I)/(G_l*(1.+1.j*(C_m/G_l)*np.fft.fftfreq(t.shape[-1])))) 
```

However, when I compare this `u(t)` obtained with other methods such as numerical integration of the differential equation or its analytical form, it is not correct. I have tried and been unsuccessful at figuring out where my mistakes are.

please enlighten.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T22:23:07.253

正弦曲线或复指数的导数与其频率成正比，相移`π/2`. 对于复指数，相移相当于乘以`j`。例如，`d/dt exp(j*Ω*t)` `== j*Ω * exp(j*Ω*t)` `== Ω * exp(j*π/2) * exp(j*Ω*t)` `== Ω * exp(j*(Ω*t + π/2))`。所以如果你有傅里叶变换对`u(t) <=> U(Ω)`，那么`du/dt <=> jΩ * U(Ω)`。积分几乎是逆运算，但如果有直流分量，它可能会增加脉冲：`∫udt <=> U(Ω) / jΩ + π*U(0)*δ(Ω)`

要使用采样序列逼近导数，您必须通过采样率来缩放离散时间角频率 ω（范围从 0 到 2π，或 -π 到 π）`fs`。例如，假设离散时间频率为 π/2 弧度/样本，例如序列`[1, 0, -1, 0, ...]`。在原始信号中，这对应于`fs/4`。导数是`d/dt cos(2*π*fs/4*t) == d/dt cos(π/2*fs*t)` `== -π/2*fs*sin(π/2*fs*t)` `== π/2*fs*cos(π/2*fs*t + π/2)`。

您必须以`fs`信号带宽的两倍以上进行采样。准确的采样分量 `fs/2`是不可靠的。具体来说，每个周期只有 2 个样本，`fs/2`分量的幅度会交替序列中第一个样本的符号。因此，对于实值信号，`fs/2`DFT 分量是实值，相位为 0 或 π 弧度，即`a*cos(π*fs*t + {0, π})`。给定后者，`fs/2`分量的导数为`-a*π*fs*cos(π*fs*t + {π/2, 3*π/2})`，对于采样时间为 0 `t == n/fs`。

（关于后者，DFT 的标准三角插值使用余弦，在这种情况下，样本点处的导数将为零。如果同时对信号及其导数进行采样，则不一定正确。采样会丢失相位分量相对于`fs/2`信号，但不相对于它的导数。根据您开始采样的时间，`fs/2`分量及其导数在采样点可能都不为零。如果幸运的话，其中一个在采样点为 0有时，另一个会达到顶峰，因为它们之间的`π/2`弧度相差很大。）

鉴于`fs/2`DFT 分量对于实值信号始终是实值，当您在计算导数或积分的过程中将其乘以时`j`，这会在结果中引入虚值分量。有一个简单的解决方法。如果是偶数，只需将index 处`N`的组件清零。另一个问题是除以进行积分时除以零。这可以通过向向量的索引 0 添加一个小值来解决（例如，最小的双精度浮点数）。`fs/2``N/2``jΩ``Ω``finfo(float64).tiny`

给定`Ω = fs * ω`，问题中显示的系统在频域中具有以下形式：

```
H(Ω) = 1 / (g + j*Ω*C)
U(Ω) = I(Ω) * H(Ω) 
```

它是一个单极低通滤波器。您得出的解决方案有两个问题。

1.  您没有按比例缩放频率`w`变量`fs`。
2.  您使用`fftfreq`，它使用范围 -0.5 到 0.5。你需要 -π 到 π。实际上你只需要 0 到 π，因为`i(t)`它是实值的。在这种情况下，您可以将`rfft`and`irfft`用于实值信号，从而跳过计算负频率。

尽管如此，您可能仍然对结果感到失望，因为 DFT 使用信号的周期性扩展。

## 例子

首先，这是一个 1 Hz 正弦曲线的简单示例（以红色绘制），以 1024 个样本/秒的速度采样 2 秒，并通过 DFT 计算其导数（以蓝色绘制）：

```
from pylab import *

fs = 1024
t = arange(2*fs, dtype=float64) / fs
N = len(t) // 2 + 1    # non-negative frequencies
w = 2 * pi / len(t) * arange(N)
Omega = w * fs

x0 = cos(2*pi*t)    # w0 == 2*pi/fs
X0 = rfft(x0);
# Zero the fs/2 component. It's zero here anyway.
X0[-1] = 0  
dx0 = irfft(X0 * 1j*Omega)
plot(t, x0, 'r', t, dx0, 'b')
show() 
```

![dt0](../Images/67c7ee145a2598a0680f39156e3df5ed.png)

这是一个简单的例子——带宽有限的周期性信号。只需确保以足够高的速率对整数个周期进行采样以避免混叠。

下一个例子是三角波，斜率为 1 和 -1，中心和边缘的导数不连续。理想情况下，导数应该是方波，但完美的计算需要无限带宽。相反，[吉布斯](http://en.wikipedia.org/wiki/Gibbs_phenomenon)在不连续性周围响起：

```
t2 = t[:fs]
m = len(t) // (2*len(t2))
x1 = hstack([t2, 1.0 - t2] * m)
X1 = rfft(x1)
X1[-1] = 0
dx1 = irfft(X1 * 1j*Omega)
plot(t, x1, 'r', t, dx1, 'b')
show() 
```

![dt1](../Images/80ced24d247d99cd26d16b51da4fcbed.png)

如果您正在求解非周期性系统，则 DFT 的隐式周期性扩展是有问题的。这是使用`odeint`DFT 和 DFT（`tau`设置为 0.5s；`g`并`C`设置为 1 Hz 转角频率）的问题系统的解决方案：

```
from scipy.integrate import odeint

a = 1.0; tau = 0.5
g = 1.0; C = 1.0 / (2 * pi)
i = lambda t: a * t / tau * exp(1 - t / tau)
f = lambda u, t: (-g*u + i(t)) / C

H = 1 / (g + 1j*Omega*C)  # system function
I = rfft(i(t))
I[-1] = 0
U_DFT = I * H
u_dft = irfft(U_DFT)
u_ode = odeint(f, u_dft[0], t)[:,0]

td = t[:-1] + 0.5/fs
subplot('221'); title('odeint u(t)');
plot(t, u_ode)
subplot('222'); title('DFT u(t)');
plot(t, u_dft)
subplot('223'); title('odeint du/dt')
plot(td, diff(u_ode)*fs, 'r',
     t, (-g*u_ode + i(t)) / C, 'b')           
subplot('224'); title('DFT du/dt')
plot(td, diff(u_dft)*fs, 'r',
     t, (-g*u_dft + i(t)) / C, 'b')
show() 
```

![dt2](../Images/bc41d1a897672e6773f24524578399b9.png)

`du/dt`图表覆盖了由（红色）估计的导数与`diff`微分方程（蓝色）的计算值。它们在两种情况下大致相等。我将初始值设置为`odeint`to`u_dft[0]`以表明它返回相同初始值的 DFT 解决方案。不同之处在于`odeint`解会继续衰减到零，但 DFT 解是周期性的，周期为 2s。在这种情况下，如果对更多 i(t) 进行采样，则 DFT 结果看起来会更好，因为 i(t) 从零开始并衰减到零。

DFT 使用零填充来执行线性卷积。特别是在这种情况下，输入的零填充将有助于将零状态响应的瞬态与其稳态分开。然而，更常用的是拉普拉斯或 z 变换系统函数来分析 ZSR/ZIR。[`scipy.signal`](http://docs.scipy.org/doc/scipy/reference/signal.html)拥有分析 LTI 系统的工具，包括以多项式、零极点增益和状态空间形式将连续时间映射到离散时间。

[John P. Boyd 在Chebyshev 和 Fourier Spectral Methods](http://www-personal.umich.edu/~jpboyd/BOOK_Spectral2000.html)中讨论了非周期函数的 Chebyshev 逼近方法（在他的密歇根大学页面上免费在线）。

[如果您在信号处理](http://dsp.stackexchange.com)或[数学](http://math.stackexchange.com)堆栈交换中提问，您可能会在此类问题上获得更多帮助。

# android - Click on widget button and detect the id of widget Android

> ID：13570830
> 
> 赞同：2
> 
> 时间：2012-11-26T18:22:41.773
> 
> 标签：android, android-widget

I have a problem with widgets and actions

In configurator class, i set up for the whole widget and for button the listeners:

```
 //the first one when we click on the button
 Intent firstIntent = new Intent(c.getApplicationContext(), ShowDetailedCityWeather.class);
 // Intent firstIntent = new Intent(WeatherWidget.ACTION_WIDGET_RECEIVER);
 PendingIntent myPI = PendingIntent.getActivity(c, 0, firstIntent, 0);
 firstIntent.setAction("Привет мир");
 remoteViews.setOnClickPendingIntent(R.id.imageButton1, myPI);
 firstIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, awID);

 //the second one when we click on widget
 Intent secondIntent = new Intent(ChoiseCityList.this, MainTelephoneActivity.class);
 PendingIntent myPI2 = PendingIntent.getActivity(c, 0, secondIntent, 0);
 remoteViews.setOnClickPendingIntent(R.id.newLinearLayout, myPI2);

 manager.updateAppWidget(awID, remoteViews); 
```

When I click on the button, the new Activity ShowDetailedCityWeather starts runnig. How can I detect the ID of widget in this activity, when I have many widgets? And also I want to get data from widget. I try:

```
Intent prevIntent = getIntent();
if(prevIntent != null)
 Toast.makeText(this, "Hello:" + prevIntent.getAction(), Toast.LENGTH_SHORT).show();
else
 Toast.makeText(this, "Help!", Toast.LENGTH_SHORT).show(); 
```

In Toast I have: Hello: null

Then I have tryed:

```
int awID = -90;
        Context c = ShowDetailedCityWeather.this;
        Intent intentWidget = getIntent();
        Toast.makeText(c, "Action : " + intentWidget.getAction(), Toast.LENGTH_SHORT).show();

        Bundle extras = intentWidget.getExtras();
        if(extras!=null)
           awID = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);
        Toast.makeText(c, "ID : " + awID, Toast.LENGTH_SHORT).show(); 
```

And I always have -90\. Can you please help me...

```
enter code here 
```

# android - Difference between ThreadSafeClientConnManager and SingleClientConnManager

> ID：13570831
> 
> 赞同：1
> 
> 时间：2012-11-26T18:22:43.470
> 
> 标签：android

I understand that ThreadSafeClientConnManager uses a connection pool and, when the client needs a connection, picks a connection from that one. SingleClientConnManager, instead, uses just one connection.

What I want to understand is: does this have implications also about safeness? Do I have to understand that SingleClientConnManager is unsafe?

On [SingleClientConnManager](http://developer.android.com/reference/org/apache/http/impl/conn/SingleClientConnManager.html) documentation page I read:

> This manager is good only for single-threaded use.

Than I suppose the answer is yes, but I must be sure of this...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:11:00.197

我不确定你指的是什么`safe`，但这里有一个关于`Thread safe`概念的快速解释。

当您的代码具有多个线程时，操作系统会不时在它们之间切换，并且当这种切换发生时，您“几乎”无法控制。

假设这`global`是一个全局对象，线程 A 执行以下操作：

```
//Thread A
global = 2;
Log.d("Thread A: ", global); 
```

操作系统在上面的第一行和第二行之间从线程 A 切换到 B：

```
//Thread B
global = 5;
Log.d("Thread B: ", global); 
```

您会在日志中看到：

```
Thread B: 5;    
Thread A: 5; 
```

因为线程 B 覆盖了 on 的值`global`。

**线程安全**

线程安全代码，是以防止上面显示的问题类型（使用同步块等）的方式编写的代码，并且可以从不同的线程安全地调用而不会出现问题。

线程不安全，意味着如果您从不同的线程调用代码并且不够“幸运”，那么在某个时间点，线程将切换到与上述类似的点，您的程序将产生不可预测的结果。

如果您使用单线程，它们都是安全的。在这种情况下，线程不安全是更可取的，因为它通常更有效。

问候。

# python - 创建一个具有 m + 1 列和 n + 1 行的矩阵

> ID：13570832
> 
> 赞同：-3
> 
> 时间：2012-11-26T18:22:51.350
> 
> 标签：python

有关如何创建具有 M + 1 列和 N + 1 行的矩阵的任何帮助，其中 M 和 N 对应于序列的大小。我需要它来对齐两个序列。

我试过使用 numpy. 但我得到了固定大小的矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:32:52.400

```
[[0\. for i in range(m+1)] for j in range(n+1)] 
```

将产生一个 m+1 x n+1 矩阵。

如果使用正确，对于许多操作来说，使用 a`numpy` `array`可能会更快`numpy`：

```
numpy.zeros((m+1, n+1)) 
```

# java - parsing a file with a strange extension type using Java

> ID：13570833
> 
> 赞同：-4
> 
> 时间：2012-11-26T18:22:51.300
> 
> 标签：java

I am trying to parse files with different extension types in my Java program. I just got a strange file which has a unique file format as below.

> 20121126.033111.vikeng8.28088

I am not sure what is the extension of this particular file. Windows shows type as **28088 File**. I think its some kind of a text file. I was not able to find any further information from Google. I can open it in Notepad++ and Notepad.

How can I determine this file extension type from Java? What would be the extension in general for these kind of files?

Further, I need to open this file and read some information from it. Any help would be very useful as i am seeing this kind of strange file for the first time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:28:31.307

**文件扩展名不可靠**。

那只是Windows版本的服务器，但显然文件名是可以更改的。因此，不幸的是**，由用户给文件起一个合理的名称。**

Unix 有用于检测文件类型的库。例如，该命令`file example.cc`将输出类似`C++ source, ASCII text, with very long lines`.

我假设它是一封电子邮件或类似的东西，然后您可以将其视为`mbox`文件。

不过，**如果您不确定文件扩展名，请假设它不正确**并执行正确的文件类型检测。

参见例如：[如何可靠地检测文件类型？](https://stackoverflow.com/questions/9738597/how-to-reliably-detect-file-types)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:26:10.037

扩展名并不一定意味着什么——例如，在 .jpg 文件上添加 .txt 扩展名并不意味着它不再是 .jpg——文件类型通常由内容决定；扩展名应该是内容的线索。

关于你的问题——这个文件的扩展名确实是 .28088——尽管这并没有给出所有内容的指示。Java 不能告诉你任何不同的东西。

# javascript - 单击上一个字段时向我的表单动态添加字段

> ID：13570835
> 
> 赞同：0
> 
> 时间：2012-11-26T18:23:02.330
> 
> 标签：javascript, dynamic, field, add

所以，我想做的是添加多个文本字段并上传多个文件。用户在点击之前只能看到 1 个用于上传的字段，并且它正在浏览文件。文本字段也是如此。当用户单击或开始在文本字段中输入时，将出现下一个。到目前为止，我还没有实现我的目标。我刚开始使用 JavaScript，所以我的代码严重损坏，甚至不值得发布。

这样做有哪些不同的方法，你知道利弊吗？

编辑：这是我尝试做的众多方法之一。

```
<form name="form">
<label for="file">Filename:</label>
<input type="file" name="file[0]" id="file[0]" onclick="addForm()" />
</form>
<br />

<script type="text/javascript">

var part1 = '<label for="file">Filename:</label> <input type="file" name="file[';
var part2 = ']" id="file[';
var part3 =']" onclick="form()" /><br />'

var counter = 0;

function addForm()
{

if (document.form.file[counter].click) 
{
        document.write(part1 + counter + part2 + counter + part3);
        counter++;

}
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T19:15:51.747

这是一个快速的解决方案：http: [//jsfiddle.net/JTDZR/](http://jsfiddle.net/JTDZR/)

当为当前活动的文件输入选择一个文件时，它将添加一个新的文件输入，然后它将禁用当前文件输入，因此一次只启用一个。

HTML

```
<form id="fups" name="form">
<label>
    Filename: <input type="file" name="file[]" />
</label>
</form>​ 
```

JS

```
var fups = document.getElementById("fups");
var file = document.form['file[]'];

fups.onchange = function(){
    file.disabled = true;
    var inp = document.createElement("input");
    inp.type = "file";
    inp.name = "file[]";
    var lab = document.createElement("label");
    lab.innerHTML = "Filename: ";
    lab.appendChild(inp);

    fups.appendChild(lab);
    file = inp;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:55:27.183

假设你有这个 HTML：

```
<form id="myForm">
   <input type="text" />
   <input type="file" />
   <!-- the JS won't affect this element -->
   <input type="submit" />
</form> 
```

您可能使用的相当简化的 javascript 版本如下所示：

```
var formElement = document.getElementById("myForm");
var children = e.getElementsByTagName("input");
var allowedTypes = new Array("text", "", "file");
// note the empty string - it stands for the default "text" type
for(var i=0; i<children.length) {
   var input = children[i];
   if(0 > allowedTypes.indexOf(input.attributes.getNamedItem("type").value)) {
      input.onFocus = function() {
         formElement.innerHTML += input.outerHTML;
         input.onFocus = null;
      }
   }
} 
```

这可以派生在一个更复杂的示例中，例如为新输入添加容器，因此它们不会总是出现在表单的末尾。另外，我会考虑使用[jQuery](http://jquery.com/)。当然，这是个人意见，但它为我节省了大量时间和编码。

# jquery - jquery hyperlink with image

> ID：13570836
> 
> 赞同：0
> 
> 时间：2012-11-26T18:23:11.390
> 
> 标签：jquery

I have the following code which when I hover over a hyperlink, I like to show the image of it. The problem is that no image comes up.

Here is what it looks like

```
 $(document).ready(function () {
      $('a').hover(function (e) {

          var href = $(this).attr('href');
          alert(href); // shows c:/images/jj.gif for that particular record as I have the hyperlinks for a given column within a grid

          $("body").append("<p id='preview'><img src='" + this.href + "' alt='Image preview' /></p>");

      });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:44:53.257

这是更新的小提琴：http: [//jsfiddle.net/w5jLd/1/](http://jsfiddle.net/w5jLd/1/)

```
$(document).ready(function() {
    $('a').hover(function(e) {

        var href = $(e.target).attr('href');
        $(e.target).next('div').append("<p id='preview'><img src='" + href + "' alt='Image preview' /></p>");

    },function(){   // i have added this when mouse out of the link 
                    // preview will be destroyed.

        $('#preview').remove();

    });
}); 
```

您悬停在链接上，但没有捕获目标本身。所以`e.target`选择悬停项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:25:06.347

```
$(document).ready(function () {
      $('a').hover(function (e) {

          var href = $(this).attr('href');
          alert(href); // shows c:/images/jj.gif for that particular record as I have the hyperlinks for a given column within a grid

          $("body").append("<p id='preview'><img src='" + href + "' alt='Image preview' /></p>");

      });
  }); 
```

如果您已经将 href 分配给变量，则不需要将其引用为 this.href

# javascript - How do I access the JSO on socket.on()?

> ID：13570837
> 
> 赞同：0
> 
> 时间：2012-11-26T18:23:13.000
> 
> 标签：javascript, json, node.js, socket.io

Here is what I have:

Client Side:

```
socket.on('PING__',function (data){
    console.log(data);
});
socket.emit('__PING'); 
```

Server Side:

```
io.sockets.on('connection', function (socket) {
    var connection = socket;
    socket.on('__PING', function (data) {
        console.log(data);
        socket.emit('PING__' , {status:'OK'});
    });
}); 
```

The console logs out "object {status:'OK'}". If I do this instead on the client:

```
console.log(data.status); 
```

I get undefined. I don't understand why it isn't logging out the status portion of the JSO. Any help here would be great

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:31:05.447

显然这是一个依赖于平台的问题。它发生在 Chromium 中，但不在 Firefox 中。我这样做了：

```
console.log($(data)[0].status); 
```

它工作得很好。使用 jQuery 解决跨平台问题的另一个原因：-/

# c# - Get filename without Content-Disposition

> ID：13570839
> 
> 赞同：9
> 
> 时间：2012-11-26T18:23:14.207
> 
> 标签：c#, header, webclient, content-disposition

I am looking for a solution for this problem for days and I can't find any.

I want to download a file from a webserver with a webclient. The download works fine, but I can't get the real filename, which is very important for me.

I read on many homepages, that the filename should be saved in the Content-Disposition-Header. Unfortunately this header of the site is empty. I tried to get it with:

```
string header_contentDisposition ="";
using (WebClient client = new WebClient())
            {
                client.OpenRead(link);

                header_contentDisposition = client.ResponseHeaders["Content-Disposition"];
                MessageBox.Show(header_contentDisposition);
            } 
```

There is no information saved inside this header.

If I try to download the file with my Browser (IE, Opera, Chrome) the filename gets shown in the filedialog, so it has to be saved somewhere.

Can you imagine where I can find it?

EDIT: I can't extract it from the URL, because the link is generated by php like

```
http://www.example.com/download.php?id=10 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T19:11:58.213

你可以试试这个：

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        try
        {

            HttpWebResponse res = (HttpWebResponse)request.GetResponse();
            using (Stream rstream = res.GetResponseStream())
            {
                string fileName = res.Headers["Content-Disposition"] != null ?
                    res.Headers["Content-Disposition"].Replace("attachment; filename=", "").Replace("\"", "") :
                    res.Headers["Location"] != null ? Path.GetFileName(res.Headers["Location"]) : 
                    Path.GetFileName(url).Contains('?') || Path.GetFileName(url).Contains('=') ?
                    Path.GetFileName(res.ResponseUri.ToString()) : defaultFileName;
            }
            res.Close();
        }
        catch { } 
```

[在http://upload.p-kratzer.com/index.php?dir=&file=asdfasdfwervdcvveb](http://upload.p-kratzer.com/index.php?dir=&file=asdfasdfwervdcvvedb)上对此进行了测试，它确实返回了 wetter.JPG。

# c# - AggregateException - AggregateException.Flatten().InnerException 代表什么？

> ID：13570855
> 
> 赞同：19
> 
> 时间：2012-11-26T18:23:51.157
> 
> 标签：c#, multithreading, exception, exception-handling, task

我一直在查看我们的一个应用程序中的一些代码，如下所示：

```
catch (AggregateException ae)
{
    this._logger.Log(ae.Flatten().InnerException.ToString(), Category.Exception, Priority.High);
} 
```

我的问题是这个。我知道做什么`AggregateException.Flatten()`，我知道`AggregateException.Flatten().InnerExceptions`代表什么。但是，`AggregateException.Flatten().InnerException`（单）代表什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-26T18:27:24.440

它只是原始异常中的非 AggregateException*之一。*例如，如果您的首字母`AggregateException`为：

```
AggregateException
    AggregateException
        IOException("x")
        IOException("y")
    IOException("z") 
```

然后`InnerException`，展平结果的 将显示`IOException("x")`为`IOException("y")`或`IOException("z")`。我不相信会有任何*保证*。（我相信目前的行为会给出“z”版本......）这将是`InnerExceptions`扁平化版本中的第一个，但这应该被视为所有原始非 AggregateExceptions的*联合*，没有保证订单。

基本上`InnerException`对`AggregateException`. *记录所有*`InnerExceptions`...或仅调用`ToString()`顶级异常会更有用，这将保留所有结构...

# python - Chained Method Calls in Python with dict

> ID：13570856
> 
> 赞同：1
> 
> 时间：2012-11-26T18:23:53.393
> 
> 标签：python

I needed to flatten a dictionary today. Meaning I wanted:

```
{'_id': 0, 'sub': {'a': 1, 'b':2}} 
```

to become:

```
{'_id': 0, 'a':1, 'b':2} 
```

So I thought I could be clever and pull off the following one-liner.

## One-liner:

```
x = dict(_id=0, sub=dict(a=1, b=2))
y = x.pop('sub').update(x)  # incorrect result 
```

This results in `y = None`.

So I obviously resorted to:

## Multi-Step:

```
x = dict(_id=0, sub=dict(a=1, b=2))
y = x.pop('sub')
y.update(x)   # correct result 
```

Setting "good expressive coding practices" asside for a moment, I would like to understand why the **One-liner** approach above yields `None`. I would have thought that x.pop('sub') would have resulted in a temporary dict on a stack somewhere and the original x dict would be immediately updated. Then the stack object would receive the next method in the chain which is the update. This obviously does not seem to be the case.

For the communities better understanding (and clearly mine) - how does python resolve the one-liner and result in **None**?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T18:28:20.333

该`.update()`方法返回`None`，因为它就地更改了受影响的字典。`.pop()`确实返回弹出的值，即嵌套字典。

您正在更新包含的`dict`，为什么不更新*父* `dict`级呢？

```
x.update(x.pop('sub')) 
```

结果：

```
>>> x = dict(_id=0, sub=dict(a=1, b=2))
>>> x.update(x.pop('sub'))
>>> x
{'a': 1, '_id': 0, 'b': 2} 
```

或者您可以递归地执行此操作：

```
def inplace_flatten(d):
    keys = list(d.keys())
    for k in keys:
        if isinstance(d[k], dict):
            inplace_flatten(d[k])
            d.update(d.pop(k)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:28:44.240

因为`y`得到 的结果`dict.update()`，即`None`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:28:38.500

这应该可以解决问题

```
def flatten(d, answer=None):
    if answer == None:
        answer = {}
    if not d:
        return answer
    else:
        for k in d:
            if isinstance(d[k], dict):
                flatten(d[k], answer)
            else:
                answer[k] = d[k]
        return answer 
```

# c# - How Does ServiceProcess.ServiceController Do Its Work?

> ID：13570858
> 
> 赞同：3
> 
> 时间：2012-11-26T18:24:03.350
> 
> 标签：c#, .net, api, service, windows-services

**The Setup:**

We have 2 Servers. They are on different subnets, but can still communicate with each other.

**The Issue:**

Server 1 used to query Server 2's Services with a `ServiceController.Status` call successfully, until our IT Staff tightened the firewall between the two subnets (we lost RDP access to Server 2 and `ServiceController.Status` calls from Server 1 to Server 2 started to fail).

IT has relaxed the firewall a bit (so RDP to Server 2 now works), but our `ServiceController.Status` calls still fail (The error is: *Cannot open Service Control Manager on Computer*).

**The Question:**

How does `ServiceProcess.ServiceController` perform it's tasks? Does it use a special TCP Port when doing it's work?

I am suspecting that the firewall is preventing remote access to the Service Controller on Server 2, so I'd like to tell our IT staff what ports we need opened.

I've looked at [the MSDN page](http://msdn.microsoft.com/en-us/library/system.serviceprocess.aspx), but I haven't been able to find out what I need.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:31:55.840

查看这篇 TechNet 文章：[http](http://technet.microsoft.com/en-us/library/cc738291(v=ws.10).aspx#w2k3tr_rpc_how_vfae) ://technet.microsoft.com/en-us/library/cc738291(v=ws.10).aspx#w2k3tr_rpc_how_vfae 。它包含一个协议表以及它们可以被 RPC 使用的相关套接字端口，.NET ServiceController 类依赖于这些端口。您的 IT 人员可能兴高采烈地关闭了这些端口中的一个或多个（有些比其他端口更重要，具体取决于有多少其他选项可用），从而导致 RPC 无法运行。

# java - Android infinite loop in thread

> ID：13570861
> 
> 赞同：2
> 
> 时间：2012-11-26T18:24:33.690
> 
> 标签：java, android, multithreading, loops

I have my UI and other Thread, where there is loop:

```
while(true){

} 
```

I am checking changes of String value in the system, and when changes, I send message via pre-opened socket to the server. Problem is, when applying loop, my app freezes, and CPU load is very high (about 90 %). I know, infinite loop must not be done in thread, but do you know how to copy this behavior, not using infinite loop?

Thx

**Main Code (onCreate method):**

```
 mProgressDialog = ProgressDialog.show(main.this, "loading","loading", true);
    c=new Client(this.getApplicationContext(), "192.168.0.121", 3333);
    c.start();

    CLIENT_MESSAGE="login user2 user2";
    synchronized(c){
        c.notify();
    }
    Client.zHandler.setEmptyMessage(119);

    mHandler = new Handler()
    {
        public void handleMessage(android.os.Message msg)
        {
            super.handleMessage(msg);

            switch (msg.what)
            {
                case 11:
                    Log.d("Logged in", "login");
                    mProgressDialog.dismiss();
                    break;
                case 12:    
                    Log.d("Logged out", "logout and end");
                    mProgressDialog.dismiss();
                    finish();
                    break;

                        }
                 }
          };

  @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch (keyCode) {

    case KeyEvent.KEYCODE_BACK:
        CLIENT_MESSAGE="logout";
        synchronized (c) {
            c.notify();
        }
                    Client.zHandler.setEmptyMessage(129)
        break;
    default:

    }
    return true;
} 
```

Thread Code (Client.java):

```
public Client(Context ctx, String hostname, int port){
    this.ctx=ctx;
    this.hostname=hostname;
    this.port=port;

    zHandler = new Handler()
    {
        public void handleMessage(android.os.Message msg)
        {
            super.handleMessage(msg);

            switch (msg.what)
            {
                case 119://login
                    Log.d("119", "case 119");
                    messageText=DropboxFileClientActivity.CLIENT_MESSAGE;
                    main.mHandler.sendEmptyMessage(11);
                    break;
                case 129://logout
                    messageText=DropboxFileClientActivity.CLIENT_MESSAGE;
                    main.mHandler.sendEmptyMessage(12);
                    break;
                case 100:   
                    break;

                        }
                 }
          };
}
    public void run(){
      try {
        clientSocket = new Socket(hostname, port);
        //inputLine = new BufferedReader(new InputStreamReader(System.in));

        os = new ObjectOutputStream (clientSocket.getOutputStream());

        is = new ObjectInputStream(clientSocket.getInputStream());
    }
    catch (UnknownHostException e) {
        Log.d("ERROR", "unknown host "+hostname); 
    }
    catch (IOException e) {
        Log.d("ERROR2", "no bind"+hostname);
        e.printStackTrace();
    }

    while (!isInterrupted()) {
        try{
            synchronized (this) {
                wait();
            }
        } catch (InterruptedException e) {
            break; // interrupting the thread ends it
        }
        if (clientSocket != null && os != null && is != null &&!messageText.equals("")) {
                messageText="";
                //sending message to server, getting reply and displaying it to the screen
            } 
      }//endwhile loop

   } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T18:27:51.977

如果您的循环确实在单独的线程中运行，那么问题在于它占用了 CPU。

与其轮询检查值的更改，不如编写一个触发来自另一个线程的服务器更新的设置器（例如，使用/协议）`String`（如果您可以控制相关代码）会更好。`wait``notify`

即使您必须轮询，您真的需要以 CPU 速度进行吗？也许每秒一次就可以了？那会让你在剩下的时间里睡觉。

至少，`Thread.yield()`每次通过循环调用。

**编辑**根据您对帖子的评论，您应该在后台线程中等待：

在您的后台线程中：

```
while (!isInterrupted()) {
    synchronized (this) {
        wait();
    } catch (InterruptedException e) {
        break; // interrupting the thread ends it
    }
    // read string and send it to the server
} 
```

在您的事件处理程序中：

```
public void onSomethingHappened(...) {
    // update the string
    synchronized (mThread) {
        mThread.notify();
    }
} 
```

除非读取和更新在同一个对象上同步，否则该字符串应标记为 volatile。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T02:19:23.330

正在做

```
synchronized(blah){
    blah.wait();
} 
```

是做同步的老方法。查看 java.util.concurrent 包中的一些类。

一个例子是，在你的活动中你可以实现/添加一个 TextWatcher 并且在你可以的方法中

```
blockingQueue.put(theChangedText) //preferably you would do the put via an access method. 
```

然后在你的线程中你会大致有：

```
obj = blockingQueue.take()
sendToServer(obj) 
```

# html - 在响应式画廊中裁剪图像高度

> ID：13570864
> 
> 赞同：2
> 
> 时间：2012-11-26T18:24:44.923
> 
> 标签：html, css, responsive-design, image

我使用以下代码使我的图片库响应：

```
<div class="line1">
<img src="image1.jpg" alt="image1.jpg" />
<img src="image2.jpg" alt="image2.jpg" />
<img src="image3.jpg" alt="image3.jpg" />
<img src="image4.jpg" alt="image4.jpg" />
</div>

<div class="line2">
<img src="image5.jpg" alt="image5.jpg" />
<img src="image6.jpg" alt="image6.jpg" />
<img src="image7.jpg" alt="image7.jpg" />
<img src="image8.jpg" alt="image8.jpg" />
</div>

.line1 { 
overflow:hidden; 
height:auto; 
}
.line1 img { 
width:25%; 
}
.line2 { 
overflow:hidden; 
height:auto; 
}
.line2 img { 
width:25%; 
} 
```

我很高兴响应能力正在发挥作用，因为这正是我想要的。但是，因为图像都是不同的大小，结果是这样的：http: [//i50.tinypic.com/2dm9yms.png](http://i50.tinypic.com/2dm9yms.png)我宁愿这样，这样可以裁剪图像：[http://i46。 tinypic.com/mm4xv6.png](http://i46.tinypic.com/mm4xv6.png)

我需要在我的 CSS 中进行哪些更改才能获得这样的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:32:18.837

如果你能给你的 div 一个固定的高度，它会起作用。此外，你不应该有类`line1` ，`line2`它应该只是`line`，注意你正在复制你的 CSS

```
.line {
   height: 80px;
   overflow: hidden
} 
```

# nsis - NSIS 更改安装程序语言

> ID：13570868
> 
> 赞同：2
> 
> 时间：2012-11-26T18:24:58.837
> 
> 标签：nsis

我想问一个问题如何更改安装程序语言。

这是我在代码中写的：

```
LoadLanguageFile "${NSISDIR}\Contrib\Language files\Romanian.nlf" 
```

现在我加载了它，但是如何运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:44:41.847

你`$Language`用`StrCpy`in设置`.onInit`。

这通常使用`MUI_LANGDLL_DISPLAY`LangDll[插件](http://nsis.sourceforge.net/Examples/languages.nsi)来完成，以便用户可以从语言列表中进行选择。

NSIS 将尝试使用“最佳匹配”语言作为默认...

# asp.net-web-api - 将泛型类型从客户端发送到服务器

> ID：13570871
> 
> 赞同：2
> 
> 时间：2012-11-26T18:25:06.770
> 
> 标签：asp.net-web-api

我有一个简单的客户端，它通过泛型类型将数据发送到 Web api 服务器

服务器和客户端都存在以下结构

```
public interface IRequest<T>
{
    string ApiKey { get; set; }
    T RequestObject { get; set; }
}

public class UserRequest : IRequest<UserDetail>
{
    public string ApiKey { get; set; }
    public UserDetail RequestObject { get; set; }
} 
```

我使用以下语法向服务器发送请求

```
var client = new RestClient(WebConfigurationManager.AppSettings["apiUri"]);
var profileRequest = new UserRequest
            {
                ApiKey = "xxxxx",
                RequestObject = new UserDetail {Password = txtPassword.Text, UserName = txtUserName.Text}
            };
 var request = new RestRequest("UserRequest/PostUserDetail", Method.POST);
 request.AddObject(profileRequest); 
```

现在有趣的是，在服务器端，UserDetail 对象没有正确反序列化，它只包含 NULL，但 ApiKey 属性设置正确

```
 public UserDetail PostUserDetail(UserRequest userRequest)
    {
        return new UserDetail { Password = userRequest.RequestObject.Password, UserName = userRequest.RequestObject.UserName };
    } 
```

从上面，设置了 userRequest.ApiKey，但是，在服务器 API 上 userRequest.RequestObject 始终为 NULL

不支持泛型类型吗？如果没有，是否有人对我如何修改服务器端的反序列化器有任何指示？我已经检查过该对象是否在客户端正确构造，并且是正确的。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:09:25.893

支持此 Web Api 方案。我已经尝试通过使用 PostUserDetail 创建 UserRequest ApiController 来重现您的 WebAPI，并且我能够在响应中获得预期的“密码”和“用户名”：

```
Request Content:
{"ApiKey":"123","RequestObject":{"Password":"bar","UserName":"foo"}}

Response Content:
{"Password":"bar","UserName":"foo"} 
```

在客户端，我建议您改用 HttpClient。这是我的客户复制：

```
 var httpClient = new HttpClient();
        var content = new ObjectContent<UserRequest>(profileRequest, new JsonMediaTypeFormatter());
        var response2 = httpClient.PostAsync(addr, content).Result; // using .Result here for simplicity...
        Console.WriteLine(response2.Content.ReadAsStringAsync().Result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:30:23.020

您是否将 Content-Type 标头发送到服务？从上面的代码中，我看到您没有提供 Content-Type 标头。在没有 Content-Type 标头的情况下，Web Api 会生成该类型的默认值（对于 UserRequest 将是 NULL）。

# r - 在 LAM/MPI 集群上安装 Rmpi

> ID：13570873
> 
> 赞同：6
> 
> 时间：2012-11-26T18:25:25.503
> 
> 标签：r, cluster-computing, mpi

我正在尝试`Rmpi`在 LAM MPI 集群机器上安装软件包。以前我一直在编译和测试一些东西（`mpi4py`和小型 C++ 程序），所以我确信 MPI 本身可以工作。但是，链接库时安装`Rmpi`包失败。

我的主要嫌疑人是调用`gcc`而不是`mpicc`在makefile中（我试图在配置中找到行来更改它，但到目前为止找不到它）。

有人有在 LAM 上安装 Rmpi​​ 的经验吗？你是如何做到的？

**建筑学**

*   LAM MPI（或者如果存在 PBS MPI，我该如何检查？）。可以肯定的一件事，我有 mpicpp 文件，我认为这对所有 mpi 实现都不通用
*   R-2.15.2
*   rmpi_0.6-1
*   CentOS 5.5 版（最终版），x86_64

**从 R 调用的命令**

```
install.packages("Rmpi") 
```

**日志**

```
trying URL 'http://cran.at.r-project.org/src/contrib/Rmpi_0.6-1.tar.gz'
Content type 'application/x-gzip' length 92977 bytes (90 Kb)
opened URL
==================================================
downloaded 90 Kb

* installing *source* package âRmpiâ ...
** package âRmpiâ successfully unpacked and MD5 sums checked
checking for gcc... gcc -std=gnu99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc -std=gnu99 accepts -g... yes
checking for gcc -std=gnu99 option to accept ISO C89... none needed
I am here /usr and it is OpenMPI
Trying to find mpi.h ...
Found in /usr/include
Trying to find libmpi.so or libmpich.a ...
Found libmpi in /usr/lib
checking for openpty in -lutil... yes
checking for main in -lpthread... yes
configure: creating ./config.status
config.status: creating src/Makevars
** libs
gcc -std=gnu99 -I/g/software/linux/pack/r-2.15.2/centos-5/lib64/R/include -DNDEBUG -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -I/usr/include  -DMPI2 -DOPENMPI -I/usr/local/include    -fpic  -g -O2  -c RegQuery.c -o RegQuery.o
gcc -std=gnu99 -I/g/software/linux/pack/r-2.15.2/centos-5/lib64/R/include -DNDEBUG -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -I/usr/include  -DMPI2 -DOPENMPI -I/usr/local/include    -fpic  -g -O2  -c Rmpi.c -o Rmpi.o
gcc -std=gnu99 -I/g/software/linux/pack/r-2.15.2/centos-5/lib64/R/include -DNDEBUG -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -I/usr/include  -DMPI2 -DOPENMPI -I/usr/local/include    -fpic  -g -O2  -c conversion.c -o conversion.o
gcc -std=gnu99 -I/g/software/linux/pack/r-2.15.2/centos-5/lib64/R/include -DNDEBUG -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -I/usr/include  -DMPI2 -DOPENMPI -I/usr/local/include    -fpic  -g -O2  -c internal.c -o internal.o
gcc -std=gnu99 -shared -L/usr/local/lib64 -o Rmpi.so RegQuery.o Rmpi.o conversion.o internal.o -L/usr/lib -lmpi -lutil -lpthread -L/g/software/linux/pack/r-2.15.2/centos-5/lib64/R/lib -lR
/usr/bin/ld: skipping incompatible /usr/lib/libutil.so when searching for -lutil
/usr/bin/ld: skipping incompatible /usr/lib/libutil.a when searching for -lutil
/usr/bin/ld: skipping incompatible /usr/lib/libpthread.so when searching for -lpthread
/usr/bin/ld: skipping incompatible /usr/lib/libpthread.a when searching for -lpthread
/usr/bin/ld: skipping incompatible /usr/lib/libc.so when searching for -lc
/usr/bin/ld: skipping incompatible /usr/lib/libc.a when searching for -lc
installing to /home/andrejev/R/x86_64-unknown-linux-gnu-library/2.15/Rmpi/libs
** R
** demo
** inst
** preparing package for lazy loading
** help
*** installing help indices
** building package indices
** testing if installed package can be loaded
Error : .onLoad failed in loadNamespace() for 'Rmpi', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object '/home/andrejev/R/x86_64-unknown-linux-gnu-library/2.15/Rmpi/libs/Rmpi.so':
  /usr/lib/libmpi.so.0: undefined symbol: _kio
Error: loading failed
Execution halted
ERROR: loading failed
* removing â/home/andrejev/R/x86_64-unknown-linux-gnu-library/2.15/Rmpiâ

The downloaded source packages are in
        â/tmp/Rtmp5qzeqp/downloaded_packagesâ
Warning message:
In install.packages("Rmpi") :
  installation of package âRmpiâ had non-zero exit status 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T18:35:53.747

我们有一个非常相似的设置。我最近还没有接触到足以说明您的特殊情况，但我可以传递一些让我们启动并运行的命令......

正如 Dirk 所说，我们的第一步是让 OpenMPI 运行。设置完成后，您需要确保`LD_LIBRARY_PATH`已正确设置：

```
export LD_LIBRARY_PATH=/opt/openmpiv2/lib/:$LD_LIBRARY_PATH 
```

最终为我们安装 Rmpi​​ 的命令（在运行上述命令并启动 R 之后）是：

```
install.packages("Rmpi", configure.args = c("--with-Rmpi-include=/opt/openmpiv2/include/", "--with-Rmpi-libpath=/opt/openmpiv2/lib/", "--with-Rmpi-type=OPENMPI", "--with-mpi=/opt/openmpiv2/")) 
```

它为我们成功安装了软件包。然后我们可以使用以下命令运行作业：

```
qsub -I -l nodes=2:ppn=12
/opt/openmpiv2/bin/mpirun --hostfile $PBS_NODEFILE -n 1 R --slave -f rmpitest.R 
```

这些命令可能对我们的设置非常具体，以至于它们可能没有用，但希望这里的一些东西可以为您节省一些时间！

正如@Sergej 在下面提出的，更通用的解决方案可能是：

```
install.packages(
  "Rmpi", 
  configure.args = c(
   "--with-Rmpi-include=/usr/include/", # This is where LAM's mpi.h is located
   "--with-Rmpi-libpath=/usr/lib/",     # This is where liblam.so is located (actually as I type it mine was located in /usr/lib64/liblam.so.0, so maybe this is not needed at all)
   "--with-Rmpi-type=LAM"               # This says that the type is LAM (there is also OPENMPI and MPICH)
)) 
```

我们的设置：RHEL 5、Rmpi 0.5-9、OpenMPI 1.4.3.、R 2.15.0

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T18:27:25.310

许多年前，我曾经使用 LAM，但后来改用 OpenMPI。Rmpi 的作者 Hao Yu 建议这样做。

r-sig-hpc 列表是解决此类问题的好地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T19:02:00.527

按照 Jeff Allen 的建议，我去了 R 并运行

```
install.packages(
  "Rmpi", 
  configure.args = c(
   "--with-Rmpi-include=/usr/include/", # This is where LAM's mpi.h is located
   "--with-Rmpi-libpath=/usr/lib64/",     # This is where liblam.so is located
   "--with-Rmpi-type=LAM"               # This says that the type is LAM (there is also OPENMPI and MPICH)
)) 
```

我也跑

```
# Because it was non-standard R location so it din't find shared libraries
export LD_LIBRARY_PATH=/g/software/linux/pack/r-2.15.0/lib64/R/lib

# Rmpi also could not find libutil so I had to add path to it as well
export LD_PRELOAD=/usr/lib64/libutil.so 
```

**编辑**

即使我在多个节点上运行 Rmpi​​ 时设法编译它，它也会失败。所以我想我毕竟必须开始推动 OpenMPI 转换：/

# c++ - C++ 和 XGrabKeyboard 键盘锁定

> ID：13570880
> 
> 赞同：2
> 
> 时间：2012-11-26T18:25:49.047
> 
> 标签：c++, qt, x11, xlib

我正在尝试编写小型 C++ 程序，它应该检测用户是否按下键盘上的任意键或移动鼠标。我需要在 Ubuntu 或 Centos 上运行的那个程序。这就是我使用 X11 库进行按键检测的原因。

这是我用谷歌搜索的代码：

```
 #include <stdio.h>
    #include <cstring>
    #include <iostream>
    #include <X11/Xlib.h>
    #include <X11/Xutil.h>

    using namespace std;

    int main(void)
    {
        Display * dpy = XOpenDisplay(0x0);
        XEvent ev;

        if(!dpy) return 1;

        Time t = CurrentTime;
        XGrabKeyboard(dpy, DefaultRootWindow(dpy), false, 
                           GrabModeAsync, GrabModeAsync,t);

        for(;;)
        {
          //XGrabKeyboard(dpy, DefaultRootWindow(dpy), false, 
          //                   GrabModeAsync, GrabModeAsync,t);
            XNextEvent(dpy, &ev);
            if(ev.type == KeyPress)
                cout << "Key pressed" << endl;
          // XGrabKeyboard(dpy, DefaultRootWindow(dpy), false,                 
          //                      GrabModeAsync, GrabModeAsync,t);

        }
    } 
```

它运作良好，但不适合我。它锁定键盘以在所有窗口中输入，除了它自己的程序（取消注释循环中的第一行和最后一行给了我相同的结果）。

也许有人知道我该如何修复它或者我可以使用什么库。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:45:14.860

XSendEvent() 对我有帮助。请参阅[http://tronche.com/gui/x/xlib/event-handling/XSendEvent.html](http://tronche.com/gui/x/xlib/event-handling/XSendEvent.html)

```
 switch(ev.type)
    {
    case KeyPress:
        XSendEvent(display,InputFocus,False,KeyPressMask,&ev);
        break;
    case KeyRelease:
        XSendEvent(display,InputFocus,True,KeyReleaseMask,&ev);
        break;
    case ButtonPress:
        XSendEvent(display,PointerWindow,True,ButtonPressMask,&ev);
        break;
    case ButtonRelease:
        XSendEvent(display,PointerWindow,True,ButtonPressMask,&ev);
        break;
    default:

        break;
    } 
```

# oop - 存储有关类实例的附加信息的正确方法是什么？

> ID：13570882
> 
> 赞同：2
> 
> 时间：2012-11-26T18:26:00.197
> 
> 标签：oop, metadata, code-organization

我正在做一个项目，其中每个类通常包含另一个类的实例列表。这在多个层上重复，因此 Class1 将包含 Class2 的实例列表，该列表又将包含 Class3 的实例列表，依此类推。

我想让每个类尽可能独立和独立，以便它们可以在不同的项目中再次重用。

然而，在这种架构中，经常发生来自上层的类不仅需要访问来自下层的对象，还需要存储它们的元数据，这些元数据对关联的对象是不可见的。这不仅发生在相邻的层上，*也发生在彼此远离的层上*。我想知道可能的正确方法是什么，因为我担心我现在使用的方法不是最好的方法。

我想到的解决方案是：

*   对于每个类，创建一个存储成瘾所需信息的包装器。这可能是矫枉过正（我们可能只需要存储一些位），我不确定如何将这个概念应用于遥远的层。
*   创建一个单独的结构来保存元数据，并保留成对的对象实例和元数据结构实例。同样，不确定如何将其与远层一起使用。
*   在较低级别中创建公共成员，他们无法看到/使用并且仅由较高级别的类使用。这解决了问题，但我认为这是非常糟糕的做法，并且严重依赖外部代码来变得很好，而不是“触摸”元数据。

其他可能的解决方案是什么？

作为一个令人上瘾的信息，我正在用 C++ 编写我的项目，但这不应该与我的问题真正相关。

编辑：这是一个更好地解释我的意思的例子：

假设我们有 A 类和 B 类，它们是完整的独立类。然后我们有 C 类，它是 A 类实例集合的管理器。为此，它需要存储有关它正在管理的每个 A 实例的成瘾信息。

此外，我们有 D 类，它包含 C 类的一个实例和 B 类对象的集合。最后一个类需要能够将 B 类的每个实例与 A 类的一个实例关联起来（这些实例是托管的）通过其 C 类的受控实例），*反之亦然*。

在此示例中，C 和 D 所需的信息将存储在何处以及如何存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:26:47.703

我认为您的一般问题是您想要 A 的实例和 B 的实例以及每个实例的额外元数据。所以有一个 WrappedA 和 WrappedB 类，其中包含对 A 的引用，并维护您需要的任何元数据。

```
Public class A
{
}

public class WrappedA
{
     private A _underlyingInstance;
     public WrappedA(A instanceToWrap)
     {
          _underlyingInstance = instanceToWrap;
          SetAdditionalMetaData();
     }

     protected SetAdditionalMetaData()
     {
          //use _underlyingInstance to set meta data
     }
} 
```

然后，不是拥有类型 A 的列表，而是使用类型包装 A 的列表。

```
public class C
{
     private List<WrappedA> _myAs = null;
     public C(A[] rawAs)
     {
          _myAs = new List<WrappedA>();
          foreach(A a in rawAs)
          {
               _myAs.Add(new WrappedA(a);
          }

     }
} 
```

无论您需要添加到包装类中的什么方法，都可以这样做。如果您需要存储有关 AXB 的特殊信息，这似乎是 Ds 的责任。D 可以创建一个以 [A_B] 作为键的字典，然后将您想要的关于 AXB 组合的任何数据存储在值中。

希望有帮助。

# linux - bash递增数组值脚本

> ID：13570888
> 
> 赞同：-1
> 
> 时间：2012-11-26T18:26:23.743
> 
> 标签：linux, bash, printing, for-loop, sh

我需要生成数字值并在 curl 上使用该值。我已经这样做了，但是代码有一些错误，因为无法生成数字。

```
#!/bin/bash

for a in $(seq 0 9)
do
pass[0]="$a"
   for b in $(seq 0 9)
   do
   pass[1]="$b"
        for c in $(seq 0 9)
        do
        pass[2]="$c"
            for d in $(seq 0 9)
            do
            pass[3]="$d"
                for e in $(seq 0 9)
                do
                pass[4]="$e"
                    for f in $(seq 0 9)
                    do
                    pass[5]="$f"
                   curl -d "$a$b$c$d$e$f" somesite.php
                    done
                done
             done
         done    
     done
done 
```

我得到这个输出：

```
 echo ${pass[*}
>                     done
> 
Display all 289 possibilities? (y or n)
> e
>              done
>          done    
>      done
> done
> ^C 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:31:39.927

更简单（但仍然可怕）：

```
for a in $(seq 0 9)
do
    for b in $(seq 0 9)
    do
        for c in $(seq 0 9)
        do
            for d in $(seq 0 9)
            do
                for e in $(seq 0 9)
                do
                    for f in $(seq 0 9)
                    do
                        curl -d "$a$b$c$d$e$f" somesite.php
                    done
                done
            done
        done    
    done
done 
```

我不相信您复制到问题的脚本是您执行的脚本。当我运行您的脚本时，它会执行以下命令：

```
curl -d 0 2 0 8 7 9 somesite.php 
```

注意空格；我怀疑它们是 (a) 不需要的，并且 (b) 在不使用 IFS 的情况下基本上是不可避免的，这比我展示的修复代码更糟糕。数组很棒；它们并不适合一切。

顺便说一句，使用起来会更简单（到目前为止）：

```
for number in $(seq -f '%06.0f' 0 1000000)
do
    curl -d "$number" somesite.php
done 
```

或者：

```
seq -f '%06.0f' 0 1000000 |
while read number
do
    curl -d "$number" somesite.php
done 
```

或者......还有其他方法可以做到这一点（见其他答案）。该`seq | while read`循环的优点是不需要超过 7 MiB 的内存来存储数字。

`curl`一百万页需要一段时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:34:37.433

为什么不这样做呢？

```
#!/bin/bash
for ((i=0;i<1000000;++i)); do
    printf -v a "%.6d" "$i"
    curl -d "$a" somesite.php
done 
```

**编辑。**既然你想有一个“更快”的方法，这是我能想到的最快的方法（顺便说一句，这是所有方法中最短的）：

```
#!/bin/bash
for i in {000000..999999}; do
    curl -d "$i" somesite.php
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:36:24.583

我认为这要好得多：

```
for (( i=0; i<1000000; i++ )); do 
    VAL=$(printf "%06d" $i)
    curl -d "$VAL" somesite.php
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T18:37:25.847

试试这个

```
for i in `seq -f '%06.f' 0 999999`; do
    curl -d "$i" somesite.php
done 
```

# c++ - mbtowc 在 osx 上总是返回一个字节

> ID：13570891
> 
> 赞同：2
> 
> 时间：2012-11-26T18:26:48.057
> 
> 标签：c++, macos, unicode

我已经在文件系统中搜索名称中不可移植的字符。对于那个 ich 使用 mbtowc 函数来检查每个字符。

在 OSX 上我试过：

// 在 OSX 上

```
#include <iostream>

using namespace std;

int main(int argc, const char * argv[])
{
string s1 = "Ä";
size_t len = s1.length();           // will be 2, ok

const char* s1c = s1.c_str();       // 0xC3 0x84 0x00, ok

char a = s1[0];                     // 0xc3, ok
char b = s1[1];                     // 0x84, ok

mbtowc(NULL,NULL,0);                // reset

wchar_t wc;
int mb_len = mbtowc(&wc,s1c,len);   // mb_len = 1, wc=0xc3 00 00 00
                                    // why only one byte?
                                    // how can i get the right Wchar???
char mb2[10];
int mblen2 = wctomb(mb2,wc);        // mblen2 = 1; mb2 = 0xC3

string s2 = string(mb2);            // len = 1 only 0xC3

return 0;
} 
```

为什么 mbtows 只为所有字符返回 1？

赫里伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:23:38.273

您的程序以 C 语言环境开始，它将字符串视为 ASCII（或未指定的 ASCII 兼容 8 位编码）。所以`mbtowc()`只需将字符串中的第一个字节复制到`wchar_t`. 您需要`setlocale(LC_CTYPE, locale)`使用使用 UTF-8 的语言环境进行调用，因为您的源代码以 UTF-8 编码，因此字符串常量也是如此。

`setlocale(LC_CTYPE, "")`使用用户当前的区域设置，因此如果您将读取用户提供的文件，则它是合适的；但是，如果有人尝试在不使用 UTF-8 语言环境的机器上运行您的程序，您的示例可能会中断。您可以改用`setlocale(LC_CTYPE, "UTF-8")`，这是一个始终使用 UTF-8 的语言环境（我不相信它是标准化的，但它至少存在于我的 Mac OS X 和 Linux 机器上）。

这是一个示例（这次使用纯 C，而不是 C++，以使其更简单）。我添加了一些 printfs 来显示发生了什么。`mbtowc()`它在调用之前和之后运行相同`setlocale()`。

```
#include <stdio.h>
#include <locale.h>
#include <string.h>
#include <stdlib.h>

void test_mbtowc(char *s) {
  size_t len = strlen(s);
  wchar_t wc;

  mbtowc(NULL,NULL,0);
  int mb_len = mbtowc(&wc,s,len);
  printf("%d, %08x\n", mb_len, wc);
}

int main()
{
  char *s = "Ä";

  printf("%02hhx %02hhx %02hhx\n", s[0], s[1], s[2]);
  test_mbtowc(s);

  setlocale(LC_CTYPE, "UTF-8");
  test_mbtowc(s);

  return 0;
} 
```

这是输出。如您所见，我们将字符串以 UTF-8 编码。第一次调用`mbtowc`简单复制只是复制第一个字节；`mb_len`是`1`，我们得到`c3`结果。第二个给我们`mb_len`2 和in`c4`的 Unicode 代码点。`Ä``wc`

```
c3 84 00
1, 000000c3
2, 000000c4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:55:56.030

`mbtowc()`is 使用 C 语言环境来确定要转换的编码。C 语言环境始终以 开头`"C"`，不保证支持基本字符集之外的任何字符（ASCII 支持的抽象字符库的子集）。

默认情况下，OS X 在其他大多数地方都使用 UTF-8，因此`mbtowc()`不会在您期望的编码之间进行转换。

您可以将 C 语言环境设置为使用适当编码的语言环境。如果您在 C++ 程序中执行此操作，您可能应该通过设置 C++ 全局语言环境来执行此操作（这反过来将设置 C 语言环境）：

```
std::locale::global(std::locale("en_US.UTF-8")); // locale names are not portable 
```

然而，弄乱语言环境通常不是一件好事。全局语言环境本质上是一个全局变量，并且有所有正常的理由反对使用它。它具有广泛的影响，例如，它可以影响`sprintf()`某些库中某个可能依赖于未设置为某些语言环境的 deep 的某些使用。此外，区域设置敏感函数可能不是线程安全的和/或可重入的。

OS X 有一个“扩展语言环境支持”库（头文件`<xlocale.h>`），其中`*_l`包含对语言环境敏感的函数版本，这些函数采用额外的语言环境参数而不是使用全局语言环境。这解决了全局语言环境的许多问题。我相信它甚至被用于在 OS X 上实现许多标准 C++ 语言环境功能。

```
locale_t loc = newlocale(LC_ALL_MASK, "en_US.UTF-8", NULL);
char buf[MB_CUR_MAX_L(loc)];
mbstate_t state = {};  
wcrtomb_l(buf, L'A', &state, loc);
freelocale(loc); 
```

如果您只需要在已知编码之间进行转换，那么您可能根本不需要使用语言环境。iconv 是一个允许在大量编码之间直接转换的 API。C++ 还支持在某些编码之间进行转换，特别是在各种 Unicode 编码（UTF-8、UTF-16 和 UTF-32）之间使用 wstring_convert 模板和一些标准的 codecvt 方面（codecvt_utf8、codecvt_utf8_utf16）。您还可以调整 codecvt_byname 以在`char`和`wchar_t`语言环境编码之间进行转换，而不会直接与语言环境混淆。

* * *

当然，这一切只有在您确实需要在编码之间进行转换时才重要。目前尚不清楚这是否只是“在文件系统中搜索名称中不可移植的字符”所必需的。如果您有一个您认为合法的代码点列表（或一个非法代码点列表），那么在您的 UTF-8 字符串中直接搜索这些代码点的 UTF-8 编码应该不难，无需转换。

# java - Primefaces拖放动态数据

> ID：13570892
> 
> 赞同：0
> 
> 时间：2012-11-26T18:26:51.543
> 
> 标签：java, jsf, primefaces, draggable

我对 primefaces 很陌生，我用 p:draggable 组件遇到了这个问题。这是我的网站，它使用 p:draggable 组件，就像在 primefaces 展示中一样。

```
 <p:fieldset legend="PreparedData">

                <p:dataGrid id="currentData" columns="1" var="res" value="#{SomeBean.data}">
                    <p:column>
                        <p:panel id="draggedres" header="#{res.name}">
                            <h:panelGrid columns="1">
                                <h:outputText value="#{res.name}"/>
                            </h:panelGrid>

                        </p:panel>
                        <p:draggable for="draggedres" />

                    </p:column>
                </p:dataGrid>
             </p:fieldset>
             <p:commandButton value="Add" actionListener="#{SomeBean.addItem}" update="currentData" /> 
```

这是我的豆 SomeBean。

```
public class SomeBean{

    private List<SomeObjects> data = new ArrayList<SomeObjects>();

    public void addItem(){
        data.add(new SomeObjects("someName"));
    }

    //GETTERS SETTERS                 
} 
```

现在的问题是，当我将新数据添加到该列表时，它出现但不可拖动。如何使这些数据可拖动的唯一方法是将它们设置为该 bean 的构造函数。有人知道我在哪里犯错了吗？我已经阅读了 Primefaces 手册，但没有任何内容。在那里，他们只是默默地假设数据只会从构造函数中设置。感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:51:30.890

您提交的示例代码运行良好。检查您正在使用的代码，有时为了混淆代码数据（如变量名、可能包含敏感信息的包名），我们会省略或更改与手头的错误相关的内容。

这是我用来测试您的示例的代码（ipsis literis）：

SomeBean.java

```
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class SomeBean {
private List<SomeObjects> data = new ArrayList<SomeObjects>();

public void addItem(){
data.add(new SomeObjects("someName"));
}

public List<SomeObjects> getData() {
    return data;
}

public void setData(List<SomeObjects> data) {
    this.data = data;
}

} 
```

SomeObject.java

```
public class SomeObjects {

private String name;

public SomeObjects(String string) {
    this.setName(string);
}

public void setName(String name) {
    this.name = name;
}

public String getName() {
    return name;
}

} 
```

可拖动的.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui"
xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
</h:head>
<h:body>
    <p:separator styleClass="espacador" />
    <p:fieldset legend="PreparedData">
        <p:dataGrid id="currentData" columns="1" var="res" value="#{someBean.data}">
            <p:column>
                <p:panel id="draggedres" header="#{res.name}">
                    <h:panelGrid columns="1">
                        <h:outputText value="#{res.name}" />
                    </h:panelGrid>
                </p:panel>
                <p:draggable for="draggedres" />
            </p:column>
        </p:dataGrid>
    </p:fieldset>
    <p:commandButton value="Add" actionListener="#{someBean.addItem}" update="currentData" />
<h:body>
</html> 
```

# google-maps - Google Geocoding API 找不到地方

> ID：13570894
> 
> 赞同：0
> 
> 时间：2012-11-26T18:27:04.303
> 
> 标签：google-maps, google-maps-api-3, geocoding

我正在寻找阿尔巴尼亚地拉那的烈士墓地

[http://maps.googleapis.com/maps/api/geocode/json?address=Martyr](http://maps.googleapis.com/maps/api/geocode/json?address=Martyr) 's%20Cemetery&sensor=false

如您所见，我从中国获得了 2 个结果

如果我在谷歌地图中搜索该地方存在。

我应该如何或使用什么服务来找到正确的地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:41:41.857

Martyr's Cemetery 不是邮政地址，如果您知道街道地址，地理编码器也许能够找到匹配项。Google Maps 中的结果可能是 Places 结果，在这种情况下，Places API 可能比地理编码器更适合您当前的搜索字符串。

使用[文档中的 Place Id 查找器](https://developers.google.com/maps/documentation/javascript/examples/places-placeid-finder)，它发现：

> 烈士墓地
> ID ChIJ_QneJtowUBMR_AW853deXtI
> Rruga Dr Shefqet Ndroqi, 地拉那, 阿尔巴尼亚

[概念证明小提琴（使用 Google Maps Javascript API v3 中的 Places 库）](https://jsfiddle.net/geocodezip/4exra6qx/)

**代码片段：**

```
function initMap() {
  var map = new google.maps.Map(document.getElementById('map'), {
    center: {
      lat: -33.8688,
      lng: 151.2195
    },
    zoom: 13
  });

  var input = document.getElementById('pac-input');

  var autocomplete = new google.maps.places.Autocomplete(input);
  autocomplete.bindTo('bounds', map);

  map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

  var infowindow = new google.maps.InfoWindow();
  var infowindowContent = document.getElementById('infowindow-content');
  infowindow.setContent(infowindowContent);
  var marker = new google.maps.Marker({
    map: map
  });
  marker.addListener('click', function() {
    infowindow.open(map, marker);
  });

  autocomplete.addListener('place_changed', function() {
    infowindow.close();
    var place = autocomplete.getPlace();
    if (!place.geometry) {
      return;
    }

    if (place.geometry.viewport) {
      map.fitBounds(place.geometry.viewport);
    } else {
      map.setCenter(place.geometry.location);
      map.setZoom(17);
    }

    // Set the position of the marker using the place ID and location.
    marker.setPlace({
      placeId: place.place_id,
      location: place.geometry.location
    });
    marker.setVisible(true);

    infowindowContent.children['place-name'].textContent = place.name;
    infowindowContent.children['place-id'].textContent = place.place_id;
    infowindowContent.children['place-address'].textContent =
      place.formatted_address;
    infowindow.open(map, marker);
  });

  setTimeout(function() {
    google.maps.event.trigger(input, 'keydown', {
      keyCode: 40
    })
    google.maps.event.trigger(input, 'keydown', {
      keyCode: 13,
      triggered: true
    })
  }, 1000);
}
```

```
/* Always set the map height explicitly to define the size of the div
 * element that contains the map. */

#map {
  height: 100%;
}

/* Optional: Makes the sample page fill the window. */

html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

.controls {
  background-color: #fff;
  border-radius: 2px;
  border: 1px solid transparent;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
  box-sizing: border-box;
  font-family: Roboto;
  font-size: 15px;
  font-weight: 300;
  height: 29px;
  margin-left: 17px;
  margin-top: 10px;
  outline: none;
  padding: 0 11px 0 13px;
  text-overflow: ellipsis;
  width: 400px;
}

.controls:focus {
  border-color: #4d90fe;
}

.title {
  font-weight: bold;
}

#infowindow-content {
  display: none;
}

#map #infowindow-content {
  display: inline;
}
```

```
<input id="pac-input" class="controls" type="text" placeholder="Enter a location" value="Martyr's Cemetery, Tirana, Albania">
<div id="map"></div>
<div id="infowindow-content">
  <span id="place-name" class="title"></span>
  <br> Place ID <span id="place-id"></span>
  <br>
  <span id="place-address"></span>
</div>
<!-- Replace the value of the key parameter with your own API key. -->
<script src="https://maps.googleapis.com/maps/api/js?libraries=places&callback=initMap" async defer></script>
```

# mysql - 以 RFC2822 格式插入日期 - 没有时区说明符？

> ID：13570895
> 
> 赞同：-1
> 
> 时间：2012-11-26T18:27:05.193
> 
> 标签：mysql, time, timezone, convert-tz, timestamp-with-timezone

我有一个**RFC2822**格式的字符串，我想在 UTC 时间插入适当的时间戳。

直到现在我想出了

```
DATE_FORMAT(?, "%a, %d %b %Y %T -0700") 
```

但问题是 TZ offset `-0700`，似乎没有格式说明符。

如何正确地将这样的时间戳插入数据库？

我想避免在应用程序端进行处理。

**更新**

```
SELECT CONVERT_TZ(STR_TO_DATE(SUBSTRING('Mon, 15 Aug 2005 15:52:01 +0200',1,25), '%a, %d %b %Y %T'),CONCAT(SUBSTRING('Mon, 15 Aug 2005 15:52:01 +0200',27,3), ':', SUBSTRING('Mon, 15 Aug 2005 15:52:01 +0200',30,2)),'+00:00') AS conv; 
```

**如何通过使用变量而不是重复字符串来“干净”地做到这一点`Mon, 15 Aug 2005 15:52:01 +0200`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:35:36.543

```
SET @a:='Mon, 15 Aug 2005 15:52:01 +0200';
SELECT
  CONVERT_TZ(
    STR_TO_DATE(SUBSTRING(@a,1,25), '%a, %d %b %Y %T'),
    CONCAT(SUBSTRING(@a,27,3), ':', SUBSTRING(@a,30,2)),
    '+00:00'
  )
AS conv; 
```

这就是我所说的答案。

# html - Html5 的代码覆盖率工具

> ID：13570896
> 
> 赞同：1
> 
> 时间：2012-11-26T18:27:06.327
> 
> 标签：html, code-coverage

是否有可用于 Html5 的代码覆盖工具？

我遇到了一个用于 Javascript (JSCoverage) 的工具，但我没有看到任何关于它是否可用于 Html5 的参考？

我看到另一个名为 Clover 的工具。可以用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:30:38.503

HTML5 不是编程语言；它只是标记语言和一组 API。JavaScript 代码覆盖工具应该与您使用的 HTML 版本无关。因此，JSCoverage 是否适合您不应该取决于您是否使用 HTML5；它应该只取决于 JSCoverage 是否适用于您的代码库。

当很多人说“HTML5”时，他们的意思是 HTML5 + JavaScript + CSS。如果这就是你的意思，那么是的，JSCoverage 应该适合你。

看起来[JSCoverage](http://siliconforks.com/jscoverage/)已被[JSCover](http://tntim96.github.com/JSCover/)取代，因此您可能想尝试一下。

Clover 是一种 Java 代码覆盖工具，而不是 JavaScript（尽管名称相似，但它们彼此无关）。Clover 不适用于 HTML5 + JavaScript + CSS 应用程序。

# android - Android 应用内存限制

> ID：13570897
> 
> 赞同：0
> 
> 时间：2012-11-26T18:27:07.150
> 
> 标签：android, memory, graphics, bitmap

我有一个应用程序，它通过将所有帧作为单独的位图加载到内存中并通过线程循环将它们分配给`imageViews`.

位于`imageViews`片段上，片段加载在`pageViewer`. 我已将页面查看器的屏幕外限制设置为 1，因此我最多一次处理三个片段/gif。

现在在 2.1 的模拟器上，如果所有三个 gif 同时在内存中，我会收到此错误：

```
11-25 17:28:34.269: E/dalvikvm-heap(524): 292000-byte external allocation too large for this process.
11-25 17:28:34.269: E/(524): VM won't let us allocate 292000 bytes 
```

我在 2.3.3 上遇到了同样的错误，但在 4.0.3 模拟器或运行 4.0.4 的我的 Galaxy Tab 10.1 上却没有——这两个运行良好且速度相当快。

我尝试加载 1024x999 3.2MB gif，甚至 4.0.3 模拟器都失败了，但我的平板电脑仍然能够显示一些 gif，直到它也停止加载它们；该应用程序使用了大约 250-300MB 的 RAM。

那么有没有办法预测真实设备的工作方式？我应该针对更高的 API 版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:38:13.647

加载这么多位图时必须非常小心。您可以轻松超过所需的内存量。**请记住**，您使用的是有限的设备，**不要**期望无限的资源尽可能地提高内存效率。

如果您从 android 开发网站了解最佳实践，您很可能会解决您的问题：

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

读一读，应该可以帮助您解决问题。

# .htaccess - 使用 .htaccess 密码保护单个文件

> ID：13570898
> 
> 赞同：10
> 
> 时间：2012-11-26T18:27:07.463
> 
> 标签：.htaccess, passwords, cpanel, .htpasswd

我尝试使用 .htaccess 对单个文件进行密码保护。但是在访问文件时，浏览器只会重定向到网站的主页。我的 .htpasswd 在我的 webroot 上。我的 .htaccess 文件如下

```
 <FilesMatch "result.php">
    AuthName "Member Only"
    AuthType Basic
    AuthUserFile /home/username/.htpasswd
    require valid-user
    </FilesMatch> 
```

我想保护文件 result.php。我已将用户名替换为我的确切 cpanel 用户名。有人请帮忙

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-04-01T09:01:05.803

```
 <FilesMatch "results.php">
 AuthName "Member Only"
 AuthType Basic
 AuthUserFile /home/username/public_html/.htpasswd
 require valid-user
 </FilesMatch> 
```

*   必须放置密码目录的完整绝对路径

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-26T18:13:48.543

这是一个例子

```
# password protect single file
<IfModule mod_auth.c>
 <Files "protected.html">
  AuthName "Username and password required"
  AuthUserFile /home/path/.htpasswd
  Require valid-user
  AuthType Basic
 </Files>
</IfModule> 
```

# javascript - 在ajax程序中访问匿名函数中的元素时出错

> ID：13570905
> 
> 赞同：0
> 
> 时间：2012-11-26T18:27:38.543
> 
> 标签：javascript, jquery, html, ajax, function

我正在尝试在鼠标悬停时使用 ajax 从文件中获取数据。一切正常，除了当我尝试访问`<p>`匿名函数中的元素时，我什么也得不到。可能的原因是元素丢失了匿名函数内的范围。如果您看到可能的解决方案，请告知。

```
<html>
    <head>
        <title>MouseOver Effect And Ajax </title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <script type="text/javascript" src="http://localhost/study/libraries/jquery-1.8.3.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                var xhr=false;
                initAll();

                $('div.pcard').mouseover(function(){
                    if(xhr)
                    { 
                        var pname=$(this).children('p.pname').text();
                        var pname=pname+"_details.txt";
                        xhr.open("GET",pname);;
                        xhr.onreadystatechange=function(){
                            if(xhr.readyState==4)
                            { 
                                if(xhr.status==200)
                                { 
                                $(this).children('p.pdesc').text(""+msg);

                                alert($(this).children('p.pname').text());

                                $(this).children('p.pdesc').css({'visibility':'visible'});
                                }
                            }
                        }.bind(this);
                        xhr.send(null);
                    }
                });

                $('div.pcard').mouseout(function(){
                    $(this).children('p.pdesc').css({'visibility':'hidden'});   
                });

                function initAll()
                { 
                    if(window.XMLHttpRequest)
                    { 
                        xhr=new XMLHttpRequest();
                    }
                    else if(window.ActiveXObject)
                    { 
                        try{
                            xhr=new ActiveXObject("Microsoft.XMLHTTP");
                        }catch(e){}
                    }
                }

            });
        </script>
    </head>
    <body>
        <h2>Interactive MouseOver</h2>
        <div id="products">
            <div class="pcard">
                <p class="pname">Sandwhiches</p>
                <p class="pdesc"></p>           
            </div>
            <div class="pcard">
                <p class="pname">Pizzas</p>
                <p class="pdesc"></p>           
            </div>
            <div class="pcard">
                <p class="pname">Soups</p>
                <p class="pdesc"></p>           
            </div>
            <p style="clear:both"></p>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:56:17.310

我们的评论者得出的结论是，共享一个`XMLHttpRequest`不是一个好主意，您可能希望为每个`mouseover`发生的事件启动一个新的。`open`当您调用已打开/未完成的请求时，事情可能会变得一团糟，但`send`应该没问题。通常做的是这样的：

```
$(document).ready(function () {
    $('div.pcard').mouseover(function () {
        var self = $(this);

        var pname = self.children('p.pname').text();
        var pname = pname + "_details.txt";

        var xhr = ajaxFunction();
        xhr.open("GET", pname);
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4) {
                if (xhr.status == 200) {
                    var msg = "" + xhr.responseText;

                    self.children('p.pdesc').text(""+msg);

                    //alert(self.children('p.pname').text());

                    self.children('p.pdesc').css({'visibility':'visible'});
                }
            }
        };
        xhr.send(null);
    });

    $('div.pcard').mouseout(function(){
        $(this).children('p.pdesc').css({'visibility':'hidden'});   
    });
});

function ajaxFunction() {
    var ajaxRequest; // The variable that makes Ajax possible!
    try {
        // Firefox, Chrome, Opera 8.0+, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e) {
        // Internet Explorer Browsers
        try {
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
            try {
                ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try {
                    ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP.6.0");
                } catch (e) {
                    try {
                        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP.3.0");
                    } catch (e) {
                        throw new Error("This browser does not support XMLHttpRequest.");
                    }
                }
            }
        }
    }
    return ajaxRequest;
} 
```

在 中`ajaxFunction`，我不确定您是否真的必须通过前 2 次 ActiveXObject 尝试，这只是我所看到的……还有更多您可以“尝试”的。在您的原始代码中还有其他一些奇怪的东西（其他人没有看就编辑了） - 您注释掉了设置`msg`变量的行，然后您尝试在下一行使用它。`.bind`可能有效，但我喜欢我提供的方式......这取决于你......尝试两者，看看是否有一个单独工作。

但是正如另一个答案已经指出的那样，如果您已经在使用 jQuery，为什么不使用`$.ajax`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:34:47.860

你有 jquery，你为什么要重写你自己的 ajax 调用？

将 this 保存到局部变量中：`var that = this`然后您可以重用它。

```
$(document).ready(function(){
    $('div.pcard').mouseover(function(){

    var pname=$(this).children('p.pname').text();
    pname=pname+"_details.txt";
    var that = this; /// keeping the scope
    $.ajax({
       url:pname,
       success: function () {
           $(that).children('p.pdesc').text(""+msg);
           alert($(that).children('p.pname').text());
           $(that).children('p.pdesc').css({'visibility':'visible'});

       }
    });
}); 
```

# xsd - xsd 限制未反映在 WSDL 中

> ID：13570917
> 
> 赞同：3
> 
> 时间：2012-11-26T18:28:45.347
> 
> 标签：xsd, wsdl, jax-ws

在部署时从我的 JAX-WS 服务生成的 WSDL 不反映在关联的 XMLSchema .xsd 文件中指定的限制，尽管生成的 Java 类文件可以。我正在使用 xjc 来编译架构。

下面是一些更详细解释的片段： ...来自 .xsd 文件：

```
<complexType name="AuthToken">
<all
   <element name="userName" maxOccurs="1" minOccurs="1">
    <simpleType>
      <restriction base="string">
    <pattern value="[\p{L}\p{Nd}\p{P}]+"></pattern>
       </restriction>
     </simpleType>
    </element>
.... 
```

来自 WSDL：

```
<xs:complexType name="AuthToken">
     <xs:all>
        <xs:element name="userName" type="xs:string"/>
         <xs:element name="password" type="xs:string"/>
          <xs:element name="partnerCode" type="xs:string"/>
       </xs:all>
    .... 
```

我本来期望（并且想要）这样的事情：

```
<xs:element name="username">
   <xs:simpleType>
     <xs:restriction base="xs:string">
       <xs:pattern value="[\p{L}\p{Nd}\p{P}]+"/>
     </xs:restriction>
    </xs:simpleType> 
```

我在定义 web 服务函数调用的顶级 Java impl 文件中是否缺少一些注释或类似内容？任何意见，将不胜感激。我已经看到了几个关于 xsd/wsdl 差异的问题，但似乎没有一个适用。

谢谢。

# java - 如何在循环中划分数组块？

> ID：13570926
> 
> 赞同：1
> 
> 时间：2012-11-26T18:29:27.250
> 
> 标签：java, arrays

我试图弄清楚如何获取一个数组stalls[] 并找到一个不断减小的大小的中间索引。

本质上，我正在获取数组的中间索引，将其分配给布尔值 true，*然后获取新的、较小的索引大小并找到**它*的中点（忽略右侧的所有内容）。

在打印形式中，它可能看起来像

```
_ _ _ _ _ X _ _ _ _

_ _ X _ _ X _ _ _ _ 
```

我不知道如何让它正确循环。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:32:16.417

做：

```
 int begin = 0;
  int end = array_size
  int middle = (end + begin) / 2;

  while( ... )
  {
  // do something
     middle = middle / 2; // break in half
  } 
```

...

上面的代码遍历前半部分，要遍历后半部分，您只需修改`begin`变量即可：

```
int being = array_size / 2; 
```

对应于数组的中间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:40:15.433

关于你想要什么有点模糊。但这可能会让你更接近。

```
public class homework
{
  public static void main(String args[])
  {
    new homework();
  }

  public homework()
  {
    boolean[] stalls = new boolean[50];

    int middle = stalls.length/2;

    for (int i = 0; i < stalls.length; i++)
    {
      stalls[middle] = true;
      middle /= 2; 
    }

    for (int i = 0; i < stalls.length; i++)
    {
      if (stalls[i] == true)
      {
        System.out.print("X");
      }
      else
      {
        System.out.print("_");
      }

      System.out.print(" ");
    }

    System.out.println("");
  }
} 
```

# javascript - 根据另一个字段的值自动填充一个字段

> ID：13570927
> 
> 赞同：-4
> 
> 时间：2012-11-26T18:29:38.987
> 
> 标签：javascript, html, javascript-events

我需要一个 JavaScript，它可以让我根据另一个选择列表类型的字段自动填充文本字段。

这是我的 HTML 标记：

```
<div class="attribute-16 even"><div id="edit-attributes-16-wrapper" class="form-item">
 <label for="edit-attributes-16">Position: <span class="form-required">*</span></label>
 <select id="edit-attributes-16" class="form-select required" name="attributes[16]"><option selected="selected" value="">Please select</option><option value="32">Content</option><option value="33">Footer</option></select>
</div> </div>

<div class="attribute-17 odd"><div id="edit-attributes-17-wrapper" class="form-item">
 <label for="edit-attributes-17">Anchor Text: <span class="form-required">*</span>: </label>
 <input type="text" class="form-text attribute" value="" size="60" id="edit-attributes-17" name="attributes[17]" maxlength="128">
</div> </div> 
```

前一个字段的值将自动输入为后一个字段的值。这就是我想在这里做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:49:23.197

您必须将事件侦听器添加到您的选择字段并将其值填充到您的文本字段中。你的 HTML 有点乱。所以我一般只写 jquery。你可以摆弄它。

您必须在加载正文后立即设置此事件侦听器。所以在你的 HTML

```
<body onload="init()" id="stage" class="theme"> 
```

在你的 javascript 上

```
function init() {
   $("#selectListID").on("change", function(){
      var value = $(this).val();
      $("#inputFieldID").val(value);
   };)
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:50:34.983

```
<label for="edit-attributes-16">Position: <span class="form-required">*</span></label>
<select id="edit-attributes-16" class="form-select required" name="attributes[16]" onchange="document.getElementById('attributes-16-text').innerHTML=document.getElementById('edit-attributes-16').value;">
<option selected="selected" value="">Please select</option><option value="32">Content</option>
<option value="33">Footer</option>
</select>
<div id="attributes-16-text"> </div> 
```

现场演示：http: [//jsfiddle.net/C7pnj/1/](http://jsfiddle.net/C7pnj/1/)

关键是使用**onchange 事件处理程序**来检测用户操作。

我还建议避免在 id 属性中使用“-”。

PS：正如其他人所指出的，这个论坛的目的是帮助你，而不是为你做所有的工作。

# hadoop - 映射器任务处理不同的数据库列集

> ID：13570931
> 
> 赞同：1
> 
> 时间：2012-11-26T18:29:44.603
> 
> 标签：hadoop, mapreduce

我们有一个场景，我们希望单个 Hadoop 作业创建/管理多个映射器任务，其中每个映射器任务将查询关系数据库表中的列子集。我们研究了 DataDrivenDBInputFormat，但这似乎只有助于分区，其中每个映射器任务都可以查询关系数据库表中的行子集。

感谢您在这方面的任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:34:22.470

我建议您编写一个单独的映射器来读取两组列的并集。您可以在同一个映射器中执行多个映射器任务，或者只是将数据转储到一个顺序文件中，多个后续映射器仅使用该文件中需要的内容。这取决于这两组映射器输出彼此之间的相关程度，以及它们在流程稍后的同一 hadoop 步骤中输入的速度（如果有的话）。

# jquery - jquery - 'removeAttr' 没有效果

> ID：13570940
> 
> 赞同：0
> 
> 时间：2012-11-26T18:30:32.070
> 
> 标签：jquery, onclick

此代码是[jquery#faq 页面的直接复制粘贴](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_disable.2Fenable_a_form_element.3F)

```
<select id="x" style="width:200px;">
   <option>one</option>
   <option>two</option>
</select>
<input type="button" value="Disable" onclick="$('#x').attr('disabled','disabled')"/>
<input type="button" value="Enable" onclick="$('#x').removeAttr('disabled')"/> 
```

选项列表在第`select`一次单击时被禁用，但在单击按钮`disable`时不会再次启用。`Enable`

请告诉我，上面的代码有什么问题？

我在 Windows 上使用 Chrome 23.0.1271.64。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:31:56.213

从 jQuery 1.7 开始，使用 .prop 代替：

```
$('#x').prop('disabled', true);
$('#x').prop('disabled', false); 
```

虽然，正如其他人所提到的，它似乎工作正常：

[http://jsfiddle.net/K5MRf/](http://jsfiddle.net/K5MRf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:39:58.850

关于官方 jQuery 页面上存在错误，您是正确的。查看该页面的源代码表明这是实际代码：

```
<select id="x" style="width:200px;" disabled="disabled">
    <option>one</option>
    <option>two</option>
</select>
<input type="button" onclick="$('#x').attr('disabled','disabled')" value="Disable">
<input type="button" onclick="$('#x').attr('disabled','')" value="Enable"> 
```

如您所见，`onclick`代码不正确；要启用控件（根据 jQuery FAQ），`disabled`属性应该设置为`false`或使用`$(..).removeAttr()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:41:29.890

问题是jQuery页面

他们说要使用`$('#x').attr('disabled')`，但是如果您看到运行的实际代码，那就是`$('#x').attr('disabled','')`

这`disabled`会将属性设置为空字符串。但这意味着该属性仍然存在，并且该属性的正确用法是如果该属性完全存在，则该元素被视为禁用。

正确的方法是`.prop`直接使用和使用`true`/`false`值，如@Kurt所示。

# c++ - Visual Studio C++ 阅读标题

> ID：13570944
> 
> 赞同：1
> 
> 时间：2012-11-26T18:30:41.167
> 
> 标签：c++, visual-studio, boost-asio

如果我注释掉所有的 boost 部分，为什么这段代码会起作用，但是当我包含它们时，调试器似乎无法识别与蓝牙相关的代码？

```
#include <cstdlib>
#include <cstdio>
#include <iostream>
#include <iomanip>
#include <string>
#include <boost/asio.hpp>
using namespace::boost::asio;
// These two require ws2_32.lib
#include <Winsock2.h>
#include <Ws2bth.h>
// This one requires Bthprops.lib
#include <BluetoothAPIs.h>
using namespace std;

BLUETOOTH_FIND_RADIO_PARAMS m_bt_find_radio = {sizeof(BLUETOOTH_FIND_RADIO_PARAMS)};
BLUETOOTH_DEVICE_SEARCH_PARAMS m_search_params = {
    sizeof(BLUETOOTH_DEVICE_SEARCH_PARAMS),
    1,
    0,
    1,
    1,
    1,
    15,
    NULL };
BLUETOOTH_DEVICE_INFO m_device_info = { sizeof(BLUETOOTH_DEVICE_INFO), 0, };

// Note:
// Radio - is the thing plugged in/attached to the local machine.
// Device - is the thing that is connected to via the Bluetooth connection.

int main()
{
    HANDLE m_radio = NULL;
    HBLUETOOTH_DEVICE_FIND m_bt_dev = NULL;
    int m_device_id;

    serial_port_base::baud_rate BAUD(9600);
    serial_port_base::character_size CSIZE( 8 );
    serial_port_base::flow_control FLOW( serial_port_base::flow_control::none );
    serial_port_base::parity PARITY( serial_port_base::parity::none );
    serial_port_base::stop_bits STOP( serial_port_base::stop_bits::one );

    io_service io;
    serial_port port( io, "COM3" );
    port.set_option( BAUD );
    port.set_option( CSIZE );
    port.set_option( FLOW );
    port.set_option( PARITY );
    port.set_option( STOP );

    unsigned char command[1] = {0};
    bool change = false;
    bool checker;

    while( true ) {
    do
    {
        ZeroMemory(&m_device_info, sizeof(BLUETOOTH_DEVICE_INFO));
        m_device_info.dwSize = sizeof(BLUETOOTH_DEVICE_INFO);

// Next for every radio, get the device
        m_bt_dev = BluetoothFindFirstDevice(&m_search_params, &m_device_info);
        system("cls");
        if(m_bt_dev != NULL)
            cout << "\nBluetoothFindFirstDevice() is working!\n";
        else
            cout << "\nBluetoothFindFirstDevice() failed with error code " << GetLastError() << endl;

        m_device_id = 0;
        checker = m_device_info.fConnected;

// Get the device info
        do
        {
            char deviceName[248];
            char deviceName2[248] = "SCH-R920";
            for( int i = 0; i < 248; i++ )
            {
                deviceName[i] = (char) m_device_info.szName[i];
            }

            if( !strcmp( deviceName, deviceName2 ) )
            {
            cout << "\nDevice " << m_device_id << ":";
            wcout << "\n\tInstance Name: " << m_device_info.szName;
            cout << "\n\tAddress: " << hex << uppercase << static_cast<unsigned>(m_device_info.Address.rgBytes[5]) << ":" <<
            static_cast<unsigned>(m_device_info.Address.rgBytes[4]) << ":" << static_cast<unsigned>(m_device_info.Address.rgBytes[3]) << ":" <<
            static_cast<unsigned>(m_device_info.Address.rgBytes[2]) << ":" << static_cast<unsigned>(m_device_info.Address.rgBytes[1]) << ":" <<
            static_cast<unsigned>(m_device_info.Address.rgBytes[0]);                                // need to learn to do templates
            cout << "\n\tClass: 0x00" << nouppercase << m_device_info.ulClassofDevice; // template for the two 0's in quotes
            cout << "\n\tConnected: " << ( m_device_info.fConnected != 0 ? "True" : "False" );
            cout << "\n\tAuthenticated: " << ( m_device_info.fAuthenticated != 0 ? "True" : "False" );
            cout << "\n\tRemembered: " << ( m_device_info.fRemembered != 0 ? "True" : "False" );
            }
            else
                m_device_id++;

        } while(BluetoothFindNextDevice(m_bt_dev, &m_device_info));

        if( m_device_info.fConnected == checker )
        {
            change = true;
        }

// NO more device, close the device handle
        if(BluetoothFindDeviceClose(m_bt_dev) == TRUE)
            wcout << "\nBluetoothFindDeviceClose(m_bt_dev) is OK!\n";
        else
            cout << "\nBluetoothFindDeviceClose(m_bt_dev) failed with error code " << GetLastError() << endl;
    } while(BluetoothFindNextRadio(&m_bt_find_radio, &m_radio));

    if( change )
    {
        if( m_device_info.fConnected != 0 )
        {
            cout << "It's connected";
            cin.get();
            //write( port, buffer( '1', 1 ) );
        }
        else
        {
            cout << "It's not connected";
            cin.get();
            //write( port, buffer( '0', 1 ) );
        }
    }

    change = false;

    }

    std::cout << "\n\n_____________________________\n"
         << "Press any key to exit....";
    std::cin.get();
    return 0;
} 
```

调试器给了我：

```
1>------ Build started: Project: Winsock, Configuration: Debug Win32 ------

1>  Source.cpp

1>  Please define _WIN32_WINNT or _WIN32_WINDOWS appropriately. For example:

1>  - add -D_WIN32_WINNT=0x0501 to the compiler command line; or

1>  - add _WIN32_WINNT=0x0501 to your project's Preprocessor Definitions.

1>  Assuming _WIN32_WINNT=0x0501 (i.e. Windows XP target).

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(20): error 
C2146: syntax error : missing ';' before identifier 'm_bt_find_radio'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(20): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(21): error C2146: syntax error : missing ';' before identifier 'm_search_params'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(21): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(23): error C2078: too many initializers

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(30): error C2146: syntax error : missing ';' before identifier 'm_device_info'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(30): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(30): error C2078: too many initializers

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(40): error C2065: 'HBLUETOOTH_DEVICE_FIND' : undeclared identifier

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(40): error C2146: syntax error : missing ';' before identifier 'm_bt_dev'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(40): error C2065: 'm_bt_dev' : undeclared identifier

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(65): error C2228: left of '.dwSize' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(68): error C2065: 'm_bt_dev' : undeclared identifier

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(68): error C3861: 'BluetoothFindFirstDevice': identifier not found

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(70): error C2065: 'm_bt_dev' : undeclared identifier

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(76): error C2228: left of '.fConnected' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(85): error C2228: left of '.szName' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(91): error C2228: left of '.szName' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(92): error C2228: left of '.Address' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(92): error C2228: left of '.rgBytes' must have class/struct/union

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(93): error C2228: left of '.Address' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(93): error C2228: left of '.rgBytes' must have class/struct/union

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(94): error C2228: left of '.Address' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(94): error C2228: left of '.rgBytes' must have class/struct/union

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(95): error C2228: left of '.Address' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(95): error C2228: left of '.rgBytes' must have class/struct/union

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(96): error C2228: left of '.ulClassofDevice' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(97): error C2228: left of '.fConnected' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(98): error C2228: left of '.fAuthenticated' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(99): error C2228: left of '.fRemembered' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(104): error C2065: 'm_bt_dev' : undeclared identifier

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(104): error C3861: 'BluetoothFindNextDevice': identifier not found

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(106): error C2228: left of '.fConnected' must have class/struct/union

1>          type is 'int'

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(112): error C2065: 'm_bt_dev' : undeclared identifier

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(112): error C3861: 'BluetoothFindDeviceClose': identifier not found

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(116): error C3861: 'BluetoothFindNextRadio': identifier not found

1>c:\users\sequoia\documents\visual studio 2012\projects\winsock\winsock\source.cpp(120): error C2228: left of '.fConnected' must have class/struct/union

1>          type is 'int'

========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:33:11.910

尝试在所有“#include”行之后推送所有“使用命名空间”行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T20:19:04.923

胡乱猜测：

使用 asio，您可以拉入 Windows 头文件（套接字需要），其中定义了与 STL 最小/最大冲突的讨厌的最小最大宏。您必须在包含 boost asio 之前定义 NOMINMAX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T19:11:31.697

最好包含 c 而不是 c++，然后是第 3 方，然后按顺序包含您自己的标头（cc 文件除外，首先包含您自己的声明标头）。在这种情况下，可能有一个定义是 asio 正在检查是否存在干扰。winsock 的东西是一个检查开始的好地方。我想你会发现这可能是问题（或非常接近）[Boost::asio winsock 和 winsock 2 兼容性问题](https://stackoverflow.com/questions/9750344/boostasio-winsock-and-winsock-2-compatibility-issue)

这些问题在包含 windows.h 的标头中很常见。

# mysql - 您可以专门搜索 mysql 以查找十进制值，特别是单个整数后跟小数吗？

> ID：13570945
> 
> 赞同：0
> 
> 时间：2012-11-26T18:30:43.717
> 
> 标签：mysql, sql

设想：

我想创建一组具有不同类型的用户，并有另一个表来处理不同用户类型的非标准信息。因此，每个用户都将具有全局属性，例如名字、姓氏等。然后，专门的用户可能具有与通用信息/全局信息不同的属性。

所以我在想的是在mysql中正常创建一个表，主键是整数（int），然后有一个辅助表，其中包含所有其他额外字段，主键始终与主键相同主用户表。例如：1.1、1.2、1.3。然后辅助表将有一个可能的标题和值。

我不完全确定我将如何做到这一点或什么是最好的方法，但我正在寻找计算机本身和速度方面最有效的方法。我几乎试图通过匹配 id 来建立从一个表到下一个表的简单关系，但是可能有多个与特定用户相关的额外字段。

因此，我可能有一个 id 为 1 的用户，他可能有额外的字段 1.1、1.2 和 1.3，这样会很好，而不必搜索整个表以转到该特定数字，然后在记录完成后退出搜索被发现。

如果这令人困惑并且没有得到很好的解释，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:36:13.927

这正是索引的用途。您所描述的是外键索引。它们易于设置且效率极高。

有关更多信息，请参见此处：http: [//dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)

# import - 语言设计中的“导入”和“包含”选择有什么区别？

> ID：13570947
> 
> 赞同：5
> 
> 时间：2012-11-26T18:30:51.677
> 
> 标签：import, programming-languages, include, language-design

Python 和其他人使用`import`获取外部功能的技术。

C 和其他语言使用`include`（并且，例如 C++，有随之而来的`namespace`头痛）。

在设计一门语言时选择一个（或像[Objective-C一样使用两者）的原因是什么？](https://stackoverflow.com/q/439662/4418)

我看到 Apple 正在通过一篇论文向[LLVM](http://llvm.org/devmtg/2012-11/Gregor-Modules.pdf?=submit)提出一些更新/更改，并且想知道为什么存在差异。

### 根据[@delnan](https://stackoverflow.com/users/395760/delnan)的[回答进行澄清](https://stackoverflow.com/a/13571178/4418)

鉴于有多种实现方式`import`（直到他的回答我才知道），`!include`vs的总体好处是`include`什么？该`import`技术似乎*只能*根据给定的路径找到单个子组件（至少在 Python 中——我知道它的 [明显] 方法是唯一的）。

该方法的其他用途与`import`此有何不同？`include`什么时候在现代语言设计和实现中使用“旧式”方法才有意义（如果有的话）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T18:48:59.927

C++和Objective C简单继承的C方法，定义和实现都非常简单（简而言之，“遇到一个`#include`，用文件内容替换，然后继续”），但存在严重问题。其中一些问题在您看到的演示文稿（和其他地方）中命名。有一些习语和最佳实践（也在该演示文稿和其他地方讨论过）和次要扩展（`#pragma once`预编译头文件）可以缓解一些问题，但归根结底，这种方法从根本上来说过于有限，无法处理软件工程师所拥有的来期待一个模块系统。假装它做了最近的替代品所做的事情（见下文）是一个非常有漏洞的抽象。

如今，每个对语言设计有意见的人似乎都同意，如果你能帮助它，你就不应该这样做。由于需要向后兼容，C++ 和 Objective C 没有这种选择（尽管两者都已经并且仍然可以选择添加另一种机制，而 Objective C 做到了）。这是“今天公平的”，因为这是一个相当好的决定（它工作得很好，如果你有纪律，它仍然有点工作），但世界已经前进并解决了更好的方法将代码拆分为模块，然后将其拉回到一起。（请注意，这种方式在早期的 C 时代已经存在，但显然它们并没有流行一段时间。）

您所描述的“该”`import`技术实际上是一个相当大的设计空间。许多模块系统几乎，但不完全，彼此完全不同 - 其余的仍然有足够的细微差别来毁掉你的一天。它可以是任何东西，从在新范围（Python、PHP）中执行导入的文件到成熟的 ML 风格的仿函数。有一些相似之处，因为所有这些模块系统都为每个“模块”（无论在各自系统中意味着什么）提供了自己的范围/命名空间，（通常）允许单独编译模块，并且通常会不遗余力地修复C 样式文本包含的问题（或创建者看到的任何其他问题）。这大约是一般人可以说的。

# jquery - 将跨度标记附加到列表元素的更简单方法？

> ID：13570950
> 
> 赞同：1
> 
> 时间：2012-11-26T18:31:07.070
> 
> 标签：jquery, css

我有几个看起来像这样的列表元素：

```
 <li><a href="#" id="list1">List 1 Values</a></li>
 <li><a href="#" id="list2">List 2 Values</a></li> 
```

我当前的解决方案是像这样替换整个 html 字符串：

```
$('#list1').html('List 1 Values<span>150</span>'); 
```

有没有更好的方法来添加/删除列表项中的 span 标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T18:32:13.077

```
$('#list1').append('content'); 
```

请参阅[`.append()`文档](http://api.jquery.com/append/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T18:33:05.160

尝试`append`如下，

```
$('#list1').append('<span>150</span>'); 
```

# php - 如何用 call_user_func_array 调用 mysqli_stmt？

> ID：13570957
> 
> 赞同：2
> 
> 时间：2012-11-26T18:31:47.190
> 
> 标签：php, mysqli

我正在尝试将可变数量的参数传递给类的方法。这是我试图调用的类的函数：

```
class DbHelper{
....
    public function Execute($query, $params){
        $this->open();
        $stmt = $this->mysqli->prepare($query) or die($this->mysqli->error);
        call_user_func_array(array($stmt, 'bind_param'), $params);  // 1
        return $stmt->execute() ? $stmt->num_rows : 'ERROR';
    }
....
} 
```

这是我用来调用该函数的代码：

```
....
$conn = new DbHelper();
$params = array('ss', $ID, $i);
$conn->Execute('INSERT INTO some_table (ID, `Index`) VALUES (?,?)', $params);
.... 
```

这给出了一个错误：

> 警告：mysqli_stmt::bind_param() 的参数 2 应为参考，在线 ..mypath..\dbhelper.php 中给出的值

在几个月前关于同一问题的另一篇文章（单击[此处）中，有人建议我使用以下代码：](https://stackoverflow.com/questions/12003890/cannot-use-call-user-func-array-on-mysqli-stmt-object)

```
call_user_func_array(array($stmt, 'bind_param'), refValues($params));

function refValues($arr){
    if (strnatcmp(phpversion(),'5.3') >= 0){ //Reference is required for PHP 5.3+
        $refs = array();
        foreach($arr as $key => $value)
            $refs[$key] = &$arr[$key];
        return $refs;
    }
    return $arr;
} 
```

再次使用它会产生同样的错误。如果我像这样调用函数（在 $params 之前添加 &）：

```
$conn->Execute('INSERT INTO some_table (ID, `Index`) VALUES (?,?)', &$params); // 2 
```

我收到此错误：

> 已弃用：在线上的 ..mypath..\save.php 中已弃用调用时传递引用

或者，我已经尝试过这个函数的定义`DbHelper::Execute`：

```
public function Execute($query, $params){
    $this->open();
    $stmt = $this->mysqli->prepare($query) or die($this->mysqli->error);
    $stmt->{'bind_param'}($params); // 3
    return $stmt->execute() ? $stmt->num_rows : 'ERROR';
} 
```

调用它显示错误为：

> 警告：在线 ..mypath..\dbhelper.php 中 mysqli_stmt::bind_param() 的参数计数错误

其中，如果函数调用正确，则参数计数对于 bind_param 是正确的。

PHP 的版本是 5.3.8。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T20:29:14.390

向您建议的功能也需要`$params`通过引用接受。这是一个稍微更新的版本：

```
function refValues(&$arr)
{
    //Reference is required for PHP 5.3+
    if (strnatcmp(phpversion(),'5.3') >= 0)
    {
        $refs = array();
        foreach(array_keys($arr) as $key)
        {
            $refs[$key] = &$arr[$key];
        }
        return $refs;
    }

    return $arr;
} 
```

# java - 可用的 Java 网络托管选项

> ID：13570964
> 
> 赞同：-1
> 
> 时间：2012-11-26T18:32:09.647
> 
> 标签：java, jsp

我已经为拥有内部服务器的客户实施了解决方案，但从未做过任何使用 java web 托管服务（付费或其他方式）的项目。

我必须确保系统的可靠性、安全性和效率。

那么有哪些符合上述条件的 Java 网络托管服务呢？更喜欢基于个人经验的答案，因为我想知道在 java 托管服务方面是否有任何不好的经历。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:47:43.663

抱歉，我从未使用过它，但我认为它正在工作......因为它是谷歌；-) 看看谷歌的应用引擎或 openshift。那是红帽的。

两者都是免费的小版本。

[https://developers.google.com/appengine/](https://developers.google.com/appengine/)

[https://openshift.redhat.com/app/](https://openshift.redhat.com/app/)

问候，

博斯科普

# javascript - 不要在下拉列表中显示第一个选项

> ID：13570966
> 
> 赞同：0
> 
> 时间：2012-11-26T18:32:14.293
> 
> 标签：javascript, html, drop-down-menu

我有一个包含 20 个选项的下拉菜单，我喜欢选择第 10 个，但我不希望它应该选择蓝色，它应该只是在用户打开下拉列表之前显示的那个。

所以基本上它应该仍然是所有选项，而不是显示第一个它应该显示第 10 个，当用户打开下拉列表时，我们将能够看到所有选项。
`selected="selected"`很好，但它选择了蓝色，我只是希望它应该是鞋底，而不是颜色。
* 下拉菜单在用户打开之前仅显示 1 个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:36:09.890

它是您正在寻找的选定物业吗？

```
<select>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4" selected="selected">4</option>
    <option value="5">5</option>
</select> 
```

可以在这里找到一个 jsfiddle：http: [//jsfiddle.net/TpuRc/](http://jsfiddle.net/TpuRc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:54:05.740

我认为你不能使用 Javascript 或 CSS 来做到这一点，而不是使用内置控件。各种浏览器允许 SELECT 和 OPTION 元素的某些样式，但它们非常不一致，我不指望能够使用它们。

但是有许多库可以将您的表单元素替换为可以设置样式的元素，并保持隐藏的底层表单值与它们同步。一个这样的库是[http://www.emblematiq.com/lab/niceforms/](http://www.emblematiq.com/lab/niceforms/)但有很多可供选择。

# ios - 检查用户是否取消了 SKPaymentTransaction

> ID：13570970
> 
> 赞同：17
> 
> 时间：2012-11-26T18:32:26.790
> 
> 标签：ios, in-app-purchase, storekit

我如何检查用户是否点击了取消按钮（当他被问到是否要购买时，或者如果他已经购买了这个 SKProduct 是否要下载它）？

现在，我只在用户点击取消按钮后和例如没有互联网时在 paymentQueue:updatedTransactions: 方法中收到 SKPaymentTransactionStateFailed。有什么方法可以区分这两种情况吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-08T15:14:17.383

这段代码对我有用：

```
if (transaction.error.code != SKErrorPaymentCancelled) {
    NSLog(@"Other error");
} else {
    NSLog(@"User canceled");
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-01-08T15:09:49.070

艾伦的回答是完美的。以防万一有人想知道其他情况

```
switch (transaction.error.code) {
   case SKErrorUnknown:
       //Unknown error
       break;
   case SKErrorClientInvalid:
       // client is not allowed to issue the request, etc.
       break;
   case SKErrorPaymentCancelled:
       // user cancelled the request, etc.
       break;
   case SKErrorPaymentInvalid:
       // purchase identifier was invalid, etc.
       break;
   case SKErrorPaymentNotAllowed:
       // this device is not allowed to make the payment
       break;
   default:
       break;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-11-30T14:36:40.403

斯威夫特版本：

```
if let error = transaction.error as? NSError {
    if error.domain == SKErrorDomain {
        // handle all possible errors
        switch (error.code) {
        case SKError.unknown.rawValue:
            print("Unknown error")
        case SKError.clientInvalid.rawValue:
            print("client is not allowed to issue the request")
        case SKError.paymentCancelled.rawValue:
            print("user cancelled the request")
        case SKError.paymentInvalid.rawValue:
            print("purchase identifier was invalid")
        case SKError.paymentNotAllowed.rawValue:
            print("this device is not allowed to make the payment")
        default:
            break;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-08T14:13:13.283

**斯威夫特 2.2**

如果您在 中得到`.Failed`响应`paymentQueue`，最好处理所有可以处理的错误。

```
if let error = transaction.error {
    if error.domain == SKErrorDomain {
        // handle all possible errors
        switch (error.code) {
        case SKErrorCode.Unknown.rawValue:
            print("Unknown error")
            break;
        case SKErrorCode.ClientInvalid.rawValue:
            print("client is not allowed to issue the request")
            break;
        case SKErrorCode.PaymentCancelled.rawValue:
            print("user cancelled the request")
            break;
        case SKErrorCode.PaymentInvalid.rawValue:
            print("purchase identifier was invalid")
            break;
        case SKErrorCode.PaymentNotAllowed.rawValue:
            print("this device is not allowed to make the payment")
            break;
        default:
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-29T11:08:48.997

**斯威夫特 4.2**

```
if let error = transaction.error,
 (error as? SKError)?.code != SKError.paymentCancelled {
 // Here it is failed for sure!
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-26T18:49:32.010

检查设置的 SKPaymentTransaction`error`属性。

> @property(nonatomic, readonly) NSError *error
> 
> 描述在处理事务时发生的错误的对象。（只读）
> 
> 错误属性未定义，除非 transactionState 设置为 SKPaymentTransactionStateFailed。您的应用程序可以读取错误属性以确定事务失败的原因。

此外，您可能希望使用 Apple 的 Reachability 类来确定在开始交易之前 Internet 是否可用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-21T13:41:23.867

也许您正在使用 Ray Wunderlich 的应用程序购买教程代码。那里的守则说：

```
- (id)initWithProductIdentifiers:(NSSet *)productIdentifiers {

if ((self = [super init])) {

    // Store product identifiers
    _productIdentifiers = productIdentifiers;

    // Check for previously purchased products
    _purchasedProductIdentifiers = [NSMutableSet set];
    for (NSString * productIdentifier in _productIdentifiers) {
        BOOL productPurchased = [[NSUserDefaults standardUserDefaults] boolForKey:productIdentifier];
        if (productPurchased) {
            [[SKPaymentQueue defaultQueue] addTransactionObserver:self]; // CHECK THIS
            [_purchasedProductIdentifiers addObject:productIdentifier];
            NSLog(@"Previously purchased: %@", productIdentifier);
        } else {
            NSLog(@"Not purchased: %@", productIdentifier);
        }
    } 
```

在那里你可以看到，只有在 Product 已经被购买的情况下才会调用 addTransactionObserver。如果将这行代码移到 if 查询前面，您将获得所需的结果。

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self]; // MOVE HERE
if (productPurchased) {
    [_purchasedProductIdentifiers addObject:productIdentifier];
    NSLog(@"Previously purchased: %@", productIdentifier);
} else {
    NSLog(@"Not purchased: %@", productIdentifier);
} 
```

现在在 failedTransaction 方法中，您可以调用

```
 [[NSNotificationCenter defaultCenter] postNotificationName:IAPHelperProductPurchasedNotification object:nil userInfo:nil]; 
```

现在您可以在当前视图中检查 Notification 发送的 nil 值

# java - 如果 JPanel 大于其父级，则调整其大小

> ID：13570971
> 
> 赞同：1
> 
> 时间：2012-11-26T18:32:31.823
> 
> 标签：java, swing

我有一个`JScrollPanel`，我将一个`JPanel`包含图像的图像添加到`JScrollPanel`并且它可以工作，但是如果其中的图像`JPanel`大于`JScrollPanel`宽度、高度或两者，则面板的大小将调整为大约 20x20。为什么这样做？我正在`GridBagLayout`使用`JScrollPanel`. 我期待的是，如果`JPanel`大于`JScrollPanel`它将添加滚动条，但这不是正在发生的事情。有什么建议么？

```
private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
    WebFileChooser wfc = null;
    if(wfc == null){
        wfc = new WebFileChooser(this, "Open an Image");
        wfc.setSelectionMode(SelectionMode.SINGLE_SELECTION);
        wfc.setAvailableFilter(GlobalConstants.IMAGES_AND_FOLDERS_FILTER);
        wfc.setChooseFilter(GlobalConstants.IMAGES_FILTER);
        wfc.setCurrentDirectory("/Users/Ryan/Desktop");
    }
    wfc.setVisible(true);

    if(wfc.getResult() == StyleConstants.OK_OPTION){
        String file = wfc.getSelectedFile().getPath();
        try{
            imagePane.remove(canvas);
        }catch(Exception e){
        }
        canvas = new Canvas();
        canvas.setVisible(true);
        canvas.setImage(file);
        //imagePane.getViewport().setLayout(new GridBagLayout());
        canvas.setSizeFromLoaded();
        imagePane.getViewport().add(canvas);
        imagePane.repaint();
        imagePane.revalidate();
    }
} 
```

这是画布类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package pocketshop;

import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.awt.image.ColorModel;
import java.awt.image.WritableRaster;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import pocketshop.util.ImageSync;

/**
 *
 * @author Ryan
 */
public class Canvas extends CanvasShadow{

    public static BufferedImage image = null, preview = null;
    public static int width, height;

    public void setImage(String filename){
        try{
            Canvas.image = ImageIO.read(new File(filename));
            Canvas.width = image.getWidth();
            Canvas.height = image.getHeight();
            ImageSync.originalPixels = new int[width * height];
            ImageSync.previewPixels = new int[width * height];
            Canvas.image.getRGB(0, 0, width, height, ImageSync.originalPixels, 0, width);
        }catch(IOException e){
        }
    }

    public static void setImage(BufferedImage image){
        Canvas.image = image;
        Canvas.width = image.getWidth();
        Canvas.height = image.getHeight();
        ImageSync.originalPixels = new int[width * height];
        ImageSync.previewPixels = new int[width * height];
        Canvas.image.getRGB(0, 0, width, height, ImageSync.originalPixels, 0, width);
    }

    public static void setPreview(BufferedImage img, Container parent){
        preview = img;
        parent.repaint();
    }

    public static BufferedImage deepCopy(){
        ColorModel cm = Canvas.image.getColorModel();
        boolean isAlphaPremultiplied = cm.isAlphaPremultiplied();
        WritableRaster raster = Canvas.image.copyData(null);
        return new BufferedImage(cm, raster, isAlphaPremultiplied, null);
    }

    public void setSizeFromLoaded(){
        try{
            this.setPreferredSize(new Dimension(Canvas.width + 10, Canvas.height + 10));
            this.setSize(Canvas.width + 10, Canvas.height + 10);
        }catch(Exception e){
            e.getMessage();
        }
    }

    @Override
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        if(Canvas.preview != null){
            g.drawImage(Canvas.preview, 5, 5, width, height, Color.black, null);
        }else{
            g.drawImage(Canvas.image, 5, 5, width, height, Color.black, null);
        }
    }
} 
```

这是 CanvasShadow 类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package pocketshop;

import java.awt.Color;
import org.jdesktop.swingx.JXPanel;
import org.jdesktop.swingx.border.DropShadowBorder;

public class CanvasShadow extends JXPanel{

    public CanvasShadow(){
        DropShadowBorder shadow = new DropShadowBorder();
        shadow.setShadowColor(Color.BLACK);
        shadow.setShowLeftShadow(true);
        shadow.setShowRightShadow(true);
        shadow.setShowBottomShadow(true);
        shadow.setShowTopShadow(true);
        this.setBorder(shadow);

        float[] hsb = new float[3];

        Color.RGBtoHSB(255, 255, 255, hsb);

        this.setBackground(Color.getHSBColor(hsb[0], hsb[1], hsb[2]));
    }
} 
```

![在此处输入图像描述](../Images/c882465763a04677c045bce4e27879d9.png)

这是实际图像：http: [//images2.fanpop.com/images/photos/4800000/Beach-beaches-4843817-1280-800.jpg](http://images2.fanpop.com/images/photos/4800000/Beach-beaches-4843817-1280-800.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:39:44.433

我已经告诉过你摆脱那个 GridBagLayout。在 JScrollPane 上设置布局将调整面板的大小，使其永远不会大于容器。您的面板必须自行布置，以便它是图像的大小，以便 JScrollPane 看到它太大而无法显示。只有这样 JScrollPane 才会添加滚动条。因此，如果您的图像是 2000x2000，那么您的面板需要将其首选尺寸设置为 2000x2000 并表现得像它可以那么大。JScrollPane 将完成所有繁重的裁剪工作，并确保面板仅呈现基于滚动条的可见部分。如果您的面板始终与 JScrollPane 的视口大小相同，则滚动窗格认为它适合并且不需要滚动条。

**更新**：快速谷歌搜索揭示了答案： [http ://chaosinmotion.com/blog/?p=168](http://chaosinmotion.com/blog/?p=168)

# javascript - 我可以使用 JavaScript/JQuery 将上传的文件添加到 ASP.NET 中的 Request.Files 吗？

> ID：13570983
> 
> 赞同：2
> 
> 时间：2012-11-26T18:33:11.823
> 
> 标签：javascript, jquery, asp.net, request

我不完全确定如何使用 JavaScript 将文件添加到 Request.Files 中？这就是我要...

```
var x = $('input[type=file]:eq(0)');

//Add the data to the hidden field
hiddenField.val(x.val());

//Add the html display
fileDisplayDiv.innerHTML += "<a href='#' class='filename'>display name</a>";

//Add this file to request.files
How to do???

//Clear the input so the user may add more files before postback.
x.val(""); 
```

输入是常规的 HTML 输入。是的，最终我正在尝试开发多个文件上传（这就是我清除输入字段的原因） - 我查看了第 3 方的东西，但我需要自定义功能来完成我正在做的事情。我认为这项任务似乎应该是可能的，否则 ajax 上传者将如何工作？

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:25:22.370

您需要支持较旧的浏览器吗？

传统上没有办法使用纯 javascript/ajax 上传文件。出于安全原因，对控件的 javascript 访问`<input type="file" />`受到限制（否则您可能会欺骗浏览器上传用户计算机上的任何文件）。第三方上传控件使用 Flash 来解决这些限制，如果需要支持旧版浏览器，这仍然是唯一真正的解决方案。

HTML5 提供了两个新功能，可以帮助您实现您想要做的事情：

*   [File API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)：允许您在本地做很多很酷的事情，例如选择多个文件、列出选定的文件和显示文件信息（所有客户端）。
*   [使用 AJAX 上传文件](http://www.html5rocks.com/en/tutorials/file/xhr2/)。您现在可以纯粹使用 XMLHttpRequest 对象将文件或任何 blob 数据发送回服务器。

我自己还没有尝试过后者，但我相信您应该能够使用 ASP.NET 的`Request.Files[]`对象访问上传的文件（如果您尝试，请告诉我们！）。这些功能并未得到普遍支持，最重要的是 IE 8/9 缺乏对上述大部分功能的支持。因此，如果您需要支持这些浏览器，最好的办法是使用第三方上传控件之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T20:54:24.687

我将提供一个我倾向于使用的 pre-HTML5 方法。这有一些缺点，但也有很多优点——主要是它几乎完全跨浏览器（唯一的要求是 JavaScript 和隐藏的 IFRAME）。

我将立即列出缺点，以便您确切了解可能遇到的问题：

*   如果您发布到另一个域，您将无法从中获得回报
*   除了内容之外，您无法从中获取任何内容，并且 HTTP 错误将导致它静默失败。
*   如果失败，您将不得不重新生成表单。如果发生这种情况，您将无法自动为用户重新选择文件。

解决方案：将您的输入 type="file" 放在一个友好的 IFRAME 中并使用它来提交。它不是 AJAX，它是一种非常古老的方法，但它确实有效。

**如何**

步骤 1\. 创建一个 IFRAME 并为其指定一个 ID 或类，以便能够有效地选择它。在 DOMReady 上创建它，而不是把预先准备好的东西弄得乱七八糟。创建它时，使用`$('#yourIframe').load(function() { });`. 当此触发时，您将知道您现在可以将内容添加到您的 iframe。诀窍是将所有表单元素复制到其中，并留下“克隆” - 并将所有有用的事件绑定到 IFRAME 中的事件。为了：

*   `click()``change()`对于输入类型=“文件”，输入类型=“文本”并选择
*   `change()`其他任何事情

点击事件应该简单地转发到 IFRAME 中的元素。该`change()`事件在绑定到 IFRAME 中的元素时，允许您恢复文件的名称。

当您单击幻像提交按钮时，让它绑定一个`load()`事件到 IFRAME，然后在 IFRAME 中提交表单。提交表单后，您将能够使用 $("body",$(this).contents()) 访问负载处理程序中 iframe 的内容。

我写了一个小小提琴来说明：http: [//jsfiddle.net/WQhnM/2/](http://jsfiddle.net/WQhnM/2/)。请记住，JSFiddle.net 将获取数据（所以不要发送任何太严重/有罪的东西;-)）并且他们的服务器拒绝任何大于 100kb 的东西（所以发送一些小的东西）。不过，这个想法就在那里。我已经让 IFRAME 可见，所以你可以看到会发生什么。

到目前为止，这不是一个很好的解决方案，但在 IE 赶上 HTML5 之前它一直有效。

*编辑*：我忘了提 - 这需要在 IE7 中工作。`change()`在此特定浏览器中未正确触发。解决方案：

```
if (!$.browser.msie) {
  nItem.change(function() { ... });
}
else {
   nItem.click(function() { 
      setTimeout(function() {
          (function() { ... });
      },0);
   });
} 
```

# java - 通过java应用程序合并数据

> ID：13570988
> 
> 赞同：0
> 
> 时间：2012-11-26T18:33:22.557
> 
> 标签：java, database

我正在开发一个基于 Web 的 Java 应用程序。应用程序是基于区域的销售管理系统。销售数据是针对地区的。我必须实现将两个区域合并为一个区域的功能。如何在应用程序中实现它并在数据库中反映。如果两个地区合并为一个地区，那么我想显示两个地区的销售额总和。我不想添加两行然后显示它，因为稍后它们可以合并到其他领域，这将是一个巨大的混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:45:52.670

这里有你需要的东西 在线解析处理？请参见[OLAP 多维数据集](http://en.wikipedia.org/wiki/OLAP_cube)

试试[Openi](http://openi.org)或[Pentaho Analysis Services (Mondrian)](http://mondrian.pentaho.com/)。它为多维数据提供了足够的报告。

**多维数据集：**销售 维度
**：**区域、时间和产品
**度量：**销售数量和销售价值

# apache - Apache ProxyPassReverseCookiePath 不适用于第二个应用程序实例

> ID：13570989
> 
> 赞同：3
> 
> 时间：2012-11-26T18:33:31.203
> 
> 标签：apache, session, tomcat, cookies, reverse-proxy

我在 Tomcat 中有两个相同的 Web 应用程序实例，它们由 Apache 的反向代理提供。第一个工作得很好，但第二个从会话中获取数据有问题（空指针异常）。ProxyPassReverseCookiePath 显然配置错误。

这是我的配置：

```
<IfModule proxy_module>
<IfModule proxy_http_module>

#
# Reverse Proxy
#
ProxyRequests Off

<Proxy *>
    Order deny,allow
    Allow from all
</Proxy>

ProxyPass /app1/ http://localhost:8080/localapp1/
ProxyPassReverse /app1/ http://localhost:8080/localapp1/
ProxyPassReverseCookiePath /localapp1 /app1/

ProxyPass /app2 http://localhost:8080/app2
ProxyPassReverse /localapp2 http://localhost:8080/app2
ProxyPassReverseCookiePath /app2 /app2

<Location /app1/ >
RequestHeader edit X-GWT-Module-Base ^(.*)/app1/(.*)$ $1/localapp1/$2
</Location>

<Location /app2 >
RequestHeader edit X-GWT-Module-Base ^(.*)/app2(.*)$ $1/app2$2
</Location>

</IfModule>
</IfModule> 
```

我希望在 URL 末尾不需要斜杠（“/”）就可以访问第二个。我真的无法弄清楚这里出了什么问题，希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T10:22:22.810

以下配置是您真正想要的吗？

```
ProxyPass /app2 http://localhost:8080/app2
ProxyPassReverse /localapp2 http://localhost:8080/app2
ProxyPassReverseCookiePath /app2 /app2 
```

proxyPass 和 ProxyPassReverse 配置不匹配。基于localapp1，你的后端路径应该是localapp2。乍一看，以下内容对我来说更有意义：

```
ProxyPass /app2 http://localhost:8080/localapp2
ProxyPassReverse /app2 http://localhost:8080/localapp2
ProxyPassReverseCookiePath /localapp2 /app2 
```

# jquery - html5 音频带宽与闪存（可能的带宽问题）？

> ID：13570991
> 
> 赞同：0
> 
> 时间：2012-11-26T18:33:41.500
> 
> 标签：jquery, html, audio, bandwidth

我暂时开始将一些音乐家网站从 SWFObject flash 播放器转换为 HTML5……更多的是因为它提供的样式比其他任何东西都更容易。坦率地说，SWFObject 和 Flash 对我来说总是高效/可靠地工作。并且必须加载每个音频剪辑的 3 个版本（为了与 x 浏览器兼容）是一个拖累。

HTML5 音频 - 似乎 - 对于 1 个文件可以正常工作，但我添加了一个非常简单的随机“播放器”，其中包含十几个文件的进度条，看起来它确实减慢了网站的速度。有时页面会挂起。有时在 FireFox 中有一个“等待”状态消息——尽管该页面似乎工作正常。

我想我的直接问题是：1）是否有一种简单的方法来监控音频标签从服务器请求的特定“流量”——以查明瓶颈，无论是在我的代码中还是在标签本身中？

2) 这个性能问题是 HTML5 的一个已知问题吗？IOW：我现在应该坚持使用 Flash，因为它本质上仍然更有效吗？

3）当然，是否有一些代码问题像拇指酸痛一样突出，我认为这不是新手？

该页面是：http: [//jchmusic.com/detroit-the-opera/](http://jchmusic.com/detroit-the-opera/)

下面是我的基本音频播放器代码... php 然后是 jQuery。

TIA,

---JC

```
function jchAudioPlayer() {
  $path = '/var/chroot/home/content/html/downloads/snippets' ;
$str = '';
if ($handle = opendir( $path ) ) {

    $num=0;
    $a = array();
  while (false !== ($entry = readdir($handle))) {
   if ($entry != "." && $entry != "..")
         $path_parts = pathinfo( $entry);
         if( $path_parts['extension'] == 'mp3')
             $a[] = $entry;              
    }

    shuffle($a);

    $path_parts = pathinfo( $a[0] );
    $openingfile = $path_parts['filename'];
    $str .=  '<div class="autoplay audioplayer-wrapper" rel="/downloads/snippets/detroit/' . $openingfile . '">';
    $str .=  '<div class="audio-controls"><div class="progress-wrapper"><span class="progress"></span></div><a class="play5 pause" href="#"></a></div>';        
    $str .= '<div class="audioplayer">';

    foreach($a as $entry) {
 $path_parts = pathinfo( $entry);
     $basefile = $path_parts['filename'];
   $num++;
     $rn = rand(6,36);
   $str .= '<div class="songpara"><a style="font-size: ' . $rn . 'px" rel="' . $num . '" class="play5' . ( ($basefile == $openingfile) ? ' playing' : '') . '" href="/downloads/snippets/' . $basefile . '">' . $basefile . '</a></div>' ;

     }

$str .=  '</div>';        
$str .=  '</div>';

 closedir($handle);
 }  
return $str;
   }

   ?>

jQuery( init );

// Initialize the form
function init() {

//audio
var audioTagSupport = !!(document.createElement('audio').canPlayType);

if( audioTagSupport ) {
    var myAudio= new Audio(""); 
    // Need to check the canPlayType first or an exception will be thrown for those browsers that don't support it
    if (myAudio.canPlayType) {
       // Currently canPlayType(type) returns: "no", "maybe" or "probably"
        canPlayOgg = ("no" != myAudio.canPlayType("audio/ogg")) && ("" != myAudio.canPlayType("audio/ogg"));
        canPlayMp3 = ("no" != myAudio.canPlayType("audio/mpeg")) && ("" != myAudio.canPlayType("audio/mpeg"));
        canPlayWav = ("no" != myAudio.canPlayType("audio/wav")) && ("" != myAudio.canPlayType("audio/wav"));

    var ext;
    if(canPlayOgg)
      ext = '.ogg';
    else if(canPlayMp3)
      ext = '.mp3';
    else if(canPlayWav)
      ext = '.wav';
    }

  // ext = '.mp3';
  // alert( ext );

  jQuery('.play5').addClass('paused');      

  if( ext && audioTagSupport ) {         
      var audioElements = [];
      jQuery('.play5').each( function(i) {
            var y = 0;
            var x;
            var xv = jQuery(this);
            x = jQuery(this).attr('href') + ext;                                                
            audioElements.push( document.createElement('audio') ); 
            y = audioElements.length-1;
            audioElements[y].setAttribute('src', x);
            audioElements[y].load();
            audioElements[y].addEventListener("canplay", function(){ xv.addClass('canplay');    }); 
            audioElements[y].addEventListener("timeupdate", function() {
                                            var value = 0; 
                                            var aLink = this;
                                            if ( aLink.currentTime > 0) 
                                             { value = Math.floor( (100 / aLink.duration) * aLink.currentTime); } 
                                            jQuery('.progress').css('width', value + "%")}, false);
            //   audioElements[y].currentTime=0;                         
        });

        function updateProgress( aLink ) { 
            var value = 0; 
            if ( aLink.currentTime > 0) 
             { value = Math.floor( (100 / aLink.duration) * aLink.currentTime); } 
            jQuery('.progress').css('width', value + "%");
        }

        // add a 'self play' function. usually put on wrapper div
        jQuery('.autoplay').each( function(i) {
            if( jQuery(this).attr("rel") ) {   
                var xv = jQuery(this);
                var y = 0;
                var x;
                x = jQuery(this).attr('rel') + ext;                                             
                audioElements.push( document.createElement('audio') ); 
                //alert(audioElements.length);
                //alert(xv);
                // alert(x);
                y = audioElements.length-1;
                audioElements[y].setAttribute('src', x);
                audioElements[y].load();
                audioElements[y].addEventListener("canplay", function(){ xv.addClass('canplay');    });             
                audioElements[y].play();
                // alert(x);
                // return true;
            }
        });

        // stop playback on click through (note returns true so default carries on)
        jQuery('.autoplay a').click( function(e) {
            var playMsg = 'Play';                                                                       
            var pauseMsg = 'Pause';                                                                                     
            var y = audioElements.length-1;
            if( jQuery(this).hasClass('playpause') ) {                                                                                      
            e.preventDefault();                                 
                if( jQuery(this).hasClass('paused') ) {
                    audioElements[y].play();                        
                    jQuery(this).text(pauseMsg)
                    jQuery(this).removeClass('paused')
                }else{ 
                    audioElements[y].pause();   
                    jQuery(this).text(playMsg)                      
                    jQuery(this).addClass('paused')
                }
            }   else {
                audioElements[y].pause();
                return true;                
            }
         });

        //audio player

        jQuery('.play5').click(function(e) {
            e.preventDefault();                                                     
            if( jQuery(this).hasClass('pause') ) {
            for( var p = 0; p < audioElements.length;) 
                { audioElements[p].pause(); 
                    //audioElements[p].currentTime=0;                        
                  p++; };
                jQuery('.play5.playing').removeClass('playing').addClass('paused');                                                          

            } else if( jQuery(this).hasClass('paused') && jQuery(this).hasClass('canplay') ) {
                jQuery('.play5').each( function(i) {
                    var x = jQuery(this);                                               
                    jQuery(x).removeClass('playing');
                    jQuery(x).addClass('paused');       
                    var z = jQuery(x).attr('rel');       
                    audioElements[z].pause();
                });
                for( var p = 0; p < audioElements.length;) { audioElements[p].pause(); p++; };
                    jQuery(this).removeClass('paused');                                                          
                    jQuery(this).addClass('playing');                                                       
                    var z = jQuery(this).attr('rel');
                    audioElements[z].currentTime=0;                      
                    audioElements[z].play();

            } else {
                jQuery('#title').removeClass('playing');         
                jQuery(this).removeClass('playing');                                                                     
                jQuery(this).addClass('paused');        
                var z = jQuery(this).attr('rel');        
                audioElements[z].pause();
            }

        });

  }

} // audioTagSupport

} 
```

# sql-server - sa 用户被锁定并且登录失败并使用 Windows 身份验证。怎么办？

> ID：13570993
> 
> 赞同：4
> 
> 时间：2012-11-26T18:34:12.197
> 
> 标签：sql-server, sql-server-2012

我以管理员身份登录到 Windows 7 计算机。我正在尝试连接到同一台机器上的 SQL Server 2012。SA 帐户被锁定。当我尝试 Windows 身份验证时，登录失败。

我现在如何登录？是否有解锁 SA 用户的外部工具？我使用外部工具更改 SA 密码。我不想重新安装软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:57:02.523

阅读并遵循在[系统管理员被锁定时连接到 SQL Server](http://msdn.microsoft.com/en-us/library/dd207004.aspx)中描述的步骤：

*   `-m`使用或以管理模式启动服务器`-f`
*   作为 LUA 提升的进程连接（runas 管理员）
*   为您的用户创建一个登录名并将其添加到 sysadmin 组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T07:39:54.003

要解锁 sa，您只需以机器管理员身份连接到服务器。默认情况下，计算机管理员被授予对 SQL Server 的访问权限。以管理员身份连接后，您可以运行以下查询：

```
ALTER LOGIN sa WITH PASSWORD = 'new_password' UNLOCK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T06:36:14.473

当 SQL Server SA 账户被锁定，使用 Windows 身份验证方式登录失败时，您可以使用第三方工具**Asunsoft SQL Password Geeker**更改/重置 SA 密码。

Asunsoft SQL Password Geeker 可以立即重置 SQL Server 2012/2008/2005/20014 上的 SA 用户和其他用户的密码。

**重要提示：**在打开此工具之前，请先停止 SQL Server 服务。并且当 SA 密码重置成功后，不要忘记关闭此工具并重新启动 SQL Server 服务。

现在运行此工具并执行以下操作：

1.  单击**打开文件**按钮。
2.  浏览 master.mdf 文件并将其导入此工具。
3.  选择**sa**用户并单击**重置**按钮。
4.  输入新的 sa 密码并单击**OK**。

如果您需要更多详细信息，请参阅[**如何使用 SQL 密码 Geeker**](http://www.asunsoft.com/guide/sql-password-geeker-guide.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T09:07:12.400

可能您没有使用 Windows 身份验证连接到 SQL Server 的权限，或者 Windows 身份验证不可用。

除了在 Windows Authentication 模式可用时使用本地管理员帐户登录 SQL Server 2008 Express 之外，还有其他方法可以有效地重置 SQL Server SA 密码，例如命令和 SQL 密码恢复工具。

在某种程度上，命令重置 SA 密码比 SQL 密码恢复工具更难。例如，SQL Password Genius 简化了添加 master.mdf 文件、选择 SA 帐户并为其设置新密码的步骤。所以点击几下就可以用 SQL 密码恢复工具重置 SA 密码了。这里介绍了如何使用命令和工具重置 SA 密码的详细信息：[http ://www.isunshare.com/sql-password/four-effective-ways-to-change-sql-server-sa-password.html](http://www.isunshare.com/sql-password/four-effective-ways-to-change-sql-server-sa-password.html)

# c# - DataGridView 中允许超过 24 小时的 TimeSpan 选择器

> ID：13570994
> 
> 赞同：1
> 
> 时间：2012-11-26T18:34:14.460
> 
> 标签：c#, winforms, datagridview, timespan

我需要一种方法来创建允许超过 24 小时的 TimeSpan 时间选择器列。现在，我得到了一个派生自 DateTimePicker 的 TimePicker，但在 24 之后，它又变回零。而且我没有找到改变它的行为的方法。

请帮忙。

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T16:36:16.010

就像您在评论中所想的那样，处理此问题的最简单方法可能是拥有两个[NumericUpDown](http://msdn.microsoft.com/en-us/library/2687k5ae.aspx)控件 - 一个代表日期，另一个代表小时。

从那里，您将需要添加一些额外的逻辑。这些微调器本身不支持“翻转”，因此您必须自己编写代码。您将这些添加到事件中，并查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/729xt55s.aspx)，我认为您正在考虑连接到`Click`事件。没有其他东西看起来特别有趣。

你的代码看起来有点像这样：

```
 private void ctrlUpDownHour_Click(object sender, EventArgs e)
 {
    if(ctrlUpDownHour.Value >= 24)
    {
        ctrlUpDownDay.Value += 1;
        ctrlUpDownHour.Value -= 24;
    }
 } 
```

如果您将`ctrlUpDownHour.Maximum`属性设置为 24，也可能会有所帮助。

编辑：如评论中所述，处理您的情况的最简单方法可能是简单地制作一个[user control](http://msdn.microsoft.com/en-us/library/aa302342.aspx)。

只需使用两个`NumericUpDown`控件创建一个新的用户控件 - 通过在您的项目中创建一个新项目开始，然后单击“用户控件”项目 - 这会让您很好地开始。

然后，您可以根据需要直观地设计`NumericUpDown`控件。处理完之后，你可以进入你的代码隐藏，并有一些看起来像这样的东西：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
         InitializeComponent();
         // anything else you want to do here
    }

    public TimeSpan GetSelectedTimeSpan()
    {
       return new TimeSpan((int)numericUpDown1.Value, (int)numericUpDown2.Value, 0, 0);
    }
} 
```

然后，您可以将此用户控件与其他任何表单上的任何其他控件一样放置。然后，当您需要其中的 TimeSpan 时，您只需像捕获任何其他控件一样捕获控件并 go `userControl1Instance.GetSelectedTimeSpan()`。

布拉莫，完成。