# StackOverflow 问答 15367000-15367999

# python - 如何防止 lxml.etree.HTML( data ) 在某些类型的数据上崩溃？

> ID：15367001
> 
> 赞同：1
> 
> 时间：2013-03-12T16:38:21.910
> 
> 标签：python, html, debugging, lxml

我正在`etree.HTML( data )`像下面这样运行许多不同的`data`内容。但是，对于特定的`data`内容，`lxml.etree.HTML`将不会对其进行解析，而是进入无限循环并消耗 100% 的 CPU。

有谁确切地知道`data`下面这可能导致这种情况的原因？更重要的是，我怎样才能防止这种情况发生在无限数量的随机损坏上`data`？

> 编辑：原来这是 lxml 2.7.8 及以下版本的错误（至少）。更新到 lxml 2.9.0，bug 消失了。

*编辑：我知道这构成了一个无限循环，但这不是我得到的坏行为。它运行良好（作为无限循环），`data`内容健康。对于不健康`data`的内容，如下所示，会发生循环将停止并且 RAM 将开始填满，当它已满时，所有 CPU 进入等待状态。有关原始调试，请参阅[此问题](https://stackoverflow.com/questions/15302027/how-to-debug-python-memory-fault)。*

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
#

import sys
from lxml import etree

data = '''
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<meta charset="UTF-8">
    <title>The 20 Most Despicable Things Gordon Ramsay Has Said and Done, Ranked -- Grub Street New York</title>

    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://feedproxy.google.com/nymag/grubstreet" />

    <meta name="Headline" content="The 20 Most Despicable Things Gordon Ramsay Has Said and Done, Ranked" />
    <meta name="keywords" content="april bloomfield, el gordo, frank bruni, gordon ramsay, lawsuits, lists, marcus samuelsson, mario batali, shitlist, spotted pig, sued" />

    <meta name="description" content="Racism, fat-shaming, and vegetarian trickery." />

    <meta name="Byline" content="Sierra Tishgart" />
    <meta name="Type_of_Feature" content="" />
    <meta name="Issue_Date" content="March  8, 2013 12:50 PM" />
    <meta name="related_stories" content="The 20 Most Despicable Things Gordon Ramsay Has Said and Done, Ranked" />
    <meta name="document_type" content="Blog" />
    <meta name="category" content="Lists" />

    <link rel="image_src" href="http://pixel.nymag.com/imgs/daily/grub/2013/03/08/08-gorgon-ramsay.o.jpg/a_146x97.jpg" />
    <link rel="canonical" href="http://newyork.grubstreet.com/2013/03/20-despicable-things-gordon-ramsay.html" id="canonical" />

    <script>
        var canonicalUrl = "http://newyork.grubstreet.com/2013/03/20-despicable-things-gordon-ramsay.html";
    </script>

    <meta name="content.tags.primary" content=";network - Grub Street,;city - New York City,;tag - lists" />
    <meta name="content.tags" content=";tag - april bloomfield,;tag - el gordo,;tag - frank bruni,;tag - gordon ramsay,;tag - lawsuits,;tag - marcus samuelsson,;tag - mario batali,;tag - shitlist,;tag - spotted pig,;tag - sued" />
    <meta name="content.hierarchy" content="New York City:Grub Street" />
    <meta name="content.type" content="Blog" />
    <meta name="content.subtype" content="Blog Entry" />    

    <meta property="fb:app_id" content="206283005644" />
    <meta property="og:title" content="The 20 Most Despicable Things Gordon Ramsay Has Said and Done, Ranked" />
    <meta property="og:description" content="Racism, fat-shaming, and vegetarian trickery." /> 
    <meta property="og:image" content="http://pixel.nymag.com/imgs/daily/grub/2013/03/08/08-gorgon-ramsay.o.jpg/a_146x97.jpg"/>
    <meta property="og:url" content="http://newyork.grubstreet.com/2013/03/20-despicable-things-gordon-ramsay.html" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="Grub Street New York" />

    <meta name="viewport" content="width=1020">

<link type="text/css" rel="stylesheet" href="http://cache.nymag.com/css/screen/grubstreet/grubstreet-core.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://cache.nymag.com/css/screen/section/daily/slideshow.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://cache.nymag.com/css/screen/echo.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://cache.nymag.com/css/screen/loginRegister.css" media="all" />
<link rel="stylesheet" href="http://cache.nymag.com/css/screen/advertising.css" media="all" />
<link rel="shortcut icon" href="http://images.nymag.com/gfx/grubst/favicon.ico" />

<style type="text/css">
#adsplashtop,#pushdown {padding:5px 5px;}
#pushdown {border-top:1px solid #737373}
</style>

    <!--[if IE 6]>
    <link rel="stylesheet" href="http://cache.nymag.com/css/screen/grubstreet/win-ie6.css" type="text/css" media="screen, projection" />
<![endif]-->

<!--[if IE 7]>
    <link rel="stylesheet" href="http://cache.nymag.com/css/screen/grubstreet/win-ie7.css" type="text/css" media="screen, projection" />
<![endif]-->

    <script type="text/javascript">
        var NYM = {};
        NYM.config = {};
        NYM.config.membership = {
            "service":"nym"
        };
        NYM.config.advertising = {
            "sitename":"nym.grubstreet"
        };

    </script>

<script type="text/javascript">
    var date = 'March 12, 2013 12:42:38';
    var currDate=new Date(date);
    var GRUBST = {};
    if (!NYM) {  
        var NYM = {};
        NYM.config = {};
        NYM.config.membership = {
            "service":"nym"
        };
        NYM.config.advertising = {
             "sitename":"nym.grubstreet"
        };
    }
</script>
<script type="text/javascript" src="http://cache.nymag.com/scripts/modernizr-1.7.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://cache.nymag.com/scripts/jquery-ui-1.8.2.custom.min.js"></script>
<script type="text/javascript" src="http://cache.nymag.com/scripts/ad_manager.js"></script>
<script type="text/javascript" src="http://cache.nymag.com/js/2/global.js"></script>
<script type="text/javascript" src="http://cache.nymag.com/scripts/skinTakeover.js"></script>
<script type="text/javascript" src="http://cache.nymag.com/scripts/grubstreet-controls.js"></scr
'''

n = 0
while True:
    n += 1

    tree = etree.HTML( data )
    m = tree.xpath("//meta[@property]")

    print '-', n 
    for i in m:
        print n 
        #print (i.attrib['property'], i.attrib['content']) 
```

对于快速版本，您可以使用：

```
import sys
from lxml import etree

print("%-20s: %s" % ('Python',           sys.version_info))
print("%-20s: %s" % ('lxml.etree',       etree.LXML_VERSION))
print("%-20s: %s" % ('libxml used',      etree.LIBXML_VERSION))
print("%-20s: %s" % ('libxml compiled',  etree.LIBXML_COMPILED_VERSION))
print("%-20s: %s" % ('libxslt used',     etree.LIBXSLT_VERSION))
print("%-20s: %s" % ('libxslt compiled', etree.LIBXSLT_COMPILED_VERSION)) 
```

我有：

```
OS                  : Ubuntu 12.10 (AWS)
Python              : sys.version_info(major=2, minor=7, micro=3, releaselevel='final', serial=0)
lxml.etree          : (3, 1, 0, 0)
libxml used         : (2, 7, 8)
libxml compiled     : (2, 7, 8)
libxslt used        : (1, 1, 26)
libxslt compiled    : (1, 1, 26) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:55:39.230

这是一种使用 lxml 解析部分 HTML 的方法。它似乎解决了似乎出现在 libxml（2、7、8）或更早版本中的挂起问题：

```
 parser = LH.HTMLParser()
    parser.feed(data)
    root = parser.close()
    m = root.xpath('//meta[@property]') 
```

* * *

```
import sys
import lxml.html as LH
import lxml.etree as ET

data = '''
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="ie6"> <![endif]-->
<!--[if IE 7]>    <html class="ie7"> <![endif]-->
<!--[if IE 8]>    <html class="ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html> <!--<![endif]-->
<head profile="http://gmpg.org/xfn/11">
 <meta charset="UTF-8">
 <title>
     Erased US data shows 1 in 4 missiles in Afghan airstrikes now fired by drone: The Bureau of Investigative Journalism  </title>

 <meta name="description" content="Drone data has been wiped from the Air Force website.">

 <meta name="generator" content="Magicalia 2010" />
 <meta name="google-site-verification" content="bGFVI6kAZGjMNNiS6LGvBDWSGydwyWQI3gogCD4xP50" />

 <link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
 <link rel="stylesheet" href="http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/css/screen.css" type="text/css" media="screen, projection" />
 <link rel="stylesheet" href="http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/css/print.css" type="text/css" media="print" />
 <link rel="stylesheet" href="http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/style.css?3" type="text/css" media="screen, projection" />

 <!--[if IE]>
   <link rel="stylesheet" href="http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/css/lib/ie.css" type="text/css" media="screen, projection" />
 <![endif]-->

 <!--[if lt IE 7]>
   <script defer type="text/javascript" src="http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/js/pngfix.js"></script>
 <![endif]-->

 <!--[if gte IE 5.5]>
   <script language="javaScript" src="http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/js/dhtml.js" type="text/javaScript"></script>
 <![endif]-->

 <link rel="alternate" type="application/rss+xml" title="The Bureau of Investigative Journalism RSS Feed" href="http://www.thebureauinvestigates.com/feed/" />
 <link rel="pingback" href="http://www.thebureauinvestigates.com/xmlrpc.php" />

 <link rel="alternate" type="application/rss+xml" title="The Bureau of Investigative Journalism &raquo; Erased US data shows 1 in 4 missiles in Afghan airstrikes now fired by drone Comments Feed" href="http://www.thebureauinvestigates.com/2013/03/12/erased-us-data-shows-1-in-4-missiles-in-afghan-airstrikes-now-fired-by-drone/feed/" />
<link rel='stylesheet' id='mailchimp-css'  href='http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/lib/mailchimp.dev.css?ver=3.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='donate-css'  href='http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/lib/donate.dev.css?ver=3.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='tubepress-css'  href='http://www.thebureauinvestigates.com/wp-content/plugins/tubepress/src/main/web/css/tubepress.css?ver=3.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='NextGEN-css'  href='http://www.thebureauinvestigates.com/wp-content/plugins/nextgen-gallery/css/nggallery.css?ver=1.0.0' type='text/css' media='screen' />
<link rel='stylesheet' id='shutter-css'  href='http://www.thebureauinvestigates.com/wp-content/plugins/nextgen-gallery/shutter/shutter-reloaded.css?ver=1.3.4' type='text/css' media='screen' />
<link rel='stylesheet' id='stbCSS-css'  href='http://www.thebureauinvestigates.com/wp-content/plugins/wp-special-textboxes/css/wp-special-textboxes.css.php?ver=4.3.72' type='text/css' media='all' />
<link rel='stylesheet' id='grid-css'  href='http://www.thebureauinvestigates.com/wp-content/plugins/big-brother/css/grid.css?ver=3.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='reveal-css'  href='http://www.thebureauinvestigates.com/wp-content/plugins/big-brother/css/reveal.css?ver=3.5.1' type='text/css' media='all' />
<link rel='stylesheet' id='app-css'  href='http://www.thebureauinvestigates.com/wp-content/plugins/big-brother/css/app.css?ver=3.5.1' type='text/css' media='all' />
<script type='text/javascript' src='http://www.thebureauinvestigates.com/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script>
<script type='text/javascript' src='http://www.thebureauinvestigates.com/wp-content/plugins/tubepress/src/main/web/js/tubepress.js?ver=3.5.1'></script>
<script type='text/javascript' src='http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/js/jquery.cycle.js?ver=3.5.1'></script>
<script type='text/javascript' src='http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/js/search.js?ver=3.5.1'></script>
<script type='text/javascript' src='http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/js/nav/superfish.js?ver=3.5.1'></script>
<script type='text/javascript' src='http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/js/nav/supersubs.js?ver=3.5.1'></script>
<script type='text/javascript' src='http://www.thebureauinvestigates.com/wp-content/themes/dxw_magicalia/js/home.js?ver=3.5.1'></sc
'''

if __name__ == '__main__':

    print("%-20s: %s" % ('Python',           sys.version_info))
    print("%-20s: %s" % ('lxml.etree',       ET.LXML_VERSION))
    print("%-20s: %s" % ('libxml used',      ET.LIBXML_VERSION))
    print("%-20s: %s" % ('libxml compiled',  ET.LIBXML_COMPILED_VERSION))
    print("%-20s: %s" % ('libxslt used',     ET.LIBXSLT_VERSION))
    print("%-20s: %s" % ('libxslt compiled', ET.LIBXSLT_COMPILED_VERSION))

    n = 0
    while True:
        n += 1
        print '-', n
        parser = LH.HTMLParser()
        parser.feed(data)
        root = parser.close()
        m = root.xpath('//meta[@property]')
        for i in m:
            print(n) 
```

产量

```
% test.py
Python              : sys.version_info(major=2, minor=7, micro=2, releaselevel='final', serial=0)
lxml.etree          : (2, 3, 0, 0)
libxml used         : (2, 7, 8)
libxml compiled     : (2, 7, 8)
libxslt used        : (1, 1, 26)
libxslt compiled    : (1, 1, 26)
- 1
- 2
- 3
- 4
- 5
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:58:00.147

这与`lxml.html`- 检查：

```
tree = lxml.html.fromstring( data )
print tree
# <Element html at 0x1bb5530>
print tree.xpath("//meta[@property]")
# [] 
```

相反，看看这部分......你实际上有一个无限循环：

```
n = 0
while True:
    n += 1
    m = [] # never mind if you get results or not - looks like you don't though

    for i in m:
        print n 
```

# objective-c - 用于 Objective-C 的 Google API 客户端库

> ID：15367002
> 
> 赞同：1
> 
> 时间：2013-03-12T16:38:25.000
> 
> 标签：objective-c, cocoa, youtube-api, google-api-client

我正在使用“Objective-C 的 Google APIs 客户端库”将视频上传到 youtube，我的应用程序从昨天开始在 GTLService 课程中总是崩溃。

视频上传后（并出现在 youtube 上），GTL 调用
`- (void)parseObjectFromDataOfFetcher:(GTMHTTPFetcher *)fetcher`GTLService.m 中的方法

并在 1087 行代码处崩溃：
`NSString *contentType = [responseHeaders objectForKey:@"Content-Type"];` 因为 responseHeaders 数据错误或已发布。

![在此处输入图像描述](../Images/a6aff0476d879704b6f114175f96ff91.png)

有人有同样的问题或想法发生了什么吗？

# android - Android ImageView Fit_X Crop_Bottom

> ID：15367003
> 
> 赞同：0
> 
> 时间：2013-03-12T16:38:28.243
> 
> 标签：android, android-imageview

我需要为以下结果制定正确的*缩放方法：*

ImageView 应缩放到：

*   填充 X 轴
*   保持纵横比
*   将 ImageView 定位在 0,0
*   在底部裁剪剩余部分。

我尝试了多种`Matrix`类型，但迄今为止未能达到结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:51:33.150

我也有同样的问题，我的解决方法是：

```
 ImageView imageView = (ImageView) findViewById(R.id.imageView);
    Matrix matrix = new Matrix();

    float imageWidth = image_original_width * display.density, imageHeight = image_original_height * display.density;
    float placeWidth = imageView.getWidth(), placeHeight = imageView.getHeight();
    float scaleToWidth = placeWidth / imageWidth;
    float scaledImageHeight = imageHeight * scaleToWidth;

    matrix.setScale(scaleToWidth, scaleToWidth);
    if (placeHeight > scaledImageHeight) {
        // there is maintain place bottom of image: center to vertical
        matrix.postTranslate(0, (placeHeight - scaledImageHeight) / 2);
    } else {
        // the bottom of image is already cropped
    }

    imageView.setImageMatrix(matrix); 
```

imageView.getWidth() 你不会在 OnCreate 方法中得到正确的值，所以你需要使用 ViewTreeObserver，或者确切的大小。

# ruby-on-rails-3 - 访问 ActiveRecord 结果导致 UndefinedMethod 错误

> ID：15367014
> 
> 赞同：0
> 
> 时间：2013-03-12T16:38:49.770
> 
> 标签：ruby-on-rails-3

将站点从 Rails 2.2.2 迁移到 Rails 3

我正在运行一个查询并将其存储在变量@user 中，但是当我尝试访问@user 的成员时，我得到一个错误，即使@user 已经水合并且具有“is_admin”的值

```
### @user.inspect returns
[#<B2bUser id: 398, name: "Tim Test", email: "tim_test@test.com", username: "timtest", password: "foo", is_admin: true, company: "Test Co.", sent_welcome_email: true, created_at: "2011-12-14 08:32:31", send_email_reminders: false, api_username: "api.tim_test@test.com", api_password: "FOOBAR", login_attempts: nil, last_login_attempt_at: nil>] 
```

**但是当我从它的角度调用它时：**

```
<% if (@user.is_admin) %> 
```

**我明白了：**

```
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (undefined method `is_admin' for #<ActiveRecord::Relation:0xaa5db4c>):
    14:
    15:         <%= render :partial => "/warning" %>
    16:
    17:         <% if (@user.is_admin) %>
    18:
    19:                
    20: 
```

在同一视图中，当返回多于 1 行时会发生相同类型的错误（未定义的方法 p.vendor_name），例如：

```
<% for p in @privileges %>

        <% next if !p.can_setup_purchase_orders and !p.can_setup_instant_electronic_delivery %>

        <h2>For <%= p.vendor_name %></h2> 
```

这是我的控制器

```
class HomeController < ApplicationController

 before_filter :authenticate

  def index
    @nav = []
    @user = B2bUser.where(:id => request.session[:user_id])
    #logger.debug @user.inspect
    @privileges = B2bPrivilege.lookup_all request.session[:user_id]
    #logger.debug @privileges.inspect

    @can_asn = false
    @can_push_xml = false

    for p in @privileges
      if p.can_setup_advance_ship_notification?
            @can_asn = true and break
        end
         if p.can_setup_xml_pushes?
                @can_push_xml = true and break
            end

    end

  end

end 
```

这是我的方法lookup_all class B2bPrivilege < ActiveRecord::Base

```
 def B2bPrivilege.lookup_all current_user_id

    #return B2bPrivilege.find(:all, :conditions => "b2b_user_id = #{current_user_id}", :joins => "LEFT JOIN vendors ON vendors.id = b2b_privileges.vendor_id", :select => "b2b_privileges.*, vendors.name AS vendor_name")
    return B2bPrivilege.joins('LEFT JOIN  vendors ON vendors.id = b2b_privileges.vendor_id').where('b2b_user_id' => current_user_id)
    #return B2bPrivilege.find_by_sql["SELECT b2b_privileges.*, vendors.name AS vendor_name FROM b2b_privileges LEFT JOIN vendors ON vendors.id = b2b_privileges.vendor_id WHERE b2b_user_id = ?", current_user_id]
end 
```

我需要以不同的方式访问@user 中的成员吗？这曾经在 Rails 2.2.2/Ruby 1.8.7 中工作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:41:45.943

如果你仔细观察你会发现它`@user`实际上是一个 ActiveRecord::Relation 对象，而不是一个用户。如果您只打算在该列表中拥有一个用户，那么您可以使用`@user.first.is_admin`.

`@user`但是，将其设置为控制器中的第一个结果会更有意义。

**更新： rails 中的** *where*返回一个 Relation，它是一个类似对象的数组。它不返回单个模型记录。改为使用`B2bUser.find(request.session[:user_id])`来获取单个用户记录。

# git - 如何调试 git''致命：无法从远程存储库读取'

> ID：15367016
> 
> 赞同：0
> 
> 时间：2013-03-12T16:38:53.203
> 
> 标签：git, web, ssh

我正在尝试第一次设置 git。

我有一个运行 Ubuntu 12.04 的 Linode 的 VPS，以及我自己的 Windows 7桌面。**我在我的桌面上使用 Git Bash**。

在我的本地 Windows 机器上，我创建了一个目录，使用了`git init`，添加了一个测试文件并提交了它。

在linux服务器上，我安装了git，然后创建了目录

`/srv/git/site.git`

然后我使用了命令

`/srv/git/site.git git init --bare`.

最后，回到本地 Windows 机器上，我使用

`git remote add mysite ssh://root@11.123.123.123/srv/git/site.git`

（出于安全原因更改了 IP）。

到目前为止一切都很好。

我终于尝试使用

`git push -u mysite +master:refs/heads/master`.

这个命令给了我错误

```
fatal: 'root@11.123.123.123/srv/git/site.git' does not appear to be a git repository  
fatal: Could not read from remote repository` 
```

我检查了用于我的 SSH 登录的 IP 和用户名，它们是正确的。事实上，只要使用 PuTTY，我就可以使用相同的 root@IP 地址登录。

我在这里用头撞墙。如果有人可以提供调试提示，我将不胜感激。是否有一个连接日志，我可以在其中看到 Git Bash 正在执行的实际“ssh”命令？

是无法连接到服务器还是特定文件夹的问题？

Git Bash 是否使用与 / 不同的默认目录？我需要 git 的新用户吗？

**如果重要的话，我还没有应用任何钩子。我最终需要使用从 /srv/git/site.git 到位于 /srv/www/site.com/public_html 中的实际网站 HTML 的发送接收挂钩。**

# javascript - 使用 MarkerCluster 更改所选集群的样式

> ID：15367022
> 
> 赞同：3
> 
> 时间：2013-03-12T16:38:59.303
> 
> 标签：javascript, google-maps, markerclusterer

我有流动的情况。地图上有一些标记在完全相同的纬度/经度上，因此 MarkerClusterer 缩放不会破坏集群。我处理了用户点击，但我想为点击的集群设置不同的图像。

我找到`setStyles()`了方法，但是该方法更改了为集群生成设置的默认样式。

我尝试了一些类似的东西：

```
markerCluster = new MarkerClusterer(map, duplicateMarkers);
markerCluster.clusters_[0].clusterIcon_.url_ = imageurl; 
```

我设置了不同的图像，但它在地图上没有改变，也尝试放入`setTimeout`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-21T15:57:59.423

您可以在创建集群时定义样式。

var markerCluster = new MarkerClusterer(map, marker_list, {styles:[{...},{...},,,]});

请参阅此处的示例了解如何定义自定义样式：[https ://googlemaps.github.io/js-marker-clusterer/examples/advanced_example.html](https://googlemaps.github.io/js-marker-clusterer/examples/advanced_example.html)

您需要扩展该概念并找到一种方法来区分或确定何时使用不同的图标。就我而言，我的地图上有 5 种不同类型的标记，并且我想要 5 种不同类型的集群（每种类型的标记一个）。我有我的标记在五个不同的数组中排序。在您的情况下，您可能希望将具有相同纬度/经度的标记添加到两个不同的数组（例如，markerArray1 和 markerArray2）。然后执行： var markerCluster1 = new MarkerClusterer(map, markerArray1, {styles:[{...},{...},,,]});

var markerCluster2 = new MarkerClusterer(map, markerArray2, {styles:[{...},{...},,,]});

因此，您正在分别定义具有不同样式的集群，但将它们添加到同一个地图中。

# c# - 选择语句忽略参数？

> ID：15367028
> 
> 赞同：0
> 
> 时间：2013-03-12T16:39:11.630
> 
> 标签：c#, select, oledb, oledbconnection, oledbdataadapter

当我使用此代码时，它会返回表中的每一行，我不知道为什么。

```
string SelectOleDb = "SELECT Top 1 * From `Employee Info` Where [Employee Name]=@EmployeeName" Order By ID DESC";

OleDbConnection OleDbCon = new OleDbConnection(EmployeeInfo.Properties.Settings.Default.cstrEmployeeInfoDatabase);
OleDbDataAdapter OleDbAdpt = new OleDbDataAdapter();
OleDbCommand OleDbCom = new OleDbCommand(SelectOleDb, OleDbCon);
OleDbCom.Parameters.AddWithValue("@EmployeeName", employee_NameComboBox.Text);
OleDbAdpt.SelectCommand = OleDbCom;

DataSet FooDS = new DataSet();
OleDbCon.Open();
OleDbAdpt.Fill(FooDS);
OleDbCon.Close();
OleDbCon.Dispose();
DataTable EmployeeInfo = FooDS.Tables[0]; 
```

我什至将员工姓名列中的一个值复制粘贴到文本框中，以验证我使用的是有效的员工姓名。如果语句不正确，我希望什么都不会返回，而不是一切。

更新：我还尝试删除命名参数“@EmployeeName”并输入用单引号括起来的硬线名称。然而，仍然声明返回员工信息中的所有内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:48:28.463

看起来您正在使用两个不同`DataSet`的 s：

```
DataSet FooDS = new DataSet();   // <-- FooDS?
OleDbCon.Open();
OleDbAdpt.Fill(ExpediteDS);   // <-- filing a different dataset?
OleDbCon.Close();
OleDbCon.Dispose();
DataTable EmployeeInfo = FooDS.Tables[0];  // <-- not the dataset you just filled! 
```

如果这是一个复制/粘贴错误，请按原样发布您的代码- 如果您尝试“虚拟”您的代码，您将导致人们追逐兔子而不暴露真正的问题*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:53:30.540

其他人则表示 OleDb 需要一个 ? 并且它不接受命名参数。这是错误的。我已经修复了我的代码并且它正在工作。手头的问题是声明需要不同的方式来定义空间。

对于 OleDB 连接，如果表名有空格，则必须在 EITHER `(Ticks) 中，否则两者的工作方式相同。

当您的列名带有空格时，混乱就开始了。构建语句时，所有列名都必须有一个 _（下分）来代替列名的空格。虽然 `(Ticks) 和 列名都是可选的。所需要的只是用 _(under score) 替换 " "(Space)

更令人困惑的是，表名需要有 `(Ticks) 或者如果你用 _(under score) 替换“”(空格)，它将找不到表。

我的固定代码：

```
 string SelectOleDb = "SELECT Top 1 * From [Employee Info] Where Employee_Name= @EmployeeName Order By ID DESC";

        OleDbConnection OleDbCon = new OleDbConnection(EmployeeInfo.Properties.Settings.Default.cstrEmployeeInfoDatabase);
        OleDbDataAdapter OleDbAdpt = new OleDbDataAdapter();
        OleDbCommand OleDbCom = new OleDbCommand(SelectOleDb, OleDbCon);
        OleDbCom.Parameters.AddWithValue("@EmployeeName", employee_NameComboBox.Text);
        OleDbAdpt.SelectCommand = OleDbCom;

            DataSet EmployeeInfoDS = new DataSet();
            OleDbCon.Open();
            OleDbAdpt.Fill(EmployeeInfoDS);
            OleDbCon.Close();
            OleDbCon.Dispose();
            DataTable EmployeeInfoDT = EmployeeInfoDS.Tables[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:02:05.720

[正如 MSDN 所记录的](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters%28v=vs.100%29.aspx)：

> 当 CommandType 设置为 Text 时，OLE DB .NET 提供程序不支持将参数传递给 SQL 语句或由 OleDbCommand 调用的存储过程的命名参数。在这种情况下，必须使用问号 (?) 占位符。

我尝试了您的查询的变体以及使用 ? 它按预期工作。使用命名参数失败。

根据要求，这是示例：

```
 string SelectOleDb = "SELECT Top 1 * From users Where [application_user_name]=? Order By application_user_id DESC";

        OleDbConnection OleDbCon = new OleDbConnection("Provider=SQLOLEDB;Data Source=SERVER\\INSTANCE;Initial Catalog=samples;Trusted_Connection=yes");

        OleDbDataAdapter OleDbAdpt = new OleDbDataAdapter();
        OleDbCommand OleDbCom = new OleDbCommand(SelectOleDb, OleDbCon);
        OleDbCom.Parameters.AddWithValue("@EmployeeName", "smith");
        OleDbAdpt.SelectCommand = OleDbCom;

        DataSet ExpediteDS = new DataSet();

        DataSet FooDS = new DataSet();
        OleDbCon.Open();
        OleDbAdpt.Fill(ExpediteDS);
        OleDbCon.Close();
        OleDbCon.Dispose(); 
```

需要注意的是，对于 OLEDB，参数顺序很重要。您必须按照希望在查询中引用它们的顺序将它们添加到 ParameterCollection。

# c# - 将此逻辑放入存储库或服务中

> ID：15367031
> 
> 赞同：0
> 
> 时间：2013-03-12T16:39:16.323
> 
> 标签：c#, repository-pattern, service-layer

我应该将此方法放入我的 ISchoolclassCodeRepository 还是我的 ISchoolclassService 中？

```
/// <summary>
        /// The client passes newly created and existing schoolclass codes.
        /// The newly created schoolclass codes are returned.
        /// </summary>
        /// <param name="newAndExistingSchoolclassCodes">All schoolclass codes and the newly created by the user</param>
        /// <param name="schoolyearId">The related schoolyear for a schoolclass code</param>
        /// <returns>The newly created schoolclass codes</returns>
        public IEnumerable<SchoolclassCode> GetNewCreatedSchoolclassCode(IEnumerable<SchoolclassCode> newAndExistingSchoolclassCodes, int schoolyearId)
        {
            var existingSchoolclassCodes = _uniOfWork.SchoolclassCodeRepository.GetSchoolclassCodes(schoolyearId).ToList();
            var newSchoolclassCodes = existingSchoolclassCodes.Except(newAndExistingSchoolclassCodes,new SchoolclassCodeComparer());
            return newSchoolclassCodes;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:18:30.890

`ISchoolclassService`如果你有的话，我的投票将是。但是，我不会为此目的创建一个。

这也取决于做什么`SchoolclassCodeComparer`。如果它有自己的数据访问权限，那么它会调用同一个存储库来获取学校代码吗？

如果有一种方法可以将施加的约束传递`SchoolclassCodeComparer`给查询，那么我会在存储库中拥有它。使用各种规则对结果集进行后处理可以驻留在服务中。

我更喜欢让存储库层处理 DataAccess。Dataaccess 中的逻辑将仅限于构造参数和创建返回结果的投影（如果需要）。

基于任何其他业务逻辑按摩/过滤数据集可能是服务的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:22:59.467

这似乎更像是应用程序逻辑，在您的情况下，这将在您的服务中实现。但是，这通常会进入应用程序层。[这里有一些解释各个层的更多信息](http://ludwigstuyck.wordpress.com/2013/03/05/a-reference-architecture-part-1/)，也许你想采用其中的一些概念。

存储库仅保存数据访问逻辑：这意味着类似 CRUD 的操作。

# c# - 已使用不同类型约束定义的具有相同签名的成员

> ID：15367032
> 
> 赞同：7
> 
> 时间：2013-03-12T16:39:19.427
> 
> 标签：c#, .net, generics, generic-constraints

我遇到了一个重载方法的问题，这些方法具有不同的约束，似乎是排他的。那是我的例子：

```
public class A
{
    public void Do<T>() where T : class
    {

    }

    public void Do<T>() where T : struct 
    {

    }
} 
```

并且这不会与以下错误“已定义相同签名的成员”一起编译。是否可以同时满足这两个条件，或者这只是 C# 编译器的限制？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T16:42:08.737

这不是*编译器*的限制——它是*语言*的限制（很可能还有 CLR；我不确定）。

从根本上说，这些是冲突的重载——就像试图通过返回类型重载一样。不支持。

可以声明*方法*，使这些调用都编译为不同方法的调用：

```
a.Do<int>();
a.Do<string>();
a.Do<int?>(); 
```

...但它总是涉及可选参数和/或参数数组，这[*太可怕*](https://codeblog.jonskeet.uk/2010/11/02/evil-code-overload-resolution-workaround/)了。

另请注意，虽然您不能通过泛型约束重载，但*可以*通过泛型“arity”（类型参数的数量）重载：

```
public void Foo() {}
public void Foo<T>() {}
public void Foo<T1, T2>() {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:42:12.483

您不能通过改变泛型参数包含来重载方法。对于有效的方法重载，您必须对该方法具有不同的输入参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T16:50:34.793

编译时，这两种方法都应具有以下名称：

```
A.Do``1 
```

由于泛型参数的计数进入方法或类的名称。

不确定您的情况如何，但您可能需要使用反射来调用这些方法：

```
public class A
{
    public void Do<T>()
    {
        if(typeof(T).IsValueType){
            // nasty reflection to call DoValueType
        }
        else {
            // nasty reflection to call DoReferenceType
        }
    }
    private void DoReferenceType<T>() where T : class {

    }
    private void DoValueType<T>() where T : struct {

    }
} 
```

# php - mysql php插入

> ID：15367035
> 
> 赞同：-2
> 
> 时间：2013-03-12T16:39:23.703
> 
> 标签：php, html, mysql

我有一个问题，不确定这是否是一种好的编码方式。我有一个包含 75 个字段的表，不，它不能被规范化，即使我对其进行规范化，我也只能使用 implode 将数据折叠到一个数组中，即使我仍然有 65 个字段。我有访问这个表的代码，但是，它不需要所有的字段，所以在我的代码中，通过只调用我需要的字段，我可以通过插入，它仍然运行得很好，我的问题是，我可以继续这样工作吗：

所以例如，而不是这个：

```
insert into table(75 fields) values(values) 
```

我可以通过这样做：

```
insert into table (only fields i need here) values (values) 
```

php和mysql最终会打破上述吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:48:01.643

i think its the update which you looking for.

with `UPDATE` you can just update some fields you want.

with `INSERT` you cant . forexample if you have some columns which have nut null key. pr primary keys. and so on.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:08:52.813

不，它不应该破坏它，但你必须小心这些字段都不需要值。如果他们这样做，那么您不能输入 null。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T16:43:08.330

不，php 和 MySQL 不会破坏这一点。

# javascript - path.node().getTotalLength() 挂起浏览器

> ID：15367036
> 
> 赞同：3
> 
> 时间：2013-03-12T16:39:26.137
> 
> 标签：javascript, svg, path

我正在尝试生成折线图，但在尝试使用函数 getTotalLength() 获取 svg 路径的长度时遇到错误。这对我来说很奇怪，因为 Firefox 19.0.2 运行良好，但 Safari 6.0.2 和 Chrome 25.0.1364.160 挂起。

发生错误的代码如下：

```
 function displayValueLabelsForPositionX(xPosition) {
            if (typeof jsondata.length == 'undefined') {
                return;
            }

            // position label values
            var pathEl = path.node();     
            var pathLength = pathEl.getTotalLength();

           (...)
         } 
```

错误总是发生在对 pathEl.getTotalLength() 的调用中，并且路径似乎是正确的，但长度为 150KB：

```
<path class=​"line" d=​"M0.0020634675065341434,384.8476217601823C0.002751290008712191,384.8476217601822,0.0034391125108902388,384.8476217601822,0.004126935013068286,384.8476217601823C0.0048147575152463346,384.8476217601822,0.005502580017424381,384.8476217601822,0.006018446894057917,384.8476217601823C0.006534313770691453,384.8476217601822,0.006878225021780477,384.8476217601822,0.61216202693

(...)

1006.9979365324934,312.1617772714327" clip-path=​"url(#clip)​">​&lt;/path>​ 
```

任何想法 ？如果没有这个功能，还有其他方法可以得到这个长度吗？

问候，琼

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-08-11T23:22:54.780

**这个函数可能有两个不同的问题：**

```
var pathLength = pathEl.getTotalLength();  // Causes reflow of document!! 
```

**1.问题可能是，这个函数被多次调用，每次都会导致文档重排。**

一个解决方案可能是自己计算/近似路径的长度。如果路径相当简单并且您了解它是如何构建的，那效果很好。

[![可能的简单路径](../Images/b5e84c3884ad66426b362f3635b303ff.png)](https://i.stack.imgur.com/tH0tY.png)

您可以尝试使用“毕达哥拉斯”定理（*哇，我从没想过在编程中需要它！*）或其他几何公式来近似路径长度，以接近您的需要。它在任何方面都比使用 getTotalLength() 快得多。

**2.问题可能是你的路径非常复杂（150kb）**

在这种情况下，您可以尝试使用 SVG Minifier / Simplifier 来简化您的路径，例如[Peter Collingridge SVG Minifier](https://petercollingridge.appspot.com/svg-optimiser)或其他的。

# telerik - 如何在客户端计算 RadListbox 中的项目数

> ID：15367045
> 
> 赞同：1
> 
> 时间：2013-03-12T16:40:01.473
> 
> 标签：telerik

我想在客户端检查**RedListbox中的项目数。**

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:00:34.263

通过在客户端使用以下代码解决了自己。

```
 var list = $find("<%= listbox_InitialSelected.ClientID %>");
    var count = list.get_items().get_count(); 
```

# asp.net-mvc-4 - 转换为 SimpleMembership 后，波浪号斜线帐户登录在 MVC4 中不起作用

> ID：15367048
> 
> 赞同：2
> 
> 时间：2013-03-12T16:40:12.717
> 
> 标签：asp.net-mvc-4, simplemembership

在我的 web.config 中，我有：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

也：

```
<appSettings>
    <add key="PreserveLoginUrl" value="true" />
</appSettings> 
```

由 [Authorize] 控制器或操作过滤器引起的任何重定向都无法在我的生产环境中工作。我得到一个 302 到一个带有 ~ 的 URL，即：

```
<a href="/~/Account/Login?ReturnUrl=%2FTransactions"> 
```

但是它在本地工作 - 我得到正确的 302 来：

```
<a href="/Account/Login?ReturnUrl=%2FTransactions"> 
```

我有一个解决方法 - 这涉及从 loginUrl 中删除 ~。但是为什么它不能与生产中的 ~ 一起使用？

一些附加信息：本地服务器（IIS Express w VS 2012）：

```
Server: Microsoft-IIS/8.0
X-AspNetMvc-Version: 4.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET 
```

生产服务器：

```
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 4.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET 
```

# asp.net - Asp.net 上的 MongoDB：安全同步写入

> ID：15367049
> 
> 赞同：0
> 
> 时间：2013-03-12T16:40:12.700
> 
> 标签：asp.net, mongodb, synchronization

我正在寻找 MongoDB 中安全和同步写入的最佳实践。我在 asp.net 和 mongo 数据库上有一个服务器。我有一些服务器方法，它们不仅可以使用相同的集合，还可以同时使用相同的对象。所以我需要最有效的方式来同步数据库写入。

使用 mongo API 或 C# 工具（如锁）更好地执行此操作吗？每种情况下的表现如何？

如果我让我的所有`DBHelper`方法（通常包含多个原子操作）在处理不同对象时异步运行（对象 id 始终`DBHelper`作为参数传递）并在使用相同对象 id 时同步运行，那将是完美的。

我将不胜感激任何解释以及相关文章的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:59:18.020

MongoDB 不符合事务性或 ACID 标准，因此没有真正的支持。如果您尝试使用 C# 锁，如果您有多个服务器，您会遇到问题，因为锁不会在服务器之间共享。

如果您只是在寻找安全的写入，MongoDB 确实提供了，请参阅他们在[Write Concerns](http://docs.mongodb.org/manual/core/write-operations/#write-concern)上的文档。

如果您担心并发性，他们也有一个[常见问题解答](http://docs.mongodb.org/manual/faq/concurrency/)。但听起来你想要乐观并发？这篇[文章](http://late.am/post/2011/11/18/ensuring-write-your-own-reads-consistency-in-mongodb)可能有用。

# jbehave - 在 JBehave 中获取场景的特定标签值

> ID：15367050
> 
> 赞同：0
> 
> 时间：2013-03-12T16:40:13.640
> 
> 标签：jbehave

如果有任何方法可以为 JBehave 中的以下场景获取 @dataset 标记的值？

```
Scenario: Open/close chat and send messages
    @dataset set2
    Given user is logged into the system
    When user opens chat
    ... 
```

我试过了

```
@BeforeScenario
public void getdata(@Named("dataset") String dataset) {
    System.out.println(dataset); 
```

但是，如果为特定场景定义了 @dataset，这将不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:12:16.723

解决方案很简单

```
Scenario: Open/close chat and send messages
    META: @dataset set2
    Given user is logged into the system
    When user opens chat 
```

您应该在标签名称之前添加“META：”

# jquery - 如果用户没有更改，我如何添加消息 on submit I've got a list of ages in a form <select id="age"><option value="18">18</option><option value="19">19</option><option value="20">20</option> <option value="21" &g<="" h1="">ID：15367057 赞同：0 时间：2013-03-12T16:40:21.343 标签：jquery, forms, select, error-handling, option 回答 #1 赞同：1 时间：2013-03-12T16:45:36.183 我认为您必须要么查找表单提交，要么必须初始化更改： $("#age").change(function(){ $("#age").after('<span class="register-error age-error">age</span>'); }).change(); // <----this way 你需要这种html： <select id="age"> <option value="">choose</option> //<-----a blank value of the select 小提琴 回答 #2 赞同：0 时间：2013-03-12T16:48:55.793 Have the required field already on your HTML page, but has a hidden element. Perhaps right under the form. Use jQuery to check if the user has left your form element blank after they haved submited the form. Use jQuery's Submit Method to setup the base logic for your form. Then incorporate a conditional statement inside the method something like this.... The JS: if($(this).val() == "") { showRequiredBoxEmail(); //this function shows the required message } else { hideRequiredBoxEmail(); //this function hides the required message } 回答 #3 赞同：0 时间：2013-03-12T16:42:47.863 问题在于，对于您当前的 HTML，始终选择一个选项（18始终选中）。您需要添加一个具有空值的选项： <select id="age"> <option value="">Please select an option</option> <option value="18">18</option> <option value="19">19</option> ... ... <option value="65">+65</option> </select> 回答 #4 赞同：0 时间：2013-03-12T16:42:54.150 试试这个： $("#form-id").submit(function() { if ($("#age").val() == "") { $("<span class='register-error age-error'>age</span>").insertAfter("#age"); } });</option></select>

# c++ - C ++，每个线程都是本地的 set_terminate 吗？

> ID：15367060
> 
> 赞同：14
> 
> 时间：2013-03-12T16:40:26.037
> 
> 标签：c++, exception-handling, c++11, language-lawyer, c++03

是否应该`set_terminate`/`get_terminate`为 C++ 2011 或 C++ 2003 中的多个线程设置不同的终止异常处理器？

例如，如果我有程序并将终止处理程序设置为`func_1`；然后我启动 3 个线程。什么是新线程中的终止处理程序？如果在每个线程中我将终止处理程序设置为`func_2`在第一个线程中，`func_3`在第二个线程中等等。

[N3242](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)（C++ 2011 草案）`[handler.functions]`在`[support.exception]`/`[exception.terminate]`

PS：对于这些标准的任何流行实现，您可以回答 C++2011 或 C++2003

PPS：对此有 FCD 评论... [C++ FCD 评论状态 Rev. 5 N3249 (2011)](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3249.html)：

```
GB 71    18.6.2.4 / 18.8.2.2 / 18.8.3.2 
```

> `std::set_new_handler()`, `std::set_unexpected()`, ,的线程安全性`std::set_terminate()`未指定，使得函数无法以线程安全的方式使用。
> 
> 必须指定函数的线程安全保证，并且应该提供新的接口，以便以线程安全的方式查询和安装处理程序。
> 
> LWG [1365](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-toc.html#1365) 接受修改
> 
> 见论文 [N3189](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3189.htm)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T16:52:55.667

17.6.4.7p4 说：

> 调用`set_*`and`get_*`函数不会引起数据竞争。对任何函数的调用应与对同一函数和相应函数`set_*`的后续调用同步。`set_*``get_*`

这强烈暗示`set_*`and`get_*`函数在相同的全局状态下运行，即使从不同的线程调用也是如此。18.8.3 下的所有段落都讨论了“*当前处理函数*”，没有其他提及线程；这表明处理函数是整个程序的一个属性；同样，17.6.4.7 具有：

> 2 - C++ 程序可以在执行期间安装不同的处理函数 [...]
> 3 - C++ 程序可以通过调用以下函数来获取指向当前处理函数的指针 [...]

这些段落讨论*了程序上下文中的当前处理函数*，表明它是程序范围的而不是线程本地的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T16:54:09.087

在标准中它说

**18.8.3.2 set_terminate [set.terminate]**

`terminate_handler set_terminate(terminate_handler f) noexcept;`

> 1 效果：将 f 指定的函数建立为当前处理函数，用于**终止**异常处理。

`[[noreturn]] void terminate() noexcept;`

> 2 效果：调用当前的 terminate_handler 函数。[ 注意：在这种情况下，默认的 terminate_handler**始终被视为**可调用的处理程序。——尾注]

您可以看到它`terminate()` 调用了**当前**的终止处理程序，在该`set_handler`部分中它非常清楚地表明它用于**终止**进程。当所有其他异常处理失败时，无论从哪个线程运行，都会调用它。

只有一个终止处理程序，它总是从程序终止的任何地方调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-14T04:11:20.267

该标准没有具体说明；[[set.terminate]](https://timsong-cpp.github.io/cppwp/exception.terminate)仅状态

> [...] 用于终止异常处理的当前处理函数。

但没有提到“当前”是全局的还是每个线程的。所以这取决于实施。

例如，在 MSVC++ 中： [https ://msdn.microsoft.com/en-us/library/t6fk7h29.aspx](https://msdn.microsoft.com/en-us/library/t6fk7h29.aspx)

> 在多线程环境中，终止函数是为每个线程单独维护的。每个新线程都需要安装自己的终止函数。因此，每个线程都负责自己的终止处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T17:27:49.510

C2003 没有线程，任何线程支持都是供应商扩展，因此只有供应商提供的文档才有答案。如果处理程序是每个线程的，则文档应该这样说。我知道没有任何实现可以做到这一点。

C++2011 没有说明终止处理程序的每线程性质。每个线程都维护它没有什么意义，因为你不能在 C++11 中杀死一个线程。还有一个很好的理由（google kill+thread+c++11）。所以无论你做什么，程序都必须终止。看起来有不同的方法来终止程序，具体取决于请求它的线程不是任何人都需要的功能。

# python - 漂亮的 PyParsing 树

> ID：15367061
> 
> 赞同：3
> 
> 时间：2013-03-12T16:40:34.903
> 
> 标签：python, parsing, pretty-print, pyparsing, parse-tree

`pprint`有没有人实现了从 PyParsing 输出的解析树的漂亮打印（最好使用 Python 的内置模块），最好是缩进和对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T12:23:45.523

您可以为此使用 json。

```
import json
class PyParseEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, ParseResults):
            x = obj.asDict()
            if x.keys():
                obj = x
            else:
                x = obj.asList()
                if len(x) == 1:
                    obj = x[0]
                else:
                    obj = x 
        else:
            obj = super(PyParseEncoder, self).default(obj)
        return obj 
```

接着

```
print json.dumps(parseresult, cls=PyParseEncoder, sort_keys=False, indent=2) 
```

如果您从 json.dumps 收到错误，只需为特定数据类型的编码器添加额外的处理程序。

# xaml - 重复按钮的 ClickMode 在 winrt 中损坏？

> ID：15367065
> 
> 赞同：0
> 
> 时间：2013-03-12T16:40:42.857
> 
> 标签：xaml, windows-runtime, winrt-xaml

Windows 8 应用商店应用程序中的 ClickMode 重复按钮未按预期工作。我做错了还是有人注意到这些问题：

*   ClickMode=Release 和 ClickMode=Press 的行为相同。使用鼠标或触摸时，按住按钮会继续触发单击事件。我认为Release 会使RepeatButton 或多或少像普通按钮一样工作——每次mousedown/mouseup 单击一次。
*   使用键盘，使用 Enter 根本不会引发 click 事件。（使用空格键有效。）
*   控件不会选择在样式中设置 clickmode。

我使用的是重复按钮，但测试想将点击事件更改为只触发一次。我认为 ClickMode 将是一个快速修复，但不得不用按钮替换它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:56:56.410

这就是RepeatButton 的作用。如果您想每次按下单击 - 使用常规 Button 控件。

# sql-server-2008 - Access 数据库引擎停止了该进程，因为您和另一个用户正在尝试更改相同的数据

> ID：15367066
> 
> 赞同：19
> 
> 时间：2013-03-12T16:40:45.103
> 
> 标签：sql-server-2008, ms-access, ms-access-2010

我们最近将访问数据库迁移到 SQL 服务器上。完成后，我们开始使用我们拥有的前端访问数据库测试数据库（我们之前的设置涉及两个访问文件，一个用于前端，一个用于后端。）我们几乎立即收到错误。

Microsoft access 数据库引擎停止了该过程，因为您和另一个用户正试图同时更改相同的数据。

现在我们确实有多个人在这些前端工作，但在收到此消息时，我是唯一访问数据的人。我测试它的一般过程是使用表单插入数据。然后尝试删除数据。我知道数据正在进入表中，并且我知道我是唯一查看或尝试编辑此信息的人，我们使用 ODBC 连接将 SQL 服务器连接到前端。非常感谢您的任何建议或帮助，我将密切关注此线程，因此希望您问我的任何问题都能相对较快地得到回答。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-12T17:04:40.557

在[本文中](https://support.microsoft.com/en-us/kb/318882)，您会发现错误可能是由位数据类型引起的：

> 如果在基于 SQL Server 的数据库中具有位数据类型的字段已留空，则会出现此问题。Microsoft Access 将空白字段解释为包含 Null 值的字段，Jet 数据库引擎不会释放它们。因此，记录保持锁定状态，不可删除。

请注意，您必须始终拥有一个主键或唯一键才能从 SQL Server 更新数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-03T09:02:57.843

使用 Compact & Repair 数据库

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-25T01:28:37.277

即使我没有位字段和可空字段，我也收到此错误。当我将 DATETIME 字段更改为 SMALLDATETIME 时，我不再收到错误消息。我唯一能想到的是 Access 错误地解释了日期，然后欺骗自己认为其他东西已经更新了日期。我之所以这么认为，是因为我在另一个线程上看到了另一个评论，Access 可以不同于 SQL Server 进行舍入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-12T00:52:28.107

我在 SQL Server 中的表中添加了一个时间戳字段，并在访问中重新链接它，这就成功了。它还解决了我在使用表格时遇到的编辑问题。希望这对其他人也有帮助。该表已经有一个主键字段，但显然还需要时间戳字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-10T03:39:52.487

我刚刚安装了 Access 2016 并在尝试从 accdb 导入 access 2013 表时出现错误。

显然 2016 年的后端引擎现在是 SQL Server。我删除了一个我打算使用但从未使用过的字段，因此它充满了 Null。之后就没有问题了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-23T14:37:30.960

在 sql 中创建表列时尽量不要使用 GetDate() 作为默认值。这解决了我的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-21T22:27:09.143

如上所述，我也遇到了这个问题，我想我会发布回复，因为 Microsoft 链接不再有效。

我将 Access 数据库的后端迁移到 AWS 服务器上的 MySQL，并且我尝试从中添加或删除记录的任何相关表都会生成该线程标题的错误。

我的解决方案是删除类型为“BIT”的字段，幸运的是，这是我重新开发数据库之前使用的旧字段，因此可以删除。

# c - 从标准输入读取整数并保存它们 - C

> ID：15367070
> 
> 赞同：1
> 
> 时间：2013-03-12T16:40:51.560
> 
> 标签：c, input, scanf

输入的第一行包含一个整数。然后每个输入后面跟着一行包含两个整数，每个整数不大于 1 000 000。第一个整数 n 是向量的大小，第二个整数 m 是寄存器信息的行数。以下每一行都包含两个整数 x 和 y 表示这一点。一行中的任何两个整数都由一个空格分隔。这些行不包含其他字符，除了结尾的新行

所以我选择 x 作为向量中的位置。x 存储在`num1`结构中`my_struct`，y 存储在`num2`

```
typedef struct my_struct{
  int num1;
  int num2;
  bool my_bool;
} my_struct;

int main(){
   int testCase, sizeVector, numLines, num1_in, num2_in, linesScanned = 0;
   scanf("%d\n %d %d", &testCase, &sizeVector, &numLines);

   my_struct my_vector[sizeVector+1];

   my_vector[0].num1 = testCase;
   my_vector[0].num2 = 0;
   my_vector[0].my_bool = false;

   while (linesScanned < numLines) {
      scanf("%d %d\n ", &num1_in, &num2_in);
      my_vector[num1].num1 = num1_in;
      my_vector[num1].num2 = num2_in;
      my_vector[num1].my_bool = false;
      linesScanned++;

   }} 
```

输入示例：

```
1
3 2
1 2
2 3 
```

我的问题是第一个`scanf`效果很好，但循环上的 on 不行。它没有按应有的方式保存值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:44:36.497

更改第二个`scanf()`：

```
scanf("%d %d\n ", &num1_in, &num2_in); 
```

经过

```
scanf(" %d %d", &num1_in, &num2_in); 
```

事实上，在您`scanf()`开始阅读整数之前，您并没有赶上新的一行。在您的输入中输入了新行，但在第一个`scanf()`或第二个中都没有捕获到`scanf()`

在第二个字符串格式的开头添加空格`scanf()`将捕获任何空格（空格、制表符、换行符......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:45:18.997

更改代码以摆脱函数`\n`中的`scanf`。事实上，你也可以摆脱这些空间。当使用`%d`输入中的所有空格时，将被忽略。

您似乎也没有增加数组索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:48:40.273

你的第二个`scanf`应该是：

```
scanf(" %d %d", &num1_in, &num2_in); 
```

# wordpress - 如何使用自定义帖子类型创建子菜单？

> ID：15367071
> 
> 赞同：2
> 
> 时间：2013-03-12T16:40:57.430
> 
> 标签：wordpress, wordpress-theming, submenu

我用 WordPress 建立了一个网站，并且我有自定义的帖子类型。在某些页面中，我有子导航，我想在页面中显示它，如下图所示：

[http://www.andreavisibelli.com/screen-1.jpg](http://www.andreavisibelli.com/screen-1.jpg)

它工作正常，不是吗？

是的，但是如果您尝试查看下图中的“Vini”页面，您将看不到子菜单：

[http://www.andreavisibelli.com/screen-2.jpg](http://www.andreavisibelli.com/screen-2.jpg)

这两个子菜单之间的区别在于，第一个是 WordPress 的基本页面，而第二个是自定义的帖子页面！

我的代码是：

```
 <ul id="subnavigation">
<?php
  if($post->post_parent)
  $children = wp_list_pages("title_li=&child_of=".$post->post_parent."&echo=0");
  else
  $children = wp_list_pages("title_li=&child_of=".$post->ID."&echo=0");
  if ($children) { ?>
  <ul>
  <?php echo $children; ?>
  </ul>
  <?php } ?>
  </ul> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:48:00.390

答案在[WordPress 文档](http://codex.wordpress.org/)中：

> ### [功能参考/wp 列表页](http://codex.wordpress.org/Function_Reference/wp_list_pages)
> 
> **用法**：
> `<?php wp_list_pages( $args ); ?>`
> 
> **默认用法**：
> 
> ```
> <?php $args = array(
>   'depth'        => 0,
>   'show_date'    => '',
>   'date_format'  => get_option('date_format'),
>   'child_of'     => 0,
>   'exclude'      => '',
>   'include'      => '',
>   'title_li'     => __('Pages'),
>   'echo'         => 1,
>   'authors'      => '',
>   'sort_column'  => 'menu_order, post_title',
>   'link_before'  => '',
>   'link_after'   => '',
>   'walker'       => '',
>   'post_type'    => 'page',
>   'post_status'  => 'publish' 
> ); ?> 
> ```

如您所见，该参数**`post_type`**是实现自定义帖子类型列表所需的参数。只需使用您的 CPT slug。

# python - 在数据库中存储重音和其他字符

> ID：15367075
> 
> 赞同：2
> 
> 时间：2013-03-12T16:41:21.940
> 
> 标签：python, unicode, encoding

我正在使用`sqlite3`数据库，选择使用`mutagen`从 mp3 获得的某些 ID3 信息并将其存储。当歌曲包含重音符号或其他“外来”字符时，如果我只是尝试将它们存储为常规 Python 字符串，则会收到以下错误：

```
sqlite3.ProgrammingError: You must not use 8-bit bytestrings unless you use a text_factory
that can interpret 8-bit bytestrings (like text_factory = str). It is highly recommended     
that you instead just switch your application to Unicode strings. 
```

因此，我将要存储在数据库中的所有字符串编码为 un​​icode：

```
 try: # store as unkown if no ID3 info
                songtitle = unicode(audio["TIT2"].__str__(), errors="replace")
            except KeyError:
                songtitle = "Unknown"

            try:
                artist = unicode(audio["TPE1"].__str__(), errors="replace")
            except KeyError:
                artist = "Unknown"

            try:
                album = unicode(audio["TALB"].__str__(), errors="replace")
            except KeyError:
                album = "Unknown" 
```

这消除了所有错误并允许成功填充数据库。但是，它仍然不显示重音符号和其他字符，通常用问号、空格或其他乱码替换它们。

我假设我需要指定某种编码，但我不确定如何在不破坏与英语编码等兼容性的情况下做到这一点。我相信你可以告诉我，我的编码经验很少。

# javascript - Backbone.js 根据 ajax 请求的结果采取不同的行动

> ID：15367076
> 
> 赞同：0
> 
> 时间：2013-03-12T16:41:22.250
> 
> 标签：javascript, backbone.js

我有一个骨干应用程序，它从 url 读取 svn 文件路径，然后“ls”是它给出的路径。通常，它只是在表中枚举 ls 的结果。但我想要做的是检查路径是否实际上只对应于特定文件，在这种情况下，取而代之的是获取并显示文件的内容。

这样做的一个好的骨干惯用方式是什么？现在在我称之为目录模型的解析函数中，我正在考虑做这样的事情：

```
 parse: function(response, options) {
    if (response.length == 1 && response[0].type == "file") {
      // what to do here?
    }
    this.get('entries').reset(response);
    $("#indicator").hide();
    $('#directory-contents').show();
    this.trigger('change');
    return {};
  }, 
```

所以我很想发出一个 ajax 请求来获取这里的文件内容（即 at `// what to do here?`），但是 a) 自己直接发出 ajax 请求似乎不太好，b) 我觉得我正在混合在一起两个模型合二为一。现在我的 DirectoryView 可能需要检查某种标志来判断它是否实际呈现一个目录，或者只是一个特定的文件。

关于更好的处理方法的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:01:50.327

好的，在查看评论并进一步了解您的领域后，我建议采用以下方法：

*   创建一个代表文件系统节点的 FSEntry 模型（如果您愿意，可以使用 inode）。关键在于可以代表目录或文件
*   FSEntry 应该有一个`type`字符串属性，可以是“目录”、“文件”、“符号链接”等
*   基本的 fsEntry.fetch() 应该只加载元数据，包括`type`字段。
*   渲染它的视图可以响应模型事件而渲染。基于模型实例的`type`，适当地渲染（或者如果你愿意，可以为视图的主体换一个不同的模板）
*   如果`type`是“文件”，则让视图调用 fsEntry.fetchContent() 并响应相应的`change:content`事件以呈现文件内容
*   您可以稍后将逻辑添加到模型中以缓存`content`数据，并且如果缓存中有新数据，则不会重新获取它，但这是您应该在所有功能正确后才添加的优化。

基于您的代码示例的旁注：不要在模型或集合代码中操作 DOM！这是 MV* facepalm 故障。

# javascript - 指定位置top时JQuery对话框定位跳下

> ID：15367078
> 
> 赞同：0
> 
> 时间：2013-03-12T16:41:28.317
> 
> 标签：javascript, jquery, jquery-ui, jquery-dialog

我正在尝试将我的 jquery 对话框位置一直放在所有左角的顶部。我的对话框定义：

```
$('#my_dialog').dialog({
   autoOpen: false,
   resizable: false, 
   draggable: false,
   show: 'slide',
   hide: 'slide',
   position: {
     of: $(document),
     my: 'left top',
     at: 'left top',
     collision: 'none'
   }
   ...
}); 
```

现在，当打开对话框时，它会在顶部打开，但会一直跳到底部。请帮忙还有其他方法吗？

编辑：我打开对话框的方式是：

```
$('#my_dialog').parent().effect("bounce", {}, "fast");
$('#my_dialog').dialog('open'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:07:15.117

您的问题是由效果引起的......您在对话框可见之前将其应用于对话框。只需颠倒这两行，您应该会得到想要的结果：

```
$('#my_dialog').dialog('open');
$('#my_dialog').parent().effect("bounce", {}, "fast"); 
```

# linux - Linux - 如何从程序脚本中查看日志文件？

> ID：15367079
> 
> 赞同：-2
> 
> 时间：2013-03-12T16:41:30.423
> 
> 标签：linux

如何从脚本中查看日志文件？我尝试了 less / logfile 但不工作

[男人脚本在这里](http://unixhelp.ed.ac.uk/CGI/man-cgi?script)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:47:26.940

you must either specify the logfile you want the output directed to such as:

~]# script [OPTIONS] filename

if no filename is specified when you first launch the script command, then it defaults to saving into filename "typescript" -- so check in whatever directory you first launched the command from.

doing a cat typescript or cat filename should bring up the file's contents.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:48:56.017

If you started script using `script logfile`, then, a `less logfile` should work.

# vb.net - 将代码 vb 6 转换为 vb.net

> ID：15367082
> 
> 赞同：0
> 
> 时间：2013-03-12T16:41:44.923
> 
> 标签：vb.net, vb6

我不知道如何转换此代码。

此代码用于子主

```
Public Sub main()
    On Error Resume Next
    frmsplash.Show
    Open App.Path & "/joel.txt" For Input As #1
    Input #1, serverhost
    Input #1, mydatabasename
    Input #1, myusername
    Input #1, mypassword
    Input #1, mysqlport
    Close #1

    cn.ConnectionString = "Driver={MySQL ODBC 5.1 Driver};Server=" & Trim(serverhost) & ";Port=" & Trim(mysqlport) & ";Database=" & Trim(mydatabasename) & "; User=" & Trim(myusername) & ";Password=" & Trim(mypassword) & ";Option=3;"
    cn.Open

    If cn.State = 0 Then
        MsgBox "Unable  to connect to database", vbCritical
        frmconnect.Show
        frmsplash.Hide
    Exit Sub 
```

以及用于创建连接的代码

```
Private Sub cmdcreate_Click()
    Open App.Path & "\joel.txt" For Output As #1
    Print #1, txtserver.Text
    Print #1, txtschema.Text
    Print #1, txtuser.Text
    Print #1, txtpassword.Text
    Print #1, txtport.Text
    Close #1
    Unload Me
    Call main
End Sub 
```

我试图创建一个连接字符串.. submain.. 文本文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:54:15.173

用于`system.io.textreader`从文件中读取一行：

```
dim tr as system.io.textreader = new system.io.streamreader(file)
dim val as string = tr.readline 
```

用于`system.io.textwriter`将一行写入文件：

```
dim tw as system.io.textwriter = new system.io.streamwriter(file)
tw.writeline(val) 
```

至于数据访问，请使用 system.data 中的某些内容。你需要用谷歌搜索'因为我正在手机上写这个并且刚刚失去了耐心:-)

# javascript - 计算动态图像高度后如何执行 JavaScript 代码？

> ID：15367085
> 
> 赞同：0
> 
> 时间：2013-03-12T16:41:54.967
> 
> 标签：javascript, jquery, html, css

我正在开发一个图像非常重的响应式网站。为了论证，想象一下像 Pinterest 这样的图像网格。在这些图像之上分层的是包含基本元数据（如标题、作者等）的 div，我在缩略图图像中动态垂直居中。

我正在使用 JavaScript 动态计算（因为我不知道某人正在访问网站的视口大小和/或他们是否调整浏览器寡妇的大小）缩略图的高度并将元数据的 div 居中它。

除了一件事之外，这种方法似乎效果很好，我怀疑这是问题所在......？当页面最初加载包含元数据的 div 时，从图像容器的底部开始，然后在图像高度和图像中心由 JavaScript 确定后向上移动。实际上，从用户体验的角度来看，看到这种“打嗝”的发生看起来并不那么好。我想我需要实现某种回调函数或延迟，以便仅在计算图像缩略图高度之后应用应用于元 div 的 CSS。

下面是我的 HTML、CSS 和 JavaScript 的片段，可帮助您了解我的代码发生了什么。如果您需要进一步澄清任何部分，请告诉我：

**HTML**

```
<article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
    <a href="<?php the_permalink(); ?>">
        <div class='meta'>
            <p class='title'><?php get_the_title(); ?></p>
            <p class='author'><?php get_the_author(); ?></p>
        </div>
        <?php the_post_thumbnail('main'); ?>
    </a>
</article> 
```

**CSS（我使用 LESS 以防你看到任何 mixins 或变量）**

```
article {
    width: 100%*(390/1174);
    display: inline-block;
    position: relative;
    z-index: 900;
    .meta {
        width: 100%;
        position: absolute;
        left: 0;
        bottom: 0;
        z-index: 500;
        font-size: 20px;
        line-height: 1em;
        text-align: center;
        .title { 
            margin: 0;
            padding: 0 16px 8px 16px;
            font-size: 1em;
            line-height: 1.15em;
            font-weight: 700;
        }
        .author { 
            .proxima-nova; 
            color: white; 
            margin: 0; 
            font-size: .70em; 
            line-height: .825em;
        }
    }
    a { display: block; }
} 
```

**JavaScript**

```
var article = $('article'),
    meta = $('.meta'),
    meta_height = meta.height(),
    article_height = article.height(),
    meta_center = .5 * meta_height,
    article_center = .5 * article_height,
    center = (article_center - meta_center);
    meta.css('bottom', center);
    setTimeout(function() {
        meta.show();
    }, 500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:54:48.500

您正在使用 php 获取图像。您可以使用`jQuery.ajax()`从图像服务器异步获取图像，然后使用`ajax()`回调方法`done()`，如下例所示：

```
$.ajax({
  url: "http://yourImageServer/image.png"
}).done(function ( data ) {
   // your callback method here
}); 
```

在那里，您可以插入已知图像高度和宽度等的元信息。同时，您可以使用微调器预加载这些 div。

# c# - SQL Server CE：使用脚本生成数据库

> ID：15367089
> 
> 赞同：0
> 
> 时间：2013-03-12T16:42:04.907
> 
> 标签：c#, visual-studio-2008, sql-server-ce, asp.net-3.5

我想使用`SqlCeEngine`该类来构建一个数据库并用表填充它（[如这个问题](https://stackoverflow.com/questions/1487845/create-sql-server-ce-database-file-programmatically)），但使用[ExportSqlCE](http://exportsqlce.codeplex.com/)生成的脚本。

我想知道这是否可以使用`SqlBulkCopy`？[（此处](http://sqlcebulkcopy.codeplex.com/)已复制的 SQL Server CE 版本）。

或者，如果有另一种解决方案可以`.sdf`使用表和约束快速填充数据库文件（28 个表，52 个约束，大多数列不能为空）。

当我的应用程序加载时，我检查数据库文件是否存在。万一该文件丢失（或者在安装后第一次加载程序时），我希望能够重新生成一个空数据库。

[我使用DataPort Console](http://primeworks-mobile.com/Products/DataPortConsole.html)创建了数据库，因为作为我的第一个真正的数据库应用程序，我想以图形方式设计数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:04:00.943

最终，我无法找到复制我想要的功能的解决方案，而是按照[ErikEJ](https://stackoverflow.com/users/183934/erikej)的建议决定实现一系列在负载时运行的脚本。ExportSqlCE对于创建已定义的脚本仍然很有 [用](http://exportsqlce.codeplex.com/)`SQL Server CE database`。

我最终实现了一个`List<string>`，在其中添加了各种脚本。如果我想更新数据库或为数据库的初始版本选择硬编码的“默认”脚本，这允许我选择加载脚本。然后我可以循环列表元素，将`SqlCeCommand command.CommandText`属性更改为列表中的下一个元素。

# asp.net-mvc-3 - 形成 mvc3 razor 部分视图帖子

> ID：15367093
> 
> 赞同：1
> 
> 时间：2013-03-12T16:42:14.120
> 
> 标签：asp.net-mvc-3, razor

我有一个与 BasicInfoModel 关联的 partialView _BasicInfoPartView。此部分视图包含一些输入和下拉列表：

```
public class BasicInfoModel 
{       public string Name { get; set; }
        public string selectedRubric { get; set; }
        public IEnumerable<SelectListItem> Rubrics { get; set; }
} 
```

部分 _BasicInfoPartView.cshtml

```
@model ProjectZeroWebSite.Models.PleGroupModel
@Html.ListBoxFor(m => m.selectedRubric, @Model.Rubrics })
@Html.TextBoxFor(m => m.Name ) 
```

可以在任何页面中的 FORM 中调用此局部视图。只需在页面模型中添加 BasicInfoModel 即可。

```
public class RandomPageModel
{
        public basicInfoModel { get; set; }
        public string info2{ get; set; }
        ...
        public RandomPageModel()
        { this.basicInfoModel = new basicInfoModel ();}
} 
```

随机页面.cshtml

```
@using (Html.BeginForm())
{
    @Html.Partial("_BasicInfoPartView ", @Model.BasicInfoModel)
    @Html.TextBoxFor(m => m.info2)
    ...
    <input type="submit"  />
} 
```

现在的问题是：我可以毫无问题地填充页面。但是当我尝试从模型中检索控制器中的信息时： RandomPageModel.info2 OK！RandomPageModel.BasicInfoModel 为空...

我想我想念数据绑定的概念：我尝试这样做是因为我不想让小型 JS 函数使我的页面超载，也不喜欢复制我的表单（代码维护）的想法。

提前谢谢。

小酒馆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:01:59.757

在这种情况下，您需要使用编辑器模板而不是局部视图。

所以你定义了一个 editorTemplate （强类型）

```
@model BasicInfoModel

@Html.ListBoxFor(m => m.selectedRubric, @Model.Rubrics })
@Html.TextBoxFor(m => m.Name ) 
```

将此编辑器模板命名为与模型相同，并将其放在共享视图文件夹中名为 EditorTemplates 的文件夹中

> ~/Views/Shared/EditorTemplates/BasicInfoModel.cshtml

然后换掉这条线

```
@Html.Partial("_BasicInfoPartView ", @Model.BasicInfoModel) 
```

对于这个

```
@Html.EditorFor(m => m.BasicInfoModel) 
```

# ruby-on-rails - 双多态关联

> ID：15367098
> 
> 赞同：3
> 
> 时间：2013-03-12T16:42:34.703
> 
> 标签：ruby-on-rails, has-many-through, polymorphic-associations

在我的 Rails 应用程序中，我有两个模型： `Person`和`Company`. 我需要指定这些对象的任何对之间的多对多关系。所以我应该可以这样做：

```
@connections = @person.connections 
```

其中`@connections`是`Person`和`Company`对象的数组。

现在我已经`ConnectionBinding`为此创建了模型，但它不能按预期工作：

```
class ConnectionBinding < ActiveRecord::Base
  belongs_to :connect_from, polymorphic: true
  belongs_to :connect_to,   polymorphic: true
end 
```

它认为`ActiveRecord::HasManyThroughAssociationPolymorphicSourceError`例外

有人已经解决了这个问题吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:03:13.443

您需要告诉 ActiveRecord 它正在寻找的关联列。我猜你想要以下内容：

```
class Person < ActiveRecord::Base
  has_many :connection_bindings
  has_many :companies, :through => :connection_bindings
  has_many :people, :through => :connection_bindings
end

class company < ActiveRecord::Base
  has_many :connection_bindings
  has_many :companies, :through => :connection_bindings
  has_many :people, :through => :connection_bindings
end 
```

问题是您有两个表，将 id 放在一列中，Rails 不知道要查找哪个表。

例如，在数据库中任何给定的 connection_binding 行上，connect_from 可以是 company_id 或 person_id，connect_to 也是如此。所以你说：'Hey Rails，加载我关联的 ConnectionBindings'，它得到一行 connect_from 为 11，connect_to 为 12。但它是 Person.find(12) 还是 Company.find(12)？没有办法说！

相反，您必须向 Rails 提供更多信息：

```
class Person < ActiveRecord::Base
  has_many :connection_bindings
  has_many :person_connections, :through => :connection_bindings, :source => :to_connect, :source_type => 'Person'
  has_many :company_connections, :through => :connection_bindings, :source => :to_connect, :source_type => 'Company

  def connections
    person_connections + company_connections
  end
end 
```

您需要在另一端构建它（以及相关的 :from_connect），但这取决于您如何使用这些连接。应该足以让你开始。

它比您在 Ruby 和 Rails 的神奇世界中所习惯的要多得多，但您正在尝试构建一个非常复杂的数据模式。这并不意味着它是不可能的——Rails，作为一个好的框架，不会阻止你做任何你真正想做的事情——但它并不常见到需要一些明确的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T01:13:39.243

感谢克里斯展示这个想法。但我需要做一些改变才能完成这项工作。Chris 示例的问题是，如果我调用`person_connections`方法，它会生成错误的查询。

```
Person.find(720).person_connections 
```

生成此 SQL

```
SELECT  "people".* FROM "people"
INNER JOIN "connection_bindings"
  ON "people"."id" = "connection_bindings"."connect_to_id"
WHERE "connection_bindings"."person_id" = 720
  AND "connection_bindings"."connect_to_type" = 'Person' 
```

那一`person_id`栏应该是`connect_from_id`。所以我需要添加`:as => :connect_from`选项来`has_many :connection_bindings`显示 ActiveRecord 它是一个多态关联。

```
has_many :connection_bindings, :as => :connect_from
has_many :person_connections,  :through => :connection_bindings,
  :source => :connect_to, source_type: 'Person'
has_many :company_connections, :through => :connection_bindings,
  :source => :connect_to, source_type: 'Company' 
```

但这仍然不够。我需要能够获得反向​​连接。那么如果 Person`@a`将连接添加到 Person `@b`？方法连接应该在两个方向`@a.connections`和`@b.connections`.

现在我想我可以通过添加一些额外的关联和聚合方法来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T19:51:17.813

关心：

```
module Linkable
  extend ActiveSupport::Concern

  included do
    has_many :links_to, as: :linkable_to, class_name: 'Link' # [this]->[other object]
    has_many :links_from, as: :linkable_from, class_name: 'Link' # [other object]->[this]
  end
end 
```

链接表：

```
class Link < ActiveRecord::Base

  #The idea for this class is to by a double polymorphic table, linking an object to another object
  belongs_to :linkable_from, :polymorphic => true
  belongs_to :linkable_to, :polymorphic => true
end 
```

# c# - 操作契约定义导致 Windows 服务不响应控制功能

> ID：15367099
> 
> 赞同：0
> 
> 时间：2013-03-12T16:42:38.657
> 
> 标签：c#, multithreading, wcf, service

我一直在开发一个 Windows 服务，其中托管了一个 WCF 服务。在整个开发过程中，我已经能够成功安装和启动我的服务，并在添加功能时对其进行测试。但是，我最近在我的服务合同中添加了一个方法：

```
[OperationContract]
void StartWebsiteProcessing(WebsiteInfo info); 
```

此方法在由 WCF 客户端调用时调用此方法：

```
public void StartWebsiteProcessing(WebsiteInfo info)
{
    Thread t = new Thread(this.AddWebsite);
    t.Start(info);
} 
```

现在，在我安装服务后，当我启动服务时，我会收到以下消息：

“服务没有响应控制功能。”

从那里我开始一一撤消我所做的更改，试图确定是什么原因造成的。我发现如果我从服务合同中删除 StartWebsiteProcessing 方法，我可以再次成功启动服务。

谁能向我解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T11:35:32.497

你有没有试过这个：

```
[OperationContract(IsOneWay=true)]
void StartWebsiteProcessing(WebsiteInfo info); 
```

# google-docs - 从谷歌文档中获取选定的文本

> ID：15367100
> 
> 赞同：2
> 
> 时间：2013-03-12T16:42:41.153
> 
> 标签：google-docs

我正在为我的公司开发一个系统。我在网页上的 iFrame 中打开 Google 文档查看器上的 .doc 文件并编辑该文件。在某些情况下，我需要从谷歌文档（在 iframe 中）复制选定的文本并将其粘贴到文本框（在 iframe 之外）。

那可能吗？

如果我更改所选文本的背景颜色，那也很棒。

非常感谢。

# php - 在 mPDF 生成的文档中使用字体

> ID：15367101
> 
> 赞同：7
> 
> 时间：2013-03-12T16:42:47.620
> 
> 标签：php, fonts, font-face, mpdf

我希望您能帮我解决这个问题，我是第一次处理 mPDF，我认为它很棒，但我想使用与我的网站相同类型的字体显示报告，在其文档中解释了如何实现这一目标，但它似乎仍然不适合我。到目前为止我所做的是：

1.  将 google 的 Open Sans 的 URL 添加到我的文档中，该文档将在它之后生成，`<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>`.
2.  然后我添加了一个样式表文件，其中包含 `<link rel="stylesheet" href="<?php echo base_url(); ?>assets/publicidad/css/reporte.css" type="text/css">` 我已经添加的内部 reporte.css 字体的使用，我有一个使用“Open Sans”字体的定义

    body { font-family: 'Open Sans', Sans-Serif; } 按预期显示字体。

3.  我使用 mPDF 生成 pdf，效果很好，但是当我想显示 Open Sans 作为文档时，它没有显示所需的字体，我从[http://www.fontsquirrel.com](http://www.fontsquirrel.com/fonts/open-sans)
    下载了“Open Sans”的 ttfs 文件[/fonts/open-sans](http://www.fontsquirrel.com/fonts/open-sans)，并添加到 mPDF 目录的 ttfonts 文件夹中，如其文档中所述。

在它之后，我遵循这个清晰的文档[http://mpdf1.com/manual/index.php?tid=453](http://mpdf1.com/manual/index.php?tid=453)，但直到现在我还没有在我的 PDF 文档中显示所需的字体，这是我迄今为止没有做的说“4.要使用特定语言的字体，您还需要编辑配置文件（config_cp.php）；让我们想象Frutiger包含泰语所需的全套字符：”，但我不要认为这是问题，因为我使用的是我放下的默认配置。

```
function pdf_create($html, $filename, $stream = TRUE) {
            require_once(APPPATH . 'helpers/mpdf/mpdf.php');
            $mpdf = new mPDF();
            $mpdf->SetAutoFont();
            $mpdf->WriteHTML($html);
            if ($stream)
            {
                $mpdf->Output($filename . '.pdf', 'D');
            }
            else
            {
                $mpdf->Output('./uploads/temp/' . $filename . '.pdf', 'F');

                return './uploads/temp/' . $filename . '.pdf';
            }
        } 
```

在我的控制器中我这样做。

```
$html = $this->load->view('publicidad/reporte_x_curso', $data, true);
$this->load->helper('mpdf');
pdf_create($html, 'Reporte_por_cursos', true); 
```

（以上内容未被stackverflow编辑器识别）

最后，我到目前为止所做的应该按照文档做的所有事情是：

```
$this->fontdata = array(
    "'Open Sans'" => array(
    'R' => 'OpenSans-Regular.ttf'
    ) 
```

PD：我放单引号是因为我在我的 html 文档中添加了这种方式，但我也尝试不使用它们，但没有成功。我希望你能帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-07-14T15:46:20.620

# 笔记

首先，不要使用**mpdf1.com**网站，它已关闭。使用**[https://github.com/mpdf/mpdf](https://github.com/mpdf/mpdf)**。**版本 6 和 7**有不同的代码

 **# mPDF v6.x 示例

（[来源](https://mpdf.github.io/fonts-languages/fonts-in-mpdf-6-x.html)）

1) 上传**`MyFont.ttf`**到2) 在 数组内部，添加您的：**`/mpdf/ttfonts`**
**`/mpdf/config_fonts.php`****`$this->fontdata`**

```
"my_custom_font" => array( 
        'R' => 'MyFont.ttf',            // Regular - REQUIRED
        'I' => "MyFont-Oblique.ttf",    // Italic  - OPTIONAL
        'B' => "MyFont-Bold.ttf",       // Bold    - OPTIONAL
), 
```

3）然后，无论您在哪里执行自定义脚本，都可以`my_custom_fonttt`在 css 中使用：

```
<?php

$mpdf=new mPDF();
$texttt= '
    <html><head><style>
    body { font-family: "my_custom_font"; }
    </style></head>
    <body>My SAMPLE TEXTTTTT</body>
    </html>';
$mpdf->WriteHTML("$texttt");
$mpdf->Output(dirname(__FILE__).'/new_created_file.pdf','F'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-04T16:41:59.997

我已经解决了我的问题，字体的定义中应该没有空格，所以我在我的 css font-face 声明中替换为“opensans”和

```
$this->fontdata = array(
    "opensans" => array(
    'R' => 'OpenSans-Regular.ttf'
    ) 
```

请注意字体类型（'OpenSans-Regular.ttf'）应该在 mpdf 文件夹的 ttfonts 文件夹中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-07T06:27:38.877

我遇到了同样的问题：确保在定义字体名称时没有空格，保持小写。

它对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-30T17:23:50.410

Aaargh - 字体 php 文件在 FPDF 版本之间发生了变化。确保使用正确的。**

# wpf - WPF 自动更改宽度和高度

> ID：15367103
> 
> 赞同：0
> 
> 时间：2013-03-12T16:42:48.580
> 
> 标签：wpf, layout

我有媒体元素、图像、两个选框文本和一行文本。如何设置自动更改高度和宽度？例如; WrapPanel 或 Viewbow，不包括。

实际上，我已经完成了，但我使用了网格行和列。当我将分辨率更改为良好的分辨率时；特别是文字不会更大。会更大，但不会像它应该的那样。

我真的厌倦了 WPF 布局！我不明白:)

编辑：我可以使用 DevExpress WPF 产品，我有许可证。

谢谢并恭祝安康。

编辑：当前 XAML：

```
 <RowDefinition Height="422" />

        <RowDefinition Height="auto" MinHeight="70"/>
        <!--<RowDefinition Height="121*"/>-->
        <RowDefinition/>

    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />

        <ColumnDefinition Width="424*"/>
        <ColumnDefinition Width="129*"/>
    </Grid.ColumnDefinitions>

    <MediaElement Grid.Column="1" Margin="10,20
                   ,0,0"
        Name="myMediaElement" Stretch="Fill"
        Grid.RowSpan="2"   >
        <MediaElement.Triggers>
            <EventTrigger RoutedEvent="MediaElement.Loaded">
                <EventTrigger.Actions>
                    <BeginStoryboard>
                        <Storyboard>
                            <MediaTimeline Source="C:\a\p.mov" Storyboard.TargetName="myMediaElement"  
             RepeatBehavior="Forever" />

                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger.Actions>
            </EventTrigger>
        </MediaElement.Triggers>
        <MediaElement.Effect>
            <DropShadowEffect BlurRadius="6" Color="#FFD8D8D8"/>
        </MediaElement.Effect>
    </MediaElement>
    <StackPanel   Grid.Column="2" Grid.RowSpan="3">
        <Image  x:Name="imgLogo"  Source="C:\a\a.png"  Margin="0,10,0,0" MaxHeight="200" MaxWidth="200" >
            <Image.Effect>
                <DropShadowEffect Color="#FFD6CDCD"/>
            </Image.Effect>
        </Image> 
```

DX 不支持这个主题。特别是文字对我来说真的是个问题。

# windows - 插入而不从 CDatabase 或 CRecordset 派生

> ID：15367104
> 
> 赞同：0
> 
> 时间：2013-03-12T16:42:48.757
> 
> 标签：windows, visual-studio-2010, mfc, odbc

我正在使用`CDatabase`and`CRecordset`直接（不从此类派生）。例如，`SELECT`语句如下所示：

```
CDatabase db;
db.OpenEx(_T("DSN=mydatabase"));
CRecordset rs(&db);
rs.Open(CRecordset::forwardOnly, _T("SELECT id, name FROM user"));
while (!rs.IsEOF()) {
    CString name; // Just for demonstration
    rs.GetFieldValue(1, name);
} 
```

`INSERT`用这种方法做or`UPDATE`陈述的正确方法是什么？

*   没有`CRecordset::SetFieldValue`
*   我可以构建整个 SQL 字符串（包括值）并执行`CDatabase::ExecuteSQL`，但我不喜欢这种解决方案，更喜欢以某种方式绑定参数。

# android - Android Google Play - 我应该许可我的付费应用还是可选？

> ID：15367110
> 
> 赞同：1
> 
> 时间：2013-03-12T16:43:13.367
> 
> 标签：android, google-play, android-lvl

使用 Google Play 时是否可以选择向我的付费应用添加许可，还是需要我在上传前完成？

当我现在尝试上传应用程序时，它说它无法识别。我应该在上传之前添加许可吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:45:19.200

可选但必不可少的...请参阅[许可 Android](http://developer.android.com/google/play/licensing/index.html)

您当然可以在没有许可的情况下发布付费应用程序，但不鼓励您的钱包！

# javascript - 父母的javascript父母

> ID：15367111
> 
> 赞同：8
> 
> 时间：2013-03-12T16:43:15.253
> 
> 标签：javascript, parent

在javascript中有一种简单的方法来定位父母的父母吗？

我使用`this.parentNode`作为函数的元素来选择父级，我尝试了`this.parent.parentNode`and `this.parentNode.parentNode`，但都简单地返回了直接父级。
我试图影响围绕“this”的 div 周围的 div。我确实设法使用一个简单的循环语句使其工作，该循环语句重复 parentNode 选择两次，但我认为有更好的方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T16:44:12.603

`this.parentNode.parentNode`是正确的，您必须（道歉！）在您尝试的测试中出现错误。

示例：[Live Copy](http://jsbin.com/ivozib/1) | [来源](http://jsbin.com/ivozib/1/edit)

HTML：

```
<div id="outermost">Outermost
  <div id="inner1">Inner 1
    <div id="inner2">Inner 2</div>
  </div>
</div> 
```

JavaScript：

```
var inner2 = document.getElementById("inner2");

display("inner2.id = " + inner2.id);
display("inner2.parentNode.id = " + inner2.parentNode.id);
display("inner2.parentNode.parentNode.id = " + inner2.parentNode.parentNode.id);

display("Try clicking the blue 'inner2' above");

inner2.onclick = function(e) {
  display("Click: this.id = " + this.id);
  if (this.parentNode) {
    display("Click: this.parentNode.id = " + this.parentNode.id);
    if (this.parentNode.parentNode) {
      display("Click: this.parentNode.parentNode.id = " + this.parentNode.parentNode.id);
    }
  }
};

function display(msg) {
  var p = document.createElement('p');
  p.innerHTML = String(msg);
  document.body.appendChild(p);
} 
```

输出（假设按指示单击）：

```
内部 2.id = 内部 2
inner2.parentNode.id = inner1
inner2.parentNode.parentNode.id = 最外层
尝试点击上方的蓝色“inner2”
点击：e.target.id = inner2
点击：e.target.parentNode.id = inner1
点击：e.target.parentNode.parentNode.id = 最外层
```

# php - Codeigniter，扩展模型时使用相同的数据库连接

> ID：15367112
> 
> 赞同：2
> 
> 时间：2013-03-12T16:43:22.620
> 
> 标签：php, oop, codeigniter

一般来说，框架、MVC 和 OOP 相对较新……所以这是一个基本问题：

如果我有这样的帐户模型：

```
class Account_Model extends CI_Model
{
    public function __construct()
    {
        parent::__construct();
        $this->sybase = $this->load->database( 'sybase', TRUE );
    }
} 
```

然后控制器调用**两个**模型，它们都从 Account 模型扩展而来：

```
class Account_List_Model extends Account_Model
{
    public function __construct()
    {
        parent::__construct();
        $sql = "SELECT ....";
        return $this->sybase->query( $sql )->result();
    }
} 
```

和

```
class Account_Details_Model extends Account_Model
{
    public function __construct()
    {
        parent::__construct();
        $sql = "SELECT ....";
        return $this->sybase->query( $sql )->result();
    }
} 
```

我的问题是他们都使用相同的连接吗？我计划以这种方式使用相同的连接，但现在我认为由于父级被构造了两次，它将使用两个单独的连接。也许我在想这个。也许我在想这个。如果不是，单例是唯一的答案还是有其他方法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:51:04.457

CodeIgniter 在您加载 Database 类时打开连接，因此只有一个连接在使用（除非您连接到两个或多个数据库）。

在您的模型中使用多种方法也是可以的。我通常使用一个与特定数据库表关联的模型（如果我使用与密切相关的表的连接，有时会不止一个）。

我认为你很适合继续下去。

# iphone - Cocos2d - 缩放场景以适应屏幕

> ID：15367113
> 
> 赞同：1
> 
> 时间：2013-03-12T16:43:28.750
> 
> 标签：iphone, objective-c, macos, cocos2d-iphone

我正在使用`CCTMXTiledMap`图层。

它不完全适合屏幕。屏幕顶部有一个相当大的边框。
如何缩放场景以完全适合所有孩子的屏幕尺寸？

我看到你可以使用相机：

```
[myLayer.camera setEyeX:0 eyeY:0 eyeZ:zoomValue]; 
```

但这不推荐，并且由于某种原因甚至不起作用。我更改了值，但没有任何反应。除非我将`eyeZ`值设置为`0`，否则图层就会消失。

# eclipse - 使用 eclipse 作为源代码控制的 TFS - 如何下载共享项目？

> ID：15367114
> 
> 赞同：0
> 
> 时间：2013-03-12T16:43:29.050
> 
> 标签：eclipse, version-control, tfs, ide

我正在尝试将 TFS 与 eclipse 一起用作源代码控制。我正在开发一个网络应用程序。所以我想知道我的团队如何在他们的网络服务器文件夹（Apache httpd - htdocs 文件夹）中下载共享项目，以便他们可以在浏览器中测试和运行网页。内部浏览器无法使用 js/extjs 文件（此处的详细信息：[在 Eclipse 上运行网页（使用 Extjs）](https://stackoverflow.com/questions/15346809/run-web-pages-with-extjs-on-eclipse)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:38:09.310

听起来您想运行一个持续集成构建以将其部署到中心位置进行测试。

这个想法是，当您签入工作时，TFS 将触发构建。该构建应配置为将网站部署到适当的测试服务器。

从那里，您的团队可以访问他们需要的任何内容。

# wpf - 在 WPF 窗口上加载多个用户控件

> ID：15367115
> 
> 赞同：0
> 
> 时间：2013-03-12T16:43:33.040
> 
> 标签：wpf, user-controls

我有一个窗口，我在其上加载了一个用户控件，比如 Control1。现在，如果用户单击某个新的 UserControl 按钮，则 Control2 应该加载到 Window 上，并且 Control1 应该消失。同样在这里，当用户单击下一个 UserControl 按钮时，应该加载 Control3 并且 Control2 应该消失。也应该可以返回，例如从 Control3 到 Control2。

在我的 Window 上加载第一个主 UserControl 很容易，我已经做得足够多了。但我被困在如何实现用户控件之间的“导航”。以前从来没有做过这样的事情。我将 MVVM 用于我的 WPF 应用程序。有人有什么想法吗？

谢谢。

编辑：有了 Rachel 的回答，我现在在命令中执行此操作以切换控件：在 MainWindow 中：

```
<DataTemplate DataType="{x:Type ViewModel:MainControlViewModel}">
<my:MainControl />
</DataTemplate>
<DataTemplate DataType="{x:Type ViewModel:ProductsControlViewModel}">
<my:ProductsControl />
</DataTemplate>

 <Grid>
<ContentControl Content="{Binding CurrentPageViewModel, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
</Grid> 
```

在 MainControlViewModel 中和 ProductsControl 中几乎相同：

```
 public ICommand LoadProductControlCommand
{
  get
  {
    if (_loadProductControl == null)
      _loadProductControl = new RelayCommand(LoadProductControl);
    return _loadProductControl;
  }
}

private void LoadProductControl(object notUsed)
{
  _mainWindowViewModel = (MainWindowViewModel) Application.Current.MainWindow.DataContext;
  _mainWindowViewModel.CurrentPageViewModel = new ProductsControlViewModel();
} 
```

这是一个好方法还是我应该做不同的事情？因为在我的应用程序中，按钮位于控件上，而不是主窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:51:47.233

像这样在 MainWindow 中放置一个 ContentPresenter：

```
<ContentPresenter Content="{Binding ActiveWidget}"/> 
```

然后在 ViewModel

```
public ViewModelBase ActiveWidget {get;set;} // Don't forget INotifyPropertyChanged!! 
```

那么您必须`DataTemplate`为每个s 创建一个`ViewModel`适当的实例`UserControl`。有关此问题的通用解决方案，请参阅[本文](http://www.codeproject.com/Articles/444371/Creating-WPF-Data-Templates-in-Code-The-Right-Way)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:34:57.770

Rachel 的评论帮助我找到了解决方案。

# php - 使用 PHP 从字符串中删除特定域中的图像

> ID：15367121
> 
> 赞同：0
> 
> 时间：2013-03-12T16:43:44.320
> 
> 标签：php, regex

我对正则表达式不是很好，所以我希望能得到一些帮助。基本上我需要删除从字符串中的特定域插入的图像。该字符串可以包含来自其他域的需要保留的图像，以及也需要保留的文本。

我已经尝试过像这样使用正则表达式（可以肯定我仍然很遥远）：

```
$content = preg_replace("/http://www.theblacklisteddomain.com[^>]+\>/i", " ", $content); 
```

我对不涉及加载库的正则表达式之外的其他解决方案持开放态度。它需要发生在服务器端，我知道使用 jQuery 或 vanilla JS 会容易得多。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:48:16.563

您需要`/`像这样转义字符：

```
 $content = preg_replace('/<img.*src="http:\/\/www.theblacklisteddomain.com(.*?)".*\/?>/', ' ', $content); 
```

请参阅[ideone 示例](http://ideone.com/SeOaXL)。

顺便说一句，这不是[解析 html 的好方法](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)。

# c# - datagridview 中的复杂布局

> ID：15367122
> 
> 赞同：4
> 
> 时间：2013-03-12T16:43:58.953
> 
> 标签：c#, .net, winforms, datagridview

我正在尝试完成这样的事情： ![样品清单](../Images/d1681b22fa1e62d8303c867d316e6713.png)

这可能与 datagridview 吗？或 ListView，或 Windows 窗体中的任何其他组件？注意彼此重叠的填充和（最重要的）标签。

如何在 C# .NET 中完成此任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T16:51:13.700

您必须`UserControl`为每个项目创建一个，然后您可以使用[DataRepeater](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.datarepeater.aspx)或[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)。

我过去用 WinForms 做过类似的事情，所以你可以确定它是可行的。看起来 WPF 已经抹去了我以前对 WinForms 的所有了解，有点像病毒 :)

# visual-studio-2012 - Less 不适用于 Visual Studio 2012 中的 WebEssentials

> ID：15367129
> 
> 赞同：17
> 
> 时间：2013-03-12T16:44:23.883
> 
> 标签：visual-studio-2012, less, web-essentials

当我创建一个带有 .less 扩展名的 less 文件时，WebEssentials 不会显示更少的语法（智能，彩色语法）并且不会出现预览页面，永远不知道更少的文件！

还启用了 WebEssentials 设置中的所有 less 选项。

什么是问题？

**解决方案：** 安装 Asp.Net Web Tools 2012.2 没有解决我的问题。

我通过从 => [http://go.microsoft.com/fwlink/?LinkID=282228安装 Web 开发人员工具 2012.2 解决了问题](http://go.microsoft.com/fwlink/?LinkID=282228)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T22:55:41.270

您需要安装“ASP.NET and Web Tools 2012.2”才能在VS中点亮LESS编辑体验。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-18T20:52:40.250

我通过安装[Web Developer Tools 2012.2解决了我的问题](http://go.microsoft.com/fwlink/?LinkID=282228)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-14T21:42:04.513

我也无法让 VStudio 2012 识别 .less 文件。最后，我去了*工具...扩展和更新*...。然后我通过单击禁用按钮禁用了 Web Essentials 插件（见图）。 ![在此处输入图像描述](../Images/446231e58e17a24fb006599341822254.png)

之后，Visual Studio 会询问您是否要重新启动。单击“是”按钮。接下来回到*工具...扩展和更新...*

现在，继续下去，进入 Web Essentials 项目并选择它。您现在可以单击*启用*按钮并再次重新启动。

这一次，当它重新启动我的 .less 文件时，现在显示了分屏，但我仍然看不到它在左侧生成的 .css 文件（见图）。我在解决方案资源管理器中单击了“显示所有文件”，但它们仍然没有显示。最后，我双击 .less 文件，它在左侧生成了分屏，并显示了生成的文件列表。

![.less 生成的文件](../Images/9693ca942bb8a648e559806b36b15c0a.png)

# javascript - 自版本 18 以来的 Firefox 错误

> ID：15367130
> 
> 赞同：0
> 
> 时间：2013-03-12T16:44:24.297
> 
> 标签：javascript, jquery, jsf, firefox, richfaces

我正在使用 Java Server Faces、JQuery 和 JavaScript。我想我在 Firefox 中检测到了一个错误。此 JavaScript 代码被触发：

```
var list = jQuery('input.myclass');
var item = list.eq(0);
item.click();
top.location.reload(true); 
```

单击将点击与我的操作方法“mybean.myaction()”相关的 a4j:commandButton。如果我使用的是 Firefox 19 或 Firefox 18，则可能会单击该按钮。无论如何，页面的重新加载发生得太快了。我可以通过在 mybean.myaction() 中设置一个 Eclipse 断点来看到这一点——断点永远不会到达。

如果我使用的是 Firefox 17，InternetExplorer 一切都像预期的那样工作，Javascript 被触发，点击发生，bean-method 调整 bean 的状态并重新加载页面。

提前感谢您给我一些想法如何澄清这种行为的原因。如果合适，我将在 Firefox bugzilla 中提交一个错误。

更新：这是被 JQuery 点击的 a4j:commandButton；

```
<a4j:commandButton action="#{mybean.myaction}" value="setMyVal" styleClass="hidden myclass">
    <a4j:actionparam name="myparamname" value="MY_VAL" assignTo="#{mybean.myattr}" /></a4j:commandButton> 
```

UPDATE-2：我到处玩来隔离问题。我在块周围放置了一个 try-catch 语句，此外，我替换了 reload()，我将能够遵循 javascript 执行。现在，我可以看到，如果我输入 top.location.host，我将跳转到 catch-block，但我的 errorText 是“未定义”。这怎么可能发生？我该怎么做才能找到更多关于这个异常的信息？

```
try{ ...
    item.click();
    // Firefox-Bug in Version ab 18.0.1
    var res = top.location.host; //top.location.reload(true);
} catch (e) {
    var errorText = e.message; // errorText is undefined! 
    alert("Exception: " + errorText);
} 
```

UPDATE-3：它变得越来越陌生......如果我在 item.click() 和 top.location.reload(true) 之间设置一个 Firebug-Breakpoint; 一切顺利！因此，问题可能出在 a4j 上。也许今天退出是明智之举。感谢您迄今为止的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:26:35.310

这不是问题的答案，而是关于如何解决问题的建议。因此，您可以在操作完成后使用 commandButton 的 oncomplete 属性重新加载页面：

```
<a4j:commandButton action="#{mybean.myaction}" value="setMyVal" styleClass="hidden myclass" oncomplete="top.location.reload(true);">
    <a4j:actionparam name="myparamname" value="MY_VAL" assignTo="#{mybean.myattr}" />   
</a4j:commandButton> 
```

这样您就可以序列化事件：首先调用该操作，并且仅在重新加载页面之后。当然，您需要`top.location.reload(true);`从您的 javascript 代码中删除。

**编辑：**更多地思考这个问题......在我看来这不是一个错误。Firefox 不需要在任何地方等待服务器上处理您的点击事件（对于 Richfaces 来说是一个复杂的操作）。它将 click 事件分派给 Richfaces javascript 并继续执行下一条语句：`top.location.reload(true);`. 你需要防止这个问题。

# php - PHP 问题“无法发送会话 cookie”

> ID：15367131
> 
> 赞同：2
> 
> 时间：2013-03-12T16:44:25.163
> 
> 标签：php, session, cookies

请在附件中找到我的代码：

```
<?PHP 
session_start();
if (isset($_POST["usernameform"])){ 

$username = $_POST['usernameform'];
$password1 = $_POST['passwordform'];

$user_name = "XXXX";
$password = "XXXXX";
$database = "XXX";
$server = "XXXX";

$db_handle = mysql_connect($server, $user_name, $password);
$db_found = mysql_select_db($database, $db_handle);

$SQL = "SELECT * FROM login WHERE Username = '$username' AND Password = '$password1' "; //grab all the records from table
$result = mysql_query($SQL)
    or die("Error:" . mysql_error());

if (mysql_num_rows($result) > 0){ //if username and password match return number of rows is always 1

$_SESSION['login'] = $username; //by placing this in session it will remember this variable on the page it directs too

while ( $row = mysql_fetch_assoc($result) ){ //lays out array in $result
$_SESSION['ID'] = $row['ID']; //selects from list of array ID
$_SESSION['firstname'] = $row['First_Name'];
echo'<script> window.location="page1.php"; </script> ';

}
} else {
$_SESSION['login'] = '';
print('
<script type="text/javascript"> //place html script for alert. Use single comma for print command here.
    alert("Sorry, your username or password could not be recognized")
</script>
');
session_destroy();
}
}
?> 
```

尽管该代码在我的本地主机（wampserver）上运行良好，但它在我的主机上不起作用，并且出现错误：

> 警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由第 2 行 /.../vhindex.php 中的（输出开始于 /.../vhindex.php:1）发送
> 
> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 第 2 行 /.../vhindex.php 中的标头已发送（输出开始于 /.../vhindex.php:1）

代码已放置在 PHP 块的`session_start();`顶部，在任何 HTML 输出之前，我完全被难住了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T16:55:16.887

*   下载[Notepad++](http://notepad-plus-plus.org/)并打开文件，删除前面的所有花哨的字符`<?PHP`
*   确保在`<?PHP`.
    *   在 Notepad++ 中单击`Encoding`，然后`UTF-8 without BOM`将文件转换为不带 BOM 的 UTF-8，然后保存。
*   为了安全起见，还要添加`ob_start();`之前。`session_start();`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-10T13:36:08.513

如果你从 vhindex.php 加载这个 -.php 文件。确保以正确的顺序完成此操作。例如。require_once'handle-user-login.php'; callToYourFunction();

如果您的会话已经发送，您会收到此警告。（是的，就像错误代码所说的那样）。

# jquery - 使用 jQuery 动态更改 AddThis url

> ID：15367134
> 
> 赞同：17
> 
> 时间：2013-03-12T16:44:34.373
> 
> 标签：jquery, addthis

我正在尝试动态更改 addthis 发送的 URL。当用户更改元素时，它会更新包含自定义 url 的文本区域，以便他们可以返回到该 url 并继续/查看他们的工作。

我正在创建一个 addthis 按钮（来自他们的 API 文档）：

```
var addthis_share = {url:"http://www.johndoe.com"}
$(document).ready(function(){
    var tbx = document.getElementById("toolbox"),
    svcs = {email: 'Email', print: 'Print', facebook: 'Facebook', expanded: 'More'};
    for (var s in svcs) {
        tbx.innerHTML += '<a class="addthis_button_'+s+'">'+svcs[s]+'</a>';
    }
    addthis.toolbox("#toolbox");
}); 
```

然后，当更新 url 时，我尝试更新 addthis 共享 URL，如下所示：

```
function updateURL(){
    ...get some variables here and generate a new url
    var newURL="http://the.url.i.want.to.share.com";
    $('#tagUrl').val(newURL);
    //addthis_share = {url:newURL}
    addthis_share = {url:newURL}
    addthis.toolbox("#toolbox");
} 
```

原始按钮正在生成并包含正确的 url，但是当 url 更新函数执行时 addthis 共享 url 没有得到更新。如何强制它更新 addthis url？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-09T06:20:01.393

如果您想在加载 html 后更改 addthis url（在 ajax 或某些用户事件的情况下），请使用以下 hack 。Addthis apis 像在 `[09/04/13 11:42:24 AM]`阳光明媚的 jhunjhunwala 上一样被破坏：

```
addthis.update('share', 'url', 'http://www.sourcen.com'); 
addthis.url = "http://www.sourcen.com";                
addthis.toolbox(".addthis_toolbox"); 
```

[http://www.sourcen.com](http://www.sourcen.com) ---> 新网址

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-17T01:50:26.767

就这么简单：

```
addthis.update('share', 'url', "http://www.example.com");
addthis.update('share', 'title', "Example Domain Title");
addthis.update('share', 'description', "Hello, I am a description"); 
```

干杯，加里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-25T11:20:34.900

**自定义按钮：**

```
<a class="addthis_button_compact" >
   <img src="./images/share.png" width="36" height="36" border="0" alt="Share" />
</a> 
```

**头部：**

```
<meta property="og:title" content="YOUR TITLE" />
<meta property="og:description" content="YOUR DESCRIPTION" />
<meta property="og:image" content="YOUR IMAGE URL" /> 
```

**正文部分：就我而言，我使用的是 php，我像这样设置正文属性。**

```
<body
      data-url="<?php echo basename($_SERVER['REQUEST_URI']); ?>"
      data-title="<?php echo $info->record_info->brand; ?>"
      data-description="<?php echo $info->record_info->description; ?>"
      data-media="<?php echo ./uploads/logos/<?php echo $info->record_info->logo; ?>"
> 
```

**动态更新内容（JS 部分）：**

```
<script>
    addthis.update('share', 'url', $('body').data('url')); // will set the URL
    addthis.update('share', 'title', $('body').data('title')); // will set the title
    addthis.update('share', 'description', $('body').data('description')); // will set the description
    addthis.update('share', 'media', $('body').data('media')); // will set the image if you are sharing
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T18:42:19.217

AddThis 提供 addthis.update("share", "url", value) 函数（但它在 IE8 中是一个 bug 函数）；试试这个：

```
for(var i = 0; i < addthis.links.length; i++){
    addthis.links[i].share.url= "new url";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-03T16:29:21.453

```
<span id="share-obj" addthis:url="" addthis:title=""></span>

<script type="text/javascript">
    var shareConfig = {url: '', title: ''};

    addthis.button('#share-obj', {}, shareConfig);

    addthis.addEventListener('addthis.menu.open', function(event){
        if ( ! event.data.element.isSameNode($('#share-obj')[0])) {
            return;
        }

        event.data.share.title = shareConfig.title;
        event.data.share.url = shareConfig.url;
    });

    // in updateURL() or any other place during runtime...
    function updateURL() {
        shareConfig.url = 'http://different.url';
        shareConfig.title = 'Title changed dynamically...';
    }
</script> 
```

我使用了一个全局变量`shareConfig`来跟踪 URL 和标题配置。我在网页中有多个 addthis 按钮，每个按钮共享不同的内容。因此我添加了一个`isSameNode`以确保我只更新我想要的按钮。

虽然 URL 和标题是动态更改的，但`addthis:url`和`addthis:title`属性必须存在于按钮 ( `<span>`) 中，否则将不起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-04T13:50:31.200

只是现在工作

```
window.addthis.layers.refresh('new_url', 'new_title'); 
```

应该不存在其他配置（如 dom 属性）应该不存在

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-24T15:30:47.183

Step-1: 准备要加载其他 HTML 的 ajax 内容；

```
<div class="addthis_sharing_toolbox-CUSTOM" data-url="<?php my_dynamic_link(); ?>" data-title="<?php my_dynamic_title(); ?>">
    <a class="addthis_button_email" style="cursor:pointer"></a>
    <a class="addthis_button_facebook" style="cursor:pointer"></a>
    <a class="addthis_button_twitter" style="cursor:pointer"></a>
    <a class="addthis_button_linkedin" style="cursor:pointer"></a>
</div> 
```

第 2 步：准备我的 fancybox ajax 设置；

```
$('.popUpBtn').fancybox({
    //....other fancybox settings can go here...
    //....
    afterShow   : function(current, previous){
        //addthis.init();
        addthis.update('share', 'url', $('.fancybox-inner .addthis_sharing_toolbox-CUSTOM').data('url'));
        addthis.update('share', 'title', $('.fancybox-inner .addthis_sharing_toolbox-CUSTOM').data('title'));
        //addthis.update('share', 'description', "Hello, I am a description");
        addthis.toolbox('.addthis_sharing_toolbox-CUSTOM'); //-->Important: this selector should not be anything from the addthis settings page; We can choose any other names like normal selectors;
    }
}); 
```

“afterShow()”函数中的上述行很重要，请注意；

# php - NSURLConnection 在返回响应之前等待服务器完成处理 - 浏览器不会

> ID：15367138
> 
> 赞同：2
> 
> 时间：2013-03-12T16:44:47.183
> 
> 标签：php, ios, xcode, nsurlconnection, nsurlrequest

我已经构建了一个经常通过 NSURLConnection 连接到我的服务器的 iOS 应用程序。这是一个非常标准的设置；应用程序向服务器发送各种信息，服务器根据收到的信息返回 JSON 响应。

在我构建的一个新功能中 - 它需要一个特定的 PHP 脚本来进行大量处理，而不是在服务器完成后给应用程序一个响应，我想在它开始处理之前给应用程序一个响应 -这是我无法实现的。

PHP的基本概要如下：

```
<?
echo "Output buffering is " . ini_get('output_buffering') . "<br />";
// NM testing ob buffer technique

ob_start(); 

$profiles_ar = array(
    "reach" => 10,
);

$return_ar = array(
    "success"   => $profiles_ar['reach'],
);

echo json_encode($return_ar);                   // Note the buffer must be "filled" with 4096 characters (bytes?) for ob_flush() to work before sleep() occurs.

for($i = 0; $i < 5000; $i++)
{
    echo " ";
    ob_flush(); flush;
}

echo $buffer;

ob_flush();

flush();

ob_end_flush();

for($i=0;$i < $profiles_ar['reach']; $i++)
{
   sleep(1);
}

echo "finshed: ".$i;

ob_flush();

flush();

ob_end_flush();

?> 
```

上面的脚本在浏览器中运行得非常好——立即输出 {"success":10}。但是，如果从我的 iOS 应用程序访问此脚本，则在 for 循环完成后会收到 {"success":10}。

关于如何解决这个问题的任何想法？任何帮助将非常感激。

# rebol - 在 Rebol 中获取对封闭列表/块的引用

> ID：15367142
> 
> 赞同：0
> 
> 时间：2013-03-12T16:44:56.110
> 
> 标签：rebol, rebol3, rebol2

给定一个子列表，有没有办法获得对它的父/封闭列表/块的引用？例如：

```
fs: [
 usr [
  local [
   bin []
  ]
  share []
 ]
 bin []
]

l: fs/usr/local ;grab a sublist
p: none ;now grab l's parent (which is fs/usr) without hardcoding the path 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:10:31.653

块没有“父”引用！系列，因为它可以从多个其他块中引用！系列，所以在这种情况下，“父母”的概念是没有意义的。

但是，您可以在需要时在块中手动添加反向引用（然后在 PROBE-ing 或 MOLD-ing “子”块时要小心，这将导致取消引用指向的块，从而导致更冗长的结果比你想要的）。

提示：我有时会使用“隐藏”标头为块值添加反向引用（只需移动块偏移量即可传递您想要隐藏的值）。它是 PROBE-resistant 和方便的，但不能序列化（例如在磁盘上），而无需编写自己的特定序列化例程来适当地处理这些反向引用（意味着通常用非序列值替换它们：整数、单词、问题，标签......任何允许您在加载后重建该链接）。

例如：

```
>> x: [1 2 3]
== [1 2 3]
>> y: [a b c]
== [a b c]
>> insert/only x y            ; insert a reference to y in x
== [1 2 3]
>> x
== [[a b c] 1 2 3]            ; y reference is at first position
>> x: next x                  ; let's hide it now
== [1 2 3]
>> x
== [1 2 3]
>> x/-1                       ; here is how to retrieve our "hidden" header
== [a b c] 
```

*请注意 /-1 快捷方式目前在 R3 中不像在 R2 中那样工作。*

因此，对于上面您自己的代码示例，您需要创建一个函数来深入您的初始块结构并插入那些隐藏的反向引用，以便您可以在需要时轻松访问它们。这是处理您的结构的示例代码：

```
insert-back-ref: func [blk [block!] parent [block! none!]][
    if parent [                     ;-- no processing if root call
        insert/only blk next head parent ;-- insert the back-reference in child
        parent/1: blk: next blk     ;-- reset the parent reference to child to
    ]                               ;-- point after the back-ref (and hide it)
    forall blk [
        if block? blk/1 [              ;-- if a child block is found
            insert-back-ref blk/1 blk  ;-- process its content recursively              
        ]
    ]
]

insert-back-ref fs none            ;-- pass none as root parent

?? fs
l: fs/usr/local
?? l
p: l/-1
?? p
p: p/-1
?? p 
```

这将输出：

```
fs: [
    usr [
        local [
            bin []
        ]
        share []
    ]
    bin []
]
l: [
    bin []
]
p: [
    local [
        bin []
    ]
    share []
]
p: [[
        local [
            bin []
        ]
        share []
    ]
    bin []
] 
```

实际上，我们使用嵌套块引用创建了一个图形结构，可以使用内置的系列动作和路径非常简单地进行导航。

# javascript - clearInterval 函数不适用于backbone.js

> ID：15367147
> 
> 赞同：0
> 
> 时间：2013-03-12T16:45:05.333
> 
> 标签：javascript, backbone.js

这段代码有什么问题？

`setInterval()`不停止。这是一个无限循环。

这是视图的代码。

```
var chat = require('core/chat');
var Backbone = require('backbone');
var $ = require('jquery');
var agentOfferTemplate = require('hbs!templates/agent-offer');
var contador = 20;
var intervalID;

AgentOfferView = Backbone.View.extend({

    template : agentOfferTemplate,

    initialize : function() {
        this.timeAccept();
    }, 

    render : function() {
            this.$el.append(this.template(this.model.toJSON()));
            return this;
        },

    timeAccept : function(){ 
        if (contador > 0){
            $('#tempo').html(contador); 
            $('#barra-interna').css('width', contador * 10);
            intervalID = setInterval(this.timeAccept, 1000);                
            contador = contador - 1;
        }
        else {
            window.clearInterval(intervalID);
            intervalID = null;
            $('#countdown-container').hide();
    contador = 20;                 
        }
    }

});

 return AgentOfferView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:49:21.570

当使用`setTimeout`或调用函数时`setInterval`，`this`关键字失去其引用（函数在新上下文中调用）。`this`一般来说，将引用`null`（在严格模式下）或全局对象。
阅读MDN 上标题为[*“this”问题的部分以获取更多详细信息。*](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)基本上，您将一个函数的引用传递给`window.setInterval`，该函数在函数的上下文中调用该`setInterval`函数，这显然是`window`......由于全局对象显然没有`timeAccept`方法，因此您的 timout 循环运行一次，而不是20 次。就这么简单。
解决 IMO 问题的最快方法是使用闭包，并将整个上下文传递给区间函数：谢天谢地，这是一个简单的解决方法：

```
 timeAccept : function()
    { 
        if (contador > 0)
        {
            $('#tempo').html(contador);
            $('#barra-interna').css('width', contador * 10);
            intervalID = setTimeout((function(context)
            {//pass current this reference to closure
                return function()
                {//instead of this, use context
                        setInterval(context.timeAccept, 1000);
                };
            }(this)),1000);
            contador--;
        }
        else
        {
            clearTimeout(intervalID);
            intervalID = null;
            $('#countdown-container').hide();
            contador = 20;                 
    } 
```

间隔是一遍又一遍地调用给定函数的东西，每 X 毫秒。查看您的代码，您可能想要使用`setTimout`，它只调用一次函数。
就目前而言，您正在创建 20 个间隔，每个间隔每秒调用相同的函数。即使`contador >= 0`，间隔继续调用该函数。

考虑以下示例：

```
var intervalId = setInterval(function()
{
    console.log('You\'ll see this appear every second');
    console.log('This interval has an ID, and it\'s: ' + intervalId);
},1000);

var timeout = setTimeout(function()
{
    console.log('This will only appear once, after 1000ms');
    console.log('A timeout has an ID, too: ' + timeout);
},1000);

//using the ID's you can cancel both the timeout and the interval using these lines:
clearInterval(intervalId);
clearTimeout(timeout);//usefull if you want to cancel the delayed function call... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:45:40.793

我解决了。

```
timeAccept : function(){ 
        var intervalId = setInterval(
            function(){
                if (contador > 0){
                    $('#tempo').html(contador); 
                    $('#barra-interna').css('width', contador * 10);
                    contador--;
                }else{
                    clearInterval(intervalId);
                    $('#countdown-container').hide();
                    contador = 20;
                }
            }, 1000);
    } 
```

这种方式效果很好。

# angularjs-directive - Angularjs：基于元素的指令通信

> ID：15367151
> 
> 赞同：0
> 
> 时间：2013-03-12T16:45:14.670
> 
> 标签：angularjs-directive

我需要有两个基于元素的指令。

两者都有自己的用户界面，因此我使用了限制：“E”

我需要一种将数据从一个/或多个指令传递到另一个指令的方法

发送数据的两个指令位于两个不同的控制器中（一个在页头，一个在页体），因此尝试使用

```
scope: {
    onNotify : "&"
} 
```

由于范围不同，因此变得混乱。

我能想到的最好的方法是“消息总线”模式。我介绍了第三个（基于属性的）指令，它公开了一个“api”

```
api = {
  addListener : function(event, fn),
  publish : function(event, data)
} 
```

jsfiddle在这里：http: [//jsfiddle.net/concept/dELCv/](http://jsfiddle.net/concept/dELCv/)

我的问题是：

1.  这实际上是让两个基于元素的指令进行通信的唯一方法吗？
2.  范围感觉不对，因为我不得不使用 $(document).data("fc-bus.api", api) 在控制器之间共享 api 实例。有人可以建议在控制器之间共享 API 的更好方法吗

它可以工作，我想这很好，但是对于全局范围的 api，它真的感觉不是很“棱角分明”

我期待您的所有回答和评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T18:09:02.633

代替第三条指令，创建一个服务来共享数据并`$watch`更改每个指令内的服务数据。

# java - Java中的继承是如何工作的？

> ID：15367152
> 
> 赞同：11
> 
> 时间：2013-03-12T16:45:15.097
> 
> 标签：java, inheritance

我们有下一节课：

```
class Super {
    void foo() {
        System.out.println("Super");
    }
}

class Sub extends Super {
    void foo() {
        super.foo();
        System.out.println("Sub");
    }
}

public class Clazz {
    public static void main(String[] args) {
        new Sub().foo();
    }
} 
```

输出是：

> 极好的
> 
> 子

## 问题：

呈现什么`super`？它是父类的对象，哪个孩子保留为字段？

*   如果是，抽象类的继承如何工作？您不能创建抽象类的实例。
*   如果不是，覆盖的方法在哪里举行？

我尝试谷歌，但我发现的只是关于如何继承类等的常见信息。

## 更新：

你还在告诉我一些显而易见的事情。也许我的问题有点误导，但我会尝试改写它：

*   当我们用 调用方法时`super`，你说，我们正在访问父方法。但是我们如何在没有父对象的情况下调用这个方法呢？
*   `super`一样吗`this`？`this`如您所知，是对具体对象的引用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:09:58.030

子类不维护任何表示其父类的特殊字段。您可能会按照内部类的思路进行思考，这些内部类***确实***维护了对其外部类的引用。这是一种特殊情况，并不代表超子类之间的关系。

在内部，JVM 维护一个“方法表”，将其加载的每个类与该类可用的方法相关联。JVM 还知道它加载的所有类之间的关系，包括超子关系。

当你调用一个`super`函数时，JVM 实际上做了几件事：

*   确定从中调用方法的类的父类
*   确定父级上将被调用的方法
*   调用方法，带有特殊指令 ( `invokespecial`)

如果你要检查你的类的类文件`Sub`，你会看到这样的`foo`方法：

```
void foo();
    flags: 
    Code:
        stack=2, locals=1, args_size=1
            0: aload_0       
            1: invokespecial #2        // Method Super.foo:()V
            4: getstatic     #3        // Field java/lang/System.out:Ljava/io/PrintStream;
            7: ldc           #4        // String Sub
            9: invokevirtual #5        // Method java/io/PrintStream.println:(Ljava/lang/String;)V 
```

*清单中的第 1 行显示了调用超类方法的特殊指令。*

[Java Virtual Machine Specification](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)是一个很好的阅读来源，尤其是[第 2.11.8 节](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.11.8)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T16:49:19.117

好的。让我们逐行浏览您的代码。

你的第一个声明，在你的 'foo' 方法中是

```
super.foo(); 
```

嗯，这是对超类方法的显式调用`foo`。这是：

```
 void foo() {
    System.out.println("Super");
} 
```

所以“Super”被输出到控制台，因为你已经用`super`关键字显式调用了这个方法。`super`引用类的超类，与`this`引用当前类的方式相同。

接下来是子类中的其余`foo`方法：

```
 void foo() {
    super.foo();
    System.out.println("Sub");
} 
```

调用完之后`super.foo()`，是时候转到下一条语句，它输出“Sub”。

* * *

您的程序首先移动到子类的方法而不是超类的原因是因为一个叫做`Polymorphism`. 也就是说，子类从超类中获取一个方法，并改变它的行为。

**抽象类**

您不能创建抽象类的实例，不，但是使用`super`关键字，您仍然可以访问超类的功能。

**在 Java 虚拟机的上下文中**

那么，当你调用方法时，Java 虚拟机会在本地类中查找该方法，如果它是一个实例方法。如果找不到它，它将移动到超类。当你使用 的原理时`Polymorphism`，JVM 会在子类中找到签名正确的方法，然后停止查找。`Polymorphism`在 Java 的上下文中，这就是继承和简单的工作方式。

当您覆盖一个方法时，您将具有相同方法签名（方法字段的名称、编号和类型）的方法添加到子类定义中。这是 JVM 找到它的方式，也是存储被覆盖方法的地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T16:49:44.857

`super`是一个关键字，允许您调用超类中定义的方法实现。它不是您的子类的字段。

> 如果不是，覆盖的方法在哪里举行？

我不太清楚你的意思是什么，但是：

*   打印“Super”的方法保存在超类的类定义中
*   打印“Sub”的方法保存在子类的类定义中。

由于`Sub`extends `Super`，类的定义`Sub`包括对类定义的引用`Super`。

回答更新的问题：

> 当我们用 super 调用方法时，你说，我们正在访问 parent 的方法。但是我们如何在没有父对象的情况下调用这个方法呢？

方法只是一段代码，只是我们需要执行的一系列字节码指令。当您调用一个方法时，JVM 的任务是根据您提供的方法名称和参数来确定在哪里可以找到该代码块。通常，正如其他人所说，它会首先查看调用方法的对象的类的类定义。当您使用 时`super`，您是在告诉 JVM 不要查看此处，而是查看父类定义。

因此，您不需要单独的`Super`and实例`Sub`，因为 a是`Sub` *(*`Super` is `new Sub() instanceof Super`) `true`，并且因为 JVM 知道`super`关键字意味着它应该在 的类定义中查找构成方法的代码`Super`。

> 超级和这个一样吗？如您所知，这是对具体对象的引用。

不，它们不一样。`this`是对当前对象的引用，而`super`不是对对象的引用，而是一个关键字，它影响 JVM 将在何处查找定义正在调用的方法的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T16:49:27.687

当您编写时，`super.foo();`您正在调用超类方法。

sub 类的 foo 方法通过在 super 类方法中添加指令来覆盖 Super 的 foo 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T16:50:53.950

子类中的 foo 方法覆盖 .super.foo() 调用 print super 然后 System.out.println("Sub"); 显示子。

试试这个继承

```
class Super {
    Super()
    {
        System.out.println("1");
    }
    void foo() {
        System.out.println("Super");
    }
}

class Sub extends Super {
    public Sub() {
        // TODO Auto-generated constructor stub
        System.out.println("2");
    }
    void foo() {
       super.foo();
        System.out.println("Sub");
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T16:52:29.737

只有一个对象同时是 Sub、Super 和 Object。它具有每个类的所有非静态字段。一个类实际上只需要一份其方法的代码副本，即使是非静态的也是如此。

# python - Python/SciPy - 创建可执行文件

> ID：15367156
> 
> 赞同：1
> 
> 时间：2013-03-12T16:45:19.560
> 
> 标签：python, scipy, py2exe, pyinstaller, cx-freeze

我有一个使用 SciPy 的简短 python 脚本，它运行完美，但我无法将其转换为可执行文件。我使用 Windows 7 64 位和 Python 2.7，以及 Christoph Golke 的 Numpy/SciPy 版本（[http://www.lfd.uci.edu/~gohlke/pythonlibs，cx_freeze](http://www.lfd.uci.edu/~gohlke/pythonlibs)和 py2exe 也在那里下载），一切都是 64 位的。由于 32 位 4GB RAM 的限制，需要 64 位。

我尝试了几件事：pyinstaller、py2exe 和 cx_freeze（同样是 64 位）。每次我运行可执行文件时，都会出现“导入错误：没有名为 XXX 的模块”，其中 XXX 等于不同的东西（_validation、_csr、None、multiarray）。使用 py2exe，我管理它以获取“ImportError：DLL 加载失败：%1 不是有效的 Win32 应用程序”。

我搜索了这种错误并尝试包含不同的模块（再次使用上面提到的所有三个脚本），但仍然存在相同的错误。

我的脚本：

```
#!/usr/bin/python

# easy.py

import scipy as sp
from scipy.io import wavfile
from scipy import signal
import numpy as np

rate,data = sp.io.wavfile.read('2.wav')
if data.ndim >= 2:
    data = data[ : ,0]
min = data.min()
if min < 0:
    data= np.multiply(data,0.5)
    data= np.add(data,min/-2)

rate2,data2 = sp.io.wavfile.read('MVI_1849.wav')
if data2.ndim >= 2:
    data2 = data2[ : ,0]
min2 = data2.min()
if min2 < 0:
    data2= np.multiply(data2,0.5)
    data2= np.add(data2,min2/-2)
data2=data2[::-1]

corr = signal.fftconvolve(data,data2)
max = np.argmax(corr)
offset = float(max-len(data2)) / float(rate)

print(offset) 
```

我读到这与 NumPy/SciPy 的导入机制有关，但我不知道如何修复它。如果您需要更多信息，请告诉我。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:52:40.403

从谷歌搜索来看，这似乎是 scipy py2exe 中的一个错误，建议的解决方案是手动导入 scipy 模块：

```
from scipy.sparse.csgraph import _validation 
```

看看这里： [scipy with py2exe](https://stackoverflow.com/questions/14215303/scipy-with-py2exe)

希望这适用于您的情况。

# node.js - 如何从 Node.js 连接到 SockJS 服务器？

> ID：15367158
> 
> 赞同：3
> 
> 时间：2013-03-12T16:45:22.287
> 
> 标签：node.js, websocket

我有一个在 Node.js 中运行的 SockJS 服务器。现在我想连接到这个服务器，不是从浏览器，而是从另一个 Node.js 服务器。

[sockjs-client](https://github.com/sockjs/sockjs-client)只是浏览器，[sockjs-node](https://github.com/sockjs/sockjs-node)不提供客户端部分。

当然，我可以使用诸如[ws](https://github.com/einaros/ws)之类的模块（或任何其他符合 RFC 6455 的模块），但是我失去了 SockJS 服务器的所有不错的功能，例如 fallbacks 等。

如何从 Node.js 连接到 SockJS？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T16:47:51.400

You can use `sockjs-client` from node too. Check the following packages:

1.  [sockjs-client](https://npmjs.org/package/sockjs-client) only XHR Streaming transport
2.  [sockjs-client-ws](https://npmjs.org/package/sockjs-client-ws) only WebSocket transport

# wpf - 在子菜单 WPF 中获取焦点 MenuItem

> ID：15367161
> 
> 赞同：2
> 
> 时间：2013-03-12T16:45:41.277
> 
> 标签：wpf, menu, keyboard, focus

我正在编写一个包含子菜单的菜单应用程序。我还有一个状态栏，当用户使用键盘在菜单中导航时，我想在其中显示有关重点菜单项的信息。我尝试处理来自每个 MenuItem 的 GotFocus 事件并将 StatusBar 的内容更改为发件人的标签，但它仅适用于 MenuItem 1，不适用于 1.1 和 2.2。

XAML：

```
<Menu Height="23" x:Name="mainMenu">
    <MenuItem Header="Header1" Tag="Info1" GotFocus="MenuItem_GotFocus_1">
        <MenuItem Header="Header1.1" Tag="Info1.1" GotFocus="MenuItem_GotFocus_1"/>
        <MenuItem Header="Header1.2"  Tag="Info1.1" GotFocus="MenuItem_GotFocus_1"/>
        ...
    </MenuItem>
    ...
</Menu> 
```

C＃：

```
private void MenuItem_GotFocus_1(object sender, RoutedEventArgs e)
{
    statusBarItem.Content = (sender as FrameworkElement).Tag;
} 
```

如何显示有关子菜单重点项目的信息？也许还有其他方法可以做到这一点？

谢谢，亚历山大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:09:13.213

不确定它是否适用于你所需要的，但我认为这是你所需要的......

最好绑定到视图模型 - 然后你可以通过简单地绑定到它来在其他地方公开那个“状态”......

如果`IsFocused`（如果您正在谈论标准 WPF 菜单项）绑定到它会有一个小问题，因为它是只读的，所以绑定失败，例如
[http://meleak.wordpress.com/2011/08 /28/onewaytosource-binding-for-readonly-dependency-property/](http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/)
（这也是该解决方案的一个很好的例子，仅适用于 ActiveWidth/Height）

```
<TreeView.ItemContainerStyle>
<Style TargetType="{x:Type TreeViewItem}">
    <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
    <Setter Property="pb:PushBindingManager.StylePushBindings">
            <Setter.Value>
    <pb:PushBindingCollection>
    <pb:PushBinding TargetProperty="IsFocused" Path="IsFocused"/>
    </pb:PushBindingCollection>
            </Setter.Value>
    </Setter> 
```

`PushBindingManager`您可以从上面文章中的链接`xmlns:pb="clr-namespace:PushBindingExtension;assembly=some-assembly"`（

你应该准备好了。只需`IsFocused`在您的视图模型中制作，将菜单绑定到它 - 然后将任何项目`is focused`置于状态。这里需要一些“腿部工作”来实现这一点，但非常少。

希望这可以帮助

注意：使用其他链接进行下载（即[http://dl.dropbox.com/u/39657172/Blog/PushBindingInStyleDemo.zip](http://dl.dropbox.com/u/39657172/Blog/PushBindingInStyleDemo.zip)）
（该链接包含`StylePushBindings`您需要的样式。

# eclipse - 为什么 Eclipse 不更新到 Juno SR2？

> ID：15367162
> 
> 赞同：0
> 
> 时间：2013-03-12T16:45:42.897
> 
> 标签：eclipse

我正在运行 Eclipse Juno SR1。Service Release 2，SR2，是在几周前发布的。但是，当我单击帮助/检查更新时，它显示“未找到更新”。为什么？

我需要重新安装吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:57:06.920

我有同样的问题。由于某种原因，更新不起作用。但是解决方案很简单：

1.  帮助
2.  安装新软件
3.  在“使用”中输入 URL [http://download.eclipse.org/eclipse/updates/4.2](http://download.eclipse.org/eclipse/updates/4.2)
4.  选择“Juno SR1 补丁”
5.  单击“下一步”并接受许可
6.  结束

[Eclipse wiki](http://wiki.eclipse.org/Platform_UI/Juno_Performance_Investigation)概述了这些步骤。我猜他们只希望那些受性能问题影响的人愿意安装补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-25T14:23:51.103

转到 Windows-> 首选项-> 安装/更新-> 选择卸载/更新然后选择当前版本并单击更新。这将更新到服务版本 2 (SR2)

# algorithm - 查找科赫曲线的坐标

> ID：15367165
> 
> 赞同：1
> 
> 时间：2013-03-12T16:45:51.743
> 
> 标签：algorithm, math, linear-algebra, graph-algorithm, graphic

对不起我的语言，因为英语是我的第二语言。

我正在尝试将直线转换为称为科赫曲线的分形。给定直线的 2 个点，然后我需要创建科赫曲线，将线分为 3 段，然后将第二段设为等边三角形。见[http://www.tgmdev.be/curvevonkoch.php](http://www.tgmdev.be/curvevonkoch.php)。

到目前为止，我们将直线转换为 4 个等分线段，我需要计算出科赫曲线的所有坐标。

当 2 点的 y 坐标相同时，我想到了一条直线，这给了我水平线。如果是这样，我可以通过将第二段分成两半并取直角三角形的 cos(60) 来计算等边三角形的 3 个点。在这里： [http ://www.themathpage.com/atrig/30-60-90-triangle.htm](http://www.themathpage.com/atrig/30-60-90-triangle.htm)

我的问题是当直线是对角线时如何找到所有坐标，例如a（200,100），b（400,600）或a（400,500），b（100,500）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:28:10.830

如果您的基本段是 AB，具有 A(Ax,Ay) 和 B(Bx,By)，那么 4 个子段将是 AP、PQ、QR、RB，如下定义。

首先定义两个相同长度的正交向量：

```
U(Bx-Ax,By-Ay) and
V(Ay-By,Bx-Ax) 
```

然后要点：

```
P=A+(1/3)*U
Q=A+(1/2)*U+(sqrt(3)/6)*V
R=A+(2/3)*U 
```

point+vector=point 符号类似于平移。

以 A(100,100) 和 B(400,100) 为例：

```
U(300,0)
V(0,300)
P = (100,100) + (1/3)*(300,0) = (200,100)
Q = (100,100) + (1/2)*(300,0) + (sqrt(3)/6)*(0,300) = (250,186)
R = (100,100) + (2/3)*(300,0) = (300,100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T21:05:23.613

这是一个基于 Eric 算法的 javascript 函数。

```
export function getChildLinePoints (points, depth = 0) {
  if (depth === 0) {
    const Ax = points[0]
    const Ay = points[1]
    const Bx = points[2]
    const By = points[3]
    const Ux = Bx - Ax
    const Uy = By - Ay
    const Vx = Ay - By
    const Vy = Bx - Ax
    const Px = Ax + ((1 / 3) * Ux)
    const Py = Ay + ((1 / 3) * Uy)
    const Qx = Ax + ((1 / 2) * Ux) + ((Math.sqrt(3) / 6) * Vx)
    const Qy = Ay + ((1 / 2) * Uy) + ((Math.sqrt(3) / 6) * Vy)
    const Rx = Ax + ((2 / 3) * Ux)
    const Ry = Ay + ((2 / 3) * Uy)
    return [[
      Ax, Ay,
      Px, Py
    ], [
      Px, Py,
      Qx, Qy
    ], [
      Qx, Qy,
      Rx, Ry
    ], [
      Rx, Ry,
      Bx, By
    ]]
  } else {
    const xpoints = [...getChildLinePoints(points, depth - 1)]
    return xpoints.reduce((acc, point) => [...acc, ...getChildLinePoints(point)], [])
  }
} 
```

# sql-server - 使用 SSIS 复制数据

> ID：15367168
> 
> 赞同：1
> 
> 时间：2013-03-12T16:46:01.277
> 
> 标签：sql-server, ssis, sql-server-2008-r2, sql-server-2012

我在数据库中有 100 多个表。我生成脚本并执行到另一个数据库。现在我想每天将源数据库中的数据插入目标数据库（仅数据）。

所以我可以使用 SSIS 进行比较。任何人都可以像 SSIS 中的工作一样每天将数据从源复制到目的地吗？

任何帮助，将不胜感激..

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:48:52.253

使用复制数据库向导

[http://msdn.microsoft.com/en-us/library/ms188664.aspx](http://msdn.microsoft.com/en-us/library/ms188664.aspx)

最后，检查创建 SSIS 包，安排 SSIS 包根据需要运行，任务完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:08:29.083

我终于发现我们可以在 SSIS 中使用“Transfer SQL Server Objects Task”。因此，将所选对象复制到另一个数据库会有所帮助。

# ios - 如何使用 UIAutomation 处理慢速网络连接

> ID：15367177
> 
> 赞同：3
> 
> 时间：2013-03-12T16:46:30.787
> 
> 标签：ios, ui-automation, ios-ui-automation

我注意到当网络速度较慢时，我的所有 UI 测试都会失败。例如，用户会尝试登录，然后下一个屏幕加载速度不够快，以使另一个 UIElement 出现在屏幕上。

如何在不使用 delay() 的情况下处理慢速网络连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:53:08.343

我知道的唯一方法是使用延迟。从互联网加载内容时，我通常有一个活动指示器。所以我在活动指示器显示时添加了延迟

```
while (activityIndicator.isVisible())
{
    UIALogger.logMessage("Loading");
    UIATarget.localTarget().delay(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:39:15.187

你绝对应该看看多线程。在处理网络连接时，您**应该**在辅助线程中进行所有这些处理。否则，主线程将被阻塞，应用程序将对用户无响应。

多线程是一个很大的课题。我建议您开始查看[Apple 的参考资料](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)。您还可以参考[iTunes U 上的一门很棒的课程](https://itunes.apple.com/us/course/coding-together-developing/id593208016)（第 11 课）。

如果您只是想试一试，这里是您需要的实际代码（类似）：

```
dispatch_queue_t newQueue = dispatch_queue_create("networkQueue", NULL);

dispatch_async(newQueue, ^{

// here you need to call the networking processes

   dispatch_async(dispatch_get_main_queue(), ^{

     // if you need to update your UI, you need to get back to the main queue.
     // This block will be executed in your main queue.

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T19:04:34.580

中的检查`pushTimeout`和`popTimeout`方法`UIATarget`。[您可以在此处](https://developer.apple.com/library/prerelease/ios/documentation/ToolsLanguages/Reference/UIATargetClassReference/index.html#//apple_ref/javascript/instm/UIATarget/pushTimeout)找到文档。

这是我们的 iOS 应用 UIAutomation 测试中的一个代码示例：

```
// Tap "Post" button, which starts a network request
mainWindow.buttons()["post.button.post"].tap();

// Wait for maximum of 30 seconds to "OKAY" button to be valid
target.pushTimeout(30);

// Tap the button which is shown from the network request success callback
mainWindow.buttons()["dialog.button.okay"].tap();

// End the wait scope
target.popTimeout();
```

# cuda - 是否定义了扭曲内的更改内存？

> ID：15367181
> 
> 赞同：0
> 
> 时间：2013-03-12T16:46:45.250
> 
> 标签：cuda, synchronization

现在我使用 atomicAdd 来更改一些内存单元。我感兴趣的是在定义的warp中更改相同内存（没有atomicAdd）的行为吗？我想到了特定的架构——费米。

假设我有指向内存的指针，所有 32 个线程（相同的块）都相同，根本没有更多线程，我执行：

```
++(*ptr); 
```

这是未定义的吗？定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:54:26.837

如果`ptr`在 warp 中跨线程引用相同的全局或共享内存位置，则行为未定义。也就是说`*ptr`，当操作完成时，指示的内容（即）将是未定义的。

# c# - 小写数据表中的所有文本，或小写页面上的所有文本以使用 css text-transform: 大写？

> ID：15367185
> 
> 赞同：-3
> 
> 时间：2013-03-12T16:46:56.453
> 
> 标签：c#, javascript, asp.net, css

我遇到了 CSS 无法`text-transform: capitalize`在已经大写的文本上使用的问题。不幸的是，从我的数据库返回的文本在很多情况下都是大写的。`LOWER(X)`与其将我从数据库请求的每个字段都放在前面，或者在每个字段上调用 ​​JS 函数，不如使用仅针对返回的整个数据表的解决方案，然后`text-transform: capitalize`在页面的 CSS。

有什么简单的方法可以做到这一点吗？或者，一种将页面上的所有文本（也许是 JS？）作为目标并将其小写，然后让 CSS 部分重新大写的方法就可以了。我正在寻找最简单的解决方案，无论是什么（重写大量查询根本不是。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:08:33.157

Ben，您可以针对您的 DataTable 使用此 Select Query，您将需要根据您的表调整字段。我只使用 1 个名为`DESC`

```
select
    DESC =
    -- Adjust the length of your filed(s) for example DESC is varchar(500)
    convert(varchar(500),
    upper(substring(DESC,1,1))+
    lower(substring(DESC,2,499)))
from
    YouTable Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:48:40.317

使用 CSS 来做到这一点是不正确的。小写数据库中的内容，无论是否容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:50:17.203

最简单的方法是更改​​数据库中的数据，这样您就没有大写字符串，并让 CSS 完成它的工作。无论如何，仅在 JS/CSS 上做这件事不是可行的方法。

# lua - 在 Corona 中使用带有 graphics.newMask() 的图像表

> ID：15367189
> 
> 赞同：0
> 
> 时间：2013-03-12T16:47:10.680
> 
> 标签：lua, coronasdk, masking

在 Corona SDK 中，我想使用图像表框架`graphics.newMask()`而不是图像文件名。所以而不是：

```
myMaskPtr = graphics.newMask("myMask.png"); 
```

我想使用类似的东西：

```
myImageSheetPtr = graphics.newImageSheet( "myImageSheetMasks.png", mySheetData );
myMaskPtr = graphics.newMask( myImageSheetPtr, 2 ); 
```

有任何想法吗？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:33:27.363

来自电晕支持：

```
Hello,

graphics.newMask does not currently support imageSheet images. I will add that to our to-do list.

Regards, Tom 
```

所以，不，这是不可能的。

# spring - 我正在尝试找到显示弹簧错误的错误框的最佳方法

> ID：15367190
> 
> 赞同：0
> 
> 时间：2013-03-12T16:47:11.393
> 
> 标签：spring, jsp, spring-mvc

我正在尝试找到显示弹簧错误的错误框的最佳方法。

我喜欢在每个相关字段下显示该错误。下面是我的代码，但我认为其他方式会更容易？

```
<c:set var="validationErrorsContent"><form:errors path="content"/></c:set>
<c:if test="${not empty validationErrorsContent}">
<font color="red">
    <div id="error" class="error">
             <form:errors path="content" cssClass="error" />
    </div>
</font>
</c:if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:00:55.937

您可以使用打印所有错误

```
<form:errors path="*"/> 
```

如果您还应用自定义验证，则可以像这样在您的 jsp 页面上应用它

```
<c:if test="${success=='n'}">
   <form:errors path="*"/>
</c:if> 
```

并在您的控制器上设置“成功”`map.put("success", "n");`

# javascript - 有人可以看看我遇到问题的一些 jQuery 吗？（setInterval，fadeIn/fadeOut）

> ID：15367191
> 
> 赞同：1
> 
> 时间：2013-03-12T16:47:18.370
> 
> 标签：javascript, jquery, if-statement, setinterval, fade

我需要三个与淡入淡出交替交替的元素。我让它大部分工作，但由于某种原因，当它返回到第一个元素时，它会跳过淡入淡出并出现。我敢肯定，我在这里遗漏了一些相当明显的东西，但我只是没有看到。

任何帮助将不胜感激。谢谢！

jsfiddle 链接：http: [//jsfiddle.net/hcarleton/qLNyt/](http://jsfiddle.net/hcarleton/qLNyt/)

HTML

```
<body>
    <div id='one' class='selection'>
        <h3>ONE</h3>
    </div>
    <div id='two' class='selection'>
        <h3>TWO</h3>
    </div>
    <div id='three' class='selection'>
        <h3>THREE</h3>
    </div>
    <div id='console'>
    </div>
</body> 
```

CSS

```
div {
    width:100px;
    height:75px;
    position:absolute;
    top:0px;
    left:0px;
    z-index:10;
}
#one {
    background-color:#aabbcc;
}
#two {
    background-color:#bbccaa;
}
#three {
    background-color:#ccaabb;
}
#console {
    width:500px;
    position:absolute;
    top:200px;
    left:25px;
    background-color:#dddddd;
}
.top {
    z-index:20;
}
p {
    margin:5px;
} 
```

javascript/jQuery

```
$(document).ready(function() {
    var fade = 1000;
    var wait = 1000;
    var $selection = $('.selection');
    var selectionQty = $selection.length;
    var c = 0;
    $('.selection').fadeOut(0);
    $('.selection').first().fadeIn(0);
    setInterval(
        function() {
            c+=1;
            if(c == selectionQty) {
                c = 0;
            }
            $selection.eq(c).addClass('top').fadeIn(fade);
            $selection.delay(fade).fadeOut(0).removeClass('top');
            $selection.eq(c).fadeIn(0);
        },
        fade+wait
    );

    $('#console').append('<p>-'+selectionQty+'</p>');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:49:32.017

您不能使用`setInterval()`和维护同步的事件链。`setTimeout()`在动画的回调函数中使用。

您有三个动画同时触发。

```
$selection.eq(c).addClass('top').fadeIn(fade);
$selection.delay(fade).fadeOut(0).removeClass('top');
$selection.eq(c).fadeIn(0); 
```

哪个先完成/最后完成？通常，您会希望`setTimeout()`在最后一个完成时使用（有例外）。

# c++ - CHtmlEditCtrl::OnSetFocus not being called

> ID：15367193
> 
> 赞同：0
> 
> 时间：2013-03-12T16:47:23.410
> 
> 标签：c++, mfc, webbrowser-control

I have derived the CHtmlEditCtrl, and want to be able to react when the control gets or looses its focus. However the standard MFC OnSetFocus and OnKillFocus handling routines are not being called.

I presume it has something to do with the control actualy being a wrapped ActiveX control.

I have tried giving it the WS_EX_CONTROLPARENT and WS_TABSTOP styles on creation as suggested [here](https://stackoverflow.com/questions/3458936/chtmlview-class-and-focus), but it did not help.

I found somewhere that I should make my control the event sink for HTMLDocumentEvents2, but I would rather avoid that if possible.

EDIT: Spy++ says I should be getting WM_PARENTNOTIFY and WM_MOUSEACTIVATE messages. However, my Derived Class receives absolutely no messages. I tried it with OnSize and OnCreate too. No message whatsoever is being sent. Any idea?

# php - How to set dynamic route to use slug in CodeIgniter?

> ID：15367197
> 
> 赞同：5
> 
> 时间：2013-03-12T16:47:27.387
> 
> 标签：php, codeigniter, url-rewriting, url-routing

Let's say that I have a controller named

**pages**

and there is a method

**slug_on_the_fly**

`public function slug_on_the_fly($slug)`

How would my route for this look like?

E.g. for blog controller it would be easy:

```
$route['blog/(:any)'] = 'pages/slug_on_the_fly/$1'; 
```

and then `http://localhost/blog/name-of-the-article` works nice

However, what if I want to do it like without `blog` so e.g.

`http://localhost/name-of-the-article` or `http://localhost/another-article-blablabla`

How to do it and don't break another routes e.g. `$route['friends'] = 'users';` or `$route['about-us'] = 'pages/about_us';` ?

Because if I do: `$route['(:any)'] = 'pages/slug_on_the_fly/$1';`

It will probably ruin everything else or?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T19:48:28.273

网址按以下顺序路由：

1.  `$route`(routes.php) 中的显式路由*按顺序*检查。
2.  尝试使用隐式路由`[folder/]controller/methodname/args...`作为回退。

如果有少量已知的显式路由，您可以将它们添加到`$route`：

```
$route['(my-slug|my-other-slug|my-third-slug)'] = 'pages/slug_on_the_fly/$1' 
```

（路由键实际上被解析为正则表达式，`:any`并被`:num`重写为`.+`和`[0-9]+`。）

如果您有大量此类路由（可能不是一个好主意，顺便说一句！），您可以在**末尾**添加一个通配符路由`$route`：

```
$route['([^/]+)/?'] = 'pages/slug_on_the_fly/$1' 
```

此处的正则表达式表示“任何没有斜杠的网址（可能最后一个除外）”。如果您有任何其他限制，您可以改进它以描述您的 slug 格式。（一个很好的是`[a-z0-9-]+`。）如果你的控制器在数据库中找到了 slug，你就完成了。如果没有，它必须提供 404。

但是，您放弃了一些隐式路由的可能性，因为 Codeigniter 没有为控制器“放弃”返回路由器的路由提供任何方式。例如，如果你有一个名为 'foo' 的控制器并且你想要一个 url 喜欢`/foo`路由到`Foo::index()`，你必须为这种情况添加一个显式路由，因为它会被这个路由捕获并发送到`Pages::slug_on_the_fly('foo')`。**一般来说，你不应该有也是控制器类名的 slug！**这就是为什么你应该拥有非常少量的这些 url-slug，如果你有的话！

如果您*同时*拥有大量这些显式路由*并且*您不愿意遵守这些隐式路由限制，您可以尝试将它们`$route`动态添加到：

1.  制作一个包含在末尾的`routes_extra.php`文件。`routes.php`在保存页面或构建/部署站点时为其编写新路由。
2.  子类化`Router.php`并添加一个新的路由层。
3.  添加一个`pre_system`添加路线的钩子。

我敢肯定还有其他方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T18:45:48.613

您可以使用数据库驱动的路线。

将表添加`blog_slugs`到您的 MySQL 数据库：

```
CREATE TABLE IF NOT EXISTS `blog_slugs` (
  `id` bigint(20) NOT NULL auto_increment,
  `slug` varchar(192) collate utf8_unicode_ci NOT NULL
  PRIMARY KEY  (`id`),
  KEY `slug` (`slug`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1; 
```

将 application/config/routes.php 中的代码替换为以下代码：

```
$route[ 'default_controller' ]  = 'main';
$route[ '404_override' ]        = 'error404';

require_once( BASEPATH .'database/DB'. EXT );
$db =& DB();
$query = $db->get( 'blog_slugs' );
$result = $query->result();
foreach( $result as $row )
{
    $route[ $row->slug ] = 'pages/slug_on_the_fly/$1;
} 
```

然后，您所要做的就是在创建博客条目时创建一条记录，然后您就完成了：

```
INSERT INTO `blog_slugs` (`slug`) VALUES ('name-of-the-article'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T06:30:47.973

使用[404 覆盖保留路由](http://ellislab.com/codeigniter/user-guide/general/routing.html)控制器/方法。如果不存在有效的控制器/路由，则将调用此方法。作为一个包罗万象的作品很棒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:12:18.657

假设你有 3 个控制器，而不是页面控制器，比如控制器 1、控制器 2 和控制器 3，然后，

```
$route['^(?!controller1|controller2|controller3).*'] = 'pages/slug_on_the_fly/$1';; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-01T09:24:20.617

也许这会对你有所帮助。

```
$route['controllerName/([^/]+)/([^/]+)'] = "index/author/$1/$2"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-30T15:39:22.810

这可以帮助你

`$route['controllerName/(:any)] = "controllename/method/slug";`

# c# - Setting the generic type param to object by default c#

> ID：15367201
> 
> 赞同：2
> 
> 时间：2013-03-12T16:47:41.770
> 
> 标签：c#, .net-4.0

Given a method:

```
private static T GetBin<T>(string file) 
```

Is it possible to set T to default to `object`, if I use:

```
public static byte[] ToJSONBytes<T>(this T obj) 
```

It defaults to whatever `obj` is set as. However, this GetBin method Deserializes a file, using the BinaryFormatter, and as you all know, it returns an object. My method explicitly casts it to T and then returns it, but I want to make T optional and default to `object`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:48:55.403

Generic type parameters cannot have default values.

However, they can have overloads:

```
private static object GetBin(string file) { return GetBin<object>(file); } 
```

# r - 将日期作为整数和时间作为因素组合到 R 中的 POSIXct

> ID：15367210
> 
> 赞同：1
> 
> 时间：2013-03-12T16:48:08.650
> 
> 标签：r, datetime, posixct

我知道这已经被问过好几次了，我查看了问题并遵循了建议。但是，我无法解决这个问题。

datetime.csv 可以在[https://www.dropbox.com/s/6bvhk4kei4pg8zq/datetime.csv上找到](https://www.dropbox.com/s/6bvhk4kei4pg8zq/datetime.csv)

我的代码如下所示：

```
jd1 <- read.csv("datetime.csv")
head(jd1)
      Date Time
1 20100101 0:00
2 20100101 1:00
3 20100101 2:00
4 20100101 3:00
5 20100101 4:00
6 20100101 5:00

sapply(jd1,class)
> sapply(jd1,class)
     Date      Time 
"integer"  "factor"

jd1 <- transform(jd1, timestamp=format(as.POSIXct(paste(Date, Time)), "%Y%m%d %H:%M:%S"))
Error in as.POSIXlt.character(x, tz, ...) : 
character string is not in a standard unambiguous format 
```

我尝试了 rcs 在[将两列日期和时间数据转换为一列中](https://stackoverflow.com/questions/14359546/converting-two-columns-of-date-and-time-data-to-one)建议的解决方案，但这似乎给出了错误。

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:54:57.697

您传递给 format 的格式字符串包括`%S`您没有的。但这并不能解决错误，因为它来自`as.POSIXct`. 您需要在那里传递格式字符串并删除对`format`函数的调用。

```
foo <- transform(jd1, timestamp=as.POSIXct(paste(Date, Time), format="%Y%m%d %H:%M"))
str(foo) 
```

将此与以下内容进行比较：

```
bar <- transform(jd1, timestamp=as.POSIXct(paste(Date, Time), format="%Y%m%d %H:%M:%S"))
str(bar) 
```

以及调用的结果`format`：

```
baz <- transform(jd1, timestamp=format(as.POSIXct(paste(Date, Time), format="%Y%m%d %H:%M"), format='%Y%m%d %H:%M:%S'))
str(baz) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T16:56:28.870

如果只是这个文件，你甚至不需要将它作为 csv 读取。以下会做

```
# if you are reading just timestamps, you may want to read it as just one column
jd1 <- read.table("datetime.csv", header = TRUE, colClasses = c("character"))
jd1$timestamp <- as.POSIXct(jd1$Date.Time, format = "%Y%m%d,%H:%M")
head(jd1)
##       Date.Time           timestamp
## 1 20100101,0:00 2010-01-01 00:00:00
## 2 20100101,1:00 2010-01-01 01:00:00
## 3 20100101,2:00 2010-01-01 02:00:00
## 4 20100101,3:00 2010-01-01 03:00:00
## 5 20100101,4:00 2010-01-01 04:00:00
## 6 20100101,5:00 2010-01-01 05:00:00

# if you must read it as seperate columns as you may have other columns in your file
jd2 <- read.csv("datetime.csv", header = TRUE, colClasses = c("character", "character"))
jd2$timestamp <- as.POSIXct(paste(jd2$Date, jd2$Time, sep = " "), format = "%Y%m%d %H:%M")
head(jd2)
##       Date Time           timestamp
## 1 20100101 0:00 2010-01-01 00:00:00
## 2 20100101 1:00 2010-01-01 01:00:00
## 3 20100101 2:00 2010-01-01 02:00:00
## 4 20100101 3:00 2010-01-01 03:00:00
## 5 20100101 4:00 2010-01-01 04:00:00
## 6 20100101 5:00 2010-01-01 05:00:00 
```

Arun 的评论促使我做一些基准测试。

```
jd2 <- read.csv("datetime.csv", header = TRUE, colClasses = c("character", "character"))
library(microbenchmark)
microbenchmark(as.POSIXct(paste(jd2$Date, jd2$Time, sep = " "), format = "%Y%m%d %H:%M"), as.POSIXct(do.call(paste, c(jd2[c("Date", "Time")])), format = "%Y%m%d %H:%M"), 
    transform(jd2, timestamp = as.POSIXct(paste(Date, Time), format = "%Y%m%d %H:%M")), times = 100)
## Unit: milliseconds
##                                                                                expr      min       lq   median       uq      max neval
##           as.POSIXct(paste(jd2$Date, jd2$Time, sep = " "), format = "%Y%m%d %H:%M") 18.84720 18.87736 18.89542 18.93307 20.99021   100
##      as.POSIXct(do.call(paste, c(jd2[c("Date", "Time")])), format = "%Y%m%d %H:%M") 18.94440 18.97917 18.99492 19.02220 21.07320   100
##  transform(jd2, timestamp = as.POSIXct(paste(Date, Time), format = "%Y%m%d %H:%M")) 19.05581 19.10230 19.12612 19.16877 21.27490   100 
```

# group-by - 在不使用不同的情况下限制分组结果集中的重复结果

> ID：15367215
> 
> 赞同：1
> 
> 时间：2013-03-12T16:48:19.350
> 
> 标签：group-by, limit, distinct

我正在尝试创建一个查询，该查询返回特定实体记录的列表，而不从 entityID 字段返回任何重复的条目。该查询无法使用`DISTINCT`，因为该列表正在传递给一个报告引擎，该引擎不理解包含多于 entityID 的结果集，并且`DISTINCT`需要返回所有`ORDER BY`字段。

结果集不能包含重复的 entityID，因为报告引擎也不能在同一运行中两次处理同一实体的报告。我发现临时表也不支持的困难方式。

需要在查询中对条目进行排序，因为报表引擎只允许在 entity_header 级别进行排序，而我需要根据 report.status 进行排序。值得庆幸的是，报告引擎遵循您返回结果的顺序。

表格如下：

```
entity_header
=================================================
entityID(pk)    Location        active      name
1               LOCATION1       0           name1
2               LOCATION1       0           name2
3               LOCATION2       0           name3
4               LOCATION3       0           name4
5               LOCATION2       1           name5
6               LOCATION2       0           name6

report
========================================================
startdate       entityID(fk)    status      reportID(pk)
03-10-2013      1               running     1
03-12-2013      2               running     2
03-10-2013      1               stopped     3
03-10-2013      3               stopped     4
03-12-2013      4               running     5
03-10-2013      5               stopped     6
03-12-2013      6               running     7 
```

这是我到目前为止的查询，这几乎是我需要的：

```
SELECT entity_header.entityID
FROM entity_header eh
INNER JOIN report r on r.entityID = eh.entityID
WHERE r.startdate between getdate()-7.5  and getdate()
AND eh.active = 0
AND eh.location in ('LOCATION1','LOCATION2')
AND r.status is not null
AND eh.name is not null 
GROUP BY eh.entityID, r.status, eh.name
ORDER BY r.status, eh.name; 
```

我将不胜感激这个社区可以提供的任何建议。我将尽我所能提供所需的任何其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:51:05.433

这是一个仅在 ms SQL 上运行的工作示例。

我正在使用 rank() 来计算 entityID 在结果中出现的次数。保存为列表。

该列表将包含 entityID 出现次数的整数值。

使用**where a.list = 1**过滤结果。使用**ORDER BY a.ut, a.en**对结果进行排序。ut 和 en 用于排序。

```
SELECT a.entityID FROM (
SELECT distinct TOP (100) PERCENT eh.entityID, 
     rank() over(PARTITION BY eh.entityID ORDER BY r.status, eh.name) as list,
     r.status ut, eh.name en
FROM report AS r INNER JOIN entity_header as eh ON r.entityID = eh.entityID
WHERE (r.startdate BETWEEN GETDATE() - 7.5 AND GETDATE()) AND (eh.active = 0) 
 AND (eh.location IN ('LOCATION1', 'LOCATION2'))
ORDER BY r.status, eh.name
) AS a
where a.list = 1
ORDER BY a.ut, a.en 
```

# jquery - jQuery, function is not defined, only on IE<9

> ID：15367216
> 
> 赞同：0
> 
> 时间：2013-03-12T16:48:25.137
> 
> 标签：jquery, internet-explorer, function

I have this in jQuery:

```
$(function(){ 

function updateList(){ 
    //HERE MY FUNCTION
}

}); 
```

And :

```
$(document).ready(function() {
    updateList();
}); 
```

they are on the same file. When i load my page, i have `ReferenceError: updateList is not defined`.

On Firefox and ie9 it's ok....

Do you have any ideas ? Thanks !

Edit : And bonus question, this code doesn't work on IE<9 :

```
$.ajax({
type: "GET",
url: "rechercheArtisan_ajax.html?action=metier&IDmetier="+secteur_activite, 
dataType: ($.browser.msie) ? "text" : "xml",
success: function( data ) {
var xml;
if (typeof data == "string") {
xml = new ActiveXObject("Microsoft.XMLDOM");
xml.async = false;
xml.loadXML(data);
} else {
xml = data;
}
// Returned data available in object "xml"
if ( $(xml).is("erreur") )
{
alert( "Erreur : " + $(xml).find("erreur").text() );
}
else
{
$("#id_metier").attr("disabled", "");
updateList( "metier" , $(xml).find("list") );
}
}
}); 
```

No error, nothing, just no effect.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:51:51.440

的范围在`updateList`里面`$(function(){ });`。在任何浏览器中都应该没有问题。

为什么需要 2 个不同的就绪处理程序？

或者像下面那样将函数移到文档之外，

```
<script>
function updateList () { }

$(function () {
   updateList();
});
</script> 
```

或者只使用一个准备好的处理函数。

```
<script>   
$(function () {
   function updateList () { }

   //some other code

   updateList();
});
</script> 
```

# c++ - Return value from DLL function

> ID：15367223
> 
> 赞同：0
> 
> 时间：2013-03-12T16:48:42.133
> 
> 标签：c++, function, dll

I understand that the DLL typically has its own heap that it stores variables in. My DLL function takes a pointer to a wchar_t variable, and whenever I try to put a value in it, it simply exits the function, leaving the pointer pointing to a bad location which I'm assuming is because the heap gets destroyed.

If my DLL function comes up with some sort of data that needs to be passed back, could someone give me an example of how I could get that data in string format back to the original main function?

Using Visual Studio 2010\.

Edit: I can provide some sample code, but I didn't see the point since I'm simply asking for an example/ explanation as to how memory is handled with regards to dll's and their functions. Ask me what information you need and I'll try to deliver.

Well, to give you guys an idea as to what the application does, it's a COM server DLL. The interface is IProperty, the object is called PropertyObject. The DLL was built separately, by me, with the PropertyObject methods. This method, Getproperty, is the one I'm working on.

```
STDMETHODIMP PropertyObject::GetProperty(int arg1, wchar_t* arg2)
{
    arg2 = L"Test";
    cout << *arg2 << endl;
    return S_OK;
}

int main()
{

CoInitialize(NULL);

IClassFactory * pClassFactory = NULL;
HRESULT hr;
hr  = CoGetClassObject(
CLSID_PropertyObject,
CLSCTX_SERVER,
NULL,
IID_IClassFactory,
(void **) &pClassFactory);

if (SUCCEEDED(hr))
{
    wchar_t x = NULL;
    IProperty *pProperty = NULL;

    hr = pClassFactory->CreateInstance(NULL, IID_IProperty, (void **) &pProperty);
    hr = pProperty->GetProperty(2, &x);
    cout << x << endl;
}
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:53:01.153

如果您 100% 确定所有参与的程序都是使用相同版本的 Visual Studio 编译的（这意味着它们都使用 std::string 所属的相同版本的 STL），则可以使用 std： ：字符串类。

如果它需要可互操作，最好的办法是传入一个 char* 和一个长度并写入提供的缓冲区。让调用者处理内存。这是相当 C 风格的，但也是您最安全的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:27:15.887

结果我还在考虑像普通字符数组一样的 wchar_t 指针。这是我修改后的代码：

```
STDMETHODIMP PropertyObject::GetProperty(int arg1, wchar_t* arg2)
{
    wcscpy(arg2, L"Test"); // This is the function that i needed to be using. 
    return S_OK;
}

int main()
{
    CoInitialize(NULL);

IClassFactory * pClassFactory = NULL;
HRESULT hr;
hr  = CoGetClassObject(
CLSID_PropertyObject,
CLSCTX_SERVER,
NULL,
IID_IClassFactory,
(void **) &pClassFactory);

if (SUCCEEDED(hr))
{
    wchar_t *x = new wchar_t; // Before, this was a normal variable. Changed it to a pointer. 
    IProperty *pProperty = NULL;

    hr = pClassFactory->CreateInstance(NULL, IID_IProperty, (void **) &pProperty);
    hr = pProperty->GetProperty(2, x); // Passed the pointer instead of an address to a normal variable. 
    wcout << x << endl; // wcout instead of cout. It worked. 
}
    return 0;
} 
```

# c++ - Largest eigenvalues (and corresponding eigenvectors) in ArrayFire

> ID：15367224
> 
> 赞同：2
> 
> 时间：2013-03-12T16:48:44.703
> 
> 标签：c++, arrayfire

Given a square matrix `A`, I need to obtain a diagonal matrix `D` that contains `A`'s 5 largest magnitude eigenvalues and a matrix `V` whose columns are the corresponding eigenvectors. In Matlab the code is `[V,D] = eigs(A,5)`. Is there a similar function in ArrayFire C++?

In ArrayFire I use `af::eigen(Values,Vectors,A)`. What is the order of elements in `Values`? In one test I had the elements of `Values` sorted in the order of increasing magnitude, however in the other case `Values` was sorted in the order of decreasing magnitude. Essentially, I need to extract 5 eigenvectors that correspond to the largest magnitude eigenvalues. Do I have to use the `sort` function to achieve this?

**UPDATE** Here's a simple example:

```
// first example
float a[]={1, 2, 5, -2, 1, -5, 3, -2, 1};
array b(3,3,a);
array evalues, evectors;
af::eigen(evalues, evectors, b);
print(evalues);     //`evalues` are not in order   

// second example
float a2[]={1, -3, 3, 3, -5, 3, 6, -6, 4};
array b2(3,3,a2);
array evalues2, evectors2;
af::eigen(evalues2, evectors2, b2);
print(evalues2);     //`evalues2` are in the decreasing order 
```

# mysql - Show authors latest comments on author.php

> ID：15367225
> 
> 赞同：1
> 
> 时间：2013-03-12T16:48:46.307
> 
> 标签：mysql, wordpress, comments

I have a Wordpress site and I've set up an `author.php` page where a users information is displayed.

Currently I've managed to get it to show the authors latest posts they've add to the site using `query_posts`.

However, I want this page to also show the authors latest comments he has posted on the site, but I can't seem to figure out how to do it with a query, as I'm not sure if Wordpress supports this feature.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:02:20.163

有一个功能：[**`get_comments`**](http://codex.wordpress.org/Function_Reference/get_comments).

示例用法（基于 Codex 示例）：

```
$auth_id = get_the_author_meta( 'ID' );
$defaults = array(
    'author_email' => '',
    'ID' => '',
    'karma' => '',
    'number' => '',
    'offset' => '',
    'orderby' => '',
    'order' => 'DESC',
    'parent' => '',
    'post_ID' => '',
    'post_id' => 0,
    'post_author' => '',
    'post_name' => '',
    'post_parent' => '',
    'post_status' => '',
    'post_type' => '',
    'status' => '',
    'type' => '',
    'user_id' => $auth_id,
    'search' => '',
    'count' => false,
    'meta_key' => '',
    'meta_value' => '',
    'meta_query' => '',
);
$auth_comments = get_comments( $defaults );
var_dump( $auth_comments ); 
```

***重要说明：****避免使用`query_posts`，请参阅：* [何时应使用 WP_Query vs query_posts() vs get_posts()？](https://wordpress.stackexchange.com/q/1753/12615)

# java - Drawing on JPanel behind GlassPane when clicking on GlassPane

> ID：15367232
> 
> 赞同：0
> 
> 时间：2013-03-12T16:49:01.770
> 
> 标签：java, swing, glasspane

Okay So I looked through multiple forums and Google and couldn't find an answer to my specific problem. So I have two panels stacked on top of each other and the one on top is a glassPane. When you drag your mouse around the glassPane it draws a vertical red line at the cursor,which works, but when I click on the glassPane I want it it draw a black line at the cursor position on the panel below the glassPane. I can get it to redirect the mouseClick to the bottom panel but it wont draw the line. It just makes the redline disappear until you move the mouse again. Also If I set the glassPane invisible and click on the bottom panel the line is drawn so the drawing code works just fine. Thanks in advance.

Main Class

```
import java.awt.AWTException;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.Robot;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Line2D;
import java.awt.event.MouseMotionAdapter;
import java.util.ArrayList;
public class LiveField extends JPanel {

/**
 * Create the panel.
 */
static JFrame frame;
static JPanel ContentPane;
private JPanel panel;
private MyGlassPane glassPane;
public static void main(String[] args) throws AWTException
{
    LiveField live = new LiveField();
    frame.setVisible(true);
}
public LiveField() throws AWTException {
    frame = new JFrame("Test");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(1000, 433);
    setLayout(new BorderLayout(0, 0));

    ContentPane = new JPanel();
    frame.setContentPane(ContentPane);
    ContentPane.setLayout(new BorderLayout(0, 0));

    panel = new JPanel()
    {
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            panel.setBackground(new Color(50,160,55));
        }
    };
    glassPane = new MyGlassPane(panel);
    frame.setGlassPane(glassPane);
    glassPane.setVisible(true);
    panel.addMouseListener(new MouseAdapter() {
        int[] pos = new int[2];
        @Override
        public void mouseClicked(MouseEvent e) {
            System.out.println("Handles click event");
            Graphics g = panel.getGraphics();
            g.setColor(new Color(50,165,55));
            g.drawLine(pos[0], pos[1], 0+pos[0], 0);//to top
            g.drawLine(pos[0], pos[1], 0+pos[0], panel.getHeight());//to bottom
            int y = e.getYOnScreen();
            int x = e.getXOnScreen();
            pos[0]= x;
            pos[1] = y;
            g.setColor(new Color(0,0,0));
            g.drawLine(x, y, 0+x, 0);//to top
            g.drawLine(x, y, 0+x, panel.getHeight());//to bottom
            g.dispose();

        }
    });

    ContentPane.add(panel, BorderLayout.CENTER);
} 
```

GlassPane Class

```
import java.awt.AWTException;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.Robot;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import java.util.ArrayList;
import javax.swing.JComponent;

class MyGlassPane extends JComponent implements ItemListener {
  Point point;

protected void paintComponent(Graphics g) {
}

public void setPoint(Point p) {
    point = p;
}

public MyGlassPane(final Container contentPane) throws AWTException {
    final Component glass = this;
    addMouseMotionListener(new MouseMotionListener()

    {
        ArrayList<Integer> line = new ArrayList<Integer>();
        Robot rb = new java.awt.Robot();
        @Override
        public void mouseMoved(MouseEvent e) {
            //System.out.println("Moving");
            Graphics g = glass.getGraphics();
            if(!line.isEmpty())
            {
                //System.out.println("line is not empty");
                g.setColor(new Color(50,160,55));
                g.drawLine(line.get(0), line.get(1), 0+line.get(0), 0);//to top
                g.drawLine(line.get(0), line.get(1), 0+line.get(0), contentPane.getHeight());//to bottom
            }

                //System.out.println("draw line");
                int x = e.getXOnScreen();
                int y = e.getYOnScreen();
                Color col = rb.getPixelColor(x, y);

                //System.out.println(col.toString() + " : " + Color.white.toString());
                //System.out.println(col.equals(new Color(255,255,255)));
                if(!col.equals(new Color(255,255,255)) && !inEndZone(x))
                {
                    g.setColor(new Color(255,0,0));
                    line = new ArrayList<Integer>();
                    line.add(x);line.add(y);
                    g.drawLine(x, y, 0+line.get(0), 0);//to top
                    g.drawLine(x, y, 0+line.get(0), contentPane.getHeight());//to bottom
                }

                g.dispose();
        }
        private boolean inEndZone(int x) {
            int ends = contentPane.getWidth()/10;
            //System.out.println(x + " : " + ends);
            if(x<ends)
            {
                //System.out.println("In endzone");
                return true;
            }
            else if(x>contentPane.getWidth()-ends)
            {
                return true;
            }
            else
            {
                return false;
            }
        }
        @Override
        public void mouseDragged(MouseEvent e) {
            // TODO Auto-generated method stub

        }
    });
    addMouseListener(new CBListener(this,contentPane));
}

@Override
public void itemStateChanged(ItemEvent e) {
    // TODO Auto-generated method stub
    setVisible(e.getStateChange() == ItemEvent.SELECTED);
} 
```

}

Listener Class ( for dispatching the mouse click)

```
import java.awt.Component;
import java.awt.Container;
import java.awt.Point;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.event.MouseEvent;
import javax.swing.SwingUtilities;
import javax.swing.event.MouseInputAdapter;

class CBListener extends MouseInputAdapter {
Toolkit toolkit;
Robot rb;
MyGlassPane glassPane;
Container contentPane;

public CBListener(MyGlassPane glassPane, Container contentPane) {
    toolkit = Toolkit.getDefaultToolkit();
    this.glassPane = glassPane;
    this.contentPane = contentPane;
}

    @Override
public void mouseClicked(MouseEvent e) {
    redispatchMouseEvent(e, false);
}

// A basic implementation of redispatching events.
private void redispatchMouseEvent(MouseEvent e, boolean repaint) {
    Point glassPanePoint = e.getPoint();
    Container container = contentPane;
    Point containerPoint = SwingUtilities.convertPoint(glassPane,
            glassPanePoint, contentPane);
    if (containerPoint.y < 0) { // we're not in the content pane
    } else {
        // The mouse event is probably over the content pane.
        // Find out exactly which component it's over.
        Component component = SwingUtilities.getDeepestComponentAt(
                container, containerPoint.x, containerPoint.y);

        if ((component != null) && (component.equals(contentPane))) {
            System.out.println("contentPane");
            // Forward events over the check box.
            Point componentPoint = SwingUtilities.convertPoint(glassPane,
                    glassPanePoint, component);
            component.dispatchEvent(new MouseEvent(component, e.getID(), e
                            .getWhen(), e.getModifiers(), componentPoint.x,
                            componentPoint.y, e.getClickCount(), e
                                    .isPopupTrigger()));
        }
    }

    // Update the glass pane if requested.
    if (repaint) {
        glassPane.setPoint(glassPanePoint);
        glassPane.repaint();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:13:19.157

> 我可以让它将 mouseClick 重定向到底部面板，但它不会画线。它只会使红线消失，直到您再次移动鼠标

不，它确实在画黑线。但是这条线画在红线上方，使红线消失，直到鼠标再次移动。我猜你正在寻找这样的东西：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class  DoublePanel extends JFrame
{
    JPanel mainPanel;
    int x1;
    public void prepareAndShowGUI()
    {
        setTitle("DoublePanel");
        mainPanel = new JPanel()
        {
            @Override
            public void paintComponent(Graphics g)
            {
                super.paintComponent(g);
                g.setColor(Color.BLACK);
                g.drawLine(x1,0,x1,this.getHeight());
            }
        };
        mainPanel.setBackground(new Color(50,160,55));
        mainPanel.setLayout(new BorderLayout());
        mainPanel.add(new upperPanel(this));
        setContentPane(mainPanel);
        setSize(500,600);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        setVisible(true);
    }
    public void setXValue(int x)
    {
        this.x1 = x;
        mainPanel.repaint();
    }
    class upperPanel extends JPanel
    {
        int x; int y;
        DoublePanel dp;
        upperPanel(DoublePanel d)
        {
            this.dp = d;
            setOpaque(false);
            addMouseMotionListener(new MouseAdapter()
            {
                @Override
                public void mouseMoved(MouseEvent evt)
                {
                    x = evt.getX();
                    y = evt.getY();
                    repaint();
                }
            });
            addMouseListener(new MouseAdapter()
            {
                @Override
                public void mouseClicked(MouseEvent evt)
                {
                    dp.setXValue(evt.getX());
                }
            });
        }
        @Override
        public void paintComponent(Graphics g)
        {
            super.paintComponent(g);
            g.setColor(Color.RED);
            g.drawLine(x,0,x,this.getHeight());
        }
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            public void run()
            {
                DoublePanel dp = new DoublePanel();
                dp.prepareAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:00:49.050

您需要调用底部面板的`repaint()`.

# jquery-ui - 获取激活标签的索引

> ID：15367234
> 
> 赞同：12
> 
> 时间：2013-03-12T16:49:03.830
> 
> 标签：jquery-ui, jquery-ui-tabs

我正在将代码从 jQuery UI 1.8 升级到 1.10。

在1.8下，tab改变时触发的事件是`select`，我可以通过 访问被选中的tab的索引`ui.index`。

在 1.10 下，tab 改变时触发的事件是`activate`. 但是，我在 event 参数中找不到任何`ui`告诉我新激活选项卡索引的内容。

我怎样才能发现那个索引？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-12T16:56:00.197

您可以使用以下方法[http://jsfiddle.net/9ChL5/1/](http://jsfiddle.net/9ChL5/1/)：

```
$("#tabs").tabs({
    activate: function (event, ui) {

        console.log(ui.newTab.index());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:56:08.460

UI 对象还在这里，但似乎直接持有 oldTab、newTab、oldPanel、newPanel 的 jQuery 对象，因此您不需要索引即可找到要使用的对象。

见[http://api.jqueryui.com/tabs/#event-activate](http://api.jqueryui.com/tabs/#event-activate)

```
ui Type: Object

- newTab
Type: jQuery
The tab that was just activated.
- oldTab
Type: jQuery
The tab that was just deactivated.
- newPanel
Type: jQuery
The panel that was just activated.
- oldPanel
Type: jQuery
The panel that was just deactivated. 
```

# paypal - Adaptive Payments VS Website Payments Pro for our online marketplace

> ID：15367235
> 
> 赞同：2
> 
> 时间：2013-03-12T16:49:06.060
> 
> 标签：paypal

We are a UK-based marketplace site that wants to never force buyers to sign up for paypal. We allow users to set up customized stores through our site, and our second requirement is that these users be able to become sellers with only a basic paypal account. When a buyer makes a purchase, we are the primary receiver, taking 15% and passing on the entire paypal fees to the secondary receiver (user), as well as all the remainder of the transaction. My question is: What's the best solution paypal offers for this? It seems that chained payments would be, but if I understand correctly the Website Payments Pro system is the only one that guarantees that buyers outside the UK wouldn't need a paypal account. Is there a way to take the money in ourselves with Website Payments Pro and use the API so it transfers the 85% (minus the fees) to the user's paypal account?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:19:14.400

这取决于你想采取什么方法。

我更喜欢链式付款，因为它允许客人结帐（PayPal 帐户外的信用卡付款），但有一定的限制，并且很容易让用户收到资金并自动将 15% 的折扣转发到您的帐户。这消除了在支付流程之外收集资金的需要。这意味着没有发票或没有丢失的会费！

Website Payments Pro 仅提供信用卡付款，但您还需要为 PayPal 付款提供 Express Checkout。您还可以灵活地托管订单表单，以便控制用户看到的内容。缺点是您必须在付款之外从用户那里收取资金。例如按月开票、计费协议或人工处理。

这是我们用来允许客人结帐的标准。请记住，这些是由于规则和规定，而不是 PayPal 的选择。

*   信用卡在 PayPal 帐户之外的终身购买限额为 10 次
*   用户的电子邮件地址不得附加到现有的 PayPal 帐户

我没有直接的答案给你，但希望这有助于你做出决定。

# web-services - 需要请求时间戳的 Web 服务 - 获得准确时间的智能方法？

> ID：15367238
> 
> 赞同：0
> 
> 时间：2013-03-12T16:49:11.253
> 
> 标签：web-services

我正在我的移动应用程序中使用 Web 服务，该服务需要散列以及其他信息，以及生成请求的时间戳。如果时间过了几分钟，那么我的请求将失败。

由于我不能依赖我的用户在他们的设备上拥有正确的时间，我已将应用程序更改为首先向我的服务器发出当前时间的请求，然后向 Web 服务发出实际请求。这有效，但看起来很乱。我是否以错误的方式处理这个问题？有没有解决这个问题的通用方法？

# facebook - 用户登录时，我的应用程序上的安全消息

> ID：15367247
> 
> 赞同：0
> 
> 时间：2013-03-12T16:49:39.583
> 
> 标签：facebook, login, message, facebook-login

我收到此消息：“请像对待密码一样对待上面的 URL，不要与任何人共享”

当我的用户登录我的应用程序时。我在调试时查看了代码，发现保留 url 不再包含访问令牌。我查看了图形 api 文档，并没有看到任何变化。

有没有人遇到这个消息？我怎样才能避免它？并获得 access_token ...？

谢谢 AsGr

# jquery - jQuery 控制 HTML 表单验证的 CSS3 动画

> ID：15367248
> 
> 赞同：1
> 
> 时间：2013-03-12T16:49:41.790
> 
> 标签：jquery, css

我正在构建一个验证表单的小插件。我正在尝试添加一个动画，将输入背景从白色变为红色（作为警告标志）。我还是 CSS3 动画的新手，实现 CSS3 动画的最佳方式是什么？

以下添加了动画发生的类：

```
$(this).addClass('animationBG'); 
```

那么动画本身就是：

```
.animationBG{
    -webkit-animation-name: bgAnimation;
    -webkit-animation-duration: 3s;
    animation-iteration-count: infinite;
}

@-webkit-keyframes bgAnimation {
  from {
    background-color:#fff;
  }

  to {
    background-color:red;
  }
} 
```

[完整代码在这里。](http://jsfiddle.net/y9JAF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:40:34.163

这是一个解决方案。这涉及使用具有透明度的单独绝对定位的 div。

[http://jsfiddle.net/jessekinsman/xywKm/3/](http://jsfiddle.net/jessekinsman/xywKm/3/)

的HTML

```
 <div class="container">
    <div class="background">  
    </div>
    <input type="text" name="test" class="white" /> 
</div> 
```

CSS

```
* {
    box-sizing: border-box;
    -webkit-box-sizing: border-box;

}
.container {
    width: 200px;
    height: 50px;
    overflow: hidden;
    position: relative;
}

.background {
    position: absolute;
    left: 100%;
    background: red;
    width: 100%;
    height: 100%;
    -webkit-transition: left 300ms linear;
    transition: left 300ms linear;
    opacity: 0.5;
    -webkit-opacity: 0.5;
    z-index:0;
}
.background.view {
    left: 0;
}

.white {
    background-color: white;
}
.red {
    background-color: red;
}
input {
    background-color: transparent none;
    width: 100%;
    height: 100%;
    z-index: 100;
} 
```

jQuery 只是为了添加和删除类

```
$("input").focus(function(e){
    $(".background").addClass("view");
});
$("input").focusout(function(e){
    $(".background").removeClass("view");
}); 
```

可能是最好的选择，除非您在输入元素上有一些您不想松散的特定样式。然后你应该使用背景图像。

这是该小提琴的链接 [http://jsfiddle.net/jessekinsman/5aL4L/1/](http://jsfiddle.net/jessekinsman/5aL4L/1/)

也不确定您是否希望动画循环直到满足某些条件。如果是这种情况，您应该使用 css 转换选项并让它循环直到满足条件。

# javascript - npm git 存储库不更新版本

> ID：15367250
> 
> 赞同：21
> 
> 时间：2013-03-12T16:49:51.363
> 
> 标签：javascript, node.js, configuration, npm, build-system

我有一个 git repo，我正在尝试将它设置为我的项目中的依赖项。使用 NPM，我`package.json`看起来像这样：

```
"devDependencies": {
  "grunt": "~0.4.0",
  "grunt-contrib-connect": "~0.2.0",
  "grunt-contrib-watch": "~0.3.1",
  "custom":     "git://github.com/myGitHubRepo/repo.js.git#b7d53a0cfbe496ad89bde6f22324219d098dedb3",
  "grunt-contrib-copy": "~0.4.0"
} 
```

在第一个

```
npm install 
```

它安装所有东西并毫无问题地获取存储库。但是，如果我将这个提交哈希更改为让我们说

```
"custom":     "git://github.com/myGitHubRepo/repo.js.git#d6da3a0...", // a different one 
```

它不更新！谁能指出我怎么能得到这种行为？

我只是想分享这段代码，并能够在某个时候更改这个版本，并且`npm`会自动更新它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-19T15:13:35.463

好的，这就是它的完成方式。

我也很困惑。

所以我在 git@github.com:myModule/MySweetModule.git 有一个私有 npm 模块我刚刚发布了最新的标记版本。不幸的是，我无法弄清楚它是如何工作的，但它对你的主人很有效。SOOO 你的主分支可以是你的集成分支，你有阶段分支来构建下一个版本。版本完成后，只需将其合并到 master 并增加您的私有 repo 的版本（因此您的私有 repo 现在从 1.0.0 变为 1.0.1）。如果您调用`npm install`它将更新您的 repo，如果 master 的 package.json 版本大于当前工作 repo。它总是需要最新的回购。

## 好像很烂

我同意。所以让我们做一个更好的方法！如果您`tags`为您的私人回购发布，您可以通过以下方式引用它们`"custom": "git+ssh://git@github.com:usr/proj.git#TAG_NAME"`

所以我有一个名为的标签`0.1.0`，然后我会像这样对 package.json 中的 url 进行版本控制。`"custom": "git+ssh://git@github.com:usr/proj.git#0.1.0"`

我相信这是您回答的最佳方法。但我不是吉塔尼斯达人

## **警告**

如果您尝试返回一个版本，它似乎不起作用。所以从版本`0.2.2`到`0.2.1`它不会更新你的项目。如果您回滚版本，请确保您这样做`npm remove myProj`。`npm install`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-19T09:21:24.720

手动更新那个特定的包对我有用。

并自动执行此操作，我将此安装后脚本添加到我的 package.json

```
"scripts": {
 ...
 "postinstall": "npm update custom"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-28T06:21:49.923

[正如@Nestoro](https://stackoverflow.com/a/68438071)所建议的，手动更新包也对我有用：

```
npm update
npm install <your package name> 
```

# c# - 循环遍历另一个对象数组中的数组对象

> ID：15367253
> 
> 赞同：-3
> 
> 时间：2013-03-12T16:49:59.130
> 
> 标签：c#, .net, arrays, object, loops

我有一个对象数组，其中调用`objStud`了另一个数组

我如何循环和显示它们？

这是一张图片，您可以看到`objStud`它的样子

![在此处输入图像描述](../Images/b03aafa349634fabfa8d20fff946a039.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:52:24.687

您可以使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)先展平：

```
foreach(var fee in objStud.SelectMany(x => x.Fees))
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:52:28.240

只需使用嵌套`foreach`语句

```
foreach (Student stud in objStud)
{
    foreach (Fee in stud.Fees)
    {
        // Do something with stud and/or fee
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:57:03.503

您可以在循环和显示值时使用“foreach”。 [这](http://msdn.microsoft.com/en-us/library/aa288453%28v=VS.71%29.aspx)是关于如何访问要显示的数据的一个非常简单且很好的示例。

这还将教您数组背后的概念。玩得开心！

# functional-programming - 如何在 OCaml 中编写“结果？1：0”？

> ID：15367254
> 
> 赞同：2
> 
> 时间：2013-03-12T16:50:00.800
> 
> 标签：functional-programming, ocaml

在`java`我们可以写`result?1:0`。这是一种根据`result bool`.

我怎么能在 OCaml 中写这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:00:32.440

听起来这是一个重复的问题。但是，请注意 OCaml 中的所有内容都是一个表达式。所以答案是`if result then 1 else 0`。您可能需要根据上下文将其括起来。（在 C 系列中，我有时用于您的表达的形式是`!!result`。）

# android - 在 xml 中或以编程方式添加片段？

> ID：15367256
> 
> 赞同：1
> 
> 时间：2013-03-12T16:50:12.240
> 
> 标签：android, android-fragments

我想知道是否有任何理由做一个而不是另一个。我一直在通过 xml 添加片段并使用显示/隐藏。我想了解替换/添加/删除，所以我尝试以编程方式添加它们。这导致问题[片段删除问题](https://stackoverflow.com/questions/15359993/fragment-remove-issue)，对我来说似乎不那么直截了当。

通过 xml 放置它们似乎也很容易，而我仍然不确定如何以编程方式（因为您没有对要添加到的视图的 xml 中的片段的引用？）。我有什么理由以编程方式添加片段吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:56:25.267

在 XML 中添加的片段不能被替换或删除，除了这个主要限制选择对您来说最简单的方法。

# c++ - 将 operator<< 与 const 对象一起使用

> ID：15367257
> 
> 赞同：0
> 
> 时间：2013-03-12T16:50:13.140
> 
> 标签：c++, operator-overloading

我在为 const 对象重载 operator<< 时遇到问题。我找不到问题所在

```
#include <iostream>
using namespace std;
class T
{
    friend ostream& operator<<(ostream& os,T& t)
    {
        os << "Val : " << t.value << endl;
        return os;
    }
private:
    int value;
public:
    T(int v) { value=v; }
    int getValue() const { return value; }
};

int main()
{
    const T t(2);
    cout << t;
    return 0;
} 
```

编译器消息：

> 错误 C2679：二进制“<<”：未找到采用“const T”类型右侧操作数的运算符（或没有可接受的转换）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:52:41.247

您`operator<<()`不适用于`const`对象，因为您已将其声明为

```
friend ostream& operator<<(ostream& os,T& t) 
```

您需要告诉编译器您希望能够将它与`const`对象一起使用：

```
friend ostream& operator<<(ostream& os, const T& t) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:52:43.323

您`operator<<`通常应该通过`const`引用来获取它的论点：

```
friend ostream& operator<<(ostream& os, const T& t) 
```

非`const`引用不能绑定到`const`对象。这是有道理的，否则您将能够`const`通过引用修改对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:53:32.113

只需添加一个 const ，它应该可以工作：

`friend ostream& operator<<(ostream& os,const T& t)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:52:01.593

在行中`T&`进行`const`引用：

```
friend ostream& operator<<(ostream& os,T& t) 
```

所以它变成：

```
friend ostream& operator<<(ostream& os,const T& t) 
```

或者，摆脱`&`：

```
friend ostream& operator<<(ostream& os,T t) 
```

两者都会在您的代码中给出以下结果：

`Val : 2`

在控制台中。

# php - 卷曲 PHP v5.2.9

> ID：15367261
> 
> 赞同：1
> 
> 时间：2013-03-12T16:50:18.973
> 
> 标签：php, curl, centos

当我`phpinfo();`在有关 cURL 的警告下方执行以下操作时：

> *安全警告：请将上面的 URL 视为您的密码，不要与任何人共享。*

我的服务器是 5.2.9 PHP 版本的 centOS，你认为我必须重新安装 curl 吗？

# codeigniter - Codeigniter：验证两个字段

> ID：15367265
> 
> 赞同：4
> 
> 时间：2013-03-12T16:50:32.610
> 
> 标签：codeigniter

我有两个数字字段来收集用户的数据。需要使用 codeigniter 表单验证类对其进行验证。

条件：

1.  第一个字段可以为零
2.  第二个字段不能为零
3.  第一个字段不应等于第二个字段
4.  第二个字段应该大于第一个字段

目前我使用

> $this->form_validation->set_rules('first_field', '第一个字段', 'trim|required|is_natural');
> 
> $this->form_validation->set_rules('second_field', '第二字段', 'trim|required|is_natural_no_zero');

但是，如何验证上述第 3 和第 4 条件？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T14:51:43.950

谢谢 dm03514。我通过下面的回调函数让它工作。

```
$this->form_validation->set_rules('first_field', 'First Field', 'trim|required|is_natural');
$this->form_validation->set_rules('second_field', 'Second Field', 'trim|required|is_natural_no_zero|callback_check_equal_less['.$this->input->post('first_field').']'); 
```

回调函数是：

```
function check_equal_less($second_field,$first_field)
  {
    if ($second_field <= $first_field)
      {
        $this->form_validation->set_message('check_equal_less', 'The First &amp;/or Second fields have errors.');
        return false;       
      }
      return true;
  } 
```

现在一切似乎都很好:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T16:53:21.130

您可以使用回调为 3 和 4 编写自己的验证函数

[http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)

来自文档的示例

```
<?php

class Form extends CI_Controller {

    public function index()
    {
        $this->load->helper(array('form', 'url'));

        $this->load->library('form_validation');

        $this->form_validation->set_rules('username', 'Username', 'callback_username_check');
        $this->form_validation->set_rules('password', 'Password', 'required');
        $this->form_validation->set_rules('passconf', 'Password Confirmation', 'required');
        $this->form_validation->set_rules('email', 'Email', 'required|is_unique[users.email]');

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('myform');
        }
        else
        {
            $this->load->view('formsuccess');
        }
    }

    public function username_check($str)
    {
        if ($str == 'test')
        {
            $this->form_validation->set_message('username_check', 'The %s field can not be the word "test"');
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    }

}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T11:03:27.083

如果您使用 HMVC 并且接受的解决方案不起作用，则在控制器中初始化后添加以下行

```
$this->form_validation->CI =& $this; 
```

所以会是

```
$this->load->library('form_validation');
$this->form_validation->CI =& $this; 
```

在您的控制器中。

# android - 未调用图片回调方法

> ID：15367266
> 
> 赞同：0
> 
> 时间：2013-03-12T16:50:33.107
> 
> 标签：android

我是安卓新手。`camera`我想制作一个可以使用对象拍照的应用程序。这是我的简单代码

```
public class Main extends Activity {
    Camera camera;
    ImageView iv;
    Button b;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        camera = camera.open();
        b = (Button) findViewById(R.id.bStartCamera);
        iv = (ImageView) findViewById(R.id.imageView1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                if (camera != null) {
                    camera.takePicture(null, null, new CallBack());
                } else {
                    Log.d("", "Camera Object is Null");
                }

            }
        });

    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        if (camera != null) {
            camera.release();
            camera = null;
        }
    }

    class CallBack implements PictureCallback {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.d("", "In the Callback Method");
        }

    }

} 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.homescreensetter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.CAMERA"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.homescreensetter.Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

`onPictureTaken`我在我的设备上测试了这段代码，它有一个后置摄像头，但是当我拍照时，回调方法从未被调用过。请任何形式的帮助都会非常感谢，谢谢

# button - 单击按钮时如何在按钮上打印值？

> ID：15367269
> 
> 赞同：1
> 
> 时间：2013-03-12T16:50:39.240
> 
> 标签：button, unity3d

我想在单击按钮时在按钮上打印一个值。这怎么可能？

**[更新]**

```
using UnityEngine; 
using System.Collections; 
public class tic : MonoBehaviour 
{ 
    void OnGUI() { 
        string value=""; 
        if(GUI.Button(new Rect(10,10,50,50),value)) { 
            value="y"; 
            print ("y"); 
            GUI.Button(new Rect(10,10,50,50),value); 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:14:28.533

调整[Unity gui 示例](http://docs.unity3d.com/Documentation/Components/GUIScriptingGuide.html)，您可以通过将该文本存储在变量中并在单击按钮时更改它来修改按钮文本，如下所示：

```
using UnityEngine;
using System.Collections;

public class GUITest : MonoBehaviour {
    public string ButtonText = "Click Me"
    void OnGUI () {
        if (GUI.Button (new Rect (10,10,150,100), ButtonText )) {
            ButtonText = "Huzzah!";
        }
    }
} 
```

该按钮将首先读取为“单击我”，然后将更改一次为“Huzzah”。

如果您不想更改按钮中的实际文本，它会变得有点困难。您需要创建一个位于按钮上方的标签，我不建议您走这条路。它看起来不太好，标签不会随按钮移动：

```
using UnityEngine;
using System.Collections;

public class GUITest : MonoBehaviour {
    public bool DrawLabel = false;
    public string LabelText = "Huzzah"
    void OnGUI () {
        if (GUI.Button (new Rect (10,10,150,100), "Click Me")) {
            DrawLabel = true;
        }
        if(DrawLabel){
            // use the same rect parameters as you did to create the button
            GUI.Label (new Rect (10, 10, 150,100), LabelText);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T14:42:41.957

你可以这样做；

```
var ControlsButton = GameObject.Find("ControlsButton");
ControlsButton.GetComponentInChildren<Text>().text = "Accelerometer" 
```

# php - 带有 301 重定向的 fopen() 问题

> ID：15367274
> 
> 赞同：3
> 
> 时间：2013-03-12T16:50:54.410
> 
> 标签：php, file, redirect

我正在尝试连接到执行 301 重定向的 URL。

```
<?php
$fp = fopen('http://finance.yahoo.com/d/quotes.csv?s=RHT+MSFT&f=sb2b3jk', 'r');

if ($fp === false) {
  die('Failed to open resource.');
}

while (!feof($fp)) {
  echo fgets($fp);
}

fclose($fp); 
```

在 PHP 5.3.15 中，输出：

```
$ php fopen.php 
"RHT",51.15,51.14,46.34,62.75
"MSFT",27.73,27.72,26.26,32.95 
```

在 PHP 5.4.12 中，这不会返回任何内容（没有错误或警告）：

```
$ php fopen.php 
$ 
```

[`allow_url_fopen`](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)`On`在两种环境中都设置为。

我发现了以下[错误报告](https://bugs.php.net/bug.php?id=62524)。但是，它在[PHP 5.4.12](http://www.php.net/ChangeLog-5.php#5.4.12)中被标记为已解决。

那么，我错过了什么？

# c++ - 使用 SDL_CreateRGBSurface 创建新的 SDL_Surface 时遇到的困难

> ID：15367275
> 
> 赞同：1
> 
> 时间：2013-03-12T16:50:54.997
> 
> 标签：c++, sdl

我正在用 c++ 创建一个基本的基于控制台的图像处理工具，到目前为止，我发现创建对 RGB 值进行操作的函数非常容易！

我现在想做的是创建用于模糊、锐化和调整图像大小的功能。我知道为了做到这一点，我必须将新像素映射到新图像。我在使用这个内置的 SDL 函数创建一个新的空白表面时遇到了一点问题，我打算在该表面上映射新像素：

```
SDL_Surface *SDL_CreateRGBSurface(Uint32 flags, int width, int height, int depth, Uint32 Rmask, Uint32 Gmask, Uint32 Bmask, Uint32 Amask); 
```

我的程序的其余部分使用`Uint8*`而不是`Uint32`，所以我不确定这将如何影响程序。此外，我不是 100% 确定所有参数以及它们的作用/用途：即标志和深度。

有人可以就如何使用此功能正确创建新的 SDL_Surface 给我一些建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:15:21.007

这里有一个代码示例，您可以查看：[http ://wiki.libsdl.org/moin.fcg/SDL_CreateRGBSurface](http://wiki.libsdl.org/moin.fcg/SDL_CreateRGBSurface)

具体来说，您正在寻找的行是：

```
surface = SDL_CreateRGBSurface(0,width,height,32,0,0,0,0); 
```

这些标志用于各种用途，但您应该可以将其设置为 0。至于深度，这是指您正在查看的每个像素的位数。所以在这种情况下，8 * 4 是 32（包括 alpha）。

我想你已经加载了图像。如果是这样，您可以使用这个加载的图像来获取每像素的位数：

```
surface->format->BitsPerPixel 
```

# node.js - 在 node.js 中读取 char 驱动程序文件？

> ID：15367279
> 
> 赞同：1
> 
> 时间：2013-03-12T16:51:06.057
> 
> 标签：node.js, nonblocking

我已经实现了一个 Linux 驱动程序（beaglebone），它通过 SPI 查询一些硬件并将接收到的数据复制到 kfifo 中（如果没有清空，它可能会变满）。- 通过对 char 设备文件（我们称之为 /dev/foo）执行读取来清空此 kfifo。- 用户态程序负责读取正确的 fifo 条目大小（或它的倍数）。- 通过 sysfs 条目启动和停止驱动程序。

示例 C 用户态程序以阻塞模式读取此文件（即，当数据可用时读取返回）。

现在这是我的问题：我在 beaglebone 上有一个运行在 node.js 中的服务器，用于管理目的，并且还想让它“收集”数据（在 /dev/foo 上）并通过 websockets 发送它。

我真的不知道该怎么做，因为 /dev/foo 不是常规文件（因此 fs.watch 不起作用），并且数据继续随机可用。

问题： - 我可以用节点的标准库解决这个问题吗（比如流等？） - 有没有一个节点模块可以解决我的问题？- 或者我必须自己编写一个节点模块（使用 libuv？）

感谢您对这些要点的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-06T13:17:55.490

我知道这有点老了，但是 mamahuhu 给了我正确的想法！

这是我所做的：

```
var fs = require('fs');

var readStream = fs.createReadStream("/dev/foo");

readStream.on('data', function (data) {
    console.log(data);
}); 
```

# html - 为什么不间断空格 ( ) 转换为破折号 (-)？

> ID：15367285
> 
> 赞同：6
> 
> 时间：2013-03-12T16:51:16.043
> 
> 标签：html, html-email, html-entities

我正在创建一个 HTML 时事通讯，我需要显示一些具有指定高度、宽度和块级显示的空锚链接，但[Gmail](https://en.wikipedia.org/wiki/Gmail)似乎删除了空`<a>`链接，所以我输入`&nbsp;`了链接，它就像一个魅力，但它呈现`&nbsp;`为`-`特点。

我检查了 Mozilla Firefox 和 Google Chrome，两个浏览器都存在问题。有任何想法吗？

**代码示例：**

```
<table cellpadding="0" cellspacing="0" width="100%">
    <tbody>
        <tr>
            <td height="42" width="49" style="height: 42px; width: 49px"></td>
            <td height="42" width="123" style="height: 42px; width: 123px">
                <a href="http://www.youtube.com/user/adsf" style="display: block; height: 42px; width: 123px">&nbsp;</a>
            </td>
            <td height="42" width="79" style="height: 42px; width: 79px">
                <a href="http://asdf.asdf.dsf" style="display: block; height: 42px; width: 79px">&nbsp;</a>
            </td>
            <td height="42" width="129" style="height: 42px; width: 129px">
                <a href="https://www.facebook.com/asdfasdf" style="display: block; height: 42px; width: 129px">&nbsp;</a>
            </td>
            <td height="42" width="111" style="height: 42px; width: 111px">
                <a href="https://twitter.com/adfdasff" style="display: block; height: 42px; width: 111px">&nbsp;</a>
            </td>
            <td height="42" width="269" style="height: 42px; width: 269px"></td>
        </tr>
    </tbody>
</table> 
```

事实上，它与 Gmail 无关。这个问题也存在于我的 HTML 项目中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T16:54:29.000

我想问题是空格带有下划线，就像通常的链接一样。您必须设置`text-decoration`停止此操作。

由于它是 HTML 时事通讯，我假设您想内联执行此操作：

```
<a style="text-decoration: none;">&nbsp;</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T16:55:42.087

你有三个解决方案：

**1-**`<br/>`在你的`<a>`元素内部使用，即：

```
<a href="#"><br/></a> 
```

如果要控制元素的高度，请使用：

```
<a href="#" style="height:20px;overflow:hidden;"><br/></a> 
```

**2-**`text-decoration:none`与_`&nbsp;`

```
<a href="#" style="text-decoration:none;">&nbsp;</a> 
```

**3-**`text-indent`与`height`和​​一起使用`width`

```
<a href="#" style="text-indent:999px;width:0px;height:0px;overflow:hidden;">&nbsp;</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:55:15.590

添加

```
a { text-decoration: none; } 
```

或添加内联：

```
<a href="path" style=" text-decoration: none;"> &nbsp; </a> 
```

默认情况下，锚标签具有`text-decoration: underline;`.

# java - 如何使用我自己的列名在 JTable 中显示 MS Access DB？

> ID：15367287
> 
> 赞同：0
> 
> 时间：2013-03-12T16:51:20.120
> 
> 标签：java, swing, ms-access, jtable, jdbc-odbc

我正在尝试将一个表输入到 JTable，但不使用 Vector()，因为它采用了我在 DB（短名称）中输入的列名，现在我想更改列名，但我不明白如何要做到这一点。

```
JTable table = new JTable(data, columNames); 
/*
can use if both are Vectors, but I have to change columnNames with String[] columnNames     
*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:00:10.797

见[JTableHeader.setColumnModel(TableColumnModel columnModel)](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/JTableHeader.html#setColumnModel%28javax.swing.table.TableColumnModel%29)

例如

```
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableColumnModel;
import javax.swing.table.TableColumn;

public class TablePreferredSize {

    private String[] head = {"One", "Two", "Three", "Four", "Five", "Six"};
    private String[][] data = new String[25][6];
    private JTable table = new JTable(data, head);
    private DefaultTableColumnModel columnModel = new DefaultTableColumnModel();
    private TableColumn column = new TableColumn();

    public TablePreferredSize() {
        table.setRowHeight(23);
        table.setIntercellSpacing(new Dimension(1, 1));
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        column = new TableColumn();
        column.setModelIndex(0);
        column.setHeaderValue("apple");
        columnModel.addColumn(column);
        column = new TableColumn();
        column.setModelIndex(1);
        column.setHeaderValue("banana");
        columnModel.addColumn(column);
        column = new TableColumn();
        column.setModelIndex(2);
        column.setHeaderValue("pear");
        columnModel.addColumn(column);
        column = new TableColumn();
        column.setModelIndex(3);
        column.setHeaderValue("cherry");
        columnModel.addColumn(column);
        column = new TableColumn();
        column.setModelIndex(4);
        column.setHeaderValue("orange");
        columnModel.addColumn(column);
        column = new TableColumn();
        column.setModelIndex(5);
        column.setHeaderValue("lemon");
        columnModel.addColumn(column);
        table.setColumnModel(columnModel);
        //table.setPreferredScrollableViewportSize(new Dimension(rowWidth, 12 * rowHeight));
        JScrollPane scrollPane = new JScrollPane(table);
        JFrame frame = new JFrame("Table PreferredSize");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(scrollPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TablePreferredSize t = new TablePreferredSize();
            }
        });
    }
} 
```

# mysql - 条件触发器的语法错误

> ID：15367290
> 
> 赞同：0
> 
> 时间：2013-03-12T16:51:28.907
> 
> 标签：mysql, sql, triggers

```
DELIMITER $$
    CREATE TRIGGER  pm_session_one_Delete
      AFTER UPDATE
      ON pm_sessions
      FOR EACH ROW
        BEGIN

          IF NEW.delete != OLD.delete THEN

               UPDATE pm
                 SET
                delete =  NEW.delete 

                WHERE
                NEW.id = pm.pm_session  ;

          END IF;

     END $$
DELIMITER ; 
```

我得到这个错误

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'delete = NEW.delete WHERE NEW.id = pm.pm_session ;' 附近使用的正确语法 在第 11 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:52:35.750

这里，

```
 UPDATE pm
 SET
 `delete` =  NEW.delete 
```

`DELETE`是保留关键字。

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# java-me - 在 lwuit 表单内显示带有多行消息的警报

> ID：15367292
> 
> 赞同：-1
> 
> 时间：2013-03-12T16:51:32.687
> 
> 标签：java-me, lwuit, lwuit-textarea

尝试在 lwuit 表单上显示对话框警报时遇到一个奇怪的异常。

```
java.lang.NullPointerException
    at com.sun.lwuit.TextArea.shouldShowHint(+21)
    at com.sun.lwuit.TextArea.calcPreferredSize(+4)
    at com.sun.lwuit.Component.preferredSize(+63)
    at com.sun.lwuit.Component.getPreferredSize(+4)
    at com.sun.lwuit.Component.getPreferredW(+4)
    at com.sun.lwuit.layouts.FlowLayout.layoutContainer(+139)
    at com.sun.lwuit.Container.doLayout(+8)
    at com.sun.lwuit.Container.layoutContainer(+16)
    at com.sun.lwuit.Container.doLayout(+40)
    at com.sun.lwuit.Container.layoutContainer(+16)
    at com.sun.lwuit.Container.doLayout(+40)
    at com.sun.lwuit.Container.layoutContainer(+16)
    at com.sun.lwuit.Container.revalidate(+18)
    at com.sun.lwuit.Dialog.showPacked(+107)
    at com.sun.lwuit.Dialog.showImpl(+76)
    at com.sun.lwuit.Dialog.show(+5)
    at com.sun.lwuit.Dialog.showDialog(+9)
    at com.test.MainView.ShowAlert(+82)
    at com.test.MainView.ShowGameOverAlert(+45)
    at com.test.MainView.<init>(+209)
    at com.test.Main.startApp(+29)
    at javax.microedition.midlet.MIDletProxy.startApp(+7) 
```

我使用了以下两段代码：

```
Dialog validDialog = new Dialog("Alert");
validDialog.setScrollable(false);
validDialog.setIsScrollVisible(false);
validDialog.setTimeout(5000); // set timeout milliseconds
TextArea textArea = new TextArea("...."); //pass the alert text here
textArea.setFocusable(false);
textArea.setIsScrollVisible(false);
validDialog.addComponent(textArea);
validDialog.show(0, 100, 10, 10, true); 
```

Ref.:[使用 LWUIT 弹出警报](https://stackoverflow.com/questions/6773719/alert-pop-up-with-lwuit)

和

```
Dialog d = new Dialog(title);
TextArea l = new TextArea(1, 20);
l.setText(message);
l.setHint("no hint");
l.setSingleLineTextArea(false);
l.setEditable(false);
l.setGrowByContent(true);

d.addComponent(l);
d.setDialogType(Dialog.TYPE_INFO);
d.setDialogPosition(BorderLayout.CENTER);
d.showDialog(); 
```

如果有人可以向我指出 lwuit 的源代码，那将是最有帮助的。
我在谷歌代码上发现了一个名为 lwuitfixes 的项目，它在 TextArea.java 和官方网站[https://lwuit-incubator.dev.java.net/](https://lwuit-incubator.dev.java.net/)中没有任何功能“shouldShowHint”，从不打开！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:20:18.843

```
l.setTextEditorEnabled(false); 
```

停止异常。（通过浏览我正在使用的 jar 的 .class 文件得到提示）

可能从未见过比这更糟糕的 API。

要删除 TextArea 的白色背景，我必须覆盖它的 onPaint 并用不同的颜色填充图形。

# jquery - 如果选择了 ASP.Net 下拉值，jQuery 插件将不会显示

> ID：15367294
> 
> 赞同：0
> 
> 时间：2013-03-12T16:51:36.907
> 
> 标签：jquery, asp.net, drop-down-menu

我在 ASP.Net 中有一个下拉列表，其中包含“否”和“是”选项。选择“是”时，我希望jQuery插件显示在DDL下方。我可以通过调用它来显示插件，但是我有一个不起作用的 if 语句。

```
 <script type="text/javascript">
    $(document).ready(function () {
        if ($('#<% ddlColorChart.Yes %> option:selected')) {
            $('#colorpickerBox').ColorPicker({ flat: true });
        }
    });
</script> 
```

我收到以下编译器错误消息：编译器错误消息：CS1002：；预期的

我找不到我缺少分号的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:53:16.973

不应该

```
if ($('#<% ddlColorChart.Yes %> option:selected')) { 
```

是

```
if ($('#<%=ddlColorChart.ClientID %> option:selected')) { 
```

总结一下你需要渲染控件的ID

因此，我将 .Yes 属性更改为使用 .ClientID

你也缺少一个 = <%= 这相当于 Response.Write。因此，这就是您收到有关分号的编译错误的原因。

完整示例：

```
<script type="text/javascript">
    $(document).ready(function () {
        if ($('#<%=ddlColorChart.ClientID %> option:selected')) {
           if($(this).val() == "Yes"){
              $('#colorpickerBox').ColorPicker({ flat: true });
           }
        }
    });
</script> 
```

# mysql - SQL 查询和地理位置坐标

> ID：15367299
> 
> 赞同：1
> 
> 时间：2013-03-12T16:51:52.200
> 
> 标签：mysql, geospatial

前几天我和一位同事发生了激烈的争论，想咨询 stackoverflow 社区哪种方法是可行的，甚至是正确的。

第一种方法（我实施的解决方案）是围绕一些给定坐标“画一个圆”然后查询数据库以检索一定范围内的所有“标记”的标准方法，范围从 1 到 25 英里。这种方法有效，并给出了准确的结果，但有时在密集区域中有许多“标记”时会有点慢。

同事的方法如下：取给定的坐标，上下四舍五入，查询数据库找到“关闭标记”，然后用上述方法执行另一个查询。

为了更清楚一点，假设我们的坐标为 -32.371267 和 115.827467。我们将运行查询以查找位于 -32 和 116 以及 33 和 115 中的周围“标记”。

我试图争辩说这是不可能的，并且会导致性能下降，因为它需要一个内部连接而不是一个大型查询，但到目前为止，他的实现是否可行仍然未知。

有人对此有任何想法吗？

# c++ - 为什么即使没有使用指向指针的指针作为参数调用函数，这也能工作？

> ID：15367301
> 
> 赞同：0
> 
> 时间：2013-03-12T16:52:03.950
> 
> 标签：c++, pointers, bitmap, msdn, direct2d

在 MSDN 的代码中，有这样的：

```
HRESULT DemoApp::LoadBitmapFromFile(
    ID2D1RenderTarget *pRenderTarget,
    IWICImagingFactory *pIWICFactory,
    PCWSTR uri,
    UINT destinationWidth,
    UINT destinationHeight,
    ID2D1Bitmap **ppBitmap
    ) 
```

还有这个：

```
hr = LoadBitmapFromFile(
                m_pRenderTarget,
                m_pWICFactory,
                L".\\sampleImage.jpg",
                100,
                0,
                &m_pBitmap
                ); 
```

当 m_pBitmap 实际上是指向 ID2D1Bitmap 对象 (ID2D1Bitmap *m_pBitmap) 而不是指向 ID2D1Bitmap 对象的指针时，它是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:54:24.960

请注意，传递的参数不是`m_pBitmap`，而是`&m_pBitmap`。

If `m_pBitmap`is a `ID2D1Bitmap*`then 当你用 获取它的地址时`&`，你会得到一个`ID2D1BitMap**`- 一个指向指针的指针，正如函数所期望的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:54:36.970

获取指针的地址使其成为指向指针的指针。

```
int i = 0;
int *pi = &i // &i is the address of i (or a pointer to the int i)
&pi // &pi is the address of pi (or a pointer to the pointer to i) 
```

因此，`&m_pBitmap`创建一个指向指针的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:58:09.993

传递指针的地址会使参数指针指向与类型完全相同的指针。

# mysql - MySQL - 选择大于或特定值

> ID：15367306
> 
> 赞同：0
> 
> 时间：2013-03-12T16:52:09.993
> 
> 标签：mysql

这是一个简单的问题，但我被困住了。基本上我需要在查询中添加以下 AND 语句：

```
AND  a.d_max > '0' AND  a.max > '0' 
```

但我也想使最大值大于 0 或 = u，因为如果将其设置为 u，则意味着无限制。所以像：

```
AND  a.d_max > '0' OR a.d_max = u AND  a.max > '0' OR a.max = u 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:56:07.220

我认为您的逻辑没问题，但您只是缺少一些括号：

```
AND
  (a.d_max > '0' OR a.d_max = u) AND (a.max > '0' OR a.max = u) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:00:26.663

您可以使用括号对表达式/条件的评估进行优先级排序：

在你的情况下，我认为你需要这个：

```
AND  (a.d_max > '0' OR a.d_max = u) AND  (a.max > '0' OR a.max = u) 
```

# python - 带有 unicode 的 pydev 的奇怪行为

> ID：15367308
> 
> 赞同：1
> 
> 时间：2013-03-12T16:52:11.567
> 
> 标签：python, pydev

我正在尝试修复 python 项目中的错误。当客户端在使用 PyQt 编写的程序中输入一些像 'é' 这样的 utf8 字符时，会出现错误。客户端以控制台模式执行程序（激活virtualenv并执行脚本main.py）但是当我在Eclipse和Pydev下运行相同的程序时，我无法重现问题（一切正常）。此外，我确信 Eclipse 使用与客户端相同的 virtualenv。在 Eclipse 中运行程序怎么可能与在命令行中运行不同呢？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:22:59.687

根据您的评论，有一些事情正在发生。首先，`toPlainText`已经返回了一个 unicode 对象。所以问题就在这里：

```
>>> str("é")
'\x82'
>>> unicode(str("é"))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0x82 in position 0: ordinal
not in range(128) 
```

根据[http://docs.python.org/2/howto/unicode.html](http://docs.python.org/2/howto/unicode.html)，“如果您不使用编码参数，则将使用 ASCII 编码进行转换，因此大于 127 的字符将被视为错误”。

因此，如果您仍然需要编码，则添加一个 encoding [1](http://docs.python.org/2/library/codecs.html#standard-encodings)参数，例如：

```
>>> unicode(str("é"), 'latin_1')
u'\x82' 
```

# javascript - 向现有 Javascript 对象添加方法的最佳方式

> ID：15367316
> 
> 赞同：10
> 
> 时间：2013-03-12T16:52:36.523
> 
> 标签：javascript, prototype

我收到了一个看起来像这样（非常简化）的文档的 ajax 提要：

```
aDocs = [{title:'new doc', ext:'pdf'}, {title:'another', ext:'xlsx'}]; 
```

我将遍历 aDocs 数组并显示有关每个文档的信息，同时向每个文档添加一些方法，这些方法将允许修改 HTML 以进行显示并进行 API 调用以更新数据库。

[我在这里](https://stackoverflow.com/questions/7015693/how-to-set-the-prototype-of-a-javascript-object-that-has-already-been-instantiat)读到，为了向现有对象添加方法，您可以使用该`__proto__`属性。类似于以下内容：

```
function Doc(){}
Doc.prototype.getExt = function(){return this.ext}
Doc.prototype.getTitle = function(){return this.title}
for (var i=0; i<aDocs.length; i++){
  aDocs[i].__proto__ = Doc.prototype
} 
```

根据上面那篇文章，这不是官方的 javascript，IE 不支持（永远不会），并且可能会在 webkit 浏览器中被弃用。

这是一个替代方案：

```
function getExt(){ return this.ext }
function getTitle(){return this.title}
for (var i=0; i<aDocs.length; i++){
  aDocs[i].getExt = getExt;
  aDocs[i].getTitle = getTitle;
} 
```

这第二种选择是否可行且有效？还是我重新创建了这些功能，从而产生了多余的开销？

再次简化了上面的例子（我知道`aDocs[i].ext`会解决上面的问题，但是我的显示和 API 调用方法更复杂）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T16:55:20.103

> 这第二种选择是否可行且有效？

是的。

> 还是我重新创建了这些功能，从而产生了多余的开销？

不，这些功能是重复使用的，而不是重新创建的。所有对象都将共享和函数的*单个*副本。在从 (say) 调用函数期间，在调用中，将引用函数附加到的对象。（这仅适用于您将其作为从对象中检索它的表达式的一部分来调用，例如，）`getExt``getTitle``aDocs[1]``this``var title = aDocs[1].getTitle();`

或者，如果您愿意，您可以创建共享原型的新对象，并将属性从`aDocs`对象复制到新对象，但是您已经询问了如何将新功能分配给*现有*对象，所以...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:03:27.910

增加（添加方法到）原型通常是最好的方法，但是由于您正在处理对象文字（或 JSON.parse 结果），您必须*要么*增加`Object.prototype`which is **not done**，要么创建一个包装器构造函数，您需要将方法附加到其原型。问题将是：`this`在这种情况下掌握......我会保持现状：使用第二种方法：一个简单的循环就可以了。此外：无论如何，原型方法（略微）较慢......

函数对象本身正在尽快创建（如果它们是在全局命名空间中定义的，它们会在脚本被解析后立即创建）。通过简单地遍历这些对象，并将*对任何函数的引用*分配给每个对象，您根本不会创建额外的函数。
试试这个：

```
var someObj = {name:'someObj'}, 
anotherObj = {name: 'anotherObj'},
someFunction = function()
{
    console.log(this);
};
someObj.func = someFunction;
anotherObj.func = someFunction;
//or, shorter
someObj.func = anotherObj.func = someFunction;
//therefore:
console.log(someObj.func === anotherObj.func);//logs true! there is only 1 function object
someObj.func();//logs {name: 'someObj'}
anotherObj.func();//logs: {name: 'anotherObj'} 
```

已经发布了许多更深入地处理这个问题的问题（和答案），所以如果你有兴趣：

[javascript 中的对象和函数在](https://stackoverflow.com/questions/13500101/objects-and-functions-in-javascript/13500475#13500475)
[使用 John Resig 的 JavaScript 类继承实现时打印子类名称而不是“类”](https://stackoverflow.com/questions/15175073/print-subclass-name-instead-of-class-when-using-john-resigs-javasript-class-i/15175248#15175248)
[是什么让 my.class.js 如此之快？](https://stackoverflow.com/questions/14213074/what-makes-my-class-js-so-fast/14336037#14336037)
[JavaScript 中这三种“类”定义模式之间有什么区别？](https://stackoverflow.com/questions/13789559/what-are-the-differences-between-these-three-patterns-of-class-definitions-in/13790503#13790503)

都或多或少与您的问题有关

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:58:49.850

在这种情况下，我只是将对象传递给 Doc 的构造函数；

```
function Doc(obj){
   this.obj = obj;
}

Doc.prototype.getExt = function(){
    return this.obj.ext;
}
Doc.prototype.getTitle = function(){
   return this.obj.title;
}

var docs = [];
for (var i=0; i<aDocs.length; i++){
  docs.push(new Doc(aDocs[i]));
} 
```

你的方法有两个问题：

*   您必须为每个实例单独复制每个方法。
*   您的*“类”*没有在任何地方记录，使其成为一个类可以更清楚地表明您的对象具有这些方法。

# php - PHP Mail() 附件错误和损坏的文件

> ID：15367328
> 
> 赞同：0
> 
> 时间：2013-03-12T16:53:11.287
> 
> 标签：php, email, attachment, fopen, corrupt

我正在尝试处理电子邮件以响应提交。电子邮件应获取先前上传的文件并将其作为附件包含在内。现在出现了两个问题。

1.  当进程运行以发送消息时，我在页面上收到错误消息。错误是：警告：filesize() [function.filesize]: stat failed for ./example.pdf in /home/avantjob/public_html/portal/profilemenu.php 在第 186 行

警告：fopen（./example.pdf）[function.fopen]：无法打开流：第 187 行的 /home/avantjob/public_html/portal/profilemenu.php 中没有此类文件或目录

警告：fread() 期望参数 1 是资源，在第 188 行的 /home/avantjob/public_html/portal/profilemenu.php 中给出的布尔值

警告：fclose() 期望参数 1 是资源，布尔值在 /home/avantjob/public_html/portal/profilemenu.php 第 189 行给出

尽管收到了这些消息，但电子邮件仍在发送，并且包含附件，无论文件损坏/截断且不会打开。

代码如下：

```
//.Class for processing mail
class AttachmentEmail {
private $from = 'triangle@avant.jobs';
private $from_name = 'AVANT Portal';
private $reply_to = 'triangle@avant.jobs';
private $to = '';
private $subject = '';
private $message = '';
private $attachment = '';
private $attachment_filename = '';

public function __construct($to, $subject, $message, $attachment = '', $attachment_filename = '') 
    {
    $this -> to = $to;
    $this -> subject = $subject;
    $this -> message = $message;
    $this -> attachment = $attachment;
    $this -> attachment_filename = $attachment_filename;
    }

public function getMimeType($file) 
{
// MIME types array
require_once('mimetypes.php');
$extension = end(explode('.', $file));
return $mimeTypes[$extension]; // return the array value
}

public function mail() {
    if (!empty($this -> attachment)) {
        $filename = empty($this -> attachment_filename) ? basename($this -> attachment) : $this -> attachment_filename ;
        $path = dirname($this -> attachment);
        $mailto = $this -> to;
        $from_mail = $this -> from;
        $from_name = $this -> from_name;
        $replyto = $this -> reply_to;
        $subject = $this -> subject;
        $message = $this -> message;

        $file = $path.'/'.$filename;
        $mime_type = $this->getMimeType($file);
        $file_size = filesize($file);
        $handle = fopen($file, "r");
        $content = fread($handle, $file_size);
        fclose($handle);
        $content = chunk_split(base64_encode($content));
        $uid = md5(uniqid(time()));
        $name = basename($file);
        $header = "From: ".$from_name." <".$from_mail.">\r\n";
        $header .= "Reply-To: ".$replyto."\r\n";
        $header .= "MIME-Version: 1.0\r\n";
        $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
        $header .= "This is a multi-part message in MIME format.\r\n";
        $header .= "--".$uid."\r\n";
        $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
        $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
        $header .= $message."\r\n\r\n";
        $header .= "--".$uid."\r\n";
        $header .= "Content-Type: ".mime_type."; name=\"".$filename."\"\r\n";
        $header .= "Content-Transfer-Encoding: base64\r\n";
        $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
        $header .= $content."\r\n\r\n";
        $header .= "--".$uid."--";

        if (mail($mailto, $subject, "", $header)) {
            return true;
        } else {
            return false;
        }
    } else {
        $header = "From: ".($this -> from_name)." <".($this -> from).">\r\n";
        $header .= "Reply-To: ".($this -> reply_to)."\r\n";

        if (mail($this -> to, $this -> subject, $this -> message, $header)) {
            return true;
        } else {
            return false;
        }

    }
}
}

// Display links to each profile sub-program

if (isset($_POST['submit'])) 
    {
    $queryname = "SELECT FNAME, LNAME, MNAME, JOBWANT, PAYWANT, PAYCODE, RESUMEFILE FROM APP WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "'";
    $namedata = mysqli_query($dbc, $queryname);
    $namerow = mysqli_fetch_array($namedata);
    $fname = $namerow['FNAME'];
    $mname = $namerow['MNAME'];
    $lname = $namerow['LNAME'];
    $jobwant = $namerow['JOBWANT'];
    $paywant = $namerow['PAYWANT'];
    $paycode = $namerow['PAYCODE'];
    $resumefile = $namerow['RESUMEFILE'];
    $msg = "This message was sent in response to a completed application on the AVANT Portal. \n".
        " \n".
        "The application information is listed below. \n".
        " \n".
        "Name: $fname $mname $lname \n".
        "Desired Job: $jobwant \n".
        "Pay Rate: $paywant per $paycode \n".
        "Please review this candidate as soon as possible. \n".
        " \n".
        "The resume can be viewed at www.avant.jobs/portal/uploads/" . $resumefile . "\n".
        " \n";
    $subject = "AVANT Portal Application - " . $fname . " " . $lname;
    $sendit = new AttachmentEmail('triangle@avant.jobs', $subject, $msg, $resumefile);
    $sendit -> mail(); 
```

您能提供的任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:02:47.370

您有一个错误 - 文件不存在。检查错误消息中的路径（带有 stat 的路径失败）并将其替换为正确的路径，并且最好修复错误处理以检查文件是否存在，如果不存在则出错。

# image - 如何使用 Pandoc 图像对齐来对齐同一行中的两个图像？

> ID：15367332
> 
> 赞同：18
> 
> 时间：2013-03-12T16:53:21.747
> 
> 标签：image, alignment, pandoc

从 pandoc 文档中，我知道如何插入图像

[http://johnmacfarlane.net/pandoc/README.html#images](http://johnmacfarlane.net/pandoc/README.html#images)

现在我想在同一行对齐两个图像，我该怎么做？我想要的输出格式是pdf。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-02T03:21:25.920

你可以尝试这样的事情：

```
![](tests/lalune.jpg)\ ![](tests/lalune.jpg) 
```

这将为您提供两个并排的图像。但是，您不会有标题；pandoc 仅将图像单独视为段落中的标题图。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-07-24T03:46:37.453

从约翰的回答中扩展，如果您确实想要在两个并排的数字下有一个单独的标题，那么“黑客”就是这样做：

```
![](https://upload.wikimedia.org/wikipedia/commons/7/70/Example.png){width=60%}
![](https://upload.wikimedia.org/wikipedia/commons/7/70/Example.png){width=40%}
\begin{figure}[!h]
\caption{A single caption for the two subfigures}
\end{figure} 
```

这会为并排放置的两个图像生成一个标题。您可能需要调整每个单独图像的宽度设置，或[`!h`标题放置说明符](https://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions)，以使事情看起来像这样：

[![被黑的字幕](../Images/6b66488f8e462e0867d3344afa45dcb9.png)](https://i.stack.imgur.com/96Nuu.png)

我发现这很有帮助，因为您不必像在纯 LaTeX`\subfigure`解决方案中那样从 Internet 下载图片。即只需使用 pandoc markdown 获取图像，并使用 LaTeX 生成标题。

如果你想发疯，你实际上可以使用上面相同的想法来制作子图标题，如下所示：

```
![](https://upload.wikimedia.org/wikipedia/commons/7/70/Example.png){width=60%}
![](https://upload.wikimedia.org/wikipedia/commons/7/70/Example.png){width=40%}
\begin{figure}[!h]
\begin{subfigure}[t]{0.6\textwidth}
\caption{Caption for the left subfigure}
\end{subfigure}
\hfill
\begin{subfigure}[t]{0.4\textwidth}
\caption{Caption for the right subfigure}
\end{subfigure}
\caption{A single caption for the two subfigures}
\end{figure} 
```

[![在此处输入图像描述](../Images/7aa81d8f37fbc62b8fc269f854d7c0f3.png)](https://i.stack.imgur.com/XIwPZ.png)

编辑 20180910：

您需要在 pandoc YAML frontmatter/header 中包含以下包：

```
header-includes: |
    \usepackage{caption}
    \usepackage{subcaption} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:11:53.977

一种简单的方法是首先将您的文件转换为 .tex 文件，您可以在其中使用 LaTeX 命令[minipage](http://www.sascha-frank.com/latex-minipage.html)左右调整图像对齐方式。然后，您可以获得在命令行中运行**latex**或**pandoc的 .pdf 文件。**例如，请参阅[Pandoc 演示](http://johnmacfarlane.net/pandoc/demos.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T23:29:28.560

您可以使用像 gpp 这样的预处理器来包含像对齐图像这样的选项。或者你可以像约翰告诉你的那样做：

```
![](tests/lalune.jpg)\ ![](tests/lalune.jpg) 
```

# ios - 连接可用后立即触发操作

> ID：15367337
> 
> 赞同：0
> 
> 时间：2013-03-12T16:53:36.533
> 
> 标签：ios, objective-c

一旦连接可用，我想触发一个动作。有一些可用的解决方案允许手动检查互联网连接。我发现的一种方法是使用 NSTimer 在固定时间间隔内检查互联网连接。但这是最有效的检查方法吗？如果不是，那么正确的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:09:34.283

在这里您如何注册观察者并收听它，您的应用程序将在`kReachabilityChangedNotification`网络状态发生变化时收听并提示您。

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityHasChanged:) name:kReachabilityChangedNotification object:nil];

    internetReachable = [[Reachability reachabilityForInternetConnection] retain];
    [internetReachable startNotifier];

-(void) reachabilityHasChanged:(NSNotification *)notice
{
    // called after network status changes
    NetworkStatus internetStatus = [internetReachable currentReachabilityStatus];
    switch (internetStatus)
    {
        case NotReachable:
        {
            NSLog(@"The internet is down.");

            break;
        }
        case ReachableViaWiFi:
        {
            NSLog(@"The internet is working via WIFI.");

            break;
        }
        case ReachableViaWWAN:
        {
            NSLog(@"The internet is working via WWAN.");

            break;
        }
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:03:28.263

检查apple提供的[可达性代码。在](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007324-Intro-DontLinkElementID_2)[appdelegate.m](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_ReachabilityAppDelegate_m.html)中你可以看到这个方法。它会通知网络变化。工作就可以了

```
//Called by Reachability whenever status changes.
- (void) reachabilityChanged: (NSNotification* )note
{
    Reachability* curReach = [note object];
    NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
    [self updateInterfaceWithReachability: curReach];
} 
```

# iphone - 微小的 url 正在停止功能工作

> ID：15367338
> 
> 赞同：0
> 
> 时间：2013-03-12T16:53:47.933
> 
> 标签：iphone, objective-c, xcode, webview, boolean

如果链接被小 url 或类似的东西缩短，我怎样才能让这个功能工作？它似乎首先通过微型 url 服务器，从而导致无法读取与谷歌相关的关键字。

```
 -(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest{ NSRange nameRange = [[inRequest.URL absoluteString] rangeOfString:@"google" options:NSCaseInsensitiveSearch];

if(nameRange.location == NSNotFound)
{
    [[UIApplication sharedApplication] openURL:[inRequest URL]];
    return NO;
}
return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:08:12.960

你为什么不尝试删除`if ( inType == UIWebViewNavigationTypeLinkClicked )`条件，这样你就可以在 url 中抓住重定向。请参见下面的代码。

```
 -(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ([[inRequest.URL absoluteString] rangeOfString:@"google"].location==NSNotFound){
    [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:12:51.293

用这个

```
NSRange nameRange = [[inRequest.URL absoluteString] rangeOfString:@"google" options:NSCaseInsensitiveSearch];

            if(nameRange.location == NSNotFound)
            {
                [[UIApplication sharedApplication] openURL:[inRequest URL]];
                return NO;
            } 
```

# php - php mysql用1个查询插入X个多行

> ID：15367341
> 
> 赞同：0
> 
> 时间：2013-03-12T16:53:59.633
> 
> 标签：php, mysql

我想在`$add_rows = $_POST['add-rows']`表格中插入与数字一样多的行。对于我现在的工作，我需要 32 行。我如何着手使 SQL VALUES 成为循环的一部分，以便它进入 32 行？

这是我的表格

```
<form>
<input name="add-name" id="add-name" type="text" value="">
<input name="add-start" id="add-start" type="text" value="">
<input name="add-end" id="add-end" type="text" value="">
<input name="add-rows" id="add-rows" type="text" value="">
<input name="add-submit" id="add-submit" type="submit" value="Add" />
</form> 
```

以下是我将从表单中发布的值，其余值可以设置为 NULL

```
$add_name = $_POST['add-name'];
$add_start = $_POST['add-start'];
$add_end = $_POST['add-end'];
$add_rows = $_POST['add-rows']; //in this case, the value is 32 
```

这是查询...我需要输入 32 个值。

```
mysql_query("INSERT INTO table position, name, start, end, code, one, two, three, four, five, six) 
VALUES (NULL, '$add_name', '$add_start', '$add_end', NULL, NULL, NULL, NULL, NULL, NULL, NULL)")
or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:02:38.960

这应该给你 32 行。

```
$sql = "INSERT INTO table (position, name, start, end, code, one, two, three, four, five, six) 
VALUES (NULL, '$add_name', '$add_start', '$add_end', NULL, NULL, NULL, NULL, NULL, NULL, NULL)"
     . str_repeat(", (NULL, '$add_name', '$add_start', '$add_end', NULL, NULL, NULL, NULL, NULL, NULL, NULL)", $add_rows - 1)
mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:03:10.317

你可以试试这个

```
mysql_query("INSERT INTO table position, name, start, end, code, one, two, three, four, five, six) 
VALUES (NULL, '$add_name', '$add_start', '$add_end', NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(NULL, '$add_name', '$add_start', '$add_end', NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(NULL, '$add_name', '$add_start', '$add_end', NULL, NULL, NULL, NULL, NULL, NULL, NULL),
(NULL, '$add_name', '$add_start', '$add_end', NULL, NULL, NULL, NULL, NULL, NULL, NULL)")
or die(mysql_error()); 
```

这里只有 4 行，但你不能做 32 行。

您也可以在循环中构造请求（设置不同的变量值）不要忘记每个值之间的逗号（但最后一行末尾没有逗号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:04:38.893

将[PDO](http://www.php.net/manual/en/book.pdo.php)与[准备好的语句](http://php.net/manual/en/pdo.prepare.php)一起使用：

```
$dbh = new PDO('mysql:host=localhost;dbname=example', $user, $pass);
$stmt = $dbh->prepare("INSERT INTO table (position, name, start, end, code, one, two, three, four, five, six) VALUES (NULL, :add_name, :add_start, :add_end, NULL, NULL, NULL, NULL, NULL, NULL, NULL)");
$stmt->bindParam(':add_name', $add_name);
$stmt->bindParam(':add_start', $add_start);
$stmt->bindParam(':add_end', $add_end);

for ($i = 0; $i < $add_rows; $i++) {
    $stmt->execute();
} 
```

这还有一个额外的好处，那就是强化您的查询以抵御 SQL 注入攻击。您的问题和其他答案（在撰写本文时）直接在查询中使用未转义的 $_POST 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:11:30.340

列名需要在括号之间。我认为您需要查看语法：

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

我认为这是一个问答网站，而不是给我这个语法网站。@Azukah 看看这个学习语法。如果您只想要语法，请检查其他答案。

:)

# regex - 使用正则表达式进行字符串比较

> ID：15367342
> 
> 赞同：0
> 
> 时间：2013-03-12T16:54:00.693
> 
> 标签：regex

在 Excel VBA 论坛上[，](https://stackoverflow.com/questions/15365250/compare-strings-in-excel-vba)有人请求帮助匹配如下字符串：

```
Examples:
ACBD,AC - Match
ACBD,CA - Match
ACBD,ADB - Match
AC,ABCD - Match
ABC, ABD - No Match 
```

规则是字符串匹配的条件是一个字符串中的所有字母都包含在另一个字符串中（即两个字符串中的一个包含另一个字符串的所有字母）

所以我想到一个正则表达式可能是答案，但我是一个绝对的新手，所以你能帮忙吗？

是否可以将两个字符串相互匹配？

谢谢菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:02:15.510

虽然正则表达式肯定会使检查更容易，但我不认为如果没有额外的编码这是不可能的。您将需要代码来执行以下操作之一：

1) 单独匹配每个字符，然后查看所有匹配是否为真，2) 以所有可能的顺序排列重新排列字符的顺序，并检查每个顺序以查看是否匹配

无论哪种方式，您都需要操作“检查”字符串以涵盖匹配的所有可能要求。

如果您要求“任何这些字符”或“所有这些字符，按此顺序”，您可能无需额外的逻辑就可以做到，但由于您需要“任何这些字符，按任何顺序”，您需要操纵输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:33:32.833

我在 VBA 中没有为您提供答案，但可以告诉您需要采取的步骤。

为每个元素创建一个变量，其中字符按字母顺序排序 - 您需要在网上搜索排序函数来执行此操作，因为 VBA 中没有内置函数。

在两个变量的每个字符之间插入一个 .* - 这些是您的正则表达式。您可能希望将此步骤与排序功能合并。

然后，您需要做的就是将数组的第一个元素与从第二个元素创建的正则表达式变量匹配，然后用第一个元素执行第二个。

# dust.js - 如何在dust.js中获取数组（数组长度）中的总项目

> ID：15367347
> 
> 赞同：4
> 
> 时间：2013-03-12T16:54:20.727
> 
> 标签：dust.js

在下面的示例中，我似乎无法弄清楚（我很确定我在这里想太多或没有想）一种获取数组长度的方法。任何人都可以帮助我，或者指导我一个好的教程。[https://github.com/linkedin/dustjs/wiki/Dust-Tutorial](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial)提到了 {@size} 助手，但没有任何示例。

```
<ul total-tems={#items.length/}>
{#items}
    <li class="item-{$idx}">{.title}</li>
{/items}
</ul> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T17:23:57.263

是的，我显然忽略了。我没有包括（ require('dustjs-helpers'); ）以便使用

```
<ul total-tems="{@size key=items /}"> 
```

希望这也能帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T16:39:22.447

我不知道这是否是dustjs的新功能，但现在您可以简单地使用`{items.length}`来访问数组长度而无需助手。

# phpmyadmin - PhpMyAdmin - 如何增加浏览菜单中可见的列数

> ID：15367349
> 
> 赞同：3
> 
> 时间：2013-03-12T16:54:26.683
> 
> 标签：phpmyadmin

我在 PhpMyAdmin 平台中有一个数据库，我正在“浏览”菜单中检查表中的数据，但由于某种原因，有一列不显示名称。

例如，在结构菜单中，我可以看到所有列的名称，在这种情况下名称是“X”，但是当我进入浏览菜单时，由于某种原因，该字段的名称显示为空。我不知道它是否有帮助，但该列是第 14 列，第 15 列和之后的列有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T14:37:52.357

它在哪里说：

> 显示：在水平模式下从第 0 行开始 30 行，并在 100 个单元格后重复标题

尝试将模式设置为垂直或旋转标题

# java - 用于 Java (EE) Web 应用程序的 Capistrano

> ID：15367356
> 
> 赞同：0
> 
> 时间：2013-03-12T16:54:38.047
> 
> 标签：java, deployment, web, capistrano, use-case

有人使用`Capistrano`基于 Java 的应用程序部署吗？`Capistrano`使用现有工具（如`Maven`、`ant`或 Eclipse Deploy 等）有什么好处吗？`Capistrano`基于 Java 的应用程序的任何特定用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:49:23.977

将 Capistrano 与 Ant 和 Maven 进行比较是不正确的。这些应用程序的目的略有不同。Capistrano 可以与它​​们两者结合使用。Capistrano 主要是部署工具，而 Ant 和 Maven 主要用于构建和管理依赖项。它具有很好的将某些东西部署到集群的设施，并且没有连接到 java 或 ruby​​。与独立于平台的批处理脚本相比，它为此目的提供了一个更简单的 DSL。它提供了按命名空间和任务（如 ant）组织部署脚本的简单方法。考虑以下脚本：

```
task :hosts => "host1, host2" do
  upload <file>
  run <comand>
end 
```

它将文件上传到主机数量并在所有主机上运行命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:31:37.020

Rails 是与 Ruby 语言耦合的框架，Capistrano 被维基百科粗略描述为“脚本运行器”。

Capistrano 在其一般用户文档中绝对没有提供 Java 部署示例，它可能会倾向于部署 Java，但很明显这不是“开箱即用”提供的功能。

这两种选择都会使部署到 Java Web 容器变得不必要地复杂化。除非您对 Capistrano 的内部运作有丰富的知识，并且有时间将它们弯曲以正确部署 Java Web 应用程序，否则我会寻找提供开箱即用 Java 部署的解决方案。

# c# - 使用 ModalPopupExtender 从 iframe（另一个页面）调用后面的方法

> ID：15367358
> 
> 赞同：0
> 
> 时间：2013-03-12T16:54:46.097
> 
> 标签：c#, asp.net, ajax

我有 ajaxToolkit:ModalPopupExtender 作为 popupcontrolid 加载另一个页面的 iframe。我已经设法将一些参数从父级传递到 iframe 页面。现在我想在用户单击按钮时将一些信息传递回父页面。我的第一个解决方案是编写一个使用 get 参数重新加载父页面的 javascript，但这样整个父页面就会重新加载。

关闭 iframe 页面时，我想在父页面上调用“代码隐藏”方法（传递一些值），但是必须在不重新加载页面的情况下调用此方法（即 asp:UpdatePanel 中的按钮？但是如何传递一些价值？）。

有没有办法做到这一点？

在此先感谢，阿尔贝托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:10:53.447

如果您想更新父页面上的某些信息，您需要编写一些 JavaScript。如果没有看到您现有的一些代码，将很难给出建议，但有一些影响

```
window.top.parentFunctionNameToUpdateValues(); 
```

可能会根据 iframe 中的操作触发发回给您的父母的帖子。

如果父项中没有任何内容需要更新，只需将 iframe 中的表单发布到父项，然后处理父项中的 onload 以解析出您需要的值。

# c# - 仅在系统更新时运行程序

> ID：15367362
> 
> 赞同：0
> 
> 时间：2013-03-12T16:54:55.787
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

我有一个过程，它使用反射来获取系统中的当前控制器和操作，并使用任何尚不存在的新控制器更新数据库。

我在管理控制器的索引操作上运行它。我不想每次用户单击管理仪表板时都运行此过程，但它需要在发生系统更新时更新数据库。

有人对我如何实现这一目标有任何想法吗？我正在考虑版本号的行或在运行之前检查的内容，并且此版本号在数据库中得到更新。无论如何，是否会在每次发布时自动增加 webconfig 中的版本号或其他内容，以及如何在系统中进行检查？

谢谢

# java - 在 B 类中引用 A 类的公共最终静态字符串是否会增加已编译 B 类的大小？

> ID：15367365
> 
> 赞同：2
> 
> 时间：2013-03-12T16:55:02.007
> 
> 标签：java

假设以下类：

```
class A {
  public static final String someString = "thisIsSomeString";

  // then potentially lots of non static members and functions.

}

class B {
  void foo1() {
    String someStringFromA = A.someString;
  }

  // OR

  void foo2() {
     String someStringFromA = "thisIsSomeString";
  }

} 
```

在这里，`b.foo`应该是`foo1`or `foo2`。的好处`foo1`很简单：只有一个地方来定义字符串名称，如果我们需要更改它，只需在此处更改即可。但是有人告诉我 using`foo1`会以某种方式将 A 的代码“导入”到 B 中，因此编译后的 B 类可能使用`foo1`而不是`foo2`. 这是真的？我假设 using`foo1`相当于 C#define。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T16:59:12.440

实际上两者都会导致常量被内联，`B.class`所以没有区别。通常，选择更具可读性/可维护性的选项。

这是我得到的字节码：

```
void foo1();
  Code:
     0: ldc           #3                  // String thisIsSomeString
     2: astore_1
     3: return

void foo2();
  Code:
     0: ldc           #3                  // String thisIsSomeString
     2: astore_1
     3: return 
```

# login - MODx 革命登录插件：无法使用登录表单或注销链接登录或注销

> ID：15367366
> 
> 赞同：0
> 
> 时间：2013-03-12T16:55:08.907
> 
> 标签：login, logout, modx, add-on

我今天遇到了 MODx 革命的问题。我第一次使用附加登录。如果这是一个愚蠢的错误，请原谅。

我已经设置了两个上下文（Babel）和最新版本的登录插件（以及其他一些东西）。MODx 版本 2.2.6。

所以我所做的是：创建了一个资源组并赋予它加载、查看和列出成员 9999 上的每个上下文的权限，而匿名组只是加载。这一切似乎都奏效了。

我可以使用正确的凭据登录管理器并导航到受保护的站点。正如预期的那样，我可以看到受保护的内容。我注销并出现登录表单。到这里为止都是正确的。

当我导航到登录表单并尝试使用不正确的凭据登录时，我也会收到预期的错误消息。现在：当我尝试使用正确的凭据登录（与我用于管理器登录的凭据相同）时，它不会出现任何类型的错误，但看起来我没有正确登录。

症状：我可以在 MySQL 表中看到此特定用户的登录计数。没有登录不正确，用户未被阻止。当我登录管理器并导航到受保护的站点时，点击注销按钮，我被重定向回设置的 &loginResourceId 并且不会被注销。仍然登录。

我检查了 MODx 日志，没有任何东西指向这个错误。我无法检查 apache 日志，因为我在共享主机上。error_log 文件也没有显示任何可疑内容。

我的问题：我做了什么？我从注销链接检查了对登录页面的所有引用，检查了所有权限，但仍然没有结果。

也许有人有同样的问题或类似的问题。经过数小时的谷歌尝试和错误，我有点卡住了。

编辑

[[！登录？&loginTpl= `lgnLoginTpl` &logoutTpl= `lgnLogoutTpl` &errTpl= `lgnErrTpl` &loginResourceId= `156` &logoutResourceId= `4` ]]

已经感谢您的无根建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:50:52.157

当您在管理器上下文中以管理员身份登录，然后尝试在 Web 上下文中以不同用户身份登录时，Modx 的行为确实很奇怪。当我测试访问控制时，我完全为管理器使用了不同的浏览器——这与管理器凭据有关，无论如何都可以完全访问这两个上下文，而不是 100% 的确切原因。但请尝试为管理器使用不同的浏览器，为网络上下文中的特权用户使用不同的凭据[即不同的管理器凭据]，看看这是否会改变行为。

# c++ - 什么是 C++ 中用于分离标头/源的模板专业化的稳健方法

> ID：15367369
> 
> 赞同：6
> 
> 时间：2013-03-12T16:55:13.613
> 
> 标签：c++, declaration, instantiation, template-specialization

在中等规模甚至大型复杂项目中，将模板声明和定义分开有助于减少编译时间。

然而，在复杂的代码中，小的程序员错误可能会导致不被注意的行为变化，例如调用通用版本而不是专用版本。

示例：由于缺少声明，模板特化变得不可见。

```
///////////////////// file  A.hpp /////////////////////

#include <iostream>

template <typename T>

class A 
{
public:
  void foo() 
  {
      std::cerr << " calling generic foo " << std::endl ;
  }
};

// forgetting following declaration leads to an unintended program behaviour
template <> void A< int >::foo();

///////////////////// file  A-foo-int.cpp /////////////////////
#include "A.hpp"

template <> 
void A< int >::foo()
{
  std::cerr << "calling  <int> version of foo" << std::endl;
}

///////////////////// file  main.cpp /////////////////////
#include "A.hpp"

int main(int argc , char** argv)
{
  A<int>* a = new A<int>();
  a->foo();
  return 0;
}

///////////////////// Makefile /////////////////////
CC = g++
CPPFLAGS += -Wall -O3
CXXFLAGS += --std=gnu++0x

all: nonrobust-template-setup

nonrobust-template-setup: main.o A-foo-int.o  
    $(CC)  $(CPPFLAGS) main.o A-foo-int.o  -o nonrobust-template-setup

clean: 
    rm -rf *.o nonrobust-template-setup

////////////////////////////////////////// 
```

问题：是否可以进行更健壮的设置（独立于编译器和平台），如果，它会是什么样子？

如果不是，那么测试所需功能版本是否被调用的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:24:14.073

您不能以这种方式分离声明和定义：如果您将专门化成员函数的定义委托在单独的`.cpp`文件中，无论您是否在主模板之后立即声明您的专门化，编译器都无法实例化它，并且链接器会抱怨未解决的引用。

通常，类模板的成员函数的定义放在头文件中，*除非*您为相应的类模板提供显式*实例化：*

```
template class X<int>; // You should add this to make your program build,
                       // or instantiate the corresponding class template
                       // specialization and invoke the foo() method in the
                       // same translation unit (A.cpp) 
```

一般来说，除非您遇到*非常*可怕的编译时间问题，否则我建议您遵循常见做法并将所有内容放在一个头文件中，以供所有需要使用类模板的翻译单元包含：

```
///////////////////// file  A.hpp /////////////////////

#include <iostream>

template <typename T>

class A 
{
public:
    void foo() 
    {
        std::cerr << "error: called generic foo " << std::endl ;
    }
};

template <> 
void A< int >::foo()
{
    std::cerr << "calling  <int> version of foo" << std::endl;
}

///////////////////// file  main.cpp /////////////////////
#include "A.hpp"

int main(int argc , char** argv)
{
    A<int>* a = new A<int>();
    a->foo();
    return 0;
} 
```

如果您面临非常可怕的编译时间问题，那么您可以分离成员函数定义并将它们放入具有显式实例化的单独翻译单元中，但是在 C++11 中没有干净/简单的方法来确保您的所有专业化在`.cpp`主模板之后立即声明单独文件中的降级（如良好实践所建议的那样）。如果有的话，我想它会很受欢迎，你不需要来这里问它，因为*每个人都*面临这样的设计问题。

在某些情况下，一些花哨的宏可能会有所帮助，但令人怀疑的是，在真正复杂的项目中，它们会比维护痛苦带来更多好处。

在 C++03 标准中尝试通过引入`export`关键字来解决此问题，但实现经验证明编译器供应商难以支持，这就是为什么`export`不再成为 C++ 标准的一部分（自 C++11 起） .

希望有更好的*模块*解决方案能够将其纳入 C++14 并为模板设计提供解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:07:44.060

我认为你能做的最好的事情是`static_assert`通用模板永远不会用应该专门化的类型实例化。

以下代码仅用于说明 - 我可能会使用`BOOST_STATIC_ASSERT`（`std::is_same`如果我可以使用 c++11）。基本思想是防止使用您禁止的类型集隐式实例化非专用模板。当然，如果您忘记添加静态断言和专业化，您仍然会失败。

```
template<class T, class U>
struct is_same { enum { value = false }; };

template<class T>
struct is_same<T, T> { enum { value = true }; };

template <bool enable>
struct StaticAsserter
{
    char test[enable];
};

template <typename T>
struct foo
{
    // Make sure we can't implicit instantiate foo for int.
    StaticAsserter<!is_same<int, T>::value> DisallowInt;
};

int main()
{
    foo<unsigned> hi;
    foo<int> fail;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:13:57.203

好的，`A<T>::foo()`仅当您在其他地方提供了专门化时，从注释中实例化通用实现不一定是错误。

因此，您想要的是找到名称与只应在编译器目标文件的特定列表中实例化的特化重复的通用模板实例化——这减少了在两个数据集中寻找匹配字段的过程。为此，有`join`：

```
# every object and where it's defined
nm -A *.o | c++filt | grep ' T ' \
| sort -k3 > @all.definitions

# definitions that shouldn't be duplicated:
nm -A A-foo-int.o | c++filt | grep ' T ' \
| sort -k3 > @my.definitions

# everything that shows on both lists:
join -j3 @my.definitions @all.definitions 
```

编辑： grep 模式的 sed 语法并没有很好地工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T19:59:06.183

确保这一点的方法是不提供通用模板的任何定义`foo()`。当你这样做时，不需要声明专业化：

```
// A.h
template <typename T> struct A { void foo(); }; 
```

```
// main.cc
#include "A.h"
int main ( int c, char **v )
{
    A<int>().foo();
    // A<long>().foo();  // this line will compile but not link
} 
```

```
// A.cc
#include <cstdio>
#include "A.h"
template<> void A<int>::foo() { puts("foo!"); } 
```

# android - 无法选择 ListView 项目

> ID：15367374
> 
> 赞同：2
> 
> 时间：2013-03-12T16:55:29.087
> 
> 标签：android, android-listview, android-event

我正在尝试学习如何在单击单选按钮时接收通知，`ListView`但是当我单击项目旁边的单选按钮时没有任何返回`ListView`。下面是我设置监听器的代码。我在从服务器`onPostExecute()`填充我的方法`ListView`和我的主要活动扩展的方法下在异步任务中执行此操作`MapActivity`。有谁知道我做错了什么？

```
protected void onPostExecute(ArrayList<String> result) {
    // ... some code
    mapView.postInvalidate();

    final ArrayAdapter<String> arrayAdpt = new ArrayAdapter<String>(
            getApplicationContext(), android.R.layout.simple_list_item_single_choice,
            viewline);

    ListView restaurant_list = (ListView) findViewById(R.id.list);
    restaurant_list.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    restaurant_list.setAdapter(arrayAdpt);
    restaurant_list.setScrollContainer(true);
    restaurant_list.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            Log.e("listargs", (String.valueOf(arg1)) + " " + String.valueOf(arg3));
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:59:45.437

> 有谁知道我做错了什么？

我建议您使用[OnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)而不是**OnItemSelectedListener**

```
list.setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> adapter, View parent,
                           int position, long id) {
      // do your stuff

   }                
}); 
```

*当您想要捕获点击事件时，通常使用*OnItemClickListener 。**OnItemSelectedListener*通常与 Spinner 一起使用。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:03:53.713

听起来你可能有焦点问题。仅当没有其他视图可以获取焦点时，单击侦听器才有效。

使用以下内容更改您的复选框 xml：

```
focusable="false" 
```

或者，`false`如果您在代码中生成布局，请将其设置为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:10:26.220

**OnItemSelectedListener**用于触控板/轨迹球事件

**OnItemClickListener**用于点击事件

就我个人而言，我**总是**为安全起见。*

# qt - 过滤集上的 Qtableview 操作

> ID：15367375
> 
> 赞同：0
> 
> 时间：2013-03-12T16:55:32.147
> 
> 标签：qt

我有一个工作 Qtableview 自定义模型子类 QAbstractTableModel 和 QAbstractItemModel。

我有一个 Qlineedit，点击它会过滤视图：

// model.cpp setFilter(QString strFilter) 函数在我的实习生 QList 中搜索（这个 Qlist 实际上是附加到模型的），如果找到匹配，则：m_filterSet.insert(i);

这一切都很好。问题是，我对 tableview 进行了 CRUD 操作（插入行，删除行..），这也很好用！但是，当从*过滤*集中选择一行时，我需要以某种方式知道在我的 QList 中的哪个位置是过滤集中（QSet）中选择的行。

`ui.myView->selectionModel()->currentIndex().row();`

明显给出了当前视图的错误索引计数。

我怎样才能以某种方式从 QSet 中的选定行中提取值（int）？因为当我将此功能添加到模型时：

```
foreach (const int &value, m_filterSet)
        qDebug() << value; 
```

它已成功打印出所有 i 值，例如：3410、3411、3412（这些是我的客户 ID）

如果我可以为 Qset 中的选定行提取此 ID，我可以编写一个迭代我的实习生 QList 的函数，并找到一个匹配项，可以这么说：

```
if(m_Intern[i].nClientID == nId){   // nId = value inside Qset for selected row in view
    return nIdx;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T08:51:51.973

Qt 为您的问题提供了解决方案 - 只需使用`QSortFilterProxyModel`. 您将需要：

*   将其子类化并编写您自己的过滤函数 ( `filterAccpetsRow`)
*   通过过滤一个代理您的原始模型
*   将过滤模型附加到视图
*   用于[`QSortFilterProxyModel::mapToSource()`](http://doc.qt.io/qt-5.7/qsortfilterproxymodel.html#mapToSource)在过滤模型和原始模型中的索引之间进行转换。

这允许您使用一个源数据模型拥有多个视图，每个视图可能有不同的过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:37:39.183

经过一段时间的思考，我解决了它，我只需要在我的模型中实现另一个功能：

```
int myClass::screenIndex2DataIndex(int nIdxScreen)
{
   if(m_bUseFilter)
    {
        int nIdx =-1;
        for(int i=0;i<m_lstIntern.size();i++)
        {
            if(m_filterSet.contains(i))
            {
                nIdx++;
                if(nIdx == nIdxScreen){
                    return i;   
                }
            }
        }
        return -1; //not found
    }
    else{
        return nIdxScreen;
    }
} 
```

这样我就可以在过滤视图上找到当前索引，它在我的实习生列表中。

在此之后，很容易通过返回获得我的 nClientID：return m_lstIntern[idx].nClientId

# c++ - c++ 堆内存分配/释放

> ID：15367386
> 
> 赞同：2
> 
> 时间：2013-03-12T16:56:05.873
> 
> 标签：c++

如果我在堆上声明一些东西，`char *a=new char[1000]`并且主程序停止，如果没有`delete[]`调用，分配的内存会发生什么？它保留在堆上还是自动释放？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T16:57:53.347

就 C++ 而言，它会发生什么是完全未定义的。但是，几乎任何合理的操作系统都会在进程终止时清理进程分配的内存。然而，在自己之后进行清理是一个非常好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:07:35.170

C++ 标准在您返回后不久指定“结束”的内容`main()`- 它确实解释了全局对象在此之后的某个时间点被销毁，`atexit()`并且其他一些“我们正在退出”级别的函数也在`main`返回后运行。但是 C++ 标准没有规定程序所在的内存会发生什么。这同样适用于堆的内容。

如果系统中有操作系统（C++ 也没有指定您必须有操作系统），则由操作系统来清除应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:59:28.520

通常它会被操作系统清除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:01:34.890

当您的应用程序因任何原因崩溃或中止时，操作系统会在正常情况下回收内存。但是，这是未定义的。

# c# - 引用多个集合中的一个对象并让每个集合中的顺序影响某些属性

> ID：15367390
> 
> 赞同：0
> 
> 时间：2013-03-12T16:56:13.250
> 
> 标签：c#, .net, vb.net, oop

这很难解释。

我有一组盒子，每个盒子都有自己的内容。该框可以出现在多个架子上，如果内容发生更改，我想在全球范围内反映这些更改。

所以我有一个全局的盒子集合，我也从这个集合中为每个架子创建了一个盒子集合。

我的问题是知道盒子在每个架子上的位置。让我们担心X位置。

在一种情况下，我的盒子可能坐在架子的中间，它的 X 位置是 44 厘米。在另一种情况下，同一个框可能位于架子的开头，并且它的 X 位置为 0。

我需要以 Shelf(id).Box(id).PosX 的形式访问它

但这总是会给出一个答案，并且答案应该根据父书架而改变。

我知道这个问题有很多答案，但我希望有人有比我一直在计划的一些事情更优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:59:41.130

盒子应该知道它在哪里吗？可能不会——您应该能够向货架询问其内容，这意味着询问货架上的盒子在哪里。

```
myShelf.GetBoxPosition(boxId).PosX 
```

所以盒子没有任何位置信息，这是有道理的，因为它可以在多个位置。架子知道它的内容在哪里，可以回答你的问题。

这里的假设是盒子不会在同一个架子上出现多次 - 否则它必须返回盒子位置的集合，而不是单个盒子位置。

# jboss - 调用 EJB 的 JNDI JBoss 错误 - 没有可用于处理的 EJB 接收器

> ID：15367397
> 
> 赞同：0
> 
> 时间：2013-03-12T16:56:46.217
> 
> 标签：jboss, jboss7.x, jndi, ejb-3.0

我已经搜索了网络和旧问题，但没有解决我问题的答案。全新安装 JBoss 7 1.1 final，我正在尝试使用 JNDI 调用 EJB。看起来它连接正常，但实际方法调用有错误。

这是 Java JNDI 代码：

```
InitialContext context = null;
Hashtable env = new Hashtable();
String ejbUrl = TestEJBClient.calculateJbossEjbJndiName ( "TestEJB" , "" , "" , TestEJB.class.getSimpleName ( ) , TestEJBRemote.class.getName ( ) , false );
env.put("jboss.naming.client.ejb.context", true);
env.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming" );
env.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");
env.put(Context.PROVIDER_URL, "remote://localhost:4447");
env.put(Context.SECURITY_PRINCIPAL, "jboss");
env.put(Context.SECURITY_CREDENTIALS, "jboss1");
context = new InitialContext(env);
TestEJBRemote ejbRemote = (TestEJBRemote) context.lookup(ejbUrl);
Customer rtn = ejbRemote.getCustomerByAccountNumber(accountNumber); 
```

下面是计算名称的方法：

```
public static String calculateJbossEjbJndiName(String appName , String moduleName , String distinctName , String beanName , String viewClassName, boolean stateful)
{
     String rtn = "ejb:"+appName+"/"+moduleName+"/"+distinctName+"/"+beanName+"!"+viewClassName;
     if (stateful)
     {
          rtn = rtn + "?stateful";
     }
     return rtn;
} 
```

这是运行的日志：

```
[DEBUG][org.jboss.naming.remote.client.InitialContextFactory][getOptionMapFromProperties][12:20:25:PM][jboss.naming.client.connect.options. has the following options {}]
[DEBUG][org.jboss.ejb.client.EJBClientPropertiesLoader][loadEJBClientProperties][12:20:26:PM][Looking for jboss-ejb-client.properties using classloader sun.misc.Launcher$AppClassLoader@35ce36]
[DEBUG][org.jboss.ejb.client.remoting.ConfigBasedEJBClientContextSelector][<init>][12:20:26:PM][EJB client context org.jboss.ejb.client.EJBClientContext@1543c88 will have no EJB receivers associated with it since there was no EJB client configuration available to create the receivers]
[DEBUG][org.jboss.ejb.client.remoting.RemotingConnectionEJBReceiver][handleDone][12:20:26:PM][Channel Channel ID 84a7a320 (outbound) of Remoting connection 00704baa to localhost/127.0.0.1:4447 opened for context EJBReceiverContext{clientContext=org.jboss.ejb.client.EJBClientContext@1592174, receiver=Remoting connection EJB receiver [connection=Remoting connection <1ccce3c>,channel=jboss.ejb,nodename=ny-go-oss2790a]} Waiting for version handshake message from server]
[INFO][org.jboss.ejb.client.remoting.VersionReceiver][handleMessage][12:20:26:PM][Received server version 1 and marshalling strategies [river]]
[INFO][org.jboss.ejb.client.remoting.RemotingConnectionEJBReceiver][associate][12:20:26:PM][Successful version handshake completed for receiver context EJBReceiverContext{clientContext=org.jboss.ejb.client.EJBClientContext@1592174, receiver=Remoting connection EJB receiver [connection=Remoting connection <1ccce3c>,channel=jboss.ejb,nodename=ny-go-oss2790a]} on channel Channel ID 84a7a320 (outbound) of Remoting connection 00704baa to localhost/127.0.0.1:4447]
[DEBUG][org.jboss.ejb.client.remoting.RemotingConnectionEJBReceiver][modulesAvailable][12:20:26:PM][Received module availability report for 2 modules]
[DEBUG][org.jboss.ejb.client.remoting.RemotingConnectionEJBReceiver][modulesAvailable][12:20:26:PM][Registering module EJBModuleIdentifier{appName='TestEJB', moduleName='TestEJB', distinctName=''} availability for receiver context EJBReceiverContext{clientContext=org.jboss.ejb.client.EJBClientContext@1592174, receiver=Remoting connection EJB receiver [connection=Remoting connection <1ccce3c>,channel=jboss.ejb,nodename=ny-go-oss2790a]}]
[DEBUG][org.jboss.ejb.client.remoting.RemotingConnectionEJBReceiver][modulesAvailable][12:20:26:PM][Registering module EJBModuleIdentifier{appName='TestEJB', moduleName='TestWeb', distinctName=''} availability for receiver context EJBReceiverContext{clientContext=org.jboss.ejb.client.EJBClientContext@1592174, receiver=Remoting connection EJB receiver [connection=Remoting connection <1ccce3c>,channel=jboss.ejb,nodename=ny-go-oss2790a]}]
[WARN][org.jboss.ejb.client.remoting.ChannelAssociation][handleMessage][12:20:26:PM][Unsupported message received with header 0xffffffff]
ejbUrl = ejb:TestEJB///TestEJB!org.test.services.om.TestEJBRemote
[INFO][org.jboss.ejb.client][<clinit>][12:20:26:PM][JBoss EJB Client version 1.0.5.Final]
ejbRemote = Proxy for remote EJB StatelessEJBLocator{appName='TestEJB', moduleName='', distinctName='', beanName='TestEJB', view='interface org.test.services.om.TestEJBRemote'}
java.lang.IllegalStateException: No EJB receiver available for handling [appName:TestEJB,modulename:,distinctname:] combination for invocation context org.jboss.ejb.client.EJBClientInvocationContext@105d88a
Exception in thread "main" java.lang.IllegalStateException: No EJB receiver available for handling [appName:TestEJB,modulename:,distinctname:] combination for invocation context org.jboss.ejb.client.EJBClientInvocationContext@105d88a
    at org.jboss.ejb.client.EJBClientContext.requireEJBReceiver(EJBClientContext.java:584)
    at org.jboss.ejb.client.ReceiverInterceptor.handleInvocation(ReceiverInterceptor.java:119)
    at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181)
    at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:136)
    at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121)
    at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T08:51:35.410

可能是因为客户端中使用了 jar 文件。看看这个： [https ://community.jboss.org/thread/227862](https://community.jboss.org/thread/227862)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-15T06:47:30.590

我找到了解决方案，将这一行添加到我的客户端代码中：

```
jndiProperties.put("jboss.naming.client.ejb.context", "true"); 
```

[没有可用于处理的 EJB 接收器](https://stackoverflow.com/questions/11975396/no-ejb-receiver-available-for-handling)

# javascript - 三星智能电视应用程序退出并重新启动后很慢

> ID：15367400
> 
> 赞同：3
> 
> 时间：2013-03-12T16:56:51.647
> 
> 标签：javascript, performance, memory-leaks, samsung-smart-tv

我们为 2011 和 2012 平台开发了三星智能电视应用程序。该应用程序基于 HTML/JavaScript。通常应用程序运行良好，但在退出应用程序后变得非常慢，慢了六倍。测得的 JS 执行时间只是稍微慢了一点，但 HTML 元素在屏幕上呈现的速度要慢得多。此行为发生在所有设备（具有智能电视平台的电视和蓝光播放器设备）上。

退出是通过执行js命令实现的

```
var widgetAPI = new Common.API.Widget();
widgetAPI.sendExitEvent(); 
```

使用命令时，应用程序的行为相同（即再次启动后变慢）

```
widgetAPI.sendReturnEvent(); 
```

（将用户返回到 Smart Hub 而不是完全退出）。通过反复试验，我发现故意让应用程序崩溃可以解决问题——这会导致用户的行为与调用该`sendExitEvent`方法的行为相同。但是，这不是一个非常干净的方法，而且我更喜欢使用该`sendReturnEvent`命令。

**如何以编程方式将用户返回到 Smart Hub，以便应用程序在再次启动时不会变慢？**

我希望有人对此有一些第一人称的经验和建议。我试图消除可能的 JS 内存泄漏源（使用 JS 编程最佳实践和三星的建议），但这并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:33:26.327

我用两个动作解决了这个问题：

*   我不是简单地调用，而是`widgetAPI.sendReturnEvent()`将用户重定向到一个新页面 exit.html（使用`window.location.href`），它几乎是空的，除了一个 onload 处理程序，它调用以下命令（等效于`widgetApi.sendReadyEvent()`但`widgetApi.sendReturnEvent()`不需要包含 Widget.js文件）

```
 curWidget.setPreference("ready","true");
   curWidget.setPreference("return","true"); 
```

*   注释掉所有`alert`命令。显然调用`alert`多次使用会泄漏内存，导致退出应用时不会从内存中收集累积的垃圾，导致重启后速度变慢

只有应用这两种方法似乎可以解决问题。大概是应用程序累积内存泄漏导致应用程序在重新启动后变慢

**1)**在文档级别（尽管我们努力遵循所有准则以防止它们发生），然后在加载另一个 HTML 文件后将其清除。

**2）**在全球范围内，由调用引起`alert`

# javascript - JS id 区分大小写

> ID：15367408
> 
> 赞同：0
> 
> 时间：2013-03-12T16:57:20.300
> 
> 标签：javascript, case-sensitive, case-insensitive

我正在一个网站上工作，该网站包含两个具有相同`"id"`（但大小写不同）的元素，即`"freeshipping"`与`"freeShipping"`. 当我尝试`freeShipping`在 JS 中选择元素时，浏览器会返回 的内容`freeshipping`。在我同事的电脑上，它工作得很好。

有谁知道为什么在这种情况下它会不区分大小写？我一直在网上寻找，我所能找到的只是人们抱怨其他人说“使用相同的案例”。但是，没有回答我关于为什么区分大小写不起作用的问题。

```
<div id="freeshipping" style="display: none; padding: 15px;">
   Free Shipping on orders over $199!
</div>
<span id="freeShipping" class="stock">#freeShippingQualifierText#</span> 
```

**编辑：**

```
$freeShipping = $('#freeShipping');
$freeShipping.text('Free Shipping!'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:10:47.113

拥有相同的id只是自找麻烦。但是，如果您真的必须这样做，请注意上下文。

```
$("div#freeshipping").text();
$("span#freeShipping").text(); 
```

应该可以工作，假设浏览器接受 ID。

# javascript - 使用 Google Apps 脚本获取已发送文件夹中的未读计数 - GMail

> ID：15367410
> 
> 赞同：3
> 
> 时间：2013-03-12T16:57:25.260
> 
> 标签：javascript, google-apps-script, gmail, gmail-api

有没有办法在已发送文件夹中获取未读邮件计数？

基本上，我想要的功能是：当我在邮件列表中回复经过过滤且未通过我的收件箱的邮件时，我希望所有后续回复都能到达我的收件箱。

我试图完成的方法是，如果我在已发送文件夹中看到未读邮件，这意味着我参与的线程中有一封新邮件。我这样说是因为当我在 Gmail 的网络界面中单击“已发送”时，我看到这些邮件是未读的。

那么，有没有办法获得系统标签的未读计数？

肮脏的方式：我可以做到这一点的一种方法是创建一个过滤器，该过滤器选择所有具有“发件人：”作为我的地址的邮件，并使用它来获得我想要的东西。但是，这样我就创建了一个我感觉不好的副本！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T01:34:03.357

Apps Script 中的 GmailApp 的一大优点是能够使用与 Gmail 中相同的搜索功能（非常强大）。

要查看已发送文件夹中的所有未读邮件，请使用以下字符串搜索

> 是：未读标签：已发送

就像是

```
 var query = 'is:unread label:sent'; 
  var threads = GmailApp.search(query); 
```

# python - Python Stdout 从 IDLE 重定向

> ID：15367411
> 
> 赞同：1
> 
> 时间：2013-03-12T16:57:26.197
> 
> 标签：python, logging, stdout, python-idle

我正在尝试使以下代码适用于终端和 IDLE shell。它旨在将标准输出拆分为屏幕和日志文件。

```
class Tee(object):
    def __init__(self, name, mode):
        self.filename = open(name, mode)
        self.stdout = sys.stdout
        sys.stdout = self
    def __del__(self):
        sys.stdout = self.stdout
        self.filename.close()
    def write(self, data):
        self.stdout.write(data)
        self.filename.write(data)

Tee('logfile.log', 'wb')

print 'test123' 
```

如果我从终端运行此代码，它工作正常。如果我从 IDLE 执行它，它会按原样打印，但日志文件中没有文本，也不会引发异常。为什么这可以从命令提示符而不是 IDLE 中工作？我该怎么做才能让它在这两种环境中工作？我在 Win7 和 Python 2.7 上。

编辑：我把它放在一起用于 with 语句。这是我在课堂上的第一次尝试，因此欢迎提出改进建议。

```
newlog = True
class Tee(object):
    def __init__(self, name, mode=''):
        global newlog
        if newlog:
            self.filename = open(name, 'w'+mode)
        else:
            self.filename = open(name, 'a'+mode)
        newlog = False
    def __enter__(self):
        self.stdout = sys.stdout
        sys.stdout = self
        return self
    def __exit__(self, name, mode, data):
        sys.stdout = self.stdout
        self.filename.close()
    def __del__(self):
        try:
            self.filename.close()
            sys.stdout = self.stdout
        except:
            pass
    def startlog(self):
       self.stdout = sys.stdout
       sys.stdout = self
    def stoplog(self):
        self.filename.close()
        sys.stdout = self.stdout 
    def write(self, data):
        self.stdout.write(data)
        self.filename.write(data)
        self.filename.flush()

with Tee('logfile.log', 'b'):
    print 'I am the walrus'

print 'coocoocachoo'

Tee = Tee('logfile.log')
Tee.startlog()
print 'I am the eggman'
Tee.stoplog()

print 'coocoocachoo' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:26:11.047

logfile.log 不是空的，它只是没有被刷新。尝试：

```
sys.stdout.filename.flush() 
```

你能做的就是写一个更完整的包装器。想法-您甚至可以以更通用的方式执行此操作，例如（此处可能需要解决一些问题）：

```
import functools
class Tee(object):
    def __init__(self, name, mode)
    .
    .
    for name in ('write', 'flush', ...):
        setattr(self, name, functools.partial(self._wrapper, name))

    def _wrapper(func_name, *args, **kw):
        getattr(self.filename, name)(*args, **kw)
        getattr(self.stdout, name)(*args, **kw) 
```

# html - 如何让我的页面根据分辨率加载不同的图像？

> ID：15367414
> 
> 赞同：1
> 
> 时间：2013-03-12T16:57:35.730
> 
> 标签：html, joomla, resolution

我正在[这个网站](http://www.groovefootwear.com)上工作。它是基于 Joomla 的，所以我在尝试转换它时不得不学习一些新东西。我终于能够让它看起来像我想要的那样，但我有一些问题，因为主背景（图像模块）很`2100px`宽，在宽分辨率下看起来很棒，但在较小的分辨率上却很大。

有没有办法在 HTML（或其他）中编码一些东西，如果分辨率是这个，然后让模块显示这个图像，等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:00:53.887

我不知道在不同的模块中加载，但您可以使用 CSS 媒体查询为特定视口尺寸加载新的背景图像：

```
@media only screen and (min-width:0px) and (max-width:2099px)
{
    .my_image { background-image:MY_NEW_IMAGE; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:17:39.097

尝试

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

[演示](http://css-tricks.com/examples/FullPageBackgroundImage/progressive.php)

来自：[完美的整页背景图片](http://css-tricks.com/perfect-full-page-background-image/)，css3 技术。

# java - 通过 JXL 或 POI 在 Excel 中插入图像

> ID：15367415
> 
> 赞同：0
> 
> 时间：2013-03-12T16:57:36.820
> 
> 标签：java, apache-poi, jxl

我被困在将图像插入到 excel 文件中。条件是我不希望显示全尺寸图像。图像大小是常规像素 (1280 * 1024)，但在 excel 中我想显示大约 10%。如果有人双击图像，则应显示完整尺寸的图像。当我们离开单元格时，它应该再次具有相同的大小（10%）。任何帮助将非常感激。

```
Workbook wb = new HSSFWorkbook();
   Sheet sheet = wb.createSheet("My Sample Excel");

   InputStream inputStream = new FileInputStream("C:/opt/ZZEclipseWorkspace2/WFCLAuto/ScreenShots/12_Mar_2013__09_40_22PM_192.168.30.145.jpeg");

   byte[] bytes = IOUtils.toByteArray(inputStream);

   int pictureIdx = wb.addPicture(bytes, Workbook.PICTURE_TYPE_PNG);

   inputStream.close();

   CreationHelper helper = wb.getCreationHelper();

   Drawing drawing = sheet.createDrawingPatriarch();
   ClientAnchor anchor = helper.createClientAnchor();
   //set top-left corner for the image
   anchor.setCol1(1);
   anchor.setRow1(2);

   Picture pict = drawing.createPicture(anchor, pictureIdx);
   pict.resize(0.1);

   FileOutputStream fileOut = null;
   fileOut = new FileOutputStream("C:/opt/ZZEclipseWorkspace2/WFCLAuto/ScreenShots/testing1.xls");
   wb.write(fileOut);
   fileOut.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:22:30.637

尝试设置左上角和右下角，使其仅填充您想要的部分。

```
HSSFClientAnchor anchor;
anchor=new HSSFClientAnchor(0,0,0,255,(short)1,2,(short)7,10);
anchor.setAnchorType(2); 
```

此代码将把图片放在一个以角 1,2 和角 7,10 为界的矩形中。不过，我不确定是否要添加双击它的功能。

# ios - 在 iOS 上进行网络连接的测试驱动开发

> ID：15367417
> 
> 赞同：0
> 
> 时间：2013-03-12T16:57:40.460
> 
> 标签：ios, testing, tdd

努力在 iOS 上寻找一个好的 TDD 进程来进行网络连接测试。

目前，我正在通过手动关闭/打开我的 Mac 网络连接来手动测试功能。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:20:15.360

如果您是试驾，我会从图片中删除真实网络。我会模拟返回错误代码或引发错误的 API（Kiwi 具有在测试期间替换真实方法的良好能力）以强制它以您想要的方式响应。

如果您不确定 API 在您的情况下将如何响应，我会使用网络链接调节器或其他方法在您的程序中进行大量日志记录。一旦您确定了条件对您的程序的看法，请返回使用模拟的 TDD。

用你自己的类包装网络 API 给你一个更稳定的东西来模拟通常很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:05:58.797

网络链接调节器。您可以从 developer.apple.com 下载它

# mysql - 插入不带主键的忽略

> ID：15367421
> 
> 赞同：2
> 
> 时间：2013-03-12T16:58:13.700
> 
> 标签：mysql, insert

我有一个“用户”表，其中包含 id（PK、auto_increment）、名称、电子邮件（唯一）、cpf（唯一）以及其他现在不太重要的字段。要添加用户，我有提到的所有这些表的数据，但显然是 id。CPF是一种巴西身份证件。

如果我的表上不存在用户，我需要添加一个用户，并且我无法覆盖。我用谷歌搜索，发现了 INSERT IGNORE。但是，如果我没有 id 并且这是我唯一的主键，这怎么能知道用户是否存在？我怎么能“教”给 INSERT 这些独特的字段也可以进行比较？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:01:01.800

您将需要`unique`在 cpf 列上创建一个索引。然后，您的插入忽略查询将在每次插入时检查重复的 cpf 标识符。有关处理重复插入的更好方法的更多信息，请参见：[“INSERT IGNORE”与“INSERT ... ON DUPLICATE KEY UPDATE”](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)

# javascript - 在流星 mongodb 的 javascript 数组中查找

> ID：15367426
> 
> 赞同：0
> 
> 时间：2013-03-12T16:58:32.753
> 
> 标签：javascript, mongodb, meteor

这行得通

```
Template.kanjifinder.kanjicharacters = function () {
    console.log("kanjlist");
    return kanji.find({cardid: {$in:[1,2]}}, {sort: {cardid: 1}});  
}; 
```

但是有没有办法`[1,2]`用 javascript 数组替换这个硬编码的数组？

```
var str = "123456"
var cardids = str.split("");

if (Meteor.isClient) {
    Template.kanjifinder.kanjicharacters = function () {
        console.log("kanjlist");
        return kanji.find({cardid: {$in: **cardids** }}, {sort: {cardid: 1}});  
    } 
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:02:19.817

您只需要在字符串中使用分隔符，您也可以在代码中这样做，但问题是 2 位数字：

```
var str = "1,2,3,4,5,6" //<<--- use a seperator here
var cardids = str.split(","); //<<--

//remove this line if you intend to use strings in your db instead of integers
cardids = _.map(function(card) { return parseInt(card);});

if (Meteor.isClient) {
   Template.kanjifinder.kanjicharacters = function () {
     console.log("kanjlist");
     return kanji.find({cardid: {$in:cardids}}, {sort: {cardid: 1}});  
   };
} 
```

我正在使用下划线将字符串转换为整数，如果您还没有将它添加到您的流星包中`meteor add underscore`

# java - PAM“pam_unix.so”身份验证有时会失败

> ID：15367429
> 
> 赞同：0
> 
> 时间：2013-03-12T16:58:49.567
> 
> 标签：java, syslog, pam

我在使用 PAM 时遇到了一些问题。我有一个使用 PAM 进行身份验证的 tomcat webapp。在安装过程中，我们在 /etc/pam.d 中创建一个指向 /etc/pam.d/sshd 文件的符号链接。这一直有效。

最近我为用户添加了一种对每个请求进行身份验证的方法（而不是使用 JSESSIONID cookie）。添加此功能是因为我们需要定期将一些数据批量加载到监控应用程序中，并且使用 Basic Auth 很容易。

如果我反复卷曲我的 web 服务（比如每秒 10 次），那么每隔一段时间 PAM 就会失败。这种情况大约每 500 次发生一次，尽管我的客户声称它每两次发生一次（请注意，它们是远程运行的，尽管我不明白为什么这很重要）。

我已将我的符号链接 pam 配置替换为以下最小配置：

```
#%PAM-1.0
auth        sufficient    pam_unix.so audit
auth        required      pam_deny.so 
```

我也将此添加到我的 /etc/syslog.conf

```
*.debug /var/log/debug.log 
```

可以在 debug.log 中找到唯一适用的日志消息：

```
Mar 12 09:49:32 arques java: pam_unix(foo:auth): unable to obtain a password
Mar 12 09:49:32 arques java: pam_unix(foo:auth): auth could not identify password for [root] 
```

**我该如何进一步调试？**我努力了：

1.  使用不同的主机。一个是全新的安装
2.  我已经关闭了 nscd 服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T07:56:52.137

我在使用 PAM 进行身份验证的 Java 应用程序中遇到了类似的问题。目前，我猜测问题出在 CentOS 6.4 上的分布式 Java PAM 绑定实现中。我不再有权访问该系统（但我仍在尝试解决此问题），因此我无法提供 JDK 版本等详细信息。

我的解决方案最终是粗暴地混合 PAM：

```
#%PAM-
auth   sufficient pam_debug.so 
```

为了使这一点更明确，您可以改用“pam_permit.so”。基本上就是这样。然后将验证任何有效用户，无论是否使用密码。啊。

我正在继续研究更好的答案。

# java - POI在excel中将字符串输出为货币格式

> ID：15367434
> 
> 赞同：1
> 
> 时间：2013-03-12T16:59:14.313
> 
> 标签：java, excel, apache-poi

我想在 Excel 中将“2655.32”输出为“$2,655.32”。

这是代码片段：

```
case 0:
    HSSFCellStyle style;
    style.setAlignment(HSSFCellStyle.ALIGN_RIGHT);
    style.setDataFormat((short) 7);
    cell.setCellValue(new HSSFRichTextString("2655.32"));
    cell.setCellStyle(style);
break; 
```

生成的excel单元格不显示“$”或千分号“，”，并且有错误检查警告，**“此单元格中的数字格式为文本或前面有撇号**。我可以通过double得到我想要的单击单元格让excel修复它，“$”和“，”将出现。

我知道我可以使用 `cell.setCellValue(Double.parse("2655.32"))` 将字符串解析为双精度来解决这个问题，但如果是这样，我必须确保该值是可解析的，并将 try catch 块添加到我的每个 switch case，这是非常重复的。

我想知道是否有办法将这种数字字符串输出为文本并同时保持货币格式？像这样 $2,655.32

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:24:10.283

[这](http://www.roseindia.net/java/poi/setDataFormat.shtml)是解决问题的好教程。`HSSFDataFormat`有一些内置格式。使用该格式`#,##0.0`应该可以解决您的问题，如下所示：

```
 HSSFCellStyle cs = hssfworkbook.createCellStyle();
 HSSFDataFormat df = hssfworkbook.createDataFormat();
 cs.setDataFormat(df.getFormat("#,##0.0")); //or cs.setDataFormat((short)7);
 cell.setCellValue(2655.32);
 cell.setCellStyle(cs); 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:03:18.453

```
cell.setCellValue(416.17);      
cellStyle.setDataFormat((short)7);
cell.setCellStyle(cellStyle); 
```

# mysql - 有人将如何为 SQL 创建 ID？

> ID：15367435
> 
> 赞同：1
> 
> 时间：2013-03-12T16:59:15.060
> 
> 标签：mysql, sql, sql-server, tsql

我环顾四周，到目前为止，我还没有找到我的问题的答案。

一点背景；我是 SQL 新手，但对学习很感兴趣。由于即将搬家，我没有找到入门级的工作，而是正在学习我的证书，但有些事情是书本没有涵盖的。

现在，在创建表时，我了解创建唯一标识符的概念，并且我了解有很多方法可以做到这一点，要么使用；

** 'uniqueidentifier 默认 newsequentialid()'

或者

'int 主键标识' **

创建表时。

我了解每个的用途，但我的问题是，

**有人如何为 SQL 创建一个顺序但不从 1 开始的 ID？**

是否可以以 8 位数字 (00000001) 开头，例如员工 ID，或者是否存在阻止 SQL 从 (1) 以外的任何地方启动的限制

感谢您阅读女士们和男士们。

你们不要乱来！谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:03:02.840

[`CREATE SEQUENCE`](http://msdn.microsoft.com/en-IN/library/ff878091.aspx)您可以使用该语句创建自定义序列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:03:23.820

要从 1 以外的 AUTO_INCREMENT 值开始，您可以使用 CREATE TABLE 或 ALTER TABLE 设置该值，如下所示：

mysql> ALTER TABLE tbl AUTO_INCREMENT = 100;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:04:42.287

使用 dbcc checkident，您可以随时将您的标识列设置为任何整数值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:04:46.113

在 T-SQL 中，您可以使用以下语法设置标识种子

```
YourID INT PRIMARY KEY IDENTITY(1000, 1) 
```

这将从 1000 开始，并随着每个增量增加 1。

请参阅[http://msdn.microsoft.com/en-gb/library/ms186775.aspx](http://msdn.microsoft.com/en-gb/library/ms186775.aspx)

如果你想用零填充数字，我认为你不能用整数类型来做到这一点。

# extjs - zIndex 点击事件

> ID：15367437
> 
> 赞同：1
> 
> 时间：2013-03-12T16:59:18.857
> 
> 标签：extjs, sencha-touch-2

我有一个应用程序，它有一个默认 zIndex 为 0 的面板。当用户点击此面板时，此面板正在收集 x,y 坐标。当某些坐标匹配时，此面板中会弹出一个子项目，其中 zIndex:2。当第二个面板处于活动状态时，它阻碍了下方 zIndex:0 面板的完整视图。在此阶段，第二个面板会点击下面的面板。

我需要能够仅在 zIndex:0 面板上收集水龙头。zIndex:2 面板上的任何点击都应该被忽略或传递给它下面的面板。如何让 zIndex:2 面板忽略任何点击，并且只有 zIndex:0 面板来响应点击？

非常感谢任何帮助。

```
// coordinates panel
xtype: panel,
zIndex: 0,
items:[
   {
     // second panel
      xtype: panel,
      zIndex: 2
   }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:04:53.057

`pointer-events: none`您应该在第二个面板上使用 CSS 属性

阅读本文以获取更多信息：[CSS 指针事件以允许点击底层元素](http://robertnyman.com/2010/03/22/css-pointer-events-to-allow-clicks-on-underlying-elements/)

希望这可以帮助

# ios6 - 关于屏幕底部带有 i 图标的应用程序

> ID：15367443
> 
> 赞同：0
> 
> 时间：2013-03-12T16:59:49.180
> 
> 标签：ios6, xcode4.6

我对此进行了搜索，但找不到任何对此的引用。

在我的 iOS 通用应用程序中，我想在主视图控制器的右下方显示信息图标（与实用程序应用程序相同），并在 iPhone 和 iPad 上使用相同的图标来翻转以显示有关我的应用程序和其他内容的信息. 在带有 XCode 4.6 的 iPadd Utility 应用程序模板上，信息图标显示为导航栏上的按钮，并使用 UIPopOver 控件显示信息。

就我而言，我不想在 iPad 上使用 UIPopOver，但在单击信息图标时对 iPhone 和 iPad 使用相同的翻转效果。根据 Apple 的指导方针，这是有效的还是保证拒绝？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:02:10.680

我完全按照您在我的应用程序中的想法做。我使用翻转过渡来显示我的信息页面，使用信息图标作为按钮图像。当我提交时，我对 Apple 没有任何问题。

# bash - 选择 $var_no_N 之后的所有变量

> ID：15367445
> 
> 赞同：0
> 
> 时间：2013-03-12T16:59:51.847
> 
> 标签：bash, shell, scripting

我想选择在 N 个变量之后出现的所有或一组变量。

例如：我有一个包含多行的文件，这些行用逗号分隔。如何选择变量号之后的所有变量。4 并将它们输出到另一个文件？

我有一个文件`test1.txt`：

```
A, B, C, D, E    
A, B, C, D, E, F, G    
A, B, C, D 
```

并希望在以下输出`output.txt`：

```
E    
E, F, G  
(Nothing), as Line 3 had only 4 variables. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:11:03.597

你可以这样做`cut`：

```
cut -d, -f5- test1.txt > output.txt 
```

解释：
- cut 根据`-d`参数将每一行分解成块。在我们的例子中，逗号。
-`-f`我们指出必须打印哪些块。`-f1`将打印第一个，`-f-3`将打印前三个。与`-f5-`您一起打印从 5 日到最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:11:49.133

使用 sed：

```
sed -e '/^\([^,]*,\s*\)\{4\}/!d;s/^\([^,]*,\s*\)\{4\}//' test1.txt 
```

编辑：只是看了看，意识到它可以被简化（忘记了 t 分支命令）：

```
sed -e 's/^\([^,]*,\)\{4\}//;tX;d;b;:X;s/^\s*//' test1.txt 
```

并隔离一个值（在本例中为第 17 个）而不是运行到行尾：

```
sed -e 's/^\([^,]*,\)\{16\}//;tX;d;b;:X;s/^\s*\([^,]*\).*/\1/' test1.txt 
```

# gdb - 可以在gdb中运行，直接运行时出现分段错误

> ID：15367446
> 
> 赞同：2
> 
> 时间：2013-03-12T16:59:52.610
> 
> 标签：gdb, segmentation-fault, clone

我的程序正常运行时出现分段错误。但是，如果我使用 gdb run，它就可以正常工作。此外，当我在philo函数中增加睡眠时间时，分段错误的比率会增加。我正在使用 ubuntu 12.04。任何帮助或指点表示赞赏。这是我的代码

```
#define _GNU_SOURCE

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sched.h>

#include <signal.h>
#include <sys/wait.h>
#include <time.h>
#include <semaphore.h>
#include <errno.h>

#define STACKSIZE 10000
#define NUMPROCS 5
#define ROUNDS 10

int ph[NUMPROCS];
//cs[i] is the chopstick between philosopher i and i+1
sem_t cs[NUMPROCS], dead;

int philo() {
    int i = 0;
    int cpid = getpid();
    int phno;

    for (i=0; i<NUMPROCS; i++)
        if(ph[i] == cpid) phno = i;

    for (i=0; i < ROUNDS ; i++){
        // Add your entry protocol here
        if (sem_wait(&dead) != 0) {
            perror(NULL);
            return 1;
        }
        if (sem_wait(&cs[phno]) != 0) {
            perror(NULL);
            return 1;
        }
        if (sem_wait(&cs[(phno-1+NUMPROCS) % NUMPROCS]) != 0){
            perror(NULL);
            return 1;
        }

        // Start of critical section -- simulation of slow n++
        int sleeptime = 20000 + rand()%50000;
        printf("philosopher %d is eating by chopsticks %d and %d\n",phno,phno,(phno-1+NUMPROCS)%NUMPROCS);
        usleep(sleeptime) ;
        // End of critical section

        // Add your exit protocol here
        if (sem_post(&dead) != 0) {
            perror(NULL);
            return 1;
        }
        if (sem_post(&cs[phno]) != 0) {
            perror(NULL);
            return 1;
        }
        if (sem_post(&cs[(phno-1+NUMPROCS) % NUMPROCS]) != 0){
            perror(NULL);
            return 1;
        }
    }
    return 0;
}

int main( int argc, char ** argv){
    int i;
    void* stack[NUMPROCS];
    srand(time(NULL));

    //initialize semaphores
    for (i=0; i<NUMPROCS; i++) {
        if (sem_init(&cs[i],1,1) != 0){
            perror(NULL);
            return 1;
        }
    }
    if (sem_init(&dead,1,4) != 0){
        perror(NULL);
        return 1;
    }

    for (i = 0; i < NUMPROCS; i++){
        stack[i] = malloc(STACKSIZE) ;
        if ( stack[i] == NULL ) {
            printf("Error allocating memory\n") ;
            exit(1) ;
        }

        // create a child that shares the data segment
        ph[i] = clone(philo, stack[i]+STACKSIZE-1, CLONE_VM|SIGCHLD, NULL) ;
        if (ph[i] < 0) {
            perror(NULL) ;
            return 1;
        }
    }

    for (i=0; i < NUMPROCS; i++) wait(NULL);
    for (i=0; i < NUMPROCS; i++) free(stack[i]);

    return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:47:05.797

典型的 Heisenbug：如果你看它，它就会消失。根据我的经验，仅在 gdb 之外获得 segv 或反之亦然是使用未初始化内存或依赖实际指针地址的标志。通常运行`valgrind`在检测这些方面是无情的准确。不幸的是（我的）`valgrind`无法处理您的`clone`外部`pthread`环境。

目视检查表明这不是记忆问题。只有堆栈分配在堆上，它们的使用看起来没问题。除非您用`void *`指针处理它们，然后向其添加一些内容，这在标准 C（GNU 扩展）中是不允许的。正确的是使用 a `char *`，但是 GNU 扩展可以满足您的需求。

从堆栈的顶部地址中减去 1 可能不是必需的，并且可能会在 的简单实现中导致对齐错误`clone`，但我再次认为这不是问题，因为`clone`很可能会再次对齐堆栈顶部。诚然，手册页对`clone`地址的确切位置不是很清楚：“内存空间的最高地址”。

只是等待一个孩子的状态改变并假设它死了有点草率，然后拿走它的堆栈可能会导致分段错误，但我再次认为这不是问题，因为你可能不会疯狂地发送信号到你的哲学家。

如果我运行你的应用程序，哲学家可以在 gdb 内外不受干扰地完成他们的晚餐，所以以下是一个猜测。让我们将克隆哲学家的父进程称为“桌子”。一旦一个哲学家被克隆，该表将返回的 pid 存储在 中`ph`，例如将该数字分配给椅子。哲学家做的第一件事就是寻找他的椅子。如果他没有找到他的椅子，他将有一个未初始化`phno`的用于访问他的信号量。现在这很可能导致分段错误。

该实现假设在哲学家开始之前将控制权返回到表中。我在手册页中找不到这样的保证，我实际上希望这不是真的。克隆接口也有可能将进程 ID 放置在子进程和父进程共享的内存中，这表明这是一个公认的问题（参见参数`pid`和`ctid`）。如果使用了这些，则 pid 将在表或刚刚克隆的哲学家获得控制之前写入。

这个错误很有可能解释了 inside 和 outside 之间的区别`gdb`，因为`gdb`它非常清楚在其监督下产生的进程，并且可能会以不同于操作系统的方式对待它们。

或者，您可以为表分配一个信号量。所以没有人坐在桌子旁，直到桌子说出来，显然是在它分配了所有椅子之后。这将更好地使用 semaphore `dead`。

顺便提一句。您当然完全清楚，您的解决方案的设置确实允许所有哲学家最终每个人都有一个叉子（嗯，筷子）并饿死等待另一个的情况。幸运的是，发生这种情况的机会非常渺茫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:52:58.803

> ```
> ph[i] = clone(philo, stack[i]+STACKSIZE-1, CLONE_VM|SIGCHLD, NULL) ; 
> ```

这会创建一个执行线程，而 glibc 对此一无所知。因此，glibc 不会创建它需要的任何特定于线程的内部结构，例如动态符号解析。

通过这样的设置，从你的函数调用任何 glibc 函数都会`philo`调用未定义的行为，并且你有时会崩溃（因为动态加载器将使用主线程的私有数据来执行符号解析，并且因为加载器假定每个线程都有自己的私有区域，但是您通过创建`clone`共享“glibc 背后”的单个私有区域的 s 违反了这个假设）。

如果您查看核心转储，则很有可能实际崩溃发生在 中`ld.so`，这将证实我的猜测。

*永远*不要直接使用`clone`（除非你知道你在做什么）。改为使用`pthread_create`。

这是我在刚刚得到的核心中看到的（这正是我描述的问题）：

```
Program terminated with signal 4, Illegal instruction.
#0  _dl_x86_64_restore_sse () at ../sysdeps/x86_64/dl-trampoline.S:239
239             vmovdqa %fs:RTLD_SAVESPACE_SSE+0*YMM_SIZE, %ymm0
(gdb) bt
#0  _dl_x86_64_restore_sse () at ../sysdeps/x86_64/dl-trampoline.S:239
#1  0x00007fb694e1dc45 in _dl_fixup (l=<optimized out>, reloc_arg=<optimized out>) at ../elf/dl-runtime.c:127
#2  0x00007fb694e0dee5 in _dl_runtime_resolve () at ../sysdeps/x86_64/dl-trampoline.S:42
#3  0x00000000004009ec in philo ()
#4  0x00007fb69486669d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112 
```

# ios - iOS 6 中的地图问题

> ID：15367452
> 
> 赞同：1
> 
> 时间：2013-03-12T17:00:13.520
> 
> 标签：ios, mkmapview, mapkit

在 iOS 5 中这工作得很好，我的印象是 MKMapKit 中的所有内容都将继续以几乎相同的方式工作。但是，它没有放大到我的位置并添加我设置的注释，而是只显示北美。我将注释从我拥有的代码片段中删除，而只是放入初始代码设置。

```
[mapView setMapType:MKMapTypeSatellite];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];
mapView.delegate = self;
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
region.center.latitude = 32.385325 ;
region.center.longitude = -86.217442;
region.span.longitudeDelta = 0.005f;
region.span.latitudeDelta = 0.005f;
[mapView setRegion:region animated:YES]; 
```

关于为什么它没有缩放到我设置的位置的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:13:59.957

我个人不怀疑 iOS 6 v iOS 5 的问题。这段代码在 iOS 6 中对我来说很好用。所以问题出在其他地方。

简而言之，`mapView`变量出现问题的可能性似乎更大。你检查过`mapView`不是`nil`吗？有各种简单的候选问题：

*   也许您为属性手动声明了类实例变量（您不应该这样做......只需定义您的属性并让编译器为您合成您的实例变量，正是为了避免这种可能的混淆）；或者

*   也许连接失败`IBOutlet`，等等。

# android - Android 应用程序的 Eclipse 调试耗时过长

> ID：15367456
> 
> 赞同：1
> 
> 时间：2013-03-12T17:00:26.900
> 
> 标签：android, eclipse, performance

我有一个中等大小的 Android 应用程序（17.6 meg），它需要 1 分 45 秒才能让 eclipse 在调试模式下加载。如果我选择“运行方式”（而不是“调试方式”），加载需要 15 秒。我能做些什么来加快这个过程吗？

请注意，随着项目的发展，加载时间一直在增加，但最新添加的 Amazon Wireless SDK (4.4 meg) 将其推向了站不住脚的领域。

顺便说一句，在“调试为”开始后 1 分 13 秒，APK 才会出现在 bin 文件夹中 - 这正常吗？它不应该在“构建”之后立即出现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:08:21.440

您是否尝试过从`Intel x86 Emulator Accelerator (HAXM)`Android SDK Manager 安装？

要求：

-英特尔® 处理器，支持 VT-x、EM64T 和执行禁用 (XD) 位功能

[你可以在这里](http://software.intel.com/en-us/articles/installation-instructions-for-intel-hardware-accelerated-execution-manager-microsoft)找到更多关于它的信息

# java - 用变量定义 setContentView

> ID：15367460
> 
> 赞同：0
> 
> 时间：2013-03-12T17:00:37.763
> 
> 标签：java, android

我是android的新手，我试图通过Intent函数接收一个变量，并且根据变量的值应该显示一个contentview。

```
Bundle parametros = getIntent().getExtras();
String type = parametros.getString("tipo");
int accao = parametros.getInt("accao");

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (type=="medicamentos") {
        Button voltar = (Button) findViewById(R.id.button1);
        voltar.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent medIntent = new Intent(view.getContext(), Listar.class);
                startActivityForResult(medIntent, 0);
            }
        });
        if (accao==1)
            setContentView(R.layout.adicionar_medicamentos);

        if (accao==2)
            setContentView(R.layout.editar_medicamentos);
    }
} 
```

我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:02:30.317

用于`equals()`比较字符串。

`==`比较对象引用而不是它们的内容。

```
if(type.equals("medicamentos")) {
  ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:11:40.633

```
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

String type = getIntent().getString("tipo");
int accao = getIntent().getInt("accao");

if (type != null && type.equals("medicamentos")) {
    Button voltar = (Button) findViewById(R.id.button1);
    voltar.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent medIntent = new Intent(view.getContext(), Listar.class);
            startActivityForResult(medIntent, 0);
        }
    });
    if (accao==1)
        setContentView(R.layout.adicionar_medicamentos);

    if (accao==2)
        setContentView(R.layout.editar_medicamentos);
} 
```

}

# php - 在php中获取未定义的偏移量

> ID：15367465
> 
> 赞同：0
> 
> 时间：2013-03-12T17:00:49.413
> 
> 标签：php, html, forms

运行代码时，我不断收到此通知：

```
Notice: Undefined offset: 1 in C:\Users\Walid\xampp\htdocs\Inl3\Filmer-PHP.php on line 83 
```

它在这条线上抱怨：

```
echo '<li>'.'<a href="Filmer-PHP.php?name=' .$lineSplit[0].  '">'.$lineSplit[0].'<span>'.$lineSplit[1].'</span>'.'</a>'.'</li>'; 
```

我认为它在 $lineSplit[1] 上抱怨。我真的不知道为什么它会抱怨，尽管代码工作正常，因为它是一个通知。但它出现在我的屏幕上，我不知道如何解决它。

完整代码：

```
<!DOCTYPE html>

<html>

<head>
<title>Inlämning3</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript" src="jQuery.js" >
</script>
<script type="text/javascript" src="valideraFilmer.js" >
</script>

</head>

<body>

<?php
// Skriva film och info till en textfil
if( isset ($_POST['name'])){
    $name = $_POST['name'];
    $grade = $_POST['options'];
    $link = $_POST['link'];
    $pic = $_POST['pic'];
    $story = $_POST['story'];

    $myFile = "filmer.txt";
    $handle = fopen($myFile, 'a');

    if(!empty($name)){
        fwrite($handle, $name. ";");
        fwrite($handle, $grade. ";");
        fwrite($handle, $link. ";");
        fwrite($handle, $pic. ";");
        fwrite($handle, $story. "\n");
        fclose($handle);
    }
}
?>

<div id="page">
    <?php
        include("header.php");
    ?>
    <div id="leftbar">
        <form id="form" method="post" action="Filmer-PHP.php" >
            <fieldset>
                <legend>Lägg till en film:</legend>
                Titel:
                <br><input type="text" name="name" id="name"><br>
                Betyg:
                <br><select id="options" name="options">
                    <option value="0">Välj betyg här...</option>
                    <option value="*"> *</option>
                    <option value="**"> **</option>
                    <option value="***"> ***</option>
                    <option value="****"> ****</option>
                    <option value="*****"> *****</option>                       
                </select>
                <br>
                Länk till imdb:
                <br><input type="text" name="link" id="link"><br>
                Länk till bild:
                <br><input type="text" name="pic" id="pic"><br>
                Filmens handling:
                <br><textArea cols="20" rows="3" name="story" id="story"></textarea><br>
                <br><input type="submit" name="button" value="Spara film" id="button">
            </fieldset>
        </form>
    </div>
    <div id="rightbar">
        <h2>Filmer</h2>

        <?php
        // Läsa av och visa titel och betyg
            $readin = file('filmer.txt');
            $ul = '<ul id="films">';
            echo $ul;
            foreach($readin as $fName){
                $lineSplit = explode(";", $fName);
                echo '<li>'.'<a href="Filmer-PHP.php?name=' .$lineSplit[0]. '">'.$lineSplit[0].'<span>'.$lineSplit[1].'</span>'.'</a>'.'</li>';
            }
        ?>

        <?php
        // Läsa av och visa detaljerad info om filmer
            if(isset($_GET['name'])){
                $name = $_GET['name'];
                $readin = file('filmer.txt');
                $lineSplit = explode(";", $name);
                echo $name;
            }
        ?>

    </div>
        <?php
            include("footer.php");
        ?>
</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:12:16.257

您正在尝试从您的阵列中访问一个不存在的密钥。

我有两种解决方案：

1.  查看您的值是否可用于[isset](http://php.net/isset)或[array_key_exists](http://php.net/manual/fr/function.array-key-exists.php)。
2.  用于`error_reporting(E_ALL ^ E_NOTICE)`隐藏通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:06:06.633

您的文件中可能是一个空行，您可以通过替换以下代码来避免通知：

```
'<span>'.$lineSplit[1].'</span>' 
```

对于这个：

```
'<span>'.(isset($lineSplit[1])?$lineSplit[1]:'').'</span>' 
```

那是在实际使用它之前检查你的第二个数组元素是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:15:31.017

```
 $lineSplit = explode(";", $fName, 2);
            if ($lineSplit == FALSE) { // Or !$lineSplit
            } elseif (count($lineSplit) != 2) {
            } else {
                echo '<li>'.'<a href="Filmer-PHP.php?name=' .$lineSplit[0]
                     . '">'.$lineSplit[0].'<span>'.$lineSplit[1]
                     .'</span>'.'</a>'.'</li>';
            } 
```

# perl - 在 Perl GTK+2 中提取菜单项文本

> ID：15367467
> 
> 赞同：0
> 
> 时间：2013-03-12T17:00:53.223
> 
> 标签：perl, menu, gtk

我在树视图上有一个弹出菜单，用户可以在其中选择要从备份恢复的机器。我想简化界面并制作一个根据可用文件动态生成的子菜单。这是我到目前为止所拥有的：

```
$restore_item->set_submenu($arc_menu);
open( FILE, "archives.db" ) or die("Unable to open file");
foreach (<FILE>) {
    # if record is correct
    if ( $_ =~ /archive=(.+)/ ) {
        my $item = new Gtk2::MenuItem( "_" . $1 );
        $item->signal_connect( 'activate' => sub { print "selected\n"; });
        $arc_menu->append($item);
    }
}
close(FILE); 
```

但是，在现实生活中，我将不得不阅读菜单项文本，因为文件可以动态更改，我不能依赖计数或其他东西。我不明白如何从回调中获取菜单项文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:33:59.060

至少有两种选择。将可选参数传递给回调 (user_data) 或从 Gtk2::MenuItem ( `$item->get_label`) 获取标签。

对于前者，您可以使用以下内容：

```
$item->signal_connect('activate' => \&on_button_activate, $1);
[...]

sub on_button_activate
{
        # Do whatever you need.  The second parameters is
        # user_data (the filename in this case).
        my ($item, $user_data) = @_;
        print $item->get_label;
        print $user_data;
} 
```

# dojo - 带有嵌套数据存储的 Dojo Gridx？

> ID：15367469
> 
> 赞同：2
> 
> 时间：2013-03-12T17:00:59.130
> 
> 标签：dojo, dojo.gridx

**编辑：****答案**是使用**格式化函数**（见下文）

如果您有这样的数据存储：

```
 var store = new Store({
    data: [
        { id: 1, username:  {first: 'John', last: 'Doe'},  
          score: 130, city: 'New York', birthday: '1980/2/5'}
    ]
}); 
```

有没有办法告诉**GridX**在这样的结构中引用`username.first`？（这不起作用，但有没有办法做到这一点？）

```
var columns = [
  {field: 'username.first', name: 'Name'}
]; 
```

**回答：**

```
var columns = [
    {name: 'Name', field: 'username',  
        formatter: function(rowData) {
          return rowData.username.first;
        }
    }
]; 
```

# jython - 在 monkeyrunner 脚本中获取当前 CPU 使用率

> ID：15367472
> 
> 赞同：0
> 
> 时间：2013-03-12T17:01:07.723
> 
> 标签：jython, cpu-usage, monkeyrunner

我正在使用 monkeyrunner Jython 脚本来自动化一些 UI 测试。我想根据操作系统（运行模拟器的 PC）的当前 CPU 使用情况确认上一步是否完成，然后再执行下一步。因此，我需要一种在 monkeyrunner Jython 脚本中获取当前 CPU 使用率的方法。

我做了一些调查，但看起来monkeyrunner Jython 脚本不适用于psutil：[Monkeyrunner 找不到我的模块](https://stackoverflow.com/questions/12346337/monkeyrunner-doesnt-find-my-module)

任何人都可以告诉我在 monkeyrunner Jython 脚本中获取当前 CPU 使用率的最简单方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:54:38.650

您可以直接从以下位置调用 shell 命令`MonkeyDevice`：

```
top10 = device.shell('top -n 1 -m 10') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:47:45.680

尝试使用**top**命令获取 cpu 使用率，

1.如果你想获得 android 设备的 cpu 使用率，试试这个：-

```
import os
top_10_ps_list=os.popen('adb shell top -n 1 -m 10').read() 
```

2.如果你想获得PC OS的cpu使用率，试试这个：-

```
import os
top_10_ps_list=os.popen('top -b -n 1').read() 
```

# php - Selenium PHP Chrome Webdriver 问题

> ID：15367474
> 
> 赞同：0
> 
> 时间：2013-03-12T17:01:09.757
> 
> 标签：php, google-chrome, selenium

我正在尝试开始将 Selenium 与 Chrome 一起使用，我以前在处理 Selenium+Firefox 时没有遇到任何问题，但我现在似乎无法启动 Chrome 浏览器 - 每次我尝试时，都会出现一个 Firefox 浏览器。

这是我的设置：

```
$web_driver = new ChromeDriver("C:\chromedriver\chromedriver.exe");
$session = $web_driver->session('chrome'); 
```

我意识到第一行可能不正确。但我想不出还有什么方法可以启动 Chrome。

注意：我已经下载了 chrome web 驱动程序。

以下是我使用的来源： http: [//edvanbeinum.com/using-selenium-2-phpunit-to-automate-browser-testing](http://edvanbeinum.com/using-selenium-2-phpunit-to-automate-browser-testing) [https://code.google.com/p/selenium/wiki/ChromeDriver](https://code.google.com/p/selenium/wiki/ChromeDriver)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:00:14.157

尝试使用

```
 $session = $web_driver->session('googlechrome'); 
```

代替

```
 $session = $web_driver->session('chrome'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T11:19:09.410

You might want to take a look [here](https://github.com/facebook/php-webdriver/wiki/ChromeDriver) and [here](https://github.com/facebook/php-webdriver).

```
$host = 'http://localhost:4444/wd/hub'; // this is the default
$capabilities = DesiredCapabilities::htmlUnitWithJS();
{
  // For Chrome
  $options = new ChromeOptions();
  $prefs = array('download.default_directory' => 'c:/temp');
  $options->setExperimentalOption('prefs', $prefs);
  $capabilities = DesiredCapabilities::chrome(); 
  $capabilities->setCapability(ChromeOptions::CAPABILITY, $options);
}
$driver = RemoteWebDriver::create($host, $capabilities, 5000); 
```

# mysql - 使用节点将 JSON 对象导入 mysql 的最快方法

> ID：15367477
> 
> 赞同：9
> 
> 时间：2013-03-12T17:01:16.553
> 
> 标签：mysql, node.js

使用前面的例子？如何在
不手动命名表列标题的情况下使用 JSON 对象插入/更新 mysql 表？并确保它是异步的。

```
var mysql = require('node-mysql');
var conn = mysql.createConnection({
    ...
});

var values = [
    {name:'demian', email: 'demian@gmail.com', ID: 1},
    {name:'john'  , email: 'john@gmail.com'  , ID: 2},
    {name:'mark'  , email: 'mark@gmail.com'  , ID: 3},
    {name:'pete ' , email: 'pete@gmail.com'  , ID: 4}
];

// var sql = "INSERT INTO Test (name, email, n) VALUES ?";

   conn.query(sql, [values], function(err) {
        if (err) throw err;
        conn.end();
    }) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T21:34:16.930

你可以这样做：

```
for(var i = 0; i < values.length; i++){
    var post  = values[i]
    var query = connection.query('INSERT INTO posts SET ?', post, function(err, result) {
         // Finish
    });
} 
```

## 编辑

这就是您一次插入多个“帖子”的方式。

```
INSERT INTO posts (type, details)
  VALUES
  ('Helen', 24),
  ('Katrina', 21), 
```

您必须遍历第一个值才能获得这样的名称。

```
var names = [];
for(name in values[0]){
names.push(name);
// That would give you name, email, id
} 
```

然后你必须创建自己的字符串来插入。

```
var newvalues = [];
for(var i = 0; i < values.length; i++){
    newvalues.push('(' + values[i].join(',') + ')');
} 
```

然后执行查询：

```
connection.query('INSERT INTO posts (' + names.join(',') + ') VALUES ' + newvalues.join(',') , function(err, rows, fields) {
  // Result
}); 
```

您必须自己测试代码，这就是您的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:46:48.960

[在此处](https://github.com/felixge/node-mysql#custom-format)查看“自定义格式”部分。如果您注意到，此示例在查询中使用命名占位符，允许您传递对象，并且占位符将替换为来自对象的匹配属性。为了清楚起见，我还粘贴了相关部分：

```
connection.config.queryFormat = function (query, values) {
  if (!values) return query;
  return query.replace(/\:(\w+)/g, function (txt, key) {
    if (values.hasOwnProperty(key)) {
      return this.escape(values[key]);
    }
    return txt;
  }.bind(this));
};

connection.query("UPDATE posts SET title = :title", { title: "Hello MySQL" }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:04:56.690

您可以创建一个小函数，将具有该格式的数组映射到插入语句。

您可以轻松地遍历字段并使用一些字符串连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T03:13:49.950

更好的选择是（使用 MySQL 连接）：

```
app.get('/yourcontroller/:id', function (req, res) {

    var id = req.params.id;
    var dataUpdate = req.body;

    connection.query(
      'UPDATE yourtable SET ? Where ID = ?',
      [dataUpdate, id],
      function (err, result) {
        if (err) throw err;
        console.log('Updated data ! Changed ' + result.changedRows + ' rows');
      }
    );

}); 
```

# merge - 将点对合并到霍夫曼树中

> ID：15367478
> 
> 赞同：0
> 
> 时间：2013-03-12T17:01:18.183
> 
> 标签：merge, scheme, huffman-code

我有一个名为 make-leaf-set 的过程，它创建叶节点和另一个对最低的第一高进行排序的过程。

```
(define (make-leaf-set pairs)
   (if (null? pairs)
    '()
    (let ((pair (car pairs)))
      (adjoin-set (make-leaf (car pair)
                             (cdr pair))
                (make-leaf-set (cdr pairs))))))

(define (adjoin-set x set)
  (cond ((null? set) (list x))
    ((< (weight x) (weight (car set))) (cons x set))
    (else (cons (car set)
                (adjoin-set x (cdr set))))))

"Predefined dotted paires"
(define pairs '((a . 2) (b . 5) (c . 1) (d . 3) (e . 1) (f . 3)))
=> ((leaf e 1) (leaf c 1) (leaf a 2) (leaf f 3) (leaf d 3) (leaf b 5)) 
```

pair 在使用时完美工作（make-leaf-set pairs）。一切都已排序。我还使用另一个称为 make-code-tree 的过程

```
(define (make-code-tree left right)
  (list left
        right
    (append (symbols left) (symbols right))
    (+ (weight left) (weight right))))

(define (symbols tree)
  (if (leaf? tree)
     (list (symbol-leaf tree))
     (caddr tree)))

(define (weight tree)
   (if (leaf? tree)
     (weight-leaf tree)
     (cadddr tree))) 
```

*   目标是创建一个过程，该过程采用一对列表，然后创建一个霍夫曼树。

作为一个开始，我想出了这个

```
(define (grow-huffman-tree list)
  (successive-merge (make-leaf-set list) '()))

 (define (successive-merge par tree)
   (if (null? par)
      tree
   (append (make-code-tree (car par) (cadr par)) tree))) 
```

当它坐下时，它合并了前两个元素并给出`((leaf e 1) (leaf c 1) (e c) 2)`. 但我希望它合并所有叶子，使其像霍夫曼树一样建立起来，我无法将其他叶子合并到这棵树中。我尝试调用`(successive-merge (cdr par) tree)`将导致元素 d 3 出现错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:34:36.407

我建议您从较小的初始示例开始，并计算出`grow-huffman-tree`（也许`successive-merge`，取决于这是否真的是一个合适的辅助例程）对每个较小的示例做了什么。

例如，我很难相信这条线在`successive-merge`：

```
(append (make-code-tree (car par) (cadr par)) tree) 
```

可能有任何意义。（但话又说回来，如果没有`tree`包括如何解释类​​的实例的数据定义，很难说什么是废话而不是什么是“聪明的”。

还要记住，“霍夫曼树”中的“树”一词非常相关。你不想建立一个`Listof X`; 相反，您需要*Treeof* X。因此，如果您看到打印出来的数据如下：

```
 ((obj 1 2) (obj 3 4) (obj 5 6) ... (obj 100 101)) 
```

这通常*不*被视为一棵有趣的树；这通常被认为是一个列表。（严格来说，它可以理解为一棵树；只是一棵非常浅的树，具有非常大的分支因子。）

一个更常见的树结构示例最终会打印出如下内容：

```
 (node a 1 (node b 2 (leaf 17)
                     (node d (leaf 26)
                             (leaf 17)))
           (node c 6 (leaf 18)
                     (leaf 1))) 
```

# jquery - jQuery点击切换动画

> ID：15367481
> 
> 赞同：8
> 
> 时间：2013-03-12T17:01:25.277
> 
> 标签：jquery, jquery-animate

我正在尝试学习如何使用 jQuery，但我偶然发现了一个问题。首先，我将向您展示导致问题的代码部分。

HTML

```
<div id="nav">
<div id="button"><p class="scroll" onclick="location.href='#ed';">Education</p></div>
<div id="button"><p class="scroll" onclick="location.href='#wxp';">Work Experience</p></div>
<div id="button"><p class="scroll" onclick="location.href='#oact';">Other Activities</p></div>
<div id="button"><p class="scroll" onclick="window.open('cv.pdf','mywindow');">View as PDF</p></div>
<div id="arrow_container"><div class="arrow" id="down"></div></div> 
```

jQuery

```
$(document).ready(function(){
$("#arrow_container").toggle(
  function () {
    $("#nav").animate({marginTop:"0px"}, 200);
      }, function () {
    $("#nav").animate({marginTop:"-100px"}, 200);
  });
}); 
```

我希望`#nav`最初部分位于屏幕外部的 div 在单击 div 时向下移动`#arrow_container`。然后`#arrow_container`再次单击时，我想`#nav`向上移动到其原始位置。

目前，没有这种情况发生。您能告诉我问题是什么以及如何解决吗？

编辑：[一个带有代码的 jsfiddle，包括一些 css](http://jsfiddle.net/5vfkn/)

编辑2：问题似乎解决了。还要感谢我忘记并回答的用户名已被删除的人，但他有一些很棒的提示！谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T18:57:26.910

试试这个：

```
$("#arrow_container").click( function(event){
    event.preventDefault();
    if ( $(this).hasClass("isDown") ) {
        $("#nav").stop().animate({marginTop:"-100px"}, 200);                            
    } else {
        $("#nav").stop().animate({marginTop:"0px"}, 200);
    }
    $(this).toggleClass("isDown");
    return false;
}); 
```

[http://jsfiddle.net/us6sohyg/5/](http://jsfiddle.net/us6sohyg/5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-06T15:24:21.210

对我来说，这不是 100% 我必须在每次动画之前编辑一个 stop() 事件。所以：

```
$("#arrow_container").click( function(event){
event.preventDefault();
if ($(this).hasClass("isDown") ) {
    $("#nav").stop().animate({marginTop:"0px"}, 200);          
    $(this).removeClass("isDown");
} else {
    $("#nav").stop().animate({marginTop:"-100px"}, 200);   
    $(this).addClass("isDown");
}
return false;
}); 
```

# yii - YII 中的多对多关系

> ID：15367482
> 
> 赞同：0
> 
> 时间：2013-03-12T17:01:29.610
> 
> 标签：yii

我正在尝试使用 YII 创建一个博客系统。示例和教程可用。但是他们对 Post 使用多值表。它就像

`Post(Id, Title, Content, Author, Tags)`

这里标签列中有多个值（用逗号分隔）。所以我创建了一个模式来避免这种情况，现在我有这样的表，

`Post(Id, Title, Content, Author)` `Tag(Id, Name)`

`PostHaveTags(Post_Id, Tag_Id)`

规范化架构后。

我可以设法在关系（）方法中建立关系。但我无法弄清楚如何从视图中获取输入并验证“标签”的值。有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:35:14.683

您可以尝试使用 javascript 让您的表单动态增长并包含零个、一个或多个标签。[您可以使用自定义验证规则](http://www.yiiframework.com/wiki/168/create-your-own-validation-rule/)在模型中进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:26:04.243

最后我找到了解决方案。这就是我所做的，

首先，我从视图中获取适当的数据并验证它们，定义一些规则。然后在 afterSave() 方法中，我手动将收集到的数据插入到相对关系中。不知道有没有简单的方法。但我认为，如果是这样，YII 会为我们生成代码。:)

谢谢大家帮忙。

# objective-c - 报告网络视图的设备宽度小于屏幕

> ID：15367487
> 
> 赞同：2
> 
> 时间：2013-03-12T17:01:45.617
> 
> 标签：objective-c

我的一个视图控制器中嵌入了一个 Web 视图。它的矩形为 600x800。好像当我发出一个 url 请求时，它告诉网络服务器它是 768px 宽，这是整个 ipad 纵向的宽度。

我们在 HTML 标头中设置了 width=device-width，因此它给了我一个 768x#### 页面并导致 web 视图水平滚动，因为我的 webview 的矩形是 < 768。

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" /> 
```

我如何设置这个 webview 以便它向 web 服务器报告正确的（较小的）宽度？

# 更新

我确实发现一些代码集在 webViewDidFinishLoad 中的 HTML 中设置了宽度，它确实有效，但是有更好的方法吗？看起来像一个黑客。

```
NSString *jsCmd = @"var viewport = document.querySelector('meta[name=viewport]');";
jsCmd = [jsCmd stringByAppendingFormat:@"viewport.setAttribute('content', 'width=%i, initial-scale=1.0, user-scalable=1');", (NSUInteger)_webView.frame.size.width];
[_webView stringByEvaluatingJavaScriptFromString:jsCmd]; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T18:11:38.937

跳过在元标记中给出宽度值。

```
<meta name="viewport" content="initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:21:32.917

元标记由服务器发送并由浏览器解释。使用 768 作为设备大小的是您的浏览器（safari）（这是正确的）。

解决方案是，在服务器端检测 iframe 调用并发送如下内容：

`<meta name="viewport" content="width=600; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"/>`

为了检测服务器端的 iframe 调用，最简单的方法是添加一个 URL 参数。

# html - 宽度 100% 到全尺寸问题

> ID：15367488
> 
> 赞同：0
> 
> 时间：2013-03-12T17:01:45.443
> 
> 标签：html, css, width, gallery, accordion

我制作了一个 100% 到全尺寸的 div，以便制作一些垂直的手风琴画廊。它确实有效，唯一的问题是调整大小的动画很奇怪，它在调整大小期间使我的图片变平，如您所见：[http ://hine.be/test](http://hine.be/test)

你对我如何解决它有任何想法吗？这是我的代码：

```
<!DOCTYPE html>
<head>  
<style>
input{display:none}
.ani
{
width:100%;
height:100px;
background:url(paonad.jpg) center no-repeat;
background-size: 100% auto;
transition:all 2s;
-moz-transition:all 2s; /* Firefox 4 */
-webkit-transition:all 2s; /* Safari and Chrome */
-o-transition:all 2s; /* Opera */
display:block;
}
input:checked + .ani
{
height:400px;
background-size: 4000px 400px;
}

.ani2
{
width:100%;
height:100px;
background:url(spacingad.jpg) center no-repeat;
background-size: 100% auto;
transition:all 2s;
-moz-transition:all 2s; /* Firefox 4 */
-webkit-transition:all 2s; /* Safari and Chrome */
-o-transition:all 2s; /* Opera */
display:block;
}
input:checked + .ani2
{
height:400px;
background-size: 4000px 400px;
}
</style>
</head>
<body>
<input type="checkbox" id="paon">
<label class="ani" for="paon"></label>
<input type="checkbox" id="space">
<label class="ani2" for="space"></label>
</body>
</html> 
```

编辑：http: [//jsfiddle.net/ht5F8/](http://jsfiddle.net/ht5F8/)

感谢 Lowkase ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:26:49.320

终于找到折木了：

[http://jsfiddle.net/rzB3E/](http://jsfiddle.net/rzB3E/)

在您的 .ani 类中，您需要像这样指定您的最小高度：

```
background-size: 100% 100px; 
```

而不是这个：

```
background-size: 100% auto; 
```

我还偶然发现了一个可能更优雅的解决方案：

[http://jsfiddle.net/XcFxQ/104/](http://jsfiddle.net/XcFxQ/104/)

```
<div class="my_img"></div>

.my_img{
    width:100%;
    height:100px;
    background:url(http://www.deshow.net/d/file/animal/2009-07/cute-kitten-631-4.jpg) center no-repeat;
    background-size: 100% 100px;
    transition:all 2s;
    -moz-transition:all 2s; /* Firefox 4 */
    -webkit-transition:all 2s; /* Safari and Chrome */
    -o-transition:all 2s; /* Opera */
    display:block;    
}

.my_img_large{
   height:400px;
   background-size: 4000px 400px;    
}

$('.my_img').click(function(){
    if ($(this).hasClass('my_img_large')) {
        $(this).removeClass('my_img_large');
    } else {
        $(this).addClass('my_img_large');
    }
}); 
```

# windows-phone-8 - Windows Phone 8 找出 IMEI / 设备名称 + 制造商

> ID：15367492
> 
> 赞同：0
> 
> 时间：2013-03-12T17:02:05.327
> 
> 标签：windows-phone-8, imei

我需要找出我的应用在哪个 Windows 手机设备上运行。有没有可靠的方法来找出 WP8 中的 IMEI？如果不是，大多数设备是否可靠地填写了 DeviceName 和 DeviceManufacturer 字段？文档说这些字段可能是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T20:45:35.483

你可以使用

```
//Device Name
Microsoft.Phone.Info.DeviceStatus.DeviceName

//Device Unique Identifier (not IMEI)
Convert.ToBase64String((byte[])Microsoft.Phone.Info.DeviceExtendedProperties.GetValue("DeviceUniqueId")))

//Device Manufacturer
Microsoft.Phone.Info.DeviceStatus.DeviceManufacturer 
```

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:43:09.237

这可能适用于 Windows Phone 7。也许，它也适用于 Windows Phone 8。

```
byte[] byteData = (byte[])DeviceExtendedProperties.GetValue(“DeviceUniqueId”);
string imei = System.Convert.ToBase64String(byteData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T20:10:54.307

DeviceExtendedProperties.GetValue(“DeviceUniqueId”) 如在 Windows Phone 7 上所述工作，但在 Windows Phone 8 上，此 API 将为 wp8 设备上的同一发布者返回所有应用程序通用的唯一 ID。但是两个不同发布者的应用程序将具有不同的设备 ID。

# php - 哪个对激活哈希、sha1 或 base64_encode 编码更好

> ID：15367499
> 
> 赞同：0
> 
> 时间：2013-03-12T17:02:14.467
> 
> 标签：php, base64, sha1

我目前正在构建一个基本的身份验证系统，并且我有一个用户激活功能，它生成一个 20 个字符长的字符串并将其编码为`sha1`，但我看到其他一些系统使用`base64_encode`可以请有人解释什么更好，为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:03:50.240

它们完全不同——`SHA1`是一种单向哈希函数，这意味着您不能从编码字符串返回到原始字符串。但是，`base64_encode`它是一种双向编码功能，这意味着您可以使用`base64_decode`.

安全方面，这意味着任何获得`base64_encode`d 值的人都可以轻松解码它，而`SHA1`值需要蛮力和大量时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:07:11.130

您可以放弃甚至对字符串进行编码/散列的想法，并使用[openssl_random_pseudo_bytes](http://php.net/openssl-random-pseudo-bytes)生成一个字符串，然后使用它。

```
echo bin2hex(openssl_random_pseudo_bytes(10)); 
```

示例输出：

```
root@upstairslinux:/var/www# php openssl.php
67b206be9ceef1c4974f

root@upstairslinux:/var/www# 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:05:45.160

您正在生成一串随机字符。没有一种编码或散列可能会给您带来任何好处。

`sha1`将使字符串更短，并使其（非常非常轻微地）更容易猜测所需的字符串。

`base64`将使字符串更长，并且更容易使自动换行会破坏您将其注入的任何 URL。

# ios - 通过蓝牙在 Mac OS X 和 iOS 之间交换字符串

> ID：15367509
> 
> 赞同：3
> 
> 时间：2013-03-12T17:02:32.980
> 
> 标签：ios, macos, bluetooth

对于一个项目，我必须将字符串或整数等信息从 iOS 应用程序（在 iPhone 5 上）发送到 Mac OS X 应用程序（在 MacBook Pro 上），而 iPhone 和 MacBook Pro 都没有 Wifi。显而易见的解决方案是使用蓝牙。所以问题是：我能做到吗，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T19:15:19.137

您应该使用 CoreBluetooth 框架。

对于 Mac：您需要 Macbook Air 或 Mac-mini

对于 iOS：您需要 iPhone 4s、iPhone 5、iPad 3、iPad 4 或新的 iPod touch。

——简要概述：

您需要在一台设备上同时托管 CBCentralManager 和 CBPeripheralManager，然后在另一台设备上仅托管 CBPeripheralManager。

CBCentralManager 负责连接和维护与外部设备的连接。

CBPeripheralManager 负责从这些连接中写入和读取。

您可以发送写入/读取请求，也可以宣传自定义 CBService，其中包含带有您的字符串/int 值的 CBCharacteristic。

查看头文件和文档，因为您需要采用大量方法。还有一些非常好的 WWDC2012 视频可以深入说明这些方法。

（但是，如果您只想使用 Macbook Pro，则需要在 Mac 上使用标准的 IOBluetoothFramework 和在 iOS 上使用外部附件框架）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T08:30:03.737

这个项目应该可以帮助您在 iOS 方面通过蓝牙共享字符串：[SimpleShare](http://github.com/lauraskelton/simple-share)

它使您可以轻松地通过蓝牙 LE 从您的 iOS 设备发送和接收字符串数组。您只需要在 Mac 上管理 CBCentralManager。

# java - Java 1.7 错误？：具有通用返回类型的属性的继承 PropertyDescriptors 丢失属性映射

> ID：15367511
> 
> 赞同：2
> 
> 时间：2013-03-12T17:02:37.673
> 
> 标签：java, javabeans

*从 Java 1.7 开始，如果属性的返回类型采用泛型参数*，则从 BeanInfos 获取超类的 PropertyDescriptor 将丢失其属性映射。下面的测试代码说明了这种行为：

```
import java.beans.*;
import java.util.*;
import org.junit.Test;
import static org.junit.Assert.*;

public class BeanInfoTest {

    public interface Super {

        public List<String> getSuperList();

        public void setSuperList(List<String> list);

        public String[] getSuperArray();

        public void setSuperArray(String[] array);
    }

    public interface Sub extends Super {

        public List<String> getSubList();

        public void setSubList(List<String> list);
    }

    public static class SuperBeanInfo extends SimpleBeanInfo {

        private PropertyDescriptor[] props = new PropertyDescriptor[2];

        public SuperBeanInfo() throws IntrospectionException {
            props[0] = new PropertyDescriptor("superList", Super.class);
            props[1] = new PropertyDescriptor("superArray", Super.class);

            props[0].setValue("superListAttribute", new Object());
            props[1].setValue("superArrayAttribute", new Object());
        }

        @Override
        public PropertyDescriptor[] getPropertyDescriptors() {
            return props;
        }
    }

    public static class SubBeanInfo extends SimpleBeanInfo {

        private PropertyDescriptor[] props = new PropertyDescriptor[1];

        public SubBeanInfo() throws IntrospectionException {
            props[0] = new PropertyDescriptor("subList", Sub.class);
            props[0].setValue("subListAttribute", new Object());
        }

        @Override
        public PropertyDescriptor[] getPropertyDescriptors() {
            return props;
        }

        @Override
        public BeanInfo[] getAdditionalBeanInfo() {
            try {
                return new BeanInfo[]{Introspector.getBeanInfo(Super.class)};
            } catch (IntrospectionException ex) {
                throw new RuntimeException(ex);
            }
        }
    }

    @Test
    public void testBeanInfo() throws IntrospectionException {

        System.out.println(System.getProperty("java.version"));

        PropertyDescriptor[] pds = Introspector.getBeanInfo(
                Sub.class).getPropertyDescriptors();

        List<String> allAttrNames = new ArrayList<String>();
        for (PropertyDescriptor pd : pds)
            allAttrNames.addAll(Collections.list(pd.attributeNames()));

        // always passes
        assertArrayEquals(pds, new PropertyDescriptor[]{
                    new PropertyDescriptor("subList", Sub.class),
                    new PropertyDescriptor("superArray", Super.class),
                    new PropertyDescriptor("superList", Super.class)
                });
        assertTrue(allAttrNames.contains("superArrayAttribute"));
        assertTrue(allAttrNames.contains("subListAttribute"));

        // passes under 1.6_43; fails under 1.7_07
        assertTrue(allAttrNames.contains("superListAttribute"));
    }
} 
```

我意识到这更像是一份错误报告，所以这是我的问题：

*   这真的是一个错误，我的意思是，我是否忽略了规范中的某些内容，或者我没有遵循一些可以完全避免这种情况的最佳实践？

*   如果没有，是否有其他人遇到过这个问题和/或知道任何解决方法可以让人们继续使用 Java 1.7 下的参数化属性类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:46:03.757

显然这是我正在运行的版本（1.7.0_07）中的一个错误。更新到 1.7.0_17 后，问题就解决了。

# java - 在 Oracle 10g 中使用 Hibernate 将数据保存到 Clob

> ID：15367518
> 
> 赞同：1
> 
> 时间：2013-03-12T17:02:56.523
> 
> 标签：java, oracle, hibernate, oracle10g, clob

`java.sql.Clob`我在 Hibernate 中有一个带有列的表

**`hbm`文件：**

```
<class name="com.model.ClobModel" table="table1">
   <id name="id" column="id">
      <generator class="assigned"></generator>
  </id> 
  <property name="clobData" type="clob">
      <column name="ClobData"></column>
  </property> 
```

**这是`ClobModel`：**

```
private Integer id;
public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

private Clob clobData;

public Clob getClobData() {
    return clobData;
}

public void setClobData(Clob clobData) {
    this.clobData = clobData;
} 
```

**当我在休眠中尝试这个时：**

```
SessionFactory sf = new Configuration().configure("clob.cfg.xml").buildSessionFactory();
    Session sess = sf.openSession();

    ClobModel cb = new  ClobModel();
    cb.setId(101);
    try {
                // getClobData() method returns String, trying to convert it into java.sql.Clob and then assign it to the model
                   cb.setClobData(new javax.sql.rowset.serial.SerialClob(new ClobInsert().getClobData().toCharArray()));
    } catch (SerialException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }

    sess.save(cb);
    sess.flush();
    System.out.println("Exit!!!"); 
```

**我遇到了一个例外：**

```
javax.sql.rowset.serial.SerialClob cannot be cast to oracle.sql.CLOB 
```

上面`Clob`提到的都是 type `java.sql.Clob`。

不知道如何转换`String`成`java.sql.Clob`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:12:03.510

您需要将字段的类型显式映射到`java.sql.Clob`.

```
<property
    name="data"
    type="java.sql.Clob"
    update="true"
    insert="true"
    column="data"
/> 
```

# visual-studio-2012 - 更改 TFS 2012 中的代码审阅者列表？

> ID：15367519
> 
> 赞同：2
> 
> 时间：2013-03-12T17:02:58.190
> 
> 标签：visual-studio-2012

在 VS 2012 中，我可以转到 Team Explorer 并单击“请求代码审查”。在“新代码审查”部分有一个“输入审查者姓名”下拉菜单。此下拉列表似乎包含我们 TFS 服务器上的每个管理员的姓名。

我的问题是，我们如何编辑此列表以仅包含我们想要进行代码审查的人员？

# html - 我可以用 bgcolor 覆盖 td 的样式表 css 吗？

> ID：15367521
> 
> 赞同：2
> 
> 时间：2013-03-12T17:02:59.973
> 
> 标签：html, css, inline-styles

我需要修复一个为 TD 设置了默认样式的网站：

```
#cmsContent table td {
    background-color: #d7d7d9;
} 
```

但是，使用 CMS 编辑器的客户端想要粘贴他们在 Dreamweaver 中创建的一些 HTML，以将一些 tds 的背景设置为一堆不同的颜色，例如：

```
<td bgcolor="#669900"> 
```

（这是一个巨大的丑陋的dreamweaver生成的html的一小块，他们放在CMS中，很多tds有很多颜色）

但是样式表中设置的样式使所有背景变为灰色。

我想知道是否有一种方法可以“撤消”#cmsContent table td 中设置的默认样式，并让 td 的 bgColor 显示出来。我希望我可以将该表包装在一个带有类的 div 中，该类将撤消 #d7d7d9 背景颜色并让 bgcolor 显示出来。

```
<div class='overrideTDColor'><table>...<td bgcolor="#669900"> .... etc 
```

然后在我的样式表中

```
#cmsContent .overrideTDColor table td {
background-color: ?????
} 
```

有可能做这样的事情吗？请记住，clients 表中的每个 TD 都是不同的颜色，所以我不能只将覆盖设置为某种特定颜色。

除了重写dreamweaver html 让他们在tds 上使用style="" 而不是bgcolor="" 之外的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:06:44.997

不，如果有一种`background-color`样式应用于 a`td`那么它将始终优先于`bgcolor`属性，并且您将无法使用 CSS 撤消该样式以使浏览器使用 HTML 属性。您需要将 HTML 中的相同值硬编码到每个`td`元素的新 CSS 规则中，或者使用 JavaScript 读取样式表并删除`background-color`规则。

# php - 不使用文件夹或子域的多国网站

> ID：15367528
> 
> 赞同：0
> 
> 时间：2013-03-12T17:03:13.650
> 
> 标签：php, mysql

我正在尝试创建一个不将用户重定向到不同子域/文件夹的多个国家/地区/城市网站。

但是，每个国家/地区的网站都不同并加载不同的数据库，所以我想知道是否可以在文件夹中为每个网站创建一个文件`public_html`夹，例如`public_html/orlando`,`public_html/nyc`等...当用户选择特定的语言环境和语言时，它从该文件夹加载网站，而 url 仍然保留`www.example.com/`。

我已经看到了各种这样做的方法，但没有一个为我解决了这个问题，每个网站本质上都是不同的，因为它加载了不同的数据库/文章......等等。

# android - native_window_set_buffers_geometry 失败

> ID：15367536
> 
> 赞同：1
> 
> 时间：2013-03-12T17:03:46.773
> 
> 标签：android

我正在尝试在 OMAP 4460（Blaze Tablet-in ICS）中开发一个监视应用程序，充当客户端设备，从远程源呈现监视源。首先，监控信息从摄像头远程流式传输，端口作为 RTP 数据包转发，这些数据包通过定制的 RTP 堆栈在 OMAP 4460 中接收和呈现。渲染时，我从解码器收到以下错误，说“表面纹理已被放弃，native_window _set_buffers_geometry 失败”，更频繁。

以下是捕获的日志：

```
E/AwesomePlayer(  131): AwesomePlayer::onPrepareAsyncEvent-------- err = 0
E/AwesomePlayer(  131): AwesomePlayer::onPrepareAsyncEvent-------- OK = -430191887
I/OMXCodec(  131): [OMX.TI.DUCATI1.VIDEO.DECODER] AVC profile = 66 (Baseline), level = 31
E/OMXCodec(  131): set buffer size variable to : 307200
I/OMXCodec(  131): [OMX.TI.DUCATI1.VIDEO.DECODER] video dimensions are 640 x 480
I/OMXCodec(  131): [OMX.TI.DUCATI1.VIDEO.DECODER] Crop rect is 640 x 480 @ (0, 0)
E/SurfaceTexture(  128): [SurfaceView] setCrop: SurfaceTexture has been abandoned!
E/SurfaceTextureClient(  131): ISurfaceTexture::setCrop(...) returned No such device
E/SurfaceTexture(  128): [SurfaceView] setLayout: SurfaceTexture has been abandoned!
E/SurfaceTexture(  128): [SurfaceView] setCrop: SurfaceTexture has been abandoned!
E/SurfaceTextureClient(  131): ISurfaceTexture::setCrop(...) returned No such device
E/OMXCodec(  131): native_window_set_buffers_geometry failed: No such device (19)
E/ion     (  131): ioctl -1073460991 failed with code -1: Bad file number
E/ion     (  131): ioctl -1073460991 failed with code -1: Bad file number
D/DOMX    (  131): hardware/ti/domx/domx/omx_proxy_common/src/omx_proxy_common.c:2208    PROXY_ComponentDeInit()    
D/DOMX    (  131): ERROR: failed check:(eError == OMX_ErrorNone) || (eError == OMX_ErrorNoMore) - returning error: 0x80001011 - Error returned from OMX API in ducati
D/DOMX    (  131): hardware/ti/domx/omx_core/src/OMX_Core.c:396    OMX_FreeHandle()    
D/DOMX    (  131): ERROR: Error From ComponentDeInit..
D/StackInterface(  131): AwesomePlayer::reset_l called ++ 
```

相机的SDP：

```
v=0

o=StreamingServer 3331435948 1116907222000 IN IP4 192.168.1.102

s=h264.mp4

c=IN IP4 239.0.0.00;/1

t=0 0

a=control:*

m=video 0 RTP/AVP 96

a=control:trackID=0

a=rtpmap:96 H264/90000

a=fmtp:96 packetization-mode=1; sprop-parameter-sets=Z0KAH9oCgPSbgIEAmBAAfQAAEZQve+Eg,aM48gA==

m=application 0 RTP/AVP 107

a=control:trackID=2

a=rtpmap:107 vnd.onvif.metadata/90000 
```

一段时间以来，我一直在尝试解决此问题，但仍无法找出问题所在。

请透露如何进一步处理该问题。

问候，

马诺伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:28:56.223

我的英语不是很好。

检查 SurfaceTexture 指针。如果您在函数中定义 sp<.....>，则 sp<.....> 将在函数结束时被放弃。

# c - MpLab, ASM, C, Building 容纳两者

> ID：15367538
> 
> 赞同：1
> 
> 时间：2013-03-12T17:03:52.680
> 
> 标签：c, assembly, integration, pic24

我有一个用于 PIC24 芯片的大型 ASM 项目。（具体芯片为PIC24FJ256GB210）

我现在在 C 中有一些其他的例程。

我想将这些合并到我的项目中。

C 例程在一个有 5 个左右文件的项目中，其中一个包含`int main(void)`作为起点的语句。这是为了测试它们并让我们相信它们可以工作。我们现在准备移动该代码并将其合并到更大的现有系统中。

汇编语言的东西从`__reset:`指令开始。

我如何安排项目和构建选项，以便我可以做接下来的三件事？

*   继续从我的`__reset`指示开始
*   （或者至少确保我现有`__reset`的和`int main(void)`至少相互合作）
*   从 ASM 代码调用他的例程
*   使用 C 代码设置的相同数据缓冲区

有趣的是，Microchip 的用户论坛和示例代码部分似乎忽略了这个想法（或者，更有可能的是，我还没有弄清楚如何找到它们）。

我认为这个问题已经被问了很多，我希望我没有重复以前的问题，但我在这里和 MicroChip 的网站上都没有看到它。欢迎提供有关此主题的有用网站的链接。

如果我只需要学习如何更好地搜索此站点和其他站点，那么这本身就是一个有用且可行的答案。再次，希望我不是在问重复的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:07:45.147

我建议您阅读 DS51284H（“用于 PIC24 MCU 和 dsPIC® DSC 的 MPLAB® C 编译器用户指南”）（[PDF](http://ww1.microchip.com/downloads/en/devicedoc/51284h.pdf)）。

特别参见第 4.4 节*启动和初始化*

> “libpic30.a 存档/库中包含两个 C 运行时启动模块。两个启动模块的入口点都是 __reset。链接描述文件在程序存储器的位置 0 处构造 GOTO __reset 指令，该指令在设备复位时转移控制.... 5\. 函数 main 被调用时没有参数。
> ”

您的`__reset`标签和 CRT（C 运行时）中的标签会出现冲突。如果您有 CRT 的源代码，您可以通过将`__reset`CRT 中的标签重命名为其他名称来更改它，以便`__reset`始终首先调用您自己的标签。
另一点是，听起来您想获取一个独立程序并将其用作您自己程序中的库。由于独立程序通常设计为执行一项或多项特定任务并在该任务完成后退出，您可能需要稍微重构您的 C 代码以使其更像库（比如摆脱`main()`函数并可能替换它具有某种`init()`功能）。

和第 4.11 节*函数调用约定*。

> “前八个工作寄存器（W0-W7）用于函数参数。参数按从左到右的顺序分配给寄存器，一个参数分配给第一个适当对齐的可用寄存器
> ......
> 功能对于 8 位或 16 位标量，返回值在 W0 中返回，对于 32 位标量在 W1:W0 中返回，对于 64 位标量在 W3:W2:W1:W0 中返回。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-04T20:24:44.223

迈克尔给了你一个很好的答案。我唯一想补充的是，您应该用 C 语言制作项目并在其中剪切汇编函数。

这样您就可以保留快速且实用的 asm 代码，并且可以用 C 语言维护项目，这要容易得多。

将 C 代码转换为汇编代码并保留大量汇编代码并不符合您的利益，反之亦然。

一旦你阅读了文档，你会发现在 C 中使用汇编函数并不难，但是为了让你开始，你可以看看这个：

C:\ ...bla bla... \Microchip\MPLAB C30\src\dsp\include\dsp.h

包含位于此文件夹中的实际汇编函数的 C 函数声明：

C:\ ...bla bla... \Microchip\MPLAB C30\src\dsp\asm

您可以从函数 _VectorAdd 开始：向量加法，文件“vadd.s”

注意汇编函数**_VectorAdd**在头文件中定义为**VectorAdd 。**

**此示例文件适用于 DSPIC 中的 dsp 引擎，这是 PIC24 所没有的。**但它仍然足以说明提取原理。

# c# - 加密用户的记录索引

> ID：15367540
> 
> 赞同：0
> 
> 时间：2013-03-12T17:03:53.703
> 
> 标签：c#, .net, asp.net-mvc, cryptography

我的 ASP.NET MVC Web 应用程序代表用户创建了一些数据，并将其存储在 SQL 数据库中的一条带有数字主键的记录中。我通过主键访问数据。

我希望经过身份验证的用户能够导航到包含（数字）主键的 URL，但我不想公开实际的键值。所以，在我看来，我想用一个密码加密数字密钥（使用对称加密算法），密码由我的代码中的一个字符串加上登录用户的 UserID 组成。生成的 URL 类似于：`https://foo.com/123abc`，其中“123abc”是加密的密钥值（从字节转换为字符）。理论上（对于我的初学者来说）这个加密值，即使被恶意方获取，也不会有用，除非该方可以使用用户的凭据登录到我的网站。

**问题 1：**这是做这类事情的正确方法吗？
**问题 2：**知道这些东西的人能否指出我可以用于此目的的简单对称加密 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:26:44.450

您可以向 SQL 表添加一列并将其类型设置为 uniqueidentifier 并将其值设置为 NEWID() ，然后将其显示给用户，而不是使用 PK，此解决方案的开销最少，同时仍提供看似随机的系列，您可以稍后将其绑定到该用户。

```
ALTER TABLE foo ADD foobar uniqueIdentifier default newid(); 
```

[http://msdn.microsoft.com/en-us/library/ms187942.aspx](http://msdn.microsoft.com/en-us/library/ms187942.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:19:07.593

整数的对称加密将非常容易破解，您甚至不必费心。现在，您可以通过 Base64 编码或类似的方式对其进行加盐或混淆，但这仍然毫无意义。数据库主键不是敏感数据。没有访问数据库是没有意义的，如果他们可以访问数据库，那么通过他们的 id 查找特定用户绝对是你最不关心的问题。即使是对称加密也会为您的应用程序增加大量开销，因为这根本不是必需的。

如果您真的不想公开 PK，请使用 URL 中的用户名之类的其他内容，然后通过该名称查找用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:16:08.453

你可以这样做，当然。

将盐存储在您的会话中，每次随机生成一个或使用会话 ID 作为盐。

以下是两种可以用盐加密/解密字符串值的方法。您可以使用盐代替初始向量。

```
public static string Encrypt(string PlainText, string Password, string Salt,
 string HashAlgorithm = "SHA1", int PasswordIterations = 16, string InitialVector = "Initial Vector", int KeySize = 256)
{  
    byte[] InitialVectorBytes = Encoding.ASCII.GetBytes(InitialVector);
    byte[] SaltValueBytes = Encoding.ASCII.GetBytes(Salt);
    byte[] PlainTextBytes = Encoding.UTF8.GetBytes(PlainText);
    PasswordDeriveBytes DerivedPassword = new PasswordDeriveBytes(Password, SaltValueBytes, HashAlgorithm, PasswordIterations);
    byte[] KeyBytes = DerivedPassword.GetBytes(KeySize / 8);
    RijndaelManaged SymmetricKey = new RijndaelManaged();
    SymmetricKey.Mode = CipherMode.CBC;

    ICryptoTransform Encryptor = SymmetricKey.CreateEncryptor(KeyBytes, InitialVectorBytes);

    MemoryStream MemStream = new MemoryStream();
    CryptoStream cryptoStream = new CryptoStream(MemStream, Encryptor, CryptoStreamMode.Write);
    cryptoStream.Write(PlainTextBytes, 0, PlainTextBytes.Length);
    cryptoStream.FlushFinalBlock();
    byte[] CipherTextBytes = MemStream.ToArray();

    MemStream.Close();
    cryptoStream.Close();
    Encryptor.Dispose();
    Encryptor = null;

    return Convert.ToBase64String(CipherTextBytes);
}

public static string Decrypt(string CipherText, string Password, string Salt,
    string HashAlgorithm = "SHA1", int PasswordIterations = 16, string InitialVector = "Initial Vector", int KeySize = 256)
{ 
    byte[] InitialVectorBytes = Encoding.ASCII.GetBytes(InitialVector);
    byte[] SaltValueBytes = Encoding.ASCII.GetBytes(Salt);
    byte[] CipherTextBytes = Convert.FromBase64String(CipherText);
    PasswordDeriveBytes DerivedPassword = new PasswordDeriveBytes(Password, SaltValueBytes, HashAlgorithm, PasswordIterations);
    byte[] KeyBytes = DerivedPassword.GetBytes(KeySize / 8);
    RijndaelManaged SymmetricKey = new RijndaelManaged();
    SymmetricKey.Mode = CipherMode.CBC;

    ICryptoTransform Decryptor = SymmetricKey.CreateDecryptor(KeyBytes, InitialVectorBytes);
    MemoryStream MemStream = new MemoryStream(CipherTextBytes);
    CryptoStream cryptoStream = new CryptoStream(MemStream, Decryptor, CryptoStreamMode.Read);
    byte[] PlainTextBytes = new byte[CipherTextBytes.Length];

    int ByteCount = cryptoStream.Read(PlainTextBytes, 0, PlainTextBytes.Length);

    MemStream.Close();
    cryptoStream.Close();
    Decryptor.Dispose();
    Decryptor = null;

    return Encoding.UTF8.GetString(PlainTextBytes, 0, ByteCount);
} 
```

# css - 在 Outlook html 电子邮件中，浮动不起作用

> ID：15367542
> 
> 赞同：38
> 
> 时间：2013-03-12T17:03:55.850
> 
> 标签：css, outlook-2007

我想要这个布局，我有一个矩形框。左边的方框内有一个文本，右边有一个图像。这在浏览器中看起来不错，但是当作为 html 电子邮件发送时，在 Outlook 中浮动右侧似乎不起作用。它将图像放在文本下方的下一行。关于如何使这项工作的任何想法？（我试图避免使用表格。）

```
<div style="width: 100%;border-style:solid;overflow: hidden;">

    <span style="float: left;">  
         <h3> Your appointment Details</h3>
    </span> 
    <span style="float: right;">
        <img src="someImage"/>
    </span>

</div> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-02-17T04:02:06.930

谈话很晚，但这里是如何在 html 电子邮件中“浮动”，`align=""`而不是使用。

[这里的例子](https://stackoverflow.com/questions/17674172/equivalent-to-float-in-outlook/17677304#17677304)

此外，如果您正在寻找关于 html 电子邮件的资源（我假设您是因为您标记为正确的答案非常笼统），这里有一个[巨大的资源列表](https://stackoverflow.com/questions/2229822/best-practices-considerations-when-writing-html-emails/21437734#21437734)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-12T17:23:18.480

这是 Mail Chimp 关于 HTML 电子邮件编码的一个非常好的指南：

[http://kb.mailchimp.com/article/how-to-code-html-emails](http://kb.mailchimp.com/article/how-to-code-html-emails)

一些基本提示：

*   使用表格进行布局。
*   将最宽的表格设置为最大 600 像素宽。
*   不要尝试使用 JavaScript 或 Flash
*   不要在样式标签中使用 CSS，因为某些邮件客户端会丢弃它。
*   仅使用内联 CSS 样式。

基本上将您的电子邮件编码为大约 2003 年。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-27T08:43:08.293

CampaignMonitor 为跨多个电子邮件客户端的所有 CSS 支持提供[了这个相当出色的指南](http://www.campaignmonitor.com/css/)，也可以作为[pdf](http://i3.campaignmonitor.com/assets/files/css/campaign-monitor-guide-to-css-in-email-sep-2013V2.pdf?ver=1446)或[xls](http://i3.campaignmonitor.com/assets/files/css/campaign-monitor-guide-to-css-in-email-sep-2013.zip?ver=1446)下载。

正如上面的答案所说，对 CSS 的电子邮件支持非常有限，主要是由于[微软决定使用 Word 作为其 html 渲染引擎](http://fixoutlook.org/)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-04T22:03:27.240

简单的浮动图像可以像

```
<img src="yourimage" align="left" /> 
```

但是这样一来，文本和图像之间的填充将不会获得可靠的结果，Outlook 会删除边距和填充，并且您的文本将紧贴图像。所以试试这个：

```
<div style="text-align:justify;">

...a lot of text here untill you want to insert an image that floats left...

    <table cellpadding="0" cellspacing="0" align="left" style="float: left;">
        <tr>
            <td>
                <img src="yourimage" align="left" vspace="4" />
            </td>
            <td width="15">&nbsp;</td>
        </tr>
    </table>

...a lot more text here until you need an image that floats right...

    <table cellpadding="0" cellspacing="0" align="right" style="float: right;">
        <tr>
            <td width="15">&nbsp;</td>
            <td>
                <img src="yourimage" align="left" vspace="4" />
            </td>
        </tr>
    </table>

... a lot more text here...

</div> 
```

您需要在其周围包裹一个“表格”元素，以使填充边距效果在 Gmail、Outlook（在线）、Microsoft Outlook（桌面客户端）...

给表格一个 align=left 或 right 属性。（在这里编辑答案：此外，其他电子邮件客户端的后备和后备也给表格一个浮动值，所以两者都这样做。它们是彼此的备份。一些客户理解“浮动”，其他人理解“对齐”，一些人都理解， ...）您的表格将像图像一样漂浮在文本中。唯一的区别是，在 Outlook 中，表格会在文本中生成自动换行符，其中左对齐或右对齐的图像不会生成换行符。

为了设置边距，因为我们现在正在处理一个表格，所以在图像单元格的左侧或右侧添加一个宽度为“15”的额外“td”，并在其中添加一个不间断空格。（或透明的 gif -> spacer.gif）

```
&nbsp; 
```

您最好不要将单元格留空，否则某些电子邮件客户端将不会考虑单元格的宽度

对于上边距和下边距，我们可以使用“vspace”属性，不要忘记给图像一个 align = left 或 right 属性。否则，'vspace' 将不起作用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-18T01:32:35.327

我找到了一种在 Outlook.com 上应用**浮动的方法。**
只需将标签**大写，例如****Float:left**。

```
<span style="Float:left;">Content to float</span> 
```

也许你也应该使用**!important** ;
我测试了它并且它有效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-11T10:05:41.677

查看[https://www.campaignmonitor.com/css/](https://www.campaignmonitor.com/css/)此处列出了电子邮件中支持和不支持的所有内容

您可以使用外部表格代替浮动，并将想要浮动的内容放在外部表格的左侧 td 中。

这不是一个优雅的答案，但我是这样做的

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-18T14:37:56.103

当您将某物浮动到某物的右侧时，右浮动元素应始终首先出现在代码中。像这样：

```
<div style="width: 100%;border-style:solid;overflow: hidden;">
    <img src="someImage"  style="float: right;"/>
    <h3> Your appointment Details</h3>
</div> 
```

# timer - 如何使用 os.date() 安排应用程序关闭？

> ID：15367543
> 
> 赞同：0
> 
> 时间：2013-03-12T17:03:57.677
> 
> 标签：timer, coronasdk, schedule

我遇到了一个大问题。有人可以帮忙吗？谢谢。

```
local timer;
function start(e)
  timer = os.date("!*t", os.time() + 60);
  print(timer);
end
someObject:addEventListener("tap", start);

function verifyTimer()
 if(timer == 60)then
  os.exit();
 end
end
Runtime:addEventListener("enterFrame", verifyTimer) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:00:33.973

Apple 只允许在后台运行一些东西，而计时器不是其中之一。当应用程序因任何原因暂停时，您的计时器将被暂停。如果您希望将来发生某些事情，则需要设置 Corona 支持的本地通知事件。

我很确定谷歌会执行同样的事情。

# jquery - 使用 jQuery 遍历多个 html 表

> ID：15367544
> 
> 赞同：2
> 
> 时间：2013-03-12T17:04:06.960
> 
> 标签：jquery, html, arrays, html-table

我有几个结构相似的 HTML 表格。它们看起来都像这样：

```
<table cellspacing="1" cellpadding="7" summary="Procedure Tabulate: Table 1" frame="box" rules="groups" class="table table-bordered table-hover highchart-table">
    <thead>
        <tr>
            <th scope="col" rowspan="2" class="c m Header">&nbsp;</th>
            <th scope="col" class="c Header">3</th>
        </tr>
        <tr>
            <th scope="col" class="c Header">CA R</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th scope="row" class="l t RowHeader">Fours</th>
            <td class="r b Data">10268.64</td>
        </tr>
        <tr>
            <th scope="row" class="l t RowHeader">Hifi</th>
            <td class="r b Data">11267.82</td>
        </tr>
        <tr>
            <th scope="row" class="l t RowHeader">Magneto</th>
            <td class="r b Data">11575.91</td>
        </tr>
        <tr class="blue-bg">
            <th scope="row" class="l t RowHeader">Total</th>
            <td class="r b Data">33112.36</td>
        </tr>
    </tbody>
</table> 
```

我想用一类 highchart-table 遍历所有表并检索 CA R（thead 的最后一行的最后一个单元格）并创建关联数组，其中 tbody 内的 th 和 td 除了最后的“总行”（例如: Fours => 10268.61, Hifi => 11575.91, Magneto => 11575.91)。

我的最终目标是创建一个像这样的数组：

```
hcArr[0]['ind'] = 'CA R';
hcArr[0]['Fours'] = 10268.61;
hcArr[0]['Hifi'] = 11575.91;
hcArr[0]['Magneto'] = 11575.91; 
```

然后 have `hcArr[1]`which 包含下一个表的内容，其类为`highchart-table`.

目前我唯一有效的代码是：

```
$.each( $( '.highchart-table' ), function( key, value ) {

}); 
```

我不知道如何从当前循环中的表格到获取它的行和单元格。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:08:28.007

这不是最终解决方案，但这将为您提供标题单元格中的初始值。你可以从中推断得到其他人。[http://jsfiddle.net/tM546/](http://jsfiddle.net/tM546/)：

```
var theadValues = $.map($('.highchart-table'), function (idx, el) {
    return $(idx).find('thead tr:last th:last').text();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:52:50.660

像这样的东西应该工作：

```
var res = [];

$(".highchart-table").each(function() {
  var $$ = $(this), obj = {};
  obj.ind = $(this).find('thead tr:last th:last').text();
  $$.find("tbody th").each(function(){
    obj[$(this).text()] = parseFloat($(this).siblings("td").text());
  });
  res.push(obj);
});

console.log(res); 
```

顺便说一句，javascript中的数组只有数字索引，所以它会返回一个对象数组，如下所示：

```
[
  { "ind": "CA R", "Fours": 10268.64, "Hifi": 11267.82, "Magneto": 11575.91 },
  { "ind": "CA R", "Fours": 10268.64, "Hifi": 11267.82, "Magneto": 11575.91 },
  ...
] 
```

# c# - 将元素添加到 DataGrid 后获取“真实”数据行

> ID：15367546
> 
> 赞同：1
> 
> 时间：2013-03-12T17:04:17.420
> 
> 标签：c#, .net, wpf, datagrid

## 解决了：

我已经通过订阅解决了这个问题`row.Loaded`——一旦调用了这个方法，我就可以遍历可视化树并找到`DataGridCellsPresenter`我需要操作的那个。

这当然是有道理的，应该更多地投资于理解 WPF :(

## 原始问题：

我需要`DataGridCellsPresenter`在将行添加到 Datagrid 时进行操作。我尝试连接到`LoadingRow`事件并通过 访问它`e.Row`，但是当事件发生时，该行尚未插入到数据网格中（因此`DataGridCellsPresenter`在`e.Row`可视化树中没有，`e.Row`也没有在 DataGrids 行中）。

据我所知，似乎没有发生任何`LoadedRow`事件。加载后有什么方法可以访问新添加的行吗？

PS。我尝试更新 datagrid 和 上的布局，`e.Row`但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:20:23.940

您可以从它的索引中检索该行：

```
 //found this on SO, I don't remember who, credit to original coder
    public static DataGridRow GetRow(this DataGrid grid, int index)
    {
        DataGridRow row = (DataGridRow)grid.ItemContainerGenerator.ContainerFromIndex(index);
        if (row == null)
        {
            // May be virtualized, bring into view and try again.
            grid.UpdateLayout();
            grid.ScrollIntoView(grid.Items[index]);
            row = (DataGridRow)grid.ItemContainerGenerator.ContainerFromIndex(index);
        }
        return row;
    } 
```

或者通过它的数据项：

```
var row= DataGrid.ItemContainerGenerator.ContainerFromItem(youritem); 
```

编辑此方法也可能对您有所帮助：

```
public static T FindChild<T>(DependencyObject parent, string childName)
                            where T : DependencyObject
    {
        // Confirm parent and childName are valid. 
        if (parent == null) return null;

        T foundChild = null;

        int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < childrenCount; i++)
        {
            var child = VisualTreeHelper.GetChild(parent, i);
            // If the child is not of the request child type child
            T childType = child as T;
            if (childType == null)
            {
                // recursively drill down the tree
                foundChild = FindChild<T>(child, childName);

                // If the child is found, break so we do not overwrite the found child. 
                if (foundChild != null) break;
            }
            else if (!string.IsNullOrEmpty(childName))
            {
                var frameworkElement = child as FrameworkElement;
                // If the child's name is set for search
                if (frameworkElement != null && frameworkElement.Name == childName)
                {
                    // if the child's name is of the request name
                    foundChild = (T)child;
                    break;
                }
            }
            else
            {
                // child element found.
                foundChild = (T)child;
                break;
            }
        }
        return foundChild;
    } 
```

# algorithm - 0-1背包的贪心算法

> ID：15367548
> 
> 赞同：4
> 
> 时间：2013-03-12T17:04:17.930
> 
> 标签：algorithm, combinatorics, knapsack-problem

是否有任何贪心算法可以为非分数（0-1 背包）背包问题提供最佳解决方案？我知道有一个分数版本的背包可以提供最佳解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-04-08T22:39:37.927

尽管贪心算法适用于分数背包，但没有适用于 0-1 背包的贪心算法。

这是因为在 0-1 背包中，您要么带走**所有**物品，要么根本不带走物品，这与分数背包不同，如果您的包溢出，您可以只取一部分物品。这是至关重要的。

这是一个反驳贪婪算法适用于 0-1 背包的示例。假设您有一个 6 号的包和这些物品：

项目 价值 尺寸 价值/尺寸
A 5.5 4 1.38
B 4 3 1.33
C 4 3 1.33

对于 0-1 背包，如果你想贪婪，你总是会拿价值/尺寸最高的物品，即物品 A。拿了物品 A 后，你只有空间容纳尺寸为 2 或更小的物品，所以你将无法拾取其他任何东西。这意味着你包里唯一的东西是物品 A，它的总价值是 22。

另一方面，如果你没有贪心并拿走了最有价值的物品，而是拿走了物品B，那么你也有足够的空间拿走物品C。这将导致袋子中的总价值为 24，这比贪婪路线要好。

# javascript - 隔离指令范围但保留对 ngModel 的绑定

> ID：15367550
> 
> 赞同：4
> 
> 时间：2013-03-12T17:04:24.823
> 
> 标签：javascript, scope, angularjs

我有一个指令可以`ng-model`用来暴露它的价值。

问题是这个指令的内部组件也会弄乱范围，所以我需要隔离它的范围，但仍然保留`ng-model`与外部世界的绑定。

我将如何实现这一目标？

这是指令：

```
angular.module('app', []).directive('myDirective', function() {
  return {
    restrict: 'E',
    require: 'ngModel',
    link: function(scope, element, attr, ngModel) {
      // do stuff using ngModel controller
    },
    replace: true,
    template: '<div><input ng-model="userInput" /></div>'
  };
}); 
```

```
<my-directive ng-model="prop"></my-directive> 
```

如您所见，该指令必须`prop`作为其值公开，但不应`userInput`在定义于`<input ng-model="userInput"/>`.

我如何才能仅`prop`在父范围内提供？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:41:39.950

通常，ngModelController 旨在与不创建新范围的指令一起使用。我发现让它与隔离范围一起工作的唯一方法是在隔离范围中使用相同的名称：

```
scope: { prop: '=ngModel' }  // must use 'prop' here! 
```

有关这方面的更多讨论，请参阅我的 SO 答案：[https ://stackoverflow.com/a/14792601/215945](https://stackoverflow.com/a/14792601/215945)

您还可以让指令使用`scope: true`. 如果您这样做，则`prop`需要是对象属性，而不是原始属性：例如，`ng-model='someObj.prop'`. 有关此方法的更多信息，请参阅此[https://stackoverflow.com/a/13060961/215945的第一个小提琴](https://stackoverflow.com/a/13060961/215945)

这仍然允许您在新指令子范围内创建自己的（新）属性，而不会影响父范围。好吧，您需要了解作用域原型继承在某种程度上是如何工作的——在父作用域上定义的**对象**将在指令子作用域中可见和可更改。 **在父作用域上定义的基元**将是可见的，但是如果您尝试更改父基元的值，您最终会创建一个隐藏/隐藏同名父属性的子属性。（更多关于原型继承的信息可以在[这里](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)找到。）

# macos - 禁止 Mail.app 欢迎对话框发布 Applescript 设置

> ID：15367551
> 
> 赞同：2
> 
> 时间：2013-03-12T17:04:25.403
> 
> 标签：macos, applescript

我正在尝试通过 AppleScript 配置 OSX Mail 应用程序。在运行 AppleScript 配置时，如果没有设置任何帐户，则会出现“欢迎使用邮件”对话框。但我正在尝试通过 AppleScript 设置帐户...

是否可以配置邮件应用程序，并禁止欢迎使用邮件对话框？

我相信问题集中在这个命令上：

```
tell application "Mail"
activate 
```

这实质上是启动应用程序，然后我的脚本继续进行配置。如果您取消“欢迎使用 Mail”对话框，Mail 应用程序将退出。如果您已经设置了帐户，那么设置帐户的 AppleSript 命令就可以正常工作。

有谁知道是否有办法抑制这个窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:16:29.613

我不知道如何阻止它弹出，但您可以使用以下代码隐藏它：

```
tell application "System Events" to set visible of process "Mail" to false 
```

当然，稍后您可以再次向用户显示它，使用告诉应用程序“系统事件”将进程“邮件”的可见设置为 true

# grails - Grails JMS 插件 - 不接收消息

> ID：15367552
> 
> 赞同：1
> 
> 时间：2013-03-12T17:04:25.487
> 
> 标签：grails, jms, oracle-aq

我将 Grails JMS 插件安装到我的应用程序中，但没有收到任何消息。我的配置如下：

在资源.groovy

```
jmsConnectionFactory(package.OracleAqFactoryBean) {
    dataSource = ref("dataSource")
} 
```

在 config.groovy

```
jms {
    containers {
        standard {
            autoStartup = true
            connectionFactoryBean = "jmsConnectionFactory"
        }
    }
} 
```

在我的 Grails 服务中：

```
class MyService {

    static exposes = ["jms"]
    static destination = "queuename"
    static listenerCount = 5

    void onMessage(msg) {
        // handle message
        println "WE GOT A MESSAGE...."
    }
} 
```

在 Datasource.groovy 中

```
 dataSource {
        driverClassName = "oracle.jdbc.pool.OracleDataSource"
        url = "jdbc:oracle:thin:@restofurl"
        username = "xxx"
        password = "xxxx"
    } 
```

我们在标准 Java 应用程序中使用标准 Spring 配置连接到工作队列，但是如果在 Grails 应用程序中导入该 Spring 配置，则该配置不起作用，这就是我们尝试使用 jms 插件的原因。

# google-play - 使用真实产品 ID 进行测试时从 Google Merchant Account 退款

> ID：15367554
> 
> 赞同：0
> 
> 时间：2013-03-12T17:04:25.863
> 
> 标签：google-play

背景：我已经用静态响应测试了我的应用程序，但现在我想用真实的产品 ID 进行测试，所以我从开发者网站“使用您自己的产品 ID 测试应用内购买”开始关注现在当我购买时，我必须从我的商家账户，订单上的退款链接没有启用，（注意：我没有添加银行账户来接收商家账户中的钱）。我看到取消整个订单按钮，但是里面的退款金额是0，那么谁能告诉我如何退款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:15:16.197

[给谷歌一些时间](http://support.google.com/googleplay/android-developer/answer/138001?hl=en)：

“为确保安全的购买环境并遵守我们的服务条款，我们的专家会定期审查 Checkout 商家帐户。在此期间，您将暂时无法通过您的帐户处理退款。[...] 请放心在您的退款尝试首次被拒绝后 24 小时，您将能够通过您的帐户恢复处理退款。感谢您在此期间的耐心等待。

# sql - 为 sql server 2005 创建 bcp 格式文件

> ID：15367555
> 
> 赞同：0
> 
> 时间：2013-03-12T17:04:25.947
> 
> 标签：sql, sql-server-2005, bulkinsert, bcp

我一直在创建 bcp 格式文件。我的客户正在使用 MSSQL 2005，我正在通过 RDC 进行远程连接。我正在使用以下命令在目标客户端 MSSQL Server 上创建格式文件，

> bcp myDatabase.TableName 格式 nul -c -x -f someFile..xml -T

但它提示我错误

> 与服务器建立连接时发生错误。

* * *

我的视图指向具有如下结构的表：

```
Colum Name          DataType
SKU                 Varchar(20)
ASIN                Varchar(20)
Price               Float
Quantity            Int
MarketplaceTitle    Varchar(50) 
```

**注意：我已经经历了许多类似的问题，但没有运气。**

任何人都可以为我提供上述视图的格式文件吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:10:16.227

听起来您的问题实际上是连接到您的数据库，而不是格式文件。

我创建了一个快速测试：

```
-- DROP TABLE dbo.Test
CREATE TABLE dbo.Test(
SKU                 Varchar(20),
[ASIN]              Varchar(20),
Price               Float,
Quantity            Int,
MarketplaceTitle    Varchar(50)
); 
```

这是一个稍微冗长的语法：

```
bcp YourDatabaseName.dbo.Test format nul -c -x -f c:\YourDir\format.xml -T -S YourServerName 
```

所以对我来说，这看起来像这样：

```
bcp sandbox.dbo.Test format nul -c -x -f c:\Test\format.xml -T -S "(local)" 
```

这是生成的文件：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="1" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="20" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="2" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="20" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
  <FIELD ID="3" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="30"/>
  <FIELD ID="4" xsi:type="CharTerm" TERMINATOR="\t" MAX_LENGTH="12"/>
  <FIELD ID="5" xsi:type="CharTerm" TERMINATOR="\r\n" MAX_LENGTH="50" COLLATION="SQL_Latin1_General_CP1_CI_AS"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="1" NAME="SKU" xsi:type="SQLVARYCHAR"/>
  <COLUMN SOURCE="2" NAME="ASIN" xsi:type="SQLVARYCHAR"/>
  <COLUMN SOURCE="3" NAME="Price" xsi:type="SQLFLT8"/>
  <COLUMN SOURCE="4" NAME="Quantity" xsi:type="SQLINT"/>
  <COLUMN SOURCE="5" NAME="MarketplaceTitle" xsi:type="SQLVARYCHAR"/>
 </ROW>
</BCPFORMAT> 
```

HTH。

# python - 如何使 Choicefield 不可见？

> ID：15367557
> 
> 赞同：0
> 
> 时间：2013-03-12T17:04:32.180
> 
> 标签：python, django, choicefield

我有两个`ChoiceField`：第一个有两个值，第二个应该是不可见的。

当我单击第一个值时，我希望能够显示第二个值。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:39:13.110

@Joran 是正确的。您需要使用 JavaScript onChange 事件处理程序来显示/隐藏第二个选择选项。jQuery 使这变得微不足道：

```
var first_select = $('#id_first_select'),
    second_select = $('#id_second_select');

first_select.change(function() {
    // Not checking for a particular value needed, etc.
    second_select.show();
}); 
```

# c++ - findFundamentalMat - 极线错误

> ID：15367558
> 
> 赞同：3
> 
> 时间：2013-03-12T17:04:33.067
> 
> 标签：c++, opencv, computer-vision

我想计算两个图像对之间的基本矩阵。为此，我使用通过`cv::FlannBasedMatcher`. 之后我打电话`cv::findFundamentalMat(left_pts, right_pts, CV_RANSAC, 2.0, 0.99, ransac_mask)`给找到的匹配项。

为了可视化计算的基本矩阵，我想绘制极线。为此，我尝试`cv::computeCorrespondEpilines`使用 Point 进行手动乘法并提取结果线方程（ax + by + c = 0）。

为了绘制线条，我只需使用剪断的线条（我在许多其他示例中都找到了）

```
for (cv::vector<cv::Vec3f>::const_iterator it = lines1.begin(); it!=lines1.end(); ++it)
{
    cv::line(left_new,
         cv::Point(0,-(*it)[2]/(*it)[1]),
         cv::Point(left.cols,-((*it)[2] + (*it)[0]*left.cols)/(*it)[1]),
         cv::Scalar(255,255,255));
} 
```

但对应点不在核线上。我什至在已经校正的图像上尝试过，但线条不是水平的。

现在我也测试了这个例子： http: [//opencv-cookbook.googlecode.com/svn/trunk/Chapter%2009/estimateF.cpp](http://opencv-cookbook.googlecode.com/svn/trunk/Chapter%2009/estimateF.cpp) 只是发现它有同样的问题。

有人可以分享这样一个用例的工作示例或给我一个提示可能会出现什么问题吗？（匹配似乎很好，所以它必须与实际估计相符）

# android - Android 应用开发我的第一个应用示例错误

> ID：15367559
> 
> 赞同：1
> 
> 时间：2013-03-12T17:04:35.013
> 
> 标签：android

我到处搜索，但找不到我的问题的答案。我对此完全陌生，而且不知所措。我只是从 Android 开发网站做基本的“我的第一个应用程序教程”。即使代码与示例中的代码完全相同，本教程也会导致错误。控制台中显示的错误是：

```
[2013-03-12 15:33:36 - MyFirstApp] D:\Android Development\MyFirstApp\res\menu       \main.xml:3: error: Error: No resource found that matches the given name (at 'title' with value '@string/action_settings').
[2013-03-12 15:34:38 - MyFirstApp] W/ResourceType( 6352): Bad XML block: header size     311 or total size 5346560 is larger than data size 0 
```

我唯一改变的是教程告诉我要改变的。 `Activity_main.xml`和`strings.xml`。我从来没有改变过任何东西`main.xml`。在包资源管理器中，它旁边显示一个红色 x `MainActivity>onCreate(Bundle)`，`onCreateOptionsMenu(Menu)` 这是来自 MainActiviy 的代码，括号中有错误

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); (error here red underline under R)
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu); (error here red underline under R)
    return true;
} 
```

}

我做错了什么？我刚开始学习这个，我什至无法让教程正确运行！

这是我按照说明更改的 Activity_main.xml 和 strings.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >
<EditText android:id="@+id/edit_message"
android:layout_weight="1" 
android:layout_width="0dp"
android:layout_height="wrap_content"
android:hint="@string/edit_message" />
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send" />

</LinearLayout>

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >
<EditText android:id="@+id/edit_message"
android:layout_weight="1" 
android:layout_width="0dp"
android:layout_height="wrap_content"
android:hint="@string/edit_message" />
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send" />

</LinearLayout> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:12:36.393

如控制台日志：

> 错误：找不到与给定名称匹配的资源（在“标题”处，值为“@string/action_settings”

意味着您需要`action_settings`在文件中添加一个字符串`res/values/strings.xml`作为

```
<resources>
    <!-- Your other strings -->
    <string name="action_settings">Action Settings</string>
</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:12:53.727

代码看起来不错，但 XML 存在一些问题。

1.  您的代码引用了activity_main，但您使用的文件名是Activity_main。由于匹配区分大小写，Android 建议您在文件名中仅使用小写字母。
2.  您似乎已经列出了 Activity_main.xml 两次。Strings.xml 根本不存在。因此，不可能说出问题所在。
3.  您没有列出 res/menu 目录中的任何文件。如果要创建选项菜单，则需要 res/menu/menu.xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:15:55.340

我自己对 Android 编程还很陌生，但无论如何我都会尽力提供帮助。

R通常是自动生成的；它下面的红线通常表示它已经消失。

大多数情况下，您会收到此错误，因为您在 String.xml 文件中出错。

根据您的错误消息，“action_settings”的字符串似乎存在错误。确保您没有包含任何撇号或犯任何其他语法错误。

# html - 垂直居中导航栏

> ID：15367561
> 
> 赞同：10
> 
> 时间：2013-03-12T17:04:39.473
> 
> 标签：html, css

我有一个包含两个元素的标题。第一个是公司徽标图像，宽度设置为 25%。另一个是导航栏，其元素设置为内联，因此它是水平的。我希望将导航栏设置为垂直居中，但我一生都无法弄清楚。我已经将我所知道的所有内容都设置为可以使用垂直对齐的元素，并将所有内容放入显示内联或表格单元格中以应用它。没有任何效果。

请记住，我不只是给它一个静态百分比填充或边距顶部的原因是因为随着页面变宽，图像高度随着宽度而扩大，所以当您水平扩展浏览器时，导航变得越来越多地方。

我将不胜感激任何帮助，因为我已经尝试过（比我想承认的要长得多）只是垂直居中一个对象。

HTML 缩减：

```
<div id="container">
<header id="header" role="banner">
    <img src="images" />
    <nav id="nav" role="navigation">
    <ul>
        <li><a href="#" title="About Us">About Us</a></li>
        <li><a href="#" title="Biographies">Biographies</a></li>
        <li><a href="#" title="Services">Services</a></li>
        <li><a href="#" title="Careers">Careers</a></li>
        <li><a href="#" title="Contact">Contact</a></li>
    </ul>
    </nav>
</header> 
```

CSS 减少：

```
header img {
    height: auto;
    width: 25%;
    float: left;
    }

header nav {
    width: 75%;
    font-size: 1em;
    }

header nav li {
    display: inline-block;

    width: 19%;
    }

header nav li a {
    background: #2CB2E6;
    line-height: 
```

这是一个简单的 jsFiddle：http: [//jsfiddle.net/LbTCT/](http://jsfiddle.net/LbTCT/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T17:17:59.210

[这是你原来的小提琴的一个叉子](http://jsfiddle.net/cherryflavourpez/zW7Xj/)。您需要设置`inline-block`您的徽标和`nav`元素本身：

```
header img, header nav {
    display: inline-block;
    vertical-align: middle;
} 
```

而不是试图`float`做事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:26:26.593

关于将所有内容作为内联块的答案是正确的。在这种情况下，除了将元素从文档流中分离出来之外，浮动不会为您做任何事情。但是，如果您的目标是较旧的浏览器，那么下面的解决方案应该适用于那些不支持在表格单元格之外垂直对齐的浏览器：

[示例小提琴](http://jsfiddle.net/LbTCT/2/)

相关的 CSS 更改在这里：

```
header {
    position:relative;
    display:block;
}
header:after {
    visibility: hidden;
    display: block;
    font-size: 0;
    content:" ";
    clear: both;
    height: 0;
}
header nav {
    width: 70%;
    font-size: 1em;
    position: absolute;
    top: 50%;
    line-height: 200%;
    margin-top: -2em;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:57:25.893

这是一种方法，它涉及到您的标记的微小变化。

```
<div id="header">
<header role="banner">
    <nav id="navigation" role="navigation">
        <ul>
            <li>
                <img src="http://i1207.photobucket.com/albums/bb466/audetwebdesign/jsFiddle%20Demos/chamber-logo.png">
            </li>
            <li><a href="#" title="About Us">About Us</a>

            </li>
            <li><a href="#" title="Biographies">Biographies</a>

            </li>
            <li><a href="#" title="Services">Services</a>

            </li>
            <li><a href="#" title="Careers">Careers</a>

            </li>
            <li><a href="#" title="Contact">Contact</a>

            </li>
        </ul>
    </nav>
    </header>
</div> 
```

CSS看起来像：

```
 #header {
        background-color: #cccccc;
        padding: 5px 0;
    }
    header {
        background-color: #f0f0f0;
    }
    header nav {
        border: 1px solid red;
    }
    header nav ul {
        margin: 0;
        padding: 0;
    }
    header nav li {
        display: inline;
        margin: 0;
        padding: 0;
    }
    header nav li img {
        vertical-align: middle;
        border: 1px solid blue;
    }
    header nav li a {
        vertical-align: middle;
        font-size: 1.00em;
        text-decoration: none;
        background-color: white;
        color: black;
        padding: 10px;
        margin: 0 0 0 10px;
    } 
```

关键是将徽标图像放在`<li>`列表的第一个元素中。然后，您将列表中的所有元素显示为`inline`并用于`vertical-align: middle`排列它们。

您可以调整填充和边距属性以获得所需的确切外观。

小提琴供参考：http: [//jsfiddle.net/audetwebdesign/adW9Y/](http://jsfiddle.net/audetwebdesign/adW9Y/)

**注意：**
代码还允许图像大小随视口缩放。

通过添加以下 CSS 规则：

```
.autoSize {
   width: inherit;
}
.autoSize img {
    width: 25%;
} 
```

并向标记添加一个类，如下所示：

```
<li class="autoSize">
    <img src="http://i1207.photobucket.com/albums/bb466/audetwebdesign/jsFiddle%20Demos/chamber-logo.png">
</li> 
```

由于`ul`元素扩展为视口的宽度，因此您可以将宽度继承给`li`包裹图像的子元素。然后为图像设置一个相对宽度（在本例中为 25%），并获得灵活/响应式缩放。

# r - 在 R 中为任何 dim-d 创建超立方体

> ID：15367565
> 
> 赞同：3
> 
> 时间：2013-03-12T17:04:46.687
> 
> 标签：r

我目前正在研究一个在 d 维度上工作的 R 代码。唯一的问题是......我对 R 很陌生，所以我不确定如何在 R 中创建一个 d 维超立方体等价物。

使用其他语言的一些概念，我尝试编码

```
## creation of the d-dimensional hypercube
expression <- "u1=(1:20)/20"
   for (i in 2:d) {
     extension <- paste("u", i, "=(1:10)/10",sep = "")          
     expression <- paste(expression, extension, sep = ", ")
}
q <- as.matrix(expand.grid(eval(parse(text=expression)), KEEP.OUT.ATTRS=FALSE)) 
```

但这不起作用，因为解析函数不喜欢逗号......

基本上，对于任何 dim=d，我需要一种方法来创建矩阵或数据框，以提供所有组合，例如，

```
 u=(1:10)/10 
```

你们将如何进行？

对不起，这个问题似乎很基本，但我已经用谷歌搜索了很长一段时间没有结果。

干杯和感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:06:21.040

```
makeHypercube <- function(dim, ticks) {
    do.call(expand.grid, 
            replicate(dim, seq_len(ticks)/ticks, simplify=FALSE))
}

## Try it out
makeHypercube(dim=3, ticks=2)
#   Var1 Var2 Var3
# 1  0.5  0.5  0.5
# 2  1.0  0.5  0.5
# 3  0.5  1.0  0.5
# 4  1.0  1.0  0.5
# 5  0.5  0.5  1.0
# 6  1.0  0.5  1.0
# 7  0.5  1.0  1.0
# 8  1.0  1.0  1.0

## Check that it works in higher dimensions
dim(makeHypercube(dim=10, ticks=3))
## [1] 59049    10 
```

# file - 具有文件查询功能的 NodeJS 库

> ID：15367567
> 
> 赞同：2
> 
> 时间：2013-03-12T17:04:52.490
> 
> 标签：file, node.js

我正在寻找具有查询功能的库。因此，假设我想获取项目中某个目录中的所有 JS 文件。我可以做类似的事情

```
filesystem.query({
    paths:[{
        path:"c:/path/to/dir",
        recursive:true
    }],
    types:[".js"],
    excludes:["test.js"]
},successFn,failFn); 
```

有没有图书馆有这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:19:38.033

使用[fs.readdir](http://nodejs.org/api/fs.html#fs_fs_readdir_path_callback)

```
var fs = require('fs');
fs.readdir('.', function (error, files)
{
    files.filter(function (fileName)
    {
        return /.*.js$/.test(fileName);
    }).forEach(yourfunc);
}); 
```

使用 [全局](https://npmjs.org/package/glob)

```
require("glob").glob("*.js", function (er, files) { ... }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:19:32.620

有一些模块具有这种过滤可能性：

*   [读取目录](https://github.com/thlorenz/readdirp)
*   [蹂躏](https://github.com/shanewholloway/node-tromp)
*   [fs2](https://github.com/medikoo/fs2)

# c# - C#如何正确地对遵循装饰器模式的类进行单元测试？

> ID：15367568
> 
> 赞同：7
> 
> 时间：2013-03-12T17:04:54.160
> 
> 标签：c#, .net, unit-testing, design-patterns

我对单元测试相当陌生（实际上我正在研究它）

我的目标当然是能够在下面的类中测试方法。

该类只是检查输入是否已经在缓存中，如果输入不在缓存中，它将返回输入的反转形式（虽然这里没有实现，但假设它有，因为目的只是为了测试）。

基本上，目标是确保测试 if-else。

这是我的课：

```
namespace YouSource.Decorator
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;

    /// <summary>
    /// Caching Decorator
    /// </summary>
    public class CachingDecorator : IModifyBehavior
    {
       private IModifyBehavior behavior;

       private static Dictionary<string, string> cache = 
           new Dictionary<string, string>();

        public string Apply(string value)
        {
            ////Key = original value, Value = Reversed
            var result = string.Empty;

            //cache.Add("randel", "lednar");
            if(cache.ContainsKey(value))
            {

                result = cache[value];

            }
            else
            {

                result = this.behavior.Apply(value);// = "reversed";
                cache.Add(value, result); 
            }
            return result;
        }
    }
} 
```

这是我测试的当前代码：

```
using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace YouSource.Decorator.Tests
{
    [TestClass]
    public class CachingDecoratorTest
    {
        private IModifyBehavior behavior;

        [TestInitialize]
        public void Setup()
        {
            this.behavior = new StubModifyBehavior(new CachingDecorator());
        }

        [TestCleanup]
        public void Teardown()
        {
            this.behavior = null;
        }

        [TestMethod]
        public void Apply_Cached_ReturnsReversedCachedValue()
        {
            string input = "randel";
            string reversed = "lednar";
            Assert.AreEqual(reversed, this.behavior.Apply(input));
        }

        [TestMethod]
        public void Apply_NotCached_ReturnsReversed()
        {
            string input = "not cached";
            string reversed = "reversed";
            Assert.AreEqual(reversed, this.behavior.Apply(input));
        }

        public class StubModifyBehavior : IModifyBehavior
        {
            private IModifyBehavior behavior;

            public StubModifyBehavior(IModifyBehavior behavior)
            {
                this.behavior = behavior;
            }

            public string Apply(string value)
            {

                //return this.behavior.Apply(value);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T17:53:23.210

装饰器动态地将新行为附加到被装饰的对象上。那是装饰者的责任。这就是你应该测试的。

因此，让我们为以下组件编写缓存装饰器：

```
public interface IComponent
{
    string DoSomething(string value);
} 
```

创建测试夹具（或 TestClass，如果您使用的是 MSTest）

```
[TestFixture]
public class CachingComponentTests
{
    private CachingComponent _cachingComponent;
    private Mock<IComponent> _componentMock;

    [SetUp]
    public void Setup()
    {
        _componentMock = new Mock<IComponent>(); // using Moq in this sample
        _cachingComponent = new CachingComponent(_componentMock.Object);
    }
} 
```

要编译此代码，您需要创建 CachingComponent 类，该类接受装饰组件。类似的东西（这里有点加速）：

```
public class CachingComponent : IComponent
{
    private IComponent _component;

    public CachingComponent(IComponent component)
    {            
        _component = component;
    }

    public string DoSomething(string value)
    {
        throw new NotImplementedException();
    }
} 
```

现在让我们定义装饰器的预期行为。它应该将调用传递给组件，如果这是第一次使用某些参数调用：

```
[Test]
public void ShouldCallComponentWhenCalledFirstTime()
{
    _componentMock.Setup(c => c.DoSomething("foo")).Returns("bar");

    Assert.That(_cachingComponent.DoSomething("foo"), Is.EqualTo("bar"));
    _componentMock.Verify();
} 
```

它失败了，因此方法还没有实现。第一个实现（嗯，最简单的实现将返回 null，但我们在这里移动得更快）：

```
 public string DoSomething(string value)
    {
        return _component.DoSomething(value);
    } 
```

好的。我们的缓存组件按预期工作。但它没有缓存任何东西。为此编写测试。它应该只调用一次组件。所有进一步的调用都应返回缓存值：

```
[Test]
public void ShouldReturnCachedValueWhenCalledMoreThanOnce()
{
    _componentMock.Setup(c => c.DoSomething("foo")).Returns("bar");

    Assert.That(_cachingComponent.DoSomething("foo"), Is.EqualTo("bar"));
    Assert.That(_cachingComponent.DoSomething("foo"), Is.EqualTo("bar"));
    _componentMock.Verify(c => c.DoSomething("foo"), Times.Once());
} 
```

和实施：

```
public class CachingComponent : IComponent
{
    private Dictionary<string, string> _cache = new Dictionary<string, string>();
    private IComponent _component;

    public CachingComponent(IComponent component)
    {            
        _component = component;
    }

    public string DoSomething(string value)
    {
        if (!_cache.ContainsKey(value))            
            _cache.Add(value, _component.DoSomething(value));            

        return _cache[value];
    }
} 
```

现在您有了经过验证的行为的缓存装饰器。

# matlab - matlab中如何编写格式化的数学公式？

> ID：15367571
> 
> 赞同：0
> 
> 时间：2013-03-12T17:05:07.150
> 
> 标签：matlab

例如

![在此处输入图像描述](../Images/f4960a64ee63c78da1250e3b159b6c72.png)

我应该使用静态文本还是其他东西？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:57:54.723

使用[`text`](http://www.mathworks.com/help/matlab/ref/text.html)命令：

```
text( 0, 0, '$x^2 + 3x - 10$', 'Interpreter', 'latex' ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T20:44:24.540

对于绘图`(title,` `label,`或`text)`简单（多项式）表达式，您可以直接使用`LaTeX`-like 表示法并依赖默认的[{tex}](http://www.mathworks.com/help/matlab/ref/text_props.html)解释器：

```
figure;
title('x^2+3x-10')
xlabel('x^2+3x-10')
text(0.5, 0.5, 'x^2+3x-10') 
```

图像的相同保留：

```
figure; 
imshow(imread('cameraman.tif'));
text(20, 20,'x^2+3x-10'); 
```

另请参见[MATLAB 图中的 TeX 字符。](http://www.mathworks.com/help/matlab/creating_plots/adding-text-annotations-to-graphs.html#f0-28104)

对于更漂亮的`LaTeX`数学字体，您可以`LaTeX`通过在 tex 格式字符串周围传递数学环境来使用解释器（作为@Shai 的答案和@ioums 的评论），即`$...$`：

```
text(20, 20, '$x^2+3x-10$', 'Interpreter', 'latex') 
```

![在此处输入图像描述](../Images/841c076822857efa352c0e034abaffc8.png)

最后，为了在命令提示符下打印表达式（出于某种原因），您可以使用符号表达式和[漂亮](http://www.mathworks.com/help/symbolic/pretty.html)的类似于排版数学格式：

```
sym x;
>> pretty(x^2+3*x+10)

   2 
  x  + 3 x + 10 
```

# mysql - 获取列中允许的最大长度，mysql

> ID：15367573
> 
> 赞同：4
> 
> 时间：2013-03-12T17:05:15.130
> 
> 标签：mysql, sql, database

我需要知道如何获取 mysql 中特定列的最大大小，该表是

转：

```
CREATE TABLE `turno` (  
`idTurno` tinyint(4) NOT NULL,  
`nombreTurno` varchar(20) COLLATE utf8_spanish2_ci NOT NULL,  
`horaInicio` tinyint(4) NOT NULL,  
`horafin` tinyint(4) NOT NULL,  
`valorTurno` int(11) NOT NULL,  
PRIMARY KEY (`idTurno`)) 
ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish2_ci 
```

专栏：

```
`nombreTurno` varchar(20) COLLATE utf8_spanish2_ci NOT NULL 
```

我应该得到：

```
20 
```

我越来越：

```
NULL 
```

查询：

```
SELECT MAX( LENGTH( nombreTurno ) ) AS maxl
FROM turno 
```

希望你能帮助我，谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T17:16:13.260

```
select COLUMN_NAME, CHARACTER_MAXIMUM_LENGTH 
from information_schema.columns
where table_schema = DATABASE() AND   -- name of your database
      table_name = 'turno' AND        -- name of your table
      COLUMN_NAME = 'nombreTurno'     -- name of the column 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/ccbb5e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-02T10:16:20.227

以下 SQL 查询将给出最大列长度。

```
SELECT max(length(column)) `max_column_length` from tab; 
```

# list - 我们可以将不可变列表视为树的对偶吗？

> ID：15367574
> 
> 赞同：6
> 
> 时间：2013-03-12T17:05:18.593
> 
> 标签：list, haskell, data-structures, tree, functional-programming

我可能会绘制一个单词列表，例如：

```
this -> is -> a -> test 
```

然后通过分享，我可能会画出两个列表：

```
this -> is -> a -> test
                     ^
                     |
that -> was -> a -> hard 
```

现在，如果我反转箭头，我会得到一棵树，以 test 为根。这与图/类别理论中的对偶概念相同。因此，我可以将树和列表视为双重概念。

这是正确/有用的吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T17:11:49.063

共享和懒惰允许你拥有任意的循环结构。例如，在 Haskell 中，定义

```
ones = 1 : ones 
```

生成一个由单个顶点（对应于 1）和一个循环（在图论中，而不是编程意义上）组成的图。通过反转箭头，你会得到相同的结构，而且它不是一棵树（因为它有循环）。

所以，这在惰性语言中是不正确的。

# hadoop - 如何在 Pig 中加载具有可变数量字段的文件

> ID：15367580
> 
> 赞同：0
> 
> 时间：2013-03-12T17:05:35.047
> 
> 标签：hadoop, apache-pig

我有一个输入文件，其中包含如下记录：

```
Movie1     Actor 1, Actor 2, Actor 3, ......, Actor n
Movie2     Actor 1, Actor 2,.......Actor n 
```

我想将此数据加载到 Pig 中的包中

```
 movies = LOAD 'movies.imdb' AS (......); 
```

我不确定如何填写我的“AS”字段，因为我的输入文件中的记录可能有可变数量的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:13:50.063

你可以这样做：

```
movies = LOAD 'movies.imdb' USING PigStorage(','); 
```

如果记录没有固定字段，`AS`则无法使用

# json - 如何在 d3.js 可重用图表模式中使用 json 对象

> ID：15367584
> 
> 赞同：2
> 
> 时间：2013-03-12T17:05:49.483
> 
> 标签：json, d3.js

我正在研究一个可重复使用的条形图示例，并让它与一个简单的数组一起工作。但是，由于我通过 json 对象添加了更多数据，因此我无法再让它工作。我包含的其他数据是添加到可视化中所必需的维度和标签。我正在使用 d3.v3.js。

*   澄清一下，这是针对水平条形图而不是垂直（柱形）图。

这是一个简化的 json 对象：

```
var module_1_data = [
    {"dimension1": "snow is fun",
     "dim1_label": "campaign",
     "metric1": 15,
     "met1_label": "clicks"
    }, 
    {"dimension1": "painting for art", 
     "dim1_label": "campaign",
     "metric1": 22,
     "met1_label": "clicks"
    }
]; 
```

这是我的 html 页面中对 bar_chart 函数的调用：

> bar_chart("220","400",module_1_data,"1")();

这是可重用的_bar_chart.js：[https ://gist.github.com/analyticsPierce/5144641](https://gist.github.com/analyticsPierce/5144641)

这是包含完整 json 对象的完整示例页面的 html：[https ://gist.github.com/analyticsPierce/5154104](https://gist.github.com/analyticsPierce/5154104)

我还将这个示例页面添加到我的网站：http: [//www.marketingscience.co/example_d3/bar_chart_example.html](http://www.marketingscience.co/example_d3/bar_chart_example.html)

我得到的错误信息是：

> 错误：属性 width="NaN" 的值无效 >

我可以控制台记录 bar_chart 函数中的宽度，我可以控制台记录 metric1 通过 data[0].metric1 中的值。但是，当我包含匿名函数时，它似乎失败了，我无法 console.log d。

我感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:13:06.670

你有两个主要问题。1.您没有向数据方法提供数据数组 2.您正在将非数字数据填充到宽度和高度属性中。

首先，查看第 23 和 39 行：

```
bar_chart.selectAll("line")
        .data(x.ticks(10)) 
```

和

```
bar_chart.selectAll("text")
        .data(function(d) { return d.metric1; }) 
```

您没有为选择提供数据。您正在提供回调来处理数据点，但尚未绑定数据。

data 方法接受要绘制的数据元素数组。你应该这样做： bar_chart.selectAll("text") .data(data) // 提供传入的数据数组

然后对各个数据点使用回调。

此外，您似乎正在为您的矩形宽度定义一些时髦的东西。你去：

```
 var x = d3.scale.linear()
      .domain([0, d3.max(function(d, i) { return d.metric1; } )])
      .range([0, 420]);  
      console.log("x: " + x[1]);
    var y = d3.scale.ordinal()
      .domain(function(d) { return d.metric1; })
      .rangeBands([0, 120]);  

    bar_chart.selectAll("line")
        .data(x.ticks(10))
      .enter().append("line")
        .attr("x1", x)
        .attr("x2", x)
        .attr("y1", 0)
        .attr("y2", 120)
        .style("stroke", "#ccc");

    bar_chart.selectAll("rect")
        .data(data)
      .enter().append("rect")
        .attr("y", y)
        .attr("width", x)
        .attr("height", y.rangeBand()); 
```

您正在为矩形元素的宽度和高度指定对象。这些应该只是数字。

您可能只想先尝试使用硬编码数据创建图形，然后以编程方式提供数据。

现在这可能是一个好的开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:27:43.170

首先，查看第 15 行和第 39 行。在每一行中，您调用一个带有两个参数的方法：

1.  **一组数据**
2.  *（可选）一个关键方法*

在这两种情况下，您都缺少数据数组。

`/* line 15 */ d3.max(MISSING_DATA_ARRAY, function(d, i) { return d.metric1; } )`

和

`/* line 38/39 */ bar_chart.selectAll("text").data(MISSING_DATA_ARRAY, function(d) { return d.metric1; })`

第 39 行的修复将解决您的“metric1 is undefined”错误

* * *

其次，当您使用数字数组时，第 35 行效果很好。现在您正在使用对象，您会遇到麻烦，因为`x`它是一个基于作为参数传递的数据点返回正确宽度的函数。当参数是一个数字时，这很酷，当它是一个对象时，函数不知道如何进行数学运算。

所以，在第 35 行，替换：

`.attr("width", x)`和`.attr("width", function(d){ return x(d.metric1); })`

这两个修复的组合将解决您的 width="NaN" 错误。

# compiler-construction - 仅在执行路径上应用通过

> ID：15367585
> 
> 赞同：5
> 
> 时间：2013-03-12T17:05:55.383
> 
> 标签：compiler-construction, llvm

我有一个分析整个模块的通道（使用`runOnFunction()`）。但我想将它应用到每个执行路径上。执行路径是指从程序中的一个点（用 start 注释）到程序的终止点（用 end 注释）的指令序列。

我假设我必须通过构造一个 CallGraph 将我的模块划分为函数，然后通过在前面提到的 CallGraph 的节点中构造 CFG-s 将每个函数划分为指令。我假设我选择的节点的执行路径是在 CallGraph 叶子中完成的所有路径（我应该能够在 CFG-s 之间进行通信）。从该节点，我可以使用图形搜索算法查看所有路径。

是否有可能用用户定义的东西替换`runOnFunction()`/`runOnModule()`方法，比如`runOnExecutionPath()`？如果是这样，LLVM 中是否存在适合存储执行路径的结构？另一种可能性是使用`getAnalysis<CallGraph>`or `getAnalysis<CFG>`? 我很困惑。

非常感谢您的任何建议！

# image - OpenCV 程序在执行几秒钟后冻结

> ID：15367590
> 
> 赞同：0
> 
> 时间：2013-03-12T17:06:18.740
> 
> 标签：image, opencv, timer

我正在使用 OpenCV 在 C++ 中运行一个程序，该程序读取相机图像，然后执行一些操作。如果我让它尽可能快地运行，相机的运行速度为 15 FPS。我正在尝试使用相机将 FPS 调节到我选择的数量，例如 10 FPS。我正在使用计时器来执行此操作（一个 timespec 对象和一个 clock_gettime() 函数调用）。时钟自行运行正常，相机自行运行正常，但是当我尝试自己每 100 毫秒抓取一帧时，程序将运行大约 3 秒，然后完全冻结。这是我的代码中的 while 循环：

```
/* Start the timer */
    clock_gettime(CLOCK_REALTIME, &ts);
    startBit = ts.tv_nsec;

    /* Show the image captured from the camera in the window and repeat */
    while (1) {  // main while loop 
        clock_gettime(CLOCK_REALTIME, &ts);
        endBit = ts.tv_nsec;
        if (endBit-startBit >= 100000000) {     // > 100 ms
            fprintf(stderr, "%lu\n", endBit-startBit);
            clock_gettime(CLOCK_REALTIME, &ts);
            startBit = ts.tv_nsec;      // reset timer

            IplImage* frame = cvQueryFrame(capture);   // Get one frame
            Mat limage(frame);       // convert IplImage to Mat
            if (!frame) {
                fprintf(stderr, "ERROR: frame is null...\n");
                getchar();
                break;
            }
            cvWaitKey(90);
        }
    } 
```

该程序将在控制台打印已经过去的时间。现在它的设置方式应该一直打印接近 100 毫秒（100000000 ns）的东西。但是控制台每秒给出一个奇怪的数字：18446744072800674356。正如我之前提到的，注释掉相机图像代码，计时器本身就可以正常工作（它仍然会打印出这个巨大的数字，但它会永远运行）。如果我注释掉计时器代码，相机将以 15 FPS 的速度运行，没有任何问题。但是，当我一起运行代码时，它会在大约 3 秒后冻结。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:21:50.677

您应该使用 CLOCK_MONOTONIC 而不是 CLOCK_REALTIME 请参阅[理解 clock_gettime 的问题](https://stackoverflow.com/questions/5930621/problem-of-understanding-clock-gettime)。

这是我的任务实现：

```
#include <opencv2/opencv.hpp>
#include <time.h>

int wait(double time) {
    timespec ts;
    ts.tv_sec = int(time);
    ts.tv_nsec = int(10e+9*time);
    nanosleep(&ts, (struct timespec *)NULL);
}

double getclock() {
    timespec ts;
    clock_gettime(CLOCK_MONOTONIC_RAW, &ts);
    return ts.tv_sec + double(ts.tv_nsec)/10e+9;
}

int main() {
    //cv::VideoCapture capture(0);
    cv::VideoCapture capture("video.mp4");

    double fps = 30.0;

    cv::Mat frame;

    while (1) { 
        double const c1 = getclock();
        capture >> frame;
        double const frame_time = getclock()-c1;

        fprintf(stderr, "Got frame in %.4f sec. max FPS: %.2f\n", frame_time, 1/frame_time);

        double const delta = 1.0/fps - frame_time;
        double wait_time = 0;
        if (delta > 0) {
            double const c2 = getclock();
            wait(delta);
            wait_time = getclock()-c2;
            fprintf(stderr, "wait: target %.4fsec. actual %.4f\n", delta, wait_time);
        }

        double const while_time = wait_time + frame_time;
        fprintf(stderr, "Show frame in %.4f sec. FPS: %.2f.\n\n", while_time, 1/while_time);
    }

    return 0;
} 
```

# wordpress - 防止弹出窗口在加载时打开，Wordpress

> ID：15367594
> 
> 赞同：0
> 
> 时间：2013-03-12T17:06:38.460
> 
> 标签：wordpress

我想我的问题很简单，即使我似乎无法解决这个问题。我正在使用一些 iframe，当我将其制作成 wordpress 页面模板而不是纯 html 时，页面上的弹出窗口在页面加载后立即开始弹出。我该如何防止这种情况？

谢谢！

**页面模板：**

```
<?php
/*
Template Name: Klasseforside
*/
?>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <link rel="stylesheet" type="text/css" href="https://dl.dropbox.com/u/3171189/Klassekampen/klassekampen.css" />

    </head>
    <body class="iframe" style="background-color:transparent; background-image:none; position:relative;">

<div >
<div >
<?php if (have_posts()) : while (have_posts()) : the_post();?>
<div>
<h2 style="margin-bottom:-20px; margin-left:47px;" id="post-<?php the_ID(); ?>"><?php the_title();?></h2>
<?php the_content('<p class="serif">Read the rest of this page »</p>'); ?>
</div>
<?php endwhile; endif; ?>
</div>
</div> 
```

# objective-c - 动态 UITextView 字体大小

> ID：15367597
> 
> 赞同：0
> 
> 时间：2013-03-12T17:06:46.263
> 
> 标签：objective-c, uitextview

我要`UITextView`在上面显示一些文本，textView 是在代码中创建的：

```
UITextView *textView = [[UITextView alloc] initWithFrame:labelFrame];
[textView setFont:[UIFont systemFontOfSize:prefObj.Setting_Font_Size]];
textView = NO;
textView = NSTextAlignmentJustified;
textView = [UIColor clearColor];
textView = UIViewAutoresizingFlexibleHeight;
[self addSubview:textView]; 
```

`prefObj.Setting_Font_Size`默认值为16，，，用户可以在设置面板中更改字体，，，一旦用户选择了我想要反映到的新大小，，，`UITextView`我正在使用它来更新字体大小：

```
-(void)updateFontSize
{
    [textView setFont:[UIFont systemFontOfSize:prefObj.Setting_Font_Size]];
} 
```

我确信 的值`prefObj.Setting_Font_Size`将保持新选择的大小，，但文本保持不变，没有任何变化，，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:23:57.440

解决方案很简单，但我忘记了它`UITextView`是在一个`UIView`类中创建的 ,,,

所以我将 UITextView 的实例作为`UIView`类中的属性并更改我创建的字体大小`UIView`：

UIView 子类：

```
@interface TextToShow : UIView

@property (nonatomic, strong) UITextView *textView;

@end 
```

在`UIViewController`：

```
TextToShow *TextToShowView = [[TextToShow alloc] initWithFrame:Frame];

[TextToShowView.textView setFont:[UIFont systemFontOfSize:prefObj.Setting_Font_Size]]; 
```

# java - 从文本文件中拆分单词

> ID：15367598
> 
> 赞同：2
> 
> 时间：2013-03-12T17:06:48.570
> 
> 标签：java, split, delimiter

```
after,before,20 

yes,no,9 
```

所以我在文本文件中有上面的这些词，我想将它们分成不同的部分，这样我就会得到结果：

```
after

before

20 
```

这是我的代码

```
File files = new File("yes.txt");
Scanner in = new Scanner(files).useDelimiter("\\,"); 

String x = in.next(); 
String y = in.next(); 
String z = in.next(); 

System.out.println(x); 
System.out.println(y); 
System.out.println(z); 
```

但出来的结果是：

```
after

before

20

yes 
```

我应该怎么做才能删除“是”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T17:12:49.093

添加一个分隔符，用于 `" \\\n "`过滤换行符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:15:19.770

您需要添加`\n`分隔符，以便它识别换行符。现在它只识别`,`为一个分隔符：

```
Scanner in = new Scanner(files).useDelimiter(Pattern.compile("[,\\n]")); 
```

# c# - WaitHandle.WaitAny 每次调用时都会分配 WaitHandle[] 的副本

> ID：15367599
> 
> 赞同：3
> 
> 时间：2013-03-12T17:06:50.527
> 
> 标签：c#, multithreading, performance, garbage-collection, micro-optimization

我一直注意到对 WaitHandle.WaitAny 的调用分配了给它的 WaitHandle[] 的副本。可以在下面的链接中看到或使用反射器：

[http://reflector.webtropy.com/default.aspx/DotNET/DotNET/8@0/untmp/whidbey/REDBITS/ndp/clr/src/BCL/System/Threading/WaitHandle@cs/3/WaitHandle@cs](http://reflector.webtropy.com/default.aspx/DotNET/DotNET/8@0/untmp/whidbey/REDBITS/ndp/clr/src/BCL/System/Threading/WaitHandle@cs/3/WaitHandle@cs)

相关代码为：

```
 [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
    public static int WaitAny(WaitHandle[] waitHandles, int millisecondsTimeout, bool exitContext)
    {
        if (waitHandles==null)
        {
            throw new ArgumentNullException("waitHandles");
        }
        if (MAX_WAITHANDLES < waitHandles.Length)
        {
            throw new NotSupportedException(Environment.GetResourceString("NotSupported_MaxWaitHandles"));
        }
        if (-1 > millisecondsTimeout)
        {
            throw new ArgumentOutOfRangeException("millisecondsTimeout", Environment.GetResourceString("ArgumentOutOfRange_NeedNonNegOrNegative1"));
        }
        WaitHandle[] internalWaitHandles = new WaitHandle[waitHandles.Length];
        for (int i = 0; i < waitHandles.Length; i ++)
        {
            WaitHandle waitHandle = waitHandles[i];

            if (waitHandle == null)
                throw new ArgumentNullException(Environment.GetResourceString("ArgumentNull_ArrayElement"));

            if (RemotingServices.IsTransparentProxy(waitHandle))
                throw new InvalidOperationException(Environment.GetResourceString("InvalidOperation_WaitOnTransparentProxy"));

            internalWaitHandles[i] = waitHandle;
        }
#if _DEBUG
        // make sure we do not use waitHandles any more.
        waitHandles = null;
#endif
        int ret = WaitMultiple(internalWaitHandles, millisecondsTimeout, exitContext, false /* waitany*/ );
        for (int i = 0; i < internalWaitHandles.Length; i ++)
        {
            GC.KeepAlive (internalWaitHandles[i]);
        }
        if ((WAIT_ABANDONED <= ret) && (WAIT_ABANDONED+internalWaitHandles.Length > ret))
        {
            int mutexIndex = ret -WAIT_ABANDONED;
            if(0 <= mutexIndex && mutexIndex < internalWaitHandles.Length)
            {
                throw new AbandonedMutexException(mutexIndex,internalWaitHandles[mutexIndex]);
            }
            else
            {
                throw new AbandonedMutexException();
            }
        }
        else
            return ret;

    } 
```

现在我的问题是为什么？这可以被规避（即编写自己的 WaitHandle.WaitAny 副本）吗？也许为什么不呢？

这意味着我的系统中有很多不必要的内存分配。由于我们将其与多个 WaitHandles 一起使用的低级方式。

请留在主题上，不要引用任务并行库或类似内容；）我们在这里谈论的是 GC 压力很重要的高性能场景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:18:17.417

`WaitMultiple`需要能够指望`WaitHandle`s 不会被垃圾收集。如果发生这种情况，它可能会因为损坏的内存或一些类似的问题而导致访问冲突。

这个想法是您应该能够调用`WaitMultiple`和销毁一个或多个`WaitHandle`对象而不会`WaitAny`失败。如果它没有创建副本，这将是不可能的，并且调试*该*特定场景将花费您一整天的时间。所以底线是它是为了线程安全而完成的。

如果您查看底层本机函数[WaitForMultipleObjects](http://msdn.microsoft.com/en-ca/library/windows/desktop/ms687025(v=vs.85).aspx)的文档，就会发现这一点：行为被描述为未定义：

> 如果这些句柄之一在等待仍处于挂起状态时关闭，则函数的行为未定义。

如下所述，如果重要的是要尽可能地发挥它的所有性能，则可以确保 WaitHandles 未被释放，并对 WaitForMultipleObjects 进行 ap/invoke 调用。您可以提供`WaitHandle.SafeWaitHandle`相关同步对象的句柄。

**编辑：**上面给出的答案是错误的。我不时回到这个问题，因为它困扰着我；我现在相信我有一个正确的答案。

这种元素传输的目的是对单个`WaitHandle`s 进行线程安全验证。如果开发人员要使用原始数组，则它的一个元素可能会被覆盖，例如，一个`null`值，这将导致底层本机函数中的未定义行为。通过将元素复制到内部数组中，我们可以检查每个元素，如果它是无效的则抛出异常`null`，然后将其存储。我们知道内部数组的元素不能被替换。因此，对于您很久以前的目的，如果您不做奇怪的事情，例如将 null 或跨 AppDomain 元素放入您的 WaitHandle 数组，那么您就可以了。

# php - 两个用户之间的连接

> ID：15367600
> 
> 赞同：9
> 
> 时间：2013-03-12T17:06:58.530
> 
> 标签：php, mysql

我经营自己的网站，人们可以在其中结交朋友。这就是我存储友谊的方式：

```
id1 | id2
 1  |  2
 1  |  3
 2  |  4 
```

基本上用户 id 1 是用户 id 2 和 id 3 的朋友，用户 2 是朋友用户 id 4。

我想要得到的是，例如，1 和 4 是如何连接的。目前是这样的：

```
1 -> 2 -> 4 
```

如果它大约在 4 到 3 之间，它将是：

```
4 -> 2 -> 1 -> 3 
```

我们的想法是在这两者之间找到尽可能快的联系

我能想到的唯一方法是创建一个巨大的大循环，其中包含很多循环和类似的东西，这可能会更好、更高效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T03:23:08.207

RDBMS 不擅长做这样的事情。

你需要的是一个[图形数据库](http://en.wikipedia.org/wiki/Graph_database)，我强烈推荐[Neo4j](http://www.neo4j.org/)，它很流行并且是开源的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:45:30.307

通常使用一种称为双向搜索的算法来找到最短的友谊路径。主要思想是将友谊网络视为无向图，在其中您正在寻找 2 个节点之间的最短路径。该算法同时从两个节点开始搜索，发现已知节点的邻居节点。当已知节点的两个表面第一次重叠时，就会找到一条最短路径。

请注意，需要处理某些特殊情况，例如当其中一个人在图中的“孤岛”中时，这样一个与其他节点没有连接的节点集（想想一个与外面没有关系的社区）世界）

底线是一个不太大的while循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T11:02:57.600

我首先要尝试的是广度优先搜索。

请注意，如果不进行修改，以下代码将无法运行，因为我什至没有检查语法错误。如您所见，query() 函数应返回条目列表。它的目的是给你一个想法。

```
/* Return one of the shortest friendship paths from f1 to f2\. Returns false when
 * path is longer than limit or no path exists. 
 * PROTOTYPE FIX IT YOURSELF
 */
function friend_path($f1, $f2, $limit) {
    $friended = array($f1 => false); // The tree of friendships leading to f1
    $discovered_friends = array($f1); // List of friends to examine next
    while($limit-- > 0) {
        $interesting_friends = $discovered_friends;
        $discovered_friends = array();
        foreach(query("
            SELECT id1 AS friender, id2 AS friendee  
            FROM friendships 
            WHERE id1 in (".join(',', $interesting_friends).")
            ") as $discovered_link
        ) {
            $friendee = $discovered_link['friendee'];
            $friender = $discovered_link['friender'];
            if (!isset($friended[$friendee])) {
                $discovered_friends []= $friendee;
                $friended[$friendee] = $friender;
                if ($friendee == $f2) {
                    return friend_path_track($friended, $friendee, $track);
                }
            }
        }
        if (count($discovered_friends) < 1) return false;
    }
    return false;
}

function friend_path_track($friended, $friendee, $track) {
    $track []= $friendee;
    if ($friended[$friendee]) === false) return array_reverse($track);
    return friend_path_track($friended, $friended[$friendee], $track);
} 
```

为简单起见，此代码进行了优化。对于除了玩具数据库之外的任何东西，您应该进行双向搜索，其中保留两个列表`friended`和`friends`（f2 的好友树）。您将扩展较短的列表，同时在另一个列表中寻找匹配项。但是，您无法欺骗复杂性，因此您必须将迭代限制保持在非常低的水平，除非您喜欢破坏服务器的声音。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T03:13:12.720

最好在两个方向上进行广度优先搜索，即从有问题的两个人开始，当您找到连接或达到指定的深度限制时停止此过程。这个想法也是为了首先接触更受欢迎的人（在执行 BFS 时）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-31T08:49:29.913

这将使用权重为 1 的边。有一个[示例代码](http://basiccodes.kunals.com/php-code-find-2-users-connected-friends-social-network/)可以计算 PHP 社交网络中 2 个朋友之间的连接

# .net - 为什么 Oracle 在 Windows 8 上的 IIS 上发布时不检索数据？

> ID：15367601
> 
> 赞同：0
> 
> 时间：2013-03-12T17:07:03.363
> 
> 标签：.net, oracle, iis, 64-bit, data-access

我正在使用 Oracle 10g R2 10.2.0.1 - 64 位。我将我的 Web 应用程序从 VS2010（在 Win7 32 位上运行）迁移到 VS2012（在 Win8 64 位上运行），当我使用 Visual Studio 2012 调试时，应用程序运行没有任何问题。

当我发布到 IIS（Win 8 - 64 位）时，我的问题就开始了。应用程序运行，但 Oracle 不返回任何数据并且 IIS 不返回任何错误。我试图让 IIS 向浏览器发送错误并显示详细的错误，但我`.aspx`仍然显示页面并且没有显示错误。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:00:02.300

Visual Studio（所有版本）是 32 位进程，您的 IIS 可能作为 64 位进程运行。也许您安装了 32 位版本的 Oracle 客户端，这是一个问题。

尝试强制 IIS 应用程序池为 32 位并重新启动并运行您的应用程序。对此有一个应用程序投票设置。

“启用 32 位应用程序”是设置名称。

# python - 无法为“Minesweeper”正确增加数组元素

> ID：15367602
> 
> 赞同：2
> 
> 时间：2013-03-12T17:07:04.700
> 
> 标签：python

我开始学习 Python，我只是从一个简单的例子开始。问题是计算表中每个位置附近的地雷。考虑下面的输入文件：

```
4 4 
*... 
.... 
.*.. 
.... 
3 5 
**... 
..... 
.*... 
0 0 
```

输出应该像

```
Field #1:
*100
2210
1*10
1110
Field #2:
**100
33200
1*100 
```

我的代码是：

```
#!/usr/bin/python

import pprint

fin = open("1.2.in")
fout = open("1.2.out")

while True:
    i, j = [int(x) for x in fin.readline().split()]
    if(i == 0):
        break
    arr = []
    for k in range(0,i):
        line = fin.readline();
        arr.append(list(line))

    pprint.pprint(arr)
    resarr = [[0]*j]*i

    for row in range(0,i):
        for col in range(0,j):
            for rowIndex in range(-1,2):
                for colIndex in range(-1,2):

#                   print row,rowIndex, col,colIndex
                    if (row + rowIndex < i) and (row + rowIndex >= 0) and ( col + colIndex < j) and (col+colIndex >=0) and (rowIndex != 0 or colIndex != 0):
                        #pprint.pprint(resarr[row][col])
                        #if arr[row+rowIndex][col+colIndex] == "*":

                        #print row,rowIndex, col,colIndex, "              ", arr[row+rowIndex][col+colIndex] 
                        #print resarr[row][col]
                        resarr[row][col] += 1  
                        #pprint.pprint(resarr)
    #                   print col+colIndex
    print i,j
    pprint.pprint(resarr) 
```

我不知道出了什么问题，但是当我想递增时`resarr`，总列会递增。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:11:57.230

你的问题是

```
resarr = [[0]*j]*i 
```

这意味着：`i`引用定义的*相同*列表`[0]*j`并创建这些列表。

你想要的是：

```
resarr = [[0]*j for _ in range(i)] 
```

这将创建一个新列表 ( `[0, 0, ...]`)`i`次。

看到这个：

```
>>> a = [0] * 4
>>> a
[0, 0, 0, 0]
>>> b = [a] * 4
>>> b
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]
>>> id(b[0])     # get the "address" of b[0]
42848200
>>> id(b[1])     # b[1] is the same object!
42848200
>>> b[0][0] = 1
>>> b
[[1, 0, 0, 0], [1, 0, 0, 0], [1, 0, 0, 0], [1, 0, 0, 0]] 
```

# gcc - “long long long”对gcc来说太长了？

> ID：15367603
> 
> 赞同：1
> 
> 时间：2013-03-12T17:07:08.723
> 
> 标签：gcc, spin, promela

![在此处输入图像描述](../Images/a7754f295acb82886622c10dcacdf3d8.png)当我尝试使用 ispin 验证模型时，我收到“long long long is too long for gcc”的错误消息。我的 gcc 有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T14:10:25.713

显然，在您的 Promela 代码中的某处，您指定了“long long long”类型。下面是一个简单的 C 程序如何在这样的声明中出现错误：

```
ebg@ebg$ cat ~/foo.c
#include <stdio.h>

extern int
main (void)
{
  long long long x;

  printf ("%lld", x>>32);
}
ebg@ebg$ gcc -o foo ~/foo.c
/Users/ebg/foo.c: In function 'main':
/Users/ebg/foo.c:6: error: 'long long long' is too long for GCC 
```

您在 *.pml 文件中对“long long long”的错误使用应该很明显；但是，如果在那里找不到它，请查看 pan.c（或 pan.* 文件）。

# asp.net-mvc-4 - 将 JSON 数据返回到 JQGrid 提示保存文件

> ID：15367608
> 
> 赞同：0
> 
> 时间：2013-03-12T17:07:25.173
> 
> 标签：asp.net-mvc-4, jqgrid

我是 ASP.Net MVC 的新手。我正在尝试一个示例程序来将 JQGrid 与数据绑定。当我从 Controller 返回 JSON 数据时，系统提示我弹出“你要保存文件吗..”。我相信我的浏览器无法理解 JSON 数据。我浏览了 StackOverFlow 中的另一篇文章，但它们似乎都没有帮助我。我在设置为兼容模式的 IE8 上运行它。请看下面的代码：

索引.cshtml

```
@{
ViewBag.Title = "Home Page";
  }
  <link href="~/Content/Site.css" rel="stylesheet" type="text/css" />  
   <link href="~/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet"    type="text/css" />  
   <link href="~/Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />

  <script src="~/Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>  
  <script src="~/Scripts/i18n/grid.locale-en.js" type="text/javascript"></script>  
  <script src="~/Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>

  <script type="text/javascript">
  $(document).ready(function () {
    $("#myGrid").jqGrid({
        url: '../../Home/About/GetJQGridData',
        datatype: 'json',
        contentType: 'application/json',
        myType: 'GET',
        colNames: ['Id', 'Name'],
        colModel: [
        { name: 'Id', index: 'Id' },
        { name: 'Name', index: 'Name' }
        ],
        jsonReader: {
            root: 'Data',
            id: 'id',
            repeatitems: false
        },
        pager: $('#myPager'),
        rowNum: 5,
        rowList: [2, 5, 10],
        width: 600,
        viewrecords: true,
        caption: 'Jqgrid MVC Tutorial'
        });
     });
   </script>

    <table id="myGrid"></table>  
     <div id="myPager"></div>` 
```

我的控制器代码如下：

> 家庭控制器.cs

```
 [AcceptVerbs(HttpVerbs.Get)] 
    public ActionResult GetJQGridData()
    {
        var jqGridData = new JQGridObject()
        {
            Data = GetSomeSampleData(),
            Page = "1",
            PageSize = 3, // u can change this !  
            SortColumn = "Name",
            SortOrder = "asc"
        };

        return Json(jqGridData, JsonRequestBehavior.AllowGet);
    }

    public List<Fruit> GetSomeSampleData()
    {
        return new List<Fruit>  
        {  
        new Fruit{Id = 1, Name = "Apple" },  
        new Fruit{Id = 2, Name = "Melon" },  
        new Fruit{Id = 3, Name = "Orange" },  
        new Fruit{Id = 4, Name = "Grapes" },  
        new Fruit{Id = 5, Name = "Pineapple" },  
        new Fruit{Id = 6, Name = "Mango" },  
        new Fruit{Id = 7, Name = "Bannana" },  
        new Fruit{Id = 8, Name = "Cherry" }  
        };
    } 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:19:10.003

让我感到震惊的第一件事是您的控制器/视图被错误地引用

```
url: '../../Home/About/GetJQGridData', 
```

应该

```
url: '/Home/GetJQGridData', 
```

您不需要在客户端上设置 jsonReader 。

# jquery - 无法像我想要的那样专注工作

> ID：15367609
> 
> 赞同：1
> 
> 时间：2013-03-12T17:07:33.490
> 
> 标签：jquery, jquery-selectors, jquery-focusout

我在使用 jquery 选择器时遇到了更多问题...我正在插入用户表单 sith POST ajax，而且我可能同时拥有多个具有相同类的表单。

我已经设法抓住插入这一行的最后一个表格：

```
var NewForm = $(".myform").last(); 
```

它可以正常工作，因为我不能使用：

```
$(NewForm).css()... 
```

设置当前表格显示。现在我正在尝试触发一些“focusout”事件。当我放置以下代码时，focusout 事件有效，但适用于所有“.myform”类。

```
$('.myform input[name="test"]').focusout(function() {
   Alert('This Work');
}); 
```

我只需要最后一个表单来附加焦点事件。我尝试了以下方法：

```
$(NewForm).children('input[name="test"]').focusout() {
   Alert('this is not working');
}); 
```

没有成功，我也替换了“孩子”。

HTML 与此类似：

```
<div id="main">
   <div class="myform">
      <form class="formtype">
          <input name="test">
      </form>
   </div>
</div> 
```

谢谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:12:07.350

你可以使用这个：

```
$('input[name="test"]', NewForm).focusout() {
   Alert('this is not working');
}); 
```

也就是说，使用 context 参数，您只在`NewForm`元素内搜索您的选择器。

# highcharts - Highcharts Bubblechart 最小/最大气泡大小

> ID：15367613
> 
> 赞同：1
> 
> 时间：2013-03-12T17:07:49.507
> 
> 标签：highcharts, bubble-chart

我想在气泡图上显示一些动态数据。目前，当添加或删除点时，highcharts 正在重新计算剩余气泡的大小。有没有办法像 x 和 y 轴一样指定最小值/最大值？

我在源代码中看到了 minSize 和 maxSize 选项，但我认为这些指定像素，而不是数据的最小最大值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:10:21.167

Highcharts 计算气泡的大小如下：

最大气泡半径 = maxSize 最小气泡半径 = minSize

因此，如果您添加一个 z 值低于最小气泡的气泡，则新气泡的半径为 minSize。曾经是最小的泡沫会长大。对于比最大的泡沫更大的新泡沫也是如此。

如果您知道 z 值的可能范围，则可以根据最小 z 值到该范围开始的距离计算 minSize，并根据最大 z 值到该范围结束的距离计算 maxSize。现在，如果您添加一个小于最小气泡的气泡，则调整 minSize。现有的气泡将保持其先前的大小。

# jenkins - 构建通过后运行 shell 脚本

> ID：15367614
> 
> 赞同：2
> 
> 时间：2013-03-12T17:07:52.050
> 
> 标签：jenkins, jenkins-plugins

我有一份工作是在项目构建上运行单元测试，然后通过 ssh 进入登台服务器并从主分支中下拉。现在我正在使用构建后脚本，但无论通过/失败，它都在运行。我正在尝试使用参数化构建插件在构建传递时触发新作业。到目前为止，我已经创建了新作业并设置为在原始配置中触发。

新工作本身就可以正常工作，但原来的工作并没有触发它。从“添加构建后操作”中，我选择了带有构建触发器的“在其他项目上触发参数化构建”：要构建的项目：new_job，构建时触发：稳定或不稳定但未失败。

任何想法表示赞赏！

C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:25:11.097

如果您实际上不需要将参数传递给第二次构建，请确保在参数化构建触发器选项中选中“不带参数的触发器构建”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:33:48.907

“构建后任务”允许您查询构建步骤的控制台日志，并且仅在满足条件时执行。

Jenkins`BUILD SUCCESSFUL`会在控制台日志中记录已通过的每个构建步骤。在“构建后任务”步骤中，在**Log text** just put`BUILD SUCCESSFUL`下，在**Script**下放置您的 linux 脚本/命令。

**这样，只有在构建步骤**成功时才会执行您的脚本/命令

# c# - 在 Linq 组中查找最大和最小日期时间

> ID：15367615
> 
> 赞同：5
> 
> 时间：2013-03-12T17:07:58.333
> 
> 标签：c#, asp.net, linq, entity-framework

我正在尝试`DateTime`从 CSV 导入中找到 max 和 min 。

我有这个从 temp 导入数据`DataTable`：

```
var tsHead = from h in dt.AsEnumerable()
         select new
                    {
                        Index = h.Field<string>("INDEX"),
                        TimeSheetCategory = h.Field<string>("FN"),
                        Date = DdateConvert(h.Field<string>("Date")),
                        EmployeeNo = h.Field<string>("EMPLOYEE"),
                        Factory = h.Field<string>("FACTORY"),
                        StartTime = DdateConvert(h.Field<string>("START_TIME")), //min
                        FinishTime = DdateConvert(h.Field<string>("FINISH_TIME")), //max
                    }; 
```

哪个工作正常。然后我想对数据进行分组并显示开始时间和结束时间，这是各个字段的最小值/最大值。

到目前为止，我有这个：

```
var tsHeadg = from h in tsHead
                      group h by h.Index into g //Pull out the unique indexes
                      let f = g.FirstOrDefault() where f != null
                      select new
                                 {
                                     f.Index,
                                     f.TimeSheetCategory,
                                     f.Date,
                                     f.EmployeeNo,
                                     f.Factory,
                                     g.Min(c => c).StartTime, //Min starttime should be timesheet start time
                                     g.Max(c => c).FinishTime, //Max finishtime should be timesheet finish time
                                 }; 
```

考虑到`g.Min`并且`g.Max`会给我`DateTime`每个时间表的最低和最高（按索引分组）

但是，这不起作用...在组中找到最高和最低 DateTimes 值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T17:10:14.440

尝试使用这个

```
var tsHeadg = 
    (from h in tsHead
     group h by h.Index into g //Pull out the unique indexes
     let f = g.FirstOrDefault() 
     where f != null
     select new
     {
         f.Index,
         f.TimeSheetCategory,
         f.Date,
         f.EmployeeNo,
         f.Factory,
         MinDate = g.Min(c => c.StartTime),
         MaxDate = g.Max(c => c.FinishTime),
     }); 
```

# java - 服务器端 OAuth 登录

> ID：15367616
> 
> 赞同：2
> 
> 时间：2013-03-12T17:07:58.440
> 
> 标签：java, oauth, client-server

我越来越糊涂了。

我必须为移动应用程序编写 Java Serverapplication。我们在该应用程序中拥有自己的用户管理，这意味着用户可以在完全不使用 OAuth-Provider 的情况下在我们的服务器上注册和登录。

现在我希望用户能够通过 OAuth Provider 进行注册。

这些是我看到的选项：

**让用户仅在本地注册。**

优势：

*   移动应用程序可以使用能够为我们的应用程序登录和检索访问令牌的框架
*   一切都是由平台本身预先设置的，所以没有 GUI 工作

坏处：

*   服务器如何知道用户是否登录？解决这个问题的一种方法可能是将访问令牌发送到服务器并让服务器向提供者发起请求以检查令牌是否有效。
*   对于注册，我必须将客户端从提供商那里获得的所有用户信息发送到我们的服务器。

我不喜欢这个选项，因为我会发送 Userdata 和 Accesstoken arround。是的，它当然会通过 https 加密，但感觉不对。

**让用户通过我们的服务器注册**

用户请求 OAuth 提供者本身检索您可以用来请求访问令牌的代码。将此代码发送到服务器并让服务器检索访问令牌。

优势：

*   服务器现在可以确定用户已登录
*   服务器可以从 OAuth 提供者本身检索有关用户的所有用户特定信息（例如用户名等），而无需发送 arround。
*   在登录时，您可以重复此操作，以确保用户正确登录

坏处：

*   我必须编写 OAuth 连接器（或为此使用一些库）
*   我们无法使用 sdk，因为它们只是返回实际的访问令牌。

我们仍然更喜欢第一个选项（仅限本地注册）因为

*   他们想使用 SDK。“因为每个人都这样做。”
*   如果用户第一次启动应用程序并且他已经登录（即使用 FB 客户端），他只需要接受我们为应用程序设置的范围。
*   更容易处理实际登录，导致 sdk 为它制作

有谁知道如何正确地做这样的事情？这两种解决方案对我来说似乎都有点错误。

# c - 使用 pthread 创建 makefile

> ID：15367617
> 
> 赞同：3
> 
> 时间：2013-03-12T17:07:58.937
> 
> 标签：c, makefile, pthreads, posix, semaphore

我想创建一个支持 posix 信号量的 makefile。这就是我到目前为止所得到的：

```
CFLAGS=-g -ansi -pedantic -Wall -Werror -D_XOPEN_SOURCE=600
LDFLAGS=-pthread 
CC=gcc
OBJECTS=MsgQueueMain.o MsgQueue.o Queue.o MyMalloc.o
TARGET=MsgQueueMain

all: $(TARGET)

$(TARGET): $(OBJECTS)
    $(CC) $(OBJECTS) -o $@

include depends

depends:
    $(CC) -MM $(OBJECTS:.o=.c) > depends

clean:
    rm ./$(TARGET) *.o 
```

出于某种原因，我对 semaphore.h api 函数的所有调用都获得了“未定义的引用”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:10:36.180

您需要与`rt`or`pthread`库链接。从[man sem_destroy](http://linux.die.net/man/3/sem_destroy)参考页：

> 使用 -lrt 或 -pthread 链接。

添加到编译器命令的末尾，因为[顺序很重要](https://stackoverflow.com/questions/9966959/linker-errors-when-compiling-against-glib/9966989#9966989)（不确定顺序是否很重要，`-pthread`因为它定义了一些宏并添加了`-lpthread`）。

正如[Vlad Lazarenko所说](https://stackoverflow.com/users/405725/vlad-lazarenko)*，*这`LDFLAGS`不是您的. 改成：*`TARGET`*

 *> $(CC) $(对象) -o $@ $(LDFLAGS)*

# iphone - 如何从 UIDatePicker 获取日期和时间并在该日期到达时通知用户？

> ID：15367618
> 
> 赞同：0
> 
> 时间：2013-03-12T17:08:00.100
> 
> 标签：iphone, xcode, uidatepicker

我需要从 UIDatePicker 获取日期和时间，并在该日期和时间到达时触发本地通知。我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T05:33:17.307

使用此代码

```
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

    // Get the current date
    NSDate *pickerDate = your date from date picker;

    // Break the date up into components
    NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit )
                                                   fromDate:pickerDate];
    NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit )
                                                   fromDate:pickerDate];
    // Set up the fire time
    NSDateComponents *dateComps = [[NSDateComponents alloc] init];
    [dateComps setDay:[dateComponents day]];
    [dateComps setMonth:[dateComponents month]];
    [dateComps setYear:[dateComponents year]];
    [dateComps setHour:[timeComponents hour]];
    [dateComps setMinute:[timeComponents minute]];
    [dateComps setSecond:[timeComponents second]];
    NSDate *itemDate = [calendar dateFromComponents:dateComps];
    [dateComps release];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    if (localNotif == nil)
        return;

    localNotif.fireDate = itemDate;
    localNotif.timeZone = [NSTimeZone defaultTimeZone];
        // Notification details
        localNotif.alertBody = @"Write your text here";
    // Set the action button
    localNotif.alertAction = @"View";

    localNotif.soundName = UILocalNotificationDefaultSoundName;

    // Specify custom data for the notification
    NSStream *str=[NSString stringWithFormat:@"%d",cId];
    NSDictionary *infoDict = [NSDictionary dictionaryWithObject:str forKey:@"NotificationDate"];
    localNotif.userInfo = infoDict;

    // Schedule the notification
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

    NSLog(@"The notifications are:%@",[[UIApplication sharedApplication]scheduledLocalNotifications]);
    NSLog(@"The %@",localNotif.userInfo);

    [localNotif release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:12:39.153

用于`self.datePicker.date`存储目标日期和时间。

然后创建一个 NSTimer，每毫秒轮询一次以检查当前日期是否等于目标日期。当两者相等时，显示警报视图。

# android - 如何使用 TextClock 以 24 小时格式显示时间？

> ID：15367620
> 
> 赞同：12
> 
> 时间：2013-03-12T17:08:04.483
> 
> 标签：android, time, clock

我在尝试以 24 小时格式显示时间时遇到了麻烦。我已经让它显示另一个时区的时间，但我不能让它以 24 小时格式显示。

```
<TextClock
    android:id="@+id/hk_time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:timeZone="GMT+0800"
    android:format24Hour="MMM dd, yyyy k:mm" /> 
```

是否可以使用 TextClock 显示日期？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-20T22:29:41.283

如果您的系统处于 12 小时模式，则不必编写子类来获得所需的内容。[JavaDocs](http://developer.android.com/reference/android/widget/TextClock.html)说：

> *   在 12 小时模式下：
>     *   非空时使用 getFormat12Hour() 返回的值
>     *   否则，非空时使用getFormat24Hour()返回的值
>     *   否则，使用适合用户区域设置的默认值，例如 HH:mm

因此，我希望最后一行能够`getFormat12Hour()`返回`null`，从而使用您的自定义`getFormat24Hour()`格式：

```
<android.widget.TextClock
    android:id="@+id/hk_time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:timeZone="GMT+0800"
    android:format24Hour="MMM dd, yyyy k:mm"
    android:format12Hour="@null" /> 
```

（顺便说一句，正如其他人所提到的，应谨慎使用强制格式。如果您的用户想要 24 小时制，他们会在他们的系统首选项中指定这一点。以及在其上强制数字格式、颠倒日期格式的应用程序用户，例如`MM/dd/yyyy`，邀请一星评级（在这种情况下，来自美国和菲律宾用户除外），所以这是您使用的一件好事`MMM`！不过，您最好还是使用[getBestDateTimePattern()](http://developer.android.com/reference/android/text/format/DateFormat.html#getBestDateTimePattern%28java.util.Locale,%20java.lang.String%29)，其中，我相信，需要继承 TextClock。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-04T09:10:47.513

我的设备使用 12h 格式。为了强制它使用 24 小时格式，我这样写：

```
textClock.setFormat12Hour("kk:mm"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-03T09:44:54.427

而不是在xml中设置时间格式，我建议使用java文件，即

```
mTextClock.setFormat24Hour(format); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-27T10:14:45.783

**对于科特林**

我使用这条线将时间格式设置为 24 小时制，它工作正常。

```
mTextClock.format12Hour = "kk:mm" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T18:30:17.910

它是以 12 小时制还是 24 小时制显示时间取决于系统设置。也许您的 Android 设备或模拟器设置为 12 小时格式。这就是你`android:format24Hour`被忽略的原因。如果您想通过覆盖系统设置（我不推荐）来显示 24 小时格式，请添加`android:format12Hour="MMM dd, yyyy k:mm"`为另一个属性。

但是，始终建议根据系统设置显示时间和日期。如果您的应用程序中有一些其他（例如布局）约束需要单独处理 12 小时或 24 小时模式，您可以通过调用`is12HourModeEnabled()`或`is24HourModeEnabled()`在您的`TextClock`.

对于你的第二个问题，[文档](http://developer.android.com/reference/android/widget/TextClock.html)说

> TextClock 可以将当前日期和/或时间显示为格式化字符串。

这就是它的能力——显示时间*和*日期。如果您的意思是“与当前日期不同的日期”，则必须坚持简单`TextView`并手动格式化日期字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-16T16:37:38.493

*第一个问题：*

我刚刚检查了它，并且在您的设备上设置了：

*   12 小时格式（美国、英国） - TextClock 为 12 小时
*   24 小时制（欧洲） - TextClock 是 24 小时制

如上所述，最好将选择权交给用户，而不是强迫他使用 ex。你最喜欢的格式。

*第二个问题：*

是的。您只需要使用“android:format12Hour”和/或“android:format24Hour”。

```
android:format12Hour="MMM dd, yyyy"
android:format24Hour="MMM dd, yyyy" 
```

**MMM**表示月份名称的 3 个字符

**dd**表示一天 2 个字符

**yyyy**表示一年 4 个字符

# c# - 在委托中存储平台调用的性能优势？

> ID：15367621
> 
> 赞同：2
> 
> 时间：2013-03-12T17:08:06.853
> 
> 标签：c#, interop

OpenTK 通过首先定义一个与某个目标 C 函数具有匹配签名的委托来绑定到 OpenGL：

```
[System.Security.SuppressUnmanagedCodeSecurity()]
internal delegate void Uniform1f(Int32 location, Single v0);
internal static Uniform1f glUniform1f; 
```

`glUniform1f`然后它为从平台特定的 OpenGL`GetProcAddress`函数返回的值分配一个值。

如果我不使用 OpenTK 的方法，而只是使用 DllImport 调用函数，我的代码会执行得更慢吗？（换句话说，使用委托是否有任何性能优势）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:16:16.853

不，如果有的话，性能会*受到影响*（尽管在大多数情况下非常微不足道），因为您使用的是委托。

请记住，委托是对方法的引用。每次调用它时，都必须取消引用该*引用*。将此与编译到您的代码中的方法调用进行比较；当方法引用被烘焙到 IL 中时，运行时确切地知道它必须去哪里。

请注意，自 .NET 3.0 以来，委托性能已*显着提高。*随着 LINQ 的引入，委托将被大量使用，并且由于它们无处不在，它们*必须*很快。

您看到使用委托的一个可能原因是因为需要在运行时确定包含非托管代码的 DLL（可能是因为命名问题、特定于处理器的构建以不同的名称分布在一起等）。

在这种情况下，将调用非托管[`LoadLibrary`Windows API 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)，然后调用非托管[`GetProcAddress`Windows API 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)。

一旦函数 poitner 被检索，它就会被传递给[类](http://msdn.microsoft.com/en-us/library/asx0thw2.aspx)上的[`GetDelegateForFunctionPointer`方法](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getdelegateforfunctionpointer.aspx)以获取委托。[`Marshal`](http://msdn.microsoft.com/en-us/library/asx0thw2.aspx)

# jms - JBoss 7 - 无法解析文件 META-INF/hornetq-jms.xml

> ID：15367623
> 
> 赞同：1
> 
> 时间：2013-03-12T17:08:11.493
> 
> 标签：jms, jboss7.x, hornetq, jms-topic

我需要在部署 Web 应用程序时配置 JMS 主题。我不得不为此使用部署描述符。hornetq-jms.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration xmlns="urn:hornetq" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="urn:hornetq /schemas/hornetq-jms.xsd ">

<connection-factory name="InVmConnectionFactory">
    <connectors>
       <connector-ref connector-name="in-vm"/>
    </connectors>
    <entries>
        <entry name="InVmConnectionFactory"/>
    </entries>
</connection-factory>

<queue name="OrderQueue">
    <entry name="queues/beanQueue"/>
</queue>

</configuration> 
```

但是在部署过程中我遇到了这样的错误：

```
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[2,1]
Message: Unexpected element '{urn:hornetq}configuration' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:43:55.433

正如在[这里](https://community.jboss.org/thread/222475)回答的那样，我使用了 hornetq-jms.xml 的旧语法。这是正确 hornetq-jms.xml 文件的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- JBoss, Home of Professional Open Source Copyright 2012, Red Hat, Inc.
and/or its affiliates, and individual contributors by the @authors tag. See
the copyright.txt in the distribution for a full listing of individual contributors.
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy
of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required
by applicable law or agreed to in writing, software distributed under the
License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
OF ANY KIND, either express or implied. See the License for the specific
language governing permissions and limitations under the License. -->
<messaging-deployment xmlns="urn:jboss:messaging-deployment:1.0">
    <hornetq-server>
        <jms-destinations>
            <jms-queue name="HELLOWORLDMDBQueue">
                <entry name="/queue/HELLOWORLDMDBQueue"/>
            </jms-queue>
            <jms-topic name="HELLOWORLDMDBTopic">
                <entry name="/topic/HELLOWORLDMDBTopic"/>
            </jms-topic>
        </jms-destinations>
    </hornetq-server>
</messaging-deployment> 
```

# php - mysqli 删除

> ID：15367626
> 
> 赞同：1
> 
> 时间：2013-03-12T17:08:17.673
> 
> 标签：php, mysqli

```
<?php

    if (intval($_GET['page']) == 0) {
        redirect_to("staff.php");
    }

    $id = mysqli_prep($_GET['page']);

        $query3 = "DELETE FROM page WHERE id = {$id}, LIMIT 1";
        $result = mysqli_query($connection, $query3);
        if (mysqli_affected_rows($connection) == 1) {
            redirect_to("staff.php");
        } else {
            // Deletion Failed

            echo $id ."<br />" . $query3 . "<br />" . $result . "<p>Subject
           deletion failed.</p>";
            echo "<p>" . mysqli_error() . "</p>";
            echo "<a href=\"staff.php\">Return to Main Page</a>";
        }
      //  Keep on working Edit:2#
      mysqli_query($connection, "DELETE FROM pages WHERE id = 11 ");
     //- Works 
     Edit 3# 
       $id = $_GET['page'];
        echo "<p>" . $id ."</p>";
            $query3 ="DELETE FROM pages WHERE id = {$id} ";
                    mysqli_query($connection,$query3 );
                    // Still Works  -- YaY for working backwards
   // Edit #4 By "now it might be obvious what my error was "pages" not "page"
       // Thanks everyone - And thank you for telling me about the error page
        // My defense - newbie- Anyway Lesson from this - working backwards 
        // Takes a while, Error checking Fast!!!!!!
?> 
```

$connection 已启动并被选中。$id选择成功，$page=$id，但是还是不行。$query 3 看起来不错，但删除失败。我不知道错误是什么。感谢您提前提供任何帮助。-Josh 编辑检查错误检查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:15:52.797

ID后面有一个逗号：

```
$query3 = "DELETE FROM page WHERE id = {$id}, LIMIT 1";
                                            ^ remove this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:46:53.173

> 我不知道错误是什么。

那是因为你没有检查。每次准备或执行查询时，都需要检查错误。`FALSE`如果遇到错误，mysqli 中的大多数函数都会返回。

```
$result = mysqli_query($connection, $query3);
if ($result === false) {
    trigger_error(mysqli_error($connection), E_USER_ERROR);
    header("Location: /error.php");
    exit;
} 
```

未能检查错误案例是数据库程序员最常犯的错误之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:12:37.403

```
 if ($page == get_page_by_id($id)) { 
```

== 比较

=== 比较值和演员表

```
$val = true;
if ($val === true) {
    echo "\$val is bool(true)";
}

if ($val == "true") {
    echo "\$val matches value";
}

if ($val === "true") {
// this will never happen
} else {
echo "\$val doesnt === \"true\"";
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T18:00:43.787

尝试`php_flag display_errors on`在您的 .htaccess 中使用这将允许您查看和识别 php 错误。

# html - 引导侧导航问题

> ID：15367635
> 
> 赞同：0
> 
> 时间：2013-03-12T17:08:39.920
> 
> 标签：html, twitter-bootstrap

我在使用 Twitter Bootstrap 模板时遇到问题。在[http://www.tjprizbiz.com/new/publications.html](http://www.tjprizbiz.com/new/publications.html)，我试图让我的侧边栏导航跳转到每个不同的项目，但由于我的所有项目都包含在 a 中`span9`，所以无论何时我点击侧边导航栏选项它只是进入我的容器 span9 项目列的顶部。我知道我需要修复我`href`的侧边栏导航按钮，但我不知道如何让它在`span9`部分 id 中搜索。有任何想法吗？

PS：我无法粘贴我的代码，但您可以获取页面源@www.tjprizbiz.com/new/publications.html

# asp.net-mvc-4 - 重命名 connectionString 后键 attachdbfilename 的值无效

> ID：15367636
> 
> 赞同：0
> 
> 时间：2013-03-12T17:08:40.807
> 
> 标签：asp.net-mvc-4, entity-framework-5

我正在为 ASP.NET MVC 4 构建示例 MvcMovie 教程。我正在使用 EntityFramework Code First 功能并创建了一个连接字符串，如下所示。

```
<add name="MoveDBContext"
     connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDictionary|\Movies2.mdf;Integrated Security=True"
     providerName="System.Data.SqlClient"
/> 
```

此时一切正常。但后来我意识到我将连接字符串命名为 MoveDBContext 而不是 MovieDBContext，并且作为完美主义者，我将其重命名。这样做之后，我现在在我的 MoviesController/Index 方法中收到一个错误。

```
 public class MoviesController : Controller
{
    private MovieDBContext db = new MovieDBContext();

    public ActionResult Index()
    {
        return View(db.Movies.ToList()); // Error: Invalid value for key 'attachdbfilename'
    }
...
} 
```

如果我将名称改回 MoveDBContext，错误就会消失。

谁能告诉我这个原始名称在哪里被引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:14:04.713

默认情况下，EF 会查找与扩展 DbContext 的类型同名的连接字符串。

或者，最好由[Scott](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)提出：

> 默认情况下，当您使用 EF 代码优先创建 DbContext 类时，它将查找与上下文类名称匹配的连接字符串。由于我们将上下文类命名为“NerdDinners”，默认情况下，当它在我们的 ASP.NET 应用程序中实例化时，它将查找并使用上述“NerdDinners”数据库连接字符串。

**编辑：**

仔细观察后，我认为您的连接字符串是问题所在。你有`DataDictionary`而不是`DataDirectory`. 试试这个（为可读性添加了换行符）：

```
<add name="MovieDBContext" 
     connectionString="Data Source=(LocalDB)\v11.0;
                       AttachDbFilename=|DataDirectory|\Movies.mdf;
                       Integrated Security=True" 
     providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:56:58.560

显然，正如 Ken 所说，MoveDBContext 没有被引用。

我从 web.config 中删除了整个 connectionString，一切仍然正常。

所以，它仍然引出了一个问题，“Visual Studio 是如何知道在我的 SQLExpress 实例中创建数据库的？” 和“在哪里配置？”

# drupal - Drupal 7 自定义字段小部件不保存用户输入

> ID：15367644
> 
> 赞同：0
> 
> 时间：2013-03-12T17:09:16.767
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-forms, drupal-field-api

我正在构建一个自定义字段模块来与我们的流媒体视频提供商合作。作为其中的一部分，我需要从提供商的 API 中获取基于所选类别的视频。该字段将需要存储许多部分 - 选定的类别、选定的视频和一些尚未添加的附加详细信息（例如标题）。

我可以让这个表单出现在节点编辑页面上（在将字段附加到内容类型之后），但它似乎没有保存用户的输入。这是编辑节点屏幕上的表单：[节点编辑屏幕上的字段](http://staticred.net/assets/teacherstv_field.png)。用户的工作流程是他们选择一个类别，该类别填充要选择的视频列表。当他们选择视频时，他们会在 $element['teacherstv']['teacherstv_video_details'] 中看到预览。这一直有效，直到用户保存表单。此时，所选值将丢失。

我查看了 D7 的 Field API 和 Forms API 文档，但看不到任何关于如何设置这种字段小部件并让它保存用户输入的明确说明。

这是 hook_field_widget_form() 的代码

```
function teacherstv_field_widget_form(&$form, &$form_state, $field, $instance, $langcode, $items, $delta, $element) {
//  $value = $isset($items[$delta['teacherstv']) ? $items[$delta]['teacherstv'] : '';
  $widget['#delta'] = $delta;

  //lets get an array of our categories from core
  $coreapi = new coreapi();
  $APIsettings = variable_get('teacherstv_API_settings');
  $coreapi->apiuser = $APIsettings['username'];
  $coreapi->apipwd = $APIsettings['password'];
  $coreapi->apiurl = $APIsettings['api_url'];
  $coreapi->sortcriteria = "alpha";

  //$categoriesavailable = $coreapi->get_categories();
  $categories = coreapi_get_categories();
  $defaults = $field['settings'];
  $settings = $instance['settings'];

  $category = !is_null($form_state['values'][$field['field_name']]['und'][$delta]['teacherstv']['teacherstv_category']) ? $form_state['values'][$field['field_name']]['und'][$delta]['teacherstv']['teacherstv_category'] : $defaults['teacherstv']['defaultcategory'];

  switch ($instance['widget']['type']) {

    case 'teacherstv':

      $element['teacherstv'] = array(
        '#tree' => TRUE,
        '#type' => 'fieldset',
        '#title' => t('TeachersTV Video'),
        '#description' => '<p>' . t('Select a video from the TeachersTV service to embed.') . '</p>',
        '#delta' => $delta,
      );

      $element['teacherstv']['teacherstv_category'] = array(
        '#type' => 'select',
        '#field_parents' => 'teacherstv',
        '#title' => t('Video Categories'),
        '#options' => $categories,
        '#description' => t('Select a video category for a list of videos'),
        '#default_value' => !is_null($settings['teacherstv_category']) ? array($settings['teacherstv_category']) : array($category),
        '#ajax' => array(
          'callback' => 'teacherstv_ajax_videolist',
          'wrapper' => 'teacherstv-videolist-' . $delta . '-div',
          'method' => 'replace',
        ),
        '#delta' => $delta,
      );

  $videos = coreapi_list_videos($category);
  $videos[0] = "--Please select a video--";
  asort($videos);

      $element['teacherstv']['teacherstv_video'] = array(
        '#type' => 'select',
        '#title' => t('Select a video'),
        '#field_parents' => 'teacherstv',
        '#prefix' => '<div id="teacherstv-videolist-' . $delta . '-div">',
        '#suffix' => '</div>',
        '#options' => array(0 => 'Video 1'),
        '#default_value' => 
        isset($form_state['values'][$field['field_name']]['und'][$delta]['teacherstv']['teacherstv_video']) ? $form_state['values'][$field['field_name']]['und'][$delta]['teacherstv']['teacherstv_video'] : NULL,
        '#description' => t('Select a video.'),
        '#options' => $videos,
        '#ajax' => array(
          'callback' => 'teacherstv_ajax_videoselect',
          'wrapper' => 'teacherstv-videodetails-' . $delta . '-div',
        ),
        '#delta' => $delta,
      );

      $video_keys = array_keys($videos);
      $selected_video = isset($form_state['values'][$field['field_name']]['und'][$delta]['teacherstv_category']) ? $form_state['values'][$field['field_name']]['und'][$delta]['teacherstv_category'] : NULL;
      $element['teacherstv']['teacherstv_video_details'] = array(
        '#type' => 'markup',
        '#field_parents' => 'teacherstv',
        '#title' => t('Video details'),
        '#prefix' => '<div id="teacherstv-videodetails-' . $delta . '-div">',
        '#suffix' => '</div>',
        '#description' => t('Details about the video.'),
        '#markup' => teacherstv_ajax_render_video($selected_video),
        '#delta' => $delta,
      );

      break;

  }
  return $element;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:27:45.727

它可能是 AJAX 回调，在您的 AJAX 回调中，使用

```
$form_state['rebuild'] = TRUE; 
```

或将 ajax 值分配给一个新元素以将其放在 $form_state 数组中。使用 devel 和 dpm($form_state)。我敢打赌你的价值是“”

# unit-testing - phpunit 模拟 Web 服务（不是 WSDL）

> ID：15367649
> 
> 赞同：1
> 
> 时间：2013-03-12T17:09:40.743
> 
> 标签：unit-testing, mocking, phpunit, automated-tests, zend-framework2

我有一个小问题，我认为对于有经验的 PHPUnit 用户来说很容易解决。

我正在使用 ZF2。

我正在使用返回纯文本（CSV）的网络服务。我想对我创建的服务进行单元测试。我目前有一个工作配置，我认为这不是正确的方法。我现在在对我的模型进行单元测试时使用模拟，我已经看到 PHPUnit 有一个特殊的网络服务模拟，但只有支持 WSDL。

在下面你会找到我的代码，我希望有人能帮助我解释一下这种情况下的最佳实践。

这里的文档和主题并没有帮助我（还）。

提前致谢！

测试本身：

```
public function testCanSearchSteeringWheels()
{
    // Create the entry and fill it with the data that should be retrieved from the web service
    $steeringWheelEntity = new SteeringWheelEntity();
    $steeringWheelEntity->setId('170633')
                        ->setName('Nice steering wheel one')
                        ->setGrossPrice(100)
                        ->setNetPrice(75);    

    // Setup the http client which whill make the final call to the web service
    $httpClient = new Client();
    $httpClient->setOptions(array(
        'maxredirects' => 5,
        'timeout'      => 60,
    ))
    ->setAuth($this->config['supplier_name']['api']['username'], $this->config['supplier_name']['api']['password'])
    ;

    $steeringWheelService = new SteeringWheelService($httpClient, new Request(), $this->config['supplier_name']);

    // Search for a steering wheel by id code
    $searchResult = $steeringWheelService->search('ID=5221552658987');

    $this->assertEquals($steeringWheelEntity, $searchResult[0]);
} 
```

SteeringWheelEntity

```
namespace SupplierName\Entity;

class SteeringWheelEntity
{
    // vars
    // exchange array method
    // getters methods
    // setters methods
} 
```

SteeringWheel 服务

```
namespace SupplierName\Service;

use SupplierName\Entity\SteeringWheelEntity;

class SteeringWheelService extends AbstractWebService
{           
    /**
     * search()
     * 
     * @param string $param
     * @return array
     */
    public function search($param)
    {
        $this->appendUrl('ww0800?3,' . $param);

        $response   = $this->dispatch();                
        $parsedBody = $this->parse($response->getBody());
        $entities   = array();

        foreach ($parsedBody as $data)
        {
            $steeringWheel = new SteeringWheelEntity();
            // Fill SteeringWheelEntity with data
            $entities[] = $steeringWheel;
        }

        return $entities;
    }
} 
```

抽象网络服务

```
use \Zend\Http\Client;
use \Zend\Http\Request;

class AbstractWebService
{
    private $httpClient;
    private $request;
    private $response;

    protected $config;

    private $url;

    public function __construct(Client $httpClient, Request $request, Array $config)
    {  
        $this->url        = $config['api']['url'];        
        $this->httpClient = $httpClient;        
        $this->request    = $request;        
        $this->config     = $config;
    }

    protected function setUrl($url)
    {
        $this->url = $url;

        return $this->url;
    }

    protected function appendUrl($string)
    {
        $this->url .= $string;
    }

    protected function getUrl()
    {
        return $this->url;
    }

    public function dispatch()
    {
        $this->request->setUri($this->getUrl());

        $this->response = $this->httpClient->dispatch($this->request);

        if (!$this->response->isSuccess()) {
            throw new \Exception('HTTP error #' . $this->response->getStatusCode() . ' when connecting to ' . $this->getUrl() . '.');
        }

        return $this->response;
    }

    public function parse()
    {
        // Parse the content
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T22:23:03.807

而不是对 Web 服务使用模拟。你能在它们为你工作的时候模拟`\Zend\Http\Request`和对象吗？`\Zend\Http\Client`这样，您就可以控制 Zend 对象返回给您的内容，而不必尝试模拟 Web 服务。

这就是我测试服务的方式。

# javascript - 如何禁用 Javascript 表单中的字段

> ID：15367650
> 
> 赞同：0
> 
> 时间：2013-03-12T17:09:42.560
> 
> 标签：javascript, jquery, html

在 Javascript 表单中禁用（灰显）字段的最佳方法是什么？我`disabled="disabled"`在表单及其字段上都尝试过，但都不起作用，例如：

```
<form:form id="testForm" method="post" disabled="disabled" action="${pageContext.request.contextPath}/testSave" commandName="testForm">
    <tr>
        <td valign="top" disabled="disabled">Name:&nbsp;</td>
        <td valign="top"><form:input disabled="disabled" path="fName"/></td>
    </tr>
</form:form> 
```

关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:16:52.853

使用 JQuery，您可以执行以下操作来禁用给定表单的所有表单字段：

```
$('#formId').find('input,select,textarea[,other elements]').prop('disabled', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:18:38.987

嗯，这有点取决于你想要做什么。

禁用表单字段的“肯定触发”方式是输入上的“禁用”和“只读”的组合。在两者之间，您可以涵盖您可能想要的所有内容：

*   使输入变灰
*   使输入不可编辑
*   使输入不可聚焦
*   防止输入与表单一起发送

由于某些浏览器不支持禁用的“灰色”部分，因此最好的解决方法是设置自定义 CSS 以按照您希望它们显示的方式显示禁用（或只读）字段。

要为您想要对表单执行的操作获得正确的解决方案，请在此处查找两个属性之间的差异：http: [//kreotekdev.wordpress.com/2007/11/08/disabled-vs-readonly-form-fields /](http://kreotekdev.wordpress.com/2007/11/08/disabled-vs-readonly-form-fields/)

**编辑：**此外，如果数据不与 form 一起发送，您可能会考虑用文本替换禁用的输入。. . 比拥有一个他们无法使用的输入字段更容易让用户感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:20:49.877

听起来您可以使用参考站点来复习 HTML。我发现 W3School 是一个很好的起点，它有各种在线技术的教程和参考资料。

专门用于[HTML](http://www.w3schools.com/tags/default.asp)和[HTML 输入标签](http://www.w3schools.com/tags/tag_input.asp)

另外，它怎么不起作用？（它没有变灰，或者用户仍然可以输入它，...？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:21:50.017

请参阅下面的 js 示例；我希望我的看法与您的愿望相符：

[http://jsbin.com/avopuf/3/](http://jsbin.com/avopuf/3/)

根据您的要求更改css。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T17:14:43.073

您可以禁用`input`标签，但不能`td`

[td 标签属性](http://www.w3schools.com/tags/tag_td.asp#Attributes)

# ruby - 正则表达式仅匹配空格

> ID：15367657
> 
> 赞同：4
> 
> 时间：2013-03-12T17:09:52.880
> 
> 标签：ruby, regex, whitespace

如何编写仅匹配空格的正则表达式？

我有一个 Ruby 应用程序，它允许我根据正则表达式匹配我的电子邮件主题和正文。我无权访问代码。

我正在尝试对空的电子邮件正文采取行动。如果电子邮件正文包含所有换行符和空格字符，则正则表达式应该匹配。如果只有一个字母数字字符，它将不匹配。正则表达式应允许在电子邮件正文的开头和开头有空格。

以下电子邮件正文将不匹配。我已经突出显示它以显示换行符。

![电子邮件正文的 Imgur 图像](../Images/980216f8c352c6fef2755d5f876ef09a.png)

将匹配以下电子邮件正文。

![电子邮件正文的 Imgur 图像](../Images/bddfab675da164ddbf49e775552342b0.png)

我已经尝试过使用 Rubular 的各种方法

我能得到的最好的是`^\s*$`，但这匹配换行符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:24:35.150

目前尚不清楚您的意思，但这是一个匹配仅包含空格的字符串的正则表达式：

```
/\A\s*\z/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:34:36.877

我会说sawa有你想要的，但否定它更简单：

```
str !~ /\S/ # true if str contains no non-whitespace chars
str !~ /\w/ # true if str contains no alphanumeric chars (plus _) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:39:40.063

没有正则表达式：

```
p "  \n  \t".strip.empty? #=> true 
```

# android - 在启动时启动应用程序的最佳方式？

> ID：15367660
> 
> 赞同：0
> 
> 时间：2013-03-12T17:10:05.563
> 
> 标签：android, android-service, startup

我需要在启动时启动我的应用程序。我在启动时启动服务的地方找到了[这个答案。](https://stackoverflow.com/a/6392009/1584654)我还发现[了这个线程](http://www.anddev.org/viewtopic.php?t=428)，他们在其中使用 an`intent-filter`以便`android.content.Intent.BOOT_COMPLETED_ACTION`在启动时接收广播。

如果我不需要启动服务，获取设备启动事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:16:29.297

`android.intent.action.BOOT_COMPLETED`使用添加权限注册接收器`"android.permission.RECEIVE_BOOT_COMPLETED"`

在 onRecieve 函数中开始你的午餐活动

```
public void onReceive(Context context, Intent intent) {
            Intent i = new Intent(context, First.class);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i);
        } 
```

# google-chrome - 在 Chrome OS 上构建良好 Web 开发环境的工具

> ID：15367667
> 
> 赞同：4
> 
> 时间：2013-03-12T17:10:19.847
> 
> 标签：google-chrome, web-applications, google-chrome-os

对于 Chrome OS 上的高效前端 Web 开发工作流程，您会推荐哪些 Web 应用程序/工具？

我目前在我的 Windows PC 上使用带有[LiveReload的](http://livereload.com/)[Sublime Text 2 。](http://www.sublimetext.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:43:40.150

你今天有很多选择。这里仅仅是少数：

*   **Cloud9**，一个适用于 JavaScript、Python、PHP 和 Ruby 的 IDE。Cloud9 使用 HTML5 文件系统功能和 AppCache 来同步文件，因此您甚至可以离线编码。
*   **Neutron Drive**似乎是一个不错的选择，它与 Google 驱动器紧密集成并支持多种语言。
*   **ShiftEdit** - 它为您提供了许多使用您的语言进行开发的选项：PHP、Ruby、HTML、CSS 和 JavaScript，然后通过使用 (S)FTP，您可以将您的工作保存到 Dropbox 或 Google Drive。
*   **Kodingen**是另一个 IDE，包括：代码编辑器、云托管、数据库管理和协作
*   **Codey** - 易于使用的 HTML、PHP、CSS、JS 代码编辑器。
*   **Akshell** - 服务器端 JavaScript 开发和托管平台。他们在 IDE 中内置了一些 git 集成。
*   **eXo Cloud IDE** - 一个支持：HTML/CSS/JS 和 PHP/JAVA/RUBY 以及更多选项的 IDE。

更多信息，这里是我在第一台 Chromebook 推出时写的关于这个主题的“[旧”帖子。](http://greenido.wordpress.com/2011/07/04/web-developers-and-the-new-chromebook/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T11:38:24.850

**goormIDE** - 一个基于 node.js 的开源 IDE，用于 JavaScript、Python、PHP、JSP、C/C++、JAVA、Ruby、Go、Dart 等。它现在通过 github.com 和 goorm.io 上的 beta-service 提供开源 beta 版本。如果你想要这个，只需为你的本地机器输入“npm install goorm -g”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T18:52:53.073

*   **CodeAnyWhere**是带有集成 ftp 客户端的浏览器中的代码编辑器，支持所有流行的 Web 格式（HTML、PHP、JavaScript、CSS 和 XML）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-22T22:35:48.867

如果您喜欢 Sublime Text，请查看[Caret 。](https://chrome.google.com/webstore/detail/caret/fljalecfjciodhpcledpamjachpmelml)这是一个打包的应用程序，无需连接。

# android - android listview 滑动删除，就像在 gmail 应用程序中一样

> ID：15367671
> 
> 赞同：9
> 
> 时间：2013-03-12T17:10:35.260
> 
> 标签：android, listview, android-viewpager, swipe-gesture

当项目上的滑动效果删除它时，显示以在 gmail APP 中实现 ListView？我尝试使用 ViewPager 作为 ListView 元素，但这不起作用。

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-12T17:13:32.533

~~[Android 开发团队的 Roman Nurik 创建了一个可以实现的 SwipeToDismiss 侦听器，它在此处](https://code.google.com/p/dashclock/source/browse/main/src/main/java/com/google/android/apps/dashclock/ui/SwipeDismissListViewTouchListener.java)~~开源。

* * *

 **现在可以在此位置使用**编辑项目 -** [https://github.com/romannurik/android-swipetodismiss](https://github.com/romannurik/android-swipetodismiss)**

# javascript - 在提交之前从输入字段生成纬度/经度

> ID：15367673
> 
> 赞同：0
> 
> 时间：2013-03-12T17:10:36.433
> 
> 标签：javascript, jquery, html

我正在尝试将输入到字段`street address`、`city`、`state`、`zipcode`中的值，然后使用这些值填充`longitude`和的隐藏字段`latitude`。

我正在尝试做的一个例子可以在[这里](http://tristandunn.com/projects/jquery-auto-geocoder/)看到，我只是想用多个输入字段来做。

inside`{...}`用于`value=" "`CMS 表达式引擎，因此可以忽略

表单域：

```
<div class="formsection clearfix">
    <label for="trainer_address">Street Address</label>
    <span class="directions">This will NOT be displayed in your listing. Only for search Purposes.</span>
    <input type="text" name="trainer_address" id="trainer_address" value="{trainer_address}">
</div>

<div class="formsection clearfix">
    <label for="trainer_city">City</label>
    <span class="directions">The city to be displayed in your listing.</span>
    <input type="text" name="trainer_city" id="trainer_city" value="{trainer_city}">
</div>

<div class="formsection clearfix">
    <label for="trainer_state">State</label>
    <span class="directions">The state to be displayed in your listing.</span>
    <select name="trainer_state">
        {options:trainer_state}
            <option value="{option_value}"{selected}>{option_name}</option>
        {/options:trainer_state}
    </select>
</div>

<div class="formsection clearfix">
    <label for="trainer_zip">Zip Code</label>
    <span class="directions">The zip code to be displayed in your listing.</span>
    <input type="text" name="trainer_zip" id="trainer_zip" value="{trainer_zip}">
</div> 
```

以下是隐藏的纬度和经度字段：

```
<input type="hidden" id="trainer_longitude" name="trainer_longitude" value="{trainer_longitude}" />
<input type="hidden" id="trainer_latitude" name="trainer_latitude" value="{trainer_latitude}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:24:32.273

您可以为此使用谷歌地理编码器。只需在所有地址字段上绑定 onchange，当您拥有完整地址时，您可以执行类似的操作来获取 longlat。顺便说一句，地址格式非常宽容谷歌地图接受的任何值，在这里也是可以接受的。

// 参考 [https://developers.google.com/maps/documentation/javascript/reference#LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)

// 包含脚本 src="https://maps.googleapis.com/maps/api/js?sensor=false">

```
// the method to get the geocode
var geocoder = new google.maps.Geocoder();

function getLatLng (address, callback){
    geocoder.geocode({ 'address': address}, function(results, status){
        if (status == google.maps.GeocoderStatus.OK) {
            callback(results[0].geometry.location)
        }
        else {
            callback(false);
        }
    });
}

// how to use it
getLatLng ("1600 Pennsylvania Ave NW, Washington, DC, United States", function(result){

    if (result == false){ alert("ADDRESS IS NO GOOD"); }
    else {
        alert("Lng: " + result.lng() + " Lat: " +result.lat());
    }    
}); 
```

# regex - Bash：单线以与 grep 命令相反的状态退出？

> ID：15367674
> 
> 赞同：44
> 
> 时间：2013-03-12T17:10:41.507
> 
> 标签：regex, bash, grep, exit, exit-code

如何减少以下 bash 脚本？

```
grep -P "STATUS: (?!Perfect)" recess.txt && exit 1
exit 0 
```

看起来我应该可以用一个命令来完成，但我这里总共有 3 个。

我的程序应该：

*   阅读recess.txt
*   退出 1（或非零），如果它包含“状态：”的行不是“完美”
*   如果不存在这样的行，则退出 0（即所有“STATUS:”行都是“Perfect”）

答案奖授予最紧凑的剧本。谢谢！

# 示例文件

此文件的程序应具有**退出状态 0**：

```
FILE: styles.css 
STATUS: Perfect!

FILE: contour-styles.css
STATUS: Perfect! 
```

此文件的程序应具有**退出状态 1**（或非零）：

```
FILE: styles.css 
STATUS: Perfect!

FILE: contour-styles.css
STATUS: Busted 
FAILURES: 1 failure

Id's should not be styled
       1\. #asdf 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-02-14T20:08:37.130

只需[否定](http://bash.cyberciti.biz/guide/Logical_Not_!)返回值。

```
! grep -P "STATUS: (?!Perfect)" recess.txt 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-05-28T00:27:02.190

我遇到了这个，需要`onlyif`Puppet 的声明。因此，[Tgr 的 bash 解决方案](https://stackoverflow.com/a/21788642/306323)不起作用，我不想像[Christopher Neylan 的回答](https://stackoverflow.com/a/15368094/306323)那样扩展复杂性。

我最终使用了一个受[Henri Schomäcker 答案](https://stackoverflow.com/a/27290245/306323)启发的版本，但明显简化了：

```
grep -P "STATUS: (?!Perfect)" recess.txt; test $? -eq 1 
```

这非常简单地反转退出代码，仅在未找到文本时才返回成功：

*   如果 grep 返回 0（找到匹配项），`test 0 -eq 1`将返回 1。
*   如果 grep 返回 1（未找到匹配项），`test 1 -eq 1`将返回 0。
*   如果 grep 返回 2（错误），`test 2 -eq 1`将返回 1。

这正是我想要的：如果没有找到匹配项，则返回 0，否则返回 1。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-21T21:26:46.737

要使其与`set -e`在子外壳中使用`(`and一起使用`)`：

```
$ cat test.sh 
#!/bin/bash

set -ex
(! ls /tmp/dne)
echo Success
$ ./test.sh 
+ ls /tmp/dne
ls: cannot access /tmp/dne: No such file or directory
+ echo Success
Success
$ mkdir /tmp/dne
$ ./test.sh 
+ ls /tmp/dne
$ 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-02-02T23:50:37.853

如果有人来这里寻找 bash 返回码操作：

```
(grep <search> <files> || exit 0 && exit 123;) 
```

这将`0`在 grep 什么也没找到时返回（成功），并在找到时返回`123`（失败）。括号是为了防止有人在 shell 提示符下测试它。带括号它不会在退出时注销，而只是以相同的错误代码退出子shell。

我用它来快速检查 js 文件的语法：

```
find src/js/ -name \*js -exec node \{\} \; 2>&1 | grep -B 5 SyntaxError || exit 0 && exit 1; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-12T17:31:26.320

你实际上根本不需要使用`exit`。从逻辑上讲，无论 grep 的结果如何，您的脚本都会退出。由于 shell 脚本的退出值是运行的最后一个命令的退出代码，因此只需`grep`作为最后一个命令运行，使用`-v`选项反转匹配以更正退出值。因此，您的脚本可以简化为：

```
grep -vqP "STATUS: (?!Perfect)" recess.txt 
```

**编辑：**

对不起，当文件中有其他类型的行时，上述方法不起作用。不过，为了避免运行多个命令，`awk`可以通过以下方式完成整个 shebang：

```
awk '/STATUS: / && ! /Perfect/{exit 1}' recess.txt 
```

如果您决定想要 grep 提供的输出，您可以执行以下操作：

```
awk '/^STATUS: / && ! /Perfect/{print;ec=1} END{exit ec}' recess.txt 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-06-29T23:20:58.520

仅否定返回值在 set -e 上下文中不起作用。但你可以这样做：

```
! grep -P "STATUS: (?!Perfect)" recess.txt || false 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-12T17:12:33.357

使用[特殊`?`变量](http://www.gnu.org/software/bash/manual/bashref.html#Special-Parameters)：

```
grep -P "STATUS: (?!Perfect)" recess.txt
exit $((1-$?)) 
```

（但请注意，它`grep`也可能返回 2，因此不清楚在这种情况下您希望发生什么。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-12T10:02:26.167

grep 答案的问题在于，如果文件为空，您也会得到一个干净的响应，就好像文件有一个完美的一样。所以我个人为此放弃了 grep 并使用了 awk。

```
awk 'BEGIN{ef=2}; /STATUS: Perfect/{ ef=0;}; /STATUS: Busted/{ print;eff=3;}; END{exit (ef+eff)}' a.txt ; echo $?

This has exit status:
 0 :  Perfect and !Busted
 2 : !Perfect and  Busted
 3 :  Perfect and  Busted
 5 : !Perfect and !Busted 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-01T16:37:52.923

```
[ $(grep -c -P "STATUS: (?!Perfect)" recess.txt) -eq 0 ] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-04T09:20:17.423

我还需要这样的解决方案来编写 puppet only if 语句并提出以下命令：

`/bin/grep --quiet 'root: root@ourmasterdomain.de' /etc/aliases; if [ $? -eq 0 ]; then test 1 -eq 2; else test 1 -eq 1; fi;`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-23T22:06:57.213

由于有人已经发布了 Puppet 解决方案，我不妨添加如何反转 Ansible 运行的 shell 命令：

```
 - name: Check logs for errors
    command: grep ERROR /var/log/cassandra/system.log
    register: log_errors
    failed_when: "log_errors.rc == 0" 
```

即，您只是将失败条件设置为返回代码为 0。因此，如果我们在日志中找到单词 ERROR，此命令将*失败*。

我选择了这个而不是`grep -v`因为它也会反转 grep 的输出，所以我们会收到`log_errors.stdout_lines`我们不想要的所有 DEBUG/INFO/WARN 行。

# factory - 工厂模式：将参数传递给具体类

> ID：15367675
> 
> 赞同：2
> 
> 时间：2013-03-12T17:10:45.650
> 
> 标签：factory

我有两个类使用一种方法 StoreData(data) 编码到单个接口 IStore - 一个类将数据发送到写入数据库的 Web 服务，另一个将数据直接写入数据库。（工厂模式）

```
public IStore GetStorageClass(StorageType type)
{
    if (type == StorageType.WebService)
        return new WebService();
    else 
        return new DatabaseStore();
} 
```

现在，DatabaseStore 类需要一个连接字符串才能工作。问题是，谁负责向 DatabaseStore 提供连接字符串？如何提供？我想到了：

1.  工厂只知道要传递给 DatabaseStore 的连接字符串

2.  DatabaseStore 构造函数从最终用户提供的配置中读取它。

3.  GetStorageClass 的调用者虽然不知道确切的实现，但传递参数和值的字典，其中参数是连接字符串（调用者知道使用数据库需要连接字符串）

我应该选择哪个选项，我是否在这里正确使用了工厂模式？感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:22:00.010

责任在于包含 GetStorageClass 的类。它要么是使用提供给其构造函数的连接字符串值构造的，要么具有从另一个源读取值的私有方法。

除了 StorageType 之外，还传入一个键值存储太模糊了，API 的使用者只想获取 IStore 的一个实例，而不是对其进行配置。

如果您需要为特定的 IStore 实现进行配置，您可能希望为该实现实现构建器模式并将构建器注入工厂。

# php - 托管环境之间的 HTTP 重定向行为不一致

> ID：15367678
> 
> 赞同：1
> 
> 时间：2013-03-12T17:10:54.393
> 
> 标签：php, http, cakephp, redirect, http-headers

[这是我几天前提出的](https://stackoverflow.com/questions/15257265/cakephp-2-x-sessions-behaving-inconsistently-between-local-dev-and-production/15347510)问题的后续问题，并最终设法解决了自己。虽然我很高兴找到潜在的问题，但问题仅表现在一个（三个）环境中的事实似乎真的很奇怪。

该问题与在控制器 ( `$this->redirect(...);`) 中重定向的 CakePHP 2.3.0 站点上的操作有关。

基本上，重定向在我的本地（Mac OS X/10.6.8、Apache/2.2.17、PHP/5.3.4）开发机器以及我同事的（Windows 7、Apache/2.4.2、PHP/5.4）上运行良好。 3）。“添加”操作将记录插入数据库，然后重定向到“索引”操作。用户登录工作正常。没有问题，一切看起来都是正确的。

但是，在我们的登台服务器（Debian GNU/Linux 6.0.6 kernel 3.2.6、Apache/2.2.22、PHP/5.3.15）上，任何尝试重定向的控制器操作都会导致 HTTP 200 空白页面（而不是预期的HTTP 302 重定向）。

该页面并不是真正的空白，我最终发现在我的一个控制器的开始 PHP 标记之前错误地添加了一个换行符。据我了解，换行符本质上触发了标题输出的结束，因此`Location: ...`无法写入标题。

一旦发现错误的换行符，它就是一个快速修复，但我想知道为什么我在我的 Mac 或我同事的 Windows 机器上没有看到相同的空白页行为。我不确定这是否是 PHP 或 Apache 版本之间的怪癖，或者真的是什么。我会对任何人关于事物为何如此行事的理论感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:33:26.923

根据此堆栈溢出问题的答案：“[如何修复 PHP 中的“标头已发送”错误](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)”：

> **但它在另一台服务器上工作！？**
> 
> 如果您之前没有收到标题警告，则 php.ini 设置已更改。然后在另一台服务器上启用了输出缓冲，但在当前服务器上未启用。请参阅上一节。

# php - php - 区分嵌套数组

> ID：15367679
> 
> 赞同：1
> 
> 时间：2013-03-12T17:10:54.620
> 
> 标签：php, multidimensional-array, diff

我有 2 个多维数组：

```
$first_array = array(
  0 => array(tid => 141), 
  1 => array(tid => 142), 
  2 => array(tid => 128)
);

$second_array = array(
  0 => array(tid => 141), 
  1 => array(tid => 128)
); 
```

我需要检查第二个数组中是否存在第一个数组中的任何项目。如果有，我需要从第一个数组中删除它们。

以上面的例子为例，`$first_array`最终应该是`array(0 => array(tid => 142))`

有什么建议么？

编辑：这是我使用的：

```
$first_array = array(
  0 => array('tid' => 141), 
  1 => array('tid' => 142), 
  2 => array('tid' => 128)
);

$second_array = array(
  0 => array('tid' => 141), 
  1 => array('tid' => 128)
);

function my_serialize(&$arr,$pos){ 
  $arr = serialize($arr); 
} 

function my_unserialize(&$arr,$pos){ 
  $arr = unserialize($arr); 
} 

 //make a copy 
$first_array_s = $first_array; 
$second_array_s = $second_array; 

// serialize all sub-arrays 
array_walk($first_array_s,'my_serialize'); 
array_walk($second_array_s,'my_serialize'); 

// array_diff the serialized versions 
$diff = array_diff($first_array_s,$second_array_s); 

// unserialize the result 
array_walk($diff,'my_unserialize'); 

print_r($diff); 
```

# algorithm - 曼哈顿距离最近的两个点

> ID：15367681
> 
> 赞同：1
> 
> 时间：2013-03-12T17:11:00.703
> 
> 标签：algorithm

我想知道曼哈顿距离。它非常具体，而且（我不知道这是否是一个好词）简单。例如，当我们在这个度量中给出一组**n**个点时，很容易在线性时间内找到两个最远点之间的距离。但是找到两个最近的点也容易吗？

我听说，存在用于在任何度量中找到两个最近点的通用算法，但这很复杂。我想知道在这种情况下（曼哈顿度量）是否可以使用这个距离的特殊属性并提出一个更简单的算法，在实现中会更友好？

编辑：平面上的**n个点，并且所有点都可以说****-10^9 <= x,y <= 10^9**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:31:53.727

假设您正在谈论平面上的点，请在坐标中找到和`n`坐标的最小值和最大值。创建一个大小为x的矩阵，以便所有点都可以由矩阵中的一个单元格表示。用给定的点填充矩阵（例如，并非所有单元格都将被填充，设置在那里）。扫描矩阵 - 矩阵中相邻填充单元之间的最短距离（可能有几个这样的对）。`x``y``maxX-minX``maxY-minY``n``NaN`

# sql - SQL批量插入选择

> ID：15367683
> 
> 赞同：0
> 
> 时间：2013-03-12T17:11:09.923
> 
> 标签：sql, sql-server-2008, tsql

这是情况

我在 SQL 中有一个 SP，它适用于两个`Table type variables`分别用于执行批量插入的 SP，现在它们当然`Mails & attachments`在 SQL 中都有关系，SP 看起来像这样`one to many``MailId`

```
MailInsertSP
  @Mails mailsTableVar
  @Attachements attachementsTableVar

-- this query will insert mails & generate MailIds
insert into Mails
( mails table column list... )
select
value list
from @Mails

-- this query will insert attachments
insert into Attachments
(MailId, other columns...)
select
(select MailId from Mails where MailDate = TBL.MailDate) as MailId,
other values
from @Attachements as TBL 
```

到现在为止`MailDate`是`unique`用于邮件，所以这段代码工作正常，但现在我遇到了`MailDate`两行相同的情况，我没有任何其他列可以用作唯一键，所以我需要一些解决方案我可以插入邮件并获取生成的 ID，这些 ID 可用于下一次插入附件。

如果解决方案没有以下内容，那将是可观的

1.  任何类型的循环。

2.  光标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:37:46.587

我假设 MailDate 在@Mails 中是唯一的

```
insert into Attachments
(MailId, other columns...)
select
(select MailId from @Mails where MailDate = TBL.MailDate) as MailId,
other values
from @Attachements as TBL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:50:11.450

我假设您在@mails 和@attachments 之间有一对多的关系，例如第 X 列。如果是这样，您可以使用 [merge...on 1=0....]/[output...] 来合并@邮件到您的邮件表并输出mailID，并将@mail中的列X放入临时表，然后将@attachment插入表附件，加入具有maileid和X的临时表。

# c# - 跨多个表映射 EF 1 到 0..1 关系的选项

> ID：15367684
> 
> 赞同：1
> 
> 时间：2013-03-12T17:11:14.900
> 
> 标签：c#, entity-framework

我正在尝试通过 EF poco 对以下关系进行建模：

```
Class TableA
{
  [Key]
  public int TableAId {get;set;}

  public Attribute Attribute {get;set;}
}

Class TableB
{
  [Key]
  public int TableBId {get;set;}

  public Attribute Attribute {get;set;}
}

Class Attribute
{
  [Key]
  public int AttributeId {get;set;}

  public string Name{get; set}
} 
```

其中 TableA 和 TableB 都引用了 Attribute。

为此，我插入了以下流畅的映射：

```
 new EntityTypeConfiguration<TableA>().HasRequired(x => x.Attribute);
 new EntityTypeConfiguration<TableB>().HasRequired(x => x.Attribute); 
```

一切都很好，我可以使用这种方法添加元素：

```
 var a = new TableA();
 var attrA = new Attribute { Name = "Table A Attribute"};
 a.Attribute = attrA;

 MyDbContext.TableAs.Add(a);
 MyDbContext.SaveChanges(); 
```

直到我想同时删除 TableA（或 B）和引用的属性。

```
 MyDBContex.TableAs.Remove(a);
 MyDBContex.Attributes.Remove(a.Attribute); 
```

这会导致抱怨 FK 的异常。

我必须使用哪些选项来映射和配置此类关系？

我需要插入和删除 TableA 和 TableB 对象并级联删除它们相关的 Attribute 条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:04:31.123

如果要在一对一关系中级联删除，则必须显式配置它，默认情况下不启用：

```
new EntityTypeConfiguration<TableA>()
    .HasRequired(x => x.Attribute)
    .WithOptional()
    .WillCascadeOnDelete(true); 
```

（对于 . 也是一样的`TableB`。）

与 EF 的一对一关系始终是共享的主键关联，这意味着外键同时也是主键。结果是启用级联删除删除主体`a.Attribute`...

```
MyDBContex.Attributes.Remove(a.Attribute); 
```

...还将删除与and`TableB`具有相同主键值的相关记录（如果有的话）。在不违反外键约束的情况下，您无法避免这种情况。`a``a.Attribute`

# javascript - 如何使用任何 API 在 google plus 中获得 +1 计数

> ID：15367687
> 
> 赞同：7
> 
> 时间：2013-03-12T17:11:33.273
> 
> 标签：javascript, google-api, google-plus, google-plus-one

我已经尝试了很多东西，但我无法获得合适的 API，它将返回我在 google plus 中的 +1 计数。

我已经尝试过使用：-

[使用 Jquery 和 AJAX 计算 Twitter 链接、Facebook 喜欢和 Google +1](https://stackoverflow.com/questions/8929177/getting-counts-for-twitter-links-facebook-likes-and-google-1-with-jquery-and-a)

[使用 jQuery 获取 Google+ 订阅数](https://stackoverflow.com/questions/13424640/getting-google-subscription-count-with-jquery)

[如何获得 google plus +1 按钮的计数器？](https://stackoverflow.com/questions/7403553/how-do-i-get-the-counter-of-a-google-plus-1-button)

但他们都没有给我答案。

有什么想法吗....

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-17T17:34:19.897

我刚刚发现了一个非常有用的网站来解决我们的问题。:) 感谢他！ [http://99webtools.com/script-to-get-shared-count.php](http://99webtools.com/script-to-get-shared-count.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T19:48:20.020

[您可以使用您和 jgillich 提到的链接](https://stackoverflow.com/questions/7403553/how-do-i-get-the-counter-of-a-google-plus-1-button/7409062#7409062)编写自己的函数。这将使用 jQuery 稍微简化。

这是我作为示例制作的[jsfiddle 。](http://jsfiddle.net/uxxW4/)如果您想规避域间问题，您可能必须使用 PHP 之类的东西从站点获取。它可能看起来像这样（忽略域）：

```
$('#myInput').keyup(function () {
    var url = 'https://plusone.google.com/_/+1/fastbutton?url=' + encodeURIComponent($(this).val());
    $.get(url,
        function (data) {
            var aggregate = $('#aggregateCount', data).html(),
                exactMatch = $('script', data).html().match('\\s*c\\s*:\\s*(\\d+)');

            $('div').html(exactMatch ? exactMatch[1] + ' (' + aggregate + ')' : aggregate);
        }
    );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-30T12:26:24.287

这对我有用：

```
var _url = 'http://mylink.com/';   
$.getJSON('http://anyorigin.com/get?callback=?&url=' + encodeURIComponent('https://plusone.google.com/_/+1/fastbutton?url=' + _url)).done(function(data,status,xhr){
    console.log($(data.contents).find('#aggregateCount').html());
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T18:11:36.440

目前，API 不提供任何方法来检索 +1 计数。一种解决方法是直接从 +1 按钮中获取它，如此处所述[（](https://stackoverflow.com/a/7409062/941764)您已经链接到它，但我认为没有其他方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T21:40:28.183

查看以下获取 Google+ 计数的另一种方法。

[http://share.yandex.ru/gpp.xml?url=http://google.com](http://share.yandex.ru/gpp.xml?url=http://google.com)

# python - Python IDLE 的默认工作目录？

> ID：15367688
> 
> 赞同：11
> 
> 时间：2013-03-12T17:11:35.633
> 
> 标签：python, python-idle

是否有可以设置其默认工作目录的配置文件？它目前默认为我的主目录，但我想在它启动时将其设置为另一个目录。我知道我可以执行“import os”，然后执行“os.chdir(”")”，但这有点麻烦。如果有一个 conf 文件可以编辑和更改该设置，那就太好了，但我找不到它。

特别是，我查看了我的操作系统（Ubuntu）的桌面条目'/usr/share/applications/idle-python3.2.desktop'，它不包含conf文件，但指向'/usr/ lib/python3.2/idlelib/PyShell.py'，它指向同一文件夹下的 config-*.def conf 文件，其中 'config-main.def' 是最有可能的候选者。但是，我无法找到指定默认路径的位置或如何更改它。

似乎路径在 PyShell.py 中是硬编码的，尽管我对 Python 的有限知识可能是错误的。我会继续寻找，但如果有人知道他或她头脑中的答案，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-11T01:51:59.943

如果您使用标有“IDLE (Python GUI)”的快捷方式链接，我实际上刚刚发现了最简单的答案。这是在 Windows Vista 中，所以我不知道它是否可以在其他操作系统中工作。

1) 右键单击​​“属性”。

2) 选择“快捷方式”选项卡。

3) 在“Start In”中，写入文件路径（例如“C:\Users...”）。

这也是我在这里的答案：[Python IDLE 的默认保存路径？](https://stackoverflow.com/questions/1424398/default-save-path-for-python-idle/)让我知道这个是否奏效！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T17:27:33.923

在查看 PyShell.py 后，我找到了解决方案：

1.  在首选目录下创建一个 python 文件，在我的例子中是'~/.idlerc/init.py'，然后复制/粘贴以下行：

> ```
>  import os
>   os.chdir('<your preferred directory>') 
> ```

1.  将“-r '~/.idlerc/init.py' ”参数传递给 IDLE 启动命令，如下所示（您的执行位置和名称可能因操作系统等而异）：

> ```
>  /usr/bin/idle-python3.2 -n -r ~/.idlerc/init.py 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T18:56:55.303

只需使用 shell 脚本，例如：

```
#!/bin/bash
cd /Users/pu/Projects/L-Python
/usr/bin/idle 
```

并运行它而不是闲置库存。该示例在 OS X 上，适应您的系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-10T19:33:42.397

我必须在这里做的一切（Linux Mint 18.2 Xfce）......

![](../Images/c5aa4f0f3f077b8fffed1e6ff9683cec.png)

只需在行中添加路径`"working directory" = "Arbeitsverzeichnis"`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-01T11:10:44.797

我是 python 新手，从 mark Pilgrim 的“Dive into Python”中学习（可以在网上免费找到）答案在第 2.4 章——希望他不介意我把它贴在这里，因为它也插入了他的书并且在GPL

> 在您进一步讨论之前，我想简要提一下库搜索路径。当您尝试导入模块时，Python 会在多个地方查找。具体来说，它会查看 sys.path 中定义的所有目录。这只是一个列表，您可以使用标准列表方法轻松查看或修改它。（您将在本章后面了解有关列表的更多信息。）

例 2.4。导入搜索路径

```
import sys  
sys.path    
sys.path.append('/my/new/path') 
```

这是一本好书，我是一名程序员 - 通常我发现从书本中学习会让我很快入睡 - 这里不是这种情况......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T17:14:07.367

它可以根据您安装 Python 的位置而改变。打开 IDLE, `import os`，然后调用`os.getcwd()`它应该会告诉您 IDLE 正在处理的确切位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-16T06:31:27.013

`idlelib.IOBinding.IOBinding.dirname`在或中指定了一个默认路径`idlelib.IOBinding.IOBinding.filename`

**Ubuntu**

所以我在 /usr/share/applications 中的[idle-python3.desktop 文件看起来像这样：](https://github.com/CoderDojoPotsdam/software/blob/master/linux-update/idle-python3.desktop)

```
[Desktop Entry]
Name=IDLE (using Python-3)
Comment=Integrated Development Environment for Python (using Python-3)
Exec=python3 -c "import idlelib.IOBinding, os; idlelib.IOBinding.IOBinding.dirname='/DEFAULT/DIRECTORY';import idlelib.idle"
Icon=/usr/share/pixmaps/python3.xpm
Terminal=false
Type=Application
Categories=Application;Development;
StartupNotify=true 
```

要使用它，您需要将 /DEFAULT/DIRECTORY 设置为您想要的目录，使用 root 权限将其复制到 /usr/share/applications。您也可以将它用于 Python 2，但是您需要将 3s 替换为 2s。

**ConfigFiles**
还有可以加载的扩展。这些必须是模块，您可以通过模块名称指定它们。IDLE 的配置文件位于 HOME/.idlerc 并使用 .idler 解析`configparser`。我没有进一步了解这一点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-02T14:45:27.787

如果您通过双击将 Idle 作为应用程序启动，这是一种重置 MacOS 的 IDLE 默认工作目录的方法。如果从终端中的命令行启动 Idle，则需要不同的解决方案。此解决方案是永久修复。您不必每次启动 IDLE 时都重新更改目录。我希望它更容易。

这个想法是在应用程序中编辑 IDLE 包内的资源文件。

1.  从查找文件开始。在 Finder 中，转到 Applications 中的 IDLE（在 Python 文件夹中），就像您想打开它一样。右键单击并选择“显示包内容”。打开内容，然后打开资源。在参考资料中，您将看到一个名为 idlemain.py 的文件。此文件在您启动空闲时执行，并设置工作目录等。我们将对其进行编辑。

2.  但在您可以编辑它之前，您需要给自己写权限。为此，请右键单击 idlemain.py 并选择获取信息。滚动到 getinfo 窗口的底部，您将看到“共享和权限”部分。右下角有一个锁图标。单击锁并按照提示将其解锁。解锁后，向左看 + （在具有权限的用户列表下）。点击它。这将打开一个窗口，其中包含您可以添加的用户列表。选择您自己（可能是您的计算机名称或您的用户帐户），然后单击选择。您会看到自己已添加到具有权限的名称列表中。单击您姓名旁边的“只读”并将其更改为“读写”。注意不要改变其他任何东西。当你完成后，

3.  现在回到 idlemain.py 并用任何文本编辑器打开它（你可以使用 Idle、TextEdit 或任何东西。在顶部的 import 语句下方是更改默认工作目录的代码。如果你喜欢，请阅读评论，然后将注释下的单行代码替换为

    os.chdir('你想要的工作目录的路径')

我的看起来像这样：

os.chdir('/Users/MyName/Documents/Python')

4.  保存您的更改（这应该可以工作，因为您给了自己许可）。下次启动 Idle 时，您应该位于所需的工作目录中。您可以使用以下命令进行检查：

    导入操作系统
    os.getcwd()

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-01-22T21:50:52.000

这应该是第一答案。我已经玩了一个小时或更长时间，但没有任何效果。保罗完美地解释了这一点。这就像 Windows 中的 PATH 语句。我通过在 Idle 中使用简单的 import xxxx 命令在我的 Mac 上附加我的个人“PythonModules”路径/目录（从“/users/etc”开始）成功导入了一个模块。

# c# - 如何在使用池时测量 SqlConnection 上的登录时间？

> ID：15367689
> 
> 赞同：2
> 
> 时间：2013-03-12T17:11:36.593
> 
> 标签：c#, sql-server, sqlconnection, sqlclient

我想捕获一些关于使用 SqlConnection 的应用程序的统计数据，特别是它在***物理上***登录服务器所花费的时间。

简单的方法是这样的：

```
using (SqlConnection connection = ...)
{
    Stopwatch loginTimer = Stopwatch.StartNew();
    connection.Open()
    loginTimer.Stop();
} 
```

扭曲的是我也在使用连接池并且不想将其关闭。结果，我的指标出现偏差，因为大多数调用`.Open()`实际上只是从池中获取现有的、打开的物理连接，所以我会看到：

```
00:00:01.39
00:00:00.02
00:00:00.02
00:00:00.02
... 
```

该应用程序使用了足够多的连接并以 SqlAzure 为目标，因此我确实希望看到物理登录经常发生。

在尝试之前，我尝试过测试连接：

```
if (sqlConnection.State != ConnectionState.Open)
{
    // Time and call .Open()
} 
```

不幸的是，逻辑 SqlConnection 并不能反映物理连接的状态，所以`if`块总是被执行。

我知道可以创建自己的连接池，我可以从中提取和执行，但永远不会关闭，因此我可以通过逻辑连接的状态跟踪物理连接的实际状态，但我会真的不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:54:20.953

可能您可以使用 ClientConnectionId 属性来跟踪 sql 连接。每次创建新的物理连接时都会重新生成它，并在连接从池中返回时保留。但它只能从 .net 4.5 开始使用。

另一种可能性是只为一些连接跳过连接池，只是为了测量物理时间，为其他连接保留池。

例如，您可以拥有静态计数器，它将不断增加。对于每个可被 10 整除的值，您可以将 Pooling='false' 添加到连接字符串中，以跳过将其添加到池中。这将打开新的连接，您可以测量物理时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:07:20.770

用一些具体的代码扩展亚历山大的答案。

在对所有连接使用池的限制内，可以通过跟踪每次物理登录生成的值来测量***物理***登录到服务器/数据库所花费的时间。以下是这次测量和报告的示例扩展方法。要使用它，请更改对to的调用，如果发生登录，结果将为 true，否则为 false。`SqlConnection.ClientConnectionId``SqlClient``SqlConnection.Open()``SqlConnection.Login(out openTime)`

```
internal static class SqlConnectionExtension
{
    private static readonly PropertyInfo _clientConnectionIdPropertyInfo = typeof(SqlConnection).GetProperty("ClientConnectionId");
    private static readonly HashSet<Guid> _clientConnectionIds = new HashSet<Guid>();

    /// <summary>
    /// Method that calls <see cref="SqlConnection.Open()"/>, measuring the time it takes.
    /// </summary>
    /// <param name="sqlConnection">The <see cref="SqlConnection"/> to open.</param>
    /// <param name="openTime">The total time that the call to <see cref="SqlConnection.Open()"/> took.</param>
    /// <returns>True if a login took place; false if a connection was returned from a connection pool.</returns>
    public static bool Login(this SqlConnection sqlConnection, out TimeSpan openTime)
    {
        Stopwatch loginTimer = Stopwatch.StartNew();
        sqlConnection.Open();
        loginTimer.Stop();

        openTime = loginTimer.Elapsed;

    #if NET_4_0_3
        Guid clientConnectionId = sqlConnection.ClientConnectionId;
    #else
        Guid clientConnectionId = Guid.Empty;
        if (_clientConnectionIdPropertyInfo != null)
        {
            clientConnectionId = (Guid)_clientConnectionIdPropertyInfo.GetValue(sqlConnection, null);
        }
    #endif
        if (clientConnectionId != Guid.Empty && !_clientConnectionIds.Contains(clientConnectionId))
        {
            lock (_clientConnectionIds)
            {
                if (_clientConnectionIds.Add(clientConnectionId))
                {
                    return true;
                }
            }
        }
        return false;
    }
} 
```

在我自己的环境中，我们仍在使用 VS2010，并非所有客户端都有 4.0.3 多目标包，因此该`#if NET_4_0_3`部分。

# vb.net - 如何在 VB.NET 中为泛型参数指定自定义属性？

> ID：15367690
> 
> 赞同：2
> 
> 时间：2013-03-12T17:11:37.990
> 
> 标签：vb.net

教科书问题，但我已经完成了谷歌搜索，但我找不到任何东西。

给定一个名为 的自定义属性`SomeAttribute`，您如何在 VB.NET 中执行以下操作？

```
void SomeMethod<[Some] T>()
{
} 
```

我试过这个：

```
Sub SomeMethod(<Some> Of T)()
End Sub 
```

和

```
Sub SomeMethod(Of <Some> T)()
End Sub 
```

但两者都无法编译，错误指向`<Some>`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:57:16.640

考虑到这里的沉默，并且因为我真的需要一个答案，我深入研究了[VB.NET Language Specification](http://www.microsoft.com/en-us/download/details.aspx?id=15039)。

它从未明确说明是否支持此功能，但它确实有一些正式的语法定义表明 VB.NET 不支持此功能。

具体来说，第 9.2.1 节为方法声明定义了以下产生式：

```
SubSignature  ::=  Sub  Identifier  [  TypeParameterList  ]
    [  OpenParenthesis  [  ParameterList  ]  CloseParenthesis  ] 
```

在 9.2.5 中，参数定义如下：

```
ParameterList  ::=
    Parameter  |
    ParameterList  Comma  Parameter

Parameter  ::=
    [  Attributes  ]  [  ParameterModifier+  ]  ParameterIdentifier  [  As  TypeName  ]
            [  Equals  ConstantExpression  ] 
```

第 13.3 节定义`TypeParameterList`：

```
TypeParameterList  ::=
    OpenParenthesis  Of  TypeParameters  CloseParenthesis

TypeParameters  ::=
    TypeParameter  |
    TypeParameters  Comma  TypeParameter

TypeParameter  ::=
    [  VarianceModifier  ]  Identifier  [  TypeParameterConstraints  ]

VarianceModifier  ::=
    In  |  Out

TypeParameterConstraints  ::=
    As  Constraint  |
    As  OpenCurlyBrace  ConstraintList  CloseCurlyBrace

ConstraintList  ::=
    ConstraintList  Comma  Constraint  |
    Constraint

Constraint  ::=  TypeName  |  New  |  Structure  |  Class 
```

属性出现在参数列表中（对于函数，在返回类型中），但 TypeParameterList 完全没有与属性相关的任何内容。

因此，我将继续声称 VB.NET 10（随 VS2012 提供）不支持泛型类型参数的属性。

# mysql - 将 JSON 存储在数据库中与每个键都有一个新列

> ID：15367696
> 
> 赞同：269
> 
> 时间：2013-03-12T17:11:49.250
> 
> 标签：mysql, sql, sql-server, database, optimization

我正在实现以下模型来在我的表中存储用户相关数据 - 我有 2 列 - `uid`（主键）和一个`meta`以 JSON 格式存储有关用户的其他数据的列。

```
 uid   | meta
--------------------------------------------------
 1     | {name:['foo'], 
       |  emailid:['foo@bar.com','bar@foo.com']}
--------------------------------------------------
 2     | {name:['sann'], 
       |  emailid:['sann@bar.com','sann@foo.com']}
-------------------------------------------------- 
```

这是比每个属性一列模型更好的方法（性能方面，设计方面`uid`）`name`吗`emailid`？

我喜欢第一个模型的地方是，您可以添加尽可能多的字段，没有限制。

另外，我想知道，现在我已经实现了第一个模型。如何对其执行查询，例如，我想获取所有名称为“foo”的用户？

**问题**- 使用 JSON 或每字段列在数据库中存储用户相关数据（请记住字段数不固定）的更好方法是什么？另外，如果实现了第一个模型，如何如上所述查询数据库？我是否应该使用这两种模型，通过将查询可能搜索到的所有数据存储在单独的行中并将其他数据存储在 JSON 中（是不同的行）？

* * *

## 更新

由于我需要执行搜索的列不会太多，因此使用这两种模型是否明智？我需要搜索的数据的每列键和其他人的 JSON（在同一个 MySQL 数据库中）？

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2013-03-12T17:15:17.710

## 2017 年 6 月 4 日更新

鉴于这个问题/答案已经获得了一些人气，我认为值得更新。

最初发布此问题时，MySQL 不支持 JSON 数据类型，而 PostgreSQL 中的支持还处于起步阶段。从 5.7 开始，MySQL[现在支持 JSON 数据类型](https://dev.mysql.com/doc/refman/5.7/en/json.html)（二进制存储格式），而 PostgreSQL [JSONB](https://www.postgresql.org/docs/9.4/static/datatype-json.html)已经显着成熟。这两种产品都提供了可以存储任意文档的高性能 JSON 类型，包括支持索引 JSON 对象的特定键。

但是，我仍然坚持我最初的说法，即在使用关系数据库时，您的默认首选项仍应为 column-per-value。关系数据库仍然建立在假设它们中的数据将被很好地标准化的假设之上。查询计划器在查看列时比查看 JSON 文档中的键时具有更好的优化信息。可以在列之间创建外键（但不能在 JSON 文档中的键之间）。重要的是：如果您的架构的大部分是易变的，足以证明使用 JSON 是合理的，那么您可能至少要考虑关系数据库是否是正确的选择。

也就是说，很少有应用程序是完全关系型或面向文档的。大多数应用程序都有两者的混合。以下是我个人发现 JSON 在关系数据库中有用的一些示例：

*   存储联系人的电子邮件地址和电话号码时，将它们作为值存储在 JSON 数组中比多个单独的表更易于管理

*   保存任意键/值用户首选项（其中值可以是布尔值、文本或数字，并且您不希望为不同的数据类型设置单独的列）

*   存储没有定义模式的配置数据（如果您正在构建 Zapier 或 IFTTT 并且需要为每个集成存储配置数据）

我敢肯定还有其他的，但这些只是几个简单的例子。

## 原始答案

如果您真的希望能够不受限制地添加任意数量的字段（除了任意文档大小限制），请考虑使用 NoSQL 解决方案，例如 MongoDB。

对于关系数据库：每个值使用一列。将 JSON blob 放在列中几乎不可能进行查询（当您真正找到有效的查询时会非常缓慢）。

关系数据库在索引时利用数据类型，并且旨在使用*规范化*结构实现。

附带说明：这并不是说您永远不应该将 JSON 存储在关系数据库中。如果您要添加真正的元数据，或者如果您的 JSON 描述的信息*不需要查询*并且仅用于显示，那么为所有数据点创建单独的列可能会过大。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2016-02-10T16:08:10.253

像大多数事情一样“这取决于”。将数据存储在列或 JSON 中本身没有对错/好坏之分。这取决于您以后需要做什么。您预计访问这些数据的方式是什么？您是否需要交叉引用其他数据？

其他人已经很好地回答了技术权衡是什么。

没有多少人讨论过您的应用程序和功能会随着时间的推移而发展，以及此数据存储决策如何影响您的团队。

因为使用 JSON 的诱惑之一是避免迁移模式，所以如果团队没有纪律，很容易将另一个键/值对粘贴到 JSON 字段中。它没有迁移，没有人记得它的用途。没有验证。

我的团队在 postgres 的传统列旁边使用 JSON，起初它是自切片面包以来最好的东西。JSON 具有吸引力且功能强大，直到有一天我们意识到灵活性是有代价的，它突然成为一个真正的痛点。有时，这一点会迅速上升，然后变得很难改变，因为我们在这个设计决策之上构建了很多其他东西。

随着时间的推移，添加新功能、使用 JSON 格式的数据会导致看起来比我们坚持使用传统列时可能添加的查询更复杂。因此，我们开始将某些键值重新放入列中，以便我们可以进行连接并在值之间进行比较。馊主意。现在我们有了重复。一个新的开发人员会加入并感到困惑？我应该存回哪个值？JSON 之一还是列？

JSON 字段变成了这个和那个的小部分的垃圾抽屉。没有数据库级别的数据验证，文档之间没有一致性或完整性。这将所有责任推到了应用程序中，而不是从传统列中进行硬类型和约束检查。

回想起来，JSON 让我们能够非常快速地迭代并得到一些东西。太好了。然而，当我们达到一定的团队规模后，它的灵活性也让我们背上了一长串的技术债务，从而减缓了后续的功能发展进程。谨慎使用。

仔细思考数据的性质是什么。它是您的应用程序的基础。随着时间的推移，这些数据将如何被使用。它会如何改变？

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-03-12T17:49:05.937

只是把它扔在那里，但 WordPress 有这种东西的结构（至少 WordPress 是我观察到它的第一个地方，它可能起源于其他地方）。

它允许无限键，并且比使用 JSON blob 搜索更快，但不如某些 NoSQL 解决方案快。

```
uid   |   meta_key    |   meta_val
----------------------------------
1         name            Frank
1         age             12
2         name            Jeremiah
3         fav_food        pizza
................. 
```

**编辑**

用于存储历史/多个键

```
uid   | meta_id    |   meta_key    |   meta_val
----------------------------------------------------
1        1             name            Frank
1        2             name            John
1        3             age             12
2        4             name            Jeremiah
3        5             fav_food        pizza
................. 
```

并通过以下方式查询：

```
select meta_val from `table` where meta_key = 'name' and uid = 1 order by meta_id desc 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-03-12T17:14:36.520

该方法的缺点正是您提到的：

它使查找内容变得非常缓慢，因为每次您都需要对其执行文本搜索。

每列的值而是匹配整个字符串。

您的方法（基于 JSON 的数据）适用于您不需要搜索的数据，只需要与您的普通数据一起显示。

**编辑：**澄清一下，以上内容适用于经典的关系数据库。NoSQL 在内部使用 JSON，如果这是所需的行为，它可能是一个更好的选择。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-03-12T17:26:07.167

基本上，您使用的第一个模型称为基于文档的存储。您应该看看流行**的基于 NoSQL 文档的数据库，例如 MongoDB 和 CouchDB**。基本上，在基于文档的数据库中，您将数据存储在 json 文件中，然后您可以查询这些 json 文件。

第二种模型是流行的关系数据库结构。

如果你想使用像 MySql 这样的关系数据库，那么我建议你只使用第二个模型。**在第一个模型中使用 MySql 和存储数据是没有意义的**。

要回答您的第二个问题，**如果您使用第一个模型，则无法查询像 'foo' 这样的名称**。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-12T17:30:15.930

看来您主要是在犹豫是否使用关系模型。

就目前而言，您的示例将非常适合关系模型，但是当您需要使该模型发展时，问题当然可能会出现。

如果您的主要实体（用户）只有一个（或几个预先确定的）级别的属性，您仍然可以在关系数据库中使用实体属性值 (EAV) 模型。（这也有其优点和缺点。）

如果您预计您将获得较少的结构化值，而您希望使用您的应用程序进行搜索，那么 MySQL 可能不是这里的最佳选择。

如果您使用的是 PostgreSQL，您可能会获得两全其美的效果。（这*真的*取决于这里数据的实际结构...... MySQL 也不一定是错误的选择，NoSQL 选项可能很有趣，我只是建议替代方案。）

事实上，PostgreSQL 可以在（不可变的）函数上构建索引（据我所知 MySQL 不能），并且在最近的版本中，您可以[直接在 JSON 数据上使用 PLV8](http://people.planetpostgresql.org/andrew/index.php?/archives/249-Using-PLV8-to-index-JSON.html)来为感兴趣的特定 JSON 元素构建索引，这将改进搜索该数据时查询的速度。

**编辑：**

> 由于我需要执行搜索的列不会太多，因此使用这两种模型是否明智？我需要搜索的数据的每列键和其他人的 JSON（在同一个 MySQL 数据库中）？

混合这两种模型不一定是错误的（假设额外的空间可以忽略不计），但如果您不确保两个数据集保持同步，它可能会导致问题：您的应用程序绝不能更改一个而不更新另一个.

实现此目的的一个好方法是让触发器执行自动更新，方法是在进行更新或插入时在数据库服务器中运行存储过程。据我所知，MySQL 存储过程语言可能缺乏对任何类型的 JSON 处理的支持。再次，支持 PLV8 的 PostgreSQL（以及可能具有更灵活存储过程语言的其他 RDBMS）应该更有用（使用触发器自动更新关系列与以相同方式更新索引非常相似）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-16T05:34:51.407

有时，表上的连接将是开销。让我们说OLAP。如果我有两张表，一张是 ORDERS 表，另一张是 ORDER_DETAILS。为了获得所有订单详细信息，我们必须连接两个表，当表中的行数没有增加时，查询会变慢，比如说数百万左右。左/右连接比内连接慢。我认为如果我们在相应的 ORDERS 条目中添加 JSON 字符串/对象，将避免加入。添加报告生成会更快...

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-18T22:54:35.293

简短的回答你必须在它们之间混合，使用 json 来处理你不会与它们建立关系的数据，比如联系数据、地址、产品变量

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-12T17:21:20.950

您正在尝试将非关系模型拟合到关系数据库中，我认为使用 NoSQL 数据库（例如[MongoDB](http://en.wikipedia.org/wiki/MongoDB) ）会更好。没有预定义的模式可以满足您对字段数量没有限制的要求（请参阅典型的 MongoDB 集合示例）。查看 MongoDB[文档](http://docs.mongodb.org/manual/applications/read/)以了解如何查询文档，例如

```
db.mycollection.find(
    {
      name: 'sann'
    }
) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-04T16:52:08.417

正如其他人指出的那样，查询会更慢。我建议至少添加一个“_ID”列来查询。

# regex - Perl 正则表达式为零或一个匹配

> ID：15367700
> 
> 赞同：2
> 
> 时间：2013-03-12T17:11:56.453
> 
> 标签：regex, perl

下面是两个字符串-

```
12/31/2011 05:34:27;U;11.comp;host=win workgroup=home username=bob cmemory=1325133456 qmemory=1325133456 smemory=1325133456 uptime=1325289867 
12/31/2011 01:09:20;D;12.comp;host=win workgroup=home username=sam cmemory=1325151687 qmemory=1325151687 smemory=1325151687 uptime=1325228636  session=4677 downtime=1325270175 Exit_status=0 
```

从上面的字符串中，我想在 Perl 中使用 Regex选择`host`、`workgroup`、和值。`username``uptime``downtime`

下面是我的 Perl 脚本-

```
foreach $line (<FILE>) {
    if($line =~ m<\d{2}/\d{2}/\d{4}\s+\d{2}:\d{2}:\d{2};[U|D].*host=(\w+)\s+workgroup=(\w+)\s+hostname=(\w+)\s+.*uptime=(\d+)\s+.*(downtime=)?(\d*)>){
        my $host      = $1;
        my $workgroup = $2;
        my $hostname  = $3;
        my $uptime    = $4;
        my $downtime  = $5;
        print "host=$host workgroup=$workgroup hostname=$hostname uptime=$uptime downtime=$downtime\n";
    }
} 
```

我在这里面临的唯一问题是因为`downtime`. 该属性可能不存在于该行中。我无法正确选择该字段。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T17:20:24.790

为什么不`split`改用？然后您可以将各种类别添加到哈希中，如下所示：

```
use strict;
use warnings;
use Data::Dumper;

while (<DATA>) {
    my ($date, $foo, $bar, $data) = split /;/, $_, 4;
    my %data = map { split /=/ } split ' ', $data;
    print Dumper \%data;
}

__DATA__
12/31/2011 05:34:27;U;11.comp;host=win workgroup=home username=bob cmemory=1325133456 qmemory=1325133456 smemory=1325133456 uptime=1325289867 
12/31/2011 01:09:20;D;12.comp;host=win workgroup=home username=sam cmemory=1325151687 qmemory=1325151687 smemory=1325151687 uptime=1325228636  session=4677 downtime=1325270175 Exit_status=0 
```

**输出：**

```
$VAR1 = {
          'workgroup' => 'home',
          'cmemory' => '1325133456',
          'qmemory' => '1325133456',
          'uptime' => '1325289867',
          'smemory' => '1325133456',
          'username' => 'bob',
          'host' => 'win'
        };
$VAR1 = {
          'qmemory' => '1325151687',
          'Exit_status' => '0',
          'smemory' => '1325151687',
          'username' => 'sam',
          'host' => 'win',
          'workgroup' => 'home',
          'cmemory' => '1325151687',
          'session' => '4677',
          'downtime' => '1325270175',
          'uptime' => '1325228636'
        }; 
```

如果您现在想引用“停机时间”值，您可以执行以下操作：

```
my $downtime = $hash{downtime} // "N/A"; 
```

定义的或运算符在哪里`//`，在这里比逻辑或更受欢迎`||`。

# c# - Azure 服务总线广播到所有辅助角色实例

> ID：15367701
> 
> 赞同：3
> 
> 时间：2013-03-12T17:11:56.543
> 
> 标签：c#, azure, azureservicebus

我正在尝试使用 Azure 服务总线将消息从 Web 角色广播到单个辅助角色的所有实例。这是我用来接收消息的代码：

```
// Create the topic if it does not exist already
            string connectionString = CloudConfigurationManager.GetSetting("Microsoft.ServiceBus.ConnectionString");
        var namespaceManager = NamespaceManager.CreateFromConnectionString(connectionString);

        // Configure Topic Settings
        TopicDescription td = new TopicDescription("CommandTopic");
        td.MaxSizeInMegabytes = 5120;
        td.DefaultMessageTimeToLive = new TimeSpan(0, 0, 1);

        if (!namespaceManager.TopicExists("CommandTopic"))
        {
            namespaceManager.CreateTopic(td);
        }

        Random rand = new Random();
        double randNum = rand.Next();

        if (!namespaceManager.SubscriptionExists("CommandTopic", "CommandSubscription"+randNum))
        {
            namespaceManager.CreateSubscription("CommandTopic", "CommandSubscription" + randNum);
        }

        Client = SubscriptionClient.CreateFromConnectionString(connectionString, "CommandTopic", "CommandSubscription" + randNum, ReceiveMode.ReceiveAndDelete);
        Trace.WriteLine("SUBSCRIPTION: COMMANDSUBSCRIPTION"+randNum); 
```

为了为每个工作角色实例创建一个单独的订阅（以便所有实例都收到主题中的消息），我不得不使用一个随机数。有没有办法使用实例的一些 Id 而不是随机数。有 Instance.Id 但是它太长而不能用作订阅名称的参数。是否有不使用子字符串的较短版本？另外，为每个实例创建单独的订阅是正确的方法吗？以前所有实例都订阅了同一个订阅，因此只有 1 个实例获取消息并将其从订阅中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:30:03.250

please find the following link, I hope it can help you make the intercommunication between your roles:

[http://msdn.microsoft.com/en-us/library/windowsazure/hh180158.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh180158.aspx)

and also please have a look on the following link, I think it has exactly what you are looking for: [http://windowsazurecat.com/2011/08/how-to-simplify-scale-inter-role-communication-using-windows-azure-service-bus/](http://windowsazurecat.com/2011/08/how-to-simplify-scale-inter-role-communication-using-windows-azure-service-bus/)

I think what you are talking about would be like the Scenario 4 in the following link where a role can communicate to several other roles. I am not sure if what you asked for is possible, but try working with the Windows Azure Worker Role with Service Bus Queue, I think this might help you a lot and might also be a better solution than the topic and subscription in this case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:03:12.700

尝试将工作人员角色的虚假 InternalEndpoint 添加到您的配置中。这可确保填充角色的实例列表。

# asp.net-mvc - 后操作未填充 ASP.NET MVC 4 导航虚拟属性

> ID：15367704
> 
> 赞同：3
> 
> 时间：2013-03-12T17:12:01.193
> 
> 标签：asp.net-mvc, asp.net-mvc-4, data-annotations, modelbinders, navigation-properties

我在 Question 类上有一个导航属性（Category），我在 Question 的 Create 视图中为其手动创建 DropDownList ，并且在发布 Create 操作时，Category 导航属性未填充到模型上，因此给了我一个无效的模型状态。

这是我的模型：

```
 public class Category
    {
        [Key]
        [Required]
        public int CategoryId { get; set; }

        [Required]
        public string CategoryName { get; set; }

        public virtual List<Question> Questions { get; set; }
    }

public class Question
    {
        [Required]
        public int QuestionId { get; set; }

        [Required]
        public string QuestionText { get; set; }

        [Required]
        public string Answer { get; set; }

        [ForeignKey("CategoryId")]
        public virtual Category Category { get; set; }

        public int CategoryId { get; set; }
    } 
```

这是我对 Create 的 GET 和 POST 操作的问题控制器：

```
public ActionResult Create(int? id)
        {
            ViewBag.Categories = Categories.Select(option => new SelectListItem {
                Text = option.CategoryName,
                Value = option.CategoryId.ToString(),
                Selected = (id == option.CategoryId)
            });
            return View();
        }

        [HttpPost]
        [ValidateAntiForgeryToken]
        public ActionResult Create(Question question)
        {
            if (ModelState.IsValid)
            {
                db.Questions.Add(question);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(question);
        } 
```

这是问题的创建视图

```
@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Question</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Category)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Category.CategoryId, (IEnumerable<SelectListItem>)ViewBag.Categories, "Select a Category")
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.QuestionText)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.QuestionText)
            @Html.ValidationMessageFor(model => model.QuestionText)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Answer)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Answer)
            @Html.ValidationMessageFor(model => model.Answer)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

我尝试了以下在视图上生成下拉列表的变体：

```
@Html.DropDownListFor(model => model.Category.CategoryId, (IEnumerable<SelectListItem>)ViewBag.Categories, "Select a Category")
@Html.DropDownListFor(model => model.Category, (IEnumerable<SelectListItem>)ViewBag.Categories, "Select a Category")
@Html.DropDownList("Category", (IEnumerable<SelectListItem>)ViewBag.Categories, "Select a Category")
@Html.DropDownList("CategoryId", (IEnumerable<SelectListItem>)ViewBag.Categories, "Select a Category") 
```

当我在 POST 操作上快速查看 Question 对象时，Category 属性为空，但该属性上的 CategoryId 字段设置为视图上的选定类别。

我知道我可以使用从视图中获得的 CategoryId 值轻松添加代码以手动获取具有 EF 的类别。我也认为我可以创建一个自定义活页夹来做到这一点，但我希望这可以通过数据注释来完成。

我错过了什么吗？

有没有更好的方法来为导航属性生成下拉列表？

有没有办法让 MVC 知道如何填充导航属性而无需我手动执行？

- 编辑：

如果有任何区别，我不需要在创建/保存问题时加载实际的导航属性，我只需要将 CategoryId 正确保存到数据库中，这不会发生。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:34:33.017

代替

```
 @Html.DropDownListFor(model => model.Category.CategoryId, (IEnumerable<SelectListItem>)ViewBag.Categories, "Select a Category") 
```

尝试

```
 @Html.DropDownListFor(model => model.CategoryId, (IEnumerable<SelectListItem>)ViewBag.Categories, "Select a Category") 
```

编辑：

没有自动方法可以从表单发布的 id 填充 Navigation 属性。因为，应该发出数据库查询来获取数据，并且它不应该是透明的。它应该明确地完成。此外，在自定义活页夹中执行此操作可能不是最好的方法。此链接中有一个很好的解释：[Inject a dependency into a custom model binder and using InRequestScope using Ninject](https://stackoverflow.com/questions/9186560/inject-a-dependency-into-a-custom-model-binder-and-using-inrequestscope-using-ni)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:10:42.300

我知道这个问题已经回答了，但它让我思考。

所以我想我找到了一种通过**一些约定**来做到这一点的方法。

首先，我让实体继承自这样的基类：

```
public abstract class Entity
{
}
public class Question : Entity
{
    [Required]
    public int QuestionId { get; set; }

    [Required]
    public string QuestionText { get; set; }

    [Required]
    public string Answer { get; set; }

    public virtual Category Category { get; set; }
}
public class Category : Entity
{
    [Key]
    [Required]
    public int CategoryId { get; set; }

    [Required]
    public string CategoryName { get; set; }

    public virtual List<Question> Questions { get; set; }
} 
```

因此，我还将 Question 模型更改为没有名为 CategoryId 的额外属性。

对于表格，我所做的只是：

```
@Html.DropDownList("CategoryId", (IEnumerable<SelectListItem>)ViewBag.Categories, "Select a Category") 
```

所以这是第二个约定，您必须**使用 Id 后缀命名属性字段**。

最后是 CustomModelBinder 和 CustomModelBinderProvider

```
public class CustomModelBinderProvider : IModelBinderProvider
    {
        private readonly IKernel _kernel;

        public CustomModelBinderProvider(IKernel kernel)
        {
            _kernel = kernel;
        }

        public IModelBinder GetBinder(Type modelType)
        {
            if (!typeof(Entity).IsAssignableFrom(modelType))
                return null;

            Type modelBinderType = typeof (CustomModelBinder<>)
                .MakeGenericType(modelType);

            // I registered the CustomModelBinder using Windsor
            return _kernel.Resolve(modelBinderType) as IModelBinder;
        }
    } 
```

公共类 CustomModelBinder : DefaultModelBinder where T : Entity { private readonly QuestionsContext _db;

```
public CustomModelBinder(QuestionsContext db)
{    
    _db = db;
}

public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
{
    var model = base.BindModel(controllerContext, bindingContext) as T;

    foreach (var property in typeof(T).GetProperties())
    {
        if (property.PropertyType.BaseType == typeof(Entity))
        {
            var result = bindingContext.ValueProvider.GetValue(string.Format("{0}Id", property.Name));
            if(result != null)
            {
                var rawIdValue = result.AttemptedValue;
                int id;
                if (int.TryParse(rawIdValue, out id))
                {
                    if (id != 0)
                    {
                        var value = _db.Set(property.PropertyType).Find(id);
                        property.SetValue(model, value, null);
                    }
                }
            }
        }
    }
    return model;
} 
```

}

CustomModelBinder 将查找 Entity 类型的属性并使用 EF 使用传递的 Id 加载数据。

这里我使用 Windsor 来注入依赖项，但您可以使用任何其他 IoC 容器。

就是这样。您有一种方法可以自动进行绑定。

# sql - 使用子字符串来评估表值一，前导零

> ID：15367707
> 
> 赞同：0
> 
> 时间：2013-03-12T17:12:04.360
> 
> 标签：sql, coldfusion, substring

我没有任何运气来完成这项工作，我不确定我错过了什么。我是coldfusion和SQL的新手，还在学习。

我有一个我在表单中做的绑定。在用户选择服务类型后，需要生成一个名称，该名称位于另一个表中。我遇到的问题是服务类型正在使用位于两个表中的服务号。然而，在一张表中，创建者在数字中添加了前导零。例如，一个表将有 205 而另一个表将有 0000205 我需要比较这些以获得我想要的名称值。这是我到目前为止的编码。这是使用coldfusion和java。

名为 servicetype2 的 cfc 文件

```
<cffunction name="getServiceType2" access="remote" returnType="array">
<cfargument name="CATG_NAME" type="string" required="true">

<cfset var data="">
<cfset var result=ArrayNew(2)>
<cfset var i=0>

<cfquery name="getServiceType2" datasource="SOME DATABASE">
select 1 AS SortBy,  '' AS SRTY_NBR, '' AS SRTY_NAME
from SOME TABLE
UNION
select distinct 2 AS SortBy, SRTY_NBR, SRTY_NAME
from SOME TABLE
where CATG_NAME = <cfqueryparam value="#ARGUMENTS.CATG_NAME#" cfsqltype="cf_sql_varchar"> AND EVLN_REQD_FLAG IS NOT NULL
order by SortBy
</cfquery>

<cfloop index="i" from="1" to="#getServiceType2.recordcount#">
<cfset result[i][1]=getServiceType2.SRTY_NAME[i]>
<cfset result[i][2]=getServiceType2.SRTY_NAME[i]>
</cfloop>

<cfreturn result>
</cffunction>

 //Table 2
<cffunction name="getUnion" access="remote" returnType="array">
<cfargument name="SRTY_NBR" type="string" required="true">

<cfset var result=ArrayNew(1)>

<cfquery name="union_rq" datasource="SOME DATABASE">
select UNI_NAME, substring(SRTY_NBR, patindex('%[^0]%',SRTY_NBR),10)
from SOME TABLE
where substring(SRTY_NBR, patindex('%[^0]%',SRTY_NBR),10)
     = <cfqueryparam value="#ARGUMENTS.SRTY_NBR#" cfsqltype="cf_sql_varchar"> 
 </cfquery>

 <cfset result[1]=union_rq.UNI_NAME>

 <cfreturn result>
 </cffunction> 
```

我的表格中的代码是：

```
 <tr id="serv_ty2" style="display: inline;">
<td></td>
<td>Select Service:
     <cfselect name="service_type"
     bind="cfc:servicetype2.getServiceType2({catdesc})"
bindonload="false"/></td>
</tr>

     <tr id="union" style="display: inline;">
<td></td>
<td>Union Attached:
<cfinput name="uni_name"
     bind="cfc:servicetype2.getUnion({service_type})"
bindonload="false"
/></td>
</tr> 
```

绑定再次正常工作，但我无法获得名称，我确信这与我的 SQL 语句比较 205 和 0000205 有关。任何关于如何使 sql 语句工作的建议都会很棒。如果您发现绑定有任何其他错误，那也很好。提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:26:32.287

您可以`NumberFormat()`在查询中使用

```
WHERE srty_nbr IN (<cfqueryparam    
    value="#ARGUMENTS.SRTY_NBR#,#NumberFormat(ARGUMENTS.SRTY_NBR,'0000000')#" 
    cfsqltype="cf_sql_varchar" list="true"> 
```

`#NumberFormat(ARGUMENTS.SRTY_NBR,'0000000')#`将确保每个数字都有 7 位数字和前导零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:51:20.450

您最好的选择是在 SQL 级别上铸造价值。这很容易通过将列的选择更改为：`SELECT ..., CAST(SRTY_NBR AS UNSIGNED) ...`这将截断前导零。

# jsf-2 - JSF2 的就地编辑器

> ID：15367710
> 
> 赞同：0
> 
> 时间：2013-03-12T17:12:17.253
> 
> 标签：jsf-2, primefaces, facelets

我想将 Inplace 编辑器添加到我的网页。我搜索了互联网，但没有发现任何有趣的东西。我已经就地使用了primefaces，但问题是这个插件转义了html。有谁知道一些可以用作就地编辑器的 jsf-2 组件？还是我自己写？编辑器将用于编辑包含 html 代码的页面。

# c# - 索引时查询 Solr 会导致索引中的文档丢失

> ID：15367713
> 
> 赞同：1
> 
> 时间：2013-03-12T17:12:23.807
> 
> 标签：c#, .net, solr, solrnet

我编写了简单的 .NET Windows 服务，它将文档推送到 Apache Solr v4.1。为了访问 Solr，我使用了 SolrNet。我的代码是：

```
var solr = _container.Resolve<ISolrOperations<Document>>();             
solr.Delete(SolrQuery.All);

var docs = from o in documents
           orderby o.Id ascending
           select o;

for (var i = 0; i < docs.Count(); i++ )
{
    var texts = new List<string>();
    if (docs.ToList()[i].DocumentAttachments.Count > 0)
    {
        foreach (var attach in docs.ToList()[i].DocumentAttachments)
        {
            using (var fileStream = System.IO.File.OpenRead(...))
            {
                var extractResult = solr.Extract(
                    new ExtractParameters(fileStream, attach.Id.ToString(CultureInfo.InvariantCulture))
                    {
                        ExtractFormat = ExtractFormat.Text,
                        ExtractOnly = true
                    }
                );
                texts.Add(extractResult.Content);                   
            }
        }
    }

    docs.ToList()[i].GetFilesText = texts;
    solr.Add(docs.ToList()[i]);

    if (i % _commitStep == 0)
    {
        solr.Commit();
        solr.Optimize();
    }
}

solr.Commit();
solr.Optimize();
solr.BuildSpellCheckDictionary(); 
```

**“Document.GetFilesText”** - 这是一个存储文本的字段，从 pdf 文件中提取。
此示例已从日志记录方法中清除（写入 Windows 事件日志）。在编制索引时，我会看到：
a) 事件日志 - 显示文档索引进度
b) “Solr Admin”webapp 中的“Core Admin”页面 - 显示索引中的文档数

当我只是索引文档而不搜索时，一切正常 - 事件日志显示“7500 docs added”条目，“Core Admin”显示*num docs = 7500*。

但是，如果我在索引期间尝试搜索文档，我会遇到以下错误：
- 搜索结果不包含所有传递的文档
- “核心管理员”重置*num docs*值。例如，EventLog 显示*7500 docs indexed*，但“Core Admin”显示*num docs=23*。当我**查询 Solr 时，每次都会重置***num docs* 。

 **我的查询代码：

```
searchPhrase = textBox1.Text;
var documents = Solr.Query(new SolrQuery(searchPhrase), new QueryOptions
    {
        Highlight = new HighlightingParameters
            {
                UsePhraseHighlighter = true,
                Fields = new Collection<string> { "Field1", "Field2", "Field3" },
                BeforeTerm = "<b>",
                AfterTerm = "</b>"
            },
        Rows = 100
    }); 
```

* * *

**UPD：为了清楚** 起见，我的 webapp 的“搜索”页面中有这些行：

```
public class MyController : Controller
{
    public ISolrOperations<Document> Solr { get; set; }

    public MyController()
    {
        //_solr = solr;
    }

    //
    // GET: /Search/My/
    public ActionResult Index()
    {
        Solr.Delete(SolrQuery.All);

        return View();
    }
... 
```

而且，在浏览器中打开此页面会导致 Solr 索引中的文档完全丢失。:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:45:41.813

您看到这种行为是因为您要做的第一件事是清除索引。

```
solr.Delete(SolrQuery.All) 
```

这将从索引中删除所有文档。因此，一旦重新索引开始，索引将为空。现在在您的后续代码中，您将项目分批添加回索引中。[但是，在发出提交](http://wiki.apache.org/solr/UpdateXmlMessages#A.22commit.22_and_.22optimize.22)之前，查询索引的用户将看不到您添加到索引的任何新文档。由于您正在添加文档并在此期间批量发布提交，这解释了为什么在重建时您的文档数量会增加以及为什么不是所有文档都可见。在发出最后一次提交之前，您在索引中的计数和文档总数不会是 7500。

可能有几个选项可以帮助您缓解这种情况。

1.  使用[commitWithin](http://wiki.apache.org/solr/CommitWithin)向 Solr 发出软提交或向 Solr[自动软提交](http://wiki.apache.org/solr/SolrConfigXml?#Update_Handler_Section)。CommitWithin 支持作为 SolrNet`AddParameter`中 Add 方法的可选选项。你可以发出`solr.Add(docs.ToList()[i], new AddParameters{ CommitWithin = 3000});`which 会告诉 Solr 在 3 秒内提交这批项目。
2.  使用[Solr Cores](http://wiki.apache.org/solr/CoreAdmin)拥有一个用户正在搜索的“活动”核心，并将您的日志数据重新加载到“备用”核心中。一旦对备用核心的加载过程完成，您可以发出命令来[交换](http://wiki.apache.org/solr/CoreAdmin#SWAP)核心，这对任何用户都是完全透明的。SolrNet 也支持 CoreAdmin 命令，有关示例，请参阅[SolrCoreAdminFixture.cs](https://github.com/mausch/SolrNet/blob/master/SolrNet.Tests.Integration/SolrCoreAdminFixture.cs)中的测试。

希望这可以帮助。**

# c# - 检查 TextBlocks 文本是否为某种颜色

> ID：15367718
> 
> 赞同：2
> 
> 时间：2013-03-12T17:12:36.757
> 
> 标签：c#, microsoft-metro

无论如何要检查 a`TextBlock`的文本是否是某种颜色。我的意思是，有没有办法说：

```
if(textblocks foreground is blue)
//do stuff 
```

当我在它的时候，有人知道如何`TextBlock`随机改变 a 的前景吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:20:03.790

假设你正在使用 a `SolidColorBrush`，你可以试试这个

```
SolidColorBrush b = myTextBlock.Foreground as SolidColorBrush;
if (b != null)
{
   if(b.Color == Windows.UI.Colors.Blue)
   {
      //your code
   }
} 
```

要设置随机颜色，您可以选择随机颜色进行选择和设置。您可以`Random`按以下方式使用，也可以按[此处](https://stackoverflow.com/questions/5805774/how-to-generate-random-color-names-in-c-sharp)`KnownColor`描述的方式进行选择。

```
Random rnd = new Random();     

myTextBlock.Foreground = new SolidColorBrush
                   (Color.FromArgb(rnd.Next(255), rnd.Next(255), rnd.Next(255))); 
```

# mysql - 查询优化——耗时过长并停止服务器

> ID：15367719
> 
> 赞同：2
> 
> 时间：2013-03-12T17:12:37.170
> 
> 标签：mysql, query-optimization

我的查询生成了一些关于超速、上次和平均速度的报告。这是我的查询：

```
Select 
    r1 . *, r2.name, r2.notes, r2.serial
From
    (SELECT 
        k.idgps_unit,
            MIN(k.dt) AS DT_Start,
            MIN(CASE
                WHEN k.RowNumber = 1 THEN k.Lat
            END) AS Latitude_Start,
            MIN(CASE
                WHEN k.RowNumber = 1 THEN k.Long
            END) AS Longitude_Start,
            MIN(CASE
                WHEN k.RowNumber = 1 THEN k.Speed_kmh
            END) AS Speed_Start,
            MAX(k.dt) AS dt_end,
            MIN(CASE
                WHEN k.RowNumber = MaxRowNo THEN k.Lat
            END) AS Latitude_End,
            MIN(CASE
                WHEN k.RowNumber = MaxRowNo THEN k.Long
            END) AS Longitude_End,
            MIN(CASE
                WHEN k.RowNumber = MaxRowNo THEN k.Speed_kmh
            END) AS Speed_End,
            AVG(Speed_kmh) AS Average_Speed
    FROM
        (SELECT 
        gps_unit_location . *,
            @i:=CASE
                WHEN Speed_Kmh > 80 AND @b = 0 THEN @i + 1
                ELSE @i
            END AS IntervalID,
            @r:=CASE
                WHEN Speed_Kmh > 80 AND @b = 0 THEN 1
                ELSE @r + 1
            END AS RowNumber,
            @b:=CASE
                WHEN Speed_Kmh > 80 THEN 1
                ELSE 0
            END AS IntervalCheck
    FROM
        gps_unit_location, (SELECT @i:=0) i, (SELECT @r:=0) r, (SELECT @b:=0) b
    ORDER BY dt , idgps_unit_location) k
    INNER JOIN (SELECT 
        IntervalID, MAX(RowNumber) AS MaxRowNo
    FROM
        (SELECT 
        gps_unit_location . *,
            @i:=CASE
                WHEN Speed_Kmh > 80 AND @b = 0 THEN @i + 1
                ELSE @i
            END AS IntervalID,
            @r:=CASE
                WHEN Speed_Kmh > 80 AND @b = 0 THEN 1
                ELSE @r + 1
            END AS RowNumber,
            @b:=CASE
                WHEN Speed_Kmh > 80 THEN 1
                ELSE 0
            END AS IntervalCheck
    FROM
        gps_unit_location, (SELECT @i:=0) i, (SELECT @r:=0) r, (SELECT @b:=0) b
    ORDER BY dt , idgps_unit_location) d
    WHERE
        IntervalCheck = 1
    GROUP BY IntervalID) MaxInt ON MaxInt.IntervalID = k.IntervalID
    WHERE
        k.IntervalCheck = 1
            and k.idgps_unit in (SELECT 
                idgps_unit
            FROM
                instafleet.gps_unit
            where
                id_customer = (select 
                        idcustomer
                    from
                        user
                    where
                        iduser = 14))
    GROUP BY k.IntervalID , k.idgps_unit) r1
        Inner join
    gps_unit r2 ON r1.idgps_unit = r2.idgps_unit 
```

目前，783,723 条记录需要 3 分钟。我认为适当的索引可能会有所帮助；虽然经过一些试验和错误，我无法弄清楚。如果您认为您可以提供帮助，并且需要一些额外的信息 - 我会很高兴您提供给您。

解释 ![解释](../Images/bf0c2315247864be2c6cdc8354ff3381.png)

结果 ![结果](../Images/49360d4cf726d577811ae2fdecc966c3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T22:14:38.393

添加索引在许多情况下会有所帮助，但是您有一个子查询加入另一个子查询，当前表上没有索引可以帮助您加快速度。您可以在这里使用索引的唯一方法是创建临时表。

因此，正如 Markus 指出的那样，您需要将查询分成几个较小的查询，将结果存储在临时表中。您可以向它们添加索引并希望加快您的查询速度。将大查询分成几个较小的查询的另一个好处是，您可以更好地分析哪个部分是较慢的部分并修复它。

您还两次使用了一个子查询，这对性能不利，因为结果没有被缓存。

这是一个如何执行此操作的示例：

```
DROP TEMPORARY TABLE IF EXISTS tmp_k;
CREATE TEMPORARY TABLE tmp_k
    ENGINE=Memory
SELECT 
    gps_unit_location.*,
    @i:= IF(((Speed_Kmh > 80) AND (@b = 0)), @i + 1, @i) AS IntervalID,
    @r:= IF(((Speed_Kmh > 80) AND (@b = 0)), 1, @r + 1) AS RowNumber,
    @b:= IF((Speed_Kmh > 80), 1, 0) AS IntervalCheck
FROM
    gps_unit_location,
    (SELECT @i:=0) i, 
    (SELECT @r:=0) r, 
    (SELECT @b:=0) b
ORDER BY
    dt,
    idgps_unit_location;

ALTER TABLE tmp_k ADD INDEX (IntervalID);

DROP TEMPORARY TABLE IF EXISTS tmp_max;
CREATE TEMPORARY TABLE tmp_max
    ENGINE=Memory
SELECT 
    IntervalID, 
    MAX(RowNumber) AS MaxRowNo
FROM
    temp_k
WHERE
    IntervalCheck = 1
GROUP BY 
    IntervalID;

ALTER TABLE tmp_max ADD INDEX (IntervalID);

SELECT 
    k.idgps_unit,
    MIN(k.dt) AS DT_Start,
    MIN(IF(k.RowNumber = 1, k.Lat, NULL)) AS Latitude_Start,
    MIN(IF(k.RowNumber = 1, k.Long, NULL)) AS Longitude_Start,
    MIN(IF(k.RowNumber = 1, k.Speed_kmh, NULL) AS Speed_Start,
    MAX(k.dt) AS DT_End,
    MIN(IF(k.RowNumber = m.MaxRowNo, k.Lat, NULL)) AS Latitude_End
    MIN(IF(k.RowNumber = m.MaxRowNo, k.Long, NULL)) AS Longitude_End
    MIN(IF(k.RowNumber = m.MaxRowNo, k.Speed_kmh, NULL)) AS Speed_End,
    AVG(Speed_kmh) AS Average_Speed,
    gu.name,
    gu.notes,
    gu.serial
FROM
    tmp_k AS k
    INNER JOIN tmp_max AS m
        USING(IntervalID)
    INNER JOIN gps_unit AS gu
        USING(idgps_unit)
    INNER JOIN user AS u
    ON (gu.idcustomer = u.idcustomer)
WHERE
    (k.IntervalCheck = 1) 
     AND (u.iduser = 14)
GROUP BY 
    k.IntervalID, 
    k.idgps_unit;

DROP TEMPORARY TABLE tmp_k;
DROP TEMPORARY TABLE tmp_max; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:56:33.683

如果嵌套查询的字节大小超过缓冲池的大小（检查`innodb_buffer_pool_size`），由于 i/o 分页，您的查询将花费极长的时间。

也就是说，您可以通过以下提示提高性能：

*   在嵌套查询中选择尽可能少的数据
*   增加缓冲池的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:32:03.473

我的个人经验表明，MySQL 在处理子查询方面相当糟糕。数据库的查询优化器是数据库中非常复杂和美味的部分，商业数据库供应商在其中投入了很多精力，因此恕我直言，难怪 MySQL 在处理更疯狂的开发人员发明的疯狂 SQL 语句时表现相当差;-)。

见这里：[http](http://dev.mysql.com/doc/refman/5.6/en/subquery-restrictions.html) ://dev.mysql.com/doc/refman/5.6/en/subquery-restrictions.html ：

> 连接优化器比子查询更成熟，因此在许多情况下，如果将使用子查询的语句重写为连接，则可以更有效地执行它。

如果 Oracle 的官方 mysql 文档声明“更成熟”之类的东西，那么您可以放心，它实际上类似于废话（不是双关语，但我已经遇到了 MySQL 的问题，并且大多数较大的语句都可以完美运行用商业数据库，宁愿杀mysql）。

所以任务是：使用 JOIN 重写它......

# php - phpMyAdmin 中的错误“无法连接到 MySQLserver”

> ID：15367722
> 
> 赞同：1
> 
> 时间：2013-03-12T17:12:43.673
> 
> 标签：php, mysql, phpmyadmin, mamp

每次我启动 MAMP 并打开起始页面时，我都会收到错误无法连接到 mysql。我不确定我做了什么，但我想我已经重置了密码，现在忘记了我改变了什么！

我试图在终端中更改它，但我只是得到：用户'root'@'localhost'的访问被拒绝（使用密码：是）

我怎样才能解决这个问题？

我曾考虑过在 MAMP 上进行新安装，但是我的 htdocs 中有许多站点并且不想丢失它们。

这是我得到的错误：

![在此处输入图像描述](../Images/567f3ea61231ab4ff1874b5fda0e7010.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:17:15.600

为什么不更改 MAMP 中的 Mysql 根密码？

> 打开 MAMP => Server => Mysql => 更改 root 密码（假设您拥有 MAMP PRO 2.1.1）

如果您复制位于以下位置的 htdocs 目录，您将不会离开您的网站：

> /Applications/MAMP/htdocs（假设你在 OS X 下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:16:42.997

卸载PC中安装的旧Mysql并运行Web浏览器然后会出现相同的错误然后刷新页面这将起作用

# google-apps-script - Web 应用程序中如何计算触发限制

> ID：15367724
> 
> 赞同：0
> 
> 时间：2013-03-12T17:12:47.923
> 
> 标签：google-apps-script

我有一个 Web 应用程序，它创建了一个可能需要 6 分钟以上才能完成的过程。我决定使用定时触发器和 scriptDB 将其分块来跟踪执行过程。

我在我们的组织内共享了我的网络应用程序，以在用户访问它时执行。

脚本触发器是作为用户创建的，还是在这种情况下作为脚本所有者创建的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:30:48.063

如果您的脚本设置为作为访问它的用户执行，则触发器是在用户帐户下创建的，而不是脚本的所有者。

# php - 根据字段将查询结果划分为列表

> ID：15367728
> 
> 赞同：0
> 
> 时间：2013-03-12T17:13:01.413
> 
> 标签：php, mysql, wordpress, loops, nested-loops

我正在使用 Wordpress 创建一个自定义页面，并且需要根据标签将我的查询结果划分为列表。我知道有一个 Wordpress 堆栈交换，但这对我来说更像是一个基本的 PHP 函数。我在 Wordpress 堆栈上发现的唯一内容是根据标签名称执行新查询。

必须有更有效的方法...

我是 PHP 新手。更复杂的是，我一直在与循环作斗争，但我每天都在越来越多地掌握这个概念。

这是我想要实现的逻辑：

查询数据库并获取标记为“红、绿、蓝、黄”的帖子的“标题”。这部分我可以用`WP_Query()`函数来做，没有问题……麻烦的是下一部分。

循环查询和输出：

```
<ul id="red">
<li>Output title of first post tagged with Red</li>
<li>Output title of second post tagged with Red</li>
<li>Output title of third post tagged with Red</li>
<!--[etc...]-->
</ul>
<ul id="green">
<li>Output title of first post tagged with Greeen</li>
<li>Output title of second post tagged with Green</li>
<li>Output title of third post tagged with Green</li>
<!--[etc...]-->
</ul>
<!--[continue for other colors requested in the query]--> 
```

结束循环

我理解第一个循环会遍历结果并输出所有记录的标题，我只是对如何循环结果并进一步除以颜色感到困惑。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:21:42.823

首先，您可以对从数据库中获得的结果进行排序，只需添加一个

```
ORDER BY `color` // for MySql at least 
```

如果您希望在一个循环中完成所有这些操作，那么代码会变得有些混乱。`ul`每次颜色更改时，您都必须存储最后一种颜色并终止+启动一个新元素。

另一个（更好的 IMO）选项是将您的元素分类到循环内的数组中，然后在循环之后，适当地回显每个数组的内容。

```
$colors = array();
while($row = ..FETCH_MORE_DATA_FROM_DB...){
  if (!is_array($colors[$row['color']])){ 
    $colors[$row['color']] = array(); 
  }
  $colors[$row['color']][] = "<li>{$row['title}</li>";
}

foreach($colors AS $colorName => $elements){
  echo '<ul id="'. $colorName .'">';
  foreach($elements AS $element){
    echo $element;
  }
  echo '</ul>';
} 
```

# c# - EF如何选择不在集合中的元素

> ID：15367729
> 
> 赞同：1
> 
> 时间：2013-03-12T17:13:01.490
> 
> 标签：c#, entity-framework

我有 3 个数据模型类 product、order、orderRow

如何仅选择那些不是当前订单行的产品？

```
var order = db.Orders.Find(order_id);
var product= db.Products.Where(m => ((order==null) || order.Rows.Count(a => a.Product== m) < 1)  ).AsQueryable(); 
```

当我尝试这个时，我得到“无法创建'Order'类型的常量值。在这种情况下只支持原始类型或枚举类型。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:17:57.480

我在这里做了一些假设，但你可以推断：

```
var nonSelectedProducts = from product in db.Products
                          where !order.Rows.Any(or => or.ProductId == product.Id)
                          select product 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:31:49.240

您应该能够对 id 进行否定包含：

```
var productIds = order.Rows.Select(x => x.Product.Id);
var products = db.Products.Where(x => !productIds.Contains(x.Id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T18:47:29.347

我收到错误消息“无法创建'Order'类型的常量值，所以所做的是

```
var nonSelectedProducts = from product in new List<product>(db.Products)
                      where !order.Rows.Any(or => or.ProductId == product.Id)
                      select product 
```

你已经准备好了

# c# - Rx：如何缓冲事件（环形缓冲区）并仅在发生特殊事件时刷新它们？

> ID：15367730
> 
> 赞同：4
> 
> 时间：2013-03-12T17:13:02.410
> 
> 标签：c#, events, system.reactive, circular-buffer

我在 C# 中使用 Reactive Extensions (Rx) 并希望通过以下方式过滤事件。想象一下，我有以下发起者序列：

ABCDEF **X** GHI **X** J **XX** KLMNO **X** P

我想产生以下输出：

EF **X**高**X** J **XX**无**X**

基本上，我会缓冲（节流？）具有最大界限的事件（在示例中此界限为 2），当我得到某个事件（在本例中为事件 X）时，我想将该缓冲区刷新到输出并开始缓冲直到我再次看到特殊事件。

我正在尝试几种方法，但没有任何运气，我想应该有一种简单的方法来完成我所缺少的。

编辑：一个限制是，我希望得到大量被丢弃的事件，并且只有少数 X 实例，因此在内存中保留一个包含数千个事件的缓冲区以仅读取最后 2 个（或 20 个）并不是真正的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:24:44.547

为方便起见，我们需要以下两个扩展函数：

```
public static class Extensions
{
    public static IObservable<IList<TSource>> BufferUntil<TSource>(this IObservable<TSource> source, Func<TSource, bool> predicate)
    {
        var published = source.Publish().RefCount();
        return published.Buffer(() => published.Where(predicate));
    }

    public static IEnumerable<TSource> TakeLast<TSource>(this IEnumerable<TSource> source, int count)
    {
        return source.Reverse().Take(count).Reverse();
    }
} 
```

然后我们像这样解决问题：

```
source.BufferUntil(c => c == 'X')
    .SelectMany(list => list.TakeLast(3)) 
```

输出：

```
E F X H I X J X X N O X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:43:01.970

我将捎带我在这里发布的另一个答案： [Trouble Implementation a Sliding Window in Rx](https://stackoverflow.com/questions/15256557/trouble-implementing-a-sliding-window-in-rx)

重要的是这个扩展方法：

```
public static class Ext
{
    public static IObservable<IList<T>> SlidingWindow<T>(
        this IObservable<T> src, 
        int windowSize)
    {
        var feed = src.Publish().RefCount();    
        // (skip 0) + (skip 1) + (skip 2) + ... + (skip nth) => return as list  
        return Observable.Zip(
        Enumerable.Range(0, windowSize)
            .Select(skip => feed.Skip(skip))
            .ToArray());
    }
} 
```

您可以这样使用：

```
void Main()
{
    // A faked up source
    var source = new Subject<char>();

    var bufferSize = 2;
    Func<char, bool> eventTrigger = c => c == 'X';

    var query = source
        .Publish()
        .RefCount()
        // Want one extra slot to detect the "event"
        .SlidingWindow(bufferSize + 1)
        .Where(window => eventTrigger(window.Last()))
        .Select(buffer => buffer.ToObservable())
        .Switch();

    using(query.Subscribe(Console.WriteLine))
    {
        source.OnNext('A');
        source.OnNext('B');
        source.OnNext('C');
        source.OnNext('D');
        source.OnNext('E');
        source.OnNext('F');
        source.OnNext('X');
        source.OnNext('G');
        source.OnNext('H');
        source.OnNext('I');
        source.OnNext('X');
        Console.ReadLine();
    }    
} 
```

输出：

```
E
F
X
H
I
X 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T21:37:08.113

这是回答我自己的问题的一个刺，如果您发现任何问题，请告诉我。

```
public static class ObservableHelper
{
    /// <summary>
    /// Buffers entries that do no satisfy the <paramref name="shouldFlush"/> condition, using a circular buffer with a max
    /// capacity. When an entry that satisfies the condition ocurrs, then it flushes the circular buffer and the new entry,
    /// and starts buffering again.
    /// </summary>
    /// <typeparam name="T">The type of entry.</typeparam>
    /// <param name="stream">The original stream of events.</param>
    /// <param name="shouldFlush">The condition that defines whether the item and the buffered entries are flushed.</param>
    /// <param name="bufferSize">The buffer size for accumulated entries.</param>
    /// <returns>An observable that has this filtering capability.</returns>
    public static IObservable<T> FlushOnTrigger<T>(this IObservable<T> stream, Func<T, bool> shouldFlush, int bufferSize)
    {
        if (stream == null) throw new ArgumentNullException("stream");
        if (shouldFlush == null) throw new ArgumentNullException("shouldFlush");
        if (bufferSize < 1) throw new ArgumentOutOfRangeException("bufferSize");

        return System.Reactive.Linq.Observable.Create<T>(observer =>
        {
            var buffer = new CircularBuffer<T>(bufferSize);
            var subscription = stream.Subscribe(
                newItem =>
                    {
                        bool result;
                        try
                        {
                            result = shouldFlush(newItem);
                        }
                        catch (Exception ex)
                        {
                            return;
                        }

                        if (result)
                        {
                            foreach (var buffered in buffer.TakeAll())
                            {
                                observer.OnNext(buffered);
                            }

                            observer.OnNext(newItem);
                        }
                        else
                        {
                            buffer.Add(newItem);
                        }
                    },
                observer.OnError,
                observer.OnCompleted);

            return subscription;
        });
    }
} 
```

顺便说一句，CircularBuffer 不是开箱即用的，但实现很简单。

然后我打电话：

```
 data
            .FlushOnTrigger(item => item == 'X', bufferSize: 2)
            .Subscribe(Console.WriteLine); 
```

# actionscript-3 - 在 ActionScript3 中使用数组和位运算符

> ID：15367733
> 
> 赞同：0
> 
> 时间：2013-03-12T17:13:08.820
> 
> 标签：actionscript-3, intellij-idea

我在处理数组和按位运算符时遇到了一些麻烦......

这就是问题所在：我有一个类型为 CheckBox 的数组，在这个数组中我有 3 个复选框，每个选项一个复选框（pvrtc、dtc1、dtx15），然后我有一个选项：只有一个复选框为真，或全部为真。现在我想对我的状态使用按位运算符。

这就是我到目前为止得到的：

 `````
// thats my class with the possible states like consts
public class CompressionCombinations {

public static const selectedPvrtc:uint = 1<<0;

public static const selectedEtc1:uint = 1<<1;

public static const selectedDxt15:uint = 1<<2;

public static const selectedPvrtcEtc1Dxt15:uint = selectedPvrtc && selectedEtc1 && 
selectedDxt15;
// thats mean: selectedPvrtc = checkbox1 true, checkbox2 false, checkbox3 false.

//now my main class

//attributing my checkboxes into array

_combinationArray = new Array();
_combinationArray[0] = _checkBoxPvrtc;
_combinationArray[1] = _checkBoxEtc1;
_combinationArray[2] = _checkBoxDxt15;

// a function that do the maths

if((bin=uint(_combinationArray[0].selected + _combinationArray[1].selected +
_combinationArray[2].selected)) == CompressionCombinations.selectedPvrtc){

_argNativeProcess = new String("p");
_nativeProcess.setupAndLaunch(_inputNativeProcess, _outputNativeProcess,  
_argNativeProcess, this);
_msgSuccessErrorTextField.text = "Converting...";
}
else{
trace("not working");
} 
````  `这就是问题所在，我不能在其中应用按位运算......不知道如何使用或构造一个函数来做到这一点。我知道如何在没有位运算符的情况下做到这一点，但我希望在未来的新版本中使用位运算......

有任何想法吗 ？建议如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:19:19.000

```
var selectedPvrtc:uint = 1;
var selectedEtc1:uint = 2;
var selectedDxt15:uint = 4;

var _combinationArray :Array = new Array();
_combinationArray [0] = checkBoxPvrtc;
_combinationArray [1] = checkBoxEtc1;
_combinationArray [2] = checkBoxDxt15;
var tmp:uint = 0;
for(var i:int = 0;i<_combinationArray.length;i++){
    tmp = tmp|(uint(_combinationArray[i].selected)<<i);
}

if( tmp & selectedPvrtc){
    trace('selectedPvrtc')
}
if( tmp & selectedEtc1){
    trace('selectedEtc1')
}
if( tmp & selectedDxt15){
    trace('selectedDxt15')
} 
`````

# javascript - 使用 jQuery 按值删除 JSON 数组中的元素

> ID：15367734
> 
> 赞同：6
> 
> 时间：2013-03-12T17:13:10.687
> 
> 标签：javascript, jquery, arrays, json

我的 json 数组的一部分

```
var videos = $j.parseJSON('
  [
    { "privacy":"public",
      "id":"1169341693" },

    { "privacy":"private",
      "id":"803641223" },

    { "privacy":"public",
      "id":"1300612600" }, ...... 
```

当我 console.log 我得到的元素

```
 [Object, Object, Object, …]
       0: Object
           privacy: "public"
           id: "1169341693"
       1: Object
           privacy: "private"
           id: "803641223"
       2: Object
           privacy: "public"
           id: "1300612600" 
```

我也有一个我想搜索的唯一 ID

```
var uniqueId = 803641223; 
```

我想在我的视频数组中找到正确的 id，然后删除整个数组元素。所以在这种情况下，我希望我的最终视频数组只包含 2 个对象，而不是 3 个：

```
 var videos = $j.parseJSON('
  [
    { "privacy":"public",
      "id":"1169341693" },

    { "privacy":"public",
      "id":"1300612600" }, ...... 
```

我的问题是如何进入阵列进行拼接。我更喜欢用 jQuery 来做

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T17:14:37.827

您可以使用[grep](http://api.jquery.com/jQuery.grep/)：

```
videos = $.grep(videos, function(e) { return e.id!='803641223' }); 
```

在 vanilla JavaScript 中，您可以使用类似的[过滤器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)功能，但 IE8 不支持它。

请注意，这`videos`是一个 JavaScript 数组，它不是 JSON 数组，即使它是通过解析 JSON 字符串生成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T17:21:49.890

修改数组的非jQuery解决方案：

```
var uniqueId = 803641223;
var videos = [
    { "privacy":"public",
      "id":"1169341693" },

    { "privacy":"private",
      "id":"803641223" },

    { "privacy":"public",
      "id":"1300612600" }
];

function cleaner(arr, id) {
    for (var i = 0; i < videos.length; i++) {
        var cur = videos[i];
        if (cur.id == uniqueId) {
            arr.splice(i, 1);
            break;
        }
    }
}

cleaner(videos, uniqueId); 
```

[http://jsfiddle.net/4JAww/1/](http://jsfiddle.net/4JAww/1/)

请注意，这会修改原始数组，以便原始`videos`数组将包含您想要的项目，并且匹配的`uniqueId`项目将消失（永远）。因此，这取决于您是否希望能够再次访问原始数组，或者是否可以修改它。

它只是循环遍历数组的元素，将项目的`id`属性与`uniqueId`值进行比较，`splice`如果它们匹配则 s 。我`break;`在之后立即使用，`splice`因为您似乎暗示`uniqueId`可以/应该只在数组中出现一次，因为它是......唯一的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-11T13:20:19.723

您好，您可以使用 javascript splice 功能删除元素...

```
videos.items.splice(1, 3); // Removes three items starting with the 2nd, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T17:18:14.397

它为我工作。

```
 arrList = $.grep(arrList, function (e) { 

        if(e.add_task == addTask && e.worker_id == worker_id) {
            return false;
        } else {
            return true;
        }
    }); 
```

它返回一个没有该对象的数组。

希望能帮助到你。

# php - whatsapp api请求代码未执行且未返回请求代码

> ID：15367736
> 
> 赞同：11
> 
> 时间：2013-03-12T17:13:18.750
> 
> 标签：php, exception, whatsapp

我正在尝试实现[whatsAPI](https://github.com/venomous0x/WhatsAPI)，但我总是收到此错误
“*尝试请求代码时出现问题*”。

这是我的控制台中显示的完整错误：

```
####start of error notice#####

[12-Mar-2013 22:44:59] PHP Notice:  Undefined property: stdClass::$reason in /Applications/MAMP/htdocs/whatsapp/test/whatsprot.class.php on line 1268
[12-Mar-2013 22:44:59] PHP Fatal error:  Uncaught exception 'Exception' with message 'There was a problem trying to request the code.' in /Applications/MAMP/htdocs/whatsapp/test/whatsprot.class.php:1269
Stack trace:
#0 /Applications/MAMP/htdocs/whatsapp/test/test.php(36): WhatsProt->checkCredentials()
#1 {main}
  thrown in /Applications/MAMP/htdocs/whatsapp/test/whatsprot.class.php on line 1269

####end of error notice##### 
```

这些是我初始化课程的凭据

```
$userPhone = '8801770648732';       
$userIdentity = '352264050503669';                                               
$userName = 'shishir';          
$destinationPhone = '8801713206053';                                                
$debug = TRUE;
$whatsapp = new WhatsProt($userPhone, $userIdentity, $userName, $debug); 
```

并用于请求 requestCode

```
$service_type = "sms";    
$country_code = "BD";    
$language_code = "en";    
$request_code = $whatsapp->requestCode($service_type, $country_code, $language_code); 
```

每次它都停留在 `$whatsapp->requestCode`那个错误上。
我不确定我做错了什么。
谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-17T23:14:00.350

看起来你没有 curl 扩展。此异常由`checkCredentials`方法引发。

检查您的 phpinfo 是否显示 curl。

# c# - NHibernate OleDB：使用 session.get 时程序绑定无效 （ID）

> ID：15367740
> 
> 赞同：4
> 
> 时间：2013-03-12T17:13:41.597
> 
> 标签：c#, sql, nhibernate, oledb

我是第一次使用 NHibernate。我已将其设置为使用 OleDB 连接到 SQLBase 数据库。我已经设置了一些课程，现在尝试了第一个简短的测试，看看它是否有效。

这是我的测试：

```
[TestClass]
public class Hibernate
{
    private ISessionFactory _sessionFactory;
    private Configuration _config;

    [TestInitialize]
    public void InitTest()
    {
        _config = new Configuration();
        _config.Configure();
        _config.AddAssembly(typeof(Coil).Assembly);
        _sessionFactory = _config.BuildSessionFactory();
    }

    [TestMethod]
    public void TestMethod1()
    {
        using (var session = _sessionFactory.OpenSession())
        {
            Int32 coilid = 12189;
            Coil coil = session.Get<Coil>(coilid);
            Assert.AreEqual(coil.CoilNumber, "6FEB13");
        }
    }
} 
```

这是映射的相关部分：

```
<class name="Coil" table="COIL">
<id name="ID" column="COILID" type="integer">
  <generator class="hilo">
    <param name="table">DEFTAB</param>
    <param name="column">WERT1</param>
    <param name="max_lo">10</param>
    <param name="where">TBCODE='LFDNR' AND CODE='WGID'</param>
  </generator>
</id>
<property name="CoilNumber" column="COILNR" type="string" />
</class> 
```

当我尝试运行我的简单测试时，我得到一个 GenericADOException: could not load an entity。[SQL: SELECT ... WHERE coil0_.COILID=?] ---> System.Data.OleDb.OleDbException: 无效的程序绑定变量。

当我将 SELECT ... WHERE coil0_.COILID=12189 复制到 SQLbase 客户端时，查询成功且没有任何错误。问题是 NHibernate 不知何故没有将我的 id 变量放入查询中，而是简单地放入一个 ? 那里。

我只是在测试中使用了错误的语法还是有一些配置问题？

最后我的休眠配置文件是否有帮助：

```
 <session-factory>
<property  name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
<property name="dialect">NHibernate.Dialect.GenericDialect</property>
<property name="connection.driver_class">NHibernate.Driver.OleDbDriver</property>
<property name="connection.connection_string">Provider=SQLBASEOLEDB.1;Password=XXX;User ID=XXX;Data Source=XXX</property>
<property name="show_sql">true</property> 
```

同样，SQL 输出很好，但我不明白为什么 NHibernate 没有将我用于函数的 ID 放入 SQL 查询中。

编辑： COILID 是数据库表中的普通 INTEGER ，并且是 Coil 类中的 int 。

Edit2：这是堆栈跟踪

```
System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
System.Data.OleDb.OleDbCommand.ExecuteReader(CommandBehavior behavior)
System.Data.OleDb.OleDbCommand.System.Data.IDbCommand.ExecuteReader()
NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
NHibernate.Loader.Loader.GetResultSet(IDbCommand st, Boolean autoDiscoverTypes, Boolean callable, RowSelection selection, ISessionImplementor session)
NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, String optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, String optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
NHibernate.Loader.Entity.AbstractEntityLoader.Load(ISessionImplementor session, Object id, Object optionalObject, Object optionalId)
NHibernate.Loader.Entity.AbstractEntityLoader.Load(Object id, Object optionalObject, ISessionImplementor session)
NHibernate.Persister.Entity.AbstractEntityPersister.Load(Object id, Object optionalObject, LockMode lockMode, ISessionImplementor session)
NHibernate.Event.Default.DefaultLoadEventListener.LoadFromDatasource(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options)
NHibernate.Event.Default.DefaultLoadEventListener.DoLoad(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options)
NHibernate.Event.Default.DefaultLoadEventListener.Load(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options)
NHibernate.Event.Default.DefaultLoadEventListener.ProxyOrLoad(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options)
NHibernate.Event.Default.DefaultLoadEventListener.OnLoad(LoadEvent event, LoadType loadType)
NHibernate.Impl.SessionImpl.FireLoad(LoadEvent event, LoadType loadType)
NHibernate.Impl.SessionImpl.Get(String entityName, Object id)
NHibernate.Impl.SessionImpl.Get(Type entityClass, Object id)
NHibernate.Impl.SessionImpl.Get[T](Object id)
Tests.Hibernate.TestMethod1() in "D:\Hibernate.cs": Zeile 36 
```

线圈表的创建表语法如下：

```
CREATE TABLE COIL (
  COILID INTEGER NOT NULL, 
  COILNR VARCHAR(50), 
); 
```

Edit5：查询所有条目有效，但只要我想从表中获取特定条目，我就会得到？再次出错:(

```
var allCoils = session.CreateCriteria<Coil>().List<Coil>();
Coil datCoil = allCoils.First<Coil>(coil => coil.CoilNumber == "6FEB13");
Assert.AreEqual(datCoil.CoilNumber, "6FEB13"); 
```

这个测试至少是成功的

Edit6：问题似乎是nhibernate这样准备sql：

```
DEBUG NHibernate.SQL - SELECT coil0_.COILID as COILID1_0_, coil0_.COILNR as COILNR1_0_ FROM COIL coil0_ WHERE coil0_.COILID=?;p0 = 12189 
```

但是 SQLbase 想要准备好的字符串，比如

```
WHERE coil0_.COILID = :0
\
12189
/ 
```

我需要做些什么来改变 nhibernate 将绑定变量转换为 SQL 的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:26:32.240

我可以通过为 SQLBase 编写自己的驱动程序和方言（分别来自 OleDbDriver 和 GenericDialect）来解决这个问题。如果其他人需要它来使用带有 NHibernate 的 SQLBase，我可以发布代码。

# ember.js - ember js camelCase与snake_case中的正确模板名称约定

> ID：15367744
> 
> 赞同：3
> 
> 时间：2013-03-12T17:13:52.207
> 
> 标签：ember.js, ember-rails

我正在使用 ember js 构建一个带有 rails 作为后端的应用程序（我正在使用 ember-rails gem），并且我正在努力使用正确的方法来命名我的车把模板。什么是正确的约定？例如：

`/user_profiles/4/`我想我应该把我的模板放在正确的路线`user_profiles/show.hbs`上？或者应该是`userProfile/show.hbs`？

对于一个简单的模板也是如此，应该是`user_menu.hbs`还是`userMenu.hbs`（它们都为我工作）。但是，为了使用助手渲染它，我需要做：

```
{{render 'userMenu' }} 
```

正确使用我的 App.UserMenuController

那么我应该在每个地方都使用 camelCase 还是snake_case ？或两者兼有（camelCase 用于文件夹，snake_case 用于文件名）

有人可以帮助我理解它，因为在 ember 指南中，大多数都是简单的名称，比如`posts`或`comments`所以很难理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:27:38.470

> 我正在努力以正确的方式命名我的车把模板。什么是正确的约定？

大多数情况下，模板名称将与路由名称匹配。如果路由名称有 a `.`，则将其替换为 a并将路由名称`/`隐蔽为模板名称。有关更多示例，请参阅[命名约定指南](http://emberjs.com/guides/concepts/naming-conventions/)。`camelCase``under_scored`

> 我想对于路线 /user_profiles/4/ 我应该把我的模板放在 user_profiles/show.hbs 对吗？还是应该是 userProfile/show.hbs？

不知道你从哪里得到`show.hbs`。由于模板基于路由名称（而不是 url），因此无法分辨。假设您有这样的路线：

```
App.Router.map(function() {
  this.route('user_profile', { path: '/user_profiles/:user_profile_id' });
}); 
```

路由名称是“user_profile”，因此 Ember.js 将查找这些对象：

*   `App.UserProfileRoute`
*   `App.UserProfileController`
*   `user_profile`模板_

或者，您可以使用 路线名称`userProfile`，其他一切都将保持不变。

> 那么我应该在每个地方都使用 camelCase 还是snake_case ？或两者兼有（camelCase 用于文件夹，snake_case 用于文件名）

约定似乎`camelCase`适用于除模板路径（以及模板的文件夹名/文件名）之外的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T00:42:24.380

从 Ember 2.x 开始，命名约定为：

*   **烤肉串**
    *   文件名
    *   目录名称
    *   html 标签/ember 组件
    *   CSS 类
    *   网址
*   **骆驼香烟盒**
    *   JavaScript
    *   JSON

[http://ember-cli.com/user-guide/#naming-conventions](http://ember-cli.com/user-guide/#naming-conventions)

# android - Facebook 3.0 的片段登录问题

> ID：15367747
> 
> 赞同：0
> 
> 时间：2013-03-12T17:13:59.857
> 
> 标签：android, facebook, facebook-android-sdk

我正在尝试使用 Facebook 3.0 中的片段登录。我在片段中创建了一个图像按钮，它响应点击方法，如下所示：

OnCreateView 和 OnClickView 代码：

```
 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved){

    View v = inflater.inflate(R.layout.mefrag, group, false);
    ImageButton button = (ImageButton) v.findViewById(R.id.facebooklogin); 
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            loginToFacebook();

        }
    });
    return v;

} 
```

logintoFacebook 方法不会启动下一个活动。它只显示 fb 对话框，接受我的详细信息，然后再次显示片段。我在一个单独的活动中测试了这段代码，它工作正常，我只是不知道为什么它在这里不起作用。

脸书登录代码：

公共无效 loginToFacebook(){

```
 Session.openActiveSession(getActivity(), true, new Session.StatusCallback() {

      @Override
      public void call(Session session, SessionState state, Exception exception) {
        if (session.isOpened()) {

            Log.d("LOGIN", "activated session");
          // make request to the /me API
          Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

            // callback after Graph API response with user object
            @Override
            public void onCompleted(GraphUser user, Response response) {
              if (user != null) {

                Log.d("LOGIN", "activated on complete");

                  fbuserid = user.getId();
                  fbusername = user.getFirstName();  

                  SharedPreferences fbDetails = getActivity().
                      getSharedPreferences("fbDetails", Context.MODE_PRIVATE);
                  SharedPreferences.Editor editor = fbDetails.edit();
                  editor.putString(FB_USER, user.getFirstName());
                  editor.putString(FB_ID,user.getId());  
                  editor.putBoolean("logged in", true);
                  editor.commit();

                 loginFacebookKinveyUser();

                  Intent i = new 
                        Intent("com.example.chartviewer.MyArtistsActivity");

                  startActivityForResult(i, 1);

              }
            }
          });
        }
      }
    });

} 
```

有什么想法吗？

# bash - 将 Bash 配置文件从远程系统复制到某个行号点

> ID：15367750
> 
> 赞同：0
> 
> 时间：2013-03-12T17:14:02.523
> 
> 标签：bash, shell

我想将文件从远程机器复制到我的本地机器上，直到包含特定模式的第一行。

场景：使用远程 Bash 配置文件的一部分更新我的本地 Bash 配置文件，直到我的管理员验证它为止。

有没有比这个快速的“shell 脚本”破解更好的方法（我想可能有！）？

```
ssh tinosino@robottinosino-wifi cat /Users/tinosino/.profile | sed '/Verify this script further than this point/,$ d' > /home/tinosino/Desktop/tinosino_bash_profile.sh 
```

*   远程机器：robottinosino-wifi (OSX)
*   哨兵线：验证此脚本比此点更远

我可以使用基本的 shell 脚本，最好是在 Bash 中，因为它是默认的，或者是最常见的 diff/source-control bins..

你猜对了，这个想法最终是自动化这个过程。克朗？关于你将如何做到这一点的任何想法？我的 Bash 配置文件的开始应该来自服务器，“其余部分”是我可以自由定制的。

我的上一个失败的尝试：

*   使用`head`
*   使用过程替代`<( ... )`
*   使用`grep`
*   使用本地命名管道（这很有趣：命名管道需要一个程序来生成它的文本，执行类似于上面的 cat->sed 行）

**重要提示**：远程系统*最好***不要**遍历整个文件，而是在“看到”哨兵行时*截断*过滤器。如果模式在第 300 行，即 1,000,000,000 行。 300 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:40:41.920

问题是您的 sed 命令的结构是读取整个文件。

`sed -n '/Verify this script/q; p'`找到该行后，您可以使用to 来退出：

```
ssh tinosino@robottinosino-wifi cat /Users/tinosino/.profile | sed -n '/Verify this script/q; p' > /home/tinosino/Desktop/tinosino_bash_profile.sh 
```

或者不[使用 cat](http://partmaps.org/era/unix/award.html)，这在这种情况下不会产生显着差异，但是如果您以后想删除多个部分，它将传输更少的数据：

```
ssh tinosino@robottinosino-wifi "sed -n '/Verify this script/q; p' /Users/tinosino/.profile" > /home/tinosino/Desktop/tinosino_bash_profile.sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:41:07.020

只需在远程服务器上执行过滤。

```
ssh tinosino@robottinosino-wifi sed -n 'p;/Verify.../q' /Users/tinosino/.profile \
  >>/home/tinosino/Desktop/tinosino_bash_profile.sh 
```

`-n`flag 和`p`and`q`命令一起只打印直到但不包括以“Verify...”开头的第一行的行。

# scala - Scala 反射 AST 语法

> ID：15367754
> 
> 赞同：1
> 
> 时间：2013-03-12T17:14:18.407
> 
> 标签：scala, reflection, scala-2.10, toolbox

我正在尝试使用反射 API 手动生成 AST，使用 showRaw 给我一些关于所需语法的提示。这段代码：

```
object myfn extends Function2[ Double, Double, Double ] {
    def apply( x : Double, y : Double ) = x + y
}

val x = 0.0
println( showRaw( reify( myfn( x, x ) ).tree ) ) 
```

给出原始 AST 输出：

```
Apply(Select(Ident(myfn), newTermName("apply")), 
    List(Ident(newTermName("x")), Ident(newTermName("x")))) 
```

将原始输出的文字放回程序中不会编译：

```
val v = Apply(Select(Ident(myfn), newTermName("apply")), 
    List(Ident(newTermName("x")), Ident(newTermName("x"))))
// ^ doesn't compile 
```

因为 Ident 显然需要一个字符串作为参数。如果我传入字符串“myfn”，那么

```
val v = Apply(Select(Ident("myfn"), newTermName("apply")), 
    List(Ident(newTermName("x")), Ident(newTermName("x"))))

runtimeMirror( getClass.getClassLoader ).mkToolBox().eval( v ) 
```

它编译，但评估在运行时失败

```
"scala.tools.reflect.ToolBoxError: reflective compilation has failed: 
value apply is not a member of <notype>
[...] 
```

因此，原始 AST 输出中 myfn 的实际类型可能不是字符串，但从 API 文档中看不出它可能是什么。

那么，谁能告诉我如何构建所需的 AST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:22:43.140

我的做法略有不同——一个问题是该值`x`在全球范围内并不为人所知——所以我使用了可以轻松替换的常量值。另外我不知道您`myfn`是否在相对于`eval`调用的全局级别上定义。这里的小示例程序现在可以工作了（但是使用最新的 2.10.1-RC3 编译 - 也许已经修复了一些东西？）。

```
import scala.reflect.runtime.universe._
import scala.tools.reflect.ToolBox

object myfn extends Function2[Double, Double, Double] {
  def apply(x: Double, y: Double) = x + y
  def printTree {println(showRaw(reify(myfn(1.0, 2.0)).tree))}
}

object ReflectTest extends App {
  myfn.printTree // prints the tree that is used below - myfn is replaced with "myfn"
  val tb = runtimeMirror(getClass.getClassLoader).mkToolBox()
  println("result = " + tb.eval(Apply(Select(Ident("myfn"), newTermName("apply")), List(Literal(Constant(1.0)), Literal(Constant(2.0))))))
} 
```

**编辑**

在下面的评论之后，这里是包含另一个包的调用`mypackage`，它可能是包含点的任意包路径：

```
tb.eval(Apply(
  Select(Select(Ident(newTermName("mypackage")), newTermName("myfn")), newTermName("apply")), 
  List(Literal(Constant(1.0)), Literal(Constant(2.0))))) 
```

# android - jQtouch ..屏幕上没有显示任何内容

> ID：15367755
> 
> 赞同：0
> 
> 时间：2013-03-12T17:14:18.660
> 
> 标签：android, jquery, android-webview, jqtouch

我对 jQtouch 很陌生。我正在关注[本](http://ofps.oreilly.com/titles/9781449383268/chapAnimation.html#addingJqtToTheParty)教程。但是由于 jQtouch 的这个更新版本，我无法完全遵循它。我正在使用 eclipse 在 android 上开发应用程序。现在，这是我要运行的代码

```
 <html>
    <head>
        <!--<style type="text/css" media="screen">@import "themes/css/jqtouch.css";</style>
        <link type="text/css" media="screen" rel="stylesheet" href="themes/css/jqtouch.css" />
        <script src="src/lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="src/jqtouch.min.js" type="text/javascript" charset="utf-8"></script>-->

        <style type="text/css" media="screen">@import "themes/css/jqtouch.css";</style>
        <script src="src/lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="src/jqtouch.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="extensions/jqt.floaty.min.js" type="text/javascript" charset="utf-8"></script>

        <script type="text/javascript" charset="utf-8">
            var jQT = new $.jQTouch({
            icon: 'jqtouch.png',
            statusBar: 'black-translucent',
            preloadImages: []
        });
        <title>Kilo</title>
    </head>
    <body>

    <div id="home">
    <div class="toolbar">
        <h1>Kilo</h1>
    </div>
    <ul class="edgetoedge">
        <li class="arrow"><a href="#dates">Dates</a></li>
        <li class="arrow"><a href="#about">About</a></li>
    </ul>
    </div>
    </body>
</html> 
```

现在，我在 Eclipse 中没有任何错误。活动运作良好。但是由于一些未知的原因，我得到了一个空白页面。作为 jQtouch 的新手，如果我在复杂任务中遇到 jQtouch 问题，我可以直接切换到 jquery 框架之类的任何东西。谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:21:12.493

您没有关闭脚本标签

```
<script type="text/javascript" charset="utf-8">
    var jQT = $.jQTouch({
        icon: 'jqtouch.png',
        statusBar: 'black-translucent',
        preloadImages: []
    });
</script><!-- Close it --> 
```

**更新**

摆脱`new`. 遵循您正在制作自己的东西的示例。

如果您坚持使用正确的构造函数：

```
var jQT = new jQTouch({

   option: value

}); 
```

# python - "UnboundLocalError: local variable referenced before assignment" after an if statement

> ID：15367760
> 
> 赞同：42
> 
> 时间：2013-03-12T17:14:40.997
> 
> 标签：python

I have also tried searching for the answer but I don't understand the answers to other people's similar problems...

```
tfile= open("/home/path/to/file",'r') 

def temp_sky(lreq, breq):
    for line in tfile:
        data = line.split()
        if (    abs(float(data[0]) - lreq) <= 0.1 
            and abs(float(data[1]) - breq) <= 0.1):            
            T= data[2]
    return T
print temp_sky(60, 60)
print temp_sky(10, -10) 
```

I get the following error

```
7.37052488
Traceback (most recent call last):
File "tsky.py", line 25, in <module>
  print temp_sky(10, -10)
File "tsky.py", line 22, in temp_sky
  return T
UnboundLocalError: local variable 'T' referenced before assignment 
```

The first print statement works correctly but it won't work for the second. I have tried making T a global variable but this makes both answers the same! Please help!

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-12T17:17:00.113

Your `if` statement is always false and `T` gets initialized only if a condition is met, so the code doesn't reach the point where `T` gets a value (and by that, gets defined/bound). You should introduce the variable in a place that always gets executed.

Try:

```
def temp_sky(lreq, breq):
    T = <some_default_value> # None is often a good pick
    for line in tfile:
        data = line.split()
        if abs(float(data[0])-lreq) <= 0.1 and abs(float(data[1])-breq) <= 0.1:
            T = data[2]
    return T 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-24T19:33:42.770

FWIW: I got the same error for a different reason. I post the answer here not for the benefit of the OP, but for the benefit of those who may end up on this page due to its title... who might have made the same mistake I did.

I was confused why I was getting "local variable referenced before assignment" because I was calling a FUNCTION that I knew was already defined:

```
def job_fn(job):
  return job + ".job"

def do_something():
  a = 1
  b = 2
  job_fn = job_fn("foo")

do_something() 
```

This was giving:

```
UnboundLocalError: local variable 'job_fn' referenced before assignment 
```

Took me a while to see my obvious problem: I used a local variable named `job_fn` which masked the ability to see the prior function definition for `job_fn`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-12T17:37:57.323

The other answers are correct: You don't have a default value. However, you have another problem in your logic:

You read the same file twice. After reading it once, the cursor is at the end of the file, so trying to read it again returns nothing and the loop is never entered. To solve this, you can do two things: Either open/close the file upon each function call:

```
def temp_sky(lreq, breq):
    with open("/home/path/to/file",'r') as tfile:
        # do your stuff 
```

This has the disadvantage of having to open the file each time. The better way would be:

```
tfile.seek(0) 
```

You do this after your `for line in tfile:` loop. It resets the cursor to the beginning so the next call will start from there again.

Related questions:

*   [Iterating on a file doesn't work the second time](https://stackoverflow.com/q/10255273/4518341)
*   [Why a file is empty after reading it?](https://stackoverflow.com/q/28320658/4518341)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T17:28:32.827

Before I start, I'd like to note that I can't actually test this since your script reads data from a file that I don't have.

'T' is defined in a local scope for the declared function. In the first instance 'T' is assigned the value of 'data[2]' because the conditional statement above apparently evaluates to True. Since the second call to the function causes the 'UnboundLocalError' exception to occur, the local variable 'T' is getting set and the conditional assignment is never getting triggered.

Since you appear to want to return the first bit of data in the file that matches your conditonal statement, you might want to modify you function to look like this:

```
def temp_sky(lreq, breq):
    for line in tfile:
        data = line.split()
        if ( abs(float(data[0]) - lreq) <= 0.1 and abs(float(data[1]) - breq) <= 0.1):            
            return data[2]
    return None 
```

That way the desired value gets returned when it is found, and 'None' is returned when no matching data is found.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-11T04:26:17.463

I was facing same issue in my exercise. Although not related, yet might give some reference. I didn't get any error once I placed addition_result = 0 inside function. Hope it helps! Apologize if this answer is not in context.

```
user_input = input("Enter multiple values separated by comma > ")

def add_numbers(num_list):
    addition_result = 0
    for i in num_list:
        addition_result = addition_result + i
    print(addition_result)

add_numbers(user_input) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-19T01:23:55.230

Contributing to ferrix example,

```
class Battery():

    def __init__(self, battery_size = 60):
        self.battery_size = battery_size
    def get_range(self):
        if self.battery_size == 70:
            range = 240
        elif self.battery_size == 85:
        range = 270

        message = "This car can go approx " + str(range)
        message += "Fully charge"
        print(message) 
```

My message will not execute, because none of my conditions are fulfill therefore receiving " UnboundLocalError: local variable 'range' referenced before assignment"

```
def get_range(self):
    if self.battery_size <= 70:
        range = 240
    elif self.battery_size >= 85:
        range = 270 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-03-03T04:40:14.067

To Solve this Error just initialize that variable above that loop or statement. For Example `var a =""`

# yii - 在 dataProvider 中使用列别名

> ID：15367761
> 
> 赞同：1
> 
> 时间：2013-03-12T17:14:41.940
> 
> 标签：yii, dataprovider

在我的模型中，我有一个`relation()`这样的。

```
 'notRelUser' => array(
            self::HAS_MANY,
            'LocationUser',
            'location_id',
            'condition' => 'notRelUser.status is null',
            'on' => 'notRelUser.user_id = ' . Yii::app()->user->getId(),
            'with' => array('parent_location'),
            'select' => array('*', 'name AS canApply'),
        ), 
```

和这个

```
public $canApply; 
```

在我的控制器中，我有这个

```
 $regions = Location::model()->with('notRelUser')->findAll();
    $arrayCanApply = new CArrayDataProvider($regions); 
```

然后我试图在 datagrid 的小部件中打印出**canApply的值**

```
<?php $this->widget('bootstrap.widgets.TbGridView', array(
'dataProvider'=>$arrayCanApply,
'columns'=>array(
    array('name'=>'name', 'header'=>'Name'),
    array('name' => 'canApply', 'value'=>'$data->canApply', 'header'=>'CanApply'),
 ),
 )); 
```

但是带有 canApply 的列是空的。

我也试过没有这个`$data->`部分。

如何打印此别名？

（我知道别名的值很简单，但我稍后会更改）

**更新：**

我可以通过使用 select in 来获得价值`CDbCriteria`- 但我想这样做。

这确实有效。

```
$criteria = new CDbCriteria;
$criteria->select = '("foobar") AS canApply';
$regions = Location::model()->with('notRelUser')->findAll($criteria); 
```

但是我每次都必须创建一个 $criteria 似乎很奇怪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:25:08.370

你需要声明 can canApply 作为模型的属性

在你的模型 decalare canApply 作为属性

```
public $canApply; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T08:59:52.177

我也有同样的问题。尝试`'value'=>'$data->notRelUser->canApply'` 代替`'value'=>'$data->canApply'`. 另外，您需要声明属性

```
public $canApply; 
```

在您的`LocationUser`模型中，而不是在`Location`模型中。

# r - 在 geom_boxplot 中包含填充美学中使用的缺失因子水平的空间

> ID：15367762
> 
> 赞同：17
> 
> 时间：2013-03-12T17:14:42.843
> 
> 标签：r, ggplot2, boxplot

我正在尝试在 R 中绘制一个盒子和胡须图。我的代码如下。目前，因为我在两个站点之一中只有两个月的数据，所以该站点的条形更宽（因为月份的第三个级别被删除）。

相反，我希望站点的框模式与站点的框相同`A`（`B`即右侧有一个空框的空间）。`drop=TRUE`当我只有一个因素但似乎无法使用“填充”因素时，我可以轻松做到这一点。

```
Month=rep(c(rep(c("Jan","Feb"),2),"Mar"),10)
Site=rep(c(rep(c("A","B"),each=2),"B"),10)
factor(Month)
factor(Site)
set.seed(1114)
Height=rnorm(50)
Data=data.frame(Month,Site,Height)
plot = ggplot(Data, aes(Site, Height)) +
       geom_boxplot(aes(fill=Month, drop=TRUE), na.rm=FALSE)
plot 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-12T18:10:33.460

这是一个基于创建假数据的解决方案：

首先，将新行添加到数据框中。它包含不存在的因子水平组合的数据点 (`Mar`和`A`)。的值`Height`必须超出真实`Height`数据的范围。

```
Data2 <- rbind(Data, data.frame(Month = "Mar", Site = "A", Height = 5)) 
```

然后，可以生成图。由于假数据不应该是可见的，因此必须使用`coord_cartesian`原始`Height`数据的范围来修改 y 轴范围。

```
library(ggplot2)
ggplot(Data2, aes(Site, Height)) +
  geom_boxplot(aes(fill = Month)) +
  coord_cartesian(ylim = range(Data$Height) + c(-.25, .25)) 
```

![在此处输入图像描述](../Images/48aee354325e9346152cdd4069f39e14.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-12T17:47:59.190

实现所需外观的一种方法是更改​​绘图时生成的数据。

首先，将绘图保存为对象，然后使用`ggplot_build()`将绘图数据的所有部分保存为对象。

```
p<-ggplot(Data, aes(Site, Height,fill=Month)) + geom_boxplot()
dd<-ggplot_build(p) 
```

列表元素数据包含用于绘图的所有信息。

```
dd$data

[[1]]
     fill      ymin      lower     middle      upper      ymax  outliers notchupper notchlower    x PANEL
1 #F8766D -1.136265 -0.2639268  0.1978071  0.5318349 0.9815675            0.5954014 -0.1997872 0.75     1
2 #00BA38 -1.264659 -0.6113666  0.3190873  0.7915052 1.0778202            1.0200180 -0.3818434 1.00     1
3 #F8766D -1.329028 -0.4334205  0.3047065  1.0743448 1.5257798            1.0580462 -0.4486332 1.75     1
4 #00BA38 -1.137494 -0.7034188 -0.4466927 -0.1989093 0.1859752 -1.759846 -0.1946196 -0.6987658 2.00     1
5 #619CFF -2.344163 -1.2108919 -0.5457815  0.8047203 2.3773189            0.4612987 -1.5528617 2.25     1
  group weight ymin_final ymax_final  xmin  xmax
1     1      1  -1.136265  0.9815675 0.625 0.875
2     2      1  -1.264659  1.0778202 0.875 1.125
3     3      1  -1.329028  1.5257798 1.625 1.875
4     4      1  -1.759846  0.1859752 1.875 2.125
5     5      1  -2.344163  2.3773189 2.125 2.375 
```

您对`x`,`xmax`和`xmin`价值观感兴趣。前两行对应于 level `A`。这些值应该改变。

```
dd$data[[1]]$x[1:2]<-c(0.75,1)
dd$data[[1]]$xmax[1:2]<-c(0.875,1.125)
dd$data[[1]]$xmin[1:2]<-c(0.625,0.875) 
```

现在使用`ggplot_gtable()`和`grid.draw()`绘制更改的数据。

```
library(grid)
grid.draw(ggplot_gtable(dd)) 
```

![在此处输入图像描述](../Images/e1ca80d0a7b53b1906cd2431d7a8f2d5.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-09T14:04:57.007

现在有一种简单的方法可以在此处使用“保留”的位置执行[此](https://github.com/tidyverse/ggplot2/issues/1935)操作。对于上面的情节，这将是：

```
Month = rep(c(rep(c("Jan", "Feb"), 2), "Mar"), 10)
Site = rep(c(rep(c("A", "B"), each = 2), "B"), 10)

factor(Month)
factor(Site)

set.seed(1114)

Height = rnorm(50)
Data = data.frame(Month, Site, Height)

plot = ggplot(Data, aes(Site, Height)) +
  geom_boxplot(
    aes(fill = Month, drop = TRUE),
    na.rm = FALSE,
    ## Note:
    position = position_dodge(preserve = 'single')
  )
plot 
```

[![阴谋](../Images/3b5c79518408e52763ab248071e9822a.png)](https://i.stack.imgur.com/E3YdM.png)

# java - Jsoup：select(div[class=rslt prod]) 在不应该的时候返回 null

> ID：15367765
> 
> 赞同：3
> 
> 时间：2013-03-12T17:14:45.990
> 
> 标签：java, select, jsoup

我正在尝试从此页面[http://www.amazon.fr/s/field-keywords=samsung选择带有 class="rlts prod" 的所有 div](http://www.amazon.fr/s/field-keywords=samsung)

```
Document doc = Jsoup.connect("http://www.amazon.fr/s/field-keywords=samsung").get();
Elements divProd = doc.select("div[class=rslt prod]");      
System.out.println("\nsize: "+divProd.size()); 
```

但它返回 0，它不应该，知道为什么吗？

应该选择的示例：

```
<div id="result_4" class="rslt prod" name="B006O9QNHU">
[...]
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:50:18.610

您必须更改*用户代理*，否则您将获得与亚马逊不同的网站。

```
Document doc = Jsoup.connect("http://www.amazon.fr/s/field-keywords=samsung")
        .userAgent("Mozilla/17.0") // you can use any other user agent here
        .get();

for( Element element : doc.select("div[class=rslt prod]") )
{
    System.out.println(element);
    System.out.println("");
} 
```

现在输出是一个类似的列表

```
<div id="result_1" class="rslt prod" name="B007XOM6SU"> 
  ...
</div>

<div id="result_2" class="rslt prod" name="B006SXSF4Q"> 
  ...
</div>

... 
```

# regex - Notepad++ 查找字符串并将其附加到行尾

> ID：15367773
> 
> 赞同：3
> 
> 时间：2013-03-12T17:15:30.110
> 
> 标签：regex, notepad++

我正在寻找有关 Notepad++ 正则表达式的帮助。我有一个与此类似的文件：

`(Donner, 1987) XviD, DVD/3, AC3 ITA - MP3 ENG, Subs, AVI`

我想找到字符串`DVD/3`并将其移动到行尾。字符串可能会有所不同，但我知道如何找到它。

我怎样才能在记事本++中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:18:12.997

假设这`, DVD/3`是找到你的字符串的正则表达式，搜索

```
(.*)(, DVD/3)(.*) 
```

并将其替换为

```
\1\3\2 
```

# java - 使用三元运算符时出错

> ID：15367777
> 
> 赞同：3
> 
> 时间：2013-03-12T17:15:43.437
> 
> 标签：java, eclipse

我正在使用 Eclipse Juno 编写我的代码，并且我正在使用哈希表来设置我的 dataImportObject，具体取决于其中的条目。谁能告诉我这有什么问题： `ht`我的哈希表`<String, Integer>`中是否有对

```
(ht.containsKey("DEVICE_ADDRESS")) ? 
    dataImportObject.setDevice_Address(dataitems[ht.get("DEVICE_ADDRESS")]) : 
    dataImportObject.setDevice_Address(""); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T17:19:04.450

> 谁能告诉我这有什么问题

两件事情：

*   条件运算符不能单独用作语句，只能用作表达式
*   我假设这些`set`方法具有 void 返回类型，因此它们不能作为条件运算符中的操作数出现

三个选项：

1.  使用`if`语句：

    ```
    if (ht.containsKey("DEVICE_ADDRESS")) {
         dataImportObject.setDevice_Address(dataitems[ht.get("DEVICE_ADDRESS")]));
    } else {
         dataImportObject.setDevice_Address("");
    } 
    ```

2.  *事先在*调用中使用条件运算符，`setDevice_Address`甚至更清楚：

    ```
    String address = ht.containsKey("DEVICE_ADDRESS") 
        ? dataitems[ht.get("DEVICE_ADDRESS")] : "";
    dataImportObject.setDevice_Address(address); 
    ```

3.  如果你知道你的哈希表不会有任何空值，你可以避免双重查找：

    ```
    Integer index = ht.get("DEVICE_ADDRESS");
    String address = index == null ? "" : dataitems[index];
    dataImportObject.setDevice_Address(address); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:20:04.853

您不能将三元条件的返回类型设置为 void。

使用 if else 。

[可能重复](https://stackoverflow.com/questions/9450864/java-ternary-with-no-return-for-method-calling)

# android - Facebook Android SDK 3.0 调用只显示白屏

> ID：15367778
> 
> 赞同：0
> 
> 时间：2013-03-12T17:15:44.237
> 
> 标签：android, facebook, facebook-android-sdk, apk, android-facebook

我对 Facebook Android SDK 3.0 有很多问题——很多。这是一个特别烦人的问题：我已将 Facebook 项目添加到我的工作区并将其链接到我的 Android 应用程序。现在，当我导出我的应用程序时（通过右键单击 Eclipse 中的项目，选择*Android Tools*选项，然后单击*Export Signed Application Package*），我签名的应用程序包导出正常。然而，我注意到大约 50% 的时间我导出我的 APK，然后当我使用此 APK 发出任何 Facebook SDK 请求（如打开会话或请求额外权限或类似的东西）时，我只是得到一个显示无限期挂起的进度条，如下...

![](../Images/b229f7ad31a4164691fa952329fe8654.png)

它一直挂在那里，直到我按下设备的`Back`按钮，此时我得到一个`SessionState.CLOSED_LOGIN_FAILED`会话回调。基本上，它几乎建立在几乎所有其他出口的基础上。有没有其他人遇到过这种情况或知道我该如何阻止这种情况发生？在我获得一个好的 APK 之前，必须构建两到三次非常非常耗时。我正在刷新工作区中的项目并每次都执行*Project -> Clean -> Clean all projects*，即使这样也没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:59:16.940

最近几次我不得不导出已签名的应用程序包时，我所做的是转到我的项目属性，打开 Android 选项，删除 Facebook 库引用，然后重新添加它。我已经连续五个良好的出口这样做了，所以我猜这可以解决问题！

# r - 如何使用 igraph 或 tnet 在 R 中创建二分网络

> ID：15367779
> 
> 赞同：9
> 
> 时间：2013-03-12T17:15:48.543
> 
> 标签：r, igraph, sna

我有一个双模式网络的边缘列表，类似于：

```
person  Event
Amy     football_game
Sam     picnic
Bob     art_show 
```

我想在 R 中对此进行分析，但似乎我尝试的一切都失败了。将其转换为单一模式网络会遇到内存限制，我无法弄清楚如何在 igraph 或 tnet 中将其分析为二分。

在 igraph 中，`bipartite.projection`给了我所有`FALSE`，在使用创建的 igraph 对象上

```
net <- graph.edgelist(myobject) 
```

在 tnet 上，我无法将 igraph 网络转换为 tnet 网络，并且当我尝试使用原始数据帧时，它会因为图中的重复而拒绝。

因此，我们将非常感谢您对以下任何问题的回答：

1.  如何使用该`bipartite.mapping`功能？
2.  如何将 igraph 对象输入 tnet？
3.  如果一切都失败了，我该如何将具有重复边的数据框输入到 tnet 中？

抱歉，如果这些是基本问题，但文档很少。

## 编辑

例子：

```
edgelist <- read.table(text="Person    Event
                             Amy       football
                             Bob       picnic
                             Sam       artshow", 
                       header=TRUE)
edgelist <- as.matrix(edgelist)

## Igraph Issues
igraph <- graph.edgelist(edgelist)
typevector <- bipartite.projection(igraph) 
# gets all FALSE

edgelist2 <- get.edgelist(igraph)
typevector <- bipartite.projection(edgelist2) 
# same thing

## tnet issues
tnet <- as.tnet(edgelist) 
# gives error: "There are duplicate events in the edgelist"
tnet <- as.tnet(edgelist2)
clusterMat <- clustering_local_tm(tnet)  
# gives error: "max not meaningful for factors"

onemode <- projecting_tm(tnet, method="Newman") 
# gives error: "arguments must have same length" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-13T18:08:34.430

在 igraph 中，二分网络是具有`type`顶点属性的网络。此属性必须是逻辑的，并且必须`TRUE`适用于其中一种节点类型和`FALSE`其他节点类型。因此，要从边缘列表创建二分网络，您只需创建一个常规图，然后添加`type`顶点属性：

```
edgelist <- read.table(text="Person    Event
                         Amy       football
                         Bob       picnic
                         Sam       artshow", 
                   header=TRUE)
igraph <- graph.data.frame(edgelist)

V(igraph)$type <- V(igraph)$name %in% edgelist[,1]
igraph
# IGRAPH DN-B 6 3 -- 
# + attr: name (v/c), type (v/x) 
```

“B”字母告诉您这是一个二分图。您可以通过以下方式创建此网络的单部分投影：

```
bipartite.projection(igraph)
# $proj1
# IGRAPH UN-B 3 0 -- 
# + attr: name (v/c), type (v/x)
#
# $proj2
# IGRAPH UN-B 3 0 -- 
# + attr: name (v/c), type (v/x) 
```

This will return a list of two graphs. If you think that the projection might be too big, you can first call the `bipartite.projection.size` function, this will give you the number of vertices and edges in both projections. The memory requirement for an igraph graph is (4m+2n)*8+O(1) bytes, where 'n' is the number of vertices and 'm' is the number of edges.

# html-table - 在保存表格方面需要帮助

> ID：15367780
> 
> 赞同：-1
> 
> 时间：2013-03-12T17:15:50.283
> 
> 标签：html-table, html-email

我被要求为我的公会在 swtor 上为公会成员盔甲创建一个表，我希望能够设置它以便保存。我尝试使用 html 样式的电子邮件，但它一直是空白的。

1.  直接在页面本身上更新。
2.  通过电子邮件将数据发送给我自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:26:56.090

由于您无法在 HTML 中做您想做的事情，我建议您访问这些网站以获取有关 PHP、MySQL 数据库和 XAMPP Web 服务器的教程：

php： http: [//php.net/manual/en/tutorial.php](http://php.net/manual/en/tutorial.php)

MySQL：[http ://dev.mysql.com/doc/refman/5.0/en/tutorial.html](http://dev.mysql.com/doc/refman/5.0/en/tutorial.html)

XAMPP： http: [//www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)

您将能够将表保存在数据库中并使用 PHP 通过电子邮件发送。

# ruby-on-rails - Rails 远程：仅当通过 ajax 请求时才为真

> ID：15367784
> 
> 赞同：1
> 
> 时间：2013-03-12T17:16:03.197
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我已经让我的应用程序在没有 AJAX 的情况下按我想要的方式工作。

我现在将 AJAX 添加到带有“添加项目”按钮的项目列表页面。

通常，单击“添加项目”只会转到新项目页面，但使用 ajax 会将新项目表单注入页面。在提交时，它会更新列表。这也一切正常。

但是，如果我直接访问新项目页面，在提交表单时它仍然会触发 javascript。如果我在表单页面本身，我想避免任何 AJAX 表单提交。

`remote => true`如果页面已通过 AJAX 请求，是否可以仅添加到我的表单标签？

（...或建议更好的方法来做到这一点）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:19:09.563

`request.xml_http_request?`将告诉您是否正在提供 ajax 请求：

```
<% if request.xml_http_request? %>
....
<% end %> 
```

# php - 将变量替换为多行 shell 变量

> ID：15367796
> 
> 赞同：1
> 
> 时间：2013-03-12T17:16:30.810
> 
> 标签：php, sql, shell, variables, multiline

我通过将数据库中的一些行读取到名为 EMAIL_DESC 的多行 shell 变量中来构建电子邮件消息：

```
EMAIL_DESC=`run "select text from  ETL.MAIL_TEXT where ID=1 order by id, text_order"` 
```

不幸的是，我在 $EMAIL_DESC 中有变量和命令 ( `date`)，但我无法以任何方式替换它们。

```
echo "$EMAIL_DESC"
Please be aware that all user tables and views on the $SERVER_DESC
Ended = `date`. 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:09:20.737

问题不是很清楚。但无论我能理解什么，我认为你在这里寻找邪恶的评估。考虑一下：

```
x='Foo
Bar
$HOME
Baz
$SHELL'

echo $x
eval echo $x 
```

### 输出：

```
Foo Bar $HOME Baz $SHELL
Foo Bar /home/alex Baz /bin/bash 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:33:21.677

我找到了解决方案。

在数据库中每一行的末尾，我必须添加“\\n”（换行符），并且我必须更改 eval 以接受来自 echo (-e) 的额外参数：

```
eval "echo -e "${EMAIL_DESC}" " 
```

再次感谢亚历克斯

# .net - 更改一个类的服务接口是否需要更新所有类的服务引用？

> ID：15367797
> 
> 赞同：1
> 
> 时间：2013-03-12T17:16:31.440
> 
> 标签：.net, wcf

我相信我的问题的答案是否定的，但我想仔细检查一下。

我有一个我不久前写的 WCF 服务，现在在 .NET 4.0 中，我正在使用 VS 2010 对其进行编辑。解决方案的名称是 ASICommon2，它有各种名为 Checkout 的服务 (.svc) 类.svc、SelectClients.svc、MRU.svc 等。我对 MRU.svc 服务和它的接口进行了一些必要的更改，我已经完成了。这些更改不会影响此解决方案中的任何其他服务。现在，回到 MTS/COM+ 时代，像这样的任何更改都意味着整个解决方案（在这种情况下为 ASICommon2）会破坏二进制兼容性，因此必须进行新的引用，等等。但我想知道这是否有必要对于使用 ASICommon2 的某些服务而不是 MRU.svc 服务的任何客户端？在 Visual Studio 项目中设置服务引用时，不要将其设置为 ASICommon2；您将其设置为 ASICommon2/Checkout.svc（例如）。所以，就像我说的，我怀疑不需要对服务进行必要的更改，只要该服务引用不是 ASICommon2/MRU.svc。

我对此是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:38:48.083

如果您更改了公共依赖项中的某些内容（例如更改所有服务通用的数据提供者或实体），您必须更新其他人的唯一原因。

否则，如果更改与 MRU 严格隔离，那么这就是需要更新的全部内容。

# ios - 无法让 postnotification 正常工作

> ID：15367798
> 
> 赞同：0
> 
> 时间：2013-03-12T17:16:37.120
> 
> 标签：ios, notifications, nsnotification

我正在尝试使用 postnotification 但无法正确实施。这就是我所拥有的：

在 ViewControllerOne.m

```
NSLog(@"PostNotification");
[[NSNotificationCenter defaultCenter] postNotificationName:@"Connectivity" object:nil]; 
```

在 ViewControllerTwo.m

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    NSLog(@"Added Obeserver");

    [[NSNotificationCenter defaultCenter] addObserver:self selector: @selector(connectedTo:) name:@"Connectivity" object: nil];

}

-(void)connectedTo:(NSNotification *)notification
{
    m_connectivity = @"Connected";
} 
```

似乎没有调用 connectedTo 函数。这是因为：

在代码的另一部分：

```
if ([m_connectivity isEqualToString:@"Connected"])
{
       NSLog(@"Connected");
}
else
{
     NSLog(@"NotConnected");
} 
```

不知道我的错误是什么。需要一些指导...谢谢..

编辑：

ViewControllerOne.m 是其他视图控制器子类的类。它检查连接性，连接后，我需要通知另一个视图控制器（ViewControllerTwo）我已连接并根据连接性采取必要的措施。因此，当连接发生变化时，将发布通知，但此时可能尚未初始化视图控制器......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:22:21.373

由于 ViewControllerTwo 是 ViewControllerOne 的子类，因此您可以在 ViewControllerOne 中拥有一个基于连接状态返回 BOOL 的方法。您可以在 ViewControllerTwo 的 viewDidAppear 方法中调用此方法来检查 ViewControllerTwo 首次出现在屏幕上时的状态。如果需要，您仍然可以使用通知来在连接状态更改时更新 ViewControllerTwo。或者，您可以在要执行任何需要连接的操作时调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:00:28.183

您是否尝试过发布通知的替代语法，例如：

```
[[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:@"HandleOpenURL" object:nil]]; 
```

postNotification 方法接受一个 NSNotification 对象，而不是一个 NSString。

# html - 杂散结束标签“头”

> ID：15367800
> 
> 赞同：8
> 
> 时间：2013-03-12T17:16:41.907
> 
> 标签：html, netbeans, tags

我有以下html5代码：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="Style.css" rel="stylesheet" type="text/css"> 
    <title>Catalogo Dischi</title>
        <p class="title"> Catalogo Dischi </p>
    <a id="index">
        <p class="subtitle">Indice</p>
    </a>
    <p class="text">
        <a href="#classic">Musica Classica</a>
        <br/>
        <a href="#jazz">Musica Jazz</a>
        <br/>
        <a href="#country">Musica Country</a>
    </p>
</head> 
```

**代码在 html 标签内**。我不明白这个错误的原因，我关闭了除了meta和link之外的所有标签，无法关闭，这是什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T17:20:25.333

您需要了解 -`<head>`元素定义了浏览器使用的属性，但在页面中不直接可见。该`<title>`属性定义浏览器选项卡上显示的标题。

关闭`<head>`标签后，您应该打开`<body>`标签，页面中显示的所有内容都应该在其中。

有关这些元素的基本介绍，另请参阅[http://reference.sitepoint.com/html/page-structure](http://reference.sitepoint.com/html/page-structure)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T17:21:16.410

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="Style.css" rel="stylesheet" type="text/css"> 
    <title>Catalogo Dischi</title>

</head>

<body>

    <p class="title"> Catalogo Dischi </p>
    <a id="index">
        <p class="subtitle">Indice</p>
    </a>
    <p class="text">
        <a href="#classic">Musica Classica</a>
        <br/>
        <a href="#jazz">Musica Jazz</a>
        <br/>
        <a href="#country">Musica Country</a>
    </p>
</body> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T17:18:21.703

您需要`head`在标题后关闭标签并将您的内容包装在`body`标签中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-09T12:15:33.193

如果头部有类型或双标签问题，则可能会发生错误。假设标题是这样的

```
 <title> Foundation </title>> 
```

然后会出现杂散的结束标签“head”，包括正文中的错误

如果页面在 Chrome 中打开，那么它将在“正文”标签之后添加一个 >

```
<body>
">" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T17:30:36.600

在您的代码中`<p>`，`<head>`当

开始它表示身体部位，但之后

所有东西都在身体下面，所以关闭`</head>`是一个错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-20T17:41:56.090

这是你的字符集 `charset=UTF-8"`，它在一开始就丢失了`"`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-05T12:01:59.013

我通过对我的代码执行此操作解决了我的问题，我向您展示了标签示例，这样您就可以看到我对标签做了什么。

因此使用链接标签将是：

```
<link href='https://fonts.googleapis.com/css?family=Aclonica%7cPlayfair+Display' rel='stylesheet'/> 
```

注意最后链接标签以 /> 结尾

# ios - 开发自定义 ios/ipad 应用程序以访问 Active Directory 中的 windows 共享文件夹

> ID：15367802
> 
> 赞同：1
> 
> 时间：2013-03-12T17:16:46.933
> 
> 标签：ios, ipad, active-directory, cifs, shared-directory

这是一个广泛的问题，所以我不希望有任何明确/准确的答案。我只想要想法。

我需要开发一个自定义 iPad 应用程序以从 Active Directory 中的 Windows 共享文件夹访问文档（上传/下载），同时保留用户权限/访问权限。这些是我的想法：

*   首先，我查看了开源项目 seafile。它基本上是一个与 windows 文件夹同步的存储库，但它以自己的方式管理用户权限。
*   其次，我想在我的应用程序上实现 cifs 协议。但我读过它是一个很难实现的协议。
*   第三，我想在服务器上运行一个可以访问活动目录的应用程序并实现 iPad 和服务器应用程序之间的连接，所以我摆脱了 cifs 协议。

我不知道如何处理这个问题，因为在 1-2 个月的时间表中，这似乎是一项艰巨的任务。我可以使用一些开源工具/应用程序/项目吗？任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-01T18:31:15.327

至少有一个适用于 iPad 的应用程序可用于访问 Windows 共享。FileExplorer，由 Steven Chang 开发。使用安装在 iPad 或 iPhone 中的应用程序，您可以访问网络中的任何 Windows 共享，甚至通过 iOS VPN。我每天都在使用它，您希望在其中访问文件，甚至将它们下载到应用程序本身的本地文件夹中。

最好的问候：一月

# php - MySQL 在同一个表上的多个连接在 while 循环中只选择 1 行

> ID：15367805
> 
> 赞同：0
> 
> 时间：2013-03-12T17:16:59.863
> 
> 标签：php, mysql, left-join

表“posts”包含文章和对每篇文章发表评论的人的最后 3 个用户 ID（us1、us2、us3）。我需要加入“usertable”以获取最后评论海报的名称。这是我的查询：

```
$result = mysql_query("SELECT m.id, m.comment, m.us1, m.us2, m.us3,p.name,o.name,t.name,
FROM posts m 
LEFT JOIN usertable p ON m.us1=u.id
LEFT JOIN usertable o ON m.us2=u.id
LEFT JOIN usertable t ON m.us3=u.id   

where m.lid = '$pid' order by m.id desc limit 0,20")  or die('Error');

while(list($id, $comment, $us1, $us2, $us3, $name1, $name2, $name3) = mysql_fetch_row($result)) {
echo "$id<br />";
} 
```

不幸的是，这个结果的“回声”是：

```
79
79
79
79
79... 
```

“79”是“posts”表中最后一行的ID。那么，为什么这个查询的结果只是从“posts”中选择了一行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:46:30.720

当此图中没有表“U”时，您的 SQL 引用“u.id”存在问题。尝试：

```
SELECT m.id, m.comment, m.us1, m.us2, m.us3, p.name, o.name, t.name
FROM posts m 
LEFT JOIN usertable p ON m.us1=p.id
LEFT JOIN usertable o ON m.us2=o.id
LEFT JOIN usertable t ON m.us3=t.id 
```

此外，切换到 mysqli_* 函数而不是 mysql_ 因为 mysql 扩展已被弃用并且很快将被删除。PDO 也值得一看。在 php.net 上检查这两个。

# java - 如何在Java中将节点与下一个节点链接

> ID：15367810
> 
> 赞同：1
> 
> 时间：2013-03-12T17:17:23.030
> 
> 标签：java

我将从创建头节点开始：

```
Node head = new Node(); 
```

将头节点链接到下一个节点。我将分配给节点对象中节点类型的字段

零是代表节点的编号。这个节点是零号。

```
Node node = new Node(0,head);

public class Node {

  private Object data;
  private Node next;

  public Node()
  {
    data = null;
    next = null;
  }

  public Node(Object x)
  {
    data = x;
    next = null;
  }

  public Node(Object x, Node nextNode)
  {
    data = x;
    next = nextNode;
  }
} 
```

这是将节点链接在一起的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:29:47.710

我通常看到的方式是使用 LinkedList。

```
public class Node {
    public Object data;
    public Node next = null;

    Node(data) {
        this.data = data;
    }
}

class LinkedList{
    public Node head = null;
    public Node end = null;

    void insert(Object data) {
        if(head == null) {
            head = new Node(data);
            end = head;
        } else {
            end.next = new Node(data);
            end = end.next;
        }
    }
} 
```

用法如下：

```
LinkedList= new LinkedList();
list.insert(2);
list.insert(3);
list.head; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:21:34.040

在Java 中，您通过引用（即指针）来引用所有对象。处理实际值的唯一时间是原始类型。

这样做`next = nextNode`会导致`next`指向所指向的相同位置`nextNode`。

**TL;博士;** 是的。:)

# vb6 - VB6 DatePicker 语言格式

> ID：15367811
> 
> 赞同：0
> 
> 时间：2013-03-12T17:17:25.947
> 
> 标签：vb6, datepicker

我有具有“dd-MMM-yyyy”格式的日期选择器控件的 VB6 应用程序现在当用户将区域设置设置为法语时，月份以法语显示。不幸的是，我正在使用输入日期查询 Oracle 数据库，如果月份是用法语设置的，它会给出无效的月份错误 (ORA-01843)。我不想更改区域设置，我的公司设置为“dd-MMM-yyyy”格式

无论如何在日期选择器上显示英文月份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-26T08:38:36.190

使用 ISO-8601 日期格式。

格式：'1994-11-05T13:15:30'。

看网页： [https ://www.w3.org/TR/NOTE-datetime](https://www.w3.org/TR/NOTE-datetime)

# excel - Excel求和和过滤

> ID：15367813
> 
> 赞同：-2
> 
> 时间：2013-03-12T17:17:35.087
> 
> 标签：excel

我有一个 3 列的 excel 表。
Column1 是 ClientName，column2 是 Desrciption，column 3 是对应描述的数字。
我需要使用过滤器或 for 循环对与 ClienName 的每个描述相对应的数字求和。

换句话说：

```
col1       col2      col3
Jason      Cash      20
Jason      Cash      30
Jason      Cash      10
Jason      Credit    20
Jason      Credit    40      
John       Cash      20
John       Cash      10
John       Credit    30
John       Credit    20
Mary       Cash      50
Mary       Cash      20
Mary       Credit    20
Mary       Credit    100
Mary       Credit    200 
```

我需要这样的结果

```
Jason   CashTotal    CreditTotal  
John    CashTotal    CreditTotal    
Mary    CashTotal    CreditTotal 
```

这如何在 Excel 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:33:15.023

好吧，看起来你想要一个 SumIf 或 SumIfs。我仍在尝试测试一个示例以查看如何使其正常工作，但这至少足以让您开始自己挖掘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:03:25.973

我这样解决了

```
F2 = Jason
F3 = John
F4 = Mary 
```

代码：

```
G2 (copied down) =SUMIFS($C$2:$C$15,$A$2:$A$15,$F2,$B$2:$B$15,"Cash")

H2 (copied down) =SUMIFS($C$2:$C$15,$A$2:$A$15,$F2,$B$2:$B$15,"Credit") 
```

# variables - 生成线程后 gdb 无法访问变量

> ID：15367815
> 
> 赞同：2
> 
> 时间：2013-03-12T17:17:38.893
> 
> 标签：variables, gdb, pthreads, gdbserver

在从旧开发板迁移到新开发板（带有 ARM cortex A9 的 iMX6 saber lite 板）后，我正在尝试调试应用程序。我还在主机上运行 gdb 并在开发板上运行 gdbserver，如 __answer__ 部分中所述，[如何更改 gdb 在交叉（ARM）调试中使用的运行时库（libc、ld 等）](https://stackoverflow.com/questions/15298377/how-can-i-change-the-runtime-libraries-libc-ld-etc-used-by-gdb-in-cross-arm/15301872?noredirect=1#comment21601674_15301872)

在尝试运行应用程序并执行创建线程的步骤时，我得到了这个：

```
(gdb) 
681             if (pthread_create(&serial_thread, &attr_detach, read_serial, argv[1]) != 0){
(gdb) 
    Cannot remove breakpoints because program is no longer writable.
    Further execution is probably impossible.
0x00023308 in main (
    argc=<error reading variable: Cannot access memory at address 0x7efffc8c>, 
    argv=<error reading variable: Cannot access memory at address 0x7efffc88>)
    at main_process/main_process.c:681
681             if (pthread_create(&serial_thread, &attr_detach, read_serial, argv[1]) != 0){
    warning: Error removing breakpoint 0
    Cannot access memory at address 0x7efffc88
(gdb) info threads
      Id   Target Id         Frame 
    * 1    Thread 2588.2588  0x00023308 in main (
    argc=<error reading variable: Cannot access memory at address 0x7efffc8c>, 
    argv=<error reading variable: Cannot access memory at address 0x7efffc88>)
    at main_process/main_process.c:681 
```

之后我无法继续调试执行。如果我只是简单地运行代码（而不是单步执行），我会得到

```
(gdb) c
Continuing.
[Inferior 1 (process 2601) exited with code 0377] 
```

如果我在要创建的线程中添加一个断点，我将在那里停止执行，但之后继续是不可能的（它也不会退出）。

我读到了线程堆栈大小可能很小的可能性，但它是 8MB，我只是将参数 argv[1]（目前为空）传递给线程。

我使用 Linaro gcc-linaro-arm-linux-gnueabi-2012.04-20120426_linux 工具链来创建我的应用程序。并且在板上运行（并在调试时使用）的共享库属于 LTIB_201204 rootfs。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:05:14.577

您可以先检查`libthread_db.so`板上是否存在并且未剥离（检查`nm`输出）吗？我个人从未使用过 LTIB，但从第 2 页开始，此[飞思卡尔应用说明](http://cache.freescale.com/files/32bit/doc/app_note/AN4553.pdf)：

> 为了正确捕获诸如加载共享库或创建线程之类的进程事件，实现这些通用功能的共享库必须部署在未剥离符号的目标上。对于 Linux 用户空间，它们是 ld.so、libthread_db.so、libpthread.so，对于 i.MX/LTIB 的特殊情况，可以在 LTIB Target Image Generation 菜单上取消选中剥离选项。

# paypal - PayPal 账户、测试和沙盒

> ID：15367818
> 
> 赞同：38
> 
> 时间：2013-03-12T17:17:40.693
> 
> 标签：paypal, paypal-sandbox

我有一个英国 PayPal 商业账户。我目前正在开发一个网站支付系统，以使用 Express Checkout 向该帐户付款。

到目前为止，我的 PHP 代码正在运行，我能够连接到沙箱并设置和快速结帐。下一阶段是将用户重定向到 PayPal 沙箱以进行测试付款。

在这一点上，我被困住了。我无法创建“个人测试”帐户以用作 PayPal 沙盒上的“客户”。

我正在尝试这样：

1.  访问[developer.paypal.com](https://developer.paypal.com/)
2.  登录
3.  选择“应用程序”
4.  选择“沙盒帐户”
5.  选择“创建帐户”
6.  选择国家作为“英国”，账户类型“个人”，有效的电子邮件地址（不与任何其他贝宝账户关联），密码，名字，姓氏，银行验证 = 是，卡类型 = 签证。
7.  单击创建帐户。

然后我收到以下消息：

> 很抱歉，出了点问题。请删除此帐户，然后重试。

当它说“删除此帐户”时，我不知道它的实际含义，因为它没有使用我刚刚输入的详细信息创建一个新的个人帐户（至少我无法在任何地方看到）。我什至尝试创建一个新的企业帐户来创建这个个人帐户，但这并没有什么不同。

还有其他人遇到问题吗？我有点卡住了。我可以使用我的“真实”个人 PayPal 帐户在沙盒上进行测试，而不会有任何真实资金损失到我设置的测试业务帐户的风险吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-13T08:14:31.347

好的，回答我自己的问题，因为我已经深入了解了。

首先感谢那些提供答案和评论的人。

所以，在我的特殊情况下，问题原来是我的密码太简单了。在表单上，​​密码字段旁边的提示是“（8-20 个字符）”。因此，由于它是一个测试帐户，并且我试图保持简单，我使用的密码是“测试密码”。根据要求，它在 8 到 20 个字符之间，所以应该可以，谢谢！或者不是视情况而定。我突然预感到这可能是问题所在，并尝试了替代方案。再一次，一个字典单词，但后面有几个数字，它再次起作用。然后我再次尝试使用完全相同的详细信息，但电子邮件地址略有不同（我使用的是 testN@mycompany ......我再次增加 N 和一个简单的密码，但它失败了！

整个实施，尤其是这种形式的错误报告，需要进行彻底的检查。

所以感谢 PayPal，你在这个客户项目上浪费了我很多时间，仅仅是因为这个表单的实现非常糟糕。下面是另一个示例：在 PayPal 余额字段中输入一个非整数值，例如 200.00 并提交表单...您将被吹到上一页，显示与非整数值相关的错误。此时表单完全重置，您必须重新开始整个过程​​，而不是只编辑一个字段。

再次感谢在此论坛上做出回应的所有人，给我留下了深刻的印象。然而，整个 PayPal 沙盒环境并没有给人留下深刻的印象，似乎有点粗糙，我发现了很多错误......

干杯

:wq

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-04T17:53:49.100

同样的事情发生在我身上。

要解决：

PASSWORD 必须包含符号、数字、大写字符。

我还将起始余额设置为 < $1000.00

按照上述方法，我的每个帐户都取得了成功，希望对您有所帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-02T15:59:43.330

截至 2016 年 11 月（提出此问题 3 年后），问题仍然存在。这是我为成功创建测试个人和企业帐户所做的工作：

1.  使用新的电子邮件地址（可以是虚构的，不会发送真实的，但您可以从开发人员站点 -> 沙箱 -> 帐户 -> 通知中获取电子邮件）。还将您的帐户设置为使用纯文本，以防您看到垃圾消息是 base64 编码的不完整消息。

2.  始终坚持将美国作为您的国家，我尝试了自己的国家，但没有成功

3.  密码，我使用了 9 个字符，第一个字符是符号，然后是大写、小写和数字的混合。

4.  为美元输入 100

5.  保留其余选项不变，没有名字，（个人：是，发现，签证），（业务：是，签证）

最后.....这可行，并且当您创建新应用程序时，该帐户可从下拉框中使用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-12T14:17:07.777

我有同样的问题。终于解决了。我只得把 100 美元存入账户

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-12T18:02:04.080

我能够使用英国帐户重现此问题。该问题是由于在创建测试帐户期间将保存的表单数据填充到电子邮件地址字段中造成的。如果您在创建个人帐户时将电子邮件地址更改为不同的地址，它将允许您成功创建它。您还可以清除浏览器中的所有表单数据以解决问题。我已将此问题报告给我们的沙盒团队，并确保在问题得到解决后立即更新此问题。

我希望这会有所帮助，如果您遇到任何其他问题，请告诉我。

谢谢！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-12T23:48:57.573

关于到目前为止的答案，我认为这与保留的电子邮件地址或以前的数据没有任何关系。自周末以来，我一直在遇到此错误。

我录制了一段我在 Safari 中填写表格的视频，并将其链接在下面。在此之前，我使用 Safari 的唯一目的就是下载 Chrome。我用一个我确定没有使用过的电子邮件地址填写了表格，但我仍然收到完全相同的错误。我没有答案，但希望这有助于引导那些做正确的人。

[这是视频](http://viddur.com/Hgv0R)。

**编辑：** 我可能误解了电子邮件字段，它可能需要是一个有效的电子邮件地址，但即使我输入了一个有效的电子邮件，我也从未在 PayPal 上使用过，然后我得到同样的错误。我想我会指出这一点以使讨论继续进行。

# objective-c - 将电影添加到 ipad 应用程序

> ID：15367819
> 
> 赞同：1
> 
> 时间：2013-03-12T17:17:50.233
> 
> 标签：objective-c, ipad

我正在关注有关此主题的上一个问题，试图在我的应用程序中播放视频。我已将名为 iobserve1.mov 的视频复制到资源文件夹中，并在我的 h 文件中导入 MediaPlayer/MediaPlayer.h。我收到以下错误：

Apple Mach-O 链接器错误“_OBJC_CLASS_$_MPMoviePlayerController”，引用自：

和

Apple Mach-O Linker Error 链接器命令失败，退出代码为 1（使用 -v 查看调用）

```
@interface ObViewControllerIObserveMovie ()
@property (weak, nonatomic) IBOutlet UIView *movieView; // this should point to a view where the movie will play
@end

@implementation ObViewControllerIObserveMovie

- (void)viewDidLoad
{
[super viewDidLoad];
NSString *moviePath = [[NSBundle mainBundle] pathForResource:@"iobserve1" ofType:@"mov"];
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:moviePath]];
player.view.frame = CGRectMake(184, 200, 400, 300);
[self.view addSubview:player.view];
[player play];
} 
```

在这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:20:37.503

您是否将 MediaPlayer 框架添加到您的项目中？它包含 MPMediaPlayerController 类

# mysql - MySQL 加入子查询

> ID：15367824
> 
> 赞同：1
> 
> 时间：2013-03-12T17:18:08.597
> 
> 标签：mysql, sql, join, greatest-n-per-group

尽管我无法获得所需的结果，但我正在尝试对子查询进行连接。有人可以建议运行更好的查询，或者我不应该使用子查询（我不精通 SQL 的任何变体），是否有更好的查询类型可以运行？

以我有限的 SQL 知识，我可以看到子查询不在最佳位置。这里的目标是从 tblResults 中查询字段，并将它们连接到tblTraceOutput 中具有相同值的最后一行（tblTraceOutput`resultid`中有多行具有相同的`resultid`值，所以只有最后一行）。

```
SELECT r.`resultid`, r.`successful`, r.`result`, r.`testdate`, r.`changed`, 
t.`delay1`, t.`delay2`, t.`delay3` 
FROM `tblResults` AS r 
JOIN (
    SELECT `resultid`, `delay1`, `delay2`, `delay3` 
    FROM `tblTraceOutput` 
    WHERE `traceid`='48'
    ORDER BY `outputid` DESC LIMIT 0,1
) AS t ON (t.`resultid` = r.`resultid`) 
WHERE r.`traceid` = '48' ORDER BY r.`resultid` DESC LIMIT 0,20 
```

如果我将其更改`JOIN`为 a`LEFT JOIN`我将从我的查询中获得更多结果，但*在除第一行之外的每一行*中的三列`t.delay1`中写入 'NULL'`t.delay2`和。从子查询中提取的结果仅与 tblResults 上主查询的第一行输出联合。**我怎样才能让这个子查询为外部查询中的每一行输出运行和联合？**`t.delay3`

 ***在我的脑海中，我想象以下内容，但我无法以任何方式使其工作：

```
SELECT r.`resultid`, r.`successful`, r.`result`, r.`testdate`, r.`changed` 
FROM `tblResults` AS r 
(
    SELECT t.`resultid`, t.`delay1`, t.`delay2`, t.`delay3` 
    FROM `tblTraceOutput` 
    WHERE `traceid`='48'
    ORDER BY `outputid` DESC LIMIT 0,1
) AS t
JOIN ON (t.`resultid` = r.`resultid`) 
WHERE r.`traceid` = '48' ORDER BY r.`resultid` DESC LIMIT 0,20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:23:03.787

```
SELECT r.`resultid`, r.`successful`, r.`result`, r.`testdate`, r.`changed` 
FROM `tblResults` AS r 
LEFT JOIN `tblTraceOutput` as t ON (t.`resultid` = r.`resultid`) 
WHERE r.`traceid` = '48' ORDER BY r.`resultid` DESC LIMIT 0,20 
```

left join 会从 tblTraceOutput 表返回结果，即使没有匹配的结果（返回的数据为 NULL）

内连接只会返回与 ON 子句匹配的 resultid 和 tblTraceOutput 的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:24:13.630

您可以使用`LEFT JOIN`, 只需在子句中包含一个表达式，`WHERE`以避免显示连接表中没有关联记录的记录：

```
SELECT r.`resultid`, r.`successful`, r.`result`, r.`testdate`, r.`changed`, 
t.`delay1`, t.`delay2`, t.`delay3` 
FROM `tblResults` AS r
LEFT JOIN `tblTraceOutput` AS t ON (t.`resultid` = r.`resultid`)
WHERE r.`traceid` = '48' AND t.`resultid` IS NOT NULL
ORDER BY r.`resultid` DESC
LIMIT 0, 20; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:21:59.283

我想这就是你正在寻找的那个。该查询使用子查询分别获取`outputid`每个`resultid`和`resultid`上表的最新信息`tblTraceOutput`。如果子查询的所有列都匹配，则子查询的结果将与表`tblTraceOutput`（*本身）重新连接。*可能匹配的记录是最新的。

```
SELECT  a.*, b.*
FROM    tblResults a
        INNER JOIN tblTraceOutput b
            ON a.resultid = b.resultid
        INNER JOIN
        (
            SELECT  resultid, traceid, MAX(outputid) max_ID
            FROM    tblTraceOutput
            GROUP   BY resultid, traceid
        ) c ON  b.resultid = c.resultid AND
                b.traceid = c.traceid
                b.outputid = c.max_ID
WHERE   a.traceid = 48
ORDER   BY resultid
LIMIT   0, 20 
```***

# weka - Weka CSVLoader 值的数量错误。阅读 2，预期 23

> ID：15367826
> 
> 赞同：10
> 
> 时间：2013-03-12T17:18:14.397
> 
> 标签：weka

我正在尝试使用 GUI 中的 Weka 的 CSVLoader 将 CSV 转换为 ARFF。在选项中，我将字符串的包围字符设置为`"`，尽管我的文件中没有引号。我收到以下错误：

```
weka.core.converters.CSVLoaderfailed to lead <my file>
Reason:
wrong number of values. Read 2, expected 23, read Token[EOL], line 1763 
```

这是第 1762-1764 行：

```
450c787001b004af69428e267c7a4ca1,I_need need_to to_go go_back back_to to_my my_live live_food food_diet diet_PPP PPP_Not Not_90% 90%_like like_before before_CCC CCC_but but_I I_bet bet_I I_could could_do do_75% 75%_without without_losing losing_too too_much much_weight weight_PPP PPP_PPP,2.30,3.50,4.50,2.85,4.50,n,y,y,n,y,AM,297,41728.8,95.58,0.03,42826,0.49,0.17,-12.5611111111,0.248945147679,0.0595238095238
450c787001b004af69428e267c7a4ca1,It's_ugly ugly_here here_PPP PPP_But But_there there_are are_sparks sparks_PPP PPP_PPP PPP_PPPmoments PPPmoments_PPP PPP_Love Love_PPP,2.30,3.50,4.50,2.85,4.50,n,y,y,n,y,AM,297,41728.8,95.58,0.03,42826,0.49,0.17,-15.91,0.299242424242,0.1
450c787001b004af69428e267c7a4ca1,I_guess guess_it it_all all_depends depends_on on_your your_mood mood_PPP PPP_PPP PPP_PPPwhy PPPwhy_can't can't_these these_meds meds_be be_any any_damn damn_good good_QQQ,2.30,3.50,4.50,2.85,4.50,n,y,y,n,y,AM,297,41728.8,95.58,0.03,42826,0.49,0.17,-12.9970588235,0.0,0.0344827586207 
```

有任何想法吗？我似乎找不到错误。

```
EDIT--- 
```

当然，在我发布之后，我发现“错误”CSVLoader 不喜欢**% 字符**。所以，我改变了我的问题：有谁知道这是为什么，或者其他角色不喜欢它吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-14T20:51:25.407

如果将这些字符用作数据，通常会导致问题

, = " ' *+ -%

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-17T13:48:38.093

在 R 语言中使用此代码并更改文件它将 100% 解决您的问题

```
mydata=read.csv("train.csv",header=TRUE)
library("foreign")
write.arff(x =mydata ,file= "train.arff") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-28T20:32:49.490

该错误是由第 1763 行中的撇号引起的。

# javascript - 主干“更改：属性”有时不绑定

> ID：15367830
> 
> 赞同：0
> 
> 时间：2013-03-12T17:18:22.187
> 
> 标签：javascript, backbone.js

正如我在“更改”事件中理解的那样，Backbone 正在检查设置值是否与前一个值相同。

你知道克服这个问题的一些可能性吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:23:24.427

如果您自己调用 set 方法，您可以将 Model set 函数包装在另一个将触发事件的函数中，如下所示：

```
var Item = Backbone.Model.extend({
    mySet: function (value) {        
        var result = this.set(value);
        this.trigger('myChange', value);

        return result;
    }
});

var item = new Item();
item.on('myChange', function (value) {
    alert('My change event fired');
}); 
```

# c++ - 插入指向 std::map 的指针

> ID：15367831
> 
> 赞同：2
> 
> 时间：2013-03-12T17:18:22.247
> 
> 标签：c++, map, stl, stdmap

我正在使用 a `map`inside a `map`：

```
std::map<int, std::map<DWORD,IDLL::CClass*>*> *MyMap 
```

我正在使用以下代码插入`map`：

```
std::map<DWORD,IDLL::CClass*> *SecondMap;
SecondMap= new std::map<DWORD,IDLL::CClass*>; 
DWORD i = 1;
while (eteration on obj type IDLL::CClass ) 
{
     SecondMap.insert(std::make_pair(i,&obj));           
}int j = 1;    

MyMap->insert(std::make_pair(1,&SecondMap)); 
```

后来在程序`map`中变成了空！

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:57:12.390

拥有*原始指针*通常是一种不好的做法（除非您在特殊情况下，例如，如果您正在构建自定义高级数据结构，并且拥有原始指针在适当的 RAII 类边界中受到保护）***。***

 *第一种选择应该是使用值语义；如果这对您的性能不利，那么您可能想要使用**智能指针**（这有助于使您`shared_ptr`的代码更简单，使其异常安全，避免资源泄漏等）。

这是一个示例可编译代码，似乎适用于 VS2010 SP1 (VC10)：

```
#include <iostream>     // for std::cout
#include <map>          // for std::map
#include <memory>       // for std::shared_ptr and std::make_shared
using namespace std;

typedef unsigned int DWORD;    

struct MyClass
{
    MyClass() : Data(0) {}
    explicit MyClass(int data) : Data(data) {}

    int Data;
};

int main()
{
    //
    // Build some test maps
    //

    typedef map<DWORD, shared_ptr<MyClass>> InnerMap;
    typedef map<int, shared_ptr<InnerMap>> OuterMap;

    auto innerMap1 = make_shared<InnerMap>();
    (*innerMap1)[10] = make_shared<MyClass>(10);
    (*innerMap1)[20] = make_shared<MyClass>(20);

    OuterMap myMap;

    myMap[30] = innerMap1;

    //
    // Testing code for maps access
    //

    const int keyOuter = 30;
    auto itOuter = myMap.find(keyOuter);
    if (itOuter != myMap.end())
    {
        // Key present in outer map.
        // Repeat find in inner map.

        auto innerMapPtr = itOuter->second;
        const DWORD keyInner = 20;
        auto itInner = innerMapPtr->find(keyInner);
        if (itInner !=  innerMapPtr->end())
        {
            cout << itInner->second->Data << '\n';
        }
    }
} 
```*

# git - 宣布 git push -f 而其他人都做 git pull --rebase 有什么不好

> ID：15367832
> 
> 赞同：2
> 
> 时间：2013-03-12T17:18:28.720
> 
> 标签：git, push, git-rebase, pull

比方说

*   你在 github 上创建了一个项目
*   多人（少于 5 人）正在处理这个分叉
*   目标是对我们的更改提出拉取请求

在对我们的 fork 进行几次提交之后，我们现在想要将我们的 fork 更新为源项目中的最新 HEAD。因为多人在这个分支上工作，标准的方法是拉下源项目，然后进行合并提交以从源项目中引入最新的 HEAD。

我们不喜欢这样，因为它使我们的历史非线性并且我们将有许多“无用”的合并提交。

我们的替代想法是：

1.  git pull --rebase 使本地拥有最新的分叉 HEAD
2.  重新设置我们的 fork 以引入新的最新 HEAD 源，这样我们的提交就在源 HEAD 之后
3.  git push --force
4.  其他人都将通过 git pull --rebase 获得最新信息（我们可以为每个人设置默认值）

历史是线性的，只是对分叉的提交者进行了一些协调。

这种方法有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T01:28:36.387

你从这里开始（`U`是上游，`Y`是你的）：

```
UB--U1--U2
 \
   Y1--Y2 
```

现在你做一个变基（和`push -f`）：

```
UB--U1--U2--Y1'--Y2' 
```

现在您的其他团队成员可以`pull --rebase`：

```
UB--U1--U2--Y1'--Y2'--Y1''--Y2'' 
```

正如 robinst 指出的那样——如果你必须解决冲突，git 不会注意到 repo 中已经有`Y1`and`Y2`的版本，而只是再次变基（可能也会产生一些丑陋的冲突）。

我只是建议进行合并（您可以使用 来查看您的线性历史记录 `git log --no-merges`）。如果您真的想尝试变基方式，可以执行以下操作：

你跑：

```
git fetch --all
git branch rebase_base master
git push origin rebase_base
git rebase upstream/master
git push -f origin master 
```

然后其他人运行：

```
git fetch origin
git rebase --onto origin/master origin/rebase_base master 
```

看看`git help rebase`为什么会这样;)。基本上你是在告诉 git 直到你已经做了 rebase ( `rebase_base`) 的哪个提交，所以它不会 rebase 不需要它的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:22:41.803

你不需要`git push -f`。变基和合并（分别通过和合并`git pull --rebase`）`git pull`是两种选择，您可以遵循其中任何一种来使您的分支与上游保持同步。

做`git pull --rebase`，解决冲突，如果有的话，享受“无用的”合并提交免费历史，然后做`git push`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:34:58.957

如果您在第 2 步中执行变基时必须解决冲突，第 4 步可能对其他人没有问题。

原因是 Git 通过通过补丁 ID 比较提交来检测是否已经应用了提交（参见[git patch-id](http://git-scm.com/docs/git-patch-id)）。由于进行更改以解决冲突，补丁 ID 可能会更改。

因此其他人可能需要手动工作，例如重置和挑选本地更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:58:16.837

简单地说， git push -f 到你自己的分支并没有什么坏处。当您必须与其他开发人员协调时，就会发生不好的部分。除非每个人都在你进行力推**的确切时刻进行沟通，否则它可能会变得复杂。**为了避免复杂化，每个开发人员都必须停止他们正在做的工作以适应强制推动。它扰乱了工作流程，最终花费了不必要的时间和精力。

分布式版本控制系统的好处是您无需要求开发人员停止工作以适应编辑！在过去，当开发人员（a）签出文件时，VCS 系统将获得对该文件的悲观锁定，而其他开发人员（b）将不得不争先恐后地寻找第一个开发人员（a）签出文件并要求开发人员（a）签入文件，以便开发人员（b）可以编辑文件。但我跑题了。

回到主题，我认为您会从使用[主题分支工作流](http://git-scm.com/book/en/Git-Branching-Branching-Workflows)中受益。在你的分叉中设置`master`分支以跟踪你分叉的原始工作。Master 包含原始项目的所有工作。

当您的团队开发新功能时，他们将需要在某处合并更改。创建一个名为`development`或任何您选择的新远程分支的情况并不少见，以便团队可以推送/拉取他们的更改。这个新的远程分支实际上是`trunk`您团队的分支。

需要有人负责将原始项目的更改合并`master`到分叉项目的`development`分支中，但这比要求每个人都适应一个强制推送到主干要容易得多。您还需要为分叉项目的主分支和开发分支设置策略。此工作流程允许开发人员在不中断他们自己的工作流程的情况下提取/合并分叉的存储库。

# java - 餐巾纸外观和感觉错误

> ID：15367834
> 
> 赞同：1
> 
> 时间：2013-03-12T17:18:36.103
> 
> 标签：java, swing, user-interface, look-and-feel

请看下面的代码

**表单.java**

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;

public class Form extends JFrame
{
    private JButton[]buttonHolder;

    public Form()
    {
        //Intializing instance variables
        buttonHolder = new JButton[9];

        this.add(createCenterPanel());
        this.setSize(300,300);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private JPanel createCenterPanel()
    {
        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new GridLayout(3,3,0,0));

        for(int i=0;i<9;i++)
        {
            buttonHolder[i] = new JButton();
            centerPanel.add(buttonHolder[i]);
        }

        return centerPanel;
    }
} 
```

**主.java**

```
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import napkin.NapkinLookAndFeel;

public class Main
{
    public static void main(String[]args)
    {
        try
        {
            Form f = new Form();
            UIManager.setLookAndFeel(new NapkinLookAndFeel());
        }
        catch(Exception e)
        {

        }
    }
} 
```

我在这里使用餐巾纸的外观和感觉，但出现错误`keys we didn't overwrite: []`。为什么是这样？我没有得到 GUI。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:36:00.880

这可能会有所帮助

> 您可以尝试的一件事是：
> 
> *   不要设置外观和感觉。
> *   创建您的用户界面。
> *   在框架上调用 setUndecorated(true)。
> *   设置外观。
> *   为框架调用 SwingUtilities.updateComponentTreeUI。
> *   如有必要，请在框架上调用 setUndecorated(false)。

从

[http://www.coderanch.com/t/566070/GUI/java/Error-NapKin-Feel](http://www.coderanch.com/t/566070/GUI/java/Error-NapKin-Feel)

编辑：

消息“我们没有覆盖的键：[]”打印在这里：

```
@Override
protected void initClassDefaults(UIDefaults table) {
    super.initClassDefaults(table);
    String cName = NapkinLookAndFeel.class.getName();
    String basicPackageName = cName.replace("NapkinLookAndFeel", "Napkin");
    for (String uiType : UI_TYPES) {
        String uiClass = basicPackageName + uiType;
        table.put(uiType, uiClass);
    }

    Set<Object> keys = new HashSet<Object>(table.keySet());
    keys.removeAll(Arrays.asList(UI_TYPES));
    if (keys.size() != 0) {
        System.out.println("keys we didn't overwrite: " + keys);
    }
} 
```

[http://www.jarvana.com/jarvana/view/net/sf/squirrel-sql/thirdparty-non-maven/napkinlaf/1.2/napkinlaf-1.2-sources.jar!/net/sourceforge/napkinlaf/NapkinLookAndFeel.java ?格式=好的](http://www.jarvana.com/jarvana/view/net/sf/squirrel-sql/thirdparty-non-maven/napkinlaf/1.2/napkinlaf-1.2-sources.jar!/net/sourceforge/napkinlaf/NapkinLookAndFeel.java?format=ok)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:31:47.523

在创建以下实例之前，首先设置外观和感觉`Form`：

```
public static void main(String[]args)
{
    try
    {
        UIManager.setLookAndFeel(new NapkinLookAndFeel());
        Form f = new Form();
    }
    catch(Exception e)
    {
        // it's generally a bad idea to silently swallow exceptions,
        // you should at least do...
        e.printStackTrace();
    }
} 
```

# c# - 互斥锁/监视器不适用于 C# 线程同步

> ID：15367841
> 
> 赞同：3
> 
> 时间：2013-03-12T17:18:50.940
> 
> 标签：c#, .net, asynchronous, windows-8, windows-store-apps

我试图只允许一个人`Thread`从`object`. 我并没有真正创建线程，而是使用任务。我试图将该方法锁定为一种用法，但它不起作用，我首先尝试使用静态`Mutex`对象，然后尝试使用非静态`Mutex`对象，但即使使用简单的监视器也无法正常工作。

我的代码：

```
private async void LoadLinkPreview()
    {
        try
        {
            // TODO: FEHLERTRÄCHTIG!
            Monitor.Enter(_loadLinkMonitor);
            Debug.WriteLine(DateTime.Now + ": Entered LinkPreview");

            // Code ...
            // There are also "await" usages here, don't know if this matters
        }
        catch { }
        finally
        {
             Monitor.Exit(_loadLinkMonitor);
             Debug.WriteLine(DateTime.Now + ": Left LinkPreview");
        }
    } 
```

这就是控制台显示的内容：

```
3/12/2013 6:10:03 PM: Entered LinkPreview
3/12/2013 6:10:05 PM: Entered LinkPreview
3/12/2013 6:10:05 PM: Left LinkPreview
3/12/2013 6:10:06 PM: Left LinkPreview 
```

当然，有时它会按照想要的顺序工作，但我希望它始终有效。有人可以帮助我吗？

编辑：我意识到控制台显示可能是想要的行为，因为“左”`WriteLine()`是在监视器退出之后，但我现在切换它们并且可以确认肯定有两个线程同时工作！还有一个更明显的控制台结果：

```
3/12/2013 6:26:15 PM: Entered LinkPreview
3/12/2013 6:26:15 PM: Entered LinkPreview
2 had an error! // Every time the method is used I count up now, this confirms that the second
// time the method is called the error is produced, which would not happen if the monitor
// is working because I have an if statement right upfront ...
3/12/2013 6:26:17 PM: Left LinkPreview
3/12/2013 6:26:18 PM: Left LinkPreview 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:27:48.130

实际上，您的代码可能按*预期*工作，而您的问题只是显示。

问题在这里：

```
 Monitor.Exit(_loadLinkMonitor);
 Debug.WriteLine(DateTime.Now + ": Left LinkPreview"); 
```

退出监视器*后*写出时间戳。请记住，等待进入监视器的其他代码可以在`Exit`调用后立即开始执行。因此，当前线程可以调用exit，然后在`Debug`调用之前，另一个线程可以`Enter`监视并将其写入“Entered”行。

如果您将代码更改为：

```
 Debug.WriteLine(DateTime.Now + ": Left LinkPreview");
 Monitor.Exit(_loadLinkMonitor); 
```

然后它不会改变行为，但您将删除日志记录错误。如果它*仍然*不正常，那么您的代码中确实存在问题。

附带说明一下，如果您有一个`async`方法，则应避免调用执行阻塞等待的方法，例如`Monitor.Enter`. 如果您使用`SemaphoreSlim`，您可以使用它的`WaitAsync`方法来确保该方法不会阻塞。看起来像这样：

```
private SemaphoreSlim semaphore = new SemaphoreSlim(1);
private async void LoadLinkPreview()
{
    try
    {
        await semaphore.WaitAsync();
        Debug.WriteLine(DateTime.Now + ": Entered LinkPreview");
        await Task.Delay(2000);//placeholder for real work/IO
    }
    finally
    {
        Debug.WriteLine(DateTime.Now + ": Left LinkPreview");
        semaphore.Release();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T17:37:01.380

编辑：放弃了所有这些。答案是：[为什么我不能在 lock 语句的主体中使用 'await' 运算符？](https://stackoverflow.com/questions/7612602/why-cant-i-use-the-await-operator-within-the-body-of-a-lock-statement)

你不应该做你想做的事情，在本质上是一个“lock”语句中使用“await”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:13:26.617

您不能`Monitor`在`async`方法中使用标准的多线程原语。如果您使用`lock`语句，C# 编译器会阻止您，但如果您通过“手动”执行它，`Monitor.Enter`那么您最终只会在脚下开枪。

如果你想一想，这完全有道理。当`async`方法产生时会发生什么？它*返回*一个未完成的`Task`并*允许其他代码*在它（a）等待时运行。这完全违背了锁的观点，即*防止其他代码在*持有锁时运行。还有一些情况（例如 ASP.NET 或线程池上下文）`async`方法在不同的线程上恢复；在这种情况下，一个线程获取锁，另一个线程释放它。疯狂！猫和狗住在一起！

内置的 .NET 解决方案是`SemaphoreSlim`，它用作锁/信号量（尽管它没有内置`IDisposable`用于与 一起使用`using`）。[`async`Stephen Toub 写了一个关于协调原语](http://blogs.msdn.com/b/pfxteam/archive/2012/02/11/10266920.aspx)的博客系列，我[在我的 AsyncEx 库中实现了](http://nitoasyncex.codeplex.com/documentation)一个完整的套件，可通过 NuGet 获得。

# ios - 从命令行运行单元测试时的 SSL 连接问题

> ID：15367842
> 
> 赞同：14
> 
> 时间：2013-03-12T17:18:56.523
> 
> 标签：ios, xcode, jenkins, xcodebuild, ocunit

## 目标

我们的目标是在持续集成环境 ( [Jenkins](http://jenkins-ci.org "詹金斯 CI") )中执行我们的单元测试

（我认为每个问题都必须说明一个人想要达到的目标。也许这个问题实际上可以用一种非常不同的方式来解决）

### 更新：更多关于“你为什么要这样做？”

首先，我们谈论的是特定的、自主开发的硬件。而且我希望持续*集成*测试告诉我是否有人在不告诉所有开发人员的情况下更改了盒子的行为（是的，是的，我知道，这样的事情*永远不会*发生......）

其次，我们的一些（不是全部）连接使用默认无效的证书，因此我们有代码来检查证书的有效性（`SecTrustEvaluate`等）。当然，理想情况下，我们的测试也会测试该代码。但这似乎太多了。

第三：好吧，如果我能得到真正的交易，我为什么要嘲笑任何东西？IDE对此没有问题，为什么要命令行。

如果我想要可预测性，我会`YES`在所有测试中返回；）（我*已经*看到人们这样做了）。不，我想知道代码是否真的和真的适用于我们的设备。这是某种变态的欲望吗？

## 问题到此解决

从命令行运行测试听起来很简单，但是

```
xcodebuild -sdk iphonesimulator ONLY_ACTIVE_ARCH=NO clean test 
```

导致一个丑陋的错误：

```
unsupported build action 'test' 
```

所以我在网上搜索并找到了这篇关于[从命令行运行 OCUnit 测试的](http://www.raingrove.com/2012/03/28/running-ocunit-and-specta-tests-from-command-line.html "从命令行运行 OCUnit 测试")文章。

我遵循了所有步骤，我可以像这样从命令行运行我的测试：

```
xcodebuild -scheme CITests -sdk iphonesimulator TEST_AFTER_BUILD=YES ONLY_ACTIVE_ARCH=NO clean build 
```

## 剩下的问题

但是，现在任何到 SSL 服务器的 NSURLConnection 都会失败，因为“此服务器的证书无效。”。从命令行运行测试时，我听说过钥匙串问题，但这是真的吗？拒绝任何 SSL 连接？

## 重现

[在https://github.com/below/SSLTestDemo](https://github.com/below/SSLTestDemo)获取示例。打开它，然后使用 Xcode 自己的**Test ⌘U**命令运行示例测试。测试应该成功。

现在在命令行上运行测试：

```
xcodebuild -scheme CITests -sdk iphonesimulator TEST_AFTER_BUILD=YES ONLY_ACTIVE_ARCH=NO clean build 
```

由于“此服务器的证书无效”，测试失败。错误。

## 任何指针？

*   我做错了吗？
*   这是一个真正的错误吗？
*   如果是这样，是否有解决方法？

任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:23:26.173

好吧，当我们在 Jenkins 下进行测试时，我最终没有检查证书。

由于在您的应用程序中存在阻止此类检查的代码是很危险的——毕竟，它可能不会在你发布之前被删除——你必须同时设置一个环境变量和一个编译器标志来激活它……</p>

后文：

苹果认为这是一个错误，rdar://problem/10406441

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T02:32:59.060

即使在 XCode（使用 XCode 4.5）中，我也遇到了 SSL 连接问题

我的解决方案是在我的单元测试设置中切换 HTTPS 证书检查：

```
- (void)setUp
{
    // Set-up code here.
    [super setUp];

    NSURL *URL = [NSURL URLWithString:<#Your SSL Address#>];

    [NSURLRequest.class performSelector:NSSelectorFromString(@"setAllowsAnyHTTPSCertificate:forHost:")
                             withObject:NSNull.null  // Just need to pass non-nil here to appear as a BOOL YES, using the NSNull.null singleton is pretty safe
                             withObject:[URL host]];
} 
```

我调用的深奥格式是因为这是一个私有方法，它拒绝使用最新的工具链进行编译。由于这仅在单元测试目标中使用，它不会影响生产代码，因此不会受到攻击、错误和 Apple AppStore 批准。ymmv。

# android - 如何将位图从 Android 传递给 PHP

> ID：15367848
> 
> 赞同：1
> 
> 时间：2013-03-12T17:19:18.627
> 
> 标签：android, file-upload, http-post

我允许用户拍摄个人资料照片。然后它设置一个 ImageView。之后，我想启动一个`AsyncTask`并将图像上传到服务器。我已经在几个`PHP`地方开设了几个课程，可以从我做过的几个网络应用程序中做到这一点。

我的问题是，我不知道如何做 HttpPost 部分。我已经通过来回传递字符串而不是图像完成了许多这样的操作。

我不想将文件作为 Blob 存储在数据库中。我的课程设置为检索文件`PHP`，命名文件并将它们移动到一个位置。然后将文件路径存储在服务器中。

所以如果我有这个：

```
photo = (Bitmap) data.getExtras().get("data"); 
```

我如何通过`photo`服务器传递`HttpPost`？我有很多方法，如 Mutilpart、Base64 等。不确定最好的现代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:23:21.837

在安卓端：

```
HttpClient client = new DefaultHttpClient();

HttpPost post = new HttpPost( url );
MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );

entity.addPart( "theFile", new FileBody((( new File( filename ), mimeType ));

post.setEntity( entity );

client.execute( post ); 
```

显然，您需要设置 mimeType 并将“theFile”替换为适当的参数。在 PHP 方面，这只是一个常规的文件上传。

# mysql - 从表单发布数组以更新 mysql 表

> ID：15367850
> 
> 赞同：-1
> 
> 时间：2013-03-12T17:19:30.207
> 
> 标签：mysql, arrays

我有一个表格，用于更新 mysql 表中的库存水平。我发布的三个字段是：

```
lst_product_id[]
txt_quantity[]
txt_cost[] 
```

我可以很容易地做到这一点来更新一个产品，但是，我希望能够通过添加更多输入字段来一次从表单更新多个产品。

为此，我添加了另一行三个输入字段（与上面相同）并将 [] 方括号放在所有六个后面以创建一个数组。

这就是一切都变成梨形的地方，任何人都可以告诉我当我发布到插入页面并更新表格时如何拾取数组。

我正在使用 mysqli 扩展，我真的迷路了。提前致谢。大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:07:27.603

你在正确的轨道上。这是一个简单的示例，希望能帮助建立连接......

```
<?php
$post = $_POST;
?>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
</script>
</head>
<body>
<form method="post">
    <input name="id[1]" value="1" />
    <input name="quantity[1]" value="2" />
    <input name="cost[1]" value="100" />
    <input name="id[3]" value="3" />
    <input name="quantity[3]" value="1" />
    <input name="cost[3]" value="250" />
    <input name="id[8]" value="8" />
    <input name="quantity[8]" value="12" />
    <input name="cost[8]" value="25" />
    <br />
    <input type="submit" />
</form>
<pre>
<?php print_r($post); ?>
</pre>
</body>
</html> 
```

提交表单后，您将看到必须使用的发布数据的格式。放在方括号 [] 中的值应该是 id，以便您可以正确匹配成本和数量。像这样的东西...

```
foreach ($post['id'] as $id) {
    $cost = $post['cost'][$id];
    $quantity = $post['quantity'][$id];

    //do something with each
} 
```

# c - C - 如何包含保存在单独文件夹中的自己的标题

> ID：15367855
> 
> 赞同：16
> 
> 时间：2013-03-12T17:19:43.663
> 
> 标签：c, header

首先，我几乎是一个初学者，所以我不知道如何解释我需要什么，但我会试一试。（我搜索但找不到完整的答案）。

我正在自己学习 C 并使用代码块。

我想创建自己的自定义函数迷你库以在我的程序中使用。

我有一个名为“C”的文件夹。在“C”中，我有一个名为“Exercises”的文件夹，我在其中完成一本书中的所有小项目。

同样在“C”中，我想要另一个名为“MyC”的文件夹，我将在其中保留自己的头文件和包含自定义函数实现的 .c 文件。例如，这些 .h 和 .c 将保存在“MyC”中：

//test.h

```
#ifndef _TEST_H
#define _TEST_H

int mySum(int, int);

#endif // _TEST_H 
```

//test.c

```
#include <stdio.h>
#include "test.h"

int mySum(int a, int b)
{
    return a + b;
} 
```

所以现在，我想做的是能够在“练习”中创建一个新项目，而不必将 test.h 和 test.c 的副本都带入项目中，而只需 #include my test .h 并执行以下操作：

//testMain.c

```
#include <stdio.h>
#include <test.h>

int main(void)
{
    printf("\n2 + 1 = %d", mySum(2, 1));

    return 0;
} 
```

我知道 <> 用于标准标题，但引号用于当前文件夹中的标题，这就是我不想要的。

是否有可能做到这一点？如何？

我已经阅读了关于进入设置>编译器和搜索目录添加我有标题但没有工作的路径。它给了我一个错误“未定义对'mySum'的引用”我在#include 上尝试了引号和括号。

你们能否逐步说明需要做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T17:25:16.440

*用于标题*

如果要移回一个文件夹，请执行以下操作：`#include "../something.h"`.

在您的情况下，只需执行以下操作：`#include "../MyC/test.h"`

`..`只是意味着**返回一个目录**。

如果你不喜欢那样做，或者你想简单`#include "test.h"`，你可以使用`-I`编译器参数来做，像这样：

`-I'../MyC/'`

*对于 c 文件*

您需要在编译器参数中做类似的事情。

`gcc testMain.c ../MyC/test.c`

请记住，`..`意味着**返回一个目录**！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T17:27:22.860

您已经添加了标题文件夹，这很好。你可以`#include`像往常一样。如果找不到您的标头，您将收到“找不到文件”错误。

但是您还需要链接此目录中的目标代码，并且您需要指定要搜索您的函数的目标文件。您的 IDE 中应该有一个设置来添加编译器选项，例如`../MyC/test.o`. 如果您尚未在这些函数中编译代码，则需要指定 .c 文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T17:24:01.693

编译时需要包含该`-I`选项。例如：

```
gcc -I<path-to-headers> <path-to>/test.c testMain.c -o test_driver 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:25:14.167

考虑到“folder_to_code”包含`test.h`and `test.c`，

`gcc`您可以使用以下命令添加包含文件夹：

`gcc -I folder_to_code folder_to_code/test.c testMain.c -Wall -o program.exe`

这样您就可以`#include "test.h"`毫无问题地添加到代码中。

# java - java - 使用枚举从哈希表中获取数据的问题

> ID：15367857
> 
> 赞同：1
> 
> 时间：2013-03-12T17:19:57.740
> 
> 标签：java, enums, hashtable, java-7

我已经有一段时间没有接触 Java 了，我只是在浏览一些旧代码，试图将它更新到 Java 7；我只是想恢复速度。任何人都可以就以下代码提供一些建议，因为 Enumeration 现在似乎已被弃用。

```
private Hashtable table = new Hashtable(); 
```

...

```
Enumeration enum = this.table.keys();
while (enum.hasMoreElements()) {
   string test = (String) enum.nextElement();
  testMethod(test);
} 
```

任何帮助或建议将不胜感激；谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:22:48.573

```
private Map<String, String> table = new HashMap<>();
for (Map.Entry<String, String> entry : table.entrySet()) {
    testMethod(entry.getKey());
}
for (String key : table.keySet()) {
    testMethod(key);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:27:06.603

使用 keySet() 方法而不是 keys() 然后您可以在返回的 Set 上使用 Iterator，或者为您执行迭代代码的增强 for 循环，如下所示；

```
private Map<String> table = new HashMap<String>();
for (String key: table.keySet())
  testMethod(key); 
```

您不必将表的实现切换到 HashMap，但除非您不能，否则建议这样做。如果需要，您仍然可以在 Hashtable 上使用 keySet()

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:22:22.637

您可以使用[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)代替 HashTable （已过时）和[for-each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)。[使用泛型](http://docs.oracle.com/javase/tutorial/java/generics/)来避免强制转换也是一种很好的做法：

```
//assumes the keys are int and values String
private Map<Integer, String> table = new HashMap<> ();

for (String element : table.values()) {
    System.out.println(element);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T17:23:48.107

枚举没有被弃用，它只是被*泛化*了。对于您的哈希表和枚举，您应该指定具体类型。例如：

```
Hashtable<Integer, String> table = new Hashtable<Integer, String>
Enumeration<Integer> enum = this.table.keys(); 
```

在这种情况下，您的键是整数，您的值是字符串。新的泛型为您的代码提供了更强的类型安全性。您绝对应该考虑使用一些较新的集合类（[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)例如 ）。

# c# - 我应该选择什么设计原则/模式？

> ID：15367860
> 
> 赞同：1
> 
> 时间：2013-03-12T17:20:02.810
> 
> 标签：c#, design-patterns, vsto

我开发了一个 VSTO 4.0 插件，旨在将我们的业务应用程序集成到 Microsoft Word 中。在制作插件中编写的代码是一个迷你框架，我想将其重新用于 Microsoft PowerPoint 的新插件。主要问题是 Word 和 PowerPoint 接口（例如，Microsoft.Office.Interop.Word.Table 和 Microsoft.Office.Interop.PowerPoint.Table）没有共同的祖先，但我需要为插入、更新、表格和图表等，这些将被标准化以用于 Word 和 PowerPoint 对象。我应该选择什么设计原则/模式？我使用的类示例如下：

```
 using Word = Microsoft.Office.Interop.Word;

 public class ReportHolder
 {
     public ReportHolder(Word.Document document) { ... }

     public void AddTable(Word.Range range) { ... }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:40:29.927

听起来您正在寻找[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)模式。

另一种方法可能是让您的框架通过您自己的一组类以抽象和通用的方式处理它的工作。然后有两种不同的渲染内容的策略（两个独立的渲染器，一个用于 Word，一个用于 Powerpoint）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:51:35.823

如果您无法在应用程序层次结构级别找到实现令人满意的泛化所需的通用接口，那么您至少可以选择两个甚至更多选项。

第一个选项是实现[**策略模式**](http://en.wikipedia.org/wiki/Strategy_pattern)并为策略定义自己的接口。完成此操作后，您可以对策略接口的定义进行编码，然后在每个策略类中对 word、excel、power-point 等类型的特定逻辑进行编码。一旦您拥有所有策略类，您就可以实现[**工厂模式**](http://en.wikipedia.org/wiki/Factory_method_pattern)以获得您正在寻求的代码重用。

第二种选择是对函数的参数使用更通用的类型对象，例如接口和类型对象引用。完成此操作后，您可以利用 .net 框架中的反射类对特定对象进行类型检查，然后处理每个特定情况。

最后，在查看这些替代方案或其他任何替代方案之前，我建议真正深入研究 msdn 文档以了解 .net 的 office 互操作性框架的整体架构，看看是否有可以进行的有效概括以及现有的代码模式重用。我也知道后期绑定在整个框架中被广泛用于此目的，它可能是一个很好的起点。这里有一些额外的参考资料。

[**办公解决方案中的后期装订**](http://msdn.microsoft.com/en-us/library/vstudio/3xxe951d.aspx)

[**在 Office 解决方案中编写代码**](http://msdn.microsoft.com/en-us/library/vstudio/bb608596.aspx)

享受！

# jquery - 在不改变类的情况下改变按钮的颜色

> ID：15367861
> 
> 赞同：-1
> 
> 时间：2013-03-12T17:20:03.730
> 
> 标签：jquery, html, css

我是 jQuery 的新手，当我单击以更改按钮的颜色而不更改所有类时我需要。我怎么能做到这一点。

```
<div class="button">First button</div>
<div class="button">Second button</div>
<div class="button">3 button</div>
<div class="button">4 button</div>

$('.button').on('click', function() {
    $('.button').css('background-color', '#C00');
})

.button {
    background-color: #9C0;
    height: 50px;
    width: 100px;
    margin-top:5px;
} 
```

[http://jsfiddle.net/nJ895/](http://jsfiddle.net/nJ895/)

所以当我点击第一个按钮时，我需要在点击的按钮上更改颜色，而不是在所有按钮上，所以有什么办法吗？

更新：

抱歉，我尝试了您的解决方案，但我的代码更复杂，无法使用：http: [//jsfiddle.net/nJ895/7/](http://jsfiddle.net/nJ895/7/)

在这里我需要解决一些问题，所以当我点击“1按钮”时，这个按钮必须改变颜色，但如果我点击“2按钮”，那么“1按钮必须失去颜色”和“2按钮得到颜色”.. . 这不会影响其他 div 中的第二个“1 按钮”和“2 按钮”，它们必须以相同的方式工作......请帮助。在这种情况下，#id_ 也不重要，但我需要在这里显示所有代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:20:50.800

```
$('.button').on('click', function() {
    $(this).css('background-color', '#C00');
}); 
```

更新演示：http: [//jsfiddle.net/nJ895/1/](http://jsfiddle.net/nJ895/1/)

由于您是 jQuery 新手，我将解释发生了什么。在您的原始代码中，您选择所有具有类的节点`.button`并将点击事件绑定到所有节点。当其中任何一个被单击时，您将再次重新选择所有节点并将 CSS*应用于所有*节点。该`$(this)`对象将指向绑定到刚刚发生的事件的节点，并且仅将 CSS 应用于该适当的节点。

我建议考虑添加一个新类而不是应用文字 CSS。它将允许您将自己的风格保留在 JavaScript 代码之外。

**CSS**：

```
.button {
    background-color : #9C0;
    height           : 50px;
    width            : 100px;
    margin-top       : 5px;
}
.button.active {
    background-color: #C00;
} 
```

**jQuery** :

```
$('.button').on('click', function() {
    $(this).toggleClass('active');
}); 
```

演示：http: [//jsfiddle.net/nJ895/3/](http://jsfiddle.net/nJ895/3/)

或者，如果您只想一次选择一个按钮：

```
$('.button').on('click', function() {
    $(this).addClass('active').siblings().removeClass('active');
}); 
```

演示：http: [//jsfiddle.net/nJ895/5/](http://jsfiddle.net/nJ895/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:21:15.463

尝试使用`$(this)`

```
$(this).css('background-color', '#C00'); 
```

在您的情况下，您的目标是所有按钮的集合名为`$('.button')`. 您需要将事件捕获到获得事件的当前对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:24:28.857

您需要使用`this`来定位点击的元素

```
$('.button').on('click', function() {
    $(this).css('background-color', '#C00');
}) 
```

* * *

但是更改颜色的更正确方法是使用附加类

**CSS**

```
.button {
    background-color: #9C0;
    height: 50px;
    width: 100px;
    margin-top:5px;
}
.button.active{
    background-color: #c00;
} 
```

**jQuery**

```
$('.button').on('click', function() {
    $(this).addClass('active');
}); 
```

演示在[http://jsfiddle.net/nJ895/2/](http://jsfiddle.net/nJ895/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T17:51:16.550

```
jQuery('.button').live('click', function() {
    jQuery(this).css('background-color', 'red');
}) 
```

# spring - Spring如何用盐编码密码

> ID：15367867
> 
> 赞同：0
> 
> 时间：2013-03-12T17:20:11.187
> 
> 标签：spring, spring-security, md5, salt

我介绍了 Web 应用程序的 Spring 安全性。首先，我的身份验证管理器如下。

```
<authentication-manager>
    <authentication-provider>
        <password-encoder hash='md5'>
        </password-encoder> 
        <jdbc-user-service data-source-ref="dataSource"/>
    </authentication-provider>
</authentication-manager> 
```

为了进行测试，我将使用“1”作为用户名和密码。我使用在线 md5 哈希生成器，我得到了 md5(1) 的“c4ca4238a0b923820dcc509a6f75849b”。使用此配置登录可以正常工作。我想尝试盐，我修改身份验证管理器如下。

```
<authentication-manager>
    <authentication-provider>
        <password-encoder hash='md5'>
            <salt-source user-property="username"/>
        </password-encoder> 
        <jdbc-user-service data-source-ref="dataSource"/>
    </authentication-provider>
</authentication-manager> 
```

所以当我在网上读到盐的使用方式就像散列（盐+密码）一样。所以使用相同的工具我散列'11'然后得到散列值'6512bd43d9caa6e02c990b0a82652dca'。我用该值更新数据库。但是现在登录失败并抛出错误“原因：凭据错误”。这意味着密码与数据库不匹配。所以我的问题是，这是否意味着 Spring 使用不同的盐腌方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:49:20.413

既然使用的是spring security，那么可以考虑使用`PasswordEncoder`bean。

```
<beans:bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder">
</beans:bean> 
```

您的身份验证管理器将类似于（更改代码）：

```
<authentication-manager>
    <authentication-provider>
        <password-encoder ref="passwordEncoder">
            <salt-source user-property="username"/>
        <password-encoder/>
        <jdbc-user-service data-source-ref="dataSource"/>
    </authentication-provider>
 </authentication-manager> 
```

访问[Spring Security Custom Authentication and Password Encoding](https://stackoverflow.com/questions/7658853/spring-security-custom-authentication-and-password-encoding) & [Spring Security:password encoding in DB and in applicationContext](https://stackoverflow.com/questions/8521251/spring-securitypassword-encoding-in-db-and-in-applicationconext)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:34:34.423

该死的反正春天腌制方法是不同的。用户按照 Java 代码使用盐计算哈希。

```
public static void main(String[] args) {
    Md5PasswordEncoder md5 = new Md5PasswordEncoder();
    String hash = md5.encodePassword("1", "1");
    System.out.println(hash);
} 
```

我得到了“6a8a1f634e38d30e87b450899b31f810”作为加密密码（不同的权利？？）。然后我将它插入数据库并尝试我的应用程序登录。沃拉！！！登录成功。

# sql - IIS 7.5 前端和 SQL Server 2008 R2 后端。如何使用应用程序池域帐户连接到 SQL

> ID：15367872
> 
> 赞同：0
> 
> 时间：2013-03-12T17:20:18.160
> 
> 标签：sql, sql-server-2008-r2, iis-7.5

好的，我注意到很多与我正在做的事情很接近的问题，但他们似乎都没有处理我正在寻找的东西。

这是我想要做的。我在快乐域上有两台服务器。一个是 IIS 7.5，另一个是 SQL Server 2008 R2。两者都是快乐域上的 Windows 2008 R2 服务器。应用程序被调用`newapp`，应用程序池为`newpool`

我创建了一个名为`app1`快乐域的活动目录帐户。

我`happy/app1`为应用程序池输入了应用程序池标识`newpool`。我授予它对服务器的访问权限，并授予它对 SQL Server 数据库的 DBA 所有者访问权限。

开发人员已将安全设置为 true 和 sspi。那不应该让它使用该`apppool`帐户连接到 SQL Server 数据库吗？

目前我得到`System.Data.SqlClient.SqlException`：

> *用户“NT AUTHORITY\ANONYMOUS LOGON”登录失败*

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:23:12.373

*您必须在应用程序本身*中启用一种用于建立身份的身份验证方法，例如 Windows 集成身份验证。这与运行应用程序池的身份无关。

您似乎在此网站上启用了匿名访问，因此尝试使用“NT AUTHORITY/ANONYMOUS LOGON”登录 SQL Server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T11:43:54.963

由于在应用程序池中指定了帐户，因此只需转到 IIS-> 身份验证-> 匿名身份验证-> 编辑

然后选择应用程序池身份而不是特定帐户。这将确保应用程序将在应用程序池中的域帐户下运行

# java - 用数组元素填充 GridBagLayout

> ID：15367874
> 
> 赞同：0
> 
> 时间：2013-03-12T17:20:24.133
> 
> 标签：java, arrays, gridbaglayout

我正在尝试使用 GridBagLayout 构建一个包含数组元素的面板。创建元素工作得很好。问题是布局管理器被忽略或约束没有正确应用，无论如何按钮的排列就像根本没有布局管理器一样。那么我该怎么做才能让它看起来像一张桌子？

提前致谢！

旁注：不，JTable 不是一个选项。在我的应用程序中，实际上只创建了一些按钮。

编辑：我发现了问题。我只是忘记了“setLayout(gbl);”这一行 愚蠢的我。

```
//(includes)

public class GUI {
    public static void main (String[] args) {
        JFrame frame = new JFrame();
        frame.add (new MyPanel(5, 4);
        frame.setVisible(true);
    }

    private class MyPanel () extends JPanel {
        public MyPanel (int x, int y) {
            GridBagLayout gbl = new GridBagLayout();
            GridBagConstraints gbc = new GridBagConstraints();
            setLayout (gbl);

            JButton[][] buttons = new JButton[x][y];
            for (int i=0; i<x; i++) {
                for (int j=0; j<y; j++) {
                    buttons[i][j] = new JButton("a"+i+j);
                    gbc.gridx = j; gbc.gridy = i;
                    gbl.setConstraints(buttons[i][j], gbc);
                    add (buttons[i][j]);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:39:01.287

您也可以考虑使用[MigLayout](http://www.miglayout.com/)，代码更简单，更易于维护：

```
public class MyPanel extends JPanel {
    public MyPanel(int x, int y) {
        setLayout(new MigLayout("wrap " + x));

        JButton[][] buttons = new JButton[x][y];
        for (int i = 0; i < x; i++) {
            for (int j = 0; j < y; j++) {
                buttons[i][j] = new JButton("a" + i + j);
                add(buttons[i][j]);
            }
        }
    }
} 
```

# java - 通过一组索引将字符串分成 N 段

> ID：15367878
> 
> 赞同：-1
> 
> 时间：2013-03-12T17:20:33.837
> 
> 标签：java, split

有人可以通过传递一组索引来帮助我获得一个字符串并把它分成 N 块...

例如

索引集 = (0,3,7,10);

并通过这些索引来制动一个字符串

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:25:41.833

我会尝试用循环来做。

```
for (int i = 0; i < indexes.length; i++) {
  if (i == indexes.length -1) {
    string.substring(indexes[i]);
  } else {
    string.substring(indexes[i], indexes[i+1]);
  }
} 
```

将子字符串捕获到某个适当的容器中（列表或数组，取决于）

# php - 使用 Multiple Select 或 JOIN ON 在获取的数组中添加列响应

> ID：15367882
> 
> 赞同：0
> 
> 时间：2013-03-12T17:20:38.927
> 
> 标签：php, mysql, join, multi-select

我在 stackoverflow 上尝试了多个答案，但似乎无法找到适当的解决方案来解决我的问题。我现在正在尝试的当前查询是：

```
SELECT (
SELECT * FROM mds_media
) AS m
(
SELECT video_id FROM mds_featured WHERE video_id = m.id
) AS f

ORDER BY f.video_id DESC, m.id DESC 
```

我也试过加入

```
SELECT mds_media.*, mds_featured.* FROM mds_media AS m
JOIN mds_featured 
ON mds_featured.video_id = m.id
ORDER BY mds_featured.video_id DESC, mds_media.id DESC 
```

我唯一想做的就是将 mds_featured 列 video_id 附加到整体结果（如果它是找到的媒体的 id）。所以我的 mysql_fetch_array() 例如输出：

array(id,name,blah,blah,blah,video_id) //当然包含值 //如果 mds_featured 在它的 video_id 列中存在与来自 mds_media 的 id 相同的值的行

或者

array(id,name,blah,blah,blah) //如果 mds_featured.video_id 没有带有 mds_media.id 的行

感谢提供解决方案的任何建议/有用提示。要么我没有正确阅读，要么我在某个地方搞砸了，我看到的答案对我没有帮助。抱歉，如果我已经解决了这个问题并且没有提供的解决方案。

我不打算将我的数据库表更改为包含 feature/video_id 的列，因为该表是分开的是有原因的。

* * *

更新了工作代码以供其他人将来参考：

```
SELECT m.id, m.name, mds_featured.video_id 
FROM mds_media m 
LEFT JOIN mds_featured 
ON mds_featured.video_id = m.id 
ORDER BY mds_featured.video_id DESC, m.id DESC 
```

感谢瓦特夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:29:01.630

将您的 JOIN 更改为 LEFT JOIN。这将为您提供 mds_media 中的所有行与 mds_featured 中的任何匹配。当没有匹配时，mds_featured 列将为空。

```
SELECT mds_media.*, mds_featured.* 
FROM mds_media AS m
LEFT JOIN mds_featured 
ON mds_featured.video_id = m.id
ORDER BY mds_featured.video_id DESC, mds_media.id DESC 
```

# mysql - 如何在不知道服务名称的情况下从 cmd 启动服务 mysql？

> ID：15367885
> 
> 赞同：2
> 
> 时间：2013-03-12T17:20:56.770
> 
> 标签：mysql, windows-services, cmd

我需要检查`mysqld`服务是否正在运行。但是，服务的名称可能会因安装它的计算机而异。例如，在一台计算机上，它可能被命名为`MySQL56`. 所以我`net start mysql56`改用。

如何提前获取服务名称？

我尝试了类似`C:\>"C:\Program Files\MySQL\MySQL Server 5.6\bin\mysqld" --defaults-file="C:\ProgramData\MySQL\MySQL Server 5.6\my.ini"`在 cmd 中的方法，在这里我可以更改安装期间或首次启动时定义的用户路径，它将启动该服务。

但是，如果我执行该操作，则 cmd 窗口将保持打开状态，等待服务停止。这意味着用户必须手动关闭窗口。有没有办法执行上面的行并让 cmd 窗口自动关闭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T18:08:31.247

我不太清楚你想要达到什么目的。您想找出已安装的 MySQL 服务的名称吗？您可以`wmic`为此使用：

```
wmic service where "PathName LIKE '%mysqld%'" get DisplayName /value | findstr /i "displayname"
if %errorlevel% equ 0 (
  echo MySQL service installed.
) else (
  echo MySQL service not installed.
) 
```

或者您想在`mysqld`不安装服务的情况下启动？您可以使用该`--standalone`选项执行此操作。

```
set SERVER=%ProgramFiles%\MySQL\MySQL Server 5.6\bin\mysqld
set CONFIG=%ProgramData%\MySQL\MySQL Server 5.6\my.ini
"%SERVER%" --defaults-file="%CONFIG%" --standalone 
```

但是，该进程总是阻塞控制台，因此如果您希望脚本`mysqld`在后台运行时执行其他操作，您需要在另一个`cmd`实例中启动它：

```
set SERVER=%ProgramFiles%\MySQL\MySQL Server 5.6\bin\mysqld
set CONFIG=%ProgramData%\MySQL\MySQL Server 5.6\my.ini
start "" "%COMSPEC%" /c "%SERVER%" --defaults-file="%CONFIG%" --standalone 
```

添加`/b`抑制第二个命令提示符窗口的选项：

```
start "" /b "%COMSPEC%" /c "%SERVER%" --defaults-file="%CONFIG%" --standalone 
```

# google-app-engine - Google Apps Marketplace 应用程序 - 如何添加支持应用程序的范围

> ID：15367886
> 
> 赞同：4
> 
> 时间：2013-03-12T17:21:01.870
> 
> 标签：google-app-engine, manifest, scopes, google-apps-marketplace

我们有两个 appengine 应用程序。一个是为另一个面向客户的服务应用程序提供数据。我们正在将面向客户的应用程序作为可安装应用程序放入 Google Marketplace。我们希望在应用程序清单中包含用于访问 Provisioning API 的范围。但是，需要此访问权限的是服务应用程序。

是否可以在清单中指定允许访问另一个应用程序的范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:00:22.270

您可以在“服务应用程序”中使用从市场（面向客户）应用程序获得的相同消费者密钥/秘密。

# functional-programming - 为什么 OCaml List.fold_right 没有实现为尾递归？

> ID：15367888
> 
> 赞同：6
> 
> 时间：2013-03-12T17:21:13.210
> 
> 标签：functional-programming, ocaml

`List.fold_right`不像`tail-recursive`这里所说的那样[http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)

**我的问题是为什么`List.fold_right`没有实施为`tail-recursive`？**

我认为这样做并不难

```
let rev l = 
  let rec revr acc = function
    | [] -> acc
    | hd::tl -> revr (hd::acc) tl
  in 
  revr [] l;;

let fold_right f l b =
  let rev_l = rev l 
  in 
  let rec folder_rr acc = function
    | [] -> acc
    | hd::tl -> folder_rr (f hd acc) tl
  in 
  folder_rr b rev_l;; 
```

我还在库中发现，一些函数`tail-recursive`虽然可以实现为`tail-recursive`. **制造商是如何做出这样的决定的？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T17:27:08.320

这种尾递归实现可以应用于`fold_right`较大的列表，但代价是较短的列表会变慢，因为您必须遍历列表两次。最初的开发人员认为，允许列表的极端用例（如果您有数千个元素，则无论如何都应该计划一个更高效的数据结构）以牺牲更丑陋的代码和使其他所有人的性能更差为代价，这不是一个好的权衡.

有很多不同的方法可以使用尾递归映射、折叠右等。您会在扩展标准库、古老的 Extlib 以及更新的电池和核心的库中找到它们。实现技术从你的，到对前一千个左右的项目乐观地使用非 tailrec 版本的技巧，然后切换到 tailrec 版本，到丑陋的不安全技巧，以 cons cell 突变为代价进行单次遍历（这也会降低性能）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-12T17:27:30.947

这个问题以前被问过，可能很多次了。您可以在此处阅读以前的一些答案：

[为什么 OCaml 标准库有这么多非尾递归函数？](https://stackoverflow.com/questions/12012585)

我的快速回答是，对于小型案例，非尾递归实现通常要快得多。实施者显然认为这是一个很好的权衡。

# c# - XmlWriter 设计背后的 OOP 推理是什么？

> ID：15367894
> 
> 赞同：2
> 
> 时间：2013-03-12T17:21:24.230
> 
> 标签：c#, .net, oop

我查了一下`System.Xml.XmlWriter`类，我注意到它是一个抽象调用类，你必须使用 Create 方法创建新对象，我想知道这背后的 OOP 推理是什么，为什么不`XmlWriter`设计得更像`System.IO`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:29:42.677

这是实践中的[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)，当您希望抽象出应该构建接口或基类的实现的决定时使用。

In this case from what I can see by inspecting the IL when you use `XmlWriter.Create` the method has a number of possible different internal types, e.g. `XmlUtf8RawTextWriterIndent` or `HtmlUtf8RawTextWriter` to choose from - you need to use the `Create` method to create these classes firstly because these types are internal (and therefore you cannot invoke their constructors directly) and also because it is the `Create` method that contains the logic around which writer should be created in what scenario.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:27:07.437

当您想与所有派生类共享某些实现细节但不允许用户简单地实例化并直接使用您的基本抽象类时，您可以使用抽象类。

接口是一个纯抽象类，这意味着所有方法和字段都应该由实现该接口的类实现，因此除了方法/属性签名之外，根本没有代码重用。

对于`System.IO`类，很可能您正在查看诸如 , , 之类的类，`Path`因为所有文件都相同，所有目录都相同等，所以我看不到太多抽象的内容，而[XmlWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)是通用的，并且取决于特定情况，派生的具体类将逐案实施所需的专业化。`File``Directory`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:27:35.657

[`XmlWriter`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)是可以编写 Xml 文档的类的抽象基类。在[docs](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)中，您可以看到各种类都派生自`XmlWriter`将 Xml 写入各种目的地。`XmlWriter`它本身只是为 XML 编写器定义了公共接口和一些表面的实现。

这类似于[抽象`TextWriter`类](http://msdn.microsoft.com/en-us/library/system.io.textwriter.aspx)。

静态`Create`方法似乎存在，因为对于某些情况（例如写入文件），建议使用特定的子类。该子类由相应的`Create`方法实例化。

请注意，`XmlWriter.Create`写入文件不一定会创建[`XmlTextWriter`](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx). .NET 框架代码可能会决定不同的（可能是内部的）类型更适合您的特定环境和设置。当您调用静态`Create`方法时，您不必关心实际实例化的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T17:28:33.903

理解原因的一种方法是查看从`XmlWriter`. 几乎所有的虚拟方法都是`Write`多种多样的。快速浏览一下反射器会显示超过 10 种派生类型，包括那些

*   以标准文本方式编写输出
*   做 Utf8 特定的编码技巧
*   异步写入输出
*   写入+格式化输出

基于此，使其成为抽象类的主要原因是允许开发人员自定义输出和编写输出的方式

# liferay - 如何在其他应用程序中使用 Liferay 的权限系统？

> ID：15367895
> 
> 赞同：3
> 
> 时间：2013-03-12T17:21:28.033
> 
> 标签：liferay, liferay-6

我正在考虑使用 Liferay 的权限系统在外部 Java 应用程序（而不是 portlet）中实现访问安全性。Liferay 具有用于管理用户、组、角色、权限和资源的强大功能。如果我可以利用这些而不是在我们的外部应用程序中重新发明轮子，那就太好了。

Liferay 和我们的外部应用程序配置为使用相同的 CAS 和 LDAP 进行身份验证，因此它们共享相同的用户。

到目前为止，我已经成功地使用 Liferay 的[JSON-WS API](http://www.liferay.com/community/wiki/-/wiki/Main/JSON+Web+Services)来管理用户的角色。这很棒，但我需要把它带到下一步。

**我可以使用 JSON-WS API 定义和管理 Liferay 权限和资源吗？**

我看到了用于检查用户是否具有某些权限（即 has-user-permission）的 API 方法，但我没有看到用于创建和分配权限和资源的方法。

诚然，我需要更好地理解 Liferay 中权限和操作是如何定义的。据我了解，权限和操作是在与特定 portlet 相关联的 XML 文件中定义的。

**在我们的例子中，外部应用程序没有任何 portlet，那么我将如何定义自定义权限和操作？**（也许创建一个仅用于定义操作和资源的自定义 portlet？）。我仍然需要一种以编程方式定义资源的方法，因为需要为我们的外部应用程序中的某些域对象创建资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T10:50:56.600

我知道这很旧，但无论如何我还是想回答这个问题以供将来参考。

您在这里有一个新颖的想法，但我还不太明白您打算如何检查用户是否在您的应用程序中具有特定权限。您是否计划在每个请求上查询 Liferay JSON-WS API 以验证您是否有权限？如果您在服务器端执行此操作，那么您可能会受到性能损失，但否则这个想法似乎还可以。但不要在客户端（通过 javascript 在浏览器中）执行此操作 - 用户可以操纵请求或响应以获取对敏感信息的访问权限。

据我所知，您无法使用 JSON-WS API 定义权限和资源，但它们存储在数据库中，您可以通过 Service Builder 创建自己的 JSON-WS 服务，为您的应用程序公开这些功能。

就定义权限而言 - 由于无论如何您都必须构建自己的服务来管理事物，那么您不妨使用适当的基于 XML 的配置来定义您的权限，并将这些配置与服务一起部署。

我对你最终得到的解决方案有点好奇，因为我假设你已经完成了这个项目。

# jquery - JQuery - 功能上

> ID：15367903
> 
> 赞同：0
> 
> 时间：2013-03-12T17:21:43.090
> 
> 标签：jquery

此代码会影响 id="form_data_voting" 中没有的其他提交按钮吗？我假设不是，对吧？第 3 行也只会影响 ID 为 #form_data_voting 的代码，对吧？

```
jQuery('body').on('submit', '#form_data_voting', function() {

var formContents = jQuery(this).serializeArray();           
var formSource = jQuery(this).find('input[type="submit"]').attr("alt"); 
```

我在 wordpress 中遇到了两个插件的问题，这两个插件都已激活，另一个插件的提交按钮无法正常工作......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:24:15.733

它实际上是正在提交的表单的事件处理程序，而不是被单击的按钮，因此它将处理程序化提交以及人们在触发提交的输入上按下 enter。

是的，第三行代码只会在指定的表单中找到提交元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:26:25.017

您可以强制提交，但这有点奇怪。

```
$('.your-other-submit').on('click', function(e) {
    e.preventDefault();
    $('#form_data_voting').submit();
}); 
```

它将运行您以前的代码。

您甚至可能会在提交中获得更多外部表单：

```
var otherFormContents = jQuery('#yourOtherForm').serializeArray(); 
```

我同意[@Archer](https://stackoverflow.com/a/15367951/1145578)顺便说一句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:26:41.140

是的，这仅适用于 id=#form_data_voting。（包括第三行）

同时，这不是完整的代码，`{`必须关闭。

如果是这样

```
jQuery('body').on('submit', '#form_data_voting', function() {

  var formContents = jQuery(this).serializeArray();           
  var formSource = jQuery(this).find('input[type="submit"]').attr("alt");
} 
```

那么这应该可以按预期工作。是的，你的问题。

# xml - 为什么需要 XML 编码？

> ID：15367908
> 
> 赞同：3
> 
> 时间：2013-03-12T17:21:56.080
> 
> 标签：xml

我对 XML 有基本的了解。我的问题是为什么需要提及在 XML 文档开头使用的编码以及为什么需要编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:26:37.240

[它不是必需](http://www.w3.org/TR/REC-xml/#NT-EncodingDecl)的，尽管通常您可能希望包含它：

> 在没有外部字符编码信息（例如 MIME 标头）的情况下，以 UTF-8 或 UTF-16 以外的编码存储的已解析实体必须以包含编码的文本声明（参见 4.3.1 文本声明）开头宣言。

因此，例如，当通过 HTTP 传输 XML 时，XML 解析器可能会使用来自`Content-Type`标头的值，如下所示：

```
Content-Type application/xml; charset=UTF-8 
```

但是一旦这个文档存储在本地，它就不会包含这些信息——因此将编码包含到 XML 文档的声明部分似乎是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:29:23.237

> 为什么有必要在 XML 文档的开头提及使用的编码

它不是。有默认值。（UTF-8 和 UTF-16，可以通过编程方式可靠地区分）

> 以及为什么需要编码

计算机只理解二进制。编码是用二进制表示字母、数字等的过程，因此可以由计算机处理。不同的编码以不同的方式存储字符。

# html5-canvas - webgl中的文本到纹理

> ID：15367909
> 
> 赞同：3
> 
> 时间：2013-03-12T17:21:58.427
> 
> 标签：html5-canvas, transparency, webgl, textures

我有一个绘制球体的 webGL 代码，我在旁边添加了文本标签。我正在做的是创建 2D 矩形，然后用我的文本应用纹理。

```
function createCubeTexture(text) {

var canvas = document.createElement('canvas');
canvas.id     = "hiddenCanvas";
canvas.width  = 512;
canvas.height = 128;
canvas.style.display   = "none";
var body = document.getElementsByTagName("body")[0];
body.appendChild(canvas);        

var cubeImage = document.getElementById('hiddenCanvas');
var ctx = cubeImage.getContext('2d');
ctx.beginPath();
ctx.rect(0, 0, ctx.canvas.width, ctx.canvas.height);            
ctx.fillStyle = 'rgba(255,255,255,0)';
ctx.fill();
ctx.fillStyle = 'black';
ctx.font = "65px Arial";
ctx.textAlign = 'center';            
ctx.fillText(text, ctx.canvas.width / 2, ctx.canvas.height / 2);
ctx.restore();        

var texture = gl.createTexture();
gl.bindTexture(gl.TEXTURE_2D, texture);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
handleTextureLoaded(cubeImage, texture) 

return texture;
} 
```

但我正在寻找的是完全透明的纹理。我想要没有bgcolor的文本。我可以使用 alpha 并获得“类似透明”的颜色，但我的矩形从不透明（如果 alpha=0，那么它是白色的），我从来没有设法通过矩形看到球体。

任何想法

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T05:21:02.460

为了使用 alpha = 0 进行绘制，您需要`globalCompositeOperation`在画布 2d 中使用不同的值。在上面的代码中`rgba(255,255,255,0)`，默认值`globalCompositingOperation`基本上`source-over`是这样做的

```
dest = dest * (1 - alpha) + source * alpha 
```

由于 alpha 为 0，这意味着它什么也不画，所以你的第一次`fill`调用什么也不画。

而是将 alpha 设置为 1，但`for the fill, then set back to`对文本使用 'ctx.globalCompositeOperation = "destination-out" source-over`。

请参阅这个问题 [How do you draw with alpha = 0 in an html5 canvas to 'erase'](https://stackoverflow.com/questions/14066498/how-do-you-draw-with-alpha-0-in-an-html5-canvas-to-erase)。

尽管实际上，在您的情况下，只需删除填充即可。画布元素开始完全透明。清除画布回透明调用`ctx.clearRect`。

这是从另一个示例复制的片段：

```
var gl;

function initGL(canvas) {
    try {
        gl = canvas.getContext("webgl");
        gl.viewportWidth = canvas.width;
        gl.viewportHeight = canvas.height;
    } catch (e) {
    }
    if (!gl) {
        alert("Could not initialise WebGL, sorry :-(");
    }
}

function getShader(gl, id) {
    var shaderScript = document.getElementById(id);
    if (!shaderScript) {
        return null;
    }

    str = shaderScript.text;

    var shader;
    if (shaderScript.type == "x-shader/x-fragment") {
        shader = gl.createShader(gl.FRAGMENT_SHADER);
    } else if (shaderScript.type == "x-shader/x-vertex") {
        shader = gl.createShader(gl.VERTEX_SHADER);
    } else {
        return null;
    }

    gl.shaderSource(shader, str);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        alert(gl.getShaderInfoLog(shader));
        return null;
    }

    return shader;
}

var shaderProgram;

function initShaders() {
    var fragmentShader = getShader(gl, "shader-fs");
    var vertexShader = getShader(gl, "shader-vs");

    shaderProgram = gl.createProgram();
    gl.attachShader(shaderProgram, vertexShader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        alert("Could not initialise shaders");
    }

    gl.useProgram(shaderProgram);

    // This is a bad code.
    // If the context is lsot shaderProgram will be null
    // and trying to assign a vertexPositionAttribute to null
    // will throw an exception.
    // better would be 
    // shaderProgram = {};
    // shaderProgram.program = gl.createProgram();
    // shaderProgram.vertexPositionAtrribute = ...
    shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
    gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

    shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
    gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);

    shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
    shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");
    shaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, "uSampler");
}

var texturen = new Array();
function initTexture(text,texturen)  
{
  var anz = texturen.length;
  texturen[anz] = gl.createTexture();
  // this is a bad code. on context lost gl.createTexture() will return null and
  // an exception will be thrown when you try to attach .image to null
  // Better would be
  // texturen[anz] = {};
  // texturen[anz].texture = gl.createTexture();
  // texturen[anz].image = new Image();
  var c = document.createElement("canvas");
  c.width = 256;
  c.height = 256;
  var ctx = c.getContext("2d"); 
  //ctx.fillStyle = "rgba(0, 0, 0, 1)";
  //ctx.globalCompositeOperation = "destination-out";
  //ctx.fillRect(0, 0, 64, 64);
  //ctx.globalCompositeOperation = "source-over";
  ctx.fillStyle = "rgb(255, 128, 64)";
  ctx.font = "40px Arial";
  ctx.fillText(text, 128 - 64, 128);
  gl.bindTexture(gl.TEXTURE_2D, texturen[anz]);
  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, c);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
} 

var mvMatrix = mat4.create();
var mvMatrixStack = [];
var pMatrix = mat4.create();

function mvPushMatrix() {
    var copy = mat4.create();
    mat4.set(mvMatrix, copy);
    mvMatrixStack.push(copy);
}

function mvPopMatrix() {
    if (mvMatrixStack.length == 0) {
        throw "Invalid popMatrix!";
    }
    mvMatrix = mvMatrixStack.pop();
}

function setMatrixUniforms() {
    gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);
    gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);
}

function degToRad(degrees) {
    return degrees * Math.PI / 180;
}

function initBuffers() {
    vertBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
    var vertices = [
        // Front face
        -1.0, -1.0,  1.0,
         1.0, -1.0,  1.0,
         1.0,  1.0,  1.0,
        -1.0,  1.0,  1.0,

        // Back face
        -1.0, -1.0, -1.0,
        -1.0,  1.0, -1.0,
         1.0,  1.0, -1.0,
         1.0, -1.0, -1.0,

        // Top face
        -1.0,  1.0, -1.0,
        -1.0,  1.0,  1.0,
         1.0,  1.0,  1.0,
         1.0,  1.0, -1.0,

       // Bottom face
        -1.0, -1.0, -1.0,
         1.0, -1.0, -1.0,
         1.0, -1.0,  1.0,
        -1.0, -1.0,  1.0,

        // Right face
         1.0, -1.0, -1.0,
         1.0,  1.0, -1.0,
         1.0,  1.0,  1.0,
         1.0, -1.0,  1.0,

        // Left face
        -1.0, -1.0, -1.0,
        -1.0, -1.0,  1.0,
        -1.0,  1.0,  1.0,
        -1.0,  1.0, -1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

    // This is bad code. See the above examples of bad code.
    // vertBuffer will be null on context lost and this code
    // will throw an exception.
    vertBuffer.itemSize = 3;
    vertBuffer.numItems = 24;

    CoordBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER,CoordBuffer);
    var textureCoords = [
      // Front face
      1.0, 0.0,
      0.0, 0.0,
      0.0, 1.0,
      1.0, 1.0,

      // Back face
      0.0, 0.0,
      0.0, 1.0,
      1.0, 1.0,
      1.0, 0.0,

      // Top face
      1.0, 1.0,
      1.0, 0.0,
      0.0, 0.0,
      0.0, 1.0,

   // Bottom face
      0.0, 1.0,
      1.0, 1.0,
      1.0, 0.0,
      0.0, 0.0,

      // Right face
      0.0, 0.0,
      0.0, 1.0,
      1.0, 1.0,
      1.0, 0.0,

      // Left face
      1.0, 0.0,
      0.0, 0.0,
      0.0, 1.0,
      1.0, 1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
    CoordBuffer.itemSize = 2;
    CoordBuffer.numItems = 24;

    IndexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, IndexBuffer);
    var Indices = [
        0, 1, 2,      0, 2, 3,    // Front face
        4, 5, 6,      4, 6, 7,    // Back face
        8, 9, 10,     8, 10, 11,  // Top face
        12, 13, 14,   12, 14, 15, // Bottom face
        16, 17, 18,   16, 18, 19, // Right face
        20, 21, 22,   20, 22, 23  // Left face
    ];
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(Indices), gl.STATIC_DRAW);
    IndexBuffer.itemSize = 1;
    IndexBuffer.numItems = 36;
}

var xRot = 0;
var yRot = 0;
var zRot = 0;

function drawScene() {
    gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    mat4.perspective(pMatrix, 45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0);

    mat4.identity(mvMatrix);

    mat4.translate(mvMatrix, mvMatrix, [0.0, 0.0, -5.0]);

    mat4.rotate(mvMatrix, mvMatrix, degToRad(xRot), [1, 0, 0]);
    mat4.rotate(mvMatrix, mvMatrix, degToRad(yRot), [0, 1, 0]);
    mat4.rotate(mvMatrix, mvMatrix, degToRad(zRot), [0, 0, 0]);
    setMatrixUniforms();

    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,vertBuffer.itemSize, 
       gl.FLOAT, false, 0, 0);
    gl.bindBuffer(gl.ARRAY_BUFFER, CoordBuffer);
    gl.vertexAttribPointer(shaderProgram.textureCoordAttribute,CoordBuffer.itemSize, 
       gl.FLOAT, false, 0, 0);
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, IndexBuffer);

// Draw face 0
gl.bindTexture(gl.TEXTURE_2D, texturen[0]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);

// Draw face 1
gl.bindTexture(gl.TEXTURE_2D, texturen[1]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 12);

// Draw face 2
gl.bindTexture(gl.TEXTURE_2D, texturen[2]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 24);

// Draw face 3
gl.bindTexture(gl.TEXTURE_2D, texturen[3]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 36);

// Draw face 4
gl.bindTexture(gl.TEXTURE_2D, texturen[4]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 48);

// Draw face 5
gl.bindTexture(gl.TEXTURE_2D, texturen[5]);
gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 60);
}

var lastTime = 0;

function animate() {
    var timeNow = new Date().getTime();
    if (lastTime != 0) {
        var elapsed = timeNow - lastTime;

        xRot += (90 * elapsed) / 1000.0;
        yRot += (90 * elapsed) / 1000.0;
        zRot += (90 * elapsed) / 1000.0;
    }
    lastTime = timeNow;
}

function tick() {
    requestAnimationFrame(tick);
    drawScene();
    animate();
}

function webGLStart() {
    var canvas = document.getElementById("lesson05-canvas");
    initGL(canvas);
    initShaders();
    initBuffers();
    initTexture("face 0",texturen);
    initTexture("face 1",texturen);
    initTexture("face 2",texturen);
    initTexture("face 3",texturen);
    initTexture("face 4",texturen);
    initTexture("face 5",texturen);

    gl.clearColor(0.0, 0.0, 0.0, 1.0);
    gl.enable(gl.BLEND);
    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
    tick();
}

webGLStart(); 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.3.2/gl-matrix-min.js"></script>
<script id="shader-fs" type="x-shader/x-fragment">
precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void) {
    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
}
</script>

<script id="shader-vs" type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

varying vec2 vTextureCoord;

void main(void) {
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
    vTextureCoord = aTextureCoord;
}
</script>

<canvas id="lesson05-canvas" style="border: none;" width="500" height="500">    </canvas> 
```

# javascript - 立即调用函数和jQuery立即调用函数之间的区别

> ID：15367912
> 
> 赞同：1
> 
> 时间：2013-03-12T17:22:01.727
> 
> 标签：javascript, jquery

我已经阅读了`(function(){})();`立即调用并且不需要调用的内容。并且`$(function());`也立即被调用。

*   它们都具有相同的功能吗？
*   文档完全加载后立即调用函数是否加载？
*   的实际功能是`$(function());`什么？
*   文件完全`$(function());`加载后呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T17:23:02.600

```
$(function(){}); 
```

不会立即调用：当 DOM 准备好时调用它。这是一条捷径

```
$(document).ready(function(){}); 
```

查看[文档](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:24:03.457

`(function () {})()`是立即调用的匿名函数。

`$(function () {});`是 jQuery 的简写`$(document).ready(function () {});`

# php - 带有连接和聚合值的 MYSQL GroupBy

> ID：15367915
> 
> 赞同：1
> 
> 时间：2013-03-12T17:22:25.113
> 
> 标签：php, mysql, sql, database, doctrine

这是我的学说 (1.2) 查询的第一种形式，页面底部是返回的内容。

```
$q = Doctrine_Query::create()
            ->select('i.id, i.time_estimate, i.assigned_to, ts.time_spent')
            ->from('Model_Issue i')
            ->innerJoin('i.User_2 user')
            ->leftJoin('i.IssuesTimeSpent ts')
            ->where('i.project_id = ?',$project_id); 
```

我正在尝试这样做：

```
$q = Doctrine_Query::create()
            ->select('i.id, sum(i.time_estimate) as time_estimate, i.assigned_to, sum(ts.time_spent) as time_spent')
            ->from('Model_Issue i')
            ->innerJoin('i.User_2 user')
            ->leftJoin('i.IssuesTimeSpent ts')
            ->where('i.project_id = ?',$project_id)
            ->groupBy('assigned_to'); 
```

我预计两个用户 (assigned_to) 的回报是花费在与 assignment_to id 相关的所有问题上的所有时间的总和，与 time_estimate 相同。

但这就是返回的；

```
array
  0 => 
    array
      'id' => string '1' (length=1)
      'assigned_to' => string '1' (length=1)
      'time_estimate' => string '238' (length=3) <-  this is wrong
      'time_spent' => string '72' (length=2) <-  this is correct i believe
  1 => 
    array
      'id' => string '7' (length=1)
      'assigned_to' => string '2' (length=1)
      'time_estimate' => string '3' (length=1) <-  this is wrong
      'time_spent' => string '30' (length=2) <-  this is correct i believe 
```

我是否在尝试正确的事情，我想要的输出是否可以仅通过 groupby 和聚合值来实现？还是我需要做一些特别的事情？

问候，

注意 groupby / sums 之前的完整数组

```
 array
      0 => 
        array
          'id' => string '1' (length=1)
          'time_estimate' => string '4' (length=1)
          'assigned_to' => string '1' (length=1)
          'IssuesTimeSpent' => 
            array
              0 => 
                array
                  'id' => string '1' (length=1)
                  'time_spent' => string '2' (length=1)
              1 => 
                array
                  'id' => string '40' (length=2)
                  'time_spent' => string '1' (length=1)
      1 => 
        array
          'id' => string '2' (length=1)
          'time_estimate' => string '6' (length=1)
          'assigned_to' => string '1' (length=1)
          'IssuesTimeSpent' => 
            array
              0 => 
                array
                  'id' => string '2' (length=1)
                  'time_spent' => string '4' (length=1)
              1 => 
                array
                  'id' => string '5' (length=1)
                  'time_spent' => string '3' (length=1)
              2 => 
                array
                  'id' => string '6' (length=1)
                  'time_spent' => string '3' (length=1)
              3 => 
                array
                  'id' => string '8' (length=1)
                  'time_spent' => string '1' (length=1)
              4 => 
                array
                  'id' => string '9' (length=1)
                  'time_spent' => string '1' (length=1)
              5 => 
                array
                  'id' => string '10' (length=2)
                  'time_spent' => string '1' (length=1)
              6 => 
                array
                  'id' => string '11' (length=2)
                  'time_spent' => string '1' (length=1)
              7 => 
                array
                  'id' => string '12' (length=2)
                  'time_spent' => string '2' (length=1)
              8 => 
                array
                  'id' => string '13' (length=2)
                  'time_spent' => string '1' (length=1)
              9 => 
                array
                  'id' => string '14' (length=2)
                  'time_spent' => string '1' (length=1)
              10 => 
                array
                  'id' => string '15' (length=2)
                  'time_spent' => string '1' (length=1)
              11 => 
                array
                  'id' => string '16' (length=2)
                  'time_spent' => string '1' (length=1)
              12 => 
                array
                  'id' => string '17' (length=2)
                  'time_spent' => string '1' (length=1)
              13 => 
                array
                  'id' => string '18' (length=2)
                  'time_spent' => string '1' (length=1)
              14 => 
                array
                  'id' => string '19' (length=2)
                  'time_spent' => string '1' (length=1)
              15 => 
                array
                  'id' => string '20' (length=2)
                  'time_spent' => string '1' (length=1)
              16 => 
                array
                  'id' => string '21' (length=2)
                  'time_spent' => string '1' (length=1)
              17 => 
                array
                  'id' => string '22' (length=2)
                  'time_spent' => string '1' (length=1)
              18 => 
                array
                  'id' => string '23' (length=2)
                  'time_spent' => string '1' (length=1)
              19 => 
                array
                  'id' => string '24' (length=2)
                  'time_spent' => string '1' (length=1)
              20 => 
                array
                  'id' => string '25' (length=2)
                  'time_spent' => string '1' (length=1)
              21 => 
                array
                  'id' => string '26' (length=2)
                  'time_spent' => string '1' (length=1)
              22 => 
                array
                  'id' => string '27' (length=2)
                  'time_spent' => string '1' (length=1)
              23 => 
                array
                  'id' => string '28' (length=2)
                  'time_spent' => string '1' (length=1)
              24 => 
                array
                  'id' => string '29' (length=2)
                  'time_spent' => string '1' (length=1)
              25 => 
                array
                  'id' => string '30' (length=2)
                  'time_spent' => string '1' (length=1)
              26 => 
                array
                  'id' => string '31' (length=2)
                  'time_spent' => string '1' (length=1)
              27 => 
                array
                  'id' => string '32' (length=2)
                  'time_spent' => string '1' (length=1)
              28 => 
                array
                  'id' => string '33' (length=2)
                  'time_spent' => string '1' (length=1)
              29 => 
                array
                  'id' => string '34' (length=2)
                  'time_spent' => string '1' (length=1)
              30 => 
                array
                  'id' => string '35' (length=2)
                  'time_spent' => string '1' (length=1)
              31 => 
                array
                  'id' => string '36' (length=2)
                  'time_spent' => string '1' (length=1)
              32 => 
                array
                  'id' => string '37' (length=2)
                  'time_spent' => string '1' (length=1)
              33 => 
                array
                  'id' => string '38' (length=2)
                  'time_spent' => string '1' (length=1)
              34 => 
                array
                  'id' => string '39' (length=2)
                  'time_spent' => string '3' (length=1)
              35 => 
                array
                  'id' => string '42' (length=2)
                  'time_spent' => string '1' (length=1)
              36 => 
                array
                  'id' => string '43' (length=2)
                  'time_spent' => string '10' (length=2)
      2 => 
        array
          'id' => string '3' (length=1)
          'time_estimate' => string '4' (length=1)
          'assigned_to' => string '1' (length=1)
          'IssuesTimeSpent' => 
            array
              0 => 
                array
                  'id' => string '3' (length=1)
                  'time_spent' => string '3' (length=1)
              1 => 
                array
                  'id' => string '41' (length=2)
                  'time_spent' => string '10' (length=2)
      3 => 
        array
          'id' => string '7' (length=1)
          'time_estimate' => string '3' (length=1)
          'assigned_to' => string '2' (length=1)
          'IssuesTimeSpent' => 
            array
              0 => 
                array
                  'id' => string '7' (length=1)
                  'time_spent' => string '30' (length=2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:21:45.287

好的，我相信我已经找到了解决方案。是不是最好的我不知道..

```
$q = Doctrine_Query::create()
            ->select('i.id, assigned.full_name as full_name, count(i.id) as issue_count, sum(i.time_estimate) as time_estimate, 
                (SELECT sum(ts.time_spent) as t FROM Model_IssuesTimeSpent ts WHERE ts.user_id = i.assigned_to) as time_spent')
            ->from('Model_Issue i')
            ->leftJoin('i.User_2 assigned')
            ->where('i.project_id = ?',$project_id)
            ->groupBy('assigned_to'); 
```

为所花费的时间添加子查询，而不是加入它会停止所有奇怪的数字。似乎直接加入它会导致我设置的组中出现重复的行..

# c# - 如何处理这种树遍历

> ID：15367917
> 
> 赞同：4
> 
> 时间：2013-03-12T17:22:31.107
> 
> 标签：c#, .net, data-structures, tree, traversal

自从我不得不进行树遍历并想要一些输入以来已经有一段时间了。这是一个示例树：

![树](../Images/2954ab5e08e37e58d13b026e23c91606.png)

树是我的 ASP.NET 页面。此页面由 2 个母版页和内容页组成。我想要做的是找到作为我的第二个母版页主要内容的控件，然后将所有控件放在一个平面数据结构中，例如列表。

因此，鉴于橙色节点是第二个母版页的主要 ContentPlaceHolder，我想将所有这些都存储在我的列表中的蓝色椭圆中。我已经创建了一些代码来返回集合中控件的所有子、孙等：

```
private IEnumerable<Control> GetChildControls(Control parentControl)
{
    foreach (Control control in parentControl.Controls)
    {
        yield return control;
        foreach(Control grandchild in GetChildControls(control))
        {
            yield return grandchild;
        }
    }
} 
```

但我有点坚持如何将这棵树过滤到一个节点和它的孩子。如果有帮助，橙色节点应如下所示：

```
<asp:Content ID="SystemMasterMainContentPlaceHolder" runat="server" ContentPlaceHolderID="MainContentPlaceholder"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:33:54.327

您基本上可以使用您已有的方法和`GetChildById()`方法的组合。

```
private Control GetChildById(string controlId, Control parent)
{
    return GetChildControls(parent).First(c => c.ID == controlId);
} 
```

这将重用由 完成的树遍历`GetChildControls`。请注意，如果找不到控件，它将引发异常 - 如果您不希望这样，请使用`FirstOrDefault`代替`First`.

您可能会像这样使用它：

```
GetChildControls(GetChildById("SystemMasterMainContentPlaceHolder", Page)); 
```

# jquery - 将 jQuery onbeforeunload 事件与 jQuery UI 模态消息相结合

> ID：15367920
> 
> 赞同：3
> 
> 时间：2013-03-12T17:22:42.930
> 
> 标签：jquery, jquery-ui-dialog, onbeforeunload

我无法将 jQuery`onbeforeunload`事件与 jQuery UI 模态消息结合起来。我想使用 jquery onbeforeunload 事件来检查表单是否已提交，如果尚未提交，则询问用户是否要保存更改。

第一个功能提供系统提示并正常工作，但很难自定义样式或按钮文本，并且需要用户单击几次。

第二个函数使用 jQuery UI 对话框小部件，但它当前正在触发在任何字段更改而不是用户尝试离开页面时显示对话框的函数。如何更正此功能，以便在用户单击离开页面而不提交表单时触发它？

我正在使用 jquery-1.8.2 和 jquery-ui-1.9.1

```
<form name="form2" id="form2" method="post" action="form2-exec.php">        
    <!-- Form Elements -->
    <div id="dialog-confirm" style="display:none;">
        Would you like to save your changes?
    </div>
    <a href="form1.php">BACK</a>
    <a href="#"><input type="submit" value="SUBMIT" /></a>
</form> 
```

**原始功能**

```
$(function () {
    // Set the unload message whenever any form elements are changed
    $('input', 'select').change(function () {
        setConfirmUnload(true);
    });
    // Turn off the unload message whenever a form get submitted properly.
    $('form').submit(function () {
        setConfirmUnload(false);
    });
});
function setConfirmUnload(on) {
    var message = "You have unsaved data. Are you sure to leave the page?";
    window.onbeforeunload = (on) ? function() { return message; } : null;
} 
```

**新的 setConfirmUnload(on) 函数** *（不能正常工作）*

```
function setConfirmUnload(on) {
  var message = $("#dialog-confirm").dialog({
        modal: true,
        buttons: {
            "Save": function () {
                $("#form2").submit();
                $(this).dialog("close");
            },
            "Continue": function () {
                $(this).dialog("close");
            }
        }
    });        
    window.onbeforeunload = (on) ? function () { return message; } : null;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T18:07:30.020

尝试将对话框的定义移动到`window.onbeforeunload`处理程序中，如下所示：

```
function setConfirmUnload(on) { 
    var message;       
    if (on) {
        window.onbeforeunload = function() {
            message = $("#dialog-confirm").dialog({
                modal: true,
                buttons: {
                    "Save": function () {
                        $("#form2").submit();
                        $(this).dialog("close");
                    },
                    "Continue": function () {
                        $(this).dialog("close");
                    }
                }
             });
             return message;
        };
    } else {
        window.onbeforeunload = null;
    }
} 
```

# c# - 在 Windows 应用商店应用中使用密码的 ZipArchive

> ID：15367922
> 
> 赞同：2
> 
> 时间：2013-03-12T17:22:58.067
> 
> 标签：c#, microsoft-metro, windows-runtime

我需要在我的 Windows 应用商店应用程序中解压缩受密码保护的 Zip 文件。对于没有密码的档案，我使用`System.IO.Compression.ZipArchive`，但它不支持受密码保护的档案。还有其他方法吗？SharpZipLib 或 DotNetZip 等其他库均不适用于 WinRT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:12:44.050

仅使用 WinRT API 是无法做到的。唯一的选择是使用[Component One 的付费库](http://www.componentone.com/SuperProducts/ZipWinRT/)，但它只支持 WinZip 使用的标准 Zip encypriton (CryptoZip) 而不是 AES。

# html - 动态拉伸 DIV

> ID：15367927
> 
> 赞同：-2
> 
> 时间：2013-03-12T17:23:10.587
> 
> 标签：html, css

我想并排对齐 3 个 div。其中 2 个具有固定宽度，但最后一个必须拉伸页面的剩余区域。我的容器宽度：1000px。固定 div 的宽度为 200px。如果没有 200px 的 div，最后一个的宽度将是 1000px。如果只有一个 200px 向左浮动，则最后一个的宽度将为 800px。此外，如果只有一个 200px 向右浮动，则最后一个的宽度将再次为 800px 并将向左浮动。但是如果页面上有 2 200px div，最后一个的宽度将是 600px，它会放置在左边 200px 和右边 200px div 之间。我怎样才能做到这一点？

我正在尝试这样做：

i45.tinypic.com/5d1nxe.jpg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:28:25.733

我觉得我在这里担任 Google，但请查看以下内容：

1.  [弹性盒规范](http://www.w3.org/TR/css3-flexbox/)
2.  [使用 flexbox 模型的说明/教程。](http://www.html5rocks.com/en/tutorials/flexbox/quick/)

你想像这样设置你的假设：

```
div.container{
  display: box;
  box-orient: horizontal
}
div.container div.child {
  width: 200px;
}
div.container div.child:nth-child(3) {
  box-flex: 1;
} 
```

瞧，这应该完全符合您的要求。但是，您需要使用供应商特定的前缀/属性来实现它，因为它在除 IE10 之外的所有东西中都处于实验性实现中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:35:40.987

编辑：[我在这里](http://jsfiddle.net/9J9Yc/1/)使用 nth-child 选择器更新了我的示例，通过预测它可能出现的少数地方来确定应该用“自动扩展”div 做什么。

* * *

如果您在没有宽度`div`的 a 的任一侧浮动一个固定`div`宽度，后者`div`将自动扩展。

[这里的例子](http://jsfiddle.net/cmjAX/)

让它适用于您的不同情况就像更改浮点值或重新排列您的标记一样简单。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T17:55:56.460

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
</head>
<body>
<div style="width:1000px; ">
<div id="divA" style="width: 200px; float: left; background-color: blue;">a</div>
<div id="divB" style="float: left; width:600px; background-color: yellow;">b</div>
<div id="divC" style="width: 200px; float: left; background-color: red;">c</div>
</div>
<script>
    if(document.getElementById("divA") == null && document.getElementById("divC") == null) {  document.getElementById("divB").style.width="1000"}
    else if (document.getElementById("divA") == null || document.getElementById("divC") == null)  {  document.getElementById("divB").style.width="800"}
</script>
</body>
<html> 
```

# tomcat7 - Tomcat 7 - 覆盖 context.xml

> ID：15367930
> 
> 赞同：0
> 
> 时间：2013-03-12T17:23:14.460
> 
> 标签：tomcat7, context.xml

我工作的公司托管了一些 Java Web 应用程序。我们在同一个盒子上有生产站点和演示站点。演示站点通常是在生产中看到的内容的副本，只有资源指向演示资源（使用 javax.sql.DataSource 的数据库和领域）。出于安全考虑，appBase 没有在 webapp 目录中定义，而是在服务器的其他地方定义。

我正在将这些应用程序从 Tomcat 5 迁移到 Tomcat 7。Tomcat 5 服务器具有在 server.xml 中定义的所有上下文。这非常方便，因为我只需要将文件复制到主机定义的目录中，生产主机、演示主机或两者都可以，并且 context.xml 文件将被 server.xml 覆盖。

我为 Tom7 阅读的文档强调不再推荐这种将上下文放置在 server.xml 中的安排。

设置服务器的最佳方法是什么，以便我可以覆盖 META-INF 目录中包含的 context.xml。我希望能够将 Web 应用程序从测试（不是 jar 文件）复制到正确的目录（生产或演示），服务器将分别使用生产数据库或演示数据库。

1.  我在 conf/Catalina/'host' 目录中定义了 context.xml，将其重命名为 ROOT.xml。我启动了服务器，它加载了 ROOT.xml 文件，当我测试它时，我收到了“404”。
2.  我将 conf/Catalina/'host' 目录中的 ROOT.xml 更改为 context.xml.default 并重新启动服务器。这似乎对主机没有影响；它使用了 META-INF/context.xml 中定义的数据定义。
3.  我从 conf/Catalina/'host' 目录中删除了 context.xml.default 并重新启动了服务器。正如预期的那样，它使用了 META-INF/context.xml 中定义的数据定义。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T08:20:41.533

通常你有版本控制下的项目，但你不喜欢在版本控制下拥有实时连接密码/电子邮件-smtp-密码。

因此，您使用`context.xml`虚拟`webapp/META-INF/context.xml`密码（如`changeme`. **一旦部署**了一个带有`copyXML`-Attribute的 webapp，*如果不存在*`webapp/META-INF/context.xml`，`webapp/META-INF/context.xml`就会被**复制**到其中。`$TOMCAT_BASE/conf/Catalina/localhost/webapp.xml`

 *所以你可以`changeme`在部署后更改密码`$TOMCAT_BASE/conf/Catalina/localhost/webapp.xml`。这样你就可以确定这些

*   实时密码永远不受版本控制，并且
*   部署不会覆盖实时密码。

`TOMCAT_BASE/conf/context.xml`仅用于全局配置（如果您阅读了文件中的注释）：

```
<!-- The contents of this file will be loaded for each web application --> 
```*

# php - 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送

> ID：15367933
> 
> 赞同：0
> 
> 时间：2013-03-12T17:23:20.587
> 
> 标签：php

我在其他论坛上读过很多，他们说错误是 session_start 之前有空格，但我非常确定没有，我的文件是用 UTF8 编码的，没有 BOM，所以空格问题应该没问题在本地完美地工作（我正在使用easyphp）......不过，只要我把它放到网上，它就会让我遇到这些问题......任何人都可以帮忙吗？他们在网上告诉这两行错误：

警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由

警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:25:06.700

之后在顶部使用这个`<?php`

```
ob_start(); 
```

你可以这样使用：

```
<?php
ob_start();
session_start();

include 'your php file';

...
... 
```

# javascript - 键盘不起作用 + jQuery

> ID：15367935
> 
> 赞同：0
> 
> 时间：2013-03-12T17:23:25.160
> 
> 标签：javascript, jquery, jquery-ui

我正在制作一个数字键盘，我想在 jQuery 表单向导和验证中使用它。一切正常，但键盘不行:( [演示](http://jsfiddle.net/BngRv/)

```
$(function () {
  var keypad = $('#keypad');
  keypad.hide();

  $('input[type="text"]:not(#keypad)').on('click', function (e) {
    e.preventDefault();
    $(this).after(keypad);
    keypad.show();
  });
});

function addIt(cKey) {
  var id = $('#keypad').prev().attr('id');
  d = document.getElementById(id);
  d.value = (cKey.value == 'delete') 
    ? d.value.slice(0, -1) 
    : ((cKey.value == 'clear') ? "" : d.value + cKey.value);
} 
```

[演示](http://jsfiddle.net/BngRv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:26:18.740

将函数移动`addIt`到小提琴中的 HTML 部分。

```
<script>
    function addIt(cKey) {
        var id = $('#keypad').prev().attr('id');
        d = document.getElementById(id);
        d.value = (cKey.value == 'delete') ? d.value.slice(0, -1) : ((cKey.value == 'clear') ? "" : d.value + cKey.value);
    }
</script> 
```

**固定小提琴：http:** [//jsfiddle.net/BngRv/1/](http://jsfiddle.net/BngRv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:31:37.900

将其放入您的加载块并删除每个按钮输入中的 onClicks：

```
$(function(){
    //rest of code before it here
    $('.keypad').click(function(){
        addIt($(this).val());
    });
}); 
```

# java - 将新字符串添加到哈希图 java

> ID：15367938
> 
> 赞同：3
> 
> 时间：2013-03-12T17:23:31.213
> 
> 标签：java, hashmap, indexof

我正在编写一个程序来读取日志文件，然后计算某些字符串的显示次数。我试图手动输入字符串作为关键字，但由于有这么多，我决定最好搜索日志文件，当它遇到“ua”时，它应该创建一个从“ua”到的新字符串在行尾，将其添加到哈希图中，并增加该特定字符串的计数（我感兴趣的所有字符串都以“ua，”开头）。我似乎无法弄清楚如何将新字符串添加到哈希图中。这就是我到目前为止所拥有的。

```
public class Logs
{

public static void main(String args[]) throws IOException 
{

 Map<String, Integer> dayCount = new HashMap<String, Integer>();
    for (String str : KeyWords)
    {
        dayCount.put(str, 0);
    }

    File path = new File("C:\\P4logs"); 
    for(File f: path.listFiles())
    { // this loops through all the files + directories

        if(f.isFile()) 
        { // checks if it is a file, not a directory.

    try (BufferedReader br = new BufferedReader(new FileReader(f.getAbsolutePath())))
    {

String sCurrentLine;

while ((sCurrentLine = br.readLine()) != null) 
{
    boolean found = false;

    for (String str : DayCount.keySet()) 
    {
        if (sCurrentLine.indexOf(str) != -1)
        {
            DayCount.put(str, DayCount.get(str) + 1);
            found = true;
            break;
        }
     }
     if (!found && sCurrentLine.indexOf("ua, ") != -1)
     {
        System.out.println("Found an unknown user action: " + sCurrentLine);
        DayCount.put(key, value)    //not sure what to put here
     }
    }
   }
 for(String str : KeyWords)
    {
         System.out.println(str + " = " + DayCount.get(str));

    }

    }
   }
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:26:46.517

您无需遍历 hashmap 的键来查看是否存在！这违背了使用哈希图的目的（`O(1)`没有冲突的查找与`O(n)`您的解决方案中的查找）。你应该只需要做这样的事情：

```
//If a key doesn't exist in a hashmap, `get(T)` returns null
if(DayCount.get(str) == null) {
    //We know this key doesn't exist, so let's create a new entry with 1 as the count
    DayCount.put(str, 1);
} else {
    //We know this key exists, so let's get the old count, increment it, and then update
    //the value
    int count = DayCount.get(str);
    DayCount.put(str, count + 1);
} 
```

另一方面，请考虑遵循 Java 命名约定。变量应以小写字母开头（即`dayCount`vs `DayCount`）。只有类应该以大写字母开头。你现在拥有它的方式，它看起来像是`DayCount`一个带有静态方法的类，称为`put`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:40:16.630

由于这是您的要求 -

```
it should create a new string from "ua, " to the end of the line 
```

由于不清楚一行是否以“ua”或“ua”开头，因此可能位于该行的中间。这大概就是它的样子——

```
 while ((sCurrentLine = br.readLine()) != null) 
    {

        if( sCurrentLine.indexOf("ua, ") != -1 ){
             String str = sCurrentLine.substr("ua, ");
             if(dayCount.get(str) != null){
                  dayCount.put(str, dayCount(str) +1 );
              }else{
                  dayCount.put(str, 1 ); 
              }
        }

    } 
```

# sql - 无法使用休眠控制 DB2 方言的 BLOB 长度

> ID：15367939
> 
> 赞同：0
> 
> 时间：2013-03-12T17:23:46.943
> 
> 标签：sql, hibernate, db2, hibernate-tools

我正在尝试使用 DB2 模式控制 BLOB 列的长度。我的最终目标是让 hibernatetool 为 10M 长的 BLOB 列生成 SQL 文件，并且鉴于粘贴在这里的文件，我总是得到一个 blob(255)。我究竟做错了什么？

build.xml（省略了不太相关的部分）：

```
<taskdef name="hibernatetool"
         classname="org.hibernate.tool.ant.HibernateToolTask"
         classpathref="toolslib" />

<target name="default">
<hibernatetool destdir="./generated">
 <classpath>
  <path location="." />
  <path location="./classes" />
 </classpath>

 <configuration configurationfile="hibernate.cfg.xml"/>
 <hbm2ddl export="false" outputfilename="sql.ddl"/>
</hibernatetool> 
```

休眠.cfg.xml：

```
<hibernate-configuration>
<session-factory>
  <property name="dialect">org.hibernate.dialect.DB2Dialect</property>
  <!-- Mapping files -->
  <mapping resource="DbContentStream.mapping.xml"/>
</session-factory>
</hibernate-configuration> 
```

DbStreamImpl 映射：

```
<hibernate-mapping>

    <class name="DbContentStreamImpl"
           table="CONTENT_STREAM">
        <cache usage="read-write"/>
        <id name="id" type="java.lang.Long" access="field">
            <column name="id"/>
            <generator class="native">
            </generator>
        </id>

        <property name="content" type="blob" length="10485760">
            <column name="CONTENT"/>
        </property>
    </class>

</hibernate-mapping> 
```

生成的 SQL 文件是（注意 blob 字段的长度）：

```
create table CONTENT_STREAM (
  id bigint generated by default as identity, 
  CONTENT blob(255), primary key (id)); 
```

提前感谢您的帮助

# c# - 如何从网站下载各种文件类型？

> ID：15367945
> 
> 赞同：1
> 
> 时间：2013-03-12T17:24:02.957
> 
> 标签：c#, download, web-crawler

我在一个新类中有以下代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using HtmlAgilityPack;
using System.IO;
using System.Text.RegularExpressions;
using System.Xml.Linq;
using System.Net;
using System.Web;
using System.Threading;
using DannyGeneral;
using GatherLinks;

namespace GatherLinks
{
    class RetrieveWebContent
    {
        HtmlAgilityPack.HtmlDocument doc;
        string imgg;
        int images;

        public RetrieveWebContent()
        {
            images = 0;
        }

        public List<string> retrieveImages(string address)
        {
            try
            {
                doc = new HtmlAgilityPack.HtmlDocument();
                System.Net.WebClient wc = new System.Net.WebClient();
                List<string> imgList = new List<string>();
                doc.Load(wc.OpenRead(address));
                HtmlNodeCollection imgs = doc.DocumentNode.SelectNodes("//img[@src]");
                if (imgs == null) return new List<string>();

                foreach (HtmlNode img in imgs)
                {
                    if (img.Attributes["src"] == null)
                        continue;
                    HtmlAttribute src = img.Attributes["src"];

                    imgList.Add(src.Value);
                    if (src.Value.StartsWith("http") || src.Value.StartsWith("https") || src.Value.StartsWith("www"))
                    {
                        images++;
                        string[] arr = src.Value.Split('/');
                        imgg = arr[arr.Length - 1];
                        wc.DownloadFile(src.Value, @"d:\MyImages\" + imgg);
                    }
                }

                return imgList;
            }
            catch
            {
                Logger.Write("There Was Problem Downloading The Image: " + imgg);
                return null;

            }
        }
    }
} 
```

上面的代码是我的 WebCrawler 的一部分。此代码将仅从网站下载图像文件。

例如，我有这个网站： [http ://web.archive.org/web/20131216195236/http://open-hardware-monitor.googlecode.com/svn/trunk/](http://web.archive.org/web/20131216195236/http://open-hardware-monitor.googlecode.com/svn/trunk/)

上述站点中包含一个名为`App`. 如果我右键单击它`save as`，然后我看到它是一个配置文件。如果我单击该`Hardware/`链接，我会看到许多 *.CS 文件。

如何制作和/或更新我的代码，以便它可以下载各种文件类型，而不仅仅是下载图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:28:05.040

现在以下行：

```
HtmlNodeCollection imgs = doc.DocumentNode.SelectNodes("//img[@src]"); 
```

正在抓取所有图像标签并进行处理。您将需要找到一种方法来查找 href 扩展等于的所有锚标记`.cs`

它将类似于上面的行。我建议阅读 xPath，因为这似乎`SelectNodes`是用来查找元素的。

希望这可以帮助您入门！

# eclipse - 类型 org.eclipse.equinox.p2.query.IQuery 不可访问

> ID：15367958
> 
> 赞同：0
> 
> 时间：2013-03-12T17:24:41.063
> 
> 标签：eclipse, eclipse-rcp, p2

我正在使用 Eclipse RCP 应用程序，并且正在为它配置 p2 更新。

我遇到了[这个](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_uipolicy.htm)例子。

包 org.eclipse.equinox.p2.examples.rcp.cloud.p2；

导入 org.eclipse.equinox.p2.engine.query.UserVisibleRootQuery；导入 org.eclipse.equinox.p2.examples.rcp.cloud.Activator；导入 org.eclipse.equinox.p2.query.QueryUtil；导入 org.eclipse.equinox.p2.ui.Policy；导入 org.eclipse.jface.preference.IPreferenceStore；导入 org.eclipse.swt.graphics.Point；

/** * CloudPolicy 为 p2 UI 定义 RCP 云示例策略。当示例包启动时，策略 * 被注册为 OSGi 服务。* * @since 3.5 */ public class CloudPolicy extends Policy {

```
public void updateForPreferences() {
    IPreferenceStore prefs = Activator.getDefault().getPreferenceStore();
    setRepositoriesVisible(prefs
            .getBoolean(PreferenceConstants.REPOSITORIES_VISIBLE));
    setRestartPolicy(prefs.getInt(PreferenceConstants.RESTART_POLICY));
    setShowLatestVersionsOnly(prefs
            .getBoolean(PreferenceConstants.SHOW_LATEST_VERSION_ONLY));
    setGroupByCategory(prefs
            .getBoolean(PreferenceConstants.AVAILABLE_GROUP_BY_CATEGORY));
    setShowDrilldownRequirements(prefs
            .getBoolean(PreferenceConstants.SHOW_DRILLDOWN_REQUIREMENTS));
    setFilterOnEnv(prefs.getBoolean(PreferenceConstants.FILTER_ON_ENV));
    setUpdateWizardStyle(prefs.getInt(PreferenceConstants.UPDATE_WIZARD_STYLE));
    int preferredWidth = prefs.getInt(PreferenceConstants.UPDATE_DETAILS_WIDTH);
    int preferredHeight = prefs.getInt(PreferenceConstants.UPDATE_DETAILS_HEIGHT);
    setUpdateDetailsPreferredSize(new Point(preferredWidth, preferredHeight));      

    if (prefs.getBoolean(PreferenceConstants.AVAILABLE_SHOW_ALL_BUNDLES))
        setVisibleAvailableIUQuery(QueryUtil.ALL_UNITS);
    else
        setVisibleAvailableIUQuery(QueryUtil.createIUGroupQuery());
    if (prefs.getBoolean(PreferenceConstants.INSTALLED_SHOW_ALL_BUNDLES))
        setVisibleAvailableIUQuery(QueryUtil.ALL_UNITS);
    else
        setVisibleAvailableIUQuery(new UserVisibleRootQuery());

    }
} 
```

这里类型 IQuery 和 QueryUtil 不可访问，因为我无法访问包 org.eclipse.equinox.p2.query

我正在使用 eclipse Indigo (3.7)，我在插件中添加的依赖项是：

```
org.eclipse.equinox.p2.ui.sdk
org.eclipse.equinox.p2.ui
org.eclipse.equinox.p2.engine 
```

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:47:27.573

您需要`org.eclipse.equinox.p2.metadata`作为依赖项导入

# jquery - 如何使用 jQuery Validate 在出错时移至页面顶部

> ID：15367959
> 
> 赞同：6
> 
> 时间：2013-03-12T17:24:46.710
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validate 并在发现错误时尝试移动（或滚动）到页面顶部。我添加了[focusInvalid 选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)来停止关注有错误的字段，但无法弄清楚如何移动到页面顶部（在页面顶部，我的错误容器是可见的）。

下面是我的脚本的简化版本，感谢您对此提供的任何帮助。

```
$(".event-form").validate({
  errorContainer: ".error-container",
  errorLabelContainer: ".error-container ul",
  wrapper: "li",
  focusInvalid: false,
  ignore: "",
  rules: {
    title: { required: true }
  },
  messages: {
    title: "You must enter the title"
  }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:27:29.540

```
$(".event-form").validate({
 errorContainer: ".error-container",
  errorLabelContainer: ".error-container ul",
  wrapper: "li",
  focusInvalid: false,
  ignore: "",
  rules: {
    title: { required: true }
  },
  messages: {
    title: "You must enter the title"
  },
    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
              $("html, body").animate({ scrollTop: 0 }, "fast");
        }
    }
}) 
```

# python - 在 NDB 中实现位数据/运算符的设计模式

> ID：15367960
> 
> 赞同：0
> 
> 时间：2013-03-12T17:24:50.533
> 
> 标签：python, google-app-engine, python-2.7, google-cloud-datastore, google-cloud-sql

我意识到 NDB / Google Datastore 不支持位数据类型和支持运算符。

但是有没有人有任何解决方法的建议。

我的数据是一个类别树，用户可以选择多个类别。理想的实现是存储为单个数字并执行按位和运算以找到匹配项。

另外，有人知道 NDB/Datastore 路线图吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:35:21.363

如果你想要一些按位支持，bitstring 是一个很好的库（2.2 版可以工作，带有[补丁](https://code.google.com/p/python-bitstring/issues/attachmentText?id=116&aid=1160000000&name=mmap.patch&token=Wkic9ZlnaFhP8rxsj824IjXx63g%3A1363134285743)）。但是，您将无法基于单个位进行查询，而只能将整个位串作为一个整体进行查询。

如果每个用户可能选择的类别数量很少，请考虑使用重复属性，为每个选择的类别选择一个列表条目。这样可以轻松查询，并且不会像您想象的那样吃掉您的配额。

请记住，大部分成本来自读取和写入。只要您限制每次获取的实体数量，查询就很便宜；如果您有 100 或 1,000,000 个此类实体，则无关紧要。

在存储数据时，GAE 需要一些开箱即用的思考（在这里，非规范化有时是一件好事）。我建议从头到尾阅读数据存储文档，以便深入了解查询和索引的工作原理。还有一个关于它如何在后台工作的 Google I/O 演示文稿。

正如 jterrace 所暗示的那样，有时您不得不怀疑*开发*最佳解决方案所花费的时间是否超过了效率较低但更简单的解决方案的额外成本。

# java - Sublime Text 2 在 Java 开发方面胜过 Eclipse

> ID：15367961
> 
> 赞同：19
> 
> 时间：2013-03-12T17:25:05.330
> 
> 标签：java, spring, maven, ide, sublimetext2

你好 java 布道者！

我使用 Eclipse 进行 Java 开发已经一年多了。Eclipse 可以很好地支持您希望从 IDE 获得的所有内容。但在我看来，它永远无法完美地完成这些任务。

我花了很多时间在微调器前等待，因为某些进程占用了我所有的 CPU。用户界面非常老式，不直观且缓慢。我很努力，但无法配置满足我要求的深色主题。

Eclipse 没问题，但这是我每天都在使用的工具，它应该会更好，更有趣！

我偶尔会使用[Sublime Text](http://www.sublimetext.com/)来编写脚本语言，比如 python，我非常感激。显然，该轻量级编辑器有很多插件，它们似乎提供了 Java 开发人员从 Eclipse 中使用的功能。但我不确定它们有多成熟以及它们将如何协同工作。

在花一天时间尝试之前，有没有人有使用 Sublime 进行 Java 开发的经验？

我不想错过的功能是：

*   快速解决
*   代码完成
*   类型层次结构
*   javadoc关于悬停
*   行家支持
*   重构
*   调试器
*   类型搜索

Sublime Text 2 能否提供这些功能，是否值得从 Eclipse 进行更改？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-12T17:35:40.240

不久前我使用 Sublime Text 2 进行开发，我必须说......我爬回了 Eclipse。Sublime Text 与其说是 IDE，不如说是编辑器。编辑脚本非常好且快速，但您会错过一些功能，例如：

*   快速修复：可以为您节省大量时间
*   代码补全：Sublime 有代码补全。但它远不及 Eclipse 的水平。即使有插件

**附带说明：**在 Eclipse 中工作时，我想念 Sublime 的流畅 UI。但是 Eclipse 做得非常好，这才是最重要的。

* * *

截至今年（2014 年），我选择的 IDE 是 IDEA IntelliJ。它是 Java 开发的最佳 IDE。它具有您感兴趣的所有功能，甚至还有一个黑暗主题（德古拉）。唯一的缺点是它要花一分钱，但绝对值得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T17:29:56.103

[您将在Netbeans](http://netbeans.org)中找到这些功能（以及许多其他功能）。也许你会更舒服地使用它；IDE 始终是个人的事情。

并回答您的“问题”，尽管对您建议的工具没有任何经验，但我可以肯定地说，只要他有一个正确设置的环境 - 例如配置良好的 maven 项目的类型，他可以轻松地使用任何东西住在。

# php - PHP 注意：未初始化的字符串偏移量：0

> ID：15367963
> 
> 赞同：4
> 
> 时间：2013-03-12T17:25:07.187
> 
> 标签：php, string, offset, initialization

我的 OpenCart 日志中出现此错误。说错误在第 1 行，即：

```
<?php if(isset($social_discount['name']) && $social_discount['name']!="") { ?> 
```

非常感谢任何帮助解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T17:30:32.097

为防止出现此错误，您应该更改代码，如下所示：

```
<?php if(is_array($social_discount) && isset($social_discount['name']) && $social_discount['name']!="") { ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:28:26.510

`$socialdiscount`是字符串，而不是数组，因此`$social_discount['name']`被视为`$social_discount[0]`=> 字符串的第一个字符。`0`未设置意味着`$socialdiscount`是一个*空*字符串。

# c# - 是否可以在 Azure 灯开关应用程序中有启动任务？

> ID：15367965
> 
> 赞同：0
> 
> 时间：2013-03-12T17:25:13.190
> 
> 标签：c#, asp.net, c#-4.0, visual-studio-lightswitch, lightswitch-2012

我们目前正在为我们的其他 azure 应用程序将加密密钥存储在受保护的注册表项中，并且一直在通过启动任务添加该密钥。虽然我看到 lightswitch 应用程序中也有一个 csdef 文件，但启动任务似乎永远不会在本地或 azure 上触发。我什至尝试将输出添加到 cmd 文件中，以便查看是否有任何错误，但甚至没有创建该文件。Lightswitch 似乎没有 Win32.registry 因此通过代码添加密钥似乎是不可能的。

有没有其他人能够在 azure 托管的灯开关应用程序中运行启动任务？据我了解，在 lightswitch 和包含 web.worker 角色的项目之间，天蓝色的一面不应该有那么大的不同。它们仍在虚拟机上运行，​​因此启动任务应该仍然能够访问注册表。如果不可能，是否有人对如何添加注册表项有任何其他想法？将密钥放在代码中绝对不理想。仅供参考，reg文件和cmd文件都在服务器文件夹中，并设置为内容并始终复制。

启动.cmd：

```
regedit /s 456ddfrt.reg 
exit /b 0 
```

文件定义：

```
 <WebRole name="LightSwitchWebRole"
         vmsize="Small"
         enableNativeCodeExecution="true">
  <Startup>
    <Task commandLine="startup.cmd" executionContext="elevated"  taskType="simple"/>
  </Startup> 
```

**解决方案**

我最终按照 Yann 的建议使用了独立存储。下面是一个代码示例。

```
 //Get key from storage, add if not exists
        try
        {
            String strKey = (string)appSettings["encrKey"];
            strKey = DecryptString(strKey);
        }
        catch (Exception Ex)
        {
            appSettings.Add("encrKey",[mykey]);
            String strKey = (string)appSettings["encrKey"];
            strKey = DecryptString(strKey);
        } 
```

它仍然涉及将密钥放入代码中，但密钥是使用不同的加密方法加密的，并且在天蓝色上，他们访问我的代码的可能性非常低。感谢所有的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:29:20.790

您是否考虑过使用应用程序的 Application_Initialize 方法？

# javascript - 跨域不适用于 SignalR PersistentConnection

> ID：15367968
> 
> 赞同：14
> 
> 时间：2013-03-12T17:25:22.330
> 
> 标签：javascript, asp.net-mvc, cross-domain, signalr, signalr.client

**注意**：最初有人问过这个问题，但在我发布答案之前将其删除。由于这个问题涵盖了开发人员在尝试使 SignalR 跨域工作时面临的许多问题，因此我决定复制它。另外，我已经写完答案了！

我在 ASP.NET MVC .NET Framework 4 项目中运行 SignalR 1.0.1 服务器。我在另一个域（不同的本地主机端口）上有另一个 ASP.NET 应用程序，试图通过 JavaScript 客户端进行连接。当我的应用程序尝试连接时，我得到了这个：

```
XMLHttpRequest cannot load http://localhost:31865/api/negotiate?_=1363105027533.
Origin http://localhost:64296 is not allowed by Access-Control-Allow-Origin. 
```

我已按照所有步骤启用 SignalR 的跨域支持——我错过了什么？

*   `jQuery.support.cors = true;`
*   `$.connection('http://localhost:31865/api', '', false, { jsonp: true, xdomain: true });`
*   `RouteTable.Routes.MapHubs(new HubConfiguration { EnableCrossDomain = true });`
*   `RouteTable.Routes.MapConnection<ApiConnection>("/api", "api");`

我还在 API 项目的 Web.config 中添加了以下内容：

```
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <add name="Access-Control-Allow-Origin" value="*" />
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

我正在为我的 SignalR 服务器使用 PersistentConnection，而不是集线器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T17:25:22.330

`MapHubs`将在 /signalr 配置一个端点以与您的所有`Hub`类进行通信。由于您没有使用集线器，因此`MapHubs`无需调用 to。调用`MapHubs`也不会对 /api 连接的配置产生任何影响。

您对 MapConnection 的调用应更改为如下所示：

```
RouteTable.Routes.MapConnection<ApiConnection>("api", "api",
    new ConnectionConfiguration { EnableCrossDomain = true }); 
```

**注意：**第二个参数`MapConnection`是 URL。第一个参数是路由名称。这`/`是不必要的，但在任何一种情况下都不会受到伤害。

*   **仅**`jQuery.support.cors = true;`应进行设置“在尚不支持 cors 但允许跨域 XHR 请求（Windows 小工具等）的环境中启用跨域请求” 。这与我所知道的任何版本的 IE 或任何其他浏览器无关。**如果浏览器不支持 CORS，除非**您设置为 true ，否则SignalR 将自动回退到 JSONP 。**[`[1]`](http://api.jquery.com/jQuery.support/)**`jQuery.support.cors`****

     ****如果您只是盲目地将其设置为 true，SignalR 将假定环境确实支持跨域 XHR 请求，并且**不会**自动回退到 JSONP 呈现 SignalR 在真正不支持 CORS 的浏览器中运行时无法建立跨域连接。**** 
*****   `$.connection('http://localhost:31865/api', '', false, { jsonp: true, xdomain: true });`是不正确的。你应该只需要

    ```
    var connection = $.connection('http://localhost:31865/api'); 
    ```

    `xdomain`不再是 SignalR JS 客户端的选项，如果你*真的*想指定`jsonp`，你应该`start`在连接时这样做：

    ```
     connection.start({ jsonp: true}).done(function () { /* ... */ }); 
    ```

    我应该重申，如果环境不支持 CORS， SignalR 将*自动回退到 JSONP，因此您***不应**自己指定此选项。JSONP 不需要`Access-Control-Allow-Origin`标头，但它确实强制 SignalR 使用其最低效的传输方式：长轮询。

    *   您无需`customHeaders`在 Web.config 中进行设置。当您在 you 中设置为 true时，SignalR 将`Access-Control-Allow-Origin`自动在 SignalR 响应中设置标头。`EnableCrossDomain``ConnectionConfiguration`**** 

 ****有关[使用](https://github.com/SignalR/SignalR/wiki/QuickStart-Persistent-Connections)`PersistentConnections`. _****

# ruby-on-rails - 多个模型的不可篡改属性

> ID：15367969
> 
> 赞同：1
> 
> 时间：2013-03-12T17:25:23.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, ransack

为了从搜索和排序中排除某些属性，我将以下内容添加到我的模型中

```
UNRANSACKABLE_ATTRIBUTES = %w[id created_at updated_at section] 

def self.ransackable_attributes auth_object = nil
    (column_names - UNRANSACKABLE_ATTRIBUTES) + _ransackers.keys
end 
```

我的两个模型都使用了这个，那么保持我的代码 DRY 并编写一次这个方法的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:58:46.053

这可以通过以下方式完成：

1) 在 'config/application.rb' 中取消注释 config.autoload_paths += %W(#{config.root}/extras) 并将 'extras' 更改为 'lib'

2）在“lib”目录中创建“ransackable_attributes.rb”：

```
module RansackableAttributes
    extend ActiveSupport::Concern

    included do
        def self.ransackable_attributes auth_object = nil
            (column_names - self::UNRANSACKABLE_ATTRIBUTES) + _ransackers.keys
        end
    end

end 
```

3) 在模型中添加“包含”

```
class Ad < ActiveRecord::Base
    include RansackableAttributes 
```

```
class Category < ActiveRecord::Base
    include RansackableAttributes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T16:56:09.123

我知道这很旧，但我想分享我的处理方式，以防您不想在所有模型中都有 UNRANSACKABLE_ATTRIBUTES。我创建了一个初始化器，它扩展了 ActiveRecord::Base 的 Ransacks 模块

```
module Ransack
  module Adapters
    module ActiveRecord
      module Base
        attr_accessor :_spare
        def spare_ransack(*attribs)
          self._spare = attribs.map{|a| a.to_s}
        end
        def spareables
          self._spare ||= []
          column_names - self._spare
        end
        def ransackable_attributes(auth_object = nil)
          spareables + _ransackers.keys
        end
      end
    end
  end
end 
```

然后你可以使用

```
MyClass < ActiveRecord::Base
  spare_ransack :id, :created_at, :updated_at, :section
end 
```

而且这些属性不会被洗劫。我喜欢这种方法，因为它允许您有条件地设置它们。

**编辑**

虽然不被视为职业魔法，但这确实适用于那些不介意的人

```
def spare_ransack(*attribs)
  self._spare = attribs.map do |a| 
    case a.to_sym
      #remove time_stamp fields 
        when :time_stamps
          ["created_at","updated_at"]
      #requires spare_ransack to be called after associations in the file
        when :association_keys
          reflect_on_all_associations.select{|a| a.macro == :belongs_to}.collect{|a| a.options[:foreign_key] || "#{a.name}_id"}
      #remove primary key field 
        when :primary
          primary_key
        else
          a.to_s
    end
  end.flatten
end

MyClass < ActiveRecord::Base
  spare_ransack :primary,:time_stamps, :section
end 
```

# rtf - RTF 项目符号列表示例

> ID：15367975
> 
> 赞同：13
> 
> 时间：2013-03-12T17:25:48.833
> 
> 标签：rtf

似乎不可能为如下所示的 RTF 项目符号列表找到一个非常简单的工作示例：

*   你好
*   世界
    *   嵌套（但请用正方形作为项目符号）
    *   也嵌套（也是方形项目符号）
*   并再次定期

我尝试使用 Word 或 TextEdit.app 制作一个小样本，但它们会产生很多垃圾。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-28T20:42:37.890

如果您在 Word 或 Wordpad 格式的 RTF 中查看足够长的时间，您会发现一些如下所示的行：

> {\f2 {\pntext \'B7\tab}{*\pn\pnlvlblt\pnstart1{\pntxtb\'B7}}{\ltrch 这是一个测试。}\li720\ri0\sa0\sb0\jclisttab\tx720\ fi-360\ql\par}
> 
> {\f2 {\pntext \'B7\tab}{*\pn\pnlvlblt\pnstart1{\pntxtb\'B7}}{\ltrch 这也是。}\li720\ri0\sa0\sb0\jclisttab\tx720\fi -360\ql\par}

这将像这样格式化

*   这是一个测验。
*   这也是。

嵌套列表可能有点难，但如果您没有任何嵌套列表，这就是您想要的。

现在这取决于你想用这个做什么。如果您只是显示它，那么每个标签都意味着有用的东西。当我使用列表时，我正在将它们转换为 HTML，因此我的应用程序不需要很多格式化标签（ `\li`、`\ri`、等），因为我只是使用,和标签。最主要的是看到它的标签，这使得这个列表成为一个项目符号列表。此外，是子弹的实际 unicode 标签，**·**`\tx``<ol>``<ul>``<li>``\pnlvlblt``\'B7`

 **最新的 RTF 规范在这里：

[https://www.microsoft.com/en-us/download/details.aspx?id=10725](https://www.microsoft.com/en-us/download/details.aspx?id=10725)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-31T06:28:30.897

一个简单直接的方法是只使用字符，如下所示：

```
\line \bullet Hello
\line \bullet World
\line \tab \bullet Nested (but with square as bullet please)
\line \tab \u9632 Also nested (also square bullet)
\line \tab and regular again 
```

之后您仍然可以将 RTF 解析回基于标签的格式，其中包含的标签作为层次结构信息由缩进提供。

如您所见，任何类型的 unicode 用法都可以。对于 unicode，请参阅此[站点](http://en.wikipedia.org/wiki/Geometric_Shapes)。

有关更多信息，请务必查阅 RTF 规范的[项目符号和编号部分](http://www.biblioscape.com/rtf15_spec.htm#Heading33)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-06T22:18:45.117

我尝试了 Saur 的分析器，但“也嵌套（也是方形项目符号）”行的 A 也被方形项目符号覆盖。不知道为什么会这样。
■同样嵌套（也是方形项目符号）

我喜欢使用 line indent 命令，所以如果发生换行，换行的文本也会缩进。当您执行 \line \tab 时，任何超出打印页面末尾的内容都将从左边距开始，而不是从您的缩进文本开始的位置开始。这是由 System.Windows.Forms.RichTextBox 生成的系统，我将其粘贴到（来自 MS-Word）中，然后调用 RichTextBox.RTF 来获取代码。

```
{\rtf1\fbidis\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\froman\fprq2\fcharset2 Symbol;}{\f1\froman\fprq2\fcharset0 Times New Roman;}{\f2\fnil\fprq2\fcharset2 Wingdings;}{\f3\fnil\fcharset0 Microsoft Sans Serif;}}
\viewkind4\uc1\pard\ltrpar\fi-360\li360\f0\fs20\'b7\tab\f1 Hello\par
\f0\'b7\tab\f1 World\par
\pard\ltrpar\fi-360\li990\f2\'a7\tab\f1 Nested (but with square as bullet please)\par
\f2\'a7\tab\f1 Also nested (also square bullet)\par
\pard\ltrpar\fi-360\li360\sa200\sl276\slmult1\f0\'b7\tab\f1 and regular again\lang1024\par
\pard\ltrpar\lang1033\f3\fs17\par
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-20T02:38:25.007

这是另一种简单的方法，只要在页面上正确显示即可。您所要做的就是用 \li 设置块缩进，用 \fi 设置负首行缩进，并在行首使用 \bullet\tab。

```
{\rtf1\ansi\deff0
{\pard\fi-300\li300\bullet\tab Having demonstrated his model time machine to a handful of reliable witnesses, The Time Traveller, within the week, 
\par}

{\pard\fi-300\li600\bullet\tab Having demonstrated his model time machine to a handful of reliable witnesses, The Time Traveller, within the week, 
\par}
} 
```

[![在此处输入图像描述](../Images/d6661e37c8bb04c8d7d06a7352671e6a.png)](https://i.stack.imgur.com/2cT42.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-10T14:45:17.950

这就是我创建项目符号列表的方式：

```
{\rtf1\ansi\deff0
{{\li0\pntext\pn\pnlvlblt\pntxtb\u8226?\tab}{This is item one}\par}
{{\li0\pntext\pn\pnlvlblt\pntxtb\u8226?\tab}{This is item two}\par}
{{\li400\pntext\pn\pnlvlblt\pntxtb\u9642?\tab}{This is item three}\par}
{{\li400\pntext\pn\pnlvlblt\pntxtb\u9642?\tab}{This is item four}\par}
{{\li0\pntext\pn\pnlvlblt\pntxtb\u8226?\tab}{This is item five}\par}
} 
```

呈现为：

[![在此处输入图像描述](../Images/2731021cf31a4fd95613af466bff0452.png)](https://i.stack.imgur.com/g0fTk.png)

*请注意，多级列表并没有真正受到威胁。它基本上是一个带有缩进节点的普通列表。*

解释：

`\li0`: 打算 0（对多级列表有用）

`\pntext`: 所有编号/项目符号段落的前缀

`\pn`：打开段落编号（项目符号列表也需要）

`\pnlvlblt`: 本段为项目符号段

`\pntxtb`: 之前的文字（图标）

`\u8226?`:[项目符号的 unicode 字符](https://www.fileformat.info/info/unicode/char/2022/index.htm)

`\u9642?` [小黑方块的 unicode 字符](https://www.fileformat.info/info/unicode/char/25aa/index.htm)

`\tab`：在图标后添加一个标签

`\par`: 段尾

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-11T08:21:24.490

这适用于想要将文本和项目符号列表添加到**扩展的 wpf 工具包 (wpfToolKit) richTextBox**的人。我创建了这个，因为我对这里的解决方案有一些问题。他们没有为我工作，或者`\tab`子弹前面太大了。通过这个实现，你可以**调整子弹前面的缩进**。

此实现的注意事项：

*   您必须使用缩进 ( `\li`)。在我的情况下，这些值必须相差数百才能看到效果。在此示例中：100 和 500。

*   用于`\par\pard`富文本框中的每一行很重要。没有它，它也会缩进其他没有项目符号的行。

*   标题包含诸如着色之类的内容，您可能不需要这些内容。

**方法**

```
public  string AddBullet(string textRow, int indent)
{
    return $@"\li{indent}{{\pntext\f1\'B7}}{{\*\pn\pnlvlblt{{\pntxtb\'B7}}}}{textRow}";
}

public  string AddNewLine(string text)
{
    return $@"{text}\par\pard ";
}

public  string AddHeader(string text, string fontName, int fontSize)
{
    return $@"{{\rtf1\ansi\ansicpg1252\deff0\nouicompat\deflang1031{{\fonttbl{{\f0\fnil\fcharset0 {fontName};}}{{\f1\fnil\fcharset2 Symbol;}}}}{{\colortbl ;\red0\green77\blue187;\red128\green0\blue0;\red0\green0\blue0;\red155\green0\blue211;\red81\green163\blue69;\red51\green51\blue51;}}\viewkind4\uc1\pard\sl0\slmult1\f0\fs{fontSize * 2}\lang7 {text}}}";
} 
```

**如何使用方法**

```
var regularRow1     = AddNewLine("AAAA");
var bulletRow1      = AddNewLine(AddBullet("BBBB", 100));
var bulletRowNested = AddNewLine(AddBullet("CCCC", 500));
var bulletRow2      = AddNewLine(AddBullet("BBBB", 100));
var regularRow2     = AddNewLine("AAAA");

var richTextWithoutHeader = regularRow1 + bulletRow1 + bulletRowNested + bulletRow2 + regularRow2;
var richText = AddHeader(richTextWithoutHeader, "Arial", 12); 
```

**结果**

[![结果](../Images/d9542810cb92a9b07c12d5148fc999fc.png)](https://i.stack.imgur.com/3cWzq.png)**

# sql - 对下拉列表进行排序，但在排序列表的末尾包含“其他”作为列表项

> ID：15367976
> 
> 赞同：-2
> 
> 时间：2013-03-12T17:25:54.190
> 
> 标签：sql

我想对下拉列表进行排序，但确保*“其他”*项出现在排序的末尾`dropdownlist`。我尝试在列表中使用 Order by 排除 *“其他”*，然后使用*“联合”将**“其他”*附加到排序结果。但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:10:06.067

如果没有关于您正在使用的控件的更多信息（尝试使用您的控件集名称更新您的标签！），就不可能给您一个特定的代码示例来解决您的问题。这是因为您的下拉列表数据可以在多个层中进行排序；该控件可能会保留您在 SQL 数据集中的原始顺序，但可能不会。它可能有一个默认设置来按字母顺序排列元素等......我过去曾以两种方式成功处理过这样的情况：

1.通常可以在控件初始化代码中将数据元素单独添加到下拉列表中。只需使用以下行的代码将“其他”添加到列表的末尾

`ddlUnknownControl.Add(new ddlElement("Other")`

2.当您只有一种特定的方式来对某些数据进行排序时（通常不止一个一次性值），您实际上可以在表中专门放置一列用作对数据进行排序的索引。小心这个！它必须小心维护，然后，为了保证您的订单得到保留，您需要将您的信息作为一组标签、值对和值控制内的顺序拉到下拉列表中（其中值是索引和标签是文本信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:52:06.563

首先，感谢那些在这里提出宝贵建议的人。这更像是一个 SQL 查询构造问题。我面临的问题是在查询中的 ORDER BY 之后我无法使用 UNION，其结果将用于填充 ASP.NET 控件下拉列表。我找到的简单解决方案是在 SELECT 语句中添加一个分配给 ddlitem.value 的新假列，然后按该列排序。诀窍是将 ddlitem.value 分配给 (ddlitem.text - OTHER) 的 999（或一个大值），这样当使用该假列​​执行 ORDER BY 时，它总是在最后结束。

# asp.net - ajaxfileupload 不显示“选择文件”对话框

> ID：15367979
> 
> 赞同：1
> 
> 时间：2013-03-12T17:26:07.667
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit

我正在开发一个内部 Web 应用程序，它收集各种图像并将它们自动绘制到更大的图像上。我在使用 Microsoft 的 AJAX 工具包中的 ajaxFileUpload 控件时遇到问题。

在页面中，用户可以选择在文本框中填写 ID 号，然后单击按钮以获取一些文本数据（图像的元数据）并填充几个文本框/下拉列表。用户还可以选择单击按钮从本地系统上传图像以进行处理。ajaxFileUpload 控件位于 UpdatePanel 上。

当用户使用“填充”功能检索元数据然后选择上传图像时，“选择文件”按钮不会触发本地系统上的“打开文件”对话框。

当用户在检索元数据之前首次尝试上传图像时，“选择文件”按钮会弹出“打开文件”对话框以允许用户选择所需的文件。

ajaxFileUpload 控件在第一种情况下按预期工作；我假设如果我真的可以选择要上传的文件，那么该过程的其余部分将起作用。

需要发布什么代码来尝试解决这个问题？ASPX? 后端VB？

标记：

 `````
<asp:UpdatePanel runat = "server" ID = "upMain" >
    <ContentTemplate>
        <asp:Label runat = "server" ID = "lblImageBuilderTitle" Text = "Image Builder" CssClass = "panelTitle" />
        <asp:Table runat = "server">
            <asp:TableRow>
                <asp:TableCell HorizontalAlign = "Right" Width = "10%">
                    <asp:Label runat = "server" Text = "JTN: " />
                </asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox runat = "server" ID = "tbJTN" /><asp:Button runat = "server" ID = "btnPopulate" Text = "+" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell HorizontalAlign = "Right" Width = "10%">
                    <asp:Label runat = "server" Text = "Job Ref: " />
                </asp:TableCell>
                <asp:TableCell>
                    <asp:TextBox runat = "server" ID = "tbJobRef" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell HorizontalAlign = "Right" Width = "10%">
                    <asp:Label runat = "server" Text = "Customer: " />
                </asp:TableCell>
                <asp:TableCell>
                    <asp:DropDownList runat = "server" ID = "ddlImageBuilderCustomer" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell HorizontalAlign = "Right" Width = "10%">
                    <asp:Label runat = "server" Text = "Type: " />
                </asp:TableCell>
                <asp:TableCell>
                    <asp:DropDownList runat = "server" ID = "ddlImageBuilderType" AutoPostBack = "true" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell HorizontalAlign = "Right" Width = "10%">
                    <asp:Label runat = "server" Text = "Email to Deana: " />
                </asp:TableCell>
                <asp:TableCell>
                    <asp:CheckBox runat = "server" ID = "cbEmailDeana" Checked = "true" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell HorizontalAlign = "Right" Width = "10%">
                    <asp:Label runat = "server" Text = "Email to Amy: " />
                </asp:TableCell>
                <asp:TableCell>
                    <asp:CheckBox runat = "server" ID = "cbEmailAmy" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell HorizontalAlign = "Right" Width = "10%">
                    <asp:Label runat = "server" Text = "Rego Branding: " Visible = "false" />
                </asp:TableCell>
                <asp:TableCell>
                    <asp:CheckBox runat = "server" ID = "cbRegoBranding" Visible = "false" />
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow>
                <asp:TableCell ColumnSpan = "2" HorizontalAlign = "Center">
                    <asp:Label runat = "server" Text = "Images: " /><br />
                    <asp:GridView runat = "server" ID = "gvImages" AutoGenerateColumns = "false" AutoGenerateSelectButton = "false">
                        <Columns>
                            <asp:TemplateField>
                                <ItemTemplate>
                                    <asp:Label runat = "server" ID = "lblOriginalName" Text = "<%# Bind('original_filename') %>" />
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField>
                                <ItemTemplate>
                                    <asp:Button runat = "server" ID = "btnRowUp" CommandName = "Reorder" CommandArgument = "Up" />
                                    <asp:Button runat = "server" ID = "btnRowDown" CommandName = "Reorder" CommandArgument = "Down" />
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns>
                        <EmptyDataTemplate>No images uploaded.</EmptyDataTemplate>
                    </asp:GridView>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:ModalPopupExtender runat = "server" ID = "mpePopulate" TargetControlID = "btnPopulateDummy" PopupControlID = "pnlPopulate" BackgroundCssClass = "modalBackground" />
        <asp:Button runat = "server" ID = "btnPopulateDummy" CssClass = "invisible" />
        <asp:ModalPopupExtender runat = "server" ID = "mpeUpload" TargetControlID = "btnUpload" PopupControlID = "pnlUpload" CancelControlID = "btnUploadClose" BackgroundCssClass = "modalBackground" />
        <asp:Button runat = "server" ID = "btnUpload" Text = "Upload Images" />
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID = "gvPopulate" EventName = "SelectedIndexChanged" />
        <asp:AsyncPostBackTrigger ControlID = "btnUploadClose" EventName = "Click" />
        <asp:AsyncPostBackTrigger ControlID = "gvImages" EventName = "DataBound" />
        <asp:AsyncPostBackTrigger ControlID = "ajuImageUpload" EventName = "UploadComplete" />
    </Triggers>
</asp:UpdatePanel> 
````  `代码隐藏：

 `````
Private Sub ImageBuilder_PreRender(sender As Object, e As System.EventArgs) Handles Me.PreRender
    Dim dtIBImages As New DataTable
    If IsPostBack = False Then
        BindCustomerDDL("ImageBuilder")
        BindCategoryDDL("ImageBuilder")
        BindTemplatesDDL()
        'Session("dtIBImages") = Nothing

        'dtIBImages.Columns.Add("id")
        'dtIBImages.Columns.Add("original_filename")
        'dtIBImages.Columns.Add("image_filename")
        'dtIBImages.Columns.Add("disposition")

        '    Session("dtIBImages") = dtIBImages
    Else
        dtIBImages = Session("dtIBImages")
        gvImages.DataSource = dtIBImages
        gvImages.DataBind()
    End If
    dtIBImages = Session("dtIBImages")
    gvImages.DataSource = dtIBImages
    gvImages.DataBind()
End Sub 
```````

# ruby - Ruby 在新子目录中创建 csv 文件

> ID：15367980
> 
> 赞同：1
> 
> 时间：2013-03-12T17:26:09.583
> 
> 标签：ruby, csv, mkdir, fileutils

下面更新

我有一个 Ruby 脚本，它遍历一些 JSON 并使用数据创建多个 .CSV 文件。目前它只是在与脚本/JSON 相同的文件夹中创建那些。但是，我希望它在新创建的带有时间戳的子目录中创建文件。

我知道我需要`require 'fileutils.rb'`并且我创造`time = Time.now.strftime("%Y%m%d%H%M%S%")`了`outdir = FileUtils.mkdir(time)`

我将这些添加到我的脚本中，它成功创建了目录，但随后中断。

创建文件的脚本的结尾看起来像这样，我认为问题是我要进入目录/在新目录中创建文件的方式：

```
...
    outdir = FileUtils.mkdir(time)
    FileUtils.cd(outdir) do #I think this is wrong
      filename = k+".csv"
      out = CSV.open(filename, "w")
      csv.each{|item| out << item}
      out.close()
    end
  } 
```

- -更新 - -

看来问题出在我指定 dir 路径和 CSV 模块时。我收到错误`Invalid argument - ["20130312113853"]/regions.csv (Errono::EINVAL)` 当我查看 CSV 模块文档时，我看到您可以声明读取 CSV 的路径，但在另一个目录中创建/写入它们时没有任何内容。这是我第一次使用这个模块。有谁知道如何解决这个问题？

我想我需要先声明 csv 的目录路径`csv = []`吗？

全文：

```
#!/usr/bin/env ruby

require 'json' 
require 'csv'  
require 'fileutils.rb' 

file = "parse_me.json"

ff = JSON.parse(File.open(file).read)
time = Time.now.strftime("%Y%m%d%H%M%S")
outdir = FileUtils.mkdir(time)
begin
  ff.each{|k,h|
    csv = []
    csv << h[0].keys
    h.each{|arr|
      holder = []
      arr.each_value{|v|
        holder << v
      }
    csv << holder
    }
      out = CSV.open("#{outdir}/#{k}.csv", "w")
      csv.each{|item| out << item}
      out.close()
  }
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:21:08.540

这是因为`FileUtils.mkdir`返回一个`Array`，因为您[可以同时创建一个或多个目录，它返回一个`Array`创建的目录。](http://ruby-doc.org/stdlib-2.0/libdoc/fileutils/rdoc/FileUtils.html#method-c-mkdir).

如果您只是`time`直接使用，您的代码应该可以工作

```
...
FileUtils.mkdir(time)
FileUtils.cd(time) do
  filename = k+".csv"
  out = CSV.open(filename, "w")
  csv.each{|item| out << item}
  out.close()
end 
```

# ruby - 比较 Ruby 中 Fixnums 的符号

> ID：15367982
> 
> 赞同：0
> 
> 时间：2013-03-12T17:26:13.220
> 
> 标签：ruby

我只想比较两个 Fixnums 的符号。现在我正在使用：

```
c = -c if (a >= 0.0 && b < 0.0) || (a < 0.0 && b >= 0.0) 
```

我想要类似的东西：

```
c = -c if a.sign != b.sign 
```

或者也许只是比较符号的其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:33:03.443

也许只是乘法：

```
c = -c if a*b < 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:29:32.607

您可以使用与“ ”`a >= 0`类似的目的，用于正（非负）和负：`a.sign``true``false`

```
c = -c if (a>=0) != (b>=0) 
```

如果您经常使用它，并且想要一种更 Ruby 风格的感觉，那么可能值得您花点时间阅读上面的评论并对其进行修补，就像`Numeric#pos?`可能一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:19:30.477

这个问题让我开始在我的汇编工具箱中四处寻找，我已经多年没有打开它了。我认为这会做你正在寻找的东西：

```
c = -c if (a < 0) ^ (b < 0) 
```

这是它正在做的事情：

```
irb(main):006:0> 真 ^ 真
=> 假的
irb(main):007:0> 真 ^ 假
=> 真
irb(main):008:0> 假 ^ 真
=> 真
irb(main):009:0> 假 ^ 假
=> 假的

```

根据您的代码，另一种使用方法是在三元语句中使用它：

```
((a < 0) ^ (b < 0)) ? -c : c 
```

这是一些基准代码和结果：

```
require 'benchmark'

puts `ruby -v`

N = 10_000_000

A = 1
B = 1
Benchmark.bm(5) do |bench|
  bench.report('^') { N.times { (A < 0) ^ (B < 0) } }
  bench.report('!=') { N.times { (A>=0) != (B>=0) } }
  bench.report('<') { N.times { A*B < 0 } }
end

ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-darwin12.2.0]
            user     system      total        real
^       5.740000   0.000000   5.740000 (  5.743873)
!=      4.300000   0.000000   4.300000 (  4.304685)
<       3.310000   0.000000   3.310000 (  3.312378)

ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.2.0]
            user     system      total        real
^       1.480000   0.000000   1.480000 (  1.484879)
!=      1.400000   0.000000   1.400000 (  1.401381)
<       1.260000   0.000000   1.260000 (  1.256628) 
```

那是 10M 循环，这是一个堆 o' 循环。看起来像是 steenslag FTW！

# ms-access - 根据表单的组合框选择在子表单上显示记录（使用 VBA）

> ID：15367986
> 
> 赞同：1
> 
> 时间：2013-03-12T17:26:31.053
> 
> 标签：ms-access, ms-access-2010

我有一个主窗体，其中有一个我命名为**FLRecCombo**的组合框。这最初是这样设置的，以便在组合框中选择一个选项将移动到主窗体的记录源上的该记录。

然后我在主表单上也有子表单，最初设置时会根据主表单当前使用的任何记录源使用公共字段移动到其记录源中的记录（即，您可以使用组合框移动到所有子表单上的给定记录）。

请注意所有这些都是过去时...

我想在 VBA 中的**FLRecCombo** AfterUpdate 事件中添加一些代码；不幸的是，这似乎切断了组合框、主窗体和子窗体之间的关系。我认为可能在**FLRecCombo** AfterUpdate 事件中创建了一个宏，我通过代码生成器粗暴地过度使用了它。

我怎样才能恢复我最初的行为？我尝试了这个网站上建议的方法；这是对象引用：

*   子表单名称：**Finance_FunderAllocation 子表单**
*   子表单记录来源：**Finance_HeadRec_FunderAllocation**
*   要匹配的子表单记录源字段名称：**资金行**
*   要匹配的表单记录源字段名称：**FundingLine**

这是我尝试过的代码：

```
Private Sub FLRecCombo_AfterUpdate() 

    With Me.[Finance_FunderAllocation subform].Form.Recordset
        .FindFirst "Funding Line=" & Me.FLRecCombo
    End With 

End Sub 
```

访问调试器不喜欢这样，说：

> 运行时错误“3077”：
> 
> 表达式中的语法错误（缺少运算符）。

然后它突出显示以**.FindFirst开头的代码行**

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:31:12.703

那应该是：

```
 .FindFirst "[Funding Line]=" & Me.FLRecCombo 
```

或者，如果资金线是文本：

```
 .FindFirst "[Funding Line]='" & Me.FLRecCombo & "'" 
```

您需要方括号，因为您的字段名称中有一个空格。为了您自己的利益，请考虑去掉表名和字段名中的所有空格。

最后，您可以对子表单的链接子字段和主字段做很多事情，包括在不使用任何代码的情况下过滤子表单的内容。

```
 Link Master Fields: MyCombo
 Link Child Fields : [Funding Line] 
```

# c++ - 混合 pthread.h 和 C++11 标准库线程功能是否安全？

> ID：15367988
> 
> 赞同：21
> 
> 时间：2013-03-12T17:26:34.637
> 
> 标签：c++, c++11, pthreads, mutex

我可以在其中安全地生成线程`pthread_create`并在其中使用吗？`std::mutex`

我认为如果`std::mutex`作为 a 实现`pthread_mutex_t`那么它会很好，但我没有在任何地方看到这个记录

例如：

```
#include <pthread.h>
#include <mutex>

namespace {
std::mutex global_lock;
}

void* thread_func(void* vp) {
    // std::mutex used in thread spawned with pthread_create
    std::lock_guard<std::mutex> guard(global_lock);
    // critical section
    return nullptr;
}

int main() {
    pthread_t tid;
    pthread_create(&tid, nullptr, thread_func, nullptr);
    pthread_join(tid, NULL);
} 
```

顺便说一句，我正在运行 Debian Wheezy。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:52:37.867

你可以在我的机器上（Debian 也是）。但我不确定我是否会称之为保险箱。

如果你查看相关文件，`/usr/include/c++/4.7/i486-linux-gnu/bits/gthr-default.h`在我的例子中，你会看到将有一个 1:1 映射到 pthreads api。`<mutex>`用于`__gthread_mutex_lock`锁定，它在那里被精确定义`pthread_mutex_lock`。或者你会看到`std::thread`声明`typedef __gthread_t native_handle_type;`

我不知道是否有记录的方法来检查是否使用了 pthread。但是`gthr-default.h`定义`_GLIBCXX_GCC_GTHR_POSIX_H`为包含守卫，我认为只要定义了这个宏，您就可以假设您可以将它们混合使用。

编辑：鉴于@Wakely 的提示，我会写：

```
template <typename T>
using strip = typename std::remove_pointer<typename std::decay<T>::type>::type;

static_assert(std::is_same<strip<std::thread::native_handle_type>, pthread_t>::value,
              "libstdc++ doesn't use pthread_t"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T17:59:18.723

在任何规范中都没有保证它会起作用，但很可能在使用 pthreads 作为其唯一真正的线程库的操作系统上的任何 C++ 实现都将在 C++ 线程下使用 pthreads，因此它可能会起作用。

如果您稍后尝试将代码移植到使用 pthread 以外的其他平台，即使该平台也支持 pthread（例如，windows），您可能会遇到问题。

问题是，为什么要麻烦和冒险呢？如果您使用的是 C++11 `std::mutex`，为什么不使用`std::thread`呢？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-11T22:28:41.970

Both `std::thread` and `std::mutex` have a `native_handle` method which allows you to dig down to the platform implementation of the given object. This says to me that the standard threading library is designed to play nice with the platform implementation.

As an aside `std::thread` and `std::mutex` are different objects that do different things viz. manage threads and provide cross thread synchronization. In the end the kernel does the heavy lifting.

So if you are not worried about portability, I cannot see why this should be an issue.

As an aside, sometimes you may need the native platform implementation so as to provide you with the richer feature-set that the platform allows. For example BSD threading allows different types of threads and some threading libraries allow you to set the stack size of your new thread. The C++ threading APIs are a portable lowest common denominator.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-06T05:39:29.123

如果您的问题是：我可以在一种互斥锁和另一种互斥锁之间随意切换吗？那么答案是否定的（除非所有底层都使用相同的实现，例如 pthread_mutex。）

但是，如果您想要保护不同的资源组，则可以使用任何一种实现来保护任何一组资源。实际上，有时使用信号量会更好（即信号量对于定义一个写锁，多个读锁很有用）。

因此，如果您要管理 4 组资源，则可以使用：

*   标准：：互斥体，
*   pthread_mutex,
*   提升::互斥量，
*   信号量。

你不能做的是使用 boost::mutex 来访问受信号量保护的数据，反之亦然，或者使用 std::mutex 来使用受 pthread_mutex 保护的东西。

举个简单的例子，就代码而言，这意味着 getter 和 setter 将以这种方式完成：

```
void set(int new_value)
{
    guard lock(my_mutex);
    m_value = new_value;
}

int get() const
{
    guard lock(my_mutex);
    return m_value;
} 
```

这两个函数使用相同的互斥锁（此处`my_mutex`），显然互斥锁只有**一种**类型。

与此相反，您不能这样做：

```
void set(int new_value)
{
    guard lock(this_mutex_here);
    m_value = new_value;
}

int get() const
{
    SafeGuard lock(that_mutex_there);
    return m_value;
} 
```

在第二个示例中，您使用了两个不同的互斥体，这不会按预期工作，因为锁定`set()`不会阻塞锁定，`get()`反之亦然。所以它没有什么安全的（即使其中一名警卫被称为 SafeGuard。）

所以规则是，如果您`m_value`使用名为 的互斥锁进行保护`my_mutex`，则任何时候访问`m_value`都必须锁定`my_mytex`互斥锁。您使用哪种实现并不重要，只要您以这种方式保持一致即可。

# vb.net - “未声明服务器”.net server.createobject 错误

> ID：15367996
> 
> 赞同：0
> 
> 时间：2013-03-12T17:26:47.053
> 
> 标签：vb.net

我正在尝试将旧的 VB6 文件转换为 VB.net（我以前从未使用过）...我在这一行遇到错误：

```
Dim JMail As Object
JMail = Server.CreateOBject("JMail.Message") 
```

说**“未声明服务器”**

我有：

导入 System.Web

在顶部 - 我认为这让我可以访问 Server.CreateObject ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:34:01.087

由于一切都是强类型的，因此在 .NET 中并没有真正的直接等价物`Server.CreateObject`，尽管您可以使用(Ick)来使用`System.Type.GetTypeFromProgID`和调用各种方法。`InvokeMember`就像是：

```
Type proxyType = System.Type.GetTypeFromProgID("JMail.Message");
object proxy = Activator.CreateInstance(proxyType);
object result = proxyType.InvokeMember("MemberName",
   // System.Reflection.BindingFlags
   null,
   proxy,
   // An object array with your parameters for this call
); 
```

最好的解决方案可能是围绕您的库[创建一个 COM 包装器，并在您的解决方案中引用它。](http://msdn.microsoft.com/en-us/library/ms404285.aspx)

如果您可以提供有关您的代码的具体功能的更多详细信息，也许有人可以建议一种在 .NET 中实现该功能的本地方法。例如，如果您只是想发送电子邮件或其他东西，那么在 .NET 中有上百万种方法可以做到这一点。

**更新：**只需获取[JMail.NET](http://www.dimac.net/default2.asp?M=Products/MenuDOTNET.asp&P=Products/JMaildotnet/start.htm)，不再需要处理旧的 ActiveX 库。

# c# - 我们可以在验证过程中更新文本框的值吗

> ID：15367999
> 
> 赞同：0
> 
> 时间：2013-03-12T17:27:03.843
> 
> 标签：c#, .net, wpf, xaml

我是 wpf 和 xaml 的新手，但一直在阅读一些在线教程和学习。我创建了一个文本框并通过从 ValidationRule 类派生并覆盖 Validate 方法添加了验证规则。

所以在那个方法中，我确保输入的字符串不为空，否则我返回`new ValidationResult(false, "Input required");`

现在我可以在此处更新文本值；例如，如果字符串为空，请将其设置为默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:43:46.103

不幸的是，验证规则发生在逻辑树之外。

您可以尝试[Josh Smith 的虚拟分支](http://www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in)方法。