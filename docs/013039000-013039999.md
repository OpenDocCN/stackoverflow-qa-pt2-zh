# StackOverflow 问答 13039000-13039999

# vb.net - vb net：从xml中获取字符串，如何获取三个值？

> ID：13039002
> 
> 赞同：1
> 
> 时间：2012-10-23T20:49:47.907
> 
> 标签：vb.net

我得到了类型值“戏剧”，但它只有一个，我怎样才能得到三个类型值，比如“戏剧”、“喜剧”和“惊悚”？

```
<details>
    <id>734357</id>
    <title>vb best</title>
    <year>2012-07-27</year>
    <genre>Drama</genre>
    <genre>Comedy</genre>
    <genre>Thriller</genre
    <studio></studio>
</details>

    Dim doc As New XmlDocument()
    Dim nodes As XmlNodeList
    doc.Load(FILE_NAME)

    nodes = doc.SelectNodes("/details")
    Dim node As XmlNode

    For Each node In nodes

        Dim nodeid As XmlNode = node.SelectSingleNode("id")
        If nodeid IsNot Nothing Then
            MsgBox(node.SelectSingleNode("id").InnerText)
        End If
        Dim nodeimdb_id As XmlNode = node.SelectSingleNode("title")
        If nodeimdb_id IsNot Nothing Then
            MsgBox(node.SelectSingleNode("title").InnerText)
        End If

        Dim nodegenre As XmlNode = node.SelectSingleNode("genre")
        If nodegenre IsNot Nothing Then
            MsgBox(node.SelectSingleNode("genre").InnerText)
        End If

    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:14:31.243

```
Dim doc As New XmlDocument()
Dim nodes As XmlNodeList
doc.Load(FILE_NAME)

nodes = doc.SelectNodes("/details")
Dim node As XmlNode

For Each node In nodes

    Dim nodeid As XmlNode = node.SelectSingleNode("id")
    If nodeid IsNot Nothing Then
        MsgBox(nodeid.InnerText)
    End If
    Dim nodeimdb_id As XmlNode = node.SelectSingleNode("title")
    If nodeimdb_id IsNot Nothing Then
        MsgBox(nodeimdb_id.InnerText)
    End If

    Dim genreNodes As XmlNodeList = node.SelectNodes("genre")
    For each genreNode in genreNodes
        MsgBox(genreNode.InnerText)
    Next

Next 
```

将是一种方式。请注意，既然您已经获得了节点，则无需再次获得它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:14:33.787

使用`.SelectNodes`代替`.SelectSingleNode`

# .htaccess - 用 htaccess 重写一个 url

> ID：13039007
> 
> 赞同：0
> 
> 时间：2012-10-23T20:50:02.573
> 
> 标签：.htaccess

我对 ht-access 完全陌生，我不确定这是否是正确的方法。在我的 WordPress 网站上，我有当前的网址： [http ://www.example.com/category/travel/](http://www.example.com/category/travel/)

并希望将其映射到： [http ://www.example.com/kids-vaction-spots/](http://www.example.com/kids-vaction-spots/)

因此，旅行类别下的任何帖子都类似于：www.example.com/kids-vaction-spots/beach-holidays

是否有可能在 htaccess 中有一个规则来做到这一点？

感谢您花时间看这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:26:58.563

尝试将这些规则添加到文档根目录中的 htaccess 文件中。确保它们高于为 CMS 进行路由的任何规则。

```
RewriteEngine On
RewriteRule ^/?category/travel/(.*)$ /kids-vacation-spots/$1 [L,R=301] 
```

# xml - 计算并显示嵌套元素 XSLT 的总和

> ID：13039008
> 
> 赞同：1
> 
> 时间：2012-10-23T20:50:06.440
> 
> 标签：xml, xslt, xslt-1.0

XML 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<rows>

  <row id="FOLDER1">
    <cell image="blank.gif">Folder 1</cell>
    <cell></cell>
    <cell></cell>
    <cell></cell>
    <cell></cell>
    <cell></cell>
    <cell></cell>
    <cell sum="1">$23</cell>
    <row id="FOLDER2">
      <cell image="blank.gif">Folder 2</cell>
      <cell></cell>
      <cell></cell>
      <cell></cell>
      <cell></cell>
      <cell></cell>
      <cell></cell>
      <cell sum="2">$11</cell>
      <row id="FOLDER3">
        <cell image="blank.gif">Folder 3</cell>
        <cell></cell>
        <cell></cell>
        <cell></cell>
        <cell></cell>
        <cell></cell>
        <cell></cell>
        <cell sum="3">$44</cell>
        <row id="pro1">
          <cell image="blank.gif">Product 1</cell>
          <cell>324234</cell>
          <cell>3.00</cell>
          <cell>Kilo</cell>
          <cell>1.00</cell>
          <cell>No</cell>
          <cell>€ 33.33</cell>
          <cell>€ 33.33</cell>
        </row>
        <row id="pro2">
          <cell image="blank.gif">Product 2</cell>
          <cell>4354354</cell>
          <cell>1.00</cell>
          <cell>Kilo</cell>
          <cell >0.50</cell>
          <cell>No</cell>
          <cell>€ 2.53</cell>
          <cell>€ 1.26</cell>
        </row>

      </row>
      <row id="pro3">
        <cell image="blank.gif">Product 3</cell>
        <cell>435436</cell>
        <cell>10.00</cell>
        <cell>Kilo</cell>
        <cell>Yes</cell>
        <cell>€ 0.36</cell>
        <cell>€ 3.60</cell>
      </row>

    <row id="pro4">
      <cell image="blank.gif">Product 4</cell>
      <cell>435435</cell>
      <cell>3.28</cell>
      <cell>Kilo</cell>
      <cell>1.00</cell>
      <cell>No</cell>
      <cell>€ 17.38</cell>
      <cell>€ 17.38</cell>
    </row>
    <row id="NEWCAT_59">
        <cell image="blank.gif">&lt;strong&gt;+ Add new category&lt;/strong&gt;</cell>
      </row>
      <row id="NEWSEMING_59">
        <cell image="blank.gif">&lt;strong&gt;+ Add new product&lt;/strong&gt;</cell>
      </row>
   </row>
  </row>

</rows> 
```

XSLt 是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="/">
  <html>
    <head/>
    <body>
      <xsl:apply-templates select="rows" />
    </body>
  </html>
</xsl:template>

<xsl:template match="rows">
  <table>
    <tbody><tr>
      <xsl:for-each select="row[1]/cell">
        <th><xsl:value-of select="position()" /></th>
      </xsl:for-each>
    </tr>
    <xsl:apply-templates select="descendant::row" />  
  </tbody>
  </table>
</xsl:template>  

<xsl:template match="row[contains(cell[1],'Add new ')]" />

<xsl:template match="row">
  <tr>
    <xsl:apply-templates select="cell" />
  </tr>  
</xsl:template>

<xsl:template name="style">
  <xsl:param name="margin" select="0" />
  <xsl:param name="display" select="'inline'" />
  <xsl:variable name="v1">
    <xsl:if test="$margin &gt; 0">
      <xsl:value-of select="concat('margin-left:',$margin,'px;')" />
    </xsl:if>
    <xsl:if test="$display">
      <xsl:value-of select="concat('display: ',$display,';')" />
    </xsl:if>
  </xsl:variable>  
  <xsl:if test="$v1">
    <xsl:attribute name="style"><xsl:value-of select="$v1" /></xsl:attribute>
  </xsl:if>
</xsl:template>

<xsl:template match="cell[position()=1][starts-with(../@id,'FOLDER')]" priority="3">
  <!-- First column for FOLDER rows -->
  <td>
    <img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif">
      <xsl:call-template name="style">
        <xsl:with-param name="margin" select="(count(ancestor::row) - 1)*20" />
        <xsl:with-param name="display" select="''" />
       </xsl:call-template>
     </img>
  <xsl:value-of select="." />
  </td>  
</xsl:template>

<xsl:template match="cell[position()=1]" priority="2">
  <!-- First column for non-FOLDER rows -->
  <td>
     <div>
      <xsl:call-template name="style">
        <xsl:with-param name="margin" select="(count(ancestor::row) - 1)*20" />
       </xsl:call-template>
       <xsl:value-of select="." />
     </div>
  </td>  
</xsl:template>

<xsl:template match="cell" priority="1">
  <!-- Subsequent columns -->
  <td>
     <div>
      <xsl:call-template name="style">
        <xsl:with-param name="margin" select="20" />
       </xsl:call-template>
       <xsl:value-of select="." />
     </div>
  </td>  
</xsl:template>

</xsl:stylesheet> 
```

我需要通过添加嵌套文件夹的最后一个单元格来计算总和。FOLDER1 应该有 23+11+44 而不是 $23，FOLDER2 应该有 11+44 而 FOLDER3 只有 44，因为那里没有嵌套行。

预期的输出是：

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body>
    <table>
      <tbody>
        <tr>
          <th>1</th>
          <th>2</th>
          <th>3</th>
          <th>4</th>
          <th>5</th>
          <th>6</th>
          <th>7</th>
          <th>8</th>
        </tr>
        <tr>
          <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif" style="">Folder 1</td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">$78</div>
          </td>
        </tr>
        <tr>
          <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif" style="margin-left:20px;">Folder 2</td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">$55</div>
          </td>
        </tr>
        <tr>
          <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif" style="margin-left:40px;">Folder 3</td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">$44</div>
          </td>
        </tr>
        <tr>
          <td>
            <div style="margin-left:60px;display: inline;">Product 1</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">324234</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">3.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">No</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 33.33</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 33.33</div>
          </td>
        </tr>
        <tr>
          <td>
            <div style="margin-left:60px;display: inline;">Product 2</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">4354354</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">0.50</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">No</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 2.53</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 1.26</div>
          </td>
        </tr>
        <tr>
          <td>
            <div style="margin-left:40px;display: inline;">Product 3</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">435436</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">10.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Yes</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 0.36</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 3.60</div>
          </td>
        </tr>
        <tr>
          <td>
            <div style="margin-left:40px;display: inline;">Product 4</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">435435</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">3.28</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">No</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 17.38</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 17.38</div>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:49:24.580

将以下模板添加到您的样式表中，以便从当前 XML 输入中生成所需的结果。

```
<xsl:template match="cell[@sum]" priority="1.5">
    <td>
        <div>
            <xsl:call-template name="sum">
                <xsl:with-param name="currentRow" select=".." />
            </xsl:call-template>
        </div>
    </td>  
</xsl:template>

<xsl:template name="sum">
    <xsl:param name="currentRow" />
    <xsl:param name="sum" select="0"/>
    <xsl:choose>
        <xsl:when test="$currentRow//cell[@sum]">
            <xsl:call-template name="sum">
                <xsl:with-param name="currentRow" 
                                select="($currentRow//row[cell[@sum]])[1]" />
                <xsl:with-param name="sum" 
                                select="$sum+
                                        number(
                                          translate(
                                            $currentRow/cell[@sum], 
                                            '$',
                                            ''))"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:text>$</xsl:text>
            <xsl:value-of select="$sum"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:04:25.850

实现所需总和的一种方法是从您拥有的样式表开始并进行以下更改...

## 做这个...

1.  如果可能的话，从您的输入文档中去除“$”字符。XML 专注于数据和语义，而不是表现形式，因此最好省略表现形式的字符。但是，如果这不可能，请告诉我们。我可以制作一个替代解决方案，使用 $ 登录按原样使用输入文档，但它会更复杂。

2.  只需添加以下模板...

    ```
    <xsl:template match="cell[@sum]" priority="1.5">
      <!-- Summation columns -->
      <td>
         <div>
          <xsl:call-template name="style">
            <xsl:with-param name="margin" select="20" />
           </xsl:call-template>
           <xsl:value-of select="concat( '$', sum( ../descendant-or-self::row/cell[@sum]))" />
         </div>
      </td>  
    </xsl:template> 
    ```

## 注意事项

该解决方案依赖于以下假设。如果这些假设中的任何一个是错误的，请提出建议，我将相应地调整解决方案。

1.  准确地说，每个可求和行中的一个单元格具有属性 sum。这些包含要添加的值。
2.  可求和单元格的内容仅包含一个数字。它不包括任何演示字符，例如“$”

# c# - 难倒 MVC MEF 应用程序

> ID：13039011
> 
> 赞同：2
> 
> 时间：2012-10-23T20:50:15.460
> 
> 标签：c#, visual-studio, mef

我正在尝试将 Microsoft 可扩展性框架 (MEF) 实现到基于 MVC 的示例 Web 应用程序中。我在[MEF 概述](http://msdn.microsoft.com/en-us/library/dd460648%28v=vs.100%29.aspx#the_problem_of_extensibility)页面上使用 SimpleCalculator 示例解决方案。我的目标是一个可以从另一个项目动态加载 DLL 扩展以扩展模型功能的应用程序，本质上我希望 MVC 应用程序成为其他扩展插件的框架。首先我的设置：

项目 1（MVC 应用程序，MEF 组件主机）：

我将模型中的元素装饰如下：

```
using System.ComponentModel.Composition;
using System.ComponentModel.Composition.Hosting;

namespace ExpressionParserPOC.Models
{

    public class ExpressionModel
      {
            private CompositionContainer _container;

            [ImportMany]
            IEnumerable<Lazy<IExtensions,IExtensionName>> extensions { get; set; }

        public ExpressionModel()
        {
          var catalog = new AggregateCatalog();
          catalog.Catalogs.Add(new DirectoryCatalog("C:\\local_visual_studio\\ExpressionParserPOC\\ExpressionParserPOC\\Extensions"));

          //Create the CompositionContainer with the parts in the catalog
          _container = new CompositionContainer(catalog);
          _container.ComposeParts(_container);

          //TEST: Can we access the extensions?
          if (extensions != null)//<--NULL WHEN CONSTRUCTOR IS CALLED WHY? Expected GetMatrix() Function from DLL to be exposed
          {
            foreach (Lazy<IExtensions, IExtensionName> i in extensions)
            {
              Lazy<IExtensions, IExtensionName> foo = i;
            }
          }

        }

      }

  public interface IExtensions
  {
    double[][] GetMatrix(string matrix);
  }

  public interface IExtensionName
  {
    Char Symbol { get; }
  }

 } 
```

现在要测试，我只是从控制器调用模型的构造函数：

```
namespace ExpressionParserPOC.Controllers
{
  public class HomeController : Controller
  {
    public ActionResult Index()
    {
      ViewBag.Message = "Enter an Expression for Octave to evaluate";

      //Instantiate an ExpressionModel composed of extensible parts
      var model = new ExpressionModel();
      return View(model);
    }

  }
} 
```

项目 2（DLL 项目，MEF 组件）：

```
//PROJECT BUILD OUTPUTS TO THE EXTENSIONS DIRECTORY IN PROJECT 1 ABOVE
using System.ComponentModel.Composition;

namespace MyExtensions
{
  //Project 1 already added as a reference 
  [Export(typeof(ExpressionParserPOC.Models.IExtensions))]
  [ExportMetadata("Symbol", 'o')]
  public class Octave : MyExtensions.IExtensions
  {

      //Other class properties, constructors, functions, etc.

     #region FUNCTIONS
     public double[][] GetMatrix(string matrix) 
     {
         double[][] mat = new double[][];
         //Do Stuff
         return mat;
     }
     #endregion

  }

  public interface IExtensions : ExpressionParserPOC.Models.IExtensions
  {

  }

} 
```

问题是当我从同一个项目中的控制器调用模型构造函数时，主机 MVC 应用程序项目中的扩展列表永远不会被填充。我是 MEF 开发的新手，不确定我做错了什么，因为我正在使用 MVC 应用程序，所以我需要考虑一些额外的事情吗？为什么没有填写 Project 1 扩展列表？我的接口定义错了吗？示例计算器应用程序是一个简单的命令行项目，似乎工作正常，我看到的唯一区别是外部 DLL 项目位于同一解决方案空间中，而在我的示例中，解决方案空间是独立的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:29:45.710

`ExpressionModel`您在构造函数中有一个小错误。您正在编写容器本身:)

```
_container.ComposeParts(_container); 
```

问题应该立即显而易见，因为如果`ExpressionModel`实际发生了组合，即使没有发现扩展，该`extensions`属性也会被初始化为 0 个项目，但它不会是`null`.

您需要像这样组合当前模型实例：

```
_container.ComposeParts(this); 
```

其他一切似乎都很好，并且在此更正后应该可以正常工作。

# jquery - jQuery 仅用于 480px ViewPort（移动的内联标签）

> ID：13039014
> 
> 赞同：0
> 
> 时间：2012-10-23T20:50:19.167
> 
> 标签：jquery

我正在创建一个使用自适应 CSS 的登录屏幕，以便登录表单中的标签内联显示在 iPhone 上的字段上以节省空间。在其他分辨率下，标签显示在字段的左侧。

我找到了本教程，但我并不真正了解 jQuery。我需要操作教程中的代码，以便该技术仅适用于移动设备。

这是使用 jQuery 的内联标签的教程： [http ://www.zurb.com/playground/inline-form-labels](http://www.zurb.com/playground/inline-form-labels)

我已经掌握了 CSS 和自适应原则，只是我缺乏知识的 jQuery，所以具体的说明将帮助我跟上速度。

这是我只需要在检测到移动设备时触发的特定 jQuery：

```
$(document).ready(function(){
  $("label.inlined + input.input-text").each(function (type) {

    Event.observe(window, 'load', function () {
      setTimeout(function(){
        if (!input.value.empty()) {
          input.previous().addClassName('has-text');
        }
      }, 200);
    });

    $(this).focus(function () {
      $(this).prev("label.inlined").addClass("focus");
    });

    $(this).keypress(function () {
      $(this).prev("label.inlined").addClass("has-text").removeClass("focus");
    });

    $(this).blur(function () {
      if($(this).val() == "") {
        $(this).prev("label.inlined").removeClass("has-text").removeClass("focus");
      }
    });
  });
}); 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:52:37.230

你是第 404 页的。

您可以检查窗口宽度并根据它进行计算：

```
if($(window).width() <= 480) 
```

您也可以监视调整大小事件以检查窗口大小调整：

```
$(window).on('resize', function() { ... }); 
```

例如

```
$(window).on('resize', function() {
  if($(window).width() <= 480) {
    $("label.inlined + input.input-text").each(function (type) {

      Event.observe(window, 'load', function () {
        setTimeout(function(){
          if (!input.value.empty()) {
            input.previous().addClassName('has-text');
          }
        }, 200);
      });

      $(this).focus(function () {
        $(this).prev("label.inlined").addClass("focus");
      });

      $(this).keypress(function () {
        $(this).prev("label.inlined").addClass("has-text").removeClass("focus");
      });

      $(this).blur(function () {
        if($(this).val() == "") {
          $(this).prev("label.inlined").removeClass("has-text").removeClass("focus");
        }
      });
    });
  }
}).resize(); 
```

# android - 如何为列表项和列表项中的按钮设置 onClickListener？

> ID：13039015
> 
> 赞同：1
> 
> 时间：2012-10-23T20:50:20.170
> 
> 标签：android, listview, button

我有一个 listView ，其中每个列表项都有一个按钮。我想为列表项和按钮设置一个 onClickListener - 我担心只能做一个或另一个..

这是我的适配器代码：

```
private class MyListAdapter extends ResourceCursorAdapter { 

    // In your ListActivity class, create a new inner class that extends ResourceCursorAdapter. 
    //This inner class is the custom CursorAdapter we will use to manage how data is bound to a list item:

    public MyListAdapter(Context context, Cursor cursor) { 
        super(context, R.layout.row_location, cursor);
    } 

    @Override
    public void bindView(View view, Context context, Cursor cursor) { 
        TextView text_first_line = (TextView) view.findViewById(R.id.location_row_item_main_text);
        TextView text_second_line = (TextView) view.findViewById(R.id.location_row_item_secondary_text);
        ImageView flagIcon = (ImageView) view.findViewById(R.id.flagIcon);

        String row_text_component = cursor.getString(cursor.getColumnIndex(RMDbAdapter.COMPONENT));
        String row_text_position = ", Position " + cursor.getString(cursor.getColumnIndex(RMDbAdapter.POSITION));
        if(row_text_position.equals(", Position Not Applicable")){
            row_text_position = "";
        }
        String row_text_action = " - " + cursor.getString(cursor.getColumnIndex(RMDbAdapter.ACTION_REQUIRED));

        text_first_line.setText(row_text_component + row_text_position + row_text_action);
        text_second_line.setText("test text, test text");

        String risk = cursor.getString(cursor.getColumnIndex(RMDbAdapter.RISK));
        if (risk.equals("Red Risk")){
            flagIcon.setImageResource(R.drawable.red_flag);
        }
        else if (risk.equals("Green Risk")){
            flagIcon.setImageResource(R.drawable.green_flag);
        }
        else if (risk.equals("No Risk")){
            flagIcon.setImageResource(R.drawable.note);
        }

    }
} 
```

在以前，更简单的活动中，我为列表项设置了 onListItemClick，但是如何为按钮设置侦听器？

非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:55:20.273

ListView 行中可以有多个侦听器。只需像往常一样设置一个 OnClickListener ：

```
button.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View view) {
        // Do something
    }
}); 
```

仅当您触摸相关按钮时，这才会取代 OnListItemClick 侦听器。

另请观看 Android 的 Romain Guy[讨论适配器和效率](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)。

# c++ - Code::Blocks 中的 C++ 非类成员编译错误？

> ID：13039018
> 
> 赞同：1
> 
> 时间：2012-10-23T20:50:28.937
> 
> 标签：c++, roguelike

我正在尝试按照[此处](http://www.kathekonta.com/rlguide/article1.html)找到的教程来学习编程 roguelike 游戏背后的基本思想。我正在使用 Code::Blocks 10.05 从我的 USB 运行便携式并使用 MinGW 进行编译。Console.h 也来自我上面链接的网站。

当我试图设置这个类以确保一切正常时，我遇到了障碍：

```
#include <conio.h>
#include "Console.h"

int main( void )
{
    console.Clear();
    return 0;
} 
```

当我尝试使用时，出现以下错误：

> 错误：在“控制台”中请求成员“清除”，它是非类类型“Win32Console()”|

任何帮助表示赞赏，谢谢！

**编辑**

在迅速为自己毁掉它们之后，我重新安装了 MinGW 和 Code::Blocks，现在又出现错误：

> 未定义对 `Win32Console::Win32Console() 的引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:07:54.217

在添加头文件之前，粘贴这一行：`#define _WIN32`. _WIN32 可能没有定义？

# jquery - 数据表：右上角的位置搜索框

> ID：13039021
> 
> 赞同：7
> 
> 时间：2012-10-23T20:50:36.653
> 
> 标签：jquery, css, jquery-ui, jquery-plugins, datatables

如何将搜索框放在右侧？默认情况下它现在在左边

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T20:56:04.767

[这是一个搜索框向右对齐的示例](http://datatables.net/release-datatables/examples/basic_init/table_sorting.html)。

看起来他们使用这种 CSS 样式：

```
.dataTables_filter {
   width: 50%;
   float: right;
   text-align: right;
} 
```

据我所知，这是默认设置，这意味着您可能正在做一些覆盖它的事情。您能否发布一个字段未正确对齐的示例，以便我们看一下？

# c# - ASP.NET 缓存管理

> ID：13039022
> 
> 赞同：1
> 
> 时间：2012-10-23T20:50:37.580
> 
> 标签：c#, asp.net, caching

我有三个应用程序在三个独立的应用程序池中运行。其中一个应用程序是很少有人有权访问的管理应用程序。管理应用程序允许的功能之一是创建停机通知。因此，当用户进入管理应用程序并创建停机通知时，其他两个应用程序应该会收到新通知并将其显示在登录页面上。

问题是这些通知被缓存并且每个应用程序都在一个单独的应用程序池中，管理应用程序没有任何方法来清除其他两个应用程序中的停机通知缓存。

我正在想办法解决这个问题。我唯一能想到的就是在数据库中插入一条记录，表示需要清除缓存，其他两个应用程序将在加载登录页面时检查数据库。有没有人有另一种可能更清洁的方法？

*旁注，这比停机通知更普遍，但我只是以此为例。

**编辑**

重新启动应用程序池是不可行的，因为它很可能会杀死后台线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:56:07.870

如果我理解正确，您基本上是在尝试从管理应用程序向其他应用程序发送消息。也许您应该考虑在这些可以从管理应用程序调用的应用程序上创建 WCF 服务。这是在不同应用程序之间进行通信的标准方式，如果您不想使用例如共享媒体这样的数据库并且它不会强制您使用轮询模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:00:36.747

另一种看待这个问题的方法是，这基本上是一个应用程序间消息传递问题，已经有许多库可以帮助您解决它。 为此，我想到了[RabbitMQ 。](http://www.rabbitmq.com/)它有一个准备就绪的 C# 客户端。 [MSMQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)是另一种潜在的技术，并且已经随 Windows 提供 - 您只需要安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T20:57:51.863

如果您正在缓存的是数据库信息，您可能会在设置和[SqlCacheDependency](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx)时试试运气。

否则，我建议不要使用 ASP.NET 缓存，而是找到使用分布式缓存方案的 3rd 方解决方案，这样所有应用程序都使用一个缓存，而不是 3 个单独的缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T21:05:13.690

我并不是说这是最好的答案，甚至不是正确的答案，这正是我所做的。

我在独立的服务器和数据中心上有一系列电子商务网站，这些网站依赖于从中央后台网站位置提取目录数据，然后在本地缓存它们。在我的第一次迭代中，我简单地使用了 GET 请求，中央位置可以 ping 相应的消费网站来启动它自己的缓存刷新例程。我在每个电子商务服务器上都使用了 SSL，因为我已经进行了该设置，然后可以让后台 Web 应用程序通过 SSL GET 发送凭据以安全地启动刷新。

在稍后阶段，我们发现在后台使用套接字会更有效，在后台，每个消费网站都将成为客户端并监听数据的变化。然后，后台网站可以在特定帐户更改时与其相应的网站进行通信，然后非常具体地进行通信。这种方法更加细化，我们可以根据需要进行少量更新，而不是大块的更新，但这肯定比我们的第一次尝试更复杂。

# c - 文件中的单词计数，如 C 中的 linux wc 命令

> ID：13039023
> 
> 赞同：1
> 
> 时间：2012-10-23T20:50:37.503
> 
> 标签：c, count, word, wc

我正在尝试编写类似于 Linux 命令 wc 的东西来计算任何类型文件中的单词、新行和字节数，而我只能使用 C 函数读取。我已经编写了这段代码，并且我得到了换行符和字节的正确值，但我没有得到计数字的正确值。

```
int bytes = 0;
int words = 0;
int newLine = 0;
char buffer[1];
int file = open(myfile,O_RDONLY);
if(file == -1){
  printf("can not find :%s\n",myfile);
}
else{
  char last = 'c'; 
  while(read(file,buffer,1)==1){
    bytes++;
    if(buffer[0]==' ' && last!=' ' && last!='\n'){
      words++;
    }
    else if(buffer[0]=='\n'){
      newLine++;
      if(last!=' ' && last!='\n'){
        words++;
      }
    }
    last = buffer[0];
  }        
  printf("%d %d %d %s\n",newLine,words,bytes,myfile);        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:53:06.207

使用`isspace(char ch)`函数检查空格。

```
int isInWord = 0;/*false*/
while(read(file,buffer,1)==1){
    bytes++ ;
    if(!isspace(buffer[0])){
         isInWord = 1;/*true*/
         continue;
    }else{
      if(buffer[0] == '\n'){
        newLine++;
      }else{
        if(isInWord)
         words++;
      }
      isInWord = 0;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:11:47.403

你应该颠倒你的逻辑。与其寻找空格并增加字数，不如寻找非空格来增加字数。此外，它可以帮助使用状态变量而不是查看最后一个字符：

```
int main(void)
{
   const char *myfile = "test.txt";
   int bytes = 0;
   int words = 0;
   int newLine = 0;
   char buffer[1];
   int file = open(myfile,O_RDONLY);
   enum states { WHITESPACE, WORD };
   int state = WHITESPACE;
   if(file == -1){
      printf("can not find :%s\n",myfile);
   }
   else{
      char last = ' '; 
      while (read(file,buffer,1) ==1 )
      {
         bytes++;
         if ( buffer[0]== ' ' || buffer[0] == '\t'  )
         {
            state = WHITESPACE;
         }
         else if (buffer[0]=='\n')
         {
            newLine++;
            state = WHITESPACE;
         }
         else 
         {
            if ( state == WHITESPACE )
            {
               words++;
            }
            state = WORD;
         }
         last = buffer[0];
      }        
      printf("%d %d %d %s\n",newLine,words,bytes,myfile);        
   } 

} 
```

看起来 wc 有一些关于标点字符不是单词的逻辑，该代码无法处理。

# iis-7 - 在 Windows Server 2008 R2 上的 IIS 7 中找不到经典 ASP 起始页 (404)

> ID：13039024
> 
> 赞同：2
> 
> 时间：2012-10-23T20:50:41.497
> 
> 标签：iis-7, asp-classic

我的站点/应用程序指向一个名为“站点”的文件夹，并设置了所有权限。

*   在该文件夹中驻留“home.asp”。
*   默认文件是“home.asp”。

当我转到域时，我得到一个“找不到页面”。

如果我在 IIS 中捕获该 404 错误并告诉它重定向到“home.asp”，那么一切正常。问题是我不想将所有 404 重定向到 home.asp。我希望网站默认为 home.asp 并找到它。

*   任何想法为什么会发生这种情况？
*   我是否需要对 .Net 方面做一些事情来告诉它默认使用 .ASP 方面？
*   我是否需要创建一个重定向到我的“home.asp”的 .aspx 默认页面？如果是这样，我该如何命名该页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:35:26.127

正如 Diodeus 所指出的，您不应尝试使用重定向的自定义 404 错误页面重定向到默认页面，而应确保将“home.asp”添加到 IIS 中的默认文档列表中。

因此，这是一个 IIS 配置问题。

例如，要在 IIS 6.0 中设置默认文档，这将是：

1.  在 IIS 管理器中，双击本地计算机，右键单击单个网站文件夹，然后单击属性。
2.  单击文档选项卡。

3.  选中启用默认内容页面复选框。

4.  单击添加以将新的默认文档添加到列表中。（对你来说，这将是你的*“home.asp”*）

5.  可选：单击要从列表中删除的文档，然后单击删除。

6.  单击列表中的文档并单击上移或下移以更改默认文档提供给客户端请求的顺序。

7.  单击确定。

（来自[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/dc6eb1b4-9028-4308-9935-52b64edfad36.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/dc6eb1b4-9028-4308-9935-52b64edfad36.mspx?mfr=true)）

# xamarin.android - 在 Mono 升级后转换为 Applicaiton 类时出现 InvalidCastException

> ID：13039027
> 
> 赞同：1
> 
> 时间：2012-10-23T20:51:05.117
> 
> 标签：xamarin.android, monodevelop

在几个月没有看它之后，我刚刚在 MonoDevelop 中启动了我的项目。当然，Mono、MonoDevelop 和 Mono for Android 也有新版本。

一旦我运行该应用程序，我就会`InvalidCastException`在我的一项活动中向我的`Application`班级投射：

> 错误：System.InvalidCastException：无法从源类型转换为目标类型。

线路来自

```
ConferenceApplication conferenceApplication = ((ConferenceApplication)base.Application); 
```

当我打印`base.Application.Class`它报告`mono.android.app.Application`而不是我自己的应用程序类时。我的应用程序类用`[Application]`和 extends表示`Android.App.Application`。

我非常有信心自上次运行以来该应用程序没有更改。这个问题的原因可能是什么？我该如何解决？

我正在使用 Beta 频道进行更新。

```
MonoDevelop 3.0.4.7
Mono 2.10.9
Mono for Android: 4.2.8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:00:51.360

我降级到最新的 Mono for Android 稳定版 - **4.2.6** - 这一切都神奇地起作用了。

# c++ - 如何实例化派生类的数组

> ID：13039030
> 
> 赞同：1
> 
> 时间：2012-10-23T20:51:11.520
> 
> 标签：c++

我正在尝试在另一个类中设置一组基类和派生类。例如，我有基类：

```
class Base{
public:
    Base() {};
    Base(float kv) : param(kv) {}
    ~Base() {};
    float getParam() { return param; }
    void setParam(bool kv) { param= kv; }
protected:
    float param;
}; 
```

和派生类，如：

```
class Derived1: public Base{
public:
    Derived1() {};
    Derived1(float kv) : Base(kv) {}
    ~Derived1() {};
}; 
```

现在，在另一个类中，我有一个 Base 类型的数组。

```
class Hive{
public:
    Hive() {};
    Hive(...) : ... {}
    ~Hive() {};
    ...
    float getSomethingFromArray();

    ...
    void setB();
protected:
    ...
    Base *b[7];
}; 
```

现在，`setB()`实例化数组，例如：

```
b[0] = new Derived1(); 
```

但是当我尝试访问 b[0] 的方法时它不起作用。当我调用方法时：

```
b[0].setParam(i); 
```

编译器报告此错误

> IntelliSense：表达式必须具有类类型 c:\users\miller\documents\visual studio 2010\projects\hello\hello\objekat.h 139 2 hello

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:04:16.617

> 但是当我尝试访问 b[0] 的方法时它不起作用。任何想法为什么？

`b[0]`是一个`Base*`。编译器不知道它指向的对象的实际类型是`Base`,`Derived1`还是`Derived42`，这就是为什么它只会让你调用`Base`它上面的方法 - 因为它们是唯一可以保证存在的方法。

我猜你正试图从中调用方法`Derived1`：

```
b[0] = new Derived1();
//...
b[0]->getSomethingFromArray(); 
```

但请注意，您的代码可以很容易地替换为：

```
b[0] = new Base();
//...
b[0]->getSomethingFromArray(); 
```

现在怎么办？要使其工作，您可以使用强制转换并强制转换`b[0]`为您需要的类型（前提是您确定）。如果您的类是多态的，您可以使用`dynamic_cast`，它还会检查以确保您转换为正确的类型（研究这个）。

或者，您可以简单地利用多态性（只有在您的特定情况下才有意义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:14:18.043

您的错误很简单，要通过指针调用方法，您必须使用`->`operator - 而不是 dot `.`：

不是这样：

```
b[0].setParam(i); 
```

但是通过这种方式：

```
b[0]->setParam(i); 
```

# c# - Exchange 托管 API 的自动发现问题

> ID：13039031
> 
> 赞同：3
> 
> 时间：2012-10-23T20:51:21.527
> 
> 标签：c#, exchange-server

我正在使用 C# 中的 Exchange Managed API 访问 Exchange 2010。我在使用 Autodiscoverurl 函数时遇到问题。我尝试了多种不同的方法，但出现了各种不同的错误：

代码：

```
var service = new ExchangeService(ExchangeVersion.Exchange2010);
service.Autodiscoverurl("email@domain.com", delegate { return true; }); 
```

错误：

> 找不到自动发现服务。

代码：

```
var service = new ExchangeService(ExchangeVersion.Exchange2010);
service.Autodiscoverurl("email@domain.com"); 
```

错误：

> 自动发现阻止了对 https:// servername /autodiscover/autodiscover.xml 的潜在不安全重定向。要允许自动发现遵循重定向，请使用 AutodiscoverUlr(string, AutodiscoverRedirectionUrlValidationCallback) 重载。

代码：

```
var service = new ExchangeService(ExchangeVersion.Exchange2010);
service.Url = new Uri("https://servername/EWS/Exchange.asmx"); 
```

错误：

> 请求失败。远程服务器返回错误：(401) Unauthorized。

我尝试了各种提供凭据的方法，结果都与上述相同。

```
service.UseDefaultCredentials = true;
service.Credentials = CredentialCache.DefaultNetworkCredentials;
etc. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-25T21:18:52.523

据我了解，自动发现 xml 需要凭据，如果 Basic 不起作用，NTLM 通常更可靠。

# c++ - QComboBox 在“currentIndexChanged(int)”发出时获取变量

> ID：13039039
> 
> 赞同：0
> 
> 时间：2012-10-23T20:51:51.017
> 
> 标签：c++, qt

我很难找到关于这个或一个例子的文档。

有人可以具体告诉我如何访问 QComboBox 中当前选定索引的 QVariant

```
 QComboBox * combo = new QComboBox();
 combo->addItem("Bla1", QVariant(1));
 combo->addItem("Bla2", QVariant(2));
 combo->addItem("Bla3", QVariant(3));
 combo->addItem("Bla4", QVariant(4));
 connect(combo, SIGNAL(currentIndexChanged(int)), this, slot(HANDLEITMAN(int)) 
```

当然还有其他来源

```
 void TheCooler::HANDLEITMAN(int index)
 {
      //What do I do with index?
      //sender()?
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:03:38.667

首先，创建`combo`的成员`TheCooler`，或以其他方式放入`HANDLEITMAN`具有成员的类中`combo`。除非它以`TheCooler::HANDLEITMAN`某种方式可用，否则您无法获取数据，这是执行此操作的合乎逻辑的方式。那么它只是

```
 void TheCooler::HANDLEITMAN(int index)
 {
      QVariant data = combo->itemData(index);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:07:06.487

如果您不想让 combo 成为 class 的成员，则`TheCooler`可以使用`sender()`返回指向`QObject`发送触发信号的指针的函数（在本例中为`currentIndexChanged(int)`）。

```
void TheCooler::HANDLEITMAN(int index)
{
    QComboBox * combo = qobject_cast< QComboBox * >(sender());
    if (combo == 0)
        return; // something wrong happened

    QVariant data = combo->itemData(index);
} 
```

如果`combo`为 null，那么您可能尝试自己调用插槽，或者您已将其与非`QComboBox`.

# html - 将下拉菜单更改为 Radio 类型的表单？

> ID：13039040
> 
> 赞同：0
> 
> 时间：2012-10-23T20:51:58.577
> 
> 标签：html, forms

我最近制作了一个下拉式表单，用户可以选择其中一个列出的项目并点击“添加到购物车”，将它们带到另一个页面。

是否可以将其更改为 Radio 类型的表单，他们可以在其中选择他们想要的并点击“添加到购物车”而不是下拉类型？我几乎浏览了 Google 上的每一页，所有 Radio Type 帮助部分基本上只是将信息记录在一个文件中。我不需要任何写入文件的内容，只需在用户选择一个选项并点击“添加到购物车：

我当前的下拉菜单形式是：

```
<form> 
   <p align="center"><b>Select a Payment:</b> 
      <select id="setit" style="color: #000" size="1" name="test" onchange="displayValue();"> 
         <option value="/">Select one</option>     
         <option value="/">1 Month: $4.99</option>    
         <option value="/">3 Months: $14.99</option>      
         <option value="/">6 Months: $29.99</option>
      </select> 
      <br /> 
      <div id="displayValue"></div>
      <br />
      <center><input type="button" value="Add to Cart" onclick="window.open(setit.options[setit.selectedIndex].value)"></center>
   </p>
</form> 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:57:25.097

是的你可以。尝试这个：

HTML

```
 <form>
    <p align="center">
        <b>Select a Payment:</b>
        <input type="radio" id="setit1" name="setit" value="1" /><label for="setit1">1 Month: $4.99</label>
        <input type="radio" id="setit2" name="setit" value="3" /><label for="setit2">3 Months: $14.99</label>
        <input type="radio" id="setit3" name="setit" value="6" /><label for="setit3">6 Months: $29.99</label>
        <br />
        <div id="displayValue"></div>
        <br />
        <center><input type="button" id="button-add-to-cart" value="Add to Cart"></center>
    </p>
</form> 
```

JS

```
var app = {

    payments: {

        option1: "1 Month: $4.99",
        option3: "3 Months: $14.99",
        option6: "6 Months: $29.99"

    },

    init: function () {

        var button = document.getElementById( 'button-add-to-cart' ),
            radios = document.forms[0].setit,
            i = 0;

        // This handles the button click
        button.onclick = function ( e ) {

            var selected = app.getCheckedRadio( document.forms[0].setit );

            if ( selected ) {
                window.open( '//someurl.com?val=' + selected.value ); // Open window
                return false;
            }

            alert( "No payment selected." ); // Else notify user
        };       

        // This handles the selection change
        for ( ; i < radios.length; i++ ) {
            radios[ i ].onclick = app.radioChange;
        }

    },

    getCheckedRadio: function ( radio_group ) {

        for ( var i = 0; i < radio_group.length; i++ ) {

            var button = radio_group[ i ];

            if ( button.checked ) {
                return button;
            }
        }

        return undefined;
    },

    radioChange: function ( e ) {

        var display = document.getElementById( 'displayValue' ),
            radio = app.getCheckedRadio( document.forms[0].setit ),
            value = radio.value;

        display.innerHTML = app.payments[ "option" + value ];
    }

};

window.load = app.init(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T21:31:28.993

尝试这个：

```
<form name="form1"> 
    <p align="center">
    <b>Select a Payment:</b>
    <input type="radio" name="setit" value="1" /><label for="setit1">1 Month: $4.99</label>
    <input type="radio" name="setit" value="2" /><label for="setit2">3 Months: $14.99</label>
    <input type="radio" name="setit" value="3" /><label for="setit3">6 Months: $29.99</label>
    <br /> 
    <div id="displayValue"></div>
    <br />
    <center><input type="button" value="Add to Cart" onclick="window.open(GetRadioValue())"></center>
    </p>
</form> 
```

您需要一个 js 函数来获取选中的收音机的值：

```
<script type="text/javascript">
    function GetRadioValue() {
        len = document.form1.setit.length;
        for (i = 0; i <len; i++) {
            if (document.form1.setit[i].checked) {
                return document.form1.setit[i].value;
            }
        }
    }
</script> 
```

# qt - 文件更改句柄，QSocketNotifier 由于无效套接字而禁用

> ID：13039041
> 
> 赞同：4
> 
> 时间：2012-10-23T20:52:04.880
> 
> 标签：qt, sockets, io, qfile

我正在开发触摸屏，需要检测触摸事件才能重新打开屏幕。我正在使用 Qt 和套接字并且遇到了一个有趣的问题。

每当我的 QSocketNotifier 检测到事件时，它都会向我发送关于它的无限通知。因此，我需要关闭并打开事件文件以循环通知程序（以下代码中的 inputNotifier）。问题通常在设备运行几分钟后出现，文件 (inputDevice) 突然将其句柄从 24 更改为其他值（通常为 17）。

我不确定该怎么做，因为初始连接语句链接到初始通知程序指针。如果我使用新句柄创建新通知程序，则连接无效。据我所知，没有选项可以在正在运行的 QSocketNotifier 上设置新的套接字值。建议？相关代码如下：

```
#include "backlightcontroller.h"
#include <QTimer>
#include <QFile>
#include <syslog.h>
#include <QDebug>
#include <QSocketNotifier>

BacklightController::BacklightController(QObject *parent) :
    QObject(parent)
{
    backlightActive = true;

    // setup timer
    trigger = new QTimer;
    trigger->setSingleShot(false);
    connect(trigger, SIGNAL(timeout()), SLOT(deactivateBacklight()));

    idleTimer = new QTimer;
    idleTimer->setInterval(IDLE_TIME * 1000);
    idleTimer->setSingleShot(false);
    connect(idleTimer, SIGNAL(timeout()), SIGNAL(idled()));
    idleTimer->start();

    // setup socket notifier
    inputDevice = new QFile(USERINPUT_DEVICE);
    if (!inputDevice->open(QIODevice::ReadOnly))
    {
        syslog (LOG_ERR, "Input file for Backlight controller could not been opened.");
    }
    else
    {
        inputNotifier = new QSocketNotifier(inputDevice->handle(), QSocketNotifier::Read);
        inputNotifier->setEnabled(true);
        connect(inputNotifier, SIGNAL(activated(int)), SLOT(activateBacklight()));
    }

    qDebug()<<"backlight socket: "<<inputNotifier->socket();

    // read out settings-file
    QString intensity = Global::system_settings->getValue("BelatronUS_backlight_intensity");
    if (intensity.length() == 0) intensity = "100";
    QString duration = Global::system_settings->getValue("BelatronUS_backlight_duration");
    if (duration.length() == 0) duration = "180";
    QString always_on = Global::system_settings->getValue("BelatronUS_backlight_always_on");
    if (always_on.length() == 0) always_on = "0";

    setIntensity(intensity.toInt());
    setDuration(duration.toInt());

    if (always_on == "0")
      setAlwaysOn(false);
    else
      setAlwaysOn(true);
}

BacklightController::~BacklightController()
{
    trigger->stop();
    inputNotifier->setEnabled(false);
    inputDevice->close();

    delete trigger;
    delete inputDevice;
    delete inputNotifier;
}

void BacklightController::setCurrentIntensity(int intensity)
{
    // adapt backlight intensity
    QFile backlightFile("/sys/class/backlight/atmel-pwm-bl/brightness");
    if (!backlightFile.open(QIODevice::WriteOnly))
    {
      syslog (LOG_ERR, "Backlight intensity file could not been opened.");
    }
    else
    {
      QString intensityString = QString::number(TO_BRIGHTNESS(intensity));
      if (backlightFile.write(
              qPrintable(intensityString), intensityString.length()
              ) < intensityString.length())
      {
        syslog (LOG_ERR, "Backlight intensity could not been changed.");
      }
      backlightFile.close();
    }
}

void BacklightController::resetNotifier()
{

    inputDevice->close();
    if (!inputDevice->open(QIODevice::ReadOnly))
    {
        syslog (LOG_ERR, "BacklightController::%s: Input file could not been opened.", __FUNCTION__);
    }
    qDebug()<<"reset, handle: "<<inputDevice->handle();
    //inputNotifier=QSocketNotifier(inputDevice->handle(), QSocketNotifier::Read);

    // restart timer after user input
    idleTimer->start();
}

void BacklightController::activateBacklight()
{
    // only activate backlight, if it's off (avoid to useless fileaccess)
    if (!backlightActive)
    {
        setCurrentIntensity(_intensity);
        backlightActive = true;
        emit backlightActivated();
    }

    // restart backlight timeout, but only if we don't want the backlight to shine all the time
    if (!_alwaysOn)
        trigger->start();

    // reset notifier to be able to catch the next userinput
    resetNotifier();
}

void BacklightController::deactivateBacklight()
{
    // don't turn it off, if it's forced on
    if (!_alwaysOn)
    {
        if (backlightActive)
        {
            // only deactivate backlight, if it's on (avoid to useless fileaccess)
            setCurrentIntensity(BACKLIGHT_INTENSITY_OFF);
            backlightActive = false;
            emit backlightDeactivated();
        }
    }
    qDebug()<<"trigger stopping";
    trigger->stop();
}

void BacklightController::setIntensity(int intensity)
{
    if (intensity > 100)
        intensity = 100;
    else if (intensity < 0)
        intensity = 0;

    _intensity = intensity;

    // write new intensity to file if it's active at the moment
    if (backlightActive)
    {
        setCurrentIntensity(_intensity);
        trigger->start();
    }
}

void BacklightController::setDuration(int duration)
{
    if (duration < 1)
        duration = 1;

    _duration = duration;
    trigger->setInterval(_duration * MS_IN_SEC);

    // reset trigger after changing duration
    if (backlightActive)
    {
        trigger->start();
    }
}

void BacklightController::setAlwaysOn(bool always_on)
{
    _alwaysOn = always_on;

    // tell the timer what to to now
    if (_alwaysOn)
    {
        this->activateBacklight();
        trigger->stop();
    }
    else
    {
        trigger->start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:19:37.083

我现在似乎找到了一个可行的解决方案。这不是最好的，所以如果有更好的解决方案，我会很想听听。我之前没有想到这一点的原因是因为我认为如果我在函数中有一个新的 connect 语句，它会在函数结束时限制范围。

解决方案是简单地检查文件中是否发生了句柄更改，然后使用该句柄为通知程序创建一个新指针。然后重新启用通知程序，因为它现在可能已被禁用，然后为指针创建一个新的连接语句。这是我使用的代码，在事件文件的关闭和重新打开下方添加：

```
if(inputDevice->handle()!=inputNotifier->socket()){
    inputNotifier = new QSocketNotifier(inputDevice->handle(), QSocketNotifier::Read);
    inputNotifier->setEnabled(true);
    connect(inputNotifier, SIGNAL(activated(int)), SLOT(activateBacklight()));
} 
```

# html - 在水平对齐 Twitter 和 Facebook 按钮时遇到问题，并且没有获得 Twitter 计数。

> ID：13039042
> 
> 赞同：3
> 
> 时间：2012-10-23T20:52:05.643
> 
> 标签：html

我需要帮助，我正在使用以下代码在网页上插入 Twitter 和 Facebook 按钮。我是HTML**新手；**我似乎无法将按钮向右和水平对齐。我正在使用 shoppingcartplus 作为该网站的主机。我已经从 twitter 和 facebook 网站生成了代码。

此外，当我发推文时，计数器不会增加。

```
<!-- ======> (Start of Facebook button code after  body tag, no body tag in code)  -->
<div id="fb-root">
    &nbsp;</div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- ======> (End of Facebook button code after  body tag, no body tag in code)  -->

<!-- ======> (Start of twitter button code)  -->
<p align=right>
<p> <a class="twitter-share-button" data-url="http://www.afrikongo.com" href="https://twitter.com/share">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</p>

<!-- ======> (End of twitter button code)  -->

<!-- ======> (Start of Facebook button code button placement on site)  -->

<p align=right> <div class="fb-like" data-font="arial" data-    href="http://www.afrikongo.com" data-layout="button_count" data-send="true" data-show-faces="true" data-width="450">
    &nbsp; </div>
</p>
<!-- ======> (End of Facebook button code button placement on site)  --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:52:48.800

[http://jsfiddle.net/roctimo/GEyXf/1/](http://jsfiddle.net/roctimo/GEyXf/1/)

我所做的只是确保两个共享按钮都包含在 div 中，将它们放在一个容器中，并在容器中设置 div 的样式，使它们彼此相邻浮动，并留有一些间距。

CSS：

```
.share_buttons > div {
    float:right;   
    margin:0 0 0 20px;    
} 
```

的HTML：

```
<div class="share_buttons">
    <div>
        <a class="twitter-share-button" data-url="http://www.afrikongo.com" href="https://twitter.com/share">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>

    <div class="fb-like" data-font="arial" data-href="http://www.afrikongo.com" data-layout="button_count" data-send="true" data-show-faces="true" data-width="450">
        &nbsp; 
    </div>
</div> 
```

# c - 如何将无符号 64 位值存储在两个有符号整数中并恢复它们？

> ID：13039055
> 
> 赞同：2
> 
> 时间：2012-10-23T20:52:48.707
> 
> 标签：c, bit-manipulation, bitwise-operators

如果我有一个`uint64_t original`和两个常规的四字节整数（有符号），我想将值存储在两个整数中并稍后恢复无符号的 64 字节。这应该是可能的，因为我们在这两种情况下都有 64 位可用。我在想一些事情：

```
uint64_t test = 1350640807215539000;
int a = test >> 32; //get top 32 bits
int b = test & 0x00000000FFFFFFFF; //keep bottom 32 bits

uint64_t recover_test = ((a << 32) & b); 
```

但这并没有让我回到测试的原始价值……我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T21:11:03.747

而不是做很多容易出错的位旋转，你可以只使用一个联合：

```
union
{
    uint64_t u64;
    int32_t s32[2];
} u;

u.u64 = 1350640807215539000ULL;

printf("a = %d\n", u.s32[0]);
printf("b = %d\n", u.s32[1]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:00:38.947

这对我有用：

```
uint64_t test = 1350640807215539000;
int32_t a = test >> 32; //get top 32 bits
int32_t b = test & 0xffffffff; //keep bottom 32 bits
uint64_t recover_test = (((uint64_t)(uint32_t)a << 32) | (uint32_t)b); 
```

请注意，您犯了`a`在“恢复”时不进行转换的错误 - 您需要这样做，否则移动 32 将使值全部“下降”到左侧，因为它不够大。另外，您是 AND-ing 而不是 OR-ing 这两个部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:58:36.843

像这样：

```
uint64_t recover_test = ((((uint64_t)a) << 32) | (uint32_t)b); 
```

您需要告诉编译器首先将 a 提升为 64 位数字 - 然后进行移位。否则，它会在 32 位值内移动 - 转储高位。

@编辑：哇。所以如果 b 是有符号的，| 具有带符号的 32 位值将在转换为 64 位后将带符号位从 b 的顶部提升到 a 的顶部。所以你需要在 | 之前先将 b 强制转换为无符号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T01:37:37.743

您可能无法以完全可移植的方式执行此操作。

原因是 N 位有符号整数可能仅足以表示 2 ^N -1 个不同的值。

如果有符号整数在符号和大小或 1 的补码表示中，情况尤其如此。这些表示在 0 附近是对称的。

甚至 2 的补码表示也可能在 0 附近对称，并且仅允许从 -(2 ^(N-1) -1) 到 2 ^(N-1 -1 的 2) ^N -1 个不同值（就像在上述情况下一样），而不是允许 2 ^N从 -2 ^(N-1)到 2 ^(N-1) -1 的不同值。

此外，根据 C 标准，联合技巧和将 N 位无符号整数强制推入 N 位有符号整数确实或可能导致未定义的行为。你想避免这种情况。

您可以执行以下操作，但在某些平台上可能会失败：

```
#include <limits.h>

#if UINT_MAX >= 0xFFFFFFFF
typedef unsigned uint32;
#define UINT32_MIN UINT_MIN
#define UINT32_MAX UINT_MAX
typedef int int32;
#define INT32_MIN INT_MIN
#define INT32_MAX INT_MAX
#else
typedef unsigned long uint32;
#define UINT32_MIN ULONG_MIN
#define UINT32_MAX ULONG_MAX
typedef long int32;
#define INT32_MIN LONG_MIN
#define INT32_MAX LONG_MAX
#endif

typedef unsigned long long uint64;
#define UINT64_MAX ULLONG_MAX

#ifndef C_ASSERT
#define C_ASSERT(expr) extern char CAssertExtern[(expr)?1:-1]
#endif

// Make sure uint32 is 32 bits exactly without padding bits:
C_ASSERT(sizeof(uint32) * CHAR_BIT == 32 && UINT32_MAX == 0xFFFFFFFF);

// Make sure int32 is 32 bits exactly without padding bits and is 2's complement:
C_ASSERT(sizeof(int32) * CHAR_BIT == 32 &&
         INT32_MAX == 0x7FFFFFFF && (uint32)INT32_MIN == 0x80000000);

// Make sure uint64 is 64 bits exactly without padding bits:
C_ASSERT(sizeof(uint64) * CHAR_BIT == 64 && UINT64_MAX == 0xFFFFFFFFFFFFFFFFULL);

void splitUint64IntoInt32s(uint64 x, int32* ph, int32* pl)
{
  uint32 h = (uint32)(x >> 32);
  uint32 l = (uint32)x;
  if (h <= INT32_MAX)
    *ph = h;
  else
    *ph = (int)(h - INT32_MAX - 1) - INT32_MAX - 1;
  if (l <= INT32_MAX)
    *pl = l;
  else
    *pl = (int)(l - INT32_MAX - 1) - INT32_MAX - 1;
}

uint64 combineInt32sIntoUint64(int32 h, int32 l)
{
  return ((uint64)(uint32)h << 32) | (uint32)l;
} 
```

gcc 能够从上面生成非常优化的机器代码，而无需任何算术运算：

```
_splitUint64IntoInt32s:
        movl    8(%esp), %edx
        movl    12(%esp), %eax
        movl    %edx, (%eax)
        movl    4(%esp), %edx
        movl    16(%esp), %eax
        movl    %edx, (%eax)
        ret

_combineInt32sIntoUint64:
        movl    8(%esp), %eax
        movl    4(%esp), %edx
        ret 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T05:32:43.403

```
unsigned long long u64 = 0xAAAAAAAABBBBBBBB;
int l = ((int*)(&u64))[0];
int h = ((int*)(&u64))[1];
unsigned long long restored;
((int*)(&restored))[0] = l;
((int*)(&restored))[1] = h; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T20:58:10.710

> 我做错了什么？

```
uint64_t recover_test = ((a << 32) & b); 
```

`a << 32`是未定义的行为。

未定义按位左移更多或相同于左操作数的位宽度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T21:05:59.013

这有效

```
#include <stdint.h>
#include <stdio.h>

int main(void)
{
    uint64_t test = 1350640807215539000;
    int a = test >> 32; //get top 32 bits
    int b = test & 0x00000000FFFFFFFF; //keep bottom 32 bits

    uint64_t recover_test = (((uint64_t)((uint32_t)a) << 32) | (uint32_t)b);

    printf("a: %llu\n", (uint64_t)a);
    printf("b: %llu\n", (uint64_t)b);
    printf("Recovered: %llu\n", recover_test);

    printf("Test %s\n", test == recover_test ? "PASSED" : "FAILED");
} 
```

与所有其他的大部分相同，我只是在任何地方使用它们之前将整数显式转换回无符号整数。如果要么`a`或`b`最终是负面的，这可能很重要。

输出：

```
a: 314470568
b: 2100994872
Recovered: 1350640807215539000
Test PASSED 
```

当 b 为负时输出（感谢 Daniel）：

```
a: 314470568
b: 18446744073663062840    # -46488776
Recovered: 1350640809363022648
Test PASSED 
```

# python - 正确使用 `isinstance(obj, class)`

> ID：13039060
> 
> 赞同：8
> 
> 时间：2012-10-23T20:53:09.137
> 
> 标签：python, class, isinstance

在我写这篇文章时，对我来说，我实际上遇到了这个问题似乎几乎是超现实的。

我有一个对象列表。这些对象中的每一个都是`Individual`我编写的类的实例。

因此，传统智慧说`isinstance(myObj, Individual)`应该返回`True`。然而，事实并非如此。所以我认为我的编程中有一个错误，并打印`type(myObj)`了，令我惊讶的是打印`instance`并`myObj.__class__`给了我`Individual`！

```
>>> type(pop[0])
<type 'instance'>
>>> isinstance(pop[0], Individual) # with all the proper imports
False
>>> pop[0].__class__
Genetic.individual.Individual 
```

我难住了！是什么赋予了？

**编辑**：我的个人课程

```
class Individual:
    ID = count()
    def __init__(self, chromosomes):
        self.chromosomes = chromosomes[:]    # managed as a list as order is used to identify chromosomal functions (i.e. chromosome i encodes functionality f)
        self.id = self.ID.next()

    # other methods 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T21:02:20.697

此错误表明`Individual`该类以某种方式被创建了两次。您`pop[0]`使用 的一个版本创建`Instance`，并且正在使用另一个版本进行检查。尽管它们几乎相同，但 Python 不知道这一点，并且`isinstance`失败了。要验证这一点，请检查`pop[0].__class__ is Individual`评估是否为假。

通常类不会被创建两次（除非你使用`reload`），因为模块只被导入一次，并且所有类对象实际上都是单例的。但是，使用包和相对导入可能会留下一个陷阱，导致模块被导入两次。当脚本（以 开头`python bla`，而不是从另一个模块导入以`import bla`）包含相对导入时，就会发生这种情况。运行脚本时，python 不知道它的导入引用包，因此它将其导入处理为绝对的，创建一个具有自己的类`Genetic`的顶级模块。另一个其他模块正确导入了最终导入的包，这导致创建了分身，.`individual``individual.Individual``Genetic``Genetic.individual``Genetic.individual.Individual`

要解决此问题，请确保您的脚本仅使用绝对导入，例如`import Genetic.individual`即使相对导入`import individual`似乎工作得很好。如果您想节省打字时间，请使用`import Genetic.individual as individual`. 另请注意，尽管您使用旧式类，`isinstance`但应该仍然可以工作，因为它早于新式类。话虽如此，强烈建议切换到新式课程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:54:09.757

您需要使用继承自的新型类

```
class ClassName(object):
    pass 
```

从您的示例中，您正在使用继承自的旧式类

```
class Classname:
    pass 
```

编辑：正如@user4815162342 所说，

```
>>> type(pop[0])
<type 'instance'> 
```

是由使用旧式类引起的，但这不是您的问题的原因`isinstance`。相反，您应该确保不要在多个地方创建该类，或者如果您这样做，请使用不同的名称。多次导入它应该不是问题。

# php - fopen(file,w+) 截断文件，然后我可以检查它是否被flock() 锁定

> ID：13039065
> 
> 赞同：4
> 
> 时间：2012-10-23T20:54:05.813
> 
> 标签：php, fopen, flock

我有一个接收文件名和 json 对象以写入文本文件的函数。

对象已更新，需要完全替换文件的当前内容。每个站点访问者都有自己的文件。多次快速更改会导致文件被截断`fopen(file,w+)`，然后在锁定时不写入。最终结果是空文件。

我确信有一种标准的简单方法可以做到这一点，因为这是一种常见的活动。理想情况下，我正在寻找一种在使用`fopen`in`w+`模式截断文件之前检查文件是否有锁的方法或切换模式的方法。

您必须截断文件`fopen()`以获取要传递的文件句柄以`flock()`检查它是否已锁定，这似乎很奇怪——但您只是截断了它，那有什么意义呢？

这是我到目前为止的功能：

```
function updateFile($filename, $jsonFileData) {
    $fp = fopen($filename,"w+");
    if (flock($fp, LOCK_EX)) {  
        fwrite($fp, $jsonFileData);
        flock($fp, LOCK_UN);
        fclose($fp);
        return true;
    } else {
        fclose($fp);
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T21:03:01.677

[PHP 手册](http://us3.php.net/flock)中的示例 #1只需稍作修改即可完成您想要的操作。使用该[`"c"`模式](http://us3.php.net/manual/en/function.fopen.php)打开文件进行写入，不存在则创建，不截断。

```
$fp = fopen("/tmp/lock.txt", "c");

if (flock($fp, LOCK_EX)) {  // acquire an exclusive lock
    ftruncate($fp, 0);      // truncate file
    fwrite($fp, "Write something here\n");
    fflush($fp);            // flush output before releasing the lock
    flock($fp, LOCK_UN);    // release the lock
} else {
    echo "Couldn't get the lock!";
}

fclose($fp); 
```

[`"c"`模式](http://us3.php.net/manual/en/function.fopen.php)的完整描述：

> 打开文件进行写入。如果文件不存在，则创建它。如果它存在，它既不会被截断（与“w”相反），对该函数的调用也不会失败（就像“x”一样）。文件指针位于文件的开头。如果希望在尝试修改文件之前获得建议锁（请参阅 参考资料），这可能很有用[`flock()`](http://us3.php.net/flock)，因为使用 'w' 可以在获得锁之前截断文件（如果需要截断，可以在请求锁定）。

看起来你不需要它，但`"c+"`如果你想读写，也有相应的模式。

# apache - 如何仅通过子域进行子文件夹排他性访问

> ID：13039066
> 
> 赞同：5
> 
> 时间：2012-10-23T20:54:07.887
> 
> 标签：apache, .htaccess, subdomain, shared-hosting

我的网站托管在由 CPanel 管理的共享主机帐户上。它允许创建无限的子域。我有以下情况：

假设我的主域是：mydomain.com 我的帐户文件位于 /home/myaccount/public_html 的托管服务器上 我决定创建名为 dir 的子域，即 dir.mydomain.com 我创建了这个子域以使用以下文件：/home/myaccount/public_html/Hosts/directory

现在我成功地可以访问[http://dir.mydomain.com](http://dir.mydomain.com) 但是，我需要阻止访问[http://mydomain.com/Hosts/directory](http://mydomain.com/Hosts/directory)并专门限制对子域的访问。

我如何使用 .htaccess 来实现这一点？

以下是我在 /home/myaccount/public_html/Hosts/directory 中找到的 .htaccess 文件中使用的代码的副本

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
 </IfModule>
AddType audio/mpeg mp3
AddType text/xml xml 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T22:01:26.453

Jon Lin 的上述回答不起作用。我发现Redirect可以解决如下问题：

```
#.htaccess at public_html

Redirect /Hosts/directory/ http://dir.mydomain.com/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T04:51:50.493

保留`/home/myaccount/public_html/Hosts/directory`它们所在的规则，您需要将规则添加到`/home/myaccount/public_html`主域的主文档根目录，以便它无法访问主机中的内容：

```
RewriteRule ^/?Hosts - [L,R=404] 
```

您需要在您可能已经拥有的任何路由规则之前添加它。在您的主域中，对任何子目录或任何子目录的任何访问`/Hosts`都将导致 404。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-20T14:25:55.080

检查此解决方案。简短而简单。

[http://www.codefleet.net/prevent-access-to-subdomain-folder-from-main-domain/](http://www.codefleet.net/prevent-access-to-subdomain-folder-from-main-domain/)

# c# - WebClient 不会自动重定向

> ID：13039068
> 
> 赞同：15
> 
> 时间：2012-10-23T20:54:10.167
> 
> 标签：c#, webclient

使用 Firebug 记录登录过程时，我看到它是这样的

```
POST //The normal post request
GET //Automatically made after the login
GET //Automatically made after the login
GET //Automatically made after the login 
```

使用下面的代码发出发布请求时，它没有发出浏览器正在执行的自动 GET 请求。

我的 WebClient 处理程序

```
using System;
using System.Net;

namespace Test
{
    class HttpHandler : WebClient
    {
        private CookieContainer _mContainer = new CookieContainer();

        protected override WebRequest GetWebRequest(Uri address)
        {
            var request = base.GetWebRequest(address);
            if (request is HttpWebRequest)
            {
                (request as HttpWebRequest).CookieContainer = _mContainer;
            }
            return request;
        }

        protected override WebResponse GetWebResponse(WebRequest request)
        {
            var response = base.GetWebResponse(request);
            if (response is HttpWebResponse)
                _mContainer.Add((response as HttpWebResponse).Cookies);
            return response;
        }

        public void ClearCookies()
        {
            _mContainer = new CookieContainer();
        }
    }
} 
```

使用代码

```
private static async Task<byte[]> LoginAsync(string username, string password)
{
    var postData = new NameValueCollection();
    var uri = new Uri(string.Format("http://{0}/", ServerName));

    postData.Add("name", username);
    postData.Add("password", password);

    return await HttpHandler.UploadValuesTaskAsync(uri, postData);
} 
```

当尝试跟踪我的应用程序的连接时，它只执行 POST 请求，而不执行其余的 GET 请求。[在浏览器中自动生成]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T13:11:06.607

尝试添加

```
request.AllowAutoRedirect = true; 
```

就在下面

```
var request = base.GetWebRequest(address); 
```

它为我解决了一些类似的问题，即使默认情况下`AllowAutoRedirect`也是如此`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:57:12.707

鉴于这`HttpWebRequest`不是浏览器，这不足为奇。如果您需要执行这些重定向，请检查[HttpWebResponse.StatusCode ，如果它](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.statuscode.aspx)[是 300 中的重定向代码，则](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)发出另一个请求。来自 10.3 重定向 3xx 下的链接的注意事项：

> 此类状态码表明用户代理需要采取进一步的行动才能满足请求。当且仅当第二个请求中使用的方法是 GET 或 HEAD 时，用户代理可以执行所需的操作，而无需与用户交互。客户端应该检测无限重定向循环，因为这样的循环会为每个重定向生成网络流量。

# jquery - 快速点击中断 jQuery toggle()

> ID：13039075
> 
> 赞同：0
> 
> 时间：2012-10-23T20:54:54.007
> 
> 标签：jquery

这可以正常工作，除非您多次快速单击同一标签，否则会破坏`toggle()`. 我希望这种行为能够`toggle()`正常工作。问题是：如果元素已经存在，我该如何让它`toggle()`不运行`:checked`？

```
$(document).ready(function() {
$("#UPLOADMYDESIGNFF").show();

$('label').click(function() {

     var total = 0;

      $('.option:checked').each(function() {

     if( $(this).is('#DESIGNONLYFF:checked, #NOPRINTFF:checked')) 
                {
                  $("#UPLOADMYDESIGNFF").toggle();
                }

      total += parseFloat($(this).data('number'));  
      $(this).parent().addClass('cust-selected-cart-item');

      });

      $('.option:not(:checked)').each(function() {
          $(this).parent().removeClass('cust-selected-cart-item');
      });

          $('.sub-total-t').html('$' + total.toFixed(2) );
      });

  }); 
```

粗略的 DIV 的默认值：`UPLOADMYDESIGNFF`设置为`DISPLAY:NONE`

# HTML

```
<label><input id="NOPRINTFF" type="radio" name="print"/></label>
<label><input id="DESIGNONLYFF" type="radio" name="print"/></label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:14:22.717

没关系 - 我发现了问题.. 只是改为`(this)`现在`.option:checked` 它工作正常。不管怎么说，还是要谢谢你！:)

# android - 图像显示在设备上但不在模拟器上？安卓

> ID：13039089
> 
> 赞同：1
> 
> 时间：2012-10-23T20:55:42.630
> 
> 标签：android, image, android-emulator, android-sdk-2.3

在我的应用程序的一部分中，我使用以下方法检查屏幕密度：

```
float sdpi = ApplicationConstants.ref_currentActivity.getResources().getDisplayMetrics().density;
if(sdpi == 0.75)
    {
        ApplicationConstants.screenSize = "small";
    }
    else if(sdpi == 1.0)
    {
        ApplicationConstants.screenSize = "medium";
    }
    else if(sdpi == 1.5)
    {
        //Message.inform("Setting Screen Size", "sdpi is:" + sdpi + " so screen size is large");
        ApplicationConstants.screenSize = "large";
    }
    else if(sdpi == 2.0)
    {
        ApplicationConstants.screenSize = "xlarge";
    } 
```

然后稍后在另一部分中，我只是有一个基于 screenSize 加载正确图像位图的方法：

```
 if(ApplicationConstants.screenSize.equals("small"))
    {
        imageName = imageName + "s";
    }
    else if(ApplicationConstants.screenSize.equals("medium"))
    {
        imageName = imageName + "m";
    }
    else if (ApplicationConstants.screenSize.equals("large"))
    {
        imageName = imageName + "l";
        //Message.inform("ImageName should have an l at the end", imageName );
    }
    else imageName = imageName + "x"; 
```

所以基本上 - 如果我调用 findImageByName("SomeImage")，那么图像名称将根据屏幕密度更改为 SomeImages(small)、SomeImagem(medium)、SomeImagel(large)、SomeImagex(xlarge) - 然后我使用 imageName从我从 jar 文件中提取的图像中创建一个可绘制对象。

我看到这在我的 mdpi 屏幕设备上工作正常 - 但在模拟器上我没有图像显示在它们应该出现的位置。

我想也许我只是在某个地方犯了一个愚蠢的错误，所以即使我的 sdpi 为 1.5，我也将 ApplicationConstants.screenSize 更改为“中等”，并且仍然没有在模拟器运行时加载图像。

有人遇到过这个问题吗？

注意：我以这种方式加载图像的原因是因为它是一个模块化的ImageLoader 类，可以从 jar 文件中加载图像。jar 文件包含我在运行时使用 DexClassLoader 动态加载的 .class 所需的图像。如果有人对动态模块加载过程有任何疑问 - 请随时提问，我将解释为什么我会以这种方式加载图像。

任何帮助表示赞赏:) StackOverflowers 同胞。

注意：我目前无法访问 hdpi-real life android 设备。否则我会在那里测试它是否有效。

**编辑：**

我已经设法让它在模拟器上工作 - 但这没有使用状态......我最终需要在按钮上使用它以确保它们看起来像是被点击了。

**这是有效的：**

b[i].setBackgroundDrawable(ApplicationConstants.moduleImageLoader.findImageByName(drawable_normal));

**这是行不通的：但应该！**

states.addState(new int[] {}, ApplicationConstants.moduleImageLoader.findImageByName(drawable_normal)); b[i].setBackgroundDrawable(状态);

b 是一组按钮。ApplicationConstants.modularImageLoader 为当前模块获取正确的 imageLoader。findImageByName 采用“imageName”根据屏幕密度附加 s、m、l、x 并返回与该名称匹配的可绘制对象（即在我的模块的 jar 中具有该名称的图像文件）。ModularImage 加载器与我的模块加载器一起工作 - 确保为其相应模块加载正确的 imageLoader。

知道为什么状态在这种情况下不起作用吗？感谢您提供任何帮助...我是否错误地使用了状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:08:10.583

除非这些是拼写错误，否则我认为您最可能的问题是假设密度对应于屏幕尺寸。实际上，它很可能与您编码的内容相反（例如，密度越高，屏幕尺寸越小——通常），因为屏幕越大，像素分布得越远，导致密度。当然，可以通过增加屏幕分辨率来补偿并制作更高的密度，但在大多数情况下，密度较高的屏幕比密度较低的屏幕更可能是较小的屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:07:36.863

我相信有多种可能性，例如：

*   模拟器中的图像路径不同
*   模拟器中不存在图片
*   没有足够的内存来加载图像（尝试更小的尺寸或更改每个模拟器的内存设置）

# sql - SCCM 2007 SQL 查询

> ID：13039093
> 
> 赞同：1
> 
> 时间：2012-10-23T20:55:51.230
> 
> 标签：sql, web, report, sccm

我需要一些帮助来编写一个 SQL 查询，但无论如何我都不精通这个。我试图在安装了显示名称为“TestMe”的软件的系统上查找计算机硬件。这是SQL代码：

```
SELECT dbo.v_GS_ADD_REMOVE_PROGRAMS_DispalyName0, SYS.Netbios_Name0, Processor.Name0, Processor.MaxClockSpeed0, Processor.DeviceID0
FROM v_R_System SYS
JOIN v_GS_PROCESSOR Processor on SYS.ResourceID=Processor.ResourceID
JOIN dbo.v_GS_ADD_REMOVE_PROGRAMS
WHERE v_GS_ADD_REMOVE_PROGRAMS_DisplayName0 LIKE %TestMe%
ORDER BY SYS.Netbios_Name0 
```

当我执行此操作时，我不断收到以下错误：

```
Msg 156, Level 15, State 1, Line 5
Incorrect syntax near the keyword 'WHERE'. 
```

我非常感谢您的帮助。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:01:09.650

您需要在 WHERE 之前打开条件，并且还需要像这样放置“%TestMe%”：

```
SELECT dbo.v_GS_ADD_REMOVE_PROGRAMS_DispalyName0, SYS.Netbios_Name0, Processor.Name0, Processor.MaxClockSpeed0, Processor.DeviceID0
FROM v_R_System SYS JOIN v_GS_PROCESSOR Processor on SYS.ResourceID=Processor.ResourceID JOIN dbo.v_GS_ADD_REMOVE_PROGRAMS as t on t.Id = SYS.ResourceID
WHERE v_GS_ADD_REMOVE_PROGRAMS_DisplayName0 LIKE '%TestMe%' ORDER BY SYS.Netbios_Name0 
```

请注意，我不知道您的表之间的关系，因此 t.Id = SYS.ResourceID 需要更改为正确的逻辑表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:20:25.217

您需要在 %TestMe% 周围加上单引号，因为您使用的[是 like](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T23:25:55.940

对不起，我没有早点回复，我一直很忙于家庭事务。无论如何，我决定不使用 SQL 报告，而是使用 WMI 查询，而不是似乎提供了我正在寻找的结果，因为 SQL 报告仅针对安装了特定软件且我不想使用的系统我的 SQL 报告，因为它只是临时使用。这就是我使用 WMI 查询的原因。这是我使用的 WMI 查询代码：

```
select distinct SMS_R_System.Name, SMS_G_System_ADD_REMOVE_PROGRAMS.DisplayName, SMS_G_System_ADD_REMOVE_PROGRAMS.Version, SMS_G_System_X86_PC_MEMORY.TotalPhysicalMemory, SMS_G_System_LOGICAL_DISK.Size, SMS_G_System_IDE_CONTROLLER.Description, SMS_G_System_PROCESSOR.Name, SMS_G_System_PROCESSOR.MaxClockSpeed, SMS_G_System_PROCESSOR.AddressWidth, SMS_G_System_MOTHERBOARD_DEVICE.PrimaryBusType, SMS_G_System_VIDEO_CONTROLLER.VideoProcessor, SMS_G_System_VIDEO_CONTROLLER.AdapterRAM, SMS_G_System_OPERATING_SYSTEM.Caption, SMS_G_System_OPERATING_SYSTEM.CSDVersion from  SMS_R_System inner join SMS_G_System_ADD_REMOVE_PROGRAMS on SMS_G_System_ADD_REMOVE_PROGRAMS.ResourceID = SMS_R_System.ResourceId inner join SMS_G_System_X86_PC_MEMORY on SMS_G_System_X86_PC_MEMORY.ResourceID = SMS_R_System.ResourceId inner join SMS_G_System_PROCESSOR on SMS_G_System_PROCESSOR.ResourceID = SMS_R_System.ResourceId inner join SMS_G_System_VIDEO_CONTROLLER on SMS_G_System_VIDEO_CONTROLLER.ResourceID = SMS_R_System.ResourceId inner join SMS_G_System_MOTHERBOARD_DEVICE on SMS_G_System_MOTHERBOARD_DEVICE.ResourceID = SMS_R_System.ResourceId inner join SMS_G_System_OPERATING_SYSTEM on SMS_G_System_OPERATING_SYSTEM.ResourceID = SMS_R_System.ResourceId inner join SMS_G_System_IDE_CONTROLLER on SMS_G_System_IDE_CONTROLLER.ResourceID = SMS_R_System.ResourceId inner join SMS_G_System_LOGICAL_DISK on SMS_G_System_LOGICAL_DISK.ResourceID = SMS_R_System.ResourceId where SMS_G_System_ADD_REMOVE_PROGRAMS.DisplayName = "Varian Aria Radiation Oncology Client" order by SMS_R_System.Name 
```

# objective-c - 我可以将地址行从联系人添加到文本视图吗

> ID：13039099
> 
> 赞同：0
> 
> 时间：2012-10-23T20:56:06.767
> 
> 标签：objective-c, ios, xcode

是否可以将地址的所有行添加到文本视图中，到目前为止我只能让最后一行显示在视图中`adresslines`。

```
 self.adresslines.text = (NSString *)(CFDictionaryGetValue(dictionary, kABPersonAddressCityKey));
        self.adresslines.text = (NSString *)(CFDictionaryGetValue(dictionary, kABPersonAddressStreetKey));
        self.adresslines.text = (NSString *) (CFDictionaryGetValue(dictionary, kABPersonAddressZIPKey)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:03:41.897

正如您现在所拥有的那样，您正在使用地址的每一行设置文本视图的文本。你想追加，而不是替换。像这样的东西会起作用：

```
NSMutableString *text = [NSMutableString string];    
[text appendString:(NSString *)(CFDictionaryGetValue(dictionary, kABPersonAddressCityKey))];
[text appendString:@"\n"];
[text appendString:(NSString *)(CFDictionaryGetValue(dictionary, kABPersonAddressStreetKey))];
[text appendString:@"\n"];
[text appendString:(NSString *) (CFDictionaryGetValue(dictionary, kABPersonAddressZIPKey))];
self.addresslines.text = text; 
```

当然，您可以在此处添加检查以避免空行或根据需要添加其他格式。

# objective-c - 如何处理 Objective-C 块中的任意签名？

> ID：13039102
> 
> 赞同：2
> 
> 时间：2012-10-23T20:56:15.923
> 
> 标签：objective-c, multithreading, block

**如何重构任意块？**

我有两个签名截然不同的函数，我想将它们作为一个块传递，以便确保线程安全，因为 setenv() 和 unsetenv() 不能保证是线程安全的：

**旧代码**

```
-(X*)foo1
{
  X* x;
  @synchronized( self )
  {
    setenv( ... );
    x = worker_1( ... );
    unsetenv( ... );
  }
  return x;
}

-(Y*)foo2
{
  Y* y;
  @synchronized( self )
  {
    setenv( ... );
    y = worker_2( ... );
    unsetenv( ... );
  }
  return y;
} 
```

请注意，这两个代码块是**相同**的，只是 worker_1() 和 worker_2() 的签名大不相同。

换句话说，我需要重构**相同的包装器**，但**完全不同的胆量返回任意对象**。

**新代码**

```
- (void)aThreadSafeWrapper:my_block  // broken: needs fixing
{
    @synchronized( self )
    {
       setenv( ... );
       my_block();                   // broken: needs fixing
       unsetenv( ... );
    }
} 
```

*有什么方法可以在 Objective-C 中完成这种重构吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:13:27.883

我不知道我是否理解你的问题，但看起来你所需要的只是......

```
- (void)performWithMySpecialEnvironment:(void(^)(void))block
{
    @synchronized( self )
    {
       setenv( ... );
       block();
       unsetenv( ... );
    }
} 
```

然后，你可以在你的街区做任何你想做的事情......

```
[foo performWithMySpecialEnvironment:^{
    X x = worker_1( ... );
}];

[foo performWithMySpecialEnvironment:^{
    Y y = worker_2( ... );
}]; 
```

请注意，我不认可 @synchronized/setenv/unsetenv 的使用，但因为这就是你正在做的事情，而且它不是手头真正问题的一部分，我将不理会它，因为它可能只会混淆真正的“块” “ 问题。

**编辑**

> +1 包装建议。实际上，如果我将块签名更改为 return (void*) 并进行一些非常难看的转换，我可以让它工作。如果这最终导致混淆，我可能只需要复制粘贴包装代码（恶心）。我喜欢 ObjC，但这是一些像 C++ 模板这样的功能会派上用场的地方。如果没有更好的解决方案出现，我会接受这个答案。特维姆！– kfmfe04

显然，您需要强制转换并返回，因为您想访问块外的变量。这很容易补救。

```
__block X x;
[foo performWithMySpecialEnvironment:^{
    x = worker_1( ... );
}]; 
```

# mysql - 从三个嵌套表中选择所有行

> ID：13039106
> 
> 赞同：0
> 
> 时间：2012-10-23T20:56:47.750
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord, associations

```
class Channel < ActiveRecord::Base
  has_many :programs

end

class Program < ActiveRecord::Base
  belongs_to :channel
  has_many :program_schedules

end

class ProgramSchedule < ActiveRecord::Base
  belongs_to :program
end 
```

我想得到一个这样的数据数组：

*   频道 1：

    *   程序 1

        *   附表1
    *   节目二

        *   附表1
        *   附表2
        *   附表 3
*   频道 2：

    *   程序 1
        *   附表1
        *   附表2
        *   附表 3

我试过这个查询，但它只检索“频道”行（没有节目和时间表）

```
 @data = Channel.joins(:programs => :program_schedules).group("channel_id") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:20:39.643

我不建议您以这种方式获取所有行。

做这样的事情。

在您的控制器中，在索引操作中说

```
def index
  @channels = Channel.all
end 
```

在要显示所有内容的视图中。

```
%ul#channels
  = @channels.each do |channel|
    %li= channel.name
    %ul.channel
      = channel.programs.each do |program|
        %li= program.name
        %ul.program
          = program.schedules.each do |schedule|
            %li= schedule.name 
```

# php - 通过 PHP 将日期从表单传递到 MySQL

> ID：13039107
> 
> 赞同：0
> 
> 时间：2012-10-23T20:56:49.837
> 
> 标签：php, mysql, datetime

我正在尝试通过将事件添加到我的 MySQL 数据库来创建一个将事件添加到我的日历的表单。

这是表格：

```
<form action="actions.php?action=addEvent" method="post">
    Titel: <input type="text" name="title"><br/>
    Start tid(YYYY-MM-DD HH:MM): <input type="text" name="startDate"><br/>
    Slut tid(YYYY-MM-DD HH:MM): <input type="text" name="endDate"><br/>
    Beskrivning: <br/>
    <textarea rows="15" cols="10" name="description"></textarea>
    <input type="submit" value="Spara">
</form> 
```

这是 PHP 脚本：

```
if($_GET['action'] == 'addEvent'){
    $title = mysql_real_escape_string($_POST['title']);
    $desc = mysql_real_escape_string($_POST['description']);
    $startDate = date('Y-m-d H:i:s', strtotime($_POST['startDate'] . ":00"));
    $endDate = date('Y-m-d H:i:s', strtotime($_POST['endDate'] . ":00"));

    mysql_query("INSERT INTO events VALUES (null, '$title', '$desc', $startDate, $endDate);") or header("Location: ./?p=calendar.php&msg=" . mysql_error());
    header("Location: ./?p=calendar.php&msg=Sparat");
} 
```

MySQL 列类型是 DATETIME。我应该如何继续将 YYYY-MM-DD HH:MM 字符串从表单转换为允许 mysql_query() 工作的类型。目前我得到 ?msg=Sparat 响应但没有行输入到数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:06:24.157

您需要`dates`用引号将字段括起来，

```
mysql_query("INSERT INTO events VALUES (null, '$title', '$desc', '$startDate', '$endDate');") or header("Location: ./?p=calendar.php&msg=" . mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:06:16.953

您可以调整查询以在日期前后加上单引号。请阅读[此](http://www.ntchosting.com/mysql/insert-date.html)。

```
$query_manual = "INSERT INTO tablename (col_name, col_date) VALUES ('DATE: Manual Date', '2008-7-04')"; 
```

此外，要求您的用户以该格式输入日期可能有点麻烦。这些天人们期待日期选择器。[这是](http://jqueryui.com/datepicker/)我在 jqueryui 中经常使用的一个非常简单的方法。您可以将输入日期格式化为 YYYY-MM-DD。如果需要添加时间，可以将 jquery datepicker 扩展为[timepicker](http://trentrichardson.com/examples/timepicker/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:07:29.990

您收到的日期格式正确。所以你不需要改变它。在 mysql_query 中使用时，您只需要在日期周围加上单引号。这样你就可以：

```
mysql_query("INSERT INTO events VALUES (null, '$title', '$desc', '".$_POST['startDate']."', '".$_POST['endDate']."');") or header("Location: ./?p=calendar.php&msg=" . mysql_error()); 
```

# html - IE9 无法解析超过 ~ 4100 个类的 CSS 文件

> ID：13039108
> 
> 赞同：1
> 
> 时间：2012-10-23T20:56:50.493
> 
> 标签：html, css, internet-explorer, internet-explorer-9

> **可能重复：**
> [css文件大小有限制吗？](https://stackoverflow.com/questions/3211885/is-there-any-limit-on-css-file-size)

我有一个来自第三方应用程序的生成的 CSS 文件，大约 60K 行，其中定义了 ~ 13K 类。我无法以任何方式在服务器上更改生成的 CSS 文件（当它是从第三方应用程序生成时）以及它在 GET 请求中注入不同 HTML 文件的方式。

我的应用程序目标浏览器是 IE9，碰巧 IE9 无法解析来自一个文件的超过 4095 个类，因此无法获得之后定义的类。此外，在调试我拥有的生成文件和我创建的另一个测试文件（下面的要点）以验证这个数字时，这个数字是准确的。

是否有任何解决方法，或者我在这里遗漏了任何细节？

**插图：**
为了快速重现此问题，这里是我创建的要点的链接。只需提取某个文件夹中的所有文件并`ie9_test.html`在IE9中打开

[https://gist.github.com/3941331](https://gist.github.com/3941331)

我找不到任何服务来在线显示存在 IE9 环境的输出。我的 IE9 版本是 9.0.8112.16421

**编辑：**测试文件和我的文件在 chrome v22 上运行良好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:59:00.040

一个明显的解决方法是将它自己分解为两个或多个文件。然后，您可以将两者都包含在相关页面上。您只需要编写一个简单的 css 解析器来确定在哪里剪切文件。简单地说，我的意思是找到课程开始和开始的地方，这样你就知道在哪里切碎。

# sql - 当包罗万象的 SELECT 已经运行时，为什么要运行单个 SELECT 查询？（导轨/ActiveRecord）

> ID：13039110
> 
> 赞同：8
> 
> 时间：2012-10-23T20:56:53.710
> 
> 标签：sql, ruby-on-rails, activerecord, ruby-on-rails-3.2, query-optimization

我有以下代码（注意`includes`和`.each`）：

```
subscribers = []
mailgroup.mailgroup_members.opted_to_receive_email.includes(:roster_contact, :roster_info).each { |m|
  subscribers << { :EmailAddress => m.roster_contact.member_email,
                   :Name => m.roster_contact.member_name,
                   :CustomFields => [ { :Key => 'gender', 
                                        :Value => m.roster_info.gender.present? ? m.roster_info.gender : 'X' 
                                    } ] 
                  } if m.roster_contact.member_email.present?
}
subscribers 
```

相应地，我在日志中看到以下内容（即`select * from ROSTER_INFO ... IN (...)`）：

```
SELECT `ROSTER_INFO`.* FROM `ROSTER_INFO` WHERE `ROSTER_INFO`.`ID` IN ('1450', '1000', '1111') 
```

然而，紧随其后的是之前查询列表中`select * from ROSTER_INFO`已经指定的每个 ID ：`IN`

```
RosterInfo Load (84.8ms)  SELECT `ROSTER_INFO`.* FROM `ROSTER_INFO` WHERE `ROSTER_INFO`.`ID` = '1450' LIMIT 1
RosterInfo Load (59.2ms)  SELECT `ROSTER_INFO`.* FROM `ROSTER_INFO` WHERE `ROSTER_INFO`.`ID` = '1000' LIMIT 1
RosterInfo Load (56.8ms)  SELECT `ROSTER_INFO`.* FROM `ROSTER_INFO` WHERE `ROSTER_INFO`.`ID` = '1111' LIMIT 1 
```

如果`select *`已经`ROSTER_INFO`对所有感兴趣的 ID 进行了`IN (...)`处理`select *`（还不`ActiveRecord`知道`ROSTER_INFO`每个 ID 的所有列？

（同时，没有单独的查询`ROSTER_CONTACT`，但是如果我`:roster_contact`从`includes`方法中删除，则`ROSTER_INFO`不会再次查询，而是查询`ROSTER_CONTACT`。）

* * *

**名册信息模型（删节）**

```
class RosterInfo < ActiveRecord::Base
  self.primary_key = 'ID'
end 
```

**RosterContact 模型（删节）**

```
class RosterContact < ActiveRecord::Base
  self.primary_key = 'ID'

  has_many :mailgroup_members, foreign_key: 'rosterID'
  has_many :mailgroups, through: :mailgroup_members

  has_one :roster_info, foreign_key: 'ID'     # can use this line
  #belongs_to :roster_info, foreign_key: 'ID' # or this with no difference

  def member_name                             # I added this method to this
    roster_info.member_name                   # question only *after* having
  end                                         # figured out the problem.
end 
```

**RosterWeb 模型（删节）**

```
class RosterWeb < ActiveRecord::Base
  self.primary_key = 'ID'
end 
```

**邮件组模型（删节）**

```
class Mailgroup < ActiveRecord::Base
  self.primary_key = 'ID'

  has_many :mailgroup_members, foreign_key: 'mailCatID'

  has_one :mailing_list, foreign_key: :legacy_id
end 
```

**MailgroupMember 模型（删节）**

```
class MailgroupMember < ActiveRecord::Base
  self.primary_key = 'ID'

  belongs_to :mailgroup, foreign_key: 'mailCatID'
  belongs_to :roster_contact, foreign_key: 'rosterID'
  belongs_to :roster_info, foreign_key: 'rosterID'
  belongs_to :roster_web, foreign_key: 'rosterID'

  scope :opted_to_receive_email, joins(:roster_web).where('ROSTER_WEB.receiveEmail=?', 1)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:26:20.677

这个问题原来与`m.roster_contact.member_name`- 不幸的是我自己（间接）查询了`member_name`一个方法。我通过更改线路解决了这个问题`roster_contact``roster_info.member_name`

```
:Name => m.roster_contact.member_name, 
```

直接查询`roster_info`如下

```
:Name => m.roster_info.member_name, 
```

我很抱歉给您带来麻烦！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:29:23.927

我要伸出我的脖子说这可能是您的查询引擎正在进行的优化。'IN' 通常用于比较大组键，解决三个键（假设 ID 是键）的最有效方法是按键检索每一行，就像发生的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T16:18:37.553

```
class RosterInfo < ActiveRecord::Base
  has_one :roster_contact, foreign_key: 'ID'  
end

class RosterContact < ActiveRecord::Base
  has_one :roster_info, foreign_key: 'ID' 
end 
```

我不知道拥有双向的前提是什么`has_one`，但我怀疑结果会很糟糕。可能将其中一个更改为`belongs_to`. 对其他双向`has_one`关联执行相同的操作。

另一件事是您对 foreign_key 列使用“ID”，通常的做法是`roster_contact_id`或您引用的任何类。

编辑：

仔细观察，`RosterInfo`, `RosterContact`,`RosterWeb`看起来应该是单个记录的单独表，因为它们都具有相同的**相互`has_one`关联**集。这是应该在模式级别解决的问题，但是现在您应该能够从三个模型*之一*`has_one`中删除关联来解决您的直接问题。

 *![在此处输入图像描述](../Images/5e752bda08483c14409cd76c723c5087.png)*

# java - java jboss无法处理部署的阶段解析

> ID：13039118
> 
> 赞同：1
> 
> 时间：2012-10-23T20:57:46.547
> 
> 标签：java, jboss, ejb, war, ear

我在 Jboss 7 上运行我的 war/ear 文件并收到以下错误：

```
"Failed services" => {"jboss.deployment.unit.\PROJECTNAME.war\".
PARSE" => "org.jboss.msc.services.StartException in service jboss.deployment.unit.\"PROJECTNAME.war\".
PARSE:  Failed to process phase PARSE of deployment \"PROJECTNAME.war\""} 
```

关于如何解决这个问题的任何建议或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-29T14:43:48.220

我在尝试以独立模式在 WildFly 16 上运行 ee8 WAR 时遇到了同样的消息。假设您也在独立模式下运行，请确保`--server-config=standalone-full.xml`在独立可执行文件之后进行设置。

# firefox - Mac OSX 山狮 10.8 中的 Firefox X11

> ID：13039125
> 
> 赞同：5
> 
> 时间：2012-10-23T20:58:14.130
> 
> 标签：firefox, selenium, x11, osx-mountain-lion, headless

我们正在运行 selenium 测试（firefox 自动化），我想使用无头 gem 将其转发到后台。（https://github.com/leonid-shevtsov/headless）。

Lion 上的一切都运行良好，但自从在 moutain lion 中删除 X11 后，我无法让 firefox X11 版本正常工作。我试过 XQuartz 没有成功。

你知道在 Mac OSX Moutain Lion 10.8 中安装 Firefox X11 的方法吗？谢谢！

使用 ：

*   火狐 16
*   Watir Webdriver（红宝石硒绑定）
*   XQuartz 2.7.4
*   最大 OSX 10.8.2

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-01-13T16:30:57.810

我不想再使用 xvfb 了。如果您想无头，请尝试使用 phantomjs 作为您的驱动程序。

# wpf - 如何使用 MVVM Light 拥有多个唯一的 ViewModel 实例？

> ID：13039126
> 
> 赞同：4
> 
> 时间：2012-10-23T20:58:14.427
> 
> 标签：wpf, mvvm, mvvm-light

我对遵循 MVVM 模式还很陌生。我正在使用 MVVMLight。我想知道如何使用 MVVM Light 拥有 ViewModel 的多个唯一实例。例如，我有一个可以打开 n 个窗口的应用程序。每个都使用相同的 Viewmodel。我对 MVVM 很好奇，给他们自己的实例最好的做法是什么。

如果我遵循 MVVM Light 示例，ViewModeLocator 将只有一个静态实例，每个窗口最终都会使用该实例。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T08:56:20.300

简单的：

```
public EndingViewModel EndingViewModel
{
    get 
    { 
      return ServiceLocator.Current.GetInstance<EndingViewModel>(Guid.NewGuid().ToString()); 
    }
} 
```

从 ServiceLocator 解析时，请确保对 GetInstance 的调用将唯一值传递给该方法。在上面的示例中，我传入了一个 guid。

我真的不会手动构建你的对象，因为这违背了在 MVVM Light 中拥有依赖注入容器的意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T03:59:11.200

您不必在视图模型定位器中仅使用静态视图模型。只有当您的视图共享相同的视图模型实例时，这种方法才有意义。对于您的场景，您只需新建一个视图模型实例并将其分配给您创建的每个窗口的 DataContext 属性。

```
public void ShowChildWindow(Window parent)
{
    var window = new WindowView();
    window.DataContext = new ViewModel();
    window.Show();
} 
```

# c# - kinect c#从保存的数据中绘制和移动骨架

> ID：13039132
> 
> 赞同：5
> 
> 时间：2012-10-23T20:58:38.620
> 
> 标签：c#, kinect

我想做的是从保存的数据中绘制和动画骨架（就像我们可以用传感器流做的那样）（所以我有每个关节的 x、y 和 z 值）。

我搜索了很多，但我找不到任何可以帮助我的东西。

我可以将数据转换为关节集合，将其与骨架相关联，但是呢？我不知道如何将骨架映射到 colorImagePoint。

也许我必须创建一个`depthImageFrame`？

太感谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:42:43.547

查看 Kinect 工具箱。它提供了一个记录器和播放功能，可以满足您的需求，或者为您提供一个起点： http: [//kinecttoolbox.codeplex.com/](http://kinecttoolbox.codeplex.com/)

如果您扮演自己的角色，我不确定您为什么需要将其映射到颜色或深度框架，除非我错过了您正在做什么的要求。

查看 Microsoft Kinect for Windows SDK Toolkit 示例中的 SkeletonBasics 示例。它将显示您必须根据骨架数据手动绘制骨架。从那里，您可以考虑为您的应用程序执行以下操作：

1.  设置骨架跟踪回调
2.  在每个骨架帧，或更少（如果你不需要这么多）保存关节位置
3.  还保存一个从 0 开始的时间戳
4.  完成后将数据保存为选择的格式

在播放过程中，读入您录制的数据并启动计时器。当计时器到达下一个骨架帧的存储时间戳时，更新您在屏幕上绘制的骨架（使用 SkeletonBasics 示例应用程序作为指导）。

# css - 如果使用 CSS line-height，插入符号在第二行向下移动 – 有解决方法吗？

> ID：13039133
> 
> 赞同：5
> 
> 时间：2012-10-23T20:58:41.317
> 
> 标签：css, google-chrome, safari, webkit, cursor-position

在 div 中使用该`line-height`属性`contenteditable`会导致插入符号在移动到第二行后向下移动。这在一些自定义网络字体中更为明显，但在标准字体（如 Arial）中也会发生。这种行为有解决方法吗？

**这显示了第一行的插入符号**

![第一行的正常插入符号](../Images/077c9b326eea153abcdbf9cdec928549.png)
**第二行的插入符号向下移动**

![在第二行移动插入符号](../Images/240a42c4fe80f54259e39298d8e3ef09.png)

*可以找到该行为的演示：http:* [//jsfiddle.net/sGgVR/](http://jsfiddle.net/sGgVR/)

**编辑：**用于测试 Safari 6.0.1 和 Chrome 22.0.1229.94 的浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:50:05.790

看不到任何优雅的解决方案。当`line-height`小于 a`font-size`时，行重叠并且光标的顶部被顶部文本框截断。

不过，也许`:first-line`伪元素会有所帮助，但请尝试一下。但我不能在这里很好地利用它。

另一种古怪的方法是使用 JS 将多行文本分成几个不同的元素。当然，每个都有内容可编辑。然后在换行符上创建新元素，在退格键上合并或删除。但是这个解决方案似乎过于复杂*了。*

# javascript - 弹出提交Coldfusion后Javascript重新加载页面

> ID：13039134
> 
> 赞同：2
> 
> 时间：2012-10-23T20:58:44.630
> 
> 标签：javascript, jquery, coldfusion, coldfusion-9

我有一个弹出窗口，我的用户可以在其中编辑父页面上显示的信息。当有人在弹出窗口上按下提交更改时，我需要关闭弹出窗口并重新加载父页面以显示新信息。

我知道那里有很多例子，但这里显示的问题并没有为我提供足够的信息来完成我的任务。

我目前正在使用 onClick="history.go(0)" 将我带回父页面但不会重新加载页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:03:10.680

这个问题有点含糊（甚至根本不是一个真正的问题），但你可以试试`window.location.href="/parentpage";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:30:49.787

要从弹出窗口中关闭弹出窗口，请使用以下命令：

```
self.close(); 
```

要重新加载打开弹出窗口的窗口，请在弹出窗口中使用：

```
window.opener.href = 'URL'; 
```

这应该非常接近您的需要。

# background-image - 当我设置背景附件时 CSS 背景图像调整大小：已修复

> ID：13039135
> 
> 赞同：1
> 
> 时间：2012-10-23T20:58:55.813
> 
> 标签：background-image, fixed, css

我有一个名为“页面”的 div。我使用下面的代码用 CSS 设置它的背景图像。我将图像的大小设置为 div 宽度的 100%，并且它很好地设置了它的高度以保持它的比例。但是当我设置“背景附件：固定”时，它会调整图像的大小。它增加了图像大小，现在它不适合我的 div，所以大部分都被剪切了。我将非常感谢任何帮助。

CSS 代码：

```
 #page {
        height: 100%;
        width: 60%;
        margin: 0 auto;
        background-image: url('bg2.jpg');
        -webkit-background-size: 100% auto;
        -moz-background-size: 100% auto;
        -o-background-size: 100% auto;
        background-size: 100% auto;
        background-repeat: no-repeat;
        background-attachment: fixed;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:18:03.367

我刚刚遇到了使用`background-size: contain;`.

当我将背景附件设置为固定时，大小不再适用于携带背景图像的元素，而是似乎适用于视口，因此它更大并且超出了原始元素。

# pdf - 用于将 PowerPoint 转换为 PDF 的 OpenOffice 替代方案

> ID：13039138
> 
> 赞同：1
> 
> 时间：2012-10-23T20:59:12.320
> 
> 标签：pdf, export, powerpoint, file-conversion, pyuno

我目前正在使用 OpenOffice API (pyuno) 将 PowerPoint 转换为 PDF。但是，转换最终看起来不是很好。我想知道是否有比 OpenOffice 输出更好的转换实用程序。

# java - 自定义 myleadingmargin2 类以允许 l 右侧图像

> ID：13039139
> 
> 赞同：1
> 
> 时间：2012-10-23T20:59:23.880
> 
> 标签：java, android, layout, customization, word-wrap

我已经想出了如何使用 myleadingmargin2 类将文本环绕在图像周围，但它仅适用于文本正文左侧的图像。我知道 drawleadingmargin 中的 dir 变量可以改变，我只是不知道何时何地设置它。

# java - JPQL：在更新中将列设置为空

> ID：13039143
> 
> 赞同：3
> 
> 时间：2012-10-23T20:59:53.683
> 
> 标签：java, jpa, jpql, datanucleus

以下 JPQL：

```
UPDATE SignIn signIn SET signIn.cookieUUID = null WHERE signIn.user.id = :userID 
```

由于“= null”，给我以下错误：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IS NULL WHERE `B0`.`ID` = 9' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 
```

但是当我将字段设置为空字符串（=''）时它会起作用。

那么如何使用 JQPL 将列设置为空？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:08:05.140

我认为它`NULL`（大写）::Reference [JPQL](http://docs.oracle.com/html/E24396_01/ejb3_langref.html) and [Eclipselink](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#WHERE_Clause)

```
 UPDATE SignIn signIn SET signIn.cookieUUID = NULL WHERE signIn.user.id = :userID 
```

或使用参数查询：

```
 String sQuery = "UPDATE SignIn signIn SET signIn.cookieUUID = :cookieUUID "+
                 "WHERE signIn.user.id = :userID";
     Query query= entityManager.createQuery(sQuery );
     query.setParameter("cookieUUID", null);
     query.setParameter("userID", userID);
     query.executeUpdate(); 
```

# .net - 将 Horizo ntalAlignment 设置为 Stretch AND Left 的 TextBox

> ID：13039144
> 
> 赞同：2
> 
> 时间：2012-10-23T20:59:55.560
> 
> 标签：.net, wpf, xaml, alignment

**注意：**我阅读了这个问题及其答案：[Horizo​​ntalAlignment=Stretch、MaxWidth 和 Left 同时对齐？](https://stackoverflow.com/questions/280331/wpf-horizontalalignment-stretch-maxwidth-and-left-aligned-at-the-same-time). 他们都没有做我正在寻找的东西。

* * *

我有以下 xaml：

```
<Grid ShowGridLines="True" x:Name="_testGrid" Height="30" >
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*"></ColumnDefinition>
    <ColumnDefinition Width="*"></ColumnDefinition>
    <ColumnDefinition Width="*"></ColumnDefinition>
  </Grid.ColumnDefinitions>

  <TextBox Text="Text 1" HorizontalAlignment="Stretch"
          MaxWidth="75" Margin="5"/>
  <TextBox Grid.Column="1" Text="Text 2" Margin="5"                 
       HorizontalAlignment="Stretch" MaxWidth="130"/>
  <TextBox Grid.Column="2"  Text="Text 3" Margin="5"               
       HorizontalAlignment="Stretch" MaxWidth="100"/>
</Grid> 
```

它产生这个：

![三个文本框在它们的列中居中](../Images/36253b2b784f6643c378ba6cd98f8dc7.png)

此设置具有很好的调整大小支持。如果窗口缩小，那么 TextBoxes 也会缩小。

唯一的问题是我需要它们左对齐：

![显示我想要的文本框](../Images/f3a89eedf87e9f47c8ef925191156575.png)

我看到的所有解决方案最终都会切断部分文本框（而不是缩小它）。

我正在寻找的 WPF 是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T22:21:15.023

[在这里](http://www.codeproject.com/Answers/45455/Align-Stretch-WPF-Buttons-Using-XAML#answer2)找到了答案。

它仅适用于网格。这是更新的 xaml：

```
<Grid ShowGridLines="True" x:Name="_testGrid" Height="30" >
  <Grid.ColumnDefinitions>
    <ColumnDefinition MaxWidth="75" Width="*"/>
    <ColumnDefinition Width="0.01*" />
    <ColumnDefinition MaxWidth="130" Width="*"/>
    <ColumnDefinition Width="0.01*" />
    <ColumnDefinition MaxWidth="100" Width="*"/>
    <ColumnDefinition Width="0.01*" />
  </Grid.ColumnDefinitions>

  <TextBox Grid.Column="0" Text="Text 1" Margin="5"/>
  <TextBox Grid.Column="2" Text="Text 2" Margin="5"  />
  <TextBox Grid.Column="4" Text="Text 3" Margin="5" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T23:06:53.543

您也可以将您的文本框放在一个专门的面板中，如下所示：

```
public class LeftStretchPanel : Panel
{
    protected override Size MeasureOverride(Size availableSize)
    {
        foreach (UIElement element in InternalChildren)
        {
            element.Measure(availableSize);
        }

        return new Size();
    }

    protected override Size ArrangeOverride(Size arrangeBounds)
    {
        foreach (UIElement element in InternalChildren)
        {
            double width = arrangeBounds.Width;
            FrameworkElement fwElement = element as FrameworkElement;

            if (fwElement != null && width > fwElement.MaxWidth)
            {
                width = fwElement.MaxWidth;
            }

            element.Arrange(new Rect(0, 0, width, arrangeBounds.Height));
        }

        return arrangeBounds;
    }
} 
```

您的 XAML 将如下所示：

```
<Grid ShowGridLines="True" Height="30">
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <local:LeftStretchPanel Grid.Column="0" Margin="5">
        <TextBox Text="Text 1" MaxWidth="75"/>
    </local:LeftStretchPanel>
    <local:LeftStretchPanel Grid.Column="1" Margin="5">
        <TextBox Text="Text 2" MaxWidth="130"/>
    </local:LeftStretchPanel>
    <local:LeftStretchPanel Grid.Column="2" Margin="5">
        <TextBox Text="Text 3" MaxWidth="100"/>
    </local:LeftStretchPanel>
</Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T22:36:28.203

你正在做的实际上是相当复杂的。

您实际上希望它左对齐。这很容易。将其设置为 Horizo​​ntalAlignment="Left"。

您需要最小尺寸和最大尺寸以及在调整窗口大小时在这些尺寸之间增长的能力。

首先，您需要 TextBox 在它和 Column 之间有一个父级，该父级将扩展到 Column 的整个宽度。

```
<Window x:Class="TestTextAlignment.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:TestTextAlignment"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded">
    <Grid Name="MainGrid" ShowGridLines="True" Height="30" >
        <Grid.Resources>
            <loc:ColumnSizeToTextBoxSizeConverter x:Key="SizeConverter" LeftMargin="5" RightMargin="25"/>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Name="ColDef1" Width="*"></ColumnDefinition>
            <ColumnDefinition Name="ColDef2" Width="*"></ColumnDefinition>
            <ColumnDefinition Name="ColDef3" Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <DockPanel Name="Col1">
            <TextBox Text="Text 1" Margin="5" HorizontalAlignment="Left" MinWidth="100" MaxWidth="300" 
                     Width="{Binding ElementName=Col1, Path=ActualWidth, Mode=OneWay, Converter={StaticResource SizeConverter}}" />
        </DockPanel>
        <DockPanel Name="Col2" Grid.Column="1">
            <TextBox Text="Text 2" Margin="5" HorizontalAlignment="Left" MinWidth="100" MaxWidth="300"  
                     Width="{Binding ElementName=Col2, Path=ActualWidth, Mode=OneWay, Converter={StaticResource SizeConverter}}" />
        </DockPanel>
        <DockPanel Name="Col3" Grid.Column="2" >
            <TextBox Text="Text 3" Margin="5" HorizontalAlignment="Left" MinWidth="100" MaxWidth="300"  
                     Width="{Binding ElementName=Col3, Path=ActualWidth, Mode=OneWay, Converter={StaticResource SizeConverter}}" />
        </DockPanel>
    </Grid>
</Window> 
```

然后，正如您在 XAML 中看到的那样，您需要一个转换器，它将 TextBox 大小设置为父对象减去左右边距。

```
using System;
using System.Windows.Data;

namespace TestTextAlignment
{
    public class ColumnSizeToTextBoxSizeConverter : IValueConverter
    {
        #region IValueConverter Members

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return (double)value - LeftMargin - RightMargin;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }

        #endregion

        public double LeftMargin { get; set; }
        public double RightMargin { get; set; }
    }
} 
```

注意：您可以增强转换器以将左右边距作为转换参数，以便可以使用一个转换器将不同大小发送到任何元素。

# grails - Grails：在域类中添加新字段会导致崩溃

> ID：13039148
> 
> 赞同：0
> 
> 时间：2012-10-23T21:00:11.243
> 
> 标签：grails, grails-orm, grails-domain-class

我有一个运行 Grails 1.3.7 的旧项目，在域类（例如患者）中我添加了一个新字段（布尔禁用，可为空为真）。

```
class Hospital {
   hasMany = [patients: Patient]
   string name

class Patient 
   string name
   string address
   boolean disabled  // Added this new field 
```

当我运行应用程序时，获取属于医院的所有患者的查询现在抛出 java.lang.IllegalArgumentException。删除“禁用”的新字段，应用程序运行良好。

基本上导致错误的代码类似于以下：

```
def h = Hospital.get(20)
h.patients   // This causes error below. No error if I remove the new field in domain 
```

这是错误：

```
Stacktrace follows:
java.lang.IllegalArgumentException
    at com.x.model.Patient_$$_javassist_26.hashCode(Patient_$$_javassist_26.java)
    at java.util.HashMap.put(HashMap.java:372)
    at java.util.HashSet.add(HashSet.java:200)
    at java.util.AbstractCollection.addAll(AbstractCollection.java:305)
    at com.x.service.QueryService$_getPatientsByHospitals_closure13.doCall(QueryService.groovy:183)
    at com.x.service.QueryService.getPatientsByHospitals(QueryService.groovy:180)
    at com.x.service.QueryService$$FastClassByCGLIB$$a2fb92c6.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
    at com.x.service.QueryService$$EnhancerByCGLIB$$6756b2a.getPatientsByHospitals(<generated>)
    at com.x.service.QueryService$getPatientsHospitals.call(Unknown Source)
    at com.x.service.PatientsOverviewService.createSummaryRow(PatientsOverviewService.groovy:366)
    at com.x.service.PatientsOverviewService$_getPatientsSummaries_closure9.doCall(PatientsOverviewService.groovy:306)
    at com.x.service.PatientsOverviewService.getPatientsSummaries(PatientsOverviewService.groovy:296)
    at com.x.service.PatientsOverviewService$getPatientsSummaries.callCurrent(Unknown Source)
    at com.x.service.PatientsOverviewService.getPatientsOverview(PatientsOverviewService.groovy:50)
    at com.x.service.PatientsOverviewService$$FastClassByCGLIB$$15a92775.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149) 
```

com.x.ui.PatientsOverviewController$_closure2.doCall(PatientsOverviewController.groovy) 在 java.lang.Thread.run(Thread.java:662)

我感谢任何帮助或建议。这已经困扰了我几个小时了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:16:49.423

原始类型的属性，例如`boolean`不能为空，您需要使用包装类 ( `Boolean`) 来代替。

# git - Git 存储库是否可以进行并发操作？

> ID：13039150
> 
> 赞同：13
> 
> 时间：2012-10-23T21:00:13.927
> 
> 标签：git

有两个我感兴趣的场景。

*   存储库是共享的，两个用户希望同时向它推送更改
*   我想使用 cron 作业安排每晚或每周的“gc”。它运行并且有人想在操作期间推送或克隆。

在这两种情况下是否存在腐败风险？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-04-26T08:13:08.893

Git 通过使用[悲观并发控制](http://en.wikipedia.org/wiki/Concurrency_control#Concurrency_control_mechanisms)来允许并发操作。

必要时，git 会创建一些特殊文件来充当锁。

特别是，每次操作修改索引时，git都会在目录中创建一个名为`index.lock`的`.git`文件来锁定共享资源。Git 会根据需要创建其他锁定文件：例如，`.keep`在[git index-pack](http://git-scm.com/docs/git-index-pack)操作期间创建文件。

通常，您不必担心 git 的并发操作：它经过精心设计以支持它们。

有人可能会告诉你不应该担心执行cron 作业，因为 git 本身会不时`gc`触发。`gc`即使这是真的，[手册页](http://git-scm.com/docs/git-gc)本身也建议：

```
Users are encouraged to run this task on a regular basis 
within each repository to maintain good disk space utilization
and good operating performance. 
```

因此，我认为安排一个作业任务来运行 git 的垃圾收集并不是一个坏主意。我只是想知道这是否是过早的优化，或者您是否正在尝试解决一个真实的、可衡量的问题。我个人从来没有遇到过需要我手动运行的问题`gc`，但是如果您的情况完全不同，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-15T17:55:08.693

通常，“ `git gc`”可能会删除另一个并发进程正在使用但尚未创建引用的对象。
Git 2.12（2017 年第一季度）对此有更多的了解。

请参阅[Matt McCutchen (](https://github.com/mattmccutchen) [)的](https://github.com/mattmccutchen)[提交 f1350d0](https://github.com/git/git/commit/f1350d0c125a1e6a73e3b6461fa90c77843c5f74)（2016 年 11 月 15 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 979b82f](https://github.com/git/git/commit/979b82f19f3c44d34779c46c636aade514a711a9))^(中，2017 年 1 月 10 日）)[`mattmccutchen`](https://github.com/mattmccutchen)
^([`gitster`](https://github.com/gitster))

并查看[Jeff King 的评论](http://marc.info/?l=git&m=147922960131779&w=2)：

> 现代版本的 git 做两件事来帮助解决这个问题：
> 
> *   任何被“最近”对象（在 2 周内）引用的对象也被认为是最近的。因此，如果您创建一个指向树的新提交对象，即使在您引用该提交之前，该树也受到保护
>     
>     
> *   当由于我们已经拥有该对象而优化了对象写入时，git 将更新文件（松散对象或打包文件）上的 mtime 以刷新它
>     
>     
> 
> 不过，这并不完美。您可以决定在删除现有对象时引用它。并且修剪过程本身不是原子的（而且要做到这一点很棘手，只是因为文件系统对我们的承诺）。
> 
> 如果您有长时间运行的数据（例如，一个临时索引文件，它可能会存在数天或数周），我认为这是一个潜在的问题。解决方案可能是以某种方式使用 refs 来指向您的对象。
> 如果您担心某人碰巧同时运行的短期操作`git-gc`，我同意这可能是一个问题，但我怀疑您在实践中可以忽略一些问题。
> 
> 对于繁忙的多用户服务器，我建议完全关闭 auto-gc，并使用 " `-k`" 手动重新打包以确保安全。

这就是为什么[`git gc`手册页](https://github.com/git/git/blob/f1350d0c125a1e6a73e3b6461fa90c77843c5f74/Documentation/git-gc.txt#L137-L168)现在包括：

> 另一方面，当 ' `git gc`' 与另一个进程同时运行时，它可能会删除另一个进程正在使用但尚未创建引用的对象。如果其他进程稍后添加对已删除对象的引用，这可能只会导致其他进程失败或损坏存储库。
> 
> Git 有两个特性可以显着缓解这个问题：
> 
> *   任何修改时间晚于`--prune`日期的对象，以及可从该日期访问的所有内容都将被保留。
>     
>     
> *   如果对象已经存在，大多数将对象添加到数据库的操作都会更新对象的修改时间，以便应用#1。
>     
>     
> 
> 然而，这些功能还没有一个完整的解决方案，所以同时运行命令的用户不得不忍受一些损坏的风险（这在实践中似乎很低），除非他们使用 'git config gc.auto 0' 关闭自动垃圾收集.

* * *

请注意最后一句话，包括“除非他们关闭自动垃圾”：Git 2.22 (Q2 2019) 修改 gc 文档。

See [commit 0044f77](https://github.com/git/git/commit/0044f7700fdbfdb04b8f88c385ca6fd545e1e1bb) , [commit daecbf2](https://github.com/git/git/commit/daecbf2261f595935c999a00a1f9bc433df80e2c) , [commit 7384504](https://github.com/git/git/commit/73845048815bace98588df03ab76fa3e85fc0927) , [commit 22d4e3b](https://github.com/git/git/commit/22d4e3bd19bc81b3db6f372d850ad681333a7fb1) , [commit 080a448](https://github.com/git/git/commit/080a4480a07ae9831bf2685564641f6e5530cf87) , [commit 54d56f5](https://github.com/git/git/commit/54d56f52bdf477b6167cc8f97f8afb5b78eb39fa) , [commit d257e0f](https://github.com/git/git/commit/d257e0fb0adc1eefa8e237391cd0e3aaa9d69e9d) , [commit b6a8d09](https://github.com/git/git/commit/b6a8d09f6d85693dad19bbcfd2b18f9e6fc81ee4) (07 Apr 2019), and [commit fc559fb](https://github.com/git/git/commit/fc559fbb54e5852be7d9cbd854a375333409aa2f) , [commit cf9cd77](https://github.com/git/git/commit/cf9cd771e1314ad5cd8eaf1d92b7a5fd5e6b734f) , [commit b11e856](https://github.com/git/git/commit/b11e8560cc1be17268136504cb80b00fbf4182dc) (22 Mar 2019) by [Ævar Arnfjörð Bjarmason ( `avar`)](https://github.com/avar) .
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 ac70c53](https://github.com/git/git/commit/ac70c5313351630e44b1fe0267fb4850ebcf1f25)中，2019 年 4 月 25 日）)

> ## `gc`文档：删除不正确的引用`gc.auto=0`
> 
> 由于“”而导致存储库损坏的可能性`gc`与是否通过“”调用“gc”无关，而与是否`gc --auto`发生其他并发操作有关。
> 
> 这已经在本段前面提到过，所以没有理由在这里提出这个建议。用户可以从文档的其余部分推断“ `gc`”将自动运行，除非`gc.auto=0`设置，我们不应该通过暗示“ `gc --auto`”比正常的“ `gc`”更容易产生损坏来混淆问题。
> 
> 好吧，从某种意义上说，阻塞“ `gc`”会阻止您在*该*特定终端窗口中执行任何其他操作，但用户可能会有另一个窗口，或者担心`gc`服务器上的并发“”可能会导致损坏。

# objective-c - 更高效的 UITabBarController 设计，具有 2 个相同的视图控制器，仅在数据上有所不同

> ID：13039151
> 
> 赞同：0
> 
> 时间：2012-10-23T21:00:17.700
> 
> 标签：objective-c, ios, uitabbarcontroller

我正在设计一个底部带有标签栏的应用程序，代表我的应用程序关注的 2 组不同的数据。这些集合都是相同的数据类型但不同的集合（一个是分配的实体，另一个是附近的实体，但“实体”对于两者来说是相同的类型）。在每个视图控制器中，顶部还有一个用于相同数据的不同视图的切换开关（一个用于缩略图样式视图，另一个用于地图视图）。

根据我的理解，您不会使用 2 按钮选项卡栏控制器和跨两个选项卡的同一视图控制器的 1 个共享实例，我目前将代码拆分为 2 个单独的视图控制器，一个用于“分配的实体”，一个用于对于“附近的实体”。问题是这里的代码在每个视图控制器中都是完全相同的。唯一不同的是实体的特定集合。理想情况下，我想做的是有 1 个带有 2 个数组的视图控制器，每组数据 1 个，并且用于填充视图的数据会根据用户所在的选项卡而变化。有人对正确执行此操作有任何建议吗？这当然不可能是一个独特的问题，但我没有在网上找到任何东西来准确解决这个问题。通常我会认为有'

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:06:41.240

只需拥有一个知道如何处理“实体”的视图控制器类。创建同一类的两个实例，每个选项卡一个。为每个视图控制器分配适当的实体集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:11:34.440

将共享代码导出到第三个帮助程序类中，并将其代码用作两个视图控制器中的组件。根据其中方法的用途命名此类。如果方法不使用任何实例变量，您可以将它们全部设为静态，这样您将拥有易于使用的函数集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:56:28.653

您可以创建单个视图控制器类，但创建一个自定义 init 方法，该方法允许您在单击选项卡时指定您使用的实体类型。然后，您可以使用实体类型作为您的方法的标志，以确定它们是否应该将其视为类型 a 或 b。

也许你可以做类似的事情：

```
EntityViewController *eVC = [[EntityViewController alloc]initWithNibName:@"EntityViewController" bundle:nil entityType:@"entityTypeA"];
[self.navigationController pushViewController:eVC animated:YES];

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil entityType:(NSString *)eType
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization for entities
        // Assign your value passed in init to your ivar here -- viewDidLoad hasn't run yet.
        _currentEntityType = eType;
    }
    return self;
} 
```

# excel - F# Excel UsedRange 没有属性或方法

> ID：13039153
> 
> 赞同：2
> 
> 时间：2012-10-23T21:00:27.030
> 
> 标签：excel, f#, vsto, office-interop

[这是在F# Excel UsedRange is not Defined](https://stackoverflow.com/questions/12956517/f-excel-usedrange-is-not-defined/12957422#12957422)上开始的讨论的延续，该问题已通过将 ActiveSheet 对象向下转换为工作表来解决。然而，在这样做时，我遇到了一个新问题：UsedRange 除了标准对象方法之外没有公开任何属性或方法。

我的解决方案引用了 Microsoft.Office.Interop.Excel 和 Microsoft.Office.Tools.Excel.v4.0.Utilities。

```
open Microsoft.Office.Interop.Excel
open Microsoft.Office.Tools.Excel

let xl = ApplicationClass()
xl.Workbooks.OpenText(fileName)
let wb = xl.Workbooks.Item(1)
let ws = wb.ActiveSheet :?> Worksheet

ws.UsedRange.EntireColumn.AutoFit()
// "The field, constructor or member 'EntireColumn' is not defined".

ws.UsedRange.Sort(xl.Range(sortKey1), XlSortOrder.xlAscending)
// "The field, constructor or member 'Sort' is not defined".

xl.Range("A2").Value <- 1
xl.Range("A2").AutoFill(xl.Range("A2:A" + ws.UsedRange.Rows.Count),
                        XlAutoFillType.xlFillSeries) |> ignore
// "The field, constructor or member 'Rows' is not defined".

ws.UsedRange.
// Intellisense shows only default object members, e.g. Equals, GetEnumerator, etc. 
```

我可以毫无问题地使用 Range：

```
xl.Range("A1").EntireColumn.Insert() |> ignore 
```

UsedRange 被识别为 Range。向下转换为 Range，Visual Studio 警告我：“这种类型的测试或向下转换将始终保持”。

范围有效。UsedRange 被识别为 Range。因此，UsedRange 应该可以工作。但事实并非如此。我很矛盾。

Visual Studio 2010 高级版，F# 2.0。

我感谢提供的任何见解。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:32:37.980

您确定您的 F# 项目引用了所有必要互操作程序集的正确版本吗？`UsedRange`我刚刚在 F# 脚本文件中尝试了您的代码，添加以下行后我可以看到正常的成员：

```
#r "office.dll"
#r "Microsoft.Office.Interop.Excel.dll" 
```

我可以看到成员喜欢`EntireColumn`并且`Sort`它只抱怨片段中的一行试图`+`在字符串和整数上使用：

```
xl.Range("A2").AutoFill(xl.Range("A2:A" + (string ws.UsedRange.Rows.Count)), 
                        XlAutoFillType.xlFillSeries) |> ignore 
```

我在 Visual Studio 2010 中将其作为脚本文件和一个新项目进行了尝试（添加两个引用后，它似乎工作正常）。我添加了对`dll`安装在 Visual Studio 安装目录中“Visual Studio Tools for Office\PIA”下的引用。

# android - 滑动列表安卓

> ID：13039154
> 
> 赞同：0
> 
> 时间：2012-10-23T21:00:30.170
> 
> 标签：android, android-viewpager, gesture, swipe, viewflipper

我有一个产品对象的 ArrayList（每个对象都包含名称、图像、价格等属性。我想同时显示 arrayList 的每个产品，当用户向右/向左滑动时，它将显示下一个/上一个清单上的产品。

您认为实现这一点的最佳方式是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:21:56.340

[浏览器](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fsupport%2Fv4%2Fview%2FViewPager.html&ei=NgqHUIzOB6S6iwK6j4DwBQ&usg=AFQjCNEp4j6V6xmAhTIXQz_znfSRNHl3sg&sig2=fXrltJZiZYwp_cOxg_dvgg)

这是一个快速入门指南：[Android 开发者博客](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CCkQFjAB&url=http%3A%2F%2Fandroid-developers.blogspot.com%2F2011%2F08%2Fhorizontal-view-swiping-with-viewpager.html&ei=NgqHUIzOB6S6iwK6j4DwBQ&usg=AFQjCNHsz7jENTVUkmO4ZbT3FqQFFsD4uw&sig2=rEAJFHFCCzteQIy_lkAm6w)

# microsoft-metro - WinJS.UI Metro 动画库

> ID：13039159
> 
> 赞同：0
> 
> 时间：2012-10-23T21:00:47.110
> 
> 标签：microsoft-metro

我开始将使用 Sencha Touch 构建的 Web 应用程序移植到 Windows 8 世界中。我看到了很多`WinJS.UI`文档，基本上告诉我，这个框架中已经内置了更多“原生”感觉的动画和 UI 动作。

我的应用程序已经结构化，但`WinJS.UI`如果可以的话，我想加入。我该怎么做呢？我还没有找到下载库或任何类似内容的链接。

例如这个链接：http: [//blogs.msdn.com/b/windowsappdev/archive/2012/05/01/fast-and-fluid-animations-in-your-metro-style-app.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/01/fast-and-fluid-animations-in-your-metro-style-app.aspx)

我看到他们正在使用：

```
<script>       
   function runAnimation(){
      enterPage = WinJS.UI.Animation.enterPage(input);
   }
</script> 
```

但是我没有找到关于在哪里包含该库的文档。

有点丢失，任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T23:29:33.580

这些动画包含在 WinJS 包中的 UI.Js 中——这与默认 Visual Studio 模板中包含的 WinJS 相同。只需创建一个新的 HTML Windows Store 应用程序，详细信息就在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:37:39.000

这是您的图书馆：[http ://code.msdn.microsoft.com/windowsapps/Using-the-Animation-787f3720](http://code.msdn.microsoft.com/windowsapps/Using-the-Animation-787f3720)

您可以将其部署在您的计算机上并播放动画。

# xml - xsl 用于迭代和添加

> ID：13039162
> 
> 赞同：1
> 
> 时间：2012-10-23T21:01:02.503
> 
> 标签：xml, xslt

输入：

```
<root><element>
  <small>a</small>
  <Large>B</Large>
  <Time>301</Time></element><element>
  <small>a</small>
  <Large>B</Large>
  <Time>322</Time></element><element>
  <small>b</small>
  <Large>A</Large>
  <Time>274</Time></element><element>
  <small>c</small>
  <Large>B</Large>
  <Time>325</Time></element><element>
  <small>b</small>
  <Large>A</Large>
  <Time>301</Time></element></root> 
```

需要编写一个 xslt 查看 small 和 Large 元素成对出现的次数，并在 smallnum 标签中列出计数，并将多次迭代的时间添加到 totsmalltime 标签。

输出：

```
<root><element>
  <small>a</small>
  <Large>B</Large>
  <smallnum>2</smallnum>
  <totsmalltime>623</totsmalltime></element><element>
  <small>b</small>
  <Large>A</Large>
  <smallnum>2</smallnum>
  <totsmalltime>575</totsmalltime></element><element>
  <small>c</small>
  <Large>B</Large>
  <smallnum>1</smallnum>
  <totsmalltime>325</totsmalltime></element></root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:26:26.060

要在 XSLT1.0 中执行此操作，您将使用 Muenchian Grouping。在您的情况下，您通过前面的第一个**大**元素和**小元素的组合对****时间**元素进行分组。这意味着您将从定义以下键开始

 ****```
<xsl:key 
   name="pairs" 
   match="Time" 
   use="concat(preceding-sibling::Large[1], '|', preceding-sibling::small[1])" /> 
```

然后，您需要在组中首先出现的**时间**元素为其特定键。你可以这样做：

```
<xsl:apply-templates 
  select="element/Time[
     generate-id()
     = generate-id(
         key(
           'pairs', 
           concat(preceding-sibling::Large[1], '|', preceding-sibling::small[1])
          )[1])]" /> 
```

然后，例如，要获取**smallnum**值，它是组中所有元素的值，您只需这样做，其中**$key**定义为`concat(preceding-sibling::Large[1], '|', preceding-sibling::small[1])`

```
<xsl:value-of select="count(key('pairs', $key))" /> 
```

对于**totsmalltime**元素，只需使用 sum 而不是 count。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="pairs" match="Time" use="concat(preceding-sibling::Large[1], '|', preceding-sibling::small[1])"/>

   <xsl:template match="/root">
      <root>
         <xsl:apply-templates select="element/Time[generate-id() = generate-id(key('pairs', concat(preceding-sibling::Large[1], '|', preceding-sibling::small[1]))[1])]"/>
      </root>
   </xsl:template>

   <xsl:template match="Time">
      <xsl:variable name="small" select="preceding-sibling::small[1]"/>
      <xsl:variable name="Large" select="preceding-sibling::Large[1]"/>
      <xsl:variable name="key" select="concat($Large, '|', $small)"/>
      <element>
         <xsl:copy-of select="$small"/>
         <xsl:copy-of select="$Large"/>
         <smallnum>
            <xsl:value-of select="count(key('pairs', $key))"/>
         </smallnum>
         <totsmalltime>
            <xsl:value-of select="sum(key('pairs', $key))"/>
         </totsmalltime>
      </element>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<root>
   <element>
      <small>a</small>
      <Large>B</Large>
      <smallnum>2</smallnum>
      <totsmalltime>623</totsmalltime>
   </element>
   <element>
      <small>b</small>
      <Large>A</Large>
      <smallnum>2</smallnum>
      <totsmalltime>575</totsmalltime>
   </element>
   <element>
      <small>c</small>
      <Large>B</Large>
      <smallnum>1</smallnum>
      <totsmalltime>325</totsmalltime>
   </element>
</root> 
```

编辑：在 XSLT2.0 中，您可以在进行计数和求和时使用**xsl:for-each-group**元素以及**current-group() 。**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/root">
      <root>
         <xsl:for-each-group select="element/Time" group-by="concat(preceding-sibling::Large[1], '|', preceding-sibling::small[1])">
            <element>
               <xsl:copy-of select="preceding-sibling::small[1]"/>
               <xsl:copy-of select="preceding-sibling::Large[1]"/>
               <smallnum>
                  <xsl:value-of select="count(current-group())"/>
               </smallnum>
               <totsmalltime>
                  <xsl:value-of select="sum(current-group())"/>
               </totsmalltime>
            </element>
         </xsl:for-each-group>
      </root>
   </xsl:template>
</xsl:stylesheet> 
```

这也应该输出相同的 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:35:47.447

您所追求的技术称为*Muenchian grouping*，您希望通过元素和值`element`的组合对元素进行分组：`small``Large`

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:key name="smallLarge" match="element"
        use="concat(small, '_', Large)" />

  <xsl:template match="/">
    <root>
      <xsl:apply-templates select="root/element[generate-id() = generate-id(
             key('smallLarge', concat(small, '_', Large)[1])]" />
    </root>
  </xsl:template>

  <xsl:template match="element">
    <element>
      <small><xsl:value-of select="small" /></small>
      <Large><xsl:value-of select="Large" /></Large>
      <smallnum><xsl:value-of select="count(key('smallLarge',
                  concat(small, '_', Large)))" /></smallnum>
      <totsmalltime><xsl:value-of select="sum(key('smallLarge',
                  concat(small, '_', Large))/Time)" /></totsmalltime>
    </element>
  </xsl:template>
</xsl:stylesheet> 
```

有趣的线是

```
 <xsl:apply-templates select="root/element[generate-id() = generate-id(
             key('smallLarge', concat(small, '_', Large)[1])]" /> 
```

它用于`generate-id`仅选择每个键值的*第一个元素。* `element`因此，`element`模板将为每个`small`/`Large`组合调用一次，并且该模板可以使用该键来计算和汇总该特定键值的所有时间。

PS你原始XML示例的缩进很糟糕，我花了好几篇阅读才注意到这些`element`元素，起初它看起来像是一个长序列`small`，`Large`和`Time`兄弟姐妹......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T03:17:11.207

**一、XSLT 1.0 解决方案**：

**这是一个较短的解决方案，完全是“推式”:)**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kElem" match="element"
  use="concat(small, '+', Large)"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "element[generate-id()=generate-id(key('kElem',concat(small, '+', Large))[1])]">
  <xsl:variable name="vGroup" select="key('kElem',concat(small, '+', Large))"/>

  <element>
   <xsl:apply-templates/>
   <smallnum><xsl:value-of select="count($vGroup)"/></smallnum>
   <totsmalltime><xsl:value-of select="sum($vGroup/Time)"/></totsmalltime>
  </element>
 </xsl:template>
 <xsl:template match="element|Time"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <element>
        <small>a</small>
        <Large>B</Large>
        <Time>301</Time>
    </element>
    <element>
        <small>a</small>
        <Large>B</Large>
        <Time>322</Time>
    </element>
    <element>
        <small>b</small>
        <Large>A</Large>
        <Time>274</Time>
    </element>
    <element>
        <small>c</small>
        <Large>B</Large>
        <Time>325</Time>
    </element>
    <element>
        <small>b</small>
        <Large>A</Large>
        <Time>301</Time>
    </element>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <element>
      <small>a</small>
      <Large>B</Large>
      <smallnum>2</smallnum>
      <totsmalltime>623</totsmalltime>
   </element>
   <element>
      <small>b</small>
      <Large>A</Large>
      <smallnum>2</smallnum>
      <totsmalltime>575</totsmalltime>
   </element>
   <element>
      <small>c</small>
      <Large>B</Large>
      <smallnum>1</smallnum>
      <totsmalltime>325</totsmalltime>
   </element>
</root> 
```

**说明**：

1.  正确使用和覆盖**[身份规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

2.  正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <root>
   <xsl:for-each-group select="*" group-by="concat(small, '+', Large)">
    <element>
     <xsl:sequence select="small, Large"/>
     <smallnum>
       <xsl:sequence select="count(current-group())"/>
     </smallnum>
     <totsmalltime>
      <xsl:sequence select="sum(current-group()/Time)"/>
     </totsmalltime>
    </element>
   </xsl:for-each-group>
  </root>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
<root>
   <element>
      <small>a</small>
      <Large>B</Large>
      <smallnum>2</smallnum>
      <totsmalltime>623</totsmalltime>
   </element>
   <element>
      <small>b</small>
      <Large>A</Large>
      <smallnum>2</smallnum>
      <totsmalltime>575</totsmalltime>
   </element>
   <element>
      <small>c</small>
      <Large>B</Large>
      <smallnum>1</smallnum>
      <totsmalltime>325</totsmalltime>
   </element>
</root> 
```

**说明**：

1.  正确使用**[`<xsl:for-each-group>`](http://www.w3.org/TR/xslt20/#element-for-each-group)**with`group-by`属性。

2.  正确使用**[`current-group()`](http://www.w3.org/TR/xslt20/#dt-current-group)**功能。****

# c# - 哈希并集，保留组合项中的值

> ID：13039165
> 
> 赞同：0
> 
> 时间：2012-10-23T21:01:16.240
> 
> 标签：c#, linq, hash, aggregate-functions, hashset

我正在寻找有效的方法来组合多个哈希集（基于对象键），同时保留非键值（例如下面的版本）。

```
class MyObject {
    public string Key {get; set;}
    public long Version {get; set;}
    override GetHashCode() { *key* }
    override Equals(...) { *key* }
} 
```

在和中，我需要将哈希集组合到一个主列表中，但也需要所有版本。

我可以通过这种方式合并 3 组：

```
for (var o in List1.Union(List2).Union(List3))
    Console.WriteLine("{0} : {1}", o.Key, o.Version) 
```

这仅显示列表之一（List1 或包含该项目的任何列表）中的版本。

我需要将这些编译成所有版本的结果..

我**希望**我能这样做：

```
for (var o in List1.Union(List2).Union(List3).Select((a,b,c) => new DiffObj(){Key=a.Key,VersionA=a.Version,VersionB=b.Version,VersionC=c.Version}))
    Console.WriteLine("{0} : {1},{2},{3}", o.Key, o.VrsionA, o.VersionB, VersionC); 
```

哈希集有可能吗？

**更新**

重要的是要跟踪哪个列表具有哪个版本（在最终结果中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:08:07.947

听起来你想要一个分组：

```
var grouped = list1.Select(x => new { List=1, Item=x })
                   .Concat(list2.Select(x => new { List=2, Item=x }))
                   .Concat(list3.Select(x => new { List=3, Item=x }))
                   .GroupBy(pair => pair.Item); 
```

然后，您可以遍历每个组，根据`Equals`and将包含相等的值`GetHashCode`，但仍然可以是不同的。该`List`值将指示每个项目来自哪个列表。

# mysql - mysql查询将数据从转储导入现有数据并覆盖新条目

> ID：13039168
> 
> 赞同：2
> 
> 时间：2012-10-23T21:01:18.407
> 
> 标签：mysql, sql, import, mysqldump

我想将新的 DUMP 文件导入到具有相同架构的旧数据库中。如果我正在导入的转储文件记录的记录有任何更改并想添加新记录，我想覆盖。我不想删除要导入的数据库中的现有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:59:10.997

如果你使用 mysqldump 创建转储文件，你可以给它选项 --replace，它会生成一个包含替换语句而不是插入语句的转储文件。当这个转储文件被加载到 MySQL 中时，匹配数据库中主键或唯一键的记录将替换旧的记录，而与现有键不匹配的记录将被插入。

# git - Git 克隆“完成”后会发生什么？

> ID：13039171
> 
> 赞同：3
> 
> 时间：2012-10-23T21:01:25.190
> 
> 标签：git

我有一个运行的大型存储库，我`git gc --aggressive`试图在本地文件系统上克隆。我希望它可以通过硬链接很快完成，但在没有结帐的情况下大约需要 6 分钟才能完成（`git clone -n`）。我看到消息`Cloning into 'repos'... done.`在几秒钟后出现，但随后 Git 又挂在那里 6 分钟，尽管声称它已经“完成”。知道此时它在做什么以及如何加快速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:35:32.797

我不确定你是如何准确克隆它的，但是提供没有协议的源可以大大提高速度：

`git clone -m /path/to/source /path/to/target`

会比

`git clone -m file:///path/to/source /path/to/target`

其他一些可能会有所帮助的线索：

*   您使用的是什么 git 版本，请尝试使用最新版本。
*   您正在执行此操作的文件系统是什么，它是否支持硬链接？
*   您正在复制的目录是否在同一个磁盘/分区上？

# c# - 如何在使用 jquery.MultiFile.js 时扩展最大文件大小以上传和发送（通过电子邮件）文件

> ID：13039173
> 
> 赞同：4
> 
> 时间：2012-10-23T21:01:25.530
> 
> 标签：c#, jquery, asp.net, multifile-uploader

我正在使用来自 jquery 的插件来使用多个文件上传来创建一个发送电子邮件的程序..

检查来源

[http://www.fyneworks.com/jquery/multiple-file-upload/](http://www.fyneworks.com/jquery/multiple-file-upload/)

我在这里下载了，还没修改。。。

我注意到您上传的总大小不能超过 10MB，但是，您不能发送超过 4MB 的单个文件...

我已经被告知你不能发送超过10MB的文件是可以的，但是我的老板只是试图发送一个4.11MB的pdf文件，它没有发送它......

我尝试通过 Visual Studio 发送它（这样我可以调试它并查看问题出在哪里......显然，一旦我附加了文件并单击发送电子邮件......程序不会访问页面加载或按钮，它只是表明连接已被重置...

如果您尝试发送（不是使用 Visual Studio，而是从 Internet 发送）...它会发送此错误

```
Maximum request length exceeded.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Web.HttpException: Maximum request length exceeded.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[HttpException (0x80004005): Maximum request length exceeded.]
   System.Web.HttpRequest.GetEntireRawContent() +9037851
   System.Web.HttpRequest.GetMultipartContent() +68
   System.Web.HttpRequest.FillInFormCollection() +247
   System.Web.HttpRequest.get_Form() +104
   System.Web.HttpRequest.get_HasForm() +9038959
   System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) +97
   System.Web.UI.Page.DeterminePostBackMode() +69
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +135 
```

我已经检查了 jquery 文件，但似乎找不到任何可以解决问题的方法。

你知道问题出在哪里吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T21:11:14.613

修改 httpRuntime 元素的 web.config 设置，如下所示

```
<httpRuntime maxRequestLength="4096" /> 
```

该值以 KB 为单位。默认情况下为 4 MB。

# php - 从 AJAX 调用下载 PHP 输出缓冲区中内置的文件

> ID：13039178
> 
> 赞同：6
> 
> 时间：2012-10-23T21:01:47.713
> 
> 标签：php, jquery, ajax, download, output

我正在尝试在 PHP 中构建一个 CSV 文件，然后从 AJAX 调用中调用 PHP 文件，然后在 AJAX 调用成功后启动 CSV 文件的下载。如果我在服务器上保存 .csv 的物理副本，这很好用，但我想使用`php://ouput`，所以我不必担心物理文件堵塞服务器。是否可以从返回`php://output`AJAX 开始下载？这是我的代码：

HTML/jQuery：

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <script type="text/javascript" language="javascript" src="jquery.js"></script>
        <script type="text/javascript">
             $("#download").live("click", function() {
                var request = $.ajax({
                    dataType: 'html',
                    url: 'php.php',
                    success: function(response) {
                        alert('Finished');
                    }
                })
            })
        </script>
    </head>
    <body>
        <h1 id="download">DOWNLOAD</h1>
    </body>
</html> 
```

PHP：

```
<?php 
    header('Content-type: application/vnd.ms-excel');
    header('Content-disposition: attachment; filename="test.csv"');
    $f = fopen('php://output', 'w');
    fwrite($f,'this,is,a,test');
    fclose($f);
    readfile('php://output');
    return;
?> 
```

我不知道如何让它从我的 AJAX 调用中返回一个文件保存对话框。

这必须很简单，但我似乎找不到任何结合这两个问题的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-11T08:49:15.747

您可以通过 jquery 创建和发送表单来做到这一点（页面未重新加载）：

```
$(document).on('click', '#download', function () {
    var form = $(document.createElement('form'));
    form.attr('action', 'php.php');
    form.attr('method', 'GET');
    form.appendTo(document.body);
    form.submit();
    form.remove();
}); 
```

如果需要，您还可以传递 post 参数：

```
$(document).on('click', '#download', function () {
    var form = $(document.createElement('form'));
    form.attr('action', 'php.php');
    form.attr('method', 'POST');
    var input = $('<input>').attr('type', 'hidden').attr('name', 'x').val('x value');
    form.append(input);
    form.appendTo(document.body);
    form.submit();
    form.remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:48:05.770

以下方法有效，但由于它两次调用 php.php 文件，因此效率极低。有没有人有更好的想法？

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <script type="text/javascript" language="javascript" src="jquery.js"></script>
        <script type="text/javascript">
             $("#download").live("click", function() {
                var request = $.ajax({
                    dataType: 'html',
                    url: 'php.php',
                    success: function(response) {
                        window.open('php.php');
                    }
                })
            })
        </script>
    </head>
    <body>
        <h1 id="download">DOWNLOAD</h1>
    </body>
</html> 
```

无论如何要为这个实例缓存'php.php'，以便它立即加载`window.open('php.php')`，但是当我单击`download`下一步时会重新加载内容？

为什么不`window.open(response)`一样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-15T14:39:34.173

看这个：</p>

```
if (!headers_sent()) {
    // seconds, minutes, hours, days
    $expires = 60*60*24*14;
    header('Pragma: public');
    header('Cache-Control: maxage=' . $expires);
    header('Expires: ' . gmdate('D, d M Y H:i:s', time() + $expires) . ' GMT');
} 
```

注意：这不适用于 POST 请求，仅适用于 GET。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-02T04:49:45.347

要允许文件下载，您可以简单地调用以下代码（例如在按钮的 onclick 上）：

```
window.open(<file-url>); 
```

希望这可以帮助。

# ios - 使用 leftView 时在 UITextField 中移动文本

> ID：13039180
> 
> 赞同：3
> 
> 时间：2012-10-23T21:02:10.227
> 
> 标签：ios, uikit, uitextfield, ios6

目前我正在`leftView`使用图像设置 a 并且我发现图像太靠近文本输入视图（在这种情况下是标准`UITextField`文本输入视图）。有没有办法稍微移动文本输入视图的框架以增加它与`leftView`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:32:03.283

您应该能够修改分配给's的`frame`属性。`UIImageView``UITextField``leftView`

例如，您可能可以执行以下操作：

```
UIImageView *someImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"someImage"]];

// add 5 points to each side of the frame while keeping the same center point
someImageView.frame = CGRectInset(someImageView.frame, -5, 0);

textField.leftViewMode = UITextFieldViewModeAlways;
textField.leftView = someImageView; 
```

请注意，您*可能*还需要修改`UIImageView`' 的`contentMode`属性以获得所需的效果（例如，您可以使用`UIViewContentModeLeft`左对齐或`UIViewContentModeCenter`居中对齐图像）。

# c# - 将 RadioButton 绑定到字典

> ID：13039184
> 
> 赞同：2
> 
> 时间：2012-10-23T21:02:32.300
> 
> 标签：c#, wpf

目前我有一个`RadioButton`绑定到泛型类型的...`TestObject<T>`

在这个对象中，我有一个名为 Value 的属性，它可以是 1 或 0。我有一个名为`MyList`which的属性，`Dictionary<T,String>`它包含以下值：

```
 INT          String
    0            "This is the first option"
    1            "This is the second option" 
```

我在绑定`RadioButton`to时遇到的问题`MyList`。目前我已将 IsCheck ed 绑定到 Value（使用转换器返回真/假）。我最大的问题是字典以及如何将其绑定到`RadioButton`控件，以便我可以`RadioButton`在屏幕上看到 2 个选项。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:38:16.210

为什么不使用 KeyValuePairs 或元组列表而不是字典？

然后您可以使用[ItemsControl](http://www.galasoft.ch/mydotnet/articles/article-2007041201.aspx)，将 RadioButton 放入您的 DataTemplate 并将 ItemsSource 绑定到您的 KeyValuePairs 列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T00:13:12.970

Try filling the radio buttons during runtime.

Here's an example using WPF:

```
 private RadioButton CreateRadioButton(RadioButton rb1, string content, Thickness margin, string name)
    {
        //private RadioButton CreateRadioButton(RadioButton rb1, string content, Thickness margin, string name)
        // We create the objects and then get their properties. We can easily fill a list.
        //MessageBox.Show(rb1.ToString());

        Type type1 = rb1.GetType();
        RadioButton instance = (RadioButton)Activator.CreateInstance(type1);

        //MessageBox.Show(instance.ToString()); // Should be the radiobutton type.
        PropertyInfo Content = instance.GetType().GetProperty("Content", BindingFlags.Public | BindingFlags.Instance);
        PropertyInfo Margin = instance.GetType().GetProperty("Margin", BindingFlags.Public | BindingFlags.Instance);
        PropertyInfo Name = instance.GetType().GetProperty("Name", BindingFlags.Public | BindingFlags.Instance);
        // This is how we set properties in WPF via late-binding.
        this.SetProperty<RadioButton, String>(Content, instance, content);
        this.SetProperty<RadioButton, Thickness>(Margin, instance, margin);
        this.SetProperty<RadioButton, String>(Name, instance, name);

        return instance;
        //PropertyInfo prop = type.GetProperties(rb1);
    }

    // Note: You are going to want to create a List<RadioButton> 
```

# python - 元组python中的最大第二个元素

> ID：13039192
> 
> 赞同：7
> 
> 时间：2012-10-23T21:03:09.883
> 
> 标签：python, list, tuples

> **可能重复：**
> [按嵌套列表中的第二个元素排序或查找最大值。Python](https://stackoverflow.com/questions/4800419/sorting-or-finding-max-value-by-the-second-element-in-a-nested-list-python)

我编写了一个程序，它给了我一个元组列表。我需要用第二个值中的最大数来获取元组。

```
 (840, 32), (841, 3), (842, 4), (843, 4), (844, 6), (845, 6), (846, 12), (847, 6), (848, 10), (849, 4), ..snip... 
```

我需要返回 (840,32) 因为 32 是元组中最高的第二个数字。我怎样才能做到这一点？我尝试了多种方法，但一直卡在这里是完整的代码：

```
 D = {}
    def divisor(n):
        global D
        L = []
        for i in range(1,n+1):
        if n % i == 0:
            L.append(i)
            D[n] = len(L)

    for j in range(1001):
        divisor(j)

    print(D.items()) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-23T21:05:32.243

[`max()`](https://docs.python.org/2/library/functions.html#max)与 一起使用`lambda`：

```
In [22]: lis=[(840, 32), (841, 3), (842, 4), (843, 4), (844, 6), (845, 6), (846, 12), (847, 6), (848, 10), (849, 4)]

In [23]: max(lis, key=lambda x:x[1])
Out[23]: (840, 32) 
```

或[`operator.itemgetter`](https://docs.python.org/2/library/operator.html#operator.itemgetter)：

```
In [24]: import operator 

In [25]: max(lis, key=operator.itemgetter(1))
Out[25]: (840, 32) 
```

# eclipse - 无法为 pydev 收集 python 解释器信息

> ID：13039194
> 
> 赞同：9
> 
> 时间：2012-10-23T21:03:12.657
> 
> 标签：eclipse, pydev

操作系统：Windows 7 x64

蟒蛇：2.7.3

Pydev：2.7.1.2012100913

Eclipse：版本：Juno Service Release 1 Build id：20121004-1855

我无法在 Pydev 中配置 python 解释器。如果我尝试使用自动配置或手动配置，我会得到相同类型的错误输出：

> 无法从系统收集所需的信息。
> 
> 这通常意味着您的解释器不在系统 PATH 中。尝试创建解释器信息时，标准输出中没有输出。错误输出包含：>><<

或者

> 有关详细信息，请参阅错误日志。尝试创建解释器信息时，标准输出中没有输出。错误输出包含：>><<

Python 在我的 PATH 中。这是`interpreterInfo.py`（stdout 和 stderr）的输出：

```
<xml>
<version>2.7</version>
<executable>C:\Python27\python.exe</executable>
<lib path="out">D:\eclipse\plugins\org.python.pydev_2.7.1.2012100913\pysrc</lib>
<lib path="ins">C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\logilab_common-0.58.0-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\logilab_astng-0.23.1-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\pip-1.1-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\pylint-0.25.1-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\rope-0.9.3-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\sphinx-1.1.3-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\docutils-0.9.1-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\jinja2-2.6-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\pygments-1.5-py2.7.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\lxml-2.2.8-py2.7-win32.egg</lib>
<lib path="ins">C:\Python27\lib\site-packages\spyder-2.0.10-py2.7.egg</lib>
<lib path="out">C:\Windows\system32\python27.zip</lib>
<lib path="ins">C:\Python27\DLLs</lib>
<lib path="ins">C:\Python27\lib</lib>
<lib path="ins">C:\Python27\lib\plat-win</lib>
<lib path="ins">C:\Python27\lib\lib-tk</lib>
<lib path="ins">C:\Python27</lib>
<lib path="ins">C:\Python27\lib\site-packages</lib>
<lib path="ins">C:\Python27\lib\site-packages\PIL</lib>
<lib path="ins">C:\Python27\lib\site-packages\win32</lib>
<lib path="ins">C:\Python27\lib\site-packages\win32\lib</lib>
<lib path="ins">C:\Python27\lib\site-packages\Pythonwin</lib>
<lib path="ins">C:\Python27\lib\site-packages\wx-2.8-msw-ansi</lib>
<forced_lib>__builtin__</forced_lib>
<forced_lib>__main__</forced_lib>
<forced_lib>_ast</forced_lib>
<forced_lib>_bisect</forced_lib>
<forced_lib>_codecs</forced_lib>
<forced_lib>_codecs_cn</forced_lib>
<forced_lib>_codecs_hk</forced_lib>
<forced_lib>_codecs_iso2022</forced_lib>
<forced_lib>_codecs_jp</forced_lib>
<forced_lib>_codecs_kr</forced_lib>
<forced_lib>_codecs_tw</forced_lib>
<forced_lib>_collections</forced_lib>
<forced_lib>_csv</forced_lib>
<forced_lib>_functools</forced_lib>
<forced_lib>_heapq</forced_lib>
<forced_lib>_hotshot</forced_lib>
<forced_lib>_io</forced_lib>
<forced_lib>_json</forced_lib>
<forced_lib>_locale</forced_lib>
<forced_lib>_lsprof</forced_lib>
<forced_lib>_md5</forced_lib>
<forced_lib>_multibytecodec</forced_lib>
<forced_lib>_random</forced_lib>
<forced_lib>_sha</forced_lib>
<forced_lib>_sha256</forced_lib>
<forced_lib>_sha512</forced_lib>
<forced_lib>_sre</forced_lib>
<forced_lib>_struct</forced_lib>
<forced_lib>_subprocess</forced_lib>
<forced_lib>_symtable</forced_lib>
<forced_lib>_warnings</forced_lib>
<forced_lib>_weakref</forced_lib>
<forced_lib>_winreg</forced_lib>
<forced_lib>array</forced_lib>
<forced_lib>audioop</forced_lib>
<forced_lib>binascii</forced_lib>
<forced_lib>cPickle</forced_lib>
<forced_lib>cStringIO</forced_lib>
<forced_lib>cmath</forced_lib>
<forced_lib>datetime</forced_lib>
<forced_lib>errno</forced_lib>
<forced_lib>exceptions</forced_lib>
<forced_lib>future_builtins</forced_lib>
<forced_lib>gc</forced_lib>
<forced_lib>imageop</forced_lib>
<forced_lib>imp</forced_lib>
<forced_lib>itertools</forced_lib>
<forced_lib>marshal</forced_lib>
<forced_lib>math</forced_lib>
<forced_lib>mmap</forced_lib>
<forced_lib>msvcrt</forced_lib>
<forced_lib>nt</forced_lib>
<forced_lib>operator</forced_lib>
<forced_lib>parser</forced_lib>
<forced_lib>signal</forced_lib>
<forced_lib>strop</forced_lib>
<forced_lib>sys</forced_lib>
<forced_lib>thread</forced_lib>
<forced_lib>time</forced_lib>
<forced_lib>xxsubtype</forced_lib>
<forced_lib>zipimport</forced_lib>
<forced_lib>zlib</forced_lib>
</xml>Traceback (most recent call last):
  File "D:\eclipse\plugins\org.python.pydev_2.7.1.2012100913\pysrc\interpreterInfo.py", line 199, in <module>
    raise RuntimeError('Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output).')
RuntimeError: Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output). 
```

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:46:14.480

我没想到会出现这样的问题：（PyDev 在 Indigo 下的 27 台 64 位 PC 上工作；我在 32 位 PC 上在 Juno 下测试了 The Same PyDev plus Python 并成功；然后在 64 位 PC 上进行了第一次尝试错误......我根本没有使用“autoconfig”。当它发生时，我正在执行“File>New>PyDevProject> ...PrjectName...click_here_to_configure_an_interpreter_not_listed”这一行。”

短暂的谷歌搜索后，运气来了:-)

[http://pydev.org/manual_101_interpreter.html](http://pydev.org/manual_101_interpreter.html) 帮助我解决了这个问题，只使用了同一件事的替代路径。{1\. 转到：窗口 > 首选项 > PyDev > 解释器 - (Python/Jython/IronPython)。...}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T03:52:22.730

我正在运行 Python 3，因此我必须进行这些更改才能将 python.exe 作为我的解释器。文件：

> C:\EasyEclipse-for-LAMP-1.2.2.2\extensions\pydev-1.3.3\eclipse\plugins\org.python.pydev_1.3.3\PySrc\interpreterInfo.py

将所有出现的“<code>print ...</code>”编辑为“</p>

```
print(…) 
```

” （... 是正在打印的任何内容），所以用引号括起来。

注释掉第 16 行，因为`True`和`False`被认为是 Python 3 中的关键字。保存，您应该能够成功设置`C:\Python32\python.exe`为解释器。我保持检查默认文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T15:05:06.727

我有一个类似的问题。我无法手动或自动配置。我通过重新安装 python 2.7 解决了这个问题。重新安装后自动配置工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-03T15:29:36.140

在将我的 python 2.7 (64bits) 目录直接复制到新计算机后，我在 Windows 上遇到了这个问题。自动和手动配置都不起作用，我遇到了和你一样的错误。

我回到原来的安装，去了 C:\Windows\System32（你也可以检查 SysWOW64，但我不确定 Python 是否使用它）并获取：

*   python27.dll
*   pythoncom27.dll
*   pythoncomloader27.dll
*   pywintypes27.dll

我将它们复制到新计算机的 System32 中，pydev 的自动配置能够从环境变量中找到我的 python 解释器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-04T12:07:00.103

1.  在您的机器上安装与操作系统兼容的 python 可执行文件。[在安装过程中记得勾选“将 Python 3.8 添加到PATH](https://i.stack.imgur.com/v65GI.png)。（如图所示）

2.  在您的机器中成功安装 Python 后，在 Eclipse 中打开 Window -> Preference -> Pydev -> Interpreter -> Python Interpreters 菜单。（假设您已经在 Eclipse 中安装了 PyDev 插件）。

3.  接下来在 PATH 选项中首先选择 Config。[（如图](https://i.stack.imgur.com/qOheV.png)所示）

您现在可以在 eclipse 中看到 Python 解释器信息。[（如图](https://i.stack.imgur.com/d6vQZ.png)所示）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-22T17:22:40.630

我有一个类似的问题。尝试运行“python --version”以查看 python 在您的系统中执行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-22T16:21:31.240

请确保您安装了与您的系统操作系统版本相对应的正确版本的python [32 或 64 位]

# python - Python 3.2 txt 中不区分大小写

> ID：13039195
> 
> 赞同：1
> 
> 时间：2012-10-23T21:03:15.670
> 
> 标签：python, case, case-insensitive

```
x = input("Please enter the character you wish to search for:")

file = open("C:\\Users\\Murphy\\Desktop\\names.txt", "r")

a_string = file.read().count(x)

print(a_string) 
```

该代码工作正常，但我不知道如何使字符搜索不区分大小写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:05:20.997

查看`.lower`字符串方法。您可以确保`x`小写以及`file.read()`使用它的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:05:59.757

`a_string = file.read().lower().count(x.lower())`

# visual-studio-2010 - 为什么当我在 Visual Studio 的选项中编辑 VSCommands.FindResults.Match 时颜色没有改变？

> ID：13039197
> 
> 赞同：1
> 
> 时间：2012-10-23T21:03:25.540
> 
> 标签：visual-studio-2010

我在 Visual Studio 中转到工具 -> 选项 -> 环境 -> 字体和颜色 -> VSCommands.FindResults.Match 并更改项目前景和项目背景颜色，但它们从未显示在我的查找结果输出窗口中。我已经关闭了 Visual Studio，重新启动了我的计算机等，但它没有改变。任何人都知道如何强制这种改变发生？

# javascript - 在 div 中调用 javascript 函数

> ID：13039198
> 
> 赞同：6
> 
> 时间：2012-10-23T21:03:31.833
> 
> 标签：javascript, call

我想创建一个网页，其中包含多个 div，每个 div 都包含具有不同实现的相同绘制函数（如通用接口）。加载页面后，我想遍历所有 div 并一个接一个地调用每个绘图函数。

到目前为止，我的页面如下所示：

```
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
</head>
<body>

  <script type='text/javascript'>
    $( document ).ready( function() {
      // Draw all slots
      $('div.slot').each(function(i, d) {
        console.log('slot found: ' + d.id);
        // d.draw() does not work
        draw();
      });
    });
  </script>

  <div class="slot" id="slot1">
    <script type='text/javascript'>
      function draw() {
        console.log('Here we draw a circle');
      };
    </script>
  </div>

  <div class="slot" id="slot2">
    <script type='text/javascript'>
      function draw() {
        console.log('Here we do something totally different and draw a rectangle');
      };
    </script>
  </div>

</body>
</html> 
```

不幸的是，我不知道如何调用所选 div“d”的绘制函数。现在它只调用最后定义的绘图函数。

## 更新：

请注意，我不能将不同的绘制方法组合成一个，这样会得到一个类似形状的参数。绘制方法将完全相互独立。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:17:07.453

你可以这样称呼它

**HTML：**

```
<div class="slot" id="slot1">Draw1</div>
<div class="slot" id="slot2">Draw2</div> 
```

**JS：**

```
function draw()
{
    console.log('Drawed! '+$(this).attr('id'));
}

$(document).ready( function() {
    $('div.slot').each(function(i, d) {
        console.log('slot found: ' + d.id);
        draw.call($(this));
    });
}); 
```

[**一个例子**](http://jsfiddle.net/UrAUe/2/)。​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:27:06.287

为什么要在`div`s 中定义脚本？

在一个脚本块中完成所有逻辑：

```
<head>      
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
</head>
<body>

  <script type='text/javascript'>
    $( document ).ready( function() {
      // Draw all slots
      $('div.slot').each(function(i, d) {
        console.log('slot found: ' + d.id);
        // d.draw() does not work
        draw();
      });
    });

    function draw(behavior) {
        console.log(behavior);
    }
  </script>

  <div class="slot" id="slot1" data-behavior="drew 1">
  </div>

  <div class="slot" id="slot2" data-behavior="drew 2">
  </div>

</body>
</html> 
```

如果你想做一些更复杂的事情，你应该考虑构建一个面向对象的 javascript 应用程序，每个块的功能都派生自一个类“slot”。

[https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T15:24:22.023

```
<html>
<head>

<script>
    $(document).ready(
            function() {
                $('#show').call(callfun());
            });
</script>
</head>
<body>
<h:form>
  <div id="show" align="center">
    <script>
    function callfun(){
    var data = "hi";
   alert(data);
  }
  </script></div>
    </h:form>
  </body>
  </html> 
```

我认为它可能会奏效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-03T14:57:31.380

在这种情况下，我发现实现“真正的 OOP”的最简单方法是在文档级别调度所有事件：

创建一个简单的对象并将该对象加载到 main 和视图中，例如：

```
var events = {someCustomEventFromMain:'someCustomEventFromMain', someCustomEventFromView:'someCustomEventFromView'} 
```

现在您可以使用 jQuery 触发文档上的事件，例如

```
$(document).trigger(events.someCustomEventFromMain, somedata); 
```

您可以从任何视图或 div 或其他地方收听

```
$(document).on(events.someCustomEventFromMain, function(__e, __data){
      //___e is the event emitted from __e.target
      //__data is the data object you wish to pass with the event
      //do something when event occurs

}); 
```

因此，如果每个下标都在文档级别侦听某个事件，在您的情况下为“drawEvent”，那应该可以解决问题。您甚至可以在事件的数据中传递参数，例如“圆圈”。希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T21:08:00.770

发生这种情况的原因是因为您不断覆盖绘图功能。为什么没有一个脚本页面，在其中保存一组指向正确函数的函数指针，如下所示：

```
var array = (draw1, draw2, draw3, ...);

function draw1()
{
    //do your thing on div1
}

...

function drawn()
{
    //do your n thing on divn
} 
```

现在，对于您的第一个 div，您需要调用位于数组索引 1 处的 draw1。

HTML：

```
<div id="draw1">

</div>
....
<div id="drawn"> 
```

你怎么看。注意语法尚未经过测试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-07T05:52:43.580

# 问题

`window.draw()`每次重新定义它时都会覆盖它。您要么需要为每个函数命名（即，将其附加到一个（否则为空的）对象），要么为每个函数指定一个不同的名称。Javascript 中没有“div-scope”；）

# 解决方案

您可以根据`div`'s命名每个函数，并使用调用它的语法`id`动态调用它。`object["methodName"]()`

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
</head>
<body>

  <script type='text/javascript'>
    $( document ).ready( function() {
      // Draw all slots
      $('div.slot').each(function(i, d) {
        console.log('slot found: ' + d.id);
        // d.draw() does not work
        window[d.id];
      });
    });
  </script>

  <div class="slot" id="slot1">
    <script type='text/javascript'>
      function slot1() {
        console.log('Here we draw a circle');
      };
    </script>
  </div>

  <div class="slot" id="slot2">
    <script type='text/javascript'>
      function slot2() {
        console.log('Here we do something totally different and draw a rectangle');
      };
    </script>
  </div>

</body>
</html>
```

> [http://jsbin.com/mogeluzicu/1/edit?html,console](http://jsbin.com/mogeluzicu/1/edit?html,console)

# ajax - 如何在公共视图（自动加载页面）上使 wp 插件自动刷新

> ID：13039199
> 
> 赞同：1
> 
> 时间：2012-10-23T21:03:34.780
> 
> 标签：ajax, wordpress, page-refresh, partial-page-refresh

首先不得不说，几乎每次搜索技术解决方案时..搜索引擎都会将我引导到这个站点。我承认我只是通过寻找答案在这里学到了很多东西。

但也不得不说不是编码员..所以这里根本不懂;）

好的，问题：

想要在 wp admin 中更新 wordpress 表格或日历。这些更改应该会在公共方面自动更新，并且或多或少会立即更新（大约几秒钟就可以了）。

我找到了有关操作 header.php 的解决方案，我发现了一些我发现的 ajax 插件 - 太多了 - 关于如何在 wp 中实现 ajax 的信息

可悲的是..这些都不能帮助我完成这些插件大多要么不起作用，要么已经过时，要么需要无数的文件编辑。操纵header.php 似乎很奇怪.. 因为我不想循环刷新整个页面、发布等.. 而是只更新表格或日历数据。

因此，也许你们中的任何编码人员都知道一些事情，例如，一旦在 wp admin 中编辑了数据，就可以获取插件“及时的多合一事件日历”来更新日历的公共可见部分？

非常感谢任何方向的指针来解决这个问题。

PS：你觉得像“ajaxify Everything”这样的插件怎么样？不知道这是否真的要走的路..

再次感谢您的帮助、时间和贡献！！

### 更新

附加问题：我现在找到了这样的插件，让我选择要“ajaxify”的部分。

这样的插件会问我一个特定的函数名称。

现在，我从哪里开始收集这些信息？

以下是 wordpress admin 中插件上下文的说明

> 为您的函数生成 Ajaxized DIV
> 
> Ajaxize 将允许您对站点上的几乎所有 php 函数进行 ajaxize。
> 
> 它可以是一个插件，一个你写的函数，甚至是一个核心的 wordpress 函数。
> 
> 目前有一些（明显或不太明显的）限制：
> 
> 函数必须返回有效的 HTML - 这将在 php 中调用并通过 Ajax 调用返回 函数不能接受任何参数（至少目前）
> 
> 在下方输入函数名称。
> 
> 函数名称：**xxx 输入字段 xxx 这里放什么？xxx**
> 
> 生成的 div 可以插入到网站上的任何页面/帖子中，并将自动对函数的调用进行 ajaxize。
> 
> 请确保您输入了有效的函数名，该函数不需要任何参数，并且返回有效的 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:58:56.717

在您的上下文中，您希望在 WP_Admin 发生更改时自动刷新日历；但你不能完全做到这一点。

您可以编写一个 Js 方法，该方法将在页面加载时检查日历的最新修改时间，并将其存储在 Var 中。在你将拥有一个常量（每 10 秒）Js“守护程序”之后，它将获取日历的最新修改时间并将其与库存的 Var 进行比较；如果更改，则重新加载日历。

PS：Ajaxify 一切都不是真正的解决方案，因为您需要开发 Ajaxify 并为禁用 Javascript 的人编写代码。

希望能帮助到你

# installshield - InstallScript：ChangeDirectory() 调用仅在 SILENTMODE 中失败

> ID：13039203
> 
> 赞同：1
> 
> 时间：2012-10-23T21:03:41.863
> 
> 标签：installshield, installscript

我有以下测试[InstallScript](http://helpnet.installshield.com/installshield16helplib/mergedProjects/installshield16langref/LangrefHome.htm) InstallShield 代码，它在正常交互模式下正确执行，但`setup.exe /s`在调用涉及任何实际目录深度的[ChangeDirectory时崩溃（静默）模式。](http://helpnet.installshield.com/installshield16helplib/mergedProjects/installshield16langref/LangrefChangeDirectory.htm)

```
//Note: "C:" ^ "temp" resolves to "C:\temp", but it never successfully 
//executes when run silent mode. It works fine in interactive mode, however.
ChangeDirectory("C:" ^ "temp");
//No subsequent code gets executed at this point in silent mode 
```

我在具有管理员权限的命令窗口中的 Windows 2008 x64 服务器上运行它。该`c:\temp`目录存在，并且`EVERYONE`已被授予对其的完全控制权限。

退出码是`-2147213312`，`0x80042000`在对应的[错误指南中](http://kb.flexerasoftware.com/doc/Helpnet/installshield12helplib/InstallScriptSetup-ExeErrors.htm)

> 由于最终用户取消了安装，安装使用 abort 关键字退出。

这里可能发生了什么？我尝试使用`try/catch`语法来检查错误，但在这种情况下，catch 块永远不会执行，似乎断言没有错误，而是被`abort`调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:45:05.127

Installscript 引擎在幕后做了很多事情。它不断更改工作目录。因此，使用 ChangeDirectory() 不是很可靠。对所有可执行文件和其他文件使用完整路径肯定会更好。LaunchAppAndWait() 也有这个问题。所以必须使用完整路径。

此外，ChangeDirectory() 的 Installshield 帮助清楚地提到了以下内容：

> 在脚本中指定文件时，请始终指定完整路径（使用适当的 InstallShield 系统变量，例如 SRCDIR），而不是依赖于具有适当值的当前文件夹。该脚本在内部执行可以更改当前文件夹的代码，因此它的值可能不是您所期望的。

问题是，结果并不可靠。他们可能会工作，也可能不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:23:39.670

当我们记录的 .iss 文件在 .iss 响应文件中缺少条目时，我们会收到此错误代码。

有关更多详细信息，请参阅[创建响应文件](http://kb.flexerasoftware.com/doc/Helpnet/installshield12helplib/CreatetheResponseFile.htm)。

记录 installscript 设置并没有给我们太多信息，因此我们编写了一些函数来写入自定义日志文件，这对我们有很大帮助。

# .net - SerialPorts 列表的相同 DataReceived 事件处理程序

> ID：13039205
> 
> 赞同：0
> 
> 时间：2012-10-23T21:03:44.000
> 
> 标签：.net, winforms

我正在开发一个 winforms 应用程序。我有一个串行端口列表，每个端口都在不同的 COM 端口上侦听。

我计划为所有 SerialPorts 添加一个唯一的事件处理程序 SerialPort.DataReceived。这是一个好的设计吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:01:28.243

嗯，当然，这没有错。而且通常非常有用，因为 DataReceived 事件处理程序应该尝试接收整个“数据包”，然后再将其交给处理数据的其他代码。特别是如果您使用 BeginInvoke 在 UI 线程上运行代码。不同的设备通常有不同的协议，因此在它们各自的事件处理程序中需要不同的代码。或不同的缓冲区来存储部分响应。

或者不是，所有设备都运行相同并且共享相同的事件处理程序代码将起作用。您需要将*sender*参数转换为 SerialPort 以进行正确的 Read 调用。在您的问题中，几乎没有什么可以猜测的适当方式。

# entity-framework - 实体框架和日期+时间算法

> ID：13039207
> 
> 赞同：2
> 
> 时间：2012-10-23T21:03:47.443
> 
> 标签：entity-framework, sql-server-2005, entity-framework-5

我们有一个 SQL Server 2005 表，其中包含一个日期列和一个单独的时间列。当我尝试查询此表时，我想做与以下 SQL 等效的操作：

`where Date + Time > @Something`

*一些背景信息 - 日期存储为具有 00:00 时间组件的日期，时间存储为具有 1900-01-01 日期组件的时间 - 这意味着在 SQL 中将两者相加可以获得完整的 DateTime .*

我知道上面有索引含义，但这不是问题所在。

**你如何在 linq to entity 中做到这一点？**

其他一些需要注意的事项：

*   更改数据库架构是不可能的。
*   这是 SQL 2005，因此没有 Time 数据类型，也没有从 EF 返回 TimeSpan（我尝试更改 EF 模型以尝试将其转换为 TimeSpan，但没有骰子）
*   我想尝试坚持纯 Linq-to-Entities，而不是走 E-SQL / 存储过程 / ExecuteQuery 路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:08:10.713

非常蹩脚的想法，但是：

```
var date = DateTime.Parse("2012-10-23");
var time = DateTime.Parse("1900-01-01 09:00:00);
var something = date + time;

[...] where Date + Time > something; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:18:46.307

实体框架（版本 > 4）具有 EntityFunctions 类。因此，您可以执行以下操作：

```
... where EntityFunctions.CreateDateTime(date.Year, date.Month, date.Day, 
             time.Hour, time.Minute, time.Second) < DateTime.Now 
```

或者你可以用老式的方式来做：

```
... where date.Date < DateTime.Now.Date || (date.Date == DateTime.Now.Date && time.Time < DateTime.Now) 
```

# apache - 如何更改我的 .htaccess 文件以使其忽略某些文件夹？

> ID：13039211
> 
> 赞同：0
> 
> 时间：2012-10-23T21:04:04.937
> 
> 标签：apache, .htaccess, smartphone

我对此进行了几次尝试，但未能找到正确的语法。任何帮助将不胜感激。我的 .htaccess 文件如下所示。到目前为止，它一直在做它应该做的事情：将智能手机等上的所有访问者重定向到我的网站的移动版本。但是现在我需要添加一个命令，使我的文件管理器中的某些文件夹免受 .htaccess 的影响。我的代码需要添加什么？

```
RewriteEngine on
RewriteBase /

# Check if this is the noredirect query string
RewriteCond %{QUERY_STRING} (^|&)m=0(&|$)
# Set a cookie, and skip the next rule
RewriteRule ^ - [CO=mredir:0:www.mconchicago.com]

RewriteCond %{HTTP:x-wap-profile} !^$ [OR]
RewriteCond %{HTTP:Profile}       !^$ [OR]
RewriteCond %{HTTP_USER_AGENT} "acs|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT}  "maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3cs|wap-|wapa|wapi" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "wapp|wapr|webc|winw|winw|xda|xda-" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "up.browser|up.link|windowssce|iemobile|mini|mmp" [NC,OR]
RewriteCond %{HTTP_USER_AGENT} "symbian|midp|wap|phone|pocket|mobile|pda|psp" [NC]
RewriteCond %{HTTP_USER_AGENT} !macintosh [NC]

# Check if we're not already on the mobile site
RewriteCond %{HTTP_HOST}          !^m\.
# Can not read and write cookie in same request, must duplicate condition
RewriteCond %{QUERY_STRING} !(^|&)m=0(&|$) 

# Check to make sure we haven't set the cookie before
RewriteCond %{HTTP_COOKIE}        !^.*mredir=0.*$ [NC]

# Now redirect to the mobile site
RewriteRule ^ http://m.mconchicago.com [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T02:18:10.630

几个月来我一直试图弄清楚这一点。今晚的奥德赛终于结束了。我更改了此部分：

```
RewriteEngine on
RewriteBase / 
```

像这样阅读：

```
RewriteEngine on
RewriteRule ^family($|/) - [L]
RewriteRule ^photos($|/) - [L]
RewriteRule ^info($|/) - [L]
RewriteBase / 
```

现在它就像一个魅力。“family”、“photos”和“info”是不受 .htaccess 影响的文件夹。希望此信息将为其他人节省时间。

# c++ - 使用 P2P 的 C++ 和 VoIP

> ID：13039217
> 
> 赞同：5
> 
> 时间：2012-10-23T21:04:34.720
> 
> 标签：c++, windows, qt, p2p, voip

我目前正在计划我的最后一年的项目，我希望创建一个支持 IP 语音和基于文本的聊天的应用程序（尽管不是“下一个 skype”）。我只是真的想要一种易于使用的轻量级方式来完成 voIP 部分，并且它不需要扩展数量的功能，至少不需要一开始。

我想要的功能之一是它不通过服务器，但那是因为我不想在应用程序发布后维护服务器。因此，如果可以将您的 IP 提供给某人并且他们加入使用它会更好。

我打算将 Qt 框架用于 GUI，尽管它可以更改，语言 (C++) 也可以更改，所以没有什么是一成不变的。该软件将在 Windows 上运行。

我看过 H.323、sip 和其他一些开源，但似乎很难进入，我无法弄清楚他们是否做了我需要他们做的事情。

我应该研究的任何开源库都可以部分满足我的需求吗？我错过了什么来源？我对 voIP 世界完全陌生，可以朝着正确的方向推动。同样，如果有一种语言以简单的方式执行此操作，我可以切换，因为我目前处于计划阶段。感谢我得到的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:14:30.583

首先，几个月前我为我的公司实施了类似的东西。

得到教训：

```
1\. you can't just pass IPs around and expect the users to like that over skype.
   Solution:
      a. You will need your own server with the necessary ports forwarded. You will have to use some sort of firewall hole punching algorithm(take a look at UDP hole punching).

2\. Using existing VoIP library is always better. Downside? You can't write proprietary code using opensource library. Hence you will need to learn H.323 and RTCP/RTP protocol.

3\. You will need to write echo reduction algorithms for voice.

4\. COMPRESS your audio data before sending it to another computer. PCM data can and will clog your network, delaying sound and fuzzing up everything in the process.
Use aLaw and uLaw compression schemes.

5\. Make sure you take care of all the error conditions. Multimedia over network can be tricky if not really hard to implement. 

6\. DONT USE QT. Use a platform specific framework like .NET and libraries that deal with sound (NAudio). 
```

我认为这将总结您在深入研究 VoIP 编程艺术之前首先需要解决的问题。

对于您的问题，您的问题要小得多。

```
1\. You don't need echo reduction algorithms IF you use headsets.
2\. You don't need to write hole punching algorithms if you're OK with passing IPs around. Take a look at NAT traversal(UPnP?) if the data is suppose to go on a network and to a computer that isn't on your LAN.

FLOW:
COMPUTER1->DATABUFFER->COMPRESSuLaw/aLaw->NETWORK->DECOMPRESSuLaw/aLaw->OTHERCOMPUTER
and vice versa. 
```

祝你好运 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:45:03.177

我会推荐 PJSIP。 [http://www.pjsip.org/](http://www.pjsip.org/)

PJSIP 将为您处理 SIP*和*音频。（它也有 STUN！）

我将不得不不同意另一个答案，请*使用*QT。没有理由在这里“原生”。PJSIP 不仅可以为您处理音频，而且还有许多其他跨平台音频库。

关于传递 IP……如果您打算在 LAN 上使用它，我建议您使用 UDP 广播来发现其他用户（并在 UI 中有一个位置来定义您的用户名，以便最终用户可以识别彼此）。这在 QT 中很容易实现。

# ios - 识别 iOS 文件包（在 Simulator 和 Finder 中）

> ID：13039218
> 
> 赞同：5
> 
> 时间：2012-10-23T21:04:37.497
> 
> 标签：ios, finder, uti

我正在尝试将文件包用于定义 UTI 类型的 iOS 应用程序。在谷歌搜索并查看 Xcode.plist 中的条目后，我尝试了一些方法，但一直遇到问题。我的应用程序创建了一些测试文档，然后尝试使用我的自定义 UTI 读取这些文件。

如果我没有指定“LSItemContentTypes”，那么 finder 会正确地将它们视为包。但随后 mdls 将“dyn.longstring”作为 kMDItemContentType 返回。

如果我确实指定了“LSItemContentTypes”，那么 kMDItemContentType 是正确的。但 finder 将其视为一个文件夹。

在这两种情况下，我通过的 UTI

```
[url getResourceValue:&UTI
forKey:NSURLTypeIdentifierKey
error:nil]; 
```

是不正确的。它要么返回“dyn.longstring”，要么返回“public.folder”。由于不正确的 UTI，我的应用程序不会加载这些文件。我可以重写它，但想以正确的方式使用 UTI。

我将 iOS 文件包定义为文档类型并导出 UTI 类型，如下所示。我在看什么？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>tdp</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>MyFilePackage</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>reverse.dns.ios.package</string>
        </array>
        <key>CFBundleTypeIconFile</key>
        <string>Default</string>
        <key>LSIsAppleDefaultForType</key>
        <true/>
        <key>LSTypeIsPackage</key>
        <true/>
    </dict>
</array>
</plist>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename.extension</key>
            <array>
                <string>tdp</string>
            </array>
        </dict>
        <key>UTTypeIdentifier</key>
        <string>reverse.dns.ios.package</string>
        <key>UTTypeConformsTo</key>
        <array>
            <string>com.apple.package</string>
            <string>public.composite-content</string>
        </array>
    </dict>
</array>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-22T04:24:36.950

遇到了类似的问题，包括 UTI 显示为“dyn.longstring”。似乎修复是删除 CFBundleTypeExtensions 属性（已弃用）。info.plist 中的这种组合对我有用：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>My App Name</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>my.content.type</string>
        </array>
        <key>LSTypeIsPackage</key>
        <true/>
    </dict>
</array>
<key>UTExportedTypeDeclarations</key>
<array>
    <dict>
        <key>UTTypeConformsTo</key>
        <array>
            <string>com.apple.package</string>
            <string>public.composite-​content</string>
        </array>
        <key>UTTypeDescription</key>
        <string>My App Name</string>
        <key>UTTypeIdentifier</key>
        <string>my.content.type</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <string>myextension</string>
        </dict>
    </dict>
</array> 
```

# mysql - MySQL：更新时出现重复错误

> ID：13039220
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:04:52.010
> 
> 标签：mysql, sql-update

我有一个运行此更新的脚本：

```
UPDATE `Cq_Item` 
SET     `rfq_item_id` = '9',
    `value` = 'No Bid',
    `datetime_created` = '2012-10-23T20:54:42+00:00',
    `id` = '101' 
WHERE `id` = '101' 
```

针对这张表：

```
CREATE TABLE IF NOT EXISTS `cq_item` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `rfq_item_id` mediumint(8) unsigned NOT NULL,
  `product_id_quoted` mediumint(8) unsigned DEFAULT NULL,
  `quantity` mediumint(6) unsigned DEFAULT '0',
  `value` float(10,4) NOT NULL,
  `datetime_created` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `rfq_item_id` (`rfq_item_id`,`product_id_quoted`,`quantity`,`value`),
  KEY `product_id` (`product_id_quoted`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=102 ; 
```

它抛出了这个错误：

> 1062 - 键 'rfq_item_id' 的重复条目 '9-321742-1-0.0000'

诚然，我不是 SQL 专家，但在 an 上抛出一个欺骗错误对`update`我来说似乎不太直观。
我理解为什么会在 an 上抛出这样的错误`INSERT`，但是我可以使用一些帮助来弄清楚我做错了什么来解决这个`UPDATE`问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:17:20.230

更新实际上执行两个单独的操作（当然，当条件满足时），一个删除，然后一个插入。您可能需要确保您的 UPDATE 不会导致 id = 101 的行违反您已经为另一行设置的唯一键。

所以说在尝试更新之前你有两行这样

```
id   |   rfq_item_id |   product_id_quoted  | quantity | value   | datetime_creates
100  |   9           |   9                  |    1     | 0.0000  | <some datetime>
101  |   10          |   9                  |    1     | 0.0000  | <some datetime> 
```

您的 UPDATE 会抛出您在执行时看到的确切错误，因为 rfq_item_id/product_id_quoted/quantity/value 唯一键是相同的。

我猜您的问题与尝试在`value`定义为浮点数的字段上设置字符串值“No Bid”有关。因此，您将`0.0000`在更新中获得一个值。

同样如对原始问题的评论中所述，通常认为尝试“设置”您在 UPDATE 语句的 WHERE 子句中使用的主键的值是不好的 SQL 做法。除非确实有理由在更新过程中更改主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:12:16.170

您的表结构说 rfq_item_id 是唯一键。并且您尝试在更新查询中设置的值已经在表中。因此，它不允许您使用`rfq_item_id`= '9' 更新查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:12:38.633

根据您的表描述，您有`unique key`：

```
UNIQUE KEY `rfq_item_id` (`rfq_item_id`,`product_id_quoted`,`quantity`,`value`) 
```

您正在尝试`UPDATE`使用已经满足您的标准的值来执行`UNIQUE KEY`.

您已经有一条记录，`rfq_item_id = '9'`并且`value = 'No Bid'`唯一键中其他两列的值也已经与中的值匹配`id = '101'`

# asp.net-mvc - 如何使用 ViewData 值动态填充 MVC 视图中的锚标记？

> ID：13039224
> 
> 赞同：1
> 
> 时间：2012-10-23T21:05:15.587
> 
> 标签：asp.net-mvc

有没有办法使用 ViewBag 值在视图中填充锚标记的`href`值？我想要做的是这样的：

看法：

```
<a href="<%= ViewBag.MyURL %>" title="My URL">"<%= ViewBag.MyURL %>"</a> 
```

控制器：

```
 public ActionResult Index()
    {
        ViewBag.MyURL = "http://www.Google.com";
        return View();
    } 
```

我该如何正确地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T14:22:33.837

这是使用 MVC 和 Razor 动态更新 href 锚标记的方法：

控制器（如果需要，也可以在视图中的代码块中设置）：

```
ViewBag.MyURL = "http://www.Google.com"; 
```

看法：

```
<a href="@Html.Raw(Html.AttributeEncode(ViewBag.MyURL))" title="@Html.Raw(Html.AttributeEncode(ViewBag.MyURL))"> @Html.Raw(Html.AttributeEncode(ViewBag.MyURL))</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T04:12:04.260

如果控制器中有以下内容：

```
ViewBag.myURL = "http://www.my-url.com"; 
```

然后在您的视图中：

```
@Html.Raw("<a href=\"" + ViewBag.MyURL + "\" title=\"" + ViewBag.MyURL + "\">" + ViewBag.MyURL + "</a>") 
```

Html.Action 帮助器通常在发布到同一网站内的另一个控制器和/或操作时使用。Html.Raw 非常适合建立到外部网站的链接。

# c# - 更新 WebClip：请求执行失败

> ID：13039227
> 
> 赞同：0
> 
> 时间：2012-10-23T21:05:24.150
> 
> 标签：c#, .net, google-email-settings-api

我是 API 新手！我正在尝试构建一些控制台应用程序来为我的域自动设置电子邮件！我将我们的域添加到谷歌应用程序并将其与谷歌服务器链接！（所以我可以接收和发送邮件）

我试着做一个想法：使用此代码禁用 WebClip！

```
class Program
{
    static void Main(string[] args)
    {
        GoogleMailSettingsService service = new GoogleMailSettingsService("mydomain.com", "your-apps");
        service.setUserCredentials("alaeddine.gallas@mydomain.com", "********");
        try
        {
            service.UpdateWebclip("alaeddine.gallas", "false");
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        Console.ReadLine();
    }
} 
```

控制台输出：请求执行失败：[https ://apps-apis.google.com/a/feeds/emailsettings/2.0/mydomain.com/alaeddine.gallas/webclip](https://apps-apis.google.com/a/feeds/emailsettings/2.0/mydomain.com/alaeddine.gallas/webclip)

我也尝试检索标签，但它给我带来了同样的异常！

我错过了什么 ？我是否必须在域管理门户中启用某些内容？我必须做什么才能使瘦代码运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:14:03.880

您可以执行任何其他操作吗？

据我所知，ClientLogin 身份验证方法已被弃用。

# .htaccess - 如何使用 .htaccess 隐藏 url 的一部分

> ID：13039232
> 
> 赞同：0
> 
> 时间：2012-10-23T21:05:40.473
> 
> 标签：.htaccess, mod-rewrite, joomla, rewrite

我正在尝试从我的网址中删除部分，这里是网址**“http://example.com/custom_joomla_template-2.5.6/about-us/portfolio/itemlist/category/3-category-2”**

现在我想从 url 中删除“itemlist/category/”，以便 url 可以查看链接**“http://example.com/custom_joomla_template-2.5.6/about-us/portfolio/3-category-2”**

我正在使用 joomla 的默认功能，即 SEF url，我需要进一步简化它我是 htaccess 的新手

请建议学习如何为 .htaccess 文件编写规则的链接

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:44:32.927

最简单的事情就是在某个地方创建一个直接指向类别 2 的菜单链接。这将正确设置网址。它也将摆脱 3-

# java - 局域网中的外来主机无响应

> ID：13039233
> 
> 赞同：1
> 
> 时间：2012-10-23T21:05:45.123
> 
> 标签：java, sockets, udp

我尝试学习 TCP/IP，作为练习，我开发了一个 LAN 主机发现实用程序，例如[http://overlooksoft.com](http://overlooksoft.com)。

爬网后，我找到[`nmap`](http://en.wikipedia.org/wiki/Nmap)了可以完成这项工作的实用程序。

我做了这个小测试：

```
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.SocketAddress;
import java.nio.ByteBuffer;
import java.nio.channels.DatagramChannel;

public class NetDiscovery {
   public static void main( String[] args ) throws Throwable {
      DatagramChannel channel = DatagramChannel.open();
      channel.bind(
         new InetSocketAddress( InetAddress.getByName( "192.168.1.7" ), 2416 ));
      ByteBuffer      buffer  = ByteBuffer.allocate( 1024 );
      SocketAddress   address =
         new InetSocketAddress( InetAddress.getByName( "192.168.1.255" ), 80 );
      channel.send( buffer, address );
      SocketAddress sender = channel.receive( buffer ); // <<<<<<<<<<<<<<<<<<<<
      System.err.println(
         ((InetSocketAddress)sender).getAddress().getHostAddress());
   }
} 
```

我希望 LAN 上的其他主机 (4) 对这个“udp ping 广播”做出一些响应，但是这个程序在标记为的行中无限期地等待`// <<<<<<<<<<<<<<<<<<<<`

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:31:05.217

UDP 不能那样工作。除非那些其他机器上的某些东西绑定到 UDP 端口 80 并做出响应，否则什么都不会发生。数据报只是丢失了。其他机器可能会发送 ICMP“端口不可达”消息，但由于您无法真正连接到广播地址，因此在 UDP 级别您什么也得不到。

如果您不想在其他机器上部署任何东西，那么[ICMP](http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol)可能是您的最佳选择。否则请查看[多播](http://en.wikipedia.org/wiki/Multicast)，也许还有[zeroconf](http://en.wikipedia.org/wiki/Zeroconf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T23:23:02.117

如果您想集成 Java 和 Nmap，请尝试使用 Nmap4j (http://nmap4j.sourceforge.net)。它是一个围绕 nmap 的包装 API，允许您访问从 Java 对象中的 nmap 返回的数据。

# c# - 分解一个长的unix命令？

> ID：13039235
> 
> 赞同：0
> 
> 时间：2012-10-23T21:05:54.597
> 
> 标签：c#, unix, ssh

我通过 SSH 从 C# 向一个 unix 机器发送了一个很长的命令，看起来这个命令运行时间很长。我读到你可以通过 [enter] 来逃避它，但我有一些引语恶作剧会继续说不匹配的引语。

示例命令：

`tibrvsend "Destination" "really really long string"`

完全不发送

`tibrvsend "Destination" "really really\`

`long string"`

有无与伦比的“错误。

我确定这很简单，你们能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:09:28.490

如果您的 SSH 会话是持久的，您可以声明一个 shell 脚本变量（例如`$myvar='string'`），然后在多个命令中将该（长）字符串的其他部分连接到字符串的末尾，然后通过将该变量传递给它而不是运行命令将整个字符串发送给它。

# expressionengine - 为什么当我通过 Safecracker 编辑条目时复选框会被清除？

> ID：13039242
> 
> 赞同：2
> 
> 时间：2012-10-23T21:06:17.903
> 
> 标签：expressionengine, safecracker

为什么当我在 Safecracker 中编辑我的条目时复选框会被清除？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T21:21:14.107

添加参数preserve_checkboxes="yes"

[http://expressionengine.com/user_guide/modules/safecracker/index.html#preserve-checkboxes](http://expressionengine.com/user_guide/modules/safecracker/index.html#preserve-checkboxes)

# javascript - 仅 Ajax 调用第一次更新页面

> ID：13039245
> 
> 赞同：0
> 
> 时间：2012-10-23T21:06:24.083
> 
> 标签：javascript, html, ajax

我有一个相当简单的计时器，我在一个页面上设置它，然后在另一个页面上查看倒计时。

问题是计时器第一次更新但不再更新（除非我进行了整页刷新，但我想避免这样做）。我在萤火虫中没有任何错误。该函数每 25 秒重新发送一次 ajax 命令 - 这很有效，我看到时间按预期通过。如果我更改时间，我可以按预期从 php 页面看到结果，但是如果没有实际的页面刷新，计时器本身不会更新。我与此页面没有任何交互（它只是一个计时器），所以我无法在点击时更新。

有什么我想念的想法吗？我知道这一定很明显。

```
$(document).ready(function(){
suitcase();
});
setInterval(suitcase, 25000);

function suitcase() {
$.ajax({
    type: 'POST',
    url: 'timeRTN.php',
    async: false,
    cache: false,
    data: {            
        examlength: examlength
    },
    success: function(examlength) {
        $('#pauseResume').countdown({
            until: examlength,
            format: 'HMS'
        })
      },
     })
    }; 
```

HTML：

```
<div id="pauseResume" class="countdown"></div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:37:35.937

尝试这个：

```
function Suitcase(){
var countdownExists = false;
...
  success: function(examlength) {
    if(!countdownExists){
      $('#pauseResume').countdown({
        until: examlength,
        format: 'HMS'
      })
      countdownExists = true;
    }else{
      $('#pauseResume').countdown('option',{
        until: examlength,
        format: 'HMS'
    }) 
```

此处的文档：http: [//keith-wood.name/countdownRef.html](http://keith-wood.name/countdownRef.html)

`$().countdown(options)`创建倒计时的新实例

`$().countdown('option', options)`设置现有实例的选项。

# java - 关于java中工厂方法的设计实现

> ID：13039248
> 
> 赞同：1
> 
> 时间：2012-10-23T21:06:37.270
> 
> 标签：java, interface, abstract-class, factory-pattern

我有一个设计问题要问。到目前为止我还没有写任何代码，只是在思考如何实现这一点。我有一个 A 类型的对象，它包含一个 B 类型的对象。我希望 B 定义一个对象类别（接口或抽象类？）。然后我有一个 xml 文件，它定义了 B 应该是的子类型。例如，如果 B 是一个名为 Driveable 的接口，那么“car”或“truck”可能会在 xml 中定义为类型 A 所需的 Drivable 对象。

我想做的是让 B 成为一个接口，然后创建一个静态工厂类，它有一个工厂方法来确定应该给什么子类型 B 一个 xml 文件。所以我的第一个问题是这是解决问题的最佳方法吗？使用抽象类而不是接口会更好还是主要只是个人喜好？

其次，如果我确实使用接口，那么在我的工厂方法中我会这样做：

```
B createB(File f){
    ...
    String type = ...
    if(type.equals("car"))
        return new CarType();
    else if(type.equals("truck"))
        return new TruckType();
    ...
    return null;
} 
```

所以每次我添加一个新的 B 子类型时，我都需要在这个方法中添加另一个 if 语句。有没有更好的方法来做到这一点，所以我所要做的就是创建一个新的 B 子类型，然后更新我的 xml 而不是更新工厂方法？我本质上不想将 B 的类型硬编码到我的工厂方法中。如果我上面的内容是带有工厂方法的非常标准的协议，那么我可以用这种方式处理它，只是看起来不太对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:13:21.190

您可以做的是在 xml 中定义您希望 B impls 成为的实际类名，然后像这样使用通用类构造函数（缺少错误处理）：

```
 String bimplClassname = //read from xml
Class bimplClass = Class.forName(bimplClassname);
B newB = bimplClass.getConstructor(/*arg types*/).newInstance(/*args*/); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:16:36.027

我想这取决于触发创建对象的原因。如果是一些触发创建的文本，那么您现有的代码对于小型应用程序来说是可以的。你也可以选择像[Guice](http://code.google.com/p/google-guice/)这样的依赖注入框架。

另外，请注意，对于比较字符串，您应该使用`.equals`方法，而不是代码中显示的 ==。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:32:42.783

根据 carnold 的示例，您可以在工厂类中创建一个映射，该映射在 xml 中的文本和相应的 java 类之间进行映射。

```
private final static Map<String, Class> typeMap;

static {
   typeMap = new HashMap<String, Class>();
   typeMap.put("car", CarType.class); 
   typeMap.put("truck", TruckType.class);
} 
```

然后在你的方法中：

```
B createB(File f){
    ...
    String type = ...
    Class clazz = typemap.get(type);
    if (clazz == null){
        return null;
    }

    B newB = clazz.getConstructor(/*arg types*/).newInstance(/*args*/);
    return newB;
} 
```

比 if/else 更容易维护，但仍然需要维护它。

# ruby - VCRProxy：在 Capybara 内使用 VCR 记录 PhantomJS ajax 调用

> ID：13039251
> 
> 赞同：44
> 
> 时间：2012-10-23T21:06:46.090
> 
> 标签：ruby, ajax, https, phantomjs, vcr

我已经在这个领域做了一些研究，但没有找到任何解决方案。我有一个站点，其中对 facebook 进行异步 ajax 调用（使用 JSONP）。我正在使用 VCR 在 Ruby 端记录我的所有 HTTP 请求，所以我认为将这个功能也用于 AJAX 调用会很酷。

所以我玩了一下，想出了一个代理尝试。我使用 PhantomJS 作为无头浏览器和 poltergeist 用于 Capybara 内部的集成。Poltergeist 现在配置为使用这样的代理：

```
 Capybara.register_driver :poltergeist_vcr do |app|
    options = {
      :phantomjs_options => [
        "--proxy=127.0.0.1:9100",
        "--proxy-type=http",
        "--ignore-ssl-errors=yes",
        "--web-security=no"
      ],
      :inspector => true
    }
    Capybara::Poltergeist::Driver.new(app, options)
  end
  Capybara.javascript_driver = :poltergeist_vcr 
```

出于测试目的，我编写了一个基于 WEBrick 的代理服务器，它集成了 VCR：

```
require 'io/wait'
require 'webrick'
require 'webrick/httpproxy'

require 'rubygems'
require 'vcr'

module WEBrick
  class VCRProxyServer < HTTPProxyServer
    def service(*args)
      VCR.use_cassette('proxied') { super(*args) }
    end
  end
end

VCR.configure do |c|
  c.stub_with :webmock
  c.cassette_library_dir = '.'
  c.default_cassette_options = { :record => :new_episodes }
  c.ignore_localhost = true
end

IP   = '127.0.0.1'
PORT = 9100

reader, writer = IO.pipe

@pid = fork do
  reader.close
  $stderr = writer
  server = WEBrick::VCRProxyServer.new(:BindAddress => IP, :Port => PORT)
  trap('INT') { server.shutdown }
  server.start
end

raise 'VCR Proxy did not start in 10 seconds' unless reader.wait(10) 
```

这适用于每个 localhost 调用，并且它们得到了很好的记录。HTML、JS 和 CSS 文件由 VCR 录制。然后我启用了该`c.ignore_localhost = true`选项，因为（在我看来）记录本地主机调用没有用。

然后我再次尝试，但我必须弄清楚，在页面上进行的 AJAX 调用没有被记录。更糟糕的是，它们不再在测试中工作。

所以说到重点，我的问题是：为什么所有对本地主机上的 JS 文件的调用都被记录了，而 JSONP 对外部资源的调用却没有？它不可能是 jsonP 的东西，因为它是一个“正常”的 ajax 请求。或者 phantomjs 内部是否存在错误，即 AJAX 调用没有被代理？如果是这样，我们该如何解决？

如果它正在运行，我想在里面集成启动和停止程序

**- - - - 更新 - - - -**

我做了一些研究，得出了以下几点：代理在HTTPS调用和通过HTTPS调用的二进制数据方面存在一些问题。

我启动了服务器，并进行了一些 curl 调用：

```
curl --proxy 127.0.0.1:9100 http://d3jgo56a5b0my0.cloudfront.net/images/v7/application/stories_view/icons/bug.png 
```

该呼叫将按应有的方式记录下来。代理的请求和响应输出是

```
GET http://d3jgo56a5b0my0.cloudfront.net/images/v7/application/stories_view/icons/bug.png HTTP/1.1
User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
Host: d3jgo56a5b0my0.cloudfront.net
Accept: */*
Proxy-Connection: Keep-Alive

HTTP/1.1 200 OK 
Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-10-12)
Date: Tue, 20 Nov 2012 10:13:10 GMT
Content-Length: 0
Connection: Keep-Alive 
```

但是这个调用没有被记录，肯定是 HTTPS 有问题：

```
curl --proxy 127.0.0.1:9100 https://d3jgo56a5b0my0.cloudfront.net/images/v7/application/stories_view/icons/bug.png 
```

头文件输出为：

```
CONNECT d3jgo56a5b0my0.cloudfront.net:443 HTTP/1.1
Host: d3jgo56a5b0my0.cloudfront.net:443
User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
Proxy-Connection: Keep-Alive

HTTP/1.1 200 OK 
Server: WEBrick/1.3.1 (Ruby/1.9.3/2012-10-12)
Date: Tue, 20 Nov 2012 10:15:48 GMT
Content-Length: 0
Connection: close 
```

所以，我想也许代理不能处理 HTTPS，但它可以（只要我在 cURL 调用后得到控制台上的输出）。然后我想，也许 VCR 不能模拟 HTTPS 请求。但是使用这个脚本，当我不在代理中使用它时，VCR 会模拟 HTTPS 请求：

```
require 'vcr'

VCR.configure do |c|
  c.hook_into :webmock
  c.cassette_library_dir = 'cassettes'
end

uri = URI("https://d3jgo56a5b0my0.cloudfront.net/images/v7/application/stories_view/icons/bug.png")

VCR.use_cassette('https', :record => :new_episodes) do
  http = Net::HTTP.new(uri.host, uri.port)
  http.use_ssl = true
  http.verify_mode = OpenSSL::SSL::VERIFY_NONE
  response = http.request_get(uri.path)
  puts response.body
end 
```

那么问题是什么？VCR 处理 HTTPS，代理处理 HTTPS。为什么他们不一起玩？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T19:42:36.200

所以我做了一些研究，现在我有了一个工作 VCR 代理服务器的非常基本的示例，它作为 MITM 代理服务器处理 HTTPS 调用（如果您在客户端中停用安全检查）。如果有人可以贡献并帮助我将这件事变为现实，我将非常高兴。

这是 github 仓库：[https ://github.com/23tux/vcr_proxy](https://github.com/23tux/vcr_proxy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-13T01:06:33.183

[Puffing Billy](https://github.com/oesmith/puffing-billy)是一个非常好的工具。您需要指定要绕过的域，以及需要存根的 url。存根 https url 也有点棘手。您需要将 https url 存根为`https://www.example.com:443/path/`

# jpa - JDODetachedFieldAccessException：您刚刚尝试访问字段“附件”，但在您分离对象时该字段未分离

> ID：13039252
> 
> 赞同：4
> 
> 时间：2012-10-23T21:06:48.170
> 
> 标签：jpa, datanucleus, detach, lob

实体类：

```
public class CustomerSurvey implements Serializable {

@Id @GeneratedValue(strategy=GenerationType.SEQUENCE, 
   generator="CUSTOMER_SURVEY_SEQUENCE")
@Column(name = "SURVEYID", nullable = false)
private String surveyId;

@Column(name="ATTACHMENT")
@Lob
private byte[] attachment;
.... 
```

持久性类/逻辑：

```
 public List<CustomerSurvey> getSurveysByCustomer(String custNo)
        throws WorkServiceException {
    EntityManager em = entityManagerFactory.createEntityManager();
    Query query = em.createNamedQuery("customerSurvey.findByCustomer")
            .setParameter("custNo", custNo);
    logger.debug(query);
    List<CustomerSurvey> surveys = query.getResultList();
    em.clear();
    em.close();
    return surveys;
} 
```

消费者类/逻辑：

```
 List<CustomerSurvey> reviewSurveys = workService.getSurveysByCustomer("testCNo2");
    for(CustomerSurvey rsurvey: reviewSurveys) {
        Object obj = rsurvey.getAttachment();
        byte[] buffer = (byte[]) obj;
OutputStream out = new FileOutputStream("C:\\Temp\\TulipsOut.jpg");
        out.write(buffer);
    } 
```

我得到的错误是：

原因：javax.jdo.JDODetachedFieldAccessException：您刚刚尝试访问字段“附件”，但在您分离对象时该字段未分离。要么不要访问此字段，要么在分离对象时将其分离。在 com.ge.dsp.iwork.entity.CustomerSurvey.jdoGetattachment(CustomerSurvey.java) 在 com.ge.dsp.iwork.entity.CustomerSurvey.getAttachment(CustomerSurvey.java:89) 在 com.ge.dsp.iwork.test .WorkServiceTest.testSubmitSurveyResponse(WorkServiceTest.java:270) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java :25) 在组织的 java.lang.reflect.Method.invoke(Method.java:597)。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T21:36:52.880

主要问题是`private byte[] attachment;`。

1.  属性的默认加载`@Log`将是`FetchType.LAZY`.
2.  的过程`Persistence Context`之后会很清楚。这意味着所有托管实体都将变为分离状态。更多信息在[这里](http://www.objectdb.com/java/jpa/persistence/managed)。`clear()``EntityManager`
3.  当一个`Entity`处于分离状态时，如果您访问获取值，您将遇到您提到的问题。

**简短的回答：**

处理后`em.clear()`，您的实体实例`surveys`将被分离。`attachment`这就是为什么由于`attachment`延迟加载（`FetchType.LAZY`）而无法检索该值的原因。

**解决方法：**使用`FetchType.EAGER`。我认为，大多数人不建议使用急切加载。

```
 @Column(name="ATTACHMENT")
    @Basic(fetch = FetchType.EAGER)
    @Lov
    private byte[] attachment; 
```

# erlang - Erlang 热重载和 badfuns

> ID：13039255
> 
> 赞同：5
> 
> 时间：2012-10-23T21:07:00.243
> 
> 标签：erlang

我有一个设置，我有四个正在运行的服务器实例，每个服务器框有两个实例。我的服务器涉及大量传递匿名函数并在不同的线程上运行它们（可能在不同的服务器上）。

今天我重新加载了代码，其中涉及更改其中一个实例上的一些静态函数的内容（计划按顺序执行每个实例）。在运行我的重新加载时，我遇到了大量的`badfun`错误。那个盒子上的另一个实例也开始吐出类似的错误。另一个盒子上的两个实例我们似乎没有受到影响。

我发现这篇文章： [http](http://www.javalimit.com/2010/05/passing-funs-to-other-erlang-nodes.html) ://www.javalimit.com/2010/05/passing-funs-to-other-erlang-nodes.html 这似乎暗示这些错误的原因是匿名函数有不同的版本在两个节点之间，因此它坏了。但是，在测试中我无法重现此错误。此外，我之前已经多次重新加载代码而没有看到类似的内容。然而，这是我第一次为每个盒子重新加载两个实例（以前是每个盒子一个实例）。有没有人知道为什么会发生这种情况，以及如何防止它（不杀死所有东西并重新启动它，这是我必须做的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T08:02:19.290

为了识别 funs，erlang vm 对代码进行哈希处理并将其合并到 fun 标识符中。正是这个标识符被发送到另一个节点，当尝试在远程端访问那个乐趣时，它找不到那个哈希的乐趣。

要查看实际情况，请获取一段带有匿名 fun 的代码并将其加载到一个 vm 中，然后编辑 fun 并将新代码加载到单独的 vm 中。然后尝试将原来的乐趣发送到第二个vm并执行它。

# couchdb - CouchDB：用户登录时触发事件

> ID：13039262
> 
> 赞同：2
> 
> 时间：2012-10-23T21:07:39.687
> 
> 标签：couchdb

**用例**

此处引用了复制收件箱或“空闲用户免费”：http: [//blog.couchbase.com/what%E2%80%99s-new-apache-couchdb-011-%E2%80%94-part-three-new -功能复制](http://blog.couchbase.com/what%E2%80%99s-new-apache-couchdb-011-%E2%80%94-part-three-new-features-replication)

在每用户数据库的 CouchDB 架构中，最好只在用户登录时触发用户数据库和“收件箱”或“主”数据库之间的复制，这样您就不会通过在上运行连续复制来浪费资源一直处于非活动状态的数据库。此外，在我的应用程序设计中，我很想删除/归档非活动用户的数据库，并且只有在他们长时间不登录后才恢复/创建它。

**问题**

_session 数据库似乎不支持 _changes API 来监视新会话何时发生。我唯一能想到的是使用文档更新处理程序来更新用户文档上的“last_login”时间戳，然后在 _users 数据库上观察 _changes。我不喜欢这种方法，因为这意味着在客户端添加自定义逻辑。

**问题：**

用户登录时是否有用于触发事件的 CouchDB API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:37:08.267

不存在这样的。CouchDB 目前有三种类型的身份验证：Basic、Cookie、OAuth（+ Facebook via plugin）。可能是，如果可以为 Cookie 和 OAuth 发出此类事件，但不能为 Basic 发出此类事件，因为它只是一个带有特殊标头的常规请求，其中包含针对某些 url 的凭据。换句话说，即使`_session`资源会在用户登录时引发一些事件，也可以解决这种逻辑。

不久前我们曾试图解决同样的问题，但我们认为它毫无价值，并不能解决我们的实际问题：我们仍然遇到用户是匿名用户而用户是已知用户的情况。

PS 但是您仍然可以解析 CouchDB 日志，在某些情况下引发事件并将它们传递给 redis 或 MQ 服务以进一步处理，但要注意磁盘空间很快耗尽。

# cocoa - cocoa - 在 NSRect 中绘制图像

> ID：13039263
> 
> 赞同：3
> 
> 时间：2012-10-23T21:07:40.493
> 
> 标签：cocoa, nsrect

我在 NSRect 中绘制图像时遇到了困难，下面的代码在所需位置创建了一个 NSRect 并放入了一个图像。问题是图像是一个带有透明区域的圆圈，这些区域被填充为黑色，所以而不是一个圆圈，我有一个黑色正方形，里面有圆圈 img ......

```
- (void)drawRect:(NSRect)dirtyRect{

NSImage *bg = [NSImage imageNamed:@"citydot_c1.png"];
NSRect city = NSMakeRect(10, 10, 8, 8);
[bg drawInRect:city fromRect:NSZeroRect operation:NSCompositeSourceAtop fraction:1.0f];

NSFrameRect(city);
} 
```

所以基本上，我需要一种方法来删除 NSRect 的背景颜色，我认为......

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:14:44.043

您可能想使用 Porter-Duff "Over" 来合成图像：

```
[bg drawInRect:city fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1.0f]; 
```

使用此混合操作，您可以获得正常的透明度合成。

# http - 规划 REST API 的最佳方式

> ID：13039264
> 
> 赞同：0
> 
> 时间：2012-10-23T21:07:42.163
> 
> 标签：http, rest, backend

我聘请了一位后端开发人员为我的 iPhone 应用程序开发 REST API。我需要给他一份 iPhone 将要发出的所有 HTTP 请求的列表。是否有软件可以帮助规划 REST API，或者我只是将其写在带有参数和示例的纯 TXT 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:16:33.263

规划 API 是他/她的工作的一部分，而不是你的，
特别是现在看起来你在这方面没有经验，我绝对要求 API 开发人员自己来规划 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:14:34.633

如果您可以向开发人员提供有关每项服务的信息以及您期望通过什么以及您期望返回什么，那将是最好的解释，

例如，这就是如何解释服务来注册设备，（这是基于苹果存折服务器）。

如果您遵循以下结构，开发人员可以毫无问题地为您提供所需的内容。

```
/**
 # Registration
 # register a device to receive push notifications for a pass
 #
 # POST /v1/devices/<deviceID>/registrations/<typeID>/<serial#>
 # Header: Authorization: ApplePass <authenticationToken>
 # JSON payload: { "pushToken" : <push token, which the server needs to send push notifications to this device> }
 #
 # Params definition
 # :device_id      - the device's identifier
 # :pass_type_id   - the bundle identifier for a class of passes
 # :serial_number  - the pass' serial number
 # :pushToken      - the value needed for the Notification service
 #
 # server action: if the authentication token is correct, associate the given push token and device identifier with this pass
 # server response:
 # --> if registration succeeded: 201
 # --> if this serial number was already registered for this device: 304
 # --> if not authorized: 401
 */ 
```

# html - IE7 用按钮异常展开表格单元格

> ID：13039265
> 
> 赞同：1
> 
> 时间：2012-10-23T21:07:42.833
> 
> 标签：html, css, internet-explorer-7

我一直在阅读 IE7 中的这个错误，它根据按钮的文本数量增加按钮的填充。我终于通过添加`overflow: visible`到按钮类解决了这个问题，但似乎虽然按钮以正确的宽度显示，但这个错误仍然影响按钮周围的元素。在这种情况下，当按钮位于表格单元格内时，单元格会变得比应有的大得多。

效果可以在[这个 jsfiddle](http://jsfiddle.net/3YTqN/1/)中看到。在现代浏览器中，按钮之间的间隙要小得多，而在 IE7 中则异常宽。我正在寻找一种方法来消除这种差距，谢谢。

**编辑**：好吧，我将使用 Diodeus 的建议，但是知道是否有解决此问题的方法仍然很有趣。

# jquery - jQuery背景位置动画无限

> ID：13039267
> 
> 赞同：0
> 
> 时间：2012-10-23T21:07:57.683
> 
> 标签：jquery, background-position

所以我所拥有的是一个大图像，当有人在页面上时，我试图连续制作动画

我现在要做的是：

```
$('.photobanner').animate({ 
    backgroundPosition:"(-10000px 0px)" 
}, 80000, 'linear'); 
```

这有效..但它似乎结束并停止..我可以无限做同样的动画吗？

现在它工作了----

```
var counter=0;
function moveBG(y)
{
    counter=counter-1000;
    $('.photobanner').animate({ backgroundPosition:"("+counter+"px 0px)" }, 8000, 'linear',moveBG);
} 
```

我定义了一个计数器，它将递增到无穷大并使用了这个函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:11:19.650

你总是可以做这样的事情：

```
function moveBG()
{
    $('.photobanner').css({ backgroundPosition:"(0px 0px)"});
    $('.photobanner').animate({ backgroundPosition:"(-1000px 0px)" }, 8000, 'linear',moveBG);
} 
```

使函数的回调重做函数。不过，它必须是一个无缝的图像。

# php - 在 url 中找到的日期格式是什么：1350619200000

> ID：13039271
> 
> 赞同：0
> 
> 时间：2012-10-23T21:08:00.553
> 
> 标签：php, date

有谁知道以下网址中的日期/时间戳格式是什么（我相信这是戳：1350619200000）？

[http://www.genbook.com/bookings/slot/reservation/30184703/403542371/403542375/1350619200000?bookingContactId=493345670](http://www.genbook.com/bookings/slot/reservation/30184703/403542371/403542375/1350619200000?bookingContactId=493345670)

我希望使用 PHP 将当前日期/时间戳转换为这种格式，以便我可以创建一个当前链接，以便始终将用户带到今天的日期和时间进行调度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:10:37.930

它很可能是 Javascript 时间戳，即自 1970 年 1 月 1 日以来的毫秒数：

```
mysql> select from_unixtime(1350619200000/1000);
+---------------------------+
| from_unixtime(1350619200) |
+---------------------------+
| 2012-10-18 22:00:00       |
+---------------------------+
1 row in set (0.02 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:11:44.543

它被称为`timestamp`格式（在程序员中）。查看 PHP 中的手册[strtotime](http://php.net/manual/en/function.strtotime.php)和[date](http://php.net/manual/en/function.date.php)以获得所需的格式。

如果你打算使用 PHP，这就是你的做法，

```
 $timestamp = 1350619200000; 
 echo date('Y-m-d H:i:s', $timestamp/1000); 
```

获取今天的日期/时间`timestamp`，[时间手册](http://php.net/manual/en/function.time.php)

```
 //multiply by 1000 to be used in javascript
  echo time() * 1000; //gives current time in timestamp format, ie. since Jan 1, 1970. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:15:04.607

您正在查看的时间戳是毫秒精度的时间戳。

这种格式在 Javascript 等地方是标准的。如果您转到 Web 浏览器的控制台并输入`console.log(new Date(1350619200000))`，您将得到类似这样的答案：`Fri Oct 19 2012 05:00:00 GMT+0100 (BST)`。

但是，如果您尝试在 PHP 中处理它，您可能会遇到麻烦，因为 PHP 使用秒精度的时间戳。

结果是，如果你想把这个时间戳记到 PHP 中，你需要先将它除以 1000：

```
<?php
$ts = 1350619200000;
print date('Y-m-d H:i:s', $ts / 1000); 
```

同样，如果您需要传递要在 Javascript 中使用的 PHP 时间戳，则需要在某个时候将其乘以 1000 才能在其中使用。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T21:10:30.023

假设这意味着 10 月 19 日凌晨 4 点 UTC，它看起来像是自 Unix 纪元（UTC 1970 年 1 月 1 日午夜）以来的毫秒数。它是 Java 中的“本机”日期表示，毫无疑问是其他一些平台。

我使用[epochconverter.com](http://www.epochconverter.com/)来检查这类事情。

# ruby-on-rails - 从 2 个不同的控制器对同一模型执行不同的现场验证

> ID：13039274
> 
> 赞同：3
> 
> 时间：2012-10-23T21:08:08.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试生成一个快速注册表单，以便在我的应用程序上使用 Facebook、Twitter 和 Linked 登录。但我确实有用户模型可以验证之前注册过程中的某些字段。

我正在尝试基于 Devise 扩展注册控制器，以便使用相同的数据库从外部登录快速注册。这个问题是因为我正在运行一个试用版然后我有一个注册表单要求信用卡。

我有这个控制器：

```
class Users::QuickRegistrationController < Users::RegistrationsController

  self.model_class = Users::RegistrationsController

end 
```

然后我有这个用户模型：

```
class User < ActiveRecord::Base  
  validates :name, :presence => true
  validates :first_surname, :presence => true
  validates :prefered_language, :presence => true
  validates :dni, :presence => true, :uniqueness => true #, :format => {:with => /(^\d{7,8}[a-zA-Z]$)|(^[a-zA-Z]\d{7}[a-zA-Z]$)/, :unless => "dni.blank?"}
  validates :phone_number, :presence => true, :format => { :with => /^((\d{9})|([+]\d{11}))$/, :unless => "phone_number.blank?"}, :uniqueness => true
  validates :birthdate, :presence => true, :age => {:adult => :over}
  validates :legal_conditions, :acceptance => {:accept => true}
  validates :email, :confirmation => true
  validates :email_confirmation, :presence => true
  validates :password_confirmation, :presence => true, :if => "new_record?"
  validates :country, :presence => true 
```

我可以说 validates :first_surname, :presence => false 用于 Users::QuickRegistrationController 和 :first_surname, :presence => true 用于 Users::RegistrationsController 吗？

另外，在Ruby上有解决这个问题的解决方案，你能提供任何教程或相关链接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:54:13.670

正如 23tux 所说，验证是基于模型的。我要做的是为您的模型添加一个新列：

```
add_column :products, :quick_registration, :boolean, default => true 
```

然后在您的用户模型中：

```
class User < ActiveRecord::Base  
  validates :name, :presence => true
  validates :email, :confirmation => true
  validates :email_confirmation, :presence => true

  with_options :unless => :quick_registration? do |u|

    # These only validate during full registration
    u.validates :first_surname, :presence => true
    u.validates :prefered_language, :presence => true
    u.validates :dni, :presence => true, :uniqueness => true #, :format => {:with => /(^\d{7,8}[a-zA-Z]$)|(^[a-zA-Z]\d{7}[a-zA-Z]$)/, :unless => "dni.blank?"}
    u.validates :phone_number, :presence => true, :format => { :with => /^((\d{9})|([+]\d{11}))$/, :unless => "phone_number.blank?"}, :uniqueness => true
    u.validates :birthdate, :presence => true, :age => {:adult => :over}
    u.validates :legal_conditions, :acceptance => {:accept => true}
    u.validates :password_confirmation, :presence => true, :if => "new_record?"
    u.validates :country, :presence => true

  end
end 
```

`quick_registration`然后在您的控制器中，您可以通过设置为 false来“打开”附加验证：

```
@user.quick_registration = false
@user.save   # all validations should fire 
```

# postgresql - COPY 可以与函数一起使用吗？

> ID：13039280
> 
> 赞同：0
> 
> 时间：2012-10-23T21:08:35.217
> 
> 标签：postgresql, postgresql-copy

我的任务是分析一个 postgresql 数据库。第一个要求是查看添加记录的速度，消除所有可能的外部瓶颈，以便找到我们的理论极限。

起初，我创建了一个包含示例数据的 csv 文件，并使用 COPY 函数将其读入。现在，所有记录都通过一个函数添加`update_or_add()`。是否可以与 COPY 一起使用，`update_or_add()`或者是否有我没有考虑过的更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:24:35.827

而不是“为每一行调用 update_or_add() 在行上”，您首选的方法应该是概括“update_or_add”以处理一组中的所有行。

`COPY`将来自外部源的数据放入一个`TEMPORARY`或`UNLOGGED`表中。然后编写一个查询，将复制表中的数据合并到主表中，就像`update_or_add()`一次对所有行一样。如果可以同时修改主表，这可能需要锁定主表，`LOCK TABLE main_table IN EXCLUSIVE MODE`以便其他事务只能`SELECT`在合并进行时从它进行。

没有您的架构或不知道什么`update_or_add`很难说更多。猜测它是一个 upsert/merge 功能，在这种情况下，您可以通过锁定主表并进行整体合并来更有效地*完成它的工作。*

# c - 通过创建 MPI 驱动的数据类型发送包含 void* 的 typedef 结构。

> ID：13039283
> 
> 赞同：2
> 
> 时间：2012-10-23T21:09:09.817
> 
> 标签：c, mpi

我对 MPI 规范的理解是，MPI 发送原语是指要发送的数据指向的内存位置（或发送缓冲区），并将该位置的数据作为消息传递给另一个进程。

尽管给定进程的虚拟地址在另一个进程的内存地址中确实没有意义；可以发送指针所指向的数据，例如 void 指针，因为 MPI 会以任何方式将数据本身作为消息传递

例如以下工作正常：

```
 // Sender Side.
    int x = 100;
    void* snd;
    MPI_Send(snd,4,MPI_BYTE,1,0,MPI_COMM_WORLD);   

    // Receiver Side.
    void* rcv;
    MPI_Recv(rcv, 4,MPI_BYTE,0,0,MPI_COMM_WORLD); 
```

但是当我在结构中添加**void* snd**并尝试发送结构时，这将不会成功。

我不明白为什么前面的例子可以正常工作，但下面的例子不能正常工作。

在这里，我定义了一个 typedef 结构，然后从中创建一个 MPI_DataType。与上述相同的解释，以下也应该成功，不幸的是它不起作用。

这是代码：

```
 #include "mpi.h"
    #include<stdio.h>

    int main(int args, char *argv[])
    {
        int rank, source =0, tag=1, dest=1;
        int bloackCount[2];

        MPI_Init(&args, &argv);

        typedef struct {
            void* data;
            int tag; 
        } data;

        data myData;    

        MPI_Datatype structType, oldType[2];
        MPI_Status stat;

        /* MPI_Aint type used to idetify byte displacement of each block (array)*/      
        MPI_Aint offsets[2], extent;
        MPI_Comm_rank(MPI_COMM_WORLD, &rank);

        offsets[0] = 0;
        oldType[0] = MPI_BYTE;
            bloackCount[0] = 1;

        MPI_Type_extent(MPI_INT, &extent);

        offsets[1] = 4 * extent;  /*let say the MPI_BYTE will contain ineteger :         size of int * extent */
        oldType[1] = MPI_INT;
        bloackCount[1] = 1;

        MPI_Type_create_struct(2, bloackCount,offsets,oldType, &structType);
        MPI_Type_commit(&structType);

        if(rank == 0){
    int x = 100;
    myData.data = &x;
    myData.tag = 99;
    MPI_Send(&myData,1,structType, dest, tag, MPI_COMM_WORLD);
}
if(rank == 1 ){ 
    MPI_Recv(&myData, 1, structType, source, tag, MPI_COMM_WORLD, &stat);
          // with out this the following printf() will properly print the value 99 for 
          // myData.tag
    int x = *(int *) myData.data;
    printf(" \n Process %d, Received : %d , %d \n\n", rank , myData.tag, x); 
    }   
       MPI_Type_free(&structType);             
       MPI_Finalize();
    } 
```

运行代码的错误消息：[看起来我试图在第二个进程中访问无效的内存地址空间]

```
 [ubuntu:04123] *** Process received signal ***
    [ubuntu:04123] Signal: Segmentation fault (11)
    [ubuntu:04123] Signal code: Address not mapped (1)
    [ubuntu:04123] Failing at address: 0xbfe008bc
    [ubuntu:04123] [ 0] [0xb778240c]
    [ubuntu:04123] [ 1] GenericstructType(main+0x161) [0x8048935]
    [ubuntu:04123] [ 2] /lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)         [0xb750f4d3]
    [ubuntu:04123] [ 3] GenericstructType() [0x8048741]
    [ubuntu:04123] *** End of error message *** 
```

有人可以向我解释为什么它不起作用。任何建议也将不胜感激

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T11:45:23.240

```
// Sender Side.
int x = 100;
void* snd;
MPI_Send(snd,4,MPI_BYTE,1,0,MPI_COMM_WORLD);

// Receiver Side.
void* rcv;
MPI_Recv(rcv, 4,MPI_BYTE,0,0,MPI_COMM_WORLD); 
```

> 我不明白为什么前面的例子可以正常工作，但下面的例子不能正常工作。

它可以工作（当然，`snd`并且`rcv`必须分配有意义的内存位置作为值），因为`MPI_Send`and`MPI_Recv`获取数据位置的地址，并且两者`snd`都是`rcv`指针，即它们的值就是这样的地址。例如，该`MPI_Send`行不是发送指针本身的值，而是从*snd*指向的位置开始的 4 个字节。对 的调用`MPI_Recv`和使用也是如此`rcv`。为了发送指针的值而不是它指向的值，您必须使用：

```
MPI_Send(&snd, sizeof(void *), MPI_BYTE, ...); 
```

这将从`sizeof(void *)`存储指针值的地址开始发送字节。除非某些超级特殊情况，否则这将毫无意义。

为什么你的第二个例子不起作用？MPI 不是魔术师，它无法识别部分内存包含指向另一个内存块的指针并跟随该指针。也就是说，当你构造一个结构化数据类型时，没有办法告诉 MPI 结构的第一个元素实际上是一个指针，并让它读取这个指针指向的数据。换句话说，您必须执行*显式数据编组*- 构造和中间缓冲区，其中包含由 . 指向的内存区域的副本`data.data`。此外，您的数据结构不包含有关`data`指向的内存区域长度的信息。

请注意一些非常重要的事情。所有 MPI 数据类型都有一个叫做*类型映射的*东西。类型映射是一个元组列表，其中每个元组（也称为*类型签名*）的形式为`(basic_type, offset)`where`basic_type`是原始语言类型，例如`char`, `int`,`double`等，并且`offset`是相对于缓冲区开头的偏移量。MPI 的一个特殊特性是偏移量也可以是负数，这意味着 to `MPI_Send`（或 to`MPI_Recv`或任何其他通信函数）的参数实际上可能指向内存区域的中间，这将用作数据源。发送数据时，MPI 遍历类型映射，`basic_type`从对应的类型中取出一个元素`offset`，相对于提供的数据缓冲区地址。内置 MPI 数据类型只有一个条目的类型映射，偏移量为`0`，例如：

```
MPI_INT      -> (int, 0)
MPI_FLOAT    -> (float, 0)
MPI_DOUBLE   -> (double, 0) 
```

MPI 中不存在任何数据类型，这可以使其脱离指针并获取它指向的值而不是指针值本身。

```
offsets[0] = 0;
oldType[0] = MPI_BYTE;
blockCount[0] = 1;

MPI_Type_extent(MPI_INT, &extent);

offsets[1] = 4 * extent;
oldType[1] = MPI_INT;
blockCount[1] = 1;

MPI_Type_create_struct(2, blockCount, offsets, oldType, &structType); 
```

此代码创建具有以下类型映射的 MPI 数据类型（假设`int`为 4 个字节）：

```
{(byte, 0), (int, 16)} 
```

当作为类型参数提供给`MPI_Send`时，它将指示 MPI 库从数据缓冲区的开头获取一个字节，然后获取位于数据缓冲区开头之后 16 个字节处的整数值。尽管缓冲区的跨度为 20 字节，但消息总共有 5 个字节长。

```
offsets[0] = offsetof(data, data);
oldType[0] = MPI_CHAR;
blockCount[0] = sizeof(void *);

offsets[1] = offsetof(data, tag);
oldType[1] = MPI_INT;
blockCount[1] = 1;

MPI_Type_create_struct(2, blockCount, offsets, oldType, &structType); 
```

这段代码取自 Greg Inozemtsev 的回答，创建了一个具有以下类型映射的数据类型（假设 32 位机器具有 32 位宽的指针和零填充）：

```
{(char, 0), (char, 1), (char, 2), (char, 3), (int, 4)} 
```

类型信号的数量`(char, x)`等于`sizeof(void *)`（假设为 4）。如果用作数据类型，这将占用缓冲区开头的 4 个字节（即指针的值，地址，而不是它指向的实际 int！），然后它将占用 4 个字节后的整数开头，即`tag`结构中字段的值。再一次，您将发送指针的地址，而不是该指针指向的数据。

`MPI_CHAR`和之间的区别`MPI_BYTE`在于没有类型转换应用于 type 的数据`MPI_BYTE`。这仅在异构环境中运行 MPI 代码时相关。使用`MPI_CHAR`该库可以执行数据转换，例如将每个字符从 ASCII 转换为 EBCDIC 字符集，反之亦然。在这种情况下使用`MPI_CHAR`是错误的，但是在异构环境中发送指针更加错误，所以不用担心；）

鉴于这一切，如果我是你，我会考虑 suszterpatt 提出的解决方案。

* * *

对于显式数据编组，有两种可能的情况：

场景 1\. 指向的每个数据项`data.data`的大小都是恒定的。在这种情况下，您可以通过以下方式构造结构数据类型：

```
typedef struct {
   int tag;
   char data[];
} data_flat;

// Put the tag at the beginning
offsets[0] = offsetof(data_flat, tag);
oldType[0] = MPI_INT;
blockCount[0] = 1;

offsets[1] = offsetof(data_flat, data);
oldType[1] = MPI_BYTE;
blockCount[1] = size of the data;

MPI_Type_create_struct(2, blockCount, offsets, oldType, &structType);
MPI_Type_commit(&structType); 
```

然后像这样使用它：

```
// --- Sender ---

// Make a temporary buffer to hold the data
size_t total_size = offsetof(data_flat, data) + size of the data;
data_flat *temp = malloc(total_size);

// Copy data structure content into the temporary flat structure
temp->tag = data.tag;
memcpy(temp->data, data.data, size of the data);

// Send the temporary structure
MPI_Send(temp, 1, structType, ...);

// Free the temporary structure
free(temp); 
```

您也可能不会释放临时存储，而是将其重用于`data`结构的其他实例（因为假设它们都指向相同大小的数据）。接收者将是：

```
// --- Receiver ---

// Make a temporary buffer to hold the data
size_t total_size = offsetof(data_flat, data) + size of the data;
data_flat *temp = malloc(total_size);

// Receive into the temporary structure
MPI_Recv(temp, 1, structType, ...);

// Copy the temporary flat struture into a data structure
data.tag = temp->tag;
data.data = temp->data;
// Do not free the temporary structure as it contains the actual data 
```

场景 2\. 每个数据项的大小可能不同。这个涉及更多，并且很难以便携的方式进行。如果速度不是您最关心的问题，那么您可以通过两条不同的消息发送数据以获得最大的可移植性。MPI 保证为使用相同信封发送的消息保留顺序`(source, destination, tag, communicator)`。

* * *

您还可以通过以下方式实现 suszterpatt 建议的内容（假设您的标签符合允许的范围）：

```
// --- Send a structure ---
MPI_Send(data.data, size of data, MPI_BYTE, dest, data.tag, MPI_COMM_WORLD);

// --- Receive a structure ---
MPI_Status status;
MPI_Aint msg_size;
// Peek for a message, allocate big enough buffer
MPI_Probe(source, MPI_ANY_TAG, &status);
MPI_Get_count(&status, MPI_BYTE, &msg_size);
uint8_t *buffer = malloc(msg_size);
// Receive the message
MPI_Recv(buffer, (int)msg_size, MPI_BYTE, source, status.MPI_TAG,
         MPI_COMM_WORLD, MPI_STATUS_IGNORE);
// Fill in a data structure
data.tag = status.MPI_TAG;
data.data = buffer; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T21:44:08.583

假设您定义此结构是因为您想将不同的数据与不同的标签配对，那么您的解决方案在概念上是错误的。考虑以下示例：

```
data foo, bar;
int x = 100;
foo.data = bar.data = &x;
foo.tag = bar.tag = 99; 
```

在这种情况下，`foo`每个`bar`人都会在内存中拥有自己的副本`tag`，但它们指向的是同一条数据。因此，不可能定义可用于发送两个元素的单个 MPI 数据类型，因为它们各自`data`和`tag`元素之间的位移是不同的。除了最幸运的情况外，对于不同的数据指针也是如此。

如果您希望配对数据和标签，您仍然可以使用您的`data`结构，但由于上述原因，您不需要自定义 MPI 数据类型：

```
MPI_Send(myData.data,extent,MPI_BYTE, dest, myData.tag, MPI_COMM_WORLD); 
```

匹配接收：

```
MPI_Recv(myData.data, extent, MPI_BYTE, source, myData.tag, MPI_COMM_WORLD, &stat); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T04:57:33.763

MPI 数据类型中的偏移量`tag`错误。一般来说，您不能假设 a与 a`void*`的大小相同`int`。`struct`此外，随着更多字段的添加，可能会引入填充。不过有办法解决这个问题 - 只需使用`offsetof`：

```
offsets[0] = offsetof(data, data);
oldType[0] = MPI_BYTE;
blockCount[0] = sizeof(void *);

offsets[1] = offsetof(data, tag);
oldType[1] = MPI_INT;
blockCount[1] = 1;

MPI_Type_create_struct(2, blockCount, offsets, oldType, &structType); 
```

还有一件事：由于指针在目的地无论如何都没有意义，您可以在 MPI 数据类型中跳过它。

# javascript - 使用带有hammer.js的backbone.js

> ID：13039285
> 
> 赞同：3
> 
> 时间：2012-10-23T21:09:27.977
> 
> 标签：javascript, backbone.js, hammer.js

想知道是否有人在hammer.js 中使用过主干，以及如何使用hammer.js`Backbone.View`的拖动、保持事件来实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T23:09:39.977

您不能直接在 delegateEvents 中使用 Hammerjs 事件，但是有一些插件可以修补 Backbone.View 以使其成为可能：[https ://github.com/wookiehangover/backbone.hammer.js](https://github.com/wookiehangover/backbone.hammer.js)

# math - 使用固定（常数）指数计算功率

> ID：13039290
> 
> 赞同：1
> 
> 时间：2012-10-23T21:09:57.570
> 
> 标签：math, mathematical-optimization, numerical-methods, exponent, numerical-analysis

我有一种情况，我需要计算 x^ya 很多次，其中 y 是一个常数，并且 x 保证是一个有效数字。

如何比 Pow(double x, double y) 更有效地执行各种检查和评估？

我希望预先计算 y 变换。

**编辑**

两者都是实数。x = 0 ... 4,000,000,000。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:12:44.443

记住这个等式：

```
x^y = exp(y * ln(x)) 
```

所以你可以跳过`Pow`并使用`exp`and `ln`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:12:58.697

你不能。虽然 y 是一个常数，但 x 是一个变量，所以你无能为力。不过我不会担心的。pow() 方法得到了很好的优化。

您唯一能做的就是预先计算许多不同 x 的值，并将它们保存在字典中，除非它们变得非常大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T06:56:30.583

java中没有更快的方法，因为它不支持向量操作，或者至少很难优化代码以使用它们，因为没有好的并行注释。

您可能应该尝试使用本机库并使用 JNI 调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T21:17:37.630

如果您知道`y`，也许您可​​以将其分解为较小数字的乘法，并计算幂的幂。例如，如果`y = 6`你能做到

```
y = 2 * 3
power = pow( pow(x, 3), 2) 
```

不过不知道会不会更快。

# php - PHPUnit 测试来自 SwiftMail 的发送方法参数

> ID：13039291
> 
> 赞同：0
> 
> 时间：2012-10-23T21:10:13.190
> 
> 标签：php, phpunit, swiftmailer

也许我把这个复杂化了，但是我有一个被另一个类调用的电子邮件对象，并且电子邮件类使用了一个 Swift Mailer 的实例。

```
$email = Email::instance();
$mailer = $this->getMock('Swift_Mailer', array('send'), array(new \Swift_NullTransport()));
$email->setTransport($mailer);
$mailer->expects($this->once())
    ->method('send');
$model->sendEmail('user_email@test.com'); 
```

如上所述，我可以轻松测试是否调用了 send 方法并正确确认正在发送电子邮件，但是，我需要测试与邮件一起发送的 Swift Mailer Message 的主题。

```
$email = Email::instance();
$mailer = $this->getMock('Swift_Mailer', array('send'), array(new \Swift_NullTransport()));
$email->setTransport($mailer);
$mailer->expects($this->once())
    ->method('send')
    ->with($this->equalTo('new email subject')); 
```

显然这不起作用，并且引发了很多错误。

关于如何测试这个的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:49:59.693

找到了解决方法。

我没有测试 Swift Mail 内容，而是模拟模型并测试传递给调用 Email Object 类的函数的参数。

绝对不漂亮，但它会解决上面的具体问题。

# php - 基于时间支付的 PHP 脚本

> ID：13039297
> 
> 赞同：1
> 
> 时间：2012-10-23T21:10:49.870
> 
> 标签：php, date, time

我需要编写一个 php 脚本来计算用户注册后所欠的总金额。但是，注册费会根据数据而变化。例如：

```
Registration Date | Amount
Before November 15| $200
Before December 15| $250
Before December 30| $300
Before January  15| $350
Before January  30| $400 
```

所以我可以使用`time`and`date`函数并做一个 switch 语句来做到这一点，但这似乎太容易计算出如此庞大的数量。我是否过度简化了这一点，还是有其他因素需要考虑？

还有是否已经编写了一个脚本来做这样我可以窃取的事情？我真的不相信我的新手自己会写出如此重要的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:29:59.823

有很多方法可以做到这一点。

你可以：

1.  使用 MySQL 存储价格变化的日期并对其进行查询。

2.  您可以使用 PHP`date()`函数和一个简单的`elseif`or`switch`语句。

3.  您还可以使用`time()`- 每个日期的通过都会为您提供一个时间戳，您可以简单地查找时间戳是否大于价格变化的不同点的每个时间戳。

所有这些方法都是可能的并且实现起来相当简单。可能需要考虑该系统是否会在将来扩展或确实使用。

我可能会选择 MySQL 方法，因为您可以动态控制日期；添加它们，更改它们，更新价格等（通常在管理层的一时兴起）......

在我的脑海中，类似于以下内容：

```
SELECT price 
  from prices 
where
  NOW() >= startdate
  AND NOW() <= enddate 
```

价格表（mysql日期格式的日期）：

```
----------------------------------- 
id    price    startdate    enddate
----------------------------------- 
1     200      0            nov15 
2     250      nov16        dec15 
etc... 
```

# jquery - Firefox 中的 Jquery 替换方法损坏

> ID：13039305
> 
> 赞同：1
> 
> 时间：2012-10-23T21:11:04.903
> 
> 标签：jquery, html, css, firefox

我正在使用 Jquery 计算我的 css 文件的填充偏移量。我需要它是一个整数值，所以我用 .replace() 方法删除了“px”部分。

```
//calculate left and right padding on element
var padding_offset = $('#projects_menu').css("padding").replace('px', '')* 2; 
```

当我发出警报时（padding_offset）；在 Firefox 中，它返回 0。在 chrome、IE、Opera 中，它返回当前偏移量减去“px”部分，因此在本例中为“20”。

这只是firefox的一个错误吗？这里的解决方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:15:55.413

不支持速记 CSS 属性。如[http://api.jquery.com/css/所述](http://api.jquery.com/css/)

> 不支持速记 CSS 属性（例如边距、背景、边框）。例如，如果要检索渲染的边距，请使用：$(elem).css('marginTop') 和 $(elem).css('marginRight')，等等。

由于每个“子属性”的边距、填充、边框等可以具有不同的值以及不同的单位，这确实是合乎逻辑的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:13:30.477

您需要先解析整数，然后才能将其相乘

```
var padding_offset = parseInt($('#projects_menu').css("padding").replace('px', ''), 10)* 2; 
```

但是`parseInt`已经在字符串的末尾忽略`px`了，所以你不需要它

```
parseInt( $('#projects_menu').css("padding"), 10) * 2; 
```

将此与 AntonNiklasson 的答案结合起来，您就有了工作代码（假设 padding-top 为您提供所需的）

```
parseInt( $('#projects_menu').css("paddingTop"), 10) * 2; 
```

**更新**

感谢 Kato，他指出如果您将属性设置为像素以外的任何内容，这将不起作用。他创建了一个很好的`jQuery`助手来在单位之间转换[https://github.com/Zenovations/spritemation/blob/master/src/jquery.unitconverter.js](https://github.com/Zenovations/spritemation/blob/master/src/jquery.unitconverter.js)

# embed - 让 Spotify 嵌入响应式

> ID：13039311
> 
> 赞同：4
> 
> 时间：2012-10-23T21:11:33.380
> 
> 标签：embed, responsive-design, spotify

目前正在进行响应式设计，需要嵌入响应式 Spotify。我尝试只使用 css（没有用），然后使用 fitvids.js（作为一种奇怪的 janky 解决方案），这种方法有效，但仅在初始页面加载时有效，有时在底部有很大的余量。

请参阅此处的示例或查看底部的代码： http: [//codepen.io/oosabaj/full/keEBu](http://codepen.io/oosabaj/full/keEBu)

Dave Rupert（fitvids 的制造商）说：“看起来 Spotify 正在做自己的调整大小‘魔法’，所以它可能行不通。”

任何开发人员（可能是 Spotify 开发人员）都有解决方案吗？

```
<html>
<head>
<style>
    body{
      background: #e0d7d4;
    }

    #wrap {
      width: 900px;
      min-height: 200px;
      margin: 15px;
      background: #fff;
      border-radius: 2px;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.15);
    }

    @media only screen and (max-width: 980px) {
      #wrap {
        width: 700px;
      }
    }

    @media only screen and (max-width: 780px) {
      #wrap {
        width: 500px;
      }
    }

    @media only screen and (max-width: 580px) {
      #wrap {
        width: 300px;
      }
    }
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://fitvidsjs.com/js/jquery.fitvids.js"></script>
<script>
      $(document).ready(function(){
$("#wrap").fitVids({ customSelector: "iframe[src^='https://embed.spotify.com']"});
      });
</script>
</head>

<body>
    <div id="wrap">
    <iframe src="https://embed.spotify.com/?uri=spotify:user:erebore:playlist:788MOXyTfcUb1tdw4oC7KJ&amp;theme=white" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T13:16:19.073

我最终编写了一个小的 jQuery 片段来调整播放器的大小并在窗口加载和调整大小时重新加载 iframe。一个非常hacky的解决方案，但它有效。只需在您嵌入 Spotify 的任何页面上包含代码即可。如果有人有更好的解决方案，我会很高兴听到它。

```
$(document).ready(function(){
  $('iframe[src*="embed.spotify.com"]').each( function() {
    $(this).css('width',$(this).parent(1).css('width'));
    $(this).attr('src',$(this).attr('src'));
  });
});
$(window).resize(function() {
  $('iframe[src*="embed.spotify.com"]').each( function() {
    $(this).css('width',$(this).parent(1).css('width'));
    $(this).attr('src',$(this).attr('src'));
  });
}); 
```

在这里演示：http: [//codepen.io/jbasoo/pen/gDkoc](http://codepen.io/jbasoo/pen/gDkoc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T02:57:14.473

不确定如何最好地将其融入您的设计中，但 Spotify 小部件可能对其比例非常挑剔。[他们在文档页面](https://developer.spotify.com/technologies/spotify-play-button/documentation/)上给出了最小和最大宽度和高度，但更重要的是它包含这个小宝石：

> 如果给定高度比给定宽度大 80 像素，则将渲染较大的播放器。否则将渲染紧凑型播放器。

听起来它应该只影响显示的播放器版本*。*实际上，我发现不完全遵守该限制会导致一些奇怪的显示故障——播放器的某些部分被隐藏，iframe 中的大块空白等等。

我的小部件在动态大小的阴影框中显示了各种播放列表，但由于该阴影框是使用 javascript 启动的，因此我可以完全控制宽度和高度。我可以始终将宽度设置为高度 - 80。

它也不能很好地调整窗口大小。iframe 完美调整大小，但其内容不会重绘。实际的小部件页面似乎在初始加载时根据 iframe 中的可用空间计算其尺寸，并且不关注页面调整大小事件。[通过直接加载小部件 url](https://embed.spotify.com/?uri=spotify%3atrack:0CCcVq5Y0LR2x2KUPiCyTR)，即使没有 iframe，您也可以看到这种情况。如果这对您来说是一个大问题，也许您的外部页面可以使用 javascript 来监视调整大小，并使用该事件来触发 iframe 的刷新？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-18T09:06:25.847

我合并了这两个解决方案：

*   [https://gist.github.com/mennolui/687fdc251c6a64289da5](https://gist.github.com/mennolui/687fdc251c6a64289da5)
*   [https://codepen.io/jbasoo/pen/gDkoc](https://codepen.io/jbasoo/pen/gDkoc)

我改变了高度也是响应式的。

[这里](https://codepen.io/Suplanus/pen/bZKqVo)有一个例子。

所以我结束了这个javascript：

```
$(document).ready(function() {
    /* Make Spotify fit initial layout */
    respondify();
});

$(window).resize(function() {
    /* Make Spotify fit layout on resize */
    respondify();
});

function respondify() {
    $('body').find('iframe[src*="spotify.com/"]').each(function() {
        var w = $(this).parent(1).width();
        $(this).css('width', w + 'px');

    var h = $(window).height();
    $(this).css('height', h + 'px');

        $(this).attr('src',$(this).attr('src'));
    });

} 
```

# jquery - JQuery乱序渲染div附件

> ID：13039313
> 
> 赞同：1
> 
> 时间：2012-10-23T21:11:34.233
> 
> 标签：jquery

```
<script>
function SimpleMS() {
    $('#ImagePlaceHolder').append("<img src='../images/ajax-loader.gif' />");
    alert(1);
    $.ajax({
        async: false,
        url: '@Url.Action("SimpleMACSerial")'
                        + "?MACSerial=" + $('#SerialMAC').val()
                        ,
        dataType: "json",
        cache: false,
        success: function (data) {
            alert(2);                     
        },
        error: function (data) {
            alert('Error');
        }
    });
    alert(3);
}  </script> 
```

我看到以下结果

“1”

“2”

“3”

和

终于 ajax-loader.gif 出现了！

它应该在第一次警报之前显示！

为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:14:56.197

这是关于浏览器如何处理javascript的。在这种情况下，您会看到您正在使用的浏览器首先执行其所有 javscript，然后才开始解释它对源所做的更改，例如新的图像标签，它在第一个警报之前存在，但现在才得到呈现。

# java - BufferedReader 上的 Java 客户端套接字阻塞？

> ID：13039318
> 
> 赞同：3
> 
> 时间：2012-10-23T21:11:59.490
> 
> 标签：java, sockets, io, bufferedreader, printwriter

我正在使用旧学校`java.net.Socket`

我的客户端连接到服务器并执行以下操作：

```
BufferedReader in =
   new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
String fromServer = in.readLine(); 
```

它挂在 in.readLine() 处。

我的服务器接受来自客户端的连接并执行以下操作：

```
PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
out.print("Hello client\n"); 
```

我的期望是 out.print("Hello client\n"); 被调用，客户端应该停止阻塞并继续。

我做错了什么？

```
PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
BufferedReader in =
   new BufferedReader( new InputStreamReader(clientSocket.getInputStream()));
String fromServer = in.readLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:13:06.990

我猜你没有打电话`out.flush();`See [PrintWriter.flush](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#flush%28%29)

来自[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.OutputStream,%20boolean%29)

> autoFlush - 一个布尔值；如果为 true，println、printf 或 format 方法将刷新输出缓冲区

所以对你`Autoflush`不起作用，`print`你需要`flush()`手动打电话

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T03:26:13.543

`out.print("Hello client\n")`当您应该调用自动刷新的 时，您正在调用不是自动`out.println("Hello client")`刷新的。

# c# - 如何将字符串传递给 AjaxToolkit：AsyncFileUpload OnClientUploadComplete 或 OnClientUploadError

> ID：13039319
> 
> 赞同：0
> 
> 时间：2012-10-23T21:12:02.193
> 
> 标签：c#, asp.net, asyncfileupload

我正在使用 AjaxToolkit:AsyncFileUpload 并想知道是否有办法通过回调将状态消息传回。

OnClientUploadComplete

OnClientUploadError

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:40:46.833

如果您想从后面的代码中发送一些值以在 javascript 中访问，可能您可以拥有标签并将值传递给标签，如下所示

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "size", "top.$get(\"" + lblUploadStatus.ClientID + "\").innerHTML = 'There was an Error Processing the Request : Error " + ex.Message.ToString()  + "';", true); 
```

如果您不希望用户看到消息，您可以使用 css 隐藏标签，或者您可以使用隐藏的文本框。

这里有一个简单的例子[http://technico.qnownow.com/using-asyncfileupload-control-in-asp-net-ajax/](http://technico.qnownow.com/using-asyncfileupload-control-in-asp-net-ajax/)

# javascript - jQuery.isArray 是真的，但是 split() 不起作用

> ID：13039321
> 
> 赞同：2
> 
> 时间：2012-10-23T21:12:06.417
> 
> 标签：javascript, jquery

在我的 javascript 中：

```
console.log($.isArray(thisValue)); //true
strDisplay = thisValue.split(" "); //TypeError: thisValue.split is not a function 
```

'thisValue' 是我从 .json 文件中获取的对象的属性。在某些情况下，我的对象的属性可能是一个数组。我查看了原始的 .json 文件，它似乎被正确格式化为一个数组。

关于这里可能发生什么的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T21:13:00.237

`.split()`是在 s 上使用的方法`String`，而不是在 s上使用的方法`Array`。

[参考和例子](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)

看起来你想要[`Array.join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)的，它把一个粘在一起`Array`变成一个`String`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:18:28.560

拆分用于字符串。我会将一个字符串拆分为一个数组，但反之则不行。

```
var x = "This is a string";
var arr1 = x.split(" ");

arr1[0] == "This"
arr1[1] == "is" 
```

等等

# ruby - gem install sqlite3 后需要'sqlite3'失败

> ID：13039323
> 
> 赞同：2
> 
> 时间：2012-10-23T21:12:11.720
> 
> 标签：ruby, sqlite, gem

```
# gem which sqlite3
/usr/lib64/ruby/gems/1.8/gems/sqlite3-1.3.6/lib/sqlite3.rb
# irb
irb(main):001:0> require 'sqlite3'
LoadError: no such file to load -- sqlite3
        from (irb):1:in `require'
        from (irb):1
        from :0 
```

我是 ruby​​ 新手，但对 Perl 很有经验。因此，我怀疑它是 sqlite3 安装在“gem”知道但“irb”和“ruby”不知道的位置的库问题之一。谁能建议我可以解决此问题的方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:28:58.527

问题基本上不是因为缺少二进制文件。如果您缺少 sqlite3 的二进制文件，那么它`gem install sqlite3`会立即失败，因此不会安装 gem。并且不会在`gem list`命令中列出。

我从终端的给定输出中读到的是，您使用的是 ruby​​ 1.8.*，在这些版本及以下版本中，您需要`require 'rubygems'`首先使用。

问题后来解决了，因为您将 ruby​​ 升级到 1.9.*，在其中您可以立即要求您的 gem，而无需使用`require 'rubygems'`.

始终建议使用 rvm ruby​​。可以在[此处](https://rvm.io/)找到有关 rvm 安装和使用的详细信息。

# apache - Jasper JSP Engine JAR 文件官方来源

> ID：13039325
> 
> 赞同：4
> 
> 时间：2012-10-23T21:12:15.027
> 
> 标签：apache, jsp, maven, jar

我在我的 Java 项目中包含类 org.apache.jasper.servlet.JspServlet 以在运行时编译 JSP 文件（该项目基于嵌入式 Jetty 实现）。该类似乎是 Jetty JSP 引擎的一部分，该引擎似乎包含在 Tomcat 和 Glassfish 中。我的问题是包含此类的 JAR 文件的官方来源是什么？

到目前为止，我发现的最好的来源是 Maven 存储库，但是，我假设 Web 上的某个地方有一个官方 Jasper 项目可以创建原始 JAR 文件......毕竟 Maven 存储库从哪里得到这个文件从？我只是想确保我获得了最新最好的课程版本，因为网上似乎有很多版本，其中很多存储库缺少东西或具有其他人没有的文件版本。

谢谢，哈利

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T22:25:33.603

我一直在寻找同样的东西，我找到的最接近的是 Tomcat 源代码存储库。

这是用于 Tomcat v7.0.x 的文件夹

[http://svn.apache.org/repos/asf/tomcat/tc7.0.x/trunk/java/org/apache/jasper/](http://svn.apache.org/repos/asf/tomcat/tc7.0.x/trunk/java/org/apache/jasper/)

你可以在这里找到其他版本

[http://tomcat.apache.org/svn.html](http://tomcat.apache.org/svn.html)

这可以解释为什么一些 maven 存储库将 Jasper 打包在一个文件夹中，例如

%repository%/org.apache.tomcat/jasper

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-16T12:49:11.757

除了 Tomcat 项目中维护的项目外，没有 Jasper 项目。源代码可以在 svn.apache.org/repos/asf/tomcat/trunk/ 找到所有 apache 项目都在 apache.org 上列出，Jasper 是一个 apache 产品，但它在 Tomcat 的保护伞下。

# jquery - 来自 JS 的 jQuery 移动弹出式调用

> ID：13039332
> 
> 赞同：3
> 
> 时间：2012-10-23T21:12:56.703
> 
> 标签：jquery, mobile, popup

我已经定义了弹出 div，我想在某个事件上打开，而不是使用 href。我已经定义了弹出 div，例如：

```
<div data-role="popup" id="popupDialog" data-overlay-theme="a" data-theme="c" style="max-width:400px;" class="ui-corner-all">        
        <div data-role="header" data-theme="a" class="ui-corner-top">
            <h1>Sample Page</h1>
        </div>
        <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">                
            <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">OK</a>    
        </div>
    </div> 
```

我试着调用这个弹出 div

```
$("#popupDialog").popup;
$("#popupDialog").popup();
$("#popupDialog").popup("open"); 
```

他们都没有工作。任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:37:16.530

前几天我正在这样做，这就是它对我的工作方式。该代码在[jsFiddle 上，因此您可以查看它，](http://jsfiddle.net/jb8Jx/)这里也是一致性问题的代码。此外，您可能需要确保您引用的是[最新的 1.2 版本](http://jquerymobile.com/download/)。

此 js 代码位于`</head>`标记之前：

```
$(document).ready(function(){
    $( "#popupLogin" ).popup( "open" );            
});​ 
```

html:

```
<!DOCTYPE html>
<html>
<head>
    <title>test</title>
</head>
<body>    
    <section id="home" data-role="page">
        <header data-role="header">
            <h1>test page</h1>
        </header>

        <div data-role="popup" id="popupLogin" data-theme="a" class="ui-corner-all">
            <h3 class="centerText">Register free!</h3>
            <div class="popup">
                <form>                
                      <input type="email" name="email" id="email" class="centerText" placeholder="email" data-theme="a"/>
                      <button type="submit" data-theme="b">Sign me up</button>

                      <p class="centerText">
                          text1<br/>
                          text2<br/>
                          etc...<br/>
                      </p>                
                </form>
            </div>
        </div>        
    </section>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T09:24:09.510

这个问题在 [这里得到了回答](https://stackoverflow.com/questions/17559883/jquery-mobile-popup-is-not-opening-on-popupopen)

```
$(document).on({
    "pageinit": function () {
        alert("pageinit");
        //$("#popupBasic").popup('open'); will throw error here because the page is not ready yet
        //simulate ajax call here
        //data recieved from ajax - might be an array, anything
        var a = Math.random();
        //use this to transfer data betwene events
        $(this).data("fromAjax", a);
    },
    //open popup here
    "pageshow": function () {
        alert("pageshow");
        //using stored data in popup
        $("#popupBasic p").html("Random : " + $(this).data("fromAjax"));
        //open popup
        $("#popupBasic").popup('open');
    }
}, "#page1"); 
```

[http://jsfiddle.net/hungerpain/MvwBU/](http://jsfiddle.net/hungerpain/MvwBU/)

# css - 使用 css、twitter-bootstrap 和 simple_form 为单个布尔值分组复选框

> ID：13039336
> 
> 赞同：0
> 
> 时间：2012-10-23T21:13:02.423
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, formatting, simple-form

你能帮我格式化这个simple_form吗？

我正在使用这种形式：

```
<%= simple_form_for @my_model, :html => { :class => 'form-horizontal'} do |f| %>
<%= f.error_notification %>
    <div class="form-inputs">
      <%= f.input :some_text, :input_html => {:class => "span6", :rows => 2}%>
      <%= f.input :a_description, :input_html => {:class => "span6", :rows => 2}%>  
      <%= f.input :boolean1%>
      <%= f.input :boolean2%>
      <%= f.input :boolean3%>
      <%= f.input :boolean4%>
      <%= f.input :boolean5%>
      <%= f.input :boolean6%>
      <%= f.input :boolean7%>
      <%= f.input :boolean8%>
      <%= f.input :id, :as => :hidden, :input_html => { :value => @my_model.id }%>
  </div>
  <div class="form-actions">
    <%= f.button :submit, :class => 'btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                special_path, :class => 'btn' %>
  </div>
<% end %> 
```

我想将布尔值显示为两列复选框，每列垂直堆叠有 4 个复选框。

就像是

```
Some text:      [input]
A description:  [input] 
                bool1    bool5
                bool2    bool6
                bool3    bool7
                bool4    bool8 
```

我在这里克隆了 git 存储库[http://simple-form-b​​ootstrap.plataformatec.com.br/articles/new](http://simple-form-bootstrap.plataformatec.com.br/articles/new)，查看代码，运行它，我发现它有效。
但是......它适用于存储在字符串中的一系列复选框选项。我有一个具有 8 个布尔值的模型，无法理解如何使用 rails、css、twitter-bootstrap 和 simple_form 将它们正确分组。

我已经阅读了这篇 SO 帖子：[将所有输入字段放在同一行](https://stackoverflow.com/questions/10776429/make-all-input-fields-on-the-same-line)
......还有这个：[在 Rails 中使用 simple_form、nested_form 和 Twitter Bootstrap 添加控件](https://stackoverflow.com/questions/11479381/adding-controls-inline-with-simple-form-nested-form-and-twitter-bootstrap-in-ra)

...但它们似乎不适合我的特殊情况，我没有想法尝试。

请尝试将您的答案集中在一个特定的代码示例上，该示例显示如何以某种分组方式为单个布尔值布局复选框。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:21:16.523

我过去只使用普通的网格控件制作了多列引导表单。在您的情况下，类似于：

```
<div class="form-inputs">
  ...
  <div class="row">
    <div class="span6">
      <%= f.input :boolean1 %>
      <%= f.input :boolean2 %>
      ...
    </div>
    <div class="span6">
      <%= f.input :boolean5 %>
      <%= f.input :boolean6 %>
      ...
    </div>
  </div>
  ...
</div> 
```

然后，您可以使用不同的`span`和`offset`类来调整这些列。

# javascript - 使用变量访问对象类

> ID：13039344
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:13:51.977
> 
> 标签：javascript

> **可能重复：**
> [Javascript - 当标识符字符串存储在 var](https://stackoverflow.com/questions/2349411/javascript-access-object-member-when-identifier-string-is-stored-in-a-var)
> [javascript 对象中时访问对象成员，访问变量属性名称？](https://stackoverflow.com/questions/4255472/javascript-object-access-variable-property-name)

我定义了一个对象：

```
var TitlePrice = new Object();
TitlePrice.noEdit   = 1;
TitlePrice.BW       = 2;
TitlePrice.PicPaint = 3; 
```

现在我定义一个变量，例如：

```
var curren="BW"; 
```

如何使用`current`变量访问 TitlePrice.BW？，例如：

```
TitlePrice.$current 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:32:49.120

使用数组访问表示法。

```
var a = {};
a.BW = 2;

var b = 'BW';
a[b] === 2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T21:21:48.213

我不确定您要做什么。但，

```
var curren="BW"; 
```

正在创建一个变量并将字符串“BW”分配给它。

还，

```
TitlePrice.$current 
```

将返回 undefined，因为您没有在名为 $current 的对象上定义属性。如果您希望将 TitlePrice.BW 的值分配给变量 curren，您需要执行以下操作：

```
var curren = TitlePrice.BW; 
```

# sql-server - SQL Server 2008 R2：恢复单个文件组

> ID：13039345
> 
> 赞同：1
> 
> 时间：2012-10-23T21:13:56.923
> 
> 标签：sql-server, sql-server-2008, database-restore

不确定这是否与[https://stackoverflow.com/questions/2951016/sql-server-2005-partial-filegroup-restore-on-qa-database](https://stackoverflow.com/questions/2951016/sql-server-2005-partial-filegroup-restore-on-qa-database)重复，但如果是这样，我道歉（即使不是回答）。

我在 SQL2008R2 上有一个包含多个 (3) 文件组的数据库。该数据库的生产和开发副本位于不同的服务器上。

我已经从生产中创建了 PRIMARY 文件组的文件组备份，并希望在开发服务器上恢复它。我不想尝试备份/恢复整个数据库，因为其中一个文件组包含近 1TB 的数据，并且服务器在地理位置上很远。

我已经尝试使用“部分恢复”来恢复文件组备份，现在我可以访问该文件组中的数据，但是我无法访问其他文件组中的数据（我现在正在第三台服务器上测试这个，所以我并没有真正失去任何东西）。

我什至不确定我正在尝试做的事情是否可能（而且它开始看起来好像不是），任何人都可以阐明我还可以做什么来实现我的目标。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:00:33.050

您无法恢复 PRIMARY 文件组*并*保留对其他两个文件组中的恢复前数据的访问权限。它根本不是它的工作原理，如果你稍微考虑一下数据一致性，你会发现它不可能以任何其他方式工作。

恢复 PRIMARY 文件组后，您**必须**继续恢复其他文件组，否则无法访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:54:43.603

Red Gate 有一个[对象级恢复工具](http://www.red-gate.com/products/dba/sql-olr-native/)，可让您选择要恢复的对象。

我只用过一次，但效果很好。非常容易使用。您基本上只需选择备份文件，选择要恢复的对象，选择要将它们恢复到的服务器和数据库，然后您可以选择保存脚本或立即恢复。

下载 14 天免费试用版，看看它是否符合您的需求。

需要注意的是，它目前不支持 SQL 2012 备份。我确信这是在工作中。

# c# - 使用客户端开发人员提供的服务证书和自签名客户端证书的 Java 客户端 WCF 服务

> ID：13039355
> 
> 赞同：3
> 
> 时间：2012-10-23T21:14:30.590
> 
> 标签：c#, wcf, ssl, authentication, java-client

我正在开发一个基于供应商实现的 WCF 服务，以从他们那里接收数据。我有一个使用单向 SSL 的服务的工作版本，客户端使用我们的服务器证书。由于最近对他们的实现进行了更改，我现在需要使用证书而不是用户名和密码来验证他们的客户端。

他们用 Java 开发，我无法控制客户端或他们生成证书的方式。它们不支持 WSHttpBinding，所以我必须使用 BasicHttpBinding。他们的证书是自签名的，很遗憾在生产中也是如此。我尝试使用 Transport 来保证安全性，根据我们的服务器管理员的说法，他们的证书已正确安装在我们的服务器上（我无权访问我们的 IIS 服务器）。我相信 IIS 存在证书问题，因为它是自签名的，所以我放弃了该实现。

经过大量研究后，我确定只有通过从`OperationContext.Current.ServiceSecurityContext.AuthorizationContext.ClaimSets[0]`. 这是我的第一个 WCF 服务，所以我相信我已经正确设置了它，但是在从我的 WCF 测试客户端进行测试时出现以下错误：`The private key is not present in the X.509 certificate`. 当我从他们的客户那里得到供应商测试时，他们得到了`An error occurred when verifying security for the message.`

我有什么配置不正确吗？是否支持此实现？

服务 Web.Config：

```
<?xml version="1.0"?>
    <configuration>
        <system.serviceModel>
                 <behaviors>
                <serviceBehaviors>
                    <behavior name="FileReceiverServiceBehavior">
                        <useRequestHeadersForMetadataAddress/>
                        <serviceMetadata httpsGetEnabled="true"/>
                    </behavior>
                </serviceBehaviors>
            </behaviors>
            <bindings>
                <basicHttpBinding>
                    <binding name="FileReceiverServiceBinding">
                        <security mode="TransportWithMessageCredential">
                            <message clientCredentialType="Certificate"/>
                        </security>
                        <readerQuotas maxStringContentLength="2147483647"/>
                    </binding>
                </basicHttpBinding>
            </bindings>
            <services>
                <service behaviorConfiguration="FileReceiverServiceBehavior" name="FileReceiverService.FileReceiverService">
                    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="FileReceiverServiceBinding" contract="FileReceiverServiceSoap" bindingNamespace="http://www.openuri.org/" />
                    <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
                </service>
            </services>
        </system.serviceModel>
    </configuration> 
```

我的 WCF 测试客户端配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="test">
          <clientCredentials>
            <clientCertificate findValue="Users"
                               x509FindType="FindBySubjectName"
                               storeLocation="LocalMachine"
                               storeName="My"/>
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_FileReceiverServiceSoap" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="Certificate" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://mydomain.com/vendor/FileReceiverService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_FileReceiverServiceSoap"
        contract="ServiceReference1.FileReceiverServiceSoap" name="BasicHttpBinding_FileReceiverServiceSoap" behaviorConfiguration="test" />
    </client>
  </system.serviceModel>
</configuration> 
```

## **更新：**

供应商向我发送了正确的证书。它是由商业 CA 颁发的有效证书。当我在本地查看证书时，我可以看到到受信任根的链，并且状态显示为“OK”。

如果我使用`security mode="Transport"`并`transport clientCredentialType="Certificate"`得到：HTTP 请求被客户端身份验证方案“匿名”禁止

如果我使用`security mode="TransportWithMessageCredential"`并`message clientCredentialType="Certificate"`得到： X.509 证书中不存在私钥。

我想我可能需要严格使用传输，以便它可以与 Java 客户端互操作，所以我专注于“客户端身份验证方案‘匿名’禁止 HTTP 请求”错误。这是 IIS 设置的问题，还是只是在证书到达服务器时无法正确验证证书？证书在受信任的人中，我没有尝试任何客户端，`certificateValidationMode`但也和. 任何帮助将不胜感激。`PeerTrust``ChainTrust``PeerOrChainTrust`

## **更新2：**

我专注于让它与我的原始服务器配置的以下更改以及与我的测试客户端的匹配更改一起工作：

```
<security mode="Transport">
  <transport clientCredentialType="Certificate"/> 
```

我仍然得到：*客户端身份验证方案 'Anonymous' 禁止 HTTP 请求*。[我在这里](http://blog.coditate.com/2009/04/confusing-errors-using-wcf-transport.html)找到了一个解释，基本上可以确认客户端证书无法被服务器验证。我如何让我们的服务器管理员在 IIS 中配置此应用程序并安装证书以使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:24:35.610

在我们的评论中进行了长时间的讨论之后，我将向您指出文章[WCF 中 X.509 证书的九个简单步骤](http://www.codeproject.com/Articles/36683/9-simple-steps-to-enable-X-509-certificates-on-WCF)。我知道这只是一个链接，但这是一篇很长的文章。

似乎您的问题实际上是您的客户没有可以对其进行身份验证的证书。在您正在争取的方案中，每个客户端都需要有一个私钥来识别它们，并且服务器/服务需要有相应的公钥来验证签名（至少安装在密钥库中）。

您当前的设置似乎每个客户端都将服务器的公钥作为受信任的服务器。因此，您可以让它们通过 SSL 连接和加密，客户端将信任服务器，但服务器实际上不知道客户端是谁，或者至少无法在没有识别它们的情况下对它们进行身份验证。您之前使用用户名和密码的方式是之前识别它们的方式，但现在使用 x.509 证书，每个拥有用户名-密码组合的人都需要一个带有私钥的唯一证书，以便进行身份验证。

然后，您需要将这些用户映射到 Windows/LDAP 帐户以便于管理和访问控制，或者您需要实施[自定义验证器](http://www.codeproject.com/Articles/33872/Custom-Authorization-in-WCF)（可能还有 IIdentity、主体和服务凭证）以验证私有证书并“登录”用户。

我希望这对您有所帮助。 [这是关于 x509 自定义身份验证和验证的另一个](http://architecturebyashwani.blogspot.com/2010/01/wcf-client-authentication-using-x509.html)

编辑：响应 Update2，尝试在 SSL 设置下将 IIS 站点/应用程序设置为“IGNORE User Certificates”，并查看是否出现不同的错误，反之亦然。如果您将其设置为需要，但在代码中没有启用[ASP 兼容](http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx)模式，则 IIS 不会通过 IIdentity，除非您在 IIS 中设置了某种身份验证方案，否则它不会为您做任何事情。如果您将此设置为忽略，您可以快速设置自定义验证器并查看证书通过，然后您可以在其上构建链并在其上创建某种授权。

# django - Django 测试 json 转储视图

> ID：13039358
> 
> 赞同：0
> 
> 时间：2012-10-23T21:14:39.983
> 
> 标签：django, unit-testing, testing, django-testing

嗨，我有这样的看法：

```
def AjaxPopulate(request):
    colour = request.GET.get('colour_id')
    if colour is None:
        return HttpResponseBadRequest()

    qs = Thing.objects.select_related()
    things = get_list_or_404(qs, colour=colour)
    data = []
    for x in things:
        data.append({
            'id': x.id,
            'name': unicode(x),
        })
    return HttpResponse(simplejson.dumps(data), mimetype='application/json' 
```

与此网址挂钩：

```
url(r'^ajax_populate/$', 'colours.views.AjaxPopulate', name='ajax_populate'), 
```

在我的测试中，我有：

```
def setUp(self):
    self.client = Client()
    user = User.objects.create_superuser('foo', 'myemail@test.com', 'bar')
    colour1 = Colour.objects.create(colour='Green')
    thing1 = Thing.objects.create(name='Leaf', colour=colour1, description='foo')

def test_ajax_populate(self):
    response = self.client.get('/colours/ajax_populate/', {'colour_id': 1}) 
    self.assertEqual(response.status_code, 200) 
```

但是，我收到一个`AssertionError: 404 != 200`错误。

我究竟做错了什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:59:48.963

最终代码有效。

**测试.py**：

```
class ViewTests(TestCase):
    """
    Run before each test in class
    """
    def setUp(self):
        self.client = Client()
        self.user = User.objects.create_superuser(
            'foo',
            'myemail@test.com',
            'pass'
        )
        self.colour = Colour.objects.create(colour='Green')
        self.thing = Thing.objects.create(
            name='Leaf',
            colour=self.colour,
            description='leafy'
        )
        self.logged_in = self.client.login(
            username='foo',
            password='pass'
        )

    """
    Test ajax call
    """
    def test_ajax_populate(self):
        response = self.client.get(tests.py
            reverse('ajax_populate'),
            {'colour_id': self.colour.pk})
        self.assertEqual(response.status_code, 200) 
```

# java - 添加新的权限组android

> ID：13039360
> 
> 赞同：0
> 
> 时间：2012-10-23T21:14:43.433
> 
> 标签：java, android, android-framework

我正在开发一个项目，以在 android 设备中提供一定的共享功能。为此，我创建了一个系统服务。现在，当在应用程序中调用该服务时，它基本上获得了开发人员在 AndroidManifest.xml 中设置的权限。现在我的服务在应用程序的上下文中工作。我希望该服务通过蓝牙/ wifi 共享一些数据。为此，我假设有两种方法-

1.  创建一个新的权限组并修改 PackageManager 以了解这个新的权限集。
2.  而不是使用全局系统上下文（类似于 root 用户）传递应用程序上下文。我不确定这一点。是否允许我这样做。 `public DataSharingService(Context context) { super(); this.mContext = context;}` 我可以用其他方式初始化 this.mContext 来实现这一点并拥有不同的权限集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:45:39.497

我猜你需要创建一个自定义系统服务。该服务将在 SystemServer 的上下文中运行，因此它将获得执行几乎所有操作的权限。然后，在您的应用程序中，您可以使用此服务（但您需要为此更新 SDK）。

# php - cakephp 查找所有没有特定 habtm 标记的帖子

> ID：13039361
> 
> 赞同：0
> 
> 时间：2012-10-23T21:14:48.043
> 
> 标签：php, mysql, cakephp, has-and-belongs-to-many

看起来很简单，但预期的查询不起作用。下面的代码只是为了说明我的观点。实际模型还有其他一些条件等，但即使我将它们全部剥离到如下基本的东西，我也没有得到任何结果。

我已经尝试过使用可链接和手动连接。

```
$posts = $this->Post->find("all", array(
"conditions"=>array(
    "Tag.id !="=>$bad_id
),
"link"=>array("Tag")
)); 
```

$posts 返回空数组。

# javascript - 使用 Javascript、setInterval 循环浏览横幅广告

> ID：13039364
> 
> 赞同：-2
> 
> 时间：2012-10-23T21:15:04.650
> 
> 标签：javascript

我现在真的在 JS 中挣扎。我今天花了几个小时来进出更改代码，但我无法让它工作：我知道数组或循环可能会更好，但我现在什至无法让基本代码工作。谢谢 ：）

“使用五个图像；创建一个循环显示图像的脚本，使用 setInterval 将每个图像显示 5 秒钟。”

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http-//www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="">

<head>
    <title>Concerts</title>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript">
    /* <![CDATA[ */
    var curImage = "concert5";

    function bannerAd() {
        if (curImage == "concert1") {
            document.images[0].src= "images/concert2.gif";
            curImage = "concert2.gif";
        {

        if (curImage == "concert2") {
            document.images[0].src= "images/concert3.gif";
            curImage = "concert3";
        }

        if (curImage == "concert3") {
            document.images[0].src= "images/concert4.gif";
            curImage = "concert4";
        }

        if (curImage == "concert4") {
            document.images[0].src= "images/concert5.gif";
            curImage = "concert5";
        }

        if (curImage == "concert5") {
            document.images[0].src= "images/concert1.gif";
            curImage = "concert1";
        }
    }
/* ]]> */
</script>
</head>
<body onload= "curImage = setInterval('bannerAd()',5000);">
    <img src = ??? width="462" height="87" alt="Concert ads"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:21:33.063

您可以大量清理代码：

```
var images = ['images/concert1.gif', 'images/concert2.gif', 'images/concert3.gif', 'images/concert4.gif', 'images/concert5.gif'];
var current = 3;

function rotate() {
    document.getElementById('image').src = images[current];
    current = (current + 1) % images.length;

}

window.onload = function() {
    rotate();
    setInterval(rotate, 5000);
} 
```

另外，更改您的 HTML。当元素具有 时，更容易定位元素`id`：

```
<img id="image" width="462" height="87" alt="Concert ads" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:35:27.793

你的代码有很多问题。

*   您输入`curImage = "concert2.git";`然后简单地测试`"concert2"`
*   JavaScript 中的数组从 0 开始，你使用`document.images[0]`
*   `setInterval`返回一个可以使用的数字`clearInterval`
*   更多的是偏好问题，但 CDATA hack 是古老的，不再需要使用。

这是我的建议：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http-//www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="">

<head>
    <title>Concerts</title>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
</head>
<body>
    <img id="theImage" width="462" height="87" alt="Concert ads"/>

    <script type="text/javascript">
    var curImage = 5, theImage = document.getElementById('theImage');

    function bannerAd() {
        theImage.src = 'images/concert' + curImage + '.gif';
        curImage = curImage % 5 + 1;
    }
    bannerAd(); // Set theImage to the initial image, in this case, concert5.gif
    setInterval(bannerAd, 5000);
    </script>
</body>
</html> 
```

注意我是如何将`<script>`标签移动到正文的底部的：这是为了在我们的脚本执行时已经加载了 DOM 文档。

另请注意，我不是手动检查 Concert1、Concert2 等，然后设置下一个，而是存储一个数字而不是字符串并使用模运算符 (%)。此运算符返回其操作数的其余部分（因此 10 % 3 将计算为 1）。您可以使用它在某个点“环绕”一个数字。我使用它来`curImage`进行 1、2、3、4、5、1、2、3、4、5 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:18:45.840

`document.images[1]`将是`<img>`文档上的第二个标签，但您只有一个。我相信你在寻找`document.images[0]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T19:36:43.423

我和我刚接触 jss 的人一样挣扎，并且像迷宫一样令人困惑。这就是我从你们推荐的内容中得到的。它通过了 W3C 验证，但在我的页面上没有显示任何 imgs。

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css">
    </style>
    <title>Concert Series</title>
<script type="text/javascript">
/* <![CDATA[ */
var images = ['images/concert1.gif', 'images/concert2.gif', 'images/concert3.gif', 'images/concert4.gif', 'images/concert5.gif'];
var current = 3;

function rotate() {
    document.getElementById('image').src = images[current];
    current = (current + 1) % images.length;

}

window.onload = function() {
    rotate();
    setInterval(rotate, 5000);
}
/* ]]> */
</script>
</head>
<body>
<h1>Consert Series</h1>
<img src=concert1.gif/concert2.gif/concert3.gif/concert4.gif/concert5.gif id="image" width="462" height="87" alt="Concert ads" />
</body>
</html> 
```

# php - 在 MySQL 行字段中排序/解析异构 CSV 分隔的文本值

> ID：13039367
> 
> 赞同：0
> 
> 时间：2012-10-23T21:15:23.063
> 
> 标签：php, mysql, regex, perl, csv

我有一个类似于以下的数据集 - 我对正则表达式非常生疏，尽管尝试了几次微不足道的尝试，但我对“走树”一无所知 - 由于各种术语类/标签的 asinine 组织，Excel 中的文本到列没有帮助在 EFFECT_DATA 字段和手动调整引入的错误。

### 样本数据

```
ROW_ID|NAME   | UNORDERED_CSV_CONCATD_TAG_DATA_STRING

123456|Prod123|"Minoxidistuff [MoA], Direct [PE], Agonists [EPC]"
123457|Prod124|"Minoxion [Chem], InterferonA [EPC], Delayed [PE]"

123458|Prod125|"Anotherion [EPC], Direct [MoA], Agonists [EPC]"
123459|Prod126|"Competitor [PE], Progestin [EPC], Agonists [EPC]"
123460|Prod127|"Minoxidistuff [Chem]" 
```

### 采样所需的数据输出：

```
PRODUCT|EPC      |
Prod125|Antherion|
Prod125|Agonists |

PRODUCT|CMPD         |
Prod127|Minoxidistuff|
Prod124|Minoxion    | 
```

如果有意义的话，对于 product[i]tag[j] 的所有标签等，基本上是 ea。CSVD_TAG_DATA 字段无序并包含多个标签（位于所需术语的末尾。

我开始只是一种多维散列方法，即原谅我被屠杀的正则表达式伪代码。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:41:28.333

这是 Perl 方法。将下面的代码另存为 parser.pl。运行它，`perl parser.pl data.csv`其中 data.csv 是您的数据文件的名称。（或使其可执行并运行`./parser.pl data.csv`。）

```
#!/usr/bin/perl -w

use strict;

# Take in the first arguement as the file
my $file = $ARGV[0];

# open a filehandle
open (my $fh, '<', $file);

# Well predefine a hashref
my $products = {};

# Loop through the file
while (<$fh>) {

        # remove line breaks
        chomp;

        # split into our primary sections
        my ($id, $product, $csv) = split(/\|/);

        # skip a header line
        next if ($id =~ /\D/);

        # remove the quotes
        ($csv) = ($csv =~ /"(.*)"/);

        # split the CSV an a comma possibly followed by a space
        my @items = split(/,\s*/, $csv);

        # loop through each item in the csv
        foreach my $item(@items) {

                # Our keys and values are reversed!
                my ($value,$key) = ($item =~ /(.*)\[(.*)\]/);

                # Remove trailing whitespace
                $value =~ s/\s+$//;

                # If the arrayref does not exist then create it
                # Otherwise add to it
                if (!exists($products->{$key}->{$product})) {
                        $products->{$key}->{$product} = [$value];
                } else {
                        push(@{$products->{$key}->{$product}}, $value);
                }

        }

}

# We have a nicely formed hashref now. Loop through and print how we want

foreach my $key(keys %$products) {

        # Header for this section
        print "PRODUCT|$key\n";

        # Go through each product and print the different values
        foreach my $product(keys %{$products->{$key}}) {

                while (my $value = shift(@{$products->{$key}->{$product}})) {
                        print "$product|$value\n";
                }

        }

        # Add a space to divide the groups cleanly
        print "\n";

} 
```

样本输出：

```
PRODUCT|MoA
Prod123|Minoxidistuff
Prod125|Direct

PRODUCT|Chem
Prod127|Minoxidistuff
Prod124|Minoxion

PRODUCT|PE
Prod123|Direct
Prod124|Delayed
Prod126|Competitor

PRODUCT|EPC
Prod123|Agonists
Prod124|InterferonA
Prod126|Progestin
Prod126|Agonists
Prod125|Anotherion
Prod125|Agonists 
```

# ruby-on-rails - 如何以编程方式获取 Mongoid 正在写入的当前数据库？

> ID：13039368
> 
> 赞同：14
> 
> 时间：2012-10-23T21:15:28.103
> 
> 标签：ruby-on-rails, mongodb, mongoid, mongodb-ruby, mongoid3

我正在使用 Mongoid 与带有导轨的 Mongoid.override_database("database_name") 与多个数据库交谈。如何以编程方式查找当前数据库？

会话上的 Mongoid 文档：http://mongoid.org/en/moped/docs/driver.html[定义](http://mongoid.org/en/moped/docs/driver.html)了覆盖数据库的方法，但没有定义获取当前数据库使用的方法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-23T21:30:13.123

知道了！

```
Mongoid.default_session.options[:database] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-09-22T00:38:23.440

得到这个的新方法是

```
Mongoid::Config.clients["default"]["database"] 
```

你也可以看看

```
Mongoid::Config.clients 
```

看看还有什么可用的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-25T14:13:31.377

如果您想要覆盖的数据库，您实际上需要使用

```
Mongoid::Threaded.database_override 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-22T07:29:32.153

运行 Mongoid.default_session.options[:database] 会给出 default_session 无效的错误。现在是 default_client。这非常有效。

在没有 [:database] 的情况下运行它以获取所有选项并查看数据库的完整配置。

Mongoid::Config.clients["default"]["database"] 假设您**没有**使用 uri 版本的 mongoid.yml。在所有情况下，您都将得到 nil。使用 Mongoid::Config.clients["default"] 获取当前数据库的完整配置，或使用 Mongoid::Config.clients["default"]['uri'] 为您提供完整的 uri。

从最后一个端口号 / 之后的 URI 中选择数据库名称。如果使用分片配置，可能会有多个

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-06T14:38:18.393

Mongoid 版本 7.0.5

```
Mongoid.client(:default).database 
```

# objective-c - 这个objective-c有什么问题，将数据从一个视图传递到另一个IOS

> ID：13039377
> 
> 赞同：0
> 
> 时间：2012-10-23T21:16:30.720
> 
> 标签：objective-c, ios

我正在尝试为 UITableViewController 上的字符串变量分配一个值，并将其推送到我的 navigationController。

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
// now you can use cell.textLabel.text
NSMutableString *v = [[NSMutableString alloc] init];
[v setString:cell.textLabel.text];

DCAArtistViewController *dvController = [[DCAArtistViewController alloc] init];

if ([v isEqual:@"UK"]) {

    dvController.st =@"75";

}

[self.navigationController pushViewController:dvController animated:YES]; 
```

我努力了

```
[dvController.st setString:@"75"]; 
```

在加载的视图上，我有一个始终显示为空的 NSLog。

```
 NSLog(@"The st is%@",st); 
```

我究竟做错了什么？我看到的示例显示了分配给视图控制器上的属性，例如 dvController.st =@"75";

DCAArtistViewController .h

```
#import <UIKit/UIKit.h>

@interface DCAArtistViewController : UITableViewController{

NSString *st;
NSMutableArray *aa;

}
@property (nonatomic, retain) NSMutableArray *listOfItemss;
@property (nonatomic, retain) NSString *st;
@property (nonatomic, retain) NSMutableArray *aa;

@end 
```

这是 DCAArtistViewController 的开始（加载的视图）

```
@implementation DCAArtistViewController
@synthesize listOfItemss;
@synthesize st;
@synthesize aa;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {

    aa = [[NSMutableArray alloc] init];
    NSLog(@"The st is%@",st);
    NSLog(@"The self st is%@",st); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:35:08.943

我懂了。在您的头文件中，您同时拥有：

```
@interface DCAArtistViewController : UITableViewController{
    NSString *st;
}

@property (nonatomic, retain) NSString *st; 
```

这意味着从技术上讲，您要声明两个变量，在本地命名为`_st`and `st`(`_st`由为属性生成的 getter/setter 管理)

设置字符串时，从技术上讲，您将其设置为`-st`，因为您`.`在`dvController.st =@"75";`. 使用 时`NSLog`，您正在尝试打印`st`.

**解决方案：**从你的界面中删除`NSString* st`，如果你也有一个属性，你就不需要它。在 中`NSLog`，使用`NSLog(@"The st is%@",_st);`或`NSLog(@"The st is%@",self.st);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:34:19.557

问题很简单。您正在登录`st`您的`init`方法。但是在调用方法`st`之后才设置属性。`init`

# c# - 为什么.net 在初始化二维数组时不分配内存？

> ID：13039379
> 
> 赞同：8
> 
> 时间：2012-10-23T21:16:32.503
> 
> 标签：c#, memory, multidimensional-array

```
 var a = new double[7000,7000];

 FillValue(a,3); 
```

`a`在执行第一行之后，.Net 似乎实际上并没有分配任何内存。只有在运行`FillValue`调用时，它才会**逐渐**消耗内存。（大约 400MB）

任何人都可以向我提供有关它的更多详细信息吗？我以为`a`默认初始化后都是0，怎么可能不占内存呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T21:22:16.483

在 Windows 中有两种“分配内存”的方法：“保留”和“提交”内存。

任务管理器只显示“物理内存使用历史”；当您分配数组时，.NET VM 显然只使用保留的内存，然后返回并提交使用的部分。

通过这种方式，您可以在不实际占用的情况下保留内存，这更有效，并且根据 MSDN 的说法，保留内存“保留了进程的虚拟地址空间范围，而无需在内存或磁盘上的页面文件中分配任何实际物理存储”。这就是为什么任务管理器不显示它的原因。

[`VirtualAlloc`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887(v=vs.85).aspx)您可以在 MSDN 上的页面上阅读有关它的更多信息。

这是一个实现细节，所以你不应该依赖它或任何东西。例如，Mono VM 的行为可能会有所不同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-23T21:22:29.157

实际上它分配内存，如您在此处看到的：

[http://ideone.com/Cd4BR1](http://ideone.com/Cd4BR1)

```
Console.WriteLine("Memory before: {0}",GC.GetTotalMemory(true));
var a = new double[5000,5000];
Console.WriteLine("Memory after: {0}",GC.GetTotalMemory(true));

Memory before: 118784 
Memory after: 200224768 
```

（需要减小数组的大小以防止出现`OutOfMemoryException`on ideone）

[`GC.GetTotalMemory`方法](http://msdn.microsoft.com/en-us/library/system.gc.gettotalmemory.aspx)

检索当前认为分配的字节数。

# objective-c - 为什么这个屏幕尺寸范围是错误的？

> ID：13039382
> 
> 赞同：2
> 
> 时间：2012-10-23T21:16:36.040
> 
> 标签：objective-c, ios, cocoa-touch

我试图解释一些事情，所以我创建了一个测试项目。我创建了一个单视图应用程序，仅设置纵向（在项目摘要中）并隐藏状态栏（在 ViewController.xib 中）。

在`ViewController.m`我写了一个小方法来检测我的触摸点：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch* touch = [touches anyObject];
    CGPoint point = [touch locationInView:[self view]];
    NSLog(@"%@", NSStringFromCGPoint(point));
} 
```

理论上，我现在应该有一个宽度为 320，高度为 480 的显示器。

因此，如果我开始在宽度上滑动，我将在命令行中看到 0...320 范围内的值这里我没有问题，实际上我的值在 2,5 ... 317 范围内。

因此，如果我开始在高度上滑动，我将在命令行中看到 0...480 范围内的值。但是，在这里我有问题。在实践中，这个范围是 -5.5...469。

我不明白为什么会这样？这个范围很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:48:40.320

您需要`locationInView`将`rootViewController`. 此方法表示的坐标是相对于您正在传递的视图的。

# c# - asp.net 菜单 javascript 调用

> ID：13039388
> 
> 赞同：0
> 
> 时间：2012-10-23T21:17:03.377
> 
> 标签：c#, javascript, jquery, asp.net, ajax

我有一个 javascript 函数，可以在 tabcontainer 上打印出活动网格（取决于活动选项卡）

当我只使用客户端调用我的打印功能时，我可以打印。

相反，现在我想使用我的 asp.net 菜单并添加了打印功能。

我想按下这个按钮来调用我的javascript。

正在调用 c# 代码，但 javascript 只是显示尚不存在网格。

页面完全加载后是否必须调用javascript？如果是这样怎么办？

谢谢达摩

**Javascript**

```
<script type="text/javascript">
    function PrintGridData() {
        //var Tab_Name = $(".ajax__tab_active").first().attr('id');
        alert($(".ajax__tab_active").first().attr('id'));
        switch ($(".ajax__tab_active").first().attr('id')) // Switch based on the on active Tab ID
        {
            case 'TabContainerMain_Tab_Monitor_tab':
                var printContent = document.getElementById('<%= GridViewMain.ClientID %>');
                break;
            default:
                alert('Printing not supported');
                return;
        }
        if (printContent)  // See if the Grid Exists First
        {
            if (printContent.rows.length > 0) { // See if the Grid contains any rows

                var windowUrl = 'about:blank';
                var UserLoggedIn = $("#lblUser").text()
                var now = new Date();
                var strDateTime = [[AddZero(now.getDate()), AddZero(now.getMonth() + 1), now.getFullYear()].join("/"), [AddZero(now.getHours()), AddZero(now.getMinutes())].join(":"), now.getHours() >= 12 ? "PM" : "AM"].join(" ");
                var windowName = 'Report';
                var AuditPrintDetail = 'Report ' + UserLoggedIn + " " + strDateTime;
                var WinPrint = window.open(windowUrl, windowName, 'left=300,top=300,right=500,bottom=500,width=1000,height=500');
                WinPrint.document.write('<' + 'html' + '><head><link href="assets/css/Main.css" rel="stylesheet" type="text/css" />     <title>' + AuditPrintDetail + '</title> </head><' + 'body  style="background:none !important"' + '>');
                WinPrint.document.write(printContent.outerHTML);
                WinPrint.document.write('<' + '/body' + '><' + '/html' + '>');
                WinPrint.document.close();
                WinPrint.focus();
                WinPrint.print();
                WinPrint.close();
            }
            else {alert("No Results to print!");}
        }
        else {alert("No Grid to print!");}
    }

    function AddZero(num) {return (num >= 0 && num < 10) ? "0" + num : num + "";}
</script> 
```

**标记**

```
<div id="DivMenu">
                    <asp:Menu CssClass="Menu" ID="MenuMain" runat="server" Orientation="Horizontal" OnMenuItemClick="MenuMain_MenuItemClick">
                        <Items>
                            <asp:MenuItem Text="System" Value="System">
                                <asp:MenuItem Text="Logout" Value="Logout"></asp:MenuItem>
                                <asp:MenuItem Text="Print" Value="Print"></asp:MenuItem>
                            </asp:MenuItem>
                            <asp:MenuItem Text="Help" Value="Help">
                                <asp:MenuItem Text="About" Value="About"></asp:MenuItem>
                            </asp:MenuItem>
                        </Items>
                        <StaticHoverStyle BackColor="White" ForeColor="Black" />
                        <StaticMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" />
                        <StaticSelectedStyle BackColor="White" />
                    </asp:Menu>
                </div> 
```

**C＃**

```
 protected void MenuMain_MenuItemClick(object sender, MenuEventArgs e)
        {

                if (e.Item.Text == "About")
                {
                    AboutModal.Show();

                }

                if (e.Item.Text == "Logout")
                {
                    //Log the user out

                    FormsAuthentication.SignOut();
                    FormsAuthentication.RedirectToLoginPage();
                }

                if (e.Item.Text == "Print")
                {

                    ScriptManager.RegisterStartupScript(Page, GetType(), "JsStatus", "PrintGridData();", true);

                }
            } 
```

# salesforce - 修改机会的触发器，使其不会更新经理，如果它已被关闭/赢得

> ID：13039389
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:17:04.487
> 
> 标签：salesforce, apex-code, salesforce-service-cloud

我想知道是否有人可以帮助我修改此触发器。我遇到问题 机会在关闭/赢得后正在更新，这会用代表的当前经理覆盖旧的（正确的经理）。这是一个问题，因为我有一个创建 Actuals 的触发器，它正在编辑 Actuals 并将它们写入当前 Manager 而不是旧 Manager。我真的很困惑最好的编辑位置在哪里，如果在触发器旧地图中 StageName 是 Closed/Won 并且 StageName 目前等于 Closed/Won，则在 if 语句放置和 ifelse 语句开始之后的底部，然后不要'不更新当前实际值。这是触发器：

```
trigger CreateActualsAndTargets on Opportunity (after insert, after update) 
{
if(Trigger.isUpdate || Trigger.isInsert)   
{
  Map<ID,Opportunity> l_OpportunityOwners = new Map<ID,Opportunity> ([Select id,o.Owner.ManagerId,Contract_ID__c,StageName,Amount,AccountId,CloseDate, o.OwnerId, Type From Opportunity o where id in:trigger.newMap.keySet()]);
  GooalAndActuals l_oGooalAndActuals = new GooalAndActuals ();

  for(Opportunity l_oOpportunityNew:l_OpportunityOwners.values())
  {
    System.debug('********************Trigger Start***********************');
    if(l_oOpportunityNew.StageName=='Closed/Won')
    {
      ID SalesRepGoalID,ManagerGoalID;
      //modified
      l_oGooalAndActuals = new GooalAndActuals ();
      l_oGooalAndActuals.opportunityNew=l_oOpportunityNew;

      //Goal Creation
      SalesRepGoalID=l_oGooalAndActuals.CreateGoal(l_oOpportunityNew.OwnerId);//SalesRep Goal Creation
      if(l_oOpportunityNew.Owner.ManagerId!= null)
      {
        ManagerGoalID=l_oGooalAndActuals.CreateGoal(l_oOpportunityNew.Owner.ManagerId);//Manager Goal Creation
      }

      //Actual Deletion
      if(Trigger.isUpdate)
      {
        l_oGooalAndActuals.DeleteActual(l_oOpportunityNew.Id);

      }

      //Actual Creation
      l_oGooalAndActuals.CreateActual(l_oOpportunityNew.OwnerId,SalesRepGoalID);//SalesRep Actual Creation
      if(l_oOpportunityNew.Owner.ManagerId!= null)
      {
        l_oGooalAndActuals.CreateActual(l_oOpportunityNew.Owner.ManagerId,ManagerGoalID);//Manager Actual Creation
      }

    }

    /*
    Start: Project
    *   Author          |Author-Email            |Date       |Comment
    *   ----------------|------------------------|-----------|--------------------------------------------------
    *   Sakonent Admin  |abrar.haq@sakonent.com  |02.16.2012 |Initial code 
    *   Purpose: It will remove Actual record(s) associated to Opportunity if Stage goes from 'Closed/Won' to some other stage.
    */        
    else if(Trigger.isUpdate)
    {
        if(Trigger.oldMap.get(l_oOpportunityNew.Id).StageName == 'Closed/Won' && l_oOpportunityNew.StageName != 'Closed/Won')
        {
            l_oGooalAndActuals = new GooalAndActuals ();
            l_oGooalAndActuals.opportunityNew=l_oOpportunityNew;
            l_oGooalAndActuals.DeleteActual(l_oOpportunityNew.Id);
        }
    }
    /*End: Project */        

  }
}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T23:56:47.520

我不知道为什么这被标记了，但是这样看：

你知道以下内容——

阶段已关闭/获胜经理字段正在更改

创建一个验证规则，说明

```
AND ( 
  ISPICKVAL( StageName , 'Closed/Won' ),
  ISCHANGED(Manager__c)
) 
```

本质上，如果阶段处于关闭/获胜状态并且经理已更改，这将返回 true。这将抛出阻止记录被保存的验证规则！

希望这可以帮助 ：）

如果你真的想用触发器做到这一点，你可以做一个更新前，检查旧的和新的 Opp 的阶段，如果阶段没有改变而经理做了你可以简单地更换触发器。新的 trigger.old 值。可能 :) 但是对于那些 Trigger.old/new 值中可以修改和不能修改的内容有一些挑剔的规则 :)

# python - CSV - 列表索引超出范围

> ID：13039392
> 
> 赞同：7
> 
> 时间：2012-10-23T21:17:28.607
> 
> 标签：python, csv, python-3.x

读取 CSV 文件时出现此错误（无标题、3 列、第 2 和第 3 个字符串）：

```
Traceback (most recent call last):
File "C:\Python32\fantasy.py", line 72, in module>
some=row[1]
IndexError: list index out of range* 
```

下面是部分代码。坚持下去是非常简单的事情，但我对它如何不起作用一无所知。我是编码新手，但之前处理过 csv 模块，这部分从来没有遇到过问题，只是在记事本中制作了一些测试 csv 文件，看看它是否会从相同的代码中读取，并且确实如此。我不知道。

```
import csv
##############some other code, working good and I believe not relevant to this problem
file=open(r"C:\Users\me\Desktop\file-2.csv","r")
reader=csv.reader(file, delimiter=',', quotechar='"')

for row in reader:
    some=row[1] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T09:59:41.567

尝试检查空行。另外，避免`file`用作变量名。`"r"`是打开的默认模式。

```
import csv

with open(r"C:\Users\me\Desktop\file-2.csv") as f:
     reader = csv.reader(f, delimiter=',', quotechar='"')
     for row in reader:
        if row:
            some=row[1] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T09:54:51.897

看起来你有一个空行或其他东西。默认情况下，for 循环的每次迭代都会从 csv 文件中获取一行文本。该行文本以换行符结尾。因此，如果您有一个空行，那么读者会将其读取为类似 [] 的内容。

这样做，你会明白我的意思：

```
for row in reader:
    print(repr(row))
    some = row[1] 
```

您会发现打印的最后一行的长度不是 2 或更多。

您可以采取一些措施来解决此问题：

1.  通过一些清理脚本传递文件以删除空白行
2.  调用 reader 时更改识别的换行符

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-03T05:43:22.070

这个问题很老了，但我遇到了一个稍微不同的解决方案，所以我会把它放在这里给可能有这个问题的其他人。我的文件太大了，我看不到它的结尾。最后有一排只有 2 个东西，而不是我文件中典型的 5 个，所以当我试图获取第四列时，它给了我这个错误。这是我的解决方案：

```
 for row in reader:
        if len(row) > 2:
            array.append(row[3]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-19T17:08:27.943

我以前也遇到过这个错误。我的问题很愚蠢，但可以避免。我从另一个程序复制了一些代码并且没有更改分隔符（在我的情况下从管道到逗号），所以它当然超出了它的索引来寻找一个从未存在的管道。

# jquery - 分离图像，然后将其附加到分离的位置

> ID：13039395
> 
> 赞同：0
> 
> 时间：2012-10-23T21:17:41.843
> 
> 标签：jquery, append, detach

我的经验水平 - 我正在制作一个自定义滑块，这是我第一次使用 jQuery，但我认为我对 html、css 和 jquery 一起做什么有很好的处理，但是我的菜鸟仍然在继续。

我的问题 - 我已经标记了 17 个 div，我想删除 img 标签：

```
 <div class="slide" id="zero">
        <h2>April 1, 2011</h2>
        <img src="img/1_april12011.png"/><p>Lorem Ipsum</p>
      </div>
      <div class="slide" id="one">
        <h2>April 2011</h2>
        <img src="img/2_april2011.png"/> <p>Lorem Ipsum</p>
      </div>
      <div class="slide" id="two">
        <h2>August 2011</h2>
        <img src="img/3_aug2011.png"/><p>Lorem Ipsum</p>
      </div> 
```

通过使用 .detach() 和以下 jQuery，我可以很容易地做到这一点：

```
 $('.slide').delegate('click', function(){ 
      if(imageToAttach == null){
        attachLocation = $(this).find('id');
        imageToAttach = $(this).find('img').detach();
        console.log
      }else{
        $(imageToAttach).appendTo(attachLocation);
        console.log('trying to append ' + imageToAttach + ' to ' + attachLocation);
        attachLocation = $(this).find('id');
        imageToAttach = $(this).find('img').detach();
        console.log('detached ' + imageToAttach);
      }}); 
```

我正在使用 var = imageToAttach 和 attachLocation 来跟踪删除了哪些图像以及从何处删除了它，因此我可以在需要时再次将其附加到该特定 div （单击另一个图像或左右控件时）点击）所以如果我能得到这个——http: [//jsfiddle.net/lorenzo_vm/nbF8d/3/——jsfiddle](http://jsfiddle.net/lorenzo_vm/nbF8d/3/)工作，那么我相信我可以做我想做的事。

*几个小时后的研究和摆弄*

我想我知道我想做，我将使用 .hide() 和 .show()，但我**仍然很好奇**上面提到的小提琴中发生了什么......也就是说，我该怎么做当我单击另一个 div 时，让 img 重新插入到它们所在的 div 中......如果你，善良的 stackoverflow 用户，不介意，你能告诉我一个更简单的方法来分配 div 到某种数组，而不是使用 id="zero" id="one" 等。

像这样的东西？

```
var slides = $('.slide');
var numberOfSlides = slides.length;
var slideArray[] = null; 
```

我会只使用for循环将slides.length的索引分配给数组中的每个点吗？

```
for( var i=0;i<=numberOfSlides;i++){
   slideArray[i] = ?;
} 
```

或者 var 幻灯片是一个数组？我有点困惑。

非常感谢！

*   迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:53:08.863

这里。我更新了你的小提琴来做我认为你正在寻找的东西 - 主要是。不过不太确定，因为这种行为对我来说很奇怪，而且我不知道为什么要这样做……

[http://jsfiddle.net/nbF8d/12/](http://jsfiddle.net/nbF8d/12/)

这是相关代码，可以浓缩为：

```
$(document).ready(function(){
    var imageToAttach;
    var attachLocation;

    $('.slide').on('click', function(){ 
      if(imageToAttach != null){
        $(imageToAttach).appendTo(attachLocation);
      }

      attachLocation = $(this);
      imageToAttach = $(this).find('img').detach();
   });
});
​ 
```

本质上，当您应该只存储对单击的元素的引用时，您试图找到一个元素“id”。

```
attachLocation = $(this); 
```

这样 appendTo 有一个元素，而不仅仅是一个 id 的值（假设你通过 using 获取了实际的 id `$(this).attr('id')`）

此外，您的示例没有声明变量或将侦听器置于就绪调用中。

另请注意，我切换到[.on](http://api.jquery.com/on/)而不是[.delegate](http://api.jquery.com/delegate/) - 请参阅：“从 jQuery 1.7 开始，.delegate() 已被 .on() 方法取代。”

# c# - HtmlWeb.LoadAsync 在 WP7 上刷新时不更新

> ID：13039396
> 
> 赞同：1
> 
> 时间：2012-10-23T21:17:45.763
> 
> 标签：c#, windows-phone-7, html-agility-pack

我正在尝试开发一个免费的应用程序，它只是在屏幕上抓取另一个免费的网页并很好地显示一些数字。该网页会定期刷新，因此我希望能够在应用程序处于活动状态时对其进行刷新，而不是重新加载。

在加载时，它会执行通常的 Initialize 然后调用`HtmlWeb.LoadAsync("URL", DwnldComplete);`Then 它所做的只是在某些特定的 div 标签上找到一些内部文本。

我的逻辑，虽然可能是错误的，是有一个刷新按钮，它只是召回了`HtmlWeb.LoadAsync("URL", DwnldComplete);`重新处理网页的行。但是，当我调试并逐步完成时，它会处理加载时打开的原始页面。它实际上并没有去获取更新的页面，我可以检查一下，因为网页有日期时间戳。

我尝试在控制台应用程序上刷新

```
HtmlWeb web = new HtmlWeb();
HtmlDocument doc = web.Load("URL"); 
```

这很好用。也许有什么关系`LoadAsync`？

然后我想也许一个新的初始化 HtmlWeb 可能会有所帮助，所以我尝试了这个无济于事。

```
HtmlWeb web = new HtmlWeb();
web.LoadCompleted += new EventHandler<HtmlDocumentLoadCompleted>(DwnldComplete);
web.LoadAsync("URL"); 
```

这是处理程序

```
void DwnldComplete(object sender,HtmlDocumentLoadCompleted  e)
    {
        if (e.Error == null)
        {
            HtmlDocument doc = e.Document;
            if (doc != null)
            {
              //Find text
            }
        }
    } 
```

任何帮助将不胜感激，谢谢。

# git - 克隆一个 github 存储库，进行更改，并将除一项更改之外的所有更改推回

> ID：13039398
> 
> 赞同：3
> 
> 时间：2012-10-23T21:17:53.177
> 
> 标签：git, maven, github

我想克隆一个 github 存储库并对其进行一些更改。我想提交拉取请求以将这些更改拉到原始仓库中。所有非常标准的东西。

但是，有一个更改是我不想回到原始存储库。我想为我的克隆修改 maven 工件 id，使其与原始文件不在同一个命名空间中，但显然我不想将该更改推送到原始文件。

我设置克隆的最简单方法是什么，以便我可以更改 maven 工件 ID，而不必担心在推送其他更改时不小心将更改推送到原始版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:34:22.763

一种自动化的方法是有一个脚本：

*   为你修改那个maven id`git checkout`
*   为你恢复原来的id`git commit`

为此使用[gitattribute 过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)（您的脚本必须识别 pom.xml 的*内容*才能修改，[因为它们没有可以更改的文件的名称或路径](https://stackoverflow.com/questions/2562523/using-git-to-work-with-subversion-ignoring-modifications-to-tracked-files/2562678#2562678)）

![在此处输入图像描述](../Images/2ddc1633e80c2b9ddde446a3311e750e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T15:44:58.467

我采用的解决方案是根据评论在我的仓库中本地忽略文件`.git/info/exclude`。

# css - CSS：1 或 2 个表格列，取决于横向/纵向模式

> ID：13039400
> 
> 赞同：1
> 
> 时间：2012-10-23T21:18:07.220
> 
> 标签：css, mobile, html-table

我的网站以横向模式设计 - 一个大标题和一个位于布局中心的表格，其中 2 列用作菜单。

但是，如果站点在手机上以纵向模式显示，则到目前为止还没有足够的空间可用于此布局，因此使用 flexi-background.js 例程，布局被“压缩”并且变得非常非常小，而背景在屏幕上被很好地拉伸了。

如果检测到纵向模式，理想的方法是通过某种“技术”简单地将第二个表格列附加到第一列。我可以用 PHP 做到这一点，但我觉得 CSS 或其他一些技术必须有一种更智能的方式 - 有没有人有过这样的需求以及如何将横向布局调整为纵向模式？

元代码：

```
<table>
<tr>
<td>menu item 1</td> 
<td>menu item 2</td> 
</tr>
<tr>
<td>menu item 3</td> 
<td>menu item 4</td> 
</tr>
<tr>
<td>menu item 5</td> 
<td>menu item 6</td> 
</tr>
<tr>
<td>menu item 7</td> 
<td>menu item 8</td> 
</tr>
</table> 
```

如果更改后，菜单项的“列表”将是 1、3、5、7、2、4、6、8 就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:27:21.410

首先要做的是放弃为此使用表格的想法。

如今，无论如何将表格用于此类事情被认为是不好的做法，但在您的情况下，这也是问题的直接原因。

CSS 提供了几种适合您的对齐框的机制。

1.  使用`float:left`. 使用单个容器元素
    将所有菜单项变成元素。`<div>`在 CSS 中设置菜单项`float:left`，并给它们一个特定的固定宽度。它们将精美地排列成尽可能多的列，以适应可用空间。我通常不喜欢 CSS 浮动，但在这种情况下，这是一个不错的选择，因为这种方法是专门为像你这样的情况设计的。
    参考：[http ://css.maxdesign.com.au/floatutorial/](http://css.maxdesign.com.au/floatutorial/)

2.  使用`display:inline-block`.
    这具有类似的效果，允许您将元素布局为`float:left`. 它有一些比浮点数更好的方面，但也有一些怪癖，使得很难获得像素完美的精度。但这也是一个很好的解决方案。
    参考：[http ://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:33:59.370

添加到 Spudley 的答案，这里是示例代码。对于 CSS2 解决方案，您可以这样做（最可能需要进行一些调整，只需将其快速组合在一起即可）：

```
 <style type="text/css">
    #main-nav { width: 200px; }
    #main-nav li.menu-item { float:left;list-style-type:none;clear:right;width:75px; }
    #main-nav li.menu-item.clear-item { float:right; }
  </style>
  <ul id="main-nav">
    <li class="menu-item"><a href="#">menu item 1</a></li>
    <li class="menu-item clear-item"><a href="#">menu item 2</a></li>
    <li class="menu-item"><a href="#">menu item 3</a></li>
    <li class="menu-item clear-item"><a href="#">menu item 4</a></li>
    <li class="menu-item"><a href="#">menu item 5</a></li>
    <li class="menu-item clear-item"><a href="#">menu item 6</a></li>
  </ul> 
```

至于您关于纵向和横向的问题，请查看 CSS 媒体查询（它们真的很容易实现）：

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

这是一篇关于标准设备（如 iPhone 和其他智能手机）的好文章：

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# php - PHP：将图像设置为背景而不显示路径

> ID：13039402
> 
> 赞同：0
> 
> 时间：2012-10-23T21:18:19.740
> 
> 标签：php, content-type, readfile

以下问题我无法真正解决问题，所以如果你们不费心提供整个代码，那么一些正确方向的提示会很棒！

所以，我有一个脚本，用户可以将图像上传到服务器。PHP 负责验证文件并使用客户端不知道的另一个文件夹中的新文件名将其保存。现在，客户端应该能够看到上传的图片，在 html 中：

`style="background-image:url('testimagegif.gif');`

但最好客户端不能看到保存在服务器上的图像的路径和文件名。我知道使用`header('Content-type: ...`强制客户端浏览器下载文件，但我不明白这是怎么回事，也没有任何类似的解决方案可以应用于这种情况。也一样`readfile`。如果我使用它，浏览器只会下载图像，而不是将其放在 html 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:21:35.283

如果您想提供这些文件，您可能应该将这些文件移动到您的网络服务器上一个公开可读的文件夹中。

否则，您将需要类似的东西[`readfile()`](http://php.net/manual/en/function.readfile.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:24:33.630

有两种选择，您可以使用数据协议，它将整个图像嵌入到背景的 URL 中（如果图像大于几 kb，则不建议这样做。）或者您可以使用脚本通过编码或记录图像的唯一键来呈现图像，例如 bg.php?id=4323-34442-3432-4532 检查 db 的 id 以检索文件路径，然后使用正确的内容类型回显内容。

一些例子;

基于[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme#Inclusion_in_HTML_or_CSS_using_PHP)维基百科页面

## 数据 URI 方法

假设这样的功能；

```
 function data_uri($fileID) {
     $fRecord = mysql_fetch_array(
         mysql_select("SELECT filePath, mimeType from fileTable WHERE fileID = " $fileID . ";")
     );
    $contents = file_get_contents($fRecord['filePath']);
    $base64 = base64_encode($contents);
    return "data:$fRecord['mimeType'];base64,$base64";
} 
```

然后在您的 html/php 页面中，您将拥有以下代码段

```
style="background-image:url('<?php echo data_uri($fileID);?>' 
```

## PHP 图像转储

假设这样的功能；

```
// Given a filename and a mimetype; dump the contents to the screen
function showDocumentContent($fileID){
     $fRecord = mysql_fetch_array(
         mysql_select("SELECT filePath, mimeType from fileTable WHERE fileID = " $fileID . ";")
     );
    header( 'Content-Encoding: none', true );       
    header( 'Content-Type: ' . $fRecord['mimeType'], true );
    echo readfile( $fRecord['filePath'] );
} 
```

然后在你的 html 页面中你会有这个；

```
style="background-image:url('image.php?fileID=123') 
```

在第一种情况下，大于几 KB 的图像将产生同样大的 HTML 页面，并且可能不会在浏览器中得到一致的支持。在第二种情况下，您实际上已经创建了一个伪装成图像的 php 脚本。在这两种情况下，通过在数据库中存储映射来抽象出服务器上二进制文件的真实路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:22:43.797

如果您将文件的路径存储在数据库或文件之类的某个位置，则可以`readfile()`在检索路径后使用它来输出文件。

`content-type`将其与标头结合起来，并`background-image`使用正确的查询字符串将 URL 设置为 PHP 脚本，如下所示：

```
style="background-image:url('script.php?img=30382');" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T21:23:24.903

您必须向客户端公开*一些*路径，因为他们的浏览器必须访问该文件。您可以使用您的网络服务器配置在间接位置提供服务，或者使用 PHP 提供图像并在调用[readfile()时获取真实路径](http://php.net/manual/en/function.readfile.php "读取文件（）")

# prolog - Prolog 不在列表中的数字总和

> ID：13039404
> 
> 赞同：2
> 
> 时间：2012-10-23T21:18:29.267
> 
> 标签：prolog

在 gnu Prolog 中，我试图收集大学顾问计划中所有大学学分的总和。

目前，它返回的积分数如下：

```
| ?- totalCredits(joe, X).

X = 3 ? ;

X = 3 ? ;

X = 3 ? ;

X = 1 ? ;

X = 3 ? ;

X = 3 ? ;

no 
```

这就是代码示例：

```
totalCredits(Student, Credits) :-
    class(Class, _, _),
    creditFor(Student, Class, _),
    class(Class, _, Credits). 
```

所以我的问题是如何总结所有这些结果？我对 prolog 完全陌生，以前只使用过函数式语言，所以也许我完全错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:29:51.760

您可以[收集](http://www.gprolog.org/manual/html_node/gprolog033.html#toc79)学分列表，然后对其[求和](http://www.gprolog.org/manual/html_node/gprolog044.html#toc176)：

```
totalCredits(Student, Total) :-
  findall(Credits, creditFor(Student, _Class, Credits), ListOfCredits),
  sum_list(ListOfCredits, Total). 
```

**编辑**后评论，更正：加入关系！

```
totalCredits(Student, Total) :-
  findall(Credits,
    (creditFor(Student, Class, _),
     class(Class, _, Credits)), ListOfCredits),
  sum_list(ListOfCredits, Total). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:25:39.540

用于`findall`获得所有学分，然后将它们相加。

```
findall(C, creditFor(Student, _, C), Credits),
sum(Credits, Sum). 
```

（我希望我已经`creditFor`正确理解了您的谓词的含义。）

这`sum`是一个总和谓词，我将留给您；它应该与其功能对应物非常相似。

# php - 编辑后 WAMP 不更新 html 文件

> ID：13039405
> 
> 赞同：0
> 
> 时间：2012-10-23T21:18:31.380
> 
> 标签：php, html, apache, wamp

我有另一个问题。我使用 WAMP 作为我的本地服务器。我有这个文件 index.htm。现在的问题是，当我尝试编辑此文件并在浏览器中重新加载 localhost 时，没有任何改变。但是，当我双击 html 文件以在没有 WAMP 服务器的情况下打开它时，它会显示已编辑的文件。我不知道为什么。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:29:06.540

它现在正在工作。我只需要将所有文件放在 WWW 文件夹中，而不是放在另一个文件夹中。谢谢大家的帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:22:52.907

1.  检查 index.htm 是否在正确的 (WAMP) 目录中（通常是 c:\wamp\www）
2.  检查 WAMP 是否正在运行

我个人使用 XAMPP for mac（他们也有 Windows 版本）并将您的网站放在 /Applications/XAMPP/htdocs/ 并通过（http://localhost/）访问它们，或者您将网站放在您的站点文件夹中主页并通过 (http://localhost/~username/) 访问它们。

显然，如果您使用 Windows，路径会有所不同，但 XAMPP 会在首次启动时为您提供帮助屏幕。

# jquery - jQuery切片返回一个数组？

> ID：13039406
> 
> 赞同：1
> 
> 时间：2012-10-23T21:18:31.977
> 
> 标签：jquery

有没有办法让 jQuery 切片返回元素数组而不是 jQuery 对象？也许来自 jQuery 兼容库的替代函数？

还是我必须自己使用[makeArray](http://api.jquery.com/jQuery.makeArray/)（或自己做）转换成一个数组？

（我问是因为一旦我发现[each2](http://benalman.com/projects/jquery-misc-plugins/)，我总是想象有一个针对给定任务的稍微优化的函数）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:20:06.407

用于`.get()`从 jQuery 对象返回“正常”数组。

例子：

```
var arr = $('div').slice(2, 4).get(); 
```

# linux - 查找并重命名目录

> ID：13039410
> 
> 赞同：13
> 
> 时间：2012-10-23T21:18:49.993
> 
> 标签：linux, bash, find, exec

我正在尝试在 linux 系统上查找并重命名目录。

文件夹名称类似于：`thefoldername-23423-431321`

`thefoldername`是一致的，但数字每次都在变化。

我试过这个：

```
find . -type d -name 'thefoldername*' -exec mv {} newfoldername \; 
```

该命令实际上有效并重命名该目录。但是我在终端上收到一个错误，说没有这样的文件或目录。

我该如何解决？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T21:20:52.933

`-depth`这是一个无害的错误，您可以通过该选项摆脱它。

```
find . -depth -type d -name 'thefoldername*' -exec mv {} newfoldername \; 
```

Find 的正常行为是处理目录，然后递归到其中。由于您已将其重命名，因此在尝试递归时会发现抱怨。该`-depth`选项告诉 find 先递归，然后再处理目录。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-23T11:41:38.997

它缺少**-execdir**选项！如 find 的手册页所述：

```
-execdir command {}; 
```

类似 `-exec`，但指定的命令是从包含匹配文件的子目录运行的，通常不是您开始查找的目录。

`find . -depth -type d -name 'thefoldername*' -execdir mv {} newfoldername \;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-30T14:53:09.333

使用上一个答案，我的文件夹内容消失了。
这是我的解决方案。它运作良好： `for i in `find -type d -name 'oldFolderName'`; do dirname=$(dirname "$i") mv $dirname/oldFolderName $dirname/newFolderName done`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-27T07:19:29.583

.../ABC -> .../BCD

```
find . -depth -type d -name 'ABC' -execdir mv {} $(dirname $i)/BCD \; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-07T16:07:40.990

将 1100 替换为 old_value，将 2200 替换为您要替换的 new_value。

例子

```
for i in $(find . -type d -iname '1100');do echo "mv "$i" "$i"__" >> test.txt; sed 's/1100__/2200/g' test.txt > test_1.txt; bash test_1.txt ; rm test*.txt ; done 
```

证明

[用户@服务器测试]$ ls -la check/

**drwxr-xr-x。1 个用户用户 0 Jun 7 12:16 1100**

[用户@服务器测试]$`for i in $(find . -type d -iname '1100');do echo "mv "$i" "$i"__" >> test.txt; sed 's/1100__/2200/g' test.txt > test_1.txt; bash test_1.txt ; rm test*.txt ; done`

[用户@服务器测试]$ ls -la check/

**drwxr-xr-x。1 个用户用户 0 Jun 7 12:16 2200**

这里 sed 中的 __ 仅用于更改名称它没有其他意义

# python - 如何在 python 瓶应用程序中检索 GET 变量

> ID：13039411
> 
> 赞同：25
> 
> 时间：2012-10-23T21:18:54.923
> 
> 标签：python, bottle, query-parameters

我正在尝试使用 Python bottle 应用程序制作一个简单的 REST api。我在从请求全局对象中检索 GET 变量时遇到问题。任何建议如何从 GET 请求中检索它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-23T21:21:39.977

它们存储在`request.query`对象中。

[http://bottlepy.org/docs/dev/tutorial.html#query-variables](http://bottlepy.org/docs/dev/tutorial.html#query-variables)

看起来您也可以通过将`request.query`属性视为字典来访问它们：

```
request.query['city'] 
```

因此`dict(request.query)`将创建一个包含所有查询参数的字典。

正如@mklauber 所指出的，这不适用于多字节字符。看起来最好的方法是：

```
my_dict = request.query.decode() 
```

或者：

```
dict(request.query.decode()) 
```

有一个`dict`而不是一个`<bottle.FormsDict object at 0x000000000391B...>`对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T21:26:20.933

如果你想要它们：

```
from urllib.parse import parse_qs

dict = parse_qs(request.query_string) 
```

如果你想要一个：

```
one = request.GET.get('one', '').strip() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-02T10:52:37.357

你能试试这个吗：

对于这个例子：[http://localhost:8080/command?param_name=param_value](http://localhost:8080/command?param_name=param_value)

在您的代码中：

```
param_value = request.query.param_name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-25T16:45:35.230

从文档

```
name = request.cookies.name
# is a shortcut for:
name = request.cookies.getunicode('name') # encoding='utf-8' (default)
# which basically does this:
try:
    name = request.cookies.get('name', '').decode('utf-8')
except UnicodeError:
    name = u'' 
```

所以你可能更喜欢使用属性访问器 (request.query.variable_name) 而不是 request.query.get('variable_name')

另一点是您可以使用 request.params.variable_name，它适用于 GET 和 POST 方法，而不是根据 GET/POST 切换 request.query.variable_name 或 request.forms.variable_name。

# javascript - 如何在将来创建的元素上传递jquery函数事件

> ID：13039415
> 
> 赞同：0
> 
> 时间：2012-10-23T21:19:22.927
> 
> 标签：javascript, jquery, html, function

我希望我能很好地解释我的自我。我想创建一个具有参数的函数，其中一个参数是 jQuery 函数，该函数将在调用原始函数后创建的元素事件上执行（它与对话框非常相似）。这是我正在尝试做的代码：

```
function messageBox(messageOptions) {
    var default_args = {
        'header': null,
        'text': null,
        'acceptButtonText': 'ok',
        'acceptButtonOnClickFunction': null,
        'cancelButtonText': 'cancel',
        'cancelButtonOnClickFunction': function() {
            $('#cancel_message_box_div_button_span').click(function() {
                $('.greyBackground').remove();
            })
        }
    };
    for (var index in default_args) {
        if (typeof messageOptions[index] == "undefined") messageOptions[index] = default_args[index];
    }

    putGrayBackground();
    var messageBoxElement = '<div class="messageBoxDiv">';
    messageBoxElement += '<legend class="messageBoxDivHeader">';
    messageBoxElement += messageOptions.header;
    messageBoxElement += '</legend>';
    messageBoxElement += '<div class="messageBoxDivText">';
    messageBoxElement += messageOptions.text;
    messageBoxElement += '</div>';
    messageBoxElement += '<div class="messageBoxDivButtons">';
    messageBoxElement += '<div id="cancel_message_box_div_button_span" class="messageBoxDivButtonSpan">';
    messageBoxElement += messageOptions.cancelButtonText;
    messageBoxElement += '</div>';
    messageBoxElement += '</div>';
    messageBoxElement += '</div>';
    $('.greyBackground').append(messageBoxElement);
}​ 
```

该代码假设创建一个具有跨度的元素，单击该跨度时将调用“cancelButtonOnClickFunction”参数下的函数。如您所见，有默认参数，其中之一是“cancelButtonOnClickFunction”。在我创建了添加它的元素之后，我认为它不起作用，因为在创建元素之前调用了“cancelButtonOnClickFunction”内部函数。我会问如何使它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:29:10.860

在函数中使用事件处理程序没有问题，尽管它会变得非常混乱。我在下面为您提供了用于事件处理的替代解决方案。

至于`messageOptions`，您可以使用另一个 jQuery 函数来组合对象。这就是 jquery-ui 如何将其默认设置与您在其小部件中提供的设置相结合。

```
$.extend(default_args, messageOptions) 
```

以上将替换您的 for 循环并删除看起来会导致您出现问题的代码段。而不是进一步调用 messageOptions.header 您现在将始终使用您的 default_args 对象。

```
messageBoxElement += default_args.header 
```

事件处理

如果您采用较低级别的父级并使用`.on`您可以将点击事件绑定到任何元素，无论它们是否存在。这通过将事件绑定到不变元素，然后在单击任何子元素并满足其条件（第二个参数）时冒泡来工作。你可以在你的 document.ready 函数中使用它：

```
$('#message_box_container').on('click', '#cancel_message_box_div_button_span', function(e)
{
    $('.grey-background').remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:42:22.407

问题不在于您的代码执行得太早。事实上它根本没有被执行！让我们开始修复代码，并在此过程中了解为什么您的原始版本不起作用。

首先，我们更改默认参数中的一些内容：

```
 [..]
    'cancelButtonOnClickFunction': function() {
            $('.greyBackground').remove();
        })
    [..] 
```

基本上，您希望您的用户以与直接使用 jquery 完全相同的方式定义他们的事件处理程序（或回调），因此您应该在默认参数中执行相同的操作。

现在这是一个问题：你没有在这里执行一个函数。您正在定义一个函数并将该函数分配给该`cancelButtonOnClickFunction`属性。这是可能的，因为在 javascript 中，函数是一等公民。用不太花哨的话来说，这意味着函数是“值”，就像数字、字符串和（其他）对象一样，因此，你可以用它们做很多事情，比如将它们用作参数或将它们分配给变量. （事实上​​，在 javascript`function a() {alert('a')}`中只是另一种编写方式`var a = function() {alert('a')}`，但我在这里偏离了轨道。）

好的，既然我们已经记下了那段代码，我们现在需要确保事件连接正确。因为我们并没有在函数的顶部执行此操作，所以我们可以在生成 html 之后执行此操作，并且我们不必担心在 html 就位之前发生分配：

```
 [..]
    $('.greyBackground').append(messageBoxElement);
    $('#cancel_message_box_div_button_span').click(messageOptions.cancelButtonOnClickFunction);
} 
```

就是这样，这里我们只提供保存函数的变量，而不是像通常使用 jquery 时那样提供匿名函数。这两个更改应该解决代码并确保它执行您希望它执行的操作。希望我一路上的解释能帮助您更多地了解如何以及为什么。

# text - Burrows Wheeler 变换 - 变换向量

> ID：13039416
> 
> 赞同：0
> 
> 时间：2012-10-23T21:19:29.610
> 
> 标签：text, compression, transformation, huffman-code, burrows-wheeler-transform

在对“abracdabra!”的输入文本进行转换后，我的转换向量是 [3, 0, 5, 6, 7, 9, 10, 8, 2, 1, 4]，然后将文本通过管道进行更多的转换和压缩到磁盘。

关闭程序后，我们显然无法再访问变换向量了。我们是否希望将转换向量写入磁盘？向量的大小实际上不等于 n 个字符吗？这实际上不会增加​​压缩文件的大小吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:46:46.533

Burrows Wheeler 变换[在没有变换向量的情况下是可逆的](http://en.wikipedia.org/wiki/Burrows%E2%80%93Wheeler_transform#Bijective_variant)。

# javascript - 如何在kindle中隐藏网址栏

> ID：13039417
> 
> 赞同：2
> 
> 时间：2012-10-23T21:19:34.097
> 
> 标签：javascript, html, kindle, kindle-fire

我想知道如何隐藏 Javascript 中点燃火的 URL 栏。我找到了一些代码，但没有一个真正起作用。

谢谢您的帮助。

# javascript - Safari 停止加载

> ID：13039420
> 
> 赞同：1
> 
> 时间：2012-10-23T21:19:39.953
> 
> 标签：javascript, safari

我正在处理的网站似乎随机停止加载页面（仅显示白色页面）和图像（仅显示蓝色问号，但占位符已经在正确的尺寸中）。

当它这样做时，它会在网络检查器中给出“状态 403，未修改”消息。在这是一个页面的情况下，它只加载了几个字节，我无法从开发人员菜单中选择“显示源”。当我点击“重新加载”时，页面会立即出现，就好像已经被缓存了一样。这也发生在我清除缓存并且错误出现在我尝试加载的第一页之后。

通常，当我在页面尚未完成加载时单击链接时会发生这种情况。在时间轴中，我看到虽然 url 已经设置为新页面，但 Safari 仍在从旧页面加载各种内容，并且在最终尝试加载新页面时有点超时。

如果图像显示不正确，则表明它们已加载（“资源”概述中没有显示错误）。此外，重新加载后，一切都在那里。

我用谷歌搜索了很多，似乎很多人多年来一直在使用 Safari 和图像未完全加载或页面显示为空白页时遇到问题。尽管如此，这些问题和投诉中提到的网站在我的 Safari 上显示良好（Ebay 被提及很多，以及谷歌图片）。

我尝试了许多不同的方法，例如预加载、延迟加载（应显示图像时将 src 设置为 data-src）、重新加载（显示图像后将 src 设置为自身）。此外，当我在 Safari 开发人员菜单中打开缓存时，它似乎没有任何区别。我没有尝试 Apple 论坛上提供的任何 DNS 解决方案，因为我想在事物的代码端解决这个问题。

当您查看我的 js 时，您会发现正在进行一些调整大小和延迟加载。即使我关闭所有这些东西，问题仍然存在。我意识到图像非常重（几乎所有图像都超过 500kb）——我仍然希望无论图像大小如何都能找到解决方案，因为将来我无法完全控制内容。

该页面： [http](http://www.alique.nl/archive) ://www.alique.nl/archive 您必须单击缩略图并浏览图像以查看错误。由于它发生在随机页面上（至少看似），我无法指向更具体的页面。

这是 js 文件： [http ://www.alique.nl/js/lib.js](http://www.alique.nl/js/lib.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:13:12.890

当服务器返回`304 Not Modified`状态时，似乎`text/plain`在 Safari 中指定了错误的 mime-type ( )（请参阅 Web Inspector）。这会阻止图像正确显示。在 Mac 和 Windows 中都会发生（在 Chrome 中似乎没有发生）。我无法重现空白页。

一个可能的解决方案可能是明确定义`.htaccess`文件中图像的 mime 类型：

```
# Force correct mime-types
AddType image/gif .gif .GIF 
AddType image/jpeg .jpeg .jpg .jpe .JPG 
```

可以在[http://www.htaccess-guide.com/adding-mime-types/](http://www.htaccess-guide.com/adding-mime-types/)找到完整的 mime 类型列表。但是，这可能不起作用，因为这可能是 Safari 中的一个错误，因为原始内容是使用正确的 mime 类型提供的。

一种解决方法，但相当简单的解决方案是完全禁用缓存，再次在`.htaccess`：

```
# Disable caching of resources in user-agent:
FileETag None
<ifModule mod_headers.c>
  Header unset ETag
  Header unset Last-Modified
  Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
  Header set Pragma "no-cache"
  Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</ifModule> 
```

或者在 PHP 中：

```
// Disable caching of resources in user-agent:
header('ETag: ' . md5(time()) ); 
header("Expires: Wed, 11 Jan 1984 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); 
```

这可能与这个问题有关：[调试消息“资源解释为其他但使用 MIME 类型应用程序/javascript 传输”](https://stackoverflow.com/questions/658238/debug-message-resource-interpreted-as-other-but-transferred-with-mime-type-appl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:27:11.767

我通过删除用于组合所有 .css 和 .js 文件的组合脚本解决了这个问题： [http ://rakaz.nl/projects/combine/combine.phps](http://rakaz.nl/projects/combine/combine.phps)

我不确定为什么会解决它 - 我没有对任何 .css 或 .js 文件本身进行任何更改。基本上，组合脚本只是将所有文件一起粘贴到一个大的新文件中，并且不会向现有文件添加任何新内容。

错误如此随机地发生对我来说也没有什么意义：不是在每次安装 Safari 时，也不总是在相同的页面或相同的图片上。关闭 .htaccess 中的缓存确实改变了一些东西（它使它可以在更多的计算机上工作，但不是全部），但影响了以前没有遇到问题的其他图像（比如徽标，它不会加载随机页面）。

似乎缓存和 Safari 肯定存在一个奇怪的问题。对于任何来到这里遇到类似问题的人，我建议关闭任何与缓存有关的东西（比如 gzip 和类似的东西），以找出导致问题的原因。

# javascript - 从 rails helper 返回 javascript

> ID：13039429
> 
> 赞同：0
> 
> 时间：2012-10-23T21:20:16.317
> 
> 标签：javascript, html, ruby-on-rails-3

我在从帮助函数返回 javascript 时遇到问题。我无法使以下测试用例工作：

helpers/application_helper.rb 中的函数

```
def show_stuff
    return '$("div#flash").html("<p> stuff </p>");'
end 
```

现在我尝试在 general.js.erb 中调用这个辅助函数

```
<%= show_stuff %> 
```

这是输出

```
$(&quot;div#flash&quot;).html(&quot;&lt;p&gt; stuff &lt;/p&gt;&quot;); 
```

我也试过 show_stuff.html_safe 和 raw show_stuff 并没有运气。我觉得问题是 Rails 自动转义 html 但一直找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:29:03.443

ERB 正在转义您输出的 Javascript 中的字符。

为防止这种情况发生，请使用`raw`模板中的方法。

```
<%= javascript_tag do %>
    <%= raw(show_stuff) %>
<% end %> 
```

我已经`javascript_tag`为上下文添加了方法。

# actionscript-3 - 将 Sprite Image 数据应用到按钮图标

> ID：13039430
> 
> 赞同：2
> 
> 时间：2012-10-23T21:20:19.370
> 
> 标签：actionscript-3, apache-flex, flex3

我被 Flex 3 遗留应用程序困住了，我需要能够动态地将生成的包含不同渐变填充的 Sprite 以及嵌入式 SVG 图像应用到按钮的图标上。任何人都可以帮助我将 Sprite 投射到按钮图标上吗？我是否必须将图像数据从 DisplayObject 中复制出来并以某种方式作为类进行转换？

谢谢，

# c# - 如何更改此 Ext.Net 示例以使用 Sql 而不是 Linq？

> ID：13039434
> 
> 赞同：2
> 
> 时间：2012-10-23T21:20:24.603
> 
> 标签：c#, sql, sqldatasource, ext.net, linqdatasource

我将通过[这个示例](http://examples.ext.net/#/GridPanel/Data_with_Details/Form_Details/)并尝试让它使用 a`SqlDataSource`而不是`LinqDataSource`. 我可以让数据显示在表格中，但是当我选择一行时，表格没有填充数据。我认为这些是相关的代码位：

```
protected void RowSelect(object sender, DirectEventArgs e)
{
    string employeeID = e.ExtraParams["EmployeeID"];

    Employee empl = Employee.GetEmployee(int.Parse(employeeID));

    this.FormPanel1.SetValues(new {
        empl.EmployeeID,
        empl.FirstName,                          
        empl.LastName,
        ...........
    });
} 
```

和

```
<SelectionModel>
    <ext:RowSelectionModel runat="server" Mode="Single">
        <DirectEvents>
            <Select OnEvent="RowSelect" Buffer="250">
                <EventMask ShowMask="true" Target="CustomTarget" CustomTarget="#{FormPanel1}" />
                <ExtraParams>
                    <ext:Parameter Name="EmployeeID" Value="record.getId()" Mode="Raw" />
                </ExtraParams>
            </Select>
        </DirectEvents>
    </ext:RowSelectionModel>
</SelectionModel>

protected void Store1_Refresh(object sender, StoreReadDataEventArgs e)
{
    this.Store1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:07:58.967

这似乎起到了作用：

```
<SelectionModel>
    <ext:RowSelectionModel ID="RowSelectionModel1" runat="server" Mode="Single">
        <Listeners>
            <Select Handler="#{FormPanel1}.getForm().loadRecord(record);" />
        </Listeners>
    </ext:RowSelectionModel>
</SelectionModel> 
```

# c# - 调用嵌套的RepeaterItem

> ID：13039435
> 
> 赞同：2
> 
> 时间：2012-10-23T21:20:26.743
> 
> 标签：c#, asp.net, webforms, .net-2.0

我为我的 XML 文件构建了一个中继器，大致如下：

```
<asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="samplexml.xml" XPath="level1/level2" />
<asp:Repeater id="category" runat="server" DataSourceID="XmlDataSource1">

<ItemTemplate>
    <div class="category">
    <h2><%#XPath("@name") %></h2>

    <asp:Repeater id="group" runat="server" DataSource='<%# XPathSelect("group") %>'>
        <ItemTemplate>
        ...
        </ItemTemplate>
    </asp:Repeater>

    </div>
</ItemTemplate>

</asp:Repeater> 
```

现在我正在研究如何在回发时获取每个内部的数据。我大致了解了如何进入RepeaterItem：

```
foreach (RepeaterItem items in category.Items)
{   
    Output.Text += items.UniqueID + "<br />";
} 
```

但经过大量搜索 MSDN、此站点和其他站点后，我无法弄清楚如何进入`group`中继器。

我在这里遗漏了一些明显的东西吗？我在 .NET 2.0 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:31:06.977

你没有错过任何明显的东西。根据我使用嵌套中继器/ListViews/Etc 的经验，这是一场噩梦。

如果您可以选择使用 MVC 执行此操作，我建议您这样做。如果没有......您最好的选择可能是熟悉 FindControl。通常，您的代码将如下所示：

```
protected void category_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    Repeater level2 = e.Item.FindControl("group") as Repeater;
    //you are now working with the nested repeater in a single row...  Do what you will!
} 
```

因此，当父转发器中的一行绑定时，您将不得不使用 FindControl 来查找它的嵌套转发器。祝你好运！

# excel - 循环遍历命名范围内的单元格

> ID：13039437
> 
> 赞同：6
> 
> 时间：2012-10-23T21:20:33.920
> 
> 标签：excel, vba

我正在尝试编写将遍历范围内所有单元格的代码。最终我想做一些更复杂的事情，但由于我遇到了麻烦，我决定创建一些简短的测试程序。第一个示例工作正常，但第二个（具有命名范围）没有（给出“Object_Global 的方法范围失败”错误消息）。关于我做错了什么的任何想法？我真的很想用一个命名范围来做这个......谢谢！

作品：

```
Sub foreachtest()
Dim c As Range
For Each c In Range("A1:A3")
    MsgBox (c.Address)
Next
End Sub 
```

不起作用：

```
Sub foreachtest2()
Dim c As Range    
Dim Rng As Range
Set Rng = Range("A1:A3")
For Each c In Range("Rng")
    MsgBox (c.Address)
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T21:47:16.813

Set Rng =Range("A1:A3") 正在创建一个范围对象，而不是一个命名范围。这应该工作

```
Sub foreachtest2()
Dim c As Range    
Dim Rng As Range
Set Rng = Range("A1:A3")
For Each c In rng
    MsgBox (c.Address)
Next
End Sub 
```

如果你想创建一个名为 Rng 的命名范围，那么

```
Range("A1:A3).Name="Rng" 
```

将创建它，或者您可以像 thsi 一样创建和循环它

```
Dim c As Range
Range("a1:a3").Name = "rng"
For Each c In Names("rng").RefersToRange
MsgBox c.Address
Next c 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-23T21:39:45.933

试试这个，而不是：

```
Sub foreachtest2()
Dim c As Range
Range("A1:A3").Name = "Rng"
For Each c In Range("Rng")
    MsgBox (c.Address)
Next
End Sub 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-23T21:47:47.307

要调整您的第二个代码，您需要认识到您的范围 rng 现在是一个表示范围的变量，并将其视为：

```
Sub foreachtest2() 
Dim c As Range     
Dim Rng As Range 
Set Rng = Range("A1:A3") 
For Each c In rng
    MsgBox (c.Address) 
Next 
End Sub 
```

警告：大多数情况下，如果您可以避免循环遍历范围，您的代码会更快。

# opengl - 将 glsl 150 转换为 120

> ID：13039439
> 
> 赞同：4
> 
> 时间：2012-10-23T21:20:49.743
> 
> 标签：opengl, glsl

我有几个要在我的 PC 上运行的示例。问题是它们是用 glsl 目标 150 编写的，而我的 PC 只支持 120 版。我很确定程序本身足够简单，不需要任何 OpenGL 3.1 的扩展功能。我找到了一些关于应该采取哪些步骤来转换 glsl（fe 更改为属性，更改为可变）的信息，但它仍然没有编译（实际上是否有可能以某种方式从中获得有意义的错误消息？）。

原始.vert

```
#version 150
in  vec2 in_Position;
in  vec3 in_Color;
out vec3 ex_Color;
void main(void) {
    gl_Position = vec4(in_Position.x, in_Position.y, 0.0, 1.0);
    ex_Color = in_Color;
} 
```

原始.frag

```
#version 150
precision highp float;

in  vec3 ex_Color;
out vec4 gl_FragColor;

void main(void) {
    gl_FragColor = vec4(ex_Color,1.0);
} 
```

改变了.vert

```
#version 120 
attribute  vec2 in_Position; 
attribute  vec3 in_Color; 
varying vec3 ex_Color; 
void main(void) { 
    gl_Position = vec4(in_Position.x, in_Position.y, 0.0, 1.0); 
    ex_Color = in_Color; 
} 
```

改变了.frag

```
#version 120 
precision highp float; 

attribute  vec3 ex_Color; 

void main(void) { 
    gl_FragColor = vec4(ex_Color,1.0); 
} 
```

那么有人能在这里发现问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:27:54.730

要获取编译/链接错误消息，您需要使用`glGetShaderInfoLog`着色器和`glGetProgramInfoLog`程序的命令。

这些将告诉您您的特定错误是什么。

只需尝试一下错误可能是什么，您就`attribute`在片段着色器中声明了一个输入，我认为它应该是一个`varying`. 属性用于数据->顶点着色器，变化用于顶点着色器->片段着色器。

glsl 120 规范还提到精度限定符“保留以备将来使用”，因此它可能不适用于版本 120。您可以将其省略。

但是无论如何，您仍然应该熟悉 infolog 功能，您最终肯定会需要它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:28:27.293

您可以通过检索“信息日志”来获取编译错误：

```
GLuint nVertexShader, nPixelShader;   // handles to objects
GLint  vertCompiled, fragCompiled;    // status values
GLint  linked;

glCompileShader(nVertexShader);
glGetShaderiv(nVertexShader, GL_COMPILE_STATUS, &vertCompiled); 
```

如果 vertCompiled（或 fragCompile）== 0，这样做看看为什么：

```
int infologLength = 0;
int charsWritten  = 0;

glGetShaderiv(nVertexShader, GL_INFO_LOG_LENGTH, &infologLength);

if (infologLength > 0)
{
    GLchar* infoLog = (GLchar *)malloc(infologLength);
    if (infoLog == NULL)
    {
        printf( "ERROR: Could not allocate InfoLog buffer");
        exit(1);
    }
    glGetShaderInfoLog(nVertexShader, infologLength, &charsWritten, infoLog);
    printf( "Shader InfoLog:\n%s", infoLog );
    free(infoLog);
} 
```

您可以对链接执行相同的操作，只需检查 linked == 0 并按上述方式检索日志：

```
glLinkProgram(m_nProgram);
glGetProgramiv(m_nProgram, GL_LINK_STATUS, &linked); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:29:52.000

```
precision highp float; 
```

这在 GLSL 1.20 中是不合法的。我什至不知道为什么将它放在 1.50 着色器中，因为精度限定符只在 GLSL ***ES***中做有用的事情，你不能与 GLSL ES 共享 1.50 着色器。

# mongodb - 具有多个主节点和 pingMS=0 的 mongodb 副本集

> ID：13039443
> 
> 赞同：6
> 
> 时间：2012-10-23T21:21:06.237
> 
> 标签：mongodb, replication

我正在尝试设置具有两个节点的副本集：Node0 和 Node1。我从 Node0 初始化了一个名为“rs0”的副本集并将 Node1 添加到它。问题是它被添加为主节点而不是辅助节点，最终结果是具有两个主节点的副本集。

这是`rs.status()`从 Node0 执行命令的结果

```
 "set" : "rs0",
        "date" : ISODate("2012-10-23T21:03:37Z"),
        "myState" : 1,
        "members" : [
                {
                        "_id" : 0,
                        "name" : "Node0:27017",
                        "health" : 1,
                        "state" : 1,
                        "stateStr" : "PRIMARY",
                        "uptime" : 61185,
                        "optime" : Timestamp(1350967947000, 1),
                        "optimeDate" : ISODate("2012-10-23T04:52:27Z"),
                        "self" : true
                },
                {
                        "_id" : 1,
                        "name" : "Node1:27017",
                        "health" : 1,
                        "state" : 1,
                        "stateStr" : "PRIMARY",
                        "uptime" : 58270,
                        "optime" : Timestamp(1350956423000, 1),
                        "optimeDate" : ISODate("2012-10-23T01:40:23Z"),
                        "lastHeartbeat" : ISODate("2012-10-23T21:03:37Z"),
                        "pingMs" : 0
                }
        ], 
```

如果我从 Node1 执行相同的命令，则列出的唯一节点就是它本身。请注意，pingMs 为 0。尝试添加第三个节点或仲裁器会得到类似的结果：每个节点都作为主节点添加，而 pingMS 始终为 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T03:13:51.623

您提到您`rs.initiate()`在两台服务器上运行。这应该只在一个上完成。

我建议您从头开始，删除每个节点的 dbpath 目录（如果 db 不为空，请备份之前的数据）。然后，启动所有 mongod 进程，登录其中一个，然后调用

*   `rs.initiate()`
*   `rs.add(<other node 1>)`

另一个节点自动通过第一个节点获取副本集配置。对要添加的每个附加节点重复 `rs.add()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:41:37.873

我遇到了同样的情况，错误地`rs.initiate()`在两个实例上运行。我通过关闭应该是第二个实例、删除数据目录并重新启动实例来解决这个问题。重新启动时，它被正确检测为副本集的成员，被正确同步，最重要的是只有一个主节点。

此操作不应该是危险的，因为据我所知，副本集会复制节点上的所有数据。可以肯定的是，您可以在辅助节点关闭后移动数据目录，以便在出现任何问题时保留备份。

# eclipse - Eclipse 中没有服务器；尝试安装 Tomcat

> ID：13039449
> 
> 赞同：44
> 
> 时间：2012-10-23T21:21:29.013
> 
> 标签：eclipse

我正在尝试在 Eclipse 中安装 Tomcat，但无法显示服务器选项卡。当我转到*Window -> Show View -> Other*并输入“服务器”时，我没有得到任何结果。

当我转到*File -> New -> Other*并输入“server”时，我什么也没有得到。

有谁知道我的服务器发生了什么以及我在哪里可以找到它们？（我以前从未在服务器上使用过 Eclipse）。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2015-09-23T12:29:54.577

尝试安装`JST Server Adapters`和`JST Server Adapters Extentions`. 我正在运行 Eclipse 4.4.2 Luna，它工作正常。

以下是我遵循的步骤：

> 1.  帮助 -> 安装新软件
>     
>     
> 2.  选择“Luna - [http://download.eclipse.org/releases/luna](http://download.eclipse.org/releases/luna) ”站点
>     
>     
> 3.  展开“Web、XML 和 Java EE 开发”
>     
>     
> 4.  检查 JST 服务器适配器和 JST 服务器适配器扩展

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-03-05T14:00:17.663

对于未来有同样问题的人：尝试从 Eclipse 菜单中添加服务器选项卡，如果它不起作用，则执行上述@Tomasz Bartnik 解决方案，然后重试以下操作：

1.  转到窗口 > 显示视图 > 其他

    [![在此处输入图像描述](../Images/d1c5862dc5e62f79b365b0542ff90d6a.png)](https://i.stack.imgur.com/IEAlc.png)

2.  搜索`servers`，选择它并按 OK

    [![在此处输入图像描述](../Images/409ffb5e4ab12e685888bf20857ff90f.png)](https://i.stack.imgur.com/m8J94.png)

然后它将被添加到您的标签中

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-09-15T05:59:31.627

您可能没有得到任何结果的原因是您可能没有在 Eclipse IDE 中设置 J2EE 环境。请按照以下步骤解决问题。

1.  转到帮助 -> 安装新软件
2.  在“使用”选项卡中选择 {Oxygen - [http://download.eclipse.org/releases/oxygen }（或类似选项/版本）。](http://download.eclipse.org/releases/oxygen)
3.  搜索 Web、XML、Java EE 和 OSGi 企业开发
4.  选中对应的框，
    *   Eclipse Java EE 开发人员工具
    *   JST 服务器适配器
    *   JST 服务器适配器扩展
5.  单击下一步并接受许可协议。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-29T20:49:32.160

我最终安装了 Eclipse - JAVA EE 的新副本，现在一切正常。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-24T04:21:22.683

[Web 工具平台](http://eclipse.org/webtools/)提供 Java EE 开发工具，并包含在面向 Java EE 开发人员的 IDE 中。除其他外，它还提供了 Servers 视图，并且可以轻松地从那里启动 Tomcat 服务器。您可以下载适用于 Java EE 开发人员的 IDE，或者转到帮助菜单并安装新软件，以查找 Java EE 功能。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-17T13:46:53.677

要遵循的步骤：

```
1.Goto Help -> Install new Software
2.Give address http://download.eclipse.org/releases/oxygen and name as your choice.
3.Search for Java EE and choose 1.Eclipse Java EE Developer Tools 
4.Search for JST and choose 2.JST Server Adapters 3.JST Server Adapters Extensions
5.Click next and accept the license agreement. 
```

在窗口中找到服务器选项 - >首选项并根据需要添加服务器

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-17T15:27:12.087

1.  在 {workspace-directory}/.metadata/.plugins/org.eclipse.core.runtime/.settings 中删除以下两个文件：

    *   org.eclipse.wst.server.core.prefs
    *   org.eclipse.jst.server.tomcat.core.prefs
2.  重启 Eclipse

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-09T06:01:56.570

用于 Java 开发人员“服务器”的 Eclipse IDE 不存在。因此下载正确的 Eclipse IDE。它是面向企业 Java 开发人员的 Eclipse IDE（面向 Java EE 开发人员的 Eclipse IDE）。这种方法很容易。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-07-16T08:43:30.710

您可以从 Eclipse 市场安装 Tomcat 服务器。

帮助 -> Eclipse Market Place 搜索“Tomcat” -> 安装 Eclipse Tomcat 插件。

[![在此处输入图像描述](../Images/dd00c75840681a3fe23f6de34dc788ec.png)](https://i.stack.imgur.com/bXtCx.png)

安装后重启eclipse。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-08T14:06:11.503

您可能没有得到任何结果的原因是您可能没有在 Eclipse IDE 中设置 J2EE 环境。请按照以下步骤解决问题。

1.  转到帮助 -> 安装新软件在“使用”选项卡中选择相关的下拉条目 {Oxygen - [http://download.eclipse.org/releases/ <?>}（或类似选项/版本）。](http://download.eclipse.org/releases/)

2.  搜索 Web、XML、Java EE 和 OSGi Enterprise Development 选中对应的框，Eclipse Java EE Developer Tools JST Server Adapters JST Server Adapters Extensions 单击下一步并接受许可协议。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-10-18T14:55:45.503

[从https://tomcat.apache.org/download-90.cgi](https://tomcat.apache.org/download-90.cgi)下载 tomcat 最新的 zip 用简单的名称重命名文件夹，例如“tomcat”。保存文件夹并复制路径。

转到帮助 -> 安装新软件在“使用”选项卡中选择 {Oxygen - [http://download.eclipse.org/releases/oxygen }。](http://download.eclipse.org/releases/oxygen)选择最后一个选项 Web,XML,Java EE and OSGi Enterprise Development 勾选对应的复选框 1.Eclipse Java EE Developer Tools 2.JST Server Adapters 3.JST Server Adapters Extensions 点击下一步并接受许可协议。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-09-02T17:00:03.187

您可能安装了 Eclipse for Java Developers 而不是 Eclipse IDE for Enterprise Java Developers，服务器选项卡和其他一些不可用。

您不必卸载。只需重新运行 eclipse-inst-win64.exe 并选择 Java EE IDE

[JAVA EE IDE 安装](https://i.stack.imgur.com/brqdo.jpg)

# mysql - MySQL动态表问题

> ID：13039452
> 
> 赞同：1
> 
> 时间：2012-10-23T21:21:31.707
> 
> 标签：mysql, sql

每个月我们都会收到一个包含 300 多列的 CSV 文件。文件的布局可以随时更改，并且可以添加/删除列。我需要一种方法来创建一个动态表，其中包含所需的确切列数。我不关心列名，它们可以是 Column1、Column2 等。我计划将所有类型设置为 Varchar(500)。

理想情况下，我想要完成的是一个存储过程，我可以简单地传入所需的列数，它将循环创建必要的表定义 sql，然后执行该 sql。

甚至有可能做到这一点吗？我已经开始写以下内容：

```
BEGIN
Declare loopvar int default 1;
Declare tsql VarChar(5000);
Declare table_definition VarChar(8000);
Declare tablename varchar(20);
Set table_definition = 'Column';
set tablename = 'npi_data';
Set loopvar = 1;
While loopVar < 362 DO
  set tsql = table_definition + loopvar + 'varchar(500) DEFAULT NULL' ;
  set loopvar = loopvar + 1;
end while;
 set tsql = 'CREATE TABLE' + tablename + '(' + tsql + ') ENGINE=InnoDB DEFAULT CHARSET=utf8';
 execute tsql;
END; 
```

我想要一些接近的东西，但我真正需要的是能够创建一个包含任何给定列数的表。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:47:43.253

如果您的意思是您希望能够传递列名列表，例如`'A,B,C'`，并使用它来生成列定义列表，例如`A varchar(500) DEFAULT NULL,B varchar(500) DEFAULT NULL,C varchar(500) DEFAULT NULL`，最终生成带有该定义列表的 CREATE TABLE 语句，您可以使用这样的方法：

```
...
SET columnnames = 'A,B,C';
SET sql = CONCAT(
  REPLACE(columnnames, ',', ' varchar(500) DEFAULT NULL,'),
  ' varchar(500) DEFAULT NULL'
);
SET sql = CONCAT('CREATE TABLE ', tablename, ' (', sql, ')');
... 
```

即对名称列表中的每个逗号进行扩展，以完成对逗号前列的定义。由于最后一项后面没有逗号，因此类型只是简单地再连接一次到`REPLACE`.

或者，为了避免重复该`varchar(500) DEFAULT NULL`位，您可以这样做：

```
...
SET columnnames = 'A,B,C';
SET sql = REPLACE(CONCAT(columnnames, ','), ',', ' varchar(500) DEFAULT NULL,');
SET sql = LEFT(sql, LENGTH(sql) - 1);
SET sql = CONCAT('CREATE TABLE ', tablename, ' (', sql, ')');
... 
```

在这种情况下，在姓氏之后添加一个逗号，*然后*像前面的示例一样替换结果字符串中的所有逗号。作为对列表的最后润色，删除尾随逗号并最终构建完整的语句。

无论哪种方式，都不需要循环。

# asp.net - 如何使用 AdomdConnection 设置数据库

> ID：13039454
> 
> 赞同：1
> 
> 时间：2012-10-23T21:21:31.877
> 
> 标签：asp.net, sql, c#-4.0, ssas

当我执行此代码时：

```
AdomdConnection con = new AdomdConnection("Data Source=MyServer;User ID=MyDomain\\MyUserName;Password=MyPassword");
con.Open();

con.ChangeDatabase("Analysis Services Project1"); 
```

我得到这个例外：

> 用户 MyDomain\MyUserName$ 无权访问 Analysis Services Project1 数据库，或者该数据库不存在。

数据库名称来自使用 Microsoft SQL Server Management Studio 查看服务器。如果我打开服务器上的属性并转到安全部分，我的帐户被列为服务器管理员。在管理工作室中，我可以查看数据源、多维数据集并很好地执行 mdx 查询。

为什么我不能在代码中得到这个异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:05:42.600

哪一行导致错误？我想您必须在连接字符串上输入目录。尝试添加

```
Catalog=Analysis Services Project1 
```

到你的 con 字符串。

此外，Analysis Services Project1 似乎是项目名称？您确定这也是数据库名称吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-20T07:32:14.320

首先添加了 Microsoft.AnalysisServices.AdomdClient.dll 的引用

```
strCon = "Data Source=DBserverServerName;Integrated Security=SSPI;Initial Catalog=DBName;";
AdomdConnection con = new AdomdConnection("connectionstring"); // connect DB con.Open(); AdomdCommand cmd = new AdomdCommand("MDX query", con); //query    
AdomdDataReader reader = cmd.ExecuteReader(); //Execute query
while (reader.Read())   // read
    {
        Data dt = new Data();  // custom class
        dt.Gender = reader[0].ToString();

        dt.Eid = reader[1].ToString();
        dt.salary = reader[2].ToString();
        data.Add(dt);
    } 
```

# android - FlashBuilder 在构建 APK 时添加了 INTERNET 权限，即使它不在我的 APP XML 中

> ID：13039462
> 
> 赞同：0
> 
> 时间：2012-10-23T21:22:12.853
> 
> 标签：android, flash, air

我在 FlashBuilder 4.6（使用 AIR 3.4）中有一个 Mobile AIR 项目，我在发布 APK 时遇到了真正的问题。这是我的 APP XML 中的部分：

```
<manifestAdditions><![CDATA[
<manifest android:installLocation="auto">
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>
</manifest>
]]></manifestAdditions> 
```

出于某种原因，当我创建 APK 时，在清单权限块的末尾添加了 INTERNET 权限。请注意，asset/META-INF/AIR 文件夹中的 application.xml 看起来仍然正确。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:47:40.450

经过大量搜索，我找到了自己的答案：

> 注意：捆绑运行时时，ADT 会将 INTERNET 和 BROADCAST_STICKY 权限添加到您的应用程序。AIR 运行时需要这些权限。

BROADCAST_STICKY 似乎不再需要，但显然在使用强制运行时我们无法解决这个问题。

# scala - Scala中的案例类匹配

> ID：13039472
> 
> 赞同：1
> 
> 时间：2012-10-23T21:22:51.553
> 
> 标签：scala, pattern-matching

我想要这个匹配两个案例类的比较函数，但它有点冗长。

叶子总是在列表中排序。

```
 abstract class CodeTree
  case class Fork(left: CodeTree, right: CodeTree, chars: List[Char], weight: Int) extends CodeTree
  case class Leaf(char: Char, weight: Int) extends CodeTree

  def sortCodeTreeFun(x: CodeTree, y: CodeTree) = {
    (x, y) match {
      case (x1: Leaf, y1: Leaf) => true
      case (x1: Fork, y1: Leaf) => x1.weight < y1.weight
      case (x1: Leaf, y1: Fork) => x1.weight < y1.weight
      case (x1: Fork, y1: Fork) => x1.weight < y1.weight
    }
  } 
```

我试图将 CodeTree 构造函数修改为：

```
 abstract class CodeTree(weight: Int) 
```

这样我就可以直接比较 x 和 y，但是编译器说：

> “构造函数 CodeTree 的参数不足：（权重：Int）patmat.Huffman.CodeTree”

还有另一种缩短 sortCodeTreeFun 方法的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:58:26.600

如果要对代码树等元素进行排序，可以使用 [`Sorting.stableSort`](http://www.scala-lang.org/api/current/scala/util/Sorting%24.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:33:09.853

你可以简单地说：

```
def sortCodeTreeFun(x: CodeTree, y: CodeTree) = {
  (x, y) match {
    case (_: Leaf, _: Leaf)           => true
    case (x1: CodeTree, y1: CodeTree) => x1.weight < y1.weight
  }
} 
```

并将抽象类 CodeTree 定义为

```
abstract class CodeTree {
  def weight: Int
} 
```

错误的原因是，当您扩展带有参数的类时，您需要提供参数。因此对于

```
abstract class CodeTree(weight: Int) 
```

您需要将其扩展为

```
case class Fork(left: CodeTree, right: CodeTree, chars: List[Char], weight: Int) extends CodeTree(weight) 
```

这就是你得到的错误所说的：

```
"not enough arguments for constructor CodeTree: (weight: Int)" 
```

`weight`这是因为您在扩展 CodeTree 时没有提供所需的参数。

这种方法的问题在于权重不是 CodeTree 的成员，因此不能从 CodeTree 类型的实例中访问。也就是说，如果你这样做了：

```
 scala> Fork(...).asInstanceOf[CodeTree].weight
 <console>:11: error: value weight is not a member of CodeTree 
```

因此，在您的模式匹配中，您将无法这样做，`x1.weight`因为 x1 的类型是 a`CodeTree`并且`CodeTree`没有 a `weight`。

# java - 代码突出显示为语法错误。为什么？

> ID：13039475
> 
> 赞同：2
> 
> 时间：2012-10-23T21:22:55.123
> 
> 标签：java

我是 java 新手，我正在尝试编写这段代码，但是在使用我的变量时它以某种方式将其视为错误。已被宣布为 ofc。

```
import java.io.*;

public class FileRead {
     public void readCountries(String file){
         try{
             ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream("countries"));
             Object obj = null;
             while ((obj = inputStream.readObject()) != null) {
                 if (obj instanceof Country) {
                     System.out.println(((Country)obj).toString());
                 }
             }
         } catch (EOFException ex) { //This exception will be caught when EOF is reached
                System.out.println("End of file reached.");
            } catch (ClassNotFoundException ex) {
                ex.printStackTrace();
            } catch (FileNotFoundException ex) {
                ex.printStackTrace();
            } catch (IOException ex) {
                ex.printStackTrace();
            } finally {
                //Close the ObjectInputStream
                try {
                    if (inputStream != null) { //////////ERROR: inputStream cannot be resolved to a variable
                        inputStream.close(); //////////// Same here
                    }
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:24:10.697

将您的 inputStream 声明移到 try 块之外。`try`如果你在 try 中定义，它在块外是不可见的。

```
 ObjectInputStream inputStream = null;
    try{
     inputStream = new ObjectInputStream(new  FileInputStream("countries"));
     ........
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:24:26.130

您在块的范围内`inputStream` *定义*`try`，因此无法在外部访问它。

您可以通过执行以下操作来解决此问题，

```
ObjectInputStream inputStream = null;
try{
    inputStream = new ObjectInputStream(new FileInputStream("countries"));
    ...
} 
```

即在-block*之外*定义变量`try`并在其中分配它。这样，您可以在-block`inputStream`之外访问。`try`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:24:45.137

这很简单，您试图访问声明它的范围之外的变量。这是您的问题的简化示例：

```
try {
    int i = 0;
} catch(Exception e) {
    //...
}

++i; 
```

你看？一旦变量从声明它的大括号中转义，它就会丢失。在您的示例中：

```
try{
     ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream("countries"));
     //...
 } finally {
    if (inputStream != null) { //////////ERROR: inputStream cannot be resolved to a variable
        inputStream.close(); //////////// Same here
    }
} 
```

只是拖到`inputStream`外面：

```
ObjectInputStream inputStream = null;
try{
     inputStream = new ObjectInputStream(new FileInputStream("countries"));
     //...
 } finally {
    if (inputStream != null) {
        inputStream.close();
    }
} 
```

或者甚至更好地使用**try-with-resources**（嘿，Java 7 不再新鲜！）

```
try(ObjectInputStream inputStream = new ObjectInputStream(new FileInputStream("countries")) {
    //...
} 
```

不需要`finally`,`close()`等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T21:26:55.397

这是变量范围的问题。

您的`inputStream`变量属于`try`不包含与 or 块相同范围的`catch`块，`finally`导致在or块`inputStream`中未声明。因此，该变量在块中是未知的，解释了您的 IDE 显示的“**变量可能未初始化”。**`catch``finally``catch`

 **简单地说，将您的变量初始化到`null`第一个`try`/之外`catch`，如下所示：

```
ObjectInputStream inputStream = null;
try{ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T21:24:21.210

该变量在`try { ... }`块内声明，因此其范围和可见性仅限于它。你不能在外面使用它。

您可以在块外声明它：

```
ObjectInputStream inputStream = null;
try{
         inputStream = new ObjectInputStream(new FileInputStream("countries"));
    //...    
 } catch (EOFException ex) { //This exception will be caught when EOF is reached
    //...      
 } finally {
            //Close the ObjectInputStream
            try {
                if (inputStream != null) { //////////ERROR: inputStream cannot be resolved to a variable
                    inputStream.close(); //////////// Same here
                }
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T21:24:26.937

inputstream 在您的 try/catch 的 {} 之外不存在**

# java - 从日历中获取自定义日期

> ID：13039477
> 
> 赞同：-2
> 
> 时间：2012-10-23T21:22:57.857
> 
> 标签：java, date

我想让一个月中的某一天从该字段中实际减去天数。

注意：日期是自定义选择的，如 2012-09-10

```
Date d2 = new SimpleDateFormat("yyyy-M-dd").parse("2012-10-24);

Calendar calendar= Calendar.getInstance();
Calendar csd= Calendar.getInstance();
calendar.setTime(d2);

csd.add(calendar.DAY_OF_MONTH, -5); 
```

> csd.add(calendar.get(Calendar.DAY_OF_MONTH), -5)

上面的内容实际上会出错`IllegalArgumentException`，但是当我 sysout 时会打印正确的值

`calendar.DAY_OF_MONTH`不会打印 d2 中的正确日期。如果我做错了什么或者这不是正确的方法，我会感到困惑？

**更新**

这正是我在代码中所拥有的。我想要任何日期范围的数组。假设用户已将结束日期设置`"2012-8-20"`为 in `d2`。我想要一个数组中过去 30 天的日期，该代码不起作用。

```
for(int count = 30; count >=1; count--) {
   Calendar csd = Calendar.getInstance();
   csd.add(calendar.DAY_OF_MONTH, -count);
   String dt = (csd.get(Calendar.YEAR)) + "-" + (csd.get(Calendar.MONTH)+1) + "-" + (csd.get(Calendar.DATE));
   aDays[30 - count] = dt;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:28:26.623

```
csd.add(calendarEndDate.get(Calendar.DAY_OF_MONTH), -5) 
```

第一个参数应该是字段类型。

例子：

```
csd.add(Calendar.DAY_OF_MONTH, -5) 
```

在你的情况下：

```
calendarEndDate.get(Calendar.DAY_OF_MONTH) 
```

返回月份中的某一天，但`Calendar`预计需要修改哪些文件。

请参阅日历 API[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)。

**编辑：**

```
calendar.add(calendar.DAY_OF_MONTH, -5);
int dayofMonth = calendar.get(Calendar.DAY_OF_MONTH);
System.out.println(dayofMont); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:32:23.520

它对我有用。

```
 Date d2 = new SimpleDateFormat("yyyy-M-dd").parse((String)"2012-10-24");

        Calendar calendar= Calendar.getInstance();
        Calendar csd= Calendar.getInstance();
        calendar.setTime(d2);
        calendar.add(calendar.DAY_OF_MONTH, -5);        
        System.out.println(new Date(calendar.getTimeInMillis()));
        csd.add(csd.DAY_OF_MONTH, -5);      
        System.out.println(new Date(csd.getTimeInMillis()));    

csd.add(calendar.get(Calendar.DAY_OF_MONTH), -5);//wrong is giving an invalid argument 
```

更新

```
 String[] aDays = new String[30];
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-M-dd");
        for (int count = 30; count >= 1; count--) {
            Calendar csd = Calendar.getInstance();
            csd.add(Calendar.DAY_OF_MONTH, -count);
            aDays[30 - count] = (sdf.format(new Date(csd.getTimeInMillis())));      
        }

        //to double check it
        for (int count = 30; count >= 1; count--) {
            System.out.println(aDays[30 - count]);
        } 
```

我希望你有所有你需要了解它是如何工作的，祝你好运朋友！

# c# - 如何查找文件的最后修改日期？

> ID：13039478
> 
> 赞同：1
> 
> 时间：2012-10-23T21:23:11.340
> 
> 标签：c#, windows-store-apps

我正在阅读几个文件`StorageFile`，它似乎没有 LastModified 属性。是否有可能在某个地方找到这些信息，或者它已经完全消失了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T11:09:24.060

找到了！现在您必须通过`BasicProperties`诸如 LastAccessDate 之类的属性

这是[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileproperties.basicproperties.aspx)

# php - jQuery datepicker post to php switch to redirect page

> ID：13039483
> 
> 赞同：0
> 
> 时间：2012-10-23T21:23:33.920
> 
> 标签：php, jquery, datepicker, switch-statement

我可能完全做得过火了，但是有人可以解释我做错了什么吗？

jQuery：

```
onSelect: function(){
            $.post("nav.php",function(){
                $.datepicker.parseDate("Md");
            });
            }, 
```

php:

```
<?
$d=date("Md")
    switch ($d) {
        case Jan1:
            header(Location: '/html/Jan/Jan1/Jan1.html')
        case Jan2:
            header(Location: '/html/Jan/Jan2/Jan2.html')
    }
?> 
```

正如您可能怀疑的那样，我的目标是在`datepicker`选择某个日期时重定向到一个页面，我已经设置了一个`php switch`来处理它（会有大量页面，所以我认为这几乎是最干净的方式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:32:46.300

感谢 jedwards，他给了我正确的推动力。

这是一些修改过的代码（原始代码不起作用）。

```
onSelect: function(){
            var getd = $(this).datepicker("getDate");
            var datePart = $.datepicker.formatDate("M/Md/Md",getd);
            location.href = ("/html/" + datePart + ".html");
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:40:40.570

这里似乎不需要 PHP。就像是

```
onSelect: function(dateStr, dp){
    var datePart = $.datepicker.formatDate("M/Md/Md", dp.getDate());
    window.location("http://www.yoursite.com/" + datePart + ".html"
    }, 
```

可能更接近你想要的。

这个想法是使用该[`getDate()`](http://docs.jquery.com/UI/Datepicker#method-getDate)方法获取日期，然后将其格式化为`Jan/Jan1/Jan1`样式，然后将浏览器重定向到您想要的页面。

您必须更改其中的一些内容才能确保它正常工作，但这应该为您指明正确的方向。

# wix - 从不同的组件构建一个 MSI

> ID：13039486
> 
> 赞同：4
> 
> 时间：2012-10-23T21:23:44.113
> 
> 标签：wix, windows-installer

我们的产品包含三个部分：

*   应用程序文件（exe 和 dll 文件）
*   帮助文件
*   SSRS 报告

所有这三个东西都通过使用 WIX 构建的相同安装程序一起安装。在我们公司，每个组件都是由不同的团队开发的，并且有不同的截止日期。我们想将我们的 MSI 分成三个部分，这样当一个部分变得稳定时，它的安装程序部分也很稳定，并且在其他部分更新时不会从头开始重建。

我查看了合并模块和 CAB 文件，但我认为这是错误的方向。WIX 工具集中有什么东西可以帮助我实现目标吗？

（我已经阅读了[Building MSI Installer and Separaete Installation Files](https://stackoverflow.com/questions/8980332/building-msi-installer-and-separate-instalation-files)的问题，但相信这个问题有点不同。）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:13:37.267

WiX 库 ( `*.wixlib`) 似乎是在您的案例中分发组件的最佳方法。

我会像这样组织这个过程：

*   每个团队都有一个单独的 WiX 安装项目（Setup Library Project），它编译成`*.wixlib`文件而不是 MSI（或 MSM）包
*   每个项目都随着组件的开发而发展，并且输出与其他团队共享
*   集成构建将所有`wixlib`库和链接 (light.exe) 一起收集到一个 MSI 包中

因此，您将始终拥有一个包含最新组件构建的最终安装包，这就是持续集成的全部意义所在。

据我了解，您不会单独分发组件，对于最终用户来说，它仍然是一个可靠的安装包。因此，合并模块可能是开销。与合并工具相比，我怀疑（但不确定）light.exe 在链接库时会执行一些额外的验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T06:00:44.920

好吧，合并模块是一种解决方案。您可以有两个包含帮助文件和 SSRS 报告的合并模块，并将它们添加到仅包含应用程序文件的主包中。如果两个合并模块中没有任何变化，这可能会增加构建时间，但主包更改仍然需要很长的构建时间。

另一种选择是为每个组件创建单独的包，并使用[Burn](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)将它们捆绑到一个单独的包中。我会推荐使用合并模块，它更干净且易于管理。

# android - 使 android sql lite 数据类型始终为文本

> ID：13039487
> 
> 赞同：0
> 
> 时间：2012-10-23T21:23:45.260
> 
> 标签：android, sqlite

我正在尝试为我的 Android 应用程序使用创建 sqllite db

将所有数据类型都作为文本是坏习惯吗？原因是即使某些数据本质上可以是整数（如项目数......等等），但很多时候我需要将值显示为字符串或从用户那里获取它作为输入。所以我想为了更容易操作，我只会将数据库中的数据类型设置为文本

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:31:02.490

这里首先要了解的是[SQLite Storage Classes](http://www.sqlite.org/datatype3.html)。SQLite 允许将任何数据类型存储在表的列中，表定义的实际数据类型只是对数据库引擎的提示。

这意味着即使您将列定义为 type `INTEGER`，您仍然可以在其中存储文本。

话虽如此，我还没有找到在列中存储任意数据类型的用例，或者忽略定义的数据类型的用例。出于可读性目的，正确键入内容并遵守定义的类型可能是个好主意。

# wpf - 使用 HierarchicalDataTemplate 的 WPF 菜单绑定未正确呈现菜单项

> ID：13039490
> 
> 赞同：8
> 
> 时间：2012-10-23T21:23:57.517
> 
> 标签：wpf, binding, menu

我正在构建一个 WPF 应用程序，试图严格遵守 MVVM 原则。我在让菜单正确呈现时遇到问题。我已经尝试了几种方法并且卡住了。看起来我的绑定是正确的，但我不确定我的样式操作。

这是我遇到问题的代码。就像我说的那样，绑定似乎很好，我什至可以使用 Snoop 看到 Header 菜单项的正确值，但我看到的只是菜单项的空容器。

```
 <DockPanel>
        <DockPanel.Resources>
            <HierarchicalDataTemplate x:Key="TopMenuHDT" ItemsSource="{Binding Children}">
                <HierarchicalDataTemplate.ItemContainerStyle>
                    <Style TargetType="{x:Type MenuItem}">
                        <Setter Property="Command" Value="{Binding Command}" />
                        <Setter Property="Header" Value="{Binding MenuText}" />
                        <Setter Property="Icon">
                            <Setter.Value>
                                <Image Source="{Binding MenuIcon}" Height="16px" Width="16px" />
                            </Setter.Value>
                        </Setter>
                    </Style>
                </HierarchicalDataTemplate.ItemContainerStyle>
            </HierarchicalDataTemplate>

        </DockPanel.Resources>
        <Menu DockPanel.Dock="Top" Height="auto"
              ItemsSource="{Binding TopMenuItems}" 
              ItemTemplate="{StaticResource TopMenuHDT}"/> 
```

在我的主视图模型中：

```
 private ObservableCollection<MenuViewModel> _topMenuItems;
    public ObservableCollection<MenuViewModel> TopMenuItems
    {
        get { return _topMenuItems; }
        set
        {
            if (_topMenuItems == value)
                return;

            _topMenuItems = value; base.RaisePropertyChanged("TopMenuItems");
        }
    }
...
    public void LoadMainMenu()
    {
        IList<ViewModels.MenuViewModel> fileMenuItems = PopulateFileMenuEntries();
        IList<ViewModels.MenuViewModel> editMenuItems = PopulateEditMenuEntries();

        _topMenuItems.Add(new ViewModels.MenuViewModel() { MenuText = "_File", Children = new ObservableCollection<ViewModels.MenuViewModel>(fileMenuItems) });
        _topMenuItems.Add(new ViewModels.MenuViewModel() { MenuText = "_Edit", Children = new ObservableCollection<ViewModels.MenuViewModel>(editMenuItems) });

   private IList<ViewModels.MenuViewModel> PopulateFileMenuEntries()
    {
        List<ViewModels.MenuViewModel> fileMenuItems = new List<ViewModels.MenuViewModel>();

        fileMenuItems.Add(new ViewModels.MenuViewModel() { MenuText = "_Open", MenuIcon = new BitmapImage(new Uri("pack://application:,,,/Resources/OpenDocument16.png")) , Command = _mainWindowViewModel.OpenCommand });
        fileMenuItems.Add(new ViewModels.MenuViewModel() { MenuText = "Open _Recent" });

        return fileMenuItems;
    } 
```

菜单视图模型：

```
public class MenuViewModel : ObservableObject
{
    internal MenuViewModel()
    {
        IsEnabled = true;
    }

    private string _menuText;
    public string MenuText
    {
        get { return _menuText; }
        set
        {
            if (_menuText == value)
                return;

            _menuText = value; base.RaisePropertyChanged("MenuText");
        }
    }

    private ICommand _command;
    public ICommand Command
    {
        get { return _command; }
        set
        {
            if (_command == value)
                return;

            _command = value; base.RaisePropertyChanged("Command");
        }
    }

    private BitmapImage _menuIcon;
    public BitmapImage MenuIcon
    {
        get { return _menuIcon; }
        set
        {
            if (_menuIcon == value)
                return;

            _menuIcon = value; base.RaisePropertyChanged("MenuIcon");
        }
    }

    private ObservableCollection<MenuViewModel> _children;
    public ObservableCollection<MenuViewModel> Children
    {
        get { return _children; }
        set
        {
            _children = value; base.RaisePropertyChanged("Children");
        }
    }
} 
```

任何有助于正确呈现此内容的帮助将不胜感激。

**编辑：**

**如果有人遇到类似问题，这是最终解决方案：**

```
<DockPanel>
    <Menu DockPanel.Dock="Top" Height="auto" ItemsSource="{Binding TopMenuItems}" >
        <Menu.Resources>
            <Image x:Key="MenuIconResource" Height="16" Width="16" Source="{Binding MenuIcon}" x:Shared="False" />
            <Style TargetType="{x:Type MenuItem}">
                <Setter Property="Command" Value="{Binding Command}" />
                <Setter Property="Header" Value="{Binding MenuText}" />
                <Setter Property="InputGestureText" Value="{Binding ShortcutText}" />
                <Setter Property="IsEnabled" Value="{Binding IsEnabled}" />
                <Setter Property="Icon" Value="{StaticResource MenuIconResource}" />
                <Setter Property="ItemsSource" Value="{Binding Children}"/>

                <Style.Triggers>
                    <DataTrigger Binding="{Binding }" Value="{x:Null}">
                        <Setter Property="Template" >
                            <Setter.Value>
                                <ControlTemplate>
                                    <Separator Style="{StaticResource {x:Static MenuItem.SeparatorStyleKey}}" />
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Menu.Resources>
    </Menu> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T04:01:23.410

试试这个而不是你的 DataTemplate

```
 <DockPanel>
    <Menu DockPanel.Dock="Top" Height="auto"
          ItemsSource="{Binding TopMenuItems}">

        <Menu.Resources>
            <Style TargetType="{x:Type MenuItem}">
                <Setter Property="Command" Value="{Binding Command}" />
                <Setter Property="Header" Value="{Binding MenuText}" />
                <Setter Property="Icon">
                    <Setter.Value>
                        <Image Source="{Binding MenuIcon}" Height="16px" Width="16px" />
                    </Setter.Value>
                </Setter>
                <Setter Property="ItemsSource" Value="{Binding Children}"/>
            </Style>
        </Menu.Resources>

    </Menu>
</DockPanel> 
```

# javascript - 在 DIV 中显示来自 SharePoint 的 CAML 查询结果

> ID：13039493
> 
> 赞同：2
> 
> 时间：2012-10-23T21:24:00.850
> 
> 标签：javascript, sharepoint, caml

所以我想要做的是在一个带有一些自定义类的 div 中显示 SharePoint 列表中的一些内容。第一个脚本使用来自[Awkward Showcase](http://showcase.awkwardgroup.com/index3.html)的 jquery 插件 所以，我的 CAML 查询有效。我在 div 标签中调用了该函数，因为我想将其显示为缩略图标题，但是，它似乎覆盖了页面上的所有内容并最后处理。

所以我所有的 div 标签和内容都消失了，它只在页面上写入函数的结果。

这是我的代码：

```
<script type="text/javascript">

`$(document).ready(function()'

{
    $("#showcase").awShowcase(
    {
        content_width:          700,
        content_height:         470,
        fit_to_parent:          false,
        auto:                   false,
        interval:               3000,
        continuous:             false,
        loading:                true,
        tooltip_width:          200,
        tooltip_icon_width:     32,
        tooltip_icon_height:    32,
        tooltip_offsetx:        18,
        tooltip_offsety:        0,
        arrows:                 true,
        buttons:                true,
        btn_numbers:            true,
        keybord_keys:           true,
        mousetrace:             false, /* Trace x and y coordinates for the mouse */
        pauseonover:            true,
        stoponclick:            true,
        transition:             'hslide', /* hslide/vslide/fade */
        transition_delay:       300,
        transition_speed:       500,
        show_caption:           'onhover', /* onload/onhover/show */
        thumbnails:             true,
        thumbnails_position:    'outside-last', /* outside-last/outside-first/inside-last/inside-first */
        thumbnails_direction:   'horizontal', /* vertical/horizontal */
        thumbnails_slidex:      0, /* 0 = auto / 1 = slide one thumbnail / 2 = slide two thumbnails / etc. */
        dynamic_height:         false, /* For dynamic height to work in webkit you need to set the width and height of images in the source. Usually works to only set the dimension of the first slide in the showcase. */
        speed_change:           false, /* Set to true to prevent users from swithing more then one slide at once. */
        viewline:               false /* If set to true content_width, thumbnails, transition and dynamic_height will be disabled. As for dynamic height you need to set the width and height of images in the source. */
    });
 });

</script>

<script type="text/javascript"> 
function GetNews(){
    /*Get News*/
    $().SPServices({
                 operation: "GetListItems",
                 webURL: 'http://weburl.com',
                 async: false,
                 listName: "Posts",
                 CAMLViewFields: "<ViewFields><FieldRef Name='Title' /><FieldRef Name='Primary' /><FieldRef Name='Pic' /><FieldRef Name='Short_x0020_Description' /></ViewFields>",
                 CAMLRowLimit: "10",
                CAMLQuery: "<Query><Where><Eq><FieldRef Name='Primary'/><Value Type='choice'>1</Value></Eq></Where></Query>",
                 completefunc: function (xData, Status) {
                 //alert("Status of XML message reaching Sharepoint webservice: " + Status);
                 //alert("Response from server: " + xData.responseText);

                       $(xData.responseXML).SPFilterNode("z:row").each(function () {
                           var name = ($(this).attr("ows_Title"));
                           document.write(name);
                           });
        }
    }); //Close getNews
}
</script> 

<body>
<div style="width: 700px; margin: auto;">
    <div id="showcase" class="showcase">
        <!-- Each child div in #showcase with the class .showcase-slide represents a slide. -->
        <div class="showcase-slide">
            <!-- Put the slide content in a div with the class .showcase-content. -->
            <div class="showcase-content">
                <!-- The image below needs to be from the variable above pictureUrl -->
                <img src="images/01.jpg" alt="01" />
            </div>
            <!-- Put the thumbnail content in a div with the class .showcase-thumbnail -->
            <div class="showcase-thumbnail">
                <!-- The image below needs to be from the variable above pictureUrl -->
                <img src="images/01.jpg" alt="01" width="140px" />
                <!-- The div below with the class .showcase-thumbnail-caption contains the thumbnail caption. This needs to be the variable 'name' from above -->
                <div class="showcase-thumbnail-caption"><div><script type="text/javascript">GetNews()</script></div></div>
                <!-- The div below with the class .showcase-thumbnail-cover is used for the thumbnails active state. -->
                <div class="showcase-thumbnail-cover"></div>
            </div>
            <!-- Put the caption content in a div with the class .showcase-caption. This needs to be the variable 'postDesc' from above -->
            <div class="showcase-caption">
                <h2>Be creative. Get Noticed!</h2>
            </div>
        </div>
    </div>

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:26:38.627

好吧，它可能无法正常工作，因为您直接将其写入文档而不是特定的 div

```
 $(xData.responseXML).SPFilterNode("z:row").each(function () {
                       var name = ($(this).attr("ows_Title"));
                       document.write(name);//this line needs a fix maybe $('#divID').append('<h1>'+name+'<h1>') for eg
                       }); 
```

# jquery - 为什么这个jquery不能在ie7中运行

> ID：13039494
> 
> 赞同：0
> 
> 时间：2012-10-23T21:24:04.137
> 
> 标签：jquery, internet-explorer-7

该脚本在 IE7 中不起作用，现已修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:34:02.473

IE7 不允许在对象定义中的最后一项之后出现尾随逗号（其他浏览器不反对）。去掉后面的逗号：

```
.attr({value: regNum,}) 
```

和这个：

```
{id: regNum,}) 
```

此固定版本在 IE7 中运行：http: [//jsfiddle.net/tbfHF/11/](http://jsfiddle.net/tbfHF/11/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T21:27:37.923

确保您`type`在脚本标记中包含该属性：

`<script type="text/javascript">`

# sharepoint - SharePoint 2007 WSP 部署最佳实践

> ID：13039496
> 
> 赞同：1
> 
> 时间：2012-10-23T21:24:12.930
> 
> 标签：sharepoint, iis, deployment, wsp

我正在使用 VS2010 上的 WSP 构建器构建一些 WSP（一个自定义 Web 部件和一个品牌化 wsp，都范围为网站集级别）。我们的 SharePoint 2007 Farm 包含两个 Web 应用程序。

我想知道将 WSP 部署到特定 Web 应用程序（Web 应用程序 A）是否只会回收该给定 Web 应用程序（Web 应用程序 A）的应用程序池。并且其他 Web 应用程序（Web App B）在此过程中不会受到影响。

我要确保的是，其他 Web 应用程序的用户在此版本期间无论如何都不会遇到任何停机时间，并且在查看网站集功能列表时 wsp 仅出现在一个 Web 应用程序中。

这种类型的部署是否只会导致应用程序池回收或 IIS 也会被重置？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:16:01.593

Visual Studio 2010 和 wspbuilder 2010 可能会给你一个不正确的结构或命名。想想 14 蜂巢和 12 蜂巢。我可能错了，但值得一试。

然而回到你的问题。

向服务器场添加解决方案 (WSP) 应该会对用户看到的内容产生任何影响。

部署解决方案会导致给定 Web 应用程序的应用程序池回收。请记住（我已经看到了）某些地方在一个应用程序池上托管了许多内容，这意味着您将有效地看到附加到该应用程序池的任何内容在短时间内突然变得缓慢/无响应。

从理论上讲，只要 Web 应用 A 和 Web 应用 B 位于单独的应用程序池中，您应该只会看到其中一个受到影响（取决于您的部署位置）

请参阅[http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/385eb454-5083-47a6-b378-615b67a065a3/](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010general/thread/385eb454-5083-47a6-b378-615b67a065a3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:40:41.767

WSP 部署仅回收包含您的网站集的应用程序池，而不是重置所有应用程序池的 iisreset。

仅当两个 Web 应用程序共享相同的应用程序池时（在最佳实践 SharePoint 设置中不太可能），其他 Web 应用程序的用户才会在此部署期间遇到停机时间。

WSP 将仅出现在一个网站集功能列表中，即部署它的网站集。

WSP Builder是VS2010中用于SharePoint 2007部署的好工具，该工具在路径和命名方面都是正确的，值得信赖！

# regex - 正则表达式：在变量文本之后匹配所有内容

> ID：13039503
> 
> 赞同：0
> 
> 时间：2012-10-23T21:24:43.703
> 
> 标签：regex, regex-negation

正则表达式新手在这里。我有如下文字：

```
"Show title 2012 23 10 this is its title" 
```

我需要一个正则表达式来匹配日期之后的所有内容：

```
"this is its title" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:13:14.557

在蟒蛇中，

```
import re
dateformat = re.compile(r'\d{4} \d{1,2} \d{1,2}')
dateformat.split('Show title 2012 23 10 this is its title')[1].strip() 
```

会给你输出。

您可以将 dateformat 修改为您可以期望的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:26:29.143

此正则表达式使用*环视*与[pcre](/questions/tagged/pcre "显示标记为“pcre”的问题")和[perl](/questions/tagged/perl "显示标记为“perl”的问题")一起使用：

 *```
Show title 2012 23 10 \Kthis is its title 
```

另一种表示法是：

```
(?<!Show title 2012 23 10)this is its title 
```

请参阅[http://www.perlmonks.org/?node_id=518444](http://www.perlmonks.org/?node_id=518444)（这是 Perl，但适用于大多数现代语言）

如果你需要更简单的东西，你应该说出你使用的是什么语言。*

# javascript - 群组成员推送通知或时间线帖子的权限

> ID：13039504
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:24:44.547
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-fql

不确定我是否正确地问这个问题，但它就在这里。

如果您有一个有 150 人的小组，而且并非所有人都做出贡献，那么他们不太可能在不查看侧栏的一些新帖子（如果有的话）的情况下了解任何新内容。如果进行了投票并提示他们访问，是否有办法推送通知。或者有没有办法在他们的时间线上发布。我似乎找不到有关该组一旦接受该组提供哪些权限的文档？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:37:38.760

我不确定我是否完全理解这个问题，但听起来你想在通过 API 向群组发布内容时强制通知？这是不可能的 - 用户为组设置自己的通知选项

# c++ - 使用winapi从文件中读取数据

> ID：13039506
> 
> 赞同：0
> 
> 时间：2012-10-23T21:24:45.620
> 
> 标签：c++, c, winapi

我知道在winapi中存在`ReadFile()`从文件读取数据的功能，但我不知道如何设置从文件读取的位置。我可以使用 WinAPI 做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:27:32.990

是的，您可以使用[`SetFilePointerEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365542%28v=vs.85%29.aspx). 但是，除非您有充分的理由使用原始 WinAPI，否则最好使用跨平台 I/O 库，例如 C 的 stdio 库或 C++ 的 iostream 库。这样，您的代码就可以移植到任何平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:28:10.167

我假设您的意思是使用 Win32 API 查找文件中的特定位置。使用功能 `SetFilePointerEx`。但我仍然推荐`fseek()`和`fopen()`

# java - 在android中创建计时器的最简单方法？

> ID：13039513
> 
> 赞同：2
> 
> 时间：2012-10-23T21:25:32.143
> 
> 标签：java, android, android-intent, timer

我正在尝试为游戏制作计时器，但我被卡在了 atm 中。到目前为止，这是我的代码。我为这个意图做了一个新的活动，因为我在某个地方读到了这是一种方法。

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //Timer timer = new Timer();
        //task = new TimerTask() {

            Button b1 = (Button) findViewById(R.id.button1);        
            b1.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v){

                    startActivity(new Intent("com.loltimer.Timer"));
                }
            });
      };  
} 
```

当我按下第一个按钮时，我想要一个从 5 分钟到 0 的计时器。在 0 时，我想要播放声音。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:00:41.057

定时操作最好由`Handler`Android 中的 a 来处理。 [http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

您可以将要在将来运行的操作包装为 a`Runnable`并将其传递给`postDelayed()`. 如果操作需要在该时间间隔内重复运行，您可以`postDelayed()`在结束时调用`Runnable`以安排下一次运行。

`CountdownTimer`如果您需要定期运行某些代码有限次数，这也很有用。这个类实际上只是对`Handler`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:49:59.430

必须是Android倒计时类：http: [//developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

# iphone - iOS 中的“缺少根元素”Soap 请求

> ID：13039514
> 
> 赞同：0
> 
> 时间：2012-10-23T21:25:36.533
> 
> 标签：iphone, objective-c, ios, web-services, soap

我有 SOAP 网络服务，我尝试连接它。但 SOAP 响应包含“System.Xml.XmlException：缺少根元素”。

我的 obj-c 代码。怎么了？

```
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                         "<soap:Body>"
                         "<Method1 xmlns=\"http://tempuri.org/\">"
                         "<param1>string</param1>"
                         "</Method1>"
                         "</soap:Body>"
                         "</soap:Envelope>"];

NSLog(soapMessage);

NSURL *url = [NSURL URLWithString:@"web service url"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest addValue: @"\"http://tempuri.org/Method1\"" forHTTPHeaderField:@"SOAPAction"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

if( theConnection )
{
    webData = [[NSMutableData data] retain];
}
else
{
    NSLog(@"theConnection is NULL");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:07:43.280

```
NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                         "<soap:Body>"
                         "<Method1 xmlns=\"http://tempuri.org/\">"
                         "<param1>%@</param1>"
                         "</Method1>"
                         "</soap:Body>"
                         "</soap:Envelope>",str];
Str here is a string that you need to pass for param1.
Hope This will work for you. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:45:14.700

您需要从以下位置删除额外的引号：

```
[theRequest addValue: @"\"http://tempuri.org/Method1\"" forHTTPHeaderField:@"SOAPAction"]; 
```

它应该是：

```
[theRequest addValue: @"http://tempuri.org/Method1" forHTTPHeaderField:@"SOAPAction"]; 
```

希望有帮助。

# .htaccess - .htaccess 与动态子域

> ID：13039516
> 
> 赞同：2
> 
> 时间：2012-10-23T21:25:40.947
> 
> 标签：.htaccess, subdomain

我试图制作一个 .htacces 来模拟动态子域。喜欢他的帖子： [.htaccess: mod-rewrite; 子域](https://stackoverflow.com/questions/8490184/htaccess-mod-rewrite-subdomain/13038391#comment17702521_13038391)

但我不可能得到预期的结果。

我已经阅读了几次文档：[apache](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

我对 RewriteCond、RewriteRule、正则表达式没有任何问题。但是我的子域有问题。

我有这个页面：tododiversion.es，对于我的例子，我想要这个：

> chr.tododiversion.es ==> tododiversion.es/chr/

我将 .htaccess 放在 www 文件夹中：`www/ .htaccess`

并且文件夹“chr”位于： `www/chr/`

在我放的 htacces 中：

```
RewriteEngine On

# host starts with something else  
RewriteCond %{HTTP_HOST} ^([^\.]+)\.tododiversion\.es$  [NC]

# rewrite 
RewriteRule ^(.*)$ /chr  [L] 
```

它不起作用..

我知道 urlrewritting 是有效的，因为我做了一个简单的测试。我知道 RewriteCond 正在工作，因为我做了一个简单的测试。我正在尝试使用 localhost 和 127.0.01 在我的计算机上，但它也没有工作。

如果有人能给我一些建议，那就太好了！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:56:51.140

问题可能是 apache 未正确配置为处理子域。确保您已将所有子域设置为转发到此目录，否则 .htaccess 将永远不会执行。

```
<VirtualHost *:80>
ServerName domain.com
ServerAlias *.domain.com
DocumentRoot /var/www/domain.com
</VirtualHost> 
```

请记住在更新配置文件后重新启动 Apache。

如需参考，请参阅[如何在 Ubuntu 上为 Apache2 配置子域？](https://stackoverflow.com/questions/6836725/how-to-configure-subdomains-for-apache2-on-ubuntu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:09:00.993

您需要在重写规则中包含 $1，以便传递域之后的任何 URL 细节。

chr.tododiversion.es/page.html ==> tododiversion.es/chr/page.html

根据您提供的链接，重写规则应如下所示：

```
# rewrite
RewriteRule ^(.*)$ /%1/$1  [L] 
```

# java - 按大小对 ArrayList 中的集合进行排序

> ID：13039518
> 
> 赞同：5
> 
> 时间：2012-10-23T21:25:44.017
> 
> 标签：java, sorting, set

我想通过将所有集合放在一个列表中来做到这一点，然后该列表将放在一个地图中，其中关键是大小。我知道一个集合的最大大小（给我），所以我可以在 0 和那个数字之间迭代，获取每个列表，然后遍历每个列表并将每个集合放入一个数组列表中。

然而，这看起来非常笨拙——有没有更好的方法呢？有什么方法可以根据大小进行比较器功能吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T21:28:15.723

您可以为此提供一个[比较](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)器。并使用`Collections.sort()`

```
class SizeComarator implements Comparator<Set<?>> {

    @Override
    public int compare(Set<?> o1, Set<?> o2) {
        return Integer.valueOf(o1.size()).compareTo(o2.size());
    }
}

    ArrayList<Set<String>> arrayList = new ArrayList<Set<String>>();
    Set<String> set1 = new HashSet<String>();
    set1.add("A");
    set1.add("B");
    Set<String> set2 = new HashSet<String>();
    set2.add("A");
    arrayList.add(set1);
    arrayList.add(set2);
    Collections.sort(arrayList, new SizeComarator());
    System.out.println(arrayList); 
```

输出：

```
 [[A], [A, B]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:34:18.167

除了另一个（完全有效的）答案之外，我只想指出您不需要显式定义一个新类，您可以匿名创建一个：

```
Collections.sort(myList, new Comparator<Set<?>>() {
    @Override
    public int compare(Set<?> o1, Set<?> o2) {
        return Integer.valueOf(o1.size()).compareTo(o2.size());
    }
}); 
```

当然，如果您打算多次使用这样的比较器，那么我会考虑明确定义它。

* * *

相关的javadocs：

*   [`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

# java - 如何通过Java在Android中使用可绘制形状？

> ID：13039520
> 
> 赞同：0
> 
> 时间：2012-10-23T21:25:52.553
> 
> 标签：java, android

如果我有一个可绘制的形状：

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
 android:shape="rectangle"> 
 <stroke android:width="2dp" android:color="#FFFFFFFF" />
 <gradient android:startColor="#DD000000" android:endColor="#DD2ECCFA" 
        android:angle="225"/> 

<corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
 android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

我将如何使用它作为文本视图的背景？我尝试了类似下面的方法，但没有奏效。

```
TextView jObjTv = new TextView(getActivity());
jObjTv.setBackgroundDrawable(findViewById(R.drawable.sample_box)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:30:18.913

您发布的代码不起作用，因为可绘制对象不是视图，也不是布局的一部分。

`textView.setBackgroundResource(R.drawable.sample_box)`如果您想使用该资源，您需要致电。如果要使用 Drawable，则需要使用`context.getResources().getDrawable(R.drawable.sample_box)`.

# sql-server - SQL server 2012 返回的结果与 SQL server 2008 不同

> ID：13039528
> 
> 赞同：1
> 
> 时间：2012-10-23T21:26:28.707
> 
> 标签：sql-server, sql-server-2008-r2, sql-server-2012

我有一段脚本使用光标对表中的行进行排序。例如，表格如下所示，SSN、Kid_SSN、Kid_DOB、Seq# 列出每个有 1 个或多个孩子的人。我想根据出生日期更新 Seq# 以将每个孩子标记为 1、2、3...。我使用游标进行更新以在 SQL Server 2008 中成功完成。我目前的问题是这个相同的脚本在 sql server 2012 中无法按预期运行。问题在于 SQL 2012 游标一次获取 NEXT 超过 1 行. 所以问题是我在哪里可以设置游标获取大小？我四处寻找，但没有找到好的答案。这里的任何人都可以解释一下吗？谢谢。

脚本如下所示：

```
DECLARE @SocialSecurity varchar(9), @PersonID int, @Dep_SSN varchar(9)
DECLARE @LastName varchar(20), @FirstName varchar(20), @BirthDate datetime, 
    @Number int

DECLARE @ssn varchar(9) = '000000000'
DECLARE @Mem int = 1
DECLARE cur cursor
FOR SELECT * FROM kids
FOR UPDATE OF Number;

OPEN cur;

FETCH NEXT FROM cur INTO @SocialSecurity, @PersonID, @Dep_SSN, @LastName, @FirstName, 
    @BirthDate, @Number;

WHILE @@FETCH_STATUS = 0
BEGIN

IF @SocialSecurity = @ssn
BEGIN

UPDATE kids
SET Number = @Mem+1
WHERE CURRENT OF cur
SET @Mem = @Mem+1
END;
ELSE
BEGIN
SET @ssn = @SocialSecurity
SET @Mem = 1
END;
FETCH NEXT FROM cur INTO @SocialSecurity, @PersonID, @Dep_SSN, @LastName, @FirstName, 
    @BirthDate, @Number;
END;
CLOSE cur;
DEALLOCATE cur; 
```

有关此问题的更多信息。kids 是由 'SELECT .. INTO' 生成的临时表，简化集如下所示

```
SSN       Kid_SSN        DOB        Seq#
123123123 987987987      1/1/2000   1
123123123 987987988      1/1/2003   1
123123125 890890890      2/3/2002   1 
```

所以所有 seq# 都初始化为 1。通过上面的脚本后，我希望 table kids 看起来像这样

```
SSN       Kid_SSN        DOB        Seq#
123123123 987987987      1/1/2000   1
123123123 987987988      1/1/2003   2
123123125 890890890      2/3/2002   1 
```

该脚本在服务器 2008 R2 上完美运行以实现此目的，但在服务器 2012 上却没有。此外，我发现它只更新了第 88 行、第 176 行等（如果适用）。这就是为什么我认为游标一次获取 88 行。但在服务器 2008 上，它显然一次获取 1 行，正如我预期的那样。希望这能解释我遇到的问题。我想强制游标一次获取 1 行以使其在服务器 2012 上工作，尽管它效率不高。或者，如何在不使用光标的情况下进行排序？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:34:36.560

将整个脚本替换为对函数的排名是否可行？

就像是

```
select *, rank() over (partition by SSN, Kid_DOB order by Kid_SSN) as SeqNum
from kids 
```

我认为这应该可以工作，如果没有，您可以调整分区并按顺序使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:43:38.280

您的脚本要求光标`kids`按相同的 SSN 对记录进行分组。但是没有 ORDER BY 可以强制执行此操作。因此，记录以某种随机顺序返回，这会弄乱`@Mem`计数器。

这不是 SQL 2012 与 2008 的问题。我相信您只是幸运地使用了 SQL 2008，并且记录已经按照您想要的方式排序，或者 SQL 2008 在选择无序结果方面具有不同的行为，或者您定义了 pk 和索引不同。

# python - 无法从 AWS 机器上的 python 中的 selenium 调用 firefox

> ID：13039530
> 
> 赞同：31
> 
> 时间：2012-10-23T21:26:33.097
> 
> 标签：python, selenium, amazon-web-services, screen-scraping, web-scraping

我正在尝试使用 python 中的 selenium 来使用 javascript 抓取一些动态页面。但是，按照pypi页面（http://pypi.python.org/pypi/selenium）上的selenium指令后，我无法调用firefox。我在 AWS ubuntu 12.04 上安装了 firefox。我得到的错误信息是：

```
In [1]: from selenium import webdriver

In [2]: br = webdriver.Firefox()
---------------------------------------------------------------------------
WebDriverException                        Traceback (most recent call last)
/home/ubuntu/<ipython-input-2-d6a5d754ea44> in <module>()
----> 1 br = webdriver.Firefox()

/usr/local/lib/python2.7/dist-packages/selenium/webdriver/firefox/webdriver.pyc in __init__(self, firefox_profile, firefox_binary, timeout)
     49         RemoteWebDriver.__init__(self,
     50             command_executor=ExtensionConnection("127.0.0.1", self.profile,
---> 51             self.binary, timeout),
     52             desired_capabilities=DesiredCapabilities.FIREFOX)
     53

/usr/local/lib/python2.7/dist-packages/selenium/webdriver/firefox/extension_connection.pyc in __init__(self, host, firefox_profile, firefox_binary, timeout)
     45         self.profile.add_extension()
     46
---> 47         self.binary.launch_browser(self.profile)
     48         _URL = "http://%s:%d/hub" % (HOST, PORT)
     49         RemoteConnection.__init__(

/usr/local/lib/python2.7/dist-packages/selenium/webdriver/firefox/firefox_binary.pyc in launch_browser(self, profile)
     42
     43         self._start_from_profile_path(self.profile.path)
---> 44         self._wait_until_connectable()
     45
     46     def kill(self):

/usr/local/lib/python2.7/dist-packages/selenium/webdriver/firefox/firefox_binary.pyc in _wait_until_connectable(self)
     79                 raise WebDriverException("The browser appears to have exited "
     80                       "before we could connect. The output was: %s" %
---> 81                       self._get_firefox_output())
     82             if count == 30:
     83                 self.kill()

WebDriverException: Message: 'The browser appears to have exited before we could connect. The output was: Error: no display specified\n' 
```

我确实在网上搜索过，发现这个问题发生在其他人身上（https://groups.google.com/forum/?fromgroups=#!topic/selenium-users/21sJrOJULZY）。但我不明白解决方案，如果是的话。

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-24T18:27:06.433

问题是 Firefox 需要显示器。我在示例中使用[了 pyvirtualdisplay](http://pypi.python.org/pypi/PyVirtualDisplay)来模拟显示。解决方案是：

```
from pyvirtualdisplay import Display
from selenium import webdriver

display = Display(visible=0, size=(1024, 768))
display.start()

driver= webdriver.Firefox()
driver.get("http://www.somewebsite.com/")

<---some code--->

#driver.close() # Close the current window.
driver.quit() # Quit the driver and close every associated window.
display.stop() 
```

**请注意，pyvirtualdisplay 需要以下后端之一：Xvfb、Xephyr、Xvnc。**

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-11T03:44:49.663

我也遇到过同样的问题。我使用的是 Firefox 47 和 Selenium 2.53。所以我所做的就是将 Firefox 降级到 45。这行得通。

1）首先删除Firefox 47：

`sudo apt-get purge firefox`

2）检查可用版本：

`apt-cache show firefox | grep Version`

它将显示可用的 Firefox 版本，例如：

`Version: 47.0+build3-0ubuntu0.16.04.1`

`Version: 45.0.2+build1-0ubuntu1`

3）告诉下载哪个版本

`sudo apt-get install firefox=45.0.2+build1-0ubuntu1`

4）接下来，您不必再次升级到较新的版本。

`sudo apt-mark hold firefox`

5）如果你想稍后升级

`sudo apt-mark unhold firefox` `sudo apt-get upgrade`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-31T18:54:47.080

这已经在OP问题的评论中，但将其作为答案。您可以让 Selenium 在后台运行，而无需打开实际的浏览器窗口。

例如，如果您使用 Chrome，请设置以下选项：

```
from selenium.webdriver.chrome.options import Options
chrome_options = Options()
chrome_options.set_headless(headless=True) 
```

然后当你调用你的网络驱动程序时，你的设置就变成了一个参数：

```
browser = webdriver.Chrome(chrome_options=chrome_options) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-10T00:10:01.383

对于 Debian 10 和 Ubuntu 18.04，这是一个完整的运行示例：

1.  在 ~/Downloads 中下载 Chrome 驱动程序：
    `$ wget https://chromedriver.storage.googleapis.com/80.0.3987.16/chromedriver_linux64.zip`

2.  打开包装`unzip chromedriver_linux64.zip`

3.  将文件移动到可执行文件夹（已经带有路径）：
    `$ sudo mv chromedriver /usr/local/bin`

然后在带有 Jupyter 的笔记本中或在 aa 脚本中运行此代码：

```
from selenium.webdriver import Chrome
from selenium.webdriver.chrome.options import Options

chrome_options = Options()
chrome_options.set_headless(headless=True)

browser = Chrome(chrome_options=chrome_options)
browser.get('http://www.linkedin.com/')
print(browser.page_source) 
```

这将在页面中打印整个源 HTML。

# optimization - LLVM 结构返回优化

> ID：13039531
> 
> 赞同：9
> 
> 时间：2012-10-23T21:26:34.647
> 
> 标签：optimization, return-value, llvm

我想知道为什么 LLVM 无法优化以下 IR 代码（使用优化设置为“3”的 PassManagerBuilder，还使用 ​​LLVM 的“选择”工具）：

```
%GenericStruct = type { i32 }

define void @makeGenericStructOuter(%GenericStruct* noalias nocapture sret) {
entry:
  %1 = alloca %GenericStruct
  call void @makeGenericStructInner(%GenericStruct* %1)
  %2 = load %GenericStruct* %1
  store %GenericStruct %2, %GenericStruct* %0
  ret void
}

declare void @makeGenericStructInner(%GenericStruct* noalias nocapture sret) 
```

预期的代码是：

```
%GenericStruct = type { i32 }

define void @makeGenericStructOuter(%GenericStruct* noalias nocapture sret) {
entry:
  call void @makeGenericStructInner(%GenericStruct* %0)
  ret void
}

declare void @makeGenericStructInner(%GenericStruct* noalias nocapture sret) 
```

目前是否根本没有可用于处理这种情况的优化？还是我未能生成（此代码是从我正在开发的前端生成）允许优化的正确 IR？

在建议之前，我无法生成按值返回的代码，因为这些函数必须可以从不知道“GenericStruct”大小或内容的其他模块/库调用（并且它们会在本地将“TestClass”声明为“struct不透明'）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T00:24:17.010

如果您认为应该进行优化，请在[LLVM Bug Tracker](http://llvm.org/bugs/)中报告错误。当报告错过的优化机会时，LLVM 开发人员通常会非常高兴和感兴趣。

# complexity-theory - 负多项式的 Big-O 复杂度

> ID：13039535
> 
> 赞同：1
> 
> 时间：2012-10-23T21:26:49.040
> 
> 标签：complexity-theory, big-o

我知道以下等式的大复杂度是 O(n^3)

> 4n^3 + 6n + 6

因为 n^3 是主导项。

对于相同的函数，big-o 复杂度是否相同，但系数为负？

> -4n^3 + 6n + 6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:28:39.253

实际上，如果您在大 O 计算中有否定项，您可以忽略它们，因为它们会让您**赢得时间**。

在这种情况下，复杂度将是`O(n)`。

虽然不知道这样的算法可以对应什么样的算法，但要回答一般问题，你*可能*会有类似的东西`O(an^2 - bn)`会带来`O(n^2)`复杂性。

**编辑：**

发现了一个有趣的相关问题，关于[算法求解中的时间旅行](https://stackoverflow.com/q/3209303/1225541)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:20:29.667

形式上我们分析[**单调递增函数**](http://en.wikipedia.org/wiki/Monotonic_function)。渐近复杂性的正式定义暗示了这一点。

让我们看一下[维基百科上的定义](http://en.wikipedia.org/wiki/Big_O_notation#Formal_definition)之一：

> 一个写
> 
> f(x) = O(g(x)) 作为 x -> inf
> 
> 当且仅当存在一个正常数 M 使得对于所有足够大的 x 值，f(x) 至多 M 乘以 g(x) 的绝对值。也就是说，f(x) = O(g(x)) 当且仅当存在一个正实数 M 和一个实数 x0 使得
> 
> |f(x)| <= M|g(x)| 对于所有 x>x0

如您所见，此定义适用于**绝对值**。

在其他一些来源（例如有关数据结构和算法的书籍）中，您可能会发现没有绝对值的定义，但是在某处假设分析的函数是单调递增的（警告：有时假设隐藏在参考书目中或被分析宇宙的属性暗示）。

总结一下：渐近分析被设计用于单调递增函数。有时它由假设强制执行，有时由等式中的绝对值强制执行。

您可能会发现其他类似的说法，[另一个 SO 答案](https://stackoverflow.com/a/3209354/544721)，但结论相同。

# asp.net-mvc - 尝试使用可能错误的连接字符串将 ASP.NET MVC 连接到 SQL Server 2008 R2

> ID：13039540
> 
> 赞同：0
> 
> 时间：2012-10-23T21:27:14.423
> 
> 标签：asp.net-mvc, sql-server-2008, connection-string

在大型德国托管服务提供商的虚拟服务器上运行 SQL Server 2008 R2 和 ASP.NET MVC 2 Web 应用程序。

我在连接到 SQL Server 时遇到问题。

在 localhost 这个连接字符串工作正常：

```
 @"Data Source=LOCAL-HP;Initial Catalog=OnlineVertrag;Integrated Security=True"; 
```

我在服务器上使用了类似的连接字符串：

```
@"Data Source=MYSERVER\SQLEXPRESS;Initial Catalog=OnlineVertrag;Integrated Security=True"; 
```

但那里什么也没有发生。

这是我正在尝试连接的项目：http: [//www.hotcont.eu/OnlineVertrag/Home](http://www.hotcont.eu/OnlineVertrag/Home)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T21:49:32.423

根据您的评论，您在服务器上的 SQL 实例具有用户名/密码组合。您不能将集成安全连接用于需要 SQL 身份验证的 SQL Server 连接。

使用主机提供给您的登录信息，您应该将连接字符串更新为以下内容：

```
Server=MYSERVER\SQLEXPRESS;Database=OnlineVertrag;User Id=myUsername;
Password=myPassword; 
```

取自[ConnectionStrings.com](http://www.connectionstrings.com/sql-server-2008)

**编辑**

好的 - 我想我知道你现在在处理什么。您有一台托管在大型托管服务提供商上的虚拟机->这意味着您可以控制机器本身（又名远程桌面管理或其他东西？）

我提供的 SQL 连接字符串用于 SQL 服务器帐户 -> 表示您在 SQL 服务器本身中实际创建的那些。您提供的 SQL 连接字符串使用来自 Windows 的当前登录用户的用户帐户信息连接到 SQL。

所以这里是本地主机和虚拟服务器之间的断开连接。当您在 localhost 上运行时，我将假设您正在使用 Visual Studio 的内置 Web 服务器或类似的服务器。大多数情况下，在调试期间，Web 应用程序在机器的*登录用户*下运行- 也就是：你。您有权访问自己的 SQL 数据库，因此没有问题。但是...当您将 Web 应用程序部署到 IIS 实例时，Web 应用程序不再以登录用户身份运行，而是您的应用程序所属的应用程序池的身份。通常这类似于 NETWORKSERVICE。

您可以选择三个选项

1.  启用并使用 SQL 用户帐户来连接您的 Web 应用程序和 SQL 服务器。如果您选择走这条路线，则需要使用我在上面提供的连接字符串。

2.  登录到您的 SQL 服务器并将您的应用程序池的身份添加到 SQL 服务器的允许用户和您的数据库中。

3.  将您的应用程序池的身份更改为服务器上的实际用户帐户（坏主意）

大多数 Web 应用程序都使用第一个选项，因为它允许您执行一些操作，例如为您托管的每个应用程序创建一个不同的 SQL 用户，以及您可以为 SQL 用户显式定义可能需要访问的每个数据库的权限to（例如，不允许 SQL 用户 DROP 表）。

**编辑 2**

您尝试连接的方式听起来应该是使用共享内存协议，但它可能会尝试通过 TCP/IP 进行连接。我之前忘记了这一点，但是大多数 SQL 安装都没有设置为在第一次安装时侦听 TCP/IP 接口。要检查您的配置，请单击开始按钮（或 orb 或 Microsoft 现在所称的任何内容）-> 所有程序 -> Microsoft SQL Server 2008 -> 配置工具 -> SQL Server 配置管理器。这将打开一个新窗口，左侧有一些选项。单击`SQL Server Network Configuration`。确保 TCP/IP 和共享内存设置为启用。如果是 64 位安装，您可能应该对 the`SQL Server Network Configuration (32 bit)`和`SQL Server Network Configuration`

[http://msdn.microsoft.com/en-us/library/ms191294.aspx](http://msdn.microsoft.com/en-us/library/ms191294.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:13:19.733

试试这个

```
Data Source=MYSERVER\SQLEXPRESS;Initial Catalog=OnlineVertrag;Provider=SQLNCLI10;Integrated Security=SSPI;Auto Translate=False 
```

我希望这对你有用。

# xcode - 如何在 ios 5 和 ios 6 中自定义导航栏？

> ID：13039544
> 
> 赞同：1
> 
> 时间：2012-10-23T21:27:30.940
> 
> 标签：xcode, ios5, uinavigationcontroller, ios6, uinavigationbar

正如我在这里搜索时看到的那样，有很多关于同一主题的问题，但我真的不知道要使用哪些代码以及将它们放在哪里。

我只是想将导航栏更改为带有我自己的背景图像的自定义栏。

我确实看到了一些代码，但我真的很新，所以我不知道该怎么做！

[像这样](http://cdn-ak.f.st-hatena.com/images/fotolife/a/atmarkatmark/20071203/20071203220244.png)

-西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:33:04.303

使用外观属性

[[UINavigationBar 外观] setBackgroundImage:yourimage forBarMetrics:UIBarMetricsDefault];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T09:04:45.893

```
 //first put this code in AppDelegate.m
    in this method:

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
        {

      //code: navigationbar set image and fontcolor:

            [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"your_navigationimg_bg"] forBarMetrics:UIBarMetricsDefault];

            [[UINavigationBar appearance] setTitleVerticalPositionAdjustment:0.0 forBarMetrics:UIBarMetricsDefault];

            [[UINavigationBar appearance] setTitleTextAttributes: @{
                                    UITextAttributeTextShadowColor: [UIColor clearColor],
                                 UITextAttributeTextShadowOffset: [NSValue valueWithUIOffset:UIOffsetMake(0.0f, 1.0f)],
                                            UITextAttributeFont: [UIFont fontWithName:@"AppleGothic" size:20.0f]
             }];

            [self.window makeKeyAndVisible];
            return YES;
        }

//second: put this code in RootViewController.m
    in this method:

- (void)viewDidLoad
{

    self.navigationItem.title=@"your title";

    [super viewDidLoad];
} 
```

# c# - 为什么这个正则表达式不匹配？

> ID：13039546
> 
> 赞同：0
> 
> 时间：2012-10-23T21:27:33.703
> 
> 标签：c#, regex

我使用以下方法测试了一个正则表达式：

```
 Match match = Regex.Match(txtToMatch.Text,txtRegex.Text,RegexOptions.IgnoreCase);

 if (match.Success) {               
      MessageBox.Show("success");
 } 
```

使用的正则表达式是`/d`. 但是，当我对其进行测试时，`9`它返回错误。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:29:03.057

我认为你需要的是`\d`，而不是`/d`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:30:13.547

你需要使用`\d`，而不是`/d`。为避免 C# 将您的字符串视为转义序列，您可以使用逐字字符串：`@"\d"`.

# php - MYSQL 语法错误 - SELECT 语句

> ID：13039552
> 
> 赞同：2
> 
> 时间：2012-10-23T21:28:09.680
> 
> 标签：php, mysql

我一直在尝试调试的屏幕上显示此错误。

“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'to = 'testname'' 附近使用正确的语法”

我为此使用的函数如下：

```
function recentMessages() {
    $tbl_name="messages";
    $username = $_SESSION['username'];
    $result = mysql_query("SELECT * FROM $tbl_name WHERE to = '$username' ") or die(mysql_error());
    while ($row = mysql_fetch_row($result))
      {
        return $row['date']." ".$row['time']." ".$row['from']." ".$row['subject']. "<br />";    
      }
} 
```

基本上我想要做的是从数据库消息中获取所有数据行，其中谁是会话的用户名，并且它的回显。关于我做错了什么的任何想法？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T21:29:03.870

`to`是保留字。用刻度线把它包起来。

```
... WHERE `to` = '$username' 
```

请参阅 MySQL[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

如果可能，您应该避免使用保留字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:32:05.227

to 是保留字。试试这个：

```
$result = mysql_query("SELECT * FROM $tbl_name WHERE `to` = '$username' ") 
                or die(mysql_error()); 
```

一般来说，尽量避免使用to、between、from ...等小词，以防止出现此类问题。更好的解决方案是有一个字段名称，例如：“receiver”或“message_to”或类似的名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:32:15.890

TO 是 MySQL 中的保留字。使用反引号将其分开。

```
SELECT * FROM $tbl_name WHERE `to` = '$username' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T21:30:46.267

to 是我相信的保留字。尝试更改为 [to] 编辑：不完全确定。我把它放在 SQL Server 中，发现 TO 是一个保留字。

# css - 是否可以根据子元素的最小宽度来拥有父元素的大小？

> ID：13039556
> 
> 赞同：1
> 
> 时间：2012-10-23T21:28:20.830
> 
> 标签：css

我有一个带有一些子元素的父元素。子元素有一个`min-width`集合，但父元素没有。当浏览器窗口小于 时`min-width`，子元素的宽度是正确的，但是父元素不断变小，导致子元素溢出。是否可以强制父母至少和孩子一样宽？（不使用javascript）

[http://jsfiddle.net/Psczr/](http://jsfiddle.net/Psczr/)

（将分隔线拖到最右边，然后在结果窗口中向右滚动）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:38:27.257

在父级和子级继承上设置最小宽度...但`td`脚本中的父级不是...`div`而是`tr`...`tr``table``table``div`

[http://jsfiddle.net/Psczr/12/](http://jsfiddle.net/Psczr/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:35:32.770

在这种情况下，您的问题是您使用父级的相对宽度和子级的固定最小宽度。您尝试处理的解决方案在直接 CSS 中是不可能的。您应该改为对所有元素使用相对宽度，或者为父元素建立一个固定的最小宽度。

# c++ - 在基类中创建从子类运行方法的线程

> ID：13039559
> 
> 赞同：0
> 
> 时间：2012-10-23T21:28:26.687
> 
> 标签：c++, multithreading, winapi, object, inheritance

我不知道这是否可能，但我有一个想法，即创建一个抽象类来使用 WinAPI 创建线程。该类将由定义要在线程中执行的函数的类继承。

我有两节课：

```
class XYZ{
//...

class ABC: public XYZ{
//... 
```

我有一个构造

```
ABC::ABC()
{
    addThread(this,1);
} 
```

addThread 在 XYZ 类中定义：

```
void addThread(void* self, int a)
{
    DWORD ThreadID;
    THREAD_DATA *threadData;
    threadData->self = self;
    threadData->thread_id = a;
    CreateThread(NULL, 0, createThread, threadData, 0, &ThreadID);
} 
```

如您所见，我正在创建一个包含两个字段的结构：超类的对象和线程数（因此该方法可以知道使用哪些数据）。

这是结构的样子：

```
typedef struct _THREAD_DATA {
void*       self;
int     thread_id;
} THREAD_DATA; 
```

XYZ 类的静态方法中的 createThread：

```
static DWORD WINAPI createThread(void* _threadData)
{
    THREAD_DATA* threadData = (THREAD_DATA*) _threadData;
    return threadData->self->execute(threadData->thread_id);
} 
```

And here is the place where everything goes wrong. My VSC++ 2010 is underlining the first word "threadDataself" in the second line of the static method body. **After compilation I get an error:**

> left of '->execute' must point to class/struct/union/generic type

I have no idea how to fix it. I wrote this code using those links: [http://goo.gl/7VYC3](http://goo.gl/7VYC3) & [http://goo.gl/ETfe7](http://goo.gl/ETfe7)

The execute method is decalared in the XYZ class as:

```
virtual DWORD execute(int i); 
```

and then defined in the ABC class as

```
DWORD ABC::execute(int i){
//... 
```

Can anyone please help me? I would appreciate any tips how to make this works.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:34:32.240

"self" is defined as a void pointer, and you are trying to call the "execute" method on it, which does not exist. you need to change the type of self to the base class that contains the method "execute."

Like this:

```
typedef struct _THREAD_DATA {
    XYZ*       self;
    int     thread_id;
} THREAD_DATA; 
```

When attempting to call an overridden method polymorphically as you are here, you must make sure the type of the object you are calling the method on is the base class type. You cannot use a void pointer.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:58:12.473

One obvious error for you to fix:

```
THREAD_DATA *threadData;
threadData->self = self;
threadData->thread_id = a; 
```

here threadData is a pointer with no value assigned, and then you use is as a valid pointer. You need to change it to

```
THREAD_DATA *threadData = new THREAD_DATA(); 
```

and somehow manage its life time, ie. delete it inside thred function on its end.

# dojo - 将字段重置为其默认值

> ID：13039562
> 
> 赞同：2
> 
> 时间：2012-10-23T21:28:39.500
> 
> 标签：dojo

我希望能够在单击按钮时将所有文本字段重置为其默认值。

到目前为止，我所做的是查询所有文本字段并将我编写的名为“textChanged”的函数绑定到更改事件，如下所示：

```
require(["dojo/on","dojo/query"], function(on,query){
    query(".Text").on("change",textChanged);
}); 
```

函数定义如下：

```
function textChanged(newVal)
{
...
} 
```

我发现我可以通过赋值来重置函数体中的值：

```
 newVal.target.value = newVal.target.defaultValue; 
```

如果此函数由更改事件触发。

我想要做的是如果单击按钮，那么我想执行 newVal.target.value = newVal.target.defaultValue 并且无法正确获取上下文。

我尝试在调用时保留“this”变量以及保留“newVal”参数。如果我尝试在上下文之外设置值，则更新不会保留。我尝试将'this'值设置为其他值（nt = this）并将newValue设置为另一个变量（nv = newValue），然后我想执行：nv.target.value = nv.target.defaultValue; 并且虽然清除了表单上的字段，但是当表单提交时，它的实际值仍然是手动修改的值。我注意到当我在按钮单击上下文中直接调用它时，从更改事件中调用 textChanged 时，'this' 与它不同。

我尝试使用 'hitch' 调用它，将 this 的上下文设置为其从 change 事件中获得的值，但这似乎没有设置正确的上下文：

```
require(["dojo/on", "dojo/_base/lang"], function(on, lang) {
        lang.hitch(nt, textChanged(nv));
}); 
```

准确地说 - 在 textChanged 中，我使用 console.log(this); 显示 'this' 的值；当文本从 UI 更改时调用 textChanged 时，“this”为：

然而，当通过单击我的按钮调用它时，该按钮通过

```
lang.hitch(nt, textChanged(nv)); 
```

'this' is: Window fauxRedirect.lsw?applicationInstanceId=guid%3A1eae6af09bf6f543%3A-6644aeb4%3A13a8a4c429e%3A-7ffe&zWorkflowState=2&zTaskId=p1&applicationId=2&zComponentName=CoachNG&zComponentId=3028.b1094dc3-da2b-461a-8d56-f6444891c174&zDbg=2#%20 %20

我已经确认'nt'确实是一样的'

所以，我正在尝试执行 textChanged 函数，以便将“this”设置为该值。

或者，如果有更好的方法可以从另一个控件将字段重置为其默认值 - 那也可以。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:33:12.987

我不确定您要做什么的完整背景，所以不知道这是否回答了您的问题？

您可以将表单中的所有小部件重置为其默认值，只要它们包装在*dijit/form/Form*小部件中即可。如果所有小部件都正确包装，则只需在表单上调用**reset()即可。**

**注意：** 这不适用于本机元素（即标准 <input> 或 <textarea> 字段，它们必须是 dijit/form/TextBox ...等）。

例如：

```
<form data-dojo-type="dijit/form/Form" data-dojo-id="theForm">
    <label for="field1">Field 1:</label>
    <input
        type="text" id="field1" name="field1" 
        data-dojo-type="dijit/form/TextBox" value="default1"
    /><br />

    <label for="field2">Field 1:</label>
    <input
        type="text" id="field2" name="field2"
        data-dojo-type="dijit/form/TextBox" value="default2"
    />
    <br /><br />

    <button
        type="button" 
        data-dojo-type="dijit/form/Button" 
        onclick="theForm.reset();"
    >Reset</button>
</form> 
```

单击此处的重置按钮应将字段重置为：field1="default1" 和 feield2="default2"。

该表单正在调用每个小部件的**reset()**方法。如果您创建自己的小部件，您需要确保它们的**reset()**方法正常工作（以及用于设置其值的**_getValueAttr()方法）。**

# list - 带有 TIKZ 节点的 Emacs 组织模式列表错误地导出到 Xelatex Latex

> ID：13039564
> 
> 赞同：1
> 
> 时间：2012-10-23T21:28:53.343
> 
> 标签：list, export, org-mode, tikz, xelatex

如何在不破坏环境的 org-mode latex 导出的情况下将 Tikz 节点包含在列表环境中？

我有一些代码，它使用 Tikz 沿着几个列表项创建大括号。理想情况下，该列表应如下所示（这是我手动输入的 xelatex 代码......实际上我更喜欢“枚举”，但一次只做一件事）：

```
\begin{itemize}[noitemsep=nosep]
   \item who tells (to whom)?
     \tikz[remember picture] \node[coordinate,yshift=0.5em] (n1) {}; %max 2 sentences
   \item what happens?
   \item to whom?
   \item with what result?
     \tikz[remember picture] \node[coordinate] (n2) {};
     \tikz[remember picture] \node[coordinate, yshift=0.5em] (n3) {}; %max 4 sentences
   \item beginning
   \item how action rises
   \item climax
   \item denouncement
     \tikz[remember picture] \node[coordinate] (n4) {};
\end{itemize} 
```

**问题：** Tikz 代码列表中的中断导致列表环境中断，因此当我只想要一个列表时，我最终得到了多个列表。

**请参阅下面的组织模式代码：**

```
* My list starts here
 -  who tells (to whom)?
      #+BEGIN_LaTeX
      \tikz[remember picture]\node[coordinate,yshift=0.5em] (n1) {}; 
      #+END_LaTeX
 -  what happens?
 -  to whom?
 -  with what result?
     #+BEGIN_LaTeX
     \tikz[remember picture] \node[coordinate] (n2) {};\tikz[remember picture] \node[coordinate, yshift=0.5em] (n3) {}; 
     #+END_LaTeX
 -  beginning
 -  how action rises
 -  climax
 -  denouncement
     #+BEGIN_LaTeX
     \tikz[remember picture] \node[coordinate] (n4) {};
     #+END_LaTeX 
```

**请参阅此处的乳胶输出：**

```
\begin{itemize}
\item who tells (to whom)?
\end{itemize} <--THIS IS THE PROBLEM, HOW CAN I STOP THE ITEMIZE ENVIRONMENT FROM ENDING HERE
\tikz[remember picture]\node[coordinate,yshift=0.5em] (n1) {}; 
\begin{itemize}
\item what happens?
\item to whom?
\item with what result?
\end{itemize}<--THIS IS THE PROBLEM AGAIN
\tikz[remember picture] \node[coordinate] (n2) {};\tikz[remember
picture] \node[coordinate, yshift=0.5em] (n3) {}; 
\begin{itemize}
\item beginning
\item how action rises
\item climax
\item denouncement
\end{itemize}<--THIS IS THE PROBLEM AGAIN, IT SHOULD BE THE ONLY \end{itemize} AND AT THE BOTTOM
\tikz[remember picture] \node[coordinate] (n4) {}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:52:49.303

这个问题的答案是缩进列表中的 tikz 代码。为了便于阅读，我在缩进本网站上的代码后才意识到这一点，当我意识到那是解决方案时！我正在测试 rvf0068 建议的新版本的 org-mode，当我想到缩进是解决方案时。

```
-  who tells (to whom)?
   #+BEGIN_LaTeX
   \tikz[remember picture]\node[coordinate,yshift=0.5em] (n1) {}; 
   #+END_LaTeX
 -  what happens?
 -  to whom?
 -  with what result? 
```

**不是**

```
-  who tells (to whom)?
#+BEGIN_LaTeX
\tikz[remember picture]\node[coordinate,yshift=0.5em] (n1) {}; 
#+END_LaTeX
 -  what happens?
 -  to whom?
 -  with what result? 
```

# php - 清理用户上传的（图像）文件中的恶意/有害内容

> ID：13039565
> 
> 赞同：2
> 
> 时间：2012-10-23T21:28:56.280
> 
> 标签：php, image, security, file-upload, virus

> **可能重复：**
> [图像清理库](https://stackoverflow.com/questions/10196351/image-sanitization-library)

允许用户文件上传的社交网络应用程序如何防止有害内容隐藏/存储在用户文件中。我使用 php 作为网站的服务器端技术。用户可以上传图片。有没有办法可以通过 php 验证这些文件的内容？所有者和其他用户也可以下载图像。

# javascript - 没有jQuery的onmouseover过渡效果

> ID：13039570
> 
> 赞同：4
> 
> 时间：2012-10-23T21:29:05.610
> 
> 标签：javascript, html, css

我在我的开发站点[http://www.new.ianroyal.co](http://www.new.ianroyal.co)上使用 onmouseover 来实现主站点徽标的悬停效果。

onmouseover 会立即更改站点徽标图像，我想知道是否可以在不使用 jQuery 的情况下应用过渡效果（淡入或通常减慢过渡速度）。

这是我的代码：

```
<a href="<?php echo esc_url( home_url( '/' ) ); ?>" ONMOUSEOVER='ian.src="http://new.ianroyal.co/wp-content/themes/twentytwelve/images/IN-Logo.png" ' ONMOUSEOUT='ian.src="http://new.ianroyal.co/wp-content/themes/twentytwelve/images/IN-Logo1.png"'>
  <img src="http://new.ianroyal.co/wp-content/themes/twentytwelve/images/IN-Logo1.png" NAME="ian" class="header-image" alt="Ian Nelson" />
</a>
```

我已经搜索和搜索，但似乎唯一的解决方案是使用 jQuery，我还没有很好地掌握它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:35:02.437

您可以使用纯 CSS3。

```
.fade {
opacity: 1;
transition: opacity .25s ease-in-out;
-moz-transition: opacity .25s ease-in-out;
-webkit-transition: opacity .25s ease-in-out;
}

.fade:hover {
  opacity: 0.5;
  } 
```

示例取自[这里](http://bavotasan.com/2011/a-simple-fade-with-css3/)。还有很多其他的可能性，但这应该是一个好的开始。

但是，它只适用于支持 CSS3 过渡的浏览器。尤其是 Internet Explorer[迟到了](http://www.w3schools.com/cssref/css3_pr_transition.asp)，仍然有[很多人在使用它](http://www.w3schools.com/browsers/browsers_explorer.asp)（以及不支持 CSS3 的其他浏览器的旧版本）。

如果你想要一个真正的跨浏览器解决方案，最大限度地支持旧版本，那么 JQuery 确实是要走的路。不管看起来多么困难，花在学习淡化上的时间真的会得到回报。几乎可以肯定，学习如何做一点 JQuery 比做一个等效的纯 JavaScript 解决方案更容易，后者将提供与 JQuery 免费提供的相同的跨浏览器兼容性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:35:41.460

使用 css3 过渡。

```
div {
    height: 100px;
    width: 100px;
    background: url(image1.png) no-repeat;
    -webkit-transition: all .3s ease-in-out;
    -moz-transition: all .3s ease-in-out;
}

div:hover {
    background-image: url(image2.png)
} 
```

旧浏览器根本不会为过渡设置动画。

**演示： http:** [//jsfiddle.net/elclanrs/jg7G3/](http://jsfiddle.net/elclanrs/jg7G3/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:35:00.460

理想情况下，只使用 CSS 过渡和`:hover`选择器，完全不使用 JS，[comme ça](http://tympanus.net/codrops/2012/08/08/circle-hover-effects-with-css-transitions/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T21:31:43.910

学习 jQuery。我保证它会让你在长期（和短期）中快乐。话虽这么说，一旦你了解了 jQuery，就回到 vanilla js 中，这样你才能真正理解它是如何工作的。

例如，您在 jquery 中的问题很简单：

```
$(function() {
    $('a').fadeOut();
    $('a').attr('src', '{new image path}');
    $('a').fadeIn();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T21:53:36.090

工作示例，只需在同一目录中提供 image1.jpg 和 image2.jpg：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.js" type="text/javascript"></script>
<script>
$(function() {

$('img').mouseenter(function(){
  $(this).fadeOut('fast', function(){
    $(this).attr('src', $(this).data('on'));
    $(this).fadeIn();
  });
});

$('img').mouseleave(function(){
  $(this).fadeOut('fast', function(){
    $(this).attr('src', $(this).data('off'));
    $(this).fadeIn();
  });
});

});

</script>

<img width="100" height="100" src="image1.jpg" data-on="image2.jpg" data-off="image1.jpg"> 
```

# asp.net - 如何有条件地在 ASP.NET MVC 中应用过滤器？

> ID：13039575
> 
> 赞同：0
> 
> 时间：2012-10-23T21:29:28.350
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-4

我对 ASP.NET MVC 有点陌生，我想知道是否有一个框架结构可以做我下面描述的事情？：

我想根据一些任意标准将过滤器应用于一组控制器/操作。这里的关键点是我只想将过滤器应用于基于此标准的某些控制器或操作。我不想在控制器或控制器动作上使用属性，因为开发人员可能会忘记将这些属性添加到控制器动作中。

这个链接基本上描述了我想要的：http: [//haacked.com/archive/2011/04/25/conditional-filters.aspx](http://haacked.com/archive/2011/04/25/conditional-filters.aspx)

不过，我想知道，是否有一个 ASP.NET MVC 框架结构可以用来执行此操作而无需自己动手？顺便说一句，我正在使用 ASP.NET MVC 4。

非常感谢，如果不清楚，请见谅！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:44:43.567

您需要创建自己的条件过滤器，没有任何其他方法可以有条件地在控制器操作上应用属性。

您提供的黑客方法就是这样做的方法。

# ios - 在 iOS 中使用 AVPlayer 可以知道当前的 .ts 文件还是来自编码器的当前时间戳？

> ID：13039577
> 
> 赞同：4
> 
> 时间：2012-10-23T21:29:29.667
> 
> 标签：ios, avplayer, http-live-streaming, timecodes

由于我们无法从 AVPlayer 中获取隐藏式字幕数据或字幕数据，因此我们正在研究其他触发方法，例如时间码或至少了解当前活动的 .ts 文件。我在文档中找不到任何内容，并且播放器中的 CMTime 没有给我嵌入在 m3u8 文件中的时间码。

```
NSLog(@"%f", CMTimeGetSeconds([mPlayer currentTime] ) ); 
```

不是我要找的。

```
#EXTM3U
#EXT-X-TARGETDURATION:10
#EXT-X-MEDIA-SEQUENCE:562
#EXT-X-PROGRAM-DATE-TIME:2020-10-23T14:18:59+08:00
#EXTINF:10,
http://aedsgios1-i.akamaihd.net/hls/live/204775/test1-p/mobile600/Seg_102320_124459_1/mobile600_102320_124459_562.ts
#EXT-X-PROGRAM-DATE-TIME:2020-10-23T14:19:09+08:00
#EXTINF:10, 
```

EXT-X-PROGRAM-DATE-TIME 是我想知道的，或者至少是活动的 .ts 文件的名称。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-07T16:33:26.133

你只需要：

1.  使用您实现的类子类 NSURLProtocol（请参阅 Apple 上的 NSURLProtocol 类参考以了解它是如何工作的）。您有一个 NSURLProtocol 附带的方法，您可以在其中看到截获的请求

(BOOL)canInitWithRequest:(NSURLRequest *) 请求。

只需在其中记录您的请求并返回 NO，因为您只想记录它而不是通过启动 startLoading 方法（来自 NSURLProtocol API 的另一种方法）来处理它。

2.  完成此操作后，您必须通过添加以下指令将您的 NSURLProtocol 注册到 didFinishLaunching 方法到您的 AppDelegate.m / .swift （无论如何......）： NSURLProtocol.registerClass(MySubclassProtocol)

3.  启动您的播放器，您应该会看到所有请求通常都已登录到您的调试控制台。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:05:08.547

NSLog(@"%@", [[mPlayer currentItem] currentDate ]);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T10:04:14.117

关于这个主题的轻微更新。获取有关 AVPlayer 正在加载的当前 .ts 的更多信息的一个小技巧是在 AppDelegate 的 didFinishLaunching 方法中注册，这是一个 NSURLProtocol 对象

-> NSURLProtocol.registerClass(MyURLProtocol)

这使您有机会查看所有传输到您的应用程序的请求，从而查看播放器何时加载片段：

2015-06-04 10:57:13.172 MyApp[924:310b] 收到 URL 请求：[http://livestream.net/channel/channel.isml/events(1433260048)/channel-audio_1=128000-video=1600000。 m3u8](http://livestream.net/channel/channel.isml/events(1433260048)/channel-audio_1=128000-video=1600000.m3u8) 2015-06-04 10:57:13.182 MyApp[924:6a07] 获得 URL 请求：[http ://livestream.net/channel/channel.isml/events(1433260048)/channel-audio_1=128000-video=1600000 -143341543.ts](http://livestream.net/channel/channel.isml/events(1433260048)/channel-audio_1=128000-video=1600000-143341543.ts)

# visual-studio-2010 - 远程调试时可以使用 Visual Studio 2010 中的监视窗口吗？

> ID：13039578
> 
> 赞同：2
> 
> 时间：2012-10-23T21:29:35.563
> 
> 标签：visual-studio-2010, remote-debugging

我正在尝试远程调试应用程序。我可以毫无问题地连接到它，但是当我逐步执行代码时，我无法像在本地调试时那样看到变量的值。

当我尝试在监视窗口中评估变量时，我收到消息“表达式评估器中的内部错误”。我需要做任何不同的事情来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:40:38.233

当您远程调试为 .NET 3.5 或以前版本编译的应用程序时，这似乎是一个影响 Visual Studio 2012 的错误。

有关更多详细信息，请参阅[此链接](http://connect.microsoft.com/VisualStudio/feedback/details/764708/debugging-on-remote-server-with-vs2012-fails-and-2010-works-same-configurations-error-internal-error-in-the-expression-evaluator "使用 vs2012 在远程服务器上调试失败，使用 vs2010 可以正常工作，配置相同。 错误：")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T08:05:39.703

**如上一篇文章中链接Luca**在 Microsoft 博客中所述，您需要执行以下步骤来解决此问题：

1.  安装“Visual Studio 2012 更新 2”
2.  从安装更新的机器上的 GAC "Microsoft.VisualStudio.vil.dll" vesion=11.0.0.0 获取
3.  从上一个复制程序集。在要调试的远程计算机上执行 GAC
4.  或者，您可以通过“更新 2”更新远程机器上的远程调试工具

之后，观察窗口应该可以正常工作！

# c# - 如何确定我的 Windows 服务已完成对来自远程应用程序的请求的处理？

> ID：13039586
> 
> 赞同：0
> 
> 时间：2012-10-23T21:30:13.770
> 
> 标签：c#, windows-services

我有一个侦听消息队列并处理来自该消息队列的请求的 Windows 服务。我有一个将消息放入消息队列的初始应用程序。该服务本身实际上会即时创建一些文件，当这些文件被创建时，我需要初始应用程序来获取这些文件并将它们基本上绘制在屏幕上。（文件是 html 格式）目前我的应用程序和服务在我的本地机器上运行，所以文件只是位于我机器的 c: 驱动器上。

我的问题是我需要某种方式来向我的初始应用程序发出信号，表明该服务已成功或不成功地提取并处理了我的 msg。我一直在研究如何做到这一点，却空手而归。我也一直在集思广益，想知道我可以做些什么来完成这项工作。一种不可行的解决方案是在向队列发送消息时将记录插入数据库表中，并且在服务内完成处理后更新队列记录，同时让应用程序查询表以检查处理完成状态。我根本不喜欢这个想法，因为我觉得它太密集了，我相信必须有更好的方法来做到这一点。我将继续研究如何做到这一点，但我绝对希望有人对此有更好的解决方案，而不是一遍又一遍地运行我的 sql 查询。请注意，过去我曾尝试向事件查看器查询进程，并且我知道如何执行此操作，但这对于我想要完成的时间来说太长了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:26:08.930

我最终选择了在调用 Windows 服务之前将记录插入数据库的路线。然后，当 Windows 服务完成其进程时，它会更新此数据库记录。我的页面一直在通过 javascript 调用 web 服务，该 web 服务检查数据库以查看记录上的标志是否已设置为完成处理。这使我可以确定 Windows 服务何时完成处理队列中的消息。

# javascript - 使用 Three.js 中的箭头键围绕对象旋转相机

> ID：13039589
> 
> 赞同：1
> 
> 时间：2012-10-23T21:30:20.977
> 
> 标签：javascript, three.js, perspectivecamera

假设我有一个大立方体，每个面上都有一些对象（有点像谷歌地图立方体[http://www.playmapscube.com/](http://www.playmapscube.com/)）。我希望能够使用箭头键**围绕**立方体旋转相机，而不是单独旋转所有对象。

所以左箭头会将相机向左移动，因此立方体将向右转，依此类推。

我看了一遍，没有发现任何关于用键盘做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T22:10:13.993

根据您的评论，我假设这只是一个数学问题。

使用箭头键更改变量的值`theta`，然后在渲染循环中执行以下操作：

```
camera.position.x = 15 * Math.cos( theta );
camera.position.y = 10;
camera.position.z = 15 * Math.sin( theta );

camera.lookAt( scene.position ); 
```

# cocos2d-iphone - 如何ccDrawPoly和填充？

> ID：13039591
> 
> 赞同：0
> 
> 时间：2012-10-23T21:30:43.967
> 
> 标签：cocos2d-iphone, opengl-es-2.0

```
- (void)draw {
lines[0] = ccp(self.l.x + (segmentIndex[0] * segmentSpacing), self.l.y);
lines[1] = ccp(self.l.x + (segmentIndex[1] * segmentSpacing), self.l.y + segmentHeight * 1);
lines[2] = ccp(self.l.x + (segmentIndex[2] * segmentSpacing), self.l.y + segmentHeight * 2);
lines[3] = ccp(self.l.x + (segmentIndex[3] * segmentSpacing), self.l.y + segmentHeight * 3);
lines[4] = ccp(lines[3].x + segmentWidth, lines[3].y);
lines[5] = ccp(lines[2].x + segmentWidth, lines[2].y);
lines[6] = ccp(lines[1].x + segmentWidth, lines[1].y);
lines[7] = ccp(lines[0].x + segmentWidth, lines[0].y);

ccDrawPoly(lines, 8, YES);
//ccDrawSolidPoly(lines, 8, [self color]); 
```

}

ccDrawPoly 线绘制了我打算绘制的之字形样式。有 4 个 Y 段，每个段都有一个由 segmentIndex 和 segmentSpacing 确定的点，然后是 x 上的 +segmentWidth，总共 8 个点。我先从最左边的点往下走，然后再往上走。

当我调用 ccDrawSolidPoly 时，它以不同的方式填充形状。它使用所有最外面的点填充多边形，而不是按照我在点中设置的顺序绘制线条。

我如何做 ccDrawPoly 和填充？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-07T20:02:36.233

显然，编写我自己的函数。

论坛结果显示人们正在编辑 cocos2d ccDrawSolidPoly 函数。

# ios - 如何将 NSData 编码为字符串

> ID：13039593
> 
> 赞同：0
> 
> 时间：2012-10-23T21:30:47.590
> 
> 标签：ios, encoding, nsdata

我有一个 NSData 值的字典，其中我将不同的值传递到它们的变量中，这些变量稍后用于在 tableviewcells 等中显示。

但是，我有一些无法正确显示的国际字符，我想对传递给 NSString 的数据进行编码，但由于这种情况我不知道该怎么做。

这就是我目前正在做的事情。

```
manString = [dict valueForKey:@"MAN"]; 
```

dict 包含我正在使用的所有数据。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:23:49.203

你可以这样做：

```
NSString* string = [[NSString alloc] initWithData:[dict valueForKey:@"MAN"] 
                                         encoding:NSStringEncoding]; 
```

枚举`encoding`中的值应该在哪里，你可以在 中找到它，只需选择你需要的编码，通常是，但我猜你的情况不是。`NSStringEncoding``NSString.h``NSUTF8StringEncoding`

# bash - 从 Mule ESB 运行 shell 脚本

> ID：13039604
> 
> 赞同：0
> 
> 时间：2012-10-23T21:31:21.740
> 
> 标签：bash, ocr, mule, tesseract

我设置了一个流程来识别文件何时被放入目录。接下来我需要运行一个处理文件的 Bash 脚本（相当密集的处理）。该脚本抓取一个 PDF，创建一个临时目录，将 PDF 分解为单独的 PNG 文件，对每个图像运行 OCR 处理器，将结果转换为单页 PDF，然后将所有 PDF 合并为一个多页 PDF来自 OCR 的文本层。

问题是，在触发 10 个并发转换后，Bash 脚本会阻塞。现在我让 Mule ESB 监听新文件，然后触发每个文件的脚本，传递适当的参数。不幸的是，Mule 有两个任务，监听 -> 触发。我们将在该目录中有超过 200 个文件需要排队等待处理，最好一次处理 5 个。如何让 Mule 限制触发的并发进程数？

以下是我最初的流程草案：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd ">
    <configuration>
    <default-threading-profile doThreading="false"/>
  </configuration>

    <queued-asynchronous-processing-strategy name="limitThreads" maxThreads="2"/>

    <flow name="Poll_DirectoryFlow1" doc:name="Poll_DirectoryFlow1" processingStrategy="limitThreads">
        <file:inbound-endpoint path="/home/administrator/Downloads/Input" responseTimeout="10000" doc:name="File" pollingFrequency="5000" fileAge="5000">

        </file:inbound-endpoint>
        <scripting:component doc:name="Script">
            <scripting:script engine="Groovy">
                <property key="originalFilename" value="#[header:originalFilename]"/>
                <scripting:text><![CDATA[def filename = message.getInboundProperty('originalFilename')
                                                        println "$filename"
                                                        def directory = message.getInboundProperty('directory')
                                                        println "$directory"
                                                        "mkdir processed".execute()
                                                        def command = ["/home/administrator/ocr.sh", "$directory/$filename", "/home/administrator/Downloads/Output/$filename"]
                                                        println "$command"
                                                        def proc = "pwd".execute()
                                                        command.execute()
                                                        proc.waitFor()
                                                        println "${proc.in.text}"]]></scripting:text>
            </scripting:script>
        </scripting:component>
        <echo-component doc:name="Echo"/>        
    </flow>
</mule> 
```

这是实际的 Bash 脚本（提供了一些关于我们正在使用的工具的提示）：

```
#!/bin/bash

#Setting variables
PARAM=$#
TMPDIR=./split
INFILENAME=${1##*/}
OUTFILENAME=${2##*/}
echo "1 is $1"
echo "2 is $2"
echo "infilename is $INFILENAME"
echo "outfilename is $OUTFILENAME"

#Logging I/O filenames
echo "infile: $1" >> error.log
echo "outfile: $2" >> error.log

#If the temporary directory doesn't exist, make it
if [ ! -d "$TMPDIR" ];
then
    mkdir $TMPDIR
fi

#Check to see that the correct number of params have been passed.
if [[ $PARAM -lt 2 ]];
then
    echo "Usage: $0 source.pdf output.pdf"
    echo "output.pdf is the desired output file"
    echo "source.pdf is a file to be OCR'd"
    exit 1
fi

#Make sure the input file is a PDF
if [ "${1##*.}" == "pdf" ];
then
    multilayer=false

    #Check to see if the input file is a multi-layered pdf with searchable text
        if grep -Fl "Font" "$1"; then multilayer=true; fi

    #If it's not multi-layered, then perform the OCR
    if [ "$multilayer" == "false" ];
    then
        mkdir $TMPDIR/"$INFILENAME/"
        echo "making temporary directory $TMPDIR/$INFILENAME"
        #Split the PDF into pdf's of one page per df in a temporary directory
        pdftk "$1" burst output "$TMPDIR/$INFILENAME/pg_%04d.pdf"
        echo "burse output to $TMPDIR/$INFILENAME/pg_%04d.pdf"
        mv "$1" processed/
        for files in "$TMPDIR/$INFILENAME/"*
            do
            echo "$files"
                    filename=$(basename "$files")
                    filename="${filename%.*}"

            #Convert the pdf page into an image
                    gs -r300 -o "$TMPDIR/$INFILENAME/$filename.jpeg" -sDEVICE=jpeg "$TMPDIR/$INFILENAME/$filename.pdf"

            #Perform the OCR against the image
                    tesseract "$TMPDIR/$INFILENAME/$filename.jpeg" "$TMPDIR/$INFILENAME/$filename" hocr

            #Combine the OCR'd image and OCR'd text into a multi-layer PDF file of that page
                    hocr2pdf -i "$TMPDIR/$INFILENAME/$filename.jpeg" -o "$TMPDIR/$INFILENAME/$filename.pdf" < "$TMPDIR/$INFILENAME/$filename.html"
                    compressed="$filename-compressed.pdf"

            #Compress the multi-layered PDF of the page
                    gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile="$TMPDIR/$INFILENAME/$compressed $TMPDIR/$INFILENAME/$filename.pdf"
                    mv "$TMPDIR/$INFILENAME/$compressed" "$TMPDIR/$INFILENAME/$filename"
            done

        #Concatenate all of the multiline PDF pages into a single PDF file
        pdftk "$TMPDIR/$INFILENAME/"*.pdf cat output "$OUTFILENAME"
        compressed="$OUTFILENAME-compressed.pdf"

        #Compress the multi-layered PDF
        gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile="$compressed" "$OUTFILENAME"
        mv "$compressed" "$2"
        rm -rf "$TMPDIR/$INFILENAME"
    else
        echo "The input file is multi-layered"
        mv "$1" "$2"
    fi
else
    echo "Please enter a valid input pdf file"
    exit 2
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:23:59.110

解决您的问题的一个简单方法是不使用您正在设置的基于线程配置文件的策略，并将脚本组件替换为配置如下的池化 Java 组件：

```
<pooled-component class="org.mule.PooledComponent">
        <pooling-profile exhaustedAction="WHEN_EXHAUSTED_WAIT" maxActive="0" maxWait="-1"  initialisationPolicy="INITIALISE_NONE"/>
</pooled-component> 
```

您应该将 bash 脚本的调用放在该组件中。[你可以在这里](http://www.mulesoft.org/documentation/display/MULE3USER/Tuning+Performance#TuningPerformance-AboutPoolingProfiles)找到关于它的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:43:37.223

@genjosanzo ...您让我在考虑处理策略方面走上了正轨。这是最终工作的解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"
    xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
    xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:file="http://www.mulesoft.org/schema/mule/file"
    xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd ">

    <queued-asynchronous-processing-strategy
        name="limitThreads" maxThreads="7"
        doc:name="Queued Asynchronous Processing Strategy" />
    <flow name="Poll_DirectoryFlow1" doc:name="Poll_DirectoryFlow1"
        processingStrategy="limitThreads">
        <file:inbound-endpoint path="/home/administrator/Downloads/Input"
            responseTimeout="10000" doc:name="File" pollingFrequency="60000"
            fileAge="5000">
            <file:filename-regex-filter pattern="^.*\.(pdf)$"
                caseSensitive="false" />
        </file:inbound-endpoint>
        <scripting:component doc:name="Script">
            <scripting:script engine="Groovy">
                <scripting:text><![CDATA[def filename = message.getInboundProperty('originalFilename')
                println "$filename"
                def directory = message.getInboundProperty('directory')
                println "$directory"
                "mkdir processed".execute()
                def command = ["/home/administrator/ocr.sh", "$directory/$filename", "/home/administrator/Downloads/Output/$filename"]
                println "$command"
                def cmd = command.execute()
                cmd.waitFor()
                println "$filename has completed processing"]]></scripting:text>
            </scripting:script>
        </scripting:component>
        <echo-component doc:name="Echo"/>
    </flow>
</mule> 
```

# c - 我的浮点数在打印时有多余的数字

> ID：13039609
> 
> 赞同：1
> 
> 时间：2012-10-23T21:31:36.470
> 
> 标签：c, floating-point

我将浮点数定义为`float transparency = 0.85f;`And 在下一行中，我将它传递给一个函数——`fcn_name(transparency)`但事实证明该变量`transparency`具有 value `0.850000002`，当我使用默认设置打印它时，它是`0.850000002`。对于价值`0.65f`，它是`0.649999998`。

我怎样才能避免这个问题？我知道浮点只是一个近似值，但如果我定义一个只有几位小数的浮点数，我如何确保它没有改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:02:41.037

以二进制格式表示的浮点值没有任何特定的*十进制*精度。仅仅因为您在某些规范中读到该数字可以表示一些固定数量的*十进制*数字，它实际上并没有多大意义。它只是将物理（和有意义的）二进制精度粗略转换为其意义不大的十进制近似值。

二进制浮点格式的一个特性是它只能精确地表示（在其尾数宽度的范围内）可以表示为 2 的幂的有限和（包括 2 的负幂）的数字。像`0.5`, `0.25`, `0.75`（十进制）这样的数字将以二进制浮点格式精确表示，因为这些数字要么是 2 ( `2^-1`, `2^-2`) 的幂，要么是其和。

同时，十进制这样的数字`0.1`不能用2的有限幂和来表示。`0.1`浮点二进制中十进制的表示是*无限*长的。这立即意味着`0.1`无法以有限二进制浮点格式精确表示。注意`0.1`只有一位十进制数字。但是，这个数字仍然无法表示。这说明了用十进制数字表示浮点精度并不是很有用的事实。

像`0.85`和`0.65`来自您的示例的值也是不可表示的，这就是为什么您在转换为有限二进制浮点格式后看到这些值失真的原因。实际上，您必须习惯这样一个事实，即*无论这些浮点类型有多大*，您在日常生活中会遇到的大多数小数小数都不能精确地表示为二进制浮点类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:36:54.047

我能想到的解决这个问题的唯一方法是将特征和尾数分别传递给函数，让 IT 适当地设置值。

另外，如果您想要更高的精度，

[http://www.drdobbs.com/cpp/fixed-point-arithmetic-types-for-c/184401992](http://www.drdobbs.com/cpp/fixed-point-arithmetic-types-for-c/184401992)是我知道的文章。虽然这仅适用于 C++。（搜索等效的 C 实现）。

我在VS2010上试过这个，

```
#include <stdio.h>
void printfloat(float f)
{
    printf("%f",f);
}

int main(int argc, char *argv[])
{
    float f = 0.24f;
    printfloat(f);
    return 0;
}

OUTPUT: 0.240000 
```

# binding - 在 MonoTouch 中绑定静态全局会导致错误

> ID：13039610
> 
> 赞同：2
> 
> 时间：2012-10-23T21:31:39.557
> 
> 标签：binding, xamarin.ios

我从一个正常运行的绑定项目开始，但我需要为状态标志添加一个全局 int 并且我无法让它在没有错误的情况下绑定。我从示例代码开始，无法让它工作。

我添加到绑定文件的代码是：

```
[Static]
interface CameraEffects {
    [Field ("kCameraEffectsZoomFactorKey", "CameraLibrary")]
    NSString ZoomFactorKey { get; }
} 
```

我得到三个错误：

```
obj/Debug/ios/PDFExpert/CameraEffects.g.cs(34,94): error CS0117: `MonoTouch.Constants' does not contain a definition for `CameraLibraryLibrary'
obj/Debug/ios/PDFExpert/CameraEffects.g.cs(34,76): error CS1502: The best overloaded method match for `MonoTouch.ObjCRuntime.Dlfcn.dlopen(string, int)' has some invalid arguments
obj/Debug/ios/PDFExpert/CameraEffects.g.cs(34,76): error CS1503: Argument `#1' cannot convert `object' expression to type `string' 
```

如果我关闭库，它会尝试将其分配给另一个未知常量。这似乎真的搞砸了，因为它与文档无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T02:45:35.650

我想这应该像这样绑定

```
[Static]
interface CameraEffects {
    [Field ("kCameraEffectsZoomFactorKey", "__Internal")]
    NSString ZoomFactorKey { get; }
} 
```

这是由于在最终应用程序中，可执行文件和 libxxx.a 将链接并合并在一起，因此它应该可以工作。

亚历克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:51:45.260

允许赋值和检索值的另一个选项是使用 MonoTouch 使用的内部编组。我从 Xamarin 支持人员那里得到了这个，请注意这是用于操作 int，但如果您获得正确的编组代码，应该是可以使用的模式。

```
public unsafe static partial class RDPDFGlobal
{
  static readonly IntPtr __Internal_libraryHandle = Dlfcn.dlopen (null, 0);

  public static int RDPDFFeatures {
    get {
      return Dlfcn.GetInt32 (__Internal_libraryHandle, "RDPDFKitEnabledFeatures");
    }
    set {
      var indirect = Dlfcn.dlsym (__Internal_libraryHandle, "RDPDFKitEnabledFeatures");
      if (indirect == IntPtr.Zero)
        throw new Exception ("Field 'RDPDFKitEnabledFeatures' not found.");
        Marshal.WriteInt32 (indirect, value);
    }
} 
```

# java - 如何将 C++ 中的 double 转换为 Java

> ID：13039612
> 
> 赞同：2
> 
> 时间：2012-10-23T21:31:51.817
> 
> 标签：java, android, c++, java-native-interface, type-conversion

我有一个关于数据类型的问题，我想在开始编码之前弄清楚！假设我在 C++ 中有一个方法，它返回一个数组或一个双精度缓冲区。然后我需要将这个 double[] 转换为 jdouble，使用 JNI 标头，以便 Java 可以处理数据。

我的第一个问题是我应该将我的 C++ 方法配置为返回一个双精度数组还是一个双精度缓冲区。我知道它们几乎相同，但不知道哪个更好。另外，如何以 Java 可以理解的方式转换缓冲区？

这是我到目前为止所拥有的：

```
JNIEXPORT jdouble[] JNICALL Java_Test_getDouble[](JNIEnv *env, jobject obj) 
{
      double[] temp= new double[someSize];
      temp = // call my C++ code

      jdouble result = new jdouble[someSize];
      for(i = 0; i < someSize; i++)
           converting double in temp to jdouble in result;

       return result;     
} 
```

然后Java可以对数据做任何它想做的事情。

我的代码有意义吗？我读了一些关于`ByteGetElement()`但我不知道它是否可以在这里应用的帖子。如果你能给我一个简单的例子，那将是非常有帮助的。最终，我仍然需要知道是否应该使用双精度数组或缓冲区。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T16:31:22.213

就 C 而言，jdouble 实际上与 double 相同。

```
// just for the sake of the example  this buffer exists and holds the double values in C
double* sourceBuffer;

// allocate the jdouble Array
jdoubleArray output = (*env)->NewdoubleArray(env, someSize);

// check if it was allocated correctly
if (NULL == output) return NULL;

// commit the contents of the double* array (sourceBuffer in this example) into the Java array 
(*env)->SetDoubleArrayRegion(env, result, 0, someSize, sourceBuffer);
return result; 
```

# c++ - QDataStream QIODevice 内存分配

> ID：13039614
> 
> 赞同：2
> 
> 时间：2012-10-23T21:32:04.517
> 
> 标签：c++, qt

假设我有一个创建 QIODevice（例如 QFile）的函数，然后返回一个指向从 QIODevice 构造的 QDataStream 的指针。在这里处理内存分配的最佳方法是什么？显然，QIODevice 必须在函数终止时进行堆分配以保持对 QDataStream 的可用，但是 QDataStream 的破坏不会破坏或关闭设备。有没有标准的方法来处理这个看似常见的问题？理想情况下，我想要一个返回对象（不是指向对象的指针）的函数，该对象的行为类似于 QDataStream 但在销毁时会关闭设备。实际上是标准库输入流。

示例代码：

```
QDataStream* getStream(const QString& filename) {
  QFile* file = new QFile(filename); // needs to be explicitly deleted later
  file->open(QIODevice::ReadOnly);
  QDataStream* out = new QDataStream(&file); // same here
  return out;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T22:27:35.787

```
std::shared_ptr<QDataStream> getStream(const QString& filename) 
{
  QFile* file = new QFile(filename); // needs to be explicitly deleted later
  file->open(QIODevice::ReadOnly);
  std:shared_ptr<QDataStream> out(new QDataStream(&file), QDSDeleter);
  return out;
}

void QDSDeleter(QDataStream* s)
{
   QIODevice* device = s->device();
   device->close();
   delete device;
} 
```

`std::unique_ptr`是另一种选择，具体取决于您的需要；[如果您需要，这里是前者的参考](http://en.cppreference.com/w/cpp/memory/shared_ptr)。

[编辑：Qt 的QSharedPointer](http://qt-project.org/doc/qt-4.8/qsharedpointer.html#details)类也有此功能，您还可以在其中提供一个删除器作为构造函数参数。那里给出了其他指针包装器选项。谢谢@RA。进行更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-26T22:28:16.513

`QDataStream`有一个方便的`owndev`私有成员，您可以将其设置为 true 以使流有效地拥有设备。流也可以很容易地移动 - 使其非常接近您对它表现得像一个值的要求。理想情况下，您将修改您的 Qt 副本以实现它，但它也可以解决。

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/qdatastream-move-own-13039614
#include <QDataStream>

class DataStream : public QDataStream {
   struct Proxy {
      QScopedPointer<QDataStreamPrivate> d;
      QIODevice *dev;
      bool owndev;
      bool noswap;
      QDataStream::ByteOrder byteorder;
      int ver;
      QDataStream::Status q_status;
#if QT_VERSION < QT_VERSION_CHECK(5, 0, 0)
      virtual ~Proxy();
#endif
   };
   static Proxy *p(QDataStream *ds) { return reinterpret_cast<Proxy *>(ds); }
   static const Proxy *p(const QDataStream *ds) {
      return reinterpret_cast<const Proxy *>(ds);
   }
#if defined(QT_TESTLIB_LIB) || defined(QT_MODULE_TEST)
   friend class DataStreamTest;
#endif
  public:
   DataStream() = default;
   using QDataStream::QDataStream;
   DataStream(DataStream &&other) : DataStream(static_cast<QDataStream &&>(other)) {}
   DataStream(QDataStream &&other) {
      using std::swap;
      Proxy &o = *p(&other);
      Proxy &t = *p(this);
      swap(t.d, o.d);
      swap(t.dev, o.dev);
      swap(t.owndev, o.owndev);
      swap(t.noswap, o.noswap);
      swap(t.byteorder, o.byteorder);
      swap(t.ver, o.ver);
      swap(t.q_status, o.q_status);
   }
   DataStream &operator=(DataStream &&other) {
      return *this = static_cast<QDataStream &&>(other);
   }
   DataStream &operator=(QDataStream &&other) {
      this->~DataStream();
      new (this) DataStream(std::move(other));
      return *this;
   }
   void setOwnedDevice(QIODevice *dev) {
      setDevice(dev);
      p(this)->owndev = true;
   }
   bool ownsDevice() const { return p(this)->owndev; }
   static bool ownsDevice(const QDataStream *ds) { return p(ds)->owndev; }
}; 
```

由于`QObject`有一个内置的引用计数，`QDataStream`如果我们愿意，我们也可以把它作为一个共享指针。

在 Qt 4.8 和 5.10 上测试了以下要求：

```
PASS   : DataStreamTest::isBinaryCompatible()
PASS   : DataStreamTest::streams()
PASS   : DataStreamTest::movesFromNotOwnedQDataStream()
PASS   : DataStreamTest::movesFromNotOwnedDataStream()
PASS   : DataStreamTest::assignsFromNotOwnedQDataStream()
PASS   : DataStreamTest::assignsFromNotOwnedDataStream()
PASS   : DataStreamTest::returnsFromNotOwnedQDataStream()
PASS   : DataStreamTest::returnsFromNotOwnedDataStream()
PASS   : DataStreamTest::movesFromOwnedQDataStream()
PASS   : DataStreamTest::moveFromOwnedDataStream()
PASS   : DataStreamTest::assignsFromOwnedQDataStream()
PASS   : DataStreamTest::assignsFromOwnedDataStream()
PASS   : DataStreamTest::returnsFromOwnedQDataStream()
PASS   : DataStreamTest::returnsFromOwnedDataStream() 
```

测试套件如下。二进制兼容性测试非常广泛，几乎排除了我们所依赖的 UB 存在问题的可能性。请注意，`QDataStream`在主要 Qt 版本中 ' 的布局不能更改 - 因此上述代码将适用于所有未来的 Qt 5 版本。

```
#include <QtTest>

class DataStreamTest : public QObject {
   Q_OBJECT
   static QObjectData *getD(QObject *obj) {
      return static_cast<DataStreamTest *>(obj)->d_ptr.data();
   }
   static bool wasDeleted(QObject *obj) { return getD(obj)->wasDeleted; }
   template <typename T, typename... Args>
   DataStream make_stream(Args &&... args) {
      return T(std::forward<Args>(args)...);
   }
   static QDataStream::ByteOrder flipped(QDataStream::ByteOrder o) {
      return (o == QDataStream::BigEndian) ? QDataStream::LittleEndian
                                           : QDataStream::BigEndian;
   }
   Q_SLOT void isBinaryCompatible() {
      QCOMPARE(sizeof(DataStream), sizeof(QDataStream));
      QCOMPARE(sizeof(DataStream::Proxy), sizeof(QDataStream));
      struct Test {
         QByteArray data;
         QDataStream ds{&data, QIODevice::ReadWrite};
         void check(int loc = 0) {
            if (!loc) {
               check(1);
               ds.setDevice(nullptr);
               check(1);
            }
            QCOMPARE(!!ds.device(), DataStream::ownsDevice(&ds));
            QCOMPARE(ds.device(), DataStream::p(&ds)->dev);

            if (!loc) check(2);
            bool noswap = DataStream::p(&ds)->noswap;
            QCOMPARE(noswap, DataStream::p(&ds)->noswap);
            QCOMPARE(ds.byteOrder(), DataStream::p(&ds)->byteorder);
            if (loc != 2) {
               ds.setByteOrder(flipped(ds.byteOrder()));
               noswap = !noswap;
            }
            if (!loc) check(2);
            QCOMPARE(noswap, DataStream::p(&ds)->noswap);

            if (!loc) check(3);
            QCOMPARE(ds.version(), DataStream::p(&ds)->ver);
            if (loc != 3) ds.setVersion(QDataStream::Qt_4_0);
            if (!loc) check(3);

            if (!loc) check(4);
            QCOMPARE(ds.status(), DataStream::p(&ds)->q_status);
            if (loc != 4) ds.setStatus(QDataStream::ReadPastEnd);
            if (!loc) check(4);
         }
      } test;
      test.check();
   }
   Q_SLOT void streams() {
      QString str{"Hello, world"};
      QVector<uint> ints{44, 0xDEADBEEF, 1};
      QByteArray data;
      DataStream ds(&data, QIODevice::ReadWrite);
      ds << str << ints;
      ds.device()->reset();
      QString str2;
      QVector<uint> ints2;
      ds >> str2 >> ints2;
      QCOMPARE(str2, str);
      QCOMPARE(ints2, ints);
   }
   Q_SLOT void movesFromNotOwnedQDataStream() {
      QBuffer buf;
      QDataStream ds(&buf);
      QVERIFY(ds.device() == &buf);
      DataStream ds2(std::move(ds));
      QVERIFY(!ds.device());
      QVERIFY(ds2.device() == &buf);
      QVERIFY(!wasDeleted(&buf));
   }
   Q_SLOT void movesFromNotOwnedDataStream() {
      QBuffer buf;
      DataStream ds(&buf);
      QVERIFY(ds.device() == &buf);
      DataStream ds2(std::move(ds));
      QVERIFY(!ds.device());
      QVERIFY(ds2.device() == &buf);
      QVERIFY(!wasDeleted(&buf));
   }
   Q_SLOT void assignsFromNotOwnedQDataStream() {
      QBuffer buf;
      QDataStream ds(&buf);
      QVERIFY(ds.device() == &buf);
      DataStream ds2;
      ds2 = std::move(ds);
      QVERIFY(!ds.device());
      QVERIFY(ds2.device() == &buf);
      QVERIFY(!wasDeleted(&buf));
   }
   Q_SLOT void assignsFromNotOwnedDataStream() {
      QBuffer buf;
      DataStream ds(&buf);
      QVERIFY(ds.device() == &buf);
      DataStream ds2;
      ds2 = std::move(ds);
      QVERIFY(!ds.device());
      QVERIFY(ds2.device() == &buf);
      QVERIFY(!wasDeleted(&buf));
   }
   Q_SLOT void returnsFromNotOwnedQDataStream() {
      QBuffer buf;
      {
         auto ds = make_stream<QDataStream>(&buf);
         QVERIFY(ds.device());
         QVERIFY(!ds.ownsDevice());
      }
      QVERIFY(!wasDeleted(&buf));
   }
   Q_SLOT void returnsFromNotOwnedDataStream() {
      QBuffer buf;
      buf.open(QIODevice::ReadWrite);
      {
         auto ds = make_stream<DataStream>(&buf);
         QVERIFY(ds.device());
         QVERIFY(!ds.ownsDevice());
      }
      QVERIFY(!wasDeleted(&buf));
   }
   Q_SLOT void movesFromOwnedQDataStream() {
      QPointer<QIODevice> buf;
      {
         QByteArray data;
         QDataStream ds(&data, QIODevice::ReadWrite);
         QVERIFY(DataStream::ownsDevice(&ds));
         buf = ds.device();
         DataStream ds2(std::move(ds));
         QVERIFY(!ds.device());
         QVERIFY(ds2.device() == buf);
         QVERIFY(buf);
      }
      QVERIFY(!buf);
   }
   Q_SLOT void moveFromOwnedDataStream() {
      QPointer<QBuffer> buf(new QBuffer);
      {
         DataStream ds;
         ds.setOwnedDevice(buf);
         QVERIFY(ds.device() == buf);
         DataStream ds2(std::move(ds));
         QVERIFY(!ds.device());
         QVERIFY(ds2.device() == buf);
         QVERIFY(buf);
      }
      QVERIFY(!buf);
   }
   Q_SLOT void assignsFromOwnedQDataStream() {
      QPointer<QIODevice> buf;
      {
         QByteArray data;
         QDataStream ds(&data, QIODevice::ReadWrite);
         QVERIFY(DataStream::ownsDevice(&ds));
         buf = ds.device();
         DataStream ds2;
         ds2 = std::move(ds);
         QVERIFY(!ds.device());
         QVERIFY(ds2.device() == buf);
         QVERIFY(buf);
      }
      QVERIFY(!buf);
   }
   Q_SLOT void assignsFromOwnedDataStream() {
      QPointer<QBuffer> buf(new QBuffer);
      {
         DataStream ds;
         ds.setOwnedDevice(buf);
         QVERIFY(ds.device() == buf);
         DataStream ds2;
         ds2 = std::move(ds);
         QVERIFY(!ds.device());
         QVERIFY(ds2.device() == buf);
         QVERIFY(buf);
      }
      QVERIFY(!buf);
   }
   Q_SLOT void returnsFromOwnedQDataStream() {
      QPointer<QIODevice> dev;
      QByteArray data;
      {
         auto ds = make_stream<QDataStream>(&data, QIODevice::ReadWrite);
         dev = ds.device();
         QVERIFY(ds.device());
         QVERIFY(ds.ownsDevice());
      }
      QVERIFY(!dev);
   }
   Q_SLOT void returnsFromOwnedDataStream() {
      QPointer<QIODevice> dev;
      QByteArray data;
      {
         auto ds = make_stream<DataStream>(&data, QIODevice::ReadWrite);
         dev = ds.device();
         QVERIFY(ds.device());
         QVERIFY(ds.ownsDevice());
      }
      QVERIFY(!dev);
   }
};

QTEST_MAIN(DataStreamTest)
#include "main.moc" 
```

# iphone - XCode - 使用构建 > 分析，潜在泄漏警告

> ID：13039616
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:32:12.053
> 
> 标签：iphone, ios, xcode, debugging

我今天刚刚发现了 XCode 的 Build > Analyze 功能，所以我试图通过并解决它发现的所有错误。有几行 XCode 发现异常让我感到困惑：

```
 //Test View
    self.imageViewTest = [[UIImageView alloc] init];
    self.imageViewTest.frame = CGRectMake(0, 0, 100, 100); // <=== Leak
    [self.view addSubview:self.imageViewTest];
    //Test View 2
    self.imageViewTestB = [[UIImageView alloc] init];
    self.imageViewTestB.frame = CGRectMake(0, 100, 100, 100); // <=== Leak
    [self.view addSubview:self.imageViewTestB]; 
```

后来在我的视频捕获设置中

```
 self.captureOutput = [[AVCaptureVideoDataOutput alloc] init];
    captureOutput.alwaysDiscardsLateVideoFrames = YES; // <=== Leak 
```

这些行中的每一行的警告都是“对象的潜在泄漏”。所有这 3 个对象都`release`在我的`dealloc`方法中发送消息。这里有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:45:34.777

如果您没有使用 ARC 并且您的属性是使用 retain 属性设置的，那么是的，这些都是泄漏。这一行：

```
self.imageViewTest = [[UIImageView alloc] init]; 
```

应该：

```
UIImageView *iv = [[UIImageView alloc] init];
self.imageViewTest = iv;
[iv release]; 
```

或者：

```
self.imageViewTest = [[[UIImageView alloc] init] autorelease]; 
```

或者更好的是，使用 ARC。它使事情变得容易得多。

# jquery - div中的jQuery选择器

> ID：13039617
> 
> 赞同：-3
> 
> 时间：2012-10-23T21:32:13.440
> 
> 标签：jquery, jquery-selectors

嗨，我是 jQuery 的新手。

我有以下 HTML 块：

```
<html>
<body>
    <p>Paragraph1</p>
    <p>Paragraph2</p>
    <div id = "mydiv">
        <p>Paragraph3</p>
        <p>Paragraph4</p>
    </div>
 </body>
</html> 
```

如果我做 $("p")，那么这将选择每个段落。但是我如何只选择“mydiv”中的所有段落

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T21:33:17.850

你所要做的就是：

```
$('#mydiv p') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T21:35:05.090

或者你可以这样做：

```
$('#mydiv').find('p') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T21:33:24.563

您可以设置上下文

```
$('p','#mydiv') // equal to $('#mydiv').find('p') 
```

或者

```
$('#mydiv p') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T21:33:39.910

```
$( "#mydiv p" ) 
```

享受！你可以像这样级联选择器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T21:33:50.477

```
$("#mydiv p") 
```

你也可以使用这个：

```
$("#mydiv > p") 
```

另一种方法是定义上下文：

```
$('p', '#mydiv"); 
```

# c# - 在鼠标悬停时在 C# 表单应用程序中弹出文本

> ID：13039624
> 
> 赞同：1
> 
> 时间：2012-10-23T21:32:41.597
> 
> 标签：c#, winforms

> **可能重复：**
> [创建自定义工具提示 C#](https://stackoverflow.com/questions/11644277/create-custom-tooltip-c-sharp)

Does anyone know of a way to make a box 'popup' when the user cursors over a certain item?

For example, I want to have a PictureBox on a C# forms application and when the user cursors over it, a box of text will pop up.

I'm aware of `ToolTip` however I was thinking of something more customisable; in my mind I'm thinking of the kind of popup boxes you see in World of WarCraft when you cursor over an item in your inventory (obviously it doesn't have to be THAT flashy, but at least one where the text colour, background colour, text etc. are all modifiable).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:01:03.440

您可以使用[ToolStripControlHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcontrolhost.aspx)来托管控件（例如面板）并添加所需的内容。然后使用 Items 集合将该控件添加到[ToolStripDropDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripdropdown.aspx)，并使用[Show(Control,Point)](http://msdn.microsoft.com/en-us/library/71tzk45y.aspx)方法显示该控件。

* * *

以为我会添加一个例子

```
public class Form1 {
    public Form1() {
        ToolStripDropDown customToolTip = new ToolStripDropDown();
        customToolTip.Items.Add(new CustomPopupControl("Hello", "world"));
        MouseMove += (o, e) => {
            Point location = e.Location;
            location.Offset(0, 16);
            customToolTip.Show(this, location);
        };
    }

    class CustomPopupControl : ToolStripControlHost {
        public CustomPopupControl(string title, string message)
            : base(new Panel()) {
            Label titleLabel = new Label();
            titleLabel.BackColor = SystemColors.Control;
            titleLabel.Text = title;
            titleLabel.Dock = DockStyle.Top;

            Label messageLabel = new Label();
            messageLabel.BackColor = SystemColors.ControlLightLight;
            messageLabel.Text = message;
            messageLabel.Dock = DockStyle.Fill;

            Control.MinimumSize = new Size(90, 64);
            Control.Controls.Add(messageLabel);
            Control.Controls.Add(titleLabel);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:40:39.360

我的意思是，如果它是按钮或图像按钮，您可以添加诸如 MouseHover 操作之类的内容，然后显示您的消息

```
private void button1_MouseHover(object sender, System.EventArgs e) 
{
MessageBox.Show("yourmessage"); 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:57:28.037

您需要自定义工具提示。参考 [http://www.codeproject.com/Articles/98967/A-ToolTip-with-Title-Multiline-Contents-and-Image](http://www.codeproject.com/Articles/98967/A-ToolTip-with-Title-Multiline-Contents-and-Image)

那里还有其他一些文章，但这一篇对我来说很好。

您可能需要根据您的要求添加代码。

# php - 在没有 shell 的 PHP 中将 HTML 转换为图像

> ID：13039627
> 
> 赞同：6
> 
> 时间：2012-10-23T21:32:50.067
> 
> 标签：php, html, image

我想要将 HTML 转换为图像并将结果显示给用户的选项。我将使用 PHP 创建一个 $html 变量，而不是使用 echo $html 显示，我想将其显示为图像，以便用户可以在需要时保存文件。

我希望有像 $image = convertHTML2Image($html); 这样简单的东西。:p 如果存在？！

谢谢！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T21:53:28.100

正如@Pekka 所说，将 HTML 代码转换为图像的工作是成熟的网络浏览器的工作。

如果你想做这种事情，那么你需要一个脚本来执行以下操作：

1.  在浏览器中打开页面。
2.  从浏览器捕获呈现的页面作为图形。
3.  将该图形输出给您的用户。

传统上，这将是一项艰巨的任务，因为 Web 浏览器通常由用户驱动，并且不容易以这种方式自动化。

幸运的是，现在有了[PhantomJS](http://phantomjs.org/)形式的解决方案。

PhantomJS 是一个无头浏览器，专为这类事情而设计——需要成熟渲染引擎的自动化任务。

它基本上是一个完整的浏览器，但没有用户界面。它以与其他浏览器完全一样的方式呈现页面内容（它基于 Webkit，因此结果类似于 Chrome），并且可以由脚本控制。

正如 PhantomJS 主页上所说，它的目标用例之一是用于截取网站的屏幕截图或缩略图。

（它的另一个很好的用途是对您的站点进行自动化测试，它也是一个很棒的工具）

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:37:33.953

这在纯 PHP 中是不可能的。

您所说的“转换”实际上是一项艰巨的任务：必须*呈现*HTML 页面。要在 PHP 中执行此操作，您必须重写整个 Web 浏览器。

您要么必须使用外部工具（通常利用浏览器的渲染引擎）或 Web 服务（其作用相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T14:04:59.873

您可以查看[dompdf](https://github.com/dompdf/dompdf)，它是一个将 html 文件转换为 pdf 的 php 框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-28T14:18:06.160

使用 WKHTMLTOPDF。奇迹般有效。它可以将任何页面转换为 PDF .. 通过执行以后的操作可以获得 jpeg。

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-06T21:32:10.560

可以将 html 转换为图像。但是，首先您必须转换为 PDF。见[链接](http://buffernow.com/html-to-image-php-script/)

# php - Zend 数据库插入行的最后一个 ID。（使用 postgres）

> ID：13039629
> 
> 赞同：1
> 
> 时间：2012-10-23T21:32:54.440
> 
> 标签：php, zend-framework, postgresql

好的，得到这个查询（工作正常，插入一个全部......）

```
$db = Zend_Db_Table::getDefaultAdapter();
$data = array(
    "comment_id" => new Zend_Db_Expr("nextval('comments_comment_id_seq')"),
    "comment" => $comment,
    "comment_level" => 1,
    "is_active" => true,
    "status" => 0,
    "id" => $id,
    "user_id" => $_SESSION['role']['user_id'],
    "ts_create" => $created,
    "ts_mod" => $created
);
$db->insert($this->_name, $data);
$newID = $db->lastInsertId(); 
```

我什至尝试过

```
$newID = $db->insert($this->_name, $data); 
```

而且我无法获得 ID 的值。它不是 mysql(i) 所以我认为这是我的第一个问题，因为 postgres 似乎并没有像我习惯使用它那样自动增加。所以我希望这里有人可以帮助我。无论如何要在新插入的项目上获取“comment_id”列ID？因为现在我尝试 lastInsertID 并且我得到的只是 false 或 1，这两种情况都是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:58:53.517

好吧，GordonM 为我指明了 zend 的特定文档的方向，通过阅读该文档，我能够找到我需要的内容。不幸的是，没有人提供实际答案。因此，我将回答我自己的问题，因为当他们被困在与我刚刚相似的位置时可能会偶然发现它。但会投票给 GordonM，让我朝着正确的方向前进。谢谢戈登

改变：

```
$newID = $db->insert($this->_name, $data); 
```

至：

```
$newID = $db->lastSequenceId('comments_comment_id_seq'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:40:51.727

在[Zend 文档](http://framework.zend.com/manual/1.12/en/zend.db.adapter.html)中，使用序列生成自动增量的数据库（如 Postgres）要求您在 lastInsertId() 调用中按名称指定序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:43:20.477

自动递增字段在 PostgreSQL 中实现为序列，数据库在插入新值时从该序列中读取。在调用 lastInsertId() 时，您必须使用该序列的名称来获取正确的值。

# c# - 从异步 ApiController 返回即时响应

> ID：13039630
> 
> 赞同：1
> 
> 时间：2012-10-23T21:32:57.920
> 
> 标签：c#, c#-4.0, asp.net-web-api, task-parallel-library

我遇到了从正常异步 ApiController 返回“立即”响应的问题。代码如下，寻找感叹号。用例是内容类型检查失败，我想发回错误响应消息。第一个版本挂起 Visual Studion 2010（和 Fiddler）。第二个作品。

我的问题是，为什么我不能使用我最初的方法来返回仅传回响应对象的虚拟任务？

```
public class MyController : ApiController
{

   public Task<HttpResponseMessage> Post([FromUri]string arg)
   {
       HttpResponseMessage response = null;

       // synchronous validation
       if (Request.Content.Headers.ContentType.MediaType != @"image/jpeg")
       {                    
           response = Request.CreateErrorResponse(
               HttpStatusCode.UnsupportedMediaType,
               "Invalid Content-Type.");
       }

       if (response == null)  // no immediate response, switch to async
       {
          // work done here    
       }
       else // immediate response, but we need to wrap in a task for caller to fetch
       {

           // !!!! this one doesn't work !!!
           return new Task<HttpResponseMessage>( () => response);

           // !!! this one does !!!
           TaskCompletionSource<HttpResponseMessage> tcs = new TaskCompletionSource<HttpResponseMessage>();
           tcs.SetResult(response); 
           return tcs.Task;

       }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T22:33:40.217

的构造函数`Task<T>`返回一个尚未开始的任务，要使其工作，您必须执行以下操作：

```
var task = new Task<HttpResponseMessage>(() => response);
task.Start();
return task; 
```

但是这样做效率很低，因为 lambda 不必要地在线程池上执行。您的第二个版本更好，在 .Net 4.5 中更好的版本是使用[`Task.FromResult()`](http://msdn.microsoft.com/en-us/library/hh194922.aspx)：

```
return Task.FromResult(response); 
```

# java - 使用 JRE 1.7 进行排序时，哪个类会引发 IllegalArgumentException？

> ID：13039631
> 
> 赞同：4
> 
> 时间：2012-10-23T21:33:07.237
> 
> 标签：java, sorting, java-7, illegalargumentexception

我在 Java7 中使用 Collections.sort() 遇到了（显然是臭名昭著的）IllegalArgumentException
多亏了所以我理解了原因，这基本上是（咳嗽）糟糕的代码。
问题是，我自己无法重现异常。我做了一些jdk源代码挖掘，并找到了哪个类抛出了那个异常。这个想法是创建相应的测试用例。

这里是代码，顺便说一下
<pride level="0" >

```
@Override
public int compareTo( Symbol other) {
    if( this.lastUse == 0) {
        if( other.lastUse != 0) return (int)( -DateMicros.ONE_DAY);
    } else if( other.lastUse == 0) {
        return ( int)DateMicros.ONE_DAY;
    }
    return ( int)( this.lastUse - other.lastUse);
} 
```

</pride > 最重要的是，“lastUse”以微秒和毫秒（是混合的）为单位分配时间戳，这给出了极好的 int 溢出溢出

实际问题是：
**什么值会导致此代码崩溃？**得到一个适当的测试用例。

使用堆栈跟踪更新：

```
at java.util.ComparableTimSort.mergeHi(Unknown Source)
at java.util.ComparableTimSort.mergeAt(Unknown Source)
at java.util.ComparableTimSort.mergeCollapse(Unknown Source)
at java.util.ComparableTimSort.sort(Unknown Source)
at java.util.ComparableTimSort.sort(Unknown Source)
at java.util.Arrays.sort(Unknown Source)
at java.util.Collections.sort(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:05:44.160

看起来崩溃是由整数溢出引起的，然而这不应该是。这被确定为 bug ，它也为您提供了解决方法。

```
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7075600 
```

试试这个作为临时修复：

```
Adding -Djava.util.Arrays.useLegacyMergeSort=true to my eclipse.ini does seem to have resolved the issue. 
```

您可以在我发布的同一链接中找到此修复程序。

也可以访问这个`http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6923200`，这是在第一个链接之前报告的相同类型的错误，但是由于他们无法重复创建相同的问题，所以它被关闭了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:51:50.750

来自[Java SE 7 和 JDK 7 的兼容性](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#source)

**领域：** API：实用程序

**概要：**数组和集合的更新排序行为可能会引发 IllegalArgumentException

**说明：**`java.util.Arrays.sort`和（间接）使用的排序算法`java.util.Collections.sort`已被替换。如果新的排序实现`IllegalArgumentException`检测到`Comparable that violates the Comparable contract`. 之前的实现默默地忽略了这种情况。如果需要以前的行为，您可以使用新的系统属性`java.util.Arrays.useLegacyMergeSort`, 来恢复以前的合并排序行为。不兼容的性质：行为

射频：6804124

所以正确的实现应该像

```
 public int compareTo( Symbol other) {
        if( this.lastUse == other.lastUse) {
           return 0;
        } else if( other.lastUse>this.lastUse) {
            return 1;
        }
        return -1;
    } 
```

参考

1.  [可比](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:44:48.923

不看堆栈跟踪本身就很难说。

但是[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)提到方法本身可以抛出异常。

> （可选）如果实现检测到列表元素的自然顺序被发现违反了 Comparable 合约

**更新**

看起来是因为您的对象不满足`Comparable`一致性要求：

> 当且仅当 e1.compareTo(e2) == 0 对于类 C 的每个 e1 和 e2 具有与 e1.equals(e2) 相同的布尔值时，才说类 C 的自然排序与 equals 一致。注意null 不是任何类的实例，即使 e.equals(null) 返回 false，e.compareTo(null) 也应该抛出 NullPointerException。

# html - 用于响应式的 CSS3 Flexbox

> ID：13039632
> 
> 赞同：1
> 
> 时间：2012-10-23T21:33:07.930
> 
> 标签：html, css, flexbox

[MAJ：添加代码笔： http](http://codepen.io/anon/pen/srGwq) ://codepen.io/anon/pen/srGwq

我开始为一个非常具体的项目处理 flexbox。由于文档多次更改频繁，我不处理我的问题。

这是我的html：

```
<div class="flexbox">
    <div class="middle">Middle</div>
    <div class="left">Left</div>
    <div class="right">Right</div>
</div> 
```

还有我的 css（不带 lisibility 前缀）：

```
.flexbox {
  display: box;
  box-orient: horizontal;
  box-align: start;
}

.middle {
  box-flex-group: 1;
  box-flex: 2;
  box-ordinal-group: 2;
}

.left {
  box-flex-group: 1;
  box-flex: 1;
  box-ordinal-group: 1;
}

.right {
  box-flex-group: 1;
  box-flex: 1;
  box-ordinal-group: 3;
} 
```

所以，结果是这样的：

```
________________________
| .left .middle .right |
|______________________| 
```

通过媒体查询，我更改了 box-ordinal-group 和 box-orient 以在移动设备上获得此结果：

```
____________
| .middle  | 
| .left    |
| .right   |
|__________| 
```

所以问题是，我需要将 .left 和 .right 垂直对齐放在平板电脑的一个左列中，如下所示：

```
____________________
| .left   .middle  | 
| .right           |
|__________________| 
```

我尝试将 .left 和 .right 放入 box-ordinal-group:1 并将 .middle 设置为 box-orginal-group:2 但结果是 .left 和 .right 在左侧水平对齐，我会它们要垂直对齐。

由于我对 Flexbox 不太了解，欢迎您体验。也许这是不可能的。

谢谢，对糟糕的架构感到抱歉，我还没有获得发布图片的机会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:29:13.997

查看 flex-flow 属性：

[http://dev.w3.org/csswg/css3-flexbox/#flex-flow-property](http://dev.w3.org/csswg/css3-flexbox/#flex-flow-property)

像这样的伪代码：

@media $QUERY_TABLET { .flexbox {flex-flow: 换行} }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T14:30:20.973

我在我的[github bredele](http://github.com/bredele%22github%22)的 wrap layout 上放了一些例子。你应该通过使用 flex-flow（行/列换行）和 flex-basis（初始最小宽度）来得到你想要的。

使用行换行流程：

```
.flexbox {
    display: -webkit-flex;
    display:flex;
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap;
}

.left, .right {
    -webkit-flex: 1 50%;
    flex: 1 50%;
}

.middle {
    width:50%;
} 
```

使用柱换行流：

```
.flexbox {
    /* the height has to be defined */
    height:400px;
    display: -webkit-flex;
    display:flex;
    -webkit-flex-flow: column wrap;
    flex-flow: column wrap;
}

.left, .right {
    -webkit-flex: 1 50%;
    flex: 1 50%;
}

.middle {
    -webkit-flex: 1 100%;
    flex:1 100%;
} 
```

我认为第二种解决方案是您正在寻找的。

奥利维尔:)

# c++ - C++ *LPCSTR 奇怪的范围错误

> ID：13039633
> 
> 赞同：1
> 
> 时间：2012-10-23T21:33:08.510
> 
> 标签：c++, scope

我目前有一个名为 TextureObject 的类。在创建函数中，我创建纹理，并将类中的 LPCSTR 分配给函数中给定的参数。当我稍后返回该 LPCSTR 时，它以一种意想不到的方式返回。

某些类型名称和函数来自 DirectX 11，请忽略它们。

代码：

h 文件：

```
class TextureObject
{
public:
    ID3D11ShaderResourceView *pTexture;
    LPCSTR GetFilename() const { return *FFilename; }

    bool IsNotNull;
    void CreateTexture(ID3D11Device &dev,LPCSTR Filename);
    void ReCreate(ID3D11Device &dev);
    void Release();
    int relativeId;
private:
    LPCSTR *FFilename;
}; 
```

.cpp 文件：

```
void TextureObject::CreateTexture(ID3D11Device &dev,LPCSTR Filename)
{
    D3DX11CreateShaderResourceViewFromFile(
            &dev,        // the Direct3D device
            Filename,    // load Wood.png in the local folder
            NULL,        // no additional information
            NULL,        // no multithreading
            &pTexture,   // address of the shader-resource-view
            NULL);       // no multithreading
    FFilename = new LPCSTR(Filename);
    IsNotNull = true;
}

void TextureObject::ReCreate(ID3D11Device &dev)
{
    CreateTexture(dev, *FFilename);
} 
```

在 CreateTexture 函数中使用 vs 2012 调试器时，Filename 调试器值为：

```
0x0a06fed0 "C:\Users\Utilizador\Desktop\particle.png" 
```

这对我来说是完美的！当我分配班级的 FFilename 时：

```
FFilename = new LPCSTR(Filename); 
```

没关系。当我在此函数范围内检查 FFilename 的值时，它与 Filename 的值相同。但是当我使用 GetFilename 时，事情开始变得疯狂：

```
 = 0x0a06fed0 "îþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþîþü =I.C" 
```

嗯，我刚认识你，这很疯狂，但是……这是我的价值。麦凯？

好吧，请帮助我。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:55:02.157

创建指针`FFilename`时，您正在使用另一个指针对其进行初始化。这不会复制字符串，现在您有两个指向同一事物的指针。想必那个东西是临时对象，以后去看的时候已经失效了。

我建议`std::string`改用它，它更不容易出错。该`c_str`方法可以随时获取`LPCSTR`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:56:10.243

您没有复制字符串。您正在复制指针。我想你可能想复制字符串，因为你不能保证调用者的指针在以后仍然会引用有效数据。

`LPCSTR`只是一个`const char*`。可能有一个相应的 windows 调用，但我只是`strdup`用来复制字符串。

定义`FFilename`为`LPCSTR`：

```
LPCSTR FFilename; 
```

接着：

```
void TextureObject::CreateTexture(ID3D11Device &dev,LPCSTR Filename)
{
    D3DX11CreateShaderResourceViewFromFile(
            &dev,        // the Direct3D device
            Filename,    // load Wood.png in the local folder
            NULL,        // no additional information
            NULL,        // no multithreading
            &pTexture,   // address of the shader-resource-view
            NULL);       // no multithreading
    FFilename = strdup(Filename);
    IsNotNull = true;
}

void TextureObject::ReCreate(ID3D11Device &dev)
{
    CreateTexture(dev, FFilename);
} 
```

由于您使用的是 C++，因此您可以自由使用`std::string`，当对象被销毁时会自动清理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T22:06:26.963

正如 marcin_j 所说，使用 std::[w]string。至于线路：

```
FFilename = new LPCSTR(Filename); 
```

它只是为指针分配 4 个字节并将其初始化为文件名字符串。它实际上并没有复制字符串。因此，您仍然可以使用该字符串，但它归调用 TextureObject::CreateTexture 的人所有，并且可能在 TextureObject 仍在引用它时被释放。

将类更改为：

```
class TextureObject      
{      
public:      
    // ...all the same stuff as before...

private:      
    wstring FFilename;  // it's better to store filenames as Unicode
}; 
```

以及以下方法：

```
void TextureObject::CreateTexture(ID3D11Device* dev, const wstring& Filename)        
{        
    D3DX11CreateShaderResourceViewFromFile(        
            dev,        // the Direct3D device        
            Filename.c_str(),    // load Wood.png in the local folder        
            NULL,        // no additional information        
            NULL,        // no multithreading        
            &pTexture,   // address of the shader-resource-view        
            NULL);       // no multithreading        

    FFilename = Filename;
    IsNotNull = true;        
}        

void TextureObject::ReCreate(ID3D11Device* dev)        
{        
    CreateTexture(dev, FFilename.c_str());        
} 
```

# c# - 如果选择了无效值（即默认值），我如何循环 case switch 语句

> ID：13039638
> 
> 赞同：2
> 
> 时间：2012-10-23T21:33:17.953
> 
> 标签：c#

这是一个可用值菜单的示例。如果没有选择任何选项，我想让它循环回到开始。

```
static void Main(string[] args)
{
    Console.WriteLine("1 : Option 1");
    Console.WriteLine("2 : Option 2");
    Console.WriteLine("3 : Option 3");
    Console.WriteLine("4 : Option 4");
    Console.WriteLine("5 : Option 5");
    Console.Write("Please enter your option choice: ");
    string choice = Console.ReadLine();

    int intChoice = int.Parse(choice);
    switch (intChoice)
    {
        case 1:
            Console.WriteLine("you chose 1");
            break;
        case 2:
            Console.WriteLine("you chose 2");
            break;
        case 3:
            Console.WriteLine("you chose 3");
            break;
        case 4:
            Console.WriteLine("you chose 4");
            break;
        case 5:
            Console.WriteLine("you chose 5");
            break;
    }
} 
```

我试图通过使用类和方法来做到这一点，但我真的很困惑。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:44:06.030

将整个东西包装在一个`do-while`块中：

```
bool isValid = true;

do
{
    isValid = true;
    // Write to console
    // read from console
    switch(intChoice)    
    {
        // Place some cases here.
        default: 
            Console.WriteLine("Invalid Choice")
            isValid = false;
    }
}
while(!isValid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:36:51.973

使用布尔值作为翻转开关，告诉`while`循环是否继续运行。这是一个小例子：

```
bool stillRunning = true;

while (stillRunning)
{
    Console.WriteLine("Enter a number.");
    string input = Console.ReadLine();
    int key = Convert.ToInt32(input);

    switch (key)
    {
        case 1:
            // Do something.
            stillRunning = false;
            break;

        case 2:
            // Do something.
            stillRunning = false;
            break;

        default:
            Console.WriteLine("No key selected.");
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:41:50.597

你可以使用默认

```
 switch (intChoice)
    {
        case 1:
            Console.WriteLine("you chose 1");
            break;
        case 2:
            Console.WriteLine("you chose 2");
            break;
        ....... 
        default: 
            //your logic here
            break;
    } 
```

之后，您可以选择如何做。你可以像这样使用一段时间和一个布尔值：

```
static void Main(string[] args)
        {

            Console.WriteLine("1 : Option 1");
            Console.WriteLine("2 : Option 2");
            Console.WriteLine("3 : Option 3");
            Console.WriteLine("4 : Option 4");
            Console.WriteLine("5 : Option 5");
            Console.Write("Please enter your option choice: ");

            bool correct = true;

            while (correct)
            {
                string choice = Console.ReadLine();
                int intChoice = int.Parse(choice);
                switch (intChoice)
                {
                    case 1:
                        Console.WriteLine("you chose 1");
                        break;
                    case 2:
                        Console.WriteLine("you chose 2");
                        break;
                    case 3:
                        Console.WriteLine("you chose 3");
                        break;
                    case 4:
                        Console.WriteLine("you chose 4");
                        break;
                    case 5:
                        Console.WriteLine("you chose 5");
                        break;
                    default:
                        correct = false;
                        break;
                }
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T21:42:15.123

最明显的解决方案似乎是：

```
bool loop = true;

while (loop)
{
    loop = false;
    switch (Console.ReadLine())
    {
        case "1":
            Console.WriteLine("you chose 1");
            break;
        case "2":
            Console.WriteLine("you chose 2");
            break;
        case "3":
            Console.WriteLine("you chose 3");
            break;
        case "4":
            Console.WriteLine("you chose 4");
            break;
        case "5":
            Console.WriteLine("you chose 5");
            break;
        default:
            loop = true;
            break;
    }
} 
```

不过，可能有更好的方法来做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T21:46:05.750

因此您只需要一个数字，最好使用`GetKey`方法，然后从控制台读取`string`值，然后将其解析为`int`：

```
DisplayOptions();
bool choiceDone;

do
{
    choiceDone = true;

    switch(GetChoice())
    {
       case ConsoleKey.D1:
           Console.WriteLine("you chose 1");
           break;
       case ConsoleKey.D2:
           Console.WriteLine("you chose 2");
           break;
           // etc
       default:
           choiceDone = false;
           break;
    }

} while(!choiceDone); 
```

我还提取了几种方法，使代码更干净：

```
private ConsoleKey GetChoice()
{
     Console.Write("Please enter your option choice: ");
     return Console.ReadKey().Key;
}

private void DisplayOptions()
{
     Console.Clear();
     Console.WriteLine("1 : Option 1");
     Console.WriteLine("2 : Option 2");
     Console.WriteLine("3 : Option 3");
     Console.WriteLine("4 : Option 4");
     Console.WriteLine("5 : Option 5");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T21:49:58.567

```
public void GetInput()
{
    int inputValue = 0;
    bool isValidInput = false;
    List<int> validEntries = new List<int> { 1,2,3, 42, 55, 69};

    while (!isValidInput)
        isValidInput = int.TryParse(Console.ReadLine(), out inputValue) && validEntries.Contains(inputValue);

    switch (inputValue)
    {
        case 1:
            {
                // something
                break;
            }
        case 2:
            {
                // something else
                break;
            }
        default:
            {
                //yet something else
                break;
            }
    }
} 
```

编辑：添加了显式值检查而不是接受任何整数。

# c# - 如何访问数据绑定 ContentControl 的 DataTemplate 生成的内容？

> ID：13039642
> 
> 赞同：5
> 
> 时间：2012-10-23T21:33:35.287
> 
> 标签：c#, wpf, xaml

假设我有以下内容：

```
<FrameworkElement.Resources>
    <DataTemplate DataType="{x:Type viewmodel:MainViewModel}">
        <view:MainBaseView />
    </DataTemplate>
</FrameworkElement.Resources>

<ContentControl x:Name="uxMaster" Grid.Row="0" Content="{Binding}" />
<view:AddRemoveBaseView x:Name="uxButtons" Grid.Row="1"
      DataContext="{Binding ElementName=uxMaster, Path=Content.uxGrid}" /> 
```

现在假设`Content`绑定到 a 的新实例`MainViewModel`。通过 WPF 的魔力`DataTemplates`，它将创建一个`UserControl` `MainBaseView`where `ContentControl`is 的实例并将其设置`DataContext`为`Binding`.

问题是，你到底是如何访问这个生成的内容（即`MainBaseView`实例）的？我正在尝试将 uxButtons' 绑定`DataContext`到 generate 内的网格`Content`，但在检查`Content`时它只包含绑定而不包含`MainBaseView`实例及其逻辑/可视树。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:11:07.627

```
/// <summary>
/// Get the first child of type T in the visual tree.
/// </summary>
/// <typeparam name="T"></typeparam>
/// <returns>the first child of type T in the visual tree, or null if no such element exists</returns>
public static T GetChildOfType<T>(this DependencyObject source) where T : DependencyObject
{
    for (var i = 0; i < VisualTreeHelper.GetChildrenCount(source); i++)
    {
        var child = VisualTreeHelper.GetChild(source, i);
        if (child != null && child.GetType() == typeof(T))
            return child as T;
    }

    for (var i = 0; i < VisualTreeHelper.GetChildrenCount(source); i++)
    {
        var child = VisualTreeHelper.GetChild(source, i);
        var t = child.GetChildOfType<T>();
        if (t != null) return t;
    }

    return null;
} 
```

然后你只需调用

```
var baseView = uxMaster.GetChildOfType<MainBaseView>() 
```

# ruby-on-rails - rvm 列表红宝石错误

> ID：13039644
> 
> 赞同：3
> 
> 时间：2012-10-23T21:33:45.003
> 
> 标签：ruby-on-rails, ruby, rvm

今天早上我正在对 readline 和 libcrypto 错误进行故障排除，最终卸载了 RVM、Ruby 和所有 gem。我重新安装了 RVM、Ruby 和 gems，但现在`rvm list`我得到了这个：

```
rvm rubies
=* /home/username/.rvm/scripts/list: line 321: /home/username/.rvm/rubies/ruby-1.9.3-p286/config: No such file or directory ruby-1.9.3-p286 [ ] 
```

现在我的应用程序突然抛出布局视图错误。我没有碰过我的代码，在卸载/重新安装之前它运行良好。

我再次尝试`rvm implode`并重新安装，但仍然没有任何乐趣。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:42:35.543

我在使用最新 Xcode 的 OS X 10.8.2 上遇到了完全相同的问题。我：

*   全新安装 RVM。
*   使用 llvm-gcc 编译包 OpenSSL 和 Readline。
*   使用 Homebrew 的 gcc-4.2 编译 Ruby。

一切都很好，直到我注意到`rvm list`.

已经有一个[Github 问题](https://github.com/wayneeseguin/rvm/issues/1254)，并且已经修复，但还没有进入稳定分支。坚持住，他们会得到的。

# java - Java正则表达式替换基于操作系统的文件路径

> ID：13039645
> 
> 赞同：3
> 
> 时间：2012-10-23T21:33:46.593
> 
> 标签：java, regex, replace, platform

我不太确定是否有任何正则表达式可以替换这些东西：

这是从通过 Linux 机器保存的 xml 文件中读取的字符串值

```
<pcs:message schema="models/HL7_2.5.model"/> 
```

这是保存在 Windows 机器中的那个

```
<pcs:message schema="model\HL7_2.5.model"/> 
```

这就是为什么文件在 Linux 中导出并在 Windows 中导入时在 eclipse 中出错的原因，反之亦然。

是否有任何正则表达式来查找和替换字符串中的值（斜杠和反斜杠）？（不是 XML 解析）基于工作操作系统？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T00:42:46.367

`str = str.replaceAll("\\\\|/", "\\"+System.getProperty("file.separator"))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:36:51.690

使用“file.separator”系统属性并以此为基础您的正则表达式。

[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

另请参阅：[File.separator vs FileSystem.getSeparator() vs System.getProperty("file.separator")？](https://stackoverflow.com/questions/8075373/file-separator-vs-filesystem-getseparator-vs-system-getpropertiesfile-separa)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:45:52.130

这应该注意修复斜线：

```
String str = xml.replaceAll("\\\\|/", System.getProperty("file.separator")); 
```

# android - 使用 Android NDK 和 GDB 断言后继续

> ID：13039652
> 
> 赞同：2
> 
> 时间：2012-10-23T21:34:02.270
> 
> 标签：android, eclipse, android-ndk, gdb, breakpoints

是否可以在 Android NDK 程序中从 C++ 触发 GDB 中断，该程序仍然允许程序在之后恢复？

意思是，我点击了导致 GDB 停止程序的断言，并且我希望能够按下 Eclipse 中的“播放”按钮来恢复程序，继续超出断言。

现在我正在使用：

```
__asm__ ("bkpt 0"); 
```

这会触发程序停止，并将我带到触发它的代码行，但之后不允许我继续。

GDB 在程序停止时输出以下内容。

```
(gdb) 
82 info signal SIGBUS
&"info signal SIGBUS\n"
~"Signal        Stop\tPrint\tPass to program\tDescription\n"
~"SIGBUS        Yes\tYes\tYes\t\tBus error\n"
82^done
(gdb) 
```

如果此时我按“恢复”，我会在 LogCat 中得到以下输出：

```
Fatal signal 11 (SIGSEGV) at 0xfffffffd (code=1) 
```

也许我的问题是如何抛出**非致命的**休息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:01:43.520

检测您的进程是否正在调试的标准 Linux 方法是：

```
if (ptrace(PTRACE_TRACEME, 0, NULL, 0) == -1)
    //Yes, we're running under GDB 
```

考虑到这一点，做一个条件硬断点 ( `bkpt 0`)，它只在调试器下触发。

不确定 Android 中的纯 Java 调试是否会影响 ptrace。试试看。

编辑：打电话`raise(SIGABRT)`休息。然后在 GDB 中，键入`signal 0`以继续。其他信号，如 SIGINT 和 SIGTRAP，也可能起作用。

# javascript - DIV onload 不触发 JavaScript 方法

> ID：13039654
> 
> 赞同：2
> 
> 时间：2012-10-23T21:34:04.063
> 
> 标签：javascript, google-maps-api-3, asp.net-mvc-4

我正在使用 ASP.NET MVC 4，我有一个这样的 DIV：

```
<div id="map_canvas" style="width: 500px; height: 400px;" onload="mapAddress();"></div> 
```

然后，在一个 JavaScript 文件（**我已验证已加载**）中是`mapAddress`函数：

```
function mapAddress() {
    //In this case it gets the address from an element on the page, but obviously you  could just pass it to the method instead
    var address = $("#Address").val();

    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var myLatLng = results[0].geometry.location.LatLng;

            var mapOptions = {
                center: myLatLng,
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

            var marker = new google.maps.Marker({
                position: myLatLng,
                map: map,
                title: $("#Name").val() + " Location"
            });
        }
        else {
            alert("The location of the event could not be mapped because: " + status);
        }
    });
} 
```

但无论出于何种原因，它都没有被调用。我误解了这个`onload`事件吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T21:38:56.390

`onload`不会为`<div>`元素触发。

您可以对`document`or执行此操作`body`，或者在 . 之后立即调用脚本的不太理想的方式`<div>`。

```
<div id="map_canvas" style="width: 500px; height: 400px;"></div>
<script>
 mapAddress();
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:57:29.633

[onload 仅受以下 HTML 标签支持](http://www.w3schools.com/jsref/event_onload.asp)：

```
<body>, <frame>, <frameset>, <iframe>, <img>, 
<input type="image">, <link>, <script>, <style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:38:28.680

不要将`onload`处理程序附加到`<div>`元素，只是`<body>`元素。

将其直接放在全局对象 ( `window`) 上的好地方：

```
window.onload = function () {
  // your code
}; 
```

将`onload`处理程序放在 a`<div>`上没有意义，因为元素在解析并添加到 DOM 树后立即“加载”。

# javascript - 使用客户端代码从父 ascx 控件中查找 gridview

> ID：13039655
> 
> 赞同：0
> 
> 时间：2012-10-23T21:34:03.333
> 
> 标签：javascript, asp.net

我有一个用户控件调用 parent.ascx，我在 child.ascx 中加载。在子控件中，我有一个 gridview，我想使用父 ascx 控件中的 javascript 访问它。我正在使用以下代码，但没有找到它。有什么帮助吗？

```
 var grid = document.getElementById("<%= child_grdrisk.ClientID %>");

   alert(grid.rows.length); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:24:49.443

您可以像这样获得 nr 行：

```
var rowsCount = <%=child_grdrisk.Rows.Count %>; 
```

或者您可以将 nr 行存储在隐藏字段中并从中获取 nr 行：

```
hiddenField1.Value = child_grdrisk.Rows.Count.ToString();

var rowsCount = document.getElementById('<%= hiddenField1.ClientID %>'); 
```

或者你可以使用 jQuery：

```
var rowsCount = $("#<%= grdrisk.ClientID %> tr").length; 
```

# c# - 在应用程序中获取页面完整 URL？

> ID：13039656
> 
> 赞同：0
> 
> 时间：2012-10-23T21:34:07.517
> 
> 标签：c#, asp.net, .net, vb.net

一个要求是获取页面url，基本上我需要获取页面所在目录的完整URL。

如果是 www.domain.com/page.aspx，我需要 www.domain.com/，如果是 www.domain.com/TestApplication1/Page.aspx，我需要 www.domain.com/TestApplication1/

为此，我尝试了：

```
Request.Url.DnsSafeHost.ToString() 
```

我之前使用的另一个构建完整 URL 的代码是：

```
Dim currenturl = HttpContext.Current.Request.Url
Dim url = String.Format("{0}://{1}{2}", currenturl.Scheme, currenturl.Host, VirtualPathUtility.ToAbsolute("~" + Response.RedirectLocation)) 
```

但是有一个问题，如果页面在应用程序中，它们就不能正常工作。

例如，它们适用于 www.domain.com/Page.aspx，但如果页面地址是 www.domain.com/TestApplication1/Page.aspx，它们就不能正常工作

我需要在第一种情况下 www.domain.com/ 和在第二种情况下 www.domain.com/TestApplication1/

请指导如何实现这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:42:09.743

为什么不从`/`字符串中找到的最后一个符号中获取 URL 并对其进行子串化呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:42:23.953

我假设您正在从当前正在执行的 Web 应用程序的上下文中运行此代码。如果是这种情况，那么这应该可以解决问题：

```
var pageSegments = Request.CurrentExecutionFilePath.Split('/');

var pageFolder = "/" + string.Join("/", pageSegments.Take(pageSegments.Length - 1)) + "/"; 
```

所以给定一个网址

```
/Test/SomeFolder/Test.aspx 
```

你应该回来

```
/Test/SomeFolder/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:41:07.003

用这个：

```
Public Function GetAppUrl() As String
   Dim uri As Uri = HttpContext.Current.Request.Url
   Dim baseUrl As String = uri.Scheme & "://" & uri.Authority
   If baseUrl.EndsWith("/") Then baseUrl = baseUrl.Substring(0, baseUrl.Length - 1)
   baseUrl &= HttpContext.Current.Request.ApplicationPath
   If Not baseUrl.EndsWith("/") Then baseUrl &= "/"
   Return baseUrl
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T01:25:20.300

查看[HttpRequest.ServerVariables 属性](http://msdn.microsoft.com/en-us/library/system.web.httprequest.servervariables%28v=vs.90%29.aspx)以访问[IIS 服务器变量](http://msdn.microsoft.com/en-us/library/ms524602.aspx)。您可以利用它来实现您想要做的事情：

```
string output = string.Empty;

    string httpHost = Request.ServerVariables["HTTP_HOST"];
    string url = Request.ServerVariables["URL"];

    string[] splitUrl = url.Split('/');

    for (int i = 0; i < splitUrl.Length -1; i++)
    {
        if (splitUrl[i].Length > 0)
        {
            output += string.Format("/{0}", splitUrl[i]);
        }
    }

    string ssl = "http://";

    if (Request.ServerVariables["HTTPS"] == "off")
    {
        ssl = "https://";
    }

    output = string.Format("{0}{1}{2}/", ssl, httpHost, output); 
```

样本输出：

```
http://localhost:60454/WebSite1/Folder/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T21:57:54.130

```
Uri uri = new Uri(Request.Url.ToString());
string[] segments = uri.Segments;
string result = string.Format("{0}://{1}",uri.Scheme, uri.Host);
segments.ToList().ForEach(s =>
                             {
                                if(s!= segments[segments.Length-1])
                                     result += s;
                             }); 
```

您会发现分配给变量的预期结果`result`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T22:15:15.997

尝试这个：

```
 Dim pos As Integer = Request.Url.AbsoluteUri.LastIndexOf("/")
    Dim url As String = Request.Url.AbsoluteUri.Substring(0, pos + 1) 
```

# javascript - javascript：无法获取属性的值

> ID：13039659
> 
> 赞同：1
> 
> 时间：2012-10-23T21:34:16.277
> 
> 标签：javascript

如你看到的：

[![](../Images/8bf96222f4f92e2c0e0b7532f38b7208.png)](https://i.stack.imgur.com/xr7Fi.png)

`t`是一个对象，但如果我投`t.datamax`- 我得到`undefined`：那是什么，以及如何处理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:38:26.887

你有一个数组。使用索引`0`。

```
t[0].datamax; 
```

# php - Base 64 字母表中的正斜杠导致生成哈希的问题

> ID：13039662
> 
> 赞同：0
> 
> 时间：2012-10-23T21:34:20.830
> 
> 标签：php, objective-c, json

我正在构建一个库来与驱动我们的 iPad 客户端的后端进行通信。

所有请求的基本结构是：

```
{
    "metaData":{ JSON Object that is not important for this question },
    "requestData":
        {
            "nonce":"random string",
            "params":"JSON string containing request data"
        }
     "checksum":"hash of JSON string representing value of requestData",
     "connectionString":"someIdentifier"
} 
```

对于我遇到问题的特定情况是 requestData 具有以下结构：

```
{
    "requestData":
        {
            "nonce":"random string",
            "params":
                "{\"userId\":1,\"formData\":\"encrypted string, then Base 64 encoded on iPad\"}"
        }
    "checksum":"hashed value of string representation of requestData"
} 
```

`NSLog`用于生成校验和的字符串（由 打印）的示例是：

```
{"params":"{\"groupId\":3,\"formData\":\"SExvR0J1ZkJSQkhObU5xZkiEXdBede2moVN3LtMDZlxcXYVj7Uz!BFdiQC9SwxIhrrcGv2GtWJzjqMhHzdFDZW568tbnLTKQ9931efrpjtvqlK9mudInXj0FQdBLY0M6f9zBlLu6TcQ7sA6AD15DF0HyUPIi4fnc90ZV7omGqRpyI412aGSpDPJEbCUBSY5WMUFJqRstyK1+Qo0vmN8uMprztDIyEFufP24DHHtYZHVAic8Sg8CxbsUTTYDgDc!0ASQwahEgy1sWkMP!BVpK8VU7quXDdIJrxbSNL7OO4tsJrHIXyhhK7ZUNKMaZX+fBSdw6DbNtTM86K0X4NSRXPVLE0EAklAJ2OpMDBsoz9k!jhCba5gRXY7r48USpsMyyj1v8SsDKn58FsvDxsdCrPY77KmIX3Icy!n3iA!lBfc3ol6c90wkwPSqNvnO7uRDYrfbP1c0zRYSXbLTQvHLLdfAWKariCKtNg6YAXNfgQ6lWFRXce8flHgUz6E7rkt9tjc9i4K+EjcL10H+E3AGkidYPGtQOm1vey!M8oineM!Cgg3VcvNCv!yN90iq3T+tqI0ivvBnh+1aCw2H90tnNm8Gi+XCrIdhORN3QjSkkNbpfoSCLoIkuBmXlNuTskaJ4nnV3kHrmU!4hYMeZIIZ8OnZWPpU47xJi!kh3MDdI2c+WorT+y+M5XwcQO6jGv3tXyRVBy!ne+sSnU!InISm7x1VQjJLmjULMnqxRDoZatBsofxICJysEUaDJvgwZasMJpQk1zyrPraBWBJ0lVVaWhH5OTi6U0!hHNVs5Xf+H23JxmPpUNWqNvsAGfnTfY!kSoiLoSxEocICK8zsJFMc69101DNAanayf!MjFFDeFRlzpKhcRON7cxDfvBdSoc9hL1lcMzFbLemrL1w8jNNMfKlY7QDZ5ebOERJMjY0!o8znlxOa0ViuJ++O7+QrT!mGdSQYGh3NJ3MK1IdJkXuFpY!guyXOgohTsqcD0DZSk84OsI76L18snFvs4qMHw9SUf3l0jWPxbTYimmlM3DVUR7Sn7xOsGmQGcwpGK1tinlIDA+w8Ci+CLWESsjZ5QDQCr\",\"internalFormId\":\"MTN13511759141\",\"userId\":1,\"code\":\"\",\"_queuedSubmission\":false,\"groupName\":\"LDMAdmin\",\"saleType\":\"1\",\"formTableName\":\"myTableName\",\"emailName\":\"default\"}","nonce":"XqfK9Nxwuggw4m"} 
```

当我检查服务器日志时，我发现设备上生成的校验和不等于服务器上生成的校验和（在 PHP 中，区分大小写不是问题），因此身份验证失败。

失败的结构的一个例子是：

```
PageManager.m - 905 -> Final Request:
{
    "checksum":"9D51170D1510C4081936870D11E96C869DB26B895393B9C14B2A6BC3C1F10F23",
    "connectionString":"testBed",
    "metaData":
        {
            "accessToken":"myAccessToken",
            "appId":"myAppID",
            "deviceId":"1X:1X:1X:1X:1X:1X",
            "groupId":3,
            "groupName":"LDMAdmin",
            "timestamp":1351018002.780379,
            "userId":1,
            "useragent":"iPhone OS",
            "username":"admin"
        },
    "requestData":
        {
            "nonce":"1iezcBdjbE",
            "params":"{\"groupId\":3,\"formData\":\"Tnh3dWdndzRtRmdxSFNmN/NXCIQSukpx3+mhmbNQh0PTGbLlEFoDinyrq3wRJGZ+8sQ/+xcjS4cU7evluipxqQDZIOvp4ZcoDnxTPeqBZJrG/bq5FHR6PVCYK2DaLHfj025z/H3RM8dUEoWcrTLqSUcW+E7Mfl8ZCApqJMxSa8eYYqLT7tm7r1SC+bjXNOQZLTC2laFhihQ5hLKqFFnO/z3AlUYAAUhKKD1lWIipnJUUNoyHdWuuOobMSS1ZZP5f5f+RTFsmGZUDe6qX6h2cjIQ2+VGPIsP//gqwO4iDx/FdHD+xrjCyEgL2Va/m/Z+ANxCr3DN2o2Jnwg8B8QycFN2tGrgusseAgoa9Ng9LRgooZW+KuECWDhorHzvuv2rOlhOskymj4XTu8890ZMJbcr1Ic6zwztm82R1qKaoy1o6gIbUNtVZFSqUlP8TO7mWHKr3Y8Awn7ih9HzSOg1486EDL4OjfOR9J2pw1jbK7ZJb7LxzrWFgoyrwDBAw3q7PrV4Ml9ngI6oXOh3veAq/wulyBOdF46n7evqIkAKg4FYdvzmFKd2bgOpxwBlAI7vL2IiC4v8GXI5977SkPPEKUZHXWmfrgr/VzF79gIxJDqV9N0ceAcgY8bWbBXf7DLd9H82obFa60yZBo5/MBjq9SNuD08vJEEauVGs4wfDr9+xzsr3z+plqxAejODdxKfF48Ra21L8Xozozv5papTP9cpGVU11mCWj+no5gtM0VQKRB7IQcpDWjQgQyThN2aoE06ecA2gY5SSXN0XHVRw5OKM0/rlNIuMiqow5wqHLl41IzDSF2HuJKj06Lv8t5CLLOd9rkOjYw6w8SrbsZeG5jwagJkyQ0UuKu+PIoIc2DJnUWDC5iqlb0TO9nPDNFKad+MYlfgDR0CxR+3ddkqWNBNSW5rsh5QZDlJHDjhQFLkuqiiRAnMvKOcbqAnXIZ9EuAo/DkcmtGPHkEyEaA2cb3mXysBP49jhY0m/qinloza+j3d7Kb/Fu35U929fOxH6+W+5oZv/r+a9KvkDhPoRwiFouVwTtTOwbjVDT+NEg2OUfDaEYbQ/RbM7i6X+XjSkZMLYsRs1Q9CwdBabY860uBNFQ==\",\"internalFormId\":\"MTN13510178111\",\"userId\":1,\"code\":\"\",\"_queuedSubmission\":false,\"groupName\":\"LDMAdmin\",\"saleType\":\"1\",\"formTableName\":\"myTableName\",\"emailName\":\"default\"}"
        },
    "url":"http://myurl.com/myAction"
} 
```

它`formData`是通过创建`JSON`所需数据的字符串、加密该字符串并将生成的`NSData`对象编码为 base 64 字符串来生成的。是通过获取表示值的字符串的`checksum`哈希值（使用 SHA256）生成的。`JSON``requestData`

`requestData`转换为 JSON 字符串，并使用以下内容进行哈希处理：

```
+(NSString *)hmacSHA256:(NSString *)string withKey:(NSString *)key {
    NSString *hash = 0;
    NSData   *hmac = 0;

    NSMutableString *temp = [[NSMutableString alloc] initWithString:@""];

#ifdef DEBUG
    NSLog( @"%s - %d -> Values:\nString:  %@\nKey:  %@", __FILE__, __LINE__, string, key );
#endif

    const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
    const char *cData = [string cStringUsingEncoding:NSASCIIStringEncoding];

    unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];
    unsigned char *digest;
    unsigned int  dLength;

    CCHmac( kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC );

    hmac = [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];

    digest  = (unsigned char *)[hmac bytes];
    dLength = hmac.length;

    for ( int i = 0; i < dLength; ++i )
        [temp appendFormat:@"%02X", digest[i]];

    hash = [[NSString alloc] initWithString:temp];

    return hash;
} 
```

PHP 脚本使用 stock 函数来生成哈希：

```
protected static function _generateChecksum($data, $key, $output)
    {
        $jsonData = json_encode($data);
        log_message('error', 'encoded string is: '.$jsonData);
        $checksum = hash_hmac('sha256', $jsonData, $key);
        //log_message('error', 'Checksum pre encode: '.$checksum);
        // if($output == true)
        // {
        //     $checksum = base64_encode($checksum);
        // }
        return $checksum;
    } 
```

哈希值与请求中发送的哈希值进行比较。

服务器日志示例：

```
ERROR - 2012-10-23 21:31:16 --> Encoded Checksum recieved is: 14F03A1DCAEA9DBBC7EC8CA1D666D89C391760AA246C91B52164D526AC83E5E5
DEBUG - 2012-10-23 21:31:16 --> Model Class Initialized
DEBUG - 2012-10-23 21:31:16 --> Model Class Initialized
DEBUG - 2012-10-23 21:31:16 --> Database Driver Class Initialized
ERROR - 2012-10-23 21:31:16 --> encoded string is: {"params":"{\"groupId\":3,\"formData\":\"SE5tTnFmWHFmSzlOeHd1ZyYzHN9y\/aJSbsqEn6X1TypGwWcXtXGpW4ODrCDVwZyIjhq3oOeZ4C6hGCDFGqHsa5hhNXxeerWLG5SyvfksCTG1+GCvWFwMx0CzZwOAfJRwSoCBCaeZ\/pivs3dHQS22SEbWn6+2e2vayeap7mxvZZw9Jrl\/c4dGFAiNqQB5pQbNO661AqbJWDAHCS8EWBhXXsd0SbTHlZAip4H0MdlF2rnElCVfHlc01RcuJNXLF3NJvfjY9m4sXmI3BAED0c0C\/i0Uw2M6pe4iDJv\/OvOI0NVS8RKbRbjhTo3oktAmNttfKTG6xp0wMhbANppuoo4QY3XwQ5BKUjqhmr5kx8j0RTmebcTCmxsC9h1dqjHYnf1JnZDFATkVsKnn\/Ela1wSjhGL7uP6jl3r4xDGKGPWDj0E3iAPNN56pmJxzyQrHOOqUzGbmvU3qj7Ul039IGYZTzn74VUkWi3JsxJH+kU9iWSvuC+YoOHcf\/0OFn1PqBoDHjDTbN+3HV8wwSqrVFJ6z9RX4MwRfffVgKl8xL2hHqBnegjvyd65KbZbSd\/3OrEBeL0dAjuARiPioNTpjzwga4chFRA471gweLT+cKweZBXZMYll36sNqulIBzbCmqbndDk63Id9iSrs9\/fQVWUA7RJDudnAxvQPs8gTznp9Dz1SomyY4ONYrJ9EticAEnUEjF2sCdejYlgu61a3Zss19m+MzgEhxkwmRwttsRbFfNK44wP\/wB2FgdfjsY94nHpJ+6lPEZtRmWpYtNVxQMVC6mMde6CbSEem71byIiN424baPImtNIfF+bKl6BKxyEl7BhI3z25NXaKyfaflzxGY8Yvdg0f73SfT3omPP3KxdudFgJrQ6eiO2AXt5L6lPjezjRr17R6hTUNmYwvZ3C5S0zoY7ynmCHebeiNlavVepUBkn0Iu6w\/qKDJ5wr80n7XX3EXuo1ODCC5aCjOSr+gSS9eVm0\/IBQNF\/ec4kjI29LRyrOFOS\/2poHY9XzyagVURiwi101a0yPETRRsC8n4B\/XFmOFQ0VcCQNgTuXute52fsccxB3DkV7ixBbQ8mt6o2XDWGk2HnrDwmRuNX87rBHow==\",\"internalFormId\":\"MTNC13510277491\",\"userId\":1,\"code\":\"\",\"_queuedSubmission\":false,\"groupName\":\"LDMAdmin\",\"saleType\":\"1\",\"formTableName\":\"myTableName\",\"emailName\":\"default\"}","nonce":"gw4m"}
ERROR - 2012-10-23 21:31:16 --> Encoded Checksum expected is: 8d999d76e48907905e701da3ccdbccb4061d05ed5a7c18b58507b6e6352fb1f5 
```

但是，应用程序的其他组件使用相同的结构（减去 base 64 编码）的行为与设计和预期的一样。`checksum`使用与上述示例相同的方法和密钥生成。例子：

```
{
    "requestData":
        {
            "nonce":"random string",
            "params":"{\"latitude\":37.7,\"longitude\":-122.4}"
        }
    "checksum":"hashed value of the string representation of requestData"
} 
```

我不知道为什么服务器上的 PHP 脚本会在上述失败的情况下生成不同的哈希值。有没有人遇到过这种类型的问题？

**更新：**

我`SBJson`用于将我的数据结构编码和解码为 JSON 字符串（[链接](http://stig.github.com/json-framework/)）。

**更新 2：**

根据迄今为止发生的讨论，不能保证 JSON 对象（或者在我的情况下是`NSDictionary`）被序列化为`JSON`字符串的顺序。但如果是这样的话，我不明白为什么在以明文形式发送数据的情况下，在服务器上生成相同的哈希值，而在某些数据是 base 64 字符串形式的情况下，不同的哈希值是在服务器和客户端之间生成。

唯一的解决方案（可能不是正确的解决方案）是`/`从 base 64 字母表中删除（我将其替换为`!`）。我很确定这会在尝试解码服务器端的字符串时引起问题。

在这一点上，我想了解正斜杠如何导致此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:31:56.620

它是编码表中的正斜杠，不知何故，这在 php 代码中生成哈希时导致了冲突。

我的 Objective C 代码中的原始表：

```
//64 digit code
static char Encode[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"; 
```

我不得不替换为：

```
//64 digit code
static char Encode[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+!"; 
```

这可能只是一个临时解决方案，因为[这个 SO 答案](https://stackoverflow.com/a/12631056/620197)指出正斜杠在 base 64 编码字符串中是可以接受的。只需替换正斜杠即可解决现在的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:39:55.323

没有“代表某某的 JSON 字符串”**之类的东西。**如果您在内存中有一个数据结构并在其上使用您平台的默认 JSON 序列化程序，您无法保证它会生成与另一个平台的默认 JSON 序列化程序相同的字符串——甚至无法保证它会生成与 JSON 序列化程序相同的字符串您使用将在明天或闰年的星期五生产。

JSON 为序列化程序在放置空格的位置、如何格式化数字、发出对象字段的顺序等方面提供了相当大的自由度。它不能用作散列底层抽象数据集的基础。

# google-apps-script - 添加“图表”工作表的脚本

> ID：13039664
> 
> 赞同：2
> 
> 时间：2012-10-23T21:34:30.837
> 
> 标签：google-apps-script, charts, google-sheets

在 Google 表格中，可以将图表移动到自己的表格中，我想以编程方式做同样的事情，这是我的代码：

```
 var sheet = SpreadsheetApp.getActiveSheet(),
      spreadSheet = SpreadsheetApp.getActiveSpreadsheet(),
      rows = sheet.getDataRange(),
      numRows = rows.getNumRows(),
      values = rows.getValues();
  // ....
  var pos = values[i][0],
    name = values[i][1],
    avg = values[i][13],
    range = sheet.getRange("C" + i + ":M" + i);
  // ....
  var chart = sheet.newAreaChart()
      .setPosition(1, 1, 10, 10)
      .setChartType(Charts.ChartType.BAR)
      .setOption('title', name)
      .addRange(range)
      .build();
  spreadSheet.insertSheet(name).insertChart(chart); 
```

我怎样才能做到这一点？

编辑：

在这里更清楚的是我的脚本做了什么：

![在此处输入图像描述](../Images/9344d3af0c520ef9a3bd920f7a00b9b9.png)

这就是我想要它做的事情：

![在此处输入图像描述](../Images/d0e25bfb6f3c3d7b521b1fb05f5d1bc8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:12:13.977

目前没有这样的方法。当您运行时，他们的工作表上的图表甚至不会显示

```
spreadsheet.getSheets(); 
```

起初，这让我对我的一些剧本感到厌烦。但是，如果您可以通过编程方式创建图表，那么您可以在小工具中创建它并在站点上显示它。某些类型不能使用 GAS 进行编辑（即组合图表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:54:18.980

我不认为有一种方法可以一步以编程方式将图表移动到自己的工作表中，但您可以使用以下方法来完成：

```
var sheet = SpreadsheetApp.getActiveSheet();
var charts = sheet.getCharts();
sheet.removeChart(charts[0]); // move first chart to another sheet

var newSheet = SpreadsheetApp.getActiveSpreadsheet().insertSheet();
newSheet.insertChart(charts[0]); 
```

# actionscript-3 - 随机生成的平方地板

> ID：13039669
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:34:55.980
> 
> 标签：actionscript-3, flash, actionscript

我正在制作一个随机生成的地板，但是当影片剪辑在其上行走时，它的行为似乎就像一块巨大的地板，影片剪辑在其上方行走，而不是跟随图像，这是代码：

```
import flash.display.Sprite;
import flash.display.MovieClip;
import flash.events.Event;

//variables

var h:Number = 360;
var floor:MovieClip=new MovieClip;
var guy:MovieClip=new MovieClip;
var gravity=10;

guy.graphics.beginFill(000000);
guy.graphics.drawRect(100,100,15,25);
guy.graphics.endFill();
addChild(guy);//guy creation

//floor generation
for (var i:int=0; i<600; i++)
{

    if (h==360)
    {
        if (Math.random() <= 0.75)
        {
            floor.graphics.beginFill(000000);
            floor.graphics.drawRect(i,h,40,40);
            floor.graphics.endFill();
            addChild(floor);
            i +=  39;
        }
        else
        {
            i +=  39;
        }
        if (i>550)
        {
            h = 320;
            i = 0;
        }
    }
    if (h==320)
    {
        if (Math.random() <= 0.75)
        {
            floor.graphics.beginFill(000000);
            floor.graphics.drawRect(i,h,40,40);
            floor.graphics.endFill();
            addChild(floor);
            i +=  39;
        }
        else
        {
            i +=  39;
        }
    }
}

//listeners doesnt matter
addEventListener(Event.ENTER_FRAME,misc);
addEventListener(KeyboardEvent.KEY_UP,checkup);
addEventListener(KeyboardEvent.KEY_DOWN,checkdown);

//functions

var leftarrow:Boolean=false;
var rightarrow:Boolean=false;

function checkdown(a:KeyboardEvent)
{
    if(a.keyCode==37)leftarrow=true;
    if(a.keyCode==39)rightarrow=true;
}

function checkup(a:KeyboardEvent)
{
    if(a.keyCode==37)leftarrow=false;
    if(a.keyCode==39)rightarrow=false;
}

function misc(a:Event)
{
    guy.y+=gravity;

    if(guy.hitTestObject(floor))
    {
        gravity=0;
    }else{gravity=10;}

    if(leftarrow)guy.x-=5;
    if(rightarrow)guy.x+=5;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:10:35.593

该函数`hitTestObject`评估两个实例的[边界框。](http://en.wikipedia.org/wiki/Minimum_bounding_rectangle)`DisplayObject`您的角色滑过地板上的孔和坑，因为边界框封装了这些孔和坑。

检测凹面形状上的碰撞很困难。您可能会更轻松地用几个凸形（而不是单个凹形）构建地板并`hitTestObject`在每个上使用。

```
var blocks:Array = [ ];

for (var i:int = 0; i < 10; i++)
{
    // Add a convex floor block to blocks.
}

...

gravity = 10

for each (var block:DisplayObject in blocks)
{
    if (guy.hitTestObject(block))
    {
        gravity = 0;
        break;
    }
} 
```

# java - Apache CXF 动态客户端创建

> ID：13039670
> 
> 赞同：5
> 
> 时间：2012-10-23T21:34:56.807
> 
> 标签：java, cxf

我正在尝试使用 Apache CXF 与未知的 Web 服务通信。我遵循了Apache 的[动态客户端示例](http://cxf.apache.org/docs/dynamic-clients.html)。

```
 JaxWsDynamicClientFactory factory = JaxWsDynamicClientFactory.newInstance();
    Client client = factory.createClient(wsdlURL.toExternalForm(), SERVICE_NAME); 
```

这是有效的，但现在我在调用 createClient() 时遇到了这个异常：

```
 java.lang.IllegalStateException: Unable to create schema compiler
    Caused by:
     javax.xml.bind.JAXBException
     - with linked exception:
     [java.lang.ClassNotFoundException: com/sun/tools/internal/xjc/api/XJC] 
```

这看起来类似于[现有的错误](https://issues.apache.org/jira/browse/CXF-2339)。我正在使用 DOSGi singlebundle 1.2，其中包括 cxf-minimal-2.2.9.jar；这意味着该错误应该在我正在使用的版本中修复。jaxb-api 包含在我的 Apache CXF 发行版中，经检查包含 jaxb-xjc。

任何人都可以向我提供一些关于我做错了什么的见解吗？我发誓这曾经有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T13:23:51.040

“java.lang.ClassNotFoundException: com/sun/tools/”如果您在 IDE 中使用 JRE 而不是 JDK，通常会发生。确保您在 IDE 中使用 JDK（例如 eclipse）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-30T16:47:35.303

```
<dependency>
   <groupId>com.sun.xml.bind</groupId>
   <artifactId>jaxb-xjc</artifactId>
   <version>2.2.11</version>
</dependency> 
```

已解决的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T19:44:01.910

另一种解决方案是在 Maven 依赖项中包含 cxf-rt-core。

# android - 安卓数组列表 >

> ID：13039678
> 
> 赞同：0
> 
> 时间：2012-10-23T21:35:33.330
> 
> 标签：android, android-intent, arraylist, hashmap, parcelable

我想将数据从活动传递到服务。目前我正在尝试使用`ArrayList<HashMap<String, String>>`. 我有哪些选项可以将其传递给服务？我正在考虑将其作为额外数据放在意图中，但我不知道该怎么做。或者是否有可能将此设置为某种全球性的？

目前它被设置为活动的静态，并且服务正在回调活动以提供来自 ArrayList 的下一个项目。我对它的工作方式不满意，所以想将列表移到服务中。

编辑

针对以下提出的问题：

我正在尝试将播放列表（是的，另一个媒体应用程序）传递给服务。播放列表`ArrayList<HashMap<String, String>>`包含配对的歌曲信息，例如“songTitle”、“这是一个标题”。

但是，我认为我对应用程序的生命周期感到困惑。当用户点击播放时，服务被创建。如果我对列表使用静态，则在创建服务时它会看到该列表。因此，该服务将愉快地继续播放此列表中的歌曲。但是，如果用户更改文件夹等，我如何让应用程序识别播放列表中的更改？应用程序的设计方式，用户可以随时取消选中列表中的曲目，也可以浏览到不同的文件夹。当歌曲完成时，应该加载新列表。最好的方法是什么？还是我现在做的方式是最好的方式？当歌曲完成时，将广播发送回请求下一首曲目的主要活动。我应该在此时销毁服务并允许“下一首歌曲”功能重新创建它吗？

生命周期混乱！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:09:32.687

您是否考虑过将数据存储在数据库中并简单地发送数据已更改的意图？还是使用 ContentProvider 来“自行”发出数据已更改并需要重新加载的信号？这样即使应用程序意外关闭，您也不会使用状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:42:47.290

`ArrayList`和`HashMap`implement `Serializable`，因此您应该能够将结构填充到 Intent 中，并使用Intent.getSerializableExtra [()](http://developer.android.com/reference/android/content/Intent.html#getSerializableExtra%28java.lang.String%29)检索它。

从您的活动中，您需要做的就是调用[Intent.putExtra(String name, Serializable value)](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.io.Serializable%29)重载。

根据经验，如果可能，请尽量避免在应用程序中使用静态变量。当您的应用程序被操作系统关闭然后重新创建（即从最近的应用程序列表中）时，它们会变得很棘手。

# jquery - 动态添加选择时的jQuery验证错误

> ID：13039688
> 
> 赞同：2
> 
> 时间：2012-10-23T21:36:11.037
> 
> 标签：jquery, validation

我有一个表单，当有人希望（例如）向家庭“添加另一个成年人”时，动态添加 HTML 块。

我希望每个字段都有一个唯一的名称，所以我使用了一个计数器：第一个成人的名字字段是“firstName1”，第二个是“firstName2”，依此类推。

因为我想向字段添加自定义消息（并且 Validate 插件没有 messages() 方法），所以我试图在将 HTML 添加到 DOM 后立即添加规则。

这适用于文本输入，但会引发选择元素错误——“TypeError: d is undefined”。

例如：

```
$("input[name='city" + counter + "']").rules("add", {required:true, messages: {required:"Please enter a city."
}}); 
```

... 工作正常。但 ...

```
$("input[name='state" + counter + "']").rules("add", {required:true, messages: {required:"Please enter a state."
}}); 
```

...标识一个选择框，引发错误。

行为是一致的。添加了几个选择，并且以上面显示的方式向其中任何一个添加规则都会引发错误。

我会提到所有选择框都有一个值为“”的初始选项，因此所需的验证应该可以正常工作。

但当然，它永远不会有机会。添加规则时会引发错误。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:44:26.383

对于选择，您应该使用`select[name=foo]`而不是`input[name=foo]`：

```
$("select[name='state" + counter + "']").rules("add", {required:true, messages: {required:"Please enter a state."
}}); 
```

# ios - ios 在部分屏幕上显示视图和视图控制器

> ID：13039689
> 
> 赞同：0
> 
> 时间：2012-10-23T21:36:14.033
> 
> 标签：ios, uiviewcontroller, uitableview, instagram

我有一个我正在努力解决几天的错误。我基本上想制作一个像 Instagram 一样的个人资料。

![Instagram 用户资料](../Images/d401d22c3e3159be9468a8e89b31a1fb.png)

当您单击上部“标签栏”中的前两个按钮之一时，内容将显示在下部。屏幕的上半部分保持不变。我有一些 UIViewControllers 和一些 UITableViewController。我有 5 个按钮来显示视图控制器。我的问题是我可以显示一个 tableviewcontroller 但是如果我尝试显示第二个然后返回到第一个，例如，它会卡在我显示的最后一个。我希望这足够清楚。这是显示视图控制器的代码。

```
- (IBAction)wallButtonPressed:(id)sender
{
    if(!_userWallViewController) {
        self.userWallViewController = [[WallViewController alloc] init];
        self.userWallViewController.activityFeedTableView.bounds = self.containerView.bounds;
    }

    [self.currentViewController.view removeFromSuperview];
    [self.currentViewController removeFromParentViewController];
    self.currentViewController = self.userWallViewController;
    self.userWallViewController.searchURLString = [NSString stringWithFormat:@"/event/user/%@", self.userID];
    self.userWallViewController.containerView = self.containerView;
    [self.containerView addSubview:self.userWallViewController.view];
    [self addChildViewController:self.userWallViewController];
    [self.userWallViewController.view setNeedsDisplay];
    [self.userWallViewController viewWillAppear:YES];
} 
```

containerView 是一个占据整个屏幕下部的 UIView。currentViewController 是一个占位符 viewController，而 userWallViewController 是一个 UITableViewController。

非常感谢任何形式的帮助。这是一个真正的窃听情况。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:36:27.400

我犯了一个愚蠢的错误，很难识别 @Matt 的建议有帮助。

```
[self.fanOfViewController.containerView addSubview:self.fanOfViewController.userSimpleTableView];

[self.currentViewController.view removeFromSuperview];
[self.currentViewController removeFromParentViewController];

self.fanOfViewController.containerView = self.containerView;
[self addChildViewController:self.fanOfViewController];
[self.containerView addSubview:self.fanOfViewController.view];

//CLEAN UP THE CONTAINER VIEW BY REMOVING THE PREVIOUS ADDED TABLE VIEWS
[self.userWallViewController.activityFeedTableView removeFromSuperview];
[self.userFansViewController.userSimpleTableView removeFromSuperview]; 
```

每次我通过按下相应的按钮从它的视图控制器添加一个新的 tableView 时，我都将它堆叠在当前的视图容器中。当我试图从层次结构中删除相应的 viewController 然后再次添加时，没有调用 viewDidLoad 方法（它只是第一次调用）。那是我删除tableView的逻辑的地方。

现在我也在按下按钮时添加它，并从“堆栈”中删除其他 tableViews。这可能不是最好的方法，但我确实计划对其进行优化。我希望这足够清楚，并且可以帮助遇到此问题的任何人。

# python - 我如何让 momoko 工作？

> ID：13039690
> 
> 赞同：0
> 
> 时间：2012-10-23T21:36:16.577
> 
> 标签：python, mysql, tornado

我是 python 的新手，甚至是 tornado/momoko 的新手。我正在努力[学习 momoko 网站](https://github.com/FSX/momoko/blob/master/examples/gen_example.py)上的一个例子。我使用我的设置配置了 database.cfg 文件。

```
#!/usr/bin/env python
import tornado.httpserver
import tornado.ioloop
import tornado.options
import tornado.web
from tornado import gen
import momoko
import settings

class BaseHandler(tornado.web.RequestHandler):
    @property
    def db(self):
        return self.application.db

class OverviewHandler(BaseHandler):
    def get(self):
        self.write('''
<ul>
<li><a href="/query">A single query</a></li>
<li><a href="/batch">A batch of queries</a></li>
<li><a href="/chain">A chain of queries</a></li>
<li><a href="/multi_query">Multiple queries executed with gen.Task</a></li>
<li><a href="/callback_and_wait">Multiple queries executed with gen.Callback and gen.Wait</a></li>
</ul>
''')
        self.finish()

class SingleQueryHandler(BaseHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):
        # One simple query
        cursor = yield gen.Task(self.db.execute, 'SELECT 42, 12, %s, 11;', (25,))
        self.write('Query results: %s' % cursor.fetchall())
        self.finish()

class BatchQueryHandler(BaseHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):
        # These queries are executed all at once and therefore they need to be
        # stored in an dictionary so you know where the resulting cursors
        # come from, because they won't arrive in the same order.
        cursors = yield gen.Task(self.db.batch, {
            'query1': ['SELECT 42, 12, %s, %s;', (23, 56)],
            'query2': 'SELECT 1, 2, 3, 4, 5;',
            'query3': 'SELECT 465767, 4567, 3454;'
        })

        for key, cursor in cursors.items():
            self.write('Query results: %s = %s<br>' % (key, cursor.fetchall()))
        self.finish()

class QueryChainHandler(BaseHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):
        # Execute a list of queries in the order you specified
        cursors = yield gen.Task(self.db.chain, (
            ['SELECT 42, 12, %s, 11;', (23,)],
            'SELECT 1, 2, 3, 4, 5;'
        ))

        for cursor in cursors:
            self.write('Query results: %s<br>' % cursor.fetchall())
        self.finish()

class MultiQueryHandler(BaseHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):
        cursor1, cursor2, cursor3 = yield [
            gen.Task(self.db.execute, 'SELECT 42, 12, %s, 11;', (25,)),
            gen.Task(self.db.execute, 'SELECT 42, 12, %s, %s;', (23, 56)),
            gen.Task(self.db.execute, 'SELECT 465767, 4567, 3454;')
        ]

        self.write('Query 1 results: %s<br>' % cursor1.fetchall())
        self.write('Query 2 results: %s<br>' % cursor2.fetchall())
        self.write('Query 3 results: %s' % cursor3.fetchall())

        self.finish()

class CallbackWaitHandler(BaseHandler):
    @tornado.web.asynchronous
    @gen.engine
    def get(self):

        self.db.execute('SELECT 42, 12, %s, 11;', (25,),
            callback=(yield gen.Callback('q1')))
        self.db.execute('SELECT 42, 12, %s, %s;', (23, 56),
            callback=(yield gen.Callback('q2')))
        self.db.execute('SELECT 465767, 4567, 3454;',
            callback=(yield gen.Callback('q3')))

        cursor1 = yield gen.Wait('q1')
        cursor2 = yield gen.Wait('q2')
        cursor3 = yield gen.Wait('q3')

        self.write('Query 1 results: %s<br>' % cursor1.fetchall())
        self.write('Query 2 results: %s<br>' % cursor2.fetchall())
        self.write('Query 3 results: %s' % cursor3.fetchall())

        self.finish()

def main():
    try:
        tornado.options.parse_command_line()
        application = tornado.web.Application([
            (r'/', OverviewHandler),
            (r'/query', SingleQueryHandler),
            (r'/batch', BatchQueryHandler),
            (r'/chain', QueryChainHandler),
            (r'/multi_query', MultiQueryHandler),
            (r'/callback_and_wait', CallbackWaitHandler),
        ], debug=True)

        application.db = momoko.AsyncClient({
            'host': settings.host,
            'port': settings.port,
            'database': settings.database,
            'user': settings.user,
            'password': settings.password,
            'min_conn': settings.min_conn,
            'max_conn': settings.max_conn,
            'cleanup_timeout': settings.cleanup_timeout
        })

        http_server = tornado.httpserver.HTTPServer(application)
        http_server.listen(8888)
        tornado.ioloop.IOLoop.instance().start() # the problem lies here, I believe
    except KeyboardInterrupt:
        print('Exit')

if __name__ == '__main__':
    main() 
```

当我运行脚本时，我收到错误：

```
[E 121023 15:31:07 ioloop:337] Exception in I/O handler for fd 6
    Traceback (most recent call last):
      File "/usr/local/lib/python2.7/dist-packages/tornado/ioloop.py", line 327, in start
        self._handlers[fd](fd, events)
      File "/usr/local/lib/python2.7/dist-packages/momoko/pools.py", line 313, in _io_callback
        state = self._conn.poll()
    OperationalError: asynchronous connection failed 
```

我可以连接到网络服务器。如果我输入“http://localhost:8888/”，我会看到 5 个链接（即“单个查询”、“一批查询”等）。但是，当我单击一个时，我得到：

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/tornado/web.py", line 1021, in _stack_context_handle_exception
    raise_exc_info((type, value, traceback))
  File "/usr/local/lib/python2.7/dist-packages/tornado/stack_context.py", line 265, in _nested
    if exit(*exc):
  File "/usr/local/lib/python2.7/dist-packages/tornado/stack_context.py", line 161, in __exit__
    return self.exception_handler(type, value, traceback)
  File "/usr/local/lib/python2.7/dist-packages/tornado/gen.py", line 114, in handle_exception
    return runner.handle_exception(typ, value, tb)
  File "/usr/local/lib/python2.7/dist-packages/tornado/gen.py", line 388, in handle_exception
    self.run()
  File "/usr/local/lib/python2.7/dist-packages/tornado/gen.py", line 343, in run
    yielded = self.gen.throw(*exc_info)
  File "/home/desktop-admin/Desktop/eclipse/workspace/jive_backend/test.py", line 35, in get
    cursor = yield gen.Task(self.db.execute, 'SELECT 42, 12, %s, 11;', (25,))
  File "/usr/local/lib/python2.7/dist-packages/tornado/stack_context.py", line 258, in _nested
    yield vars
  File "/usr/local/lib/python2.7/dist-packages/tornado/stack_context.py", line 228, in wrapped
    callback(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/momoko/pools.py", line 313, in _io_callback
    state = self._conn.poll()
OperationalError: asynchronous connection failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:40:13.650

`Momoko`是 的包装器`psycopg2`，而不是`mysql`.

使用 mysql 尝试使用[此页面](https://github.com/ovidiucp/pymysql-benchmarks)上列表中的内容：

*   [Twisted 的 adpapi](http://twistedmatrix.com/documents/10.1.0/api/twisted.enterprise.adbapi.html)
*   [txMySQL](https://github.com/hybridlogic/txMySQL)
*   [亚行py](https://github.com/ovidiucp/pymysql-benchmarks/blob/master/adb.py)

如果您使用的是 postgresql - 首先尝试以同步方式连接到它。

# performance - Google PageSpeed - 设置到期日期

> ID：13039691
> 
> 赞同：0
> 
> 时间：2012-10-23T21:36:18.793
> 
> 标签：performance, apache, caching, memcached, centos

我正在使用 CentOS 5 32 位，我刚刚在 Google 上扫描了我的网站以了解页面速度，它给了我以下信息：

“在静态资源的 HTTP 标头中设置过期日期或最长期限会指示浏览器从本地磁盘加载先前下载的资源，而不是通过网络加载。”

有人可以让我知道如何在我的 Apache 服务器中启用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:09:18.683

首先确保 mod_expires 已经加载，你可以在 httpd.conf 文件或 VirtualHost 里面定义如下：

```
 <IfModule mod_expires.c>
   FileETag MTime Size
   ExpiresActive on

   ExpiresByType application/javascript "access plus 1 week"
   ExpiresByType application/x-javascript "access plus 1 week"
   ExpiresByType application/x-shockwave-flash "access plus 1 week"

   ExpiresByType text/css "access plus 1 week"

   ExpiresByType image/jpg "access plus 1 month"
   ExpiresByType image/jpeg "access plus 1 month"
   ExpiresByType image/gif "access plus 1 month"
   ExpiresByType image/png "access plus 1 month"
   ExpiresByType image/x-icon "access plus 6 month"
   ExpiresByType image/ico "access plus 6 month"

   </IfModule> 
```

希望这可以帮助 ！

# html - 搜索文本字段和按钮高度/位置 (CSS)

> ID：13039692
> 
> 赞同：2
> 
> 时间：2012-10-23T21:36:33.910
> 
> 标签：html, css, height, search-box

我的搜索框有问题。我正在尝试使文本字段和按钮的高度相同，但我无法在所有浏览器中正确设置。这是代码：[http](http://codepen.io/anon/pen/ygCFz) ://codepen.io/anon/pen/ygCFz 。此方法在 Firefox 中运行良好，但在 Chrome 中不行。

那么，让文本字段和按钮具有相同高度和位置的最佳方法是什么？

谢谢！

//编辑：因为有人要求提供代码以供进一步参考，这里是：HTML

```
<form id="search" action="" method="get">
        <input type="text" name="search" class="sfield" value="search and go"/>
        <input type="submit" value="Search" class="sbutton"/>
</form> 
```

CSS

```
input.sfield{
  background-color:#fff;    
    border-color:#cecece;
    border-style:solid;
    border-width:1px 0 1px 1px;
    font-size:0.9em;
    line-height:1em;
    height:26px;
}

input.sbutton{
    background-color:#d91515;
    height:inherit;
    border:none;    
    color:#fff;
    position:relative;
    left:-6px;
    bottom:-1px;
    height:28px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:46:16.697

在输入元素上使用填充而不是高度。Line-height 应该与 Firefox 的 font-size 完全相同。因此，如果您希望字体大小为 16px，请将行高设置为 16px，并在顶部和底部添加填充。对于您的提交按钮，使用绝对定位以确保它位于顶部：0 和底部：0。只需在输入上添加与提交按钮宽度等效的 padding-left 就可以了！

```
#search {
    position:relative;
    display:inline-block;
}

input.sfield{
    background-color:#fff;  
    border-color:#cecece;
    border-style:solid;
    border-width:1px 0 1px 1px;
    font-size:0.9em;
    line-height:1;
    padding:5px;
    display:inline-block;
    padding-right:50px;
}

input.sbutton{
    background-color:#d91515;
    border:none;    
    color:#fff;
    position:absolute;
    top:0px;right:0px;bottom:0px;
    width:50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:46:58.490

您可以为这两个元素设置一个明确的高度属性，或者您可以简单地告诉 Sbutton 从 Sfield 继承样式。

```
<input type="submit" value="Search" class="sfield sbutton"/> 
```

我还添加了一些填充以使其均匀。

[http://codepen.io/anon/pen/zBlwD](http://codepen.io/anon/pen/zBlwD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:46:33.143

好吧，我希望解决方案不是这么简单，但是您`height`在类的规则中定义了两次`sbutton`：

```
input.sfield{
    background-color:#fff;  
    border-color:#cecece;
    border-style:solid;
    border-width:1px 0 1px 1px;
    font-size:0.9em;
    line-height:1em;
    height:26px;
}

input.sbutton{
    background-color:#d91515;
    height:inherit;  //that's one
    border:none;    
    color:#fff;
    position:relative;
    left:-6px;
    bottom:-1px;
    height:28px; //that's two
} 
```

看看当你摆脱一个时会发生什么。它应该工作。另请查看`line-height`文本框的规则。如果字体大小与行高不同，那就可以解释为什么大小不同。Firefox 和 Chrome 使用从`em`s 到像素的不同转换，反之亦然。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T21:49:08.307

HTML：

```
<form id="search" action="" method="get">
    <input type="text" name="search" class="sfield" value="search and go"/><input type="submit" value="Search" class="sbutton"/>
</form> 
```

CSS：

```
input.sfield{
    background-color:#fff;  
    border-color:#cecece;
    border-style:solid;
    border-width:1px 0 1px 1px;
    font-size:0.9em;
    line-height:0.9em;
    height:26px;
    margin: 0;
}

input.sbutton{
    background-color:#d91515;
    height:inherit;
    border: 1px solid #d91515;  
    color:#fff;
    position:relative;
    margin: 0;
    height:30px;
} 
```

# c# - 系统绘图反转区域构建路径

> ID：13039699
> 
> 赞同：2
> 
> 时间：2012-10-23T21:37:01.567
> 
> 标签：c#, winforms, drawing

我有一个`panel`，我在上面画了一颗心`panel`。但我不想画心，我想画除了心之外的所有东西，所以心是透明的。我可以将`Region`所选内容反转`Path`吗？

```
System.Drawing.Drawing2D.GraphicsPath path = new System.Drawing.Drawing2D.GraphicsPath();
            path.AddArc(0, 0, (this.Width / 2), (this.Height / 2), 135, 195);
            path.AddArc((this.Width / 2), 0, (this.Width / 2), (this.Height / 2), 210, 195);
            path.AddLine((this.Width / 2), this.Height, (this.Width / 2), this.Height);
            this.Region = new Region(path);
            this.BackColor = Color.Black; 
```

它看起来像什么（白色=透明）：![1](../Images/b757055f42306f32ba539c63cc1222f6.png)

我希望它看起来像什么（白色=透明）： ![在此处输入图像描述](../Images/d3b6c37f7562697be751ea2d7d529231.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T22:12:49.110

我认为您可以将 2 个图形路径一起添加。

你可以试试这段代码：

```
private void panel1_Paint(object sender, PaintEventArgs e)
{
    GraphicsPath path = new GraphicsPath();
    path.AddArc(0, 0, (this.Width / 2), (this.Height / 2), 135, 195);
    path.AddArc((this.Width / 2), 0, (this.Width / 2), (this.Height / 2), 210, 195);
    path.AddLine((this.Width / 2), this.Height, (this.Width / 2), this.Height);

    GraphicsPath path2 = new GraphicsPath();
    path2.AddRectangle(new Rectangle(new Point(0, 0), panel1.Size));

    path2.AddPath(path, false);

    e.Graphics.FillPath(Brushes.Black, path2);
} 
```

结果是：

![在背景图像上绘制黑心](../Images/851b43359eeb9713541725a76aa4cf81.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T22:03:12.797

您可以尝试从面板的 Paint 事件的 Graphic 对象中排除一个区域：

```
GraphicsPath path = new GraphicsPath();
path.AddArc(0, 0, (this.Width / 2), (this.Height / 2), 135, 195);
path.AddArc((this.Width / 2), 0, (this.Width / 2), (this.Height / 2), 210, 195);
path.AddLine((this.Width / 2), this.Height, (this.Width / 2), this.Height);

using (Region r = new Region(path)) {
  e.Graphics.ExcludeClip(r);
}

// continue drawing...
e.Graphics.Clear(Color.Yellow); 
```

或者如果尝试修改控件的区域，则只需使用 Region 的 Exclude 属性：

```
GraphicsPath path = new GraphicsPath();
path.AddArc(0, 0, (this.Width / 2), (this.Height / 2), 135, 195);
path.AddArc((this.Width / 2), 0, (this.Width / 2), (this.Height / 2), 210, 195);
path.AddLine((this.Width / 2), this.Height, (this.Width / 2), this.Height);

Region r = new Region(new Rectangle(Point.Empty, this.ClientSize));
r.Exclude(path);

this.Region = r; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:53:26.800

我不知道反转选择的方法，但你总是可以在背景颜色中画一颗心，然后将背景颜色更改为黑色。

```
this.BackColor = Form.BackColor;
Form.BackColor = Color.Black; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T22:06:50.173

原始解决方案[在这里](https://web.archive.org/web/20141006053824/http://bobpowell.net/region_from_bitmap.aspx)。我已根据您的需要对其进行了修改

```
 this.Region = InvertRegion(new Region(path), this.Width, this.Height); 
```

和

```
private Region InvertRegion(Region region, int width, int height)
{
    Bitmap mask = new Bitmap(width, height);
    Graphics.FromImage(mask).FillRegion(Brushes.Black, region);

    int matchColor = Color.Black.ToArgb();

    Region inverted = new System.Drawing.Region();
    inverted.MakeEmpty();
    Rectangle rc = new Rectangle(0, 0, 0, 0);
    bool inimage = false;
    for (int y = 0; y < mask.Height; y++)
    {
        for (int x = 0; x < mask.Width; x++)
        {
            if (!inimage)
            {
                if (mask.GetPixel(x, y).ToArgb() != matchColor)
                {
                    inimage = true;
                    rc.X = x;
                    rc.Y = y;
                    rc.Height = 1;
                }
            }
            else
            {
                if (mask.GetPixel(x, y).ToArgb()  == matchColor)
                {
                    inimage = false;
                    rc.Width = x - rc.X;
                    inverted.Union(rc);
                }
            }

        }
        if (inimage)
        {
            inimage = false;
            rc.Width = mask.Width - rc.X;
            inverted.Union(rc);
        }
    }
    return inverted;
} 
```

# visual-studio-2010 - 即使在我为 TFS 2012 安装了兼容性 GDR 更新后，Visual Studio 是否也可以与 TFS 2010 一起使用？

> ID：13039703
> 
> 赞同：2
> 
> 时间：2012-10-23T21:37:17.603
> 
> 标签：visual-studio-2010, visual-studio-2008, tfs

您好，在我公司，我们正在将 TFS 2010 升级到 TFS 2012。为此，我们需要在所有 vs 2010 客户端上安装 sp1 和兼容性 GDR 更新（[来自此处）。以及兼容性 GDR 更新（](http://www.microsoft.com/en-us/download/details.aspx?id=29082)[来自此处](http://support.microsoft.com/kb/2673642)）我们所有的 vs 2008 客户。

但是我们想通过两个主要步骤进行升级，首先升级客户端，几天后升级服务器。

即使在安装了兼容性 GDR 更新后，客户端是否也可以使用 tfs 2010 服务器？

任何链接将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:39:56.917

是的，我在 Visual Studio 2010 上安装了 GDR 更新，它适用于 TFS 2010 和 TFS 2012。

如果您为 VS2010 安装[VersionInfo](http://visualstudiogallery.msdn.microsoft.com/bce6cbf1-fb55-4a7d-b39b-8589634d846f)扩展，它会*提醒*您安装 GDR 更新。

# php - 尝试将查询结果乘以总计

> ID：13039706
> 
> 赞同：0
> 
> 时间：2012-10-23T21:37:25.797
> 
> 标签：php, mysql

## 问题

我生成了一个查询来确定一个房间的每人总成本和房间内的总人数；每人的总费用和房间里的总人数一样正确返回；然而，当我试图呼应总数的小乘法时，我只是得到了我希望相乘的数字的显示。

**例如：** 每人价格 = $1207 房间总人数 = 2 查询结果 ... "1207*2" ...

## 问题：

我敢肯定这是愚蠢或次要的，但可以使用第二双眼睛。如何重写下面的代码以产生**$2414**的预期结果？

## 这是查询：

```
$tourquery = "SELECT t.roomprice, c.totpax 
         FROM clients c, tourprices t 
         WHERE c.roomtype1 = t.roomtype 
         AND c.tourstart = t.tourstart
         AND c.tourbk_id = t.tour_id"; 
$tourresult = $db->query($tourquery); 

while ($roomrate = mysqli_fetch_assoc($tourresult))
   {
echo "Per person amount : {$roomrate['roomprice']}<br />";
echo "Total room amount : {$roomrate['roomprice']}*{$roomrate['totpax']}<br />";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:41:34.570

你为什么不这样做：

```
while ($roomrate = mysqli_fetch_assoc($tourresult))
{
    $totalcost = $roomrate['roomprice'] * $roomrate['totpax'];
    echo "Per person amount : {$roomrate['roomprice']}<br />";
    echo "Total room amount : {$totalcost}<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:46:48.287

你也可以很花哨，让 mySQL 完成数学运算。

```
SELECT t.roomprice, c.totpax, (t.roomprice * c.totpax) AS total_price 
     FROM clients c, tourprices t 
     WHERE c.roomtype1 = t.roomtype 
     AND c.tourstart = t.tourstart
     AND c.tourbk_id = t.tour_id 
```

不确定您是否会受到性能影响。我最终决定是由数据库完成处理还是由 PHP 完成处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:43:11.633

这是因为您正在输出一个字符串。有多种方法可以解决此问题，包括：

```
while ($roomrate = mysqli_fetch_assoc($tourresult))
   {
$total_price = $roomrate['roomprice']*$roomrate['totpax'];
echo "Per person amount : {$roomrate['roomprice']}<br />";
echo "Total room amount : {$total_price}<br />";

} 
```

# asp.net-mvc - 使用属性调用控制器的 OAuth 安全性？

> ID：13039707
> 
> 赞同：1
> 
> 时间：2012-10-23T21:37:28.927
> 
> 标签：asp.net-mvc, oauth, asp.net-mvc-4, oauth-2.0

无论如何，您可以说在 MVC 中使用 OAuth 并使用验证过程中的属性启用对控制器的访问。可以说我有

```
public class myownController
{ 
  [LoginRequired]
  public ActionResult Index(){
  //this can be accesed only of the user is logged in.
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:52:56.340

如果您使用的是 ASP.Net MVC 4，则应使用默认的[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)内置。如果不是，我建议您手动将标准表单身份验证机制与您选择的 OAuth 提供程序集成。看看[ASP.NET MVC 身份验证 - 以正确的方式自定义身份验证和授权](http://weblogs.asp.net/jgalloway/archive/2012/05/04/asp-net-mvc-authentication-customizing-authentication-and-authorization-the-right-way.aspx)

由于您使用的是 ASP.Net MVC 4，我强烈建议您阅读[SimpleMembership、Membership Providers、Universal Providers 和新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)。MVC 4 中有一些重大变化，使整个 Membership 和 OAuth 变得非常容易。

# macos - 获取可执行二进制文件的完整反汇编

> ID：13039708
> 
> 赞同：20
> 
> 时间：2012-10-23T21:37:30.847
> 
> 标签：macos, gdb, disassembly, otool

是否可以获得可执行文件的完整反汇编（可以作为汇编程序的输入）？

当我使用时，`otool -tV a.out`我只能看到文本部分。数据等其他部分不可见。

当我使用`gdb`时，反汇编命令需要一个开始地址和一个结束地址。但是我不知道如何找出二进制文件的开始和结束地址（比如 a.out）。

我正在尝试反汇编一个可执行文件，修改汇编代码，然后重新组装它。那可能吗？

如果可以找出二进制文件中所有部分的名称，那也会有所帮助。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-10-02T21:21:06.650

尝试使用此命令，我记得曾经使用过它：

```
otool -tvV a.out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T13:57:06.133

在 Mac 上，您可以安装（可能通过自制软件）包含 gobjdump 的 binutils。安装后，您可以反汇编任何二进制程序。它是开放和免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:41:45.627

您可以使用[Hopper Disassembler](http://www.hopperapp.com/)

引用：

> Hopper 是 Mac 的逆向工程工具，可让您反汇编、反编译和调试 32/64 位 Intel Mac 可执行文件。

它的价格为 59 美元，但您可以下载一个演示以检查它是否首先完成了工作。

**编辑**

`otool`根据[手册](http://www.opensource.apple.com/source/cctools/cctools-698/man/otool.1)，您似乎也可以实现这一点。

> .B -d 显示 (_^_DATA,_^_data) 部分的内容。

另请查看[这篇简短的博客文章](https://web.archive.org/web/20120401144155/http://divine-protection.com/wordpress/?p=15)（存档链接，原版已消失），其中描述了 的上述用途，以及@Sjlver 提到的`otool`如何使用。`objdump`

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-23T21:41:50.447

在linux上，你可以尝试使用`objdump -D myprog`

请注意，这仅在程序不包含不规则控制流时才有效。特别是恶意软件经常被混淆，例如通过插入然后跳过的虚假字节。

如果您针对此类程序，我听说最好使用的产品之一是[IDA pro](http://www.hex-rays.com/products/ida/index.shtml)。

# ios - 使用 Quartz2D 在屏幕外绘制并将结果用作 iOS 中的 OpenGL ES 纹理

> ID：13039711
> 
> 赞同：2
> 
> 时间：2012-10-23T21:37:34.480
> 
> 标签：ios, opengl-es, quartz-graphics, texturing, off-screen

根据我读过的文档，使用 CGLayer 进行屏幕外绘图是进行 Quartz 2D 绘图的最高性能方式，因为它允许绘图由 GPU 和 VRAM 存储/管理。

当我完成绘图时，我想从 CGLayer 中获取像素缓冲区并将其用作 OpenGL 纹理。

我知道如何使用像素缓冲区创建纹理。

我已经看到了屏幕外渲染到 CGBitmapContext、检索像素、然后使用这些像素创建纹理的示例。

Quartz 2D 编程指南建议绘制到 CGBitmapContext 很慢并且在软件中完成（不涉及 GPU），所以我避免了这条路。

所以，他们说要快速绘图，我需要在 CGLayer 中进行绘图。如何将像素返回到可以发送到 glTexImage2D() 的内存缓冲区中？

非常感谢 ！

# objective-c - 用 Obj-C 中的特定方法“装饰”几个类

> ID：13039712
> 
> 赞同：2
> 
> 时间：2012-10-23T21:37:35.370
> 
> 标签：objective-c, design-patterns

我还没有进入设计模式，所以“对不起！” 用这样的问题打扰你，这可能是显而易见的。

问题是，我有几个课程：`Show`, `Segment`, `Command`. 这三个类完全不同，除了一件事：它们都有一个`NSArray`被调用的`schedules`，其中包含`ScheduleItem`类。

在我的工作流程中，我需要检查当前时间是否与 scheduleItem 匹配以设置`Show`、`Segment`或`Command`活动。所以，我想在所有这三个类上都有一个名为`isActive()`. 由于此方法对所有当前和将来的类都执行相同的操作，因此我正在寻找一种方法来实现该`isActive`方法一次，并在这些类中重用它。

有一个很好的方法吗？

要记住，除了 schedules 数组之外，这些类绝对没有任何共同点。所以，我想避免子类化。但你可以用其他方式说服我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:50:23.970

你可以像这样创建

```
@interface ScheduleCollection : NSObject {
    NSArray* schedules;
}

@property NSArray* schedules;

/**
  Return true if matches.
*/
-(BOOL) match:(ScheduleSclass); //or call it isActive or whatever you like 

@end 
```

然后将 Show、Segment、Command 中的 schedules 数组替换为该类的 ivar。如果您需要比较时间，只需获取属性并调用匹配：

```
Show* show = ...;

BOOL m = [show.schedules match: my_time]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:33:46.960

除了通用继承（与方法共享基类）之外，实际上没有任何设计模式。您不能将其添加为所有三个的类别，因为它们不共享基类。

如果你想避免引入基类，你可以使用类型 id 是一个无类型对象这一事实，并且你可以在运行时调用它的任何方法。只有当实际对象没有该方法时它才会失败......

在每个对象上，创建一个名为 getSchedule 的方法，如下所示：

```
- (NSArray*) getSchedule {
  return schedule;
} 
```

然后在其他地方创建这个方法

```
-(BOOL) isActive:(id)anyObjectWithGetScheduleAnyOtherWillFailWithSelectorNotImplemented
{
  // You could do an explicit check to determine if the object passed in implements
  // getSchedule, but I skipped it here.
  NSArray* schedule =  [anyObjectWithGetScheduleAnyOtherWillFailWithSelectorNotImplemented getSchedule];
  <your implementation here>
} 
```

在我看来，最好只引入一个共享基类，因为它更清晰，并且不会真正花费更多的工作。但是，如果您有充分的理由不这样做，这也将起到作用。

# nhibernate - ICriteriaQuery 不支持更高版本的 NHibernate 的 AddUsedTypedValues

> ID：13039724
> 
> 赞同：1
> 
> 时间：2012-10-23T21:38:50.737
> 
> 标签：nhibernate, nhibernate-criteria

在旧版本的 NHibernate 中，ICriteriaQuery 中有一个名为“AddUsedTypedValues”的方法。升级到 NHibernate 3.1 后，这种方法就不存在了。有谁知道该方法在哪里移动（到另一个接口）或 NHibernate 明确删除了对它的支持？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:39:31.213

方法*AddUsedTypedValues*以及*(AbstractCriterion : )ICriterion*内部实现已被替换。AddUsedTypedValues 是一种注入参数的方法，它们后来在 ICriterion 实现者中被调用，如*sqlStringBuilder.AddParameter()*；（所以从添加和使用的距离是显着的而不是明确的）当前版本（3+）提供 ICriteriaQuery 方法

**IEnumerable NewQueryParameter(TypedValue 参数);**

可用于获取参数数组，然后在构建 SQL 语句时显式使用：

```
var parameter = criteriaQuery.NewQueryParameter(typedValue).Last()
sqlStringBuilder.Add(parameter); 
```

现在很清楚将哪个参数添加到 SQL 语句中。我必须实现自己的 ICrietrion，所以我也遇到了这个问题......

# jquery - JQuery 滑块空间“溢出”

> ID：13039727
> 
> 赞同：0
> 
> 时间：2012-10-23T21:39:08.970
> 
> 标签：jquery

我正在创建我自己的第一个 JQuery 滑块，而且我已经走了很长一段路。

我想要的是：

当你点击我的滑块中的“下一步”按钮时，Image2 会被设置在滑块 div 的左侧，而 image1 则在里面。Image1 将一直滚动（动画）到滑块 div 的右侧。一旦 Image2 现在设置在 div 中，image1 的 z-index 将设置为低于 image1，因此它可以低于它。现在 image1 也在 div 内的 image2 下，并且可以重复该过程。

我有什么（问题）：

我几乎完成了上述操作，但是在滑动/动画时，图像有时会超出 div。我确保没有一个 div 有任何奇怪的边距/填充。滑块 div 和图像都具有相同的宽度 (1050) 和高度 (230)。

编码：

```
function SlideRight(){
   if (!$("#IMAGE1").is(':animated') || $("IMAGE2").is(':animated')){

      if(counter == images.length - 1){
         counter = -1;
      }

      if(IsImageOneSet){    
         Image2.src=images[counter + 1];
         $("#IMAGE2").css('left', $("#IMAGE2").position().left-1050);
         $("#IMAGE1").animate({
            "left": "+=1050px", 
            queue: false
         }, "slow", function(){
            $("#IMAGE1").css('left', $('#IMAGE2').position().left);
            $("#IMAGE1").css('z-index', '0');
            $("#IMAGE2").css('z-index', '1');
            $("#Next").bind('click');
         });
         $("#IMAGE2").animate({"left": "+=1050px", queue: false}, "slow");  

      } else {
         Image1.src = images[counter + 1];      
         $("#IMAGE1").css('left', $("#IMAGE1").position().left-1050);
         $("#IMAGE2").animate({
            "left": "+=1050px",
            queue: false
         }, "slow", function(){
             $("#IMAGE2").css('left', $('#IMAGE1').position().left);
             $("#IMAGE1").css('z-index', '1');
             $("#IMAGE2").css('z-index', '0');
             $("#Next").bind('click');
         });
         $("#IMAGE1").animate({"left": "+=1050px", queue: false}, "slow");
      }

      counter++;
      IsImageOneSet = !IsImageOneSet;   
      window.clearInterval(interval);
      interval = window.setInterval(SliderInterval, 7000);
   }
} 
```

我真的不知道是什么导致了多余的空间。另外，如果有任何编码错误，请告知；我正处于一个学习过程中，就像这里的每个人一样 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:03:29.720

我发现了问题：

Image1的动画比Image2的动画更早完成，所以遇到这段代码时：

```
$("#IMAGE1").css('left', $('#IMAGE2').position().left); 
```

在 image2 完成动画时，它会花费很少的像素距离。

新问题：

在将位置设置为 image2 之前，如何确保 image2 已完成动画？

# jasmine - AngularJS 测试错误：未知提供者：$_httpBackend_Provider <- $_httpBackend_

> ID：13039728
> 
> 赞同：5
> 
> 时间：2012-10-23T21:39:19.583
> 
> 标签：jasmine, angularjs

我正在尝试使用 Jasmine 单元测试规范文件测试 AngularJS 控制器。我的方法是在以下测试中使用 $httpBacked：

```
describe('SubmissionsController', function() {
    var minimal_mock_response = [ { id: 1 } ]; 
    var scope, routeParams, $httpBackend; 

    beforeEach(module('submissionServices'));

    beforeEach(inject(function($_httpBackend_, $rootScope) {
        scope = $rootScope.$new();  
        $httpBackend = $_httpBackend_;
        $httpBackend.expectGET('/submissions').respond(minimal_mock_response);
        routeParams = {};
    }));

    it('passes a trivial test', function() {
        expect(true).toBe(true);
    });
}); 
```

我插入了 expect(true).toBe(true) 只是为了让测试执行并失败，即使它没有触及角度控制器。当我尝试使用 jasmine-headless-webkit 运行测试时，我收到以下错误：

```
jasmine-headless-webkit spec/javascripts/SubmissionsControllerSpec.js

Running Jasmine specs...
F
FAIL: 1 test, 1 failure, 0.011 secs.

Submissions controllers SubmissionsController passes a trivial test.     (XXX/spec/javascripts/SubmissionsControllerSpec.js:18)
Error: Unknown provider: $_httpBackend_Provider <- $_httpBackend_

Test ordering seed: --seed 9254 
```

**是否有关于如何纠正此错误并执行微不足道的测试的任何提示？**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-07T02:47:39.490

用下划线括起来服务名称有一些好处。

从您的代码中，我可以看到您可能想要保存对 $httpBackend 的引用。这就是你想做的。下划线的位置是一次性的。

```
beforeEach(inject(function(_$httpBackend_, $rootScope) {
    scope = $rootScope.$new();  
    $httpBackend = _$httpBackend_;
    ... 
```

Angular 足够聪明，可以删除下划线并将 $httpBackend 返回给您，您可以将其保存到您自己的 $httpBackend 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:31:51.967

我相信这是因为您注入了错误的服务。它不知道是什么`$_httpBackend_`。你应该能够做到这一点：

```
beforeEach(inject(function($httpBackend, $rootScope) {
    scope = $rootScope.$new();  
    $httpBackend.expectGET('/submissions').respond(minimal_mock_response);
    routeParams = {};
})); 
```

如果您想获得一次对该`$httpBackend`服务的引用并将其存储为`$httpBackend`，[那么 ghiden 的答案](https://stackoverflow.com/a/15262157/1014979)就是要走的路。

# c# - 如何找出主表单对象的名称是什么

> ID：13039729
> 
> 赞同：0
> 
> 时间：2012-10-23T21:39:20.993
> 
> 标签：c#, winforms

很短的问题：我怎样才能找出主表单对象的名称是什么？

我想知道这一点，因为我想调用一些函数或从主窗体对象中获取一些变量。当然，我需要知道对象的名称才能这样做（这是个好主意吗？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:41:06.437

您可以使用[Application.OpenForms](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)属性来获取所有打开的表单，并从中获取名称。正如 DaveShaw 在评论中指出的那样，主窗体通常是列表中的第一个，位于索引 0 处。

```
string name = Application.OpenForms[0].Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:48:23.100

你是什​​么意思？1.类型名称：

```
 class form1
   {} 
```

它返回“form1” 2.对象的名称

```
 class form1
   {}
   form1 obj 
```

它返回“obj”

# java - 用于 Mac OSX 的 Java 键盘记录

> ID：13039731
> 
> 赞同：0
> 
> 时间：2012-10-23T21:39:44.497
> 
> 标签：java, macos, keyboard, awtrobot, keylogger

我需要一个程序/库来记录所有击键（首选 Java）。我拆解了一个普通的键盘，为某些程序构建了一个自定义界面。为某些快捷方式提供物理接口的接口。由于我需要根据正在运行的应用程序重新映射击键，因此需要一个击键记录库。

例如我想做这样的事情：

*   键`a`-> Winamp 正在运行 -> `b`（下一曲目）
*   键`a`-> Chrome 正在运行 -> `Ctrl`+ `T`（新标签）...

所以我不想记录我的朋友/家人的密码......

跨平台会很棒，但如果这不可能，Mac OSX 是首选。

# sql - 如何简化/优化这个联合声明

> ID：13039735
> 
> 赞同：2
> 
> 时间：2012-10-23T21:40:14.110
> 
> 标签：sql, sql-server

我有我为客户需要的查询编写的这段代码。结果正是我们所需要的，但是我得到了一些非常长的响应时间。查询的第一部分比第二部分花费更长的时间，而查询本身并没有太大的不同。基本上，它们是两个不同的查询，我使用 UNION ALL 将它们合并为一个。

任何反馈都会很好地简化这一点。谢谢

```
Select * from
(

Select b.Storage_Loc_Nbr as locNbr, b.CurrentLoadCount,b.MMM_Id_Nbr,
(SELECT count(Load_ID) as LoadCount 
    FROM t_load c
    WHERE b.MMM_Id_Nbr=c.MMM_Id_Nbr
    and
    QC_Status_Code like 'R%' and mmm_Facility_Code ='MC' and     Active_Status_Ind='A'
    and
    b.Storage_Loc_Nbr <> c.Storage_Loc_Nbr)as OtherLocCount

    FROM
(

SELECT * FROM

(

    SELECT t_load.Storage_Loc_Nbr, 
    Count(t_Load.Load_Id) AS CurrentLoadCount,
    t_load.MMM_Id_Nbr,
    t_Storage_Location.Storage_Loc_Type_Code

    FROM t_Load LEFT JOIN t_Storage_Location ON t_Load.Storage_Loc_Nbr = t_Storage_Location.Storage_Loc_Nbr
    WHERE (

    ((t_load.MMM_Id_Nbr) between '702004%' and '702011%')
    AND ((t_Load.Active_Status_Ind)='A')
    AND ((t_Load.QC_Status_Code) Like 'R%') 
    AND ((t_Load.MMM_Facility_Code)='MC')
    AND  ((t_Storage_Location.Storage_Loc_Type_Code)='CD')
)

    GROUP BY t_load.MMM_Id_Nbr,
    t_load.Storage_Loc_Nbr,
    t_Storage_Location.Storage_Loc_Type_Code

 HAVING
    Count(t_Load.Load_Id)<=1

    )
    as a

)  
as b

)
as c
Group By
locNbr,CurrentLoadCount, MMM_Id_Nbr, OtherLocCount
having OtherLocCount>0

UNION ALL

Select * from
(

Select b.Storage_Loc_Nbr as locNbr, b.CurrentLoadCount,b.MMM_Id_Nbr,
(SELECT count(Load_ID) as LoadCount 
    FROM t_load c
    WHERE b.MMM_Id_Nbr=c.MMM_Id_Nbr
    and
    QC_Status_Code like 'R%' and mmm_Facility_Code ='MC' and Active_Status_Ind='A'
    and
    b.Storage_Loc_Nbr <> c.Storage_Loc_Nbr)as OtherLocCount

 FROM
(

SELECT * FROM

(

    SELECT t_load.Storage_Loc_Nbr, 
    Count(t_Load.Load_Id) AS CurrentLoadCount,
    t_load.MMM_Id_Nbr,
    t_Storage_Location.Storage_Loc_Type_Code

    FROM t_Load LEFT JOIN t_Storage_Location ON t_Load.Storage_Loc_Nbr = t_Storage_Location.Storage_Loc_Nbr
    WHERE (

    ((t_load.MMM_Id_Nbr) between '702004%' and '702011%')
    AND ((t_Load.Active_Status_Ind)='A')
    AND ((t_Load.QC_Status_Code) Like 'R%') 
    AND ((t_Load.MMM_Facility_Code)='MC')
    AND  ((t_Storage_Location.Storage_Loc_Type_Code)<>'CD') AND
    ((t_load.Storage_Loc_Nbr)<>'clc' AND (t_load.Storage_Loc_Nbr)<>'WHLEAD')    AND
(
((t_load.Storage_Loc_Nbr) Like '%A') 
OR((t_load.Storage_Loc_Nbr) Like '%B')
OR ((t_load.Storage_Loc_Nbr) Like '%C') 
OR ((t_load.Storage_Loc_Nbr) Like '%D') 
OR ((t_load.Storage_Loc_Nbr) Like '%E'))
)

    GROUP BY t_load.MMM_Id_Nbr,
    t_load.Storage_Loc_Nbr,
    t_Storage_Location.Storage_Loc_Type_Code

    HAVING
    Count(t_Load.Load_Id)<=1

    )
    as a

)  
as b

)
as c
Group By
locNbr,CurrentLoadCount, MMM_Id_Nbr, OtherLocCount
having OtherLocCount>0
Order by
LocNbr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:50:42.923

我只看了联盟的第一部分

[http://sqlfiddle.com/#!3/72b6d/9/0](http://sqlfiddle.com/#!3/72b6d/9/0)与原始查询非常相似，优化器可能会自己做一些小的简化。

[http://sqlfiddle.com/#!3/72b6d/11/0](http://sqlfiddle.com/#!3/72b6d/11/0)与我编写的测试数据产生相同的结果。随意用更具代表性的东西来扩展它。它使用 CTE（复制如下）

```
-- CTE Version
With T As (
Select
  l.Storage_Loc_Nbr,
  l.MMM_Id_Nbr,
  Count(Load_ID) As LoadCount
From 
  t_load l
Where
  l.QC_Status_Code like 'R%' And
  l.mmm_Facility_Code ='MC' And
  l.Active_Status_Ind='A' And
  l.MMM_Id_Nbr between '702004%' and '702011%'
Group By
  l.Storage_Loc_Nbr,
  l.MMM_Id_Nbr
)

Select
  t1.Storage_Loc_Nbr LocNbr,
  t1.LoadCount CurrentLoadCount,
  t1.MMM_Id_Nbr,
  t2.TotalCount - t1.LoadCount OtherLocCount
From
  T t1
    Inner Join (
      Select
        MMM_Id_Nbr,
        Sum(LoadCount) TotalCount
      From
        T  
      Group By
        MMM_Id_Nbr
    ) t2
    On t1.MMM_Id_Nbr = t2.MMM_Id_Nbr
    Left Outer Join
  t_Storage_Location sl
    On t1.Storage_Loc_Nbr = sl.Storage_Loc_Nbr
Where
  sl.Storage_Loc_Type_Code = 'CD' and
  t1.LoadCount <= 1 And
  t2.TotalCount - t1.LoadCount > 0 
```

[http://sqlfiddle.com/#!3/72b6d/6/0](http://sqlfiddle.com/#!3/72b6d/6/0)是另一个使用窗口函数以及免费 CTE 的版本：

```
-- Window Function Version
With T As (
Select
  l.MMM_Id_Nbr,
  l.Storage_Loc_Nbr,
  Count(Load_ID) Over (Partition By MMM_ID_Nbr, Storage_Loc_Nbr) As LoadCount,
  Count(Load_ID) Over (Partition By MMM_ID_Nbr) As TotalCount
From 
  t_load l
Where
  QC_Status_Code like 'R%' And
  mmm_Facility_Code ='MC' And
  Active_Status_Ind='A' And
  l.MMM_Id_Nbr between '702004%' and '702011%'
)

Select
  t1.Storage_Loc_Nbr LocNbr,
  t1.LoadCount CurrentLoadCount,
  t1.MMM_Id_Nbr,
  t1.TotalCount - t1.LoadCount OtherLocCount
From
  T t1
    Left Outer Join
  t_Storage_Location sl
    On t1.Storage_Loc_Nbr = sl.Storage_Loc_Nbr
Where
  sl.Storage_Loc_Type_Code = 'CD' and
  t1.LoadCount <= 1 And
  t1.TotalCount - t1.LoadCount > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:45:13.643

```
(SELECT count(Load_ID) as LoadCount  
    FROM t_load c 
    WHERE b.MMM_Id_Nbr=c.MMM_Id_Nbr 
    and 
    QC_Status_Code like 'R%' and mmm_Facility_Code ='MC' and     Active_Status_Ind='A' 
    and 
    b.Storage_Loc_Nbr <> c.Storage_Loc_Nbr)as OtherLocCount 
```

这是一个相关的子查询。这意味着它逐行运行。这是一种您应该避免使用的编程技术。将其改为派生表。

# javascript - JS嵌套对象访问全局变量

> ID：13039736
> 
> 赞同：2
> 
> 时间：2012-10-23T21:40:20.507
> 
> 标签：javascript, json, global-variables

我有一个 JavaScript 对象定义如下...

```
 var f = {
        test: 'myTestContent',
        app: {
            base: {
                action: function () {
                    alert(test);
                }            
            }
        }
    };

    f.app.base.action(); 
```

问题是我无法访问**f**实例中定义的**测试变量。**是否可以从嵌套对象访问此上下文中的变量？

 **目前我得到**测试**未定义。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:42:11.720

`test`没有全局定义。您必须使用正确的参考：

```
alert(f.test); 
```

应该管用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:44:27.997

`test`不是全局变量，而是 的属性`f`。所以你要：

```
var f = {
    test: 'myTestContent',
    app: {
        base: {
            action: function () {
                alert(f.test);  // Notice this line.
            }            
        }
    }
};

f.app.base.action(); 
```

`f.app`就像在最后一行访问它一样访问它。**

# android - 我可以将 onCompletionListener() 设置为作为扩展 MediaPlayer 的类的实例的对象吗？

> ID：13039741
> 
> 赞同：0
> 
> 时间：2012-10-23T21:40:55.870
> 
> 标签：android, android-mediaplayer

我已经实现了一个扩展 MediaPlayer 的类。

```
public class AudioPlayer extends MediaPlayer {
   private String fileName = null;
   FileInputStream fileInputStream = null;  
   private MediaPlayer mediaPlayer = null;

   // Constructor
   public AudioPlayer(Context context) 
   {    
    // Initialization
   }

   public void onPlay(boolean start)
   {
       if(start) {
        startPlaying(this.fileName);
       }else {
        stopPlaying(this.fileName);
       }
   }

   private void startPlaying(String fileName) {
       mediaPlayer = new MediaPlayer();
       mediaPlayer.setDataSource(fileInputStream.getFD());
       mediaPlayer.prepare();
       mediaPlayer.start();

    // mediaPlayer.setOnCompletionListener(new CompletionListener());
    }

class CompletionListener implements MediaPlayer.OnCompletionListener {
    @Override
    public void onCompletion(MediaPlayer mp) {

        // Do stuff
        }        
    } 
```

当我在自定义 AudioPlayer 类中的 MediaPlayer 对象上 setOnCompletionListener 时，它工作得很好。但是，我想**在从此类创建的对象**上设置此侦听器，因为它用于多个活动。在 onCompletion() 方法中应该采取不同的操作，因此在我的自定义类中实现 onCompletionListener 是没有意义的。当我在要使用它的每个活动中创建自定义类的实例时

```
AudioPlayer audioPlayer = new AudioPlayer(context); 
```

并在其上设置 onCompletionListener：

```
audioPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            // TODO Auto-generated method stub

        }
    }); 
```

它永远不会被调用。有没有办法在我的自定义对象上调用 onCompletionListener？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:08:14.077

The solution is to write a method that returns MediaPlayer object and then call setOnCompletionListener() on this object:

```
public MediaPlayer getActiveMediaPlayer()
{
    if ( mediaPlayer != null )
        return this.mediaPlayer;
    else 
        return null;
} 
```

and then in the activity:

```
audioRecorder.getActiveMediaPlayer().setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {
            Log.d("MediaPlayer", "test");

        }
    }); 
```

# sql - 创建一个仅对 1 个数据库具有权限的用户

> ID：13039742
> 
> 赞同：2
> 
> 时间：2012-10-23T21:40:57.230
> 
> 标签：sql, sql-server, sql-server-2005

通过脚本将用户添加到具有选择、插入、更新和删除权限但只能访问该数据库的数据库的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T23:20:06.710

```
CREATE USER [user] FOR LOGIN [user]
EXEC sp_addrolemember N'db_datareader', N'your_db'
EXEC sp_addrolemember N'db_datawriter', N'your_db'
GO 
```

[在 SQL Server 2005 中创建一个新的 db 用户](https://stackoverflow.com/questions/666828/create-a-new-db-user-in-sql-server-2005)

# php - MongoDB，errmsg，异常：无法编译代码：_map，PHP，命令，MapReduce

> ID：13039744
> 
> 赞同：1
> 
> 时间：2012-10-23T21:41:03.250
> 
> 标签：php, javascript, mongodb, mapreduce

Noob 在这里使用 MongoDB Map Reduce...但是找不到任何关于这里出了什么问题的文档。无论如何-这是一个示例文档：

数组（[_id] => MongoId 对象（[$id] => 5076e95791fa5e4c69002ec3）

```
[dataProviders] => Array
    (
        [0] => Array
            (
                [key] => facebook
                [data] => Array
                    (
                        [id] => 100001583260053
                        [name] => MyName
                        [link] => http://www.facebook.com/Mynameagain
                        [username] => MyName
                        [birthday] => 02/19/1959
                        [hometown] => Array
                            (
                                [id] => 104022969633581
                                [name] => MyName
                            )

                        [location] => Array
                            (
                                [id] => 104022969633581
                                [name] => MyHome
                            )

                        [bio] => MyBio
                        [work] => Array
                            (
                                [0] => Array
                                    (
                                        [employer] => Array
                                            (
                                                [id] => 119738361373063
                                                [name] => .....
                                            )

                                        [start_date] => 0000-00
                                        [end_date] => 0000-00
                                    )

                            )

                        [education] => Array
                            (
                                [0] => Array
                                    (
                                        [school] => Array
                                            (
                                                [id] => 108891959147272
                                                [name] => ....
                                            )

                                        [type] => High School
                                    )

                                [1] => Array
                                    (
                                        [school] => Array
                                            (
                                                [id] => 133940149955590
                                                [name] => .....
                                            )

                                        [type] => College
                                    )

                            )

                        [gender] => female
                        [email] => MyEmail@myemail.com
                        [timezone] => 2
                        [locale] => US
                        [languages] => Array
                            (
                                [0] => Array
                                    (
                                        [id] => 106412222728952
                                        [name] => MyName
                                    )

                            )

                        [verified] => 1
                        [updated_time] => 2012-08-10T17:33:16+0000
                        [avatarUrl] => https://graph.facebook.com/1000/picture
                        [avatarUrlOriginal] => https://graph.facebook.com/1000/picture?type=large
                        [avatarUrlLarge] => https://graph.facebook.com/1000/picture
                    )

            )

    ) 
```

我的问题是我正在尝试运行一个基本的 MapReduce，只从该组中提取 Facebook 用户。基本上我想做一个非常简单的计数。据我所知，这应该可以工作，但我收到一条错误消息：

```
error_reporting(E_ALL);
ini_set('display_errors', '1');
include "phpmapreduce/lib/MongoMapReduce.php";
include "phpmapreduce/lib/MongoMapReduceResponse.php";
include "phpmapreduce/lib/XMongoCollection.php";

$collection_name = "users";

$map = "function(){emit({source: this.dataProviders.0.key}, {count: 1}); }}";

$reduce = "function(key, values){
            var sum= {count: []};
            for(var i in values)  
                sum += values[i];
            return sum;
            }";
$query = array('dataProviders.0.key' => 'facebook');

echo "Here's our map Function! <br/>";
$mapFunc = new MongoCode($map); 
echo "<pre>";
print_r($mapFunc);
$reduceFunc = new MongoCode($reduce);
print_r($reduceFunc);
$command= array(
       "mapreduce"=>'texasHoldem.users',
    "map"=>$mapFunc,
    "reduce"=>$reduceFunc,
        "query" =>$query,
         "out" => array(
             "inline" => 1)
);
try {
    $mongo = new Mongo('mongodb://1.2.3.4.5.6.7./mydb', array("replicaSet" => true));
}
catch(MongoConnectionException $e) {
    $msg = "Error Connecting to MongoDB" . "<br/>";
    die($msg);
}
echo "Connected" . "<br/>";
$db = $mongo->selectDb('yallapop');

echo "got mydb!" . "<br/>";

$db->setSlaveOkay(); // This line is needed to be able to read from slave
$collection= $db->selectCollection('texasHoldem.users'); // Users collection
echo "Got the Collection" . "<br/>";
echo "setting timeout" . "<br/>";
//$cursor = $collection->find()->timeout(30000);
MongoCursor::$timeout = -1;
echo "<pre>";
echo "let's do this! Running command" . "<br/>";

$statsInfo = $db->command($command);
print_r($statsInfo);

SO this works well up to this point: 
Connected
got myDB!
data established
setting timeout
Got the Collection
setting timeout

let's do this! Running command
Array
(
    [errmsg] => exception: couldn't compile code for: _map
    [code] => 13598
    [ok] => 0
) 
```

我在任何地方都找不到有关此特定错误的任何信息。_map 函数无法编译。以前没见过这个。还有没有经验的？它使用 MongoDB 和 PHP 5.3。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:17:17.690

看起来您的代码中有几个语法错误，这就是它无法编译的原因。

在你的`map`函数中，你有太多的右花括号，并且发出键也不应该是一个文档。

```
$map = "function() {
    emit( this.dataProviders.0.key, {count: 1});
}"; 
```

在`reduce`函数中，如果你只是想把总和相加，你不需要一个数组 in `sum`。做就是了：

```
$reduce = "function(key, values) {
    var sum = {count: 0};
    for (var i in values) {
        sum.count += values[i].count;
    }
    return sum;
}"; 
```

试试这是否适合你。

# css - CSS 选择和效果

> ID：13039745
> 
> 赞同：1
> 
> 时间：2012-10-23T21:41:05.963
> 
> 标签：css, selector, effect

嘿伙计们！我需要 CSS 的帮助。

当单击其中一个项目时，我想对所有项目产生影响。

```
#scrollBox #content .item:active (?)
{
    width: 0px;
}
#scrollBox #content .item
{   
    width : 100%;
    -webkit-transition: all 1s ease-out;    
    -moz-transition: all 1s ease-out;
    -o-transition: all 1s ease-out;
    -ms-transition: all 1s ease-out;
    transition: all 1s ease-out;
} 
```

我不知道有什么东西可以代替（？）来得到我想要的吗？

谢谢你的帮助 ！

# ruby - Ruby 信号捕捉器优先级

> ID：13039751
> 
> 赞同：3
> 
> 时间：2012-10-23T21:41:28.540
> 
> 标签：ruby, linux, signals

在 Ruby 中，我很清楚最近注册的信号捕获器是优先的，所以：

```
Signal.trap("TERM") {puts "foo"; exit}
Signal.trap("TERM") {puts "bar"; exit} 
```

如果我要对上述脚本发出“kill”，它会打印出“bar”并退出。

有没有办法，在 Ruby 本身中，为陷阱强制执行某种范围？

我的具体情况是这样的：

我们有一个应用程序，它在命名空间的 Signals 模块中定义了自己的捕获器（对于这个故事，我们只会说它只捕获“TERM”）。该代码在运行时需要在应用程序中使用，之后几乎就不用管了。

我们使用的第 3 方 gem（我不会命名），实际上*在 initialize 方法中*为“TERM”注册了自己的陷阱，因此最近初始化的对象将是处理整个“TERM”信号的对象应用程序有不良结果...

虽然 3rd 方 gem 的对象定义自己的陷阱可能是有意义的，但我不希望它们影响我的应用程序。

有没有人知道一种方法可以在不花哨的情况下给予非初始化非第 3 方陷阱优先级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T23:03:06.537

您可以修补`Signal`别名`Signal.trap`，然后用无操作替换它：

```
module Signal
    class << self
        alias_method :real_trap, :trap
        def trap(*) end
    end
end 
```

然后你可以`real_trap`在你的代码中使用，你正在使用的这个粗鲁的未命名的 gem 将被忽略。不过，您必须确保`Signal`在您的粗鲁宝石做任何事情之前已修补。

有了那个补丁，发送一个 SIGTERM 到这个代码：

```
Signal.trap("TERM") {puts "foo"; exit}
Signal.trap("TERM") {puts "bar"; exit}
Signal.real_trap("TERM") {puts "pancakes"; exit} 
```

会给你煎饼。

我通常会尽量避免使用猴子补丁，但它对于解决错误和其他不良行为非常有用。

# amazon-s3 - 我似乎有东西将一百万件东西上传到亚马逊 s3？

> ID：13039756
> 
> 赞同：0
> 
> 时间：2012-10-23T21:41:50.783
> 
> 标签：amazon-s3

我只是在编写一个脚本来备份 mysql 数据库并将其上传到 s3...我使用“s3cmd la”来查看当前在这个 s3 存储桶上的内容，并惊讶地看到一百万像这样的文件：

```
 2012-10-23 12:19       411   s3://xv_backups/xv.backups_2012-10-23-12-19-55-F6DC46D0F13059F7
    2012-10-23 12:30       410   s3://xv_backups/xv.backups_2012-10-23-12-30-27-76B099AC21454FED
    2012-10-23 13:21       411   s3://xv_backups/xv.backups_2012-10-23-13-21-53-0A339BDD587ECACD
    2012-10-23 13:28       410   s3://xv_backups/xv.backups_2012-10-23-13-28-23-65B7B3AEAAAD0FDF
    2012-10-23 14:18       410   s3://xv_backups/xv.backups_2012-10-23-14-18-07-29FFF4BD0AE9AB02
    2012-10-23 14:26       410   s3://xv_backups/xv.backups_2012-10-23-14-26-43-3BC4C3011FB93627
    2012-10-23 14:28       410   s3://xv_backups/xv.backups_2012-10-23-14-28-19-CAC78643A195BFB5
    2012-10-23 15:21       410   s3://xv_backups/xv.backups_2012-10-23-15-21-34-BABF49A52A8BA824
    2012-10-23 16:00       411   s3://xv_backups/xv.backups_2012-10-23-16-00-30-072D0A74DBA71008
    2012-10-23 16:21       410   s3://xv_backups/xv.backups_2012-10-23-16-21-12-B81605B136D338F3
    2012-10-23 16:28       378   s3://xv_backups/xv.backups_2012-10-23-16-28-15-1BDAA5F42E3E5EAE
    2012-10-23 16:57       410   s3://xv_backups/xv.backups_2012-10-23-16-57-50-CF7662865C347D1D
    2012-10-23 17:20       410   s3://xv_backups/xv.backups_2012-10-23-17-20-19-798E3C0312C959A0
    2012-10-23 17:31       411   s3://xv_backups/xv.backups_2012-10-23-17-31-31-18C3CD91ACE9D6ED
    2012-10-23 17:56       410   s3://xv_backups/xv.backups_2012-10-23-17-56-06-8B197E8EE680A9F5
    2012-10-23 18:19       410   s3://xv_backups/xv.backups_2012-10-23-18-19-54-486BC0B861DF196E
    2012-10-23 19:24       411   s3://xv_backups/xv.backups_2012-10-23-19-24-03-129C8E3227876BDA 
```

我注意到它们都是相对较小的文件 - 但是......它们来自世界的哪里？我 id "s3cmd get" 下载一个来检查它，我看到：

```
06859b77eb778603ede74dfa6b3444948d577d4c5bca27bfaa1fadd6ed56d35a xv_backups [23/Oct/2012:18:19:54 +0000] 10.186.158.42 3272ee65a908a7677109fedda345db8d9554ba26398b2ca10581de88777e2b61 88B05F67852EAA0D REST.PUT.OBJECT bb.backups_2012-10-23-18-19-54-486BC0B861DF196E "PUT /xv_backups/xv.backups_2012-10-23-18-19-54-486BC0B861DF196E HTTP/1.1" 200 - - 410 48 28 "-" "Jakarta Commons-HttpClient/3.0" - 
```

那么--- 某处发出了 put 请求，并将这个时髦的文件放在 s3 上？有谁知道这是什么，它是如何到达这里的，我该如何阻止它，我应该担心吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:07:08.570

**TL;DR - 不要登录到 Amazon S3 中的同一个存储桶**

我有一个类似的问题。

> 基本上，它记录了它写了一个日志文件。将这一行写入日志文件会触发另一个日志，等等。幸运的是，S3 的日志记录不是实时的——它似乎每天只写入几百个文件。

[http://kylecronin.me/blog/2011/11/30/dont-log-to-the-same-bucket-in-amazon-s3.html](http://kylecronin.me/blog/2011/11/30/dont-log-to-the-same-bucket-in-amazon-s3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T23:34:38.037

这些看起来像是来自 S3[存储桶日志记录](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTBucketPUTlogging.html)。您是否打开了相关存储桶的日志记录？

# android - 将数据返回给 Cocos2d-x 中的调用应用程序。怎么可能？

> ID：13039759
> 
> 赞同：0
> 
> 时间：2012-10-23T21:41:58.030
> 
> 标签：android, ios, cocos2d-iphone, java-native-interface, cocos2d-x

我又遇到了一个问题，我只是不知道如何解决。问题是我应该如何将数据从我的 cocos2d-x 应用程序传递回 Android 和 iOS 调用应用程序？

对于 Android，我想当应用程序以 JNI 结尾时我会使用活动结果，但是如何在 iOS 上实现这一点？

让我们举一个不太实际的例子：我在 Android 和 iOS 上都有一个现有的应用程序。这个应用程序保存着不同游戏的分数，你可以从这个应用程序调用其他游戏应用程序（也是我写的）。当被调用的游戏结束时，主应用程序应该取回分数（如活动结果）。

如果你们能给我一些指点，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:59:13.217

仅仅创建一个排行榜服务器会不会有点过头了？被调用的游戏只是将数据发布到服务器。然后你的排行榜应用程序从服务器读取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:05:58.417

在android中你可以这样做：（可能在iOS中你也可以这样做:)）

例如，我想返回一个带有数据的类。所以我创建 `/cocos2d-2.0-x-2.0.4/cocos2dx/platform/android/java/src/com/example` （尝试把这个类放在你的项目中我不检查它）

```
package com.example;

public class SimpleClass {

    private int a;
    private int b;

    public SimpleClass(int a, int b) {
    this.a = a;
    this.b = b;

    }
} 
```

现在，在您的 Cocos2dxActivity 中，您可以添加本机方法，该方法将在您退出或其他操作时执行，这取决于您。

例如 `private static native SimpleClass nativeReturner();`

您可以在 onStop 或其他方法中执行它，这取决于您。它将返回您的 SimpleClass

接下来在你的项目中，你应该有 jni/main.cpp 一个 JNI 函数，所以你可以简单地添加这个函数：

```
jobject Java_org_cocos2dx_lib_Cocos2dxActivity_nativeReturner(JNIEnv* env, jobject obj)
{
    jint i;
    jobject object;
    jmethodID constructor;
    jclass cls;
    cls = env->FindClass("com/example/SimpleClass");

    constructor = env->GetMethodID(cls, "<init>", "(II)V");
            //Here you initialize your class pass here something
    object = env->NewObject(cls, constructor, 5, 12);
    return object;
} 
```

这个简单的函数为你创建一个 SimpleClass 并用 5,12 初始化它当然你可以在这里传递你的对象形式你的 cocos 游戏。

例如，在继承形式 CCAplication 的类中，您可以存储要传递的数据。接下来，您可以使用 CCApplication::sharedApplication() 或创建自己的静态方法。

当然在 iOS 和其他平台上你必须要类似的东西。

# android - PreferenceActivity getSupportLoaderManager()

> ID：13039760
> 
> 赞同：4
> 
> 时间：2012-10-23T21:42:07.517
> 
> 标签：android, actionbarsherlock, preferenceactivity

我在我的应用程序中使用 ActionBarSherlock。

我想做的是`CursorLoader`在`PreferenceActivity`. 这是可能的，但据我所知，仅在 API 级别 >= 11 上。

我认为这可能`SherlockPreferenceActivity`会解决它，但它也没有`getSupportFragmentManager()`。（将其标记为`actionbarsherlock`因为，也许我错过了一些东西）

有什么方法可以将标准偏好活动与加载程序一起使用并支持旧平台，还是我应该构建一个自定义偏好屏幕？

# sharepoint - 可扩展菜单快速启动 SharePoint Online

> ID：13039765
> 
> 赞同：1
> 
> 时间：2012-10-23T21:42:39.103
> 
> 标签：sharepoint, office365

我们公司刚刚迁移到 Office 365，我正在努力将我们的 Sharepoint 站点迁移到云端。

我的问题是：如果我有多级库，我可以在快速启动上创建一个可扩展菜单，以提供对库层次结构所有级别的访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T05:42:32.047

这不是确切的答案，但它可能会让您入门 [http://www.sharepointdiary.com/2013/02/top-navigation-drop-down-menu-quick-launch-flyout.html](http://www.sharepointdiary.com/2013/02/top-navigation-drop-down-menu-quick-launch-flyout.html)

我只是为我的 SharePoint Online 网站使用完全自定义的样式，SharePoint 母版页对我没有好处，而 2013 实例肯定允许更大的灵活性，希望你现在正在运行它。

# r - R制作逻辑矩阵的矩阵

> ID：13039766
> 
> 赞同：2
> 
> 时间：2012-10-23T21:42:40.987
> 
> 标签：r

我一直在尝试制作一个每列都有逻辑矩阵的 1 行矩阵，但运气不佳。我尝试了一个 for 循环：

```
mat<-matrix(NULL,nrow=1,ncol=60)
for(i in 1:60){mat<-list(mat,matrix(FALSE,nrow=4,ncol=4))} 
```

这产生了一个带有奇怪大小的子矩阵的 4x4 矩阵。

```
mat<-matrix(NULL,n=row=1,ncol=60)
for(i in 1:60){mat[i]<-matrix(FALSE,nrow=4,ncol=4)} 
```

这产生了一个具有 60 个 FALSE 的 NULLxNULL 矩阵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:54:16.483

矩阵本质上是二维的。您可以制作一个 data.frame，其中每列都是一个 4x4 矩阵：

```
tmp <- data.frame(V1=logical(4))
for (i in 1:60) tmp[i] <- matrix(FALSE, nrow=4, ncol=4) 
```

（这是制作 data.frame 的一种尴尬方式，因为 data.frames 倾向于将矩阵的列分散到不同的列中）。

```
> str(tmp)
'data.frame':   4 obs. of  60 variables:
 $ V1 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V2 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V3 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V4 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V5 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V6 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V7 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V8 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V9 : logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V10: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V11: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V12: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V13: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V14: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V15: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V16: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V17: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V18: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V19: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V20: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V21: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V22: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V23: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V24: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V25: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V26: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V27: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V28: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V29: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V30: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V31: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V32: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V33: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V34: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V35: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V36: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V37: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V38: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V39: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V40: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V41: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V42: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V43: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V44: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V45: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V46: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V47: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V48: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V49: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V50: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V51: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V52: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V53: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V54: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V55: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V56: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V57: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V58: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V59: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
 $ V60: logi [1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ... 
```

或者，您可以制作一个 3 维数组：

```
tmp <- array(FALSE, dim=c(60,4,4)) 
```

对第一维进行索引给出了一个 4x4 矩阵：

```
> str(tmp)
 logi [1:60, 1:4, 1:4] FALSE FALSE FALSE FALSE FALSE FALSE ...
> tmp[1,,]
      [,1]  [,2]  [,3]  [,4]
[1,] FALSE FALSE FALSE FALSE
[2,] FALSE FALSE FALSE FALSE
[3,] FALSE FALSE FALSE FALSE
[4,] FALSE FALSE FALSE FALSE 
```

我认为后者可能更接近对你有用的东西，但不知道你为什么想要那个特定的数据结构，很难说。

基于[Carl 的回答](https://stackoverflow.com/a/13039867/892313)，您可以创建一个列表，其中的每个元素都是一个 4x4 逻辑矩阵：

```
tmp <- rep(list(matrix(FALSE, nrow=4, ncol=4)), 60)

> tmp[[1]]
      [,1]  [,2]  [,3]  [,4]
[1,] FALSE FALSE FALSE FALSE
[2,] FALSE FALSE FALSE FALSE
[3,] FALSE FALSE FALSE FALSE
[4,] FALSE FALSE FALSE FALSE 
```

如果您*真的*希望这是一个 1 x 60 结构，其中每个元素都是一个 4x4 逻辑矩阵，那么您也可以向列表中添加维度：

```
tmp <- rep(list(matrix(FALSE, nrow=4, ncol=4)), 60)
dim(tmp) <- c(1,60) 
```

可以像这样访问：

```
> tmp[[1,3]]
      [,1]  [,2]  [,3]  [,4]
[1,] FALSE FALSE FALSE FALSE
[2,] FALSE FALSE FALSE FALSE
[3,] FALSE FALSE FALSE FALSE
[4,] FALSE FALSE FALSE FALSE
> tmp
     [,1]       [,2]       [,3]       [,4]       [,5]       [,6]      
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,7]       [,8]       [,9]       [,10]      [,11]      [,12]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,13]      [,14]      [,15]      [,16]      [,17]      [,18]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,19]      [,20]      [,21]      [,22]      [,23]      [,24]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,25]      [,26]      [,27]      [,28]      [,29]      [,30]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,31]      [,32]      [,33]      [,34]      [,35]      [,36]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,37]      [,38]      [,39]      [,40]      [,41]      [,42]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,43]      [,44]      [,45]      [,46]      [,47]      [,48]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,49]      [,50]      [,51]      [,52]      [,53]      [,54]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16
     [,55]      [,56]      [,57]      [,58]      [,59]      [,60]     
[1,] Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 Logical,16 
```

不过，不确定您为什么要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:49:58.447

R 中的矩阵是严格定义的元素数组。您可能想要一个结构，或者更简单地说，一个`list`变量。

```
foo<- list() 
foo[1:4]<-1:4  #creates four elements in list variable. Short example; you'd use 1:60
foo[[1]]<- matrix(rep(TRUE,16),nr=4) 
```

等等。
但我猜你会更喜欢更高维度的矩阵而不是这样的结构。

# windows-8 - bing 地图不包含在包中

> ID：13039774
> 
> 赞同：0
> 
> 时间：2012-10-23T21:43:13.697
> 
> 标签：windows-8, microsoft-metro, bing-maps, windows-store-apps

我已经创建了我的第一个 Windows 商店应用程序。我在其中使用 Bing 地图。

目前我正在为第二台 PC 上的测试创建包（比如 Windows 商店，但我没有发布它）。但是 Bing 地图并没有解决这个问题。我必须从 xaml 中删除它们才能运行我的应用程序。看起来 bing 地图的库不包含在包中。

或者也许我以错误的方式安装它？我通过在 PowerShell 脚本上单击右键来安装它，并在 power shell 中运行它。之后，我的应用程序可以在 pc 上使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:14:33.093

我发现了问题。

在我对我的地图进行认证后，我发现它失败了，因为 C++ API 不包括在内，并且被 Bing Maps 使用。我添加了对 Microsoft Visual C++ 的引用，它解决了问题并通过了认证

# javascript - Javascript：如何编写用户输入数字并返回其他三个数字的脚本？

> ID：13039777
> 
> 赞同：1
> 
> 时间：2012-10-23T21:43:22.373
> 
> 标签：javascript

我什至不太确定如何让自己说清楚，我很抱歉......但我一直在互联网上搜索类似的 JavaScript 代码，我什至不太确定如何表达这个问题......

基本上，我希望用户输入一件事，我希望弹出其他内容。

例如，用户会在文本字段或下拉菜单中输入一个数字，比如“10”，然后会弹出三个其他数字，例如 15.25、16.50 和 17.75（以弹出窗口形式，或者只是在一个简单的句子中，或者在其他文本字段中......这并不重要）。

我正在做的是我想在网站上发布一个用于贷款支付的估算计算器（可选择 30 天、60 天和 90 天的还款选项）。

这段代码中不涉及任何数学运算（我知道我是否必须输入很多数字——我已经有了这些数字！）。我不想创建计算器，因为我认为计算器会更复杂（我的目标是简单！）......贷款费用和利息因一组数字而异，所以如果是是一个计算器，脚本可能会变得非常复杂（因为我们不是在看一个简单的 1 + 1 = 2 等式......它更像是 1 + 1.50 + 1.00 = 3.50，或 10.00 + 4.00 + 1.25 = 15.25，甚至30.00 + 6.00 + 1.75 等等，没有一致性）。

所以我想一个更简单的方法来解决这个问题，那就是让数字随时可用，无需计算。因此，如果他们输入 1，他们将得到 3.50、4.50 和 5.50 的结果。

不知道，可能问的有点多。。。。

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:50:23.207

在*最简单*的形式中，它将如下所示：

```
var magic_box = {
    '1': [3.50, 4.50, 5.50],
    '2': [2.50, 34.50, 5.55],
    '3': [1.50, 0.50, 15.50]
};

var what = prompt( 'Tell me the magic number!' );
alert( magic_box[ what ] ); 
```

我们使用哈希映射（又名 javascript 对象），其中每个元素都是一个数组，这些数组的每个元素都是您想要的数字。

然后，我们给用户一个带有问题的弹出窗口，并将他的答案（或他的*输入*）存储到变量中。

然后我们使用这个变量作为我们的哈希映射的键。

* * *

*ps：上面的解决方案有几个问题，所以纯粹是出于教育原因。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:57:22.260

基于@c69 的答案，如果每组数字都有一个范围，则将最小值、最大值添加到三个数字中，循环遍历数组，进行包含检查，停在数字在范围内的行上

# ios - 将非 ARC 转换为 ARC 项目而不重新创建它？

> ID：13039779
> 
> 赞同：19
> 
> 时间：2012-10-23T21:43:31.580
> 
> 标签：ios, automatic-ref-counting

我只是想知道是否可以将非 ARC 项目转换为 ARC 而无需重新创建它？谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-23T21:47:21.843

在 Xcode 7 中，您可以使用 Edit | 转换 | 转换为 Objective-C ARC 菜单。

* * *

Xcode 7 之前的版本：

在 Xcode 中，使用 Edit | 重构 | 转换为 Objective-C ARC 菜单。无需重新创建项目。

![在此处输入图像描述](../Images/b1a4948decbf7b59e7b5cb1c07af3857.png)

# ruby-on-rails - 迭代 3 路连接

> ID：13039782
> 
> 赞同：0
> 
> 时间：2012-10-23T21:43:38.353
> 
> 标签：ruby-on-rails, ruby, activerecord, join

```
class Participant
  has_many :cells
end

class Round
  has_many :cells
end

class Question
  has_many :cells
end

class Cell
   belongs_to :participant
   belongs_to :question
   belongs_to :Round
end

a = an instance of Participant, Question or Round
b = an instance of Participant, Question or Round 
```

我想在属于指定 a 和 b 的所有 Cell 实例上编写一个迭代。我知道 a 和 b 不是同一类的实例，但我不知道它们是哪一个。

我想我可以写：

```
if a.class == Participant && b.class == Question
  Cell.select(participant_id: a.id, question_id: b.id).each do 
  ... and so on 
```

但这真的很丑。我认为必须以某种方式使用 join 方法，但我无法弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:52:48.210

尝试：

```
Cell.where(:"#{a.class.to_s.underscore}_id": a.id, :"#{b.class.to_s.underscore}_id": b.id).each do |cell|
  # your code
end 
```

但我很确定有更好的方法。

# c# - 你如何转换 IEnumerable 到 Int32

> ID：13039783
> 
> 赞同：6
> 
> 时间：2012-10-23T21:43:55.017
> 
> 标签：c#, linq

我有一个 linq 查询，它将返回 1 个结果，该结果将是一个整数。我想将此分配给一个 Int32 变量以供以后使用，但是我收到一条错误消息，内容为：“int 不包含 RatingNumber 的定义，并且找不到接受 int 类型的第一个参数的扩展方法 RatingNumber（您是否缺少using 指令或程序集引用？）

这是调用查询的代码

```
IEnumerable<int> newRatingNumber = getNewRecipeNumbers.newRatingNum();

        foreach (var a in newRatingNumber)
        {
            ratingNumber = a.RatingNum;
        } 
```

这是查询：

```
 public IEnumerable<int> newRatingNum()
    {
        ratingTableAdapter.Fill(recipeDataSet.Rating);
        var newRatingNum = (from a in recipeDataSet.Rating
                            where a.UserRating == 0 &&
                            a.FamilyRating == 0 &&
                            a.HealthRating == 0 &&
                            a.EaseOfCooking == 0 &&
                            a.CookingTime == 0
                            select a.RatingNum);
        return newRatingNum;
    } 
```

我尝试使用 Convert.ToInt32 将结果转换为 int，这消除了编译错误，但这却产生了 InvalidCastException。有人有想法么？

谢谢您的帮助

克雷格

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-23T21:48:35.540

Linq 查询的结果不是单个 Int 值，而是一个 IEnumerable。因此，您需要从中获取一个值，在您的情况下是第一个值：

```
var newRatingNum = (from a in recipeDataSet.Rating
                        where a.UserRating == 0 &&
                        a.FamilyRating == 0 &&
                        a.HealthRating == 0 &&
                        a.EaseOfCooking == 0 &&
                        a.CookingTime == 0
                        select a.RatingNum).FirstOrDefault(); 
```

`FirstOrDefault()`将返回 Enumberable 中的第一个值，如果 Enumberable 为空，则返回 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T21:49:42.623

如果你有一个`List<Int32>`，理论上你有不止一个。您可以使用`First()`, `Last()`, 或`Single()`从该列表中拉出单个元素。它们都有`OrDefault()`版本，如果列表为空，则返回 0 - 否则会出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:50:50.380

您不能使用 Single 或 First 方法来隔离单个 Int32 吗？当您需要一个时，IEnumerable 隐含许多。

# ruby-on-rails - Rails / Error Bundler::HTTPError 在请求依赖 API 期间

> ID：13039791
> 
> 赞同：9
> 
> 时间：2012-10-23T21:44:11.380
> 
> 标签：ruby-on-rails, gem, dependencies, bundler, rails-engines

我有一个不久前创建的 cms 引擎，我已经多次使用它，没有任何问题。但截至今天，我在尝试更新引擎/gem 或将其推送到 Heroku 时不断收到此错误。

这是我得到的错误：

```
Error Bundler::HTTPError during request to dependency API 
```

我知道过去几天Rubygems“依赖API”已经关闭。但它应该再次上升。如何进一步解决此错误并确定这是我的问题还是 Rubygems 的问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T01:28:53.487

**免责声明：这个答案可能不再有效，因为最初的问题是关于 Rubygems Dependency API 的旧问题，该问题已得到修复。此答案为该问题提供了临时解决方案，因此如果它现在不适合您，请不要投反对票。话虽如此，你去：**

查看此邮件列表线程：[https ://groups.google.com/forum/?fromgroups=#!topic/rubygems-org/zP-lZ-lCbqM](https://groups.google.com/forum/?fromgroups=#!topic/rubygems-org/zP-lZ-lCbqM)

据它说，一个*非常*临时的解决方案是更换

```
source 'https://rubygems.org' 
```

和

```
source "http://bundler-api.herokuapp.com" 
```

我还引用了另一个[邮件列表回复](https://groups.google.com/d/msg/rubygems-org/L4dkcw8Axfk/5jlTt-2ssXIJ)：

> 只是为了记录，它对您有用的原因是 Bundler 在没有依赖 API 的情况下工作得很好。这有点慢，当然，但任何以前工作的 Gemfile 源代码行现在都可以继续工作。

# c# - 如何根据浏览器版本捆绑特定的 CSS？

> ID：13039792
> 
> 赞同：0
> 
> 时间：2012-10-23T21:44:18.427
> 
> 标签：c#, asp.net-mvc-4, asp.net-optimization

我正在使用 MVC4`StyleBundle`捆绑一堆 CSS。只有 IE 9 或更低版本才需要一个 CSS。

在我`BundleConfig`的方法类中`RegisterBundles`，我有：

```
if (HttpContext.Current.Request.Browser.Browser.Trim().ToUpperInvariant().Equals("IE") && HttpContext.Current.Request.Browser.MajorVersion <= 9)
    cssBundle.Include("~/Content/ie.css"); 
```

但后来我得到了一个`Request is not available in this context`错误。在方法期间是否无法检测浏览器`RegisterBundles`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:30:16.657

您可以添加如下内容：

```
<script type="text/javascript">
    var domLib = '@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Zepto")';
    if (navigator.userAgent.indexOf('MSIE ') > -1) {
        domLib = '@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Jquery")';
    }
    document.write('<script src="' + domLib + '"><\/script>');
</script> 
```

在此示例中，我使用库 Zepto，如果是 Internet Explorer，则使用 Jquery。这对我来说可以。皮埃尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:50:31.593

是的，Tejs 是正确的。Bundles 是全局的，不能根据请求而变化，因为它们在第一次被引用后被缓存在服务器上。因此，您在上面所做的问题在于，取决于哪个浏览器首先点击请求，这将填充缓存并确定所有后续请求将收到什么，无论它们是否是 IE9。

# python - SWIG 怎么了？

> ID：13039798
> 
> 赞同：2
> 
> 时间：2012-10-23T21:44:45.547
> 
> 标签：python, swig

我正在开发一个需要我将一些 C++ 库绑定到 Python 的项目。就在今天，我发现了有关 SWIG 的详细信息，我很高兴能够使用它，但网站： [http](http://www.swig.org/) ://www.swig.org/似乎已关闭，而且不仅对我而言。我不知道是我来错了日子，还是项目消失了。有谁知道发生了什么？

我能够从 GitHub 镜像仓库和 Homebrew 中获得一份副本，但我不确定如果该项目已被放弃，我是否应该花时间使用它。

谢谢，我希望这是问的正确地方。

# javascript - 使用 Regex/Javascript 获取元素 ID 的组值

> ID：13039805
> 
> 赞同：0
> 
> 时间：2012-10-23T21:45:25.467
> 
> 标签：javascript, jquery, regex

我有一个带有元素 id 的 DIV；例如“bgjhkn2n2-20”。我正在尝试正确使用正则表达式，以便可以根据 id 将报告动态加载到 div 中。

console.log(elemID) 按预期打印 bgjhkn2n2-20 。它没有打印通常作为元素 ID 前缀的 #。`console.log(repDBID[0])`打印完整的元素 ID；但我无法让萤火虫打印我从 regextester 中的类似测试中获得的组`console.log(repDBID[0])`。如果我将索引号附加到 match 语句，它将返回 null。

帮助？

```
var baseURL = window.location.protocol + "//" + window.location.hostname + "/db/";
var genREP = "?a=API_GenResultsTable&qid=";

$('#tab1 div').each(function (e){
    var elemID = this.getAttribute('id');
    console.log(elemID);
    var pattern=/([a-z0-9]{9})-([1-9]{1}[0-9]*)/g
    var repDBID = elemID.match(pattern); //get dbid    
    console.log(repDBID[0]);
    var repID = elemID.match(pattern)[2]; //get qid
    //console.log(repID);
    //$(this).load(baseURL+repDBID+genREP+repID);
     $('#repTabs').tab(); //initialize tabs
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:50:36.180

从您的正则表达式中删除`g`它应该可以正常工作：

```
var baseURL = window.location.protocol + "//" + window.location.hostname + "/db/";
var genREP = "?a=API_GenResultsTable&qid=";

$('#tab1 div').each(function(e) {  // You might need `#tab1 > div`
    var parts = this.id.match(/([a-z0-9]{9})-([1-9]{1}[0-9]*)/);
    var repDBID = parts[1];
    var repID = parts[2];

    $(this).load(baseURL + repDBID + genREP + repID);

    $('#repTabs').tab();
}); 
```

这就是我的意思：

```
> id.match(/([a-z0-9]{9})-([1-9]{1}[0-9]*)/g);
["bgjhkn2n2-20"]
> id.match(/([a-z0-9]{9})-([1-9]{1}[0-9]*)/);
["bgjhkn2n2-20", "bgjhkn2n2", "20"] 
```

# java - “HTML 属性不可序列化”异常 (java)

> ID：13039806
> 
> 赞同：0
> 
> 时间：2012-10-23T21:45:30.410
> 
> 标签：java, xml, xml-serialization, document, jtextpane

我有一个`Jtable`使用自定义渲染器和编辑器，`JTextPane`用作编辑器和渲染器，`DefaultStyledDocument`用作文本模型。该表包含超链接，它们是带有`HTML.Attribute.HREF`属性的文本。为了将此样式文本保存到数据库中，我需要将其转换`DefaultStyledDocument`为 XML 并尝试这样做会引发此异常：

> `javax.swing.text.html.HTML$Attribute`不可序列化为`AttributeSet`.

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:48:38.607

`HTML.Attribute`不是`Serializable`。由于某种原因，Java 开发人员决定不将序列化支持添加`HTML.Attribute`到`HTML.Tag`. 最可能的原因是`HTMLDocument`使用它们被序列化为 HTML 文本，因此不需要直接序列化 Java 对象。

很容易修复，真的。创建自己的属性：

```
public final class LinkAttribute implements Serializable {
    private static final long serialVersionUID = -472010305643114209L;

    public static final LinkAttribute HREF = new LinkAttribute("href");

    private final String name;

    private LinkAttribute(final String name) {
        this.name = name;
    }

    public boolean equals(final Object o) {
       return o instanceof LinkAttribute
              ? name.equals(((LinkAttribute) o).name)
              : false;
    }

    public int hashCode() {
        return name.hashCode();
    }

    public String toString() {
        return name;
    }
} 
```

这大致是`HTML.Attribute`类的实现，`Serializable`添加了接口。

在您使用过的`LinkAttribute.HREF`任何地方使用`HTML.Attribute.HREF`。

# firefox - swfobject // Chrome 和 IE 中的错误，适用于 FF // 或 // 已在 IE 和 Chrome 中修复，而不是 FF

> ID：13039808
> 
> 赞同：1
> 
> 时间：2012-10-23T21:45:41.457
> 
> 标签：firefox, google-chrome, swfobject

使用 SWFObject 2.2，使用 swfobject_generator_1_2_air 为动态文件交换制作代码，我可以让我的 .swf 与静态图像交换，正如我在所有浏览器中所希望的那样。

不幸的是，当我在测试中使用它们时，css 导航菜单隐藏在 Chrome 22 和 IE9 64x 中的 .swf 后面。但是，Opera & FF 16.0.1 on Win7 64x I 菜单并没有隐藏在 .swf 后面

我以为我有[这个问题](https://stackoverflow.com/questions/1081863/how-to-prevent-javascript-menu-from-getting-hidden-under-flash-video-swfobject)的解决方案。然而，同时添加

```
params.wmode = "opaque"; 
```

修复了 Chrome 和 IE 中的导航菜单错误，FF 失败。Opera 在任一表现形式中都成功（添加或不添加上述代码）。我目前无法测试 safari。

谢谢。

* * *

## Nav 在 Chrome / IE9 中部分隐藏在 .swf 后面，而 .swf / nav 都可以在 FF / Opera 中使用

```
<script type="text/javascript">
        var flashvars = {};
        var params = {};

        var attributes = {};
        attributes.id = "ULA AirX Backpack 360 photos";
        swfobject.embedSWF("360/airx/airx.swf", "myAlternativeContent", "400", "575", "9.0.0", false, flashvars, params, attributes);
    </script> 
```

* * *

## 导航可见：Chrome & IE & Opera，但 FF 不显示 .swf

```
<script type="text/javascript">
        var flashvars = {};
        var params = {};
        params.wmode = "opaque";
        var attributes = {};
        attributes.id = "ULA AirX Backpack 360 photos";
        swfobject.embedSWF("360/airx/airx.swf", "myAlternativeContent", "400", "575", "9.0.0", false, flashvars, params, attributes);
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:30:50.670

首先，将 SWF 设置为使用`wmode` `opaque`或`transparent`。`opaque`除非您确实需要 SWF 透明，否则建议您坚持使用。`transparent`使用更多的 CPU 并引入了怪癖；`opaque`被认为更安全。

其次，确保您已`position`在 CSS 中指定。它可以是`absolute`or `relative`，但您需要指定它。（不，`z-index`没有影响，因为 Flash Player 插件会忽略`z-index`.）

有关工作示例，请参阅本[教程。](http://learnswfobject.com/advanced-topics/placing-html-elements-over-a-flash-movie/)

# php - 取消设置所有变量？（不是 $_SESSION[''] 或全局变量）

> ID：13039810
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:45:45.577
> 
> 标签：php, variables, ram

好的，所以我正在寻找一种方法来取消设置页面生成的所有变量，而不是全局变量或会话。

我在另一个 SO 问题中发现了这一点：

```
$list_of_vars =  array_diff(get_defined_vars(), $GLOBALS); // Was just get_defined_vars() before Marc B corrected me in his post.
foreach($list_of_vars as $var){
    unset($var);
} 
```

问题是，在评论中有人说这个 unsets() ALL 就像在所有变量中一样，*包括*全局变量和会话。我需要一种方法来重置所有非全局变量和非会话变量

我这样做是为了优化 RAM。如果这没有帮助，还有其他优化 RAM 的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:48:54.823

这绝对不是优化脚本 RAM 使用的方法。

您想确定脚本的问题区域，并着手解决这些问题。

如果不知道您的脚本做了什么，就很难给出任何提示。以下是一些关于 SO 讨论的指针（部分是非常高级的和/或特定于框架的，但它们仍然包含有价值的信息）：

*   [如何优化php进程内存使用？](https://stackoverflow.com/questions/10353568/how-to-optimize-the-php-process-memory-usage)（如果您可以选择安装新软件来帮助您的 PHP 进程）

*   [优化我的表现](https://stackoverflow.com/questions/8559871/optimize-my-performance)

*   [简单但繁重的应用程序消耗大量资源。如何优化？](https://stackoverflow.com/questions/6785287/simple-but-heavy-application-consuming-a-lot-of-resources-how-to-optimize)（关于mySQL使用优化真的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:55:45.003

如果您希望修复脚本中的大量 RAM 使用问题，您最好通过分析它来查看您的脚本正在做什么！

# spring - 如何在 Spring mvc 中更新页面

> ID：13039812
> 
> 赞同：0
> 
> 时间：2012-10-23T21:45:58.927
> 
> 标签：spring, spring-mvc

有人可以指点我正确的方向吗，这是我正在尝试编辑的一个非常简单的弹簧形式。我已经尝试了来自网络的各种示例，但无法使其正常工作。

```
<form:form id="myForm" modelAttribute="contacts" method="Post" action="contacts.html" commandName="contacts">

        <label>First Name<span class="small">Edit your first name</span></label>
        <form:input path="firstName" /><br>
        <form:errors path="firstName" cssClass="error" /><br>

        <label>Last Name<span class="small">Edit your last name</span></label>
        <form:input path="lastName" /><br>
        <form:errors path="lastName" cssClass="error" /><br>

        <button type="submit">Amend</button>
    </form:form>

protected static final String EDIT_VIEW_KEY = "editForm";

@Autowired
private ContactsService conService;

@RequestMapping(value="/edit/{id}", method = RequestMethod.GET)
public String showEditForm(@PathVariable("id") Integer id,
        @ModelAttribute("contacts") Contacts contacts,Model model){

    model.addAttribute("contacts", conService.listContactsById(id));
    return EDIT_VIEW_KEY;
} 
```

我得到的错误是这样的；

```
org.springframework.beans.NotReadablePropertyException: Invalid property 'firstName' of bean class [java.util.ArrayList]: Bean property 'firstName' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?
org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:729)
org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:721)
org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:147)
org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)
org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
org.apache.jsp.WEB_002dINF.views.editForm_jsp._jspx_meth_form_005finput_005f0(editForm_jsp.java:214)
org.apache.jsp.WEB_002dINF.views.editForm_jsp._jspx_meth_c_005fforEach_005f0(editForm_jsp.java:173)
org.apache.jsp.WEB_002dINF.views.editForm_jsp._jspx_meth_form_005fform_005f0(editForm_jsp.java:128)
org.apache.jsp.WEB_002dINF.views.editForm_jsp._jspService(editForm_jsp.java:85)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)
org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)
org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:103)
org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:96)
org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
org.apache.tiles.renderer.impl.ChainedDelegateAttributeRenderer.write(ChainedDelegateAttributeRenderer.java:76)
org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:336)
org.apache.tiles.template.InsertAttributeModel.renderAttribute(InsertAttributeModel.java:210)
org.apache.tiles.template.InsertAttributeModel.end(InsertAttributeModel.java:126)
org.apache.tiles.jsp.taglib.InsertAttributeTag.doTag(InsertAttributeTag.java:311)
org.apache.jsp.WEB_002dINF.jsp.layout_jsp._jspx_meth_tiles_005finsertAttribute_005f3(layout_jsp.java:180)
org.apache.jsp.WEB_002dINF.jsp.layout_jsp._jspService(layout_jsp.java:98)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)
org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)
org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:09:06.553

您正在将列表传递回您的表单：

```
Invalid property 'firstName' of bean class [java.util.ArrayList] 
```

您的表单需要`firstName`字段之类的东西。

通常，列表不会有`firstName`字段，尽管它们可能包含具有字段的对象的*集合*`firstName`。您的意思是使用每个项目的表单来迭代列表吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T13:06:02.230

您`modelAttribute="contacts"`在表单中使用，我认为联系人是 ArrayList，因此它不包含 firstName，如果您的列表中有 bean 的对象包含“firstName”，您可以使用它来迭代它或使用`modelAttribute="contacts[${i}]"`并使用您想要的值设置 i using。

# eclipse - 如何使用无头 p2 安装 m2e-wtp

> ID：13039813
> 
> 赞同：0
> 
> 时间：2012-10-23T21:45:59.793
> 
> 标签：eclipse, p2

我有这个问题我一直在努力解决一段时间。我想在自动 Eclipse 安装过程中自动安装 Eclipse 插件。到目前为止，我已经能够在新的 eclipse-jee-juno-SR1-linux-gtk-x86_64.tar.gz 上安装以下内容：

```
./eclipse -nosplash \
  -application org.eclipse.equinox.p2.director \
  -repository http://dist.codehaus.org/groovy/distributions/greclipse/snapshot/e4.2/ \
  -installIU org.codehaus.groovy.jdt.patch.feature.group \
  -installIU org.codehaus.groovy.eclipse.feature.feature.group \
  -installIU org.codehaus.groovy17.feature.feature.group \
  -installIU org.codehaus.groovy18.feature.feature.group \
  -installIU org.codehaus.groovy20.feature.feature.group \
  -repository http://download.eclipse.org/technology/m2e/releases \
  -installIU org.eclipse.m2e.feature.feature.group \
  -repository http://repo1.maven.org/maven2/.m2e/connectors/m2eclipse-mavenarchiver/0.15.0/N/0.15.0.201207090125/ \
  -installIU org.sonatype.m2e.mavenarchiver.feature.feature.group \
  -repository http://repo1.maven.org/maven2/.m2e/connectors/m2eclipse-buildhelper/0.15.0/N/0.15.0.201207090124 \
  -installIU org.sonatype.m2e.buildhelper.feature.feature.group \
  -repository http://download.jboss.org/jbosstools/updates/m2e-extensions/m2e-apt \
  -installIU org.jboss.tools.maven.apt.feature.feature.group \
  -repository http://download.jboss.org/jbosstools/updates/m2e-extensions/m2e-jdt-compiler/ \
  -installIU org.jboss.tools.m2e.jdt.feature.feature.group 
```

一切都很好，但是当我尝试导入 Groovy、Maven 管理的 Web 应用程序项目时，Eclipse 开始抱怨缺少 m2e-wtp。现在这是真正的问题。我可以使用 UI（这是我不想要的）安装它，然后它可以工作，但会尝试安装 org.jboss.tools.maven.apt.feature.feature.group 和 org.jboss.tools.m2e。 jdt.feature.feature.group 再次丢失 org.eclipse.m2e.wtp.feature.feature.group。当我使用 P2 安装它时，如下所示

```
./eclipse -nosplash \
  -application org.eclipse.equinox.p2.director \
  -repository http://download.eclipse.org/m2e-wtp/releases/ \
  -installIU org.eclipse.m2e.wtp.feature.feature.group \ 
```

即使 Eclipse 在 Eclipse Market 上找不到任何东西，也没有任何效果。

有人可以阐明如何正确安装这些依赖项吗？

可以在 Bitbucket 上找到示例项目：[https ://bitbucket.org/padcom/groovy-spring-web-example](https://bitbucket.org/padcom/groovy-spring-web-example)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:47:38.267

我发现了问题所在。我忘记添加

```
org.codehaus.groovy.m2eclipse.feature.group 
```

安装 Groovy Eclipse 时的功能，因此需要注意连接 Eclipse 和 Maven。

# vba - Excel VBA PivotCaches 不接受源

> ID：13039814
> 
> 赞同：0
> 
> 时间：2012-10-23T21:46:00.823
> 
> 标签：vba, excel, excel-2010, pivot-table

我创建了一个基于源范围自动创建数据透视表的子。当源数据范围较小时，代码可以正常工作。但是，当我在一些更大的数据（110'000 行）上运行它时，我得到运行时错误 13（类型不匹配）。

我不明白它为什么这样做。我可以在另一个范围内运行完全相同的代码，一切都很好？？？

有人建议为什么会发生这种情况？

```
Set rDataRange = wsData.Range("A1").CurrentRegion

    ' Create the cache
Set PTCache = ActiveWorkbook.PivotCaches.Create( _
SourceType:=xlDatabase, _
SourceData:=rDataRange) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:08:05.293

这个问题似乎在问（并回答）一个非常相似的问题： [Type mismatch error when creating a pivot table in Excel with VBA](https://stackoverflow.com/questions/8450450/type-mismatch-error-when-creating-a-pivot-table-in-excel-with-vba)

您绝对确定您对更大范围的引用是有效的吗？你确定更大的范围没有缺少标题，不包含额外的空白行或列，没有任何错误数据吗？

# php - URL 获取错误

> ID：13039815
> 
> 赞同：0
> 
> 时间：2012-10-23T21:46:01.570
> 
> 标签：php, urlencode, urldecode

我有以下网址：

```
/eventfunctions.php?eventtype=Don%27t+Touch+The+Floor 
```

当我使用

```
$_GET['eventtype']; 
```

它显示为 Don\'t 但我无法弄清楚为什么 \ 存在或如何摆脱它。其他 % 符号似乎都没有 \，只有 '.

我如何删除这个\？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:55:55.197

反斜杠会自动添加到您的`$_GET`和`$_POST`变量中，因为您激活了 PHP [magic_quotes](http://www.php.net/manual/en/security.magicquotes.what.php) ini 选项。该指令已弃用，而是建议在用户需要时进行转义，而不是自动转义，您可能正在使用旧的 PHP 版本来**启用**该选项。

如果您的代码将以这种方式与最新的 PHP 版本一起使用，您可以编写可移植代码：

```
if (get_magic_quotes_gpc()) { //if magic quotes is active
   stripslashes($_GET['eventtype']); //remove escaping slashes
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:48:19.710

```
stripslashes($_GET['eventtype']); 
```

或者，如果您没有对 var 进行 url 解码：

```
stripslashes(urldecode($_GET['eventtype'])); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:50:10.990

反斜杠是一个转义字符，添加用于防止字符串中断。

想象

```
$str = 'Don't'; 
```

要删除反斜杠，请使用方法[stripslashes](http://php.net/manual/en/function.stripslashes.php)

```
$str = stripslashes($_GET['eventtype']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T21:52:11.253

那是因为**magic_quotes_gpc**。

您可以通过在 .htaccess 文件中添加以下行来禁用它：

```
php_flag magic_quotes_gpc Off 
```

或者只是在您的 php.ini 文件中将 magic_quotes_gpc 值更改为 Off。

# php - 无法验证文本区域

> ID：13039817
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:46:11.300
> 
> 标签：php, jquery, html

我无法验证下面的文本区域，不知道我的代码有什么问题。

```
<div id="chooseForm">
    <input type="checkbox" name="ArticlesOrderForm" value="ArticlesOrderForm">
    <b>Articles Order Form </b>
</div>'; 
```

```
$echo .= '  <script>
        jQuery(function($) {
            $(".formGroup").hide();
            $("#chooseForm input:checkbox").on("change", function() {
                if($(this).is(":checked")) {
                    $("#" + $(this).val()).show();
                }
                else {
                    $("#" + $(this).val()).hide();
                }
            });
        });

    </script>'; 
```

```
 $echo .=  '<div id="ArticlesOrderForm" class="formGroup">
                <legend>Articles Order Form</legend>
                <b><label for="article_keywords">Keywords/Titles<span class="reqd">*</span> : </label></b> <textarea rows="6" cols="50" id="article_keywords" name="article_keywords" > </textarea>
            </div>';
<br/><br/>

if($_POST['ArticlesOrderForm'] == 'checked') {  

  if(!isset($_POST['article_keywords']) || empty($_POST['article_keywords'])) {
    $myerror= '<li>'.__('<strong>Keywords/Titles</strong> - missing.','article_keywords').'</li>';
    }   
} 
```

如果有人没有进入该文本区域，我应该收到一条消息“关键字/标题 - 缺失”。有人可以告诉我我的逻辑有什么问题吗？

请在此处找到完整代码：http: [//jsfiddle.net/DTcqk/3/](http://jsfiddle.net/DTcqk/3/) 和此处：http: [//jsfiddle.net/YYAbm/](http://jsfiddle.net/YYAbm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:05:52.730

默认情况下，您的 textarea 不为空：

```
<textarea rows="6" cols="50" id="article_keywords" name="article_keywords" > </textarea>
                                                    you have space here ----^ 
```

所以它不会输入您的以下内容`if`：

```
if(!isset($_POST['article_keywords']) || empty($_POST['article_keywords'])) { 
```

`trim()`如果你想在你的验证中捕获只有空格的变量，你应该使用`if`，如下所示：

```
$_POST['article_keywords'] = trim($_POST['article_keywords']);
if(!isset($_POST['article_keywords']) || empty($_POST['article_keywords'])) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T21:52:16.590

尝试更换

```
if($_POST['ArticlesOrderForm'] == 'checked') { 
```

和

```
if($_POST['ArticlesOrderForm'] == 'ArticlesOrderForm') { 
```

输入类型复选框不发布“选中”它发布复选框的值属性。

# node.js - 如何在 nodejs require() 中的另一个模块中使用一个模块功能

> ID：13039825
> 
> 赞同：0
> 
> 时间：2012-10-23T21:46:41.643
> 
> 标签：node.js, module, require

我想在另一个模块中使用一个模块功能

文件 main.js

```
var _ = require("./underscore.js");
var foo = require("./bar.js");
foo.publish(...); 
```

文件 bar.js

```
(function(e) {
    var array = [...];
    e.publish = function(t, args) {
        _.each(array, function(...) {...});
    });
})(exports); 
```

我尝试了几种变体，但我不确定解决此错误的最佳方法：

```
ReferenceError: _ is not defined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T23:30:59.800

是的，对于您的示例，您应该在每个需要该变量的模块中使用。

```
var _ = require("./underscore.js"); 
```

但是，如果您需要在多个模块之间传输一个对象实例，您可以使用*流程*对象使其成为全局对象。但这是**不好**的做法。

```
process._ = require("./underscore.js"); 
```

在模块之间传递对象实例的好方法是将它们作为函数参数传递，但是您需要更改 bar.js 以返回工厂函数，而不是对象本身。

```
module.exports = function(_) {
   var e = {};
   var array = [...];
   e.publish = function(t, args) {
      _.each(array, function(...) {...});
   });
   return e;
} 
```

在 main.js 中：

```
var _ = require("./underscore.js");
var foo = require("./bar.js")(_);
foo.publish(...); 
```

我希望你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:49:57.710

您分配结果的变量是模块 main.js 的本地变量，因此您无法在 bar.js 中访问它。相反，您还应该在 bar.js 中使用下划线模块。

您也可以跳过`var`when 声明`_`并将其设为全局变量，但这会带来全局变量的所有问题，例如：

*   该`bar.js`模块没有明确说明其依赖关系，因此很难理解它期望全局需要下划线；
*   它需要特定的初始化顺序 - 如果您稍后移动`_ = require(underscore)`，您将再次遇到未定义的错误，并且可能很难理解原因；
*   需要的所有其他模块`bar.js`也需要`underscore`。

# macos - Heroku 和 OS X 入门 - 无法登录

> ID：13039828
> 
> 赞同：0
> 
> 时间：2012-10-23T21:46:48.070
> 
> 标签：macos, heroku, login

注册并安装 Heroku toolbelt 后，我​​尝试按照说明（[https://devcenter.heroku.com/articles/quickstart](https://devcenter.heroku.com/articles/quickstart)）登录。我输入**了 $ heroku login**，我应该会收到电子邮件和密码提示，但我只得到一个字作为回应：登录。我不知道如何继续，我试图找到解决方案 - 但我没有运气。谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:19:35.867

好的，我没有误解你;-)

二进制文件`heroku`要么未安装，要么不在您的`$PATH`. 当您键入

```
$heroku login 
```

使用前导`$`，shell 解释`$heroku`为一个未设置的变量，它接受下一个命令`login`。这个命令让你可以在你的机器上以另一个用户的身份登录……</p>

所以你必须找出 Heroku 的安装出了什么问题，因为你得到`heroku: command not found`了，正如你在我删除的答案中所写的那样。

如果 Heroku 安装正确，您应该可以在 Terminal.app 中使用以下命令（根据文档）登录：

```
heroku login 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:47:45.300

经过几个小时的搜索，我终于找到了一些东西。我使用了这篇文章的说明： http: [//samuelsharaf.wordpress.com/tag/heroku-install](http://samuelsharaf.wordpress.com/tag/heroku-install)

更具体地说，我只使用了这些命令：

```
curl -L https://get.rvm.io | bash
gem install heroku 
```

现在它工作正常。无论如何，谢谢你的时间:)

# javascript - 如何将 Javascript 项目移植到 Coffeescript

> ID：13039830
> 
> 赞同：1
> 
> 时间：2012-10-23T21:46:57.227
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, coffeescript

如果我想将现有项目从 Javascript 移植到 Coffeescript（在我的情况下，在 Rails 应用程序中），我需要转换现有的 Javascript 文件吗？我担心转换非常大的 CDN 托管文件，如 jQuery 和 jQueryUI。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:53:10.130

正如@asawyer 所说，您不需要将现有的 JavaScript 库等移植到 CoffeeScript。

CoffeeScript 的存在是为了方便您编写自己的自定义代码。因为 CoffeeScript 编译成 JavaScript，所以它可以很好地与其他 JavaScript 库（如 jQuery）配合使用，而无需将这些库转换为 CoffeeScript。

如果您有自己的代码想要转换成 CoffeeScript，我发现[js2coffee.org](http://js2coffee.org/)非常有帮助。它还可以作为“用 JavaScript 思考”并了解如何在 CoffeeScript 中完成的一个很好的学习工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:09:54.407

在 Rails 中，coffeescript 是通过编译器运行到 javascript 中的。如果需要，您可以包含纯 javascript 文件 (.js)，或者编译成 js 的咖啡脚本 (.js.coffee)。如果您只是想包含遗留文件，则根本不需要进行任何转换——转换为 coffeescript 可能没有意义，只是让 rails 编译器在资产管道中转换回 javascript...见[http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)了解 Rails 团队关于如何在资产管道中使用 js 的更多信息。

jQuery 已经包含在较新版本的 Rails（3.1 及更高版本）中，因此这应该不是问题。 [http://weblog.rubyonrails.org/2011/4/21/jquery-new-default/](http://weblog.rubyonrails.org/2011/4/21/jquery-new-default/)

此外，许多其他 jQuery 插件都有一个可以简单地包括在内的宝石——无需在那里重新发明轮子。

# ruby-on-rails - 铁轨新手。索引操作不喜欢我的初始化方法。为什么？

> ID：13039833
> 
> 赞同：2
> 
> 时间：2012-10-23T21:47:14.907
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我对 Rails 完全陌生，并且在玩代码以使页面正常工作。链接*localhost:3000/zombies/1*有效（显示操作），但 localhost:3000/zombies（索引操作）无效。以下是我的路线和控制器：

**路线是：** 资源：僵尸

**控制器是：**

```
 class ZombiesController < ApplicationController
    before_filter :get_zombie_params

   def index
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @zombies }
    end
   end

   def show
    @disp_zombie = increase_age @zombie, 15
    @zombie_new_age = @disp_zombie
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @zombie }
    end
  end

  def increase_age zombie, incr
   zombie = zombie.age + incr
  end

  def get_zombie_params
    @zombie=Zombie.find(params[:id])
    @zombies = Zombie.all

  end
end 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:55:17.760

根据评论编辑答案

> 我收到一个错误页面：ActiveRecord::RecordNotFound in ZombiesController#index 找不到没有 ID Rails.root 的 Zombie：C:/Sites/TwitterForZombies Application Trace | 框架跟踪 | 完整跟踪 app/controllers/zombies_controller.rb:85:in `get_zombie_params'

`localhost:3000/zombies`调用action的url`index`不包含`id`参数。

这就是该应用程序在`@zombie=Zombie.find(params[:id])`.

如果您想解决此问题，请仅`before_filter`在`show`操作时使用。

`before_filter :get_zombie_params, only: :show`

并将其插入到我最初建议的索引操作中。

```
def index
  @zombies = Zombies.all
  ...
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T00:20:45.667

发生这种情况是因为当您定义时`resources :zombies`，您会获得以下路线：

```
/zombies
/zombies/:id 
```

因此，当导航到`/zombies`您没有 a`params[:id]`时，它是`nil`

`Zombie.find`如果找不到具有给定 id 的任何记录并停止进一步处理您的代码，该方法将引发错误。

`Zombie.find_by_id`如果您不想在没有结果时引发异常，则可以使用。

但我不认为这是你想要的，你宁愿定义一个`get_zombie_by_id`方法和一个`get_all_zombies`方法并将代码与你的代码分开`get_zombie_params`

然后你必须通过改变你的 before_filter 来定义在什么动作之前应该调用哪个方法，在你的情况下：

```
 before_filter :get_zombie_by_id, :only => :show
 before_filter :get_all_zombies, :only => :index 
```

这种方式`Zombie.find(params[:id])`只会在显示动作时被调用。你也可以`:except`用来做相反的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:55:32.363

它确实有效，因为您需要发回（到您的索引视图）您的僵尸列表。get_zombie_params() 正确执行，但不会将 @zombies 发送到 index() 操作。

你需要做：

```
def index 
   @zombies = Zombie.all
   #... the rest of the code
end 
```

# c# - 具有子文件夹结构的 MVC3 路由

> ID：13039836
> 
> 赞同：1
> 
> 时间：2012-10-23T21:47:28.447
> 
> 标签：c#, asp.net, asp.net-mvc-3, routing, subdirectory

我学习 MVC3 已经有一段时间了，虽然我了解了大部分基础知识，但路由是我似乎无法摆脱的东西。我不确定我是否以正确的方式做/思考它，而我在 stackoverflow/google 上阅读的其他答案似乎只会让我更加困惑。

无论如何，情况就是这样。我有一个解决方案（为这个问题清理了它），我想在我的视图文件夹中创建一个结构，以组织我一直用于我的 asp.net webforms 项目的结构中的所有内容。

![解决方案](../Images/fbc487c6c1092aaacef0b0369112638d.png)

无论如何，我想知道是否有可能获得这种结构，在那里我可以将所有部分视图组织到一个名为 UserControls 的特定子文件夹中，其中有更多子文件夹，我可以将我需要的每个部分视图分组特定页面。

理想情况下，我的 Views 文件夹将包含 2 个文件夹：Pages 和 UserControls，我需要的所有内容都将放入子文件夹或子子文件夹中。

好的，如果这是可能的，我将如何开始路由呢？我一直在尝试多种方法来获得任何结果，但它们都以 404 错误告终。

如果这是我的错误方法，那么更好的选择是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:57:08.070

从逻辑上讲，最好通过将局部视图与实际视图分组，如下所示：

```
/Other
    /Partials
         OtherPartial1.cshtml
         OtherPartial2.cshtml
    Index.cshtml
/Some
    /Partials
         SomePartial.cshtml
    Index.cshtml
    SomeOtherView.cshtml 
```

现在，你当然可以按照你的建议去做，但这只是意味着你在其他视图中的助手有更多的文本要写来到达他们想去的地方：

IE。

```
 @RenderPartial("Partials/OtherPartial.cshtml") 
```

VS

```
 @RenderPartial("~/Views/PartialControls/Other/OtherPartial.cshtml") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:02:24.697

您可以手动返回每个操作结果或部分操作结果的视图文件。

我还建议将“UserControls (PartialViews)”文件夹更改为仅 PartialViews。

例如

```
public PartialViewResult OtherPartialView1()
    {
        return PartialView("../PartialViews/OtherViews/OtherPartialView.cshtml");
    } 
```

# audio - .wav 文件中的字节代表什么？

> ID：13039846
> 
> 赞同：46
> 
> 时间：2012-10-23T21:48:25.307
> 
> 标签：audio, wav

当我将 .wav 文件中的数据存储到字节数组中时，这些值是什么意思？我读过它们是两字节表示的，但是这些两字节值中究竟包含什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-24T16:41:52.013

您会听说，音频信号是由某种波表示的。如果你曾经看过这个带有一条上下线的波形图——那基本上就是这些文件里面的内容。看看这个来自[http://en.wikipedia.org/wiki/Sampling_rate的文件图片](http://en.wikipedia.org/wiki/Sampling_rate)

![采样](../Images/8b890f5125a6bd84e8b4c5fe005f9faa.png)

您会看到音频波（灰线）。该波的当前值被反复测量并以数字形式给出。那就是那些字节中的数字。有两个不同的东西可以用这个来调整：你每秒进行的测量次数（这是采样率，以赫兹为单位——这是你每秒抓取的次数）。另一个调整是你测量的精确度。在 2 字节的情况下，一次测量需要两个字节（通常是从 -32768 到 32767 的值）。因此，有了那里给出的这些数字，您可以重新创建原始波形（当然，质量有限，但在以数字方式存储内容时总是如此）。重新创建原始波形是您的扬声器在播放时试图做的事情。

还有一些你需要知道的事情。首先，由于它是两个字节，您需要知道字节顺序（大端、小端）才能正确地重新创建数字。其次，你需要知道你有多少个频道，以及它们是如何存储的。通常你会有单声道（一个通道）或立体声（两个），但更多是可能的。如果您有多个频道，您需要知道它们是如何存储的。通常你会让它们交错，这意味着你在每个时间点为每个通道获得一个值，然后为下一个时间点获得所有值。

举例说明：如果您有两个通道和 16 位数字的 8 字节数据：

```
abcdefgh 
```

在这里`a`，and`b`将组成第一个 16 位数字，它是通道 1 的第一个值，`c`将`d`是通道 2 的第一个数字。`e`并且`f`是通道 1 的第二个值，`g`以及`h`通道 2 的第二个值。你不会听到太多在那里，因为那不会接近一秒钟的数据......

如果你把你拥有的所有信息加在一起，你可以计算出你拥有的比特率，那就是记录器每秒产生多少比特信息。在我们的示例中，您在每个样本上为每个通道生成 2 个字节。如果有两个通道，那就是 4 个字节。您需要每秒大约 44000 个样本来表示人类正常可以听到的声音。所以你最终会得到每秒 176000 字节，也就是每秒 1408000 位。

当然，它不是 2 位的值，而是两个 2 字节的值，否则质量会很差。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-24T22:54:38.283

前 44 个字节通常是标准 RIFF 标头，如下所述： http: [//tiny.systems/software/soundProgrammer/WavFormatDocs.pdf](http://tiny.systems/software/soundProgrammer/WavFormatDocs.pdf) 和此处：[http ://www.topherlee.com/software/pcm-tut-wavformat .html](http://www.topherlee.com/software/pcm-tut-wavformat.html)

Apple/OSX/macOS/iOS 创建的 .wav 文件可能会在头文件中添加一个“FLLR”填充块，从而将初始头文件 RIFF 的大小从 44 字节增加到 4k 字节（可能是为了更好地对齐原始文件的磁盘或存储块）样本数据）。

其余的通常是有符号 2 的补码 little-endian 格式的 16 位线性 PCM，以 44100 Hz 的速率表示任意缩放的样本。

![波形文件格式](../Images/897fe14eb61e9d9f23172e55a037e0d0.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-24T00:31:05.633

WAVE (.wav) 文件包含一个标头，它指示音频文件数据的格式信息。标题之后是实际的音频原始数据。您可以在下面查看它们的确切含义。

```
Positions  Typical Value Description

1 - 4      "RIFF"        Marks the file as a RIFF multimedia file.
                         Characters are each 1 byte long.

5 - 8      (integer)     The overall file size in bytes (32-bit integer)
                         minus 8 bytes. Typically, you'd fill this in after
                         file creation is complete.

9 - 12     "WAVE"        RIFF file format header. For our purposes, it
                         always equals "WAVE".

13-16      "fmt "        Format sub-chunk marker. Includes trailing null.

17-20      16            Length of the rest of the format sub-chunk below.

21-22      1             Audio format code, a 2 byte (16 bit) integer. 
                         1 = PCM (pulse code modulation).

23-24      2             Number of channels as a 2 byte (16 bit) integer.
                         1 = mono, 2 = stereo, etc.

25-28      44100         Sample rate as a 4 byte (32 bit) integer. Common
                         values are 44100 (CD), 48000 (DAT). Sample rate =
                         number of samples per second, or Hertz.

29-32      176400        (SampleRate * BitsPerSample * Channels) / 8
                         This is the Byte rate.

33-34      4             (BitsPerSample * Channels) / 8
                         1 = 8 bit mono, 2 = 8 bit stereo or 16 bit mono, 4
                         = 16 bit stereo.

35-36      16            Bits per sample. 

37-40      "data"        Data sub-chunk header. Marks the beginning of the
                         raw data section.

41-44      (integer)     The number of bytes of the data section below this
                         point. Also equal to (#ofSamples * #ofChannels *
                         BitsPerSample) / 8

45+                      The raw audio data. 
```

我在这里从[http://www.topherlee.com/software/pcm-tut-wavformat.html](http://www.topherlee.com/software/pcm-tut-wavformat.html)复制了所有这些

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-11-14T03:57:14.570

正如其他人指出的那样，wav 文件中有元数据，但我认为您的问题可能是，具体而言，字节（数据，而不是元数据）是什么意思？如果这是真的，那么字节代表记录的信号的**值**。

这意味着什么？好吧，如果您提取代表每个样本的两个字节（例如）（假设是单声道录音，这意味着只录制了一个声道），那么您将得到一个 16 位的值。在 WAV 中，16 位（总是？）有符号和小端（顺便说一下，AIFF，Mac OS 对 WAV 的回答，是大端）。因此，如果您取该 16 位样本的值并将其除以 2^16（或 2^15，我猜，如果它是签名数据），您最终将得到一个标准化为范围内的样本-1 到 1。对所有样本执行此操作并绘制它们与时间的关系（时间取决于记录中的样本数/秒；例如 44.1KHz 表示 44.1 个样本/毫秒，因此第一个样本值将绘制在 t =0，在 t=1ms 时的第 44 个，等等），你得到的信号大致代表了最初记录的内容。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-06-10T19:38:02.267

我想您的问题是“.wav 文件的数据块中的字节代表什么？” 让我们系统地了解一切。
**前奏**：假设我们使用某些设备播放 5KHz 正弦波并将其记录在一个名为“sine.wav”的文件中，并在单通道（单声道）上完成记录。现在您已经知道该文件中的标头代表什么。让我们来看看一些重要的定义：

*   样本：任何信号的样本是指该信号在采样点的幅度。[![t=1.23 处的样本取自振幅为 0.94 的位置。 因此样本值为 0.94](../Images/d2d7278b508aa4ba9d0ed38e4127a9d4.png)](https://i.stack.imgur.com/so95A.png)
*   采样率：可以在给定的时间间隔内采集许多这样的样本。假设我们在 1 秒内采集 10 个正弦波样本。每个样本间隔 0.1 秒。所以我们每秒有 10 个样本，因此采样率为 10Hz。标头中的第 25 到 28 字节表示采样率。

现在来回答您的问题：
实际上不可能将整个正弦波写入文件，因为正弦波上有无限点。相反，我们固定一个采样率并开始以这些间隔对波进行采样并记录幅度。（采样率的选择使得可以使用我们将要采集的样本以最小的失真来重建信号。由于样本数量不足而导致的重建信号中的失真称为“混叠”。）
为了避免混叠，采样率被选择为正弦波频率的两倍以上（5kHz）（这称为[“采样定理”](https://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem)频率的两倍称为“奈奎斯特率”）。因此我们决定采用 12kHz 的采样率，这意味着我们将在一秒钟内对正弦波进行 12000 次采样。
一旦我们开始录制，如果我们录制信号，它是 5kHz 频率的正弦波，我们将有 12000*5 个样本（值）。我们将这 60000 个值放入一个数组中。然后我们创建适当的标头以反映我们的元数据，然后我们将这些样本（我们以十进制记下）转换为它们的十六进制等价物。然后将这些值写入 .wav 文件的数据字节中。

情节绘制在： http: [//fooplot.com](http://fooplot.com)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-23T21:52:07.090

两位音频听起来不太好:) 最常见的是，它们将样本值表示为 16 位有符号数字，表示以 44.1kHz 之类的频率采样的音频波形。

# c++ - QGridLayout 的行跨度未按预期工作

> ID：13039858
> 
> 赞同：2
> 
> 时间：2012-10-23T21:49:26.217
> 
> 标签：c++, qt4, qgridlayout

下面是如何绘制一个跨越 2 列的按钮：

```
#include <QtGui>

int main(int argv, char **args)
{
    QApplication app(argv, args);

    QPushButton *foo = new QPushButton("foo");
    QPushButton *bar = new QPushButton("bar");
    QPushButton *baz = new QPushButton("baz");

    QGridLayout *layout = new QGridLayout();
    layout->addWidget(foo, 0, 0);
    layout->addWidget(bar, 0, 1);
    layout->addWidget(baz, 1, 0, 1, 2); // span 2 columns

    QWidget window;
    window.setLayout(layout);
    window.setWindowTitle("test");
    window.show();

    return app.exec();
} 
```

运行代码给了我：

![在此处输入图像描述](../Images/d6830176718a62a87714e24cd2ef821b.png)

如果我更改布局以获取一个`baz`跨越 2 行的按钮，我将失败：

```
layout->addWidget(foo, 0, 0);
layout->addWidget(bar, 1, 0);
layout->addWidget(baz, 0, 1, 2, 1); // (try to) span 2 rows 
```

这是我得到的：

![在此处输入图像描述](../Images/a0c7e5f04905986d7483a08188ddca73.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T22:05:29.727

您的布局很好，baz 按钮跨越两行。问题是它没有使用所有可用空间。您必须将按钮的垂直调整大小策略从 Fixed 更改为 MinimumExpanding。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T13:36:45.133

我添加了以下内容，之后一切都很好：

```
 foo->setSizePolicy(QSizePolicy::MinimumExpanding,
                    QSizePolicy::MinimumExpanding);
 bar->setSizePolicy(QSizePolicy::MinimumExpanding,
                    QSizePolicy::MinimumExpanding);
 baz->setSizePolicy(QSizePolicy::MinimumExpanding,
                    QSizePolicy::MinimumExpanding); 
```

（[谢谢](https://stackoverflow.com/a/13040055/)）

# magento-1.4 - Magento 布局更新 XML 更改影响所有页面

> ID：13039863
> 
> 赞同：1
> 
> 时间：2012-10-23T21:49:47.740
> 
> 标签：magento-1.4, magento

我试图通过使用 CMS 页面界面上的布局更新 XML 框，仅在我的网站主页之后添加一个静态块（实际上是一个文本链接）。

```
--------------
|             |
|   Content   |
|             |
---------------
|  Footer     |
|  Copyright |
---------------
| My Block    |
--------------- 
```

我尝试使用以下代码添加块：

```
<reference name="footer">
    <block type="cms/block" name="credits" after="-">
        <action method="setBlockId"><block_id>my_block</block_id></action>
    </block>
</reference> 
```

问题是：#1 我的块显示在页脚和版权之间，#2：更改在所有页面上都可见，而我只希望它显示在我的主页上而不是在网站的其余部分...

注意：我正在运行 Magento 1.4.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:55:59.513

为了仅在您的主页上显示它，您必须将您的 XML 添加到`<cms_index_index>`.

要调整定位`<?php echo $this->getChildHtml('credits') ?>`，请使用`page/html/footer.phtml`.

# asp.net - 在 ASP.NET 中创建搜索功能

> ID：13039864
> 
> 赞同：11
> 
> 时间：2012-10-23T21:49:56.477
> 
> 标签：asp.net, html

我有一个网站，该内容 (HTML) 是使用 ASP.NET C# 从 SQL Server 数据库生成的。

现在我想在网站上添加一个搜索功能，以便用户可以搜索内容。它将打开一个带有结果的结果页面。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T10:47:50.383

2个最佳解决方案：

*   谷歌自定义搜索 (GCS)
*   SQL Server（手动）

**地面站：**

在这里，您将完全依赖 Google。如果他们在 60 天内将您的网页编入索引，那么祝您好运。您不会找到未存储的信息，就像网页一样公开。因此，登录内的任何内容，都算了。

您还将依赖搜索引擎优化。如果你不优化你的页面标题、元描述等，搜索将没有多大用处。

**自定义 SQL 服务器：**

如果您在数据字段上放置全文索引，则可以搜索关键字。这是一个不错的解决方案，但请记住索引（否则会很慢）。

我会搜索“SQL Server 全文搜索”以获取有关此解决方案的帮助。

这里的好处是您可以完全控制并且可以访问所有内容。

**编辑：**

当然还有很多其他的解决方案。我还建议研究[Lucene](http://lucene.apache.org/core/)或基于 Lucene 的一些实现，例如[Solr](http://lucene.apache.org/solr/)。然而，所有搜索功能通常都非常困难且耗时，因此我的前两个建议是。

在我工作的公司中，我们以前使用 FAST，现在使用 Apptus。

**编辑2：**

今天我只建议一种解决方案：ElasticSearch。这是一个很好的解决方案；易于使用；适用于所有平台；基于一个不错的 REST api 和 JSON，并且性能非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T21:54:33.323

微软索引服务器：[http ://www.c-sharpcorner.com/UploadFile/sushil%20saini/UsingIndexServer11262005045132AM/UsingIndexServer.aspx](http://www.c-sharpcorner.com/UploadFile/sushil%20saini/UsingIndexServer11262005045132AM/UsingIndexServer.aspx)

或者 ...

谷歌自定义搜索：[http ://www.google.com/coop/cse/](http://www.google.com/coop/cse/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T08:40:02.877

If you are using the SOL DB Try Enable your own code for Search box in it. For example i'm creating a Video Portal, i'm searching videos by my own Search box by using the following Code,

```
 <script type="text/javascript">
    $(document).ready(function () {
        SearchText();
    });
    function SearchText() {
        $(".autosuggest").autocomplete({
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "Home.aspx/GetAutoCompleteData",
                    data: "{'username':'" + document.getElementById('txtSearch').value + "'}",
                    dataType: "json",
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (result) {
                        alert("Error");
                    }
                });
            }
        });
    }

    $(".autosuggest").autocomplete({
        source: function (request, response) {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "Home.aspx/GetAutoCompleteData",
                data: "{'username':'" + document.getElementById('txtSearch').value + "'}",
                dataType: "json",
                success: function (data) {
                    response(data.d);
                },
                error: function (result) {
                    alert("Error");
                }
            });
        }
    });
</script>

     /// <summary>
    /// To AutoSearch. . .
    /// </summary>
    /// <param name="userName"></param>
    /// <returns></returns>
    public List<string> GetAutoComplete(string userName)
    {
        List<string> lstStr = new List<string>();
        sqlCon = new SqlConnection(strCon);
        sqlCmd=new SqlCommand("select DISTINCT OldFileName from UploadedVideo where OldFileName LIKE '%'+@SearchText+'%'", sqlCon);
        sqlCon.Open();
        sqlCmd.Parameters.AddWithValue("@SearchText",userName);
        SqlDataReader reader=null;
        reader = sqlCmd.ExecuteReader();
        while(reader.Read())
        {
            lstStr.Add(reader["OldFileName"].ToString());
        }
        return lstStr;
    } 
```

I've Created a auto Complete box. The Main thing here is we can use our own code. . .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T22:49:12.613

使用 Lucene（Apache Lucene 项目开发开源搜索软件）。

1.  [http://lucene.apache.org/](http://lucene.apache.org/)

2.  [http://ifdefined.com/blog/post/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx](http://ifdefined.com/blog/post/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-28T17:03:04.797

您的页面是从 SQL 数据库生成的。我认为可以安全地假设相关数据也位于 SQL DB 中，而不是 asp 模板或 C# 代码中。要搜索该数据，您可以根据`contains("search term")`函数向数据库写入多个查询。

您可以有一个简单的搜索来执行所有这些查询，也可以有一个高级搜索，您可以在其中提供基于要执行的查询以优化搜索的复选框。

这比对生成的内容进行原始搜索更有意义，imo。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T06:54:11.473

使用谷歌搜索

*如果可能，您可以使用**Sharepoint**进行网站开发，并且每个网站都已提供 Search。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-26T18:07:10.633

知道您更喜欢使用搜索功能的哪个方向，并且不知道您喜欢/并且习惯使用的语言是什么有点困难。

那么，简单的事情怎么样？并使用托管搜索？

此处的此站点免费，最多可索引 1000 个，并且您也可以使用它获得各种报告。看起来您只需在您的网站中添加一些简单的 HTML 即可使其正常运行。

您还可以按需重新编制索引，还可以设置一个时间表来为您做这件事。无需等待谷歌..

该站点是[站点级别](http://www.sitelevel.com/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-02T07:39:01.703

在这里你可以找到一个最好的教程。

[http://www.codeproject.com/Articles/42454/Implement-Search-Functionality-into-your-ASP-NET-M](http://www.codeproject.com/Articles/42454/Implement-Search-Functionality-into-your-ASP-NET-M)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-26T12:33:50.287

如果您的内容存储在 SQL 数据库中并且您需要在该数据库中搜索它 - 那么您需要某种查询构建器。市场上有一些。我记得 Aspose Query 和 EasyQuery，但如果谷歌搜索“query builder asp.net”或类似的东西，你会发现更多。

# php - Zen Cart 使用 Post 会员 pro id 更新数据库

> ID：13039870
> 
> 赞同：0
> 
> 时间：2012-10-23T21:49:59.947
> 
> 标签：php, zen-cart

我们正在创建一个专业购物车，当客户进行购买时，我们会在购买时将会员 ID 记录在数据库中。我创建了以下代码来使用 Post Affiliate Pro API 获取会员 ID/名称。

```
include ("affiliate/api/PapApi.class.php");
$session = new Gpf_Api_Session("https://www.elitespecialtymeats.com/affiliate/scripts/server.php"); 
if(!$session->login("user", "password")){ die("Cannot login. Message: ".$session->getMessage()); }
$clickTracker = new Pap_Api_ClickTracker($session);
try {
    $clickTracker->track();
    $clickTracker->saveCookies();
    if ($clickTracker->getAffiliate() != null){ $affid=$clickTracker->getAffiliate()->getValue('username'); }
    else{ $affid=''; }
}catch (Exception $e){
    $affid='';
} 
```

我正在尝试找出将该 ID 添加到购买中的最佳方式。我认为最好将其添加到 tpl_checkout_success_default.php 中，在那里他们将购买记录到 PAP 中。我的问题是我对系统的了解不够，无法实现代码。

我最好的猜测是

```
 $db->Execute("UPDATE ".TABLE_ORDERS_TOTAL." SET affid='$affid' where orders_id = '".(int)$orders->fields['orders_id']."' AND class in ('ot_coupon', 'ot_gv', 'ot_subtotal', 'ot_group_pricing', 'ot_quantity_discount')"); 
```

这会起作用还是我会把事情搞砸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:52:15.147

首先，使用 API 您正在加载会员用户名（ ...getValue('username') ），而不是您在第一段中所述的会员 ID。您应该使用 getValue('userid'); （对于附属 ID）或 getValue('refid')；（用于推荐 ID）。

您尝试使用的数据库命令仅在表 TABLE_ORDERS_TOTAL 有一个名为“affid”的列的情况下才有效。您可以手动将其添加到表中...

我想知道你为什么要做这样的事情......看起来你想稍后将 ID 用于某些特殊目的。即使客户删除了所有 cookie 或同时点击了另一个会员的横幅，您是否想给原始推荐人佣金？如果是这样，您应该改用终身佣金：http: [//support.qualityunit.com/541587-Lifetime-commissions](http://support.qualityunit.com/541587-Lifetime-commissions)

如果您需要任何其他帮助，请随时联系我们的在线支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:34:54.637

您可能想看看 JROX 的做法——它们是一个在 Zen Cart 中流行的联盟营销系统。它在这里描述：http: [//jam.jrox.com/docs/index.php ?article=111](http://jam.jrox.com/docs/index.php?article=111)

基本上，他们只是捎带结帐成功页面并将他们的逻辑粘贴在页脚中。

# php - cakephp array_filter 回调函数未找到

> ID：13039875
> 
> 赞同：0
> 
> 时间：2012-10-23T21:50:33.050
> 
> 标签：php, cakephp, cakephp-1.3

我有一个 cakephp 应用程序，在我的一个控制器中，我有一个函数`_filter_callback`可用作 php 函数[array_filter()](http://php.net/manual/en/function.array-filter.php)的回调，如下所示：

```
class TestClassController extends AppController
{
     var $name = 'TestClass';

     ....

     function test_fn()
     {
         ...
         array_filter($my_array, '_filter_callback');
     }

     function _filter_callback($val)
     {
          // callback logic here...
     }
} 
```

`_filter_callback`我遇到的问题是在我的控制器中找不到我的函数`array_filter`，因为我收到以下错误：

```
Warning: array_filter() expects parameter 2 to be a valid callback, 
function '_filter_callback' not found or invalid function name 
```

有人知道我如何`array_filter`知道我在 cakephp 应用程序中的回调函数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T22:00:00.407

该函数是否在全局范围内？如果不是 - 它必须是。如果函数的主体很简单（在大多数情况下），请尝试使用 PHP > 5.3 的匿名函数 - [http://php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

或使用 create_function

[http://php.net/manual/en/function.create-function.php](http://php.net/manual/en/function.create-function.php)

然后，您可以将其作为参数注入，而无需声明一次性全局函数。

过滤所有小于 10 的元素的示例：

```
array_filter($array, create_function('$a', 'return $a > 10;')); 
```

编辑：我现在可以看到您正在尝试调用对象的方法。您必须指定实例。试试这个：

```
array_filter($my_array, array($this, '_filter_callback')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:26:41.263

一个有效的 PHP 回调定义是：

1.  包含全局函数名称的字符串：`'functionName'`
2.  一个数组，其中包含要用作第一个元素的对象实例，以及一个包含该对象内部要调用的方法名称的字符串作为第二个元素：`array($object, 'method')`
3.  带有静态方法调用的字符串：`'StaticClass::methodName'`
4.  一个数组，类名作为字符串作为第一个元素，静态函数名作为第二个元素：`array('StaticClass', 'methodName')`
5.  内联的 lambda 函数：`function(){ /*do stuff*/ }`
6.  变量中的 lambda 函数：`$lambda`

`is_callable()`可用于检查参数是否可以被调用。

请注意，使用回调取决于可见性。您通常不能使用私有或受保护的方法作为 PHP 函数的参数。他们从全局角度行动，无法从外部访问这些方法。

# facebook - 如何通过 Open Graph 获取 Facebook 群组相册

> ID：13039878
> 
> 赞同：1
> 
> 时间：2012-10-23T21:50:34.853
> 
> 标签：facebook, facebook-opengraph

[https://developers.facebook.com/tools/explorer/?method=GET&path=195466193802264%2Falbums](https://developers.facebook.com/tools/explorer/?method=GET&path=195466193802264%2Falbums)

当我点击该链接时，我收到以下错误：

```
{
  "error": {
    "message": "(#3) App must be on whitelist", 
    "type": "OAuthException", 
    "code": 3
  }
} 
```

有人知道如何申请访问此 API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T12:32:19.583

它具体意味着它所说的应用程序必须获得批准并在 Facebook 的白名单中。大多数应用程序未列入白名单。

因此，实现这一目标的一个可能方式是成为 Facebook 值得信赖的合作伙伴。

[http://developers.facebook.com/preferredmarketingdevelopers/](http://developers.facebook.com/preferredmarketingdevelopers/)

# visual-studio-2012 - 如何在 Visual Studio 2012 中自定义解决方案资源管理器工具栏

> ID：13039882
> 
> 赞同：6
> 
> 时间：2012-10-23T21:51:02.130
> 
> 标签：visual-studio-2012

我正在尝试从 Visual Studio 2012 的解决方案资源管理器工具栏中删除一些按钮，但是当我转到工具 --> 自定义时，我无法在列表中找到该工具栏。

有人能告诉我在哪里可以找到此工具栏的自定义选项吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:54:42.683

不支持重新排列解决方案资源管理器工具栏中的命令（如主工具栏）。

# c# - 如何在我的 GUI 编辑器中围绕对象绘制一个正方形，像这样？

> ID：13039883
> 
> 赞同：-3
> 
> 时间：2012-10-23T21:51:10.677
> 
> 标签：c#, controls

我想用 C# 为 AutoIt 编写一个 GUI 编辑器，但我对 C# 不够好。当按下 GUI 中的任何对象时，我想在对象周围绘制一个正方形（聚焦）。像这样：

![http://i.imgur.com/c9TB8.png](../Images/d194cdb270fad4aa24dab98b0e88bd59.png)

是否有任何库可以更轻松地编写这种东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:21:55.933

Square 是使用[DrawRectangle](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawrectangle.aspx)函数之一绘制的。他们每个人都需要一支笔。通常我们使用普通的实心笔，但是你需要一个改变了[DashStyle](http://msdn.microsoft.com/en-us/library/system.drawing.pen.dashstyle.aspx)属性的笔。对于虚线，将此属性更改为[DashStyle.Dot](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.dashstyle.aspx)。您还可以试验[DashPattern](http://msdn.microsoft.com/en-us/library/system.drawing.pen.dashpattern.aspx)属性。

要在大正方形周围绘制小正方形，您需要[FillRectangle](http://msdn.microsoft.com/en-us/library/e1s0wh3k.aspx)函数之一。他们每个人都需要一把刷子。您需要一个[白色画笔](http://msdn.microsoft.com/en-us/library/system.drawing.brushes.white.aspx)，这是为您方便地预定义的。填充一个矩形后，您必须在其上绘制一个具有相同尺寸的矩形。这两个函数一起给人一种空的和有线条的矩形的印象。

要使小方块像图像中一样圆润，您必须更改调用 DrawRectangle 时使用的 pen 参数。试验[LineJoin](http://msdn.microsoft.com/en-us/library/system.drawing.pen.linejoin.aspx)和[Pen](http://msdn.microsoft.com/en-us/library/9f23c0f4.aspx)类的其他属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T23:06:56.853

这对于您发布的一个简单问题来说非常困难。有很多事情你需要照顾。

1.  首先，我建议创建一个具有`Rectangle`属性的类，因为您不能将 Rectangle 子类化，因为它是一个结构。
2.  您将需要处理绘图，这是其他答案中提到的最简单的任务，因此我不会对此进行具体说明。
3.  由于您有指示矩形可以调整大小的小方块，因此您必须实现检查鼠标点是否在大矩形或某些小矩形内的方法。在这种情况下，您应该更改光标以指示调整大小的可能性。
4.  要处理矩形的移动（但不调整大小），您必须制作一个带有向所有方向移动的标志的新小正方形，或者当鼠标位置在大矩形内时使用光标来处理。
5.  主要问题是在调整大小时确定要更改的内容，您有两个选择：(1) 更改`Location`和`Size`属性或更改`X`,`Y`和`Width`(2)`Height`矩形的属性。例如，当您移动右上角时，您应该在第一种情况下更改位置和大小，或者在使用第二个选项时更改 Y 和宽度。
6.  在单击鼠标时移动鼠标时，应注意鼠标移动的方向。如果将视口拆分为矩形中心是笛卡尔坐标系中心的象限，通过识别鼠标在哪个象限中，您将知道需要移动象限的哪个角（或边缘）。
7.  每次鼠标移动都必须调用 Invalidate() 因为您不能像在 C++ 中那样使用 Xor。因此，当您的 Rectangle 显示时，您应该处于一种特殊模式，其中不移动的所有内容（不更改，除 Rectangle 和选定控件之外的所有内容）都应该绘制到在两次重绘之间使用的位图上，并且您应该只绘制什么是移动。

如您所见，有很多事情需要注意。只有在确定您已经实现了程序的其他部分之后，您才应该从这里开始。

# c# - Word 2010 Interop PDF 导出缺少边框线

> ID：13039884
> 
> 赞同：3
> 
> 时间：2012-10-23T21:51:34.827
> 
> 标签：c#, interop, ms-word, word-2010

我有一个奇怪的问题...我正在使用 Word 2010 Interop，将 WordML 文档导出为 PDF。有一个带有顶线和底线的页脚：

```
<w:pBdr>
  <w:top w:val="single" w:sz="8" wx:bdrwidth="20" w:space="0" w:color="auto"/>
  <w:bottom w:val="single" w:sz="8" wx:bdrwidth="20" w:space="0" w:color="auto"/>
</w:pBdr> 
```

打开文件后我使用

```
 doc.ExportAsFixedFormat(
                outputFileName.ToString(),
                exportFormat,
                openAfterExport,
                optimizeFor,
                range,
                0,
                0,
                item,
                includeDocProps,
                keepIRM,
                createBookmarks,
                docStructureTags,
                bitmapMissingFonts,
                useISO19005_1
                ); 
```

保存为 PDF。它保存得很好，但顶部和底部的线不会显示在页脚中。如果我使用 Word 2010 手动打开文档并使用 SaveAs/Publish，则会出现这些行。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T17:18:34.817

结果证明这是一个非常微妙（尚未确定）的阶级冲突问题。将转换器移动到单独的类库后，它工作正常。

我在这里发布我的代码，以防有人感兴趣。

```
 public static void ConvertToPdf(string fileName, string outputFileName)
    {
        Application word = null;
        try
        {
            word = new Application();

            Object tempName = fileName;
            // Cast as Object for word Open method
            Object confirmConversions = false;
            Object readOnly = true;
            Object addToRecentFiles = false;
            Object visible = false;
            Object openAndRepair = true;
            Object format = WdOpenFormat.wdOpenFormatXML;
            object oMissing = Missing.Value;
            // Use the dummy value as a placeholder for optional arguments
            Document doc = word.Documents.Open(
                ref tempName,
                ref confirmConversions,
                ref readOnly,
                ref addToRecentFiles,
                ref oMissing, //PasswordDocument
                ref oMissing, //PasswordTemplate
                ref oMissing, //Revert
                ref oMissing, //WritePasswordDocument
                ref oMissing, //WritePasswordTemplate
                ref oMissing, //Format
                ref oMissing, //Encoding
                ref visible, //Visible
                ref openAndRepair, //OpenAndRepair
                ref oMissing, //DocumentDirection
                ref oMissing, //NoEncodingDialog
                ref oMissing //XmlTransform
                );
            doc.Activate();

            const WdExportFormat exportFormat = WdExportFormat.wdExportFormatPDF;
            const bool openAfterExport = false;
            const WdExportOptimizeFor optimizeFor = WdExportOptimizeFor.wdExportOptimizeForPrint;
            const WdExportRange range = WdExportRange.wdExportAllDocument;
            const WdExportItem item = WdExportItem.wdExportDocumentWithMarkup;
            const bool includeDocProps = false;
            const bool keepIrm = false;
            const WdExportCreateBookmarks createBookmarks = WdExportCreateBookmarks.wdExportCreateHeadingBookmarks;
            const bool docStructureTags = false;
            const bool bitmapMissingFonts = false;
            const bool useIso190051 = false;

            doc.ExportAsFixedFormat(
                outputFileName,
                exportFormat,
                openAfterExport,
                optimizeFor,
                range,
                0,
                0,
                item,
                includeDocProps,
                keepIrm,
                createBookmarks,
                docStructureTags,
                bitmapMissingFonts,
                useIso190051
                );

            // Close the Word document, but leave the Word application open.
            object saveChanges = WdSaveOptions.wdDoNotSaveChanges;
            ((_Document) doc).Close(ref saveChanges, ref oMissing, ref oMissing);
            doc = null;
        }
        catch (Exception ex)
        {
            Logger.Fatal(ex);
        }
        finally
        {
            if (word != null)
            {
                ((_Application) word).Quit();
                word = null;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T11:14:54.387

我找到了问题的解决方案。

原来这个设置：

```
application.ScreenUpdating = False 
```

是原因。它会触发 Word 中的错误，导致边框无法呈现。

# c# - .net 中图像处理的最佳库是什么？

> ID：13039885
> 
> 赞同：0
> 
> 时间：2012-10-23T21:51:40.300
> 
> 标签：c#, asp.net-mvc, image-manipulation

我正在开发一个 asp.net MVC Web 应用程序，我需要一个用于图像处理的库。这种情况下最好的图书馆是什么？我更喜欢使用开源库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:52:43.480

看看 ImageResizer.net。它拥有您需要的一切，包括用于 SQL Server 集成和保留纵横比的裁剪的代码示例：

[http://imageresizing.net/](http://imageresizing.net/)

最受欢迎的功能是免费和开源的：

*   调整大小、裁剪、旋转、翻转
*   边框、阴影、填充、背景颜色
*   可调整的 Jpeg 压缩。多页 tiff 查看
*   动画 GIF 帧选择。全面的实时诊断
*   基本的 GIF 和 PNG 编码
*   梯度生成

# r - 分割线并创建新的数据框

> ID：13039886
> 
> 赞同：0
> 
> 时间：2012-10-23T21:51:49.267
> 
> 标签：r

我有一个文件 file.txt，其数据如下所示，

```
<z:row ows_Req_Name1='John' ows_ReqPriority='High' ows_ReqDate='2012-10-10' />
<z:row ows_Req_Name1='Jack' ows_ReqPriority='Low' ows_ReqDate='2012-11-10' />
<z:row ows_Req_Name1='John' ows_ReqDate='2012-12-10' /> 
```

并非所有行都包含所有必需的信息。例如，上面的最后一行没有像其他行一样的 ReqPriority 条目。我使用将数据拆分为数据框，

```
data.frame(do.call(rbind,strsplit(readLines('file.txt'),'ows_',fixed=T))) 
```

但由于某些行中缺少条目，数据框无法正确显示。

关于如何将其导出到 df 并用 NA 填充缺失值的任何建议。

```
Req_Name1   ReqPriority    ReqDate
John        High           2012-10-10
Jack        Low            2012-11-10
John        NA             2012-10-10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T23:14:21.123

由于每一行看起来很像在 R 中创建 data.frames 的方式，我认为以这种方式工作会很有趣：

```
x <- readLines('file.txt')
x <- gsub("<z:row (.*) />", "data.frame(\\1)", x)
x <- gsub("ows_", "", x)
x <- gsub(" ", ", ", x)
x
# [1] "data.frame(Req_Name1='John', ReqPriority='High', ReqDate='2012-10-10')"
# [2] "data.frame(Req_Name1='Jack', ReqPriority='Low', ReqDate='2012-11-10')" 
# [3] "data.frame(Req_Name1='John', ReqDate='2012-12-10')"                    

library(plyr)
do.call(rbind.fill, lapply(x, function(z)eval(parse(text = z))))
#   Req_Name1 ReqPriority    ReqDate
# 1      John        High 2012-10-10
# 2      Jack         Low 2012-11-10
# 3      John        <NA> 2012-12-10 
```

但它应该带有关于使用的常见警告`eval/parse`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:36:12.403

弗洛德尔的反应更好，但我开始玩并使用了一些正则表达式（我现在对正则表达式有点生疏，所以这很好）：

读入你的数据：

```
x <- readLines(n=3)
<z:row ows_Req_Name1='John' ows_ReqPriority='High' ows_ReqDate='2012-10-10' />
<z:row ows_Req_Name1='Jack' ows_ReqPriority='Low' ows_ReqDate='2012-11-10' />
<z:row ows_Req_Name1='John' ows_ReqDate='2012-12-10' /> 
```

重构数据：

```
new <- lapply(strsplit(x, " ows_| />"), "[", -1)
new <- lapply(new, function(x) gsub("'", "", x))
tester <- function(x){
   x[match(c("Req_", "ReqP", "ReqD"), substring(x, 1, 4))]
}
new2 <- lapply(lapply(new, tester), function(x){
    gsub("^\\s+|\\s+$", "", gsub(".*=", " ", x))
})

DF <- data.frame(do.call(rbind, new2))
n <- lapply(lapply(new, tester), function(x){
     na.omit(gsub("^\\s+|\\s+$", "", gsub("=.+.", " ", x)))
})
colnames(DF) <- n[[which.max(sapply(n, length))]]
DF 
```

输出这个：

```
 Req_Name1 ReqPriority    ReqDate
1      John        High 2012-10-10
2      Jack         Low 2012-11-10
3      John        <NA> 2012-12-10 
```

# sql - 从一个表中获取数据但条件涉及多个表的 SQL 表达式

> ID：13039888
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:51:59.580
> 
> 标签：sql

假设我在数据库中有两个表：`Table1`和`Table2`.

`Table1`有以下列：

```
Var1 | Var2 
```

并`Table2`具有以下列：

```
Var3 | Var4 
```

我也有一个常数，`x`.

现在，我想编写一个 SQL 表达式，其中包含`Table1`满足以下条件的每一行：

`Var1 = x` 或者`there is a row in Table2 where Var4=Var2 and where Var3=x`

如何将其编写为 SQL 表达式？

我想它应该从那里开始，`SELECT * FROM Table1 WHERE Var1=x`但从那里，我迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:57:18.823

您需要的神奇元素是 UNION，它本质上将一个结果集附加到另一个结果集。

```
SELECT *
FROM Table1
WHERE Var1=x

UNION

SELECT *
FROM Table1
JOIN Table2 ON Table1.Var2 = Table2.Var4
WHERE Table1.Var1 <> x -- this is to avoid dups of rows that satisfy both cases
  AND Table2.Var3 = x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T21:57:20.020

```
select t1.* from table1 t1, table2 t2, table3 t3
where t1.id=1 and t2.year='2012' and t3.user='me'
and t1.id = t2.id 
```

或者

```
select t1.* from table1 t1
 inner join table2 t2
on t1.var2=t2.Var4
where t2.Var3 = x 
```

我认为第二个更可能满足您的需求。

# c# - 在 IronRuby 中正确的 C# 类实例化

> ID：13039889
> 
> 赞同：0
> 
> 时间：2012-10-23T21:52:04.033
> 
> 标签：c#, ironruby

我编写了以下 Ruby 代码文件：

```
require 'MyAssembly.dll'

class MyClass
    def initialize(obj)
        System::Diagnostics::WriteLine('test')
        @var = MyAssembly::Namespace::CSharpClass.new
    end
end

MyClass 
```

CSharpClass 是一个具有一个默认构造函数的类。现在，我像这样处理这个文件：

```
dynamic MyClass = RubyEngine.Execute(script)
//script is a string which contains the aforementioned Ruby code as text
MyClass.@new(some_obj) 
```

请注意，MyClass 有一个带有一个参数的构造函数。当我运行程序时，我得到以下异常： ArgumentException - 最后一个 C# 代码行的参数数量错误（0 代表 1）。

如果我将 CSharpClass 更改为任何其他名称，则会有一个异常说我没有这样的对象（所以我猜测程序集加载工作正常）。

现在有趣的部分：如果我将 initialize(obj) 方法中的第二行更改为

```
@var = MyAssembly::Namespace::CSharpClass.new(nil) 
```

然后在调试输出中有一长串“测试”字符串和一个 StackOverflowException。所以它看起来像递归 MyClass 对象实例化，即 CSharpClass.new(nil) 以某种方式执行为 MyClass.new(nil)。可能这就是我得到上面的 AgrumentException 的原因。

我已经尝试过 IronRuby 1.0 和 1.1.3 但无济于事。我错过了什么？

**更新**

更多乐趣！现在假设 Ruby 代码如下所示：

```
require 'MyAssembly.dll'

class MyClass
    def initialize(a, b)
        @var = MyAssembly::Namespace::CSharpClass.new
    end
end

MyClass.new(0, 0) 
```

如果我尝试使用不同的参数调用 CSharpClass.new，我会收到互斥的异常消息：

```
CSharpClass.new           # wrong number of arguments (0 for 1)
CSharpClass.new(0)        # wrong number of arguments (1 for 2)
CSharpClass.new(0, 0)     # wrong number of arguments (2 for 1)
...
CSharpClass.new(<N args>) # wrong number of arguments (N for 1) 
```

如果有人知道我做错了什么，我会很高兴——我真的很想在我的项目中使用 IronRuby。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:17:25.347

嗯，这既好又可怕。事实证明，我以以下几行开始我的文件：

```
def initialize(obj)
    MyClass.new(obj)
end 
```

即，我在声明之前使用了 MyClass。删除这些行解决了这个问题。奇怪的是，当出现问题时，动态代码会产生什么样的异常......

# bash - 在 bash 脚本中使用 curl，如何有效地登录 Google Voice？

> ID：13039891
> 
> 赞同：1
> 
> 时间：2012-10-23T21:52:07.177
> 
> 标签：bash, curl

我的 bash 脚本正在执行以下操作：

```
curl -k -s -c gv.cookies https://accounts.google.com/ServiceLogin -F Email=something@gmail.com -F Passwd=somepassword -F service=grandcentral 
```

这似乎有效。cookie 文件已创建，如果我仔细阅读输出，它肯定认为我已经登录。

但是，当我接下来执行此操作时：

```
curl -k -s -b gv.cookies https://www.google.com/voice/ 
```

我得到一个“临时移动”页面，而不是我期望的 Google Voice 标记。

我是否缺少 curl 的一些参数，使其正确使用 cookie？我不需要修复它，因为我需要有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:55:18.547

您应该添加`-b`&`-L`标志：

```
curl \
    -L \
    -k \
    -s \
    -c gv.cookies \
    -b gv.cookies \
    -F Email=something@gmail.com \
    -F Passwd=somepassword \
    -F service=grandcentral \
    https://accounts.google.com/ServiceLogin 
```

> -L，--位置
> 
> (HTTP/HTTPS) 如果服务器报告请求的页面已移动到不同的位置（用 Location: 标头和 3XX 响应代码指示），此选项将使 curl 在新位置重做请求。

和

> -b, --cookie
> 
> (HTTP) 将数据作为 cookie 传递给 HTTP 服务器。它应该是先前在“Set-Cookie:”行中从服务器接收到的数据。数据应采用“NAME1=VALUE1；NAME2=VALUE2”格式。

如果还不够，请尝试通过示例更改[Firefox的](/questions/tagged/firefox "show questions tagged 'firefox'")[用户代理](/questions/tagged/user-agent "显示标记为“用户代理”的问题")。

# objective-c - NSXML 解析器内存泄漏

> ID：13039897
> 
> 赞同：0
> 
> 时间：2012-10-23T21:52:31.590
> 
> 标签：objective-c, cocoa-touch, nsxmlparser

谁能告诉我这个解析器代码是否有内存泄漏。

```
#import <Foundation/Foundation.h>

@interface WSXMLParser : NSObject<NSXMLParserDelegate>
{
    NSMutableDictionary* fullInfo;
    NSMutableString* keyName;
    NSMutableString* keyValue;
    BOOL shouldAddKeyValue;

}

- (NSMutableDictionary *)metaDataForXML:(NSURL*)xmlURL;

@end

#import "WSXMLParser.h"

@implementation WSXMLParser

-(NSMutableDictionary *)metaDataForXML:(NSURL *)xmlURL
{
    fullInfo=[[NSMutableDictionary alloc]init];
    keyValue=[[NSMutableString alloc] init];
    shouldAddKeyValue=NO;

    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];
    [parser setDelegate:self];
    [parser parse];

    return fullInfo;
}

- (void)parserDidStartDocument:(NSXMLParser *)parser
{
   NSLog(@"parsing start");
}

- (void)parserDidEndDocument:(NSXMLParser *)parser
{
   NSLog(@"parsing end");
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    [keyValue setString:@""];
    shouldAddKeyValue=YES;

    keyName=[NSMutableString stringWithString:elementName];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

    [keyValue appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if(shouldAddKeyValue)
    {
        NSCharacterSet * whitespaceCharacterSet=[NSCharacterSet whitespaceAndNewlineCharacterSet];
        NSString *trimmedString = [keyValue stringByTrimmingCharactersInSet: whitespaceCharacterSet];

        if ([trimmedString length]==0)                
            return;

        NSString* value=[keyValue copy];
        [fullInfo setObject:value forKey:keyName];
        [keyValue setString:@""];
    }

    shouldAddKeyValue=NO;
}

@end 
```

我正在使用 xcode 4.5.1 并启用了项目 ARC。此解析代码需要每 5-10 秒调用一次，如果调用此解析器几分钟，为什么应用程序会耗尽内存？

# speech-recognition - 集成 Skype、语音识别和 MS Access

> ID：13039900
> 
> 赞同：0
> 
> 时间：2012-10-23T21:52:36.560
> 
> 标签：speech-recognition, voip, voice-recognition, speech, speech-to-text

我需要实现以下目标，以避免开发成本非常高的网络应用程序。请告知是否可以使用 Skype（或其他 PDA 友好的 VOIP）呼叫运行 MS Access 表单的计算机。MS Access 表单将与语音识别和文本到语音集成，通过 Skype VOIP 来回通信。远程 Skype 用户将使用语音命令来运行 MS Access 宏。其中一些宏将使用文本到语音提示用户将数据口头输入到 MS Access 表单字段中。我已经测试了应用程序“Windows 7 的语音识别”和“自然龙语”，但它们不适用于 VOIP，因为它们需要从麦克风输入语音，如果从麦克风输入语音则无法使用扬声器，因此语音识别需要在运行 MS Access 应用程序的计算机上运行，​​并且不应在用户端运行。我希望可以使用另一个应用程序或一些自定义编程来实现这样的设置。请概述正确的程序和/或提供见解。

非常感谢你，纳撒尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:27:29.930

我已经将 MS Access 应用程序和数据库与[IVR 系统](http://www.voxeo.com/library/ivr.jsp)集成在一起。如果您想通过电话进行语音识别，您需要一个支持语音识别的 IVR 平台，而不是您已经确定的桌面语音识别系统。我会选择支持基于 Web 的开放标准[VoiceXML](http://www.w3.org/TR/voicexml20/)的 IVR 平台。

由于 MS Access 是一项 Microsoft 技术，我将使用 .NET 来开发 VoiceXML 应用程序以及与[MS Access 的集成](http://support.microsoft.com/kb/317114)。使用 ASP.NET MVC 开发 VoiceXML 的一个有用工具是[VoiceModel](http://voicemodel.codeplex.com/)。它是一个开源项目，可以更轻松地在 .NET 中开发 VoiceXML 应用程序。项目中有多个样本。查看[WeatherVoice 示例](http://kevin-junghans.blogspot.com/2012/01/using-google-weather-api-in-voicexml.html)，该示例演示了如何与后端系统集成。

您可以免费试用的一个很好的 IVR 平台是[Voxeo Prophecy](http://www.voxeo.com/products/voicexml-ivr-platform.jsp)。免费版本带有语音识别功能，可以扩展到非常大的应用程序。本机电话接口是 SIP，因此应该可以满足您的 VOIP 要求。它易于使用和安装。还有一个托管版本，您可以免费使用，只需在投入生产时付费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:33:37.860

这里有一些要点只是为了从您的问题中澄清一些事情。

Microsoft 语音识别不仅限于麦克风输入。您可以将音频捕获到 wav 文件，然后处理捕获的音频。请参阅 SpeechRecognitionEngine.SetInputToWaveFile - [http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.setinputtowavefile.aspx](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.setinputtowavefile.aspx)。请注意，这需要使用 inproc 识别器 (SpeechRecognitionEngine) 而不是共享识别器 (SpeechRecognizer)。这意味着您必须拥有自己的语音识别应用程序，此方法不使用 Windows 桌面语音识别来控制应用程序。

许多 IVR 系统使用 SIP 等标准接受 VOIP 输入。Microsoft Lync 使用的 Microsoft Speech Server 产品支持 VOIP 输入。请参阅 SIP 对等体 - [http://msdn.microsoft.com/en-us/library/lync/bb812717(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/lync/bb812717(v=office.12).aspx)。但是，我相信 Skype 不会在没有额外费用的情况下使用 SIP 等 VOIP 标准 - [http://www.skype.com/intl/en-us/business/skype-connect/](http://www.skype.com/intl/en-us/business/skype-connect/)

当您尝试语音启用您的访问应用程序时，您是否使用标准语音控制进行访问，例如[http://office.microsoft.com/en-us/access-help/speech-recognition-commands-in-access-HA001034591。 aspx](http://office.microsoft.com/en-us/access-help/speech-recognition-commands-in-access-HA001034591.aspx)？

# scala - 通过示例代码了解模式匹配

> ID：13039911
> 
> 赞同：1
> 
> 时间：2012-10-23T21:53:20.780
> 
> 标签：scala

下面是我试图用来说明模式匹配的代码：

```
package patternmatching

object patterntest {

    abstract class Expr
    case class Var(name: String) extends Expr
    case class Number(num: Double) extends Expr
    case class UnOp(operator: String , arg: Expr) extends Expr
    case class BinOp(operator: String, left: Expr, right: Expr) extends Expr

    def simplifyTop(expr: Expr): Expr = expr match {
      case UnOp("-", UnOp("-", e)) => e //double negation
      case BinOp("+", e, Number(0)) => e  //adding zero
      case BinOp("*", e, Number(1)) => e //Mutiplying by one
      case _ => expr
    }

   def main(args: Array[String]) {
      UnOp("-" , UnOp("-", e))
    }

} 
```

如何测试每个模式？主方法中的 UnOp("-" , UnOp("-", e)) 行给出了一个错误：

```
not found: value e 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:58:11.197

首先，将 main 方法替换为以下方法：

```
def main(args: Array[String]) {
  val sample = UnOp("-" , UnOp("-", Number(0)) // no more undefined variable
  val simplified = simplifyTop(sample)
  println(simplified)
} 
```

它可能会打印出`Number(0)`与第一个 case 表达式匹配的内容。

就个人而言，我喜欢认为案例类构造值而模式匹配*解构*它们。在使用模式匹配*解构*值的过程中，您还可以将片段绑定到变量。发生匹配后，您可以使用这些变量。

例如，在`simplifyTop`will `BinOp("+", e, Number(0))`match when `expr`is a BinOp 中，它的`operator`字段值为“+”，`right`字段值为“Number(0)”，该`left`字段可以有任何实例，`Expr`其值将绑定到变量`e`。

另一个例子是`case BinOp("+", Number(l), Number(r)) => Number(l+r)`，这种情况不仅会提取 - Scala 术语中的*解构*- BinOp 类型的外部值，还会提取其内部部分，即`Number`s。

# coffeescript - 安装 Coffeescript redux

> ID：13039916
> 
> 赞同：1
> 
> 时间：2012-10-23T21:53:49.333
> 
> 标签：coffeescript

我发现这个[链接](http://ryanflorence.com/2012/coffeescript-source-maps/)可以在 coffeescript 中启用调试。

但我的问题是我在 Windows 7 上，我不确定是否有办法运行 make deps /调用 make 文件，因为 bin 目录中的咖啡文件不是 .exe 文件...什么是替代方案/如何在 windows 中安装 coffeescriptredux。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:50:26.450

它不是本机可执行文件，它只是 javascript，因此您可以安装[node.js](http://nodejs.org/)，使用 npm 安装它，并使用 node.js 运行它。

使用 nodejs 脚本（也可以使用 python/ruby/... 脚本）时，bash 控制台非常好，例如，您可以通过安装[http://code.google.com/p/msysgit/](http://code.google.com/p/msysgit/)在 Windows 上安装一个。使用它，您可以轻松地执行使用 hashbang ( `#!/usr/bin/env node`) 的脚本，例如 coffeescript 编译器。

# objective-c - (string.length, 0) 是字符串的有效范围吗？

> ID：13039917
> 
> 赞同：2
> 
> 时间：2012-10-23T21:53:59.907
> 
> 标签：objective-c, ios, cocoa, nsstring

`NSString`类似的方法`-substringWithRange:`并`-rangeOfString:options:range:`声明：

> 重要提示：如果 aRange 的任何部分超出字符串的末尾，则引发 NSRangeException。

在我看来，范围 (string.length, 0)*超出*了字符串的末尾。但是，`[string substringWithRange:NSMakeRange(string.length, 0)]`不会引发`NSRangeException`而是返回一个空字符串。所以我不确定 (string.length, 0) 是否是有效范围。

相比之下，两者`[string substringWithRange:NSMakeRange(string.length + 1, 0)]`都会`[string substringWithRange:NSMakeRange(string.length, 1)]`引发 NSRangeException。但是它们很明显超出了结尾，而 (string.length, 0) 似乎是一个临界点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T21:56:29.030

这可能是语义问题，但我会说 (length, 0)*位于*字符串的末尾，而不是*超出*它。当然 (length, 1) 会超出结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T22:14:23.030

`0`如果光标的位置类似于文本字段或文本视图，您可以将范围内的长度（在字符串的上下文中）视为光标的位置。因此范围`(string.length, 0)`相当于将文本光标位置设置在字符串的最后。

# wordpress - WordPress ImageFX 插件 - 不为旧帖子创建图像

> ID：13039918
> 
> 赞同：0
> 
> 时间：2012-10-23T21:54:06.447
> 
> 标签：wordpress

一段时间以来，我一直在尝试解决 WordPress 插件中的错误（我一直无法从开发人员那里得到回复）。该插件称为[ImageFX](http://wordpress.org/extend/plugins/imagefx/)。

基本上它为上传到 WordPress 的图像创建图像效果。我正在使用它将图像转换为灰度。但是，如果您创建一个页面，将其保存，然后再返回并尝试向其中添加特色图像，则该图像将不会创建 ImageFX 图像。你可以在这里看到有[同样问题](http://wordpress.org/support/topic/plugin-imagefx-doesnt-work-on-older-posts)的人。

如何重现错误：

1.  创建一个页面
2.  上传并设置精选缩略图并发布页面（= ImageFX 制作人新缩略图正确）
3.  等待一段时间（我想 1 天）。然后删除精选拇指并从图库中删除。
4.  上传新的缩略图（= ImageFX 没有创建新的缩略图）。

或者，只需尝试将图像上传到旧帖子/页面。不会制作 ImageFX 缩略图。

我的猜测是这是有问题的代码。[您可以在此处查看整个文件](http://plugins.svn.wordpress.org/imagefx/tags/0.4/imagefx.php)。

```
add_filter( 'wp_generate_attachment_metadata', 'imagefx_filter' );
/**
 * Creates all ImageFX intermediate sizes of the image based on imagefx_options
 *
 * @param mixed $meta Metadata for attachment.
 * @return mixed $meta Modified metadata for attachment.
 */
function imagefx_filter( $meta ) {
global $imagefx_filters;

$options = get_option( 'imagefx_options' );

foreach ( $meta['sizes'] as $size => $info ) {

    if ( empty( $options['filter'][$size] ) ) continue;
    $filter = $options['filter'][$size];

    if ( empty( $imagefx_filters[$filter] ) ) continue;
    $callback = $imagefx_filters[$filter];

    $file = wp_upload_dir();
    $file = trailingslashit( $file['path'] ) . $info['file'];
    list( $orig_w, $orig_h, $orig_type ) = @getimagesize( $file );

    if ( IMAGETYPE_JPEG === $orig_type || apply_filters( 'imagefx_image_type', false, $orig_type ) ) {

        $image = wp_load_image( $file );

        $callback( $image );

        $slug = $options['slug'][$size];
        if ( ! empty( $slug ) ) {
            $newfile = substr( $file, 0, -4 ) . '-' . $slug . substr( $file, -4 );
            $info['file'] = substr( $info['file'], 0, -4 ) . '-' . $slug . substr( $info['file'], -4 );
        } else {
            $newfile = $file;
        }

        if ( IMAGETYPE_JPEG == $orig_type )
            imagejpeg( $image, $newfile );

        do_action( 'imagefx_image_create', $image, $newfile, $orig_type );

        $meta['sizes'][$size]['file'] = $info['file'];
    }

}

return $meta;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:24:59.540

我假设您在遇到此问题之前实际上看到的是经过过滤的图像？例如，它们是否在媒体库中？

如果是这样，这根本不是插件的问题。您需要将过滤器设置为处理后缩略图（或您的特色图像所调用的任何内容）。这样，您的主题将调用正确的缩略图。

检查有问题的缩略图的文件名，它们可能与媒体库中“正确”的过滤图像不同。

# vim - (g)vim tab 键在打开文件或拆分窗口时不提示任何内容

> ID：13039924
> 
> 赞同：2
> 
> 时间：2012-10-23T21:54:37.723
> 
> 标签：vim, tabs, key

我不明白为什么当我尝试打开另一个文件或拆分窗口时，我的 (g)vim 没有任何建议。当我使用 tab 键完成文件名时，会出现一个“^I”（大写 i）。

例如 ":split ev^I" 当我知道当前目录中有一个名为 event_queue.adb 的文件时...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:25:38.107

它按预期对我有用，所以我不能轻易说出问题所在。但是，有`:set wildmenu`帮助吗？如果不是，如果您设置为非`wildchar`制表键（例如`:set wildchar=$`或`:set wildchar=$``wildchar``:set wildchar=<Tab>`

# objective-c - 没有可见的@接口声明选择器“dismissModalViewControllerAnimated”

> ID：13039925
> 
> 赞同：1
> 
> 时间：2012-10-23T21:54:48.490
> 
> 标签：objective-c, ios, xcode

我得到`no visible @ interface for "ICMinorWorksPart1" declares the selector "dismissModalViewControllerAnimated"`以下内容：

```
[self presentModalViewController:picker animated:YES];
[self dismissModalViewControllerAnimated:YES];
[self dismissModalViewControllerAnimated:YES]; 
```

我只是无法弄清楚编译器在抱怨什么？

。H

```
#import <AddressBookUI/AddressBookUI.h>

@interface ICMinorWorksPart1 : ICCertificateComponent   <UITextViewDelegate,ABPeoplePickerNavigationControllerDelegate>

..... 
```

.m

```
 #import "ICMinorWorksPart1.h"

@implementation ICMinorWorksPart1
@synthesize dateMinorWorksCompletedField=_dateMinorWorksCompletedField;
@synthesize certificateReferenceField=_certificateReferenceField;
@synthesize clientField=_clientField;
@synthesize detailsOfDeparturesField=_detailsOfDeparturesField;
@synthesize descriptionOfMinorWorksField=_descriptionOfMinorWorksField;
@synthesize addressOfTheMinorWorks=_addressOfTheMinorWorks;

 - (id)initWithCertificate:(Certificate *)certificate
 {

if ((self = [super initWithCertificate:certificate])) {
    [[NSBundle mainBundle] loadNibNamed:@"MinorWorksPart1" owner:self options:nil];
    self.view.contentSize = CGSizeMake(self.contentView.frame.size.width, self.contentView.frame.size.height);

    self.dateMinorWorksCompletedField.textValue = ([self attributeWithName:@"dateMinorWorksCompleted"]).value;

    DebugLog(@"dateMinorWorksCompleted attribute value is %@", ([self attributeWithName:@"dateMinorWorksCompleted"]).value);
    DebugLog(@"Certificate reference is %@", self.certificate.reference);
    self.certificateReferenceField.text = (self.certificate.reference != nil ? self.certificate.reference : @"");
    self.clientField.text = ([self attributeWithName:@"client"]).value;
    self.detailsOfDeparturesField.text = ([self attributeWithName:@"detailsOfDepartures"]).value;
    self.addressOfTheMinorWorks.text = ([self attributeWithName:@"addressOfTheMinorWorks"]).value;
    self.descriptionOfMinorWorksField.text = ([self attributeWithName:@"descriptionOfMinorWorks"]).value;
 }
return self;

 }

- (void)save
 {
([self attributeWithName:@"dateMinorWorksCompleted"]).value = [ICUtils nonNilString:self.dateMinorWorksCompletedField.textField.text];
DebugLog(@"dateMinorWorksCompleted value is %@", self.dateMinorWorksCompletedField.textField.text);
self.certificate.reference = [ICUtils nonNilString:self.certificateReferenceField.text];
([self attributeWithName:@"client"]).value = [ICUtils nonNilString:self.clientField.text];
([self attributeWithName:@"detailsOfDepartures"]).value = [ICUtils nonNilString:self.detailsOfDeparturesField.text];
([self attributeWithName:@"addressOfTheMinorWorks"]).value = [ICUtils nonNilString:self.addressOfTheMinorWorks.text];
([self attributeWithName:@"descriptionOfMinorWorks"]).value = [ICUtils nonNilString:self.descriptionOfMinorWorksField.text];
 }

//add adress
- (IBAction)addAddressBtn:(id)sender {

ABPeoplePickerNavigationController *picker =

[[ABPeoplePickerNavigationController alloc] init];

picker.peoplePickerDelegate = self;

[self presentModalViewController:picker animated:YES];

}

- (void)peoplePickerNavigationControllerDidCancel:

(ABPeoplePickerNavigationController *)peoplePicker
{
[self dismissModalViewControllerAnimated:YES];
 }

 - (BOOL)peoplePickerNavigationController:
(ABPeoplePickerNavigationController *)peoplePicker
  shouldContinueAfterSelectingPerson:(ABRecordRef)person {

[self displayPerson:person];
[self dismissModalViewControllerAnimated:YES];

return NO;
}

 - (BOOL)peoplePickerNavigationController:
 (ABPeoplePickerNavigationController *)peoplePicker
  shouldContinueAfterSelectingPerson:(ABRecordRef)person
                            property:(ABPropertyID)property
                          identifier:(ABMultiValueIdentifier)identifier
{
return NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:04:03.110

如果`ICMinorWorksPart1`类的超类 ( `ICCertificateComponent`) 不是其子类，`UIViewController`则错误为真，该类`dismissModalViewControllerAnimated:`的方法也是如此`UIViewController`。

此外，类的`presentModalViewController:animated:`和`dismissModalViewControllerAnimated:`方法`UIViewController`在 iOS 6 中都已弃用，因此您可能也需要注意这一点。

# sql - 存储过程不像看起来那样具有防御性

> ID：13039931
> 
> 赞同：2
> 
> 时间：2012-10-23T21:55:13.313
> 
> 标签：sql, sql-server, tsql, stored-procedures, sql-server-2008-r2

我有几个结构如下的存储过程：

```
USE [WHouse]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[pr_Alert_Dly]
AS
    IF (SELECT LastRunDate FROM WHouse.dbo.AlertRunDates WHERE NameDescription = 'X' ) < (SELECT CONVERT(DATE, GETDATE()))
    BEGIN
       --================
       --need to comment the following out if trying to re-run
       UPDATE x 
       SET  x.LastRunDate = CONVERT(DATE,GETDATE())
       FROM WHouse.dbo.AlertRunDates x
       WHERE [NameDescription] = 'X' 
       --================

       --===============
       --DO A LOAD OF STUFF IN HERE 
       --INCLUDING USING DB_SENDMAIL TO EMAIL 20 PEOPLE
       --===============

    END 
```

我的同事已经建立了一个报告系统（使用过程/SSIS），每 10 分钟循环一次，只要存储过程完成而没有错误，那么它就会在控制表中标记为完成。

我不明白的是，即使上面抛出错误，为什么它会`BEGIN / END`在同一批次中多次重复该部分？

如果防御不够，如何防御我的同事系统导致相同的电子邮件每 10 分钟分发一次？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T23:27:20.877

最终废弃了 OP 中的模式，并使用了 Aaron 在 OP 的评论中提出的建议，即创建了一个`EmailQueue`表格并设置了一个每 5 分钟循环一次的后台进程（通过`Agent`）。此过程扫描`EmailQueue`表以查找任何新记录并在需要时发送电子邮件。

# java - 为什么 Google Eclipse Plugin GWT 编译器不能识别 Ivy 依赖类路径条目？

> ID：13039936
> 
> 赞同：1
> 
> 时间：2012-10-23T21:55:14.957
> 
> 标签：java, gwt, maven, ivy, ivyde

目前，我有一个 ANT 构建，它负责为 Javac 和 GWT 编译非常好地集成 Ivy 依赖项。

令我困惑的是，为什么 GPE GWT 编译器不能识别 .classpath 文件中的 eclipse 类路径条目？

> <classpathentry kind="con" path="org.apache.ivyde.eclipse.cpcontainer.IVYDE_CONTAINER/?project=z.gwt.zebra&ivyXmlPath=ivy.xml&confs=*&ivySettingsPath=%24%7Bworkspace_loc%3Az.gwt.zebra%2Fivysettings .xml%7D&loadSettingsOnDemand=false&propertyFiles=%24%7Bworkspace_loc%3Az.gwt.zebra%2Fsrc%2Fmain%2Fresources%2Fzebra.properties%7D"/>

为什么 GPE GWT 编译器识别 maven 依赖类路径入口没有问题，但拒绝承认 Ivy 的类路径入口？

与 GPE 内部关系密切的人能否就这种好奇心教育我并可能提出追索权（即使追索权意味着必须更改 GPE 代码 - 并不是我会尝试进行此类更改，但它至少会让我晚上睡得更满意） . 不过，我更喜欢简单的补救措施。

*注意：请不要建议我编写 ANT 构建，因为……请阅读我的第一段。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:25:11.100

我认为你在 IvyDE 中遇到了一个错误：

看：

*   [https://code.google.com/p/google-web-toolkit/issues/detail?id=6225](https://code.google.com/p/google-web-toolkit/issues/detail?id=6225)
*   [https://issues.apache.org/jira/browse/IVYDE-335](https://issues.apache.org/jira/browse/IVYDE-335)

# java - 使用本地凭据的 j-interop

> ID：13039939
> 
> 赞同：1
> 
> 时间：2012-10-23T21:55:22.593
> 
> 标签：java, active-directory, wmi, j-interop

我正在尝试使用 J-interop 包中的这个 WMI 示例。我面临的问题是我运行它的系统不是域的一部分。我查看了 j-interop 的 Javadoc，它在 org.jinterop.dcom.core.JISession 中说它需要 IJIAuthInfo、域凭据或来自另一个会话的凭据。

如何指定该系统的本地凭据？

`public class ServiceManager {`

 ````
private static String domainName = "";
private static String userName="administrator";
private static String password="";
private static String hostIP ="127.0.0.1";
private static final String win32_namespace = "ROOT\\CIMV2";

private static final int STOP_SERVICE = 0;
private static final int START_SERVICE = 1;

private JISession dcomSession = null;
/**
 *
 * @param args
 */
public static void main(String[] args) {
    ServiceManager manager = new ServiceManager();
    manager.stopService(domainName, hostIP, userName, password, "MySql");//stops a service named MySql
}
/**
 * Starts a given service if its stopped.
 *
 * @param domainName
 * @param hostname
 * @param username
 * @param password
 * @param serviceName
 */
public void startService(String domainName, String hostname, String username, String password, String serviceName) {
    execute(domainName, hostname, username, password, serviceName, START_SERVICE);
}
/**
 * Stops a given service if its running.
 *
 * @param domainName
 * @param hostname
 * @param username
 * @param password
 * @param serviceName
 */
public void stopService(String domainName, String hostname, String username, String password, String serviceName) {
    execute(domainName, hostname, username, password, serviceName, STOP_SERVICE);
}
/**
 * Starts/Stops a given service of remote machine as hostname. 
 *
 * @param domainName
 * @param hostname
 * @param username
 * @param password
 * @param serviceName
 * @param action
 */
public void execute(String domainName, String hostname, String username, String password, String serviceName, int action) {

    try {
        IJIDispatch wbemServices = createCOMServer();

        final int RETURN_IMMEDIATE = 0x10;
        final int FORWARD_ONLY = 0x20;
        Object[] params = new Object[] {
                new JIString("SELECT * FROM Win32_Service WHERE Name = '" + serviceName + "'"),
                JIVariant.OPTIONAL_PARAM(),
                new JIVariant(new Integer(RETURN_IMMEDIATE + FORWARD_ONLY))
        };
        JIVariant[] servicesSet = wbemServices.callMethodA("ExecQuery", params);
        IJIDispatch wbemObjectSet = (IJIDispatch) narrowObject(servicesSet[0].getObjectAsComObject());

        JIVariant newEnumvariant = wbemObjectSet.get("_NewEnum");
        IJIComObject enumComObject = newEnumvariant.getObjectAsComObject();
        IJIEnumVariant enumVariant = (IJIEnumVariant) narrowObject(enumComObject.queryInterface(IJIEnumVariant.IID));

        Object[] elements = enumVariant.next(1);
        JIArray aJIArray = (JIArray) elements[0];

        JIVariant[] array = (JIVariant[]) aJIArray.getArrayInstance();
        for (JIVariant variant : array) {
            IJIDispatch wbemObjectDispatch = (IJIDispatch) narrowObject(variant.getObjectAsComObject());

            // Print object as text.
            JIVariant[] v = wbemObjectDispatch.callMethodA("GetObjectText_", new Object[] { 1 });
            System.out.println(v[0].getObjectAsString().getString());

            // Start or Stop the service
            String methodToInvoke = (action == START_SERVICE) ? "StartService" : "StopService";
            JIVariant returnStatus = wbemObjectDispatch.callMethodA(methodToInvoke);
            System.out.println("Return status: "+returnStatus.getObjectAsInt()); //if return code = 0 success.See msdn for more details about the method.
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (dcomSession != null) {
            try {
                JISession.destroySession(dcomSession);
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    }
}
/**
 * Initialize DCOM session and connect to SWBEM service on given host machine.
 * @return
 */
private IJIDispatch createCOMServer() { 
    JIComServer comServer;
    try {           
        JISystem.getLogger().setLevel(Level.WARNING);
        JISystem.setAutoRegisteration(true);
        dcomSession  = JISession.createSession(domainName,userName,password);
        dcomSession.useSessionSecurity(false);
        comServer = new JIComServer(valueOf("WbemScripting.SWbemLocator"),hostIP,dcomSession);

        IJIDispatch wbemLocator = (IJIDispatch) narrowObject(comServer.createInstance().queryInterface(IID));
        //parameters to connect to WbemScripting.SWbemLocator
        Object[] params = new Object[] {
                new JIString(hostIP),//strServer
                new JIString(win32_namespace),//strNamespace
                JIVariant.OPTIONAL_PARAM(),//strUser 
                JIVariant.OPTIONAL_PARAM(),//strPassword 
                JIVariant.OPTIONAL_PARAM(),//strLocale 
                JIVariant.OPTIONAL_PARAM(),//strAuthority
                new Integer(0),//iSecurityFlags 
                JIVariant.OPTIONAL_PARAM()//objwbemNamedValueSet
        };
        JIVariant results[] = wbemLocator.callMethodA("ConnectServer", params);
        IJIDispatch wbemServices = (IJIDispatch) narrowObject(results[0].getObjectAsComObject());
        return wbemServices;
    } catch (JIException jie) {
        System.out.println(jie.getMessage());
        jie.printStackTrace();
    } catch (JIRuntimeException jire) {
        jire.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (dcomSession!=null) {
            try {
                JISession.destroySession(dcomSession);
            } catch (JIException e) {
                e.printStackTrace();
            }
        }
    }
    return null;
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:43:47.403

由于此服务器不是域的一部分，因此它是它自己的域，并且需要将 domainName 字符串设置为服务器名称。密码应设置为本地管理员帐户的密码。从那里您应该能够获得经过身份验证的会话。`

# c# - C# 线程 - 锁 - 如何检查锁的出现

> ID：13039941
> 
> 赞同：4
> 
> 时间：2012-10-23T21:55:33.330
> 
> 标签：c#, multithreading, .net-3.5

我在具有多个线程的应用程序中使用锁定对象。

我如何检查其他线程尝试处理锁定对象的次数，或者我在尝试更新锁定对象上浪费了多少时间？

我的代码基于此处的最佳答案：

[多线程更新数组](https://stackoverflow.com/questions/13003145/multiple-threads-updating-array)

编辑：复制代码：

```
float[] bestResult;
object sync = new Object();

lock (sync) 
{
    if (bestResult[0] > calculatedData[0]) {
        bestResult = calculatedData;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T22:04:09.490

该[`System.Diagnostics.Stopwatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)课程可以帮助您：

```
float[] bestResult;
object sync = new Object();
var sw = new System.Diagnostics.Stopwatch();
sw.Start();

lock (sync) 
{
    sw.Stop();
    if (bestResult[0] > calculatedData[0]) {
        bestResult = calculatedData;
    }
}

Console.WriteLine("Time spent waiting: " + sw.Elapsed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:51:25.190

*所问*的问题是如何确定锁请求发生的次数，或者由于锁争用而浪费的时间量。

所问问题的答案是您使用诸如 Visual Studio 高级版提供的分析器。可能存在其他 .NET 分析器。

在每个 lock 语句中添加计数/计时代码是不切实际的，因为它会有自己的锁定问题。因此，在没有分析器的情况下，您必须执行静态分析。这不是那么可怕。嵌套循环是一个很大的线索。

锁争用在服务器设计中最为突出。令人高兴的是，用户会话状态是会话私有的。如果您使用的是 APM（异步编程模型 - 本质上是回调），那么只要您在处理程序结束之前不调用 socket.BeginRead，从会话的角度来看，状态操作实际上是单线程的。因此，在这些条件下，只有在会话的建立和拆除时才需要锁定。在会话中，这是完全没有必要的。

这就是为什么我更喜欢 APM 而不是处理并发执行的更新和更时尚的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-21T13:43:26.670

开始调查锁争用的一个很好的工具是[并发可视化工具，如此](https://msdn.microsoft.com/en-us/library/dd537632.aspx)[处](https://blogs.msdn.microsoft.com/visualizeparallel/2010/07/30/diagnosing-lock-contention-with-the-concurrency-visualizer/)所述。不要害怕这篇博客文章来自 2010 年。同样的原则仍然适用于新版本的 Visual Studio 的并发可视化工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T22:56:01.063

我不是线程专家，但为了获得其他线程尝试处理对象的次数，您可能必须实现比`Lock`. 我在下面用一个紧密循环的 Monitor.TryEnter 给了它一个镜头，欢迎评论。

当然，单独实现这样的事情很容易导致更长的阻塞时间和更多的阻塞，以便获得你想要的计数，并且基于这个实现肯定与内部锁的工作方式不同的事实。不管怎样，我花了时间，所以我要发布它。

```
 class Program
    {
        static object lockObj = new object();
        static void Main(string[] args)
        {
            System.Threading.Thread t = new System.Threading.Thread(proc);
            System.Threading.Thread t2 = new System.Threading.Thread(proc);
            t.Start();
            t2.Start();
            t.Join();
            t2.Join();
            Console.WriteLine("Total locked up time = " + (LockWithCount.TotalWaitTicks / 10000) + "ms");
            Console.WriteLine("Total blocks = " + LockWithCount.TotalBlocks);
            Console.ReadLine();
        }

        static void proc()
        {
            for (int x = 0; x < 100; x++)
            {
                using (new LockWithCount(lockObj))
                {
                    System.Threading.Thread.Sleep(10);
                }
            }
        }
    } 
```

上面向您展示了如何通过将现有的替换为 LockWithCount 来`Lock() {}`使用`using(new LockWithCount(x)) {}`

```
 class LockWithCount : IDisposable
{
    static System.Diagnostics.Stopwatch watch = new System.Diagnostics.Stopwatch();
    object lockObj;
    public static long TotalWaitTicks = 0;
    public static long TotalBlocks = 0;
    static LockWithCount()
    {
        watch.Start();
    }

    public LockWithCount(object obj)
    {
        lockObj = obj;
        long startTicks = watch.ElapsedTicks;
        if (!System.Threading.Monitor.TryEnter(lockObj))
        {
            System.Threading.Interlocked.Increment(ref TotalBlocks);
            System.Threading.Monitor.Enter(lockObj);
            System.Threading.Interlocked.Add(ref TotalWaitTicks, watch.ElapsedTicks - startTicks);
        }
    }

    public void Dispose()
    {
        System.Threading.Monitor.Exit(lockObj);
    }
} 
```

# tridion - 如何从 SDL Tridion SiteEdit 2009 中删除“本地化”按钮

> ID：13039942
> 
> 赞同：5
> 
> 时间：2012-10-23T21:55:39.160
> 
> 标签：tridion, siteedit

我正在使用 SDL Tridion SiteEdit 2009，并希望从 ComponentPresentation 翻转边框中删除 Localize 按钮。我过去曾这样做过，但不记得我是如何做到的。有谁知道我是如何做到这一点的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T22:16:00.793

在您的 SiteEdit.config 文件中找到此部分（通常位于 C:\Program Files (x86)\Tridion\SiteEdit 2009\SiteEdit\Application\Configuration）：

```
<!-- ** Component Toolbar **
If @Visible is set to "false" the toolbar will not be available.
Under <ButtonsVisibility> you can specify the availability of each button. -->
<ComponentToolbar Visible="true">
    <ButtonsVisibility>
        <Save>true</Save>
        <Publish>true</Publish>
        <EditParent>true</EditParent>
        <Localize>true</Localize>
        <StartActivity>true</StartActivity>
        <FinishActivity>true</FinishActivity>
        <Refresh>true</Refresh>
        <Swap>true</Swap>
        <EditInPopup>true</EditInPopup>
    </ButtonsVisibility>
</ComponentToolbar> 
```

并将 的值设置`<Localize>`为`false`。

# compiler-construction - 如何通过链接器脚本在 i386 链接器中实现 OVERLAY

> ID：13039943
> 
> 赞同：-1
> 
> 时间：2012-10-23T21:55:42.040
> 
> 标签：compiler-construction, linker-scripts

我正在尝试链接 GDB 参考手册中的 Overlay 示例。该示例针对 d10v 处理器（对它不熟悉），但我想通过编译 x86_64 或 i386 架构的示例来证明调试器可以处理覆盖。

我尝试将以下部分导入链接器脚本。我首先使用从 StackOverflow 学到的技术提取了链接描述文件。

`$> gcc a.c -Wl,-verbose`

我修改了这个链接器脚本，添加了 .ovly0{0-3} 和 .data0{0-3} 部分，如下所示：

```
/* Script for -z combreloc: combine and sort reloc sections */
OUTPUT_FORMAT("elf64-x86-64", "elf64-x86-64",
          "elf64-x86-64")
OUTPUT_ARCH(i386:x86-64)
ENTRY(_start)
SEARCH_DIR("/usr/local/x86_64-unknown-linux-gnu/lib64"); SEARCH_DIR("/usr/local/lib64"); SEARCH_DIR("/lib64"); SEARCH_DIR("/usr/lib64"); SEARCH_DIR("/usr/local/x86_64-unknown-linux-gnu/lib"); SEARCH_DIR("/usr/local/lib"); SEARCH_DIR("/lib"); SEARCH_DIR("/usr/lib");
SECTIONS
{
  /* Read-only sections, merged into text segment: */
  PROVIDE (__executable_start = SEGMENT_START("text-segment", 0x400000)); . = SEGMENT_START("text-segment", 0x400000) + SIZEOF_HEADERS;
  .interp         : { *(.interp) }
  .note.gnu.build-id : { *(.note.gnu.build-id) }
  .hash           : { *(.hash) }
  .gnu.hash       : { *(.gnu.hash) }
  .dynsym         : { *(.dynsym) }
  .dynstr         : { *(.dynstr) }
  .gnu.version    : { *(.gnu.version) }
  .gnu.version_d  : { *(.gnu.version_d) }
  .gnu.version_r  : { *(.gnu.version_r) }

  .ovly0  0x1001000 : AT (0x408000) { foo.o(.text)  }
  .ovly1  0x1001000 : AT (0x409000) { bar.o(.text)  }
  .ovly2  0x1002000 : AT (0x40a000) { baz.o(.text)  }
  .ovly3  0x1002000 : AT (0x40b000) { grbx.o(.text) }
  .data00 0x2001000 : AT (0x40c000) { foo.o(.data)  }
  .data01 0x2001000 : AT (0x40d000) { bar.o(.data)  }
  .data02 0x2002000 : AT (0x40e000) { baz.o(.data)  }
  .data03 0x2002000 : AT (0x40f000) { grbx.o(.data) }

  .rela.dyn       :
    {
      *(.rela.init)
      *(.rela.text .rela.text.* .rela.gnu.linkonce.t.*)
      *(.rela.fini)
      *(.rela.rodata .rela.rodata.* .rela.gnu.linkonce.r.*)
      *(.rela.data .rela.data.* .rela.gnu.linkonce.d.*)
      *(.rela.tdata .rela.tdata.* .rela.gnu.linkonce.td.*)
      *(.rela.tbss .rela.tbss.* .rela.gnu.linkonce.tb.*)
      *(.rela.ctors)
      *(.rela.dtors)
      *(.rela.got)
      *(.rela.bss .rela.bss.* .rela.gnu.linkonce.b.*)
      *(.rela.ldata .rela.ldata.* .rela.gnu.linkonce.l.*)
      *(.rela.lbss .rela.lbss.* .rela.gnu.linkonce.lb.*)
      *(.rela.lrodata .rela.lrodata.* .rela.gnu.linkonce.lr.*)
      *(.rela.ifunc)
    }
  .rela.plt       :
    {
      *(.rela.plt)
      PROVIDE_HIDDEN (__rela_iplt_start = .);
      *(.rela.iplt)
      PROVIDE_HIDDEN (__rela_iplt_end = .);
    }
  .init           :
  {
    KEEP (*(.init))
  }
  .plt            : { *(.plt) *(.iplt) }

  .text           :
  {
    *(.text.unlikely .text.*_unlikely)
    *(.text.exit .text.exit.*)
    *(.text.startup .text.startup.*)
    *(.text.hot .text.hot.*)
    *(.text .stub .text.* .gnu.linkonce.t.*)
    /* .gnu.warning sections are handled specially by elf32.em.  */
    *(.gnu.warning)

  }

  .fini           :
  {
    KEEP (*(.fini))
  }

  PROVIDE (__etext = .);
  PROVIDE (_etext = .);
  PROVIDE (etext = .);
  .rodata         : { *(.rodata .rodata.* .gnu.linkonce.r.*) }
  .rodata1        : { *(.rodata1) }
  .eh_frame_hdr : { *(.eh_frame_hdr) }
  .eh_frame       : ONLY_IF_RO { KEEP (*(.eh_frame)) }
  .gcc_except_table   : ONLY_IF_RO { *(.gcc_except_table
  .gcc_except_table.*) }
  /* These sections are generated by the Sun/Oracle C++ compiler.  */
  .exception_ranges   : ONLY_IF_RO { *(.exception_ranges
  .exception_ranges*) }
  /* Adjust the address for the data segment.  We want to adjust up to
     the same address within the page on the next page up.  */
  . = ALIGN (CONSTANT (MAXPAGESIZE)) - ((CONSTANT (MAXPAGESIZE) - .) & (CONSTANT (MAXPAGESIZE) - 1)); . = DATA_SEGMENT_ALIGN (CONSTANT (MAXPAGESIZE), CONSTANT (COMMONPAGESIZE));
  /* Exception handling  */
  .eh_frame       : ONLY_IF_RW { KEEP (*(.eh_frame)) }
  .gcc_except_table   : ONLY_IF_RW { *(.gcc_except_table .gcc_except_table.*) }
  .exception_ranges   : ONLY_IF_RW { *(.exception_ranges .exception_ranges*) }
  /* Thread Local Storage sections  */
  .tdata      : { *(.tdata .tdata.* .gnu.linkonce.td.*) }
  .tbss       : { *(.tbss .tbss.* .gnu.linkonce.tb.*) *(.tcommon) }
  .preinit_array     :
  {
    PROVIDE_HIDDEN (__preinit_array_start = .);
    KEEP (*(.preinit_array))
    PROVIDE_HIDDEN (__preinit_array_end = .);
  }
  .init_array     :
  {
    PROVIDE_HIDDEN (__init_array_start = .);
    KEEP (*(SORT_BY_INIT_PRIORITY(.init_array.*) SORT_BY_INIT_PRIORITY(.ctors.*)))
    KEEP (*(.init_array))
    KEEP (*(EXCLUDE_FILE (*crtbegin.o *crtbegin?.o *crtend.o *crtend?.o ) .ctors))
    PROVIDE_HIDDEN (__init_array_end = .);
  }
  .fini_array     :
  {
    PROVIDE_HIDDEN (__fini_array_start = .);
    KEEP (*(SORT_BY_INIT_PRIORITY(.fini_array.*) SORT_BY_INIT_PRIORITY(.dtors.*)))
    KEEP (*(.fini_array))
    KEEP (*(EXCLUDE_FILE (*crtbegin.o *crtbegin?.o *crtend.o *crtend?.o ) .dtors))
    PROVIDE_HIDDEN (__fini_array_end = .);
  }
  .ctors          :
  {
    /* gcc uses crtbegin.o to find the start of
       the constructors, so we make sure it is
       first.  Because this is a wildcard, it
       doesn't matter if the user does not
       actually link against crtbegin.o; the
       linker won't look for a file to match a
       wildcard.  The wildcard also means that it
       doesn't matter which directory crtbegin.o
       is in.  */
    KEEP (*crtbegin.o(.ctors))
    KEEP (*crtbegin?.o(.ctors))
    /* We don't want to include the .ctor section from
       the crtend.o file until after the sorted ctors.
       The .ctor section from the crtend file contains the
       end of ctors marker and it must be last */
    KEEP (*(EXCLUDE_FILE (*crtend.o *crtend?.o ) .ctors))
    KEEP (*(SORT(.ctors.*)))
    KEEP (*(.ctors))
  }
  .dtors          :
  {
    KEEP (*crtbegin.o(.dtors))
    KEEP (*crtbegin?.o(.dtors))
    KEEP (*(EXCLUDE_FILE (*crtend.o *crtend?.o ) .dtors))
    KEEP (*(SORT(.dtors.*)))
    KEEP (*(.dtors))
  }
  .jcr            : { KEEP (*(.jcr)) }
  .data.rel.ro : { *(.data.rel.ro.local* .gnu.linkonce.d.rel.ro.local.*) *(.data.rel.ro* .gnu.linkonce.d.rel.ro.*) }
  .dynamic        : { *(.dynamic) }
  .got            : { *(.got) *(.igot) }
  . = DATA_SEGMENT_RELRO_END (24, .);
  .got.plt        : { *(.got.plt)  *(.igot.plt) }

  .data           :
  {

    *(.data .data.* .gnu.linkonce.d.*)
    _ovly_table = .; 
    LONG(ABSOLUTE(ADDR(.ovly0)));
    LONG(SIZEOF(.ovly0));
    LONG(LOADADDR(.ovly0));
    LONG(0);
    LONG(ABSOLUTE(ADDR(.ovly1)));
    LONG(SIZEOF(.ovly1));
    LONG(LOADADDR(.ovly1));
    LONG(0);
    LONG(ABSOLUTE(ADDR(.ovly2)));
    LONG(SIZEOF(.ovly2));
    LONG(LOADADDR(.ovly2));
    LONG(0);
    LONG(ABSOLUTE(ADDR(.ovly3)));
    LONG(SIZEOF(.ovly3));
    LONG(LOADADDR(.ovly3));
    LONG(0);
    LONG(ABSOLUTE(ADDR(.data00)));
    LONG(SIZEOF(.data00));
    LONG(LOADADDR(.data00));
    LONG(0);
    LONG(ABSOLUTE(ADDR(.data01)));
    LONG(SIZEOF(.data01));
    LONG(LOADADDR(.data01));
    LONG(0);
    LONG(ABSOLUTE(ADDR(.data02)));
    LONG(SIZEOF(.data02));
    LONG(LOADADDR(.data02));
    LONG(0);
    LONG(ABSOLUTE(ADDR(.data03)));
    LONG(SIZEOF(.data03));
    LONG(LOADADDR(.data03));
    LONG(0);
    _novlys = .;
    LONG((_novlys - _ovly_table) / 16);
    SORT(CONSTRUCTORS)
  }
  .data1          : { *(.data1) }
  _edata = .; PROVIDE (edata = .);
  __bss_start = .;
  .bss            :
  {
   *(.dynbss)
   *(.bss .bss.* .gnu.linkonce.b.*)
   *(COMMON)
   /* Align here to ensure that the .bss section occupies space up to
      _end.  Align after .bss to ensure correct alignment even if the
      .bss section disappears because there are no input sections.
      FIXME: Why do we need it? When there is no .bss section, we don't
      pad the .data section.  */
   . = ALIGN(. != 0 ? 64 / 8 : 1);
  }
  .lbss   :
  {
    *(.dynlbss)
    *(.lbss .lbss.* .gnu.linkonce.lb.*)
    *(LARGE_COMMON)
  }
  . = ALIGN(64 / 8);
  .lrodata   ALIGN(CONSTANT (MAXPAGESIZE)) + (. & (CONSTANT (MAXPAGESIZE) - 1)) :
  {
    *(.lrodata .lrodata.* .gnu.linkonce.lr.*)
  }
  .ldata   ALIGN(CONSTANT (MAXPAGESIZE)) + (. & (CONSTANT (MAXPAGESIZE) - 1)) :
  {
    *(.ldata .ldata.* .gnu.linkonce.l.*)
    . = ALIGN(. != 0 ? 64 / 8 : 1);
  }
  . = ALIGN(64 / 8);
  _end = .; PROVIDE (end = .);
  . = DATA_SEGMENT_END (.);
  /* Stabs debugging sections.  */
  .stab          0 : { *(.stab) }
  .stabstr       0 : { *(.stabstr) }
  .stab.excl     0 : { *(.stab.excl) }
  .stab.exclstr  0 : { *(.stab.exclstr) }
  .stab.index    0 : { *(.stab.index) }
  .stab.indexstr 0 : { *(.stab.indexstr) }
  .comment       0 : { *(.comment) }
  /* DWARF debug sections.
     Symbols in the DWARF debugging sections are relative to the beginning
     of the section so we begin them at 0\.  */
  /* DWARF 1 */
  .debug          0 : { *(.debug) }
  .line           0 : { *(.line) }
  /* GNU DWARF 1 extensions */
  .debug_srcinfo  0 : { *(.debug_srcinfo) }
  .debug_sfnames  0 : { *(.debug_sfnames) }
  /* DWARF 1.1 and DWARF 2 */
  .debug_aranges  0 : { *(.debug_aranges) }
  .debug_pubnames 0 : { *(.debug_pubnames) }
  /* DWARF 2 */
  .debug_info     0 : { *(.debug_info .gnu.linkonce.wi.*) }
  .debug_abbrev   0 : { *(.debug_abbrev) }
  .debug_line     0 : { *(.debug_line) }
  .debug_frame    0 : { *(.debug_frame) }
  .debug_str      0 : { *(.debug_str) }
  .debug_loc      0 : { *(.debug_loc) }
  .debug_macinfo  0 : { *(.debug_macinfo) }
  /* SGI/MIPS DWARF 2 extensions */
  .debug_weaknames 0 : { *(.debug_weaknames) }
  .debug_funcnames 0 : { *(.debug_funcnames) }
  .debug_typenames 0 : { *(.debug_typenames) }
  .debug_varnames  0 : { *(.debug_varnames) }
  /* DWARF 3 */
  .debug_pubtypes 0 : { *(.debug_pubtypes) }
  .debug_ranges   0 : { *(.debug_ranges) }
  .gnu.attributes 0 : { KEEP (*(.gnu.attributes)) }
  /DISCARD/ : { *(.note.GNU-stack) *(.gnu_debuglink) *(.gnu.lto_*) }

} 
```

该脚本的相关部分如下：

```
 .ovly0  0x1001000 : AT (0x408000) { foo.o(.text)  }
  .ovly1  0x1001000 : AT (0x409000) { bar.o(.text)  }
  .ovly2  0x1002000 : AT (0x40a000) { baz.o(.text)  }
  .ovly3  0x1002000 : AT (0x40b000) { grbx.o(.text) }
  .data00 0x2001000 : AT (0x40c000) { foo.o(.data)  }
  .data01 0x2001000 : AT (0x40d000) { bar.o(.data)  }
  .data02 0x2002000 : AT (0x40e000) { baz.o(.data)  }
  .data03 0x2002000 : AT (0x40f000) { grbx.o(.data) } 
```

当我使用此脚本编译程序时，我最终会得到一个运行的可执行对象，但在尝试加载覆盖时会**出现 SEGFAULT 。**有趣的是，`OBJDUMP`输出似乎是正确的，两个函数 'foo' 和 'bar' 都被赋予了相同的 VMA 地址（0x1001000）并且每个都有其分配的加载地址。

这是 OBJDUMP 的相关部分：

```
Sections:
Idx Name          Size      VMA               LMA               File off  Algn
  0 .interp       0000001c  0000000000400318  0000000000400318  00000318  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  1 .note.ABI-tag 00000020  0000000000400334  0000000000400334  00000334  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  2 .note.gnu.build-id 00000024  0000000000400354  0000000000400354  00000354  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  3 .hash         00000030  0000000000400378  0000000000400378  00000378  2**3
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  4 .gnu.hash     0000001c  00000000004003a8  00000000004003a8  000003a8  2**3
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  5 .dynsym       000000a8  00000000004003c8  00000000004003c8  000003c8  2**3
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  6 .dynstr       00000050  0000000000400470  0000000000400470  00000470  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  7 .gnu.version  0000000e  00000000004004c0  00000000004004c0  000004c0  2**1
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  8 .gnu.version_r 00000020  00000000004004d0  00000000004004d0  000004d0  2**3
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  9 .ovly0        0000002a  0000000001001000  0000000000408000  00001000  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 10 .ovly1        0000002a  0000000001001000  0000000000409000  00201000  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 11 .ovly2        0000002a  0000000001002000  000000000040a000  00202000  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 12 .ovly3        0000002a  0000000001002000  000000000040b000  00402000  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 13 .data00       00000004  0000000002001000  000000000040c000  00601000  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 14 .data01       00000004  0000000002001000  000000000040d000  00801000  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 15 .data02       00000004  0000000002002000  000000000040e000  00802000  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 16 .data03       00000004  0000000002002000  000000000040f000  00a02000  2**2
                  CONTENTS, ALLOC, LOAD, DATA
 17 .rela.dyn     00000018  0000000002002008  000000000040f008  00a02008  2**3
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
 18 .rela.plt     00000078  0000000002002020  000000000040f020  00a02020  2**3
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
 19 .init         00000018  0000000002002098  000000000040f098  00a02098  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 20 .plt          00000060  00000000020020b0  000000000040f0b0  00a020b0  2**4
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 21 .text         00000558  0000000002002110  000000000040f110  00a02110  2**4
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 22 .fini         0000000e  0000000002002668  000000000040f668  00a02668  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
 23 .rodata       00000086  0000000002002678  000000000040f678  00a02678  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
 24 .eh_frame_hdr 0000007c  0000000002002700  000000000040f700  00a02700  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
 25 .eh_frame     000001e4  0000000002002780  000000000040f780  00a02780  2**3
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
 26 .ctors        00000010  0000000002202e18  000000000060fe18  00c02e18  2**3
                  CONTENTS, ALLOC, LOAD, DATA
 27 .dtors        00000010  0000000002202e28  000000000060fe28  00c02e28  2**3
                  CONTENTS, ALLOC, LOAD, DATA
 28 .jcr          00000008  0000000002202e38  000000000060fe38  00c02e38  2**3
                  CONTENTS, ALLOC, LOAD, DATA
 29 .dynamic      000001a0  0000000002202e40  000000000060fe40  00c02e40  2**3
                  CONTENTS, ALLOC, LOAD, DATA
 30 .got          00000008  0000000002202fe0  000000000060ffe0  00c02fe0  2**3
                  CONTENTS, ALLOC, LOAD, DATA
 31 .got.plt      00000040  0000000002202fe8  000000000060ffe8  00c02fe8  2**3
                  CONTENTS, ALLOC, LOAD, DATA
 32 .data         00000094  0000000002203028  0000000000610028  00c03028  2**3
                  CONTENTS, ALLOC, LOAD, DATA
 33 .bss          00000010  00000000022030c0  00000000006100c0  00c030bc  2**3
                  ALLOC
 34 .comment      00000048  0000000000000000  0000000000000000  00c030bc  2**0
                  CONTENTS, READONLY
 35 .debug_aranges 00000120  0000000000000000  0000000000000000  00c03104  2**0
                  CONTENTS, READONLY, DEBUGGING
 36 .debug_pubnames 000000c7  0000000000000000  0000000000000000  00c03224  2**0
                  CONTENTS, READONLY, DEBUGGING
 37 .debug_info   000004eb  0000000000000000  0000000000000000  00c032eb  2**0
                  CONTENTS, READONLY, DEBUGGING
 38 .debug_abbrev 000002d6  0000000000000000  0000000000000000  00c037d6  2**0
                  CONTENTS, READONLY, DEBUGGING
 39 .debug_line   00000551  0000000000000000  0000000000000000  00c03aac  2**0
                  CONTENTS, READONLY, DEBUGGING
 40 .debug_str    0000016e  0000000000000000  0000000000000000  00c03ffd  2**0
                  CONTENTS, READONLY, DEBUGGING
 41 .debug_loc    00000344  0000000000000000  0000000000000000  00c0416b  2**0
                  CONTENTS, READONLY, DEBUGGING
 42 .debug_macinfo 0000f019  0000000000000000  0000000000000000  00c044af  2**0
                  CONTENTS, READONLY, DEBUGGING 
```

我真的很想知道是否有人使用过链接器的 Overlay 功能，如果有，是否有人能够对此进行演示？我需要这个用于我正在开发的嵌入式调试器。

我将不胜感激在这方面的任何帮助。

谢谢，

muman613

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-16T08:27:09.413

首先，我必须承认我没有彻底检查您的链接器脚本 - 也许您可以尝试简化它，并提供一个仍然包含您的问题的最小链接器脚本？

也就是说，根据[http://www.scoberlin.de/content/media/http/informatik/gcc_docs/ld_3.html#SEC36](http://www.scoberlin.de/content/media/http/informatik/gcc_docs/ld_3.html#SEC36)， OVERLAY 命令只是一个方便的命令。也许这对你有帮助？

> 叠加说明
> 
> 覆盖描述提供了一种简单的方法来描述要作为单个内存映像的一部分加载但要在相同内存地址上运行的部分。在运行时，某种覆盖管理器将根据需要将覆盖的部分复制进和复制出运行时内存地址，可能通过简单地操作寻址位。这种方法很有用，例如，当某个内存区域比另一个更快时。
> 
> 使用 OVERLAY 命令描述叠加。OVERLAY 命令在 SECTIONS 命令中使用，就像输出节描述一样。OVERLAY 命令的完整语法如下：
> 
> 请注意，OVERLAY 命令只是语法糖，因为它所做的一切都可以使用更基本的命令来完成。上面的例子可以写成如下。

# ios5 - 以编程方式访问情节提要按钮？

> ID：13039946
> 
> 赞同：0
> 
> 时间：2012-10-23T21:55:48.343
> 
> 标签：ios5, xcode4

我已经搜索了一天，但还没有找到可以用谷歌搜索的神奇词汇......

我有一个与故事板一起放置的 UIBarButtonItem。有没有办法以编程方式访问按钮？（比如说，更改启用的标志）还是我“重新开始”并从头开始以编程方式创建按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:59:57.673

您可以`IBOutlet`在 .h 文件中创建该按钮。

只需 ctrl + 从您的 UIBarButtonItem 拖动到您的 .h 文件。然后像访问任何其他属性一样简单地访问它

```
self.barButton = ... 
```

* * *

以编程方式查找视图中的所有按钮： （可选）检查`button.tag`以查找特定按钮。

```
NSArray *arrSubviews = [self.view subviews];
for(UIView *tmpView in arrSubviews)
{
    if([tmpView isMemberOfClass:[UIButton class]])
    {
        // Optionally, check button.tag
        if(tmpView.tag == 2) {
            // Do some action    
        }

        // Do some action on UIButton like
        [tmpView setHidden: isHidden];
    }
} 
```

# javascript - 将 dynatree 节点拖到滚动区域之外

> ID：13039954
> 
> 赞同：0
> 
> 时间：2012-10-23T21:56:16.267
> 
> 标签：javascript, jquery-ui, dynatree

[我正在使用与此处](http://wwwendt.de/tech/dynatree/doc/samples.html)显示的有点相似的拖放 dynatree 示例，因为我的树已启用 dnd 并包含在可滚动区域内。但是，在该示例中，当您尝试将节点拖动到可滚动区域之外时，该区域只会扩展，因此您仍然被限制在该区域内。相反，我希望能够将 dynatree 节点拖到滚动区域之外。

如果我将此功能应用于滚动区域内的任意元素，我将执行以下操作：

```
$("#dndelement").draggable({
    helper: "clone",
    appendTo: "body" 
}); 
```

我怀疑我可以在 dynatree 案例中做类似的事情，但我不知道如何使用 dynatree 的内置拖放系统实际实现这一点。

**编辑**

此外，树节点是通过 AJAX 填充的，因此在最初加载页面时它们并不都存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:19:47.733

您是否在 div 中`style="overflow: scroll;`启用了 dynatree？如果是这样，请将其删除并设置固定的高度和宽度。

```
<div id="tree" style="height:200px; width:30%">

</div> 
```

我很确定已经在 dyantree UI 中启用了一个选项，该选项包含您放入的 div 中的树，并且仅在需要时创建滚动条，只要您放置一个固定的高度和宽度。

如果这不是您要查找的内容，请发布一些代码和图片，我很乐意为您进一步深入研究！

# jquery - use jquery to generate html

> ID：13039955
> 
> 赞同：0
> 
> 时间：2012-10-23T21:56:15.877
> 
> 标签：jquery, html

I've managed to cut and paste together the following script:

[http://jsfiddle.net/tbfHF/13/](http://jsfiddle.net/tbfHF/13/)

It basically takes the value of the input box and inserts into another generated element along with a link that should delete the item when clicked. Now I need to each field and X to be surrounded by a div so that the output would be like below

```
<div class="regItm">
  <input properties.../><a properties...>X</a>
</div>
<div class="regItm">
  <input properties.../><a properties...>X</a>
</div>
...
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:57:37.383

You can use [wrapAll()](http://api.jquery.com/wrapAll/) to wrap all elements in selector with

```
$('input:last,a:last','#basket').wrapAll('<div class="regItm"></div>'); 
```

Get the last input and last anchor in your basket and wrap both with the div. So you can add that code right after you append the elements to your basket.

[http://jsfiddle.net/KYkJn/](http://jsfiddle.net/KYkJn/)

# java - 无论扩展名仅包含逗号和数字，如何查找所有文本文件？

> ID：13039958
> 
> 赞同：1
> 
> 时间：2012-10-23T21:56:28.883
> 
> 标签：java, python, search, powershell, grep

我必须搜索可能具有任何扩展名的文件。所有这些文件的特殊属性是它们的长度小于 5 行（小于 4 \n\r），并且除了换行符之外，所有字符都是数字、空格和逗号。我将如何编写根据文件内容搜索文件的代码？

我很清楚这将需要很长时间才能运行。

我的项目不需要 Java 或 Python，我只是简单地提到了它们，因为我更熟悉它们。Powershell 是一个有价值的建议。

我正在运行 Windows 7 系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:39:46.127

您可以使用`grep -r`和`-l`选项。`-r`允许您在所有文件的目录中递归搜索，并仅`-l`打印内容与您的正则表达式匹配的文件的名称。

```
grep -r -l '\A([0-9, ]+\s){1,4}[0-9, ]+\Z' directory 
```

这将打印包含少于 5 行数字、空格或逗号字符的所有文件的名称列表。

\A 和 \Z 将检查主题文本的开头和结尾。`[0-9, ]+`查找后跟`\s`换行符、空格或回车符的数字、空格或逗号序列。这个序列最多可以重复 4 次，`{1,4}`后面跟着另一行数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:12:11.327

像下面这样的东西应该可以工作：

```
valid_chars = set('0123456789, \r\n')
for root, dirs, files in os.walk(base):
    for fname in files:
        fpath = os.path.join(root, fname)
        with open(fpath, 'rb') as f:
            lines = []
            for i, line in enumerate(f):
                if i >= 5 or not all(c in valid_chars for c in line):
                    break
            else:
                print 'found file: ' + fpath 
```

而不是`not all(c in valid_chars for c in line)`，您可以使用正则表达式：

```
 ...
                if i >= 5 or not re.match(r'[\d, \r\n]*$', line):
            ... 
```

如果您使用正则表达式，以提高效率`re.compile`，请在循环外使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T22:26:06.317

```
import os

expected_chars = set(' ,1234567890\n\r')
nlines = 5
max_file_size = 1000  # ignore file longer than 1000bytes, this will speed things up

def process_dir(out, dirname, fnames):
    for fname in fnames:
    fpath = os.path.join(dirname, fname)

    if os.path.isfile(fpath):

        statinfo = os.stat(fpath)

        if statinfo.st_size < max_file_size: 
            with open(fpath) as f:
                # read the first n lines
                firstn = [ f.readline() for _ in range(nlines)]

                # if there are any more lines left this is not our file
                if f.readline():
                    continue

                # if the first n lines contain only spaces, commas, digits and new lines
                # this is our kind of file add it to the results.
                if not set(''.join(firstn)) - expected_chars:
                    out.append(fpath)

out = []
path.walk("/some/path/", process_dir, out) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T22:13:45.070

在 Python 中（我只会概述这些步骤，以便您可以自己编程。当然，如果您遇到问题，请随时询问）：

*   用于[`os.path.walk`](http://docs.python.org/library/os.path.html#os.path.walk)查找所有文件（它为您提供所有文件，无论其扩展名如何）。
*   请注意，它还为您提供目录等，因此请使用[`os.path.isfile`](http://docs.python.org/library/os.path.html#os.path.isfile)跳过它们。
*   对于每个文件：
    *   打开它 ( [`open`](http://docs.python.org/library/functions.html#open))。在语句中执行以下[`with`](http://docs.python.org/reference/compound_stmts.html#the-with-statement)操作以避免手动关闭文件。
    *   您可以先数行数，然后检查逗号，但这可能会更慢，所以：
    *   逐行读取文件。对于每一行，做两件事：
    *   数线。如果您在 5 点到达，请继续下一个文件。
    *   检查它是否符合逗号标准。我会用一个[`regular expression`](http://docs.python.org/library/re.html)。如果不匹配，请继续。
    *   如果你在文件的末尾，你就成功了，所以你可以打印文件名或任何你想做的事情。

# geolocation - 背景中的phonegap地理定位

> ID：13039963
> 
> 赞同：1
> 
> 时间：2012-10-23T21:56:49.437
> 
> 标签：geolocation

我们正在寻找一种解决方案来使用 HTML5 跟踪我们的商务 iPad。有没有办法通过在可能不活动的 web 应用程序中使用 ie phonegap 来查看地理位置（在后台运行 - 仍在任务管理器中）？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-02T00:03:53.587

试用我的适用于 iOS 和 Android 的 Phonegap 3.x 插件。我目前在 Android 方面非常努力，移植在 iOS 中充实的功能，例如固定区域监控、自动缩放距离过滤器。停止检测。

我是 Obj-C 和 Java 的菜鸟，但正在改进:)

该插件有一个调试模式，它会为其生命周期事件（位置更改、退出固定区域等）发出声音

[https://github.com/christocracy/cordova-plugin-background-geolocation](https://github.com/christocracy/cordova-plugin-background-geolocation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:25:52.393

是的 - 正常的 phonegap 实现在后台运行。

```
// onSuccess Callback
//   This method accepts a `Position` object, which contains
//   the current GPS coordinates
//
function onSuccess(position) {
    var element = document.getElementById('geolocation');
    element.innerHTML = 'Latitude: '  + position.coords.latitude      + '<br />' +
                        'Longitude: ' + position.coords.longitude     + '<br />' +
                        '<hr />'      + element.innerHTML;
}

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
}

// Options: retrieve the location every 3 seconds
//
var watchID = navigator.geolocation.watchPosition(onSuccess, onError, { frequency: 3000 }); 
```

如果您还有其他问题，可以给我发送私人按摩。

# c# - 在包含超链接的富文本框 v5 中选择文本时出现奇怪的偏移

> ID：13039967
> 
> 赞同：6
> 
> 时间：2012-10-23T21:57:10.433
> 
> 标签：c#, winforms, richtextbox, selection, rtf

当我使用 RichTextBox.Select(int start, int length) 函数在包含超链接的富文本框中选择文本时，当我尝试选择超链接之后的任何文本时，选择会发生一些变化。

当我删除超链接时，选择工作正常。

**编辑：** 我使用 RichTextBox 5（Visual Studio 中的默认版本是 4）

```
public class RichText50W : RichTextBox
{
    [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
    static extern IntPtr LoadLibrary(string lpFileName);
    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams prams = base.CreateParams;
            if (LoadLibrary("msftedit.dll") != IntPtr.Zero)
            {
                prams.ClassName = "RICHEDIT50W";
            }
            return prams;
        }
    }
} 
```

该问题仅发生在 Richtextbox 5+ 上。

这些图像显示了问题和行为差异。

如果您尝试这样做，请确保将richtextboxes 的 HideSelection 属性设置为“false”。

选择功能显示在按钮上。

![选择 (10, 1)](../Images/1325bd18db207341fd1b896cac68f76d.png)

对于 RTB5，应在上图中选择“文本”中的“e”。

![选择 (40, 1)](../Images/014fe5567b9e7bd647321334132cd55f.png)

![选择 (46, 1)](../Images/43313b06c31dfa60aeaae0fbae2f2ab4.png)

显然 RTB5 选择了一些隐藏的文本。

我需要它仅根据可见文本进行选择。

RTB 4 在使用表格时有问题，所以我不想使用它。

我使用 .NET 2.0

**编辑：**要在 Visual Studio 中尝试此操作，请从默认的 Richtextbox 开始，并将其声明更改为 RichText50W 而不是 RichTextBox

RichEdit 6 也有同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:32:39.143

根据我自己的经验，“RICHEDIT50W”版本在与嵌入式超链接或隐藏文本（使用 rtf 代码 \v \v0）一起使用时会严重损坏。

在您的 v5 框中，该`Text.Length`属性报告 14 个字符——它显示的内容。该`TextLength`属性报告 51 个字符。和属性都报告“隐藏文本”数字`SelectionStart`，`SelectionLength`但该控件不再为您提供获取隐藏文本的方法。这意味着当您的富文本包含隐藏字符时，“文本”和相关的“文本选择”信息将变得不可用。

我认为唯一的解决方案是如果会有隐藏字符或浏览市场以获得更好的富文本控件，则不要使用“RICHEDIT50W”版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-06T11:59:01.050

只是晚了一点。这可能有帮助，也可能没有帮助，我还没有使用过这个控件。以下代码从[http://www.codeproject.com/Messages/3401956/NET-Richedit-Control.aspx](http://www.codeproject.com/Messages/3401956/NET-Richedit-Control.aspx)复制。注意`// Check Unicode or ANSI system and set appropriate ClassName.`

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace RichEditor
{
  public class RichTextBoxEx : RichTextBox
  {
    private IntPtr mHandle = IntPtr.Zero;

    protected override CreateParams CreateParams
    {
      get
      {
        //Prevent module being loaded multiple times.
        if (this.mHandle == IntPtr.Zero)
        {
          //load the library to obtain an instance of the RichEdit50 class.
          this.mHandle = LoadLibrary("msftedit.dll");
        }

        //If module loaded, reset ClassName.
        if (this.mHandle != IntPtr.Zero)
        {
          CreateParams cParams = base.CreateParams;

          // Check Unicode or ANSI system and set appropriate ClassName.
          if (Marshal.SystemDefaultCharSize == 1)
          {
            cParams.ClassName = "RichEdit50A";
          }
          else
          {
            cParams.ClassName = "RichEdit50W";
          }

          return cParams;
        }
        else // Module wasnt loaded, return default .NET RichEdit20 CreateParams.
        {
          return base.CreateParams;
        }
      }
    }

    ~RichTextBoxEx()
    {
      //Free loaded Library.
      if (mHandle != IntPtr.Zero)
      {
        FreeLibrary(mHandle);
      }
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern IntPtr LoadLibrary(String lpFileName);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool FreeLibrary(IntPtr hModule);
  }
} 
```

# sugarcrm - 通过电子邮件进行sugarcrm 版本6 社区搜索？

> ID：13039970
> 
> 赞同：0
> 
> 时间：2012-10-23T21:57:20.793
> 
> 标签：sugarcrm

试图增加通过电子邮件搜索 Sugarcrm 6 社区版本的可能性。我已更改 searchform2.php 以允许这样做，但是当我搜索时它不返回任何结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:17:52.103

您应该能够将这样的条目添加到 modules//metadata/SearchFields.php $searchFields 数组...

```
'email'=> array(
        'query_type' => 'default',
        'operator' => 'subquery',
        'subquery' => 'SELECT eabr.bean_id FROM email_addr_bean_rel eabr JOIN email_addresses ea ON (ea.id = eabr.email_address_id) WHERE eabr.deleted=0 AND ea.email_address LIKE',
        'db_field' => array(
            'id',
        ),
        'vname' =>'LBL_ANY_EMAIL',
    ), 
```

然后将“电子邮件”字段添加到 modules//metadata/listviewdefs.php 文件数组中，您应该一切顺利。

# php - 管理员可以编辑的用户字段？

> ID：13039977
> 
> 赞同：1
> 
> 时间：2012-10-23T21:57:45.417
> 
> 标签：php, wordpress, customization, field

如何为管理员可以编辑的用户配置文件添加自定义用户字段？我希望用户能够在他们的个人资料中看到该字段的值，但我不希望他们对其进行编辑。如何使用 WordPress 实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:47:12.533

你试过这个插件吗？[http://wordpress.org/extend/plugins/extra-user-fields/](http://wordpress.org/extend/plugins/extra-user-fields/)也许它可以帮助你。

# c# - 客户端断开连接挂起 IIS 应用程序池

> ID：13039978
> 
> 赞同：1
> 
> 时间：2012-10-23T21:57:50.227
> 
> 标签：c#, web-applications, iis-7.5, windows-server-2008-r2

我有几个 .NET 3.5 站点在 Windows 2008 R2 64 位 IIS 7.5 Web 服务器上运行相同的代码库。我们在允许用户在服务器上管理自己的文件（上传、下载、删除）的过程中遇到问题。在我们从在 Windows 2003 上运行 IIS 6 的旧服务器上迁移站点之前，我们从未遇到过此功能的任何问题。迁移之后，我们让三个不同的站点完全锁定并停止执行请求。我必须重新启动应用程序池和网站才能让它们再次运行。我们将应用程序池更改为以经典模式运行，这确实阻止了站点崩溃。

在分析站点历史时，我们发现有 20 到 30 人（一个班级）的小组在大约 10 分钟的时间内上传了多个文件（每个 0.5 到 2 兆）。因此，我们将问题归结为文件管理功能，并决定将数据存储移动到本地驱动器上。我们继续在描述用户在工作完成之前离开这些页面的机器上遇到错误，因此我为 Response.IsClientConnected 添加了测试。这一切似乎都有帮助，但错误仍在继续。我们安装了一个应用程序 (IIS Peek) 来监控活动并报告长时间运行的请求。我将执行超时设置为五分钟，然后让 IIS Peek 监视任何需要更长时间的请求。我们整天都在 pdf 和 flash 文件上遇到多个错误，但它们最终会清除。因此，当我们从文件管理功能中收到错误时，我们根本无法管理文件（页面会超时）。我决定尝试使用 AsyncPage 解决方案，这似乎解决了文件管理锁定的问题。但是，我们仍然会遇到问题。我们在文件上传页面上遇到的错误往往会持续一个小时或更长时间，当问题存在时，即使使用 AsyncPage 解决方案，文件上传也需要相当长的时间才能完成。昨天，在其中一集中，我根本无法上传文件。我能够删除一个文件。因此，尽管我们遇到的问题较少，但文件管理功能仍然存在问题。我决定尝试使用 AsyncPage 解决方案，这似乎解决了文件管理锁定的问题。但是，我们仍然会遇到问题。我们在文件上传页面上遇到的错误往往会持续一个小时或更长时间，当问题存在时，即使使用 AsyncPage 解决方案，文件上传也需要相当长的时间才能完成。昨天，在其中一集中，我根本无法上传文件。我能够删除一个文件。因此，尽管我们遇到的问题较少，但文件管理功能仍然存在问题。我决定尝试使用 AsyncPage 解决方案，这似乎解决了文件管理锁定的问题。但是，我们仍然会遇到问题。我们在文件上传页面上遇到的错误往往会持续一个小时或更长时间，当问题存在时，即使使用 AsyncPage 解决方案，文件上传也需要相当长的时间才能完成。昨天，在其中一集中，我根本无法上传文件。我能够删除一个文件。因此，尽管我们遇到的问题较少，但文件管理功能仍然存在问题。我们在文件上传页面上遇到的错误往往会持续一个小时或更长时间，当问题存在时，即使使用 AsyncPage 解决方案，文件上传也需要相当长的时间才能完成。昨天，在其中一集中，我根本无法上传文件。我能够删除一个文件。因此，尽管我们遇到的问题较少，但文件管理功能仍然存在问题。我们在文件上传页面上遇到的错误往往会持续一个小时或更长时间，当问题存在时，即使使用 AsyncPage 解决方案，文件上传也需要相当长的时间才能完成。昨天，在其中一集中，我根本无法上传文件。我能够删除一个文件。因此，尽管我们遇到的问题较少，但文件管理功能仍然存在问题。

这是我们在发送响应之前与用户断开连接有关的两个不同错误。

异常消息：与远程主机通信时发生错误。错误代码为 0x800704CD。

异常消息：与远程主机通信时发生错误。错误代码为 0x80070057。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T07:45:34.890

当我们不小心将文件加载到内存中作为保存文件的一部分时，我们曾经遇到过类似的问题。在使用实体框架（或任何框架）和二进制/blob 数据类型时要小心。

# .net - VB.net 限制对范围内的事件处理程序的访问，或替代

> ID：13039979
> 
> 赞同：0
> 
> 时间：2012-10-23T21:57:52.307
> 
> 标签：.net, vb.net, events, user-interface

我有一个事件处理程序可以很好地处理它的事件。但是，我不想直接调用处理程序，或者更具体地说，让我的程序员同事能够直接调用它，因为我只想在设置激光电流时更新 nudCurrent.Value。

```
Public Class TestClass

    Dim WithEvents myCurrentSource As New CurrentSourceClass

    Private Sub TestScript()
        'among other things, sets current to 85
        myCurrentSource.SetCurrent(85)
    End Sub

    Private Sub handleLaserCurrentSet() Handles myCurrentSource.LaserCurrentSet
        Me.nudCurrent.Value = myCurrentSource.GetCurrent()
    End Sub

End Class

Public Class CurrentSourceClass

    Public Event LaserCurrentSet()

    Private currentSet As Double = Double.NaN

    Public Sub SetCurrent(ByVal dCurrentAmps As Double)
        ' set the current on the current source here
        Me.currentSet = dCurrentAmps
        ' then raise the event
        RaiseEvent LaserCurrentSet()
    End Sub

    Public Function GetCurrent() As Double
        Return Me.currentSet
    End Function

End Class 
```

我想不出一种方法来限制对其范围内的事件处理程序例程的访问，所以我正在寻找一种替代方法。最佳做法是什么？

*我知道我可以`me.nudCurrent.Value = 85`在设置电流后放置，但我喜欢事件驱动的 UI 更新的简洁性。我可以把我的蛋糕也吃掉吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:27:27.303

您可以使用匿名事件处理程序

```
AddHandler myCurrentSource.LaserCurrentSet,
                Sub()
                    Me.nudCurrent.Value = myCurrentSource.GetCurrent()
                End Sub 
```

但请记住，可以从类内的任何位置设置该值。你不能限制它。

# sql - 在 SSIS 中过滤源组件

> ID：13039981
> 
> 赞同：0
> 
> 时间：2012-10-23T21:57:55.213
> 
> 标签：sql, ssis

我们目前需要将财务交易提取到预算数据库中以进行报告。目前，我们获取所有财务记录（慢查询），然后获取所有预算。然后，我们进行合并连接，将财务记录过滤到只有我们有预算的那些。理想的方法是首先提取所有预算，将其输入另一个组件，然后生成一个查询，只提取那些需要的交易。

例子：

`TableA`in`DatabaseA`有一个名为 的标识列`FakeId`。

`TableB`in`DatabaseB`具有相同的标识列；但是，`TableB`没有到 的一对一映射`TableA`。相反，“映射”（如果存在）将是一对零或一。我们想从where is in `TableA`in中获取所有财务记录。`DatabaseA``FakeId``TableB``DatabaseB`

我们无法在这两个 SQL 服务器之间创建链接服务器，所以这样做是`SELECT * FROM TableA WHERE FakeId IN (SELECT FakeId FROM DatabaseB.TableB)`行不通的。

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:13:15.437

正如您所说，您可以使用两个源并使用合并连接转换将它们连接起来。

另一个（更面向数据仓库）的解决方案是将两个表复制到一个单独的数据库（通常称为暂存区域），然后使用您提出的查询的变体在数据库级别执行逻辑。此解决方案还允许您实施索引和其他性能增强技术来优化集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:58:07.540

如果您可以使用 SSIS，我认为您可以使用“查找”组件：

在 SQL Server 集成服务中实现查找逻辑 [http://www.simple-talk.com/sql/ssis/implementing-lookup-logic-in-sql-server-integration-services/](http://www.simple-talk.com/sql/ssis/implementing-lookup-logic-in-sql-server-integration-services/)

# angularjs - angular.js：如何将 ngclick 从原始 dom 传递到指令的 dom？

> ID：13039983
> 
> 赞同：10
> 
> 时间：2012-10-23T21:58:08.907
> 
> 标签：angularjs

您好，我正在处理这个“可确认”按钮指令，

将触发指令“可确认”的 html 代码

```
 <span confirmable ng-click='users.splice($index,1)'></span> 
```

指令：（咖啡脚本）

```
 angular.module('buttons',[])

  .directive 'confirmable', () ->
    template: """
      <button class='btn btn-mini btn-danger'>
        Destroy
      </button>
    """
    replace: yes 
```

所以我希望看到这个指令生成的最终结果是

```
 <button class='btn btn-mini btn-danger' ng-click='users.splice($index,1)'>
        Destroy
      </button> 
```

到目前为止，我让它与指令中的链接函数一起工作

```
 angular.module('buttons',[])

  .directive 'confirmable', () ->
    template: """
      <button class='btn btn-mini btn-danger'>
        Destroy
      </button>
    """
    replace: yes
    link: (scope, el, attrs) ->               <---------- linking function
      $(el).attr 'ng-click', attrs.ngClick 
```

但是我再次浏览了指令文档，并找到了带有 =、@ 和 & 运算符的范围属性，但我真的不确定它们是否是我需要的。然后是我仍然需要了解的这个嵌入属性，但目前似乎也没有帮助。因此，虽然我的链接功能现在可以解决问题，但我想我应该问一下 angular 是否提供了更优雅的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T22:11:19.163

在我看来，您想从指令中的父范围调用方法...

我在这里拼凑了一个[Plunk](http://plnkr.co/edit/L18XIU)

（对不起，我喜欢 JavaScript ......所以就这样吧）

这是你的父控制器。

```
app.controller('ParentCtrl', function($scope) {
    $scope.fooCalled = 0;
    $scope.foo = function() {
        $scope.fooCalled++;
    };
}); 
```

然后你的标记

```
<div ng-controller="ParentCtrl">
   Foo Called: {{fooCalled}}<br/>
   <button ng-click="foo()">Call From Parent</button><br/>
   <custom-control custom-click="foo()"></custom-control>
</div> 
```

和你的指令声明：

```
app.directive('customControl', function(){
   return {
     restrict: 'E',
     scope: {
        innerFoo: '&customClick'
     },
     template: '<button ng-click="innerFoo()">Call From Control</button>'
   };
}); 
```

指令定义中声明中的位`scope`将父作用域函数引用与指令作用域联系起来，因此可以在单击时调用它。这就是`&`那里的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:10:41.800

你做对了。控制器用于在指令之间共享通用功能；你在这里不需要。此外，这种情况非常简单，您甚至不需要链接功能：

[http://jsfiddle.net/V7Kpb/12/](http://jsfiddle.net/V7Kpb/12/)

就 Angular 而言，在链接阶段复制指令属性不会做任何事情。你只会有一个带有`ng-click`属性的按钮，但它是在 Angular 处理 DOM 之后添加的。

另请注意，`element`由于链接函数的第二个参数已经是 jQLite（如果您也有链接，则可能是完整的 jQuery。）不需要 jQuerify 它。

此外，关于隔离范围（您提到的 =、@ 和 &）。这是一个可爱优雅的语法，但最大的缺点是同一元素上的任何其他指令也与范围隔离。因此，如果您想使用 ngModel 这很常见，那么您不能使用隔离范围。实际上即使在这种情况下，如果您使用隔离范围 ng-click 停止工作。因为它将尝试评估包含未在 scope{} 属性中明确声明的内容的表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-07T03:20:14.447

如果您在链接阶段操作 DOM 并希望向其元素添加角度逻辑，则需要编译受影响的元素。`$compile`在完成 DOM 处理并添加`ng-*`指令后，让 Angular 注入并调用它。

```
function MyDirective($compile)
{
    return {

        restrict: "AE",
        templateUrl: "/path",
        link: (scope, element, attributes) => 
        {
            // Add your directives

            $compile(element.contents())(scope);
        }
    };
}
```

# ios - 流式传输 s3 私人视频

> ID：13039989
> 
> 赞同：3
> 
> 时间：2012-10-23T21:58:18.937
> 
> 标签：ios, xcode, amazon-s3, amazon-web-services, video-streaming

我们在 aws 中有 s3 存储桶，其中包含视频。我们需要使用 AWS iOS sdk 流式传输这些视频。

到目前为止，我能找到的唯一选择是使用 URL 进行流式传输。（对于公共视频）

但是 s3 getOBject 请求呢 - 我可以下载视频然后查看它，但是有没有办法分块下载并查看它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:45:27.277

找到了一种方法，您可以生成安全的 URL 来访问

```
S3GetPreSignedURLRequest * request = [[S3GetPreSignedURLRequest alloc] init];
request.key = fileName;
request.bucket = self.bucket;
[request setExpires:[NSDate dateWithTimeIntervalSinceNow:3600]]; 
```

这仅适用于 AWSIOSSDK 1+ 而不是 2

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T21:12:57.150

我帮助维护适用于 iOS 的 AWS 开发工具包。

SDK 支持获取请求的范围，因此您可以在离散操作中下载数据块。

```
S3GetObjectRequest *getObjectRequest = [[S3GetObjectRequest alloc] initWithKey:FILE withBucket:BUCKET];
[getObjectRequest setRangeStart:START rangeEnd:END];
[s3 getObject:getObjectRequest]; 
```

SDK 还包含一个委托协议，可用于处理以流方式下载的数据。

[AmazonRequestDelegate 协议](http://docs.amazonwebservices.com/AWSiOSSDK/latest/Classes/AmazonRequestDelegate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T23:16:40.373

getObject 默认情况下是一个非阻塞下载调用。因此，基本上该框架旨在处理下载完成后的回调，以便为您提供输出流中的数据并将其提供给客户端流以供查看。

SDK 支持非阻塞下载，因此理想情况下您也可以在客户端分块下载。

# android - 在 AsyncTask 上调用 execute() 不会调用 doInBackground()

> ID：13039990
> 
> 赞同：1
> 
> 时间：2012-10-23T21:58:23.113
> 
> 标签：android, android-asynctask

我在主 Activity 中有这段代码，其中`fetchxml`有一个 AsyncTask：

```
String GroupID = PreferenceManager.getDefaultSharedPreferences(MainActivity.this).getString("GroupID","");
fetchxml.execute(GroupID); 
```

在 中`doInBackground(String... paras)`，它是：

```
protected String doInBackground(String...  paras) {
    Log.d("URL+ paras[0]", paras[0]);
    String xml = parser.getXmlFromUrl(URL+ paras[0]);
    return xml;
} 
```

为什么我没有得到任何价值`paras[0]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T22:13:46.023

当值为 null 或为空 String 时，Log.d 也不会显示标签。确保 sharedPreferences 返回一个值。似乎键“GroupID”不存在，sharedPreferences 返回默认值，即空字符串“”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:14:45.437

确认您将扩展类定义`AsyncTask`为：

```
private class Fetchxml extends AsyncTask<String, Integer, String>{ ... 
```

这里重要的部分是确保上面的第一个参数的类型`String`与预期的值一致`doInBackground`。

还要确认`String GroupID`不为空。

# java - Spring：如何用常量值替换构造函数参数？

> ID：13039991
> 
> 赞同：0
> 
> 时间：2012-10-23T21:58:28.220
> 
> 标签：java, spring

我正在开发一个项目，在该项目中我的项目配置为

**项目配置.xml**

```
 <bean id="awsCredentials" class="com.amazonaws.auth.BasicAWSCredentials">
        <constructor-arg
                value="${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId}"/>
        <constructor-arg
                value="${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-secretAccessKey}"/>
    </bean> 
```

我正在添加一个测试配置，我可以从中传递这些值

**测试配置.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator-destBucketName=bucketname
    com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId=accesskey
    com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-secretAccessKey=secretaccess key

    <bean id="spa-evaluation-factory" class="com.myorg.sparrow..business.DummySpaEvaluationFactory"/>
    <import resource="classpath:/com/myorg/sparrow/spa_adapter/project-config.xml"/>
</beans> 
```

但这不起作用。我怎样才能

有定义的变量`test-config.xml`

```
com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator-destBucketName=bucketname
        com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId=accesskey
        com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-secretAccessKey=secretaccess key 
```

替换中的值`project-config.xml`

```
<bean id="awsCredentials" class="com.amazonaws.auth.BasicAWSCredentials">
            <constructor-arg
                    value="${com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId}"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:07:25.173

你可以这样做，你的占位符应该得到解决。

```
<context:property-placeholder location="classpath*:META-INF/spring/test.properties" local-override="true" properties-ref="localProperties" ignore-resource-not-found="true"/>

<util:properties id="localProperties">
    <prop key="com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator-destBucketName">bucketname</prop>     
    <prop key="com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-accessKeyId">accesskey</prop>        
    <prop key="com.myorg.sparrow.s3EnvironmentConfiguration.S3EnvironmentConfigurator.dest.ProposalManager-secretAccessKey">secretaccess key</prop>     
</util:properties> 
```

另一种方法是在上面的 test.properties 文件中添加条目。

# r - 为输入恰好是向量时工作的表编写通用函数

> ID：13039997
> 
> 赞同：1
> 
> 时间：2012-10-23T21:59:12.437
> 
> 标签：r, function, vector, matrix, dataframe

2D`data.frame`或`matrix`1D 向量的自动转换也很好，但在编写通用函数时会产生一些问题。例如，尝试`foo`使用命令过滤输入的某些列，例如`foo[,1:3]`适用于 a `data.frame`or `matrix`：

```
foo=matrix(1:9,nrow=3)
bar = function(x) print(x[,1])
bar(foo) # [1] 1 2 3 
```

但是考虑到我们首先要过滤 的一些行`foo`，并且碰巧只剩下一行：

```
bar(foo[1,]) # Error in x[, 1] : incorrect number of dimensions 
```

这个问题可以通过一个简单的技巧来解决：

```
bar = function(x) {
    if (is.null(dim(x))) x = t(data.frame(x))
    print(x[,1])
} 
```

`x`但是，如果我们在其主体中启用其他过滤器`bar()`，可能会将其再次转换为向量，那么问题会复杂得多。然后对于每个过滤，我们应该检查并执行相同的操作以确保我们拥有的仍然是一张表。

其他问题是：如果矩阵的过滤部分只是单个行/列，则缺少行名和/或列名。它需要进一步操作以将过滤部分重新组织为矩阵，检索原始行/列名称并将它们分配给结果矩阵。

问题是：如何*简单地*将适用于表的函数转换为通用函数，如果输入恰好是向量，它仍然有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T23:14:38.217

在处理可能是矢量或 data.frame 的数据时，我遇到了类似的问题。

通常，我只是在函数中创建一个子集函数。

```
foo <- function(dat,rows) { 

if(is.data.frame(dat) || is.matrix(dat)) { 
dat <- dat[rows,] 
} else {
dat <- dat[rows]

... # continue with function
} 
```

此方法还维护原始对象的类。

# unix - 命令行中的“@”是什么意思？

> ID：13039998
> 
> 赞同：0
> 
> 时间：2012-10-23T21:59:32.520
> 
> 标签：unix, command-line, cat

将“@”放在某事之前（例如包含 Java 运行命令的类路径条目的文件的路径）有什么影响？

我知道这与文件内容有关，但您可以想象在 Google 上搜索它有点困难。我也找不到谈论它的联机帮助页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:16:01.837

该`@`字符在 Unix 命令行上没有一般意义。它已被一些流行的实用程序使用。`@`以 a开头的命令`Makefile`告诉`make`在执行之前不要回显该行。GNU Autoconf 将替换`@`- 封闭的变量，例如`@srcdir@`，用它们发现的替换`configure`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T22:16:50.610

它在不同的程序中可能意味着不同的东西。作为惯例，命令行中的@file 可以解释为：

> 从文件中读取命令行选项。读取的选项将插入原始 @file 选项的位置。如果文件不存在或无法读取，则该选项将按字面意思处理，而不是删除。文件中的选项由空格分隔。通过将整个选项括在单引号或双引号中，可以在选项中包含空格字符。通过在要包含的字符前加上反斜杠，可以包含任何字符（包括反斜杠）。该文件本身可能包含额外的@file 选项；任何此类选项都将被递归处理。 [来自`ld`@file 的文档](http://linux.die.net/man/1/ld)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T22:24:40.520

来自[Bash 参考手册](http://www.gnu.org/software/bash/manual/bashref.html#Special-Parameters)：

> shell 专门处理几个参数。这些参数只能被引用；不允许分配给他们。
> 
> (...)
> 
> @
> 
> 扩展到位置参数，从一个开始。当扩展出现在双引号内时，每个参数都扩展为一个单独的单词。也就是说，“$@”等价于“$1”“$2”……。如果双引号扩展出现在一个单词中，则第一个参数的扩展与原始单词的开头部分连接，最后一个参数的扩展与原始单词的最后部分连接。当没有位置参数时，"$@" 和 $@ 扩展为空（即，它们被删除）。
> 
> (...)

您可以在任何程序的参数中使用@（at-sign）而无需转义。

如果你必须在参数中传递这样的东西`$@`- 你只需要转义`$`（美元符号）。