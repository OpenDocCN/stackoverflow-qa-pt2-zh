# StackOverflow 问答 15863000-15863999

# jquery - 如何将元素的高度复制到另一个元素？

> ID：15863002
> 
> 赞同：0
> 
> 时间：2013-04-07T13:37:57.233
> 
> 标签：jquery, jquery-animate, outerheight

我有一个**只有填充**的 div，我有另一个没有任何 css 属性的 div。
我想给两个 div 使用相同的高度`outerHeight`。

这是我的测试，这有效但并不完美：http: [//jsfiddle.net/A2bNm/6/](http://jsfiddle.net/A2bNm/6/)

```
$("#container").mouseenter(function () {
        $("#top").animate({ 'padding' : 70 }, "slow");
        $("#bottom").animate({'height':($("#top").outerHeight())}, "slow");

    }).mouseleave(function () {
        $("#top").animate({ 'padding' : 20}, "slow");
        $("#bottom").animate({'height':($("#top").outerHeight())}, "slow");
}); 
```

可以帮忙？谢谢你，对不起我的英语不好！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:45:21.867

尝试使用当前名称`this`和其他名称`.closest('div)`或`.siblings('div')`.

[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/) [http://api.jquery.com/closest/](http://api.jquery.com/closest/)

此外，也许将所需的高度存储为自变量，因此它不基于#top 的当前值（会发生变化）。

# java - 删除较短的字符串不起作用

> ID：15863004
> 
> 赞同：-1
> 
> 时间：2013-04-07T13:38:10.477
> 
> 标签：java

编写一个`removeShorterStrings`以 an`ArrayList<String>`作为参数的方法，并从每对连续的值中删除该对中较短的字符串。

例如，假设一个`ArrayList`被调用`list`包含以下值：`{"four", "score", "and", "seven", "years", "ago"}`

在第一对`"four"`和`"score"`中，较短的字符串是`"four"`。
在第二对`"and"`和`"seven"`中，较短的字符串是`"and"`。
在第三对`"years"`和`"ago"`中，较短的字符串是`"ago"`。

因此，调用：`removeShorterStrings(list);`应该删除这些较短的字符串，留下如下列表：`{"score", "seven", "years"}`.

如果存在平局（两个字符串的长度相同），您的方法应该删除该对中的第一个字符串。如果列表中有奇数个字符串，则应将最终值保留在列表中。

```
public void removeShorterStrings(ArrayList <String> a){

    for(int i=0;i<a.size()-1;i+=2){
        String word=a.get(i);
        String word2=a.get(i+1);

        if(a.size()%2==0 && word.length()<word2.length()){
           a.remove(i);
            if(word.length()==word2.length()){
                a.remove(i);
            }
        }
    }
} 
```

呼吁`["four", "score", "and", "seven", "years", "ago"]`。

我的代码给了我`[score, and, seven, years, ago]`而不是`[score, seven, years]`.

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:45:58.493

由于您已经从列表中删除了您的项目，因此您只需要增加 1。而且由于您的比较对，您需要在循环中删除其中一个。

这个产生[分数，七，年]

```
public void removeShorterStrings(ArrayList <String> a){

    for(int i=0;i<a.size()-1;i++){
        String word=a.get(i);
        String word2=a.get(i+1);

        if(word.length()<word2.length()){
           a.remove(i);           
        } else {
           a.remove(i+1)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:44:33.990

您`a.size()%2==0`对每一对都进行了测试，这不是必需的。只需将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T13:48:20.153

您的问题是您从列表中删除了元素，但继续使用旧索引。解决这个问题的最简单方法是向后遍历数组：

```
public void removeShorterStrings(ArrayList <String> a){

    for(int i=a.size()/2-1; i>=0; i--){
        String word=a.get(2*i);
        String word2=a.get(2*i+1);

        if(word.length()<=word2.length()){
           a.remove(2*i);
        } else {
           a.remove(2*i+1);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T13:48:35.560

**您不能在迭代列表元素的 for 循环中更改列表。**（除非您在删除元素后处理索引）

假设您删除第一个元素 (i=0)，然后第二个元素（索引 1）成为第一个元素，依此类推。现在，当你增加 i 时，你会得到第二对，最初是第四和第五（而不是第三和第四）。

试着先理解它。

这就是为什么在迭代列表时不能更改列表（除非您使用`Iterator`）

另一件事 - 你不需要检查 if `a.size()%2==0`。还有很多其他方法可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T14:16:08.580

注意你这里有主要问题

第一的

```
for(int i=0;i<a.size()-1;i+=2){ 
```

您从动态数组（ArrayList）中删除元素，并通过将 i 每次迭代递增 2 来处理它，就像它是静态数组一样，同时删除每个迭代 1 个元素，因此元素的索引减少 2。即在第一次迭代中，您的 i =0 并且你从 a 中删除“四”，所以现在 a 包含 [“score”、“and”、“seven”、“years”、“ago”]，然后你使用 i=2 进行第二个循环，这使得 a .get(i) 向您返回“七”而不是“和”！，这很明显，因为现在您删除了 1 个元素，而 esch 元素现在有了 index=oldIndex-1。

第二

```
if(a.size()%2==0 && word.length()<word2.length()){
       a.remove(i);
        if(word.length()==word2.length()){
            a.remove(i);
        }
    } 
```

你在这个 if 块中设置了完全错误的条件，这实际上是你在这里所做的主要工作，由于这些条件，现在永远不会正确完成。

1-`a.size()%2==0`仅在第一个循环中评估为真，因为大小是偶数，在第一个循环之后，您将这个偶数大小减少 1 变为奇数。

2-`word.length()<word2.length()`一旦两个词的长度相等，这将给出错误！实际上你永远不会达到这种状态`if(word.length()==word2.length()){ a.remove(i); }`

正确的代码应该是

```
for(int i=0;i<a.size()-1;i++){
        String word=a.get(i);
        String word2=a.get(i+1);

        if(word.length()<=word2.length()){
           a.remove(i);
        }
        else
           a.remove(i+1);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-10T09:07:13.463

```
public static void removeShorterStrings(ArrayList<String> arrayList){
    for(int i = 0; i < arrayList.size()-1; i++){
        if(arrayList.get(i).length() <= arrayList.get(i + 1).length()){
            arrayList.remove(i);
        }
        else{
            arrayList.remove(i + 1);
            i++;
        }
    }
} 
```

输入：[“四”、“分数”、“和”、“七”、“年”、“以前”]

输出：[分数，七，年]

# javascript - 为什么我不能在 window.location 上进行搜索？

> ID：15863020
> 
> 赞同：0
> 
> 时间：2013-04-07T13:39:36.993
> 
> 标签：javascript

我需要检查该位置是否与某些文本相似。所以我的代码如下：

```
 //are we already on the same form
        var loc = window.top.window.location;
        if(loc)
           window.alert("loc=" + loc);

        if(loc && loc.search(form, "i") != -1)
        {

        } 
```

window.top.window 看起来有点奇怪 - 使用它是因为窗口可能不是最顶层的，我需要获取最顶层的实例。

我确实得到了一个 loc 实例 - 所以它不为空。但是搜索有效吗？

但是如果我运行这段代码，我会得到一个 javascript 运行时错误：

```
Caught exception: Object doesn't support this action 
```

为什么我会遇到这个问题？

如果我无法搜索如何使用位置比较字符串？

编辑

让我感到困惑的是，该位置确实有一个只读属性搜索，即 HTTP GET 命令。

我在想我是在对一个字符串进行 .search - 而是试图写入一个只读属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:41:34.223

尝试：

```
 window.top.window.location.href 
```

您只能警告字符串。`window.location`变量是对象，什么是属性`href`，什么是字符串。请参阅文档：[http ://www.w3schools.com/jsref/obj_location.asp](http://www.w3schools.com/jsref/obj_location.asp)

如果您想查看位置对象内部的内容：

```
 console.log(window.top.window.location); 
```

这将打印出类似这样的内容（在 chrome 中）：

```
 Location
      -ancestorOrigins: DOMStringList
      -assign: function () { [native code] }
      -hash: ""
      -host: "stackoverflow.com"
      -hostname: "stackoverflow.com"
      -href: "http://stackoverflow.com/posts/15863038/edit"
      -origin: "http://stackoverflow.com"
      -pathname: "/posts/15863038/edit"
      -port: ""
      -protocol: "http:"
      -reload: function () { [native code] }
      -replace: function () { [native code] }
      -search: ""
      -toString: function toString() { [native code] }
      -valueOf: function valueOf() { [native code] }
      -__proto__: Location
            ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:42:43.010

你需要使用`window.top.window.location.href`！`window.top.window.location`是一个对象而不是一个字符串。

```
 //are we already on the same form
    var loc = window.top.window.location.href;
    if(loc)
       window.alert("loc=" + loc);

    if(loc && loc.search(form, "i") != -1)
    {

    } 
```

![图片](https://fs.fnkr.net/FhPJ06mxyfcH/raw)

# c# - 将背景绑定到模板化控件

> ID：15863023
> 
> 赞同：0
> 
> 时间：2013-04-07T13:39:59.607
> 
> 标签：c#, .net, wpf, checkbox, mouseevent

我有以下`Checkbox.xaml`文件。我想`Dropshadow`在鼠标悬停上应用两种不同的效果`CheckBox`。所以我拿了两个`MultiTriggers`。我想删除这些并使用to of element`MultiTriggers`将它们组合成单个触发器。因为由于我应用的第一个触发器，元素将始终具有正确的背景。`DataBinding``Background``Border``Border`

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="..\Colors\Colors.xaml"></ResourceDictionary>
    </ResourceDictionary.MergedDictionaries>

    <ControlTemplate x:Key="CheckBoxTemplate" TargetType="CheckBox" >

       <BulletDecorator >
        <BulletDecorator.Bullet>
            <Border x:Name="Border"  
              Width="13" 
              Height="13" 
              CornerRadius="0" 
              Background="{StaticResource TextNormalBrush}"
              BorderThickness="3"
              BorderBrush="Black">
                </Border>
        </BulletDecorator.Bullet>
        <ContentPresenter Margin="4,0,0,0"
            VerticalAlignment="Center"
            HorizontalAlignment="Left"
            RecognizesAccessKey="True" />
        </BulletDecorator>

        <ControlTemplate.Triggers>
            <Trigger Property="IsChecked" Value="True">
                <Setter TargetName="Border" Property="Background" Value="{StaticResource AlternateLinearBrush}"/>
            </Trigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsMouseOver" Value="True"></Condition>
                    <Condition Property="IsChecked" Value="False"></Condition>
                </MultiTrigger.Conditions>
                <MultiTrigger.Setters>
                    <Setter TargetName="Border" Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect ShadowDepth="0" Direction="0" BlurRadius="15" Opacity="1" Color="{StaticResource TextNormalColor }">

                            </DropShadowEffect>
                        </Setter.Value>
                    </Setter>

                </MultiTrigger.Setters>
            </MultiTrigger>

            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsMouseOver" Value="True"></Condition>
                    <Condition Property="IsChecked" Value="True"></Condition>
                </MultiTrigger.Conditions>
                <MultiTrigger.Setters>
                    <Setter TargetName="Border" Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect ShadowDepth="0" Direction="0" BlurRadius="15" Opacity="1" Color="{StaticResource AlternateColor }">

                            </DropShadowEffect>
                        </Setter.Value>
                    </Setter>

                </MultiTrigger.Setters>
            </MultiTrigger>                
        </ControlTemplate.Triggers>            
    </ControlTemplate>

    <Style x:Key="CheckBoxStyle" TargetType="{x:Type CheckBox}">
        <Setter Property="Template" Value="{StaticResource CheckBoxTemplate}" />
        <Setter Property="Foreground" Value="{StaticResource TextNormalBrush}" />
        <Setter Property="TextOptions.TextHintingMode" Value="Animated"/>

    </Style>
</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:19:36.223

你的意思是这样的：

```
 <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Border" Property="Effect">
                    <Setter.Value>
                        <DropShadowEffect ShadowDepth="0" Direction="0" BlurRadius="15" Opacity="1" Color="{Binding RelativeSource={RelativeSource AncestorType={x:Type Border}}, Path=Background.Color}">
                        </DropShadowEffect>
                    </Setter.Value>
                </Setter>
        </Trigger> 
```

在此示例中，阴影效果始终具有其边框的背景颜色。

# mongodb - MongoDb 中的条件

> ID：15863027
> 
> 赞同：0
> 
> 时间：2013-04-07T13:40:27.893
> 
> 标签：mongodb, conditional-statements

使用复杂值等`$not`操作的正确方法是什么？`$ne`我的意思是值，它们也是通过一些操作计算出来的。我试过`{$not: {$and: [{field1: 'a'}, {field2: 'b'}]}}`and `{$not: [{$and: [{field1: 'a'}, {field2: 'b'}]}]}`，但它们似乎都不能正常工作。与`$ne`:相同`{$ne: [field1, field2]}`。文档将它们的用法示例显示为`field1: {$not: {$gt: 5}}`，对于如此简单的情况很好，但是如何处理更复杂的情况呢？

如果它有所作为，我想在`$match`聚合框架的子句中使用它们，而不仅仅是在`find()`.

升级版：

例如，我想运行这样的查询：`db.test.aggregate({$match: {$not: {$and: [{f1: 'a'}, {f2: 'b'}]}}})`，但它给出错误“无效运算符：$and”（相同的代码没有`$not`工作）。要在之前测试该查询插入文档：`db.test.insert({f1:'a', f2:'b'}); db.test.insert({f1:'b', f2:'c'})`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:17:45.663

`$not`并且`$ne`是特定于字段的运算符，因此您不能将它们应用于多字段查询操作。我不认为你可以像你试图做的那样构建一个广义的“否定”查询。

相反，您需要逐个字段反转逻辑字段以使用如下查询：

```
db.test.aggregate({$match: {$or: [{f1: {$ne: 'a'}}, {f2: {$ne: 'b'}}]}}) 
```

# html - 边距：0 自动不起作用

> ID：15863032
> 
> 赞同：-1
> 
> 时间：2013-04-07T13:41:10.020
> 
> 标签：html, css, margin

我已经阅读了很多关于这个问题的内容，我认为我做的一切都是正确的，但是缺少一些东西。

这是我的代码：

```
<div id="text">some text</div> 
#text {margin: 0 auto; width: 1000px; display: block;    font-size: 24px; color: #000;} 
```

[http://jsfiddle.net/yKBQD/](http://jsfiddle.net/yKBQD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:44:20.957

自动边距通过增加左边距直到它等于右边距来使元素居中。如果元素比它的容器宽，那么它根本不会移动元素。JS Fiddle 框架很少会超过 1000 像素宽。

自动边距*使元素*居中，而不是其内容。除非您添加边框、背景、轮廓等以使边缘可见，否则您将无法看到元素的位置（如果它与其容器一样宽或更宽）。

要将元素内的内联元素和文本居中，`text-align: center`请在包含它们的元素上设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:44:45.490

看起来您正在寻找`text-align: center`风格，不`margin: 0 auto`：**[DEMO](http://jsfiddle.net/yKBQD/2/)**。

`margin: 0 auto`版本将需要另一个元素`div#text`：**[DEMO](http://jsfiddle.net/yKBQD/4/)**

# iphone - xcode UILabel调整大小和重新定位不起作用

> ID：15863040
> 
> 赞同：1
> 
> 时间：2013-04-07T13:41:39.840
> 
> 标签：iphone, xcode, uiimage, uilabel

我一直试图让这个工作比我关心管理员的时间长得多，但我已经搜索了几乎所有的文章，而且似乎没有一个解决方案在做任何事情......

我的问题是我试图根据文本量调整标题（UILabel）的大小，在调整标题大小后，我想将图像移动到标题下方 100 像素。

图像框架显示该值已更改为计算得出的值，但应用程序从未更改，它仅显示在情节提要中进行的设计。

故事板布局：

*   看法
    *   滚动视图
        *   图像视图
        *   标签 - 标题

下面的代码显示了一些值的打印输出，没有运行它，其中的一个示例是：

```
Before: [0.000000]
After: [24.000000]
Label Expected Size: 280.000000, 96.000000
After Title Assign: [96.000000]
Image Y Before: [0.000000]
Image Y After: [196.000000] 
```

代码：

```
self.Title.text = NewsCell.Title;
self.Image.image = NewsCell.Image;

// fit title
printf("Before: [%f]\n", self.Title.frame.size.height);
[self.Title sizeToFit];
printf("After: [%f]\n", self.Title.frame.size.height);

//self.Title.frame = CGRectMake(20, 5, 280, self.Title.frame.size.height);
self.Title.numberOfLines = 0;

CGSize maximumLabelSize = CGSizeMake(280, 100);
CGSize expectedLabelSize = [self.Title.text sizeWithFont:self.Title.font constrainedToSize:maximumLabelSize lineBreakMode:self.Title.lineBreakMode];

self.Title.frame = CGRectMake(20,0,expectedLabelSize.width, expectedLabelSize.height);
printf("Label Expected Size: %f, %f\n", expectedLabelSize.width, expectedLabelSize.height);
printf("After Title Assign: [%f]\n", self.Title.frame.size.height);   

// set image location to be bototm of title + 100
printf("Image Y Before: [%f]\n", self.Image.frame.origin.y);
double titleBottom = self.Title.frame.origin.y + self.Title.frame.size.height + 100;
self.Image.frame = CGRectMake(0, titleBottom, 320, 200);
printf("Image Y After: [%f]\n", self.Image.frame.origin.y);

// set description location
double imageBottom = self.Image.frame.size.height + self.Image.frame.origin.y + 5;

// description expand
[self.Description.text stringByAppendingString: @"\n\n © 2013 Geekosystem, LLC"];
[self.Description sizeToFit];
self.Description.frame = CGRectMake(20, imageBottom, 280, self.Description.frame.size.height);
self.Description.numberOfLines = 0; 
```

# java - 带有自定义/核心类的 instanceof

> ID：15863041
> 
> 赞同：3
> 
> 时间：2013-04-07T13:41:44.787
> 
> 标签：java, instanceof

为什么我可以使用我的自定义接口测试我的自定义类，`instanceof`而我无法对 java 核心类做同样的事情？

```
interface A{}
class B{}
public class Tmp {
    public static void main(String [] args) {
        String s = "";
        Integer i = 1;
        B b = new B();
        System.out.println(s instanceof A); //1
        System.out.println(i instanceof A); //2
        System.out.println(b instanceof A); //3
    }
} 
```

第 1 行和第 2 行无法编译。第 3 行将编译（并打印`false`）。有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:48:47.297

如果编译器可以检测到该`instanceof`操作永远不会为真，它将产生编译器错误。它通过遵循与铸造相同的规则来确定这一点。具体规则在 JLS 的[第 15.20.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.20.2)中描述：

> 如果将 RelationalExpression 转换为 ReferenceType 将作为编译时错误被拒绝，则 instanceof 关系表达式同样会产生编译时错误。在这种情况下，instanceof 表达式的结果永远不会为真。

# html - 具有最大长度的电子邮件地址正则表达式

> ID：15863043
> 
> 赞同：4
> 
> 时间：2013-04-07T13:41:50.587
> 
> 标签：html, regex

我有一个用于客户端 HTML5 验证的正则表达式，我需要向它添加一个最大长度元素。这是我的正则表达式：

```
@pattern = @"^([a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)$" 
```

例如，我将如何将其限制为 50 个字符？

编辑：我需要检查与使用 HTML5 验证相同的正则表达式中的最大长度，该验证目前仅允许检查必需和模式属性。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T13:57:25.903

如果您绝对必须使用正则表达式，请在正则表达式的开头添加一个前瞻断言：

```
@pattern = @"^(?!.{51})([a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)$" 
```

`(?!.{51})`断言不可能匹配从字符串开头开始的 51 个字符，而不实际消耗任何字符，因此它们仍然可用于实际的正则表达式匹配。

# fiddler - 如何发送两个修改Body Request

> ID：15863044
> 
> 赞同：1
> 
> 时间：2013-04-07T13:42:07.227
> 
> 标签：fiddler

我遇到了一个小障碍。英语很差，表达困难

我想修改正文中的Request并连续发送两个Request

原创内容：

```
POST http://www.text.com/next?cyt=1 is
HTTP/1.1
Host: www.text.com
User-Agent: Million/1.0.0
Content-Length: 58
Accept: * / *
Accept-Encoding: gzip
Accept-Language:
Content-Type: application / x-www-form-urlencoded
Cookie: S = hveisf76n2lrnpvbeng8ivrat6
Connection: keep-alive
Connection: keep-alive

S = hveisf76n2lrnpvbeng8ivrat6 & step = ashf87afs0a2e4 
```

尝试修改Body并发送至：

```
S = hveisf76n2lrnpvbeng8ivrat6 & step = qarker11s77ar 
```

再次尝试修改 Body 并发送到：

```
S = hveisf76n2lrnpvbeng8ivrat6 & step = qarker22s88ar 
```

请求发送两次修改正文

我尝试做代码：

* * *

```
 static function OnBeforeRequest(oSession: Session) 
{ 
   if(oSession.uriContains("http://www.text.com/next?cyt=1"))
   {
      var strBody=oSession.GetRequestBodyAsString();                                                    
      strBody=strBody.replace("step=ashf87afs0a2e4","step=qarker11s77ar");
      oSession.utilSetRequestBody(strBody);

         var strBody1=oSession.GetRequestBodyAsString();
         strBody1=strBody.replace("step=qarker11s77ar","step=qarker22s88ar");
         oSession.utilSetRequestBody(strBody1);
   }
} 
```

* * *

出现的问题是：

> S = hveisf76n2lrnpvbeng8ivrat6 & step = qarker11s77ar

传输成功，但是

> S = hveisf76n2lrnpvbeng8ivrat6 & step = qarker22s88ar

而且不能发送，这个问题怎么解决？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T09:22:32.260

```
static function OnBeforeRequest(oSession: Session) 
{ 
if(oSession.uriContains("http://www.text.com/next?cyt=1"))
{
var strBody=oSession.GetRequestBodyAsString();                                                    
  strBody=strBody.replace("step=ashf87afs0a2e4","step=qarker11s77ar");
  strBody=strBody.replace("step=qarker11s77ar","step=qarker22s88ar");
     oSession.utilSetRequestBody(strBody);
}
} 
```

# java - 无法从 java 程序执行命令“make clean”

> ID：15863045
> 
> 赞同：0
> 
> 时间：2013-04-07T13:42:07.980
> 
> 标签：java, ubuntu-12.04

我正在尝试从Java程序执行make clean命令。我需要先更改目录然后执行它。或者还有其他方法吗？我已经尝试了网站中所述的两种方式。1.使用ProcessBuilder

```
 ProcessBuilder pb = new ProcessBuilder("make "," clean");
pb.directory(new File("\\home\\p\\lipta-v1-3"));
pb.start(); 
```

1.  使用运行时

    运行时运行时 = Runtime.getRuntime(); 字符串命令="使清洁"; process=runtime.exec(command,null,new File("/home/p/lipta-v1-3"));

但是它们都没有工作。其他命令，如 cp ，rm 等工作正常。我正在使用 Netbeans7.0.1 和 ubuntu 12.04

# python - 字典中的python对象

> ID：15863047
> 
> 赞同：0
> 
> 时间：2013-04-07T13:42:26.117
> 
> 标签：python, dictionary

我正在尝试将对象保存`candle`在字典`candlebuffer`中，但是它给了我下面的错误。我在挣扎；我的语法有什么问题？

```
 class Observer:
    def __init__(self):
        self.listeners = []

    def attach(self, listener):
        if not listener in self.listeners:
            self.listeners.append(listener)

    def notify(self, event):
        for listener in self.listeners:
            listener.update(event)

class CandleGenerator(Observer):
    def __init__(self,freq):
        Observer.__init__(self)
        self.freq = freq
        self.candle = Candle()

    def update(self,tick):
        self.candle.addTick(tick,self.freq) 
        if keyfunc(self.candle.timestamp,self.freq) != self.candle.ref_timestamp:
            self.notify(self.candle)
            self.candle = Candle()

class CandlePrinter:
    def update(self, candle):
        print "Bougie>>>>>> freq: %s %s %s %s %s %s %s %s %s " % (candle.freq,candle.last_price,candle.volume, candle.timestamp, candle.ref_timestamp, candle.open_price,candle.high_price,candle.low_price, candle.last_price)

class CandleBuffer:
    def __init__(self,candle):
        self.candlebuffer={0: candle}
    def update(self,candle):
        self.candlebuffer[candle.timestamp]= candle
        print self.candlebuffer

print('begin')

tickGenerator = TickGenerator()
candleGenerator1 = CandleGenerator(1)

candlePrinter = CandlePrinter()      
candleBuffer = CandleBuffer(5)    

tickGenerator.attach(candleGenerator1)
candleGenerator1.attach(candlePrinter)
candleGenerator1.attach(candleBuffer)

tickGenerator.generate() 
```

它提供以下输出：

```
TypeError: __init__() takes exactly 2 arguments (1 given) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:56:48.807

既然您已经确认了我的怀疑，您必须将另一个参数传递给构造函数，并使用字典而不是集合：

```
class CandleBuffer():
    def __init__(self,candle):
        self.candlebuffer={0 : candle}
    def update(self,candle):
        self.candlebuffer[candle.timestamp]= candle

# ...
candleBuffer = CandleBuffer(a_candle)
candleBuffer.update(another_candle) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T13:46:09.620

这不是导致您的错误的原因，但您需要使用 : 创建字典。

```
self.candlebuffer = { 0 : candle } 
```

它在格式键上：值。

我猜你正在创建一个 CandleBuffer 而不在代码中的其他地方提供参数。

# java - 如何在 DefaultListModel 中添加 JButton？

> ID：15863048
> 
> 赞同：1
> 
> 时间：2013-04-07T13:42:27.053
> 
> 标签：java, swing, jlist, listcellrenderer

我正在制作战舰游戏，我正在尝试找出一种方法来控制窗格中的按钮，以便我可以拖放它们并使用默认列表模型跟踪它们的索引。如果我添加字符串或 ImageIcons 它工作正常但有了按钮，我得到了不同的东西。

这是我的代码：

```
public class ListModelExample extends JPanel {

  JList list;
  DefaultListModel model;
  int counter = 15;

  public ListModelExample() {
    setLayout(new BorderLayout());
    model = new DefaultListModel();
    list = new JList(model);
    JScrollPane pane = new JScrollPane(list);
    JButton addButton = new JButton("Add Element");
    JButton removeButton = new JButton("Remove Element");
    final JButton button = new JButton("button");

    for (int i = 0; i < 5; i++)
      model.addElement(button);

    addButton.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        model.addElement(button);
        counter++;    

      }
    });
    removeButton.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        if (model.getSize() > 0)
          model.removeElementAt(0);
      }
    });

    add(pane, BorderLayout.NORTH);
    add(addButton, BorderLayout.WEST);
    add(removeButton, BorderLayout.EAST);
  }

  public static void main(String s[]) {
    JFrame frame = new JFrame("List Model Example");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(new ListModelExample());
    frame.setSize(260, 200);
    frame.setVisible(true);

  }
} 
```

如果我添加按钮，我会得到这个结果：

![在窗格中添加按钮的结果](https://i.stack.imgur.com/ZfX2o.png)

**所以我的问题是：如何使按钮正常显示而不是默认列表模型中的文本？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T13:56:07.387

*   这只能通过`Renderer`，只`String`为`DefaultListModel`

*   不要放任何`JComponents`东西`XxxModel`

*   我将使用`JPanel`with`JButtons`而不是容器（与or相比，`JList`需要更改`getScrollableBlockIncrement`/`getScrollableUnitIncrement`以进行自然滚动）`JList``JTable`

关于两种方式的示例

```
import java.awt.*;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import javax.swing.*;

public class ListButtons extends JFrame {

    private static final long serialVersionUID = 1L;

    public ListButtons() {
        setLayout(new GridLayout(0, 2, 10, 10));
        DefaultListModel model = new DefaultListModel();
        model.addElement(createButtons("one"));
        model.addElement(createButtons("two"));
        model.addElement(createButtons("three"));
        model.addElement(createButtons("four"));
        model.addElement(createButtons("five"));
        model.addElement(createButtons("six"));
        model.addElement(createButtons("seven"));
        model.addElement(createButtons("eight"));
        model.addElement(createButtons("nine"));
        model.addElement(createButtons("ten"));
        model.addElement(createButtons("eleven"));
        model.addElement(createButtons("twelwe"));
        JList list = new JList(model);
        list.setCellRenderer(new PanelRenderer());
        JScrollPane scroll1 = new JScrollPane(list);
        final JScrollBar scrollBar = scroll1.getVerticalScrollBar();
        scrollBar.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                System.out.println("JScrollBar's current value = " + scrollBar.getValue());
            }
        });
        add(scroll1);
        JScrollPane scroll2 = new JScrollPane(createPanel());
        add(scroll2);        
        final JScrollBar scrollBar1 = scroll2.getVerticalScrollBar();
        scrollBar1.addAdjustmentListener(new AdjustmentListener() {

            @Override
            public void adjustmentValueChanged(AdjustmentEvent e) {
                System.out.println("JScrollBar's current value = " + scrollBar1.getValue());
            }
        });

    }

    public static JPanel createPanel() {
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(0, 1, 1, 1));
        panel.add(createButtons("one"));
        panel.add(createButtons("two"));
        panel.add(createButtons("three"));
        panel.add(createButtons("four"));
        panel.add(createButtons("five"));
        panel.add(createButtons("six"));
        panel.add(createButtons("seven"));
        panel.add(createButtons("eight"));
        panel.add(createButtons("nine"));
        panel.add(createButtons("ten"));
        panel.add(createButtons("eleven"));
        panel.add(createButtons("twelwe"));
        return panel;
    }

    public static JButton createButtons(String text) {
        JButton button = new JButton(text);
        return button;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                ListButtons frame = new ListButtons();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                //frame.pack();
                frame.setSize(270, 200);
                frame.setVisible(true);
            }
        });
    }

    class PanelRenderer implements ListCellRenderer {

        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            JButton renderer = (JButton) value;
            renderer.setBackground(isSelected ? Color.red : list.getBackground());
            return renderer;
        }
    }
} 
```

# android - 安卓屏幕比例

> ID：15863052
> 
> 赞同：0
> 
> 时间：2013-04-07T13:42:44.750
> 
> 标签：android, screen, opengl-es-2.0, screen-resolution, aspect-ratio

我在 Android 上使用 OpenGL ES 2.0，并且我像这样初始化我的显示：

```
float ratio = (float) width / height;
Matrix.orthoM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7);  //Using Orthographic as developing 2d 
```

我无法理解的是：

假设我的应用程序是一个“固定屏幕”游戏（就像吃豆人，即没有滚动，整个游戏都在屏幕上可见）。

现在，如果我在 x 和 y 上都在 -1 到 +1 处绘制一个四边形，我会得到这样的结果：

![在此处输入图像描述](https://i.stack.imgur.com/pD5hu.jpg)

显然，这是因为我设置了 -ratio, ratio ，如上所示。所以这是正确的。

但是我应该把它用作我的“整个”屏幕吗？左右两侧有相当大的信箱？

我想要一个矩形显示器，它是物理显示器的整个高度（以及尽可能多的宽度），但这意味着在小于 -1 和大于 +1 的位置绘制，这是一个问题吗？

我意识到如果这是一个滚动游戏，我可能会选择使用剪辑，但对于这个特定的场景，我希望屏幕上的整个“游戏板”是静态的（并且尽可能多地使用可用的屏幕空间没有“拉伸”，从而导致我的精灵伸长）。

因为我喜欢使用 0,0 作为屏幕顶部，所以基本上我所做的就是传递我的 draw 方法，如下所示：

```
quad1.drawQuad (10,0); 
```

当 drawQuad 方法得到这个时，它基本上采用从左到右的范围，如我的 openGL 所表达的那样，并除以屏幕宽度（因此，在我的情况下，-1.7 到 +1.7 所以 3.4/2560 = 0.001328125）。假设我指定 10 作为我的 X（如上），它会说：

```
-1.7 + (10*0.001328125) = -1.68671875 
```

然后它在 -1.68671875 处绘制四边形。

这样做我可以使用正常的坐标（我只是减去而不是添加 y 轴，所以我可以在顶部有 0）。

这是做事的好方法吗？

因为用这种方法，此刻，如果我指定一个 100,100 的正方形，它不是正方形，它是矩形。但是，从好的方面来说，我可以通过按宽度 x 高度缩放四边形来填充整个物理屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:56:48.180

您正在绘制一个 1x1 四边形，这就是您看到 1x1 四边形的原因。尝试将四边形 0.25 向右或向左平移，您会发​​现您也可以在该空间中绘图。

在图形中，您创建一个对象，例如四边形，在您的情况下，您将其设为 1x1。然后你把它放在你想要的任何地方。如果您不定位它，那么它将位于原点，这就是您所看到的。

如果您绘制更宽的形状，您还会看到您可以在屏幕上的此区域之外进行绘制。

顺便说一句，使用正交矩阵函数，您不仅要指定屏幕纵横比，还要指定必须使用的坐标单元大小。这就是为什么 1x1 填充屏幕高度的原因，因为您的上下边界设置为 1 和 -1。你的比率比一多一点，因为你的宽度比你的高度长，所以你的左右边界基本上是 -1.5 和 1.5（无论你的比率是多少）。

但你也可以这样做；

`Matrix.orthoM(mProjMatrix, 0, -width/2, width/2, -height/2, height/2, 3, 7);`

在这里，您的比率是相同的，但是您将其发送到带有屏幕坐标的正射投影。*（免责声明：我不使用与您相同的数学库，但这些似乎是基于您传递给它的参数的传统正交矩阵函数）。*

因此，假设您的分辨率为 1000x500 像素。在 OpenGL 中，您的 0,0 原点位于中间。所以现在你的左边缘在（-500，y），右边缘在（500，y），你的顶部是（x，250）。所以如果你画你的 1x1 四边形，它会非常小，但是如果你画一个 250x250 的正方形，它看起来就像你之前正射投影中的 1x1 四边形。

因此，您可以指定您想要的坐标、比率、单位大小等，以了解您想要的工作方式。就个人而言，我不喜欢将坐标指定为 0 到 1 之间的分数，我喜欢将它们与屏幕像素的含义相同。

但是无论您是否选择这样做，希望您了解您实际传递给这些矩阵函数的内容。

最好的学习方法之一是将对象绘制到屏幕上，然后使用发送到模型视图和投影矩阵的不同数字进行操作，这样您就可以看到它们实际在做什么。

# php - 使 jqmPhp 能够像 Gmail mobi 一样运行？

> ID：15863053
> 
> 赞同：1
> 
> 时间：2013-04-07T13:42:58.547
> 
> 标签：php, jquery-mobile, gmail

我很确定以前从未有人问过这个问题。我是 jQuery 新手，发现[jqmPhp](http://www.jqmphp.com/%20jqmPhp)非常易于使用。但是，我正在尝试实现一些我觉得实现起来非常复杂的事情。

我需要过滤列表项（如此[处](http://demo.jqmphp.com/#simple-xml.php)）并使用户能够选中/取消选中要删除的几个列表项。我正在尝试实现与 Gmail 移动版类似的功能（左侧有一个复选框，选择它将使相关行突出显示，并允许用户只需单击一个按钮即可删除选中的行）。

用jqmphp可以做到这一点吗？如果是这样，任何人都可以帮助我提供更多信息、链接或代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T16:01:48.227

通过将列表视图转换为可检查的列表项，我为您制作了一个**演示。**

[http://jsfiddle.net/巴勒斯坦/vcXmK/](http://jsfiddle.net/Palestinian/vcXmK/)

> HTML

```
<div data-role="page">
 <div data-role="header">
   <h1>Header</h1>
 </div>
<div data-role="content">
 <ul id="list-view-test" data-role="listview" data-autodividers="true" data-filter="true" data-inset="true">
   <li><a href="#">Adam Kinkaid</a>
   </li>
   <li><a href="#">Alex Wickerham</a>
   </li>
   <li><a href="#">Avery Johnson</a>
   </li>
   <li><a href="#">Bob Cabot</a>
   </li>
   <li><a href="#">Caleb Booth</a>
   </li>
   <li><a href="#">Christopher Adams</a>
   </li>
   <li><a href="#">Culver James</a>
   </li>
  </ul>
  <a href="#" data-role="button" id="del">Delete</a>
  <a href="#" data-role="button" id="reset">Reset</a>
 </div>
 <div data-role="footer">
     <h1>Footer</h1>
 </div>
</div> 
```

> 代码

```
// Change icons
$('#list-view-test').find('span.ui-icon').each(function () {
 if ($(this).hasClass('ui-icon-arrow-r')) {
    $(this).removeClass('ui-icon-arrow-r').addClass('ui-icon-checkbox-off');
}
 $('#list-view-test').listview('refresh');
});

// toggle "checked/unchecked"
$('#list-view-test').on('click', 'li', function (event) {
 event.preventDefault();
 $(this).find('span.ui-icon').removeClass('ui-icon-checkbox-off').addClass('ui-icon-checkbox-on');
});

// Delete selected 
$('#del').on('click', function () {
 $('span.ui-icon').each(function () {
    if ($(this).hasClass('ui-icon-checkbox-on')) {
        $(this).closest('li').remove();
        $('#list-view-test').listview('refresh');
    }
 });
});

// Clear selection
$('#reset').on('click', function () {
 $('span.ui-icon').each(function () {
    if ($(this).hasClass('ui-icon-checkbox-on')) {
        $(this).removeClass('ui-icon-checkbox-on').addClass('ui-icon-checkbox-off');
    }
 });
}); 
```

# java - 在 Java 中加载序列化 hashmap 的最快方法是什么？

> ID：15863054
> 
> 赞同：0
> 
> 时间：2013-04-07T13:43:14.700
> 
> 标签：java, hashmap

我已经使用 objectstream 和 fileoutputstream 将 HashMap 序列化为文件。这是一个非常庞大的 HashMap，大约有 1.5 亿个条目。当我从文件中读回它时，加载需要很长时间（约 40 分钟）。

我使用 FileOutputStream 后跟 ObjectOutputStream 来序列化对象。然后，我使用 ObjectInputStream 和 FileInputStream 来读取对象。

是否有推荐的方法来读取序列化的 HashMap 以便从文件中快速加载？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T14:56:15.047

使用 BufferedInputStream 应该可以提高性能：

```
ObjectInputStream in = 
    new ObjectInputStream(new BufferedInputStream(new FileInputStream(file))); 
```

当然，BufferedOutputStream 也会提高序列化的性能。

使用这些缓冲流可以一次性从文件系统中读取大块字节，而不是逐字节读取。阅读文档以获取更多信息。

# c++ - 如何在 --help 输出中显示命令行操作数描述

> ID：15863056
> 
> 赞同：5
> 
> 时间：2013-04-07T13:43:23.630
> 
> 标签：c++, boost, boost-program-options

我正在使用 Boost.program_options 来解析命令行以实现 POSIX 实用程序。举个简单的例子，以[`cmp`](http://pubs.opengroup.org/onlinepubs/007904875/utilities/cmp.html).

现在我想要一个额外的参数`--help`来显示所有参数的描述，这在这种情况下很重要。我有：

```
po::options_description options("Options");
options.add_options()("help", "Show this help output.")
                     (",l", "(Lowercase ell.) Write the byte number (decimal) and the differing bytes (octal) for each difference.")
                     (",s", "Write nothing for differing files; return exit status only.")

po::positional_options_description operands;
operands.add("file1", 1);//, "A pathname of the first file to be compared. If file1 is '-', the standard input shall be used.")
operands.add("file2", 1);//, "A pathname of the second file to be compared. If file2 is '-', the standard input shall be used.");

po::variables_map vm;
po::store(po::command_line_parser(argc, argv).options(options).positional(operands).run(), vm);
po::notify(vm);

if(vm.count("help"))
{
  std::cout << "cmp: compare two files\nUsage: cmp [ -l | -s ] file1 file2\n" << options;
  return 0;
} 
```

无法显示`file1`和`file2`选项的描述。我当然可以将它们添加到`options`，但这会添加至少两个不需要的参数`[-]-file{1,2}`，这是我真的不想要的。我只想要这个输出`--help`（没有明显的硬编码）：

```
cmp: compare two files
Usage: cmp [ -l | -s ] file1 file2
Options:
  --help                Show this help output.
  -l                    (Lowercase ell.) Write the byte number (decimal) and the differing bytes (octal) for each difference.
  -s                    Write nothing for differing files; return exit status only.
Operands:
  file1                 A pathname of the first file to be compared. If file1 is '-', the standard input shall be used.
  file2                 A pathname of the second file to be compared. If file2 is '-', the standard input shall be used. 
```

有什么方法可以在不破坏图书馆的情况下实现这一目标？[我认为这是非常基本的东西，但我在任何教程](http://www.boost.org/doc/libs/1_53_0/doc/html/program_options/tutorial.html)中都找不到它。

**更新**为了每个人的利益，我以一种希望向后兼容的方式提交了一个[功能请求](https://svn.boost.org/trac/boost/ticket/8430)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:54:04.857

这并不理想，但是如何创建一组“虚拟”程序选项，让 boost::program_options 格式化程序为您格式化其帮助文本，然后通过快速替换删除破折号？

除了帮助文本之外，然后输出该`options`帮助文本。

像这样的东西：

```
po::options_description dummy_options("Operands");
dummy_options.add_options()
    ("file1", po::value<std::string>(), "A pathname of the first file to be compared. If file1 is '-', the standard input shall be used.")
    ("file2", po::value<std::string>(), "A pathname of the second file to be compared. If file2 is '-', the standard input shall be used.")
    ;

std::stringstream s;
s << dummy_options;
std::string dummy_help_text = s.str();
boost::replace_all(dummy_help_text, "--", "");
boost::replace_all(dummy_help_text, "arg", "     ");

std::cout << dummy_help_text << std::endl; 
```

输出如下所示：

```
Operands:
  file1                 A pathname of the first file to be compared. If file1
                        is '-', the standard input shall be used.
  file2                 A pathname of the second file to be compared. If file2
                        is '-', the standard input shall be used. 
```

这并不理想，因为除其他外，列之间的间距与其他`options`输出的帮助输出不匹配。但是对于一些快速而肮脏的东西，基本上可以工作，它可能没问题。

无论如何，这是一个想法。

（我在 Boost.Program_Options API 中也看不到任何允许您以“正确”方式执行此操作的内容。https://stackoverflow.com/a/3621947/368896 [暗示](https://stackoverflow.com/a/3621947/368896)不支持这种事情，但现在已经 3 岁了。）

# javascript - 是否可以将函数参数用作 jquery 语句的一部分

> ID：15863060
> 
> 赞同：0
> 
> 时间：2013-04-07T13:43:42.617
> 
> 标签：javascript, jquery, function

我希望生成一个 jQuery 语句，该语句部分由作为参数传递给函数的文本组成。

IE：

我的目标陈述是：

```
$('#object1.object').next('.object'); 
```

该语句将从 DOM 中检索具有“object”类的下一个元素的元素。

但我想动态生成这个语句 - 特别是 .next 部分 - 所以我创建了这个函数：

```
function getNextPrevObj(state){
  $('#object1.object').state('.object');
} 
```

并调用它：

```
getNextPrevOb("next"); 
```

但正如我所料， .state 会引发未知函数错误 - 尝试将其替换为字符串也会失败：

```
($'#object1.object').+state+('.object'); 
```

我是否只是使用错误的语法来用参数替换函数 - 或者这不可能？

谢谢。

# sed - 如何读取文件的第一（也是唯一）行，将其拆分为单独的字符串并使用 csh 将其附加到变量中？

> ID：15863064
> 
> 赞同：0
> 
> 时间：2013-04-07T13:43:59.703
> 
> 标签：sed, awk, grep, csh

我需要一些帮助来解决以下问题。我只是想不通（是的，我做了googlework等）。

使用 csh 我需要从文件中读取一行（文件中只有 1 行），将其拆分为单独的字符串（！不是每个值都用空格分隔，但是它们确实有固定的位置（总是在第 3 行）和第 4 个字段））并将其中两个分配给长格式的两个单独变量（因此没有 E+04）。感兴趣的两个值是：

```
82390.43500000000 
 and
4.167000000000000
 (so without the 'Earth' attached to it). 
```

它们需要分别分配给`time`和`time_step`。

输入文件*temp.txt*如下所示：

```
000520000001  260026 8.239043500000000E+04 4.167000000000000E+00Earth Centred Rotating                                          -9.999999999999998E+03-9999999.9999999-9999999.9999999-9999999.9999999 
```

有多个名为*temp.txt*的文件，但它们位于不同的文件夹中。在所有文件中唯一保持不变的部分是*Earth Centered Rotating*。

最好的方法是什么（awk/grep/sed/？）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:19:01.417

```
awk '{sub(/E.*/,"",$3); print$3}' temp.txt 
```

和

```
awk '{sub(/E.*/,"",$4); print$4}' temp.txt 
```

分别给出 82390.43500000000 和 4.167000000000000 ，然后可以将其分配给您的变量。

# python - 如何用正则表达式匹配整个单词？

> ID：15863066
> 
> 赞同：58
> 
> 时间：2013-04-07T13:44:01.313
> 
> 标签：python, regex

我无法为以下场景找到正确的正则表达式：

让我们说：

```
a = "this is a sample" 
```

我想匹配整个单词 - 例如 match`"hi"`应该返回 False，因为`"hi"`它不是一个单词，并且`"is"`应该返回 True，因为左侧和右侧都没有字母字符。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-04-07T13:47:35.110

尝试

```
re.search(r'\bis\b', your_string) 
```

从[文档](http://docs.python.org/2/library/re.html)：

> \b 匹配空字符串，但只匹配单词的开头或结尾。

请注意，该`re`模块使用“单词”的简单定义作为“字母数字或下划线字符的序列”，其中“字母数字”取决于区域设置或 unicode 选项。

另请注意，如果没有原始字符串前缀，`\b`则被视为“退格”而不是正则表达式单词边界。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-01-11T11:16:16.777

尝试在正则表达式模块中使用“单词边界”字符类，`re`：

```
x="this is a sample"
y="this isis a sample."
regex=re.compile(r"\bis\b")  # For ignore case: re.compile(r"\bis\b", re.IGNORECASE)

regex.findall(y)
[]

regex.findall(x)
['is'] 
```

从[`re.search()`](https://docs.python.org/2/library/re.html#re.search).

> `\b`匹配空字符串，但仅在单词的开头或结尾
> 
> ...
> 
> 例如`r'\bfoo\b'`匹配`'foo'`, `'foo.'`, `'(foo)'`,`'bar foo baz'`但不匹配`'foobar'`or`'foo3'`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-12T23:17:44.560

我认为使用给出的答案并没有完全实现 OP 所需的行为。具体来说，没有实现所需的布尔值输出。给出的答案*确实*有助于说明这个概念，我认为它们非常好。也许我可以通过说明我认为 OP 使用所使用的示例来说明我的意思，因为以下原因。

给出的字符串是，

> `a = "this is a sample"`

OP然后说，

> 我想匹配整个单词 - 例如 match`"hi"`应该返回`False`，因为`"hi"`不是一个单词......

据我了解，该引用是对搜索标记的引用，`"hi"`因为它在单词`"this"`. 如果有人要在字符串中搜索`a`单词**，** `"hi"`他们应该会收到`False`响应。

OP继续，

> ...并且`"is"`应该返回`True`，因为左侧和右侧都没有字母字符。

在这种情况下，引用是`"is"`在 word 中找到的搜索标记`"is"`。我希望这有助于澄清我们为什么使用单词边界。其他答案的行为是“不返回一个词，除非该词是由它自己找到的——不在其他词的内部”。“单词边界”[速记字符类](https://www.regular-expressions.info/shorthand.html)很好地完成了这项工作。

`"is"`到目前为止，仅在示例中使用了该词。我认为这些答案是正确的，但我认为还有更多问题的基本含义需要解决。应注意其他搜索字符串的行为以理解该概念。换句话说，我们需要将*@georg*的（优秀）答案概括为@OmPrakash的答案中也使用了`re.match(r"\bis\b", your_string)`相同的`r"\bis\b"`概念，他通过展示开始概括讨论

> ```
> >>> y="this isis a sample."
> >>> regex=re.compile(r"\bis\b")  # For ignore case: re.compile(r"\bis\b", re.IGNORECASE)
> >>> regex.findall(y)
> [] 
> ```

假设应该表现出我讨论过的行为的方法被命名为

```
find_only_whole_word(search_string, input_string) 
```

然后应该会出现以下行为。

```
>>> a = "this is a sample"
>>> find_only_whole_word("hi", a)
False
>>> find_only_whole_word("is", a)
True 
```

再一次，这就是我理解 OP 问题的方式。通过@georg 的回答，我们朝着这种行为迈出了一步，但这有点难以解释/实施。以机智

```
>>> import re
>>> a = "this is a sample"
>>> re.search(r"\bis\b", a)
<_sre.SRE_Match object; span=(5, 7), match='is'>
>>> re.search(r"\bhi\b", a)
>>> 
```

第二个命令没有输出。@OmPrakesh 的有用答案显示输出，但不显示`True`or `False`。

这是预期行为的更完整示例。

```
>>> find_only_whole_word("this", a)
True
>>> find_only_whole_word("is", a)
True
>>> find_only_whole_word("a", a)
True
>>> find_only_whole_word("sample", a)
True
# Use "ample", part of the word, "sample": (s)ample
>>> find_only_whole_word("ample", a)
False
# (t)his
>>> find_only_whole_word("his", a)
False
# (sa)mpl(e)
>>> find_only_whole_word("mpl", a)
False
# Any random word
>>> find_only_whole_word("applesauce", a)
False
>>> 
```

这可以通过以下代码完成：

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
#
#@file find_only_whole_word.py

import re

def find_only_whole_word(search_string, input_string):
  # Create a raw string with word boundaries from the user's input_string
  raw_search_string = r"\b" + search_string + r"\b"

  match_output = re.search(raw_search_string, input_string)
  ##As noted by @OmPrakesh, if you want to ignore case, uncomment
  ##the next two lines
  #match_output = re.search(raw_search_string, input_string, 
  #                         flags=re.IGNORECASE)

  no_match_was_found = ( match_output is None )
  if no_match_was_found:
    return False
  else:
    return True

##endof:  find_only_whole_word(search_string, input_string) 
```

下面是一个简单的演示。从保存文件的同一目录运行 Python 解释器，`find_only_whole_word.py`.

```
>>> from find_only_whole_word import find_only_whole_word
>>> a = "this is a sample"
>>> find_only_whole_word("hi", a)
False
>>> find_only_whole_word("is", a)
True
>>> find_only_whole_word("cucumber", a)
False
# The excellent example from @OmPrakash
>>> find_only_whole_word("is", "this isis a sample")
False
>>> 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2015-11-05T03:53:08.823

正则表达式的问题在于，如果您要在另一个字符串中搜索的 hte 字符串具有正则表达式字符，它就会变得复杂。任何带括号的字符串都会失败。

这段代码会找到一个词

```
 word="is"
    srchedStr="this is a sample"
    if srchedStr.find(" "+word+" ") >=0  or \
       srchedStr.endswith(" "+word):
        <do stuff> 
```

条件的第一部分搜索每边都有一个空格的文本，第二部分捕获字符串结尾的情况。请注意，endwith 是布尔值，而`find`返回一个整数

# java - Servlet html不打印表单

> ID：15863068
> 
> 赞同：0
> 
> 时间：2013-04-07T13:44:19.487
> 
> 标签：java, html, jsp, servlets

与我之前遇到的类似问题，但是这次之前的解决方法不起作用。与 相关的代码抛出如下所示的错误![在此处输入图像描述](https://i.stack.imgur.com/vAk1T.png)

如果图像无法加载这里的代码

```
 LongLivedCookie c =
    new LongLivedCookie("accessCount",
                      String.valueOf(count+1));
    response.addCookie(c);
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    String title = "Access Count Servlet";
    String docType =
      "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 " +
      "Transitional//EN\">\n";
     out.println(docType +
            "<HTML>\n" +
            "<HEAD><TITLE>" + title + "</TITLE></HEAD>\n" +
            "<BODY BGCOLOR=\"#FDF5E6\">\n" +
            "<CENTER>\n" +
            "<H1>" + title + "</H1>\n" +
            "<H2>This is visit number " +
            count + " by this browser.</H2>\n" +
            "<form id="form" name="form" method="post" action='Question_3.jsp'           

            padding="10" >" +
             "<button type="submit">Submit</button> " +
            "</CENTER></BODY></HTML>");
      }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:47:14.933

Java字符串以引号开头和结尾，如果您想在字符串中使用引号，那么您应该使用 \ 对它们进行转义，例如“id=\"xyz\""

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:48:50.423

代码应该转义字符串文字中的双引号。

```
 out.println(docType +
            "<HTML>\n" +
            "<HEAD><TITLE>" + title + "</TITLE></HEAD>\n" +
            "<BODY BGCOLOR=\"#FDF5E6\">\n" +
            "<CENTER>\n" +
            "<H1>" + title + "</H1>\n" +
            "<H2>This is visit number " +
            count + " by this browser.</H2>\n" +
            "<form id=\"form\" name=\"form\" method=\"post\" action='Question_3.jsp'           
            padding=\"10\" >" +
             "<button type=\"submit\">Submit</button> " +
            "</CENTER></BODY></HTML>");
      } 
```

# php - SQL 注入问题。（通过电子邮件验证？）

> ID：15863070
> 
> 赞同：0
> 
> 时间：2013-04-07T13:44:23.377
> 
> 标签：php, mysql, sql, sql-injection

我最近被黑了，黑客检索了我所有的 mailing_list 数据，我想知道他们是如何通过“Validate_email”函数并设法进行 sql 注入的？

这是我的代码：

```
function validate_email($address)
{
            return (ereg('^[-!#$%&\'*+\\./0-9=?A-Z^_`a-z{|}~]+'. '@'. '[-!#$%&\'*+\\/0-9=?A-Z^_`a-z{|}~]+\.' . '[-!#$%&\'*+\\./0-9=?A-Z^_`a-z
{|}~]+$', $address));
}

if (empty($_REQUEST['email']) || !validate_email($_REQUEST['email'])) {
    die('INVALID EMAIL');
}

mysql_query("
    REPLACE INTO mailing_list
    SET email='".strtolower($_REQUEST['email'])."'
") or die('Unable to insert email to database');

die(header('Location: http://www.***')); 
```

我想知道他们是如何使用验证电子邮件功能做到这一点的。如果这是他们真的设法入侵的地方，或者我只是弄错了，我需要搜索更多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:46:52.423

您允许`'`输入电子邮件地址。虽然这在电子邮件地址中可能有效，但在 mysql_query 中允许它不是一个好主意。将查询替换为：

```
mysql_query("
   REPLACE INTO mailing_list
   SET email='".mysql_real_escape_string(strtolower($_REQUEST['email']))."'
   ") or die('Unable to insert email to database'); 
```

对于未来，考虑切换到准备好的语句，因为这些语句在 SQL 注入方面更安全。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T13:59:33.280

类似于输入以下内容作为电子邮件地址...

```
a@a.com';select * from mailing_list; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T13:47:38.470

这是因为您没有使用 mysql_real_escape_string

而不是直接使用 $_REQUEST['email']

```
$email = mysql_real_escape_string($_REQUEST['email']);
mysql_query("
REPLACE INTO mailing_list
SET email='".strtolower($email)."'
") or die('Unable to insert email to database'); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-07T13:52:03.123

保护的黄金法则：

### 数据验证绝不能用于替代 SQL 数据格式。

尽管已经（或尚未）执行了任何验证，但您的查询必须正确格式化。

> 如果这是他们真的设法入侵的地方，或者我只是弄错了，我需要搜索更多..

然而，这个查询几乎不可能是电子邮件被盗的原因。因此，您必须在其他地方观看。从这段代码来看，还有很多其他的弱点。

# php - 从需要的表格帮助中获取朋友详细信息

> ID：15863077
> 
> 赞同：0
> 
> 时间：2013-04-07T13:45:12.293
> 
> 标签：php, mysql, sql, join

这是我的表结构（fun_users）

```
id  first_name  last_name   email   passkey place   profession  self_des    profile_img user_type   active  last_login  reg_date    reported_banned 
```

我的友谊表是

```
id  user_id friend_id   status  date_request    from_ip 
```

这是我用来获取登录用户朋友详细信息的查询

```
SELECT `fun_friends`.`id` as fid, `fun_users`.`id` as uid, `fun_users`.`first_name`, `fun_users`.`profile_img`, `fun_users`.`profession`, `fun_users`.`place` FROM (`fun_friends`) JOIN `fun_users` ON `fun_users`.`id`=`fun_friends`.`friend_id` WHERE (`fun_friends`.user_id= '".$_SESSION['user_row_id']."' AND  `fun_friends`.`status` =1) OR (`fun_friends`.friend_id= '".$_SESSION['user_row_id']."' AND  `fun_friends`.`status` =1) 
```

结果是

```
fid uid first_name       profile_img                       profession                             place
11  47  Agnii   thumbs/2013-03-311364721555.jpg       Software engineer                                 somewhere 
```

该查询返回登录用户的详细信息而不是他的朋友详细信息。谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:54:00.777

下面的查询使用子查询获取特定用户的所有朋友。表`fun_users`与子查询连接两次，因为子查询上有两列依赖于它。

```
SELECT  a.id AS FID,
        IF(a.user_ID = 'user_row_id_HERE', c.id, b.id) AS UID,
        IF(a.user_ID = 'user_row_id_HERE', c.first_name, b.first_name) AS first_name,
        IF(a.user_ID = 'user_row_id_HERE', c.last_name, b.last_name) AS last_name,
        IF(a.user_ID = 'user_row_id_HERE', c.profile_img, b.profile_img) AS profile_img,
        IF(a.user_ID = 'user_row_id_HERE', c.profession, b.profession) AS profession,
        IF(a.user_ID = 'user_row_id_HERE', c.place, b.place) AS place
FROM
        (
            SELECT  id, user_ID, friend_ID
            FROM    friendship
            WHERE   'user_row_id_HERE' IN (user_ID, friend_ID) AND
                    status = 1
        ) a
        INNER JOIN fun_users b
            ON a.user_ID = b.id
        INNER JOIN fun_users c
            ON a.friend_ID = c.ID 
```

那么问题来了，这条线上会发生什么？

```
IF(a.user_ID = 'user_row_id_HERE', c.id, b.id) AS UID 
```

基本上，它测试`user_ID`来自子查询的值是否等于当前用户。如果恰好相等，则`fun_users c`返回表中的列，反之亦然。

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# javascript - 针对android多屏的Phonegap应用程序？

> ID：15863083
> 
> 赞同：0
> 
> 时间：2013-04-07T13:45:27.337
> 
> 标签：javascript, android, cordova, media-queries, android-screen-support

我正在尝试使用 phonegap 开发一个 android 应用程序，针对多种屏幕尺寸的最佳方法/方法是什么，

我尝试了以下方法：

*   视口元数据`<meta name="viewport" content="width=device-width, height=device-height, user-scalable=no, target-densitydpi=device-dpi"/>`

*   [从 Web 应用程序定位屏幕](http://developer.android.com/guide/webapps/targeting.html)- Android Docs

*   `@media-queries`

*   针对不同屏幕尺寸的多个 apk -[分发到特定屏幕](http://developer.android.com/guide/practices/screens-distribution.html)

有没有好的例子或文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:04:38.610

您可以在互联网上找到无数关于媒体查询的示例和文章。您可以混合媒体查询和可能基于百分比的布局。

# c# - 将对象类型更改为从同一类类型继承的另一个对象类型，同时保持根属性设置

> ID：15863098
> 
> 赞同：2
> 
> 时间：2013-04-07T13:47:21.563
> 
> 标签：c#, entity-framework, type-conversion, entity-framework-5

我有两个课程如下：

```
class Article
{
 public int Id {get;set;}
 public string Name {get;set;}
}

class DetailedArticle : Article 
{
  public string SerialNumber {get;set;}
} 
```

我确实创建了一篇文章，例如：

```
var article = new Article {Id=1, Name="ItemName"} 
```

现在，我想将文章对象类型从更改`Article`为`DetailedArticle`保持属性不变（Id = 1 和 Name="ItemName"）。
知道我正在使用`EF5`
这可能吗？如何 ？EF5 会检测类型更改吗？
在不可能的情况下有什么替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:08:06.230

我建议直截了当的方法：

```
var article = context.Articles.Find(1);
context.Articles.Remove(article);
var detailedArticle = new DetailedArticle
{
    Id = article.Id,
    Name = article.Name,
    SerialNumber = "ABC"
};
context.Articles.Add(detailedArticle);
context.SaveChanges(); 
```

如果`Id`是自动生成的身份（您将获得新的 Id 值）或者您有其他实体引用`article`带有 FK 约束的 （您无法删除`article`then），则它将不起作用。

我相信您唯一的解决方法是直接使用 SQL：

*   对于 TPH 继承：

    ```
    context.Database.ExecuteSqlCommand(
        @"UPDATE Articles SET SerialNumber = N'xyz',
                              Discriminator = N'DetailedArticle' WHERE Id = 1"); 
    ```

*   对于 TPT 继承：

    ```
    context.Database.ExecuteSqlCommand(
        @"INSERT INTO DetailedArticles VALUES (1, N'xyz')"); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:08:32.430

只是为了补充已经很好的答案......

> 类型高度“植根”于代码优先，它如何存储、查询和物化对象。

`identity`使用时得到的最少`TPH`- 因为**这些记录实际上仅在 Db 中“相差一个字段”值**（它们使用同一个表）。仍然“在 C# 中”，你不能仅仅“重新布线”。

所以，如果你觉得你需要它（假设你还没有投入生产），最好将继承设置为 TPH（就像你现在已经拥有的那样，如果这就是全部的话） - 并且直接`SQL`“调整” '那个领域。无论看起来多么肮脏，它仍然是所有解决方案中最简单的。

接下来是 - 加载旧的 - 记住它的所有关联、相关记录 - 删除它 - 再次添加新的 - 这可能也不好玩。

# windows-phone-7 - 如何在 Windows Phone 的 TimePicker 或 DatePicker 中显示小时、分钟和秒？

> ID：15863101
> 
> 赞同：0
> 
> 时间：2013-04-07T13:47:30.127
> 
> 标签：windows-phone-7, timepicker, elapsedtime, datapicker

我正在做一个 temporizer 或 elapsed time，但我想选择从 timepicker 或 datetpicker 开始的时间，一直到小时、分钟和秒。

请问我需要帮助！！！谢谢。

# css - div边框定位

> ID：15863103
> 
> 赞同：0
> 
> 时间：2013-04-07T13:47:35.373
> 
> 标签：css, html, border

我无法在 div id 中定位边框。边框不跟随 div 中的文本。

我的 HTML 如下所示：

```
<div id="menu-left-top">

<ul class="menu-left-top">

<li><a href="auktioner.php">Kategorier</a></li>

</div>

<div id="menu-left">

<ul class="menu-left">

<li><a href="lamper.php">Lamper</a></li>
<li><a href="mobler.php">Møbler</a></li>
<li><a href="kunst.php">Kunst</a></li>
<li><a href="design.php">Design</a></li>
</div> 
```

这是我的 CSS：

```
#menu-left-top {
width:195px;
height:1em;
margin-top:5px;
border-top-style:solid;
border-width:thin;
border-color: #999;

}

ul.menu-left-top {
list-style-type: none;
height:1em;

}

ul.menu-left-top li{

}

ul.menu-left-top li a{
color:#000;
font-size:12px;
text-decoration:none;
font-family: "Gill Sans light"; 

}

ul.menu-left-top li a:hover{
color:#cf0036;
font-size:12px;
text-decoration:none;
font-family:"Gill Sans light";
font-weight:300;
}

#menu-left {
width:195px;
max-height:4em;
margin-top:5px;
border-top-style:solid;
border-bottom-style:solid;
border-width:thin;
border-color: #999;

}

ul.menu-left {
list-style-type: none;

}

ul.menu-left li{

}

ul.menu-left li a{
color:#000;
font-size:12px;
text-decoration:none;
font-family: "Gill Sans light"; 

}
ul.menu-left li a:hover{
color:#cf0036;
font-size:12px;
text-decoration:none;
font-family:"Gill Sans light";
font-weight:300;
} 
```

你可以在[这里](http://madebyfm.dk/digitaldesign2013/1/auktioner.php)看到结果。这是我当前的问题是左侧导航。可以看到，div向右浮动也有问题，不知道是不是和我一开始的问题有关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:51:41.067

移除 menu-left div 的 max-height 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:57:22.587

有一个`max-height`？
删除`max-height:4em;`或者你可以做到`height:auto;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:08:02.390

你没有以这种方式关闭你的 ul 标签，当你开始任何 html 标签时，你也必须结束 html 标签，这是大多数 m\html 标签，所以这是这里的主要错误，首先你需要关闭你的 ul 的

```
<div id="menu-left-top">
<ul class="menu-left-top">
<li><a href="auktioner.php">Kategorier</a></li>
</ul>
</div>

<div id="menu-left">
<ul class="menu-left">
<li><a href="lamper.php">Lamper</a></li>
<li><a href="mobler.php">Møbler</a></li>
<li><a href="kunst.php">Kunst</a></li>
<li><a href="design.php">Design</a></li>
</ul>
</div> 
```

列表元素周围的巨大边框是由于

```
border-top-style:solid;
border-bottom-style:solid; 
```

这不是一个正确的边界方法，你可以使用作为**border:2px soild #00000;** ，有关更多信息，请在此处更新您的布局，只需给我一个您想要使其外观的蓝图，然后我将帮助您格式化这些。干杯。并使用**height:auto**也

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T14:35:05.197

像这样使用html格式，因为我们不需要区分顶部菜单，我们可以通过这个东西来实现：使用这个html代码：

```
<div id="menu-left">
<ul class="menu-left">
<li class="first"><a href="auktioner.php">Kategorier</a></li>
<li><a href="lamper.php">Lamper</a></li>
<li><a href="mobler.php">Møbler</a></li>
<li><a href="kunst.php">Kunst</a></li>
<li><a href="design.php">Design</a></li>
</ul>
</div> 
```

然后css更改如下：

```
.first { border-top:#000 solid; }
ul.menu-left li{
border-bottom:#000 solid; 
} 
```

这将做出这样的事情，并且您可以根据自己更改边框样式，如果有任何疑问，请随时询问，

![在此处输入图像描述](https://i.stack.imgur.com/AtJXd.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T15:04:47.810

没问题，伙计，但为此我们也不需要将第一个菜单项与其他菜单项分开，检查这些，您的 html 代码将是这样的：

```
<div id="menu-left">
<ul class="menu-left">
<li class="first"><a href="auktioner.php">Kategorier</a></li>
<li><a href="lamper.php">Lamper</a></li>
<li><a href="mobler.php">Møbler</a></li>
<li><a href="kunst.php">Kunst</a></li>
<li class="last"><a href="design.php">Design</a></li>
</ul>
</div> 
```

如果你想要这样

![在此处输入图像描述](https://i.stack.imgur.com/QVBCp.png)

然后你可以使用这个 css ：

```
.first { border:#000 solid; }
.last{  border-bottom:#000 solid;  } 
```

如果你想要这样，那么你可以使用它：

![在此处输入图像描述](https://i.stack.imgur.com/3CY2v.png)

```
.first { border-top:#000 solid; }
.last {  border-bottom:#000 solid; } 
```

![在此处输入图像描述](https://i.stack.imgur.com/uHgdr.png)

你可以用这个

```
.first { border-top:#000 solid;
    border-bottom:#000 solid; }
.last{ border-bottom:#000 solid; } 
```

# c# - xtragrid 将选定的行复制到另一个 xtragrid

> ID：15863112
> 
> 赞同：1
> 
> 时间：2013-04-07T13:48:21.593
> 
> 标签：c#, xtragrid

我的环境：vs2012，C#

```
 public static IList GetList()
    {
        using (var ctx = new ProductCatalogEntities(Constants.EfConnectionString))
        {
            return (from c in ctx.Products
                    select new 
                        {
                            ProductId = c.ProductId
                            ,
                            Name = c.Name
                            ,
                            Code = c.Code
                            ,
                            Price = c.Price
                        }).ToList();
        }
    } 
```

此方法填充我的第一个 xtragrid，当我选择一些行时，我想单击一个按钮用这些选定的行填充我的第二个 xtragrid，请问如何实现？

# php - 使用 Laravel 和 AngularJs

> ID：15863121
> 
> 赞同：1
> 
> 时间：2013-04-07T13:49:06.103
> 
> 标签：php, javascript, angularjs, laravel

首先对我的英语感到抱歉，我会尽力解释。我最近开始了一个项目，它将使用大量的 javascript，特别是大量的 ajax 调用和 ajax 操作。

例如 lke

*   facebook风格的下拉通知
*   许多不同的ajax形式
*   喜欢按钮
*   关注按钮
*   图像处理和上传

我及时用 jQuery 做了类似的事情，而 jQuery 是我所知道的唯一库。但我一直在关注 AngularJs，对此进行了很多研究，我很喜欢它。

我正在搜索 Laravel + AngularJs 教程，但没有找到任何有用的信息来回答我的问题。

因此，例如，当我使用 jQuery 并且我想从属性中检索数据或发送表单时，我必须给它一个`class`or `id`，但 Angular 使用控制器。

所以我的问题是可以将控制器与视图混合吗？

例子

```
<?php echo  Form::open() ?>

    <?php echo  Form::label('password', 'Password') ?>
    <?php echo  Form::password('password', array('class' => 'span4')) ?>
    <span class="help-block">5-12 characters.</span>
    <?php echo  $errors->has('password') ? $errors->first('password', '<p class="validation-error">:message</p>') : ''?>

    <?php echo  Form::label('confirm_password', 'Confirm password') ?>
    <?php echo  Form::password('confirm_password', array('class' => 'span4')) ?>
    <?php echo  $errors->has('confirm_password') ? $errors->first('confirm_password', '<p class="validation-error">:message</p>') : ''?>

    <div ng-controller="PhotoCtrl">
        //on image change preform auto upload
    </div>

    <?php echo  Form::button('Sign up', array('class' => 'btn btn-block btn-success')) ?>

<?php echo  Form::close() ?> 
```

所以在上面我发布的代码中，你看到了 ng-controller，以这种方式混合 2 是好是坏？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:28:17.463

是的，将它们一起使用很好，但有时您可能需要考虑编写指令而不是完整的控制器。

可以编写指令来处理少量功能，其中控制器将一堆动作组合在一起。

# c - C fprintf/fscanf 优化大文件的速度

> ID：15863124
> 
> 赞同：2
> 
> 时间：2013-04-07T13:49:19.667
> 
> 标签：c, optimization, scanf, printf

我将两个大（每个近 8 GB）文件合并为一个。我尽量优化它。

```
void merge() {

   char *array[17]= {"q.out","b.out"}; // names of input files
   FILE *finpt1 = fopen(array[0],"r"), *finpt2 = fopen (array[1],"r"), 
                                     *foutp = fopen("final_.out","w");

   u_int32_t a,b;

   fscanf(finpt1, "%u", &a);
   fscanf(finpt2, "%u", &b);
   int EOF1_my = 0, EOF2_my = 0;

   while (true) {
     if ( a>b ) {
         fprintf( foutp,"%u\n", b);
         if ( fscanf(finpt2, "%u", &b)  == EOF) { EOF2_my = EOF; break; }
      } else  {
        fprintf( foutp,"%u\n", a);
        if ( fscanf(finpt1, "%u", &a) == EOF) { EOF1_my = EOF; break; }
       }
   }

    if ( EOF1_my == EOF) {
      while ( fscanf(finpt2, "%u", &a) != EOF)
         fprintf(foutp, "%u\n", a);
     } else if ( EOF2_my == EOF) {
         while (fscanf(finpt1, "%u", &b) != EOF)
          fprintf( foutp,"%u\n", b);
    }

   fclose(finpt1); fclose(finpt2); fclose(foutp);
} 
```

我怀疑多次调用 printf 会消耗大量资源（我注意到我的带有日志记录的程序通常比没有记录的程序运行速度要慢得多）。而且我认为它大部分时间都花在格式化字符串上（不写入文件，因为使用了缓冲）。

所以我想知道是否最好在内存中形成字符串以由我自己输出并写入，例如10000个符号到一个文件中以吸引fprintf函数 - 比如fprintf（“％s”，字符串）;？

我对 fscanf 也有同样的疑问。也许我应该使用其他一些功能？

欢迎任何想法。提前致谢！

**修复错误**
感谢 sfstewman（在对问题的评论中注意到）。很酷，这是非常有价值的信息，直到我开始编写测试（或者可能永远不会）之前我不会注意到这些信息。
谢谢你的代码，但无论如何给我准备好的代码你让我没有乐趣。
这是我的蛋糕！
想法更有价值，现在我知道字典比较的目的是什么）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:12:27.150

您的输入都是无符号数字。这意味着您可以使用字典比较而不是数字比较。

为了使字典比较对无符号数字字符串起作用，首先比较字符串的长度（较短的字符串是较小的数字）。如果长度相等， `strcmp`将指示哪个字符串具有较小的数字。

如果您使用换行符作为数字之间的分隔符，您可以使用`fgets`and`fputs`来读取/写入，从而消除了`fscanf`and中的格式化成本`fprintf`。这消除了字符串和数字之间的所有转换。由返回的字符串末尾的换行符在`fgets`所有数字中都是恒定的，并且不会影响字典比较。

我生成了两个由换行符分隔的 950 万个随机无符号数文件，并运行了时间比较（merge1 是你上面的代码，merge2 在下面）：

```
% time ./merge1
./merge1  0.89s user 0.08s system 99% cpu 0.974 total
% time ./merge2
./merge2  0.18s user 0.08s system 98% cpu 0.264 total 
```

并且，在更大的测试集上（两个 537M 的随机数文件，介于 0 和 2^30-1 之间）：

```
% time ./merge1
./merge1  51.22s user 4.57s system 54% cpu 1:41.68 total
% time ./merge2
./merge2  11.13s user 4.68s system 18% cpu 1:26.81 total 
```

这表明数值转换占用了大约 75%-80% 的时间。如果这还不够快，您可以通过自己的缓冲和搜索分隔符来进一步优化它`strchr`，并且可能使用内存映射文件。

```
#include <stdio.h>
#include <string.h>

void merge()
{
   char *array[17]= {"q.out","b.out"}; // names of input files
   FILE *finpt1 = fopen(array[0],"r"), *finpt2 = fopen (array[1],"r"), 
                                     *foutp = fopen("final_.out","w");

   char buf1[32];
   char buf2[32];

   memset(buf1,0,sizeof(buf1));
   memset(buf2,0,sizeof(buf2));

   int EOF1_my = (fgets(buf1, sizeof(buf1), finpt1) == NULL);
   int EOF2_my = (fgets(buf2, sizeof(buf2), finpt2) == NULL);

   size_t l1 = strlen(buf1);
   size_t l2 = strlen(buf2);

   if (!EOF1_my && !EOF2_my)
   {
     for(;;)
     {
       /* unsigned numbers, so use a lexographic comparison */
       int diff = (l1 == l2) ? strcmp(buf1,buf2) : l1-l2;

       if (diff < 0)
       {
         fputs( buf1, foutp );
         memset(buf1,0,sizeof(buf1));
         EOF1_my = (fgets(buf1, sizeof(buf1), finpt1) == NULL);
         if (EOF1_my) break;
         l1 = strlen(buf1);
       }
       else
       {
         fputs( buf2, foutp );
         memset(buf2,0,sizeof(buf2));
         EOF2_my = (fgets(buf2, sizeof(buf2), finpt2) == NULL);
         if (EOF2_my) break;
         l2 = strlen(buf2);
       }
     }
   }

   FILE* frest = NULL;
   if (!EOF1_my || !EOF2_my)
   {
     if (!EOF1_my)
     {
       fputs(buf1, foutp);
       frest = finpt1;
     }
     else
     {
       fputs(buf2, foutp);
       frest = finpt2;
     }

     memset(buf1,0,sizeof(buf1));

     while(fgets(buf1,sizeof(buf1),frest) != NULL)
     {
       fputs(buf1,foutp);
     }
   }

   fclose(finpt1); fclose(finpt2); fclose(foutp);
}

int main()
{
  merge();
  return 0;
} 
```

# spring - 使用 spring bean 实现缓存

> ID：15863132
> 
> 赞同：1
> 
> 时间：2013-04-07T13:50:26.413
> 
> 标签：spring, caching, singleton, javabeans

我想在我的 java spring 项目中实现缓存。我的缓存对象是通过使用弹簧触发器的方法更新的。我知道 spring 允许 ehcache 和 java concurrenthashmap 进行缓存。我的问题是，我们不能只定义一个spring bean（默认情况下是单例的）。定期更新spring bean。spring bean 将只读取从缓存中读取的请求吗？您能否让我知道这种实现缓存的方式是否可行？

# java - 如何修复这种排序方法？

> ID：15863136
> 
> 赞同：1
> 
> 时间：2013-04-07T13:50:55.733
> 
> 标签：java, arrays, sorting

这是按第二个字符对单词进行排序的排序方法，它不起作用（有人能说如何解决吗？

```
out = new StringTokenizer(input.toString());
n = out.countTokens();
List<String> wordList = new ArrayList<String>(n);
for (int i = 0; i < n; i++) {
  wordList.add(out.nextToken());
}
Collections.sort(wordList, new Comparator<String>() {
  public int compare(String o1, String o2) {
    return compare(o1.substring(1, 2).compareTo(o2.substring(1, 2)));
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:55:34.943

尝试使用这个：

```
Collections.sort(wordList, new Comparator<String>() {
public int compare(String o1, String o2) {
return o1.substring(1, 2).compareTo(o2.substring(1, 2));
} 
```

而不是这个：

```
Collections.sort(wordList, new Comparator<String>() {
  public int compare(String o1, String o2) {
    return compare(o1.substring(1, 2).compareTo(o2.substring(1, 2)));
  } 
```

前者有效的原因是 Comparator 类的比较函数从 Collection 中获取对象，并期望其中的操作产生 0 表示相等，当第一个参数为“更大”时为 1，当第二个参数为“更大”时为 -1。因此，在函数中，您抽象地定义了使一个对象大于/等于/小于另一个对象的原因。

干杯。

# node.js - Mongodb找到最佳匹配

> ID：15863141
> 
> 赞同：3
> 
> 时间：2013-04-07T13:51:25.620
> 
> 标签：node.js, mongodb, mongoose, recommendation-engine

我想构建一个返回数据库中最佳匹配文档的查询。

即我想找到一个包含以下字段的文档-“动物”：“狗”“颜色”：“棕色”“图案”：“点”“大小”：“小”

如果没有包含上述所有字段及其对应值的文档，我希望查询返回最佳匹配。fe {“动物”：“狗”，“颜色”：“棕色”，“尺寸”：“小”}

我可以在 mongo db 中实现递归查询吗？如果是这样，怎么做？我应该使用 mapReduce，如果是，如何使用？人们可以将此问题更多地视为推荐系统问题，我想推荐最适合给定值的项目（文档），如果有人知道实现上述方法的好方法，我将不胜感激

我正在使用 mongodb mongoose 和 nodejs。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:19:16.687

我不确定递归查询的性能影响，但这样的事情应该可以工作。它从查询中删除最后一个属性，如果没有找到匹配项，则再次尝试：

```
var AnimalSchema = new mongoose.Schema({
    atype: { type: String },
    color: {type:String},
    pattern: {type:String},
    size : {type:String}
});

var Animal = mongoose.model('Animal',AnimalSchema);

//test data
//var dalmation = new Animal({
//    atype:'dog',
//    color: 'black and white',
//    pattern: 'spots',
//    size: 'big'
//});

//dalmation.save(function(err){
//    var yorkie = new Animal({
//        atype:'dog',
//        color:'brown',
//        pattern:'mixed',
//        size:'small'
//    });
//    yorkie.save(function(yer){
//         bestMatch({'atype':'dog','size':'big','color':'brown'},function(err,animal){
//             console.log(err,animal);
//         })
//    });
//});

function bestMatch(params,cb){
    Animal.findOne(params,function(err,animal){
        if (err || !animal){
           var keys = Object.keys(params);
           if (keys.length){
               delete params[keys.pop()];
               bestMatch(params,cb);
           }else{
               cb('No matches',null);
           }
        }else{
            cb(null,animal);
        }
    });
}

bestMatch({'atype':'dog','size':'big','color':'brown'},function(err,animal){
    console.log(err,animal);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:35:35.870

鉴于您似乎只搜索文本字段，一种可能性是使用 MongoDB 2.4 中新的（目前是“实验性的”）[文本搜索功能](http://docs.mongodb.org/manual/core/text-search/)。这允许您在一个或多个字段上创建全文索引，包括相关性的[字段加权](http://docs.mongodb.org/manual/tutorial/control-results-of-text-search/)。

例如：

```
db.collection.ensureIndex(
    // Fields to index
    {
        animal:  "text",
        color:   "text",
        pattern: "text",
        size:    "text"
    },

    // Options
    {
        name: "best_match_index",

        // Adjust field weights (default is 1)
        weights: {
            animal: 5,  // Most relevant search field
            size:   4   // Also relevant
       }
    }
) 
```

[结果](http://docs.mongodb.org/manual/reference/text-search/#text-search-output)将根据相关字段权重按与评分相关的顺序返回。

请注意，搜索关键字也是[stemmed](http://en.wikipedia.org/wiki/Stemming)，因此如果您期望完全匹配，这可能会产生一些意想不到的结果。您可以将您的术语放在双引号中，以利用[短语匹配](http://docs.mongodb.org/manual/tutorial/search-for-text/#match-phrases)进行更具体的匹配。

# vb.net - VB.NET 为什么在 Instagram.com 中不显示 Web 浏览器控件

> ID：15863142
> 
> 赞同：0
> 
> 时间：2013-04-07T13:51:31.167
> 
> 标签：vb.net, webbrowser-control

我使用 VB.NET Web 浏览器控件导航到 instagram.com 但它不显示 为什么？

这是我使用的代码：

```
Webbrowser1.Navigate("Instagram.com") 
```

这是[结果的屏幕截图](http://uploadpic.org/v.php?img=7o71k8p0I)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:05:57.333

如果没有，它是否在您的代码中显示为链接：尝试将“ [http://www.instagram.com](http://www.instagram.com) ”指定给程序它是一个 URL。

# linq - Linq InsertOnSubmit、DeleteOnSubmit 和更新不起作用

> ID：15863148
> 
> 赞同：1
> 
> 时间：2013-04-07T13:52:31.057
> 
> 标签：linq, insertonsubmit

我阅读了几篇与 InsertOnSubmit is not working 相关的帖子，但没有一个能解决我的问题。下面是我的代码，我在我的 BackupPlan 表中手动插入了一条记录，当我运行 linq 时，从数据库中选择记录，我尝试在下面插入的 2 条新记录返回并显示在日志中，但是当我签入服务器资源管理器时 - > 数据连接 -> 表 BackupPlan 只有手动插入的记录在那里，而不是新记录。我还尝试更新现有记录并删除，但没有成功，也没有任何异常。此外，我添加了一个列 Id 并将其设置为我的 BackupPlan 表的主键，检查了 db.GetChangeSet() 并返回 2 个插入语句处于挂起状态，但 db.SubmitChanges() 运行后没有成功。知道我在这里缺少什么吗？？？:(

```
using System.Data.Linq.Mapping;

namespace Storage.Models
{
    [Table(Name = "BackupPlan")]
    public class BackupPlan
    {
        [Column(IsPrimaryKey = true, IsDbGenerated = true)]
        public int Id;

        [Column]
        public string Name;

        [Column]
        public string Description;
    }
}

using System.Data.Linq;
using Storage.Models;

namespace Storage
{
    public partial class Repository : DataContext
    {
        public Table<BackupPlan> BackupPlans;
        public Repository(string connection):base(connection){}
    }
}

using System;
using System.Data.Linq;
using System.Linq;
using Storage.Models;
using Storage.Properties;

namespace Storage
{
    class Test
    {
        static void Main(string[] args)
        {
            try
            {                
                var settings = new Settings();
                var db = new Repository(settings.DatabaseConnectionString)
                             {Log = Console.Out, ObjectTrackingEnabled = true};                

                var backupPlan1 = new BackupPlan() {Description = "This is my first backup plan!", Name = "B Plan"};                
                db.BackupPlans.InsertOnSubmit(backupPlan1);                

                var backupPlan2 = new BackupPlan() {Description = "This is my first backup plan 2!", Name = "B22 Plan"};
                db.BackupPlans.InsertOnSubmit(backupPlan2);

                var t = db.GetChangeSet(); //shows that 2 inserts are pending

                db.SubmitChanges();   // when i run this method i check my table but there are no any new records                         

                var q = from b in db.BackupPlans
                        select b;
                foreach (var backupPlan in q)
                {
                    Console.WriteLine("\n{0}", backupPlan.Name);
                }
                Console.ReadKey();              
            }
            catch(Exception e)
            {
                Console.WriteLine(e.Message);
                Console.ReadKey();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T01:57:31.887

[http://dean-o.blogspot.com/2010/03/mind-your-copy-to-output-directory.html](http://dean-o.blogspot.com/2010/03/mind-your-copy-to-output-directory.html)

您构建您的程序，它将数据库文件复制到 Bin/Debug 并写入该副本。

下次构建时，它将用新副本覆盖您刚刚写入的数据库。将其更改为不复制。

# git - 用于检索最近提交的 API

> ID：15863149
> 
> 赞同：0
> 
> 时间：2013-04-07T13:52:51.187
> 
> 标签：git, api, gerrit, gitweb

我有一些使用 git 存储库的项目，其中 gerrit 和 gitweb 在网络上可用。我正在寻找一个 API，通过它我可以执行 HTTP 请求以获取在最后 10 秒内所做的提交。目前我正在使用 repo 镜像的一些 github API，尽管 replag 有超过一分钟，如果我想显示任何内容，迫使我从最后 2 分钟开始提交提交请求。gitweb 或 gerrit 是否提供了我可以使用的 API？如果没有，是否还有其他不需要太多工作的替代方案？

找到的解决方案：

使用此处描述的 API：[https ://gerrit-review.googlesource.com/Documentation/rest-api-changes.html](https://gerrit-review.googlesource.com/Documentation/rest-api-changes.html)

使用“年龄”限制进行查询，该限制返回至少与指定年龄一样老的提交。这可以通过否定通过在其名称前加上 - 来完成的条件来实现。这在此处进一步解释[https://gerrit.googlecode.com/svn-history/r3021/documentation/2.1.4/user-search.html#search_operators](https://gerrit.googlecode.com/svn-history/r3021/documentation/2.1.4/user-search.html#search_operators)

所以我对过去 10 秒内合并的第一个更改的查询是这样的： [https ://gerrit.wikimedia.org/r/changes/?q=status:merged+project:mediawiki/extensions/Wikibase+-age:10s&n=1](https://gerrit.wikimedia.org/r/changes/?q=status:merged+project:mediawiki/extensions/Wikibase+-age:10s&n=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:24:06.507

也许这就是你要找的。

[https://gerrit-review.googlesource.com/Documentation/rest-api-changes.html](https://gerrit-review.googlesource.com/Documentation/rest-api-changes.html)

干杯

拉斯穆斯·沃斯

# perl - UNIX：模式匹配和排序

> ID：15863153
> 
> 赞同：1
> 
> 时间：2013-04-07T13:53:11.863
> 
> 标签：perl, bash, unix

**输入**

```
1   DX
    ADA
4   O1
3   I1
    C1
2   LA
    FTAS
    TT66 
```

**预期产出**

```
1   DX
    ADA
2   LA
    FTAS
    TT66
3   I1
    C1
4   O1 
```

**命令**

> 排序 -n 输入

我尝试如上所述对文件进行数字排序。但它也对空值进行了排序，这弄乱了结构。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T14:08:34.067

好吧，您需要将未编号的行视为属于编号的行。假设 '%' 符号没有出现在输入中，那么这样的解决方案呢？

```
dtpwmbp:~ pwadas$ cat bzz.txt 
1   DX
    ADA
4   O1
3   I1
    C1
2   LA
    FTAS
    TT66
dtpwmbp:~ pwadas$ cat bzz.txt |perl -0pe 's/\n /%/g'
1   DX%   ADA
4   O1
3   I1%   C1
2   LA%   FTAS%   TT66
dtpwmbp:~ pwadas$ cat bzz.txt |perl -0pe 's/\n /%/g' | sort -n |perl -0pe 's/%/\n /g' 
1   DX
    ADA
2   LA
    FTAS
    TT66
3   I1
    C1
4   O1
dtpwmbp:~ pwadas$ 
```

在此解决方案中，首先删除换行符，以保持非编号分配为一个编号，然后在排序后，换行符被带回其原始位置，因此输出看起来像只有编号的那些被排序。AFAIR 这称为“多行模式”匹配。我不确定是否应该将其移至 superuser.com

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T14:38:31.890

```
perl -nwe 'if (/^(\d+)/) { $num = $1; } $a[$num] .= $_; 
           END { print for grep defined, @a }' input.txt 
```

只需使用数组根据找到的行号存储行，如果没有找到数字，则使用最后一个数字。然后打印数组。如果您不使用警告开关`-w`，则不需要使用`grep defined`，因为警告将出现在未使用的数组元素上（在这种情况下为 0）。

在重复行号的情况下，它会将行附加到以前的条目中，这很方便。它也不需要任何排序，因为数组元素已经排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T15:05:12.687

此输出跟踪最新的初始数字，并将当前行附加到散列的适当元素上。散列中的数据按键的数字顺序输出。

```
use strict;
use warnings;

my $n;
my %data;
while (<DATA>) {
  $n = $1 if /^(\d+)/;
  $data{$n} .= $_ if $n;
}

print $_ for map $data{$_}, sort { $a <=> $b } keys %data;

__DATA__
1   DX
    ADA
4   O1
3   I1
    C1
2   LA
    FTAS
    TT66 
```

**输出**

```
1   DX
    ADA
2   LA
    FTAS
    TT66
3   I1
    C1
4   O1 
```

* * *

**更新**

您可能更喜欢这种替代方法，它读取整个文件，在每个后跟一个数字的换行符之后将其拆分，并按照初始数字的数字顺序对这些记录进行排序。输出与之前的解决方案相同。

```
use strict;
use warnings;

local $/;
print for sort {
  my ($aa, $bb) = map /^(\d+)/, $a, $b;
  $aa <=> $bb;
} split /(?<=\n)(?=\d)/, <DATA>;

__DATA__
1   DX
    ADA
4   O1
3   I1
    C1
2   LA
    FTAS
    TT66 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T14:05:59.553

我不相信你可以`sort`单独使用，我会用`sed`或类似的方式处理它，`sort`然后再次输入和返回。

# c# - 下拉列表返回值，而不是文本

> ID：15863164
> 
> 赞同：0
> 
> 时间：2013-04-07T13:54:42.977
> 
> 标签：c#, html-select

我是新手，可能遗漏了一些明显的东西。创建新的“Flight”时，下拉列表返回值，例如“2”，而不是所需的文本，例如“Comm”。断点和监视验证“FlightType”和“ViewBag”是否包含正确的信息。任何建议都非常受欢迎。

**型号：Flight.cs**

```
public class Flight
{
    [Key]
    public int FlightID { get; set; }

    public int FlightTypeID { get; set; }
    public string FlightTypeEntry { get; set; }
} 
```

**型号：FlightType.cs**

```
public class FlightType
{
[Key]
public int FlightTypeID { get; set; }
public string FlightTypeEntry { get; set; }
} 
```

**DAL：FlightInitializer.cs**

```
var flighttypes = new List<FlightType
{
new FlightType { FlightTypeEntry = "Regular" },
new FlightType { FlightTypeEntry = "Comm" }
};
flighttypes.ForEach(e => context.FlightType.Add(e));
context.SaveChanges(); 
```

**控制器：FlightController.cs**

```
// GET: /Flight/Create
public ActionResult Create()
{
ViewBag.FlightVB = new SelectList(db.FlightType, "FlightTypeID",
    "FlightTypeEntry");
return View();
}

// POST: /Flight/Create
[HttpPost]
public ActionResult Create(Flight flight)
{
if (ModelState.IsValid)
  {
    db.Flight.Attach(flight);
    db.Entry(flight).State = EntityState.Modified;
    db.Flight.Add(flight);
    db.SaveChanges();
    return RedirectToAction("Index");
}

ViewBag.FlightTypeVB = new SelectList(db.FlightType, "FlightTypeID"
    "FlightTypeEntry");
return View(flight); 
```

**视图：Flight.Create.cshtml**

```
<div class="editor-field">
  @Html.DropDownList(“FlightTypelID", <SelectList>)ViewBag.FlightTypeVB)
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:39:37.827

Create HttpPost 上的 Flight 对象可能没有正确填充 b/c 下拉列表只会返回所选项目的值 - 在您的情况下，该值是“FlightTypeID”。如果要更改它以返回文本值“FlightTypeEntry”，则可以更改

```
ViewBag.FlightVB = new SelectList(db.FlightType, "FlightTypeID", "FlightTypeEntry"); 
```

至

```
ViewBag.FlightVB = new SelectList(db.FlightType, "FlightTypeEntry", "FlightTypeEntry"); 
```

我不确定这会是一件好事。无论哪种方式，它都不会在回发时完全填充 Flight 对象。为此，您可能希望对输入的 flightID 使用隐藏字段，并找出与“FlightTypeValue”对应的“FlightTypeID”，反之亦然。

# java - 使用 JLayeredPane 模拟基于光标的 UI

> ID：15863167
> 
> 赞同：1
> 
> 时间：2013-04-07T13:55:24.180
> 
> 标签：java, swing, jlayeredpane, flowlayout

我正在尝试使用 JLayeredPane 制作 Kinect 驱动的 UI。UI 由 4 个 JPanel 组成。在这 4 个 JPanel 的顶部，我想绘制一个光标以显示用户的光标。使用 JLayeredPane 时，我无法移动光标。光标应该绘制在这 4 个 JPanel 之上，因此我将 JPanel 放在了较高层中，它会将光标绘制在更高的层中。我的代码如下所示：

```
 mainFrame = new JFrame();
    mainFrame.setSize(WIDTH, HEIGHT);
    mainFrame.setTitle("Kinect module"); 
    mainFrame.setMinimumSize(new Dimension(1200, 800));
    mainFrame.setVisible(true);

    controlPanel = new JPanel();
    controlPanel.setPreferredSize(new Dimension(1180, 110));
    Color controlPanelBcg = new Color(255, 64, 16);
    controlPanel.setBackground(controlPanelBcg);

    propertiesPanel = new JPanel();
    propertiesPanel.setPreferredSize(new Dimension(210, 540));
    Color propertiesPanelBcg = new Color(16, 255, 64);
    propertiesPanel.setBackground(propertiesPanelBcg);

    statusPanel = new JPanel();
    statusPanel.setPreferredSize(new Dimension(1180, 110));
    Color statusPanelBcg = new Color(64, 16, 255);
    statusPanel.setBackground(statusPanelBcg);
    statusPanel.setPreferredSize(new Dimension(1180, 110));

    displayPanel = displayManager.getJPanel(DisplayType.DEFAULT);
    displayPanel.setPreferredSize(new Dimension(960, 540));

    cursorPanel = new CursorPanel(context, sessMan);
    cursorPanel.setVisible(true);
    cursorPanel.setSize(1200, 800);
    cursorPanel.setOpaque(false);

    layeredPane = new JLayeredPane();
    layeredPane.setPreferredSize(new Dimension(1200, 820));
    layeredPane.setLayout(new FlowLayout(FlowLayout.LEADING, 5, 5));
    layeredPane.add(controlPanel, JLayeredPane.DEFAULT_LAYER);
    layeredPane.add(displayPanel, JLayeredPane.DEFAULT_LAYER);
    layeredPane.add(propertiesPanel, JLayeredPane.DEFAULT_LAYER);
    layeredPane.add(statusPanel, JLayeredPane.DEFAULT_LAYER);
    layeredPane.add(cursorPanel, JLayeredPane.MODAL_LAYER);

    mainFrame.getContentPane().add(layeredPane);
    mainFrame.pack(); 
```

布局就像我想要的那样。但是当我想在 cursorPanel 的方法 paintComponent(Graphics g) 中绘制一个光标时 - 什么也没有发生。我究竟做错了什么？

# python - 多对多领域——django模型——理解

> ID：15863170
> 
> 赞同：1
> 
> 时间：2013-04-07T13:55:46.810
> 
> 标签：python, database, django, database-design, many-to-many

我正在尝试实现一个人可以将另一个人添加为朋友的小项目。

我想在数据库中建模这种关系：我想，我会做另一个模型`friendship`，我会这样写它的模型：

```
class friendship(models.Model):
  friend = models.ManyToManyField(User) 
```

这就是全部吗？我不知何故陷入了不知道如何设计这个的逻辑。我阅读了文档，但我没有以某种方式进入这一点，有人可以帮助我吗？

多谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T14:12:13.427

除非您需要存储有关关系的额外信息，否则实际上不需要创建另一个模型。例如，它已经定义了基本关系：

```
class User(models.Model):
  ...
  friends = models.ManyToManyField(self) # self means User. 
```

如果你想存储额外的信息，比如什么样的朋友，他们有多亲近。然后你需要一个额外的模型。

```
class User(models.Model):
    ...
    friends = models.ManyToManyField(self, through='Friendship')

class Friendship(models.Model):
    from_user = models.ForeignKey(User, related_name="from_user")
    to_user = models.ForeignKey(User, related_name="to_user")
    friend_type = models.CharField(max_length=255)
    friend_rated = models.FloatField() 
```

# php - 用户配置文件的更新查询不起作用

> ID：15863172
> 
> 赞同：0
> 
> 时间：2013-04-07T13:55:54.867
> 
> 标签：php, phpmyadmin, sql-update, user-profile

我正在尝试允许用户更新他们的个人资料，并且我使用以下功能来这样做：

```
function update_user($update_data){
            global $session_MemberID;
            $update = array();
            array_walk($update_data, 'array_sanitize');

            foreach($update_data as $field=>$data){ //loop through update data in update_info.php
                $update[] = '`' . $field . '` = \'' . $data . '\''; 
            }
            //print_r($update);
            //die();
            mysql_query("UPDATE `oddjob` SET " . implode(', ', $update). " WHERE `MemberID` = $session_MemberID") or die (mysql_error());

}

if (logged_in() ===true) {
    $session_MemberID = $_SESSION['MemberID'];//grabbing value from login
    $user_data= user_data($session_MemberID,'MemberID','Name','Address','Postcode','DOB','Mobile','CoinsAvailable','Email','Password','RepeatPassword','OddJobName','Description','DaysAvailable','profile');
    exit();
    } 
```

这是更新页面。（仅相关代码）

```
if (isset($_POST['OddJobName']) && isset($_POST['Description']) && isset($_POST['DaysAvailable']) && empty($errors) === true){//if (empty($_POST) === false && empty($errors) === true) { 
            $daysavailable='';
            foreach ($_POST['DaysAvailable'] as $value)
            {

            $daysavailable .=$value." ";
            }

            $update_data = array (
                'MemberID'      => $MemberID,
                'OddJobName'    => $_POST['OddJobName'],
                'Description'   => $_POST['Description'],
                'DaysAvailable' => $daysavailable, 

                );

                update_user ($update_data);

                if(success){
                 header('Location: member.php?username='.$username);
                 exit ();
                }
            } else if (empty($errors) === false){
                //otherwise output errors
                echo output_errors($errors);
            }

?> 
```

当我为用户输入新信息时，出现以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 
```

当我打印出来时，`$update`我得到：

```
Array ( [0] => `MemberID` = '30' [1] => `OddJobName` = 'test' [2] => `Description` = 'test' [3] => `DaysAvailable` = 'Friday ' ) 
```

这似乎很好，所以我不确定我的查询有什么问题。如果我将更新查询放入 phpmyadmin 中，例如：

```
UPDATE `oddjob` SET `OddJobName`= test,`Description`=test,`DaysAvailable`=Friday, WHERE `MemberID` = 30 
```

我得到错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE MemberID = 30' at line 1 
```

（oddjob表中的MemberID是外键，MemberID是member表中的主键。）

我不擅长这种 SQL 的东西......正如你所知道的，如果可以的话，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:06:00.483

首先： [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

关于您的问题，您正在使用`global $session_MemberID`，即使您的`$update_data`阵列中已经有该 ID。我打赌`$session_MemberID`是空的，这就是你的第一个查询失败的原因。尝试在您的代码中使用此查询：

```
$sql = "UPDATE `oddjob` SET " . implode(', ', $update). " WHERE `MemberID` = ".intval($update['MemberID']); 
```

关于 phpMyAdmin 查询，有一个错误，前面有一个逗号`WHERE`，请尝试使用此查询：

```
UPDATE `oddjob` SET `OddJobName`= 'test',`Description`='test',`DaysAvailable`='Friday' WHERE `MemberID` = 30 
```

# java - Libgdx 中贴花的命中测试

> ID：15863176
> 
> 赞同：1
> 
> 时间：2013-04-07T13:56:09.607
> 
> 标签：java, libgdx

我正在使用贴花类（请参阅[https://code.google.com/p/libgdx-users/wiki/Decals](https://code.google.com/p/libgdx-users/wiki/Decals)）来渲染我的场景，我需要测试用户是否点击了其中一个贴花，类似如何在舞台上为演员实施它。

这种命中测试是否有实现？如果没有，libgdx 中是否有任何低级 API 可以帮助我实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-04T20:28:38.200

我有一个使用 onTouch() 的好方法，可以轻松更改鼠标事件，

```
Decal decal1 = Decal.newDecal(1, 1, textures[1], true);
    decal1.setPosition(1.5f, 0, .5f);
    decals.add(decal1);
    Decal decal2 = Decal.newDecal(1, 1, textures[0], true);
    decal2.setPosition(1f, 0, .5f);
    decals.add(decal2);
    decal2.translate(0, 0, 1f);
//...
for (int i = 0; i < positions.length; i++) {
        positions[i] = new Vector3(decal1.getPosition());
        new Vector3(decal2.getPosition());
    }
    positions[0].set(decal1.getPosition());
    positions[1].set(decal2.getPosition());
    renderer = new ImmediateModeRenderer10();
                Vector3 intersection = new Vector3();

//render method
    Ray pickRay = null;
    renderTowers();
    camera3d.update();
    if (Gdx.input.isTouched()) {
        pickRay = camera3d.getPickRay(Gdx.input.getX(), Gdx.input.getY(),
                TB_X, TB_Y, TB_WIDTH, TB_HEIGHT);
    }
    boolean intersected1 = false;
    boolean intersected2 = false;
    for (int i = 0; i < positions.length; i++) {
        if (pickRay != null
                && Intersector.intersectRaySphere(pickRay, positions[0],
                        .5f, intersection)) {

            gl.glColor4f(1, 0, 0, 1);
            intersected1 = true;

        } else {
            gl.glColor4f(1, 1, 1, 1);
        }
        gl.glPushMatrix();
        gl.glTranslatef(positions[i].x, positions[i].y, positions[i].z);
        gl.glPopMatrix();
    }
    for (int j = 0; j < positions.length; j++) {
        if (pickRay != null
                && Intersector.intersectRaySphere(pickRay, positions[1],
                        .5f, intersection)) {

            gl.glColor4f(1, 0, 0, 1);
            intersected2 = true;

        } else {
            gl.glColor4f(1, 1, 1, 1);
        }
        gl.glPushMatrix();
        gl.glTranslatef(positions[j].x, positions[j].y, positions[j].z);
        gl.glPopMatrix();
    }

    Gdx.gl.glViewport(0, 0, Gdx.graphics.getWidth(),
            Gdx.graphics.getHeight());
    sbatch.begin();
    if (intersected1) {
        stage.addActor(FireImage);
        camera3d.project(intersection, TB_X, TB_Y, TB_WIDTH, TB_HEIGHT);

    }
    if (intersected2) {
        stage.addActor(IceImage);
        camera3d.project(intersection, TB_X, TB_Y, TB_WIDTH, TB_HEIGHT);

    } 
```

不是很干净，但它现在可以工作，其中部分内容来自一些关于 LIBGDX 中光线拾取的优秀在线教程，所有这些都归功于他们！！！我只是为贴花定制了一点。希望它有所帮助，如果您想出一种更清洁的方法，我相信有一个请张贴，我很乐意看到它。

# angularjs - AngularJS - 编译通过 ng-repeat 添加的元素

> ID：15863177
> 
> 赞同：0
> 
> 时间：2013-04-07T13:56:10.380
> 
> 标签：angularjs

这是我的问题：我使用 ng-repeat 动态创建按钮，但它们的 ng-click 不起作用。从我目前发现的情况来看，我必须编译这些按钮以确保 Angular 知道新指令，但我不知道该怎么做。我尝试创建一个新指令来这样做，但我一定做错了什么，因为它仍然无法正常工作。

HTML：

```
<div ng-controller="content">
    <ul>
        <li ng-repeat="item in items">
            <span>item.text {{$index}}</span>
            <button ng-click="deleteItem({{$index}})">Delete item</button>
        </li>
    </ul>

    <button ng-click="addItem()">Add item</button>
</div> 
```

JS：

```
function content($scope) {
    $scope.items = [];

    $scope.addItem = function() {
        $scope.items.push({text: "test"});
    };

    $scope.deleteItem = function(index) {
        $scope.items.splice(index, 1);
    };
} 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:36:21.907

您的语法在`ng-repeat`. 尝试更改为这个，看看它是否有效：

```
<button ng-click="deleteItem($index)">Delete item</button> 
```

你放在`ng-click`never 中的表达式应该有这样的插值大括号。您放入其中的任何内容都已经根据当前范围的上下文进行了评估。

您还没有编写任何新指令（至少在此示例中显示），因此您无需担心那里。

# java - JDialog 关闭时内存泄漏

> ID：15863178
> 
> 赞同：2
> 
> 时间：2013-04-07T13:56:13.423
> 
> 标签：java, swing, memory-leaks, jdialog

我在一个 Java 应用程序上工作，该应用程序由（迄今为止）一个常规窗口（JFrame）和一个由菜单项首先调用的 JDialog 组成：

```
public class MainWindow {
    private JFrame frame;
    public MyDialog dialog;
    /* ... */
    private void initialize() {
         mnNew = new JMenuItem("New...");
         mnNew.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent arg0) {
             dialog = new MyDialog();
             }
         });
     }
} 
```

并`MyDialog`定义如下：

```
public class MyDialog extends JDialog {

    public MyDialog() {
        /* ... */
        JButton cancelButton = new JButton("Cancel");
        cancelButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                MyDialog.this.dispatchEvent(new WindowEvent(MyDialog.this,
                                            WindowEvent.WINDOW_CLOSING));
                MainWindow.window.matchMaker = null;
            }
        });
        /* ... */
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        setVisible(true);
    }
} 
```

一切正常，但我的任务管理器报告每次我打开然后关闭 MyDialog 时，程序都会消耗越来越多的内存。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:59:03.707

实例化 MyDialog 一次：

```
public class MainWindow {
   private JFrame frame;
   private final MyDialog dialog = new MyDialog(); 
```

`setVisible(true)`在 MyDialog 构造函数中删除。

要显示对话框，只需执行`setVisible( true )`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T14:02:12.343

*   原因是[顶级容器永远不会被 GC'ed](https://stackoverflow.com/questions/6309407/remove-top-level-container-on-runtime)，[顶级容器基于来自 Native OS 的对等体](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)

*   只创建一次[JDialog](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)，重用它`getContentPane.removeAll`

# asp.net - MVC 中的 Asp.net Server Control 替代方案

> ID：15863180
> 
> 赞同：0
> 
> 时间：2013-04-07T13:56:28.947
> 
> 标签：asp.net, asp.net-mvc, custom-component

我在 Asp.net Server Control 项目中创建登录控件并在 Asp.net Web 表单项目中使用它我如何在 MVC 项目中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:06:30.830

ASP.NET MVC 框架并不真正支持服务器端控件的概念。但是，您可以考虑使用几种方法将视图/逻辑抽象为可重用组件：

**自定义 HTML 助手**

您可以创建自定义 HTML 帮助程序，这是一种将服务器端逻辑抽象并呈现为“黑盒”的好方法，类似于自定义控件。这为开发人员提供了一个服务器端 API 来创建或实例化“控件”。看看这篇文章了解更多信息：[http ://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

**部分视图**

部分视图允许您重用 Razor 的一部分（如果这是您正在使用的视图类型）。

有两种典型的方法可以将局部视图包含在另一个视图中：

*   Html.RenderPartial - 类似于“包含”；通过将模型传递给视图来呈现视图
*   Html.RenderAction - 为局部视图执行整个 MVC 生命周期；你指定一个控制器和一个动作，控制器动作返回一个 PartialView，如下所示`return PartialView("partialName", vm);`：从控制器操作返回部分内容对于通过 AJAX 请求返回 HTML 片段以进行动态 HTML 呈现特别有用。

这是另一个 StackOverflow 问题，可能有助于澄清 RenderPartial 和 RenderAction 之间的区别： [RenderAction RenderPartial](https://stackoverflow.com/questions/719027/renderaction-renderpartial)

# javascript - 在 AngularJS 中使用后退按钮时会出现误导性面包屑

> ID：15863183
> 
> 赞同：1
> 
> 时间：2013-04-07T13:56:39.537
> 
> 标签：javascript, caching, angularjs, breadcrumbs

我正在使用[来自 Enrico Pulatzo](https://github.com/enricopulatzo/ng-breadcrumbs) ( [jsfiddle](http://jsfiddle.net/enricopulatzo/CY37S/) ) 的 ngBreadcrumbs-Service。只要用户单击面包屑，推送面包屑和取消注册就可以正常工作。但是，如果使用后退按钮或其他链接，则面包屑不会更新，并且在遵循新路线时会显示最后一个条目两次。如何更改此行为以始终拥有正确的面包屑路径？

```
Home > Users 
```

单击用户并返回后。面包屑应该只包括“家”。

```
Home > Users > Users 
```

单击用户后，导航回来并再次单击用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:17:58.360

[我从这个答案](https://stackoverflow.com/questions/14893867/angular-js-directive-to-show-alert-for-browser-back-button-when-unsaved-data-in)中添加了一个 $location.path 观察者，以减少包含面包屑的数组，现在一切都按预期工作。

```
$rootScope.$watch(function() {
    return $location.path();
}, function(newValue, oldValue) {
    if (newValue !== oldValue) {
        if (newValue.split('/').length < oldValue.split('/').length) {
            data.splice(1, data.length);
  }
        $rootScope.$broadcast('breadcrumbsRefresh');
    }
}, true); 
```

# jquery - Jquery scrollTop 工作一半

> ID：15863189
> 
> 赞同：0
> 
> 时间：2013-04-07T13:57:03.340
> 
> 标签：jquery, jquery-animate, scrolltop

我有一个手风琴内容，我正在滚动到所选内容的顶部。当我第一次单击它时它可以工作，但是当一个手风琴打开时，选定的文本确实滚动得比它应该滚动得更远。如果我先关闭所有手风琴，它工作正常。

```
jQuery(document).ready(function( $ ) 
{
    $(".slider .sliderlead").click(function()
    {
        $(this).siblings(".sliderlead").removeClass("active");
        $(this).siblings(".sliderContent").removeClass("active");

        $(this).next(".sliderContent").slideToggle("slow");

        $(this).next(".sliderContent")
            .toggleClass("active")
            .siblings(".sliderContent:visible")
            .slideUp("slow");

        $(this).toggleClass("active");

        $('html, body').animate(
        {
            scrollTop: $(".sliderlead.active").offset().top
        }, 150);
    });

    $(".slider .sliderContent").click(function()
    {
        $(this).slideUp("slow");
        $(this).removeClass("active");   
        $(".slider .sliderlead").removeClass("active");
    }); 
```

我将不胜感激有关此问题的任何提示，我整个周末都在解决这个问题，但找不到解决方案。

# ios - iOS 用户邮箱密码输入框

> ID：15863190
> 
> 赞同：-4
> 
> 时间：2013-04-07T13:57:14.797
> 
> 标签：ios, xcode

如何在 XCode 中创建类似于此图像的电子邮件和密码输入框。我在 XCode 中看不到多行文本框。

[![这里](https://i.stack.imgur.com/4OdRm.jpg)](https://i.stack.imgur.com/4OdRm.jpg)
[（来源：[favbulous.com](http://favbulous.com/resources/uploaded/ioslogin/9.jpg)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:58:53.793

你可以用 UITableView 做到这一点。在 Storyboard 中创建一个 TableView 内容：静态单元格和样式：分组。在“表格视图部分”中，将行设置为 2，并放置一个带有占位符的文本字段。

![在此处输入图像描述](https://i.stack.imgur.com/rGAMV.png)

# spring - 带有 Hibernate 的 Spring IDE

> ID：15863192
> 
> 赞同：0
> 
> 时间：2013-04-07T13:57:24.630
> 
> 标签：spring, hibernate

我尝试遵循一个关于 Spring IDE with Hibernate 的教程。我正在使用 spring 框架 3.2，我创建了自己的库，其中包含所有 jar 框架，我还有另一个库 hibernate 4 我做了同样的例子，但我仍然有这个消息：

```
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="org.postgresql.Driver"/>
    <property name="url"  value="jdbc:postgresql:T"/>
    <property name="username" value="postgres"/>
    <property name="password" value="root"/>
    </bean>

    <bean id="SessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="datasource" ref="datasource"/>**No setter found for property 'datasource' in class 
     'org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean'**
    <property name="annotatedClasses">
    <list>
    <value>com.model.Cours</value>
    <value>com.model.Student</value>
    </list>
    </property>

    </bean>
    </beans> 
```

告诉我为什么？如果可能存在 annotation.AnnotationSessionFactoryBean 的问题，请提出建议。我使用 hibernate4 并且它不存在 hibernate4.annotation ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:28:04.853

这是一个错字，应该是`<property name="dataSource" ref="datasource"/>`，不是`<property name="datasource" ref="datasource"/>`

**名称=** "数据源"不是**名称="数据源"**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:47:35.847

“property”元素的“name”属性表示被引用类org.apache.commons.dbcp.BasicDataSource( [http://commons.apache.org/proper/commons-dbcp/apidocs/org/ )的成员变量名apache/commons/dbcp/BasicDataSource.html](http://commons.apache.org/proper/commons-dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html)），其中成员变量被声明为“受保护的数据源数据源”。它区分大小写。因此“name”属性的值必须始终与被引用类中声明的成员变量名称的大小写匹配。

# c# - 如何在列表框中显示列表

> ID：15863195
> 
> 赞同：0
> 
> 时间：2013-04-07T13:57:45.477
> 
> 标签：c#, winforms, list, listbox

试图在列表框中打印歌曲刺痛。我尝试将它们添加为项目，但这只是打印 windowsform1.cs。我是否必须转换项目，或者它们是列表框打印字符串和 int 所需的功能。

```
private string title;
private string album, title, artist, genre;
private int length;

private void List_Click(object sender, EventArgs e)
{
    MDB.listAllSongs(listBox1.Items);

}

public void listAllSongs(IList list)
{
    List<Song> allSongs = new List<Song>();
    foreach (Album album in albums)
    {
        album.listSongs(allSongs);
    }

    foreach (Song song in allSongs)
    {
        list.Add(song.ToString());
    }
}

public void listSongs(List<Song> list)
{
    foreach (Song song in songs)
    {
        list.Add(song);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:33:26.320

您需要在 Song 类中实现 toString() 方法，以返回歌曲的标题：

```
public string toString()
{
    return title;
} 
```

# php - 如何发送包含带有（+，*，/，-）等符号的php源的发布数据并使用ajax请求将该数据写入文件？

> ID：15863196
> 
> 赞同：1
> 
> 时间：2013-04-07T13:57:45.700
> 
> 标签：php, javascript, html, urlencode

所以完整的场景是，我正在制作一个看起来像 w3schools “自己尝试！”的 Web 应用程序。选项。但现在离开安全性并制作 Web 应用程序的核心部分。

### 我的逻辑是：

1.  使用 textarea 从用户那里获取输入，并在 ajax 请求中使用 POST 方法发送该数据。
2.  现在在一个 PHP 文件（ajax 向该文件发送请求）中，我正在将发布的内容写入另一个 PHP 文件，并使用系统函数执行该 PHP 代码并再次将生成的 html 写入 .htm 文件。
3.  现在在发送ajax请求的文件（第一个文件）中，我在javascript中使用.htm文件输出的iframe并刷新它。

### 问题是：

对于包含回显、系统功能的代码，一切正常。但是当我们使用像“+”这样的符号时，发布的数据正在转换为 html url 解码。

```
<?php
  echo "Hello, world";
?> 
```

上面的代码工作正常。

```
<?php
  $a = 10;
  $b = 20;
  echo $a+$b;
?> 
```

它不工作。上面的代码是在 PHP 写入文件（我从 POST 数据写入）中检查时，它的写法如下：

```
<?php
  $a = 10;
  $b = 20;
  echo $a $b;
?> 
```

'+' 符号正在转换为空格。我猜数据被解码成普通的html实体。整个事情是否有更好的逻辑以及如何解决这个问题。请帮帮我。

### 使用 ajax 请求发送 textarea 代码的文件：

```
<title>Html Black Box</title>
<style>
    textarea{ 
    font-family: courier; font-size: 15px; height: 100%; width: 100%;}
    input {width: 100%; height: 100%; font-size: 40px;}
    iframe {width: 100%; height: 100%; }
</style>
<script>
function update(){
document.getElementById('tdop').innerHTML = "<img src=ajx_ima.gif>";
var form = document.getElementById('code_text').value;
var xmlhttp;
    if (window.XMLHttpRequest)
      xmlhttp=new XMLHttpRequest();
    else
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");

xmlhttp.open("POST", "process_php.php", true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.onreadystatechange=function()
  {
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        var res = xmlhttp.responseText;
    document.getElementById('tdop').innerHTML = "<iframe src=out_php.htm id=out></iframe>";
    }

  }
    xmlhttp.send("code="+form);
}
</script>
<table border=0>
<tr>
<td>
    <textarea id="code_text" style="resize: none;"></textarea>
</td>
<td id="tdop">
    <iframe src="blank.htm" id="out" frameBorder="1"></iframe>
</td>
</tr>
<tr><td colspan="2" align="center"><input type="button" value="Update Page" onclick="update()"></td></tr>
</table> 
```

**写入接收数据的文件**

```
<?php
$stringData = ''.isset($_POST['code']) ? $_POST['code'] : '';
$myFile = "buf_php.php";
$fh = fopen($myFile, 'w+');
file_put_contents($myFile, $stringData);
fclose($fh);
$myFile = "out_php.htm";
system("php buf_php.php > $myFile");
echo $stringData;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:49:32.037

您正在通过发布请求直接从您的文本区域发送您的“代码”。特殊字符将被处理为 url。

要绕过这一点，您必须使用[encodeURIComponent() 函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)在 javascript 中对这些特殊字符进行编码，该函数`escapes all characters except the following: alphabetic, decimal digits, - _ . ! ~ * ' ( )`

```
....
 // var form = document.getElementById('code_text').value; //old line
 var form = encodeURIComponent(document.getElementById('code_text').value)
.... 
```

这将解决除 + 号之外的所有问题。因此，您必须将 + 替换为 "%20"

```
...
 var form = encodeURIComponent(document.getElementById('code_text').value);
 form = form.replace('+','%20');
.... 
```

你说你想把*换成。前一个[URL](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)为您提供了一个“固定”功能，将其替换为：

```
function fixedEncodeURIComponent (str) {
    return encodeURIComponent(str).replace(/[!'()]/g, escape).replace(/\*/g, "%2A");
} 
```

# wpf - XAML中TextBox中的点使用绑定

> ID：15863199
> 
> 赞同：1
> 
> 时间：2013-04-07T13:57:56.803
> 
> 标签：wpf, xaml

我遇到的问题与 WPF 文本框绑定中描述的问题几乎相同， [使用 stringformat 时](https://stackoverflow.com/questions/13144461/wpf-textbox-binding-not-working-when-using-stringformat) 我有滑块和文本框。文本框绑定到滑块的值属性，更新触发器 onpropertychanged 在 toway 模式下。我在文本框中检查用户输入，所以我只能输入数字或“-/+”。我的问题是我不仅有整数，还有浮点值，而且我现在不知道点后有多少位数，所以我不想限制用户。`StringFormat=D`为此，我使用字符串格式 D ，但在这种情况下，TextBox 中没有输出可见，但我仍然可以输入数字并且它会影响 slier 值，但是当我移动滑块时 - 文本从文本框中消失。

我希望滑块中的值在文本框中可见，并且在点后输入数字没有限制。我该怎么做？PS我正在使用.NET 4.5。

这是我的转换器：

```
class ToStringConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value != null)
        {
            return value.ToString();
        }
        return 0;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value != null)
        {
            float fvalue = System.Convert.ToSingle(value.ToString(), culture);
            return fvalue;
        }
        return 0;
    }
} 
```

它显示的值很好，但我无法输入值 - 它崩溃并且总是切换到最大值而不是我想要的。

这是我的 XAML 代码

```
<Page.Resources >

        <settingsManager:RoundingConverter x:Key="RoundingConverter"></settingsManager:RoundingConverter>
        <settingsManager:ToStringConverter x:Key="ToStringConverter"></settingsManager:ToStringConverter>

    </Page.Resources>

<TextBox x:Name="TextBoxFirstPersonCameraPositionX" Text="{Binding ElementName=SliderFirstPersonCameraPositionX, Path=Value, Mode=TwoWay, IsAsync=True, Delay=0, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource ToStringConverter}}"  
                                         Width="100" VerticalAlignment="Center" Margin="10,0,0,0" FontWeight="Normal" MaxWidth="200" MinWidth="198" HorizontalScrollBarVisibility="Auto" MaxLength="40" DataObject.Pasting="TextBoxPasting" PreviewTextInput="OnPreviewTextInput"
                                         >
                                </TextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T11:19:18.613

首先，尝试用“double”和“ToDouble”替换“float”和“ToSingle”。Slider.Value 是双精度数，而不是浮点数。

然后，Convert.ToSingle[可能会引发](https://msdn.microsoft.com/de-de/library/faab9yks(v=vs.110).aspx)FormatException。您应该捕获并处理此异常。此外，为了安全起见，OverflowException。或者，首先使用[double.TryParse](https://msdn.microsoft.com/de-de/library/system.double.tryparse%28v=vs.110%29.aspx)来避免异常。

然后，在转换时，您[应该始终设置](https://msdn.microsoft.com/en-us/library/ms182190.aspx)CultureInfo。您可能在一个没有“。”的系统上。但是“，”用于分隔小数。

要找出它崩溃的原因，请尝试以下操作：调试代码，按 Ctrl-Alt-E 并检查“公共语言运行时异常/抛出”。然后，只要抛出异常，例如 FormatException，调试器就会停止，您可以看到发生了什么。

# asp.net-mvc - 将 POCO 类映射到 MVC 模型

> ID：15863201
> 
> 赞同：1
> 
> 时间：2013-04-07T13:58:01.080
> 
> 标签：asp.net-mvc, poco

我是 MVC 和 EF 的新手。在一些不错的教程之后，我终于创建了我的 POCO 类。

我正在尝试在分层架构中的 POCO 类的帮助下创建 MVC 模型。我的 POCO 类位于名为`Entities`.

我的 MVC4 应用程序是一个`Web`引用实体的项目。

我查询数据库并在实体中有内容，并希望将 3-4 个 POCO 类映射到单个模型，以便创建强类型视图。

我不确定如何进行。在这方面帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:05:33.953

查看[ASP.NET MVC in Action 一书。](http://www.manning.com/palermo3/). 它有一整章专门讨论这个主题。他们建议并展示了如何使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)将域实体映射到 ViewModel。

[我这里](https://bitbucket.org/dbeattie/feedtracker)也有一个例子。

在引导程序中：

```
 Mapper.CreateMap<Building, BuildingDisplay>()
                .ForMember(dst => dst.TypeName, opt => opt.MapFrom(src => src.BuildingType.Name)); 
```

在控制器中：

```
 public ActionResult Details(int id)
        {
            var building = _db.Buildings.Find(id);

            if (building == null)
            {
                ViewBag.Message = "Building not found.";
                return View("NotFound");
            }

            var buildingDisplay = Mapper.Map<Building, BuildingDisplay>(building);
            buildingDisplay.BinList = Mapper.Map<ICollection<Bin>, List<BinList>>(building.Bins);

            return View(buildingDisplay);            
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T14:09:17.953

我以前回答过这种类型的问题，如果你想看，这里是链接

```
http://stackoverflow.com/questions/15432246/creating-a-mvc-viewmodels-for-my-data/15436044#15436044 
```

但是，如果您需要更多帮助，请告诉我：D 这是您的视图模型

```
public class CategoryViewModel
{
    [Key]
    public int CategoryId { get; set; }
    [Required(ErrorMessage="* required")]
    [Display(Name="Name")]
    public string CategoryName { get; set; }
    [Display(Name = "Description")]
    public string CategoryDescription { get; set; }
    public ICollection<SubCategory> SubCategories { get; set; }
} 
```

现在用于映射使用 linq 中的投影；

```
public List<CategoryViewModel> GetAllCategories()
{
    using (var db =new Entities())
    {
        var categoriesList = db .Categories
            .Select(c => new CategoryViewModel() // here is projection to your view model
            {
                CategoryId = c.CategoryId,
                CategoryName = c.Name,
                CategoryDescription = c.Description
            });
        return categoriesList.ToList<CategoryViewModel>();
    };
 } 
```

现在你的控制器；

```
ICategoryRepository _catRepo;
    public CategoryController(ICategoryRepository catRepo)
    {
        //note that i have also used the dependancy injection. so i'm skiping that
        _catRepo = catRepo;
    }
    public ActionResult Index()
    {
        //ViewBag.CategoriesList = _catRepo.GetAllCategories();
           or
        return View(_catRepo.GetAllCategories());
    } 
```

最后是你的观点；

```
@model IEnumerable<CategoryViewModel>
@foreach (var item in Model)
{
    <h1>@item.CategoryName</h1>
} 
```

# android - 相机原生代码的底层逻辑

> ID：15863203
> 
> 赞同：4
> 
> 时间：2013-04-07T13:58:02.267
> 
> 标签：android, android-camera, android-source

我试图更好地理解相机本机代码的底层逻辑，但在寻找方法定义`Camera::connect()`和其他从`Camera.h`.

我遵循的步骤如下：

1.  [在我所在`Camera.java`](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/hardware/Camera.java)的主分支中，其中包含解析摄像机的逻辑，`CameraInfo.CAMERA_FACING_BACK`在遇到时选择：
    *   `Camera.open()`调用`Camera.getCameraInfo(int, CameraInfo)`中的每个 int `Camera.getNumberOfCameras()`。
    *   `Camera.getCameraInfo(int, CameraInfo)`依次调用本机函数`Camera._getCameraInfo(int, CameraInfo)`。
2.  深入[研究 JNI](https://android.googlesource.com/platform/frameworks/base/+/master/core/jni/android_hardware_Camera.cpp)：

    *   `android_hardware_Camera_getCameraInfo(JNIEnv*, jobject, jint, jobject)`然后调用静态方法`Camera::getCameraInfo(jint, CameraInfo*)`，该方法似乎是通过以下方式声明的：

        ```
        #include <camera/Camera.h> 
        ```

3.  浏览和搜索 master 分支似乎对`camera/Camera.h`. 我能找到的唯一结果是在旧标签中，例如[在姜饼分支](https://android.googlesource.com/platform/frameworks/base/+/gingerbread/include/camera/Camera.h)中。这里只有一个方法声明：

    ```
    static  status_t    getCameraInfo(int cameraId,
                                  struct CameraInfo* cameraInfo); 
    ```

4.  但是，方法主体似乎没有在任何地方定义。

最后两个步骤是我感到困惑的地方。`camera/Camera.h`较新版本的 Android 定义在哪里？最后，`Camera`实际定义的方法体在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:00:45.623

似乎在 Gingerbread 之后，一些代码转移到了不同​​的框架。[我位于`camera/Camera.h`存储`platform/frameworks/av`库中。](https://android.googlesource.com/platform/frameworks/av/+/master/include/camera/Camera.h)

我[在`Camera.cpp`](https://android.googlesource.com/platform/frameworks/av/+/master/camera/Camera.cpp).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:17:35.647

在 ICS 中，Camera::getCameraInfo(jint, CameraInfo*) 在 frameworks/av/camera/Camera.cpp 中定义为

```
status_t Camera::getCameraInfo(int cameraId,
                               struct CameraInfo* cameraInfo) {
    const sp<ICameraService>& cs = getCameraService();
    if (cs == 0) return UNKNOWN_ERROR;
    return cs->getCameraInfo(cameraId, cameraInfo);
} 
```

然后它抓取一个 binder 对象`CameraService`并调用`getCameraInfo`on `CameraService`。

```
status_t CameraService::getCameraInfo(int cameraId,
                                      struct CameraInfo* cameraInfo) {
    ...
    struct camera_info info;
    status_t rc = mModule->get_camera_info(cameraId, &info);
    ...
    return rc;
} 
```

包含您设备上相机的`mModule`实际实现。不同的设备可能有不同的实现。例如，您可以`QualcommCamera`在[hardware/qcom/camera/QualcommCamera.cpp](https://android.googlesource.com/platform/hardware/qcom/camera/+/android-4.2.2_r1/QualcommCamera.cpp)下找到。

然后看看`connect`。`connect`做类似的工作，最后调用`CameraService::connect`. 在该方法中，有一个`CameraClient`由`mModule`. 因此，当您对客户端执行某些操作时，您实际上是在使用特定于设备的实现。

再说一句，mModule 由`hw_get_module`in初始化`CameraService::onFirstRef`。

# jquery - 用 jquery 替换 .class 元素上的 $this tet

> ID：15863208
> 
> 赞同：0
> 
> 时间：2013-04-07T13:58:35.247
> 
> 标签：jquery

我目前有一个mouseenter，我在其中调用一个执行一些不同操作的函数——在这个函数中，我还希望从$this div 更改某个div 的文本。

HTML：

```
//item 1
<div class="blockButton">
    <div class="blockButtonToggle">PLUS</div>
</div>

//item 2
<div class="blockButton">
    <div class="blockButtonToggle">PLUS</div>
</div>

//item 3 etc...
<div class="blockButton">
    <div class="blockButtonToggle">PLUS</div>
</div> 
```

当悬停项目 1、2、3 时，我希望将特定块的“加号”文本更改为“减号”（$this）。

我试过：

```
$('.blockButton div.blockButtonToggle').text( $(this).data('MINUS') ); 
```

但是那没有用 - 有什么建议吗？

在这里小提琴：http: [//jsfiddle.net/ANRfT/](http://jsfiddle.net/ANRfT/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:03:07.347

当您在绑定函数的上下文中绑定事件处理程序时`this`，将引用事件绑定到的元素。您可以通过包装将其设为 jQuery 对象`$(this)`。包装元素后，您可以使用该`find`方法获取`.blockButtonToggle`元素内的元素。接下来，您使用`html()`函数而不是`text()`来设置元素的 innerHtml `.blockButtonToggle`。

```
//MOUSEOVER
$(".blockButton").mouseenter(function() {
    $(this).find(".blockButtonToggle").html("MINUS");
});

//MOUSEOUT
$(".blockButton").mouseleave(function() {
    $(this).find(".blockButtonToggle").html("PLUS");
}); 
```

**工作示例** [http://jsfiddle.net/ANRfT/1/](http://jsfiddle.net/ANRfT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:01:41.603

```
$('.blockButton div.blockButtonToggle').text('MINUS'); 
```

更特别的是，您可以这样做：

```
$(".blockButton").on('mouseenter', textShow)
                 .on('mouseleave', textHide);

function textShow() {
    $(this).find('.blockButtonToggle').text('MINUS');
}

function textHide() {
    $(this).find('.blockButtonToggle').text('PLUS');
} 
```

[**小提琴**](http://jsfiddle.net/ANRfT/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:07:49.040

你有很多错误。这是修复：

```
$(".blockButton").mouseenter(function() {
    //Calling function to show text
    textShow($(this).find(".blockButtonTips"));
})

//MOUSEOUT 
$(".blockButton").mouseleave(function() {
    //Calling function to hide text
    textHide($(this).find(".blockButtonTips"));
);

function textShow(elementId) {
    elementId.text('MINUS');
}

function textHide(elementId) {
    elementId.text('PLUS');
} 
```

**[演示](http://jsfiddle.net/ANRfT/3/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T14:10:56.623

[http://jsfiddle.net/ANRfT/4/](http://jsfiddle.net/ANRfT/4/)

```
 $('.blockButtonToggle').hover(function () {
$(this).text('MINUS');
        });
        $('.blockButtonToggle').mouseleave(function () {
$(this).text('PlUS');
        }); 
```

# android - CheckedListBox 选中项目以运行 CMD 进程并将 CMD 输出打印到应用程序

> ID：15863214
> 
> 赞同：0
> 
> 时间：2013-04-07T13:59:06.640
> 
> 标签：android, redirect, cmd, checkedlistbox

我正在重新创建一个 Windows-Android Apk 安装程序（供我自己使用和教育目的）这是一个 Windows 窗体应用程序，其功能是：在我的 Android 设备上安装、刷新和控制一些东西。

该应用程序包含几个复选框，代表“从具有过滤扩展名的文件夹填充”的文件。这些项目（批处理文件）应运行命令提示符，并且应将 CMD 输出检索到应用程序文本框中。

当 CheckedListBox 中有多个项目被选中时（或 All Checked）；我需要应用程序使用 CMD 运行所有选定的批次。

或用于安装应用程序：即：“adb install ~\path to my apk folder\ checkedliastbox1.filename.apk”

这些是我正在尝试使用的代码；**当然，不能正常工作**。两个代码中发生的情况是，它会同时打开几个 cmd 窗口，并且不会将 checkedListbox1.selectedItems 放入命令提示符。也就是说只显示 adb 帮助。

代码 #1

```
 private void btn_Install_Click(object sender, EventArgs e)
    {
        foreach (object itemChecked in checkedListBox1.CheckedItems)
        {
            Process.Start(@"C:\myfolder\programfiles\program.exe", "run " + checkedListBox1.SelectedItems);
        }
    } 
```

代码 #2

```
 private void btn_install_Click(object sender, EventArgs e)
    {
        foreach (object itemChecked in checkedListBox1.CheckedItems)
        {
            p.StartInfo.FileName = @"C:\RGDnamics\Android\adb\adb.exe";
            p.StartInfo.UseShellExecute = true;
            p.StartInfo.CreateNoWindow = false;
            p.StartInfo.Arguments = "install C:\\myFolder\\Android\\Backups\\Apk\\myapks\\" + itemChecked.ToString();
            p.Start();
            p.WaitForExit();
        } 
```

知道我可能做错了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:09:04.703

您正在为每个 CheckedItem 传递 SelectedItems 集合，而不是传递每个当前选中的项目。

代替：

```
Process.Start(@"C:\RGDnamics\programfiles\program.exe", "run "+checkedListBox1.SelectedItems); 
```

采用：

```
Process.Start(@"C:\RGDnamics\programfiles\program.exe", "run "+itemChecked.toString()); 
```

# c# - 更改元组的嵌套列表

> ID：15863216
> 
> 赞同：0
> 
> 时间：2013-04-07T13:59:28.043
> 
> 标签：c#, linq

我的变量声明如下

```
List<Tuple<TypeX, List<Tuple<TypeY, int, bool>>, int, int, int>> lst; 
```

我想使用 linq 查询更改内部布尔变量。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:13:56.330

如果您使用的是 linq，则需要使用转换后的结构创建一个新列表：

```
lst = lst.Select(t => Tuple.Create(
    t.Item1,
    t.Item2.Select(it => Tuple.Create(it.Item1, it.Item2, Transform(it.Item3))).ToList(),
    t.Item3,
    t.Item4,
    t.Item5
)).ToList(); 
```

其中`Transform`是转换内部布尔值的操作。

我会考虑为此创建一个自定义类而不是使用元组，因为大型元组可能难以使用。

# python - SWIG 编译的 python 模块返回错误的结果

> ID：15863227
> 
> 赞同：2
> 
> 时间：2013-04-07T14:00:40.257
> 
> 标签：python, module, swig, double-precision

我只是在玩 SWIG 为特定的 C 库制作 python 模块。我遇到了 double 和 float 变量的麻烦。这里有一个例子：

```
/***** simple.c *****/
#include <stdio.h>
double doublefun(double b){
        printf("c(%g)",b);
        return b+12.5;
}

float floatfun(float b){
        printf("c(%f)",b);
        return b+12.5;
}

int intfun(int b){
        printf("c(%d)",b);
        return b+12;
}

/***** simple.i *****/
%module simple
%{
%}

extern double doublefun(double);
extern float floatfun(float);
extern int intfun(int); 
```

和

```
#***** simpletest.py *****#
import simple

print "i:",simple.intfun(2)
print "f:",simple.floatfun(2.3)
print "d:",simple.doublefun(2.3) 
```

结果是：

```
i:c(2) 14
f:c(36893488147419103232.000000) 30.0
d:c(2.3) 6.0 
```

任何想法为什么会发生？

**PS**如果我从C代码调用函数......

```
int main(int argc, char** argv){
        printf("i::%d\n",intfun(2));
        printf("f::%f\n",floatfun(2.3));
        printf("d::%g\n",doublefun(2.3));
        return 0;
} 
```

一切安好：

```
c(2)i::14
c(2.300000)f::14.800000
c(2.3)d::14.8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:19:47.993

[如果您按照文档](http://www.swig.org/Doc2.0/Python.html#Python_nn2)中的第一个示例所示添加标题：

```
%{
#include "simple.h"
%} 
```

那么你应该得到：

```
i:c(2) 14
f:c(2.300000) 14.8000001907
d:c(2.3) 14.8 
```

查看[完整示例](https://gist.github.com/zed/5330891)。

# ios - 我将如何使用 NSPredicate 编写这个 NSSet 测试？

> ID：15863231
> 
> 赞同：0
> 
> 时间：2013-04-07T14:00:55.400
> 
> 标签：ios, objective-c, nspredicate, nsset

嗨，我使用 NSSet 的 objectsPassingTest 方法创建了一个公共集。有没有办法可以使用 NSPredicate 来编写它？我想要更多的测试来匹配不仅仅是查看一组是否包含一个对象。

```
NSSet *commonMusic = [userMusicTitles objectsPassingTest:^BOOL(id obj, BOOL *stop) {
    return [friendMusicTitles containsObject:obj];
}]; 
```

这两组包含 NSStrings，我想使用诸如

如果 userMusicTitles.title LIKE[cd]friendMusicTitles.title

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:08:45.010

如果我理解正确，您想创建一个新的 NSSet，其中包含 2 个不同 NSSet 共有的所有元素。

```
- (void)testTest
{
NSArray *a = @[ @"boris", @"bob", @"claire", @"x" ];
NSArray *b = @[ @"Boris", @"BOB", @"vince", @"y", @"x" ];
NSSet *userMusicTitles = [NSSet setWithArray:a];
NSSet *friendMusicTitles = [NSSet setWithArray:b];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF LIKE[cd] $STR"];
__block NSPredicate *blockPredicate = nil;
NSSet *commonMusic = [userMusicTitles objectsPassingTest:^BOOL(NSString *obj, BOOL *stop) {
    blockPredicate = [predicate predicateWithSubstitutionVariables:@{ @"STR" : obj }];
    return ([friendMusicTitles filteredSetUsingPredicate:blockPredicate].count > 0);
}];

NSLog(@"common music == %@", commonMusic);
} 
```

其他选项。

[NSMutableSet](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableSet_Class/Reference/NSMutableSet.html)有`- (void)intersectSet:(NSSet *)otherSet`方法。但它不会做`LIKE[cd]`. 您必须已经以 [cd] 形式存储您的 NSString。

其他选项是循环遍历一个集合并在谓词中使用该值，然后将结果添加到最后将包含您的元素的 NSMutableSet。

# android - 根据 MA C 地址生成唯一代码

> ID：15863236
> 
> 赞同：1
> 
> 时间：2013-04-07T14:01:37.873
> 
> 标签：android, algorithm

我希望能够生成对单个 Android 设备有效的字母数字代码（如折扣代码），每个代码在有限的时间内。

也就是说，我需要找到一种方法来生成仅对单个设备有效的唯一无限（或至少大量）代码。

我曾考虑使用 MAC 地址作为代码生成的“种子”，但我不知道如何自己生成代码。这个问题有什么通用的方法或解决方案吗？

PS。我需要一种不依赖于代码数据库的算法，因为我的设备在激活代码时可能没有连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:11:16.593

本质上，您正在寻找的是某种形式的哈希函数。您可以通过生成任何随机数作为基础来做到这一点。一旦你有了这个，计算它的哈希值（作为一个字符串），以及它的哈希值与设备的 MAC 地址连接。折扣代码可以是：

```
temp = hash(random())
code = concat(temp, hash(concat(mac_address, temp))) 
```

然后可以通过确认代码的前半部分可以连接到 mac 地址并散列以产生后半部分来检查这一点。

```
valid = hash(concat(mac_address, first_half(code))) == second_half(code) 
```

或者，您可以跟踪请求的数量，而不是随机数，并使用它来代替 random() 调用。这应该*始终为您提供要处理的唯一代码，并且您可以跟踪哪些代码已在您的服务器上兑换。

*   哈希函数的结果可能会发生冲突，但是如果您仔细选择，这种可能性确实很小。

显然，以上都是非常通用的伪代码。我希望这有帮助。

关于散列函数的一些信息（特别是加密函数，这是你想要的安全的东西）：

[http://en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)

# playframework-2.0 - 性能测试时如何在播放应用程序中摆脱akka AskTimeout Exception

> ID：15863238
> 
> 赞同：1
> 
> 时间：2013-04-07T14:01:43.777
> 
> 标签：playframework-2.0, jmeter, akka, performance-testing

我在 play 2.0.4 上运行一个 Web 应用程序，现在它处于性能测试阶段。
要求是 1000 个用户/小时登录 Web 应用程序。

目前我正面临通过 Jmeter 作为 perf 工具在系统中引入的仅 100 个线程的问题。
每次我运行 100 个线程时，Jmeter 上的采样器都会出现 20-25 个 http 失败。
在播放日志中我看到了`AskTimeout`。此外，在播放日志中，http 失败的次数不等于 Ask Timeout 的次数。

```
Jmeter Sampler error-
HTTP/1.1 500 Internal Server Error
Content-Length: 0 
```

播放日志：

> 2013-04-07 09:49:08,740 错误 [play-akka.actor.promises-dispatcher-493] 播放：无法调用操作，最终出现错误：抛出（akka.pattern.AskTimeoutException：超时）

请参阅下面的 akka 配置以获取 50 个 Jmeter 线程（成功运行）。

如何为 100 个线程进一步调整它，以便我看不到 AskTimeout 异常？

```
play {

    akka {
        event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
        loglevel = INFO

        actor {

            deployment {

                /actions {
                    router = round-robin
                    nr-of-instances = 1000
                }

               /promises {
                    router = round-robin
                    nr-of-instances = 1000
                }
              }

            retrieveBodyParserTimeout = 5 second

            actions-dispatcher = {
                fork-join-executor {
                    parallelism-factor = 100
                    parallelism-max = 200
                 }
                throughput = 100
                mailbox-capacity = 100
                mailbox-type =""
            }

            promises-dispatcher = {
                fork-join-executor {
                   parallelism-factor = 4
                  parallelism-max = 100
             }
                throughput = 100
                }

           websockets-dispatcher = {
              fork-join-executor {
                 parallelism-factor = 2.0
                parallelism-max = 100
           }
                throughput = 100
           }

          default-dispatcher = {
             fork-join-executor {
                parallelism-factor = 2.0
               parallelism-max = 100
             }
                throughput = 100
           }

        }

    }

} 
```

# javascript - 验证复选框的问题

> ID：15863239
> 
> 赞同：-1
> 
> 时间：2013-04-07T14:02:04.060
> 
> 标签：javascript, forms, validation, checkbox

我在验证复选框时遇到问题 - 错误消息未显示。

这是验证代码：

```
if ( '#yesno'.val() == ''){
                    $('#yesno').parent().parent().find('.form-error').html("Du har inte kryssat i rutan");
                    err++;
                } 
```

它是多步骤表单的一部分 - 这是复选框所在的代码

```
 var step3_validation = function(){
            var err = 0;

            if($('#boende').val() == '0'){
                $('#boende').parent().parent().find('.form-error').html("Välj ett boendealternativ");
                err++;
            }
            if ( '#yesno'.val() == ''){
                $('#yesno').parent().parent().find('.form-error').html("Du har inte kryssat i rutan");
                err++;
            }
            if(err == 0){
                $(".rhino-active-bullet").removeClass("step-error").addClass("step-success");
                $(".rhino-next").show();
                $('.form-submit').hide();
                $('.rhino-next').trigger('click');
            }else{
                $(".rhino-active-bullet").removeClass("step-success").addClass("step-error");
            }

        }; 
```

这是复选框：

```
 <div class="form-left2">Jag har läst <a href="#">cupinformationen</a></div>
                            <div class="form-right2"><input type="checkbox" name="yesno" value="check1"></div>
                            <div class="form-error"></div> 
```

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:02:58.110

改变

```
if ( '#yesno'.val() == ''){ 
```

至

```
if ( $('#yesno').val() == ''){ 
```

您可以[使用控制台](https://developers.google.com/chrome-developer-tools/docs/console)找到错误：错误消息应指示`val`未找到该函数。

# xslt - 如何从 xslt 的 xml 输出中删除不需要的空 xmlns

> ID：15863243
> 
> 赞同：1
> 
> 时间：2013-04-07T14:02:20.743
> 
> 标签：xslt, namespaces

我正在尝试建立一个肥皂请求。所需的输出是：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"   
xmlns:soap1="http://acme.com/ws/soapheaders">
<soap:Header>
    <soap1:locale>en</soap1:locale>
    <soap1:authentication>
        <soap1:username>john.doe</soap1:username>
        <soap1:password>psw</soap1:password>
    </soap1:authentication>
</soap:Header> 
```

这是我的测试 xsl（语言、用户名和密码将在实际应用程序中传递）：

```
 <?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0">
<xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
<xsl:param name="language" select="'en'"/>
<xsl:param name="username" select="'john.doe'"/>
<xsl:param name="password" select="'psw'"/>
<xsl:template match="/">
    <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" 
        xmlns:soap1="http://acme.com/ws/soapheaders" >
        <xsl:call-template name="soapHeader"/>              
        <xsl:call-template name="soapBody"/>
    </soap:Envelope>
</xsl:template>
<xsl:template name="soapHeader">
    <soap:Header> 
        <soap1:locale><xsl:value-of select="$language" /></soap1:locale>
        <soap1:authentication>
            <soap1:username><xsl:value-of select="$username" /></soap1:username>
            <soap1:password><xsl:value-of select="$password" /></soap1:password>
        </soap1:authentication>
    </soap:Header> 
</xsl:template>
<xsl:template name="soapBody">
</xsl:template>
</xsl:stylesheet> 
```

但是，输出是：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap1="http://acme.com/ws/soapheaders">
<soap:Header xmlns:soap="">
    <soap1:locale xmlns:soap1="">en</soap1:locale>
    <soap1:authentication xmlns:soap1="">
        <soap1:username>john.doe</soap1:username>
        <soap1:password>psw</soap1:password>
    </soap1:authentication>
</soap:Header> 
```

有不需要的空命名空间，例如 xmlns:soap=""、xmlns:soap1=""。你能给我指出正确的方向来消除这些不需要的伪影吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:09:51.933

我很惊讶您的 XSLT 处理器接受 XSLT，因为它不是有效的 XML，但为了使其有效并且（我相信）解决您的问题，您应该在`<xsl:stylesheet>`元素上而不是在元素上声明命名空间`<soap:Envelope>`：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0"
                xmlns:soap="http://www.w3.org/2003/05/soap-envelope"
                xmlns:soap1="http://acme.com/ws/soapheaders"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T16:05:13.073

**I strongly recommend to separate the presentation from the logic. In fact, you can have a transformation that is independent of any possible presentation**.

Here comes the "Fill-in-the-blanks" technique (note that it also solves your problem of unwanted namespaces):

**Source XML document**:

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"
xmlns:soap1="http://acme.com/ws/soapheaders" xmlns:gen="my:gen">
    <soap:Header>
        <soap1:locale><gen:language/></soap1:locale>
        <soap1:authentication>
            <soap1:username><gen:username/></soap1:username>
            <soap1:password><gen:password/></soap1:password>
        </soap1:authentication>
    </soap:Header>
</soap:Envelope> 
```

**Presentation-independent transformation**:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:gen="my:gen">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
    <xsl:param name="language" select="'en'"/>
    <xsl:param name="username" select="'john.doe'"/>
    <xsl:param name="password" select="'psw'"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="gen:*">
  <xsl:value-of select=
  "document('')/*/xsl:param[@name=local-name(current())]/@select"/>
 </xsl:template>
</xsl:stylesheet> 
```

**Result**:

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap1="http://acme.com/ws/soapheaders" xmlns:gen="my:gen">
   <soap:Header>
      <soap1:locale>'en'</soap1:locale>
      <soap1:authentication>
         <soap1:username>'john.doe'</soap1:username>
         <soap1:password>'psw'</soap1:password>
      </soap1:authentication>
   </soap:Header>
</soap:Envelope> 
```

**You can have now as many different presentation layouts as necessary, and the same transformation without any change (provided all required parameters have been specified) produces any of these formats**.

**For example, if you want to produce the result in this new format:**

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soap1="http://acme.com/ws/soapheaders">
   <soap:Header>
      <soap1:personalized>
         <soap1:locale>
            <soap1:language>'en'</soap1:language>
         </soap1:locale>
         <soap1:authentication>
            <soap1:username>'john.doe'</soap1:username>
            <soap1:password>'psw'</soap1:password>
         </soap1:authentication>
      </soap1:personalized>
   </soap:Header>
</soap:Envelope> 
```

**just apply the same transformation on the following XML document:**

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"
xmlns:soap1="http://acme.com/ws/soapheaders" xmlns:gen="my:gen">
    <soap:Header>
      <soap1:personalized>
        <soap1:locale>
          <soap1:language><gen:language/></soap1:language>
    </soap1:locale>
        <soap1:authentication>
            <soap1:username><gen:username/></soap1:username>
            <soap1:password><gen:password/></soap1:password>
        </soap1:authentication>
        </soap1:personalized>
    </soap:Header>
</soap:Envelope> 
```

Further generalization can be achieved by providing the URL of the layout-document and the url of the Parameters document -- as parameters to the transformation.

# android - setmultichoiceitem 未在 Dialog 中执行

> ID：15863249
> 
> 赞同：0
> 
> 时间：2013-04-07T14:03:04.253
> 
> 标签：android, android-dialog

** Emulator 不显示 Multichoice item("Google","Apple","Ms","Samsumg","Nokia").... 它不执行 setmultiitemsselected 函数谁能帮我找出解决方案？**

```

    ***My Program***

    public class DialogActivity extends Activity {
    CharSequence[] items = {"Google","Apple","Ms","Samsumg","Nokia"};
        boolean[] itemcheck = new boolean[items.length];
        public void onClick(View v) {
            showDialog(0);
        }

        @Override
        protected Dialog onCreateDialog(int id) {
        Dialog d = null;
            switch (id) {
            case 0:
            AlertDialog.Builder ab = new AlertDialog.Builder(this);
            ab.setIcon(R.drawable.fb);
            ab.setTitle("Facebook Dialog");
            ab.setMessage("Successfully Logged");
            ab.setPositiveButton("OK",new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Toast.makeText(getApplicationContext(), "OK Clicked", Toast.LENGTH_LONG).show();}
            });
      ab.setMultiChoiceItems(items, itemcheck, 
                  new DialogInterface.OnMultiChoiceClickListener() {

            @Override
            public void onClick(DialogInterface dialog,
                    int which, boolean isChecked) {
                Toast.makeText(getBaseContext(), items[which] + (isChecked? "Checked" :"Unchecked"), Toast.LENGTH_SHORT).show();
                }
        });
            d = ab.create();
            }
            return d;
        }  }

    ***Xml File***

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:31:18.523

“未执行 setmultiitemselected 函数”是什么意思？

创建一个最简单的方法`AlertDialog`是：

```
CharSequence[] items = {"Google","Apple","Ms","Samsumg","Nokia"};
boolean[] itemcheck = new boolean[items.length];

new AlertDialog.Builder(this)
.setIcon(R.drawable.fb)
.setTitle("Facebook Dialog")
.setMessage("Successfully Logged")
.setPositiveButton("OK",new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        Toast.makeText(getApplicationContext(), "OK Clicked", Toast.LENGTH_LONG).show();
    }
})
.setMultiChoiceItems(items, itemcheck, new DialogInterface.OnMultiChoiceClickListener() {
    @Override
    public void onClick(DialogInterface dialog,
        int which, boolean isChecked) {
        Toast.makeText(getBaseContext(), items[which] + (isChecked? "Checked" :"Unchecked"), Toast.LENGTH_SHORT).show();
    }
})
.show(); 
```

尽管数组`itemcheck`在您当前的实现中没有任何意义！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-21T19:06:51.670

问题是，`setMultiChoiceItems`不能`setMessage`一起使用。如果您指定消息，则不会出现复选框。

# hudson - 使用 Windows 批处理文件的 hudson & bash 命令 - 窗口 7

> ID：15863251
> 
> 赞同：0
> 
> 时间：2013-04-07T14:03:08.630
> 
> 标签：hudson

我在 Windows 机器（window 7 64 位和 windows 2008 机器）上配置 Hudson 我有一个调用 bash 和 shell 脚本的批处理文件。这个 shell 脚本调用其他 shell 脚本等等。我将 hudson 作业配置为调用我的批处理文件 myBatch.bat。MyBatch.bat 文件，然后使用以下代码调用 bash 和 shell 脚本：

```
bash -u -o pipefail -c "./buildAll.ksh %BRANCH% %PREV_TAG% %NEXT_TAG% build-%NEXT_TAG%.log 2>&1 | tee "build-%NEXT_TAG%.log" 
```

我收到此错误：

> 'bash' 不是内部或外部命令、可运行程序或批处理文件。

我已经在我的 PATH 环境变量中配置了 cygwin bin 目录路径。我重新启动了哈德逊服务器。我以 java -jar Hudson.war 的身份运行 hudson

我无法执行该批处理文件。

# ruby-on-rails - 链接到搜索结果的不同视图

> ID：15863253
> 
> 赞同：0
> 
> 时间：2013-04-07T14:03:24.653
> 
> 标签：ruby-on-rails

我有一个显示 3 个搜索结果列表的页面：插图、小说和标签。我想让用户单击每个列表的链接以查看缩略图网格。我一生都无法弄清楚如何将搜索结果对象传递到新页面。我只得到插图ID的字符串。

main_controller 的搜索方法，以及我要对 show_illustrations 做的事情：

```
def search
    @search_criteria = params[:search]
    @novels = Novel.search(params[:search])
    @illustrations = Illustration.search(params[:search])
    @tags = Tag.search(params[:search])

    respond_to do |format|
      format.html #search_results.html.erb
    end
  end

 def show_illustrations
    @illustrations = params[:illustrations]
 end 
```

在搜索结果中显示插图列表的部分。即使我将 link_to 语句中的操作分配给“show_illustrations”，应用程序仍坚持调用 main 的 show 方法：

```
<% if @illustrations.size() > 0 %>
        <div class="row-fluid">
        <div class="span8">
        <h3>Illustrations</h3>
        </div>
        <div class="span4">
        <%= link_to "View", {:controller => "main", :action => "show_illustrations", :illustrations => @illustrations}, :class => "btn btn-mini"%>
        </div></div>    
            <div class="search_results well-search-results">
                <table class="table table-striped table-condensed">
                    <% @illustrations.each do |illustration| %>
                        <tr>
                            <td><%= illustration.name %></td>
                            <td><%= link_to "Show", illustration, :class => "btn btn-primary btn-mini", :style => "float:right;" %></td>
                        </tr> 
                    <% end %>
                </table>
            </div>
        <% else %>
            <h3>No Matching Illustrations</h3>
        <% end %> 
```

应该显示插图网格的页面，标题为 searched_illustrations.html.erb：

```
<div class="container">
    <div class="well padding:0px;">
    <% @illustrations.each_slice(4) do |set| %>
      <div class="row-fluid">
        <% set.each do |illustration| %>
          <div class="span3">
            <div style="text-align:center"><%= link_to image_tag(illustration.image_thumbnail_url), illustration %>
              <br />
              <%= illustration.name %><br />
              <%= link_to illustration.novel.name, illustration.novel %> - 
              <%= illustration.novel.edition %>
              <% if ! illustration.tags.empty? %>
                <br />
                <% illustration.tags.each do |tag| %>
                  <%= tag %>
                <% end %>
              <% end %>
            </div>
           <br />
          </div>
      <% end %>
      </div>
      <br \>
    <% end %>
  </div>
</div> 
```

路线.rb：

```
match 'main/show_illustrations' => 'main#show_illustrations', as: :show_illustrations 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:55:20.870

好吧，如果您更具体地了解您正在使用的搜索 gem，这将有很大帮助，但让我们假设您使用`meta_search`. `meta_search`，我相信一些其他的搜索宝石，返回一个类的对象`Search`，你需要调用该`.results`方法来获取搜索结果。

就像你不能打电话`@users = User`，你必须打电话`@users = User.all`。在这种情况下，它`@listings = Listing.search(params[:search]).results.all`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:22:03.717

这很糟糕，但这是一个解决方案：

在搜索控制器中：

```
def show_illustrations
    @arr = params[:illustrations]
    @illustrations = Array.new

    @arr.each do |id|
        illustration = Illustration.find(id)
        @illustrations << illustration
    end

    @illustrations = Kaminari.paginate_array(@illustrations).page(params[:page]).per(20)
 end 
```

# virtualization - 如何正确从 KVM 分离磁盘

> ID：15863255
> 
> 赞同：1
> 
> 时间：2013-04-07T14:03:37.177
> 
> 标签：virtualization, kvm, libvirt

当我尝试在 KVM 中分离驱动器时，出现以下错误：

# virsh 分离磁盘 vps_99 vde

错误：操作失败：无法分离磁盘 vde - 没有设备的 PCI 地址

我已经尝试过谷歌，但找不到其他有同样问题的人？？

这是我的 VPS 的 XML 转储：

```
(root@h2)-(/home/cloud)# virsh dumpxml vps_99
<domain type='kvm' id='218'>
  <name>vps_99</name>
  <uuid>42db1de2-f0d4-1030-ac57-0050560018a2</uuid>
  <memory>524288</memory>
  <currentMemory>524288</currentMemory>
  <vcpu>1</vcpu>
  <os>
    <type arch='x86_64' machine='pc-0.12'>hvm</type>
    <boot dev='hd'/>
  </os>
  <features>
    <acpi/>
    <apic/>
    <pae/>
  </features>
  <clock offset='utc'/>
  <on_poweroff>restart</on_poweroff>
  <on_reboot>restart</on_reboot>
  <on_crash>restart</on_crash>
  <devices>
    <emulator>/usr/bin/kvm</emulator>
    <disk type='block' device='disk'>
      <driver name='qemu' type='raw'/>
      <source dev='/dev/nbd1'/>
      <target dev='vda' bus='virtio'/>
    </disk>
    <disk type='block' device='disk'>
      <driver name='qemu' type='raw'/>
      <source dev='/dev/nbd2'/>
      <target dev='vdb' bus='virtio'/>
    </disk>
    <disk type='block' device='disk'>
      <driver name='qemu' type='raw'/>
      <source dev='/dev/nbd3'/>
      <target dev='vde' bus='virtio'/>
    </disk>
    <interface type='bridge'>
      <mac address='00:50:56:00:1b:24'/>
      <source bridge='br0'/>
      <target dev='vnet3'/>
      <model type='virtio'/>
    </interface>
    <input type='mouse' bus='ps2'/>
    <graphics type='vnc' port='5903' autoport='yes' keymap='en-us'/>
    <video>
      <model type='cirrus' vram='9216' heads='1'/>
    </video>
  </devices>
  <seclabel type='dynamic' model='apparmor'>
    <label>libvirt-42db1de2-f0d4-1030-ac57-0050560018a2</label>
    <imagelabel>libvirt-42db1de2-f0d4-1030-ac57-0050560018a2</imagelabel>
  </seclabel>
</domain> 
```

另一个疯狂的事情是，我指定为“vde”的驱动器作为“vdc”连接到虚拟服务器，就好像它完全忽略了我的“vde”规范一样。

如果有人能告诉我如何确保驱动器作为我指定的设备连接，我会很感激。Amazon Web Services 似乎能够做到这一点，所以我为什么不应该:)

更新：虚拟机启动后，我似乎可以毫无问题地添加和删除新磁盘。分离用于创建虚拟服务器的原始 XML 中定义的磁盘似乎只是问题。但是问题仍然存在，如何分离定义虚拟服务器时定义的磁盘？

更新2：我还尝试`<address>`为每个磁盘添加一个条目，以确保每个磁盘都连接到预定义的插槽，即 `<address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>` 但仍然无法分离磁盘，并且“virsh dumpxml vps_99”实际上显示我的条目有被完全删除/忽略。

更新 3：我还尝试将磁盘定义放入临时 XML 文件并运行：virsh detach-device vps_99 disk.xml 仍然相同的错误：错误：无法从 disk.xml 分离设备错误：操作失败：磁盘 vdi 无法分离 - 设备没有 PCI 地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:20:43.523

你可以用`libvirt`. 您必须将设备的 xml 描述作为`xlmDec`.

例如：

```
virDom.detachDevice(xmldesc) 
```

# intellij-idea - 如何保存/导出 IntelliJ IDEA 的所有设置？

> ID：15863256
> 
> 赞同：42
> 
> 时间：2013-04-07T14:03:39.733
> 
> 标签：intellij-idea

我想重新安装我的操作系统并保留**IntelliJ IDEA**设置（如颜色、缩进、检查等）。有没有办法保存我的设置以在重新安装操作系统期间保留它们？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-07T14:22:55.063

当然：`File`→ `Export Settings`。

**2020.01版本**

这现在已经过时了。你必须去 File --> Manage IDE Settings --> Export settings。您可以在文件 --> 设置 --> 插件下禁用“设置存储库”，但这似乎对您“手动”导出设置的能力没有任何影响。

在更高版本中，您似乎应该配置设置存储库或使用 IDE 设置同步插件。更多信息[在这里](https://www.jetbrains.com/help/idea/sharing-your-ide-settings.html)：

> IntelliJ IDEA 允许您在 IDE 的不同实例之间共享您的设置。如果您在不同的计算机上工作，这可以帮助您重新创建一个舒适的工作环境，并避免因外观或行为与您习惯不同的事物而烦恼。
> 
> 您可以通过以下方式之一共享您的设置：
> 
> 通过配置设置存储库。这允许您同步任何可配置的组件（启用和禁用的插件列表除外），但需要使用您要共享的设置设置 Git 存储库。如果您想在团队成员之间实施相同的设置，此选项很有用。
> 
> 通过使用 IDE 设置同步插件。它利用 JetBrains 服务器，因此无需额外配置。同步设置与您的 JetBrains 帐户相关联，因此其他用户将无法使用它们。您可以同步的设置包括：IDE 主题、键盘映射、配色方案、系统设置、UI 设置、菜单和工具栏设置、项目视图设置、编辑器设置、代码完成设置、参数名称提示、实时模板、代码样式和列表启用和禁用的插件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-07T14:46:56.603

您的所有设置都在取决于您的操作系统的配置目录中。您可以只获取整个目录。我的在我的主目录`C:\Users\Me\.IntelliJIdea12`中，只需在安装 IntelliJ 之前将其放在新操作系统的相同位置即可。这是我自己做的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-29T19:28:50.383

> 文件 --> 导出设置...

并且不要忘记备份您的`Run Configurations`!
转到您的工作区所在的位置，有一个 .idea 文件夹。（即 `/Users/matthew/codebase/.idea`：）

复制`runConfigurations`文件夹并粘贴到您的新工作区中。就是这样！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-03-09T18:25:30.710

对于新的 IntelliJ IDEA 版本`2020.03`版本：
`File`→ `Manage IDE Settings`→`Export Settings...`

[![在此处输入图像描述](https://i.stack.imgur.com/XbpmH.png)](https://i.stack.imgur.com/XbpmH.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-30T06:56:26.757

就个人而言，我发现该`Export Settings`方法对于在多平台开发环境之间传输我的设置最有效（使用 Google Drive 等外部服务来存储它们）。当然，它不像使用“设置同步”插件那么简单，但它允许您尝试更广泛的个人配置（假设您描述性地命名各种配置）。

> 文件 --> 导出设置

`runConfigurations`如上一个答案所述，使用这种方法还会增加传输数据的额外负担。然而，以增加复杂性为代价的是增加了实验的自由度。

但是，如果您只打算使用一种配置，我建议您使用同步设置插件。您可以在此处阅读有关其用法的更多信息：

[https://www.jetbrains.com/help/idea/sharing-your-ide-settings.html](https://www.jetbrains.com/help/idea/sharing-your-ide-settings.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-29T09:30:20.823

还有另一种地下方法。备份所有设置文件夹。这是一个基于 android studio 但完全适用于 intellij idea的[教程](https://practical-start.blogspot.com.eg/2016/12/changing-android-studio-settings.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-07T21:54:38.683

**IntelliJ IDEA 2021.2.2**

通过从用户配置文件 AppData\Roaming 目录下的 JetBrains\IntelliJIdea* 文件夹中复制文件，您可以在 Windows 安装之间迁移设置，而无需使用*导入/导出设置功能。*

IntelliJ IDEA 2021.2.2 将其配置保存在`%USERPROFILE%\JetBrains\IntelliJIdea2021.2`. 通常`%USERPROFILE%`是`C:\Users\<USERNAME>`，其中 <USERNAME> 是您的 Windows 用户名。

为了让其他所有内容都能更新，我只复制了选项、控制台、代码样式和划痕目录。

因此，您可以通过将这些目录恢复到新的 Windows 安装来从非活动/未启动的 Windows 安装中恢复您的 (2021.2.2) IDE 设置：

```
C:\Users\<USERNAME>\AppData\Roaming\JetBrains\IntelliJIdea2021.2\options
C:\Users\<USERNAME>\AppData\Roaming\JetBrains\IntelliJIdea2021.2\scratches
C:\Users\<USERNAME>\AppData\Roaming\JetBrains\IntelliJIdea2021.2\consoles
C:\Users\<USERNAME>\AppData\Roaming\JetBrains\IntelliJIdea2021.2\codestyles 
```

# c++ - Google pnacl：如何使用编译器/链接器

> ID：15863257
> 
> 赞同：1
> 
> 时间：2013-04-07T14:03:42.170
> 
> 标签：c++, google-nativeclient

我想使用[PNacl](http://www.chromium.org/nativeclient/pnacl/building-and-testing-portable-native-client)编译 hello_world 驱动程序；唯一的问题是我不知道将哪些选项传递给编译器。

回顾一下，这里的目的是从 .cc（C++ 文件）到 .bc（我不太了解的一些 llvm 格式），然后从那里到 .pexe。

这是我尝试的：

```
 $ TC_PATH=/opt/nacl/pepper_26/toolchain/linux_x86_pnacl/host_x86_64/bin
 $ $(TC_PATH)/clang++ hello_world.cc -o hello_world.bc -I/opt/nacl/pepper_26/include 
```

这么多的作品。现在，链接步骤失败：

```
 $ $(TC_PATH)/clang++ hello_world.bc -o hello_world
 /tmp/hello_world-l8UCWM.o: file not recognized: File format not recognized 
```

如果我做

```
 $ $(TC_PATH)/clang++ hello_world.bc -o hello_world.pexe --verbose 
```

我看到驱动程序正在尝试与我的系统链接器链接，这当然不起作用：

```
 ...
 "/usr/bin/ld" --eh-frame-hdr "
 ... 
```

我试图用这个东西挖掘一些 Makefile，但到目前为止我只找到 [了这个](http://src.chromium.org/native_client/trunk/src/native_client/tests/pnacl_ld_experiments/Makefile)，而且似乎已经过时了。我应该将哪些标志传递给工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:56:31.200

正如您在回答中提到的，SDK 中的 Makefile 支持调用 pnacl 编译器。所有面向用户的工具都在 `$(SDK_ROOT)/toolchain/linux_x86_pnacl/newlib/bin` Windows 或 Mac 上或其等效工具中。当像普通的编译器/链接器驱动程序`pnacl-clang`（和`pnacl-clang++`）一样使用时，编译时会生成可移植的目标文件，链接时会生成可移植的可执行文件（称为 .pexe 文件）。您可以使用该`pnacl-translate`工具将 pexe 转换为 x86-64、x86-32 或 arm 本机客户端可执行文件 (nexe)，其使用方式与 nacl-gcc 生成的 nexe 文件相同。很快还将支持直接使用 pexe 文件进行浏览器内翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:22:11.850

好的，这就是我找到的。首先，与 SDK 一起分发的新 Makefile 确切地知道如何进行整个构建......我还没有找到那些。基本上调用的 clang++`$(SDK_ROOT)/toolchain/linux_x86_pnacl/newlib/bin/pnacl-clang++`不是 at 的那个`host_x86_64`。

# php - 将数组从一台服务器传递到另一台服务器

> ID：15863260
> 
> 赞同：0
> 
> 时间：2013-04-07T14:04:14.257
> 
> 标签：php, json

我有一个数组，用于存储 www.website1.com 上的用户登录信息。当用户登录 www.website1.com 时，我需要将用户连同数组中的信息（用户名、密码等）一起发送到 www.website2.com。

**这是在 www.website1.com 上设置的数组**

```
$user = [
"user_name"=>$_POST["user_name"],
"user_pass"=>$_POST["user_pass"],
"from"=>$result["domain_id"]
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:18:28.527

您可以创建一个表单，其动作指向您要重定向用户的 url。在表单输入中包含您要发送的数据。最后发送表格。这可以使用 javascript 完成，无需任何用户操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:09:40.473

**第一个服务器（www.website1.com）：index.php**

```
<?php
session_start();
$api_key = "ChowKiKo";
//First Server: index.php
    if(isset($_SESSION['username'])) {
            //-----------Server2 Validation--------------
        //Validate if the Server2's api_key is the same as my api_key
        if(isset($_POST['api_key']) && $_POST['api_key'] == $api_key) {
            //lets use methoding
            if(isset($_POST['method']) && $_POST['method'] == 'getUserInfo') {
                switch($_POST['method']) {
                    case 'getUserInfo':
                        $arr = array('username' => $_POST['username'], 'password' => $_POST['password'], 'from' => "http://www.website2.com");
                        echo json_encode($arr);
                        break;
                    case 'getUserPost':
                        //mysql_query()...[code here and echo the value]
                        break;
                    case 'getUserFriends':
                        //the same thing here
                        break;
                }
            }
        }
    }else {
        ?>
        <html>
            <head>Sample jSON with cURL</head>
            <body>
                <!-- Login Options -->
                <form method="post" action="index.php">
                    <input type="text" name="username" />[...]
                </form>
            </body>
        </html>
        <?php
    }
?> 
```

**第二服务器（www.website2.com）：index.php**

```
<?php
//Second Server: index.php

      $api_key = 'ChowKiKo'; // Your API key.
      $server1 = 'http://www.website1.com'
      //$sessid = '9999your9999sess9999id'; // Your session ID.

      //starting cURL
      $ch = curl_init();
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
      curl_setopt($ch, CURLOPT_POST, 1);
      curl_setopt($ch, CURLOPT_URL, $server1);

      //prepare the field values being posted to the service
      $data = array(
        'method' => '"getUserInfo"', 
        'api_key' => '"'. $api_key .'"', 
        //'sessid' => '"'. $sessid .'"', 
        //'arg1' => '"some value"', 
        //'arg2' => '"somevalue"', 
        //'argN'=>'"another value"',
      );

      // POSTFIELD like GET process but processing internally with www.website1.com/index.php?method=getUserInfo&api_key=ChowKiko
      curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

      //make the request
      $result = curl_exec($ch);

      //print the jSON of the Server1, else it will return false.
      echo $result;
?> 
```

# c# - 正则表达式。替换标点符号

> ID：15863261
> 
> 赞同：2
> 
> 时间：2013-04-07T14:04:31.477
> 
> 标签：c#, .net, regex

我有以下输入字符串

```
some text ) more text
some text , more text
some text ! more text
some text ; more text
some text ? more text
some text . more text
some text)more text
some text,more text
some text!more text
some text;more text
some text?more text
some text.more text
some text )more text
some text ,more text
some text !more text
some text ;more text
some text ?more text
some text .more text 
```

我正在使用 Regex.Replace 方法希望得到

```
some text) more text
some text, more text
some text! more text
some text; more text
some text? more text
some text. more text
some text) more text
some text, more text
some text! more text
some text; more text
some text? more text
some text. more text
some text) more text
some text, more text
some text! more text
some text; more text
some text? more text
some text. more text 
```

但我的字符串保持不变。

这是我的课：

```
public class PunctionationSignsSpaceing : ILanguageRuleFormater
    {
        private string _pattern;
        public PunctionationSignsSpaceing()
        {
            _pattern ="( *[),!;?.] *)";
        }
        public string FormatString(string str)
        {
            str = Regex.Replace(
                str,_pattern,"$1",
                RegexOptions.Multiline|RegexOptions.Compiled
            );
            return str;
        }
    } 
```

我在这里做错了吗？（我对正则表达式有点陌生。）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:09:32.720

您的正则表达式无效。您正在用自己替换整个匹配项，这就是为什么您在结果字符串中看不到任何变化的原因。

试试那个：

```
public class PunctionationSignsSpaceing
{
    private string _pattern;
    public PunctionationSignsSpaceing()
    {
        _pattern = " *([),!;?.]) *";
    }
    public string FormatString(string str)
    {
        str = Regex.Replace(
            str, _pattern, "$1 ",
            RegexOptions.Multiline | RegexOptions.Compiled
        );
        return str;
    }
} 
```

您还应该考虑将`_pattern`初始化从对象构造函数移动到字段本身：

```
public class PunctionationSignsSpaceing
{
    private string _pattern = " *([),!;?.]) *";

    public string FormatString(string str)
    {
        str = Regex.Replace(
            str, _pattern, "$1 ",
            RegexOptions.Multiline | RegexOptions.Compiled
        );
        return str;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:39:33.287

这是一个不使用正则表达式的解决方案

```
public static void Main (string[] args)
{
    char[] punctiationMarks = new char[]{'.', ',', '?', '!', ';', ')'};
    string inputString = "foo; bar;foo ,  bar , foo\nbar, foo ) bar foo  )bar";
    StringBuilder outputString = new StringBuilder ();
    int indexOfPunctuationMark = -1;
    inputString
        .Split (punctiationMarks, StringSplitOptions.None)
        .ToList ()
            .ForEach (part => {
                indexOfPunctuationMark += part.Length + 1;
                outputString.Append (part.Trim ());
                if (indexOfPunctuationMark < inputString.Length)
                    outputString.Append (inputString [indexOfPunctuationMark]).Append (" ");
            }
    );

    Console.WriteLine (outputString);
} 
```

# php - MySQL 查询在 phpmyadmin 中工作，但在带有 PDO 的 php 中不工作

> ID：15863266
> 
> 赞同：-2
> 
> 时间：2013-04-07T14:05:04.557
> 
> 标签：php, mysql, pdo, phpmyadmin

当我在其中运行此查询时，`phpmyadmin`它运行良好并返回它应该返回的内容。
当我运行它时`php`它`PDO`失败了。有人能告诉我为什么吗？错误消息显示使用了正确的参数。

我运行的代码`phpmyadmin`。

```
SELECT  `fd1`.`id` ,  `fd2`.`id` ,  `fd3`.`id` 
FROM  `food` AS  `fd1` ,  `food` AS  `fd2` ,  `food` AS  `fd3` 
WHERE  `fd1`.`food` =  'Empty'
AND  `fd2`.`food` =  'Carrot'
AND  `fd3`.`food` =  'Empty' 
```

我运行的代码`php`

```
$sql = 'SELECT  `fd1`.`id` ,  `fd2`.`id` ,  `fd3`.`id` 
        FROM  `food` AS  `fd1` ,  `food` AS  `fd2` ,  `food` AS  `fd3` 
        WHERE  `fd1`.`food` = ? 
        AND  `fd2`.`food` = ? 
        AND  `fd3`.`food` = ?'; 
$stmt = $db->prepare($sql);
$stmt->bindParam(1, $food1, PDO::PARAM_STR);
$stmt->bindParam(2, $food2, PDO::PARAM_STR);
$stmt->bindParam(3, $food3, PDO::PARAM_STR);
$stmt->execute();

if (!$stmt->rowCount())
    die("ERROR:FOOD_SEARCH_FAILURE food:$food1, $food2, $food3 rows returned". $stmt->rowCount()); 
```

我还尝试使用以下命令运行它：

```
$stmt->execute(array($food1, $food2, $food3)); 
```

相同的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:10:22.190

[对于大多数数据库， rowCount](http://www.php.net/manual/en/pdostatement.rowcount.php) () 不会返回受 SELECT 语句影响的行数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:17:01.113

首先，按照[PDO 标签 wiki](https://stackoverflow.com/tags/pdo/info)中描述的方式连接到 PDO，并设置错误报告**以**确保您会看到发生的任何错误。
在查询中**故意**出错以测试您是否可以看到它们。

接下来，如果没有错误 - 检查数据库和绑定变量中的数据（您的代码中没有任何地方定义它们）

# vsto - 如何使用 InstallShield 正确重新分发 Visual Studio 2010 Tools for Office Runtime？

> ID：15863267
> 
> 赞同：2
> 
> 时间：2013-04-07T14:05:17.493
> 
> 标签：vsto, add-in, installshield, redistributable

使用：VS 2012、InstallShield 2012 Spring Express

对于我的 Excel 加载项，我需要重新分发到先决条件： - Microsoft .NET Framework 4.5 Full - Visual Studio 2010 Tools for Office Runtime

无论如何，.NET Framework 都没有问题。我通过设置或网络下载重新分发它。一切都好。

但是使用 VSTO 我遇到了一些麻烦：1）“网络下载”无法正常工作。即使我使用这个建议 - [http://msdn.microsoft.com/en-us/library/vstudio/cc442767.aspx#Configure](http://msdn.microsoft.com/en-us/library/vstudio/cc442767.aspx#Configure)

毕竟，我下载了 vstor_redist.exe (~40 Mb) 并将其添加到安装程序中。2）安装程序开始安装vstor_redist.exe，真的做到了！但后来我看到一条奇怪的 InstallShield 消息，表明 VSTO 安装似乎失败了。然而，安装后应用程序正常工作。

两个问题：如何通过网络下载选项重新分发 VSTO？如何避免出现无用的“安装失败消息”？看来这些是 InstallShield 错误...

罗马

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-23T22:34:59.143

在我的情况下（Windows 8 x64 - Office x64 - Installshield LE Beta VS2012/13）：先决条件（VSTO_Redist.exe）检查的注册表项是错误的。检查我的安装的实际关键是：“HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VSTO Runtime Setup\v4R” 我还根据 VSTO 下载的链接更新了文件 CheckSum 和文件版本：URL="http:// go.microsoft.com/fwlink/?LinkId=158918"（此链接在 Bootstrap for Publishing 中提供）。

对我有用的详细编辑的先决条件文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<SetupPrereq>
<conditions>
    <condition Type="32" Comparison="2" Path="HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VSTO Runtime Setup\v4R" FileName="Version" ReturnValue="10.0.40820.0" Bits="2"></condition>
</conditions>
<files>
    <file LocalFile="&lt;ISProductFolder&gt;\SetupPrerequisites\VSTOR\vstor_redist.exe" URL="http://go.microsoft.com/fwlink/?LinkId=158918" CheckSum="197e479106a8b976fe584706657b4756" FileSize="0,40058880"></file>
</files>
<execute file="vstor_redist.exe" returncodetoreboot="1641,3010" requiresmsiengine="1">
</execute>
<properties Id="YOUR GUID GOES HERE" Description="This prerequisite installs the most recent version of the Microsoft Visual Studio 2010 Tools for Office Runtime." >
</properties>

</SetupPrereq> 
```

您需要将“YOUR GUID GOES HERE”替换为使用工具菜单中的工具生成的 GUID。（有关更新先决条件的方法，请参阅帮助文件： http: [//msdn.microsoft.com/en-us/library/cc442767 (v=vs.110).aspx）](http://msdn.microsoft.com/en-us/library/cc442767(v=vs.110).aspx)

上面提到的帮助文件对 x64 构建也有错误的建议。注册表项建议：“如果您正在为 64 位版本的 Office 创建安装程序，则整个层次结构为 HKEY_USER_SELECTABLE\Software\Wow6432Node\Microsoft\Office\Excel\Addins\SampleCompany.ExcelAddIn。” 实际上适用于所有用户，x86 Office 在 x64 Windows 中运行。

可以在以下位置找到要使用的正确注册表项： [VSTO 加载项控件不会自动出现](https://stackoverflow.com/questions/8605499/vsto-add-in-control-does-not-appear-automatically)

最后：InstallShield LE Beta 版本 VS2012/13 将根据 a) [INSTALLDIR] 文件夹（即：在 x64 Windows 中是“Program Files”还是“Program Files (x86)”）或如果任何组件被定义为 64 位。有关详细信息，请参阅 InstallShield 帮助文件（在索引中查找“64 位”）。InstallShield LE 不公开用于确定 InstallShield 完整版本中的 x86 或 x64 目标的属性“模板摘要代码”。

我希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T17:05:52.577

它显示该消息是因为安装后条件仍然失败，很可能是由于 32 位或 64 位操作系统上的路径差异（正如@AlBear 指出的那样）。如果您同时针对两者，则可以为 Install Shield LE 创建 2 个 pre-req 文件，每个文件都有自己的操作系统条件检查位数。将两个 pre-reqs 添加到您的单个安装程序中，并且只有适当的一个会执行（基于操作系统条件）：

32 位

```
<conditions>
    <condition Type="32" Comparison="2" Path="HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VSTO Runtime Setup\v4R" FileName="Version" ReturnValue="10.0.40309" Bits="2"></condition>
    <operatingsystemconditions>
        <operatingsystemcondition Bits="1"/>
    </operatingsystemconditions>
</conditions> 
```

64 位

```
<conditions>
    <condition Type="32" Comparison="2" Path="HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VSTO Runtime Setup\v4R" FileName="Version" ReturnValue="10.0.40309" Bits="2"></condition>
    <operatingsystemconditions>
        <operatingsystemcondition Bits="4"/>
    </operatingsystemconditions>
</conditions> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:51:23.620

我有时会看到 InstallShield 提供的 .PRQ 文件变成 OBE（被事件克服）。例如，我看到 Microsoft 重新发布了一个 redist 并保持 URL（fwlink）相同。然而，PRQ 是针对文件的旧版本编写的，导致文件大小和/或文件哈希变得无效。还有一个工件被搜索、评估以确定是否需要安装并重新评估以确认安装是否成功。

所以基本上将 PRQ 文件发送到 Prereq Editor 工具并验证它的所有假设仍然正确。根据需要进行修改。

# git - 如何在 RubyMine 中更改过去的 git commit+push 消息？

> ID：15863269
> 
> 赞同：10
> 
> 时间：2013-04-07T14:05:36.653
> 
> 标签：git, bitbucket, rubymine

我不小心给出了错误消息，并使用 RubyMine 推送了一个提交。有什么办法可以纠正吗？RubyMine 方式最好不要弄乱 git，但也欢迎其他受信任的方式。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T19:21:07.870

正如你所说，你已经推送了，所以不要更改提交消息是明智的。这样做的原因是提交将获得另一个哈希，这使 git 认为您已经推送的提交和您更改的提交消息的提交是不同的。那很不好！您可以强制推送，`git push -f`如果您单独工作，那绝对可以，但如果您是团队工作，我建议您不要更改该提交消息。

对于其他任何事情，请看这里：[如何修改现有的、未推送的提交？](https://stackoverflow.com/questions/179123/how-do-i-edit-an-incorrect-commit-message-in-git?lq=1)

# c# - 用我自己的安装文件夹对话框替换 Visual Studio 安装项目中的安装文件夹对话框？

> ID：15863276
> 
> 赞同：0
> 
> 时间：2013-04-07T14:06:16.530
> 
> 标签：c#, visual-studio-2010, windows-installer, setup-project, setup-deployment

如您所知，在创建**Visual Studio 安装项目**时（使用 msi 文件作为输出）。在**用户界面**窗口中，有一个名为“**安装文件夹**”的对话框。我想装饰这个对话框（比如改用 Office 2007 样式的表单）...我想我必须从**用户界面中删除那个丑陋的默认对话框，并在自定义****安装程序**类中显示我自己的对话框。但是**我不知道如何将用户选择的路径传递给默认安装程序。**我的意思是我不想自己定制和做所有事情（这既不容易也没有必要）但我只想使用我的瘦对话框，这个对话框应该知道**如何将选定的安装路径传递到**安装过程的“下一阶段”。

我希望你能理解我的问题并帮助我。事实上，如果我们在处理 Visual Setup 项目时知道如何做同样的事情，我们可以对它们进行更多定制以构建不同的设置项目。

您的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:20:34.613

我的回答是**，** Visual Studio 安装项目根本不适合这个。它也已**停止使用**：请参阅： [使用 Visual Studio 2012 创建 MSI 或设置项目](https://stackoverflow.com/questions/12378125/create-msi-or-setup-project-with-visual-studio-2012)

我建议转移到[WiX 工具集](http://wixtoolset.org/)或 InstallShield。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-11T07:39:52.637

转到文件系统编辑器（在解决方案资源管理器中选择安装程序项目，单击文件系统编辑器，您将在解决方案资源管理器面板中看到额外的选项）。选择“应用程序文件夹”按 F4 或右键单击并选择属性。那里编辑默认位置。

# c++ - 从指针向量向量中释放内存

> ID：15863279
> 
> 赞同：0
> 
> 时间：2013-04-07T14:06:43.420
> 
> 标签：c++, pointers, memory, vector

我正在创建一个粒子物理模拟器，我需要进行适当的内存管理。

我发现我的方法一次传播几个粒子很方便，所以这个方法返回一个轨迹向量，每个轨迹是一个 Steps 向量（因此得到 a `vector< vector<> >`）。

（Step 是我创建的一个类。）

```
vector< vector<Step*> > Propagator::Propagate (vector<TParticle*> vpart) {
  vector< vector<Step*> > = vvsteps;
  //vvsteps goes through physics and gets filled using push_back
  //all of vvsteps' entries were filled with objects created with "new"

  return vvsteps;
} 
```

每个 Step 创建一个指向 TParticle 的指针向量（使用 new 创建），并具有以下析构函数来释放它。

```
vector<TParticle*> vpart;

Step::~Step() {
  for(int i=0; i<vpart.size(); i++) delete vpart[i];
  vpart.clear();
} 
```

在我得到我想要的东西后，我尝试通过执行以下操作来释放整个事情：

```
vector< vector<Step*> > vvstep = prop->Propagate(vpart);

/*PHYSICS GOES HERE*/

for(int i=0; i<vvstep.size(); i++) {
  for(int j=0; j<vvstep[i].size(); j++)
    delete (vvstep[i])[j];
  vvstep[i].clear();
}
vvstep.clear(); 
```

由于某种原因，此代码不起作用。它给了我以下错误

```
*** glibc detected *** bin/rtest.exe: double free or corruption (fasttop): 0x0f7207f0 *** 
```

编辑：更正了一个错字，该类名为 Step 而不是 Steps。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:10:11.517

将向量类型的向量更改为：

```
`std::vector< std::vector<std::unique_ptr<Step>>>` 
```

这做了几件事。首先，它会阻止复制您`std::vector`的 s，这很糟糕，因为这样的向量代表所有权和对数据的引用。

`move`仍然可用，并且通常应该发生。如果您想将一组向量向量移动到另一个位置，并且它不会自动发生，请插入一个`std::move( src )`.

其次，当数据超出范围时，会`vector`自动清理对象。`vector``unique_ptr``Step`

在调用直接采用 a 的函数的情况下，您可能必须插入一些`.get()`调用。但否则它应该是透明的。`unique_ptr<Base>``Base*`

请注意，可能会发生双重删除，因为您复制了其中一个`vector`-`Base*`当`std::vector<std::unique_ptr<Base>>`您尝试这样做时会抱怨...

# .htaccess - 用.htaccess 重写url 上的目录？

> ID：15863281
> 
> 赞同：0
> 
> 时间：2013-04-07T14:07:09.967
> 
> 标签：.htaccess, url

在我的网站上，我有一个 /profile.php。

我还有一个名为 /profile/ 的目录。

我想知道是否可以使用 .htaccess 重写

“/个人资料/[用户名]”

成为

"/profile?name=[用户名]"

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:32:47.913

既然你有一个文件`/profile.php`，我相信你想将它重定向到`/profile.php?name=[username]`而不是`/profile?name=[username]`

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^profile/([^/]+)/?$ /profile.php?name=$1 [L,QSA,NC] 
```

如果您仍想重定向到，`/profile?name=[username]`您可以将上述规则更改为`/profile?name=$1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:02:36.533

试试这个：

```
Options +FollowSymlinks
RewriteEngine on

RewriteRule ^profile/([a-z0-9-_]+)/?$ /profile?name=$1 [QSA,NC] 
```

# java - 从配置单元导出数据时如何转换某些列？

> ID：15863285
> 
> 赞同：0
> 
> 时间：2013-04-07T14:07:43.787
> 
> 标签：java, hadoop, export, hive

例如，我有一些数据，例如：`a|b|c|/r/n`并且我想将列转换`'/r/n'`为 `' '`. 蜂巢能做到吗？从 Hive 导出时，某些`null`列将导出到`/r/n`，所以我想更改`'/r/n'`为`''`. 我有很多数据要导出，因此我想在 Hive 中进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:56:41.303

[如果](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-ConditionalFunctions)column4 等于 '/r/n' 替换为 '' 如下所示。

```
 select if(col4='/r/n','',col4) from table1 
```

# linq - LINQ中的左连接和过滤子元素

> ID：15863291
> 
> 赞同：0
> 
> 时间：2013-04-07T14:08:17.113
> 
> 标签：linq, filter, entity, left-join

我有以下实体：

```
student (
    studentID int,
    name string
)

subject (
    ....
    studentID int,
    passed bit,
    date date
) 
```

我想要一个表格来显示所有学生的列表以及学生在 2012 年可以通过的科目数量。

然后我创建了以下 linq，但失败了。

```
(from x in db.student
     join y in db.subject on x.studentID equals y.studentID into z
 from s in z.DefaultIfEmpty() where s.date.Year.Equals(2012)
     select new { 
        x.studentID,
        x.name,
        SubjectPassCount = y.passed.Equals(true).Count
}).Distinct() 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:17:13.470

尝试这个

```
var results = 
    (from x in db.student
     join y in db.subject.Where(s => s.date.Year == 2012 && s.passed)
       on x.studentID equals y.studentID into z
     select new 
     { 
          x.studentID,
          x.name,
          SubjectPassCount = z.Count()
     })
    .Distinct() 
```

或者可能

```
var results = 
    (from x in db.student
     join y in db.subject
       on new { x.studentID, 2012, true } equals new { y.studentID, y.date.Year, y.passed } into z
     select new 
     { 
          x.studentID,
          x.name,
          SubjectPassCount = z.Count()
     })
    .Distinct() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:17:39.550

我会多`where`一点条件。您还需要`group by`声明来计算每个学生的科目数。

```
(from x in db.student
 join y in db.subject.Where(s => s.date.Year == 2012 && s.passed == true) on x.studentID equals y.studentID into z
 from s in z.DefaultIfEmpty()
 group new {x, s} by new { x.studentID, x.name } into g
 select new { 
     g.Key.studentID,
     g.Key.name,
     SubjectPassCount = g.Where(gi => gr.s != null).Count()
}).Distinct() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:18:14.580

如果有一个导航属性`student.subjects`，它可能很简单

```
from x in db.student
     select new { 
        x.studentID,
        x.name,
        SubjectPassCount = x.subjects.Where(s => s.passed && s.Year == 2012)
                                     .Count()
     }) 
```

（或者`x.subjects.Count(s => s.passed && s.Year == 2012)`至少在 EF 5 中受支持）。

# java - 尝试正则表达式匹配 Processbuilder 输出时出现异常

> ID：15863292
> 
> 赞同：1
> 
> 时间：2013-04-07T14:08:20.333
> 
> 标签：java, processbuilder

我有以下代码：

```
private void GetInfo(String src) throws IOException{

        Scanner scan = new Scanner(System.in);          
        String filename = new File(src).getName();

        ProcessBuilder builder = new ProcessBuilder("/Users/Daim/Desktop/process", src);
        builder.redirectErrorStream(true);
        Process process = builder.start();
        final InputStream is = process.getInputStream();

            new Thread(new Runnable() {
                String line;
                @Override
                public void run() {
                    try {
                        BufferedReader br = new BufferedReader(new InputStreamReader(is));
                        while ((line = br.readLine()) != null) {
                            System.out.println(line);
                        }

                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                    Pattern p = Pattern.compile("least");
                    Matcher m = p.matcher(line);

                    //System.out.println("match");

                }

            }).start();
    } 
```

由于“Matcher m = p.matcher(line);”而出现异常：

```
Exception in thread "Thread-1" java.lang.NullPointerException
    at java.util.regex.Matcher.getTextLength(Matcher.java:1234)
    at java.util.regex.Matcher.reset(Matcher.java:308)
    at java.util.regex.Matcher.<init>(Matcher.java:228)
    at java.util.regex.Pattern.matcher(Pattern.java:1088)
    at Wds$2.run(Wds.java:152)
    at java.lang.Thread.run(Thread.java:722) 
```

为什么我会收到此异常？我猜是因为变量线路很忙？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T14:10:30.567

此行在循环后调用，当`line`为空时。

```
Matcher m = p.matcher(line); 
```

您应该将此行添加到循环中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T14:10:46.607

您的`while`循环只会在`line`为空时停止循环。

你不能调用`matcher()`null。

# java - 如何在 Eclipse 中编辑工作区的位置？

> ID：15863305
> 
> 赞同：2
> 
> 时间：2013-04-07T14:09:35.197
> 
> 标签：java, eclipse, workspace

由于我之前是新手，所以我不明白工作空间是什么。我认为每个项目都会有一个工作区。我将我的工作区放在我正在处理的项目的文件夹中。有什么办法可以更改我的工作区的文件位置，这样我就不会将它放在第一个项目的文件夹中，而是放在更好的地方，比如我的编程文件夹的根文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:10:45.717

菜单中的文件选项下应该有一个选项来更改工作空间。

文件 > 切换工作区

![在此处输入图像描述](https://i.stack.imgur.com/Wl2eJ.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:40:58.127

要移动工作区，您只需移动其文件夹。

但是，您的工作区中似乎有不在工作区文件夹中的项目。在这种情况下，您可以根据需要移动项目以创建所需的文件夹层次结构，然后将工作区移动到所需的位置。要移动项目，请选择项目并使用 Refactor | 移动菜单命令。

另一种选择是删除工作区（通过删除它的隐藏 .metadata 子文件夹）并创建一个新的。但是，您会丢失所有工作区设置。

# javascript - 单击通知时打开弹出窗口

> ID：15863323
> 
> 赞同：1
> 
> 时间：2013-04-07T14:11:04.453
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

是否可以在[桌面通知](https://developer.chrome.com/extensions/notifications.html)的上下文中单击打开扩展弹出窗口？请参见下面的示例代码：

```
var notification = window.webkitNotifications.createNotification();

notification.addEventListener('click', function() {
    notification.cancel();
    // TODO: trigger extension popup open here.
});
notification.show(); 
```

值得一提的是：实际通知是由扩展事件页面创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:49:35.377

不，尚无以编程方式打开弹出窗口的方法。

不过，您*可以*在同一页面上打开一个新选项卡。

# android - 每当有新数据可用时，状态栏通知

> ID：15863326
> 
> 赞同：0
> 
> 时间：2013-04-07T14:11:14.680
> 
> 标签：android, notifications

我在互联网上想了很多。最后，在这里我要向你们寻求帮助：

我正在开发一个 Android 应用程序，只要我的网络服务器上有新数据，我就必须通过“**状态栏通知”通知用户。**

我曾想过在 Android 设备上运行一项服务并不断 ping 网络服务器，以查找是否有新数据可用。

请建议，这是这样做的方法还是有另一种更好的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:15:30.207

您正在寻找的有时称为[推送通知](http://en.wikipedia.org/wiki/Apple_Push_Notification_Service)。这在 android 设备上通常是使用新的[谷歌云消息来实现的](https://developer.android.com/google/gcm/index.html)

您使用它来通知您的 android 应用您的服务器有新数据，然后从您的服务器获取它。

您可能还想查看[这个问题](https://stackoverflow.com/questions/1378671/push-notifications-in-android-platform)，该问题也与 android 中的推送通知有关。

# excel - MS Excel 2007 条件

> ID：15863328
> 
> 赞同：1
> 
> 时间：2013-04-07T14:11:24.877
> 
> 标签：excel

在 MS Excel 2007 中创建条件和公式时，我的知识有限。我想问一下我是否可以为这个问题创建解决方案：

我在 A 列有就业状态，它是 C（合同）或 R（对于普通员工）然后我在 B 列有员工职位级别的工作类别，对于合同员工（Jr、Mid、Sr）是选择或价值下拉列表的值，对于普通员工，下拉列表的值为（A，B，C）。

我想要发生的是，当我选择在就业状态（A 列）中选择或输入“C”然后我单击 B 列，应该显示的下拉列表的选项是 Jr、Mid、Sr。当 R是应显示的输入值 A、B、C。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:20:15.767

您需要根据 A 列中的选项创建命名范围。

例如。在新工作表上创建`Jr, Mid, Sr`A1 到 A3 中的值，然后添加一个名为`C`. `A, B, C`对B1 到 B2执行相同操作并添加一个命名范围`R`。

最后在列表下拉选项中输入`=INDIRECT(A1)`，这应该是指您选择的命名范围。

如果不止一个单元格，您可能不得不尝试拖动/复制。

**编辑：**[**这里**](http://www.contextures.com/xlDataVal02.html)有很多例子和信息。

# c# - 使用 eventwaithandle 进行调度

> ID：15863330
> 
> 赞同：0
> 
> 时间：2013-04-07T14:11:30.133
> 
> 标签：c#, multithreading, job-scheduling, event-wait-handle

您好我正在尝试使用 EventWaitHandle 类创建调度的实现

举个例子：

```
// Program 1
static void Main(string[] args)
{
    EventWaitHandle wh = new EventWaitHandle(false,EventResetMode.ManualReset,"MyCrossProcessEventHandle");
    wh.Set();
}

// Program 2
static void Main(string[] args)
{
    EventWaitHandle wh = new EventWaitHandle(false, EventResetMode.ManualReset, "MyCrossProcessEventHandle");

    while (true)
    {
        var span = CalculateSpan();

        wh.WaitOne(span);

        // TODO Implement check, why did execution proceed? 
        // timeout ocurred
        // OR
        // Eventhandle was set
        //
        // if timeout occured
        // break the current iteration loop (And thereby calculate a new timeout)
        //
        // if event.set
        // continue execution

        // SNIP SNIP - More code here
    }
}

private static int CalculateSpan()
{
    DateTime datetoRun = new DateTime(2020,01,01,00,00,00);

    var span = datetoRun - DateTime.Now;

    if (span.TotalMilliseconds >= int.MaxValue)
    {
        return int.MaxValue;
    }

    return (int)span.TotalMilliseconds;
} 
```

**阅读代码中的待办事项**

归结为：所以我希望能够安排超过 int.MaxValue 的执行，并手动强制执行跨进程

也许是实现完全相同场景的更简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:22:29.630

如果您所追求的只是在做某事之前等待一段时间，那么您可以使用：

*   `Thread.Sleep`
    *   不推荐，因为这会阻塞线程并且通常被认为是不好的做法（除非你在一个单独的线程上你可以阻塞）
*   `Timer`
    *   最常见的解决方案，因为它支持异步触发计时器事件，因此它不会干扰您的主线程等。

您也可以只启动一个新线程 /`Task`并在做某事之前等待一段时间：

```
Task.Factory.StartNew(() =>
{
   Thread.Sleep(CalculateSpan());
   // Do something here because the time to wait has passed now
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T06:34:37.930

阅读文档（DOH）后，我找到了解决方案

```
 // Summary:
    //     Blocks the current thread until the current System.Threading.WaitHandle receives
    //     a signal, using a 32-bit signed integer to specify the time interval.
    //
    // SNIP SNIP
    //
    // Returns:
    //     true if the current instance receives a signal; otherwise, false.
    //
    // SNIP SNIP
    public virtual bool WaitOne(int millisecondsTimeout); 
```

# javascript - Bootstrap Typeahead Regex——允许空格

> ID：15863332
> 
> 赞同：1
> 
> 时间：2013-04-07T14:11:36.903
> 
> 标签：javascript, jquery, regex, twitter-bootstrap

此正则表达式与此[示例](http://twitter.github.io/bootstrap/javascript.html#typeahead)中所示的搜索查询匹配...

```
var query = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
  return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
    return '<strong>' + match + '</strong>'
}) 
```

如何更改它以使其最后允许空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:08:10.823

正则表达式匹配除了末尾的所有空白字符（使用前瞻）：

> ((?!\s+$)[\s])+

或者匹配最后一个空格字符以外的所有字符：

> ((?!\s$)[\s])+

# javascript - 使用 jQuery 动画元素并调用 stop()

> ID：15863337
> 
> 赞同：0
> 
> 时间：2013-04-07T14:12:31.813
> 
> 标签：javascript, jquery, mouseevent, mouseover

在我的导航中，当鼠标悬停时，元素会变得更高。当快速将鼠标移入和移出元素时，它会导致问题。我在网上搜索并找到了某种解决方案，即 jQuery`stop`方法。我试过了，但没有得到很好的工作。

当您将鼠标缓慢移到`li`元素上并移出时，它可以正常工作（动画会结束），但是当您将鼠标移动得更快时，它会失败。

[这是代码和结果。](http://jsfiddle.net/HAdPQ/)

可能有什么问题？

如果我想将文本从底部保持 10 px 怎么办？我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:15:00.977

[停止](http://api.jquery.com/stop/)接受两个参数。

*   一个布尔值，指示是否删除排队的动画

*   一个布尔值，指示是否立即完成当前动画

您需要添加这 2 个参数以使其按预期工作：

```
$(element).stop(true, true).animate({..... 
```

[**更新的演示**](http://jsfiddle.net/HAdPQ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:24:37.470

您可以使用[jQuery hoverintent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)。

```
$("nav").hoverIntent( makeTall, makeShort, 'li' ) 
```

处理 CSS 的函数在哪里`makeTall`以及在哪里。`makeShort`

# java - 如何输出 <> 符号而不是 <

> ID：15863342
> 
> 赞同：0
> 
> 时间：2013-04-07T14:13:25.007
> 
> 标签：java, jsoup

可能我使用了错误的方法，但是将 Javascript 插入到我的文档中，因为我没有得到我的预期输出这是我的代码

```
String serachBoxLeft = "<script type='text/javascript' src='http://website/SearchBox/75070'></script>";
try{
Element search = doc.getElementById("hc_checkPrices").empty();
search = search.appendText(serachBoxLeft);
}catch (Exception e){

}

System.out.println(search); 
```

我得到的输出是

```
<div id="hc_checkPrices" class="hc_m_v2">
  &lt;script type='text/javascript' src='http://website/SearchBox/75070'&gt;&lt;/script&gt; 
</div> 
```

它触发了 <> 括号的代码

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:18:05.403

如果方法名是`appendText()`很明显的，它将给定的字符串视为文本，而不是 HTML 片段。改用[`Element.append(String html)`方法](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#append%28java.lang.String%29)。

# android - JVoiceXML 解释器的 Android 配置

> ID：15863345
> 
> 赞同：2
> 
> 时间：2013-04-07T14:13:50.333
> 
> 标签：android, vxml

我想问一个关于这里另一个问题中提到的代码行的问题：[How to Avoid ANR in Standalone android Service](https://stackoverflow.com/q/10679315/2254541)

我的问题是关于这条线：

```
AndroidConfiguration config = new AndroidConfiguration(); 
```

因为我想使用 JVXML 解释来制作一个 Android 应用程序，但到目前为止我不知道如何获取此配置，所以我必须将其作为参数放在以下行中：

```
jvxml = new JVoiceXmlMain(config); 
```

我想我的问题应该针对问链接问题的 Marakatu 先生，但我在这个网络上没有看到任何 PM 系统。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T03:37:08.527

在 JVoiceXML 项目经理的帮助下，我们为 Android 制作了一个功能正常的 JVoiceXML 文本客户端。当前版本在 android[存储库分支](http://sourceforge.net/p/jvoicexml/code/4088/tree/branches/android/)中可用。

其中包`org.jvoicexml.client.android`是客户端本身，配置类包含在里面的源文件夹中。

# web - “immediate_failed” - 无法自动登录用户

> ID：15863349
> 
> 赞同：12
> 
> 时间：2013-04-07T14:14:18.383
> 
> 标签：web, google-plus

当我使用 Google+ 登录开发我的网站时遇到问题：我按照文档告诉我的步骤一步一步进行操作，但我在第 4 步总是失败： [https ://developers.google.com/+/web/signin/](https://developers.google.com/+/web/signin/)

结果总是“”immediate_failed“ - 无法自动登录用户”，我只是不知道为什么，谁能帮助我，非常感谢！:-(

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-07T15:00:22.733

请注意，在您指向的示例代码中，“immediate_failed”检查被注释掉了。这是故意的，因为用户第一次在页面上遇到登录按钮时，它会失败。

它失败的原因是当页面第一次加载时，甚至在用户按下按钮之前，一个请求被发送到谷歌以确定用户是否已经登录（例如通过谷歌或其他网站）。如果是，则无需再次登录，因此永远不需要显示该按钮。但如果他们**尚未**登录，您将收到“immediate_failed”响应，并且需要显示（或不清除）按钮。

tl;dr - 不要担心页面第一次加载时会立即失败。这个是正常的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-11T15:36:03.320

作为一种解决方法，我在 gapi.auth.signIn 回调中使用[gapi.auth.authorize方法。](https://developers.google.com/api-client-library/javascript/reference/referencedocs#gapiauthauthorize)这是我的代码：

```
gapi.auth.signIn({
    'callback': gPlusLoginCallback
});

function gPlusLoginCallback(authResult) {
    if (authResult['status']['signed_in']) {
        doSmth(authRes['access_token']); 
    } else if (authResult['error'] == "immediate_failed") {
        gapi.auth.authorize({
            client_id: gplusClientId,
            scope: 'https://www.googleapis.com/auth/plus.login email',
            immediate: true
        }, function (authRes) {
            if (authRes['status']['signed_in']) {
                doSmth(authRes['access_token']);
            }
        });
    }
}

function doSmth(accessToken){
    //Do smth
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-17T08:21:20.513

将此设置“立即：真”更改为假“立即：假”。但是，如果您想进行更复杂的实现，请查看此处的第一个示例[https://developers.google.com/api-client-library/javascript/start/start-js](https://developers.google.com/api-client-library/javascript/start/start-js)。您必须调用 Google 的“gapi.auth.authorize({...”)，第一个使用“immediate: true”，第二个使用“immediate: false”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-10T09:08:35.113

这个问题很老，但我最近遇到了这个问题。

就我而言，这是因为我将[URI 参数](https://developers.google.com/identity/protocols/OpenIDConnect?hl=en#prompt) `prompt`指定为`none`. 如果用户以前从未登录过您的平台，我猜 Google 不喜欢这样。

每当我将其更改为`consent`或完全删除它时，效果都很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-23T20:14:54.167

在我的情况下，错误是因为明确指定了[授权参数](https://developers.google.com/identity/protocols/oauth2/web-server#creatingclient) `prompt`，`'none'`类似于之前的答案。

它通过指定`prompt=None`或根据官方[文档](https://developers.google.com/identity/protocols/oauth2/web-server#creatingclient)对我有用，您可以跳过此参数。

# php - 比较不同日子的时间

> ID：15863352
> 
> 赞同：0
> 
> 时间：2013-04-07T14:14:48.937
> 
> 标签：php, datetime

我有一些数据库条目，它们有时间戳。我想要的只是在天之间画一条单独的线。而且，我需要的一天不是从 00:00 开始，而是从 07:00 开始。这就像一天开始的偏移量。

现在我有了（对于上下文）：

```
foreach($logs as $log) {
    $cur_date = $log[0]['timestamp'];
    echo "<p>".$log[0]['content']."</p>";
} 
```

我描述的问题有简单的解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:38:27.257

```
$prev_date = 0;
foreach($logs as $log) {
    $cur_date = strtotime($log[0]['timestamp']);
    $cur_day_beginning = strtotime(date("Y-m-d 07:00:00", $cur_date));

    if ($cur_date >= $cur_day_beginning && $prev_date < $cur_day_beginning) {
        echo "<hr/>";
    }

    $prev_date = $cur_date;

    echo "<p>".$log[0]['content']."</p>";
} 
```

# ruby-on-rails - 设计错误后重定向

> ID：15863354
> 
> 赞同：4
> 
> 时间：2013-04-07T14:15:00.947
> 
> 标签：ruby-on-rails, ruby, authentication, devise

在 Devise 中的注册和忘记密码视图中，如果您收到错误，它会将您重定向到父页面。

因此，在注册页面 ( `/users/sign_up`) 上，如果您收到错误，它会将您重定向到 /users 并显示错误。

在忘记密码页面 ( `/users/password/new`) 上，如果您收到错误，它会将您重定向到`/users/password`并显示错误。

如何更改它以使其与登录页面执行相同的操作，如果出现错误，它会停留在同一页面上并显示错误。

我浏览了 Devise 并找不到重定向的位置。

这是我的设计路线：

```
devise_for :users, :skip => [:sessions]
as :user do
  get 'signin' => 'devise/sessions#new', :as => :new_user_session
  post 'signin' => 'devise/sessions#create', :as => :user_session
  get 'signup' => 'devise/registrations#new', :as => :new_user
  post 'signup' => 'devise/registrations#create', :as => :create_user_session
  delete 'signout' => 'devise/sessions#destroy', :as => :destroy_user_session
  get "/account" => "devise/registrations#edit"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T19:31:41.740

我认为问题在于您的`post 'signup'`名称不正确。您的用户注册表单`POST`的路径是什么？

```
post 'signup' => 'devise/registrations#create', :as => :create_user_session 
```

应该：

```
post 'signup' => 'devise/registrations#create', :as => :user_registration 
```

下面看看我`routes.rb`解决了这个问题的方法：

```
as :user do
  get "/signin" => "devise/sessions#new", :as => :new_user_session
  post "/signin" => "devise/sessions#create", :as => :user_session
  delete "/signout" => "devise/sessions#destroy", :as => :destroy_user_session
  get "/signup" => "devise/registrations#new", :as => :new_user_registration
  post '/signup' => 'devise/registrations#create', :as => :user_registration
end 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-07T14:16:55.050

它不会将您重定向到任何地方，这些是 Devise 发布到的 URL。

如果要编辑这些 URL，请参阅 wiki 以获得良好的起点： [https ://github.com/plataformatec/devise/wiki/How-To:-Change-the-default-sign_in-and-sign_out-routes](https://github.com/plataformatec/devise/wiki/How-To:-Change-the-default-sign_in-and-sign_out-routes)

# .net - 从非模态对话框中检索对话框值

> ID：15863356
> 
> 赞同：1
> 
> 时间：2013-04-07T14:15:10.917
> 
> 标签：.net, vb.net, winforms

我正在开发一个应用程序，并且正在尝试创建一个可以在整个应用程序中重复使用的通用搜索表单（表单 2）。

搜索表单将查看数据库并返回所选项目的 ID 值。

我可以使用表单（表单 2）作为对话框来执行此操作，只需将值返回给调用表单（表单 1），但我希望表单（表单 2）是非模态的，并在值之后保持打开状态通过了。

我知道我可以通过调用来做到这一点，`Form1.SubName(IDValue)`但我不想手动（或使用 case 语句）指定表单名称，因为我可能有多达 10 个表单调用这个单一的搜索表单。

我尝试设置表单所有者并进行操作，`Me.Owner.SubName(IDValue)`但出现错误`'SubName' is not a member of 'System.Windows.Forms.Form'`。

有没有办法可以将表单 2 中的值返回给表单 2 的所有者并在调用表单上调用一个过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:50:04.827

根据您对`return a value`and的要求`call a procedure on the calling form`，我认为最好的解决方案是使用`Events`. 我将通过一个简单的例子来展示这个概念。

对于此示例，假设您有 a`Parent Form`和 a `Child Form`，并且每个表单都有 a`Button`和 a `TextBox`。

1.  单击父窗体上的按钮将生成一个子窗体并订阅其 ValueChanged 事件。
2.  单击子窗体上的按钮将引发一个事件，并将其 TextBox 的值传递给订阅该事件的任何人。

这是代码`Parent Form`：

```
Public Class ParentForm

    Private Sub ParentButton_Click(sender As System.Object, e As System.EventArgs) Handles ParentButton.Click
        Dim child As New ChildForm
        AddHandler child.ValueChanged, AddressOf ChildFormValueChanged
        child.Show()
    End Sub

    Private Sub ChildFormValueChanged(ByVal NewValue As String)
        ParentTextBox.Text = NewValue
    End Sub

End Class 
```

这是代码`Child Form`：

```
Public Class ChildForm

    Public Event ValueChanged(ByVal NewValue As String)

    Private Sub ChildButton_Click(sender As System.Object, e As System.EventArgs) Handles ChildButton.Click
        RaiseEvent ValueChanged(ChildTextBox.Text)
    End Sub

End Class 
```

`AddHandler`代码很重要——它将允许,`Parent Form to subscribe to the Child Form's ValueChanged Event`和`specify a procedure to execute when the event has fired`. 在这种情况下，您将看到每当触发 ValueChanged 事件时，父文本框的值将等于子文本框的值（在此示例中，当单击子按钮时会发生这种情况）。

您可以在 Event 声明中放置多个参数以及任何数据类型，但您只需要确保在引发它时执行的过程（即 ChildFormValueChanged）与 Event 具有相同的签名（期望相同的参数和数据类型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T18:37:36.570

我试过了，这就是我让它工作的方式：首先，你创建一个所有请求表单都实现的接口（感谢那个领导 Styxxy）：

```
public interface IAsk
{
    void answer(String IDValue);
} 
```

现在，每次您调用搜索窗口时，您都会发送父级，只需调用`parent.answer(IDValue)`方法，您就会得到答案。

```
public Form2(IAsk caller)
{
    parent = caller;
    InitializeComponent();
} 
```

希望这可以帮助

对不起，对于糟糕的英语

# java - 如何使用 ini4j 将值附加到键？

> ID：15863357
> 
> 赞同：0
> 
> 时间：2013-04-07T14:15:12.197
> 
> 标签：java, ini, ini4j

我想将一个值附加到以下键，如下所示：

```
[Section]
Key=value1,value2 
```

我尝试了 Wini 和 Section getAll() 和 putAll() 函数，但它总是用 value2 替换 value1 而不是附加 value2。而且我没有在网上找到任何关于此的教程。如何使用 ini4j 做到这一点？还是另一个 jni 编写和解析库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:01:23.677

我最终将其视为单个键值对并附加到“Key =”之后的字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T19:02:12.543

这个话题有点老了，但我面临着完全相同的问题，所以......

阅读全部：

```
//open the file
Ini ini = new Ini(new File(iniFileName));

//load all values at once
Ini.Section names = ini.get("mySectionX");
myStr[] = names.getAll("myKey1", String[].class); 
```

把所有（具有相同的 ini 和名称）：

```
//if myStr[] have changes
names.putAll("myKey1", myStr); 
```

最后你会得到这样的ini文件（“myKey1”总是一样的）：

```
[mySectionX]
myKey1 = value1
myKey1 = value2
myKey1 = value3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T16:37:50.653

添加更多信息，如果你想创建一个新文件：

```
Ini ini = new Ini();
ini.setComment(" Main comment ");  //comment about the file

//add a section comment, a section and a value
ini.putComment("mySectionX", " Comment about the section");
ini.put("mySectionX", "myKey1", "value1");

//adding many parameters at one in a section
String[] keyList = {value1, value2, value3};
ini.add("mySectionY");
Ini.Section names = ini.get("mySectionY");
names.putAll("myKey1", keyList);           //put all new elements at once
...
ini.store(new File(iniFileName)); 
```

# java - 使用 IronPython 和 Jython 作为 API 测试器

> ID：15863358
> 
> 赞同：1
> 
> 时间：2013-04-07T14:15:19.217
> 
> 标签：java, python, .net, ironpython, jython

我们有一个服务器，它公开了一组 REST API。这些 API 旨在为不同平台上的客户端公开，因此我们希望以 Java 和 .NET 提供 SDK

SDK 使用类似的接口定义（我们不断在两种语言中重复接口声明）。在 Java SDK 之上构建的应用程序可以作为 Tomcat 容器中的 servlet 运行，而在 .NET SDK 之上构建的应用程序可以作为 IIS 应用程序运行。维护多语言版本的 SDK 以确保它们都能正常工作是一个相当大的挑战。所有的测试工作都加倍了。

我们正在考虑分别在两个 SDK 上编写 2 个“调试器”应用程序。然后应用程序可以加载用 Python 实现的“命令脚本”。2 'debugger' 应用程序提供了非常薄的 API 包装器，使它们可以从 Python 访问。所以我们可以使用一段 Python 代码来测试两个 SDK。

详细地：

*   实现 Java“调试器”应用程序，并公开其低级 API 以可从 Jython 代码访问
*   实现 .NET“调试器”应用程序，并公开其低级 API 以供 IronPython 代码访问。
*   来自 Java 和 .NET“调试器”的 API 应该兼容
*   使用通用 API 在 Python 中实现所有测试用例。
*   当 Java/.NET 应用程序运行时，它们会加载这些 Python 脚本并执行它们以确保功能正常工作。

所以我的问题是

*   这是解决此类问题的可行方法吗？
*   有没有解决类似问题的例子？
*   有没有我可以利用的框架/库？

提前感谢您的任何意见/建议！

# kml - 根据特定条件动态更新 KML 文件

> ID：15863360
> 
> 赞同：0
> 
> 时间：2013-04-07T14:15:23.903
> 
> 标签：kml

我为动态更新开发了以下网络链接：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<NetworkLink>
 <name>Loads TEST.kml</name>
 <Link>
  <href>/home/desktop/farhan/test.kml</href>
 </Link>
</NetworkLink>
</kml> 
```

Test.kml 文件有两个地标。

我的网络链接文件已成功更新 Test.kml 文件中的更改

现在我想做的是放置一个“IF”条件，这样如果某件事是真的，那么地标颜色就是“绿色”，否则就是“红色”。

我应该在这里做什么？有没有我需要遵循的 Java API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:18:25.187

取决于您想要托管 KML 的方式/位置以及这些条件是什么。

如果样式和条件是静态的，那么您可以生成带有这些样式的 KML 预设作为 KML 的一部分。例如，如果您想根据某些条件生成 KML，例如人口大小 > 100K => 红色、大小 > 50K => 蓝色，否则为白色，其中每个生成的 Placemark 将具有适当的共享共享或内联样式。

一种用于生成 KML 的流行 Java-API 是[用于 KML](https://code.google.com/p/javaapiforkml/)（或简称 JAK）的 Java API。

如果视图（基于条件）是“动态的”并且是用户选择的，那么您有几个选项：

1.  根据不同条件使用 NetworkLinks 和[radioFolders](https://developers.google.com/kml/documentation/kmlreference#listItemType)生成不同版本/视图的 Placemarks以加载特定视图。KML 可以静态生成一次，也可以通过 Web 服务、servlet、CGI 脚本等动态生成。

    例如，USGS 有一个地震实时馈送，其中包含多个 NetworkLinks，每个 NetworkLinks 对相同的数据具有不同的视图/颜色/大小方案（例如，按年龄与震级的颜色）。查看[http://earthquake.usgs.gov/earthquakes/feed/earthquakes.kml](http://earthquake.usgs.gov/earthquakes/feed/earthquakes.kml)

2.  使用[Google 地球 API](https://developers.google.com/earth/)在 HTML 和 JavaScript 上下文中加载、创建和修改 KML，并将 Google 地球作为 Web 浏览器中的插件运行。这需要一些 JavaScript 编程。

3.  使用示例中所示的 NetworkLinks 并结合*[NetworkLinkControl](https://developers.google.com/kml/documentation/kmlreference#networklinkcontrol)*元素来全局更改共享样式。请参阅[NetworkLinkControl 教程](https://developers.google.com/kml/documentation/updates)。您不能直接在 Google 地球中将 NetworkLinkControl 元素添加到您的 KML，因此您必须手动或以编程方式创作您的 KML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:05:46.250

使用 php ，如果您知道它并在您的表格的帮助下生成 kml ，您还可以使用上面 jason 所说的各种插件和 JAK。

你可以做的是：

1.  通过 jdbc 连接您的 mysql 数据库（具有 latnlong ）。

2.运行一个循环，即while循环，它将根据纬度和经度添加地标，并添加kml的其他必要元素，例如：

元素 ristyle = doc.createElement("IconStyle"); // 这将创建一个图标。

1.  通过以下方式创建一个新文件：

结果 dest = new StreamResult(new File("文件位置"));

这将创建您的新 kml 文件

-- 在此处放置一个条件，它将像正常循环一样显示您的条件。

5 建立网络链接并在此参考您的 kml 文件以进行手动更新。

我认为这应该有效

# ruby - Ruby 2.0 正则表达式和西里尔字母

> ID：15863365
> 
> 赞同：1
> 
> 时间：2013-04-07T14:15:35.640
> 
> 标签：ruby, regex, ruby-2.0

在 ruby​​ 2.0 之前，正则表达式是这样工作的：

```
/\A[a-zа-я\d]+\z/i          =~ 'привет' # => 0
/\A[a-z\p{Cyrillic}\d]+\z/i =~ 'привет' # => 0 
```

我更新了 ruby​​ 2.0，它有一个错误：

```
/\A[a-zа-я\d]+\z/i          =~ 'привет' # => nil
/\A[a-z\p{Cyrillic}\d]+\z/i =~ 'привет' # => nil 
```

我该如何处理这个问题？没有`\d`在字符类中，它可以正常工作：

```
/\A[a-zа-я]+\z/i            =~ 'привет' # => 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:21:33.410

这个错误看起来很相似，可能与我之前询问过的[这个错误有关。](https://stackoverflow.com/questions/15779859)我[将它报告给 ruby​​ trunk](http://bugs.ruby-lang.org/issues/8210)，它已被接受为一个错误。希望它会得到修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:45:48.843

该错误似乎已修复`ruby-head`：

```
⮀ rvm use ruby-2.0.0-preview2
Using /home/am/.rvm/gems/ruby-2.0.0-preview2
⮀ irb
2.0.0dev :001 > regex = /\A[a-zа-я\d]+\z/i ; regex =~ 'привет'
# ⇒ nil 
⮀ rvm use ruby-2.0.0-preview1
Using /home/am/.rvm/gems/ruby-2.0.0-preview1
⮀ irb
2.0.0dev :001 > regex = /\A[a-zа-я\d]+\z/i ; regex =~ 'привет'
# ⇒ nil 
⮀ rvm use ruby-head
Using /home/am/.rvm/gems/ruby-head
⮀ irb
irb(main):001:0> regex = /\A[a-zа-я\d]+\z/i ; regex =~ 'привет'
# ⇒ 0 
```

# java - 对象数组的声明 - 空值

> ID：15863367
> 
> 赞同：-1
> 
> 时间：2013-04-07T14:15:46.170
> 
> 标签：java, declaration

我有二维数组

```
protected MyClass[][] myArray; 
```

在构造函数中我有这个

```
this.myArray= new MyClass[20][20]; 
```

现在，没有初始化（又名 this.myArray[2][2] = new MyClass(par0, par1);）this.myArray[2][2] 的值为“null”。

这是有保证的吗？我在哪里可以阅读更多关于这个主题的信息？（也适用于 int 或 boolean 等原始类型）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:17:56.930

是的，这是有保证的。数组值初始化为 null（对于对象）、0（对于数字基元）和 false（对于布尔基元），就像字段一样。

请参阅[http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6-100](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6-100)：

> 为该长度的新数组分配空间。如果没有足够的空间来分配数组，则数组初始值设定项的评估会通过抛出 OutOfMemoryError 突然完成。否则，将创建一个指定长度的一维数组，并将**数组的每个组件初始化为其默认值（第 4.12.5 节）**。

（强调我的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:18:25.267

是的。这种行为是有保证的。an 的默认值为`Object`空。因此，数组的默认值`Objects`也是 null，因此数组中的每个元素都需要实例化。请参阅[数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)中的*默认值*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:19:16.623

是的，这是有保证的。每种类型都有一个默认的初始化值：

*   数字基元 = 0
*   布尔 = 假
*   所有对象 = null

# jquery - jQuery ui自动完成：将本地数据存储在远程位置而不使用数据库？

> ID：15863372
> 
> 赞同：0
> 
> 时间：2013-04-07T14:16:13.253
> 
> 标签：jquery, jquery-ui, autocomplete

我目前正在为 jQuery ui 自动完成小部件使用**本地数据**集。*有没有一种方法可以在不使用 sql 数据库的情况下*将这个多维数组（数据集）存储在**远程** 某个地方？

 *如果我将数组存储在**php**中，那么`echo`每次调用都会将整个数组传递给 jQuery 自动完成函数，这会是一种安全的方法吗？例如

```
<?php
echo json_encode( 
    array( array( label => "jQuery", 
                      desc => "the write less, do more, JavaScript library",
                      other => "9834275 9847598023 753425828975340 82974598823" 
                    ),
               array( label => "jQuery UI", 
                      desc => "the official user interface library for jQuery",
                      other => "98 83475 9358 949078 8 40287089754 345 2345",
                    ),
               array( label => "Sizzle JS", 
                      desc => "a pure-JavaScript CSS selector engine",
                      other => "49857 2389442 573489057 89024375 928037890" 
                    )
             );
);
?> 
```

或者，如果整个数组是`echo`'d 几乎就像拥有一个任何人都可以访问的本地数据集（如果他们尝试过）？

[http://jsfiddle.net/FUZPN/](http://jsfiddle.net/FUZPN/)（这是我现在使用本地数据集的简单功能）

我的数组目前看起来像这样：

```
var projects = [
    {
        value: "jquery",
        label: "jQuery",
        desc: "the write less, do more, JavaScript library",
        other: "9834275 9847598023 753425828975340 82974598823"
    },
    {
        value: "jquery-ui",
        label: "jQuery UI",
        desc: "the official user interface library for jQuery",
        other: "98 83475 9358 949078 8 40287089754 345 2345"
    },
    {
        value: "sizzlejs",
        label: "Sizzle JS",
        desc: "a pure-JavaScript CSS selector engine",
        other: "49857 2389442 573489057 89024375 928037890"
    }
]; 
```

一般来说，有没有办法像使用该`autcomplete -> php -> sql database`方法一样安全地远程存储数组？*

# django - django formset - 无法更新条目

> ID：15863381
> 
> 赞同：2
> 
> 时间：2013-04-07T14:17:24.037
> 
> 标签：django, django-forms

我想更新一个可以有不同条目的表单集。我将能够呈现预先填充了正确数据的表单集，但是我做错了，因为它没有更新而是创建了一个新实例..

我看到**了 inlineformset_factory**但是因为我向表单集传递了多个值，所以我无法使用它..

如果有人有任何指示，我将不胜感激！

视图.py

```
 epis = Contact.objects.filter(episode=int(value))

    ContactSet = formset_factory(Contact1Form, extra=len(epis), max_num=len(epis))
    if request.method =='POST':
        formset = ContactSet(request.POST)
        if formset.is_valid():
            for form in formset.forms:
                age = form.cleaned_data['age']
                bcg = form.cleaned_data['bcg_scar']
                radio = form.cleaned_data['radiology']

                profile = form.save(commit=False)
                for i in epis:
                    profile.contact = i

                fields = {'age': age, 'bcg_scar': bcg, 'radiology': radio}

                for key, value in fields.items():
                    if value == u'':
                        setattr(profile, key, None)
                    else:
                        setattr(profile, key, value)

                profile.save()
        return render_to_response('success.html', {'location': location})
    else:
        dic = []
        for c in epis:
            aux = {}
            for f in c._meta.fields:
                if f.name not in ['contact_id', 'episode']:
                    aux[f.name] = getattr(c, f.name)
            dic.append(aux)

        formset = ContactSet(initial=dic)
    return render_to_response('form.html',
            {   'msg': msg,
                'location': location,
                'formset': formset,
                'word': word }) 
```

表格.py

```
 class ContactForm(forms.ModelForm):
        affinity = forms.ModelChoiceField(queryset=Affinity.objects.all(),
                  label=ugettext("Affinity"))
        age = forms.IntegerField(label=ugettext("Age when diagnosed"),
                  required=False)

        MAYBECHOICES = (
            ('', '---------'),
            (ugettext('Yes'), ugettext('Yes')),
            (ugettext('No'), ugettext('No')))

        bcg_scar = forms.ChoiceField(choices=MAYBECHOICES, label=ugettext(
                  "BCG scar"), required=False)
        radiology = forms.ModelChoiceField(queryset=Radiology.objects.all(),
                 label=ugettext("Radiology"),required=False)

    class Meta:
         model = Contact 
```

任何指针都会有很大帮助！

**编辑**

在凯瑟琳的一些建议之后

```
 formset = ContactSet(request.POST, queryset=epis) 
```

这给了我这个错误：

```
 __init__() got an unexpected keyword argument 'queryset' 
```

我尝试改变

```
 from django.forms.models import modelformset_factory
 ContactSet = modelformset_factory(Contact1Form, extra=len(epis), max_num=len(epis)) 
```

出现了这个错误：

```
'ModelFormOptions' object has no attribute 'many_to_many' 
```

然后看到要解决这个错误，我需要改用模型的名称。

```
ContactSet = modelformset_factory(Contact, extra=len(epis), max_num=len(epis)) 
```

我得到一个 MultiValueDictKeyError

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:57:13.073

您只是忘记`instance`在表单集中添加，

```
 if request.method =='POST':
    formset = ContactSet(request.POST, queryset=epis)
    if formset.is_valid(): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T18:00:10.923

```
MyFormSet = modelformset_factory(ModelName, form=MyForm)
qs = ModelName.objects.filter(user=request.user)
formset = MyFormSet(queryset=qs) 
```

# ms-access - 如何在 Ms Access 查询 sql 视图中对选择结果进行分类

> ID：15863382
> 
> 赞同：-1
> 
> 时间：2013-04-07T14:17:25.527
> 
> 标签：ms-access, database-design

我在 Ms Access for Cars 中创建一个数据库。此 Car 表具有以下属性：名称类型国家。我需要有关选择按类型分类的所有汽车的查询的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:18:30.197

你只需要有一个`WHERE`子句，例如

```
SELECT *
FROM   Cars
WHERE  CarType = 'desired_type' 
```

a`WHERE`基本上，根据指定的条件过滤结果。

# android - SimpleCursorAdapter 上的 NullpointerException

> ID：15863383
> 
> 赞同：0
> 
> 时间：2013-04-07T14:17:29.927
> 
> 标签：android, nullpointerexception, simplecursoradapter, custom-cursor

我的主页是一个有 6 页的 ViewPager（第一个设置，其他 5 个是 listview 并使用这个 cursoradapter 来获取数据）

在设置中有一个按钮可以打开另一个活动，用户在那里更改一些设置，然后该活动将以finish（）（或super.onBackpressed（））结束，但每次我调用finish（）时都会出现NullPointerException

我究竟做错了什么？

这是我的光标适配器

```
package com.whd.roosters.adapters;

import com.whd.roosters.R;
import android.annotation.TargetApi;
import android.content.Context;
import android.database.Cursor;
import android.os.Build;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class RoosterCursorAdapter extends SimpleCursorAdapter {
    private Cursor cursor;
    private Context context;

    @SuppressWarnings("deprecation") //New constructor available from API 11
    public RoosterCursorAdapter(Context mContext, int layout, Cursor mCursor, String[] from, int[] to) {
        super(mContext, layout, mCursor, from, to);
        cursor = mCursor;
        context = mContext;
    }

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public RoosterCursorAdapter(Context mContext, int layout, Cursor mCursor, String[] from, int[] to, int flags) {
        super(mContext, layout, mCursor, from, to, flags);
        cursor = mCursor;
        context = mContext;
    }

    public int getImage(int uur) {
        if (uur == 1) return R.drawable.eerste;
        if (uur == 2) return R.drawable.tweede;
        if (uur == 3) return R.drawable.derde;
        if (uur == 4) return R.drawable.vierde;
        if (uur == 5) return R.drawable.vijfde;
        if (uur == 6) return R.drawable.zesde;
        if (uur == 7) return R.drawable.zevende;
        if (uur == 8) return R.drawable.achtste;
        return 1;
    }

    public View getView(int pos, View row, ViewGroup root) {
        cursor.moveToPosition(pos);

        String uur = cursor.getString(cursor.getColumnIndex("uur"));
        String les = cursor.getString(cursor.getColumnIndex("les"));
        String lok = cursor.getString(cursor.getColumnIndex("lok"));
        String doc = cursor.getString(cursor.getColumnIndex("doc"));

        ImageView UUR = null;
        TextView  LES = null;
        TextView  LOK = null;
        TextView  DOC = null;

        if (lok.contains("Vrij")) {
            if (row == null) row = ((LayoutInflater) context.getSystemService("layout_inflater")).inflate(R.layout.listview_item_rooster_vrij, null);
            UUR = ( ImageView ) row.findViewById( R.id.LISTVIEW_ITEM_ROOSTER_VRIJ_IMAGEVIEW_UUR );
            LOK = ( TextView  ) row.findViewById( R.id.LISTVIEW_ITEM_ROOSTER_VRIJ_TEXTVIEW_VRIJ );
        } else {
            if (row == null) row = ((LayoutInflater) context.getSystemService("layout_inflater")).inflate(R.layout.listview_item_rooster, null);
            UUR = ( ImageView ) row.findViewById( R.id.LISTVIEW_ITEM_ROOSTER_IMAGEVIEW_UUR   );
            LES = ( TextView  ) row.findViewById( R.id.LISTVIEW_ITEM_ROOSTER_TEXTVIEW_LES    );
            LOK = ( TextView  ) row.findViewById( R.id.LISTVIEW_ITEM_ROOSTER_TEXTVIEW_LOKAAL );
            DOC = ( TextView  ) row.findViewById( R.id.LISTVIEW_ITEM_ROOSTER_TEXTVIEW_DOCENT );
        }

        UUR.setAdjustViewBounds(true);
        if ((context.getResources().getDisplayMetrics().heightPixels / 10) > 10) {
            UUR.setMaxHeight(context.getResources().getDisplayMetrics().heightPixels / 10);
        } else {
            UUR.setMaxHeight(100);
        }
        UUR.setMinimumHeight(50);
        UUR.setImageResource(getImage(Integer.parseInt(uur)));

        LOK.setText(lok);
        if (LES != null) LES.setText("Les: " + les);
        if (DOC != null) DOC.setText("Docent: " + doc);

        return row;
    }
} 
```

这是堆栈跟踪

```
04-07 16:08:39.430: E/AndroidRuntime(4562): FATAL EXCEPTION: main
04-07 16:08:39.430: E/AndroidRuntime(4562): java.lang.NullPointerException
04-07 16:08:39.430: E/AndroidRuntime(4562):     at com.whd.roosters.adapters.RoosterCursorAdapter.getView(RoosterCursorAdapter.java:72)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.widget.AbsListView.obtainView(AbsListView.java:1597)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.widget.ListView.makeAndAddView(ListView.java:1772)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.widget.ListView.fillDown(ListView.java:695)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.widget.ListView.fillGap(ListView.java:666)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4215)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.widget.AbsListView$TwFlingRunnable.run(AbsListView.java:3431)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.os.Handler.handleCallback(Handler.java:587)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.os.Looper.loop(Looper.java:130)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at android.app.ActivityThread.main(ActivityThread.java:3691)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at java.lang.reflect.Method.invokeNative(Native Method)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at java.lang.reflect.Method.invoke(Method.java:507)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:912)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:670)
04-07 16:08:39.430: E/AndroidRuntime(4562):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:35:03.683

您的问题在第 72 行：

```
UUR.setAdjustViewBounds(true); 
```

我的猜测是你的“if”语句有问题，虽然你认为你得到了正确的布局，但我猜你得到了另一个。

# java - System.arraycopy() 和 Array.sort() 比 Java 中的手动处理更快还是更慢？

> ID：15863384
> 
> 赞同：1
> 
> 时间：2013-04-07T14:17:36.630
> 
> 标签：java, system

我在我的代码中使用了这些，但我认为它们可能不如手动编码过程快。我搜索并发现了一些文章说 System.arraycopy() 实际上比手动复制数组要快。我不太确定这是否正确。

另外，函数 Array.sort() 比我们用代码写的快吗？

```
// I am merging the arrays here into a new integer array called newarray3 
    int[] newarray3= new int[input1.length + input2.length];
    System.arraycopy(input1, 0, newarray3, 0, input1.length);
    System.arraycopy(input2, 0, newarray3, input1.length, input2.length);

    //sorting the array.
    Arrays.sort(newarray3); 
```

input1 和 input2 是要合并然后排序的两个数组。我想知道以这种方式编码是否会使我的程序变慢。或者它可能是别的东西。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:38:23.830

System.arraycopy 在几乎所有情况下都会比您手动执行的操作更快，因为它可以一次执行“批量”数据移动，而不是一次移动一个元素。主要的例外是相对较小的数组，因为 arraycopy 内部的初始处理，选择使用哪种算法，是非常重要的。

重新排序，没有一种单一的排序算法在所有条件下都是最优的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:21:29.870

`arrayCopy()`是本机方法，所以是的，它*可能*比手工编写的纯 Java 实现更快。另一方面，`sort()`是一个纯java方法，但是是为泛型排序而设计的——具体使用的算法取决于数组的数据类型，看看[这篇文章](https://stackoverflow.com/questions/4018332/is-java-7-using-tim-sort-for-the-method-arrays-sort)了解详情。

您可以通过改进对象之间的比较并针对某种数据类型专门化算法来使自己的排序实现更快，实际上这是[Java Performance Tuning](https://rads.stackoverflow.com/amzn/click/com/0596003773)一书中推荐的方法。无论如何，在使用分析器进行比较之前，您无法确定。

# jquery - 点击图片淡入其他图片

> ID：15863387
> 
> 赞同：0
> 
> 时间：2013-04-07T14:17:48.710
> 
> 标签：jquery, html

对 HTML 和 JQuery 完全陌生 我正在尝试为我的学校项目制作网络漫画。这是一个侦探故事，所以我试图让观众点击图像的一部分，然后它会显示对用户隐藏的其他一些图像。这些隐藏的图像已经有一些 Jquery 悬停效果，这将它们从灰度变为彩色，如下所示。

```
<script src="jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

$(document).ready(function(){
$("#apDiv2").hover(
function() {
$(this).stop().animate({"opacity": "0"}, "slow");
},
function() {
$(this).stop().animate({"opacity": "1"}, "slow");
});
});

</script>

 </head>

<body>

<div id="apDiv1"><img src="rescuebunny.jpg" width="442" height="268"></div>
<div id="apDiv2"><img src="rescuebunny-grey.png" width="442" height="268"></div>
<div class="container"></div>
</body>
</html> 
```

我该如何在已经存在的内容之上添加过渡？哪个查看器单击图像的一部分并显示这些隐藏的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T21:30:21.113

假设一个 div 包含这样的图像

```
<img id="image" src="http://path_to_my_image.png" /> 
```

您将一个函数作为回调参数传递给fadeOut()，它会重置src 属性，然后使用fadeIn() 淡出：

```
$("#image").fadeOut(function() { 
  $(this).load(function() { $(this).fadeIn(); }); 
  $(this).attr("src", "http://path_to_new_image.png"); 
}); 
```

在这里查看淡出 api：http: [//docs.jquery.com/Effects/fadeOut](http://docs.jquery.com/Effects/fadeOut)

# python - 从 .csv 文件创建一个 numpy 数组，但我只能得到数组中的第一行 - 我错过了什么？

> ID：15863393
> 
> 赞同：1
> 
> 时间：2013-04-07T14:18:24.210
> 
> 标签：python, numpy

我在一个看起来像这样的文件中有数据

```
0.5,0,-21
0.5,0,-21
0.5,0,-19
0.5,0,-20
0.5,0,-20
1,0,-31
1,0,-28
1,0,-31
1,0,-28
1,0,-30 
```

我想创建一个 numpy 数组。我正在执行以下操作以尝试将其复制到数组中：

```
with open ("bot1.csv") as fd:
    array = numpy.fromfile(fd, count=-1, dtype=float, sep=",") 
```

但结果数组只是：

```
array([  0.5,   0\. , -21\. ]) 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:31:25.423

我建议您使用[numpy.loadtxt()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)。它比`genfromtxt()`- 但不太灵活，这对您的情况无关紧要：

```
table = numpy.loadtxt('bot1.csv', delimiter=',') 
```

旁注：最好不要称您为 variable `array`，因为这也是 NumPy 使用的名称：这使得在执行`from numpy import *`or之后粘贴代码不太方便`from pylab import *`（在 Python shell 中），因为人们可以期望`array`表示`numpy.array()`，并且因为变量名会影响 NumPy 的`array()`.

# java - 如何在 Android 中以自定义布局显示 HTML 页面内容

> ID：15863398
> 
> 赞同：1
> 
> 时间：2013-04-07T14:18:40.213
> 
> 标签：java, android, html, textview

我想在 Android 中以自定义布局显示网页，例如他们如何在脉冲新闻 android 应用程序或 Flipboard 中显示博客。

我曾尝试使用页面的 html 来提取文本，但没有成功。谁能告诉我我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:26:10.117

大多数“自定义布局”只是 CSS。你可以用这个做很多事情。如果您想要更多控制，您可以尝试使用 javascript 或 jQuery，因为它们已经内置了 DOM 操作和自定义体验所需的许多功能。如果它是应用内的，那么您可以轻松地在内容中包含一个 webkit 框架。

但是，如果您想解析 HTML 并使用一些服务器端或应用内技术创建自己的布局，我建议您查看 BeautifulSoup，这是一个允许操作 HTML 的 Python 模块。

# node.js - Node.js 和 Express 3：设置异步加载的 app.locals

> ID：15863399
> 
> 赞同：3
> 
> 时间：2013-04-07T14:18:40.643
> 
> 标签：node.js, express, ejs

我正在使用 Node.js 和 Express 3.0，我很清楚 app.locals 和 res.locals 之间的区别......

我想设置一些我想在我的任何 EJS 模板中全局引用的 app.locals 变量（“最新”和“流行”）。这些变量的数据来自数据库（CouchDB/Cradle），也可以通过我的 app.routes 之一（即：/myappdata）访问，它只是作为 res.json 从数据库中公开我的应用程序数据。

那么将这些东西加载到我的 app.locals*中的最佳方法是什么？*我应该在路由器之前使用 app.use() 创建一个中间件函数吗？我怎样才能确保数据库不会在每个请求上被调用，并且只有在我的应用程序启动时才被调用？我应该如何在 app.use() 中进行异步回调？

我也尝试过直接设置 app.locals()，但在某些时候，我的模板似乎“最新”和“流行”变量是“未定义的”。（也许有什么东西踩到了 app.locals 上？？）

这是我在启动时返回给 server.js 的“app.js”：

```
var express = require('express'),
    engine = require('ejs-locals'),
    conf = require('./conf'),
    cradle = require('cradle').(conf.databaseConn),
    app = express();

exports.init = function(port) {

    app.locals({
        _layoutFile:'layout.ejs',
        newest:{}, // like to set this from db once
        popular:{} // like to set this from db once
    });

    app.configure(function(){
        app.set('views', __dirname + '/views');
        app.set('view engine', 'ejs');

        app.use(express.compress());

        app.use(express.static(__dirname + '/static'));

        app.use(express.bodyParser());
        app.use(express.cookieParser());
        app.use(express.cookieSession({cookie:{path:'/',httpOnly:true,maxAge:null},secret:'blh'}));

        app.use(function(req, res, next){
            res.locals.path = req.path;
            res.locals.user = req.session.user;
            next();
        });

        app.use(app.router);
    });

    app.engine('ejs', engine);

    app.configure('development', function(){
        app.use(express.errorHandler({ dumpExceptions: true, showStack: true })); 
    });

    app.configure('production', function(){
        app.use(express.errorHandler()); 
    })

    app.use(function(err, req, res, next){
        res.render('500.ejs', { locals: { error: err, path:"" },status: 500 }); 
    });

    var server = app.listen(port);
    console.log("Listening on port %d in %s mode", server.address().port, app.settings.env);
    return app;

} 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T17:51:39.953

您可以创建一个中间件来检查`app.locals.newest`(/ `.popular`) 是否已定义；如果是这样，请`next()`立即致电；如果没有，请执行数据库查询，将结果存储在 中`app.locals`，然后调用`next()`（这就是您创建异步中间件的方式）。如果以这种方式实现，查询将在第一个（并且仅是第一个）请求期间执行。

另一种方法是在启动时执行查询，然后再调用`app.listen()`. 这样，您可以确定在服务器开始侦听请求时加载了变量。

要协调多个异步数据库查询，您可以使用[async](https://github.com/caolan/async)或[queue](https://github.com/mbostock/queue)之类的模块。

# algorithm - Facebook HackerCup 2013 BalancedSmileys 解说

> ID：15863401
> 
> 赞同：0
> 
> 时间：2013-04-07T14:18:57.120
> 
> 标签：algorithm

我的问题是关于 FB HackerCup 2013 QualificationRound 问题 - BalancedSmileys。

问题陈述：[https](https://www.facebook.com/hackercup/problems.php?pid=403525256396727&round=185564241586420) ://www.facebook.com/hackercup/problems.php?pid=403525256396727&round=185564241586420 （也复制到这里：[https ://github.com/anuragkapur/Algorithmic-Programming/tree/master/src/com /anuragkapur/fb/hackercup2013/qr#problem-2-balanced-smileys](https://github.com/anuragkapur/Algorithmic-Programming/tree/master/src/com/anuragkapur/fb/hackercup2013/qr#problem-2-balanced-smileys)）

我想出了如何使用具有指数运行时间的 BruteForce 方法来解决这个问题。

根据发布的官方解决方案，有一个线性运行时间的解决方案。此处描述：[https ://www.facebook.com/notes/facebook-hacker-cup/qualification-round-solutions/598486173500621](https://www.facebook.com/notes/facebook-hacker-cup/qualification-round-solutions/598486173500621)

本质上，它维护两个计数器：minOpen 和 maxOpen。每当遇到左括号“(”时，maxOpen 就会增加。如果“(”不是笑脸的一部分，minOpen 也会增加。处理“)”的类似策略也是如此，如上面的解释链接中所述。

我可以看到线性时间方法有效，但在我的脑海中并不清楚 - 怎么样？所以我正在调查这个小组，看看是否有人可以给出线性运行时间解决方案的替代“解释”。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:46:19.457

如果不是规则 #2 中的冒号，那么显而易见的算法将是一个具有两种状态的有限状态机，它循环遍历字符串并维护括号计数：

*   `pcount = 0`
*   对于每个字符：
    *   如果是':'：丢弃下一个字符
    *   如果是 '（'：`pcount++`
    *   如果是')'：`pcount--`如果`pcount > 0`，否则立即返回“NO”

规则 #2 允许使用冒号这一事实使其更具挑战性，因为“(:)”或“(foo :)”形式的消息也可能被视为具有平衡括号。这条规则本质上说的是“你很难判断一个括号是否真的是一个括号或一个表情符号的一部分”，并且你应该确定“是否有一种方法可以在保持括号平衡的同时解释他的信息”。

更清楚地说：**我们实际上根本不关心表情符号。**我们将找出括号是否可以平衡。

天真的方法是维护一个括号计数器数组。最初，它只包含一个括号计数器。每次遇到 '(' 或 ')' 时，都将当前的括号计数器数组附加到自身，按照上面简单算法中的建议将前半部分递减/递减。到达字符串末尾后，检查数组是否包含零。如果是这样，则有一种方法可以将字符串视为具有平衡括号。否则，没有。

第二种算法可能还有改进的余地，如果消息包含 1000 个括号，甚至可能有一个优雅得令人瞠目结舌的解决方案，它不会耗尽内存。但是，如果有足够的 RAM，这种幼稚的方法将在线性时间（不幸的是，指数空间）内确定正确答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:37:43.590

预处理：对输入进行标记并将每个标记转换为一个列表，其中包含对开括号计数的可能影响。

输入

```
i am sick today (:()
:(:)) 
```

变得

```
[[0], [0], ..., [0], [1], [0, 1], [-1]]
[[0, 1], [-1, 0], [-1]] 
```

. 现在，你的蛮力算法是这样的。

```
def solution1(lst, opencnt=0, i=0):
    if opencnt < 0:
        return False
    elif i >= len(lst):
        return opencnt == 0
    else:
        for delta in lst[i]:
            if solution1(lst, opencnt + delta, i + 1):
                return True
        return False 
```

对于给定的输入，该函数`solution1`总是给出相同的输出。对于在 {-1, 0, 1} 中具有条目的给定， (-1 to ) 和(0 to )`lst`中的每一个都只有线性数量的可能性，因此通过缓存给定输入的输出，即[记忆](http://en.wikipedia.org/wiki/Memoization)，我们得到二次时间算法。`opencnt``len(lst)``i``len(lst) - 1`

线性时间算法将控制流从里到外翻转。我们没有对 each 进行单独的递归调用`delta`，而是创建`opencnt`了一个集合。

```
def solution2(lst, opencnt={0}, i=0):
    opencnt = {x for x in opencnt if x >= 0}
    if i >= len(lst):
        return 0 in opencnt
    else:
        return solution2(lst, {x + delta for x in opencnt for delta in lst[i]}, i + 1) 
```

这个实现还不是线性时间。最后的优化是`opencnt`始终是一个区间，即[minOpen, maxOpen]，并且可以在恒定时间内进行操作。

# mysql - 复杂选择的MySql查询

> ID：15863403
> 
> 赞同：0
> 
> 时间：2013-04-07T14:19:09.253
> 
> 标签：mysql, sql

我有这些表：

**用户**，一个表包含用户：

```
+--------------------------
| ID    |     Name        |
+-------------------------- 
```

**Dogs**，一个包含狗的表（Last change 是一个时间戳，告诉该狗状态上次更改的时间）：

```
+---------------------------------------------------------
| ID    |       Name       |        Last_Changed_At      |
+--------------------------------------------------------- 
```

**Users_Dogs_Relations** , 描述哪只狗属于哪个用户的表，其中多只狗可以属于一个用户，多个用户可以拥有同一只狗，多只狗可以属于多个用户。（简而言之，任何用户都可以与任何狗相关联）：

```
+------------------------------------
|   UserID        |     DogID       |
+------------------------------------ 
```

**Users_Friend_Relation**，一张表，描述了哪个用户是哪个用户的朋友：

```
+------------------------------------
|   UserID1     |       UserID2     |
+------------------------------------ 
```

我想做的是告诉史蒂夫（其中一位用户），他的朋友拥有的所有狗的名字（由给定时间戳的 Last_Changed_At 排序）。

例如，给定时间 11:23:00 的 Steve，将查询 Steve 朋友的所有狗，按时间戳排序，并且仅在 11:23:00 以下。哦，我不希望狗出现两次。任何人都可以给我一些线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:24:48.317

您必须将所有表格加入正确的列

*   `Users``Users_Friend_Relation`结交*史蒂夫*的朋友
**   `Users_Dogs_Relations`去`Users_Friend_Relation`得到*史蒂夫*的朋友的狗*   `Dogs`得到`Users_Dogs_Relations`这些狗的名字*

 *并指定您的`where`条件。

```
SELECT DISTINCT d.Name
FROM Users u1
JOIN Users_Friend_Relation f ON u1.ID = f.User1ID
JOIN Users_Dogs_Relations udr ON udr.UserID = f.User2ID
JOIN Dogs d ON udr.DogID = d.ID
WHERE u1.Name = Steve
AND d.Last_Changed_At < '11:23:00' 
```*

# matplotlib - matplotlib 在包含子图的图中共享行标签（不是 y 标签）

> ID：15863404
> 
> 赞同：5
> 
> 时间：2013-04-07T14:19:15.953
> 
> 标签：matplotlib

我有一个类似格子的情节，我试图在 matplotlib 中制作。这是我要做什么的草图：

![在此处输入图像描述](https://i.stack.imgur.com/9FNNV.jpg)

我遇到的一件事是为每一行获取一个共享的行标签。即在我的情节中，我有四行用于四组不同的实验，所以我想要行标签“1 个源节点、2 个源节点、4 个源节点和 8 个源节点”。

请注意，我*不是*指用于标记因变量的 y*轴标签。*因变量在所有子图中都是相同的，但我所使用的*行*标签用于描述所进行的四类实验，每行一个。

目前，我正在生成情节：

```
fig, axes = plt.subplots(4, 5, sharey=True) 
```

虽然我找到了大量关于共享 y 轴标签的信息，但我没有找到任何关于添加单个共享行标签的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:59:40.743

据我所知，没有`ytitle`或什么的。您可以使用`text`显示一些文本。和在数据坐标中`x`。和分别是水平和垂直对齐。`y``ha``va`

```
import numpy
import matplotlib 
import matplotlib.pyplot as plt

n_rows = 4
n_cols = 5
fig, axes = plt.subplots(n_rows, n_cols, sharey = True)

axes[0][0].set_ylim(0,10)

for i in range(n_cols):
    axes[0][i].text(x = 0.5, y = 12, s = "column label", ha = "center")
    axes[n_rows-1][i].set_xlabel("xlabel")

for i in range(n_rows):
    axes[i][0].text(x = -0.8, y = 5, s = "row label", rotation = 90, va = "center")
    axes[i][0].set_ylabel("ylabel")

plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T14:35:19.220

您可以像 Robbert 建议的那样为顶行的子图赋予标题

```
fig, axes = plt.subplots(4,3)

for i, ax in enumerate(axes[0,:]):
    ax.set_title('col%i'%i) 
```

# google-apps-script - 尝试复制文件时避免超过最大执行时间

> ID：15863406
> 
> 赞同：0
> 
> 时间：2013-04-07T14:19:26.140
> 
> 标签：google-apps-script

大家好，这是我第一次在这里发帖，通常我会在这里找到答案，但这次我不得不问。

所以我试图创建 12 个带有月份名称的文件夹，并在每个文件夹中创建 31 个文件，这些文件是现有电子表格文件的副本。

我已经成功编写了有效的脚本，但是在创建 3-4 个月后它停止并抛出“超过最大执行时间”，现在我做了一些阅读并了解到有大约 5 分钟的时间限制 - 正如你所看到的在下面的代码中，我的处理方式可能不是最有效的，现在我唯一的想法是将原始文件数据保存在 blob 中，然后在创建新文件时从该 blob 中读取 - 这样可以避免大量调用并使事情变得更快，但是当我尝试 createFile(blob) 时，我得到 PDF 作为输出，这不是我的意图。

```
function create_months(month_name) 
{

  var testingfolder = DocsList.getFolder("testing");
  var targetFolder = testingfolder.createFolder(month_name);
  var mainDoc = DocsList.getFileById('original file id');

  for(var i=1;i<32;i++)
  {
    mainDoc.makeCopy(i).addToFolder(targetFolder);

    var root = DocsList.getRootFolder();
    var file = root.find(i);
    file[0].removeFromFolder(root);
  }

}
//array of months in hebrew
year = ['ינואר','פברואר','מרץ','אפריל','מאי','יוני','יולי','אוגוסט','ספטמבר','אוקטובר','נובמבר','דצמבר'];

function create(){

  for(var i=0;i<=12;i++)
  {
   create_months(year[i]);
  }
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T23:01:56.807

您的代码看起来不错，除了`create`函数中循环上的“error by 1”（应该是I ，而`i < 12`不是`<=`.`undefined``month_name``create_months`

如果你说 3-4 个月的工作，我建议你一次只做 3 个月。如果您手动运行它。最简单的解决方案就是等待，然后再次运行，然后再运行，等等。例如

```
function create1stQuarter() {
  for( var i = 0; i < 3; ++i )
    create_months(year[i]);
}

function create2ndQuarter() {
  for( var i = 3; i < 6; ++i )
    create_months(year[i]);
}

function create3rdQuarter() {
  for( var i = 6; i < 9; ++i )
    create_months(year[i]);
}

function create4thQuarter() {
  for( var i = 9; i < 12; ++i )
    create_months(year[i]);
} 
```

现在，如果您不是自己从脚本编辑器运行它，或者您发现您的用户很难在电子表格菜单或其他地方单击 4 个项目。您可以通过自动设置触发器并在完成后自动删除它来增强此功能。您还必须在脚本中跟踪下一个必须创建的季度。像这样简单的东西的好地方是`ScriptProperties`。

如果您使用的是触发器解决方案，我还建议您不要将时间间隔设置为低于 10 分钟，因为您将面临函数同时运行的风险。如果这样做，建议您使用`LockService`来保证不会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T01:34:39.277

由于您已经拥有该文件，因此在循环之外尽您所能并摆脱查找。

```
var root = DocsList.getRootFolder();

for(var i=1;i<32;i++)
  {
    var daily = mainDoc.makeCopy(i);
    daily.addToFolder(targetFolder);
    daily.removeFromFolder(root);
  } 
```

那应该加快速度。

# delphi - 从哪个版本“vclunit.pas”更改为“Vcl.vclunit.pas”？

> ID：15863408
> 
> 赞同：4
> 
> 时间：2013-04-07T14:19:32.153
> 
> 标签：delphi, components

我在 Delphi 2007 中制作了一个组件，现在我想让它与新版本的 Delphi 一起工作，所以我必须将用途从 更改
`uses Controls;`
为
`uses {$if CompilerVersion > 21}Vcl.Controls{$else}Controls{$ifend};`.
但我不知道我必须编写的编译器版本。有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T14:30:56.640

XE2 中引入了单元范围名称。而 XE2 是编译器版本 23。所以条件是：

```
{$if CompilerVersion >= 23} 
```

# sql - SQL - IN子句与小列表的等于运算符

> ID：15863412
> 
> 赞同：0
> 
> 时间：2013-04-07T14:20:10.667
> 
> 标签：sql, sql-server-2008

哪种方式应该是首选和有效的方式？

```
where @TeamId in (Team1Id, Team2Id) 
```

或者

```
where @TeamId=Team1Id or @TeamId=Team2Id 
```

我正在使用 sql server 2008。

**编辑**

当我检查执行计划时，两个查询都显示它们使用的是索引和相同的执行计划。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T14:21:52.057

两者都是同一个 SQL 服务器转换这个

```
where @TeamId in (Team1Id, Team2Id) 
```

进入

```
where @TeamId=Team1Id or @TeamId=Team2Id 
```

与 OR 相比，最好写 IN 更易读和更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:19:00.957

对于您提供的测试变量的具体示例，IN 只是多个 OR 的语法糖。

然而，在选择关系的行的相关情况下，使用连接到另一个关系是优越的，特别是如果正在比较的数据字段被索引或比较值列表增长。使用这样的静态子查询很容易创建这样的比较关系：

```
select *
from data
join (
  select Team1Id as TeamId union all
  select Team2Id 
) comparison on comparison.TeamId = data.TeamId 
```

这种静态子查询技术广泛适用于许多情况。

# java - 使用 JDBC 在 SQLite 数据库中插入电子邮件

> ID：15863415
> 
> 赞同：0
> 
> 时间：2013-04-07T14:20:23.360
> 
> 标签：java, sqlite, sqlitejdbc

我正在尝试将电子邮件 ID 插入到我的 SQLite3 数据库中的表中。在我的情况下，它成功创建了表，但在其中插入记录时出错 - “靠近“@gmail”：语法错误”。我该如何解决这个问题？这是代码 -

```
public void insertData(String emailId, double gtse, long receivedDate) throws ClassNotFoundException, SQLException{
    Class.forName("org.sqlite.JDBC");
    Connection connection = null;

    try
    {
      // create a database connection
      connection = DriverManager.getConnection("jdbc:sqlite:testdb.sqlite");
      Statement statement = connection.createStatement();
      statement.setQueryTimeout(30);  // set timeout to 30 sec.

      ResultSet result = statement.executeQuery("SELECT name FROM sqlite_master WHERE type='table' AND name='T1'");
      if(!result.next()){
          statement.executeUpdate("create table T1 (email TEXT, gtse REAL, receiveddate DATE)");

      statement.executeUpdate("insert into T1 values(" + emailId + ", "+ gtse +", "+ receivedDate +")");      
      }
      else{

      }

    }
    catch(SQLException e)
    {
      // if the error message is "out of memory", 
      // it probably means no database file is found
      System.err.println(e.getMessage());
    }
    finally
    {
      try
      {
        if(connection != null)
          connection.close();
      }
      catch(SQLException e)
      {
        // connection close failed.
        System.err.println(e);
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:35:16.537

您的核心错误是，对于插入查询，您没有将要插入的值括在引号中。您的查询在构建后看起来像这样：

```
insert into T1 values(whatever@gmail.com, emailtexthere,  04-07-2013) 
```

什么时候应该是这样的：

```
insert into T1 values('whatever@gmail.com', 'emailtexthere',  '04-07-2013') 
```

SQL 解析器在尝试解析当前查询时阻塞，因为语法不正确。这个问题的解决方案***不是***简单地将值括在引号中，而是使用[准备好的语句](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)。这是因为您现在构建查询的方式很容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。以下是使用准备好的语句的示例：

```
PreparedStatement pStmt = conn.prepareStatement(
    "INSERT INTO T1 VALUES(?, ?, ?)");
pStmt.setString(1, emailId);
pStmt.setString(2, gtse);
pStmt.setDate(3, receivedDate);
pStmt.execute(); 
```

# mysql - 在 IF 条件下跳过查询字段

> ID：15863416
> 
> 赞同：0
> 
> 时间：2013-04-07T14:20:33.893
> 
> 标签：mysql

我的 MySQL 查询被发送到一个 csv，然后是一个 HTML 文件。当我做...

```
SELECT
field_a,
IF($VAR="yes",field_b,""),
field_c
FROM table
INTO OUTFILE "query.csv"; 
```

...正如预期的那样，我总是得到 3 列（field_a、field_b 或空、field_c）。当 $VAR 不是“是”时，我怎样才能只获得 2 列（field_a，field_c）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:47:06.150

动态构建您的查询。看起来您的`$VAR`情况不依赖于数据。然后你可以这样做（PHP 中的示例）：

```
$fields = 'field_a' ;
if ($VAR == 'yes') $fields .= ', field_b' ; // and so on
$query = "SELECT $fields FROM table" ; 
```

# jpa - 为什么事务不能在带有 @REQUIRES_NEW 注释的自调用 ejb 方法中提交

> ID：15863418
> 
> 赞同：1
> 
> 时间：2013-04-07T14:20:52.873
> 
> 标签：jpa, ejb, java-ee-6, jta, jboss6.x

首先，我想解释一下我在这种情况下的自调用 ejb 方法。我有一个有状态的会话 bean，它有一个启动新事务的方法（由 注释`@REQUIRES_NEW`）。为了在bean本身内部调用这个方法并使注解生效，我使用`SessionContext#getBusinessObject()`来实现`@EJB`（**`@EJB`here会导致stackoverflow？！**）的效果。我的代码如下所示：

```
@Stateful
@Local
public class TransactionTest implements ITransactionTest {

  @PersistenceContext(unitName="Table",Type=PersistenceContextType.EXTENDED)

  private EntityManager manager;

  @Resource
  SessionContext sc;

  ITransactionTest me;

  @PostConstruct
  public void init(){
    me = this.sc.getBusinessObject(ITransactionTest.class);
  }

  public void generateRecord(int i) throws RuntimeException{
    Record record = new Record();
    record.setId(i+"");
    record.status(1);
    manager.persist(record);
    manager.flush();  //If not flush, result is correct. Why? 
    me.updateRecord(i);
  }

  @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
  public void updateRecord(int i) throws RuntimeException{
    try {
      Record record = manager.find(Record.class, i+"");
      record.setStatus(2);
      manager.flush();
    } catch(Exception e) {
      e.printStackTrace();
      throw new RuntimeException();
    }
  }
} 
```

同时，`generateRecord()`运行正常。控制台显示它毫无例外地执行“插入”和“更新”HQL（我使用 Hibernate 作为 JPA 提供程序）。但是，“更新”结果不会出现在数据库中。**为什么？是否`updateRecord()`正确提交？**

另外，我以两种替代方式尝试它：首先是调用`generateRecord()`（它将不再调用`updateRecord()`），然后`updateRecord()`是在另一个 bean 中连续调用。它可以给我正确的结果。

第二个是删除第一个`flush()`。然后 'insert' 和 'update' HQL 都将在第二个执行`flush()`。这种方法也可以产生正确的结果。

我的程序在 JBOSS 6.1.0-Final 下运行，数据库是 Oracle。

此致，

卡杰拉斯

# c++ - 在 windows 中使用 c++ 创建 powerpoint 演示文稿

> ID：15863420
> 
> 赞同：0
> 
> 时间：2013-04-07T14:21:05.020
> 
> 标签：c++, powerpoint

我正在尝试使用 windows api 并创建一个 powerpoint 演示文稿并将演示文稿保存为 pps 格式。例如 a.pps。然后我想在 Visual Studio 中编写一个程序，将 a.pps 创建为进程并执行它，尝试使用幻灯片进行操作，然后终止该进程。

有没有这样的方法，或者任何人都可以指导我正确的方式吗？

# c++ - gcc 是否优化递归函数？怎么做？

> ID：15863421
> 
> 赞同：4
> 
> 时间：2013-04-07T14:21:09.030
> 
> 标签：c++, c, optimization, gcc, recursion

我今天发现了一个关于 gcc 的有趣测验[http://ridiculousfish.com/blog/posts/will-it-optimize.html](http://ridiculousfish.com/blog/posts/will-it-optimize.html)

这个代码怎么来的

```
int factorial(int x) {
   if (x > 1) return x * factorial(x-1);
   else return 1;
} 
```

可以被编译器翻译成

```
int factorial(int x) {
   int result = 1;
   while (x > 1) result *= x--;
   return result;
} 
```

这是真的？gcc是怎么做到的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T14:46:52.780

您已经知道 gcc 可以将尾递归函数优化为循环。gcc 可以做的另一件事（并且在您的链接中提到）是尝试将非尾递归函数优化为尾递归函数。

您的阶乘函数在这里：

```
int factorial(int x) {
   if (x > 1) return x * factorial(x-1);
   else return 1;
} 
```

现在我将尝试进行尽可能少的更改并将其重写为尾递归。首先，我将翻转 if 测试：

```
int factorial(int x) {
   if (!(x > 1)) return 1;
   else return x * factorial(x-1);
} 
```

接下来，我将删除不需要的`else`：

```
int factorial(int x) {
   if (!(x > 1)) return 1;
   return x * factorial(x-1);
} 
```

这几乎是尾递归的，但它正在返回`x * factorial()`，而不仅仅是`factorial()`. 使这个尾递归的典型方法是包含第二个参数，它是一个累加器。

```
int factorial(int x, int accumulator = 1) {
   if (!(x > 1)) return accumulator;
   return factorial(x - 1, x * accumulator);
} 
```

现在这是一个尾递归函数，可以优化成一个循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T14:31:26.697

通过将乘法放在递归函数调用之前，编译器可以将该代码转换为可优化的尾部调用：

```
int factorial(int x) {
    return factorial_tail_call(x, 1);
}

int factorial_tail_call(int x, int result) {
    if (x > 1) return factorial_tail_call(x-1, result*x);
    return result;
} 
```

通过递归调用`result*x`before的评估`factorial_tail_call`，编译器可以确定`x`并且`result`不再需要。因此，它可以将它们从堆栈中弹出。这证明了堆栈*不需要*增长。

你能看到转换后的代码之间有什么相似之处吗？在`1`同一个地方，条件`x > 1`在同一个地方，`return result;`在同一个地方。提供编译器实现尾调用优化，这只是表达相同算法的不同方式。通过将乘法表达式移动到一个参数中并将您的帖子中的代码放在注释中，您可能会看到一些功能相似之处，以及编译器如何设法进行其余的转换：

```
int factorial(int x) {
    return factorial_tail_call(x, 1);                     // int result = 1;
}

int factorial_tail_call(int x, int result) {
    if (x > 1) return factorial_tail_call(x-1, result*x); // while (x > 1) result *= x--;
    return result;                                        // return result;
} 
```

**n1570.pdf 的§5.1.2.3p4**

> 在抽象机中，所有表达式都按照语义的规定进行评估。如果一个实际的实现可以推断出它的值没有被使用并且没有产生所需的副作用（包括调用函数或访问易失性对象引起的任何副作用），则它不需要评估表达式的一部分。

编译器是聪明的东西，由比我们大多数人优秀得多的程序员编写。如果编译器可以确定两段代码是等价的，那么它可以选择它希望的两者中的任何一个（有一些限制，在下面的引用中描述）。例如，它可以用一个`printf`表达式替换一个计算和打印前一千个素数的循环。

**n1570.pdf 的§5.1.2.3p6**

> 对一致性实现的最低要求是：
> 
> — 对 volatile 对象的访问严格按照抽象机的规则进行评估。
> 
> — 在程序终止时，写入文件的所有数据应与根据抽象语义执行程序所产生的结果相同。
> 
> — 交互设备的输入和输出动态应按照 7.21.3 的规定进行。这些要求的目的是尽快出现无缓冲或行缓冲的输出，以确保在程序等待输入之前实际出现提示消息。
> 
> 这是程序的可观察行为。

这就是为什么微优化是徒劳的原因之一。

如果另一个线程修改了 strlen 正在处理的字符串，那就是竞争条件。竞争条件是未定义的行为。您需要使用互斥锁保护字符串以确保不会发生这种情况，或者学习更好的多线程范例。你在看哪本书？

**n1570.pdf 的§5.1.2.4p25**

> 如果程序的执行包含不同线程中的两个冲突操作，则该程序的执行包含数据竞争，其中至少一个不是原子的，并且两者都不会在另一个之前发生。任何此类数据竞争都会导致未定义的行为。

# c++ - 初学者 C++、指针和继承错误

> ID：15863422
> 
> 赞同：0
> 
> 时间：2013-04-07T14:21:12.483
> 
> 标签：c++, visual-c++

然而，我是一个精通 csharp 的初学者 c++ 程序员。

对于我的任务，我们必须创建一个基于文本的迷宫游戏，到目前为止，我有一个头文件，其中包含方向声明和设置方向 N、S、W、E 的方法

我主要有gets 和sets 来设置房间可以进入的方向。下面是代码示例，我包含了每个语句中的一个来缩短长度，即只有南get 和sets。

```
void Room::setS(Room* nextRoom)
{
south = nextRoom;
}

Room* Room::gS(){return south;}

Room* A = new Room("A");
Room* B = new Room("B");

A->setE(B);
A->setS(E);

Room* myPosistion = A;
string location = *myPosistion->gName();

while(location !="L")
{
    cout << "You are In Room "<< location << endl;
    } 
```

在 while 循环中，我需要能够访问 Room::Methods，(Room::gS())，所以类似于

```
if(location->gS() == NULL
//do nothing
else 
{
  cout<<"1\. South"<<endl;
} 
```

问题是，我无法获取位置变量来访问 Room:: 方法，我知道我错过了一些非常基本的东西，但就是无法理解它。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:15:56.680

您需要使用指向对象的指针而不是包含名称的字符串

尝试更多的东西：

```
while(myPosistion->gName().compare("L") != 0 )
{
    cout << "You are In Room "<< myPosistion->gName() << endl;
    if( myPosistion->gS() != NULL )
    {
        cout << "1\. South : "<< myPosistion->gS()->gName() << endl;
    }
    //TODO some processing here!
} 
```

当您使用位置变量 ( `string`) 时，您对对象的引用

# iphone - 一个视图中有 2 个文本字段的两个选择器

> ID：15863426
> 
> 赞同：1
> 
> 时间：2013-04-07T14:21:59.050
> 
> 标签：iphone, uipickerview

我有 2 个文本字段。每个都有自己的选择器视图。当用户单击它们中的每一个时，会出现 UIPickerView。一切正常。但是，当我首先单击第二个文本字段时，会出现第二个文本字段的选择器视图，并且第一个文本字段从这个选择器视图中获取结果，而不是第二个。我的代码有问题。我无法弄清楚到底是什么。请帮助...在此先感谢）

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField{

    if (textField == reminder){
        choosen = reminderString;
        mySheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
        [mySheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];
        myArray = [[NSMutableArray alloc]initWithObjects: @"15 minutes",@"20 minutes",@"30 minutes", @"45 minutes",nil];

        CGRect pickerFrame = CGRectMake(0,44,0,0);
        UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
        pickerView.delegate =self;
        pickerView.dataSource=self;
        pickerView.showsSelectionIndicator = YES;
        [mySheet addSubview:pickerView];

        UIToolbar *controlToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, mySheet.bounds.size.width, 44)];

        [controlToolBar setBarStyle:UIBarStyleBlack];
        [controlToolBar sizeToFit];

        UIBarButtonItem *spaser = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
        UIBarButtonItem *setButton = [[UIBarButtonItem alloc] initWithTitle:@"set" style:UIBarButtonItemStyleDone target:self action:@selector(DatePickerDoneClick)];
        UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelRepetition)];

        [controlToolBar setItems:[NSArray arrayWithObjects:spaser, setButton, cancelButton,nil] animated:NO];

        [mySheet addSubview:controlToolBar];
        [mySheet showInView:self.view];
        [mySheet setBounds:CGRectMake(0, 0, 320, 485)];

        return NO;
    }
    else if(textField == repetition){
        choosen = repetitionString;
        repetitionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
        [mySheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

        myArray = [[NSMutableArray alloc] initWithObjects:@"One-time task",@"Daily",@"Weekly",@"Yearly",nil];

        CGRect pickerFrame = CGRectMake(0,44,0,0);
        UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
        pickerView.delegate =self;
        pickerView.dataSource=self;
        pickerView.showsSelectionIndicator = YES;
        [mySheet addSubview:pickerView];

        UIToolbar *controlToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, mySheet.bounds.size.width, 44)];

        [controlToolBar setBarStyle:UIBarStyleBlack];
        [controlToolBar sizeToFit];

        UIBarButtonItem *spaser = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
        UIBarButtonItem *setButton = [[UIBarButtonItem alloc] initWithTitle:@"set" style:UIBarButtonItemStyleDone target:self action:@selector(DatePickerDoneClick)];
        UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelRepetition)];

        [controlToolBar setItems:[NSArray arrayWithObjects:spaser, setButton, cancelButton,nil] animated:NO];

        [mySheet addSubview:controlToolBar];
        [mySheet showInView:self.view];
        [mySheet setBounds:CGRectMake(0, 0, 320, 485)];

        return NO;
    }
    else{
        return 0;
    }
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return myArray.count;
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
   return [myArray objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    if (chosen == reminderString) {
        reminderString =[myArray objectAtIndex:row];
        [reminder setText:reminderString];
    }
    else if (chosen == repetitionString){
        reminderString =[myArray objectAtIndex:row];
        [repetition setText:reminderString];
    }
}

- (void)DatePickerDoneClick{
    [mySheet dismissWithClickedButtonIndex:0 animated:YES];
}

-(void)cancelRepetition{
    [mySheet dismissWithClickedButtonIndex:0 animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T04:23:58.060

您可以为选择器命名，然后区分它们为 ex Picker1 和 picker2 并在 didselectrow 中放置条件

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

  if(pickerview == picker1)
{
 reminderString =[myArray objectAtIndex:row];
        [reminder setText:reminderString];
}

elseif(pickerview == picker2)
{

   reminderString =[myArray objectAtIndex:row];
        [repetition setText:reminderString];
} 
```

# c++ - 垃圾收集器：对象图的数据结构

> ID：15863431
> 
> 赞同：1
> 
> 时间：2013-04-07T14:22:38.197
> 
> 标签：c++, data-structures, graph, garbage-collection

我阅读了许多关于垃圾收集的资源，它们解释了不同的算法。但是，我没有找到任何解释图形对象的表示。

我的想法很简单：一个有向图，其中顶点代表分配的内存块（在堆上），边代表所有者关系。示例：考虑 2 个内存块 m1 和 m2，如果 m1 包含对 m2 内部块的引用，则添加一条边 (m1, m2)。这些边使用 m1 包含的对 m2 的引用数（这里只有 1 个）加权。最后我得到了一个代表堆栈的“虚拟”内存顶点，称之为 M0。从 M0 到达的每个 Mi 都不能被垃圾收集。

好的，现在考虑您要向图中添加一个内存块。如果我们将顶点保留在一个集合中，那么添加一个内存块的复杂度应该是 O(log(n))。第一个问题：我们能做得更好吗？

同上删除。

现在，我被要求将此算法与 C++ 中的引用计数机制 (shared_ptr) 一起使用。首先，参考计数器是否与顶点的入度无关？

其次，关键思想是使用最好的引用计数器（O（1）删除/添加）和最好的垃圾收集器算法（清理引用周期），但是添加/删除对象中每个节点的开销图是不是有点低效？

在已知的垃圾收集器（java / C# / ...）中添加/删除的复杂性是什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:27:19.093

嗯...你的前提是错误的。已知的垃圾收集器实际上并没有维护太多状态，每个对象最多只有几个*位*和一些结构，但仅此而已。相反，他们在每个收集过程中建立一些状态，并让它在过程结束时消失。这样，他们几乎不需要（甚至不需要）所有权关系的检测。

# lucene - Lucene 搜索如何工作？

> ID：15863432
> 
> 赞同：1
> 
> 时间：2013-04-07T14:22:49.387
> 
> 标签：lucene

我正在测试 Lucene 索引/搜索，但我有疑问。为了测试我创建了一些简单的文件。例子：

**mark_test_mark.txt**

标记测试标记

**一个.txt**

标记测试标记标记测试标记标记测试标记标记测试标记

* * *

我提取文件的内容，我也在索引它。我正在以这种方式创建要索引的文档：

```
doc.add(new Field(FILE_NAME, index.getFileName().trim(), Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.YES));
doc.add(new Field(FILE_NAME_LOWER, index.getFileName().toLowerCase().trim(), Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.YES));
doc.add(new Field(CONTENT, index.getFileContent(), Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.YES)); 
```

我的问题是当我对“mark”之类的关键字进行搜索时。Lucene 向我返回以下结果：

```
mark_test_mark.txt  -> 0.36452034 

a.txt   -> 0.36452034 
```

其中，第一部分表示文件名，第二部分表示搜索分数。

在我看来，这两个文件的分数不同，第一个文件应该是a.txt。

我错了吗？

编辑：我忘了说我是按名称和内容搜索的，所以我进行了多字段搜索。我正在使用此代码来执行此操作：

```
IndexReader reader = IndexReader.open(Indexer.getFSDirectory(searchDirectory));

IndexSearcher searcher = new IndexSearcher(reader);

Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);

MultiFieldQueryParser queryParser = new MultiFieldQueryParser(Version.LUCENE_36, new String[] {Indexer.FILE_NAME_LOWER, Indexer.CONTENT}, analyzer);

TopDocs topDocs = null;

try {
    topDocs = searcher.search(queryParser.parse(searchQuery.getQuery()), getHitsPerPage());

} catch (ParseException e) {
    e.printStackTrace();

}

ScoreDoc[] hits = topDocs.scoreDocs; 
```

# ruby-on-rails - 使用 collection_select 参数过滤

> ID：15863433
> 
> 赞同：2
> 
> 时间：2013-04-07T14:22:52.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search, filter, params

我有一个简单的表单，它允许用户根据表单字段`location_id`中给出的 过滤搜索结果。`collection_select`如果选择了特定位置，我想呈现缩小的结果，如果用户选择默认的“请选择”字段，则呈现所有结果。

此代码适用于单独的位置，但如果用户选择“请选择”字段则不起作用。`params[:location_id].blank?`在控制器不工作。

看法

```
<%= form_tag @city %>
  <%= collection_select 'location_id', nil, @city.locations, :id, :address, prompt: true %>
  <%= submit_tag "sort", :name => nil, class: "btn btn-success travel-button", id: "hotels-radius-search-button" %>
<% end %> 
```

控制器

```
if params[:location_id].blank?
  ...render all results...
else
  ..render specific results...
end 
```

**更新**

服务器的响应

选择默认“请选择”选项时的参数 - 不起作用

```
Parameters: {"utf8"=>"✓", "search_radius"=>"6", "location_id"=>[""], "_"=>"1365350127863", "id"=>"75"} 
```

用户在菜单中选择任何选项时的参数 -- 成功

```
Parameters: {"utf8"=>"✓", "search_radius"=>"6", "location_id"=>["811"], "_"=>"1365350127865", "id"=>"75"} 
```

或者

```
Parameters: {"utf8"=>"✓", "search_radius"=>"6", "location_id"=>["808"], "_"=>"1365350127865", "id"=>"75"} 
```

ETC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:19:48.940

发布我的答案，因为无法接受评论:-)

`collection_select`被使用并且正在发送一个`Array`.

因此建议使用 of `select_tag`。

# iphone - 让对象在从超级视图中删除后向其自己的委托发送消息

> ID：15863435
> 
> 赞同：1
> 
> 时间：2013-04-07T14:23:00.667
> 
> 标签：iphone, ios, cocoa-touch

我有以下方法：

```
- (void) okButtonPushed
{
    if ([self.delegate respondsToSelector:@selector(alertViewWillDismiss:)])
    {
        [self.delegate alertViewWillDismiss:self];
    }

    [self removeFromSuperview];
} 
```

这是一个自定义`AlertView`对象上的 OK 按钮，当按下它时会解除警报。我希望代表在从超级视图中删除警报后发送一条消息，但显然这是不可能的，因为届时它将被释放。我能想到的唯一其他解决方案是让超级视图保留另一个指向我的对象的指针，但是每次我发出警报时，我都必须隐含地知道要确保保留另一个指向它的指针。在我的课堂上是否有更清洁的方法来做到这一点`AlertView`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:34:01.330

您可以使用[willMoveToSuperview:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/willMoveToSuperview%3a "willMoveToSuperview：")回调 (

```
-(void)willMoveToSuperview:(UIView *)newSuperview {
    if (newSuperview == nil) {    
        if ([self.delegate respondsToSelector:@selector(alertViewWillDismiss:)]) {
            [self.delegate alertViewWillDismiss:self];
        }
    }
} 
```

它将在视图被释放之前被调用，就*在*它被真正从超级视图中删除之前（使用*newSuperview == nil*）。

编辑：如果你希望它*在*它被（重新）移动之后 - 使用[didMoveToSuperview：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/didMoveToSuperview "didMoveToSuperview")

# emacs - caml-mode 是否缩进注释？

> ID：15863439
> 
> 赞同：3
> 
> 时间：2013-04-07T14:23:25.910
> 
> 标签：emacs, indentation, ml

我正在`.ml`编辑`Emacs`. 我的默认模式是`caml-mode`.

我意识到`Tab`在一行或`M-x indent-region`一个区域上不会调整评论的位置，而`tuareg-mode`这样做。

不`caml-mode`缩进评论自然吗？有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:18:42.667

查看源代码会发现，`caml-mode`根本没有缩进注释。根本原因[`caml-compute-final-indent`在于`caml.el`](https://github.com/ocaml/ocaml/blob/18962fdd15a6371de6e62d4c32bb761642d3fb4a/emacs/caml.el#L1635)：

```
(defun caml-compute-final-indent ()
  (save-excursion
    (back-to-indentation)
    (cond
     ((and (bolp) (looking-at comment-start-skip)) (current-column))
     ((caml-in-comment-p)
      (let ((closing (looking-at "\\*)"))
            (comment-mark (looking-at "\\*")))
        (caml-backward-comment)
        (looking-at comment-start-skip)
        (+ (current-column)
           (cond
            (closing 1)
            (comment-mark 1)
            (t (- (match-end 0) (match-beginning 0)))))))
     (t (let* ((leading (looking-at caml-leading-kwops-regexp))
               (assoc-val (if leading (assoc (caml-match-string 0)
                                             caml-leading-kwops-alist)))
               (extra (if leading (symbol-value (nth 1 assoc-val)) 0))
               (prio (if leading (nth 2 assoc-val)
                       caml-max-indent-priority))
               (basic (caml-compute-basic-indent prio)))
          (max 0 (if extra (+ extra basic) (current-column)))))))) 
```

此函数计算点处线的缩进偏移量。表达式中的第一个分支`cond`处理注释的开头，并简单地返回原始缩进偏移量不变。

要解决此问题，您必须重新实施或建议`caml-compute-final-indent`. 可能——我不确定，也没有测试过——将整个实现复制到你的`init.el`，然后完全删除第一个`cond`分支就足够了。在这种情况下，缩进将由最后一个分支处理，该分支计算表达式的缩进偏移量。这可能，或者更有可能不起作用。

从我在源代码中看到的内容来看，我建议不要使用`caml-mode`. 代码已经过时，并且没有遵循现代 Emacs 模式的许多强制约定，也没有使用现代 Emacs 版本提供的功能来处理缩进。它并[没有真正积极维护](https://github.com/ocaml/ocaml/blob/trunk/emacs/caml.el)，最近的更改是小错误或格式修复。所有重大贡献都发生在至少五年前。

真正使用`tuareg-mode`，充其量来自提供来自`tuareg-mode`SVN 的最新快照的 MELPA。的发展`tuareg-mode`也有些昏昏欲睡，但[至少与最近两年发生了一些重大变化](https://forge.ocamlcore.org/scm/browser.php?group_id=43)。

# qt - 从 QTab（在 QTabWidget 中）连接回 QMainWindow

> ID：15863441
> 
> 赞同：0
> 
> 时间：2013-04-07T14:23:31.473
> 
> 标签：qt, connect, tabwidget

我的应用程序的主要部分是一个系统托盘菜单。对于维护，应该有一个正常的 GUI。

我的问题是现在我必须从每个选项卡创建两个信号/插槽连接回到主窗口。这是为了最小化 GUI 和更新菜单。我不知道该怎么做。

我试图`this->parent->parent`从 ManageSession 和`ui_manag->session_ui->minimizeButton`MainWindow 连接。我脑子里有个小疙瘩，正在寻求帮助。还是我应该重新考虑我的设计？我只使用 QtCreator 2.6.1 和 Qt 4.8.4。

[GUI 元素的屏幕截图](http://firewall.ztweb.de/StackOverflow-Screenshots.jpg)

这是 mainwindows.cpp：

```
MainWindow::MainWindow(QWidget *parent)
: QMainWindow(parent)
{
 setWindowTitle(QCoreApplication::applicationName());
 QWidget *mainWidget = new QWidget;
 QTabWidget *ui_manag = new ManageTab;
 QVBoxLayout *mainLayout = new QVBoxLayout;
 mainLayout->addWidget(ui_manag);
 mainWidget->setLayout(mainLayout);
 setCentralWidget(ui_manag);
 ui_manag->setCurrentIndex(0);
 //Here comming Code to setup a TrayIcon, the Database and the Menus
} 
```

Tab 完全由 Designer 生成：

```
ManageTab::ManageTab(QWidget *parent) :
QTabWidget(parent),
tab_ui(new Ui::ManageTab)
{
 tab_ui->setupUi(this);
} 
```

对于每个设置，我使用具有多重继承的相同 GUI：

```
ManageSession::ManageSession(QWidget *parent) :
QWidget(parent),
session_ui(new Ui::ManageWidget)
{
 session_ui->setupUi(this);
 session_ui->manageLabel->setText(tr("Manage Session"));

 connect(session_ui->addButton, SIGNAL(clicked()), this, SLOT(addButton_clicked()));
 connect(session_ui->editButton, SIGNAL(clicked()), this, SLOT(editButton_clicked()));
 connect(session_ui->deleteButton, SIGNAL(clicked()), this, SLOT(deleteButton_clicked()));
}
//Here follows the Functions for manipulating the TableView
// and emmiting a Signal to Update the Menu 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:55:39.763

让我们在答案中重新制作它（这样您就可以接受它，呵呵。j / k，渴望发表评论）：

第一的。正如我在评论中所说：

您在没有指定访问权限的情况下继承。所以它默认为私有。这就是为什么

```
ui_manag->session_ui->minimizeButton 
```

不允许您访问该按钮。

第二。parent 是一个方法，所以它是： this->parent()->parent() 或只是 parent()->parent() ;) 同样，它可能需要继承 public。不确定，寿。那应该可以。

# c++ - 将任意数量的迭代器对折叠成一个新的迭代器。元编程以获得良好的语法？

> ID：15863442
> 
> 赞同：2
> 
> 时间：2013-04-07T14:23:45.840
> 
> 标签：c++, c++11, variadic-templates, template-meta-programming

我有一个算法，它采用两个范围并返回一个迭代的范围，动态计算，第一个范围中元素的特殊子集，基于第二个范围的内容。特殊子集本身又可以在另一个集合上通过该算法运行。一切正常，但我正在努力尝试使用可变参数模板改进 api。下面 main 函数的最后一个子句说明了目标。

```
template <class ContainerLeft, class ContainerRight>
class joincalc_const_iter : public std::iterator<std::input_iterator_tag, typename ContainerLeft::difference_type> {
public:
    joiner_const_iter& operator++(); /* does complicated stuff to find the next member of a subset in left. */

    const typename ContainerLeft::value_type& operator*() const;

    const ContainerLeft* left = nullptr;
    const ContainerRight* right = nullptr;

...
};

template <class ContainerLeft, class ContainerRight>
class JoinCalc {
public:
    typedef joincalc_const_iter<ContainerLeft, ContainerRight> const_iterator;

    const_iterator begin() const;
    const_iterator end() const;
...
};

template<class L, class R>
JoinCalc<L, R> join(const L& left, const R& right)
{
    return JoinCalc<L, R>(left, right);
}

int main()
{
    SomeSequence a{...}, b{...};
    SomeSequenceDifferentType c{...}, d{...};

    /* Works great. */
    for (const auto& n : join(a, c))
        std::cout << n << "\n";
    for (const auto& n : join(a, b))
        std::cout << n << "\n";

    /* Works, but is a pain to write. I'm trying and failing at using variadic
     * templates to automate this. The goal is to write: join(a, b, c, d); */
    for (const auto& n : join(join(join(a, b), c), d))
        std::cout << n << "\n";
} 
```

我想人们可以求助于宏，但似乎我正在拍摄的东西应该可以通过可变参数模板实现。我只是不够敏锐，无法弄清楚，我对错误感到困惑。有没有办法只用一个模板函数来做到这一点？还是你必须用容器语义构建一个类似元组的东西？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:29:12.390

除此之外，

```
template<class L, class R>
JoinCalc<L, R> join(const L& left, const R& right)
{
    return JoinCalc<L, R>(left, right);
} 
```

也定义这个，

```
//it is an overload, not specialization

template<class L, class R, class ...Rest>
auto join(const L& left, const R& right, Rest const & ... rest) 
                    -> decltype(join(JoinCalc<L, R>(left, right), rest...))
{
    return join(JoinCalc<L, R>(left, right), rest...);
} 
```

注意尾随返回类型。

**它是如何工作的？**

如果有超过 2 个参数，将调用第二个重载，否则将调用第一个重载。

顺便说一句，我建议您接受参数作为通用引用，并使用`std::forward`将参数转发给构造函数和其他重载。

# ruby-on-rails - m[1][/_pages/] 在 Guardfile

> ID：15863448
> 
> 赞同：0
> 
> 时间：2013-04-07T14:24:14.170
> 
> 标签：ruby-on-rails, tdd, guard

我正在查看[Michael Hartl 的在线书籍](http://ruby.railstutorial.org/chapters/static-pages#sec-first_tests)，并为他的`Guardfile`.

```
watch(%r{^app/controllers/(.+)_(controller)\.rb$})  do |m|
    ["spec/routing/#{m[1]}_routing_spec.rb",
     "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb",
     "spec/acceptance/#{m[1]}_spec.rb",
     (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : 
                       "spec/requests/#{m[1].singularize}_pages_spec.rb")] 
```

最后一点有什么作用：

`(m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" : "spec/requests/#{m[1].singularize}_pages_spec.rb")]`)

我知道那`m[1]`将是控制器的名称，但该`[/_pages/]`部分完成了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:22:18.737

您可以使用正则表达式从字符串中获取子字符串。它返回第一个匹配项，或者`nil`如果没有找到匹配项。

```
string = "foobar"
string[/[ab]/] # => "b"
string[/ab/]   # => nil 
```

但是，Michael 使用它作为一个简单的检查正则表达式是否匹配。您可能已经看到它是用`=~`运算符编写的：

```
m[1] =~ /_pages/ ? something : something_else 
```

# java - 关于 Java 接口和多态性

> ID：15863450
> 
> 赞同：3
> 
> 时间：2013-04-07T14:24:39.473
> 
> 标签：java, interface

我在阅读 Java 文档时遇到了一个奇怪的案例。这是 Oracle 的关于 Arrays.asList 方法的 java 文档的链接，[http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList(T...)](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList(T...))

文档中有一个示例

```
List<String> stooges = Arrays.asList("Larry", "Moe", "Curly"); 
```

我的问题是，由于 List 是一个接口，为什么我们可以将 stooges 声明为“List”，而不是实现 List 的具体子类（例如 ArrayList 或 LinkedList）？那么这是否意味着我们可以有一个接口类型的引用变量呢？对我来说这看起来很奇怪，因为我一直认为接口只代表多态性，我们永远不应该真正使用接口类型变量。

谁能给我一些线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:31:28.337

将 List 接口视为一种保证。任何实现 List 的类都将保证具有接口的方法。当 Arrays.asList() 返回一个 List 时，您实际上并没有获得接口，**而是获得了一个保证实现 List 接口中列出的方法的具体类**。

至于您的“我们永远不应该真正使用接口类型变量”，您实际上应该这样做。它被称为“接口编程”。如果你可以返回一个列表而不是像 LinkedList 这样的东西，它会更加灵活。您的方法的调用者不耦合到您可能使用并返回 LinkedList 的特定实现内部实现。如果在某些时候您想返回一个 ArrayList 而不是 LinkedList，则调用者不必更改任何代码，因为他们只关心接口。

[“编程到接口”是什么意思？](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)

请注意，Serializable 是一个标记接口，因此有点奇怪。它不保证方法存在，而是保证实现可序列化的类的创建者已经考虑了与序列化类相关的许多问题（覆盖 readObject/writeObject、与其他序列化形式的兼容性以及其他问题[http： //www.javapractices.com/topic/TopicAction.do?Id=45](http://www.javapractices.com/topic/TopicAction.do?Id=45)）。所以 Serializable 仍然提供保证，就像 List 一样，但它不是关于方法签名，而是关于语言的语言外特性。

[http://en.wikipedia.org/wiki/Marker_interface_pattern](http://en.wikipedia.org/wiki/Marker_interface_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:28:47.120

使用接口作为引用类型在 Java 中是一种完全有效的做法。例如，`Serializable`接口将在其类中执行此操作，以便传递给它的任何对象都可以序列化。

这也是 Java 提供类似于[Multiple Inheritance](http://csis.pace.edu/~bergin/patterns/multipleinheritance.html)的方式的方式。例如：

```
public interface A { }
public class B implements A {}

public class program {
     B bClass = new B();
     A aObject = (A)bClass;
} 
```

这样就可以用不同的引用类型来引用同一个对象，而且不会弄乱继承链！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:38:35.397

接口为实现定义了一个`contract`或一个`specification`。这是方法及其签名。所以实现接口的类必须尊重它`contract`。这样，您可以在不影响使用接口声明变量的代码的情况下更改实现。

在您提到的示例中：

1.  除非您查看代码，否则您不知道`List`接口的实现是什么。`Arrays.asList`那么你怎么知道使用哪一个呢？（有关列表接口，请参阅 javadoc 以查看它具有哪些实现）

2.  实现可能会发生变化，如果`Arrays.asList`决定使用另一个实现怎么办？您的代码将被破坏。

3.  该方法的签名`Arrays.asList`是它返回`List<T>`，所以如果你想有一个具体的实现作为变量，你必须强制转换返回值，这是不好的做法，或者创建新的 - 比如说`ArrayList`- 并将所有元素复制到其中，这只是不必要的开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T14:51:32.760

[*Bloch的*Effective Java**](http://books.google.com/books/about/Effective_Java.html?id=Ft8t0S4VjmwC)*是一本关于 Java 最佳实践的好书。特别是， [item #52](http://samsnyder.com/2011/12/25/effective-java/)谈到了这一点：“如果存在适当的接口类型......使用接口类型声明。”*

 *一般的概念是，为了获得最大的灵活性和可理解性，您应该使用最能反映上下文的类型，通常是接口。在您提供的示例中，确切的实现是否重要，或者只是它是一个列表。当然，如果代码需要特定于 ArrayList 的方法，或者如果代码依赖于特定于 ArrayList 的行为，则使用具体类。

偶尔会有例外，例如在[使用 GWT-RPC](https://stackoverflow.com/a/3060233/11296)时，但这是出于实现原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T14:56:40.860

这是多态能力的一个很好的例子，如果你喜欢你可以看看*Arrays.asList()*的源代码这里[Arrays.asList(T...a)](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Arrays.java#Arrays.asList%28java.lang.Object%5B%5D%29)，你会发现它接受可变长度输入并定义了自己的实现*List*接口的私有静态具体类*ArrayList* ，而不是使用众所周知的*java.util.ArrayList*或其他 java *Collection*类型，这可能是为了使其更高效或其他什么，您想实现自己的类并将其返回给用户不会被实现细节压倒，因为他可以通过一个接口来处理你的私有类。*

# ruby-on-rails - 如何放置参数以便rails请求可以找到它

> ID：15863451
> 
> 赞同：0
> 
> 时间：2013-04-07T14:24:44.843
> 
> 标签：ruby-on-rails, http, http-get

我有以下一段 ruby​​ 代码：

```
authenticate_this(request.env["SOME_ID"]) 
```

我想知道的是如何在 HTTP GET 请求中放置这个“SOME_ID”。据我了解，这些rails请求参数是预设的？如果是这样，“SOME_ID”是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:03:40.540

Rails request parameters are available in the `params` hash. Put this next line in your ERB

```
= debug params 
```

This line will tell you all about the params hash. Key values include

```
params[:id]
params[:object_id] # In a route like users/1/listings/1, this would be params[:user_id]
params[:form_contents] # the contents of a form are available in params 
```

# android - 单击后退按钮时Android相机未关闭

> ID：15863453
> 
> 赞同：0
> 
> 时间：2013-04-07T14:24:54.863
> 
> 标签：android, android-intent, android-camera

我使用以下意图从我的应用程序中调用了本机相机：

```
 Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
    intent.putExtra( MediaStore.EXTRA_OUTPUT, Uri.fromFile(newFile) );
      startActivityForResult( intent, 0 ); 
```

当我运行应用程序时，本机相机按预期调用。但是当我点击硬件后退按钮关闭相机时，什么也没有发生！

相机拒绝关闭，无论我点击多少次后退按钮。有时我必须重新启动设备。

我尝试了以下选项：

```
@Override    
protected void onPause() 
{        
    super.onPause();
                stopService(intent);
} 
```

但是还是没有成功...

但是，我也注意到我的索尼设备出现了这种奇怪的行为。代码在三星平板电脑上运行良好。

任何建议都非常受欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:41:15.917

我将您的代码修改为

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
File photo = new File(Environment.getExternalStorageDirectory(), "Pic.jpg");
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
startActivityForResult(intent, 0); 
```

我在我的设备上进行了测试，`Sony Ericsson arc s`. 它工作并且后退按钮工作。

# iphone - TBXML textForElement 不解析一个元素

> ID：15863461
> 
> 赞同：1
> 
> 时间：2013-04-07T14:25:40.930
> 
> 标签：iphone, ios, tbxml

对于这个元素，我总是得到 null：`<address>Rua Santo Ubaldo, 28 - São Paulo</address>`

xml文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<music>
    <principal>
        <id>1</id>    
        <title>Woods Bar</title>
        <text>Sofisticação, essa é a palavra que resume o Wood´s São Paulo. Um ambiente para o paulistano exigente, que busca por diversão, gente bonita e requinte. O sertanejo para o público seleto, com excelência em serviços e uma arquitetura diferente de tudo o que você já viu. Venha se surpreender!</text>
        <thumb_url>http://www.semhora.com/xmlparser/principal/thumb.png</thumb_url>
        <photo1>http://www.semhora.com/xmlparser/principal/foto1.jpg</photo1>
        <photo2>http://www.semhora.com/xmlparser/principal/foto2.jpg</photo2>
        <photo3>http://www.semhora.com/xmlparser/principal/foto3.jpg</photo3>
        <photo4>http://www.semhora.com/xmlparser/principal/foto4.jpg</photo4>
        <photo5>http://www.semhora.com/xmlparser/principal/foto5.jpg</photo5>
        <flyer1>http://www.semhora.com/xmlparser/principal/flyer1.jpg</flyer1>
        <flyer2>http://www.semhora.com/xmlparser/principal/flyer2.jpg</flyer2>
        <address>Rua Santo Ubaldo, 28 - São Paulo</address>
        <latitude>-23.596089,-46.682393</latitude>
    </principal>
</music> 
```

块：

```
- (void)loadURL:(NSString *)newURL{

    // Create a success block to be called when the asyn request completes
    TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {

        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
        // If TBXML found a root node, process element and iterate all children
        if (tbxmlDocument.rootXMLElement)
        {

            // Obtain root element
            TBXMLElement * root = tbxml.rootXMLElement;
            if (root)
            {
                _storeArray = [NSMutableArray new];
                [_storeArray removeAllObjects];
                TBXMLElement * elem_PLANT = [TBXML childElementNamed:@"principal" parentElement:root];
                while (elem_PLANT !=nil)
                {
                    TBXMLElement * elem_title = [TBXML childElementNamed:@"title" parentElement:elem_PLANT];
                    NSString *titleName = [TBXML textForElement:elem_title];

//                    TBXMLElement * elem_artist = [TBXML childElementNamed:@"text" parentElement:elem_PLANT];
//                    NSString *artistName = [TBXML textForElement:elem_artist];

                    TBXMLElement * elem_thumb = [TBXML childElementNamed:@"thumb_url" parentElement:elem_PLANT];
                    NSString *thumbName = [TBXML textForElement:elem_thumb];

                    TBXMLElement * elem_photo1 = [TBXML childElementNamed:@"photo1" parentElement:elem_PLANT];
                    NSString *photo1Name = [TBXML textForElement:elem_photo1];

                    TBXMLElement * elem_photo2 = [TBXML childElementNamed:@"photo2" parentElement:elem_PLANT];
                    NSString *photo2Name = [TBXML textForElement:elem_photo2];

                    TBXMLElement * elem_photo3 = [TBXML childElementNamed:@"photo3" parentElement:elem_PLANT];
                    NSString *photo3Name = [TBXML textForElement:elem_photo3];

                    TBXMLElement * elem_photo4 = [TBXML childElementNamed:@"photo4" parentElement:elem_PLANT];
                    NSString *photo4Name = [TBXML textForElement:elem_photo4];

                    TBXMLElement * elem_photo5 = [TBXML childElementNamed:@"photo5" parentElement:elem_PLANT];
                    NSString *photo5Name = [TBXML textForElement:elem_photo5];

                    TBXMLElement * elem_flyer1 = [TBXML childElementNamed:@"flyer1" parentElement:elem_PLANT];
                    NSString *flyer1Name = [TBXML textForElement:elem_flyer1];

                    TBXMLElement * elem_flyer2 = [TBXML childElementNamed:@"flyer2" parentElement:elem_PLANT];
                    NSString *flyer2Name = [TBXML textForElement:elem_flyer2];

                    NSString *addressName = nil;

                    TBXMLElement * elem_address = [TBXML childElementNamed:@"address" parentElement:elem_PLANT];
                    if (elem_address) {
                    addressName = [TBXML textForElement:elem_address];
                    }
                    TBXMLElement * elem_latitude = [TBXML childElementNamed:@"latitude" parentElement:elem_PLANT];
                    NSString *latitudeName = [TBXML textForElement:elem_latitude];

                    NSDictionary *dictionary = [[NSDictionary alloc]initWithObjects:@[titleName, thumbName, photo1Name, photo2Name, photo3Name, photo4Name, photo5Name, flyer1Name, flyer2Name, addressName, latitudeName] forKeys:@[@"title", @"thumb_url", @"photo1", @"photo2", @"photo3", @"photo4", @"photo5", @"flyer1", @"flyer2", @"address", @"latitude"]];
                    elem_PLANT = [TBXML nextSiblingNamed:@"principal" searchFromElement:elem_PLANT];
                    [_storeArray addObject:dictionary];
                   [self startLoading:dictionary];
                     [[NSOperationQueue mainQueue] addOperationWithBlock:^{ [_carousel reloadData]; }];
                }

            }

        }

    };

    // Create a failure block that gets called if something goes wrong
    TBXMLFailureBlock failureBlock = ^(TBXML *tbxmlDocument, NSError * error) {
        NSLog(@"Error! %@ %@", [error localizedDescription], [error userInfo]);
    };

    // Initialize TBXML with the URL of an XML doc. TBXML asynchronously loads and parses the file.
    tbxml = [[TBXML alloc] initWithURL:[NSURL URLWithString:newURL]
                               success:successBlock
                               failure:failureBlock];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:46:10.330

这不是对您的“问题是什么”问题的真正答案，而是反馈问题可能不在您的 xml 处理代码中。

如您所见，您对 xml 有一个异步查询，该查询在成功分支上具有此解析器处理程序。为了简化测试，我在*AppDelegate*中使用了这个代码片段（test.xml 是您在上面指定的）：

```
TBXML *tbxml = [[TBXML alloc] initWithXMLFile:@"test.xml" error:nil];
TBXMLElement *root = tbxml.rootXMLElement;
if (root)
{
    NSLog(@"root found" );
    TBXMLElement * elem_PLANT = [TBXML childElementNamed:@"principal" parentElement:root];
    while (elem_PLANT !=nil)
    {
        NSLog(@"iter");
        NSString *addressName = nil;
        TBXMLElement * elem_address = [TBXML childElementNamed:@"address" parentElement:elem_PLANT];
        if (elem_address) {
            addressName = [TBXML textForElement:elem_address];
            NSLog(@"address=%@", addressName);
        }
        elem_PLANT = [TBXML nextSiblingNamed:@"principal" searchFromElement:elem_PLANT];
    }

} 
```

因此，执行此操作会在控制台中显示以下内容：

```
2013-04-09 13:26:49.258 stack2[96042:c07] root found
2013-04-09 13:26:49.265 stack2[96042:c07] iter
2013-04-09 13:26:49.275 stack2[96042:c07] address=Rua Santo Ubaldo, 28 - São Paulo 
```

要检查的区域可能是 1) 测试具有更多“主要”元素的真实 xml - 真实世界的 xml 文件可能会发生奇怪的事情 2) 围绕异步调用的一些事情，也许可以尝试使用[调度组](https://stackoverflow.com/questions/11590601/xcode-ensure-codes-after-blocks-run-later-for-nsurlconnection-asynchronous-requ)

评论：使用 TBXML v1.5，xcode 4.6.1

# javascript - 为什么这里出现“意外令牌”错误？

> ID：15863462
> 
> 赞同：2
> 
> 时间：2013-04-07T14:25:42.980
> 
> 标签：javascript, jquery, ajax, api, jsonp

我正在尝试从我的朋友目前正在处理的这个 API 中输出一个变量。API 是完全开放的，因此不需要身份验证。

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://profusum.se/js/jsonp.js"></script>
</head>
<body>
    <script>
        $.jsonp({
            url: "http://blackcab.didair.se/api/drivers",
            //callbackParameter: '',
            timeout: 45000,
            success: function (driversData, statusTwo) {
                $.each(driversData, function (i, data) {
                    var name = driversData.drivers[1].name;
                    document.write("<p> Namn: " + name);
                });
            },
        });
    </script>
</body>
</html> 
```

但是在使用 Chrome 开发人员工具时出现此错误：

```
Uncaught SyntaxError: Unexpected token :                               drivers:1 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:53:23.887

用jQuery确认返回的数据不是JSONP，不能转换成它：

```
$.getJSON( "http://blackcab.didair.se/api/drivers?callback=?",
            //callbackParameter: '',
            function (data) {
            console.log("this is data:",data);
}); 
```

结果是：

```
SyntaxError: invalid label
{"drivers":[{ 
```

该站点返回 JSON 而不是 JSONP。为了让另一个站点连接到 blackcab.didair.se，blackcab.didair.se 必须返回 JSONP 或设置 cors 响应标头（在 wikipedia 上查找 cors 和同源策略）。

目前 blackcab.didair.se 正在返回 JSON，这与 JSONP 不同

# android - 无法在 Android 中掌握 dp 单位

> ID：15863468
> 
> 赞同：0
> 
> 时间：2013-04-07T14:26:37.867
> 
> 标签：android, android-layout

所以，我google了很多，但仍然不能安静地掌握这个概念。我有 3 个文件夹：xhdpi、lhdpi 和 mhdpi。我确实了解不同倾角和屏幕密度的转换和缩小。当应用程序运行时，Android 会为正确的屏幕类型选择资源。

但是，我该如何开始？我在 Photoshop 中为我的应用程序制作了背景。背景以 720x1080 像素定义并导出为 .png 文件。我将 .png 放在 xhdpi 文件夹中。在我的 Sony Xperia Z 上一切正常，但是当一个朋友将它加载到他的 Galaxy 3 上时，背景“太小”并且不适合他的屏幕。我认为这是因为免费场地太小了。

但是我需要做多大？xhdpi 可绘制资源的像素大小应该是多少以适合每个 xhdpi 屏幕？

一个好的方法是从最大的尺寸 xhdpi 开始吗？然后稍后将drawables转换为mdpi和ldpi？如果是这样，我需要一个以**px**为单位的初始大小，以便我可以在 Photoshop 中为应用程序创建背景。

这是我使用背景的方式：（注意，我将高度更改为 fill_parent 它修复了“不填充整个屏幕问题”）

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/bg_xhdpi" >
     </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:34:32.093

要使 PX 大小适当缩放，您需要使用以下比率进行缩放：

XDPI 为 2 倍

HDPI 为 1.5 倍

1X 用于 MDPI（基线

.75X 用于 LDPI

在代码（或 XML）中指定大小时，使用 DP 参数指定值（如果指定字体，则使用 SP）。例如：`android:layout_marginLeft="12dp"`

这里是文档： http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)，你会注意到这张图片，还有很多其他描述这个的细节。

![在此处输入图像描述](https://i.stack.imgur.com/rhL2u.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:02:06.657

您可以在[此表](http://checkscreensize.appspot.com/listdevice.jsp)中找到不同设备屏幕密度和分辨率的简报；据介绍，Galaxy SIII 是 xhdpi，分辨率为 1280 X 720。此外，您可能需要考虑遵循[兼容模式指南](http://developer.android.com/guide/practices/screen-compat-mode.html)，以避免在多个屏幕上出现渲染问题。

# android - 从 FileInputStream 读取时出现 FileNotFoundException

> ID：15863469
> 
> 赞同：0
> 
> 时间：2013-04-07T14:26:38.280
> 
> 标签：android, filenotfoundexception

我正在尝试这段代码：

> [http://androidgenuine.com/?tag=export-database-android](http://androidgenuine.com/?tag=export-database-android)

通过在我的示例中使用此代码，我总是得到一个`FileNotFoundException`，尽管在读取 FileInputStream 时该文件夹存在于外部存储中。

这是我的代码：

```
public void exportdata()
    {

        try 
        {

            myInput = new FileInputStream("/data/data/com.example.hello/databases/BikeMaintenance.db");
            File directory = new File("/sdcard/BikeMaintenance/Data/");
            // Create the folder if it doesn't exist:
            if (!directory.exists()) 
            {
                directory.mkdirs();
            } 

            OutputStream myOutput = new FileOutputStream(directory.getPath()+"/BikeMaintenance.backup");
            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer))>0)
            {

                myOutput.write(buffer, 0, length);
                msg="Backup Succesfull!";
                Toast.makeText(MainPage.this,msg,Toast.LENGTH_SHORT).show();
            }
            // Close and clear the streams
            myOutput.flush();
            myOutput.close();        
            myInput.close();
        }
        catch (FileNotFoundException e) 
        {
            msg="FileNotFoundException";
            Toast.makeText(MainPage.this,msg,Toast.LENGTH_SHORT).show();

            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            msg="Backup Unsuccesfull!";
            Toast.makeText(MainPage.this,msg,Toast.LENGTH_SHORT).show();
        }

    } 
```

我哪里错了？这可能是什么原因？我为此搜索了解决方案，但没有找到解决方案。

这是 logcat 输出：

```
java.io.FileNotFoundException:
/data/data/com.example.hello/databases/BikeMaintenance.db：打开
失败：ENOENT（没有这样的文件或目录）
  在 libcore.io.IoBridge.open(IoBridge.java:416)
  在 java.io.FileInputStream.(FileInputStream.java:78)
  在 java.io.FileInputStream.(FileInputStream.java:105)
  在 com.example.hello.MainPage.exportdata(MainPage.java:625)
  在 com.example.hello.MainPage.backup(MainPage.java:692)
  在 com.example.hello.MainPage$1.onClick(MainPage.java:494)
  在 com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
  在 android.os.Handler.dispatchMessage(Handler.java:99)
  在 android.os.Looper.loop(Looper.java:137)
  在 android.app.ActivityThread.main(ActivityThread.java:4745)
  在 java.lang.reflect.Method.invokeNative(Native Method)
  在 java.lang.reflect.Method.invoke(Method.java:511)
  在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
  在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
  在 dalvik.system.NativeStart.main（本机方法）
引起：libcore.io.ErrnoException：打开失败：
ENOENT（没有这样的文件或目录）
  在 libcore.io.Posix.open（本机方法）
  在 libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
  在 libcore.io.IoBridge.open(IoBridge.java:400)
  ... 14 更多

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:03:15.103

您的代码对我来说看起来不错，但我认为您无权访问该 .db 文件您可以使用 DataBaseHelper 类访问您的 .db 文件

```
 public class DataBaseHelper extends SQLiteOpenHelper {

     private static String DB_PATH = "/data/data/com.android.electricbillgenerator/databases/";

        private static String DB_NAME = "BikeMaintenance.db";

        private SQLiteDatabase myDataBase;

        private Context myContext;

        public static final String COLUMN_ID = "_id";
        public static final String COLUMN_USERNAME = "UserName";
        public static final String COLUMN_PASSWORD = "Password";
        public static final String TABLE_NAME = "Login";
        private static final String DATABASE_NAME = "BikeMaintenance.db";
        private static final int DATABASE_VERSION = 1;

     // Database creation sql statement
//      private static final String DATABASE_CREATE = "create table "
//          + TABLE_NAME + "(" + COLUMN_ID
//          + "," + COLUMN_USERNAME
//          + "," + COLUMN_PASSWORD+ ");";

//      private static final String DATABASE_CREATE = "create table "
//              + TABLE_NAME + "(" + COLUMN_ID
//              + " integer primary key autoincrement, " + COLUMN_USERNAME
//              + " text not null," + COLUMN_PASSWORD+ "text not null);";

    public DataBaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 8);
        this.myContext = context;

         boolean dbexist = checkDataBase();
            if (dbexist) {
                //System.out.println("Database exists");
                openDataBase(); 
            } else {
                System.out.println("Database doesn't exist");
                try {
                    createDataBase();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

    }

    @Override
    public void onCreate(SQLiteDatabase database) {

//      try {
//          database.execSQL(DATABASE_CREATE);
//      } catch (SQLException e) {
//          // TODO Auto-generated catch block
//          e.printStackTrace();
//      }

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
//      Log.w(DataBaseHelper.class.getName(),
//              "Upgrading database from version " + oldVersion + " to "
//                  + newVersion + ", which will destroy all old data");
//          db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
//          onCreate(db);

    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }
    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:20:40.603

来自 Android 文档

```
public FileInputStream (File file)

Constructs a new FileInputStream that reads from file.

Parameters
file    the file from which this stream reads.
Throws
FileNotFoundException   if file does not exist. 
```

您谈论存在的文件夹，但错误与文件有关。仔细检查文件是否真的存在，也许用 adb

```
$ adb shell ls /data/data/com.example.hello/databases/BikeMaintenance.db 
```

或包含目录的权限。

# bash - 查找和删除多个参数目录

> ID：15863476
> 
> 赞同：0
> 
> 时间：2013-04-07T14:27:41.257
> 
> 标签：bash, find, ls

假设我有 3 个目录`.git`，`.hg`并且`.svn`在文件夹中的某处称为`lol`.

我怎样才能找到并删除所有这些？

以下仅对最后一个 ( `.svn`) 执行此操作：

```
$ find lol -type d -name .git -o -name .hg -o -name .svn -delete 
```

**E：**这也可以做到，`ls`但不能没有`shopt -s globstar`（因为我没有这样做`zsh`）：

```
$ shopt -s globstar
$ rm -r $(ls -d ceaw/**/.{git,hg,svn}) 
```

**E2：**另一个解决方案是：

```
$ find lol -type d -name .git -o -name .hg -o -name .svn | xargs rm -rf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:34:11.233

尝试改用该`-exec`选项。

```
find lol -depth -type d \( -name .git -o -name .hg -o -name .svn \) -exec rm -r '{}' \; 
```

# c++ - 什么| 运算符在 Qt 中做什么？

> ID：15863477
> 
> 赞同：1
> 
> 时间：2013-04-07T14:27:43.450
> 
> 标签：c++, qt, operators

在这个答案中，回答者使用 | 运算符：[是/否消息框使用 QMessageBox](https://stackoverflow.com/a/13111762)

根据文档，该论点应该是`StandardButtons`.

所以运营商`|`合二为一？`StandardButton``StandardButtons`

我试过浏览 Qt 文档，但没有关于操作符的文档。所以它一定是一个 C++ 运算符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:29:31.063

`|`是*按位或*运算符，通常用于组合枚举值（假设支持枚举值的整数是 2 的幂）。在这种情况下，代码指定它希望同时拥有“是”和“否”按钮。（请注意，这是标准 C++ 语法，与 Qt 无关。）

# c# - 在发布 System.Diagnostics 之前删除日志

> ID：15863479
> 
> 赞同：1
> 
> 时间：2013-04-07T14:28:05.027
> 
> 标签：c#, logging, windows-phone-8

要记录输出，我使用以下代码。

```
 System.Diagnostics.Debug.WriteLine("Hello"); 
```

现在，始终建议在提交应用程序之前删除此类日志。

因此，在我们提交它以供发布或隐式完成之前，我们必须删除这些行。

有没有另一种更好的方法在 C# 中记录输出，它在发布时将日志记录删除到控制台。我看到 Log4Net 就是其中之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:02:53.553

System.Diagnostics.Debug 类上的所有方法都具有[ConditionalAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)，因此在大多数编译器下，它们不会被编译到发布版本中（除非您在发布版本中定义了 DEBUG 属性）。¹

这对于 Visual Studio 中的编译器来说当然是正确的。

您关于 log4Net 的第二个问题实际上是相反的，如果您决定开始使用 log4Net，则需要注意一些事情 - log4Net 调试调用包含在调试版本中，如果您将记录器设置为调试跟踪级别（通常完成），则会发出使用运行时配置）。

* * *

^(1.) MSDN 页面实际上（IMO）有点不清楚，但这些 SO 帖子同意我的解释：

[生产代码中的 System.Diagnostics.Debug.WriteLine](https://stackoverflow.com/questions/1600985/system-diagnostics-debug-writeline-in-production-code)

[C# 在发布模式下运行时是否编译出调试语句？](https://stackoverflow.com/questions/6890567/c-sharp-do-debug-statements-get-compiled-out-when-running-in-release-mode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:31:00.437

您可以使用预处理器指令：

```
#if DEBUG
    System.Diagnostics.Debug.WriteLine("Hello");
#endif 
```

当您在*Release*构建配置中构建应用程序时，将跳过该行。

# c# - 根据表情c#查找句子是肯定的还是否定的

> ID：15863486
> 
> 赞同：-6
> 
> 时间：2013-04-07T14:29:33.987
> 
> 标签：c#, sentiment-analysis, emoticons

我正在用 c# 做项目，我正在寻找可以帮助我根据表情符号检查句子是积极的、消极的还是模糊的代码。

例如：

1.  我爱我的国家 :) - （正面）因为它包含快乐的笑脸
2.  我爱我的国家 :( - (负面) 因为它包含悲伤的笑脸
3.  天气很好:( :) -（模糊）因为它包含两个笑脸，所以很难判断它是积极的还是消极的。
4.  我不想上大学 :( :) :) -（积极）因为它包含两个快乐的笑脸和一个悲伤的笑脸。

我的项目领域是情绪分析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:46:11.767

另一个正则表达式；）

```
string input = "I don't want to go to College :( :) :) ";

var score = Regex.Matches(input, @"(?<a>:\))|(?<b>:\()")
                 .Cast<Match>()
                 .Select(m => m.Groups["a"].Success ? 1 : -1)
                 .Sum(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:05:09.520

利用[`Regex.Matches`](http://msdn.microsoft.com/en-us/library/b9712a7w.aspx)

```
var upScore = Regex.Matches(input, @":\)").Count;
var downScore = Regex.Matches(input, @":\(").Count;
var totalScore = upScore - downScore; 
```

尽管在 a 中使用副作用是一种*不好的做法*`MatchEvaluator`，但您也可以使用`Regex.Replace`来对字符串进行单次传递：

```
var score = 0;
MatchEvaluator match = m =>
{
    score += m.Value[1] == ')' ? 1 : -1;
    return m.Value;
};
Regex.Replace(input, ":[()]", match); 
```

# c# - 正则表达式与正则表达式

> ID：15863487
> 
> 赞同：-3
> 
> 时间：2013-04-07T14:29:35.267
> 
> 标签：c#, java

我们需要使用正则表达式来查找表达式是否正确，它还包括检查“if statements”的格式，例如：case1：

```
 if(x==1)
   x = x+1; 
```

会说正确。案例2：

```
else x=x+1; 
```

会说假，因为“如果部分”丢失了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:33:38.243

您无法使用正则表达式解析代码。

想想以下，你有一个简单的数学表达式：

```
((x+y))+z... 
```

任意多的括号，你将如何将它与正则表达式匹配？你需要某种形式的*记忆*，而普通语言没有。

你不能。更正式地说，可以证明（使用 pidgeon-hole 原理）语言`A*B*`（其中 * 是[Kleene 星](https://en.wikipedia.org/wiki/Kleene_star)号）是不规则的。（不止如此，regex的常见方言无法解析）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:33:50.347

正则表达式不是正确的工具。你会想要更接近解析器生成器的东西。

# ios - 使用firefox插件创建时如何打开.sqlite文件

> ID：15863488
> 
> 赞同：2
> 
> 时间：2013-04-07T14:29:42.443
> 
> 标签：ios, objective-c, sqlite

我创建了我的表并使用firefox sqlite manager扩展插入了我的数据，保存并添加了我的sqlitefile，它是“notifications.sqlite”，之后我写了这段代码，但它**什么**也没输出。

打开 .sqlite 文件和 .db 文件有什么区别吗？如何正确打开我的数据库？

**更新：* *调试后，朋友评论它在这一行有问题：

```
databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"notifications.sqlite"]]; 
```

后

```
 if ([filemgr fileExistsAtPath: databasePath ] == YES) 
```

if 不是 YES 所以它会丢失一切所以 databasePath 有点错误

我的表如下：

```
CREATE TABLE "quotes_type" ("type_id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , "content" VARCHAR) 
```

这是我打开 .sqlite 文件的努力：

```
- (void)viewDidLoad{

  NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *docsDir = [dirPaths objectAtIndex:0];
    databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"notifications.sqlite"]];
    sqlite3_stmt *statement;
    NSFileManager *filemgr = [NSFileManager defaultManager];
    if ([filemgr fileExistsAtPath: databasePath ] == YES)
    {
    if (sqlite3_open([databasePath UTF8String], &contactDB) == SQLITE_OK)
    {

        NSString *qrycount = [NSString stringWithFormat: @"select * from quotes_type"];

        const char *count_stmt = [qrycount UTF8String];

        sqlite3_prepare_v2(contactDB, count_stmt, -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_ERROR) {
            NSAssert1(0,@"Error when selecting rows  %s",sqlite3_errmsg(contactDB));
        } else {
              NSLog(@"negin");
            int myid=sqlite3_column_int(statement, 0);
            NSString *text = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement,1)];
            NSLog(@"myid is %d",myid);
            NSLog(@"text is %@",text);
            sqlite3_finalize(statement);
            sqlite3_close(contactDB);
        }
    }
    else NSLog(@"openning has problem");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:21:42.167

您正在检查`Documents`. 但是你曾经在那里复制过吗？如果没有，你永远不会在那里找到它。您确实想检查该文件，如果找不到，请将其从捆绑包复制到`Documents`文件夹中。因此，如果在 中找不到数据库`Documents`，则应通过以下方式复制它：

```
NSError *error;
NSString *bundleDatabasePath = [[NSBundle mainBundle] pathForResource:@"notifications" ofType:@"sqlite"];
NSAssert(bundleDatabasePath, @"database not found in bundle");
if (![filemgr copyItemAtPath:bundleDatabasePath toPath:databasePath error:&error])
    NSLog(@"%s: copyItemAtPath failure: error = %@", __FUNCTION__, error); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:01:24.883

您可以使用 FMDB 来管理您的 sqlite 数据库，这非常简单。

github：[FMDB](https://github.com/ccgus/fmdb)

# c# - 使用 TPL 时如何确定方法将在哪个线程上执行？

> ID：15863491
> 
> 赞同：3
> 
> 时间：2013-04-07T14:29:57.633
> 
> 标签：c#, parallel-processing, task-parallel-library, async-await, c#-5.0

我知道*TPL 是面向任务的，而经典的线程模型是面向工人的。任务让您主要关注要解决的问题，而不是解决问题的机制*。但是当谈到线程和任务的关系时，我仍然有点困惑。

下面是一个演示代码：

```
namespace AsyncUnderTheHood
{
    class Program
    {

        static void Main(string[] args)
        {
            Console.WriteLine("Main Start : {0}", Thread.CurrentThread.ManagedThreadId);
            AwaitTest();
            Console.WriteLine("Main End : {0}", Thread.CurrentThread.ManagedThreadId);
            Console.ReadLine();
        }

        public static void DoWork()
        {
            Console.WriteLine("DoWork Start: {0}", Thread.CurrentThread.ManagedThreadId);
            Thread.Sleep(5000);
            Console.WriteLine("DoWork End: {0}", Thread.CurrentThread.ManagedThreadId);
        }

        public async static void AwaitTest()
        {
            Console.WriteLine("AwaitTest Start : {0}", Thread.CurrentThread.ManagedThreadId);
            Task t = new Task(DoWork);
            t.Start();
            await t;
            Console.WriteLine("AwaitTest Done : {0}", Thread.CurrentThread.ManagedThreadId);
        }
    }
} 
```

输出是这样的：

```
Main Start : 1
AwaitTest Start : 1   <------------ A
DoWork Start: 3
Main End : 1
DoWork End: 3
AwaitTest Done : 3    <------------ B 
```

**我的问题是，为什么 A 和 B 在不同的线程上？**

在不同的线程上执行相同的方法，当线程亲和性很重要时，这会导致问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:40:19.343

> 为什么A和B在不同的线程上？

首先，如果您`Task`的 s 由默认调度程序调度，则无法保证哪个`Thread`会`Task`运行。并且各个部分`AwaitTest()`是分开执行的，所以不能保证它们会在同一个线程上运行。

其次，默认调度器使用s`ThreadPool`来执行`Task`。并且每个方法的第一部分`async`同步运行。在您的情况下，这意味着第一部分`AwaitTest()`将在主线程上运行，第二部分将在某个`ThreadPool`线程上运行。因此，您实际上可以保证它们*不会*在同一个线程上运行。

> 当线程关联很重要时，这会导致问题吗？

它当然可以。但它会在线程亲和性很重要的最常见情况下正常工作：GUI 编程。这是因为 GUI 应用程序已经`SynchronizationContext`设置，这意味着如果`async`方法的第一部分在 UI 线程上运行，第二部分也将在那里运行（除非您使用 禁用它`ConfigureAwait(false)`）。

但在其他情况下，它会导致问题。例如，采用以下代码：

```
Monitor.Enter(lockObject);
await someTask;
Monitor.Exit(lockObject); 
```

此代码在控制台应用程序中不起作用（`Exit()`很可能会抛出`SynchronizationLockException`），因为它`Exit()`可以在与`Enter()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:35:02.937

您已要求系统“等待”一项任务。您真正要问的是，调用的线程`await`应该继续运行，并且之后的所有内容`await`都是“继续”，在任务完成后将异步运行。由于控制台应用程序中没有“消息泵”，因此没有简单的方法可以编组回“主”线程，因此继续使用 asynchronous`Task`的线程继续。如果您在 WinForm 或 WPF 应用程序中执行相同的测试，则延续将在 UI 线程上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T18:09:21.797

[这篇博](http://www.danielmoth.com/Blog/New-And-Improved-CLR-4-Thread-Pool-Engine.aspx)文很好地描述了 TPL 如何使用具有工作窃取功能的多个任务队列在现有线程池之上进行分层以获得最佳性能。

# php - 使用消息变量进行路由重定向

> ID：15863495
> 
> 赞同：1
> 
> 时间：2013-04-07T14:30:55.007
> 
> 标签：php, laravel

我需要一些关于 Laravel 的帮助。我想要做的是创建一个路由过滤器，它将使用从变量传递的指定消息重定向用户。我目前的代码是半成品，但我唯一不喜欢的是，当消息显示在视图上时，它会被转换为小写字符。

```
Route::get('event/signup', array('before' => 'auth_message:You must be logged into your account to signup for the event.', 'uses' => 'event@signup'));

Route::filter('auth_message', function($message)
{
    if (!Auth::user())
    {
        return Redirect::to('/')->with('errorAlert', $message);
    }
}); 
```

例如，这条消息“您必须登录到您的帐户才能注册该活动。” 重定向用户后在视图上显示如下：“您必须登录到您的帐户才能注册该活动。” 是否可以保留字符大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:11:47.367

您从过滤器中获取了错误的参数。以下工作如您所料：

```
Route::filter('auth_message', function($route, $request, $value)
{
    if (!Auth::user())
    {
        return Redirect::to('/')->with('errorAlert', $value);
    }
});

Route::get('/', function(){
    exit(Session::get('errorAlert')); // Returns "You must be logged into your account to signup for the event."
}); 
```

# jquery - 使用多个 jquery 库时遇到问题

> ID：15863500
> 
> 赞同：0
> 
> 时间：2013-04-07T14:31:12.267
> 
> 标签：jquery

我是新来的，使用 HTML/CSS/Js/...

我需要使用（我猜是这样）多个 jquery 库，但它们不能一起工作。标签中的第一个（用于平滑滚动“jquery scrollto”），标签中的第二个（用于 CSS3 滑块）。我已经在这里搜索了解决方案，但没有结果！

我尝试使用 jquery-no conflict (as [here](https://stackoverflow.com/questions/7882374/how-is-jquery-noconflict-used) )，但它不起作用，或者我可能无法以正确的方式使用它。

（对不起我的英语我是意大利人）

无论如何，这是代码（粗体和斜体是我的评论）：

```
<!doctype html>
<html><head>
<meta charset="UTF-8">
<title>[...]</title>
<link href="style.css" rel="stylesheet" type="text/css">
<meta [...]>
<link rel="shortcut icon" href="../favicon.ico"> 
<link rel="stylesheet" type="text/css" href="css/style2.css"/>
<script type="text/javascript" src="scripts/modernizr.custom.28468.js"></script>
<noscript>
<link rel="stylesheet" type="text/css" href="css/nojs.css"/>
</noscript>
<script src="scripts/jquery-1.3.2.js" type="text/javascript"></script>     **1st JQUERY**
<script type="text/javascript" src="scripts/jquery.localscroll-1.2.7-min.js"></script>
<script type="text/javascript" src="scripts/jquery.scrollTo-1.4.2-min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $.noConflict(true);   *IF I DELETE THIS THE SMOOTH SCROLLING STOP WORKING AND THE CSS3 SLIDER WORKS FINE*
    $('#nav_home').localScroll(800);
    $('#nav_about').localScroll(800);
    $('#nav_servizi').localScroll(800);
    $('#nav_contatti').localScroll(800);
    <!--#############################-->
    $('#home').parallax("50%", 0.1);
    $('#about').parallax("50%", 0.1);
    $('#servizi').parallax("50%", 0.3);
    $('#contatti').parallax("50%", 0.3);
})
</script>
</head>
<!---->
<body>

<div id="menu">
<div class="home" id="nav_home"><a href="#home"><img src="img/freccia_mini.png" border="0"/></a></div>
<div class="pulsanti" id="nav_about"><a href="#about">Chi siamo</a></div>
<div class="pulsanti" id="nav_servizi"><a href="#servizi">I nostri servizi</a></div>
<div class="pulsanti" id="nav_contatti"><a href="#contatti">Contatti</a></div>
</div><!--fine menu-->

<div id="home">[...]
</div><!--fine home-->

<div id="about">[...]
</div><!--fine about-->

<div id="servizi">
<div id="da-slider" class="da-slider">
<div class="da-slide">
<h2 class="margin">Grafica</h2>
<p class="margin"></p>
<div class="da-img"><img src="img/tavolozza.png"/></div>
</div><!--div id="da-slider" class="da-slider"-->
<div class="da-slide">
<h2  class="margin">Web</h2>
<p class="margin_h2"></p>
<div class="da-img"><img src="img/tazzina.png"/></div>
</div>
<div class="da-slide">
<h2  class="margin">Media</h2>
<p class="margin_h2"></p>
<div class="da-img"><img src="img/reflex.png"/></div>
</div>
<nav class="da-arrows">
<span class="da-arrows-prev"></span>
<span class="da-arrows-next"></span>
</nav>
</div>
</div>
<script type="text/javascript" src="scripts/jquery-1.7.1.js"></script>     **2nd JQUERY**
<script type="text/javascript" src="scripts/jquery.cslider.js"></script>
<script type="text/javascript">
        $(function() {
        $('#da-slider').cslider({
        autoplay    : true,
        bgincrement : 450
        });
    });
</script>   
</div><!--fine servizi-->

<div id="contatti">[...]
</div><!--fine contatti-->

</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:14:52.700

对于我所看到的，这些插件都不需要特定版本才能使用。也许如果你只使用**一个**jQuery 版本（例如 1.8.3）。

```
<head>
    ...
    <!-- (change)  -->
    <script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>     **1st JQUERY**

    ...
    <script>
       ...
       <!-- remove-->
       $.noConflict(true);
       ...
    </script>
</head>    
<body>
    <!-- (remove) -->
    <script type="text/javascript" src="scripts/jquery-1.7.1.js"></script>     **2nd JQUERY**
    ...
</body> 
```

祝你好运

* * *

两个插件一起工作的示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <meta name="keywords" content="javascript, jquery, plugins, scroll, anchor, to, navigation, ajax, scrollTo, smooth, animation, overflow, element, window, effect, lazy, customizable, ariel, flesler">
    <meta name="description" content="Demo of jQuery.LocalScroll. A jQuery plugin to make anchor navigation work with a smooth animation, made by Ariel Flesler.">
    <meta name="robots" content="all">
    <meta name="author" content="Ariel Flesler, aflesler(at)gmail(dot)com">
    <meta name="copyright" content="(c) 2007-2008 Ariel Flesler">
    <title>jQuery.LocalScroll - Regular Demo</title>
    <link rel="shortcut icon" href="http://jquery.com/favicon.ico" type="image/x-icon">
    <link href="http://flesler.com/base.css" type="text/css" rel="stylesheet">
    <link href="http://flesler.com/jquery/localScroll/css/style.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://flesler.com/jquery/localScroll/../scrollTo/js/jquery.scrollTo-min.js"></script>
    <script type="text/javascript" src="http://flesler.com/jquery/localScroll/js/jquery.localscroll-min.js"></script>
    <script type="text/javascript" src="http://tympanus.net/Development/ParallaxContentSlider/js/jquery.cslider.js"></script>
    <script type="text/javascript" src="http://tympanus.net/Development/ParallaxContentSlider/js/modernizr.custom.28468.js"></script>
    <script type="text/javascript" src="http://flesler.com/jquery/localScroll/js/init.js"></script>

    <link rel="stylesheet" type="text/css" href="http://tympanus.net/Development/ParallaxContentSlider/css/demo.css">
    <link rel="stylesheet" type="text/css" href="http://tympanus.net/Development/ParallaxContentSlider/css/style2.css">

    <!-- Timestamp: 1365350712 -->
<style type="text/css">@media print { #feedlyMiniIcon { display: none; } }</style></head>
<body data-feedly-processed="yes">
    <h1>jQuery.LocalScroll&nbsp;<strong>by Ariel Flesler</strong></h1>
    <div class="sidebar">
    <h2 class="title">Regular Demo</h2>     <div id="links">
            <h3>Links</h3>
            <ul>
            <li><a target="_blank" href="http://plugins.jquery.com/project/LocalScroll">Project Page</a></li>
<li><a target="_blank" href="http://flesler.blogspot.com/2007/10/jquerylocalscroll-10.html">Main blog article</a></li>
<li><a target="_blank" href="http://flesler.blogspot.com/search/label/jQuery.LocalScroll">All articles</a></li>
<li><a href="http://demos.flesler.com/jquery/localScroll/ajax/">AJAX Demo</a></li>
<li><a href="http://demos.flesler.com/jquery/scrollTo/">ScrollTo Demo</a></li>
            </ul>
        </div>
        </div>
        <ul id="navigation">
        <li class="sup">
            <a href="#section1">Section 1</a>
            <ul>
                <li><a href="#section1b">Section 1-b</a></li>
                <li><a href="#section1c">Section 1-c</a></li>
            </ul>                   
        </li>
        <li class="sup">
            <a href="#section2">Section 2</a>
            <ul>
                <li><a href="#section2b">Section 2-b</a></li>
                <li><a href="#section2c">Section 2-c</a></li>
            </ul>   
        </li>
        <li class="sup">
            <a href="#section3">Section 3</a>
            <ul>
                <li><a href="#section3b">Section 3-b</a></li>
                <li><a href="#section3c">Section 3-c</a></li>
            </ul>
        </li>
        <li class="sup">
            <a href="#section4">Section 4</a>
            <ul>
                <li><a href="#section4b">Section 4-b</a></li>
                <li><a href="#section4c">Section 4-c</a></li>
            </ul>
        </li>
        <li class="sup">
            <a href="#section5">Section 5</a>
            <ul>
                <li><a href="#section5b">Section 5-b</a></li>
                <li><a href="#section5c">Section 5-c</a></li>
            </ul>
        </li>
    </ul>                                                           
    <div id="content">
        <div class="section">
            <ul>
                <li class="sub" id="section1">
                    <h2>Section 1</h2>
                    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Suspendisse et turpis sed metus fermentum pellentesque. Vestibulum 
auctor neque ac nunc elementum malesuada. Praesent non est sed libero 
vestibulum consectetuer. Sed vehicula. Vivamus quis tellus sit amet erat
 ultrices luctus. Fusce a ligula. Fusce viverra libero vitae velit. 
Aenean bibendum nibh non lorem. Suspendisse quis velit. Integer sit amet
 lacus. Curabitur tristique. Morbi eu lectus. Vestibulum tristique 
aliquam quam. Sed neque.</p>
                    <p>Nulla facilisi. Quisque eleifend libero. Sed eros. Morbi vel 
leo. Morbi varius tincidunt sem. Nam sodales volutpat velit. Suspendisse
 potenti. Duis vehicula pede non nisi. Proin elit pede, ultrices non, 
ultrices quis, vulputate sit amet, magna. Praesent sodales pellentesque 
justo. Donec blandit, augue id convallis congue, magna libero hendrerit 
erat, id blandit est lorem a tellus. Vestibulum tincidunt lectus quis 
metus. Pellentesque placerat lacus in urna.</p>
                    <a href="#section1b" class="next">&gt;&gt;</a>
                </li>
                <li class="sub" id="section1b">
                    <h2>Section 1-b</h2>
                    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Suspendisse et turpis sed metus fermentum pellentesque. Vestibulum 
auctor neque ac nunc elementum malesuada. Praesent non est sed libero 
vestibulum consectetuer. Sed vehicula. Vivamus quis tellus sit amet erat
 ultrices luctus. Fusce a ligula. Fusce viverra libero vitae velit. 
Aenean bibendum nibh non lorem. Suspendisse quis velit. Integer sit amet
 lacus. Curabitur tristique. Morbi eu lectus. Vestibulum tristique 
aliquam quam. Sed neque.</p>
                    <p>Nulla facilisi. Quisque eleifend libero. Sed eros. Morbi vel 
leo. Morbi varius tincidunt sem. Nam sodales volutpat velit. Suspendisse
 potenti. Duis vehicula pede non nisi. Proin elit pede, ultrices non, 
ultrices quis, vulputate sit amet, magna. Praesent sodales pellentesque 
justo. Donec blandit, augue id convallis congue, magna libero hendrerit 
erat, id blandit est lorem a tellus. Vestibulum tincidunt lectus quis 
metus. Pellentesque placerat lacus in urna.</p>
                    <a href="#section1" class="prev">&lt;&lt;</a>
                    <a href="#section1c" class="next">&gt;&gt;</a>                  
                </li>
                <li class="sub" id="section1c">
                    <h2>Section 1-c</h2>
                    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Suspendisse et turpis sed metus fermentum pellentesque. Vestibulum 
auctor neque ac nunc elementum malesuada. Praesent non est sed libero 
vestibulum consectetuer. Sed vehicula. Vivamus quis tellus sit amet erat
 ultrices luctus. Fusce a ligula. Fusce viverra libero vitae velit. 
Aenean bibendum nibh non lorem. Suspendisse quis velit. Integer sit amet
 lacus. Curabitur tristique. Morbi eu lectus. Vestibulum tristique 
aliquam quam. Sed neque.</p>
                    <p>Nulla facilisi. Quisque eleifend libero. Sed eros. Morbi vel 
leo. Morbi varius tincidunt sem. Nam sodales volutpat velit. Suspendisse
 potenti. Duis vehicula pede non nisi. Proin elit pede, ultrices non, 
ultrices quis, vulputate sit amet, magna. Praesent sodales pellentesque 
justo. Donec blandit, augue id convallis congue, magna libero hendrerit 
erat, id blandit est lorem a tellus. Vestibulum tincidunt lectus quis 
metus. Pellentesque placerat lacus in urna.</p>
                    <a href="#section1b" class="prev">&lt;&lt;</a>
                </li>               
            </ul>
        </div>
        <div class="section">
            <ul>
                <li class="sub" id="section2">
                    <h2>Section 2</h2>
                    <p>Nullam et sem eget massa pellentesque dapibus. Nulla 
sollicitudin enim quis odio. Quisque ipsum lorem, volutpat eget, 
condimentum ac, posuere id, risus. Suspendisse tortor metus, aliquet in,
 varius nec, hendrerit a, libero. Suspendisse iaculis. Fusce commodo 
urna ut enim. Fusce tempus eros. Phasellus sodales tellus id dolor. 
Integer sollicitudin, turpis ac interdum condimentum, enim enim tempus 
metus, sed imperdiet massa diam nec elit. Mauris ante augue, hendrerit 
non, commodo ac, porttitor eu, turpis.</p>
                    <p>In fermentum nibh ut diam. Mauris sagittis, tellus ac molestie 
fermentum, arcu orci pharetra mi, id vehicula massa leo vel pede. Nullam
 semper tincidunt lorem. Proin arcu libero, auctor sed, interdum 
egestas, ullamcorper et, lacus. Donec id lectus eget diam accumsan 
ullamcorper. Donec at urna et lacus condimentum pellentesque. Phasellus 
dapibus hendrerit massa. Sed sed ipsum. Quisque venenatis. Donec vel 
turpis. Vivamus quis augue a turpis facilisis facilisis. Pellentesque 
augue ipsum, bibendum id.</p>
                    <a href="#section2b" class="next">&gt;&gt;</a>  
                </li>
                <li class="sub" id="section2b">
                    <h2>Section 2-b</h2>
                    <p>Nullam et sem eget massa pellentesque dapibus. Nulla 
sollicitudin enim quis odio. Quisque ipsum lorem, volutpat eget, 
condimentum ac, posuere id, risus. Suspendisse tortor metus, aliquet in,
 varius nec, hendrerit a, libero. Suspendisse iaculis. Fusce commodo 
urna ut enim. Fusce tempus eros. Phasellus sodales tellus id dolor. 
Integer sollicitudin, turpis ac interdum condimentum, enim enim tempus 
metus, sed imperdiet massa diam nec elit. Mauris ante augue, hendrerit 
non, commodo ac, porttitor eu, turpis.</p>
                    <p>In fermentum nibh ut diam. Mauris sagittis, tellus ac molestie 
fermentum, arcu orci pharetra mi, id vehicula massa leo vel pede. Nullam
 semper tincidunt lorem. Proin arcu libero, auctor sed, interdum 
egestas, ullamcorper et, lacus. Donec id lectus eget diam accumsan 
ullamcorper. Donec at urna et lacus condimentum pellentesque. Phasellus 
dapibus hendrerit massa. Sed sed ipsum. Quisque venenatis. Donec vel 
turpis. Vivamus quis augue a turpis facilisis facilisis. Pellentesque 
augue ipsum, bibendum id</p>
                    <a href="#section2" class="prev">&lt;&lt;</a>
                    <a href="#section2c" class="next">&gt;&gt;</a>  
                </li>
                <li class="sub" id="section2c">
                    <h2>Section 2-c</h2>
                    <p>Nullam et sem eget massa pellentesque dapibus. Nulla 
sollicitudin enim quis odio. Quisque ipsum lorem, volutpat eget, 
condimentum ac, posuere id, risus. Suspendisse tortor metus, aliquet in,
 varius nec, hendrerit a, libero. Suspendisse iaculis. Fusce commodo 
urna ut enim. Fusce tempus eros. Phasellus sodales tellus id dolor. 
Integer sollicitudin, turpis ac interdum condimentum, enim enim tempus 
metus, sed imperdiet massa diam nec elit. Mauris ante augue, hendrerit 
non, commodo ac, porttitor eu, turpis.</p>
                    <p>In fermentum nibh ut diam. Mauris sagittis, tellus ac molestie 
fermentum, arcu orci pharetra mi, id vehicula massa leo vel pede. Nullam
 semper tincidunt lorem. Proin arcu libero, Donec at urna et lacus 
condimentum pellentesque. Phasellus dapibus hendrerit massa. Sed sed 
ipsum. Quisque venenatis. Donec vel turpis. Vivamus quis augue a turpis 
facilisis facilisis. Pellentesque augue ipsum, bibendum id, scelerisque 
id, venenatis sit amet, nulla.</p>
                    <a href="#section2b" class="prev">&lt;&lt;</a>
                </li>
            </ul>
        </div>
        <div class="section">
            <ul>
                <li class="sub" id="section3">
                    <h2>Section 3</h2>
                    <p>Aliquam erat volutpat. In a neque. Mauris malesuada consectetuer
 metus. Etiam molestie. Cum sociis natoque penatibus et magnis dis 
parturient montes, nascetur ridiculus mus. Integer scelerisque gravida 
libero. Nulla nisi massa, consequat nec, gravida sit amet, imperdiet in,
 est. Nam gravida lacus. Etiam sem tortor, faucibus eget, iaculis 
euismod, molestie consequat, mauris. Phasellus consectetuer lobortis 
eros. Maecenas sit amet arcu. Morbi ut enim. Fusce sem augue, 
consectetuer in, tempus eu, dictum vel, felis. Praesent nisl tortor, 
aliquet a, fermentum ac, molestie vitae, libero.</p>
                    <p>Donec lacinia neque et justo. Vestibulum pretium semper tellus. 
Phasellus lacinia tristique purus. Id, orci. Pellentesque habitant morbi
 tristique senectus et netus et malesuada fames ac turpis egestas. Nulla
 non orci eu felis accumsan blandit. Nam condimentum. Quisque pulvinar. 
Cras nibh. Sed quis lorem id erat feugiat vulputate.</p>
                    <a href="#section3b" class="next">&gt;&gt;</a>  
                </li>
                <li class="sub" id="section3b">
                    <h2>Section 3-b</h2>
                    <p>Aliquam erat volutpat. Pellentesque cursus, vel dignissim dolor 
est eget ante. Pellentesque a purus. Proin quis arcu ut ipsum 
sollicitudin sollicitudin. In a neque. Mauris malesuada consectetuer 
metus. Etiam molestie. Cum sociis natoque penatibus et magnis dis 
parturient montes, nascetur ridiculus mus.Nam gravida lacus. Etiam sem 
tortor, faucibus eget, iaculis euismod, molestie consequat, mauris. 
Phasellus consectetuer lobortis eros. Maecenas sit amet arcu. Morbi ut 
enim. Fusce sem augue, consectetuer in, tempus eu, dictum vel, felis. 
Praesent nisl tortor, aliquet a, fermentum ac, molestie vitae, libero.</p>
                    <p>Donec lacinia neque et justo. Vestibulum pretium semper tellus. 
Phasellus lacinia tristique purus. Sed magna est, auctor quis, egestas 
et, tristique id, orci. Pellentesque habitant morbi tristique senectus 
et netus et malesuada fames ac turpis egestas. Nulla non orci eu felis 
accumsan blandit. Nam condimentum. Sed quis lorem id erat feugiat 
vulputate.</p>
                    <a href="#section3" class="prev">&lt;&lt;</a>
                    <a href="#section3c" class="next">&gt;&gt;</a>  
                </li>
                <li class="sub" id="section3c">
                    <h2>Section 3-c</h2>
                    <p>Aliquam erat volutpat. Pellentesque cursus, pede vel molestie 
tempor, orci mauris pellentesque mauris. Etiam molestie. Cum sociis 
natoque penatibus et magnis dis parturient montes, nascetur ridiculus 
mus. Integer scelerisque gravida libero. Nulla nisi massa, consequat 
nec, gravida sit amet, imperdiet in, est. Nam gravida lacus. Etiam sem 
tortor, faucibus eget, iaculis euismod, molestie consequat, mauris. 
Phasellus consectetuer lobortis eros. Maecenas sit amet arcu. Morbi ut 
enim. Fusce sem augue, consectetuer in, tempus eu, dictum vel, felis. 
Praesent nisl tortor, aliquet a, fermentum ac, molestie vitae, libero.</p>
                    <p>Donec lacinia neque et justo. Pellentesque habitant morbi 
tristique senectus et netus et malesuada fames ac turpis egestas. 
ellentesque cursus, pede vel molestie tempor, orci mauris pellentesque 
mauris. Nulla non orci eu felis accumsan blandit. Nam condimentum. 
Quisque pulvinar. Cras nibh. Sed quis lorem id erat feugiat vulputate. </p>
                    <a href="#section3b" class="prev">&lt;&lt;</a>
                </li>                               
            </ul>
        </div>
        <div class="section">
            <ul>
                <li class="sub" id="section4">
                    <h2>Section 4</h2>
                    <p>Donec eu diam. Etiam pharetra pede id orci. Mauris tellus enim, 
ultrices in, vehicula sed, feugiat eget, pede. Vestibulum odio eros, 
viverra non, posuere sed, elementum blandit, nunc. Fusce sodales cursus 
nibh. Nam ut sem sed tortor lacinia aliquet. Donec lacus arcu, 
consectetuer non, dignissim eget, ultrices sed, ligula. Maecenas 
faucibus lobortis nibh. Ut viverra justo quis felis eleifend ultrices. 
Integer at magna ut lacus malesuada rutrum. Proin in odio a mi tincidunt
 faucibus. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Nullam nisi massa, facilisis vitae, mollis et, ornare sit amet, dolor.</p>
                    <p>Quisque turpis eros. Vivamus ullamcorper, diam sit amet pharetra
 vehicula, sem nisi scelerisque ante, nec mattis risus augue non nulla. 
Donec elit dui, porttitor eget, ultricies vel, elementum gravida, urna. 
Aliquam erat volutpat. Mauris libero tellus, facilisis et, aliquet non, 
pulvinar sagittis, turpis. Quisque eu augue et dui lacinia gravida. Nam 
in massa a purus blandit mattis. Nulla facilisi.</p>
                    <a href="#section4b" class="next">&gt;&gt;</a>  
                </li>
                <li class="sub" id="section4b">
                    <h2>Section 4-b</h2>
                    <p>Donec eu diam. . Integer viverra ante quis nisi. Vestibulum odio
 eros, viverra non, posuere sed, elementum blandit, nunc. Fusce sodales 
cursus nibh. Nam ut sem sed tortor lacinia aliquet. Donec lacus arcu, 
consectetuer non, dignissim eget, ultrices sed, ligula. Maecenas 
faucibus lobortis nibh. Ut viverra justo quis felis eleifend ultrices. 
Integer at magna ut lacus malesuada rutrum. Proin in odio a mi tincidunt
 faucibus. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Nullam nisi massa, facilisis vitae, mollis et, ornare sit amet, dolor.</p>
                    <p>Quisque turpis eros, blandit vitae, auctor vel, eleifend nec, 
nisl. Nam justo lacus, elementum vel, rhoncus ut, feugiat id, ante. 
Vivamus ullamcorper,Nec mattis risus augue non nulla. Donec elit dui, 
porttitor eget, ultricies vel, elementum gravida, urna. Aliquam erat 
volutpat. Mauris libero tellus, facilisis et, aliquet non, pulvinar 
sagittis, turpis. Quisque eu augue et dui lacinia gravida. Nam in massa a
 purus blandit mattis. Nulla facilisi.</p>
                    <a href="#section4" class="prev">&lt;&lt;</a>
                    <a href="#section4c" class="next">&gt;&gt;</a>  
                </li>
                <li class="sub" id="section4c">
                    <h2>Section 4-c</h2>
                    <p>Donec eu diam. Morbi molestie purus at velit. Morbi augue eros, 
eleifend nec, bibendum tempor, aliquet a, augue. Integer viverra ante 
quis nisi. Vestibulum odio eros, viverra non, posuere sed, elementum 
blandit, nunc. Fusce sodales cursus nibh. Nam ut sem sed tortor lacinia 
aliquet. Donec lacus arcu, consectetuer non, dignissim eget, ultrices 
sed, ligula. Maecenas faucibus lobortis nibh. Ut viverra justo quis 
felis eleifend ultrices. Integer at magna ut lacus malesuada rutrum. 
Proin in odio a mi tincidunt faucibus. Lorem ipsum dolor sit amet, 
consectetuer adipiscing elit. Nullam nisi massa, facilisis vitae, mollis
 et, ornare sit amet, dolor.</p>
                    <p>Quisque turpis eros, blandit vitae, auctor vel, eleifend nec, 
nisl. Nec mattis risus augue non nulla. Donec elit dui, porttitor eget, 
ultricies vel, elementum gravida, urna. Aliquam erat volutpat. Mauris 
libero tellus, facilisis et, aliquet non, pulvinar sagittis, turpis. 
Quisque eu augue et dui lacinia gravida. Nam in massa a purus blandit 
mattis. Nulla facilisi.</p>
                    <a href="#section4b" class="prev">&lt;&lt;</a>
                </li>
            </ul>
        </div>
        <div class="section">
            <ul>
                <li class="sub" id="section5">
                    <h2>Section 5</h2>
                    <p>Fusce sit amet nibh sit amet libero pretium rutrum. Phasellus 
arcu. Donec turpis lorem, eleifend ut, cursus at, lacinia eget, dolor. 
Vivamus pulvinar sollicitudin ante. Nulla eu mauris sollicitudin urna 
fermentum tincidunt. Mauris placerat leo ut quam. Vestibulum ante ipsum 
primis in faucibus orci luctus et ultrices posuere cubilia Curae; Sed in
 risus. Aliquam erat volutpat. Cum sociis natoque penatibus et magnis 
dis parturient montes, nascetur ridiculus mus. Maecenas enim. 
Suspendisse odio odio, cursus ut, egestas eget, lobortis eget, magna.</p>
                    <p>Maecenas ultrices lectus facilisis metus. Fusce imperdiet. 
Aenean bibendum magna a neque. Aenean vel tellus. Lorem ipsum dolor sit 
amet, consectetuer adipiscing elit. Fusce gravida, magna non 
pellentesque interdum, felis odio eleifend ligula, et luctus dolor mi et
 diam. Vivamus varius nisl sed enim. Sed ultricies fermentum urna.</p>
                    <a href="#section5b" class="next">&gt;&gt;</a>  
                </li>
                <li class="sub" id="section5b">
                    <h2>Section 5-b</h2>
                    <p>Fusce sit amet nibh sit amet libero pretium rutrum. Nam iaculis 
enim ac ipsum. Donec turpis lorem, eleifend ut, cursus at, lacinia eget,
 dolor. Vivamus pulvinar sollicitudin ante. Nulla eu mauris sollicitudin
 urna fermentum tincidunt. Mauris placerat leo ut quam. Vestibulum ante 
ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; 
Sed in risus. Aliquam erat volutpat. Cum sociis natoque penatibus et 
magnis dis parturient montes, nascetur ridiculus mus. Maecenas enim. 
Suspendisse odio odio, cursus ut, egestas eget, lobortis eget, magna.</p>
                    <p>Maecenas ultrices lectus facilisis metus. Nunc nec elit vitae 
lectus posuere aliquam. Integer id justo nec elit varius blandit. Aenean
 vel tellus. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Fusce gravida, magna non pellentesque interdum, felis odio eleifend 
ligula, et luctus dolor mi et diam. Vivamus varius nisl sed enim. Sed 
ultricies fermentum urna.</p>
                    <a href="#section5" class="prev">&lt;&lt;</a>
                    <a href="#section5c" class="next">&gt;&gt;</a>  
                </li>
                <li class="sub" id="section5c">
                    <h2>Section 5-c</h2>
                    <p>Fusce sit amet nibh sit amet libero pretium rutrum. Phasellus 
arcu. Morbi justo purus, pellentesque ac, fringilla at, adipiscing non, 
dolor. Suspendisse imperdiet lorem. Nam iaculis enim ac ipsum.  Nulla eu
 mauris sollicitudin urna fermentum tincidunt. Mauris placerat leo ut 
quam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices 
posuere cubilia Curae; Sed in risus. Aliquam erat volutpat. Cum sociis 
natoque penatibus et magnis dis parturient montes, nascetur ridiculus 
mus. Maecenas enim. Suspendisse odio odio, cursus ut, egestas eget, 
lobortis eget, magna.</p>
                    <p>Maecenas ultrices lectus facilisis metus. Nunc nec elit vitae 
lectus posuere aliquam. Integer id justo nec elit varius blandit. Aenean
 vel tellus. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. 
Fusce gravida, magna non pellentesque interdum, felis odio eleifend 
ligula, et luctus dolor mi et diam. Vivamus varius nisl sed enim. Sed 
ultricies fermentum urna.</p>
                    <a href="#section5b" class="prev">&lt;&lt;</a>
                </li>
            </ul>
        </div>
    </div>

    <div id="da-slider" class="da-slider">
        <div class="da-slide">
            <h2 class="margin">Grafica</h2>
            <p class="margin"></p>
            <div class="da-img"><img src="http://img1.fotoalbum.virgilio.it/v/www1-2/176/176513/304872/IMG_0898-vi.jpg"/></div>
        </div><!--div id="da-slider" class="da-slider"-->
        <div class="da-slide">
            <h2  class="margin">Web</h2>
            <p class="margin_h2"></p>
            <div class="da-img"><img src="http://upload.wikimedia.org/wikipedia/commons/c/c6/Great_spotted_Eagle_I_IMG_8362.jpg"/></div>
        </div>
        <div class="da-slide">
            <h2  class="margin">Media</h2>
            <p class="margin_h2"></p>
            <div class="da-img"><img src="http://img2.fotoalbum.virgilio.it/v/www1-3/176/176513/304872/IMG_0880-vi.jpg"/></div>
        </div>
        <nav class="da-arrows">
            <span class="da-arrows-prev"></span>
            <span class="da-arrows-next"></span>
        </nav>
    </div>
    <script type="text/javascript">
        $(function() {
            $('#da-slider').cslider({
                autoplay    : true,
                bgincrement : 450
            });
        });
    </script>
   </body>
</html> 
```

希望这可以帮助。问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:44:23.573

这里只是一个猜测，但是您是否考虑过使用最新的 jquery 库？1.3.2 可能存在兼容性问题。

# c++ - C++ BST 内存错误 - 我的删除有什么问题？

> ID：15863507
> 
> 赞同：0
> 
> 时间：2013-04-07T14:31:34.297
> 
> 标签：c++, memory, binary-search-tree, crash-dumps

我遇到的问题是我的树只能成功删除一个节点一次。当我尝试让它删除更多时，它会因分段错误（核心转储）错误而崩溃。我似乎无法确定它出错的确切位置，但它应该是我在内存分配和释放方面做错了，我只是看不到它。

这是我的插入、删除、删除助手和叶子（因为它被称为内部删除）：

**插入：**

```
/*********************************************************
 Function: insert
 Arguments: const T &x (a T variable)
 Returns: void
 Notes: If the tree is empty, the function will set the node 
    as the root. Otherwise, it will look for the appropiate 
    place (in terms of a BST) to place it as long as its data 
    is not already existent inside the tree. 
*********************************************************/
template<class T> void binSTree<T>::insert(const T &x)
{
    BinTreeNode *newnode, *current, *parentOfCurrent; /* newnode will be the inserted node, current and parentOfCurrent will be traversing the while loop to find an appropiate space to insert */
    newnode = new BinTreeNode; /* allocates storage space */
    newnode->info = x; /* sets newnode's data equal to x */
    newnode->left = newnode->right = NULL; /* sets newnode's left and right children equal to NULL */

    if (root == NULL)   { /* if the tree is empty, it will place newnode on the root */
        root = newnode;
        cout << "added to root\n";
        return;         }
    current = root; /* sets current at the root */
    while(current != NULL)  { /* while current is not NULL, it will search for a place to insert the new node */
    parentOfCurrent = current; /* sets the parent equal to current */ 
        if(current->info == x) /* if the variable is found inside the tree, then it will error and exit */
        {
            cout << x << " already exists in tree. Duplicates not allowed!\n";
            return;
        }
        else if(current->info > x) /* otherwise, if the variable is less than the data on the tree currently, it will move left */ 
            current = current->left; 
        else                       /* otherwise, if the variable is greater than the data on the tree currently, it will move right */          current = current->right;
                            }
    /* the new node is placed where current would be in */ 
    if (parentOfCurrent->info > x) 
        parentOfCurrent->left = newnode;
    else
        parentOfCurrent->right = newnode;
} 
```

**删除和 privRemove：**

```
template <class T> bool binSTree<T>::remove(const T &x)
{
    BinTreeNode *current, *parentOfCurrent; /* current for tranversing the tree in the while loop and parentofCurrent to help */
    bool found = false; /* the booleans that is to be returned */
    if (root == NULL)   { /* Checks if the tree is empty, if it is, it returns found (false) and exits */
        return found;
                        }
    current = root; /* sets current equal to root */ 
    while(current != NULL) /* loops repeats until current is equal to NULL */
    {
        if(current->info == x)  { /* if the current data from the tree is equal tox, then it breaks the loop and sets found equal to true */
            found = true;
            break;
                                }
        else    { /* otherwise, it will search for the next place to go in the tree */
            parentOfCurrent = current; /* parentOfCurrent is set to current before current is set to one of its children */ 
            if(current->info > x) /* if x is less than the data on current, then it will move left */
                current = current->left;
            else   /* if x is greater than the data on current, then it will move right */
                current = current->right;
                }
    }
    if(found == true) { /* if it was found, it will pass current via the parent to the private remove function */ 
        if (current == root)
            privRemove(root);
        else if (parentOfCurrent->info > x) {  /* if current is to the left of the parent */
            found = leaf( parentOfCurrent->left );
            if(found == true)
                privRemove(parentOfCurrent->left);
                                            }
        else {  /* if current is to the right of the parent */
            found = leaf( parentOfCurrent->left );
            if(found == true)
                privRemove(parentOfCurrent->right);
             }
                      }
    return found;
}
/*********************************************************
 Function: privRemove
 Arguments: BinTreeNode* &node (the node that is to be deleted)
 Returns: void
 Notes: This private remove function will take in the node that 
    is provided by the public remove function, and, after ensuring
    that the node passed is not NULL, then it will delete it.
*********************************************************/
template <class T> void binSTree<T>::privRemove(BinTreeNode* &node) 
{
    BinTreeNode *temp; /* initializes temp in order to hold the information of node */ 
    if(root != NULL )  /* if the node is not NULL */
    {
        temp = node;
        delete node;
        node = temp;
    }
} 
```

叶子：

```
/*********************************************************
 Function: leaf
 Arguments: BinTreeNode* node
 Returns: boolean
 Notes: This function will check if the node in the argument 
  is a leaf by checking if both of its children are NULL. If 
  they are, it returns true. Otherwise, it returns false. 
*********************************************************/
template <class T> bool binSTree<T>::leaf(BinTreeNode* node) const
{
    bool isLEaf = false; /* the boolean variable it is to return */ 
    if(node->left == NULL && node->right == NULL) /* checks if the node has no children */
        isLEaf = true;  /* if it does, it sets isLEaf equal to true */
    return isLEaf;  /* after going through the if statement, it returns the variable isLeaf */
} 
```

应该注意的是，我的节点是在类头中声明的结构，并且变量 root 以 BinTreeNode* root 的形式声明为受保护的变量；它在 binSTree 构造函数中初始化为 NULL。另外，我只能删除叶子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:49:26.190

在我看来你做错了什么是在 privRemove 方法内部......想象一下你试图删除一个节点并且 privRemove 在那个节点上被调用。

和：

```
delete node; 
```

你释放内存节点指向。

然后你将 node 重新分配给它之前的值：

```
node=temp; 
```

所以它现在指向与以前相同的位置（函数内部和外部，因为您通过引用传递了它）。

现在在下一次删除时，您最终会遇到同一个节点并测试它是否为 NULL，但这不是因为您给了它一个值，所以它指向它之前拥有的内存（node=temp），所以节点指向内存中的某处不是 NULL，因此您会认为它是合法节点，但事实并非如此，它指向已释放的内存。当你调用它的方法时......嗯！

# xml - 实体属性的 RESTful URL（如何）

> ID：15863510
> 
> 赞同：0
> 
> 时间：2013-04-07T14:31:51.333
> 
> 标签：xml, json, url, rest, relational-database

我正在设计一些宁静的网址，但我尚未决定如何检索我的域的实体。
在较低级别，我有一个具有多对多和一对多关系的数据库。
假设实体是公司、组和用户。
Companies 和 Groups 之间的关系是一对多的（Groups 中的外键），Company 和 Users 之间也是如此。
而在组和用户之间，关系是多对可能的。

我对 RESTful API 的了解告诉我应该构建如下 URL：

*   `http://mywebsite.com/company/`, `http://mywebsite.com/company/1/users/`, `http://mywebsite.com/company/1/groups/`用于 post（创建新实体）和 get 方法；
*   `http://mywebsite.com/company/1`, `http://mywebsite.com/company/1/users/1`, `http://mywebsite.com/company/1/groups/1`用于 put（更新）、delete 和 get 方法；
*   `http://mywebsite.com/company/1/users/1/groups/`对于帖子（添加新关联）和获取方法。

现在，我的问题是如何从用户或组中读取（获取）、（并最终更新（放置）或更改公司（发布））。
基本上有3个选项：

1.  `[http://mywebsite.com/company/1/users/1/company](http://mywebsite.com/company/1/users/1/company)`并提供相同的 json 和 xml，`[http://mywebsite.com/company/1](http://mywebsite.com/company/1)`并拒绝重复的 url，如`[http://mywebsite.com/company/1/users/1/company/1/users](http://mywebsite.com/company/1/users/1/company/1/users)`..
2.  在用户描述（或组）的 json 和 xml 中嵌套他公司的 json 和 xml，嵌套部分几乎与 `[http://mywebsite.com/company/1](http://mywebsite.com/company/1)`. 但是这个选项意味着在用户（或组）的每个请求中，两个表之间的连接，即使我有兴趣只知道用户的名字；
3.  仅在用户和组的 json 和 xml 中提供外键值（公司的标识符）。

什么是最适合您的选择？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:25:34.107

我会选择更扁平的 URL 和操作。具体来说：

* * *

# 读取操作

*   `GET /company?id={id}`
    *   获取具有给定的公司`id`
*   `GET /company/group?id={id}`
    *   获取与给定公司关联的组`id`
    *   为分页添加额外的查询参数（如果合适）
*   `GET /company/user?id={id}`
    *   获取与给定公司关联的用户`id`
    *   为分页添加额外的查询参数（如果合适）
*   `GET /group?id={id}`
    *   获取具有给定的组`id`
*   `GET /group/user?id={id}`
    *   获取与给定组关联的用户`id`
    *   为分页添加额外的查询参数（如果合适）
*   `GET /user?id={id}`
    *   获取给定的用户`id`
*   `GET /user/group?id={id}`
    *   获取与给定用户关联的组`id`
    *   为分页添加额外的查询参数（如果合适）

* * *

# 添加操作

*   `POST /company`
    *   创建新公司
    *   返回新公司`id`作为回应
*   `POST /group`
    *   创建一个新组
    *   由于每个组都必须有关联公司，因此关联公司是 JSON/XML 帖子正文中的必填字段
    *   返回新组`id`作为响应
    *   由于每个集团都必须有一个关联公司，这也创建了公司与集团的联系
*   `POST /user`
    *   创建一个新用户
    *   由于每个用户都必须有一个关联公司，因此关联公司是 JSON/XML 帖子正文中的必填字段
    *   返回新用户`id`作为响应
    *   由于每个用户都必须有一个关联公司，这也创建了公司-用户连接
*   `PUT /user/group?id={id}`
    *   将一组组与给定的用户相关联`id`
*   `PUT /group/user?id={id}`
    *   将一组用户与给定的组相关联`id`

* * *

# 删除操作

*   `DELETE /company?id={id}`
    *   删除给定的公司`id`
    *   可以级联删除到关联的用户和组或阻止删除（如果存在）
*   `DELETE /group?id={id}`
    *   删除具有给定的组`id`
    *   同时删除关联的公司-集团连接
    *   不删除任何关联用户 - 仅删除用户组链接
*   `DELETE /user?id={id}`
    *   删除具有给定的用户`id`
    *   同时删除关联的公司-用户连接
    *   不删除任何关联组 - 仅删除用户组链接
*   `DELETE /user/group?id={id}`
    *   将一组组与用户与给定的用户解除关联`id`
*   `DELETE /group/user?id={id}`
    *   将一组用户与给定的组解除关联`id`

* * *

如果有任何不清楚的地方，请在评论中告诉我，我可以澄清。

# function - CUDA 上的 Bessel 函数在某个 epsilon 内

> ID：15863511
> 
> 赞同：1
> 
> 时间：2013-04-07T14:32:09.010
> 
> 标签：function, cuda, bessel-functions

我尝试使用 CUDA 执行 Bessel 函数（例如 J0(x)）。这是公式 ![在此处输入图像描述](https://i.stack.imgur.com/fp6Yk.jpg)

我尝试将结果控制在某个 epsilon 值内。所以这是代码

```
 __device__ void Bessel_j0(int totalBlocks, int totalThreads, float z, float epsilon, float* result){
            int n = 1;
            *result = 0;

            bool epsilonFlag = true;

            int idx_start;
            int idx_end;

            while(epsilonFlag == true){ 
                initThreadBounds(&idx_start, &idx_end, n, totalBlocks, totalThreads);
                float a_k;
                for (int k = idx_start; k < idx_end; k++) {
                    a_k = m_power((-0.25 * z * z), k)/(m_factorial(k) * m_factorial(k)); 
                    *result += a_k;
                }
                if(a_k < epsilon){
                        epsilonFlag = false;
                }
                n++;
            }
        }

__global__ void J0(int totalBlocks, int totalThreads,  float x, float* result){
        float res = 0;

        Bessel_j0(totalBlocks, totalThreads, 10, 0.01, &res);
        result[(blockIdx.x*totalThreads + threadIdx.x)] = res;
}

__host__ void J0test(){

    const int blocksNum = 32;
    const int threadNum = 32;

    float   *device_resultf; //для устройства
    float   host_resultf[threadNum*blocksNum]   ={0};

    cudaMalloc((void**) &device_resultf, sizeof(float)*threadNum*blocksNum);

    J0<<<blocksNum, threadNum>>>(blocksNum, threadNum, 10, device_resultf); 
    cudaThreadSynchronize();

    cudaMemcpy(host_resultf, device_resultf, sizeof(float)*threadNum*blocksNum, cudaMemcpyDeviceToHost);

    float sum = 0;

    for (int i = 0; i != blocksNum*threadNum; ++i) {
        sum += host_resultf[i];
        printf ("result in %i cell = %f \n", i, host_resultf[i]);
    }
    printf ("Bessel res = %f \n", sum);
    cudaFree(device_resultf);
}
int main(int argc, char* argv[])
{
    J0test();   
} 
```

当我运行它时出现黑屏并且 Windows 说 nVidia 驱动程序没有响应并且它恢复了它。`host_resultf`在控制台输出中，数组中只有零。怎么了？如何在某个 epsilon 内正确执行功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:56:52.217

这不太可能，但可能是您的内核执行达到了允许的内核执行时间限制。您的代码没有显示迭代次数的上限。可能永远无法达到 epsilon 并且您的内核继续执行超出时间限制。这个[网站](https://devtalk.nvidia.com/default/topic/414479/the-cuda-5-second-execution-time-limit-finding-a-the-way-to-work-around-the-gdi-timeout/)可以提供帮助。

在所有情况下，我都会为 epsilon 循环添加一个上限，永远不要让代码在没有迭代次数限制的情况下运行。

# jfreechart - 条形图文本截断问题

> ID：15863515
> 
> 赞同：0
> 
> 时间：2013-04-07T14:32:42.013
> 
> 标签：jfreechart, bar-chart

我有两个问题，可以通过这些屏幕截图说明：

![在此处输入图像描述](https://i.stack.imgur.com/1kdTG.png)

![在此处输入图像描述](https://i.stack.imgur.com/F97fK.png)

那么，在这种情况下如何避免文本被截断？当然，宽度就足够了。而且，不同的字符串截断是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:04:45.913

我怀疑[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)或[首选尺寸](https://stackoverflow.com/q/7229226/230513)问题。您可以覆盖`getPreferredSize()`in`ChartPanel`以获得良好的初始显示，如此处所示[，](https://stackoverflow.com/a/15715096/230513)并指定一个布局，如`BorderLayout.CENTER`或`GridLayout`让面板采用封闭的大小`Container`。如果做不到这一点，请编辑您的问题以包含一个显示您遇到的任何问题的[sscce 。](http://sscce.org/)

# dart - Dart 'query' 显式转换

> ID：15863518
> 
> 赞同：3
> 
> 时间：2013-04-07T14:32:47.530
> 
> 标签：dart

请考虑以下代码：

```
ButtonElement btnSend = (ButtonElement) query('#btnSendToServer'); 
```

我收到一个内部错误：

```
Internal error: 'http://127.0.0.1:3030/home/Seth.Ladd/Projects/DartSimpleChat/SimpleChatClient/web/out/simplechatclient.dart': Error: line 30 pos 43: semicolon expected

ButtonElement btnSend = (ButtonElement) query('#btnSendToServer');
                                        ^ 
```

所以问题是：

*   这是进行显式转换的正确方法吗？
*   是否`query`支持显式/隐式强制转换？
*   我应该担心返回的对象`query`还是我可以盲目地相信将返回的对象是`ButtonElement`？
*   是否有一个`ButtonElements`只能搜索的查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T17:18:18.557

Dart 是一种动态类型语言。即使你到处抛出类型，它仍然是动态的。所以考虑到这一点，通常当你在施放时，这意味着你想确定这个东西是特定类型的。

在你的情况下，你想确保它是一个`ButtonElement`. 您可以使用`is`和`as`运算符进行类型测试：

```
// You can write code to test the type yourself:
if (btnSend is! ButtonElement) throw 'Not a button';

// Or you can use "as" that will throw if the type is wrong:
var btnSend = query('#btnSendToServer') as ButtonElement; 
```

根据情况，我使用`is`or `as`。通常我不使用`as`，因为它有（小？）性能开销。

您可以采取另一种方法，我个人更喜欢这种方法。像这样编写代码：

```
ButtonElement btnSend = query('#btnSendToServer'); 
```

当你在开发时，在检查模式下运行：

```
dart --checked foo.dart 
```

或者，当您使用 Dartium 时，[请阅读有关使用 flags 手动启动 Dartium 的信息](http://www.dartlang.org/dartium/#command)。我有一段时间没有使用 Dart Editor，所以我不确定它是否默认使用检查模式以及是否可以更改它。

在检查模式下运行时，`btnSend`如果类型不匹配，分配 to 将抛出。这样做的好处是，当您在没有检查模式的情况下在生产环境中运行代码时，您的应用程序不会受到任何性能开销的影响。

并回答一些个别问题：

### 是否`query`支持显式/隐式强制转换？

不，这只是一个不关心类型的随机函数。

### 是否有仅搜索`ButtonElement`s 的查询？

您可以编写如下内容：

```
query('button#btnSendToServer') 
```

这是一个典型的 CSS 选择器，而不是 Dart 的东西。

### 我应该担心从查询返回的对象还是我可以盲目地相信该对象将被返回`ButtonElement`？

是和不是。如果对象不是 a ，我相信它最终会在某个时候抛出您的应用程序`ButtonElement`，但我建议您在开发和编写时以检查模式运行，例如：

```
ButtonElement btnSend = query('#btnSendToServer'); 
```

由您决定要输入多少类型信息。如果您认为按钮很容易成为错误类型，那么我认为指定类型是有意义的。就我个人而言，我不会对类型感到疯狂，只在我认为它们有意义的地方。

# ios - iOS 应用名称过期和重置时钟

> ID：15863523
> 
> 赞同：0
> 
> 时间：2013-04-07T14:33:27.263
> 
> 标签：ios, app-store

几个月前我注册了一个应用程序名称，但从未提交过二进制文件。现在 Apple 表示我有一周时间提交二进制文件，否则该名称将可供其他开发人员使用。**提交二进制文件并被开发人员拒绝会重置时钟吗？**

我知道提交一个被 Apple 审查并拒绝的二进制文件会重置时钟，因为这发生在我的另一个应用程序上。但是我很好奇当开发人员拒绝它时会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:39:49.167

注册您的应用程序后，您有 120 天的时间提交二进制文件以供审核。如果过期，则您必须再次注册该应用程序，并且您可能无法在新注册中使用以前的名称，也可能无法使用。

这是苹果文档对此的看法：

> 应用名称到期
> 
> 一旦您创建了您的应用程序，并且它处于准备上传或等待上传状态，您将有 120 天（4 个月）的时间从 iTunes Connect 中的创建日期开始向 Apple 提供二进制文件。
> 
> 如果您未在 120 天截止日期之前交付二进制文件，您的应用程序将从 iTunes Connect 中删除。
> 
> 由于此次删除，您的应用名称将能够被其他开发者使用，并且您不能重复使用应用名称、SKU 或 Bundle ID。
> 
> 请参阅本指南的删除应用程序部分，了解有关应用程序删除后果的更多信息。

# java - Java 程序的执行从哪一行开始？是主要方法吗？

> ID：15863530
> 
> 赞同：1
> 
> 时间：2013-04-07T14:34:09.573
> 
> 标签：java, main, execution

java程序的执行从哪里开始？我听到人们说它来自主要方法。我认为执行从静态块开始。我对吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:38:44.140

该程序的输出：

```
public class XXX {

    static YYY dependend = new YYY();

    static {
        System.out.println("3");
    }

    public static void main(String[] args) {
        System.out.println("4");
    }
}

class YYY {
    static {
        System.out.println("1");
    }
    YYY(){
        System.out.println("2");
    }
} 
```

当然是

```
1
2
3
4 
```

所以：你的程序的*入口点*是`main`. 但是在此之前执行了代码。并且这个“在 main 之前执行”代码不需要在同一个类中。并且也不需要此代码在静态初始化程序中（参见“2”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T14:36:41.930

main 方法是程序的入口点。如果包含“main”方法的类有需要初始化的静态成员或静态代码块，这将在“main”方法之前执行。

看这个示例代码：

```
public class Test {

    private static Object obj = new Object();

    public static void main(String[] args) {

        System.out.println("test");
    }

} 
```

如果您在对象初始化行中放置一个断点，您将看到它在 println 行之前运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:41:32.403

初始化类时执行静态块。对于包含`main`方法的类，它将在调用此方法之前，因为必须在使用它的任何方法之前初始化类。对于其他类，如果不需要初始化该类，它可以稍后或永远不会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T15:05:10.750

Java 应用程序通常由 main 方法初始化：

```
public static void main(String... args){
    System.out.println("Executing my application...");
} 
```

静态块将在 JVM 加载类时执行。如果没有 main 方法，您将无法启动应用程序，否则 JVM 将出现错误消息。
理论上可以使用静态块[（示例）](http://pastebin.com/M4KwKjKf)执行您的代码。但这是初始化应用程序的不好方法，因为该`doSomethingElse`方法可能被其他脚本调用，该脚本不想创建 gui（或您在初始化方法中执行的任何操作）。例如：

```
class Test2 extends Object{
    public static void doSomething(){
        System.out.println("Calling Test's doSomethingElse method.");
        Test.doSomethingElse();
    }
} 
```

Test2 的 doSomething 方法只想调用`doSomethingElse`，但创建 GUI 的方法也被调用，因为该类`Test`是由 JVM 加载的。当 JVM 加载一个类时——并且该类有一个静态块——静态块将首先被调用。Test 的静态块现在调用该`executingClass`方法并且将创建 GUI（但 Test2 只想调用`doSomethingElse`.

最后，您不应该使用静态块来初始化您的应用程序：

1.  静态块应该只用于创建该类需要的东西。
2.  `main`也需要方法。
3.  它可能会产生不可预知的影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T14:36:24.587

这是一个java程序的启动方法：

```
public static void main(String[] args){
    ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-28T13:14:24.133

如果一个类包含静态块和main方法() jvm会先执行静态块然后再执行main方法。但是如果你没有提到类中的静态块并且类只包含 main 方法，那么 jvm 只从 main 方法开始执行。

# python - 如何在简单的python表中获得正确的对齐？

> ID：15863531
> 
> 赞同：2
> 
> 时间：2013-04-07T14:34:11.720
> 
> 标签：python, alignment, tabular

我是 python 新手，我的问题似乎很愚蠢，当我用谷歌搜索时，我什至找不到答案......

我正在编写一个程序，该程序使用不同行星及其卫星的数据，进行一些计算以获得行星的质量，然后应该将计算出的数据呈现在表格中。

桌子是我的问题。我正在使用列表，但是当我打印我创建的表格时，它看起来很糟糕。

到目前为止，这是我的代码：

```
table = [["Typ av data", "Jupiter", "Saturnus", "Solen"],
     ["Planetmassa", jupiter_massa, saturnus_massa, solen_massa],
     ["Standardavvikelse", jupiter_standardavvikelse, saturnus_standardavvikelse, solen_standardavvikelse]]
for row in table:
   print(row) 
```

（它是瑞典语，但没关系。带有“”的单词只是单词/字符串，其余的是包含数据的列表。）

这是我打印时的样子：

```
['Typ av data', 'Jupiter', 'Saturnus', 'Solen']
['Planetmassa', 4.110628390867864e+39, 1.2347845577268216e+39, 4.319543783963521e+42]
['Standardavvikelse', 2.3357256803779513e+37, 8.050789009367835e+36, 1.9328559536580606e+40] 
```

如果可能的话，我想去掉括号和''，但最重要的是 - 我希望它显示为具有固定列宽的正确表格。就像我说的我已经用谷歌搜索但找不到一个答案（也许我只是愚蠢）。我也尝试安装诸如 prettytable 和 texttable 之类的模块，但它似乎在我的计算机上不起作用，所以我需要使用已经存在的模块。

那么 - 如何修复列宽？

我希望这是有道理的，并且有人可以帮助我，因为我要疯了。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:38:28.047

首先，打印一个列表将显示该列表的表示形式。

```
>>> l = ['1', '2', '3']
>>> print l
['1', '2', '3'] 
```

要单独打印项目，您可以执行多项操作。

您可以将它们分别打印在自己的行上，

```
>>> for i in l:
    print i

1
2
3 
```

或者，您可以使用字符串格式对其进行格式化。

```
>>> print "%s" % ', '.join(l)
1, 2, 3 
```

* * *

否则，如果您想自动创建表格，您可以使用一些模块，例如[CSV](http://docs.python.org/2/library/csv.html)或[prettytable](http://code.google.com/p/prettytable/)。

来自网站的漂亮表示例：

PrettyTable 是一个简单的 Python 库，旨在使其在视觉上吸引人的 ASCII 表中快速轻松地表示表格数据，如下所示：

```
+-----------+------+------------+-----------------+
| City name | Area | Population | Annual Rainfall |
+-----------+------+------------+-----------------+
| Adelaide  | 1295 |  1158259   |      600.5      |
| Brisbane  | 5905 |  1857594   |      1146.4     |
| Darwin    | 112  |   120900   |      1714.7     |
| Hobart    | 1357 |   205556   |      619.5      |
| Melbourne | 1566 |  3806092   |      646.9      |
| Perth     | 5386 |  1554769   |      869.4      |
| Sydney    | 2058 |  4336374   |      1214.8     |
+-----------+------+------------+-----------------+ 
```

PrettyTable 允许您控制表格的许多方面，例如列填充的宽度、列内文本的对齐方式、用于绘制表格边框的字符、是否需要边框等等。您可以控制打印哪些列和行的子集，并且可以按特定列的值对行进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-18T11:35:40.967

做一个简单的表

```
from beautifultable import BeautifulTable

table = BeautifulTable()
table.column_headers = ["", 'Jupiter', 'Saturnus', 'Solen']
table.append_row(['Planetmassa', round(4.110628390867864,3),  round(1.2347845577268216,3),  round(4.319543783963521,3)])
table.append_row(['Standardavvikelse', 1,2, 7])

print(table) 
```

你会得到的

[![样本行星表](https://i.stack.imgur.com/wIvja.png)](https://i.stack.imgur.com/wIvja.png)

# python - 用 pygame.midi 演奏音符

> ID：15863534
> 
> 赞同：11
> 
> 时间：2013-04-07T14:34:19.097
> 
> 标签：python, pygame, midi

我正在尝试使用 pygame.midi 模块播放声音。这是我使用的代码：

```
#!/usr/bin/env python

import pygame.midi
import time

pygame.midi.init()

print pygame.midi.get_default_output_id()
print pygame.midi.get_device_info(0)

player = pygame.midi.Output(0)

player.set_instrument(0)

print 'Playing...'

player.note_on(64)
time.sleep(1)
player.note_off(64)

print 'Played'

pygame.midi.quit() 
```

我在搜索示例时发现了类似的代码，这是输出：

> 0
> 
> ('ALSA', 'Midi 通过端口 0', 0, 1, 0)
> 
> 玩...
> 
> 玩过
> 
> PortMidi 调用失败...
> 
> PortMidi：`错误的指针'
> 
> 输入回车...

没有声音播放，我也没有找到任何关于 pygame.midi 退出后意外发生的 PortMidi 错误的信息。

你有什么主意吗？如果有帮助的话，我正在运行一个基于 debian 的 linux 发行版。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-31T18:44:10.803

有两个小问题。声音不会播放，因为您没有设置音符的[力度](http://electronicmusic.wikia.com/wiki/Velocity)。尝试将其设置为 127（最大）以听到声音。另一个问题是您在退出之前没有在最后删除 midi 输出对象。这会导致最后出现“PortMidi: `Bad pointer'”错误。所以这里是应该正常工作的更正代码：

```
import pygame.midi
import time

pygame.midi.init()
player = pygame.midi.Output(0)
player.set_instrument(0)
player.note_on(64, 127)
time.sleep(1)
player.note_off(64, 127)
del player
pygame.midi.quit() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T21:44:16.647

感谢您的代码，帮助我从 midi 和 python 开始。

在我看来，您忘记了 note_on、note_off 事件中的速度（某种音量）信息。默认值为 0，因此音符会“播放”，但听不到。

关于您收到的退出错误消息...我无能为力，我不了解 Linux 和 ALSA。作为参考，这在使用默认 midi 映射器的 Win Vista 框中对我来说效果很好。这只是使用基本音符和大和弦结构演奏一个音符、琶音或和弦。

```
import pygame
import time
import pygame.midi

pygame.midi.init()
player= pygame.midi.Output(0)
player.set_instrument(48,1)

major=[0,4,7,12]

def go(note):
    player.note_on(note, 127,1)
    time.sleep(1)
    player.note_off(note,127,1)

def arp(base,ints):
    for n in ints:
        go(base+n)

def chord(base, ints):
    player.note_on(base,127,1)
    player.note_on(base+ints[1],127,1)
    player.note_on(base+ints[2],127,1)
    player.note_on(base+ints[3],127,1)
    time.sleep(1)
    player.note_off(base,127,1)
    player.note_off(base+ints[1],127,1)
    player.note_off(base+ints[2],127,1)
    player.note_off(base+ints[3],127,1)
def end():
       pygame.quit() 
```

要使用它，只需导入模块，例如，键入 go(60)、chord (60, major) 或 arp(60, major) 之类的命令

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-06T12:26:09.397

错误消息显示您的输出设备是“通过端口的 MIDI”——它不能自己发出声音。您必须将它（例如使用 qjackctl 或任何其他让您连接 ALSA MIDI 端口的工具）连接到像 qsynth 这样的软件合成器。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-07T16:55:14.147

尝试导入整个 pygame 模块：

```
import pygame 
```

不是

```
import pygame.midi 
```

# javascript - IE9 - SCRIPT5009：“jQuery”未定义

> ID：15863536
> 
> 赞同：4
> 
> 时间：2013-04-07T14:34:24.580
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

以下代码遇到错误*SCRIPT5009: "jQuery" is undefined* in IE9（可能也在较旧的 IE 版本中）：

```
var $tx;
if (window.jQuery) {
    $tx = jQuery;
    if( jQuery().jquery.replace(".", "") < 17.1 ) {
        addjQuery();
    }   
} else {
    addjQuery();
}
function addjQuery() {
    document.write('<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"><\/script>');
    document.write('<script type="text/javascript">$tx = jQuery.noConflict();<\/script>');
}
document.write('<script src="workingScript.js"><\/script>'); 
```

我解决了！它以这种方式工作正常：

```
var $tx;
if (window.jQuery) {
    $tx = jQuery;
    if( jQuery().jquery.replace(".", "") < 17.1 ) {
        addjQuery();
    }   
} else {
    addjQuery();
}
function addjQuery() {
    loadScript("http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js", function(){
        $tx = jQuery.noConflict(true);
    });
}
document.write('<script src="workingScript.js"><\/script>');

function loadScript(url, callback){

    var script = document.createElement("script")
    script.type = "text/javascript";

    if (script.readyState){  //IE
        script.onreadystatechange = function(){
            if (script.readyState == "loaded" ||
                    script.readyState == "complete"){
                script.onreadystatechange = null;
                callback();
            }
        };
    } else {  //Others
        script.onload = function(){
            callback();
        };
    }
    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
} 
```

工作脚本.js：

```
(function ($) {
    // some code here
})($tx); 
```

错误发生在这里*“$tx = jQuery.noConflict();”* 如果`addjQuery`函数被调用。如果网站已经使用当前的 jQuery 版本，那么一切都可以正常工作。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:41:22.340

您的脚本在执行期间会加载其他脚本，它们不会同步执行，而是异步执行。执行时`$tx = jQuery.noConflict();`不能保证 jQuery 已加载。

如果您需要同步执行此操作，[请查看此问题](https://stackoverflow.com/questions/2879509/dynamically-loading-javascript-synchronously)，或者最好使用[RequireJS](http://requirejs.org/)之类的工具来为您处理此问题。（它也允许这种回退）。

# objective-c - Cocoa 和 XCode 中的 KeyEvents

> ID：15863537
> 
> 赞同：3
> 
> 时间：2013-04-07T14:34:27.673
> 
> 标签：objective-c, cocoa, events, nsresponder

我正在通过为 OSX 构建一个基本的计算器应用程序来学习 Objective-C。一切都很好，除了我需要允许按下键盘上的某些键来做同样的事情，就像你点击界面上的按钮一样。

我读到的所有内容都说要捕获这些，您必须在 NSResponder 的子类中具有逻辑。我的问题在于我如何“连接”该文件。创建一个新的 .h 和 .m 文件，它是 NSResponder 的子类，如下所示：

**响应者.h**

* * *

```
#import <Foundation/Foundation.h>

@interface Responder : NSResponder

   - (void)keyDown:(NSEvent *)event;

@end 
```

**响应者.m**

* * *

```
#import "Responder.h"

@implementation Responder

- (void)keyDown:(NSEvent *)event {
    NSAlert *alert = [[NSAlert alloc] init];
    [alert addButtonWithTitle:@"OK"];
    [alert setMessageText:@"Hey"];
    [alert setInformativeText:@"You Pressed A Key!"];
    [alert setAlertStyle:NSWarningAlertStyle];
    [alert runModal];
}

@end 
```

应用程序如何知道使用该文件？**.xib**文件的界面中是否有我拖动蓝色箭头并将其“连接”到某处的地方？我什至做得对吗？我已经在谷歌上搜索了一段时间，几乎所有内容都假设我知道如何将 NSResponder 子类放入我的应用程序中。我认为我真的错过了一个基本概念。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T14:45:49.223

当人们说“在 NSResponder 的子类中”时，他们并不一定意味着您应该创建一个*新*的NSResponder 子类。他们的意思是：按键由响应者处理。您的应用程序结构中充满了响应者！因此，要干预密钥处理过程，请将其中的一个子类化*（*这样您就可以在某个地方放置代码）。

您缺少的“基本概念”是*响应者链*：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html)

（向下滚动到标题“响应者链”。）

放置此类代码的常见位置是窗口控制器。NSWindowController 是一个 NSResponder 子类。它在响应者链中处于较高位置，您可能已经为它上了一堂课。

另一种选择是使用视图。NSView 是一个 NSResponder 子类，您的窗口充满了视图。将原本惰性的 NSView 放在窗口中所有内容的后面也就不足为奇了，只是为了充当支持 NSResponder 以捕获链上出现的事件。

# express - express.js 中间件层属于什么

> ID：15863543
> 
> 赞同：0
> 
> 时间：2013-04-07T14:35:22.857
> 
> 标签：express, middleware

我不知道**express.js中的****中间件**层属于什么。所有不属于 HTTP 协议方法的方法（但属于主应用程序的命名空间）都可以被视为中间件吗？例如**app.set,app.param...**

 ****感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T19:46:12.157

中间件层是 express 将执行以处理传入请求的函数列表。它由您对`app.use`.

`app.set`, `app.param`, 等与中间件堆栈没有直接关系，因此不相关。

有一点深奥的地方是 express 有一个称为路由器的中间件，它通常会在您第一次调用任何 HTTP 方法“动词”方法时自动添加到中间件链中`app.(get|post|put|head|del|patch|etc)`，express 将查看路由器是否已经添加到中间件堆栈并在需要时将其插入。****

# php - 如何在codeigniter中创建链接？

> ID：15863548
> 
> 赞同：1
> 
> 时间：2013-04-07T14:36:06.463
> 
> 标签：php, codeigniter, url

对不起，我英语不好，请使用翻译。如何在 codeigniter 中创建链接？

如果我想在之后使用永久链接怎么办？

每次更改永久链接时，我都必须更改整个系统代码？

是否有一个库可以根据这些参数生成链接并按照动态配置的方式运行？

例如，如果我想从以下位置更改系统目录：

```
http://testing/webapp/index.php 
```

到：

```
http://production/index.php 
```

我需要更改所有代码吗？对此的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:44:42.100

您可以使用 codeingiter 的方法 base_url() 和 site_url()。

首先，您需要在控制器中加载 URL 帮助程序：

```
$this->load->helper('url'); 
```

请参阅下面的定义（根据 CI 文档，[http](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html) ://ellislab.com/codeigniter/user-guide/helpers/url_helper.html ）

* * *

## **网站网址（）**

> 返回配置文件中指定的站点 URL。index.php 文件（或您在配置文件中设置为站点 index_page 的任何内容）将添加到 URL，您传递给函数的任何 URI 段以及配置文件中设置的 url_suffix 也将添加到 URL。
> 
> 建议您在需要生成本地 URL 的任何时候使用此功能，以便在您的 URL 更改时您的页面变得更加便携。
> 
> 可以选择将段作为字符串或数组传递给函数。这是一个字符串示例：
> 
> echo site_url("news/local/123"); 上面的示例将返回如下内容：
> 
> ```
> http://example.com/index.php/news/local/123 
> ```
> 
> 以下是作为数组传递的段的示例：
> 
> ```
> $segments = array('news', 'local', '123');
> 
> echo site_url($segments); 
> ```

* * *

## **base_url()**

> 返回配置文件中指定的站点基本 URL。例子：
> 
> ```
> echo base_url(); 
> ```
> 
> 此函数返回与 site_url 相同的内容，但不附加 index_page 或 url_suffix。
> 
> 也像 site_url 一样，您可以将段提供为字符串或数组。这是一个字符串示例：
> 
> ```
> echo base_url("blog/post/123"); 
> ```
> 
> 上面的示例将返回如下内容：
> 
> ```
> http://example.com/blog/post/123 
> ```
> 
> 这很有用，因为与 site_url() 不同，您可以将字符串提供给文件，例如图像或样式表。例如：
> 
> ```
> echo base_url("/_user_guide_src_ci/images/icons/edit.png"); 
> ```
> 
> 这会给你类似的东西：
> 
> ```
> http://example.com/images/icons/edit.png 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:46:22.333

这正是配置文件中基本 URL 的用途。之后您唯一需要担心的是您的相对 URL，您甚至可以通过在 config 文件夹中创建新文件夹来设置不同的环境

例如，如果我直接在 config 文件夹中设置我的 config.php

```
$config['base_url'] = 'http://localhost/hello'; 
```

然后基本 url 总是 http://localhost/hello 现在假设我有我的家庭开发环境和生产环境。如果我将 config.php 复制到名为 production 的 config 文件夹中，那么 application/config/production/config.php 将基本 URL 设置为：

```
$config['base_url'] = 'http://www.example.com/hello'; 
```

然后在我的 index.php 中我设置：

```
define('ENVIRONMENT', 'production'); 
```

我需要改变环境的任何地方 Codeigniter 都会为我改变它。因此，在现场我使用生产环境，在家里我将环境更改为开发环境，CI 为我完成工作。

然后在您的代码中使用 base_url() 来制作您的链接。

例如：

```
 <a href="<?=base_url();?>hello_world">Hello World</a> 
```

将产生：

```
//at home:
http://localhost/hello_world
//in production:
http://www.example.com/hello_world 
```

有道理？

# mysql - Mysql Left Join with Sum Criteria

> ID：15863554
> 
> 赞同：2
> 
> 时间：2013-04-07T14:36:46.347
> 
> 标签：mysql, sql, join

我正在尝试创建一个报告，该报告将显示具有未结帐户余额的客户，但是我似乎无法使用左联接使其工作。

我有 3 个表 - 客户、购买和付款，我正在尝试显示总购买成本减去付款大于 0 的客户。

到目前为止，我有以下查询：

```
mysqli_query("SELECT customers.name as name, SUM(purchases.cost) as cost, SUM(payments.paymentamount) as payments FROM customers 
LEFT JOIN purchases ON purchases.customerid = customers.id 
LEFT JOIN payments ON payments.customerid = customers.id 
WHERE (cost - payments) > 0 
GROUP BY customers.id"); 
```

谁能明白为什么这不起作用？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:40:36.780

您需要计算每个子查询的每个总数，`customerID`以避免不正确的结果。

```
SELECT  a.*,
        COALESCE(b.totalPurchase , 0) - COALESCE(c.totalPayment , 0) AS Balance
FROM    customers a
        LEFT JOIN
        (
            SELECT  customerid, SUM(cost) totalPurchase
            FROM    purchases
            GROUP   BY customerid
        ) b ON a.ID = b.customerID
        LEFT JOIN
        (
            SELECT  customerid, SUM(paymentamount) totalPayment
            FROM    payments
            GROUP   BY customerid
        ) c ON a.ID = c.customerID
WHERE   COALESCE(b.totalPurchase , 0) - COALESCE(c.totalPayment , 0) > 0 
```

# android - 在android 4上显示菜单按钮

> ID：15863555
> 
> 赞同：1
> 
> 时间：2013-04-07T14:36:49.417
> 
> 标签：android

我正在寻找一种以编程方式在 android 4.0+ 设备中显示旧菜单按钮的方法。我的应用程序具有全屏活动（没有操作栏），并且由于不同的原因，我希望用户能够访问某些类型的功能而无需向 UI 添加菜单按钮。

我的应用程序使用了很多 SDK 14+ 设施，因此不能将其设置为旧版 api 级别。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:37:27.737

如果不将其更改为清单中的旧 API 级别，就无法做到这一点，抱歉。

# php - XMLHttpRequest Post responseText 字符串问题

> ID：15863559
> 
> 赞同：0
> 
> 时间：2013-04-07T14:37:19.837
> 
> 标签：php, javascript, ajax

我通过 XMLHttpRequest POST 发送大量数据，并将其保存到数据库中。我发布到的 php 文件完全是 PHP 代码。我想在 responseText 中添加某种返回值，这样我就可以告诉用户数据是否正确保存，但我注意到一些奇怪的东西。我正在做一些测试，我只是使用 echo 发布一些我可以从原始页面检查的基本文本，以便向用户发送警报。

长话短说，我的检查失败了，因为 responseText 包含 2 个空格，所以我的 echo "success"; 填充了 2 个空格。正如我所说，整个文件是 php，根本没有 html，或者任何其他回声。reponseText 中没有回显的字符串计数为 2，均为空格。我使用 GET 做了一个简单的测试，但它没有做同样的事情。responseText 仅包含我回显的字符。

这是POST代码：

```
HttpRequest.open('POST', "save_message.php", true);
HttpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
HttpRequest.setRequestHeader("Content-length", param.length);
HttpRequest.setRequestHeader("Connection", "close");
HttpRequest.send(param); 
```

我认为实际参数无关紧要，因为它们不应该向文档写入任何内容。我也没有包含请求页面的 php，因为它相当大，我已经浏览了大约 50 次，而且它根本没有在页面上回显任何内容，所以我真的很困惑。知道什么可能导致我的 POST 返回 2 个额外的字符吗？任何输入将不胜感激，因为这让我发疯。

谢谢。

# jquery - 通过其 css 类检索一个元素的 id

> ID：15863561
> 
> 赞同：1
> 
> 时间：2013-04-07T14:37:45.930
> 
> 标签：jquery, css

我有一些具有相同 CSS 类的元素

我想知道如何检索其中一个的 ID；比如那个班的第一个

这是我当前的代码，但它不起作用

```
$('.imageofarticle').mousemove(function(){
  var a = $(this).attr('id');
  var tableau = a.split(":");
  alert("get the first : "+$('.showmovingEdit').[0].attr('id'));
  // $('.showmovingEdit')[tableau[1]].show();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:39:33.643

您的代码在语法上是错误的，选择第一个元素可以使用`first`方法：

```
// Return the first element in jQuery collection
$('.showmovingEdit').first().attr('id'); 
```

对于选择其他元素，您可以使用`eq`方法：

```
// Return an element based on it's index in jQuery collection
$('.showmovingEdit').eq(index).attr('id'); 
```

请注意，当`[index]`使用（*正确*）时，它会返回一个没有`attr`方法的 DOM Element 对象，您应该使用`id`属性来代替：

```
// Select the first DOM element in the set and return it's ID property
var id = $('.showmovingEdit')[0].id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:40:14.040

您有额外的`dot`并在对象上调用 attr`DOM`而不是直接访问`id`

*改变*

```
$('.showmovingEdit').[0].attr('id')
                    ^ 
```

*到*

```
$('.showmovingEdit')[0].id 
```

或使用[`get()`](http://api.jquery.com/get/)

```
$('.showmovingEdit').get(0).id 
```

或使用[`eq()`](http://api.jquery.com/eq/)

```
$('.showmovingEdit').eq(0).attr("id"); 
```

**编辑**

> [每个 jQuery 对象也伪装成一个数组，因此我们可以使用数组解引用](http://api.jquery.com/get/)运算符来获取列表项：

```
alert($('selector')[0]); //gives first element returned by selector. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T14:40:39.130

只需使用这个：

```
$('.showmovingEdit').attr('id') 
```

另外，参考许多其他帖子：您不需要`first()`. `attr()`如果在没有参数的情况下调用，将自动获取第一个元素。

# scheme - 方案中的特殊排列

> ID：15863565
> 
> 赞同：1
> 
> 时间：2013-04-07T14:38:01.080
> 
> 标签：scheme, racket

我如何以这种方式在方案中生成排列：排列的第一个元素正好在 1-2 之间，第二个 1-4 和第三个 1-3 ......而且数字可以在排列中出现不止一次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T16:42:12.870

使用 的排列`for/list`，在 Racket 文档中进行了[介绍。](http://docs.racket-lang.org/reference/for.html?q=graph#%28form._%28%28lib._racket/private/base..rkt%29._for/list%29%29)

```
(for/list ([i '(1 2)]
             #:when i
             [j '(1 2 3 4)]
             #:when j
             [k '(1 2 3)])
    (list i j k)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:43:14.050

Here's how you'd generate all the permutations for a sequence of numbers in a given range:

```
(define (cartesian-product . lsts)
  (foldr (lambda (lst acc)
           (for*/list ((x (in-list lst))
                       (y (in-list acc)))
             (cons x y)))
         '(())
         lsts))

(cartesian-product (range 1 3) (range 1 5) (range 1 4))

=> '((1 1 1) (1 1 2) (1 1 3) (1 2 1) (1 2 2) (1 2 3) (1 3 1) (1 3 2)
     (1 3 3) (1 4 1) (1 4 2) (1 4 3) (2 1 1) (2 1 2) (2 1 3) (2 2 1)
     (2 2 2) (2 2 3) (2 3 1) (2 3 2) (2 3 3) (2 4 1) (2 4 2) (2 4 3)) 
```

# java - 在 Map Reduce 上实施 DBSCAN 需要帮助

> ID：15863566
> 
> 赞同：1
> 
> 时间：2013-04-07T14:38:22.593
> 
> 标签：java, hadoop, mapreduce

我正在尝试在 MR 上实现 DBSCAN，并使用下面粘贴的链接中的直觉

```
http://codingwiththomas.blogspot.com/2012/05/distributed-dbscan-intuition.html 
```

[实现查询 MongoDB 数据库的 DBSCAN 算法的最佳编程语言？](https://stackoverflow.com/questions/10775133/best-programming-language-to-implement-dbscan-algorithm-querying-a-mongodb-datab)

我的问题是如何计算初始距离矩阵。我不想仅仅为了计算距离矩阵并将其存储在内存中而运行 hadoop 作业，因为我不会是一个好的设计。有什么建议么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:50:27.933

感谢您阅读我的博客。

是的，要计算的距离矩阵非常困难。

我已经应用了一个 minhash 聚类（mahout 也有一个实现）来查找非常相似的向量。因此，您不必计算整个距离矩阵，而是计算相似向量的距离矩阵。

所以我对你的建议是使用 mahout 的 minhashing 来查找相似向量的集群。然后为它们计算一个较小的距离矩阵，然后应用我在帖子中写的其余要点：

*   从“迷你”集群中提取相邻点
*   从结果图中运行一个连通分量算法（有 MapReduce、Giraph 和 Hama 的实现）

所以基本上就是这样。不幸的是，这整个阶段都无法开源，所以这就是整个过程所需要的。

# css - 插入 Breadcrumb NavXT 问题 wordpress

> ID：15863580
> 
> 赞同：0
> 
> 时间：2013-04-07T14:39:05.353
> 
> 标签：css, wordpress

我在 wordpress 中使用 Breadcrumb NavXT。我已经激活了它，它会自动在面包屑中添加我遇到的问题是使字体更大并在 CSS 子主题中将边距更改得更高

似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:00:29.980

```
#hasadmintabs ul.ui-tabs-nav{border-bottom:1px solid #ccc; font-size:12px; height:27px; list-style-image:none; list-style-position:outside; list-style-type:none; margin:14px 0 0; overflow:visible;padding:0 0 0 6px;}
#hasadmintabs ul.ui-tabs-nav li{display:block; float:left; line-height:200%; list-style-image:none; list-style-position:outside; list-style-type:none; margin:0; padding:0; position:relative; text-align:center; white-space:nowrap; width:auto;}
#hasadmintabs ul.ui-tabs-nav li a{background:transparent none no-repeat scroll 0 50%; border-bottom:1px solid #ccc; display:block; color:#aaa; float:left; line-height:25px; padding:1px 13px 0; position:relative; text-decoration:none;}
#hasadmintabs ul.ui-tabs-nav li.ui-tabs-active a{border:1px solid #ccc; border-bottom-color:#fff; height: 25px; color:#464646; font-weight:normal; padding:1px 13px 0;}
#hasadmintabs ul.ui-tabs-nav li.ui-tabs-active a:hover, #hasadmintabs ul.ui-tabs-nav a:hover{outline-color:-moz-use-text-color; outline-style:none; outline-width:medium; color:#d54e21;}
#hasadmintabs ul.ui-tabs-nav li a:focus, #hasadmintabs ul.ui-tabs-nav li a:active{outline: none;}
#hasadmintabs ul.ui-tabs-nav span{font-size: 12px; font-weight: bolder;}
#screen-options-wrap p.submit {margin:0; padding:0;} 
```

# class - WSO2 - 设置一个属性并将其写入 Carbon Log

> ID：15863582
> 
> 赞同：0
> 
> 时间：2013-04-07T14:39:17.957
> 
> 标签：class, logging, wso2, mediator

我创建了一个自定义代理并在其中添加了一个类中介和日志中介。我正在尝试在 java 类中设置属性的值，并且需要在日志中写入，因为代理被部署。但是，到目前为止，还没有取得任何成功。

我尝试在 Log 调解器中添加一个参数并使用 get-property() 方法，但它仍然不打印它。如果我使用“属性”调解器本身，那么我可以在日志中写入值，但这不是我们的目的。

我还尝试在 java 类中使用 log.debug，只是为了编写通常的“进入/退出函数”，但没有喘息的机会。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T16:41:09.660

您如何在 java 类中设置属性（即：在您的类中介中）？应该是这样的；

```
synapseMesssageContext.setProperty(key,value); 
```

然后，在序列流中访问它；

```
<property xmlns:ns="http://org.apache.synapse/xsd"   name="testing the property"
                expression="get-property('key')"   scope="default"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:42:19.820

您可以使用 log.info 打印任何日志消息。请参考已使用 log.info 记录消息的 [1]。

[1] [http://wso2.org/library/2898](http://wso2.org/library/2898)

# java - android中的序列化？

> ID：15863585
> 
> 赞同：0
> 
> 时间：2013-04-07T14:39:35.690
> 
> 标签：java, android

您好我正在使用不同的 VM（Oracle 热点，jse）序列化一个对象并使用 android VM（dalvik）反序列化它。会有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:42:39.870

假设通过“序列化”你的意思是`Serializable`，那么是的。不保证不同 VM 之间的序列化相同。请使用其他东西（例如，XML、JSON）。

**更新**

你的第一条评论有缺陷，我无法用 500 个字符来回答。

> 当然是的。没有实现 Serializable 我们不能序列化

有才华的程序员可以。有才华的程序员可以将数据序列化为 XML、JSON、Protocol Buffers、Thrift、ASN.l、YAML 和任何数量的其他格式。

> 实际上我正在做的是我正在使用 ObjectOutputStream（oracle 热点）将对象写入网络并使用 ObjectInputStream 在 android 上读取该对象

有才华的程序员使用独立于平台的序列化方法，例如我上面列出的任何一种。那是因为有才华的程序员意识到，在未来，可能需要有不是基于 Java 的客户端或服务器。

> 所以你的意思是说现在这很好，但将来不能保证。

不，我写道：

> 不保证不同 VM 之间的序列化相同。

使用一个 VM（例如 Oracle）序列化的对象应该能够**使用该 VM**反序列化。无法保证使用一个 VM 序列化的对象可以使用另一个 VM 反序列化。事实上，开发人员在试图准确地做你想做的事情时遇到了麻烦。这是才华横溢的程序员使用独立于平台的序列化结构的另一个例子。

# camera - 截取 UIView 的屏幕截图，其中它的子视图是相机会话

> ID：15863588
> 
> 赞同：6
> 
> 时间：2013-04-07T14:39:58.517
> 
> 标签：camera, avfoundation, screenshot, calayer, layer

我正在构建一个应用程序，我需要在其中截取其子视图是相机会话（AVFoundation 会话）的视图。我试过这段代码：

```
CGRect rect = [self.containerView bounds];
UIGraphicsBeginImageContextWithOptions(rect.size,YES,0.0f);
CGContextRef context = UIGraphicsGetCurrentContext();
[self.containerView.layer renderInContext:context];
UIImage *capturedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

这有效地为我提供了一个带有视图的 UIImage，只是相机会话是黑色的：

![在此处输入图像描述](https://i.stack.imgur.com/nwStO.png)

我已经尝试过私有方法`UIGetScreenImage()`并且效果很好，但是由于Apple不允许这样做，所以我不能使用它。我也尝试过[Apple 文档](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)中的那个，但它是一样的。我已经使用层将问题跟踪到 AVFoundation 会话。我怎样才能做到这一点？该应用程序有一个容器视图，其中有两个视图是停止的相机会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-02T16:57:14.880

如果使用 iOS 7，这相当简单，您可以从 UIViewController 执行以下操作：

```
UIView *snapshotView = [self.view snapshotViewAfterScreenUpdates:YES]; 
```

您也可以使用寡妇的此链接：[iOS：以编程方式制作屏幕截图的最快、最高效的方法是什么？](https://stackoverflow.com/questions/7964153/ios-whats-the-fastest-most-performant-way-to-make-a-screenshot-programaticall)

对于 iOS 6 及更早版本，我只能找到以下 Apple 技术问答：[如何截取包含 UIKit 和 Camera 元素的应用程序的屏幕截图？]

1.  捕获相机视图的内容。
2.  将捕获的相机内容自己绘制到渲染 UIKit 元素的图形上下文中。（类似于您在代码中所做的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:05:55.163

我目前也在寻找解决这个问题的方法！

我目前不在，所以我无法测试我发现的内容，但请查看以下链接：

[截图 - 获取截图的合法方式](http://cocoacoderblog.com/2011/03/30/screenshots-a-legal-way-to-get-screenshots/) 似乎在正确的轨道上 - 这是 [示例项目](https://github.com/cocoacoderorg/Screenshots)（[这里](http://cocoacoderblog.com/2011/03/07/how-to-legally-replace-uigetscreenimage/)是最初的帖子）

当我设法让它工作时，我一定会更新这个答案！

# python - 扭曲的串口协议

> ID：15863591
> 
> 赞同：0
> 
> 时间：2013-04-07T14:40:23.453
> 
> 标签：python, protocols, twisted

我已经查看了使用串行端口（gpsfix 和鼠标）的 python 扭曲示例以及在 stackoveflow 上给出的其他解决方案。但是，目前还不清楚如何编写通用的串口协议。谁能提供一个简单（但完整）的 python 扭曲 SerialPort 程序示例？

我需要使用 /dev/ttySx 作为串行端口，并且我需要从/向它读取写入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:35:52.997

`SerialPort`接受一个参数，该参数命名要与之交互的串行端口。这是第二个参数，紧跟在协议参数之后。

例如，

```
from twisted.internet.serialport import SerialPort

port = SerialPort(yourProtocol, "/dev/tty2")
# ... 
```

# android - 短到 Int 转换

> ID：15863592
> 
> 赞同：0
> 
> 时间：2013-04-07T14:40:26.647
> 
> 标签：android, integer, int, converter, short

我正在寻找一种将 Short 转换为 Int 的方法。我试着用

```
short i = 5;
int t = (int) i; 
```

但这不起作用。同样在 Short 函数本身中，我看不到类似 toInt() 函数的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:53:00.890

以下代码可以是您问题的（不优雅的）解决方案：

```
short i = 5;
int t = 0;
t = t+i; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T07:28:37.587

你看过包装类的“ [Short ”吗？](http://developer.android.com/reference/java/lang/Short.html)

# php - 更改 PHP 的缩进空间 "\t"

> ID：15863596
> 
> 赞同：0
> 
> 时间：2013-04-07T14:40:37.110
> 
> 标签：php, tabs, indentation, output

是否可以在 PHP 中更改“\t”的缩进空间？现在搜索了一段时间，但找不到任何指向答案的东西。我知道有一些库可以整理输出，但我更希望能够设置它，并使其与我的 HTML 缩进保持一致。如果可能，我希望更改此缩进，使其变为 4 个空格，而不是默认的“制表符”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:44:47.147

« 标签宽度不是由 PHP 指定的，而是由查看它的程序指定的。如果您在编辑器中查看它，您可以在编辑器中设置选项卡宽度。»

[我可以更改 PHP 字符串中的制表符宽度 (\t) 吗？](https://stackoverflow.com/questions/3829896/can-i-change-tab-width-t-in-a-php-string)

[指定制表符宽度？](https://stackoverflow.com/questions/667200/specifying-tab-width)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:46:02.740

制表符是制表符。它没有宽度，它是一个制表符。视觉呈现制表符（通过缩进内容）的事物（编辑器、查看器、浏览器）决定了宽度。没有 PHP 或其他“设置”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:46:45.657

如果您希望文本输入中的制表符变为 4 个空格，您可以这样做：

```
$formatted_string = preg_replace("/\t/", "    ", $string); 
```

为了在 html 页面上工作，您可能需要用四个替换空格`&nbsp;`

# c++ - 尝试对 C++ 中的输入词进行简单的搜索和计数

> ID：15863599
> 
> 赞同：1
> 
> 时间：2013-04-07T14:40:47.273
> 
> 标签：c++, text, count, line, word

这是我到目前为止的代码

```
int main()
{
string word;
int wordcount = 0;
cout << "Enter a word to be counted in a file: ";
cin >> word;
string s;
ifstream file ("Names.txt");
while (file >> s)
        {
            if(s == word)
            ++ wordcount;
        }
int cnt = count( istream_iterator<string>(file), istream_iterator<string>(), word());
cout << cnt << endl;
} 
```

File Names.txt 有大量的单词和数字。我不太明白 istream 迭代器如何计算单词，但我得到了一些结果。我目前得到的唯一错误是

```
in function int main 
error: no match for call to `(std::string) ()' 
```

这发生在以“int cnt”开头的行中。我已经尝试了几个小时，但我对 C++ 不太熟悉，看来我必须创建一个额外的字符串或以某种方式更改单词字符串。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:48:28.860

此行不正确：

```
 int cnt = count( istream_iterator<string>(infile), 
            istream_iterator<string>(), word());
                                          //^^^^^Error 
```

应该：

```
int cnt = count( istream_iterator<string>(infile), 
                istream_iterator<string>(), word); 
```

同时，删除以下部分：

```
while (infile >> s)
{
    if(s == word)
    ++ wordcount;
} 
```

否则，`file`当您使用带有计数算法的迭代器时，将指向文件末尾。您应该使用循环或迭代器，而不是同时使用两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:51:21.180

问题是：word()。您试图在 std::string 上调用 operator()，但 std::string 中没有这样的成员函数。

将您的声明更改为：

```
int cnt = count(istream_iterator<string>(file), istream_iterator<string>(), word); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:00:02.137

由于 tacp 要求您删除的 while 循环，您得到的输出为 0。while 循环将文件指针推进到文件末尾，因此计数算法在文件末尾开始和结束，实际上什么都不做。

# java - Java 多线程 - 识别代码中的错误

> ID：15863602
> 
> 赞同：0
> 
> 时间：2013-04-07T14:41:00.563
> 
> 标签：java, multithreading

所以这段代码是在考试中给出的，问题是它有什么问题。它旨在创建新的类型对象，`SomeClass`但前提是它们不是之前创建的。

```
class Foo {
    private SomeClass x = null;
    public synchronized SomeClass getX() {
        if (x == null)
            x = new SomeClass();
        return x;
    }
} 
```

我的猜测是`x`并且`getX`应该被声明为静态的，否则可能会有多个`x`. 那是对的吗？如果是这样，那是代码中唯一的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:55:19.413

您正在尝试构建单例工厂方法：

```
public class Foo {
    private static SomeClass x = null;
    public static synchronized SomeClass getSomeClass() {
        if (x == null)
            x = new SomeClass();
        return x;
    }
} 
```

注意，如果你真的需要这个，你还应该将 SomeClass 设为 Foo 的内部类，并将 SomeClass 的构造函数设为私有。

# primefaces - PrimeFaces commandButton 不起作用

> ID：15863608
> 
> 赞同：1
> 
> 时间：2013-04-07T14:41:36.530
> 
> 标签：primefaces, commandbutton

我知道这是一个非常常见的问题，发生的原因有很多，但是尽管我已经搜索了很多，但我没有找到适合我的案例的解决方案。

我的[primefaces](http://www.primefaces.org/) commandButton 在 h:form 内，声明如下：

```
<p:commandButton action="#{userGroupBean.createOrUpdateItemAction}"
                 value="#{userGroupBean.actionCreateOrUpdateLabel}" 
                 icon="iconDisk"
                 update="@form"
                 oncomplete="window.scrollTo(0,0);" /> 
```

我的 UserGroupBean 是 ViewScoped。

单击此按钮时应该创建一个用户组并显示“成功创建”消息。而不是这样做，它只是显示“请稍候”加载程序一秒钟，然后什么也不做。日志没有错误，通过远程调试确认没有进入action方法。

奇怪的是，当我在本地 Tomcat 安装中运行相同的代码时，它运行成功。此外，在部署此应用程序的远程服务器上，这曾经工作得很好。一切都是突然发生的，我的应用程序中有很多像这样的命令按钮，它们仍然很好用。只是这个特定页面似乎出了点问题。

我用的是 PrimeFaces 3.1 版本，我不知道还有什么有用的信息可以提供。
任何帮助/想法都是/不胜感激。

编辑
这是 userGroup.xhtml（按钮不起作用的页面）代码：

```
<ui:composition 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:fn="http://java.sun.com/jsp/jstl/functions"
xmlns:comps="http://java.sun.com/jsf/composite/components"
template="/WEB-INF/templates/userGroup/edit.xhtml">

<f:metadata>
    <f:event type="preRenderView" listener="#{userGroupBean.initUserGroupUsersList}" />
</f:metadata>

<ui:define name="title">
    User Group
</ui:define>

<ui:define name="centerUnit">
    <h:form>
        <h:panelGrid columns="3" styleClass="ui-messages-info ui-corner-all" rendered="#{not empty flash.messages_info}">
            <span class="ui-message-info-icon"></span>
            #{flash.messages_info}
        </h:panelGrid>

        <p:messages showDetail="true" globalOnly="true" />

        <p:panel header="Settings">
            <h:panelGrid columns="3" cellpadding="5">
                <h:outputLabel for="title" value="User Group Title:" />
                <p:inputText id="title" value="#{userGroupBean.userGroup.title}" />
                <p:message for="title" />
            </h:panelGrid>
        </p:panel>

        <p:panel header="Members">

            <p:pickList value="#{userGroupBean.usersGroupUsersList}" var="user"
                iconOnly="true"
                converter="userConverter"
                itemLabel="#{user.username}" itemValue="#{user}">
                <f:facet name="sourceCaption">Available</f:facet>
                <f:facet name="targetCaption">Participating</f:facet>
                <p:column style="width:25%">  
                    <p:graphicImage value="#{facesContext.externalContext.request.contextPath}/../file?thumbnail=&amp;downloadPath=#{user.contactDetails.picture.downloadPath}" width="40" height="40" />  
                </p:column>
                <p:column style="width:25%">
                    <h:outputText value="#{user.username}" />
                </p:column> 
                <p:column style="width: 50%">
                    <h:outputText value="#{user.contactDetails.lastName} #{user.contactDetails.firstName}"/>
                </p:column>
            </p:pickList>

        </p:panel>

        <p:commandButton 
            action="#{userGroupBean.createOrUpdateItemAction}"
            value="#{userGroupBean.actionCreateOrUpdateLabel}"
            icon="iconDisk"
            update="@form"
            oncomplete="window.scrollTo(0,0);" />

        <p:separator />

        <p:outputPanel style="text-align:right" layout="block" rendered="#{!userGroupBean.userGroup.isNew() and userGroupBean.hasUserModifyUserGroupAuthority()}">
            <h:panelGroup>
                <p:commandButton value="Delete" title="Do you want to delete this user group?"
                    action="#{userGroupBean.deleteItemAction}" 
                    update="@form"
                    icon="iconDelete" />

                <p:commandButton value="Leave user group" title="I want to leave this user group"
                    action="#{userGroupBean.userInSessionLeavesUserGroupAction}"
                    update="@form" 
                    icon="iconUserGo"/>
            </h:panelGroup>
        </p:outputPanel>

    </h:form>

</ui:define> 
```

UserGroupBean.java：

```
@Controller("userGroupBean")
@Scope(value = "view")
public class UserGroupBean extends GenericBean<UserGroup> {

private static final long serialVersionUID = 1L;
final Log logger = LogFactory.getLog(getClass());

@Autowired
private SessionServiceImpl sessionService;
@Autowired
protected UserGroupService userGroupService;
@Autowired
protected UserService userService;

@Override
public String getPageCreateOrUpdate() { return "userGroup.xhtml"; }
@Override
public String getPageList() {   return "../../my/userGroups.xhtml"; }

/** Wrapper method which calls getItem() */
public UserGroup getUserGroup() { return getItem(); }
/** Wrapper method which calls setItem() */
public void setUserGroup(UserGroup UserGroup) { setItem(UserGroup); }

protected UserGroup findItemById(Integer userGroupId) {
    return userGroupService.findUserGroupById(userGroupId);
}

@Override
protected void resolveCreateRequest(HttpServletRequest req) {
    logger.debug("UserGroupBean::resolveCreateRequest()");
    setItem( userGroupService.initializeUserGroup("") );
}

@Override
protected String createItem() {
    try {
        if(!isValidUsersSelection(new ArrayList<User>(usersGroupUsersList.getTarget()))) 
            return null;

        List<Integer> userIds = new ArrayList<Integer>();
        for(User user: usersGroupUsersList.getTarget())
            userIds.add(user.getId());
        userGroupService.saveUserGroup(getUserGroup(), userIds);

        helperFacesContext.addInfoMessageToFlash("User Group successfully created.");
        return getPageCreateOrUpdate()+"?action=update&id="+getItem().getId()+"&faces-redirect=true";
    }
    catch (Exception e) {
         JsfUtils.error("There was an error", e.getMessage());
         return null;
    } 
}
 .....
} 
```

最后是 UservConverter.java

```
@FacesConverter(value = "userConverter")
public class UserConverter extends GenericConverter {

final Log logger = LogFactory.getLog(getClass());

private UserDAO getUserDAO(FacesContext facesContext) {
    // @Autowired gives null
    return (UserDAO) FacesContextUtils.getWebApplicationContext(facesContext).getBean("userDAO");
}

/**
 * converts the String representation of the key back to the Object
 */
@Override
public Object getAsObject(FacesContext context, UIComponent component,
        String value) throws ConverterException {
    logger.info("UserConverter::getAsObject("+value+")");
    Integer userId = Integer.valueOf(value);
    try {
        return getUserDAO(context).findById(userId);
    } catch(Exception e) {
        throw new ConverterException(handleException(context,e.getMessage()));
    }
} 
```

新线索：当我重新启动服务器时，只有在那之后，当我访问此页面并设法在 userGroup.xhtml 完全加载之前创建一个用户组时，用户组就创建好了。如果我重新启动服务器并等待页面加载，然后再次创建用户组，则不会发生任何事情。这个问题最终会让我发疯。

# python - 在 Python 中解析一个语句，以便在发生错误时重新启动该过程

> ID：15863610
> 
> 赞同：0
> 
> 时间：2013-04-07T14:41:56.343
> 
> 标签：python, optimization, restart

我在 Python 中编写了这个语句（用于将程序转换为可执行文件），以便加载文件夹（* *.txt）*或单个文本文件中的所有文本文件，检查数据格式是否正确（`get_parse`和`check_header`）并处理数据. 如果数据格式不正确，程序要求重新启动 ( `doit = raw_input("Continue (Y/N)?[Y]: "`)。在第一种情况下（*.txt），当数据格式不正确（分隔符“.”和第一行中存在 Header）时，程序报告错误并从 .restart（如果按 Y）重新启动`INPUT = raw_input("Input (*.txt): ")`。在第二种情况下（加载单个文本文件），如果数据格式不正确，程序将关闭。

我还希望为单个加载文本文件选择用户重新启动程序的可能性`INPUT = raw_input("Input (*.txt): )`

```
while True:
    INPUT = raw_input("Input (*.txt): ")
    if os.path.split(INPUT)[1] == "*.txt":
        file_list = glob.glob(os.path.join(os.path.split(INPUT)[0], '*.txt'))
        for file in file_list:
            file_head, file_tail = os.path.split(file)
            file_root, file_suffix = os.path.splitext(file_tail)
            try:
                parse = get_parse(file)
            except Exception:
                print ValueError("%s has delimiter type not valid" % file_tail)
                raw_input("press any key to exit")
                print "Exiting..."
                break
            if check_header(file):
                print ValueError("%s has an Header" % file_tail)
                raw_input("press any key to exit")
                print "Exiting..."
                break
                # do other stuff
        doit = raw_input("Continue (Y/N)?[Y]: ")
        if doit == 'N'or doit == 'n':
            print "Exiting....."
            break
    else:
        try:
            parse = get_parse(INPUT)
        except Exception:
            print ValueError("Delimiter type not valid")
            raw_input("press any key to exit")
            print "Exiting..."
            break
        if check_header(INPUT):
            print ValueError("Header is not valid")
            raw_input("press any key to exit")
            print "Exiting..."
            break
        # do other stuff
        doit = raw_input("Continue (Y/N)?[Y]: ")
        if doit == 'N'or doit == 'n':
            print "Exiting....."
            break 
```

第二种情况，使用windows的命令提示符是文本文件不正确

```
Input (*.txt): C:\test.txt
Delimiter type not valid
press any key to exit
Exiting.....

C:\Users\> 
```

在第一种情况下 (*.txt)

```
Input (*.txt): C:\*.txt
Area1_1.txt has delimiter type not valid
press any key to exit
Exiting...
Continue (Y/N)?[Y]: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:04:09.610

您的问题仍不清楚，但我*认为* 您想使用`continue`而不是 `break`，如果您的目标是在错误后重新启动循环。此外，您应该以不同的方式处理异常：

```
<snip>
else:
    try:
        parse = get_parse(INPUT)
    except ValueError:
        print "Delimiter type not valid"
        print "Try again..."
        continue
    if check_header(INPUT):
        print "Header is not valid"
        print "Try again..."
        continue
    # do other stuff
    doit = raw_input("Continue (Y/N)?[Y]: ")
    if doit == 'N'or doit == 'n':
        print "Exiting....."
        break 
```

# c - 用 string.h 检查一个单词是否是回文

> ID：15863611
> 
> 赞同：1
> 
> 时间：2013-04-07T14:42:01.663
> 
> 标签：c, palindrome, string.h

我必须做一个程序来告诉我一个字符串是回文还是不使用库 string.h 。我写了下面的代码，但输出总是“回文”

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

int main()
{
 char a[100],b[100]; 
 int i,k;  
 printf("Type the string \n");
 gets(a);
 k=strlen(a);
 for(i=0;i<strlen(a);i++)
 {
  a[i]=b[k]; 
  k--;                       
 }           //at the end of this code the string "b" should be the reverse of "a"
 k=strcmp(a,b);
 if (k!=0)   //here I check if a=b or not
 {printf("palindrome");}
 else
 {printf("not palindrome");}
 getch();
 return 0;
} 
```

示例：当我的输入为“非”时，输出应为“回文”，如果输入为“船”，则输出应为“非回文”。谁能帮我找出问题所在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:45:55.387

我认为这是行

`a[i]=b[k];`

这不是将`b[k]`（您尚未初始化的）的内容放入`a[i]`（您已用get填充的）吗？这会用空格覆盖 a 中的测试值，（或 b 的内存中的任何内容）你不应该做相反的事情吗？

但更好的是根本不这样做 - 您可以只比较 a 数组中的字符。

```
k=strlen(a);
for(i=0; i<k/2; i++)
   if(a[i] != a[k-i]) 
      return "Not Palindrome";
return "Palindrome"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-18T22:16:59.793

```
 /**
    ** Name: palindrome.c
    ** Description: This program checks if a word is palindrome or not
    ** Aldo Núñez Tovar
    **/

    #include <stdio.h>
    #include <string.h>
    #include <stdlib.h>

    int
    isPalindrome ( char* str )
    {
        char* str2 = str + strlen ( str) - 1;

        while ( str < str2 )
        {
            if ( *str++ != *str2-- )
            {
                return 0;
            }
        }
        return 1;
    }

    int
    main ( void )
    {
        char* str = "racecar"; /* level, civic, rotor, racecar */

        printf ( "Is  %s  palindrome? %s\n", str, isPalindrome ( str )? "Yes": "No" );
        return 0;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:53:59.210

我为你修好了，请注意评论：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

int main()
{
     char a[100],b[100]; 
     int i;
     int stringLen;  
     printf("Type the string \n");
     gets(a);
     stringLen = strlen(a);
     for(i=0; i < stringLen; i++)
     {
         //First you want to copy to B not A...
         //second, you need to remove "1" from the size cause array start from "0".
         b[stringLen-1-i] = a[i];            
     }//at the end of this code the string "b" should be the reverse of "a"

     if (strcmp(a,b) == 0)   //0 mean equal !
     {
         printf("palindrome");
     }
     else
     {
         printf("not palindrome");
     }
     getch();
     return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T14:54:13.440

`strcmp()`当两个字符串相等时返回零值。它必须是这样的：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

int main()
{
    char a[100],b[100]; 
    int i,k;  
    printf("Type the string \n");
    gets(a);
    k=strlen(a)-1;
    for(i=0;i<strlen(a);i++)
    {
        b[i]=a[k]; //assign to b not to a
        k--;                       
    }
    b[strlen(a)]='\0';//terminate the string with null character
    //at the end of this code the string "b" should be the reverse of "a"
    k=strcmp(a,b);
    if (k==0)   //here I check if a=b or not
    {printf("palindrome");}
    else
    {printf("not palindrome");}
    getch();
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-05-18T18:30:50.737

你的代码是这样说的：

```
k=strlen(a); 
```

像这样修复

```
k=strlen(a)-1; 
```

这是因为如果长度为 15，则数组索引 0 到 14 等于 15。因此，将其从 14 反转。这意味着`length-1`。

知道了？

# waf - Check_cxx() 不适用于 cuda

> ID：15863612
> 
> 赞同：0
> 
> 时间：2013-04-07T14:42:06.400
> 
> 标签：waf

我是编译和构建项目的 waf 框架的新手。基本上我正在尝试加载编译器和用于编译`.cu`文件的库。我有以下代码行取自`cuda.py`Thomas Nagy 编写的文件

```
self.check_cxx(header='cuda.h', lib='cudart', libpath=_libpath, includes=_includes) 
```

`my _libpath`正确指向`'/usr/local/cuda/lib'`包含`libcudart.dylib`. 但它说它找不到 cudart 库。

`libcudart.dylib`是一个符号链接到`/Developer/Nvidia/cuda5.0/lib/libcudart.dylib`

谁能告诉这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:19:02.437

得到它的工作问题在于加载 cxx 编译器。编译器 compiler_cxx 的加载失败，因为我写的是 load('cxx') 而不是 load('compiler_cxx')。更正此错误后，check_cxx 能够加载 cuda 和 cudart 库。不知道为什么它没有抱怨 cxx 加载失败..

# xslt-1.0 - 使用 xsl 从模板的局部变量分配全局变量值

> ID：15863615
> 
> 赞同：0
> 
> 时间：2013-04-07T14:42:30.147
> 
> 标签：xslt-1.0

```
 `<xsl:template match="xhtml:style">
      <xsl:variable name="text" select="text()"/>
  </xsl:template>` 
```

这是我的模板具有局部变量，其值将是 html 的内部样式，我希望这些内部样式数据成为全局变量值，以便我可以在其他模板中访问该值以进行进一步处理。

我想使用内部样式数据进行进一步处理，所以我想使用这种方法。

我如何从模板的局部变量向全局变量插入值。？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:42:22.320

> 我如何从模板的局部变量向全局变量插入值。？？？

**这是一个常见问题解答——你不能。**

XSLT 是一种函数式编程语言，除其他外，这意味着变量的值一旦定义就无法修改。

**你可以用一种更简单的方式来实现你想要的**——将想要的全局变量简单地定义为（`xsl:stylesheet' 的孩子）：

```
<xsl:variable name="vYourGlobalVar" select="(//xhtml:style)[1]/text()"/> 
```

# python - python字典第一个值

> ID：15863618
> 
> 赞同：-3
> 
> 时间：2013-04-07T14:43:01.867
> 
> 标签：python

以下代码按时间戳将对象蜡烛保存在字典中。我的初始化有问题，我得到以下输出

```
class CandleBuffer:
    def __init__(self,candle=None):
        self.candlebuffer={0: candle}
    def update(self,candle):
        #print candlebuffer
        self.candlebuffer[candle.ref_timestamp]= candle
        #print self.candlebuffer[candle.ref_timestamp].last_price
        #print candle.last_price
        for matel in self.candlebuffer:
            print matel

candleBuffer = CandleBuffer() 
```

输出

```
0
2013-04-04 15:38:00

```

你知道我可以摆脱那个零“第一”价值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:44:58.153

在`__init__`集合

```
self.candlebuffer = {} 
```

我看不出有理由设置你不想要的值

# python - 如何根据对象状态更改表单字段的要求？

> ID：15863621
> 
> 赞同：0
> 
> 时间：2013-04-07T14:43:13.393
> 
> 标签：python, django, forms, django-admin

是否可以根据对象状态更改表单字段的必需属性（在模型表单和管理员中 - 如果可能）？

例如：我的数据库模型包含`status`字段，并且根据当前对象状态，某些状态值中应该需要一些其他字段，而在其他状态值中应该是可选的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:52:50.003

更好的是，你可以在`Model`水平上做到这一点。

来自[Django 文档](https://docs.djangoproject.com/en/1.5/ref/models/instances/#django.db.models.Model.clean)

```
class MyModel(models.Model):
    .... some fields here...

    def clean(self):
        from django.core.exceptions import ValidationError
        # Don't allow draft entries to have a pub_date.
        if self.status == 'draft' and self.pub_date is not None:
            raise ValidationError('Draft entries may not have a publication date.')
        # Set the pub_date for published items if it hasn't been set already.
        if self.status == 'published' and self.pub_date is None:
            self.pub_date = datetime.date.today() 
```

否则，如果这不是特别绑定到 db 模型，您可以类似地定义`clean`模型表单的方法。

看[这里](https://docs.djangoproject.com/en/1.5/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)

更新：我刚得到`required`你提到的属性。

无需动态更改所需属性。首先，RDBMS 不支持这一点。要么有约束，要么没有。因此，由于这是业务逻辑而不是数据库逻辑，您应该将`null=True`这些字段（required=False，在表单字段上），并按照我上面演示的那样处理它们。

# android - 在 Android 上将 JodaTime (DateTime, Duration) 与 ORMLite 一起使用

> ID：15863626
> 
> 赞同：0
> 
> 时间：2013-04-07T14:43:56.360
> 
> 标签：android, jodatime, ormlite

我正在寻找一种方法来保存 DateTime 对象和 Duration 作为我的值对象的一部分。

这是我的价值对象：

```
@DatabaseTable(tableName = DrivingRecord.TableName)
public class DrivingRecord {
    public final static String TableName = "drivingRecord";
    public final static String DRIVING_TASK_COLUMN_NAME = "drivingTask";

    @DatabaseField(foreign = true, columnName = DRIVING_TASK_COLUMN_NAME)
    private DrivingTask drivingTask;

    @DatabaseField(generatedId = true)
    private int id;

    @DatabaseField(dataType = DataType.LONG)
    private DateTime startTime;

    @DatabaseField
    private Duration durationOfDriving;
} 
```

我得到以下异常：

```
java.lang.IllegalArgumentException: Field class org.joda.time.Duration for field FieldType:name=durationOfDriving,class=DrivingRecord is not valid for type com.j256.ormlite.field.types.LongType@41223060, maybe should be long 
```

尝试为 DateTime 创建条目时，我也遇到了同样的异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:27:22.267

```
java.lang.IllegalArgumentException: Field class org.joda.time.Duration for
    field FieldType:name=durationOfDriving,class=DrivingRecord is not valid for
    type com.j256.ormlite.field.types.LongType@41223060, maybe should be long 
```

此消息试图告诉您您的`Duration`字段`durationOfDriving`与 date-type 不兼容`DataType.LONG`。我不确定您发布的代码是否不正确，但我原以为您会尝试这样做：

```
@DatabaseField(dataType = DataType.LONG)
private Duration durationOfDriving; 
```

[ORMLite 原生](http://ormlite.com/)支持`DateTime`但不支持持久化`Duration`. 只是试图强迫它长是行不通的。您将不得不为`Duration`.

查看[关于自定义持久化器的文档，](http://ormlite.com/docs/custom-data-types)了解如何启动自己的持久化器。

您还可以查看此答案以获取另一个示例：[Is there any way to disable ORMLite's check that a field declared with DataType.SERIALIZABLE implements Serializable?](https://stackoverflow.com/questions/15687160/is-there-any-way-to-disable-ormlites-check-that-a-field-declared-with-datatype/15690590#15690590)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:43:56.360

这是我能够解决问题的节目。使时间戳变长，并保存时区。现在，如果需要，我可以搜索时间戳。

```
@DatabaseTable(tableName = DrivingRecord.TableName)
public class DrivingRecord {
    public final static String TableName = "drivingRecord";
    public final static String DRIVING_TASK_COLUMN_NAME = "drivingTask";

    @DatabaseField(foreign = true, columnName = DRIVING_TASK_COLUMN_NAME)
    private DrivingTask drivingTask;

    @DatabaseField(generatedId = true)
    private int id;

    @DatabaseField(dataType = DataType.LONG)
    private long startTime;

    @DatabaseField
    private Duration durationOfDriving;

    @DatabaseField(canBeNull = false, dataType= DataType.SERIALIZABLE)
    private DateTimeZone timeZone;

    public void setDateTime(DateTime dateTime){
        this.startTime = startTime.getMillis();
        this.timeZone = startTime.getZone();
    }

    public DateTime getDateTime(){
        return new DateTime(startTime, timeZone);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T01:42:01.453

虽然 JodaTime 不适用于 ORMLite，但您可以使用适用于 ORMLite 的 Java Date。您还可以通过多种方式在 JodaTime 和 Date 之间进行转换。

```
@DatabaseField
protected Date createdAt;

public static String formatDateTime(DateTime dateTime1) {
    if (dateTime1 == null || dateTime1.getYear() == 0) {
        return "";
    }
    DateFormat df = DateFormat.getDateInstance(DateFormat.SHORT, ApplicationBase.AppContext.getResources().getConfiguration().locale);
    Calendar calendar02 = new GregorianCalendar(dateTime1.getYear(), dateTime1.getMonthOfYear() - 1, dateTime1.getDayOfMonth());
    Date date3 = calendar02.getTime();
    String date3str = DataItemBase.formatDate(date3);
    return date3str;
} 
```

# java - 如何向 Google 的 MyLocation 引脚添加标题和片段（Google Maps Android API v2）

> ID：15863628
> 
> 赞同：0
> 
> 时间：2013-04-07T14:44:01.870
> 
> 标签：java, android, location, overlay, google-maps-markers

这是我的代码：

```
// Declare map
private GoogleMap map;
...
// Initialise map
map = ((MapFragment) findFragmentById(R.id.map)).getMap();
...
// Set location
map.setMyLocation(true); 
```

按下 Google 的 MyLocation 引脚后，我希望显示一个标题和片段。使用普通标记可以通过以下方式实现：

```
Marker marker = map.addMarker(new MarkerOptions().position(position)
.title("My Location")
.snippet("You are here!")
.icon(BitmapDescriptorFactory.fromResource(R.drawable.pin))); 
```

其中 .title("") 设置标题， .snippet("") 设置片段；但是我不确定如何使用 Google 的 MyLocation 引脚来执行此操作。

有人可以解释一下如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T04:16:33.010

这正是我想知道的。我尝试使用以下代码在 myLocation 图标上添加标记：

```
Marker marker = map.addMarker(new MarkerOptions().position(latLng)
.title("You are here")); 
```

latLng 从纬度和经度双精度数中获取数据

```
double latitude = myLocation.getLatitude();
double longitude = myLocation.getLongitude();       
LatLng latLng = new LatLng(latitude, longitude); 
```

这会在屏幕上添加一个标记，但它与 MyLocation 标记不同步。我认为这与位置有关，例如。它从网络或无线而不是 GPS 获取位置。

这几天一直在困扰我，我很想知道原因。

# android - 了解 SQlite close()

> ID：15863631
> 
> 赞同：0
> 
> 时间：2013-04-07T14:44:19.840
> 
> 标签：android, sqlite

我创建了一个 SQlite 数据库。从我的数据库中写入或读取都没有问题。例如，在我的 DBHandler.class 中，我添加了一些方法来读取一列。每个方法都有 dbHandler.close() 行。如果我想从 DBHandler.class 调用一个方法，那么我必须这样做： `... DBHandler db = new DBHandler(this); ... list = db.getAllBlock()`

我应该把线放在后面 `db.close()` 吗 `list...` ？？？？？？这是我要理解的问题....谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:06:22.117

每次您想做某事时都必须不断地重新连接到数据库是低效的，因此从每一行中删除 close() 语句并创建 DB Handler 类的单个实例：

最好有一个 DBHandler

```
DBHandler db;

public Activity/Class Constructor()
{
     DBHandler db = new DBHandler(this);
}

private void DoSomethingWithDatabase()
{
   db.doSomethingHere();
}

private void DoSomethingWithDatabaseAgain()
{
   db.doSomethingThere();
}

public void Activity/ClassClose()
{
    db.CloseDatabase();
} 
```

Activity/Class 正在使用它的实例，然后在 DBHandler 中有一个 close 方法，该方法在 Activity/Class 完成使用它后关闭与数据库的连接。

```
public class DBHandler
{  
    private static SQLiteDatabase m_DB;

    public DBHandler open() throws android.database.SQLException
    {
        m_DB = m_DBHelper.getWritableDatabase();
    }

    public void doSomethingHere()
    {
       m_DB.getAllBlock()
    }

    public void doSomethingThere()
    {
       m_DB.getAllSomethingElse()
    }

    public void CloseDatabase()
    {
       m_DB.close();
    }
} 
```

事实上，将 DBHandler 作为 Singleton 更好，这样您就可以访问应用程序范围的数据库，而无需每次都重新建立连接的低效开销。

# php - 在 php 表单中选择数据类型

> ID：15863633
> 
> 赞同：0
> 
> 时间：2013-04-07T14:44:31.213
> 
> 标签：php, mysql

我需要创建从用户那里收集数据的表单 我已经创建了一些标签，但仍然有一些我不知道他们的类型。我添加了类似这样的字段（简单文本信息）：

```
<li>
        First Name*:<br>
        <input type="Text" name="first_name">           
</li> 
```

但我不知道如何设置的字段是：

```
NAME OF FIELD      MYSQL DATA TYPE
date of birth      (date )
phone              (varchar)
gender             (enum : 'male','female') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:01:05.343

为什么不只使用前三个文本字段和一个下拉列表来获取性别：

```
<select name="gender">
    <option value="Female">Female</option>
    <option value="Male">Male</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:55:04.257

假设 HTML5

1.  名称 - 使用`<input type="text"`- 可以使用最大/最小长度
2.  日期（例如 DOB） -`<input type="date" ...`
3.  电话 -`<input type="tel" ...`
4.  性别 - 使用`select`即

    男 女

您还需要在服务器端仔细检查值。

# c++ - cesmlm.dll 未在 Visual Studio 2012 中加载

> ID：15863636
> 
> 赞同：0
> 
> 时间：2013-04-07T14:44:42.817
> 
> 标签：c++, visual-studio-2012

我是使用 Visual Studio 的新手。我的程序正在使用“cesmlm.dll”来访问 USB 打印机。在调试时，未加载此 dll。我尝试在项目属性-> 配置属性-> 调试中设置环境路径。我已经尝试将这个 .dll 放在项目文件夹中，我的输出文件夹中生成 exe 并且在所有可能的地方......但都是徒劳的:(。有人可以帮我吗？TIA。

**平台：Visual C++，操作系统：Windows 7，Visual Studio 版本：2012**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:00:15.107

据我所知，您没有将 dll 添加到链接器路径中。它需要知道您将 dll 存储在哪里才能链接到它。

转到项目属性 -> 配置属性 -> VC++ 目录 -> 库目录

单击此处的编辑以将路径添加到您的 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:37:06.353

问题可能是因为我的模块机器是 32 位的，而我尝试加载的 .dll 是 64 位的。

编辑 - 用 32 位 dll 替换 dll 后，问题已解决。感谢所有的帮助。:)

# javascript - 从二维 json 获取数据的问题

> ID：15863637
> 
> 赞同：0
> 
> 时间：2013-04-07T14:44:44.433
> 
> 标签：javascript, json

我有一个嵌套的 json，它给了我错误。

JSON：

```
[{"id":"15",
  "rand_key":"",
  "landlord_name":"Shah",
  "property_req_1":{
    "lead_req_id":"",
    "lead_id":"0",
    "category_id":"1",
    "region_id":"1",
    "area_location_id":"17",
    "sub_area_location_id":"3447",
    "min_beds":"1",
    "max_beds":"",
    "min_budget":"3332",
    "max_budget":"0",
    "min_area":"",
    "max_area":"0",
    "unit_type":"2",
    "unit_no":"",
    "listing_id_1_ref":"RH-R-17",
    "listing_id_1":"17"
  }
}] 
```

代码：

```
var json=null;
$.getJSON("ajax_files/getSingleRow_leads.php?id="+id, function(json){ 
    json = json[0]; 
```

这里`alert(json.property_req_1);`给我`[object Object]`

```
 if(json.property_req_1){

        var getReq = jQuery.parseJSON('['+json.property_req_1+']');
        $.each(getReq, function(id, key) { 
```

在这里拿不到

```
 });
    }
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:57:58.390

```
for (var i = 0; i < json.length; i++) {
    var firstData = json[i];
    for (var j = 0; j < json.property_req_1.length; j++) {
        var data = json.property_req_1[j];        
    }
} 
```

# c# - C# 数据库写入表不起作用

> ID：15863639
> 
> 赞同：0
> 
> 时间：2013-04-07T14:44:48.633
> 
> 标签：c#, database, visual-studio-2010

我在使用 Visual Studio 2010 时遇到问题。我正在使用基于服务的数据库 ( `.mdf`)。我在 Visual Studio 中手动创建了一个包含一些信息的表。我编写的代码可以从表中读取，但是当我插入新信息时，看起来数据已添加到其他数据库中。

我可以从正确的表中读取信息，但是当我向表中添加信息时，我在 Visual Studio 的服务器资源管理器中看不到更改。

我不知道为什么要使用不同的数据库！有人知道问题吗？

这是我的代码：

```
public class DataAccess
{
    private SqlConnection sqlConnection;
    private SqlCommand sqlCommand;
    private SqlDataAdapter dataAdapterAnimal;
    private DataSet dataset;
    private string connectionString = DBAccessLayer.Properties.Settings.Default.AnimalDBConnectionString;

    public DataSet LoadAnimalDataSet()
    {
        dataset = new DataSet();

        using (sqlConnection = new SqlConnection(connectionString))
        {
            sqlConnection.Open();
            dataAdapterAnimal = new SqlDataAdapter("SELECT * FROM AnimalTable", sqlConnection);
            dataAdapterAnimal.Fill(dataset, "AnimalTable");
            sqlConnection.Close();
            return dataset;
        }
    }

    public void AddAnimal(int animalID, string name, double age, string category, string gender, string extraAnimalInfo)
    {

        sqlConnection = new SqlConnection(connectionString);
        sqlCommand = new SqlCommand("INSERT INTO AnimalTable VALUES(@AnimalID, @Name, @Age, @Category, @Gender, @ExtraAnimalInfo)", sqlConnection);

        try
        {
            sqlConnection.Open();
            sqlCommand.Parameters.Add(new SqlParameter("@AnimalID", animalID));
            sqlCommand.Parameters.Add(new SqlParameter("@Name", name));
            sqlCommand.Parameters.Add(new SqlParameter("@Age", age));
            sqlCommand.Parameters.Add(new SqlParameter("@Category", category));
            sqlCommand.Parameters.Add(new SqlParameter("@Gender", gender));
            sqlCommand.Parameters.Add(new SqlParameter("@ExtraAnimalInfo", extraAnimalInfo));
            sqlCommand.ExecuteNonQuery();
            sqlConnection.Close();
        }
        catch (Exception ex)
        {
            throw;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T16:08:23.310

我还没有看到你的连接字符串 - 但从你的描述来看，这里可能是这个问题：

整体*`User Instance`和`AttachDbFileName=`*方法是有缺陷的 - 充其量！在 Visual Studio 中运行您的应用程序时，它将围绕`.mdf`文件进行复制（从您的`App_Data`目录到输出目录 - 通常`.\bin\debug`是您的应用程序运行的位置），并且**很可能**，您的`INSERT`工作正常 - 但您只是**看错了 . mdf文件**到底！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`MyDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=MyDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

# python - Scrapy Spider Parser 调用函数

> ID：15863640
> 
> 赞同：2
> 
> 时间：2013-04-07T14:44:49.777
> 
> 标签：python, xml, scrapy

解析器完成数据抓取后如何调用 writeXML？目前我可以看到数据爬网，但看不到输出文件。我尝试在 writeXML 下打印也没有输出。

以下是我的代码：

```
class FriendSpider(BaseSpider):
    # identifies of the Spider
    name = "friend"
    count = 0 
    allowed_domains = ["example.com.us"]
    start_urls = [
        "http://example.com.us/biz/friendlist/"
    ]

    def start_requests(self):
        for i in range(0,1722,40):
            yield self.make_requests_from_url("http://example.com.us/biz/friendlist/?start=%d" % i)

    def parse(self, response):
        response = response.replace(body=response.body.replace('<br />', '\n')) 
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li')
        items = []

        for site in sites:
            item = Item()
            self.count += 1
            item['id'] = str(self.count)
            item['name'] = site.select('.//div/div/h4/text()').extract()
            item['address'] = site.select('h4/span/text()').extract()
            item['review'] = ''.join(site.select('.//div[@class="review"]/p/text()').extract())
            item['birthdate'] = site.select('.//div/div/h5/text()').extract()

            items.append(item)
        return items

    def writeXML(self, items):
        root = ET.Element("Test")
        for item in items:
            item= ET.SubElement(root,'item')
            item.set('id', item['id'])
            address= ET.SubElement(item, 'address')
            address.text = item['address']
            user = ET.SubElement(item, 'user')
            user.text = item['user']
            birthdate= ET.SubElement(item, 'birthdate')
            birthdate.text = item['birthdate']
            review = ET.SubElement(item, 'review')
            review.text = item['review']

        # wrap it in an ElementTree instance, and save as XML
        file = open("out.xml", 'w')
        tree = ET.ElementTree(root)
        tree.write(file,xml_declaration=True,encoding='utf-8',method="xml") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T00:00:28.863

要使用内置 XML 导出器进行输出，请尝试以下命令：

```
scrapy crawl friend -o items.xml -t xml 
```

[如果输出不符合您的喜好，那么您可以尝试使用XMLExporter 类](https://scrapy.readthedocs.org/en/latest/topics/exporters.html?highlight=output#xmlitemexporter)作为基础创建自己的导出器。

# java - 仅在 mysql 运行后在 windows 中启动时运行 java 程序？

> ID：15863643
> 
> 赞同：0
> 
> 时间：2013-04-07T14:45:03.107
> 
> 标签：java, mysql, batch-file, startup, command-prompt

我有一个使用 Mysql 数据库的 java 程序（使用 Xaamp 附带的 mysql）。我编写了批处理脚本来启动 xaamp 并运行 java 程序。我如何确保我的 java 程序仅在 xaamp 启动并在启动后运行后才执行？还是有其他选择，我的限制是我只能使用 xaamp 附带的 Mysql 并且我想要在 Windows 启动时输入数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:47:22.193

将两个应用程序作为 Windows 服务启动，并将 java app 服务配置为依赖于 mysql 服务。

```
C:\Users\user>sc showsid "MySQL"

NAME: MySQL
SERVICE SID: S-1-5-80-3683700405-516785638-1234977990-1036077020-2941583457
STATUS: Inactive

C:\Users\user>sc showsid "MySQL" | FIND "STATUS:"
STATUS: Inactive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:47:13.243

您可以通过检查 MySQL 正在运行的端口（通常是 3306）来检查 MySQL 是否正在运行，并为此构建重试机制，例如每 10 秒检查一次？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:22:52.790

将它们都添加到 WIN7 和 linux 中的 cronjob 的任务调度程序中

希望能帮助到你

# javascript - 用文本替换图像

> ID：15863644
> 
> 赞同：1
> 
> 时间：2013-04-07T14:45:10.250
> 
> 标签：javascript, greasemonkey

我正在尝试编写一个 Greasemonkey 脚本，该脚本将获取一个包含一系列未标识链接图像的网页，并将它们替换为粗体文本。

不幸的是，我所走的道路导致了一些死胡同。

首先，由于某种原因，我的代码将图像替换为 [CLICK] 文本，然后立即再次运行 parent/replace 并删除 [CLICK]。

其次，我现在偷偷怀疑没有好方法来加粗该 createTextNode。

那么#1 可以解释为什么那个循环对我不起作用，而#2 可以告诉我正确的方法，这样我就可以将添加的文本加粗。

```
var smiliesList = document.evaluate(
"//img[contains(@src,'smilies')]", document.body, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null); 

var prefixReplace = document.createTextNode('[CLICK]');
var prefixImgSrc = ('smilies/goofyimage.png')

for (var i=0;i<smiliesList.snapshotLength;i++) {

    var node = smiliesList.snapshotItem(i);

        if (node.src == prefixImgSrc) {

            node.parentNode.replaceChild(prefixReplace, node); 

    }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:07:56.930

我相信您需要在循环中为每个图像创建一个新的替换文本节点。您目前只在循环之前创建一个节点。

此外，要创建粗体文本，只需创建一个`<b>`元素，然后使用`innerHTML`将文本放入其中。

```
var smiliesList = document.evaluate(
"//img[contains(@src,'smilies')]", document.body, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null); 

var len = smiliesList.snapshotLength;

for (var i=0; i<len; i++) {
  var node = smiliesList.snapshotItem(i),
      p;

    if (node.src.indexOf('smilies/goofyimage.png') > -1) {
      var textNode = document.createElement('b');
      textNode.innerHTML = '[CLICK]';    

      if (node.parentNode) {
        p = node.parentNode;
        p.removeChild(node);
        p.appendChild(textNode);              
      }      
  }
} 
```

另外，我不禁认为可能有更好的方法来做到这一点。我建议使用这个版本 - 更少的代码行和更多的浏览器兼容性：

```
var imgs = document.getElementsByTagName('img');        
for (var i = imgs.length - 1; i >= 0; i--) {
    if (imgs[i].src.indexOf('smilies/goofyimage.png') > -1) {
      var textNode = document.createElement('b');
      textNode.innerHTML = '[CLICK]';    
      imgs[i].parentNode.replaceChild(textNode, imgs[i]);     
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T22:33:09.240

以下是**整个脚本**使用[jQuery](http://jquery.com/)的简单程度：

```
// ==UserScript==
// @name     _YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

// smilies/goofyimage.png is case-sensitive
var goofyImages = $("img[src*='smilies/goofyimage.png']");

goofyImages.replaceWith ("<b>[CLICK]</b>"); 
```

这使用：

*   [jQuery 的属性包含选择器](http://www.jqapi.com/#p=attribute-contains-selector)
*   [jQuery的`replaceWith()`](http://www.jqapi.com/#p=replaceWith)

# java - java.lang.NoSuchMethodError: org.slf4j.helpers.Util.report(Ljava/lang/String;)V 初始化 OpenSaml 时

> ID：15863654
> 
> 赞同：1
> 
> 时间：2013-04-07T14:46:07.077
> 
> 标签：java, slf4j, nosuchmethoderror, opensaml

我在我的 Maven 项目中使用 OpenSaml。当我尝试使用 DefaultBootstrap 类的变体初始化 OpenSaml 时，我得到以下堆栈跟踪：

```
 java.lang.NoSuchMethodError: org.slf4j.helpers.Util.report(Ljava/lang/String;)V
    org.apache.log4j.Log4jLoggerFactory.<clinit>(Log4jLoggerFactory.java:47)
    org.apache.log4j.LogManager.getLogger(LogManager.java:42)
    org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
    org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:103)
    org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:56)
    org.opensaml.xml.XMLConfigurator.<init>(XMLConfigurator.java:73) 
```

我试图做 mvn dependency:tree 来找出从哪里加载不匹配的 SLF4J jar 版本。我还尝试在 mvn.bat 中将 -verbose 选项传递给 Java。这些选项都没有帮助。我已经尝试一一删除我的 pom.xml 中的依赖项。再次，没有运气。如果有人能说明如何找到罪魁祸首 jar 或如何解决此错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T13:00:16.763

我敢打赌，你的类路径中有 slf4j-api.jar 版本 1.5.0 或更早版本，而 log4j-over-slf4j.jar 版本有更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T17:46:18.720

我遇到了类似的问题。经过大量探索和调试后，我发现 log4j lib 不兼容。我的自定义构建 jar 具有需要 log4j-1.2.12 或更高版本的 hbase 异步客户端。

# python - 回文函数算法

> ID：15863657
> 
> 赞同：0
> 
> 时间：2013-04-07T14:46:27.083
> 
> 标签：python, string, loops

有点像 python 的新手，开始学习 python 如何处理字符串和迭代字符串。曾经研究过一段所谓的“回文”代码，你会看看它到底是哪一部分出错了吗？

```
def palindrome(s):
    if len(s) < 1:
        return True
    else:
        i = 0
        j = len(s) - 1
        r = s[::-1]
        print "s is %s" % s,
        print "r is %s" % r
        while s[j] == r[i] and j != 0:
            print "s[j] is %s" % s[j],
            print "; r[i] is %s" % r[i]
            i += 1
            j -= 1
        return True
    return False 
```

我已经使用了所有这些打印语句来确定代码的去向。该程序应该比较一个字符串及其反转定义它是否是回文。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:51:15.227

下面你有一个不太复杂的解决方案：

```
def is_palindrome(s):
    return s == s[::-1] 
```

在您的版本中，您总是返回`True`所有字符串`len(s) >= 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:52:24.857

我可能遗漏了一些明显的东西，但这还不够吗？

```
def ispalindrome(s):
   return s == s[::-1] 
```

# graph - A* 算法和游戏

> ID：15863658
> 
> 赞同：2
> 
> 时间：2013-04-07T14:46:29.717
> 
> 标签：graph, artificial-intelligence, a-star, 2d-games

我正在尝试在 lisp 中实现扫雷求解器。我知道这不是罕见的问题，但我没有找到任何可以帮助我的文章。一开始我有一个雷区作为输入，在未覆盖的字段上带有数字。当找到所有地雷时，算法应该完成。因此，在每一步中，我都必须检查哪些字段可以放入我的已开采领域列表中，并从我的未开采领域列表中选择一个领域并打开它。稍后我会检查我的地雷列表是否已完成，如果是，算法是否已完成。我将不胜感激任何帮助。我不要求源代码，但我需要好的想法。我没有遇到过这种问题。

* * *

我必须使用 A* 算法。而且我不需要打开所有未打开的字段...我需要找到所有雷区的位置。当然，它必须是做到这一点的最短路径。当我找到所有雷区的位置时，算法就完成了。所以，再一次，我需要找到所有具有最佳开放字段数量的矿区。当然，我的算法需要一个启发式算法，这将有助于选择所有安全的未打开字段之一。并且需要在每次打开后确定安全未打开字段的列表。所以我需要调用 main 函数，该函数将检查我是否找到了所有挖掘的字段，如果没有，则需要将所有安全的相邻未打开字段添加到路径列表中。并且将选择具有最佳启发式的路径

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:34:43.397

我在大学的第一年确实实现了扫雷求解器，所以我可以给你一些提示。（这不是使用 A* 算法）

1.  重要 - 并非所有职位都是可解决的。

2.  对于高级难度，回溯整个雷场有点复杂（复杂=需要一些时间，考虑在 30x30 场中放置 100 个地雷的所有可能性）。

3.  您可以在本地解决所有问题，就像人类解决扫雷一样。这样做的潜力是向用户提示如何继续，而不是解决所有问题。

例子：

1.  有一个单独的雷区来解决问题
2.  找到所有具有已解决（数字/已知我的）单元的未解决单元足够接近（2 单元距离）
3.  对于每个这样的单元格，取一个 5x5 的邻域，单元格在中心，找到所有可能性（回溯）并检查这些可能性是否有共同点（地雷/非地雷），如果是，您可以检查地雷并发现非地雷。
4.  重复，而你可以发现一些东西。
5.  当您无法发现任何东西并且剩余的地雷数量足够少时，您可以尝试回溯整个领域。

我希望我没记错，我做了一些证明为什么 5x5 区域足以检查但它几乎是 10 年前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:23:32.847

您不需要 A* 算法；它的目的是找到图中的最短路径（例如地图中两个地方之间的最短路径，或者解决谜题的最小移动量）。您可能想要使用一种称为*回溯*的技术。

只要有未开垦的田地，就在空地旁边挑出一块未开垦的田地，试探性地将其标记为地雷。然后，查看与前一个字段以及已打开字段相邻的未打开字段，并将该字段也标记为地雷，如果这与相邻数字不矛盾 - 如果确实如此，则将其标记为安全. 继续。最终，您将查看当前区域周围所有未打开的字段，并找到一种将字段标记为安全或不安全的可能方法。然而，这是基于几个猜测，所以现在你需要回到你猜测的最后一个字段，然后进行相反的猜测，然后再次向前移动以获得另一个可能的标志组合。然后，再往前走，修改你的猜测，等等。这可以通过递归非常巧妙地实现。最终，您将拥有一组可能的标志组合。如果您可以在所有可能的标志组合中找到一个安全的字段，请打开该字段。否则，请在尽可能多的标志组合中选择一个安全的字段。

# java - 如何在 Java 中使用数组初始化向量？

> ID：15863659
> 
> 赞同：2
> 
> 时间：2013-04-07T14:46:37.753
> 
> 标签：java, arrays, vector

我必须一个一个地推动我的元素吗？我尝试了类似的东西

```
String[] array;
array=...
Vector<String> vector = new Vector<String>(array); 
```

但我的日食将此标记为错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-07T14:50:22.320

`Vector`没有直接接受数组的构造函数。

假设那`array`是 type `String[]`，你可以做

```
Vector<String> vector = new Vector<String>(Arrays.asList(array)); 
```

更好地使用`ArrayList`，因为它没有同步方法的开销。你可以使用

```
List<String> list = new ArrayList<>(Arrays.asList(array)); 
```

这也将产生一个可变集合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T14:51:14.827

这是行不通的，因为正如[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html)所示，没有 Vector 构造函数将数组作为参数。

如果您只想要一个不可修改的列表，请使用

```
List<String> list = Arrays.asList(array); 
```

如果你真的想要一个 Vector（但你应该改用 ArrayList，因为 Vector 已经过时了），使用

```
Vector<String> vector = new Vector<String>(Arrays.asList(array)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:49:42.880

我不是 100% 确定你所说的“一个接一个”是什么意思。如果要将现有集合添加到 Vector，可以使用[this](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#Vector%28java.util.Collection%29)。

如果要一个一个地做，需要遍历item，调用Vector的' [add](http://docs.oracle.com/javase/6/docs/api/java/util/Vector.html#add%28E%29) '方法。

```
for(String item: array) {
    vector.add(item);
} 
```

# svn - 在存储库 url 中使用 websvn 地址

> ID：15863662
> 
> 赞同：0
> 
> 时间：2013-04-07T14:46:48.340
> 
> 标签：svn, tortoisesvn, websvn

我在服务器的 debian 中安装了 subversion 和 svn

当我在浏览器中看到我的 websvn 地址时，我`"http://10.19.20.203/websvn"`可以看到 web svn 页面

但是当我的 Windows 客户端`"http://10.19.20.203/websvn"`在 tortoiseSVN 存储库 url 中设置此地址 () 时。会出现这个错误

```
Redirect cycle detected for URL 'http://10.19.20.203/websvn' 
```

有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T23:47:51.243

1.  你必须在 TortoiseSVN中使用**真实仓库的 URL**
2.  WebSVN 文件夹的根目录无论如何都不能被 RepoBrowser 浏览（它不是存储库）
3.  所有存储库 URL 都可以在 WebSVN 的配置文件中找到（并且通常，WebSVN 中的存储库 URL 与真实 URL 不相关 - 在单个安装中本地和远程存储库都可以使用）

# sql - SQL Server 触发器 - 选择随机 ID

> ID：15863669
> 
> 赞同：0
> 
> 时间：2013-04-07T14:47:17.067
> 
> 标签：sql, sql-server, random, triggers

我将编写一个将一行插入到表中的触发器。insert 语句包含一`ID`列。我希望我的触发器随机选择三个 ID 中的一个来插入，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:04:21.623

您可以使用该`RAND`函数生成一个随机数，例如`i <= x < j`.

```
 FLOOR(i + RAND() * (j – i)) 
```

[在这里](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)您可以找到有关该`RAND`功能的文档。

# c# - 边框不显示在按钮上

> ID：15863676
> 
> 赞同：0
> 
> 时间：2013-04-07T14:48:07.260
> 
> 标签：c#, wpf, animation, button, mouseevent

我是新手，`WPF`也许很简单。我想不通为什么`BorderBrush`不显示在 remove 上`Button`。`Button`默认情况下不可见，但在鼠标悬停时显示`Button`。当鼠标悬停在应有`Button`的基础`TextBlock`显示上时，但没有`Border`.

有没有人对我如何查看按钮的`Border`.

以下是我的`XAML`：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="150" Width="325">
<Window.Resources>
    <Storyboard x:Key="MakeToolbarVisible">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)">
            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0.5"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="MakeToobarHidden">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Style x:Key="Toolbar">
        <Style.Triggers>
            <Trigger Property="UIElement.IsMouseOver" Value="True">
                <Trigger.ExitActions>
                    <BeginStoryboard Storyboard="{StaticResource MakeToobarHidden}"/>
                </Trigger.ExitActions>
                <Trigger.EnterActions>
                    <BeginStoryboard Storyboard="{StaticResource MakeToolbarVisible}"/>
                </Trigger.EnterActions>
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Grid>
    <Border>
        <Grid Margin="0">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="30"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="30" />
            </Grid.ColumnDefinitions>

            <TextBlock Text="enter some text here!" Margin="8,19.058,8,0" VerticalAlignment="Top" Foreground="#B43C1C26" HorizontalAlignment="Right"/>
            <TextBox TextWrapping="WrapWithOverflow" Margin="8,19.058,0,2.463" FontSize="11" AcceptsReturn="True" AcceptsTab="True" Visibility="Visible" BorderThickness="0" Background="{x:Null}"/>
            <WrapPanel Grid.Row="1" Margin="8,8,8,8">
                <TextBlock Text="29.8.1995" Foreground="#B43C1C26" FontSize="10" />
            </WrapPanel>

            <StackPanel Grid.Column="1" Margin="5,5,5,8" Grid.RowSpan="2" Opacity="0" Style="{StaticResource Toolbar}">
                <Button x:Name="Remove" BorderBrush="DarkRed" BorderThickness="1" Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate>
                            <TextBlock Text="r" FontFamily="Marlett" FontSize="12"/>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:48:21.043

您可以通过设置 Buttons ControlTemplate 将 Buttons 默认模板替换为没有边框的模板。

要显示边框，请将其添加到您的 ControlTemplate 中，如下所示：

```
 <StackPanel Grid.Column="1" Margin="5,5,5,8" Grid.RowSpan="2" Opacity="0" Style="{StaticResource Toolbar}">
            <Button x:Name="Remove" BorderBrush="DarkRed" BorderThickness="1" Cursor="Hand">
                <Button.Template>
                    <ControlTemplate>
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                             <TextBlock Text="r" FontFamily="Marlett" FontSize="12"/>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </StackPanel> 
```

通过 TemplateBinding，您可以绑定到模板化控件的属性，在本例中为按钮的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:02:02.087

你已经覆盖了`ControlTemplate`你的，`Button`所以你会失去按钮的默认模板。

根据您的代码，我可以看到您想在按钮中设置`FontFamily`and`FontSize`文本，您可以在不覆盖这样的模板的情况下实现 -

```
 <StackPanel Grid.Column="1" Margin="5,5,5,8" Grid.RowSpan="2" Opacity="0"
                   Style="{StaticResource Toolbar}">
            <Button x:Name="Remove" BorderBrush="DarkRed"
                    BorderThickness="1" Cursor="Hand" Content="r"
                    FontFamily="Marlett" FontSize="12"/>
        </StackPanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:32:52.053

如果您希望按钮看起来像普通按钮，则不应重新设置它，只需设置您要更改的属性，如下所示：

```
 <StackPanel Grid.Column="1" Margin="5,5,5,8" Grid.RowSpan="2" Opacity="0" Style="{StaticResource Toolbar}">
     <Button x:Name="Remove" BorderBrush="DarkRed" BorderThickness="1" Cursor="Hand"
                            FontSize="12" FontFamily="Marlett" Content="r"/>

   </StackPanel> 
```

# html - 实施网站图标

> ID：15863677
> 
> 赞同：0
> 
> 时间：2013-04-07T14:48:14.010
> 
> 标签：html, favicon

我想实现一个网站图标并在我的 index.html 中使用这一行：

```
<link rel="shortcut icon" href="img/favicon.ico"> 
```

我做错了什么还是错过了什么？它并没有在所有浏览器中显示一个图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:51:12.523

从我的过期，

1.  可能您需要将其放入站点的根文件夹中
2.  需要刷新页面 msy (cnrl+f5)

另外，我认为它应该是“有效”图标（未重命名为 jpg...）。

# udp - 对于多线程服务器，TCP 是否优于 UDP？

> ID：15863680
> 
> 赞同：0
> 
> 时间：2013-04-07T14:48:32.700
> 
> 标签：udp, client-server

如果我要实现一个服务器来处理同时连接的多个客户端，使用 TCP 会更好吗？

不考虑效率（我知道 UDP 更快，但不可靠）。

在 UDP 中，您不能为每个客户端连接使用套接字吗？因为在 UDP 中，套接字仅由目标端口号标识（对吗？）。

在 Java 中，我知道在 TCP 中创建一个多线程服务器来同时处理多个客户端很容易。但是它可以在UDP中完成吗？我想这会非常复杂。

我只是想在这里了解 UDP（我不想实际实现任何东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:58:06.897

这取决于您正在开发哪种服务器。如果您需要您的客户端保持连接并准备好从服务器接收数据（例如推送服务），您应该使用 TCP 实现它。如果你想实现一个简单的请求-响应服务，那么 UDP 是更好的选择。

# jquery - jQuery在iframe中加载动态页面

> ID：15863682
> 
> 赞同：2
> 
> 时间：2013-04-07T14:48:38.360
> 
> 标签：jquery, iframe

我想通过导航菜单将动态页面加载到 iframe 中，如果我选择 menu option `FAQ`，iframe 将定位`faq.php`页面到`src`属性，依此类推。

我怎样才能将菜单的页面动态分配到下面？

查询：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#mainFrame").attr("src", "faq.php");
});
</script>

<div class="content">
    <div class="left">
        <ul id="menu">
            <li><a href="#">Banking</a></li>
            <li><a href="#">How To Join</a></li>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">Contact Us</a></li>
            <li><a href="#">Help</a>
                <ul>
                    <li><a href="#">Subscribe</a></li>
                    <li><a href="#">Recipe</a></li>
                </ul>
            </li>
            <li><a href="#">Terms &amp; Conditions</a></li>
        </ul>
    </div>
    <div class="right">
        <div>Title</div>
        <div><iframe src="" frameborder="0" id="mainFrame" name="mainFrame"></iframe></div>
    </div>
</div> 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T15:03:39.573

我建议您为所有链接使用一个类，并使用 data 属性传递要在 iframe 中加载的文件的名称：

```
<li><a class="anchor" data-url="faq.php" href="#">FAQ</a></li>
<li><a class="anchor" data-url="about.php" href="#">Contact Us</a></li>
<li><a class="anchor" data-url="help.php" href="#">Help</a>
    <ul>
        <li><a class="anchor" data-url="subscribe.php" href="#">Subscribe</a></li>
        <li><a class="anchor" data-url="recipe.php" href="#">Recipe</a></li>
    </ul>
</li>
<li><a class="anchor" data-url="term.php" href="#">Terms &amp; Conditions</a></li> 
```

然后，您可以使用 jQuery 动态加载 iframe 的内容：

```
$(".anchor").each(function(){
    var el = $(this);
    el.click(function() {
        $("#mainFrame").attr("src", el.data('url'));
    })
}) 
```

`**[Working Demo](http://jsfiddle.net/uSQhU/)**`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T14:58:36.310

就像这样：

```
<body>
    <div class="content">
        <div class="left">
            <ul id="menu">
                <li><a href="#">Banking</a></li>
                <li><a href="#">How To Join</a></li>
                <li><a href="#" id="faq">FAQ</a></li>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Help</a>
                    <ul>
                        <li><a href="#">Subscribe</a></li>
                        <li><a href="#">Recipe</a></li>
                    </ul>
                </li>
                <li><a href="#">Terms &amp; Conditions</a></li>
            </ul>
        </div>
        <div class="right">
            <div>Title</div>
            <div><iframe src="" frameborder="0" id="mainFrame" name="mainFrame"></iframe></div>
        </div>
    </div>
</body>

<script type="text/javascript">
$("#faq").click(function () { 
      $("#mainFrame").attr("src", "faq.php");
});
</script> 
```

# wpf - 什么是 CustomControl 可以，但 UserControl 不能在代码实现级别？

> ID：15863689
> 
> 赞同：1
> 
> 时间：2013-04-07T14:49:27.317
> 
> 标签：wpf, user-controls, custom-controls

我已经阅读了一些讨论 WPF 的目的`CustomControl`和`UserControl`在 WPF 中的博客和文档，但我仍然对以下实现感到困惑：

*   我觉得这应该叫`UserControl`style，这里我继承自一个已有的控件类，不是`UserControl`or`Control`

```
 <ToggleButton x:Class="WpfApplication1.MyButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
        <ToggleButton.Template>
            <ControlTemplate>
                    ... some template code
            </ControlTemplate>
        </ToggleButton.Template>
    </ToggleButton> 
```

```
 public partial class MyButton : ToggleButton
    {
        public MyButton()
        {
            InitializeComponent();
        }
    } 
```

*   我认为这应该称为`CustomControl`Style

```
 <Style TargetType="{x:Type local:MyButton }">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:CustomControl1}">
                    ... control template code
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

```
 public class MyButton : ToggleButton
    {
        static CustomControl1()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(MyButton ), new FrameworkPropertyMetadata(typeof(MyButton )));
        }
    } 
```

在这里，我以两种方式实现了`MyBtton`该类，并测试了代码，它们应该彼此一样工作。

1.  在`UserControl`风格上，我可以设置`template`根项目的属性，这里是 ToggleButton。而且我认为这与`CustomControl`风格相同，它`Style`以资源方向为主题。

2.  在`UserControl`风格上，我还可以添加静态构造函数并覆盖元数据，这使得`UserControl`支持像这样的主题`CustomControl`（如果这确实是真的）。

3.  在`UserControl`风格上，我可以看到设计器的最终 UI 和 Visual Studio 也将 CS 和相关 XAML“绑定”在一起，这很方便。

那么，为什么我们还需要`CustomControl`? 任何`UserControl`不能，但只能做的事`CustomControl`？

# relational-database - 邮政地址多值属性

> ID：15863692
> 
> 赞同：0
> 
> 时间：2013-04-07T14:49:39.663
> 
> 标签：relational-database

stackoverflow 的新手。

我敢肯定，这里的问题相当低级，但我正在设计一个关系数据模型，并且在我的几个表中，我正在处理的案例研究表明“邮政地址”应该存储为一个属性。这不仅非常模糊，而且肯定是多值的，案例研究表明必须解决这些问题。我如何将其拆分为更具体的属性，记住我的 5 个表中，3 个至少有一个地址属性（例如通信地址、学期地址）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T14:53:25.823

请参阅[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)，特别是您需要将其带入[第四范式](http://en.wikipedia.org/wiki/4NF)以摆脱多值依赖关系。

# c# - 通过切换 ShowInTaskbar 属性来闪烁 WPF 窗口

> ID：15863697
> 
> 赞同：0
> 
> 时间：2013-04-07T14:50:19.120
> 
> 标签：c#, wpf

我有一些模态窗口对象，由`ShowDialog`. 每次我打开一个对话框时，我都想通过将`ShowInTaskbar`属性切换为 false 来从任务栏中隐藏它的所有者。到目前为止没有问题。问题是我更改`ShowInTaskbar`属性的窗口在短时间内显示为白色（不是渲染？）。我可以防止这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:37:44.627

`ShowInTaskbar`据我所知是由 Windows 底层实现引起的（类似的问题可以追溯到 WPF 之外）。我已经看到了它的一系列问题。

我认为没有办法解决它。`Normally that's done on startup - what you do is a bit untypical in a way.`

> 它似乎是通过创建另一个拥有当前窗口的透明窗口来实现的。
> 那是来自 MS 的家伙 -[来自 Rob Caplan 的评论](http://social.msdn.microsoft.com/Forums/en-US/windowscompatibility/thread/b2bd50e0-8b38-46f7-b2dc-22b8db261831/)

...**哪种解释了**您正在经历的“闪烁”（不仅仅是您，这很容易重复）。

还有更多问题...
[WPF BUG，当显示自动关闭时，当 showintaskbar 设置为 false 时，窗口不显示](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/d39b0d2d-a3d3-45c0-bd6c-2ef4e587931f/)

# fragment - Android PagerAdapter，添加手动充气片段的问题

> ID：15863703
> 
> 赞同：1
> 
> 时间：2013-04-07T14:51:04.477
> 
> 标签：fragment, layout-inflater, fragmentpageradapter

我正在使用 FragmentPagerAdapter 来显示 MyFrag 类型的几个选项卡（与 Fragments 相关联）。在 MyFrag.onCreateView() 中，我以编程方式对几个内部 Fragment 进行膨胀：MyInternalF1 和 MyInternalF2。

我得到的是一个尴尬的显示结果。外部的 MyFrag 实例很好 - 并且与它们的选项卡相关联。但是内部 Fragment 嵌入了错误的 Fragment... 第一个 MyFrag 确实包含自己的内部 Frags，但是第二个、第三个等 MyFrags 要么没有任何内部 Frags，要么托管一些其他 Frament 的内部 Frags。（内部片段工作正常，它们只是位于随机片段上）。

我正在使用来自 v13 示例的选项卡/寻呼机示例小部件：samples/Support13Demos/src/com/example/android/supportv13/app/FragmentPagerSupport.java

伪代码：

```
Class MyFrag extends Fragment
{
    public View onCreateView(LayoutInflater inflater,
        ViewGroup container,Bundle savedInstanceState)
{
    super.onCreateView(inflater, container, savedInstanceState);
    ....
    FragmentTransaction trans = getFragmentManager().beginTransaction();
    trans.add(R.id.myfragContainer, new MyInternalF1, "InternalF1");
    trans.add(R.id.myfragContainer, new MyInternalF2, "InternalF2");
    trans.commit();
    ....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:32:13.317

问题出在 FragmentTransaction.add() 函数中。它将包含视图的 ID - containerViewId 作为第一个参数。不能直接传递视图，必须使用 ID。显然，对于膨胀视图，容器视图的 id 对于所有膨胀接口都是相同的。由于它们都驻留在同一个活动中 - 事务选择它找到的第一个视图实例。你无法控制它。所以当 MyFragment 调用 onCreate() 时，内部的 Fragment 可能会被添加到不属于其父视图的视图中。

这是 FragmentTransaction API 中的一个问题：如果它允许您指定一个显式 View 而不仅仅是一个 ID 作为父视图，那就太好了。见：[http ://code.google.com/p/android/issues/detail?id=54051](http://code.google.com/p/android/issues/detail?id=54051)

无论如何，我现在有一个解决方法。您只需在 onCreate 函数中手动修改容器的 ID。然后将修改后的 ID 传递给 add() 函数。另请参阅：[Programmatic Views 如何设置唯一 ID？](https://stackoverflow.com/questions/6790623/programmatic-views-how-to-set-unique-ids) （用于 generateViewId() 函数）。

```
Class MyFrag extends Fragment
{
    public View onCreateView(LayoutInflater inflater,
        ViewGroup container,Bundle savedInstanceState)
    {
        super.onCreateView(inflater, container, savedInstanceState);
        ....
        int containerID = generateViewId();
        infView.findViewById(R.id.frag_container).setId(containerID);

        FragmentTransaction trans = getFragmentManager().beginTransaction();
        trans.add(containerID, new MyInternalF1, "InternalF1");
        trans.add(containerID, new MyInternalF2, "InternalF2");
        trans.commit();
        ....
        return infView;
    }
} 
```

# java - Clirr 的任何替代品（与旧版本的二进制和源代码兼容性）？

> ID：15863710
> 
> 赞同：8
> 
> 时间：2013-04-07T14:51:46.657
> 
> 标签：java, api, jar, backwards-compatibility

我们在我们的项目中使用 clirr( [http://clirr.sourceforge.net](http://clirr.sourceforge.net) )，但它看起来非常过时。我试图寻找任何替代品，但它们的位置相同：

*   JDiff( [http://jdiff.sourceforge.net](http://jdiff.sourceforge.net) )
*   罐子比较（[http://extradata.com/products/jarc/](http://extradata.com/products/jarc/)）

所以，我正在寻求社区帮助：您如何解决检查源代码和二进制兼容性的问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-04T15:49:11.480

您也可以尝试[japicmp](https://github.com/siom79/japicmp)，这是我最近在尝试执行相同任务时发现的一个很好的项目。

它的使用非常简单，它归结为将您的库打包为 JAR 的两个版本传递给它......例如：

```
java -jar japicmp-0.0.2.jar -n my-jar-new.jar -o my-jar-old.jar 
```

它还有一个 API，允许您以编程方式使用它。

该项目的[Github 页面](https://github.com/siom79/japicmp)有一个关于如何开始的简单指南。

* * *

此外，[这个 SO 答案](https://stackoverflow.com/q/5337179/1407656)建议[jarc](http://www.extradata.com/products/jarc/)作为替代

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T07:15:38.707

检查 Java API 兼容性的工具：

*   [japi-compliance-checker](https://github.com/lvc/japi-compliance-checker)
*   [日本工具](http://www.sab39.org/Software/Japitools/42/)
*   [信号测试](https://wiki.openjdk.java.net/display/CodeTools/SigTest)
    *   [SigTest](http://wiki.netbeans.org/SigTest)， sigtest 的 NetBeans 分支
*   [japi-checker](https://github.com/trohovsky/japi-checker)
*   [狒狒](https://github.com/siom79/japicmp)
*   [雷比](https://revapi.org/)

检查 OSGi 包兼容性的工具：

*   [bnd-基线-maven-插件](https://github.com/bndtools/bnd/tree/master/maven/bnd-baseline-maven-plugin)

可视化 JAR 更改的工具：

*   [pkgdiff](http://lvc.github.com/pkgdiff/)

有关 Java API中可能存在的二进制和源代码兼容性问题的详细信息，另请参阅[“Evolving Java-based APIs 2: Achieving API Binary Compatibility”一文。](http://wiki.eclipse.org/Evolving_Java-based_APIs_2)

# cron - php sleep 或 usleep 冻 结整个服务器

> ID：15863715
> 
> 赞同：0
> 
> 时间：2013-04-07T14:52:33.710
> 
> 标签：cron, sleep, freeze

我在数据库中有一个大表，几乎每秒更新一次。我想每 5 秒查询一次该表以获取最新条目（实时流）。

我无法为每个访问者查询数据库（每 5 秒 ajax 发布请求），因为 mysql 会死。这就是我需要缓存文件的原因。我在文件中写入数据，而不是使用 javascript 的访问者每 5 秒打开/读取/关闭文件。

一切正常，但我在使用 cronjob + sleep 时遇到了麻烦。

在 cpanel 中，我无法设置 5 秒的 cronjobs，这就是为什么我在 5 秒的睡眠中运行 12 个周期的 for()。

```
for($i = 0; $i <12; $i++){
   mysql_query() /// writing in file, etc.

   sleep(5);
} 
```

问题是这会将整个服务器冻结 60 秒。不仅cronjob php文件，整个网页都超时了。

我应该怎么办？我做对了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T22:43:37.277

请注意，不能保证您发布的代码将在 60 秒内准确运行。事实上，该代码将在至少 60 秒内运行。我不确定这是否重要，但这意味着通过 cron 运行的该脚本的两个或多个实例之间会有一段时间的重叠。

根据您的查询以及您处理数据库和缓存读取/写入的方式，您可能正在创建数据库锁定或死锁情况，这反过来可能导致脚本运行时间过长。长时间运行意味着它可能会占用数据库/服务器资源。这种情况是我倾向于作为您的网页超时的原因。我需要有关您的查询和数据库/缓存文件的更多详细信息。

# java - 如何以自定义大小调整所有 TextView

> ID：15863716
> 
> 赞同：0
> 
> 时间：2013-04-07T14:52:40.617
> 
> 标签：java, android

我是 Android 开发新手；p[,emt. 我为糟糕的英语道歉。我有一个关于在`LinearLayout`. `LinearLayout`我设置的尺寸为 350x230 dp。有 10 件`TextView`。当我填充`TextView`文本，然后安装它们并设置大小时，每个 TextView 都可以具有您的文本大小。你怎么能把所有的 TextView 都放在我的 LinearLayout 中？如果可以 - 然后帮助代码。这是我的活动 xml：

**XML 布局：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#f0e0a2" >

    <LinearLayout
        android:id="@+id/linearCard"
        android:layout_width="350dp"
        android:layout_height="230dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:orientation="vertical" >

        <com.jaganat.vizicard.CardView
            android:id="@+id/card"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="15dp"
            android:layout_marginLeft="15dp"
            android:layout_marginRight="15dp"
            android:layout_marginTop="15dp"
            android:background="#fff" >
        </com.jaganat.vizicard.CardView>
    </LinearLayout>
</RelativeLayout> 
```

**JAVA类：**

```
public class CardView extends LinearLayout {
    private View view;

    public CardView(Context context, AttributeSet attrs) {
       super(context, attrs);
       init(context);
    }
    public CardView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        init(context);
    }
    private void init(Context context){
        LayoutInflater layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = layoutInflater.inflate(R.layout.card_view,this);
    }
    } 
```

我的卡片视图

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearCard"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tFirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tFirm2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tJob"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tJob2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tFIO"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tFIO2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tOffice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tOffice2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tTel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tMob"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tFax"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tTelH"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tAddress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tAddress2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tEmail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />
    <TextView
        android:id="@+id/tWWW"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

# c# - VS 2012 和 IIS Express。找不到路径“C:\Program Files (x86)\IIS Express\~\MyPics\My.jpg”的一部分

> ID：15863725
> 
> 赞同：0
> 
> 时间：2013-04-07T14:53:23.753
> 
> 标签：c#, visual-studio-2012, iis-express

我正在使用 VS 2012 开发 Asp.Net MVC 4 应用程序。该应用程序在本地运行时使用 IIS Express 作为 Web 服务器。我在尝试访问作为我的解决方案一部分的文件时遇到问题。我有以下操作方法：

```
public FileContentResult GetImage()
        {
            byte[] imageByte = System.IO.File.ReadAllBytes(@"/MyPics/My.jpg");
            string contentType = "image/jpeg";

            return File(imageByte, contentType);
        } 
```

在第一行，我收到以下错误：

```
Could not find a part of the path 'C:\Program Files (x86)\IIS Express\~\MyPics\My.jpg' 
```

我知道上面的路径不正确，但我无法理解我应该提供什么路径来解决这个问题。

问候帕万米什拉

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T15:26:01.790

您可以使用 Server.MapPath() 来获取实际目录，如下所示：

```
byte[] imageByte = System.IO.File.ReadAllBytes(Server.MapPath("~/MyPics/My.jpg")); 
```

有人提倡使用 HostingEnvironment.MapPath() 代替：[Server.MapPath 和 HostingEnvironment.MapPath 有什么区别？](https://stackoverflow.com/questions/944219/what-is-the-difference-between-server-mappath-and-hostingenvironment-mappath)

# oop - 我如何/何时将接口与客户端打包？

> ID：15863727
> 
> 赞同：0
> 
> 时间：2013-04-07T14:53:32.587
> 
> 标签：oop, interface, package

'Uncle Bob' Martin 在'Agile Software Development' pp318-9 中提出了一个很好的论点，即“接口属于客户端，而不是衍生产品……客户端倾向于与它们控制的接口打包在一起”。

在实践中，人们如何用静态类型语言将接口与客户端打包？从单个接口的角度来看——一个好的 OO 接口有几个实现——Martin 的建议是有道理的。但是在包级别，每个服务器通常都有许多客户端，并且让服务器依赖于它的客户端似乎会使依赖关系箭头指向错误的方向。事实上，后来在“封装设计原则”中，Martin 引入了一个格言“依赖于稳定性的方向”，它直观地暗示了客户端 -> 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:49:58.257

“鲍勃叔叔”是正确的，但他的建议并不总是实用的。在构建商业 3rd 方库时，从所有未来客户那里收集所需的接口显然是不切实际的。话虽如此，设计接口以满足所有已知用例的方法仍然有效。从概念上讲，接口属于客户端，而不是库。

在构建内部实用程序时，就像“鲍勃叔叔”建议的那样，直接将接口与客户端打包。

# xml - 如何在 XML DTD 中的另一个元素中使用 Element 子元素作为属性？

> ID：15863728
> 
> 赞同：1
> 
> 时间：2013-04-07T14:53:35.140
> 
> 标签：xml, dtd

我几乎完成了为我的 XML 文件创建 DTD，但我不确定如何完成最后一部分。这是 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE library SYSTEM "library.dtd">
<library>

<authors>
  <author aid="a1">Bill Evjen</author>
  <author aid="a2">Michael Kay</author>
  <author aid="a3">Kevin Goldberg</author>
  <author aid="a4">Michael Morrison</author>
</authors>

<books>

<book bookID="b001" author="a2">
  <title>XSLT 2.0 and XPath 2.0 Programmer's Reference</title>
  <stock>4</stock>
  <publisher>John Wiley</publisher>
  <year>2009</year>
  <use type="advanced" />
  <use type="reference" />
</book>
<book bookID="b002" author="a1 a2">
  <title>Professional XML (Programmer to Programmer) </title>
  <stock>2</stock>
  <publisher>John Wiley</publisher>
  <year>2007</year>
  <use type="professional" />
  <use type="advanced" />
  <use type="reference" />
</book>
<book bookID="b003" author="a3">
  <title>XML: Visual QuickStart Guide</title>
  <stock>3</stock>
  <publisher>Peachpit Press</publisher>
  <year>2008</year>
  <use type="introductory" />
  <use type="reference" />
</book>
<book bookID="b004" author="a4">
  <title>Sams Teach Yourself XML in 24 Hours</title>
  <stock>5</stock>
  <publisher>SAMS</publisher>
  <year>2005</year>
</book>

</books>

</library> 
```

这是我的 DTD，我评论了我无法弄清楚的那一行：

```
<!-- DTD for the scot ski example -->
<!ELEMENT library (authors | books)*>
<!ELEMENT authors (author)*>
<!ELEMENT author (#PCDATA) >
<!ATTLIST author aid CDATA #REQUIRED>

<!ELEMENT books (book)*>
<!ELEMENT book (title, stock, publisher, year, use*)>
<!ATTLIST book bookID ID #REQUIRED>
<!ATTLIST book author (authors) #REQUIRED ><!-- How to do this correctly -->

<!ELEMENT title (#PCDATA) >
<!ELEMENT stock (#PCDATA) >
<!ELEMENT publisher (#PCDATA) >
<!ELEMENT year (#PCDATA) >
<!ELEMENT use (#PCDATA) >
<!ATTLIST use type ( advanced | reference | introductory | professional) #REQUIRED  > 
```

我已经尝试了一段时间并尝试从在线示例中学习，但我被卡住了，我看不出如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:11:30.693

“*在另一个元素中使用一个 Element 子元素作为属性*”听起来有点奇怪。您*可以引用*属性中的其他元素。这是我认为你想要的：

```
<!ELEMENT library (authors | books)*>
<!ELEMENT authors (author)*>
<!ELEMENT author (#PCDATA) >
<!ATTLIST author aid ID #REQUIRED>   <!-- 'aid' is of type ID -->

<!ELEMENT books (book)*>
<!ELEMENT book (title, stock, publisher, year, use*)>
<!ATTLIST book bookID ID #REQUIRED
               author IDREFS #REQUIRED >   <!-- 'author' is of type IDREFS -->

<!ELEMENT title (#PCDATA) >
<!ELEMENT stock (#PCDATA) >
<!ELEMENT publisher (#PCDATA) >
<!ELEMENT year (#PCDATA) >
<!ELEMENT use (#PCDATA) >
<!ATTLIST use type ( advanced | reference | introductory | professional) #REQUIRED > 
```

[IDREFS](http://www.w3.org/TR/xml/#idref)类型的属性用于引用文档中其他元素的 ID 值。

# windows-phone-7 - 无法从我的 wp7 设备通过 LiveSDK 将 14mb 文件上传到 SkyDrive

> ID：15863733
> 
> 赞同：0
> 
> 时间：2013-04-07T14:54:01.477
> 
> 标签：windows-phone-7, onedrive, live-sdk

上传 5mb 文件不是问题，但是当我尝试上传 14mb 时，我的应用程序已关闭。

```
fileStream = // get some file as stream from isolated storage

uploadClient = new LiveConnectClient(session);
uploadClient.UploadCompleted += new EventHandler<LiveOperationCompletedEventArgs>(uploadClient_UploadCompleted);

uploadClient.UploadAsync("me/skydrive", "filename", fileStream, OverwriteOption.Overwrite, null); 
```

例外（见屏幕截图）：

```
A first chance exception of type 'System.NotSupportedException' occurred in System.Windows.dll
Addtional information: NotSupportedException" 
```

![在此处输入图像描述](https://i.stack.imgur.com/BQCjE.png)

当我使用 BackgroundUploadAsync 而不是 UploadAsync 时，文件已传输但大小为 0。

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:46:19.463

我找到了解决方案。

!!!IT's IMPORTANT 方法 UploadAsync 应该只从主应用程序线程调用

# cuda - CUDA 求和归约之谜

> ID：15863737
> 
> 赞同：0
> 
> 时间：2013-04-07T14:54:16.240
> 
> 标签：cuda, gpu, gpgpu, nvidia

CUDA 的减少完全让我感到困惑！首先，Mark Harris 的[本教程和 Mike Giles 的](http://developer.download.nvidia.com/assets/cuda/files/reduction.pdf)[本](http://people.maths.ox.ac.uk/gilesm/cuda/lecs/lec4.pdf)教程都使用了声明`extern __shared__ temp[]`。声明时在 C 中使用关键字`extern`，但分配发生在“elsehre”（例如，通常在另一个 C 文件上下文中）。这里的相关性是`extern`什么？我们为什么不使用：

```
__shared__ float temp[N/2]; 
```

例如？或者我们为什么不声明`temp`为全局变量，例如

```
#define N 1024
__shared__ float temp[N/2];

__global__ void sum(float *sum,  float *data){ ... }

int main(){
 ...
 sum<<<M,L>>>(sum, data);
} 
```

我还有一个问题？每个块应该使用多少块和线程来调用求和内核？我试过[这个例子](http://pastebin.com/90wMUhNg)（基于[this](http://people.maths.ox.ac.uk/gilesm/cuda/lecs/lec4.pdf)）。

[注意：您可以在此处](http://pastebin.com/8yTzXUuK)找到有关我的设备的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:33:28.397

第一个问题的答案是 CUDA 在运行时支持动态共享内存分配（有关更多详细信息，请参阅[此](https://stackoverflow.com/q/9187899/681865)SO 问题和[文档](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#shared)）。共享内存的声明使用`extern`向编译器表示共享内存大小将在内核启动时确定，以字节作为`<<< >>>`语法的参数传递（或等效地通过 API 函数），例如：

```
sum<<< gridsize, blocksize, sharedmem_size >>>(....); 
```

第二个问题通常是启动将完全填满 GPU 上所有流式多处理器的块数。大多数明智地编写的缩减内核将在每个线程中累积许多值，然后执行共享内存缩减。减少要求每个块的线程数是 2 的幂：这通常给您 32、64、128、256、512（如果您有 Fermi 或 Kepler GPU，则为 1024）。这是一个非常有限的搜索空间，只需进行基准测试，看看什么在您的硬件上最有效。[您可以在此处](https://stackoverflow.com/q/9985912/681865)和[此处](https://stackoverflow.com/q/5643178/681865)找到有关块和网格大小的更一般性的讨论。

# java - 寻找元素

> ID：15863738
> 
> 赞同：0
> 
> 时间：2013-04-07T14:54:30.443
> 
> 标签：java, string, comparison

我有这个方法：

```
public User findById(String name) 
{
    for (User u : list) 
    {
        if (u.getFirstName() == name) 
        {
            return u;
        }
    }
    return null; // or empty User
} 
```

我如何在我的窗口类中编写一个方法，以便我可以打印出我找到的用户？

这就是我得到的。（认为​​我很遥远）

```
public void findCustomer()
{
    String firstname = findCustomerField.getText();

    if(!firstname.equals(""))
    {
        String result = list.findById(firstname);
        outputText.setText(result);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:56:48.017

不要`==`在比较中使用

```
if (u.getFirstName() == name) 
```

但`equal`

```
if (u.getFirstName().equal(name)) 
```

运算符`==`测试以查看两个对象引用变量是否引用了完全相同的对象实例。

该方法`.equals()`测试以查看相互比较的两个对象是否相等

您还需要像这样更改您的 findCustomer 方法

```
public void findCustomer()
{
    String firstname = findCustomerField.getText();

    if(!"".equal(firstname))
    {
        User user = list.findById(firstname);
        if(user != null)
        {
            outputText.setText(user.getFirstName());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:57:33.063

用于`String.equals()`值**相等**检查。

将其更改为：

```
if (u.getFirstName().equals(name)) { 
```

`==`基本上做对象引用相等性检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:05:21.217

```
String result = list.findById(firstname); 
```

您的 findById 返回一个用户，因此将其更改为：

```
User result = list.findById(firstname); 
```

因此，将您的下一行更改为：

```
outputText.setText(result.getFirstName()); 
```

# c++ - 我可以将复制构造函数设为私有并仍然使用默认实现吗

> ID：15863739
> 
> 赞同：6
> 
> 时间：2013-04-07T14:54:36.177
> 
> 标签：c++, copy-constructor

我认为这是不可能的，但我不妨问问。我可以声明一个私有 Copy-Constructor 并仍然使用默认实现吗？

背景：我有一个向量非常大的类，我不想调用复制构造函数，除了一个成员函数。使用标准的公共 copy-ctor 可能很容易导致错误，例如忘记迭代中的引用 ( `foreach(Type el,vectOfBigObjects`) 而不是`foreach(Type const& el,vectOfBigObjects)`)。因此，我想保留标准副本构造器，但只是将其设为私有。

在不重写 copy-ctors 定义的情况下这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T14:57:21.840

> 在不重写 copy-ctors 定义的情况下这可能吗？

在 C++11 中，是的。您只需声明构造函数并将其标记为*默认值*：

```
struct X
{
    // ...
private:
    X(X const&) = default;
}; 
```

这将定义一个复制构造函数，该构造函数与隐式生成的定义相同，但将是`private`. 例如：

```
struct X
{
    X() { } // Required because a user-declared constructor in
            // the definition of X inhibits the implicit generation
            // of a default constructor (even if the definition is
            // defaulted!)

    void foo()
    {
        // ...
        X tmp = *this; // OK!
        // ...
    }

private:

    X(X const&) = default; // Default definition, accessible to
                           // member functions of X only!
};

int main()
{
     X x;
     // X x2 = x; // ERROR if uncommented!
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4yc7Hy%243704)。

请注意，类定义中用户声明的构造函数（包括复制构造函数）会**禁止默认构造函数的隐式生成**，即使它的定义是默认的。这就是为什么，例如，我必须`X`在上面的示例中显式声明 的默认构造函数。

# javascript - jQuery - 加载函数中的参数

> ID：15863740
> 
> 赞同：-3
> 
> 时间：2013-04-07T14:54:43.777
> 
> 标签：javascript, jquery, function, parameters

多张图片使用时是否可以通过load函数传递参数？

```
var images = {0 : {target_ : 'url', foo : 'foo', bar : 'bar'}, 1 : {target_ : 'url',foo : 'baz', bar : 'qux'}};

for(var image in images){
   var x_ = image.foo;
   var y_ = image.bar;
   $(image.target_).load(function(){
    console.log(x_ + y_);
   });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T14:58:53.860

或者您可以使用 data 属性在图像上存储附加信息。

而且你可以做类似的事情

```
$(image).load(function(){
    var x__ = $(this).data("x");
    var y__ = $(this).data("y");
}); 
```

虽然 img 标签可能类似于

```
<img src="#" data-x="someValx" data-y="someValy"> 
```

# html - 为什么这个 html 边框只有 3 个边？

> ID：15863747
> 
> 赞同：0
> 
> 时间：2013-04-07T14:55:43.723
> 
> 标签：html, css, border

为什么：

```
<html>
  <head>
  <style>
    #categorizer { border-style: solid; border-width: 10px; 
                   border-color: blue; padding: 50px }
    #children { color: green; background-color: yellow }
    #parents { color: blue; background-color: #ccc }
  </style>
  </head>
  <body>
    <span id="categorizer">
      <span id="children">
        <span class="child">c11111</span>
        <span class="child">c22222</span>
        <span class="child">c33333</span>
        <span class="child">c44444</span>
        <span class="child">c55555</span>
      </span>
      <span id="parents">
        <span class="parent">pAAA</span>
        <span class="parent">pBBB</span>
      </span>
    </span>
  </body>
</html> 
```

只给我三个边界边，即

![在此处输入图像描述](https://i.stack.imgur.com/uibBT.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T14:58:40.520

正如 Cody Guldner 在他的评论中暗示的那样，你`span`的 s 是内联元素，而不是块元素。因此，填充不会改变文本的垂直间距；它只是*在 text 周围*添加填充，然后将边框添加到填充的边缘。正是这种填充将顶部的蓝色边框推到了视线之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:07:45.247

您还可以将 display:block 添加到分类器中

```
#categorizer { border-style: solid; border-width: 10px; 
               border-color: blue; padding:50px; display:block; } 
```

# ruby-on-rails - 如何删除 Rails 中用户创建的所有资源？

> ID：15863749
> 
> 赞同：1
> 
> 时间：2013-04-07T14:56:01.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个具有以下功能的应用程序：

*   使用`Devise`gem 的用户和身份验证。
*   `act_as_follower`使用插件的追随者/追随者系统。
*   用户可以创建的帖子。
*   每个帖子都可以被喜欢（我有一个供用户和帖子创建的连接表`likes`）。
*   每个帖子都可以有一个图像，使用`Paperclip`gem（我将来可能还会使用 Amazon S3）
*   每个用户都可以拥有一个头像。
*   用户之间的消息系统。
*   各种操作的通知。
*   用户可以对帖子发表评论。

我希望用户可以选择删除他的帐户。设计已经有这个动作，但这还不够，因为它只会删除`user`我认为的条目。

我要做的是，删除用户创建的所有帖子，删除帖子的图像。删除每个赞、评论、消息（发送/接收）、通知和关注者/关注者关系，最后删除用户帐户，包括头像图像。简而言之，该操作应删除具有`user_id`与要删除的用户相关的字段的每个资源。

我还担心在单个请求中执行此操作会花费很多时间并且可能会发生错误，例如一半的帖子被删除或类似的事情。

解决所有这些情况的最佳方法是什么？

编辑：

我用过这个，效果很好。

```
class User < ActiveRecord::Base
  has_many :posts, :dependent => :destroy
end 
```

`acts_as_follower`自动删除每个关注者/关注关系，并`Paperclip`删除与资源相关的每个图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:00:01.810

在严格依赖于让该用户添加的所有关系中

```
:dependent => :destroy 
```

例子

```
class User < ActiveRecord::Base
  has_many :posts, :dependent => :destroy
end 
```

当使用被破坏时，他的职位也被破坏。您也可以使用销毁回调，但这更复杂。

# python - 从 smg 文件 Beautiful Soup 和 Python 中提取身体标签

> ID：15863751
> 
> 赞同：3
> 
> 时间：2013-04-07T14:56:02.593
> 
> 标签：python, beautifulsoup

我有一个 sgm 文件，格式如下：

```
<REUTERS TOPICS="NO" LEWISSPLIT="TRAIN" CGISPLIT="TRAINING-SET" OLDID="16321" NEWID="1001">
<DATE> 3-MAR-1987 09:18:21.26</DATE>
<TOPICS></TOPICS>
<PLACES><D>usa</D><D>ussr</D></PLACES>
<PEOPLE></PEOPLE>
<ORGS></ORGS>
<EXCHANGES></EXCHANGES>
<COMPANIES></COMPANIES>
<UNKNOWN> 
&#5;&#5;&#5;G T
&#22;&#22;&#1;f0288&#31;reute
d f BC-SANDOZ-PLANS-WEEDKILL   03-03 0095</UNKNOWN>
<TEXT>&#2;
<TITLE>SANDOZ PLANS WEEDKILLER JOINT VENTURE IN USSR</TITLE>
<DATELINE>    BASLE, March 3 - </DATELINE><BODY>Sandoz AG said it planned a joint venture
to produce herbicides in the Soviet Union.
    The company said it had signed a letter of intent with the
Soviet Ministry of Fertiliser Production to form the first
foreign joint venture the ministry had undertaken since the
Soviet Union allowed Western firms to enter into joint ventures
two months ago.
    The ministry and Sandoz will each have a 50 pct stake, but
a company spokeswoman was unable to give details of the size of
investment or planned output.
 Reuter
&#3;</BODY></TEXT>
</REUTERS> 
```

同一个文件中有 1000 条根节点为 RETURNS 的记录。我想从每条记录中提取正文标签并在上面做一些事情，但是我做不到。以下是我的代码

```
from bs4 import BeautifulSoup,SoupStrainer
f = open('dataset/reut2-001.sgm', 'r')
data= f.read()
soup = BeautifulSoup(data)
topics= soup.findAll('body') # find all body tags
print len(topics)  # print number of body tags in sgm file
i=0
for link in topics:         #loop through each body tag and print its content 
    children = link.findChildren()
    for child in children:
        if i==0:
            print child
        else:
            print "none"
            i=i+1

print i 
```

问题是 for 循环不打印 body 标签的内容 - 而是打印记录本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:34:09.690

正如我在评论中所说，由于未知（对我而言）原因，您不应该将标签命名为`body`.

因此，第一步：将`body`标签名称替换为，例如`content`：

```
<REUTERS TOPICS="NO" LEWISSPLIT="TRAIN" CGISPLIT="TRAINING-SET" OLDID="16321" NEWID="1001">
<DATE> 3-MAR-1987 09:18:21.26</DATE>
<TOPICS></TOPICS>
<PLACES><D>usa</D><D>ussr</D></PLACES>
<PEOPLE></PEOPLE>
<ORGS></ORGS>
<EXCHANGES></EXCHANGES>
<COMPANIES></COMPANIES>
<UNKNOWN> 
&#5;&#5;&#5;G T
&#22;&#22;&#1;f0288&#31;reute
d f BC-SANDOZ-PLANS-WEEDKILL   03-03 0095</UNKNOWN>
<TEXT>&#2;
<TITLE>SANDOZ PLANS WEEDKILLER JOINT VENTURE IN USSR</TITLE>
<DATELINE>    BASLE, March 3 - </DATELINE><CONTENT>Sandoz AG said it planned a joint venture
to produce herbicides in the Soviet Union.
    The company said it had signed a letter of intent with the
Soviet Ministry of Fertiliser Production to form the first
foreign joint venture the ministry had undertaken since the
Soviet Union allowed Western firms to enter into joint ventures
two months ago.
    The ministry and Sandoz will each have a 50 pct stake, but
a company spokeswoman was unable to give details of the size of
investment or planned output.
 Reuter
&#3;</CONTENT></TEXT>
</REUTERS> 
```

这是代码：

```
from bs4 import BeautifulSoup,SoupStrainer
f = open('dataset/reut2-001.sgm', 'r')
data= f.read()
soup = BeautifulSoup(data)
contents = soup.findAll('content')
for content in contents:
    print content.text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-19T12:46:09.040

您只需要相关的解析器（xml / lxml / html.parser / 等）。我在使用'lxml'解析器从SGML文件中提取HTML标签时遇到了同样的问题，并通过将解析器更改为'html.parser'来解决它。

**之前**：

```
soup = BeautifulSoup(file_content, 'lxml') 
```

**之后/解决方案**：

```
soup = BeautifulSoup(file_content, 'html.parser') 
```

[来自文档的参考](https://www.crummy.com/software/BeautifulSoup/bs4/doc/#differences-between-parsers)：

> HTML解析器之间也存在差异。如果你给 Beautiful Soup 一个格式完美的 HTML 文档，这些差异就无关紧要了。一个解析器会比另一个更快，但它们都会为您提供一个看起来与原始 HTML 文档完全相同的数据结构。
> 
> 但是如果文档的格式不完美，不同的解析器会给出不同的结果。

# javascript - 如何使用链而不在 JavaScript 中应用反模式？

> ID：15863759
> 
> 赞同：0
> 
> 时间：2013-04-07T14:56:48.043
> 
> 标签：javascript, functional-programming, prototype, chain

如果您尝试在 JavaScript 上以函数式风格进行编程，您可能会意识到传统`fn(obj,params...)`形式很快变得不可读。

```
console.log(
    join(
        map(function(row){ return row.join(" "); },
            format(
                map(function(text){return align(text},
                    view),
                20))),
    "\n"); 
```

VS

```
view.map(function(text){return align(text)})
    .format(20)
    .map(function(row){return row.join(" ");})
    .join("\n")
    .log(); 
```

有问题的是，后一种风格只能`Object.prototype`用新功能扩展来实现，这在全球范围内被认为是**邪恶**的。然而，可读性非常好，以至于我被提示继续做下去。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-15T23:00:54.597

是的，有更好的方法来解决问题。下面是使用[lodash](https://lodash.com/)的演示。

坏方法：

```
import _ from "lodash";

_.chain([1, 2, 3])
  .map(x => [x, x*2])
  .flatten()
  .sort()
  .value(); 
```

更好的方法：

```
import map from "lodash/fp/map";
import flatten from "lodash/fp/flatten";
import sortBy from "lodash/fp/sortBy";
import flow from "lodash/fp/flow";

flow(
  map(x => [x, x*2]),
  flatten,
  sortBy(x => x) 
)([1,2,3]); 
```

请参阅[为什么使用`_.chain`是错误的。](https://medium.com/making-internets/why-using-chain-is-a-mistake-9bc1f80d51ba#.ni9g5zsgm)以获得精彩而深入的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:21:42.857

一种常见的“单子”方法是将操作数包装到您自己的对象中，在该对象上调用一系列方法，然后将纯值提取回来。[underscore.js](http://underscorejs.org/#chaining)文档中的示例：

```
var youngest = _.chain(stooges)
  .sortBy(function(stooge){ return stooge.age; })
  .map(function(stooge){ return stooge.name + ' is ' + stooge.age; })
  .first()
  .value(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T15:22:38.233

基本模式是

1.  创建一个构造函数，将对象的状态存储为属性`this`
2.  将可链接的方法添加到构造函数的原型中。在这些函数的主体中，更改附加到的对象的状态`this`，然后返回`this`。
3.  提供一种在链末尾使用的方法，将自定义可链接对象转换为原始数组或任何不可链接的模拟。

[http://jsfiddle.net/XjRrn/](http://jsfiddle.net/XjRrn/)是一个工作示例：

```
function ChainableArray(rawArray) {
     this._array = rawArray || [];
};
ChainableArray.prototype.map = function(fn) {
    this._array = _.map(this._array, fn);
    return this;
};
ChainableArray.prototype.incr = function(amount) {
    this._array = _.map(this._array, function (item) {return item + amount;});
    return this;
};
ChainableArray.prototype.toArray = function () {
    return _.clone(this._array);
}; 
```

[来自 mongoose.js 库的 Query 对象](https://github.com/LearnBoost/mongoose/blob/master/lib/query.js)是一个很好的案例研究可供参考。

# c++ - 具有共享 vptr 的多态对象的 C++ 容器

> ID：15863762
> 
> 赞同：2
> 
> 时间：2013-04-07T14:57:11.673
> 
> 标签：c++, containers, vtable, polymorphism

假设我需要存储一个**相同类型**的对象的集合，但是这个类型不能在编译时定义。还假设一旦定义了这种类型，它就永远不会改变。众所周知，当编译时不知道类型时，可以使用指向其基类的指针容器来存储这些对象，即

```
std::vector<Base*> collection;
collection.push_back( new Derived() ); 
```

这样，分配的对象不一定会并排存储在内存中，因为在每次分配中`new()`都会返回内存中的任意位置。此外，每个对象都嵌入了一个额外的指针 ( `vptr`)，因为`Base`类当然需要是多态的。

对于这种特殊情况（类型定义一次 + 类型永不改变），上述解决方案不是最佳解决方案，因为理论上，

1.  不必`vptr`为每个对象存储相同的 (sizeof() = 指针大小)：它们都指向相同的`vtable`；
2.  可以使用连续的存储位置，因为对象的大小是在程序开始时定义的，并且永远不会改变。

**问：**你们知道克服这些问题的策略/容器/内存分配器/成语/技巧/其他任何东西吗？

我想我可以做这样的事情（使用经典的*Shape*示例）：

```
struct Triangle_Data {
    double p1[3],p2[3],p3[3];
};

struct Circle_Data {
    double radius;
};

struct Shape {
    virtual double area() const = 0;
    virtual char* getData() = 0;
    virtual ~Shape() {}
};

struct Triangle : public Shape {
    union {
        Triangle_Data tri_data;
        char data[sizeof(Triangle_Data)];
    };
    double area() const { /*...*/ };
    char* getData() { return data; }
    Triangle(char * dat_) {
        std::copy(dat_, dat_+sizeof(Triangle_Data), this->data);
    };
};

struct Circle : public Shape {
    union {
        Circle_Data circ_data;
        char data[sizeof(Circle_Data)];
    };
    double area() const { /*...*/ };
    char* getData() { return data; }
    Circle(char * dat_) {
        std::copy(dat_, dat_+sizeof(Circle_Data), this->data);
    };
};

template<class BaseT>
struct Container {
    int n_objects;
    int sizeof_obj;
    std::vector<char> data;
    Container(...arguments here...) : ...init here... {
        data.resize( sizeof_obj * n_objects );
    }
    void push_back(Shape* obj) {
        // copy the content of obj
        for( int i=0; i<sizeof_obj; ++i)
            data.push_back(*(obj.getData() + i));
    }
    char* operator[] (int idx) {
        return data + idx*sizeof_obj;
    }
};

// usage:
int main() {
    Container<Shape> collection( ..init here.. );
    collection.push_back(new Circle());
    cout << Circle(collection[0]).area() << endl; // horrible, but does it work?
}; 
```

当然，这种方法在类型安全、对齐等方面存在很多问题。有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:00:26.187

> 不必存储相同的 vtable（每个对象 8 个字节？）collection.size() 次；

您根本没有存储 vtable。无论对象是否为多态，您都在存储大小相同的指针。如果集合有`N`对象，那么它需要`N * sizeof(void*)`字节。所以上面的说法是错误的。

> 可以使用连续的存储位置，因为它们的大小是已知的并且在定义它们的类型时彼此相等。

这还不清楚。如果您在谈论由容器维护的存储，那么是的，由容器维护的存储`std::vector`保证是连续的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T15:16:41.240

要解决问题的第 2 点，如果您知道所有对象都属于**同一类型**，并且您在运行时拥有此信息，您可能会考虑虚拟化容器并使用工厂创建它。只是为了给出这个想法的草图：

```
class ShapeContainer {
 /* Virtual base */
}; 

class CircleContainer : public ShapeContainer {
/* ... */
private:
    std::vector<Circle> impl_;
}

class ShapeContainerFactory {
 /* Factory for ShapeContainer derived objects */
};

int main() {
    ShapeContainer& collection = ShapeContainerFactory.create("Circle");
    collection.push_back( Circle() );
}; 
```

在这种情况下，您将保证连续存储的不是指向多态对象的指针或引用，而是对象本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T17:31:22.000

> 1）没有必要存储相同的 vptr（每个对象 8 个字节？）collection.size() 次；

这不是必需的，但对象是相互独立的。

> 2) 可以使用连续的存储位置，因为它们的大小是已知的并且在定义它们的类型时彼此相等。

...确实，如果您可以存储具体实例，则可以将它们存储在连续的内存中。

* * *

所以，你可以做什么 ？

一种解决方案是*不*使用多态实例，而是将数据和多态分开：

```
struct IShape {
    virtual ~IShape() {}
    virtual double area() const = 0;
};

struct Circle {
    float center, radius;
};

struct IShapeCircle: IShape {
    IShapeCircle(Circle const& c): circle(const_cast<Circle&>(c)) {}
    virtual double area() const { return PI * circle.radius * circle.radius; }

    Circle& circle;
}; 
```

这样，您只需在需要时创建多态实例。而对于存储，我们可以采用 Massimiliano 的解决方案。

```
struct IShapeVector {
    virtual ~IShapeVector() {}
    std::unique_ptr<IShape> get(size_t i) = 0;
    std::unique_ptr<IShape const> get(size_t i) const = 0;
};

struct IShapeCircleVector: IShapeVector {
    std::unique_ptr<IShape> get(size_t i) {
        return make_unique<IShapeCircle>(_circles.at(i));
    }
    std::unique_ptr<IShape const> get(size_t i) const {
        return make_unique<IShapeCircle const>(_circles.at(i));
    }

    std::vector<Circle> _circles;
}; 
```

但是，您可能会发现分配/解除分配流量比单纯的 v-ptr 更能减慢您的速度。

# php - 从 php 中的 XML 节点获取数据

> ID：15863763
> 
> 赞同：1
> 
> 时间：2013-04-07T14:57:15.200
> 
> 标签：php, xml, simplexml

我正在从 url 检索 XML 数据，我想从特定节点中提取数据。

这是我的 XML 数据

```
<person>
  <first-name>ABC</first-name>
  <last-name>XYZ</last-name>
</person> 
```

这是我的 PHP 代码：

```
$content = file_get_contents($url);

$xml = simplexml_load_string($content);

foreach($xml->children() as $child)
  {
  echo $child->getName() . ": " . $child->first-name . "<br>";
  } 
```

PHP 返回此错误：

```
Use of undefined constant name - assumed 'name' 
```

那么我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:01:49.560

尝试使用这个：

```
<person>
  <firstname>ABC</firstname>
  <lastname>XYZ</lastname>
</person> 
```

进而 ：

```
$content = file_get_contents($url);

$xml = simplexml_load_string($content);

foreach($xml->children() as $child)
  {
  echo $child->getName() . ": " . $child->firstname . "<br>";
  } 
```

它有效吗？

编辑：您将没有任何数据，`$xml->children()`因为您没有任何数据。尝试做这样的事情：

```
<person>
  <firstname>ABC</firstname>
  <lastname>XYZ</lastname>
  <other>
    <first>111</first>
    <second>222</second>
  </other>
</person>

<?php 
$content = file_get_contents("test.xml");

$xml = simplexml_load_string($content);

foreach($xml->children() as $child)
{   
    echo $child->getName() . ": " .$child->first . "<br>";
}

 ?> 
```

这将呼应：

```
firstname: 
lastname: 
other: 111 
```

我想拥有第一个节点，您可以简单地执行以下操作：

```
echo $xml->firstname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:04:17.823

`'-'`不允许在变量名中使用。`$child->first-name`被解释为`$child->first minus name`。您应该找到另一种获取内容的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:07:51.290

如前所述，您不能`-`在变量名中使用。不过，据我所知，您只是想打印出标签名称和值。如果是这样，您可能在此之后：

```
foreach($xml->children() as $child)
{
    echo "{$child->getName()}: $child <br />";
} 
```

# php - 使用 PHP 存储用户密码 - 长期设计

> ID：15863767
> 
> 赞同：1
> 
> 时间：2013-04-07T14:57:37.597
> 
> 标签：php, codeigniter, password-encryption

在阅读了许多关于密码处理的文章和文档之后，在最佳实践中很明显：

*   我不应该创建自定义加密。
*   我应该在 PHP 中使用低级功能，以确保（在可能的范围内）我将来能够在需要时进行调整。

当我看到[phpass](http://www.openwall.com/phpass/)时，我开始使用 PHP crypt() 函数现在我在我的 PHP 应用程序中实现用户模型已经完成一半（使用 codeigniter），我停下来思考：

我应该如何设计我的代码以便能够适应并保持它在未来很多年的工作？php spl 库中有 phpass 吗？这是否意味着确保支持？

# ruby-on-rails - rails factory girl 比较失败

> ID：15863772
> 
> 赞同：-3
> 
> 时间：2013-04-07T14:58:02.957
> 
> 标签：ruby-on-rails, rspec, factory-bot

**_spec.rb**

```
 context 'find discount coupon' do 
        it 'if coupon suitable for use' do 
          coupon = Factory(:standart_discount_coupon)
          DiscountCoupon.find_discount_coupon(coupon.coupon_no).should eql({:success => true, :error => nil, :coupon_id => coupon.id })
        end
      end 
```

我有这个测试，当我运行它时，我遇到了这个错误。

```
 1) DiscountCoupon find discount coupon if coupon suitable for use
     Failure/Error: DiscountCoupon.find_discount_coupon(coupon.coupon_no).should eql({:success => true, :error => nil, :coupon_id => coupon.id })

       expected: {:success=>true, :error=>nil, :coupon_id=>1060}
            got: {:success=>true, :error=>nil, :coupon_id=>1046}

       (compared using eql?)

       Diff:
       @@ -1,4 +1,4 @@
       -:coupon_id => 1060,
       +:coupon_id => 1046,
        :error => nil,
        :success => true 
```

为什么 copon_id 不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:11:50.350

除了“标准”的拼写错误之外，我想您没有什么可以阻止您`coupon_no`在数据库中拥有多个相同的优惠券。幸好你有一个发现这个问题的测试，即使它只是可见的，因为你的工厂使用默认的`coupon_no`.

# c - Little Endian 中的 ntohl() 与 htonl()

> ID：15863775
> 
> 赞同：3
> 
> 时间：2013-04-07T14:58:21.130
> 
> 标签：c, endianness, htonl

请澄清我的疑问，因为我对以下内容感到非常困惑，而且我在网上的任何其他地方都找不到干净的答案。

```
#include<stdio.h>
int main()
{
   int a = 0x44332211;
   printf("Network - 0x%x\n", htonl(a));// Host to network
   printf("Host    - 0x%x\n", ntohl(a));// Network to host
   return 0;
} 
```

输出：

```
 Network - 0x11223344   
 Host    - 0x11223344 
```

在这里`htonl(0x44332211)`=> 我正在将小端（LE）转换为 BE。所以输出将是`0x11223344`. 我明白了。我的问题是`ntoh()`. 现在`ntohl(0x44332211)`=> 什么？

在这里，我在 1 个终端上执行这两个命令。所以主机到网络，即`hton()`意味着我的终端到网络。那讲得通。但这里`ntohl()`意味着什么？`ntohl()`如果我们有：

```
a PC A----(ie hton)sending data over network------>(ie ntoh) to PC B? 
```

还`ntoh`需要一个网络字节顺序，即大端。请解释`ntohl()`上面的意思以及为什么它的打印与打印相同`0x11223344`，为什么不打印`0x44332211`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-07T16:38:25.173

假设您的程序在小端机器（例如 x86）上运行，ntohl(a) 将返回 0x11223344（即，它将翻转 0x11223344 值的字节顺序，就像 htonl() 一样）。

另一方面，如果您的程序在大端机器（例如 PowerPC Mac）上运行，则 ntohl(a) 和 htonl(a) 都将逐字返回 a，因为机器的内部/主机格式已经是与网络格式相同。

还有（至少理论上）您的程序可能在一些[不寻常的硬件](https://en.wikipedia.org/wiki/Endianness#Middle-endian)上运行，该硬件使用既不是大端也不是小端的数字表示。在这种情况下，该环境的 htonl() 和 ntohl() 函数将被编程为做正确的事情（无论可能是什么）以将该机器的内部表示转换为标准网络表示（即大端）和背部。

这些功能的预期使用模式是这样的：

*   每当您要向网络发送 long 时，请在其上调用 htonl() 并发送该值。
*   每当您刚刚从网络收到一个 long 时，请在其上调用 ntohl() 并改用该值。

这样，主机的数字表示和网络/大端表示之间的任何差异都会在 htonl() 和 ntohl() 中自动为您处理，您不必担心编写（和测试！）单独的转换代码对于您的程序可能运行的每种计算机体系结构。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-02T00:43:12.097

刚刚偶然发现这个帖子。我同意 Jeremy 的回答，但只想再补充一点：如有疑问，请转到源代码。如果您查看 GCC 库中的 ntoh() 和 hton() 定义：

<[网/in.h](http://repo-genesis3.cbi.utsa.edu/crossref/ns-sli/usr/include/netinet/in.h.html#378) >

```
#  if __BYTE_ORDER == __LITTLE_ENDIAN
#define ntohl(x)     __bswap_32 (x)
#define htonl(x)     __bswap_32 (x)
#endif 
```

因此， ntohl() 和 htonl() 都只是在[byteswap.h](http://repo-genesis3.cbi.utsa.edu/crossref/ns-sli/usr/include/bits/byteswap.h.html)中定义的字节交换。这就是为什么这两个宏的输出相同的原因。

现在，为什么它们是一样的？？？好吧，作者打算在网络端数据（通常是接收的数据包缓冲区的内容）上调用 ntohl()，类似地，在主机端数据（由主机写入的数据）上调用 htonl()。

在您的情况下，您在同一 Host Endian 数据上调用这两个宏，这就是问题所在。

我想我迟到了。但是，我希望下一位访问者会发现这个答案很有用:)

# android - 如何从xml中的另一个包加载资源？

> ID：15863776
> 
> 赞同：3
> 
> 时间：2013-04-07T14:58:26.793
> 
> 标签：android, xml, layout, resources, drawable

我知道存在以这样的代码从另一个包安装资源 xml 文件的能力：

```
String resourceName = getResources().getResourceEntryName(layoutResID);
String resourceTypeName = getResources().getResourceTypeName(layoutResID);
Resources skinResources = getResourcesForPackage("com.my.skin");
int skinResourceId = skinResources.getIdentifier(resourceName, resourceTypeName, "com.my.skin");
mLayoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
mLayoutInflater.inflate(skinResources.getXml(skinResourceId), null);
super.setContentView(mLayoutInflater.inflate(skinResources.getXml(skinResourceId), null)); 
```

但我想知道如何在 xml 和可绘制资源中制作相同的内容：

例如：我有两个应用程序：

*   应用程序**主**包“ *com.my.main* ”
*   *以及带有“ com.my.skin* ”包的应用**皮肤**

 *在 android[文档](http://developer.android.com/reference/android/view/View.html#attr_android%3abackground)中解释：

> 可能是对另一个资源的引用，形式为“@[+][package:]type:name”或主题属性的形式为“?[package:][type:]name”。

我试图指定这样的东西：

`android:background="@com.my.skin:drawable:background_image"`

或这个：

`android:background="?com.my.skin:drawable:background_image"`

但它不起作用，我的资源文件没有编译。

**谁知道如何使用显式规范加载资源。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:05:18.593

使您的项目成为库项目，您可以在另一个 android 项目中引用它。

图书馆项目

这些项目包含可共享的 Android**源代码**和**资源，您可以在 Android 项目中引用它们**。当您有想要重用的公共代码时，这很有用。库项目不能安装到设备上，但是，它们会在构建时被拉入 .apk 文件。

有关更多信息，请查看主题**库项目下的链接。**

[http://developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)

您的库项目将勾选一个复选框，如项目中所示。

![在此处输入图像描述](https://i.stack.imgur.com/YcVXM.png)

您可以将库项目添加到您的 android 项目中。右键单击您的项目。转到属性。在左侧面板上选择 Android。

![在此处输入图像描述](https://i.stack.imgur.com/gk3Kj.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-26T16:50:44.893

根据您忘记在@ 之后添加+ 的文档。最后在可绘制格式中输入错误：应该替换为/

这应该是正确的选择：

```
android:background="@+com.my.skin:drawable/background_image" 
```*

# user-interface - 用于匹配记录的 UI / UX

> ID：15863779
> 
> 赞同：0
> 
> 时间：2013-04-07T14:58:36.990
> 
> 标签：user-interface, user-input, user-experience

我知道这是一个程序员（不是设计师）的论坛，但用户体验决策通常留给我们。所以我问你们/女孩：

有没有人遇到过向用户提供两个信息列表供用户匹配的良好范例？

我不是在寻找控制或预先构建的解决方案本身（尽管示例会很棒），甚至不是真正的具体设计。我只是在寻找如何将其呈现给用户的想法。

我们正在讨论两个非常长的列表（数千条记录），其中两个列表中的一些（但不是全部）记录之间存在一对一的关系，用户需要将它们匹配起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T22:37:30.000

我正要发布完全相同的问题。就我而言，我需要匹配大约 1500 条文本记录（但不是 1:1）。我目前正在考虑的是显示以这样一种方式排序的列表，即已经匹配的元素可以通过直线连接而不会交叉。在这两个列表上方，我将放置文本框，允许根据输入的关键字过滤列表。为了匹配元素，用户将执行类似于拖放或绘制箭头的手势。要删除匹配的用户，请单击箭头。

# python - 什么是访问附加到不同资源的资源的 RESTful 方式

> ID：15863781
> 
> 赞同：0
> 
> 时间：2013-04-07T14:58:42.670
> 
> 标签：python, rest, flask

我的数据模式看起来像

`User`有**很多** `Transaction`。两者都是数据库`User`中`Transaction`的不同表
我有`REST`端点

**用户端点**

```
GET /users/uuid # to get information about specific user
PUT /users/uuid # update information of a specific user 
```

**事务端点**

```
GET /transactions/uuid # get a specific transaction
GET /transactions/user_uuid # get all transactions of a specific user
GET /transactions/user_uuid/yyyy # get all transactions of a specific user in year yyyy
GET /transactions/user_uuid/yyyy/mm # get all transactions of a specific user in year yyyy, month mm
GET /transactions/user_uuid/yyyy/mm/dd # get all transactions of a specific user in year yyyy, month mm and day dd 
```

*   我的问题是，由于`transactions`将始终附加`User`资源，因此为它们设置不同的端点是否有意义？
*   推荐什么来访问用户的交易？上面贴的那个？或类似的东西

> ```
> GET /users/uuid/transactions # all transactions for a user
> GET /users/uuid/transactions/yyyy # all transactions for a user for year yyyy
> GET /users/uuid/transactions/yyyy/mm # all transactions for a user for year yyyy, month mm
> GET /users/uuid/transactions/yyyy/mm/dd # all transactions for a user for year yyyy, month mm and day dd 
> ```

我现在很困惑哪个更好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T18:29:01.403

如果您总是`transactions`在用户的上下文中访问，那么您的第二种方法对我来说是有意义的，因为正如您所说并且用户有很多`transactions`，使用您的第一种方法，url 设计可能会很混乱，因为不清楚日期部分是否引用`transactions`了用户资源。另一方面，如果您想`transactions`为所有用户阅读所有内容，那么您有两个端点是有意义的`transactions`

```
GET /transactions/ # reads all transactions for all users
GET /transactions/yyyy # reads all trasnsaction for all users with date 
GET /users/uuid/transactions # reads all transaction for a particular user
GET /users/uuid/transactions/yyyy # reads all transactions for a particular user with date 
```

# python - python中的“self.data”用法

> ID：15863784
> 
> 赞同：3
> 
> 时间：2013-04-07T14:59:12.243
> 
> 标签：python, attributes

您好，我有一个关于 Python 中属性使用的问题。我了解到，在函数定义中，我们可以为对象分配一些新属性，例如：self！但是，当尝试使用它时，我得到了一个错误，即“......实例没有属性'数据'

```
class Lazy:
    def __call__(self, num):
            if num is None:
                    return self.data
            # It changes the current object in-place,
            # by reassigning the self attribute.
            else:
                    self.data += num 
```

这是我的小代码。我对此很陌生。我不知道出了什么问题。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T15:03:54.290

您只是在分配`self.data`if `num is None`，因此您可能会在分配之前尝试访问它。为了防止这种情况，您可以在构造函数中对其进行初始化：

```
class Lazy:
    def __init__(self):
        self.data = 0

    def __call__(self, num):
        if num is None:
            return self.data
        else:
            self.data += num 
```

以下是导致您的错误的事件顺序：

1.  你创建了你的类的一个新实例。在这一点上，Python 一无所知`self.data`：

    ```
    lazy = Lazy() 
    ```

2.  你称之为传递`None`：

    ```
    lazy(None) 
    ```

3.  现在，Python 进入`__call__`，并且因为 if 条件计算结果为`True`它尝试返回`self.data`。等一下……它仍然不知道是什么`self.data`……所以它吐出了一个错误。

为了防止这种情况，您总是必须在尝试使用它们的值做某事之前分配您的属性（例如，从函数中返回它们）。它不必在构造函数中：就在 Python 第一次尝试访问该属性之前。*对于任何*变量都是如此，即以下是不可能的：

```
print(a) # How do you expect Python to know the value of a?
a = 5    # too late to assign it now... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:05:25.903

您正在尝试引用`self.data`但未初始化/声明它。

```
class Lazy:
    def __init__(self, data=0):
        self.data = data #You are initializing data to 0 or a user specified value

    def __call__(self, num):
        if num is None:
            return self.data
            # It changes the current object in-place,
            # by reassigning the self attribute.
        else:
            self.data += num 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T15:07:11.353

为了修改`self.data`，您必须首先使用类的特殊方法初始化`self.data`属性。`__init__`

来自官方文档：

> object.__init__(self[, ...])
> 
> > 创建实例时调用。参数是传递给类构造函数表达式的参数。

所以你可以设置`self.data`为 0，那么你的`__call__`方法应该像写的那样工作。

```
class Lazy:
    def __init__(self):
        self.data = 0

    def __call__(self, num):
        if num is None:
            return self.data
        else:
            self.data += num 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-07T15:26:04.700

您可以在方法中或其他任何地方初始化属性`__init__()`（尽管`__init__()`是推荐的地方）。

`self.data`如果它不存在，请尝试初始化它。

```
class Lazy:
    def __call__(self, num):
            try:
                self.data
            except:
                self.data = 0
            if num is None:
                    return self.data
            # It changes the current object in-place,
            # by reassigning the self attribute.
            else:
                    self.data += num 
```

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-07T15:38:17.557

我想在您的代码中指出：

```
class Lazy:
def __init__(self):
    self.data = 0

def __call__(self, num):
    if num is None:
        return self.data 
```

假设如果你调用你的实例：`lazy(some_value)`那么你的 else 分支将执行，其计算结果为：

```
 else:
        self.data += num # self.data = self.data + num 
```

但是，可能存在 self.data 在这种情况下可能未定义的情况，它也会通过上述错误。

我同意上述所有答案，但我也需要关注这个极端案例。

请享用！

# python - Python中并行数组/向量的有效分组

> ID：15863788
> 
> 赞同：1
> 
> 时间：2013-04-07T14:59:34.247
> 
> 标签：python, data-structures, root, bigdata, grid-computing

我有一个非常大的 ROOT（二进制）格式的数据集，其中包含序列化的 std::vector 对象。每个长度为 N 的向量本质上表示 N 个逻辑对象集合的一个数据成员（这里，N 可能随文件中的每个条目而变化）。例如，对于文件中的每个条目，我都会读取以下对象：

```
std::vector<float> foo_a;
std::vector<float> foo_b;
std::vector<int> foo_c; 
```

从逻辑上讲，这些平行场代表一个对象。我希望能够处理数据，就好像我有这个：

```
struct Foo {
    float a;
    float b;
    int c;
};
std::vector<Foo> my_foos; 
```

因此，例如，如果我想从列表中删除某个“Foo”，或者将其转换到位等，我不想跟踪它的所有并行数据成员来进行更改。

我通过 Python 访问序列化对象，使用一个库，该库简单地为我请求的每个条目传递 Python 化的 std::vector 对象。从技术上讲，相同的向量在整个文件访问过程中都存在于内存中；它们被清除并重新填充每个条目的新数据。这是我目前如何物化的草图：

```
class Dummy:
    def __init__(self): pass

def get_objects(list_of_field_names, list_of_parallel_vectors):

    names_and_vectors = zip(list_of_field_names, list_of_parallel_vectors)

    n = len(list_of_parallel_vectors[0])
    for i in xrange(n):
        obj = Dummy()
        obj_members = [(field_name, vector.at(i))
            for field_name, vector in names_and_vectors]

        obj.__dict__.update(obj_members)

        yield obj

# ...

# get the std::vectors from file:
foo_a, foo_b, foo_c = magic()

# retrieve my python list of Foo objects:
objects_to_process = get_objects( ('a','b','c'), (foo_a, foo_b, foo_c) )

# now I can access logical data in the parallel vectors as a python object:
for obj in objects_to_process:
    print (obj.a + obj.b) / obj.c 
```

分析后，我发现对象创建和数据从向量复制到 python 对象的所有开销都是处理时间的重要瓶颈。有没有更有效的方法来达到同样的效果？

欢迎就优化的风险或更明智的方法给这只猫剥皮的原则性和明智的建议，但请记住：1）数据集很大（高达 100 TB）；有数百万个条目和数千个不同长度的并行向量（对应于数十个逻辑对象）。2）我对输入数据格式没有任何控制权。

# iphone - 点击单元格时的 UITableViewCellAccessoryCheckmark

> ID：15863789
> 
> 赞同：0
> 
> 时间：2013-04-07T14:59:39.793
> 
> 标签：iphone, ios, uitableview

我有一个 UITableView，每个单元格都有一个 UITableViewCellAccessoryCheckmark。用户可以根据自己的喜好选中和取消选中单元格。用户可以在表格视图中检查/选择多个单元格。可以根据用户偏好取消选中和重新选中选中/选中的单元格。这是我尝试过的。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
if([[NSIndexPath indexPathWithIndex:indexPath.row] isEqual:self.selectedIndex]){
                    if(cell.accessoryType == UITableViewCellAccessoryCheckmark)
                        cell.accessoryType = UITableViewCellAccessoryNone;
                    else
                        cell.accessoryType = UITableViewCellAccessoryCheckmark;
                }
                else{
                    if(cell.accessoryType == UITableViewCellAccessoryCheckmark){

                    }
                    else{
                        cell.accessoryType = UITableViewCellAccessoryNone;}
                }
} 
```

在这种情况下，我的逻辑不正确。以上是我最接近的，但同样，第一次加载 tableview 时检查每个单元格。但是其他功能还可以。

所以我想要的是，最初在加载视图时，我必须`UITableView`取消选中所有单元格。然后根据单元格的选择，必须在每个单元格中更新复选标记。该属性`selectedIndex`是 type`NSIndexPath`并且每次在 中更新`didSelectRowAtIndexpath`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:11:00.193

永远不要根据单元格中的任何数据检查您选择的状态，始终拥有自己的数据模型或数组来维护所选状态。

诶，为什么？o_o

好吧 通常`UITableViewCell`被重复使用，出现在索引 1 的单元格可能会再次出现在索引 8 或 7 或 9 或任何索引处以相同状态出现（我们*通常**不需要*知道）当您使用*`dequeueReusableCell:`*

 *如果你想有`CheckBox`风格（多选），你需要有一个数组来映射选定的索引。

如果你想有`RadioButton`风格（一次选择一个），你需要有一个引用所选索引的变量。

在您的代码中的特定情况下..这可以这样解决：

```
if([[NSIndexPath indexPathWithIndex:indexPath.row] isEqual:self.selectedIndex]){
      cell.accessoryType = UITableViewCellAccessoryCheckmark;
else{
      cell.accessoryType = UITableViewCellAccessoryNone;}
} 
```*

# javascript - 如何从带有 JS 的链接中获取灯箱？

> ID：15863792
> 
> 赞同：0
> 
> 时间：2013-04-07T14:59:42.433
> 
> 标签：javascript, html, onclick, href

对于我的项目，我必须单击一个显示“更多信息”的按钮，当单击此按钮时，应该会出现一个灯箱，其中包含一个显示更多信息的表格。

现在在我的 HTML 中有一个表格：

```
< tr>

< td>Rules < /td>

< td>< input type="text" name="ruls" id="rules" value="" />

    < div>
    < a href="#" onClick="javascript:displayBox()">More Information< /a>
    < /div>

< /td>

< /tr> 
```

现在我不确定在 href=" " 中放什么。

我是否将我拥有的功能是 displayBox 放在链接中？

因此，`< a href=" " onClick="javascript:displayBox()"> Rules < /a>`......但同样，我不确定在 href 中放入什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:06:20.690

最佳做法是不要在您的 html 中放置任何 javascript，以防用户禁用了 Javascript。

尝试这个：

```
<tr>  
    <td>Rules </td>
    <td>< input type="text" name="ruls" id="rules" value="" />
      <div>
        <a href="#" id="displayBox">More Information</a>
      </div>   
   </td>
</tr> 
```

Javascript：

```
<script type="text/javascript">

  var myEl = document.getElementById('displayBox');

  myEl.addEventListener('click', function() {
      displayBox();
  }, false);

</script> 
```

# mysql - 将已更改列的差异值插入具有匹配列的表中的最有效方法？

> ID：15863793
> 
> 赞同：1
> 
> 时间：2013-04-07T14:59:50.333
> 
> 标签：mysql, insert, unique

很难把它变成一个句子的问题。这是前提：

我有两个结构如下的表：

```
create table TableA(
id int, <-- this is a unique ID in TableA but not in TableB
value1 int,
value2 int,
value3 int,
value4 int,
value5 int,
value6 int,
update_time DATETIME
) 
```

和

```
create table TableB(
id int,
value1 int,
value2 int,
value3 int,
value4 int,
value5 int,
value6 int,
update_time DATETIME
) 
```

`TableA`有 100,000 行数据（API 响应的最新副本）。每隔一小时，API 就会返回每个 ID 的新数据，`TableA`并且 API 响应`TableA`会使用每个唯一 ID 的最新数据进行更新。随着时间的推移，所有响应都会保存到`TableB`数据分析中（因此每小时会添加 100,000 行`TableB`。）。但是，并非所有数据每小时都会更改。事实上，大部分数据根本没有变化。

以下是我想构造它的方式：假设 API 返回数据 for`id = 432`并且所有值都相同，除了`value4`，`value4`包含 505043（而不是当前存储在`TableA`for中的值 505000 `id=432`）。我想取 505043 - 505000 = 43 并将其存储到`TableB`：

```
INSERT INTO TableB (id, value6) VALUES (432, 43) 
```

实现这一目标的最有效方法是什么？我最初的想法是从`TableA`PHP`cron`脚本中检索数据，计算数据差异（如果有的话），然后相应地构造插入语句。但是由于这个过程每秒会发生很多次，所以我想确保我使用的是最有效的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:10:05.833

每当在 TableA 中插入或更新行时，您可以创建一个[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)，将行插入到 TableB 中。

[下面是一个示例](https://stackoverflow.com/q/4753878/190597)，说明每当在另一个表中插入一行时，如何使用触发器将行插入到表中。

# c++ - 在 Jenkins 上运行的代码覆盖率工具

> ID：15863794
> 
> 赞同：-2
> 
> 时间：2013-04-07T14:59:59.383
> 
> 标签：c++, jenkins, code-coverage, jenkins-plugins

我正在尝试研究在 Jenkins 框架上运行的 C++ 代码覆盖工具。你能介绍一些工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T17:05:21.163

您可以使用 GCOV + LCOV 来计算代码覆盖率。Gcov 用于生成所有信息，lcov 用于生成结果（html）。对于公共 HTML，使用标准的构建后操作“发布 HTML”

GCOV：[链接](http://gcc.gnu.org/onlinedocs/gcc/Gcov-and-Optimization.html#Gcov-and-Optimization)

LCOV：[链接](http://ltp.sourceforge.net/coverage/lcov.php)

PS这一切都是为了Linux。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:03:27.700

我们已经成功地将 Parasoft 与 Jenkins 一起使用。

# java - 沉默log4j

> ID：15863798
> 
> 赞同：0
> 
> 时间：2013-04-07T15:00:10.367
> 
> 标签：java, log4j

我正在使用一个使用 log4j 输出到控制台的库。但是，使用该库的方法会被多次调用，这意味着控制台总是满的。我需要一种停止将 log4j 输出到控制台的方法。

我看到了一个类似的问题，但不知道该怎么做。

我认为（如果我理解的话）log4j 中有一个方法或变量，我必须参考但知道到底是什么。另外，我要导入什么来访问 log4j？

非常感谢您的帮助！

刚刚意识到：输出看起来可以通过修复某些东西来停止？请检查以下。

输出：

```
log4j:WARN No appenders could be found for logger (eu.medsea.mimeutil.TextMimeDetector).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:02:50.600

例如，您可以将级别日志更改为 ERROR 以限制您拥有的日志量。

通常日志级别位于 log4j.properties 文件中。

前任：

```
# Root logger option
log4j.rootLogger=ERROR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:09:03.360

刚刚意识到在终端中运行时它工作正常（而不是在 Eclipse 中运行）。猜测这意味着它找不到您的答案中提到的文件。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T11:08:34.127

该消息`WARN Please initialize the log4j system properly`意味着（如上所述）log4j 未正确初始化，因为您的应用程序`lo4j.properties`在运行时找不到该文件。

您可以在此处获取此文件的基本版本：[log4j 示例配置文件（属性文件）](https://stackoverflow.com/questions/2128185/log4j-sample-configuration-file-properties-file)

把它放在你的类路径中。完成此操作后，您将能够根据需要配置日志记录级别。例如，要关闭所有消息（并仅保留实际的错误消息），`lo4j.properties`您可以在文件中将根记录器级别设置为错误，如*TheEwook 所述*。

如果您仍然有问题，那么您应该检查您的**构建**过程，但具体检查取决于您用于编译的工具。例如，如果您使用 Eclipse，通常`lo4j.properties`应该位于该`resources`目录中，该目录应该设置一个源文件夹。如果您使用 Maven，通常此类文件应位于该`src/main/resources`目录中。如果您使用 Ant，您可能需要使用 Ant 的任务复制此类文件。

换句话说，无论您的构建过程如何，请确保`lo4j.properties`在运行时类路径中可见。

# meteor - Meteor 的 package.js 是如何工作的？

> ID：15863807
> 
> 赞同：9
> 
> 时间：2013-04-07T15:00:37.263
> 
> 标签：meteor

[这篇 Meteor.com 博客文章](http://meteor.com/blog/2013/04/04/meteor-060-brand-new-distribution-system-app-packages-npm-integration)讨论了`package.js`. 这与文件相似甚至相同`package.json`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T15:45:40.923

该`package.js`文件专门用于 Meteor。如果你浏览[https://github.com/meteor/meteor/tree/master/packages](https://github.com/meteor/meteor/tree/master/packages)上的 repo，你会看到一些是什么样的。每个包都有自己的`package.js`.

`package.json`稍有不同，它用于存储节点的`npm`依赖项，以便可以运行`npm install`以按顺序获取项目的依赖项。它比流星更具体到 npm/node。它不会与流星一起使用，因为流星会查找包中为特定包`run`定义的依赖项并安装模块。因此，使用流星项目（除了自动生成的捆绑 tarball 之外）不需要文件`Npm.depends``package.js``npm``package.json`

# oop - 哪种“设计模式”适合具有复杂（多步骤）配置的类

> ID：15863809
> 
> 赞同：-3
> 
> 时间：2013-04-07T15:00:50.903
> 
> 标签：oop, class, design-patterns, coding-style

每当使用设置向导时，用户都会回答许多不同的问题，直到可以开始真正的安装。将此与我当前项目中的一个类进行比较：我有一个需要多个配置步骤的类。它不适用于安装程序，但我认为安装程序向导是解释所需的更大配置功能的好方法。我正在努力寻找一个好的设计解决方案。

我目前的解决方案方法：

1.  Flat：我可以定义一个大类，其中所有步骤都包含在方法/函数/属性中。当调用错误的方法时，可以添加一些控制方法来引发异常。它会完成它的工作，但是程序员会因为看到这么多不同的方法而感到困惑。（-> 他需要更多时间来理解它是如何工作的）

2.  层次结构：我可以为每个配置步骤创建大约 3 个不同的类。每个都有自己的方法和功能。最后一个类在其构造函数中需要所有 3 个配置类的实例。这看起来不会太混乱，因为每个类中只有正确的方法可见。然而，程序员可能会生气，一个小类需要如此复杂的准备，创建 3 个其他类。也许是嵌套类，但我认为这也是一种糟糕的编码风格。

**我想知道是否有人已经遇到过这样的问题并且可以通过......提供合适的设计模式，或者针对此类问题提供一些经验/最佳实践类结构。**

我已经搜索了类似的问题，检查了一些可能适合的设计模式，并且已经提供了 2 种方法思路来说明答案的方向。如果您认为答案不够清楚，请评论/询问缺少的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:21:20.103

从问题和评论中的解释来看，“单一班级统治所有人”的方法似乎不是一个好的选择。

也许某种策略模式是要走的路。

您可以根据自己的要求从不同的策略中进行选择，而不是对单个班级进行非常复杂的设置。如果您已经知道可能会发生三种不同的事情，请制定三种不同的策略。

举个例子：你想写日志数据。可能是文件、数据库或网络服务。

那么你只有一个对“LogWritting Strategy”的依赖，它有一个明确定义的接口，可以说

```
interface ILogWriter
{
    void Write(enum LogLevel, string logEntry);
} 
```

现在，在您的客户端代码中，您依赖于该接口并仅在该接口上进行调用。但是在运行时，你会根据你的“配置”“注入”一个具体的策略。

即，您只需选择适合的策略，而无需对单个类进行复杂的引导。

然后你使用具体的策略，比如

```
IDatabaseLogWriter
IFileLogWriter
IWebServiceLogWriter 
```

可以在此处找到有关什么策略的简要说明： [策略模式](http://www.dofactory.com/Patterns/PatternStrategy.aspx)

**更新**

从最近的评论中，我认为存储库和映射模式都可以提供帮助。

你应该考虑看看

[存储库模式，很好的解释](http://msdn.microsoft.com/en-us/library/ff649690.aspx)

[Martin Fowler 的存储库解释（顶级架构）](http://martinfowler.com/eaaCatalog/repository.html)

[元数据映射](http://martinfowler.com/eaaCatalog/metadataMapping.html)

# jquery - Django Forms - 当字段具有初始数据时，JQuery 日期时间选择器不显示

> ID：15863810
> 
> 赞同：1
> 
> 时间：2013-04-07T15:01:02.547
> 
> 标签：jquery, django, django-forms, django-templates, datetimepicker

我有一个包含 2 个日期时间字段的表单，我使用的是 jquery ui 1.10.1、jquery 1.8.3 和[datetimepicker](http://trentrichardson.com/examples/timepicker/)

我在干净的表单上使用日期时间选择器没有问题，但无法让它显示实例化表单。

我尝试过的事情：

以与干净形式相同的方式实例化 datetimepicker：http: [//jsfiddle.net/neara/epHa4/](http://jsfiddle.net/neara/epHa4/)。显示错误：`Uncaught TypeError: Object #<s> has no method 'log'`

`'setDate'`用：http : [//jsfiddle.net/nara/epHa4/1/](http://jsfiddle.net/neara/epHa4/1/)实例化 datetimepicker 不做任何事情，没有错误，没有日期时间选择器。

如何使日期时间选择器工作？

**我是如何做到的**

```
$('#start_datetime').datetimepicker({
                timeFormat: 'H:m:s',
                dateFormat: 'yy-mm-dd'
});

$('#end_datetime').datetimepicker({
                timeFormat: 'H:m:s',
                dateFormat: 'yy-mm-dd'
}); 
```

在输入字段中为值 attr 的时间和日期提供正确的格式，使一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T06:58:32.163

试试这个代码。

[http://jsfiddle.net/Jf8Cs/](http://jsfiddle.net/Jf8Cs/)

我认为这段代码可能有效..

```
<form action="" method="post">
    <input type="text" id='start_datetime' value="2013-04-07 16:10:00"/>
    <input type="text" id='end_datetime' value="2013-04-07 18:10:00"/>
</form>

$('#start_datetime').datetimepicker({
                showSecond: true,
                timeFormat: 'H:m:ss',
    dateFormat: 'yy-mm-dd'});
$('#end_datetime').datetimepicker({
                showSecond: true,
                timeFormat: 'H:m:ss',
    dateFormat: 'yy-mm-dd'}); 
```

# html - 嵌入式 Google Drive 表单发送空白数据

> ID：15863813
> 
> 赞同：0
> 
> 时间：2013-04-07T15:01:17.563
> 
> 标签：html, google-docs

我想为嵌入式 Google Drive 表单设置样式。所以我在 Google Drive 创建表单，运行它并从`<form> to </form>`. 一切看起来都不错，但是当我选择表单值并单击提交按钮时，发送到 Google Drive 电子表格的数据是空白的。如果我使用谷歌推荐的 iframe，所有发送的数据都不为空。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:07:21.820

It sounds like you're viewing the source code from google drive, and copying that into an I-Frame on your own webpage. This won't work since that source code is offline, reserved for sending and receiving data from google only.

I recommend creating your own excel-like spreadsheet in your I-Frame. You may be able to use the same submit button if you configure it to send to your server.

# sql - 带有空字段的 MS Access 多字段搜索

> ID：15863819
> 
> 赞同：1
> 
> 时间：2013-04-07T15:01:54.160
> 
> 标签：sql, ms-access

我有一个与**[这个](https://stackoverflow.com/questions/12820453/ms-access-query-check-if-form-field-is-empty)***非常*相似的问题，但我似乎无法解决它！

在 MS Access (2003) 中，我想根据多个字段中的条目搜索表，其中一些字段可能为空。

我有：

*   文本字段
*   日期字段
*   整数字段，和
*   一个备忘录字段（但如果它很困难，我们可能不会费心搜索这个）。

它们准确地映射到一张桌子上。

我正在尝试创建一个查询，当数据输入到这些字段中的一个或多个时，该查询将返回匹配的行，但某些字段可以留空。我该怎么做？

类似链接问题上的查询适用于文本字段，但我该如何处理数字字段、日期字段（甚至可能是备注字段）？

举一个清晰的例子，以下代码块适用于 TextField1，但不适用于 NumberField1：

```
PARAMETERS [Forms]![SearchForm]![FilterTextField1] Text ( 255 ), [Forms]![SearchForm]![FilterNumberField1] Text ( 255 );
SELECT Table1.[TextField1], Table1.[NumberField1], Table1.[TextField2], Table1.[TextField3], Table1.[DateField1], Table1.[DateField2], Table1.[DateField3]
FROM Table1
WHERE (Len([Forms]![SearchForm]![FilterTextField1] & '')=0 OR Table1.[TextField1] Like '*' & [Forms]![SearchForm]![FilterTextField1] & '*') AND (Len([Forms]![SearchForm]![FilterNumberField1] & '')=0 OR Table1.[NumberField1] Like '*' & [Forms]![SearchForm]![FilterNumberField1] & '*'); 
```

我希望你能帮忙。我确定我遗漏了一些非常明显的东西，但出于某种原因，我的大脑此刻感觉它正在从我的耳朵里漏出来。

谢谢！

* * *

如果需要，这是相关实体的基本设计：

## 表格1

*   SomePrimaryKeyWeDontCareAboutRightNow
*   文本字段1
*   文本字段2
*   文本字段3
*   数字字段1
*   日期字段1
*   日期字段2
*   日期字段3
*   备忘录字段1

## 搜索表格

*   过滤器文本字段1
*   过滤器文本字段2
*   FilterTextField3
*   过滤器编号字段1
*   筛选日期字段1
*   过滤日期字段2
*   过滤日期字段3
*   过滤备忘录字段1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:06:24.830

您可以检查空值或强制转换为字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:40:44.220

您当然可以为此花费大量时间制作一个庞大且非常难以调试的 SQL 查询，或者只是跳入 VBA 并编写一些代码来构建您需要的 SQL。

VBA 仅适用于此类场景，其中某些事情要么是不可能的，要么变得太复杂而无法做到。

使用 VBA，您可以使用收集所有数据的初始`SELECT`查询，然后`WHERE`根据搜索表单的内容构造一个子句来过滤它。

例如，我有一个这样的表单，它允许用户输入任何标准来过滤价格列表：

![过滤形式样本](https://i.stack.imgur.com/hfoxP.png)

一些实现这一点的代码可能如下所示：

```
' Call this whenever the use click the Apply button '
Private Sub btApply_Click()
    ' Construct the filter '
    Dim filter As String

    If Not IsBlank(cbSupplierID) Then
        If Not IsBlank(filter) Then filter = filter & " AND "
        filter = filter & "(SupplierID=" & cbSupplierID & ")"
    End If

    If Not IsBlank(txtPartNumber) Then
        If Not IsBlank(filter) Then filter = filter & " AND "
        filter = filter & "(PartNumber LIKE '*" & txtPartNumber & "*')"
    End If

    If Not ckShowLocked Then
        If Not IsBlank(filter) Then filter = filter & " AND "
        filter = filter & "(NOT PriceLocked)"
    End If

    ' ... code snipped, you get the jest ... '

    ' Now re-construct the SQL query '
    Dim sql As String
    sql = "SELECT * FROM Price"

    If Not IsBlank(filter) Then
        sql = sql & " WHERE " & filter
    End If

    SubForm.Form.RecordSource = sql
End Sub 
```

看起来可能有很多代码，但每个块只做一件事，而且调试和维护比将所有内容都塞进一个查询要容易得多。

# theory - 为什么图灵可识别语言的类没有在 Complement 下关闭？

> ID：15863823
> 
> 赞同：0
> 
> 时间：2013-04-07T15:02:24.550
> 
> 标签：theory, turing-machines, computation

我正在研究图灵机，我已经展示了 Turing-Decidable 是如何为 Union、Intersection、Concatenation、Complement 和 Kleene Star 的操作关闭的。接下来我做了一些演示来展示 T-Recognizable 语言是如何为 Union、Intersection、Concatenation 和 Kleene Star 关闭的。

现在我试图回答一个问题，以说明为什么 T-Recognizable 语言的类对于 Complementation 的操作没有关闭，但我无法理解。有人可以解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:10:35.497

1.  T-recog corresponds to semi-decidable (r.e.).

2.  Convince yourself that a language is exaclty then decidable, when both, the language itself and its relative complement are r.e.

3.  Convince yourself that there are r.e. languages that are not decidable (e.g. Halteproblem)

4.  Assume that the class of r.e. languages is closed under complementation and derive a contradiction to the facts mentioned in 2\. and 3.

# jquery - 无法将 jQuery 替换为“img to figure”以对链接（a href）敏感（中断）

> ID：15863840
> 
> 赞同：0
> 
> 时间：2013-04-07T15:04:05.833
> 
> 标签：jquery, image, figure, replacewith

在通过谷歌进行大量研究并阅读了几篇 stackoverflow 帖子之后，我已经用我的 jsfiddle 修补了几个小时，我已经碰壁了。感谢任何指示或帮助！

首先 Stackoverflow 在这里发帖 - 希望我做对了。我喜欢 S&A，很有帮助！

我对 jQuery 有一些了解，但到目前为止还不足以解决这个问题（显然 ;-()

**我正在尝试做什么（和** *jsFiddled*** '）**

*   在名为“section-content”的 div 中定位所有“img”
*   分别提取“src”和“alt”
*   环绕`<figure>`“imgs”
*   如果有一个链接（**.section-content a img**）可以正确显示链接作为 `<figure><a href="URL"><img src="IMAGE" alt="alt"/></a></figure>`
*   将类“.section-image”添加到`<figure>`
*   去掉所有的废话，比如宽度、高度（大约 500 个帖子，所以干净的代码会很好）
*   从 img 中去除旧的 CSS 类和样式

**基本上要改造：**

```
 <img width="174" height="174" src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRJPGfl3z2jsaZckTE4-TuK6bfvbTWk_8QNAStYN4eUWNYbkYeKMA" class="image-style" alt="description"/> 
```

**到**

```
 <figure class="section-image"><img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRJPGfl3z2jsaZckTE4-TuK6bfvbTWk_8QNAStYN4eUWNYbkYeKMA" alt="description"/></figure> 
```

**如果有链接：**

```
 <a href="http://www.google.com"><img width="174" height="174" src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRJPGfl3z2jsaZckTE4-TuK6bfvbTWk_8QNAStYN4eUWNYbkYeKMA" class="image-style" alt="description"/></a> 
```

**到**

```
 <figure class="section-image"><a href="http://www.google.com"><img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcRJPGfl3z2jsaZckTE4-TuK6bfvbTWk_8QNAStYN4eUWNYbkYeKMA" alt="description"/></a></figure> 
```

**到目前为止我做了什么**： - jsFiddle - [http://jsfiddle.net/NGJYy/](http://jsfiddle.net/NGJYy/)

**我面临的问题：** - 适用于非链接图像（没有“a”），但我无法将“.section-image”添加到（中断？！奇怪的是，尝试`return $('<figure class="section-image">', {` 了它不喜欢的 - 图像不会显示那就不再了。

*   如果存在一个链接，它只会惨遭失败并环绕 the ，然后再一次将 HREF 返回为未定义。

**这有效（感谢您的帮助！）**

```
$('.section-content * > img, .section-content * > a:has(img)').wrap('<figure class="section-image" />'); // will target elements to match your original question
  //$('.section-content > *').wrap('<figure class="section-image" />'); // will target all direct child elements
  //$('.section-content > img').wrap('<figure class="section-image" />'); // all direct IMG child elements
  //$('.section-content img').wrap('<figure class="section-image" />'); // all IMG descendants (including grand-children etc)
  //$('.section-content > img, .section-content > a').wrap('<figure class="section-image" />'); // all direct IMG and A child elements

$('.section-content img').each(function()
       {
       $(this).removeAttr('width');
       $(this).removeAttr('height');
       $(this).removeAttr('style');
       $(this).removeAttr('class');
       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:30:30.550

为什么不使用 jQuery 的`wrap()`方法？

```
$('.section-content > *').wrap('<figure class="section-image" />'); 
```

在剥离特定属性时：

```
$('.section-content img').each(function()
       {
       $(this).removeAttr('width');
       $(this).removeAttr('height');
       $(this).removeAttr('style');
       }); 
```

**编辑（根据您的评论）：**

```
 $('.section-content > img, .section-content > a:has(img)') // will target elements to match your original question
  $('.section-content > *') // will target all direct child elements
  $('.section-content > img') // all direct IMG child elements
  $('.section-content img') // all IMG descendants (including grand-children etc)
  $('.section-content > img, .section-content > a') // all direct IMG and A child elements 
```

# c - 从 ruby 访问系统资源

> ID：15863846
> 
> 赞同：0
> 
> 时间：2013-04-07T15:04:45.293
> 
> 标签：c, ruby, gem, raspberry-pi, hd44780

我正在为 Raspberry Pi 的 Hitachi-44780 库编写一个 ruby​​ 包装器。库本身是用 C 编写的。我有以下代码试图打开`/dev/mem`

```
void setup_io()
{

   /* open /dev/mem */
   if ((mem_fd = open("/dev/mem", O_RDWR|O_SYNC) ) < 0) {
      printf("can't open /dev/mem \n");
      exit (-1);
   }
   // Allocate MAP block
   if ((gpio_mem = malloc(BLOCK_SIZE + (PAGE_SIZE-1))) == NULL) {
      printf("allocation error \n");
      exit (-1);
   }
   // Make sure pointer is on 4K boundary
   if ((unsigned long)gpio_mem % PAGE_SIZE)
     gpio_mem += PAGE_SIZE - ((unsigned long)gpio_mem % PAGE_SIZE);
   // Now map it
   gpio_map = (unsigned char *)mmap(
      (caddr_t)gpio_mem,
      BLOCK_SIZE,
      PROT_READ|PROT_WRITE,
      MAP_SHARED|MAP_FIXED,
      mem_fd,
      GPIO_BASE
   );
   if ((long)gpio_map < 0) {
      printf("mmap error %d\n", (int)gpio_map);
      exit (-1);
   }
   gpio = (volatile unsigned *)gpio_map;
} 
```

问题是我如何在不成为超级用户的情况下使用 gem？现在打开内存时它会失败。

# geolocation - 使用 QueryDSL 查询数据库中的近距离点

> ID：15863848
> 
> 赞同：1
> 
> 时间：2013-04-07T15:04:51.250
> 
> 标签：geolocation, querydsl

我的应用程序中有以下实体：

*   `Member`
*   `FamilyAdvertisment`
*   `Address`

在`Member`实体中：

```
@OneToOne(cascade=CascadeType.ALL)
    private Address address;
...
@OneToMany(fetch = FetchType.LAZY, mappedBy = "member")
private List<Advertisement> advertisements; 
```

在`Advertisement`实体中：

```
@NotNull
@ManyToOne(fetch = FetchType.LAZY)
private Member member; 
```

完整`Address`实体：

```
@Entity
public class Address {

    private String formattedAddress;
    private double latitude;
    private double longitude;
} 
```

**我正在尝试查找其成员的地址在所需地址 20KM 范围内的所有 FamilyAdvertisement 实例。**

这是我想出的：

```
QFamilyAdvertisement qFamilyAdvertisement = QFamilyAdvertisement.familyAdvertisement;

NumberPath<Double> lat = qFamilyAdvertisement.member.address.latitude;//NPE
NumberPath<Double> lng = qFamilyAdvertisement.member.address.longitude;
NumberPath<Double> distance = null;
NumberExpression<Double> formula = 
        (acos(cos(radians(Expressions.constant(requiredAddress.getLatitude())))
        .multiply(cos(radians(lat))
        .multiply(cos(radians(lng).subtract(radians(Expressions.constant(requiredAddress.getLongitude())))
        .add(sin(radians(Expressions.constant(requiredAddress.getLatitude())))
        .multiply(sin(radians(lat))))))))
        .multiply(Expressions.constant(6371)));

List<FamilyAdvertisement> foundFamilyAdvertisements = from(qFamilyAdvertisement.member.address).where(formula.as(distance).lt(20)).list(qFamilyAdvertisement); 
```

但是，当我不断获得 NPE 时，似乎我错误地使用了 NumberPath 类。任何人都可以帮我正确查询吗？

**编辑**：我已将我的 FamilyAdvertisement 实体更改如下：

```
@NotNull
@ManyToOne(fetch = FetchType.LAZY)
@QueryInit("address")
private Member member; 
```

我现在得到以下异常：

```
java.lang.IllegalArgumentException: Only root paths are allowed for joins : familyAdvertisement.member.address
    com.mysema.query.DefaultQueryMetadata.ensureRoot(DefaultQueryMetadata.java:208)
    com.mysema.query.DefaultQueryMetadata.validateJoin(DefaultQueryMetadata.java:132)
    com.mysema.query.DefaultQueryMetadata.addJoin(DefaultQueryMetadata.java:118)
    com.mysema.query.DefaultQueryMetadata.addJoin(DefaultQueryMetadata.java:110)
    com.mysema.query.support.QueryMixin.from(QueryMixin.java:161)
    com.mysema.query.jpa.JPQLQueryBase.from(JPQLQueryBase.java:96)
    com.mysema.query.jpa.impl.JPAQuery.from(JPAQuery.java:30)
    org.springframework.data.jpa.repository.support.Querydsl.createQuery(Querydsl.java:88)
    org.springframework.data.jpa.repository.support.QueryDslRepositorySupport.from(QueryDslRepositorySupport.java:94)
    com.bignibou.repository.FamilyAdvertisementRepositoryImpl.performFamilyAdvertisementSearch(FamilyAdvertisementRepositoryImpl.java:64) 
```

第 64 行是这一行：

```
List<FamilyAdvertisement> foundFamilyAdvertisements = from(qFamilyAdvertisement.member.address).where(formula.as(distance).lt(20)).list(qFamilyAdvertisement); 
```

任何线索现在出了什么问题？

**edit2**：我忘了提到`FamilyAdvertisement`扩展`Advertisement`和`member`变量在`Advertisement`.

**edit3**：这是我试图用 QueryDSL 重现的 SQL：

```
select * from family_advertisement a inner join member m
on a.member = m.id
where m.address
in (
SELECT id 
FROM address where 
 6371 * 
acos( cos( radians(48.8558966) ) 
* cos( radians( latitude ) ) 
* cos( radians( longitude ) - radians(2.3622728) ) 
+ sin( radians(48.8558966) )
* sin( radians( latitude ) )
) < 20); 
```

我尝试过这样的事情：

```
List<FamilyAdvertisement> foundFamilyAdvertisements = from(qFamilyAdvertisement).where(qFamilyAdvertisement.member.address.in(

                new JPASubQuery().from(QAddress.address).where(formula.lt(20)))

                ).list(qFamilyAdvertisement); 
```

上面给出了公式，但我不确定如何在 QueryDSL 中表达不相关的子查询，尤其是上面的 in 运算符似乎有问题......

**编辑4**：

以下子查询现在可以工作：

```
List<FamilyAdvertisement> foundFamilyAdvertisements = 
        from(qFamilyAdvertisement).where(qFamilyAdvertisement.member.address.in(new JPASubQuery().from(QAddress.address).where(formula.lt(20)).list(QAddress.address))).list(qFamilyAdvertisement); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:33:31.300

这条路径对于急切初始化来说太长了

```
qFamilyAdvertisement.member.address.latitude; 
```

请在此处阅读有关 Querydsl [http://www.querydsl.com/static/querydsl/3.1.0/reference/html/ch03s04.html#d0e1699中的路径初始化的更多信息](http://www.querydsl.com/static/querydsl/3.1.0/reference/html/ch03s04.html#d0e1699)

# python - 如何在 Python 中仅在球击中球拍时让球反弹，Pygame（突破娱乐）

> ID：15863858
> 
> 赞同：0
> 
> 时间：2013-04-07T15:05:29.937
> 
> 标签：python, python-3.x, pygame, breakout

谁能帮我这个？我无法制作一种简单的方法来检测球是否击中桨然后通过更改 rect_change_y 变量将其反弹。这是有效的代码，但球在击中游戏底部时不会与桨交互或死亡。

```
import pygame

black = ( 0, 0, 0)
white = ( 255, 255, 255)
green = ( 0, 255, 0)
red = ( 255, 0, 0)

rect_x = 10
rect_y = 250

pad_x = 350
pad_y = 480

ball = 3

rect_change_x = 1
rect_change_y = 1

pad_x_c = 0

pygame.init()

size=[700,500]
screen=pygame.display.set_mode(size)

pygame.mouse.set_visible(0)

pygame.display.set_caption("Breakout Recreation WIP")

done=False

clock=pygame.time.Clock()
# -------- Main Program Loop -----------
while ball != 0:
    # ALL EVENT PROCESSING SHOULD GO BELOW THIS COMMENT
    for event in pygame.event.get(): # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop
        keys = pygame.key.get_pressed()  #checking pressed keys
        if keys[pygame.K_LEFT]:
            pad_x_c -= 2
        elif keys[pygame.K_RIGHT]:
            pad_x_c += 2  
        else :
            pad_x_c = 0
    # ALL EVENT PROCESSING SHOULD GO ABOVE THIS COMMENT
    # ALL GAME LOGIC SHOULD GO BELOW THIS COMMENT
    # ALL GAME LOGIC SHOULD GO ABOVE THIS COMMENT
    # ALL CODE TO DRAW SHOULD GO BELOW THIS COMMENT
    # First, clear the screen to white. Don't put other drawing commands
    # above this, or they will be erased with this command.
    screen.fill(black)
    # Draw the rectangle
    pygame.draw.rect(screen,white,[rect_x,rect_y,15,15])
    pygame.draw.rect(screen,white,[pad_x,pad_y,50,10])
    # Move the rectangle starting point
    rect_x += rect_change_x
    rect_y += rect_change_y
    pad_x += pad_x_c
    # Bounce the ball if needed
    if rect_y > 480 or rect_y < 10:
        rect_change_y = rect_change_y * -1
    if rect_x > 680 or rect_x < 5:
        rect_change_x = rect_change_x * -1    
    if pad_x <= 5 :
        pad_x_c = 0
    if pad_x >= 645 :
        pad_x_c = 0
    # ALL CODE TO DRAW SHOULD GO ABOVE THIS COMMENT

    pygame.display.flip()

    clock.tick(100)

pygame.quit () 
```

然后这里是应该工作的代码（对我来说）但没有。

```
import pygame

black = ( 0, 0, 0)
white = ( 255, 255, 255)
green = ( 0, 255, 0)
red = ( 255, 0, 0)

rect_x = 10
rect_y = 250

pad_x = 350
pad_y = 480

ball = 3

rect_change_x = 1
rect_change_y = 1

pad_x_c = 0

pygame.init()

size=[700,500]
screen=pygame.display.set_mode(size)

pygame.mouse.set_visible(0)

pygame.display.set_caption("Breakout Recreation WIP")

done=False

clock=pygame.time.Clock()
# -------- Main Program Loop -----------
while ball != 0:
    # ALL EVENT PROCESSING SHOULD GO BELOW THIS COMMENT
    for event in pygame.event.get(): # User did something
        if event.type == pygame.QUIT: # If user clicked close
            done=True # Flag that we are done so we exit this loop
        keys = pygame.key.get_pressed()  #checking pressed keys
        if keys[pygame.K_LEFT]:
            pad_x_c -= 2
        elif keys[pygame.K_RIGHT]:
            pad_x_c += 2  
        else :
            pad_x_c = 0
    # ALL EVENT PROCESSING SHOULD GO ABOVE THIS COMMENT
    # ALL GAME LOGIC SHOULD GO BELOW THIS COMMENT
    # ALL GAME LOGIC SHOULD GO ABOVE THIS COMMENT
    # ALL CODE TO DRAW SHOULD GO BELOW THIS COMMENT
    # First, clear the screen to white. Don't put other drawing commands
    # above this, or they will be erased with this command.
    screen.fill(black)
    # Draw the rectangle
    pygame.draw.rect(screen,white,[rect_x,rect_y,15,15])
    pygame.draw.rect(screen,white,[pad_x,pad_y,50,10])
    # Move the rectangle starting point
    rect_x += rect_change_x
    rect_y += rect_change_y
    pad_x += pad_x_c
    # Bounce the ball if needed
    if rect_y == pad_y:
        if rect_x == pad_x:
            rect_change_y = rect_change_y * -1
    if rect_y > 490:
        ball -= 1
        rect_y = 250
        rect_x = 10
        rect_change_x = 1
        rect_change_y = 1
    if rect_y < 10:
        rect_change_y = rect_change_y * -1
    if rect_x > 680 or rect_x < 5:
        rect_change_x = rect_change_x * -1       
    if pad_x <= 5 :
        pad_x_c = 0
    if pad_x >= 645 :
        pad_x_c = 0
    # ALL CODE TO DRAW SHOULD GO ABOVE THIS COMMENT

    pygame.display.flip()

    clock.tick(100)

pygame.quit () 
```

最后，关于如何制作积木并对它们做同样的事情的任何建议，除了摧毁它们而不是球？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T16:35:43.543

您可以使用`Rect`该类来表示球和桨，还可以利用该类提供的方法：

*   [`Rect.move_ip`](http://www.pygame.org/docs/ref/rect.html#pygame.Rect.move_ip)将矩形移动到位：

    ```
    myrect = pygame.Rect(0, 0, 10, 10)
    myrect.move_ip(100, 50) 
    ```

    *myrect*左上角位于 (100, 50) 并保持相同的宽度和高度。

*   [`Rect.clamp_ip`](http://www.pygame.org/docs/ref/rect.html#pygame.Rect.clamp_ip)以确保矩形都在屏幕内。

    ```
    myrect = pygame.Rect(100, 0, 10, 10)
    bounds = pygame.Rect(0, 0, 50, 50)
    myrect.clamp_ip(bounds) 
    ```

    *myrect*的左上角位于 (40, 0) 处，其右下角位于 (10, 50) 处，位于*边界*矩形内。

*   [`Rect.colliderect`](http://www.pygame.org/docs/ref/rect.html#pygame.Rect.colliderect)检查球和桨是否碰撞。

    ```
    myrect = pygame.Rect(0, 0, 10, 10)
    another = pygame.Rect(5, 5, 10, 10)
    print(myrect.colliderect(another)) # 1 
    ```

    由于*myrect*和*另一个*重叠，调用的`colliderect`时候返回1，说明两个矩形有碰撞。

* * *

我真的很喜欢 Pygame，所以我不介意应用这些建议重写你的程序。希望能帮助到你：

```
import pygame

# Constants
WIDTH = 700
HEIGHT = 500
SCREEN_AREA = pygame.Rect(0, 0, WIDTH, HEIGHT)
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)

# Initialization
pygame.init()
screen = pygame.display.set_mode([WIDTH, HEIGHT])
pygame.mouse.set_visible(0)
pygame.display.set_caption("Breakout Recreation WIP")
clock = pygame.time.Clock()

# Variables
paddle = pygame.Rect(350, 480, 50, 10)
ball = pygame.Rect(10, 250, 15, 15)
paddle_movement_x = 0
ball_direction = (1, 1)
balls = 3
done = False

while not done and balls > 0:

    # Process events
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            done = True
        keys = pygame.key.get_pressed()
        if keys[pygame.K_LEFT]:
            paddle_movement_x = -2
        elif keys[pygame.K_RIGHT]:
            paddle_movement_x = 2
        else:
            paddle_movement_x = 0

    # Move paddle
    paddle.move_ip(paddle_movement_x, 0)
    paddle.clamp_ip(SCREEN_AREA)

    # Move ball
    ball.move_ip(*ball_direction)
    if ball.right > WIDTH or ball.left < 0:
        ball_direction = -ball_direction[0], ball_direction[1]
    elif ball.top < 0 or ball.bottom > HEIGHT or paddle.colliderect(ball):
        ball_direction = ball_direction[0], -ball_direction[1]
    ball.clamp_ip(SCREEN_AREA)

    # Redraw screen
    screen.fill(BLACK)
    pygame.draw.rect(screen, WHITE, paddle)
    pygame.draw.rect(screen, WHITE, ball)
    pygame.display.flip()
    clock.tick(100)

pygame.quit() 
```

# jquery - 使用 Jquery ( View-Source ) 显示内容

> ID：15863859
> 
> 赞同：0
> 
> 时间：2013-04-07T15:05:31.490
> 
> 标签：jquery, ajax, yql

我正在使用以下代码来显示使用 Jquery/Ajax 的远程网站之一的内容。
代码效果很好，问题是当我在浏览器中查看源代码时，实际内容没有显示。只显示 Jquery 代码。所以我想做的是当我在浏览器中查看源代码时，应该显示实际内容，同时牢记 SEO。

这可能吗 ？

```
<script type="text/javascript" language="javascript">
    $(document).ready(function() {
        var directoryName = 'anthropology';
        $.ajax({
            type: 'GET',
            url: "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fd4426411.u92.gohsphere.com%2F%22%20and%20xpath%3D%22%2F%2Fdiv%5B%40id%3D'page'%5D%22",
            dataType: 'html',
            success: function(data) {
                $(data).find('a').attr('href', function(_, href) {
                return href.replace('http://d4426411.u92.gohsphere.com/', 'http://www.abc.com/blog/default.htm/')
                }).end().appendTo('#content_area');                     
            }
        });
    });
</script>

</head>

<body>
<div id="space"><br /></div>
<div id="content_area">
</div> 
```

# c# - c#方法中的多返回类型

> ID：15863869
> 
> 赞同：2
> 
> 时间：2013-04-07T15:07:12.930
> 
> 标签：c#, overloading, return-type

我有一个（字符串，对象）字典，对象（类）有一些值，包括由枚举定义的数据类型。我需要一个应该返回字典项值的 GetItemValue 方法。所以返回类型必须是项目对象中定义的类型。

```
Class Item
{
    String Name;
    DataValueType DataType;
    Object DataValue;
}

private Dictionary<string, Item> ItemList = new Dictionary<string, Item>();

void Main()
{
    int value;

    ItemList.Add("IntItem", new Item("IntItem", DataValueType.TInt, 123));
    value = GetItemValue("IntItem"); // value = 123
} 
```

什么样的解决方案可以克服这个问题？

此致，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:09:03.187

您可以使用[泛型类](http://msdn.microsoft.com/en-us/library/sz6zd40f%28v=vs.80%29.aspx)

```
Class Item<T>
{
    String Name;
    T DataTypeObject;
    Object DataValue;

    public T GetItemValue()
    { 
        //Your code
        return DataTypeObject;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T15:36:36.373

更好的解决方案是引入一个让所有类都实现的接口。请注意，接口不一定要指定任何行为：

```
public interface ICanBePutInTheSpecialDictionary {
}

public class ItemTypeA : ICanBePutInTheSpecialDictionary {
    // code for the first type
}

public class ItemTypeB : ICanBePutInTheSpecialDictionary {
    // code for the second type
}
// etc for all the types you want to put in the dictionary 
```

把东西放进字典：

```
var dict = new Dictionary<string, ICanBePutInTheSpecialDictionary>();

dict.add("typeA", new ItemTypeA());
dict.add("typeB", new ItemTypeB()); 
```

当您需要将对象转换为特定类型时，您可以使用`if`--`elseif`块，例如

```
var obj = dict["typeA"];
if (obj is ItemTypeA) {
    var a = obj as ItemTypeA;
    // Do stuff with an ItemTypeA. 
    // You probably want to call a separate method for this.
} elseif (obj is ItemTypeB) {
    // do stuff with an ItemTypeB
} 
```

或使用反射。根据您有多少选择，任何一个都可能是可取的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:20:29.900

如果你有一个“混合包”，你可以做这样的事情......

```
class Item<T>
{
    public String Name { get; set; }
    public DataValueType DataType { get; set; }
    public T DataValue { get; set; }
}
class ItemRepository
{
    private Dictionary<string, object> ItemList = new Dictionary<string, object>();

    public void Add<T>(Item<T> item) { ItemList[item.Name] = item; }
    public T GetItemValue<T>(string key)
    {
        var item = ItemList[key] as Item<T>;
        return item != null ? item.DataValue : default(T);
    }
} 
```

并像...一样使用它

```
var repository = new ItemRepository();
int value;
repository.Add(new Item<int> { Name = "IntItem", DataType = DataValueType.TInt, DataValue = 123 });
value = repository.GetItemValue<int>("IntItem"); 
```

如果您只有几种类型-最好使用`Repository<T>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T18:32:00.357

我找到了我想要的解决方案。感谢谷歌叔叔。谢谢大家的关心。

```
 public dynamic GetValue(string name)
 {
     if (OpcDataList[name].IsChanged)
     {
         OpcReflectItem tmpItem = OpcDataList[name];
         tmpItem.IsChanged = false;
         OpcDataList[name] = tmpItem;
     }

     return Convert.ChangeType(OpcDataList[name].ItemValue.Value, OpcDataList[name].DataType);
 } 
```

# azure - ACS 管理服务

> ID：15863870
> 
> 赞同：1
> 
> 时间：2013-04-07T15:07:16.303
> 
> 标签：azure, acs

我已经（手动）在根级别创建了一个名为“testtopic”的主题。我正在尝试以编程方式从 ACS 管理服务获取 SWT，然后使用该 SWT 向“testtopic”主题发送消息。要检索 SWT，我使用以下代码：

```
 var client = new WebClient();
    client.BaseAddress = string.Format("https://connectedcloudapps.accesscontrol.windows.net");

    var values = new NameValueCollection
    {
    {"wrap_name", "publisher"},
    {"wrap_password", "password"},
    {"wrap_scope", "https://connectedcloudapps.servicebus.windows.net/testtopic/"}
    };

    // WebClient takes care of the URL Encoding
    byte[] responseBytes = client.UploadValues("WRAPv0.9", "POST", values);

    string response = Encoding.UTF8.GetString(responseBytes);
    var token = HttpUtility.UrlDecode(response
    .Split('&')
    .Single(value => value.StartsWith("wrap_access_token=",StringComparison.OrdinalIgnoreCase))
    .Split('=')[1]); 
```

以上工作正常，因为我收到了 SWT 作为回报。这么好……我想

以下是服务标识、规则等的配置：

```
Service identity
Name: publisher
Type:Password
Effective Date: 4/5/2013
Expiration Date: 4/5/2014

Rule group:
Name: publisherrule
Used by the following relying party applications:publisher rp
Rules (net.windows.servicebus.action):
IF
Input claim issuer: Access Control Service
Input claim type: nameidentifier
Input claim value: publisher
THEN
Output claim type:net.windows.servicebus.action
Output claim value:Send

Relying Party Applications
Name: publisher rp
realm:https://connectedcloudapps.servicebus.windows.net/testtopic
Return URL: <empty>
Error URL: <empty>
Token format: SWT
Token lifetime (secs):600
Authentication Settings
Identity providers:
<No Identity providers selected>

Rule groups:
Select the rule groups to use for this relying party application when processing claims.
'pubishrule' is selected via checkbox
Token Signing Keys:
Service Namespace Symmetric Key 
```

配置完所有内容后，我使用以下内容，我已经更改了很多次，但无法将其发送到主题：

```
var tokenProvider = TokenProvider.CreateSimpleWebTokenProvider(token); //token is what was retrieved in above code
var factory = MessagingFactory.Create(ServiceBusEnvironment.CreateServiceUri("sb", "connectedcloudapps", string.Empty), tokenProvider);
var sender = factory.CreateTopicClient("testtopic");
var msg = new BrokeredMessage("Yahoooooooo");
try
{
    sender.Send(msg);
} 
```

我收到的错误是：

> [{System.UnauthorizedAccessException：令牌提供程序在访问“ https://connectedcloudapps-sb.accesscontrol.windows.net/WRAPv0.9/](https://connectedcloudapps-sb.accesscontrol.windows.net/WRAPv0.9/) ”时无法提供安全令牌。令牌提供程序返回消息：'错误：代码：401：子代码：T2002：详细信息：受众无效。：TraceID：bcd601fc-ac1b-4c23-bd85-67d8aeda83df：TimeStamp：2013-04-07 17:13:58Z'。[---> System.IdentityModel.Tokens.SecurityTokenException：令牌提供者在访问“ https://connectedcloudapps-sb.accesscontrol.windows.net/WRAPv0.9/](https://connectedcloudapps-sb.accesscontrol.windows.net/WRAPv0.9/) ”时无法提供安全令牌'。令牌提供程序返回消息：'错误：代码：401：子代码：T2002：详细信息：受众无效。：TraceID：bcd601fc-ac1b-4c23-bd85-67d8aeda83df：TimeStamp：2013-04-07 17:13:58Z'。---> System.Net.WebException：远程服务器返回错误：（401）未经授权。在 System.Net.HttpWebRequest.GetResponse() 在 Microsoft.ServiceBus.TokenProviderHelper.GetAccessTokenCore(Uri requestUri, String applyTo, String requestToken, String simpleAuthAssertionFormat, TimeSpan timeout, String& expiresIn) --- 内部异常堆栈跟踪结束--- 在Microsoft.ServiceBus.TokenProviderHelper.ThrowException（Uri requestUri，WebException 异常）在 Microsoft.ServiceBus.TokenProviderHelper.GetAccessTokenCore（Uri requestUri，字符串 applyTo，字符串 requestToken，字符串 simpleAuthAssertionFormat，`1 entityType, String transferDestinationEntityName) at Microsoft.ServiceBus.Messaging.Sbmp.CreateSenderLinkSettings..ctor(SbmpMessagingFactory messagingFactory, String entityName, Nullable`1 entityType）在 Microsoft.ServiceBus.Messaging.Sbmp.SbmpTopicClient.OnBeginCreateSender（时间跨度超时，AsyncCallback 回调，对象状态）在 Microsoft.ServiceBus.Messaging.TopicClient.<>c__DisplayClass2.b__0（AsyncCallback c，Object s）在 Microsoft.ServiceBus .Messaging.OpenOnceManager.OpenOnceManagerAsyncResult `1.BeginOperation() at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult`1.OpenComplete(IAsyncResult result) at Microsoft.ServiceBus.Common.AsyncResult.SyncContinue(IAsyncResult result) at Microsoft.ServiceBus.Messaging.OpenOnceManager.OpenOnceManagerAsyncResult `1..ctor(OpenOnceManager openOnceManager, TimeSpan openTimeout, AsyncCallback callback, Object state, Func`3 beginOperation, EndOperation `1 endOperation) at Microsoft.ServiceBus.Messaging.OpenOnceManager.Begin[T](AsyncCallback callback, Object state, Func`3 beginOperation, Func`2 endOperation)
> 在 Microsoft.ServiceBus.Messaging.TopicClient.ThrowIfSenderNull(String operationName) 在 Microsoft.ServiceBus.Messaging.TopicClient.EnsureCreateInternalSender() 在 Microsoft.ServiceBus.Messaging.TopicClient.BeginCreateSender(TimeSpan timeout, AsyncCallback callback, Object state) .Messaging.TopicClient.Send(BrokeredMessage message) at Console.Program.PostToTopic(Uri uri, String token) in c:\Poc City\AirConCloud\Console\Program.cs:line 56}

归根结底，我将拥有很多很多服务身份，每个服务身份都需要访问该主题，或者具有不同的访问权限。

1.  上述方法是否正确，我只缺少次要的管道细节？
2.  这行不通，需要重新设计吗？

如果是 1，是什么问题，如果是 2，应该怎么做。

提前致谢

# php - mysql中的字符编码问题

> ID：15863872
> 
> 赞同：1
> 
> 时间：2013-04-07T15:07:22.717
> 
> 标签：php, mysql, character-encoding

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:13:35.553

It does not work because you got this broken during data fetch and you are setting display encoding - it's already too late. Simply ensure correct encoding during connection by using either using proper method like `mysqli_set_charset()` or do query `SET NAMES UTF8` just after your connect to DB

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:17:53.837

Depending on the method you are using to connect to the DB, you should be specifying the charset.

With PDO, you can specify the charset in `PDO::__construct()`, such as: `charset=UTF-8`

Otherwise you have [`mysqli::set_charset()`](http://php.net/manual/en/mysqli.set-charset.php) for MySQLi, or god forbid you're still using `mysql_*` functions there's [`mysql_set_charset()`](http://php.net/manual/en/function.mysql-set-charset.php)

# jquery - JQuery：到达当前div末尾后用鼠标滚轮滚动到下一个div

> ID：15863873
> 
> 赞同：4
> 
> 时间：2013-04-07T15:07:25.443
> 
> 标签：jquery, scrollto, mousewheel

我正在尝试从有点像页面的 div 构建网站。因此，有多个 div 的最小高度为 100% 的浏览器窗口彼此重叠。我正在尝试使导航工作，以便用户可以使用鼠标滚轮滚动到下一个 div。我发现了这段有用的代码：

[http://jsfiddle.net/Mottie/Vk7gB/](http://jsfiddle.net/Mottie/Vk7gB/)

```
$('#nav').onePageNav();

var $current, flag = false;

$('body').mousewheel(function(event, delta) {
    if (flag) { return false; }
    $current = $('div.current');

    if (delta > 0) {
        $prev = $current.prev();

        if ($prev.length) {
            flag = true;
            $('body').scrollTo($prev, 1000, {
                onAfter : function(){
                    flag = false;
                }
            });
            $current.removeClass('current');
            $prev.addClass('current');
        }
    } else {
        $next = $current.next();

        if ($next.length) {
            flag = true;
            $('body').scrollTo($next, 1000, {
                onAfter : function(){
                    flag = false;
                }
            });
            $current.removeClass('current');
            $next.addClass('current');
        }
    }

    event.preventDefault();
}); 
```

但是你可以看到当内容长于浏览器窗口时会出现问题。我希望它能够正常工作，以便如果当前 div 长于浏览器窗口滚动正常工作，但它应该停止在 div 的底部，然后下次一直滚动到下一个 div。有没有办法做到这一点？

我希望这有点道理..

谢谢，

-米卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T17:53:57.230

[http://jsfiddle.net/Vk7gB/261/](http://jsfiddle.net/Vk7gB/261/)

不是一个完整的解决方案，但它会让你走上正确的道路。

```
$('#nav').onePageNav();

var $current, flag = false, b = $('body');

b.mousewheel(function(event, delta) {
if (flag) { return false; }
$current = $('div.current');

var $next;
if (delta > 0) $next = $current.prev();
else $next = $current.next();

var scrollTop = b.scrollTop();
var elHeight = $current.height();
var nextOffset = $next.offset().top;
var avHeight = screen.availHeight;

console.log(scrollTop, nextOffset, elHeight, avHeight);
if(scrollTop + elHeight - avHeight < nextOffset){
    return true;
}

if ($next.length) {
    flag = true;
    $next.scrollTop();        
    $('body').scrollTo($next, 1000, {
        onAfter : function(){
            flag = false;
        }
    });
    $current.removeClass('current');
    $next.addClass('current');
}

event.preventDefault();
return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-02T09:58:46.537

在[本文中](https://stackoverflow.com/a/21452103/308578)，您可以找到类似的解决方案，我更喜欢使用它而不是您的想法

你可以定义部分，如果可能的话，我建议你让你的页面适合浏览器

[这](https://github.com/peachananr/onepage-scroll)是你可以使用的 github js 库

[这](http://www.thepetedesign.com/demos/onepage_scroll_demo.html)是一个对您来说清晰透明的在线演示

# php - SMF [img] bbcode 到 html

> ID：15863874
> 
> 赞同：-1
> 
> 时间：2013-04-07T15:07:33.230
> 
> 标签：php, bbcode, smf

我想将 SMF 的 [img] bbcode 转换为 HTML，它看起来像这样：

```
[img width=600 height=300]url[/img] 
```

我的脚本是这样的，但不起作用，怎么了？

```
$text = preg_replace("/\[img  width=(.*) height=(.*)\](.*)\[\/img\]/Usi", "<img src=\"\\3\" class=\"image\" style=\"width:\\1; height:\\2\" />", $text); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-07T15:10:40.043

你的外卡很贪心。使用`.*?`代替`.*`

# javascript - 正确使用“

> ID：15863875
> 
> 赞同：0
> 
> 时间：2013-04-07T15:07:37.510
> 
> 标签：javascript, html

我将如何打印出引号，如下所示：

史蒂夫说“你好世界”，而不是史蒂夫说你好世界？

```
var test = function(who,said) {
    alert(who + said);
}
test("Steve said ", "hello world"); 
```

我可以在这里看到答案涉及另一个答案中的“&”，但不知道如何在这里应用它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:09:01.593

可以选择转义双引号：

```
test("Steve said ", "\"hello world\""); 
```

或者您可以使用单引号：

```
test("Steve said ", '"hello world"'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:09:58.283

使用单引号可以为您节省一些反斜杠。

```
test("Steve said ", '"hello world"'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:12:55.710

您可以将双引号放在单引号中：

```
alert(who + '"' + said + '"'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T15:13:10.087

你可以稍微修改你的功能

```
var test = function(who,said) {
    alert(who + '"' + said + '"');
}
test("Steve said ", "hello world"); 
```

如果你正在`alert()`输出输出。或将引号替换为`&quot;`if 将其放在页面上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-07T17:53:25.113

要将引号包含到包含英语文本的字符串中，请使用英语引号。它们不会对 JavaScript 中的字符串语法造成任何问题，因为它们与用作字符串分隔符的 Ascii 字符不同。但是您需要确保已正确声明包含代码的文件的字符编码。

对于常见的美式英语风格，您可以使用

```
test("Steve said ", "“hello world”"); 
```

对于常见的英式英语风格，您可以使用

```
test("Steve said ", "‘hello world’"); 
```

如果您不能直接使用正确的标点符号作为字符，由于某种原因，您可以使用 JavaScript 转义，例如对于美国风格，您可以使用

```
test("Steve said ", "\u201chello world\u201d"); 
```

# animation - D3多折线图-奇怪的动画

> ID：15863877
> 
> 赞同：2
> 
> 时间：2013-04-07T15:07:45.620
> 
> 标签：animation, d3.js, linechart

我创建了一个带有简单动画的多折线图。一开始没有数据，点击按钮后，新值被模拟，“移动”线离开。使用“移位”为移动设置动画。

当线条“填充”整个图形区域（这意味着所有 x 值都有 y 值）然后线条以不同的方式动画时，就会出现问题。看起来 y 值在曲线上是动画的，而不是向左滑动。

动画适用于两个轴：

```
svg.selectAll("g .x.axis")
  .transition()
  .duration(500)
  .ease("linear")
  .call(xAxis);
svg.selectAll("g .y.axis")
  .transition()
  .duration(500)
  .ease("linear")
  .call(yAxis); 
```

而不是行（[这段代码](http://bl.ocks.org/benjchristensen/2657838)对我帮助很大）

```
svg.selectAll("g .city path")
  .data(processedData).transition().duration(500)
  .ease("linear")
  .attr("d", function(d, i) { return line(d.values); })
  .attr("transform", null); 
```

Fiddle 可[在此处](http://jsfiddle.net/QqdYE/10/)访问。

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T20:30:40.203

问题是当数据太多时您正在删除数据。d3 将数据与现有数据（当您调用`.data()`函数时）匹配的方式是按索引。也就是说，您传递给的数组中的第一个元素`.data()`与第一个绑定的数据元素匹配，而不管数据的实际外观如何。

在您的情况下发生的情况是，一旦您开始删除数据，各个数据点就会更新而不是移动。这就是你看到“曲线”的原因——它将每个数据点更新为其新值，即右侧数据点之前的值。

使用您当前拥有的代码，这很难解决，因为您没有明确匹配各个行的数据。我建议您查看[嵌套选择](http://bost.ocks.org/mike/nest/)，它允许您绘制多条线并仍然显式匹配各个线的数据。关键是使用可选的第二个参数来`.data()`提供一个函数，告诉它如何匹配数据（参见[文档](https://github.com/mbostock/d3/wiki/Selections#wiki-data)）。这样你就可以告诉它一些数据点消失了，而其他的应该被移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:13:18.050

您可以分两步解决这个问题。

在**函数 update()**中：重绘**.data()**并在末尾使用新点但不删除第一个旧点（带动画），就像每个键在转换前后都是相同的。

在**函数 update()**结束时：您可以删除旧值并重绘**.data()**而不使用动画。

# javascript - 在按钮单击时隐藏一个 div 跟随 css 动画

> ID：15863888
> 
> 赞同：1
> 
> 时间：2013-04-07T15:08:45.607
> 
> 标签：javascript, html, css

目前，我在按钮单击时触发了 CSS3 动画，并且一切正常。它是一个代表植物生命周期的动画，分 5 个阶段工作，每个阶段显示一个图像和相应的文本。

但是，如果我单击第 1 阶段，然后单击第 2 阶段，并想再次单击第 1 阶段以再次查看支持文本，同时从第 2 阶段隐藏图像，我似乎无法做到。

JSFiddle 为您提供方便：

[http://jsfiddle.net/YUC3d/](http://jsfiddle.net/YUC3d/)

当前阶段的实时视图：

[http://www.mattmeadows.info/MFTW2/howplantsgrow.html](http://www.mattmeadows.info/MFTW2/howplantsgrow.html)

Javascript：

```
$(function() {  
    $("#stage1").click(function() {  
        $("#Seed1,#infoBox1").toggleClass("animate")   
    });  
    $("#stage2").click(function() {  
        $("#Seed2,#infoBox2").toggleClass("animate")   
    });  
    $("#stage3").click(function() {  
        $("#Seed3,#infoBox3").toggleClass("animate")   
    });  
    $("#stage4").click(function() {  
        $("#Seed4,#infoBox4").toggleClass("animate")   
    });
    $("#stage5").click(function() {  
        $("#Seed5,#infoBox5").toggleClass("animate")   
    });
}); 
```

HTML 段被动画化：

```
<div id="Seed1" class="target">
</div> <!-- end of Seed1 -->
<div id="infoBox1">
Text for stage 1 Text for stage 1 Text for stage 1 Text for stage 1 Text for stage 1 
</div> 
```

（总共有5个这样的div组合

CSS：

```
@-webkit-keyframes show
{
  0%   { opacity: 0; }
  100% { opacity: 1; }
}

#Seed1
{
opacity:0;
}

#Seed1.animate
{
-webkit-animation-name: show;
-webkit-animation-duration: 2s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 0;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
}

#infoBox1
{
width: 400px;
height: 100px;
background:white;
position: absolute;
bottom: 425px;
margin-left: 25px;
border-radius: 10px;
opacity:0;
}

#infoBox1.animate
{
-webkit-animation-name: show;
-webkit-animation-duration: 2s;
-webkit-animation-timing-function: ease;
-webkit-animation-iteration-count: 1;   
-webkit-animation-direction: normal;
-webkit-animation-delay: 0;
-webkit-animation-play-state: running;
-webkit-animation-fill-mode: forwards;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:18:13.730

假设 'animate' 是 'on' 类（似乎是），尝试创建一个方法来重置所有内容，然后为特定元素设置动画：

```
function resetState() {
     //you can use classes here to make it neater
     $("#Seed1,#infoBox1,#Seed2,#infoBox2,#Seed3,#infoBox3,#Seed4,#infoBox4,#Seed5,#infoBox5").removeClass("animate");  
} 
```

示例使用：

```
$("#stage1").click(function() {  
    resetState();
    $("#Seed1,#infoBox1").toggleClass("animate");   
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:59:08.390

假设 'animate' 是 'on' 类（似乎是），尝试创建一个方法来重置所有内容，然后为特定元素设置动画：

```
function setStage(stage) {

     var numberOfStages = 5;

     for (i=1; i <= numberOfStages; i++) {
         if (i == stage) {
             $("#infoBox" + i).addClass("animate");
             $("#Seed" + i).addClass("animate");
         } else if (i < stage) {
             $("#infoBox" + i).removeClass("animate");
             $("#Seed" + i).addClass("animate");
         } else {
             $("#infoBox" + i).removeClass("animate");
             $("#Seed" + i).removeClass("animate");
         }
     }

} 
```

示例使用：

```
$(document).ready(function() {

    $("#stage1").click(function() {  
        setStage(1);  
    }); 

    //stage 2,3,5 etc...

    $("#stage4").click(function() {  
        setStage(4);  
    }); 

}); 
```

# javascript - 未捕获的类型错误：无法设置未定义的属性“文本”

> ID：15863896
> 
> 赞同：3
> 
> 时间：2013-04-07T15:09:34.437
> 
> 标签：javascript, jquery

运行以下命令时出现错误“Uncaught TypeError: Cannot set property 'text' of undefined”

```
var years= new Array(113);
for(i=0;i<113;i++){
years[i]["text"]=i+1900;
years[i]["value"]=i+1900;
} 
```

基本上，我希望用循环生成这样的东西

```
var years= [
        { text: "1990", value: 1990, },
        { text: "1991", value: 1991, }, //till 2012
]; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T15:11:41.483

你想要文字符号：

```
var years= new Array(113);
for(i=0;i<113;i++){
    years[i] = {text: String(i + 1900), value: i + 1900};
} 
```

您收到错误的原因是您从未为 分配任何内容`years[i]`，但您试图在表达式中*使用*`years[i]["text"]`它（这意味着“`i`从`years`对象中获取具有名称的属性，然后从中获取属性`"text"`）。

请注意，尝试在 JavaScript 中为标准数组预分配空间没有任何好处，因为 JavaScript 标准数组[根本不是真正的数组](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)。所以也许：

```
var years= [];
for(i=0;i<113;i++){
    years[i] = {text: String(i + 1900), value: i + 1900};
} 
```

同样，您可以从`1900`（包含）循环到`2013`（排除），而不是在循环中进行所有添加：

```
var years= [];
for(i=1900;i<2013;i++){
    years.push({text: String(i), value: i});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:14:37.407

years[i] 未设置为任何值 ( `years[i] == undefined`)，因此您无法访问其上的文本。尝试以下方法：

```
var years = new Array(113);
for(i=0; i < 113; i++) {
    years[i] = {"text": i+1900, "value": i+1900};
} 
```

或者

```
var years = new Array();
for(i=0; i < 113; i++) {
    years.push({"text": i+1900, "value": i+1900});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:15:09.367

您的问题已经得到解答，但我建议使用数组文字符号而不是显式构造函数调用。

```
var years = [];

for (var i = 0; i < 133; ++i)
{
    years[i] = {
        text: (i + 1900).toString(),
        value: i + 1900
    };
} 
```

# java - Hibernate 类的模拟对象

> ID：15863900
> 
> 赞同：0
> 
> 时间：2013-04-07T15:09:47.283
> 
> 标签：java, testing, mocking, easymock

是否可以为 Hiberate 的本机类制作 Mock 对象（我使用 easymock）？例如查询？如果是，我该怎么做？

以下是部分测试代码：

```
@Mock
 private SessionFactory sessionFactory;

 @Mock
 protected Session session;

 @Mock
 protected Query query;

 @Before
 public void setUp() {
***
  pageService.setQuery(query);
  pageService.setSession(session);
 }

String hqlUniquenessCheck - it is a select request
  expect(sessionFactory.getCurrentSession().createQuery(hqlUniquenessCheck)).andReturn(query); 
```

但是在线期望***我得到了java.lang.NullPointerException。有什么问题？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:40:05.557

Hibernate 类不是本地类。你可以模拟一个休眠类，就像你的应用程序中的任何其他类一样。

本机类是具有`native`java 关键字的类。这意味着它们包含不是 java 代码的字节码。hibernate 的所有代码都是 java 代码，可以从 hibernate.org 获得。（如果您使用的是 maven，则可以使用`-DdownloadSources=true`，或在 IDE 中设置等效设置。这将显示您的库的源代码。）请注意，您不需要拥有源代码来模拟对象。

`Query`是一个接口，所以你可以像其他任何接口一样使用框架来模拟它。查看框架的文档：

[http://www.betgenius.com/mockobjects.pdf](http://www.betgenius.com/mockobjects.pdf)

**编辑：**

值得注意的是，hibernate 确实会在运行时为持久对象生成代理。`$$EnhancerByCGLIB`您将在这些代理的类名中看到类似的内容。这些代理*确实*有本机代码，您不应该尝试模拟它们。与其尝试从会话中模拟一个真正的持久对象，不如模拟`Session`本身就是一个接口的 ，模拟`Query`，并根据查询结果创建您自己的模拟对象。

# eclipse - CDT-ASTRewrite 创建异常

> ID：15863901
> 
> 赞同：2
> 
> 时间：2013-04-07T15:09:53.567
> 
> 标签：eclipse, eclipse-plugin, eclipse-cdt

我正在尝试创建一个插件来使用 CDT 操作 C 源文件，我正在使用 ASTRewrite 对象来修改 C 文件，无论如何它可以正常工作，除了以下示例文件：

```
#define CODE_SECTION ON

#if ( CODE_SECTION == ON )
/**
 * \Code Sample
 */
 struct
{
      int                  Var1[4];
      //Comment 1!!!
      int                   Var2[8];

} SampleStruct;
#endif /* End of Code Sample */ 
```

我得到以下异常：

> java.lang.NullPointerException at org.eclipse.cdt.internal.core.dom.rewrite.commenthandler.ASTCommenter$PreprocessorRangeChecker.isCommentOnSameLine(ASTCommenter.java:86)

应：

```
ASTRewrite.create(ast); 
```

经过一番调查，我认为删除注释“//Comment 1”或删除预处理语法可以解决问题，但我不能这样做，因为我不应该修改我想要在插件之外处理的文件. 有人对此有解释/解决方案吗？提前致谢，

# android - intentService 线程没有永久停止

> ID：15863904
> 
> 赞同：-1
> 
> 时间：2013-04-07T15:09:58.910
> 
> 标签：android, android-service, intentservice, togglebutton, timertask

即使在谷歌上搜索了很长时间，我也找不到解决问题的方法。

问题是：

在我的应用程序中，我启动了一个意图，它在单击切换按钮时调用实现 intentService 的文件，并定期运行它，因为`startService()`它位于 timertask 内。现在，当我再次单击切换按钮时，它会停止它应该做的意图。但是现在下一次没有关闭应用程序，当我再次单击切换按钮（再次开始）时，它会启动 3 个意图线程，而不仅仅是新的意图。

我无法弄清楚可能是什么原因以及如何解决它，任何帮助都将是非常可观的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T04:37:40.100

好的，最后，我弄清楚了问题所在。我刚刚添加了一个命令

计时器.取消

单击切换按钮以停止该过程，它就像一个魅力。谢谢

# javascript - 非显眼页面的 AJAX 返回

> ID：15863914
> 
> 赞同：0
> 
> 时间：2013-04-07T15:11:04.543
> 
> 标签：javascript, ajax

我有一个带有 id 或“显示”的表单。它有一个要发送的值，它是一个选择项，我给它一个 'services' 的 id。

我想将“服务”的值发送到我在单独的 php 页面中创建的函数。该页面称为“functs.php”，函数名称称为“searchResults”。

“searchResults”功能有效，我知道的就这么多。它查询数据库并输出 8 个单独的 php echo 语句。我已经运行了 PHP 函数并且知道它可以工作。我知道问题出在我的 javascript 上，因为，好吧，我在 JavaScript 方面不是最擅长的，而且通常会回避它。

截至目前，代码没有做任何事情。我的表单有自己的动作可以发布到单独的 php 页面。

```
<form id="display" action="resultPage.php" method="POST"> 
```

我正在尝试使用 javascript/ajax 来立即更新 div 的内容，但是如果用户关闭了 jscript，我希望将表单发布到备用页面。这是我的脚本。

```
$(document).ready(function() {
$('#display').submit(function(e) {
var formData = $('#services');

$.ajax({
        type: "POST",
        url: functs.php,
        data: '$formData',
        datatype: 'json',
        success: function(data) {
            if (!data.success)
            {
        $.amwnd({
        title: 'Error!',
        content: data.message,
        buttons: ['ok'],
    closer: 'ok'
    });
    }
}
});

e.preventDefault();
return false;
});
}); 
```

PHP代码：

```
<?php

function searchResults()
{

 require 'db_config.php';

   $sql= "SQL CODE HERE"

$theStyle = <<<HERE
"height:100%;
width:70%;
margin:4% AUTO 0;
padding:1.75em;
font-size:1.25em;
border-radius:5em;
color:white;
background-color:#b72027;
;"
HERE;

   while ($row = mysql_fetch_array($result))
      {
    echo ("<div style = $theStyle>");
    echo ("<table>");
    echo ("<tr><td>" . $row["0"] . "</td></tr>");
    echo ("<tr><td>" . $row["1"] . "</td>");
       echo ("<tr><td>" . $row["2"] . ", " . $row["3"] . " " . $row["4"] . "</td></tr>");
       echo ("<tr><td>Phone: " . $row["5"] . "</td></tr>");
       echo ("<tr><td>"  .  "<a href=\"http://" . $row["6"] . "\">" . $row["6"] . "</a>"  .     "</td></tr>");
       echo ("<tr><td>" . $row["8"] . " " . $row["9"] . ", " . $row["10"] . "</td></tr>");
    echo ("<tr><td>" . $row["11"] . "</td></tr>");
       echo ("<tr><td></td></tr>");
       echo ("<tr><td></td></tr>");
       echo ("<tr><td>" . $row["7"] . "</td></tr>");
    echo ("</table>");
    echo ("</div>");
       echo ("<br />");

    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:26:10.633

您的 JS 代码有几个问题。PHP 脚本名称需要是引号内的字符串，并且 formData 变量有一个不必要的“$”。试试这个：

```
$(document).ready(function() {
$('#display').submit(function(e) {
e.preventDefault();
var formData = $('#display').serialize();

$.ajax({
        type: "POST",
        url: 'functs.php',
        data: formData,
        datatype: 'json',
        success: function(data) {
            if (!data.success)
            {
        $.amwnd({
        title: 'Error!',
        content: data.message,
        buttons: ['ok'],
    closer: 'ok'
    });
    }
}
});

});
}); 
```

# java - java中的类中的类

> ID：15863915
> 
> 赞同：3
> 
> 时间：2013-04-07T15:11:06.487
> 
> 标签：java, class, data-structures, time-complexity

我的作业有点问题，如果我能得到一个，我想解释一下。

目前我在一个数据结构类中，正在做一个修改后的 BinarySearch 的分配，它将找到一对数字来找到最左边的数字和最右边的数字，如果有多个，并打印出位置。我现在遇到的一个大问题是老师希望我们使用 Pair 类来返回两个整数。我在主文件中创建了 Pair 类，想知道是否有人可以指出我做错了什么的正确方向。我不是在寻找答案，只是帮助我了解我需要做什么以及为什么。就代码而言，这就是我现在所得到的：

```
import java.util.*;
import java.io.*;

public class Test_BinarySearchDup{

private class Pair{
    public int left;
    public int right;
}

public static void main(String[] args) throws IOException{
    String file = args[0];
    int x = Integer.parseInt(args[1]);
    Scanner fin = new Scanner(new FileReader(file));
    int count = 0;
    while(fin.hasNext()){
        fin.nextInt();
        count++;
    }
    fin.close();

    int[] array = new int[count];

    fin = new Scanner(new FileReader(file));
    while(fin.hasNext()){
        for(int i = 0; i < array.length; i++){
            array[i] = fin.nextInt();
        }
    }
    fin.close();

    BinarySearchDup(array, x);
}

public static Pair BinarySearchDup(int[] A, int x){
    int low = 0, high = A.length - 1, mid = (low + high) / 2;
    while(low <= high){
        mid = (low + high) / 2;
        if(A[mid] == x)
            return Pair(mid);
        else if(A[mid] < x)
            low = mid + 1;
        else
            high = mid - 1;
    }
}
} 
```

我通过命令行发送参数，所以文件名是 data.txt，示例 int x 是 10。我认为这将类似于我最近在定义类（对）的地方所做的 LinkedList 分配然后你设置并获取带有数据的整数。我原来有：

```
private class Pair(int data){
  this.data = data; 
} 
```

但我不确定为什么这不会像我想要的那样工作。无论如何，这是我的问题，任何有助于理解这一点的帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T15:13:17.630

内部类不是静态的，这意味着它必须绑定到一个对象。主要方法是静态的。您不能从静态方法调用非静态成员。将内部类标记为静态。

```
private static class Pair(int data) 
```

# ruby - Ruby 否定 if 语句

> ID：15863919
> 
> 赞同：0
> 
> 时间：2013-04-07T15:11:22.023
> 
> 标签：ruby, if-statement

我有一个语句检查一个字符串是否包含另一个；如果没有，它会运行一些代码。我不认为我正在以一种非常优化的方式进行操作。这是一个代码片段：

```
if blocks_in_progress.include? ('|' + blocks[i])
else
    block = blocks[i]
    break
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T15:13:30.747

这里有点 Ruby 新手，但据我了解，以下是首选方式：

```
unless blocks_in_progress.include? ('|' + blocks[i])
   block = blocks[i]
   break
end 
```

来源：[https](https://github.com/bbatsov/ruby-style-guide) ://github.com/bbatsov/ruby-style-guide （语法部分）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T15:22:04.330

一个班轮：

```
 break block = blocks[i] unless blocks_in_progress.include? ('|' + blocks[i]) 
```

# java - Java - 使用自己的 hasNext() 和 next() 可迭代：如何正确执行？

> ID：15863920
> 
> 赞同：1
> 
> 时间：2013-04-07T15:11:23.640
> 
> 标签：java, iterator, iterable

我有一个实现 Iterable 的类，但有自己的`hasNext()`和`next()`这样的方法：

```
public class BLMovie implements Iterable<BLMovieFrame> {

@Override
public Iterator<BLMovieFrame> iterator() {
    iteratorVar = 0;
    return liste.iterator();
}

public boolean hasNext() {
    if (loop)
        return true;
    return iteratorVar < liste.size();
}

public BLMovieFrame next() {
    iteratorVar = (iteratorVar++)%(liste.size()-1);
    return liste.get(iteratorVar);
}

public void remove() {
    throw new UnsupportedOperationException();
} 
```

我很确定这不是最好的方法，
关于 Iterable 的其他线程似乎并不关心自己的下一个方法，所以有人对我有建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T15:17:36.980

您的方法是在错误的类上定义的。和方法需要在实现上定义`hasNext`，`next`而不是在. 如果您在每个方法上放置了@Override 注释，编译器就会通知您这个错误。`remove``Iterator``Iterable`

事实上，您可以：

*   为您的迭代器创建一个匿名内部类，并将这些方法移动到它的主体中
*   为迭代器创建一个独立的类，并再次将这些方法移入其中

请注意，当您这样做时，您将不再能够利用嵌入列表的迭代器，但您将有效地定义自己的迭代器（当然，您可以将其包裹起来）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T15:22:20.323

实际上，您不会处理迭代器方法，因为您实际上是在返回 object 的迭代器`liste`。

如果要实现自己的迭代器，最好的方法是创建一个匿名内部类。

```
 @Override
        public Iterator<BLMovieFrame> iterator() {
            // TODO Auto-generated method stub      
            return new Iterator <BLMovieFrame> (){

                @Override
                public boolean hasNext() {
                   if (loop)
                         return true;
                   return iteratorVar < liste.size();
              }

                @Override
                public BLMovieFrame next() {
                         iteratorVar = (iteratorVar++)%(liste.size()-1);
              return liste.get(iteratorVar);
              }
             @Override
            public void remove() {
                     throw new UnsupportedOperationException();
             }              
            }; 
```

# xcode - 游戏中心找到玩家后返回什么信息？

> ID：15863921
> 
> 赞同：1
> 
> 时间：2013-04-07T15:11:28.070
> 
> 标签：xcode, cocos2d-iphone, game-center

我目前正在尝试 raywenderlich 的[如何制作在您自己的服务器上托管的多人 iPhone 游戏第 1 部分的项目](http://www.raywenderlich.com/4456/how-to-make-a-multiplayer-iphone-game-hosted-on-your-own-server)

在第 1 部分教程的末尾，它声称通过游戏中心面板查找自动匹配后，日志面板将显示 2 个 PlayerID

```
    CatRace[5407:707] didFindPlayers
    猫赛[5407:707] G:1036727375
    猫赛[5407:707] G:1417937643

```

但是，当我尝试在 iPhone Simulator 和我的 iPhone 上运行时，它总是在完成匹配玩家后只返回 1 个 playerID。

所以，我想确切地知道该函数将如何返回信息。

有人可以帮忙吗？

附加：我发现模拟器和iDevice找到了另一个的播放器，但不包括自己。这是正常情况吗？

已经尝试将服务器放到外部主机上。仍然没有运气，只返回阵列中的一名玩家。

是这个功能吗

```
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindPlayers:(NSArray *)playerIDs 
```

应该归还包括本地玩家在内的所有玩家？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:03:41.403

虽然它是如此连线，但我设法将返回操纵到一个新的 NSMUTABLEARRAY 并发送到托管服务器。

```
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindPlayers:(NSArray *)playerIDs {

NSMutableArray *players = [[NSMutableArray alloc] initWithArray:playerIDs];

[players insertObject:[GKLocalPlayer localPlayer].playerID atIndex:0];

if (_state == NetworkStatePendingMatch) {

[self dismissMatchmaker];
[self sendStartMatch:players];

}

[players release]; 
```

但是，我仍在寻找原始问题的答案，即 - (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindPlayers:(NSArray *)playerIDs

# objective-c - 不扩展 NSScroller

> ID：15863923
> 
> 赞同：0
> 
> 时间：2013-04-07T15:11:36.637
> 
> 标签：objective-c, macos, cocoa, nsscrollview, nsscroller

当`NSScroller`用户将鼠标悬停在它上面时，它会自动扩展它的宽度。

![在此处输入图像描述](https://i.stack.imgur.com/tLdFy.png)

但是，文档视图的空间很小，这就是滚动条不应该展开的原因。

如何禁用此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T21:08:00.927

这可能有点太晚了，但这样的事情可能会有所帮助？

1）为您的垂直滚动条创建自定义滚动条。

2) Override - *drawKnob*强制绘制旋钮的默认大小，即使它被绘制为“扩展”。

```
-(void)drawKnob
{
    NSRect knobSlot = [self rectForPart:NSScrollerKnob];
    if(sFlags.isHoriz)
    {
        knobSlot.size.height = 9;
        knobSlot.origin.y = 6;
    }
    else
    {
        knobSlot.size.width  = 9;
        knobSlot.origin.x = 6;
    }

    NSBezierPath *path = [NSBezierPath bezierPathWithRoundedRect:knobSlot xRadius:5 yRadius:5];

    [[NSColor scrollBarColor] set];
    [path fill];
} 
```

3）根据您是否仍需要旋钮槽，覆盖 - *drawKnobSlotInRect*：

```
-(void)drawKnobSlotInRect:(NSRect)slotRect highlight:(BOOL)flag
{
    NSRect newRect = slotRect;
    if(sFlags.isHoriz)
        newRect.origin.y = 4;
    else
        newRect.origin.x = 4;
    [super drawKnobSlotInRect:newRect highlight:flag];
} 
```

# java - 任务完成后从休眠中获取反馈

> ID：15863929
> 
> 赞同：0
> 
> 时间：2013-04-07T15:11:59.693
> 
> 标签：java, hibernate, split

我有一个小问题，我不知道该怎么做。

我使用 Hibernate (MySQL) 来存储（我们称之为）“产品”，并且我有一个名为“标识符”的对象。

```
Identifier
----------
Listname    | is the name of a txt,csv.... with 1 up to 1000 products
ProductKey  | is just a little piece of information about the product used    
            | to get more information due to an external API
Processed   | simple 1 or 0 to say the Product information is completed 
```

所以桌子可能看起来像这样。

```
"test.txt" | productkey1234 | 1  
"test.txt" | productkey2345 | 1  
"test.txt" | productkey3456 | 1  
"test.txt" | productkey4567 | 0  
"file.txt" | productkey1 | 1  
"file.txt" | productkey2 | 1  
"file.txt" | productkey3 | 1 
```

我有一个后台服务，它必须检查列表中的每个产品是否都已处理，如果是，它应该获取所有产品并编写一个包含有关它们的所有完整信息的结果文件。（这不是问题）。

但是，如果我有 6000 个条目和 10 个不同的列表，我如何让 Hibernate 检查所谓的列表是否准备好？（处理列表中的每个产品）

在我使用 Hibernate 之前，我拆分了查询并为自己获取了所有唯一列表，并对每个列表运行了一个循环， `"SELECT sum(processed) as done,count(processed) as all from Identifier where list = 'listname'"`如果完成等于我知道的所有列表已准备好，我可以获取所有产品并删除包含`listname`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:49:18.450

如果问题是：*如何将此 SQL 查询转换为 HQL？*，那么答案很简单：

```
SELECT sum(i.processed) as done, count(i.processed) as all 
from Identifier i 
where i.list = 'listname' 
```

[请参阅HQL 中](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-aggregation)有关聚合函数的文档。

# android - 如何将收到的短信附加到 ListView

> ID：15863930
> 
> 赞同：0
> 
> 时间：2013-04-07T15:12:00.673
> 
> 标签：android, sms, broadcastreceiver

我有以下代码来显示列表视图中收到的消息：

```
package com.example.smsTest;

import java.util.ArrayList;

import android.app.ListActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class SMSReceiverActivity extends ListActivity {
    private BroadcastReceiver mIntentReceiver;
    ListView listview;
    ArrayAdapter<String> arrayAdpt;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_smsreceiver);

        listview=this.getListView();
    }

    @Override
    protected void onResume() {
        super.onResume();

        IntentFilter intentFilter = new IntentFilter("SmsMessage.intent.MAIN");
        mIntentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String msg = intent.getStringExtra("get_msg");

            //Process the sms format and extract body &amp; phoneNumber
            msg = msg.replace("\n", "");
            String body = msg.substring(msg.lastIndexOf(":")+1, msg.length());
            String pNumber = msg.substring(0,msg.lastIndexOf(":"));

            //Add it to the list or do whatever you wish to
            ArrayList<String> bodyarr=new ArrayList<String>();
            bodyarr.add(body);
            arrayAdpt = new ArrayAdapter<String>(SMSReceiverActivity.this, android.R.layout.simple_list_item_1,
            bodyarr);           
            listview.setAdapter(arrayAdpt);
            arrayAdpt.notifyDataSetChanged();
        }
    };

    this.registerReceiver(mIntentReceiver, intentFilter);
    }

    @Override
    protected void onPause() {
        super.onPause();
        this.unregisterReceiver(this.mIntentReceiver);
    }

} 
```

但是，问题是之前的消息被覆盖了。我尝试添加`arrayAdpt.notifyDataSetChanged();`代码无济于事。

我也在这里阅读了很多答案，但它不适用于我的代码。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:24:23.347

每次收到新消息时，您都在创建一个全新的*空*列表，这就是为什么之前的消息总是被覆盖的原因。

相反，将 bodyarr 和 arrayAdpt 的声明移动到类字段，以便每次收到新消息时都可以共享和修改它们：

```
private ArrayList<String> bodyarr = new ArrayList<String>();
private ArrayAdapter<String> arrayAdpt; 
```

在 onCreate 中，您应该为您的 ListView 设置列表适配器：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_smsreceiver);

        listview = this.getListView();
        arrayAdpt = new ArrayAdapter<String>(SMSReceiverActivity.this, android.R.layout.simple_list_item_1,
        bodyarr);

        listview.setAdapter(arrayAdpt);
    } 
```

然后，在您的广播接收器的 onReceive 方法中，您几乎可以执行您之前所做的操作，除了使用已经存在的列表和数组适配器，这样您已经添加的内容就不会被覆盖：

```
mIntentReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String msg = intent.getStringExtra("get_msg");

        //Process the sms format and extract body &amp; phoneNumber
        msg = msg.replace("\n", "");
        String body = msg.substring(msg.lastIndexOf(":")+1, msg.length());
        String pNumber = msg.substring(0,msg.lastIndexOf(":"));

        bodyarr.add(body);

        arrayAdpt.notifyDataSetChanged();
    } 
```

# c++ - 如何确定第一行和最后一行 qt 模型/视图

> ID：15863936
> 
> 赞同：0
> 
> 时间：2013-04-07T15:12:53.203
> 
> 标签：c++, qt

我正在构建一个基于 QAbstractListModel 和 QListView 的文件浏览器。

如您所知，显示的内容可以通过扩大窗口或滚动来改变。

如何确定实际显示的第一个和最后一个条目（或索引）。我必须自己编程吗？

后来补充：

完整描述见：

[http://qt-project.org/forums/viewthread/26497/](http://qt-project.org/forums/viewthread/26497/)

提前致谢，

Stef Bon Voorburg 荷兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:52:42.990

评论中提供的理由不充分；该模型应该随时调用`beginInsertRows`/ `endInsertRows`，即使您插入项目的范围当前在视图中不可见。这有多种原因（代理模型、`QPersistentModelIndex`实例、选择处理、`QAbstractItemView`内部管理、已渲染项目的缓存等）。

Qt 中的 MVC API 被设计为模型不应该知道视图当前显示的内容。合约中表达的合约`QAbstractItemModel`指定模型“只是”必须通过调用受保护的方法（`rowsInserted`除其他外发出 etc 信号）来保持世界其他地方的更新。如果您发现自己开始思考“嘿，如果我知道这个模型在附加视图中是如何显示的就好了”，正确的做法是确保您有效地使用现有的 API。例如，一个非常常见的问题是程序员发现他们的模型的`data()`方法被过于频繁地调用，例如，对于列表中的每个项目。造成这种情况的典型原因是相应的`QListView`需要知道为每个项目保留多少空间，以便确定滚动条大小。一个正确的方法是要么返回可用的数据`SizeHintRole`，要么将视图设置`uniformRowSizes`为`true`.

# asp.net - 如何在 asp.net 按钮上使用 bootsrap 图标

> ID：15863938
> 
> 赞同：7
> 
> 时间：2013-04-07T15:12:57.427
> 
> 标签：asp.net, twitter-bootstrap, icons

你好朋友，我想使用带有按钮的 Bootstrap 图标，但是当我尝试在我的 asp.net 项目中使用它时，图像没有显示，你能告诉我如何使用带有按钮的引导图标我已经尝试过这段代码

`<i class="icon icon-ok"><asp:Button ID="SubmitBtn" runat="server" OnClick="SubmitBtn_Click" Text="Submit" CssClass="btn btn-small btn-primary" /></i>`

还有这个

`<asp:Button ID="SubmitBtn" runat="server" OnClick="SubmitBtn_Click" Text="Submit" CssClass="btn btn-small btn-primary" ><i class="icon icon-ok"></i> </asp:Button>`

我也试过用这个`<asp:Button ID="SubmitBtn" runat="server" OnClick="SubmitBtn_Click" Text="Submit&nbsp;<i aria-hidden=true class=icon-ok icon-white></i>" CssClass="btn btn-small btn-primary" />`

但它不工作请有人发布解决方案如何使它工作？？？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-06-25T19:59:51.797

链接按钮，像这样...

```
<asp:LinkButton ID="SubmitBtn" runat="server" OnClick="SubmitBtn_Click" CssClass="btn btn-small btn-primary"><i class="icon icon-ok"></i>&nbsp;Submit</asp:LinkButton> 
```

[https://stackoverflow.com/a/11373500/1315626](https://stackoverflow.com/a/11373500/1315626)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-29T08:53:37.970

```
<button type="button" onserverclick="Unnamed_ServerClick" class="btn btn-default " runat="server" > <span class="glyphicon glyphicon-search"></span></button> 
```

# wpf - XAML 绑定到自定义控件

> ID：15863939
> 
> 赞同：1
> 
> 时间：2013-04-07T15:13:00.007
> 
> 标签：wpf, vb.net, xaml, binding

我已经构建了一个自定义控件，并想知道如何在 XAML 中正确绑定到自定义控件中 Observable 集合中的项目的属性。自定义控件属性如下所示。

```
Public Property MyPoints As ObservableDependencyObjectCollection(Of MyPoint)
    Get
        Return CType(GetValue(MyPointsProperty), ObservableDependencyObjectCollection(Of MyPoint))
    End Get
    Set(value As ObservableDependencyObjectCollection(Of MyPoint))
        SetValue(MyPointsProperty, value)
    End Set
End Property 
```

MyPoint 包含两个属性 X 和 Y

完整的 XAML

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525" xmlns:my="clr-namespace:WpfDependencyPropertyVB">

<Grid>
    <my:CustomControl1   HorizontalAlignment="Left" Margin="322,212,0,0" x:Name="CustomControl11" VerticalAlignment="Top" Width="145" Height="67">
        <my:CustomControl1.MyPoints>
            <my:MyPoint X="100" Y="{Binding Value, ElementName=Slider1}" />
        </my:CustomControl1.MyPoints>
    </my:CustomControl1>
    <Slider Height="26" HorizontalAlignment="Left" Margin="23,174,0,0" Name="Slider1" VerticalAlignment="Top" Width="273" />
    <Label Content="{Binding Value, ElementName=Slider1}" Height="41" HorizontalAlignment="Left" Margin="329,145,0,0" Name="Label1" VerticalAlignment="Top" Width="135" />
</Grid> 
```

在这里输入代码

在 My XAML 中，设置如下所示：

```
<my:CustomControl1 x:Name="CustomControl11" >
    <my:CustomControl1.MyPoints>
        <my:MyPoint X="100" Y="{Binding Value, ElementName=Slider1}" />
    </my:CustomControl1.MyPoints>
</my:CustomControl1> 
```

如果我在我的控件中设置一个断点，我可以看到 X=100 但我没有看到当滑块值更改时 Y 会更新。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:43:53.243

我的解决方案是添加一个依赖属性`ThePoint`，`CustomControl1`然后将滑块值绑定到`ThePoint.Y`. 我假设 MyPoint 派生自 DependencyObject 并且 X 和 Y 是依赖属性。

```
<my:CustomControl1 x:Name="theControl" />

<Slider Grid.Row="1" Value="{Binding ElementName=theControl, 
        Path=ThePoint.Y, Mode=TwoWay}"/> 
```

然后，您可以根据需要添加 PropertyChangedCallback 处理程序以将项目添加到集合中（如果需要的话）。

或者，您可以绑定到集合中的项目：

```
<local:MyCustomControl x:Name="theControl" />

<Slider Grid.Row="1" Value="{Binding ElementName=theControl, 
        Path=MyPoints[0].Y, Mode=TwoWay}" /> 
```

# jsf - 重新加载 信息与 行动

> ID：15863941
> 
> 赞同：0
> 
> 时间：2013-04-07T15:13:05.483
> 
> 标签：jsf, primefaces

我有`<p:tabView>`2 个标签。第一个包含学生详细信息，第二个包含所有学生的表格。

```
<p:tab title="List">
    <p:dataTable id="studentsTable" value="#{studentMB.allStudents}" var="student">
        <p:column>
            <f:facet name="header"><h:outputText value="ID"/></f:facet>
            <h:outputText value="#{student.id}"/>
        </p:column>
        <p:column>
            <f:facet name="header"><h:outputText value="Name"/></f:facet>
            <h:outputText value="#{student.name}"/>
        </p:colum>
        <p:column>
            <p:commandButton value="Details" onclick="tabVar.select(0);" />
        </p:column>
    </p:dataTable>
</p:tab> 
```

当按下表格中的“详细信息”按钮时，我想在第一个选项卡中显示所选学生。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:50:06.270

Primefaces tabview 具有 activeIndex 属性，您可以绑定到 bean 变量：

```
<p:tabView id="tabView" activeIndex="#{studentMB.tabindex}"> 
```

在每个 commandButton 操作中，您传递值以确定学生。

```
<p:commandButton update=":tabView" value="Details" actionListener="#{studentMB.handUpdate(student)}" /> 
```

豆：

```
public void handUpdate(StudentType stValue){
        // get student detail
    } 
```

（对不起我的英语不好）

# webkit - 有人可以解释 WebKit 吗？

> ID：15863942
> 
> 赞同：-1
> 
> 时间：2013-04-07T15:13:07.673
> 
> 标签：webkit

我正在尝试正确理解 WebKit。我了解它的浏览器引擎。但我不清楚它到底包含什么，更重要的是它不包含什么？我无法放置的一件事是 JS 引擎。DOM 实现是 WebKit 的一部分吗？

JS 引擎（如 V8）适合哪里？通过[这个页面](https://www.webkit.org/blog/1188/how-webkit-loads-a-web-page/)，我假设靠近图像末尾的 SubResourceLoader 正在加载 JS。但是 JS 也改变了 DOM（或使用 DOM），因此它需要成为 WebKit 引擎的组成部分。

那么有人能解释一下 WebKit 做了什么，更重要的是它没有做什么吗？

非常感谢你的帮助。

编辑：我发现[这份文件](https://docs.google.com/presentation/pub?id=1ZRIQbUKw9Tf077odCh66OrrwRIVNLvI_nhLm2Gi__F0#slide=id.p)非常清楚地解释了我所需要的一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:19:03.327

你看过文档吗？ [这部分](http://trac.webkit.org/wiki/SourceDirectory)描述了各种组件。

此外，Paul Irish 写[了一篇不错的概述](http://paulirish.com/2013/webkit-for-developers/)，您应该阅读。

# java - 查看发送到本地服务器的 HTTP POST 请求

> ID：15863946
> 
> 赞同：-1
> 
> 时间：2013-04-07T15:13:27.610
> 
> 标签：java, php, json

我正在使用接收此消息的 PHP 脚本将 JSON 数据从我的 Java 应用程序发送到我的本地网络服务器。现在据我所知，我只能通过例如将数据插入数据库来查看收到的内容。有没有办法/应用程序来查看发送到我的 PHP 网络服务器的实时 POST 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:17:32.170

如果 java HTTP 库支持代理，我喜欢使用[fiddler来完成这些类型的任务。](http://www.fiddler2.com/fiddler2/)Fiddler 将列出有关可用的 HTTP 请求的所有信息。默认情况下，它将记录整个系统中的所有 HTTP 请求，但可以被告知限制为一个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:15:02.747

您可以尝试将您的 httpd 日志记录级别设置为详细，或者（取决于它是什么 httpd）尝试使用可以记录请求中发送的所有数据的扩展

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:17:16.420

出于调试目的，为什么不直接将 POST 数据写入文件？

IE

```
file_put_contents(<some filename>, $HTTP_RAW_POST_DATA); 
```

# ruby-on-rails - 截断文本并链接到阅读更多

> ID：15863951
> 
> 赞同：1
> 
> 时间：2013-04-07T15:13:45.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, link-to

链接到我的应用程序中的帖子时遇到一个小绊脚石。我正在截断帖子的文本并提供“阅读更多”链接。有 2 个区域可以查看帖子，一个供所有人（公共）使用，另一个供管理员用户编辑/删除帖子。

所以在我的公众看来，我正在这样做

```
<% @toppost.each do |t| %>
    <div class="post-item">
      <h2><%= t.title %></h2>
       <ul id="newsHome">
        <li><%= date_output(t.published_on) %></li>
        <li><%= t.department.name %></li>
        <li>by Admin</li>
       </ul>
       <% if t.comments.length > 350 %>
        <p class="post-description"><%= truncate(t.comments, length: 350).html_safe %>
        <%= link_to '...Read more', t %></p>
        <% else %>
        <p class="post-description"><%= t.comments.html_safe %></p>

       <% end %>
    </div>
   <% end %> 
```

但是，当单击阅读更多时，它会将我带到 url

```
/posts/:id 
```

这实际上是管理员用户查看帖子的地方，所以此时用户将被重定向回主页，因为帖子控制器有

```
before_filter :authenticate_user! 
```

例如，公开查看所有帖子的地方是在特定的新闻页面上。

```
localhost:3000/tynewyddnews
localhost:3000/woodside
localhost:3000/sandpiper
localhost:3000/outreach 
```

我的问题是如何在网站公共部分的位置链接到该帖子。

使用 top_posts 方法的索引操作（方法见下文）

```
def index 
@title = 'Home'
@toppost = Post.top_posts 
```

结尾

top_posts 方法

```
def self.top_posts
#Array with each of the 4 departments - first record
top_posts = [
  self.tynewydd_posts.first,
  self.woodside_posts.first,
  self.sandpiper_posts.first,
  self.outreach_posts.first
]
#remove entry if nil
top_posts.delete_if {|x| x==nil}
return top_posts 
```

结尾

控制器

```
def tynewyddnews
  @title = 'Ty Newydd News'
  tynewyddpost = Post.tynewydd_posts.reverse
  tynewyddpost.pop
  @tynewyddpost = tynewyddpost
  @tynewyddpostlatest = Post.tynewydd_posts.first
end 
```

模型

```
scope :tynewydd_posts, :include => :department, :conditions => {"departments.name" => "Ty Newydd"}, :order => "posts.published_on DESC" 
```

其他部门还有另外3个范围，都一样寻找条件部门名称

希望我添加了足够的信息，还有什么需要的请询问

编辑

一直在考虑这一点，不确定我是否走在正确的轨道上，但是对于每个帖子，我都需要它链接到公共页面控制器中相应的新闻页面。

```
tynewyddnews
sandpipernews
outreachnews
Woodsidenews 
```

因此，在我的 link_to 中，我需要根据帖子的类型将路由传递给适当的操作。那么如何给每个帖子一个类型，然后链接到那个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:27:10.420

哇，好的，我从哪里开始。

例如，您需要一个指向该控制器操作的路由

```
`get '/tynewyddnews' => 'news#tynewyddnews', :as => 'public_news' # gives you the route public_news_path 
```

在你看来

```
= link_to 'Read More', public_news_path 
```

所以，你应该这样做。顺便说一句，您也可以使用该`.truncate()`方法。您将长度作为参数传递，它会`...`为您添加

# coffeescript - 流星全局“this”似乎未定义

> ID：15863952
> 
> 赞同：0
> 
> 时间：2013-04-07T15:14:05.313
> 
> 标签：coffeescript, meteor

我试图在我的 Meteor 项目中排除我越来越大的单个 CoffeeScript 文件，并遵循了[关于](http://docs.meteor.com/#coffeescript)使用`this`. 但是，即使是简单的事情，例如：

```
console.log("this=" + this)
@gave =
  Transactions: new Meteor.Collection("Transactions")
  Causes: new Meteor.Collection("Causes") 
```

生成终端错误并且服务器不会启动：

```
=> Meteor server restarted
this=undefined

/home/g/workspace/gave/.meteor/local/build/server/server.js:321
}).run();
 ^
TypeError: Cannot set property 'gave' of undefined
    at app/gave.coffee.js:6:11 
```

根据上面链接的建议，

> 全局变量可以通过使用 this（或 CoffeeScript 的 @ 简写）在 CoffeeScript 中设置，因为在顶层 this 指的是全局命名空间（客户端上的窗口和服务器上的全局）。

所以，我真的不知道我要去哪里错了。你可以吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T19:00:57.170

参见[ES5-15.3.4.4](http://es5.github.io/#x15.3.4.4)。

> 注意 thisArg 值作为 this 值不加修改地传递。这是对第 3 版的更改，其中 undefined 或 null thisArg 被替换为全局对象，并且 ToObject 应用于所有其他值，并且该结果作为 this 值传递。

因此，使用`"use strict"`,meteor's`.call(null)`将有效地为您提供`this == null`=)。

# sql - CHECK 约束将注册日期限制为 2005 年 8 月 26 日之后的日期

> ID：15863954
> 
> 赞同：0
> 
> 时间：2013-04-07T15:14:15.800
> 
> 标签：sql, date, datetime

需要一些帮助：

> 创建一个名为 TEMP_STUDENT 的表，其中包含以下列和约束：STUD_ID 列用于学生 ID 并且是主键，FIRST_NAME 列用于学生名字，LAST_NAME 列用于学生姓氏，ZIP 列是外键Student Database Schema 的 ZIPCODE 表中的 ZIP 列，以及一个非 NULL 列 REGISTRATION_DATE 并且具有 CHECK 约束以将注册日期限制为 2005 年 8 月 26 日之后的日期。必须命名所有约束。first_name 和 last_name 列都是必需的。

我懂了：

```
CREATE TABLE Temp_Student
(STUD_ID NUMBER (8,0),
FIRST_NAME VARCHAR2(25) NOT NULL,
LAST_NAME VARCHAR2(25) NOT NULL,
ZIP VARCHAR2(5),
REGISTRATION_DATE DATE NOT NULL,
CONSTRAINT STUD_ID_PK PRIMARY KEY(STUD_ID),
CONSTRAINT ZIP_FK FOREIGN KEY (ZIP)
REFERENCES ZIPCODE (ZIP),
CONSTRAINT chk_REGISTRATION_DATE CHECK (REGISTRATION_DATE> REGISTRATION_DATE 'TO DATE('26-AUGUST-2005'))
); 
```

对于最后一个约束的任何帮助，我不知道我在做什么，将不胜感激。

不断收到此消息：

```
CONSTRAINT chk_REGISTRATION_DATE CHECK (REGISTRATION_DATE> REGISTRATION_DATE 'TO DATE('26-AUGUST-2005')')
                                                                             *
ERROR at line 10: 
ORA-00907: missing right parenthesis 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T15:31:40.107

您的表达式中有几个错误：

1.  `to_date()`不是`to date()`（注意下划线）
2.  函数调用不能放在单引号中，所以它是`to_date(..)`, 不是`'to_date(...)'`
3.  您在运算符之后重复了该列，`>`这也是错误的。

所以正确的表达是这样的：

```
CONSTRAINT chk_REGISTRATION_DATE 
   CHECK (REGISTRATION_DATE > TO_DATE('2005-08-26', 'yyyy-mm-dd')) 
```

请注意，使用时应***始终***指定格式，`to_date()`否则转换受服务器和客户端的 NLS 设置影响，可能会产生奇怪的错误。

即使您使用格式掩码，也不应该使用依赖于当前 NLS*语言*的文字。`AUGUST`可能不适用于所有语言作为月份名称。最好使用月份数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T17:46:23.017

试试这个

```
CREATE TABLE Temp_Student
(STUD_ID NUMBER (8,0),
FIRST_NAME VARCHAR2(25) NOT NULL,
LAST_NAME VARCHAR2(25) NOT NULL,
ZIP VARCHAR2(5),
REGISTRATION_DATE DATE NOT NULL,
CONSTRAINT STUD_ID_PK PRIMARY KEY(STUD_ID),
CONSTRAINT ZIP_FK FOREIGN KEY (ZIP)
REFERENCES ZIPCODE (ZIP),
CONSTRAINT chk_REGISTRATION_DATE CHECK (REGISTRATION_DATE> TO_DATE('26-AUGUST-2005'))
) 
```

# qt - Qt QML Gridview 如何限制显示的项目？

> ID：15863955
> 
> 赞同：3
> 
> 时间：2013-04-07T15:14:35.787
> 
> 标签：qt, gridview, qml

我是 QT 新手，我通过连接列表模型学会了使用网格视图。我想将活动查看图像限制为 4，而不是列表模型中的所有项目

```
Rectangle {
  id: Rect1;
  width: 1280; height: 720;

  ListModel {

  id: listAssetModel
      ListElement { Movie: "Arrow"; PosterURL: "posters/Arrow.jpg" }
      ListElement { Movie: "Avatar"; PosterURL: "posters/Avatar.jpg" }
      ListElement { Movie: "Avenge"; PosterURL: "posters/Avenge.jpg" }
      ListElement { Movie: "Arrow"; PosterURL: "posters/Arrow.jpg" }
      ListElement { Movie: "Avatar"; PosterURL: "posters/Avatar.jpg" }
      ListElement { Movie: "Avenge"; PosterURL: "posters/Avenge.jpg" }
      ListElement { Movie: "Arrow"; PosterURL: "posters/Arrow.jpg" }
      ListElement { Movie: "Avatar"; PosterURL: "posters/Avatar.jpg" }
      ListElement { Movie: "Avenge"; PosterURL: "posters/Avenge.jpg" }      
  } 

  GridView {
    id: gridAssetPreview;
    currentIndex: -1 // default - no focus on poster
    x: 56; y: 189
    width: 1140; height: 300
    focus: true
    cellWidth: 275; cellHeight: 300 // keeps the poster preview images aligned
    highlight: appHighlight
    model: listAssetModel
    delegate: appDelegate
  }

  Component {
    id: appDelegate

    Item {
      width: 250; height: 350 // controls the appHighlight size

      Image {
        id: imgPosterPreview
        width: 225; height: 325
        source: PosterURL
        smooth: true
      }
      Text {
        id: textAssetName
        anchors { // draw this below and centre to the image
          top: imgPosterPreview.bottom;
          horizontalCenter: imgPosterPreview.horizontalCenter
        }
        text: AssetName
        font.pointSize: 16
        color:"white"
        smooth: true
      }
    }
  }
} 
```

网格视图区域定义如下，但它似乎在运行时显示多行图像，这不是我所期望的。我只想在整个 1280 x 720 屏幕上看到 4 张图像。宽度：1140；身高：300

请帮忙，我在星期天坚持这个:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-19T01:40:48.000

添加到您的 GridView：

```
flow: GridView.TopToBottom 
```

# c# - 为什么实例变量在c#中返回null？

> ID：15863963
> 
> 赞同：-7
> 
> 时间：2013-04-07T15:15:11.393
> 
> 标签：c#, c#-4.0, asynchronous

我创建了一个名为telephoneNumber 的类和一个全局变量。该变量在一个方法中设置并在另一个方法中使用。但是，此变量返回 null。所有方法和这个全局变量在同一个类中。请帮助理解这个问题。非常感谢。我的课是：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Net.Http;
using Newtonsoft.Json;
using System.Collections;
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        private string telephoneNumber;
        private async void GetSingleLocationInfo(string href)
        {

            var hereNetUrl = string.Format(
                href+"&accept=application/json"
                    );

            // get data from HERE.net REST API
            var httpClient = new HttpClient();
            var hereNetResponse = await httpClient.GetStringAsync(hereNetUrl);

            // deseralize JSON from Here.net 
            using (var tr = new StringReader(hereNetResponse))
            using (var jr = new JsonTextReader(tr))
            {
                var rootObjectResponse = new JsonSerializer().Deserialize<Object>(jr);

                String contacts = rootObjectResponse.ToString();
                int startIndex = contacts.IndexOf("phone");
                if (startIndex != -1)
                {
                    String value = contacts.Substring(startIndex, 50);
                    telephoneNumber=value.Substring(value.IndexOf("+"));
                }
                else
                {
                    telephoneNumber="";
                }

            }
        }
        private async void GeocodingWin8Query()
        {
            // build URL for Here.net REST service
            string currentgeoLoc = "37.75075,-122.393472";
            string queryString = "taxi";
            string appID = "dV04O71v5F3f2W"; // MAKE SURE TO GET YOUR OWN from developers.here.net
            object appCode = "8QVr5uSXwfcowDrA"; // MAKE SURE TO GET YOUR OWN from developers.here.net
            var hereNetUrl = string.Format(
                "http://demo.places.nlp.nokia.com/places/v1/discover/search?at={0}&q={1}&app_id={2}&app_code={3}&accept=application/json",
                    currentgeoLoc, queryString, appID, appCode);

            // get data from HERE.net REST API
            var httpClient = new HttpClient();
            var hereNetResponse = await httpClient.GetStringAsync(hereNetUrl);

            // deseralize JSON from Here.net 
            using (var tr = new StringReader(hereNetResponse))
            using (var jr = new JsonTextReader(tr))
            {
                var rootObjectResponse = new JsonSerializer().Deserialize<RootObject>(jr);

                List<Item> items=rootObjectResponse.results.items;

                foreach(Item item in items){
                    string href = item.href;
                    GetSingleLocationInfo(href);
                   Console.WriteLine (telephoneNumber);//returns null
                }

            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            GeocodingWin8Query();
        }
    }
    public class Category
    {
        public string id { get; set; }
        public string title { get; set; }
        public string href { get; set; }
        public string type { get; set; }
    }

    public class Item
    {
        public List<double> position { get; set; }
        public int distance { get; set; }
        public string title { get; set; }
        public Category category { get; set; }
        public string icon { get; set; }
        public string vicinity { get; set; }
        public List<object> having { get; set; }
        public string type { get; set; }
        public string href { get; set; }
        public string id { get; set; }
        public double? averageRating { get; set; }
    }

    public class Context
    {
        public Location location { get; set; }
        public string type { get; set; }
    }

    public class Search
    {
        public Context context { get; set; }
    }

    public class RootObject
    {
        public Results results { get; set; }
        public Search search { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:24:20.480

因此，在您调用 GetSingleLocationInfo 的地方，您正在调用异步方法。因此，GetSingleLocationInfo cal 将一直运行到 await 语句，然后在它之前直接返回给调用者 httpClient.GetStringAsync(hereNetUrl); 已经回来了。

要解决此问题，您需要先等待调用 GetSingleLocationInfo，然后再尝试访问该变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:26:17.467

由于**GetSingleLocationInfo**是异步的，它将被异步调用，因此**Console.WriteLine (telephoneNumber);** 将在**GetSingleLocationInfo**更改它之前调用。我认为您应该在调用该方法时**等待。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:23:23.913

找不到字符串时，String.Substring 返回 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T15:24:26.087

它将“返回” null 很简单，因为`telephoneNumber`尚未设置。

您对变量的声明`private string telephoneNumber;`未设置任何值，因此它是空字符串或 null。

我的猜测是在您实际设置`telephoneNumber`为具有值的方法之前调用您打印出来的方法。

# python - 写入当前文件

> ID：15863964
> 
> 赞同：-3
> 
> 时间：2013-04-07T15:15:11.723
> 
> 标签：python, file, file-io, io

我试图查看是否有任何方法可以写入正在执行代码的当前文件。

这是我写的代码：

```
with open(__file__, 'r+') as f:
    f.write('abc') 
```

这没用。有什么方法可以使用 python 写入正在执行代码的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T15:27:00.863

我无法重现这个。我的文件`test.py`在执行后是

```
abch open(__file__, 'r+') as f:
    f.write('abc') 
```

这告诉我该程序“按设计”运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:51:13.020

尝试附加文件：

```
with open(__file__, 'a') as f:
f.write('abc') 
```

# android - Galaxy设备上的Android电子邮件意图崩溃

> ID：15863966
> 
> 赞同：2
> 
> 时间：2013-04-07T15:15:32.000
> 
> 标签：android, email, android-intent, crash, galaxy

我制作了一个应用程序，可以通过单击按钮启动新的电子邮件意图，我已经在几台设备上对其进行了测试，它似乎工作正常，除了它在银河 2 和银河 3 上崩溃。这是我检查互联网访问的代码调用意图。

```
ConnectivityManager cm = (ConnectivityManager) getActivity().getSystemService(Context.CONNECTIVITY_SERVICE);
if((cm.getActiveNetworkInfo() != null && cm.getActiveNetworkInfo().isAvailable() && cm.getActiveNetworkInfo().isConnected())) 
{
    Log.d("Main", "Start Email");

    Intent sendIntent = new Intent(Intent.ACTION_VIEW);
    sendIntent.setClassName("com.google.android.gm","com.google.android.gm.ComposeActivityGmail");
    sendIntent.putExtra(Intent.EXTRA_EMAIL, new String[] { monkey.getSendTo() });
    sendIntent.setData(Uri.parse(monkey.getSendTo()));
    sendIntent.putExtra(Intent.EXTRA_SUBJECT, "TFS note");
    sendIntent.setType("plain/text");
    sendIntent.putExtra(Intent.EXTRA_TEXT, "Sent From TFS\n");
    startActivity(sendIntent);

} else{//toast if there is no internet
    Toast.makeText(getActivity().getBaseContext(),"No Internet\n   access", 
    Toast.LENGTH_SHORT).show();
} 
```

在我看来，在银河设备上，它没有对 gmail 应用程序进行罚款，因此它无法启动意图，所以我想知道如何制定一个通用意图来打开任何形式的电子邮件应用程序，或者是否有是使其与银河设备兼容的更好方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T15:20:51.307

请删除：

```
sendIntent.setClassName("com.google.android.gm","com.google.android.gm.ComposeActivityGmail"); 
```

这是对用户的侮辱，迫使他们使用 Gmail。它是用户的设备、用户的带宽、用户的电池、用户的数据和用户的时间。请允许用户按照用户的意愿发送用户的数据。

此外，该活动可能并不存在于所有版本的 Gmail 中，并且该活动可能不会在所有版本的 Gmail 中导出。

另外，请更改：

```
sendIntent.setType("plain/text"); 
```

至：

```
sendIntent.setType("text/plain"); 
```

as`plain/text`不是有效的 MIME 类型。

你也应该摆脱所有的`ConnectivityManager`东西。并非用户想要共享此信息的所有方式都需要立即连接 Internet。

这些都与您的崩溃无关，这是因为您引用了一个`com.example.tfs.MainCalActivity`APK 中不存在的活动 ( )。

# c# - C# 中的 AES256 加密

> ID：15863969
> 
> 赞同：1
> 
> 时间：2013-04-07T15:15:50.267
> 
> 标签：c#, aes

我正在使用`System.Security.Cryptography.RijndaelManaged`C#(.NET 3.5) 中的类通过设置进行加密：

```
RijndaelManaged AesCrypto = new RijndaelManaged();
AesCrypto.BlockSize = 128;
AesCrypto.Mode = CipherMode.CBC;
CryptoStream CryptStream = new CryptoStream(memStream1,
    AesCrypto.CreateEncryptor(EncryptionKey1, EncryptionIV1),
                    CryptoStreamMode.Write); 
```

并带有 256 位密钥和 IV。我相信这会导致 AES256。我对吗？

如果我使用`System.Security.Cryptography.AesManaged`类，会有什么不同吗？

另外，我在想，我们信任微软的 AES 实现，这可以验证，还是应该编写自己的 AES 实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:28:19.337

`AesManaged`关于和之间的区别`RijndaelManaged`：

> AES 算法本质上是具有固定块大小和迭代次数的 Rijndael 对称算法。此类的功能与 RijndaelManaged 类相同，但将块限制为 128 位并且不允许反馈模式。

取自 MSDN，这里是[http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx)

# oracle - 在子查询中使用 rownum

> ID：15863973
> 
> 赞同：1
> 
> 时间：2013-04-07T15:16:25.293
> 
> 标签：oracle, subquery, rownum

在算法中，用户通过查询，例如：

```
SELECT o_orderdate, o_orderpriority FROM h_orders WHERE rownum <= 5 
```

查询返回以下内容：

```
1996-01-02  5-LOW
1996-12-01  1-URGENT
1993-10-14  5-LOW
1995-10-11  5-LOW
1994-07-30  5-LOW 
```

该算法需要选择属性的计数（`o_orderdate, o_orderpriority`在上面的示例中），因此它将查询重写为：

```
SELECT o_orderdate, count(o_orderdate) FROM 
  (SELECT o_orderdate, o_orderpriority FROM h_orders WHERE rownum <= 5) 
GROUP BY o_orderdate 
```

此查询返回以下内容：

```
1992-01-01  5 
```

然而，预期的结果是：

```
1996-12-01  1
1995-10-11  1
1994-07-30  1
1996-01-02  1
1993-10-14  1 
```

知道如何重写解析阶段或用户如何通过语法不同的查询来接收上述结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:28:30.680

内部查询返回的行本质上是不确定的，因为它们取决于优化器将行标识为所需数据集的一部分的顺序。由于修改谓词而导致的执行计划更改可能会更改行返回的顺序，并且添加到表中的新行也可以更改包含哪些行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:52:41.343

如果您总是想要`n`行，那么可以在内部查询中使用`distinct(o_orderdate)`，这将导致`GROUP BY`无用。

或者您可以添加另一个外部`select`以`rownum`获取`n`分组行，如下所示：

```
select o_orderdate, counter from
(
    SELECT o_orderdate, count(o_orderdate) as counter FROM 
      (SELECT o_orderdate, o_orderpriority FROM h_orders) 

    GROUP BY o_orderdate
)
WHERE rownum <= 5 
```

尽管结果很可能是无用的，因为它们是不确定的（正如 David Aldridge 所提到的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T00:09:51.103

由于您的外部查询没有使用“o_orderpriority”，为什么不干脆摆脱子查询并像这样简单地查询：

```
SELECT o_orderdate, count(o_orderdate) AS order_count
FROM h_orders
WHERE rownum <= 5
GROUP BY o_orderdate 
```

# c++ - 在 C++ 中声明函数返回字符串

> ID：15863974
> 
> 赞同：1
> 
> 时间：2013-04-07T15:16:27.023
> 
> 标签：c++, objective-c, string, function

我试图在头文件中声明函数返回字符串，因为我将从objective-c调用它。基本上这会工作，不是吗？

```
std::string myFunction(); 
```

但它抛出错误消息说“预期';' 在顶级声明符之后”，搜索了很多，每个人都建议将#include放在头文件中，我也尝试过但是它不起作用，这次它抛出另一个错误消息“'string'file not found”。

让另一个函数返回双倍并且没有问题。

```
double doSomething(double a); 
```

-

```
#include <string> 
```

不起作用，它抛出错误消息说**“'string' file not found”**。已尝试创建新项目以防万一我的项目可能被损坏但它不起作用我应该在搜索路径等中放置一些东西吗？

![在此处输入图像描述](https://i.stack.imgur.com/w3ZSj.png)

我终于成功了。 **解决方案：**在 Build Settings / Apple LLVM Compiler 4.2 下将“Compile Source As”设置更改为**Objective-C++**，它就像一个魅力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:17:49.970

至少，您必须包含 C++ 标准库标头[`string`](http://en.cppreference.com/w/cpp/header/string)，其中`std::string`声明了类（实际上，它是类模板的 typedef，但那是另一回事）。

```
#include <string>

std::string myFunction(); 
```

您还应该确保在自己的标头中使用[包含防护。](http://en.wikipedia.org/wiki/Include_guard)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T15:18:25.560

你错过了头文件：

```
 #include <string> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T15:36:58.297

您必须记住，ObjC 文件是基于 C 而不是 C++ 构建的，如果您想在 Objective-C 中使用 C++ 文件，您需要将 ObjC 文件的扩展名从 .m 更改为 .mm 以使其成为 ObjC++ 文件，或者否则就像试图在 C 文件中包含 C++ 头文件一样。

# c++ - c++ 复制直到算法

> ID：15863975
> 
> 赞同：1
> 
> 时间：2013-04-07T15:16:29.223
> 
> 标签：c++, algorithm, vector

我有一个函数，预计将通过`const char *`. 如果我必须将每个字符复制到 a `vector<char>`，执行操作的最佳（即：最有效）方法是什么？

我`copy`在**algorithm**中考虑过，不确定它是否是更“优雅”的解决方案：

```
void
example
    (const char * const s)
{
    copy(s, s+strlen(s), myvector.begin())
} 
```

（希望，鉴于我的“个人”缩进风格，代码对你来说仍然是可读的）

但我确信 STL 实现了一些允许我复制的东西，*直到*在字符串中找到一个空字符。

（如果您想知道为什么我会收到一个`const char *`，那么，这是编译器在用户使用时态变量时创建的类型，并且我的函数预计会被称为`example("fvh")`。欢迎使用替代解决方案）

提前致谢。最好的问候， Kalrish

## 编辑：

在尝试了@ipc 和@juanchopanza 所说的之后，我觉得很愚蠢：它就像一个魅力。

仍然不确定我是否会失去性能，但无论如何，编译器都会进行隐式转换，而且它是纯 C++，所以这绝对是要走的路。

非常感谢，也很抱歉。祝你好运，卡尔里什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:29:58.943

我不知道副本，直到。

这是一个副本，直到`'\0'`：

```
#include <cstddef>
#include <algorithm>
#include <iostream>
#include <iterator>

struct str_copy_iterator {
  bool at_end;
  char const* ptr;
  char operator*() const { return *ptr; }
  typedef char value_type;
  typedef std::ptrdiff_t difference_type;
  typedef char* pointer;
  typedef char& reference;
  typedef std::output_iterator_tag iterator_category;
  str_copy_iterator():at_end(true) {}
  str_copy_iterator(char const* p):at_end(!p||!*p), ptr(p) {}
  str_copy_iterator& operator++() {
    ++ptr;
    at_end = !*ptr;
    return *this;
  }
  str_copy_iterator operator++(int) {
    str_copy_iterator tmp = *this;
    ++(*this);
    return tmp;
  }
  bool operator!=( str_copy_iterator const& o ) const {
     return !(*this == o);
  }
  bool operator==( str_copy_iterator const& o ) const {
    if (at_end)
      return o.at_end;
    if (o.at_end)
      return false;
    return ptr == o.ptr;
  }
};
int main() {
   const char* bob = "hello world!";
   char buff[100] = {};
   std::copy(str_copy_iterator(bob), str_copy_iterator(), &buff[0] );
   std::cout << buff << "\n";
} 
```

将其扩展`str_copy_iterator`为通用`iterator_until`包装器留给读者作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:24:00.690

您可以使用`std::string`, 和`std::vector::assign`方法。

```
void example(const std::string& s)
{
    myvector.assign(s.begin(), s.end()):
} 
```

# java - Java：文件输出流（拒绝访问）

> ID：15863977
> 
> 赞同：0
> 
> 时间：2013-04-07T15:16:45.310
> 
> 标签：java, java-io, fileoutputstream

我正在使用 AESCrypt 开源库来加密文件。这是我的代码

```
String password="asdfgh";
String frompath=new String("C:/Users/sabertooth/Desktop/error/pnberror.png");
String topath=new String("C:/Users/sabertooth/desktop/error/");
AESCrypt aes=new AESCrypt(false,password);
aes.encrypt(2, frompath, topath); 
```

我收到拒绝访问异常。这是堆栈跟踪

```
Exception in thread "main" java.io.FileNotFoundException: C:\Users\sabertooth\desktop\error (Access is denied)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
    at AESCrypt.encrypt(AESCrypt.java:284)
    at NewClass.main(NewClass.java:28)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

发布 aescrypt.java 的代码

```
/*
 * Copyright 2008 Vócali Sistemas Inteligentes
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.UnsupportedEncodingException;
import java.net.NetworkInterface;
import java.security.GeneralSecurityException;
import java.security.InvalidKeyException;
import java.security.MessageDigest;
import java.security.SecureRandom;
import java.util.Arrays;
import java.util.Enumeration;

import javax.crypto.Cipher;
import javax.crypto.Mac;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

/**
 * This class provides methods to encrypt and decrypt files using
 * <a href="http://www.aescrypt.com/aes_file_format.html">aescrypt file format</a>,
 * version 1 or 2.
 * <p>
 * Requires Java 6 and <a href="http://java.sun.com/javase/downloads/index.jsp">Java
 * Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files</a>.
 * <p>
 * Thread-safety and sharing: this class is not thread-safe.<br>
 * <tt>AESCrypt</tt> objects can be used as Commands (create, use once and dispose),
 * or reused to perform multiple operations (not concurrently though).
 *
 * @author Vócali Sistemas Inteligentes
 */
public class AESCrypt {
    private static final String JCE_EXCEPTION_MESSAGE = "Please make sure "
        + "\"Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files\" "
        + "(http://java.sun.com/javase/downloads/index.jsp) is installed on your JRE.";
    private static final String RANDOM_ALG = "SHA1PRNG";
    private static final String DIGEST_ALG = "SHA-256";
    private static final String HMAC_ALG = "HmacSHA256";
    private static final String CRYPT_ALG = "AES";
    private static final String CRYPT_TRANS = "AES/CBC/NoPadding";
    private static final byte[] DEFAULT_MAC =
        {0x01, 0x23, 0x45, 0x67, (byte) 0x89, (byte) 0xab, (byte) 0xcd, (byte) 0xef};
    private static final int KEY_SIZE = 32;
    private static final int BLOCK_SIZE = 16;
    private static final int SHA_SIZE = 32;

    private final boolean DEBUG;
    private byte[] password;
    private Cipher cipher;
    private Mac hmac;
    private SecureRandom random;
    private MessageDigest digest;
    private IvParameterSpec ivSpec1;
    private SecretKeySpec aesKey1;
    private IvParameterSpec ivSpec2;
    private SecretKeySpec aesKey2;

    /*******************
     * PRIVATE METHODS *
     *******************/

    /**
     * Prints a debug message on standard output if DEBUG mode is turned on.
     */
    protected void debug(String message) {
        if (DEBUG) {
            System.out.println("[DEBUG] " + message);
        }
    }

    /**
     * Prints a debug message on standard output if DEBUG mode is turned on.
     */
    protected void debug(String message, byte[] bytes) {
        if (DEBUG) {
            StringBuilder buffer = new StringBuilder("[DEBUG] ");
            buffer.append(message);
            buffer.append("[");
            for (int i = 0; i < bytes.length; i++) {
                buffer.append(bytes[i]);
                buffer.append(i < bytes.length - 1 ? ", " : "]");
            }
            System.out.println(buffer.toString());
        }
    }

    /**
     * Generates a pseudo-random byte array.
     * @return pseudo-random byte array of <tt>len</tt> bytes.
     */
    protected byte[] generateRandomBytes(int len) {
        byte[] bytes = new byte[len];
        random.nextBytes(bytes);
        return bytes;
    }

    /**
     * SHA256 digest over given byte array and random bytes.<br>
     * <tt>bytes.length</tt> * <tt>num</tt> random bytes are added to the digest.
     * <p>
     * The generated hash is saved back to the original byte array.<br>
     * Maximum array size is {@link #SHA_SIZE} bytes.
     */
    protected void digestRandomBytes(byte[] bytes, int num) {
        assert bytes.length <= SHA_SIZE;

        digest.reset();
        digest.update(bytes);
        for (int i = 0; i < num; i++) {
            random.nextBytes(bytes);
            digest.update(bytes);
        }
        System.arraycopy(digest.digest(), 0, bytes, 0, bytes.length);
    }

    /**
     * Generates a pseudo-random IV based on time and this computer's MAC.
     * <p>
     * This IV is used to crypt IV 2 and AES key 2 in the file.
     * @return IV.
     */
    protected byte[] generateIv1() {
        byte[] iv = new byte[BLOCK_SIZE];
        long time = System.currentTimeMillis();
        byte[] mac = null;
        try {
            Enumeration<NetworkInterface> ifaces = NetworkInterface.getNetworkInterfaces();
            while (mac == null && ifaces.hasMoreElements()) {
                mac = ifaces.nextElement().getHardwareAddress();
            }
        } catch (Exception e) {
            // Ignore.
        }
        if (mac == null) {
            mac = DEFAULT_MAC;
        }

        for (int i = 0; i < 8; i++) {
            iv[i] = (byte) (time >> (i * 8));
        }
        System.arraycopy(mac, 0, iv, 8, mac.length);
        digestRandomBytes(iv, 256);
        return iv;
    }

    /**
     * Generates an AES key starting with an IV and applying the supplied user password.
     * <p>
     * This AES key is used to crypt IV 2 and AES key 2.
     * @return AES key of {@link #KEY_SIZE} bytes.
     */
    protected byte[] generateAESKey1(byte[] iv, byte[] password) {
        byte[] aesKey = new byte[KEY_SIZE];
        System.arraycopy(iv, 0, aesKey, 0, iv.length);
        for (int i = 0; i < 8192; i++) {
            digest.reset();
            digest.update(aesKey);
            digest.update(password);
            aesKey = digest.digest();
        }
        return aesKey;
    }

    /**
     * Generates the random IV used to crypt file contents.
     * @return IV 2.
     */
    protected byte[] generateIV2() {
        byte[] iv = generateRandomBytes(BLOCK_SIZE);
        digestRandomBytes(iv, 256);
        return iv;
    }

    /**
     * Generates the random AES key used to crypt file contents.
     * @return AES key of {@link #KEY_SIZE} bytes.
     */
    protected byte[] generateAESKey2() {
        byte[] aesKey = generateRandomBytes(KEY_SIZE);
        digestRandomBytes(aesKey, 32);
        return aesKey;
    }

    /**
     * Utility method to read bytes from a stream until the given array is fully filled.
     * @throws IOException if the array can't be filled.
     */
    protected void readBytes(InputStream in, byte[] bytes) throws IOException {
        if (in.read(bytes) != bytes.length) {
            throw new IOException("Unexpected end of file");
        }
    }

    /**************
     * PUBLIC API *
     **************/

    /**
     * Builds an object to encrypt or decrypt files with the given password.
     * @throws GeneralSecurityException if the platform does not support the required cryptographic methods.
     * @throws UnsupportedEncodingException if UTF-16 encoding is not supported.
     */
    public AESCrypt(String password) throws GeneralSecurityException, UnsupportedEncodingException {
        this(false, password);
    }

    /**
     * Builds an object to encrypt or decrypt files with the given password.
     * @throws GeneralSecurityException if the platform does not support the required cryptographic methods.
     * @throws UnsupportedEncodingException if UTF-16 encoding is not supported.
     */
    public AESCrypt(boolean debug, String password) throws GeneralSecurityException, UnsupportedEncodingException {
        try {
            DEBUG = debug;
            setPassword(password);
            random = SecureRandom.getInstance(RANDOM_ALG);
            digest = MessageDigest.getInstance(DIGEST_ALG);
            cipher = Cipher.getInstance(CRYPT_TRANS);
            hmac = Mac.getInstance(HMAC_ALG);
        } catch (GeneralSecurityException e) {
            throw new GeneralSecurityException(JCE_EXCEPTION_MESSAGE, e);
        }
    }

    /**
     * Changes the password this object uses to encrypt and decrypt.
     * @throws UnsupportedEncodingException if UTF-16 encoding is not supported.
     */
    public void setPassword(String password) throws UnsupportedEncodingException {
        this.password = password.getBytes("UTF-16LE");
        debug("Using password: ", this.password);
    }

    /**
     * The file at <tt>fromPath</tt> is encrypted and saved at <tt>toPath</tt> location.
     * <p>
     * <tt>version</tt> can be either 1 or 2.
     * @throws IOException when there are I/O errors.
     * @throws GeneralSecurityException if the platform does not support the required cryptographic methods.
     */
    public void encrypt(int version, String fromPath, String toPath)
    throws IOException, GeneralSecurityException {
        InputStream in = null;
        OutputStream out = null;
        try {
            in = new BufferedInputStream(new FileInputStream(fromPath));
            debug("Opened for reading: " + fromPath);
            out = new BufferedOutputStream(new FileOutputStream(toPath));
            debug("Opened for writing: " + toPath);

            encrypt(version, in, out);
        } finally {
            if (in != null) {
                in.close();
            }
            if (out != null) {
                out.close();
            }           
        }
    }

    /**
     * The input stream is encrypted and saved to the output stream.
     * <p>
     * <tt>version</tt> can be either 1 or 2.<br>
     * None of the streams are closed.
     * @throws IOException when there are I/O errors.
     * @throws GeneralSecurityException if the platform does not support the required cryptographic methods.
     */
    public void encrypt(int version, InputStream in, OutputStream out)
    throws IOException, GeneralSecurityException {
        try {
            byte[] text = null;

            ivSpec1 = new IvParameterSpec(generateIv1());
            aesKey1 = new SecretKeySpec(generateAESKey1(ivSpec1.getIV(), password), CRYPT_ALG);
            ivSpec2 = new IvParameterSpec(generateIV2());
            aesKey2 = new SecretKeySpec(generateAESKey2(), CRYPT_ALG);
            debug("IV1: ", ivSpec1.getIV());
            debug("AES1: ", aesKey1.getEncoded());
            debug("IV2: ", ivSpec2.getIV());
            debug("AES2: ", aesKey2.getEncoded());

            out.write("AES".getBytes("UTF-8")); // Heading.
            out.write(version); // Version.
            out.write(0);   // Reserved.
            if (version == 2) { // No extensions.
                out.write(0);
                out.write(0);
            }
            out.write(ivSpec1.getIV()); // Initialization Vector.

            text = new byte[BLOCK_SIZE + KEY_SIZE];
            cipher.init(Cipher.ENCRYPT_MODE, aesKey1, ivSpec1);
            cipher.update(ivSpec2.getIV(), 0, BLOCK_SIZE, text);
            cipher.doFinal(aesKey2.getEncoded(), 0, KEY_SIZE, text, BLOCK_SIZE);
            out.write(text);    // Crypted IV and key.
            debug("IV2 + AES2 ciphertext: ", text);

            hmac.init(new SecretKeySpec(aesKey1.getEncoded(), HMAC_ALG));
            text = hmac.doFinal(text);
            out.write(text);    // HMAC from previous cyphertext.
            debug("HMAC1: ", text);

            cipher.init(Cipher.ENCRYPT_MODE, aesKey2, ivSpec2);
            hmac.init(new SecretKeySpec(aesKey2.getEncoded(), HMAC_ALG));
            text = new byte[BLOCK_SIZE];
            int len, last = 0;
            while ((len = in.read(text)) > 0) {
                cipher.update(text, 0, BLOCK_SIZE, text);
                hmac.update(text);
                out.write(text);    // Crypted file data block.
                last = len;
            }
            last &= 0x0f;
            out.write(last);    // Last block size mod 16.
            debug("Last block size mod 16: " + last);

            text = hmac.doFinal();
            out.write(text);    // HMAC from previous cyphertext.
            debug("HMAC2: ", text);
        } catch (InvalidKeyException e) {
            throw new GeneralSecurityException(JCE_EXCEPTION_MESSAGE, e);
        }
    }

    /**
     * The file at <tt>fromPath</tt> is decrypted and saved at <tt>toPath</tt> location.
     * <p>
     * The input file can be encrypted using version 1 or 2 of aescrypt.<br>
     * @throws IOException when there are I/O errors.
     * @throws GeneralSecurityException if the platform does not support the required cryptographic methods.
     */
    public void decrypt(String fromPath, String toPath)
    throws IOException, GeneralSecurityException {
        InputStream in = null;
        OutputStream out = null;
        try {
            in = new BufferedInputStream(new FileInputStream(fromPath));
            debug("Opened for reading: " + fromPath);
            out = new BufferedOutputStream(new FileOutputStream(toPath));
            debug("Opened for writing: " + toPath);

            decrypt(new File(fromPath).length(), in, out);
        } finally {
            if (in != null) {
                in.close();
            }
            if (out != null) {
                out.close();
            }
        }
    }   

    /**
     * The input stream is decrypted and saved to the output stream.
     * <p>
     * The input file size is needed in advance.<br>
     * The input stream can be encrypted using version 1 or 2 of aescrypt.<br>
     * None of the streams are closed.
     * @throws IOException when there are I/O errors.
     * @throws GeneralSecurityException if the platform does not support the required cryptographic methods.
     */
    public void decrypt(long inSize, InputStream in, OutputStream out)
    throws IOException, GeneralSecurityException {
        try {
            byte[] text = null, backup = null;
            long total = 3 + 1 + 1 + BLOCK_SIZE + BLOCK_SIZE + KEY_SIZE + SHA_SIZE + 1 + SHA_SIZE;
            int version;

            text = new byte[3];
            readBytes(in, text);    // Heading.
            if (!new String(text, "UTF-8").equals("AES")) {
                throw new IOException("Invalid file header");
            }

            version = in.read();    // Version.
            if (version < 1 || version > 2) {
                throw new IOException("Unsupported version number: " + version);
            }
            debug("Version: " + version);

            in.read();  // Reserved.

            if (version == 2) { // Extensions.
                text = new byte[2];
                int len;
                do {
                    readBytes(in, text);
                    len = ((0xff & (int) text[0]) << 8) | (0xff & (int) text[1]);
                    if (in.skip(len) != len) {
                        throw new IOException("Unexpected end of extension");
                    }
                    total += 2 + len;
                    debug("Skipped extension sized: " + len);
                } while (len != 0);
            }

            text = new byte[BLOCK_SIZE];
            readBytes(in, text);    // Initialization Vector.
            ivSpec1 = new IvParameterSpec(text);
            aesKey1 = new SecretKeySpec(generateAESKey1(ivSpec1.getIV(), password), CRYPT_ALG);
            debug("IV1: ", ivSpec1.getIV());
            debug("AES1: ", aesKey1.getEncoded());

            cipher.init(Cipher.DECRYPT_MODE, aesKey1, ivSpec1);
            backup = new byte[BLOCK_SIZE + KEY_SIZE];
            readBytes(in, backup);  // IV and key to decrypt file contents.
            debug("IV2 + AES2 ciphertext: ", backup);
            text = cipher.doFinal(backup);
            ivSpec2 = new IvParameterSpec(text, 0, BLOCK_SIZE);
            aesKey2 = new SecretKeySpec(text, BLOCK_SIZE, KEY_SIZE, CRYPT_ALG);
            debug("IV2: ", ivSpec2.getIV());
            debug("AES2: ", aesKey2.getEncoded());

            hmac.init(new SecretKeySpec(aesKey1.getEncoded(), HMAC_ALG));
            backup = hmac.doFinal(backup);
            text = new byte[SHA_SIZE];
            readBytes(in, text);    // HMAC and authenticity test.
            if (!Arrays.equals(backup, text)) {
                throw new IOException("Message has been altered or password incorrect");
            }
            debug("HMAC1: ", text);

            total = inSize - total; // Payload size.
            if (total % BLOCK_SIZE != 0) {
                throw new IOException("Input file is corrupt");
            }
            if (total == 0) {   // Hack: empty files won't enter block-processing for-loop below. 
                in.read();  // Skip last block size mod 16.
            }
            debug("Payload size: " + total);

            cipher.init(Cipher.DECRYPT_MODE, aesKey2, ivSpec2);
            hmac.init(new SecretKeySpec(aesKey2.getEncoded(), HMAC_ALG));
            backup = new byte[BLOCK_SIZE];
            text = new byte[BLOCK_SIZE];
            for (int block = (int) (total / BLOCK_SIZE); block > 0; block--) {
                int len = BLOCK_SIZE;
                if (in.read(backup, 0, len) != len) {   // Cyphertext block.
                    throw new IOException("Unexpected end of file contents");
                }
                cipher.update(backup, 0, len, text);
                hmac.update(backup, 0, len);
                if (block == 1) {
                    int last = in.read();   // Last block size mod 16.
                    debug("Last block size mod 16: " + last);
                    len = (last > 0 ? last : BLOCK_SIZE);
                }
                out.write(text, 0, len);
            }
            out.write(cipher.doFinal());

            backup = hmac.doFinal();
            text = new byte[SHA_SIZE];
            readBytes(in, text);    // HMAC and authenticity test.
            if (!Arrays.equals(backup, text)) {
                throw new IOException("Message has been altered or password incorrect");
            }
            debug("HMAC2: ", text);
        } catch (InvalidKeyException e) {
            throw new GeneralSecurityException(JCE_EXCEPTION_MESSAGE, e);
        }
    }

/*  public static void main(String[] args) {
        try {
            if (args.length < 4) {
                System.out.println("AESCrypt e|d password fromPath toPath");
                return;
            }
            AESCrypt aes = new AESCrypt(true, args[1]);
            switch (args[0].charAt(0)) {
            case 'e':
                aes.encrypt(2, args[2], args[3]);
                break;
            case 'd':
                aes.decrypt(args[2], args[3]);
                break;
            default:
                System.out.println("Invalid operation: must be (e)ncrypt or (d)ecrypt.");
                return;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
*/        
} 
```

有一种方法 encrypt 它需要 3 个参数版本 frompath topath

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T15:20:57.383

您不能写入文件夹。并且`C:/Users/sabertooth/desktop/error/`是文件夹路径。

此外，`new String("...")`是不必要的。只需使用`"..."`.

# ejb-3.0 - 为什么不能在ejb-jar.xml文件中配置JNDI名称？

> ID：15863978
> 
> 赞同：0
> 
> 时间：2013-04-07T15:16:49.303
> 
> 标签：ejb-3.0, jndi, remote-access, java-ee-5

在使用 EJB 应用程序时，为什么我们需要一个额外的部署描述符（例如 jBoss.xml）来配置 JNDI 名称？我们不能在 ejb-jar.xml 文件本身中做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:40:53.820

从您的评论看来，您有兴趣设置远程 EJB 视图 JNDI 名称。

关键是 - 服务器中的 JNDI 名称是使用 Java EE 6 可移植 JNDI 名称定义的（每个容器都需要在这些名称下绑定 EJB。）

但是，任何文档都没有指定远程（导出的）JNDI 名称。这是前段时间让我感到困惑的事情之一。

您可能会使用 ACC（应用程序客户端容器）或遵循容器特定的配置。这意味着没有可移植的名称告诉容器在指定的 JNDI 名称下公开远程 EJB 视图。

进一步阅读：

*   [http://java.net/projects/ejb-spec/lists/users/archive/2012-11/message/13](http://java.net/projects/ejb-spec/lists/users/archive/2012-11/message/13)
*   [http://java.net/projects/ejb-spec/lists/users/archive/2013-01/message/41](http://java.net/projects/ejb-spec/lists/users/archive/2013-01/message/41)

# sql - 规范化成员地址

> ID：15863981
> 
> 赞同：4
> 
> 时间：2013-04-07T15:17:27.343
> 
> 标签：sql, database

我刚开始使用数据库，并且无法使用 member_address 实体进行规范化。由于没有代表，我似乎无法发布图片，因此我将尝试解释我的表格。

**成员（表）**
PK Member_ID
FK Member_Zip_Code
FK Membership_Type_code
ATT：First_Name
ATT：Last_name
ATT：Member_Phone
ATT：Member_Email

**Member_Address (表)**
PK Member_Zip_Code
FK Member_ID
ATT: Member Address
ATT: Member_State
ATT: Member_City

我不太明白如何处理这个问题。我在想我需要两个单独的表格来正确显示数据，但我的 PK 和 FK 似乎在这里并不完全正确。最好有一张满是州和城市的桌子吗？或者有一个邮政编码查找城市？在这里很迷失......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T15:53:15.993

在现实世界中，人们可以共享同一个地址，一个人可以拥有多个地址。此外，人们可以移动（不确定这对您的模型是否重要），因此人员和地址之间的关系应该具有 date_from/date_through 属性（同样，在您的应用程序的上下文中它可能并不重要，因此您可以跳过这部分） . 因此，我会选择类似的东西

**国家**：
country_id（PK）
名称

**州**：
state_id (PK)
名称
country_id (FK)

**地址**:
address_id (PK)
state_id (FK)
country_id (FK)
city
--其他属性，如address_line_1、unit_number、postal_code等...

**注意：为简单起见，我将 state_id 和 country_id 存储在这里，这在某种意义上破坏了 normalization 。但是，您可能希望允许人们不进入状态，并且并非所有国家/地区都有状态。

**Member_Address** :
member_address_id PK
member_id FK
address_id FK
date_from
date_thru
UNIQUE(member_id,address_id,date_from)

此外，您可能想要添加地址目的实体，并添加地址目的和成员地址之间的关系（例如，如果您需要区分家庭地址/工作地址/邮件地址）。

更进一步，您会看到邮政地址、电话和电子邮件都是通信手段，因此它们都可以视为通用实体的子类型，例如communication_mechanism...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T15:35:32.087

如果你看一下[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)，关于规范化有很多有趣的地方。您当然应该研究不同程度的标准化。

在您的情况下，您有一些成员，每个成员都有地址。设计中暗示成员只能有一个地址。同样，您的设计意味着该成员只有一部电话和一个电子邮件地址。您可以通过多种方式处理此问题，但对于初学者，您可能会考虑以下内容：

```
Member (Table)
MemberID (PK)
MemberAddressID (FK)
MembershipType (FK) -- To a dictionary-table with membership types.
FirstName (ATT)
LastName (ATT)
Phone (ATT) -- (*OR* it could be placed in a separate side-table with phonenumbers)
Email (ATT) -- (*OR* it could also be placed in a separate side-table)

Member_Address (Table)
Member_ID (FK)
Member Address (ATT)
Member_Zip_Code (ATT) -- (*OR* it could be FK to a separate table with Zip-codes, states and cities)
Member_City (ATT)
Member_State (ATT) 
```

`Member_city`严格来说，您违反了`Member_State`第二范式，因为我假设城市和州在邮政编码中是隐含的。将电话和电子邮件作为属性保留在表格中时，您违反了规范化，因为您的设计无法处理多个电话号码（家庭/工作/手机）或电子邮件地址。

通常，这是通过添加一些额外的属性来解决的，解决了当前的问题，但保持了对规范化的违反。干净/正确的解决方案是将这些信息放在一个单独的边表中，就像地址已经存在一样，然后使用 FK/PK 关系链接到该边表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:27:05.393

首先考虑实体和关系（概念设计），而不是直接构建物理模型（表格和索引）；你在你的问题中描述了一种混合体。

然后，识别唯一标识每个实例的每个实体的属性。那是一个（候选的，自然的）主键。对于每个实体，确定是否有额外的（候选的、自然的）主键。

然后使用相应的外键识别实体之间的每个关系。对于诸如此处的主从关系，确定详细实体中映射到主实体中（候选，自然）主键的属性集，从而构成该关系的外键。

现在您已准备好设计概念设计的物理模型的表和索引。

# android - 没有任何操作的通知？

> ID：15863986
> 
> 赞同：-2
> 
> 时间：2013-04-07T15:17:47.667
> 
> 标签：android, notifications

是否可以在没有任何操作的情况下获得通知？我想向用户显示下载进度，下载完成后，通知用户下载完成，用户可以清除通知。当用户单击通知时，我不想启动另一个活动。是否可以？如果是，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T15:18:26.623

只需创建一个通知，不要将 PendingIntent 附加到它。

# javascript - 从 KML 提要中获取坐标以与 mapbox 一起使用

> ID：15863992
> 
> 赞同：0
> 
> 时间：2013-04-07T15:18:01.480
> 
> 标签：javascript, jquery, kml, foursquare, mapbox

我正在尝试从我的foursquare 提要中获取坐标，并在地图中使用它们以显示在网站上。主要是作为学习 javascript 和 Mapbox 的练习——我是新手。

我使用了 mapbox 的“添加单个标记”代码和其他一些代码来循环遍历我的 KML 以查找坐标，[因为 mapbox 不接受 KML](http://support.mapbox.com/discussions/general-questions/8523-can-kml-point-data-be-read-directly-into-mapbox)。

不知何故，我无法让它工作。非常感谢任何提示！

```
<!-- Foursquare map -->
<script>

    // get coordinates and place from Foursquare feed
    $(document).ready(function(){

        $.get("https://feeds.foursquare.com/history/6a46a109e06aa6d74d34b42b397806d5.kml?count=1", function(data){

            $(data).find("Placemark").each(function(index, value){

                coords = $(this).find("coordinates").text();
                place = $(this).find("name").text();
                pos = coords.split(",")

                    var features = [{
                        "geometry": { "type": "Point", "coordinates": pos[0], pos[1]},
                        "properties": { "place": place }       
                    }];
            });
        });
    });        

    // start Mapbox
    var map = mapbox.map('map-canvas').zoom(5).center({
        lat: 0,
        lon: 0
        });

  map.addLayer(mapbox.layer().id('rikwuts.map-0i5jiwdn'));

  // Create an empty markers layer
  var markerLayer = mapbox.markers.layer().features(features);

  // Add interaction to this marker layer. This
  // binds tooltips to each marker that has title
  // and description defined.
  mapbox.markers.interaction(markerLayer);
  map.addLayer(markerLayer);

  // Add a single feature to the markers layer.
  // You can use .features() to add multiple features.
  markerLayer.add_feature({
      geometry: {
          // The order of coordinates here is lon, lat. This is because
          // we use the GeoJSON specification for all marker features.
          // (lon, lat is also the internal order of KML and other geographic formats)
          coordinates: [ pos.lng, pos.lat ]
      },
      properties: {
          // these properties customize the look of the marker
          // see the simplestyle-spec for a full reference:
          // https://github.com/mapbox/simplestyle-spec
          'marker-color': '#00ff00',
          'marker-symbol': 'star-stroked',
          title: place,
          description: 'This is a single marker.'
      }
  });

  // Attribute map
  map.ui.attribution.add()
      .content('<a href="http://mapbox.com/about/maps">Thanks to Mapbox</a>');
</script>

<div id="map-canvas"></div>
<!-- END map --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T18:27:01.550

您可以使用[toGeoJSON](https://github.com/tmcw/togeojson)将 KML 转换为 MapBox.js 的 GeoJSON。

# jquery - jQuery Deferred 应该可以工作，但不能

> ID：15863994
> 
> 赞同：1
> 
> 时间：2013-04-07T15:18:25.247
> 
> 标签：jquery, spotify, deferred

我有一个 Spotify 应用程序，想等待一个循环完成。但它只在重新加载我的应用程序一次后才有效。

```
function matchRecommendations(result) {
var deferreds = new Array();
for ( var i = 0; i < result.length; i++) {
    // Async wait
    var dfd = $.Deferred();
    deferreds.push(dfd.promise());

    ...

    // Wait for search to finish
    search.tracks.snapshot(0, 1).done(
            function(snapshot) {
                // If match was found => create recommendation object
                var uri = snapshot._uris[0];
                var meta = snapshot._meta[0];
                if ($.type(meta) !== "undefined") {
                    if ($.type(meta.name) === "string") {
                        console.log(uri);
                        var rec = new Recommendation(uri, meta,
                                explanation, score);
                        RadioView.prototype.addRecommendation(rec);
                    }
                }

                // Async task finished
                dfd.resolve();
            });
}

return deferreds;
} 
```

这里我调用了上面的方法，想等它完成。

```
 $.when.apply($, matchRecommendations(result)).done(
                            function() {
                                console.log("finished");
                                RadioView.prototype.render();
                            }); 
```

我看不出为什么这不起作用的问题。问题是第一次加载时没有执行“完成”回调。如果我重新加载应用程序，它就可以正常工作......延迟的东西有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:27:38.080

您的代码似乎存在范围问题，这就是为什么可能只有最后一个 deferred 会得到解决的原因。我不知道您如何检查`done`正在执行的回调（未执行），但范围问题可能会导致您的问题（除非`result.length`恰好是 1）。

您需要为每个延迟创建一个新范围：

```
var deferreds = [];
for (var i = 0; i < result.length; i++) {
  (function(dfd) {
    deferreds.push(dfd.promise());
    search.tracks.snapshot(0, 1).done(function(snapshot) {
      ...
      dfd.resolve();
    });
  })($.Deferred());
}; 
```

如果`result`碰巧是一个数组，您可以创建一些更具可读性的代码：

```
var deferreds = $.map(result, function() {
  var dfd = $.Deferred();
  search.tracks.snapshot(0, 1).done(...);
  return dfd.promise();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T00:36:11.793

这确实是一个熟悉的旧范围问题，其中只有一个范围，`matchRecommendations()`并且在其循环中设置的所有变量`for`都有其最终值，而当该循环退出时没有其他值。

有很多方法可以解决这个问题，最简单的（因为您已经在使用 jQuery）是`result`使用`jQuery.each()`.

代码如下所示：

```
function matchRecommendations(result) {
    var promises = [];
    $.each(result, function(i, rslt) {
        ...
        var p = search.tracks.snapshot(0, 1).done(function(snapshot) {
            var uri = snapshot._uris[0];
            var meta = snapshot._meta[0];
            if ($.type(meta) !== "undefined" && $.type(meta.name) === "string") {
                console.log(uri);
                RadioView.prototype.addRecommendation(new Recommendation(uri, meta, explanation, score));
            }
        });
        promises.push(p);
    });
    return promises;
} 
```

笔记：

*   正如@adeneo 指出的那样，`search.tracks.snapshot()`返回一个promise（至少假设它似乎是安全的），所以没有必要创建一个二级Deferred 以级联方式解决。
*   （Doh！）如果没有辅助 Deferred，范围问题实际上会消失，因此如果您愿意，可以返回`for`循环。

# c++ - 插入排序算法，我的代码有什么问题？

> ID：15863998
> 
> 赞同：0
> 
> 时间：2013-04-07T15:18:36.033
> 
> 标签：c++, sorting, insertion-sort

我正在尝试使用 InsertSort 算法来输入存储在向量中的字符串。

我所做的是将一些字符串输入到向量中，然后我使用插入排序对向量进行排序。

但我不确定为什么它不起作用！谁能指出我正确的方向？

```
#include <iostream>
#include <cstring>
#include <vector>
#include <cstdlib>
using namespace std;

int main (){
    vector <string> names; //vector to store
    string input; //input is the variable of strings

    cout<<"Input a list of names \n";
    cout<<"To end the list type 'END'" <<endl;

    while (true){
        getline(cin, input);

        if (input =="END")
        break;

        names.push_back(input); //push into vector names
    }

  //my insertsort starts here
  string temp;
  int i;
  for (int j = 1; j < names.size(); j++){
        i = j - 1;        

        while ((i>0) && (names[i]>names[j]) ) {

            names[i+1] = names[i];

            i=i-1;         
                                                 }

        names[i+1] = names[j];

    }

    for (unsigned int i = 0; i<names.size (); i++)
    cout<<names[i]<<endl;
    cout<<endl;
    system("pause");
} 
```

谢谢一堆

编辑：我将输入字符串，例如我将输入：

彼得苹果兔

我想要的输出是，按字母顺序，：

苹果彼得兔

目前使用示例输入，我得到： Peter Apple Rabbit

编辑 3：

我的插入排序现在看起来像这样：

```
 string temp;
  int i;
  for (int j = 1; j < names.size(); j++){
        i = j - 1;        
        temp = names[j];

 while ((i>=0) && (names[i]>names[j]) ) {
    names[i+1] = names[i];
    i=i-1;                                                  
                                        }

 names[i+1] = temp;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:23:13.330

你错过了一点：

```
 //You have to remember names[j] before while loop
 //the variable temp is never used
 temp = names[j];
 while ((i>=0) && (names[i]>temp) ) {
    names[i+1] = names[i];
    i=i-1;                                                  
 }
 names[i+1] = temp;
 // since names[j] was already been filled by other words during swapping 
```

如果不需要使用插入排序，最好使用stl排序算法。

# php - PHP按日期对多维数组进行排序

> ID：15863999
> 
> 赞同：5
> 
> 时间：2013-04-07T15:18:37.613
> 
> 标签：php, arrays, date, sorting

我有问题。我有一个多维数组，看起来像这样：

```
Array ( [0] => 
              Array ( 
                    [0] => Testguy2's post. 
                    [1] => testguy2 
                    [2] => 2013-04-03 
              ) 

        [1] => Array ( 
                    [0] => Testguy's post. 
                    [1] => testguy 
                    [2] => 2013-04-07 
              ) 
); 
```

我想从最新日期到最旧日期对帖子进行排序，所以它看起来像这样：

```
Array ( [1] => Array ( 
                     [0] => Testguy's post. 
                     [1] => testguy 
                     [2] => 2013-04-07 
               ) 
        [0] => Array ( 
                     [0] => Testguy2's post. 
                     [1] => testguy2 
                     [2] => 2013-04-03
               ) 
); 
```

我该如何排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T15:25:40.450

```
function cmp($a, $b){

    $a = strtotime($a[2]);
    $b = strtotime($b[2]);

    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

usort($array, "cmp"); 
```

或 >= PHP 7

```
usort($array, function($a, $b){
    return strtotime($a[2]) <=> strtotime($b[2]);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-07T15:39:46.363

你可以使用`usort`a来做到这一点`Closure`：

```
usort($array, function($a, $b) {
    $a = strtotime($a[2]);
    $b = strtotime($b[2]);
    return (($a == $b) ? (0) : (($a > $b) ? (1) : (-1)));
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T15:28:13.260

我只是离开我的办公桌，所以我不能提供细节。但这是一个很好的起点，其中包括示例：[array_multisort](http://www.php.net/manual/en/function.array-multisort.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-17T08:07:04.753

```
$dates = array();       
foreach($a AS $val){
    $dates[] = strtotime($val[2]);
}
array_multisort($dates, SORT_ASC, $a); 
```