# StackOverflow 问答 13734000-13734999

# ssis - SSIS - 参考 DLL 动态目录

> ID：13734004
> 
> 赞同：2
> 
> 时间：2012-12-05T22:53:57.047
> 
> 标签：ssis

我正在尝试通过 SSIS 创建一些 Crystal Reports，当它可以找到 DLL 时效果非常好，但在找不到时效果不佳。

我已经进入包添加引用，但问题是当包从 SQL 代理运行时，它找不到引用，因为它们不在该驱动器路径中。

是否可以将 DLL 文件放在可以独立访问的单独位置，并将 DLL 的路径存储在变量中，然后以编程方式引用或动态定义路径？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:18:52.377

SSIS 中使用的所有 DLL 引用都需要向**GAC**注册。

您有几个不同的选项可以做到这一点，请查看我之前的答案以了解如何：[如何在 SSIS 包中使用 COM 引用？](https://stackoverflow.com/questions/13127549/how-do-i-use-com-reference-within-ssis-package/13139252#13139252)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:42:33.463

您可以尝试将 DLL 复制到 SQL Server 二进制文件夹（在我的情况下为“C:\Program Files (x86)\Microsoft SQL Server\100\DTS\binn”）。

我在调用使用 HtmlUnit 的 .Net 库时遇到了这个问题。我使用的 NuGet 版本没有强名称，因此不能 GAC，但这对我有用。

# ajax - MVC 4 视图上的多个独立图表/小部件

> ID：13734005
> 
> 赞同：2
> 
> 时间：2012-12-05T22:53:57.280
> 
> 标签：ajax, asp.net-mvc, iframe, asp.net-mvc-4

我正在开发一个仪表板应用程序，该应用程序具有多个基于传递的常见查询字符串参数的独立小部件。在 MVC 中，每个小部件都有单独的控制器 --> 视图 --> JS 文件（通过 AJAX 调用从 WCF 获取 JSON）。现在，我需要创建一个母版页来“托管”所有这些独立的小部件。如何确保这些小部件真正“独立”？IE 具有可以对单个服务器进行的并发连接上限。iframe 会达到目的吗？我应该将每个小部件托管在此母版页上的单独 iframe 中吗？有哪些更合适和可接受的替代方案？使用部分视图？

# java - 在Java中每秒执行许多http请求的有效方法

> ID：13734007
> 
> 赞同：2
> 
> 时间：2012-12-05T22:54:00.073
> 
> 标签：java, multithreading, web-crawler

我正在研究网络爬虫。可以在每个请求不创建线程的情况下执行许多请求（例如，每秒 500-1000 个）（我不是指线程池、重用等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:14:12.063

我认为您在这里想要的是单个线程可以同时处理 n 个请求。

现在这意味着交错处理 2 个线程的步骤。这只有在有一些“阻塞”操作时才有意义。

现在，有人可能会说，是的，我们确实阻止了。所以我想要的是

1.  请求 1 已发出，我正在等待回复
2.  在等待请求 1 的响应是响应时发起请求 2。
3.  获取请求 1 的响应并处理它
4.  获取请求 2 的响应并进行处理。

这只有在 HTTP 是“异步的”时才有可能。不幸的是，事实并非如此。（一个好的阅读 - > [http://wiki.answers.com/Q/Why_http_is_asynchronous](http://wiki.answers.com/Q/Why_http_is_asynchronous)）有一些“异步”HTTP客户端可以做浏览器中的AJAX。

它允许发起调用的线程继续。响应在回调中返回。

事实是他们有一个线程池来同步处理这些调用。只有它看起来是异步的。

示例：

[http://hc.apache.org/httpcomponents-asyncclient-dev/index.html](http://hc.apache.org/httpcomponents-asyncclient-dev/index.html)

# usb - libusb-1.0 - 成功调用 libusb_bulk_transfer() 后数据去哪里了？

> ID：13734008
> 
> 赞同：0
> 
> 时间：2012-12-05T22:54:14.643
> 
> 标签：usb, libusb-1.0

我运行了以下从教程中获得的代码示例：[http ://www.dreamincode.net/forums/topic/148707-introduction-to-using-libusb-10/](http://www.dreamincode.net/forums/topic/148707-introduction-to-using-libusb-10/)

我在运行 Android 4 的平板电脑上运行它，通过 USB 连接到运行 Mac OS X Mountain Lion 的 MacBook Pro。
输出包含“写入成功！” 所以我假设 libusb_bulk_transfer() 工作正常。我的问题是 4 个字节的数据传输到了哪里？我可以将其保存到 Android 平板电脑上的文件吗？

谢谢你的帮助！

```
#include <iostream>
#include <libusb.h>

using namespace std;

int main() {
    libusb_device **devs; //pointer to pointer of device, used to retrieve a list of devices
    libusb_device_handle *dev_handle; //a device handle
    libusb_context *ctx = NULL; //a libusb session
    int r; //for return values
    ssize_t cnt; //holding number of devices in list
    r = libusb_init(&ctx); //initialize the library for the session we just declared
    if(r < 0) {
        cout<<"Init Error "<<r<<endl; //there was an error
        return 1;
    }
    libusb_set_debug(ctx, 3); //set verbosity level to 3, as suggested in the documentation

    cnt = libusb_get_device_list(ctx, &devs); //get the list of devices
    if(cnt < 0) {
        cout<<"Get Device Error"<<endl; //there was an error
        return 1;
    }
    cout<<cnt<<" Devices in list."<<endl;

    dev_handle = libusb_open_device_with_vid_pid(ctx, 5118, 7424); //these are vendorID and productID I found for my usb device
    if(dev_handle == NULL)
        cout<<"Cannot open device"<<endl;
    else
        cout<<"Device Opened"<<endl;
    libusb_free_device_list(devs, 1); //free the list, unref the devices in it

    unsigned char *data = new unsigned char[4]; //data to write
    data[0]='a';data[1]='b';data[2]='c';data[3]='d'; //some dummy values

    int actual; //used to find out how many bytes were written
    if(libusb_kernel_driver_active(dev_handle, 0) == 1) { //find out if kernel driver is attached
        cout<<"Kernel Driver Active"<<endl;
        if(libusb_detach_kernel_driver(dev_handle, 0) == 0) //detach it
            cout<<"Kernel Driver Detached!"<<endl;
    }
    r = libusb_claim_interface(dev_handle, 0); //claim interface 0 (the first) of device (mine had jsut 1)
    if(r < 0) {
        cout<<"Cannot Claim Interface"<<endl;
        return 1;
    }
    cout<<"Claimed Interface"<<endl;

    cout<<"Data->"<<data<<"<-"<<endl; //just to see the data we want to write : abcd
    cout<<"Writing Data..."<<endl;
    r = libusb_bulk_transfer(dev_handle, (2 | LIBUSB_ENDPOINT_OUT), data, 4, &actual, 0); //my device's out endpoint was 2, found with trial- the device had 2 endpoints: 2 and 129
    if(r == 0 && actual == 4) //we wrote the 4 bytes successfully
        cout<<"Writing Successful!"<<endl;
    else
        cout<<"Write Error"<<endl;

    r = libusb_release_interface(dev_handle, 0); //release the claimed interface
    if(r!=0) {
        cout<<"Cannot Release Interface"<<endl;
        return 1;
    }
    cout<<"Released Interface"<<endl;

    libusb_close(dev_handle); //close the device we opened
    libusb_exit(ctx); //needs to be called to end the

    delete[] data; //delete the allocated memory for data
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T14:02:21.930

该`libusb_bulk_transfer()`函数将数据写入指定的端点。它是一个地址，访问它，打印它，或者您可以复制它，进行一些大小写转换并将其转储到传出端点。然后执行通读`libusb_bulk_transfer()`

# jquery - 如何制作像 css-tricks 一样的滑动搜索框 div？

> ID：13734011
> 
> 赞同：1
> 
> 时间：2012-12-05T22:54:58.587
> 
> 标签：jquery, css

如何为 SearchBox创建与[css-tricks相同的东西？](http://css-tricks.com)

如果单击它，它会显示一个 div 并向外动画，并隐藏前一个 div。

我希望它也可以跨浏览器兼容，所以我正在考虑某种 jQuery 解决方案。

我猜我将不得不单击那个 div，将 Css 添加到两个 div，即 display:none 和 display block 让一个出来。

如果你能把我带到一个教程或一些很棒的东西上。

# c# - 只绑定接口属性的数据

> ID：13734015
> 
> 赞同：0
> 
> 时间：2012-12-05T22:55:12.507
> 
> 标签：c#, entity-framework, data-binding

我是所有实体框架模型和数据绑定的新手。我创建了一个接口并从`Candidate`数据库中的表生成了一个模型类。

```
public interface ICandidate
{
    String ID { get; set; }
    string Name { get; set; }
    string Mail { get; set; }
} 
```

我为生成的`Candidate`模型创建了一个部分类，因此我将能够在`ICandidate`不更改任何生成代码的情况下实现接口。

```
public partial class Candidates : ICandidate
{
    string ICandidate.ID
    {
        get { return this.PK; }
        set { _PK = value; }
    }
    string ICandidate.Name
    {
        get{ return this._Name; }
        set { _Name = value; }
    }
    string ICandidate.Mail
    {
        get { return this._Email; }
        set { this._Email = value; }
    }
} 
```

当然，生成的类比接口有更多的属性（比如接口不需要的 IsDeleted 字段）。

我想在`DataGridView`数据库中显示所有候选人。但我希望只有接口的属性将显示为`DataGridView`.

1.  有没有办法只绑定DataGridView的接口属性？
2.  在我的数据库中有一个名为 Candidate_To_Company 的表，其中包含以下列：PK、Candidate_FK、Company_FK、Insertion_Date 我想将此表绑定到 DataGridView。但我不想显示Candidate_FK，而是显示ICandidate 的候选人姓名。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:15:17.347

DataGrid 是否需要绑定到接口？界面让DataGrid只显示你想要的数据的原因是什么？..

您可以做的是让 DataGrid 绑定到 DataTable（通过 SqlDataAdapter 填充）。从那里，您可以指定要绑定的数据库列，并根据需要重命名 DataGrid 的列标题。

请参阅[http://www.codeproject.com/Tips/362436/Data-binding-in-WPF-DataGrid-control](http://www.codeproject.com/Tips/362436/Data-binding-in-WPF-DataGrid-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:13:06.573

> 有没有办法只绑定DataGridView的接口属性？

几个选项：

1.  显式设置列，`DataGridView`而不是让它们自动生成。根据我的经验，我通常从自动生成的列开始，然后找到一些需要明确设置列的原因（格式、顺序等）
2.  创建一个仅具有这些属性的模型类，然后手动或使用[AutoMapper 之](http://automapper.org/)类的工具将实体类转换为该模型。

> 在我的数据库中有一个名为 Candidate_To_Company 的表......我想显示 ICandidate 的候选人姓名。这可能吗？

由于您有除外键以外的列，因此 EF 不会将其映射为多对多关系并为您设置导航属性，因为您添加了 PK（这是​​不必要的恕我直言）并且`InsertDate`在您的模型中将不可用.

同样，有几个选项：

1.  如果您为问题 1 创建了单独的模型，请在模型中设置导航属性，并通过中间表从实体模型映射到视图模型：

    `Company.Candidates = efCompany.Candidate_to_Companies.Select(cc=>cc.Candidate).ToList();`

2.  弄清楚如何告诉模型将中间表用作多对多中间表而不是它自己的实体。这假设数据库通过触发器和/或 IDENTITY 列自动填充这些列，因此不需要在实体模型中包含它们。

3.  删除 PK 和 InsertionDate 列，生成模型，然后添加额外的列。这实际上有点骇人听闻，如果您需要重新生成模型，可能会给您带来问题。我只是把它作为一个实验来看看如何做#2。

# actionscript-3 - 基于 Stage3D 的 2D 引擎与 FlashPlayer 10 兼容（或无 wmode 设置）回退到软件渲染

> ID：13734016
> 
> 赞同：1
> 
> 时间：2012-12-05T22:55:14.630
> 
> 标签：actionscript-3, stage3d, starling-framework

[https://github.com/pshtif/Genome2D/downloads](https://github.com/pshtif/Genome2D/downloads)是我知道的唯一兼容 FlashPlayer 10（无 wmode 设置）的 Stage3D 2D 引擎回退到软件渲染。

不幸的是，他们在 0.35 版本之后放弃了这个伟大的功能。但我需要一个具有这种后备功能的 Stage3D 2D 引擎。是否还有其他支持该引擎并积极开发的引擎？

编辑：背景：我只需要在移动设备上进行硬件渲染，我可以确保设置正确的渲染模式。但是在网络上很多游戏门户不支持任何 wmode 设置。但是我的游戏可以在软件模式的桌面上正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:04:47.907

[Away3D Lite 的这个分支](https://github.com/elsassph/away3dlite-core-fp10)完全可以满足您的需求（[完整描述在这里](https://plus.google.com/109524935899218597554/posts/8V4UDWii27e)）。虽然它是一个 3D 引擎。您可以克服这个“问题”，并使用固定相机和正交投影使其成为 2D 引擎。

# visual-studio-2010 - Visual Studion 看不到 Microsoft.SharePoint.SPWeb 命名空间

> ID：13734020
> 
> 赞同：0
> 
> 时间：2012-12-05T22:55:21.713
> 
> 标签：visual-studio-2010, sharepoint-2007

处理与单独 (SP) 服务器上的共享点应用程序交互的一段代码。我正在使用 VS2010，并在我的 Windows Formd 项目中引用并安装了 Microsoft.SharePoint dll（2007 版）。

VS 没有选择 SharePoint 类 Microsoft.SharePoint.SPWeb 和 SPSite。整行是这样的： Microsoft.SharePoint.SPWeb sp_web = new Microsoft.SharePoint.SPSite("mySPsiteurl").OpenWeb();

一旦我在引用中添加它们的名称空间，SPWeb 和 SPSite 就会变成蓝绿色，但是一旦我运行应用程序，它们就会变成黑色并抛出缺少程序集引用的错误。

关于为什么会发生这种情况的任何想法？

谢谢，里修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:46:17.027

您将如何为 2007 添加此 Microsoft.SharePoint dll？你在文件系统中复制了很多吗？

Sharepoint 2007 .NET 程序集不会出现在 .NET 选项卡中，因为默认情况下它们将包括 SharePoint 2010 程序集。但是，如果您在 VS2010 中创建 Sharepoint 2007 项目（我们在 Sharepoint 选项卡下拥有的两个 2007 工作流项目），将为您添加这些 2007 程序集，这样您也可以使用 SPWeb 和 SPSite 并消除您的错误。

希望这可以帮助

# html - 如何让可折叠导航栏工作？

> ID：13734022
> 
> 赞同：0
> 
> 时间：2012-12-05T22:55:39.090
> 
> 标签：html, css, twitter-bootstrap, navigation

我正在使用 twitter 引导程序，当我将浏览器窗口的宽度减小到一定大小时，我看到了下图。但是，当我单击它时，什么也没有发生。我通常在那里有 2 个元素，但是当我的宽度太小时看不到它们。如何通过从显示中删除按钮或显示按钮但然后在单击时显示 2 个项目来解决此问题？

![在此处输入图像描述](../Images/d513c76301bd6b808e4c8bdd398f8448.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:37:14.493

要停止显示按钮，您可以将以下代码添加到您的 css：

```
.navbar .btn-navbar{
    display:none;
    } 
```

此外，您可以[阅读本文](http://taylor.fausak.me/2012/03/15/dropdown-menu-in-twitter-bootstraps-collapsed-navbar/)以获取更多信息和帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:12:42.953

根据引导文档，确保您有响应式引导 css 和折叠 javascript 插件：

> 小心！响应式导航栏需要折叠插件和响应式 Bootstrap CSS 文件。

这里还有一个工作示例（引用了引导响应 css 和引导 js）：http: [//jsfiddle.net/ZdVcg/](http://jsfiddle.net/ZdVcg/)

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
<div class="navbar">
<div class="navbar-inner">
<div class="container">

  <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </a>

  <!-- Be sure to leave the brand out there if you want it shown -->
  <a class="brand" href="#">Project name</a>

  <!-- Everything you want hidden at 940px or less, place within here -->
  <div class="nav-collapse collapse">
    <!-- .nav, .navbar-search, .navbar-form, etc -->
      <ul class="nav">
          <li class="active"><a href="#">Home</a>
          </li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
      </ul>

  </div>

</div>
</div>
</div>​ 
```

# mysql - 从 MYSQL 中两个别名的其余部分创建第三个别名？

> ID：13734024
> 
> 赞同：3
> 
> 时间：2012-12-05T22:56:00.247
> 
> 标签：mysql

是否可以从 MYSQL 中的两个别名的其余部分创建第三个别名？

这是我的查询：

```
SELECT DISTINCT
workcards.task, 
workcards.program, 
workcards.zone, 
workcards.CYLcomp, 
workcards.CYLint, 
workcards.task, 
workcards.CYLcomp + workcards.CYLint AS nextdue,
workcards.wcnumber,
(SELECT airtimes.total_cycles
       FROM airtimes 
       WHERE airtimes.nnumber='xxxxx'
       ORDER BY airtimes.total_cycles DESC LIMIT 1) AS current_cycle
FROM workcards
WHERE basis LIKE '%CYL%'
AND nnumber='xxxxx'
ORDER BY CASE nextdue
WHEN 0 THEN 1 ELSE -1 END ASC, nextdue ASC 
```

我想要做的是创建第三个别名，这将是“nextdue”减去“current_cyle”别名的区别？就像是：

```
nextdue - current_cycle AS remainder? 
```

对不起，如果noob或其他什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:29:53.127

您不能将计算结果别名用于`select`部分其他计算（http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html）。但是你可以通过重建查询来获得你想要的东西，这样它将使用连接和分组：

```
SELECT DISTINCT 
  w.*, 
  w.CYLcomp + w.CYLint AS nextdue, 
  MAX(a.total_cycles) AS current_cycle
  w.CYLcomp + w.CYLint - MAX(a.total_cycles) AS reminder
FROM workcards w
JOIN airtimes a ON a.nnumber = w.nnumber
WHERE w.basis LIKE '%CYL%' AND w.nnumber='xxxxx'
GROUP BY w.nnumber
ORDER BY CASE nextdue WHEN 0 THEN 1 ELSE -1 END ASC, nextdue ASC 
```

# riak - Riak：索引和查询kv数据

> ID：13734025
> 
> 赞同：0
> 
> 时间：2012-12-05T22:56:01.433
> 
> 标签：riak, riak-search

我想按照[http://docs.basho.com/riak/latest/cookbooks/Riak-Search---Indexing-and-Querying-Riak-KV的 Riak 文档中的描述实现“索引和查询 kv 数据” -数据/](http://docs.basho.com/riak/latest/cookbooks/Riak-Search---Indexing-and-Querying-Riak-KV-Data/)。

虽然有一些关于如何使用 HTTP API 设置索引的文档，但 basho 的文档缺少关于如何使用 HTTP API 查询此类索引 kv 数据的任何信息。显然它不像我从文件系统索引内容时那样工作，至少我没有让它像那样工作。

任何人都可以帮助发布一些使用 cURL 的简单示例吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:37:01.453

当通过 HTTP 查询 Riak Search 时，我相信您有 2 个选项，[这里有更详细的描述](http://docs.basho.com/riak/latest/cookbooks/Riak-Search---Querying/)。最简单的一种可能是使用 Solr 兼容接口，但也可以将 Riak 搜索结果提供给 MapReduce 作业并以这种方式获取结果。

# java - 如何将表单数据上传到谷歌应用引擎

> ID：13734027
> 
> 赞同：0
> 
> 时间：2012-12-05T22:56:04.397
> 
> 标签：java, google-app-engine

要将数据上传到数据存储区，我使用以下 java 代码：

```
DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
Entity entity = new Entity("mydetail");
entity.setProperty("entry", "entry");
ds.put(entity); 
```

对于上传基于表单的数据，这是上传数据的正确方法，即使用上面的类似代码还是我应该使用其他 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:53:12.130

是的，这是 AppEngine 数据存储区的直接 API。

您还可以使用 JDO 接口，该接口允许直接存储 Java 对象，而无需处理 Datastore API：

```
import javax.jdo.annotations.Persistent;

@PersistenceCapable
public class MyDetail {
    // ...
    @Persistent
    private String entry;
    // ... 
```

还有JPA接口。[App Engine](https://developers.google.com/appengine/docs/java/datastore/)网站上描述了这两个界面。

[Objectify](http://code.google.com/p/objectify-appengine/)界面非常简单，在许多情况下更容易。它不是官方 SDK 的一部分。

您可以使用对您的应用程序更有意义的任何一个。

# jquery - 如何验证空文本输入并停止显示 NaN？

> ID：13734028
> 
> 赞同：0
> 
> 时间：2012-12-05T22:56:07.100
> 
> 标签：jquery, html

我正在使用以下 HTML 代码来显示表格：

```
<table border='1' id='markstbl'>
    <thead>
    <tr>
    <th class='questionth'>Question No.</th>
    <th class='answermarksth'>Marks per Answer</th>
    </tr>
    </thead>
    <tbody>

    <tr class="questiontd">
    <td class="questionnumtd" name="numQuestion" rowspan="2">1 <input type="hidden" name="q1_ans_org" class="q1_ans_org" value="5"><input type="hidden" name="q1_ans" class="q1_ans"></td>
    <td class="answermarkstd">
    <input class="individualMarks q1_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
    </td>
    </tr>

    <tr class="questiontd">
    <td class="answermarkstd">
    <input class="individualMarks q1_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
    </td>
    </tr>

    <tr class="questiontd">
    <td class="questionnumtd" name="numQuestion" rowspan="1">2 <input type="hidden" name="q2_ans_org" class="q2_ans_org" value="5"><input type="hidden" name="q2_ans" class="q2_ans"></td>
    <td class="answermarkstd">
    <input class="individualMarks q2_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
    </td>
    </tr>
    </tbody>
    </table> 
```

下面是表格的样子：

```
Question No.     Marks Per Answer         
    1            (blank text input)       
                 (blank text input)
    2            (blank text input) 
```

如您所见，问题 1 包含 2 个文本输入，而问题 2 包含 1 个文本输入。

现在我想要对下面的代码做的是验证任何空文本输入。

```
function validation() {

    var alertValidation = "";
    var _qid = "";
    var _msg = "";

    $("[class*='q']").each(function(i) {  
    var questions = parseInt($("[class*=q" + i + "_qnum]").text());
    var marks = parseInt($("[class*=q" + i + "_ans_text]").text()); 
    var txtinput = $("[class*=q" + i + "_mark]").val(); 
    _qid = questions;
    _msg = "You have errors on Question Number: " + _qid + "\n";

if (txtinput == '' || txtinput == null) {
    alertValidation += "\n\u2022 You have not entered in a value for all the Indivdiaul Marks textbox\n";
}    

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }

        });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
} 
```

问题是在警报中它不显示问题编号`_qid`，因为它显示为 NaN 并且即使没有文本输入是空白的，它仍然会显示一个警报，指出并非所有输入都包含一个值。

我的问题是如何显示问题编号以及如何正确检查空文本输入是否正确，以便如果文本输入为空，则显示带有正确问题编号的警报，并且如果所有文本输入都包含一个值，那么它不显示验证？

我想说的是`_qid`，当我在函数中包含下面的代码以进行另一个验证检查时，它确实有效，该`validation()`函数恰好位于 if 语句检查空文本输入的下方：

```
if(marks < '0')
{

 alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) +  " Marks";   
}

        else if(marks > '0')
{

 alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks +  " Marks Remaining";   
} 
```

当出现上述验证的警报时，它会在警报中显示问题编号。当我验证空文本输入时它只是不显示它？是因为我可能在一个问题中有多个文本输入，所以我可能需要在代码中包含另一个 foreach() 循环以进行空文本输入？

下面是完整`Validation()`代码的样子：

```
function validation() {

    var alertValidation = "";
    var _qid = "";
    var _msg = "";

    $("[class*='q']").each(function(i) {  
    var questions = parseInt($("[class*=q" + i + "_qnum]").text());
    var marks = parseInt($("[class*=q" + i + "_ans_text]").text()); 
    var txtinput = $("[class*=q" + i + "_mark]").val(); 
    _qid = questions;
    _msg = "You have errors on Question Number: " + _qid + "\n";

if (txtinput == '' || txtinput == null) {
    alertValidation += "\n\u2022 You have not entered in a value for all the Indivdiaul Marks textbox\n";
}    

if(marks < '0')
{

 alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) +  " Marks";   
}

        else if(marks > '0')
{

 alertValidation = "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks +  " Marks Remaining";   
}

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }

        });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
} 
```

以下是验证消息的示例：

**标记高于 0 验证：**

```
You have errors on Question Number: 1
Your Total Marks Remaining does not equal 0 

• You Have NaN Marks Remaining 
```

**标记小于 0 验证：**

```
You have errors on Question Number: 2
Your Total Marks Remaining does not equal 0 

• You Need To Remove NaN Marks 
```

**空文本输入验证：**

```
You have errors on Question Number: NaN

• You have not entered in a value for all the Indivdiaul Marks textbox 
```

如您所见，上面的警报是唯一不显示问题编号的警报

谢谢

# ios6 - iOS6 UICollecionViewFlowLayout - 水平布局 - 单元格对齐

> ID：13734031
> 
> 赞同：1
> 
> 时间：2012-12-05T22:56:23.197
> 
> 标签：ios6, uicollectionview, uicollectionviewcell

我有一个 UICollectionViewFlowLayout，它基本上可以满足我的要求，除了一件事 - UICollectionViewCells 的正确对齐，当它水平滚动并启用分页时。

我基本上想要的是这个 - 在多个页面上滚动页面：

在此处查看 1： [UICollectionView 图片](https://ssl.qwuh.com/b/images/images.html)

我的问题是，我有多个部分，总是使用相同的布局，但是当我向右滚动时，它变空（只是背景颜色），当我滚动回第一页（如上面的那个）时，我得到一个奇怪的结果：

请参阅上面链接中的 2.

显然索引路径以某种方式混淆了 - 我真的不知道为什么。

我的 collectionView:numberOfItemsInSection: 方法总是返回“5”，而我的 numberOfSectionsInCollectionView: 在这个例子中返回“2”。我将 UICollectionViewFlowLayout 子类化为：

```
static CGRect elementLayout[] = {

    {20, 20, 649.333333, 294},
    {20, 334, 314.666666, 294},
    {688, 20.0, 314.666666, 294},
    {354.666666, 334, 314.666666, 294},
    {688, 334, 314.666666, 294},
};

-(NSArray*)layoutAttributesForElementsInRect:(CGRect)rect {  

    NSArray *attributes = [super layoutAttributesForElementsInRect:rect];
    NSMutableArray *newAttributes = [NSMutableArray array];

    for(int i = 0; i < [attributes count]; i++) 
    {
        UICollectionViewLayoutAttributes* attrs = attributes[i];
        attrs.frame = elementLayout[i];
        [newAttributes addObject:attrs];    
    }
    return newAttributes;
} 
```

但是，如果我不子类化并尝试使用来自 UICollectionViewFlowLayout 的标准委托调用来实现它，那么我会得到这个：

请参阅上面链接中的 3.

这会正确滚动到右侧，但布局错误。我所期望的是，具有 NSIndexPath [0, 1] 的单元格将位于“大”单元格的右侧，而不是在其下方。但即便如此，我还是需要像图一一样对齐 NSIndexPath [0, 1] 的单元格。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:23:40.407

经过很多麻烦，我最终弄清楚了为什么布局表现得很奇怪。

*   当有多个部分时，您需要将每个项目矩形的 x 原点更改为视图宽度的倍数。

*   更有趣的是：如果 UICollectionViewFlowLayout 生成的单元格少于您的预期，您可以覆盖 UICollectionViewLayoutAttributes 的 indexPath，以匹配预期的布局。

所以工作配置是：

```
for(int i = 0; i < (countOfCellsAnticipated); i++) 
{
    UICollectionViewLayoutAttributes* attrs = attributes[i];

    NSIndexPath* anticipatedIndexPath = [NSIndexPath indexPathForItem:i
                                                            inSection:sectionIndex];

    attrs.indexPath = anticipatedIndexPath;
    attrs.frame = recalculatedFrameInAbsoluteViewCoordinates;
    [newAttributes addObject:attrs];    
}

return newAttributes; 
```

# python - 更改要在网络服务器上使用的程序

> ID：13734032
> 
> 赞同：0
> 
> 时间：2012-12-05T22:56:27.423
> 
> 标签：python, mobile, webserver

假设我有用 python 编写的代码，可以分析我计算机上的文件并返回结果。它在我的高清本地运行良好，但现在我想把它变成一个移动应用程序。这意味着我需要用户可以访问它的某种服务器（例如云）。

据我了解，所需要的只是一种向顾客授予用户凭据和权限的方法，以便他们可以访问我的分析程序中的“运行”命令。但老实说，我在这方面没有零知名度，也不知道从哪里开始。

我只有两个问题：

1.  用户及其凭据是无穷无尽的，但他们都必须共享相同的分析程序。我对服务器不太了解，但是这种方法不会导致排队时间长吗？一般来说，我必须在分析代码中考虑哪些因素才能避免这种情况？

2.  有人可以指出我需要学习什么才能回答上述问题吗？这个话题是一个无底洞的信息，我不想被困。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:05:27.253

[Django](https://www.djangoproject.com/)是一个 MVC Web 框架，它拥有使用 Python 进行 Web 应用程序所需的所有功能。只需阅读本[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)，您就可以立即在*本地计算机上*启动并运行。

部署有多种选择，可以是云实例（这里有很多供应商，包括 Rackspace 和 Amazon，Google 的“django 网络托管”），或者“传统”服务器机器（这里也有很多供应商）。

“移动”部分只是用户界面。这会影响应用程序表示部分的决策，您可以将其限制为 Web 应用程序的 Django 行话中的*视图*部分（即 HTML 模板）。您可以寻找允许生成为移动/平板设备量身定制的美观（或更好）用户界面 HTML 的框架，例如[JQueryMobile](http://jquerymobile.com/)。

因此方向：从 Django 开始 -> 在“某处”服务器上部署 -> 为移动设备定制用户界面。

# javascript - Google Play 英雄滑块？

> ID：13734033
> 
> 赞同：0
> 
> 时间：2012-12-05T22:56:29.123
> 
> 标签：javascript, jquery, html, css

一位客户表示，他们非常喜欢 Google Play 处理英雄滑块的方式。我尝试在 jQueryCycle 中复制效果无济于事。任何人都可以阐明实现相同效果的最佳方法吗？

对于那些不熟悉的人：https: [//play.google.com/store?hl=en](https://play.google.com/store?hl=en) - 滑块显示集中的“当前滑块”以及屏幕后面显示的“上一个”和“下一个”幻灯片预览。它是连续的，你总是可以看到之前和之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:04:04.233

它不是连续的。右边的东西不会在幻灯片之间滑动，它只是出现。它并没有为轮播设置高标准。

您真正需要的只是将任何旧轮播分成 3 段，在段 1 和 3 上永久覆盖半透明叠加层，在段 2 上打开和关闭一个。每次幻灯片完成时，隐藏 #2 叠加层。每次开始时都会再次显示。

你想知道的东西：

*   使用 CSS 将绝对元素植根到相对定位的元素，这样您就可以在内容上修复绝对面板，而不会影响布局。

*   通过 jQuery 使用回调或自定义事件。

*   如何使用 Photoshop 制作透明/半透明 .png 图像以用作面板背景。

# iis-7 - IIS 7 多域主页规范重定向

> ID：13734036
> 
> 赞同：5
> 
> 时间：2012-12-05T22:56:45.133
> 
> 标签：iis-7, canonical-link

在我们的 web.config 文件中，我们控制 6 个不同的国际域。

我们如何使用 1 条规则执行以下操作：

重定向

*   www.1of6Domains.com/index.htm
*   www.1of6Domains.com/index.html
*   www.1of6Domains.com/default.asp
*   www.1of6Domains.com/default.aspx

至

*   www.1of6Domains.com

像这样的东西？

```
<rule name="Canonical Redirect" enabled="true" stopProcessing="true">
    <match url="(.*)/(index.html|index.htm|default.asp|default.aspx)" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
    <action type="Redirect" url="{R:1}" />
</rule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:08:35.180

我会去：

```
<rule name="Canonical Redirect" enabled="true" stopProcessing="true">
    <match url="^index.html$|^index.htm$|^default.asp$|^default.aspx$" />
    <action type="Redirect" url="/" />
</rule> 
```

如果说 www.1of6Domains.com 您的意思是每个域可能不同，那么必须采取行动（请记住，它假定非 https 流量）： `<action type="Redirect" url="http://www.1of6Domains.com" />`

**编辑：** 以下是处理多个域的规则（可以使用一条规则，但需要创建重写映射，不确定您是否想要这种复杂性）：

```
<rule name="Canonical Redirect Non Https">
    <match url="^index.html$|^index.htm$|^default.asp$|^default.aspx$" />
    <action type="Rewrite" url="http://{HTTP_HOST}/" />
    <conditions>
        <add input="{HTTPS}" pattern="^OFF$" />
    </conditions>
</rule>

<rule name="Canonical Redirect Https">
    <match url="^index.html$|^index.htm$|^default.asp$|^default.aspx$" />
    <action type="Rewrite" url="https://{HTTP_HOST}/" />
    <conditions>
        <add input="{HTTPS}" pattern="^ON$" />
    </conditions>
</rule> 
```

# mysql - 选择具有唯一值的行数

> ID：13734037
> 
> 赞同：0
> 
> 时间：2012-12-05T22:56:52.990
> 
> 标签：mysql, nested-sets

我有一张桌子，里面放着我们售出的所有物品。订单中可能有多个项目。

我想找到订单仅包含 1 件商品的最受欢迎的商品颜色组合。我想知道是否可以在一个 MySQL 语句中找到它（可能使用嵌套的 Selects）。到目前为止，我已经尝试了几件事，但都没有成功。

```
ProductName | Color | OrderNum | 
--------------------------------
productA    | black | 1
productA    | black | 1
productA    | black | 2
productA    | black | 3
productA    | black | 4
productA    | black | 4
productA    | black | 5 
```

所以 ”

```
SELECT COUNT(ProductName), ProductName WHERE ~~COUNT(OrderNum)=1~~ GROUP BY ProductName, Color 
```

会显示：

```
COUNT(ProductName) | ProductName | Color
      3            | ProductA    | black 
```

实际上，我有数十种产品和 50 多种颜色。

我试过的：

```
SELECT COUNT(ProductName), ProductName,Color, 
       (SELECT COUNT(OrderNum) FROM Items GROUP BY OrderNum) AS itemcount 
FROM Items WHERE 1 
GROUP BY ProductName,Color HAVING itemcount = 1

SELECT COUNT( ProductName ) , ProductName, Color
FROM Items
WHERE (SELECT COUNT( OrderNum ) AS itemcounts
       FROM Items GROUP BY OrderNum
) =1
GROUP BY ProductName 
```

--"子查询返回多于 1 行"

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:13:34.580

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/45ee1/9)**

```
SELECT
COUNT(*) as count, i.ProductName, i.Color
FROM ITems i
WHERE 1 = (SELECT COUNT( OrderNum ) AS itemcounts
           FROM Items 
           WHERE OrderNum = i.OrderNum
           )
GROUP BY ProductName, Color 
```

结果：

```
| COUNT | PRODUCTNAME | COLOR |
-------------------------------
|     3 |    productA | black | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:06:44.207

试试这个：

```
SELECT ProductName, color, COUNT(ProductName) 
FROM (SELECT ProductName, color, orderNum FROM Items 
      GROUP BY ProductName, orderNum HAVING COUNT(orderNum)=1) AS A 
```

# mysql - 使用 ADO 访问 2010/MySQL 后端 - 查询记录集不可更新

> ID：13734041
> 
> 赞同：4
> 
> 时间：2012-12-05T22:57:25.520
> 
> 标签：mysql, ms-access, ado

我正在使用 ADO 构建一个带有 MySQL 后端的 MS Access 2010 应用程序。到目前为止，我已经成功地将我的 ADO 记录集绑定和更新到表单。但是，我刚刚创建了第一个查询，其中包含两个带有 INNER JOIN 的表，当两个表都返回字段时，我无法更新返回的记录集。这第一个查询我能够成功绑定和更新。

```
SELECT table_A.a, table_A.b
FROM table_A INNER JOIN table_B ON table_B.c = table_A.c; 
```

但是，当我从 table_B 添加一个字段时，记录集不能再通过绑定表单更新。新的 MySQL 语句如下所示。

```
SELECT table_A.a, table_A.b, table_B.a
FROM table_A INNER JOIN table_B ON table_B.c = table_A.c; 
```

我已经阅读了论坛，并且我的查询似乎没有受到阻止记录集可更新的常见问题的影响（即，缺少主键、聚合函数、SELECT DISTINCT ......）。一些论坛建议我的问题可能与记录集之间的歧义有关，但我无法确认这一点，似乎这应该有效。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:21:41.643

尝试这个：

```
SELECT table_A.a, table_A.b, CONCAT(table_B.a, '') FROM table_A LEFT JOIN table_B ON table_B.c = table_A.c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:29:01.320

在第一个查询中，显示/检索的记录集属于单个表，因此可以对其进行更新。但是，与第二个查询一样，由于连接两个表（列属于 2 个表）而检索到的记录集，因此不能直接更新。

为了根据另一个表中的数据更新一些数据，您可以使用以下查询

**更新 Table_A,Table_B 设置 Table_A.a=Table_B.a 其中 Table_A.b=Table_B.b**

# analysis - Riak 的分析工具，例如 Cube 或 Graphite

> ID：13734043
> 
> 赞同：3
> 
> 时间：2012-12-05T22:57:41.603
> 
> 标签：analysis, aggregation, riak, graphite

有没有基于 Riak 的[Graphite](http://graphite.wikidot.com/)或[Cube之类的分析工具？](http://square.github.com/cube/)

我基本上是在寻找可以与 Riak 一起使用的聚合框架来进行实时分析和数据聚合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T10:16:46.997

很老的问题，但[德鲁伊](https://github.com/metamx/druid/wiki)可能很合适。

这是如何：

*   Druid 支持 S3 作为“深度存储”，聚合、倒排索引和所有其他进行实时 olap 查询的东西都基于它
*   Riak CS 存储 API 与 S3 兼容。

# css - 用 CSS 对齐两列

> ID：13734045
> 
> 赞同：0
> 
> 时间：2012-12-05T22:57:53.600
> 
> 标签：css, html

我有类似的标记

```
<div> <label for="a" class="float-left">column 1 row 1</label> <input type="text" value="column 2 row 1" id="a"  class="float-left"/>

<div class="float-clear"></div>

<div> <label for="b" class="float-left">longer column 1 row 2</label> <input class="float-left" type="text" value="column 2 row 2" id="b" />   

<div class="float-clear"></div>

<div> <label class="float-left" for="c">column 1 row 2</label> <input class="float-left" type="checkbox" id="c" /> 
```

如何使两行在左侧对齐，目前它们的位置取决于标签中文本的长度？我不想要一个完整的 CSS 网格，只是为了这个我需要对齐的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:02:13.253

如果你只想要一个地方，你可以用 margin-left 来做。

另一个答案是让你的标签内联块元素并给它们一个设定的宽度。

# c# - 需要更快的方法在 SSIS 中提取 oData 提要

> ID：13734047
> 
> 赞同：1
> 
> 时间：2012-12-05T22:57:54.887
> 
> 标签：c#, ssis, odata, sql-server-2012, script-component

有没有更快的方法来获取 ssis 的 oData？

```
public override void CreateNewOutputRows()
    {
        SomeEntities entities = new SomeEntities(new Uri("https://aurltomystuff.com/mywebservice.svc/"));
        string username = this.Variables.username;
        string domain = this.Variables.domain;
        string password = this.Variables.password;

        entities.Credentials = new NetworkCredential(username,password, domain);

        var tbl = from t in entities.AnEntitySetInMyService
                    select new
                    {
                        AField = t.AField,
                        AField = t.AField,
                        AField = t.AField,
                        AField = t.AField,
                        AField = t.AField,
                        AField = t.AField 

                    };
        int pageSize = 500;
        int recordCount = this.Variables.recordCount;
        int page = 0;
        while (page * pageSize < recordCount)
        {
            if ((page + 1) * pageSize > recordCount) { recordCount = tbl.Count(); }

            foreach (var t in tbl.Skip(page * pageSize).Take(pageSize))
            {
                Output0Buffer.AddRow();
                Output0Buffer.AField = t.AField ;
                Output0Buffer.AField = t.AField ;
                if (t.AField == null) { Output0Buffer.AField_IsNull = true; } else { Output0Buffer.AField = (long)t.AField ; }
                if (t.AField == null) { Output0Buffer.AField_IsNull = true; } else { Output0Buffer.AField = (DateTime)t.AField; }
                Output0Buffer.AField = t.AField;
                Output0Buffer.AField = t.AField;

            }
            page++;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T02:41:31.507

我认为没有办法，开箱即用，更快地做到这一点。我的意思是，转换可以像您的示例一样是同步的，也可以是异步的。而且您的实施非常标准。但是，如果处理需要同步转换，您别无选择，如果它可以是异步的，您可以按照以下文章中的说明进行操作：http: [//msdn.microsoft.com/en-us/library/ms136133.aspx](http://msdn.microsoft.com/en-us/library/ms136133.aspx)

我希望它是有用的。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T13:55:45.233

尝试在 SSIS 中使用 oData 源。如果您只是提取数据，我认为它会更快。

# c - 如何将 32 位 NTDLL 结构转换为 64 位结构？

> ID：13734048
> 
> 赞同：1
> 
> 时间：2012-12-05T22:57:58.093
> 
> 标签：c, windows, 64-bit, 32-bit, ntdll

我有一个我使用的代码`NtQuerySystemInformation`，`NtDuplicateObject`以及`NtQueryObject`查询打开的句柄的函数。我使用这些结构：

```
typedef NTSTATUS ( NTAPI *_NtQuerySystemInformation )
(
ULONG SystemInformationClass,
PVOID SystemInformation,
ULONG SystemInformationLength,
PULONG ReturnLength
);   

typedef NTSTATUS ( NTAPI *_NtDuplicateObject )
(
HANDLE SourceProcessHandle,
HANDLE SourceHandle,
HANDLE TargetProcessHandle,
PHANDLE TargetHandle,
ACCESS_MASK DesiredAccess,
ULONG Attributes,
ULONG Options
);

typedef NTSTATUS ( NTAPI *_NtQueryObject ) 
(
HANDLE ObjectHandle,
ULONG ObjectInformationClass,
PVOID ObjectInformation,
ULONG ObjectInformationLength,
PULONG ReturnLength
);

typedef struct _UNICODE_STRING
{
USHORT Length;
USHORT MaximumLength;
PWSTR Buffer;
} UNICODE_STRING, *PUNICODE_STRING;

typedef struct _SYSTEM_HANDLE
{
ULONG ProcessId;
BYTE ObjectTypeNumber;
BYTE Flags;
USHORT Handle;
PVOID Object;
ACCESS_MASK GrantedAccess;
} SYSTEM_HANDLE, *PSYSTEM_HANDLE;

typedef struct _SYSTEM_HANDLE_INFORMATION
{
ULONG HandleCount;
SYSTEM_HANDLE Handles[ 1 ];
} SYSTEM_HANDLE_INFORMATION, *PSYSTEM_HANDLE_INFORMATION;

typedef enum _POOL_TYPE
{
NonPagedPool,
PagedPool,
NonPagedPoolMustSucceed,
DontUseThisType,
NonPagedPoolCacheAligned,
PagedPoolCacheAligned,
NonPagedPoolCacheAlignedMustS
} POOL_TYPE, *PPOOL_TYPE;

typedef struct _OBJECT_TYPE_INFORMATION
{
UNICODE_STRING Name;
ULONG TotalNumberOfObjects;
ULONG TotalNumberOfHandles;
ULONG TotalPagedPoolUsage;
ULONG TotalNonPagedPoolUsage;
ULONG TotalNamePoolUsage;
ULONG TotalHandleTableUsage;
ULONG HighWaterNumberOfObjects;
ULONG HighWaterNumberOfHandles;
ULONG HighWaterPagedPoolUsage;
ULONG HighWaterNonPagedPoolUsage;
ULONG HighWaterNamePoolUsage;
ULONG HighWaterHandleTableUsage;
ULONG InvalidAttributes;
GENERIC_MAPPING GenericMapping;
ULONG ValidAccess;
BOOLEAN SecurityRequired;
BOOLEAN MaintainHandleCount;
USHORT MaintainTypeList;
POOL_TYPE PoolType;
ULONG PagedPoolUsage;
ULONG NonPagedPoolUsage;
} OBJECT_TYPE_INFORMATION, *POBJECT_TYPE_INFORMATION; 
```

我的应用程序在 Windows XP、Windows 7 32 位和 Windows 7 64 位下运行良好，但在 Windows XP 64 位下却表现得很奇怪。它无法接收正确的 ProcessID。我会得到随机的负数。但是，如果我在 64 位下编译我的代码，它工作正常。

是否有可能 i 只需更改我使用的结构的某些数据类型，就可以正常工作？如果是，那么有人可以帮我怎么做吗？如果不是，那么我唯一的选择是使用 64 位版本的代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:35:21.953

64 位版本的 XP 是，呃，特别的。微软获得正确的 64 位版本 Windows 的培训轮，这是一项非常重要的工作。他们在 Vista 上完全做到了这一点，这是第一个*一切都*正确的真正的 Windows 版本。尽管有仇恨。

我的机器上仍然有旧的 MSDN 库文档 NtQuerySystemInformation()，可以追溯到 2008 年，但可能早在那之前就已经写好了。它揭示了程序员对与美国司法部达成和解的想法的一个非常有趣的观点。我无法再链接它，所以我将复制/粘贴：

> 返回一个不透明的*东西*结构，可用于为随机数生成器生成不可预测的种子。

您传递的大多数 SystemInformationClass 参数都暗示了一些*东西。*从那以后，这已经被缓和了很多，该函数的文档中不再有任何尖锐的评论。ntddi 版本稳定在 Vista 中的大部分启用，不再需要辅助轮。XP 是 Windows 的第 5 版。Vista 是 Windows 6.0 版，非常重要的内核修订版。Win7是6.1，Win8是6.2。服务包，真的，有足够的用户界面小工具让有人为更新付费。不要费心让它在 XP 中工作，实际上没有人使用它。

# tfs - 如何在 TFS'12 Scrum Template 2.0 上规划每天的用户容量

> ID：13734051
> 
> 赞同：2
> 
> 时间：2012-12-05T22:58:10.683
> 
> 标签：tfs, scrum

我想在 TFS'12 Scrum Template 2.0 上指定每个用户和每个活动的团队容量，这可能在 sprint 的每一天都不同。

如[http://msdn.microsoft.com/en-us/library/ee191595.aspx](http://msdn.microsoft.com/en-us/library/ee191595.aspx)中所述，我可以设置一个人每天的容量，例如 5 天冲刺的 7 小时。

如何指定如下容量？

*   第 1 天：7 小时
*   第 2 天：5 小时
*   第 3 天：9 小时
*   第 4 天：3 小时
*   第 5 天：6 小时

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:43:56.843

正如其他人所提到的，TFS 容量规划不支持这一点。您可以使用“休息日”来封锁一整天，但不能封锁一天的部分时间。

话虽如此，容量规划用于尝试了解分配给个人或团队的工作量以及您是否有足够的容量来处理剩余的工作。对于您的大部分 sprint，平均值将起作用。对于规避风险的经理，您可能希望投入最低金额，然后将额外的时间用作不属于能力一部分的奖励。

但是，在您的具体示例中，如果您的个人平均每天工作 6 小时，那么您将获得在迭代结束时开始伤害您的能力。看起来您在第 4 天和第 5 天还剩 12 个小时，但实际上您只有 9 个小时。

如果您使用最少的方法，您将平均每天工作 3 小时，并且如果您分配的任务填满了他们的实际工作时间，那么在第 3 天的中途，您的产能似乎已满。

这是您应该尝试从团队中获得一致可用性的原因之一，而不仅仅是在这里或那里增加一个小时。100% 分配，理想情况下，你会读到关于 Scrum/敏捷团队的大部分内容。

最后，您还需要问自己要将容量数字用于什么目的。这将决定这是否是您需要完成的正确工具，以及您可以采取什么方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T20:17:10.567

不可能每天设置容量（当然，除非您有 1 天的冲刺）。最简单的解决方案是找到平均可用性并将其用于个人的能力。

然而，一般来说，个人能力在 Scrum 中并不重要，团队的能力和速度才是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:11:08.113

如果您想在计划中拥有这种详细程度，我建议您设置[Project Server Integration](http://msdn.microsoft.com/en-us/library/gg455680.aspx)

# c# - Process.Start() 未按预期执行

> ID：13734058
> 
> 赞同：4
> 
> 时间：2012-12-05T22:58:25.380
> 
> 标签：c#, .net, security, process, uac

如果我`takeown /F "C:\Program Files\Borland /A /R /D Y`从提升的命令提示符运行，我将获得该`Borland`文件夹的所有权。但是如果我运行下面的代码，什么都不会发生。尝试以管理员和普通用户身份运行。

```
Process process = new Process();
process.StartInfo.FileName = @"C:\Windows\System32\takeown.exe";
process.StartInfo.Verb = "runas";
process.StartInfo.Arguments = "/F \"C:\\Program Files\\Borland\" /A /R /D Y";
process.Start();
process.WaitForExit(); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:27:10.833

您需要在 startinfo 对象上将 useshellexecute 设置为 false 以便 UAC 提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:11:37.873

格式化并重新安装 Windows 似乎可以解决问题。我希望我有一个更好的答案，但经过大量搜索，我发现没有任何效果。也许现有的安全设置阻止它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-01T06:03:04.783

有同样的问题。 **发布**构建（但不是默认的“**调试**”）对我有帮助。

# php - “在整个脚本中都可以使用超全局变量” - 什么构成脚本？

> ID：13734062
> 
> 赞同：0
> 
> 时间：2012-12-05T22:58:29.017
> 
> 标签：php

“整个脚本”是什么意思？2个php文档什么时候是同一个脚本的一部分，什么时候不是？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:00:13.170

无需深入了解细节，迂腐的细节，最简单的方法是在整个执行过程中都可以使用超级全局变量。

此外，在整个执行过程中都可以使用*相同的超级全局变量。*换句话说，您可以有五个级别的包含和各种函数调用嵌套，但是`$_GET['key']`,`$_SERVER['key']`等仍然是该执行的同一个变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:03:08.637

“整个脚本”的意思是“在 PHP 解释器的一次调用中”。以下是一些典型情况：

*   脚本 A `include()`s 或`require()`s 脚本 B：超全局变量将从脚本 A 转变为脚本 B
*   脚本作为`eval()`一些代码：超全局变量将从脚本转换为评估的参数。

这与“超定义”（例如 ）不同`__FILE__`，因为超全局变量在整个调用过程中将保持不变（如果没有手动更改），而超定义则不会。

除此之外，超全局变量总是在范围内，即使在没有明确被`global`编辑的函数或类中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T23:05:04.913

这只是意味着它们可用于您的脚本的完整执行。

这意味着它们也可用于您在主脚本中包含或需要的任何脚本（请记住，包含脚本实际上与复制和粘贴代码相同，只是更易于维护）。

它们也可用于脚本中的任何函数。

请注意，它们与全局变量的不同之处在于它们不必以“全局”开头，以便它们可以在函数中访问。

我希望这有帮助。

# java - 我如何设置在中间？

> ID：13734069
> 
> 赞同：2
> 
> 时间：2012-12-05T22:59:19.347
> 
> 标签：java, draw, center

我尝试在 Java 中绘制一个矩形。我设置了frame size (800,400) and resizable(false) rectangle的x = 50, y = 50 width = 700 height = 300。为什么不在中间呢？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T23:19:41.163

没有任何其他证据，我*猜*你已经覆盖了`paint`类似 a 的方法`JFrame`并直接对其进行绘画。

问题是，框架有装饰（例如边框和标题栏），它占用了框架**内**的空间......

![在此处输入图像描述](../Images/aa8ea000c31555e0b7d443c55c50b713.png)

从技术上讲，这是正确的。矩形画在画框的中央，但是因为画框的装饰，看起来有点高……

相反，您应该在框架的内容区域上进行绘画。

![在此处输入图像描述](../Images/246bd481f51bea16a875225944a4e812.png)

在这里，矩形现在看起来正确居中。在我的测试中，我将第一帧（坏）设置为 800x400，我将第二帧的内容窗格的首选尺寸设置为 800x400，这使得帧尺寸实际上是 816x438，因为帧的装饰现在位于绘制区域*之外*。

```
public class CenterOfFrame {

    public static void main(String[] args) {
        new CenterOfFrame();
    }

    public CenterOfFrame() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                new BadFrame().setVisible(true);

                JFrame goodFrame = new JFrame();
                goodFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                goodFrame.setContentPane(new PaintablePane());
                goodFrame.pack();
                goodFrame.setLocationRelativeTo(null);
                goodFrame.setVisible(true);

            }
        });
    }

    public class BadFrame extends JFrame {

        public BadFrame() {
            setSize(800, 400);
            setDefaultCloseOperation(EXIT_ON_CLOSE);
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);
            paintTest(g, getWidth() - 1, getHeight() - 1);
        }
    }

    public void paintTest(Graphics g, int width, int height) {
        g.setColor(Color.RED);
        g.drawLine(0, 0, width, height);
        g.drawLine(width, 0, 0, height);
        g.drawRect(50, 50, width - 100, height - 100);
    }

    public class PaintablePane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(800, 400);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); //To change body of generated methods, choose Tools | Templates.
            paintTest(g, getWidth() - 1, getHeight() - 1);
        }
    }
} 
```

这就是为什么您不应该覆盖`paint`顶级容器的方法的众多原因之一；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:05:12.000

```
 Rectangle rect = new Rectangle(50,50,700,300); 
```

那应该可以正常工作，您是否在访问成员变量之前创建了一个新的 Rectangle 实例？

800 x 400 也是一种奇怪的分辨率，800 x 600 更标准。

# c# - TCP 客户端 NetworkStream 不断重新连接并且不允许成功关闭

> ID：13734070
> 
> 赞同：1
> 
> 时间：2012-12-05T22:59:33.383
> 
> 标签：c#, tcp, networkstream

我不知道我做错了什么，但是当我从网络浏览器访问我的 TCP 服务器时，它会不断刷新页面。

这是我的代码：

```
public class HttpServer
{

    protected int port;
    private TcpListener tcpListener;
    private Thread listenThread;

    public HttpServer(int port)
    {
        this.port = port;
    }

    public void listen()
    {
        this.tcpListener = new TcpListener(IPAddress.Any, port);
        this.listenThread = new Thread(new ThreadStart(ListenForClients));
        this.listenThread.Start();
    }

    private void HandleClientComm(object client)
    {
        TcpClient tcpClient = (TcpClient)client;

        NetworkStream clientStream = tcpClient.GetStream();

        byte[] message = new byte[4096];
        int bytesRead;

        while (true)

        {
            bytesRead = 0;
            try
            {
                //blocks until a client sends a message
                bytesRead = clientStream.Read(message, 0, 4096);
            }
            catch
            {
                //a socket error has occured
                break;
            }

            if (bytesRead == 0)
            {
                //the client has disconnected from the server
                break;
            }

            {
                //message has successfully been received
                ASCIIEncoding encoder = new ASCIIEncoding();
                System.Diagnostics.Debug.WriteLine("MSG: " + encoder.GetString(message, 0, bytesRead));
                String page = getPage(encoder.GetString(message, 0, bytesRead));
                String parameters = getPageParameters(encoder.GetString(message, 0, bytesRead));
                Console.WriteLine("Page Access: " + page);
                try
                {
                    String[] oPara = parameters.Split('&');
                    for (int i = 0; i < oPara.Length; i++)
                    {
                        Console.WriteLine("Parameter Recieved #" + (i + 1).ToString() + ": " + oPara[i]);
                    }
                }
                catch (Exception ex)
                {
                    Console.WriteLine("NULL PARAMETERS: " + ex.Message);
                }

                String oneT = "HTTP/1.0 200 OK\n\n";
                clientStream.Write(Encoding.ASCII.GetBytes(oneT), 0, Encoding.ASCII.GetBytes(oneT).Length);

                byte[] buffer2 = encoder.GetBytes(getPageHtml(page, parameters));

                clientStream.Write(buffer2, 0, buffer2.Length);

                clientStream.Close();
                break;
            }
        }

        try
        {
            tcpClient.Close();
        }
        catch
        {
        }
    }

    private String getPageParameters(String message)
    {
        try
        {
            //MSG: GET /homw?EX=1 HTTP/1.1
            //Host: 192.168.127.2:5125
            //User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Firefox/17.0
            //Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
            //Accept-Language: en-US,en;q=0.5
            //Accept-Encoding: gzip, deflate

            String sO = message.Replace("Host", "^");
            String[] sA = sO.Split('^');
            //GET /homw?EX=1 HTTP/1.1

            String[] sAA = sA[0].Split(' ');
            String[] ZA = sAA[1].Split('?');///homw?EX=1
            ///EX=1 @ 1
            String msg = ZA[1];
            return msg;
        }
        catch
        {
            return "";
        }
    }

    private String getPage(String message)
    {
        //MSG: GET /homw HTTP/1.1
        //Host: 192.168.127.2:5125
        //User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Firefox/17.0
        //Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
        //Accept-Language: en-US,en;q=0.5
        //Accept-Encoding: gzip, deflate

        String sO = message.Replace("Host", "^");
        String[] sA = sO.Split('^');
        //GET /homw HTTP/1.1

        String[] sAA = sA[0].Split(' ');
        String msg = "";
        for (int i = 1; i < sAA.Length - 1; i++)
        {
            msg += sAA[i];
        }
        return msg;
    }

    private void ListenForClients()
    {
        this.tcpListener.Start();

        while (true)
        {
            //blocks until a client has connected to the server
            TcpClient client = this.tcpListener.AcceptTcpClient();

            //create a thread to handle communication
            //with connected client
            Console.WriteLine("New Client");
            Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
            clientThread.Start(client);
            Thread.Sleep(500);
        }
    } 
```

请有人告诉我我做错了什么，因为我找不到任何东西。

# c# - 如何检测背景音乐是 否在 WP8 中播放？

> ID：13734071
> 
> 赞同：4
> 
> 时间：2012-12-05T22:59:36.927
> 
> 标签：c#, audio, windows-phone, windows-phone-8, background-audio

如果有人在您知道您的应用程序在未经用户同意的情况下停止当前正在播放的音乐之前就无法通过认证，那么您就已经开发了 WP 应用程序。

我确实[在这里](https://stackoverflow.com/questions/7034205/how-to-detect-if-another-audio-is-playing-in-background-windows-phone-7)看到了这个问题，它可能适用于 WP7 应用程序，但显然不适用于 WP8。我认为它不起作用，因为 WP8 操作系统不支持 XNA（它仅向后兼容，并且如果您使用 7.1 开发应用程序）。

有没有人遇到过在 WP8 中检测背景音乐的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T01:26:11.880

我相信检查[MediaPlayer.GameHasControl](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.mediaplayer.gamehascontrol.aspx)是您正在寻找的。使用该属性和 MediaPlayer 的其他成员来满足应用程序认证指南 6.5.1 这是一个端到端示例，说明如何@ [http://henry-chong.com/2012/02/pro-tip-include-background-music -for-your-windows-phone-app/](http://henry-chong.com/2012/02/pro-tip-including-background-music-for-your-windows-phone-app/)

顺便说一句，如果您的应用是音乐+视频应用，则不适用 6.5.x 应用认证要求。这是解决 6.5.1 的一种方法 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T08:26:51.317

我相信Windows Phone 8 （ [MSDN 来源](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207003%28v=vs.105%29.aspx)`Microsoft.Xna.Framework.Media.MediaPlayer.State`）仍然支持这一点：

> 您可以在面向 Windows Phone OS 8.0 的应用程序中引用和使用以下 XNA Framework 程序集：
> 
> ...
> 
> **Microsoft.Xna.Framework.Media.dll**
> 
> ...

# c# - 如何复制表条目及其依赖表行mysql

> ID：13734072
> 
> 赞同：2
> 
> 时间：2012-12-05T22:59:36.927
> 
> 标签：c#, mysql, sql

我需要使用 MySQL 复制表中的数据，但是这些数据与其他表具有一对多的关系。

表 A [1]---------[N] 表 B [1]---------[N] 表 C

所以我需要做的是从表一中复制一个条目，并将其与其他表中的相关数据相同。

如果这是一对一的关系，我可以做到这一点，但我真的不知道在这种情况下该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:05:35.320

那这个呢？

```
INSERT INTO TABLE A1 (COL1, COL2, COL3)
SELECT * FROM TABLE A
[WHERE CONDITION]

INSERT INTO TABLE B1 (COL1, COL2, COL3)
SELECT B.COL1, B.COL2, B.COL3
    FROM TABLEB AS B
    INNER JOIN TABLEA
    ON [RELATIONSHIP]
    [WHERE CONDITION] --SAME AS THE FIRST

   INSERT INTO TABLE C1 (COL1,  COL2, cOL3)
   SELECT C.COL1,  C.COL2, C.COL3
       FROM TABLEC AS C
       INNER JOIN TABLEB
       ON [RELATIONSHIP C=B]
       INNER JOIN TABLEA
       ON [RELATIONSHIP B=A]
       [WHERE CONDITION] --SAME AS THE FIRST 
```

编辑：您可以根据此指定自动增量的值： http://forums.mysql.com/read.php?10,167702,167717#msg- [167717](http://forums.mysql.com/read.php?10,167702,167717#msg-167717)

# mpi - boost.mpi 空向量消息

> ID：13734073
> 
> 赞同：0
> 
> 时间：2012-12-05T22:59:41.233
> 
> 标签：mpi, boost-mpi

如果我在 Boost MPI 中发送一个空向量会发生什么？

例如，如果我使用以下代码发送：

```
vector<int> empty_vector;
vector<int> other_vector(1,1);

if (world.rank()==0)
    world.isend(1,10,empty_vector);
if (world.rank()==1)
    world.recv(0,10,other_vector); 
```

这行得通吗？它会收到一个空向量并将其分配给`other_vector`吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:27:41.813

我希望得到一个快速的回应，但我没有。所以我继续进行测试。您可以发送一个空向量作为消息。发送后，rank 1 有一个空向量，rank 1 有大小为 1`other_vec`的原始向量。`other_vec`

# php - 为什么我的代码不检索/显示 PDO 记录集？

> ID：13734074
> 
> 赞同：0
> 
> 时间：2012-12-05T22:59:43.633
> 
> 标签：php, mysql, arrays, pdo, prepared-statement

使用下面的代码，我得到错误**"Call to undefined method stdClass::fetchObject()"**。

```
function getProdDetails2SaveInInvoice($data) {

    global $dbh;

    try {
        $sth=$dbh->prepare("
        SELECT
            AES_DECRYPT('alt_id', ?),
            AES_DECRYPT('prod_name', ?),
            AES_DECRYPT('prod_desc', ?)
         FROM
            products
        WHERE
        prod_id = ?
    ");

        $sth->execute($data);
        $rs = $sth->query(PDO::FETCH_ASSOC);

        return $rs;
    }

    catch(PDOException $e) {
        echo  "Something went wrong. Please report this error.\n";
        file_put_contents(
            $_SERVER['DOCUMENT_ROOT']."/PDOErrors.txt",
            "\n\nScript name : ".SCRIPT."\nFunction name : ".__FUNCTION__."\n".
            $e->getMessage(), FILE_APPEND);

        throw new failedTransaction();
    }
}

$data = array(
    DBKEY,                  /* field 1                  */
    DBKEY,                  /* field 2                  */
    DBKEY,                  /* field 3                  */
    $prodid             /* comparison               */
);
$rs = getProdDetails2SaveInInvoice($data);

while ($row = $rs->fetchObject()) {
    echo $row->prod_name;
} 
```

不幸的是，这不起作用并返回上述错误。

我可以确认 $dbh 数据库连接正在工作，因为它与用于插入和更新的连接相同。谢谢。

## 更新

这就是我根据以下建议修改代码的方式，但我仍然没有得到任何返回：

```
try {
    $dbh    = new PDO("mysql:host=".CO_DB_HOST.";dbname=".CO_DB_NAME, CO_DB_UNAME, CO_DB_PWORD);

    $dbh    ->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
}
catch(PDOException $e) {
    echo $e->getMessage();
}

function getProdDetails2SaveInInvoice($data) {

    global $dbh;

    try {
        $sth=$dbh->prepare("
        SELECT
            AES_DECRYPT('alt_id', ?),
            AES_DECRYPT('prod_name', ?),
            AES_DECRYPT('prod_desc', ?)
         FROM
            products
        WHERE
            prod_id = ?
    ");

        $sth->execute($data);

        while ($row = $sth->fetchObject()) {
            // PROCESS ROW
            $rs = array($row->alt_id, $row->prod_name, $row->prod_desc);
        }
        return $rs;
    }

    catch(PDOException $e) {
        echo  "Something went wrong. Please report this error.\n";
        file_put_contents(
            $_SERVER['DOCUMENT_ROOT']."/PDOErrors.txt",
            "\n\nScript name : ".SCRIPT."\nFunction name : ".__FUNCTION__."\n".
            $e->getMessage(), FILE_APPEND);

        throw new failedTransaction();
    }
}

// Fetch additional info from invoice_products.
$data = array(
    DBKEY,                  /* field 1                  */
    DBKEY,                  /* field 2                  */
    DBKEY,                  /* field 3                  */
    $prodid                 /* comparison               */
);
$rs = getProdDetails2SaveInInvoice($data);

print_r($rs); 
```

如果我硬编码 'where' 参数 (19)，它仍然无法检索结果。理想情况下，我认为我应该在一个对象中检索结果，以便可以对其进行流式传输，但是现在，即使它装在盒子里，我也会很高兴！

数据肯定存在于数据库中，并且可以使用传统查询来提取。

这是 print_r($rs) 的输出：

数组（ [0] => [1] => [2] => ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:06:08.393

您应该循环准备好的语句，而不是调用`query`准备好的语句。准备好的语句的基本用法如下：

```
$sth = $dbh->prepare("YOUR QUERY");
$sth->execute();
$results = array();
while ($row = $sth->fetchObject()) {
    $results[] = array(
        'alt_id' => $row->alt_id,
        'prod_name' => $row->prod_name,
        'prod_desc' => $row->prod_desc
    );
}

return $result; 
```

作为替代方案，您还可以使用`$sth->fetchAll()`which 返回一个数组，其中包含作为查询结果的所有行，请参阅[PDOStatement::fetchAll()](http://php.net/manual/en/pdostatement.fetchall.php)。

# php - CodeIgniter 活动记录无限制偏移？

> ID：13734076
> 
> 赞同：3
> 
> 时间：2012-12-05T23:00:05.037
> 
> 标签：php, mysql, codeigniter, sql-limit

我有两个变量，`$take`（limit）和`$skip`（offset），它们是mysql中limit子句的值。

现在 Code Igniter 向后执行它的限制子句。

例如

`$this->db->limit(5,10)`将`LIMIT 10, 5`在 MYSQL 中产生。

无论如何，我很难弄清楚如何`limit`根据设置的两个值中的哪一个来调用函数。

基本上，

如果他们都准备好了，我想打电话

`$this->db->limit($take, $skip)`

如果只`$take`设置了我想打电话

`$this->db->limit($take)`

但是，如果只有`$skip is set, e.g. if`$skip = 10` 那么我想显示所有行，除了前 10 行，我该怎么做。

我打电话吗

`$this->db->limit(null, $skip)`or
`$this->db->limit(0, $skip)`or
`$this->db->limit(false, $skip)`or
完全不同的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:20:59.337

我认为您通过回答我们自己的问题找到了您正在寻找的答案，但是如果您想使用 codeigniter 来获取除前 10 行之外的所有行，那么您需要执行类似的操作（我尚未对其进行测试）：

```
$this->db->limit(18446744073709551615, 10) 
```

根据[Mysql 文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)

```
To retrieve all rows from a certain offset up to the end of the result set, you can use some large number for the second parameter. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T23:14:24.327

原来 Code Igniter 有一个未记录的`offset`功能。

```
/**
* Sets the OFFSET value
*
* @param    integer the offset value
* @return   object
*/
public function offset($offset)
{
    $this->ar_offset = $offset;
    return $this;
} 
```

所以只要打电话就`$this->db->offset($skip)`可以了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-10T22:02:58.707

[这](https://www.codeigniter.com/userguide3/database/query_builder.html#CI_DB_query_builder::offset)`offset`是在codeigniter 3 的活动记录中起作用的官方文档

> offset($offset) 参数： $offset (int) – 要跳过的行数 返回：
> CI_DB_query_builder 实例（方法链接）
> 
> 返回类型：
> CI_DB_query_builder
> 
> 向查询添加 OFFSET 子句。

# c++ - 未按需要调用 C++ 虚拟方法

> ID：13734077
> 
> 赞同：3
> 
> 时间：2012-12-05T23:00:07.380
> 
> 标签：c++

我被困住了，已经尝试了很多来解决这个“虚拟”问题，所以我请求你帮助我，因为这可能是一个“训练有素的眼睛”可以在几秒钟内解决的愚蠢问题。

问题：当我在 main 中执行以下操作时：

```
PrologConnector swiProlog;
swiProlog = PrologConnector::connectorFactory(PrologConnector::swi,argv);
swiProlog.send("blabla"); 
```

总是调用 PrologConnector 类的发送方法，而不是子类的发送方法。你看到问题了吗？

谢谢您的帮助！！

这是代码：PrologConnector.h

```
class PrologConnector {
   virtual int send(char * cmd);
   virtual int init(char **argv);
   static PrologConnector connectorFactory(Prolog prolog, char ** argv);
}; 
```

PrologConnector.cpp

```
int PrologConnector::send(char * argv) {
  std::cout << "not wanted"<<std::endl;
  return 0;
}

int PrologConnector::init(char **argv) {
  //TODO add implementation
  return 0;
}

PrologConnector PrologConnector::connectorFactory(Prolog prolog, char **argv) {
  if (prolog == swi) {
    SWIConnector sc;
    sc.init(argv);
    return sc;
  }

std::cout <<"Error in initialization!"<<std::endl;
PrologConnector pc;
return pc;
} 
```

SWIConnector.h：

```
class SWIConnector : public PrologConnector {
  int send(char *cmd);
  int init(char **argv);
}; 
```

SWIConnector.cpp：

```
int SWIConnector::init(char **argv) {
//some action going on
}

int SWIConnector::send(char * cmd) {

//some action going on
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T23:03:22.277

您在这里拥有的是*[对象切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)*。为了多态地使用对象，您*必须*通过指针或引用来访问它们。

您的工厂方法的签名应更改为返回`PrologConnector*`or `PrologConnector&`，之后您将能够看到预期的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T23:04:06.070

这个问题很常见，被称为“切片”。您正在将派生类分配给基类的实例，并且派生类的所有属性在复制期间都将丢失。

请改用指向类的指针或引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T23:05:22.530

这是此方法中发生的情况：

```
PrologConnector PrologConnector::connectorFactory(Prolog prolog, char **argv) {
  if (prolog == swi) {
    SWIConnector sc;
    sc.init(argv);
    // return sc;
    return PrologConnector(sc);
  } 
```

当您返回 PrologConnector 类型的变量时。并且将调用 PrologConnector 的方法。

您需要返回指针而不是对象的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T21:59:13.167

感谢您的回答，这正是发生的事情.. 以前从未听说过 :)

另一个提示：

```
PrologConnector* PrologConnector::connectorFactory(Prolog prolog, char **argv) {
  if (prolog == swi) {
  SWIConnector *sc = new SWIConnector;
  sc->init(argv);
  return sc;
} 
```

我必须使用“new”来实例化那个 SWIConnector，否则我会在主函数中得到一个“分段错误”。我不完全确定为什么，因为我认为“SWIConnector x”已经分配了内存，但似乎还有另一个原因:)

问候

# ios - 干净地从 ios 应用程序导出 sqlite db

> ID：13734085
> 
> 赞同：1
> 
> 时间：2012-12-05T23:00:22.743
> 
> 标签：ios, ios5, sqlite, ios6

我需要针对我公司正在构建的应用程序中的功能的解决方案。这是一款适用于 iPhone 和 iPad 的 IOS 应用程序，我们仅支持 ios5 及更高版本。

我们需要的最终结果是用户点击设置区域内的一个按钮，该按钮**干净地**转储应用程序内部数据库，将其附加到电子邮件中，供用户发送给他们想要的任何人。

附加到电子邮件不是问题。我担心的是，是否有理由认为将 sqlite 数据库的副本作为附件导出到电子邮件中会给用户留下可用的数据库副本。我的客户群不擅长备份，但数据对他们来说仍然非常重要。

sqlite 数据库的热导出是否可用，即是否支持，或者数据库有时/总是会损坏？

请记住，所有这些功能所要做的就是使可用的数据库副本离开设备并安全地离线存储，这样我就可以通过使用 iExplorer 将数据库复制回设备来引导他们完成恢复数据库或电话查看。

未来我们计划添加强大的导出和导入功能，但目前我们正在寻找一种可以在一天或更短的时间内实施的解决方案。

提前感谢任何人的输入和*喘息*一些objective-c代码，这些代码将转储一个干净的sqlite数据库副本，以使数据库可用且不会损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:34:03.850

您不需要制作数据库的热副本。当用户选择应用程序的备份功能时，关闭数据库，复制文件，然后重新打开数据库。您现在可以将复制的文件附加到电子邮件中。

我的应用程序中有一个功能可以做到这一点。我从来没有遇到过数据库文件损坏的问题。只要没有活动的事务在运行，sqlite 文件应该可以复制，尤其是在没有打开的句柄的情况下。

另一种选择是使用`sqlite3_backup_init`和相关的功能来复制数据库。

# matlab - 高亮部分matlab绘图

> ID：13734086
> 
> 赞同：9
> 
> 时间：2012-12-05T23:00:29.547
> 
> 标签：matlab, plot, fill, area

我有一个看起来像这样的 matlab 图：

![在此处输入图像描述](../Images/aff19d52d692289365a21470b1b756a5.png)

每个子图的 Y 值存储在一维数组中。我想做的是找到一个顶部图形高于某个高度的区域，例如 0.5。我还想在其他图表中突出显示相同的区域。

这是我正在谈论的一个例子：

![在此处输入图像描述](../Images/36f5eccc9fe3fc5ec520a0bc0ae5655a.png)

到目前为止，我能找到的最好的功能`area`是填充 matlab 网格上的一个区域。但是，如果有人能告诉我如何使其透明以及如何填充多个区域而无需执行大量区域命令，那就太好了。

否则，我可以识别结构中的一组区域并使用 for 循环来绘制它们。这是我会这样做的一些伪代码：

```
countstruct = 1;
for i = 1:length(yValue)
    if (yValue(i) > 1)
        outside = [outside, i]
    else
         areas(countstruct).outside = outside;
         countstruct = countstruct + 1;
         clear outside;

     end
 end 
```

然后绘制区域我会这样做：

```
for i = 1:length(areas)
    area(areas(i).outside, ones(length(area), 1)*14, "SomeThingToMakeItTransperant')
end 
```

我会为每个子图这样做。显然这是相当复杂的，所以最好有一个衬里。谁能想到一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T01:34:42.963

我想通了，我提供的伪代码得到了正确的区域。然后你可以这样做：

```
for i = 1:length(areas)
    harea = area(areas(i).outside, ones(length(areas(i).outside), 1)*14, 'LineStyle', 'none')
    set(harea, 'FaceColor', 'r')
    alpha(0.25)
    hold on
end 
```

`alpha`在大多数区域图中设置透明度。这与问题中的代码相结合，导致：

在 matlab 中绘图非常酷。

# ruby-on-rails - haml - 表格单元格内的 erb 过滤器将文本推到外部（在标记中）

> ID：13734090
> 
> 赞同：0
> 
> 时间：2012-12-05T23:01:01.680
> 
> 标签：ruby-on-rails, haml

Haml 使用 erb 过滤器错误地渲染了我的 html。任何想法如何让它生成正确的标记？

此haml 标记生成以下HTML

哈姆勒：

```
%table
  %tbody
    -items.each do |foo|
      %tr
        %td       
          %div
            :erb
              (<strong><%= foo.name %></strong>) 
```

呈现的 HTML：

```
<strong>bar</strong>
<table>
<tbody>
<tr><td><div></div></td></tr>
</tbody>
</table> 
```

宝石信息

哈姆 (3.1.4)

haml-rails (0.3.5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:08:39.720

如果您替换它是否会有所不同：

```
:erb
  (<strong><%= foo.name %></strong>) 
```

和：

```
%span
  (%strong= foo.name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-04T03:16:53.743

我知道这是一个老问题——我无法复制操作所遇到的错误——但如果其他人遇到类似错误并需要解决方案，haml 现在提供了一个帮助程序#surround。

[http://haml.info/docs/yardoc/Haml/Helpers.html#surround-instance_method](http://haml.info/docs/yardoc/Haml/Helpers.html#surround-instance_method)

所以对于这个问题，它看起来像：

```
= surround '(', ')' do
  %strong #{foo.name} 
```

# ruby-on-rails - omn iauth-facebook 和 fb_graph 不能一起工作

> ID：13734094
> 
> 赞同：2
> 
> 时间：2012-12-05T23:01:15.857
> 
> 标签：ruby-on-rails, omniauth, fb-graph

我正在开发一个 rails 3.2 应用程序并使用omniauth-facebook 进行身份验证。这部分一直没有给我带来任何问题。我`request.env['omniauth.hash']`成功获得并提取了 Oauth 令牌。

```
auth_hash = request.env['omniauth.hash']
token = auth_hash['credentials']['token'] 
```

之后我尝试使用 fb_graph 来访问 Facebook 的 Open Graph：

```
user = FbGraph::User.me(token) 
```

但是，当我这样做时，我的用户没有加载。我只是得到一个空白用户，似乎 facebook 出于某种原因不接受我的令牌作为有效令牌。难道我做错了什么？我没有的令牌不是我发出 Facebook Open Graph 请求所需的令牌吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:53:41.523

尝试 user = FbGraph::User.me(token).fetch

# jquery - WebAPI 中的 JSON 数据格式

> ID：13734095
> 
> 赞同：0
> 
> 时间：2012-12-05T23:01:18.080
> 
> 标签：jquery, json, web-services, c#-4.0, asp.net-mvc-4

```
public class CalendarController : ApiController
    {

        Events[] events = new Events[]  
        {  
            new Events { title= "event1", start = System.DateTime.UtcNow, end = System.DateTime.UtcNow },  
            new Events { title= "event2", start = System.DateTime.UtcNow, end = System.DateTime.UtcNow },  
            new Events { title= "event3", start = System.DateTime.UtcNow, end = System.DateTime.UtcNow}  
        };

        public IEnumerable<Events> GetAllCalendar()
        {
            return events;
        } 
```

上面的 JSON 结果是

```
[{
    "title": "event1",
    "start": "2012-12-05T22:52:35.6471712Z",
    "end": "2012-12-05T22:52:35.6471712Z"
},{
    "title": "event2",
    "start": "2012-12-05T22:52:35.6471712Z",
    "end": "2012-12-05T22:52:35.6471712Z"
},{
    "title": "event3",
    "start": "2012-12-05T22:52:35.6471712Z",
    "end": "2012-12-05T22:52:35.6471712Z"
}]​ 
```

1.  如何在没有双引号但单引号的情况下创建相同的 JSON 结果。
2.  如何以 'YYYY-MM-DD HH:MM:SS' 格式获取日期 谢谢你，史密斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:18:34.600

到目前为止，在 C# 中处理 JSON 的最简单方法是使用出色的 JSON.net 库：

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

此外，请使用以下优秀的网站，该网站获取您的 JSON 并创建相关的 C# 类：

[http://json2csharp.com/](http://json2csharp.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:10:32.267

1.  据我所知，你不能。见[http://json.org/](http://json.org/)
2.  试试 System.DateTime.UtcNow.ToString("yyyy-MM-dd hh:mm:ss")！有关日期和时间格式的更多信息：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# php - 加入两个 mysql_fetch_arrays

> ID：13734099
> 
> 赞同：0
> 
> 时间：2012-12-05T23:01:39.050
> 
> 标签：php, mysql, sql

我正在尝试将两个查询拼凑在一起。下面是我正在使用的代码。但是，该表正在拆分数据。我该如何补救？或者有什么更好的解决方案？

```
while($row = mysql_fetch_array($result))
{
    echo "<tr id='centered' >";  
    echo "<td class='leftalign'>" . $row['Quarter_Name'] . "</td>";
    echo "<td>" . $row['Quarterly_yield'] . "</td>";
    echo "<td>" . $row['Quarterly_yield'] . "</td>";
    echo "<td>" . $row['Quarterly_yield'] . "</td>";
}

while($row = mysql_fetch_array($result8))
{
    echo "<td>" . $row['Quarterly_yield'] . "</td>";
} 
```

2个查询如下：它们几乎相同

```
SELECT  LEFT(A.F_ANOTRIMESTRE, 4) Year,
        RIGHT(A.F_ANOTRIMESTRE, 2) Quarter,
        IF(RIGHT(A.F_ANOTRIMESTRE, 2)=03,'Enero a Marzo',
            IF(RIGHT(A.F_ANOTRIMESTRE, 2)=06,'Abril a Junio',
                IF(RIGHT(A.F_ANOTRIMESTRE, 2)=09,'Julio a Septiembre',
                    IF(RIGHT(A.F_ANOTRIMESTRE, 2)=12,'Octubre a Diciembre', '')
                )
            )
        ) Quarter_Name,
        ROUND(A.POR_RENTABILIDAD, 2) Quarterly_yield
FROM    dr_rent_carteras_trimestres A
WHERE   A.ID_CARTERA = $ID_CARTERA
AND     A.IND_RENTABILIDAD = 1
AND     LEFT(A.F_ANOTRIMESTRE, 4) = (
            SELECT MAX(left(F_ANOTRIMESTRE, 4)) - 0
            FROM   dr_rent_carteras_trimestres
            WHERE  ID_CARTERA = $ID_CARTERA 
        ) 
```

这是第二个：

```
SELECT  LEFT(A.F_ANOTRIMESTRE, 4) Year,
        RIGHT(A.F_ANOTRIMESTRE, 2) Quarter,
        IF(RIGHT(A.F_ANOTRIMESTRE, 2)=03,'Enero a Marzo',
            IF(RIGHT(A.F_ANOTRIMESTRE, 2)=06,'Abril a Junio',
                IF(RIGHT(A.F_ANOTRIMESTRE, 2)=09,'Julio a Septiembre',
                    IF(RIGHT(A.F_ANOTRIMESTRE, 2)=12,'Octubre a Diciembre', '')
                )
            )
        ) Quarter_Name,
        ROUND(A.POR_RENTABILIDAD, 2) Quarterly_yield
FROM    dr_rent_carteras_trimestres A
WHERE   A.ID_CARTERA = $ID_CARTERA
AND     A.IND_RENTABILIDAD = 1
AND     LEFT(A.F_ANOTRIMESTRE, 4) = ( 
            SELECT MAX(left(F_ANOTRIMESTRE, 4)) - 1
            FROM   dr_rent_carteras_trimestres
            WHERE  ID_CARTERA = $ID_CARTERA 
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:17:44.360

在上面的代码中，您`tr`在第一个循环中打开标签，但从不关闭它。同样在第一个循环中，您打印出`Quarterly_yield`三次，但为该结果计算了一列。实际上，您正在打印相同的内容。

几个选项 - 在自己的行中打印每个查询的每个结果：

```
// Loop through the results and print 
while($row = mysql_fetch_array($result))
{
    echo "<tr id='centered' >\m";  
    echo "<td class='leftalign'>{$row['Quarter_Name']}</td>\n";
    echo "<td>{$row['Quarterly_yield']}</td>\n";
    echo "</tr>\n";
}

while($row = mysql_fetch_array($result8))
{
    echo "<tr id='centered' >\m";  
    echo "<td class='leftalign'>{$row['Quarter_Name']}</td>\n";
    echo "<td>{$row['Quarterly_yield']}</td>\n";
    echo "</tr>\n";
} 
```

或者您可以使用您拥有的结果创建一个数组，然后打印该数组。这将有效地将结果结合在一起。因此，让我们假设数组的结构如下：

```
$results[Year-Quarter] = array(Year, Quarter, QuarterName, Result1, Result2) 
```

然后您可以按如下方式构造数组：

```
$results = array();

while($row = mysql_fetch_array($result))
{
    $key = $row['Year'] . '-' . $row['Quarter'];
    $results[$key] = array(
        'Year'            => $row['Year'],
        'Quarter'         => $row['Quarter'],
        'Quarter_Name'    => $row['Quarter_Name'],
        'Quarter_yield_1' => $row['Quarter_yield'],
        'Quarter_yield_2' => 0,
    );
}

while($row = mysql_fetch_array($result8))
{
    $key = $row['Year'] . '-' . $row['Quarter'];

    // Check if we have this key
    if (isset($results[$key]))
    {
        $results[$key]['Quarter_yield_2'] = $row['Quarter_yield'];
    }
    else
    {
        $results[$key] = array(
            'Year'            => $row['Year'],
            'Quarter'         => $row['Quarter'],
            'Quarter_Name'    => $row['Quarter_Name'],
            'Quarter_yield_1' => 0,
            'Quarter_yield_2' => $row['Quarter_yield'],
        );
} 
```

然后打印`$results`数组中的结果

```
foreach ($results as $item)
{
    echo "<tr id='centered' >\m";  
    echo "<td class='leftalign'>{$item['Quarter_Name']}</td>\n";
    echo "<td>{$item['Quarter_yield_1']}</td>\n";
    echo "<td>{$item['Quarter_yield_2']}</td>\n";
    echo "</tr>\n";
} 
```

# php - 构造函数重载

> ID：13734101
> 
> 赞同：3
> 
> 时间：2012-12-05T23:01:44.983
> 
> 标签：php, oop, constructor, constructor-overloading

通常，当我想创建一个接受不同类型参数的类构造函数时，我将使用不定义任何参数的 kludgy 重载原则在构造函数定义中：例如，对于 ECEF 坐标类构造函数，我希望它接受 $x , $y 和 $z 参数，或接受包含 x、y 和 z 值的单个数组参数，或接受单个 LatLong 对象，我将创建一个类似于以下内容的构造函数：

```
function __construct()
    {
        //  Identify if any arguments have been passed to the constructor
        if (func_num_args() > 0) {
            $args = func_get_args();
            //  Identify the overload constructor required, based on the datatype of the first argument
            $argType = gettype($args[0]);
            switch($argType) {
                case 'array' :
                     //  Array of Cartesian co-ordinate values
                     $overloadConstructor = 'setCoordinatesFromArray';
                     break;
                case 'object' :
                     //  A LatLong object that needs converting to Cartesian co-ordinate values
                     $overloadConstructor = 'setCoordinatesFromLatLong';
                     break;
                default :
                     //  Individual Cartesian co-ordinate values
                     $overloadConstructor = 'setCoordinatesFromXYZ';
                     break;
            }
            //  Call the appropriate overload constructor
            call_user_func_array(array($this,$overloadConstructor),$args);
        }
    }   //  function __construct() 
```

我正在寻找一种替代方法：提供一个直接的构造函数，其中 $x、$y 和 $z 作为定义的参数，并提供 createECEFfromArray() 和 createECEFfromLatLong() 的静态方法来处理所有必要的 x、y 和z; 然后使用标准构造函数创建一个新的 ECEF 对象，并返回它

从 OO 纯粹主义者的角度来看，哪个选项更干净？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T12:51:11.277

我一直在考虑这里和其他人提供的清理对象构造函数重载的建议。我认为，我决定的方法是面向对象的优雅、易于实现且使用直观。

作为一种解决方案，我决定为构造函数参数实现一个通用接口：我首先创建一个接口。

```
interface Geodetic_XyzFormat
{
    public function getX();
    public function getY();
    public function getZ();
} 
```

我添加了一个抽象来实现接口中定义的 getter，以及 setter 和其他一些在多个子类中通用的方法。

```
abstract class Geodetic_ECEF_Coordinates implements Geodetic_XyzFormat
{
    protected $_xCoordinate;
    protected $_yCoordinate;
    protected $_zCoordinate;

    protected function setX($xCoordinate)
    {
        $this->_xCoordinate = $xCoordinate;
    }

    public function getX()
    {
        return $this->_xCoordinate;
    }

    protected function setY($yCoordinate)
    {
        $this->_yCoordinate = $yCoordinate;
    }

    public function getY()
    {
        return $this->_yCoordinate;
    }

    protected function setZ($zCoordinate)
    {
        $this->_zCoordinate = $zCoordinate;
    }

    public function getZ()
    {
        return $this->_zCoordinate;
    }

    protected function setCoordinates($xDistance,
                                      $yDistance,
                                      $zDistance,
                                      $uom)
    {
        $this->setX(
            ($xDistance instanceof Geodetic_Distance) ? $xDistance : new Geodetic_Distance($xDistance, $uom)
        );

        $this->setY(
            ($yDistance instanceof Geodetic_Distance) ? $yDistance : new Geodetic_Distance($yDistance, $uom)
        );

        $this->setZ(
            ($zDistance instanceof Geodetic_Distance) ? $zDistance : new Geodetic_Distance($zDistance, $uom)
        );
    }

} 
```

对于我的主类构造函数，我键入提示它接受扩展接口定义的类：

```
class Geodetic_ECEF_TestClass
{
    protected $_xCoordinate;
    protected $_yCoordinate;
    protected $_zCoordinate;

    public function __construct(Geodetic_XyzFormat $xyzCoordinates = NULL)
    {
        if (!is_null($xyzCoordinates)) {
            $this->_xCoordinate = $xyzCoordinates->getX();
            $this->_yCoordinate = $xyzCoordinates->getY();
            $this->_zCoordinate = $xyzCoordinates->getZ();
            return;
        }

        //    Defaults
          $this->_xCoordinate = new Geodetic_Distance();
           $this->_yCoordinate = new Geodetic_Distance();
           $this->_zCoordinate = new Geodetic_Distance();
    }
} 
```

最后，我创建了几个类来扩展我的抽象，每个类都可以处理构造函数参数的不同选项；在这种情况下，一个值数组和单个值...稍后我将编写 LatLong 变体，但它将使用相同的基本原理并以相同的方式扩展 Geodetic_ECEF_Coordinates。

```
class Geodetic_ECEF_CoordinateArray extends Geodetic_ECEF_Coordinates
{
    public function __construct(array $coordinates = NULL, $uom = Geodetic_Distance::METRES)
    {
        if (is_null($coordinates))
            throw new Geodetic_Exception('An array of vector coordinates must be passed');
        if (count($coordinates) == 3) {
            list ($xDistance, $yDistance, $zDistance) = array_values($coordinates);
        } else {
            throw new Geodetic_Exception('Invalid number of vectors in array');
        }

        $this->setCoordinates($xDistance, $yDistance, $zDistance, $uom);
    }

}

class Geodetic_ECEF_CoordinateValues extends Geodetic_ECEF_Coordinates
{
    public function __construct($xDistance = NULL,
                                $yDistance = NULL,
                                $zDistance = NULL,
                                $uom = Geodetic_Distance::METRES)
    {
        $this->setCoordinates($xDistance, $yDistance, $zDistance, $uom);
    }

} 
```

所以现在，当我实例化一个 ECEF 对象时，我将它传递给适当的 Geodetic_XyzFormat 对象：

```
//    Nothing passed to constructor
$dummyECEF1 = new Geodetic_ECEF_TestClass();
var_dump($dummyECEF1);

//    Array of values passed to constructor
$dummyECEF2 = new Geodetic_ECEF_TestClass(
    new Geodetic_ECEF_CoordinateArray(
        array(1.2, 3.4, 5.6)
    )
);
var_dump($dummyECEF2);

//    Individual values passed to constructor
$dummyECEF3 = new Geodetic_ECEF_TestClass(
    new Geodetic_ECEF_CoordinateValues(7.8, 9.1, 2.3)
);
var_dump($dummyECEF3);

//    Individual values passed to constructor (including a NULL, which should be treated as a 0)
$dummyECEF4 = new Geodetic_ECEF_TestClass(
    new Geodetic_ECEF_CoordinateValues(4.5, NULL, 6.7)
);
var_dump($dummyECEF4);

$xDistance = new Geodetic_Distance(11.11, Geodetic_Distance::MILES);
$yDistance = new Geodetic_Distance(22.22, Geodetic_Distance::MILES);
$zDistance = new Geodetic_Distance(33.33, Geodetic_Distance::MILES);
//    Array of distances passed to constructor
$dummyECEF5 = new Geodetic_ECEF_TestClass(
    new Geodetic_ECEF_CoordinateArray(
        array($xDistance, $yDistance, $zDistance)
    )
);
var_dump($dummyECEF5);

$xDistance = new Geodetic_Distance(44.44, Geodetic_Distance::MILES);
$yDistance = new Geodetic_Distance(55.55, Geodetic_Distance::MILES);
$zDistance = new Geodetic_Distance(66.66, Geodetic_Distance::MILES);
//    Individual distances passed to constructor
$dummyECEF6 = new Geodetic_ECEF_TestClass(
    new Geodetic_ECEF_CoordinateValues($xDistance, $yDistance, $zDistance)
);
var_dump($dummyECEF6);

$xDistance = new Geodetic_Distance(11.11, Geodetic_Distance::MILES);
$yDistance = new Geodetic_Distance(22.22, Geodetic_Distance::KILOMETRES);
$zDistance = new Geodetic_Distance(33.33, Geodetic_Distance::MILES);
//    Array of mixed values and distances passed to constructor
$dummyECEF7 = new Geodetic_ECEF_TestClass(
    new Geodetic_ECEF_CoordinateArray(
        array(11, $yDistance, 33), 
        Geodetic_Distance::MILES
    )
);
var_dump($dummyECEF7);

$xDistance = new Geodetic_Distance(44.44, Geodetic_Distance::MILES);
$yDistance = new Geodetic_Distance(55.55, Geodetic_Distance::KILOMETRES);
$zDistance = new Geodetic_Distance(66.66, Geodetic_Distance::INCHES);
//    Individual mixture of distances and values passed to constructor
$dummyECEF8 = new Geodetic_ECEF_TestClass(
    new Geodetic_ECEF_CoordinateValues($xDistance, 55, $zDistance, Geodetic_Distance::NAUTICAL_MILES)
);
var_dump($dummyECEF8); 
```

它不需要针对不同参数类型（无论是在工厂中还是在我的主类中）的所有 kludgy 测试，也不需要使用静态（因此为它编写单元测试应该很容易）

感谢所有提供建议并让我深思的人

# c++ - 在使用 dlopen() 加载共享对象之前，如何确定 cxxabi？

> ID：13734107
> 
> 赞同：1
> 
> 时间：2012-12-05T23:02:00.233
> 
> 标签：c++, c

我想在调用 dlopen() 之前确定我正在加载兼容的二进制文件。我想在加载库之前确定 cxxabi 级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:13:09.580

您可以在打开二进制文件之前扫描二进制文件使用的符号列表。我不确定如何在程序中执行此操作，尽管您可以阅读源代码以`readelf`获取提示。

在 Linux 系统上使用`readelf -d -s -W /usr/lib/libstdc++.so.6 | c++filt | less`，我看到一些标记如下的符号：`__gnu_cxx::__verbose_terminate_handler()@@CXXABI_1.3`

但是，我可能会尝试`dlopen()`，如果它返回 NULL，`dlerror()`则用于报告错误，然后让用户弄清楚。

# perl - find_all_links() Perl 函数找不到所有链接

> ID：13734108
> 
> 赞同：0
> 
> 时间：2012-12-05T23:02:07.363
> 
> 标签：perl, hyperlink, www-mechanize

我从 Perl 开始，我正在尝试做一个让我退出页面的脚本（我已经做了登录）。这个想法是，我正在尝试使用`WWW::Mechanize`（我也尝试过`WWW::Mechanize::Firefox`）中的 find_link 函数来查找注销链接，但它不起作用。所以，我的问题是：

*onmouseover*事件是否会避免找到该链接？我认为`WWW::Mechanize::Firefox`支持javascript，但也许这不正确。

```
<a class="hb2" href="/goform/Logout?logout=Logout" onmouseover="(window.status='Logout');
return true">Logout</a> 
```

有没有办法做我想做的事？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:39:33.887

显然我的*MozRepl*（需要使用 WWW::Mechanize::Firefox）插件​​没有安装好。@gangabass，@andy 我检查了 HTML，它似乎在源代码中。所以@choroba 我检查了为什么 WWW::Mechanize::Firefox 的行为与 WWW::Mechanize 相同，然后我重新安装了附加组件。然后一切都很完美。非常感谢大家花时间帮助我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:47:17.503

**你确定你的源 HTML 中有这个 HTML 片段吗？**我的意思是您的 HTML 代码片段可能是通过 Javascript 动态创建的，或者您的源 HTML 中有框架。

所以请显示输出`$mech->content()`和你的代码来处理这个链接（如上所述`$mech->find_link( text => 'Logout' );`应该可以工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:03:01.913

您是否使用`mech-dump`命令行实用程序转储了页面？试试看。如果您的链接出现在输出中，`mech-dump`那么您就`find_all_links()`错了。

如果`mech-dump`没有显示您的链接，那么您的 HTML 可能格式不正确，或者 HTML 是在浏览器中使用 JavaScript 生成的*。*

# ruby-on-rails - 为一个 api 单独登录

> ID：13734109
> 
> 赞同：1
> 
> 时间：2012-12-05T23:02:12.060
> 
> 标签：ruby-on-rails, api

我有一个非常简单的 api，它是需要登录的 rails 应用程序的一部分。

我只需要一种方法来使 api 部分可以通过一个简单的表单访问，该表单允许用户输入参数，如密钥（只是一个存储在数据库中的简单密钥，没有 OAuth 或任何东西），一个 userId 来查找并返回用户json，也许还有其他一些参数，比如询问他们的日程安排。

如何将其与应用程序的其余部分分开，使其成为一个面向公众的表单，仅授予对 api 的访问权限？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:23:16.167

您可以通过令牌对用户进行身份验证，即如果您使用的是设计，请检查模块：token_autenticable，如果您不使用设计，只需向用户添加一个字段并在创建时分配一个唯一的字符串。

然后要为 api 应用程序提供服务，您不能通过使用令牌身份验证向用户隐藏它，它是一个公共资源，您只需确保普通用户不会获得他们不允许看到的内容。

您可以在命名空间下创建到您的 api 的路由，例如：

```
namespace :api do
  resources :schedules
end 
```

因此 api 应用程序的请求将转到 /api/schedules

# apache - Codeigniter 拒绝使用 apache 配置访问控制器目录

> ID：13734113
> 
> 赞同：5
> 
> 时间：2012-12-05T23:02:36.460
> 
> 标签：apache, codeigniter, apache-config

我想限制对仅用于管理目的的控制器文件夹的访问。我尝试了多种方法，但没有提出解决方案。这些控制器有密码保护。但是，如果有人碰巧发现了正确的目录，我想将其从视图中删除。这可以做到吗？我宁愿不从 htaccess 做。我可以访问 apache 配置文件，所以我想在那里处理它。

它与 Codeigniter 的路由方式有什么关系吗？或者，我是不是很遥远？

我正在使用的这个不起作用

```
<Directory /var/www/application/controllers/folder/>
  Order deny,allow
  Deny from all
  Allow from xxx.xxx.xxx.xxx
</Directory> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:08:03.040

由于我们重写 url 以使用 CI 的方式，您永远不会匹配您的 Apache 配置，因为您实际上是在请求`index.php?{args}`. 如果要过滤，则必须在 CI 中进行。您的选择是核心控制器或挂钩。

一种简单的方法是创建一个您的管理/区域脚本扩展的核心控制器，并在那里检查 IP。

像这样的东西：

`application/core/MY_Controller.php`：

```
class MY_Controller extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();
        $this->load->config('permitted_ips');
        // check visitor IP against $config['ips'] array, redirect as needed
    }
} 
```

然后，在您的“敏感”控制器中，扩展 MY_Controller：

`application/controllers/admin/seekrit.php`

```
class Seekrit extends MY_Controller
{
    public function __construct() {
        parent::__construct();
        /* at this point any invalid IP has been redirected */
    }
} 
```

现在，如果您已经*将*核心控制器用于其他用途，只需`$this->uri->segment()`在加载允许的 IP 配置文件并检查/重定向/死亡或您需要做的其他任何事情之前检查它们是否在受限区域。

此外，如果您不需要一个构造函数，则无需在管理控制器中使用构造函数，因为如果未定义父级将被构造。如果您定义一个，请务必致电父母。

您还可以将白名单放入数据库、Redis 等中。

另一种方法是[使用钩子](http://ellislab.com/codeigniter/user-guide/general/hooks.html)，特别是`pre_controller`钩子。进入该挂钩时，所有安全类和基类都已运行。如果您想以更细化的方式保护部分或全部路由，这将是合适的。在那里，您可以定义一个包含路由的数组，例如：

```
$protected_routes = array(
    'foo' => array(
         'allow_ip' => '1.2.3.4',
         'redirect_if_not' => site_url('goaway')
     )
) 
```

然后，在您的钩子类（或函数）中匹配第一段（我的示例只是一个函数）：

```
$CI = get_instance();
$CI->load-config('my_hook');
$protected_routes = $CI->config->item('protected_routes');
$segment = $CI->uri->segment(1); // foo
if (in_array($segment, $protected_routes)) {

   // grab $protected_routes[$segment] and work with it
} 
```

这样做的好处是不会弄乱您的核心控制器，因为许多人使用它作为在方法之间共享代码的一种方式。但是，该挂钩将在每个请求上运行，这意味着将另外两个文件加载添加到引导程序。

我在大型 RESTful 服务上使用了 hook 方法，通过要求额外的标头来保护某些端点，并对其他端点实施不同类型的速率限制。请注意，上面的代码只是钩子*中*的一个示例，而不是如何设置钩子本身。阅读 CI 手册的 hooks 部分，它非常简单直接。

最后，如果你真的想通过 来做`.htaccess`，你必须自己去*请求*。永远不会进入目录`application/controllers/foo`，实际请求是`/foo/controller/method{args}`，这会导致 CI​​ 实例化`foo/controller.php`类。请记住，一旦重写，服务器会看到`index.php?....`

为此，您可以根据请求 URI 模式重新编写，如下所示（尚未测试，YMMV）：

```
RewriteRule (^|/)foo(/|$) - [F,L] 
```

可用于将访问虚拟路径的任何人重定向到受保护的控制器。这可能更可取，因为它可以防止 PHP 需要处理它，但是您失去了对匹配时发生的事情*的*控制粒度。不过，如果您有多个敏感区域需要保护，您可以使用类似上述重写与钩子或核心实现相结合的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T22:07:42.713

Tim Post 的上述想法与我在此站点或其他地方看到的另一种方法相似。我花了一段时间才回到这个问题上，但终于完成了。

正如 TheShiftExchange 在我原来的问题下的评论中指出的那样，.htaccess 不适用于 Codeigniter 项目。以下是我最终得到的结果，并且似乎运行良好。它可能不是 100% 安全的，但我真的只是想从直接访问中删除这些页面。如果有人设法进入该页面，则仍然有一个用户/密码登录屏幕。

应用程序/配置中的新配置文件

```
switch (ENVIRONMENT) //set in index.php
{
    case 'development':
        $config['admin_ips'] = array('XXX.XXX.XXX.XXX');
        break;
    case 'testing':
        $config['admin_ips'] = array('XXX.XXX.XXX.XXX', 'XXX.XXX.XXX.XXX', 'XXX.XXX.XXX.XXX');
        break;
    case 'production':
        $config['admin_ips'] = array('XXX.XXX.XXX.XXX', 'XXX.XXX.XXX.XXX', 'XXX.XXX.XXX.XXX');
        break;
} 
```

新控制器

```
class Admin_IP_Controller extends MY_Controller {
    function __construct()
    {
        parent::__construct();
        $this->load->config('admin_ips');
        if (!in_array($this->input->ip_address(), $this->config->item('admin_ips')))
        {
            show_404();
        }
    }
} 
```

# c# - 如何使用 SSIS 和 HTTPS 访问安全网站：屏幕抓取

> ID：13734116
> 
> 赞同：0
> 
> 时间：2012-12-05T23:02:51.320
> 
> 标签：c#, vb.net, ssis, connection, screen-scraping

我一直在网上尝试查找有关如何使用 SSIS 从经过身份验证的网站进行筛选和/或下载文件的示例。然而，我这样做并没有成功。有人可以提供如何解决这种情况的指导。

工具：

SSIS - 编程语言 C#

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:13:51.240

我强烈推荐 Donald Farmer 的这本书：[The Rational Guide to Extending SSIS 2005 with Script](https://rads.stackoverflow.com/amzn/click/com/1932577254)。这些例子是用 VB 而不是 C# 编写的，但编程概念在那里。如果需要，请使用 VB 到 C# 转换器。

# dom - 停止从自定义“标题”类到其 GWT DataGrid/ListHandler 的浏览器事件冒泡

> ID：13734120
> 
> 赞同：1
> 
> 时间：2012-12-05T23:03:06.897
> 
> 标签：dom, gwt, datagrid, mouseevent

我正在创建 GWT **Header<String>**类的自定义实现，用于 DataGrid**列**，该列还使用**ListHandler**对该列中的数据进行排序。我正在尝试处理和取消**Header**类中的浏览器事件，这样如果用户单击此自定义**Header**对象呈现的特定 <INPUT>**元素**，我们会阻止“mousedown”事件冒泡回到 DataGrid 的事件处理程序（因为这会错误地触发**ListHandler**的列排序方法，从而阻止用户将数据输入到相关的 <INPUT>**元素**中）。

 ******通过使用以下代码在我的**Header类中实现****NativePreviewHandler** ，我能够成功地隔离我们想要“取消”其冒泡的事件：

 **```
 @Override
        public void onPreviewNativeEvent(NativePreviewEvent event) {
            final NativeEvent natEvent = event.getNativeEvent();
            final Element element = natEvent.getEventTarget().cast();
            final String eventType = natEvent.getType();                 
            if ("mousedown".equals(eventType)) {
                if (element.getTagName().equals("INPUT")) {
                    natEvent.preventDefault();
                    natEvent.stopPropagation();
                    event.cancel();
                }
            }
            return;
        } 
```

不幸的是，没有组合*preventDefault()*、*stopPropagation()*或*event.cancel()*方法成功阻止 mousedown 事件冒泡到父**DataGrid**的处理程序。当我尝试调试此问题时，我能够确认虽然**DOM** . *previewEvent*方法成功调用了**DOM**。*eventCancelBubble*和**DOM**。*eventPreventDefault*，**DOM**。*dispatchEvent*方法仍然被触发并最终触发了**DataGrid**。*fireEvent*和一个**列排序事件**。

如果单击自定义标题的特定部分，任何防止 GWT DataGrid 自行恢复的指导/方法将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:25:26.913

`Header`您可以使用以下代码片段通过覆盖 onBrowserEvent2 API来防止单击时对列进行排序`DataGrid`。

```
@Override
protected void onBrowserEvent2( Event event )
{
    EventTarget eventTarget = event.getEventTarget();
    if ( !Element.is( eventTarget ) )
    {
        return;
    }
    final Element target = eventTarget.cast();
    String id = target.getId();
    if ( id != null && id.equals( COLUMN_HEADER_ID ) )
    {
        return;
    }
    super.onBrowserEvent2( event );
} 
```********

# python - Python - OOP 井字游戏

> ID：13734121
> 
> 赞同：1
> 
> 时间：2012-12-05T23:03:07.393
> 
> 标签：python, oop, tic-tac-toe

我正在为一项作业编写井字游戏。它需要使用面向对象的编程，并且必须相对聪明——它需要阻止玩家的成功。我在这方面遇到了很多麻烦。

我的麻烦来自我的`rowabouttowin`方法：我做了一个非常复杂的列表理解，但我认为我做得不对。

我想要的是一种检查玩家是否将水平赢得游戏的方法（O _ O，OO _ 或 _ OO，如果标记 = O），如果玩家是，则返回计算机应该玩的位置。

关于如何最好地解决这个问题的任何帮助或建议？

```
from random import randint

class TTT:
    board = [[' ' for row in range(3)] for col in range(3)]
    currentgame = []

    def print(self):
    """Displays the current board."""
        print("\n-----\n".join("|".join(row) for row in self.board))

    def mark(self,pos,mark):
    """Method that places designated mark at designated position on the board."""
        x,y = pos
        self.board[x][y] = mark

    def win(self,mark):
    """Method that checks if someone has won the game."""
        if mark == self.board[0][0] == self.board[1][1] == self.board[2][2]:
            return True
        if mark == self.board[2][0] == self.board[1][1] == self.board[0][2]:
            return True
        elif mark == self.board[0][0] == self.board[1][0] == self.board[2][0]:
            return True
        elif mark == self.board[1][0] == self.board[1][1] == self.board[1][2]:
            return True
        elif mark == self.board[0][1] == self.board[1][1] == self.board[2][1]:
            return True
        elif mark == self.board[0][2] == self.board[1][2] == self.board[2][2]:
            return True
        elif mark == self.board[0][0] == self.board[0][1] == self.board[0][2]:
            return True
        elif mark == self.board[2][0] == self.board[2][1] == self.board[2][2]:
            return True
        else:
            return False

    def choose(self,mark):
    """The computer chooses a place to play. If the player is not about to win,
    plays randomly. Otherwise, does a series of checks to see if the player is about
    to win horizontally, vertically, or diagonally. I only have horizontal done."""
        spotx = randint(0,2)
        spoty = randint(0,2)
        if self.rowabouttowin(mark):
            self.mark((self.rowabouttowin(mark)),mark)
        elif self.legalspace(spotx,spoty):
            self.mark((spotx,spoty),mark)
        else:
            self.choose(mark)

    def legalspace(self,spotx,spoty):
    """Returns True if the provided spot is empty."""
        if self.board[spotx][spoty] == ' ':
            return True
        else:
            return False

    def rowabouttowin(self,mark):
    """If the player is about to win via a horizontal 3-in-a-row,
    returns location where the computer should play"""
        for row in range(3):
            if any(' ' == self.board[row][1] for i in range(3)) and any(self.board[row][i] == self.board[row][j] for i in range(3) for j in range(3)):
                    if self.board[row][i] == ' ' : yield(self.board[row][i % 3], self.board[row][i]) 
```

这当前给出了这个错误消息：

```
Traceback (most recent call last):
  File "<pyshell#49>", line 1, in <module>
    x.choose('x')
  File "/Users/richiehoffman/Documents/Python Programs/Tic Tac Toe.py", line 40, in choose
    self.mark((self.rowabouttowin(mark)),mark)
  File "/Users/richiehoffman/Documents/Python Programs/Tic Tac Toe.py", line 11, in mark
    x,y = pos
  File "/Users/richiehoffman/Documents/Python Programs/Tic Tac Toe.py", line 61, in rowabouttowin
    if self.board[row][i] == ' ' : yield(self.board[row][i % 3], self.board[row][i])
NameError: global name 'i' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:16:05.003

一些提示：

*   您使用的是类变量，而不是实例变量，因此请查看差异。我将您的类更改为使用实例变量，因为您设置的变量应该属于一个实例。

*   考虑让事情更具可读性。

*   用于`__str__`制作课程的可打印版本。这样，你可以做到`print(class_instance)`，结果会很好。

这是我更改的内容：

```
from random import randint

class TTT(object):
    def __init__(self):
        self.board = [[' ' for row in range(3)] for col in range(3)]
        self.currentgame = []

    def __str__(self):
        """Displays the current board."""

        return "\n-----\n".join("|".join(row) for row in self.board)

    def mark(self, pos, mark):
        """Method that places designated mark at designated position on the board."""

        x, y = pos
        self.board[x][y] = mark

    def win(self, mark):
        """Method that checks if someone has won the game."""

        for row in self.board:
            if row[0] == row[1] == row[2]:
                return True

        for i in range(3):
            if self.board[0][i] == self.board[1][i] == self.board[2][i]:
                return True

        if board[0][0] == board[1][1] == board[2][2]:
            return True
        elif board[0][2] == board[1][1] == board[2][0]:
            return True
        else:
            return False

    def choose(self, mark):
        """The computer chooses a place to play. If the player is not about to win, 
        plays randomly. Otherwise, does a series of checks to see if the player is about
        to win horizontally, vertically, or diagonally. I only have horizontal done."""

        spotx = randint(0, 2)
        spoty = randint(0, 2)

        if self.rowabouttowin(mark):
            self.mark((self.rowabouttowin(mark)), mark)
        elif self.legalspace(spotx, spoty):
            self.mark((spotx, spoty), mark)
        else:
            self.choose(mark)

    def legalspace(self, spotx, spoty):
        """Returns True if the provided spot is empty."""

        return self.board[spotx][spoty] == ' '

    def rowabouttowin(self, mark):
        """If the player is about to win via a horizontal 3-in-a-row, 
        returns location where the computer should play"""

        for row in range(3):
            check_one = any(' ' == self.board[row][1] for i in range(3))
            check_two = any(self.board[row][i] == self.board[row][j] for i in range(3) for j in range(3))

            # I have no idea what this code does

            if self.board[row][i] == ' ' :
                yield self.board[row][i % 3], self.board[row][i] 
```

# ruby - Ruby 哈希键作为符号不起作用

> ID：13734126
> 
> 赞同：4
> 
> 时间：2012-12-05T23:03:56.490
> 
> 标签：ruby

我很困惑为什么密钥的符号版本在以下示例中不起作用。如前所述，我使用的是 Ruby 1.9.3。这是一个更大的应用程序的一部分，但已经能够将其缩小到这个问题。

先感谢您！

`1.9.3-p194 :002 > json_sample = "{\"this\":\"notworking\"}"`
`=> "{\"this\":\"notworking\"}"`
`1.9.3-p194 :003 > test_hash = JSON.parse json_sample`
`=> {"this"=>"notworking"}`
`1.9.3-p194 :004 > test_hash["this"]`
`=> "notworking"`
`1.9.3-p194 :005 > test_hash[:this]`
`=> nil`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T23:07:27.003

JSON 作为 JavaScript 的一个子集，没有符号的概念。所有键都是字符串——因此，当您使用 Ruby 解析 JSON 时，会使用字符串作为键来创建哈希。

如果您习惯使用 Ruby on Rails，您可能习惯使用`HashWithIndifferentAccess`es，它允许您使用字符串*或*符号作为键。

* * *

[更新] 正如 akuhn 在评论中提到的，您可以通过传递`symbolize_names: true`给选项来强制 JSON 模块符号化所有键`JSON.parse`：

```
JSON.parse(json_string, symbolize_names: true) 
```

这将使键符号，这意味着您在访问散列时不能使用字符串作为键。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T00:29:30.920

您可以告诉 JSON 符号化所有名称

```
data = JSON.parse(input, :symbolize_names => true) 
```

# javascript - 时间用完时倒计时时钟不会返回。

> ID：13734128
> 
> 赞同：0
> 
> 时间：2012-12-05T23:04:02.280
> 
> 标签：javascript

我正在使用此答案中的代码： [https ://stackoverflow.com/a/6501353/494901](https://stackoverflow.com/a/6501353/494901)

基本上，当计时器结束时，我希望它对我的函数返回 true，这样当它结束时，我只能在它结束后做一些事情。但是脚本永远不会返回，它会结束，但它永远不会返回到它被调用的方法。

```
function countdown( elementName, minutes, seconds )
{
    var element, endTime, hours, mins, msLeft, time;

    function twoDigits( n )
    {
        return (n <= 9 ? "0" + n : n);
    }

    function updateTimer()
    {
        msLeft = endTime - (+new Date);
        if ( msLeft < 1000 ) {
            return true; 
        } else {
            time = new Date( msLeft );
            hours = time.getUTCHours();
            mins = time.getUTCMinutes();
            element.innerHTML = (hours ? hours + ':' + twoDigits( mins ) : mins) +
                ':' + twoDigits( time.getUTCSeconds() );
            setTimeout( updateTimer, time.getUTCMilliseconds() + 500 );
        }
    }

    element = document.getElementById( elementName );
    endTime = (+new Date) + 1000 * (60*minutes + seconds) + 500;
    return updateTimer();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:15:40.563

像这样传递一个回调函数：

```
countdown("element-id",0,5, function() { alert('done!'); });

function countdown( elementName, minutes, seconds, callback)
{
    var element, endTime, hours, mins, msLeft, time;

    function twoDigits( n )
    {
        return (n <= 9 ? "0" + n : n);
    }

    function updateTimer()
    {
        msLeft = endTime - (+new Date);
        if ( msLeft < 1000 ) {
            callback();
        } else {
            time = new Date( msLeft );
            hours = time.getUTCHours();
            mins = time.getUTCMinutes();
            element.innerHTML = (hours ? hours + ':' + twoDigits( mins ) : mins) +
                ':' + twoDigits( time.getUTCSeconds() );
            setTimeout( updateTimer, time.getUTCMilliseconds() + 500 );
        }
    }

    element = document.getElementById( elementName );
    endTime = (+new Date) + 1000 * (60*minutes + seconds) + 500;
    return updateTimer();
} 
```

# html - 如何防止最右边的内联元素在 CSS 中换行或溢出？

> ID：13734137
> 
> 赞同：0
> 
> 时间：2012-12-05T23:04:31.530
> 
> 标签：html, css

我放弃！

这是我要完成的工作：

**小提琴**：http: [//jsfiddle.net/Ws5Ts/1/](http://jsfiddle.net/Ws5Ts/1/)

**期望的行为**：

1.  指标编号与客户姓名内联显示（我不希望它固定在`item`div 的右侧）
2.  `item`当窗口调整大小或客户的姓名很长时，指示器不应溢出，而是在客户姓名溢出时停留在 div的右侧

在过去的两个小时里，我一直在尝试使用`divs`具有不同定位的所有不同类型的包装，但我无法让任何东西完全按照我想要的方式工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:21:35.373

好的，我在这上面花了太多时间。

**可能的解决方案**：http : [//jsfiddle.net/Ws5Ts/17/](http://jsfiddle.net/Ws5Ts/17/)

**方法：**

1.  反转文本和指示器的顺序，然后切换`direction`到`rtl`，使文本向左溢出。这使指示器保持在我想要的位置，但文本现在朝错误的方向溢出。
2.  隐藏溢出的文本并将其用作分隔符。在具有边距的容器中设置重复的可见绝对定位文本以说明指示器，并在该容器上设置 nowrap、隐藏溢出和文本溢出。

这似乎适用于 Chrome、Firefox、Safari 和 IE9。

还有其他人有不那么复杂的方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:10:51.837

将指标放在当前 div 之外怎么样？只是做了一个非常简单的例子来说明我的意思：http: [//jsfiddle.net/Ws5Ts/3/](http://jsfiddle.net/Ws5Ts/3/)

我的课表现不是很正确，但我要睡觉了:)

```
' 
```

编辑：如果更适合您的布局，请参阅我关于 margin-left 的评论

# javascript - 如何仅打印/显示两位小数（javascript/CSS/HTML）？

> ID：13734139
> 
> 赞同：-1
> 
> 时间：2012-12-05T23:04:41.347
> 
> 标签：javascript, html, css

我已经找到了很多关于这个问题的答案，但我不知道哪个是最好的答案或者在哪里添加它..

这是代码：

```
 // HTML //
 <html>

 <head>

 <script type="text/javascript" language="Javascript">

 var v1 = 0;
 var v2 = 0;

 var answer = 0;

 function calculate () {

 answer = v1 / v2;

 var elem;
 elem = document.getElementById("v1");
 elem.value = v1;
 elem = document.getElementById("v2");
 elem.value = v2;

 elem = document.getElementById("answer");
 elem.value = answer;

 }

 function setValue(elem) {
 var val = 0.0;
 if (elem.value != "") {
 val = parseFloat(elem.value);
 }
 else {
 val = 0.0;
 }
 switch (elem.id) {
 case "v1": v1 = val; break;
 case "v2": v2 = val; break;
 }
 calculate();
 }
 </script>

 [..]

 </head>
 [...] 
```

和

```
 // HTML //

[...]

<form>
<input type="text" id="v1" onKeyUp="javascript: setValue(this);">
<input type="text" id="v2" onKeyUp="javascript: setValue(this);">
<input type="text" id="answer" readonly>
</form>

[...] 
```

现在，什么会使结果显示或打印（我不知道哪个是正确的）只有 2 位小数，应该放在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:07:34.120

利用`.toFixed(2)`

```
(parseFloat(elem.value)).toFixed(2); 
```

您的代码的问题是您正在**尝试设置**您**似乎正在输入**的当前文本框的值。因此，如果您按退格键，它会再次被覆盖**并进入无限循环..**

您似乎已经编写了很多代码来完成一项微不足道的任务..

移动您的内联 javascript 并在脚本本身中附加事件..

我对你的代码做了一些修改..

**HTML**

```
<input type="text" id="v1" value="0.00">
<input type="text" id="v2" value="0.00">
<input type="text" id="answer" readonly> 
```

**Javascript**

```
 var elem = document.getElementsByTagName('input');

 for(var i =0;i< elem.length ; i++){
     elem[i].addEventListener("keyup", function(){
          setValue(this); 
     });
     elem[i].addEventListener("blur", function(){
          setCurrentValue(this); 
     });
}

function setCurrentValue(elem){
    elem.value = parseFloat(elem.value).toFixed(2);
}

function calculate(v1,v2) {
    answer = v2 == 0 ? 0 : (v1/v2);
    var elem = document.getElementById("answer");
    elem.value = parseFloat(answer).toFixed(2);;

}

function setValue(elem) {
    var v1 = document.getElementById('v1').value;
    var v2 = document.getElementById('v2').value;
    v1 = v1 == '' ? 0 : parseFloat(v1);
    v2 = v2 == '' ? 0 : parseFloat(v2);
    calculate(v1,v2);
} 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/ayM5s/)**

# java - 命令行上显示不同的 Java 版本

> ID：13734142
> 
> 赞同：18
> 
> 时间：2012-12-05T23:04:59.977
> 
> 标签：java, cmd, version

我最近检查了我的 Java 版本。我运行了命令`java -version`，发现我正在使用`java version 1.7.0_09`. 但是当我试图检查`C:\Program Files\Java\`目录时，我似乎找不到相同的版本。我只看到以下内容：

*   j2re1.4
*   jdk1.6.0_32
*   jdk1.7.0_06
*   jdk1.7.0_07
*   jre6
*   jre7

等等...

我的程序仍在运行，但我只是想手动编译所有内容，并了解操作系统如何处理 Java。

另一件奇怪的事情是，我试图检查环境变量设置，但它没有说明任何关于`jdk1.7.0_09`.

**小路：**

*   C:\Program Files\Common Files\Microsoft Shared\Windows Live；
*   %SystemRoot%\system32;
*   %系统根%；
*   %SystemRoot%\System32\Wbem;
*   %SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;
*   C:\Program Files\TortoiseSVN\bin;
*   C:\Program Files\Windows Live\Shared;
*   C:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.6.5\appengine-java-sdk-1.6.5\bin;
*   C:\Program Files\Java\jdk1.7.0_07\bin;C:\Program Files\QuickTime\QTSystem\;
*   %ANT_HOME%\bin

只是想让你们知道它以某种方式自动变成了jre。

完整的目录是`C:\Users\User02\AppData\LocalLow\Sun\Java\jre1.7.0_09`，它只是有一个名为`lzma.dll`.

但是，我有另一个目录，上面写着`C:\Users\User02\AppData\LocalLow\Sun\Java\jdk1.7.0_07`. 里面的文件是：

*   jdk1.7.0_07.msi
*   sj170070.cab
*   ss170070.cab
*   st170070.cab
*   和 sz170070.cab

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-05T23:31:13.893

一台计算机上可以并排放置许多 JRE。

如果在 Windows 上正确安装了 JRE，则有关每个版本的信息都存储在注册表中。安装过程会在系统 PATH ( **%SYSTEMROOT%\System32** )中安装一个**特殊的 java.exe 。**所以你不需要改变你的路径，因为这个特殊的 java.exe 会找到当前的 JRE。在命令行中，键入 java -version 以显示当前安装的 jre 版本。

 **在 1.6 版中，现在可以选择与上一个不同的 JRE 安装，而无需修改任何注册表。

JRE 安装列在注册表中的键

> HKEY_LOCAL_MACHINE\SOFTWARE\JavaSoft\Java 运行时环境

参加这个简单的测试课程

```
public class ShowVersion {
 public static void main(String args[]) {
   System.out.println(System.getProperty("java.version"));
 }
} 
```

在安装了 1.6 和 1.5 的系统上。如果你输入

```
> java ShowVersion 
```

它可能是 1.6 JRE，因为它是最后安装的。

要改为强制使用 1.5 JRE，请使用此命令行。

```
> java -version:"1.5" ShowVersion 
```

如果字节码与给定的 JRE 不兼容，那么 .. 它当然不会工作。

参考： [技术说明 java 6](http://java.sun.com/javase/6/docs/technotes/tools/windows/java.html)

您始终可以提供使用特定安装的完整路径。以这种方式启动 JVM 根本不使用注册表设置。

```
>"C:\Program Files\Java\j2re1.4.1_02\bin\java" -version
java version "1.4.1_02" 
```

source :[从命令行中选择一个特定的 JRE](http://www.rgagnon.com/javadetails/java-0634.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-27T08:50:47.863

添加以下内容将解决您的问题：

```
set JAVA_HOME="your jdk path"
set PATH=%JAVA_HOME%\bin;%PATH%. 
```

此外，如果它不起作用，这意味着您已经`PATH`为多个 java 版本设置了，请仅包含最新版本并从`PATH`变量中删除所有版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T23:34:00.890

回答“实际”问题：

> 另一件奇怪的事情是，我试图检查环境变量设置，它没有说明 jdk1.7.0_09 的任何内容。

这里发生的是你安装了 jdk1.7.0_07 然后你自动升级了它。发生这种情况时，它仍然使用您最初安装到的旧文件夹名称。

安装 Java 后，我通常会复制 JDK 目录并用版本号命名。然后，我可以像这样直接调用某个java：

```
@echo off
:: testjava.bat
set JAVA_HOME=C:\JDK1.x.xx
set PATH=%JAVA_HOME%\bin;%PATH%;.
java -version
pause 
```

所以，我的建议是设置你的 JAVA_HOME 系统变量和 PATH 变量，就像我上面显示的那样。这将覆盖系统上的所有内容，以便您选择的 JDK 是 JRE 的默认值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T23:43:09.233

您评论中的那条`AppData`路径不在您的路径上（据说，无论如何），所以这可能不是它正在使用的。不幸的是，Windows 上也没有`which`命令。

如果您编辑路径并将`C:\Program Files\Java\bin`目录移动到列表的最开头并且它仍然打印`1.7.0_09`，那么您的 JDK7u7 文件夹中有 JDK7u9。如果没有，请浏览到路径上的所有其他目录并逐一打开它们，直到找到合适的`java`文件。对你来说幸运的是，你的路比我的*要*短得多。

请注意，在执行时：

```
> java -version 
```

它还可能会寻找`java.bat`其他非`exe`扩展名，因此在搜索路径时请留意这一点。尝试运行：

```
> java.exe -version 
```

这样你就*知道*你正在寻找一个`exe`文件。

您可以尝试的最后一件事：

```
> "C:\Program Files\Java\jdk1.7.0_07\bin\java" -version 
```

如果返回`1.7.0_09`，那么发生了一些事情，就地更新了你的 JDK，这是不应该发生的，AFAIK（但我可能是错的）。**

# linux - 批量裁剪和调整图像大小以创建缩略图

> ID：13734148
> 
> 赞同：5
> 
> 时间：2012-12-05T23:05:29.287
> 
> 标签：linux, image, imagemagick, thumbnails, imagemagick-convert

我有一大组 jpg 图像，我想为其创建缩略图。这些图像都有不同的尺寸和分辨率，但我希望所有缩略图都具有标准尺寸，例如 120x80px。但是，我不想拉伸图像。所以我想做以下事情：

1.  将图像裁剪为 1.5 : 1 的纵横比。将裁剪区域居中（即左右或上下等量裁剪）
2.  将图像大小调整为 120 x 80 像素。

有没有一个linux命令可以这样做？我查看了 imagemick convert ，但我不知道如何进行居中裁剪。似乎您必须手动指定每张图像的裁剪区域？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T23:45:30.277

这适用于大于 120x80 的图像。未在较小的设备上进行测试，但您应该能够对其进行调整。

```
#! /bin/bash
for img in p*.jpg ; do
    identify=$(identify "$img")
    [[ $identify =~ ([0-9]+)x([0-9]+) ]] || \
        { echo Cannot get size >&2 ; continue ; }
    width=${BASH_REMATCH[1]}
    height=${BASH_REMATCH[2]}
    let good_width=height+height/2

    if (( width < good_width )) ; then # crop horizontally
        let new_height=width*2/3
        new_width=$width
        let top='(height-new_height)/2'
        left=0

    elif (( width != good_width )) ; then # crop vertically
        let new_width=height*3/2
        new_height=$height
        let left='(width-new_width)/2'
        top=0
    fi

    convert "$img" -crop "$new_width"x$new_height+$left+$top -resize 120x80 thumb-"$img"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T01:48:37.803

[`crop-resize.py`](https://gist.github.com/4221180)这是一个用于裁剪、居中和调整输入图像大小的 Python 脚本：

```
usage: crop-resize.py [-h] [-s N N] [-q] [--outputdir DIR]
                      files [files ...]

Resize the image to given size. Don't strech images, crop and center
instead.

positional arguments:
  files               image filenames to process

optional arguments:
  -h, --help          show this help message and exit
  -s N N, --size N N  new image size (default: [120, 80])
  -q, --quiet
  --outputdir DIR     directory where to save resized images (default: .) 
```

核心功能是：

```
def crop_resize(image, size, ratio):
    # crop to ratio, center
    w, h = image.size
    if w > ratio * h: # width is larger then necessary
        x, y = (w - ratio * h) // 2, 0
    else: # ratio*height >= width (height is larger)
        x, y = 0, (h - w / ratio) // 2
    image = image.crop((x, y, w - x, h - y))

    # resize
    if image.size > size: # don't stretch smaller images
        image.thumbnail(size, Image.ANTIALIAS)
    return image 
```

[它与@choroba 的 bash 脚本](https://stackoverflow.com/a/13734613/4279)非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:35:36.680

好的，我设法创建了至少适用于方形缩略图的东西。但是，我不太确定如何将其更改为 1:5 x 1 缩略图。

```
make_thumbnail() {
    pic=$1
    thumb=$(dirname "$1")/thumbs/square-$(basename "$1")
    convert "$pic" -set option:distort:viewport \
      "%[fx:min(w,h)]x%[fx:min(w,h)]+%[fx:max((w-h)/2,0)]+%[fx:max((h-w)/2,0)]"$
      -filter point -distort SRT 0  +repage -thumbnail 80  "$thumb"
}

mkdir thumbs
for pic in *.jpg
do
    make_thumbnail "$pic"
done 
```

# python - 为什么这个 if 语句不起作用？python 3的新手

> ID：13734151
> 
> 赞同：5
> 
> 时间：2012-12-05T23:05:43.170
> 
> 标签：python, python-3.x

我一生都无法弄清楚为什么这个 if 语句在 Python 3 中不起作用。我一直使用 python 2.7，但我需要熟悉 3。这是我的代码

```
print("Answer the question! [(Y)es or (N)o]: ")
answer = input()
print(answer)

if answer == "y":
    print("OK")

print("done") 
```

我开始这段代码，提出问题，好的，这很正常。对于输入，我给它一个小写的 y。我看到 'y' 打印回给我，但随后程序绕过 if 语句并直接完成。我做错了什么简单的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:26:43.227

对于初学者来说，您的代码有效！我已经在网上测试过了，它可以工作。可能与您的 IDE 或您正在使用的任何 Python 有关。我在使用 Jython 时遇到过这样的错误。

![但它在这里工作！](../Images/38db389bcf8bee9598535245b7833812.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:12:23.063

我没有看到任何问题[http://ideone.com/Vk9Hdo](http://ideone.com/Vk9Hdo)，试试这个：

```
print("Answer the question! [(Y)es or (N)o]: ")
answer = input()
print(answer)

if answer == "y":
    print("OK")

print("done") 
```

输出

```
Answer the question! [(Y)es or (N)o]: 
y
OK
done 
```

# perl - 类似 Perl IDE 的 Vim

> ID：13734154
> 
> 赞同：3
> 
> 时间：2012-12-05T23:06:06.823
> 
> 标签：perl, ide, vim, vim-plugin

我使用 Vim 和 vim 脚本“ [perl-support](http://www.vim.org/scripts/script.php?script_id=556) ”进行 Perl 编程。但是在像 Perl Vim IDE 这样的 perlsupport 中，我找不到在我的脚本中显示所有函数和变量的功能。是否有任何其他有用的 vim 脚本可以实现这个目标，或者我如何使用其他方法来实现它？感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:14:12.907

查看[标签栏插件](http://majutsushi.github.com/tagbar/)。它使用 CTAGS，这是一种 Unix 标准方法，用于在各种语言的源代码中索引符号。插件页面有设置它的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:00:49.937

对不起话题。这不是显示函数/变量的插件。

使用[perlomni.vim](https://github.com/c9s/perlomni.vim)

这提供了代码完成，可以通过分析上下文来显示候选者。例如，

```
use Foo;
my $foo = Foo->new;
$foo-> 
```

perlomni 显示方法功能。这很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:06:13.847

您可以将其他建议与[NeoComplCache](https://github.com/Shougo/neocomplcache)结合使用。该插件可以将它们全部集成，包括其他一些不错的补全功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T14:45:06.840

要显示功能列表，您可以使用[来自 vim.org](http://www.vim.org/scripts/script.php?script_id=397)或[来自 ghub的 Dave Vehrs 插件](https://github.com/vim-scripts/ShowFunc.vim)

从插件描述：

> 该脚本在单个文件或所有当前打开的窗口中创建所有函数、子例程、类、宏或过程的超链接列表，并将它们显示在动态大小的 cwindow 中。

它适用于 perl。

# pug - Scalate Jade 多个包含无法按预期工作

> ID：13734155
> 
> 赞同：0
> 
> 时间：2012-12-05T23:06:06.850
> 
> 标签：pug, scalate

第1部分，widget1.jade：

```
p 1 
```

第2部分，widget2.jade：

```
p 2 
```

布局尝试 1：

```
- include("widget1.jade") 
```

这呈现：

```
<p>1</p> 
```

布局尝试 2：

```
- include("widget2.jade") 
```

这呈现：

```
<p>2</p> 
```

布局尝试 3：

```
- include("widget1.jade")

- include("widget2.jade") 
```

渲染：

```
<p>1</p>
<p>1</p> 
```

任何人都可以验证这一点吗？漏洞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:52:25.240

您使用的是什么版本的 scalate/OS/configuration？

在 OS X 上，使用 Scalate 1.5.3 我有以下内容：

```
mcbatyuk:scalate bam$ cat view1.jade 
p 1

mcbatyuk:scalate bam$ cat view2.jade
p 2

mcbatyuk:scalate bam$ cat compound.jade 
- include("view1.jade")

- include("view2.jade") 
```

现在运行复合模板：

```
scalate> run compound.jade 
<p>1</p>
<p>2</p> 
```

我担心从命令行运行 $ scalate run Compound.jade 实际上并没有做任何事情，但这是另一回事:-)

# ajax - Kendo UI 网格数据绑定

> ID：13734158
> 
> 赞同：1
> 
> 时间：2012-12-05T23:06:15.417
> 
> 标签：ajax, json, kendo-ui

我有一段时间将网格重新绑定到从 AJAX 调用接收到的数据。日期失去格式。

```
@{
    ViewBag.Title = "Index";
}

@section Scripts {
    <script type="text/javascript">
        var viewModel;

        $(function () {
            // Load Data
            $.ajax({
                async: false,
                url: "/Kendo/Home/GetData"
            }).success(function (result) {
                viewModel = new kendo.observable(result);
            });

            // Create Grid
            $("#grid").kendoGrid({
                dataSource: {
                    data: viewModel.People,
                    schema: {
                        model: {
                            fields: {
                                DOB: { type: "date" }
                            }
                        }
                    }
                },
                columns: [
                    { field: "FirstName", title: "First Name" },
                    { field: "LastName", title: "Last Name" },
                    { field: "DOB", title: "Date of Birth", format: "{0:MM/dd/yyyy}" }
                ],
                editable: true
            });

            $(document).on("click", "#btn-save", function (e) {
                $.ajax({
                    url: "/Kendo/Home/Save",
                    type: "POST",
                    data: JSON.stringify(viewModel),
                    contentType: "application/json"
                }).success(function (result) {
                    var g = $("#grid").data("kendoGrid");
                    viewModel = new kendo.observable(result);
                    g.dataSource.data(viewModel.People);

                });
            });
        });
    </script>
}

<div id="grid"></div>
<div id="view">
    <input data-bind="value: firstName" />
    <input data-bind="value: lastName" />
    <button id="btn-save">Save</button>
</div> 
```

加载的初始数据是这样的：

```
{"People":[{"FirstName":"Sam","LastName":"Striano","DOB":"\/Date(215420400000)\/"},{"FirstName":"Karson","LastName":"Striano","DOB":"\/Date(321609600000)\/"}]} 
```

从 AJAX 调用（通过保存按钮）返回的数据是这样的：

```
{"People":[{"FirstName":"Sam 1234","LastName":"Striano","DOB":"\/Date(216288000000)\/"},{"FirstName":"Karson 1234","LastName":"Striano","DOB":"\/Date(322473600000)\/"}]} 
```

# javascript - jqvmap Region点击iphone/ipad

> ID：13734159
> 
> 赞同：5
> 
> 时间：2012-12-05T23:06:15.117
> 
> 标签：javascript, html, jqvmap

有一个用于站点的开源矢量地图，称为 jqvmap

问题是使用 ipad 或 iphone 浏览器处理点击不正确。第一次触摸会导致 onRegionOver 事件。第二次触摸会导致 onRegionClick 事件。

我们如何修改 onRegionOver 以使其在 ios 上作为点击工作？

```
jQuery('#vmap').vectorMap(
{
    map: 'world_en',
    backgroundColor: '#a5bfdd',
    borderColor: '#818181',
    borderOpacity: 0.25,
    borderWidth: 1,
    color: '#f4f3f0',
    enableZoom: true,
    hoverColor: '#c9dfaf',
    hoverOpacity: null,
    normalizeFunction: 'linear',
    scaleColors: ['#b6d6ff', '#005ace'],
    selectedColor: '#c9dfaf',
    selectedRegion: null,
    showTooltip: true,
    onRegionClick: function(element, code, region)
    {
        var message = 'You clicked "'
            + region
            + '" which has the code: '
            + code.toUpperCase();

        alert(message);
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T00:51:46.890

这就是我将如何去做。

首先，首先创建一个检测正在使用的设备类型（Ipad、Iphone、Droid 等）的函数。

```
function testDevice(){
    if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)) {
        return true;
    }else{
        return false;
    }
} 
```

接下来，设置 regionClick 和 regionOver 事件。

```
jQuery('#vmap').vectorMap(
{
    map: 'world_en',
    backgroundColor: '#a5bfdd',
    borderColor: '#818181',
    borderOpacity: 0.25,
    borderWidth: 1,
    color: '#f4f3f0',
    enableZoom: true,
    hoverColor: '#c9dfaf',
    hoverOpacity: null,
    normalizeFunction: 'linear',
    scaleColors: ['#b6d6ff', '#005ace'],
    selectedColor: '#c9dfaf',
    selectedRegion: null,
    showTooltip: true,
    onRegionClick: function(element, code, region)
    {
        if(!testDevice()){ //not mobile device
            var message = 'You clicked "'
            + region
            + '" which has the code: '
            + code.toUpperCase();

            alert(message);
        }
    },
    onRegionOver: function(element, code, region)
    {
        if(testDevice()){ //mobile device
            var message = 'You clicked "'
            + region
            + '" which has the code: '
            + code.toUpperCase();

            alert(message);
        }
    }
}); 
```

演示：

[http://jsfiddle.net/V79hw/5/](http://jsfiddle.net/V79hw/5/)

希望这可以帮助！

# c++ - 尝试在 C++ 中有效地存储重复的子字符串

> ID：13734160
> 
> 赞同：1
> 
> 时间：2012-12-05T23:06:30.800
> 
> 标签：c++, trie

我编写了一个程序来用 C++ 实现一个基本的 Trie，每个节点都有 26 个子指针（用于英文字母），Node 类如下所示：

```
class Node
{
public:
       Node* parent;
       Node* child[26];
       unsigned int number_of_children;
....
} 
```

现在，可能有很多单词，如 {snapple, dapple}, {distract,tract} 等，其中超过 3 个字母匹配。我想存储这些子词的不同条目（例如上面的示例 - apple, tract），并让其他人指向它们（例如 {sn-ptr_to_apple, d-ptr_to_apple}, {dis-ptr_to_tract, at-ptr_to_tract} ）。我相信最好在插入单词时处理这个问题，而不是在插入完成后有一个函数来执行这个。

我需要一些帮助来设计这个，目前我不是在研究执行效率，而是代码/设计应该是紧凑的。目前，我访问一个节点并检查所有非空兄弟姐妹（通过遍历兄弟姐妹的孩子）是否与输入单词匹配，然后存储指针以防匹配 4 个单词（但代码正在获取更长且令人困惑）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:46:15.490

传统的尝试压缩常见的前缀。本质上，您想要压缩常见的后缀。最简单的方法是向后构建您的 trie 条目。

现在，这意味着您必须将字符串倒读到 trie 中。

# macos - cp -u 在mac上是非法的。有哪些替代方案？

> ID：13734162
> 
> 赞同：0
> 
> 时间：2012-12-05T23:06:45.853
> 
> 标签：macos, bash, unix, osx-lion

我有一个 MacbookPro Lion，我试图归档我的文件，如果源比目标更新，我会尝试复制和覆盖。我尝试了以下命令

```
cp -u source destination 
```

但它说， -u 是非法的。我也没有在`man cp`.

你能帮忙吗，在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:12:19.340

您可以使用以下`-nt`条件：

```
[[ source/$file -nt destination/$file ]] && cp source/$file destination/$file 
```

只需对所有文件运行此命令（通过循环或通过`find`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:09:22.147

我已经通过 MacPorts 安装了 GNU Coreutils

```
sudo ports install coreutils findutils 
```

findutils 不是必需的，但[他们建议也安装它](http://www.sgenomics.org/~jtang/blog/posts/Enabling_the_gnu_coreutils_and_findutils_with_macports_on_OSX/)。

我遵循了 Keith Thompson 的想法，（赞！）。它非常有效，“高级”复制命令现在是：

```
/opt/local/libexec/gnubin/cp 
```

它没有手册页，但有一个很长的手册式帮助`--help`选项。

* * *

我还把这个问题复制到了超级用户页面，还有一些有趣的故事……但我不能在这里删除它，抱歉。

# c# - 以反射方式将一个事件直接连接到另一个事件

> ID：13734164
> 
> 赞同：2
> 
> 时间：2012-12-05T23:06:58.253
> 
> 标签：c#, events, reflection

我可以反射性地将一个事件直接连接到 c# 中的另一个事件吗？或者是否有必要编写一种物理方法来引发一个事件，以便您可以反射性地将其连接到另一个事件？

我在想我需要使用 GetRaiseMethod() 所以我不必这样做，但文档说 c# 不会生成 raise 方法。

如果我刚刚问的问题似乎完全偏离了我正在尝试做的事情，那么请帮助我走上正轨。基本上，我只想反思性地查找两个事件，并将一个事件转发给另一个事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:18:54.647

假设你有一些事件

```
class A
{
    public event EventHandler<MyEventArgs> MyEvent;
} 
```

和其他一些事件

```
class B
{
    public event EventHandler<MyEventArgs> MyOtherEvent; 
```

以及引发该事件的方法

```
 protected void OnMyOtherEvent(MyEventArgs e)
    {
        var handler = MyEvent;
        if (handler != null)
            handler(this, e);
    } 
```

那么你可以`MyOtherEvent`在任何时候`MyEvent`加注，如下所示：

```
 public B(A a)
    {
        a.MyEvent += (sender, e) => OnMyOtherEvent(e);
    }
} 
```

请注意，您不能简单地将`MyOtherEvent`代表添加到`MyEvent`事件中，因为`MyOtherEvent`事后可能会添加更多代表。所以你需要一些介于两者之间的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:20:01.197

> 如果我刚刚问的问题似乎完全偏离了我正在尝试做的事情，那么请帮助我走上正轨。基本上，我只想反思性地查找两个事件，并将一个事件转发给另一个事件。

事件不是直接“连接”的东西。您可以使用[EventInfo.AddEventHandler](http://msdn.microsoft.com/en-us/library/system.reflection.eventinfo.addeventhandler.aspx)将委托添加为事件的新事件处理程序。这个委托可以是任何东西，包括引发另一个事件的方法。

您将需要一个可以引发您的事件的方法，以及该方法的适当委托。完成此操作后，您可以将其添加为事件处理程序，这将正确通过。

> 或者是否有必要编写一种物理方法来引发一个事件，以便您可以反射性地将其连接到另一个事件？

是的，这是必需的。你不能仅仅“连接”两个事件——你需要有一些东西（一种方法）来引发第二个事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:03:06.073

这就是我一直在寻找的：

```
public event Action evt

public void RaiseEvent()
{
    var type = GetType();
    var fld = type.GetField("evt", BindingFlags.NonPublic | BindingFlags.Instance);
    var fldValue = (MulticastDelegate)fld.GetValue(this);
    fld.DynamicInvoke();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T14:50:43.947

您可以调用与该事件相关的“On”方法来引发事件。通常已实施并且按预期工作。

这里有一个例子

创建一个空的文本框

```
 TextBox myTextBox = new TextBox();
        myTextBox.TextChanged += new EventHandler(myTextBox_TextChanged);

        void myTextBox_TextChanged(object sender, EventArgs e)
        {
            Console.WriteLine("something");
        } 
```

引发 TextChange 事件

```
 MethodInfo mi = myTextBox.GetType().GetMethod("OnTextChanged", BindingFlags.Instance | BindingFlags.NonPublic);
        try
        {
            mi.Invoke(myTextBox, new object[] { EventArgs.Empty });
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);                
        } 
```

# python - 消费者/生产者“及时”队列

> ID：13734166
> 
> 赞同：2
> 
> 时间：2012-12-05T23:07:11.217
> 
> 标签：python, priority-queue, anti-patterns

我已经实现了一个消费者/生产者优先级队列，其中优先级实际上是一个时间戳，表示何时应该交付项目。它工作得很好，但我想知道是否有人有更好的想法来实现它或对当前实现发表评论。

代码在 Python 中。创建单个线程以按时唤醒等待的消费者。我知道这是在库中创建线程的反模式，但我无法设计另一种方法。

这是代码：

```
import collections
import heapq
import threading
import time

class TimelyQueue(threading.Thread):
    """
    Implements a similar but stripped down interface of Queue which
    delivers items on time only.
    """

    class Locker:
        def __init__(self, lock):
            self.l = lock
        def __enter__(self):
            self.l.acquire()
            return self.l
        def __exit__(self, type, value, traceback):
            self.l.release()

    # Optimization to avoid wasting CPU cycles when something
    # is about to happen in less than 5 ms.
    _RESOLUTION = 0.005

    def __init__(self):
        threading.Thread.__init__(self)
        self.daemon = True
        self.queue = []
        self.triggered = collections.deque()
        self.putcond = threading.Condition()
        self.getcond = threading.Condition()
        # Optimization to avoid waking the thread uselessly.
        self.putwaketime = 0

    def put(self, when, item):
        with self.Locker(self.putcond):
            heapq.heappush(self.queue, (when, item))
            if when < self.putwaketime or self.putwaketime == 0:
                self.putcond.notify()

    def get(self, timeout=None):
        with self.Locker(self.getcond):
            if len(self.triggered) > 0:
                when, item = self.triggered.popleft()
                return item
                self.getcond.wait(timeout)
            try:
                when, item = self.triggered.popleft()
            except IndexError:
                return None
            return item

    def qsize(self):
        with self.Locker(self.putcond):
            return len(self.queue)

    def run(self):
        with self.Locker(self.putcond):
            maxwait = None
            while True:
                curtime = time.time()
                try:
                    when, item = self.queue[0]
                    maxwait = when - curtime
                    self.putwaketime = when
                except IndexError:
                    maxwait = None
                    self.putwaketime = 0
                self.putcond.wait(maxwait)

                curtime = time.time()
                while True:
                    # Don't dequeue now, we are not sure to use it yet.
                    try:
                        when, item = self.queue[0]
                    except IndexError:
                        break
                    if when > curtime + self._RESOLUTION:
                        break

                    self.triggered.append(heapq.heappop(self.queue))
                if len(self.triggered) > 0:
                    with self.Locker(self.getcond):
                        self.getcond.notify()

if __name__ == "__main__":
    q = TimelyQueue()
    q.start()

    N = 50000
    t0 = time.time()
    for i in range(N):
        q.put(time.time() + 2, i)
    dt = time.time() - t0
    print "put done in %.3fs (%.2f put/sec)" % (dt, N / dt)
    t0 = time.time()
    i = 0
    while i < N:
        a = q.get(3)
        if i == 0:
            dt = time.time() - t0
            print "start get after %.3fs" % dt
            t0 = time.time()
        i += 1
    dt = time.time() - t0
    print "get done in %.3fs (%.2f get/sec)" % (dt, N / dt) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:25:59.990

这里唯一真正需要后台线程的就是一个计时器，它可以在服务员用完时踢出服务员，对吧？

首先，您可以使用[`threading.Timer`](http://docs.python.org/library/threading.html#timer-objects)而不是显式后台线程来实现它。但是，虽然这可能更简单，但它并不能真正解决您在用户背后创建线程的问题，无论他们是否愿意。此外，使用`threading.Timer`，您实际上每次重新启动计时器时都会关闭一个新线程，这可能是一个性能问题。（您一次只有一个，但启动和停止线程仍然不是免费的。）

如果您查看 PyPI 模块、ActiveState 配方和各种框架，有许多实现可以让您在单个后台线程上运行多个计时器。那会解决你的问题。

但这仍然不是一个完美的解决方案。例如，假设我的应用程序需要 20 个`TimelyQueue`对象——或者`TimelyQueue`再加上 19 个其他都需要计时器的东西。我仍然会得到 20 个线程。或者，假设我正在构建一个套接字服务器或一个 GUI 应用程序（您的两个最明显的用例`TimelyQueue`；我可以在我的事件循环之上实现一个计时器（或者，很可能只使用框架），那么为什么我需要一个线程呢？

解决这个问题的方法是提供一个钩子来提供任何计时器工厂：

```
def __init__(self, timerfactory = threading.Timer):
    self.timerfactory = timerfactory
    ... 
```

现在，当您需要调整计时器时：

```
if when < self.waketime:
    self.timer.cancel()
    self.timer = self.timerfactory(when - now(), self.timercallback)
    self.waketime = when 
```

对于快速和肮脏的用例，开箱即用就足够了。但是，如果我正在使用[`twisted`](http://twistedmatrix.com/documents/11.0.0/core/howto/time.html)，我可以只使用`TimelyQueue(twisted.reactor.callLater)`，现在队列的计时器将通过`twisted`事件循环。或者，如果我有一个在其他地方使用的多定时器单线程实现`TimelyQueue(multiTimer.add)`，那么现在队列的定时器与我的所有其他定时器在同一个线程上运行。

如果您愿意，您可以提供比 更好的默认值`threading.Timer`，但实际上，我认为大多数需要比 更好`threading.Timer`的东西的人能够为他们的特定应用程序提供比您提供的任何东西更好的东西。

当然，并非每个计时器实现都具有与`threading.Timer`-- 尽管您会惊讶于其中有多少实现相同的 API。但是编写适配器并不难，如果您有一个要使用的计时器，`TimelyQueue`但它的接口错误。例如，如果我正在构建一个 PyQt4/PySide 应用程序，[`QTimer`](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qtimer.html)没有`cancel`方法，并且需要毫秒而不是秒，所以我必须做这样的事情：

```
class AdaptedQTimer(object):
    def __init__(self, timeout, callback):
        self.timer = QTimer.singleShot(timeout * 1000, callback)
    def cancel(self):
        self.timer.stop()

q = TimelyQueue(AdaptedQTimer) 
```

或者，如果我想`QObject`更直接地将队列集成到一个队列中，我可以结束`QObject.startTimer()`并让我的`timerEvent(self)`方法调用回调。

一旦你考虑适配器，最后一个想法。我认为这不值得，但可能值得考虑。如果您的计时器采用时间戳而不是 timedelta，并且有一个`adjust`方法而不是/而不是 a `cancel`，并且拥有自己的`waketime`，那么您的`TimelyQueue`实现可能会更简单，并且可能更有效。在`put`中，你有这样的东西：

```
if self.timer is None:
    self.timer = self.timerfactory(when)
elif when < self.timer.waketime:
    self.timer.adjust(when) 
```

当然大多数定时器不提供这个接口。但是，如果有人拥有或愿意制作一个，他们可以获得好处。对于其他所有人，您可以提供一个简单的适配器，将`threading.Timer`-style 计时器转换为您需要的类型，例如：

```
def timerFactoryAdapter(threadingStyleTimerFactory):
    class TimerFactory(object):
        def __init__(self, timestamp, callback):
            self.timer = threadingStyleTimerFactory(timestamp - now(), callback)
            self.callback = callback
        def cancel(self):
            return self.timer.cancel()
        def adjust(self, timestamp):
            self.timer.cancel()
            self.timer = threadingStyleTimerFactory(timestamp - now(), self.callback) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:26:37.370

作为记录，我已经使用计时器工厂实现了您提出的建议。我使用上面的版本和使用`threading.Timer`类的新版本运行了一个小基准测试：

1.  首次实施

    *   使用默认分辨率（5 ms，即 5 ms 窗口内的所有内容一起触发），它可以达到大约 88k `put()`/sec 和 69k `get()`/sec。

    *   分辨率设置为 0 毫秒（无优化）时，它达到了大约 88k `put()`/sec 和 55k `get()`/sec。

2.  第二次实施

    *   使用默认分辨率（5 ms），它可以达到大约 88k `put()`/sec 和 65k `get()`/sec。

    *   分辨率设置为 0 ms 时，它可以达到大约 88k `put()`/sec 和 62k `get()`/sec。

我承认我很惊讶第二个实现在没有分辨率优化的情况下更快。现在调查为时已晚。

```
import collections
import heapq
import threading
import time

class TimelyQueue:
    """
    Implements a similar but stripped down interface of Queue which
    delivers items on time only.
    """

    def __init__(self, resolution=5, timerfactory=threading.Timer):
        """
        `resolution' is an optimization to avoid wasting CPU cycles when
        something is about to happen in less than X ms.
        """
        self.resolution = float(resolution) / 1000
        self.timerfactory = timerfactory
        self.queue = []
        self.triggered = collections.deque()
        self.putcond = threading.Condition()
        self.getcond = threading.Condition()
        # Optimization to avoid waking the thread uselessly.
        self.putwaketime = 0
        self.timer = None
        self.terminating = False

    def __arm(self):
        """
        Arm the next timer; putcond must be acquired!
        """
        curtime = time.time()
        when, item = self.queue[0]
        interval = when - curtime
        self.putwaketime = when
        self.timer = self.timerfactory(interval, self.__fire)
        self.timer.start()

    def __fire(self):
        with self.putcond:
            curtime = time.time()
            debug = 0
            while True:
                # Don't dequeue now, we are not sure to use it yet.
                try:
                    when, item = self.queue[0]
                except IndexError:
                    break
                if when > curtime + self.resolution:
                    break

                debug += 1
                self.triggered.append(heapq.heappop(self.queue))
            if len(self.triggered) > 0:
                with self.getcond:
                    self.getcond.notify(len(self.triggered))
            if self.terminating:
                return
            if len(self.queue) > 0:
                self.__arm()

    def put(self, when, item):
        """
        `when' is a Unix time from Epoch.
        """
        with self.putcond:
            heapq.heappush(self.queue, (when, item))
            if when >= self.putwaketime and self.putwaketime != 0:
                return
            # Arm next timer.
            if self.timer is not None:
                self.timer.cancel()
            self.__arm()

    def get(self, timeout=None):
        """
        Timely return the next object on the queue.
        """
        with self.getcond:
            if len(self.triggered) > 0:
                when, item = self.triggered.popleft()
                return item
            self.getcond.wait(timeout)
            try:
                when, item = self.triggered.popleft()
            except IndexError:
                return None
            return item

    def qsize(self):
        """
        Self explanatory.
        """
        with self.putcond:
            return len(self.queue)

    def terminate(self):
        """
        Request the embedded thread to terminate.
        """
        with self.putcond:
            self.terminating = True
            if self.timer is not None:
                self.timer.cancel()
            self.putcond.notifyAll()

if __name__ == "__main__":
    q = TimelyQueue(0)
    N = 100000
    t0 = time.time()
    for i in range(N):
        q.put(time.time() + 2, i)
    dt = time.time() - t0
    print "put done in %.3fs (%.2f put/sec)" % (dt, N / dt)
    t0 = time.time()
    i = 0
    while i < N:
        a = q.get(3)
        if i == 0:
            dt = time.time() - t0
            print "start get after %.3fs" % dt
            t0 = time.time()
        i += 1
    dt = time.time() - t0
    print "get done in %.3fs (%.2f get/sec)" % (dt, N / dt)
    q.terminate()
    # Give change to the thread to exit properly, otherwise we may get
    # a stray interpreter exception.
    time.sleep(0.1) 
```

# shader - 有没有办法在游戏启动时查看着色器代码运行？

> ID：13734177
> 
> 赞同：0
> 
> 时间：2012-12-05T23:08:01.187
> 
> 标签：shader, gpu, reverse-engineering

最近我读了一些关于着色器的文章。有没有办法让游戏中使用着色器代码，就像你可以让程序看到它的汇编代码一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:57:07.993

理论上这是可以做到的，但在实践中可能会非常复杂。如何执行此操作取决于着色器在程序中的存储方式，以及它的目标 API 和版本（它是 DirectX 着色器、OpenGL 着色器、老式顶点或片段程序等）。请记住，我已经有一段时间没有使用着色器了，所以这些信息可能有点过时了。

如果幸运的话，着色器只是作为字符串存储在二进制文件中的某个地方。为简单起见，业余爱好者和教程游戏经常这样做。如果是这种情况，您可能可以使用十六进制编辑器或类似工具提取着色器代码。对于商业游戏，由于很多原因，您不太可能在二进制文件中找到不受干扰的着色器源字符串。

或者，着色器可能存储在运行时链接的 DLL 中。

在可能有数千种不同着色器的商业游戏中，它们很可能存储在某处的资源档案中。如果它们是纯文本的，并且您有阅读档案的工具，那么您就是黄金。

我相信大多数着色器 API 都支持存储已编译的着色器，而不必将源代码传递给驱动程序。在这种情况下，您更有可能在资源文件中找到已编译的着色器。这些可能会在运行时加载到内存中，您可以在某个进程的地址空间中找到它们。如果您知道位置，您可以使用内存侦听工具将编译后的着色器代码复制出来。不过，祝你找到地址好运。

一旦你有了编译好的二进制文件，你就需要以某种方式反汇编它。我相信 DirectX 已经在它的 API 中内置了反汇编，而 OpenGL 现在可能也这样做了。

我在 Google 搜索中发现的一个有趣的可能性是[nvemulate](http://www.google.com/url?sa=t&rct=j&q=nvemulate&source=web&cd=1&cad=rja&ved=0CC0QFjAA&url=https://developer.nvidia.com/nvemulate&ei=Mt6_UJyOKIW-8ATjwIGYDA&usg=AFQjCNF8jan0RsmNclwOgsld0mN6Wv782w)，它显然允许您通过模拟显卡来输出着色器。我从未使用过它，它可能仅适用于着色器功能的子集，并且对于最近远程制作的任何游戏的速度都非常慢。我也不确定它如何与您的显卡交互。

# ios - 确定是否在 `touch` 回调线程上，ios

> ID：13734180
> 
> 赞同：1
> 
> 时间：2012-12-05T23:08:17.317
> 
> 标签：ios, multithreading, events, touch

我正在编写一些 iOS 代码，我注意到在“touchevent”回调中写入顶点数组使用的内存时偶尔会出现错误（内存访问冲突）。

我相信触摸事件来自一个单独的线程，因此，如果触摸事件导致顶点数组发生更改，我将需要**排队一条消息**，该消息将由主线程（完成所有渲染）获取对顶点数组进行所需的更改。

根除对写入图形内存的函数的所有调用应该相当容易。但是，为了安全起见，我想在某些子例程中检查我在哪个线程上（主线程与否）（因此该错误不会再次潜入）。

iOS中有没有办法以**编程方式检查我在哪个线程**（主线程与否）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:41:04.920

如果您是否在主线程上，以下代码段将记录。

```
NSLog(@"[%@ %@] Is Main Thread? %@",NSStringFromClass([self class]), NSStringFromSelector(_cmd),[NSThread isMainThread]?@"YES":@"NO"); 
```

用这段代码。

```
[NSThread isMainThread] 
```

回答你的问题

# redhat - 在 red hat 6.0 上的单个配置文件中包含多个 yum 存储库

> ID：13734181
> 
> 赞同：0
> 
> 时间：2012-12-05T23:08:17.053
> 
> 标签：redhat

如何在同时启用的单个 repos 文件中设置多个 yum 存储库。

例如，这就是我所拥有的。这可能吗？如果是，它将如何处理文件？如果这是不可能的，我怎么能同时拥有多个存储库？我需要单独的 .repo 文件吗？

```
name=core-0
baseurl=http://your.url:80/cobbler/ks_mirror/installs
enabled=1
gpgcheck=1

[updates]
name=Redhat-x86_64-UPDATES
baseurl=http://your.url:80/cobbler/repo_mirror/updates
enabled=1
gpgcheck=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:58:38.270

从技术上讲，yum 存储库是从*/etc/yum.conf*加载的，并且在大多数情况下它只包含*/etc/yum.repos.d的存储库目录。*您可以将任意数量的存储库放在一个文件中，只要它被包含（例如*/etc/yum.conf*或*/etc/yum.repos.d*）。

您的第一个存储库似乎缺少“名称”（例如您的第二个存储库被称为更新）。除此之外，没有什么技术可以阻止你做你想做的事。它基本上会将*/etc/yum.repos.d中的文件连接在一起，并使用**/etc/yum.conf*的内容进行解释。

# java - 如何使用 maven 仅导出 JUNIT 文件？

> ID：13734182
> 
> 赞同：0
> 
> 时间：2012-12-05T23:08:20.083
> 
> 标签：java, maven, junit

我想通过运行应用程序的所有 junit 测试在测试服务器上测试已经编译的 jar 文件（我们构建的 RPM 的一部分）。原始应用程序 jar 不包含 junit 测试，因此我只想将 junit 测试导出*到*他们自己的 jar 文件中，并通过将应用程序和 junit jar 文件都传递给 testrunner 来运行测试。

不幸的是，Junit 测试使用了一些从我的 maven pom 中列出的 jar 文件导入的帮助类。当我尝试使用常规导出 -> jar 文件方法通过 eclipse 导出我的 junit jar 文件时，我得到了 junit 测试；但不是测试所依赖的额外 Maven 资源。我对 maven 不太熟悉，但我知道我可以使用 maven-assembly-plugin 插件导出整个应用程序。但是，我不知道如何只导出 junit 测试（和相关资源）而不导出所有内容。显然，为了确保正确测试应用程序 jar，我想确保我的 junit jar 不包含任何已包含在我的应用程序 jar 中的资源。

任何人都可以帮助我只导出 src/test 文件夹中的东西及其资源所需的语法吗？将来我们可能会为许多不同的 RPM 执行此过程，理想情况下，我正在寻找一种可以由部署团队在任何未来 RPM 上完成的方法，但部署人员的 Java/Maven 专业知识可能比我自己还要少。所以理想情况下，我正在寻找最容易教授/可重复的方法。不确定如何制作这样的“白痴证明”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:18:51.260

我对你想要实际做的事情有点困惑，但无论如何它都在这里。

您可以[使用 jar 插件](http://maven.apache.org/plugins/maven-jar-plugin/test-jar-mojo.html)作为第一个选项创建一个测试 jar。

第二种选择是只拥有一个包含测试的单独模块并运行它的测试，并可能在那里创建一个测试 jar。

然而，我的真正想法是为什么不运行已经进行编译和测试执行的正常构建。你实际上还需要什么？

更新：在您澄清之后，我建议建立一个包含 junit 测试作为源的 maven 项目。如果您解压 rpm，将 jar 放入 maven 存储库并声明对它的依赖项，您可以使用 jar 运行构建，并且测试将针对类路径上的任何内容（包括 rpm 中的 jar）执行...

# c - 位运算，保存位，8位后扩展

> ID：13734184
> 
> 赞同：0
> 
> 时间：2012-12-05T23:08:25.337
> 
> 标签：c, bit-manipulation

我想从底部到顶部遍历二叉树。

然后我想将这个遍历（=方式）的位序列保存在一个字符中。

这种行为应该是动态的，所以如果我有一个超过 8 位的位序列，则应该动态扩展 char，例如 2 个字节等等....

例如，如果位序列是 1001010，我希望将完全相同的位序列存储在 char 中。

我知道我应该使用位移运算符 << >> 但我无法弄清楚正确的方法。

在我在 char 中写了 8 位之后，我遇到了一个问题。

我附上了一些示例代码，希望有人可以阐明。

谢谢

```
char* bits = malloc(sizeof(char));
char* temp_bits = NULL;

some loop
{
  if (cnt_bit > 7)
  {
    temp_bits = realloc(bits, sizeof(char)*2);
    free(bits);
    bits = temp_bits;
  }
  *bits = *bits << 1;
  *bits = *bits | 0;
  cnt_bit++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:17:45.890

你不能从一个内存值转移到下一个！如果您想这样做，您可以尝试使用通常为 64 位的“long long int”类型，但我认为您不能比移位更进一步，除非您实现自己的移位操作，该操作适用于通用大批。

我认为每级使用一个字节会更快。

# php - 将二维数组从 JavaScript 发送到 php，反之亦然

> ID：13734188
> 
> 赞同：0
> 
> 时间：2012-12-05T23:08:49.487
> 
> 标签：php, javascript, json

我使用此代码发送整数的一维数组，但如何使其发送和接收由整数和字符串组合形成的二维数组，例如 [此处的数字] [“此处的文本”] 但 url 有一个限制，因此我可以不要做一个大数组

```
//Send data to php
                var queryString ="?";
                            for(var t=0;t<alldays.length;t++)
                                {   
                                    if(t==alldays.length-1)
                                    queryString+="arr[]="+alldays[t];
                                    else
                                    queryString+="arr[]="+alldays[t]+"&";
                                }
                ajaxRequest.open("POST", "forbidden.php" + queryString, true);
                ajaxRequest.send(null); 

            }

// Create a function that will receive data sent from the server(sended as echo json_encode($array))
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){

        var myArray = ajaxRequest.responseText.replace("[","").replace("]","").replace(/"/g,"").split(",");
        for(var i=0; i<myArray.length; i++) { alldays[i] = parseInt(myArray[i]); } 

        }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:18:00.107

不要将请求作为查询字符串包含在 URL 中，而是将其作为 POST 的正文发送：

```
var queryString ="";
for(var t=0;t<alldays.length;t++)
{
    if(t==alldays.length-1)
        queryString+="arr[]="+alldays[t];
    else
        queryString+="arr[]="+alldays[t]+"&";
}
ajaxRequest.open("POST", "forbidden.php", true);
ajaxRequest.send(queryString); 
```

如果它作为 POST 正文发送，则对查询长度没有相同的限制。

但是，您所有的 POST 变量都是命名的`"arr[]"`，这会导致问题。我建议改用以下编码方案：

```
var queryString = "n=" + alldays.length;
for (var t=0; t<alldays.length; t++)
{
    queryString += "&arr_" + t + "=" + alldays[t];
}
ajaxRequest.open("POST", "forbidden.php", true);
ajaxRequest.send(queryString); 
```

然后在服务器上，您可以检索数组元素的数量，`$_POST["n"]`然后处理`$_POST["arr_" + t]`每个`t`从 0 到`n-1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:19:00.010

您确实使用了`POST`请求 - 所以不要`GET`在查询字符串的参数中发送数组！

```
var queryString =""; // no question mark
// construct rest of query string here
ajaxRequest.open("POST", "forbidden.php", true);
ajaxRequest.send(queryString); 
```

此外，使用 JSON 作为响应。PHP 端: [`json_encode`](http://php.net/manual/en/function.json-encode.php), JavaScript 端:[`JSON.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)

# assembly - 是否有 x87 FILD 和 SSE CVTSI2SD 指令的无符号等效项？

> ID：13734191
> 
> 赞同：6
> 
> 时间：2012-12-05T23:09:00.223
> 
> 标签：assembly, floating-point, sse, floating-point-conversion, x87

我想在 GHC Haskell 编译器中实现相当于 C 的`uint`-to -cast。`double`我们已经实现了`int`-to- `double`using `FILD`or `CVTSI2SD`。这些操作是否有无符号版本，或者我应该`uint`在转换之前将最高位归零（从而失去范围）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-04T14:22:37.770

正如有人所说，“好艺术家抄袭，伟大艺术家偷窃”。所以我们可以看看其他编译器作者是如何解决这个问题的。我使用了一个简单的片段：

```
volatile unsigned int x;
int main()
{
  volatile double  y = x;
  return y;
} 
```

（添加挥发物以确保编译器不会优化转换）

结果（跳过了不相关的说明）：

# Visual C++ 2010 cl /Ox (x86)

```
 __real@41f0000000000000 DQ 041f0000000000000r ; 4.29497e+009

  mov   eax, DWORD PTR ?x@@3IC          ; x
  fild  DWORD PTR ?x@@3IC           ; x
  test  eax, eax
  jns   SHORT $LN4@main
  fadd  QWORD PTR __real@41f0000000000000
$LN4@main:
  fstp  QWORD PTR _y$[esp+8] 
```

所以基本上编译器会添加一个调整值，以防符号位被设置。

# Visual C++ 2010 cl /Ox (x64)

```
 mov   eax, DWORD PTR ?x@@3IC          ; x
  pxor  xmm0, xmm0
  cvtsi2sd xmm0, rax
  movsdx    QWORD PTR y$[rsp], xmm0 
```

无需在此处进行调整，因为编译器知道`rax`将清除符号位。

# Visual C++ 2012 cl /Ox

```
 __xmm@41f00000000000000000000000000000 DB 00H, 00H, 00H, 00H, 00H, 00H, 00H
  DB 00H, 00H, 00H, 00H, 00H, 00H, 00H, 0f0H, 'A'

  mov   eax, DWORD PTR ?x@@3IC          ; x
  movd  xmm0, eax
  cvtdq2pd xmm0, xmm0
  shr   eax, 31                 ; 0000001fH
  addsd xmm0, QWORD PTR __xmm@41f00000000000000000000000000000[eax*8]
  movsd QWORD PTR _y$[esp+8], xmm0 
```

这使用无分支代码添加 0 或根据符号位是否被清除或设置进行魔术调整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T00:39:39.130

有一个更好的方法

```
__m128d _mm_cvtsu32_sd(__m128i n) {
    const __m128i magic_mask = _mm_set_epi32(0, 0, 0x43300000, 0);
    const __m128d magic_bias = _mm_set_sd(4503599627370496.0);
    return _mm_sub_sd(_mm_castsi128_pd(_mm_or_si128(n, magic_mask)), magic_bias);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T10:40:58.040

您可以利用 IEEE 双精度格式的某些属性并将无符号值解释为尾数的一部分，同时添加一些精心设计的指数。

```
Bits 63 62-52     51-0
     S  Exp       Mantissa
     0  1075      20 bits 0, followed by your unsigned int 
```

1075 来自双精度数的 IEEE 指数偏差 (1023) 和尾数的 52 位“移位”量。请注意，尾数前面有一个隐含的“1”，需要稍后减去。

所以：

```
double uint32_to_double(uint32_t x) {
    uint64_t xx = x;
    xx += 1075ULL << 52;         // add the exponent
    double d = *(double*)&xx;    // or use a union to convert
    return d - (1ULL << 52);     // 2 ^^ 52
} 
```

如果您的平台上没有本机 64 位，则使用 SSE 进行整数步长的版本可能是有益的，但这当然取决于。

在我的平台上，它编译为

```
0000000000000000 <uint32_to_double>:
   0:   48 b8 00 00 00 00 00    movabs $0x4330000000000000,%rax
   7:   00 30 43 
   a:   89 ff                   mov    %edi,%edi
   c:   48 01 f8                add    %rdi,%rax
   f:   c4 e1 f9 6e c0          vmovq  %rax,%xmm0
  14:   c5 fb 5c 05 00 00 00    vsubsd 0x0(%rip),%xmm0,%xmm0 
  1b:   00 
  1c:   c3                      retq 
```

看起来不错。这`0x0(%rip)`是神奇的双常数，如果内联一些指令，如高位 32 位归零和常数重载将消失。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-04T12:19:40.337

> 我们已经使用 FILD 实现了 int-to-double ...
> 这些操作是否有无符号版本

如果您想要使用 x87 FILD 操作码，只需将 uint64 转换为 uint63（div 2），然后将其乘以 2，但已经是两倍，因此 x87 uint64 到双倍的转换需要在开销中执行一次 FMUL。

示例：0xFFFFFFFFFFFFFFFFU -> +1.8446744073709551e+0019

它无法以严格的表单规则发布代码示例。我稍后会尝试。

```
 //inline
    double    u64_to_d(unsigned _int64 v){

    //volatile double   res;
    volatile unsigned int tmp=2;
    _asm{
    fild  dword ptr tmp
    //v>>=1;
    shr   dword ptr v+4, 1
    rcr   dword ptr v, 1
    fild  qword ptr v

    //save lsb
    //mov   byte ptr tmp, 0  
    //rcl   byte ptr tmp, 1

    //res=tmp+res*2;
    fmulp st(1),st
    //fild  dword ptr tmp
    //faddp st(1),st 

    //fstp  qword ptr res
    }

    //return res;
    //fld  qword ptr res
}
```

VC 产生 x86 输出

```
 //inline
        double    u64_to_d(unsigned _int64 v){
    55                   push        ebp  
    8B EC                mov         ebp,esp  
    81 EC 04 00 00 00    sub         esp,04h  

        //volatile double   res;
        volatile unsigned int tmp=2;
    C7 45 FC 02 00 00 00 mov         dword ptr [tmp], 2  
        _asm{
        fild  dword ptr tmp
    DB 45 FC             fild        dword ptr [tmp]  
        //v>>=1;
        shr   dword ptr v+4, 1
    D1 6D 0C             shr         dword ptr [ebp+0Ch],1  
        rcr   dword ptr v, 1
    D1 5D 08             rcr         dword ptr [v],1  
        fild  qword ptr v
    DF 6D 08             fild        qword ptr [v]  

        //save lsb
    //    mov   byte ptr [tmp], 0  
    //C6 45 FC 00        mov         byte ptr [tmp], 0
    //    rcl   byte ptr tmp, 1
    //D0 55 FC           rcl         byte ptr [tmp],1  

        //res=tmp+res*2;
        fmulp st(1),st
    DE C9                fmulp       st(1),st  
    //    fild  dword ptr tmp
    //DB 45 FC           fild        dword ptr [tmp]  
    //    faddp st(1),st 
    //DE C1              faddp       st(1),st  

        //fstp  qword ptr res
        //fstp        qword ptr [res]  
    }

        //return res;
        //fld         qword ptr [res]  

    8B E5                mov         esp,ebp  
    5D                   pop         ebp  
    C3                   ret  
}
```

我发布了（可能我手动删除了文本文件中所有不正确的 ascii 字符）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T23:18:16.223

如果我对您的理解正确，您应该能够将您的 32 位 uint 移动到堆栈上的临时区域，将下一个 dword 清零，然后使用 fild qword ptr 将现在的 64 位无符号整数加载为双精度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-18T08:38:45.217

在 AVX-512 之前，x86 没有无符号 <-> FP 指令。
（对于 AVX-512F，请参阅[`vcvtusi2sd`](https://www.felixcloutier.com/x86/vcvtusi2sd)和`vcvtsd2usi`，以及它们各自的`ss`版本。还打包了涉及 64 位整数的 SIMD 转换，这也是新的；在 AVX-512F 之前，打包的转换转换可以去往/来自 int32_t。）

* * *

**在 64 位代码中，无符号 32 位 -> FP 很简单：只需将 u32 零扩展为 i64 并使用有符号 64 位转换。** 每个 uint32_t 值都可以表示为非负 int64_t。

对于反向，转换 FP -> i64 并截断为 u32，如果您对超出范围 FP 输入的情况感到满意。（包括 i64 超出范围时的 0，否则采用 2 的补码 i64 位模式的 low32。）

* * *

u32 -> FP：请参阅@Igor Skochinsky 的编译器输出答案。x86-64 GCC 和 Clang 使用与 x64 MSVC 相同的技巧。关键部分是将其零扩展为 64 位并进行转换。请注意，[写入 32 位寄存器会隐式零扩展为 64 位](https://stackoverflow.com/questions/11177137/why-do-x86-64-instructions-on-32-bit-registers-zero-the-upper-part-of-the-full-6)`mov r32, r32`，因此如果您知道该值是使用 32 位操作写入的，则可能不需要。（或者如果您必须自己从内存中加载它）。

```
; assuming your input starts in EDI, and that RDI might have garbage in the high half
; like a 32-bit function arg.

    mov     eax, edi              ; mov-elimination wouldn't work with  edi,edi
    vcvtsi2sd xmm0, xmm7, rax     ; where XMM7 is some cold register to avoid a false dep 
```

`mov edi,edi`除了（如果您需要单独的零扩展指令）之外的任何选择都是由 mov-elimination 不工作在相同，相同的寄存器情况下推动的：请参阅[x86 的 MOV 真的可以“免费”吗？为什么我根本无法重现这个？](https://stackoverflow.com/questions/44169342/can-x86s-mov-really-be-free-why-cant-i-reproduce-this-at-all).

如果您没有 AVX，或者不知道要使用的不是最近编写的寄存器，您可能希望`pxor xmm0, xmm0`在设计不佳的`cvtsi2sd`合并到它之前使用。GCC 虔诚地打破了错误的 dep，clang 非常随意，除非循环携带的 dep 链将存在于单个函数中。因此，它可能会因单独的非内联函数之间的交互而减慢，这些函数可能碰巧在循环中被调用。请参阅[为什么添加 xorps 指令会使此函数使用 cvtsi2ss 并增加约 5 倍的速度？](https://stackoverflow.com/questions/60688348/why-does-adding-an-xorps-instruction-make-this-function-using-cvtsi2ss-and-addss)例如，这会叮叮当当（但 GCC 很好。）

该答案还链接了一些 GCC 错过优化错误报告，我在其中写了更多关于重用“冷”寄存器以避免转换中的错误依赖关系以及类似`[v]sqrtsd`1 输入操作的想法的详细信息。

* * *

### 32 位模式：

不同的编译器有不同的策略。 `gcc -O3 -m32 -mfpmath=sse -msseregparm`是查看 GCC 功能的好方法，使其返回 XMM0 而不是 ST0，因此它仅在实际上更方便时才使用 x87。（例如，对于 64 位 -> FP 使用`fild`）。

**[我使用 gcc 和 clang在 Godbolt 上](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(filename:%271%27,fontScale:14,fontUsePx:%270%27,j:1,lang:___c,selection:(endColumn:1,endLineNumber:9,positionColumn:1,positionLineNumber:9,selectionStartColumn:1,selectionStartLineNumber:9,startColumn:1,startLineNumber:9),source:%27//+for+32-bit+mode+SSE2+codegen%0A//+use+gcc+-m32+-mfpmath%3Dsse+-msseregparm+-msse2%0A//+to+override+the+calling+convention+and+GCC!%27s+fpmath%3D387+default%0A//+-mregparm%3D3+would+also+take+integer+args+in+eax,edx,+ecx%0A%0Adouble+u32_to_d(unsigned+x)%7B%0A++++return+x%3B%0A%7D%0A//+float+*can!%27t*+exactly+represet+every+uint32_t,+unlike+double%0Afloat+u32_to_f(unsigned+x)%7B%0A++++return+x%3B%0A%7D%0A%0A%0Adouble+u64_to_d(unsigned+long+long+x)%7B%0A++++return+x%3B%0A%7D%0A%0Adouble+i64_to_d(long+long+x)%7B%0A++++return+x%3B%0A%7D%0A%27),l:%275%27,n:%270%27,o:%27C+source+%231%27,t:%270%27)),k:30.654761904761912,l:%274%27,m:100,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((h:compiler,i:(compiler:cg112,filters:(b:%270%27,binary:%271%27,commentOnly:%270%27,demangle:%270%27,directives:%270%27,execute:%271%27,intel:%270%27,libraryCode:%271%27,trim:%271%27),flagsViewOpen:%271%27,fontScale:14,fontUsePx:%270%27,j:1,lang:___c,libs:!(),options:%27-O3+-m32+-mfpmath%3Dsse+-msseregparm%27,selection:(endColumn:1,endLineNumber:1,positionColumn:1,positionLineNumber:1,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:1,tree:%271%27),l:%275%27,n:%270%27,o:%27x86-64+gcc+11.2+(C,+Editor+%231,+Compiler+%231)%27,t:%270%27)),header:(),k:36.011904761904766,l:%274%27,m:100,n:%270%27,o:%27%27,s:0,t:%270%27),(g:!((h:compiler,i:(compiler:cclang1201,filters:(b:%270%27,binary:%271%27,commentOnly:%270%27,demangle:%270%27,directives:%270%27,execute:%271%27,intel:%270%27,libraryCode:%271%27,trim:%271%27),flagsViewOpen:%271%27,fontScale:14,fontUsePx:%270%27,j:2,lang:___c,libs:!(),options:%27-O3+-m32+-msse2%27,selection:(endColumn:1,endLineNumber:1,positionColumn:1,positionLineNumber:1,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:1,tree:%271%27),l:%275%27,n:%270%27,o:%27x86-64+clang+12.0.1+(C,+Editor+%231,+Compiler+%232)%27,t:%270%27)),k:33.33333333333333,l:%274%27,n:%270%27,o:%27%27,s:0,t:%270%27)),l:%272%27,n:%270%27,o:%27%27,t:%270%27)),version:4)**放置了一些 u32 和 u64 -> float 或 double 测试功能，但这个答案主要是为了回答问题的 x86-64 部分，其他答案没有很好地涵盖，而不是过时的 32 位代码生成器。所以我不打算在这里复制代码和汇编并剖析它。

我会提到它`double`可以精确地表示 every `u32`，这允许一个简单的`(double)(int)(u32 - 2^31) + double(2^31)`技巧来进行有符号转换的范围移位。但是`u32`->`float`并不是那么容易。

# python - flask - 如何解决 app.route / app.add_view_rule 不适用于闭包的限制？

> ID：13734197
> 
> 赞同：3
> 
> 时间：2012-12-05T23:09:24.070
> 
> 标签：python, flask

显然，Flask 的`app.route`/`app.add_url_rule`不适用于闭包。例如，创建一个基本的应用程序，

```
for name in ('/hi', '/bye'):
    app.add_url_rule(name, view_func=lambda: name) 
```

并查询它，

```
dev:~/pg/yelp-main> curl localhost:9113/hi
/bye 
```

表明它不适用于闭包。解决此问题的最简单方法是什么？我可以强制 Python 实际创建两个函数吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T23:19:54.970

您实际上并没有在代码中创建一个保留以下*值*的闭包`name`：

```
view_func=lambda: name  # <- points at the *symbol*, which holds the *last* value
# in the case of a loop 
```

要保留*值*，您需要将值传递到闭包中：

```
view_maker = lambda name: (lambda: name)

for name in ('/hi', '/bye'):
    endpoint = name.replace("/", "")
    app.add_url_rule(name, view_func=view_maker(name), endpoint=endpoint) 
```

**编辑：**此外，您需要确保每次注册函数`add_url_rule`时使用指定`endpoint`或确保每个函数具有唯一性`__name__`（因为 Flask 实际上将路由存储在以 为键的字典中`endpoint`，它派生自函数的`__name__`如果没有提供其他）。否则，您的第二个视图将覆盖您的第一个视图。

您*可能*想查看 Flask 的[基于类的视图](http://flask.pocoo.org/docs/api/#class-based-views)- 它们可能更容易构建您正在寻找的动态（尽管闭包和类非常相似 [因为两者都是穷人的替代品]）。

# jquery - Jquery在函数中返回JSON对象

> ID：13734198
> 
> 赞同：1
> 
> 时间：2012-12-05T23:09:24.497
> 
> 标签：jquery

我正在使用 JSON 进行行计数，并在我的 php 文件中得到这样的输出`json_data2.php`：

```
{"limit": [{"rows":"127"}]} 
```

现在我正在使用 Javascript/Jquery 函数调用此文件并尝试取回行 (127)。我假装这样做：

```
function limit(keyword){
        $.getJSON("json_data2.php?l="+keyword,function(data)
        {
            $.each(data.limit,function(data){
                var rows = data.rows;
                return rows;
            });
        });
    } 
```

但是每次我在脚本中调用该函数时，我都会得到“未定义”。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:14:12.767

您的函数 limit(keyword) 不返回任何值。

现有的返回运算符在的回调函数中返回值`$.each`

您必须在限制函数的主体中添加返回运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:15:11.990

那是因为`$.getJSON`是异步的，因此调用`limit()`不会返回任何东西（有用）。

这样做的方法是提供一个回调函数来`limit()`喜欢：

```
limit(keyword, function(rows) {
    // your rows have loaded
    $.each(rows, function() {
        // process each row here
    });
});

function limit(keyword, cb)
{
    $.getJSON('json_data2.php?l=' + encodeURIComponent(keyword), function(data) {
        // invoke the callback function that was passed
        cb(data.limit);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:13:42.723

您需要修复每个语句。添加`this`以引用有问题的数据。

[http://jsfiddle.net/twGQh/](http://jsfiddle.net/twGQh/)

```
limit(keyword, function(rows) {
    // your rows have loaded
});

  function limit(keyword, cb){
            $.getJSON("json_data2.php?l="+keyword,function(data)
            {

                $.each(data.limit,function(){
                    var rows = this.rows;
                    console.log(rows);
                    cb(rows);
                });
            });
        } 
```

# python - 如何在 matplotlib 中的 FigureCanvas 上显示 GTK 小部件

> ID：13734199
> 
> 赞同：2
> 
> 时间：2012-12-05T23:09:28.880
> 
> 标签：python, matplotlib, gtk

我想在 matplotlib 图上显示一个按钮（和其他 GTK 小部件）。但是，它始终显示在 FigureCanvas 下方。

这是一个最小的例子：

```
import gtk
import matplotlib as mpl
from matplotlib.backends.backend_gtkagg import FigureCanvasGTKAgg as FigureCanvas

win=gtk.Window()
fixed=gtk.Fixed()
win.add(fixed)

fig=mpl.figure.Figure()
canvas=FigureCanvas(fig)
canvas.set_size_request(100,100)
fixed.put(canvas,0,0)
button=gtk.Button('test')
fixed.put(button,80,80)
button2=gtk.Button('test2')
fixed.put(button2,0,0)

win.show_all()
gtk.main() 
```

我还尝试使用 更改 GDK 窗口的 z 顺序`button.window.raise_()`，但没有成功。

有任何解决这个问题的方法吗？

**编辑**：
原来`gtk.Button`不会创建新的 GDK 窗口，而是重用其父窗口，而 FigureCanvas 确实创建了一个新窗口。

因此，如果我`button2`从上方放入 a `gtk.EventBox`，则该按钮将显示在画布上方。但是，它有一个丑陋的矩形边框。知道如何删除它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T01:23:01.147

我最近几天遇到了这个问题并得到了很好的解决方案。

在 canvas.set_size_request 方法之后添加以下行。

canvas.set_has_window（假）

原因是默认的 FigureCanvas 对象有自己的窗口，这使得它可以单独绘制。这样它就不会遵循 gtk.Fixed 和它的其他孩子的相同处理顺序。[这](https://developer.gnome.org/gtk3/stable/chap-drawing-model.html "GTK+ 绘图模型")是gtk的绘图模型的参考。

set_has_window 方法强制画布使用与其父窗口相同的窗口，以便画布必须遵循 gtk.Fixed 指定的规则。

# eclipse - 设置 GWT eclipse 的插件

> ID：13734203
> 
> 赞同：1
> 
> 时间：2012-12-05T23:10:24.957
> 
> 标签：eclipse, gwt

我对Java真的很陌生。我想使用 gwt 等来安装 gwt eclipse 的插件。所以我添加了链接[https://dl.google.com/eclipse/plugin/4.2](https://dl.google.com/eclipse/plugin/4.2)来安装所有专用的“新软件”。它工作得很好。但是，当我打开一个项目时，gwt sdk 设置为无效。所以似乎没有导入任何库。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:40:50.177

您可以通过 2 个 eclipse 选项轻松地在外部配置 GWT。

**选项 1** - 便于维护

1）直接从[这里](http://code.google.com/p/google-web-toolkit/downloads/list)下载 GWT 2）在 eclipse goto`Windows -> Preference -> Google -> Web Toolkit -> Add`中（在弹出窗口中配置 GWT 版本、位置和名称）

3) 您可以设置多个 GWT 版本并将其中一个设置为默认值。

![在此处输入图像描述](../Images/91451125afaef2355a3dbc17b1e6f09d.png)

**选项 2**

1) 在您的 ecipe 文件夹中 grep/搜索 gwt-user*.jar ( dropins,plugins,features,p2 !!!! )

2) 配置类路径变量 GWT_HOME。转到**“Windows -> 首选项 -> Java -> 构建路径 -> 类路径变量 -> 新建”**

![在此处输入图像描述](../Images/fecee363123b60815020c5dce8648f4b.png)

**选项 3** - 放弃在线安装

从 zip 文件离线安装。参考[https://developers.google.com/eclipse/docs/install-from-zip](https://developers.google.com/eclipse/docs/install-from-zip)

# sql - 单击 Oracle Application Express 按钮将值插入 2 个表

> ID：13734204
> 
> 赞同：1
> 
> 时间：2012-12-05T23:10:29.497
> 
> 标签：sql, oracle, oracle-apex

所以基本上在我的数据库中，我有一个存储作业应用程序的表。这些应用程序具有用户将能够从下拉菜单更改为例如被邀请参加面试或申请成功的状态。我还有一个表需要存储每个应用程序的状态何时更改以及更改为什么。我想要这样做的方式是，我在 Oracle Application Express 上有一个显示某人应用程序的表单。然后，他们可以单击编辑按钮来更改其状态。当按下提交按钮时，我希望它更新应用程序表中的状态，但还要在历史表中创建一个新条目，其中包含状态更改为的值以及更改日期。我会为此使用触发器，还是在 Oracle Application Express 上有另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:55:41.027

You can do either. Which is appropriate depends on your situation.

1.  If the history table is merely a journal table that records all changes to the application table, I'd be comfortable with a simple trigger on the application table that inserts into the history table. However, you need to check that triggers are allowed in your environment (some DBAs don't like them). The downside is that triggers can be disabled - which would mean your history table would not be updated, and your application won't realise it's not working - users will get no errors. The advantage is that the history table will be maintained regardless of which application is updating the application table - whether Apex or some other client.

2.  You can have one or more PL/SQL processes that run when the page is submitted, and you can put arbitrary PL/SQL in them - e.g. an update of the application status, followed by an insert into the history table. The advantage of this is that the code will either run successfully, or fail with an error, so you know the history will be in-sync with the application table. The disadvantage of this is that the logic is coded in your front-end code, as it were; if your company decides to write another interface that updates the application table, the history might not be inserted (or not inserted in the same way).

3.  Write a wrapper procedure for the application status change, which does both of these actions; and call this procedure from your Apex PL/SQL process. This way the procedure can be re-used by other systems (if they're ever needed).

# javascript - Gmail 正文使用 document.getElementById("") 返回 null

> ID：13734205
> 
> 赞同：0
> 
> 时间：2012-12-05T23:10:31.523
> 
> 标签：javascript

我一直很想打开 Gmail Compose 并填充“收件人”、“主题”和“正文”。一切顺利，除了身体显示为空。有人可以看看这个，看看我哪里出错了吗？以下是表格/表格下方

```
function sendMail() {

var recipient = 'edb@ufec.com',
 subject = 'Typing Evaluation',
 message = document.getElementById('tStat');

window.open ('http://mail.google.com/mail/?view=cm&fs=1'+
            '&to=' + recipient +
            '&su=' + subject +
            '&body=' + message +
            '&ui=2'); 
```

以及我从中获取信息的表格/表格首先在

```
<div align="center">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td style="border-bottom: 2px solid #354562; padding: 4px" class="titlec">
<input disabled="" id="printB" onclick="sendMail(); return false" 
   type="button" value="Email Results" name="printB" 
   style="float: right; font-size: 8pt; font-family: Arial" />
<input type="button" value="New Test" onclick="location.reload(true);" />
    <center>United Fire Typing Evaulation System</center></td>
</tr>
</tbody>
</table>
</div>
<table border="0" cellpadding="0" 
       cellspacing="0" width="100%">
<tbody>
<tr>
<td style="border-bottom: 1px dotted #860E36; padding: 4px" 
 class="titlea" background="Images/Lt_Red_Back.gif" width="460">
 second time limit press the "End Test" button above. If you would like to re-evaluate,                     press the "New Test" button at the top of the page.</td>
 <td style="border-bottom: 1px dotted #860E36; padding: 4px" 
 class="titlea" background="Images/Lt_Red_Back.gif" width="190">
 <p align="right">v1.0</p>
 </td>
 </tr>
 <tr>
 <td style="padding: 4px" class="bodya" colspan="2">
 <form name="JobOp">
 <table border="0" cellpadding="5" width="100%">
 <tbody>
 <tr>
 <td>
 <table border="0" cellpadding="5" width="100%">
  <tbody>
  <tr>
   <td align="center" 
     style="border-left: 1px solid #344270; border-right: 2px solid #344270; 
            border-top: 1px solid #344270; border-bottom: 2px solid #344270; 
            padding: 5px; background-color: #CED3E8" 
     background="Images/Blue_Back.gif">
   <b><font face="Arial" size="2" color="#FFFFFF">Net / 
   Gross WPM</font></b></td>
   <td align="center" 
      style="border-left: 1px solid #344270; 
             border-right: 2px solid #344270; border-top: 1px solid #344270; 
             border-bottom: 2px solid #344270; padding: 5px; 
             background-color: #CED3E8" 
      background="Images/Blue_Back.gif">
   <b><font face="Arial" size="2" color="#FFFFFF">Entry 
   Errors</font></b></td>
   <td align="center" 
       style="border-left: 1px solid #344270; border-right: 2px solid #344270; 
              border-top: 1px solid #344270; border-bottom: 2px solid #344270; 
              padding: 5px; background-color: #CED3E8" 
       background="Images/Blue_Back.gif">
   <b><font face="Arial" size="2" color="#FFFFFF">Accuracy</font></b></td>
   <td align="center" 
      style="border-left: 1px solid #344270; border-right: 2px solid #344270;
             border-top: 1px solid #344270; border-bottom: 2px solid #344270;
             padding: 5px; background-color: #CED3E8" 
      background="Images/Blue_Back.gif">
   <b><font face="Arial" size="2" color="#FFFFFF">Elapsed 
   / Remaining</font></b></td>
  </tr>
  <tr>
   <td align="center"><font size="2" face="Arial">
   <div id="stat_wpm">
    Not Started</div>
   </font></td>
   <td style="border-left: 1px dotted #8794C7; border-right: 1px dotted #8794C7; 
              border-top-width: 1px; border-bottom-width: 1px" align="center">
   <font size="2" face="Arial">
   <div id="stat_errors">
    Waiting...</div>
   </font></td>
   <td style="border-left-width: 1px; border-right: 1px dotted #8794C7; 
              border-top-width: 1px; border-bottom-width: 1px" align="center">
   <font size="2" face="Arial">
   <div id="stat_score">
    Waiting...</div>
   </font></td>
   <td align="center"><font size="2" face="Arial">
   <div id="stat_timeleft">
    0:00</div>
   </font></td>
  </tr>
 </tbody>
 </table>
 </td>
</tr>
<tr>
 <td style="border-left-width: 1px; border-right-width: 1px; 
            border-top: 1px solid #344270; border-bottom-width: 1px">
 <div id="expectedArea" style="display:block">
  <p style="margin-top: 0; margin-bottom: 0">
  <font color="#7A88C0" face="Arial" size="1">
  <textarea name="given" cols="53" rows="10" 
    wrap="on" onfocus="deterCPProtect();" 
    style="width: 100%; border: 1px solid #344270; padding: 2px; 
           font-family:Arial; font-size:9pt">
    Click on the button below to start the typing test. 
    What you will be expected to type will appear here.
  </textarea></font>
  </p>
 </div>
 </td>
</tr>
<tr>
 <td>
 <p align="center" style="margin-top: 0; margin-bottom: 2px">
 <input type="button" 
    value="&gt;&gt; Start Typing Test &lt;&lt;" name="start" 
    onclick="beginTest()" 
    style="display:block; border-left:1px solid #293358; border-right:2px 
       solid #293358; border-top:1px solid #293358; border-bottom:2px solid #293358; 
       width: 100%; background-color: #9BB892; color:#FFFFFF; 
       background-image:url('Images/Green_Back.gif')" /></p>
 <p align="center" style="margin-top: 0; margin-bottom: 0">
 <input disabled="" type="button" 
   value="&gt;&gt; End Typing Test &lt;&lt;" 
   name="stop" onclick="endTest()" 
   style="display:none; border-left:1px solid #293358; border-right:2px 
            solid #293358; border-top:1px solid #293358; border-bottom:2px 
            solid #293358; width: 100%; background-color: #F05959; 
            color:#FFFFFF; background-image:url('Images/Red_Back.gif')" /></p>
 </td>
</tr>
<tr>
 <td style="font-family: Arial; font-size: 9pt">
 <div id="typeArea" style="display:block">
  <table border="0" width="100%" cellspacing="1">
   <tbody>
   <tr>
    <td style="border: 1px solid #9CA8D1; background-color: #EAECF4">
    <div align="left">
     <table id="stProg" border="0" 
                 width="0%" cellspacing="1">
      <tbody>
      <tr>
       <td style="border: 1px solid #344270; background-color: #8F9BCB; 
                   font-family:Arial; font-size:8pt; color:#FFFFFF"
                   align="right" background="Images/Blue_Back.gif">

          <div id="thisProg">0%</div>
       </td>
      </tr>
     </tbody>
     </table>
    </div>
    </td>
   </tr>
  </tbody>
  </table>
  <p style="margin-top: 0; margin-bottom: 0">
  <font color="#7A88C0" face="Arial" size="1">
  <textarea onkeypress="doCheck();" onkeydown="//calcStat()" 
     name="typed" cols="53" rows="10" wrap="on" 
     style="width: 100%; border: 1px solid #344270; padding: 2px; font-family:Arial; 
             font-size:9pt"></textarea></font>
  </p>
 </div>
 <div id="afterAction" style="display:none">
 </div>
 </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:12:57.450

你可能想要类似的东西

```
document.getElementById('tStat').innerHTML
                                ^^^^^^^^^^ 
```

...否则你引用的是一个元素，而不是它的文本。也就是说，我`id`在您的 HTML 中看不到任何带有该元素的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:20:13.010

首先，我检查了，您用于 gmail 的 URL 是正确的。

快速查看后，您的消息变量无法返回值。您可以通过使用脚本并检查 gmail 中的最终 URL 来进行快速检查（查看“body”变量中是否有任何内容）。

首先，您需要您的 message 变量来获取您的正文文本区域的值（或它所在的任何 html 标签，您的问题中有很多 html，我无法在快速扫描后看到哪个标签包含您的消息） . 所以改变：

```
message = document.getElementById('tStat'); 
```

要么

```
message = document.getElementById('tStat').innerHTML; 
```

或者

```
message = document.getElementById('tStat').value; 
```

取决于它所在的html标签类型。

我希望这有帮助。

# php - 选择时自动发布的下拉菜单

> ID：13734218
> 
> 赞同：0
> 
> 时间：2012-12-05T23:11:56.623
> 
> 标签：php, javascript, html

选择选项后，如何自动制作下拉菜单帖子？

```
<SELECT NAME="select_page"><?php echo $options1;?></SELECT> 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T23:20:41.640

您可以将`onchange`事件用于`select`元素，并编写表单提交代码：

```
<form method="post">
    <select name="myselect" onchange="this.form.submit();">
        <option>blue</option>
        <option>red</option>
    </select>
</form> 
```

当值更改时，它将自动提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:17:10.680

请注意，jQuery 是`<select>`通过 ID 引用标签的，所以在标签中添加一个。此外，如果您希望收到回复，您可以使用 AJAX 发布您的数据。

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#Sel').change(function() {
                    var opt = $(this).val();
                    $.ajax({
                        type: "POST",
                        url: "receiving_file.php",
                        data: 'selected_opt=' + opt,
                        success:function(data){
                            alert('This was sent back: ' + data);
                        }
                    });
                });
            });
        </script>
    </head>
<body>

<select id = "Sel">
    <option value ="Song1">default value<br>
    <option value ="Song2">Break on through<br>
    <option value ="Song3">Time<br>
    <option value ="Song4">Money<br>
    <option value ="Song5">Saucerful of Secrets
</select> 
```

# objective-c - RestKit 0.20 — CoreData：错误：无法调用 NSManagedObject 类上的指定初始化程序

> ID：13734221
> 
> 赞同：19
> 
> 时间：2012-12-05T23:12:12.410
> 
> 标签：objective-c, restkit, restkit-0.20

我遇到了一个我似乎无法解决的新问题......这是我的 RestKit 代码，遵循 Twitter 核心数据示例：

```
//
// RESTKIT
//

// restkit object manager
NSString *baseURL = @"http://test1.website.com";
RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:baseURL]];

// enable activity indicator
[AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

// managed object model
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"AppName" withExtension:@"momd"];
NSManagedObjectModel *managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
// NSLog(@"managed object model: %@", managedObjectModel);

// managed object store
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
objectManager.managedObjectStore = managedObjectStore;
// NSLog(@"managed object store: %@", managedObjectStore);

// persistent store
NSError *error;
NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"AppName.sqlite"];
NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:&error];
if (error) {
    NSLog(@"unresolved error %@, %@", error, [error userInfo]);
    abort();
}
// NSLog(@"persistent store coordinator: %@", managedObjectStore.persistentStoreCoordinator);
// NSLog(@"persistent store: %@", persistentStore);

// managed object contexts
[managedObjectStore createManagedObjectContexts];
// NSLog(@"managed object context: %@", managedObjectStore.mainQueueManagedObjectContext);

// managed object cache
managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.mainQueueManagedObjectContext];
// NSLog(@"mangaged object cache: %@", managedObjectStore.managedObjectCache);

//
// entity mapping
//

// album entity mapping
RKEntityMapping *albumEntityMapping = [RKEntityMapping mappingForEntityForName:@"Album" inManagedObjectStore:managedObjectStore];
albumEntityMapping.identificationAttributes = @[ @"identifier" ];
[albumEntityMapping addAttributeMappingsFromDictionary:@{ @"title" : @"title" }];

//
// response descriptor
//

// album response descriptor
[objectManager addResponseDescriptor:[RKResponseDescriptor responseDescriptorWithMapping:albumEntityMapping pathPattern:[NSString stringWithFormat:@"/albums/display/%@/%@", userInfo[@"userID"], userInfo[@"apiKey"]] keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]]; 
```

我通过 UITableViewController 类从 API 请求信息：

```
- (void)loadObjectsFromResourcePath:(NSString *)resourcePath;
{
   [[RKObjectManager sharedManager] getObjectsAtPath:resourcePath parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        NSLog(@"mapping result: %@", [mappingResult array]);
        [self stopLoading];
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"error: %@", error);
        [self stopLoading];
    }];
} 
```

但是，使用此代码，我收到以下错误：

```
2012-12-05 17:08:14.830 AppName Alpha[1310:907] I restkit:RKLog.m:34 RestKit logging initialized...
2012-12-05 17:08:15.107 AppName Alpha[1310:907] resource path: albums/display/102/drrrbSAt6RFLsgHaKiiB6kBIyYRyzxLYinL84Kba
2012-12-05 17:08:15.113 AppName Alpha[1310:907] I restkit.support:RKMIMETypeSerialization.m:115 JSON Serialization class 'RKNSJSONSerialization' detected: Registering for MIME Type 'application/json
2012-12-05 17:08:15.118 AppName Alpha[1310:1603] I restkit.network:RKHTTPRequestOperation.m:141 GET 'http://test1.AppName.com/albums/display/102/drrrbSAt6RFLsgHaKiiB6kBIyYRyzxLYinL84Kba'
2012-12-05 17:08:15.122 AppName Alpha[1310:907] error (null), (null)
2012-12-05 17:08:35.333 AppName Alpha[1310:3e13] I restkit.network:RKHTTPRequestOperation.m:158 GET 'http://test1.AppName.com/albums/display/102/drrrbSAt6RFLsgHaKiiB6kBIyYRyzxLYinL84Kba' (200)
2012-12-05 17:08:35.351 AppName Alpha[1310:1507] CoreData: error: Failed to call designated initializer on NSManagedObject class 'AppName Album' 
2012-12-05 17:08:35.355 AppName Alpha[1310:1507] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<AppName 0x1c579380> valueForUndefinedKey:]: the entity (null) is not key value coding-compliant for the key "Title".'
*** First throw call stack:
(0x39e503e7 0x38ea9963 0x39e500d5 0x371f8d81 0x3276cc1d 0xbf545 0xc00f5 0xc0ab9 0xc44c5 0x32791299 0xb738b 0xb6e5f 0xb7ca5 0xb8343 0xb895b 0x32791299 0xf96ef 0xf8c4b 0x32791299 0x328097f7 0x32c38793 0x32c3c657 0x32c3c7d9 0x3312a7f1 0x3312a684)
libc++abi.dylib: terminate called throwing an exception 
```

您可以在此处查看返回的 JSON 对象：http: [//test1.AppName.com/albums/display/102/drrrbSAt6RFLsgHaKiiB6kBIyYRyzxLYinL84Kba](http://test1.AppName.com/albums/display/102/drrrbSAt6RFLsgHaKiiB6kBIyYRyzxLYinL84Kba)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-05T23:22:11.613

这表明在没有调用适当的 Core Data 初始化程序的情况下尝试创建对象，这可能意味着您获得的是`RKObjectRequestOperation`实例而不是`RKManagedObjectRequestOperation`.

我怀疑响应描述符未能与 URL 匹配，这导致它选择了错误的对象请求操作类型。您可以通过在以下行中放置一个断点来检查这`appropriateObjectRequestOperationWithObject:method:path:parameters:`一点：

```
NSArray *matchingDescriptors = RKFilteredArrayOfResponseDescriptorsMatchingPath(self.responseDescriptors, requestPath);
BOOL containsEntityMapping = RKDoesArrayOfResponseDescriptorsContainEntityMapping(matchingDescriptors);
BOOL isManagedObjectRequestOperation = (containsEntityMapping || [object isKindOfClass:[NSManagedObject class]]); 
```

这个逻辑负责选择创建的操作类型。检查是否`matchingDescriptors`包含您期望的响应描述符，然后检查接下来的两个布尔值的值。我的猜测是这`RKFilteredArrayOfResponseDescriptorsMatchingPath`并没有返回你所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-08T10:14:15.517

现在已经阅读了 RKObjectManager 的类文档，其中阐明了对基本 url 的 AF 网络处理的处理。如果我先读到这篇文章，会为自己节省一些时间，也可以避免对 RestKit 示例中的路径发表不相关的评论。

Had problems matching a mix of object and entity mappings including a number of object mappings with a nil key path and different URL and found this answer very useful for determining the cause of the problem described following which may have contributed to others experiencing similar problems.

# php - 例外：不允许序列化“闭包”

> ID：13734224
> 
> 赞同：62
> 
> 时间：2012-12-05T23:12:31.643
> 
> 标签：php, exception, serialization, closures

所以我不确定我要向你们展示什么，如果你需要更多代码，请不要犹豫，问：

所以这个方法将在我们的应用程序中为 Zend 设置 initMailer：

```
protected function _initMailer()
{
    if ('testing' !==  APPLICATION_ENV) {
        $this->bootstrap('Config');
        $options = $this->getOptions();
        $mail = new Zend_Application_Resource_Mail($options['mail']);
    }elseif ('testing'  ===  APPLICATION_ENV) {
        //change the mail transport only if dev or test
        if (APPLICATION_ENV <> 'production') {

            $callback = function()
            {
                return 'ZendMail_' . microtime(true) .'.tmp';
            };

            $mail = new Zend_Mail_Transport_File(
                array('path' => '/tmp/mail/',
                        'callback'=>$callback
                )
            );

            Zend_Mail::setDefaultTransport($mail);
        }
    }

    return $mail;
} 
```

您可以看到其中的闭包。当我运行任何使用此代码的测试时，我得到：

```
Exception: Serialization of 'Closure' is not allowed 
```

因此与此“关闭”有关的所有测试都失败了。所以我在这里问你们我应该怎么做。

为了澄清上述内容，我们所做的只是说我们发送的任何电子邮件都希望将有关该电子邮件的信息存储在文件中 /tmp/mail/ 目录中的文件夹中。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-05T23:21:53.813

显然匿名函数不能被序列化。

例子

```
$function = function () {
    return "ABC";
};
serialize($function); // would throw error 
```

从您的代码中，您正在使用 Closure：

```
$callback = function () // <---------------------- Issue
{
    return 'ZendMail_' . microtime(true) . '.tmp';
}; 
```

**解决方案1：**替换为正常功能

例子

```
function emailCallback() {
    return 'ZendMail_' . microtime(true) . '.tmp';
}
$callback = "emailCallback" ; 
```

**解决方案 2：**通过数组变量间接调用方法

如果您查看 [http://docs.mnkras.com/libraries_23rdparty_2_zend_2_mail_2_transport_2file_8php_source.html](http://docs.mnkras.com/libraries_23rdparty_2_zend_2_mail_2_transport_2file_8php_source.html)

```
 public function __construct($options = null)
   63     {
   64         if ($options instanceof Zend_Config) {
   65             $options = $options->toArray();
   66         } elseif (!is_array($options)) {
   67             $options = array();
   68         }
   69 
   70         // Making sure we have some defaults to work with
   71         if (!isset($options['path'])) {
   72             $options['path'] = sys_get_temp_dir();
   73         }
   74         if (!isset($options['callback'])) {
   75             $options['callback'] = array($this, 'defaultCallback'); <- here
   76         }
   77 
   78         $this->setOptions($options);
   79     } 
```

您可以使用相同的方法发送回调

```
$callback = array($this,"aMethodInYourClass"); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-11-01T15:47:22.697

PHP 不允许直接闭包序列化。但是你可以使用像 PHP Super Closure 这样的强大类：[https ://github.com/jeremeamia/super_closure](https://github.com/jeremeamia/super_closure)

这个类使用起来非常简单，并且捆绑到队列管理器的 laravel 框架中。

来自 github 文档：

```
$helloWorld = new SerializableClosure(function ($name = 'World') use ($greeting) {
    echo "{$greeting}, {$name}!\n";
});

$serialized = serialize($helloWorld); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-11T10:09:43.333

如前所述：开箱即用的闭包不能序列化。

然而，使用`__sleep()`魔法`__wakeup()`方法和反射你可以手动使闭包可序列化。有关更多详细信息，请参阅[extended-php-5-3-closures-with-serialization-and-reflection](http://www.htmlist.com/development/extending-php-5-3-closures-with-serialization-and-reflection/)

**这利用了反射和 php 函数*eval*。请注意，这会打开代码注入的可能性，因此请注意您正在序列化的内容。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-01T09:38:36.893

您必须禁用全局变量

```
 /**
 * @backupGlobals disabled
 */ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-11-11T21:28:32.777

它是实验性的，不安全，它有几个风险，比如必须使用可以禁用的 eval ()。最好的办法是在 heredoc 示例中编写要序列化的脚本：

```
$code = <<<CODE
 <?php
class \$gen_class_{$user}{
 ...
}
CODE; 
```

您可以通过序列化代码或使用扩展名“.class.php”编写代码来更轻松地使用代码。您将能够轻松调用您的脚本并使其持久化。

[https://3v4l.org/jpHm9](https://3v4l.org/jpHm9) 更新 PHP 8

```
<?php

function closure_to_str($func)
{
    $refl = new \ReflectionFunction($func); // get reflection object
    $path = $refl->getFileName();  // absolute path of php file
    $begn = $refl->getStartLine(); // have to `-1` for array index
    $endn = $refl->getEndLine();
    $dlim = PHP_EOL;
    $list = explode($dlim, file_get_contents($path));         // lines of php-file source
    $list = array_slice($list, ($begn-1), ($endn-($begn-1))); // lines of closure definition
    $last = (count($list)-1); // last line number

    if((substr_count($list[0],'function')>1)|| (substr_count($list[0],'{')>1) || (substr_count($list[$last],'}')>1))
    { throw new \Exception("Too complex context definition in: `$path`. Check lines: $begn & $endn."); }

    $list[0] = ('function'.explode('function',$list[0])[1]);
    $list[$last] = (explode('}',$list[$last])[0].'}');

    return implode($dlim,$list);
}

$test = 10;
$dog2 = function($var=0) use ($test){ 
    $var = 10;
    echo $var . PHP_EOL;
    return $test . $var;
};

echo closure_to_str($dog2)."\n\n"; 
```

返回字符串

```
function($var=0) use ($test){ 
    $var = 10;
    echo $var . PHP_EOL;
    return $test . $var;
} 
```

# android - 在Android上长按GoogleMap的InfoWindow

> ID：13734225
> 
> 赞同：3
> 
> 时间：2012-12-05T23:12:34.967
> 
> 标签：android, google-maps, google-maps-android-api-2

我在 Android 上为 GoogleMap 使用自定义 InfoWindowsAdapter。我的问题是，我无法在该自定义信息窗口上附加 onLongClickListener。GoogleMap 类只有 OnClickListener，但 API 中缺少 OnLongClickListener。

我试图在我的自定义视图上附加 OnLongClickListener，但是没有调用这个 Listener。

```
private class EventInfoWindowAdapter implements InfoWindowAdapter {    
    public View getInfoWindow(Marker marker) {

            //mWindow is clicable (I do set it in layout XML)
        mWindow = getLayoutInflater().inflate(R.layout.event_info_window, null);

        mWindow.setOnLongClickListener(new LinearLayout.OnLongClickListener() {

            @Override
            public boolean onLongClick(View view) { //THIS ONE IS NOT CALLED

                Log.d("LONG", "CLICKED");

                contextMode = startActionMode(actionModeCallback);

                return true;
            }
        });

        return mWindow;
    }
}

//in onCreate(...) method

mMap = ((MapView) findViewById(R.id.map)).getMap();
mMap.setInfoWindowAdapter(new EventInfoWindowAdapter()); 
```

任何建议如何使它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:19:35.670

侦听器将无法工作，因为您显示为 InfoWindow 覆盖的内容不是视图 - 它是视图的快照，对于大多数方式和目的来说几乎是一张图片。我有类似的麻烦，所以这些答案可能会帮助你：

[将按钮添加到可以注册点击的自定义 InfoWindowAdapter 视图](https://stackoverflow.com/questions/13706925/adding-a-button-to-a-custom-infowindowadapter-view-that-can-register-clicks)

# html - 尝试在联系人中创建必需的空白字段

> ID：13734230
> 
> 赞同：0
> 
> 时间：2012-12-05T23:13:01.773
> 
> 标签：html, css, forms, spam

我发现了在 html 联系表单中包含一个额外字段的想法，然后使用 CSS 将其隐藏，这样垃圾邮件就会填充它而人类不会。我创建了这个隐藏字段。我的问题是这样的：

如何使该字段必须为空白才能发送表格？我有设置表单，当缺少必填字段时会显示一条消息，所以我猜它与此相反？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:15:55.643

你可以通过 JavaScript 来做：

```
function send(){
    if(document.getElementById(yourSendButton).value == "") // go on
    else //the field is filled 
```

或按 PHP

```
if($_POST["nameOfYourButton"] == ""){
    //input is acceptable
}
else{
    //PROBLEM
} 
```

我建议同时实施。

# java - java构造函数和清除板的清除板除了占用的位置的方法吗？

> ID：13734233
> 
> 赞同：1
> 
> 时间：2012-12-05T23:13:23.813
> 
> 标签：java, multidimensional-array

好的，我真的需要所有这些帮助，我有一个名为 Board.java 的类，该板表示为 char 的二维数组。海龟可以通过在它通过的板上的每个位置写入一个字符来留下痕迹。董事会将有两个构造函数。默认构造函数不带参数，将创建一个 10 行 25 列的板。将板上的每个元素设置为空格。第二个构造函数将采用两个整数，分别指定行数和列数。如果指定的行数或列数小于 1，则将值设置为 1。如果指定的行数或列数大于 80，则将值设置为 80。将板中的每个元素设置为空格。该类将需要一个 clearBoard 方法。这将在每个位置放置一个空格，除了那些被海龟占据的位置。海龟使用字符“0”、“1”、“2”、...“9”来标记它们的位置。

我已经完成了以下操作，但我不确定我的构造函数是否正确，并且我不知道如何启动 clearBoard 方法。请帮忙！！

```
import java.util.Arrays;

public class Board {

    private char [][] theBoard;

     public Board() { // This will not take any arguments 

        theBoard = new char [10][25]; //10 rows and 25 columns
        for (int row = 0; row < theBoard.length; row++ ) {
             for (int col = 0; col < theBoard[row].length; col++ )
                 theBoard [row][col] = ' ';
    System.out.println();
        }
   }

   public Board (int [][] theBoardArray) { 
        char [][] theBoard = new char [theBoardArray.length] [theBoardArray[0].length];
        for (int row = 0; row < theBoard.length; row++ ) {
                if (row <1)
                    row = 1;
                else if (row >80)
                    row =80;
             for (int col = 0; col < theBoard[row].length; col++ ){
                if (col <1)
                    col = 1;
                else if (col >80)
                    col =80;
                 theBoard [row][col] = ' ';
            }
    System.out.println();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:24:17.337

修复了一些部分，清理了一下并添加了您想要的其余部分。解释在代码注释中。

```
public class Board {

    private char [][] theBoard;

    public Board() { // This will not take any arguments
        this(10, 25); // calls the other constructor
        // avoid duplicate code, where possible
    }

    // takes number of rows and collumns
    public Board (int rows, int cols) {
        // fix illegal row and column numbers
        rows = fixNumber(rows);
        cols = fixNumber(cols);
        // create the board and fill it with ' '
        theBoard = new char [rows][cols];
        for (int row = 0; row < theBoard.length; row++) {
            for (int col = 0; col < theBoard[row].length; col++)
                theBoard[row][col] = ' ';
        }
    }

    private int fixNumber(int number) {
        if (number < 1) {
            return 1;
        } else if (number > 80) {
            return 80;
        } else {
            return number;
        }
    }

    // almost like constructor, just does not create a new char[][] and
    // only puts ' ' into fields not containing any of '0' - '9'
    public void clearBoard() {
        for (int row = 0; row < theBoard.length; row++ ) {
            for (int col = 0; col < theBoard[row].length; col++) {
                if (theBoard[row][col] < '0' || theBoard[row][col] > '9') {
                    theBoard[row][col] = ' ';   
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T23:24:14.230

首先，您不应该将 int 设置为 ' '。' ' 是一个字符，整数是数字。此代码将导致 int 设置为 int 32，即空格的 ascii 索引。我想如果你想考虑一个 32 的空间，这会起作用，但很奇怪。

第二个构造函数不太正确。您正在引入一个 int 数组，但您说您将采用两个 int。将行和列设置在值内的“if else”部分很好，但不是您获取它们的方式。

尝试传入两个整数，行和列，然后检查以确保它们在可接受的范围内，如果不是则更改它们，然后创建 int 数组。

# c# - 不同地区不同的认证方式

> ID：13734237
> 
> 赞同：5
> 
> 时间：2012-12-05T23:13:38.510
> 
> 标签：c#, .net, asp.net-mvc-3, web-config, asp.net-mvc-3-areas

我正在处理一个网站的两个部分：一个使用普通表单身份验证，另一个使用基于 HMAC 的身份验证。基于表单的工作正常（使用自定义成员资格提供程序除外）。

最令人沮丧的是，默认情况下，如果决定使用表单身份验证，它会将所有 401 响应重定向到在身份验证标记下的根 Web.config 中指定的 loginUrl。为了为我的站点的 HMAC 部分关闭此功能，我创建了一个单独的区域，这些控制器位于其中。但是，无论我在哪里放置`<authentication mode="None"></authentication>`标签（无论是在区域/视图 Web.config 中，Web .config 我已放置在区域文件夹中，或者在根 Web.config 中的位置标记下（这样做实际上会导致关于该标记不属于那里的错误））我似乎无法让这个东西停止将所有 401 重定向到 loginUrl .

任何帮助将不胜感激，因为这让我把头发扯掉了。

顺便说一句，这个问题已经被问了至少[2](https://stackoverflow.com/questions/13363581/mvc3-multiple-areas-different-authentication-methods) [次](https://stackoverflow.com/questions/8176703/asp-net-mvc-3-areas-and-multiple-authentication-in-web-config)，但没有（可行的）回答。虽然我的重点是将身份验证模式设置为无，但他们通常专注于更改路径的角色（在我看来，使用`[Authorize(Roles="role1,role2,role3")]`每种方法的属性更容易做到这一点）这让我的问题有点不同。如果这是不可能的，也请告诉我，以便我找出更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T00:01:25.357

[身份验证元素（ASP.NET 设置架构）](http://msdn.microsoft.com/en-us/library/532aee0e%28v=vs.100%29.aspx)仅在应用程序级别有效。**在同一个应用程序中不能有不同的身份验证模式。**

但是，您可以将[位置元素（ASP.NET 设置架构）](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.100%29.aspx)指定到特定区域，并在其中指定允许匿名用户的[授权元素（ASP.NET 设置架构） 。](http://msdn.microsoft.com/en-us/library/8d82143t%28v=vs.100%29.aspx)您还可以将授权元素放在应用程序子目录下的 web.config 文件中。

**为了使用两种不同的身份验证方案**，您必须将该区域转换为单独的应用程序。如果您愿意，它仍然可以是父应用程序的子应用程序，但有一些警告。当然，其中一个警告是会话状态不会在两个应用程序之间共享。

另外，请参阅[IIS 中的嵌套 ASP.NET“应用程序”继承父配置值？](https://stackoverflow.com/questions/4144117/nested-asp-net-application-within-iis-inheriting-parent-config-values)问题和[ASP.NET 配置文件层次结构和继承](http://msdn.microsoft.com/en-us/library/ms178685%28v=VS.100%29.aspx)。

# c# - c#正则表达式问题

> ID：13734241
> 
> 赞同：0
> 
> 时间：2012-12-05T23:13:55.340
> 
> 标签：c#, regex

我想知道为什么使用以下输入，函数 IsMatches 返回 false。我的模式有什么问题。非常感谢。

```
var input = @"/****** Object:  Table [etc_abc]    Script Date: 11/27/2012 13:24:26 ******/";

    public bool IsMatched(string input)
    {
        var match = Regex.Match(input, @"/\*+\sObject:\s+Table\s+[\[[a-zA-Z0-9_\\]+\]\.]??(\[[a-zA-Z0-9_\\]+\])", RegexOptions.Compiled | RegexOptions.IgnoreCase);
        return match.Success;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:24:39.117

我不特别了解 C# 正则表达式，但这部分看起来很可疑：`[\[[a-zA-Z0-9_\\]+\]\.]??`.

你不想把它当作一个字符类，你可能想把它当作一个组，所以使用简单的括号而不是方括号：`(\[[a-zA-Z0-9_\\]+\]\.)??`

所以这可能对你有用：`@"/\*+\sObject:\s+Table\s+(\[[a-zA-Z0-9_\\]+\]\.)??(\[[a-zA-Z0-9_\\]+\])"`

# ruby - 使用类作为整个文件的命名空间

> ID：13734242
> 
> 赞同：1
> 
> 时间：2012-12-05T23:14:06.770
> 
> 标签：ruby, class, namespaces

当您想使用模块`A`作为命名空间来处理整个文件时，您可以输入：

```
include A 
```

接下来的任何内容都将在`A`. 有没有办法用 class 做类似的事情`B`？

放：

```
class B 
```

在文件的开头，在文件的所有内容之后，以

```
end 
```

看起来不优雅，并且是错误的原因。我正在寻找一种不需要像`end`.

**编辑**我上面的描述`include A`似乎是错误的。即使这样做了，环境仍然是主要对象。我想要的是让它成为可能，如果我只是这样做

```
def foo; ... end 
```

没有任何显式嵌套，那么它将被定义为相应情况`A`的方法。`B`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:53:51.687

据我所知，没有这样的指令。

尽管如果您的文件将被另一个脚本“执行”，您可以这样做：

文件`file.rb`包含

```
puts self 
```

文件`main.rb`包含

```
class B
    eval(File.read('file.rb'))
end 
```

如果你想让它更透明，你甚至可以提供你自己的 require 实现，它隐藏了所有这些魔力。

# entity-framework - 什么叫实体中的设置器？

> ID：13734246
> 
> 赞同：1
> 
> 时间：2012-12-05T23:14:26.937
> 
> 标签：entity-framework

在 Entity Framework 中，您必须创建一个派生自`DbContext`IDbSet 属性的类。Entity Framework 中的什么调用了设置器，它是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:17:18.503

当您的自定义上下文类被实例化时，基本`DbContext`构造函数调用一个名为的私有方法`InitializeLazyInternalContext`，该方法又调用另一个名为`DiscoverAndInitializeSets`.

此方法创建 a 的新实例`DbSetDiscoveryService`，将当前上下文作为构造函数参数传递，然后调用其`InitializeSets`方法。该方法依次调用`GetSets`，它使用反射来获取派生上下文中可分配的任何属性的列表`DbSet<T>`（这包括`IDbSet<T>`）。

然后它遍历这个集合并提供没有用 a 标记的属性`SuppressDbSetInitializationAttribute`，它`DbSet<T>`通过调用 DbContext 的`Set<TEntity>`方法并分配结果来分配 a 的实例。

您可以在[此处](https://github.com/dotnet/ef6/blob/main/src/EntityFramework/Internal/DbSetDiscoveryService.cs)`DbSetDiscoveryService`查看代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:36:47.653

EF 使用反射来发现 DbContext 派生类上的 IDbSet 属性并相应地设置它们。

# ios - iOS - 是否可以通过本地主机在应用程序之间进行通信？

> ID：13734248
> 
> 赞同：18
> 
> 时间：2012-12-05T23:14:31.027
> 
> 标签：ios, networking

考虑这种假设情况：

Bob 和 Eve 的应用程序安装在同一部 iPhone 上。Bob 的应用程序正在运行并绑定到 localhost:8080 以侦听来自它自己的 AJAX 调用`UIWebView`。Eve 的应用程序在后台运行，并试图通过对 localhost:8080 进行 AJAX 调用来干扰 Bob 的应用程序。

两个问题：

1.  假设 Eve 的应用知道 Bob 的 AJAX API，她的调用会成功吗？（即 iOS 沙箱流量是否在 localhost 上？）

2.  Eve 的应用程序是否可以嗅探 Bob 的应用程序产生的流量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T03:58:47.030

1.  如果 Bob 的应用程序正在运行，是的，Eve 的应用程序可以连接到它。

有 2 种可能的方法可以让这种情况发生。Bob 的应用程序在前台，而 Eve 的应用程序在后台连接到它，假设 Eve 的应用程序在后台运行。或者，Bob 的应用程序在后台运行，而 Eve 的应用程序在前台连接到它。

默认情况下，iOS 在后台暂停应用程序。如果应用程序使用后台执行，并继续在后台运行，它可以像往常一样访问网络。

您可能想阅读 Apple[关于网络和多任务处理的技术说明中的“Beyond The Basics”](http://developer.apple.com/library/ios/#technotes/tn2277/_index.html#//apple_ref/doc/uid/DTS40010841)

1.  嗅探流量需要 root 访问权限，除非 Eve 的应用程序是越狱应用程序，否则无法完成。

在文章[Wireshark CapturePrivileges](http://wiki.wireshark.org/CaptureSetup/CapturePrivileges)的“BSD（包括 Mac OS X）”部分中，它指出在 BSD 系统上，我们需要有权访问 BPF 设备以捕获数据包（阅读：嗅探网络流量）。只有 root（或任何超级用户）可以访问 BPF 设备，或者授予任何其他用户访问它们的权限。

# git - Node.js - 单个应用程序代码，使用自定义设置多次运行

> ID：13734250
> 
> 赞同：1
> 
> 时间：2012-12-05T23:14:34.797
> 
> 标签：git, node.js, repository

我将在 Node.js 中将软件作为服务应用程序启动。有没有办法拥有一个源代码和多个应用程序实例？我只想开发和提交一个 repo，所有应用程序实例中都可以看到更改？当然，用户可以设置自己的配置，如数据库和虚拟主机。用户文件将存储在他挂载到 vhost 的文件系统目录中。他/她的公共文件作为图像或从 CMS 添加的下载文件将在哪里。

最好的，马克。

# sql - 如何从单独的记录中打印同一行的条形码编号？

> ID：13734253
> 
> 赞同：1
> 
> 时间：2012-12-05T23:14:42.047
> 
> 标签：sql, printing

条形码编号存储为 bar_id 为 1 或 0 的单独记录。我需要将它们打印到并排列中的 csv 文件中。

```
barcodes.bar_barcode is the barcodes field
barcodes.bari_id defines where it is barcode 1 or 0
barcodes.bar_description is the description field 
```

这是所需的数据和输出：

[![桌子](../Images/75207c6edc723ca4b62918c23600353f.png)](https://i.stack.imgur.com/PX1Uw.png)

我只是不知道如何在并排列中打​​印两个条形码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:51:08.013

每个 BAR_BARCODE 是否总是有一个 BAR_ID 0 和 1？如果是这样，您可能可以通过自加入来做您想做的事情。否则，您可能还需要考虑使用外部连接。

```
SELECT a.BAR_BARCODE, b.BAR_BARCODE
  FROM BARCODES a
      ,BARCODES b
  WHERE a.BAR_ID = 1
    AND b.BAR_ID = 0
    AND a.BAR_INVNO = b.BAR_INVNO 
```

更新

尝试使用外连接来容纳缺少的 bar_id = 0 记录。

```
SELECT a.BAR_BARCODE, COALESCE(b.BAR_BARCODE, 'value when null')
  FROM BARCODES a
  LEFT OUTER JOIN BARCODES b ON (a.BAR_INVNO = b.BAR_INVNO AND b.BAR_ID = 0)
  WHERE a.BAR_ID = 1 
```

# javascript - 修改框架元素的 css

> ID：13734257
> 
> 赞同：1
> 
> 时间：2012-12-05T23:14:58.167
> 
> 标签：javascript, css, sharepoint

我有一个页面可以在 sharepoint 中作为弹出页面打开。现在当页面作为弹出页面打开时，我希望修改一些 css。发生的情况是代码能够成功修改标签元素但无法修改.ms-dlgTitleText，它是打开的窗口共享点，它保存页面并且位于保存页面的iFrame元素上方。有人可以告诉我我能在这里做什么。

编辑：我想知道如何使用 ms-dlgTitle 类更改 div 内的内容

```
<div class="dialogue>
<div class="ms-dlgTitle">
content
</div>
<div class="dlgframe">

<iframe>
some data

    <script src="/_layouts/1033/jQuery.js" type="text/javascript">
    </script>
    <script type="text/javascript"> 
     $(document).ready(function () 
     {if (window.location.search.match("[?&]IsDlg=1")) 
        {
            alert("doc is ready now"); 
            $('<style type="text/css">.ms-dlgTitle{ width: 200px; } #foo{background:black;                     }</style>').appendTo("head");}});

     function t(){  var options = SP.UI.$create_DialogOptions();options.url =           "http://sharepointhost:2266";options.height =      300;SP.UI.ModalDialog.showModalDialog(options);
                 }
     </script>
    <a class="s" onclick="javascript:t()">k</a> <label title="label1" id="foo">lbl</label>
</iFrame>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:16:19.590

在我看来，您想要做的是使用 iframe 中的脚本修改“父”页面。这是不可能的，除非两个页面都来自同一个主机、同一个端口并使用相同的协议。如果是这种情况，您可以使用`parent.document.getElementById()`，或者在您的情况下可能更方便，`parent.document.getElementsByClassName()`.

如果不是这种情况（如果您的页面来自不同的主机、端口或不同的协议），则您必须使用`window.postMessage`iframe 和父文档之间的通信。

已经回答了一个非常[相似的问题。](https://stackoverflow.com/questions/5604839/accessing-an-element-outside-of-iframe)我建议你看看。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:48:06.480

在对话框选项中，您可以将参数传递给对话框。这方面的例子可以在[这里](http://www.sharepointdevelopment.me/2011/06/passing-data-to-and-from-sharepoint-modal-dialogs/)找到。

在页面加载本身上，我会检查参数是否可用，然后使用 for ex 更改您的页面 css。jQuery的帮助。

# iphone - 使用 NSNumberFormatter 和 RestKit 将 NSCFNumber 转换为 NSNumber 时出错

> ID：13734258
> 
> 赞同：0
> 
> 时间：2012-12-05T23:14:59.743
> 
> 标签：iphone, ios, core-data, restkit, nsnumberformatter

我正在尝试从 JSON 调用中打印/访问我的（双）值并获取：

[事件纬度]：无法识别的选择器发送到实例 0x8d09970

从同一个对象访问字符串值时，它打印得很好。在调试器中，我看到我的值和 event.latitude 被映射为双精度的 NSCFNumber。我不知道这是否只是我没有正确地投射或声明纬度，还是没有正确映射该值。弦乐工作

这是一些代码：

```
event.h
@interface Event : NSObject  {
    NSNumber    *latitude;
}

@property (nonatomic, retain) NSNumber *latitude;
@end 
```

ViewController.m 片段

```
Event *event = (Event *)[eventsArray objectAtIndex:indexPath.row];

static NSNumberFormatter *numberFormatter;
if (numberFormatter == nil) {
    numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
    [numberFormatter setMaximumFractionDigits:3];
}
NSLog(@"Event - %@", event.name );  //This works just fine
NSLog(@"Event - %@", event.latitude );  //This is where I am testing different ways of accessing the latitude
NSLog(@"Event - %@", [numberFormatter stringFromNumber:[event latitude]] );
//NSLog(@"Event - %@", [[event latitude] stringValue] );
NSString *coordinatesString = [[NSString alloc] initWithFormat:@"Lat:%@, Lon:%@",
                               [numberFormatter stringFromNumber:[event latitude]],
                               [numberFormatter stringFromNumber:[event longitude]]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:43:19.937

`[Event latitude]: unrecognized selector sent to instance 0x8d09970`表示 Event 对象没有名为“纬度”的方法。

我建议您首先检查以确保您在任何地方都正确拼写了“纬度”（您可以看五次这种东西，有时却看不到它），并且它是正确（未）大写的。

在那之后，我会说你应该确保你没有以某种方式对“事件”有两种不同的定义。您可以创建 Event 的测试实例并直接访问“纬度”属性以确保一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:19:26.510

这绝对不是关于铸造的。

您得到的例外是由于缺少`latitude`实现，您可能忘记或输入错误。

你有没有实现文件`@synthesize`中的属性？`Event.m`

# c++ - C++函数声明和对象初始化的区别

> ID：13734262
> 
> 赞同：4
> 
> 时间：2012-12-05T23:15:03.910
> 
> 标签：c++, c++11

如果我写了这行代码：

```
std::thread t(EchoServer(socket)); 
```

编译器如何解释这条指令？它可以是一个函数声明或只是一个初始化。我有以下代码：

```
#include <iostream>
#include <thread>
#include <boost/asio.hpp>

#include <boost/asio.hpp>

typedef boost::asio::ip::tcp::socket Socket;
auto socket_deleter = [] (Socket* s) {s->close(); delete s;};
typedef std::unique_ptr<Socket, decltype(socket_deleter)> socket_ptr;

class EchoServer {
public:
    static void Listen(unsigned int port)
    {

        using namespace std;
        using namespace boost::asio;

        io_service ios;

        // create an endpoint to listen to a certain port
        ip::tcp::endpoint endpoint(ip::tcp::v4(), port);

        cout << "Listening to TCP Socket on port " << port << " ..." << endl;

        // Start opening a socket
        ip::tcp::acceptor acceptor(ios, endpoint);

        // this loop must be infinite... but we accept only 3 connections
        auto socket = socket_ptr(new Socket(ios));

        std::thread t(EchoServer(socket));
    }

    EchoServer(socket_ptr&& s) : m_socket(std::move(s))
    {
    }

    void operator ()() const
    {
    }

private:
    socket_ptr m_socket;
}; 
```

但是编译器给了我以下警告：

```
C4930: 'std::thread t(EchoServer(socket))': std::thread t(EchoServer(socket)) function not called (was a variable definition intended?). 
```

那么我该如何解释这一行是 std::thread 创建类型的对象而不是函数声明。

**更新 1：** 我正在使用不支持统一初始化的 Visual Studio 2012，因此我将代码从更改为`std::thread t((EchoServer(socket)));`，`std::thread t((EchoServer(socket)));`但这次我有一个我不明白的编译时错误：

```
error C2440: '<function-style-cast>': cannot convert from 'std::unique_ptr<_Ty,_Dx>' to 'EchoServer' 
```

我错过了什么？

**更新 2** 我可能必须更好地理解移动语义问题在于 socket_ptr 的声明。我已经以这种（丑陋的）方式更改了代码......但现在可以编译了。

```
#include <iostream>
#include <thread>
#include <boost/asio.hpp>

typedef boost::asio::ip::tcp::socket Socket;
auto socket_deleter = [] (Socket* s) {s->close(); delete s;};
/*
typedef std::unique_ptr<Socket, decltype(socket_deleter)> socket_ptr;
*/
typedef Socket* socket_ptr;

class EchoServer {
public:
    static void Listen(unsigned int port)
    {

        using namespace std;
        using namespace boost::asio;

        io_service ios;

        // create an endpoint to listen to a certain port
        ip::tcp::endpoint endpoint(ip::tcp::v4(), port);

        cout << "Listening to TCP Socket on port " << port << " ..." << endl;

        // Start opening a socket
        ip::tcp::acceptor acceptor(ios, endpoint);

        // this loop must be infinite... but we accept only 3 connections
        auto socket = new Socket(ios);

        std::thread t((EchoServer(socket)));
    }

    EchoServer(socket_ptr s) : m_socket(s)
    {
    }

    ~EchoServer()
    {
        m_socket->close();
        delete m_socket;
    }

    void operator ()() const
    {
    }

private:
    socket_ptr m_socket;
}; 
```

将 socket_ptr 更改为简单的指针，而不是代码工作的 unique_ptr。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T23:18:39.073

这是一个函数声明。如果要声明直接初始化的对象，可以使用以下方法之一：

```
std::thread t(EchoServer { socket });
std::thread t { EchoServer(socket) };
std::thread t { EchoServer { socket} };
std::thread t((EchoServer(socket))); 
```

大括号初始化是明确的初始化，在最后一行你有一个带括号的表达式，它不能作为函数参数声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T23:20:22.457

正如您所提到的，该语句有两种可能的解释，但标准明确规定，在这种歧义的情况下，编译器必须将该语句解释为函数定义（删除额外的括号集）：

```
std::thread t(EchoServer socket); 
```

如果您想强制创建 a`std::thread`您可以添加一组额外的括号，使该语句不是有效的函数声明：

```
std::thread t((EchoServer(socket))); 
```

对初始化使用不同的语法：

```
std::thread t = std::thread(EchoServer(socket)); 
```

或者由于您使用的是 C++11，您可以使用*统一初始化*：

```
std::thread t{EchoServer(socket)}; 
```

前两个选项是有效的 C++03，但在 C++11 编译器中您可能应该使用第三个选项（并且使用`std::thread`表示您正在使用 C++11 功能）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T23:18:49.310

在 C++ 2011 中，给定情况下最简单的方法是用大括号替换括号：

```
std::thread t{EchoServer(socket)}; 
```

但是请注意，这保证会调用`std::terminate()`，因为线程既不分离也不连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T23:17:58.970

`static_cast`可以用来触发用户定义的转换，所以试试

```
std::thread t(static_cast<EchoServer>(socket)); 
```

而不是强制转换的构造函数调用语法。

要修复转换失败，请将构造函数更改为：

```
EchoServer(socket_ptr&& s) : m_socket(s)
{
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T23:18:54.810

C 和 C++ 编译器必须在解析时构建关于声明和范围的语义知识，并查阅该知识以了解如何解析某些内容。

扫描标识符时，可以将其转换为词法类别的标记，具体取决于该标识符相对于扫描发生的范围的声明方式。

一个比你的更简单的例子是：

```
A ( B ); 
```

这可能是一个函数调用：函数`A`被调用的参数是主表达式的值`B`。或者，它可能是 name 的声明`B`，它是 type 的对象`A`。

如果我们的词法分析器能够查看在当前范围内可见的声明，它可以确定 A 是否是类型名称，或者它是否被声明为函数。然后，它可以将适当种类的标记传递给解析器，因此适当的短语结构规则将匹配。

# javascript - jQuery Slider 事件没有触发

> ID：13734267
> 
> 赞同：0
> 
> 时间：2012-12-05T23:15:17.207
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

从我假设的一段相当简单的滑块代码来看，这些事件根本不会触发，它让我发疯。不知道我错过了什么，所以任何帮助都会很大。

麻烦的页面可以在这里找到... [http://ardaneworldwide.com/home2.html](http://ardaneworldwide.com/home2.html)

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Ardane Worldwide</title>
        <link rel="stylesheet" type="text/css" href="slider_entry/style.css"/>
    </head>
    <body>
        <div class="wrapper">
            <img src="/slider_entry/header-bg.jpg" />
            <div id="unlock-bottom">
                <div id="slide-to-unlock"></div>
                <div id="unlock-slider-wrapper">
                    <div id="unlock-slider">
                        <div id="unlock-handle"></div>
                    </div>
                </div>
            </div>
        </div>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="/slider_entry/ui.core-1.5.3.js"></script>
        <script type="text/javascript" src="/slider_entry/ui.slider.js"></script>
        <script type="text/javascript" src="/slider_entry/iphone-unlock.js"></script>
    </body>
</html> 
```

**JS**

```
$(document).ready(function(){
    $("#unlock-slider").slider({
        handle: "#unlock-handle",
        animate: true,
        slide: function(e,ui){
            $("#slide-to-unlock").css("opacity", 1-(parseInt($("#unlock-handle").css("left"))/120));
        },
        stop: function(e,ui){
            if($("#unlock-handle").position().left == 205){
                window.location="index.php";
            }
            else {
                $("#unlock-handle").animate({left: 0}, 200 );
                $("#slide-to-unlock").animate({opacity: 1}, 200 );
            }
        }
    });
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:57:58.720

见这里：http: [//jsfiddle.net/vdxWm/](http://jsfiddle.net/vdxWm/)

要触发滑动和停止功能，您需要更新到更新版本的 jquery ui/slider。

最新版本的滑块不允许您覆盖手柄元素，因此您可以针对它设置样式，或者使用一些代码来调整自定义手柄的位置，如下所示。

```
$("#unlock-slider").slider({
    animate: true,
    slide: function(e,ui){
        var han = $("#unlock-handle"),
            con = $("#unlock-slider"),
            left = (con.width() - han.width())/con.width() * ui.value + '%';

        han.css('left', left);

        $("#slide-to-unlock").css("opacity", 1-(parseInt($("#unlock-handle").css("left"))/120));
    },
    stop: function(e,ui){
        if($("#unlock-handle").position().left == 205){
            //window.location="index.php";
            console.log('done');
        }
        else {
            $("#unlock-handle").animate({left: 0}, 200 );
            $("#slide-to-unlock").animate({opacity: 1}, 200 );
        }
    }

}); 
```

# php - 添加成功但返回创建对象失败的 REST 响应代码

> ID：13734268
> 
> 赞同：1
> 
> 时间：2012-12-05T23:15:31.733
> 
> 标签：php, api, rest, status

好的。我想知道在这种情况下可能的 HTTP 状态（响应）代码是什么。

可以说，`POST /Student/`创建一个学生资源。假设有多个表要更新。`Student`资源被创建。

通常，当创建资源时，应立即在响应中返回该资源，并带有`200 Successful`.

但是，假设资源已创建，但当您尝试提取资源（从数据库查询）时失败。我们应该返回什么状态码？

```
 `201 Created`? (No resource)
   '200 Successful`? but without the resource. 
   `500 Internal Server Error`? 
```

还有什么？

我想这是一个相当普遍的情况。

**编辑**

我想澄清这一点。首先，创建资源的所有 ONE POST 调用。响应应`200`使用 JSON 格式的资源对象。但是**只有**在获取资源的过程中才会报错（资源创建成功）。

无法从数据库中获取资源的原因可能是间歇性的，并且可能与服务器/网络相关，并且可以在以后识别和修复。但是资源肯定是成功创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:18:51.303

> 假设资源已创建，但是当您尝试提取资源（来自数据库的查询）时失败

那么资源还**没有**被创建。它*似乎*只是。这肯定是服务器端错误，因此是 5xx 代码。

除非有用户提供的参数导致失败，在这种情况下它将是 4xx 代码。

*更新*：或者如果我误解了，并且您的意思是创建正常并返回了资源 ID，然后随后的有效`GET`查询没有找到该资源，那么，在这种情况下，您的服务器代码中有问题你*应该*早点发出 5xx 错误。一种解决方法可能是创建资源，从资源创建代码发出查询，然后返回 200 或执行清理、重试或在失败时返回 5xx。但真正应该做的是调查导致资源消失或*似乎只是*被创建的原因（例如并发问题、糟糕的事务管理、缓存......）。

## 一个复杂的场景

REST 服务请求创建资源，服务器接受该请求。服务器本身将请求路由到后端，比如说一个数据库，它返回（给服务器）“OK”和一个资源 ID。然后服务器，以防万一，*检查*并询问资源 ID。数据库响应，“没有这样的资源”。

在这种情况下，服务器不能出于良心向其客户端返回 200 代码和资源 ID，除非它有充分的理由怀疑客户端在尝试使用该资源 ID 时会遇到麻烦。之后的错误可能更难发现：可能客户已经发送了电子邮件或执行了涉及该 ID 的复杂操作。

因此，要么返回 500，要么服务器可以尝试修复这种情况，酌情应用以下一项或多项：

*   稍等片刻（客户端仍在等待！）并检查资源是否重新出现
*   尝试刷新缓存或以其他方式促使数据库占用资源
*   使资源无效
*   删除资源（即使它显然不存在）
*   记录错误并将详细信息发送给管理员
*   重复资源创建给定次数（不要太大，否则我们可能会将暂时性问题滚雪球成自我拒绝服务），直到它起作用

如果情况在合理和可容忍的（由客户端）时间内得到解决，则可以使用代码 200 返回工作资源。

当然，上述一切实际发生的原因还需要调查和补救。可能，一些“孤立”资源可能必须定期从数据库中清除（总是一个尴尬的提议）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:33:12.307

您可以选择`201 Created`，因为[它不要求返回创建的实体](https://www.rfc-editor.org/rfc/rfc2616#section-10.2.2)。如果客户端尝试检索它，它将获得一个`500 Server Error`.

如果您想让客户端知道可能的服务器恶作剧，您可以 return `202 Accepted`，因为[它是 non-committal](https://www.rfc-editor.org/rfc/rfc2616#section-10.2.3)。

不管你做什么，我建议你让这个资源是幂等的，因为它看起来有复杂的故障模式，并且客户端可能会重新尝试创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T14:47:02.173

当你说：

> 响应应为 200，资源对象为 JSON。

响应不应该**`201`**，并且应该设置`200`一个标题。`Location:`无需在响应中包含资源表示。如果您想包含它，并且您的代码如下所示：

```
mysql_query('INSERT ...'); // succeeds
$id = mysql_insert_id(); // succeeds
$result = mysql_query('SELECT ...'); // times out 
```

然后只返回没有正文的 201 。如果需要，客户端可以再次尝试获取创建的资源。

# sql - SQL Server 多数据库连接和求和

> ID：13734272
> 
> 赞同：0
> 
> 时间：2012-12-05T23:16:02.263
> 
> 标签：sql, sql-server-2008, join, sum

我有多个数据库，它们都包含相同的结构但不同的内容，A001、A002、A003、A004 ......如下：

```
Code | Desc | A001 | A002 | A003 | A004 
=====+======+======+======+======+=======
ABCD | ABCD |  0   |   1  |   3  |  4 
```

A001的查询如下

```
SELECT AC1.cCode, SUM(AC1.cQtyin) - SUM(AC1.cQtyout) AS A001, AB1.cDes
FROM
A001.dbo.pmStock AC1 
INNER JOIN
A001.dbo.pmProduct AB1 ON AC1.Id = AB1.Prid
GROUP BY AC1.cCode, AB1.cDes 
```

关于如何进行分组有点令人困惑，如果有一种方便的循环方式或其他东西，我不必为每个 A001 到 A020 重复。这在 SQL 中可能吗？特别是使用多个数据库（A001和A002....都是同一台服务器上的不同数据库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:10:59.643

我在我的 iPhone 上，所以打字有点头疼。但是，以下内容可能至少有点可维护。可能值得将子查询放入视图中。

```
SELECT
  Product.cDes,
  Stock.cCode,
  SUM(CASE WHEN Stock.source = 'A001' THEN Stock.amount ELSE 0 END) AS A001,
  SUM(CASE WHEN Stock.source = 'A002' THEN Stock.amount ELSE 0 END) AS A002,
  SUM(CASE WHEN Stock.source = 'A003' THEN Stock.amount ELSE 0 END) AS A003,
  Etc, Etc
FROM
  A001.dbo.Product
INNER JOIN
(
  SELECT 'A001' AS source, id, cCode, cQtyIn - cQtyOut AS amount FROM A001.dbo.pmStock
  UNION ALL
  SELECT 'A002' AS source, id, cCode, cQtyIn - cQtyOut AS amount FROM A002.dbo.pmStock
  UNION ALL
  SELECT 'A003' AS source, id, cCode, cQtyIn - cQtyOut AS amount FROM A003.dbo.pmStock
  UNION ALL
  Etc, etc
)
  AS Stock
    ON Stock.Id = Product.Prid
GROUP BY
  Stock.cCode,
  Product.cDes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:26:02.947

您必须静态指定所有数据库名称、表名称和列（它们必须是常量）。这意味着您可以手动编写此查询或构建 SQL 字符串（在 T-SQL 中或在客户端上）并动态执行它。

# asp.net-mvc-4 - MVC 4 成员资格和角色提供者什么是当今最明智的方法

> ID：13734275
> 
> 赞同：2
> 
> 时间：2012-12-05T23:16:18.050
> 
> 标签：asp.net-mvc-4, membership-provider

我们正在 MVC 4 中构建一个新站点。在检查某人是否被允许登录时有一些稍微不寻常的要求，因此在这种情况下，简单地检查用户名、密码和启用是不够的（还将检查角色）。

我从做传统的自定义membershipprovider 类和roleprovider 开始。MVC4 不喜欢我这样做：

```
This method cannot be called during the application's pre-start initialization phase. 
```

据我了解，这是由于简单的会员提供者和 oauth 的东西，（我对这个领域了解不多）。解决方法似乎是：

```
<add key="enableSimpleMembership" value="false"/>
<add key="autoFormsAuthentication" value="false"/> 
```

这让我想知道，我还应该做会员提供者吗？我的数据库是本地的，我有一个服务层，其中包含所有逻辑来指示用户是否可以登录以及他们拥有哪些角色和权限。我应该查看 oauth / 简单会员资格 / 其他方式，还是如上所述，关闭简单会员资格？

如果我确实通过应用设置将其关闭，那么我是否也可以在稍后阶段集成 oauth（这只是我的想法非常广泛，目前没有这个要求）。是否可以使用多种身份验证机制？

还是真的像这样简单（accountController）：

```
 public ActionResult Login()
    {
        if(logiclayer.CheckAccess("username", "password"))
        {
              var persistCookie = false;
              FormsAuthentication.SetAuthCookie("userName", persistCookie);
        }
        return View();
    } 
```

所以他们的cookie被设置了，然后控制器可以使用这个`[Authorize]`属性吗？这没有考虑到`[Authorize(Roles = "admin")]`，因为如果没有设置角色提供者，这将引发错误，这又回到了最初的问题，即应该如何完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:31:36.920

这里有一个关于这个的讨论 [asp.net 4.5 custom members provider configuration throws奇怪的异常](https://stackoverflow.com/questions/12049926/asp-net-4-5-custom-membership-provider-configuration-throws-strange-exception) 这似乎解决了这个问题但是作为最佳实践我猜它仍然是使用membership provider但是`enableSimpleMembership = false`在配置中设置custommembership

# opencv - Python 在 cv2.destroyWindow() 后冻结

> ID：13734276
> 
> 赞同：9
> 
> 时间：2012-12-05T23:16:23.887
> 
> 标签：opencv, python-2.7

我在 Mac OS X (Lion) 上的 Python 2.7 下使用 openCV...每当我运行代码以简单地显示相机馈送（来自 iSight）时，Python 都会冻结。看起来相机实际上并没有被清理干净。我使用了许多不同版本的相同代码（下面，这是来自关于 SO 的不同问题）并得到相同的结果（无论是在 cv 还是 cv2 中）。有人知道为什么会这样吗？这是代码：

```
import cv2

cv2.namedWindow("camera",1)
capture = cv2.VideoCapture()
capture.open(0)
while True:
    img = capture.read()[1]
    cv2.imshow("camera", img)
    if cv2.waitKey(10) == 27: break
cv2.destroyWindow("camera") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T23:17:51.593

这是所有基于 *nux 的系统的问题。请查看这个问题以及 StackOverflow 上其他问题的答案。

[DestroyWindow 不会在 Mac 上使用 Python 和 OpenCV 关闭窗口](https://stackoverflow.com/questions/6116564/destroywindow-does-not-close-window-on-mac-using-python-and-opencv)

简而言之，您似乎需要为 OpenCV 中的消息泵调用 waitKey()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-24T16:23:30.890

检查这个替代方法， **它需要 ANACONDA 环境** 我的建议是在终端中的 python 中运行代码。你不会遇到任何问题

复制相同的代码并使用 filename.py 保存

```
import cv2
input = cv2.imread('path_to_image.png')
cv2.imshow('Hello World', input)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

然后打开特定目录，然后打开终端

打开终端 -`cd path/to/filename.py`

*   源激活您的个人资料

*   蟒蛇文件名.py

这将解决问题

[https://youtu.be/8O-FW4Wm10s](https://youtu.be/8O-FW4Wm10s)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-05T12:00:20.483

将 cv2.destroyAllWindows 放在 break 之前。它肯定会奏效。

```
if cv2.waitKey(1) & 0xFF == ord('q'):
        stream.release()
        cv2.destroyAllWindows()
        break 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-24T10:21:45.457

您使用的是哪个 IDE？我在使用`default IDE`(IDLE) 时遇到了同样的问题，但是，然后我安装了`PyCharm`，它现在完美运行，图像窗口立即关闭，也使用`waitkey(0)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-19T18:57:13.273

我有同样的问题，这是我的解决方案。

```
if cv2.waitKey(1) & 0xFF == ord('q'):
        break 
```

然后循环放这个

```
cap.release()
cv2.destroyAllWindows() 
```

PD：在这行代码 capture = cv2.VideoCapture() 你应该定义一个相机的值。

```
capture = cv2.VideoCapture(0) 
```

# javascript - 检查复选框和单选是否被选中

> ID：13734277
> 
> 赞同：0
> 
> 时间：2012-12-05T23:16:33.653
> 
> 标签：javascript, javascript-events

我已经完成了关于这个主题的几乎所有答案，我很难想出一个解决方案。

基本上，我试图单击一个按钮，该按钮运行一个检查是否选中了单选按钮或复选框的功能。

稍后我希望能够测试这些选择的不同组合。

这是代码。

```
<html>
<head>
  <script type = "text/javascript">
    function custom_urls(){
      var option1 = document.getElementById("option1");
      var option2 = document.getElementByid("option2");
      var bonus = document.getElementByid("bonus");                                          

      if ( option1.checked ){
        alert("Option1 is checked!");
      }
    }

  </script>
</head>
<body>
  <input type = "radio" id = "option1" > Option1 </input></br>
  <input type = "radio" id = "option1" value = "option2"> Option2 </input></br>
  <input type = "checkbox" id = "bonus" value = "bonus"> Bonus </input></br>
  <button type = "button" onclick = "custom_urls()">Click Me</button> 

</body>
</html> 
```

我也试过把：

```
if(option1.checked == true) 
```

和

```
if(document.getElementById("option1").checked == true) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:21:58.993

看起来你的代码有错别字。它必须是`document.getElementById`：

```
<html>
<head>
  <script type = "text/javascript">
    function custom_urls(){
      var option1 = document.getElementById("option1");
      var option2 = document.getElementById("option2");
      var bonus = document.getElementById("bonus");                                          

      if (option1.checked){
        alert("Option1 is checked!");
      }
    }

  </script>
</head>
<body>
  <input type = "radio" id = "option1" > Option1 </input></br>
  <input type = "radio" id = "option2" value = "option2"> Option2 </input></br>
  <input type = "checkbox" id = "bonus" value = "bonus"> Bonus </input></br>
  <button type = "button" onclick = "custom_urls()">Click Me</button>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:22:48.023

您可以像这样使用简单的解决方案：

```
var checkbox = document.getElementById('checkbox_id');

if (checkbox.getAttribute('checked') !== null) {
    // .. do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:46:57.183

您的代码有几个问题：

```
<input type = "radio" id = "option1" > Option1 </input></br> 
```

输入元素没有内容，也没有结束标签。BR 元素也是空的并且没有结束标记（您已将其写为结束标记）。如果您使用 XHTMl 作为 XML，那么您应该使用

```
<option ... /><br /> 
```

但是没有人将内容作为 XML 提供，所以只需使用纯 HTML。

选项2

重复的 ID 无效。要成功，表单控件必须具有名称属性并且在表单中，它们不需要 ID。单选按钮需要一个具有相同名称的组，如果您只有一个，那么您无法在不重置表单（或使用脚本）的情况下取消选择它。

你的 HTML 应该是这样的：

```
<form>
  <input type="radio" name="rb0" value="option1" > Option1<br>
  <input type="radio" name="rb0" value="option2" > Option2<br>
  <input type="checkbox" name="bonus" value="bonus"> Bonus<br>
  <button type="button" onclick="custom_urls(this)">Click Me</button> 
```

那么你的功能可以是：

```
function custom_urls(button) {
  var form = button.form;
  var option1 = form.rb0[0];
  var option2 = form.rb0[1];
  var bonus = form.bonus;

  if ( option1.checked ){
    alert("Option1 is checked!");
  }
} 
```

# delphi - 打开 Delphi 项目文件 - 打开 DPR 而不是现有的 DPROJ 文件有什么缺点吗？

> ID：13734278
> 
> 赞同：15
> 
> 时间：2012-12-05T23:16:34.503
> 
> 标签：delphi, delphi-xe2

默认情况下，.DPR 和 .DPROJ 的文件扩展名描述是相同的，因此在资源管理器中打开具有相同基本名称的项目文件时，两个文件描述都列为“Delphi Project File”这为开发人员提供了一个选择 -要打开哪个文件？

我通常会打开列出的第二个文件，假设它是 DPROJ。

当有相应的 DPROJ 文件存档时，打开 DPR 有什么缺点吗？IDE 是否能优雅地处理这个问题？

我有时会打开列出的第一个文件，但没有发现任何问题，但这是其中一个尚未得到解答的好奇心。我浏览了帮助，找不到任何东西。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-05T23:47:23.507

*.dpr 文件包含 delphi 源代码，*.dproj 包含项目配置。

打开其中一个，IDE 会自动寻找另一个。

尝试删除 *.dproj 文件并打开（剩余的）*.dpr，IDE 会通知您，将生成一个新的 *.dproj 文件。

不要尝试删除 *.dpr :o)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T00:10:10.993

如果您也使用较旧的 Delphi 版本，这会很方便。例如，您可以`dpr`使用 Delphi 7 打开`dproj`并使用最新版本打开。它允许您在 Windows 资源管理器中双击打开旧项目和新项目。

`Dproj`文件是 MSBuild 兼容文件，用于编译项目。

Delphi IDE 本身实际上并不需要它们来打开项目。但是，该`dproj`文件确实包含设置和版本号，它们存储在`dof`Delphi 2006 及之前的文件中。如果`dproj`找不到该文件，则使用默认设置重新生成该文件，而该文件`dpr`是必需的且不会重新生成。这是不可能的，因为它不仅包含使用列表，还包含应用程序的实际初始化代码。

# android - Eclipse ADT 插件在 Linux 上注销

> ID：13734279
> 
> 赞同：3
> 
> 时间：2012-12-05T23:16:48.730
> 
> 标签：android, linux, eclipse, adt

嗨，我有 debian wheezy 并安装了 eclipse 和 ADT 插件。但是，当我尝试将某些视图“拖放”到布局时，它会使我退出会话。例如，如果我尝试从文本字段中拖放“人名”视图，它会将我注销，并出现 kdm 屏幕。（我有 KDE）。这看起来真的很奇怪。我尝试创建一个新用户，但问题仍然存在，因此它不是用户配置冲突。有任何想法吗？有没有人有类似的问题？

**更新**

正如 Marko 所建议的，我发现了一些 X 日志，似乎存在分段错误。这是我得到的回溯：

```
[ 15630.543] Backtrace:
[ 15630.543] 0: /usr/bin/X (xorg_backtrace+0x36) [0x7fedc274bc66]
[ 15630.544] 1: /usr/bin/X (0x7fedc25cd000+0x1827b9) [0x7fedc274f7b9]
[ 15630.544] 2: /lib/x86_64-linux-gnu/libpthread.so.0 (0x7fedc18f5000+0xf030) [0x7fedc1904030]
[ 15630.544] 3: /usr/bin/X (miResolveColor+0x3) [0x7fedc2729dd3]
[ 15630.544] 4: /usr/bin/X (FakeAllocColor+0x62) [0x7fedc26121a2]
[ 15630.544] 5: /usr/bin/X (0x7fedc25cd000+0x16e3c3) [0x7fedc273b3c3]
[ 15630.544] 6: /usr/bin/X (0x7fedc25cd000+0x16fe4d) [0x7fedc273ce4d]
[ 15630.544] 7: /usr/bin/X (miPointerUpdateSprite+0x29a) [0x7fedc27372da]
[ 15630.544] 8: /usr/bin/X (0x7fedc25cd000+0x16a58d) [0x7fedc273758d]
[ 15630.544] 9: /usr/bin/X (0x7fedc25cd000+0xdb2f3) [0x7fedc26a82f3]
[ 15630.544] 10: /usr/bin/X (0x7fedc25cd000+0x10c7a7) [0x7fedc26d97a7]
[ 15630.544] 11: /usr/bin/X (0x7fedc25cd000+0x5a629) [0x7fedc2627629]
[ 15630.544] 12: /usr/bin/X (0x7fedc25cd000+0x62cc3) [0x7fedc262fcc3]
[ 15630.544] 13: /usr/bin/X (0x7fedc25cd000+0x5c503) [0x7fedc2629503]
[ 15630.544] 14: /usr/bin/X (ProcGrabPointer+0x140) [0x7fedc262c180]
[ 15630.544] 15: /usr/bin/X (0x7fedc25cd000+0x52e31) [0x7fedc261fe31]
[ 15630.544] 16: /usr/bin/X (0x7fedc25cd000+0x41ec5) [0x7fedc260eec5]
[ 15630.544] 17: /lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main+0xfd) [0x7fedc061cead]
[ 15630.544] 18: /usr/bin/X (0x7fedc25cd000+0x4219d) [0x7fedc260f19d]
[ 15630.544] 
[ 15630.544] Segmentation fault at address 0x7fd5c358cdd6
[ 15630.544] 
Fatal server error:
[ 15630.544] Caught signal 11 (Segmentation fault). Server aborting 
```

* * *

正如 Marko 所建议的，我发现了一些 X 日志，似乎存在分段错误。这是我得到的回溯：

```
[ 15630.543] Backtrace:
[ 15630.543] 0: /usr/bin/X (xorg_backtrace+0x36) [0x7fedc274bc66]
[ 15630.544] 1: /usr/bin/X (0x7fedc25cd000+0x1827b9) [0x7fedc274f7b9]
[ 15630.544] 2: /lib/x86_64-linux-gnu/libpthread.so.0 (0x7fedc18f5000+0xf030) [0x7fedc1904030]
[ 15630.544] 3: /usr/bin/X (miResolveColor+0x3) [0x7fedc2729dd3]
[ 15630.544] 4: /usr/bin/X (FakeAllocColor+0x62) [0x7fedc26121a2]
[ 15630.544] 5: /usr/bin/X (0x7fedc25cd000+0x16e3c3) [0x7fedc273b3c3]
[ 15630.544] 6: /usr/bin/X (0x7fedc25cd000+0x16fe4d) [0x7fedc273ce4d]
[ 15630.544] 7: /usr/bin/X (miPointerUpdateSprite+0x29a) [0x7fedc27372da]
[ 15630.544] 8: /usr/bin/X (0x7fedc25cd000+0x16a58d) [0x7fedc273758d]
[ 15630.544] 9: /usr/bin/X (0x7fedc25cd000+0xdb2f3) [0x7fedc26a82f3]
[ 15630.544] 10: /usr/bin/X (0x7fedc25cd000+0x10c7a7) [0x7fedc26d97a7]
[ 15630.544] 11: /usr/bin/X (0x7fedc25cd000+0x5a629) [0x7fedc2627629]
[ 15630.544] 12: /usr/bin/X (0x7fedc25cd000+0x62cc3) [0x7fedc262fcc3]
[ 15630.544] 13: /usr/bin/X (0x7fedc25cd000+0x5c503) [0x7fedc2629503]
[ 15630.544] 14: /usr/bin/X (ProcGrabPointer+0x140) [0x7fedc262c180]
[ 15630.544] 15: /usr/bin/X (0x7fedc25cd000+0x52e31) [0x7fedc261fe31]
[ 15630.544] 16: /usr/bin/X (0x7fedc25cd000+0x41ec5) [0x7fedc260eec5]
[ 15630.544] 17: /lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main+0xfd) [0x7fedc061cead]
[ 15630.544] 18: /usr/bin/X (0x7fedc25cd000+0x4219d) [0x7fedc260f19d]
[ 15630.544] 
[ 15630.544] Segmentation fault at address 0x7fd5c358cdd6
[ 15630.544] 
Fatal server error:
[ 15630.544] Caught signal 11 (Segmentation fault). Server aborting 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:19:14.783

尝试安装适用于 Linux 的 ADT 捆绑包，看看问题是否仍然存在！

# c++ - 对相同基类的引用必须在内存中具有单独的偏移量

> ID：13734282
> 
> 赞同：8
> 
> 时间：2012-12-05T23:16:58.860
> 
> 标签：c++, sizeof, diamond-problem

我发现这个程序的编译器之间存在一些不一致，

```
struct A {
};

struct B : public A {
    float m;
};

struct C : public A {
    B b;
    float n;
};

struct D : public A {
    float n;
    B b;
};

static_assert(sizeof(A) == 1, "");
static_assert(sizeof(B) == 4, "");
static_assert(sizeof(C) == 8, ""); // most compilers say this is 12
static_assert(sizeof(D) == 8, ""); 
```

大多数编译器断言 sizeof(C) == 8 说 sizeof(C) 实际上是 12。我发现的唯一编译器没有并说它是 8 是 Microsoft Visual Studio 2010。

比我更聪明的人告诉我的原因是，在 B 中有两个单独的 A 引用需要保留彼此不同的单独偏移量。首先，从 C 派生的 A 在偏移量 0 处，并且成员 b 内的第二个 A 不能与第一个 A 在 0 处的偏移量相同，因此插入了 4 个字节的填充。

由于大多数编译器已经实现了这种行为，我想知道你需要什么情况来确保两个 A 有不同的引用？寻找一些关于为什么会这样的直觉？

有人说这可能是标准要求的条件，我们很好奇这是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:24:27.353

是的，这在 10p8 中提到：

> 基类子对象的大小可能为零（第 9 条）；但是，**具有相同类类型且属于相同的最派生对象的两个子对象不得分配在相同的地址 (5.10)**。

在`C`你有两个`A`s 中，一个是继承的，另一个是 s 的一部分`B`。微软在不应该的情况下积极而错误地在这里使用了空基类优化。我相信这是已知的错误，但在 Microsoft Connect 上很难找到错误报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T23:31:21.237

该标准明确要求同一类型的每个对象的地址是不同的。相关条款是 5.10 [expr.eq] 第 1 段：

> 相同类型的两个指针比较相等当且仅当它们都为空，都指向同一个函数，或都表示相同的地址（3.9.2）。

这是区分这两个对象所必需的。对象既有值又有身份。对于基类子对象，与包含类具有相同地址是合理的。对于一个类的成员，你可以通过它们的类型来区分这两个对象的身份，即它们具有相同的地址是可以的。对于相同类型的两个对象，您仍然需要一些东西来区分对象的身份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T23:32:26.547

在 C++ 中，一个对象由一对数据唯一确定：它的地址和它的类型。

正如您正确地观察到的那样，两者都`C`包含`D`两个不同的子对象`A`，这必须是正确的。但是，根据您`B`在内存中的布局方式，您可以看到可能无法将两个`A`子对象放在 8 字节结构内的不同地址。

为什么不打印出子对象的实际数字地址？

# css - 使用 IE-CSS3 htc 调整浏览器大小时的框定位样式

> ID：13734287
> 
> 赞同：0
> 
> 时间：2012-12-05T23:17:22.497
> 
> 标签：css, internet-explorer, browser, resize

我一直在使用 CSS3 模拟器开发 IE7/8 兼容性，这个： http: [//fetchak.com/ie-css3/](http://fetchak.com/ie-css3/)

但是，每当我调整浏览器的大小时，受 HTC 文件影响的盒子位置（通过我的 css 文件中的“行为”属性）在定位和溢出方面都会受到影响。

它们有点超出了父容器的宽度边界，改变了溢出行为等。

只是想知道是否有其他人通过解决方案遇到过这个问题。

我已经用尽了元素（以及它们的父元素）上缩放、位置：相对、z-index 属性的许多不同组合。没运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:21:55.340

有史以来最简单的修复.. 放弃了我正在使用的 ie-css3.htc 并实现了 PIE。工作正常.. 写得更好，据我所知。 [http://css3pie.com/documentation/getting-started/](http://css3pie.com/documentation/getting-started/)

# python - 在pygame中绘制到精灵的表面

> ID：13734289
> 
> 赞同：4
> 
> 时间：2012-12-05T23:17:41.410
> 
> 标签：python, pygame

我有几个不同的类扩展了 pygame Sprite 类，最初我只是使用外部图像制作一个 pygame Surface 对象，然后将该图像绘制到我的屏幕上。我有大量的这些精灵，所以我将它们包含在一个 RenderClear 组中，然后为了简单起见清除并绘制该组。这很有效，直到我决定使用 pygame 绘制自己的图形。

我制作了一个图像 Surface，而不是外部图像，并在其上画了一个圆圈，如下所示：

```
pygame.draw.circle(self.image, self.color,
                       (int(self.x), int(self.y)), self.radius, 0) 
```

但是，当我将圆圈绘制到屏幕上时，它不会出现。什么都没有出现，它只是一个透明的表面。

我还测试了用相同的参数直接在屏幕上画一个圆，这很有效，但是如果我画精灵的图像，什么都没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:14:47.763

您需要在类中创建一个更新方法，然后在方法内将圆圈和东西绘制到窗口表面。然后，每次绘制 RenderClear 组时，调用 RenderClear.update() 它将绘制您想要的所有其他内容。

# drupal - 向图像添加 alt 标签 - Drupal

> ID：13734299
> 
> 赞同：0
> 
> 时间：2012-12-05T23:18:09.650
> 
> 标签：drupal, drupal-7, drupal-modules

我想搜索我拥有的每种内容类型中的所有标签。搜索后，我想为每个添加 alt 标签（如果缺少）。有没有可用的模块来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:16:25.867

从未听说过这样的模块，最接近的是[SEO Compliance Checker](http://drupal.org/project/seo_checker)，但它仅在创建或修改节点内容时检查节点内容。

以下是关于如何在不使用任何自定义模块的情况下实现这一目标的一些想法：

1.  通过 phpMyAdmin 手动检查您的数据库并按`field_yourimg_alt`字段对表的行进行排序，以便您可以轻松找到缺少其值的位置。

2.  创建一个新视图，其中输出所有图像（或隐藏它们，如果有几十张图像）及其 alt 标签（将 alt 标签作为纯文本输出将在您的字段配置中的替换模式中可用）。因此，当您输出所有带有 alt 标签的图像时，很容易注意到没有此标签的图像。此外，为了更简单，您可以将字段输出为可排序的表格，因此所有缺少 alt 标签的图像都将位于列表顶部（或者您可以尝试在视图中添加特定的排序条件，不确定当然，但我希望它会起作用）。只输出没有 alt 标签的图像会很完美，但现在我不知道该怎么做，抱歉。

3.  创建自己的模块。

所以我想如果你管理的网站不是很大并且只需要检查一次 alt 标签，#1 提示将是一个不错的选择。如果有必要定期检查 alt 标签和/或您有数十张图像，请尝试使用 Views 以创建您想要的内容。

# javascript - 缓存 Javascript/jquery 事件

> ID：13734302
> 
> 赞同：2
> 
> 时间：2012-12-05T23:18:32.167
> 
> 标签：javascript, jquery, html, performance, http

不太清楚该怎么称呼它，但这是我的抽象问题：

*往复时，为什么有些浏览器不记得打开了什么而有些会？*

例如，

鉴于以下情况：

### html

```
<h2>&raquo; <a href="#" id="clickMe">Click Me</a></h2>
<div id="hiddenContent">
    <h2> Meaty Filler </h2>
    <p>
       Bacon ipsum dolor sit amet deserunt venison dolor meatball laboris short loin dolore capicola prosciutto. Tongue cillum salami, drumstick strip steak do spare ribs ball tip proident short loin ullamco ex tempor. Fugiat labore in ut quis ribeye turducken pig beef. Corned beef ham proident, nisi adipisicing bresaola irure kielbasa pig. T-bone nisi ham hock consequat laborum est exercitation dolor shoulder biltong velit qui sunt. Ut chuck esse short ribs turducken, pork loin id.
    </p>
    <p>
Nulla sunt aute meatloaf drumstick pork. Drumstick deserunt capicola aliqua flank leberkas brisket consectetur. Pork belly meatloaf proident, deserunt tri-tip voluptate aliqua. Commodo minim consequat, shoulder tenderloin eiusmod laborum excepteur flank reprehenderit in.
    </p>
   &raquo; <a href="http://baconipsum.com/">  Get Me Some Bacon</a>
</div>
        ​ 
```

## javascript/jquery

```
$('#clickMe').click(function(e) { 
   e.preventDefault();
   $('#hiddenContent').fadeToggle();        
})​ 
```

## css

```
#hiddenContent {display: none; border: 1px solid #ccc; background: #fcfcfc; padding: 1em; margin: 2em; border-radius: .25em; box-shadow: 2px 5px 10px #DBDBDB;} 

#hiddenContent:hover { background: #FBFBFB; } 
h2 { font: 1.5em/1.75em Georgia, serif; } 
p { margin: 0 0 1em; font: 1em/1.25em Georgia, serif; text-align: justify; } 
a { color: #444; text-decoration: none;} 
a:hover { text-decoration: underline; color: #222; }​ 
```

当我点击“给我一些培根”并点击后退按钮时，铬和 IE8 将不记得它`#hiddenContent`是打开的，不再隐藏，但 Firefox 会。理想情况下，我更愿意模仿 firefox 的行为，但不确定我是否能够。这可能吗？

[这是一个不**工作**的jsfiddle](http://jsfiddle.net/nnjBs/embedded/result/)。当您回击时，jsfiddle 会显式重新加载页面，但在我的（基于 struts - java 的）Web 应用程序中，我已将响应设置为显式缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:45:13.943

因此，听起来您希望浏览器在您返回页面加载**后记住页面上的更改。**Firefox 的页面缓存在某些情况下确实如此，但在其他浏览器中您不能指望它。

我认为您想要做的是在取消隐藏内容时更新 URL 哈希（或片段）。这将在浏览器的历史记录中添加一个新条目。

然后在同一页面上，您要检查页面加载时的哈希以确定是否显示隐藏内容。

```
$('#clickMe').click(function(e) { 
    e.preventDefault();
    window.location.hash = 'show'
    $('#hiddenContent').fadeToggle();        
})​ 
```

并添加这个

```
$(document).ready(function() {
    if(window.location.hash == 'show')
        $('#hiddenContent').show();
}); 
```

然后，当您回击时，#show 将出现在 URL 中。准备就绪后，您可以检查该值并显示内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:29:34.340

看起来这可能是不可能的（或者至少以一种*始终*可以保证工作的方式），因为它是依赖于浏览器的行为。Chromium 和 IE 中可能有一些设置可以用来模仿 Firefox 的行为，但这些设置是浏览器用户的域，因此在很大程度上不受您的控制。

还要看看这个相关的问题：[浏览器中的后退/前进是否会更改 javascript 变量？](https://stackoverflow.com/questions/2323352/does-back-forward-in-the-browser-change-javascript-variables)

# process - 在 Windows 8 Metro 应用程序中启动进程

> ID：13734315
> 
> 赞同：2
> 
> 时间：2012-12-05T23:19:07.823
> 
> 标签：process, microsoft-metro

如何通过 Windows 8 Metro 应用程序中的代码启动 rasphone.exe 之类的进程？有 System.Diagnostics.Process 但 Metro 应用程序中的 System.Diagnostics 不包含进程

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:39:15.870

所有 Metro 风格的应用程序都在高度沙盒环境中工作，无法直接启动外部应用程序。

您可以尝试使用[Launcher](http://msdn.microsoft.com/en-us/library/windows/apps/br241801.aspx)类 - 取决于您的需要，它可能会为您提供可行的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:02:38.930

卡尔的回答是对的。不过，您可以使用一个技巧：创建一个没有 UI 的普通 .NET 应用程序，该应用程序获取在具有专用扩展名（如 .launcher）的文件中传递的可执行文件的名称。此应用程序将启动通过 Process 类传递的应用程序。在 Windows 8 中，专用扩展必须与启动器应用程序相关联。不幸的是，这必须手动完成（或者可能使用用户必须执行的小型设置应用程序）。

然后，您可以在 Windows Store App 中创建一个带有可执行文件路径的 .launcher 文件，并通过 Launcher 类启动它。

# hibernate - 更新问题

> ID：13734318
> 
> 赞同：1
> 
> 时间：2012-12-05T23:19:27.293
> 
> 标签：hibernate, jpa

我正在尝试更新一个应用程序上的一些数据并将 JMS 事件发送到不同的 JBOSS 服务器。侦听器将获取事件并尝试使用带有 dblink 的数据库视图读取数据。

最初，此视图没有该 ID 的数据。我使用其他应用程序更新数据，并在提交 JMS 事件后使用该 ID 发送。一旦侦听器收到此 ID，它将使用数据库视图获取数据。

我的问题是，在使用 JPA/HIBERNATE 读取时，它仍在读取作为空白的旧数据。

调用dao层的服务层正在使用以下事务

```
 @Transactional(readOnly = true, propagation = Propagation.NOT_SUPPORTED)

    The DAO Layer is using 
    @PersistenceContext
    private EntityManager em;

    Query query = em.createNativeQuery(sbQuery.toString()); 
```

我尝试了以下所有选项，但它似乎不起作用。

```
 em.clear();
    em.getEntityManagerFactory().getCache().evictAll();
    em.flush();
    query.setHint("javax.persistence.cache.storeMode", CacheStoreMode.BYPASS); 
```

注意：它起作用的唯一方法是，在我收到事件后，如果我执行了一个staright jdbc，我可以从该视图中获取数据，但使用 spring/hibernate 配置时，它会显示为空白。

任何想法为什么它不能正常工作，为什么我需要对调用做一个staright jdbc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:35:31.877

这看起来像是在提交发送者的事务之前接收到消息的标准场景。要使其正常工作，您需要在事务提交后发送消息。使用 spring，您可以通过以下方式执行此操作`TransactionSynchornization`：

```
TransactionSynchronizationManager.registerSynchronization(new  
         MessageQueueTransactionSynchronization(jmsSender, message)); 
```

where`MessageQueueTransactionSynchronization`实现并在触发`TransactionSynchronization`时发送消息`afterCompletion(..)``status = TransactionSynchronization.STATUS_COMMITTED`

# windows-8 - Windows 8 JavaScript 共享魅力 - “此应用无法共享。”

> ID：13734322
> 
> 赞同：0
> 
> 时间：2012-12-05T23:19:57.153
> 
> 标签：windows-8

我的 Windows 8 应用程序允许在 1 个页面（高分页面）上共享，效果很好，但由于共享代码仅在高分页面上，应用程序说“此应用程序无法共享”。当用户尝试在高分页面以外的页面上分享时。

它应该说“现在没有什么可分享的”。为了解决这个问题，我在主页添加了共享代码，这解决了问题，但在高分页面上破坏了共享，我收到此错误“0x8000000e - JavaScript 运行时错误：在意外时间调用了一个方法。”

我的主页 JavaScript 代码是：

```
(function () {
    "use strict";

    // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    var storage = Windows.Storage;
    var dtm2 = Windows.ApplicationModel.DataTransfer.DataTransferManager;
    // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    WinJS.UI.Pages.define("/pages/home/home.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.
        ready: function (element, options) {
            // TODO: Initialize the page here.

            // Initialize everything
            initialize();

            // Button listeners
            var add = document.getElementById("add");
            add.addEventListener("click", this.linkClickEventHandler, false);

            var sub = document.getElementById("sub");
            sub.addEventListener("click", this.linkClickEventHandler, false);

            var mul = document.getElementById("mul");
            mul.addEventListener("click", this.linkClickEventHandler, false);

            var div = document.getElementById("div");
            div.addEventListener("click", this.linkClickEventHandler, false);

            // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            dtm2.getForCurrentView().addEventListener("datarequested", this.onDataRequested);
            // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        },

        linkClickEventHandler: function (eventInfo) {
            ope = this.id;
            var link = "/pages/quiz/quiz.html";
            WinJS.Navigation.navigate(link);
        },

        // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        onDataRequested: function (e) {

        },
        // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        unload: function () {
            // TODO: Respond to navigations away from this page.

            // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            WinJS.Navigation.removeEventListener("datarequested", this.onDataRequested);
            // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        },
    });
})(); 
```

我的高分页面的 JavaScript 代码是：

```
// For an introduction to the Page Control template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232511
(function () {
    "use strict";

    // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    var storage = Windows.Storage;
    var dtm = Windows.ApplicationModel.DataTransfer.DataTransferManager;
    // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    WinJS.UI.Pages.define("/pages/results/results.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.
        ready: function (element, options) {
            // TODO: Initialize the page here.

            // Show results
            showResults();

            // Button listeners
            var btnHome = document.getElementById("btnHome");
            btnHome.addEventListener("click", this.linkClickEventHandler, false);

            // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            dtm.getForCurrentView().addEventListener("datarequested", this.onDataRequested);
            // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        },

        linkClickEventHandler: function (eventInfo) {
            var link = "/pages/home/home.html";
            WinJS.Navigation.navigate(link);
        },

        // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        onDataRequested: function (e) {
            var request = e.request;
            request.data.properties.title = "Your Simple Math Results";

            var message = shareLine1 + " ";
            message += shareLine2 + " ";
            message += shareLine3;
            request.data.setText(message);
        },
        // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        unload: function () {
            // TODO: Respond to navigations away from this page.

            // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            WinJS.Navigation.removeEventListener("datarequested", this.onDataRequested);
            // SHARING //////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        },

        updateLayout: function (element, viewState, lastViewState) {
            /// <param name="element" domElement="true" />

            // TODO: Respond to changes in viewState.
        }
    });
})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:34:48.763

当您离开页面时，您需要取消附加“datarequested”事件。也就是说，当按下后退按钮时：

```
dtm2.getForCurrentView().removeEventListener("datarequested", this.onDataRequested); 
```

# javascript - ScrollTo 目标：_parent 在 chrome 中不起作用

> ID：13734323
> 
> 赞同：0
> 
> 时间：2012-12-05T23:19:57.620
> 
> 标签：javascript, jquery, parent, scrollto

我在父 Web（使用 jquery）中有一个 iframe，它有一个链接可以在父 Web 中找到

```
<a href="javascript:$.scrollTo(100,800);" target="_parent">Go Up</a> 
```

它适用于野生动物园和资源管理器，但不适用于 chrome ......有什么建议可以让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:22:35.820

你有没有尝试过 ？

```
<a href="javascript:parent.$.scrollTo(100,800);" target="_parent" >Go Up</a> 
```

# sse - SSE 性能与普通代码

> ID：13734326
> 
> 赞同：0
> 
> 时间：2012-12-05T23:20:06.500
> 
> 标签：sse, simd

我正在尝试提高某些算法的性能。所以为了方便比较，我做了两个版本的代码，一个是正常执行，一个是使用sse。但是，sse版本比普通版本慢8倍，我找不到原因，谁能帮我指出来？

普通版（需要 2 秒）：

```
#include <stdio.h>
#include <pthread.h>
#include <stdlib.h>
#include <malloc.h>

typedef struct
{
 unsigned int L;
 unsigned int M;
 unsigned int H;

}ResultCounter;

void add(unsigned int N, ResultCounter *counter);
void resetCounter(ResultCounter *counter);

void add(unsigned int N, ResultCounter *counter)
{

// low bit half adder
 unsigned int Lcarry = counter->L &N;
 counter->L = counter->L ^ N;
 // middle bit half adder
 unsigned int Mcarry = counter->M &Lcarry;
 counter->M = counter->M ^ Lcarry;
 // last bit saturates
 counter->H = counter->H | Mcarry;
}

void resetCounter(ResultCounter *counter){
counter->L = 0;
counter->M = 0;
counter->H = 0;
}

int main()
{
  int i;

  ResultCounter *counter = (ResultCounter*)malloc(sizeof(ResultCounter));
  resetCounter(counter);

for(i=0;i<=500000000;i++)
 {
   add(i,counter);
   add(i+1,counter);
   add(i-2,counter);
   add(i-3,counter);
 }
printf ("counter.L:%d,counter.M:%d,counter.H:%d\n",counter->L,counter->M,counter->H);
free(counter);

return 0;
} 
```

SSE 版本（需要 16 秒）：

```
#include <stdio.h>
#include <pthread.h>
#include <stdlib.h>
#include <malloc.h>
#include <x86intrin.h>

typedef struct
{
unsigned int L;
unsigned int M;
unsigned int H;
unsigned int unused;

}ResultCounter;

 void add_sse (unsigned int first, unsigned int second, unsigned int third, unsigned int fourth, ResultCounter *c);
void resetCounter(ResultCounter *c);

 void add_sse(unsigned int first, unsigned int second, unsigned int third, unsigned int fourth, ResultCounter *c){

__attribute__((align(16))) int m_intarray[4] = {first, second, third,fourth};
__attribute__((align(16))) int m_Larray[4] = {c[0].L, c[1].L, c[2].L,c[3].L};
__attribute__((align(16))) int m_Marray[4] = {c[0].M, c[1].M, c[2].M,c[3].M};
__attribute__((align(16))) int m_Harray[4] = {c[0].H, c[1].H, c[2].H,c[3].H};

__m128i N = _mm_load_si128(&m_intarray[0]);
__m128i L = _mm_load_si128(&m_Larray[0]);
__m128i M = _mm_load_si128(&m_Marray[0]);
__m128i H = _mm_load_si128(&m_Harray[0]);

__m128i Lcarry = _mm_and_si128 (L, N);
L = _mm_xor_si128 (L, N);
__m128i Mcarry = _mm_and_si128 (M, Lcarry); 
M = _mm_xor_si128 (M, Lcarry);
H = _mm_or_si128 (H,Mcarry);

_mm_store_si128(&m_Larray[0], L);
_mm_store_si128(&m_Marray[0], M);
_mm_store_si128(&m_Harray[0], H);

c[0].L = m_Larray[0];

c[0].H = m_Harray[0];   
c[1].L = m_Larray[1];
c[1].H = m_Harray[1];
c[2].L = m_Larray[2];
c[2].H = m_Harray[2];
c[3].L = m_Larray[3];
c[3].H = m_Harray[3];

 c[0].M = m_Marray[0];
 c[1].M = m_Marray[1];
 c[2].M = m_Marray[2];
 c[3].M = m_Marray[3];

}

void resetCounter(ResultCounter *c){
int i;
 for (i = 0; i < 4; i++){

    c[i].L = c[i].M = c[i].H = c[i].unused=0;
 }
}
void printCounter(ResultCounter *c){
int i;
 for (i = 0; i < 4; i++){
  printf ("***\n%d::L=%d,M=%d,H=%d\n",i,c[i].L, c[i].M ,c[i].H);
 }
}

int main()
{
   int i;

    ResultCounter *c_sse=(ResultCounter *)memalign(16,sizeof(ResultCounter)*4); 
    resetCounter(c_sse);

    for(i=0;i<=500000000;i++)
    {
       add_sse(i, i+1, i-2, i-3, c_sse);
    }
    printf ("c_sse[0].L:%d,c_sse[0].M:%d,c_sse[0].H:%d\n",c_sse[0].L,c_sse[0].M,c_sse[0].H);
     free(c_sse);

     return 0;
} 
```

# ruby-on-rails - 如何在 Rails 的数据库中安全地存储外部 API 的密码？

> ID：13734329
> 
> 赞同：1
> 
> 时间：2012-12-05T23:20:12.520
> 
> 标签：ruby-on-rails

我正在构建一个需要用户登录的 Rails 应用程序。应用程序还需要为用户存储登录名和密码，以访问外部 API 的资源。我正在使用`bcrypt-ruby`我的应用程序登录，但我不确定为外部站点存储用户名和密码的最佳方式。我可以就如何最好地做到这一点提出一些建议。

是否可以扩展`has_secure_password`两种登录的方法（我的应用程序的登录和外部 API）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:43:31.730

如果您需要对来自第三方网站的用户进行身份验证，并且您可以控制第三方网站，那么现在使用的最佳协议可能是[oauth](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31)。

现在，为了存储用户的用户名和密码，用硬协议加密用户/密码到加密算法，如 bcrypt，就足够了，如果有人能够通过某种方式获得 bcrypt 字符串，他将能够在您的网站上进行身份验证，但不能在第三方网站上进行身份验证，因为他将无法解密使用 bcrypt 加密的用户/通行证。

# java - Java Minecraft 插件

> ID：13734335
> 
> 赞同：1
> 
> 时间：2012-12-05T23:20:43.843
> 
> 标签：java, minecraft, bukkit

我遇到了非常奇怪的错误，错误，我知道不应该发生。

错误：

> 标记“}”上的语法错误，删除此标记在两行上。

```
package me.itunes89.test;

import java.util.logging.Logger;

import org.bukkit.ChatColor;
import org.bukkit.command.Command;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;
import org.bukkit.plugin.PluginDescriptionFile;
import org.bukkit.plugin.java.JavaPlugin;

public class Test extends JavaPlugin{
    public final Logger logger = Logger.getLogger("Minecraft");
    public static Test plugin;

    @Override
    public void onDisable(){
        PluginDescriptionFile pdfFile = this.getDescription();
        this.logger.info(pdfFile.getName() + " Has been disabled!");
    }

    @Override
    public void onEnable(){
        PluginDescriptionFile pdfFile = this.getDescription();
        this.logger.info(pdfFile.getName() + " Version " + pdfFile.getVersion() + " Has been enabled!"); //You
    }
} //Here

public boolean onCommand(CommandSender sender, Command cmd, String commandLabel, String[] args)
{
    Player player = (Player) sender;
    if (commandLabel.equalsIgnoreCase("sendme"))
    {
        player.sendMessage(ChatColor.BLUE + "Sent");
    }
    return false;
} // and here 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:25:01.860

您过早地关闭了课程范围。您需要删除包含大括号的行：

```
} //Here 
```

而是将其移动到文件的末尾。

# php - 如何使用 PHP echo 函数在 JavaScript 中定义变量？

> ID：13734338
> 
> 赞同：2
> 
> 时间：2012-12-05T23:21:10.623
> 
> 标签：php, javascript, html

如何从外部 php 文件中使用 echo 函数在 javascript 中定义变量？

我们有**configfile.php**、**thejsfile.js**和**thephpfile.php**。

 ****在**configfile.php**我们有：

```
<?php
$path = 'http://example.com/home.php'; // Set your path
?> 
```

在**jsfile.js**我们有：

```
... 
if (confirm("Are you sure you want to delete")) {
        $.ajax({
            type: "POST",
            url: "http://example.com/home.php",
            data: dataString,
            cache: false
        });
... 
```

在**phpfile.php**我们有：

```
 <php 
    include "theconfigfile.php";
    ?>

    <html>
    <head>
    <script type="text/javascript" src="thejsfile.js"></script>
    </head>

<body>
...here is the code that uses file thejsfile.js...
</body>
</html> 
```

我使用了这种方法：

```
... 
if (confirm("Are you sure you want to delete")) {
        $.ajax({
            type: "POST",
            url: "<?php echo $path; ?>",
            data: dataString,
            cache: false
        });
... 
```

仅当 javascript 是代码的一部分时才有效。如果我在外部使用它，就像这样......

```
<script type="text/javascript" src="thejsfile.js"></script> 
```

...不起作用！解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:29:13.200

有几种方法可以做到这一点。

您可以配置您的网络服务器以处理`.js`带有 PHP 扩展名的文件，然后将您的 PHP 注入那里。当然，这意味着您需要一种方法来实际计算您的变量，这会减慢您提供常规 javascript 内容的速度。

您可以简单地将 PHP 变量输出到这样的`<script>`元素中的 Javascript 变量

```
<script type="text/javascript">
var path = "<?php echo $path; ?>";
</script> 
```

`path`然后在你的 AJAX 中访问这个变量。大多数人可能会使用第二种方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T23:29:17.153

您可以将您的重命名`thejsfile.js`为`thejsfile.php`，将以下内容添加到它的**最开始**，它应该被解析为 PHP：

```
<?php header("Content-type: text/javascript"); ?> 
```

然后像这样引用它：

```
<head>
<script type="text/javascript" src="thejsfile.php"></script>
</head> 
```

您的另一个选择是仅将您的服务器设置为解析`.js`PHP 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T23:26:12.647

在phpfile.php中，

```
<html>
<head>
<script type="text/javascript">
    var config = { url: '<?= $path; ?>' };
</script>
<script type="text/javascript" src="thejsfile.js"></script>
</head> 
```

然后你可以在你的 javascript 中使用 config.url 访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T23:40:03.713

除非您通过 JSONP 向另一台服务器发布帖子，否则您可能只考虑使用在 Javascript 中硬编码的相对路径，这样您就不需要将路径从服务器发送到客户端：

```
...
    $.ajax({
        type: "POST",
        url: "home.php",
        data: dataString,
        cache: false
    });
.... 
```

但是，如果这是一个经常更改的 URL，并且确实需要可配置，那么您可以将 PHP 变量作为类似这样的脚本回显“

```
<html>
...
<script src="thejsfile.js" type="text/javascript">
<script type="text/javascript">
    // 'path' is a variable that is defined in thejsfile.js
    path = '<?php echo htmlentities($path)  ?>';
</script>

... 
```

每当您将信息从服务器输出到客户端（尤其是作为 Javascript）时，您必须非常小心它被转义以防止脚本攻击（即允许人们将 javascript 注入您的代码）。在这种情况下，没有理由允许任何类型的 html 字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T23:41:04.490

使用外部 JS 文件时，您可以将值存储在隐藏字段中并使用 JavaScript 检索字段值。

```
<input type="hidden" name="path" id="path" value="<?php echo $path; ?>" /> 
```

并在 javascript 中（我将使用 jquery）

```
var path = $('#path').attr('value'); 
```

显然，您可以将变量写入页面上的脚本标签，但如果您使用任何高级类型的模式，则可能很难访问该变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T23:26:19.123

您只能以这种方式将值放入 PHP 处理的文件中。
外部 JavaScript 文件不由 PHP 处理，因此它们按原样链接，无需替换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-09T06:05:53.197

```
echo "<script type='text/javascript'>var AccomodationInfoForm4 =".$path."</script>"; 
```

只需尝试回显上面显示的方式，您就可以在任何地方访问您的变量。因为这将`js`在您页面上的所有文件中全局可用。****

# java - CreateProcess error=2, 系统找不到 Roo 中指定的文件

> ID：13734340
> 
> 赞同：5
> 
> 时间：2012-12-05T23:21:34.730
> 
> 标签：java, spring, maven, spring-roo

我尝试使用 Roo Shell 命令运行我的第一个 Roo 应用程序。但是当我尝试执行测试时，它会出错

```
CreateProcess error=2,The system cannot find the file specified. 
```

我检查了一下，我的`PATH`变量设置为以下。还有什么我做错了吗？

> 路径 :=C:\SpringSource\springsource\spring-roo-1.2.2.RELEASE\bin;C:\SpringSource\springsource\apache-maven-3.0.4\bin;C:\Program Files\Java\jdk1.7.0 \垃圾桶;

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:27:11.000

That error message usually has the name of the command it can't find preceding it. Check if that command is in your path.

# python - Mac 上 Eclipse IDE 中的 Python Kivy

> ID：13734341
> 
> 赞同：1
> 
> 时间：2012-12-05T23:21:44.967
> 
> 标签：python, eclipse, frameworks, ide, kivy

我正在尝试在 Eclipse IDE 中使用用于 python 的 Kivy 库。我已经尝试了一些我在谷歌上找到的解决方案，但它们似乎都不起作用。我正在使用带有 python 2.7 的 Mac OSX 10.7。

我已经使用命令安装了 kivy setup.py 文件

```
python setup.py install 
```

我现在如何在 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ 中创建一个 kivy 文件夹。在 Eclipse 中，我转到 Preferences->PyDev->Interpreter 并在其中添加库我添加该路径并应用更改。在编写 python 代码时，我现在可以毫无错误地从 kivy 导入我需要的所有内容，并使用 kivy 模块编写代码完成代码。当我尝试使用代码运行项目时，

```
import kivy
from kivy.app import App
from kivy.uix.widget import Widget

class PongGame(Widget):
    pass

class PongApp(App):
    def build(self):
        return PongGame()

if __name__=='__main__':
    PongApp().run() 
```

我得到错误，![基维python错误](../Images/38f909f63e9f0272a4f2cbe65f73c248.png)

如何设置 Eclipse，以免出现此错误，并且可以直接从 Eclipse 运行 Kivy 程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:42:51.647

在最近的[Google Groups 帖子](https://groups.google.com/forum/#!topic/pygame-mirror-on-google-groups/PwRRPuNe1pg)中，Russell Owen 概述了他如何为 Mac OS X 10.6 (Snow Leopard) 构建 64 位版本的[PyGame](http://www.pygame.org) 1.9.1，并且还提供了[预构建的 64 位 PyGame OS X 二进制文件的 URL dmg](http://www.astro.washington.edu/users/rowen/python/pygame-1.9.1release-py2.7-python.org-macosx10.6.dmg)文件！

[pygame-1.9.1release-py2.7-python.org-macosx10.6.dmg](http://www.astro.washington.edu/users/rowen/python/pygame-1.9.1release-py2.7-python.org-macosx10.6.dmg)

罗素的指示是：

```
Building pygame 1.9.1 on Mac OS X 10.6 using XCode 3.2.6
2012-04-12
I was building this for a binary distribution that would run against python.org's 64-bit Python 2.7.2, for use on Mac OS X 10.6 and later.

* Install dependencies:

- libjpeg (use ./configure, make, sudo make install)
- SDL and extra packages (use precompiled framework builds):
  - SDL
  - SDL_mixer
  - SDL_image
  - SDL_ttf
- portmidi (use CMake as per the instructions)

* Delete shared libraries in /usr/local/lib (if you want to build a binary installer that can be used elsewhere).

* Check for /usr/local/lib/portmidi.a and if not found, make it a symlink from /usr/local/lib/portmidi_s.a or whatever portmidi got installed.

* Modify config_darwin.py to include '/usr/X11/include' and '/usr/X11/lib':
    incdirs = ['/usr/X11/include', '/usr/local/include']
    libdirs = ['/usr/X11/lib/', '/usr/local/lib']

(since libpng and libfreetype are standard in /usr/X11)

* Configure pygame and make sure it finds everything:

python config.py

As of 2012-04-12 on Mac OS X 10.6 I found that png was NOT found. I have no idea why, but I went ahead and installed it manually.

Also SCRAP is not found, but apparently that is normal for Mac OS X.

* Build pygame normally

python setup.py build
bdist_mpkg (or sudo python setup.py install if you don't want a binary installer) 
```

希望这些说明适用于更新版本的 OS X 和 XCode（如果可以，请告诉我们）。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:31:56.070

查看输出中的导入错误，您似乎需要安装 pygame 和 PIL。

pygame 安装看起来很棘手，但有一个使用 homebrew 安装 pygame 的指南：

[https://bitbucket.org/pygame/pygame/issue/82/homebrew-on-leopard-fails-to-install#comment-627494](https://bitbucket.org/pygame/pygame/issue/82/homebrew-on-leopard-fails-to-install#comment-627494)

如果您安装了 Xcode，理论上您应该能够执行“easy_install PIL”或“pip install PIL”（如果您正在使用分发）。

# drupal - 视图中未出现预处理字段

> ID：13734349
> 
> 赞同：1
> 
> 时间：2012-12-05T23:22:23.713
> 
> 标签：drupal, drupal-6, drupal-views

我有一个带有可选 CCK 字段“field_source”的新闻内容类型。这适用于外部新闻项目，例如雅虎新闻上的内容。在视图中，我有一个将节点标题链接到 field_source 的显示。如果内容作者没有提供 field_source，我希望它默认为 node->path。

为此，我创建了一个预处理函数并将其添加到我的 template.php 文件中。问题是视图没有使用更新的值。我需要将功能放在其他地方吗？

```
function content_preprocess_content_field(&$vars) {
  if ($vars['field']['field_name'] == 'field_source') {
    $source = $vars['items'][0]['url'];
    $node = $vars['element']['items'][0]['#node'];
    if (empty($source)) {
      $vars['items'][0]['url'] = $node->path;                                                                                                 } 
  } 
} 
```

TIA，亚伦

# fluent-nhibernate - 将列的内容设置为相同的值

> ID：13734353
> 
> 赞同：1
> 
> 时间：2012-12-05T23:22:54.627
> 
> 标签：fluent-nhibernate

我的域库中有以下功能设置：

```
 public void SetProcessFlag<T>(bool flag)
    {
        string tableName = typeof(T).ToString().Replace("MyBase.Core.Domain.", "");

        string sql = string.Concat("update ", tableName, " set ImportProcessed = '" , (flag?"1":"0"), "';");
        Framework.FluentSessionManager.GetSession()
            .CreateSQLQuery(sql)
            .ExecuteUpdate();
    } 
```

我有一个“目录”模式和“零件”表的映射。它包含一个映射列“ImportProcessed”作为 Bool。

现在，当我想将“ImportProcesses”列设置为 true 时，我调用的是这样的：

```
new Parts().SetProcessFlag<Parts>(true); 
```

这工作得很好。我不喜欢假设记录集声明的文件夹与架构具有相同的名称。

是否可以做同样的事情？：

```
Framework.FluentSessionManager.GetSession()
.CreateCriteria(typeof(T))
.... 
```

甚至更优雅的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:05:40.510

使用 HQL，它就是为此而生的

```
var rowsaffected = session.CreateQuery("UPDATE Part p SET p.Processed=:processed")
    .SetParameter(":processed", true)
    .ExecuteUpdate(); 
```

# vba - 在 Outlook 对象上找不到方法或数据成员

> ID：13734354
> 
> 赞同：-1
> 
> 时间：2012-12-05T23:22:54.137
> 
> 标签：vba, outlook

就像主题行所说的那样，我在以下代码中收到了这个愚蠢的错误消息“找不到方法或数据成员”。我不确定我需要做什么来修复它。这可能是愚蠢的事情吧？在我创建变量的地方，您会注意到一个名为 tempMailItem。它是 Outlook.MailItem 类型。当我单击点运算符时，MailItem 是成员之一。但是，当我在进行强制转换的 Outlook 对象上键入点运算符时，突然 MailItem 不是该对象的成员之一。我不明白！这是怎么回事？

艾伦

```
Sub MoveHarpStatMail()

Dim olapp As Outlook.Application
Dim olappns As Outlook.NameSpace
Dim oitem As Object
Dim ItemsToProcess As Outlook.Items
Dim myFolder As MAPIFolder
Dim sFilter As String
Dim tempMailItem As Outlook.MailItem

On Error GoTo LocalErr

'set outlook objects
Set olapp = New Outlook.Application
Set olappns = olapp.GetNamespace("MAPI")
Set myFolder = olappns.GetDefaultFolder(olFolderInbox)
'Filter or only MailItems received today
sFilter = "[ReceivedTime] >= " & AddQuotes(Format(Date, "ddddd"))
Set ItemsToProcess = Session.GetDefaultFolder(olFolderInbox).Items.Restrict(sFilter)

For Each oitem In ItemsToProcess
 If TypeName(oitem) = "MailItem" Then
   Set tempMailItem = DirectCast(oitem, Outlook.MailItem) '<<<< Problem is here with Outlook object
   If CheckSubject(tempMailItem.Subject) Then
     MoveToArchiveFolder (tempMailItem)
  End If
 End If
Next oitem

ExitProc:
Set olapp = Nothing
Set olappns = Nothing
Set myFolder = Nothing
Set ItemsToProcess = Nothing

Exit Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:38:40.833

VBA中没有`Directcast`。利用：

```
Set tempMailItem = oitem 
```

# c# - SyndicationFeed RSS 阅读器 pubDate：解析日期时间值时遇到错误

> ID：13734355
> 
> 赞同：0
> 
> 时间：2012-12-05T23:22:59.747
> 
> 标签：c#, rss, rss-reader, syndication

我正在开发简单的 C# 应用程序，它将呈现 rss 提要。我在阅读某些网页的 rss 提要时遇到问题。解析 pubDate 时出现问题：第 1 行位置 829 出错。解析 XML 中的 DateTime 值时遇到错误。

```
 XmlReader reader = XmlReader.Create("http://vest.com.mk/rssGenerator/");
        SyndicationFeed feed = SyndicationFeed.Load(reader);

        foreach (var item in feed.Items)
        {
            Console.WriteLine(item.Title.Text);
            Console.WriteLine(item.Id.ToString());
            Console.WriteLine(item.PublishDate.ToString("dd/MM/yyyy"));
            Console.WriteLine();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:58:00.873

你可以做这些事情来获取更多信息，

*   将异常消息发布到您的问题描述中。
*   在代码周围添加一个 try catch，并记录失败的 url。
*   如果有任何失败的 url，请尝试访问它们以查找任何 404 或任何异常情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:27:58.053

通过查看您粘贴的代码以及调用一堆提要的事实，我的猜测是 PublishDate 属性可能为 null 或返回无法解析的日期格式。

尝试检查 DateFormat 属性上的空值。

# performance - htable在java api中放置和获取超时

> ID：13734356
> 
> 赞同：2
> 
> 时间：2012-12-05T23:23:06.390
> 
> 标签：performance, hadoop, nosql, hbase

是否可以在使用 java API 进行获取和放置时指定超时（默认行为似乎永远阻塞......尤其是当我们的 hbase 速度慢且负载重时）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:50:31.077

尝试通过这个线程 comments.gmane.org/gmane.comp.java.hadoop.hbase.user/23290 – ankitKinra

# php - 按值访问特定数组

> ID：13734367
> 
> 赞同：0
> 
> 时间：2012-12-05T23:24:31.260
> 
> 标签：php, arrays

给定以下数组结构：

```
Array
(
    [0] => Array
        (
            [widget_title] => Example
            [widget_content] => A bunch of content, including <strong>HTML</strong>.
        )

    [1] => Array
        (
            [widget_title] => Example #2
            [widget_content] => Less content this time.
        )

) 
```

`widget_content`根据 的值访问的最佳方式是`widget_title`什么？

例如，我想搜索“示例”并返回第一个数组，然后将其存储以访问该`widget_content`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:30:19.850

多种方法之一：

```
$filtered = array_filter($array, function($e){
    return $e['widget_title'] == 'Example';
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:39:32.420

这是你想要的吗？

```
<?
$arrays = array(
            array(
                'widget_title' => 'Example',
                'widget_content' => 'A bunch of content, including <strong>HTML</strong>.'
            ),
            array(
                'widget_title' => 'Example #2',
                'widget_content' => 'Less content this time.'
            )
        );

$widget_title = 'Example';

foreach ($arrays as $array) {
    switch($array['widget_title']) {
        case $widget_title: echo $array['widget_content']; break;
    }
}
?> 
```

# r - ggplot2 和带有负值的堆积条形图

> ID：13734368
> 
> 赞同：29
> 
> 时间：2012-12-05T23:24:31.957
> 
> 标签：r, ggplot2, geom-bar

给定以下数据集：

```
 Division Year OperatingIncome
1  A  2012           11460
2  B  2012            7431
3  C  2012           -8121
4  D  2012           15719
5  E  2012             364
6  A  2011           12211
7  B  2011            6290
8  C  2011           -2657
9  D  2011           14657
10 E  2011            1257
11 A  2010           12895
12 B  2010            5381
13 C  2010           -2408
14 D  2010           11849
15 E  2010             517 
```

如何在 ggplot2 中完成包含负值的堆积条形图？这是我正在使用的基本图表序列：

```
ggplot(income_m, aes(x=Year, y=OperatingIncome, fill=Division)) + geom_bar() +
+ scale_fill_brewer(type = "seq", palette = 1) 
```

这将返回一个错误：

> 警告消息：当 ymin != 0 时，堆叠定义不明确

而不是预期的结果 - 负值显示在 X 轴下方 - 它们根本不存在于堆积条形图中。有没有办法生成包含所有正负值的图表？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-05T23:32:47.367

**更新**：从**ggplot2** 2.2.0 开始，自动处理负值堆叠，无需为正值和负值创建单独的层。

如果我了解您要查找的内容，诀窍是将两个正面和负面数据放在不同的层中，并且还可以使用`stat = "identity"`：

```
dat <- read.table(text = "   Division Year OperatingIncome
1  A  2012           11460
2  B  2012            7431
3  C  2012           -8121
4  D  2012           15719
5  E  2012             364
6  A  2011           12211
7  B  2011            6290
8  C  2011           -2657
9  D  2011           14657
10 E  2011            1257
11 A  2010           12895
12 B  2010            5381
13 C  2010           -2408
14 D  2010           11849
15 E  2010             517",header = TRUE,sep = "",row.names = 1)

dat1 <- subset(dat,OperatingIncome >= 0)
dat2 <- subset(dat,OperatingIncome < 0)
ggplot() + 
    geom_bar(data = dat1, aes(x=Year, y=OperatingIncome, fill=Division),stat = "identity") +
    geom_bar(data = dat2, aes(x=Year, y=OperatingIncome, fill=Division),stat = "identity") +
    scale_fill_brewer(type = "seq", palette = 1) 
```

![在此处输入图像描述](../Images/551b8ea9e02f0af2656f52ba6f93fc7d.png)

# php - PHP 字符串 - 如果在 haystack 中找到针的一部分

> ID：13734373
> 
> 赞同：1
> 
> 时间：2012-12-05T23:25:00.083
> 
> 标签：php, string, compare, explode

我试过在线搜索解决方案，但没有运气（我是 PHP 初学者）。我有两个`strings`（带有时间戳的电话号码集合）具有`comma separated values`. 我需要检查逗号之间的特定文本部分是否`sting A`可以在`string B`.

以下是刺痛 A 的示例：

```
9858264-2012-12-05T00:11:28.806Z,1265482-2012-12-05T22:19:49.769Z,9598643-2012-12-05T22:46:17.115Z, 
```

这是 og sting B 的示例：

```
5555649-2012-12-05T22:37:23.765Z,3594595-2012-12-05T22:44:36.363Z,8549851-2012-12-05T22:46:01.259Z,9598643-2012-12-05T22:46:09.600Z 
```

在上述字符串中，以下两个值非常相似（时间戳中只有几秒不同）：

```
From string A: 9598643-2012-12-05T22:46:17.115Z
From string B: 9598643-2012-12-05T22:46:09.600Z 
```

我需要做的是**除了时间戳中的最后 5 个字符之外的**匹配中`COUNT`逗号之间的值的数量，因为这些可能是相同的事件，但相隔 +/- 几秒钟。`string A``string B`

 **我曾想过使用 php`explode`将每个值放入一个数组中，然后将它们进行比较，但是当涉及到数组以及如何将一个数组值与另一个减去最后 5 个字符进行比较时，我相当迷茫一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:41:49.857

你可以做这样的事情。

```
function make_string_into_nice_array ($string) {
    $string_array = explode(',',$string);
    return array_map(function($str) {
        return substr($str, 0, -5);    
    }, $string_array);
}

$array_a = make_string_into_nice_array($string_a);
$array_b = make_string_into_nice_array($string_b);

$matched_array = array_intersect($array_a, $array_b);

echo count($matched_array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:45:50.617

试试这个：

```
$arrayA = explode(',', $StringA); // Parse the string into array elements, using comma as delimiter.
$arrayB = explode(',', $StringB);

$matches = array(); // Declare the array that will be the output.
foreach ($arrayA as $aValue) { // Iterate through each element of A.
    foreach ($arrayB as $bValue) { // Iterate through each element of B.
        // Take the value of element A (chopping off the last 5 characters) and compare with the value of element B (chopping off the last 5 characters)
        if (substr($aValue, 0, strlen($aValue)-5) == substr($bValue, 0, strlen($bValue)-5))) {
            // If there's a match, iterate the count of that particular key in your output array.
            $matches[substr($aValue, 0, strlen($aValue)-5)] += 1;
        }
    }
}
echo count($matches); // Print the number of keys that are duped.
print_r($matches); // Look at each individual key and the number of duplicated instances. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T23:48:29.153

老实说，我认为将两个字符串组合起来，解析它们，然后查找不止一个电话的电话号码会更有用。

```
<?php
$input =
   trim(
      '9858264-2012-12-05T00:11:28.806Z,1265482-2012-12-05T22:19:49.769Z,9598643-2012-12-05T22:46:17.115Z,' .
      '5555649-2012-12-05T22:37:23.765Z,3594595-2012-12-05T22:44:36.363Z,8549851-2012-12-05T22:46:01.259Z,9598643-2012-12-05T22:46:09.600Z',
      ','
   ); //gets rid of leading/trailing commas
$raw_arr = explode(',', $input);

$phone_records = array();

foreach( $raw_arr as $entry ) {
   $temp = explode('T', $entry);
   $time = $temp[1];
   $temp = explode('-', $temp[0]);
   $phone = array_shift($temp);
   $date = implode('-', $temp);

   if( ! isset($phone_records[$phone]) ) {
      $phone_records[$phone] = array();
   }
   $phone_records[$phone][] = array($date, $time);
}

//print_r($phone_records);

foreach( $phone_records as $number => $entries ) {
   if( count($entries) > 1 ) {
      printf('%s: %s', $number, var_export($entries, TRUE));
   }
} 
```

输出：

```
9598643: array (
  0 =>
  array (
    0 => '2012-12-05',
    1 => '22:46:17.115Z',
  ),
  1 =>
  array (
    0 => '2012-12-05',
    1 => '22:46:09.600Z',
  ),
) 
```

您还可以使用此代码将每个输入解析为自己的数组，然后使用 foreach 循环运行一个并检查值是否为`array_key_exists($arr1_key, $arr2)`.**

# mysql - 向 SQL 表添加正在进行的列表编号

> ID：13734375
> 
> 赞同：0
> 
> 时间：2012-12-05T23:25:19.813
> 
> 标签：mysql

我正在尝试创建一个简单的汽车列表网站，其中填写了汽车的品牌、型号、年份等内容，然后在提交后，将此信息作为带有列表的特定列表添加到汽车数据库中身份证号。为了简单起见，我想简单地将第一个列表分配为 1，然后为每个附加列表添加 1。我的问题是我将如何为这样的事情编写代码？有没有办法使用某种类型的 if 语句，每次都将 ID 分配给 1 并且如果 ID 存在，`ID=i+1`或者有更简单的方法吗？稍后我将使用此列表编号作为在侧边栏上显示最近列出的汽车的一种方式（可能仅使用一种`sum(listingID)`查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:28:12.767

现场使用`AUTO_INCREMENT`_`ID`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:29:06.983

您需要为该表设置一个主键，然后将该字段设置为标识，检查此以供参考：[http ://www.w3schools.com/sql/sql_autoincrement.asp](http://www.w3schools.com/sql/sql_autoincrement.asp)

# jquery - 单击更改图像，带有图像映射

> ID：13734376
> 
> 赞同：3
> 
> 时间：2012-12-05T23:25:44.850
> 
> 标签：jquery, image, function, imagemap

我正在尝试多次使用一个图像映射。这个想法是你有一张带有图像映射的图片。您单击一个区域（图像地图上有一个突出显示），您会得到几个链接，您按下一个，然后图片就会改变。新图片使用与原始图片相同的图像映射（仅图像中的颜色发生变化）。

我已经尝试过这里提供的解决方案：[Jquery change image on click](https://stackoverflow.com/questions/5571285/jquery-change-image-on-click)

但它不起作用，因为有图像映射。我的代码是：

```
 <script type="text/javascript" src="jquery.maphilight.js"></script>

<script type="text/javascript">$(function() {
        $('.map').maphilight();
    });</script>
 <script type="text/javascript src="src="http://code.jquery.com/jquery-latest.js"></script>

 <script>
  $(document).ready(function () {
    $('#area1').click(function () {
        $("#areaOne").show();
    });
    $('#area2').click(function () {
        $("#areaTwo").show();
    });
});
$(function() {
 $('#areaOne').click(function(){
   $("#pic").attr('src',"pic2.jpg");
   return false;
 });
});
   </script>

<img class="map" id="pic"  src="pic.jpg" width="800" height="533" border="0"  usemap="#map" />

<map name="map" >
<area  shape="poly" id="area1" coords="201,316,220,324,257,350,290,385,315,423,329,456,297,466,235,476,194,479,158,481,128,474,101,453,94,440,93,426,96,411,114,389,137,367,168,342" href="javascript:myFunction(1)" />
<area shape="poly" id="area2"coords="204,315,226,324,254,345,288,379,313,414,330,455,380,439,446,409,489,368,517,329,541,300,580,266,581,254,567,241,549,240,531,242,514,250,489,264,465,282,441,298,416,306,394,303,348,283,323,264,296,236,246,285" href="javascript:myFunction(2)"/>
</map>
<br />

<div id="pushnshow">
Click on Image Map and you will see<br />
<div id="areaOne" class="areaOne "style="display: none" >this </div>
<div id="areaTwo" style="display: none">and this</div>

<br /> 
```

问题似乎出在 usemap=#map 因为当我把它拿走时，图片改变得很好，但没有突出显示。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:50:58.263

当 maphilight 运行时，它会将`<img />`a 包裹起来`<div class="map" />`并隐藏`<img />`. 然后将图像作为背景添加到新的 wrapping`<div class="map" />`中。

要让您的代码正常工作，请更改以下内容：

```
 $('#areaOne').click(function(){
   $("#pic").attr('src',"pic2.jpg");
   return false;
 }); 
```

对此：

```
 $('#areaOne').click(function(){
   $("#pic").attr('src',"pic2.jpg");
   $("#pic").parent().css('background-image',"url(pic2.jpg)");
   return false;
 }); 
```

不幸的是没有测试用例，但我相信这对你有用。希望能帮助到你！

# stored-procedures - 如何从文件中执行存储过程？

> ID：13734378
> 
> 赞同：1
> 
> 时间：2012-12-05T23:25:55.973
> 
> 标签：stored-procedures

我试图弄清楚如何运行我在创建数据库脚本的单独文件中的存储过程。

我试图避免将存储过程脚本直接放入创建数据库脚本中，因为我会将相同的代码放入 2 个地方。

有谁知道如何从文件执行存储过程？

# c# - VS 项目设置正在构建一个 .config 文件，没有 或者 元素

> ID：13734381
> 
> 赞同：2
> 
> 时间：2012-12-05T23:26:09.720
> 
> 标签：c#, app-config, configurationmanager, settings.settings

我开始在 VS2010 中向我的 C# 项目添加设置，方法是在 Project -> Properties -> Settings 选项卡中添加行。在属性下自动生成了一个 Settings.settings 文件（带有 Settings.Designer.cs 文件）。

但是当我尝试访问代码中的某些设置时，`ConfigurationManager.AppSettings["NameOfSetting"]`它总是返回 null；AppSettings.Count 始终为 0。此外，我检查了 bin 文件夹，当我构建项目时，*那里没有 MyProjectName.exe.config 文件或 app.config 文件*。

VS 项目可能有什么问题？我如何强制它像它应该的那样创建 .exe.config 文件？

**更新：**

我从我的项目中完全删除/删除了 app.config 和 Settings 文件，然后在项目属性中重新添加了一项设置，以便从头开始重新创建它。当我再次构建项目时，这一次 ProjectName.exe.config 文件*位于*\bin 文件夹中。但是我的代码得到了相同的结果：ConfigurationManager.AppSettings["MySetting"] 为 null 并且 AppSettings.Count = 0。

这是项目文件夹中自动生成的 app.config 文件，它与在构建中创建的 Project.exe.config 文件相同：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
        <section name="MyDarnProject.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
</configSections>
<applicationSettings>
    <MyDarnProject.Properties.Settings>
        <setting name="MySetting" serializeAs="String">
            <value>21937058</value>
        </setting>
    </MyDarnProject.Properties.Settings>
</applicationSettings>
</configuration> 
```

我注意到该元素被命名为 applicationSettings，而不是预期的 appSettings。而且设置本身是完全不同的，有一个元素和子元素，而不是`<add key="MySetting" value="21937058"/>`像其他人的例子。我正在使用 Visual Studio Professional 2010，版本 10.0.40219.1 SP1Rel

Settings.Designer.cs 代码的所有内容都与下面给出的示例完全相同，除了 get 没有设置，但我认为这没什么大不了的。

```
[global::System.Configuration.ApplicationScopedSettingAttribute()]
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
[global::System.Configuration.DefaultSettingValueAttribute("21937058")]
public long MySetting {
    get {
        return ((long)(this["MySetting"]));
    }
} 
```

`MyProject.Properties.Settings.Default.MySetting`确实访问设置值！所以我想我可能不得不这样做；我将考虑一种*解决方法*，因为我仍然不知道为什么该项目没有像我做过的所有其他项目那样构建 ProjectName.exe.config 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:33:34.477

从此属性中获取它：

```
YourAppNamespace.Properties.Settings.Default.NameOfSetting 
```

如果您仔细查看`Settings.Designer.cs`文件，您可以轻松了解如何引用这些值：

```
namespace YourAppNamespace.Properties {

    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "11.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default {
            get {
                return defaultInstance;
            }
        }

        [global::System.Configuration.UserScopedSettingAttribute()]
        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [global::System.Configuration.DefaultSettingValueAttribute("asas")]
        public string NameOfSetting {
            get {
                return ((string)(this["NameOfSetting"]));
            }
            set {
                this["NameOfSetting"] = value;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:32:34.880

```
var value = ConfigurationManager.AppSettings["NameOfSetting"] 
```

将在文件中查找`<appSettings>`部分`App.config`

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="NameOfSetting" value="Foo"/>
  </appSettings>
</configuration> 
```

访问`Settings.settings`文件使用中的设置（Visual Studio 将帮助您解析`Settings`类的命名空间 - 这是`Properties`您项目文件夹中的一个）。`Settings`类将为您添加到 Project -> Properties -> Settings 选项卡的所有行提供强类型属性：

```
var value = Settings.Default.NameOfSetting; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:35:22.327

确保你有一个****App.config**文件中的部分**

 **这是您可以遵循的示例

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="somesetting" value="7"/>
    <add key="somelocation"  value="abc.txt"/>
  </appSettings>
</configuration>

you read the above using code shown below

string configvalue1 = ConfigurationManager.AppSettings["somesetting"];
string configvalue2 = ConfigurationManager.AppSettings["somelocation"]; 
```

如果你想访问设置中的属性，你可以这样做

```
Properties.Settings.Default.<Your_Setting_Name> 
```**

# ruby - default_proc 是如何工作的

> ID：13734385
> 
> 赞同：5
> 
> 时间：2012-12-05T23:26:44.803
> 
> 标签：ruby

以下代码取自 RubyTapas 截屏视频，但对于我的经验而言，它的解释不够充分。像这样设置哈希

```
config = Hash.new do |h,k|
  h[k] = Hash.new(&h.default_proc)
end 
```

允许以下列方式设置和访问值

```
config[:production][:database][:adapter] = 'mysql'
puts config[:production][:database][:adapter] # => "mysql" 
```

当我做

```
puts config.inspect 
```

它揭示了一个嵌套的哈希。

```
{:production=>{:database=>{:adapter=>"mysql"}}} 
```

但是，如果我修改代码（只是玩弄它）以删除 &h.default_proc

```
 config = Hash.new do |h,k|
      h[k] = Hash.new()      #&h.default_proc removed from parameter
    end 
```

我收到这个错误

```
 undefined method `[]=' for nil:NilClass (NoMethodError) 
```

例如，当我这样做时，我不明白 Hash.new(&h.default_proc) 发生了什么

```
 config[:production][:database][:adapter] = 'mysql'
    puts config[:production][:database][:adapter] # => "mysql" 
```

你能分解一下，详细解释这个块`&hdefault_proc`在这种情况下是如何工作的。还请说明是否可以在调用 proc 时进行说明。为什么需要 proc 才能完成这项工作

```
 config[:production][:database][:adapter] = 'mysql' 
```

proc是如何被调用的？我认为您必须执行 proc.call 才能真正调用 proc。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T23:31:18.527

你采取错误的方式。`&h`在这种情况下，它不是一个有意义的单位。它`&`附在`h.default_proc`. 那是一个**proc** `h.default_proc`变成了一个**block**。类似的事情也适用于 splat 运算符`*`。`&`和的关联优先级`*`始终是最后一个。原因很清楚：否则没有意义。

* * *

假设你有：

```
config = Hash.new() # or `{}` 
```

然后，每当您使用`config`不存在的密钥访问时，它都会返回`nil`，所以

```
config[:production][:database] 
```

将返回错误，因为方法`[]`未定义在`config[:production]`等于`nil`. 当你这样做时：

```
config = Hash.new do |h,k|
  h[k] = Hash.new()
end 
```

然后，将确保当您使用`config`不存在的密钥访问时，它会创建一个新的哈希值作为值。所以

```
config[:production][:database] 
```

现在可以了，因为方法`[]`是定义在 上的`config[:production]`，它等于新创建的哈希值`{}`。但还是，

```
config[:production][:database][:adapter] 
```

将返回错误，因为方法`[]`未定义在 `config[:production][:database]`等于`nil`. 如果您有：

```
config = Hash.new do |h,k|
  h[k] = Hash.new(&h.default_proc)
end 
```

那么，这意味着，当您使用`config`不存在的密钥访问时，例如：

```
config[:production] 
```

这次创建的哈希值将`default_proc`与 相同`config`，这意味着

```
config[:procuction][:database] 
```

不是返回`nil`到不存在的键调用的散列，而是将另一个散列返回到不存在的键调用的散列。所以这一次，

```
config[:production][:database][:adapter] 
```

不会返回错误。类似的事情发生在散列中的任意深度。

# ms-access - MS Access 2007 邻接列表树针对循环引用进行验证

> ID：13734387
> 
> 赞同：1
> 
> 时间：2012-12-05T23:26:57.273
> 
> 标签：ms-access, ms-access-2007, vba

我在 MS Access 2007 中实现了邻接列表树。在插入或更新时，我想验证循环引用（如`a->b->c->a`）。我编写了一个简单的函数，如果引用的路径是有限的，则给定表名和树节点的 id 返回 true，如果存在循环，则返回 false。

不幸的是，根据[http://msdn.microsoft.com/en-us/library/office/aa191586(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/office/aa191586%28v=office.10%29.aspx)：

> 对于字段和记录验证规则，表达式不能包含用户定义的函数、域聚合或聚合函数、Eval 函数或 CurrentUser 方法，或对表单、查询或表的引用。此外，字段验证规则不能包含对其他字段的引用。对于记录，表达式可以包含对该表中字段的引用。

我仅限于使用 Access 数据库引擎作为后端的 MS Access。我知道邻接列表树模型的局限性，但我仍然更喜欢它。

验证这些参考的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T05:17:16.823

您无需将其放入验证规则中。您要做的是在插入/更新时捕获内容，但您可能应该在插入或更新之前捕获它们。

为此，请让您自己的验证在输入控件的 BeforeUpdate 事件中运行您的函数，并在函数显示存在问题时运行 Me.Undo 和 Msgbox（或以其他方式通知用户错误）。

例如：

```
Private Sub Input_BeforeUpdate(Cancel As Integer)
    If Not inputIsValid() Then
        'input is not valid
        Me.Undo
        MsgBox "Input is not valid", vbOKOnly + vbCritical, "Invalid Input"
    End If
End Sub 
```

# linux - 从 linux 命令行打开 url 时如何绕过 firefox 身份验证框？

> ID：13734390
> 
> 赞同：1
> 
> 时间：2012-12-05T23:27:11.833
> 
> 标签：linux, firefox, command-line, qunit

我们有一个网站的 QUnit 测试页面。而且，我们想让它成为一个可以从 linux 命令行自动启动的回归测试。但是，如果我们从命令行启动 Firefox，即使我保存了用户名和密码，它也会弹出一个窗口说“需要身份验证”。有没有办法绕过它？我们尝试使用“about:config”将该 URL 添加为受信任的站点，但没有帮助。

另外，有没有办法从命令行自动测试网站？谢谢。

# tomcat - 在tomcat中绑定JNDI数据源？

> ID：13734391
> 
> 赞同：7
> 
> 时间：2012-12-05T23:27:14.617
> 
> 标签：tomcat, coldfusion, datasource, tomcat6, jndi

是否可以以编程方式将 DataSource 绑定到 Tomcat 的 6 JNDI？

我想动态创建一个 DataSource，然后通过 JNDI 使其可用（例如，对 ColdFusion ）。

这就是我所拥有的：

```
public void bindToConext(DataSource dataSource) throws NamingException, SQLException {
    Context initContext = new InitialContext();
    Context envContext  = (Context)initContext.lookup("java:/comp/env");
    envContext.bind("jdbc/mydatasource", dataSource);
} 
```

但我得到了这个例外：

```
javax.naming.OperationNotSupportedException: Context is read only 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:42:09.510

好吧，这是不可能的，因为tomcat的上下文在启动后变成了只读的。

所以我们所做的是使用 SimpleJNDI，它是一个内存上下文（更像是一个美化的 HashMap），它对我们有用。

它需要一个`jndi.properties`文件，该文件必须位于类路径中，并在其中定义查找资源的目录和初始上下文工厂

```
java.naming.factory.initial=org.osjava.sj.SimpleContextFactory
org.osjava.sj.root=some/relative/path
org.osjava.jndi.delimiter=/
org.osjava.sj.jndi.shared=true 
```

为了与 ColdFusion 进行绑定，我们首先以编程方式创建数据源，然后将其绑定到上下文：

```
DataSource ds = ...
Context c = new InitialContext();
c.bind( "jdbc/my/blah/"+var , ds );
... 
```

然后使用 CF admin api，我们只使用 jndiname 创建一个 JNDI 类型的 CF 数据源

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-27T14:55:41.613

Tomcat 的工作环境是 java:comp/env。此上下文是只读的。但是您可以使用 Tomcat 的 JNDI 实现创建自己的上下文，只要您不使用“java:comp/env”。

```
Context ctx = new InitialContext()
ctx.createSubcontext("any_name").createSubcontext("any_sub_name");
ctx.bind("any_name/any_sub_name/myDataSource", myDataSource); 
```

默认情况下，Tomcat 的上下文是共享的，因此可以通过以下方式从应用程序的任何位置检索 DataSource：

```
Context ctx = new InitialContext()
DataSource ds = (DataSource)ctx.lookup("any_name/any_sub_name/myDataSource"); 
```

# css - Chrome 中的自定义 CSS SVG 字体，字形具有零宽度

> ID：13734394
> 
> 赞同：1
> 
> 时间：2012-12-05T23:27:16.800
> 
> 标签：css, google-chrome, fonts, font-face

我在 Chrome 中使用 SVG 字体。

有时，字形似乎以零宽度结束。这意味着如果我自己拥有这个字符，它的父容器的宽度为零，所以它基本上不会显示。如果它的父级有其他东西，它会出现在字体后面。

所以，如果我有自定义字体的“+”，它会变得不可见，因为字形的宽度似乎为零。

如果我有类似的东西

"+" 饼干

，我看到了 Cookie，+ 是自定义字体，在“Cookie”这个词的后面。

我不确定这是特定于 Chrome 的问题、特定于 .svg 字体的问题还是什么。奇怪的是，它只偶尔发生。有时它会以刷新开始，然后通过几次刷新持续存在。最终它会消失（通常在清除缓存时）。

它似乎也不是一个损坏的文件下载，因为比较有效响应的内容长度以及何时不一样......虽然我不准备排除任何事情。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:59:19.457

显然这是当前版本的 Chrome 中的一个错误：[http ://code.google.com/p/chromium/issues/detail?id=95102](http://code.google.com/p/chromium/issues/detail?id=95102)

据此，它应该在 Chrome 版本 24（下一个）中修复。

我们有一个由 eot、svg、woff 和 ttf 组成的字体堆栈。为了“解决”这个问题，我们将 woff 移到了 svg 之上，因此可以使用它。这似乎可以解决问题。

# php - $.load 内的表格未正确发布

> ID：13734395
> 
> 赞同：3
> 
> 时间：2012-12-05T23:27:17.447
> 
> 标签：php, javascript, jquery, html, post

好吧，这就是我得到的，基本上是单击一个按钮并执行以下代码：

```
 Readthis = "MonsterRequest.php?id=<?php echo $_REQUEST['id']; ?>&Mon=";
    TestVar = TestVar.replace(/\s/g, "");
    Readthis = Readthis + htmlencode(TestVar);
    $('#CenterPiece').load(Readthis); 
```

一切似乎都按预期工作，除了传递给 Monsterequest.php 时，帖子没有被传递给它自己，并且页面基本上重新加载它自己，因为它被传递给主父......（我不确定它是否是，但是 monsterrequest.php 本身似乎工作得很好，但是加载时它根本无法按预期工作，我完全被难住了。我基本上想在不重新加载页面的情况下发布数据。

Monsterrequest.php： [http ://pastebin.com/fiFjjBZg](http://pastebin.com/fiFjjBZg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T23:34:39.357

你熟悉 AJAX 吗？如果您已经知道这一点，请原谅我，但如果您不知道：

Ajax 将数据发布到一个外部 php 文件，该文件处理它接收到的数据，并返回一个答案。它看起来像这样：

文件#1：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#Sel').change(function() {
                    var opt = $(this).val();
                    var someelse = 'Hello';
                    var more_stuff = 'Goodbye';
                    $.ajax({
                        type: "POST",
                        url: "receiving_file.php",
                        data: 'selected_opt=' + opt + '&something_else=' +someelse+'&more_stuff='+more_stuff,
                        success:function(data){
                            alert('This was sent back: ' + data);
                        }
                    });
                });
            });
        </script>
    </head>
<body>

<select id = "Sel">
    <option value ="Song1">default value</option>
    <option value ="Song2">Break on through</option>
    <option value ="Song3">Time</option>
    <option value ="Song4">Money</option>
    <option value="Song5">Saucerful of Secrets</option>
</select> 
```

文件#2：接收文件.php

```
<?php
    $recd = $_POST['selected_opt'];
    echo 'You chose: ' . $recd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:29:07.857

> 我基本上想在不重新加载页面的情况下发布数据

使用[jQuery 的`$.post(...)`](http://api.jquery.com/jQuery.post/)

干杯

# android - mediacodec 同时编码解码？

> ID：13734400
> 
> 赞同：4
> 
> 时间：2012-12-05T23:28:03.563
> 
> 标签：android, decode, encode

使用新的 JB MediaCodec API，是否可以同时编码和解码 AMR？启动编码器后，当我尝试在解码器端调用 dequeueOutputBuffer 时，出现了非法状态异常。我不确定这是不可能的还是我的代码有问题？有谁知道？

# c++ - 向量上删除的传播

> ID：13734402
> 
> 赞同：1
> 
> 时间：2012-12-05T23:28:05.503
> 
> 标签：c++, memory-management, vector

如果我`delete`是一个指针向量，是不是就`delete`调用里面的指针呢？例如：

```
vector<Obj *> v = new vector<Obj *>();
v.push_back(new Obj());
delete v; 
```

在此之后，是否也被`Obj`删除？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:30:57.853

当向量被销毁时，它会销毁每个包含的元素。指针在销毁时不会做任何事情，因此内存会泄漏并且`delete`不会单独调用它们。

更好的解决方案是使用`std::unique_ptr`

```
vector<std::unique_ptr<Obj> > 
```

`unique_ptr`将在销毁时删除它指向的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T23:29:51.363

不，不是的。如果您考虑向量的工作原理，那是有道理的。向量动态分配内存以存储其元素，然后将它们复制进去。

它不知道它的类型是什么，因此当它调用`delete`其内部内存存储时，它是在用于存储*每个指针*的内存上调用 delete ，而不是指针所指的内容。例如，如果你写了类似...

```
int **a = new int*[10];
for(int i = 0; i < 10; ++i)
    a[i] = new int(i);

delete [] a; 
```

`a`被释放了，但是每个指针所指的内存呢？它被泄露了；您只释放了用于存储指针本身的内存。即使它确实尝试了像您要求的那样的事情，您也不会想要它。向量怎么可能知道给定指针引用的内存是否可以安全调用`delete`？它不能。

这就是为什么你不应该使用指针向量。相反，更喜欢智能指针向量，即

```
std::vector<unique_ptr<my_type>> vec; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T23:29:24.277

不，您应该遍历向量并删除其中的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T23:33:23.617

boost 库有`ptr_vector`： http: [//www.boost.org/doc/libs/1_52_0/libs/ptr_container/doc/ptr_vector.html](http://www.boost.org/doc/libs/1_52_0/libs/ptr_container/doc/ptr_vector.html)
为你做这件事。

`vector`它本身只激活它立即包含的对象的析构函数。在这种情况下，它包含一个没有析构函数的原始 C 指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T23:33:44.707

复制自 stl_vector.h 中 ~vector() 的文档：

`The dtor only erases the elements, and note that if the elements themselves are pointers, the pointed-to memory is not touched in any way. Managing the pointer is the user's responsibility.`

所以不行。

# sql - 使用案例的子组聚合

> ID：13734404
> 
> 赞同：1
> 
> 时间：2012-12-05T23:28:20.490
> 
> 标签：sql, sql-server-2008, tsql

我正在尝试返回 groupid、masteraccountnames 和 CashAmountDiff 的列表，其中具有相同 groupid 的交易的 CashAmount 总和在任何日期都大于 100。

表模式是这样的：

**贸易T1**

```
TradeId | SubAccountId | MasterAccId | GroupId | TradeDate | TradeType 
```

**主账户**

```
Id | MasterAccName 
```

**子帐户**

```
Id | SubAccName | MasterAccountId 
```

每个子帐户都链接到一个主帐户。这是一个多对一的关系。

TradeType 确定交易的“方向”，无论是借方还是贷方。我在添加每个 groupid 的借方和贷方时遇到问题。我的查询只是总结一切。我不知道如何合并 Case When Credit（乘 CashAmount * -1），Case When Debit 只使用 CashAmount

总会有超过 1 个 tradeid 链接到一个 groupid。

我在这里有 SQL fiddle 中的表以及我的努力：[http ://www.sqlfiddle.com/#!3/45580/1/0](http://www.sqlfiddle.com/#!3/45580/1/0)

```
SELECT 
t.groupId,
ma.MasterAccName,
sum(CASE WHEN t.tradetype = 'Credit' 
       THEN sum(-1*t.cashamount)
    ELSE sum(t.cashamount)) 
END as CashDiff 
FROM tradet1 t
JOIN masteraccount ma
ON t.masteraccid = ma.id 
WHERE t.groupid > -1
GROUP BY t.groupid, ma.MasterAccName
HAVING count(t.groupid) > 1 and sum(t.cashamount) > 100 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:35:58.937

您可以通过在子查询中转换贷方和借方并在聚合查询中使用这些结果来大大简化此查询。

如

```
SELECT    [tt].[GroupId] ,
          [ma].[MasterAccName] ,
          CASE WHEN [tt].[TradeType] = 'Credit'
               THEN [tt].[CashAmount] * -1
               ELSE [tt].[CashAmount]
               END AS CashAmount
FROM      [dbo].[TradeT1] AS tt
          JOIN [dbo].[MasterAccount] AS ma ON [tt].[MasterAccId] = [ma].[Id] 
```

有了这个，您就有了一个很好的 CashAmounts 列表，可以在周围的聚合查询中使用，作为正数和负数。

整个查询看起来像这样

```
SELECT  [tn].[GroupId] ,
        [tn].[MasterAccName] ,
        SUM([tn].[CashAmount]) AS CashDiff
FROM    ( SELECT    [tt].[GroupId] ,
                    [ma].[MasterAccName] ,
                    CASE WHEN [tt].[TradeType] = 'Credit'
                         THEN [tt].[CashAmount] * -1
                         ELSE [tt].[CashAmount]
                    END AS CashAmount
          FROM      [dbo].[TradeT1] AS tt
                    JOIN [dbo].[MasterAccount] AS ma ON [tt].[MasterAccId] = [ma].[Id]
        ) AS tn
GROUP BY [tn].[GroupId] ,
        [tn].[MasterAccName]
HAVING  ABS(SUM([tn].[CashAmount])) > 100 AND COUNT([tn].[GroupId]) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:52:33.850

这只是适用于 +/- 的查询。我可能有倒退的迹象。

```
Select 
  t.groupId,
  ma.MasterAccName,
  Sum (Case When TradeType = 'Credit' Then -t.cashamount Else t.cashamount End) AS 'CashDiff'
From 
  tradet1 t
      Inner Join
  masteraccount ma
      On t.masteraccid = ma.id 
 Where
  t.groupid > -1
 Group By
  t.groupid,
  ma.MasterAccName
Having
  Count(t.groupid) > 1 And
  Sum (Case When TradeType = 'Credit' Then -t.cashamount Else t.cashamount End) > 100 
```

[http://www.sqlfiddle.com/#!3/45580/20](http://www.sqlfiddle.com/#!3/45580/20)

# android - Android 捕获视频 mediaRecorder.start() 失败 -19

> ID：13734406
> 
> 赞同：5
> 
> 时间：2012-12-05T23:28:29.333
> 
> 标签：android, camera, android-mediarecorder

我需要录制视频并保存它，但我在`start()`媒体记录器的方法上遇到错误：**失败 - 19**（这个错误应该是什么？文档中没有对此发表评论:(）我正在与这个错误作斗争一天，我尝试了多个代码（谷歌教程，英特尔示例，......）我在网上找到了，但无法使它们中的任何一个工作。请帮我找出导致问题的原因。我什至开始怀疑我的手机（SE live，wt19i）是否能够录制视频（但默认相机应用程序工作正常）。真的，**请**，有人知道**我应该尝试/检查/修复**什么吗？

这是我的录制代码：

```
public boolean record()
        {
            // if already recording, return
            if( recording ) return false;

            // We are recording
            recording = true;
            // log start of the method
            System.out.println("CameraPreview::record() - Method start");

            // Have tried to stop preview before record - didnt help
            //mCamera.stopPreview();
            mCamera.unlock();

            mRecorder = new MediaRecorder();
            // have tried this listener to get some extra info (doesnt work)
            mRecorder.setOnErrorListener(new MediaRecorder.OnErrorListener() {              
                public void onError(MediaRecorder mr, int what, int extra) {
                    System.out.println("MediaRecorder::onError listener:"+what+" - "+extra);

                }
            });

            mRecorder.setCamera(mCamera);

            // Set media recorder properties
            mRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
            mRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

            mRecorder.setProfile( CamcorderProfile.get( CamcorderProfile.QUALITY_LOW ) );
            // have tried to set format without profile - didnt help
            //mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            //mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            //mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);

            mRecorder.setOutputFile("/sdcard/MVR_video.3gp");
            mRecorder.setPreviewDisplay(mHolder.getSurface());

            // Prepare media recorder
            try {
                mRecorder.prepare();
            } catch (Exception e) {
                Log.d("MyVideoRecord", "Error preparing media recorder: " + e.getMessage());
                System.out.println("CameraPreview::record() - prepare() thrown an exception");

                stopRecord();
                return false;
            }

            // Have tried to wait until prepare is done - didnt help
            try {Thread.sleep(1000); } catch( Exception e){}
            try {
                mRecorder.start();
            } catch (Exception e) {
                Log.d("MyVideoRecord", "Error starting media recorder: " + e.getMessage());
                System.out.println("CameraPreview::record() - start() thrown an exception");
                System.out.println("Exception: "+e.getMessage());
                e.printStackTrace();

                stopRecord();
                return false;
            }

            System.out.println("CameraPreview::record() - Method returning TRUE");
            return true;
        } 
```

我在清单文件中有对相机、存储卡和音频的许可请求。我已将**minSdkVersion**设置为 10 并将目标设置为 15

这是**LogCat**

```
I/System.out(3990): CameraPreview::record() - Method start
I/MediaRecorderJNI(3990): prepare: surface=0x1f8e10 (identity=171)
E/MediaRecorder(3990): start failed: -19
D/MyVideoRecord(3990): Error starting media recorder: start failed.
I/System.out(3990): CameraPreview::record() - start() thrown an exception
I/System.out(3990): Exception: start failed.
W/System.err(3990): java.lang.RuntimeException: start failed.
W/System.err(3990):     at android.media.MediaRecorder.start(Native Method)
W/System.err(3990):     at com.example.myvideorecord.CameraPreview.record(CameraPreview.java:142)
W/System.err(3990):     at com.example.myvideorecord.MainActivity.onOptionsItemSelected(MainActivity.java:101)
W/System.err(3990):     at android.app.Activity.onMenuItemSelected(Activity.java:2502)
W/System.err(3990):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:969)
W/System.err(3990):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
W/System.err(3990):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
W/System.err(3990):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
W/System.err(3990):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:468)
W/System.err(3990):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:126)
W/System.err(3990):     at android.view.View$PerformClick.run(View.java:14263)
W/System.err(3990):     at android.os.Handler.handleCallback(Handler.java:605)
W/System.err(3990):     at android.os.Handler.dispatchMessage(Handler.java:92)
W/System.err(3990):     at android.os.Looper.loop(Looper.java:137)
W/System.err(3990):     at android.app.ActivityThread.main(ActivityThread.java:4441)
W/System.err(3990):     at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err(3990):     at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err(3990):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
W/System.err(3990):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
W/System.err(3990):     at dalvik.system.NativeStart.main(Native Method) 
```

## 编辑：

我正在添加我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myvideorecord"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:debuggable="true" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".CameraPreview"
            android:screenOrientation="landscape"
            ></activity>
    </application>
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-feature android:name="android.hardware.camera" />
</manifest> 
```

## 编辑2

我已经尝试**在**我的**堂兄弟 mob**上运行这个应用程序（它的 SE，但另一个模型）并且**它运行没有任何问题**。由于我的手机没有安卓更新，我试图通过原始的“索尼电脑伴侣”软件“修复”它。我希望它会在它之后工作，因为我想如果没有任何“hack”就不可能降级 android 版本

## 编辑3

我曾尝试升级甚至降级手机上的固件。什么也没有变。我正在考虑在客户支持或 XDA 论坛上撰写文章，并请使用同一部手机的任何人尝试运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:18:55.997

一步一步地开发它。从默认值开始。

```
mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
//Use values from available Camera preview sizes 
mMediaRecorder.setVideoSize(mCameraPreview.getPreviewWidth(), mCameraPreview.getPreviewHeight());
mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT); 
```

如果您不指定视频大小，您仍然会遇到错误。如果您没有管理预览大小的实现。尝试使用固定大小，它应该可以工作：

```
mMediaRecorder.setVideoSize(320, 240); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:06:07.983

我找不到关于错误 -19 的文档。但是，看起来您并没有要求所有需要的权限。`start failed`错误有时是由于缺少权限：

尝试添加的可能权限是：

```
<uses-feature android:name="android.hardware.microphone"/> 
```

和

```
<uses-permission android:name="android.permission.STORAGE" /> 
```

# jquery - 在 jQuery 中子子子项触发父行为时遇到困难

> ID：13734416
> 
> 赞同：2
> 
> 时间：2012-12-05T23:29:47.577
> 
> 标签：jquery, jquery-plugins

我创建了这段代码来做一个非常漂亮、优雅的下拉侧边栏导航系统——为了方便起见，我还包括了一个 jsFiddle。

[http://jsfiddle.net/ciel/pC34j/](http://jsfiddle.net/ciel/pC34j/)

它几乎完全像我想要的那样工作。这是必需的功能。

*   单击顶级项目时，应将其菜单滑动到视图中（完美）
*   单击顶级项目时，应关闭所有其他打开的顶级项目（完美）
*   顶级项目，当点击时，如果打开，应该再次关闭（似乎工作）
*   应支持具有所有相同功能的子菜单（失败！）

我遇到的问题是子菜单。在小提琴上，如果您单击**顶级（3）**，您将看到几个子菜单。单击一个会导致整个菜单再次折叠，您必须再次单击**顶层 (3)**才能打开它。

有什么想法可以解决这个问题吗？jsfiddle的链接在上面，但我也把它放在了这个问题上。

## Javascript

```
(function($) {
    $.fn.drawer = function(options) {
        // Create some defaults, extending them with any options that were provided
        var settings = $.extend({
            openClass: 'open'
        }, options);

        var open = function(e) {
            // mark this menu as open
            $(e).addClass(settings.openClass);

            // retrieve the appropriate menu item
            var $menu = $(e).children(".dropdown-menu, .sidebar-dropdown-menu");

            // slide down the one clicked on.
            $menu.slideDown(100);
            $menu.addClass('active');
        };

        var close = function(e) {
            console.log("closing", e);
            $(e).removeClass(settings.openClass);
            // retrieve the appropriate menu item
            var $menu = $(e).children(".dropdown-menu, .sidebar-dropdown-menu");
            // slide down the one clicked on.
            $menu.slideUp('fast');
            $menu.removeClass('active');
        };

        return this.each(function() {
            $(this).on('click', function(e) {
                // transform the selector into a 'className'
                var $className = $('.' + settings.openClass);
                var $node = $(this); // the current node
                var $target = $(e.target); // the actual DOM target
                // examine all existing dropdown menus that are
                // currently open, and close them - excluding the
                // current one.
                $className.not($(this)).each(function() {
                    close($(this));
                });

                if ($target.hasClass("root") && $node.hasClass(settings.openClass)) {
                    close($(this));
                }
                else {
                    // open the selected dropdown menu
                    open($(this));
                }

                // prevent default event propogation
                e.preventDefault();
            }).on("mouseleave", function() {
                $(this).children(".dropdown-menu").hide().delay(300);
            });

        })
    };

})(jQuery);
$(document).ready(function() {
    $(".dropdown > a").addClass("root");
    $('[data-role="sidebar-dropdown"]').drawer({
        openClass: 'sidebar-dropdown-open'
    });
    $('[data-role="sidebar-sub-dropdown"]').drawer({
        openClass: 'sidebar-sub-dropdown-open'
    });
});​ 
```

## HTML

```
<ul>
    <li class="dropdown" data-role="sidebar-dropdown">
        <a href="pages/....html" class="remote"><i class="icon-libreoffice"></i>Top Level (A)</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a class="remote" href="pages/....html">Sub Link</a></li>
            <li><a class="remote" href="pages/....html">Sub Link</a></li>
            <li><a class="remote" href="pages/....html">Sub Link</a></li>
        </ul>
    </li>
    <li class="dropdown" data-role="sidebar-dropdown">
        <a href="pages/.....html" class="remote"><i class="icon-book"></i>Top Level (B)</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li><a href="pages/....html" class="remote">Sub Link</a></li>
            <li><a href="pages/....html" class="remote">Sub Link</a></li>
            <li><a href="pages/....html" class="remote">Sub Link</a></li>
            <li><a href="pages/....html" class="remote">Sub Link</a></li>
            <li><a href="pages/....html" class="remote">Sub Link</a></li>
            <li><a href="pages/....html" class="remote">Sub Link</a></li>
            <li><a href="pages/....html" class="remote">Sub Link</a></li>
        </ul>
    </li>
    <li class=" dropdown" data-role="sidebar-dropdown">
        <a href="pages/....html" class="remote"><i class="icon-trophy"></i>Top Level (C)</a>
        <ul class="sub-menu light sidebar-dropdown-menu">
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="pages/....html" class="remote">Sub Level (Alpha)</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li>
                        <a href="pages/....html" class="remote">Sub-Sub Link
                        </a>
                    </li>
                    <li>
                        <a href="pages/.....html" class="remote">Sub-Sub Link
                        </a>
                    </li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                </ul>
            </li>
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="pages/....html" class="remote">Sub Level (Beta)</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                </ul>
            </li>
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="pages/....html" class="remote">Sub Level (Gamma)</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                </ul>
            </li>
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="pages/....html" class="remote">Sub Level (Delta)</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                </ul>
            </li>
            <li class="dropdown" data-role="sidebar-sub-dropdown">
                <a href="pages/....html" class="remote">Sub Level (Kappa)</a>
                <ul class="sub-menu light sidebar-dropdown-menu">
                    <li><a href="pages/....html" class="remote">Sub-Sub Link</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

​</p>

## 相关的 CSS（让它看起来正确）

```
ul > li > a {
    font-size: 1.1em;
}

.dropdown, .dropdown > a {
    font-weight: 600 !important;
}

a {
    font-family: 'Segoe UI', 'Open Sans', Verdana, Arial, Helvetica, sans-serif;
    font-weight: 400;
    font-size: 11pt;
    letter-spacing: 0.01em;
    line-height: 14pt;
    color: black;
    display: block;
    width: 100%;
    padding: 5px 20px 5px 10px;
    white-space: nowrap;
    font-size: 14px;
    cursor: pointer;
}

a, .link {
    font-family: 'Almendra', 'Segoe UI', 'Open Sans', Verdana, Arial, Helvetica, sans-serif;
    font-weight: 400;
    font-size: 11pt;
    color: #2E92CF;
    text-decoration: none;
}

*, ::after, ::before {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

ul > li.dropdown::after {
    content: "";
    display: block;
    position: absolute;
    top: 6px;
    left: 100%;
    margin-left: -20px;
    width: 16px;
    height: 16px;
    background: no-repeat;
    background-position: 0 -1586px;
    z-index: 200;
}

ul.sub-menu.light {
    background-color: #F9F9F9 !important;
}

ul.sub-menu {
    padding-top: 5px;
    padding-bottom: 5px;
}

.sidebar-dropdown-menu {
    display: none;
}

.page-sidebar ul {
    margin-left: 0;
    list-style: none;
    background-color: #EBEBEB;
}

ul ul {
    list-style-type: circle;
}

ul ul, ul ol, ol ol, ol ul {
    margin-bottom: 0 !important;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:28:49.187

你离那里很近。问题是您添加了以下行：

```
e.preventDefault(); 
```

但是要成功停止传播，如代码注释中所述，您需要包括：

```
e.stopPropagation(); 
```

或者简单地说`return false;`，这将实现两者。这是一个更新的 jsFiddle：http: [//jsfiddle.net/pC34j/8/](http://jsfiddle.net/pC34j/8/)

# php - 如何分离 PHP 代码和 Javascript 代码

> ID：13734421
> 
> 赞同：3
> 
> 时间：2012-12-05T23:30:05.650
> 
> 标签：php, javascript

> **可能重复：**
> [当 JS 需要 PHP 变量时，如何将 javascript 与 PHP 分开？](https://stackoverflow.com/questions/1316203/how-can-i-separate-javascript-from-php-when-the-js-needs-a-php-variable)
> [如何使用 PHP echo 函数在 JavaScript 中定义变量？](https://stackoverflow.com/questions/13734338/how-to-define-a-variable-in-javascript-with-php-echo-function)

例如，我有以下 Javascript 代码。它使用 PHP 变量。

```
<script>
 $(function() {
     for(var items = 1; items <=<?php echo $items;?>; items++){
         print_percentage_is("div.is"+items);
     }
});
</script> 
```

将 Javascript 代码与我的 Html/PHP 代码分开的最佳解决方案是什么？对于这种情况，我不能使用这种方式

```
<script type="text/javascript" language="javascript" src="/js/change.js"></script> 
```

我需要创建一个 PHP 文件并放入 javascript 吗？最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:37:48.593

如果您的 JavaScript 需要直接使用数据，AJAX 是一个非常可怕的解决方案。相反，您可以创建一个单独的`<script>`标签来将 PHP 变量传递给页面，使用`json_encode()`.

这是一个例子：

```
<script type="text/javascript">
var my_variable = <?php echo json_encode($my_variable); ?>;
</script> 
```

在页面中，您将像这样使用它：

```
<script>
$(function() {
    console.log(my_variable);
});
</script> 
```

如果您需要传递多个变量，有时最好在 PHP 中将它们组合在一起，如下所示：

```
<?php
$data = array(
    'items' => array(1,2,3,4),
    'users' => array(array('name' => 'John'), array('name' => 'Jane')),
);
?>
<script>
var data = <?php echo json_encode($data); ?>;
</script>

<script>
$(function() {
    console.log(data.items);
    console.log(data.users);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:50:00.293

`application/javascript`在 php 文件中设置 javascript ( ) 的标头。然后在`script`标签中，将`src`属性指向该文件。在相应的 php 文件中执行所需的任何回显（或条件、检索）。

# android - 创建密码选项 - android

> ID：13734423
> 
> 赞同：1
> 
> 时间：2012-12-05T23:30:26.850
> 
> 标签：android, passwords

先生，如果我更改为另一个活动，我如何保存在更改密码活动中所做的更改。起初，我尝试只使用变量来保存值，但如果我返回其他活动，所做的所有更改都会恢复正常。我试过使用arraylist，但它是一样的。你能教我其他创建更改密码选项的方法吗？提前感谢您的帮助。

```
public class ChangePassword extends Activity {
/** Called when the activity is first created. */
EditText enterPassword, enterNewPassword;
String defaultPassword = "1234";
ArrayList<String> newPasswordArray = new ArrayList<String>();
ArrayList<String> currentPasswordArray = new ArrayList<String>();
String newPassword;
String currentPassword;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.changepassword);
    Button save = (Button)findViewById(R.id.btnSaveSettings);
    enterPassword = (EditText)findViewById(R.id.etEnterPassword);
    enterNewPassword = (EditText)findViewById(R.id.etNewPassword);
    currentPasswordArray.add("1234");
    for(String s: newPasswordArray)
    {
        newPassword = s;
    }
    for(String s: currentPasswordArray)
    {
        currentPassword = s;
    }
    save.setOnClickListener(new OnClickListener()
    {
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            try
            {
                //get string from arraylist
                for(String s: newPasswordArray)
                {
                    newPassword = s;
                }
                for(String s: currentPasswordArray)
                {
                    currentPassword = s;
                }

                //test password
                if(enterPassword.getText().toString().equals(currentPassword))
                {
                    if(enterNewPassword != null)
                    {
                        String newPass = setNewPassword(enterNewPassword.getText().toString());
                        setCurrentPassword(newPass);
                        Toast.makeText(getApplicationContext(), "Save Success", Toast.LENGTH_LONG).show();
                    }
                    else
                    {
                        Toast.makeText(getApplicationContext(), "Please fill up all fields.", Toast.LENGTH_LONG).show();
                    }
                }
                else
                {
                    Toast.makeText(getApplicationContext(), "Current password, unmatched.", Toast.LENGTH_LONG).show();
                }

            }
            catch(Exception e)
            {
                e.printStackTrace();
                Toast.makeText(getApplicationContext(), "Save failed", Toast.LENGTH_LONG).show();
            }
        }
    });
}//oncreate()

public String setNewPassword(String pass)
{
    String returnPass = "";
    newPasswordArray.clear();
    newPasswordArray.add(pass);
    for(String s : newPasswordArray)
    {
        returnPass = s;
    }
    return returnPass;
}//setNewPassword()

public String getPassword()
{
    return newPassword;
}//getPassword
public void setCurrentPassword(String newpass)
{
    currentPasswordArray.clear();
    currentPasswordArray.add(newpass);
}//setCurrentPassword 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:38:53.267

您必须使用 Android 平台提供的 3 种方式之一来保存您的数据：

1.  共享首选项
2.  SQLite数据库
3.  文件

如果您只想保存并再次恢复。

但是，如果您只想保存活动的实例，那么您可以覆盖适当的方法。

# c - 通用堆排序：不排序+分段错误

> ID：13734424
> 
> 赞同：2
> 
> 时间：2012-12-05T23:30:29.630
> 
> 标签：c, pointers, function-pointers, void-pointers, heapsort

我需要在 C 中创建一个“通用”堆排序。

我有一个包含比较功能的主文件。本质上，数组的基地址、元素数量、每个元素的大小和比较函数都传递给堆排序函数。我遇到了两个问题，一个是程序没有对其进行排序，所以我想知道是否有人能看出代码有什么问题。两个我在 1710 个元素后遇到分段错误。

```
#include <stdio.h>  
#include <string.h>
#include "srt.h"

void srtheap(void *, size_t, size_t, int (*)(const void *, const void *));
void heapify(void *, size_t, size_t, size_t, int (*)(const void *, const void *)); 

void srtheap(void *base, size_t nelem, size_t size, int (*compar)(const void *, const void *)) {
  char *p1, *p2;
  char *qb=base;
  void *last = qb + (size*(nelem-1));
  for (size_t curpos = nelem-1; curpos>0; curpos=-2){
    p1 = qb + ((curpos-1)/2)*size;
    if(compar(last, (last-size)) >= 0){ 
      if(compar(last, p1) > 0){
        swap(last, p1, size);
        heapify(qb, nelem, curpos, size, compar); 
      }
    }
    else { //LEFT>RIGHT
      if(compar(last-size, p1) > 0){
         swap(last-size, p1, size);
         heapify(qb, nelem, curpos-1, size, compar);
      }
           //otherwise, parent is greater than LEFT & RIGHT,
           //or parent has swapped with child, iteration done, repeat through loop
    }      //end else, children have been compared to parent
           //end check for two children, only left child if this loop is skipped
    last = last-(2*size);
  }

/*
  **Now heapify and sort array
  */
  while(nelem > 0){
    last = qb + (size*(nelem-1)); 
    swap(qb, last, size);
    nelem=nelem-1;
    heapify(qb, nelem, 0, size, compar); //pass in array, #elements, starting pos, compare
  }

}

void heapify(void *root, size_t numel, size_t pos, size_t sz, int (*compar)(const void *, const void *)){
  void *rc, *lc, *p1;
  while(pos < numel){
    rc = root+((pos+1)*2)*sz; //right child
    lc = root+(((pos+1)*2)-1)*sz; //left child
    p1 = root+(pos*sz); //parent
    if((pos+1)*2 < numel){ //check if current element has RIGHT
      if (compar(rc, lc)>=0){
    if(compar(rc, p1)>0) {
      swap(rc, p1, sz);
      pos=(pos+1)*2; //move to RIGHT, heapify
        }
    else {
      pos = numel; //PARENT>LEFT&RIGHT, array is heapified for now 
        }
      } //end RIGHT>LEFT
      else { //LEFT>RIGHT
    if(compar(lc, p1) >0 ) {
      swap(lc, rc, sz);
      pos=((pos+1)*2)-1; // move to LEFT, heapify
    }
        else {
      pos = numel; //PARENT>LEFT&RIGHT, array is heapified for now
        } //end inner if, else
      }//end LEFT,RIGHT comparison
    }//end check for RIGHT
    else if (((pos+1)*2)-1 < numel){ //else, check if element has LEFT
      if(compar(lc, p1)>0){
    swap(lc, p1, sz);
    pos=((pos+1)*2)-1; //move to LEFT, continue heapify
      }
      else {
    pos = numel; //PARENT>LEFT, array is heapified for now
      }
    }//end check for LEFT
    else { //current element has no children, array is heapified for now
      pos = numel;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:08:29.137

[您的代码和问题似乎与 2010 年的这个问题](https://stackoverflow.com/questions/4259413/c-generic-heapsort)惊人地相似，所以我怀疑这是一个家庭作业。

关于崩溃，问题出在以下行中`srtheap`：

```
for (size_t curpos = nelem-1; curpos>0; curpos=-2){ 
```

循环的更新表达式`curpos=-2`是错误的。你可能想要`curpos-=2`. 但是，如果是这种情况，仍然存在问题。`size_t`是无符号类型，因此如果原始数组中有偶数个元素，那么最终程序将达到`curpos`等于`1`. 当它尝试减去时`2`，结果将是一个非常大的正数，而不是`-1`您可能期望的那样。因此，循环条件 ,`curpos>0`将评估为真，并且循环将尝试访问一个数组元素，远远超出数组的末尾，从而触发崩溃。

我不愿意弄清楚为什么您的代码没有正确排序，因为它看起来不必要地复杂。这是一个基于[此实现](http://www.algorithmist.com/index.php/Heap_sort)的通用堆排序。

```
void srtheap(void *base, size_t nelem, size_t size, int (*compar)(const void *, const void *))
{
    char *cb = (char *)base;

    size_t i = (nelem / 2);
    while (1) {
        heapify(cb, size, i, nelem-1, compar);
        if (i == 0) break;
        i--;
    }

    for (size_t i = nelem-1; i >= 1; i--) {
        swap(cb, cb+(size * i), size);
        heapify(cb, size, 0, i-1, compar);
    }
}

void heapify(char *base, const size_t size, size_t root, const size_t bottom, int (*compar)(const void *, const void *))
{
    size_t maxChild = root * 2 + 1;

    if (maxChild < bottom) {
        size_t otherChild = maxChild + 1;
        maxChild = (compar(base + (otherChild * size), base + (maxChild * size)) > 0) ? otherChild : maxChild;
    } else {
        if (maxChild > bottom) return;
    }

    if (compar(base + (root * size), base + (maxChild * size)) >= 0) return;

    swap(base + (root * size), base + (maxChild * size), size);

    heapify(base, size, maxChild, bottom, compar);
} 
```

此版本使用递归，但将其转换为循环是一个简单的练习。我会把它留给读者。

# jquery - 图像缩略图浏览器调整大小质量

> ID：13734425
> 
> 赞同：1
> 
> 时间：2012-12-05T23:30:53.457
> 
> 标签：jquery, html, css

我有一个自动生成大图像缩略图的滑块。问题是，虽然在 Chrome 中调整大小的图像质量很好，但在 Firefox/IE 中却很糟糕。它看起来太锐利了，无法阅读文本。

有没有办法通过 css/html 解决这个问题？我附上一个例子来帮助你理解我的问题：

[http://i49.tinypic.com/2vba8t0.jpg](http://i49.tinypic.com/2vba8t0.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:37:16.010

我相信 Chrome 看起来不错的原因是因为他们将它内置到他们的应用程序中以在这种情况下优化图像以使用户看起来更好，而其他浏览器则没有。因此，您将需要一些可以为您正确缩小图像的东西，并且您当前似乎正在手动设置较大图像的宽度和高度以制作较小的图像。我不知道适合您的 css/html 解决方案，除非您手动将缩略图制作成适当的大小并加载它们而不是大的。如果您不想这样做，您可以使用像[jQuery NailThumb](http://www.garralab.com/nailthumb.php)这样的解决方案，它将通过 javascript 为您创建它们。

# asp.net - 我可以覆盖特定页面的会话提供程序吗？

> ID：13734428
> 
> 赞同：0
> 
> 时间：2012-12-05T23:30:58.740
> 
> 标签：asp.net, session-state, sql-session-state

我可以指定一个页面的 InProc 会话提供程序，以及所有其他页面的数据库支持的会话提供程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:36:52.047

我相信你可以。请查看以下文章：[http ://abhijitjana.net/2011/01/15/programmatically-changeing-session-state-behavior-in-asp-net-4-0/](http://abhijitjana.net/2011/01/15/programmatically-changing-session-state-behavior-in-asp-net-4-0/)

# regex - vi 序列号生成

> ID：13734430
> 
> 赞同：4
> 
> 时间：2012-12-05T23:31:15.300
> 
> 标签：regex, vi, vim

我需要`vi`用这种模式创建一个文件。有没有办法使用第一行自动生成这些行

```
run 1 end
run 2 end
run 3 end
run 4 end
run 5 end
run 6 end 
```

我总是可以在 excel 中执行此操作，然后将其转换为文本文件，然后切换到`vi`，但想知道是否有办法做到这一点，`vi`这样我就不必切换回 excel

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T23:52:04.040

`:help ctrl-a`

^a 增加光标下的数字，您可以在宏中使用它。对于您的情况，假设您有第一行并且光标在其上：

```
qaYpw^aq4@a 
```

应该做的伎俩。这是帮助页面中概述的技术，修改`w`为将光标向前移动到数字。分解它：

*   `qa`开始在寄存器中录制宏`a`*   `Y`拉出当前行*   `p`将 yank 缓冲区放在当前位置下方并移动到新行的第 1 列*   `w`前进一个字（到数字）*   `^a`增加数字*   `q`停止录制宏*   `<count>@a`应用宏 <count> 次

    另一种技术是使用外部工具。例如，如果您已经有了该行并且光标在其上：

    ```
    !!awk '1;{for(i=0;i<5;i++){$2+=1; print}}' 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T03:06:52.503

`:put!=map(range(1,6),'\"run \".v:val.\" end\"')`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T00:49:45.570

威廉的回答非常好。我会发布另一个解决方案（它有点复杂），假设你已经有了第一行

```
Y6P
:let g:I=1
:%g/\d/s/\d/\=g:I/|let g:I=g:I+1 
```

*   let 允许您分配变量
*   g 运行一个全局命令
*   \d 匹配行中的数字
*   s 是替代品
*   \d 是因为你要写一个数字
*   \= 是替换表达式（见`:help sub-replace-\=`：）
*   g:I 是我们在表达式中替换的变量，让变量 g:I 递增

# java - 查找有问题的非可序列化成员变量的路径

> ID：13734431
> 
> 赞同：8
> 
> 时间：2012-12-05T23:31:15.433
> 
> 标签：java, serialization

在 Java 中，序列化使读取和写入对象到流非常容易。例如，以下代码片段几乎就是将对象写入流所需的全部内容：

```
ObjectOutputStream oos = ... //Initialize your output stream
Object toWrite = ...         //Initialize what you want to write here
oos.writeObject(toWrite);    //Writes the object to the stream
oos.flush(); 
```

`toWrite`如果的类实现了`Serializable`接口，并且 的所有`toWrite`非`transient`成员变量也是，这将工作得很好`Serializable`。换句话说，您尝试通过`toWrite`引用发送的整个对象层次结构必须是`Serializable`. 假设这段代码的唯一问题是里面`toWrite`的东西不是`Serializable`.

如果层次结构不完全`Serializable`，则调用会`oos.writeObject(toWrite)`抛出`java.io.NotSerializableException`. 这一切都很好，除了异常并没有为您提供快速解决问题所需的一切。它会告诉你哪些类不能被序列化。您的堆栈跟踪可能如下所示：

```
java.io.NotSerializableException: some.package.and.ClassIDidntExplicitlyReference
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    ...
    at my.package.MyClass.codeThatWroteTheOffendingObject(MyClass.java:###) 
```

这种类型为您指明了正确的方向，但在涉及由 引用的深层对象层次结构的情况下，`toWrite`并不总是清楚有问题的类引用来自哪里。假设我分配`toWrite`给 的一个实例，`MyClass`并且我的实例`MyClass`有一个名为的成员 Object 引用`nonSerializableReference`，该引用已设置为 的实例`ClassIDidntExplicitlyReference`，而不是`Serializable`。我希望看到类似下面的打印出来：

```
my.package.MyClass.nonSerializableReference instanceof some.package.and.ClassIDidntExplicitlyReference 
```

我知道这个问题可能没有快速解决方案，并且可能涉及使用反射。以前这里有没有人这样做过，如果是这样，你介意分享你的见解吗？

**回答**

我最终使用反射`Field`和`Modifier`类来找到路径。不幸的是，我无法分享我的代码（违反公司政策），但我可以向您展示我的输出。A 类持有 B 的实例，B 持有 C 的实例，C 持有 D 的实例。`Serializable`除了 D 之外，我最终使用 Depth-First-Search 来查找路径：

```
A.b -> 
  B.c -> 
    C.d instanceof class D 
```

如果我做`C.d`瞬态，搜索不会产生任何结果。很酷！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-12-07T03:17:27.687

将标志传递`-Dsun.io.serialization.extendedDebugInfo=true`给 JVM，它应该在`NotSerializableException`抛出 a 时准确地为您提供所需的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-01T21:43:27.393

我有同样的问题，我也实现了你所说的爬虫。如果有人仍然对它感兴趣，我在这里展示了代码：[A good way to find unserializable fields in Java](https://stackoverflow.com/questions/25074673/a-good-way-to-find-unserializable-fields-in-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T00:40:57.023

这是一个奇怪的问题——你想在运行时确定你应该在编译时做什么。从理论上讲，对象的路径*应该*无关紧要 - 您需要找到引用不可序列化的事物的对象来修复您的代码。

也就是说，您可以使用反射编写一个简单的递归树爬虫。也就是说，您可能能够摆脱实现自己的 ObjectInputStream 来记录适当传入的对象。我建议查看[源](http://docjar.com/html/api/java/io/ObjectInputStream.java.html)以获取更多详细信息

# java - 接口的java类和类型

> ID：13734432
> 
> 赞同：2
> 
> 时间：2012-12-05T23:31:16.143
> 
> 标签：java

我有一个关于 java 语法的问题。我找到了示例程序。

```
public class Main {
  public static void main(String[] args) {
    BookShelf bookShelf = new BookShelf(2);
    bookShelf.appendBook(new Book("around 80 Days"));
    bookShelf.appendBook(new Book("trivial solution"));
    Iterator it = bookShelf.iterator();
  }
} 
```

这是使用以下接口编译的。

```
public interface Iterator {
  public abstract boolean hasNext();
  public abstract Object next();
} 
```

在这个程序中，是“迭代器”类还是类型？如果是类，则需要“新”来创建实例，如下句所示。

```
Iterator it = new Iterator(); 
```

否则，是“迭代器”类型吗？接口是否用作类型？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:35:46.720

迭代器是一个接口。类公开迭代器的最常见方法是实现 Iterable ，它又是一个接口。

迭代器为您提供了一种机制，您可以通过该机制逐步遍历集合中的所有成员。

有关迭代器的描述，请参见[http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)。

有关可迭代接口，请参见[http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html 。](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)

迭代器是 GOF Book 中第一次提到的设计模式。（我相信）

另请注意，您不能单独创建新的迭代器。它确实需要一个实现才能运行。它通常由您的示例中的给定类（BookShelf）给出，因为该类知道如何逐步完成它的内部结构。

由于它是一个接口，因此不能使用 new 运算符声明它。但是它的具体实现是可以的。

# java - 按下按钮后如何获得文本字段的焦点所有者？

> ID：13734435
> 
> 赞同：0
> 
> 时间：2012-12-05T23:31:24.410
> 
> 标签：java, swing

好的，我正在尝试创建一个计算器类型的程序来解决我输入的函数的极值。为此，我必须设置该功能开启的时间间隔。这意味着我有三个不同的文本字段，一个用于方程式，两个用于间隔。

所以，我可以成功地将数字输入到我的方程式字段中，但是尝试输入其他两个会带来问题。我知道，如果我单击两个文本字段中的任何一个，它将获得焦点。如果我尝试通过检查它是否具有焦点来设置字段的新文本，我永远不会得到结果，因为单击按钮总是将焦点更改为按钮。

TL;博士

**我如何确定哪个文本字段以前具有焦点，以便我知道将数字放入其中。**

编辑：如果有更好的输入方式，我会很高兴知道它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:37:43.103

[您的问题似乎是XY 问题](http://www.perlmonks.org/index.pl?node_id=542341)的一个示例，您将注意力集中在焦点上，就好像它是主要问题一样，而真正的问题（对我来说无论如何）是确保用户在进行计算之前输入了所有数据。

我建议不要担心焦点。使用 DocumentListeners 检查 JTextFields 是否为空，并禁用计算按钮，直到所有 JTextFields 中都有一些文本。我不认为重点对此真的很重要。

**编辑**
你状态：

> 好的，如果您认为您可以更好地解决这种情况。我有对应于数字 0-9 和各种功能的三个文本字段和按钮。我希望能够单击一个文本字段，从按钮输入我的数字，单击另一个字段，然后从我制作的按钮中输入我的数字。如何获取用户单击的文本字段？

好的，这有助于我更好地理解您的问题。一种可能的解决方案：通过调用`myButton.setFocusable(false)`每个 JButton 使 JButton 无法聚焦。然后按下按钮不会从 JTextField 中移除焦点。

# jquery - 滚动时上滑 - 关闭按钮不令人满意

> ID：13734440
> 
> 赞同：1
> 
> 时间：2012-12-05T23:32:01.277
> 
> 标签：jquery, css, scroll, slideup

当您向下滚动一定量时，我的内容会从页面底部向上滑动。

单击按钮将关闭上滑。

但是，如果您继续向下滚动页面，则会再次出现上滑。

如果仅单击一次关闭按钮，如何使上滑消失一劳永逸？

这是脚本：

```
$(document).ready(function(){ 
$(window).scroll(function(){ 
var h = $('#container').height(); 
var y = $(window).scrollTop();

        if( y > (h*.25) ) { 
            $("#btmsUpContainer").slideDown("slow"); 
        } else { 
            $("#btmsUpContainer").slideUp("slow"); 
        } 
}); 

$('.close-it').bind('click', function() {
        $("#btmsUpContainer").slideUp("slow"); 
    return false;
}); 
}) 
```

这是CSS：

```
#btmsUpContainer { position: fixed; width: 170px; bottom: 29px; z-index: 7777; margin: 0; padding: 0; display: none; }
#btmsUp { left: 0; width: 170px; margin: 0; }
#btmsUp .close-it { position: absolute; left: 160px; top: 12px; right: 0; z-index: 7778; width: 10px; } 
```

这是页面代码：

```
<div id="btmsUpContainer">
<div id="btmsUp">

<span class="close-it"><a href="#"><img src="close-it.png" style="width: 10px; height: 10px; border: 0;"></a></span><br />

This is stuff that appears in the box that slides up.

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:39:05.087

在用户关闭内容时设置一个`hidden`变量，并在滑动前检查它：

```
$(document).ready(function(){ 
    var hidden = false; //Initialize the 'hidden' variable to 'false'
    $(window).scroll(function(){ 
        if(!hidden){ //Check if the user has hidden the content
            var h = $('#container').height(); 
            var y = $(window).scrollTop();
            if( y > (h*.25) ) { 
                $("#btmsUpContainer").slideDown("slow"); 
            } else { 
                $("#btmsUpContainer").slideUp("slow"); 
            } 
        }
    }); 

    $('.close-it').bind('click', function() {
        $("#btmsUpContainer").slideUp("slow");
        hidden = true; //Set the 'hidden' variable to 'true'
        return false;
    }); 
}) 
```

# javascript - jQuery noconflict 新版本，同时保留旧 jQuery

> ID：13734441
> 
> 赞同：1
> 
> 时间：2012-12-05T23:32:05.317
> 
> 标签：javascript, jquery

我有一个设计非常糟糕的项目，它基本上是一个实体设置。升级显然从来都不是一个昙花一现的想法。

例如，此开发中的所有外部脚本都存储在主体的顶部，移动它们会破坏一切，因为它是如何推出的。所以我的困境是：如果这个现有项目是建立在 jQuery 1.4.4 之上的，那么很多计划中的新东西都依赖于 1.7 及更高版本的东西。不幸的是，我需要先加载 1.4.4，然后在加载 1.8.3 时将其作为标准，并让 1.8.3 成为没有设置冲突的版本。问题是无论我如何尝试在 1.4.4 之前或之后加载版本 1.8.3，1.8.3 最终都会覆盖 1.4.4 并导致全部损坏或静默故障。

我可以做些什么来加载两者并让 1.8.3 在不破坏 1.4.4 的情况下成为我的无冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:52:48.313

假设您的 jquery 1.4.4 设置为 $，您可以执行以下操作：

```
<script src='http://code.jquery.com/jquery-1.4.4.min.js'></script>
<script> var $ = jQuery.noConflict(); </script>
<script src='http://code.jquery.com/jquery.min.js'></script>
<script> var newJquery = jQuery.noConflict(); </script> 
```

小提琴示例：http: [//jsfiddle.net/6BvNh/1/](http://jsfiddle.net/6BvNh/1/)

# node.js - 将变量添加到连接资产

> ID：13734447
> 
> 赞同：1
> 
> 时间：2012-12-05T23:32:35.843
> 
> 标签：node.js, coffeescript, express, connect, ejs

我正在尝试将我的 app.js 文件中的一些变量添加到由 connect-assets 编译的文件中。

我有一个文件叫`file.ejs`

```
<%- js('code.js') %>
<input type="text" value="Doe"> 
```

在`app.js`我有：

```
 app.locals.url = 'http://123.123.123.123' 
```

在`code.js`我想根据系统（`<%- url %>`）添加一些生产/开发变量。当我尝试这样做时，添加的变量被拒绝，因为 connect-assets 正在将它们编译为标签。将变量传入的正确方法是什么`code.js`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:03:37.630

`code.js`被视为静态文件，因此您不能从 EJS 模板将变量传递给它。通常，在这种情况下，您基于环境传递数据，您将设置某种可以在内部读取的全局配置变量`code.js`。

`app.locals`您可以在某处为不同的环境设置一组设置，而不是为这样的值全局设置。在你的代码中说你有这个：

```
var environments = {
  production: {
    url: 'http://1.1.1.1'
  },
  development: {
    url: 'http://2.2.2.2'
  }
}; 
```

当您渲染您的主页模板时，或者在某个容易访问的地方，您可以在任何环境中传递适当的设置。在渲染模板时，您传递设置。`html = new EJS(...).render({settings: settings['production']});`

```
<html>
  <head>
    <script type="text/javascript">
      var AppSettings = <%= JSON.stringify(settings); %>;
    </script>

    ... 
```

然后在你的`code.js`文件里面，你可以`AppSettings.url`直接阅读。

# linux - htaccess 将子文件夹重定向到子域

> ID：13734449
> 
> 赞同：1
> 
> 时间：2012-12-05T23:32:48.000
> 
> 标签：linux, apache, .htaccess, mod-rewrite

我在 Linux 服务器上运行 Apache mod_rewrite，我需要将子文件夹重定向到子域并从 url 中删除子文件夹。例如：

[http://www.mydomain.com/forum/forum_posts.asp?TID=11816&PID=252908&title=pouch-information-day-the-next-one#252908](http://www.mydomain.com/forum/forum_posts.asp?TID=11816&PID=252908&title=pouch-information-day-the-next-one#252908)

需要重定向到

[http://subdomain.mydomain.com/forum_posts.asp?TID=11816&PID=252908&title=pouch-information-day-the-next-one#252908](http://subdomain.mydomain.com/forum_posts.asp?TID=11816&PID=252908&title=pouch-information-day-the-next-one#252908)

请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T23:39:46.793

[Apache URL 重写指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)是一个很好的参考。我会这样做：

```
RewriteCond %{HTTP_HOST}%{REQUEST_URI} ^www.mydomain.com/forum/
RewriteRule ^/forum/(.*) http://subdomain.mydomain.com/$1 [L,R] 
```

# matlab - 使用 Simulink“Shift Arithmetic”模块抑制溢出警告

> ID：13734450
> 
> 赞同：3
> 
> 时间：2012-12-05T23:32:48.797
> 
> 标签：matlab, overflow, simulink

我正在使用 Simulink R2012a [Shift Arithmetic](http://www.mathworks.com/help/simulink/slref/shiftarithmetic.html)模块来计算`x << 2`x 是 16 位定点 Q15 类型数的位置`fixdt(1,16,15)`。

在这种特殊情况下，溢出不是错误。（我希望值 0、16384 = 0.5、-16384 = -0.5 和 -32768 = -1.0 都映射到值 0。）

问题是，对于发生这种情况的每个实例，我都会从命令控制台中得到溢出警告：

```
 Warning: Overflow occurred. This originated from 'foo/bar/baz/Shift Arithmetic'. 
```

我只想禁用一组特定块的溢出警告（有意进行这种移位行为的块），而不是一般的所有块甚至所有 Shift Arithmetic 块。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:23:10.817

由于它是一个简单的块，因此解决方案可能是构建自己的不会触发警告的块。

编辑：我尝试使用“Matlab 函数”

```
function y = fcn(u)
y = bitshift(u, 2, 8); 
```

我的结果与输入 255 和类型 uint8 但没有警告的左 2 位移位块相同。

# python - 在 Python 中使用索引拆分字符串

> ID：13734451
> 
> 赞同：21
> 
> 时间：2012-12-05T23:32:58.707
> 
> 标签：python

我正在寻找将句子拆分为单词的pythonic方法，并且还存储句子中所有单词的索引信息，例如

```
a = "This is a sentence"
b = a.split() # ["This", "is", "a", "sentence"] 
```

现在，我还想存储所有单词的索引信息

```
c = a.splitWithIndices() #[(0,3), (5,6), (8,8), (10,17)] 
```

实现 splitWithIndices() 的最佳方法是什么，python 是否有任何我可以使用的库方法。任何可以帮助我计算单词索引的方法都会很棒。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-05T23:42:16.253

这是一个使用正则表达式的方法：

```
>>> import re
>>> a = "This is a sentence"
>>> matches = [(m.group(0), (m.start(), m.end()-1)) for m in re.finditer(r'\S+', a)]
>>> matches
[('This', (0, 3)), ('is', (5, 6)), ('a', (8, 8)), ('sentence', (10, 17))]
>>> b, c = zip(*matches)
>>> b
('This', 'is', 'a', 'sentence')
>>> c
((0, 3), (5, 6), (8, 8), (10, 17)) 
```

作为一个单行：

```
b, c = zip(*[(m.group(0), (m.start(), m.end()-1)) for m in re.finditer(r'\S+', a)]) 
```

如果您只想要索引：

```
c = [(m.start(), m.end()-1) for m in re.finditer(r'\S+', a)] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-06T00:04:55.487

我认为返回相应拼接的开始和结束更自然。例如 (0, 4) 而不是 (0, 3)

```
>>> from itertools import groupby
>>> def splitWithIndices(s, c=' '):
...  p = 0
...  for k, g in groupby(s, lambda x:x==c):
...   q = p + sum(1 for i in g)
...   if not k:
...    yield p, q # or p, q-1 if you are really sure you want that
...   p = q
...
>>> a = "This is a sentence"
>>> list(splitWithIndices(a))
[(0, 4), (5, 7), (8, 9), (10, 18)]

>>> a[0:4]
'This'
>>> a[5:7]
'is'
>>> a[8:9]
'a'
>>> a[10:18]
'sentence' 
```

# javascript - 如何读取 extjs 数据存储

> ID：13734452
> 
> 赞同：3
> 
> 时间：2012-12-05T23:33:09.327
> 
> 标签：javascript, extjs

我想读取 extjs 数据存储的特​​定值并在本地对其进行操作。响应 xml 看起来像：

```
<user><name>abc</name><surname>def</surname><book><bname>book1</bname></book></user> 
```

当收到响应并且我想读取“bname”值时，我的商店将只有一个用户条目。到目前为止，我已经尝试了两种方法，并且都给出了错误。

方法1：

```
Ext.define('user', {
     extend: 'Ext.data.Model',
     fields: [ 'name', 'surname'],
     hasMany: {model: 'Book', name: 'book'},
      proxy: {
        type: 'rest',
         url : request,
         reader: { type: 'json', root: 'user'}
     }
 });
 Ext.define('Book', {
     extend: 'Ext.data.Model',
     fields: [ 'name'],
     belongsTo: 'user'
 });
 var userstore = Ext.create('Ext.data.Store', {
        model: "user"
 });
 incidentstore.load({
     callback: function() {
        var inc = userstore.first();
        var bk = inc.getBook();
        console.log(dev.get('bname'));
    }
}); 
```

运行上面的代码会给出“Ext.define 不是函数”的错误。

方法2：

```
var proxy1 = new Jx.JxHttpProxyRest({
    url: request,
    api : {
            read : { headers : {     'Accept' : APP + '.abc.def.usermanage.user+json;version=1' } }
        }
    });

var reader = new Ext.data.XmlReader( {
    rootProperty : 'user',
    record : 'book',
    id : 'id',
}, [{ name : 'bname', mapping : 'book > bname'} ]);

var writer = new Ext.data.XmlWriter( {
    encode : false
});

var newstore = new Ext.data.Store( {
    id : 'book',
    restful : true,
    proxy : proxy1,
    remoteSort : true,
    reader : reader,
    writer : writer,
    autoload: true,
    listeners: {
        load: function() {
            console.log(newstore.data.first());
        }
    }
});
Ext.data.DataProxy.addListener('load', function(proxy, type, action, options, res) {
    console.log(res.responseText);
});
newstore.load( {
    params : { start : 0, limit : myPageSize },

}); 
```

上面的代码不会在控制台上显示任何内容。

我是 extjs 的新手，不知道如何从响应中访问“bname”值。如果有人可以提供帮助，那就太好了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T00:21:28.397

看看这个：

```
// The user model definition
Ext.define('user', {
   extend: 'Ext.data.Model',
   fields: [ 'name', 'surname', 'book' ]
});

// The store instance
var userstore = Ext.create('Ext.data.Store', {
   model: 'user',
   proxy: {
        type: 'memory',
        reader: {
            type: 'xml',
            record: 'user',
            root: 'users'
        }
    }
});

// data sample to test the approach
mydata =
    [
        ['Juan', 'Alonso', [ { bname: 'El loco' }, { bname: 'El cuerdo' } ]],
        ['Susana', 'Cabrera', [ { bname: 'Adios a las palomas' }]]
    ];

// load the store with the sample data 
userstore.loadData(mydata, false);  

// display the first book for the first record
var firstRecord = userstore.getAt(0);
var firstBook = firstRecord.get('book')[0]; 
alert(firstBook.bname ) 
```

或在这里查看工作代码：http: [//jsfiddle.net/lontivero/HTj5Q/](http://jsfiddle.net/lontivero/HTj5Q/)

如您所见，它工作正常。但是，如果您的商店“总是”只有一条记录，那么您不应该使用商店，您应该使用模型并加载模型。

**更新**：

好的，如果您使用的是 extjs 3.1.1（之前最好提供如此重要的信息），您可以按照以下方式进行操作：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
      <title>For extjs 3.1.1</title>

        <script src="http://extjs-public.googlecode.com/svn/tags/extjs-3.1.1/release/adapter/ext/ext-base.js" type="text/javascript" ></script>
        <script src="http://extjs-public.googlecode.com/svn/tags/extjs-3.1.1/release/ext-all.js" type="text/javascript" ></script>
    </head>
    <body>
        <script type="text/javascript">
        Ext.onReady(function(){
            // The store instance
            var userstore = new Ext.data.ArrayStore({
                 fields: ['name', 'surname', 'book'],
                 reader: new Ext.data.ArrayReader({
                     idIndex: 0  // id for each record will be the first element
                 })
            });

            // data sample to test the approach
            mydata =
                 [
                      ['Juan', 'Alonso', [ { bname: 'El loco' }, { bname: 'El cuerdo' } ]],
                      ['Susana', 'Cabrera', [ { bname: 'Adios a las palomas' }]]
                 ];

            // load the store with the sample data 
            userstore.loadData(mydata, false);  

            // display the first book for the first record
            var firstRecord = userstore.getAt(0);
            var firstBook = firstRecord.get('book')[0]; 
            alert(firstBook.bname );
        });

        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:31:54.583

下面的代码对我有用：

```
var newproxy = new Ext4.data.proxy.Rest({
    url : request,
    headers : {
        },
    reader :  {
        type : 'json',
        root : 'user.book'
    }});

 // Typical Store collecting the Proxy, Reader and Writer together.
 var newstore = Ext4.create('Ext4.data.Store', {
     id : 'book',
     fields: ['bname'],
     restful : true, // <-- This Store is RESTful
     autoLoad : true,
     proxy : newproxy
 });

var book;
newstore.load();
newstore.each(function(rec) {
    book= rec.get('bname');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T00:00:19.617

您使用的是 Ext 版本 4 代码，但您的库是 3.1.1

除非您将库升级到版本 4，否则它根本行不通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T22:29:45.030

为了使 Lontivero 的示例完整，使用 findRecord 方法查找特定键上的记录也很有用。如下示例所示（基于 lontivero 的示例），它只会获取第一个找到的记录。因此，如果您使用具有唯一键的商店，这将非常有用。

您可以在以下位置查看此示例：http: [//jsfiddle.net/jvandemerwe/dGUGb/25/](http://jsfiddle.net/jvandemerwe/dGUGb/25/)

```
// The user model definition
Ext.define('user', {
   extend: 'Ext.data.Model',
   fields: [ 'name', 'surname', 'book' ]
});

// The store instance
var userstore = Ext.create('Ext.data.Store', {
   model: 'user',
   proxy: {
        type: 'memory',
        reader: {
            type: 'xml',
            record: 'user',
            root: 'users'
        }
    }
}); 

// data sample to test the approach
mydata =
    [
        ['Juan', 'Alonso', [ { bname: 'El loco' }, { bname: 'El cuerdo' } ]], 
        ['Juan', 'Lopez', [ { bname: 'Superdooper' }, { bname: 'Swinglist' } ]],  
        ['Susana', 'Cabrera', [ { bname: 'Adios a las palomas' }]]
    ];

// load the store with the sample data 
userstore.loadData(mydata, false);  

// Finds the first!!! matching Record in this store by a specific field value.
// API info: findRecord( fieldName, value, [startIndex], [anyMatch], [caseSensitive], [exactMatch] )

var keyToFind = 'Juan';
var found = userstore.findRecord('name', keyToFind, 0, false, false, true);

if (found != null) {

    var list = '';
    var author = found.get('name')+' '+ found.get('surname');
    var books = found.get('book');

    Ext.each(books, function(book, idx) {
        if (list != '') list = list + ', ';
        list = list+book.bname;
    });

    alert('Books of '+author+'\n'+list);
} else {
    alert('no books with key \''+keyToFind+'\'');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-16T12:46:14.223

```
var departmentStore = Ext.create('Ext.data.Store', {
fields : [
'name',
'active',
'dateActive',
'dateInactive',
'description',
'director',
'numEmployees',
{
name : 'id',
type : 'int'
}
],
proxy : {
type : 'ajax',
url : 'data.json',
reader : {
type : 'json',
root : 'data',
idProperty : 'id',
//successProperty : 'meta.success'  //???
}
}
});

departmentStore.load({
callback : function(records, operation, successful) {
if (successful) {
console.log('department name:',
records[0].get('name'));
}
else {
console.log('the server reported an error');
}
}
}); 
```

# image - www 扩展的图像加载问题

> ID：13734455
> 
> 赞同：0
> 
> 时间：2012-12-05T23:33:20.403
> 
> 标签：image, cross-browser, load

我在加载图像时在 safari 中有一张图像。如果我去掉“www”扩展名，页面加载就很好，但是，如果我包含“www”，它就找不到某些图像。两者的链接如下。有没有人有任何想法可能导致这种情况？Safari 是唯一给我带来问题的浏览器。它在 Opera 和 IE 9 中运行良好。

[图像加载](http://bmckinnondesign.com/bwcollection.html) [图像不会加载](http://www.bmckinnondesign.com/bwcollection.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:43:19.253

您是否使用规范网址？意思是使用`.htaccess`文件将所有流量导向或远离`www`？

我将在根 .htaccess 文件中包含以下内容：

```
 RewriteEngine On
 RewriteCond %{HTTP_HOST} ^yoursite.com
 RewriteRule (.*) http://www.yoursite.com/$1 [R=301,L] 
```

这将迫使一切`www.yoursite.com`......所以图像和网页将需要`www`地址，如果它们被调用`http://yoursite.com/image/image.gif` - 它会将请求更改为`http://www.yoursite.com/images/image.gif`动态。

# authentication - CakePHP 2 Auth 在尝试登录时什么也不做

> ID：13734456
> 
> 赞同：1
> 
> 时间：2012-12-05T23:33:22.570
> 
> 标签：authentication, cakephp-2.1

我正在使用 cakePHP 2，当我的一位客户尝试登录应用程序时，我遇到了一个奇怪的问题。所以故事是这样的：她在数据库中设置了一个帐户，我可以使用她的帐户信息登录，但她不能。她没有显示错误（例如错误的电子邮件/密码）。当她按下登录时，她再次点击登录表单。

所以，在我的 AppController.php

```
public $components = array(
    'Acl',
    'Auth' => array(
                'authorize' => array('Actions' => array('actionPath' => 'controllers')),
                'authenticate' => array('Form' => array('fields' => array('username' => 'email')))
    ),
    'RequestHandler',
    'Session'
);

public function beforeFilter() {
    $group = $this->Auth->user('Group.name');
    $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
    $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');

    if ($group == 'customer') {
        $this->layout = "customer";
        $this->Auth->loginRedirect = array('controller' => 'overviews', 'action' => 'index');
    }
    else {
        $this->layout = "default";
        $this->Auth->loginRedirect = array('controller' => 'pages', 'action' => 'index');
    }
 } 
```

在我的 Config/core.php

```
Configure::write('Session', array(
    'defaults'          => 'cake',
    'checkAgent'        => false,
    'timeout'           => '120',
));

Configure::write('Security.level', 'low'); 
```

我真的不知道问题可能出在哪里......我无法在我自己的计算机上重现该问题。

编辑：UsersController.php 登录（）

```
public function login() {
    $this->layout = 'login';
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
        $this->redirect(array('controller' => 'pages', 'action' => 'index'));

        } else {
            $this->Session->setFlash('Vos identifiants sont incorrectes.');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:11:37.643

尝试从登录操作中删除手动重定向：

```
$this->redirect(array('controller' => 'pages', 'action' => 'index')); 
```

您已经设置`loginRedirect`了 Auth 组件的属性。

否则这很奇怪。要求用户清除所有浏览器缓存 - cookie + 缓存。还要检查`tmp`服务器上的所有目录是否可由 WebServer 用户写入 - 这包括系统`tmp`目录。

评论这篇文章，这样我们就可以继续尝试解决这个问题。它指向一个客户端问题，但你永远不知道。:D

# asp.net - 我得到 BC30205：预期语句结束

> ID：13734467
> 
> 赞同：2
> 
> 时间：2012-12-05T23:34:51.547
> 
> 标签：asp.net, vb.net, razor, c#-to-vb.net

我想知道 Razor 上的这个 VB.NET 代码有什么问题。

```
@grid.GetHtml("table",
               columns:=New WebGridColumn() {grid.Column("RazonSocial", "Razón Social", canSort:=True),
                                              grid.Column("FechaInicioOp", "Fecha Inicio", Function(c) c.FechaInicioOp.ToShortDateString, canSort:=True),
                                              grid.Column("Direccion.Descripcion", "Dirección", canSort:=False),
                                              grid.Column("Direccion.Estado.Nombre", "Estado", canSort:=False),
                                              grid.Column("", "",
                                                          @@<p>
                                                              @Html.ActionLink("Configurar", "Edit", New With {.IdCondominio = item("IdCondominio")}, New With {.class = "ico edit"})
                                                          </p>
                                                          )}) 
```

当我调试应用程序时，我得到这个：“BC30205：预期语句结束。”

我只是想把这个 C# 代码转换成 VB.NET

```
@grid.GetHtml(
fillEmptyRows: true,
alternatingRowStyle: "fila-alternativa",
headerStyle: "encabezado-grid",
footerStyle: "pie-grid",
mode: WebGridPagerModes.All,
firstText: "<< Primera",
previousText: "< Anterior",
nextText: "Siguiente >",
lastText: "Última >>",
columns: new[] {
    grid.Column("Nombre", canSort: false),
    grid.Column("Apellidos"),
    grid.Column("EMail", 
                 format: @<a href="mailto:@item.Email">@item.Email</a>
    ),
    grid.Column("FechaNacimiento", 
                header: "Fecha de nacimiento",
                format: p=>p.FechaNacimiento.ToShortDateString()
    ),
    grid.Column("NumeroDeHijos", 
                header: "Número de hijos",
                style: "a-la-derecha"
    ),
    grid.Column("",
                header: "Acciones",
                format: @<text> 
```

`@Html.ActionLink("Editar", "Edit", new { id = item.IdPersona }) | @Html.ActionLink("Eliminar", "Delete", new { id = item.IdPersona }) </text>)
})`

但我不知道出了什么问题，或者是否缺少某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:45:54.560

我认为您的翻译不太适合列集合。

如果我更改以下内容：

```
columns:=New WebGridColumn() 
```

读书：

```
columns:=grid.Columns( 
```

然后在语句的末尾再添加一个右括号')'，那么它对我有用。

修改后的整个语句如下：

```
@grid.GetHtml("table",
               columns:=grid.Columns(
               {
                   grid.Column("RazonSocial", "Razón Social", canSort:=True),
                   grid.Column("FechaInicioOp", "Fecha Inicio", Function(c) c.FechaInicioOp.ToShortDateString, canSort:=True),
                   grid.Column("Direccion.Descripcion", "Dirección", canSort:=False),
                   grid.Column("Direccion.Estado.Nombre", "Estado", canSort:=False),
                   grid.Column("", "",
                   @@<p>
                   @Html.ActionLink("Configurar", "Edit", New With {.IdCondominio = item("IdCondominio")}, New With {.class = "ico edit"})
                   </p>
                   )})) 
```

希望有帮助。

# mysql - 大写在MySQL中重要吗？

> ID：13734469
> 
> 赞同：5
> 
> 时间：2012-12-05T23:34:59.747
> 
> 标签：mysql, capitalization

我找不到关于 MySQL 查询的哪个部分*区分大小写*的参考。

是否概述了大写的重要性？

具体来说，这些是否*区分大小写*：

*   数据库名称
*   表名
*   列名

它与操作系统相关联吗？可配置？还是其他一些因素的组合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:38:43.237

> 在 MySQL 中，数据库对应于数据目录中的目录。数据库中的每个表对应于数据库目录中的至少一个文件（可能更多，取决于存储引擎）。因此，底层操作系统的大小写敏感性在数据库和表名的大小写敏感性中起作用。这意味着数据库和表名在 Windows 中不区分大小写，而在大多数 Unix 中区分大小写。

.

> lower_case_table_names 系统变量也会影响服务器处理标识符区分大小写的方式

[您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)阅读有关该主题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:39:10.780

这取决于排序规则。例如，如果您的表有`unicode_general_ci`，它将支持通用的 unicode 字符识别算法，并且它会*在** 敏感中区分大小写 *。

# r.java-file - 我的 R.java 文件怎么了？

> ID：13734475
> 
> 赞同：0
> 
> 时间：2012-12-05T23:35:32.513
> 
> 标签：r.java-file

我正在处理一个项目，当我清理它时，它在我的任何命令中都不再识别 R。例如 setContentView(R.layout.add_or_modify); 它不知道 R 是什么。我检查了生成的文件，发现我的 R.java 不见了。发生了什么？我该如何取回它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:37:55.390

如果我没记错的话，你可能在你的 .xml 文件（可能是布局）中犯了一个错误，检查这些文件并确保没有无效的 xml 元素

# javascript - 用户在字段中输入特定文本后尝试更改页面上的 url

> ID：13734482
> 
> 赞同：0
> 
> 时间：2012-12-05T23:36:33.807
> 
> 标签：javascript, jquery

当用户在该页面上的字段中输入特定单词时，我现在正在使用 jquery 来更改页面上的一些文本。我通过将文本放在一个跨度中然后在页面顶部使用此代码来更改页面上的文本。当用户在字段中输入适当的文本时，此代码将被激活。

```
jQuery('#msg1').html('(after coupon code)'); 
```

本质上，这会更改 msg1 范围中的文本。当用户在字段中输入代码时，我还想更改 url。我一直无法弄清楚如何做到这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:40:02.553

您的意思是要在更改文本后重定向用户吗？

```
location.href = "(url)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:37:33.140

您是否在问如何重定向到另一个 URL？它很简单：

```
window.location = "http://www.new-url.com"; 
```

# c++ - 使用 boost::asio 是否有一种可移植的方式来找出可用端口号

> ID：13734486
> 
> 赞同：8
> 
> 时间：2012-12-05T23:36:58.453
> 
> 标签：c++, sockets, boost, tcp, port

我目前正在尝试找出一种方法来找到建立连接的空闲端口的数量，最好是使用 boost::asio。然后这个端口号将用于监听（只有这样我才能打开一个套接字）。

粗略，有没有办法

```
 tcp::resolver::query query("localhost", port); 
```

端口留空的地方（将其设置为 0 不起作用）

之前看到的所有选项都不是可移植的或高效的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T01:43:03.443

处理此问题的最佳方法是让操作系统在套接字绑定到端口时随机选择一个可用端口。告诉套接字绑定到端口 0，如果成功，则向套接字查询它绑定到的实际端口。不要试图提前找到一个端口然后绑定到它，这会引入竞争条件。在你找到它之后但在你绑定它之前，另一个套接字可能会阻塞端口。

# scala - 为什么我在 Play 2 中收到特定方法的错误？

> ID：13734487
> 
> 赞同：0
> 
> 时间：2012-12-05T23:37:02.853
> 
> 标签：scala, playframework-2.0

我有这个方法：

```
def withAuth(f: => User => Request[AnyContent] => Result) = {
    Authentication.isAuthenticated(AuthenticationToken(AuthenticationService.TokenKey)) match {
      case None => Results.Redirect(routes.AuthenticationService.notLoggedIn)
      case Some(user) => Action(request => f(user)(request))
    }
  } 
```

我像这样使用它：

```
 def list(locationId: Option[Int]) = withAuth { user =>
    implicit request =>
      val entities = Assets.filter(user, locationId)
      Logger.info("Succesfully returned %d assets to user %s".format(entities.length, user))
      Ok(Json.toJson(entities.map(s => Json.toJson(s))))
  } 
```

正如您所注意到的，我想像使用一种方法一样使用它，如果用户未登录，则将`Redirect`他带到登录页面，否则从会话中返回用户。问题在于重定向，在运行时 Play 抱怨：

> 不能使用返回对象作为处理程序的方法

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:22:19.130

为了避免上述问题，最后我这样做了：

```
 def onUnauthorized(request: RequestHeader) = Results.Redirect(routes.AuthenticationService.notLoggedIn)

  /**
   * A very important wrapper method which checks if the user is logged-in: if it is, return the User, otherwise
   * redirect the user to a specific page.
   */
  def withAuthentication(f: => Option[User] => Request[AnyContent] => Result) = {
    Security.Authenticated(userId, onUnauthorized) { user =>
      Action(request => f(Users.findById(Integer.valueOf(user)))(request))
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:54:12.163

我认为 withAuth 的返回类型不是你想象的那样。我认为您需要将重定向包装在一个动作中。

# codeigniter - CodeIgniter index.php 配置不起作用

> ID：13734491
> 
> 赞同：1
> 
> 时间：2012-12-05T23:37:34.023
> 
> 标签：codeigniter, wamp, wampserver

好的，我很困惑......我在我的笔记本电脑上工作，但无法使用相同的确切源在我的桌面上工作。所以我觉得这不是 CI，但我什至将我的 httpd.conf 或任何它从 apache 调用的东西从我的笔记本电脑转移到了我的桌面。依然没有。我不断收到此错误：

```
[Wed Dec 05 18:30:40 2012] [error] [client 127.0.0.1] File does not exist: H:/WD SmartWare.swstor/HALEY-HP/Source/DStable/public/register, referer: http://dstable.localhost/index.php/register 
```

同样，当我去[http://dstable.localhost/index.php/register](http://dstable.localhost/index.php/register)时它有效，但不是[http://dstable.localhost/register](http://dstable.localhost/register)

这是我的conf文件：

```
#
# This is the main Apache HTTP server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See <URL:http://httpd.apache.org/docs/2.2> for detailed information.
# In particular, see 
# <URL:http://httpd.apache.org/docs/2.2/mod/directives.html>
# for a discussion of each configuration directive.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "logs/foo.log"
# with ServerRoot set to "C:/Program Files/Apache Software Foundation/Apache2.2" will be interpreted by the
# server as "C:/Program Files/Apache Software Foundation/Apache2.2/logs/foo.log".
#
# NOTE: Where filenames are specified, you must use forward slashes
# instead of backslashes (e.g., "c:/apache" instead of "c:\apache").
# If a drive letter is omitted, the drive on which Apache.exe is located
# will be used by default.  It is recommended that you always supply
# an explicit drive letter in absolute paths to avoid confusion.

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# Do not add a slash at the end of the directory path.  If you point
# ServerRoot at a non-local disk, be sure to point the LockFile directive
# at a local disk.  If you wish to share the same ServerRoot for multiple
# httpd daemons, you will need to change at least LockFile and PidFile.
#
ServerRoot "c:/wamp/bin/apache/apache2.2.22"

#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, instead of the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#
#Listen 12.34.56.78:80
Listen *:80

#
# Dynamic Shared Object (DSO) Support
#
# To be able to use the functionality of a module which was built as a DSO you
# have to place corresponding `LoadModule' lines at this location so the
# directives contained in it are actually available _before_ they are used.
# Statically compiled modules (those listed by `httpd -l') do not need
# to be loaded here.
#
# Example:
# LoadModule foo_module modules/mod_foo.so
#
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
#LoadModule auth_digest_module modules/mod_auth_digest.so
#LoadModule authn_alias_module modules/mod_authn_alias.so
#LoadModule authn_anon_module modules/mod_authn_anon.so
#LoadModule authn_dbd_module modules/mod_authn_dbd.so
#LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
#LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
#LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
#LoadModule authz_owner_module modules/mod_authz_owner.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
#LoadModule cache_module modules/mod_cache.so
#LoadModule cern_meta_module modules/mod_cern_meta.so
LoadModule cgi_module modules/mod_cgi.so
#LoadModule charset_lite_module modules/mod_charset_lite.so
#LoadModule dav_module modules/mod_dav.so
#LoadModule dav_fs_module modules/mod_dav_fs.so
#LoadModule dav_lock_module modules/mod_dav_lock.so
#LoadModule dbd_module modules/mod_dbd.so
#LoadModule deflate_module modules/mod_deflate.so
LoadModule dir_module modules/mod_dir.so
#LoadModule disk_cache_module modules/mod_disk_cache.so
#LoadModule dumpio_module modules/mod_dumpio.so
LoadModule env_module modules/mod_env.so
#LoadModule expires_module modules/mod_expires.so
#LoadModule ext_filter_module modules/mod_ext_filter.so
#LoadModule file_cache_module modules/mod_file_cache.so
#LoadModule filter_module modules/mod_filter.so
#LoadModule headers_module modules/mod_headers.so
#LoadModule ident_module modules/mod_ident.so
#LoadModule imagemap_module modules/mod_imagemap.so
LoadModule include_module modules/mod_include.so
#LoadModule info_module modules/mod_info.so
LoadModule isapi_module modules/mod_isapi.so
#LoadModule ldap_module modules/mod_ldap.so
#LoadModule logio_module modules/mod_logio.so
LoadModule log_config_module modules/mod_log_config.so
#LoadModule log_forensic_module modules/mod_log_forensic.so
#LoadModule mem_cache_module modules/mod_mem_cache.so
LoadModule mime_module modules/mod_mime.so
#LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule negotiation_module modules/mod_negotiation.so
#LoadModule proxy_module modules/mod_proxy.so
#LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
#LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
#LoadModule proxy_connect_module modules/mod_proxy_connect.so
#LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
#LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule setenvif_module modules/mod_setenvif.so
#LoadModule speling_module modules/mod_speling.so
#LoadModule ssl_module modules/mod_ssl.so
#LoadModule status_module modules/mod_status.so
#LoadModule substitute_module modules/mod_substitute.so
#LoadModule unique_id_module modules/mod_unique_id.so
#LoadModule userdir_module modules/mod_userdir.so
#LoadModule usertrack_module modules/mod_usertrack.so
#LoadModule version_module modules/mod_version.so
#LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule php5_module "c:/wamp/bin/php/php5.3.13/php5apache2_2.dll"

<IfModule !mpm_netware_module>
<IfModule !mpm_winnt_module>
#
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch.  
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User daemon
Group daemon

</IfModule>
</IfModule>

# 'Main' server configuration
#
# The directives in this section set up the values used by the 'main'
# server, which responds to any requests that aren't handled by a
# <VirtualHost> definition.  These values also provide defaults for
# any <VirtualHost> containers you may define later in the file.
#
# All of these directives may appear inside <VirtualHost> containers,
# in which case these default settings will be overridden for the
# virtual host being defined.
#

#
# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin admin@localhost

#
# ServerName gives the name and port that the server uses to identify itself.
# This can often be determined automatically, but we recommend you specify
# it explicitly to prevent problems during startup.
#
# If your host doesn't have a registered DNS name, enter its IP address here.
#
ServerName localhost:80

#
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "c:/wamp/www/"

#
# Each directory to which Apache has access can be configured with respect
# to which services and features are allowed and/or disabled in that
# directory (and its subdirectories). 
#
# First, we configure the "default" to be a very restrictive set of 
# features.  
#
<Directory />
    Options FollowSymLinks
    AllowOverride none
    Order deny,allow
    Deny from all
</Directory>

#
# Note that from this point forward you must specifically allow
# particular features to be enabled - so if something's not working as
# you might expect, make sure that you have specifically enabled it
# below.
#

#
# This should be changed to whatever you set DocumentRoot to.
#
<Directory "c:/wamp/www/">
    #
    # Possible values for the Options directive are "None", "All",
    # or any combination of:
    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews
    #
    # Note that "MultiViews" must be named *explicitly* --- "Options All"
    # doesn't give it to you.
    #
    # The Options directive is both complicated and important.  Please see
    # http://httpd.apache.org/docs/2.2/mod/core.html#options
    # for more information.
    #
    Options Indexes FollowSymLinks

    #
    # AllowOverride controls what directives may be placed in .htaccess files.
    # It can be "All", "None", or any combination of the keywords:
    #   Options FileInfo AuthConfig Limit
    #
    AllowOverride all

    #
    # Controls who can get stuff from this server.
    #

#   onlineoffline tag - don't remove
    Order Allow,Deny
    Allow from all

</Directory>

#
# DirectoryIndex: sets the file that Apache will serve if a directory
# is requested.
#
<IfModule dir_module>
    DirectoryIndex index.php index.php3 index.html index.htm
</IfModule>

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

#
# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog "c:/wamp/logs/apache_error.log"

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

<IfModule log_config_module>
    #
    # The following directives define some format nicknames for use with
    # a CustomLog directive (see below).
    #
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common

    <IfModule logio_module>
      # You need to enable mod_logio.c to use %I and %O
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>

    #
    # The location and format of the access logfile (Common Logfile Format).
    # If you do not define any access logfiles within a <VirtualHost>
    # container, they will be logged here.  Contrariwise, if you *do*
    # define per-<VirtualHost> access logfiles, transactions will be
    # logged therein and *not* in this file.
    #
    CustomLog "c:/wamp/logs/access.log" common

    #
    # If you prefer a logfile with access, agent, and referer information
    # (Combined Logfile Format) you can use the following directive.
    #
    #CustomLog "logs/access.log" combined
</IfModule>

<IfModule alias_module>
    #
    # Redirect: Allows you to tell clients about documents that used to 
    # exist in your server's namespace, but do not anymore. The client 
    # will make a new request for the document at its new location.
    # Example:
    # Redirect permanent /foo http://localhost/bar

    #
    # Alias: Maps web paths into filesystem paths and is used to
    # access content that does not live under the DocumentRoot.
    # Example:
    # Alias /webpath /full/filesystem/path
    #
    # If you include a trailing / on /webpath then the server will
    # require it to be present in the URL.  You will also likely
    # need to provide a <Directory> section to allow access to
    # the filesystem path.

    #
    # ScriptAlias: This controls which directories contain server scripts. 
    # ScriptAliases are essentially the same as Aliases, except that
    # documents in the target directory are treated as applications and
    # run by the server when requested rather than as documents sent to the
    # client.  The same rules about trailing "/" apply to ScriptAlias
    # directives as to Alias.
    #
    ScriptAlias /cgi-bin/ "cgi-bin/"

</IfModule>

<IfModule cgid_module>
    #
    # ScriptSock: On threaded servers, designate the path to the UNIX
    # socket used to communicate with the CGI daemon of mod_cgid.
    #
    #Scriptsock logs/cgisock
</IfModule>

#
# "C:/Program Files/Apache Software Foundation/Apache2.2/cgi-bin" should be changed to whatever your ScriptAliased
# CGI directory exists, if you have that configured.
#
<Directory "cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

#
# DefaultType: the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

<IfModule mime_module>
    #
    # TypesConfig points to the file containing the list of mappings from
    # filename extension to MIME-type.
    #
    TypesConfig conf/mime.types

    #
    # AddType allows you to add to or override the MIME configuration
    # file specified in TypesConfig for specific file types.
    #
    #AddType application/x-gzip .tgz
    #
    # AddEncoding allows you to have certain browsers uncompress
    # information on the fly. Note: Not all browsers support this.
    #
    #AddEncoding x-compress .Z
    #AddEncoding x-gzip .gz .tgz
    #
    # If the AddEncoding directives above are commented-out, then you
    # probably should define those extensions to indicate media types:
    #
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddType application/x-httpd-php .php
    AddType application/x-httpd-php .php3

    #
    # AddHandler allows you to map certain file extensions to "handlers":
    # actions unrelated to filetype. These can be either built into the server
    # or added with the Action directive (see below)
    #
    # To use CGI scripts outside of ScriptAliased directories:
    # (You will also need to add "ExecCGI" to the "Options" directive.)
    #
    #AddHandler cgi-script .cgi

    # For type maps (negotiated resources):
    #AddHandler type-map var

    #
    # Filters allow you to process content before it is sent to the client.
    #
    # To parse .shtml files for server-side includes (SSI):
    # (You will also need to add "Includes" to the "Options" directive.)
    #
    #AddType text/html .shtml
    #AddOutputFilter INCLUDES .shtml
</IfModule>

#
# The mod_mime_magic module allows the server to use various hints from the
# contents of the file itself to determine its type.  The MIMEMagicFile
# directive tells the module where the hint definitions are located.
#
#MIMEMagicFile conf/magic

#
# Customizable error responses come in three flavors:
# 1) plain text 2) local redirects 3) external redirects
#
# Some examples:
#ErrorDocument 500 "The server made a boo boo."
#ErrorDocument 404 /missing.html
#ErrorDocument 404 "/cgi-bin/missing_handler.pl"
#ErrorDocument 402 http://localhost/subscription_info.html
#

#
# EnableMMAP and EnableSendfile: On systems that support it, 
# memory-mapping or the sendfile syscall is used to deliver
# files.  This usually improves server performance, but must
# be turned off when serving from networked-mounted 
# filesystems or if support for these functions is otherwise
# broken on your system.
#
#EnableMMAP off
#EnableSendfile off

# Supplemental configuration
#
# The configuration files in the conf/extra/ directory can be 
# included to add extra features or to modify the default configuration of 
# the server, or you may simply copy their contents here and change as 
# necessary.

# Server-pool management (MPM specific)
#Include conf/extra/httpd-mpm.conf

# Multi-language error messages
#Include conf/extra/httpd-multilang-errordoc.conf

# Fancy directory listings
Include conf/extra/httpd-autoindex.conf

# Language settings
#Include conf/extra/httpd-languages.conf

# User home directories
#Include conf/extra/httpd-userdir.conf

# Real-time info on requests and configuration
#Include conf/extra/httpd-info.conf

# Virtual hosts
Include conf/extra/httpd-vhosts.conf

# Local access to the Apache HTTP Server Manual
#Include conf/extra/httpd-manual.conf

# Distributed authoring and versioning (WebDAV)
#Include conf/extra/httpd-dav.conf

# Various default settings
#Include conf/extra/httpd-default.conf

# Secure (SSL/TLS) connections
#Include conf/extra/httpd-ssl.conf
#
# Note: The following must must be present to support
#       starting without SSL on platforms with no /dev/random equivalent
#       but a statically compiled-in mod_ssl.
#
<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>

Include "c:/wamp/alias/*" 
```

在 CI 中，我将索引文件设置为“”，我从中删除了 index.php。然后这是我文件夹根目录中的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt|css|js|favicon\.png)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

有人可以帮帮我吗？我没有想法..我不明白为什么它在我的笔记本电脑上运行，而不是在我的桌面上运行：/我应该查看其他文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:52:42.277

嗯哇没关系！这是处理 httpd-vhosts 文件的事情。我必须有这个：

```
<VirtualHost *:80>
DocumentRoot "H:/WD SmartWare.swstor/HALEY-HP/Source/DStable/public"
ServerName dstable.localhost
<Directory "H:/WD SmartWare.swstor/HALEY-HP/Source/DStable/public">
Options Indexes FollowSymLinks
AllowOverride all
Order deny,allow
Deny from all
Allow from 127.0.0.1
</Directory>
</VirtualHost> 
```

相反，我有：

```
<VirtualHost *:80>
DocumentRoot "H:/WD SmartWare.swstor/HALEY-HP/Source/DStable/public"
ServerName dstable.localhost
<Directory "H:/WD SmartWare.swstor/HALEY-HP/Source/DStable/public">
Options Indexes FollowSymLinks
AllowOverride None
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

# c - 如何将 Windows 控制台输出代码页设置为 1252 以外的值？

> ID：13734493
> 
> 赞同：2
> 
> 时间：2012-12-05T23:37:46.630
> 
> 标签：c, visual-c++, encoding

在 Visual C 中编码，Windows 似乎输出带有 1252 代码页的文本。

如何从 C 代码将代码页设置为其他内容，例如 UTF7？（例如 API 函数调用是什么？）

我查看了[如何在 Windows 控制台上输出 Unicode 字符串，](https://stackoverflow.com/questions/3130979/how-to-output-unicode-strings-on-the-windows-console)但它没有对我的具体问题给出确切的答案。

[此答案](https://stackoverflow.com/questions/1259084/what-encoding-code-page-is-cmd-exe-using)还显示了如何显示当前代码页，但没有显示如何从 C 中设置代码页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:23:20.417

> 您必须选择 8 位编码，CP_UTF8 是个好主意。然后，您还必须将字体更改为非终端字体。康索拉斯是个好主意。——汉斯·帕桑特

[设置控制台输出CP](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686036%28v=vs.85%29.aspx)

# javascript - JavaScript：如何下载文件，然后强制页面重新加载？

> ID：13734497
> 
> 赞同：7
> 
> 时间：2012-12-05T23:37:54.943
> 
> 标签：javascript, jquery

正如标题所提到的，我正在尝试通过 href URL 给出的 PHP 脚本下载一个与关联的 mime 类型一起提供的文件，然后重新加载同一页面，但无法弄清楚，这是我到目前为止所拥有的：

```
<a id="viewAttachmentLink" href="/path/to/script.php?id=123">View Attachment</a>

<script type='text/javascript'>
    jquery('#viewAttachmentLink').bind('click', function() {
        if (myFunction()) {
            window.location.href = "jquery(this).attr('href')";
            setTimeout(location.reload(), 400);
        } else {
            return false;
        }
    });
</script> 
```

使用此代码，它将重新加载页面，但似乎没有调用 PHP 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:10:26.583

正如评论中提到的，我能够通过向`target="_new"`链接添加属性来解决这个问题。因此，当单击链接时，它将向远程 php 脚本的请求发送到另一个窗口，该窗口将控制标题并开始下载文件，并且原始窗口将根据需要重新加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-20T13:28:16.423

我进行了文件下载和状态更新（通过标题），如下所示：

```
<a id="downloadData">Download data...</a>

<script type="text/javascript">
    $('#downloadData').on('click', function () {
        $.ajax({
            url: '/data',
            method: 'GET',
            success: function (data, textStatus, request) {
                var output = request.getResponseHeader('output');
                //refresh page here and use the output
                //console.log(output);
                var a = document.createElement('a');
                var url = '/data';
                a.href = url;
                a.click();
                //save file
            },
            error: function (e) {
                console.log(e);
            }
        });
    });
</script> 
```

# ajax - Trigger.IO 应用程序的跨域错误，即使设置了权限

> ID：13734501
> 
> 赞同：4
> 
> 时间：2012-12-05T23:37:59.267
> 
> 标签：ajax, cross-domain, trigger.io

我正在评估 trigger.IO 并想使用我的 Web 服务中的一些数据设置一个简单的测试。我有一个简单的 jquery ajax 请求，II 简单更改为使用 forge api 进行 ajax，当我运行构建时它总是指出

XMLHttpRequest 无法加载[http://mydomain.com/file](http://mydomain.com/file)。Access-Control-Allow-Origin 不允许来源内容：//io.trigger.forge0872041a3f3011e291d722000a9f3c85。-- 从 null 的第 1 行开始

无论我做什么，我似乎都无法让这个简单的 ajax 请求工作。

现在，当我查看配置时，它应该（从外观上看）已经允许您对任何站点执行此操作，但我什至添加了我试图访问的站点以及相同的内容..

更奇怪的是，我尝试做样板并且效果很好，但我使用几乎相同的 ajax 请求，只有当我尝试访问我的服务器时，我才遇到跨域问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:59:41.183

您需要使用 forge.request 模块通过 Trigger.io 进行跨域请求：http: [//docs.trigger.io/en/v1.4/modules/request.html#modules-request](http://docs.trigger.io/en/v1.4/modules/request.html#modules-request)

src/config.json 中的权限仅适用于该模块 - 除非您在服务器上启用了 CORS，否则您不能使用普通的 XMLHttpRequest。

# c++ - 在c ++中将随机生成的整数存储为变量

> ID：13734502
> 
> 赞同：-1
> 
> 时间：2012-12-05T23:38:01.957
> 
> 标签：c++, random

我正在使用伪随机函数`srand()`来生成一个介于两个整数（1 和 4）之间的数字。

我包含`ctime`并使用一个标志控制的 while 循环来检查每个循环的数字是否不同。

```
time_t t;
time(&t);
srand(t); 
```

然后打印出结果

```
cout << "My random number" << (rand()%(1-5))+1 << endl; 
```

我希望`(rand()%(1-5))+1`用变量 ex 替换：`int myRandomNumber`用于在另一个循环中确定稍后将在我的代码中生成多少个对象

我怎样才能分配我想要的随机值`myRandomNumber`？

感谢您的时间，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:41:33.977

```
int myRandomNumber = (rand() % 4) + 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T23:58:18.177

只需声明变量：

```
int myRandomNumber; 
```

然后将值分配给变量：

```
myRandomNumber=(rand()%(1-5))+1; 
```

# mysql - 使用子查询收集老板姓名 SQL

> ID：13734503
> 
> 赞同：0
> 
> 时间：2012-12-05T23:38:06.060
> 
> 标签：mysql, sql, oracle

我应该列出员工和他们老板的名字......

问题是我必须使用同一张表......我不认为我必须使用 JOIN，或者是吗？

```
SELECT
first_name AS NOMBRE,
manager_id AS ID_JEFE,

(SELECT first_name FROM employees WHERE employee_id = ID_JEFE) AS JEFE

FROM employees

ORDER BY NOMBRE ASC; 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:44:14.120

它不起作用，因为在子查询级别上没有 ID_JEFE 列。

正确的查询可能是：

```
SELECT
    a.first_name AS NOMBRE,
    a.manager_id AS ID_JEFE,
    b.first_name AS JEFE
FROM employees a left join employees b ON b.employee_id=a.manager_id

ORDER BY a.first_name ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:49:56.243

```
SELECT first_name AS NOMBRE, manager_id AS ID_JEFE,
(SELECT first_name FROM employees WHERE employee_id = manager_id ) AS JEFE
FROM employees
ORDER BY NOMBRE ASC; 
```

# ios - IOS SDK 向后兼容

> ID：13734505
> 
> 赞同：0
> 
> 时间：2012-12-05T23:38:14.273
> 
> 标签：ios, sdk, compatibility

我正在使用 XCode 4.5 我只安装了 iPhoneSDK6.0。正在搜索全网但找不到IPhoneSDK5.0下载

这是否意味着我可以使用 SDK 6.0 并且我将部署目标设置为 5.0 的事实将确保我不允许使用 SDK 6.0 的任何功能？

具体来说，我现在正在将我的所有用法更改为在旧 SDK 上提供相同功能的`UICollectionView`a 。`PSTCollectionView`

由于我没有找到要下载的 SDK 5.0，我假设 SDK 6.0 和 Deployment Target 5.0 将确保如果我`UICollectionView`在代码中的任何位置使用，我将无法编译 - 但这不会发生

我该怎么办 ？下载 SDK 5.0 ？从哪里 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:47:44.180

我确信这已经得到了回答，但您没有下载任何其他 SDK。您将 Base SDK 设置为最新版本（当前为 6.0），并将部署目标设置为您希望支持的最早版本（但不超过 4.3）。

由于这意味着您的应用程序可以在具有不同 iOS 版本的设备上使用，因此您必须正确编码。如果您使用的是 iOS 6.0 的新 API，那么您必须编写代码，使其仅在 iOS 6.0 或更高版本的设备上执行。

有关执行此操作的正确方法，请参阅“SDK 兼容性指南”的文档。

Xcode 无法帮助您确保正确执行此操作。您必须在您希望支持的所有不同 iOS 版本的设备上运行您的应用程序。您也可以使用模拟器。Xcode 中的下载首选项页面允许您将模拟器安装回 iOS 4.3。

# javascript - 缩放/缩放 Div 后在 Google Maps API v3 上使用绘图管理器？

> ID：13734506
> 
> 赞同：3
> 
> 时间：2012-12-05T23:38:15.170
> 
> 标签：javascript, api, google-maps, css, google-maps-api-3

我一直在尝试使用谷歌地图 API V3（绘制矩形）的绘图管理器来解决问题。像这样使用 -webkit-transform 缩放谷歌地图画布（包含 div）后

```
 var transform = ['scale(' + 0.5 + ')'];
 $("#map_canvas").css('-webkit-transform', transform.join(' ')); 
```

我开始绘制矩形的点似乎在地图上移位了。我所说的移位是指绘制矩形的预期位置以某种方式被偏移量移位。最终结果是矩形出现在其他地方。我知道矩形的这种位移是由于 div 的缩放。有人可以帮助我解决这个问题并让绘图管理器即使在缩放后也能正常工作？如果您有更多问题，请告诉我。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:21:49.383

首先，您可以通过提供动态高度和宽度（以百分比表示）来完全避免缩放。

因此，如果您想在 80% 的可视区域中显示地图 div，您可以通过以下方式实现 -

```
<div id="MAP_DIV" style="height:80%;width:80%;"></div> 
```

这规避了缩放问题，从而规避了“位移偏移”问题。

但我强烈建议您将内联样式移到单独的 .css 文件中，以实现可重用性和代码维护。

希望能帮助到你。

# arrays - 一个圆中的最大子连续和

> ID：13734508
> 
> 赞同：0
> 
> 时间：2012-12-05T23:38:19.500
> 
> 标签：arrays, algorithm

问题是我有一个填充了 n 个数字的数组。我必须确定最大和，但是，如果将 i 位置的数字加到和中，则数字 i-1 和 i+1 不能相加。

第 n 个数字被认为是在一个循环中。

例如，如果 a 有下一个数组：

{6, 9, 1, 2, 8, 6, 3, 7, 12, 5, 65, 66, 2} 最大和为 99：9 + 8 + 3 +12+ 65 + 2 = 99

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:27:54.933

假设您知道包含数组的第一个元素。然后你可以通过动态规划来解决这个问题：对于 i = 3 到 N - 1，通过考虑包括或不包括元素 i 的选择并查看先前计算的分数，为数组的前 i 个成员制定最佳解决方案第一个 i-1 或 i-2 元素的最佳解决方案，以计算出你可以为 i 元素做的最好的事情。您不需要为 N 个元素计算出最佳值，因为您无法包含最后一个元素，因为您包含了第一个元素，并且前两个元素的分数与第一个元素的分数相同，因为您包含了它.

另一种可能性是不包括第一个元素。但是你可以用同样的方法计算出最好的分数，除了考虑 i = 2 到 N 的可能性。

现在您有了两种可能情况的答案——要么包含第一个元素，要么不包含 - 所以选择最好的。

PS - 如果这不是家庭作业，实际上是否有一个有用的应用程序？它是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:36:55.430

我认为你的问题很有趣，但不想回应，因为你没有表现出你自己的任何努力。

无论如何，由于 mcdowella 已经回答了这个问题，我将尝试详细说明他的答案。

让我们取输入数组：

```
a = [6, 9, 1, 2, 8, 6, 3, 7, 12, 5, 65, 66, 2] 
```

这个想法是逐步通过这个数组逐步计算**两个最佳**解决方案。在 step`i`中，这两个解是**包含的最佳解`a[i]`**和**不包含`a[i]`**的最佳解。这是使用上述数组作为输入的该算法的示例运行：

```
// step = 1
solutions = [6], [] 
```

这一步（step - 1）很明显，我们只有数组中的第一个元素。请注意，第一个解决方案组件 ( `[6]`) 对应于包含`a[1]`的组件，第二个组件 ( `[]`) 是不包含的组件`a[1]`。

```
// step = 2
solutions = [9], [6] 
```

在第二步中，我们添加`a[2] = 9`到先前未包含的解决方案中`a[1]`（即第二个组件 - `[]`）。然后我们选择**前两个解决方案中最好的**作为第二个组件。从这里开始，我们重复相同的过程：

```
// step = 3
solutions = [6, 1], [9]

// step = 4
solutions = [9, 2], [9]

// step = 5
solutions = [9, 8], [9, 2]

// step = 6
... 
```

您还需要跟踪哪个解决方案（如果有）包含`a[1]`，因为在最后一步我们不应该添加`a[n]`到已经包含的解决方案中`a[1]`。此信息（可以是布尔标志）可以与两个解决方案组件中的每一个相关联，并随着我们进行的每一步更新。

# c++ - 如何定义查找功能？

> ID：13734511
> 
> 赞同：4
> 
> 时间：2012-12-05T23:38:38.393
> 
> 标签：c++, vector

尝试为我的向量定义一个查找函数，因为该向量包含多个数据；它是一个结构的向量

我正在输入一个 ID，并试图在我的表中搜索它并找到它的索引（如果该 ID 已经存在）

所以我在这里有声明：

```
vector<Employee> Table;
vector<Employee>::iterator It;
vector<Employee>::iterator find_It;

//Table has these values
//Table.ID, Table.ch1, Table.ch2 
```

我正在尝试在这里找到 ID：

```
cin >> update_ID;
find_It = find(Table.begin(), Table.end(), update_ID); 
```

有没有办法使用变量 update_ID 进行查找？

我试过这样做：

```
find_It = find(Table.begin(), Table.end(), (*It).update_ID; 
```

但显然我的向量 Employee 没有名为 update_ID 的数据成员

我想做的另一个选择是创建自己的 find 函数，我对如何定义有点困惑

我想返回 ID 的索引，其中 Table.ID = update_ID

我将什么作为返回类型和值参数？是吗

```
returntype find( Iterator, Iterator, update ID)
{ 
    for (vector<Employee>::iterator myit = Table.begin(), Table.end(), myit++)
    {
        if update_ID == Table.ID
        {
            return myit;
        }
    }
    return myit
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:43:43.600

C++ 标准库带有[一组查找函数](http://en.cppreference.com/w/cpp/algorithm/find)。

您正在寻找`find_if`which 需要一个指定比较的函子。

```
// a functor taking the update_ID you 
// are looking for as an argument in the constructor
struct myfind {
  myfind(int needle) : needle(needle) {}

  int needle;
  bool operator()(const Employee& x) {
    return x.ID == needle;
  }
};

// use as
int update_ID = 23;
std::find_if(begin(Table), end(Table), myfind(update_ID)); 
```

您还可以使用 lambda：

```
int id;
std::find_if(begin(Table), end(Table),
             [=](const Employee& x) { return x.update_ID == id; }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T23:43:43.367

显而易见的方法是使用`std::find_if()`谓词。使用 C++ 2011 表示法可能如下所示：

```
std::vector<Employee>::iterator it(std::find_if(Table.begin(), Table.end(),
                                   [=](Employee const& e) { return e.ID == update_ID; }); 
```

如果你不能使用 C++ 2011，你可以为谓词创建一个函数对象，或者使用一个合适的函数，为`update_ID`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T00:05:08.993

你可以用`std::find_if()` 找出它是如何工作的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T00:05:25.980

[您可以通过使用find_if](http://www.cplusplus.com/reference/algorithm/find_if/)来使用自己的匹配功能。我假设在您的第一个片段中，您指的是具有成员 ID、ch1、ch2 的 Employee，而不是 Table。解决问题的一种方法是：

```
#include <vector>
#include<iostream>
#include<algorithm>

using std::cout;
using std::endl;
using std::vector;

struct Employee{
   int ID;
   int ch1;
   int ch2;
};

int IDmatch;

bool match_id( Employee myemp){
   return myemp.ID==IDmatch;
}

int main(){

   vector<Employee> Table;

   // fill example vector
   Employee temp; // use this for inserting structs into your vector
   for(int i=0; i<10; i++){
      temp.ID = i; // 1,2,3,...
      temp.ch1 = 10*i+1; // 11,21,32,...
      temp.ch2 = 10*i+2; // 12,22,32,...
      Table.push_back(temp);
   }

   vector<Employee>::iterator itv;
   IDmatch = 3;
   itv = find_if(Table.begin(), Table.end(), match_id);
   cout << "found an Employee with ID=" << IDmatch << ": ch1=" << itv->ch1 << ", ch2=" << itv->ch2 << endl;

} 
```

# asp.net - 用于 Windows 7 的 IIS 中的自定义错误页面

> ID：13734518
> 
> 赞同：2
> 
> 时间：2012-12-05T23:39:12.247
> 
> 标签：asp.net, iis, windows-7, custom-error-pages

在 Windows 7 中，我正在尝试设置自定义错误页面。一个用于 404，一个用于 500，一个用于所有其他错误（客户端或服务器端），这些错误是用户在某些事情超时时可能遇到的，或者在 asp 编译时出现故障。

```
404.htm
500.htm
error.htm 
```

只是非常简单的 html 页面，它会说错误，而没有像默认值那样的技术。[这篇文章](https://stackoverflow.com/questions/1292933/iis-7-0-doesnt-display-custom-error-pages)和[这篇文章](https://stackoverflow.com/questions/7727570/display-custom-error-pages-on-iis-7-5-and-iis-7)似乎在谈论在 ASP 中制作错误页面，而不仅仅是获取一个 html 文件并将其设置为自定义错误页面。

在 IIS 中，我使用了不适用于 ASP 的错误页面选择工具

![IIS 错误菜单](../Images/d457ae1df1dd12e685ac0545e2161bdb.png)

并将这些信息输入到`Edit error pages settings`对话中

我输入的完整地址：WebvView\webview_error_pages\error.htm（在我点击侧边的省略号按钮后选择浏览。（我已经缩短了这篇文章的所有这些地址）。

![在此处输入图像描述](../Images/e1491ea129657ed7d1dd7218ab7f5649.png)

自定义默认地址有效。但是当我尝试像这样为 404 创建错误页面时：

![404对话](../Images/96c30699131fd70923f5309b607981e9.png)

![404 出现在列表中](../Images/40c846519a729d15d0e507ccef73ddc3.png)

并尝试转到一个不存在的页面，我收到这个简单的错误消息：

> 由于发生内部服务器错误，无法显示该页面。

不是我的。而不是在我设置自定义 404 之前工作的默认值。

我究竟做错了什么？

谢谢！

**编辑**

此外，我刚刚更改了 ASP 的某些部分并得到了运行时错误，而不是我的自定义错误。有什么办法可以阻止用户看到这些可怕的技术页面？

**编辑** 这是其他状态菜单的 xml 代码：

```
 <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" />
        <customErrors defaultRedirect="webview_error_pages/error.htm" mode="On">
        </customErrors>
  </system.web>
    <system.webServer>
        <httpErrors errorMode="Custom">
            <remove statusCode="502" subStatusCode="-1" />
            <remove statusCode="501" subStatusCode="-1" />
            <remove statusCode="500" subStatusCode="-1" />
            <remove statusCode="412" subStatusCode="-1" />
            <remove statusCode="406" subStatusCode="-1" />
            <remove statusCode="405" subStatusCode="-1" />
            <remove statusCode="401" subStatusCode="-1" />
            <remove statusCode="403" subStatusCode="-1" />
            <remove statusCode="404" subStatusCode="-1" />
        </httpErrors>
    </system.webServer> 
```

再次感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T02:55:37.700

您没有在 web.config 中执行此操作是否有特定原因？如果您将项目移动到不同的服务器，这将有所帮助，您就不必担心手动配置 IIS。此外，在 web.config IMO 中配置它更容易一些。

在 system.web 下的 customErrors 节点中，确保您有

```
 <customErrors mode="On" defaultRedirect="~/Error/" >
           <error statusCode="404" redirect="~/404Redirect/"/>
        </customErrors> 
```

显然，您可以替换任何您想要的重定向页面。

# javascript - 画布：剪辑后的 clearRect 导致 Firefox 出现问题

> ID：13734519
> 
> 赞同：3
> 
> 时间：2012-12-05T23:39:12.813
> 
> 标签：javascript, firefox, canvas, html5-canvas

我在 Firefox 中使用 canvas clearRect 时遇到了奇怪的问题。如果设置了剪切区域，则 clearRect() 会重绘剪切区域和要清除的矩形之外的内容。由于它重新绘制它会导致问题。它在其他浏览器中正常工作，如 Chrome 和 IE - clearRect 不会影响剪切区域之外的内容。

这是代码：

```
 var canvas = document.getElementById("test");
        var context = canvas.getContext('2d');

        context.fillStyle = 'rgba(255, 0, 0, 0.1)';
        context.fillRect(0, 0, 40, 40);

        context.beginPath();
        context.rect(0, 0, 20, 20);
        context.clip();

        context.clearRect(10, 10, 20, 20); // causes an issue, see example below 
```

实际代码：http: [//jsfiddle.net/P8fyP/4/](http://jsfiddle.net/P8fyP/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:37:01.560

我在 firefox 18 和 firefox nightly 21 测试了你的代码，我找不到问题。代码做它应该做的事情。

# bluetooth - 从 WP8 连接到 Polar H7 心率监测器

> ID：13734522
> 
> 赞同：7
> 
> 时间：2012-12-05T23:39:16.217
> 
> 标签：bluetooth, windows-phone-8, bluetooth-lowenergy

有什么方法可以从 Windows Phone 8 连接到低功耗蓝牙设备？例如心率监测器，如 Polar H7。

我尝试过的一些背景：

*   我已经看过这个适用于 Windows 8 的示例 - [http://code.msdn.microsoft.com/windowshardware/Bluetooth-Generic-4f4ea968/view/Discussions](http://code.msdn.microsoft.com/windowshardware/Bluetooth-Generic-4f4ea968/view/Discussions) - 这似乎需要相当深入的知识。
*   我在这里看到了这个封闭的问题：[https ://stackoverflow.com/questions/13224392/nokia-lumia-920-and-bluetooth-low-energy-devices](https://stackoverflow.com/questions/13224392/nokia-lumia-920-and-bluetooth-low-energy-devices)
*   我自己为 Sphero 实现了 WP8 蓝牙支持（请参阅[https://github.com/slodge/BallControl/](https://github.com/slodge/BallControl/)）
*   我已经阅读了有关其他 SPP 级别代码的信息 - 例如[http://metroeeg.codeplex.com/documentation?referringTitle=Home&ANCHOR#GettingStarted](http://metroeeg.codeplex.com/documentation?referringTitle=Home&ANCHOR#GettingStarted) - 这似乎是在说“通常 WP8 应用程序只能与配对设备通话。” - 但我找不到任何方法将我的 HRM 与我的 Lumia 920 配对

我似乎找不到任何关于 WP8 和蓝牙 LE 设备的信息。这些支持吗？WP8 可以与我的 Polar H7 心率监测器通话吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T23:54:56.087

目前Windows Phone 仅支持蓝牙2.0 上的RFCOMM 协议。设备最低硬件规格目前不包括 BT4.0 LE - 即使某些设备支持它，它也不包含在 API 中。这是因为使用 BTLE 的健康设备支持 GATT 协议，而当前使用 RFCOMM 的接近堆栈允许支持串行端口配置文件等场景。

这给我们留下了能够连接到手机的 Sphero 和 MetaWatch 等设备——但不幸的是，这不是最新一代的健康和健身设备。

如果您想将某些东西与您的 920 配对，Polar 目前确实会制作 BT 2.0 心率监测器：)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-19T08:44:27.217

通过新的 Windows 8.1 更新，可以连接 Polar H7。我正在使用带有 Endomondo 的诺基亚 Lumia 920。它的工作原理与任何其他蓝牙设备相同，因此在 Windows Phone 上，您首先需要对其进行调整。转到蓝牙设置，它应该是可见的。如果您使用过 Windows 8.1 开发者预览版，则需要先降级到 Windows 8，然后再安装正式版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T00:23:40.390

从 Windows phone 更新 8.1 开始，对 H7（可能还有其他 BT LE 设备）的支持工作正常，这已经在诺基亚 Lumia 920 上的 adidas micoach 应用程序（可通过 windows 商店获得）中进行了测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-17T15:19:47.890

Polar Wearlink+ 蓝牙发射器无法连接到 Lumia 920 或任何其他 Windows 手机。

请参阅：Transmitter_with_Bluetooth__Compatibility">http://www.polar.com/en/support/FAQs/Polar_WearLink_Transmitter_with_Bluetooth__Compatibility

# ehcache - EhCache：自填充缓存中的 timeToLiveSeconds

> ID：13734523
> 
> 赞同：2
> 
> 时间：2012-12-05T23:39:21.280
> 
> 标签：ehcache

我计划在我的应用程序组件中使用 SelfPopulatingCache，因为它支持通读，并且看起来像是用于刷新的后备缓存。

但是，我对**timeToLiveSeconds**配置有点困惑。这是我的测试配置：

```
<ehcache>
    <diskStore path="java.io.tmpdir"/>

    <cache name="myCache" maxElementsInMemory="50000" overflowToDisk="false"
    eternal="false" timeToIdleSeconds="0" timeToLiveSeconds="2"/>

</ehcache> 
```

在我的单元测试中，我执行以下操作：

*   验证我的缓存中有 2 个条目
*   睡眠 3 秒
*   但是，在睡眠之后，我的缓存中仍然有 2 个条目。

根据其他在线帖子（而不是文档），当我下次执行阅读时，我的条目应该被驱逐。

但是，将调用 CacheEntryFactory，并且将为我的过期元素添加一个空元素到缓存中。

有什么方法可以配置它以在 timeToLiveSeconds 到期时执行完全驱逐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:00:04.337

我相信只有在有单独的到期线程时才会发生“完全驱逐”。不幸的是，对于内存中的条目，没有这样的东西。引用[Ehcache 常见问题解答](http://ehcache.org/documentation/faq#why-is-there-an-expiry-thread-for-the-diskstore-but-not-for-the-memorystore)：

> 因为 MemoryStore 具有固定的最大元素数，所以它的最大内存使用量等于元素数乘以平均大小。当添加的元素超出最大大小时，LRU 元素会被推送到 DiskStore。虽然我们可以有一个过期线程来定期过期元素，但只在需要时检查效率要高得多。权衡是更高的平均内存使用量。到期线程保持 DiskStore 干净。希望 DiskStore 的锁争用较少，因为常用的值在 MemoryStore 中。我们使用 RAMFS 在 Linux 上挂载 DiskStore，因此它使用的是操作系统内存。虽然我们拥有比 2GB 32 位进程大小限制更多的资源，但它仍然是一种昂贵的资源。DiskStore 线程对其进行控制。如果您担心 CPU 使用率和 DiskStore 中的锁定，您可以将 diskExpiryThreadIntervalSeconds 设置为较高的数字，例如 1 天。或者，您可以通过将 diskExpiryThreadIntervalSeconds 设置为一个非常大的值来有效地关闭它。

# javascript - Objective-C/Cocoa windowScriptObject 命令在加载页面中不起作用

> ID：13734527
> 
> 赞同：1
> 
> 时间：2012-12-05T23:39:29.983
> 
> 标签：javascript, objective-c, cocoa, webkit

我正在尝试让“windowScriptObject”工作，这是我的 Objective-C 代码如下：

```
- (void)consoleLog:(NSString *)aMessage {
    NSLog(@"JSLog: %@", aMessage); }

+ (BOOL)isSelectorExcludedFromWebScript:(SEL)aSelector {
    if (aSelector == @selector(consoleLog:)) {
        return NO;
    }

    return YES; }

- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame {

    NSLog(@"Did finnish load...");
    scriptObject = [sender windowScriptObject];

    //obviously, this returns undefined
    NSLog(@"Object: %@",[scriptObject evaluateWebScript:@"MyApp"]);

    //set the value of MyApp
    [scriptObject setValue:self forKey:@"MyApp"];

    //this now returns the value
    NSLog(@"Object: %@",[scriptObject evaluateWebScript:@"MyApp"]);

    //this command now works from here
    [scriptObject evaluateWebScript:@"MyApp.consoleLog_('Test');"]; 
} 
```

上面的代码在我注入 JavaScript ( *evaluateWebScript* )时有效

这就是控制台输出的内容：

```
2012-12-06 08:03:05.605 BetterDesktop[8669:303] Did finnish load...
2012-12-06 08:03:05.605 BetterDesktop[8669:303] Object: undefined
2012-12-06 08:03:05.606 BetterDesktop[8669:303] Object: <WidgetsDelegate: 0x10133de60>
2012-12-06 08:03:05.607 BetterDesktop[8669:303] JSLog: Test 
```

该命令有效，但是当我使用页面时它不起作用。

```
<html>
<head>
<script type="text/javascript">
if (typeof(MyApp) != "undefined"){
document.write('<br/><h1>hi</h1>');
MyApp.consoleLog_('Test from HTML');
}
else{

document.write('<br/><h1>Not Defined</h1>');
}

</script>
</head>
<body>
</body>
</html> 
```

它认为“MyApp”是未定义的，有什么建议吗？

（顺便说一下，WebView没有连接到这个类，它只是委托）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T23:56:58.247

您应该从`-webView:didClearWindowObject:forFrame:` `WebFrameLoadDelegate`方法内部而不是在`-webView:didFinishLoadForFrame:`. 在`window`调用之前，不能保证对象已正确初始化`didClearWindowObject`。

# ios - 自动布局可以调整 UITableView 的大小以在 ipad 上纵向增长和横向缩小吗？

> ID：13734530
> 
> 赞同：1
> 
> 时间：2012-12-05T23:39:37.187
> 
> 标签：ios, uitableview, autolayout, portrait

我想我没有很好地掌握自动布局。我的 ipad NIB 上有一个简单的 UITableView。我希望这个 UITableView 在纵向模式下增长到占据高度的 75%，在横向模式下缩小到 25%。同样，这是尽可能简单的；我只有一个带有 UITableView 的 NIB。

我正在使用启用了自动布局的 ios 6。

有人可以告诉我约束的神奇自动布局设置是什么吗？我玩过内容压缩和内容拥抱，但似乎没有任何改变。我的 UITableView 高度似乎保持在 480 高度并且永远不会增长。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:29:20.203

尝试在 UITableView 上添加“Top Space to Superview”垂直空间约束。

在我的 iPhone 应用程序上，我有一个嵌入式 UITableView，它应该显示在 UIView 下方（带有一些自定义过滤器选项）。在肖像中一切都很好，但在风景中 UITableview 没有调整大小。将 56 的垂直空间约束添加到 UITableview 并将高度固定在 UIView 上解决了它。

# html - 此时我应该使用什么 HTML 标准？

> ID：13734531
> 
> 赞同：0
> 
> 时间：2012-12-05T23:39:38.543
> 
> 标签：html, html4

我知道并使用基本的 HTML，但我正在快速了解构建整个复杂公共站点所需的细节。哪个 HTML 不仅应该是我学习的重点，也是最终站点的重点？非常感谢...RG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:41:07.767

你应该关注 HTML5，它很快就会成为标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:44:13.680

没有理由不使用`<!DOCTYPE html>`，因为它基本上适用于所有正在使用的浏览器。我会对 HTML5 的个别特性更加挑剔——许多没有 javascript polyfill 的非常流行的浏览器并不完全支持它们。

# image - 将新图像/拇指上传到 wordpress 上现有的轮播画廊/滑块

> ID：13734532
> 
> 赞同：3
> 
> 时间：2012-12-05T23:39:41.963
> 
> 标签：image, wordpress, slider, carousel

我的网站还没有发布，所以我希望你不会觉得帮助我太难了。

我是 wordpress 的新手，我刚刚创建了我的主题并激活了它。在我的索引页面上，我使用图像轮播/滑块来展示我的一些作品。

我的问题是如何在不向页面添加新代码的情况下上传新图像？我的意思是我可以添加新页面而无需编写代码。

这就是我设置它的方式：

```
<body>

<div class="featured-work-slides">
    <div id="home-carousel" class="home-carousel-thumbs img-wrap-thumbs">   

     <?php  $query = "SELECT * FROM wp_my_gallery ORDER BY id ASC"; $user_list = $wpdb->get_results($query); 

           foreach ($user_list as $user ) {
   ?>

                <figure class="thumb">
                  <a href="<?php echo $user->link; ?>" class="overlay">
                     <div class="inset-bevel">&nbsp;</div>
                         <img src="<?php echo WP_CONTENT_URL.'/uploads/my_gallery/'.$user->image_file_name; ?>" 
                    alt="Fantasy" width="300" height="300" />
                    <figcaption class="name">
                    <?php echo $user->image_title; ?>                   
                    </figcaption>
                </a>
                </figure>

                <?php } ?> 
```

希望我的问题和描述清楚，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:22:19.877

如果您只想旋转/滑动图像并在单击时让它们各自包含自己的 URL，则 iThemes 的 Rotating Images 插件是理想的选择。2 站点许可证的费用为 25 美元，但有 35% 的折扣代码可用：ELF2012 是代码。你可以在这里找到它：http: [//ithemes.com/purchase/rotating-images/](http://ithemes.com/purchase/rotating-images/) 我经常使用这个插件，因为它易于使用并且具有很好的功能。如果你愿意购买，我会推荐这个。

Nivo Slider 是另一个很棒的插件；但是我认为它不支持应用于每个图像的唯一 URL beig。对于单站点 WordPress 版本，它的价格为 19 美元。

The Image Slider 是免费的，但我也不确定它的链接功能，但它的评价大多很好。 [http://wordpress.org/extend/plugins/the-image-slider/](http://wordpress.org/extend/plugins/thethe-image-slider/)

# ios - 使用谓词匹配以特定字符串开头的单词集

> ID：13734533
> 
> 赞同：2
> 
> 时间：2012-12-05T23:39:50.623
> 
> 标签：ios, predicate

我想知道是否可以过滤包含多个单词的数组以获得过滤数组，该数组仅包含使用谓词以字符串开头的单词：

我想一个例子会自己说话：

大批：

*   青椒
*   白葡萄

@"pe" 的过滤数组

*   青椒

目前我正在应用一个谓词，如下所示：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[c] %@",searchText];
  NSArray *tempArray = [[self.searchContent objectAtIndex:INGREDIENT] filteredArrayUsingPredicate:predicate];
  [self.ingredientsFiltered addObjectsFromArray:tempArray]; 
```

但这会给我青椒和白葡萄，因为@“pe”也是胡椒的子串。有没有推荐的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:48:06.330

试试这个，

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES[c] %@", [NSString stringWithFormat: @".*\\b%@.*",searchText]]; 
```

# ms-access - 如何在访问中的文本框中获取查询结果

> ID：13734534
> 
> 赞同：1
> 
> 时间：2012-12-05T23:39:55.073
> 
> 标签：ms-access

我一直在处理一个包含 2 个组合字段和一个文本字段的表单。我希望文本框显示查询结果。查询从两个组合框中获取值。我能够形成查询，但无法在文本框中获取其值。该查询生成单个值（1 行，1 列）。请帮助我或指出我可以找到解决方案的任何好的资源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T12:31:21.613

文本框没有像组合框那样的记录源，您可以将它们设置为等于函数的结果，如下所示：

```
Public Function CountChildData()

Dim rs As Recordset

    Set rs = CurrentDb.OpenRecordset("SELECT Count(childid) AS Result FROM ChildData WHERE formid = " & Me.cmbFormid & "")

    CountChildData = rs!Result

    rs.close
    set rs = nothing

End Function 
```

然后您可以将文本框的**Control Source**属性设置为 =CountChildData()

# ruby - 如何重构这个构建活动记录搜索哈希的控制器操作

> ID：13734536
> 
> 赞同：1
> 
> 时间：2012-12-05T23:39:58.717
> 
> 标签：ruby, ruby-on-rails-3, refactoring

这段代码感觉不对。我试图让我的控制器变瘦，我觉得控制器动作中的逻辑太多了。

组织此代码的更好方法是什么？

```
def search
    where_obj = {:status => 1}

    if params[:city].present?
        where_obj.merge! :city => params[:city]
    end

    if params[:county].present?
        where_obj.merge! :county => params[:county]
    end

    ## THERE WILL BE MANY MORE IF STATEMENTS HERE DUE TO GROWING SEARCH FORM

    @person = Person.where(where_obj)
end 
```

随着搜索表单的增长，此控制器操作也会增长。我怎样才能让我的控制器变瘦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:00:58.477

怎么样：

```
def search
  query = { :status => 1 }.merge(params.select { |k,_| [:city, :country].include?(k) })
  @person = Person.where(query)
end 
```

或者使用（在 Rails 中）[`slice`](http://api.rubyonrails.org/classes/Hash.html#method-i-slice)提供的方法的更简单的版本：`ActiveSupport`

```
def search
  query = { :status => 1 }.merge(params.slice(:city, :country))
  @person = Person.where(query)
end 
```

如果您将有一堆不同的参数来选择性地包含，那么您可以像这样对它们进行分组：

```
def search
  search_params = [:city, :country, :continent, ...]
  query = { :status => 1 }.merge(params.slice(*search_params))
  @person = Person.where(query)
end 
```

（感谢@ajcodez 指出`search_params`在传递给时需要 splat `slice`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:12:45.140

```
def search
  @person = Person.where({status: 1}.merge(params).select{|_, v| v.present?})
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T04:25:12.067

```
# controller
def search
  @person = PersonSearch.new(params).result
end

# lib/person_search.rb
class PersonSearch

  attr_accessor :params

  SUPPORTED_FIELDS = [:city, :country]

  def initialize(params)
    @params = params
  end

  def result
    Person.where conditions
  end

  private

  def conditions
    conditions = default_conditions

    SUPPORTED_FIELDS.each do |field|
      conditions.merge!(field => params[field]) if params[field]
    end

    conditions
  end

  def default_conditions
    { :status => 1 }
  end

end 
```

不断增长的搜索形式？将更多属性添加到`SUPPORTED_FIELDS`.

*优点：*

*+*可扩展（甚至支持其他型号）

*+*可测试（即使大部分情况下都不会影响您的数据库）

*+*可重复使用

*缺点：*

*-*更多的代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T01:10:20.790

这就是我将如何做到的。您也可以将字段定义为常量。

```
FIELDS = [:city, :country]

def search
  query_params = params.slice(*FIELDS).reject { |_,val| val.blank? }
  query_params[:status] = 1
  @person = Person.where query_params
end 
```

注意字段上的 splat。哈希#slice：[http ://api.rubyonrails.org/v2.3.8/classes/ActiveSupport/CoreExtensions/Hash/Slice.html](http://api.rubyonrails.org/v2.3.8/classes/ActiveSupport/CoreExtensions/Hash/Slice.html)

# ruby-on-rails - 设计领域的人性化名称

> ID：13734539
> 
> 赞同：1
> 
> 时间：2012-12-05T23:40:08.503
> 
> 标签：ruby-on-rails, devise

我将通过在 User 模型中添加以下内容来为 Devise 的每个字段命名：

```
HUMANIZED_ATTRIBUTES = {
  :sex => "some_other_text",
  :age => "some_other_text"
}

def self.human_attribute_name(attr)
  HUMANIZED_ATTRIBUTES(attr.to_sym) || super
end 
```

但是，我收到错误消息说...

```
undefined method `HUMANIZED_ATTRIBUTES' for #<Class:0x007f8201f39c80> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:57:11.250

您错误地引用了哈希。它使用`[]`不`()`。

```
def self.human_attribute_name(attr)
  HUMANIZED_ATTRIBUTES[attr.to_sym] || super
end 
```

# breeze - 如何处理跨远程和缓存数据的查询

> ID：13734540
> 
> 赞同：1
> 
> 时间：2012-12-05T23:40:14.253
> 
> 标签：breeze

寻找一种同时查询远程数据和本地缓存的好方法。我需要能够查询远程数据，但将结果与本地更改合并。

因此，如果我添加一个项目“Bob”并且我得到按字母顺序升序的前 5 个结果，而不是收到“Aaron, Adam, Alice, Ashley, Bud”，我会收到“Aaron, Adam, Alice, Ashley, Bob”如果我查询第二个 5 个结果（跳过 5 个，取 5 个），列表将以“Bud”开头。这也需要处理删除，所以如果我在本地删除了项目 1 和 3，并且我查询前 50 个项目，我想接收项目 2 和 4 到 52。最后过滤查询需要同时处理服务器和本地缓存更改：因此，如果我将“Sam”的名称更改为“Bob”并查询所有以 B 开头的名称，我应该得到 Sam 与 Bill 和其他人的新 Bob 记录。

通常我们会下载所有带有初始查询的行，并允许 queryLocally 来处理工作，但是有一个问题，因为我们正在处理 10,000 条或更多记录。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:17:06.683

一种可能的解决方案是向服务器查询“多一点”，然后是预期的结果 - 但最终总是过滤本地缓存。使本地缓存成为唯一的来源并从中过滤/获取/跳过。

现在让我们尝试定义“多一点”的含义。

> 如果我将“Sam”的名字改为“Bob”并查询所有以 B 开头的名字，我应该得到 Sam 与 Bill 和其他人的新 Bob 记录。

这应该可以按您的预期工作 - 无需从服务器获取“以 B 开头的名称”。

> 如果我添加一个项目“Bob”并且我得到按字母顺序升序的前 5 个结果，而不是收到“Aaron, Adam, Alice, Ashley, Bud”，我会收到“Aaron, Adam, Alice, Ashley, Bob” 和如果我查询第二个 5 个结果（跳过 5 个，取 5 个），列表将以“Bud”开头。

为此，您需要像这样远程获取：**获取** `numberOfEntitiesChangedLocally + ( pageNr * recordsPerPage )`然后跳过并以通常的方式从本地缓存中获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:36:33.397

在 \Samples\DocCode 中有三个组合远程 + 本地查询的示例。也许他们会有所帮助。

在此处添加评论。完整的代码在 queryTests.js

1\. * 结合远程和本地查询获取所有客户 * 包括新的、未保存的客户 * v1 - 使用 FetchStrategy

2\. * 结合远程和本地查询获取所有客户 * 包括新的、未保存的客户 * v1=使用 FetchStrategy.FromLocalCache

3\. * 结合远程和本地查询获取所有客户 * 包括新的、未保存的客户 * v2=使用 ExecuteLocally()

一个关于如何不再这样做的有趣示例也可能会让您感兴趣（也在 queryTests 中：

```
 /*********************************************************************
    * This portion of the "queryTests (by id)" module  
    * tests a hand-built async getById utility that was the way to do it 
    * before EntityManager.fetchEntityByKey
    * A curiosity now.
    ********************************************************************/

    // This hand-built async getById utility method returns a promise.
    // A successful promise returns the entity if found in cache 
    // or if found remotely.
    // Returns null if not found or if found in cache but is marked deleted.
    // Caller should check for query failure.
    // 'queryResult' reports if queried the remote service 
    // and holds a found entity even if it is marked for deletion.
    // 
    // This fnc has been replaced by EntityManager.getEntityByKey. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T07:24:22.357

这必须在 java 脚本中可以实现，silver light 能够做到，有人可能需要看看它是如何完成的，silver light 并将其移植到 java 脚本中。

我认为逻辑应该是设置开关时（AlwaysRefreshDataOnQuery = false），然后跳过，覆盖已修改（包括删除）的行，否则只需清除本地缓存并用新数据刷新它。

Silver light 一直是非常强大的平台，迄今为止我还没有看到任何平台像 Silver Light 一样强大（至少在 .NET 世界中）。

# webkit - 所有 webkit 浏览器都正式支持 rel=noreferrer 吗？

> ID：13734541
> 
> 赞同：9
> 
> 时间：2012-12-05T23:40:31.280
> 
> 标签：webkit, rel

我们希望从我们的安全 Web 应用程序中隐藏/取消超链接上的引用者，以便外部网站不会意识到我们的非公共安全网站。看起来 rel="noreferrer" 会是一个很好的方法，但是围绕它的讨论或文档很少，我很好奇它的支持程度。

兼容 HTML5 的 webkit 浏览器是否支持 rel=noreferrer？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T20:39:55.820

它是几年前实施的，没有构建标志可以关闭它。

因此，如果它是 WebKit 的最新版本，那么是的，它是受支持的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T20:53:44.327

我不会依赖较新的浏览器功能来保证安全性。也许用 target _blank 打开链接，或者更好的安全性，用你的网络服务器或防火墙清理标题。

# linux - LibreOffice 命令行转换 - 没有输出文件？

> ID：13734542
> 
> 赞同：1
> 
> 时间：2012-12-05T23:40:32.983
> 
> 标签：linux, pdf, powerpoint, openoffice.org, libreoffice

我正在使用安装在我的 Linux 机器上的 LibreOffice，我似乎遇到了一个奇怪的问题，即转换似乎正在发生，并且似乎没有错误，但指定的输出目录中没有输出文件。

这是我正在使用的命令的示例：

```
/opt/libreoffice3.6/program/soffice --headless --invisible --convert-to pdf /dir/file.pptx --outdir /dir 
```

这是该命令的结果：

```
convert /dir/file.pptx -> /dir/file.pdf using impress_pdf_Export 
```

但问题是运行转换后 /dir/file.pdf 不存在。

你们有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-04T08:19:15.337

如果您没有看到任何输出，则问题可能与[此错误](https://bugs.freedesktop.org/show_bug.cgi?id=37531)有关。只要确保没有其他 libre office 实例正在运行 (soffice.bin)。[来源](http://en.libreofficeforum.org/node/2912)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-13T20:15:37.133

我有一个类似的问题，soffice 似乎运行良好（服务器上的无头模式）但没有输出文件。

通过运行修复它`apt-get install libreoffice-writer`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T08:36:22.253

转到您的文件所在的文件夹并将其转换到该位置以查看您的转换是否有效。如果可行，请尝试将“”放在您的文件周围以进行转换。

我有一个 bashscript，你可以用它来解决你的问题：

```
#!/bin/bash

# first do chmod +x convert.sh
# then run ./convert.sh

mkdir out
cd testfiles
for file in *; do
    echo "${file}"
    soffice --headless -convert-to pdf:"writer_pdf_Export"      
        --outdir ../Documenten/BLACK/out "${file}" 
done
cd .. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:49:09.323

我无法重现您的错误。它对我有用，即使是 pptx 文件。

检查 libreoffice 的错误跟踪器。尝试另一个版本（我仍在运行 3.4.something）。调查输出目录——例如，你在那里有写权限吗？

还有一个相当愚蠢的想法：在文件浏览器（我的是 Dolphin）中按 F5（或类似）以刷新。在这种情况下我需要这样做，这样我才能看到新文件。

# jquery - 使用 jquery 在鼠标悬停/移出时隐藏/显示元素

> ID：13734543
> 
> 赞同：1
> 
> 时间：2012-12-05T23:40:38.707
> 
> 标签：jquery

在一个页面上有多个这样的元素

```
<h1 class="bodyText hide">1</h1>
<h1 class="bodyText hide">2</h1>
<h1 class="bodyText hide">3</h1> 
```

和

```
.hide{
    display:none;
}

.bodyText {

} 
```

现在，当鼠标进入 bodyText 元素时，文本应该在鼠标离开元素时淡入淡出。我尝试了什么：

```
$('.bodyText').on('mouseover', function(event){
    $(this).fadeIn();
});

$('.bodyText').on('mouseout', function(event){
    $(this).fadeOut();
}); 
```

这绝对没有任何作用。任何想法如何做到这一点？

我想达到这种效果：[http ://www.google.com/intl/de/about/datacenters/gallery/index.html#/](http://www.google.com/intl/de/about/datacenters/gallery/index.html#/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:45:03.467

由于您的`<h1>`元素是隐藏的，因此它们无法触发`mouseover`事件 - 您的鼠标无法悬停不存在的元素。

您应该让它们可见并隐藏/显示子元素。

[**演示**](http://jsfiddle.net/na5zQ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T21:18:31.847

还有另一种方法。

```
$("#DivMain").hover(
    function(){
        $(".DivSub").show();
    },
    function(){
        $(".DivSub").hide();
    }
); 
```

# c# - 登录到远程 Web 处理程序

> ID：13734545
> 
> 赞同：0
> 
> 时间：2012-12-05T23:40:42.997
> 
> 标签：c#, visual-studio-2010, internet-explorer, login, webclient

我需要登录到一个受到严格保护的远程 web 处理程序，例如登录区域在 flash 对象中，我需要对我的屏幕进行截图，获取用户名、密码文本框并提交按钮坐标并单击鼠标并输入代码中的值。虽然这有时可以，但有时不行，但在幕后有一个 Web 处理程序正在完成所有繁重的工作，包括将发布数据作为参数。示例将是这个：

```
http://website/GetDataINeed.ashx?F1=REN&O3204=24&O37_CS1_CT5_CG3=18 
```

现在，一旦我将其发布到他们的服务器上，我就会取回响应正文并获得我真正需要的内容。

我现在正在寻找的是，如果我可以通过 webclient 对象以某种方式登录到该 Web 处理程序，而无需像现在一样使用屏幕截图、鼠标单击和按钮坐标，并通过 asp 页面中的 flash 对象绕过登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:05:52.047

你有没有看过像[fiddler](http://www.fiddler2.com/fiddler2/)这样的网络调试器，flash 正在客户端运行，所以你应该能够抓取帖子或获取语句并分析正在发送的内容

# php - 自定义字段在 Wordpress 中不起作用

> ID：13734546
> 
> 赞同：0
> 
> 时间：2012-12-05T23:40:43.883
> 
> 标签：php, wordpress

我使用 wordpress 插件实现了此代码以检索自定义字段值，然后如果自定义字段值为 true，则在帖子 URL 的末尾添加一个值。

所以对于下面的例子，如果自定义字段“testme”的值为“news”，它应该在 URL 的末尾添加 $news 值，即 ?fromwhere=news”。这个概念/代码在插件中运行良好我正在使用，然后我尝试在主 Wordpress 循环中应用它，但它不起作用。这是我在主 wordpress 循环中使用的代码：

```
/* entry_title */
if ( !function_exists( 'wpstart_entry_title' ) ) {
    function wpstart_entry_title() {
    $post = get_post($single->ID);
    $newss = get_post_meta($post->ID, $key, TRUE);
                $key = 'testme';
                $news = '?fromwhere=news"';
             if($newss == 'news') {

        if ( is_single() || is_page() ) { ?>
            <h1 class="entry-title"><?php the_title(); ?></h1>
        <?php } elseif (is_404()) { ?>
            <h1 class="entry-title"><?php _e( 'Page not found', 'wpstart' ); ?> - 404</h1>
        <?php } else { ?>
            <h2 class="entry-title"><a href="<?php the_permalink(); ?>'.$news.'" 
title="<?php the_title_attribute( array('before' => esc_attr__( 'Permalink: ',   'wpstart' ), 
'after' => '')); ?>" rel="bookmark">
<?php the_title(); ?></a></h2>
        <?php }

        }
        else { echo '<h2>DID NOT WORK</h2>';
        }
    }
} 
```

所有帖子标题都返回“DID NOT WORK”，即使是我将“testme”自定义字段设置为“news”的那些。为什么这不起作用？！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:54:24.187

我只是移动了 $newss 值，所以它低于其他关键功能......就像这样......

```
/* entry_title */
if ( !function_exists( 'wpstart_entry_title' ) ) {
function wpstart_entry_title() {
$post = get_post($single->ID);
            $key = 'testme';
            $news = '?fromwhere=news"';
            $newss = get_post_meta($post->ID, $key, TRUE);
            if($newss == 'news') {
                      more code... 
```

这成功了。:)

# javascript - Javascript 不执行分支 IF 语句

> ID：13734547
> 
> 赞同：0
> 
> 时间：2012-12-05T23:40:43.933
> 
> 标签：javascript, jquery, html, forms

为什么这个条件总是执行 ELSE 而不是 IF 分支。这是javascript：

```
$(document).ready(function(){

if (document.getElementById("analyses").value == 'distance'){

loadScript('/static/distance.js', function()
{
     console.log('done loading');
    });
}else{
loadScript('/static/geoClusters.js', function()
{   
console.log('done loading');
});
 }
}); 
```

该表单有几个带有不同选项值的选择标签，例如：

```
<select name="analysis" id="analyses">
     <option value="" disabled="disabled" selected="selected">Select Analysis</option>
      <option value="distance">distance</option>
      <option value="clustered">clustering</option>
</select> 
```

我看不出 if-else 语句有什么问题。

谢谢

编辑

感谢所有伟大的建议，我认为代码的结构方式与@trebuchet 建议的方式一致：

```
$("#analyses").bind("change",function(){
.............code.......
}); 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T23:42:14.883

您实际上不能`value`在 HTML 选择元素上使用这样的方法——它有属性`selectedIndex`，但没有`selectedValue`。JQuery 确实`val()`在选择元素上实现，但是：

```
if ($("#analyses").val() == 'distance') 
```

如果您使用直接的 Javascript 进行操作，那么您必须首先获取选定的索引，然后是`option`元素的值：

```
var sel = document.getElementById("analyses");
if (sel.options[sel.selectedIndex].value) 
```

* * *

为了回答您的问题，使用原始代码，Javascript 将始终执行`else`分支，因为`document.getElementById("analyses").value`is `undefined`，Javascript 在布尔语句中将其类型转换为“false”。

[小提琴。](http://jsfiddle.net/9EAsm/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T23:46:43.207

您的代码的结构方式只会在页面加载时运行一次 - 在这种情况下，选择的值将始终为空字符串。如果您希望它响应更改：

```
$("#analyses").bind("change",function(){

    if (document.getElementById("analyses").value == 'distance'){

        loadScript('/static/distance.js', function()
        {
           console.log('done loading');
        });
    }else{
        loadScript('/static/geoClusters.js', function()
        {   
            console.log('done loading');
        });
     }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T23:47:55.223

在 document.ready 触发时，分析的值总是“”，因为这是默认选择的选项。我不确定，因为第一个选项被禁用，为什么会发生这种情况，但显然这就是正在发生的事情。

如果您将默认选择的选项值更改为“距离”，那么它会触发，您可以在此处看到：

```
<select name="analysis" id="analyses">
     <option value="" disabled="disabled">Select Analysis</option>
      <option value="distance" selected="selected">distance</option>
      <option value="clustered">clustering</option>
</select>​ 
```

我也在这里发布了一个测试：http: [//jsfiddle.net/BKD4u/](http://jsfiddle.net/BKD4u/)

# php - 字符串集作为多个参数传入 PHP MYSQL

> ID：13734548
> 
> 赞同：1
> 
> 时间：2012-12-05T23:40:49.503
> 
> 标签：php, javascript, mysql, stored-procedures

我正在调用一个存储过程，它通过 PHP 接受 3 个参数（1 IN，2 OUT）。我使用以下字符串`"1,2,3,4"`从 JavaScript 传递给 PHP：

```
xmlhttp.open("GET","gethint.php?q="+str,true);
xmlhttp.send(); 
```

从 PHP 我得到字符串并像这样调用它（在建立所有正确的 SQL 连接等之后）：

```
$q=$_GET["q"];
$result = mysql_query("CALL mst2($q, @eset, @leng)"); 
```

我得到的错误是`Invalid query: Incorrect number of arguments for PROCEDURE fall12018.mst2; expected 3, got 6`

如果我删除 @eset 和 @leng 我仍然得到错误，但使用 4 而不是 6，似乎该过程正在读取每个逗号分隔的成员作为单独的输入，是否有人知道如何将整个集合作为单个参数发送?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:44:56.543

好像现在你的电话看起来像这样（6 个参数，由于 的值中有逗号`$q`）：

```
$result = mysql_query("CALL mst2(1,2,3,4, @eset, @leng)"); 
```

尝试将 $q 括在引号中。

```
$result = mysql_query("CALL mst2('{$q}', @eset, @leng)"); 
```

这将导致这个（3个参数）：

```
$result = mysql_query("CALL mst2('1,2,3,4', @eset, @leng)"); 
```

# python - 使用 Python 字典在 Python 中合并 CSV 文件

> ID：13734554
> 
> 赞同：3
> 
> 时间：2012-12-05T23:41:06.893
> 
> 标签：python, merge, python-2.7, csv-import

您好我正在尝试根据公共列或主键合并两个 CSV 文件中的特定字段来创建一个新的 CSV 文件。我曾尝试在 powershell 中做同样的事情，它工作但完成过程非常慢 - 合并 5000+ 行文件超过 30 分钟，所以在 Python 中尝试这个。我是新人，所以请放轻松。

所以两个文件是 infile.csv 和 checkfile.csv，并且创建的输出文件中的列将基于 infile.csv 中的列。代码检查 checkfile.csv 中的值，创建 outfile.csv，从 infile.csv 复制列，并需要根据 checkfile.com 中的相应值重写两个字段的值。以下是详细内容

infile.csv -

```
"StockNumber","SKU","ChannelProfileID","CostPrice"
"10m_s-vid#APTIIAMZ","2VV-10",3746,0.33
"10m_s-vid#CSE","2VV-10",3746,0.98
"1RR-01#CSE","1RR-01",3746
"1RR-01#PCAWS","1RR-01",3746,
"1m_s-vid_ext#APTIIAMZ","2VV-101",3746,0.42 
```

检查文件.csv

```
ProductCode, Description, Supplier, CostPrice, RRPPrice, Stock, Manufacturer, SupplierProductCode, ManuCode, LeadTime
2VV-03,3MTR BLACK SVHS M - M GOLD CABLE - B/Q 100,Cables Direct Ltd,0.43,,930,CDL,2VV-03,2VV-03,1
2VV-05,5MTR BLACK SVHS M - M GOLD CABLE - B/Q 100,Cables Direct Ltd,0.54,,1935,CDL,2VV-05,2VV-05,1
2VV-10,10MTR BLACK SVHS M - M GOLD CABLE - B/Q 50,Cables Direct Ltd,0.86,,1991,CDL,2VV-10,2VV-10,1 
```

我得到的 outfile.csv 是 -

```
StockNumber,SKU,ChannelProfileID,CostPrice
10m_s-vid#APTIIAMZ,2VV-10,"(' ',)", 
10m_s-vid#CSE,2VV-10,"(' ',)", 
1RR-01#CSE,1RR-01,"(' ',)", 
1RR-01#PCAWS,1RR-01,"(' ',)", 
1m_s-vid_ext#APTIIAMZ,2VV-101,"(' ',)", 
```

但我需要的 outfile.csv 是 -

```
StockNumber,SKU,ChannelProfileID,CostPrice
10m_s-vid#APTIIAMZ,2VV-10,1991,0.86  
10m_s-vid#CSE,2VV-10,1991,0.86   
1RR-01#CSE,1RR-01
1RR-01#PCAWS,1RR-01          
1m_s-vid_ext#APTIIAMZ,2VV-101 
```

最后是代码 -

```
import csv

with open('checkfile.csv', 'rb') as checkfile:
    checkreader = csv.DictReader(checkfile)

    product_result = dict(
        ((v['ProductCode'], v[' Stock']), (v['ProductCode'], v[' CostPrice']))  for v in checkreader
    )

with open('infile.csv', 'rb') as infile:
    with open('outfile.csv', 'wb') as outfile:
        reader = csv.DictReader(infile)

        writer = csv.DictWriter(outfile, reader.fieldnames)
        writer.writeheader()

        for item in reader:
            result = product_result.get(item['SKU'], " ")

            item['ChannelProfileID'] = result,
            item['CostPrice'] = result

            writer.writerow(item) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:00:39.497

你可以让它更简单一点：

```
import csv

with open('checkfile.csv', 'rb') as checkfile:
    product_result = {
        record['ProductCode']: record for record in csv.DictReader(checkfile)}

with open('infile.csv', 'rb') as infile:
    with open('outfile.csv', 'wb') as outfile:
        reader = csv.DictReader(infile)
        writer = csv.DictWriter(outfile, reader.fieldnames)
        writer.writeheader()
        for item in reader:
            record = product_result.get(item['SKU'], None)
            if record:
                item['ChannelProfileID'] = record[' Stock']  # ???
                item['CostPrice'] = record[' CostPrice']
            else:
                item['ChannelProfileID'] = None
                item['CostPrice'] = None
            writer.writerow(item) 
```

我不确定我评论的那一行`???`。

此外，如果您真的想生成损坏的 CSV，请随意省略 else 子句。

我用 StringIO 对象对其进行了测试。它产生了您指定的结果，但带有尾随逗号，检查文件中没有匹配项。

我使用了 Python 2.7 字典理解，因为你用*python-2.7*标记了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:31:56.163

```
import csv

product_result = {}

with open('checkfile.csv', 'rb') as checkfile:
    checkreader = csv.DictReader(checkfile)

    for v in checkreader:
        product_result[v['ProductCode']] = (v[' Stock'], v[' CostPrice'])

with open('infile.csv', 'rb') as infile:
    with open('outfile.csv', 'wb') as outfile:
        reader = csv.DictReader(infile)
        writer = csv.DictWriter(outfile, reader.fieldnames)
        writer.writeheader()

        for item in reader:
            result = product_result.get(item['SKU'])
            if result:
               item['ChannelProfileID'], item['CostPrice'] = result
            else:
               item['ChannelProfileID'] = item['CostPrice'] = None

            writer.writerow(item) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-19T09:14:29.773

```
import re
import csv
import collections
import glob

# Variables

total_record = []
headerCount = 0

for file in glob.glob("*.csv"):
    print(file)

    with open(file, 'r') as f:
        reader = csv.reader(f)
        list_record = list(reader)
        if headerCount == 0:
            headerCount = 1
            total_record.extend(list_record)
        else:
            list_record.pop(0)
            total_record.extend(list_record)

with open('combine.csv', 'w') as csvFile:
    writer = csv.writer(csvFile)
    writer.writerows(total_record) 
```

# c# - 是否可以使用 StructureMap.AutoMocking 测试内部虚拟方法

> ID：13734555
> 
> 赞同：0
> 
> 时间：2012-12-05T23:41:12.293
> 
> 标签：c#, unit-testing, structuremap, rhino-mocks

是否可以使用 StructureMap.AutoMocking 中提供的自动模拟框架来测试 CUT 中的内部虚拟方法？我已将 InternalsVisibleTo 添加到相应的 AssemblyInfo.cs 文件中。这是我正在尝试做的事情：

```
public ClassA {
    public void Method1() { Method2(); }
    internal virtual void Method2() { /* do work */ }
}

[Test]
public void TestClassA() {

    // Arrange
    var mockedClass = new RhinoAutoMocker<ClassA>();
    mockedClass.PartialMockTheClassUnderTest();
    mockedClass.ClassUnderTest.Expect(x => x.Method2());

    // Act
    mockedClass.ClassUnderTest.Method1();

    // Assert
    mockedClass.ClassUnderTest.VerifyAllExpectations();
} 
```

我已经知道将内部方法更改为公共工程，但我不认为这是执行此测试的可接受方式。也许我错过了关于 RhinoMocks 和 StructureMap 交互方式的一些基本知识，但我认为基于我编写的其他单元测试，这种类型的东西应该可以工作。

**编辑**我想这将有助于提供我在尝试此操作时收到的错误消息：

```
System.InvalidOperationException : Invalid call, the last call has been used or no call       
has been made (make sure that you are calling a virtual (C#) / Overridable (VB) 
method).
at Rhino.Mocks.LastCall.GetOptions()
at Rhino.Mocks.RhinoMocksExtensions.Expect(T mock, Func`2 action)
at Rhino.Mocks.RhinoMocksExtensions.Expect(T mock, Action`1 action)
at ClassATest.TestClassA() in ClassA.cs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:57:54.747

**编辑** 我在下面的陈述中是错误的。我终于回到了这一点，并`protected`在我的所有单元测试中使用了这个关键字，这些单元测试是`internal virtual`我被测类中的测试方法。这**确实**适用于结构映射，并且是我收到我收到的错误的唯一原因。

~~在对此进行一些研究之后，似乎 Rhino.Mocks 的某些元素无法通过 StructureMap.Automocker 访问。当我重新编写单元测试以仅使用 Rhino.Mocks 框架时，我能够向测试运行器公开“内部虚拟”方法。这不是一个理想的情况，我希望在较新版本的 StructureMap 中看到对此的支持，但如果在添加对“内部虚拟”方法的支持之前还有其他更重要的事情，那可能还有很长的路要走。~~

我根据以下帖子重新进行了单元测试：

[http://ayende.com/Wiki/Rhino+Mocks+-+Internal+Methods.ashx](http://ayende.com/Wiki/Rhino+Mocks+-+Internal+Methods.ashx)

[如何使用 Rhino.Mocks 模拟受保护的虚拟成员？](https://stackoverflow.com/questions/2581052/how-to-mock-protected-virtual-members-with-rhino-mocks)

# android - 如何构建查询以检查根据行数构建的字符串是否出现多次？

> ID：13734558
> 
> 赞同：0
> 
> 时间：2012-12-05T23:41:26.317
> 
> 标签：android, arrays, sqlite

有点难以解释，但我们开始吧：

我有一个看起来有点像这样的数据库表（为了这个问题的目的非常简化）；

```
_id | area_link | text1 | text2 | text3 | text4
1          1      this     is       one    example
2          1      this     is     another  example
3          2      this     is       one    example
4          2      this     is     another  example
5          2      this     is     another  example 
```

所以我可以构建一个查询来查找数据 WHERE area_link 等于 2，但我想以某种方式创建一个如下所示的数组：

```
thisisoneexample
thisisanotherexample 
```

但这不会导致这种情况（这是我通过简单查询会得到的）：

```
thisisoneexample
thisisanotherexample
thisisanotherexample 
```

这是我在数据库助手类中的实际查询示例：

```
public Cursor fetchComponentSpecForArea(long areaId, String componentType, String specSaved) throws SQLException {
    Cursor mCursor =
            rmDb.query(true, DAMAGED_COMPONENTS_TABLE, new String[] {
                    AREA_LINK,
                    COMPONENT_TYPE,
                    MANUFACTURER,
                    TEXT1,
                    TEXT2,
                    TEXT3,
                    TEXT4,
                    NOTES_SPEC,
                    SPEC_SAVED}, 
                    AREA_LINK + " = " + areaId + " AND " + COMPONENT_TYPE + " = ? AND " + SPEC_SAVED + " = ?", 
                    new String[] {componentType, specSaved}, 
                    null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

以及我如何在主代码中调用它的示例：

```
 final Cursor componentSpecForAreaCursor = (Cursor) rmDbHelper.fetchComponentSpecForArea(areaId, componentType, specSaved);
        if (componentSpecForAreaCursor.moveToFirst()){
            String manufacturer = RMUtilities.notEmpty(componentSpecForAreaCursor.getString(componentSpecForAreaCursor.getColumnIndex(RMDbAdapter.MANUFACTURER)), "");
            String text1 = RMUtilities.notEmpty(componentSpecForAreaCursor.getString(componentSpecForAreaCursor.getColumnIndex(RMDbAdapter.TEXT1)), "");
            String text2 = RMUtilities.notEmpty(componentSpecForAreaCursor.getString(componentSpecForAreaCursor.getColumnIndex(RMDbAdapter.TEXT2)), "");
            String text3 = RMUtilities.notEmpty(componentSpecForAreaCursor.getString(componentSpecForAreaCursor.getColumnIndex(RMDbAdapter.TEXT3)), "");
            String text4 = RMUtilities.notEmpty(componentSpecForAreaCursor.getString(componentSpecForAreaCursor.getColumnIndex(RMDbAdapter.TEXT4)), "");
            String notes_spec = RMUtilities.notEmpty(componentSpecForAreaCursor.getString(componentSpecForAreaCursor.getColumnIndex(RMDbAdapter.NOTES_SPEC)), "");
            rmDbHelper.saveDamagedComponentSpec(componentId, manufacturer, text1, text2, text3, text4, notes_spec);
        } 
```

所以我想我必须：

```
create an array,
query the database,
if cursor > 0 then go to first and:
build a string from the relevant database fields,
put this into array
build next string from the relevant database fields,
check if this matches any of entries in array if not:
put this into array 
```

等，但可以做一些帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:56:39.633

尝试使用 Pattern 和 Matcher 对象。然后调用`.find()`matcher对象的方法，执行你想要的动作！

这是官方文档的链接，可以帮助您：http: [//developer.android.com/reference/java/util/regex/Pattern.html](http://developer.android.com/reference/java/util/regex/Pattern.html)

# java - Eclipse LogCat 中的错误 - Android

> ID：13734560
> 
> 赞同：4
> 
> 时间：2012-12-05T23:41:32.463
> 
> 标签：java, android, eclipse, button, logcat

有人可以帮助我吗？我正在制作一个简单的 Android 应用程序，它具有启动画面和带有按钮的主菜单，这应该会导致另一个“页面”并且可能会播放声音。该应用程序启动一秒钟，出现启动画面，然后应用程序崩溃。我还注意到按钮加载另一个页面需要一段时间：

我认为这条线与它有关：

```
12-05 23:36:57.710: I/ActivityManager(287): Displayed com.example.prva/.button: +1s167ms 
```

这些是不断出现的红色错误：

```
 12-07 14:24:28.301: E/ActivityThread(587): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0c8d8 that was originally bound here
12-07 14:24:28.301: E/ActivityThread(587): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0c8d8 that was originally bound here
12-07 14:24:28.301: E/ActivityThread(587):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-07 14:24:28.301: E/ActivityThread(587):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-07 14:24:28.301: E/ActivityThread(587):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-07 14:24:28.301: E/ActivityThread(587):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-07 14:24:28.301: E/ActivityThread(587):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-07 14:24:28.301: E/ActivityThread(587):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-07 14:24:28.301: E/ActivityThread(587):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-07 14:24:28.301: E/ActivityThread(587):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
12-07 14:24:28.301: E/ActivityThread(587):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
12-07 14:24:28.301: E/ActivityThread(587):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
12-07 14:24:28.301: E/ActivityThread(587):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-07 14:24:28.301: E/ActivityThread(587):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-07 14:24:28.301: E/ActivityThread(587):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-07 14:24:28.301: E/ActivityThread(587):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-07 14:24:28.301: E/ActivityThread(587):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-07 14:24:28.301: E/ActivityThread(587):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-07 14:24:28.301: E/ActivityThread(587):  at java.lang.Thread.run(Thread.java:856)
12-07 14:24:28.312: E/StrictMode(587): null
12-07 14:24:28.312: E/StrictMode(587): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d0c8d8 that was originally bound here
12-07 14:24:28.312: E/StrictMode(587):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-07 14:24:28.312: E/StrictMode(587):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-07 14:24:28.312: E/StrictMode(587):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-07 14:24:28.312: E/StrictMode(587):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-07 14:24:28.312: E/StrictMode(587):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-07 14:24:28.312: E/StrictMode(587):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-07 14:24:28.312: E/StrictMode(587):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-07 14:24:28.312: E/StrictMode(587):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
12-07 14:24:28.312: E/StrictMode(587):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
12-07 14:24:28.312: E/StrictMode(587):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
12-07 14:24:28.312: E/StrictMode(587):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-07 14:24:28.312: E/StrictMode(587):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-07 14:24:28.312: E/StrictMode(587):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-07 14:24:28.312: E/StrictMode(587):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-07 14:24:28.312: E/StrictMode(587):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-07 14:24:28.312: E/StrictMode(587):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-07 14:24:28.312: E/StrictMode(587):  at java.lang.Thread.run(Thread.java:856)
12-07 14:24:28.312: W/ActivityManager(273): Unbind failed: could not find connection for android.os.BinderProxy@40f409d8
12-07 14:24:28.322: E/ActivityThread(587): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d5ed58 that was originally bound here
12-07 14:24:28.322: E/ActivityThread(587): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d5ed58 that was originally bound here
12-07 14:24:28.322: E/ActivityThread(587):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-07 14:24:28.322: E/ActivityThread(587):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-07 14:24:28.322: E/ActivityThread(587):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-07 14:24:28.322: E/ActivityThread(587):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-07 14:24:28.322: E/ActivityThread(587):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-07 14:24:28.322: E/ActivityThread(587):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-07 14:24:28.322: E/ActivityThread(587):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-07 14:24:28.322: E/ActivityThread(587):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
12-07 14:24:28.322: E/ActivityThread(587):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
12-07 14:24:28.322: E/ActivityThread(587):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-07 14:24:28.322: E/ActivityThread(587):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-07 14:24:28.322: E/ActivityThread(587):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-07 14:24:28.322: E/ActivityThread(587):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-07 14:24:28.322: E/ActivityThread(587):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-07 14:24:28.322: E/ActivityThread(587):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-07 14:24:28.322: E/ActivityThread(587):  at java.lang.Thread.run(Thread.java:856)
12-07 14:24:28.341: E/StrictMode(587): null
12-07 14:24:28.341: E/StrictMode(587): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d5ed58 that was originally bound here
12-07 14:24:28.341: E/StrictMode(587):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-07 14:24:28.341: E/StrictMode(587):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-07 14:24:28.341: E/StrictMode(587):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-07 14:24:28.341: E/StrictMode(587):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-07 14:24:28.341: E/StrictMode(587):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-07 14:24:28.341: E/StrictMode(587):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-07 14:24:28.341: E/StrictMode(587):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-07 14:24:28.341: E/StrictMode(587):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
12-07 14:24:28.341: E/StrictMode(587):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
12-07 14:24:28.341: E/StrictMode(587):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-07 14:24:28.341: E/StrictMode(587):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-07 14:24:28.341: E/StrictMode(587):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-07 14:24:28.341: E/StrictMode(587):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-07 14:24:28.341: E/StrictMode(587):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-07 14:24:28.341: E/StrictMode(587):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-07 14:24:28.341: E/StrictMode(587):  at java.lang.Thread.run(Thread.java:856) 
```

如果需要，我可以发布更多信息，提前谢谢！

我的 MainActivity.java ：

```
package com.example.prva;

import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;

public class MainActivity extends Activity {

    MediaPlayer MPlayer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);        

        MPlayer = MediaPlayer.create(this, R.raw.splash);
        MPlayer.start();        

        Thread tajmer = new Thread(){
            public void run(){
                try{
                    int tajmer = 0;
                    while(tajmer == 0)
                    {
                        sleep(3500);
                        tajmer = tajmer +1;
                    }
                startActivity(new Intent(MainActivity.this, Meni_Splash.class));
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                finally{
                    finish();
                }
            }           

        };
        tajmer.start();     

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        MPlayer.release();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        MPlayer.pause();
    }   

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        MPlayer.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是一个 Meni_Splash.java 代码：

```
package com.example.prva;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Meni_Splash extends Activity{

    MediaPlayer ButtonClick;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 

        //Button click sound
        final MediaPlayer ButtonClick = MediaPlayer.create(this, R.raw.button1);

        Button btnv = (Button) findViewById(R.id.buttonv);
        btnv.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.example.prva.BUTTONVELIKI"));
                ButtonClick.start();
            }
        });

        Button btn3 = (Button) findViewById(R.id.buttonplay);
        btn3.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.example.prva.BUTTONPLAY"));
                ButtonClick.start();
            }
        });

    }

} 
```

我的清单（我想我把这里和其他地方的一切都搞砸了......）：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.prva"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="18" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity            
            android:name="com.example.prva.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />              
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>  
        </activity>

        <activity
            android:name=".Meni_Splash"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />              
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>         

    </application>

</manifest> 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    android:background="@drawable/simplyfit">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"        
        android:text="@string/pozdrav" />

    <Button
        android:id="@+id/buttonv"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="24dp"
        android:layout_alignParentBottom="true"        
        android:background="@drawable/button_v"
        android:shadowColor="#000000"
        android:shadowDx="1"
        android:shadowDy="1"
        android:shadowRadius="2"
        android:text="@string/buttonv"
        android:textColor="#FFFFFF"
        android:textSize="25sp"
        android:textStyle="bold"
        />

</RelativeLayout> 
```

按钮.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/splash">

     <TextView
         android:id="@+id/textView5"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:layout_marginTop="@dimen/text2"
         android:text="@string/strana2"
         android:textSize="30sp"
         android:textStyle="bold|italic" />

     <Button
         android:id="@+id/buttonplay"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:layout_marginTop="225dp"
         android:text="@string/textbuttonplay"/>

</LinearLayout> 
```

按钮.java：

```
package com.example.prva;

import android.app.Activity;
import android.os.Bundle;

public class button extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.button);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:34:41.610

写下面的代码

```
startActivity(new Intent(MainActivity.this, Meni_Splash.class)); 
```

代替

```
startActivity(new Intent("com.example.prva.MENU")); 
```

并将以下代码写入您的 androidmanifest.xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.prva"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="18" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity            
            android:name="com.example.prva.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />              
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>  
        </activity>

        <activity
            android:name=".Meni_Splash"
            android:label="@string/app_name" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />              
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>         

    </application>

</manifest> 
```

它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:54:26.617

尝试： startActivity(new Intent(MainActivity.this, Meni_Splash.class));

# python - 如何快速禁用 python 中的 try 语句进行测试？

> ID：13734567
> 
> 赞同：31
> 
> 时间：2012-12-05T23:42:02.917
> 
> 标签：python, debugging, testing, exception-handling

假设我有以下代码：

```
尝试：
    打印“富”
    # 更多代码...
    打印“酒吧”
除了：
    经过

```

出于测试目的，我将如何临时禁用 try-statement？

你不能只注释掉`try`和`except`行，因为缩进仍然是关闭的。

没有比这更简单的方法了吗？

```
＃尝试：
打印“富”
# 更多代码...
打印“酒吧”
＃除了：
＃ 经过

```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-05T23:48:16.173

您可以将异常重新引发为 except 块的第一行，它的行为就像没有 try/except 一样。

```
try:
    print 'foo'
    # A lot more code...
    print 'bar'
except:
    raise # was: pass 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-11-21T16:56:24.593

背靠 velotron 的回答，我喜欢做这样的事情的想法：

```
try:
    print 'foo'
    # A lot more code...
    print 'bar'
except:
    if settings.DEBUG:  # Use some boolean to represent dev state, such as DEBUG in Django
        raise           # Raise the error
    # Otherwise, handle and move on. 
    # Typically I want to log it rather than just pass.
    logger.exception("Something went wrong") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T23:44:12.487

把它变成一个`if True`语句，分支`except`“注释掉”子句`else`（永远不会执行）：

```
if True: # try:
    # try suite statements
else: # except:
    # except suite statements 
```

是可选的`else:`，您也可以只注释掉整个`except:`套件，但是通过使用，`else:`您可以使整个`except:`套件缩进和取消注释。

所以：

```
try:
    print 'foo'
    # A lot more code...
    print 'bar'
except SomeException as se:
    print 'Uhoh, got SomeException:', se.args[0] 
```

变成：

```
if True: # try:
    print 'foo'
    # A lot more code...
    print 'bar'
else: # except SomeException as se:
    print 'Uhoh, got SomeException:', se.args[0] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-05T23:47:51.850

让你`except`只捕获`try`块不会抛出的东西：

```
class FakeError:
    pass

try:
    # code
except FakeError: # OldError:
    # catch 
```

实际上不确定这是否是一个好主意，但它确实有效！

# java - 格式化字符串 - Java

> ID：13734569
> 
> 赞同：-3
> 
> 时间：2012-12-05T23:42:12.877
> 
> 标签：java, string

如何在 Java 中将以下行格式化为有效字符串？

```
'//*[@id="pageBodyRight"]/div[4]/a/img' 
```

抱歉，我是 Java 新手。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:43:45.353

嗯..

```
String str = "'//*[@id=\"pageBodyRight\"]/div[4]/a/img'"; 
```

?

如果字符串中有双引号，则需要使用反斜杠对其进行转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T23:44:06.737

用反斜杠转义双引号`\"`

```
 String sd ="'//*[@id=\"pageBodyRight\"]/div[4]/a/img'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:47:59.810

```
 System.out.println("'//*[@id=\"pageBodyRight\"]/div[4]/a/img'"); 
```

# c# - 解析 SOAP 响应以获取所需的值

> ID：13734571
> 
> 赞同：2
> 
> 时间：2012-12-05T23:42:14.350
> 
> 标签：c#, soap

如何解析以下内容以获取 Value1 和 Value2

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <ns1:productResponse xmlns:ns1="http://mysite.com/">
            <return xmlns:ns2="http://mysite.com/">
                <Value1>12</businessBankingInd>
                <Value2>36</businessTypeId>             
            </return>
        </ns1:productResponse>
    </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:46:23.363

首先，您需要将此类 SOAP 消息转换为 XML 样式，然后只需使用`XDocument`或`XmlDocument`

请检查[这个](https://stackoverflow.com/questions/2876012/using-c-sharp-to-parse-a-soap-response)和[这个](https://stackoverflow.com/questions/12201822/read-soap-message-using-c-sharp)链接。我认为他们是同一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:16:43.950

如果您有 wsdl 或 xsd，则可以使用 svcutil.exe 或 xsd.exe 或通过在 Visual Studio 中添加服务引用来基于 xml 生成 C# 类。

然后，您将使用 XmlSerializer 或 DataContractSerializer 反序列化消息（取决于用于生成对象的选项）。

之后，您只需使用普通的旧 C# 对象。

当然，如果您使用 WCF，很多事情都会为您解决。

# canvas - 缩放的 HTML5 画布中的字体大小小于 1

> ID：13734575
> 
> 赞同：2
> 
> 时间：2012-12-05T23:43:08.363
> 
> 标签：canvas, font-size

我正在构建一个带有 HTML5 画布 2D 上下文的正方形网格。我平移和缩放画布，使网格正方形的大小为一个单位，但未转换为 30 像素。这是一个由 30px 正方形组成的 10x10 网格[示例。](http://backspaces.net/temp/scaledgrid.png)

这很好用，除了一件事：文本。

要为画布指定适合正方形的字体，我需要指定小于 1 的字体大小。

例如，“.5px sans-serif”应该是正方形大小的一半（即“15px sans-serif”代表 30px 未转换的正方形）。这至少在 Chrome 中失败了，并且画布恢复为更大的默认值。

我发现的唯一解决方案是在我绘制文本时撤消画布缩放，哎呀！

有没有办法通过亚像素字体规范来解决这个问题？（自然变换后，字体会是正常的大字体。亚像素字体大小仅相对于画布变换）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T03:17:07.427

将字体大小设置为 0.5px 意味着字体是未转换的半像素。它不是一个比例值，而是一个绝对值。

因此，将字体大小指定为未缩放大小、缩放上下文、绘制文本和网格，然后可以选择移除缩放。

这个演示将展示这一点：
**[Scale demo](http://jsfiddle.net/gE7x7/)**

必不可少的部分：

```
ctx.font = '15px sans-serif';
ctx.scale(1/30, 1/30);
ctx.fillText('TEXT', 5, 5);
ctx.strokeRect(0, 0, 30, 30); 
```

**[示例演示](http://jsfiddle.net/eX2ve/)**

这个例子将在左上角产生一个小点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T01:33:41.343

在认为这很困难之后，我意识到有一个使用转换的简单解决方案。

考虑到上下文当前正在以一种复杂的方式进行转换，我想在给定的位置绘制文本`(tx,ty)`。您唯一需要知道的是当前比例，`(scaleX,scaleY)`（无论如何您都需要知道它来计算分数字体大小。然后您可以翻译（在转换后的坐标系中），然后取消缩放并绘制文本：

```
ctx.save();
ctx.translate(tx, ty);
ctx.scale(1/scaleX, 1/scaleY);
ctx.fillText("Some String", 0, 0);
ctx.restore(); 
```

如果您需要对文本大小进行任何数学运算，可以在“未缩放”坐标中完成。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-06T23:32:57.133

坦率地说，亚像素字体大小毫无意义。相反，您可能想要完全删除文本，或者用小直线“希腊化”它以指示文本行。以某个已知的标准大小使用 measureText() 来为每行获取适当的相对长度，然后只需绘制一条细直线来指示（不可读）文本的存在。

# c - C中的静态结构声明

> ID：13734577
> 
> 赞同：2
> 
> 时间：2012-12-05T23:43:10.817
> 
> 标签：c, static

我试图做一个`struct`声明`static`（所以它只能在文件中使用）：

```
static typedef struct
{
   int foo;
} MyStruct;

static MyStruct[5]; 
```

（这是在 test_struct.c 中）当我编译这个东西时，我得到了这个错误：

```
test_struct.c:12: multiple storage classes in declaration of `MyStruct' 
```

我想如果我删除`static`before `typedef struct ...`，它会起作用，但是如果我真的想让 struct 声明静态，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:46:17.560

您可以将**变量声明为 static**。

```
static MyStruct ms[5]; 
```

我一般是这样的

```
typedef struct{
   int foo;
} MyStruct;

static MyStruct   myStruct[5]; 
```

# java - 在可执行 jar 中加载资源

> ID：13734584
> 
> 赞同：0
> 
> 时间：2012-12-05T23:43:43.283
> 
> 标签：java, eclipse, jar

我正面临带有可执行 jar 的文件夹问题。

其实我想打电话

```
 URL keystoreURL = ServerGUI.class.getResource("/resources/keystore");
    String keystorePath = keystoreURL.getPath();
    System.setProperty("javax.net.ssl.keyStore",keystorePath); 
```

加载密钥库。因为 setProperty 想要一个字符串来访问文件。

我的资源文件夹位于 Eclipse 的 /src 文件夹中。在 Eclipse 中工作时一切正常，但如果我想创建一个可执行的 jar 文件，即使资源文件夹也存在，路径也不正确。

编辑：打印路径时另一个有趣的事情：在 Eclipse 中：file:/C:/Users/Xenom/workspace/eBankingRMI/bin/resources/truststore

在 jar 中：jar:file:/C:/Users/Xenom/Desktop/ClientBanking.jar!/resources/truststore

很明显 setProperty 无法读取第二个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:08:50.180

不能保证资源 URL 与实际的文件系统文件匹配。大多数情况下，罐子或战争中不会出现这种情况。

如果您的 API 绝对需要一个文件（AFAIK 密钥库确实需要），您需要获取该 URL 并将其流式传输到一个实际的文件系统文件，然后使用它来设置属性。

# java - 十六进制字符

> ID：13734598
> 
> 赞同：-1
> 
> 时间：2012-12-05T23:44:19.233
> 
> 标签：java, regex

我正在尝试检查字符串是否为十六进制。下面的代码工作正常。

```
 [0-9A-F]+ 
```

在某些情况下，中间会有字符“X”，例如，

1234X3D

X12353D

1234E3X

有人可以帮我改变这个正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:23:50.090

无需质疑为什么要将 X 视为十六进制数字，您问题的正确答案是：

```
[0-9A-FX]+ 
```

该正则表达式在任何地方都不需要存在“X”。虽然这也是可以接受的：

```
 ([0-9A-F]+)|([0-9A-FX]+) 
```

它是不必要的复杂和多余的。这是因为 [0-9A-F]+ 是 [0-9A-FX]+ 的子集。考虑在此处创建的 DFA：

DFA1：[0-9A-F]+

```
Accepting: state 1
State 0      input: 0-9A-F             to state 1
State 1      input: 0-9A-F             to state 1 
```

DFA2：[0-9A-FX]+

```
Accepting: state 1
State 0      input: 0-9A-F             to state 1
State 0      input: X                  to state 1
State 1      input: 0-9A-F             to state 1
State 1      input: X                  to state 1 
```

请注意，DFA1 中存在的所有接受状态转换也存在于 DFA2 中。因此 DFA1 ([0-9A-F]+) 的匹配输入是 DFA2 ([0-9A-FX]+) 的子集

或者，更简洁地说：

([0-9A-F]+) ⊆ ([0-9A-FX]+)

如果 A ⊆ B 那么 A|B=B

因此 ([0-9A-F]+)|([0-9A-FX]+) = [0-9A-FX]+。

量子点

# audio - 哪些音频 API 可以支持推测性评估和校正？

> ID：13734599
> 
> 赞同：0
> 
> 时间：2012-12-05T23:44:30.107
> 
> 标签：audio, low-latency, optimistic-concurrency

推测性评估（又名推测性执行）是一种以偶尔返工（低效率）为代价实现低延迟代码的有效方法。推测评估是现代计算机体系结构的一种常见的低级技术，但它可以在更高级别的编程模型（参见时间扭曲协议、时间逻辑、反应式编程模型）中得到支持。

一个似乎推测性评估特别有用的地方是音频的实时计算，例如用于实时编码或游戏。这个想法很简单：我们可以推测性地填充音频缓冲区以防止缓冲区欠载，但如果我们必须对任何最后即时更改做出反应，则偶尔会纠正这些缓冲区。这种技术仍然可能出现故障。零散的更新可能会从前面砍掉一点。但是由于大多数推测的声音应该仍然大部分是正确的，因此与典型的欠载相比，这是一种不同的 - 并且可能更优雅的故障模式。

现在，我想知道哪些音频 API 或库最有效地支持这些对现有缓冲区的最后即时更新。我不是声音编程方面的专家，但我见过的大多数示例代码似乎都假定了对缓冲区的承诺。如果我在加载缓冲区后承诺使用缓冲区，那么别无选择，只能在延迟和欠载风险之间进行权衡。哪些音频 API 不需要承诺？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:05:04.680

一旦包含声音的缓冲区被传递到您的声卡，通常为时已晚以任何方式对其进行修改。我似乎记得微软试图引入一个音频驱动模型，它允许你直接写入声卡的内存缓冲区（[WaveRT](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff538837%28v=vs.85%29.aspx)），但由于 USB 声卡不支持它，它并没有获得太多的牵引力。

所有音频 API 都会有一种方法，您可以提供要播放的缓冲区，或填充给定的缓冲区。完成此操作后，无法保证更改该位置的内存会产生任何影响（甚至可能导致崩溃）。使用 windows waveOut API，您可以将多个缓冲区排队，因此您可以在声卡开始播放之前更改一个。但是，它不是一个低延迟的 API，所以正在播放的 API 可能会在 50 毫秒左右。

大多数需要非常灵敏的声音的应用程序只是在低延迟下工作。从音频处理的角度来看，追溯修改已经写入的缓冲区的一部分通常非常困难，因为如果不淡入淡出，换出音频可能会导致爆音和咔嗒声，并且任何 DSP您传递的音频可能处于无法重现的状态。

# c++ - 允许将右值绑定到非常量左值引用吗？

> ID：13734600
> 
> 赞同：2
> 
> 时间：2012-12-05T23:44:30.993
> 
> 标签：c++, visual-studio-2010, visual-c++

在研究 rvalues 和 rvalue references 时，我被指出了出色的帖子[https://stackoverflow.com/a/11540204/368896](https://stackoverflow.com/a/11540204/368896)，其中出现了下表：

```
 lvalue   const lvalue   rvalue   const rvalue
---------------------------------------------------------              
X&          yes
const X&    yes      yes            yes      yes
X&&                                 yes
const X&&                           yes      yes 
```

请注意，该表表明右值不能绑定到非常量左值引用。

但是，在 VS2010 中，我似乎能够这样做：

```
class A
{};

int main()
{
    A & a = A(); // Binding an rvalue to a non-const lvalue reference?
} 
```

我的误解在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:47:57.550

这是 Microsoft 编译器的编译器“扩展”（或“错误”，取决于您的观点）。C++ 只允许将左值非常量绑定到非常量左值引用。

# python - 向所有连接的客户端/资源发送 xmpp 消息

> ID：13734601
> 
> 赞同：0
> 
> 时间：2012-12-05T23:44:48.210
> 
> 标签：python, xmpp, message

如何使用 Python 库向所有连接的客户端/资源发送一条 XMPP 消息，例如：

xmpppy，jabber.py，jabberbot。任何其他命令行解决方案都很好。

到目前为止，我只能向一个客户端发送回显或一条消息。

目的是向所有连接的资源/客户端发送消息，而不是分组。这可能由命令触发，但不是“真正”必要的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:27:26.120

我不能给你一个具体的 python 例子，但我解释了逻辑是如何工作的。

当您向裸 Jid 发送消息时，它取决于服务器软件或配置如何路由。有些服务器将消息发送到“最可用资源”，有些服务器将消息发送到所有资源。例如，Google Talk 将其发送到所有资源。

如果您控制服务器软件并且它允许您将消息路由到裸 Jid 到所有连接的资源，那么这将是最简单的方法。

当您的代码必须在任何服务器上运行时，您应该收集联系人的所有可用资源。您可以通过存在获得它们，大多数库对此都有回调。然后，您可以将消息循环发送到完整的 Jids（带有资源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T06:33:40.037

我认为如果您为所有连接的资源设置相同的优先级，它会起作用，但我实际上并没有尝试。

但是在 ejabberd 中有一个名为[Mssage Carbon](http://xmpp.org/extensions/xep-0280.html)的模块可以为您执行此操作，此功能或属性也可以在“route.all-resource”的名称下公开使用。

提示：如果使用消息碳，XMPP 客户端库也应该支持它以使其工作。

# linux - 关于 linux，“一切都是文件”有多准确？

> ID：13734603
> 
> 赞同：-1
> 
> 时间：2012-12-05T23:44:56.763
> 
> 标签：linux, ubuntu

假设我要设置一台 ubuntu 机器并在其上安装一些服务和软件。进一步假设我要设置另一台库存 ubuntu 机器，这一次没有额外的服务和软件。我知道有一些方法可以创建安装/设置脚本或获取磁盘映像等来构建大量相同的机器，但是如果我要以编程方式在安装之间获取基于文件的差异并迁移所有文件添加/更改/删除/等从完全配置的系统到库存系统，然后我是否会有两个相同的工作系统（即完全实现“一切都是文件”的 linux 哲学），或者新配置的系统是否会处于不一致的状态，因为只是传输文件' 不够？我在相同和不一致的定义中排除了主机名引用等。

我问这个是因为我需要创建一个虚拟机，安装一堆软件，并将一堆内容添加到 redmine 之类的工具中，并且在不久的将来我将不得不将其镜像到另一个 vm 上。我不能简单地获取磁盘映像，因为我从中接收第二个 vm 的源没有给我那种访问权限，并且 vm 会有不同的规格。此时我也不能使用基于安装脚本的方法，因为这将需要大量开销，不会考虑添加的用户内容，而且我不会知道第一个 vm 上将需要的所有内容，直到它我们的环境是稳定的。我在上面询问的方法似乎是一种迂回但合理的方式来完成任务，只要它的假设在理论上是准确的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:47:11.413

假设这两个系统在硬件方面基本相同（即相同的网卡、视频卡等），简单地将文件从系统 A 复制到系统 V 通常就足够了。事实上，在我的工作场所，我们已经在许多成功案例中使用了这个过程作为“穷人的 P2V”机制。

如果两个系统具有不同的硬件配置，您可能需要对目标系统进行适当的调整以考虑到这一点。

## UUID 挂载

如果你有基于 UUID 的挂载——例如，你`/etc/fstab`看起来像这样......

```
UUID=03b4f2f3-aa5a-4e16-9f1c-57820c2d7a72 /boot                   ext4    defaults        1 2 
```

...那么您可能需要调整这些标识符。一个好的解决方案是改用基于标签的安装（当然，还要设置适当的标签）。

## 网卡

某些发行版将您的网卡的 MAC 地址记录为网络配置的一部分，如果 MAC 地址不同，将拒绝配置您的 NIC。在 RHEL-derivatives 下，只需从配置中删除 MAC 地址即可解决此问题。我*认为*这在 Ubuntu 下不会成为问题。

# r - 对 data.table 向量内的列表进行排序

> ID：13734605
> 
> 赞同：3
> 
> 时间：2012-12-05T23:44:59.753
> 
> 标签：r, data.table

我有一个字符串数据表，我试图将其转换为列表并排序，而不对向量本身进行排序：

```
> DT <- data.table(x=c("A11, A12, A41",
+                      "A11, A41, B11, A6, A21",
+                      "A41, A12",
+                      "A12, A41",
+                      "A12, A6, B41, A93"));DT
                        x
1:          A11, A12, A41
2: A11, A41, B11, A6, A21
3:               A41, A12
4:               A12, A41
5:      A12, A6, B41, A93 
```

我需要到达：

```
 x
1:          A11, A12, A41
2: A11, A21, A41, A6, B11
3:               A12, A41
4:               A12, A41
5:      A12, A6, A93, B41 
```

我尝试过使用一堆`order`ing、`as.lists`和 in `data.frames`，以及`data.table`我尝试编写的函数：

```
sortlists <- function(DT,col){
  for(i in 1:length(DT[,col])){
    DT[i,col]=order(DT[i,col])
  }
} 
```

这会引发我的列位置大于 ncol(x) 的错误。无论如何，必须有更好的方法来获得我想要的结果。我对 R 很陌生，对 data.tables 也很陌生（因为我听到了好消息，所以我想进一步说明）所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T00:02:05.007

这将拆分字符向量，然后对每一行进行排序并返回一个列表

```
 DT[, list(y =  lapply(strsplit(x,', '), sort))]
                    y
1:        A11,A12,A41
2: A11,A21,A41,A6,B11
3:            A12,A41
4:            A12,A41
5:     A12,A6,A93,B41 
```

和。如果您真的想要每行的单个字符串

```
DT[, list(y =  vapply(strsplit(x,', '), function(x) paste(sort(x), collapse = ', '), FUN.VALUE =character(1)))] 
```

# php - 在某个字符后删除字符串？

> ID：13734607
> 
> 赞同：1
> 
> 时间：2012-12-05T23:45:06.673
> 
> 标签：php, regex, string

如何`?, #, &, %, =`在 PHP 中的某些字符之后删除字符串的剩余部分？有任何想法吗？我试过`preg_replace()`了，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:08:07.027

这应该有效：

```
$str = "Hello World#somesuffixstr";
preg_match("/^(.*?[?#&%=]).*/", $str, $str);
echo $str[1];
// Should output "Hello World#" 
```

关于正则表达式模式：
它搜索字符串的开头 (^)，然后搜索任何字符 0 次或多次（即组 #1），然后搜索 & 或 % 之类的符号，然后搜索任何字符 0 次或多次。它用组#1 中匹配的字符替换字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:48:36.593

更新，才发现我看错了。你在寻找之前的东西，而不是之后。更新代码：

```
$test_string = 'remember?forget';
preg_match('/([^?#&%=]+)/', $test_string, $matches);
$part_before_char = $matches[1]; 
```

运行后，$part_before_char = 'remember'

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T23:49:22.993

```
$str = 'mystring#deletedpartofstring';

$str = preg_replace('/[?#&%=].+/', '', $str); 
```

# ruby-on-rails - 压缩 Rails 资产和 nginx gzip

> ID：13734608
> 
> 赞同：12
> 
> 时间：2012-12-05T23:45:09.963
> 
> 标签：ruby-on-rails, nginx, asset-pipeline

如果我有压缩的 Rails 资产，我是否必须配置 nginx 来压缩资产（gzip 设置为打开）`rake assets:precompile`？我的意思是这有意义吗？性能会更好还是更差？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T03:23:42.973

做 rake assets:precompile 并且你必须配置 nginx 来发送 gzip 版本的文件，我使用这个配置。

```
user www-data www-data;
worker_processes 4;

pid /var/run/nginx.pid;

events{
    worker_connections 2048;
    use epoll;
}

http{
    include mime.types;
    default_type application/octet-stream;

    error_log /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;

    server_tokens off;
    server_name_in_redirect off;
    ignore_invalid_headers on;

    gzip off;
    sendfile on;

    upstream reverse-proxy{
        server 127.0.0.1:3000;
        server 127.0.0.1:3001;
        server 127.0.0.1:3002;
        server 127.0.0.1:3003;
    }   

    server{
        listen 80;
        server_name _;
        root /home/www-data/my_website/public;

        client_max_body_size 10M;
        client_body_buffer_size 512k;

        location ~ ^/assets/ {
            gzip_static on;

            add_header Cache-Control public;
            expires 4w;
            gzip on;
            gzip_vary on;
            gzip_proxied any;
            gzip_disable "MSIE [1-6]\.";
            gzip_comp_level 6;
            gzip_types application/x-javascript text/css text/html image/x-icon image/png image/jpeg image/gif;
        }

        location / {
            try_files $uri @ruby;
        }

               location @ruby {
                        proxy_set_header  X-Real-IP  $remote_addr;
                        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header  Host $http_host;
                        proxy_redirect    off;

                        proxy_pass http://reverse-proxy;
                }

    }

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T00:20:39.033

你不可以。它们不是同一种压缩。运行时`rake assets:precompile`，您真正要做的就是将一堆文件合并到一个文件中并将其转储到磁盘上。实际上，根据[官方文档](http://guides.rubyonrails.org/asset_pipeline.html)，它是两个文件：

> 预编译文件时，Sprockets 还会为您的资产创建一个 gzip 压缩 (.gz) 版本。Web 服务器通常配置为使用中等压缩比作为折衷方案，但由于预编译只发生一次，Sprockets 使用最大压缩比，从而将数据传输的大小降至最低。另一方面，可以将 Web 服务器配置为直接从磁盘提供压缩内容，而不是对非压缩文件本身进行压缩。

这对您很重要，因为它允许您根据需要使用 gzip，但它不会强迫您这样做。[Gzip 压缩](https://en.wikipedia.org/wiki/Gzip)是真正的压缩（不仅仅是连接文件），它减少了您必须传输的数据量，但以牺牲处理器能力（压缩和解压缩）为代价。根据页面大小和您（和您的用户）的硬件，它可能会显着改善您的网站。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-24T16:31:48.300

这是一个完整的配置（我在我的网站上使用它）：

## 一般配置

```
http {
passenger_root /usr/local/lib/ruby/gems/1.9.1/gems/passenger-4.0.5;
passenger_ruby /usr/local/bin/ruby;

include mime.types;

default_type application/octet-stream;
server_tokens off;
sendfile on;
keepalive_timeout 70;

gzip on;
gzip_http_version 1.1;
gzip_disable "msie6";
gzip_vary on;
gzip_min_length 1100;
gzip_buffers 64 8k;
gzip_comp_level 3;
gzip_proxied any;
gzip_types text/plain text/css application/x-javascript text/xml application/xml;

add_header Strict-Transport-Security "max-age=16070400; includeSubdomains";
add_header X-Frame-Options DENY;

limit_req_zone $binary_remote_addr zone=one:10m rate=10r/s;

include /opt/nginx/conf/nginx_host.conf;
} 
```

# /opt/nginx/conf/nginx_host.conf的内容；

## 主机配置

```
server {
listen 80;
server_name *.domain.com;
root APP_PATH/current/public;
        passenger_enabled on;
        access_log off;

error_log /dev/null;

# Cross domain webfont access
location ~* \.(?:ttf|ttc|otf|eot|woff|font.css)$ {
    add_header "Access-Control-Allow-Origin" "*";
    expires 1M;
    access_log off;
    add_header Cache-Control "public";
}

location ~* \.(ico|css|gif|jpe?g|png)(\?[0-9]+)?$ {
    expires max;
}

location ~ ^/(assets|uploaded_assets|system)/  {
  root   /home/travelobd/rails_apps/travelobd/current/public;
  gzip_static on; # to serve pre-gzipped version
  expires max;
  add_header Cache-Control public;
 }
} 
```

# 对于服务资产：

```
server {
        listen 80;
        server_name     static.domain.com;
        root APP_PATH/current/public;
        location / {
                if ($request_filename ~ "\.(jpg|css|gif|png|swf|ico|js)$") {
                        break;
                }
        return 404;
        }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-15T13:10:10.560

是的，如果你想提高性能，你应该这样做。

只需将以下块添加到您的站点配置中：

```
location ~ ^/(assets)/  {
  root /path/to/public; # CHANGE THIS
  gzip_static on; # to serve pre-gzipped version
  expires max;
  add_header Cache-Control public;
} 
```

更改配置中的根路径。这就是它的全部。

RecommendationFromDocumentation™： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-27T00:37:50.197

对我有用的是配置 Nginx：

```
location ~ ^/(assets)/ {
  gzip_static on;
} 
```

然后在 application.rb 中：

```
 config.middleware.insert_before(Rack::Sendfile, Rack::Deflater)

  # Compress JavaScripts and CSS.
  config.assets.compress = true
  config.assets.js_compressor = Uglifier.new(mangle: false) 
```

# expressionengine - Exp:resso Store 传递信用卡名称

> ID：13734609
> 
> 赞同：2
> 
> 时间：2012-12-05T23:45:12.147
> 
> 标签：expressionengine, expresso-store

我们正在为 Exp:resso Store 使用 EWAY 商家插件，并注意到它向 EWAY 传递了不正确的信用卡名称 - 相反，它出于某种原因报告了 billing_name，而不是`<input name="payment[name]"/>`字段中的名称。

我知道商店没有记录任何信用卡信息，但是否有我缺少的设置或什么？漏洞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:55:40.453

当没有指定名称时，这`billing_name`只是一个后备。您的卡名输入字段实际上应该如下所示：

```
<input name="payment[card_name]" /> 
```

我只是查看了示例模板并意识到这是不正确的，所以会修复它。

另请注意，现在有一个专门的[ExpressionEngine Q&A 站点](https://expressionengine.stackexchange.com/)，它是解决此类问题的更好场所：)

# c# - Expander.Header 绑定中的自定义 ValidationRules 未触发

> ID：13734617
> 
> 赞同：0
> 
> 时间：2012-12-05T23:45:34.720
> 
> 标签：c#, wpf, binding, validationrules

当自定义 ValidationRule 与 Expander.Header 绑定关联时，我无法触发它。事实上，我似乎可以让这些自定义规则触发的唯一地方是在 DataGrid.RowValidationRules 块中......

扩展器是在我的 Window XAML 文件中定义的，如下所示；

```
<Expander Style="{StaticResource ValidatedSecondLevelExpanderStyle}">
    <Expander.Header>
        <Binding Path="Name" Mode="OneWay" ValidatesOnDataErrors="True" NotifyOnValidationError="True">
            <Binding.ValidationRules>
                <ValidationRules:BoundObjectIsValid />
            </Binding.ValidationRules>
        </Binding>
    </Expander.Header>
</Expander> 
```

绑定属性“名称”正确显示，但未调用验证规则“BoundObjectIsValid”。这是可能的，如果是这样，我错过了什么？

我知道我可以交替地在绑定对象上实现 IDataErrorInfo，但是如果没有系统其他部分提供的某些上下文，该对象无法明智地验证自己。重构是可能的，但我希望首先让 ValidationRules 工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:28:44.827

请参阅[msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.validationrule.aspx)。

> 绑定引擎每次将输入值（即绑定目标属性值）传输到绑定源属性时，都会检查与绑定关联的每个 ValidationRule。

因此，在您的情况下，您没有将输入值传输到源属性，因为您的 Expander.header 不是可用于输入值的控件。

**编辑：**但是在 ValidationRule 中有一个名为 ValidatesOnTargetUpdated' 的属性。将其设置为 true 时，将在更新目标属性时应用验证规则

# android - 25% 颜色是什么意思？如何将其转换为十六进制值？

> ID：13734621
> 
> 赞同：-3
> 
> 时间：2012-12-05T23:46:17.353
> 
> 标签：android, html, ios, css, colors

我从设计师那里得到的

```
25% white
39% black 
```

我需要在 ARGB 中使用颜色，如何将其转换为十六进制？请显示详细的数学步骤

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T23:48:11.913

每个颜色通道由一个字节表示（范围从十六进制的 0x0 到 0xFF），因此您有 4 个通道：A（alpha）、R（红色）、G（绿色）、B（蓝色）。那么，0% 表示 0x0，100% 表示 0xFF，所以：

0.25 * 255 = 十进制的 64 = 十六进制的 40。0.39 * 255 = 十进制的 99 = 十六进制的 63。

```
 AARRGGBB
White with 100% of opacity: 0xFFFFFFFF
White with  25% of opacity: 0x40FFFFFF
Black with 100% of opacity: 0xFF000000
Black with  39% of opacity: 0x63000000 
```

# internationalization - 结合使用 Gettext 和 ICU MessageFormat 是个好主意吗？

> ID：13734622
> 
> 赞同：5
> 
> 时间：2012-12-05T23:46:19.640
> 
> 标签：internationalization, gettext, icu

当我读到[Gettext](http://en.wikipedia.org/wiki/Gettext)和[ICU MessageFormat](http://userguide.icu-project.org/formatparse)时，它们总是被描述为对立的本地化方法。

但我认为，将两者结合起来会是一个有趣的想法：使用 MessageFormat 进行格式化，使用 Gettext 根据语言选择正确的模板。沿着：

```
setlocale(LC_ALL, lang)
output = MessageFormat(lang, gettext("There is {number 1} Foo in bar."), [1]) 
```

这种方法有明显（或不那么明显）的缺点吗？我是否错过了 MessageFormat 关于如何选择翻译模板的核心部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:29:01.727

您的方法的明显问题是如何处理复数形式。虽然 ICU 内置了对[CLDR 的复数规则](http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/language_plural_rules.html)的支持，但它不像 gettext 使用的那样简单和灵活。
基本上，在 gettext 中，翻译者可以根据需要添加尽可能多的复数形式，并且由 .po 文件头中的选择规则控制。它比使用 CLDR 规则（根据 CLDR 版本可能不正确）更灵活、更正确。

# jquery - 基于Class的jQuery自定义验证

> ID：13734623
> 
> 赞同：2
> 
> 时间：2012-12-05T23:46:22.707
> 
> 标签：jquery, validation

我有这两种方法，它们工作，有点...

问题在于，在第一种情况下，只有具有该类名的第一个输入项有效。

```
 $.validator.addClassRules("NameField",{
        required: true,
            minlength: 2,
        uniqueName: {
          product: function() {
              return $(this).val();
          }
        },
        messages: {
           required: "Required Field",
           minlength: "Minimum 2 characters",
           uniqueName: "Name exists already",
           remote: ''
        }
    }); 
```

第二个示例的问题是验证有效，但消息不适用于远程验证器

```
 $(".NameField").rules("add", {
        required: true,
            minlength: 2,
        uniqueName: {
          product: function() {
              return $(this).val();
          }
        },
        messages: {
           required: "Required Field",
           minlength: "Minimum 2 characters",
           uniqueName: "Name exists already",
           remote: ''
        }

    }); 
```

这是验证器的代码

```
 $.validator.addMethod("unique", function(value, element, params) {
      return $.validator.methods.remote.call(this, value, element, {
          url: 'mypage',
          data: {
              : value
          }
      });
    }); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:56:31.773

您不能像使用`uniqueName`. 您必须首先定义将方法添加到验证器，然后您可以将其添加到您的规则中。

**HTML**

```
<form class="testForm" action="" method="post">
    <input type="text" name="input1" class="NameField" />
    <input type="text" name="input2" class="NameField" />
    <input type="text" name="input3" class="NameField" />
    <input type="text" name="input4" class="NameField" />
    <input type="submit" />
</form>​ 
```

**Javascript**

```
$.validator.addMethod("uniqueName", function(value, element) {
    var parentForm = $(element).closest('form');
    if ($(parentForm.find('.NameField[value=' + value + ']')).size() > 1) {
        return false;
    }
    else {
        return true;
    }
}, "Name exists already");

$.validator.addClassRules({
    NameField: {
        required: true,
        minlength: 2,
        uniqueName: true
    }
});

$(".testForm").validate();​ 
```

**[演示](http://jsfiddle.net/HSMnf/3/)**

另请注意，您不能添加`messages`该`addClassRules`功能。

# javascript - 如何捕获客户端丢失的资源？

> ID：13734625
> 
> 赞同：4
> 
> 时间：2012-12-05T23:46:31.910
> 
> 标签：javascript, html, dom, javascript-events

我试图通过将以下代码片段添加到我的站点来捕获丢失资源的实例`<head>`：

```
window.onerror = function(message, file, line) {
    console.log('Error:', message, file, line);
} 
```

但这似乎只捕获 JS 错误，而不是一般的 DOM 错误。我故意尝试过：1）创建`<script>`指向不存在文件的`<img>`标签，2）创建指向不存在图像的标签。两者都不会触发`error`事件。

我的问题是：

1.  `onerror`监听什么样的错误？
2.  如何捕获这些错误？为什么上面的代码不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:54:00.483

如果您认为某个特定元素可能具有不存在的图像或脚本，并且您通常不需要捕获内容，则可以在`onerror`这些特定元素`img`或`script`标签中添加：

```
<img src="http://something/that/might/not/exist.png" onerror="alert('Error!');"> 
```

# java - 使用字符串方法查找和计算字符串中的元音？

> ID：13734630
> 
> 赞同：9
> 
> 时间：2012-12-05T23:46:59.557
> 
> 标签：java, string

我有这个家庭作业问题（我说实话，至少没有试图隐藏它）而且我在弄清楚如何去做时遇到了问题。

给定以下声明：字符串短语=“WazzUp？-谁在第一个？？？-IDUNNO”；编写必要的代码来计算字符串中元音的数量并将适当的消息打印到屏幕上。

这是我到目前为止的代码：

```
String phrase =  " WazzUp ? - Who's On FIRST ??? - IDUNNO";
int i, length, vowels = 0;
String j;
length = phrase.length();
for (i = 0; i < length; i++)
{

  j = phrase.substring(i, i++);
  System.out.println(j);

  if (j.equalsIgnoreCase("a") == true)
    vowels++;
  else if (j.equalsIgnoreCase("e") == true)
    vowels++;
  else if (j.equalsIgnoreCase("i") == true)
    vowels++;
  else if (j.equalsIgnoreCase("o") == true)
    vowels++;
  else if (j.equalsIgnoreCase("u") == true)
    vowels++;

}
System.out.println("Number of vowels: " + vowels); 
```

但是，当我运行它时，它只会产生一堆空白行。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T23:54:14.063

我认为循环中不需要打印语句。

```
String s = "Whatever you want it to be.".toLowerCase();
int vowelCount = 0;
for (int i = 0, i < s.length(); ++i) {
    switch(s.charAt(i)) {
        case 'a':
        case 'e':
        case 'i':
        case 'o':
        case 'u':
            vowelCount++;
            break;
        default:
            // do nothing
    }
} 
```

这会将字符串转换为小写，并检查字符串中的所有字符是否有元音。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T23:49:39.967

`phrase.substring(i, i++);`应该是`phrase.substring(i, i + 1);`。

`i++`给出 的值，`i`然后将其加 1。正如你现在所拥有的，`String j`is Effective `phrase.substring(i, i);`，它始终是空字符串。

您不需要更改循环`i`主体中的值，`for`因为它已经在`for (i = 0; i < length; i++)`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-30T20:57:58.677

这可能/应该是单线

```
System.out.println("the count of all vowels: " + (phrase.length() - phrase.replaceAll("a|e|i|o|u", "").length())); 
```

及其仅字符串方法

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-02T18:17:02.610

改进上述答案以考虑大写元音：

```
System.out.println(s.length() - s.toLowerCase().replaceAll("a|e|i|o|u|", "").length()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T23:50:24.130

使用了 i++ 之后的 i 增量，因此您实际上是在说 string.substring(i,i)。由于结束标记是独占的，这将始终返回一个空字符串。一个简单的解决方法是将其更改为

```
j = phrase.substring(i, ++i); 
```

希望有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-11T18:04:33.230

计算字符串**中元音的数量**：

```
class Test {  

      static int a;

      public static String countVowel(String strName) { 

          char ch[] = strName.toCharArray();

          for(int i=0; i<ch.length; i++) {

            switch(ch[i]) {

            case 'a':

             a++;   

            break;      

            case 'e':
                a++;    

                break;

            case 'i':
                 a++;   

                break;

            case 'o':
                 a++;   

                break;

            case 'u':
                 a++;   

                break;

            }

          }

          strName = String.valueOf(a);

          return strName;       
      } 

      public static void main(String[] args) {  

        Scanner s = new Scanner(System.in);
        System.out.print(countVowel(s.nextLine())); 
     }   

  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-05T18:18:35.857

***我知道这是一个旧的编辑，但我认为如果你使用和数组作为元音会更好：***

```
public static void main(String[] args) {

    String phrase = " WazzUp ? - Who's On FIRST ??? - IDUNNO".toLowerCase();
    int vowels = 0;
    String[] array = {"a", "e", "i", "o", "u"};
    for (int i = 0; i < phrase.length(); i++) {
        String j = phrase.substring(i, i + 1);
        System.out.println(j);
        for (int n = 0; n < array.length; n++) {
            if (j.equals(array[n])) {
                vowels++;
            }
        }
    }
    System.out.println("Number of vowels: " + vowels);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-30T15:21:55.207

我知道我有点晚了，但如果他们正在使用口音，那么这个回复可能会在未来帮助其他人

为了避免出现问题，我们可以使用 Normalizer 将输入文本规范化为 NFD，该[规范化](https://docs.oracle.com/javase/tutorial/i18n/text/normalizerapi.html)器将字母和重音中的重音（例如：变音符号、重音重音、锐音重音、抑扬音符号等）分开。

**例子：** `"schön" ----NFD----> "scho\u0308n"`

解决方案是

1.  用 ( )规范化文本并用 ( )[`Normalizer`](https://docs.oracle.com/javase/tutorial/i18n/text/normalizerapi.html)替换重音符号[`replaceAll`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String))
2.  将文本转换为小写
3.  替换所有不是元音的东西（或任何你想计算的东西）

```
import java.text.Normalizer;

public class Main {
    private static String str = "This ïs a téxt with vòwêls";

    public static void main(String[] args) {
        // Normalizing the text
        // Replacing all the accents
        // Convert to lowercase
        String text = Normalizer.normalize(str, Normalizer.Form.NFD)
                .replaceAll("[\\u0300-\\u036f]", "")
                .toLowerCase();

        // We replace everything but vowels
        int vowels_count = text.replaceAll("[^aeiou]", "").length();

        System.out.printf("%s%s%s %d %s",
                "\nThe text \"",
                str,
                "\" has",
                vowels_count,
                "vowels"
        );
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-11T06:01:50.897

使用集合：

```
 String word = "busiunesuse";
     char[] wordchar= word.toCharArray();
     Character allvowes[] ={'a','e','i','o','u'};
     Map<Character, Integer> mymap = new HashMap();

     for(Character ch: wordchar)
     {
         for(Character vowels : allvowes)
         {
            if(vowels.equals(ch))
            {
             if(mymap.get(ch)== null)
             {
                 mymap.put(ch, 1);
             }
             else
             {
                 int val = mymap.get(ch);
                 mymap.put(ch, ++val);
             }
            }

         }
     }

     Set <Character> myset = mymap.keySet();
     Iterator myitr = myset.iterator();

     while(myitr.hasNext())
     {
         Character key = (Character) myitr.next();
         int value = mymap.get(key);
         System.out.println("word:"+key+"repetiotions:"+value);

     }

} 
```

}

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-01-11T09:19:01.207

公共类 JavaApplication2 {

```
/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException {
    // TODO code application logic here
    System.out.println("Enter some text");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String input = br.readLine().toLowerCase();

    char[] vowel = new char[]{'a', 'e', 'i', 'o', 'u'};
    int[] countVowel = new int[5];
    for (int j = 0; j < input.length(); j++) {
        char c =input.charAt(j);
        if(c=='a')
            countVowel[0]++;
        else if(c=='e')
            countVowel[1]++;
        else if(c=='i')
            countVowel[2]++;
        else if(c=='o')
            countVowel[3]++;
        else if(c=='u')
            countVowel[4]++;

    }
     for (int i = 0; i <countVowel.length; i++) {
            System.out.println("Count of vowel " + vowel[i] + "=" + countVowel[i]);
        }

    }
} 
```

# iphone - 我在哪里可以找到 iphone 的客观 c xcode 示例代码

> ID：13734635
> 
> 赞同：0
> 
> 时间：2012-12-05T23:47:37.013
> 
> 标签：iphone, objective-c, xcode, sample

我是一名新程序员，我想找一些示例项目来学习。你知道任何可以帮助我的网站吗？

例如我们的示例程序： Uitable 视图 Uiscroll 视图 Plist 存储数据 Do to project 笔记项目等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T23:50:44.323

文档链接到大多数参考顶部的有用示例项目。

![在此处输入图像描述](../Images/08831a2adb73b332e2bb37449e1956c9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:04:06.667

您还可以登录到 ios 开发中心 (developer.apple.com/iphone/)，并且有一个包含所有示例的“示例代码”部分。您可以按特定内容搜索或按主题/框架查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:04:44.923

我可以推荐这本书，它帮助我分配了所有关于 iPhone 编程的知识：http: [//www.amazon.co.uk/Teach-Yourself-Application-Development-Yourself/dp/067233576X/ ref=sr_1_2?ie=UTF8&qid=1354751889&sr=8-2](http://www.amazon.co.uk/Teach-Yourself-Application-Development-Yourself/dp/067233576X/ref=sr_1_2?ie=UTF8&qid=1354751889&sr=8-2)

但是，如果您的目标是编写游戏，我会使用其中一些软件包： http: [//www.cartoonsmart.com/flash_mobile_index.php5](http://www.cartoonsmart.com/flash_mobile_index.php5)

另一个选择是 youtube，那里有大量视频可以教您需要知道的一切。例如：[http ://www.youtube.com/watch?v=mB-o3gtbHpg&list=PL8B9E3607FA1EEFCE](http://www.youtube.com/watch?v=mB-o3gtbHpg&list=PL8B9E3607FA1EEFCE)

最好的建议绝对是第一个。它对我帮助最大:)

# maven - 如何指定在 release:prepare 目标期间运行的 ant 目标？

> ID：13734640
> 
> 赞同：1
> 
> 时间：2012-12-05T23:47:56.613
> 
> 标签：maven, maven-release-plugin

当使用 maven 发布插件时，我想做一些前期工作（通过 ant tast）作为发布构建的一部分，并确保使用相同的代码库（因此没有提交潜入）。我有一个要调用的 ant 任务来执行此操作，但遇到以下问题：

在我的 pom 文件中：

```
 <configuration>
                <preparationGoals>antrun:run -Dtarget=${antTaskJarBuildXML} clean verify</preparationGoals>
            </configuration> 
```

其中 ${antTaskJarBuildXML} 是：

```
<target><ant antfile=\"../build.xml\" target=\"iv_dependency_build\" /></target> 
```

当我运行 release:perform 这是日志：

```
... 
[INFO] Not generating release POMs
[INFO] Executing goals 'antrun:run -Dtarget="<target><ant antfile=\"../build.xml\" target=\"iv_dependency_build\" /></target>" clean verify'...
[WARNING] Maven will be executed in interactive mode, but no input stream has been configured for this MavenInvoker instance.
[INFO] [INFO] Scanning for projects...
[INFO] [WARNING]
[INFO] [WARNING] Some problems were encountered while building the effective model for com.xactsites:iv:war:12.12.4.9
[INFO] [WARNING] The expression ${version} is deprecated. Please use ${project.version} instead.
[INFO] [WARNING]
[INFO] [WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[INFO] [WARNING]
[INFO] [WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[INFO] [WARNING]
[INFO] [INFO]
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Building iv 12.12.4.9
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [WARNING] The artifact javax.xml:jaxrpc:jar:1.1 has been relocated to javax.xml:jaxrpc-api:jar:1.1
[INFO] [INFO]
[INFO] [INFO] --- maven-antrun-plugin:1.7:run (default-cli) @ iv ---
[INFO] [INFO] No ant target defined - SKIPPED
[INFO] [INFO]
[INFO] [INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ iv ---
[INFO] [INFO] Deleting C:\dev\apps\iv\target
[INFO] [INFO]
... 
```

如日志所示，我被告知没有指定目标。我遵循了我从[ant run 文档中理解的内容](http://maven.apache.org/plugins/maven-antrun-plugin/run-mojo.html)

1.  我在如何传递目标名称方面遗漏了什么吗？
2.  这是最好的方法吗？
3.  我失踪是逃避的问题吗？我在 Windows 上，这是为 xml (${antTaskJarBuildXML}) 定义的实际值：

    `"&lt;target&gt;&lt;ant antfile=\"../build.xml\" target=\"iv_dependency_build\" /&gt;&lt;/target&gt;"`

**编辑**

@carlspring 给出了一些很好的反馈（对他的回答+1），但是，由于问题的性质，并不是所有的东西都被 mavenized 我无法得到这个工作。Maven 期望能够控制整个发布过程，但我需要事先执行一个 ant 任务（它会创建相关构建所需的依赖项）。我还需要确保这个 prework 任务和常规构建是针对相同的 git tag/hash 构建的。我当前的解决方案是按顺序执行发布插件将执行的步骤，如此处[所述](http://www.insaneprogramming.be/?p=362)。通过这个，我可以创建一个 git 标签，然后针对同一个 git 标签进行 maven 构建。如果有更好的想法，请贡献！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:24:01.410

我的建议是让您定义一个配置文件并在其中包含您的 ant-run 定义。

发布插件分叉，这意味着您的命令行参数将被忽略。

**更新：** *试试这个：*

```
<?xml version="1.0" encoding="UTF-8"?>
<project ...>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-release-plugin</artifactId>
                <version>2.3.2</version>

                <executions>
                     <execution>
                         <id>execute-prepare</id>
                         <!-- Set up your Ant stuff here -->
                         <goals>
                              <goal>prepare</goal>
                         </goals>
                         <configuration>
                             <!-- If you have args specific for your release, put them here: -->
                             <arguments>-Pant-run-release</arguments>
                             <releaseProfiles>ant-run-release</releaseProfiles>
                             <mavenExecutorId>forked-path</mavenExecutorId>
                         </configuration>
                     </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>ant-run-release</id>

            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>1.7</version>
                        <executions>
                            <execution>
                                <id>execute-something</id>
                                <!-- Set up your Ant stuff here -->
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

</project> 
```

# jquery - Cakephp 使用 jquery 动态添加/删除 div 并将数据保存在多个表中

> ID：13734645
> 
> 赞同：0
> 
> 时间：2012-12-05T23:48:05.287
> 
> 标签：jquery, cakephp-2.0

我正在构建一个 Cakephp 2+ web 应用程序。我已经使用 jquery 实现了包含来自用户的输入的动态添加/删除 div，现在想要将收集的数据保存在多个表中（现在使用 $belongsTo 的 2 个表）。问题是我无法按需要保存数据。它也不会显示在 debug 或 print_r 方法中。如果我在 jquery 或 cakephp 功能中有问题，请任何人帮助我。我到目前为止所做的如下：

**jQuery**

```
<script language='javascript'>
$(document).ready(function(){
var i=1;
var chk=0;

$('.btnAdd').click(function(event){
var inputHtml = '<div class="invoice2_bottom_inner" id="divin"><div class="invoice2_bottom_1"><div id="divno" style="margin:53px 0 0;">1</div></div><div class="invoice2_bottom_delete"><button id="cls" class="close btnRemove">&times;</button></div><div style="float:left; height:auto;width:660px;margin:0;"><table class="table invoice2_payee"><tr><td>Date</td><td>Payee</td><td></td></tr><tr><td><select class="span2" name="data[Expense][date][month][]" id="ExpenseDateMonth"><option value="01">January</option><option value="02">February</option><option value="03">March</option><option value="04">April</option><option value="05">May</option><option value="06">June</option><option value="07">July</option><option value="08">August</option><option value="09">September</option><option value="10">October</option><option value="11">November</option><option value="12" selected="selected">December</option></select>-<select class="span1" name="data[Expense][date][day][]" id="ExpenseDateDay"><option value="01">1</option><option value="02">2</option><option value="03">3</option><option value="04">4</option><option value="05" selected="selected">5</option><option value="06">6</option><option value="07">7</option><option value="08">8</option><option value="09">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select>-<select class="span2" name="data[Expense][date][year][]" id="ExpenseDateYear"><option value="2032">2032</option><option value="2031">2031</option><option value="2030">2030</option><option value="2029">2029</option><option value="2028">2028</option><option value="2027">2027</option><option value="2026">2026</option><option value="2025">2025</option><option value="2024">2024</option><option value="2023">2023</option><option value="2022">2022</option><option value="2021">2021</option><option value="2020">2020</option><option value="2019">2019</option><option value="2018">2018</option><option value="2017">2017</option><option value="2016">2016</option><option value="2015">2015</option><option value="2014">2014</option><option value="2013">2013</option><option value="2012" selected="selected">2012</option><option value="2011">2011</option><option value="2010">2010</option><option value="2009">2009</option><option value="2008">2008</option><option value="2007">2007</option><option value="2006">2006</option><option value="2005">2005</option><option value="2004">2004</option><option value="2003">2003</option><option value="2002">2002</option><option value="2001">2001</option><option value="2000">2000</option><option value="1999">1999</option><option value="1998">1998</option><option value="1997">1997</option><option value="1996">1996</option><option value="1995">1995</option><option value="1994">1994</option><option value="1993">1993</option><option value="1992">1992</option></select></td><td><input class="input-medium" name="data[Expense][payee][]" maxlength="25" type="text" id="ExpensePayee"/></td><td></td></tr><tr><td>Type</td><td> Description</td><td>Amount</td></tr><tr><td><input class="span3" name="data[Expense][type][]" maxlength="25" type="text" id="ExpenseType"/></td><td><input class="input-medium" name="data[Expense][desc][]" maxlength="25" type="text" id="ExpenseDesc"/></td><td><span>$</span><input class="input-mini" name="data[Expense][amt][]" type="number" id="ExpenseAmt"/></td></tr></table></div></div>';

   chk=1;
  $('#divno').attr('id','divno'+i);
  $('#divin').attr('id','divin'+i);
  $('#cls').attr('id','cls'+i);
   $('#divno'+i).html(i);

        //alert(inputHtml);
    event.preventDefault();
$('<div />',{'class':'invoice2_bottom_inner1', id:'div'+(i+1)}).append(inputHtml).appendTo('.invoice2_bottom');
    //$('.invoice2_bottom').append(inputHtml);
    $('.btnRemove').show();
       //alert(i);

if(chk==1)
{
//alert(chk);
$('#divno').attr('id','divno'+(i+1));
$('#divno'+(i+1)).html(i+1);
$('#divin').attr('id','divin'+(i+1));
$('#cls').attr('id','cls'+(i+1));

chk=0;
}
i++;
        var c=$('#cls'+i).attr('id');
        $('#cls'+i).click(function(){
        $('#divin'+i).remove();
        //alert(c);
        if(c=='cls2'){$('.btnRemove').hide();}

        i--;
        });    

});
});
</script> 
```

**Cakephp**

控制器：

```
debug($this->data);
    $this->loadModel('Expense');
            $this->Expense->create();
            //if ($this->Expense->save($this->data)){
            if ($this->Expense->saveAll($this->data['Expense'])) {
            $this->Session->setFlash(__('The data has been saved**********'));
                //$this->redirect(array('plugin'=>'agency_calendar','controller'=>'Events','action' => '/add/job/invoice/expense_reports'));
            } else {
                $this->Session->setFlash(__('The data could not be saved. Please, try again.'));
            } 
```

看法：

鉴于我正在使用包含用户输入的静态 div，在第一次加载页面时收集数据，并且在 jquery 的帮助下，我根据 Cakephp saveAll 方法将其制成数组，即 0、1、2 等等。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:38:21.807

我可能会因此而被标记，因此请快速阅读，因为它与您最初的问题无关。

简单的克隆示例：

```
<div class="clone_handler" style="display:none;">
   <div class="some_class">
      <div>Some nested element</div>
   </div>
</div>

//JS
$(function(){
   var my_clone = $('.clone_handler').clone();
   $('body').prepend(my_clone.children('.some_class'));
}); 
```

# java - 如何使用 JMX 连接到在 EC2 上运行的 Java 实例

> ID：13734646
> 
> 赞同：31
> 
> 时间：2012-12-05T23:48:09.787
> 
> 标签：java, amazon-ec2, jmx, jconsole

我们在连接到在 Amazon 的 EC2 集群中运行的 Java 应用程序时遇到问题。我们肯定已经允许“JMX 端口”（通常是 RMI 注册端口）*和*服务器端口（完成大部分工作）到相关实例的安全组。Jconsole 连接但似乎挂起并且从不显示任何信息。

我们正在运行我们的java，如下所示：

```
java -server -jar foo.jar other parameters here > java.log 2>&1 
```

我们尝试过：

*   Telnet 到端口*连接*，但未显示任何信息。
*   我们可以`jconsole`通过 ssh 使用 remote-X11 在实例本身上运行，它会连接并显示信息。因此，JRE将*其*导出到本地。
*   打开安全组中的所有端口。哎呀。
*   用于`tcpdump`确保流量不会流向其他端口。
*   在本地模拟它。我们始终可以使用相同的应用程序参数连接到本地 JRE 或网络上其他地方运行的 JRE。

`java -version`输出：

```
OpenJDK Runtime Environment (IcedTea6 1.11.5) (amazon-53.1.11.5.47.amzn1-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

顺便说一句，我们正在使用我的[Simple JMX](http://256.com/sources/simplejmx/)包，它允许我们设置RMI 注册表*和*服务器端口，这些端口通常由 RMI 注册表半随机选择。您也可以使用以下 JMX URI 强制执行此操作：

```
service:jmx:rmi://localhost:" + serverPort + "/jndi/rmi://:" + registryPort + "/jmxrmi" 
```

如今，我们为服务器和注册表使用相同的端口。过去，我们使用`X`注册表端口和`X+1`服务器端口来简化安全组规则。您连接到注册表端口`jconsole`或您正在使用的任何 JMX 客户端。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-05T23:48:09.787

> 我们在连接到在 Amazon 的 EC2 集群中运行的 Java 应用程序时遇到问题。

事实证明，问题是两个缺失设置的组合。第一个强制 JRE 更喜欢 ipv4 而*不是*v6。这是必要的（我猜），因为我们试图通过 v4 地址连接到它：

```
-Djava.net.preferIPv4Stack=true 
```

真正的阻碍是 JMX 通过首先联系 RMI 端口来工作，该端口以*主机名*和端口响应 JMX 客户端连接。如果没有其他设置，它将使用盒子的本地 IP，这是`10.X.X.X`一个远程客户端无法路由到的虚拟地址。我们需要添加以下设置，即服务器的*外部*主机名或 IP——在这种情况下，它是服务器的弹性主机名。

```
-Djava.rmi.server.hostname=ec2-107-X-X-X.compute-1.amazonaws.com 
```

如果您尝试自动化您的 EC2 实例（以及为什么不这样做），诀窍是如何在运行时找到此地址。为此，您需要在我们的应用程序启动脚本中添加如下内容：

```
# get our _external_ hostname
RMI_HOST=`wget -q -O - http://169.254.169.254/latest/meta-data/public-hostname`
...
java -server \
    -Djava.net.preferIPv4Stack=true -Djava.rmi.server.hostname=$RMI_HOST \
    -jar foo.jar other parameters here > java.log 2>&1 
```

上面命令中的神秘`169.254.169.254`IP`wget`提供了 EC2 实例可以请求的关于自身的信息。我很失望这不*包括*仅在经过身份验证的调用中可用的标签。

我最初使用的是 extern ipv4 地址，但看起来 JDK 在启动时尝试与服务器端口建立连接。如果它使用外部 IP，那么这会减慢我们的应用程序启动时间，直到超时。public-hostname 在本地解析为 10-net 地址，在外部解析为 public-ipv4。所以应用程序现在启动很快，JMX 客户端仍然可以工作。呜呼！

希望这对其他人有帮助。今天花了我3个小时。

要强制您的 JMX 服务器在指定端口上启动服务器*和*RMI 注册表，以便您可以在 EC2 安全组中阻止它们，请参阅以下答案：

> [如何关闭在特定端口上运行的 rmiregistry？](https://stackoverflow.com/questions/8386001/how-to-close-rmiregistry-running-on-particular-port/8386052#8386052)

**编辑：**

我们只是再次出现了这个问题。似乎 Java JMX 代码正在对盒子的主机名进行一些主机名查找，并使用它们来尝试连接并验证 JMX 连接。

这个问题似乎是要求盒子的本地主机名应该解析为盒子的本地 IP。例如，如果你`/etc/sysconfig/network`有`HOSTNAME=server1.foobar.com`然后如果你在 上进行 DNS 查找`server1.foobar.com`，你应该得到 10-NET 虚拟地址。我们正在生成自己的`/etc/hosts`文件，但文件中缺少本地主机的主机名。这导致我们的应用程序在启动时暂停或根本不启动。

**最后**

简化 JMX 创建的一种方法是使用我的[SimpleJMX 包](http://256stuff.com/sources/simplejmx/)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-12-30T07:23:05.467

根据第二个答案，[为什么 JMX 连接到 Amazon EC2 失败？](https://stackoverflow.com/questions/19130877/jmx-connection-to-amazon-ec2-fails)，这里的难点在于，默认情况下RMI端口是随机选择的，客户端需要同时访问JMX和RMI端口。如果您运行的是 jdk7u4 或更高版本，则可以通过 app 属性指定 RMI 端口。使用以下 JMX 设置启动我的服务器对我有用：

无认证：

```
-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=9999 
-Dcom.sun.management.jmxremote.rmi.port=9998 
-Dcom.sun.management.jmxremote.ssl=false 
-Dcom.sun.management.jmxremote.authenticate=false 
-Djava.rmi.server.hostname=<public EC2 hostname> 
```

带认证：

```
-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=9999 
-Dcom.sun.management.jmxremote.rmi.port=9998 
-Dcom.sun.management.jmxremote.ssl=false 
-Dcom.sun.management.jmxremote.authenticate=true 
-Dcom.sun.management.jmxremote.password.file=/path/to/jmxremote.password
-Djava.rmi.server.hostname=<public EC2 hostname> 
```

我还在我的实例的 EC2 安全组中打开了端口 9998-9999。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-17T20:10:24.080

使用 ssh 隧道有点不同的方法

1.  （在远程机器上）将以下标志传递给 JVM

    ```
    -Dcom.sun.management.jmxremote.port=1099
    -Djava.net.preferIPv4Stack=true
    -Dcom.sun.management.jmxremote.ssl=false
    -Dcom.sun.management.jmxremote.authenticate=false
    -Djava.rmi.server.hostname=127.0.0.1 
    ```

2.  （在远程机器上）检查 java 开始使用哪些端口

    ```
    $ netstat -tulpn | grep java
    tcp      0      0 0.0.0.0:37484         0.0.0.0:*               LISTEN      2904/java
    tcp      0      0 0.0.0.0:1099          0.0.0.0:*               LISTEN      2904/java
    tcp      0      0 0.0.0.0:45828         0.0.0.0:*               LISTEN      2904/java 
    ```

3.  （在本地机器上）为所有端口建立 ssh 隧道

    ```
    ssh -N -L 1099:127.0.0.1:1099 ubuntu@<ec2_ip>
    ssh -N -L 37484:127.0.0.1:37484 ubuntu@<ec2_ip>
    ssh -N -L 45828:127.0.0.1:45828 ubuntu@<ec2_ip>` 
    ```

4.  （在本地机器上）通过 Java Mission Control 连接到`localhost:1099`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T01:46:50.780

Gray 给出的答案对我有用，但是我发现我必须打开 TCP 端口 0 到 65535，否则我无法进入。我*认为*您可以连接到主 JMX 端口，然后分配另一个端口。我从这篇对我来说一直很有效的[博客文章中得到了这一点。](http://rafaelsteil.com/setting-up-jmx-for-jconsole-visualvm-on-ec2-plus-jetty-configuration/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-11T10:59:40.003

我们正在使用 AWS Elastic Container Service 来运行我们的 Spring Boot 服务。下面的配置允许我们连接到我们的 docker 容器。

**没有身份验证：**

```
-Dcom.sun.management.jmxremote \
    -Dcom.sun.management.jmxremote.port=9090 \
    -Dcom.sun.management.jmxremote.rmi.port=9090 \
    -Dcom.sun.management.jmxremote.authenticate=false \
    -Dcom.sun.management.jmxremote.ssl=false \
    -Djava.rmi.server.hostname=$(/usr/bin/curl -s --connect-timeout 2 \
                    http://169.254.169.254/latest/meta-data/public-ipv4) 
```

我发现它很清晰，也不需要任何其他服务端初始化脚本。

# html - 使用 htaccess 和 css 处理 404 错误

> ID：13734654
> 
> 赞同：1
> 
> 时间：2012-12-05T23:48:33.397
> 
> 标签：html, css, error-handling, http-status-code-404

您好，我的 404 错误处理有问题。

我添加到 htaccess：

> 错误文档 404 /404.php

因此，如果键入以下内容：

> www.domain.com/abc

我的 php 页面一切正常。问题将出现在键入以下内容时：

> www.domain.com/abc/

意味着在 url 中添加一个斜杠，出现 404 错误页面，但不会加载 css 文件？

如果有人能告诉我这里出了什么问题，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T23:51:53.413

由于 404 页面将从任何 URL 显示，因此您需要对任何外部页面资产（如 CSS 文件、图像、JavaScript 文件等）使用绝对路径。

所以任何相对路径...

```
<link type="text/css" rel="stylesheet" media="screen" href="site.css" /> 
```

将需要更改为绝对路径...

```
<link type="text/css" rel="stylesheet" media="screen" href="/site.css" /> 
```

# ios - 核心数据：与状态的多对多关系

> ID：13734657
> 
> 赞同：0
> 
> 时间：2012-12-05T23:48:49.027
> 
> 标签：ios, cocoa-touch, core-data

我的应用中有两个实体：Class 和 Student，它们是多对多的关系，如下所示：![在此处输入图像描述](../Images/0fdd0f3e3ff646413e8493b51758a519.png)

我的问题是，在我的应用程序中，一个班级的学生有两种状态：通过和失败。我不知道如何将其建模为班级或学生。例如，我应该制作另一个实体来表达学生的身份吗？或者只是向 Class 实体添加一个状态属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:53:58.643

大概你不能为班级添加一个属性，因为如果有 20 名学生上同一个班级，那么他们之间就只有一个属性？

您需要添加一个单独的实体，该实体与班级和学生具有一对一的关系，并且包含状态。反过来，学生和班级都与状态有一对多的关系。

编辑：我想另一种解决方案是直接在您现有的关系之间插入状态。所以一个班级有一组状态，每个状态都有一个学生。

因此，从班级到身份的关系是一对多的，从身份到学生的关系是多对一的。班级和学生之间没有明确的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:04:51.840

我建议使用第三个实体来表达学生在特定班级中的状态。例如一组“classStatuses”。由于您以后可能需要存储其他信息，例如成绩、学分、帮助记录等。

最终方案将类似于

**班级 -**多对多关系中的学生。

**学生 - 一对多**的 ClassStatus。（图片是学生正在学习的课程及其各自状态的数组）

这样您就可以搜索班级中的学生，搜索学生正在上的课程，检查班级的状态。

# php - PHP - 函数的变量静态

> ID：13734658
> 
> 赞同：1
> 
> 时间：2012-12-05T23:49:09.490
> 
> 标签：php, function, methods, static

在 C 语言中，我们可以这样做（如果我没记错的话）：

```
void foo()
{
    static bool firstCall = true;

    if(firstCall)
    {
        // stuff to do on first call

        firstCall = false;
    }

    // more stuff
} 
```

我想在 PHP 中这样做，以避免我的模型在多次调用同一方法时多次查询数据库。

```
class User
{
    public static function & getAll($reload = false)
    {
        static $result = null;

        if($reload && null === $result)
        {
            // query the database and store the datas in $result
        }

        return $result;
    }
} 
```

是否允许？行得通吗？它与 PHP < 5.3 兼容吗？

如果是，那么我还有另一个问题：

假设我们有几种所有模型共有的方法，我会将它们分组到一个抽象基类中：

```
abstract class AbstractModel
{
    public static function & getAll($tableName, $reload = false)
    {
        static $result = array();

        if($reload && !isset($result[$tableName]))
        {
            // query the database depending on $tableName,
            // and store the datas in $result[$tableName]
        }

        return $result[$tableName];
    }
}

class User extends AbstractModel
{
    public static function & getAll($reload = false)
    {
        $result = parent::getAll('users', $reload);
        return $result;
    }
}

class Group extends AbstractModel
{
    public static function & getAll($reload = false)
    {
        $result = parent::getAll('groups', $reload);
        return $result;
    }
} 
```

这也行吗？可以改进吗？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:35:16.610

是的，你可以这么做。从 PHP 5.0.0 开始支持它。

为了澄清，我想区分 PHP 中两个非常不同的东西，它们都使用 static 关键字。首先是[类静态作用域](http://php.net/manual/en/language.oop5.static.php)，它专门属于整个类。二是[变量 static scope](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.static)，具体属于函数的局部作用域。

这是类静态范围（仅在 PHP >= 5.3.0 中可用）：

```
class Foo {
    public static $var;

    public static function GetVar() {
        return ++static::$var;
    }
}

var_dump(Foo::GetVar(),Foo::GetVar()); 
```

上面的代码会给你`int(1) int(2)`你所期望的。

这是变量静态作用域（在 PHP >= 5.0.0 中可用）：

```
class Foo {
    public static function GetVar() {
        static $var = 0;
        return ++$var;
    }
}

var_dump(Foo::GetVar(),Foo::GetVar()); 
```

上面的代码也会给你`int(1) int(2)`这也是你所期望的。

请注意，一个专门属于函数的本地范围（即使该函数是类成员），另一个专门属于该类。

另请注意，我在第一个示例中使用了**static关键字而不是****self**关键字，因为 self 不允许您执行**LSB**（[后期静态绑定](http://php.net/lsb)）。这可能是您在继承然后调用父类时需要考虑的事情，特别是如果您要在函数的局部范围内使用类静态变量而不是静态变量。

# python - 对 ProtoRPC 服务进行身份验证

> ID：13734663
> 
> 赞同：1
> 
> 时间：2012-12-05T23:49:44.070
> 
> 标签：python, google-app-engine, authentication

如何对 ProtoRPC 服务进行身份验证？

它看起来像是一个 Web 服务基础设施，但它是为非浏览器客户端设计的，那么我们如何验证服务的最终用户呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T14:58:20.313

首先，浏览器客户端可以使用 ProtoRPC，通常是通过 AJAX 请求。

现在对于 App Engine 上的身份验证，有几种可能性：

1.  您可以使用内置的用户身份验证应用程序引擎提供
2.  您可以构建自己的身份验证机制

第一个是常规的 Google 帐户 API、openID 和 OAuth。

如果您的用户拥有 google 帐户，并且您不需要代表用户执行操作（这就是 OAuth 的用途），那么您可以使用常规的 google 身份验证。

这要求客户端有一个 google cookie。如果用户在浏览器上，他可以登录谷歌，然后他可以访问您的应用程序。如果用户在移动客户端上，那么对于 android，`AccountManager`API 会为您提供一个 Google 令牌，客户端使用该令牌来获取 App Engine cookie，如此处所述[http://blog.notdot.net/2010/05/来自 Android 应用程序的针对应用程序引擎的身份验证](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)

我不确定iOS是否有类似的东西`AccountManager`。如果操作系统没有用户的凭据，那么 AFAIK 您可能必须通过某种浏览器身份验证。

# groovy - Groovy：方法名称中的变量带有'??' 双问号

> ID：13734664
> 
> 赞同：1
> 
> 时间：2012-12-05T23:49:44.543
> 
> 标签：groovy, metaprogramming

我有一个模糊的回忆，读到 groovy 存在一个 '??' 可用于使方法名称动态化的糖。我曾认为这就是如何在 grails 中实现动态查找器的，但现在我怀疑它是否甚至是我回忆的 groovy。举个例子：我用一些方法创建了一个类

```
class GroovyExample {

  public def getThingOne(){return '1'}

  public def getThingTwo(){return '2'}

  public def getModifiedThingOne(){
    return this.modify(this.thingOne)
  }

  //  *!!!*  I want to get rid of this second modifying method    *!!!*
  public def getModifiedThingTwo(){
    return this.modify(this.thingTwo)
  }

  private def modify(def thing){
    //...
    return modifiedThing
  }

} 
```

方法名称是否有`??`糖，我可以用它来干燥它，如下所示：

```
class GroovyExample {

  public def getThingOne(){return '1'}

  public def getThingTwo(){return '2'}

  //  Replaced the two getModifiedXX methods with a getModified?? method I think I can do....
  public def getModified??(){
    return this.modify(this."${howeverYouReferenceTheQuestionMarks}")
  }

  private def modify(def thing){
    //...
    return modifiedThing
  }

} 
```

这个想法是我可以`new GroovyExample().modifiedThingTwo`通过一种“修改辅助方法”来调用并获得相同的答案。这可能吗？叫什么`??`？（我一辈子都不能用谷歌搜索它。）而且，我如何引用`String`“in” `??`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:51:22.817

我不知道该语法，但您可以通过实现`methodMissing()`per [here](http://groovy.codehaus.org/Using+methodMissing+and+propertyMissing)来实现该功能。根据该链接，这是您提到的动态查找器的初始作用机制（尽管我相信在第一次命中方法后会有一些缓存） - 请注意顶部的警告。

像这样的快速测试可能适合您：

```
 def methodMissing(String name, args) {
       switch (name) {
           case "getModifiedThingOne":
               return this.modify(this.thingOne)
           case "getModifiedThingTwo":
               return this.modify(this.thingTwo)              
       }
   } 
```

# c# - 如何使用 HTMLagility 获取具有某些类属性的两个 div 标签之间的文本

> ID：13734666
> 
> 赞同：1
> 
> 时间：2012-12-05T23:49:50.117
> 
> 标签：c#, html, selector, html-agility-pack, dom

我想从 HTML 文件中的两个 html div 中获取一些文本。经过一些搜索后，我决定使用 HTMLAgility Pack 来执行此操作。我写了这段代码：

```
 HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(result);
    HtmlNode node = doc.DocumentNode.SelectSingleNode("//*div[@class='item']"); 
    string value = node.InnerText; 
```

“结果”是我的文件内容。但我得到了这个例外：'表达式必须评估为节点集'

这是 mt 文件的一些内容：

```
<div class="Clear" style="height:15px;"></div>
<div class='Container Select' id="Container_1">
<div class='Item'><div class='Part Lable'>موضوع : </div><div class='Part ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:55:10.190

您是否尝试过使用 XPath，例如，如果我想找到一个如果在我的示例中选择了一个节点，我会执行以下操作

```
string xpath = null;
XmlNode configNode = configDom.DocumentElement;
// collect selected nodes in node list
XmlNodeList nodeList =
configNode.SelectNodes(@"//*[@status='checked']"); 
```

在您的情况下，您将执行以下操作

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(result);
HtmlNode node = doc.DocumentNode.SelectSingleNode("//*/div[@class='item']"); 
string value = node.InnerText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:52:32.963

试试

`"//*/div[@class='item']"`

或者干脆

`"//div[@class='item']"`

# android - 可缩放和可平移图像列表的正确 android 视图是什么？

> ID：13734670
> 
> 赞同：0
> 
> 时间：2012-12-05T23:49:59.790
> 
> 标签：android, bitmap

我的最终目标是在 Android 中创建一个 Activity，它在可滚动的垂直列表中显示两个或多个图像。问题是我一直在尝试不同的观点，我不确定什么是适合我情况的最佳选择。

理想的实现将允许我执行以下所有操作：

1.  从服务器获取图像时异步显示图像。
2.  当我有 10 多个图像时避免 VM 内存问题。
3.  一次缩放/平移所有图像或单独缩放图像

我的实现使用由自定义 SurfaceView 中的所有图像组成的单个位图，但我已经可以看到它如何使 #1 和 #2 变得困难。我只有#3 工作。

我也尝试过使用 ListView 但我无法成功实现#3。

我对 Android 开发比较陌生，但我认为自定义 SurfaceView 可以给我#3，而自定义 ListView 可以给我#1 和#2。创建一个由自定义 SurfaceView（每个图像一个）组成的 ListView 是正确的方法还是我偏离了轨道？有没有更好的方法来解决我的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:50:08.007

我最终通过使用由 ImageViews 组成的 ListView 解决了这个问题。这解决了#1 和#2。然后为了处理平移/缩放，我在 ListView 的行中添加了一个 onClick 侦听器。这会触发一个 Intent，将 ImageView 的位图传递给一个新活动，该活动使用 SurfaceView 渲染位图，我在其中为 #3 处理缩放/平移。

# entity-framework - 当 AutoDetectChangesEnabled = false 时更新相关数据

> ID：13734677
> 
> 赞同：0
> 
> 时间：2012-12-05T23:50:22.290
> 
> 标签：entity-framework

我正在尝试更新一个简单的模型：

```
public class DayOff
    {
        public int Id { get; set; }

        public List<User> Users { get; set; }

        public DayOff()
        {
            Users = new List<User>();
        }
    } 
```

我的服务层是：

```
public void Update(DayOff dayOff, IEnumerable<int> users)
{
    var dayOffToUpdate = _db.DayOff.Include("Users").Single(d => d.Id == dayOff.Id);
    dayOffToUpdate.Users.Clear();

    _db.Entry(dayOffToUpdate).CurrentValues.SetValues(dayOff);

    dayOffToUpdate.Users = _db.User.Where(u => users.Contains(u.Id)).ToList();

    foreach (var user in dayOffToUpdate.Users)
    {
        _db.Entry(user).State = EntityState.Modified;
    }

    _db.SaveChanges();
} 
```

但它没有更新用户，那我该怎么办？

# javascript - Jasny Bootstrap - 隐藏提交按钮，直到选择文件

> ID：13734683
> 
> 赞同：4
> 
> 时间：2012-12-05T23:50:49.477
> 
> 标签：javascript, jquery, twitter-bootstrap, jasny-bootstrap

我正在使用带有[Jasny fork](http://jasny.github.com/bootstrap/javascript.html#fileupload)的 Bootstrap 。我正在开发一种用户可以上传图片的表单。我想隐藏表单的提交按钮，直到用户实际选择了图像。理想情况下，当用户从表单中删除文件时，提交按钮也应该消失。这是我第一次真正使用这个叉子。我该怎么做？

```
<div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="fileupload-new thumbnail" style="width: 114px; height: 64px;"><img src="http://www.placehold.it/114x64/EFEFEF/AAAAAA" /></div>
  <div class="fileupload-preview fileupload-exists thumbnail" style="width: 114px; height: 64px;"></div>
  <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" /></span>
  <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
  <button type="submit" class="btn btn-primary">Upload</button>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T00:07:22.320

您必须将事件侦听器添加到输入字段并侦听更改事件。然后您必须检查事件目标是否为用户选择的文件。我修改了您的代码以在输入字段中添加一个 id，并在[http://jsfiddle.net/LLfjE/上检查上传按钮](http://jsfiddle.net/LLfjE/)

```
$('#file-input').on('change', function(evt) {
    var file = evt.target.files[0];
    if (file){
        $('#upload-btn').show();
    } else {
        $('#upload-btn').hide();
    }
});​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-08T16:25:34.377

所选答案有效，但您也可以为此使用 Jasny 的内置事件：`'change.bs.fileinput'`，如下所示：

```
$('.fileupload').on('change.bs.fileinput', function() {
   $(this).find('.btn').show();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T15:10:37.380

只需在提交按钮上使用内置类“fileupload-exists”。这应该使按钮隐藏，直到选择了一个文件。

```
<div class="fileupload fileupload-new" 
    data-provides="fileupload" 
    data-uploadtype="file">

<button type="submit" class="btn fileupload-exists">
<i class="icon-arrow-up"></i> Upload File</button> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-29T12:44:23.400

只需将“fileupload-exists”添加到提交按钮类..

# xmlhttprequest - AngularJS 和位于不同域的 Jersey Webservice 之间的通信。无法访问正确的会话

> ID：13734686
> 
> 赞同：13
> 
> 时间：2012-12-05T23:50:54.813
> 
> 标签：xmlhttprequest, jersey, angularjs, java-ee-6, cors

最近我一直在玩 AngularJS 和 Java EE 6。我用 Jersey 构建了一个 Web 服务，并将该项目部署在 Glassfish 上。因为我需要某种身份验证，并且 OAuth 实现或 JDBCRealm 似乎有点矫枉过正，所以我决定在用户​​成功登录的情况下创建一个会话。

```
@POST
@Path("/login")
@Produces({MediaType.APPLICATION_JSON})
@Consumes({MediaType.APPLICATION_JSON})
public Response login(LoginDAO loginData, @Context HttpServletRequest req) {
    req.getSession().invalidate();
    loginData.setPassword(PasswordGenerator.hash(loginData.getPassword()));
    User foundUser = database.login(loginData);
    if(foundUser == null) {
        return Response.status(Status.CONFLICT).build();
    }
    req.getSession(true).setAttribute("username", foundUser.getUsername());
    return Response.ok().build();
}

@GET
@Path("/ping")
public Response ping(@Context HttpServletRequest req) {
    if(req.getSession().getAttribute("username") == null) {
        return Response.ok("no session with an username attribute has been set").build();
    }
    return Response.ok(req.getSession(true).getAttribute("username")).build();
} 
```

这似乎工作正常，如果我从 Postman 或从部署在 glassfish 上的基本 jQuery 网页发布到 /login，我确实会得到正确的用户名并且已经放置了一个会话。如果我随后向 /ping 发送 GET 请求，我确实会取回我登录时使用的用户名。

我在需要登录的 node.js 网络服务器上部署了一个 AngularJS 应用程序。因为这个服务器在另一个端口上，它在另一个域上，我不得不经历启用 cors 的痛苦。我通过构建一个设置响应标头的容器响应过滤器来做到这一点。

```
public class CrossOriginResourceSharingFilter implements ContainerResponseFilter {
    @Override
    public ContainerResponse filter(ContainerRequest creq, ContainerResponse cresp) {
        cresp.getHttpHeaders().putSingle("Access-Control-Allow-Origin", "http://localhost:8000");
        cresp.getHttpHeaders().putSingle("Access-Control-Allow-Credentials", "true");
        cresp.getHttpHeaders().putSingle("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT");
        cresp.getHttpHeaders().putSingle("Access-Control-Allow-Headers", "Content-Type, Accept, X-Requested-With");
        return cresp;
    }
} 
```

这确实使我能够将不同类型的 HTTP 请求从 AngularJS 发送到部署在 glassfish 上的 Java EE 6 应用程序。

问题是，当我从 AngularJS 向 /login 方法发送一个 POST 请求时，会创建一个会话，并且我确实取回了我的用户名。但是当我向 /ping 方法发送 GET 请求时，我收到“没有设置用户名属性的会话”通知。

我相信这与跨域预防有关，并且我必须在发送 xhr 请求时设置 withCredentials 标记。我一直在尝试在 AngularJS 中执行此操作，但还没有找到如何执行此操作。

```
function LoginCtrl($scope, $http) {
    $scope.login = function() {
        $http.post("glassfish:otherport/api/login", $scope.credentials).
            success(function(data) {
                console.log(data);
            }).
            error(function(data, error) {
                console.log(error);
            });
    };
}; 
```

在另一个控制器中：

```
$scope.getUsername = function() {
    $http.get("glassfish:otherport/api/ping", {}).
        success(function(data) {
            $scope.username = data;
        }).
        error(function() {
            $scope.username = "error";
        })
    } 
```

我尝试将 withCredentials 设置为 true

```
$http.defaults.withCredentials = true; 
```

然而，这并没有解决我的问题。我还尝试将它与配置参数中的每个请求一起发送，但这也没有解决我的问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-01T13:52:43.247

根据您使用的 AngularJS 版本，您可能必须在每个 $http 上设置它。

从 1.2 开始，您可以执行以下操作：

```
$http.get(url,{ withCredentials: true, ...}) 
```

从 1.1.1 开始，您可以全局配置它：

```
config(['$httpProvider', function($httpProvider) {
  $httpProvider.defaults.withCredentials = true;
}]). 
```

如果您使用的是旧版本的 Angular，请尝试将配置对象传递给指定 withCredentials 的 $http。这应该在 1.1 之前的版本中工作：

```
$http({withCredentials: true, ...}).get(...) 
```

另请参阅 mruelans 的回答和：

*   [https://github.com/angular/angular.js/pull/1209](https://github.com/angular/angular.js/pull/1209)
*   [http://docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.%24http)
*   [https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control#section_5](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control#section_5)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-18T05:51:41.417

只是对@iwein anwser 的更新，我们现在可以在配置本身中进行设置

```
config(['$httpProvider', function($httpProvider) {
  $httpProvider.defaults.withCredentials = true;
}]). 
```

[https://github.com/angular/angular.js/pull/1209](https://github.com/angular/angular.js/pull/1209)

（仅在不稳定版本：1.1.1 后可用）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-20T13:48:57.220

在 1.2 版本中，这对我不起作用：

```
$http({withCredentials: true, ...}).get(...) 
```

如果我阅读了文档，快捷方法应该采用配置对象

```
$http.get(url,{ withCredentials: true, ...}) 
```

$http 是一个单例，这是混合使用和不使用凭据的相同应用程序请求的唯一方法。

# javascript - 如何使用和访问 Backbone.js 集合作为模型中的属性/属性？

> ID：13734688
> 
> 赞同：2
> 
> 时间：2012-12-05T23:51:04.380
> 
> 标签：javascript, backbone.js, model-associations, backbone-relational, backbone.js-collections

我是 Backbone 的新手（仍然停留在 Ruby on Rails 模式中），并且对如何将集合作为属性/属性添加到模型中有点困惑（“属性”是正确的术语吗？）。

例如，我有一个名为 的模型`current_plan`，以及一个从服务器返回的名为 的变量`json_dump`，其中包含一个`participants`. 我希望它有一个名为的属性`participants`（它是参与者的集合），从 json_dump.participants 变量中填充它，并且能够使用类似 `current_plan.participants.where({first_name: "Dan"}) 的代码。

以下是我的初始化函数的一些片段：

```
var current_plan = new Plan();

current_plan.set({attribute: val} ...other attributes... );
current_plan.participants = new Backbone.Collection(json_dump.participants); 
```

但这迫使我访问常规属性，例如：`current_plan.attributes.attribute`. 另外，我可以看到 中有正确的数据`current_plan.attributes.participants.models`，但我不知道如何在`current_plan`.

显然我不明白发生了什么，以及为什么涉及这么多额外的层。Backbone 文档似乎有点稀疏，我无法在 SO 或 Google 搜索中找到与我想要做的匹配的任何内容。如果还有其他问题或教程可以解释这一点，我将非常感谢有人指出我的方式。我还看到了[Backbone Relational](https://github.com/PaulUithol/Backbone-relational)项目，这似乎是我需要的，但在我了解基础知识之前，我不希望向 Backbone 添加更多复杂性。

感谢您为帮助新的 Backbone 用户提供的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:27:20.557

我认为骨干框架没有官方方法来处理模型和集合之间的关系，并且我不使用骨干关系，但是我的骨干集合/模型中有多个关系。当我使用集合定义关系模型时，我将其用作模型对象的属性，而不是主干属性，因此：

```
var current_plan = new Backbone.Model(); //or backbone model extended 
current_plan.participants = new Backbone.Collection(json_dump.participants); 
```

然后正如@andrew-hubbs 所说，您应该始终使用主干 api 来处理模型和集合属性，以使您的代码与主干版本保持一致。然后您可以像这样访问/设置模型属性

```
current_plan.get('property'); 
participant = current_plan.participants.get(1);
participant.get('property');
participant.set('name', 'bob'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:13:48.377

```
var currentPlan = new Plan(); // Assuming Plan is a Backbone.Model
currentPlan.set("participants", new Backbone.Collection(json_dump.participants));
currentPlan.get("participants") instanceof Backbone.Collection
currentPlan.get("participants").at(0) instanceof Backbone.Model 
```

`get`您应该始终通过/`set`方法访问 Backbone 模型上的属性哈希。如果这不起作用，那么您`json_dump.participants`的格式可能不正确。您可以在此处查看此类[集合实例化](http://backbonejs.org/#Collection-toJSON)的文档中的示例。

是的 Backbone.Relational 是一个基本上可以处理这个问题的项目。它允许您定义模型之间的关系。然后，它可以很容易地自动创建集合作为模型实例的属性。

# java - Array.binarySearch 返回负数

> ID：13734694
> 
> 赞同：3
> 
> 时间：2012-12-05T23:51:24.493
> 
> 标签：java, arrays

我正在尝试使用 Arrays.binarySearch() 方法在字符串数组中查找字符串的索引，但是该方法似乎在查找字符串“Free”时返回位置整数“-5”。知道为什么会这样吗？

```
String[] names = {"Arken","Ben","Darklark", "Free","group"};

void changeFriends(String uname, boolean b)
        {   // change a friend's "online" status

    Arrays.sort(names);
    int index = Arrays.binarySearch(names, uname);

    System.out.println("NAME OF ONLINE USER IS AT INDEX:" + index + "Name:" + uname);
        if(index > -1)
        {

             if(b == true)
            {
                loggedOn[index] = true;
            }
            else
            {
                loggedOn[index] = false;
            }
        }
        // call method to update buttons
        changeNameButtons();
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T23:57:15.870

如果它返回负值，则找不到：

[http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

> public static int binarySearch(Object[] a,
>                                Object key)
> 
> **返回：**搜索键的索引，如果它包含在数组中；否则，（-（插入点）- 1）。插入点定义为将键插入数组的点：第一个元素的索引大于键，或者如果数组中的所有元素都小于指定的键，则为 a.length。请注意，这保证了当且仅当找到键时，返回值将 >= 0。

无论您传递什么，`uname`都不是`"Free"`。我高度怀疑您认为大小写无关紧要（或有尾随字符；空格或换行符）；）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-12-18T18:19:11.867

那些仍然像我之前遇到这个问题的人，你在想为什么其他人看不到它（Arrays.binarySearch）仍然有一些问题，因为你插入了正确的值并且你仍然得到负面结果. 好吧，这个答案适用于那些：

**这是因为你的数组没有排序，我的朋友。即使是字符或字符串**

对于arrays.binarySearch，数组应该被排序（我知道，你一定在想我怎么会错过最重要的事情（嗯，是的，发生了））。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-05T23:56:16.613

嗯，我刚刚运行了你的代码，我得到了索引 3。

```
Arrays.sort(names);
int index = Arrays.binarySearch(names, "Free");
System.out.println(index); 
```

您可能正在搜索`free`or `Free`（带有尾随空格）而不是`Free`，在这种情况下它返回 -5。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-25T01:29:26.900

如果未找到 value 且 value 小于 array 中的一个或多个元素，则返回的负数是大于 value 的第一个元素的索引的按位补码

# matlab - 给定Matlab中的频率，如何在波特图上指示特定的疯狂和相位值？

> ID：13734695
> 
> 赞同：0
> 
> 时间：2012-12-05T23:51:51.083
> 
> 标签：matlab, plot

我想要的是绘制传递函数的波特图

```
sys = tf([1],[1,1]); 
```

然后打电话

```
bode(sys); 
```

但我也想输入波特图标记频率的特定频率，并在该点显示 mag 和 phase 的值。

所以基本上就像我输入频率的波特图上的一个数据点。

例如，一旦我调用 bode(sys); 该图显示了 2Khz、120KHz 等处的 (mag,freq) & (mag, phase) 值

我真的很感激一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:49:05.640

我能想到两件事。两者都要求您计算这些特定频率值的幅度和相位值，并将它们存储在数组中：频率、幅度、相位。

方法1）下载这个脚本： http: [//www.mathworks.in/matlabcentral/fileexchange/9973-gridxy-v2-2-feb-2008](http://www.mathworks.in/matlabcentral/fileexchange/9973-gridxy-v2-2-feb-2008)

试试这个：

```
 bodemag(sys);
   hold on;
   gridxy(Frequency, Magnitude); 
```

方法2）

```
 bodemag(sys);
   hold on;
   text(Frequency, Magnitude, num2str(Magnitude)); 
```

我不知道如何参考相位图。如果您能够参考相位图，那么您也应该能够对该图执行相同的操作。此链接对 matlab 中的仅相位图有一些建议：http: [//www.mathworks.in/matlabcentral/newsreader/view_thread/247644](http://www.mathworks.in/matlabcentral/newsreader/view_thread/247644)

# java - JList 从 jlist 中检索数据

> ID：13734700
> 
> 赞同：0
> 
> 时间：2012-12-05T23:52:06.817
> 
> 标签：java, swing, netbeans, jlist

如何从 JList 中获取 3 个单独的字符串？如果我使用`model.elementAt`我会得到字符串，但它们不会彼此分开。

*   数据如何存储在 JList 中？
*   我可以通过使用数组将数据彼此分开吗？
*   数据是否存储在数组中？

```
while(resultaat.next()){
    model.addElement(resultaat.getString(1) + "  "
        + resultaat.getString(2) + "  "
        + resultaat.getString(3));
} 
```

我使用那行代码将一堆字符串添加到 JList 模型中。字符串来自 mysql 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:54:10.650

创建某种可以表示您想要的值的容器对象，能够以您想要的格式显示值...

```
public class ListObject {
    private String[] values;
    public ListObject(String... values) {
        this.values = values;
    }

    public int size() {
        return values == null ? 0 : values.length;
    }

    public String get(int index) {
        return values == null ? null : values[index];
    }

    public String toString() {
        StringBuilder sb = new StringBuilder(64);
        if (values != null) {
            for (String value : values) {
                if (sb.length() > 0) {
                    sb.append(" ");
                }
                sb.append(value);
            }
        }
        return sb.toString();
    }
} 
```

将包装器对象添加到模型...

```
while(resultaat.next()){
    model.addElement(new ListObject(resultaat.getString(1),
        resultaat.getString(2),
        resultaat.getString(3)));
} 
```

当您需要时，检索值...

```
String value = model.getElementAt(index).get(0); 
```

例如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:19:22.353

*数据如何存储在 JList 中？*- 它们实际上存储在 jList 的模型中，因此您必须调用 jList.getModel().getElementAt() 而不是仅调用 jList().getElement()

*我可以通过使用数组将数据彼此分开吗？*是的，看看我的例子

*数据是否存储在数组中？*不，它们在 jList 模型中

尝试使用此代码将您的 jlist 模型放入对象数组中

```
// create array with Model size
Object[] arrayOfElements = new Object[yourjList.getModel().getSize()];

// easy loop for adding elements from jList to array
 for(int i = 0; i< yourjList.getModel().getSize(); i++){

                            arrayOfElements[i] = yourjList.getModel().getElementAt(i);
            } 
```

# javascript - 有没有办法从音频文件中获取分贝级别并将该信息转换为 json 数组？

> ID：13734710
> 
> 赞同：7
> 
> 时间：2012-12-05T23:52:48.143
> 
> 标签：javascript, json, audio, html5-audio, web-audio-api

这样我就可以使用这些信息来协调页面动画，例如随着分贝水平的提高使元素更亮

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T00:46:38.730

这种方法适用于 Chrome / Safari：

```
+function(){

  var ctx = new AudioContext()
    , url = 'https://cf-media.sndcdn.com/OfjMZo27DlvH.128.mp3?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiKjovL2NmLW1lZGlhLnNuZGNkbi5jb20vT2ZqTVpvMjdEbHZILjEyOC5tcDMiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE1MTUwNDM5Njd9fX1dfQ__&Signature=FfmL2qUssAKs3Z7EPoYo0Yq8-SAg8rKLPs65EasXwuVkfsOB4joFqeCvVR2elpaG-lJaV4hXpXFiRCDWXNOYyAtO4Oz~sexiPwIoSk8-jWiVbGQRS8TMmUmj7TJzxemMOIj7ugWJKk6PHsrUdgqs9woDpHzxmkGCzk6sfqJEIsdeZJ4rWUFAh4iGWn9M6b0xfzTgndAJmytkNj9raCpWCBVmdr5u-r9nt~q5uF1easNSW9oaFilM4s1Hq2ei~VJye8zW9bzvrGm8idVdy-tiPeMWAKcE8J2VuaS1Ret6jRTRaHTDuiNgA5sZvgTzNpEpKtWI7UmAWI5TrqNVSlxpgQ__&Key-Pair-Id=APKAJAGZ7VMH2PFPW6UQ'  
    , audio = new Audio(url)
    // 2048 sample buffer, 1 channel in, 1 channel out  
    , processor = ctx.createScriptProcessor(2048, 1, 1)
    , meter = document.getElementById('meter')
    , source

  audio.crossOrigin = 'anonymous'

  audio.addEventListener('canplaythrough', function(){
    source = ctx.createMediaElementSource(audio)
    source.connect(processor)
    source.connect(ctx.destination)
    processor.connect(ctx.destination)
    audio.play()
  }, false);

  // loop through PCM data and calculate average
  // volume for a given 2048 sample buffer
  processor.onaudioprocess = function(evt){
    var input = evt.inputBuffer.getChannelData(0)
      , len = input.length   
      , total = i = 0
      , rms
    while ( i < len ) total += Math.abs( input[i++] )
    rms = Math.sqrt( total / len )
    meter.style.width = ( rms * 100 ) + '%'
  }

}()
```

```
#meter {
  width: 0%;
  height: 15px;
  margin: 2px 0;
  background: green;
  -webkit-transition: width .05s;
}
```

```
<div id="meter"></div>
```

重要的事情发生在这里：

```
processor.onaudioprocess = function(evt){
  var input = evt.inputBuffer.getChannelData(0)
    , len = input.length   
    , total = i = 0
    , rms
  while ( i < len ) total += Math.abs( input[i++] )
  rms = Math.sqrt( total / len )
  meter.style.width = ( rms * 100 ) + '%' 
} 
```

基本上，您每 2048 个样本获取原始 PCM 数据（值从 -1 到 1），然后循环遍历它们，计算给定时间段内的平均信号电平。

然后，您可以使用该值来制作动画。

**编辑：** 更新为使用 RMS，正如 Jason 指出的那样，这是一个更有意义的测量。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-06T01:29:55.257

是的，您需要获取原始 PCM 样本（如 Kennis 提到的）。但是，要计算整体音量，您需要获取这些值的 RMS（均方根）。此外，您可能需要注意流中的所有通道，而不仅仅是第一个通道（例如，您可以准确反映立体声流的音量级别）。

有一些技巧（确保您使用跨通道的相同样本的乘法，而不是加法）。然后你将把它们加在一起（再次像 Kennis 所做的那样）。如果您希望它为实际分贝，则还需要一个日志步骤。

有一个例子可以[回答这个其他问题](https://stackoverflow.com/questions/4152201/calculate-decibels)。

相关代码：

```
var rms = Math.sqrt(sum / (_buffer.length / 2));
var decibel = 20 * (Math.log(rms) / Math.log(10)); 
```

# xslt - 如果存在子节点，则创建新的 XML 节点

> ID：13734711
> 
> 赞同：0
> 
> 时间：2012-12-05T23:52:56.270
> 
> 标签：xslt

我一直在尝试使用 XSLT 实现以下输出，但一直在苦苦挣扎。提前感谢您的任何帮助。

从

```
<par>
   <run>Line one<break/>
        Line two<break/>
   </run>

   <run>Another para of text<break/>
   </run>

   <run>3rd para but no break</run>    
</par> 
```

到

```
 <document>
   <para>Line one</para>
   <para>Line two</para>
   <para>Another para of text</para>
   <para>3rd para but no break</para>
 </document> 
```

谢谢，

多诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:27:12.633

这是一个简单的解决方案，它是面向推送的，不需要`<xsl:for-each>`、`<xsl:if>`或`self::`轴。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/*">
     <document>
       <xsl:apply-templates />  
     </document>
  </xsl:template>

  <xsl:template match="run/text()">
     <para>
       <xsl:value-of select="normalize-space()" />
     </para>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于提供的 XML：**

```
<par>
   <run>Line one<break/>
        Line two<break/>
   </run>

   <run>Another para of text<break/>
   </run>

   <run>3rd para but no break</run>    
</par> 
```

**...产生了想要的结果：**

```
<document>
  <para>Line one</para>
  <para>Line two</para>
  <para>Another para of text</para>
  <para>3rd para but no break</para>
</document> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:56:59.683

假设您的`<run>`元素只会包含文本和`<break/>`元素，并且您想要规范化空格并排除`<para>`仅包含空格的元素（由您所需的输出建议），以下应该有效：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output indent="yes"/>

    <xsl:template match="par">
        <document>
            <xsl:apply-templates select="*"/>
        </document>
    </xsl:template>

    <xsl:template match="run">
        <xsl:for-each select="text()">
            <xsl:if test="normalize-space(self::text()) != ''">
                <para>
                    <xsl:value-of select="normalize-space(self::text())"/>
                 </para>
            </xsl:if>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

# html - 如何在这个 WordPress 主题中将“阅读更多”按钮移动到帖子的末尾？

> ID：13734713
> 
> 赞同：1
> 
> 时间：2012-12-05T23:53:04.680
> 
> 标签：html, css, wordpress

我下载了这个主题，当您在 WordPress 中添加“更多”标签时，它会在 Tweet、Like 和 Comments 按钮的底部添加“阅读更多”按钮。

a) 我希望能够在帖子摘录后以链接的形式显示“阅读更多”的经典形式。

b) 然后将“评论”图标移到 Tweet 和 Like 按钮附近。

我对 CSS/HTML 的了解为零，非常感谢能提供帮助的人。

文件：

视觉说明 ------> [http://bit.ly/WKdMCl](http://bit.ly/WKdMCl)

zip 格式的主题 ------> [http://bit.ly/UovMlW](http://bit.ly/UovMlW)

主题实际演示----> [http://bit.ly/HtSIxn](http://bit.ly/HtSIxn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:03:47.373

b)`float:right;`从文件中的 css`.post-meta .comments { }`中删除`style.css`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:56:44.157

您必须编辑主题核心文件才能实现**a**和**b**。为了您的方便，我在萤火虫上尝试了一些东西。检查图像：[http ://tinypic.com/r/2jdqds8/6](http://tinypic.com/r/2jdqds8/6)

如果你想要类似的东西，你只需要编辑一个文件，那就是*style.css*

请按照以下简单说明进行操作：

1.  使用 Netbeans IDE、Notepad++ 或 WordPad打开位于模板目录中的*style.css 。*
2.  搜索代码*“.post-meta .readmore”*（不带引号）并将其替换为以下代码片段：

    `.post-meta .readmore {border: 0;padding: 2px 0 10px 12px;margin:0;}`

3.  搜索代码*“.post-meta .readmore a”*（不带引号）并将其替换为以下代码片段： `.post-meta .readmore a {color: #317CC8;display: block;line-height: 15px;padding-left:20px;position: relative;text-decoration: underline;top: -30px;}`

4.  搜索代码*“.post-meta .comments”*（不带引号）并将其替换为以下代码片段： `.post-meta .comments { margin: 3px 0 0 16px; padding: 0 16px 3px 20px; color: #c9c9c9; font-size: 10px; float:left; font-weight: bold; text-transform: uppercase; background: url("images/comments.png") no-repeat left 3px; border:none; }`

我确信这将实现图像中演示的内容（作为链接附加）。

# automation - 给定一对图像，如何自动创建将一个图像变形为另一个图像的动画序列？

> ID：13734714
> 
> 赞同：1
> 
> 时间：2012-12-05T23:53:12.637
> 
> 标签：automation, imagemagick, photoshop, animated-gif, gimp

有没有一种编程方法可以将两个图像转换为动画序列（例如，动画 GIF），如下例所示？

![来自 memrise.com，在两张图片之间显示动画 GIF](../Images/91a70d91acf0f4acca4758a7a6e20f21.png)

该图像序列取自[http://memrise.com](http://memrise.com)课程，似乎没有手动编辑的帧，但似乎使用某种形状变形算法自动转换。是否有一个通用术语来描述这样的动画或算法？给定一对图像，ImageMagick 或 Photoshop/Gimp 中是否有生成此类动画的功能？

理想情况下，该技术可以是可编写脚本的，因此我可以为几对起始图像创建动画。

编辑：我刚刚被告知 Gimp 在 Filters->Animation->Blend 下的工具，它似乎与 jQuery morph 做同样的事情：每一帧`i`都是`start + (finish - start)/N*i`. 换句话说，您将每个像素独立地从开始值过渡到结束值，而没有任何形状变形。给出的示例更加复杂，因为它修改了两个图像的轮廓以实现其引人注目的效果。

其他示例：

*   [http://static.memrise.com/uploads/mems/32000121024054535.gif](http://static.memrise.com/uploads/mems/32000121024054535.gif)
*   [http://static.memrise.com/uploads/mems/225428000121109232837.gif](http://static.memrise.com/uploads/mems/225428000121109232837.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-06T11:56:30.377

虽然这是一个老问题，但由于提到了 ImageMagick，对于从谷歌来到这里的任何人来说，可能值得看看[这个名为 shapemorph 的 imagemagick 插件](http://www.fmwconcepts.com/imagemagick/shapemorph/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:21:44.843

GIMP 不能直接执行此操作，但多年来，第三方发布的一系列（现在维护不善）插件可以执行此操作。搜索这个的关键词是“morph”——你应该找到一堆独立的程序来做这件事，从“免费”到成熟的自由软件，比如[xmorph](http://xmorph.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-12T13:17:15.220

给定成对的矢量文件（.wmf 扩展名），可以在 Visual Basic for Applications 中使用 shapenodes 的线性插值来为 GIF 动画创建帧，尽管这需要一些时间来解释。有关一些示例，请参见

[http://www.giless.co.uk/animatorMorphGIFs.htm](http://www.giless.co.uk/animatorMorphGIFs.htm)（就像幻灯片一样）

从那以后，我也做了一些改进！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-20T20:19:38.330

我编写了一个不需要设置手动关键点并且不限于域（如面孔）的工具。无论如何，图像必须相似（例如，从同一角度看的两张脸或两辆汽车）。它仍在进行中，因此结果有时不是很好，或者您必须摆弄参数才能获得良好的结果。

[https://github.com/kallaballa/罂粟](https://github.com/kallaballa/Poppy)

[![火焰到字形变形](../Images/5e04c45920962934dcfdea30f671018d.png)](https://i.stack.imgur.com/gCSIR.gif.gif.gifom/WhA2M.gif)

我使用以下命令行生成了上述动画：

`poppy -o flame.mkv -c30 -p30 -f60 flame.png glyph.png flame.png`

# ios6 - [NSUserDefaults standardUserDefaults] 是否可以在删除应用程序后缓存值？

> ID：13734715
> 
> 赞同：0
> 
> 时间：2012-12-05T23:53:26.630
> 
> 标签：ios6, nsuserdefaults

我正在远程解决一个问题，即使在安装应用程序之后，用户默认设置也不会被清除。这就是我的意思：

```
BOOL myVar = [[NSUserDefaults standardUserDefaults] boolForKey:key];

if (myVar) {
   NSLog(@"YES");
}else{
   NSLog(@"NO");
} 
```

第一次运行新安装的应用程序时，我希望它返回 NO，直到我在 NSUserDefaults 中明确设置该键。

但是，即使在删除并重新安装之后，它似乎也在重新调整 YES。

请注意，这不是一致的行为，但确实会发生。iOS 6.0.1

这里有什么想法还是我找错地方了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T16:50:38.783

原来我的错误与用户默认值无关，所以这个问题有点无关紧要。但是为了记录，答案可能是否定的，删除应用程序后没有缓存。

# android - 使用 Widget.Sherlock.ActionButton 为 ImageView 充气时，资源不是 Drawable

> ID：13734716
> 
> 赞同：3
> 
> 时间：2012-12-05T23:53:28.080
> 
> 标签：android, actionbarsherlock

您好我正在尝试向操作栏添加动画视图，但在 Android 2.3 上出现此错误（适用于 Android 4）

```
 1194         AndroidRuntime  E  FATAL EXCEPTION: main
  1194         AndroidRuntime  E  android.view.InflateException: Binary XML file line #3: Error inflating class <unknown>
  1194         AndroidRuntime  E    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
  1194         AndroidRuntime  E    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
  1194         AndroidRuntime  E    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
  1194         AndroidRuntime  E    at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
  1194         AndroidRuntime  E    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
  1194         AndroidRuntime  E    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
  1194         AndroidRuntime  E    at it.patrick91.unisamenu.MainActivity.load(MainActivity.java:165)
  1194         AndroidRuntime  E    at it.patrick91.unisamenu.MainActivity.onOptionsItemSelected(MainActivity.java:219)
  1194         AndroidRuntime  E    at com.actionbarsherlock.app.SherlockListActivity.onMenuItemSelected(SherlockListActivity.java:208)
  1194         AndroidRuntime  E    at com.actionbarsherlock.ActionBarSherlock.callbackOptionsItemSelected(ActionBarSherlock.java:603)
  1194         AndroidRuntime  E    at com.actionbarsherlock.internal.ActionBarSherlockCompat.onMenuItemSelected(ActionBarSherlockCompat.java:529)
  1194         AndroidRuntime  E    at com.actionbarsherlock.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:738)
  1194         AndroidRuntime  E    at com.actionbarsherlock.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:148)
  1194         AndroidRuntime  E    at com.actionbarsherlock.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:879)
  1194         AndroidRuntime  E    at com.actionbarsherlock.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:510)
  1194         AndroidRuntime  E    at com.actionbarsherlock.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:145)
  1194         AndroidRuntime  E    at android.view.View.performClick(View.java:2485)
  1194         AndroidRuntime  E    at android.view.View$PerformClick.run(View.java:9080)
  1194         AndroidRuntime  E    at android.os.Handler.handleCallback(Handler.java:587)
  1194         AndroidRuntime  E    at android.os.Handler.dispatchMessage(Handler.java:92)
  1194         AndroidRuntime  E    at android.os.Looper.loop(Looper.java:130)
  1194         AndroidRuntime  E    at android.app.ActivityThread.main(ActivityThread.java:3687)
  1194         AndroidRuntime  E    at java.lang.reflect.Method.invokeNative(Native Method)
  1194         AndroidRuntime  E    at java.lang.reflect.Method.invoke(Method.java:507)
  1194         AndroidRuntime  E    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
  1194         AndroidRuntime  E    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
  1194         AndroidRuntime  E    at dalvik.system.NativeStart.main(Native Method)
  1194         AndroidRuntime  E  Caused by: java.lang.reflect.InvocationTargetException
  1194         AndroidRuntime  E    at java.lang.reflect.Constructor.constructNative(Native Method)
  1194         AndroidRuntime  E    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
  1194         AndroidRuntime  E    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
  1194         AndroidRuntime  E    ... 26 more
  1194         AndroidRuntime  E  Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2/d=0x7f01000f a=3}
  1194         AndroidRuntime  E    at android.content.res.Resources.loadDrawable(Resources.java:1681)
  1194         AndroidRuntime  E    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
  1194         AndroidRuntime  E    at android.view.View.<init>(View.java:1951)
  1194         AndroidRuntime  E    at android.widget.ImageView.<init>(ImageView.java:112)
  1194         AndroidRuntime  E    at android.widget.ImageView.<init>(ImageView.java:108)
  1194         AndroidRuntime  E    ... 29 more 
```

膨胀图像的代码是这样的：

```
LayoutInflater inflater = (LayoutInflater) getApplication()
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
ImageView iv = (ImageView) inflater.inflate(R.layout.load_action_view,
        null);
Animation rotation = AnimationUtils.loadAnimation(getApplication(),
        R.anim.load_anim);
rotation.setRepeatCount(Animation.INFINITE);
iv.startAnimation(rotation); 
```

load_action_view.xml 是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/Widget.Sherlock.ActionButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_action_load" /> 
```

做一些测试我注意到删除 style="@style/Widget.Sherlock.ActionButton" 解决了这个问题。

我在清单中的应用程序标签是这样的：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >..</application> 
```

你知道什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:55:12.240

修复了将 getApplication() 更改为此（它在 Activity 中）

# javascript - 在我的 JavaScript 函数中添加淡入淡出效果

> ID：13734718
> 
> 赞同：0
> 
> 时间：2012-12-05T23:53:38.883
> 
> 标签：javascript, jquery, image, gallery, slideshow

我有一个 JavaScript 函数，可以通过更改源来在幻灯片中显示图像。我试图创建 smth 以包含一个淡入淡出效果，但我认为这是灾难性的。这是我的 JavaScript 函数。我不需要一个完整的答案，只是一些帮助我实现这一目标的提示。我是 JavaScript 的初学者，但我想学好它。如果有办法在没有 jQuery 的情况下做到这一点，那就太好了，或者直接在这个函数中包含 jQuery 将是最好的。

```
{       
    function nextImage() {

    if (currentImage < 5) {
        currentImage = currentImage + 1;
    } else {
        currentImage = 1;
    }

    document.getElementById('image').src = 'images/' + currentImage + '.jpg';

    }
} 
```

自然，淡入淡出会适应相反的功能，但我认为这个例子可以帮助像我这样的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:00:16.423

使用 jquery 它会是这样的：

```
function nextImage() {

   if (currentImage < 5) {
       currentImage = currentImage + 1;
   } else {
       currentImage = 1;
   }
   $("#image").fadeOut('fast', function() {
       $("#image").attr('src','images/' + currentImage + '.jpg');
       $("#image").fadeIn('fast');
   });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:00:57.943

我不认为这是一个愚蠢的问题，尽管无论出于何种原因，我自己的问题都被否决了，去想想吧！（结束吐槽）

您可能会考虑如果您能够使用 CSS，那么您可以尝试使用 CSS3 淡化过渡。

如果你用 Javascript 来做，我可能会使用 jQuery 来做，因为这些函数已经存在，你所要做的就是使用 .show('slow') 和 .hide('slow') 以及那个参数'slow ' 会自动为你做动画。

[http://api.jquery.com/show/](http://api.jquery.com/show/)

否则如果你想从头开始写，那么你大概可以看一下jQuery源代码，看看实际的动画效果是如何完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:03:55.283

您应该使用 JQuery，因为它们使效果变得非常容易：

[http://api.jquery.com/category/effects/fading/](http://api.jquery.com/category/effects/fading/)

查看他们的示例和文档

这是一个例子：

示例： 示例：动画隐藏的 div 一个一个地淡入，在 600 毫秒内完成每个动画。

```
<!DOCTYPE html>
<html>
<head>
  <style>
    span { color:red; cursor:pointer; }
    div { margin:3px; width:80px; display:none;
      height:80px; float:left; }
      div#one { background:#f00; }
      div#two { background:#0f0; }
      div#three { background:#00f; }
    </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <span>Click here...</span>
<div id="one"></div>
<div id="two"></div>
<div id="three"></div>
<script>
  $(document.body).click(function () {
    $("div:hidden:first").fadeIn("slow");
  });
</script> 
```

关于如何开始使用 JQuery 的一些提示：

```
var a = $(document); //  <-- set the hole document to variable a
var b = $("#myid"); // <-- set the element that has id="myid" to variable b
var c = $(".myclass"); // <-- set the element(s) that has class="myclass" to variable c
var d = $("img"); // <-- set the img element(s) to variable d 
```

使用 Chrome Web Inspector 或 Firebug 调试您的 JavaScript 代码

# php - 克隆包含对象的对象

> ID：13734723
> 
> 赞同：3
> 
> 时间：2012-12-05T23:54:00.573
> 
> 标签：php

因为 PHP 默认通过引用传递对象，所以我遇到了以下脚本演示的一个小问题：

```
$a = new stdClass();
$a->b = new stdClass();
$a->b->c = 1;

$d = clone $a;

$a->b->c = 10;

print_r($a);
print_r($d); 
```

有没有办法克隆 stdClass 并克隆它可能包含的任何对象？我知道我可以使用 __clone 方法来防止这种行为，但我的对象是通过 json_decode 构建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:00:53.447

我相信公认的方法是序列化和反序列化复合对象

```
$d = unserialize(serialize($a)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:01:33.963

既然您已经有了 JSON，为什么不直接从 JSON 创建所有对象

另一种“深度克隆”（即不向`__clone()`对象添加方法）的hacky方法也是：

```
$object_b = unserialize(serialize($object_a)); 
```

或者，因为您正在处理所有嵌套的 stdClass 对象：

```
$object_b = json_decode(json_encode($object_a)); 
```

# android - android-ndk-r6-crystax-2 错误：命名空间“std”中的“字符串”未命名类型

> ID：13734725
> 
> 赞同：0
> 
> 时间：2012-12-05T23:54:14.720
> 
> 标签：android, c++, compiler-errors, makefile, android-ndk

我有一个使用 android-ndk-r4-crystax 构建良好的项目，但是当我切换到 android-ndk-r6-crystax 时，我收到以下错误：

```
error: 'string' in namespace 'std' does not name a type 
```

有人对会导致此问题的 r4 和 r6 之间的区别有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:26:40.370

在报告此问题的所有文件中，我需要在所有其他包含之前添加 #include。

# windows - Windows 批处理 FOR 命令制表符分隔符

> ID：13734726
> 
> 赞同：4
> 
> 时间：2012-12-05T23:54:22.787
> 
> 标签：windows, batch-file, command-prompt

我正在尝试使用 Windows 批处理[FOR 命令](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/for.mspx?mfr=true)。

如何指定 TAB 字符作为分隔符？默认是空格和制表符，但我只想要制表符。

我试过这个，但它不起作用：

```
FOR /F "tokens=3 delims=^T" %i in (test.txt) do @echo %i 
```

它似乎在 T 字符而不是制表符上分裂。我还尝试将文字粘贴到命令提示符中，但出现语法错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T02:33:43.033

您需要在带引号的选项字符串中使用文字制表符。文字 TAB 在批处理文件和命令行中都有效。

如果您尝试在命令行中键入 TAB，则文件名完成可能会阻碍您的工作。您可以使用 禁用名称完成`CMD /F:OFF`。然后，您将能够输入文字 TAB 字符。

根据您使用的文本编辑器，您还可能在尝试将 TAB 输入批处理脚本时遇到问题。一些程序员的编辑器具有自动将制表符转换为空格的设置。您需要确保您的编辑器没有这样做。

因此，您只需要更改`"tokens=3 delims=^T"`字符串以使用 TAB 文字而不是`^T`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-28T20:40:42.767

Ngaaa ..谈论一个下午的头痛......

我今天遇到了同样的问题...我需要用 FOR /F 解析行，其中每行是多个句子（每个句子都可能带有嵌入的空格），每个句子由制表符分隔。

我的问题是我的公司编码标准（即使是 BATCH 文件）禁止在源代码中包含实际的 TAB 字符（我们的编辑器禁止放入 TAB，我们的版本 ctrl 工具不允许任何带有 TAB 或 WTR 的文本文件的签入 [白色-向右]。）

所以，这是一个 hack，但它适用于 XP（垂头丧气......深深的耻辱......）

```
SET REG_CPU="HKLM\Hardware\Description\System\CentralProcessor\0"
REG.EXE QUERY %REG_CPU% /V IDENTIFIER | FIND "REG_SZ" > RegCPUid.Tmp
for /F "tokens=2 delims=rR" %%i in (RegCPUid.Tmp) do SET TAB=%%~i 
```

这适用于 XP，但我没有检查过 Win7 或 Win7 [WoW64]。

RegCPUid.Tmp 的临时内容是 ONE LINE，看起来像

```
"    IDENTIFIER<tab>REG_SZ<tab>x86 Family 6 Model 37 Stepping 2" 
```

FOR 命令只是在 IDENTIFIER 和 REG_SZ 的两个“R”之间拔出单独的*TAB*，并将环境变量 TAB 设置为它。

然后我的脚本可以只使用制表符作为分隔符（而不是空格）来执行它想要的所有 FOR / F 循环...

```
for /F "tokens=1-3* delims=%TAB%" %%i in (Sentences.txt) do ECHO The THIRD sentence is %%k 
```

所有这些使我在 BATCH 文件中没有任何硬编码的 TAB 字符。

-戴夫

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T00:11:38.113

似乎文字制表符确实有效，但您必须`cmd`使用`/F:ON`. 没有它，即使粘贴制表符也不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T00:03:37.173

根据该网站[http://ss64.com/nt/for_f.html](http://ss64.com/nt/for_f.html)，默认分隔符是制表符，因此请尝试不使用 delims 参数。

# c - 如何在c中将大量数据写入管道

> ID：13734728
> 
> 赞同：0
> 
> 时间：2012-12-05T23:54:24.477
> 
> 标签：c, pipe

对于我的系统编程课程，我正在尝试使用管道在父进程和子进程之间进行通信。我有大量文本 (>64kB) 我想使用管道发送到子进程。子进程会定期读取文本。写作时，如何检查管道是否已满？另外，我如何反复检查缓冲区是否已被清空（通过被子进程读取）并将下一个块写入缓冲区？我知道我可以将整个字符串写到一个文件中，但我只是好奇是否有办法使用管道来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:56:44.087

[管道](http://linux.die.net/man/7/pipe)阻塞（除非您将其设置为非阻塞）。这解决了你的两个问题。

# android - 使用 Button 在 EditText 和 Spinner 中获取文本

> ID：13734732
> 
> 赞同：1
> 
> 时间：2012-12-05T23:54:53.690
> 
> 标签：android, android-layout, android-intent, android-emulator

我想同时从 EditText 和 Spinner 获取文本，但是当我选择所有类型以外的类型时，它本身会更改为所有类型。

**我的问题是为什么在我单击发送按钮后 Feature Flim 会自行更改为所有类型，而不是如何在微调器中获取选定项目。**

字符串.xml：

```
<string-array name="country_arrays">
<item>All Types</item>
<item>Feature Flim</item>
<item>TV Series</item>
<item>Video Games</item>
</string-array> 
```

活动主.xml：

```
<Spinner
    android:id="@+id/spinner1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:entries="@array/country_arrays"
     />

<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_send" 
    android:onClick="sendMessage"/> 
```

这是 MainActicity.java 中的函数 sendMessage：

```
public void sendMessage(View view) {

    final Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
            R.array.country_arrays, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            Toast.makeText(getBaseContext(), 
                "You have selected the book: " + String.valueOf(spinner.getSelectedItem()), 
                Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
        }
    });

    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString() + String.valueOf(spinner.getSelectedItem());
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
} 
```

和 DisplayMessageActivity.java：

```
public class DisplayMessageActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    // Set the text view as the activity layout
    setContentView(textView);

} 
```

我选择长片：

![我选择故事片](../Images/e1b9c4fbf934fa52ca3dfdf92ee2a717.png)

在我点击发送后

![在我点击发送后](../Images/2e611c50fd5e53d28b2b6ceb21adaece.png)

最后它显示：

![在此处输入图像描述](../Images/6cbe8ec354ba5ad8ff64653731eb9cf5.png)

为什么它会自行更改为所有类型？如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:30:30.150

您正在将适配器和数据设置在`sendMessage`. 因此，每次您单击“发送”时，`Spinner`都会重新填充 ，从而再次在位置 0 处结束。

相反，请执行以下操作：

首先，将以下行放在您的类声明中：

```
private Spinner spinner = null; 
```

其次，将这些移动到`onCreate()`（或您调用的任何位置`setContentView()`）：

```
spinner = (Spinner) findViewById(R.id.spinner1); // Do not re-declare
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
R.array.country_arrays, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter);

spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Toast.makeText(getBaseContext(), 
            "You have selected the book: " + String.valueOf(spinner.getSelectedItem()), 
            Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    }
}); 
```

`sendMessage()`第三也是最后，在您的方法中保留以下内容：

```
Intent intent = new Intent(this, DisplayMessageActivity.class);
EditText editText = (EditText) findViewById(R.id.edit_message);
String message = editText.getText().toString() + String.valueOf(spinner.getSelectedItem());
intent.putExtra(EXTRA_MESSAGE, message);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:16:41.537

尝试以另一种方式获取文本：

```
spinner.geItemAtPosition(arg2).toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T00:18:35.790

要获取 Spinner 的选定项目，请执行以下操作：

```
Spinner mySpinner=(Spinner)findViewById(R.id.Spinner_Id);
mySpinner.getSelectedItem().toString(); 
```

# php - FQL 错误 102 需要用户会话重复查询

> ID：13734737
> 
> 赞同：2
> 
> 时间：2012-12-05T23:55:27.817
> 
> 标签：php, facebook-graph-api, facebook-fql, facebook-php-sdk

我有一个功能齐全的 FQL 查询，但是当它第二次被触发时，我得到一个错误代码 102：需要用户会话

在我的应用程序上，我有一个自动完成搜索朋友的功能。我正在使用带有 AJAX 的动态源的 jquery ui 自动完成功能。

这是我的 PHP 函数：

```
function fb_buscarAmigosAutocomplete($term='',$app_user=false){
$facebook = new Facebook(array(
    'appId' => APP_ID,
    'secret'=> APP_SECRET 
));

$term=trim(strtolower($term));

//Buscar usuarios
try{
    $fql     =  "   SELECT uid,name,first_name,last_name,pic_square
                    FROM user
                    WHERE uid IN (
                        SELECT uid2
                        FROM friend
                        WHERE uid1=me()
                    )
                    AND strpos(lower(name),'".$term."') >=0
                ";
    if($app_user)
        $fql .= "   AND is_app_user";           

        $fql .= "   LIMIT 5";

        $param  =   array(
            'method'    => 'fql.query',
            'query'     => $fql,
            'callback'  => ''
        );
        $result   =   $facebook->api($param);

} catch(FacebookApiException $e){
    $error=$e->getMessage();
    var_dump($e);
}

if(!empty($result)) {
     $return['amigos']=$result;
     $return['valido']=true;
}else 
    $return['valido']=false;

return $return;
} 
```

奇怪的是，这在过去的 2-3 周内运行良好，但突然停止了。即使“更奇怪”，它在第一次触发时仍然有效，但第二次则无效。由于这是异步的，我不明白如果是第一次，第二次，第三次，第四次触发它有什么区别..

有任何想法吗？

**编辑 1** 通过进一步的研究，我认为我有一个解决方法。这可能是因为在此处报告并[在](http://facebook.stackoverflow.com/questions/13635991/an-active-access-token-must-be-used-dec-2012-the-proper-way-to-set-up-fac#comment18728737_13635991)此处讨论[的错误](https://developers.facebook.com/bugs/238039849657148)

我的解决方法是捕获我使用 Object Facebook 获得的第一个 access_token，然后将其附加到该类的每个实例，就像这样

**第一次连接：**

```
$facebook = new Facebook(array(
    'appId' => APP_ID,
    'secret'=> APP_SECRET 
));

$uid = $facebook->getUser();
if($uid){
  $_SESSION['access_token']=$facebook->getAccessToken();
} 
```

**api的任何其他用途：**

```
$facebook = new Facebook(array(
    'appId' => APP_ID,
    'secret'=> APP_SECRET 
));
$facebook->setAccessToken($_SESSION['access_token']);
try{
    $user_info  = $facebook->api('/'.$uid.'?fields=id,name,first_name,last_name,email,picture');

} catch(FacebookApiException $e){
    $error = $e->getMessage();
} 
```

到目前为止，它已经解决了这个问题

**编辑 2**
它没有...有时我的访问令牌是一个有效的字母数字 +100 个字符的字符串，而那些时候它可以工作。

有时它是一个只有 48 个数字的字符串，它没有......我真的被困在这里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:21:48.897

之所以会发生这种情况，是因为Facebook[于 2012 年 12 月 5 日](http://developers.facebook.com/blog/post/2012/12/05/platform-updates--operation-developer-love/)推出了“重大变更”。具体来说：

> **OAuth 授权码的新安全限制**
> 
> *我们将只允许将授权代码交换为访问令牌一次，并要求在创建后 10 分钟内将它们交换为访问令牌*。这符合 OAuth 2.0 规范，该规范从一开始就声明“授权码必须是短暂的且一次性使用”。有关更多信息，请查看我们的身份验证文档。

这就是为什么您的第一个请求有效，而您的第二个请求无效。在第二次尝试时，SDK 会尝试将您的用户身份验证代码交换为访问令牌。但由于这些变化，这只能完成一次。您的代码看起来应该可以正常工作，因为您是`access_token`在第一次收到它之后明确保存然后设置的。确保是这种情况（确认 $_SESSION 变量正在正确保存/检索）。如果由于某种原因不是，您将看到 102 错误。

干杯

# c++ - 用于在 C++ 中同步线程的二进制信号量

> ID：13734738
> 
> 赞同：2
> 
> 时间：2012-12-05T23:55:41.683
> 
> 标签：c++, multithreading, synchronization, semaphore

每个人。我是信号量的新手，最近我正在学习使用二进制信号量来实现一个简单的问题，我有一些问题。

所以有一个会客室，一次只能一个人进去。在我的设计中，有三个人队列（这是我创建的所有线程）。例如，在第二个队列中的人访问了那个房间后，下一个要进入房间的人是第三个队列中的最前面的人，而不是第一个队列的人。给出了总人数。离开后，只需简单地终止线程。

我正在尝试创建三个信号量来处理此问题，即，在第二个队列中的一个人进入后，然后阻止第二个队列并且仅“发出信号”第三个队列继续。依此类推。但是，代码存在一些问题。在这里，我只展示代码的一些信号量部分。

主要内容：

sem_init(&mutex, 0, 1);

sem_init(&s0, 0, 1);

sem_init(&s1, 0, 1);

sem_init(&s2, 0, 1);

// 创建 100 个 pthread 并随机放入 queue0 或 queue1 或 queue2

```
 for(int i = 0; i<num_thread; i++){ 

        pthread_t curr_thread;
        if(queueId == 0){
            queue0.push(curr_thread);           
        }else if(queueId == 1){ 
            queue1.push(curr_thread);   
        }else if(queueId == 2){ 
            queue2.push(curr_thread);   
        }
            pthread_attr_t attr;
            pthread_attr_init (&attr);
            pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
            pthread_create (&curr_thread, &attr, &thread_function, &queue_Num);
            pthread_attr_destroy (&attr);

    } 
```

在线程函数中：

```
void* thread_function (void* arg){

        sem_wait(&mutex);

        int n = *((int*) arg);
        if(n==0){
            sem_wait(&s0);
            cout << "person in queue" << n << " is visiting" << endl;
            sleep(1);
            if(!queue0.empty()){
                queue0.pop();
            }else{
                n++;
            }
            sem_post(&s1);

        }else if(n==1){
            sem_wait(&s1);
            cout << "person in queue" << n << " is visiting" << endl;
            sleep(1);
            if(!queue1.empty()){
                queue1.pop();
            }else{
                n++;
            }
            sem_post(&s2);
        }else if(n==2){
            sem_wait(&s2);
            cout << "person in queue" << n << " is visiting" << endl;
            sleep(1);
            if(!queue2.empty()){
                queue2.pop();
            }else{
                n++;
            }
            sem_post(&s0);
        }

        sem_post(&mutex);

    return NULL;
} 
```

实际上，当我运行它时，似乎遇到了“死锁”，每次只显示 2 个线程。我认为thread_function的设计一定存在一些问题。有没有人可以帮助指出并告诉我如何解决它？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:25:36.623

当您将您传递`queueId`给线程时，您不想将指针传递给您的局部变量之一，因为您将很快改变它。相反，您应该将整数本身传递给您的线程：

```
pthread_create(&curr_thread, &attr, &thread_function, (void*)queueId);
                                        // Pass queueId the int, not a pointer 
```

然后，当您需要读取线程中的值时，只需将其`void*`转换为整数：

```
void* thread_function (void* arg){
    ...

    int n = (long)arg;

    ..
} 
```

在此之后，您的代码对我来说效果很好。

# python - Arduino、python、pyserial 和套接字

> ID：13734740
> 
> 赞同：4
> 
> 时间：2012-12-05T23:55:42.343
> 
> 标签：python, serial-port, arduino

我正在尝试在 Arduino 上编写一个简单的网络服务器来测试一些东西，但我找不到带有以太网的 Arduino。

“不用担心”我想，“我会用 python 编写一个套接字服务器，作为串行连接的代理”。

```
import socket
import serial
host = ''
port = 8001
buffSize= 1024
serverSocket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
serverSocket.bind((host, port))
serverSocket.listen(1)
ser = serial.Serial('COM3', 115200, timeout=None, dsrdtr =False,rtscts =False,xonxoff =False)
print "Listening..."
send = ""
while 1:
    conn, remoteAddr = serverSocket.accept()
    print "Connection...."
    data = conn.recv(buffSize)
    print "Recieved"
    ser.write("%s\n"%data)
    print "Sent"
    print "Attempting to get reply"
    while ser.inWaiting()>0:
            conn.send( ser.read())
    conn.close()
serverSocket.close() 
```

但是，无论我尝试什么，似乎浏览器建立的连接都会随机重置，我会得到多行数据。每次连接或断开串行端口时，脚本都会重置 Arduino。我尝试使用 RealTerm 并得到了正确的答案，但是 python 和连续性只是一团糟。

谁能帮我？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T17:03:06.827

使用 PySerial 文档中的[tcp_serial_redirect.py](http://pyserial.svn.sourceforge.net/viewvc/%2acheckout%2a/pyserial/trunk/pyserial/examples/tcp_serial_redirect.py)脚本。是你所需要的全部。

# c# - 打开选定文件的默认应用程序（MSWord、Adobe 等）

> ID：13734741
> 
> 赞同：2
> 
> 时间：2012-12-05T23:55:47.113
> 
> 标签：c#, wpf, interop, ms-word

我需要制作一个 C# 应用程序，使用户能够浏览（打开和关闭）文件列表（doc、msg、pdf 等）。

该应用程序需要在其默认应用程序（例如 Microsoft Word）中打开文件。

关闭时，如果文件已被编辑，默认文件应用程序将提示用户在关闭前保存。

我已经看过[以下 SO](https://stackoverflow.com/questions/7712955/word-interop-how-to-close-one-word-window-without-closing-all-of-them)帖子，但这并不是我所追求的：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:26:28.720

提示：[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)方法和[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start(v=vs.100).aspx)方法。

# python - 如何让 Python 2.7 在一行上接受多个变量输入

> ID：13734744
> 
> 赞同：-2
> 
> 时间：2012-12-05T23:56:26.683
> 
> 标签：python, variables, input

我试图让用户同时输入矩形的长度和宽度。

```
length,width = float (raw_input("What is the length and width? ")).split(',') 
```

但是，当我运行程序并输入两个变量（例如 3,5）时，我收到一条错误消息，指出我的 float() 类型的文字无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:57:54.720

嗯，那是因为您输入了两个用逗号分隔的数字，但将该值拆分为句点。用逗号分割它，它应该工作得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:46:37.440

首先，为什么会失败：

```
float (raw_input("What is the length and width? ")).split(',') 
```

将`split(',')`字符串拆分为字符串序列。您不能调用`float`字符串序列，只能调用单个字符串。这就是为什么错误说它是“浮点类型的无效文字”。

如果要对序列中的每个值调用相同的函数，有两种方法：

使用列表推导（或生成器表达式）：

```
[float(x) for x in raw_input("What is the length and width? ")).split(',')] 
```

或`map`功能：

```
map(float, raw_input("What is the length and width? ")).split(',')) 
```

我会使用列表推导，因为这是 BDFL 更喜欢的，并且因为它对于您可能想要做的其他事情更简单 like `x[2]`，但在这种情况下真的没那么重要；无论哪种方式都足够简单，您应该了解它们的含义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T00:03:03.423

您可能还想转换为整数：

```
prompt = "what is the length and width? "
inpt = raw_input(prompt)
length, width = [int(i) for i in inpt.split(',')] 
```

# gcc - 为什么我在 __libc_init_array 中有未定义的 _init 引用？

> ID：13734745
> 
> 赞同：10
> 
> 时间：2012-12-05T23:56:30.100
> 
> 标签：gcc, linker, yagarto

我正在尝试使用 Yagarto 和 Eclipse 为 ARM 微控制器平台构建一个简单的项目。在我的启动代码中，我有这个（我认为这是相当标准且无趣的）：

```
void Reset_Handler(void)
{
  /* Initialize data and bss */
  __Init_Data();

  /* Call CTORS of static objects */
  __libc_init_array();

  /* Call the application's entry point.*/
  main();

  while(1) { ; }
} 
```

除非我注释掉对 的调用`__libc_init_array()`，否则我会从链接器收到以下错误：

```
arm-none-eabi-g++ -nostartfiles -mthumb -mcpu=cortex-m4 -TC:/Users/mark/workspace/stm32_cpp_test/STM32F40x_1024k_192k_flash.ld -gc-sections -Wl,-Map=test_rom.map,--cref,--no-warn-mismatch -o stm32_cpp_test "system\\syscalls.o" "system\\startup_stm32f4xx.o" "system\\mini_cpp.o" "system\\cmsis\\system_stm32f4xx.o" main.o 
d:/utils/yagarto/bin/../lib/gcc/arm-none-eabi/4.7.2/../../../../arm-none-eabi/lib/thumb/v7m\libg.a(lib_a-init.o): In function `__libc_init_array':
C:\msys\1.0\home\yagarto\newlib-build\arm-none-eabi\thumb\v7m\newlib\libc\misc/../../../../../../../newlib-1.20.0/newlib/libc/misc/init.c:37: undefined reference to `_init'
collect2.exe: error: ld returned 1 exit status 
```

为什么我会收到此“未定义的引用”错误？我错过了什么？我认为我缺少一些链接器标志，但我一生都无法弄清楚是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-09T18:35:02.907

老问题，但我遇到了类似的问题，解决方案正如 Marco van de Voort 指出的那样，如果你要使用`__libc_init_array`你应该省略`-nostartfiles`链接器选项，以包含正常的 libc 初始化函数。重复答案。

其次，我建议`--specs=nano.specs`在与 gcc-arm 链接时包含该标志（我相信 yargarto 是一个分支，甚至只是 gcc-arm 的预编译），因为它减少了 libc 等代码的消耗。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T16:58:15.527

我不是专家，但是：

可能 _init（正常的运行时入口点）引用了执行 ctor 和 dtor 表的代码。

您使用-nostartfiles 以避免标准启动，并且可能整个启动代码都被--gc-sections 消除了。显式调用再次添加引用。

如果省略 --gc-sections 不能解决它，它也可能是您的（嵌入式）链接器脚本中缺少的 keep() 语句，该语句始终保留入口代码，或者您自己的启动代码 (startup_*) 应该参考它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-20T23:19:46.310

stdlib 中的*__libc_init_array*函数负责调用注册到*preinit_array*和*init_array*的所有初始化程序或 C++ 构造函数。在 preinit 和 init 之间，它调用了一个 extern *_init*函数。代码看起来很简单：

```
#include <sys/types.h>

/* These magic symbols are provided by the linker.  */
extern void (*__preinit_array_start []) (void) __attribute__((weak));
extern void (*__preinit_array_end []) (void) __attribute__((weak));
extern void (*__init_array_start []) (void) __attribute__((weak));
extern void (*__init_array_end []) (void) __attribute__((weak));

extern void _init (void);

void __libc_init_array (void)
{
  size_t count;
  size_t i;

  count = __preinit_array_end - __preinit_array_start;
  for (i = 0; i < count; i++)
    __preinit_array_start[i] ();

  _init ();

  count = __init_array_end - __init_array_start;
  for (i = 0; i < count; i++)
    __init_array_start[i] ();
} 
```

另请参阅：[了解 __libc_init_array](https://stackoverflow.com/questions/15265295/understanding-the-libc-init-array)。

如果实现了自定义启动代码，则需要通过链接到“ *init.o* ”或通过实现类似于上面代码片段的内容来执行此初始化。

如果至少使用*newlib-nano规范为**arm-none-eabi* ARMv7e 目标构建，那么*_init*方法会从*crti.o*和*crtn.o链接进来，这为**_init*和*_fini*提供了一些空存根。对 arm-none-eabi 的所有其他 stdlib 对象进行了一些搜索，但没有发现其他将部分附加到*.init*的对象，这无论如何都会过时。这里有一些*crti.o*和*crtn.o*的反汇编：

 ***```
$ ./bin/arm-none-eabi-objdump.exe -j .init -D ./lib/gcc/arm-none-eabi/10.2.1/thumb/v7/nofp/crt?.o

./lib/gcc/arm-none-eabi/10.2.1/thumb/v7/nofp/crti.o:     file format elf32-littlearm

Disassembly of section .init:

00000000 <_init>:
   0:   b5f8            push    {r3, r4, r5, r6, r7, lr}
   2:   bf00            nop

./lib/gcc/arm-none-eabi/10.2.1/thumb/v7/nofp/crtn.o:     file format elf32-littlearm

Disassembly of section .init:

00000000 <.init>:
   0:   bcf8            pop     {r3, r4, r5, r6, r7}
   2:   bc08            pop     {r3}
   4:   469e            mov     lr, r3
   6:   4770            bx      lr 
```

如果有人想将此特定 ARM 目标的*__libc_init_array*与链接器选项 nostartfiles 结合使用*，*则可以提供自己的*_init*存根方法，让链接器通过，只要没有其他初始化代码发送到节*.init*，除了*crti.o*和*crtn.o 之外*。存根可能如下所示：

 ***```
extern "C" void _init(void) {;} 
```

特殊函数*_init*和*_fini*是控制构造函数和析构函数的一些历史遗留问题。但是，它们已经过时，并且它们的使用可能会导致不可预测的结果。任何现代库都不应该再使用这些，而是​​使用 GCC 函数属性*构造函数*和*析构函数，它们将方法添加到**.preinit_array*、*.init_array*和*.fini_array*部分内的这些表中。

如果知道有一些初始化代码发送到*.init*（即使今天已经过时），那么应该提供一个*_init(void)函数，它将通过调用**.init*的起始地址来运行此初始化代码部分。******

# c# - 将多个枚举组合到主枚举列表中

> ID：13734746
> 
> 赞同：21
> 
> 时间：2012-12-05T23:56:34.857
> 
> 标签：c#, enums, combinations

是否可以将多个枚举组合在一起？下面是我想看到的代码示例：

```
enum PrimaryColors
{
   Red,
   Yellow,
   Blue
}

enum SecondaryColors
{
   Orange,
   Green,
   Purple
}

//Combine them into a new enum somehow to result in:
enum AllColors
{
   Red,
   Orange,
   Yellow,
   Green,
   Blue,
   Purple
} 
```

不管它们是什么顺序，或者它们的后备号码是什么，我只想能够将它们组合起来。

对于上下文，这样我正在处理的程序的多个类将具有与它们所做的相关联的枚举。我的主程序将读取每个支持类中可用的所有枚举，并制作可用命令的可用枚举的主列表（枚举用于）。

编辑：这些枚举的原因是因为我的主程序正在读取要在特定时间执行的命令列表，所以我想读取文件，查看其中的命令是否与我的枚举之一相关联，并且如果是，请将其放入要执行的命令列表中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T00:16:00.040

不确定我是否理解准确。但是您可以`List<>`像这样将所有值设为：

```
var allColors = new List<Enum>();

allColors.AddRange(Enum.GetValues(typeof(PrimaryColors)).Cast<Enum>());
allColors.AddRange(Enum.GetValues(typeof(SecondaryColors)).Cast<Enum>()); 
```

而不是`List<Enum>`你也可以使用`HashSet<Enum>`. 无论如何，因为您将`PrimaryColor`or分配`SecondaryColor`给*类*类型（即`System.Enum`），所以您会得到[boxing](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)，但这只是技术细节（可能）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T00:14:04.803

> 这些枚举的原因是因为我的主程序正在读取要在某些时间执行的命令列表，所以我想读入文件，查看其中的命令是否与我的枚举之一相关联，如果它即，将其放入要执行的命令列表中。

这似乎你不想要三种不同的`enum`类型，你想要一种类型（你称之为“master `enum`”）加上一些方法来决定某个值属于哪个子枚举。为此，您可以使用主枚举中的值集合，或`switch`.

例如：

```
enum Color
{
   Red,
   Orange,
   Yellow,
   Green,
   Blue,
   Purple
}

bool IsPrimaryColor(Color color)
{
    switch (color)
    {
    case Color.Red:
    case Color.Yellow:
    case Color.Blue:
        return true;
    default:
        return false;
    }
} 
```

此外，[您应该为`enum`类型](http://msdn.microsoft.com/en-us/library/ms229040.aspx)使用单数名称（除非它是一个标志`enum`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T00:26:52.920

保持简单，只使用隐式`int`转换，或使用`System.Enum.Parse()`函数：

```
enum PrimaryColors
{        
    Red = 0,
    Yellow = 2,
    Blue = 4
}

enum SecondaryColors
{
    Orange = 1,
    Green = 3,
    Purple = 5
}

//Combine them into a new enum somehow to result in:
enum AllColors
{
    Red = 0,
    Orange,
    Yellow,
    Green,
    Blue,
    Purple
}

class Program
{
    static AllColors ParseColor(Enum color)
    {
        return ParseColor(color.ToString());
    }
    static AllColors ParseColor(string color)
    {
        return (AllColors)Enum.Parse(typeof(AllColors), color);
    }
    static void Main(string[] args)
    {
        PrimaryColors color1=PrimaryColors.Red;
        AllColors result=(AllColors)color1;
        // AllColors.Red

        SecondaryColors color2=SecondaryColors.Green;
        AllColors other=(AllColors)color2; 
        // AllColors.Green

        AllColors final=ParseColor(PrimaryColors.Yellow);
        // AllColors.Yellow
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-24T03:22:58.857

您可以从完整组派生子组。
一个例子：

```
enum AllColors 
{
   Red,
   Orange,
   Yellow,
   Green,
   Blue,
   Purple
}

enum PrimaryColors
{
   Red = AllColors.Red,
   Yellow = AllColors.Yellow,
   Blue = AllColors.Blue
}

enum SecondaryColors
{
   Orange = AllColors.Orange,
   Green = AllColors.Green,
   Purple = AllColors.Purple
} 
```

# objective-c - 如何将焦点设置为新记录/字段

> ID：13734748
> 
> 赞同：1
> 
> 时间：2012-12-05T23:56:40.750
> 
> 标签：objective-c, cocoa, nstableview

当我向表格视图添加新记录时，它显示如下：

![在此处输入图像描述](../Images/e9c4ef327fae93e2cd52295222bce66d.png)

如何使该字段准备好输入，使其突出显示并如下所示：

![在此处输入图像描述](../Images/6621ad20b233212a096609d023b06eea.png)

# c# - Windows 上文本文件的事务处理

> ID：13734750
> 
> 赞同：10
> 
> 时间：2012-12-05T23:56:46.370
> 
> 标签：c#, windows, delphi, file-io, transactions

我有多个 Windows 程序（在 Windows 2000、XP 和 7 上运行），它们处理不同格式的文本文件（csv、tsv、ini 和 xml）。在文件 IO 期间不要损坏这些文件的内容非常重要。每个文件都应该可以被多个程序同时安全地访问，并且应该能够防止系统崩溃。[这个 SO 答案](https://stackoverflow.com/a/7297970/600135)建议使用进程内数据库，所以我正在考虑使用[Microsoft Jet Database Engine](http://en.wikipedia.org/wiki/Microsoft_Jet_Database_Engine)，它能够[处理分隔文本文件](http://msdn.microsoft.com/en-us/library/ms974559.aspx)（csv、tsv）并[支持事务](http://msdn.microsoft.com/en-us/library/office/aa190107%28v=office.10%29.aspx). 我之前用过Jet，但不知道Jet事务是否真的能容忍提交阶段的意外崩溃或关机，也不知道如何处理非分隔文本文件（ini、xml）。我认为尝试手动实现完全 ACIDic 文件 IO 不是一个好主意。

在 Windows 上实现文本文件事务处理的最佳方法是什么？我必须能够在 Delphi 和 C# 中做到这一点。

提前谢谢你的帮助。

## 编辑

让我们看一个基于@SirRufo 想法的示例。暂时忘记并发，让我们专注于崩溃容错。

1.  我将文件的内容读入数据结构以修改某些字段。当我正在将修改后的数据写回文件时，系统可能会崩溃。

2.  如果我从不将数据写回原始文件，则可以避免文件损坏。这可以通过创建一个新文件来轻松实现，每次保存修改时文件名中都有一个时间戳。但这还不够：原始文件将保持不变，但新写入的文件可能已损坏。

3.  我可以通过在时间戳后面加上一个“0”字符来解决这个问题，这意味着该文件尚未经过验证。我将通过验证步骤结束写入过程：我将读取新文件，将其内容与我试图保存的内存结构进行比较，如果它们相同，则将标志更改为“1”。每次程序必须读取文件时，它都会通过比较文件名中的时间戳来选择最新版本。只能保留最新版本，旧版本可以删除。

4.  并发可以通过在读取或写入文件之前等待命名互斥体来处理。当程序获得对文件的访问权时，它必须从检查文件名列表开始。如果它想读取文件，它将读取最新版本。另一方面，只有在没有比上次读取的版本更新的版本时才能开始写入。

这是一种粗略、过于简单且效率低下的方法，但它显示了我的想法。写入文件是不安全的，但也许有像上面这样的简单技巧可以帮助避免文件损坏。

## 更新

用 Java 编写的开源解决方案：

*   原子文件事务：[article-1](http://www.onjava.com/pub/a/onjava/2001/11/07/atomic.html)，[article-2](http://www.onjava.com/pub/a/onjava/2002/02/06/atomic.html)，[源代码](http://www.onjava.com/onjava/2001/11/07/examples/atomic.zip)
*   Java 原子文件事务 (JAFT)：[项目主页](https://code.google.com/p/javaaft/)
*   XADisk：[教程](http://www.ibm.com/developerworks/opensource/library/os-xadisk/index.html)，[源代码](https://xadisk.java.net/)
*   AtomicFile：[描述](http://developer.android.com/reference/android/util/AtomicFile.html)，[源代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/util/AtomicFile.java)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T22:39:31.717

使用 NTFS 文件流怎么样？将多个命名（编号/时间戳）流写入相同的文件名。每个版本都可以存储在不同的流中，但实际上存储在同一个“文件”或一堆文件中，保留数据并提供回滚机制......当您达到确定点时，删除一些以前的流.

在新台币 4 中引入？它涵盖了所有版本。应该是防崩溃的，您将始终拥有以前的版本/流以及要恢复/回滚的原始版本。

只是深夜的想法。

[http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364404%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa364404%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T23:27:23.400

您要求的是事务性，如果不根据您的要求开发自己的 RDBMS 数据库机制，这是不可能的：

“在文件 IO 期间不要破坏这些文件的内容非常重要”

拿起一个 DBMS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:25:28.567

请参阅相关文章[Accessing a single file with multiple threads](https://stackoverflow.com/questions/1632470/accessing-a-single-file-with-multiple-threads/) 但是我的意见是使用 Raven DB 之类的数据库进行此类事务，Raven DB 支持对同一文件的并发访问以及支持将多个操作批处理到单个请求中。但是，所有内容都作为 JSON 文档保存，而不是文本文件。它确实很好地支持 .NET/C#，包括 Javascript 和 HTML，但不支持 Delphi。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T15:06:10.723

首先，这个问题与 C# 或 Delphi 无关。您必须模拟您的文件结构，就好像它是一个数据库一样。

**假设；**

*   移动文件是一个廉价的过程，并且 Op System 保证文件在移动过程中不会损坏。

*   您有一个需要处理的文件目录。(d:\filesDB*.*)

*   控制器应用程序是必须的。

**简化的工作流程；**

-初始化

1.  从操作系统获取 processID。
2.  在 d:\filesDB 中创建目录

    ```
    d:\filesDB\<processID>
    d:\filesDB\<processID>\inBox
    d:\filesDB\<processID>\outBox 
    ```

-处理每个文件

1.  选择要处理的文件。
2.  将其移动到“收件箱”目录（确保对文件的单一访问）
3.  打开文件
4.  在“outBox”中创建新文件并正确关闭
5.  删除“收件箱”目录中的文件。
6.  将位于“OutBox”中的新创建文件移回 d:\filesDB

-定稿

1.  删除创建的目录。

**控制器应用**

仅在系统启动时运行，并初始化将完成工作的应用程序。

1.  扫描 d:\filesDB 目录的子目录，
2.  对于每个子目录 2.1，如果文件存在于“inBox”中，则将其移动到 d:\filesDB 并跳过“outBox”。2.2 如果文件存在于“outBox”中，将其移动到d:\filesDB 2.3 删除整个子目录。
3.  启动每个需要启动的工作进程。

我希望这能解决你的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-15T04:33:06.623

您正在为自己创造一场噩梦，试图在您自己的代码中跨多个系统处理这些事务和状态。这就是为什么拉里·埃里森（甲骨文首席执行官）是亿万富翁，而我们大多数人都不是。如果您绝对必须使用文件，则设置支持 LOB 和 CLOB 对象的 Oracle 或其他数据库。我为我的公司将非常大的 SVG 文件存储在这样的表中，这样我们就可以在我们的系统中添加和渲染大型地图，而无需更改任何代码。可以从表中提取文件并在缓冲区中传递给您的用户，然后在完成后返回数据库。设置适当的安全和记录锁定，您的问题就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-08T19:01:42.890

好吧，你死了——除非你能放弃 XP。就这么简单。

由于 POST-XP Windows 支持 Transactional NTFS——尽管它没有暴露给 .NET（本机——你仍然可以使用它）。这允许用户在 NTFS 文件系统上回滚或提交更改，甚至可以与数据库协调使用 DTC。挺好的。XP，虽然- 没办法，不在那里。

从[任何真实世界的企业级交易 NTFS (TxF) 体验开始？](https://stackoverflow.com/questions/1425296/any-real-world-enterprise-grade-experience-with-transactional-ntfs-txf)作为首发。那里的问题列出了很多资源，让您开始了解如何去做。

请注意，这确实有性能开销 - 显然。不过，这并不是那么糟糕，除非您需要第二个事务资源，因为那里有一个非常薄的内核级事务协调器，只有在添加第二个资源时，事务才会被提升为完整的 DTC。

对于直接链接 - [http://msdn.microsoft.com/en-us/magazine/cc163388.aspx](http://msdn.microsoft.com/en-us/magazine/cc163388.aspx)有一些很好的信息。

# php - PHP preg_match()

> ID：13734762
> 
> 赞同：0
> 
> 时间：2012-12-05T23:58:20.767
> 
> 标签：php, preg-match

我通过 preg_match 进行了搜索（例如）：

```
$imp = '2347027|2347026|2347025|234818|234817|234816|234815|234813|234810|234809|234807|234806|234805|234803|234709|234706|234705|234704|234703|1876|1868|1767|1473|1441|1268|1246|1242|998|996|995|994|993|992|977|976|975|974|973|972|971|968|967|966|965|964|963|962|961|960|886|880|856|855|852|685|679|678|677|676|675|674|673|598|597|595|593|592|591|509|507|506|505|504|503|502|501|423|421|420|389|387|386|385|381|378|376|375|374|373|372|371|370|359|358|357|356|355|354|353|352|351|299|280|269|268|267|266|265|264|263|261|260|258|257|256|255|254|253|252|251|250|249|248|245|244|243|242|241|240|239|238|237|236|235|233|232|231|230|229|228|227|226|225|224|223|222|221|220|218|216|213|212|98|94|93|92|90|86|84|81|66|65|64|63|62|61|60|58|57|56|55|54|53|52|51|49|48|47|46|45|44|43|41|40|39|36|34|33|32|31|30|27|20|7|1';

preg_match("[^$imp]", '2348088170000', $matches);
echo '<pre>';
var_dump($matches); 
```

我得到：

```
array(1) {
  [0]=>
  string(2) "34"
} 
```

这不是我想要的。我实际上想匹配 $imp 中不存在的 234808 的字符串（2348088170000）。所以我尝试了这个：

```
$imp = '2347027|^2347026|^2347025|^234818|^234817|^234816|^234815|^234813|^234810|^234809|^234807|^234806|^234805|^234803|^234709|^234706|^234705|^234704|^234703|^1876|^1868|^1767|^1473|^1441|^1268|^1246|^1242|^998|^996|^995|^994|^993|^992|^977|^976|^975|^974|^973|^972|^971|^968|^967|^966|^965|^964|^963|^962|^961|^960|^886|^880|^856|^855|^852|^685|^679|^678|^677|^676|^675|^674|^673|^598|^597|^595|^593|^592|^591|^509|^507|^506|^505|^504|^503|^502|^501|^423|^421|^420|^389|^387|^386|^385|^381|^378|^376|^375|^374|^373|^372|^371|^370|^359|^358|^357|^356|^355|^354|^353|^352|^351|^299|^280|^269|^268|^267|^266|^265|^264|^263|^261|^260|^258|^257|^256|^255|^254|^253|^252|^251|^250|^249|^248|^245|^244|^243|^242|^241|^240|^239|^238|^237|^236|^235|^233|^232|^231|^230|^229|^228|^227|^226|^225|^224|^223|^222|^221|^220|^218|^216|^213|^212|^98|^94|^93|^92|^90|^86|^84|^81|^66|^65|^64|^63|^62|^61|^60|^58|^57|^56|^55|^54|^53|^52|^51|^49|^48|^47|^46|^45|^44|^43|^41|^40|^39|^36|^34|^33|^32|^31|^30|^27|^20|^7|^1';

preg_match("[^$imp]", '2348088170000', $matches);
echo '<pre>';
var_dump($matches); 
```

我得到了：

```
array(0) {
} 
```

这就是我想要的。我想问一下后者 $imp 是否有效并且不会提示任何错误。对 RE 来说并不是很完美。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:02:25.987

您需要删除通话中的克拉：

```
preg_match("[^$imp]", '2348088170000', $matches); 
```

至

```
preg_match("[$imp]", '2348088170000', $matches); 
```

# drupal - Views有办法做ifft吗？

> ID：13734767
> 
> 赞同：0
> 
> 时间：2012-12-05T23:58:59.147
> 
> 标签：drupal, drupal-views

在我的视图显示中，我想将节点->标题链接到节点->路径，除非用户在可选的 CCK 字段中输入了 URL。在这种情况下，我希望 node->title 链接到 URL。

如果答案为空，我想使用预处理函数将 CCK 字段的值设置为 node->path，但我使用的是使用字段的 Views Slideshow。据我了解，预处理功能仅适用于 .tpl 文件。

对实现此功能有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:32:55.177

答案是使用字段模板而不是预处理器。这是我的字段模板的样子：

```
<?php
if (empty($output)) {
  $node = node_load($row->nid);
  $output = base_path() . $node->path;
}
print $output;
?> 
```

# sql - 计数、排序并选择前 5 个

> ID：13734769
> 
> 赞同：7
> 
> 时间：2012-12-05T23:59:20.260
> 
> 标签：sql, sql-server, sql-server-2012

**SQL Server 2012**

我们有一张桌子，像这样：

```
ticket, type
------------------
1234, hardware
1543, software
8859, network
5832, hardware
4900, hardware
8403, software
7859, network
4332, telephone
8721, database 
```

我们的目标是计算属于每种类型的所有票证（因此在这种情况下，结果应该是 3 个硬件、2 个软件、2 个网络、1 个电话和 1 个数据库票证），将它们按顺序排列并选择前 5 个结果行。

我们正在尝试确定前 5 种“流行”或最常见的门票类型（以及有多少）。

我已经记下了计数部分，但不知道如何继续订购 desc 并选择前 5 个。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T00:06:55.860

在 SQL Server 中，您可以使用`TOP`选择一定数量的行以及 order by 来获取正确的记录：

```
select top 5 type, count(*) Total
from yourtable
group by type
order by total desc 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/6803e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:05:34.980

```
select * from (
    select type, count(*) 
    from table
    group by type
    order by 2 desc
)
where rownum <=5 
```

# c# - 从 sql 数据库生成站点地图 XML 文件？

> ID：13734771
> 
> 赞同：1
> 
> 时间：2012-12-05T23:59:24.183
> 
> 标签：c#, sql, xml

您好我想从我的数据库中生成站点地图 xml。到目前为止，从我的研究中我发现

1.用c#代码生成它并将数据集写入xml格式

[http://www.c-sharpcorner.com/blogs/8115/generating-xml-file-from-sql-database-using-c-sharp.aspx](http://www.c-sharpcorner.com/blogs/8115/generating-xml-file-from-sql-database-using-c-sharp.aspx)

1.  第二个过程是直接将数据从数据库写入xml格式。

你们能告诉我哪种方法最好，而且我的数据库很大。我希望我的 xml 看起来像这样

```
<url>
<location>http://xxx.com/default.aspx?page=PageID</location>
<title>xxxxxxxx</title>
<lastmodified>01-01-1900</lastmodified>
</url> 
```

PageID、页面标题和日期将来自数据库表。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T00:58:30.367

您没有提供有关您的数据库访问策略或技术的信息，因此，我假设您正在使用某种支持 Linq 的 ORM。如果这是正确的，您可以按以下方式进行：

```
var siteMapBody = 
from page in DataContext.Pages
        select new XElement(XName.Get("url"),
               new XElement(XName.Get("location"), page.Url),
               new XElement(XName.Get("title"), page.Title),
               new XElement(XName.Get("lastmodified"), page.LastModified));

var siteMapDocument = new XDocument(siteMapBody);
var siteMap = siteMapDocument.ToString(); 
```

祝你好运！

# cucumber - Cucumber 功能因“ChildProcess::TimeoutError: 90 秒后仍处于活动状态”而超时

> ID：13734773
> 
> 赞同：1
> 
> 时间：2012-12-05T23:59:39.147
> 
> 标签：cucumber

我的黄瓜套件中的某些功能因“ChildProcess::TimeoutError: process still alive after 90 seconds”而失败。它们看似彼此无关，但所有失败的功能都在顶部列出了“Tag：@@javascript”。我不确定为什么有两个@符号。

# java - 验证视频编码是 H.264

> ID：13734775
> 
> 赞同：1
> 
> 时间：2012-12-05T23:59:57.350
> 
> 标签：java, h.264, aac, xuggle, xuggler

我需要验证视频文件是（在 Java 中）：

*   视频采用 H.264 编码
*   音频是 AAC 编码的

我研究过 JMF 和 Xuggle。

Xuggle 使加载和解码文件并将其转换为另一种格式变得更加容易，但我还无法弄清楚如何确定我已经加载的文件的编码。

所以我想知道 Xuggle 是否能够简单地返回文件具有的视频和音频编码类型，还是我需要读取文件的位来自己确定这一点？

如果我需要自己确定这一点，有人可以指点我一些关于 H.264 格式的文档吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:35:29.493

所以我查看了 Xuggler 的解码演示并找到了我的答案，因此对于将来寻找类似解决方案的任何人来说，这里是我编写的代码：

* * *

```
 // create a Xuggler container object
    IContainer container = IContainer.make();
    if(container.open(file.getPath(),IContainer.Type.READ,null) < 0) {
        return false;
    }

    // query how many streams the call to open found
    boolean isH264 = false;
    boolean isAAC = false;

    int numStreams = container.getNumStreams();
    for(int i = 0; i < numStreams; i++)
    {
      // find the stream object
      IStream stream = container.getStream(i);
      // get the pre-configured decoder that can decode this stream;
      IStreamCoder coder = stream.getStreamCoder();

      if (coder.getCodecID() == ID.CODEC_ID_H264)  {
          isH264 = true;
      }
      if (coder.getCodecID() == ID.CODEC_ID_AAC)  {
          isAAC = true;
      }
    }

    if (container !=null)
    {
      container.close();
      container = null;
    }
    return isH264 && isAAC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T19:08:57.930

这是 JCodec ( [http://jcodec.org](http://jcodec.org) ) 的几行代码：

```
MovieBox movie = MP4Util.parseMovie(new File("path to file"));
Assert.assertEquals(movie.getVideoTrack().getSampleEntries()[0].getFourcc(), "avc1");
for (TrakBox trakBox : movie.getAudioTracks()) {
    Assert.assertEquals(trakBox.getSampleEntries()[0].getFourcc(), "mp4a");
} 
```

# android - Android NFC P2P 回复消息

> ID：13734778
> 
> 赞同：1
> 
> 时间：2012-12-06T00:00:08.830
> 
> 标签：android, nfc, android-beam, nfc-p2p

我正在设计一个简单的应用程序，试图在 android 上利用 NFC。

我想向设备发送消息，并让 RECEIVER 向 SENDER 发送响应消息。这需要在不需要接收器自愿“触摸发送”的情况下发生

对此有什么想法吗？

# java - Mybatis - 未映射的继承属性

> ID：13734779
> 
> 赞同：8
> 
> 时间：2012-12-06T00:00:41.417
> 
> 标签：java, generics, mybatis

我有两个类，一个继承另一个。我正在尝试将我的 resultSet 映射到子类，而 Mybatis 忽略了超类上的属性（Setters 也在超类上）

代码如下：

```
public class CocTreeNode extends CocBean implements TreeNode<CocTreeNode> {

  private String level1, level2;

  public void setLevel1(String level1){...}
  public void setLevel2(String level2){...}

  public String getLevel1(){...}
  public String getLevel1(){...}

}

public class CocBean {

  protected String name;
  protected Double volume;

  public void setName(String name){...}
  public void setVolume(Double volume){...}

  public String getName(){...}
  public Double getVolume(){...}

} 
```

我的结果图是 -

```
<resultMap id="simpleRow" type="CocTreeNode">
  <id property="level1" column="LEVEL1"/>
  <id property="level2" column="LEVEL2"/>
  <result property="name" column="NAME"/>
  <result property="volume" column="VOLUME"/>
</resultMap> 
```

生成的 CocTreeNode 对象填充有“level1”和“level2”属性，但没有填充“name”和“volume”。

我尝试过使用扩展，但这没有任何区别。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T15:17:18.137

您必须在您的 simpleRow 结果图中使用*extends*来扩展 CocBean 的结果图中的属性：

```
<resultMap id="CocBeanResult" type="CocBean">
    <result property="name" column="NAME"/>
    <result property="volume" column="VOLUME"/>
</resultMap>

<resultMap id="simpleRow" type="CocTreeNode" extends="CocBeanResult">
    <result property="level1" column="LEVEL1"/>
    <result property="level2" column="LEVEL2"/>
</resultMap> 
```

# javascript - 使用 JavaScript 替换 html 标记内的文本（不在两者之间）

> ID：13734780
> 
> 赞同：1
> 
> 时间：2012-12-06T00:00:42.947
> 
> 标签：javascript

我看到很多关于替换标签之间的文本或替换用 ID 标识的标签的参考，但我的任务完全不同，因为我需要替换标签本身的一部分。例如，我想改变...

```
<body etc> 
```

以至于变成...

```
<body somestring etc> 
```

更改需要使用 JavaScript 在浏览器中执行，即：在 CMS（如 Wordpress）完成后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T00:06:50.400

看起来您需要向 DOM 元素添加新属性：

```
document.getElementsByTagName("html")[0].setAttribute("id", "something"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T00:16:32.373

`document['getElementsByTagName']('html')[0]['setAttribute']('attr', 'value');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T00:06:57.593

如果您使用的是 jQuery，您可以使用如下行来完成此操作：

```
$("html").attr({foo:"bar", baz:"bing"}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T00:13:19.037

如果你运行一个 wordpress 网站，你可能已经在使用 jquery。使用 JQuery，这很容易

```
$('html').attr('id', 'bob');
//just for testing
alert($('html').attr('id')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T01:07:05.030

如果要设置标准属性的值，只需使用 DOM 属性：

```
document.getElementsByTagName("html")[0].id = 'foo'; 
```

或更简单地说：

```
document.documentElement.id = 'foo'; 
```

设置非标准属性或属性不是一个好主意，[`data-*`](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)而是使用属性。

# html - 防止重复提交表单。

> ID：13734783
> 
> 赞同：0
> 
> 时间：2012-12-06T00:00:56.417
> 
> 标签：html, forms, jsp, submit, page-refresh

我的 Eclipse 的 jsp 文件中有一个表单。

表单获取值并将它们插入到我的数据库中。

我输入了值并按下了提交按钮，因此这些值被插入到我的数据库中。

问题是：如果我刷新页面，以前的值会再次插入到我的数据库中，尽管输入是空的。

```
String name = request.getParameter("name"); 
```

所以刷新后，名称会得到最后插入的值。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:07:28.933

您应该对执行操作的 HTTP 请求使用 POST 方法，对只检索数据的请求使用 GET 方法。通过重定向到将使用 GET 请求的资源来响应 POST 请求。这样，表格就不会被重新提交。

# php - 动态添加字段到 http_build_query

> ID：13734786
> 
> 赞同：0
> 
> 时间：2012-12-06T00:01:02.627
> 
> 标签：php, arrays, curl, dynamically-generated

我已经构建了一个我想要测试的 API。因此，我正在构建一个简单的客户端来尝试不同的功能（CRUD）。下面是更新生产者的功能，效果很好。但是，我还希望能够更新生产者的*某些部分*，例如地址 (/producers/8?method=put&address=milkyway)。

数组生产者总是包含相同的元素（名称、地址、邮政编码等），但我只想用数组中包含任何内容的元素来更新生产者。我的意思是，例如，如果数组中的*name*元素为空，则 name 不应包含在 *http_build_query* 中。如果只有*name*元素包含任何内容，那么只有 name 应该被更新。

所以，假设数组（除了*id*当然是强制性的）包含地址。如何仅将其动态添加到 *http_build_query* ？

提前致谢！

```
public function UpdateProducer($producer) {

    $url = 'http://localhost/webbteknik2/Labb2/api/v1/producers/ . $producer['id'] . '?method=put';

    $data = http_build_query(array(
        'name' => $producer['name'],
        'address' => $producer['address'],
        'zipcode' => $producer['zipcode'],
        'town' => $producer['town'],
        'url' => $producer['url'],
        'imgurl' => $producer['imgurl'],
        'latitude' => $producer['latitude'],
        'longitude' => $producer['longitude'],
    ));

    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    ...
    the rest of the curl code
} 
```

注意：我知道这在很多方面都是糟糕的编码，但正如我所说的，我只想尽快通过客户端测试 CRUD 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:09:10.200

用于`array_filter`删除空元素....

```
$params = array(
    'name' => $producer['name'],
    'address' => $producer['address'],
    'zipcode' => $producer['zipcode'],
    'town' => $producer['town'],
    'url' => $producer['url'],
    'imgurl' => $producer['imgurl'],
    'latitude' => $producer['latitude'],
    'longitude' => $producer['longitude'],
);

$data = http_build_query(array_filter($params, 'is_null')); 
```

# android - Mapview 上的 Longpress 返回位于实际长按区域下方的 GeoPoint

> ID：13734791
> 
> 赞同：0
> 
> 时间：2012-12-06T00:01:42.557
> 
> 标签：android, android-mapview, long-press, geopoints

似乎谷歌地图视图上的长按会在实际长按的区域下方返回一个 GeoPoint。

例如，如果我按下 (x,y)：

Geopoint longpressLocation.getLatitudeE6().getLatitudeE6() = x Geopoint longpressLocation.getLatitudeE6().getLongtitudeE6() = y + z 其中 z 在地图上约为 1 厘米。

有没有人遇到过这个？

代码：

```
 private void setOnLongPress() {
    mMapView.setOnLongpressListener(new LongPressableMapView.OnLongpressListener() {
        public void onLongpress(final MapView view, final GeoPoint longpressLocation) {
            runOnUiThread(new Runnable() 
            {
                public void run() 
                {
                    // Insert your longpress action here
                    Log.e("lat", String.valueOf(longpressLocation.getLatitudeE6()));
                    Log.e("lng", String.valueOf(longpressLocation.getLongitudeE6()));
                }
            });
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:11:34.337

幸运的是，谷歌在谷歌地图 API2 中修复了它

# mysql - 为什么当我向表中添加数据时，包含我的表数据的 MySQL 文件的大小不会改变？

> ID：13734794
> 
> 赞同：1
> 
> 时间：2012-12-06T00:01:53.420
> 
> 标签：mysql, windows, storage, internals

当我向表中添加数据时，MySQL 存储表数据的文件似乎没有增长。他们似乎从 9k 开始并留在那里。

这个问题的上下文是我想在我最快的驱动器（不是安装 MySQL 的驱动器）上创建一个数据库。我通过设置 datadir 变量弄清楚了如何做到这一点，这似乎奏效了：当我创建一个新数据库时，我在 datadir 中看到一个以数据库命名的文件夹，当我在该数据库中创建一个表时，该文件夹得到一个名为 table.frm 的新文件。

.frm 文件不是 MySQL 存储表数据的地方吗？如果“否”，那么数据存储在哪里？如果“是”，那么当我向表中添加数百万条记录时，为什么文件大小没有增长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:05:03.987

.frm 是表定义文件，查找 .myd（数据）和 .myi（索引）文件

# apache - POI SS 用户模型性能

> ID：13734796
> 
> 赞同：2
> 
> 时间：2012-12-06T00:02:22.440
> 
> 标签：apache, apache-poi, xssf, hssf

使用 SS UserModel 解析 xls 文件时，与 HSSF 相比，性能有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:53:45.127

对于 .xls 文件，HSSF UserModel 和 SS UserModel 之间没有性能差异。那是因为 HSSF 的 SS UserModel 在很大程度上只是围绕现有代码的一些非常聪明的改进接口。

.xlsx 文件的性能（直接调用 XSSF 或透明地通过 SS）比 HSSF 更慢且更占用内存。.xls 文件格式是二进制文件格式，.xlsx 是基于 XML 的文件格式（XML 文件的 zip）。编写处理 XML 的代码更简单，这是一件好事！但是，xml解析的开销意味着需要更多的内存，而且速度稍慢。

# csrf - CSRF、javascript 和 jquery

> ID：13734799
> 
> 赞同：1
> 
> 时间：2012-12-06T00:02:34.203
> 
> 标签：csrf, csrf-protection

CSRF 攻击是否有可能读取受害者浏览器上已经存在的全局 JavaScript 变量的内容？

我的计划是让应用程序存储一个 CSRFToken 值，该值在用户成功登录时存储在会话中，然后我将其保存在一个全局可访问的 JavaScript 变量中以供应用程序使用。我将使用 jQuery 自动将此值附加到应用程序中的任何表单发布操作。在服务器端，我将检查值是否匹配，如果未找到匹配项，则完成操作或阻止它。

我的理解是，可以通过多种方法部署 CSRF 攻击，但它们都需要将受害者重定向到 3rd 方站点以执行恶意代码。例如，第 3 方站点可以尝试伪造表单请求，但除非他们知道 CSRFToken 的内容，否则该操作将失败。除非当然..他们可以以某种方式得到它。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T10:48:10.977

[根据定义， CSRF 攻击](https://en.wikipedia.org/wiki/Cross-site_request_forgery)不需要浏览器中的任何数据在 3rd 方站点（即攻击者）上可见。因此，CSRF 攻击不会（或不能）读取浏览器中的任何状态（cookie 或 javascript 变量）。

# mysql - 加速 - 一页上的多个 MySQL 查询

> ID：13734800
> 
> 赞同：0
> 
> 时间：2012-12-06T00:02:40.527
> 
> 标签：mysql, optimization

所以我有一个房地产网站。我有一个页面运行大约 5 个查询来构建一个统计页面。我想知道是否有一种方法可以加快速度或优化或组合查询以使其运行得更快。现在运行该页面最多需要 5 秒。

询问：

```
SELECT   COUNT(`listing_num`) as `count`,
         AVG(`price`),
         AVG(`square_feet`),
         AVG(`bedroom_total`),
         AVG(`bathroom_total`),
         MIN(`price`),
         MAX(`price`),
         MIN(`square_feet`),
         MAX(`square_feet`),
         MIN(`bathroom_total`),
         MAX(`bathroom_total`),
         MIN(`bedroom_total`),
         MAX(`bedroom_total`),
         MIN(`psf`),
         MAX(`psf`),
         AVG(`psf`)
FROM     `Res_Active2`
WHERE    `status` != 'S' 
```

因此，我在页面上运行此查询大约 6 次不同的时间，每次更改 WHERE 子句，以便我可以显示已售物业、活动物业、合同下物业等的统计信息。

这样做的正确方法和快速方法是什么？我可以使用缓存，结合sql，什么？我需要加快这个页面的速度。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:42:50.197

尝试设置 mysql 查询缓存。它只会执行一次并在所有其他查询中重用结果。要启用 mysql 缓存，请参阅[mysql 缓存](http://www.cyberciti.biz/tips/enable-the-query-cache-in-mysql-to-improve-performance.html)

我很确定你只要在你的 /etc/my.conf 中添加就足够了

```
query_cache_size=30M 
```

如果这没有帮助，您可以创建一个特殊的表来保存该查询的结果，并通过外部脚本每 X 分钟更新一次该结果。

# javascript - webGL忽略背面？

> ID：13734801
> 
> 赞同：1
> 
> 时间：2012-12-06T00:02:45.670
> 
> 标签：javascript, graphics, webgl

我用 webGL 给自己画了一个漂亮的形状，但是当我使用线条选项时，我也从后面得到三角形，我怎么能不画背面呢？当绘制这么多三角形时，形状真的很难理解:(

我正在使用

```
 gl.drawArrays(gl.TRIANGLES, 0, myBuffer.items);
    gl.drawArrays(gl.LINE_STRIP, 0, myBuffer.items); 
```

它看起来很可怕，所以我只是使用

```
 gl.drawArrays(gl.LINE_STRIP, 0, triangleVertexPositionBuffer.numItems); 
```

但看起来还是很难理解，

任何帮助都会很棒:)

帆布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:17:17.570

没关系，我解决了它，我所做的是创建一小段代码来为每个三角形生成一个奇怪的颜色，就像这样

```
 for(i=1;i<shapeFaces.length;i++)
    {
        colors[colors.length] = new Array((i*0.02), (i*0.02), (i*0.02), 1.0 );
    } 
```

所以现在所有的脸都被填满了，但我实际上可以看到我的形状:)，很抱歉打扰，但为帮助欢呼

# struts2 - 无法启动 struts2-archetype-starter:2.3.7

> ID：13734804
> 
> 赞同：0
> 
> 时间：2012-12-06T00:03:24.830
> 
> 标签：struts2, maven-3

这是我从生成的列表中选择原型后得到的错误：

![错误图像](../Images/f9c24066362b3a716724d1ac6078a967.png)

我已经阅读了它显示的网站的内容，但这并没有帮助。这里列出的原型是过时的还是什么？基于这个错误，我是否必须使用 Eclipse 创建一个新的原型才能获得 struts2-archetype-starter？

谢谢

PS 感谢大家耐心等待我理解并让 Struts 2 正常工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:51:33.603

当你遇到问题（你试图执行哪个目标）时，你没有提到它工作得很好。

```
313: remote -> org.apache.struts:struts2-archetype-blank (-)
314: remote -> org.apache.struts:struts2-archetype-convention
315: remote -> org.apache.struts:struts2-archetype-dbportlet (
316: remote -> org.apache.struts:struts2-archetype-plugin (-)
317: remote -> org.apache.struts:struts2-archetype-portlet (-)
318: remote -> org.apache.struts:struts2-archetype-starter (-) 
```

选择 313 而不是 318。

# jquery - 基本的 jQuery 点击处理程序在 Chrome 中不起作用

> ID：13734809
> 
> 赞同：1
> 
> 时间：2012-12-06T00:04:09.703
> 
> 标签：jquery, google-chrome, click, handler

jQuery 中的单击处理程序有一个奇怪的问题。我写了一个用户脚本，它在 Firefox 中运行良好。（Greasemonkey 插件）起初我认为它在 chrome 中也可以正常运行（因为脚本加载正常并且我在控制台中没有收到任何错误）但事实证明我的按钮都不起作用。我正在为 chrome 使用 Tampermonkey 插件。

这是我用于处理程序的代码：

```
 $(function(){
      function count_send_at(event) {
          //...
          return false;
      }
      $('#count_send_at_btn').click(count_send_at);
  }); 
```

`count_send_at()`根本不会被调用（通过警报测试）。

我在互联网上找不到任何解决方案，也许你可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:09:22.630

[http://jsfiddle.net/EpnXh/](http://jsfiddle.net/EpnXh/)

```
$(document).ready(function () {
     function count_send_at(event) {
     //...
        return false;
     }
     $('#count_send_at_btn').click(count_send_at);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T00:17:41.957

我尝试了类似的东西并得到了相同的行为；它抱怨“$”未定义，这意味着用户脚本无权访问 jQuery 对象。

这是修复它的方法：

```
function GM_wait() {
    // if chrome, of course. this might need to be handled differently in firefox...
    if(typeof unsafeWindow.jQuery == 'undefined') { 
        window.setTimeout(GM_wait,100); 
    } else { 
        $ = unsafeWindow.jQuery; 
    }
}

(function(){
    GM_wait();

    if ( $ ) {
        alert('got it!');
    }
})(); 
```

来自：http : [//forum.imerx.net/viewtopic.php? f=17&t=127](http://forum.imerx.net/viewtopic.php?f=17&t=127)

# jquery - jquery/css 将列表更改为下拉列表

> ID：13734810
> 
> 赞同：0
> 
> 时间：2012-12-06T00:04:19.943
> 
> 标签：jquery, css, list, drop-down-menu

这是代码：

```
<div id="TBRefineHead">
<h3>By&nbsp;Location</h3>
<ul>
<li><span class="refineDet"><a href="Search.aspx?ModuleID=643&amp;keywords=test&amp;multiSite=False&amp;Tax=41">Australia wide&nbsp;(1)</a></span></li>
<li><span class="refineDet"><a href="Search.aspx?    ModuleID=643&amp;keywords=test&amp;multiSite=False&amp;Tax=27">Location&nbsp;(1)</a></span></li>
</ul>
<h3>By&nbsp;Subject Matter</h3>
<ul>
<li><span class="refineDet"><a href="Search.aspx?ModuleID=643&amp;keywords=test&amp;multiSite=False&amp;Tax=17">Air Quality&nbsp;(1)</a></span></li>
</ul>
</div> 
```

有没有办法将它们变成两个下拉选择列表？

```
<select>
<option></option>
<option></option>
<option></option>
<option></option>
<option></option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:20:21.263

使用 CSS。查看[本](http://line25.com/tutorials/how-to-create-a-pure-css-dropdown-menu)教程以制作下拉菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:40:53.047

参考this，可以从中得到一些想法 [如何使用jQuery向DropDownList添加选项？](https://stackoverflow.com/questions/317095/how-do-i-add-options-to-a-dropdownlist-using-jquery)

# c# - 表达 > 适用于实体框架的嵌套

> ID：13734811
> 
> 赞同：6
> 
> 时间：2012-12-06T00:04:22.270
> 
> 标签：c#, linq, entity-framework, lambda

我已经阅读了大约 30 个 Stack Overflow 问题和大约 20 个博客，但找不到我的答案。也就是说，我确信我需要的答案就在那里，所以如果你知道，请指出（请注意最后一段/句子关于不符合我要求的答案）。谢谢！

我正在持久化具有类似于以下形状的类的实例：

```
public class Data {
    public int Id { get; set; }
}

public class Container {
    public int Id { get; set; }
    public Data Data { get; set; }
} 
```

目前，编写查询以通过抽象层查找容器，该抽象层需要接受容器并返回 bool（谓词）的 Lambda 表达式。即使 Entity Framework 5 是选择的 ORM，它也不会接受 IQueryable。

我的任务是呈现一个基于接受数据类型的 Lambda 表达式的 API 界面。我无法更改抽象层（我必须传递一个接受容器的谓词），所以我试图将收到的表达式转换为：

```
Expression<Func<Data , bool>>
to:
Expression<Func<Container , bool>> 
```

我在我的存储库类中添加了一个额外的方法，如下所示：

```
public Container Find( Expression<Func<Data , bool>> predicate ) {

    IEnumerable<Container> result = QueryStrategy.Fetch( c => predicate.Compile().Invoke( c.Data ) );

    return result.FirstOrDefault();

} 
```

这补充了现有的 Find 方法：

```
public Container Find( Expression<Func<Container , bool>> predicate ) {

    IEnumerable<Container> result = QueryStrategy.Fetch( predicate );

    return result.FirstOrDefault();

} 
```

当使用前一种方法时，它会产生以下异常：

> LINQ to Entities 无法识别方法 'Boolean Invoke(Container.Data)' 方法，并且此方法无法转换为存储表达式。

我已经用 Expression 类尝试了各种各样的东西，我只是看不到映射的方法：

```
Expression<Func<Data , bool>>
to:
Expression<Func<Container , bool>> 
```

不使用 Entity Framework 不支持的 Invoke （但在内存中可枚举的数据中可以正常工作）。

任何人都可以帮助我使用表达式来实现上述场景吗？

我知道我也许可以使用 LinqKit 库来解决这个问题，但我真的很想在不引入第三方库的情况下解决这个问题。

更新：为了提出一个简化的问题，我已经暗示（通过最初在代码示例中使用 DbContext）代码可以访问 IQueryable 和/或适合使用 LinqKit 的 AsExpandable()。实际上情况并非如此——存储库类不允许使用 IQueryable 或任何供应商特定的扩展。我已经修改了上面的例子，希望这能让事情变得更清楚。

***此问题现已解决***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:03:32.823

经过 4 小时的阅读/修改 Expressions（惊人的技术）后，我设法解决了这个问题。

我把这个类放在一起（它不是抛光或最终的，但显示了它是如何实现的）：

```
class ParameterRewriter<TTarget , TSource> : ExpressionVisitor {

    private ParameterExpression Source;
    private MemberExpression Target;

    public Expression<Func<TTarget , bool>> Rewrite( Expression<Func<TSource , bool>> predicate , Expression<Func<TTarget , TSource>> propertyNameExpression ) {

        var parameter = Expression.Parameter( typeof( TTarget ) );

        var propertyName = ( propertyNameExpression.Body as MemberExpression ).Member.Name;

        Source = predicate.Parameters.Single();
        Target = Expression.PropertyOrField( parameter , propertyName );

        var body = Visit( predicate.Body );

        return Expression.Lambda<Func<TTarget , bool>>(
            body ,
            parameter
        );

    }

    protected override Expression VisitParameter( ParameterExpression node ) {

        if ( node == Source ) {
            return Target;
        }

        return base.VisitParameter( node );

    }

} 
```

它可以像这样使用：

```
var parameterRewriter = new ParameterRewriter<Container , Data>();
Expression<Func<Data , bool>> dataPredicate = d => ( d.Id == 1 );
var containerPredicate = parameterRewriter.Rewrite( dataPredicate , c => c.Data ); 
```

理论上，应该能够通过检查 propertyNameExpression 来遍历更深层次的关系，但我今天已经受够了。

我现在可以看到 SQL Entity Framework 为每种类型的查询生成的都是相同的：

=========================

```
Expression<Func<Container , bool>> p = c => c.Data.Id == 1

SELECT
[Extent1].[Id] AS [Id],
[Extent1].[Data_Id] AS [Data_Id]
FROM [dbo].[Container] AS [Extent1]
WHERE 1 = [Extent1].[Data_Id] 
```

=========================

```
Expression<Func<Data , bool>> p = d => d.Id == 1

SELECT
[Extent1].[Id] AS [Id],
[Extent1].[Data_Id] AS [Data_Id]
FROM [dbo].[Container] AS [Extent1]
WHERE 1 = [Extent1].[Data_Id] 
```

=========================

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:21:31.950

加入按预测数据过滤的客户，然后从结果中选择客户

```
public Container Find(Expression<Func<Data, bool>> predicate ) 
{
    return MyDbContext.Containers
                      .Join(MyDbContext.Containers.Select(c => c.Data)
                                                  .Where(predicate), 
                            c => c.Data.Id,
                            d => d.Id,
                            (c, d) => c)
                      .FirstOrDefault();
} 
```

# web-services - Biztalk 和调用 Web 服务的最佳方式

> ID：13734813
> 
> 赞同：3
> 
> 时间：2012-12-06T00:04:32.220
> 
> 标签：web-services, biztalk, biztalk-2010

我正在编写一个 biztalk 编排，它需要调用一个 Web 服务，可能是多个 Web 服务，并且可能不止一次。我看到了两个选择；第一，在单独的代码项目中使用 wsdl，并从表达式形状的代码中调用 Web 服务，第二，从 Biz 中使用它，获取模式等，并通过请求/响应端口调用。这里的最佳做法是什么？一方面，如果更新了 wsdl，那么更新代码将比更新模式和端口更容易，而且为多个 Web 服务调用构建足够多的端口似乎有很多混乱和工作。另一方面，您可以在端口级别进行的所有调整（重试一次）使得调用 Web 服务变得健壮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:16:11.237

[另请参阅此处](https://stackoverflow.com/questions/12927376/calling-a-web-wcf-service-from-orchestration-adding-a-generated-item-vs-adding/12934313#12934313)的此问题，其中讨论了第三个选项，即`add service reference`在 BizTalk 中使用作为导入 XSD 的替代方法。

IMO，您将通过使用 .NET 代理处理集成来击败使用 BizTalk 的点。例如：

1.  您正在对协议 (WCF) 进行硬编码，现在需要将请求和响应消息编组到/来自您的自定义代码。使用发送端口，可以在部署时配置任何请求-响应机制 - 特别适用于单元和集成测试。
2.  您将失去 BizTalk 消息传递机制的所有好处，例如重试、备份传输、恢复挂起的消息、不同端口的不同映射以及可以说的整个 pub sub 功能（例如，如果多个侦听器想要收听来自被调用 Web 服务的响应？）
3.  您将在哪里存储 WCF`serviceModel`配置设置，例如端点等？即您失去了绑定文件的灵活性。
    *   等等

**因此，TL；DR 始终在 BizTalk 中使用 WCF 适配器**

但是，也就是说，我同意如果使用的服务发生变化，更新生成的项目可能会很混乱。FWIW，我们减轻了其中的一些，如下所示：

*   始终创建一个单独的空文件夹，在其中导入所有导入的生成工件。
*   保留所有生成的项目“原样”，即不要试图移动虚拟 .odx 或删除它（因为它具有预配置的端口类型）

不幸的是，这留下了仍然需要手动应用的以下操作：

*   请记住将端口类型的可见性更改为`public`工件是否在您的编排的单独程序集中
*   需要重新应用导入模式上的提升和区分属性（例如，记住在任何更改后记录屏幕截图）。`<xs:annotation>`可能这可以通过在 schma 部分中保存和重新粘贴来简化或自动化。
*   如果您在 WCF 服务中使用消息协定，并且在多个应用程序中重复使用相同的引用消息，您将需要手动删除由添加生成项创建的重复项，然后重新引用现有架构。（例如，我们对所有 BizTalk 调用都有一个标准的“响应”消息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:20:07.970

有趣的是，您可以同时拥有这两种情况。看看[这个](http://blogs.digitaldeposit.net/saravana/post.aspx?id=f8545931-dac2-4f9e-8844-1ed1d7ea129e)萨拉瓦纳库马尔！

它使用直通接收并使用发送端口上的 dll 使用 Web 服务，而无需经历创建模式和 Web 端口的痛苦。

这提供了 Biztalk 的所有功能（路由响应、发送端口配置等），并且仍然可以灵活地更改架构而无需大惊小怪。

# caching - 我的 FormIt 钩子被缓存了，它在第一次之后的每次运行都搞砸了

> ID：13734820
> 
> 赞同：2
> 
> 时间：2012-12-06T00:05:29.820
> 
> 标签：caching, modx, modx-revolution, formit

我将以下代码段连接到 FormIt 电子邮件表单：

```
$tv = "taken" . (int)$hook->getValue('datetime');
$docID = $modx->resource->get('id'); //get the page id
$page = $modx->getObject('modResource', $docID);
$current = (int)$page->getTVValue($tv);
if (!$page->setTVValue($tv, $current + 1)) {
    $modx->log(xPDO::LOG_LEVEL_ERROR, 'There was a problem saving your TV...');
}
$modx->setPlaceholder('successMessage','<h2 class="success">'.$current.'</h2>');
return true;` 
```

它每次运行时都会增加一个模板变量并输出一条成功消息（尽管现在我正在使用该功能来输出调试消息）。问题是，它只在保存片段后增加电视一次，从而刷新缓存。通常我会通过附加来调用没有缓存的片段！以它的名字命名，但这似乎不适用于 FormIt 钩子。我怎样才能让这个代码工作？现在，我将整个页面作为不可缓存的方式运行，但这显然不是最理想的。也许，有一种方法可以以未缓存的方式挂钩片段？将片段中的片段调用为未缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T11:47:23.077

在保存 $tv 对象之前尝试添加它

$tv->_processed = false;

它派生自它扩展的 modElement 的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:55:49.283

我正在做类似的事情 - 但要计算页面加载，在我看来你错过了最后一点： $current->save();

```
<?php
$docID = $modx->resource->get('id');

$tvIdm = 32;
$tvm = $modx->getObject('modTemplateVar',$tvIdm );
$tvm->setValue($docID, $tvm->getValue($docID) + 1 );
$tvm->save(); 
```

# android - Android：将从 XML 布局膨胀的视图添加到尚未定义任何宽度的视图组

> ID：13734824
> 
> 赞同：1
> 
> 时间：2012-12-06T00:05:52.927
> 
> 标签：android, xml, layout, layout-inflater, viewgroup

我的自定义视图组类存在布局问题。

我在构造函数中调用 init()。在我的 init() 函数中，我从一个 xml 文件中扩充了视图组布局，该文件包含一个 LinearLayout，我在其中添加了几个其他视图。

我正在使用垫片（查看 layout_width="0" 和 layout_weight="1"）来平均分配项目。

问题出在这里：当我添加孩子时，布局仍然没有定义任何宽度。所以垫片的大小都是 0，实际上不会平均放置“line_dot”项目。我怎样才能以某种方式更新它们的大小？

```
public class SliderSwitch extends FrameLayout {

...
    public SliderSwitch(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    private void init(Context context)
    {
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.slider_switch,this);

        sliderLayout = (LinearLayout) findViewById(R.id.sliderLayout);
        labelLayout = (LinearLayout) findViewById(R.id.labelLayout);

        // add one spacer
        View spacer = (View) inflate(context,R.layout.spacer, null);
        sliderLayout.addView(spacer);

        // setup the view depending on how many elements there are
        for (int i=1;i<numberOfElements-1;i++) {

            ImageView lineDot = (ImageView) inflater.inflate(R.layout.slider_switch_line_dot, null);
            sliderLayout.addView(lineDot);

            View spacer = (View) inflate(context,R.layout.spacer, null);
            sliderLayout.addView(spacer);
        }

    }
... 
} 
```

这是垫片的 xml 文件：

```
<View
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:layout_weight="1" /> 
```

这是我的视图组布局

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:orientation="vertical">

    <RelativeLayout
        android:id="@+id/relLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="3dp"
            android:orientation="horizontal" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/left_bg" />

            <LinearLayout
                android:id="@+id/sliderLayout"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:background="@drawable/middle_bg"
                android:gravity="center"
                android:orientation="horizontal" >

               <!-- <include layout="@layout/spacer"/> -->

            </LinearLayout>

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/right_bg" />
        </LinearLayout>

        <ImageButton
            android:id="@+id/sliderKnob"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="0dp"
            android:background="@null"
            android:src="@drawable/knob" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T13:21:07.360

我现在找到了解决方案。您必须再次在代码中设置 LayoutParams（即使它们已经在 xml 文件中定义），然后一切都整齐地排列，它应该如何。似乎是一个错误。但是这个解决方案有效：

```
 // add one spacer
    View spacer = (View) inflate(context,R.layout.spacer, null);
    spacer.setLayoutParams(new LinearLayout.LayoutParams(1,LayoutParams.WRAP_CONTENT,1.0F));
    sliderLayout.addView(spacer);

    // setup the view depending on how many elements there are

    for (int i=1;i<numberOfElements-1;i++) {

        ImageView lineDot = (ImageView) inflater.inflate(R.layout.slider_switch_line_dot, null);

        sliderLayout.addView(lineDot);

        spacer = (View) inflate(context,R.layout.spacer, null);
        spacer.setLayoutParams(new LinearLayout.LayoutParams(1,LayoutParams.WRAP_CONTENT,1.0F));
        sliderLayout.addView(spacer);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:08:38.643

[您可以在onSizeChanged](http://developer.android.com/reference/android/view/View.html#onSizeChanged%28int,%20int,%20int,%20int%29)回调上调用 init() 。请记住设置并保留一个标志以避免调用它两次，因为此回调可能会运行多次。

# java - java在指定位置存储字符的方法和在某个位置返回字符的方法？

> ID：13734828
> 
> 赞同：-1
> 
> 时间：2012-12-06T00:06:34.270
> 
> 标签：java, tostring, multidimensional-array

好的，所以我真的需要以下方法的帮助，我真的不知道如何开始。

该类将需要一个 setRowColumn 方法。这将采用三个参数：两个整数来指定行和列，以及一个字符。该方法将字符存储在板上的指定位置。该类将需要一个 getRowColumn 方法。这将采用两个整数参数：行和列。该方法将返回该位置的字符。该类将需要一个 toString 方法。此方法将创建一个包含棋盘内容的字符串。棋盘的每一行将是字符串中的一行。使用 - 在顶部和底部绘制边框，并在每侧使用 |。在每个角落放一个+。以下是我完成的，如果你能帮助我完成这两个类，请检查我的 toString 方法。谢谢你。

```
public class Board {

    private char [][] theBoard;

    public Board() { // This will not take any arguments
        this(10, 25); // calls the other constructor
    }

    // takes number of rows and columns
    public Board (int rows, int cols) {
        // fix illegal row and column numbers
        if (rows < 1 || rows>80) {
            rows = 1;
        }
        if (cols<1 || cols > 80) {
            cols = 1;
        }
        // create the board and fill it with ' '
        theBoard = new char [rows][cols];
        for (int row = 0; row < theBoard.length; row++) {
            for (int col = 0; col < theBoard[row].length; col++)
                theBoard[row][col] = ' ';
        }
    }

    // only puts ' ' into fields not containing any of '0' - '9'
    public void clearBoard() {
        for (int row = 0; row < theBoard.length; row++ ) {
            for (int col = 0; col < theBoard[row].length; col++) {
                if (theBoard[row][col] < '0' || theBoard[row][col] > '9') {
                    theBoard[row][col] = ' ';   
                }
            }
        }
    }
     public void setRowColumn(int row, int col, char character) {
        int index = 0;

      for ( int i = 1; i <= row; i++ )
         if ( col[i] > col[index] )
            index = i;
      return index;

        }

     public String toString() { //begin toString method
        int i;
        String temp = new String (""); //create string  

            //    drawLine
            String line = "";
            char topBottom = '-';
            int k;
            int row2 = theBoard[0].length;

            for ( k = 0 ; k < row2 ; k++ ){
                    line += topBottom; // adding hyphens
            }
                System.out.println('+' + line + '+'); // adding left and right + corners                

            for (i=0; i<theBoard.length; i++) {
                temp += "|"; //add characters to the string

                for (int j=0; j<theBoard[0].length; j++) {
                    temp = temp + theBoard[i][j] + "|"; //add the actual number to the string
                }
            temp += "\n";
            }

            return line + "\n" + temp + "\n" + line; //return string
        }// end of method toString

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:12:39.013

我认为您在这里试图使事情过于复杂。由于您的棋盘是二维数组，我们可以直接访问所有位置。

因此，将字符设置为特定的行/列，如下所示：

```
public void setRowColumn(int row, int col, char character) {
    theBoard[row][col] = character;
} 
```

并以相反的方式获取特定字符：

```
public char getRowColumn(int row, int col) {
    return theBoard[row][col];
} 
```

知道了这一点，您应该能够完成电路板的其余漂亮打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:13:56.130

```
public void setRowColumn(int row, int col, char character) {
    try {
        theBoard[row][col] = character;
    } catch (ArrayOutOfBoundsException e) {
        e.printStackTrace();
        // what should happen when one provides illegal indexes?
    }
} 
```

和

```
@Override
public String toString() {
    StringBuilder strb = new StringBuilder();
    for (char[] chars : theBoard) {
        strb.append(Arrays.toString(chars) + "\n");
    }
    return strb.toString();
} 
```

这`toString()`可能不会产生你想要的东西，恕我直言，它已经足够好了。

# c++ - 具有故意互斥量传递的 pthread

> ID：13734829
> 
> 赞同：0
> 
> 时间：2012-12-06T00:06:45.273
> 
> 标签：c++, pthreads, mutex

我有一个一般性的问题，可能很容易回答，但可能不是。我不知道。在我的代码中，我有四个线程在运行，所有线程都在通过一个列表工作，每次运行时每个线程都会弹出一个列表。下面是每个线程的代码，它们等待互斥锁解锁，自己锁定，做他们的事情，然后重新锁定互斥锁。

我的问题是：**有没有办法将锁传递给特定线程？**\

例如：如果我有四个线程运行这段代码（t1、t2、t3 和 t4）并且 t1 刚刚完成，有没有办法可以保证 t1 将锁传递给 t2，而 t2 将锁传递给t3等？

```
void *consumer(void *ptr){
    int i;

    // Print the thread ID
    printf("Consumer TID %lu\n", (unsigned long)gettid());

    // While the list isn't empty
    while (1){
    // Wait for the mutex
    pthread_mutex_lock(&mutex);
        // When you get it...

        // If the list is empty
        if (the_list.empty()){
            // Unlock the mutex
            pthread_mutex_unlock(&mutex);
            break;
        }

        // Otherwise remove an element from the list
        the_list.pop_front();

        // And unlock the mutex
        pthread_mutex_unlock(&mutex);
    }

    return NULL;
} 
```

谢谢！

**更新 - 随机想法：** 我只是有一个想法。是否有四个不同的函数，每个函数都接受一个特定的互斥锁，只由前一个函数释放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:21:10.327

您对消费者的问题是，即使列表为空，它也需要保持准备状态。

我这样说是因为在第一个生产者到来之前，消费者可能已经准备好了。在这种情况下，消费者看到一个空列表并退出，因此不会消耗任何已生成的元素。

所以我建议

```
pthread_mutex_lock(&mutex);
while(the_list.empty())
  pthread_cond_wait(&produced, &mutex);
pthread_mutex_unlock(&mutex); 
```

生产者会向您发出信号`pthread_cond_signal(&produced)`。

我认为这也可以**回答您的问题**：您不是“通过锁”，而是**发出信号**（并等待信号-如果您对“通过锁”感兴趣，则可以使用 3- 4 种不同的信号）。

* * *

**至于锁**：锁是每个数据而不是每个线程。所以锁通常和数据一起存储。

```
struct threadsafe_data_t {
  data_t data;
  pthread_mutex_t mutex;
  pthread_cond_t modified; // or produced or whatever 
}; 
```

# java - 将 libgdx 项目导入 Eclipse 时未绑定的类路径变量 junit 和 log4j

> ID：13734832
> 
> 赞同：6
> 
> 时间：2012-12-06T00:06:55.533
> 
> 标签：java, eclipse, libgdx, scene2d

我正在尝试导入并运行此处列出的项目：

[Scene2d 动作和事件处理](http://www.netthreads.co.uk/2012/01/31/libgdx-example-of-using-scene2d-actions-and-event-handling/)

我首先下载 zip 文件，然后将其导入 Eclipse。从这里我得到以下三个错误（在解决了与不正确的android版本有关的其他错误之后）：

```
Description Resource    Path    Location    Type
Unbound classpath variable: 'M2_REPO/junit/junit/4.5/junit-4.5.jar' in project 'game-test-desktop'  game-test-desktop       Build path  Build Path Problem

Description Resource    Path    Location    Type
Unbound classpath variable: 'M2_REPO/junit/junit/4.5/junit-4.5.jar' in project 'netthreads-libgdx'  netthreads-libgdx       Build path  Build Path Problem

Description Resource    Path    Location    Type
Unbound classpath variable: 'M2_REPO/log4j/log4j/1.2.16/log4j-1.2.16.jar' in project 'netthreads-libgdx'    netthreads-libgdx       Build path  Build Path Problem 
```

有谁知道如何解决这个问题？我注意到这个 junit 应该包含在 eclipse 的 JDT 中，但我已经安装了它，但没有改变错误。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-06T02:44:12.460

问题是该项目依赖于使用**Maven**管理的库，Eclipse 不会自动设置来处理这些库。

您需要先[下载](http://maven.apache.org/download.html)然后[安装 Maven](http://maven.apache.org/download.html#Installation)。然后您可以打开一个命令行窗口并`mvn install`从您的项目目录运行，这将构建代码并下拉任何所需的依赖项。

最后，您需要进入 Eclipse 并将其设置为知道您的本地 Maven 存储库...

1.  窗口 -> 首选项
2.  Java -> 构建路径 -> 类路径变量 -> 新建
3.  `name`将会`M2_REPO`
4.  `path`会是这样的`c:\users\drew\.m2\repository`
5.  单击确定按钮两次

如果您在 Eclipse 中重新编译，这些错误应该会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-07T16:43:21.207

我同意 Drew，但之后还要重新启动你的 Eclipse。

# php - 取消点击按钮 PHP MySQL AJAX 的功劳

> ID：13734834
> 
> 赞同：0
> 
> 时间：2012-12-06T00:07:11.037
> 
> 标签：php, mysql, ajax

我正在尝试制作一个简单的信用页面，让人们拥有这么多的信用，并通过点击他们名字旁边的按钮，它会删除信用

```
<table border="1">
<tr>
    <td>Name</td><td>Massages left</td>
</tr>

<?php

mysql_connect("localhost","dbuser","password");
mysql_select_db("db");

$command = "select pass_name, credit_left from pass;";
$result  = mysql_query($command);

//If there is, list that particular entry
while ($data = mysql_fetch_object($result)) 
{
    print "<tr><td>" . $data->pass_name . "</td>" . 
          "<td>" . $data->credit_left . "</td></tr>\n"
    // Button here that you click and make credit go down one;
}

?>
</table> 
```

例如，它会说 Ben - 2credits - click here to remove one。

谢谢

编辑

好的，这就是我所拥有
的：脚本是

```
<script>
function removeOneCredit(str)

{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("credit").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","removeonecredit.php"+str,true);
xmlhttp.send();
}
</script> 
```

形式是：

```
while ($data = mysql_fetch_object($result)) {
    print "<TR><TD>".$data->pass_name."</TD><TD id='credit'>".$data->credit_left."</TD><TD><form><input type='submit' value='- 1' onsubmit='removeOneCredit(?pass_id=".$data->pass_id."&credit_left=".$data->credit_left.")'></form></TD></TR>\n";

} 
```

removeonecredit.php 是

```
<html>
<?php

$pass_id = $_GET[pass_id];
$credit_left = $_GET[credit_left]-1;
//change value
mysql_connect("localhost","user","pw");
mysql_select_db("db");
$command = "update pass set credit_left='$credit_left' where pass_id='$pass_id';";
mysql_query($command);
//now print value
mysql_connect("localhost","user","pw");
mysql_select_db("db");
$command = "select credit_left from pass where pass_id='$pass_id';";
$result = mysql_query($command);
$data = mysql_fetch_object($result);
echo $data->credit_left;

?>

</html> 
```

如果我在 removeonecredit.php 末尾手动传递字符串，它可以工作，所以它必须是 Ajax 的一部分......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:38:26.523

使用带有按钮的 from 并在 JavaScript 中使用 AJAX 脚本来更新数据库，而无需重新加载页面。如果您不关心页面重新加载，那么您可以只使用表单，但您不必编写 AJAX 脚本。要为单个用户更新数据库，您可以遍历数据库，并通过唯一标识符（例如 id 或用户名）找到您要查找的用户：

例如，使用`UPDATE`MySQL 命令：

```
UPDATE table_name
SET credits_left='1'
WHERE username='Bob' 
```

因此，这将仅更新用户名为“Bob”的人的信用值。我知道这不是很具体，但如果你把你的问题更具体一些，我可能会更好地帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:51:04.337

原来函数参数中的 = 是一个问题，我在这里发布了一个关于如何转义它的问题：[Javascript escape a equal sign PHP](https://stackoverflow.com/questions/13794271/javascript-escape-a-equal-sign-php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T00:21:03.340

如果您想使用 PHP 进行更改，则必须制作一个表单并提交到同一页面。PHP 在服务器上呈现代码并将 HTML 发送到客户端（计算机上的用户）。如果您希望它反映在数据库中，则必须运行 mysql 查询来更新该字段。然后一旦表单被提交，页面顶部就可以处理它，并加载新的输出。

另一种选择是使用javascript。在这种情况下，无需重新加载页面。

```
<script>
var count = 2;
$(document).on('click', '#clickButton', function(){
    $('#countDiv').text(count--);
});
</script> 
```

你的 html/php 页面必须有一个按钮`id="clickButton"`和一个像`<div id="countDiv"></div>`

我没有测试这个。但我希望它对您有所帮助或将您带向正确的方向！

# php - mysql中的json数据

> ID：13734839
> 
> 赞同：1
> 
> 时间：2012-12-06T00:07:54.927
> 
> 标签：php, mysql, json

我有一个名为“数据”的mysql表，

```
+---------+------------------+------+-----+-------------------+----------------+

| Field   | Type             | Null | Key | Default           | Extra          |
+---------+------------------+------+-----+-------------------+----------------+

| id      | int(10) unsigned | NO   | PRI | NULL              | auto_increment |
| data    | text             | YES  |     | NULL              |                |
| created | timestamp        | NO   | MUL | CURRENT_TIMESTAMP |                |
+---------+------------------+------+-----+-------------------+----------------+ 
```

“数据”字段的值如下：

```
606 | {"first_name":"JOHN","last_name":"SLIFKO","address":"123 main AVE","city":"LAKEWOOD","state":"OH","zip":"20190","home_phone":2165216359,"email":"john@gmail.com",} | 2012-12-04 16:37:23 | 
```

因此，它从我拥有的 PHP 脚本中以 JSON 格式保存记录。

事情是这样的：

如何构建此表以通过每个字段进行更快的搜索或咨询，例如进行搜索或查询，例如：

```
SELECT * FROM Data WHERE first_name = john; 
```

我怎样才能做到这一点？？？

请帮忙......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:15:49.683

哎呀。不是一个好的设计。你能做的最好的事情就是使用like关键字

```
Select * from Data Where data like '%"first_name":"JOHN"%' 
```

# python - 如何“任意”格式化列表/字典/等中的项目。EX：更改列表中每个字符串的第 4 个字符

> ID：13734840
> 
> 赞同：0
> 
> 时间：2012-12-06T00:08:03.053
> 
> 标签：python, formatting

首先我想提一下，我创建的这个简单脚本可能没有任何现实生活中的应用程序，但我这样做是因为我正在学习并且我在 SO 中找不到任何类似的东西。我想知道可以做些什么来“任意”更改列表中的可迭代字符。

当然`tile()`是一个我学得相对较快的方便工具，但后来我想如果只是为了踢球，我想格式化（大写）最后一个字符怎么办？或第三，中间的，等等。小写呢？用其他字符替换特定字符？

就像我说的那样，这肯定不是完美的，但可以为像我这样的其他菜鸟提供一些思考的食物。另外，我认为这可以通过数百种方式进行修改，以实现各种不同的格式。

帮助我改进我刚刚做的事情怎么样？如何让它更精简和平均？检查风格、方法、效率等...

它是这样的：

```
words = ['house', 'flower', 'tree']  #string list

counter = 0                          #counter to iterate over the items in list
chars = 4                            #character position in string (0,1,2...)

for counter in range (0,len(words)): 
    while counter < len(words):
        z = list(words[counter])     # z is a temp list created to slice words
        if len(z) > chars:           # to compare char position and z length
            upper = [k.upper() for k in z[chars]] # string formatting EX: uppercase
            z[chars] = upper [0]     # replace formatted character with original
            words[counter] = ("".join(z)) # convert and replace temp list back into original word str list
            counter +=1
        else:
            break

print (words)

['housE', 'flowEr', 'tree'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:14:33.433

有比我更好的 Pythonistas，但这里有一个尝试：

```
[''.join(
      [a[x].upper() if x == chars else a[x]
          for x in xrange(0,len(a))]
    )
    for a in words] 
```

另外，我们说的是程序员的第四，对吧？其他人都称之为第五，是吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:35:13.757

我认为您所说的一般情况是一种方法，给定一个字符串和一个索引，返回该字符串，并根据某些规则转换索引字符。

```
def transform_string(strng, index, transform):
    lst = list(strng)
    if index < len(lst):
        lst[index] = transform(lst[index])
    return ''.join(lst)

words = ['house', 'flower', 'tree']
output = [transform_string(word, 4, str.upper) for word in words] 
```

为了使其更加抽象，您可以拥有一个返回方法的工厂，如下所示：

```
def transformation_factory(index, transform):
    def inner(word):
        lst = list(word)
        if index < len(lst):
            lst[index] = transform(lst[index])
    return inner
transform = transformation_factory(4, lambda x: x.upper())
output = map(transform, words) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T00:44:35.520

这在某种程度上是两者的结合（所以对它们都+1 :)）。主函数接受一个列表、一个任意函数和要作用的字符：

```
In [47]: def RandomAlter(l, func, char):
    return [''.join([func(w[x]) if x == char else w[x] for x in xrange(len(w))]) for w in l]
   ....:

In [48]: RandomAlter(words, str.upper, 4)
Out[48]: ['housE', 'flowEr', 'tree']

In [49]: RandomAlter([str.upper(w) for w in words], str.lower, 2)
Out[49]: ['HOuSE', 'FLoWER', 'TReE']

In [50]: RandomAlter(words, lambda x: '_', 4)
Out[50]: ['hous_', 'flow_r', 'tree'] 
```

该函数`RandomAlter`可以重写为这样，这可能会使其更加清晰（它利用称为[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)的功能来减少所需的代码行数）。

```
def RandomAlter(l, func, char):
    # For each word in our list
    main_list = []
    for w in l:
        # Create a container that is going to hold our new 'word'
        new_word = []
        # Iterate over a range that is equal to the number of chars in the word
        # xrange is a more memory efficient 'range' - same behavior
        for x in xrange(len(w)):
            # If the current position is the character we want to modify
            if x == char:
                # Apply the function to the character and append to our 'word'
                # This is a cool Python feature - you can pass around functions
                # just like any other variable
                new_word.append(func(w[x]))
            else:
                # Just append the normal letter
                new_word.append(w[x])

        # Now we append the 'word' to our main_list. However since the 'word' is
        # a list of letters, we need to 'join' them together to form a string
        main_list.append(''.join(new_word))

    # Now just return the main_list, which will be a list of altered words
    return main_list 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T01:13:23.213

对您的代码的一些评论：

```
for counter in range (0,len(words)):     
while counter < len(words): 
```

`while`除非您在循环下缩进循环，否则这不会编译`for`。而且，如果你这样做，内循环将完全搞砸外循环的循环计数器。最后，您几乎从不想在 Python 中维护显式循环计数器。你可能想要这个：

```
for counter, word in enumerate(words): 
```

下一个：

```
z = list(words[counter])     # z is a temp list created to slice words 
```

您已经可以对字符串进行切片，就像切片列表一样，所以这是不必要的。

下一个：

```
 upper = [k.upper() for k in z[chars]] # string formatting EX: uppercase 
```

这是一个不好的变量名称，因为有一个名称完全相同的函数——您在同一行调用它。

同时，你定义事物的方式，`z[chars]`是一个角色，一个副本`words[4]`。您可以在 Python 中迭代单个字符，因为每个字符本身就是一个字符串。但这通常是没有意义的——<code>[k.upper() for k in z[chars]] 与`[z[chars].upper()]`.

```
 z[chars] = upper [0]     # replace formatted character with original 
```

所以你只想要 1 个字符的列表来从中取出第一个字符……为什么一开始就让它成为一个列表？只需将最后两行替换为`z[chars] = z[chars].upper()`.

```
else:
    break 
```

这将在第一个短于长度 4 的字符串上停止，而不是仅仅跳过短于长度 4 的字符串，这就是你想要的。这么说的方式是`continue`，不是`break`。或者，更好的是，从列表的末尾掉下来。在某些情况下，没有 a 很难写`continue`，但在这种情况下，它很容易——它已经在循环的末尾，实际上它在一个`else:`没有其他内容的内部，所以只需删除这两行。

很难`upper`说你的循环是错误的，因为如果你不小心调用`upper`了两次，它看起来就像你调用了一次一样。将 更改`upper`为`chr(ord(k)+1)`，它将任何字母替换为下一个字母。然后尝试：

```
words = ['house', 'flower', 'tree', 'a', 'abcdefgh'] 
```

您会注意到，例如，您得到`'flowgr'`的不是`'flowfr'`.

您可能还想添加一个变量来计算您通过内部循环的次数。它应该只是`len(words)`时间，但实际上是`len(words) * len(words)`如果你没有简短的话，或者`len(words) * len(<up to the first short word>)`如果你有的话。你让计算机做很多额外的工作——如果你有 1000 个单词，它必须做 1000000 个循环而不是 1000 个。从技术上讲，你的算法是 O(N^2)，即使它只需要为 O(N)。

把它们放在一起：

```
words = ['house', 'flower', 'tree', 'a', 'abcdefgh']  #string list
chars = 4                            #character position in string (0,1,2...)

for counter, word in enumerate(words): 
    if len(word) > chars:           # to compare char position and z length
        z = list(word)
        z[chars] = chr(ord(z[chars]+1) # replace character with next character
        words[counter] = "".join(z)    # convert and replace temp list back into original word str list

print (words) 
```

这与您的原始代码做同样的事情（除了使用“下一个字符”而不是“大写字符”），没有错误，计算机工作少得多，并且更容易阅读。

# c - 对命令提示符、Visual Studio exe 和文本文件感到困惑？

> ID：13734843
> 
> 赞同：1
> 
> 时间：2012-12-06T00:08:29.573
> 
> 标签：c, visual-studio, cmd

标题并没有真正做到这个话题公正。其实很简单，就是我的问题。我有一个用 C 语言编写的程序（下面的代码）。我希望这个程序创建一个 exe 文件，该文件可以通过命令提示符控制台窗口运行，并且还将一个文本文件作为参数。所以，长话短说；我需要它在 CMD 的命令行上这样说：

C:\Users\Username\Desktop\wrapfile.exe content.txt

我唯一的问题是让代码正确。我想告诉 Visual Studio：“您应该打开的文件在命令提示符窗口中作为参数给出，没有设置位置......”

我怎么做？

这是我的工作代码（尽管您必须更改 *fp 定义中的一些内容。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{

    FILE *fp; // declaring variable 

    fp = fopen("c:\\users\\*Put you're PC username here*\\Desktop\\contents.txt", "rb"); // opens the file

    if (fp != NULL) // checks the return value from fopen
    {
        int i;
        do
        {
            i = fgetc(fp);     // scans the file 
            printf("%c",i);
            printf(" ");
        }
        while(i!=-1);
        fclose(fp);
    }
    else
    {
        printf("Error.\n");
    }
} 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:17:33.657

正如 Ken 上面所说，main 方法的参数是您从命令行传入的值。argc 是“参数计数”，argv 是“参数值”。因此，要打开从命令行传入的第一个参数，请更改

```
fp = fopen("c:\\users\\*Put you're PC username here*\\Desktop\\contents.txt", "rb"); // opens the file 
```

到

```
fp = fopen(argv[1],"rb"); 
```

只需确保在尝试打开输入之前进行错误检查（即 argv[1] 不为空）。另外仅供参考，在您的情况下， argv[0] 将是您的可执行文件的名称。

# python - fmin_bfgs 未完成

> ID：13734845
> 
> 赞同：0
> 
> 时间：2012-12-06T00:08:32.443
> 
> 标签：python, debugging, optimization, scipy, regression

我正在尝试使用 fmin_bfgs() 或 fmin_l_bfgs_b() 最小化具有大量参数（略超过 7000）的函数。当我输入命令

```
 opt_pars = fmin_l_bfgs_b(obj_f, pars, approx_grad=1) 
```

（其中 obj_f 是我要最小化的函数， pars 是初始参数的向量）该函数永远运行，直到 python 告诉我它必须终止程序。从来没有任何输出。我尝试添加参数 maxfunc = 2 以查看它是否到达任何地方并且发生​​了同样的事情（永远运行然后python终止了程序）。

我只是想弄清楚该功能可能出了什么问题。似乎它可能陷入了一个while循环或其他什么东西。有没有人遇到过这个问题？如果没有，我还可以在此处使用一些一般调试帮助（因为我对 Python 比较陌生）来了解如何监视函数正在执行的操作。

最后，也许有人可以为我正在尝试的任务推荐不同的功能或包。我正在尝试将套索正则化泊松回归拟合到稀疏数据，其中包含 7000 个变量的大约 1200 万个观测值。

PS很抱歉没有包括我试图最小化的-log似然函数，但这将是完全无法解释的。

非常感谢您的帮助！

扎克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:01:26.163

由于您不向`fmin_bfgs`和提供梯度，因此每次需要梯度时`fmin_l_bfgs_b`都会评估您的目标函数。`len(x) > 7000`如果目标函数的评估速度很慢，那将会累加。

该`maxfun`选项显然没有计算梯度估计，因此它实际上可能不是无限循环，只是需要很长时间。

“python告诉我它必须终止程序”是什么意思？

无论如何，请尝试在此处提供可重现的测试用例。目标函数是否难以理解*并不*重要——重要的是感兴趣的人可以重现你遇到的情况。

即使对于 7000 个参数，我也没有在我的系统上看到无限循环问题。但是，对于一个*简单*的7000 参数问题，`l_bfgs_b`没有提供梯度，函数评估计数约为 200000。分析您的代码以查看此类评估计数对您意味着什么。提供梯度后，它是 35（+ 35 倍梯度）。提供渐变可能会有所帮助。（如果函数很复杂，自动微分可能仍然有效 --- Python 中有相应的库。）

Python 的其他优化库，请参阅：[http](http://scipy.org/Topical_Software) : //scipy.org/Topical_Software （虽然不能说哪些是最好的 --- ipopt 或 coin-or 值得一试）

供参考：Scipy 中的 L-BFGS-B 实现是这个（由应该知道自己在做什么的人编写）： [http ://users.eecs.northwestern.edu/~nocedal/lbfgsb.html](http://users.eecs.northwestern.edu/~nocedal/lbfgsb.html)

```
*** 
```

您可以调试正在发生的事情，例如使用 Python 调试器`pdb`、`python -m pdb your_script.py`. 或者只是通过在其中插入打印语句。

也尝试谷歌“调试python”和“profile python”；）

# javascript - 如何循环一个数组，并每次获取下一个 3？

> ID：13734848
> 
> 赞同：0
> 
> 时间：2012-12-06T00:08:43.013
> 
> 标签：javascript, arrays, loops

我有一组像这样的对象-`[{first},{second},{third},{forth},{fifth},{sixth}}`

如何循环遍历 Array，并获取（对于每个循环）该 Array 的下三个元素？

例如，对于第一个循环，我将获得三个引用`{first}`,`{second}`和的变量`{third}`，对于第二个循环，我将获得引用`{forth}`,`{fifth}`和`{sixth}`... 的变量...等等...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:12:51.203

```
for (i = 0; i < arr.length; i += 3) {
    var a = arr[i];
    var b = arr[i + 1];
    var c = arr[i + 2];
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:12:58.510

这可能有效：

```
var array = ['one', 'two', 'three', 'four', 'five', 'six', 'seven'];
for(i = 0; i < array.length; i+=3){
    var first = array[i];
    var second = (array[i+1]) ? array[i+1] : null;
    var third = (array[i+2]) ? array[i+2] : null;
} 
```

如果数组中不存在索引，则变量将为`null`. [小提琴](http://jsfiddle.net/9beKf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T00:50:45.607

接受的答案的另一个版本是：

```
var i = 0, len = arr.length;
while (i < len) {
    var a = arr[i++];
    var b = arr[i++];
    var c = arr[i++];
    ...
} 
```

如果数组是稀疏的，或者长度不是 3 的偶数倍，您可能需要在读取它们的值之前测试元素是否存在，并在增加计数器时将其考虑在内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T00:11:34.313

试试这个：

```
var i, j;
for (i = 0; i < 4; i += 1) {
   // Loop
}
for (j = i; j < arr.length; j += 1) {
   // Second loop
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T00:11:59.390

只需为 i 之后的元素添加 1，然后为之后的元素添加 2。

```
var ary1,ary2,ary3;

for(var i=0;i<size-3;i+=3){
  ary1 = myary[i];
  ary2 = myary[i+1];
  ary3 = myary[i+2];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T00:15:05.057

这真的很基本

```
var array; // your array (let's pretend it's already populated)

for (i = 0; i < array.length - 3; i += 3) {
    element1 = array[i];
    element2 = array[i+1];
    element3 = array[i+2];
} 
```

我没有处理数组中没有正好是三个对象的倍数的情况，但这应该可以帮助您入门。

# java - Xsl 找不到正确 XPath 的值

> ID：13734851
> 
> 赞同：0
> 
> 时间：2012-12-06T00:08:58.417
> 
> 标签：java, xml, xslt, xslt-2.0, saxon

我正在使用 saxon 9he、eclipse、tomcat 7。我将解释代码。当我运行转换时，我得到了我想要的所有值，除了 InsurerId。如果我（在调试中）将 xml 更改为 InsurerId2 和 xsl 以获取 InsurerId2 的值，它可以工作。我有两个字段给我带来了这个麻烦，我曾经能够在我添加更改为 xsl 2.0、从 saxon 6 更改、添加当前日期函数之间得到这个。这非常令人困惑，请帮助。

xml

```
<PersDriver id="001">
                <ItemIdInfo>
                     <InsurerId>001</InsurerId>
                </ItemIdInfo>
                <GeneralPartyInfo>
                     <NameInfo>
                          <PersonName>
                               <Surname>test</Surname>
                               <GivenName>test</GivenName>
                               <OtherGivenName>
                               </OtherGivenName>
                               <TitlePrefix>
                               </TitlePrefix>
                               <NameSuffix>
                               </NameSuffix>
                          </PersonName>
                          <TaxIdentity>
                               <TaxIdTypeCd>SSN</TaxIdTypeCd>
                               <TaxId> 999999999999</TaxId>
                          </TaxIdentity>
                     </NameInfo>
                </GeneralPartyInfo>
                <DriverInfo>
                     <PersonInfo>
                          <GenderCd>M</GenderCd>
                          <BirthDt>1979-08-23</BirthDt>
                          <MaritalStatusCd>
                          </MaritalStatusCd>
                     </PersonInfo>
                     <DriversLicense>
                          <LicensedDt>2007-08-23</LicensedDt>
                          <DriversLicenseNumber>99999999</DriversLicenseNumber>
                          <StateProvCd>TN</StateProvCd>
                     </DriversLicense>
                </DriverInfo>
                <PersDriverInfo>
                     <DefensiveDriverDt />
                     <DriverRelationshipToApplicantCd>
                     </DriverRelationshipToApplicantCd>
                     <DriverTrainingInd />
                     <GoodDriverInd />
                     <GoodStudentCd />
                </PersDriverInfo>
           </PersDriver> 
```

xsl

```
<xsl:for-each select="$RsXml/InsuranceSvcRs/com.csc_PolicyOrderCurrentCarrierInqRs/PersDriver">

        <driver type_code="DP" id="0">

        <prefix>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/PersonName/TitlePrefix"/>
        </prefix>
        <firstname>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/PersonName/GivenName"/>
        </firstname>
        <midname/>
        <lastname>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/PersonName/Surname"/>           
        </lastname>
        <suffix>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/PersonName/NameSuffix"/>
        </suffix>
        <sex>
            <xsl:value-of select="DriverInfo/PersonInfo/GenderCd"/>
        </sex>
        <dateofbirth>
            <xsl:value-of select="DriverInfo/PersonInfo/BirthDt"/>
        </dateofbirth>
        <ssn>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/TaxIdentity/TaxId"/>            
        </ssn>
        <maritalstatus>
            <xsl:value-of select="DriverInfo/PersonInfo/MaritalStatusCd"/>
        </maritalstatus>
        <occupation/>
        <homephone/>
        <workphone/>
        <cellphone/>
        <homeemail/>
        <workemail/>
        <licensestate>
            <xsl:value-of select="DriverInfo/DriversLicense/StateProvCd"/>
        </licensestate>
        <licensenumber>
            <xsl:value-of select="DriverInfo/DriversLicense/DriversLicenseNumber"/>
        </licensenumber>
        <xsl:message>
        <TEST>
        <xsl:value-of select="ItemIdInfo/InsurerId"/>
        </TEST>

        </xsl:message>
         <xsl:choose>          
            <xsl:when test="@id=001">             
               <namedinsured>true</namedinsured>    
            </xsl:when>
            <xsl:otherwise>
                <namedinsured>false</namedinsured>             
            </xsl:otherwise>
         </xsl:choose>

        <namedinsured2></namedinsured2>
        <driver></driver>
        <livewithparents/>
        <vehicledriven/>
        <driveworkschool/>
        <keptatcollege/>
        <beensuspended/>
        <business></business>
        <beenarrested/>
        <client_id></client_id>
        <violations/>
        <accidents/>
    </driver>
        </xsl:for-each> 

</xsl:copy>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:28:54.803

**我无法重现该问题**：

**此转换**（提供的转换，但具有更正的语法并在匹配模板中）：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="PersDriver">
        <driver type_code="DP" id="0">

        <prefix>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/PersonName/TitlePrefix"/>
        </prefix>
        <firstname>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/PersonName/GivenName"/>
        </firstname>
        <midname/>
        <lastname>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/PersonName/Surname"/>
        </lastname>
        <suffix>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/PersonName/NameSuffix"/>
        </suffix>
        <sex>
            <xsl:value-of select="DriverInfo/PersonInfo/GenderCd"/>
        </sex>
        <dateofbirth>
            <xsl:value-of select="DriverInfo/PersonInfo/BirthDt"/>
        </dateofbirth>
        <ssn>
            <xsl:value-of select="GeneralPartyInfo/NameInfo/TaxIdentity/TaxId"/>
        </ssn>
        <maritalstatus>
            <xsl:value-of select="DriverInfo/PersonInfo/MaritalStatusCd"/>
        </maritalstatus>
        <occupation/>
        <homephone/>
        <workphone/>
        <cellphone/>
        <homeemail/>
        <workemail/>
        <licensestate>
            <xsl:value-of select="DriverInfo/DriversLicense/StateProvCd"/>
        </licensestate>
        <licensenumber>
            <xsl:value-of select="DriverInfo/DriversLicense/DriversLicenseNumber"/>
        </licensenumber>
        <xsl:message>
        <TEST>
        <xsl:value-of select="ItemIdInfo/InsurerId"/>
        </TEST>

        </xsl:message>
         <xsl:choose>
            <xsl:when test="@id=001">
               <namedinsured>true</namedinsured>
            </xsl:when>
            <xsl:otherwise>
                <namedinsured>false</namedinsured>
            </xsl:otherwise>
         </xsl:choose>

        <namedinsured2></namedinsured2>
        <driver></driver>
        <livewithparents/>
        <vehicledriven/>
        <driveworkschool/>
        <keptatcollege/>
        <beensuspended/>
        <business></business>
        <beenarrested/>
        <client_id></client_id>
        <violations/>
        <accidents/>
    </driver>
</xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<PersDriver id="001">
    <ItemIdInfo>
        <InsurerId>001</InsurerId>
    </ItemIdInfo>
    <GeneralPartyInfo>
        <NameInfo>
            <PersonName>
                <Surname>DALESANDRO</Surname>
                <GivenName>MAKIEH</GivenName>
                <OtherGivenName>
                </OtherGivenName>
                <TitlePrefix>
                </TitlePrefix>
                <NameSuffix>
                </NameSuffix>
            </PersonName>
            <TaxIdentity>
                <TaxIdTypeCd>SSN</TaxIdTypeCd>
                <TaxId>666-18-6774</TaxId>
            </TaxIdentity>
        </NameInfo>
    </GeneralPartyInfo>
    <DriverInfo>
        <PersonInfo>
            <GenderCd>M</GenderCd>
            <BirthDt>1979-08-23</BirthDt>
            <MaritalStatusCd>
            </MaritalStatusCd>
        </PersonInfo>
        <DriversLicense>
            <LicensedDt>2007-08-23</LicensedDt>
            <DriversLicenseNumber>882827206</DriversLicenseNumber>
            <StateProvCd>TN</StateProvCd>
        </DriversLicense>
    </DriverInfo>
    <PersDriverInfo>
        <DefensiveDriverDt />
        <DriverRelationshipToApplicantCd>
        </DriverRelationshipToApplicantCd>
        <DriverTrainingInd />
        <GoodDriverInd />
        <GoodStudentCd />
    </PersDriverInfo>
</PersDriver> 
```

产生完全预期的输出（包含`<namedinsured>true</namedinsured>`）：

```
<driver type_code="DP" id="0">
   <prefix>
                </prefix>
   <firstname>MAKIEH</firstname>
   <midname/>
   <lastname>DALESANDRO</lastname>
   <suffix>
                </suffix>
   <sex>M</sex>
   <dateofbirth>1979-08-23</dateofbirth>
   <ssn>666-18-6774</ssn>
   <maritalstatus>
            </maritalstatus>
   <occupation/>
   <homephone/>
   <workphone/>
   <cellphone/>
   <homeemail/>
   <workemail/>
   <licensestate>TN</licensestate>
   <licensenumber>882827206</licensenumber>
   <namedinsured>true</namedinsured>
   <namedinsured2/>
   <driver/>
   <livewithparents/>
   <vehicledriven/>
   <driveworkschool/>
   <keptatcollege/>
   <beensuspended/>
   <business/>
   <beenarrested/>
   <client_id/>
   <violations/>
   <accidents/>
</driver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:13:53.307

如果您想避免拥有 InsurerId，可以尝试以下操作。test.xml 包含您的 xml。

```
try {

            Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File("D:\\Loic_Workspace\\Test2\\res\\test.xml"));

            XPath xpath = XPathFactory.newInstance().newXPath();
            NodeList ndList = (NodeList) xpath.evaluate("PersDriver/*[not(name()='ItemIdInfo')]", doc, XPathConstants.NODESET);

            for(int i=0;i<ndList.getLength();i++){
                System.out.println(ndList.item(i).getNodeName()+" "+ndList.item(i).getTextContent());
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (XPathExpressionException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

这将在控制台中输出：

```
GeneralPartyInfo 

DALESANDRO
MAKIEH

SSN
666-18-6774

DriverInfo 

M
1979-08-23

2007-08-23
882827206
TN

PersDriverInfo 
```

您可以通过执行以下操作来检查节点是否包含子节点，例如：

```
if(ndList.item(i).hasChildNodes()){
....
} 
```

因此，您可以检查是否有必要以这种方式获取子节点值。这就是为什么我从控制台输出中获得所有空白空间的原因。

告诉我它是否有帮助；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T23:04:38.860

我正在用 saxon Impl 构建 parm xml... 删除它现在可以工作了？？？

前

```
DocumentBuilderFactory dfactory =
        DocumentBuilderFactory.newInstance("net.sf.saxon.dom.DocumentBuilderFactoryImpl",null); 
DocumentBuilder docBuilder = dfactory.newDocumentBuilder(); 
org.w3c.dom.Document document = docBuilder.parse(new InputSource(new StringReader(xmlSource)));
Transformer transformer = xsl.newTransformer();
transformer.setParameter("RsXml", document.getDocumentElement()); 
```

改回

```
DocumentBuilderFactory dfactory =DocumentBuilderFactory.newInstance(); 
```

# php - PHP_CodeSniffer 教程

> ID：13734856
> 
> 赞同：1
> 
> 时间：2012-12-06T00:09:32.600
> 
> 标签：php, coding-style, codesniffer

有没有人有任何最新的教程，包括更复杂的规则处理？我在网上找到的大多数教程都不处理 1.4.3，使用 ruleset.xml，而是处理旧的 php 编码文件。

其次，我想做更深入的处理，因为我们公司有不同的编码标准，我需要为强制执行编码，并且想要一个好的起点来了解现有的复杂嗅探及其结构。

我们公司使用与通用库不同的标准，因此在阅读代码时，开发人员知道该方法是否来自外部库（PEAR/Zend/etc...），因为命名约定将表明这一点。如果编码标准不是我们的格式，那么该方法来自外部库，很有可能它运行良好，无需开发人员重新实现某些东西。

在更大的代码库中，您将看到创建的类和引用的方法，而不再知道源代码，也无需跟踪堆栈。因此，通过使用不同的标准，被类会脱颖而出。

例如：

```
$Foo = Foo::Find();    // Mixed case - from a library or PHP itself
$Bar = BAR::Find();    // All uppercase - ours, may need to optimize the Find() 
```

变量声明是相同的，我们在方法和变量上使用尾随下划线来指示私有范围。如果有人正在更改范围解析，他们会删除下划线和 change/remove private 关键字，以清楚地表明他们了解更改的后果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:08:49.623

从这里开始，但它是基本的：http: [//pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial.php](http://pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial.php)

PHP_CodeSniffer 带有很多嗅探器，它们可以做很多不同的事情。可能值得查看其中的一些以了解它们如何使用令牌堆栈。

使用 -vv 命令行参数也是查看文件如何转换为标记的好方法。这将帮助您注册以查找正确的令牌类型并使用许多嗅探器使用的 $phpcsFile->findNext() 和 $phpcsFile->findPrevious() 方法。

这是一个可能值得一看的小嗅探： [https ://github.com/squizlabs/PHP_CodeSniffer/blob/master/CodeSniffer/Standards/PSR2/Sniffs/ControlStructures/ElseIfDeclarationSniff.php](https://github.com/squizlabs/PHP_CodeSniffer/blob/master/CodeSniffer/Standards/PSR2/Sniffs/ControlStructures/ElseIfDeclarationSniff.php)

另一个显示令牌堆栈中其他索引的使用情况： [https ://github.com/squizlabs/PHP_CodeSniffer/blob/master/CodeSniffer/Standards/PSR2/Sniffs/ControlStructures/ControlStructureSpacingSniff.php](https://github.com/squizlabs/PHP_CodeSniffer/blob/master/CodeSniffer/Standards/PSR2/Sniffs/ControlStructures/ControlStructureSpacingSniff.php)

# html - div 移动下面的其他 div

> ID：13734858
> 
> 赞同：0
> 
> 时间：2012-12-06T00:09:56.757
> 
> 标签：html, css

我正在处理这个页面： http: [//mockingbirdagency.com/thebox/profilestack.html](http://mockingbirdagency.com/thebox/profilestack.html)

试图将一些面包屑放在一起，但它们会改变下面的个人资料标题栏，我无法弄清楚为什么，有人可以帮忙吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:14:24.007

在您的样式表中，添加 css 规则：

```
#content-container { clear: both; } 
```

问题是浮动面包屑漂浮在您的内容旁边，您需要明确告诉您的内容垂直清除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:12:53.630

一种解决方案是在 "breadcrumbs-container" 下添加此元素`div`：

`<div style="clear:both"></div>`

这将清除其`div`上方的浮动 s。

此外，您应该只拥有一个`div`id 为 li-bread 的产品。ID 并不意味着在同一页面上重复。考虑使用类而不是 id。

# embedded - SMSC911x 网络接口卡的灯在重新插入电缆后不再亮

> ID：13734870
> 
> 赞同：0
> 
> 时间：2012-12-06T00:11:40.670
> 
> 标签：embedded, embedded-linux, ethernet, nic, ifconfig

我在我们构建的嵌入式系统（linux）中遇到了这个奇怪的问题，所以我在 Linux 或 Windows 机器上没有正常的 GUI 故障排除工具。

问题是网卡在移除电缆后不再可用。即使我重新插入电缆，它上面的灯也不会再次亮起，也无法发送或接收任何内容。ifconfig 表面上仍然有效，但没有真正的效果。只有重新启动才能解决问题。我想问题出在以太网驱动程序中。

我的问题是如何解决它。任何线索/提示？谢谢。

=====================

谢谢你们！开发板是 gumstix，PHY 是 SMSC911x。我们在 Linux 3.0.12 上运行。事实证明，当驱动程序调用 smsc911x_open() 时，NIC 的 smsc911x_soft_reset() 失败。症状还包括我们必须多次运行 ifconfig（不一致）才能启动 NIC 并且系统可以检测到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:29:39.050

我搜索了“SMSC911x 软复位失败”并找到了这个链接。[http://comments.gmane.org/gmane.linux.network/216467](http://comments.gmane.org/gmane.linux.network/216467)。我在 linux 构建配置文件中删除了 SMSC_PHY=y 并解决了问题。好像驱动不兼容。有人可以解释一下，还是有更好的解决方案？

# php - 在 PHP 中使用各种前缀解析 JSON

> ID：13734874
> 
> 赞同：0
> 
> 时间：2012-12-06T00:12:09.790
> 
> 标签：php, json

如果我的 JSON 数据是这样返回的：

```
{"errorCodes":[0]}resultArray=[{....}] 
```

如何获取 resultArray 作为实际的 JSON 字符串并忽略其余部分？

为什么我需要在它前面加上errorCodes？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:24:10.147

只需使用字符串操作来摆脱所有内容`resultArray=`，然后使用`json_decode()`.

```
$json_raw = '...'; // the raw "JSON" string
$delimiter = 'resultArray=';
$cleaned_json = substr($json_raw, strpos($json_raw,$delimiter) + strlen($delimiter)));
$object = json_decode($cleaned_json); 
```

# iphone - long long 到字节数组

> ID：13734875
> 
> 赞同：0
> 
> 时间：2012-12-06T00:12:13.457
> 
> 标签：iphone, objective-c, c

我正在向一个带有其他内容的字节数组发送一个 long long 到一个 java 服务器。当我在 java 端转换 long back 时，它不是我所期望的。我已经测试了java转换器，但我的ObjectiveC我认为它是低级别的就这么简单。

```
uint8_t *data = alloca(sizeof(longlong));
memcpy(&data[sizeof(Byte)+1],&theLong,sizeof(long long)); 
```

这是对的还是我走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:17:01.220

也许......取决于字节序......看看这里：[http ://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

# wcf - 测试 WCF 服务和客户端

> ID：13734876
> 
> 赞同：2
> 
> 时间：2012-12-06T00:12:28.870
> 
> 标签：wcf

我正在尝试编写一个运行该服务然后将客户端连接到该服务的集成测试。

ConnectClientToTestService() 抛出错误：

> System.ServiceModel.Security.SecurityNegotiationException：无法打开安全通道，因为与远程端点的安全协商失败。这可能是由于用于创建通道的 EndpointAddress 中缺少或错误指定了 EndpointIdentity。请验证 EndpointAddress 指定或暗示的 EndpointIdentity 是否正确标识了远程端点。---> System.ServiceModel.FaultException：安全令牌请求包含无效或格式错误的元素。

你能在同一个exe中做到这一点吗？我的机器上安装了涉及的证书，但这些也可能是问题所在。

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System.ServiceModel;
using ECS.Services;
using ECS.App.Core.ECSDataService;

using System.ServiceModel.Description;

namespace ECS.Test.ClientSide
{
    [TestClass]
    public class TestValidUserIntegrationTest
    {

        private static TestContext context;

        [ClassInitialize()]
        public static void ClassInitialize(TestContext testContext)
        {
            context = testContext;
            ResourcingServiceHost.StartService();
        }

        /// <summary> 
        /// Shut down the WCF service once all tests have been run 
        /// </summary> 
        [ClassCleanup()]
        public static void MyClassCleanup()
        {
            ResourcingServiceHost.StopService();
        }

        //Point the client at the test ResourceingServiceHost service
        [TestMethod]
        public void ConnectClientToTestService()
        {
            WSHttpBinding myBinding = new WSHttpBinding();
            EndpointAddress myEndpoint = new EndpointAddress("http://localhost:8733/ECS.Services/DataService/");

            var factory = new ChannelFactory<ECS.App.Core.ECSDataService.IDataService>("debug", new EndpointAddress("http://localhost:8733/ECS.Services/DataService/"));//new ChannelFactory<ECS.App.Core.ECSDataService.IDataService>(myBinding, myEndpoint);//
            {
                ClientCredentials clientCredentials = new ClientCredentials();
                clientCredentials.UserName.UserName = "admin";
                clientCredentials.UserName.Password = "a";
                factory.Endpoint.Behaviors.RemoveAll<ClientCredentials>();
                factory.Endpoint.Behaviors.Add(clientCredentials);

                ECS.App.Core.ECSDataService.IDataService client = factory.CreateChannel();

                using (Channel.AsDisposable(client))
                {
                    client.GetConnectionStrings();
                } 
            }
        }    
    }

    internal class ResourcingServiceHost
    {
        internal static ServiceHost Instance = null;

        internal static void StartService()
        {
            Instance = new ServiceHost(typeof(DataService));
            WSHttpBinding wsBinding = new WSHttpBinding();
            wsBinding.Security.Mode = SecurityMode.Message;
            wsBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Windows;

            Instance.AddServiceEndpoint(typeof(ECS.Services.IDataService), wsBinding, "http://localhost:8733/ECS.Services/DataService/");
            Instance.Open();
        }

        internal static void StopService()
        {
            if (Instance.State != CommunicationState.Closed)
            {
                Instance.Close();
            }
        }
    }

    //This allows us to see the inner exceptions from the WCF service
    public class Channel : IDisposable 
    { 
        private ICommunicationObject _channel; 
        private Channel(ICommunicationObject channel) 
        { 
            _channel = channel; 
        } 
        public static IDisposable AsDisposable(object client) 
        { 
            return new Channel((ICommunicationObject)client); 
        } 
        public void Dispose() 
        { 
            bool success = false; 
            try 
            { 
                if (_channel.State != CommunicationState.Faulted) 
                { 
                    _channel.Close(); success = true; 
                } 
            } 
            finally 
            {
                if (!success)
                {
                    _channel.Abort();
                }
            }
        }
    }
} 
```

# ruby-on-rails - database.yml 文件配置和 postgres - rake db:drop db:create db:migrate

> ID：13734877
> 
> 赞同：4
> 
> 时间：2012-12-06T00:12:30.253
> 
> 标签：ruby-on-rails, postgresql

自从我在 Heroku 上部署并希望匹配生产以来，我最近切换到 postgres 来开发一个正在开发的 Rails 应用程序。当我将数据库名称设置为“postgres”时，Postgres 已为我的应用程序安装并正常工作，这是我理解的默认名称。

但是，我想更改用于开发、测试和生产的数据库名称。如果我只是更改 database.yml 中的名称，并尝试运行 rake 任务，我会在终端中收到以下错误：

```
NOTICE:  database "something_development" does not exist, skipping
Couldn't drop something_test : #<PG::Error: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?>
rake aborted!
FATAL:  database "something_development" does not exist 
```

这是我的 database.yml 文件当前的样子：

```
development:
  adapter: postgresql
  host: localhost
  database: something_development

  username: name

test:
  adapter: postgresql
  database: something_test
  pool: 5
  timeout: 5000

production:
  adapter: postgresql
  host: localhost
  username: name
  database: something_production 
```

我还缺少其他步骤吗？抱歉，如果我在这里遗漏了一些明显的东西！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:29:19.937

更改`database.yml`文件中的名称只会更改它查找数据库的位置，它实际上并没有重命名数据库本身。如果更改指定位置，则需要使用 GUI 工具（如[navicat](http://www.navicat.com/en/products/navicat_pgsql/pgsql_detail_mac.html)或[pgadmin](http://www.pgadmin.org/)）或[命令行](http://www.postgresql.org/docs/8.1/static/sql-alterdatabase.html)重命名数据库以匹配。

此外，这可能是一个混淆遗漏，但您发布的输出指的是`shredset_development`和`something_development`。如果这继续失败，也许验证你所有的名字在所有地方都是一样的......

# java - 选择至少有两个不同字母的单词

> ID：13734888
> 
> 赞同：0
> 
> 时间：2012-12-06T00:13:58.720
> 
> 标签：java

我正在使用此代码

```
Matcher m2 = Pattern.compile("\\b[ABE]+\\b").matcher(key); 
```

仅从 a`HashMap`中获取包含字母 A、B 或 E 的密钥

虽然我对 AAAAAA 或 EEEEE 等单词不感兴趣，但我需要至少包含两个不同字母的单词（最好是三个）。

有没有办法修改正则表达式？任何人都可以对此提供见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:20:25.073

替换除您的字母之外的所有内容，制作一组结果，测试该组的大小。

```
public static void main (String args[])
{
    String alphabet = "ABC";
    String totest = "BBA";

    if (args.length == 2)
    {
        alphabet = args[0];
        totest = args[1];
    }
    String cleared = totest.replaceAll ("[^" + alphabet + "]", "");
    char[] ca = cleared.toCharArray ();
    Set <Character> unique = new HashSet <Character> ();
    for (char c: ca)
        unique.add (c);
    System.out.println ("Result: " + (unique.size () > 1));
} 
```

示例实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:37:57.037

您可以使用更复杂的正则表达式来执行此操作，例如

```
(.*A.*[BE].*|.*[BE].*A.*)|(.*B.*[AE].*|.*[AE].*B.*)|(.*E.*[BA].*|.*[BA].*E.*) 
```

但是进行某种替换可能会更容易理解，例如创建一个循环，一次用 '' 替换一个字母，并每次检查新字符串的大小 - 如果它改变了字符串两次，那么你就有了两个你想要的字符。**编辑：实际上，如果您在进行检查***之前*在运行时知道所需的字符集，NullUserException 在他的评论中是正确的 -`indexOf`或者`contains`会比这更有效并且可能更具可读性。

请注意，如果您的所需字符集在编译时未知（或至少在运行时进行预字符串检查），则第二个选项更可取 - 如果您正在寻找*任何*字符，只需替换所有出现的第一个字符循环`while(str.length > 0)`- 它通过循环的次数是您拥有的不同字符的数量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T00:27:07.403

明确标记所需字母的重复，它看起来像这样：

```
 \b[ABE]{1,3}\b 
```

它匹配 AAE、EEE、AEE 但不匹配 AAAA、AAEE

# python - Django 电子邮件更改表单设置

> ID：13734890
> 
> 赞同：0
> 
> 时间：2012-12-06T00:14:10.357
> 
> 标签：python, django, django-forms

我的用户电子邮件更改表单有效，但我觉得我的代码编写不正确。如果我按照下面的方式进行操作，我需要一千个 else 语句，以便页面返回响应。有人可以告诉我如何使这更有效/更好吗？我不确定执行此操作的传统方法

视图.py

```
def email_change(request):
    form = Email_Change_Form()
    if request.method=='POST':
        form = Email_Change_Form(request.POST)
        if form.is_valid():
            if request.user.is_authenticated:
                if form.cleaned_data['email1']  == form.cleaned_data['email2']:
                    user = request.user
                    u = User.objects.get(username=user)
                    # get the proper user
                    u.email = form.cleaned_data['email1'] 
                    u.save()
                    return HttpResponseRedirect("/accounts/profile/")
    else:
        return render_to_response("email_change.html", {'form':form}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:00:51.780

我建议将验证移至 form clean 方法：

```
#form
class EmailChangeForm():
..
..
 def clean(self):
     if self.cleaned_data.get('email1', None) != self.cleaned_data.get('email1', None):
             raise forms.ValidationError('Validation Failed')

@login_required('/login/') //You can check the user is logged in using the decorator
def email_change(request):
    form = Email_Change_Form()
    if request.method=='POST':
        form = Email_Change_Form(request.POST)
        if form.is_valid():
                    user = request.user //Don't know why you want to get the object from database when you already have it
                    user.email = form.cleaned_data['email1'] 
                    user.save()
                    return HttpResponseRedirect("/accounts/profile/")
    else:
        return render_to_response("email_change.html", {'form':form}, context_instance=RequestContext(request)) 
```

更新：这样做是多余的：

```
user = request.user
u = User.objects.get(username=user.username) 
```

因为用户将和你一样，即`user = u`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-01T14:00:40.607

我建议您彻底改变您对此的看法。在我看来，您应该在表单方面拥有所有实现。

### `forms.py`

我已经实现了一个基于更完整的[SetPasswordForm的类：](https://docs.djangoproject.com/en/dev/topics/auth/default/#django.contrib.auth.forms.SetPasswordForm)

```
class EmailChangeForm(forms.Form):
    """
    A form that lets a user change set their email while checking for a change in the 
    e-mail.
    """
    error_messages = {
        'email_mismatch': _("The two email addresses fields didn't match."),
        'not_changed': _("The email address is the same as the one already defined."),
    }

    new_email1 = forms.EmailField(
        label=_("New email address"),
        widget=forms.EmailInput,
    )

    new_email2 = forms.EmailField(
        label=_("New email address confirmation"),
        widget=forms.EmailInput,
    )

    def __init__(self, user, *args, **kwargs):
        self.user = user
        super(EmailChangeForm, self).__init__(*args, **kwargs)

    def clean_new_email1(self):
        old_email = self.user.email
        new_email1 = self.cleaned_data.get('new_email1')
        if new_email1 and old_email:
            if new_email1 == old_email:
                raise forms.ValidationError(
                    self.error_messages['not_changed'],
                    code='not_changed',
                )
        return new_email1

    def clean_new_email2(self):
        new_email1 = self.cleaned_data.get('new_email1')
        new_email2 = self.cleaned_data.get('new_email2')
        if new_email1 and new_email2:
            if new_email1 != new_email2:
                raise forms.ValidationError(
                    self.error_messages['email_mismatch'],
                    code='email_mismatch',
                )
        return new_email2

    def save(self, commit=True):
        email = self.cleaned_data["new_email1"]
        self.user.email = email
        if commit:
            self.user.save()
        return self.user 
```

此类检查电子邮件是否实际上已更改（例如，如果您需要验证电子邮件或更新邮件黑猩猩，这非常有用）并产生适当的错误，因此它们对表单视图中的用户很有帮助。

### `views.py`

您的代码适合我的课程：

```
@login_required() 
def email_change(request):
    form = EmailChangeForm()
    if request.method=='POST':
        form = EmailChangeForm(user, request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect("/accounts/profile/")
    else:
        return render_to_response("email_change.html", {'form':form},
                                  context_instance=RequestContext(request)) 
```

如您所见，视图被简化，确保了表单级别的所有内容。为了确保登录，我设置了一个装饰器（请参阅[文档](https://docs.djangoproject.com/en/dev/topics/auth/default/#django.contrib.auth.decorators.login_required)）。

Ps：我更改了`email1`和`email2`to`new_email1`并`new_email2`与 Django 的密码方法保持一致。`Email_Change_Form`我还根据`EmailChangeForm`类的 Python 指南更改了表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T01:22:02.450

`if`如果您在视图中编写所有逻辑，您将使用嵌套创建更复杂的代码。您需要将它们分成适当的部分。就像，对于每个与表单相关的验证，以如下形式进行 -

```
if `email1` is same as `email2`, 
 and if email1 is valid 
```

在您的表格中检查它。您应该在 clean 或 clean_FieldName 方法中进行检查。参考这里：[https ://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)

您申请身份验证的另一项检查 - 用户是否已通过身份验证。在这种情况下，未经授权的用户可以更改他的电子邮件吗？不可以。那么我为什么要让我的代码为它运行。最好尽快检查此情况，然后将用户发送到登录页面。@login_required 用于检查此条件作为视图的装饰器。见这里：[https ://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)

如果您真的想在您的视图中检查您的用户身份验证，我认为好的方法是 -

```
def email_change(request):
    if not request.user.is_authenticated:
        // Do what you need to say to user or send them to login
        // return HttpResponse object / HttpResponseRedirect

    form = Email_Change_Form(request.POST) 
    if request.method=='POST': 
        if form.is_valid():
            ...
    else:
        ...  // Display form. 
```

# php - 如何创建将基于另一个数组创建多级数组的函数

> ID：13734891
> 
> 赞同：0
> 
> 时间：2012-12-06T00:14:15.250
> 
> 标签：php, function, multidimensional-array

基本上我想创建一个函数，该函数将基于另一个函数创建一个多维数组。这是我需要创建的数组的格式（最终结果）：

```
'options' => array (
        'one' => array (
            'label' => 'Option One',
            'value' => 'one'
        ),
        'two' => array (
            'label' => 'Option Two',
            'value' => 'two'
        ),
        'three' => array (
            'label' => 'Option Three',
            'value' => 'three'
        )
    ) 
```

这需要由一个函数使用另一个数组来创建，该数组是为存储 wordpress 类别而创建的：

```
$categories = get_categories('hide_empty=0&orderby=name');
$wp_cats = array();
foreach ($categories as $category_list ) {
       $wp_cats[$category_list->cat_ID] = $category_list->cat_name;
} 
```

这是我编写的代码，试图完成我所描述的但无法让它工作：

```
 function wcat2() {
    $i = 0;
    $categories = get_categories();
    foreach( $categories as $category ) {
        $i++;
        array (
        $i => array (
            $category->slug => $category->slug,
            $category->term_id  => $category->term_id
        ),
        );
    }
} 
```

关于我所缺少的任何想法？帮助将不胜感激。

更新：这是我需要的说明： ![描述1](../Images/f1e6d3ee07b95891e1b13cedbbea7534.png)

![说明 2](../Images/aea1106f28e4efff7557d48a5db64517.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:27:15.093

也许是这样的：

```
function wcat2() {
    $out = array();
    $categories = get_categories();
    foreach( $categories as $category ) {
        $out[$category->term_id] = array(
            'label' => $category->slug,
            'value' => $category->term_id
        );
    }
    return array('options'=>$out);
}
print_r(wcat2()); 
```

创建一个空白变量 $out，遍历类别并在每个循环中附加一个所需格式的新数组。我不确定哪个是关于 slug/term_id 的，所以你可能需要切换它们。

# javascript - JavaScript - 如何打开一个新页面并将 JSON 数据传递给它？

> ID：13734893
> 
> 赞同：5
> 
> 时间：2012-12-06T00:14:27.957
> 
> 标签：javascript, jquery, json

我有一个名为 search.jsp 的页面。当用户选择一条记录并按下编辑按钮时，我想用记录数据（存储在 json 对象中并传递给新页面）打开一个新页面（在同一窗口中）。如何使用 Javascript（或 jQuery）打开新页面并传递 JSON 数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:27:50.350

如果两个页面在同一个域，第三种方法是使用 HTML5 localStorage：[http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

事实上，localStorage 正是针对您想要的。处理 GET 参数或窗口/文档 JS 引用不是很便携（即使，我知道，所有浏览器都不支持 localStorage）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:25:54.710

假设两个页面在同一个域中，您可以使用 window.open() 创建的返回对象来访问（和编辑）新打开的窗口的窗口对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T00:32:51.340

嗯，例如，你有对象

```
var dataObject = {
    param  : 'param',
    param2 : 'param2'
}; 
```

您可以使用 JSON.stringify 方法将其转换为字符串

```
var dataObjectString = JSON.stringify(dataObject); 
```

然后你应该使用 Base64 编码来编码你的数据（base64 编码/解码方法可以很容易地在搜索引擎中找到）

```
var dataObjectBase64 = base64encode(dataObjectString); 
```

你会得到这样的东西

```
e3BhcmFtIDogJ3BhcmFtJyxwYXJhbTIgOiAncGFyYW0yJ307 
```

然后您可以将此字符串作为参数传递：

```
iframe src="http://page.com/?data=e3BhcmFtIDogJ3BhcmFtJyxwYXJhbTIgOiAncGFyYW0yJ307" 
```

最后，在加载的页面上进行反向操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T01:24:46.573

您可以“即时”创建一个带有隐藏/文本输入值的表单，该值将保存 json 值，然后您可以通过 javascript 提交此表单。

像这样的东西...

**我使用 JQUERY 和 UNDERSCORE（用于模板目的）**

这是模板

```
<form method='<%= method %>' action="<%= action %>" name="<%= name %>" id="<%= id %>" target="_blank">
    <input type='hidden' name='json' id='<%= valueId %>' />
</form> 
```

然后你可以在javascript上发布使用它

```
function makePost(){
    var _t = _.template("use the template here");              
    var o = {
            method : "POST",
            action :"someurl.php",
            name : "_virtual_form",
            id : "_virtual_form_id",
            valueId : "_virtual_value"
        }

    var form = _t(o); //cast the object on the template
            //you can append the form into a element or do it in memory                   
    $(".warp").append(form);        

            //stringify you json        
        $("#_virtual_value").val(JSON.stringify(json)); 
        $("#_virtual_form_id").submit();
        $("#_virtual_form_id").remove();                        
} 
```

现在您不必担心 json 的长度或要发送的变量数量。

最好的！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-28T23:03:01.543

这是一些非常简单的纯 JavaScript（没有 HTML，没有 jQuery），可以将对象转换为 JSON 并将其提交到另一个页面：

```
/*
    submit JSON as 'post' to a new page
    Parameters:
    path        (URL)   path to the new page
    data        (obj)   object to be converted to JSON and passed
    postName    (str)   name of the POST parameter to send the JSON
*/
function submitJSON( path, data, postName ) {
    // convert data to JSON
    var dataJSON = JSON.stringify(data);

    // create the form
    var form = document.createElement('form');
    form.setAttribute('method', 'post');
    form.setAttribute('action', path);

    // create hidden input containing JSON and add to form
    var hiddenField = document.createElement("input");
    hiddenField.setAttribute("type", "hidden");
    hiddenField.setAttribute("name", postName);
    hiddenField.setAttribute("value", dataJSON);
    form.appendChild(hiddenField);

    // add form to body and submit
    document.body.appendChild(form);
    form.submit();
} 
```

在目标页面上使用一些这样的 PHP 来获取 JSON：

```
$postVarsJSON = $_POST['myPostName'];
$postVars = json_decode( $postVarsJSON ); 
```

或者，更简单的 JavaScript：

```
var postVars = JSON.parse( <?php $_POST['myPostName']; ?> ); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T00:26:06.360

如果 JSON 足够小，您可以在打开新窗口时将其作为 GET 参数包含在 URL 中。

就像是：

```
window.open(yourUrl + '?json=' + serializedJson) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-14T06:10:24.747

假设您的 json 数据 **var data={"name":"abc"};**

发送 JSON 数据的页面应该在 script 标签中有如下代码。

```
 $.getJSON( "myData.json", function( obj ) {
                console.log(obj);
                for(var j=0;j

<obj.length;j++){
                tData[j]=obj;
                //Passing JSON data in URL
                tData[j]=JSON.stringify(tData[j]);
                strTData[j]=encodeURIComponent(tData[j]);
                //End of Passing JSON data in URL
                tr = $('\

    <tr/>
                    ');
                    //Send the json data as url parameter
                    tr.append("

    <td>" + "

        <a href=\"fetchJSON.html?jsonDATA="+strTData[j]+"\" target=\"_blank\">" +Click here+ "</a>" + "

    </td>
                    ");                 
                    }
                    }); 
```

接收 JSON 数据的页面应该有代码。

```
<html>
                    <head></head>
                    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
                    <body>
                        <p id="id"></p>
                    </body>
                    <script type="text/javascript">
                            function getQuery() {
                                          var s=window.location.search;
                                          var reg = /([^?&=]*)=([^&]*)/g;
                                          var q = {};
                                          var i = null;
                                          while(i=reg.exec(s)) {
                                            q[i[1]] = decodeURIComponent(i[2]);
                                          }
                                          return q;
                            }
                                        var q = getQuery();
                                        try {
                                          var data = JSON.parse(q.jsonDATA);
                                          var name=data.name;
                                          console.log(name);
                                        document.getElementById("id").innerHTML=name;
                                        } catch (err) {
                                          alert(err + "\nJSON=" + q.team);
                                        }

                            </script>
                </html> 
```

# ruby-on-rails - 在 Jekyll 中使用插件

> ID：13734896
> 
> 赞同：2
> 
> 时间：2012-12-06T00:15:04.030
> 
> 标签：ruby-on-rails, ruby, jekyll

我已经使用 Jekyll 一两个月了，我也是 Ruby 新手，所以每天都在学习。

在我的网站中，我想添加博客文章的阅读时间，我找到了这个 ruby​​ gem，它可以让我做到这一点

[https://github.com/garethrees/readingtime](https://github.com/garethrees/readingtime)

我以正常方式将它安装到我的站点根目录中并添加所需的代码，但没有任何反应。这并不令人震惊，因为我的站点根目录中实际上没有指向它的链接？

所以我的网站看起来像这个 html 明智的

```
---
layout: default
---

 <div class="twelve columns">
        <h3>{{ page.title }}</h3>
        <span class="date">Wrote by Josh Hornby</span> 
 <span class="date">Estimated reading time – <%= @article.body.reading_time %> </span>
        <br /> <br />
         <%= @article.body %>
        {{ content }}
         </article>

        <a href="https://twitter.com/intent/tweet?text=Check out this blog by @joshua_hornby - www.joshhornby.co.uk"> <div class="twitter_button"> <img src="/images/twitter.png" alt="twitter-logo" width="50" height="50" /> </div> </a> 
  </div>

    <div class="four columns">
        <h3>Recent Posts</h3>
        <p>Find out what else I've been talking about:</p>
           {% for post in site.related_posts limit: 10 %}
        <ul class="square">
            <li><a class="title" style="text-decoration:none;" href="{{post.url}}"><strong>{{ post.title }}</strong></a>
            {% endfor %}
        </ul>
    </div> 
```

现在我对它不起作用并不感到震惊，但我的问题是如何安装 gem 以便我可以在我的 Jekyll 文件中访问它？我需要创建一个`_plugin`目录并从那里调用它吗？或者它不会因为它不是一个 jekyll 插件而工作？在那种情况下，我可能有一个小项目来编写我自己的 Ruby Jekyll 插件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T02:01:17.307

正如您所推测的，您不能在 html 中使用`<%`. 相反，您想编写一个定义 Liquid 过滤器的插件。在上面的 html 中，您将使用液体标签来获取页面的内容。在我们深入研究之前，您可能想复习一下[liquid-for-designers](https://github.com/Shopify/liquid/wiki/Liquid-for-Designers)和[liquid-for-programmers](https://github.com/Shopify/liquid/wiki/Liquid-for-Programmers)以及[Jekyll 关于编写液体扩展](https://github.com/mojombo/jekyll/wiki/Liquid-Extensions)的注释，但我会尝试解释一下。

首先，我们需要使用 Jekyll 过滤器来抓取页面的内容，然后将其传递给我们的插件进行分析。上面你有一个`@article.body`可能对 ruby​​ on rails 网站有意义，但对 Jekyll 没有任何意义。正如您在布局文件的中心看到的那样，页面的内容被简单地称为`content`. 它通过 Liquid 输出被拉入，由 . 指示`{{` `}}`。

代替线

```
<span class="date">Estimated reading time – <%= @article.body.reading_time %> </span> 
```

我们想要一行来抓取内容并将其传递给我们的插件：

```
<span class="date">Estimated reading time – {{ content | readingtime }} </span> 
```

垂直条是一个过滤器，表示`content`函数`readingtime`的管道并包含输出。现在我们需要编写插件本身。在`_plugins`目录中，我们按照 Liquid 过滤器的标准模板创建一个 ruby​​ 脚本：

```
require 'readingtime'
module TextFilter
  def readingtime(input)
    input.reading_time
  end
end
Liquid::Template.register_filter(TextFilter) 
```

并将上述内容保存为类似`readingtime.rb`in 的内容`_plugins`。这有点不言自明，但是您会看到这告诉 ruby​​ 加载 gem，并定义一个过滤器，该过滤器接受其输入并将`reading_time`函数应用于该字符串。

一点注意：`content`将拉入内容的 HTML 版本，而不是纯文本字符串。我不知道阅读时间 gem 是否需要纯文本字符串，但您当然可以使用一些额外的 ruby​​ 代码在它们之间进行转换。如有必要，这将作为练习留给读者（尽管[这](https://stackoverflow.com/questions/13159286/how-can-i-access-un-rendered-markdown-content-in-jekyll-with-liquid-tags)可能会有所帮助）。

# android - ICS 中的 Canvas 或 drawBitmap 是否发生了变化？

> ID：13734899
> 
> 赞同：0
> 
> 时间：2012-12-06T00:15:15.137
> 
> 标签：android, canvas, bitmap

我正在更新我开发的动态壁纸。壁纸当前在 2.2 设备上正常运行，但在我的 4.2 设备上运行不正常。

在 ICS 设备上，似乎只有最后一列被正确绘制。例如，在坐标系中，如果我的手机是 420 x 720（不确定确切尺寸），则只绘制像素 (420, 0) 到 (420, 720)。其余为黑色/透明。

这是我正在使用的代码：[https ://github.com/gjtorikian/Earthbound-Battle-Backgrounds/blob/master/src/com/miadzin/livewallpaper/earthbound/EarthboundLiveWallpaper.java#L243](https://github.com/gjtorikian/Earthbound-Battle-Backgrounds/blob/master/src/com/miadzin/livewallpaper/earthbound/EarthboundLiveWallpaper.java#L243)

首先，我绘制一个 256 x 256 的位图。然后，我使用矩阵来缩放它。

同样，这在非 ICS 设备上运行良好。另一个棘手的方面是我正在使用 JNI 来做一些位图数学运算，但我仍然认为问题出在这个画布代码的某个地方。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:57:20.633

好吧，所以几天后我终于想通了。

创建位图后，我需要在 Java 中设置每个像素：

```
for (int x = 0; x < 254; x++) {
    for (int y =0; y < 254; y++) {
      bmp.setPixel(x, y, Color.argb(255, 0, 0, 0));
    }
} 
```

问题是：为什么只适用于 ICS？

# .htaccess - 使用 .htaccess 根据查询字符串重定向到不同的 URL

> ID：13734901
> 
> 赞同：2
> 
> 时间：2012-12-06T00:15:16.367
> 
> 标签：.htaccess, url, redirect

我目前正在通过 htaccess 文件通过添加以下内容将带有包含“Googleb0t”的查询字符串的 URL 重定向到没有查询字符串的同一页面：

```
RewriteCond %{QUERY_STRING} Googleb0t

RewriteRule ^(.*)$ $1? [L,NC,R=301] 
```

所以[http://www.example.com/?Googleb0t](http://www.example.com/?Googleb0t)总是会重定向到[http://www.example.com/](http://www.example.com/)

我的问题是，如果您有多个需要类似重定向的参数，如何在 .htaccess 中向该指令添加多个关键字？

如果我还想要具有不同参数的 URL，例如 'yah00' 或 'bing' 到 301 的重定向方式与具有 'Googleb0t' 的 URL 相同，我该怎么做？

这可以在一行代码中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:55:37.117

```
RewriteCond %{QUERY_STRING} Googleb0t|yah00|bing 
```

# perl - 如何从 Sybase 查询中调试 Perl DBI 的 db_error_handler 中打印的 IO 计数不足？

> ID：13734908
> 
> 赞同：0
> 
> 时间：2012-12-06T00:16:14.047
> 
> 标签：perl, statistics, dbi, sap-ase

我有一个相当奇怪的问题。

这有点XY问题，所以我将首先描述“X”。

**问题 X：如何使用 Perl 调试 DBI 内部？**

更具体地说，对 DBI 的 db_error_handler 的调用。某些 SQL Server 回调输出会在 100% 的时间内打印（查询计划），但某些（实际 IO）仅在查询返回零行（带有`set statistics io on`）时才打印。

* * *

**终极问题 Y 我试图解决：**

出于某种原因，当查询返回结果集时，我的 Perl 脚本会打印查询计划，但不会打印执行 Sybase 查询时**花费的实际 IO ；**但是，当 SAME 查询返回零行时，打印查询计划和实际花费的 IO。

我有一个脚本，本质上是这样做的：

```
sub DoSql { # Sql execution wrapper
    my ($dbh, $sql) = @_;
    my $sth = $dbh->prepare($sql);
    $sth->execute();
}

# Set up DB connection, with debug printing turned on
my $dbh = CreateDBH(); # Uses DBI and creates Sybase database handle DBI object
$dbh->DoSql("set statistics io on");
$dbh->DoSql("set showplan on");
# Print output from DBH callback
$dbh->{_db_error_handler} = sub { PrettyPrintSybaseDebug($_[6]); } 

$dbh->DoSql("SELECT * FROM MyTable WHERE ID=100"); # 1 row returned
$dbh->DoSql("SELECT * FROM MyTable WHERE ID=987654321"); # zero rows 
```

执行此脚本时，第一个查询从 db_error_handler 打印以下 Sybase 输出：

```
QUERY PLAN FOR STATEMENT 1 (at line 1).
    STEP 1
        The type of query is SELECT.
         .....
Total estimated I/O cost for statement 1 (at line 1): 80. 
```

**但是第二个查询打印以下 Sybase 输出（请参阅添加的最后 3 行）：**

```
QUERY PLAN FOR STATEMENT 1 (at line 1).
    STEP 1
        The type of query is SELECT.
         .....
Total estimated I/O cost for statement 1 (at line 1): 80.

Table: MyTable scan count 1, logical reads: (regular=3 apf=0 total=3), ...
Total actual I/O cost for this command: 6.
Total writes for this command: 0 
```

请注意，当我在 raw 中执行这些查询时`isql`，它们都按预期打印计划和每个表的扫描计数和实际 IO。两个查询都运行良好并产生预期的结果集（分别为 1 行和 0 行）

我做错了什么，我该如何调试？不幸的是，`perl -d`这对我没有帮助，因为我只能调试外部`$sth->execute();`调用和回调内部。

如果重要的话，我的环境是：

*   Perl 5.8.0
*   索拉里斯 10
*   Sybase ASE 12.5
*   DBI 版本为 1.37

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:43:15.957

使用 DBI 跟踪信息可以为您显示更多调试信息：export DBI_TRACE=LEVEL where LEVEL from 1 to 15

# javascript - jQuery同时淡入和淡出

> ID：13734915
> 
> 赞同：0
> 
> 时间：2012-12-06T00:16:55.483
> 
> 标签：javascript, jquery, wordpress, fade

我目前使用以下内容来淡化我网站上的图像：

```
$(document).ready(function() {
    $('ul.image-switch li').mouseover(function(e) {
    if (e.target.nodeName.toLowerCase() == 'a') return;

    var image_src = $('a', this).data('image');
    var img = $('.image-container img');

    if (img.attr('src') != image_src) { // only do the fade if other image is selected
        img.fadeOut(200, function() { // fadeout current image
            img.attr('src', image_src).fadeIn(200); // load and fadein new image
        });

    }
});
});​ 
```

[http://www.sehkelly.com/#news](http://www.sehkelly.com/#news)就是一个例子。

如您所见，当前图像必须在新图像淡入之前淡出。

我希望动作是同步的。请 - 有谁知道我怎么能做到这一点？

非常感谢。

编辑：无知的新手。代码示例非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:18:37.627

`img`在实际元素之上创建一个新元素，然后淡入这个新图像。您需要一点 css 才能将新图像放在旧图像之上。

绝不可能只用一个`img`元素来做到这一点。

```
if (img.attr('src') != image_src) { // only do the fade if other image is selected
    img.after(
        $('<img />').attr('src', image_src).fadeIn(200)
    );
    img.fadeOut(200);

} 
```

您也可能希望在开始淡入淡出之前等待加载新图像。（检查 jQuery 文档以获得正确的功能，并在加载回调中淡化图像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:37:06.460

这是 Ulflander 想法的一个实现，因为发布的代码不完整[http://jsfiddle.net/8nBqD/1/](http://jsfiddle.net/8nBqD/1/)

诀窍是将第二张图像绝对定位在您正在淡出的图像之上

**HTML**

```
<img id='pic1' src="http://periodictable.com/Samples/009.3b/s7.JPG" />
<img id='pic2' src="http://icons.iconarchive.com/icons/vargas21/aquave-metal/256/Sample-icon.png" /> 
```

**CSS**

```
#pic2 {
   position: absolute;
   display: none;
}​ 
```

**JS**

```
// Fade out the image, and replace it with the new one after the fade is over
$("#pic1").fadeOut(500, function() { // fadeout current image
    this.src = 'http://icons.iconarchive.com/icons/vargas21/aquave-metal/256/Sample-icon.png';        
    $(this).show();
});

// Fade in the new image placing it on top of the original one
$("#pic2").offset($("#pic1").offset()).fadeIn(500, function(){
    // Hide it since we are showing the original image with the new src        
    $(this).hide();
}); 
```

我们甚至可以编写一个插件来使其易于重用

```
(function($) {
    $.fn.imageFader = function(newSrc, seconds) {
        $(this).each(function() {
            var $img = $(this);
            $img.fadeOut(seconds, function() {
                this.src = newSrc;
                $img.show();
            });
            var $tempImg = $('<img src="'+newSrc+'" style="position:absolute;display:none;" />').appendTo('body');
            $tempImg.offset($img.offset()).fadeIn(seconds, function(){
                $tempImg.remove();
            });
        });
    };
})(jQuery); 
```

并像[http://jsfiddle.net/8nBqD/5/一样使用它](http://jsfiddle.net/8nBqD/5/)

```
$('img').imageFader('picture.png', 1000); 
```

# imageresizer - ImageResizer 调整白平衡

> ID：13734917
> 
> 赞同：0
> 
> 时间：2012-12-06T00:17:01.330
> 
> 标签：imageresizer

一直在玩[ImageResizer的](http://imageresizing.net/)[StudioJS](https://github.com/nathanaeljones/studiojs)包装器。ImageResizer 可以相对于颜色调整白平衡吗？最终，我希望用户能够单击图像中应该是白色的区域，然后调整图像的其余部分。

我看到了使用 AdvancedFilters 插件的自动平衡功能，我想我想更进一步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:36:42.213

不，ImageResizer 当前不支持相对于颜色进行调整。但是，如果您想实现上述功能，这并不难。

您可以修改 AdvancedFilters.cs，在第 150 行附近插入一个 IF 语句，并添加对新命令的支持，例如“&a.white=rrggbb”。

只需将 RGB 值提供给 LinearLevels 类即可对图像执行缩放。 [http://www.aforgenet.com/framework/docs/html/29bf1191-47c9-314b-eb8d-bea3f903ac28.htm](http://www.aforgenet.com/framework/docs/html/29bf1191-47c9-314b-eb8d-bea3f903ac28.htm)

如果你喜欢这个结果并想分享它，请在 GitHub 上向我发送拉取请求或将代码片段通过电子邮件发送给我。如果它通过测试，它可能会进入下一个版本。

在客户端，[您可能会发现此库有助于](http://blog.project-sierra.de/projects/image-color-picker)从图像中选择颜色。

# ios - 生成 pi/2 和 -pi/2 之间的随机数

> ID：13734918
> 
> 赞同：1
> 
> 时间：2012-12-06T00:17:02.873
> 
> 标签：ios, math

有人可以提供一种在 -Pi/2 和 Pi/2 之间产生随机浮点数的方法吗？

我试过了...

```
float angleR = M_PI / arc4random_uniform(1000) - M_PI * 0.5; 
```

但这不起作用，大声笑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:22:13.060

```
float angle = (rand()/(float)RAND_MAX)*PI - PI/2; 
```

您可以轻松地将其调整为使用`arc4rand`函数（注意它的最大值应该是`0x100000000`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:22:25.677

像这样的东西应该工作。如果您希望您的结果是（大致）均匀随机的，那么您当然不想除以一个均匀随机数（因为这会使您严重偏向接近 -π/2 的角度）。

```
float angleR = ((float)arc4random_uniform(1000) - 500) * M_PI; 
```

# php - CodeIgniter - 从 URL 中删除“索引”

> ID：13734921
> 
> 赞同：7
> 
> 时间：2012-12-06T00:17:11.860
> 
> 标签：php, codeigniter, url, routing, controller

> **注意：**我不是在谈论删除`index.php`- 我`index`的意思是 - 方法名称。

我当前的网址如下所示：

```
www.mysite.com/view-topic/index/my-topic 
```

这就是我想要的样子：

```
wwww.mysite.com/view-topic/my-topic 
```

我该怎么做呢？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T00:23:13.843

您可以为此设置路线，在`application/config/routes.php`中添加新行：

```
$route['view-topic/(:any)'] = 'view-topic/index/$1'; 
```

这将路由您的 URL`http://url.com/view-topic/anythinggoeshere`将屏蔽`view-topic/index/anythinggoeshere`控制器。

有关路由的更多信息：

*   [使用 Codeigniter 进行路由](http://ellislab.com/codeigniter/user-guide/general/routing.html)

# java - truelicense 将许可证文件保存在哪里

> ID：13734925
> 
> 赞同：2
> 
> 时间：2012-12-06T00:17:35.480
> 
> 标签：java, licensing, license-key, truelicense

这个问题非常具体到 TrueLicense 的实现及其工作原理。借助此处的教程[以及](http://alvinalexander.com/java/true-license-java-client-java-license-manager)[此处](http://truelicense.java.net/tutorial.html)的更多帮助，我已经能够使用 TrueLicense 成功地在我的软件上应用许可。但是，我仍然不清楚 TrueLicense 的某些方面以及它是如何工作的，希望有人能启发我。现在，我不明白的是，当我打电话给

```
licenseManager.install() 
```

方法（确保满足其余的先决条件）许可证文件实际在哪里持久化。我知道它会以某种方式持续存在，因为我第二次启动应用程序并运行

```
licenseManager.verify() 
```

它返回快乐的方法。我真的很感激对此的一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:50:00.553

从源代码（TrueLicense）：

```
/**
 * Installs the given license key as the current license key.
 * If {@code key} is {@code null}, the current license key gets
 * uninstalled (but the cached license certificate is not cleared).
 */
protected synchronized void setLicenseKey(final byte[] key) {
    final Preferences prefs = getLicenseParam().getPreferences();
    if (null != key)
        prefs.putByteArray(PREFERENCES_KEY, key);
    else
        prefs.remove(PREFERENCES_KEY);
} 
```

如果您使用标准的 Java 首选项 API ( [java.util.prefs.Preferences](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html) )，您将在 Windows 的注册表中看到它。在 Linux 和 OS X 上，有一个隐藏的“.”。具有这些键的目录。

通常，我只使用[userNodeForPackage](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html#userNodeForPackage%28java.lang.Class%29)方法，因为它在 Windows 上不需要管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:41:25.823

打开注册工具；在下面`HKEY_CURRENT_USER/Software/JavaSoft/Prefs/{$the.package.of.your.license.classes}.`

注意：这仅适用于 Windows，并且是默认行为。（有`PREFERENCES_KEY`原值）

# c# - VBScript 和 C# 读/写 XML 没有锁定文件

> ID：13734929
> 
> 赞同：4
> 
> 时间：2012-12-06T00:18:08.240
> 
> 标签：c#, file, networking, vbscript, locking

设想：

1.  网络用户登录域
2.  组策略运行 VBScript
3.  VBScript 从 XML 中读取
4.  VBScript 根据从 XML 获得的信息执行操作

我应该使用什么 VBScript 方法，以便通过多个用户同时访问 XML 的网络，我不会容易出现文件锁定问题？

如果我制作了一个 C# 程序来在操作时间（同时正在读取 XML）从网络位置读取和修改现有 XML 文件，我应该使用哪些 C# 方法来读取/写入 XML 而不会导致锁定问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:04:46.547

我不明白为什么这会如此复杂。只需操作 2 个文件。

*   VBScript 从文件*A1.xml 中读取*
*   C# 程序写入/更新文件*A2.xml*然后完成替换*A1.xml*

而vbs可能看起来像......

```
Set xmlDoc   = CreateObject("Msxml2.DOMDocument.6.0")
xmlDoc.Async = False
bReturn      = False
Do Until bReturn
    WScript.Sleep 3500
    bReturn = xmlDoc.Load(".../A1.xml")
Loop
'... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:56:38.870

对于访问 XML 文件的 C# 程序，您可以执行以下操作：

1.  要处理 XML 文件读/写请求，请使用 backgroundWorker 组件
2.  添加所有相应的事件处理程序以了解进度更新等。
3.  调用 RunWorkerAsync 开始读/写操作。

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/ck8bc5c6%28v=vs.100%29.aspx)

# c++ - 在 .txt 中查找字符串并在 C++ 中获取行内容

> ID：13734931
> 
> 赞同：-4
> 
> 时间：2012-12-06T00:18:16.320
> 
> 标签：c++, file

我正在寻找一种方法来打开文本文件并找到某个字符串，然后获取它所在的行，然后获取该行的内容。我找不到任何帮助。此外，我需要使用 C++ 和预安装的库...等任何无法在 Mac 上运行或未预装 C++ 的东西...。我也许可以使用其他小的库...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:30:30.860

```
open a filestream

while filestream is NOT at End Of File
    get a line of the file into a temp string
    search the temp string for the keyword
    if the keyword is in it
        thats your line, exit the loop
    else keep looping 
```

希望这对你来说是一个足够大的提示。

# c# - IIS MIME 类型的元数据库路径

> ID：13734936
> 
> 赞同：2
> 
> 时间：2012-12-06T00:18:59.367
> 
> 标签：c#, .net, iis

我知道如何获取默认站点的 MIME 类型列表。 `IIS://localhost/MIMEMAP`.

我想知道如何推迟不同站点的 MIME 类型。

示例：我在 IIS 服务器上有`x`, `y`,`z`站点。现在如何掌握`x`mime 类型？我努力了

```
IIS://localhost/x/MIMEMAP 
```

请帮助实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:58:28.050

您应该能够使用以下方式[获取 mime 类型](http://www.iis-aid.com/articles/how_to_guides/working_iis_mime_types)列表

```
adsutil GET W3SVC/1/ROOT/mimemap 
```

您更改数字以指示站点索引的位置

也看看[这个问题](https://stackoverflow.com/questions/1910658/how-can-i-set-global-mime-types-for-iis6-programmatically)

# ruby - 如何在中间人生成的静态页面中支持嵌入式 Ruby

> ID：13734939
> 
> 赞同：0
> 
> 时间：2012-12-06T00:19:25.023
> 
> 标签：ruby, server-side, erb, middleman, embedded-ruby

我有一个使用出色的[Middleman](http://middlemanapp.com/)生成的静态站点。它一直在 Apache 服务器上愉快地运行。我现在需要在其中一个页面中添加一些嵌入式 Ruby *（必须在运行时评估的 Ruby，而不是在 Middleman 的构建阶段）*。我不会详细说明这段代码采用什么形式，但对于这个问题，请假设它必须嵌入 Ruby。

那么我的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T02:31:44.500

您可以将 .rb 或 .erb 或 .haml 扩展名添加到任何文件，它将首先呈现。

例如`blogpost-123.html.markdown.erb`，首先会渲染 erb，然后渲染 markdown，并输出为 html。

# java - Java，运行外部程序

> ID：13734941
> 
> 赞同：1
> 
> 时间：2012-12-06T00:19:34.150
> 
> 标签：java

我正在尝试编写一个聊天机器人。我还处于起步阶段，但我确实有一个问题。

```
Process proc = Runtime.getRuntime().exec("notepad.exe"); 
```

这实际上使我无法退出我的程序，除非我退出记事本。是否可以在此记事本结束之前退出 Java 程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:22:10.797

您可以通过程序中的单独线程运行外部程序，并在主线程中继续您的程序逻辑，即*多线程*应用程序是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T01:32:54.477

首先销毁子进程：

```
Process proc = Runtime.getRuntime().exec("notepad.exe");
proc.destroy(); 
```

如果这不起作用，获取进程的进程id并运行不同的子进程来运行`kill <pid>`

`System.exit(0);`然后用or 正常退出java 。

# c# - Winform 最小化后最大化后的梯度误差

> ID：13734945
> 
> 赞同：1
> 
> 时间：2012-12-06T00:20:02.580
> 
> 标签：c#, winforms, gradient

我为我的表单背景创建了一个渐变，但我现在遇到了这个问题。在winforms中，当我最小化然后最大化表单时，我得到这个：

[imageshack.us/photo/my-images/35/errorbl.png](http://img35.imageshack.us/img35/1180/errorbl.png)。

我猜这个错误是表单必须在最大化后重新绘制自己，而它没有。有人知道如何解决吗？

谢谢！

调用梯度：

```
public Base()
    {
        InitializeComponent();

        this.Paint += new PaintEventHandler(Form_Background);

    } 
```

渐变方法：

```
public void Form_Background(object sender, PaintEventArgs e)
    {
        Color c1 = Color.FromArgb(255, 252, 254, 255);
        Color c2 = Color.FromArgb(255, 247, 251, 253);
        Color c3 = Color.FromArgb(255, 228, 239, 247);
        Color c4 = Color.FromArgb(255, 217, 228, 238);
        Color c5 = Color.FromArgb(255, 200, 212, 217);
        Color c6 = Color.FromArgb(255, 177, 198, 215);
        Color c7 = Color.FromArgb(255, 166, 186, 208);

        LinearGradientBrush br = new LinearGradientBrush(this.ClientRectangle, c1, c7, 90, true);
        ColorBlend cb = new ColorBlend();
        cb.Positions = new[] { 0, (float)0.146, (float)0.317, (float)0.439, (float)0.585, (float)0.797, 1 };
        cb.Colors = new[] { c1, c2, c3, c4, c5, c6, c7 };
        br.InterpolationColors = cb;

        // paint
        e.Graphics.FillRectangle(br, this.ClientRectangle);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:23:33.313

它不起作用的原因`this.ClientRectangle`是最小化后的宽度和高度为零。

在应用任何渐变并使用它进行绘图之前，您需要对矩形进行检查：

```
Rectangle r = this.ClientRectangle;

if (r.Width > 0 && r.Height > 0) {

    //draw

} 
```

所以你的代码会是这样的：

```
public void Form_Background(object sender, PaintEventArgs e) {

    Rectangle r = this.ClientRectangle;

    if (r.Width > 0 && r.Height > 0) {

        Color c1 = Color.FromArgb(252, 254, 255);
        Color c2 = Color.FromArgb(247, 251, 253);
        Color c3 = Color.FromArgb(228, 239, 247);
        Color c4 = Color.FromArgb(217, 228, 238);
        Color c5 = Color.FromArgb(200, 212, 217);
        Color c6 = Color.FromArgb(177, 198, 215);
        Color c7 = Color.FromArgb(166, 186, 208);

        LinearGradientBrush br = new LinearGradientBrush(r, c1, c7, 90, true);
        ColorBlend cb = new ColorBlend();
        cb.Positions = new[] { 0, (float)0.146, (float)0.317, _
                                  (float)0.439, (float)0.585, _
                                  (float)0.797, 1 };

        cb.Colors = new[] { c1, c2, c3, c4, c5, c6, c7 };
        br.InterpolationColors = cb;

        // paint
        e.Graphics.FillRectangle(br, r);

        br.Dispose; //added dispose for the brush

    }
} 
```

# jquery - jquery按数据值选择，它是一个变量

> ID：13734949
> 
> 赞同：4
> 
> 时间：2012-12-06T00:20:24.007
> 
> 标签：jquery, html, variables, select

我无法将类似问题的答案应用于我的情况，我认为这是因为我正在寻找的值是一个变量，而不是像大多数其他人一样的常量字符串。

我有一个`activeSlide`等于活动幻灯片的变量：1、2 或 3。我想要`data-dir = activeSlide`显示粗体文本的按钮，但我似乎无法根据数据值选择按钮。我可以选择一个确切的幻灯片编号：

```
$('btns [data-dir=2]')... 
```

但是用`activeSlide`or替换 2`#{activeSlide}`不会产生任何结果。我即将用类而不是数据重写我的所有代码——这让我很困惑！在我这样做之前，有人会介意告诉我如何选择 data-dir=activeSlide 的按钮吗？

html:

```
<div class='btns'>
  <button data-dir='1'>1</button>
  <button data-dir='2'>2</button>
  <button data-dir='3'>3</button>
</div>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T00:23:23.517

尝试将值连接到选择器字符串中。

```
$('.btns [data-dir="'+activeSlide+'"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T00:23:26.343

如果“btns”它是一个类，不是 `$('.btns [data-dir=2]')`吗？

# facebook - Facebook Graph API - 发布到用户墙

> ID：13734958
> 
> 赞同：1
> 
> 时间：2012-12-06T00:21:52.330
> 
> 标签：facebook, facebook-graph-api

我有一个表单，它重定向到一个 php 脚本以向 mysql 数据库添加字段。添加后，我希望应用程序请求发布到用户流的权限，并且一旦获得授权，我希望将消息发布到用户墙。

这是我到目前为止所得到的。mysql 位正在工作，但贴在墙上的帖子没有。

```
<?php

require_once 'config.php';

mysql_connect("$host","$username","$password") or die(mysql_error());

mysql_select_db("$database") or die(mysql_error());

$mysql="INSERT INTO  `dhxmascomp`.`users` (`user_id` , `name` , `user_email`) VALUES (NULL, '{$_GET[name]}','{$_GET[name2]}')";

if(!mysql_query($mysql)) 
die(mysql_error());

mysql_close();

require_once 'facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
    'appId' => $FB_AppID,
    'secret' => $FB_AppSecret,
    'cookie' => true,));

$user = $facebook->getUser($_GET['access_token']);

try {
$publishStream = $facebook->api("/$user/feed", 'post', array(
'message' => 'test', 
'link'    => $FB_canvas_page,
'picture' => $submitPrefix. 'ibizasocial.com/plastik/images/logo_fb.png',
'name'    => 'Plastik',
'description'=> 'test'));

} catch (FacebookApiException $e) {
//echo($e);
}

?>
<html>
<body style="810px; overflow:hidden">

<div style="overflow:hidden; width:810px;">
<img src="http://ibizasocial.com/dhapp/images/DHAPP3.jpg" border="0" />

</div>
</body>
</html> 
```

# c - 将列表与其他列表进行比较，然后将结果存储在新列表中以防匹配

> ID：13734959
> 
> 赞同：0
> 
> 时间：2012-12-06T00:21:56.040
> 
> 标签：c, list, compare, store

如果我获取一个包含单词列表的文本文件，并且我希望将此列表与许多列表（已经来源到程序）进行比较，这意味着输入列表中的任何单词是否与任何来源中的单词匹配列表 我希望仅当在 list1.txt 中找到该单词时将该单词存储在文件 a.txt 中）。同样，如果在 list2.txt 中找到该单词，我希望将其存储在 b.txt 中。除此之外，我想在输出文件 a.txt 中显示文件 list1.txt 的路径。喜欢唱 ./dataset/dictionary/verb

我使用了下面的语法

```
while(dictcount >= 0)//reads dictionary word into array//
{   
    dictcount = 0; //searches through all of the listed data files
    fscanf(fp1,"%s", worddict);
    fscanf(fp2,"%s", worddict);
    fscanf(fp3,"%s", worddict);
    if(strcmp(wordcheck, worddict)==0)//compare strings//if the word in found in list misc.txt
    {
        fprintf(out_file1 ,"%c", wordcheck); //storing the value in output_misc.txt
        if (getcwd(cwd, sizeof(cwd)) != NULL)
        //fprintf(out_file3, "%c\n", cwd); //stores the path of the folder containing the list in which the matched 'word' is found  
            return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:31:44.853

为什么不使用“EOF”来读取文件？有一个和你类似的问题。 [http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/459823f5-e5a7-46a4-9192-d607be0747f3/](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/459823f5-e5a7-46a4-9192-d607be0747f3/)

# ruby - 在 Mac OS X 10.7.5 上使用 RVM 安装 Ruby 1.9.3 - C 编译器无法创建可执行文件

> ID：13734964
> 
> 赞同：3
> 
> 时间：2012-12-06T00:22:15.727
> 
> 标签：ruby, gcc, rvm

我知道很多人都遇到过类似的问题，并且我已经尝试了许多在 stackoverflow 和其他地方发布的建议（包括：[Can't install Ruby under Lion with RVM – GCC issues](https://stackoverflow.com/questions/8032824/cant-install-ruby-under-lion-with-rvm-gcc-issues)）。已经很长时间了（我是新手）。

我有 gcc-4.2。我使用 osx-gcc-installer 来获得 4.2。

```
zach$ find /usr/bin -name "*gcc *"  
/usr/bin/gcc  
/usr/bin/gcc-4.2  
/usr/bin/i686-apple-darwin11-gcc-4.2.1  
/usr/bin/i686-apple-darwin11-llvm-gcc-4.2  
/usr/bin/llvm-gcc  
/usr/bin/llvm-gcc-4.2 
```

我试过了：`CC=/usr/local/bin/gcc-4.2 rvm install 1.9.3 --enable-shared`和`rvm install 1.9.3 --with-gcc=clang`。

终端错误信息：

```
No binary rubies available for: downloads/ruby-1.9.3-p327.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Fetching yaml-0.1.4.tar.gz to /Users/zach/.rvm/archives
Extracting yaml to /Users/zach/.rvm/src/yaml-0.1.4
Configuring yaml in /Users/zach/.rvm/src/yaml-0.1.4.
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include     CPATH=/opt/sm/pkg/active/include ./configure --prefix=/Users/zach/.rvm/usr', please read /Users/zach/.rvm/log/ruby-1.9.3-p327/yaml/configure.log
Compiling yaml in /Users/zach/.rvm/src/yaml-0.1.4.
Error running 'make', please read /Users/zach/.rvm/log/ruby-1.9.3-p327/yaml/make.log
Installing Ruby from source to: /Users/zach/.rvm/rubies/ruby-1.9.3-p327, this may take a     while depending on your cpu(s)...
ruby-1.9.3-p327 - #downloading ruby-1.9.3-p327, this may take a while depending on your     connection...
ruby-1.9.3-p327 - #extracted to /Users/zach/.rvm/src/ruby-1.9.3-p327 (already extracted)
ruby-1.9.3-p327 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include     CPATH=/opt/sm/pkg/active/include ./configure --enable-shared --disable-install-doc --    prefix=/Users/zach/.rvm/rubies/ruby-1.9.3-p327 --with-opt-dir=/Users/zach/.rvm/usr', please     read /Users/zach/.rvm/log/ruby-1.9.3-p327/configure.log
There has been an error while running configure. Halting the installation. 
```

配置日志：

```
[2012-12-05 16:13:05] env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --    prefix=/Users/zach/.rvm/usr
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... config/install-sh -c -d
checking for gawk... no
checking for mawk... no
checking for nawk... no
checking for awk... awk
checking whether make sets $(MAKE)... yes
checking for gcc... gcc-4.2
checking whether the C compiler works... no
configure: error: in `/Users/zach/.rvm/src/yaml-0.1.4':
configure: error: C compiler cannot create executables 
```

有关更多详细信息，请参阅“config.log”

从 config.log：

```
configure:2947: checking for gcc
configure:2974: result: gcc-4.2
configure:3203: checking for C compiler version
configure:3212: gcc-4.2 --version >&5
i686-apple-darwin11-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3) 
```

检查链接：

```
zach$ ls -la /usr/bin | grep gcc
lrwxr-xr-x     1 root        wheel         7 Dec  5 14:24 cc -> gcc-4.2
lrwxr-xr-x     1 root        wheel         7 Dec  5 14:15 gcc -> gcc-4.2
-rwxr-xr-x     1 root        wheel    113024 May 15  2011 gcc-4.2
-rwxr-xr-x     1 root        wheel    562992 May 15  2011 i686-apple-darwin11-gcc-4.2.1
lrwxr-xr-x     1 taylozac85  admin        52 Dec  3 21:44 i686-apple-darwin11-llvm-g++-4.2 
-> ../llvm-gcc-4.2/bin/i686-apple-darwin11-llvm-g++-4.2
lrwxr-xr-x     1 taylozac85  admin        52 Dec  3 21:44 i686-apple-darwin11-llvm-gcc-4.2
 -> ../llvm-gcc-4.2/bin/i686-apple-darwin11-llvm-gcc-4.2
lrwxr-xr-x     1 taylozac85  admin        32 Dec  3 21:44 llvm-cpp-4.2 -> ../llvm-gcc-
4.2/bin/llvm-cpp-4.2
lrwxr-xr-x     1 taylozac85  admin        32 Dec  3 21:44 llvm-g++ -> ../llvm-gcc-
4.2/bin/llvm-g++-4.2
lrwxr-xr-x     1 taylozac85  admin        32 Dec  3 21:44 llvm-g++-4.2 -> ../llvm-gcc-4.2/bin/llvm-g++-4.2
lrwxr-xr-x     1 taylozac85  admin        32 Dec  3 21:44 llvm-gcc -> ../llvm-gcc-4.2/bin/llvm-gcc-4.2
lrwxr-xr-x     1 taylozac85  admin        32 Dec  3 21:44 llvm-gcc-4.2 -> ../llvm-gcc-4.2/bin/llvm-gcc-4.2 
```

任何建议都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:57:04.363

看起来像[https://github.com/railsinstaller/railsinstaller-nix/issues/10](https://github.com/railsinstaller/railsinstaller-nix/issues/10)

最简单的方法是编辑`/etc/rvmrc`并替换该`rvm_configure_env=...`行：

```
rvm_configure_env=('LDFLAGS=-L/opt/sm/pkg/active/lib' 'CFLAGS=-I/opt/sm/pkg/active/include' 'CPATH=/opt/sm/pkg/active/include') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:31:55.160

你有没有在你的 Xcode 中安装命令行工具，`ls -la /usr/bin | grep gcc`用来检查你的 gcc 是否链接到你的 llvm-gcc

# php - 从PHP写入文件的Flash接收状态？

> ID：13734969
> 
> 赞同：0
> 
> 时间：2012-12-06T00:22:55.077
> 
> 标签：php, actionscript-3, flash, save, status

我正在尝试制作一个简单的 Flash ActionScript3 程序，通过 PHP 脚本将一些文本保存到文本文件（在我的服务器上）。我希望 Flash 程序能够检测 PHP 脚本是否无法写入。现在我只是想让 Flash 跟踪从 PHP 收到的状态。我的以下代码基于我在网上找到的一些示例。

这是我的 Flash 代码：

```
import flash.net.*;
import flash.events.*;

var varLoader:URLLoader = new URLLoader;
var varURL:URLRequest = new URLRequest("http://xxxxxxxx/outputTest.php");
var submittedData:URLVariables=new URLVariables();
varURL.data = submittedData;
varURL.method = URLRequestMethod.POST;

submittedData.inputData = "ThisIsTheDataToBeSaved";
submittedData.FileName = "ThisIsTheFileName";
varLoader.addEventListener(Event.COMPLETE, fxnDoneSaving);
varLoader.load(varURL);

function fxnDoneSaving(evt:Event):void{
    trace("Done saving.");
    trace("Write status: "+String(evt.target.data.WasWritingSuccessful));
} 
```

这是我的PHP代码：

```
<?php

$receivedFromFlashData = $_POST['inputData']; 
$receivedFromFlashFileName = $_POST['FileName']; 

$filename = $receivedFromFlashFileName . ".txt";
$myTextFileHandler = fopen($filename,"w"); 

if($myTextFileHandler)
    {$writeInTxtFile = @fwrite($myTextFileHandler,"$receivedFromFlashData");}      

fclose($myTextFileHandler); 

if ($writeInTxtFile)
    {echo "WasWritingSuccessful=success";}
else
    {echo "WasWritingSuccessful=failure";}

?> 
```

当 Flash 到达最后的跟踪语句时，我收到以下错误：“ReferenceError: Error #1069: Property WasWritingSuccessful not found on String and there is no default value.”

请帮助我理解我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:31:21.563

您需要像这样指定`dataFormat`：`varLoader``varLoader.dataFormat = URLLoaderDataFormat.VARIABLES;`

# asp.net-mvc - Entity Framework 5 的延迟加载和 Fiddler

> ID：13734970
> 
> 赞同：1
> 
> 时间：2012-12-06T00:22:55.887
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api, lazy-loading

我在理解 Entity Framework 5 中的延迟加载时遇到问题。我知道在使用延迟加载时，相关实体在请求之前不会加载：

> “使用延迟加载时，您的初始查询仅引入目标实体集。但每当您访问导航属性时，都会针对商店发出另一个查询以加载相关实体。（[参考](http://msdn.microsoft.com/en-us/data/hh949853.aspx)）”

我有一个包含两个类的 ASP.NET Web API 项目：

```
public class Farm
{
    public int FarmId { get; set; }
    public virtual ICollection<LandUnit> LandUnits { get; set; }
    ...
}
public class LandUnit
{
    public int LandUnitId { get; set; }
    ...
} 
```

我设置了 LazyLoadingEnabled = true，并让我的 POCO 类符合指南（[参考](http://msdn.microsoft.com/en-us/library/dd468057.aspx)），但是当我使用脚手架创建 FarmController 并通过 fiddler 调用它时，它显示：

```
JSON
    {}
        ...
    LandUnits
        {}
            ... 
```

如果我设置 LazyLoadingEnabled = false，那么我得到：

```
JSON
    {}
        ...
    LandUnits=(null) 
```

我是否误解了延迟加载的基础知识？在我看来，正在发生的事情与定义所说的相反。关闭延迟加载时，不会加载相关实体。开启延迟加载时，会加载相关实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:31:48.777

这是预期的行为。当 JSON 序列化器开始序列化类型时，它将枚举`LandUnits`导航属性，这当然会从数据库调用该集合的延迟加载。

当您关闭延迟加载时，您的导航属性仍将设置为其默认值，因为实体框架不会生成任何代理类型。

我建议关闭延迟加载，并急切地（使用该`Include`方法）或明确加载（使用该`Load`方法）相关数据，以确保您不会无意中加载您不需要的数据。

使用默认 JSON 序列化程序时，您还应该注意[循环依赖问题。](https://stackoverflow.com/questions/4606232/circular-reference-exception-with-json-serialisation-with-mvc3-and-ef4-ctp5w)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:44:26.207

这只是表明您还没有请求任何 LandUnits（如果您使用类似 foreach 的东西循环它们，它们将被加载）。所以使用延迟加载时 JSON 对象为空。

关闭延迟加载时，LandUnits 对象为 null，因为 LandUnits 尚未加载并且以后无法加载（尝试这样做会引发错误）

# sql - SQL在查询中减去前一行的值的最佳方法？

> ID：13734976
> 
> 赞同：1
> 
> 时间：2012-12-06T00:23:39.930
> 
> 标签：sql, sql-server

我正在尝试计算数据库中总损失的机器时间。表中的列是 MachineID aka PlantID、StartTime、EndTime。

从理论上讲，它只需按 machineID 和 StartTime 对表进行排序，然后取当前行的 StartTime 并减去前一行 EndTime。

这是我当前有效的查询：

```
SELECT SUM([StartTime] - [EndTime]) AS TotalLostTime  
FROM(SELECT * 
     FROM (SELECT ROW_NUMBER() OVER (ORDER BY [PlantID], [StartTime]) AS [Row],
                  [MachineRecords].PlantID , [MachineRecords].EndTime 
           FROM [MachineRecords]) AS a 
     JOIN (SELECT * 
           FROM (SELECT ROW_NUMBER() OVER (ORDER BY [PlantID], 
                                                        [StartTime]) AS [Row1],
                        [MachineRecords].PlantID as PlantID1 , 
                        [MachineRecords].StartTime 
                 FROM [MachineRecords]) as b) m 
     ON m.PlantID1 = a.[PlantID] 
        AND a.[Row] = m.[Row1]-1) lostTimeQuery 
```

我的问题是：是否有更好（更简洁）的方法来实现此查询的相同结果？

谢谢您的帮助。

编辑：

在 Wildplasser 发表评论后，我创建了这个查询：

```
SELECT SUM(a.StartTime - a.LagEnd) as LostTime 
FROM (SELECT [PlantID], [StartTime], [EndTime], 
             LAG([PlantID]) OVER (ORDER BY PlantID, StartTime) LagPlantID,
             LAG([EndTime]) OVER (ORDER BY PlantID, StartTime) LagEnd 
      FROM MachineRecords) a 
WHERE a.PlantID = a.LagPlantID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:15:35.397

这是我使用的结果查询:)

```
SELECT SUM(a.StartTime - a.LagEnd) as LostTime 
FROM (SELECT [PlantID], [StartTime], [EndTime], 
             LAG([PlantID]) OVER (ORDER BY PlantID, StartTime) LagPlantID,
             LAG([EndTime]) OVER (ORDER BY PlantID, StartTime) LagEnd 
      FROM MachineRecords) a 
WHERE a.PlantID = a.LagPlantID 
```

# mysql - 正确地将键值表连接到主表

> ID：13734978
> 
> 赞同：2
> 
> 时间：2012-12-06T00:24:09.553
> 
> 标签：mysql

我们有一个主表和一个辅助表来保存一堆与主表关联的键值对。这背后的原因是，随着我们数据的增长，不同类型“键”的数量也会增加。当前结构：

```
Main Table:
id|name

Secondary Table:
id|key|value 
```

我想从主表中选择所有记录，并从辅助表中选择一些键。我现在的做法是：

```
SELECT main_table.id, main_table.name, s1.value, s2.value
FROM main_table
LEFT JOIN secondary_table s1 ON s1.id = main_table.id AND s1.key = 'cats'
LEFT JOIN secondary_table s2 ON s2.id = main_table.id AND s2.key = 'dogs' 
```

我必须使用 LEFT JOIN，因为有些记录在第二个表中没有对应的记录，但无论如何我需要记录返回。这对我来说似乎效率低下而且速度很慢。也许我走错了路？如何改进结构/查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:34:09.977

我想说您应该放弃尝试在一条记录中返回所有查询数据的方法，而只是按照查询的方式查询关系数据库。所以做这样的事情“：

```
SELECT m.id, m.name, s.key, s.value
FROM main_table AS m
INNER JOIN secondary_table AS s ON m.id = s.id
WHERE key IN ('cats', 'dogs', 'tigers', 'elephants') 
```

在这种情况下，我正在成像您有一个主键`m.id`和一个复合主键`s.id, s.key`。您还需要一个单独的索引`s.key`来优化此查询。

这将在结果集中返回多行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:36:04.423

您可以使用`GROUP BY`：

```
SELECT   main_table.id, main_table.name,
         MAX(IF(s.key='cats',s.value,NULL)),
         MAX(IF(s.key='dogs',s.value,NULL))
FROM     main_table LEFT JOIN secondary_table s USING (id)
GROUP BY id 
```

# java - 我想在 Java 中的图像上创建一个不可见的可点击对象

> ID：13734981
> 
> 赞同：0
> 
> 时间：2012-12-06T00:24:09.717
> 
> 标签：java, image, swing, click, mouse

因此，我正在用 Java 创建一个游戏，其中用户单击与其他图像不同的图像。我已经为所创建的关卡制作了图像，但我只想制作这样，如果用户点击图像上的特定位置，游戏就会做出反应，继续移动到下一张图像。（所有图像都已放置在一个数组中。）游戏已设置为已打开第一张图像。这是我的代码：

```
 package Final;

    import java.awt.event.ActionListener;
    import java.awt.event.MouseEvent;
    import java.awt.event.MouseListener;
    import java.awt.*; 

    import javax.swing.JFrame;

    public class drawPictures extends JFrame implements MouseListener { //it implements this     because I want the user to click stuff
    //Now I need to declare the images that serve as my levels variables ahead of time.
    protected static Image levelOne;
    protected static Image levelTwo;
    protected static Image levelThree;
    protected static Image levelFour;
    protected static Image levelFive;
    protected Graphics g = this.getGraphics();  

    //Done declaring.

    //Now to load the images
    private static Image loadImage(String imgFileName) { 
        Image img = null;
        try {
            Toolkit tk = Toolkit.getDefaultToolkit();
            img = tk.getImage(imgFileName);
        } catch (Exception e) {
            System.err.println("Image not found: "+ imgFileName);
        }

        return img;
    } //done loading the images

    static Image [] pictureArray = new Image[5]; { //This is the array that will store all of     the images
     //otherwise known as the "levels"
    pictureArray[0] = levelOne; //each "slot" in the array is taken up by one 
    //of the images that serves as the level
    pictureArray[1] = levelTwo;
    pictureArray[2] = levelThree;
    pictureArray[3] = levelFour;
    pictureArray[4] = levelFive;
    }

    /*
     * Now that the actual array that stores the levels has been created
     * I need to create a method that "paints" the level, 
     * and moves on to the next one when the user clicks on something.
     * 
     * I also need to create a box with dimensions 151x159 
     * overtop of the happy tomato in the first level.
     * That will be the 
     */

    public drawPictures() {
     super("One of These Things Doesn't Belong...");

     setSize(1500, 750);
     setDefaultCloseOperation(EXIT_ON_CLOSE); // Creates the "x" box.
     setVisible(true); // Makes the window visible.    

     start();
 }

 public void paint(Graphics g) {
     g.drawImage(pictureArray[0], 100, 100, this);
 }

 public static void start() 
 /*
  * this entire method exists for the sole purpose of loading the images
  * that I placed in the variables that I declared above.
  * WHY IS PROGRAMMING SO DARN TEDIOUS???
  */
    {
    levelOne = loadImage("Level 1.jpg");
    levelTwo = loadImage("Level 2.jpg");
    levelThree = loadImage("Level 3.jpg");
    levelFour = loadImage("Level 4.jpg");
    levelFive = loadImage("Level 5.jpg");
    }

    @Override
    public void mouseClicked(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub

    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        start();
        new drawPictures(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:36:46.720

您永远不会在框架中添加鼠标侦听器。

话说回来...

*   您应该避免从顶级容器扩展，例如`JFrame`
*   您应该避免在顶级容器上绘画（通过覆盖任何`paint`方法）
*   您应该始终调用`super.paintXxx`（除非您有非常好的理由不这样做），因为绘制方法相当复杂并且执行许多非常重要的工作
*   除非您正在加载大图像或从 Internet 下载图像（即便如此），否则您应该使用`ImageIO`. 它支持更多的图像。

在您的鼠标单击事件中，您需要确定开始显示的当前图像。您需要确定边界并确定是否在其中单击了鼠标。

```
// Current index maintains the index of the current image...
// You should replace g.drawImage(pictureArray[0], 100, 100, this) with
// g.drawImage(pictureArray[currentIndex], 100, 100, this)
Image currentImage = pictureArray[currentIndex];
Rectangle bounds = new Rectangle(100, 100, currentImage.getWidth(this), currentImage.getHeight(this));
if (bounds.contains(arg0.getPoint()) {
  // Image was clicked...
  currentIndex++;
  if (currentIndex >= pictureArray.length) {
      currentIndex = 0;
  }
  repaint();
} 
```

**更新示例**

这是一个粗略的例子。基本上它使用一个自定义`JPanel`来绘制图像。为此，我添加了一个`MouseListener`.

主程序使用文件夹并滚动浏览，在您单击时在图像面板上显示每个（有效）图像。

鼠标点击只会在图像面板本身的上下文中发生。

```
public class ImageScoller {

    public static void main(String[] args) {
        new ImageScoller();
    }

    public ImageScoller() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ImageViewPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImageViewPane extends JPanel {

        private ImagePane imagePane;
        private File[] fileList;
        private int currentIndex = -1;

        public ImageViewPane() {

            fileList = new File("/path/to/some/folder/with/images").listFiles(new FileFilter() {
                @Override
                public boolean accept(File pathname) {
                    return pathname.isFile();
                }
            });

            imagePane = new ImagePane();
            imagePane.addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    nextImage();
                }
            });
            setLayout(new GridBagLayout());
            add(imagePane);

            nextImage();
        }

        public void nextImage() {
            if (fileList != null && fileList.length > 0) {
                currentIndex++;
                if (currentIndex < 0 || currentIndex >= fileList.length) {
                    currentIndex = 0;
                }
                Image image = null;
                /*
                    Because I don't know the contents of the folder, this is a little
                    more complicated then it really needs to be.

                    If you know the file is an image, you can simply use ImageIO.read(file)
                */
                while (image == null && currentIndex < fileList.length) {
                    System.out.println("Loading next image: " + currentIndex);
                    try {
                        ImageInputStream iis = ImageIO.createImageInputStream(fileList[currentIndex]);
                        if (iis != null) {
                            Iterator<ImageReader> imageReaders = ImageIO.getImageReaders(iis);
                            if (imageReaders != null && imageReaders.hasNext()) {
                                ImageReader imageReader = imageReaders.next();
                                imageReader.setInput(iis);
                                image = imageReader.read(0);
                            } else {
                                currentIndex++;
                            }
                        } else {
                            currentIndex++;
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                        currentIndex++;
                    }
                }
                imagePane.setImage(image);
                invalidate();
                repaint();
            }
        }
    }

    public class ImagePane extends JPanel {

        private Image image;
        private JLabel label;

        public ImagePane() {
            setLayout(new GridBagLayout());
            label = new JLabel("No image available");
            add(label);
        }

        public void setImage(Image value) {
            if (image != value) {
                image = value;
                label.setVisible(image == null);
                repaint();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? super.getPreferredSize() : new Dimension(image.getWidth(this), image.getHeight(this));
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (image != null) {
                int width = getWidth();
                int height = getHeight();
                int x = (width - image.getWidth(this)) / 2;
                int y = (height - image.getHeight(this)) / 2;
                g.drawImage(image, x, y, this);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:35:17.420

为什么要在图像上方放置一个不可见的物体？

无论如何，要回答您的问题，请创建一个与您的图像一样的 JPanel。

`JPanel yourPanel = new JPanel()`将其位置设置为与您的图像相同。
在您的 JPanel 上创建一个 MouseListener。

 ````
yourpPanel.addMouseListener( new MouseAdapter() {
   @Override
   public void mousePressed( MouseEvent evnt ){
      // Your code when clicked here
   }
});</code> 
````

# windows - 自动解锁 Windows 用户会话

> ID：13734982
> 
> 赞同：2
> 
> 时间：2012-12-06T00:24:31.893
> 
> 标签：windows, unlock, credential-providers

最近，我一直在研究 CredentialProvider，以便自动解锁（触发器可以是任何事件，因此假设计时器结束）Windows Vista（或更新版本）用户会话。

为此，我阅读了一些关于该主题的有用文章，即 GINA 和这个新架构之间的变化。[http://msdn.microsoft.com/en-us/magazine/cc163489.aspx](http://msdn.microsoft.com/en-us/magazine/cc163489.aspx)。

我想，和大家在创建自定义 CredentialProvider 的过程中一样，我不是从头开始，而是从微软提供的示例代码开始。然后我尝试改变不同函数中的行为（比如日志记录）。

所以最后我可以使用自定义的 CredentialProvider，输入 SetUsageScenario 方法，但我仍然无法到达 Set 或 GetSerialization 方法。根据我在 CredentialProvider（仍由 Microsoft 提供）的技术文档中的理解，这两种方法应该被自动调用。有什么我错过的吗？

此外，我最初的想法是使用 Kerberos 获取身份验证包，以执行隐式用户身份验证。我是通过在其他 SO 或 MSDN 线程上寻找信息来得到这个想法的

这种方法是好的吗？

非常感谢您花时间回答我的问题。欢迎任何澄清，即使它们不能直接解决我的问题:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:51:43.447

首先 - 您需要在`ICredentialProviderCredential::SetSelected(BOOL *pbAutoLogon)`和`ICredentialProvider::GetCredentialCount`方法的实现中将自动登录标志设置为 true。

接下来，您需要`ICredentialProviderEvents::CredentialsChanged`在计时器被击中时调用。LogonUI 将重新创建您的凭据，并且因为 autologon 设置为 true，它将调用您的`GetSerialization()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:25:25.917

`SetSerialization`和`GetSerialization`函数由您的提供者调用`LogonUI`。

用户输入用户名/密码并按下 ENTER 按钮后，LogonUI 调用`GetSerialization`函数并提供一个指针，作为四个参数之一，该指针将指向`CREDENTIAL_PROVIDER_CREDENTIAL_SERIALIZATION`您创建和填充的结构，然后该结构将被发送`LogonUI`到`Winlogon`执行验证。

我不知道如何让 LogonUI`GetSerialization`从您的凭据提供程序代码中调用，据我所知，您不能自己调用​​，`GetSerialization`因为如果没有人请求它，您将在哪里传递您的填充`CREDENTIAL_PROVIDER_CREDENTIAL_SERIALIZATION`结构，但只能`LogonUI`将其传递到`Winlogon`?

有一个名为“ [Credential Provider Technical Reference](http://go.microsoft.com/fwlink/?LinkId=93340) ”的文档，您可以在其中阅读有关凭据提供程序的一些详细信息。在[Shell samples 文件夹](http://archive.msdn.microsoft.com/ShellRevealed/Release/ProjectReleases.aspx?ReleaseId=2871)中有一个奇怪的文件夹，叫做“Autologon”，也许它会对你有所帮助！祝你好运！

# ruby - Ruby：模拟本地对象以测试模块方法

> ID：13734983
> 
> 赞同：2
> 
> 时间：2012-12-06T00:24:34.973
> 
> 标签：ruby, testing, rspec, module, sinatra

在 Sinatra 中工作时，会创建一个本地对象`request`，并使其可供所有视图和助手使用。因此，我可以`ApplicationHelper`使用辅助方法创建一个模块，如果在视图中调用辅助方法，它们可以依次调用`request`对象，如下所示：

```
module ApplicationHelper
  def nav_link_to(text,path)
    path == request.path_info ? klass = 'class="current"' : klass = ''
    %Q|<a href="#{path}" #{klass}>#{text}</a>|
  end
end 
```

现在，我想对此进行测试，但在我的测试中，该`request`对象不存在。我试图嘲笑它，但这没有用。到目前为止，这是我的测试：

```
require 'minitest_helper'
require 'helpers/application_helper'

describe ApplicationHelper do

  before :all do
    @helper = Object.new
    @helper.extend(ApplicationHelper)
  end

  describe "nav links" do
    before :each do
      request = MiniTest::Mock.new
      request.expect :path_info, '/'
    end

    it "should return a link to a path" do
      @helper.nav_link_to('test','/test').must_equal '<a href="/test">test</a>'
    end

    it "should return an anchor link to the current path with class 'current'" do
      @helper.nav_link_to('test','/').must_equal '<a href="test" class="current">test</a>'
    end
  end
end 
```

那么，您如何模拟一个“本地”对象，以便您的测试代码可以调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:38:07.243

您需要确保`request`您的`@helper`对象上有一个返回模拟请求对象的方法。

在 RSpec 我只是存根它。我对 Minitest 不是特别熟悉，但快速浏览一下表明这可能在最近的版本中有效（如果你在你的 中更改`request`为）：`@request``before :each`

```
it "should return a link to a path" do
  @helper.stub :request, @request do
    @helper.nav_link_to('test','/test').must_equal '<a href="/test">test</a>'
  end
end 
```

**更新**

由于 Minitest 要求已经在对象上定义了存根方法，因此您可以创建`@helper`一个实例`Struct.new(:request)`而不是`Object`，即

```
@helper = Struct.new(:request).new 
```

实际上，这样做之后，您可能根本不需要存根！你可以做

```
before :each do
  @helper.request = MiniTest::Mock.new
  @helper.request.expect :path_info, '/'
end 
```

# objective-c - iOS 视图变换动画

> ID：13734984
> 
> 赞同：8
> 
> 时间：2012-12-06T00:24:52.637
> 
> 标签：objective-c, ios, core-animation, cgaffinetransformscale

我可能错过了一些简单的东西，但试图用图像视图做一个简单的“肯伯恩斯效应”。

首先是代码：

```
[UIView animateWithDuration:20
                      delay:2
                    options:UIViewAnimationCurveLinear
                 animations:^{
                   CGAffineTransform move = CGAffineTransformMakeTranslation(40, 40);
                   CGAffineTransform zoom    = CGAffineTransformMakeScale(1.2, 1.2);
                   CGAffineTransform transform = CGAffineTransformConcat(zoom, move);
                   self.imageView.transform = transform;
                 }
                 completion:^(BOOL finished){
                   NSLog(@"Done");
                 }]; 
```

我希望这将从正常比例的图像视图开始，并在 20 秒内将其扩展到 120% 的大小。实际发生的是它开始时立即小于正常大小，然后扩展为正常大小。

如果我使用比例值的倒数，它开始放大然后缩小到正常比例，这与我想要的效果相反。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T16:33:06.063

好的，这实际上有效并且可以满足我的要求。

```
CABasicAnimation *transformAnimation = [CABasicAnimation animationWithKeyPath:@"transform"];
transformAnimation.duration = 20.0;
transformAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transformAnimation.removedOnCompletion = NO;
transformAnimation.fillMode = kCAFillModeForwards;

CATransform3D xform = CATransform3DIdentity;
xform = CATransform3DScale(xform, 1.2, 1.2, 1.0);
xform = CATransform3DTranslate(xform, 60, -60, 0);
transformAnimation.toValue = [NSValue valueWithCATransform3D:xform];
[self.imageView.layer addAnimation:transformAnimation forKey:@"transformAnimation"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:38:09.617

听起来视图正在由其父视图重新布局以响应变换的变化，一旦在动画块中设置变换，就将其缩小为变换的最终结果。关键是您的第一次尝试直接对视图进行更改，而第二种方法适用于图层。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-06T00:35:43.163

您是否尝试从 imageView 的当前转换开始？

```
[UIView animateWithDuration:20
                      delay:2
                    options:UIViewAnimationCurveLinear
                 animations:^{
                   CGAffineTransform trans = self.imageView.transform;
                   CGAffineTransformTranslate(trans, 40, 40);
                   CGAffineTransformScale(trans, 1.2, 1.2);
                   self.imageView.transform = trans;
                 }
                 completion:^(BOOL finished){
                   NSLog(@"Done");
                 }]; 
```

# asp.net-mvc-4 - 如何将数据从 WEBAPI JSON 提供给 FullCalendar

> ID：13734985
> 
> 赞同：0
> 
> 时间：2012-12-06T00:25:11.257
> 
> 标签：asp.net-mvc-4, asp.net-web-api, fullcalendar

```
<script type="text/javascript">
    $(document).ready(function() {
    // page is now ready, initialize the calendar...
        $('#calendar').fullCalendar({

            url: 'http://localhost/CalendarAPI/api/calendar/'
    })

    });
    </script> 
```

我想从 WebAPI Json 提供日历数据。当我单击上面的链接时，我可以看到 JSON 数据，并且可以下载格式正确的 JSON 数据。

在将上述 JSON 提供给 FullCalender JQuery 插件时需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T07:25:05.880

你的 js 代码应该是这样的：

```
$('#calendar').fullCalendar({
   url: '/api/ControllerName/GetEvents/'
}) 
```

GetEvents - 动作名称。

你的事件模型应该是这样的：

```
public class EventModel
{
    public int id { get; set; }
    public DateTime? start { get; set; }
    public DateTime? end { get; set; }
    public string title { get; set; }
    public bool allDay { get; set; }
} 
```

在您的控制器中，使用如下代码创建一个操作 (GetEvents)：

```
public IEnumerable<EventModel> GetEvents()
    {
        //data from database
        CalendarEntities _db = new CalendarEntities();
        var events = _db.Events.ToList();
        IEnumerable<EventModel> listEvents = events.Select(_event => new EventModel
        {
            id = _event.Id,
            title = _event.Caption,
            start = _event.TimeStart,
            end = _event.TimeEnd,
            allDay = _event.AllDay
        });
        return listEvents;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:12:14.020

fullcalendar 的文档真的很好，随便看看：[http ://arshaw.com/fullcalendar/docs/event_data/events_json_feed/](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)

您有多种方法可以包含脚本中的数据。最简单的方法是：

```
$('#calendar').fullCalendar({
    events: '/myfeed.php'
}); 
```

您还可以使用扩展表单来传递更多选项：

```
$('#calendar').fullCalendar({

    eventSources: [

        // your event source
        {
            url: '/myfeed.php',
            type: 'POST',
            data: {
                custom_param1: 'something',
                custom_param2: 'somethingelse'
            },
            error: function() {
                alert('there was an error while fetching events!');
            },
            color: 'yellow',   // a non-ajax option
            textColor: 'black' // a non-ajax option
        }

        // any other sources...

    ]

}); 
```

# apache - htaccess 子域重定向无限循环

> ID：13734987
> 
> 赞同：0
> 
> 时间：2012-12-06T00:25:23.480
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, modx

我有一个域和一个通过 dns 指向域的子域。

我们希望 subdomain.domain.com 的请求指向 /a/b/page，同时保留子域。

例如：subdomain.domain.com 转到 subdomain.domain.com/a/b/page

它目前处于无限循环中。

```
RewriteCond %{HTTP_HOST} subdomain.mydomain.com
RewriteCond %{REQUEST_URI} !^/a/b/page$
RewriteRule (.*) http://subdomain.mydomain.com/a/b/page [R=301,L] 
```

我们使用 apache2 和 modx 作为 cms。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:10:24.457

根据你的例子：

`subdomain.domain.com`

去（重定向到，被重写为）

`subdomain.domain.com/a/b/page`

```
RewriteCond %{HTTP_HOST} ^subdomain.*$
RewriteRule (.*) http://subdomain.mydomain.com/a/b/page [R=301,L] 
```

没有必要检查 URI，因为没有。

# jquery - 声明 jQuery Validate 插件规则——属性 vs. 类 vs. 代码

> ID：13734988
> 
> 赞同：26
> 
> 时间：2012-12-06T00:25:31.957
> 
> 标签：jquery, jquery-validate

在 jQuery Validate 插件的示例中，我看到了声明验证规则的三种不同方法：

*   CSS 类——例如`<input type="text" name="whatever" class="required" />`
*   属性——例如`<input type="text" name="whatever" required />`
*   JS 代码——例如`$("#myForm").validate({ rules: { whatever: "required", ... } });`

但是我在文档中没有看到任何地方解释了为什么你会使用一个而不是另一个。我也没有看到关于如何将[验证方法](http://docs.jquery.com/Plugins/Validation#List_of_built-in_Validation_methods)与每种方法一起使用的说明（例如，您将如何将“max(value)”方法与标签属性或 css 类一起使用？）。

这三种方法之间的权衡是什么？您如何使用每种方法声明所有不同的验证方法？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-30T11:06:09.150

您可以通过数据规则属性应用规则。这是维护干净代码的最简单方法，也可能是最好的方法......

例子：

```
<form id="myform">
    <input type="text" name="email" data-rule-required="true" data-rule-email="true">    
    <input type="text" name="password" id="password" data-rule-required="true" data-rule-minlength="6">
    <input type="text" name="password-confirm" data-rule-required="true" data-rule-minlength="6" data-rule-equalto="#password">
</form> 
```

您甚至可以通过数据属性提供消息：

```
<input id="cemail" name="email" data-rule-required="true" data-rule-email="true" data-msg-email="Please enter a valid email address" /> 
```

在 JavaScript 中只需调用：

```
$('#myform').validate(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T22:27:14.827

从文档[http://jqueryvalidation.org/rules](http://jqueryvalidation.org/rules)：

> 有几种方法可以指定验证规则。
> 
> *   可以将不带参数的验证方法指定为元素上的类（推荐）
> *   带参数的验证方法可以指定为属性（推荐）
> *   两者都可以使用元数据插件指定为元数据 [[[请注意，这已被弃用，因此文档似乎有点过时]]]
> *   两者都可以使用 validate() 方法的规则选项指定

[https://stackoverflow.com/a/14380401/749227](https://stackoverflow.com/a/14380401/749227)有一些额外的有用信息。

不过，我更喜欢在类上使用“必需”属性。我没有发现这种原生属性支持它在文档中直接引用，但因为看起来屏幕阅读器会发现它比 class="required" 更有用，所以在这种情况下我会选择它。

顺便说一句，我很想看看插件还尊重哪些其他原生属性。以及 ADT 获取了哪些信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T14:37:44.980

在回答您的具体问题时：

*“您将如何使用带有标签属性的“max(value)”方法”*

```
<input id="mytext" name="mytext" max="2"/> 
```

*“您如何将“max(value)”方法与... CSS 类一起使用？*

您不能这样做，请使用其他方法之一来设置规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T10:26:05.873

您可以使用 data-rule-required 属性，请不要使用 jquery.metadata.js ，我在 jQuery Validation Plugin 1.11.1 中进行了测试

# jquery - 将 JSON 转换为 JSONP 需要什么

> ID：13734993
> 
> 赞同：3
> 
> 时间：2012-12-06T00:26:05.657
> 
> 标签：jquery, json, backbone.js, jsonp

简单的问题，如果我有像这样的静态文件（使用 mockJSON web 生成的 JSON）

[http://www.webwrx.sk/clients/data.json.txt](http://www.webwrx.sk/clients/data.json.txt)

我需要对此文件做什么才能将其更改为 JSONP？我需要以某种方式修改它吗？像 api.flickr.com 这样的文件有什么不同？

[http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any%20&format=json&jsoncallback=](http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any%20&format=json&jsoncallback=) ?

我什至在该文件中添加了 ()：

[http://www.webwrx.sk/clients/data2.json.txt](http://www.webwrx.sk/clients/data2.json.txt)

仍然以下代码不起作用：

```
 var params = _.extend({
        'method': 'GET',
        'url': this.url,
        'cache': true,
        'dataType': 'jsonp',
        processData: true
    }, options);

    return $.ajax(params); 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T00:27:54.123

JSON 和 JSONP 格式之间的唯一区别是后者中存在函数调用。

JSON：

```
[ "foo", "bar" ] 
```

JSONP：

```
callback([ "foo", "bar" ]) 
```

确保您在代码中定义了该名称的函数（此处`callback`为：），因为它将被调用：

```
function callback(jsondata) {
  console.log("I got this:", jsondata)
} 
```

jQuery 抽象了回调命名的东西，所以你可以简单地使用 "jsoncallback=?" 在 URI 中（假设服务器足够灵活，可以知道根据参数命名函数），并将匿名函数传递给 jQuery 调用。jQuery 会将函数分配给自动生成的随机名称，然后用该名称替换 URI 中的问号。但是，如果您正在读取静态文件，则不能这样做（它将具有固定的函数名称，因此无法将其动态更改为 jQuery 传递给它的自动生成名称）。[这](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)是一个使用 jQuery 的工作示例（不是我的）。

# facebook-opengraph - 某些页面的打开图形图像正在正确加载，但其他页面则没有

> ID：13734995
> 
> 赞同：3
> 
> 时间：2012-12-06T00:26:12.793
> 
> 标签：facebook-opengraph

这是我想在 Facebook 上共享的所有页面上加载的开放图形图像。它在某些页面上正确加载，而在其他页面上则从页面中选择随机图像。以下是 OG 网址。我正在为我的网站使用 Drupal CMS。所有正确的代码似乎都已到位。

[http://www.vaeducationoxnard.com/sites/default/files/styles/square_thumbnail/public/Charter%20Square%20Logo.png](http://www.vaeducationoxnard.com/sites/default/files/styles/square_thumbnail/public/Charter%20Square%20Logo.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T07:11:52.520

这是因为，facebook 将整个新请求发送到您传递的 url，因此它从 og:image 获取图像，您在其中传递了默认图像。要克服这个问题，请尝试在您传递的 url 中添加图像参数

前任。你的/url?imgToShare=

在您设置元标记的主页中，添加一个条件

```
<?php
if(isset($_REQUEST['imgToShare'])
{
 <set the meta tags for image you want>
}
else
{
 <meta tag with the default image>
}
?> 
```

这对我有帮助。

如果您有任何疑问，请发表评论。

# visual-c++ - 在禁用优化的情况下发布链接缓慢

> ID：13734997
> 
> 赞同：4
> 
> 时间：2012-12-06T00:26:26.803
> 
> 标签：visual-c++, linker

我有一个项目（VC2005），它需要不合理的时间（超过 40 分钟）才能在 Release 中链接，而在 Debug 中链接的时间不到 5 秒。

两个版本都禁用了增量链接，并且所有文件都位于同一驱动器上。在 Release 中禁用链接器优化没有帮助。

任务管理器从不显示链接器使用的内存超过 150,000 K，这对于具有 3GB RAM 的计算机来说不算什么。

我正在构建更大的项目，并且从未注意到构建时间的这种差异。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-05-29T19:50:21.740

如前所述，最可能的原因是 /LTCG（整个程序优化）。

其他因素可能是使用 /Gy 编译的单个文件（您应该在输出中看到一些警告），或 /OPT:REF、/OPT:ICF（检查项目属性/链接器/优化），或者 - 不太可能 - 你在不知不觉中运行 PGO 仪器的某个阶段。