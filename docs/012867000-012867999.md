# StackOverflow 问答 12867000-12867999

# java - 如何删除Java中的代理字符？

> ID：12867000
> 
> 赞同：14
> 
> 时间：2012-10-12T20:57:07.237
> 
> 标签：java, string, surrogate-pairs

我正面临一种情况，即我在保存到 MySql 5.1 的文本中获取代理字符。由于不支持 UTF-16，因此我想在将其保存到数据库之前通过 java 方法手动删除这些代理对。

我现在已经编写了以下方法，我很想知道是否有直接和最佳的方法来处理这个问题。

在此先感谢您的帮助。

```
public static String removeSurrogates(String query) {
    StringBuffer sb = new StringBuffer();
    for (int i = 0; i < query.length() - 1; i++) {
        char firstChar = query.charAt(i);
        char nextChar = query.charAt(i+1);
        if (Character.isSurrogatePair(firstChar, nextChar) == false) {
            sb.append(firstChar);
        } else {
            i++;
        }
    }
    if (Character.isHighSurrogate(query.charAt(query.length() - 1)) == false
            && Character.isLowSurrogate(query.charAt(query.length() - 1)) == false) {
        sb.append(query.charAt(query.length() - 1));
    }

    return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T21:08:46.660

这里有几件事：

*   [`Character.isSurrogate(char c)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isSurrogate%28char%29)：

    > char 值是代理代码单元当且仅当它是低代理代码单元或高代理代码单元。

*   检查对似乎毫无意义，为什么不直接删除所有代理？

*   `x == false`相当于`!x`

*   [`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)在不需要同步的情况下更好（例如永远不会离开本地范围的变量）。

我建议这样做：

```
public static String removeSurrogates(String query) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < query.length(); i++) {
        char c = query.charAt(i);
        // !isSurrogate(c) in Java 7
        if (!(Character.isHighSurrogate(c) || Character.isLowSurrogate(c))) {
            sb.append(firstChar);
        }
    }
    return sb.toString();
} 
```

### 分解`if`声明

您询问了以下声明：

```
if (!(Character.isHighSurrogate(c) || Character.isLowSurrogate(c))) {
    sb.append(firstChar);
} 
```

理解它的一种方法是将每个操作分解为它自己的函数，这样您就可以看到该组合符合您的预期：

```
static boolean isSurrogate(char c) {
    return Character.isHighSurrogate(c) || Character.isLowSurrogate(c);
}

static boolean isNotSurrogate(char c) {
    return !isSurrogate(c);
}

...

if (isNotSurrogate(c)) {
    sb.append(firstChar);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-12T23:13:13.707

Java 字符串存储为 16 位字符序列，但它们表示的是 unicode 字符序列。在 unicode 术语中，它们存储为代码单元，但模型代码点。因此，谈论删除字符/代码点表示中不存在的代理有点毫无意义（除非您有流氓单个代理，在这种情况下您还有其他问题）。

相反，您要做的是删除编码时需要代理的任何字符。这意味着任何超出基本多语言平面的字符。你可以用一个简单的正则表达式来做到这一点：

```
return query.replaceAll("[^\u0000-\uffff]", ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T21:07:22.970

为什么不简单

```
for (int i = 0; i < query.length(); i++) 
    char c = query.charAt(i);
    if(!isHighSurrogate(c) && !isLowSurrogate(c))
        sb.append(c); 
```

您可能应该用“？”替换它们，而不是直接擦除它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T11:26:21.233

只是好奇。如果 char 是高代理，是否需要检查下一个？它应该是低代理。修改后的版本将是：

```
public static String removeSurrogates(String query) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < query.length(); i++) {
        char ch = query.charAt(i);
        if (Character.isHighSurrogate(ch))
            i++;//skip the next char is it's supposed to be low surrogate
        else
            sb.append(ch);
    }    
    return sb.toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-18T09:29:22.873

如果删除，所有这些解决方案都是有用的，但如果 repalce，下面会更好

```
StringBuffer sb = new StringBuffer();
    for (int i = 0; i < s.length(); i++) {
        char c = s.charAt(i);
        if(Character.isHighSurrogate(c)){
            sb.append('*');
        }else if(!Character.isLowSurrogate(c)){
            sb.append(c);
        }
    }
    return sb.toString(); 
```

# c# - 未处理的异常 Microsoft.Practices.Unity.ResolutionFailedException

> ID：12867002
> 
> 赞同：1
> 
> 时间：2012-10-12T20:57:10.593
> 
> 标签：c#

我有一个关于 Microsoft.Practices.Unity.ResolutionFailedException 的问题。

如果我手动启动，它工作正常。

但是当我尝试通过 Windows 任务调度程序启动时，

它说

'ResolutionFailedException 未处理'

依赖项解析失败，type = "MainPresenter"，name = "(none)"。发生异常时：调用构造函数 XX.Main()。例外是：FormatException - 输入字符串的格式不正确。

这是我的代码：

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
using (IUnityContainer container = new UnityContainer())
{
  container.RegisterType<IMainView, Main>();
  MainPresenter presenter = container.Resolve<MainPresenter>();
  Application.Run((Form)presenter.View);
} 
```

主要代码：

```
public partial class Main : Form, IMainView
{
    public Main()
    {
    }
} 
```

IMainView 代码：

```
public interface IMainView
{
} 
```

MainPresenter 代码：

```
public class MainPresenter
{
    public MainPresenter( IMainView view )
    {
        this.view = view;
    }
    public IMainView View
    {
        get { return view; }
    }
    private readonly IMainView view;
} 
```

程序代码：

```
static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        /// 

        [STAThread]
        static void Main()
        {

            bool bNew;
            Mutex mutex = new Mutex(true, "XX", out bNew);

            if (bNew)
            {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                using (IUnityContainer container = new UnityContainer())
                {
                    container.RegisterType<IMainView, Main>();
                    MainPresenter presenter = container.Resolve<MainPresenter>();
                    Application.Run((Form)presenter.View);
                }
            }
            else
            {
                Application.Exit();
            }
        }
    } 
```

谢谢。

# android - 如何从我的应用程序共享首选项屏幕调用 android 设置

> ID：12867004
> 
> 赞同：2
> 
> 时间：2012-10-12T20:57:15.943
> 
> 标签：android, android-intent

我的 android 应用程序中有一个共享首选项文件。在我的首选项文件 (xml) 中，我有多个 CheckBoxPreferences。我想添加另一个首选项，以便当用户按下它时，他将获得 android 位置首选项 (gps)。

我试图将其添加到我的 pref 文件中：

```
 <Preference xmlns:android="http://schemas.android.com/apk/res/android"
        android:key="pref_key_gpsStatus"
        android:title="Gps Settings" /> 
```

并尝试在 onPreferenceClick 和 onSharedPreferenceChanged 上捕获它并按意图调用 gps 设置：

```
startActivity(new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS)); 
```

当我点击首选项时，什么也没发生。

我尝试的另一件事是在 xml 文件中：

```
<Preference xmlns:android="http://schemas.android.com/apk/res/android"
    android:key="pref_key_gpsStatus"
    android:title="Gps Settings" />

    <intent 
        android:action="android.settings.WIRELESS_SETTINGS"/> 
```

和..仍然没有发生任何事情。

有人有想法吗？

谢谢！

这是完整的 pref.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
<CheckBoxPreference
    android:defaultValue="true"
    android:key="@string/pref_key_shakeSense"
    android:summaryOff="@string/shakeOff"
    android:summaryOn="@string/shakeOn"
    android:title="@string/shakeSence" />

<CheckBoxPreference
    android:defaultValue="true"
    android:key="@string/pref_key_locationViewShots"
    android:summaryOff="@string/displayOff"
    android:summaryOn="@string/displayOn"
    android:title="@string/locationViewShots" />

<CheckBoxPreference
    android:defaultValue="true"
    android:key="@string/pref_key_sound"
    android:summaryOff="@string/soundOff"
    android:summaryOn="@string/soundOn"
    android:title="@string/speakUserLocation" />

<CheckBoxPreference
    android:defaultValue="false"
    android:key="@string/pref_key_Zoom"
    android:summaryOff="@string/notActive"
    android:summaryOn="@string/active"
    android:title="@string/autoZoom" />

<Preference 
    android:key="pref_key_gpsStatus"
    android:title="Gps Settings" />
    <intent android:action="android.settings.WIRELESS_SETTINGS"/>
</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:41:10.823

在此代码段中，意图超出了偏好。

```
<Preference xmlns:android="http://schemas.android.com/apk/res/android"
    android:key="pref_key_gpsStatus"
    android:title="Gps Settings" />

<intent android:action="android.settings.WIRELESS_SETTINGS"/> 
```

您应该将其作为首选项的一部分附上：

```
<Preference xmlns:android="http://schemas.android.com/apk/res/android"
    android:key="pref_key_gpsStatus"
    android:title="Gps Settings" >

    <intent android:action="android.settings.WIRELESS_SETTINGS"/>

</Preference> 
```

# jquery - 如何在 jQuery 中解析这个 JSON 返回值？

> ID：12867007
> 
> 赞同：0
> 
> 时间：2012-10-12T20:57:26.380
> 
> 标签：jquery, json

我正在向我的 jQuery 函数脚本返回一个 JSON 数组，但似乎无法使语法正确——即使在这里阅读了大约十几个不同的示例。

这是调用 jQuery ajax 函数：

```
$.ajax({
    url: "fetchAlleles.php",
    datatype: 'json',
    data: {'mndx': mndx, 'sndx': sndx },
    success: function(rtnval) {
      alert("success: allele_1="+rtnval['allele_1']+", allele_2="+rtnval['allele_2']);
      //alert(rtnval);
    },
    error: function() { alert('Error!'); }
    }); 
```

这是返回值的 PHP 代码：

```
echo "{";
echo "allele_1: ", json_encode($ary[0]), "\n";
echo "allele_2: ", json_encode($ary[1]), "\n";
echo "run_date: ", json_encode($ary[2]), "\n";
echo "}"; 
```

如果我使用我的警报调试语句，我可以看到返回的是我所期望的：

```
{allele_1: "440"
allele_2: "480"
run_date: null
} 
```

但是我尝试读取 JSON 对象中的值的其他任何内容都会返回“未定义”，无论是

```
alert("success: allele_1="+rtnval['allele_1']+", allele_2="+rtnval['allele_2']); 
```

或者

```
alert("success: allele_1="+rtnval.allele_1+", allele_2="+rtnval.allele_2); 
```

或者

```
alert("success: allele_1="+rtnval['allele_1'][0]+", allele_2="+rtnval['allele_2'][0]); 
```

希望有人能提供帮助——这太令人恼火了！（希望 JSON 语法更明显！）

非常感谢，里克斯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T20:59:56.037

您的 JSON 内容似乎不是有效的 JSON - 您应该在字段名称周围加上引号，例如

```
{ "allele_1": "value", ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T20:59:29.697

如果你 make `datatype`->`dataType`你的 json 将被 jQuery 解析。

```
$.ajax({
    url: "fetchAlleles.php",
    dataType: 'json',
    data: {'mndx': mndx, 'sndx': sndx },
    success: function(rtnval) {
      alert("success: allele_1="+rtnval['allele_1']+", allele_2="+rtnval['allele_2']);
      //alert(rtnval);
    },
    error: function() { alert('Error!'); }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T21:01:14.667

PHP json 输出无效，因为它不包含逗号。

将php输出更改为：

```
echo json_encode(array(
    'allele_1' => $ary[0],
    'allele_2' => $ary[1],
    'run_date' => $ary[2]
)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T20:59:29.467

使用 jQuery.parseJSON 使这更容易[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

这是他们的例子：

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name ); //John 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T20:59:40.817

使用`JSON.parse(rtnVal)`此功能可在所有最新浏览器中使用，并将字符串转换为 JSON

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-12T21:01:22.773

好的，所以我想向您建议两件事。

首先。当您将值从 PHP 返回到 JavaSctipt 时，您只需要执行一个`json_encode()`命令。只需在常规 PHP 数组中构建您的数据（是的，它可以是嵌套数组）。

只需`echo json_encode($data)`在脚本末尾执行一个。

其次，如果您正在处理一个对象，您将希望使用 JavaSctipt 使用点语法访问该数据。处理数组时可以使用方括号（键）语法。

*   `{ 'key1':'value1' }`
    在这里你会用`data.key`得到`value1`

*   `{ 'key1':[ 'array_value1', 'array_value2', ... ] }`
    在这里，您将`data.key1[1]`使用`array_value2`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-12T21:21:16.557

首先，就像其他人提到的那样，您的 JSON 无效。它应该是这样的：

```
{
"allele_1": "440",
"allele_2": "480",
"run_date": null
} 
```

如果您不确定您的 json，请尝试使用[jsonlint](http://jsonlint.com/)之类的东西，它会为您检查。

您在 php 中使用 json_encode() 的方式似乎也有点奇怪。最好将所有内容放在一个数组中，然后对整个数组进行一次 json_encode。您可以通过在 php 中构造数组来重新创建 json 结果，如下所示：

```
$json_output = array(
    'allele_1' => '440',
    'allele_2' => '480',
    'run_date' => null
);

echo $json_output; 
```

最后，您访问 $.ajax 响应的方式不正确，您访问的数据就像是一个数组，但它是一个对象。

```
success: function(rtnval) {
    alert("success: allele_1="+rtnval.allele_1+", allele_2="+rtnval.allele_2);
} 
```

试试这样。

# sql-server - 为应用程序创建 sql server 用户

> ID：12867008
> 
> 赞同：0
> 
> 时间：2012-10-12T20:57:34.283
> 
> 标签：sql-server

我有一个创建自己的用户的应用程序，然后这些用户登录到应用程序并访问数据库。应该如何创建用户，我应该有一个用户表还是应该创建数据库级用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:30:26.067

这是一个非常开放的问题，例如，您忽略了它是基于 Web 还是基于桌面的应用程序 - 但这里有一些想法。

您在谈论多少用户以及什么样的营业额。数千？百万？十？随着数量和/或营业额越来越大，用户表看起来越来越好。例如，亚马逊允许我们创建自己的购物车，因为我们不是他们数据库服务器上的用户。

对于具有数据库级别用户的公司内部的数据库通常更有意义。它使您不必在应用程序中定义整个安全子系统，并确保 Microsoft 和全球数百万用户已经解决了任何漏洞。

预先在数据库中创建用户表要简单得多。但是，它在您必须构建的业务规则和安全子系统上投入了大量工作。（除了它创建的提到的漏洞之外）

同时，预先利用数据库用户和角色可能会更加复杂（如果您是在应用程序中进行的）。您需要熟悉 tsql、系统存储过程、SMO 等的人。但从长远来看，管理角色、用户、组、权限等会容易得多，另外还有一个好处是您可以在必要时在应用程序之外对其进行管理。

无论哪种方式，您的应用程序都必须弄清楚它如何使用连接字符串。数据库级用户路由要求连接字符串特定于每个用户。除非您打算使用带有 Windows 身份验证的域帐户 -*我认为这是尽可能采用的方法。*

# php - 您的 SQL 语法有错误；检查与您的 MySQL 服务器相对应的手册

> ID：12867011
> 
> 赞同：1
> 
> 时间：2012-10-12T20:58:05.857
> 
> 标签：php, mysql

```
mysql_query("
    INSERT INTO trades (id, cpair, oprice, cprice, bos, ooc, dateandtime) 
    VALUES (null, $currency, $openingprice, $closingprice, $buysell, 
    $openorclosed, $datetime"
); 
```

这段代码有什么问题是这样的错误？

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ' , 1, 1, 2012-10-12 13:57:08' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:01:37.957

您不能为 id 插入 NULL，这可能是必填字段。

如果它是自动递增的，只需忽略它，它就会自动填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:01:55.187

任何字符串都需要在 MySQL 命令字符串中引用，并且您可能需要调用函数来从字符串转换日期时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:02:52.247

哇！一方面，您不会将字符串视为字符串。您只是在该查询中回显任何内容。坏主意，如您所见，行不通。

您至少需要在 VALUES() 语句中作为字符串的每个 var 周围添加单引号。

```
mysql_query("
    INSERT INTO trades (id, cpair, oprice, cprice, bos, ooc, dateandtime) 
    VALUES (null, $currency, $openingprice, $closingprice, $buysell, 
    $openorclosed, '$datetime'"
); 
```

下一步是切换到[PDO](http://php.net/manual/en/book.pdo.php)并清理您的输入。

# php - PHP 表单超时

> ID：12867013
> 
> 赞同：0
> 
> 时间：2012-10-12T20:58:09.133
> 
> 标签：php, forms, timeout

我有一个 php 表单。它只有 10 个左右的字段，但可能需要一两个小时才能填写。

但是，php 页面在 20 分钟左右后超时，这意味着您可以花时间在字段中输入数据，但是如果您没有单击提交，表单会处理，不会将数据插入 mySQL 数据库，并返回一个空白表格，让用户重新输入所有数据。

我试过设置`session.gc_maxlifetime`, javascript`setInterval`和`setTimeout`, and`.htaccess`解决方案，都无济于事。

大约 20 分钟后：空白表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:01:40.543

PHP 没有表格。HTML 可以。HTML 不能“超时”。听起来好像是会话超时

# asp.net - w3school asp.net 的语法好像不是 asp.net？

> ID：12867014
> 
> 赞同：0
> 
> 时间：2012-10-12T20:58:15.063
> 
> 标签：asp.net

我正在看[这个页面](http://www.w3schools.com/aspnet/webpages_database.asp)，`@{`看起来很整洁。我修改了示例并创建了一个新的 asp.net 项目。我的代码如下。我的结果出乎意料。这出现在我的浏览器上

```
@foreach(var row in new int[1,4,3]) { @row } 
```

现在我假设页面上的代码是 asp.net 并且我做错了什么。

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
@foreach(var row in new int[1,4,3])
{
<tr> 
<td>@row</td> 
</tr> 
}
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:07:30.103

这是 Razor 语法，在 asp.net mvc 中使用起来非常简单灵活。

[访问链接](http://www.asp.net/web-pages/tutorials/basics/2-introduction-to-asp-net-web-programming-using-the-razor-syntax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:31:46.083

使用 MVC3，使用 Razor View Engine 搜索它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:25:36.777

在 MSVS2012 中，MVC 包含在 Ultimate 和 Express Edition 中。否则你可以从这里获取帮助 [asp.net MVC4](http://www.asp.net/mvc/mvc4)

# jquery - 通过jquery更改文本后按钮样式混乱

> ID：12867016
> 
> 赞同：0
> 
> 时间：2012-10-12T20:58:17.883
> 
> 标签：jquery, jquery-ui, jquery-mobile

所以我有一个按钮，我想更新它的文本，以便其中一个字符是红色的。我实现的方式是将html设置为按钮。

```
<div data-role="page" id="homepage">
   <div data-role="content">
    <a id='mybutton' href="#" data-role="button" data-icon="check">My Button</a>
   </div>    
</div> 
```

这里是我如何通过 jQuery 更新它

```
.redtext{color:red;font-size:medium;text-shadow: aqua;}​

$("#mybutton").html("My Button(<span class='redtext'>0</span>)");​ 
```

零确实是红色的，但按钮形状现在变形了，样式似乎也被移除了。请在此处查看演示[http://jsfiddle.net/tqeF9/](http://jsfiddle.net/tqeF9/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:00:51.040

# algorithm - 算法：在圆圈中找到峰值

> ID：12867018
> 
> 赞同：2
> 
> 时间：2012-10-12T20:58:23.773
> 
> 标签：algorithm, language-agnostic, geometry

给定`n`整数，排列成一个圆圈，显示一种可以找到一个峰值的有效算法。一个峰值是一个不小于它旁边的两个数字的数字。

一种方法是遍历所有整数并检查每个整数以查看它是否是峰值。这就产生`O(n)`了时间。似乎应该有一些方法来分而治之，以提高效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:05:07.853

### 编辑

好吧，Keith Randall 证明我错了。:)

这是用 Python 实现的 Keith 的解决方案：

```
def findPeak(aBase):
    N = len(aBase)
    def a(i): return aBase[i % N]

    i = 0
    j = N / 3
    k = (2 * N) / 3
    if a(j) >= a(i) and a(j) >= a(k)
        lo, candidate, hi = i, j, k
    elif a(k) >= a(j) and a(k) >= a(i):
        lo, candidate, hi = j, k, i + N
    else:
        lo, candidate, hi = k, i + N, j + N

    # Loop invariants:
    # a(lo) <= a(candidate)
    # a(hi) <= a(candidate)

    while lo < candidate - 1 or candidate < hi - 1:
        checkRight = True
        if lo < candidate - 1:
            mid = (lo + candidate) / 2
            if a(mid) >= a(candidate):
                hi = candidate
                candidate = mid
                checkRight = False
            else:
                lo = mid
        if checkRight and candidate < hi - 1:
            mid = (candidate + hi) / 2
            if a(mid) >= a(candidate):
                lo = candidate
                candidate = mid
            else:
                hi = mid

    return candidate % N 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:56:28.997

这是一个递归`O(log n)`算法。

假设我们有一个数字数组，并且我们知道该段的中间数字不小于端点：

```
A[i] <= A[m] >= A[j] 
```

对于 i,j 索引到数组中，并且`m=(i+j)/2`. 检查端点和中点之间的元素，即索引`x=(3*i+j)/4`和处的元素`y=(i+3*j)/4`。如果`A[x]>=A[m]`，则在区间上递归`[i,m]`。如果`A[y]>=A[m]`，则在区间上递归`[m,j]`。否则，在区间上递归`[x,y]`。

在每种情况下，我们都保持上述区间的不变量。最终我们得到一个大小为 2 的区间，这意味着我们找到了一个峰值（将是`A[m]`）。

要将圆转换为数组，请取 3 个等距样本并调整自己的方向，使最大的（或与最大的并列的）位于区间的中间，而另外两个点是端点。运行时间是`O(log n)`因为每个间隔都是前一个间隔大小的一半。

我已经掩盖了计算索引时如何舍入的问题，但我认为你可以成功地解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:04:22.053

当你说“排列成一个圆圈”时，你的意思是像一个循环链表还是什么？从您描述数据集的方式来看，听起来这些整数是完全无序的，没有办法查看 N 个整数并得出关于其他任何整数的任何结论。如果是这种情况，那么蛮力解决方案是唯一可能的解决方案。

编辑：

好吧，如果您不关心最坏情况的时间，那么有一些更有效的方法可以做到这一点。天真的方法是查看 N [i]、 N [i-1]和 N [i+1]以查看 Ni 是否是一个峰值，然后重复，但你可以做得更好。

```
While not done
    If N[i] < N[i+1]
        i++
    Else
        If N[i]>N[i-1]
            Done
        Else
            i+=2 
```

（嗯，不完全是，因为你必须处理 N[i]=N[i+1] 的情况。但是非常相似。）

这至少可以防止您将 N [i]与 N [i+1]进行比较，将 1 添加到 i，然后将 N [i]与 N [i-1]进行冗余比较。不过，这是一个明显的边际收益。你仍然在通过数字前进，但没有办法解决这个问题；盲目地跳跃是没有帮助的，如果不花时间做实际的工作，就没有办法展望未来。

# go - OpenPGP Public Key Authentication in Go

> ID：12867031
> 
> 赞同：1
> 
> 时间：2012-10-12T20:59:31.357
> 
> 标签：go, gnupg, openpgp

I'm working on a Go peer-to-peer chat service to be used in [Hyperboria](https://projectmeshnet.org), which operates as a meshnet. That is relatively unimportant compared to my problem:

I need to use OpenPGP keys existent in user's GPG keyrings in order to encrypt and decrypt messages. I need to be able to discover public and private keys, check that given key IDs are present, and use them to either encrypt or decrypt `[]byte`, (either before or after it goes across a `TCP` connection)

Is there a package that I could look into to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:21:02.603

You should check out the go.crypto packages particularly the ones in: [http://code.google.com/p/go/source/browse/?repo=crypto#hg%2Fopenpgp](http://code.google.com/p/go/source/browse/?repo=crypto#hg%2Fopenpgp)

It's the most likely to have what you are looking for.

# objective-c - 运行探查器时 GData 导致错误消息

> ID：12867034
> 
> 赞同：0
> 
> 时间：2012-10-12T20:59:44.873
> 
> 标签：objective-c, xcode, profiler, gdata, gdata-api

所以，我在这里的困境几乎是这样一个事实，即我的文件中包含 GData，按照此处找到的说明包含静态标题：http: [//hoishing.wordpress.com/2011/08/23/gdata-objective-c-client -setup-in-xcode-4/](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)。一切都正确编译，我可以很好地运行分析器。在我尝试运行分析器检查泄漏的那一刻，它遇到了附加的错误服务占位符编译器标志应替换为实际的服务规范，如下所示： ![在此处输入图像描述](../Images/2062a7f2a75a154ab8bd638bd8661b50.png)

我不确定我需要做什么才能使其成为可接受的服务..或者它为什么会触发此错误。实施 GData 已经不是那么有趣了。（感谢在谷歌文档中添加静态教程的人。缺乏文档）。有谁知道具体需要做什么和/或如何做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:38:51.570

从[文档](https://code.google.com/p/gdata-objectivec-client/wiki/BuildingTheLibrary#Removing_Unneeded_Code)...

> 静态库目标中有一个条件集，用于提醒开发人员定义所需的服务。对于您的项目，替换或删除定义
> 
> -DGDATA_INCLUDE_nameServiceHere_SERVICE=1
> 
> 在静态库目标的 Release 配置的 Other C Flags 部分中。

# javascript - window.open() 仅在 IE 中导致错误

> ID：12867040
> 
> 赞同：1
> 
> 时间：2012-10-12T21:00:06.520
> 
> 标签：javascript, internet-explorer, window.open

所以我有这段代码来打开一个画廊窗口，传递哪个类别以及该类别中的哪个数字/项目来显示。它在 Firefox 和 Chrome 中运行良好，但 IE 9 一直在 window.open 行中断，我做错了什么？

```
function newWindow(cat,n) {
  var newWindow = "display.php?cat=" + cat + "&n=" + n;
  var windowOpen = window.open (newWindow, 'Portfolio Display', 'height=622,width=960,toolbar=0,menubar=0,scrollbars=0,resizable=0,location=0,directories=0,status=0');
  windowOpen.focus();
}; 
```

newWindow 变量使我不必在其中包含一长串引号（只需确保这不是错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:01:20.800

不要在第二个参数中使用空格。我发誓我过去遇到过这个问题，我只是坚持使用字母数字字符（更新：我也忘记了“_”）窗口“名称”（第二个参数）。如果这不能解决 IE 中的问题，尽管它对我有用（我忘记了我测试过的版本），你可以看看：

[ie8 var w= window.open() - “消息：无效参数。”](https://stackoverflow.com/questions/710756/ie8-var-w-window-open-message-invalid-argument)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:03:53.447

糟糕，问题出在我将“投资组合显示”作为 window.open 中的第二位。将其删除并保留为

```
...newWindow, '', 'height... 
```

它就像一个瞬间。

# objective-c - 为什么 Xcode 不自动为我添加 viewDidUnload？

> ID：12867042
> 
> 赞同：1
> 
> 时间：2012-10-12T21:00:14.827
> 
> 标签：objective-c, ios, xcode, ios5

我正在阅读这篇关于 iOS 5 开发的文章，其中包含以下内容：

```
Delete all the methods except for viewDidUnload. When you’re finished,
your implementation should look like this:

#import "BIDViewController.h" @implementation BIDViewController
- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view. // e.g. self.myOutlet = nil;
}
@end 
```

只是，我从来没有这种方法。它说当我链接动作和出口时它应该自动向该方法添加方法，但由于我必须随机添加它，它似乎没有这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:01:40.773

因为此方法在 iOS 6 中已弃用。[请参阅文档。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/viewDidUnload)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:03:51.420

现在不推荐使用此方法

`strong`顺便说一句，如果您没有指向它们的链接，您不必对 IBOutlets 做任何事情

# asp.net-mvc - 将图像添加到 Telerik 数据网格列

> ID：12867049
> 
> 赞同：0
> 
> 时间：2012-10-12T21:01:01.157
> 
> 标签：asp.net-mvc, telerik-grid, telerik-mvc

我想将图像添加到数据网格列，为此我正在使用 Telerik 网格，但是我收到以下错误，它位于第 51 行：

编译器错误消息：CS1525：无效的表达式术语 ')'

源错误：

```
Line 49:     column.Bound(o => o.HoursWorked).Title("Hours");
Line 50:     column.Template(o =>
Line 51:     {%>
Line 52:     <img src="/Content/img/delete.png" alt="Delete" title="Delete"/>
Line 53:     <% 
```

这是我尝试将图像添加到列的方式：

```
<div>
<%=Html.CustomGridFor("Hours", "WorkHours", "HoursWorked", GridOptions.EnableSelecting, Model).Columns(column =>
   {
     column.Bound(o => o.DateWorked).Title("Date").Width("65px");
     column.Bound(o => o.Description).Title("Description").Width("120px");
     column.Bound(o => o.HoursWorked).Title("Hours");
     column.Template(o =>
     {%>
     <img src="/Content/img/delete.png" alt="Delete" title="Delete" onclick="javascript:deleteHours();" />
     <%
     }).Title("").ClientTemplate(
     "<img src=\"/Content/img/delete.png\" alt=\"Delete\" title=\"Delete\"/>"
     ).Width(15);
     }).HtmlAttributes(new { style = "width: 270px;" });
     %>
</div> 
```

也试过这个：

```
<div>
<%=Html.CustomGridFor("Hours", "WorkHours", "HoursWorked", GridOptions.EnableSelecting, Model).Columns(column =>
   {
     column.Bound(o => o.DateWorked).Title("Date").Width("65px");
     column.Bound(o => o.Description).Title("Description").Width("120px");
     column.Bound(o => o.HoursWorked).Title("Hours");

        column.Template(o =>
        {
        %>
            <img 
                alt="Delete" 
                src="/Content/img/delete.png" 
              />
        <%
        });

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:02:40.257

尝试使用这个：

```
<div>
<%=Html.CustomGridFor("Hours", "WorkHours", "HoursWorked", GridOptions.EnableSelecting, Model).Columns(column =>
        {
           column.Bound(o => o.DateWorked).Title("Date").Width("65px");
           column.Bound(o => o.Description).Title("Description").Width("120px");
           column.Bound(o => o.HoursWorked).Title("Hours");
           column.Template(o => string.Empty).Title("")
                 .ClientTemplate(
                      "<img src=\"/Content/img/delete.png\" alt=\"Delete\" title=\"Delete\"/>")
                 .Width(15);
        }).HtmlAttributes(new { style = "width: 270px;" });
%>
</div> 
```

# sql - SQL 合并 STR 产生一个 INT

> ID：12867063
> 
> 赞同：1
> 
> 时间：2012-10-12T21:01:54.223
> 
> 标签：sql, sql-server-2008

我有以下内容：

```
 Select tp.PH_F pHF, COALESCE(STR(tp.pH_F), tp.pH_S) pH
     From tblprod tp 
```

注意 PH_F 是一个浮点数

我得到以下结果

```
PHF    PH
---    ---
7.256   7
7.59   8 
```

为什么 STR 将 Coalesce 的 int 转换为 INT？我喜欢发生的是它具有相同的价值。

我喜欢发生的事情如下：

```
PHF    PH
---    ---
7.256   7.256
7.59   7.59 
```

我怎么能在 Coalesce 上发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:04:59.933

你需要告诉它你想要多少个小数位。STR函数默认为0。看看[http://msdn.microsoft.com/en-us/library/ms189527.aspx](http://msdn.microsoft.com/en-us/library/ms189527.aspx)

您可能希望将代码更改为：

```
Select tp.PH_F pHF, COALESCE(STR(tp.pH_F, 5, 2), tp.pH_S) pH
     From tblprod tp 
```

# c# - 单元测试插入方法

> ID：12867069
> 
> 赞同：1
> 
> 时间：2012-10-12T21:02:32.650
> 
> 标签：c#, unit-testing

如何对将数据插入数据库的方法进行单元测试？

我有一个正在创建的服务，但不知道如何对其进行单元测试。

```
public class EnterpriseDownloadRepository : IEnterpriseDownloadRepository
{
    public int AddFileDownloadEntry(Contract.Data.FileDownloadEntry fileDownloadEntry)
    {
        using (var context = new EFFileDownloadEntryEntitites()) 
        {
            int returnValue =context.FileDownloadEntries.AddObject(fileDownloadEntry);
            context.SaveChanges();
            return returnValue;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:17:21.633

Scott Allen 写了一篇很棒的[文章](http://msdn.microsoft.com/en-us/library/ff714955.aspx)，介绍了如何为实体框架上下文创建和使用内存中的 double。这是我做这类事情的首选模式。（我在这里假设您的意图是对您的存储库而不是实体框架本身进行单元测试。）

# linux - Linux 文本编辑器临时文件搜索

> ID：12867070
> 
> 赞同：0
> 
> 时间：2012-10-12T21:02:37.963
> 
> 标签：linux, security, find, owasp

我记得读过直接在服务器上编辑文件是不好的安全做法，因为它可能会创建隐藏的临时文件。是否可以搜索这些文件？我在考虑 find / -name .*，但它返回“路径必须在表达式之前：..”并且不知道这是否包括所有可能由 elvis 或 nano 创建的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:07:01.893

我见过几个版本的“备份”文件名模式，但最常见的总是包含一个`~`. 如果你只是在寻找，`~`那么这样的东西会起作用......

```
find / -name '*~*' 
```

如果你想找到隐藏文件，那么...

```
find / -name '.*' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:07:31.307

将名称放在引号中：

```
find / -name '.*'
```

否则外壳会解释它并运行类似的东西：

```
find / -name . ..
```

# ruby-on-rails - ruby 1.8 和 1.9 之间的字符串长度差异

> ID：12867072
> 
> 赞同：6
> 
> 时间：2012-10-12T21:02:47.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有一个在 ruby​​ 1.8.7 上运行的网站。我对收到的帖子进行了验证，以确保我们最多允许 12000 个字符。在帖子接受验证之前，空格被计为字符，并且制表符和回车符被删除。

这是经过验证的帖子[http://pastie.org/5047582](http://pastie.org/5047582)

在 ruby​​ 1.9 中，字符串长度显示为 11909，这是正确的。但是当我检查 ruby​​ 1.8.7 的长度时，结果是 12044。

我使用 codepad.org 运行这个 ruby​​ 代码，它给了我[http://codepad.org/OxgSuKGZ](http://codepad.org/OxgSuKGZ)（输出长度为 12044，这是错误的）但是当我在 codeacademy.org 的控制台中运行相同的代码时，字符串长度是 11909。

谁能解释我为什么会这样？？？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T21:19:10.347

这是一个 Unicode 问题。您使用的字符串包含 ASCII 范围之外的字符，并且经常使用的 UTF-8 编码将这些字符编码为 2 个（或更多）字节。

Ruby 1.8 没有正确处理 Unicode，`length`只是简单地给出了字符串中的**字节**数，这导致了一些有趣的东西，比如：

```
"ą".length
=> 2 
```

Ruby 1.9 具有更好的 Unicode 处理能力。这包括`length`返回字符串中的实际字符数**，**只要 Ruby 知道编码：

```
"ä".length
=> 1 
```

Ruby 1.8 中一种可能的解决方法是使用正则表达式，它可以识别 Unicode：

```
"ą".scan(/./mu).size
=> 1 
```

# python - Python中的变量嵌套

> ID：12867075
> 
> 赞同：1
> 
> 时间：2012-10-12T21:02:55.317
> 
> 标签：python, variables, automation, nested

基本上，我需要让我的程序能够为我创建多个（无限）变量，我仍然可以通过我的代码进行操作，而无需我定义它们。

我想用一个字母和一个数字作为变量名，例如 a1，并让程序创建新变量，只需在数字上加 1。所以它会创建**a1**到**a30**左右。我该怎么做？

我的程序将添加多项式，变量（或现在列出）是分开不同的单项式，因为我不知道多项式中有多少单项式，所以我需要一种使数字灵活的方法所以我对单项式有准确的空格数，没有多余的，也没有更少。

这是代码：

```
# Sample polynomial set to x, the real code will say x = (raw_input("Enter a Polynomial")).

x = '(5xx + 2y + 2xy)+ (4xx - 1xy)'

# Isdigit command set to 't' to make the code easier to write.
t = str.isdigit

# Defining v for later use.
v = 0

# Defining 'b' which will be the index number that the program will look at.
b = 1

# Creating 'r' to parse the input to whatever letter is next.
r = x [b]

# Defining n which will be used later to tell if the character is numeric.
n = 0

# Defining r1 which will hold one of the monomials, ( **will be replaced with a list**)

#This was the variable in question.
r1 = ''

# Setting 'p' to evaluate if R is numeric ( R and T explained above).
p = t(r)

# Setting 'n' to 1 or 0 to replace having to write True or False later.
if p == True:
    n = 1
else:
    n = 0

# Checking if r is one of the normal letters used in Algebra, and adding it to a variable
if r == 'x':
    v = 'x'
    c = 1
elif r == 'y':
    v = 'y'
    c = 1
elif r == 'z':
    v = 'z'
    c = 1

# If the character is a digit, set c to 0, meaning that the program has not found a letter yet (will be used later in the code).
elif n == 1:
    v = r
    c = 0

# Adding what the letter has found to a variable (will be replaced with a list).
r1 = r1 + v

b = b + 1 
```

我最终会把它变成一个循环。

我在代码中添加了注释，这样更容易理解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T21:25:59.047

本质上，您正在尝试以编程方式动态修改变量所在的堆空间。我真的不认为这是可能的。如果是的话，那就太晦涩了。

我明白你来自哪里。当我第一次学习编程时，我曾想过以需要这种“动态创建”变量的方式来解决问题。解决方案实际上是识别哪种（集合）数据结构适合您的需求。

如果你想`a1`通过变量`a30`，创建一个列表`a`。然后`a1`会`a[1]`，`a30`会`a[30]`。写起来有点不同，但它应该给你你需要的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:44:29.243

我花了至少五分钟试图思考你为什么要首先这样做，直到我决定我可以在不到五分钟的时间内编写代码，并希望作为回报你会告诉我们你为什么要这样做做这个。

这是代码：

```
def new(value):
    highest = -1
    for name in globals():
        if name.startswith('a'):
            try:
                number = int(name[1:])
            except:
                continue

            if number > highest:
                highest = number

    globals()['a%d' % (highest + 1, )] = value

new("zero")
new("one")
new("two")

print a2 # prints two 
```

# javascript - 数据结构，javascript中的两个线程在同一个对象上读写

> ID：12867085
> 
> 赞同：0
> 
> 时间：2012-10-12T21:03:30.463
> 
> 标签：javascript, algorithm, asynchronous

语言是 javascript，但我认为这个问题与语言无关。这是问题所在：

**问题**

两名服务员为餐桌服务。一个是打扫卫生，一个是放新盘子。服务员必须确保他不会收拾刚放好的盘子。存在这样的要求，即服务员和服务员在小工作单元中执行他们的任务，并且为了让顾客看到他们的食物正在快速送达，服务员必须与服务员同时工作。这是一个低档的自助餐，所以吃完/带走的菜可以再带回来（有人再来点煎饼吗？）

**脚步：**

1.  服务生来了，从桌上的 15 道菜中挑了 5 道菜，带到厨房。
2.  服务器来了，在他的订单上放下了 35 道菜中的 5 道新菜。情侣菜（煎饼和蓝莓）和刚拿走的一样，其余都是新菜。
3.  这一直持续到 busboy 和 server 都完成。胸围男孩有 15 个盘子需要 3 次处理。服务器有 35 道菜可以带来 7 道菜。
4.  之后桌子上剩下什么 35 个盘子。

**限制：**

*   服务器必须以最接近客户至上的方向工作。
*   胸围男孩必须确保他不会拿走那两盘新鲜的煎饼和蓝莓，如果他在服务器放下新鲜的盘子后进来清理它们 - 就在旧盘子的上面，可能会发生这种情况。

在 javascript 中，我有一个清理 UI 的 setInterval(bust, 50) 函数和一个向 UI 添加新元素的 setInterval(serve, 50)。两个模拟线程同时工作，因为按顺序清理需要 10 秒，而服务它可能需要另外 20 秒。相反，我想让它看起来正在取得进展——尤其是在可见区域。上面提到的板块实际上是 html id，并且正在操作 DOM。我保留了我正在操作的项目的数组/哈希表。

我的算法是什么？

编辑：我记得在图形中，您通常会绘制到隐藏缓冲区，然后用隐藏缓冲区切换可见缓冲区。我不知道如何将这个概念应用于我的问题。这些是数千个 dom 元素，而不是像素。删除元素、丢弃它们并添加新元素可能代价高昂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:57:58.120

这看起来像一个典型的有能力的车辆路径问题。在这个问题中，您有一个仓库、集装箱和卡车，并且想要找到为集装箱提供服务的最短路线，但每辆卡车只能携带 x 个集装箱。它是装箱问题和旅行推销员问题的结合。我认为你可以用厨房代替仓库，用服务员代替卡车，用盘子代替容器。

# java - SQLException - 游标状态无效

> ID：12867095
> 
> 赞同：4
> 
> 时间：2012-10-12T21:04:20.573
> 
> 标签：java, database, eclipse, exception, hsqldb

我正在用 java 编写一个简单的 CRUD 应用程序，我有一个方法来选择与账单一起使用的 Produkts。

这是我的代码：

```
public Rechnung selectProdukte(int target){
    int tempProdukt;
    int tempAnzahl;
    try {
        PreparedStatement ps1=hsqlmanager.getConnection().prepareStatement("SELECT produkt, anzahl from gekauftes_produkt " +
                "WHERE rechnung= " + target + ";");
        //ps1.setInt(1, target);
        //Query 1wird executiert

        PreparedStatement ps2 = hsqlmanager.getConnection().prepareStatement("SELECT * FROM rechnung WHERE id= " + target + ";");
        //ps2.setInt(1, target);
        ResultSet rs1 = ps1.executeQuery();
        ResultSet rs2 = ps2.executeQuery();
        Rechnung erg=new Rechnung(); 
        erg.setId(rs2.getInt(1));
        erg.setDatum(rs2.getDate(2));
        erg.setSumme(rs2.getDouble(3));
        while(rs1.next()){
            tempProdukt=rs1.getInt(1);
            tempAnzahl=rs1.getInt(2);
            erg.addGekauftTupel(tempProdukt, tempAnzahl);
        }
        ps1.close();
        ps2.close();
        return erg;
    } catch(Exception e) {
        log.error("Fehler in DAO Rechnung  - selectProdukte: " + e);
    }
    return null;
} 
```

当我按下按钮执行我得到的代码时：

> java.sql.SQLException：游标状态无效：标识符游标未定位在 UPDATE、DELETE、SET 或 GET 语句中的行上：；ResultSet 位于第一行之前

我检查了数据库，所有表和实体都存在。所以我的问题是：

这意味着什么？

我很感谢你的回答！！！

PS.：我正在使用 hsql 数据库！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T21:19:52.080

`rs2.next()`你在访问之前没有打电话`erg.setId(rs2.getInt(1));`

# c# - 三角计算器编程

> ID：12867097
> 
> 赞同：2
> 
> 时间：2012-10-12T21:04:33.913
> 
> 标签：c#, asp.net, math, geometry

我必须编写一个三角形计算器，它可以从三个给定的值计算所有其他缺失的信息。我确实知道如何计算这些值 - 这不是问题。但我不知道，我怎样才能以一种好的方式进行编程。

界面如下所示：

![在此处输入图像描述](../Images/9b6c6f54c75682681cd0afebde914c28.png)

有了这 12 个输入字段，就有许多可能的组合。我的第一个想法是对每个组合都使用 if/else 语句。但这不是很有效。我敢肯定，有一个更好的解决方案，但我不知道如何。有谁能够帮助我？

编辑我的代码目前看起来是这样的：

```
protected void FlaecheBerechnen_Click(object sender, EventArgs e)
    {     
        WerteAuslesen();
        Berechnen();
    }

    protected void WerteAuslesen()
    {
        //Sides
        string strSeite_a = this.txt_a.Text; if (strSeite_a == string.Empty) { i++; } else { if ((double.TryParse(strSeite_a, out seite_a) == false)) { GenerateErrorReport("Seite a"); } }
        string strSeite_b = this.txt_b.Text; if (strSeite_b == string.Empty) { i++; } else { if ((double.TryParse(strSeite_b, out seite_b) == false)) { GenerateErrorReport("Seite b"); } }
        string strSeite_c = this.txt_c.Text; if (strSeite_c == string.Empty) { i++; } else { if ((double.TryParse(strSeite_c, out seite_c) == false)) { GenerateErrorReport("Seite c"); } }

        //Angles
        string strWinkel_a = this.txtAlpha.Text; if (strWinkel_a == string.Empty) { i++; } else { if ((double.TryParse(strWinkel_a, out winkel_a) == false)) { GenerateErrorReport("Winkel Alpha"); } }
        string strWinkel_b = this.txtBeta.Text; if (strWinkel_b == string.Empty) { i++; } else { if ((double.TryParse(strWinkel_b, out winkel_b) == false)) { GenerateErrorReport("Winkel Beta"); } }
        string strWinkel_y = this.txtGamma.Text; if (strWinkel_y == string.Empty) { i++; } else { if ((double.TryParse(strWinkel_y, out winkel_y) == false)) { GenerateErrorReport("Winkel Gamma"); } }

        //Height
        string strHoehe_a = this.txt_ha.Text; if (strHoehe_a == string.Empty) { i++; } else { if ((double.TryParse(strHoehe_a, out hoehe_a) == false)) { GenerateErrorReport("Höhe a"); } }
        string strHoehe_b = this.txt_hb.Text; if (strHoehe_b == string.Empty) { i++; } else { if ((double.TryParse(strHoehe_b, out hoehe_b) == false)) { GenerateErrorReport("Höhe b"); } }
        string strHoehe_c = this.txt_hc.Text; if (strHoehe_c == string.Empty) { i++; } else { if ((double.TryParse(strHoehe_c, out hoehe_c) == false)) { GenerateErrorReport("Höhe c"); } }

        //ErrorReport:
        if (ErrorMessage != null)
        {
            Page.ClientScript.RegisterStartupScript(this.GetType(), "ErrorAlert", "alert('Folgende Angaben sind fehlerhaft: " + ErrorMessage + "');", true);
            return;
        }

        //Logic
        //If more than 3 values....

        string AlertText;

        if (i < 6)
        {
            AlertText = "Es dürfen nur 3 Angaben gemacht werden!";
            Page.ClientScript.RegisterStartupScript(this.GetType(), "ErrorAlert", "alert('" + AlertText + "');", true);
            return;
        }
        if (i > 6)
        {
            AlertText = "Es müssen mindestens 3 Angaben gemacht werden!";
            Page.ClientScript.RegisterStartupScript(this.GetType(), "ErrorAlert", "alert('" + AlertText + "');", true);
            return;
        }
    }

    protected void Berechnen()
    {
        //Höhensatz

        if (seite_a != 0 && seite_b != 0 && seite_c != 0)
        {
            //Calculate missing angles

                //Winkel Gamma
                cos_y = (seite_a * seite_a) + (seite_b * seite_b) - (seite_c * seite_c); //Zähler berechnen
                cos_y = cos_y / (2 * seite_a * seite_b); //Durch Nenner teilen
                winkel_y = Math.Acos(cos_y); //Bogenradius berechnen
                winkel_y = winkel_y * 180 / Math.PI; //In Winkel umrechnen

                //Winkel Beta
                cos_b = (seite_c * seite_c) + (seite_a * seite_a) - (seite_b * seite_b); //Zähler berechnen
                cos_b = cos_b / (2 * seite_c * seite_a); //Durch Nenn teilen
                winkel_b = Math.Acos(cos_b); //Bogenradius berechnen
                winkel_b = winkel_b * 180 / Math.PI; //In Winkel umrechnen

                //Winkel Alpha
                double winkel_a = 180 - winkel_b - winkel_y;

                //Werte eintragen
                txtAlpha.Text = Convert.ToString(winkel_a);
                txtBeta.Text = Convert.ToString(winkel_b);
                txtGamma.Text = Convert.ToString(winkel_y);

            //Flächen berechnen

                //Mit Satz des Heron
                Heron heron = new Heron(seite_a, seite_b, seite_c);
                double FlaecheHeron = heron.Area;
                Page.ClientScript.RegisterStartupScript(this.GetType(), "ErrorAlert", "alert('" + FlaecheHeron + "');", true);     
        }
    } 
```

问题是，有太多可能的组合。如果 (seite_a != 0 && seite_b != 0 && seite_c != 0)，等等，等等....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T05:53:12.477

您可以写下所有可能用于执行计算的规则。我猜你会使用角度和、正弦定律、余弦定律等等。将这些规则中的每一个写成一个类，并为每个可能的标签创建一个实例（即，无论您是使用余弦定律来计算 γ 还是 β）。您应该最终得到一个对象列表，所有对象都共享一个公共接口，您可以使用该接口从其他一些对象中计算一些值。然后，您可以遍历此列表以查看适用的规则，并使用它们来计算附加值。一旦缺失值的计数达到零，您就完成了。

如果您遍历所有规则而没有找到要应用的规则，那么您的可能规则集还不够完整。我相信编写一个[单元测试](http://en.wikipedia.org/wiki/Unit_testing)来尝试所有 220 种可能的方法来填充 12 个输入中的 3 个是一个非常好的主意，以确保您有足够的规则集来处理所有这些输入。只需从一组完整的 12 个值开始，计算所有三元素子集，将它们输入到您的应用程序代码中，并将结果与​​预期值进行比较，同时考虑数字误差。

上述方法既没有针对性能进行优化，也没有针对数值稳定性进行优化。如果其中任何一个对您来说都是一个问题，那么不同的方法可能更适合。

# python - Strassen 矩阵乘法——接近，但仍有错误

> ID：12867099
> 
> 赞同：1
> 
> 时间：2012-10-12T21:04:47.420
> 
> 标签：python, matrix, implementation, multiplication, strassen

我正在尝试在 Python 中实现 Strassen 矩阵乘法。我已经让它工作了一些。这是我的代码：

```
a = [[1,1,1,1],[2,2,2,2],[3,3,3,3],[4,4,4,4]]
b = [[5,5,5,5],[6,6,6,6],[7,7,7,7],[8,8,8,8]]

def new_m(p, q): # create a matrix filled with 0s
    matrix = [[0 for row in range(p)] for col in range(q)]
    return matrix

def straight(a, b): # multiply the two matrices
    if len(a[0]) != len(b): # if # of col != # of rows:
        return "Matrices are not m*n and n*p"
    else:
        p_matrix = new_m(len(a), len(b[0]))
        for i in range(len(a)):
            for j in range(len(b[0])):
                for k in range(len(b)):
                    p_matrix[i][j] += a[i][k]*b[k][j]
    return p_matrix

def split(matrix): # split matrix into quarters 
    a = matrix
    b = matrix
    c = matrix
    d = matrix
    while(len(a) > len(matrix)/2):
        a = a[:len(a)//2]
        b = b[:len(b)//2]
        c = c[len(c)//2:]
        d = d[len(d)//2:]
    while(len(a[0]) > len(matrix[0])/2):
        for i in range(len(a[0])//2):
            a[i] = a[i][:len(a[i])//2]
            b[i] = b[i][len(b[i])//2:]
            c[i] = c[i][:len(c[i])//2]
            d[i] = d[i][len(d[i])//2:]
    return a,b,c,d

def add_m(a, b):
    if type(a) == int:
        d = a + b
    else:
        d = []
        for i in range(len(a)):
            c = []
            for j in range(len(a[0])):
                c.append(a[i][j] + b[i][j])
            d.append(c)
    return d

def sub_m(a, b):
    if type(a) == int:
        d = a - b
    else:
        d = []
        for i in range(len(a)):
            c = []
            for j in range(len(a[0])):
                c.append(a[i][j] - b[i][j])
            d.append(c)
    return d

def strassen(a, b, q):
    # base case: 1x1 matrix
    if q == 1:
        d = [[0]]
        d[0][0] = a[0][0] * b[0][0]
        return d
    else:
        #split matrices into quarters
        a11, a12, a21, a22 = split(a)
        b11, b12, b21, b22 = split(b)

        # p1 = (a11+a22) * (b11+b22)
        p1 = strassen(add_m(a11,a22), add_m(b11,b22), q/2)

        # p2 = (a21+a22) * b11
        p2 = strassen(add_m(a21,a22), b11, q/2)

        # p3 = a11 * (b12-b22)
        p3 = strassen(a11, sub_m(b12,b22), q/2)

        # p4 = a22 * (b12-b11)
        p4 = strassen(a22, sub_m(b12,b11), q/2)

        # p5 = (a11+a12) * b22
        p5 = strassen(add_m(a11,a12), b22, q/2)

        # p6 = (a21-a11) * (b11+b12)
        p6 = strassen(sub_m(a21,a11), add_m(b11,b12), q/2)

        # p7 = (a12-a22) * (b21+b22)
        p7 = strassen(sub_m(a12,a22), add_m(b21,b22), q/2)

        # c11 = p1 + p4 - p5 + p7
        c11 = add_m(sub_m(add_m(p1, p4), p5), p7)

        # c12 = p3 + p5
        c12 = add_m(p3, p5)

        # c21 = p2 + p4
        c21 = add_m(p2, p4)

        # c22 = p1 + p3 - p2 + p6
        c22 = add_m(sub_m(add_m(p1, p3), p2), p6)

        c = new_m(len(c11)*2,len(c11)*2)
        for i in range(len(c11)):
            for j in range(len(c11)):
                c[i][j]                   = c11[i][j]
                c[i][j+len(c11)]          = c12[i][j]
                c[i+len(c11)][j]          = c21[i][j]
                c[i+len(c11)][j+len(c11)] = c22[i][j]

        return c

print "Strassen Outputs:"
print strassen(a, b, 4)
print "Should be:"
print straight(a, b) 
```

我包括了直接矩阵乘法以参考正确的所需输出。基本上会发生这种情况：

施特拉森输出：

```
[[10, 14, 22, 26], [32, 36, 48, 52], [58, 66, 70, 78], [80, 88, 96, 104]] 
```

应该：

```
[[26, 26, 26, 26], [52, 52, 52, 52], [78, 78, 78, 78], [104, 104, 104, 104]] 
```

我不确定问题的根源是什么，这意味着我无法解决它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:20:51.203

这不应该：

```
# p4 = a22 * (b12-b11)
p4 = strassen(a22, sub_m(b12,b11), q/2) 
```

是：

```
# p4 = a22 * (b21-b11)
p4 = strassen(a22, sub_m(b21,b11), q/2) 
```

反而？

```
~/coding$ python -i strass.py
Strassen Outputs:
[[26, 26, 26, 26], [52, 52, 52, 52], [78, 78, 78, 78], [104, 104, 104, 104]]
Should be:
[[26, 26, 26, 26], [52, 52, 52, 52], [78, 78, 78, 78], [104, 104, 104, 104]]
>>> import numpy
>>> def check():
...     for i in range(100):
...         a = numpy.random.randint(0, 10,size=(4,4)).tolist()
...         b = numpy.random.randint(0, 10,size=(4,4)).tolist()
...         assert strassen(a,b,4) == straight(a,b)
...         assert (numpy.array(strassen(a,b,4)) == numpy.dot(a,b)).all()
...     print 'hooray!'
... 
>>> check()
hooray! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-11T08:49:38.623

我用 numpy 写了另一个版本来简化 add() 和 sub() ...

```
import numpy as np
def straight(a, b): 
    if len(a[0]) != len(b): return "Matrices are not m*n and n*p" 
    p_matrix = np.zeros((len(a), len(b[0])))
    p_matrix += [[np.sum([a[i][k] * b[k][j] for k in range(len(b))]) for j in range(len(b[0]))] for i in range(len(a))]
    return p_matrix
def split(matrix):  # split matrix into quarters
    row, col = matrix.shape
    return matrix[:row//2, :col//2], matrix[:row//2, col//2:], matrix[row//2:, :col//2], matrix[row//2:, col//2:]
def strassen(a, b):
    q = len(a)
    if q == 1:  # base case: 1x1 matrix
        return a * b
    a11, a12, a21, a22 = split(a)
    b11, b12, b21, b22 = split(b)
    p1 = strassen(a11 + a22, b11 + b22)  # p1 = (a11 + a22) * (b11 + b22)
    p2 = strassen(a21 + a22, b11)        # p2 = (a21 + a22) * b11
    p3 = strassen(a11, b12 - b22)        # p3 = a11 * (b12 - b22)
    p4 = strassen(a22, b21 - b11)        # p4 = a22 * (b21 - b11)
    p5 = strassen(a11 + a12, b22)        # p5 = (a11 + a12) * b22
    p6 = strassen(a21 - a11, b11 + b12)  # p6 = (a21 - a11) * (b11 + b12)
    p7 = strassen(a12 - a22, b21 + b22)  # p7 = (a12 - a22) * (b21 + b22)
    c11 = p1 + p4 - p5 + p7  # c11 = p1 + p4 - p5 + p7
    c12 = p3 + p5            # c12 = p3 + p5
    c21 = p2 + p4            # c21 = p2 + p4
    c22 = p1 + p3 - p2 + p6  # c22 = p1 + p3 - p2 + p6
    c = np.vstack((np.hstack((c11, c12)), np.hstack((c21, c22)))) 
    return c
def check():
    a = np.random.randint(0, 10, size=(16, 16))
    b = np.random.randint(0, 10, size=(16, 16))
    assert (strassen(a, b) == straight(a, b)).all()
    assert (np.array(strassen(a, b)) == np.dot(a, b)).all()
    print('Hooray!')
check() 
```

# amazon-web-services - 配置 cloudwatch 警报

> ID：12867105
> 
> 赞同：1
> 
> 时间：2012-10-12T21:05:18.797
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudwatch

问题 我想创建警报，以便如果状态检查在 10 分钟内失败 5 次或更多，则发出警报。基本上，我想检查实例是否处于活动状态，我计划为此使用 systemCheckFailed 指标。我不太确定我是否使用了正确的值，如下所示。

mon-put-metric-alarm TestAlarm --comparisonoperator GreaterThanThreshold --evaluation-periods 5 --metric-name StatusCheckFailed --namespace "AWS/EC2" --period 600 --statistic Average --threshold 5 --alarm-actions arn :aws:autoscaling:us-east-1:764516644405:scalingPolicy:dtestguid:autoScalingGroupName/WebAutoScaleGroup:policyName/WebScaleUp --dimensions "AutoScalingGroupName=WebAutoScaleGroup"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-11T14:20:34.560

我认为您指定的命令将在 5 次（评估期）后以 600 秒（期）的间隔触发警报......即不是您想要的。如果您想在 10 分钟内检查该值 5 次，您需要说出评估周期：5，-周期：120。

# c# - 如何在 c# 中检查 xmlnode 的内部文本或值？

> ID：12867107
> 
> 赞同：2
> 
> 时间：2012-10-12T21:05:32.570
> 
> 标签：c#, xml

我创建了 xmlnodelist，我想处理没有子元素的元素的值。在下面的代码中，我正在检查子节点，我从所有元素中得到了正确的结果，即使是那些没有子节点的元素。如何选择树中的最后一个元素并处理值？

```
XmlDocument XDoc = new XmlDocument();
            XDoc.Load("d://avi.xml");
            XmlNodeList XList = XDoc.SelectNodes("//*");
            foreach (XmlElement XNode in XList)
            {
                    if (XNode.HasChildNodes == true)
                    {
                        Console.WriteLine("this node has childs");
                        continue;
                    }
                    else Console.WriteLine("this node dont have childs");      
            } 

<level1>
    <level2>
        <level3>header3</level3>
        <level4>another</level4>
        <level31>header31</level31>
    </level2>
    <level2>
        <level3>111</level3>
        <level31>nn</level31>
    </level2>
</level1> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:12:07.277

为此使用 Linq to Xml 怎么样？

```
var xElem = XElement.Parse(xml);

var leafElements = xElem.Descendants()
                        .Where(e => !e.HasElements)
                        .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:12:37.483

元素中的文本也是一个“节点”。你想要的是

```
if (XNode.ChildNodes.Any(n=>n.NodeType == XmlNodeType.Element)) 
```

或者，您可以遍历 ChildNode 并查看其中一个是否是元素。

# php - PHP Facebook API 在页面的墙上发布

> ID：12867108
> 
> 赞同：3
> 
> 时间：2012-10-12T21:05:45.160
> 
> 标签：php, facebook, api, facebook-graph-api

我知道，这个问题被问了一百次，但没有一个给定的解决方案对我有用。我正在尝试在当前用户拥有的每个页面的墙上张贴。因此，我首先获得了 publish_actions、read_stream、manage_pages 和 offline_access 的权限。然后我通过 /me/permissions 检查用户是否真的授予了这些权限。

然后，如果用户是管理员，我尝试获取用户的所有页面并在页面的墙上发布：

```
$accounts = $facebook->api("/me/accounts", "GET", array("access_token"=>$facebook->getAccessToken()));

$data = $accounts["data"];

foreach ($data as $page)
{
    if (isset($page["perms"]) && in_array("CREATE_CONTENT", $page["perms"])))
    {
        $facebook->api("/".$page["id"]."/feed", "POST", array("link"=>$link, "access_token"=>$page["access_token"]));
    }
} 
```

但是，在页面的墙上发布失败，并带有众所周知的错误消息

**Uncaught OAuthException: (#200) 用户尚未授权应用程序执行此操作**

有任何想法吗？我的错在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:22:03.470

如果您可以通过 Graph API Explorer 或 cURL 对其中一个页面进行相同的调用，那么您的逻辑是正确的。所以我会在调用上放置一个 try/catch`page/id`以查看特定页面是否搞乱了循环。

```
try {
    $facebook->api("/".$page["id"]."/feed", "POST", array("link"=>$link, "access_token"=>$page["access_token"]));
  } catch (FacebookApiException $e) {
    error_log($e . " for: " .$page["id"] );
  }
} 
```

# jquery - 使用 pjax 进行 HTTP 缓存 (jquery-pjax)

> ID：12867110
> 
> 赞同：1
> 
> 时间：2012-10-12T21:05:48.407
> 
> 标签：jquery, http-caching, pjax

浏览器和代理缓存使用 URL 作为缓存键。在 pjax 中，URL 用于请求部分 Pjax 页面和完整页面，因此两个响应都将缓存在同一个键下。这显然会导致错误，因为可能会加载部分页面而不是整个页面，反之亦然。

一个人将如何解决它？

我唯一能想到的就是在 url 中添加一个 pjax 标签。pjax 是否提供了这样做的内置方式？

谢谢！

ps 我正在使用 Rails，以防万一有人在 Rails 中有更优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:27:32.043

[jquery-pjax](https://github.com/defunkt/jquery-pjax)附加`_pjax=true`到 XMLHttpRequest 中的 url。

另一种方法是每个 URL 只有一个页面。

这可以通过 jquery-pjax 通过仅发送完整页面并使用该`fragment`选项来实现。

一种更灵活的方法是只发送最少的页面并使用 AJAX 来添加所有共享的站点内容 - 页面横幅、导航、广告等。大多数 AJAX 仅适用于初始页面加载并随后`pjax`接管。这是[HTMLDecor](https://github.com/shogun70/HTMLDecor)的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:12:47.587

Rails 4.0 现在带有 Turbolinks。Turbolinks 与 pjax 非常相似，只是它从服务器加载整个页面，然后更新页面的正文和标题，而不是重新加载它。不需要在服务器端进行任何修改——服务器总是返回整个页面。这使得 HTTP 缓存变得微不足道。

# java - JAVA中的互斥量和信号量？

> ID：12867113
> 
> 赞同：1
> 
> 时间：2012-10-12T21:06:01.610
> 
> 标签：java, multithreading

java中的 Synchronized 关键字是依赖于 Mutex 还是 Semaphore ？我读到这两个术语可以互换使用，但是有区别吗？java中是否有任何内置的信号量类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:14:15.660

`mutex`a和 a之间的主要区别在于`semaphore`，它`mutex`只能由持有它的进程/线程`semaphore`释放，而它可能由任何进程/线程释放。还有一个区别但不那么重要：有一种称为计数信号量的信号量，即可以初始化为允许多个并发“持有者”的信号量。

Java 中的`synchronized`访问在语义上应该使用`mutex`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:37:57.757

Semaphore 有固定数量的许可，可以在运行代码块时获取/释放。因此，与许可数相等的固定线程数可以同时运行一个代码块。Mutex/Lock 是 Semaphore 的特殊版本，其中允许的数量为 1。即只允许单个线程运行某个代码块。这给了代码块的线程“所有权”。只有所有者才能获取和释放代码块上的锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:14:49.343

同步是根据[线程监视器实现的](http://www.artima.com/insidejvm/ed2/threadsynch.html)

[java.util.concurrent.locks](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/package-summary.html)是一个包，其中包含一些有用的锁相关类，如[ReentrantLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html)

# python - 对于 += 运算符，替换 __iadd__ 不能按预期工作

> ID：12867114
> 
> 赞同：2
> 
> 时间：2012-10-12T21:06:26.033
> 
> 标签：python, numpy, operator-keyword

我有一个来自库 (numpy.ndarray) 的对象，其中我用 _ *iadd* _ 方法替换了自定义方法。如果我调用 object._ *iadd* _(x)，它会按预期工作。但是， object+=x 似乎调用了旧的（未替代的）方法。我想防止 numpy 在特定情况下发生溢出，所以我为此创建了一个上下文管理器。这是（仍然非常粗糙的）代码：

```
class NumpyOverflowPreventer( object ):
    inverse_operator= {'__iadd__':'__sub__', '__isub__':'__add__', '__imul__': '__div__', '__idiv__':'__mul__'}

    def _operate(self, b, forward_operator):
        assert type(b) in (int, float)
        reverse_operator= NumpyOverflowPreventer.inverse_operator[forward_operator]
        uro= getattr(self.upper_range, reverse_operator)
        lro= getattr(self.lower_range, reverse_operator)
        afo= self.originals[ forward_operator ]
        overflows= self.matrix > uro( b )
        underflows= self.matrix < lro( b )
        afo( b )
        self.matrix[overflows]= self.upper_range
        self.matrix[underflows]= self.lower_range

    def __init__(self, matrix):
        m= matrix
        assert m.dtype==np.uint8
        self.matrix= m
        self.lower_range= float(0)
        self.upper_range= float(2**8-1)

    def __enter__(self):
        import functools
        self.originals={}
        for op in NumpyOverflowPreventer.inverse_operator.keys():
            self.originals[ op ] = getattr( self.matrix, op )
            setattr( self.matrix, op, functools.partial(self._operate, forward_operator=op))

    def __exit__(self, type, value, tb):
        for op in NumpyOverflowPreventer.inverse_operator.keys():
            setattr( self.matrix, op, self.originals[ op ] ) 
```

运行这个：

```
a= np.matrix(255, dtype= np.uint8)
b= np.matrix(255, dtype= np.uint8)
with NumpyOverflowPreventer(a):
    a+=1
with NumpyOverflowPreventer(b):
    b.__iadd__(1)
print a,b 
```

返回这个：

```
[[0]] [[255]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:53:11.190

您看到的问题是未在实例上查找特殊的内置方法。`matrix`他们在类型上查找。所以在实例上替换它们不会导致它们被间接使用。

实现目标的一种方法是为`NumpyOverflowPreventer`您想要解决的操作制作一个包装器......

```
import numpy as np 
import sys

class NumpyOverflowPreventer(object):

    inverse_operator= { 
        '__iadd__': '__sub__', 
        '__isub__': '__add__', 
        '__imul__': '__div__', 
        '__idiv__': '__mul__'
    }

    def __init__(self, matrix):
        m = matrix
        assert m.dtype==np.uint8
        self.matrix = m
        self.lower_range = float(0)
        self.upper_range = float(2**8-1)

    def __iadd__(self, v):
        # dynamic way to get the name "__iadd__"
        self._operate(v, sys._getframe().f_code.co_name)
        return self

    def _operate(self, b, forward_operator):
        assert type(b) in (int, float)
        reverse_operator = self.inverse_operator[forward_operator]
        uro= getattr(self.upper_range, reverse_operator)
        lro= getattr(self.lower_range, reverse_operator)
        afo= getattr(self.matrix, forward_operator)
        overflows= self.matrix > uro( b )
        underflows= self.matrix < lro( b )
        afo( b )
        self.matrix[overflows]= self.upper_range
        self.matrix[underflows]= self.lower_range 
```

我只`__iadd__`在这里定义了，我相信你可以通过一些元类/装饰器动作动态地完成所有这些......但我保持简单。

用法：

```
a = np.matrix(255, dtype= np.uint8)
b = np.matrix(255, dtype= np.uint8)

p = NumpyOverflowPreventer(a)
p+=1

p = NumpyOverflowPreventer(b)
p.__iadd__(1)

print a,b
# [[255]] [[255]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:14:33.083

如果有人对溢出问题感兴趣，并且相信 jdi 和 kindall 的专业知识，那么操作符似乎必须是类方法 - 因此，动态方法生成需要一个自定义类。'我已经得到了以下工作原型（对于 +=、-=、*=./=）

```
class OverflowPreventer( object ):
    '''A context manager that exposes a numpy array preventing simple operations from overflowing.
    Example:
    array= numpy.array( [255], dtype=numpy.uint8 )
    with OverflowPreventer( array ) as prevented:
        prevented+=1
    print array'''
    inverse_operator= { '__iadd__':'__sub__', '__isub__':'__add__', '__imul__': '__div__', '__idiv__':'__mul__'}
    bypass_operators=['__str__', '__repr__', '__getitem__']
    def __init__( self, matrix ):
        class CustomWrapper( object ):
            def __init__(self, matrix):
                assert matrix.dtype==numpy.uint8
                self.overflow_matrix= matrix
                self.overflow_lower_range= float(0)
                self.overflow_upper_range= float(2**8-1)
                for op in OverflowPreventer.bypass_operators:
                    setattr(CustomWrapper, op, getattr(self.overflow_matrix, op))

            def _overflow_operator( self, b, forward_operator):
                m, lr, ur= self.overflow_matrix, self.overflow_lower_range, self.overflow_upper_range
                assert type(b) in (int, float)
                reverse_operator= OverflowPreventer.inverse_operator[forward_operator]
                uro= getattr( ur, reverse_operator)
                lro= getattr( lr, reverse_operator)
                afo= getattr( m, forward_operator )
                overflows= m > uro( b )
                underflows= m < lro( b )
                afo( b )
                m[overflows]= ur
                m[underflows]= lr
                return self

            def __getattr__(self, attr):
                if hasattr(self.wrapped, attr):
                    return getattr(self.wrapped,attr)
                else:
                    raise AttributeError

        self.wrapper= CustomWrapper(matrix)
        import functools
        for op in OverflowPreventer.inverse_operator.keys():
            setattr( CustomWrapper, op, functools.partial(self.wrapper._overflow_operator, forward_operator=op))

    def __enter__( self ):
        return self.wrapper

    def __exit__( self, type, value, tb ):
        pass 
```

# python - 销毁对话框没有正确重新出现

> ID：12867116
> 
> 赞同：2
> 
> 时间：2012-10-12T21:07:14.847
> 
> 标签：python, user-interface, pygtk, glade

我正在使用 Python / Glade 开发 GUI 应用程序，并遇到以下问题。我正在尝试使 About 对话框正常工作...但是，当我单击“关闭”（在“关于”对话框中）然后尝试再次打开它时，我看到的就是：

![在此处输入图像描述](../Images/66a688c81bce04855353e4ebb81a373b.png)

因此，只是窗口的一小部分，以及一个不起作用的关闭按钮。这是我的 Glade 窗口课程：

```
# glade object
class MainWindow(object):
  builder_ = None

  # load main window
  def __init__(self):
    handler = {
      "sigWindowDestroy" : gtk.main_quit,
      "sigShowAbout"     : self.show_about
    }

    projfile = "proj.glade"
    self.builder_ = gtk.Builder()
    self.builder_.add_from_file(projfile)
    self.builder_.connect_signals(handler)
    window = self.builder_.get_object("main_window")
    window.show()

  # show about dialog
  def show_about(self, *args):
    dAbout = self.builder_.get_object("dAbout")
    dAbout.run()
    dAbout.destroy() 
```

在我的主要功能中：

```
 # load glade gui
  app = MainWindow()
  gtk.main() 
```

第二次单击时，我在终端窗口中看到以下输出（使用 Mac OS X）。

```
GtkWarning: gtk_widget_show: assertion `GTK_IS_WIDGET (widget)' failed
  dAbout.run()
GtkWarning: gtk_label_set_markup: assertion `GTK_IS_LABEL (label)' failed
  dAbout.run() 
```

* * *

编辑：抱歉，由于对 PyGTK 不熟悉，必须重新打开。

我使用了这些`show()/hide()`方法而不是建议的方法`run()/destroy()`。现在，我正在关注另一篇 SO 帖子，该帖子突出显示了[本教程](http://zetcode.com/gui/pygtk/dialogs/)（谁说要使用`run()/destroy()`），并且看到了这种行为。

首先，关闭按钮什么都不做。出于某种原因，我曾认为它的行为是预先定义的。其次，使用角关闭按钮关闭对话框仍然提供与我在上面看到的相同的行为`run()/destroy()`。

* * *

编辑2：通过添加以下内容解决：

```
dAbout.connect("response", lambda d, r: d.hide()) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:09:04.293

不要尝试（深度）复制小部件。正如你发现的那样，它不起作用。

相反，`hide()`对话框而不是`destroy()`ing 它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-11T17:27:59.970

你甚至可以使用 run()。你不应该使用destroy()。是什么让你想到，你不应该一起使用 run() 和 hide() ？看，当您销毁一个小部件时，这意味着将其从内存中删除，就好像它从未构建过一样。如果您隐藏它，您可以稍后重用它，但要注意用户可能对其所做的更改，因为窗口将重新出现在隐藏之前的状态。您可以在隐藏时从代码中操作小部件属性。

关闭按钮的“预定义”操作是由 run() 引起的。您发布的使用 lambda 函数的解决方案与 run() 为您所做的差不多。基本上它执行以下操作：

*   连接 DialogWindow 的“响应”信号
*   连接 DialogWindow 的“删除事件”信号
*   启动一个新的 Gtk 主循环来阻塞应用程序
*   显示您的小部件
*   断开信号
*   返回响应

您只需要在之后隐藏（）它并能够再次运行（）它。

# javascript - 通过javascript将数组打印到表格中

> ID：12867117
> 
> 赞同：1
> 
> 时间：2012-10-12T21:07:17.810
> 
> 标签：javascript, html

目前，当您在“特殊”标识的 4 个文本框中添加一些值时，它会以串联字符串的形式输出。我如何将它分解成一个表格，我可以在表格中很好地打印出来。

```
$add.click(function() {
    var elem = document.createElement("div");
    var dmenu = document.getElementById("days");
    var dmenuvalue = dmenu.options[dmenu.selectedIndex].text;
    var regex = /^\d+(?:\.\d{0,2})$/;
    if (dmenuvalue != "temp" && $name.val().indexOf("%") == -1 && ($origprice.val().indexOf("%") == -1 && regex.test($origprice.val())) && ($specprice.val().indexOf("%") == -1 && regex.test($specprice.val()))) {

        var name = dmenuvalue + "%" + $name.val() + "%" + $origprice.val() + "%" + $specprice.val();
        $(elem).text(name);

        var dailyDeal = [
            dmenuvalue,
            $name.val(),
            $origprice.val(),
            $specprice.val()
        ];
        dailyDeals.push(dailyDeal);

        for (i = 0; i < 4; i++) {
            $('<input type="hidden">').attr({
                'name': 'name[' + ctr + '][' + i + ']',
                'value': dailyDeal[i]
            }).appendTo(elem);
        }

        $('<a>').attr({
            'href': '#'
        }).text("X").click(function() {
            $(elem).remove();
            //ctr--; 
            return false;
        }).appendTo(elem);

        $list.append(elem);
        ctr++;

        document.getElementById("dailydeals").innerHTML = '';
        return false;
    } else {
        document.getElementById("dailydeals").innerHTML = '*Please complete all required fields above.';
        return false;
    }
}); 
```

代码如下：http: [//jsfiddle.net/protron/xGhnv/4/](http://jsfiddle.net/protron/xGhnv/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:38:09.347

## JSFiddle 上的完整解决方案：

[http://jsfiddle.net/protron/xGhnv/9/](http://jsfiddle.net/protron/xGhnv/9/)

基本上我所做的是：

1.  在 HTML 中，我将`<div>`调用的内容替换`list`为新的`<table>`：

    ```
    <table id="tableDailyDeals"></table> 
    ```

2.  在 Javascript 而不是调用中，我在刚刚定义的表中`$(elem).text(...`创建了一个新的表行 ( )：`<tr>`

    ```
    var $tr = $('<tr>').appendTo('#tableDailyDeals'); 
    ```

3.  然后除了添加每个dailyDeal`input-hidden`属性（0 到 3）之外，我还创建了一个表格单元格（ -隐藏在同一个 td 中，我认为这样更好）：`<td>``<span>``dailyDeal`

    ```
    var $td = $('<td>').appendTo($tr);
    $('<span>').text(dailyDeal[i]).appendTo($td); 
    ```

4.  `<td>`然后只需为行移除器链接添加另一个表格单元格 ( )：

    ```
    var $tdRemoveRow = $('<td>').appendTo($tr); 
    ```

剩下的只是一些 CSS 样式和小细节。

# nsindexpath - UICollectionView cellForRow 崩溃

> ID：12867120
> 
> 赞同：0
> 
> 时间：2012-10-12T21:07:24.160
> 
> 标签：nsindexpath, uicollectionview, uicollectionviewcell

您好，我无法在 UICollectionView 的索引路径获取自定义对象...下面是我的代码。

我正在崩溃

[玩家名字：]：`unrecognized selector sent to instance`

有什么建议么？

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView     cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
BenchCollectionCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CollectionCell forIndexPath:indexPath];
[cell setFrame:CGRectMake(0, 4, 120, 50)];

    Player*homeBenchPlayer = [[self homeBench]objectAtIndex:indexPath.row];

    cell.playerName.text = homeBenchPlayer.firstName;
    cell.playerPosition .text = homeBenchPlayer.position;
    cell.playerPicture.image = [ UIImage imageWithData:homeBenchPlayer.picture];

return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:28:58.477

当我意外收到此错误时，我通常会返回 IB，选择导致崩溃的对象，并调查 Connections Inspector。通常，问题似乎是不正确的引用插座或发送的事件。

这可能是由于`performSelector:@selector(dismissModal:)`在被调用者不存在的地方调用引起的。

# html - Rails：将“选择文件”更改为“浏览”

> ID：12867124
> 
> 赞同：0
> 
> 时间：2012-10-12T21:07:34.127
> 
> 标签：html, ruby-on-rails, ajax, forms, file-upload

我正在尝试创建一个用于上传图像的文件字段。但是，我的有一个“浏览”，而我正在观看的教程有“选择文件”。

我的 file_field 代码看起来是一样的。有人可以解释是否有区别吗？我正在尝试将它连接到 AJAX 以显示我上传的结果而不刷新页面，所以我不确定是否可以使用“浏览”按钮。

我的表格：

```
<%= form_for([@user, @album, @photo], :html => { :multipart => true }) do |f| %>

<%= f.file_field :avatar, multiple: true, name: "photo[avatar]" %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:14:44.393

这只是选择文件的本机操作系统部分，因此您可能只是看到 mac / linux / Windows 之间的差异。你在哪个？它不应该影响您正在寻找的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:16:56.027

它只是一个浏览器/操作系统的东西，您可以通过隐藏按钮并创建另一个按钮来使用 javascript/jquery 更改它，有很多技术可以做到这一点......

你应该看看这个 railscast 这是一个用[ajax/jquery上传文件的好方法](http://railscasts.com/episodes/381-jquery-file-upload)

# wpf - 订阅 INotifyPropertyChanged

> ID：12867127
> 
> 赞同：0
> 
> 时间：2012-10-12T21:07:50.230
> 
> 标签：wpf

我有一个模拟电话交换机的静态类，它在自己的单独窗口中实例化电话对象；交易所维护了一个实例化的电话列表，我需要一种从一个电话对象“拨号”到另一个电话对象的方法 - 例如，如果我创建了两个电话对象并将第二个电话号码输入到第一个我想要的文本框中第二部电话上的属性将使用第一部电话（呼叫者）号码进行更新

我已经完成了数据绑定，但我是 INotifyPropertyChanged 的​​新手，这就是我所拥有的：

电话类：

```
 public class Phone : INotifyPropertyChanged
{
    private string _receivedNumber;
    public Phone(string phoneNumber)
    {
        PhoneNumber =  phoneNumber;
    }

    public string PhoneNumber
    {
        get;
        set;
    }

    public string Status
    {
        get;
        set;
    }

    public string ReceivedNumber
    {
        get { return _receivedNumber; }
        set
        {
            _receivedNumber = value;
            OnPropertyChanged("ReceivedNumber");
        }
    }

    private void OnPropertyChanged(string receivedNumber)
    {
        if (PropertyChanged !=null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(receivedNumber));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

}

这是我的 PhoneWindow.xaml.cs 中的逻辑，一旦在第一部电话上单击呼叫按钮，它想要连接的电话就会从我的 Exchange 列表（如果存在）中分配给电话对象（接收器） - 到现在为止这两个对象被实例化并且都显示在它们自己的窗口中。

我将第二个电话 ReceivedNumber 属性设置为呼叫者，这就是我不确定的地方，如何更新绑定/上下文以反映第二个电话对象上的呼叫者号码？

```
 private void BtnCallClick(object sender, RoutedEventArgs e)
    {
        string number = txtDialNumber.Text;
        if (String.IsNullOrEmpty(number) || !IsNumeric.IsValidNumber(number) || Exchange.RetrievePhone(number) == null)
        {

            MessageBox.Show("The number entered is not valid or the phone doesn't exist");
            return;
        }
        Phone receiver = Exchange.RetrievePhone(number);
        receiver.ReceivedNumber = _phone.PhoneNumber;
        receiver.PropertyChanged += //<--  How to implement this?

    } 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:29:14.730

我为 MVVM 模型编写了一个 ModelBase 抽象类，它允许订阅属性。

你可以在这里找到：http: [//xcalibur37.wordpress.com/2012/02/06/creating-a-viewmodel-base-part-iii-subscribing-can-make-all-the-difference/](http://xcalibur37.wordpress.com/2012/02/06/creating-a-viewmodel-base-part-iii-subscribing-can-make-all-the-difference/)

它会像这样工作：

```
myModel.Subscribe("MeterReading", obj => MyActionThatDoesStuff()); 
```

因此，如果 2 个不同的 ViewModel 订阅了 myModel.MeterReading，如果属性发生更改，它们都可以接收更新。

# java - Long 到 XMLGregorianCalendar 并返回到 Long

> ID：12867130
> 
> 赞同：9
> 
> 时间：2012-10-12T21:08:03.533
> 
> 标签：java, date, jaxb

我正在尝试从毫秒时间戳转换为 XMLGregorianCalendar 并返回，但我似乎得到了错误的结果。难道我做错了什么？看来我的日子越来越多了。

```
 // Time stamp   01-Jan-0001 00:00:00.000
    Long ts = -62135740800000L;
    System.out.println(ts);
    System.out.println(new Date(ts)); // Sat Jan 01 00:00:00 PST 1 .. Cool!

    // to Gregorian Calendar
    GregorianCalendar gc = new GregorianCalendar();
    gc.setTimeInMillis(ts);

    // to XML Gregorian Calendar
    XMLGregorianCalendar xc = DatatypeFactory.newInstance().newXMLGregorianCalendar(gc);

    // back to GC
    GregorianCalendar gc2 = xc.toGregorianCalendar();

    // to Timestamp
    Long newTs = gc2.getTimeInMillis();
    System.out.println(newTs);    //  -62135568000000  .. uh?
    System.out.println(new Date(newTs));  // Mon Jan 03 00:00:00 PST 1  .. where did the extra days come from? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:38:24.903

有趣 - 它适用于（大约）-10000000000000L（和正值）的值，但较大的负值变得不一致。

如果您打印出`gc`, `xc`, 和`gc2`，您可以看到问题出在哪里（从 XMLGregorianCalendar 到 GregorianCalendar 的转换

```
gc:  java.util.GregorianCalendar[time=-62135740800000 ... DAY_OF_WEEK=7
xc:  0001-01-01T08:00:00.000Z
gc2: java.util.GregorianCalendar[time=? ... DAY_OF_WEEK=5 
```

如果你打印出 的字段`xc`，你会得到 1,1,1。

```
 System.out.println(xc.getYear());
    System.out.println(xc.getMonth());
    System.out.println(xc.getDay()); 
```

对于`gc2`，您会得到 1,0,1（匹配`xc`，因为在 GregorianCalendar 中月份从零开始）

```
 System.out.println(gc2.get(gc2.YEAR));
    System.out.println(gc2.get(gc2.MONTH));
    System.out.println(gc2.get(gc2.DAY_OF_MONTH)); 
```

但是，添加这 3 个`println`调用会改变打印输出的输出`gc2`！-更改的`time=?`输出- 因此通过查询对象触发了一些计算；该属性也从变为。`gc2``time=-62135568000000``GregorianCalendar``areFieldsSet``false``true`

两个 GregorianCalendars 的时区不同，但这并不能解释错误，即使您设置了明确的 TimeZone 和 Locale，该错误仍然存​​在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T21:33:05.817

我相信这就是问题所在。根据文档，当缺少任何字段时，`toGregorianCalendar()` 依赖于相应的默认值进行转换。`GregorianCalendar`

如果你试试：

```
Date date = new Date();
long ts = date.getTime(); //in place of your input 
```

并运行您的代码，您应该会发现，`to`转换`from`工作正常。

如果您想要您`toGregorianCalendar()`的示例中的自定义提供输入，请使用`toGregorianCalendar(TimeZone,Locale,Defaults)`并提供更新的默认值以用于转换。

# apache-flex - 找出 *.SWC 文件的包名，以便我可以导入它

> ID：12867133
> 
> 赞同：2
> 
> 时间：2012-10-12T21:08:09.783
> 
> 标签：apache-flex, actionscript, flex3, swc, flash-builder4.5

我是一个菜鸟，所以这对你们来说可能是一个荒谬的错误，但我一生都无法弄清楚我刚刚添加的 .swc 文件的包/类的名称是什么。

我正在执行典型的步骤，进入属性、flex builder 路径、库选项卡，然后添加 SWC。它显示在我的项目包资源管理器中我引用的库文件夹中。但是，当我尝试“导入”时，没有下拉提示提示数据包的名称，我也无法弄清楚包的名称，以便我可以将其插入。

作为记录，我正在为那些知道这一点的人安装 FlexSpy。

最好的，帕里贾特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:59:27.827

您应该能够在包资源管理器中看到 swc 的内容。只需双击库图标，它就会展开为带有类的包结构。您甚至可以检查类的属性和方法。如果这不起作用，您的 FlashBuilder 可能已损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:46:38.870

`.swc`将文件重命名为`.zip`

使用您通常用于 zip 存档的任何文件（Winzip、Winrar、“unzip -l”、...）打开它

`catalog.xml`根目录中的文件将包含包名称。

# php - PHP 脚本在一台服务器上运行，在另一台服务器上给我一个内部服务器错误 500

> ID：12867134
> 
> 赞同：3
> 
> 时间：2012-10-12T21:08:16.157
> 
> 标签：php

> **可能重复：**
> [类中的 PHP 调用类返回错误：500](https://stackoverflow.com/questions/12863897/php-call-class-in-class-returns-error500)

我的代码看起来有点像这样：

```
<?php
include 'payTable.php';
session_start(); 

...

if ($_SESSION['fieldTen'] > 30)
{
    $payTable = 'payTable';
    $payTable::run();
}

?> 
```

我的权限设置为 0644，所以我认为这不是问题，但是我在服务器上遇到了奇怪的行为，我没有使用 XAMP 进入本地目录。

每次我尝试加载带有此代码的页面时，都会收到“内部服务器错误：500”错误。

谁能告诉我这里是否有明显的问题？我缺少的东西。

我尝试简单地从这个文件中删除 PHP，这会导致它的 HTML 部分出现没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:39:14.847

这不是 PHP < 5.3.0 上的合法语法，因此您会遇到语法错误：

```
$payTable = 'payTable';
$payTable::run(); 
```

PHP (< 5.3.0) 认为`$payTable`是一个字符串，所以你不能`::run()`在它上面使用。

解决方案就是完全放弃变量并直接调用它：

```
payTable::run(); 
```

在相关说明中，打开您的错误报告。这将使您能够轻松地发现和修复错误，而不是被一般错误蒙在鼓里。您可以通过编辑 php.ini（首选）来执行此操作，或者将其添加到脚本的顶部：

```
error_reporting(E_ALL);
ini_set("display_errors","On"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:10:49.383

看起来您正在尝试调用“payTable”的函数，但 payTable 不是具有任何函数的类。

此外，您可能会在输出一些数据后尝试设置会话......可能来自包含的文件？这将引发错误，但可能不如 500 严重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:11:02.697

500 只是意味着服务器遇到问题并且无法继续。您需要检查 Web 服务器（可能是 apache？）的错误日志，以了解实际问题是什么。查看代码，即兴猜测可能是包含的文件名与实际文件名不匹配。

# ios - 如果 URL 和图像都存在，Facebook SLComposeViewController URL 会显示在正文中

> ID：12867135
> 
> 赞同：10
> 
> 时间：2012-10-12T21:08:20.413
> 
> 标签：ios, facebook, ios6

使用`SLComposeViewController`，如果图像和 URL 都存在，我在向 Facebook 发帖时会注意到奇怪的行为。具体来说，如果您同时拥有图像和 URL，则 URL 将出现在 Facebook 帖子的正文中`SLComposeViewController`，紧跟在`initialText`我执行以下操作之后：

```
SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

NSString *text = @"This is a test Facebook post with SLComposeViewController.";
NSURL *url = [NSURL URLWithString:@"http://http://stackoverflow.com/questions/12503287/tutorial-for-slcomposeviewcontroller-sharing"];
UIImage *image = ...;

[controller setInitialText:text];
[controller addURL:url];
[controller addImage:image];

[self presentViewController:controller animated:YES completion:nil]; 
```

这显然很麻烦，因为如果 URL 很长，初始文本会被推离视图的可见部分，`SLComposeViewController`而我只能看到 URL 的后半部分：

![在此处输入图像描述](../Images/0b26e5291cbfd405298b97a59f7dc685.png)

如果我重复这个过程，这次不将图像添加到帖子中，URL 的文本根本不会方便地显示在正文中（即使它在网上正确显示）。

![在此处输入图像描述](../Images/a8e02c5f116e91a480ee315c870111a0.png)

底线，只有当有图像*和*URL 时，URL 才会显示在帖子的正文中。当我使用`FBNativeDialogs`.

有什么方法可以阻止这种行为`SLComposeViewController`，这样我就可以将图像和 URL 都连接到 Facebook 帖子，而不会让用户看到网站长而丑陋的 URL？显然，我可以使用任何非`SLComposeViewController`解决方案（例如，设计我自己的 UI 来撰写 Facebook 帖子，使用 Facebook 已弃用的[Feed Dialog](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)等）。只是想知道我是否忽略了一些明显`SLComposeViewController`的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T07:08:08.143

最后，我放弃了`SLComposeViewController`（以及`FBNativeDialogs`）。它们呈现出一种很好的综合感觉，但鉴于我的帖子总是包含照片和 URL，这真的行不通。最重要的是，这些帖子没有被正确地归为来自我的应用程序。

因此，最后，我编写了自己的用户界面并使用[此处](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)`FBRequestConnection`概述的 Facebook SDK 3.1 。我认为我们都必须制作自己的 UI 有点愚蠢，因为原生 UI 的弱点，但事实就是如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T10:06:03.340

新对话框似乎是围绕您设计的，在提供的链接指向的网站上提供大部分共享数据作为标签。像这样：

标题：

```
<title>TITLE</title> 
```

描述：

```
<meta name="description" content="DESCRIPTION"> 
```

图片：

```
<meta property="og:image" content="IMAGE_URL"> 
```

应用编号：

```
<meta property="fb:app_id" content="APP_ID"> 
```

这样您只需要提供初始文本和 URL。您可以查看官方的 Youtube 应用程序如何以 Facebook 共享为例。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-11-28T11:03:08.710

```
TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];
NSString *format = @"“%@” %@ /via @DesignSceneApp";
NSString *message = [NSString stringWithFormat:format, title, url]
NSUInteger idx = title.length;
while (![twitter setInitialText:message]) {
    idx -= 5;
    if (idx > 5) {
        message = [NSString stringWithFormat:format,
            [NSString stringWithFormat:@"%@…", [title substringToIndex:idx]],
            url
        ];
    } else {
        // Give up on the title.
        message = [NSString stringWithFormat:@"%@ /via @DesignSceneApp", url];
        [twitter setInitialText:message];
        break;
    }
}

[self presentViewController:twitter animated:YES completion:nil]; 
```

# php - pcre 正则表达式匹配前两个单词，数字

> ID：12867136
> 
> 赞同：6
> 
> 时间：2012-10-12T21:08:24.847
> 
> 标签：php, regex, string, pcre

我需要一个正则表达式来匹配字符串中的前两个单词（它们可能包含字母、数字、逗号和其他标点符号，但不包含空格、制表符或换行符）。我的解决方案是`([^\s]+\s+){2}`，但如果它匹配类似：*'123 word'* *in '123 word, hello'*，它不适用于只有两个单词且后面没有空格的字符串。

这项任务的正确正则表达式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T21:12:14.793

你几乎是对的：

```
([^\s]+\s+[^\s]+) 
```

假设您不需要更严格地控​​制要使用的字符。

如果您需要同时匹配两个词或只匹配一个词，您可以使用其中之一：

```
([^\s]+\s+[^\s]+|[^\s]+)
([^\s]+(?:\s+[^\s]+)?) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:12:58.377

您可以使用 . 分隔空格上的字符串，而不是尝试匹配单词`preg_split()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:11:35.287

如果你真的只想允许数字和字母`[^\s]`是不够的限制。用这个：

```
/[a-z0-9]+(\s+[a-z0-9]+)?/i 
```

# python - wxpython - 在不阻塞 GUI 的情况下顺序运行线程

> ID：12867138
> 
> 赞同：1
> 
> 时间：2012-10-12T21:08:42.493
> 
> 标签：python, multithreading, wxpython

我有一个 GUI 脚本，其中包含我所有的 wxPython 代码，以及一个单独的 testSequences 模块，它有一堆我根据来自 GUI 的输入运行的任务。这些任务需要很长时间才能完成（从 20 秒到 3 分钟），所以我想线程化它们，否则 GUI 在它们运行时会锁定。我还需要它们一个接一个地运行，因为它们都使用相同的硬件。（我在线程背后的基本原理只是为了防止 GUI 锁定。）我想要一个“运行”消息（在它之后有不同数量的句点，即“运行”、“运行”、“运行.. "等），因此用户知道正在发生进度，即使它不可见。我希望这个脚本在单独的线程中运行测试序列，但顺序是，这样第二个线程就不会了 t 被创建并运行，直到第一个完成。由于这与线程的目的相反，我真的找不到任何关于如何做到这一点的信息......任何帮助将不胜感激。

提前致谢！

gui.py

```
import testSequences
from threading import Thread

#wxPython code for setting everything up here...
for j in range(5):
    testThread = Thread(target=testSequences.test1)
    testThread.start()
    while testThread.isAlive():
        #wait until the previous thread is complete
        time.sleep(0.5)
        i = (i+1) % 4
        self.status.SetStatusText("Running"+'.'*i) 
```

测试序列.py

```
import time
def test1():
    for i in range(10):
        print i
        time.sleep(1) 
```

（显然这不是实际的测试代码，但想法是一样的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:30:27.013

想出了一个办法来做到这一点。我没有在我的 gui.py 中创建线程，而是创建了一个继承自 Thread 的类，并运行该类中的所有测试，然后在一个测试完成时发布 wxPython 事件（以便我可以更新状态栏）以及所有测试完成（所以我可以通知用户所有测试都已完成。

```
myEVT_TESTDONE = wx.NewEventType()
EVT_TESTDONE = wx.PyEventBinder(myEVT_TESTDONE , 1)
myEVT_ALLDONE = wx.NewEventType()
EVT_ALLDONE = wx.PyEventBinder(myEVT_ALLDONE, 1)

class TestDone(wx.PyCommandEvent):
    def __init__(self, etype, eid, val=None):
        wx.PyCommandEvent.__init__(self, etype, eid)
        self._val = val
    def GetValue(self):
        return self._val

class AllDone(wx.PyCommandEvent):
    def __init__(self, etype, eid):
        wx.PyCommandEvent.__init__(self, etype, eid)

class TestSequence(Thread):
    def __init__(self, parent, queue):
        Thread.__init__(self)
        self._queue = queue
        self._parent = parent
        self.start()
    def run(self):
        testCount = 0
        for test in self._queue:
            #Time-intensive task goes here
            for i in range(10):
                print i
                sleep(1)
            evt = TestDone(myEVT_TESTDONE, -1, i)
            wx.PostEvent(self._parent, evt)
        evt = AllDone(myEVT_ALLDONE, -1)
        wx.PostEvent(self._parent, evt)

class MainSequence(wx.Frame):
    def __init__(self, parent, id, title):
        self.Bind(EVT_TESTDONE, self.testDoneEvt)
        self.Bind(EVT_ALLDONE, self.allDoneEvt)
        #...the rest of the wxPython code
    def testDoneEvt(self, event):
        #Set what to be done after every test, e.g. update progress bar
        step = event.GetValue()
    def allDoneEvt(self, event):
        #Set what to be done after all tests, e.g. display "Tests complete"

program = wx.App()
window = MainSequence(None, -1, 'App title')
program.MainLoop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T18:38:50.710

您不能在带有 while 循环的 GUI 线程中等待，因为您阻塞了事件队列的处理。一种解决方案是使用计时器轮询线程的状态：

```
import wx 
import time
from threading import Thread

def test1():
    for i in range(10):
        print i
        time.sleep(1)

class TestFrame(wx.Frame): 
    def __init__(self): 
        wx.Frame.__init__(self, None, -1, "Test") 
        panel = wx.Panel(self, -1) 
        sizer = wx.BoxSizer(wx.VERTICAL) 
        panel.SetSizer(sizer) 

        self.button = wx.Button(panel, 0, "Start")
        sizer.Add(self.button, 0, wx.ALIGN_LEFT) 
        self.button.Bind(wx.EVT_BUTTON, self.OnButton)

        self.text = wx.StaticText(panel, 0, "No test is running")
        sizer.Add(self.text, 0, wx.ALIGN_LEFT) 

        self.timer = wx.Timer(self)

    def OnButton(self, event):
        self.testThread = Thread(target=test1)
        self.testThread.start()
        self.text.SetLabel("Running")
        self.button.Disable()
        self.Bind(wx.EVT_TIMER, self.PollThread)
        self.timer.Start(20, oneShot=True)
        event.Skip()

    def PollThread(self, event):
        if self.testThread.isAlive():
            self.Bind(wx.EVT_TIMER, self.PollThread)
            self.timer.Start(200, oneShot=True)
            self.text.SetLabel(self.text.GetLabel() + ".")
        else:
            self.button.Enable()
            self.text.SetLabel("Test completed")

app = wx.PySimpleApp() 
TestFrame().Show() 
app.MainLoop() 
```

# python - Python MySQLDB：在列表中获取 fetchall 的结果

> ID：12867140
> 
> 赞同：52
> 
> 时间：2012-10-12T21:08:48.360
> 
> 标签：python, django, mysql-python

我想在列表中获取 fetchall 操作的结果，而不是元组的元组或字典的元组。例如，

```
cursor = connection.cursor() #Cursor could be a normal cursor or dict cursor
query = "Select id from bs"
cursor.execute(query)
row = cursor.fetchall() 
```

现在，问题是结果行是 ((123,),(234,)) 或 ({'id':123}, {'id':234}) 我正在寻找的是 (123,234) 或 [ 123,234]。如果我可以节省解析结果集，那就最好了。提前致谢

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-12T21:35:12.037

那么列表推导呢？如果结果是`((123,), (234,), (345,))`：

```
>>> row = [item[0] for item in cursor.fetchall()]
>>> row
[123, 234, 345] 
```

如果结果是`({'id': 123}, {'id': 234}, {'id': 345})`：

```
>>> row = [item['id'] for item in cursor.fetchall()]
>>> row
[123, 234, 345] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-09-03T18:06:14.203

我敢肯定，经过这么长时间，你已经解决了这个问题，但是，对于一些可能不知道如何使用 MySQLdb 将游标的值作为字典获取的人，你可以使用这里找到[的](http://zetcode.com/db/mysqlpython/)方法：

```
import MySQLdb as mdb

con = mdb.connect('localhost', 'testuser', 'test623', 'testdb')

with con:

    cur = con.cursor(mdb.cursors.DictCursor)
    cur.execute("SELECT * FROM Writers LIMIT 4")

    rows = cur.fetchall()

    for row in rows:
        print row["Id"], row["Name"] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-21T10:22:20.310

这个旧的 Q 在搜索扁平化数据库查询时出现在 Google 上，所以这里有更多建议......

考虑一个快速[列表展平迭代器](https://stackoverflow.com/a/953097)。

其他答案使用`fetchall()`它首先将所有行加载到内存中，然后对其进行迭代以创建一个新列表。可能效率低下。可以结合 MySQL 所谓的[服务器端游标](https://stackoverflow.com/a/1808309)：

```
# assume mysql on localhost with db test and table bs
import itertools
import MySQLdb
import MySQLdb.cursors

conn = MySQLdb.connect(host='localhost',db='test', 
          cursorclass=MySQLdb.cursors.SSCursor ) 
cursor = conn.cursor()
# insert a bunch of rows
cursor.executemany('INSERT INTO bs (id) VALUES (%s)',zip(range(1,10000)) )
conn.commit()
# retrieve and listify
cursor.execute("select id from bs")
list_of_ids = list(itertools.chain.from_iterable(cursor))
len(list_of_ids)
#9999
conn.close() 
```

但是这个问题也被标记为 Django，它有一个很好的[单字段查询扁平化器](http://single%20field%20query%20flattener)

```
class Bs(models.Model):
    id_field = models.IntegerField()

list_of_ids = Bs.objects.values_list('id_field', flat=True) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-20T03:35:03.537

以这种方式制作光标对象：

```
db = MySQLdb.connect("IP", "user", "password", "dbname")

cursor = db.cursor(MySQLdb.cursors.DictCursor) 
```

然后，当您对查询执行 cursor.fetchall() 时，将获得一个字典元组，您可以稍后将其转换为列表。

```
data = cursor.fetchall()

data = list(data) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-20T08:35:51.070

```
list= [list[0] for list in cursor.fetchall()] 
```

这会将结果呈现在一个列表中，例如 - list = [122,45,55,44...]

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-28T08:25:50.030

如果只有一个字段，我可以使用它从数据库中创建一个列表：

```
def getFieldAsList():
    kursor.execute("Select id from bs")
    id_data = kursor.fetchall()
    id_list = []
    for index in range(len(id_data)):
        id_list.append(id_data[index][0])
    return id_list 
```

* * *

## 回答 #7

> 赞同：-8
> 
> 时间：2013-05-17T22:55:12.753

```
cursor.execute("""Select * From bs WHERE (id = %s)""",(id))

cursor.fetchall() 
```

# c# - 编辑T4文件自定义实体类名和输出文件名

> ID：12867141
> 
> 赞同：1
> 
> 时间：2012-10-12T21:08:57.677
> 
> 标签：c#, entity-framework

我在现有数据库上使用 Entity Framework Reverse Engineer Code First。类已正确创建，但我需要更改实体名称。我想在每个实体类前面加上“EpiFlex”。如果 SQL 表名称为 Users，则生成的实体应为 EpiFlexUsers，输出文件应为 EpiFlexUsers.cs。

是否有某种标签可以添加到 T4 文件的开头以自动添加该前缀，还是我必须煞费苦心地检查每个文件并将前缀放在自动生成的代码之前？

或者，也许我完全没有抓住重点。是否有另一种方法来指定实体的自定义命名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:58:51.830

似乎没有任何快速简便的方法可以做到这一点。但是，`Programming Entity Framework 2nd Edition`如果您要真正进入实体框架，我认为这是一本非常重要的书。这本书对编辑 T4 文件也有很多帮助。我还没有消化关于 T4 编辑的完整部分，所以也许我仍然会找到一些东西来展示如何非常轻松地做我想做的事。

这是该书的链接。[http://shop.oreilly.com/product/9780596807252.do](http://shop.oreilly.com/product/9780596807252.do)

# makefile - 包含或 -include 自动生成的依赖项？

> ID：12867144
> 
> 赞同：1
> 
> 时间：2012-10-12T21:09:15.563
> 
> 标签：makefile, g++

我喜欢使用该`g++ -MM`功能来自动构建我的依赖项。我这样做的方式如下：

```
include $(ALLOBJ:%.o=%.d)

%.d: %.cxx
    @echo making dependencies for $<
    @g++ -MM $(CXXFLAGS) $< -o $@
    @sed -i 's,$*\.o,& $@ ,g' $@ 
```

基本上我可以给出这个规则`ALLOBJ`，它会：

1.  将每个`.o`名称转换为`.d`名称，然后`include`，
2.  当它找不到 a`.d`时，它将从`.cxx`文件 中创建它
    *   规则的最后一行`%.d: %.cxx`会将文件名添加`.d`到文件本身，这样依赖关系就会自动更新。

当我删除一个标题时，问题就出现了：`.d`文件仍然希望找到它，并且当它不存在时，make 会感到不安。一种解决方案是替换`include`为`-include`, 并在编译规则中构建依赖项。不幸的是，这需要每个编译规则的依赖生成行，并且还会忽略所有其他`include`错误（这似乎有风险）。有没有其他简单的方法来自动构建依赖项来避免这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:02:08.913

为了重申我[对另一个问题的回答](http://stackoverflow.com/questions/12866155/compile-files-only-if-needing/12868198#12868198)，我这样做：

```
%.o: %.cpp
    @echo making $@ and dependencies for $< at the same time
    @$(CC) -MD -c $(CXXFLAGS) -o $@ $<
    @cp $*.d $*.P
    @sed -e 's/#.*//' -e 's/^[^:]*: *//' -e 's/ *\\$$//' \
         -e '/^$$/ d' -e 's/$$/ :/' < $*.P >> $*.d
    @rm $*.P

-include $(ALLOBJ:%.o=%.d) 
```

**编辑：**

它...它生成依赖文件，但更干净且没有`sed`命令：

```
%.o: %.cpp
    @echo making $@ and dependencies for $< at the same time
    @$(CC) -c $(CXXFLAGS) -o $@ $<
    @$(CC) -MM -MP $(CXXFLAGS) $< -o $*.d

-include *.d 
```

所以现在我必须`%.o`在我自己的 makefile 中修改规则。*从现在开始，在我编译*的所有东西中都会有一点@JackKelly ，嘲笑我。哦，这是一个黑色的日子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T19:43:18.077

多阅读[g++](/questions/tagged/g%2b%2b "显示标记为“g++”的问题")手册，感谢上面@jackKelly 和@Beta 的回复，我找到了以下解决方案：

```
include $(ALLOBJ:%.o=%.d)

%.d: %.cxx
    @echo making dependencies for $<
    @g++ -MM -MP -MT $*.d -MT $*.o $(CXXFLAGS) $< -o $@ 
```

总结这些标志：

*   `-MM`: 构建依赖（而不是编译）
*   `-MP`：为所有标题构建“虚拟”目标。这可以防止 make 在标题被删除并因此无法找到时抱怨。
*   `-MT`：指定规则的目标。这使我们能够告诉 make`.d`文件依赖于标头，而无需诉诸丑陋的 sed 规则。

我不相信我的解决方案比@Beta 的解决方案更正确。我倾向于在同一个 makefile 中对 C++ 文件使用多个编译规则，因此对所有文件使用单个依赖项规则比在每个编译规则中生成依赖项稍微干净一些（在我的情况下）。

# python - 检查无效密钥

> ID：12867150
> 
> 赞同：0
> 
> 时间：2012-10-12T21:10:05.703
> 
> 标签：python

我有一个while循环：

```
while parent != None:
     pathList.append(parentMap[parent])
     parent = parentMap[parent] 
```

我想要对这个列表做的只是将父值的父值（已经在代码的其他部分确定）添加到列表中，直到我到达树的顶部并且没有更多的父值。while 循环的运行理念是，一旦给 parentMap[parent] 提供了一个无效的 [parent] 键，它将被赋值为“None”并且循环将终止。这不会发生。相反，一旦我到达最上面的键 (5, 5)，程序就会抛出一个错误，指出“无效键”。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T21:24:32.720

`get`如果在地图中找不到键，您可以使用该方法返回默认值：

```
while parent is not None:
    pathList.append(parentMap[parent])
    parent = parentMap.get(parent, None) # returns None if key is not found 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T21:23:58.240

正如其他人也指出的那样，问题在于如果找不到密钥 a`dict`不会返回`None`，而是引发`KeyError`异常（[如文档中所示](http://docs.python.org/library/stdtypes.html?highlight=dict#dict)）。

为了克服这个问题，您可以使用`defaultdict`from`collections`并将其设置`None`为该字典的默认值。我建议您阅读[类文档](http://docs.python.org/library/collections.html#collections.defaultdict)。

在这种情况下，而不是初始化您的`dict`as`parentMap = dict(some_initializer)`或`parentMap = {}`您可以使用`parentMap = defaultdict(lambda: None, some_initializer)`or`parentMap = defaultdict(lambda: None, {})`和缺少的键将返回`None`而不是引发`KeyError`异常。

在一个不相关的问题中，`None`是一个单例，最好检查一个`item is not None`而不是使用`!=`. 在我看来，它会生成更清晰的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T21:22:51.737

```
while parent != None:
      try:
           pathList.append(parentMap[parent])
           parent = parentMap[parent]
      except KeyError:
           parent = None 
```

应该可以正常工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T21:13:03.233

好吧，您收到错误说明`invalid key`的原因可能是因为您没有将`parentMap[parent]`顶级父级分配给`None`，您只是没有将其放入地图中。由于它不在地图中，因此默认行为是抛出`invalid key`错误。

那是你在做什么？

编辑：要补救，请使用`parentMap.get(parent, None)`

# scala - Scala 在哈希图中更新/创建值

> ID：12867151
> 
> 赞同：3
> 
> 时间：2012-10-12T21:10:06.893
> 
> 标签：scala, hashmap

我对 Scala hasmaps 不理解这一点：如果它不存在，我如何创建一个值或更新一个值？

我正在尝试计算字符串列表中的字符数。

我试过这段代码，但它不起作用：

```
 def times(chars: List[Char]): List[(Char, Int)] = {
     val map = new HashMap[Char, Int]()
     chars.foreach(
        (c : Char) => {
           map.update(c, map.get(c) + 1)
        })
 } 
```

我了解返回类型不正确。但是我的 foreach 循环错了吗？有没有更漂亮的写法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:31:24.643

我想这会回答你的问题：

```
scala> "abaccdba".groupBy(identity).mapValues(_.length)
res3: scala.collection.immutable.Map[Char,Int] = Map(b -> 2, d -> 1, a -> 3, c -> 2) 
```

哦，顺便说一句，对于你原来的问题`HashMap`有一个方法`getOrElseUpdate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:21:53.927

如果有人想知道如何使用 GetOrElseUpdate 并在这里找到这篇文章是我找到的示例：

```
val map = Map('a' -> 1, 'b' -> 2)         //> map  :  
scala.collection.immutable.Map[Char,Int] = Map(a -> 1, b -> 2)
val newval = map.getOrElse('b', 0) + 1      //> newval  : Int = 3
val updated = map + ('b' -> (newval))        //> updated  : 
scala.collection.immutable.Map[Char,Int] = Map(a -> 1, b -> 3) 
```

# android - SQLiteDatabase.openDatabase() 出错时删除文件

> ID：12867154
> 
> 赞同：0
> 
> 时间：2012-10-12T21:10:15.373
> 
> 标签：android, android-sqlite

我使用代码`SQLiteDatabase.openDatabase(path, null, SQLiteDatabase.OPEN_READONLY)` 打开文件。如果该文件不是有效的数据库文件，则默认行为是删除该文件。看起来系统正在尝试删除错误的数据库文件。我能做些什么来阻止这种情况？

我希望我的程序支持 API 7，所以我不能添加`DatabaseErrorHandler`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:47:05.160

这是一个众所周知的问题。感兴趣的读者可能想在[这里](https://stackoverflow.com/questions/7764943/what-can-be-done-about-the-fact-that-android-automatically-deletes-corrupt-sqlit)或[这里](http://code.google.com/p/android/issues/detail?id=10127)阅读。

# android - 如何在谷歌地图中搜索地点？

> ID：12867157
> 
> 赞同：0
> 
> 时间：2012-10-12T21:10:23.423
> 
> 标签：android, google-maps, google-places-api, autocompletetextview, google-geocoder

我的应用正在使用 Google 地图，我想按地址进行搜索。我怎样才能做到这一点？我希望我的搜索栏也有自动完成功能。

我正在尝试使用 Geocoder，但效果不佳。Google Places API 会更好吗？如果是，我看到它限制为每天 1000 个请求。如果我过去，我需要付钱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:17:33.210

> 我的应用正在使用 Google 地图，我想按地址进行搜索。我怎样才能做到这一点？我希望我的搜索栏也有自动完成功能。我正在尝试使用 Geocoder，但效果不佳。Google Places API 会更好吗？

如果您想按地址和自动完成搜索输入进行搜索，则必须使用 Google Places API [https://developers.google.com/maps/documentation/javascript/places](https://developers.google.com/maps/documentation/javascript/places)

> 如果是，我看到它限制为每天 1000 个请求。如果我过去，我需要付钱吗？

[https://developers.google.com/maps/documentation/javascript/usage](https://developers.google.com/maps/documentation/javascript/usage) http://googlegeodevelopers.blogspot.com/2011/07/geo-apis-summer-learning-series-google.html

“最初，您的密钥将提供每天 1,000 个请求的免费配额。一旦您准备好启动下一个基于位置的出色应用程序，只需在项目上“启用计费”即可。系统将提示您提供信用卡详细信息，以便验证您的身份。完成此操作后，您的配额将增加到每天 100,000 个请求，但 API 仍可免费使用。请注意，如果您对其他 API 使用相同的密钥，您可能会被收费，您可以通过创建用于访问其他 API 的单独项目。”

# javascript - Javascript Document.write 问题

> ID：12867159
> 
> 赞同：-1
> 
> 时间：2012-10-12T21:10:33.927
> 
> 标签：javascript, javascript-events

我正在尝试获取下面的代码行，以帮助我`<?php include('like.php'); ?>`仅在访问者未使用移动设备但似乎无法正常工作时在页面上编写“”。关于如何让它工作的任何想法。

```
<script type="text/javascript">
<!--
if (screen.width > 699 {
document.write("<?php include('like.php'); ?>")
}
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:11:51.207

当 JavaScript 写入文档时，为时已晚 - PHP 已经将所有内容发送到浏览器。下一个最佳方法是进行[AJAX](https://developer.mozilla.org/en-US/docs/AJAX)调用以获取内容并将其附加到 DOM。

假设你愿意使用像 jQuery 这样的 JavaScript 框架，这很简单：

```
if (screen.width > 699) {
    $.ajax({
        url      : '/like.php',
        dataType : 'html',
        success  : function(data) {
            $('#myContainer').html(data);
        }
    });
} 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:14:41.563

正如其他人所提到的，您不能让 JavaScript 包含一段 PHP 代码并执行它。由于 PHP 在服务器端运行，因此在将页面提供给客户端之前，按照您的建议注入代码只会`<?php include('like.php'); ?>`以纯文本形式写入文档。

但是，如果满足特定条件，您可以通过 Ajax 加载内容`like.php`并将其注入 DOM。

使用像[jQuery](http://jquery.com/)这样的库，这很容易，因为它提供了一种方法[`.load()`](http://api.jquery.com/load/)，可以让您像这样将内容加载到 DOM 中。你可以这样做：

```
// Wait for the DOM to be ready
$(function () {
    // Check the width of the screen
    if (screen.width > 699) {
        // Load the content and add the HTML to an element
        $('#id-of-element-to-add-content-to').load('like.php');
    }
}); 
```

在上面的示例中， 的内容`like.php`将被加载到带有 id 的 HTML 元素中`id-of-element-to-add-content-to`，但是您可以使用任何您喜欢的选择器，以满足您的需要。如果你想替换整个页面的正文，你可以这样做`$('body').load('like.php');`。

有关可用 jQuery 选择器的更多信息：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:12:19.273

javascript 在浏览器上执行，php 在服务器上执行，所以，你需要添加一个 if 条件，然后包含

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T21:13:25.507

如果不是来自移动设备，您可以测试用户代理服务器端并附加该行

# c++ - 链接到使用不同编译器标志构建的静态库是否安全

> ID：12867161
> 
> 赞同：11
> 
> 时间：2012-10-12T21:10:42.503
> 
> 标签：c++, static-libraries, googletest

我使用 GoogleTest 测试我的 C++ 项目，在发现 Ubuntu 包中不再分发预编译库后，我在项目网站上发现以下内容：

> 如果您使用不同的编译器标志编译 Google Test 和您的测试代码，他们可能会看到相同类/函数/变量的不同定义（例如，由于在 Google Test 中使用了#if）。因此，为了您的理智，我们建议您避免安装预编译的 Google 测试库。相反，每个项目都应该编译 Google Test 本身，以确保 Google Test 和测试使用相同的标志。

我从中得到的是，将 GoogleTest 与正在测试的项目分开编译是一个坏主意。我不明白这是否只是 GoogleTest 的事情，或者这是否是链接库的一般事情。

**问题**

是否存在链接到预编译的第三方库、编译器标志或其他不安全的情况，如果没有，GoogleTest 有什么特别之处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T21:24:43.070

有一些编译器标志，特别是那些与对齐一起工作的标志，可能会导致问题。

来自[GCC i386 和 x86-64 标志](http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html#i386-and-x86_002d64-Options)

> **-malign-double**
> **-mno-align-double**
> 
> 控制 GCC 是否在两个字边界或一个字边界上对齐 double、long double 和 long long 变量。在两个字的边界上对齐双变量会产生在奔腾上运行得更快的代码，但会消耗更多的内存。
> 
> 在 x86-64 上，默认启用 -malign-double。
> 
> 警告：如果您使用 -malign-double 开关，包含上述类型的结构的对齐方式与已发布的 386 应用程序二进制接口规范不同，并且**与未使用该开关编译的代码中的结构不兼容。**

例如，在 32 位系统上使用该标志将使 double 和 long long 以 64 位对齐。如果编译一个没有标志的库，然后在使用标志的同时尝试使用该库，则包含上述类型的结构可能具有不同的对齐方式，并且可能无法互操作。

其他（更简单的）情况也可以确保使用相同的#defines 集以确保使用相同的函数/结构/类定义（以及其他此类 ODR 违规）。例如，在 gcc 中使用 '--std=c++11'，它启用了标准库类的 C++ 11 版本，在某些情况下与以前的版本不同。

# php - Kunena for Joomla 使用 nofollow 作为内部链接

> ID：12867167
> 
> 赞同：0
> 
> 时间：2012-10-12T21:11:39.170
> 
> 标签：php, joomla, joomla2.5, joomla-extensions

出于某种原因，Kunena 为内部所有内容放置了 nofollow 链接。这对所有外部链接都有意义，但对内部链接肯定不是。我希望 Google 索引与我拥有的论坛帖子相关的路径。

我希望有人知道如何删除nofollow 链接。看起来这个文件是主要文件：`components/com_kunena/lib/kunena.link.class.php`

有一些功能可以删除 nofollow 链接，例如：

```
static function GetHrefLink($link, $name, $title = '', $rel = 'nofollow', $class = '', $anker = '', $attr = '') {
            return '<a ' . ($class ? 'class="' . $class . '" ' : '') . 'href="' . $link . ($anker ? ('#' . $anker) : '') . '" title="' . $title . '"' . ($rel ? ' rel="' . $rel . '"' : '') . ($attr ? ' ' . $attr : '') . '>' . $name . '</a>';
    }

    //
    // Basic universal href link
    //
    static function GetSefHrefLink($link, $name, $title = '', $rel = 'nofollow', $class = '', $anker = '', $attr = '') {
            $uri = $link instanceof JURI ? $link : JURI::getInstance($link);
            if ($anker) $uri->setFragment($anker);
            return JHTML::_('kunenaforum.link', $uri, $name, $title, $class, $rel, $attr);
    } 
```

我试过在任何地方删除参数，我试着把它留空，我试过用`follow`它来代替。我还尝试查找`nofollow`整个 Kunena 组件中显示的每个位置，并尝试删除它们。仍然没有运气。有任何想法的人吗？

库内纳：2.0.2 Joomla：2.5.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:06:15.697

您不需要更改nofollow，因为谷歌将索引整个主题和类别。检查主题的 url 是否已编入索引。并将 RSS 和站点地图添加到谷歌网站管理员。您可以配置 RSS@kunena 设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:44:45.933

通过更改此文件解决了这个问题：administrator/components/com_kunena/libraries/view.php

寻找：

`public function getTopicLink`

更改此行：

```
return JHTML::_('kunenaforum.link', $uri, $content, $title, $class, 'nofollow'); 
```

到：

```
return JHTML::_('kunenaforum.link', $uri, $content, $title, $class, 'follow'); 
```

这存在于几个地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T17:36:24.313

如果我理解您最初的担忧，您想删除所有 rel="nofollow" 引用。

我会使用一个名为 ReReplacer 的免费组件来做到这一点。 [http://www.nonumber.nl/extensions/replacer](http://www.nonumber.nl/extensions/rereplacer)

创建一个搜索 rel="nofollow" 并将其替换为 rel="follow" 的替换项。

我为一个 Joomla 用户论坛做了这个，我们希望他们在他们的签名中有关注链接。

如果您购买专业版的替换器，那么您可以指定只替换 Kunena。

# c# - 获取类型的默认值

> ID：12867169
> 
> 赞同：2
> 
> 时间：2012-10-12T21:11:51.463
> 
> 标签：c#, .net, reflection

我正在使用在此站点上找到的通用 DataTable 到 List 转换方法：

```
private List<T> ConvertToList<T>(DataTable dt)
        {
            var columnNames = dt.Columns.Cast<DataColumn>()
                .Select(c => c.ColumnName)
                .ToList();

            var properties = typeof(T).GetProperties();

            return dt.AsEnumerable().Select(row =>
            {
                var objT = Activator.CreateInstance<T>();

                foreach (var pro in properties)
                {
                    if (columnNames.Contains(pro.Name))
                    {
                            pro.SetValue(objT, row[pro.Name], null);
                    }
                }

                return objT;
            }).ToList();

        } 
```

它工作得很好，除非我在 pro.SetValue 中为整数字段命中空值。它失败的原因是，如果第二个参数为 null，pro.SetValue 将为一个类型设置默认值，如下所示：pro.SetValue(objT, null,null)。但我的 row[IdColumn] 返回空对象 {} 而不是 null。我得到的错误是：

> “System.DBNull”类型的对象无法转换为“System.Nullable`1[System.Int32]”类型。

使用时`int?` 和

> 'System.DBNull' 类型的对象无法转换为 [System.Int32]' 类型。

使用时`int` 如何处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T21:13:58.233

首先检查null：

```
pro.SetValue(objT, row.IsNull(pro.Name) ? null : row[pro.Name], null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:15:01.253

您可能需要明确检查 DBNull

```
if (columnNames.Contains(pro.Name))
{
    if (row.IsNull(pro.Name))
        pro.SetValue(objT, null, null);
    else
        pro.SetValue(objT, row[pro.Name], null);
} 
```

这将处理`int?`，但尝试转换`null`为`Int32`（不可为空）*应该*是错误情况。

# asp.net-mvc - MVC4 创建成员表

> ID：12867170
> 
> 赞同：0
> 
> 时间：2012-10-12T21:11:54.207
> 
> 标签：asp.net-mvc, asp.net-membership

我有一个新的 MVC4 应用程序。它在我的笔记本电脑上的 sqlexpress db 上创建了成员资格和 userprofile 表。我想更改它以在另一台服务器 sql db 上创建和使用这些。

如何创建这些表并告诉我的应用程序使用这些表？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:10:58.450

所以 - 我的数据库托管在 discountasp.net 上。您所要做的就是将 web.config 中名为 LocalSqlServer 的连接字符串指向新数据库，然后点击默认的 Account/Register 页面并创建表。

# python - 熊猫：数东西

> ID：12867178
> 
> 赞同：32
> 
> 时间：2012-10-12T21:12:33.627
> 
> 标签：python, pandas

下面，male_trips 是大熊猫数据框，站是小熊猫数据框。对于每个车站 ID，我想知道发生了多少次男性旅行。以下内容可以完成这项工作，但需要很长时间：

```
mc = [ sum( male_trips['start_station_id'] == id ) for id in stations['id'] ] 
```

我应该怎么做呢？

* * *

更新！所以有两种主要的方法：`groupby()`其次是`size()`，和更简单的`.value_counts()`。我做了一个快速的方法`timeit`，并且该`groupby`方法以相当大的优势获胜！这是代码：

```
from timeit import Timer
setup = "import pandas; male_trips=pandas.load('maletrips')"
a  = "male_trips.start_station_id.value_counts()"
b = "male_trips.groupby('start_station_id').size()"
Timer(a,setup).timeit(100)
Timer(b,setup).timeit(100) 
```

结果如下：

```
In [4]: Timer(a,setup).timeit(100) # <- this is value_counts
Out[4]: 9.709594964981079

In [5]: Timer(b,setup).timeit(100) # <- this is groupby / size
Out[5]: 1.5574288368225098 
```

请注意，在这种速度下，探索数据*类型*value_counts 会稍微快一些，而且记忆力更小！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-13T14:29:37.487

我会喜欢 Vishal，但不是使用 sum()，而是使用 size() 来计算分配给每组“start_station_id”的行数。所以：

```
df = male_trips.groupby('start_station_id').size() 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-13T14:39:56.103

我在下面的答案适用于 Pandas 0.7.3。不确定新版本。

这就是该`pandas.Series.value_counts`方法的用途：

```
count_series = male_trips.start_station_id.value_counts() 
```

`count_series`然后根据中的值进行检查应该是直截了当的`stations['id']`。但是，如果您坚持*只*考虑这些值，则可以执行以下操作：

```
count_series = (
                male_trips[male_trips.start_station_id.isin(stations.id.values)]
                    .start_station_id
                    .value_counts()
               ) 
```

这只会计算实际在`stations.id`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T21:29:18.717

```
male_trips.count() 
```

不工作？ [http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.count.html](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.count.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-12T22:00:59.020

这需要多长时间：

```
df = male_trips.groupby('start_station_id').sum() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-13T10:05:26.750

编辑：在上面的答案中看到`isin`并且`value_counts`存在（`value_counts`甚至带有自己的条目`pandas.core.algorithm`并且`isin`也不简单`np.in1d`）之后，我更新了以下三种方法

```
male_trips.start_station_id[male_trips.start_station_id.isin(station.id)].value_counts() 
```

您还可以在 station.id: 上进行内部连接， `pd.merge(male_trips, station, left_on='start_station_id', right_on='id')`然后是`value_counts`. 或者：

```
male_trips.set_index('start_station_id, inplace=True)
station.set_index('id, inplace=True)
male_trips.ix[male_trips.index.intersection(station.index)].reset_index().start_station_id.value_counts() 
```

如果您有时间，我会对它与巨大的 DataFrame 的表现有何不同感兴趣。

# mysql - 将唯一标识符分配给域对象的一些做法是什么？

> ID：12867184
> 
> 赞同：-3
> 
> 时间：2012-10-12T21:13:21.723
> 
> 标签：mysql, database, identity

> **可能重复：**
> [如何选择我的主键？](https://stackoverflow.com/questions/4291990/how-to-choose-my-primary-key)

我有一个具有以下属性的用户类：

*   用户名（唯一）
*   密码
*   电子邮件（唯一）
*   名
*   姓
*   年龄

用户名和电子邮件唯一标识用户的一个实例。在我的数据库中，这些应该用作主键还是应该为每个实例生成不同的唯一标识符。据我所知，在 on`SELECT`的情况下，比较字符串比比较数字要慢。然后我不应该使用自分配的 int、long、double 等，还是`AUTO_INCREMENT`在用户的 ID 列中使用？使用 UUID 怎么样（又是长字符串的问题）？我的问题也适用于我以后可能添加的所有其他域类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:18:54.613

主键应该与任何其他字段分开，应该没有业务价值并且应该是唯一的整数。

示例：一家公司创建一个带有社会安全号码的“用户”表。这些对每个人来说应该是独一无二的。然而，在某些时候，当用户输入 ssn 时，ssn 会被错误键入。输入错误的号码不存在，记录已保存。一段时间后，另一个用户尝试输入他们的 ssn，它实际上与之前输入错误的数字相同。在公司自己发现并解决此问题之前，用户可能无法实际保存他们的个人资料并继续。鉴于这个问题，公司决定在这一点上放宽对 ssn 的“唯一”限制。如果 ssn 不是主键，这将相对容易 - 只需删除唯一约束。如果主键是 ssn，这将更难。

将该字段定义为 auto_increment，mysql 将处理它：

```
CREATE TABLE Persons
 (
 person_id int NOT NULL AUTO_INCREMENT,
 LastName varchar(255) NOT NULL,
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:20:42.757

生成索引时，我尝试遵循以下提示：[http](http://cherry.world.edoors.com/CzyAhL90b5RA) ://cherry.world.edoors.com/CzyAhL90b5RA （MySQL 索引提示列表）

此外，使用用户名或电子邮件将使用外键“弄乱”数据库中的其他表，从而使这些表也更难以索引。将其设为 int 或 long 并使用 AUTO_INCREMENT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:28:23.903

考虑由唯一列组成的[复合主键](http://weblogs.sqlteam.com/jeffs/archive/2007/08/23/composite_primary_keys.aspx)，而不是代理键。这将具有根据您的唯一性要求维护数据完整性的额外好处。

# ios - 访问 ios 照片并上传到网络服务器

> ID：12867191
> 
> 赞同：0
> 
> 时间：2012-10-12T21:14:03.520
> 
> 标签：ios

我正在尝试构建一个 iOS 应用程序，它将在视图中显示所有 iOS 设备的照片。然后，用户应该能够单击每张照片进行选择（允许多选），然后在选择后将照片上传到网络服务器。

是否可以访问由照片应用程序控制的照片？有谁知道任何有效的方法来访问照片（第三方框架）和/或教程？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:17:44.467

Apple 的开发者网站将[Assets Library Framework](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html#//apple_ref/doc/uid/TP40009730)列为“访问由 Photos 应用程序管理的图片和视频”的一种方式。那里的文档相当广泛，并且在开发网站上多看一下应该会产生一些教程和示例应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:35:43.820

AFAIK 你不能从相机胶卷中抓取所有图像并在你的应用程序中使用它们，但是你可以有一个 UIImagePickerController 让用户从他们的相机胶卷中选择图像，并且当他们选择一个时会触发一个委托（或根据你如何设置它）然后你可以在你的应用程序中使用该图像。

# c# - 检测路径是否指向 NTFS 分区

> ID：12867196
> 
> 赞同：1
> 
> 时间：2012-10-12T21:14:17.460
> 
> 标签：c#, windows, ntfs

给定一个绝对文件系统路径，我如何检测它是否在 NTFS 分区上？我更喜欢 C# 的帮助，但 Win32/C 可以。该软件将在其上运行的系统是 Windows Vista 或更高版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:22:20.643

```
//Get all the drives on the local machine.
DriveInfo[] allDrives = DriveInfo.GetDrives();

//Get the path root.
var pathRoot = Path.GetPathRoot(absoluteFilePath);
//Find the drive based on the path root.
var driveBasedOnPath = allDrives.FirstOrDefault(d => d.RootDirectory.Name == pathRoot);
//Determine if NTFS  
var isNTFS = driveBasedOnPath != null ? driveBasedOnPath.DriveFormat == "NTFS" : false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T21:23:09.757

您可以使用`FSCTL_FILESYSTEM_GET_STATISTICS`来确定文件系统类型。

这是一些示例代码。我已经检查过它是否正确处理了挂载点，即它检测到目标卷的类型，而不是源卷。您不需要指定挂载点本身（尽管可以），但您指定的文件或目录必须存在。

```
#define _WIN32_WINNT 0x0502

#include <windows.h>

#include <stdio.h>

int wmain(int argc, wchar_t ** argv)
{
    HANDLE h;
    FILESYSTEM_STATISTICS * fs;
    BYTE buffer[32768];
    DWORD dw;

    h = CreateFile(argv[1], 0, 
        FILE_SHARE_READ | FILE_SHARE_WRITE | FILE_SHARE_DELETE, 
        NULL, OPEN_EXISTING, FILE_FLAG_BACKUP_SEMANTICS, NULL);

    if (h == INVALID_HANDLE_VALUE)
    {
        printf("CreateFile: %u\n", GetLastError());
        return 1;
    }

    if (!DeviceIoControl(h, FSCTL_FILESYSTEM_GET_STATISTICS, NULL, 0, buffer, sizeof(buffer), &dw, NULL))
    {
        dw = GetLastError();
        CloseHandle(h);
        printf("DeviceIoControl: %u\n", dw);
        if (dw == ERROR_INVALID_FUNCTION)
        {
            printf("This probably means the specified file or directory is not on an NTFS volume.\n");
            printf("For example, this happens if you specify a file on a CD-ROM.\n");
        }
        return 1;
    }

    CloseHandle(h);

    fs = (FILESYSTEM_STATISTICS *)buffer;
    printf("Filesystem type: %u\n", fs->FileSystemType);

    if (fs->FileSystemType == FILESYSTEM_STATISTICS_TYPE_NTFS)
    {
        printf("The file or directory is on an NTFS volume.\n");
    }
    else
    {
        printf("The file or directory is not on an NTFS volume.\n");
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:23:26.683

你想看看[`DriveInfo`](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)课堂。就像是：

```
var drive = DriveInfo.GetDrives().SingleOrDefault(di => di.Name.StartsWith("C"));
Console.WriteLine("C drive: {0}", drive.DriveFormat); 
```

`drive.DriveFormat`将输出格式，因此您可以检查它是否为 NTFS。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T21:41:04.487

Win32 [GetVolumeInformation()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364993%28v=vs.85%29.aspx) API 将为您提供给定根目录路径的文件系统名称。

请注意，这将遵循符号链接/连接，并返回此类链接目标的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T21:27:53.650

```
using System.Management;

string logDisk= "c:";
string CIMObject = String.Format("win32_LogicalDisk.DeviceId='{0}'", logDisk);
using(ManagementObject mo = new ManagementObject(CIMObject))
{
    mo.Get();
    Console.WriteLine(mo["FileSystem"]);
} 
```

# ruby - rspec 给出未定义的方法

> ID：12867197
> 
> 赞同：2
> 
> 时间：2012-10-12T21:14:17.763
> 
> 标签：ruby, rspec, tdd

RSpec noob 需要帮助。我的大脑现在糊涂了......我正在尝试在我的代码中为这个方法创建一个基本的“我存在并且我返回一个值”测试集......

```
def attempt_win(board)
 @ai_winmoves.each do |k, v| # go through each win move in the ai_winmoves array located above.         
   ai_keys = v.select{ |k, v| v == "O"}.keys # grab all computer player's Os from the value hash

   intersection = ai_keys & @keys_with_o # get common elements between two arrays..note: keys_with_o = all current O's on game board

   if intersection.length >=2 # when two intersections exist it means two O's are on the board

    @answers_array << k # add to answers array per iteration

    @answers_array.each do |key|
      # answer = @anskey[@thing.last].to_sym
      puts "which moves can ai win with?"
      puts @anskey[key]
      answer = @anskey[key].to_sym
      puts "attempt win"
      puts answer

      if board.grid[answer] == " " #if win move space is empty take it
        @move = answer               
      else #check for a block move  
        # attempt_block    # handled at line 162               
      end
    end
  end
end # END @ai_winmoves.each do |k,v| 
```

结尾

这是我的测试代码...

```
 describe 'attempt_win' do
    before (:each) do
      @board.grid[:b2] == "X"
    end 
    xit 'computer looks for any possible win move'
    it 'computer returns a value' do
      @player_computer.attempt_win(@board).should_not be(nil)
    end
  end 
```

这是我遇到的 rspec 失败...

```
 1) Player class attempt_win computer returns a value
 Failure/Error: @player_computer.attempt_win(@board).should_not be(nil)
 NoMethodError:
   undefined method `each' for nil:NilClass
 # ./lib/player.rb:171:in `attempt_win'
 # ./spec/player_spec.rb:47:in `block (3 levels) in <top (required)>' 
```

就是这样，但是......

如果你想查看整个类文件 player.rb 和它的测试文件 player_spec.rb 看下面...

```
# TODO - send error output if move already taken
# TODO - better WIN detection

class Player

attr_reader :boardpiece # i exist so game.rb can read me

def initialize(letter)
  @boardpiece = letter
end

def move_human(game, board)
  @game_two = game

  puts "human move..."

  human_move = gets.chomp
  human_symbol = human_move.to_sym
  # look for move as key in board.grid
  if board.grid.has_key?(human_symbol)
    if board.grid[human_symbol] == " "
      #puts "bingo"  
      @move = human_symbol            
    else
      puts "spot taken...try again"
      move_human(@game_two, board)
    end
  else
    puts "invalid move...try again"
    move_human(@game_two, board)
  end           
end

def move_computer(game, board)
  # ai should do three things
  # attempt win
  # block human
  # random move

  puts "computer move..."
  # all possible third moves as 'O' (computer)
  @human_winmoves = {
      :wm01 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm02 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm03 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm04 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm05 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm06 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
      :wm07 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
      :wm08 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
      #check those corners
      :wm09 => {:a1=>"X", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm10 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm11 => {:a1=>" ", :a2=>"X", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm12 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm13 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>"X"},
      :wm14 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>"X"},
      :wm15 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>"X", :c3=>" "},
      :wm16 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
      #check opposites
      :wm17 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
      :wm18 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
      :wm19 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
      :wm20 => {:a1=>"X", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm21 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm22 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
      :wm23 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>"X"},
      :wm24 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
      #check crazy
      :wm25 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
      :wm26 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm27 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
      :wm28 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},            
      :wm29 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
      :wm30 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
      :wm31 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
      :wm32 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>"X", :c3=>" "},
      :wm33 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm34 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm35 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
      :wm36 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
      :wm37 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm38 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm39 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>"X", :c2=>" ", :c3=>" "},
      :wm40 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>"X", :c3=>" "}
  }

  @ai_winmoves = {
      :wm01 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm02 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm03 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm04 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm05 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm06 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
      :wm07 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
      :wm08 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
      #check those corners
      :wm09 => {:a1=>"O", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm10 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm11 => {:a1=>" ", :a2=>"O", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm12 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm13 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>"O"},
      :wm14 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>"O"},
      :wm15 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>"O", :c3=>" "},
      :wm16 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
      #check opposites
      :wm17 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
      :wm18 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
      :wm19 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
      :wm20 => {:a1=>"O", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm21 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm22 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
      :wm23 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>"O"},
      :wm24 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
      #check crazy
      :wm25 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
      :wm26 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm27 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
      :wm28 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},            
      :wm29 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
      :wm30 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
      :wm31 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
      :wm32 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>"O", :c3=>" "},
      :wm33 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm34 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm35 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
      :wm36 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
      :wm37 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm38 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
      :wm39 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>"O", :c2=>" ", :c3=>" "},
      :wm40 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>"O", :c3=>" "}
  }
  # match current answers located in @thegrid with possible @anskey array, iterate for each item
  @anskey={
      :wm01=>"c3",:wm02=>"c2",:wm03=>"c1",:wm04=>"b3",:wm05=>"b1",:wm06=>"a3",:wm07=>"a2",:wm08=>"a1",
      :wm09=>"a3",:wm10=>"c1",:wm11=>"a1",:wm12=>"c3",:wm13=>"c3",:wm14=>"c1",:wm15=>"c3",:wm16=>"a1",
      :wm17=>"b1",:wm18=>"b2",:wm19=>"b3",:wm20=>"a2",:wm21=>"b2",:wm22=>"b2",:wm23=>"c2",:wm24=>"b2",
      :wm25=>"a1",:wm26=>"a1",:wm27=>"a3",:wm28=>"a3",:wm29=>"c1",:wm30=>"c1",:wm31=>"c3",:wm32=>"c3",
      :wm33=>"a1",:wm34=>"a1",:wm35=>"c1",:wm36=>"c1",:wm37=>"a3",:wm38=>"a3",:wm39=>"c3",:wm40=>"c3"
  }
  #
  # scan board for available move locations
  @keys_with_o = board.grid.select{ |k, v| v == "O" }.keys       # find Os on the board

  @keys_with_x = board.grid.select{ |k, v| v == "X" }.keys       # find Xs on the board

  @answers_array = [] # initialize answers array

  if board.grid[:b2] == " "   #AND center spot is empty
    ai_spot = "b2"
    # puts "ai takes center "+ai_spot
    @move = ai_spot.to_sym  #must return this answer as a symbol         
  else
    # TODO - Ai attempts win
    i = 0
    until i == 4
      attempt_win(board) #run 3x then run attempt_block
      i = i+1 # add 1 to i
      if i == 4
        puts "running attempt_block..." 
        attempt_block(board)
      end
    end
  end

  return @move # had this guy in the wrong place
end      

def attempt_win(board)
  @ai_winmoves.each do |k, v| # go through each win move in the ai_winmoves array above.         
    ai_keys = v.select{ |k, v| v == "O"}.keys # grab all computer player's Os from the value hash

    intersection = ai_keys & @keys_with_o # get common elements between two arrays..note: keys_with_o = all current O's on game board

    if intersection.length >=2 # when two intersections exist it means two O's are on the board

      @answers_array << k # add to answers array per iteration

      @answers_array.each do |key|
        # answer = @anskey[@thing.last].to_sym
        puts "which moves can ai win with?"
        puts @anskey[key]
        answer = @anskey[key].to_sym
        puts "attempt win"
        puts answer

        if board.grid[answer] == " " #if win move space is empty take it
          @move = answer               
        else #check for a block move  
          # attempt_block    # handled at line 162               
        end
      end
    end
  end # END @ai_winmoves.each do |k,v|
end

def attempt_block(board)
  puts "attempt block method - hi"
  # thing = [] # initialize thing array
  @human_winmoves.each do |k,v| # for test - go threw each win moves.
    # get common elements between two arrays..recall from above that v contains a hash
    human_keys = v.select{ |k, v| v == "X"}.keys
    # which moves can I take to block human
    intersection = human_keys & @keys_with_x

    if intersection.length >= 2
      puts "intersection"
      puts intersection
      @answers_array << k # adds a key per iteration
      puts "@answers_array << k"
      puts @anskey[k]
      @answers_array.each do |key|
        puts "which moves can ai block with?"
        puts @anskey[key]
        answer = @anskey[key].to_sym
        puts "attempt block"
        puts answer

        # if board.spot_taken?(answer)

        if board.grid[answer] != " " # spot taken
          puts "space taken can not block 2: " + answer.to_s 
        else
          puts answer.to_s+" blocked"
          @move = answer # for test - at last intersection value found...return it as move value
          return @move
        end
      end
    end
  end # END @human_winmoves.each do |k,v|
end 
end 
```

如果您想查看整个 player_spec.rb 文件...

```
require 'game'
require 'board'

describe 'Player class' do  
before (:each) do
  #Dry it up
  @player_human = Player.new('X')
  @player_computer = Player.new('O')
  @board = Board.new
  @game = Game.new(@player_human, @player_computer, @board)
end

describe 'move_human' do
  before (:each) do
    # first set up my expectations         
    @player_human.should_receive(:puts).with("human move...")
    @player_human.stub(:gets).and_return("a1")
  end
  it 'receives cli input and prints text to screen' do
    # now trigger them
    @player_human.move_human("X", @board)
  end
  it 'returns a move value' do
    # now trigger them
    @player_human.move_human("X", @board).should eq(:a1)     #return the value is what I mocked?
  end     
end

describe 'move_computer' do
  it 'should print - ...computer move... - to screen' do
    # first set up my expectations
    @player_computer.should_receive(:puts).with("computer move...")
    # now trigger them
    @player_computer.move_computer("O", @board)
  end
  it 'returns expected first move b2' do
    @player_computer.move_computer("O", @board).should eq(:b2)
  end
end

describe 'attempt_win' do
  before (:each) do
    @board.grid[:b2] == "X"
  end 
  xit 'computer looks for any possible win move'
  it 'computer returns a value' do
    @player_computer.attempt_win(@board).should_not be(nil)
  end
end

describe 'attempt_block'do
  xit 'looks for a block move'
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:38:22.190

如果您知道如何正确阅读，该错误会非常清楚地告诉您出了什么问题：

```
1) Player class attempt_win computer returns a value
 Failure/Error: @player_computer.attempt_win(@board).should_not be(nil)
 NoMethodError:
   undefined method `each' for nil:NilClass
 # ./lib/player.rb:171:in `attempt_win'
 # ./spec/player_spec.rb:47:in `block (3 levels) in <top (required)>' 
```

这告诉你几件事：

*   发生错误的规范行是`@player_computer.attempt_win(@board).should_not be(nil)`.
*   该错误是由于`each`在不响应该消息的对象上调用。
*   它被调用的对象是`nil`。
*   错误发生在`./lib/player.rb:171`方法`attempt_win`中，或者在调用的某些内部库方法中`attempt_win`。（您可以使用`--backtrace`标志运行规范以获得完整的回溯。默认情况下，RSpec 尝试将其过滤到仅相关行以减少噪音。）

查看您的代码，该错误表明`@ai_winmoves`尚未初始化并且具有调用`nil`时间的值。`attempt_win`

# php - 当不存在帖子时，Wordpress 循环不显示“其他”

> ID：12867205
> 
> 赞同：0
> 
> 时间：2012-10-12T21:14:52.823
> 
> 标签：php, wordpress, loops

当没有帖子存在时，我习惯于在 else 之后看到消息，我不确定为什么它现在没有显示？

代码：

```
<?php
     $args = array( 'post_type' => 'event', 'posts_per_page' => 1, 'post_status' => 'future', 'order' => 'ASC' );
     $loop = new WP_Query( $args );
     if ( have_posts() ) : while ( $loop->have_posts() ) : $loop->the_post();
  ?>
  <div class="event_preview_title"><?php the_title(); ?></div>
  <div class="event_details">
    <div class="event_date"><?php the_time('m/d/y'); ?></div>
    <div class="event_time"><?php the_time('g:i A'); ?></div>
  </div>
  <?php the_post_thumbnail( array(65,65) ); ?>
  <a class="clickthrough" href="<?php bloginfo('wpurl'); ?>/events"></a>
  <?php endwhile; else: ?>
        <p>Bluebird Books may be coming soon to a neighborhood near you!<br />
We are currently on hiatus planning our next season's schedule. New tour dates will be posted to this page once confirmed. Meanwhile, inquiries about appearances and programs are welcomed! If you are interested in having Bluebird visit your business, school, or special event, please contact us.</p>
  <?php endif; ?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:32:46.493

## 你做了一个特别的`WP_Query`，但正在检查错误的帖子

```
if ( have_posts() ) 
```

应该

```
if ( $loop->have_posts() ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:20:41.590

我不确定当你使用奇怪的 if/while 语法时会发生什么，但是：

```
endwhile; 
```

我*认为*您`endwhile`正在结束`while`循环，并且`;`正在结束`if`语句。我建议使用标准`{`和`}`语法，这样这样的东西会更容易阅读：

```
<?php
    $args = array( 'post_type' => 'event', 'posts_per_page' => 1, 'post_status' => 'future', 'order' => 'ASC' );
    $loop = new WP_Query( $args );
    if (have_posts()) {
        while ( $loop->have_posts() ) {
            $loop->the_post();
?>
  <div class="event_preview_title"><?php the_title(); ?></div>
  <div class="event_details">
    <div class="event_date"><?php the_time('m/d/y'); ?></div>
    <div class="event_time"><?php the_time('g:i A'); ?></div>
  </div>
<?php
            the_post_thumbnail( array(65,65) );
?>
  <a class="clickthrough" href="<?php bloginfo('wpurl'); ?>/events"></a>
<?php
        }
    } else {
?>
        <p>Bluebird Books may be coming soon to a neighborhood near you!<br />
We are currently on hiatus planning our next season's schedule. New tour dates will be posted to this page once confirmed. Meanwhile, inquiries about appearances and programs are welcomed! If you are interested in having Bluebird visit your business, school, or special event, please contact us.</p>
<?php
    }
?> 
```

# iphone - iPhone渐变按钮问题

> ID：12867207
> 
> 赞同：0
> 
> 时间：2012-10-12T21:15:10.627
> 
> 标签：iphone, button, gradient

我有以下代码来创建渐变按钮：

```
CAGradientLayer *gradientLayer = [CAGradientLayer layer];
gradientLayer.frame = btnSignUp.layer.bounds;

gradientLayer.colors = [NSArray arrayWithObjects:
                        (id)[UIColor colorWithWhite:1.0f alpha:0.1f].CGColor,
                        (id)[UIColor colorWithWhite:0.4f alpha:0.5f].CGColor,
                        nil];

gradientLayer.cornerRadius = btnSignUp.layer.cornerRadius;

[btnSignUp.layer addSublayer:gradientLayer]; 
```

然而，底部的圆角也被涂上了。我不明白为什么会这样。有任何想法吗？

这是图片：http: [//imageshack.us/a/img546/509/btnw.png](http://imageshack.us/a/img546/509/btnw.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:57:58.990

我想你想要的是`_button.layer.masksToBounds = YES;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:28:38.253

如果您的目标是 iOS 5.0 或更高版本，您可能需要创建渐变的 PNG 文件并拉伸它以填充按钮的背景，而不是弄乱图层。我相信使用 PNG 对性能的影响会更好。

所以像：

```
static UIEdgeInsets insets = {15, 15, 15, 15};  (or whatever your insets are)
UIImage* image = [[UIImage imageNamed:@"myImage"] resizableImageWithCapInsets:insets];
[_button setBackgroundImage:image forState:UIControlStateNormal]; 
```

# database - MS Access 在表单的 1 个字段中输入数据，然后在另一个字段中生成默认的预定义值

> ID：12867208
> 
> 赞同：1
> 
> 时间：2012-10-12T21:15:12.737
> 
> 标签：database, ms-access, ms-access-2007

我正在使用 MS Access 2007。

我在数据库中有一个表，关注的 3 个字段是：

字段 1 = 打开日期位置（日期）

字段 2 = 日期位置关闭（日期）

字段 3 = 状态（文本）

我需要有关以下最佳方法的指导：

在表单输入级别，只要用户在日期位置打开字段中输入日期，状态字段就会更改以在其字段中显示文本“活动”。

一旦用户在日期位置关闭字段中输入日期，状态字段就会从“活动”变为“非活动”。

这发生在添加到表中的每条记录上。

我在表级别玩过各种验证规则，希望在创建表单之前有一个规则或表达式。那没有用，我认为它是在表单级别，也许答案是这样的：

[Ms Access 1 字段触发另一个字段的数据](http://www.accessforums.net/forms/calculate-one-field-based-another-one-9373.html)

或者我应该看看生成声明 2 个字符串“Active”和“Inactive”然后使用 IF Date Location open has Date value 然后将“Active”字符串添加到字段的代码。

还是我忽略了显而易见的东西，它就像一个组合框一样简单......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:44:55.973

Use the after update event of the "date opened" text box to set the value of the "status" text box. If that text box is named "txtStatus", a simple assignment statement could be:

```
Me.txtStatus = "Active" 
```

However, you might want to first verify "date closed" is Null. Otherwise, an "Inactive" record would be set as "Active" again if a user subsequently changes the "date opened" value.

Also consider whether Null is to be permitted for "date opened" and what should happen if an existing value is changed to Null.

Similarly, use the after update event of the "date closed" text box to adjust the value of `txtStatus`. However, the logic there will likely differ from that of the "date opened" after update event.

# python - 数据库中的 GAE python 更新

> ID：12867209
> 
> 赞同：1
> 
> 时间：2012-10-12T21:15:13.713
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有一个关于更新 GAE 数据库中的字段的问题。我的问题是这样的：

```
class A(db.Model):
    a = db.StringProperty() 
```

我添加了布尔字段：

```
class A(db.Model):
    a = db.StringProperty()
    b = db.BooleanProperty(default=False) 
```

现在我的问题是我想要模型 b == False 的每个实例。

要更新它，我当然可以将它们拖出数据存储并将它们放回那里，但是那里已经有 700k 元素，我真的不知道如何有效地做到这一点。我无法立即将它们取出，因为我得到了超出软内存的错误。如果我尝试用小块来做 - 它会花费我很多数据库读取操作。你知道我还能如何更新我的数据存储吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:28:31.740

我同意@ShayErlichmen。但是，如果您真的想更新每个实体，最简单的方法是使用 MapReduce 库： [http ://code.google.com/p/appengine-mapreduce/](http://code.google.com/p/appengine-mapreduce/)

这并不像听起来那么容易，因为文档很烂，但这是入门​​点： [http ://code.google.com/p/appengine-mapreduce/wiki/GettingStartedInPython](http://code.google.com/p/appengine-mapreduce/wiki/GettingStartedInPython)

您只需编写一个函数 foo() 将检查传递给它的每个实体的值，如果需要，编写更新您的布尔值，然后编写它。

该库将抓取一批实体并将每批实体发送到一个单独的任务。每个任务都将在一个循环中运行，调用您的函数 foo()。请注意，批处理并行运行，因此它可能会并行启动几个实例，但它往往很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:21:15.667

您的新属性可以处于以下三种状态之一：无、假和真。只需在您的代码中将 None 视为 False，您就不必进行更新。

# performance - 给定矩形内的一个点，确定最接近该点的边

> ID：12867219
> 
> 赞同：2
> 
> 时间：2012-10-12T21:16:15.770
> 
> 标签：performance, algorithm, math

我很好奇是否有一种优雅的方法可以做到这一点，除了计算点到每一边的距离并找到最小值。

我想过一些事情：如果它是一个正方形，我们可以画出对角线并找出点落在 4 个区域中的哪个区域。这些区域中的每一个都对应于最近的一侧。

也许我们可以将矩形分成正方形并从那里去某个地方？

似乎另一种解决方案太复杂了，不值得寻找。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T21:54:51.280

对于矩形，您可以使用以下区域：

![矩形最近点区域](../Images/b0d5e12b5462c066fc5049eac69c213f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:59:25.227

我认为矩形与坐标系不正交。首先计算每条边的中点。这应该很简单，具体取决于您如何定义矩形。

然后计算到这个中间点的距离。最小的距离是最近的一侧。您无需使用 pytagoras 计算完整距离。平方和就足够了。

# actionscript-3 - 拖放 - 限制重复的 MC 在目标中一次性使用？

> ID：12867220
> 
> 赞同：0
> 
> 时间：2012-10-12T21:16:41.903
> 
> 标签：actionscript-3, actionscript, flash-cs5.5

我一直在使用 AS3 处理 Flash 拖放场景。场景分为 4 个“区域”，每个区域有 5 个目标。我使用数组来允许将 mc 放在各自的区域中，没有任何特定的顺序。所有这些都可以正常工作。

我的问题是，有 2 个“拼图”块 (MC) 在屏幕上的视觉显示方式方面彼此相同。我已经设置了阵列以允许将两者都放入区域 1 或区域 2。但是，我想设置它以便如果“相同的部分 1”被放入区域 1，那么“相同的部分 2” " 也不能放入同一个区域。

有关如何执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:30:05.133

如何在每个区域设置一个标志，告诉它是否已经附加了一块？

如果您的区域是电影剪辑，您可以简单地向它们添加变量，并设置`mcTarget.isTaken = true`片段何时附加到它。如果它们只是坐标，您可以使用这样的全局数组

```
private mZoneTaken:Array = new Array();

for (var i:int=0; i<4; i++)
{
   mZoneTaken[i] = new Array();
   for (var j:int = 0; j<5; j++)
   {
      mZoneTaken[i][j] = false;
   }
} 
```

然后，无论何时将一块棋子放在区域上，您都可以将其标志设置为`true`，从而防止任何其他棋子附着在该区域上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:52:47.393

Personally, I would have an array/Vector (Vectors are much, much faster. Though they can be a royal pain to use) of objects within each individual zone. You keep this updated at all times. If you remove one, you use `splice(indexOf(obj),1)` to remove it from the array.

For your problem, I would do this:

```
var p1:Sprite = new Sprite();
var p2:Sprite = new Sprite();
var zoneArray:Array = new Array();//there would be one for each zone, simplified it here

//this code would run whenever an object enters the zone
function zoneEnter(e:Event = null):void{
    var currentZone:Sprite; //set this equal to the zone the sprite just entered
    var currentObject:Sprite = e.currentTarget as Sprite; //this way we know which object just entered currentZone

    if ( currentObject == p1 &&  zoneArray.indexOf(p2) >= 0 ) {
        //prevent it from entering the zone
    }

    if ( currentObject == p2 &&  zoneArray.indexOf(p1) >= 0 ) {
        //prevent it from entering the zone
    }
} 
```

There are obviously some limitations here if you are looking at a lot of objects. But if you know, for sure, there will only be two, I think this would be the way to go. If there will be more, you would need to create some kind of control structure that would allow you to check an object against other objects. I could elaborate and give a sample of what I am talking of here if it's needed. It's a tad bit complex, but not hard to implement.

EDIT 10-17-12: Added in example code of how the more advanced logic would look.

```
var puzzleMap:Array = new Array();

var piece1:Piece = new Piece(); //this is the puzzle piece we'll be checking
var piece2:Piece = new Piece(); 
var piece3:Piece = new Piece();
var piece1Objs:Array = [piece2,piece3];
var piece2Objs:Array = [piece1,piece3];

puzzleMap.push({piece:piece1,others:piece1Objs});
puzzleMap.push({piece:piece2,others:puzzle2Objs);

private function stopDragHandler(e:MouseEvent = null):void{
    var space:Space = space; //this is the space the object was dropped into (I don't know how you identify them, so this is pseudo code)
    var valid:Boolean = true; //we'll check for a bad drop since it's easiest
    if (event.target.dropTarget != null && MovieClip(event.target.dropTarget.parent).allowed.indexOf(event.target) > -1){
        for ( var i:Number = 0; i < puzzleMap.length; i++ ) {
            var current:Object = puzzleMap[i];
            if ( current == e.currentTarget ) {
                for ( var j:Number = 0; j < current.others.length; j++ ) {
                    var checkAgainst:Piece = current.others[i] as Piece;
                    if ( space.currentObjects.indexOf(checkAgainst) < 0 ) {
                        valid = false;
                        break;
                    }
                }
            }
        }
        if ( !valid ) {
            //prevent the drop here
        }
    }
} 
```

# android - 使用 ACR122 通过 NFC 向 Android 发送大数据

> ID：12867221
> 
> 赞同：1
> 
> 时间：2012-10-12T21:16:44.783
> 
> 标签：android, nfc, ndef

我正在开发一个 C# 应用程序以使用 ACR122U/T NFC 非接触式智能卡读卡器将数据发送到 android。我已经能够发送小于 255 字节的少量数据，但由于较低的层允许发送缓冲区最多 255，因此我无法发送大于该数据的任何数据。我知道做到这一点的唯一方法是通过 SNEP 或 NDEF 碎片或两者兼而有之，但我无法弄清楚我该如何实现它。

# javascript - 从 iframe 中获取所有框架/检查 iframe 内容是否有框架

> ID：12867222
> 
> 赞同：1
> 
> 时间：2012-10-12T21:16:46.120
> 
> 标签：javascript, html, iframe

我有一个页面可以将页面动态加载到 iframe 中。我在网上找到了脚本，它根据内容的高度调整 iframe 的高度。
但如果内容页面有（正常）框架本身，它就不起作用。

现在我想检查内容页面是否有框架，或者更好地访问它们，以便我可以计算它们的长度，然后从子帧中选择最高长度值作为我的 iframe 的长度。

请在没有 JQuery 的情况下提供帮助。只是普通的旧Javascript。:-)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:28:11.853

您可以访问窗口对象的框架属性。它是一个包含当前文档中所有帧的数组。

```
// suppose a max of 1 frame each inner frame
function getInnerFrame(win) {
    win = win || window;
    if (win.frames.length > 0)
        return getInnerFrame(win.frames[0]);
    else
        return win;
} 
```

编辑：纠正了一个非常愚蠢的错误

# c++ - 更优雅的十进制格式 C++

> ID：12867223
> 
> 赞同：1
> 
> 时间：2012-10-12T21:16:46.917
> 
> 标签：c++

我有这个代码：

```
 void FeetInches::decimal() 
            {
                if (inches == 6.0)
                {
                    inches = 5;
                    std::cout << feet << "." << inches << " feet";  //not the best but works..
                }
            } 
```

这会将 12 英尺 6 英寸打印为 12.5 英尺。我宁愿不使用这种“hackish”方法，而是让它像这样：

```
 void FeetInches::decimal() 
            {
                if (inches == 6.0)
                {
                    inches = .5;
                    std::cout << feet << inches << " feet";  //not the best but works..
                }
            } 
```

但这将打印 60.5 英寸（我需要 6.5 英寸）。基本上，如果我单独打印英寸，它会打印 0.5。我希望英寸只打印 0.5 而没有零。不能使用 printf 方法或其他快速技术来实现这一点吗？顺便说一下，数据类型是双重的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T21:18:58.773

先把你的英寸换算成英尺怎么样：

```
feet = feet + inches / 12.0; 
```

现在打印出结果。或者，如果您不想更改`feet`变量，请直接在`cout`语句中进行计算或使用临时变量进行计算。

# c# - C# SQL 查询不返回任何内容

> ID：12867227
> 
> 赞同：1
> 
> 时间：2012-10-12T21:16:57.327
> 
> 标签：c#, sql

我在这里有公共数据表，代码看起来正确，但它没有返回任何东西，OrderID 是正确的，查询本身是正确的，它没有返回任何东西......谁能告诉我为什么？

```
public DataTable get_OrderTransaction_Master_ByOrderID(Int64 orderID)
    {

        cn = new SqlConnection(objCommon.IpcConnectionString);
        cn.Open();

        string query = "select transactionID from dbo.OrderTransaction_Master where orderID = " + orderID;
        SqlCommand queryCommand = new SqlCommand(query, cn);
        SqlDataReader queryCommandReader = queryCommand.ExecuteReader();
        DataTable dataTable = new DataTable();
        dataTable.Load(queryCommandReader);
        cn.Close();
        return dataTable;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:23:39.607

警告：这是基于不完整信息的猜测：

试试这个：更改查询字符串并添加行以添加参数。

```
 string query = "select transactionID from dbo.OrderTransaction_Master where orderID = @OrderId";
    SqlCommand queryCommand = new SqlCommand(query, cn); 
    queryCommand.Parameters.AddWithValue("@OrderId", orderID);
    SqlDataReader queryCommandReader = queryCommand.ExecuteReader(); 
```

说明：这不仅会阻止[SQL 注入](https://www.owasp.org/index.php/SQL_Injection)，还会自动确保 OrderId 得到正确处理。

您没有指定数据库中 OrderId 的数据类型。我猜它可能是非数字的。（guid 或 varchar - 我见过使用非数字 ID 的数据库，所以这不是不可想象的。）如果它是非数字的，你可能会错过值周围的引号。

例子：

```
Where Id = 1 
```

不一样

```
Where Id= '1' 
```

使用参数化查询将自动为您解决此问题。

# javascript - 如何将点击事件附加到分配给某个类名的所有 div？

> ID：12867235
> 
> 赞同：0
> 
> 时间：2012-10-12T21:18:02.993
> 
> 标签：javascript, jquery, html

我对jquery一无所知，所以是的。我只是希望当您单击“image-url” div 时，他们将“src: 组件设置为 img 标签并在单击时显示图像。非常感谢您的帮助。

的HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>CIS 230 Fall 2012</title>
<link rel="stylesheet" type="text/css" href="midterm.css" />
<script type="text/javascript" src="labs/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('div.image-url').click(function() {
        $("#image").attr("src", $(this).attr("val"));
        $("#image").attr("hidden", "false");
    });
})();

function imageload(ls) {
    document.getElementById("image").src = "../images/" + ls;
}
</script>
</head>
<body>
<div id="header"><div style="float:left; width:40%;"></div><div style="float:right;"></div><h1 class="title">CIS 230</h1>
</div>
<div id="content">
  <div id="links">
    <div id="link-holder">
        <h3>Labs:</h3>
        <a href="labs/xhtml1.html"><div class="url">xhtml 1</div></a>
        <a href="labs/csslab1.html"><div class="url" onmouseover="hover(this)" onmouseout="leave(this)">css lab 1</div></a>
        <a href="labs/csslab2.html"><div class="url" onmouseover="hover(this)" onmouseout="leave(this)">css lab 2</div></a>
        <a href="labs/csslab3.html"><div class="url">css lab 3</div></a>
        <a href="labs/csslab4.html"><div class="url">css lab 4</div></a>
        <a href="author.html"><div class="url">author page</div></a>
        <a href="labs/dogfish.html"><div class="url">dog fish</div></a>
        <a href="labs/corners.html"><div class="url">rounded corners</div></a>
        <a href="labs/columns.html"><div class="url">div columns</div></a>
        <h3>Images:</h3>
        <div id="image-link-holder">
            <div class="image-url" val="me.jpg">Beautiful Me</div> //so they click this
            <div class="image-url" val="monster.jpg">Godzilla</div>
            <div class="image-url" val="bandw.jpg">Black and White</div>
            <div class="image-url" val="duocolor.jpg">DuoColor</div>
            <div class="image-url" val="washed.jpg">"Washed" Look</div>
            <div class="image-url" val="fade.jpg">Faded</div>
        </div>
    </div>
    <div id="image-holder" style="min-width:400px; background-color:#000000;" hidden="true">
        <img id="image" src="" alt="No Image Specified" /> //and my mug shot will appear hopefully
    </div>
    <div id="links-spacer1" style="min-width:400px; min-height:300px"></div>
  </div>
  <div id="about">
    <h1>Web Design and Development:</h1>
    <h2>We cover a lot of things:</h2>
    <p>We first review basic HTML and cover CSS styles</p>
    <p>Labs made:
    <ul>
        <li>css lab 1</li>
        <li>css lab 2</li>
        <li>css lab 3</li>
        <li>css lab 4</li>
    </ul>
    </p>
    <p>Once we have the basics down we can cover some more advanced styling. Especially using the &amp<div></div>&amp; tags
    </p>
    <p>Labs made:
    <ul>
        <li>sunny.html</li>
        <li>dogfish</li>
        <li>columns</li>
    </ul>
    </p>
    <p>Then We move onto the graphical component of web design, where we mess around with photoshop</p>
    <p>Labs made:
    <ul>
        <li>monster.jpg</li>
        <li>duocolor.jpg</li>
        <li>other stuff...</li>
    </ul>
    </p>
  </div>
</div>
<div id="footer">
<p id="disclaimer">This webpage is the work of a student. It is not associated with the <a href="www.sunyocc.edu">SUNY Onondaga Community College.</a> The author of this web page is Jason Dancks, and generated with Dreamweaver. If you think this asshole might have stolen your intellectual property, <a href="mailto:jddancks@yahoo.com">email him</a> or contact his <a href="mailto:stedmant@sunyocc.edu">professor</a> or call him at: (315) 498- 2326</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:19:07.727

```
$('.image-url').on('click', function() {...}); 
```

您应该阅读[jQuery 选择器。](http://api.jquery.com/category/selectors/)

**编辑**
您的示例中已经有一个有效的选择器。它不工作吗？也许它找不到您的 jQuery 库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:42:21.367

您想为单击的图像获取属性“val”的值，并将 img 标记的“src”属性替换为类“image”的值：这是您的操作方法。

```
$('.image-url').on('click', function(){
   var img_url = $(this).attr('val');
   $('#image').attr('src', '/images/' + img_url).parent().attribute('hidden', false);
}); 
```

快乐编码！:)

# android - 在 Android 上获取自动旋转信息

> ID：12867236
> 
> 赞同：6
> 
> 时间：2012-10-12T21:18:08.733
> 
> 标签：android, rotation, screen

我正在开发一个适用于 Android 的应用程序，我想知道是否启用了自动旋转。有人知道我怎么能得到这个吗？所以为了清楚起见：我只需要知道用户是否在他们的设置中启用了自动旋转。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T21:54:33.470

您可以使用以下方式获取自动旋转信息开/关`Settings.System.ACCELEROMETER_ROTATION`：

```
if (android.provider.Settings.System.getInt(getContentResolver(),Settings.System.ACCELEROMETER_ROTATION, 0) == 1){
 Toast.makeText(Rotation.this, "Rotation ON", Toast.LENGTH_SHORT).show();

}
else{
 Toast.makeText(Rotation.this, "Rotation OFF", Toast.LENGTH_SHORT).show();
} 
```

# mono - 使用 MonoDevelop 进行自动化/连续测试

> ID：12867237
> 
> 赞同：5
> 
> 时间：2012-10-12T21:18:39.233
> 
> 标签：mono, monodevelop, continuous-testing

按照关于使用[Mighty moose](http://continuoustests.com)为独立客户端（MonoDevelop IDE）自动化单元测试的说明，我明白这是可能的。有一节是关于 *如何让 Mighty Moose 在我的 Mac 上本地工作？*在他们的支持页面上。

有人成功了吗？我要么看到 Mighty moose 永远检测文件更改，要么抛出未处理的异常。

问候

肖恩

# database - 如果我们每毫秒做一个数字，我们一天会有多少数据？

> ID：12867238
> 
> 赞同：1
> 
> 时间：2012-10-12T21:18:39.123
> 
> 标签：database, math, database-design

我在这里有点困惑......我被提议进入一个项目，其中将是一组某些传感器，每毫秒都会发出读数（是的，每秒读取 1000 个读数）。读数将是 3 或 4 位数字，例如 818 或 1529。此读数需要存储在服务器上的数据库中并远程访问。

我从未处理过如此大量的数据，您认为，一天从一个传感器读取的 MB 数是多少？... 4（数字）x1000x60x60x24 ... = 345600000 位...对吗？每天大约 42 MB... 看起来还不错，对吧？

因此，例如 1 GB 的数据库，可以保存来自 1 个传感器的 23 天信息，对吗？

我知道 MySQL 和 PHP 可能无法处理它......你有什么建议，也许是一些应用程序？天蓝色？甲骨文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:25:03.427

3 位或 4 位数字 =

```
4 bytes if you store it as a string.
2 bytes storing it as a 16bit (0-65535) integer

1000/sec -> 60,000/minute -> 3,600,000/hour, 86,400,000/day

as string: 86,400,000 * 4 bytes = 329megabytes/day
as integer:86,400,000 * 2bytes = 165megabytes/day 
```

在这种插入负载下，您的数据库**可能**表现不佳，尤其是在您对相同数据运行频繁选择的情况下。优化数据库以进行大规模检索会减慢快速/频繁插入的速度。另一方面，插入一个简单的整数并不完全是一个“有压力的”操作。

您最好插入一个临时数据库，然后每小时批量复制到主“存档”数据库中。您在该主存档表上进行分析/挖掘，并了解其数据将长达 1 小时陈旧。

但最后，您必须对所有这些变化进行基准测试，看看哪种方法最适合您的特定用例。在数据库领域没有“你必须做 X 才能实现 Y”类型的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:33:41.930

您很可能不需要长时间保持如此高离散化的数据。您可以使用几个选项来最小化卷。首先，一段时间后，您可能会将每小时数据折叠成最小/最大/平均值；您可以仅针对检测到的某些不稳定情况或需要根据定义保留详细数据的情况保留详细信息。此外，许多事情可能会变成事件记录。几十年前，这些方法已在我当时工作的公司提供的一些工业自动化系统中实施并成功使用。可用的存储设备大小比您今天可以找到的要小几倍。

因此，首先，您需要分析要存储的数据，然后决定如何优化其存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:38:52.803

在@MarcB 的数字之后，1kHz 的 2 个字节仅为 2KB/s 或 16Kbit/s。这并不是什么太大的问题。

我认为一种明智而灵活的方法应该是构建一个传感器读数队列，数据库可以简单地弹出这些读数，直到清楚为止。在这些数据速率下，问题不在于吞吐量（可以由拨号调制解调器处理），而是时间之间的差距。任何系统缓存值都需要能够足够快地避开以便存储下一个值；1ms 的返回时间并不长，特别是如果您有 GC 干扰。

队列的优点是在一端向队列中添加一些东西很便宜，并且可以在另一端批量处理这些值。因此，传感器端获得了所需的响应能力，并且数据库可以批量处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T21:54:41.340

如果您不需要关系数据库，您可以使用像 mongodb 这样的 NoSQL 数据库，或者甚至像[JDBM2](http://code.google.com/p/jdbm2/)这样更简单的解决方案，如果您使用的是 java。

# ios - 异步 JSON 请求

> ID：12867246
> 
> 赞同：0
> 
> 时间：2012-10-12T21:19:20.470
> 
> 标签：ios, xcode, json, multithreading, asynchronous

在向代码添加 URL 请求之前，我有一个表格视图可以流畅地工作。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

...
   //Get Total Comments
    NSString *strURL = [NSString stringWithFormat:@"http://XX.XX.XX.XX/php/commentsTotal.php?CID=%@", [dict objectForKey:@"id"]];
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

// to receive the returend value
NSString *strResultCI = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];
cell.commentCount.text = strResultCI;

return cell; 
```

}

问题是当您滚动表格单元格时，手机必须与我的服务器通信，等待响应，然后将其显示到单元格。
不用说它削弱了我的餐桌表现。我的问题是：有没有人有关于如何简单地将 JSON 数据请求添加到后台线程的好的示例或教程？我正在使用 SDWebImage 异步处理图像，但不知道从哪里开始数据部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T00:32:01.407

当您需要从网络服务器检索 JSON 数据并需要在后台线程中执行时，请尝试执行以下操作：

```
dispatch_queue_t webCall = dispatch_queue_create("web call", NULL);
dispatch_async(webCall, ^{
NSString *strURL = [NSString    stringWithFormat:@"http://XX.XX.XX.XX/php/commentsTotal.php?CID=%@", [dict objectForKey:@"id"]];
NSData *dataURL = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]]];
});
dispatch_async(dispatch_get_main_queue(), ^{
NSString *strResultCI = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding]; cell.commentCount.text = strResultCI;
}); 
```

使用`NSJSONSereliazation`基础中的类来解析 json 数据。它根据数据返回字典或数组。`dispatch_async(webCall, ^...);`为您创建一个后台线程并`dispatch_async(dispatch_get_main_queue(), ^...`取回主线程，当您需要执行与 UI 相关的任何操作（例如更改单元格文本）时，这是必需的。

另请注意，请尝试提前准备好表格视图单元格数据，而不是在`-tableView: cellForIndexPath`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:50:24.580

我认为你需要做的是：

1.  制作一个像字典数组一样的简单缓存，其中`key`is`url`和`value`is `data`。

2.  当您显示一个新单元格时`check the cache at first`，如果那里没有任何东西 -`send asynchronous request`到服务器（也很高兴知道我们是否正在等待响应）

3.  当您收到来自服务器的响应时，请填充缓存，并且`check the tableView visible cells`，如果您收到可见单元格的数据，请使用 tableView 更新（不要重新加载数据，因为它会很慢）

至于我，我正在使用`AFNetworking`API 调用库（ASIHTTPRequest 也很好）

顺便说一句，我认为您应该在用户快速滚动时取消请求，这可以通过`NSOperationQueue`. 您可能不希望所有这些请求同时运行，最好只让那些活动，您最需要哪些数据并取消其他请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T23:36:59.437

如果这是您进行服务器/客户端通信的唯一点，您只需要执行一个异步 NSURLConnection。

否则，如果您正在进行大量客户端/服务器通信，最好的方法是 AFNetworking 或任何其他 http 客户端库。

# maven - 旧的 Maven 依赖破坏了我的构建

> ID：12867249
> 
> 赞同：0
> 
> 时间：2012-10-12T21:19:36.040
> 
> 标签：maven, grails, groovy

我下载了以下[库](https://github.com/berngp/httpbuilder/tree/branch/add/MultiPart-Form)，导航到其目录，然后输入`mvn install`.

从那时起，我在 STS 中的 Grails 项目将无法构建：

> 转换过程中的一般错误：抓葡萄时出错——[下载失败：org.codehaus.groovy#groovy;1.7.11!groovy.jar]

我想我不小心添加了对旧 groovy 1.7.11 的依赖。如何删除库并修复我的 Grails 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:53:07.377

This project uses the old (v 1.x) version of groovy-eclipse. Here's how to fix:

1.  delete .project and .classpath (outside of eclipse)
2.  install m2e v1.2 into your eclipse
3.  install the groovy-eclipse m2e configurator
4.  import project using the "Import existing maven project wizard"
5.  Rejoice

# c# - 为什么我不能反序列化这个 xml？

> ID：12867258
> 
> 赞同：0
> 
> 时间：2012-10-12T21:19:54.793
> 
> 标签：c#, xml, xml-serialization

我目前正在尝试以以下格式反序列化一些 XML：

```
<content:encoded>![CDATA[... 
```

我有一个具有如下属性的对象：

```
[XmlElementAttribute("content")]
public string Content { get; set; } 
```

然而，尽管 XML 始终具有值，但代码中的属性始终是`null`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:28:18.903

`content`是命名空间 -`encoded`是元素名称。所以你`XmlElementAttribute`应该是：

```
[XmlElement(Name="encoded", Namespace="<whatever namespace 'content' refers to in your XML>")]
public string Content { get; set; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T21:28:42.860

`content`在您的示例中是一个命名空间。您的元素名称实际上是`encoded`这样的，因此您需要使用标记您的属性的属性：

```
[XmlElement("encoded", Namespace => "custom-content-namespace")]
public string Content { get; set; } 
```

请注意，您需要在包含的 XML 中声明命名空间：

```
<content:encoded xmlns:content="custom-content-namespace">![CDATA[... 
```

这也意味着任何子节点都将以相同的命名空间作为前缀。对于内容来说并不是什么问题`CDATA`，但以防万一您有其他要反序列化的元素。

For a related questions to this, see [Deserializing child nodes outside of parent's namespace using XmlSerializer.Deserialize() in C#](https://stackoverflow.com/questions/12765837/deserializing-child-nodes-outside-of-parents-namespace-using-xmlserializer-dese)

# iphone - 获取当前 iPhone 设备方向

> ID：12867260
> 
> 赞同：0
> 
> 时间：2012-10-12T21:20:00.473
> 
> 标签：iphone, orientation, device-orientation, uidevice

我想获取当前的设备方向（而不是应用程序方向）。我已经尝试了所有方法，但无法正常工作。

这是我正在使用的代码：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 

NSLog(@"[UIDevice currentDevice].orientation =%d",[UIDevice currentDevice].orientation );
NSLog(@"[[UIApplication sharedApplication] statusBarOrientation]; =%d",[[UIApplication sharedApplication] statusBarOrientation] );

[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications]; 
```

无论设备（真实设备）的方向如何，在这两个日志上我都没有改变。我知道应用程序方向不会改变，因为应用程序只是纵向的，但为什么设备一个不会改变？

有什么我做错了吗？

# python - 两段几乎相同的代码，但其中一段在 python 中产生了 localunbounderror

> ID：12867261
> 
> 赞同：2
> 
> 时间：2012-10-12T21:20:30.330
> 
> 标签：python, local

所以，我正在创建两个随机词生成器，一个基于二元组，另一个基于三元组。在每种情况下，我都设置了一个字典（称为二元组，它有两个嵌套字典或三元组，它有三个嵌套字典）......还有很多其他代码，但这是导致问题的行三元组生成器：

```
 #generates random phonemes
 def generate_trigramphoneme(phoneme1, phoneme2):
    rand = random.uniform(0,1)

    **for phoneme3 in trigrams[phoneme1][phoneme2]:**
        rand -= trigrams[phoneme1][phoneme2][phoneme3]

        if rand < 0.0: return phoneme3
    return phoneme3 
```

其中变量“phoneme3”会产生本地未绑定错误。

但是，在这里，在我的二元组生成器（有效）中，变量“Following”很好，并且不会产生错误：

```
def generate_bigramphoneme(phoneme):
    rand = random.uniform(0,1)
    for following in bigrams[phoneme]:
        rand -= bigrams[phoneme][following]
        if rand < 0.0: return following
    return following 
```

我在eli bendersky的网站上查找了python中未绑定的本地错误，这有助于我理解错误，但我仍然不知道如何摆脱它，或者为什么bigram代码不会产生错误......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:32:33.827

假设您确实在`trigrams`某处定义了一个，那么您的参数可能`trigrams[phoneme1][phoneme2]`是一个空的可迭代对象，因此循环永远不会执行并且`phoneme3`不会被绑定。

# python - 为什么 PyPy 没有包含在标准 Python 中？

> ID：12867263
> 
> 赞同：168
> 
> 时间：2012-10-12T21:20:35.540
> 
> 标签：python, pypy

我在看[PyPy](http://pypy.org/)，我只是想知道为什么它没有被主流 Python 发行版采用。像 JIT 编译和更低的内存占用这样的事情不会大大提高所有 Python 代码的速度吗？

简而言之，导致 PyPy 仍然是一个单独的项目的主要缺点是什么？

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-10-12T21:35:10.543

PyPy 不是 CPython 的一个分支，因此它永远不能直接合并到 CPython 中。

理论上 Python 社区可以普遍采用 PyPy，PyPy 可以作为参考实现，CPython 可以停止使用。然而，PyPy 也有自己的弱点：

*   CPython 很容易与用 C 编写的 Python 模块集成，这是 Python 应用程序处理 CPU 密集型任务的传统方式（例如，参见 SciPy 项目）。
*   PyPy JIT 编译步骤本身会消耗 CPU 时间——只有通过重复运行已编译的代码，它才能整体变得更快。这意味着启动时间可能会更长，因此 PyPy 对于运行胶水代码或琐碎的脚本不一定有效率。
*   PyPy 和 CPython 的行为在所有方面都不尽相同，尤其是在“实现细节”方面（语言未指定但在实际层面上仍然很重要的行为）。
*   CPython 可以在比 PyPy 更多的架构上运行，并且已经成功地适应了在嵌入式架构中运行，而这对 PyPy 来说可能是不切实际的。
*   CPython 的内存管理引用计数方案可以说比 PyPy 的各种 GC 系统具有更可预测的性能影响，尽管这不一定适用于所有“纯 GC”策略。
*   PyPy 尚未完全支持 Python 3.x，尽管这是一个活跃的工作项。

PyPy 是一个很棒的项目，但 CPU 密集型任务的运行时速度并不是一切，在许多应用程序中它是最不关心的问题。例如，Django 可以在 PyPy 上运行，这使得模板更快，但 CPython 的数据库驱动程序比 PyPy 的快；最后，哪种实现更有效取决于给定应用程序的瓶颈在哪里。

另一个例子：你会认为 PyPy 非常适合游戏，但大多数像 PyPy 中使用的 GC 策略会导致明显的抖动。对于 CPython，大部分 CPU 密集型游戏内容被卸载到 PyGame 库，PyPy 无法利用它，因为 PyGame 主要是作为 C 扩展实现的（尽管参见：pygame-cffi）。我仍然认为 PyPy 可以成为一个很棒的游戏平台，但我从未见过它实际使用过。

PyPy 和 CPython 对基本设计问题有完全不同的方法并做出不同的权衡，因此在每种情况下，没有一个比另一个“更好”。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-12T21:22:43.330

一方面，它与 Python 2.x[不是 100% 兼容](http://pypy.org/compat.html)，并且仅对3.x提供[初步支持。](http://pypy.org/py3donate.html)

它也不是可以合并的东西——PyPy 提供的 Python 实现是使用他们创建的框架生成的，这非常酷，但也与现有的 CPython 实现完全不同。它必须是一个完整的替代品。

PyPy 和 CPython 之间有一些[非常具体的区别](http://doc.pypy.org/en/latest/cpython_differences.html)，一个很大的区别是[扩展模块](http://doc.pypy.org/en/latest/faq.html#do-cpython-extension-modules-work-with-pypy)的支持方式——如果你想超越标准库，这很重要。

还值得注意的是，PyPy 并不是普遍更快。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-10-12T21:28:04.690

请参阅[Guido van Rossum 的此视频](https://www.youtube.com/watch?v=EBRMq2Ioxsc#t=12m30s)。他谈到了您在 12 分 33 秒时提出的相同问题。

强调：

*   缺乏 Python 3 兼容性
*   缺乏扩展支持
*   不适合作为胶水代码
*   速度不是一切

毕竟，他是决定...

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-10-12T21:27:27.057

一个原因可能是，根据[PyPy](http://pypy.org/features.html)网站，它目前仅在 32 位和 64 位 Intel x86 架构上运行，而 CPython 也可以在其他平台上运行。这可能是由于 PyPy 中特定于平台的速度增强。虽然速度是一件好事，但人们通常希望语言实现尽可能“独立于平台”。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-13T17:52:09.457

我建议观看[David Beazley](http://pyvideo.org/video/659/keynote-david-beazley)的这个主题演讲以获得更多见解。它通过阐明 PyPy 的性质和复杂性来回答您的问题。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-05-14T06:41:25.623

除了这里所说的一切，PyPy 在 bug 方面并不像 CPython 那样坚如磐石。使用 SymPy，在过去几年中，我们在 PyPy 中发现了大约十几个错误，无论是在发布版本中还是在 nightlies 中。

另一方面，我们只在 CPython 中发现了一个错误，那就是在预发布版本中。

另外，不要忽视缺乏 Python 3 支持。核心 Python 社区中的任何人都不再关心 Python 2。他们正在研究 Python 3.4 中的下一件大事，这将是 Python 3 的第五个主要版本。PyPy 家伙还没有得到其中之一。因此，在他们开始成为竞争者之前，他们还有一些工作要做。

不要误会我的意思。PyPy 很棒。但在很多非常重要的方面，它仍然远未优于 CPython。

顺便说一句，如果你在 PyPy 中使用 SymPy，你不会看到更小的内存占用（或加速）。请参阅[https://bitbucket.org/pypy/pypy/issues/1447/](https://bitbucket.org/pypy/pypy/issues/1447/)。

# eclipse - 在 Eclipse-CDT Juno 中禁用 EGit

> ID：12867268
> 
> 赞同：23
> 
> 时间：2012-10-12T21:20:56.870
> 
> 标签：eclipse, eclipse-cdt, egit

此线程：[如何暂时禁用 EGit？](https://stackoverflow.com/questions/5103048/how-to-disable-egit-temporarily)讨论如何在 Eclipse 中禁用 EGit，但是当我转到 时 `"Startup and Shutdown"`，没有禁用 EGit 的选项。

如何控制在[Eclipse-CDT](http://www.eclipse.org/cdt/)中加载哪些插件？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-15T20:54:08.253

好的，这里有一个建议。您可以通过执行以下操作断开特定项目与 Egit 的连接：右键单击项目->团队->断开连接。

当您确实希望再次连接到存储库时，请右键单击项目->团队->共享项目...

如果您想禁用插件本身，则必须将其卸载。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-18T00:58:16.967

插件不容易在 Eclipse 中删除/禁用。但是您可以删除该插件的 jar 文件以删除插件。

在 Linux 或 Mac 中，打开终端，然后`cd`到 eclipse 文件夹。

```
mkdir disabled disabled/features disabled/plugins

mv features/*egit* disabled/features/
mv plugins/*jgit* disabled/plugins/
mv plugins/*egit* disabled/plugins 
```

[在http://blog.sarathonline.com/2012/05/eclipse-indigo-without-mylyn.html](http://blog.sarathonline.com/2012/05/eclipse-indigo-without-mylyn.html)阅读更多内容

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-09T16:08:58.737

从 Eclipse 卸载插件或软件：

1.  帮助菜单
2.  安装新软件
3.  在对话框中，选择显示“已安装什么”的小链接
4.  可以删除“已安装软件”选项卡下的任何内容

我认为在最新版本的 Eclipse 中，您不会在此列表中找到 eGit。相反，您会在功能/插件列表下找到它。所以，它不容易删除。我怀疑您仍然可以转到 Eclipse 安装目录并选择它，但有什么意义呢？只需遵循 bobestm 的建议并断开项目与 git 的连接，CDT 不应该打扰你（我的不会......）

您将不再在启动/关闭首选项中找到 eGit。我认为发生的事情是将 git 更紧密地集成到 IDE（而不是 CDT）中。这是一件好事，但我不确定你为什么需要禁用它。

# objective-c - iOS 6.0 UINavigationController 中的设备方向

> ID：12867269
> 
> 赞同：0
> 
> 时间：2012-10-12T21:20:57.007
> 
> 标签：objective-c, ios6, autorotate

我在 UITabbarcontroller 中有一个 UINavigationController。我只想在 UINavigationController 中旋转一个视图控制器。

这是我正在使用的代码片段。

```
-(NSUInteger)supportedInterfaceOrientations
{
if (CURRENTDEVICE == IPHONE)
    return [self.navigationController supportedInterfaceOrientations] | UIInterfaceOrientationMaskAllButUpsideDown;
else
    return UIInterfaceOrientationMaskAll;
}

-(BOOL)shouldAutorotate {
return YES;
} 
```

我在 UINavigationController 上也有一个类别：

```
#import "UINavigationController+autorotate.h"

@implementation UINavigationController (autorotate)

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

@end 
```

我不确定如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:57:50.533

你可以用 cgrect 对其进行硬编码。这是指向另一个可能对您有所帮助的问题的链接。有一个很好的例子，可以在其中硬编码两个不同的视图以进行旋转，但我个人不推荐它。无论如何，我认为这可能会为您指明正确的方向。

[https://stackoverflow.com/questions/12867792/ios-rotation-causing-views-to-displace-shift-forcing-me-to-use-non-sensical-har](https://stackoverflow.com/questions/12867792/ios-rotation-causing-views-to-displace-shift-forcing-me-to-use-non-sensical-har)

该问题中有一组代码可以帮助您入门。您还可以在右舷（如果您使用情节提要）中选择在 IB 中设置旋转，这更容易。

希望这可以帮助

阿德里安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:12:47.500

在您的`supportedInterfaceOrientations`实施类别中，您可以检查`topViewController`. 您可以使用`kindOfClass:`方法来确定它是哪个类...然后返回与默认导航不同的方向。

您也可以子类`UINavigationController`化，并以相同的方式进行检查。在 iOS 6 之前，不建议对导航控制器进行子类化，文档仍然声明了这一点，但 Apple 工程师告诉我，使用新的旋转逻辑，您可以将`UINavigationController`.

# mysql - 从一个表中获取第一行和最后一行

> ID：12867271
> 
> 赞同：0
> 
> 时间：2012-10-12T21:21:06.280
> 
> 标签：mysql, select

我想从表中获取第一行和最后一行。一旦我明白了，我想从另一个表中获取另一个第一行和最后一行。

我觉得有些奇怪，但就是这样。

拜托，也许有人可以给我一个我想要的建议。

这就是我卡住的地方：

[http://s14.postimage.org/sj9xgeofz/print.png](http://s14.postimage.org/sj9xgeofz/print.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:26:13.030

尝试使用这个： -

```
SELECT column name
 FROM table1
 WHERE <conditions>
 ORDER BY date DESC
 LIMIT 1
 UNION
 SELECT column name
 FROM table1
 WHERE <conditions>
 ORDER BY date ASC
 LIMIT 1 
```

# ruby-on-rails-3 - Rails 310 重定向循环

> ID：12867272
> 
> 赞同：0
> 
> 时间：2012-10-12T21:21:10.907
> 
> 标签：ruby-on-rails-3, model-view-controller, redirect, controller

我要回去写一个带有任务的项目的基本应用程序。在我的项目展示视图中，我想列出任务并包含一个表单。当我把这一切连接起来时，我得到 310 重定向循环。自从我从头开始编写任何东西以来已经有一段时间了，所以希望能在查看我的代码时得到一些帮助。

控制器代码：

```
def show
     @project = Project.find(params[:id])
     @task = @project.tasks.new(params[:task])

     if @task.save
         redirect_to @project, :notice => "Task added"
       else
         render action: :show
       end
   end 
```

查看代码：

```
<%= @project.project_name %>
<%= form_for(@task) do |m| %>
<%= m.label :Task %>
<%= m.text_field :task_name %>
<%= m.button :submit %>
<% end %>
<% @project.tasks.each do |t| %>
  <%= t.task_name %>
<% end %> 
```

项目.rb

```
has_many :tasks 
```

任务.rb

```
belongs_to :project 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:30:16.347

您正在重定向到`@project`，这被解释为重定向到 的显示页面`@product`。但是您*从*显示页面调用重定向，因此重定向循环：

1.  请求路由到显示页面
2.  找项目
3.  任务实例化
4.  任务已保存
5.  重定向到显示（循环回到 2）

通常您不会在 中创建记录`show`，而是在 中创建记录`create`。你这样做有什么理由吗？

# php - 尝试上传多张图片，但只上传一张

> ID：12867285
> 
> 赞同：0
> 
> 时间：2012-10-12T21:22:04.847
> 
> 标签：php, codeigniter

我正在尝试上传多张图片。我正在使用 Codeigniter，我知道有一个内置的文件上传类，但我只是在试验我的自定义图像上传库。我提供了下面的代码。

我在使用以下代码时面临的问题是它只是上传了一张（最后在表单中选择的一张）图像。

你能告诉我我在哪里做错了吗？

我的控制器：

```
function img_upload(){

   $this->load->library('image_upload');         

    $image1= $this->image_upload->upload_image('imagefile1');
    $image2= $this->image_upload->upload_image('imagefile2');
    $image3= $this->image_upload->upload_image('imagefile3');

   echo $image1 ."<br>"; echo $image2;  
} 
```

application/libraries/image_upload.php（定制库）

```
 function upload_image($image_info){

    $image=$_FILES[$image_info]['name'];
    $filename = stripslashes($image);
    $extension = $this->getExtension($filename);
    $extension = strtolower($extension);

    $image_name=time().'.'.$extension;

   $newname="support/images/products/".$image_name;
   $uploaded = move_uploaded_file($_FILES[$image_info]['tmp_name'], $newname);

   if($uploaded) {return $image_name; } else {return FALSE;}
} 
```

我的表格

```
 <form id="myForm" enctype="multipart/form-data" 
 action="<?php echo base_url();?>add/img_upload" method="post" name="myForm">

  <input type="file" name="imagefile1" size="20" /><br>
  <input type="file" name="imagefile2" size="20" /><br>
  <input type="file" name="imagefile3" size="20" /><br>
   <br /><br />
  <input type="submit" value="upload" />    
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:04:57.137

您可以创建某种回滚功能并使用 CI 本机 lib 。这对服务器来说几乎没有额外的工作，但它的代码更少/干净/easyTOdebug 并且它可以工作。

```
function do_upload()
{ 
```

1 - 配置

```
 $config['upload_path'] = './uploads/';
    // other configurations 

    $this->load->library('upload', $config);
    $error = array('stat'=>0 , 'reason'=>'' ; 
```

2-上传

```
 if ( ! $this->upload->do_upload('file_1'))
        {
            $error['stat'] = 1 ;
            $error['reason'] = $this->upload->display_errors() ;

        }
        else
        { $uploaded_array[] = $uploaded_file_name ; } 

            // you may need to clean and re initialize library before new upload 
        if ( ! $this->upload->do_upload('file_2'))
        {
            $error['stat'] = 1 ;
            $error['reason'] = $this->upload->display_errors() ;

        }
        else
        { $uploaded_array[] = $uploaded_file_name ; } 
```

3 - 检查错误并在最后回滚

```
if($error['stat'] == 1 )
{   
    $upload_path = './upload/';
    if(!empty($uploaded_array))
    {
        foreach( $uploaded_array as $uploaded )
        { 
           $file = $upload_path.$uploaded;
           if(is_file($file))
           unlink($file);
        }
    }
    echo 'there was a problem : '.$error['reason'];
}
else
{
   echo 'success';
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:15:13.610

我找到了解决我的问题的方法，并认为如果我分享它可以帮助某人。

问题出在 image_upload.php 文件（定制库）中，特别是在这一行：

```
 $image_name=time().'.'.$extension; // 
```

time() 可能正在覆盖文件。所以我用以下代码替换了我以前的代码：

```
function upload_image($image_info){

     $image=$_FILES[$image_info]['name'];
     $filename = stripslashes($image);
     $extension = $this->getExtension($filename);
     $extension = strtolower($extension);

     $image_name=$this->get_random_number().'.'.$extension;

     $newname="support/images/products/".$image_name;
     $uploaded = move_uploaded_file($_FILES[$image_info]['tmp_name'], $newname);

  if($uploaded) {return $image_name; } else {return FALSE;}
 }

  function get_random_number(){

    $today = date('YmdHi');
    $startDate = date('YmdHi', strtotime('-10 days'));
    $range = $today - $startDate;
    $rand1 = rand(0, $range);
    $rand2 = rand(0, 600000);
    return  $value=($rand1+$rand2);
} 
```

# ruby-on-rails - ruby-1.9.3-p125 ssl 错误

> ID：12867286
> 
> 赞同：1
> 
> 时间：2012-10-12T21:22:10.243
> 
> 标签：ruby-on-rails, ruby, ssl, rvm

我刚刚使用 RVM 安装了 ruby​​-1.9.3-p125。

我可以创建一个基本的应用程序

```
rails new my app. 
```

但是当我在这里尝试使用 rails starter 应用程序构建一个新应用程序时： [https ://github.com/RailsApps/rails3-bootstrap-devise-cancan](https://github.com/RailsApps/rails3-bootstrap-devise-cancan)

通过运行

```
rails new rails3-bootstrap-devise-cancan -m https://raw.github.com/RailsApps/rails-composer/master/composer.rb -T 
```

它发生故障并给我以下错误：

```
/Users/macuser/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:799:in `connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError) 
```

值得注意的是，这在使用 ruby​​-1.9.2-p290 时有效

有谁知道我该如何解决这个问题？

我正在运行 osx lion 10.7.4

* * *

openssl 版本 OpenSSL 1.0.0f 2012 年 1 月 4 日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:14:19.873

我怀疑这是因为您的 ruby​​gems 版本中存在错误。

您可以运行

```
gem update --system 
```

或者，从 gemfile 中的源中删除 s，如下所示：

```
source 'http://rubygems.org' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:50:23.630

对于带有 Homebrew 的 OSX：

```
brew install curl-ca-bundle
export SSL_CERT_FILE=/usr/local/opt/curl-ca-bundle/share/ca-bundle.crt 
```

将最后一行添加到您的`.bashrc`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:01:48.943

我正在运行 osx lion 10.7.4

我的 openssl 版本是 OpenSSL 1.0.0f，我需要更新到 1.0.1

我按照本指南做到了这一点：

[http://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

这是对我有用的解决方案：

```
curl -L -O http://www.openssl.org/source/openssl-1.0.1b.tar.gz.asc
curl -L -O http://www.openssl.org/source/openssl-1.0.1b.tar.gz
gpg --verify openssl-1.0.1b.tar.gz.asc
tar xvzf openssl-1.0.1b.tar.gz
cd openssl-1.0.1b
perl ./Configure shared zlib --prefix=/opt/local darwin64-x86_64-cc
make
make test
sudo make install 
```

# javascript - Javascript 回调多次触发，即使被取消

> ID：12867288
> 
> 赞同：0
> 
> 时间：2012-10-12T21:22:13.603
> 
> 标签：javascript, jquery-mobile

我有一个 jquery 移动对话框，用于确认用户是否要覆盖他们上传的文件。如果用户单击是，则调用上传的回调函数，如果他们单击否，则对话框关闭并且没有任何反应。

问题是如果他们用户点击否，然后再次点击上传并接受覆盖，它会调用两次回调函数。它根据他们进入对话状态的次数来建立回调，我不知道如何处理这个问题。

这是每次用户点击“上传”时的入口点

```
CheckOverwriteUpload: function (boxFolderId, fileName) {
            var matchFound = false;
            $.each(BoxManager.Entries, function (index, value) {
                var entry = value;
                if (entry.name == fileName) {
                    matchFound = true;//Found the matching file
                }
            })

            if (matchFound) {
                //Pop the dialog to ask if they want to overwrite the file
                areYouSure("Overwrite File?", "The file " + fileName + " Already exists, would you like to overwrite it?", "Yes", function (result) {
                    if (result == true) {
                        //The client wants to overwrite the file, so we upload it
                        BoxManager.UploadFile(boxFolderId, fileName, true);

                    } else {
                        //The client does not want to overwrite. Close the dialog
                        $("#sure").dialog('close');
                    }
                    //Placed here to close the dialog after the possible upload
                    $("#sure").dialog('close');

                });
            } else {
                //No matches, go ahead and upload
                BoxManager.UploadFile(boxFolderId, fileName, matchFound);
            }

        }, 
```

这是对话框功能

```
function areYouSure(text1, text2, button, callback) {

        $("#sure .sure-1").text(text1);
        $("#sure .sure-2").text(text2);
        $("#sure .sure-do").text(button).on("click", function () {
            callback(true);
        });
        $("#sure .close-do").text("No").on("click", function () {
            callback(false);
        });
        $.mobile.changePage("#sure", 'none', false, true);
    } 
```

以防万一，这里是上传代码。它只是调用服务器上的一个方法

```
UploadFile: function (boxFolderId, fileName, overWrite) {
            $.mobile.showPageLoadingMsg();
            var etag = "";
            var id = "";
            $.each(BoxManager.Entries, function (index, value) {
                var entry = value;
                if (entry.name == fileName) {
                    etag = entry.etag;//hash of file used to overwrite files on box.com
                    id = entry.id;//unique box id for file. needed to overwrite file
                }
            });
            DocumentVaultService.UploadFileToBox(
                                        "<%=RootFolderGuid %>",
                                        "<%=FolderGuid %>",
                                        "<%=FileGuid %>",
                                        boxFolderId,
                                        fileName,
                                        "<%=IsClientFolder%>",
                                        "<%=AuthToken %>",
                                        overWrite,
                                        etag,
                                        id,
                                        function (result) {
                                            //Success on the upload, refresh the document list and close loading symbol
                                            BoxManager.GetBoxFolderContent(boxFolderId, BoxManager.BreadCrumbList[length - 1].folderName);
                                            $.mobile.hidePageLoadingMsg();
                                        },
                                        function (result) {

                                            $.mobile.hidePageLoadingMsg();
                                            alert("File failed to upload");
                                        });

        } 
```

CheckOverwriteUpload 和 UploadFile 都包含在 Boxmanager 中，就像这样

```
var BoxManager = {
    CheckOverwriteUpload:function(){},
    UploadFile:function(){}
} 
```

我怎样才能防止这个调用多次？有没有办法在我调用对话框之前清除 javascript 缓存？有没有更好的回调结构我没有看到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:36:06.720

每次调用`areYouSure()`它都会再次绑定回调。解决此问题的一种方法是取消绑定，然后绑定：

```
$("#sure .close-do").text("No").unbind("click").on("click", function () {
    callback(false);
}); 
```

注意`unbind("click")`. 这将删除任何以前的绑定，因此它们不会堆叠。
解决此问题的另一种方法是将“是/否”按钮绑定放在其他只被调用一次的地方（如`pageinit`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:43:22.453

确保不要将同一个事件多次绑定到同一个按钮。

此外，在绑定事件时添加命名空间，这样您就不会意外取消绑定其他单击事件。

```
$('button').off('click.box-manager').on('click.box-manager', function(e){
   ...do something
}); 
```

除非您确定没有人会在您的按钮上分配事件。

# html - 表单提交按钮作为字段

> ID：12867289
> 
> 赞同：1
> 
> 时间：2012-10-12T21:22:15.987
> 
> 标签：html, forms, button, submit

我正在尝试创建一个表单，但提交和重置按钮不显示为按钮；相反，它们显示为字段，字段中带有引号中的“提交”和“重置”字样。我四处寻找，找不到答案。我对表单和 PHP 很陌生，所以请为初学者发言。

另外，如果相关，请知道我正在设计它以在我的桌面上运行（尽管我已经安装了 PHP），并且目标是将表单发布到文件，而不是 MySQL 数据库。

这是我的代码：

```
<form method=”post” action=”">

<table width=”400? border=”0? align=”center” cellpadding=”2? cellspacing=”2?>
<tr>
<td>Username: </td>
<td><input type=”text” name=”username”&gt;</td>
</tr>
<tr>
<td>Passwd: </td>
<td><input type=”password” name=”passwd”&gt;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td><input type=”submit” value=”Submit”&gt;&nbsp;&nbsp; <input type=”reset” name=”reset” value=”Reset”&gt;
</td>
</tr>
</table>
</form> 
```

这是在行动：[http ://masterysoftware.net/The%20OPP/index.html](http://masterysoftware.net/The%20OPP/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:25:51.647

修正你的报价。你有问号，应该有引号和一些奇怪的引号。我猜问号的部分问题源于您的 PHP 代码，似乎没有。

尝试：

```
<form method="post" action="">
<table width="400" border="0" align="center" cellpadding="2" cellspacing="2">
<tr>
<td>Username: </td>
<td><input type="text" name="username"></td>
</tr>
<tr>
<td>Passwd: </td>
<td><input type="password" name="passwd"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td><input type="submit" value="Submit">&nbsp;&nbsp; <input type="reset" name="reset" value="Reset">
</td>
</tr>
</table>
</form> 
```

# sockets - winpcap 是如何工作的？

> ID：12867293
> 
> 赞同：0
> 
> 时间：2012-10-12T21:22:49.377
> 
> 标签：sockets, network-programming, winsock, winpcap, raw-sockets

如您所知，Windows 已停止支持 raw_sockets，因此没有真正的解决方案可以使用 raw_sockets 构建网络嗅探器。所以我的问题是 Winpcap 和类似的库是如何在 Windows 上提供网络嗅探的？它取决于Windows的版本吗？它是否使用其他一些技术来实现数据包嗅探？除了 raw_sockets 是否有其他解决方案来执行数据包嗅探？一些软件如wireshark 使用winpcap 来嗅探网络数据包。 [原始套接字窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:34:43.540

它使用 NPF，它被实现为协议驱动程序。有关更深入的说明，请参阅以下内容。

[http://www.winpcap.org/docs/docs_412/html/group__NPF.html](http://www.winpcap.org/docs/docs_412/html/group__NPF.html)

# objective-c - 将数据从一个视图控制器传递到另一个

> ID：12867295
> 
> 赞同：0
> 
> 时间：2012-10-12T21:22:50.820
> 
> 标签：objective-c, ios, uiviewcontroller, viewcontroller

我继承了两个视图控制器。

第一个应该传递数据，一个 NSUrl 对象给第二个。

第一个的.m：

```
NSURL *temp = [NSURL URLWithString:@"http://example.com"];

UIViewController *presentationsFullScreen_ViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"PresentationsFullScreen_ViewController"];

presentationsFullScreen_ViewController.urlToUse = temp; 
```

第二个的.h：

```
#import <UIKit/UIKit.h>

@interface PresentationsFullScreen_ViewController : UIViewController {

    NSURL *urlToUse;

}

@property (nonatomic,retain) NSURL *urlToUse; 
```

它显然不工作也不编译，基本上告诉我我没有子类化它，并且在 UIViewController 上找不到属性 urlToUse。

我如何正确子类化？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:27:15.773

这是正确的代码

```
 PresentationsFullScreen_ViewController *presentationsFullScreen_ViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"PresentationsFullScreen_ViewController"];
presentationsFullScreen_ViewController.urlToUse = temp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:32:44.800

**解决方案：**

不要忘记导入 .h：

```
#import "PresentationsFullScreen_ViewController" 
```

并且不要使用 UIViewController 实例化对象，而是使用子类的名称：

```
PresentationsFullScreen_ViewController *presentationsFullScreen_ViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"PresentationsFullScreen_ViewController"]; 
```

# jquery - jQuery填充数组合并父和子XML标签

> ID：12867298
> 
> 赞同：0
> 
> 时间：2012-10-12T21:23:02.437
> 
> 标签：jquery, xml, arrays, tags, parent

我正在 jQuery 中构建一个从 XML 填充数组的函数。XML 来自另一个应用程序，所以我无法更改它。

该函数旨在在创建数组后预加载图像。除了我无法区分不同父标签下具有相同名称的子标签外，一切都运行良好。

好吧，这里是 jQuery 代码：

```
 (function() {
{
setTimeout(function(){

var splashArray = new Array();
// Load the Splash XML file and assign each image within to an array
$.get('images.xml', function(xml) { 
```

问题在这里：

```
 $('album', xml).each(function (i) {
        var path = $(this).attr("lgpath");
        $('img', xml).each(function (i) {
         splashArray.push("/fotografie-matrimonio/" + path + $(this).attr("src")); 
```

看下面的问题！

```
 });
    });
    work_with_splash();
});
function work_with_splash () {
    Object.size = function(obj) {
    var size = 0, key;
    for (key in obj) {
    if (obj.hasOwnProperty(key)) size++;
      }
     return size;
    };
    // Get the size of an object
    var size = Object.size(splashArray);
    var i = 0;
    for(i=0; i<size; i++) new Image().src = splashArray[i];
                /*alert(result[X]);*/   
} //closes the spalsh Call

}, 1000);
}; 
```

这里是 XML 结构：

```
<album id="1" lgpath="thePath 1/" ...>
    <img src="name of photo 1" ....></img>
    <img src="name of photo 2"....></img>
    <img src="name of photo 3"....></img>
</album>
<album id="2" lgpath="thePath 2/" ...>
    <img src="name of photo 1" ....></img>
    <img src="name of photo 2"....></img>
    <img src="name of photo 3"....></img>
</album> 
```

该脚本有效，但它所做的是它为每个专辑路径加载所有 img src（也是其他专辑路径的那些。

我要做的是：按父标签分组处理 img 标签。不知道我说清楚没！

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:59:27.973

我已经解决了！

简单的...

只需将代码更改为：

```
 $('album', xml).each(function (i) {
    var path = $(this).attr("lgpath");
    $('img', xml).each(function (i) {
     splashArray.push("/fotografie-matrimonio/" + path + $(this).attr("src")); 
```

到：

```
 $('img', xml).each(function (i) {
        var path = $(this).parent().attr("lgpath");
        splashArray.push("/fotografie-matrimonio/" + path + $(this).attr("src"));
    }); 
```

使用 .parent() 方法。

希望它会帮助别人！

干杯:)

# jquery - 如何在来自另一个域的 Rails 上进行 jsonp 发布

> ID：12867299
> 
> 赞同：0
> 
> 时间：2012-10-12T21:23:05.193
> 
> 标签：jquery, ruby-on-rails, json, post

我想用 jsonp 对来自另一个域的 rails rest 服务进行 POST。我在 JQuery 中使用以下代码来执行此操作。我总是收到 400 个错误请求。

我只是将类型指定为“GET”，因为 jsonp 只能执行 GET。如果我将类型指定为 POST，则事件将覆盖为 GET。

*   我需要在 Rails 端做些什么来允许这个吗
*   我可以从另一个域向rails rest api进行POST的另一种方法是什么

    ```
     $.ajax({
                            type : "GET",
                            url : "http://domain.com/movies.json",
                            contentType : "application/json; charset=utf-8",
                            data : sData,                               
                            dataType : "jsonp",                             
                            processData : false,
                             beforeSend: function(xhr)   
                          {
                          xhr.setRequestHeader("X-Http-Method-Override", "POST");
                             },
                            success : function(oJSON) {
                                console.log("in success of jsonp block")

                            },
                            error : function(XMLHttpRequest, status, errorThrown) {
                                console.log("in failure jsonp block")

                            }
                        }); 
    ```

# javascript - 未捕获的 ReferenceError：（函数）未定义

> ID：12867300
> 
> 赞同：1
> 
> 时间：2012-10-12T21:23:06.183
> 
> 标签：javascript, google-chrome, userscripts

我一直在尝试为 Google Chrome 编写我的第一个用户脚本。它检查路由器页面并重新连接，直到获得有效的 IP 地址。

我将脚本保存为 IPchecker.user.js 并通过扩展页面将其安装在 google chrome 中。但是当我刷新页面时，javascript 控制台会抛出一个错误：

```
Uncaught ReferenceError: wan_connect is not defined 
```

在这种情况下， wan_connect 是在原始页面上定义的函数：

```
<html>
<head>
<script type="text/javascript">
    function serv(service, sleep)
    {
     form.submitHidden('service.cgi', { _service: service, _redirect: 'status-overview.asp', _sleep: sleep });
    }
    function wan_connect(wanid)
    {
     if (wanid == "1") {
     serv('wan1link-restart', 5);
     }
     if (wanid == "2") {
     serv('wan2link-restart', 5);
     }
    }

    //All other stuff deleted...

</script>
</head>
<body> Also deleted...</body>
</html> 
```

这是我的脚本。看起来它无法识别原始页面中的功能。有没有办法调用它？

```
// ==UserScript==  
// @name         WAN checker
// @version      0.0.1
// @description  Check tomato IP addresses and reconnect as needed
// @match        *://192.168.1.1/status-overview.asp
// ==/UserScript== 

(function reconnect() {
    wan1ip = document.getElementById('wanip').getElementsByClassName('content')[0].innerText.split('.').slice(0,2).join('.');

    if (wan1ip != "333.3333") {
    wan_connect("1");
    setTimeout("reconnect()",2000);
    }
    wan2ip = document.getElementById('wan2ip').getElementsByClassName('content')[0].innerText.split('.').slice(0,2).join('.');
if (wan2ip != "333.333") {
    wan_connect("2");
    setTimeout("reconnect()",2000);
    }
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:01:57.557

是的，您可以通过以下几种方式调用该代码：

1.  将适当的源代码粘贴到您的脚本中。

    或者

2.  在 iframe 中调用原始页面并从那里调用函数。同域 iframe 更容易，但这也可以跨域完成。

    或者

3.  用于`GM_xmlhttpRequest()`抓取原始页面的源代码。从源中提取适当的脚本节点并将该代码注入当前目标页面。

在以前的用户脚本和[greasemonkey问题中，在](/questions/tagged/userscripts "显示标记为“用户脚本”的问题")[某种程度上](/questions/tagged/greasemonkey "显示标记为“greasemonkey”的问题")已经涵盖了所有这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:25:40.927

不，您不能从另一页调用一个页面上的脚本。您必须在需要使用它的每个页面中包含代码。

有一些用于脚本加载的库（例如 RequireJS）可用于将 JavaScript 中的脚本加载到页面中，但您仍然必须有可用的脚本才能像这样加载。

# ruby - 使用 libxml 的 sax 解析器时出现未定义的方法错误

> ID：12867301
> 
> 赞同：1
> 
> 时间：2012-10-12T21:23:15.293
> 
> 标签：ruby, xml, sax, ruby-1.9, libxml2

我正在尝试使用 libxml 的 SAX 解析器（如此[处所示](http://www.ioncannon.net/programming/643/fast-xml-parsing-with-ruby/)），但我遇到了未定义的方法错误。

我的代码是

```
$domain_topics = Hash.new { |h,d| h[d] = [] }
parser = LibXML::XML::SaxParser.io(
  File.open("content.rdf.u8", "r:UTF-8")
)
class Callbacks
  include LibXML::XML::SaxParser::Callbacks
  def initialize
    @state = :top
    @topics = nil
  end
  def on_start_element(element, attributes)
    case @state
    when :top
      return unless element == 'ExternalPage'
      @state = :ExternalPage

      domain = attributes['about'].sub(%r!^\w+://([^"/]*)(?:/[^"]*)?$!, '\1')
      @topics = $domain_topics[domain]
    when :ExternalPage
      return unless element == 'topic'
      @state  = :topic
    end
  end
  def on_characters(characters)
    if @state == :topic and @topics
      @topics << characters
    end
  end
  def on_end_element(element)
    case @state
    when :ExternalPage
      @state = :top
      @topics = nil
    when :topic
      @state = :ExternalPage
    end
  end
end
parser.callbacks = Callbacks
parser.parse 
```

当我运行它时：

```
% ./my_awesome_code.rb
./my_awesome_code.rb:1337:in `parse': undefined method `on_start_document' for Callbacks:Class (NoMethodError) 
```

我在这里做错了什么？不应该`include LibXML::XML::SaxParser::Callbacks`给出默认定义 `on_start_document`吗？

irb 似乎证实了我的直觉：

```
 1.9.3p194 :009 > Callbacks.instance_methods.include? :on_start_document
 => true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:52:14.400

我很笨，错过了`#callbacks=`需要通过适当的回调传递一个*实例*，而不是一个类。所以我需要做的就是做

```
parser.callbacks = Callbacks.new 
```

# php - 检查一个数组是否包含另一个数组的所有元素

> ID：12867315
> 
> 赞同：6
> 
> 时间：2012-10-12T21:25:01.643
> 
> 标签：php, arrays, multidimensional-array, array-intersect

我正在设计一个电气工程应用程序。但是，我坚持这一点：我有以下数组

```
<?php 
// Static Array
$GroupOfEight = array (
                      array(0,1,3,2,4,5,7,6),
                      array(4,5,6,7,16,12,13,14),
                      array(12,13,15,14,8,9,11,10),
                      array(2,6,14,10,3,7,15,11),
                      array(1,3,5,7,13,15,9,11),
                      array(0,4,12,8,1,5,13,9),
                      array(0,1,3,2,8,9,11,10)
                      );
?> 
```

我还有另一个数组，但这个数组是一维的。

```
<?php
$myStack = array(0,1,3,2,4,5,7,6); //Dynamic, gets value by POST method.
?> 
```

我想要做的是检查 $myStack 是否等于 $GroupOfEight 数组的任何子数组。（编号顺序并不重要。脚本应该只检查是否包含每个元素。它们的顺序是否相同并不重要。）

到目前为止，这是我为解决该问题所做的工作：

```
<?php
//Check if stackArray contains 8group
for($i=0; $i<count($GroupOfEight);$i++)
for($j=0; $j<count($GroupOfEight[$i]); $j++){
    //$containsSearch = count(array_intersect($search_this,$all)) == count($search_this);
    $containsSearch = count(array_intersect($stackArray,$GroupOfEight[$j])) == count($stackArray);
    echo $containsSearch;
}
?> 
```

请帮助我更正我的代码或向我介绍此问题的解决方案，谢谢。

编辑：它应该只给出 1 个索引号。例如 stackArray 是 0,1,3,2,4,1,2,3 并且它应该找到与相同数字匹配的 GroupOfEight[N] ，而不管数字的顺序如何。如果有匹配的案例，我应该得到 N。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:31:51.673

给定您的示例数组，其输出将是：

```
> 0 
```

如果您只能输出一个数字，则应该这样做：

```
<?php
//Check if stackArray contains 8group
$check=false;
for($i=0; $i<count($GroupOfEight);$i++){
    //$containsSearch = count(array_intersect($search_this,$all)) == count($search_this);
    $containsSearch = (count(array_intersect($stackArray,$GroupOfEight[$i])) == count($stackArray) && count(array_intersect($stackArray,$GroupOfEight[$i])) == count($GroupOfEight[$i]));
    if($containsSearch && !$check){
        echo $i; //This specifies which index in GroupOfEight contains a matching array
        $check=true;
    }
}
?> 
```

编辑：做了一个功能。返回第一个匹配的索引或 -1 表示没有匹配：

```
function searcheight($stackArray,$GroupOfEight){
    for($i=0; $i<count($GroupOfEight);$i++){
        $containsSearch = (count(array_intersect($stackArray,$GroupOfEight[$i])) == count($stackArray) && count(array_intersect($stackArray,$GroupOfEight[$i])) == count($GroupOfEight[$i]));
        if($containsSearch){
            return $i; //This specifies which index in GroupOfEight contains a matching array
        }
    }
    return -1;
}
echo searcheight($stackArray,$GroupOfEight); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:30:53.547

你可以试试 ：

```
$searchKeys = array();
foreach ( $GroupOfEight as $key => $values ) {
    (count(array_intersect($values, $myStack)) == count($myStack)) and $searchKeys[] = $key;
}

#Output all keys it found same match
var_dump($searchKeys);

#OR Output Each Array it found a match
foreach($searchKeys as $key)
{
    var_dump($GroupOfEight[$key]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:39:23.183

你原来的方法的问题是你循环通过 GroupOfEight**两次**。你有两个 for 循环。
首先选择 GroupOfEight 中的每个数组，然后在第二个 for 循环中遍历数组的每个值。

如果您想使用原始方法，请摆脱额外的 for 循环：

```
echo "Hello, World!";
$GroupOfEight = array (
              array(0,1,3,2,4,5,7,6),
              array(4,5,6,7,16,12,13,14),
              array(12,13,15,14,8,9,11,10),
              array(2,6,14,10,3,7,15,11),
              array(1,3,5,7,13,15,9,11),
              array(0,4,12,8,1,5,13,9),
              array(0,1,3,2,8,9,11,10)
              );

$myStack = array(0,1,3,2,4,5,7,6); //Dynamic, gets value by POST method.

for($i=0; $i<count($GroupOfEight);$i++) {       
    $containsSearch = count(array_intersect($myStack,$GroupOfEight[$i])) == count($myStack);
    if($containsSearch===true) {
        echo "Woo! GroupOfEight[$i], <br/>" . print_r($GroupOfEight[$i], true) . "<br/>==<br/>" . print_r($myStack, true);
    }
} 
```

演示：[http ://codepad.viper-7.com/0hRNHz](http://codepad.viper-7.com/0hRNHz)

您可以使用[array_diff](http://php.net/manual/en/function.array-diff.php "数组差异")完成相同的操作：

```
for($i=0; $i<count($GroupOfEight);$i++) {               
    if(count(array_diff($myStack,$GroupOfEight[$i]))==0) {
        echo "Woo! GroupOfEight[$i], <br/>" . print_r($GroupOfEight[$i], true) . "<br/>==<br/>" . print_r($myStack, true);
    }
} 
```

演示：[http ://codepad.viper-7.com/6uLd9L](http://codepad.viper-7.com/6uLd9L)

**更新**
一个相关的SO帖子是：[检查两个数组值是否相等（忽略顺序）](https://stackoverflow.com/questions/1404114/php-built-in-function-to-check-whether-two-array-values-are-equal-ignoring-th)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T21:33:27.850

您正在比较`count`哪个是不够的，因为数字可能会改变。试试这个：

```
// Static Array
$GroupOfEight = array (
    array(0,1,3,2,4,5,7,6),
    array(4,5,6,7,16,12,13,14),
    array(12,13,15,14,8,9,11,10),
    array(2,6,14,10,3,7,15,11),
    array(1,3,5,7,13,15,9,11),
    array(0,4,12,8,1,5,13,9),
    array(0,1,3,2,8,9,11,10)
    );

$myStack = array(0,1,3,2,4,5,7,6); //Dynamic, gets value by POST method.

$containsSearch = false;
foreach($GroupOfEight as $key => $value){
    if ($myStack == $value) {
        $containsSearch = true;
    }

}

var_dump($containsSearch); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T21:34:54.083

计算 $GroupOfEight[$i]
的总数
如果总数相等，则计算 $myStack 的总数：
在循环中 -
如果 $myStack[$c] is in_array($GroupOfEight[$i]): $equal = 1
else $equal = 0; 出口;

如果 $equal == 1 -> 数组相同

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-23T13:03:21.320

我们不需要任何循环。试试这个

```
<?php 
$GroupOfEight = array (
                      array(0,1,3,2,4,5,7,6),
                      array(4,5,6,7,16,12,13,14),
                      array(12,13,15,14,8,9,11,10),
                      array(2,6,14,10,3,7,15,11),
                      array(1,3,5,7,13,15,9,11),
                      array(0,4,12,8,1,5,13,9),
                      array(0,1,3,2,8,9,11,10)
                      );
$myStack = array(0,1,3,2,4,5,7,6);

$key = '';
$key = array_search($myStack,$GroupOfEight);
echo $key;
?> 
```

输出

> 0

**注意：**输出`$key`是数组在 $GroupOfEight 中的位置，即 ($GroupOfEight[0])

# java - 用 jruby 编写的 Spring 框架 bean 中的 Ruby gems

> ID：12867318
> 
> 赞同：1
> 
> 时间：2012-10-12T21:25:06.853
> 
> 标签：java, ruby, spring, rubygems, jruby

我是 Java 世界的新手。我正在尝试在 spring 框架 bean 中使用 nokogiri gem。

我按照这个文档包含 jruby 脚本[http://static.springsource.org/spring/docs/3.0.7.RELEASE/reference/dynamic-language.html](http://static.springsource.org/spring/docs/3.0.7.RELEASE/reference/dynamic-language.html)。

而这个maven的代理回购 [http://rubygems-proxy.torquebox.org/releases](http://rubygems-proxy.torquebox.org/releases)

一切正常，直到我尝试将 nokogiri gem 包含到 rb 文件中。

这是我的 context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd">

    <lang:jruby id="fetchingWorkerImpl"
                script-interfaces="com.xxx.lib.fetcher.commons.FetchingWorker"
                script-source="classpath:com/xxx/fetcher/rubydemo/fetching_worker_impl.rb"/>
</beans> 
```

这是红宝石文件 fetching_worker_impl.rb

```
require 'java'
require 'rubygems'
require "bundler"
require 'nokogiri'
require "net/http"
require "uri"
java_import com.xxx.lib.fetcher.commons.FetchingWorker
java_import com.xxx.lib.fetcher.io.json.rubydemo.Response
java_import com.xxx.lib.fetcher.io.json.rubydemo.Request
java_import com.xxx.lib.fetcher.io.json.BaseResponse

class FetchingWorkerImpl

  def getRequestClass
    Request.java_class
  end

  def processRequest(request)
    log = org.apache.log4j.Logger.getLogger FetchingWorkerImpl.class.to_s
    begin

      log.info $:

      html = Net::HTTP.get(URI.parse('http://www.google.com/search?q=jruby'))
      doc = Nokogiri::HTML(html)

      texts = doc.css('h3 a.l').map { |i| i.text }

      request['links'] = texts.join "\n"

      return Response.new(request, 200, "Hello World From Ruby!")

    rescue Exception => e
      log.info("Request not handled: " + e.message)
      BaseResponse.new(request, 500, e.message)
    end
  end

end 
```

和 pom.xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0
</modelVersion>
<groupId>com.xxx.fetcher</groupId>
<artifactId>fetcher-rubydemo</artifactId>

<packaging>jar</packaging>
<version>1.0.0-SNAPSHOT</version>

<name>fetcher-rubydemo</name>

<properties>
    <lib.fetcher.interface.version>1.0.2</lib.fetcher.interface.version>
    <lib.fetcher.commons.version>1.0.0</lib.fetcher.commons.version>
    <lib.commons.version>1.0.0</lib.commons.version>

    <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
</properties>

<repositories>
    <repository>
        <id>libreader@scm.xxx.com</id>
        <url>sftp://scm.xxx.com/home/maven/</url>
    </repository>
    <repository>
        <id>rubygems-proxy</id>
        <name>Rubygems Proxy</name>
        <url>http://rubygems-proxy.torquebox.org/releases</url>
        <layout>default</layout>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
            <updatePolicy>never</updatePolicy>
        </snapshots>
    </repository>
</repositories>

<build>
    <finalName>fetcher-rubydemo</finalName>

    <plugins>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.3.1</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <mainClass>com.xxx.fetcher.rubydemo.Start</mainClass>
                        <classpathPrefix>libs/</classpathPrefix>
                    </manifest>
                </archive>
            </configuration>
        </plugin>

        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>assembly</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <descriptors>
                    <descriptor>src/main/assemble/deploy.xml</descriptor>
                </descriptors>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>de.saumya.mojo</groupId>
            <artifactId>jruby-maven-plugin</artifactId>
            <version>0.28.4</version>
            <extensions>true</extensions>
        </plugin>

        <plugin>
            <groupId>de.saumya.mojo</groupId>
            <artifactId>gem-maven-plugin</artifactId>
            <version>0.28.4</version>
            <extensions>true</extensions>
        </plugin>

    </plugins>

    <extensions>
        <extension>
            <groupId>org.apache.maven.wagon</groupId>
            <artifactId>wagon-ssh</artifactId>
            <version>2.2</version>
        </extension>
    </extensions>

</build>

<dependencies>

    <!-- JRUBY -->

    <dependency>
        <groupId>org.jruby</groupId>
        <artifactId>jruby-complete</artifactId>
        <version>1.6.8</version>
    </dependency>

    <!-- RUBY GEMS -->

    <dependency>
        <groupId>rubygems</groupId>
        <artifactId>nokogiri</artifactId>
        <version>1.5.5</version>
        <type>gem</type>
    </dependency>

    <!-- xxx -->

    .....

    <!-- SPRING -->

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <!-- LOGGING -->

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <!-- APACHE -->

    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.2.1</version>
    </dependency>

</dependencies>
</project> 
```

每次我尝试运行 jar 文件时，我都会收到此异常 `org.jruby.exceptions.RaiseException: (LoadError) no such file to load -- nokogiri`

我在 libs 目录中看到 nokogiri gem，但是无法将其包含在 rb 文件中。

在用jruby编写的spring框架bean中使用gem的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-04T22:33:54.030

尝试在文件末尾添加 FetchingWorkerImpl.new。

```
require 'java'
require 'rubygems'
require "bundler"
require 'nokogiri'
require "net/http"
require "uri"
java_import com.xxx.lib.fetcher.commons.FetchingWorker
java_import com.xxx.lib.fetcher.io.json.rubydemo.Response
java_import com.xxx.lib.fetcher.io.json.rubydemo.Request
java_import com.xxx.lib.fetcher.io.json.BaseResponse

class FetchingWorkerImpl

  def getRequestClass
    Request.java_class
  end

  def processRequest(request)
    log = org.apache.log4j.Logger.getLogger FetchingWorkerImpl.class.to_s
    begin

      log.info $:

      html = Net::HTTP.get(URI.parse('http://www.google.com/search?q=jruby'))
      doc = Nokogiri::HTML(html)

      texts = doc.css('h3 a.l').map { |i| i.text }

      request['links'] = texts.join "\n"

      return Response.new(request, 200, "Hello World From Ruby!")

    rescue Exception => e
      log.info("Request not handled: " + e.message)
      BaseResponse.new(request, 500, e.message)
    end
  end

end

FetchingWorkerImpl.new 
```

# nsdata - 一次又一次地转换一个 NSMediaItem

> ID：12867323
> 
> 赞同：1
> 
> 时间：2012-10-12T21:25:58.143
> 
> 标签：nsdata, assets, mpmediaitem, exporter

今天我在这个线程中阅读了关于stackoverflow的第一个答案

[MPMediaItems 原始歌曲数据](https://stackoverflow.com/questions/1656124/mpmediaitems-raw-song-data)

这真的很棒。我用它来将 MPMediaItem 转换为 NSData，就像线程的作者也想要它一样。现在有一件事我不明白，所以也许你好心帮我一点？那将是真棒。问题是当我选择一首歌曲并使用给定的代码导出它时，它工作正常，但是当我选择另一首歌曲时，它再次导出第一首歌曲。（当我在处理程序之外访问它时）你知道为什么吗？非常感谢您的帮助和给我时间！许多问候，蒂姆

# javascript - 如何在 Firefox 控制台中查看 xml 对象

> ID：12867329
> 
> 赞同：3
> 
> 时间：2012-10-12T21:26:11.330
> 
> 标签：javascript, jquery, xml, html, firefox

```
jQuery.get("oberonmetadata.xml", function(metadata){
    console.log(metadata);
}); 
```

这在控制台中向我显示 [column,column,....（如下图所示）]，当我单击它时，它会扩展其整个对象树结构...

而我只想看到控制台中的 metadata.xml 文件。这在 chrome 中完美无缺，但在 IE-9 和 mozilla 中我无法做到。

![在此处输入图像描述](../Images/af602a2271aff1a0c70de54960975119.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:40:39.363

如果您只是想将响应记录到控制台，请利用传递给成功回调的第三个参数并检查其 responseText 属性，该属性包含返回文档的字符串表示形式。

```
$.get("oberonmetadata.xml", function(data, status, response){
    console.log(response.responseText);
}); 
```

这适用于所有浏览器环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:32:47.220

尝试`console.log(metadata.xml);`

请参阅[此处](http://www.w3schools.com/dom/dom_document.asp)了解更多信息。

# objective-c - 尝试在 iPhone 应用程序中使用 BOOL 失败

> ID：12867334
> 
> 赞同：-1
> 
> 时间：2012-10-12T21:26:15.700
> 
> 标签：objective-c, ios, boolean, ios6

我有以下方法，我试图确定某人是否与实践相关联。来自 C# 这似乎是正确的方法，但我在这里收到了一些警告/错误。

```
- (BOOL) isAvailablePractice:(NSString*)practiceId
{
    BOOL *check = NO;

    for(NSUInteger i = 0; i < [self.practices count]; i++)
    {
        EHRXOption *o = [self.practices objectAtIndex:i];
        if([o.id isEqualToString:practiceId])
            check = YES;
    }

    return check;
} 
```

在我设置 check = YES 的行上，我收到以下警告

```
Incompatible integer to pointer conversion assigning to 'BOOL *' (aka 'signed char *') from 'signed char'; 
```

在返回检查我得到这个错误

```
Incompatible pointer to integer conversion returning 'BOOL *' (aka 'signed char *') from a function with result type 'BOOL' (aka 'signed char'); dereference with * 
```

我理解这个错误的方式，我可能是错的，如果我在 return *check 前面放一个 * ，它实际上会返回一个新值，而不是我一直在使用的那个。

我真的不明白 Objective C 如何使用 BOOL 值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T21:27:25.163

> 布尔 * 检查 = 否；

不正确改成

> 布尔检查 = 否；

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T21:27:26.483

不要使用指针。

只是`BOOL check = NO;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:28:14.803

你想要`BOOL check`而不是`BOOL *check`. 第一个是 BOOL 值；后者是指向 BOOL 的指针。由于您没有在代码中处理任何 BOOL 地址，因此指针不是正确的类型。

# ios - 返回（聚焦）到 Adob e AIR 应用程序 (iOS) 时停止背景音乐

> ID：12867352
> 
> 赞同：0
> 
> 时间：2012-10-12T21:28:12.060
> 
> 标签：ios, air, avaudioplayer, air-native-extension

当我的应用程序在进入我的应用程序时开始停止播放背景音乐（例如 Spotify）时，我正在使用 AVAudioSessionCategoryPlayback（通过 Adob​​e AIR iOS 本机扩展程序）。

这在我的应用程序启动时效果很好，但是当它恢复（从后台切换到前台）时它不会。

有什么特别的设置可以让我的应用程序在恢复时控制音频会话？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:25:57.767

如果您最小化应用程序然后再次打开它，我在 iOS 中遇到了类似的问题，忽略了与音频相关的本机扩展。我不确定是否有官方或更有效的解决方案，但我所做的就是在每次打开应用程序时监听（为 Event.ACTIVATE 添加一个监听器）然后重新激活本机扩展。希望这对你有用。

# java - 在 UiBinder xml 中使用 GIN 创建的资源

> ID：12867354
> 
> 赞同：1
> 
> 时间：2012-10-12T21:28:14.907
> 
> 标签：java, gwt, guice, uibinder, gwt-gin

我们的应用程序使用 GIN 动态实例化其 GWT 资源包。这样做是为了在运行时为不同的显示模式加载不同的样式表。一般来说，这意味着我可以使用类似`MyApp.ginjector.getResources()`而不是标准的东西来创建资源的单例实例`GWT.create(MyAppResources.class)`。

这适用于除 UiBinder 代码之外的所有内容。我们一直在使用`<ui:with ref="res" type="com.company.MyAppResources" />`，我希望`MyAppResources`使用 GIN 而不是`GWT.create`.

根据[GWT UiBinder 文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Share_resource_instances)，有两种方法可以处理这个问题。在组件中使用 a`@UiField(provided=true)`或 a `@UiFactory`。这两种方法都是不可取的，因为它们要求我团队中的人（包括我自己）记住将这个样板代码放入每个小部件中。更糟糕的是，如果省略了创建代码，一切似乎仍然有效，因为`GWT.create`将创建资源的一个实例，而不是我们想要的。

我正在寻找一种创建某种全局`@UiFactory`方法的方法，我的所有组件都将使用该方法，它将委托给 GIN。或者，某种挂钩`GWT.create`特定类并让客户端运行时代码创建实例的方法也可以，因为我可以将对象创建委托给我的 static `Ginjector`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:23:23.020

如果你有`com.company.MyApp`一个静态字段`ginjector`，那么你可以使用：

```
<ui:import field="com.company.MyApp.ginjector" /> 
```

然后（假设`ginjector.getResources().style().foo()`在Java中）：

```
<span class="{ginjector.getResources.style.foo}"> 
```

# python - 在子进程中执行指令

> ID：12867359
> 
> 赞同：0
> 
> 时间：2012-10-12T21:28:23.603
> 
> 标签：python, fork

我想在执行完成时退出子进程`os.system(comm)`。

我的代码是：

```
pid = os.fork()
if pid == 0: 
         #instruction
else:
         comm = "python file.py"
         os.system(comm)
         sys.exit("error") 
```

现在，我的文件`file.py`包含一个循环，只有满足条件才能从中退出。但是，即使条件不满足，程序也会退出循环并显示消息*`error`*。

它也不执行`file.py`.

`file.py`是 ：

```
while 1:
       if(condition):
           break
# rest of instructions 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:58:21.337

您应该使用 os._exit(returncode) 或更好，而不是 os.system 使用函数 os.exec （os.execvp 或 os.execvpe）之一

要获得更多机会，只需使用子流程模块。

# ruby-on-rails - 如何将新对象分配给 current_user 和 has_one 关联？

> ID：12867362
> 
> 赞同：0
> 
> 时间：2012-10-12T21:28:30.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`Score`that belongs_to `Client`- 和`Client`has_one `Score`。

我还想在创建时分配`Score`给`User`。因此，每次 a`current_user`为特定客户创建分数时，我都希望将`current_user.id`其与该`Score`记录一起存储。

最好的方法是什么？

我在想一种优雅的方式可能是一种`Score belongs_to User, :through Client`但那是行不通的。

所以我假设最好的方法是添加`user_id`到`Score`模型中，然后这样做。

`user_id`但是，我该如何分配`Score#create`？

这就是我的创建操作的外观：

```
def create
    @score = current_user.scores.new(params[:score])

respond_to do |format|
  if @score.save
    format.html { redirect_to @score, notice: 'Score was successfully created.' }
    format.json { render json: @score, status: :created, location: @score }
  else
    format.html { render action: "new" }
    format.json { render json: @score.errors, status: :unprocessable_entity }
  end
end 
```

结尾

这会自动将当前分数分配给哈希`client_id`中的`params[:score]`—— 但它不会对`user_id`.

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:43:02.937

只要你有`Score.belongs_to :user`，并且附表`user_id`中的一栏`scores`：

```
def create
  @score = Score.new(params[:score])
  @score.user = current_user

  ...
end 
```

如果您需要更多解释，请告诉我，但我觉得代码很清楚。

**编辑**或：代替`current_user.scores.new`，使用`current_user.scores.build(params[:score])`，并确保你有`User.has_many :scores`

# php - PHP - 从同一行的主键获取第二列值

> ID：12867366
> 
> 赞同：2
> 
> 时间：2012-10-12T21:28:49.837
> 
> 标签：php, mysql, database, select

我在一个数据库中有两个表。

```
id | title
---------           // table name is tableone
1  |  a
2  |  b
3  |  c
4  |  d
5  |  a
6  |  b
7  |  c
8  |  d 
```

对于第一个表，主键是 ID 列。从这个表中，我使用 PHP 创建一个工作正常的 HTML 表。

第二张表

```
id | version
---------
a  |  1
b  |  3
c  |  6
d  |  7 
```

在第一个表的 while 循环中，我将标题值预定义为

```
$title = $id['title']; 
```

在 while 循环中，我正在使用另一个 while 循环，但这次我尝试使用预定义的标题来访问第二个表上匹配的 id 的相应版本行值：

```
mysql_query("SELECT version FROM tableone WHERE ID=".$title) 
```

但是我被提示错误

> 'where 子句'中的未知列'a'

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:36:07.357

您必须将 $title 括在引号中，如下所示：

```
mysql_query("SELECT version FROM tableone WHERE ID='".$title."'") 
```

如果您有用户提供的输入，则应确保您的代码在所有情况下都是安全的。

在这篇文章中有一些很好的信息：[https ://stackoverflow.com/questions/3714107/php-mysql-security-checklist-the-definitive-practical-guide](https://stackoverflow.com/questions/3714107/php-mysql-security-checklist-the-definitive-practical-guide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:42:00.103

与其在循环中进行单独的查询，不如使用连接通过一个查询来获取所有信息：

```
SELECT t1.id AS id, title, version
FROM tableone t1
JOIN tabletwo t2 ON t1.title = t2.id 
```

# intellij-idea - IDEA：如何选择项目导航器中显示的内容？

> ID：12867367
> 
> 赞同：2
> 
> 时间：2012-10-12T21:28:55.240
> 
> 标签：intellij-idea

在下面的示例中，我唯一关心的是：

*   源代码
*   pom.xml

其他一切对我来说都是噪音。

请问我怎样才能减少这种噪音？

![在此处输入图像描述](../Images/79736f4428756448aba1b6726e426bfe.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:33:04.520

首选项 -> 文件类型 -> 忽略文件和文件夹

添加您希望 IDE 忽略的任何模式。

# sql - Postgres/Rails 查询中的复数问题

> ID：12867373
> 
> 赞同：4
> 
> 时间：2012-10-12T21:29:57.483
> 
> 标签：sql, ruby-on-rails, ruby, regex, postgresql

我在查询中遇到复数问题。我需要的是ruby中的一种方法，或者是在我搜索时可以帮助我的sql。例如：

当我搜索“数组”时，我希望它也返回“数组”的结果。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T00:56:24.893

您正在寻找的是[*word stemming*](http://en.wikipedia.org/wiki/Stemming)。

你不能真正使用一堆正则表达式来对像英语这样的语言进行词干提取，有太多的例外。你需要一本大词干词典。

PostgreSQL 的全文搜索提供了这样一个字典，我强烈建议您使用全文搜索来完成这项工作：

```
regress=# WITH vals(a,b) AS (VALUES ('goose','geese'), ('query','queries'), ('arrays','array'))
SELECT to_tsquery(a), to_tsvector(b), to_tsquery(a) @@ to_tsvector(b) FROM vals;
 to_tsquery | to_tsvector | ?column? 
------------+-------------+----------
 'goos'     | 'gees':1    | f
 'queri'    | 'queri':1   | t
 'array'    | 'array':1   | t
(3 rows) 
```

尽管您会注意到词干词典并不完美；我希望搜索“goose”以匹配“geese”，但事实并非如此。您可能需要增强字典。PostgreSQL 的字典有时也可能[对词干过于热情](https://stackoverflow.com/questions/354167/prevent-stemming-of-proper-nouns-in-postgresql)。

另一种方法是使用更大且更易于定制的工具，例如 Apache Solr。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:09:41.357

您可以在使用 Postgres 全文搜索时修改字典，如此[处](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html#TEXTSEARCH-SYNONYM-DICTIONARY)和[此处](https://stackoverflow.com/questions/11852996/postgres-full-text-search-with-synonyms)所述。

但是，由于 mu 太短，您可能最好使用更高级的工具。对于这种事情，我更喜欢[Thinking Sphinx 。](http://freelancing-god.github.com/ts/en/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:40:32.730

```
Class.all(:conditions => ["attribute LIKE ?", "array%"]) 
```

应该这样做，我已经使用 Rails 2 有一段时间了，所以可能有更好的方法，但可以解决问题。

# html - css/html 奇怪的网页加载

> ID：12867379
> 
> 赞同：-1
> 
> 时间：2012-10-12T21:30:24.280
> 
> 标签：html, css, header

我不明白为什么当我加载页面时：http: [//judopassion.com/wordpress/](http://judopassion.com/wordpress/) 在页面加载期间，我的标题会上下移动，直到它停止。

什么css问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:33:35.870

这是因为您的 facebook 插件是与网页异步加载的。这意味着您的 facebook/social 插件占用的区域最初的高度为 0，并且在加载之后是浏览器的页面渲染后，因此它会将标题向下移动。

如果你仔细看，facebook 插件最初是没有加载的。并且您的标题在加载后会向下移动：D

有一个简单的解决方法。只需将 facebook 部分的高度设置为预设高度`height: 30px;`

# c# - 当我尝试使用 Entity Framework 5.0 运行 Enable-Migrations 时出现 ReflectionTypeLoadException

> ID：12867381
> 
> 赞同：0
> 
> 时间：2012-10-12T21:30:37.497
> 
> 标签：c#, .net, orm, entity-framework-5

我第一次尝试在我的一个项目中使用实体框架。我正在使用[代码优先工作流](http://msdn.microsoft.com/en-us/data/jj193542)来自动创建我的数据库。Intitaly 设置数据库工作正常。现在我正在尝试将我的类中的更改迁移到数据库中。

我正在阅读的教程说我需要在包管理器控制台中运行“启用迁移”。然而，当我这样做时，我收到以下错误

```
PM> Enable-Migrations
System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.
   at System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)
   at System.Reflection.RuntimeModule.GetTypes()
   at System.Reflection.Assembly.GetTypes()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.FindType[TBase](String typeName, Func`2 filter, Func`2 noType, Func`3 multipleTypes, Func`3 noTypeWithName, Func`3 multipleTypesWithName)
   at System.Data.Entity.Migrations.Design.ToolingFacade.GetContextTypeRunner.RunCore()
   at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run()
Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information. 
```

我究竟做错了什么？如何检索加载程序异常属性？NuGet 还说我有 EF 5.0，但我的项目引用中 EntityFramework 项的 Version 属性说 4.4.0.0。我不确定这是否相关。

# java - 使用 Hibernate 4.1 进行 SchemaExport 期间的 Hsqldb 错误

> ID：12867383
> 
> 赞同：1
> 
> 时间：2012-10-12T21:30:44.377
> 
> 标签：java, hibernate, unit-testing, hsqldb, schemaexport

运行 Hibernate 的 SchemaExport 时，如何消除以下这些错误？实际上它似乎并没有引起问题——我的测试仍然运行得很好——但我不喜欢看到错误并且不得不向下滚动很多只是为了看看测试出了什么问题。

有没有办法摆脱它们 - 通过解决错误或让它安静？

```
17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588CBB8DB5
17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK
17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C5885AC11C60
17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK
17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C58841979673
17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK
17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588430DFF29
17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK
17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table click drop constraint FK5A5C588B6909BE1
17:28:19 ERROR SchemaExport:426 - user lacks privilege or object not found: PUBLIC.CLICK
17:28:19 ERROR SchemaExport:425 - HHH000389: Unsuccessful: alter table comment drop constraint FK38A5EE5FCBB8DB5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:13:03.837

您使用的是哪个版本的 HsqlDB？我正在使用 2.2.9 和休眠 4.1.3。我没有看到任何错误..您可以使用用户 SA 尝试此版本。

或者您可以尝试在表和它使用的序列上为您的 PUBLIC 授予权限

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T05:55:26.537

只是不要使用 2.2.x 系列的 hsqldb。2.0.0 没问题。

# html - 从 textarea POST JSON 中有换行符，是否可以忽略它们？

> ID：12867385
> 
> 赞同：1
> 
> 时间：2012-10-12T21:30:50.997
> 
> 标签：html, json, textarea

我正在尝试编写一个简单的 Web 应用程序，它允许我在`textarea`元素内编写一些 JSON，然后将其发布到我的服务器。我面临的问题是，当 JSON 到达服务器时，它包含来自`textarea`. 这是一个问题，因为现在我不能使用 JSON.parse，例如，将其返回到 Javascript 领域。

我曾考虑过在服务器端从其中删除换行符，但是否有更好的方法可以将其作为 JSON 实际发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:34:55.927

JSON 会忽略大多数空格，**但**值除外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:32:07.150

我会说你这样做是正确的。您要么需要在发送之前在客户端用 Javascript 替换它们，要么在服务器端接收后只做一些修改。

# visual-studio-2012 - 在现有的 Visual Studio 网站项目中使用 TypeScript

> ID：12867390
> 
> 赞同：35
> 
> 时间：2012-10-12T21:31:52.517
> 
> 标签：visual-studio-2012, typescript

我有一个现有的 Visual Studio 项目，它被设置为“网站”项目。您可以通过转到 File->New Web Site 来创建这样的项目。这是与“Web 应用程序项目”不同的项目类型。

我想在这个项目中加入一些 TypeScript。但是，我不知道如何指示 Visual Studio“构建”我的 .ts 文件并生成 .js 文件。我有 VS2012 TypeScript 插件，我可以创建一个 TypeScript 项目，如此[处所述](http://blogs.msdn.com/b/timart/archive/2012/10/02/typescript-project-in-visual-studio-2012.aspx)。该项目运行良好，但这更像是“Web 应用程序项目”。这是与“网站项目”不同的项目类型。

此外，当我创建 .ts 文件时，在该文件中，编辑器会为我提供 TypeScript 语法突出显示和智能感知。但同样，我不知道如何让它将 TypeScript 编译为 JavaScript。

一点帮助？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T11:26:36.473

Visual Studio 现在支持 TypeScript 文件的“保存时编译”。我正在使用 Visual Studio 2013 [Update 2](http://www.microsoft.com/en-us/download/details.aspx?id=42666)，我可以在网站项目中打开它，方法是转到工具 -> 选项 -> 文本编辑器 -> TypeScript -> 项目，然后选中“自动编译 TypeScript 文件”框不是项目的一部分。” 我不知道为什么它被这样标记，因为它显然是在编译*属于*我项目一部分的文件......

对此的许多其他答案不适用于网站项目，因为您无法参与构建过程。对于网站项目，[没有 csproj 或 vbproj 文件](http://msdn.microsoft.com/en-us/library/dd547590.aspx)，因为构建是由 IIS 处理的，而不是 Visual Studio。

如果您使用的是网站项目，并且“保存时编译”对您不起作用，则只有几种选择：

1）使用命令行TSC编译器手动编译你的代码。

2) 创建用于手动编译文件的自定义工具。您可以将其配置为在 Visual Studio 中使用。

3) 创建一个“按需编译”.aspx 页面，该页面将编译 TypeScript 并将其作为 JavaScript 返回。

4) 使用[TypeScript Compile](https://github.com/niutech/typescript-compile) JavaScript 项目在浏览器中自动编写代码。这为您提供了网站项目通常附带的“按需编译”。

在“保存时编译”在 VS 中工作之前，我使用的是 TypeScript Compile。现在我很高兴地使用“保存时编译”。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-12T23:37:26.557

这个目标有点移动——但这只是因为 TypeScript 团队一直在改进它的工作方式。我试图在下面涵盖尽可能多的场景，从最新到最旧。

最新的一点是，它现在应该可以在最新版本的 Visual Studio（当前为 v1.4）中工作，即使对于 Web 项目也是如此。

[我已经从关于将 TypeScript 添加到现有项目](http://www.stevefenton.co.uk/Content/Blog/Date/201210/Blog/Adding-TypeScript-To-An-Existing-Visual-Studio-Project/)的更长的答案中提取了这些简短的注释。

# 对比 2013 / 0.9.5

如果您使用 Visual Studio Extension for 0.9.5 或更高版本以及 Visual Studio 2013，您应该会发现它会在您添加第一个 TypeScript 文件后立即自动配置所有内容。

# 自动 TypeScript 化不起作用？

自动配置仅添加几行 - 您可以手动执行此操作：

```
 <ItemGroup>
    <TypeScriptCompile Include="Scripts\app.ts" />
  </ItemGroup>
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets" Condition="Exists('$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets')" /> 
```

# VS 2012 / 0.9.x

以下项目文件配置应该可以工作：

```
 <ItemGroup>
    <TypeScriptCompile Include="app.ts" />
  </ItemGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptTarget>ES5</TypeScriptTarget>
    <TypeScriptRemoveComments>false</TypeScriptRemoveComments>
    <TypeScriptSourceMap>true</TypeScriptSourceMap>
    <TypeScriptModuleKind>AMD</TypeScriptModuleKind>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TypeScriptTarget>ES5</TypeScriptTarget>
    <TypeScriptRemoveComments>true</TypeScriptRemoveComments>
    <TypeScriptSourceMap>false</TypeScriptSourceMap>
    <TypeScriptModuleKind>AMD</TypeScriptModuleKind>
  </PropertyGroup>
  <Import Project="$(VSToolsPath)\TypeScript\Microsoft.TypeScript.targets" Condition="Exists('$(VSToolsPath)\TypeScript\Microsoft.TypeScript.targets')" /> 
```

# 甚至更旧的设置？

我发现将 TypeScript 添加到现有项目的最可靠方法是将以下内容添加到项目文件中：

```
<ItemGroup>
    <AvailableItemName Include="TypeScriptCompile" />
 </ItemGroup>
 <ItemGroup>
    <TypeScriptCompile Include="$(ProjectDir)\**\*.ts" />
 </ItemGroup>
 <Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot;  @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" />
 </Target> 
```

您也可以在此处添加可选标志 - 例如`--module amd`：

```
 <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; --module amd  @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-22T12:42:49.283

从 2013 年 1 月 21 日发布的 0.8.2 版开始，VS2012 TypeScript 插件支持在不使用 WebEssentials 的情况下进行保存时编译。转到工具 > 选项 > 文本编辑器 > TypeScript > 项目部分并选中“自动编译...”框。

如果您想将所有 .ts 文件编译成单个 .js 文件作为构建过程的一部分（您可能应该这样做），请确保 app.ts 脚本对所有应包含的文件都有 <reference> ，并将以下预构建步骤添加到您的项目中：

```
"C:\Program Files (x86)\Microsoft SDKs\TypeScript\tsc.exe" --out app.js app.ts 
```

（指定 --out 参数告诉 tsc 包含所有引用的文件。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T01:21:44.120

由于没有项目文件，您可能必须恢复为“手动”运行 TypeScript 编译器。

打开 Visual Studio 命令提示符（开始 -> 程序 -> Microsoft Visual Studio 20xx -> Visual Studio 工具 -> 开发人员命令提示符）。

运行： tsc your_input_file.ts --target ES5

要提供多个 .ts 文件，请使用带有 @args_file_name 参数的文本文件。

当你厌倦了，把它全部放在一个批处理文件中。

当您厌倦了使用批处理文件时，将您的应用程序转换为 Web 应用程序并根据 Sohnee 的回答更改 .proj 文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-08T08:02:45.820

为此，我选中了“自动编译不属于项目的 TypeScript 文件”复选框。

但这还不够。为了在网站项目中进行自动编译，我必须创建一个具有以下配置的 tsconfig.json 文件：

```
{
"compilerOptions": {
    "noImplicitAny": false,
    "noEmitOnError": true,
    "removeComments": false,
    "sourceMap": true,
    "target": "es5",
    "alwaysStrict": true,
    "module": "amd"
},
"compileOnSave": true,
"exclude": [
    "node_modules",
    "wwwroot",
    "packages"
]
} 
```

`"compileOnSave": true`设置是这里的关键。这就是触发自动编译的原因。

Visual Studio 2017 上的打字稿版本 2.1.5

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-21T16:47:17.107

Josh，我正在使用 Visual Studio 2012 Express for Web，我意识到每次保存 .ts 文件时，它都会自动生成 .js。

每次保存文件时检查您的 .ts 文件夹，并确认您是否也没有发生这种情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-24T11:22:49.003

当我尝试在一个 VS-2015 项目中使用 *.aspx 和 *.ts 文件时，我阅读了上面的帖子。无意中我发现了简单明了的配方“如何在一个 Visual Studio 项目中组合 *.ASPX 和 *.TS 代码文件”，我想与所有人分享这个解决方案。对不起，如果它太容易了。

要在一个 VS - 项目中使用 *.aspx 和 *.ts 文件，请创建类型为“ASP.NET Web 应用程序”的新项目。然后，在下一步中，在顶部的“ASP.NET 4.5.2 模板”窗格中选择“空”，在底部的“添加文件夹和核心引用：”窗格中选择“Web 表单”和“Web API”。我用这个步骤添加了两张图片。

此外，当我在我的 TypeScript 代码中使用 JQuery 类型的变量时，我遇到了脚本错误。为了使用 JQuery 类型，我需要在项目中添加三个嵌套文件夹：Scripts\typings\jquery 并添加带有 jQ​​uery 类型定义的 jquery.d.ts 文件。我认为，细节很容易在谷歌上搜索。

感谢我的朋友，他帮助我找到了这个解决方案。 [创建项目的第一步](https://i.stack.imgur.com/06vlv.jpg)

[第二步创建项目](https://i.stack.imgur.com/Nlnck.jpg)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-13T11:35:28.140

检查属性中的 .ts 文件是否与 TypeScriptCompiler 关联。

请记住，在 VS 中将 .ts 文件打开到所谓的虚拟项目中与在 VS Web 项目中引用文件不同。第一个不允许您对其设置构建操作。而另一个会。

PS。获取 Web Essentials VS 附加组件以获取文件保存、文本编辑器 ts/js 拆分和内置最小化器的转换。

**编辑**：是的，我没有注意到其他项目在开始时没有这样的构建操作......但是，嘿，我将 Sohne 推向了正确的方向。

# mysql - 哪个 ruby mysql 库支持准备好的语句和最后的 id 检索

> ID：12867392
> 
> 赞同：2
> 
> 时间：2012-10-12T21:32:07.017
> 
> 标签：mysql, ruby

我用 mysql 库开始了我的 ruby​​ 项目，它准备了我非常喜欢的语句。然后我发现它没有优雅的方法来获取我插入的记录的 id，所以我切换到具有此功能但它没有准备好的语句的 mysql2 库，我必须在查询数据库之前转义我的所有值.

那么是否有一个用于 ruby​​ 的 mysql 库，它支持准备好的语句并检索最后插入的记录的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:10:23.683

mysql gem ( [https://github.com/luislavena/mysql-gem](https://github.com/luislavena/mysql-gem) ) 支持服务器端准备好的语句，但它没有得到积极维护并且已被弃用。

Swift mysql 适配器 ( [https://github.com/deepfryed/swift-db-mysql](https://github.com/deepfryed/swift-db-mysql) ) 提供了类似的功能，但不支持 ActiveRecord。我是作者，我积极地将它用于生产应用程序。如果您需要支持 swift-db-mysql 的 ORM，我建议您使用 Sequel 或更轻量级的 Swift 对象映射器（[https://github.com/shanna/swift](https://github.com/shanna/swift)）

希望有帮助

# android - 根据从先前活动传递的信息为每个选项卡主机设置布局

> ID：12867393
> 
> 赞同：0
> 
> 时间：2012-10-12T21:32:13.637
> 
> 标签：android, android-layout, android-tabhost, textview

我在设置选项卡式布局时遇到了一些问题。我的目标是获取从先前活动传递的一些信息，在本例中为“siteName”，并在 onCreate 期间将此信息设置为我的一个选项卡中的文本字段。

目前我得到 nullPointer 异常，只能弄清楚如何在整体布局中设置值，在这种情况下是“location_tabbed_menu”，而不是在单个选项卡中。

我已经搜索了几个小时，但找不到答案。我的代码如下：

```
public class LocationTabbedMenu extends TabActivity {
TextView title;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location_tabbed_menu);

    //Get passed information
    Intent i = getIntent();
    String siteName = i.getStringExtra("name");

    TabHost tabHost = getTabHost();

    // Tab for Photos
    TabSpec infospec = tabHost.newTabSpec("Info");
    // setting Title and Icon for the Tab
    infospec.setIndicator("Info", getResources().getDrawable(R.drawable.location_tabbed_menu_info_icon));
    Intent infoIntent = new Intent(this, LocationTabbedMenuInfo.class);

    TextView title = (TextView) findViewById(R.id.textTest);
    title.setText(siteName);

    infospec.setContent(infoIntent);

    // Tab for Songs
    TabSpec foodspec = tabHost.newTabSpec("Food");
    foodspec.setIndicator("Songs", getResources().getDrawable(R.drawable.location_tabbed_menu_food_icon));
    Intent songsIntent = new Intent(this, LocationTabbedMenuFood.class);
    foodspec.setContent(songsIntent);

    // Tab for Videos
    TabSpec tipsspec = tabHost.newTabSpec("Tips");
    tipsspec.setIndicator("Videos", getResources().getDrawable(R.drawable.location_tabbed_menu_tips_icon));
    Intent videosIntent = new Intent(this, LocationTabbedMenuTips.class);
    tipsspec.setContent(videosIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(infospec); 
    tabHost.addTab(foodspec); 
    tabHost.addTab(tipsspec); 
}
} 
```

请注意，值“testText”是单个选项卡中文本视图的 ID。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T21:43:13.690

我怀疑最初的布局可能有问题。[请记住，名称 'tabhost'、'tabs' 和 'tabcontent' 必须分别用于 TabHost、TabWidget 和 FrameLayout。] 另一种可能性是引用的活动不存在或未在清单中引用。此外，我没有看到对“onTabChangeListener”的引用。这是您第一次看到标签标识符的地方：信息、食物或提示。

# c# - 通用嵌套类型：无法从 X 转换 到 X

> ID：12867396
> 
> 赞同：2
> 
> 时间：2012-10-12T21:32:21.287
> 
> 标签：c#, generics

我正在编写一个用于处理无向图的类，并遇到以下编译时错误：

> 'Dictionary.EdgeCollection>.Add(TVertex, UndirectedGraph.EdgeCollection)' 的最佳重载方法匹配有一些无效参数
> 
> 论点 2：不能转换 from`UndirectedGraph<TVertex,TEdge>.AdjacentEdgeCollection<TVertex,TEdge>` 到`UndirectedGraph<TVertex,TEdge>.AdjacentEdgeCollection<TVertex,TEdge>`

我可以将问题简化为以下示例：

```
public class UndirectedGraph<TVertex, TEdge>
{
    Dictionary<TVertex, EdgeCollection<TVertex, TEdge>> edges;

    class VertexCollection<TVertex, TEdge>
    {
        UndirectedGraph<TVertex, TEdge> graph;

        public VertexCollection(UndirectedGraph<TVertex, TEdge> graph)
        { this.graph = graph; }

        public void Add(TVertex value)
        {
            // Argument 2: cannot convert
            // from 'UndirectedGraph<TVertex,TEdge>.AdjacentEdgeCollection<TVertex,TEdge>'
            //   to 'UndirectedGraph<TVertex,TEdge>.AdjacentEdgeCollection<TVertex,TEdge>'
            this.graph.edges.Add(value, new EdgeCollection<TVertex, TEdge>(this.graph));
        }
    }

    class EdgeCollection<TVertex, TEdge>
    {
        public EdgeCollection(UndirectedGraph<TVertex, TEdge> graph) { }
    }
} 
```

请注意，`TVertex`嵌套`TEdge`类中的`TVertex`and`TEdge`与外部类中的 and 不同，并且我收到警告说我应该重命名它们。我可以这样做，但这不会影响错误。我认为片段的目的很明确，那么我如何让它做我想做的事情，我的想法哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:54:37.130

你确定有三个`TVertex`类型参数和三个`TEdge`类型参数？在我看来，这三个都是相同的，您需要的是以下内容：

```
public class UndirectedGraph<TVertex, TEdge>
{
    Dictionary<TVertex, EdgeCollection> edges;

    class VertexCollection
    {
        UndirectedGraph<TVertex, TEdge> graph;

        public VertexCollection(UndirectedGraph<TVertex, TEdge> graph)
        { this.graph = graph; }

        public void Add(TVertex value)
        {
            this.graph.edges.Add(value, new EdgeCollection(this.graph));
        }
    }

    class EdgeCollection
    {
        public EdgeCollection(UndirectedGraph<TVertex, TEdge> graph) { }
    }
} 
```

# c - 如何在编写 C 代码时使用随机性？

> ID：12867397
> 
> 赞同：1
> 
> 时间：2012-10-12T21:32:21.463
> 
> 标签：c

最近我遇到了一个有趣的 C 难题：我们有一个有 N 个节点和 M 个边的网络。每个节点包含一定数量的数据包。最初，节点 i 包含 ai 个数据包。在每个时间步，每个数据包随机选择一个它的相邻邻居并移动到它。我们必须在 K 个时间步之后找出每个节点的数据包数。

我在这个问题中面临的主要问题是如何使用概率。“随机”这个词非常令人困惑，对我来说没有任何逻辑。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:57:03.407

最简单的方法是使用`srand()`and`rand()`函数。

`srand()`初始化随机数生成器。典型用法是：

```
srand(time(NULL)); 
```

它根据当前时间设置种子。它不是*安全*随机的，但它避免了每次运行程序时都得到相同的结果（除非你非常快速地连续运行两次）。`srand()`在程序执行期间，您应该只调用一次，然后再调用`rand()`.

该`rand()`函数返回一个 0 到`RAND_MAX`;范围内的随机数。的值`RAND_MAX`可能因一个系统而异。您可以操纵结果以获取所需范围内的随机数；例如，`rand() % 2`给你一个随机数，其值为`0`或`1`。

[comp.lang.c FAQ](http://www.c-faq.com)的第 13 节很好地涵盖了这一点。

请注意，`rand()`通常不会生成非常高质量的随机数。出于您的目的，这可能没问题。如果不是，还有其他特定于系统的方法可以生成更好的随机数。

# eclipse - 在我自己的文本编辑器中突出显示 Eclipse 关键字

> ID：12867408
> 
> 赞同：2
> 
> 时间：2012-10-12T21:33:11.587
> 
> 标签：eclipse, syntax-highlighting

我在 Eclipse 中制作了一个简单的文本编辑器，在其中添加了一些基于 WordRule 的简单语法突出显示来突出显示语言关键字。问题在于，当关键字是标识符的一部分时（例如，“import”是“extra_import”的一部分），“import”会在“extra_import”中突出显示。如果它只是另一个字符串的子字符串，我如何停止 eclipse 以突出显示 aa 关键字？

另一个问题；是否有基于正则表达式的 IRule？

WhitespaceRule 的目的是什么？空白通常不突出显示。

塔克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:27:32.927

你应该看看[xtext](http://www.eclipse.org/Xtext/)。这使得领域特定语言的实现比从头开始实现整个 Eclipse 编辑器模型容易得多。

# sql - pl/sql 不适用于 %rowtype

> ID：12867410
> 
> 赞同：1
> 
> 时间：2012-10-12T21:33:27.347
> 
> 标签：sql, plsql, rowtype

我想在 Oracle 10g 互联网环境上做一个简单的 PL/SQL 程序。该程序是：

```
DECLARE
stud_rec students%ROWTYPE;
last_name VARCHAR2:='Clinton';

BEGIN
    SELECT * INTO stud_rec FROM students WHERE student_id=100;
END; 
```

我有一个名为学生的表，里面有数据。问题是当我想在 SQL 命令窗口中运行它时，我收到了这条消息：

```
 ORA-06550: line 3, column 11:
  PLS-00215: String length constraints must be in range (1 .. 32767) 
```

我检查了语法，但找不到错误。有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T21:39:19.353

试试这个，我认为你需要指定 VARCHAR 的长度

```
last_name VARCHAR2(50) := 'Clinton'; 
```

# jquery - 边框颜色从左到右动画

> ID：12867411
> 
> 赞同：1
> 
> 时间：2012-10-12T21:33:28.470
> 
> 标签：jquery, css

> **可能重复：**
> [悬停时的jQuery动画边框颜色？](https://stackoverflow.com/questions/813493/jquery-animate-border-color-on-hover)

好的，我目前有此代码。

```
$(document).ready(function(){
   $('.animation').mouseover(function(){
        $(this).animate({ borderTopColor: "#000" }, 'fast');
   });
}); 
```

但我试图实现的是为底部边框颜色设置动画，该颜色将从左到右淡入淡出。例如，每当用户将鼠标悬停在此 .animation 上时，该元素的底部边框颜色应从左到右淡入或淡出，例如从该颜色 #fff 到 #000。

希望这里的人能想出如何做到这一点。谢谢你。

我对任何建议、建议和建议持开放态度。

这可以通过 jquery 或 css3 来完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:39:18.550

您可以为此使用简单的 css ..

尝试这个

```
​&lt;div id="div1">

​&lt;/div>​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
div
{
    width:100px;
    height:100px;
    background-color: orange;
}

#div1
{
    border-left: 2px solid red;
}

#div1:hover
{
    border-left: 0;
    border-right: 2px solid red;
} 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/ZrTZA/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:43:05.483

据我所知，你将不得不伪造它——在元素底部添加一个新的 div，给它一个与边框高度相同的高度，然后查看[这里](http://snook.ca/archives/javascript/jquery-bg-image-animations)（[演示页面](http://snook.ca/technical/jquery-bg/)）示例代码来做到这一点。

演示页面上的示例 B 看起来（基本上）正是您想要的。将背景图像更改为渐变而不是纯色，您应该获得从左到右的颜色变化效果。

# timeout - rcurl 网页抓取超时退出程序

> ID：12867416
> 
> 赞同：2
> 
> 时间：2012-10-12T21:33:48.450
> 
> 标签：timeout, scrape, rcurl

我正在使用循环并*`rcurl`*从多个页面中抓取数据，这在某些时候似乎工作正常，但由于服务器没有响应而超时时失败。

我正在使用一个`timeout=30`捕获超时错误的程序，但是程序在超时后停止。我希望程序在发生超时时继续到下一页，但不知道该怎么做？

```
url = getCurlHandle(cookiefile = "", verbose = TRUE) 
```

这是我正在使用的导致超时的语句。如果有兴趣，我很乐意分享代码。

```
webpage = getURLContent(url, followlocation=TRUE, curl = curl,.opts=list( verbose = TRUE, timeout=90, maxredirs = 2)) 
```

伍德沃德

# php - 302 htaccess 从旧的 php 页面重定向到新的 url

> ID：12867419
> 
> 赞同：0
> 
> 时间：2012-10-12T21:34:21.377
> 
> 标签：php, .htaccess

假设我有一个旧 URL [http://abc.com/x.php?a=xyz&b=jkl](http://abc.com/x.php?a=xyz&b=jkl)我需要将所有请求重定向到页面 x.php 有查询字符串或没有到[http://xyz.com /X/](http://xyz.com/x/)

以下是[http://xyz.com根目录中的 .htaccess 文件](http://xyz.com)

```
# Turn on URL rewriting
RewriteEngine On

RewriteBase /

# Protect application and system files from being viewed
RewriteRule ^(application|modules|system) - [F,L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $0 !=server-status

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:37:49.150

在文档根目录的 htaccess 文件中，添加以下规则：

```
RewriteEngine On
RewriteRule ^/?x.php$ /x/? [L,R=302] 
```

请注意，如果您有规则要重写`/x/` ***回*** `/x.php`，这两个规则将发生冲突并导致内部循环。您可以通过包含以下内容来防止循环：

```
RewriteCond %{ENV:REDIRECT_STATUS} !200 
```

就在上面`RewriteRule`。

# apache-pig - 规范化猪脚本中的数据

> ID：12867420
> 
> 赞同：0
> 
> 时间：2012-10-12T21:34:24.937
> 
> 标签：apache-pig

我有以下数据集：

```
1,11,ab;cd;200

2,22,pq;rs 
```

我想要这个输出：

```
1,11,ab

1,11,cd

1,11,200

2,22,pq

2,22,rs 
```

如何在不使用任何 udf 的情况下在 Pig 中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:38:57.670

你可以这样做：

```
A = load '....' using PigStorage(',') as (x,y,data : chararray);
SPLT = foreach A generate x, y, FLATTEN(STRSPLIT(data,';'));
X_tmp = foreach SPLT generate $0 as x, $1 as y, FLATTEN(TOBAG($2..$20)) as term; -- pivots the row
X = filter X_tmp by term is not null; -- this removes the extra bag rows when title was split in less than 20 terms 
```

假设数据字符串中的元素不会超过 20 个。如果你有更多，而不是增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T00:27:03.117

**尝试这个**

```
 A = load 'data' using PigStorage(',') as (x,y,data:chararray);
    SPLT = foreach A generate x, y, FLATTEN(STRSPLIT(data,';',3)) as (a,b,c);
    grp = group SPLT by (x,y);
    res = foreach grp generate group, FLATTEN(SPLT);
    out = foreach res generate FLATTEN(group), FLATTEN(TOBAG(SPLT::a, SPLT::b, strong textSPLT::c)) as val;
    dump out; 
```

# list - Prolog：使用索引进行列表管理

> ID：12867435
> 
> 赞同：0
> 
> 时间：2012-10-12T21:35:33.150
> 
> 标签：list, prolog

我正在尝试编写一个谓词来根据公共索引在列表中添加元素。我到目前为止所做的当然不值得展示...... =（

预期的行为将类似于：

```
List = [ ]

add_to_list( List, Index1, Param1, Value1 )
List = [
    [ Index1, [ Param1, Value1 ] ]
]

add_to_list( List, Index1, Param2, Value2 )
List = [
    [ Index1, [ Param1, Value1 ], [ Param2, Value2 ] ]
]

add_to_list( List, Index2, Param3, Value3 )
List = [
    [ Index1, [ Param1, Value1 ], [ Param2, Value2 ] ],
    [ Index2, [ Param3, Value3 ] ]
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:56:39.790

好吧，这种行为是不可能的（除非我们用类似的东西将 prolog 破解成碎片`setarg/3`）。（有关更多详细信息，请检查[破坏性与单一分配](https://secure.wikimedia.org/wikipedia/en/wiki/Destructive_assignment)）

一个非常相似的行为是：

```
List0 = [ ]

add_to_list( List0, Index1, Param1, Value1, List1)
List1 = [
    [ Index1, [ Param1, Value1 ] ]
]

add_to_list( List1, Index1, Param2, Value2, List2)
List2 = [
    [ Index1, [ Param1, Value1 ], [ Param2, Value2 ] ]
]

add_to_list( List2, Index2, Param3, Value3, List3)
List3 = [
    [ Index1, [ Param1, Value1 ], [ Param2, Value2 ] ],
    [ Index2, [ Param3, Value3 ] ]
] 
```

当然，因为我们不做单独的东西，`Param`我们`Value`可以将它们作为一个变量传递 `add_to_list(List1, Index, Val, List2)`：`Val = [Param, Value]`

一个简单的实现是：

add_to_list(L1, I, Val, L2):- member([I,Rest],L1) -> ( append(Val,Rest,FRest), select([I,Rest], L1, [I,Frest], L2)); 追加（[[I，Val]]，L1）。

但这很慢；将新元素添加到列表的头部要快得多（也更容易！）。

最后，根据我的经验，最好使用[关联列表](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.3%27,swi%28%27/doc/Manual/assoc.html%27%29%29)，它非常快并且可以轻松地为您的问题建模

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:30:59.023

我通过这样做得到了它：

```
add_to_list( [ ], Param, Val, Val2, [ [ Param, [ [ Val, Val2 ] ] ] ] ).
add_to_list( L, Param, Val, Val2, LNew ) :-
    member( [ Param, Vals ], L ) ->
    (   select( [ Param, Vals ], L, L2 ),
        not( member( [ Val, Val2 ], Vals ) ) ->
        (   append( Vals, [ [ Val, Val2 ] ], Vals2 ),
            append( [ [ Param, Vals2 ] ], L2, LNew )
        );  append( L, L2, LNew )
    );  append( L, [ [ Param, [ Val, Val2 ] ] ], LNew ). 
```

所以行为是：

```
List1 = []

add_to_list( List1, Index1, Param1, Value1, List2 )
List2 = [
    [ Index1, [ [ Param1, Value1 ] ] ]
]

add_to_list( List2, Index1, Param2, Value2, List3 )
List3 = [
    [ Index1, [ [ Param1, Value1 ], [ Param2, Value2 ] ] ]
]

add_to_list( List3, Index2, Param3, Value3, List4 )
List4 = [
    [ Index1, [ [ Param1, Value1 ], [ Param2, Value2 ] ] ],
    [ Index2, [ [ Param3, Value3 ] ] ]
] 
```

谢谢，thanosQR。

# algorithm - 算法：在一行中找到峰值

> ID：12867437
> 
> 赞同：2
> 
> 时间：2012-10-12T21:35:45.177
> 
> 标签：algorithm, language-agnostic

给定`n`整数，排列成一行，展示一种可以找到一个峰值的有效算法。一个峰值是一个不小于它旁边的两个数字的数字（或者它旁边的一个数字，如果它在行尾。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:35:45.177

存在`O(log n)`算法。我们使用分而治之。

```
find_peak(lo,hi):
  mid = (lo+hi)/2
  if A[mid] >= A[mid-1], A[mid+1] return mid
  if A[mid] < A[mid-1] 
    return find_peak(lo,mid-1) // a peak must exists in A[1..mid-1]
  if A[mid] < A[mid+1]
    return find_peak(mid+1,hi) // a peak must exists in A[mid+1..hi] 
```

# ios - 用动画向左/向右滑动两个 UIView 并不精确

> ID：12867443
> 
> 赞同：0
> 
> 时间：2012-10-12T21:36:31.377
> 
> 标签：ios, animation, uiview

我在为两个 UIView 左右设置动画时遇到问题。它基本上是一个推/流行风格的动画。问题是，它们有时不会粘在一起，并且它们之间的背景颜色（垂直线）是可见的。这不会每次都发生，但这很烦人，我不知道我做错了什么。

编辑：这只发生在实际设备上。在 iOS 模拟器（常规或视网膜）上，垂直线在任何时候都不可见，并且动画非常精确。

简而言之，这是我的代码：

```
UITableView *table1 = ...
UITableView *table2 = ...
table1.center = onScreenCenter; // This is the center of the screen
table2.center = leftOffScreenCenter; // This is the on screen center - width of the table2
CGPoint rightOffScreenCenter = ... // The right offscreen

[UIView animateWithDuration:kSearchBarAnimationDuration
                          delay:0
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^{
                         table1.center = rightOffScreenCenter;
                         table2.center = onScreenCenter;
                     } completion:nil]; 
```

# c - 二维字符数组的内存分配

> ID：12867448
> 
> 赞同：1
> 
> 时间：2012-10-12T21:37:02.447
> 
> 标签：c, memory-management, multidimensional-array

所以我需要在一个单词字典中扫描，最大长度为 19 并动态分配内存来设置字典数组的大小。我被困在如何做到这一点上。

```
fscanf(ifp, "%d", &numwords); //Number of words in dictionary

char ** dictionary;

for(i = 0; i < numwords; i++){
    for(j = 0; j < 20; j++){
        dictionary[i][j] = (char *) malloc(20 * sizeof(char));
        fscanf(ifp, "%s", &dictionary[i][j]);
        //printf("%s\n", dictionary[i]); //tests that the letter is read in correctly
    }
} 
```

我不知道出了什么问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:38:15.717

您需要分配内存来保存以下列表`char*`：

```
dictionary = malloc(sizeof(char*) * numwords); 
```

当你分配`char`数组时：

```
dictionary[i] = malloc(20); /* No [j] */ 
```

请注意，这`sizeof(char)`是保证的，`1`因此可以从`malloc()`参数中省略它。读取字符串时，通过指定允许的最大宽度来防止缓冲区溢出：

```
fscanf(ifp, "%19s", dictionary[i]); 
```

对内循环没有要求。程序需要`numwords`从文件中读取，只需要外层`for`。

检查函数的返回值（例如`malloc()`不返回并返回预期分配的数量）。`NULL``fscanf()`

# unicode - 谷歌计算器中的特殊字符

> ID：12867450
> 
> 赞同：2
> 
> 时间：2012-10-12T21:37:05.480
> 
> 标签：unicode, terminal, google-api, osx-mountain-lion, calculator

在[上一个问题](https://stackoverflow.com/questions/12827781/google-calculator-thousands-separator-special-character)中，有人告诉我 Google 会将 UTF-8 编码的响应传递给查询。这解决了不间断空格 (A0) 在通过 curl 传递到我的终端后被混淆的问题。这是通过将 curl 输出传递到 inconv 并转换为 UTF-8 来解决的。然而，即使有了这个解决方案，我仍然得到一些奇怪的输出。

考虑以下 2 m 到英尺的转换：

[http://www.google.com/ig/calculator?hl=en&q=2%20m%20in%20feet](http://www.google.com/ig/calculator?hl=en&q=2%20m%20in%20feet)

这是我在浏览器和其他地方看到的输出：

```
{lhs: "2 meters",rhs: "6.56167979 feet (6 feet 6\x3csup\x3e47\x3c/sup\x3e\x26#8260;\x3csub\x3e64\x3c/sub\x3e inches)",error: "",icc: false} 
```

预期的输出是：

```
{lhs: "2 meters",rhs: "6.56167979 feet (6 feet 6 47/64 inches)",error: "",icc: false} 
```

我可以使用正则表达式或其他解决方案进行文本替换，但我想知道这里发生了什么。有什么见解吗？

我正在运行 Mac OS X Mountain Lion 10.8.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:13:07.750

通过 curl 访问的 Google 计算器正在返回 JSON。Google 正在使用 \xHH 表示法，因为这是 JSON 的标准。如果输出被发送到浏览器（或任何其他解析 HTML）而不是标准输出，则只需要一个好的 JSON 解码器。

让我们看看我们可以从命令行做什么来解析 JSON。

`echo -en $(curl -s 'http://www.google.com/ig/calculator?hl=en&q=4^22') > ~/temp.html`

这为我们提供了可以通过浏览器查看的有效 HTML，但我们需要将所有内容简化为可以通过标准输出显示的内容。

`echo -en "$(curl -s --connect-timeout 10 "http://www.google.com/ig/calculator?hl=en&q=2%20m%20in%20feet")" | sed -e 's/<sup>/ &/g' -e :a -e 's/<[^>]*>//g;/</N;//ba' | perl -MHTML::Entities -ne 'print decode_entities($_)' | iconv -f ISO-8859-1 -t UTF-8`

对于 echo 命令，-e 解释转义符，例如 \x3e、\x3c 和 \x26（分别为 <、> 和 &），而 -n 抑制 echo 通常会添加的换行符。

sed 的管道在所有（上标）标记之前添加一个空格，然后删除所有 HTML 标记。

然后到 perl 的管道解码所有 HTML 实体，例如 ⁄ 到 ⁄（分数斜线）。 [http://en.wikipedia.org/wiki/Html_special_characters#Character_entity_references_in_HTML](http://en.wikipedia.org/wiki/Html_special_characters#Character_entity_references_in_HTML)

iconv 的管道将 ISO-8859-1 输出转换为预期的 UTF-8。这是最后完成的，因为 perl 行可以生成需要正确转换的 UTF-8 实体。

这仍然存在区分分数和指数的问题（47/64，其中 47 包含在上标标签中，64 包含在下标标签中，10^13 ，其中 13 包含在上标标签中）。

我们可能会变得非常愚蠢，并制作一个非常长的 sed 行来解析所有特殊字符（以下是 AppleScript 中的，因此您可以看到语法变得多么荒谬）：

`set jsonResponse to do shell script "curl " & queryURL & " | sed -e 's/[†]/,/g' -e 's/\\\\x26#215;/*/g' -e 's/\\\\x26#188;/ 1\\/4/g' -e 's/\\\\x26#189;/ 1\\/2/g' -e 's/\\\\x26#190;/ 3\\/4/g' -e 's/\\\\x26#8539;/ 1\\/8/g' -e 's/\\\\x26#8540;/ 3\\/8/g' -e 's/\\\\x26#8541;/ 5\\/8/g' -e 's/\\\\x26#8542;/ 7\\/8/g' -e 's/\\\\x3csup\\\\x3e\\([0-9]*\\)\\\\x3c\\/sup\\\\x3e\\\\x26#8260;\\\\x3csub\\\\x3e\\([0-9]*\\)\\\\x3c\\/sub\\\\x3e/ \\1\\/\\2/g' -e 's/\\\\x3csup\\\\x3e\\([0-9]*\\)\\\\x3c\\/sup\\\\x3e/^\\1/' -e 's/( /(/g'"`

†（匕首）字符在 MacRoman 集（Macintosh 编码）中是十进制的 160。在十六进制中，这是 0xA0 或 \xA0 并以 UTF-8 编码编码为非中断空间，这是谷歌正在传递的。所以在 AppleScript 中，为了替换 UTF-8 中的非中断空格，由于 Macintosh 编码，我们必须使用 †（匕首）。

*   [http://en.wikipedia.org/wiki/Mac_Roman#Codepage_layout](http://en.wikipedia.org/wiki/Mac_Roman#Codepage_layout)
*   [http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)
*   [http://en.wikipedia.org/wiki/C1_Controls_and_Latin-1_Supplement](http://en.wikipedia.org/wiki/C1_Controls_and_Latin-1_Supplement)

sed 行还处理几个特殊的分数符号：http: [//tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html#fractions](http://tlt.its.psu.edu/suggestions/international/bylanguage/mathchart.html#fractions)

这个故事的寓意是，在处理 JSON 时，只需使用一个好的 JSON 解析器。

一个子道德是：不要使用 AppleScript 来处理 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:33:11.417

问题的公认答案[Google 计算器有官方 API 吗？](https://stackoverflow.com/questions/3491597/is-there-an-official-api-for-google-calculator)是负数，因此您似乎只需要尝试对其功能进行逆向工程。在这里，它似乎表示分数 47/64，因此分子 47 在`<sup>`标记内，分母 64 在`<sub>`标记内，然后`<`和`>`已使用`\xnn`符号进行转义，`nn`是字符的十六进制代码。这似乎没有多大意义，因为风格上的上标和下标是没有意义的，在 HTML 标记中这样做很奇怪，并且转义标签分隔符很奇怪。然而，主要问题是，有时，`<sup>`可能意味着上标使表达式成为指数，因此仅删除此类信息可能会扭曲信息。

# android - Android 应用程序在 Android 设备上运行一次时安装了 3 次

> ID：12867455
> 
> 赞同：0
> 
> 时间：2012-10-12T21:37:38.823
> 
> 标签：android, android-install-apk

在我的手机上运行我的应用程序时，它会安装 3 次，不知道为什么会这样，有人知道我该如何解决这个问题吗？

我的清单

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name=".MyTravelManagerActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity android:name=".Main"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".OpenMap"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:36:51.300

该应用程序仅安装一次。但是您在应用程序启动器中看到了 3 次。应用程序启动器中的每个图标对应于您的一项活动。这是由您为每个活动指定的意图过滤器引起的：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

意图过滤器表示可以启动活动，并且它的图标和相应的标签应该在应用程序启动器中可见。如果您按下启动器中的图标，您将启动相应的活动。通常，您在应用程序中只有一个这样的活动。

顺便说一句：Android 上的应用程序通过`AndroidManifest.xml`文件中指定的包来区分。因此，除非您更改软件包，否则您无法多次安装该应用程序。

# java - Java XSD 代码生成问题

> ID：12867463
> 
> 赞同：0
> 
> 时间：2012-10-12T21:38:23.147
> 
> 标签：java, xsd, xjc

我目前有一个看起来像这样的 XSD，

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="apiCategoryResponse">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="category"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="category">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="version"/>
        <xs:element ref="name"/>
        <xs:element ref="desc"/>
        <xs:element ref="id"/>
        <xs:element maxOccurs="unbounded" ref="subCategory"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="subCategory">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" ref="childCategory"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="version" type="xs:integer"/>
  <xs:element name="name" type="xs:NCName"/>
  <xs:element name="desc" type="xs:NCName"/>
  <xs:element name="id" type="xs:integer"/>
  <xs:element name="childCategory">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element ref="childCategory"/>
        <xs:element ref="desc"/>
        <xs:element ref="id"/>
        <xs:element ref="name"/>
        <xs:element ref="version"/>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

当我使用 XJC 生成 Java 代码时，ChildCategory 会生成类似这样的内容，

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "childCategoryOrDescOrId"
})
@XmlRootElement(name = "childCategory")
public class ChildCategory {

    @XmlElementRefs({
        @XmlElementRef(name = "name", type = JAXBElement.class),
        @XmlElementRef(name = "id", type = JAXBElement.class),
        @XmlElementRef(name = "version", type = JAXBElement.class),
        @XmlElementRef(name = "childCategory", type = ChildCategory.class),
        @XmlElementRef(name = "desc", type = JAXBElement.class)
    })
    protected List<Object> childCategoryOrDescOrId;

    /**
     * Gets the value of the childCategoryOrDescOrId property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the childCategoryOrDescOrId property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getChildCategoryOrDescOrId().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link JAXBElement }{@code <}{@link BigInteger }{@code >}
     * {@link JAXBElement }{@code <}{@link BigInteger }{@code >}
     * {@link JAXBElement }{@code <}{@link String }{@code >}
     * {@link ChildCategory }
     * {@link JAXBElement }{@code <}{@link String }{@code >}
     * 
     * 
     */
    public List<Object> getChildCategoryOrDescOrId() {
        if (childCategoryOrDescOrId == null) {
            childCategoryOrDescOrId = new ArrayList<Object>();
        }
        return this.childCategoryOrDescOrId;
    }

} 
```

问题是我不希望它成为 desc/id/name/etc 的列表。

我想要这些字段的单独设置器和获取器，而 childCategory 是一个列表，可以包含另一个 childCategory 列表以及它自己的 desc/name/version 等值。基本上，我希望从 XJC 自动生成显式 setter 和 getter。所有其他方法都失败了，我总是可以手动编写代码，但我想知道是否有一些技巧可以强制 XJC 按照我想要的方式生成代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:57:28.487

你为什么不做你为之做的同样的事情`category`

```
<xs:element name="childCategory">
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="desc" />
      <xs:element ref="id" />
      <xs:element ref="name" />
      <xs:element ref="version" />
      <xs:element ref="childCategory" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

# python - 帮助清除瓷砖的递归函数（视野）

> ID：12867465
> 
> 赞同：0
> 
> 时间：2012-10-12T21:38:28.870
> 
> 标签：python, recursion

我正在尝试自学python，并且在递归时遇到了困难。我已经完成了经典的递归函数（阶乘、斐波那契数......），但我将回顾旧代码并尝试将我的大部分迭代函数转换为递归函数以进行练习。

这是我撞到的墙：

不久前我做了一个地牢爬行者，我正在尝试替换一个用于显示精灵附近方块的 for 循环。因此，当放置精灵时，他/她会看到他/她所在的瓷砖以及相邻和对角线方块（总共 9 个，包括头像所在的那个）。构成房间的其他瓷砖被隐藏了。这我认为是视野半径 1。对于视野半径 2，我希望 char 看到半径为 1 的正方形以及与这些瓷砖相邻的所有瓷砖。当时我不知道如何使用 for 循环来做到这一点，所以我只实现了一个更简单的方案。

我觉得这个可见性函数可以递归编写，但我很难想出一个基本案例以及我的递归步骤是什么。我的 for 循环只是取了化身 pos 并在一个范围内迭代到化身 pos + 半径，我为 x,y 坐标做了这个。

至于将其转换为递归函数，我真的很困惑。我进行了许多搜索，试图获得领先，但只提出了复杂的主题，例如：使用递归阴影投射的 FOV，这远远超出了我的范围。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:02:41.497

我发现用文字表达递归很有帮助。该算法所说的基本上是“在半径 N 处可见的是从半径 N-1 处可见的”。就像，呃，边缘变大了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:54:34.213

像这样的东西怎么样：

```
def visible(pos, radius, seen):
    if radius == 1:
        # base case
        seen.add(...)
        yield ...
    else:
        for center in visible(pos, radius-1, seen):
            for x in visible(center, 1, seen):
                if x not in seen:
                    seen.add(x)
                    yield x 
```

`seen`将是一个`set`. 每次您`visible`“从外部”调用时，您都会提供一个空集：

```
visible(pos, radius, set()) 
```

该`seen`集合也可以被初始化以实现战争迷雾（或至少奇怪的看不见的方块；））......

# c# - 如何在未使用类的现有 C# 程序中使用自定义类？

> ID：12867466
> 
> 赞同：0
> 
> 时间：2012-10-12T21:38:39.113
> 
> 标签：c#, class

我是新来的，如果我一开始做的不对，请原谅我。

我有一个必须为课程创建的现有程序。该程序询问一个人的名字和姓氏以及他想订购多少个蛋糕，并且组框中的输出会显示一条感谢消息，其中包含该人的全名以及订购了多少个蛋糕以及蛋糕的总成本含税。下一个实验要求我修改程序，以便我可以使用自定义类来产生与前一个程序和新类相同的结果。我希望这是有道理的。以下是我原始程序的一部分。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Order_Cake
{
    public partial class frmOrderCake : Form
    {
        public frmOrderCake()
        {
        InitializeComponent();
        }

    private void frmOrderCake_Load(object sender, EventArgs e)
    {     
    }

    private void btnEnter_Click(object sender, EventArgs e)
    {
        lblThanks.Text = "Thank you" + (" ") + txtFirstName.Text + (" ") + txtLastName.Text + "!";
        txtCakesOrdered.Text = nudCakes.Value.ToString();
        txtTotalCost.Text = (20 * Convert.ToDouble(nudCakes.Value) * 1.13).ToString("C");
        grpOutput.Visible = true; 
    }
    private void btnClear_Click(object sender, EventArgs e)
    {
        txtFirstName.Clear();
        txtLastName.Clear();
        txtCakesOrdered.Clear();
        txtTotalCost.Clear();
        nudCakes.Value = 1; 
        grpOutput.Visible = false; 
    }
    private void btnExit_Click(object sender, EventArgs e)
    {
        this.Close(); 
    }
} 
```

}

对于我已经开始以下的课程之一。

```
namespace Order_Cake
{
    class Cost
    {
       private int basePrice = 0;
       {
           get
           {
               return basePrice;
           }
           set
           {
               basePrice = value;
           }
       }
   }
} 
```

当然，这将包括 tax 和 totalCost 等的类。我只是不知道如何将这个类合并到我的 Cake 程序中。任何帮助或建议将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:27:31.407

首先像这样写你的财产

```
namespace Order_Cake
{
    class Cost
    {
       public int BasePrice { get; set; }
       public double Tax { get; set; }
    }
} 
```

然后像这样使用它。

```
private void btnEnter_Click(object sender, EventArgs e)
{
    lblThanks.Text = "Thank you" + (" ") + txtFirstName.Text + (" ") + txtLastName.Text + "!";
    txtCakesOrdered.Text = nudCakes.Value.ToString();
    Cost obj=new Cost();
    obj.BasePrice = 20;
    obj.Tax=1.13;
    txtTotalCost.Text = (obj.BasePrice * Convert.ToDouble(nudCakes.Value) * obj.Tax).ToString("C");
    grpOutput.Visible = true; 
} 
```

这仅用于提示。根据需要进行必要的更改。

# php - php打印问题

> ID：12867476
> 
> 赞同：-4
> 
> 时间：2012-10-12T21:39:20.273
> 
> 标签：php

我正在尝试获取下面的代码行，以帮助我`<?php include('like.php'); ?>`仅在访问者未使用移动设备但似乎无法正常工作时在页面上编写“”。我不能说我做错了什么。

```
<?php
    if (screen > 699)
        print('like.php');

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:41:18.027

`screen.width`是一个 JavaScript 构造。PHP 不是 JavaScript。

由于 PHP 在服务器上运行，并且浏览器不会为每个请求提供客户端系统的规范，因此 PHP 无法使用这些信息，除非您使用 JavaScript 收集它，然后将包含数据的新请求发送到服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T01:05:28.950

我会使用 CSS 和 mediaquery 来解决这个问题。这在 STYLE 部分或 CSS 文件中。

例如。

```
@media screen and (max-width: 599px) { 
    .selector{display:none;}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:42:08.927

请参阅以下链接：[http](http://code.google.com/p/php-mobile-detect/) ://code.google.com/p/php-mobile-detect/这将有助于查找设备类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T21:47:11.600

PHP 中没有可以检测屏幕分辨率的本机函数。您需要运行一个 javascript 函数并将其传递给您的 php

# salesforce - 覆盖/删除视图上的默认字段

> ID：12867478
> 
> 赞同：0
> 
> 时间：2012-10-12T21:39:34.080
> 
> 标签：salesforce, apex-code, visualforce

当最终用户创建联系人视图时，他们不希望某些自动字段显示在所选字段部分中。他们希望为他们以后创建的所有新视图从默认值中删除标题和联系人所有者别名选择。

如何覆盖该设置？

默认字段是：

姓名

帐户名称

标题

电话

电子邮件

联系所有者别名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:15:21.740

没有设置可以让您更改从列表视图的编辑屏幕中选择的默认字段。充其量您可以训练用户从现有视图开始，编辑，然后执行“另存为”以克隆和修改现有视图。

# scala - 如何在 Scala 中创建多维向量？

> ID：12867480
> 
> 赞同：14
> 
> 时间：2012-10-12T21:39:38.083
> 
> 标签：scala, scala-collections

我想使用不可变索引多维数组。有意义的结构是 a `Vector`of `Vector`s。

```
scala> val v = Vector[Vector[Int]](Vector[Int](1,2,3), Vector[Int](4,5,6), Vector[Int](7,8,9))
v: scala.collection.immutable.Vector[Vector[Int]] = Vector(Vector(1, 2, 3), Vector(4, 5, 6), Vector(7, 8, 9)) 
```

只需指定维度就可以创建一个空数组，就像使用`Array.ofDim`.

```
scala> a = Array.ofDim[Int](3,3)
a: Array[Array[Int]] = Array(Array(0, 0, 0), Array(0, 0, 0), Array(0, 0, 0)) 
```

但是，没有`Vector.ofDim`, 功能，我找不到等价物。

不可变对象是否有等价`Array.ofDim`物？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-12T22:21:34.873

每个标准集合类都有一个带有工厂方法的伴随对象，包括`fill`. 举例：

```
Vector.fill(3, 3)( 0 ) 
```

请参阅[相关的 scaladoc](http://www.scala-lang.org/api/current/scala/collection/immutable/Vector$.html#fill[A](n1:Int,n2:Int)(elem:=>A):CC[CC[A]])。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-12T22:24:13.687

有一个名为的创建方法`tabulate`，可让您根据索引设置内容：

```
scala> Vector.tabulate(3,3){ (i,j) => 3*i+j+1 }
res0: scala.collection.immutable.Vector[scala.collection.immutable.Vector[Int]] =
Vector(Vector(1, 2, 3), Vector(4, 5, 6), Vector(7, 8, 9)) 
```

如果您只需要零（或其他一些常量），您可以使用`fill`：

```
scala> Vector.fill(3,3)(0)
res1: scala.collection.immutable.Vector[scala.collection.immutable.Vector[Int]] =
Vector(Vector(0, 0, 0), Vector(0, 0, 0), Vector(0, 0, 0)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-12T22:15:00.133

您可以使用`fill`：

```
scala> Vector.fill( 3 )( Vector.fill(3)(0) )
res1: scala.collection.immutable.Vector[scala.collection.immutable.Vector[Int]] = 
        Vector(Vector(0, 0, 0), Vector(0, 0, 0), Vector(0, 0, 0)) 
```

# ruby-on-rails - 评估控制器中每个 do 块内的迭代器

> ID：12867481
> 
> 赞同：1
> 
> 时间：2012-10-12T21:39:51.070
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试遍历由空格分隔的数组：

```
diff_attr = []

%w[name hours].each do |a|
  if @old_place.a != new_place[a.to_sym]
    diff_attr << a
  end
end 
```

我想比较两个不同对象的属性（名称和小时数）。现在，我收到一个未定义的方法“a”错误。现在， a 被评估为 @old_place 的方法而不是变量。

如何评估块内的迭代器以便进行比较：

`@old.place.name != new_place[:name]`

代替

`@old.place.a != new_place[:a]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:46:39.223

好吧，你可以像你正在做的那样做`new_place`（假设两者都是 ActiveRecord 对象）：

```
if @old_place[a] != new_place[a] 
```

或者，使用`Object#send`：

```
if @old_place.send(a) != new_place.send(a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:51:02.847

而另一种选择是不要害怕并在 Ruby 中使用 eval：

```
diff_attr = []

%w[name hours].each do |a|
  if eval("@old_place.#{a}") != new_place[a.to_sym]
    diff_attr << a
  end
end 
```

# c++ - C++ 牙签程序

> ID：12867482
> 
> 赞同：0
> 
> 时间：2012-10-12T21:39:59.323
> 
> 标签：c++

我的程序是用来玩牙签游戏的，我已经坚持了一段时间。目标是让计算机从 23 根牙签中取出牙签，而人类也会这样做。到目前为止，我的逻辑似乎不起作用。玩家可以拔出一定数量的牙签，它被从总数中取出，但是当计算机取出牙签时，它只需要一根牙签。我让程序说还剩多少，计算机取出多少。看来，既然计算机总是拿出一根牙签，那么栈中总还有一根牙签，这显然在数学上是不正确的。

```
#include <iostream>
#include <conio.h>
#include <cmath>

using namespace std;

int main()
{

int toothpicks = 23, human, comp;

cout<<"TOOTHPICKS!!!!!" <<endl;

while (toothpicks >0)
{
    cout<<"Human, take your toothpick(s)! But only between 1 and 3 toothpick(s), Thanks! ";
    cin>>human;

    toothpicks = toothpicks - human;
    cout<<toothpicks <<" toothpick(s) remaining" <<endl;

    if (toothpicks = 0)
    {
        cout<<"Human! You have prevailed!"<<endl;
        break;
    }

    if (toothpicks >4)
    {
        comp = 4 - human;   
        cout<<"The computer took " <<comp <<" toothpick(s)" <<endl;
    }
    else if (toothpicks = 2)
    {
        comp = 1;
        cout<<"The computer took " <<comp <<" toothpick(s)" <<endl;
    }
    else if (toothpicks = 3)
    {
        comp = 2;
        cout<<"The computer took " <<comp <<" toothpick(s)" <<endl;
    }
    else if (toothpicks = 4)
    {
        comp = 3;
        cout<<"The computer took " <<comp <<" toothpick(s)" <<endl;
    }
    else if (toothpicks = 1)
    {
        comp = 1;
        cout<<"The computer took " <<comp <<" toothpick(s)" <<endl;
    }

    toothpicks = toothpicks - comp;
    cout<<toothpicks <<" toothpick(s) remaining";

    if (toothpicks = 0)
    {
        cout<<"The computer has prevailed!"<<endl;
        break;
    }

}

_getche();
return 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:47:15.460

使用 == 进行比较，而不是 =（执行赋值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:52:25.983

这可能是您的实际代码吗？您只是忘记了在 C++ 中`=`设置值并`==`进行比较！！在行中`if (toothpicks = 0)`，您将值重置`toothpicks`为 0，并且由于 C++ 认为 0 为 false，它将忽略此行并继续其他行，如果它们都有相同的问题！所以你应该替换`=`为`==`并说`if (toothpicks == 0)`或`else if (toothpicks == 2)`

# spring - 每次我打个休息电话时，Spring/Jersey 都会创建新的服务对象

> ID：12867484
> 
> 赞同：2
> 
> 时间：2012-10-12T21:40:20.673
> 
> 标签：spring, rest, jersey

每次我调用 localhost:8080/user/1 时，它都会创建一个新的用户服务对象，而不是使用在服务器启动期间创建的对象。我正在使用带有 Spring 的 Jersey。

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd"
    default-autowire="byName"
    >

<bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>
 <context:annotation-config/>
<context:component-scan base-package="com.gigenginecore.platform.dataaccess.impl" /> 
    <context:component-scan base-package="com.gigengine.dataaccess"/>
    <context:component-scan base-package="com.gigengine.dataaccess.impl"/> 
    <context:component-scan base-package="com.gigenginecore.platform.service" /> 
    <context:component-scan base-package="com.gigengine.service" />  
    <context:component-scan base-package="com.gigenginecore.provider" />   

</beans> 
```

///// UserService 类的代码片段，我什至试图强制范围为单例。

```
@Service 
@Scope("singleton") 
@Path("/user")
public class UserService extends AbstractUserService {

///from my web.xml
<servlet>
        <servlet-name>jersey-servlet</servlet-name>
         <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
         <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>   
           <param-value>com.gigengine.service,com.gigenginecore.platform.service, com.gigenginecore.provider</param-value> 
        </init-param> 
        <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
        </init-param> 
        <load-on-startup>1</load-on-startup>
    </servlet> 
    <servlet-mapping>
        <servlet-name>jersey-servlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping> 
```

///// 所有 DAO 在启动时都被正确实例化并注入到用户服务类中，但是当我调用服务端点本身时，它会创建一个新的用户服务类，其中 DAO 为空。

我需要做些什么来获取启动时创建的那个吗？不知道为什么当它是“Spring”单例时它会创建一个新实例。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T19:53:36.853

在使用带有 Spring 的 Jersey 时使用`com.sun.jersey.spi.spring.container.servlet.SpringServlet`而不是。`com.sun.jersey.spi.container.servlet.ServletContainer`见[http://jersey.java.net/nonav/apidocs/latest/jersey/contribs/jersey-spring/com/sun/jersey/spi/spring/container/servlet/package-summary.html](http://jersey.java.net/nonav/apidocs/latest/jersey/contribs/jersey-spring/com/sun/jersey/spi/spring/container/servlet/package-summary.html)

# java - 跟踪tomcat6 webapps日志

> ID：12867485
> 
> 赞同：0
> 
> 时间：2012-10-12T21:40:30.233
> 
> 标签：java, logging, websocket, tomcat6

我在 tomcat6 上安装了一个 webapp，但它不能正常工作（更具体地说是 jwebsocket-1.0）。过去，我将此服务器作为 java 命令运行`java jwebsocketserver.jar`，并且在控制台上获得了良好的日志。我想认为它在tomcat上运行时确实会将某种日志转储到文件中。有没有办法找到那个文件？它可能在任何默认位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:46:21.663

它应该存在于`CATALINA_HOME/logs`（Tomcat 安装目录/日志）文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:47:50.227

```
Logs/catalina.out 
```

Tomcat 日志可以在上面的文件中找到。

# java - 在其他项目中重用 Cucumber-JVM 步骤定义

> ID：12867492
> 
> 赞同：7
> 
> 时间：2012-10-12T21:41:36.467
> 
> 标签：java, cucumber-jvm

如何在其他项目中重用 Cucumber-JVM 步骤定义来测试一些典型的 Web 操作。关键是我已经创建了一些 java 项目，只是使用典型场景操作的步骤定义实现，例如：

```
When I follow the link "*some_link*"
Then I should see following content "*some_content*" on page 
```

而且我想在其他项目中重用这些定义（包括在类路径中），只是为了编写自己的简单场景。但是当我运行场景（作为 JUnit 测试）时，Cucumber 找不到步骤定义。当我尝试扩展 Step Definitions 类时，它给了我一个错误，我无法扩展 Step Definitions 类。那么，是否可以重用步骤定义，如果可以，那么如何重用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T12:54:23.580

嗯，我找到了解决方案。这看起来很容易。

有注释 @CucumberOptions 有参数“胶水”。使用此参数指向具有步骤定义的基本包会强制 Cucumber 在该基本包中进行搜索。测试运行器将如下所示：

```
@RunWith(Cucumber.class)
@CucumberOptions(glue = { "com.example.stepdefspackage" })
public class Run{
} 
```

# eclipse - 安装 R CMD 后，R 帮助未在 Eclipse 中更新

> ID：12867494
> 
> 赞同：3
> 
> 时间：2012-10-12T21:41:38.760
> 
> 标签：eclipse, r, statet

我正在 Eclipse 中开发一个 R 包。虽然我是这个环境的新手，但它很棒。

但我面临的一个问题是，在检查并在 Eclipse 中构建后运行 R CMD install 后，如果我在 Eclipse 的 R 控制台中输入，

```
library(mypackagename)
?mypackagename 
```

Eclipse 仍然显示旧的帮助。我已经尝试过重新启动，重新启动等徒劳无功。如果我在 Windows 中运行 R，它会显示包的正确帮助。我想知道发生了什么事。

我怀疑 Eclipse 有自己的 R 帮助缓存，但找不到如何删除它。

**更新**如@JimM 的回答所示，您应该选择以下来更新 R 帮助。

`"R console View menu" -> R environment -> Index completely`

这将需要 2-3 分钟，但我发现没有其他方法可以更新 R 帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:10:13.977

如果您使用的是 StatET 插件，有几种方法可以更新 R 环境。

首先，要手动更新 R 环境，在 StatET 透视图的控制台窗口中，右上角有一个向下的三角形。如果单击并按住三角形，则在 R 环境下可以选择“完全索引”或“索引更改”。如果您选择“完全索引”，它将重建整个 R 索引/帮助缓存。

或者，在 Preferences > StatET > Run/Debug > R Environments 下，有一个选项可将 R Environment 索引更新为“自动检查和更新”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-05T11:43:26.990

我也为此感到沮丧。只有在 Eclipse 的 StatET 插件中，我的包的在线帮助没有更新；来自 Rconsole 或 Rgui。我发现确保在您重新加载软件包时帮助自动更新的一个好方法是提高您的说明文件中的版本号。一旦您放入更新的包，R 环境就会自动更新，但不幸的是，StatET 似乎对 R-help 感到困惑，因此您仍然需要在 Eclipse 中重新启动 R 控制台。

# nuget - 多框架 NuGet 构建，带有用于内部依赖管理的符号

> ID：12867495
> 
> 赞同：20
> 
> 时间：2012-10-12T21:41:45.670
> 
> 标签：nuget, nuget-package, multiplatform

也许我在这里挑战极限，但我迫切希望利用 NuGet 来缓解我发现自己陷入的 DLL 地狱。

我们有 4 种主要产品，它们都存在于相互关联的 Mercurial 存储库中。他们所有人都“共享”了 3 个核心组件，然后其他所有内容都几乎是特定于产品的。现在管理起来变得非常困难，因为一个产品已经升级到 .NET 4.0 并且正在使用需要 .NET 4.0 的外部依赖项，而另一个产品由于我什至不想进入的原因被困在 .NET 3.5 中。

因此，我们失去了融合产品之间差异的能力。

为了修复它，我想取出 3 个主要程序集，并将它们变成具有自己发布周期的自己的项目，并注意确保它们可以针对 .NET 3.5 和 4.0 进行编译，然后将它们变成包含多个框架版本的 NuGet 包。

但是，我也希望开发人员能够浏览这些项目的来源。

所以我设置了一个[私有 NuGet 服务器](http://haacked.com/archive/2011/03/31/hosting-simple-nuget-package-feed.aspx)和一个[私有 SymbolSource 服务器](http://www.symbolsource.org/Public/Blog/View/2012-03-13/Releasing_the_community_edition_of_SymbolSource)。然后我小心地将所有存储库中的所有更改合并在一起，并丢弃了除我的核心程序集之外的所有内容。然后我煞费苦心地手工编辑了 .csproj 文件，以便每个项目都有 3.5 和 4.0 的平台目标而不是 AnyCPU 平台，它们指定条件常量（用于控制特定于平台的功能，如 System.Dynamic）并设置框架版本。

然后我为“3.5 Debug”、“3.5 Release”、“4.0 Debug”和“4.0 Release”设置了解决方案配置。每一个都针对适当的配置（调试或发布）和平台（3.5 或 4.0）。

我可以在 Visual Studio 中为任何平台构建一切正常的东西。现在我在谈到 NuGet 时遇到了一个问题，因为有两种方法可以创建一个包，并且都有一个弱点，除非我遗漏了一些东西：

**按项目文件打包**

```
nuget pack MyProject.csproj -Build -Symbols -Version <insert-from-build-server> -Properties "Configuration=Release;Platform=3.5;" 
```

这样做的问题是：

*   在构建和打包 3.5 版本时，输出显示“为目标框架 '.NETFramework,Version=v4.0' 构建项目”。
*   如果我解压缩生成的包，则程序集所在的位置`lib\net40`是错误的。
*   我不认为有任何方法可以以这种方式打包 2 个框架目标，您必须以另一种方式使用文件夹和约定。
*   我愿意接受您不能将框架打包在一起并制作 2 个名为 MyProject（我会做为 4.0）和 MyProject.V35 的包......但是我不知道如何拥有相同的项目和 nuspec并以不同的 id 结束 2 个不同的结果。

**按 Nuspec 文件打包**

使用这种方法，我必须自己完成所有的 msbuilding，然后进行一堆文件复制来设置文件夹结构，例如

```
* MyProject.nuspec
* net40
    * MyProject.dll
    * MyProject.pdb
* net35
    * MyProject.dll
    * MyProject.pdb 
```

然后我可以运行`nuget pack MyProject.nuspec`，但是没有与符号一起使用的源，因为没有 .csproj 文件，NuGet 无法确定从哪里获取所有源文件，而且我没有看到任何有关如何操作的文档这也使用目录约定。

**所以我的问题是：**

1.  有没有办法将源文件添加到基于约定的包中？
2.  有没有办法用不同的 id 将基于项目的包打包两次？
3.  还有其他可能我没有考虑过的途径吗？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-17T14:44:33.173

Xavier 的回答将我引向了正确的方向，也为我的 Google 搜索提供了信息。我并不完全了解文件声明，当沿着这些思路进行搜索时，我发现了 Joshua Flanagan 的帖子[Tips for building NuGet packages](http://lostechies.com/joshuaflanagan/2011/06/23/tips-for-building-nuget-packages/)，非常棒。Xavier 和 Joshua 一起教会了我一些事情：

1.  您不必为了构建包而组装符合约定的文件树。使用 file 元素选择文件并将它们定位到组装的 NuGet 包中的目标目录要好得多。
2.  NuGet 的 -Symbols 标志不仅适用于打包 .csproj 文件。当您确实在文件上使用它时`.csproj`，当然，这就是它如何确定如何打包所有源文件的方式。但是您也可以通过文件元素在包含源`-Symbols`的文件上使用。`.nuspec`普通的 NuGet 包不会包含 src 目录，但 Symbols 包会包含。

所以现在，让我描述一下我的 CI 服务器上发生的构建过程：

1.  使用“3.5 Release”解决方案配置构建解决方案。
2.  使用“4.0 Release”解决方案配置构建解决方案。
3.  使用 ILMerge.exe 内部化一些程序集。我有这些输出（例如）`bin\Release-3.5\merged`所以我不必在合并中使用它之前将目标程序集重命名为 temp.dll。
4.  `.nuspec`在 Powershell 中构建包。

这是打包命令：

```
nuget pack src\MyProject\MyProject.nuspec -OutputDirectory .\output -Build -Symbols -Version $Version 
```

请注意，$Version 是从构建服务器传入的，因此我可以将其内部版本号用作版本的最后一部分。

这是 .nuspec 文件：

```
<?xml version="1.0"?>
<package>
    <metadata>
        <id>MyProject</id>
        <version>0.0.0</version>
        <title>MyProject</title>
        <authors>David Boike</authors>
        <owners>David Boike</owners>
        <requireLicenseAcceptance>false</requireLicenseAcceptance>
        <description>MyProject</description>
        <releaseNotes></releaseNotes>
        <copyright>Copyright 2012</copyright>
        <tags>my tags</tags>
    </metadata>
    <files>
        <file src="bin\Release-4.0\merged\MyProject.dll" target="lib\net40" />
        <file src="bin\Release-4.0\merged\MyProject.pdb" target="lib\net40" />
        <file src="bin\Release-4.0\MyProject.xml" target="lib\net40" />
        <file src="bin\Release-3.5\merged\MyProject.dll" target="lib\net35" />
        <file src="bin\Release-3.5\merged\MyProject.pdb" target="lib\net35" />
        <file src="bin\Release-3.5\MyProject.xml" target="lib\net35" />
        <file src="**\*.cs" target="src" />
    </files>
</package> 
```

请注意，我已经从我的 nuspec 中删除了很多信息量更大的元素，因为这对于像这样的内部项目并不重要。

结果是我的私有 NuGet 服务器的一个包，其中包含 .NET 3.5 和 4.0 程序集的 DLL、PDB 和 XML 文档，然后是我的私有 SymbolServer 的单独符号包，其中包括上述所有内容以及源代码。[使用NuGet 包资源管理器](http://nuget.codeplex.com/releases/view/59864)很容易查看，我**强烈**建议您下载它。

最后，我测试了所有内容，并使用[symbolsource.org 上建议的 Visual Studio 设置](http://www.symbolsource.org/Public/Home/VisualStudio)（除了我自己的私有符号服务器），我能够调试代码并轻松进入源代码。

再次感谢 Xavier 带领我走上正确的道路！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-12T22:02:58.327

你知道还有*第三种*选择吗？以 csproj 文件为目标时，它还将查找与您的项目文件同名的 nuspec 文件（myProject.csproj --> myProject.nuspec）。这意味着您可以通过将其定义到 nuspec 文件中来将额外的元数据添加到生成的包中，同时仍然以您的 csproj 文件为目标。本质上，您最终会得到一个包含来自您的 csproj 文件和 nuspec 文件的合并元数据的包。

在您的特定场景中，如果您想打包同一项目的多个平台构建，您确实必须先构建这些项目，然后再使用 nuspec 打包。

我建议您**创建两个项目**，一个针对 NET35，另一个针对 NET40，并将文件作为链接添加到其中一个项目中。因此，您可以构建这两个项目，并**使用 nuspec 文件将所有输出打包到一个 NuGet 包中**。

现在对于符号，我认为您可以有第二个 nuspec 文件（例如 myProject.symbols.nuspec），您可以在其中使用通配符添加项目的所有内容（源等），类似于下面显示的内容。

```
<file src="myProject35\**\*.cs" target="src" />
<file src="myProject40\bin\Release\*.dll" target="lib\net40" />
<file src="myProject40\bin\Release\*.pdb" target="lib\net40" />
<file src="myProject35\bin\Release\*.dll" target="lib\net35" />
<file src="myProject35\bin\Release\*.pdb" target="lib\net35" /> 
```

希望这有助于或至少为您提供一些信息以找到出路:)

干杯，泽维尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T08:56:37.497

查看 NuGet 2.5 中与框架版本相关参考相关的新功能：http: [//docs.nuget.org/docs/release-notes/nuget-2.5](http://docs.nuget.org/docs/release-notes/nuget-2.5)

您可以选择在 csproj 文件中使用带有条件引用元素的构建配置（TargetFrameworkVersion 上的条件），然后在所有配置中运行您的构建，并为 net35 和 net40 生成输出，并在您的 nupkg 中选择引用目标。

# c - C中的巨大位数组/位图声明

> ID：12867496
> 
> 赞同：1
> 
> 时间：2012-10-12T21:41:51.590
> 
> 标签：c, bitmap

我正在尝试编写一个布隆过滤器来存储大约 80,000 个字符串......现在我猜测每个字符串可以是 2 个单词的长度。要存储 80,000 个字符串..我需要 80,000*2 = 16kBytes？

如果我必须存储 16kB = 16*1000*8 = 128,000 位，我至少需要 2^17=131,072 的位图。这就是我现在所拥有的

int main() {

```
char *str = "hello world";
int c = sizeof(unsigned char);
/*
 * declare the bit array
 */
unsigned char bit_arr[128000/c];
/*
 * couple of hash functions
 */   
unsigned int bkd = bkdrhash(str, strlen(str));
unsigned int rsh = rshash(str, strlen(str));
unsigned int jsh = jshash(str, strlen(str));

/* 
 * logic to set bit 
 * Access the bitmap arr element
 * And then set the required bits in that element
 */
bit_arr[bkd/c] & (1 << (bkd%c));
bit_arr[rsh/c] & (1 << (rsh%c));
bit_arr[jsh/c] & (1 << (jsh %c)); 
```

}

有没有更好/最佳的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T00:06:20.323

你的数学是关闭的。80k * 2 = 160K。正如 Chris Dodd 所说，这些在普通台式机甚至智能手机上都相当小。如果您的应用程序是嵌入式的，或者如果您有其他大量分配，那么情况可能就不同了。iPhone 默认有 1 兆字节的堆栈和 1/2 兆字节的辅助线程。

在具有 N 位宽的总线的机器上，使用 N 位宽的整数可能有一个显着的优势。所以从字长抽象出来：

```
#define WORD_BYTES 4
#define BYTE_BITS 8
#define WORD_BITS (BYTE_BITS * WORD_BYTES)
#define BITSET_BITS (1u << 17)
#define BITSET_WORDS (BITSET_BITS / WORD_BITS)
typedef unsigned int WORD;
typedef WORD BITSET[BITSET_WORDS];
typedef WORD *BITSET_REF;
#define bit(N) (1u << (N))

/*  Allocate a bitset on the heap and return a reference to it. */
BITSET_REF new_bitset(void)
{
  return safe_malloc(sizeof(BITSET));
}

/* Arrange for these functions to be inlined by the compiler rather 
   than using fancy macros or open coding.  It will be better in 
   the long run. */
int is_set(BITSET_REF bitset, int n)
{
  return (bitset[n / WORD_BITS] | bit(n % WORD_BITS)) != 0;
}

void set(BITSET_REF bitset, int n) 
{
  bitset[n / WORD_BITS] |= bit(n % WORD_BITS);
}

void clear(BITSET_REF bitset, int n) 
{
  bitset[n / WORD_BITS] &= ~bit(n % WORD_BITS);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:46:01.007

除了各种明显的拼写错误之外，在堆栈上分配大型数组（作为局部变量）通常是一个坏主意。堆栈默认不会很大（通常只有大约 8MB 左右），虽然您可以重新配置以获得更大的堆栈，但通常最好在堆上分配大对象或使用静态分配。

也就是说，128K 绝对不是“巨大的”。从许多方面来看，它甚至都不是“大”的。关于它你唯一能说的就是它并不“小”

# mysql - MySQL - 在一张表中连接两个 id

> ID：12867504
> 
> 赞同：-1
> 
> 时间：2012-10-12T21:42:27.587
> 
> 标签：mysql

这个查询是关于在一个表中的两个 id 之间连接的东西。

表：雇主

```
Employee no.  Lastname  Firstname  reports to  title
111           Garret    Mike       333         sales manager
333           Frank     Savage     444         President 
```

我的问题是如何连接这个表？

该表应如下所示：

```
Employee no.  Lastname  Firstname  reports to(Supervisor No.)  Firstname   Lastame
111           Garret    Mike       333                         Frank       Savage 
```

我试过：

```
Select Employee no., Lastname, Firstname, reports to AS SuperVisorNumber, firstname, lastname From Employer
Where Employer.reports to =Employeeno.reports to 
```

这只是一个例子。不要担心拼写错误和一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:47:24.190

您需要将表连接到自身：

```
select e1.Employeeno,
  e1.lastname EmpLastName,
  e1.firstname empFirstName,
  e1.reportsto,
  e2.firstname MgrFirstName,
  e2.lastname MgrLastName
from employer e1
inner join employer e2
  on e1.reportsto = e2.employeeno 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b388f/3)

如果要查看所有员工，包括总裁，则将其更改为`LEFT JOIN`：

```
select e1.Employeeno,
  e1.lastname EmpLastName,
  e1.firstname empFirstName,
  e1.reportsto,
  e2.firstname MgrFirstName,
  e2.lastname MgrLastName
from employer e1
left join employer e2
  on e1.reportsto = e2.employeeno 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b388f/2)

如果您想使用更具描述性的表别名，则可以使用如下内容：

```
from employer employee
left join employer manager
  on employee.reportsto = manager.employeeno 
```

# jquery-ui - jquery选项卡不适用于多个完整日历

> ID：12867505
> 
> 赞同：0
> 
> 时间：2012-10-12T21:42:29.390
> 
> 标签：jquery-ui, fullcalendar

我假设我遗漏了一些微不足道的东西，但我无法让 jQuery 选项卡与多个 fullCalendar 实现一起使用。所有日历都会立即呈现并在下一个上方显示一个。

这是我能想出的最简化的 JSFiddle 来显示这个问题：

[JSFiddle](http://jsfiddle.net/rlrhett/L4kqC/23/)

我看到发布了一个类似的问题，但是将 $("..").fullCalendar("render") 添加到 .tabs({show: ...}) 的解决方案似乎基于 fullCalendar 的早期版本并且在任何案例没有奏效。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:04:09.353

这有效：http: [//jsfiddle.net/L4kqC/30/](http://jsfiddle.net/L4kqC/30/)

在您调用 tabs() 的元素内移动日历元素（根据 jQuery UI 文档：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)）

并在 fullcalendar() 之后调用 tabs() （可能是因为 fullcalendar 不喜欢在隐藏元素上实例化）。

# batch-file - 如何使用批处理浏览 .zip 文件的文件和子目录

> ID：12867507
> 
> 赞同：0
> 
> 时间：2012-10-12T21:42:50.020
> 
> 标签：batch-file, directory, zip

我意识到这个问题正在扩展批处理脚本的功能，但是有没有办法在不解压缩文件的情况下查看 .zip 文件的文件和目录？例如，假设有一个名为 .zip 的文件`myfile.zip`，并且有一个名为的子目录`status`，其中包含一个`status.xml`文件。有没有办法`status.xml`通过批处理脚本语言查看文件的内容？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:58:55.707

各种 zip 命令行实用程序将允许您列出 zip 存档的内容，但您说您还想查看内容。您可以通过从存档中提取文件来查看内容。[7zip](http://www.7-zip.org/)会按照上面提到的那样做。[Info-Zip](http://www.info-zip.org/)也有几个命令行实用程序可以执行相同的操作（您可以在[此处](http://www.willus.com/archive/zip64/)找到二进制文件）。

如果您想查看 status.xml 的内容而不必将文件写入磁盘，您可以使用 Info-Zip 中的[unzip.exe](http://www.info-zip.org/mans/unzip.html)命令行实用程序将其输出。

```
unzip -p myfile.zip status.xml | more
unzip -p myfile.zip status.xml > status.xml 
```

要使用相同的实用程序列出 zip 文件的内容：

```
unzip -l myfile.zip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T06:45:40.557

这是一种不需要外部工具的方法，[这里](https://stackoverflow.com/questions/28043589/how-can-i-compres-zip-and-uncopress-unzip-files-and-folders-with-batch-f)介绍了[zipjs.bat](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/jscript/zipjs.bat)：

```
call zipjs list -source C:\\myZip.zip -flat no
call zipjs list -source C:\\myZip.zip\\inZipDir -flat yes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T11:22:09.420

您可以使用 zip.js 从 中获取数据`myzip.file`，这里是部分代码：

```
zipFs.importHttpContent("1.zip", false, function() {
    var firstEntry = zipFs.root.children[0];
    console.log(zipFs)
    firstEntry.getData64URI("image/png",function(data) {
        console.log(data)
    });
}, onerror); 
```

=======================

源代码来自[http://gildas-lormeau.github.com/zip.js/](http://gildas-lormeau.github.com/zip.js/)

# css - 如何将事件绑定到 CSS

> ID：12867518
> 
> 赞同：0
> 
> 时间：2012-10-12T21:43:39.177
> 
> 标签：css, gwt

在 Google Web Toolkit 项目中，我在网站中有一个用于跟踪活动的按钮。我作为维护开发人员问这个问题，但对我正在修复的软件没有深入的了解。

我已经确定了用于图像的 CSS 类名称，它被放在一个按钮上。当按下按钮时，用户会跟踪活动。CSS 称为“trackActivity”。

我想知道按下该按钮时会调用什么代码。

我如何确定在哪里可以找到针对这个特定按钮注册代码的代码，我知道它的 CSS 类。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:16:12.170

如果您是开发新手，可能会尝试查看页面的源代码并搜索 trackActivity，那么 JavaScript 可能是内联的。如果没有打开 .js 文件，可能会在源代码的顶部找到并在那里搜索。这可能会提供更多信息......

# java - 在java中处理数组

> ID：12867519
> 
> 赞同：1
> 
> 时间：2012-10-12T21:43:57.780
> 
> 标签：java, arrays

所以我在java中使用数组，我遇到了一个问题，我试图列出一个长度为100的数组中出现次数最少的数字的位置，范围为0-9 . 我正在使用第二个数组来计算出现次数，直到我的最后一段代码都可以解决。

```
import java.util.Random;

public class Program6
{
public static void main(String[] args) 
{
    int[] bigArray = new int[100];
    int[] count = new int[10];

    for (int i = 0; i < bigArray.length ;i++ )
        {
            bigArray[i] = (int)(Math.random() * 10);    
        }
    for (int i = 0; i < bigArray.length ;i++ )  
        {   
            System.out.println(bigArray[i] + " ");  
        }
    for(int i = 0; i < bigArray.length; i++)
        {
            count[bigArray[i]]++;
        }

    for (int i = 0, j = 0; i < count.length ;i++, j++)  
            System.out.println("count for " + j +" is: " + count[i] + " "); 

    int min = count[0];
    int indexOfMin = 0;

    for ( int i =1; i < count.length; i++)
        {   if (count[i] < min ) 
                {
                    min = count[i];
                    indexOfMin = i; 
                }
        }

    System.out.println("\nThe number " + indexOfMin + " only appears " + min  + " times in the array.");
    System.out.println("It appears in the large array at: ");

    \\this guy right here 
    for ( int i = 0 ; i < bigArray.length; i++)
        {   if (bigArray[i] == min ) 
                {
                    System.out.println("bigArray["+ i + "]");

                }
        }

} 
```

}

它应该只列出阵列位置。但它返回的不仅仅是最低出现整数的位置，即使限定符使用变量*min*。

是什么赋予了？我错过了什么？

没有输入，返回的输出是

```
8 
 ..
4 
count for 0 is: 18 
count for 1 is: 6 
count for 2 is: 9 
count for 3 is: 9 
count for 4 is: 16 
count for 5 is: 4 
count for 6 is: 12 
count for 7 is: 8 
count for 8 is: 7 
count for 9 is: 11     

The number 5 only appears 4 times in the array.
It appears in the large array at: 
bigArray[3]
bigArray[6]
bigArray[10]
bigArray[23]
bigArray[25]
bigArray[39]
bigArray[44]
bigArray[48]
bigArray[49]
bigArray[50]
bigArray[51]
bigArray[57]
bigArray[58]
bigArray[67]
bigArray[84]
bigArray[99] 
```

这是完美的，除了 bigArray[] 列表。当数组等于最少出现的数字时，它应该只显示索引的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:52:21.600

您正在与数字的计数进行比较。请改用该号码。更新

```
//this guy right here 
for ( int i = 0 ; i < bigArray.length; i++)
    {   if (bigArray[i] == min ) 
            {
                System.out.println("bigArray["+ i + "]");

            }
    } 
```

`indexOfMin`用作_

```
`//this guy right here 
for ( int i = 0 ; i < bigArray.length; i++)
    {   if (bigArray[i] == indexOfMin) 
            {
                System.out.println("bigArray["+ i + "]");

            }
    } 
```

# c# - 使用 XDocument 查找返回零结果的元素

> ID：12867521
> 
> 赞同：1
> 
> 时间：2012-10-12T21:44:13.377
> 
> 标签：c#, xml, linq

我有一个 Web 服务方法，它解析 SVG 字符串以删除某些元素，然后将其返回。

这是 SVG 字符串的一部分：

```
<g id="wrapper">
    <g id="inner">
        <title>Layer 1</title>
...etc 
```

这是代码：

```
XDocument x2 = XDocument.Parse(svgString);

var inner = (from el in x2.Root.Elements("g")
    where (string)el.Attribute("id") == "inner"
    select el);

inner.Remove();

return x2.ToString(); 
```

首先，为什么是`Count`0 `inner`？

其次，这是“删除”元素的正确方法还是我需要`XDocument`在返回之前以某种方式保存它？

**编辑：**这是完整的 SVG 字符串：

```
 <?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"[]>
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    x="0px" y="0px" width="374.173px" height="524.409px" viewbox="0 0 374.173 524.409"
    enable-background="new 0 0 374.173 524.409" xml:space="preserve">

<g id="wrapper">
<g id="inner">
<title>Layer 1</title>
    <defs>
        <rect id="SVGID_1_" x="16.086" y="98.896" width="344.903" height="413.334" />
    </defs>
    <clipPath id="SVGID_2_">
        <use xlink:href="#SVGID_1_" overflow="visible" />
    </clipPath>
    <g clip-path="url(#SVGID_2_)">
        <defs>
            <rect id="SVGID_3_" x="-8.96" y="53.896" width="382.524" height="473.956" />
        </defs>
        <clipPath id="SVGID_4_">
            <use xlink:href="#SVGID_3_" overflow="visible" />
        </clipPath>
        <g transform="matrix(1 0 0 1 3.341429e-007 -1.529841e-006)" clip-path="url(#SVGID_4_)">

                <image overflow="visible" width="367" height="445" id="img11" xlink:href="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEARQBFAAD/7AARRHVja3kAAQAEAAAAHgAA/+4AIUFkb2JlAGTAAAAAAQMA EAMCAwYAAAlpAAAVEAAANsH/2wCEABALCwsMCxAMDBAXDw0PFxsUEBAUGx8XFxcXFx8eFxoaGhoX Hh4jJSclIx4vLzMzLy9AQEBAQEBAQEBAQEBAQEABEQ8PERMRFRISF...........">
            </image>
        </g>
    </g>
</g>
</g>

<g>
     <title>Layer 2</title>
     <text transform="matrix(1 0 0 1 61.3745 48.5068)"><tspan x="0" y="0" fill="#9FA1A4" font-family="'Noteworthy-Bold'" font-size="24">testing 123</tspan></text>
     </g>

</svg> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:23:20.510

`Elements`搜索直接子级，因此如果您的结构嵌套在某个根标记中，则的直接子级`x2.Root`将是`<g id="wrapper">`. 改用`Descendants`：

```
var inner = x2.Root.Descendants("g")
   .Where(e => e.Attribute("id").Value == "inner"); 
```

**编辑**：由于您的根节点定义了默认命名空间，因此您需要将其包含在查询中：

```
XNamespace n = @"http://www.w3.org/2000/svg";
var inner = x2.Root
    .Descendants(n + "g")
    .Where(e => e.Attribute("id") != null)
    .Where(e => e.Attribute("id").Value == "inner") 
```

这是处理 LINQ2XML 和命名空间问题的[有用链接。](http://msdn.microsoft.com/en-us/library/bb669152.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T21:52:16.290

您的 SVG 可能具有正确的命名空间，因此您必须在查询中指定它。检查这些网址：

*   [https://developer.mozilla.org/en-US/docs/SVG/Namespaces_Crash_Course](https://developer.mozilla.org/en-US/docs/SVG/Namespaces_Crash_Course)
*   [http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.aspx)

# zend-framework - 是否可以在预调度中禁用操作？

> ID：12867523
> 
> 赞同：1
> 
> 时间：2012-10-12T21:44:18.147
> 
> 标签：zend-framework, zend-controller

在我的控制器中，我有一个 preDispatch 方法，用于检查用户是否已登录。如果他没有，我将用户重定向到登录表单。

有什么方法可以禁用 preDispatch 方法中的某个操作？因为我不需要此操作的授权。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:48:32.517

在插件中，您可以检查是否正在调用该特定控制器和操作并允许请求继续。

您的插件中类似于以下内容的内容将起作用。

```
public function preDispatch(Zend_Controller_Request_Abstract $request) {
    // ...

    $controller = $request->getControllerName();
    $action     = $request->getActionName();

    if ($controller == 'login' && $action == 'login') {
        return ; // do not execute any more plugin code
    }

    // deny access and redirect to login form 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T12:00:47.807

我通常使用我的“空”控制器/动作来做到这一点：

```
public function preDispatch(Zend_Controller_Request_Abstract $request) {
if (!$logined){
 $request->setControllerName('empty')->setActionName('index');
return;
}
} 
```

它替代了您当前的操作。

# matlab - MATLAB对向量子集的计算，然后移位，重复

> ID：12867524
> 
> 赞同：1
> 
> 时间：2012-10-12T21:44:21.650
> 
> 标签：matlab

我需要取向量子集的最大值，然后在向量中移动。例如列向量

```
a=[1;2;3;4;5;6;7] 
```

如何获取`max(a(1:3))`, `max(a(2:4))`, ...`max(a(5:end))`并将所有输出放在另一个向量中？我可以使用 for 循环轻松地做到这一点，但是我正在寻找一种优雅的方式来使用 MATLAB 中的矩阵运算，最好是在一行代码中（尽管我意识到 MATLAB 中的矩阵运算可能会这样做正在使用 for 循环来实现）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:04:00.403

假设您的移位和窗口长度是恒定的（在您的情况下分别为 1 和 3），您可以使用[nlfilter](http://www.mathworks.com/help/images/ref/nlfilter.html)在向量上定义一般的滑动窗口操作：

```
a = [1:7];

fun = @(x) max(x(:));
b = nlfilter(a, [1 4], fun); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:10:15.050

对于您提供的示例：

```
b = max([a(1:end-2) a(2:end-1) a(3:end)], [], 2) 
```

我觉得还有一个更优雅、更通用的`accumarray`解决方案，虽然我现在没有时间想出一个:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T11:33:36.907

这是我的尝试。首先，定义“窗口”长度（在您的情况下为 3）。接下来，用于为每个窗口`bsxfun`的向量创建索引。`a`最后一步是一个简单的`max`函数调用：

```
flen = 3;
idx = bsxfun(@plus, [0:flen-1]', 1:numel(a)-flen+1);
max(a(idx)) 
```

它是通用的，即您可以更改窗口大小。

它是基本的 matlab，应该比 快`nlfilter`，虽然我现在无法验证它。

**编辑**这里是上述`bsxfun`解决方案和建议的简要性能比较`im2col`：

```
a = rand(10^7,1);

tic;
idx = bsxfun(@plus, [0:2]', 1:numel(a)-2);
m1 = max(a(idx));
toc

tic;
m2 = max(im2col(a,[3 1],'sliding'));
toc;

isequal(m1, m2)

Elapsed time is 0.839869 seconds.
Elapsed time is 1.797665 seconds.

ans =

 1 
```

`bsxfun`当然可以，而且速度快两倍多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T15:00:10.640

如果您有信号处理工具箱，则可以使用该`buffer`功能。它接受一个向量并生成一个矩阵，其中每一列都包含滑动窗口内的向量值。

在你的情况下：

```
>> a = (1:7)';
>> buffer(a,3,2,'nodelay')

ans =

     1     2     3     4     5
     2     3     4     5     6
     3     4     5     6     7 
```

然后，只需应用 MATLAB 的`max`函数来计算每列的最大值。总之，只需一行代码，

```
>> max(buffer(a,3,2,'nodelay'))

ans =

     3     4     5     6     7 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-13T17:08:30.567

感谢所有的帮助。这给了我一些想法，尤其是使用 nlfitler 的建议。事实证明，nlfitler 调用 im2col 并取其最大值对我有用。特别是因为提供的样本向量是包含随机变量的实向量的简化，因此存在的 bsxfun 选项将不起作用。

最大值（im2col（a，[3 1]，'滑动'））

# c# - 如何将两个日期转换为月份格式c#

> ID：12867526
> 
> 赞同：-3
> 
> 时间：2012-10-12T21:44:23.467
> 
> 标签：c#, date

假设我们有两个日期 2012-10-10 和 2012-12-31。我想在这样的表中输入数据

```
Start Date                 End Date
2012-10-10               2012-10-31
2012-11-01               2012-11-30
2012-12-01               2012-12-31 
```

任何代码或算法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:04:54.987

像这样的东西：

```
class Program
{
    public static DateTime FirstDayOfMonthFromDateTime(DateTime dateTime)
    {
        return new DateTime(dateTime.Year, dateTime.Month, 1);
    }

    public static DateTime LastDayOfMonthFromDateTime(DateTime dateTime)
    {
        DateTime firstDayOfTheMonth = new DateTime(dateTime.Year, dateTime.Month, 1);
        return firstDayOfTheMonth.AddMonths(1).AddDays(-1);
    }

    static void Main(string[] args)
    {
        var date1 = new DateTime(2012, 10, 10);
        var date2 = new DateTime(2012, 12, 31);
        Console.Out.WriteLine(date1.ToShortDateString() + "\t" + LastDayOfMonthFromDateTime(date1).ToShortDateString());
        while (LastDayOfMonthFromDateTime(date1) < date2)
        {
            date1 = date1.AddMonths(1);
            Console.Out.WriteLine(FirstDayOfMonthFromDateTime(date1).ToShortDateString() + "\t" + LastDayOfMonthFromDateTime(date1).ToShortDateString());
        }

        Console.ReadLine();
    }
} 
```

这给出了以下输出：

```
2012/10/10      2012/10/31
2012/11/01      2012/11/30
2012/12/01      2012/12/31 
```

（我从[devprise](http://www.devprise.com/2006/10/03/getting-the-first-and-last-day-of-the-month-with-net-c/)中提取了第一个/最后一个函数。）

# php - 从 php 数组中清除空值

> ID：12867527
> 
> 赞同：-1
> 
> 时间：2012-10-12T21:44:26.533
> 
> 标签：php, arrays, function, null

我遇到了一个函数问题，该函数应该返回一个 certian 对象的所有子对象并将整个事物编码为 JSON。目前它正在工作，但 JSON 编码中有一堆空值，我已经尝试过`array_filter()`一个`foreach`循环来清除它们，但两者都没有工作。

```
findChildren($conn, $topic);

$data = array();
function findChildren($conn, $topic) {
   $rst = $conn->query("SELECT topicID, topicTitle, topicParentID, topicDeleted FROM tbl_topics WHERE topicParentID = $topic");
   while ($row = $rst->fetch_assoc()) {
      if ($row['topicDeleted'] == 0) {
         //$data[] = htmlentities($row, UTF-8);
         if($row != '') {
            $data[] = $row;   
         }

         findChildren($conn, $row['topicID']);
      }              
   }
   echo json_encode( $data );
} 
```

任何帮助都是极好的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:00:46.343

```
<?php

$data = findChildren($conn, $topic);
echo json_encode($data);

function findChildren($conn, $topic) {
    $data = array();
    $rst  = $conn->query(
        "
            SELECT topicID, topicTitle, topicParentID, topicDeleted
            FROM tbl_topics
            WHERE topicParentID = ${topic} and topicDeleted = 0
        "
    );

    while ($row = $rst->fetch_assoc()) {
        $data[] = array_filter($row);

        if(!empty($row['topicID'])) {
            $data = array_merge(
                $data,
                findChildren($conn, $row['topicID'])
            );
        }
    }

    return $data;
} 
```

*   将函数更改为返回一个数组，而不是直接回显，或者像使用全局变量一样使用变量
*   将“topicDeleted”检查移至查询

# javascript - 向表中添加新行/列

> ID：12867533
> 
> 赞同：1
> 
> 时间：2012-10-12T21:44:48.370
> 
> 标签：javascript, html-table, tablerow

我已经有了这个代码：

```
for (i=0;i<names.length;i++) {
    var row = document.createElement('tr');
    var col = document.createElement('td');
    col.appendChild(document.createTextNode(names[i]));
    row.appendChild(col);
    document.getElementById('imagenametable').appendChild(row);
} 
```

这是在 Javascript 中。它似乎没有在我的表中添加任何内容（它的 ID 为`imagenametable`。出了什么问题？是的，我确实打算在表中制作文本行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:32:12.880

您应该反转两个脚本标签：始终在使用它们的任何其他脚本之前加载您的库。

# ios - EKEventStore eventsMatchingPredicate 赋值

> ID：12867535
> 
> 赞同：1
> 
> 时间：2012-10-12T21:44:54.703
> 
> 标签：ios, cocoa

我在存储来自 EKEventStore 查询的事件时遇到问题。例如，当使用以下代码时，*事件*总是为零：

```
__block NSArray *events = [[NSArray alloc] init];

if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
        dispatch_async(dispatch_get_main_queue(), ^{
            if (granted)
                events = [eventStore eventsMatchingPredicate:predicate];
        });
    }];
} 
```

我知道 [eventStore eventsMatchingPredicate:predicate] 正在返回事件，就好像我将 NSLog 放在块内一样，然后我可以看到事件详细信息。保留结果似乎存在问题。如您所见，我尝试在主线程上执行此操作但无济于事。

我正在使用可能会有所作为的 ARC。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:08:25.830

当然.. 我的意思是在我的 requestAccessToEntity 块之后我正在做“返回事件”。这不好，因为它会立即返回，因为 requestAccessToEntity 块是异步的并且需要很短的时间来执行该操作。因此，我创建了一个委托，并在 requestAccessToEntity 完成后调用此委托，以便在完成时通知我，并在委托调用中传回数组。像这样的事情：

```
[eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    if (granted) {
        if (delegate != nil && [delegate respondsToSelector:@selector(todaysEventsComplete:)]) {
            events = [eventStore eventsMatchingPredicate:predicate];
            dispatch_async(dispatch_get_main_queue(), ^{
                [delegate todaysEventsComplete:events];
            });
        } else {
            dispatch_async(dispatch_get_main_queue(), ^{
                [UIAlertView alertViewWithTitle:nil message:@"You have denied access to your calendar for this app"];
            });
        }
    }
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:39:42.153

终于想通了。

我在返回 NSArray 事件的方法中执行上述代码。现在的问题是`requestAccessToEntityType`异步执行的。因此，即使在块本身中我正在更新主线程上的数组，但此时为时已晚，因为该方法已经返回。

不得不改变它，所以它现在有一个委托，一旦它完成它的事情就会返回事件。

# c++ - 将库中的源/头文件设为只读？

> ID：12867536
> 
> 赞同：0
> 
> 时间：2012-10-12T21:45:06.773
> 
> 标签：c++

例如：在 Visual Studio 中，右键单击标准库中的任何函数，然后单击“转到定义”，它将在只读的头文件或源文件中显示定义。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:51:44.253

分发文件时将文件标记为只读。这提供了最低限度的保护，因为可以轻松恢复权限。即使在 Visual Studio 中，如果您尝试覆盖该文件，它也会弹出一个对话框，要求确认删除只读保护。这也发生在标准库头文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:53:31.210

只需在 Windows 资源管理器中将源文件或头文件标记为只读！:)

# ruby-on-rails - Rails - 前端和后端分离

> ID：12867540
> 
> 赞同：0
> 
> 时间：2012-10-12T21:45:39.277
> 
> 标签：ruby-on-rails, structure

我正在构建一个 Rails 应用程序，其中所有前端文件都存储在与 Rails 服务器不同的服务器中。因此，所有请求都由 Javascript 发送的 AJAX 处理。

我这样做部分是为了分离前端和后端，并防止应用程序混乱。而且由于我使用的是 Google Closure Library，但 Rails 似乎并不能很好地支持它。

我想知道的是，这是否通常是一种好的做法，或者是否真的有必要这样做。现在我遇到了 CSRF 问题，我无法弄清楚如何安全地将 AJAX 发送到服务器，因为我无法在不中断会话的情况下访问前端的 csrf 令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:38:44.193

我认为，如果您使用具有适当 API 支持的可靠后端，那么您就没有问题。

这篇关于 Rails 上 API 服务器的文章：http: [//broadcastingadam.com/2012/03/state_of_rails_apis/](http://broadcastingadam.com/2012/03/state_of_rails_apis/)

显示有许多实现和正在进行的各种工作。API 版本控制似乎是一个有问题的领域。

如果您担心 CSRF，我建议您查看[rack_csrf](https://github.com/baldowl/rack_csrf)。

# scala - 如何隐藏 Crudify 菜单的子菜单

> ID：12867543
> 
> 赞同：1
> 
> 时间：2012-10-12T21:45:54.137
> 
> 标签：scala, lift

我有以下代码，需要向非站点成员隐藏评论子菜单。

```
 var menu = List(Menu.i("Home") / "index",
            Menu(Loc("Static", Link(List("static"), true, "/static/index"),"Static Content"))
               )
menu = menu ::: User.menus
menu = menu ::: Comment.menus 
menu = menu ::: Links.menus

 // def sitemapMutators = User.sitemapMutator
  LiftRules.setSiteMap(SiteMap(menu: _*)) 
```

我已经尝试过>>隐藏但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:28:08.680

通过覆盖扩展对象中的列表，将 Hidden 添加到菜单的 LocParams。

IE。覆盖 def showAllMenuLocParams = Hidden :: super.showAllMenuLocParams

# javascript - jQuery更改输入文本值不起作用

> ID：12867544
> 
> 赞同：4
> 
> 时间：2012-10-12T21:46:17.430
> 
> 标签：javascript, jquery

我正在尝试这样做

```
$('input').val($('input').val()+"^2"); 
```

所以页面中的每个输入字段**（我只有一个字段）**都会有两个额外的字母^2

奇怪的是它只附加了 2 而忽略了 ^ 符号。知道为什么会发生这种奇怪的行为吗？

编辑：问题是代码中的另一部分在插入后会从输入字段中删除所有符号。所以我将其更改为忽略此符号。多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:50:27.123

对我有用：[jsFiddle 示例](http://jsfiddle.net/PpuGE/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:49:36.293

尝试

```
&#94; 
```

或逃避胡萝卜：

```
/^ 
```

它呈现为 ^

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:51:54.947

尝试使用**反斜杠转义 \**

```
$('input').val($('input').val()+"\^2");​ 
```

或者使用插入符号的Unicode等价物

[**检查小提琴**](http://jsfiddle.net/sushanth009/ZrTZA/1/)

# vba - 计算来自多个 csv 文件的数据

> ID：12867547
> 
> 赞同：2
> 
> 时间：2012-10-12T21:46:29.803
> 
> 标签：vba, excel

我在共享文件夹中有数百个链接到它们的文件夹，
例如：

```
a:\Images\abc\year\month\date\names1
a:\Images\abc\year\month\date\names2
a:\Images\abc\year\month\date\names3 etc,. 
```

每个文件夹都有一个*`abc.csv`*包含少量信息的 csv（每个文件夹中的常量名称）。

例如：

```
1 Orange USA
2 Apple England
3 Orange Australia
4 Orange Austria
5 Apple India 
```

在这里，我想计算不同文件夹的 CSV 中的橙子、苹果、葡萄和甜瓜的数量。

我期待像这样的输出：

```
Link    Oranges Apples  Grapes  Melon

\names1 5846    2000    85215   586

\Names2 4521    1542    45852   125

\Names3 365     4856    25415   548 
```

请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:47:55.400

试试这个代码。它将打开列 (1) 中列出的每个文件夹中包含的文件 abc.csv，计算项目数，然后关闭文件并继续。

```
Option Explicit

Sub CountApples()
Dim wbk As Workbook, sht As Worksheet, wbkTemp As Workbook, lLoop As Long, lLastRow As Long

'turn off updates to speed up code execution
With Application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
End With

Set sht = ActiveSheet

lLastRow = sht.Cells(sht.Rows.Count, 1).End(xlUp).Row

For lLoop = 2 To lLastRow
    Set wbkTemp = Workbooks.Open(sht.Cells(lLoop, 1) & "\abc.csv")

    sht.Cells(lLoop, 2).Value = Application.WorksheetFunction.CountIf(wbkTemp.Sheets(1).Columns(1), "Oranges")
    sht.Cells(lLoop, 3).Value = Application.WorksheetFunction.CountIf(wbkTemp.Sheets(1).Columns(1), "Apples")
    sht.Cells(lLoop, 4).Value = Application.WorksheetFunction.CountIf(wbkTemp.Sheets(1).Columns(1), "Grapes")
    sht.Cells(lLoop, 5).Value = Application.WorksheetFunction.CountIf(wbkTemp.Sheets(1).Columns(1), "Melon")

    wbkTemp.Close (False)
Next lLoop

With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
End With

End Sub 
```

# php - 在类中返回是否可以接受 __construct()

> ID：12867548
> 
> 赞同：3
> 
> 时间：2012-10-12T21:46:34.910
> 
> 标签：php, oop, constructor

我知道有很多与此相关的问题。但是，我没有设法找到简单问题的答案（*我不是在询问从构造函数返回值，我认为我理解构造函数应该返回什么*）。

### 有什么理由避免使用`return`within`__construct`吗？

或者这种完全可以接受的编码风格在未来不会因为以下原因而中断`return`：

```
class A {
    protected $tristate = null;
    function __construct() {
        // Constructor returns instance of class automatically
        // no need to `return $this`
    }
    protected function Logic() {
        return rand(0, 1) === 1;
    }
}

class B extends A {
    function __construct() {
        parent::__construct();
        if ($this->Logic()) return;
        $this->tristate = true;
    }
} 
```

上面的一个经过测试，它按预期工作（*在我的开发环境中*），它将父`$tristate`变量 50/50 设置为 NULL/TRUE，但它会在将来工作，并且在构造函数的中间返回时是否会出现任何问题`void return`。

想到的另一件事是我是否应该使用通常是无效`return $this`的 plain`return`但 PHP 似乎无论如何都会返回实例，答案很可能是两者`return $this`和 plain`return`一样好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:52:57.980

这没有任何后果，我认为永远不会有。您可以随时从构造函数返回任何内容。返回值（如果有）将被忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:03:20.113

来自[文档](http://php.net/manual/en/language.oop5.decon.php)

> 构造函数 void __construct ([ 混合 $args [, $... ]] )

并来自 [伪类型定义](http://php.net/manual/en/language.pseudo-types.php)

> void 作为返回类型意味着返回值是无用的。

所以你可以返回任何东西......但它是`useless`. 在您的情况下`return`，退出函数执行的工作：它只是允许的。

另一个问题是这是一个好还是坏的做法......

我认为简单`return ;`是保存一些 IF 语句和烦人的缩进的好习惯。带有值（即`return false;`）的返回，如果它没用，是一种不好的做法，因为没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T21:53:41.860

这是一个很好的经验法则，以确保*没有任何*方法`return`是早期的 - 除了其他任何事情之外，这意味着在 6 个月的时间内，当你回到那个 1500 行的函数时，你知道你真的不应该写，但确实做到了无论如何，你有一个稍微不那么噩梦的时间来理解这件愚蠢的事情是如何运作的:)

通过使用否定逻辑检查 -`if ( ! $this->Logic() )`您可以获得与提前返回相同的效果，但是您现在可以回到代码，知道它永远不会在中间的某个地方随机退出您的方法。

当然，没有什么能阻止你这样做，除了那个小声音说“我知道我不应该”，但是还有另一个声音说“哦，继续，会没事的，你会记住的！”。不要听第二个声音，只要正确地去做：P

* * *

快速更新要明确 - 没有技术原因可以避免`return`在构造函数中使用（`new`关键字强制它返回对象，并覆盖构造函数返回的内容），有一个很好的*逻辑*理由不这样做。

# .net - TraceListener 跟踪 WCF 事件，但不跟踪自生成的事件

> ID：12867550
> 
> 赞同：1
> 
> 时间：2012-10-12T21:46:45.640
> 
> 标签：.net, wcf, tracelistener, tracesource

我们的商店有一个 TraceListener，它通过 web 服务调用将事件发送到存储库。我们将它用于我们自己的 TraceSource，但希望能够将其用于其他 TraceSource，例如 System.ServiceModel 和 System.Activities。

```
 <source name="System.ServiceModel" switchValue="Warning, ActivityTracing"      propagateActivity="true">
    <listeners>
    <add name="TheSharedListenerInQuestion" />
    </listeners>
    </source> 
```

问题是我们使用 WCF 客户端调用在 TraceListener 中进行写入，如果 System.ServiceModel 跟踪源附加到我的侦听器，我最终会进入一个循环，例如跟踪触发内部客户端调用的事件，这反过来会导致WCF 跟踪源触发 TraceEvent 并随之发生循环。

如何使我的内部 WCF 调用不会导致 WCF 跟踪源触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:50:49.163

我认为这在逻辑上是不可能的。但是，在跟踪侦听器中使用跟踪下的代码必然会创建一个无限循环，也就是说：

一个疯狂的想法是编写一个自定义[TraceFilter](http://www.barebonescoder.com/2010/04/custom-trace-filter-for-a-wcf-service/)来检查堆栈跟踪以查看 tracelistener 是调用的来源还是其他客户端。可能还有另一个更聪明的解决方案，我必须在自定义跟踪过滤器中设置一个断点，并查看有关上下文的任何内容是否可区分（可能通过对端点名称进行过滤）

# javascript - 性能 - 为什么主干/jQuery 复制切片和拼接？

> ID：12867551
> 
> 赞同：1
> 
> 时间：2012-10-12T21:46:51.977
> 
> 标签：javascript, jquery, backbone.js

这仅仅是为了缩短查找链吗？

```
 var slice = Array.prototype.slice;
  var splice = Array.prototype.splice; 
```

[http://backbonejs.org/docs/backbone.html](http://backbonejs.org/docs/backbone.html)

jQuery 做了类似的事情：

```
core_push = Array.prototype.push,
core_slice = Array.prototype.slice, 
```

[http://code.jquery.com/jquery-1.8.2.js](http://code.jquery.com/jquery-1.8.2.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:52:04.370

对于 Backbone，这完全没有意义。两者`slice`和`splice`都只使用一次，因此`var`声明会产生不必要的开销。

对于 jQuery，不同的故事。对被多次引用的事物的本地引用有助于缩小。因此生产版本的代码量减少了。

是的，这也是一个小的性能提升，但没有什么值得谈论的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T05:31:24.370

切片、拼接和推送的最高效方式是使用 C 代码。由于所有浏览器都是用 C 编写的，使用 Array.splice 将在内部使用 C 而不是 JS 处理。

如果您真的需要性能，您应该尝试找到一种既不使用也不使用的方法。问题是它们都将创建僵尸对象，这些对象将放置在垃圾收集器后面以备不时之需。从长远来看，GC 所做的工作越少，您节省的时间就越多。使用相同的数组并使用光标在数组中的不同位置进行编辑。这将避免 GC 收集它。

这里有一个示例：[https](https://github.com/puppybits/BackboneJS-PerfView/blob/master/PerfView.js) ://github.com/puppybits/BackboneJS-PerfView/blob/master/PerfView.js在 trackFPS 函数的第 40 行。如果您要推送/切片很多并且需要性能，请考虑使用静态数组。

# ruby-on-rails - Rails 条件如和 gsub

> ID：12867552
> 
> 赞同：0
> 
> 时间：2012-10-12T21:46:52.170
> 
> 标签：ruby-on-rails, ruby, activerecord

在我的 Rails 应用程序中，我需要搜索一些数据，但是例如，如果在 db 中我有

> 清洁过滤器

但在后期数据中我有

> 清洁过滤器

我没有得到我需要的东西，所以我需要 sql %like% 的模拟，我这样做了，但是如何从从 mysql 获取的数据中删除空间？现在我的代码看起来像这样

```
prlist = PriceList.find(:first, :conditions => ['id like ? and brand like ?', @search.map(&:price_list_id), "%"+supplier+"%"], :order => 'price asc') 
```

但我需要这样的东西 `prlist = PriceList.find(:first, :conditions => ['id like ? and brand.gsub(/[^0-9A-Za-z]/, '') like ?', @search.map(&:price_list_id), "%"+supplier+"%"], :order => 'price asc'`：）

所以如果简单的话：如何在获取数据时修改“ram”sql数据？

# javascript - 如果 '.classname' 存储在 $var 中，如何编写这样的选择器：$('.classname.active')？

> ID：12867553
> 
> 赞同：3
> 
> 时间：2012-10-12T21:46:58.257
> 
> 标签：javascript, jquery, variables, css-selectors, traversal

我想将一个选择器存储在一个变量中，并且我想在需要查找“.active”类的实例中使用该对象。这将返回“.active”的对象。

基本上，我将如何编写这样的选择器： $('.classname.active')

```
var $varName = $('.multipleDivs');
$varName.hasClass('active'); // this returns true, but not the object

var $varName = $('.multipleDivs'); 
$('.active', $varName); // this returns an empty array 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:49:44.483

`.hasClass()`根据设计返回布尔值 - 它测试元素是否具有命名类。要向下过滤，您需要`.filter()`（如果“.multipleDivs”也有“.active”类）或`.find()`（如果“.active”元素是“.multipleDivs”的子级）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:52:04.637

```
var $varName = $('.multipleDivs');
$varName.hasClass('active'); // this returns true, but not the object 
```

您在这里检查任何具有类 multipleDivs 的 div 是否具有活动类

```
var $varName = $('.multipleDivs'); 
$('.active', $varName); // this returns an empty array 
```

在这里，您正在寻找具有活动类的元素，这些元素是 multipleDivs 类元素的子元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T21:48:52.513

您最初的猜测是正确的方法。

```
$(".multipleDivs.active") 
```

或者，你可以做

```
$varName.filter(".active") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T22:38:57.017

以下应该这样做并使用您提到的语法

```
var clsName = 'multipleDivs';
var elementsWithBothClasses = $('.' + clsName + '.active'); 
```

如果您已经拥有所有 jQuery 对象`multipleDivs`，那么您可以使用`$.filter`

```
var multipleDivs = $('.multipleDivs');
multipleDivs.filter(".active"); // filters in place, so it changed multipleDivs 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T21:49:44.543

```
var someRandomClass = "bill";
var results = $('.' + someRandomClass + '.active'); 
```

小提琴：http: [//jsfiddle.net/gromer/fSrAY/](http://jsfiddle.net/gromer/fSrAY/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T21:54:35.150

这是一种方法：

```
var $varName = $('.multipleDivs');
$varName.each(function(){
  if($varName.hasClass('active');){
    $varName.whateverFunctionYouWantToDo();
  }
}); 
```

# ruby-on-rails - Gem::RemoteFetcher::FetchError - 捆绑安装期间证书验证失败

> ID：12867558
> 
> 赞同：3
> 
> 时间：2012-10-12T21:47:16.060
> 
> 标签：ruby-on-rails, rubygems, bundler

> **可能重复：**
> [捆绑安装失败并出现 SSL 证书验证错误](https://stackoverflow.com/questions/10246023/bundle-install-fails-with-ssl-certificate-verification-error)

我有一个问题`bundle install`。他不是工作。
宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

gem 'sqlite3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem "jquery-rails", "~> 2.1.3" 
```

当我执行`bundle install`收到的命令时：

```
D:\ruby\work\myPage>bundle install
Fetching gem metadata from https://rubygems.org/.........
Using rake (0.9.2.2)
Using i18n (0.6.1)
Using multi_json (1.3.6)
Using activesupport (3.2.8)
Using builder (3.0.3)
Using activemodel (3.2.8)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.8)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.11)
Using mail (2.4.4)
Using actionmailer (3.2.8)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.8)
Using activeresource (3.2.8)
Using bundler (1.2.1)
Using coffee-script-source (1.3.3)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)

Gem::RemoteFetcher::FetchError: SSL_connect returned=1 errno=0 state=SSLv3 read
server certificate B: certificate verify failed (https://rubygems.org/gems/json-1.7.5.gem)
An error occurred while installing json (1.7.5), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.5'` succeeds before bundling. 
```

然后我尝试启动服务器`rails server`：

```
D:\ruby\work\myPage>rails server
←[31mCould not find gem 'sqlite3 (>= 0) x86-mingw32' in the gems available on this machine.←[0m
←[33mRun `bundle install` to install missing gems.←[0m 
```

可能是什么问题？以及如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T22:31:51.907

这是因为您的 ruby​​gems 版本中存在错误。

您可以运行

```
gem update --system 
```

或者，从 gemfile 中的源中删除 s，如下所示：

```
source 'http://rubygems.org' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:01:34.307

我解决了这个问题。我完全删除了 Ruby。并重新安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:34:55.107

可以在此处找到此错误的解释

[http://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

检查你的 ruby​​ 版本和你的 ruby​​gems 版本

然后用`gem update --system`它来修复它

# java - JNA 问题 - DLL 仅使用从 Java 填充的数组的一部分

> ID：12867565
> 
> 赞同：1
> 
> 时间：2012-10-12T21:47:42.783
> 
> 标签：java, jna

我是 Java 和 JNA 的新手。我正在使用 JNA 从 Java 加载和使用本机 DLL 函数。

我在将指针传递给数组时遇到问题。根据规范，我从 Java 填充这个数组并尝试将指向这个数组的指针发送到 DLL。

这就是本机调用的外观，

```
StartCom(UNUM8 *pCoPData)
From the spec: pCoPData -> Reference of the buffer holding the data 
```

对应的JNA Mapping，

```
 int[] buf = new int[2];
    buf[0] = 0x1A;
    buf[1] = 0x10;

    Pointer pCoPData = new Memory(8);
    pCoPData.write(0, buf, 0, buf.length);

            Library.INSTANCE.StartCom(pCoPData); 
```

当我执行上面的代码时，我从 dll 日志中注意到**只使用了数组 0x1A 的第一个元素，而忽略了第二个字节**。DLL 始终只看到数组的第一个元素。

我假设这个问题可能只有 2 种可能性，

```
 1\. The above approach I have taken to populate and send the address of a Java array  to the DLL is incorrect.
  2\. The DLL is expecting a UNUM8* whereas I am sending a UNUM32*. I will try with byte[] instead of int[] and see if there is any difference. 
```

**有什么建议有很大帮助吗？请告诉我。提前谢谢了 ！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:14:36.147

当您在输入中传递不正确类型的函数时，为什么会期望得到正确的结果？

如果函数需要一个指向一个或多个 8 位元素的指针（`byte`在 Java 中，本机代码中大概`UNUM8`是 8 位），那么您需要传递一个指向一个或多个 8 位元素的等效指针。您正在传递一个指向您已使用两个 32 位元素初始化的内存的指针。以下是 8 位与 32 位情况下的内存情况（所有值代表 8 位字节）：

将两个 8 位值写入内存后：

```
base+0x0: 0x1A
base+0x1: 0x10 
```

将两个 32 位值写入内存后：

```
base+0x0: 0x1A 0x00 0x00 0x00
base+0x4: 0x10 0x00 0x00 0x00 
```

因此，您可以看到，如果本机代码从 开始读取`base`，它看到的值会根据您初始化内存的方式而显着不同。

顺便说一句，如果本机代码不需要*比*函数调用本身更长时间地保留对您传递的内存的引用，您可以只`byte[]`用作`UNUM8*`参数，而不是分配和初始化`Memory`.

# codeigniter - 在共享主机站点上使用 mongolab

> ID：12867566
> 
> 赞同：1
> 
> 时间：2012-10-12T21:47:46.357
> 
> 标签：codeigniter, mongodb, mlab

我们正在寻找 mongolab (http://mongolab.com) 来托管我们的数据（最初存储在 MySQL 中）。我们目前正在使用共享托管计划，因此我们无法安装应用程序，所以我不确定我们目前是否可以使用 mongo。他们有一个休息 API，但我无法从文档中判断我们是否可以在没有 mongo 二进制文件的情况下使用它们。

他们教程中的第一个操作是运行以下命令：

$ bin/mongo dbh23.mongolab.com:27237/my_new_db -u -p

所以我的问题是，是否可以从共享托管计划中使用 mongolab？（使用 CodeIgniter）

如果这是一个基本问题，我很抱歉，但是我只使用过基于 SQL 的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:28:18.520

[`mongo`shell](http://www.mongodb.org/display/DOCS/mongo+-+The+Interactive+Shell)是数据库管理的默认方法；你可以从你自己的计算机上使用它来连接到 MongoLab（即你不必从你的网络服务器上运行它，尽管这是一个选项）。

命令行连接使用标准的[Mongo Wire Protocol ，MongoDB](http://www.mongodb.org/display/DOCS/Mongo+Wire+Protocol)[客户端驱动程序](http://www.mongodb.org/display/DOCS/Drivers)（来自流行的编程语言）和[Admin UI](http://www.mongodb.org/display/DOCS/Admin+UIs)直接支持该协议。

您的 CodeIgniter 应用程序可以直接调用 MongoLab API；它不需要安装任何特殊的二进制文件。

学习如何使用默认`mongo`shell 而不是管理 UI 将是非常值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T05:11:16.290

Site5 已安装驱动程序，只需要求他们打开端口以连接到您的 mongo 主机。

# xcode - 如何指示 XCODE 在子项目的 DERIVED_FILES_DIR 中查找标头

> ID：12867569
> 
> 赞同：3
> 
> 时间：2012-10-12T21:48:15.677
> 
> 标签：xcode, subproject

我有一个静态库项目，它构建 .h 和 .m 文件并将它们放入 ${DERIVED_FILES_DIR}。这工作正常。但是，当库项目添加为子项目时，我无法弄清楚如何引用它们。

当我将此项目添加为子项目时，它会构建并将输出放置到 Build/Intermediates/SubProj.build/Debug-iphonesimulator/SubProj.build/DerivedSources 的父项目路径中。

我如何告诉 xcode 在包含项目中使用这些中间体？

或者，我如何修改子项目以将它们复制到产品目录中，它们可能会被父项目拾取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:15:57.467

我通过在库项目中添加一个运行脚本构建阶段来解决这个问题，该阶段使用此脚本复制派生文件：

```
cp -a ${DERIVED_FILES_DIR}/*.h ${BUILT_PRODUCTS_DIR} 
```

然后，当将此库添加到另一个项目时，我在 Build Settings 下添加了一个 User Header Search Path 作为

```
${BUILT_PRODUCTS_DIR} 
```

一定要选择递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-17T13:32:18.250

`DERIVED_FILES_DIR`用于在构建期间自动生成的文件，并且应该由相同的构建使用。放置在该位置的文件应该与 Xcode 中的“构建规则”匹配，在这种情况下，Xcode 将根据此规则自动构建它们（例如，生成`.c`的文件由 Xcode 自动构建并链接到您当前的目标二进制文件），或者它们用作输入另一个脚本阶段。

如果您的目标是另一个目标使用的静态库（同一个项目或其他项目无关紧要），那么静态库及其头文件是您当前构建的实际构建产品，因此都应该进入`BUILT_PRODUCTS_DIR`Xcode 将如果其他目标引用它们，请找到它们。

# vim - 使用 VIM 从文件末尾搜索

> ID：12867573
> 
> 赞同：43
> 
> 时间：2012-10-12T21:48:36.387
> 
> 标签：vim

如何使用 VIM 从文件末尾搜索？我想在打开的文件中搜索最后一次出现的 XXXX。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-12T21:51:51.113

类型`G$?XXXX`

*   `G`转到文件末尾
*   `$`走到行尾
*   `?`向后搜索
*   `XXXX`成为你想要搜索的东西

您也可以这样做到`gg?XXXX`文件的开头，然后向后搜索，环绕到文件的末尾。但是，对于大文件，查找文件开头然后立即查找文件结尾可能会很慢。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-12T22:03:06.133

我的建议是使用范围与通过`?`.

```
:1?XXXX 
```

概述：

*   `1?XXXX`是范围。
*   表示文件的`1`第一行。
*   `?XXXX`意味着从第一行向后搜索（环绕），直到找到模式`XXXX`

正如 ZyX 提到的，这依赖于`wrapscan`设置，默认情况下是这样。有关`:h 'wrapscan'`更多信息，请参阅。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-12T21:51:43.063

使用转到最后一行`G`并使用进行向后搜索`?XXXX`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-05T10:59:31.347

1)使用Vi编辑器

vi xx.log

2)使用`Shift + g`

3）用于搜索模式：？xxx

将此 xxx 替换为您的搜索字符串。

4)`Shift + n`

下次搜索

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T15:25:27.393

一种方法是：

```
gg?<string> 
```

这会将光标放在文件的开头并执行向后搜索。由于 vim 不可能走到光标位置*之前*，它会从文件的最后开始执行搜索。

# powershell - 从 Powershell 运行 NServiceBusHost.exe

> ID：12867576
> 
> 赞同：3
> 
> 时间：2012-10-12T21:49:02.347
> 
> 标签：powershell, windows-services, nservicebus

嗨，我有一个 powershell 脚本来从集群管理器停止服务，卸载服务，重新安装服务，然后从集群管理器启动服务。NServiceBus.Host.exe 用于卸载和重新安装服务。我遇到了安装问题。该服务已成功安装，但即使我将“/startManually”作为参数发送，该服务始终是自动启动类型。其次，在安装时，我得到一个 Login failed for user sql 错误，指出 userName 是本地机器名，即使我指定了要使用的服务的用户名和密码。下面是我安装服务的代码行。任何帮助都是一种祝福。

```
& "NServiceBus.Host.exe" ("/install", "/startManually", "/serviceName:$ServiceName", "/displayName:$ServiceName", "/username:$ServiceUserName", "/password:$ServicePassword") > tmp.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:06:20.467

I generally recommend using the `Start-Process` cmdlet to launch processes from PowerShell. This makes the whole process (no pun intended) of launching processes much easier to troubleshoot.

You can build your command line arguments into a variable, and pass that resulting variable into the `-ArgumentList` parameter.

```
$Arguments = '/install /startManually /serviceName:{0} /displayName:{0} /username:{1} /password:{2}' -f $ServiceName, $ServiceUserName, $ServicePassword)
$nServiceBus = Resolve-Path -Path nServiceBus.Host.exe;

Write-Host -Object ('Argument string is: {0}' -f $Arguments);
Write-Host -Object ('Path to nServiceBus.Host.exe is: {0}' -f $nServiceBus);
Start-Process -Wait -NoNewWindow -FilePath $nServiceBus -ArgumentList $Arguments -RedirectStandardOutput tmp.txt; 
```

Hope this helps.

# python - 如何让 elasticsearch 执行完全匹配查询？

> ID：12867578
> 
> 赞同：5
> 
> 时间：2012-10-12T21:49:12.660
> 
> 标签：python, elasticsearch

这是一个两部分的问题。

我的文件如下所示：

```
{"url": "https://someurl.com", 
 "content": "searchable content here", 
 "hash": "c54cc9cdd4a79ca10a891b8d1b7783c295455040", 
 "headings": "more searchable content", 
 "title": "Page Title"} 
```

我的第一个问题是如何检索“标题”*正好是*“无标题”的所有文档。我不希望出现标题为“此文档没有标题”的文档。

我的第二个问题是如何检索“url”*恰好*出现在长长的 url 列表中的所有文档。

我正在使用 pyelasticsearch，但 curl 中的通用答案也可以。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T22:16:18.443

您必须为字段定义映射。

如果您正在寻找确切的值（区分大小写），您可以将 index 属性设置为`not_analyzed`.

就像是 ：

```
"url" : {"type" : "string", "index" : "not_analyzed"} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-17T06:00:37.480

试试这个方法。这是工作。

```
import json
from elasticsearch import Elasticsearch
connection = Elasticsearch([{'host': host, 'port': port}])

elastic_query = json.dumps({
     "query": {
         "match_phrase": {
            "UserName": "name"
          }
      }
 })
result = connection.search(index="test_index", body=elastic_query) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T19:37:24.333

如果您存储了源（这是默认设置），您可以使用[脚本过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/script-filter.html)

它应该是这样的：

```
$ curl -XPUT localhost:9200/index/type/1 -d '{"foo": "bar"}'
$ curl -XPUT localhost:9200/index/type/2 -d '{"foo": "bar baz"}'
$ curl -XPOST localhost:9200/index/type/_search?pretty=true -d '{
"filter": {
    "script": {
        "script": "_source.foo == \"bar\""
    }
}
}'
{
  "took" : 2,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "index",
      "_type" : "type",
      "_id" : "1",
      "_score" : 1.0, "_source" : {"foo": "bar"}
    } ]
  }
} 
```

**编辑**：我认为值得一提的是“not_analyzed”映射应该是更快的方法。但是，如果您想要该字段的完全匹配和部分匹配，我看到两个选项：使用脚本或索引数据两次（一次分析，一次不分析）。

# c# - lock (objectReference) { } 没有锁定临界区

> ID：12867582
> 
> 赞同：0
> 
> 时间：2012-10-12T21:49:37.137
> 
> 标签：c#, multithreading, locking, mutex

我有一个带有互斥锁的多维数组，我使用它们来做一些关键部分。最后是我班级的草图。

现在，我尝试在不停止的情况下在不同线程中添加和删除字符，同时从另一个线程获取字符以测试我的服务器是否可以正常工作，但是当我尝试获取一个类似的字符时出现异常this：“集合在 foreach 期间被修改..”

有谁知道为什么？我已经阅读了 MSDN 中 lock 语句的文档，它应该可以工作，我不知道我做错了什么。也许`new object[]`不能用作互斥锁？

如果`lock(objectReference)`在这种情况下不应该使用，我应该使用什么来代替？

我的班级素描：

```
partial class MapCharacter
{
    public MapCharacter()
    {
        mutexes = new object[5, 5];
        for (int x = 0; x < 5; x++)
        {
            for (int y = 0; y < 5; y++)
            {
                mutexes[x, y] = new object();
            }
        }
    }

    object[,] mutexes;

    public object RequestMutex(int x, int y)
    {
        return mutexes[x, y];
    }

    public void RemoveCharacter(Character characterToRemove)
    {
        lock (RequestMutex(characterToRemove.X, characterToRemove.Y))
        {
            loggedCharacters.Remove(characterToRemove);
        }
    }

    public void AddCharacter(Character characterToAdd)
    {
        lock (RequestMutex(characterToRemove.X, characterToRemove.Y))
        {
            loggedCharacters.Add(characterToAdd);
        }
    }

    public Character[] GetCharacters(int x, int y)
    {
        lock (RequestMutex(characterToRemove.X, characterToRemove.Y))
        {
            foreach (var charact in loggedCharacters)
            {
                // exception here
            }
        }
    }

    // more methods that use the mutex when trying to remove/add/modify characters
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T21:53:05.167

您的问题是您锁定了单个字符，但没有锁定`loggedCharacters`. 您需要`loggedCharacters`使用锁进行保护或使其成为并发集合以避免该异常。

# mysql - 服务器崩溃 - 优化 Mysql 查询

> ID：12867585
> 
> 赞同：0
> 
> 时间：2012-10-12T21:49:44.543
> 
> 标签：mysql, webserver

我已经使用共享主机很长时间了，并且几个月来一直在运行相同的查询而没有问题。突然间，我收到一封来自主机的电子邮件，说他们在我的数据库上设置了一个块，因为“发现数据库消耗了过多的处理器时间”。我不明白为什么现在？所以无论如何我想也许我需要去VPS。试图在 VPS 上启动我的站点，然后整个站点立即出现内存不足错误并崩溃。有一段时间，连接在访问该站点时完全超时。

我的表都不是很大，不超过 10,000 行。以下是我原来的主人发给我的一些东西：

```
DB_USER: my_user -- TOTAL_CONNECTIONS: 37 -- CONNECTED_TIME: 4906 --
CPU_TIME: 1920 -- TABLE_ROW_READS: 79999077 -- SELECT_COMMANDS: 214 --
UPDATE_COMMANDS: -- BUSY_TIME: 4879 -- BYTES_SENT: 252225 --
BYTES_RECEIVED: 105418 -- WAIT_TIME (IO): 2959 
```

表行读取 79,999,077?? 说真的，那是如何工作的。我的桌子都很小。我没有很多流量。可能每天有 100-150 人。但这似乎无关紧要，因为当我将它放到新服务器上时，该站点就完全死了。这是电子邮件中的一个查询，说我的数据库已关闭。真的只有这一个查询让我丧命吗？它已经运行了几个月没有问题：

```
SELECT `Person`.`first_name`, `Person`.`last_name`,`Person`.`id`,`Upload`.`path`,`TeacherBiography`.`final_biography`, `TeacherPhilosophy`.`final_philosophy`
FROM `my_database`.`people` AS `Person`
LEFT JOIN `my_database`.`teacher_drive_cities` AS `TeacherDriveCity`
    ON (`TeacherDriveCity`.`person_id` = `Person`.`id`)
LEFT JOIN `my_database`.`instruments_people` AS `InstrumentsPerson`
    ON (`InstrumentsPerson`.`person_id` = `Person`.`id`)
LEFT JOIN `my_database`.`instruments` AS `Instrument`
    ON (`Instrument`.`id` = `InstrumentsPerson`.`instrument_id`)
LEFT JOIN `my_database`.`teachers` AS `Teacher`
    ON (`Teacher`.`person_id` = `Person`.`id`)
LEFT JOIN `my_database`.`uploads` AS `Upload`
    ON (`Upload`.`person_id` = `Person`.`id`)
LEFT JOIN `my_database`.`teacher_biographies` AS `TeacherBiography`
    ON (`TeacherBiography`.`person_id` = `Person`.`id`)
LEFT JOIN `my_database`.`teacher_philosophies` AS `TeacherPhilosophy`
    ON (`TeacherPhilosophy`.`person_id` = `Person`.`id`)
WHERE `TeacherDriveCit! y`.`city` = 'Dana Point'
    AND `TeacherDriveCity`.`state` = 'ca'
    AND `Instrument`.`instrument` = 'saxophone'
    AND `Teacher`.`status` = 6
    AND `Upload`.`description` = 'profile_picture'
    AND `TeacherBiography`.`final_biography` IS NOT NULL
    AND `TeacherPhilosophy`.`final_philosophy` IS NOT NULL
GROUP BY `Person`.`id`
ORDER BY RAND() ASC
LIMIT 3 
```

我听说 rand() 的 order 很慢，但我不认为它会在一次调用中使整个服务器崩溃。我在这里错过了什么吗？任何帮助，将不胜感激！我的网站关闭了 24 小时，我靠它的收入为生。谢谢！

编辑：这是对查询的解释：

```
1   SIMPLE  TeacherBiography    ALL NULL    NULL    NULL    NULL    41    Using where; Using temporary; Using filesort
1   SIMPLE  TeacherPhilosophy   ALL NULL    NULL    NULL    NULL    41  Using where; Using join buffer
1   SIMPLE  Upload              ALL NULL    NULL    NULL    NULL    166 Using where; Using join buffer
1   SIMPLE  Teacher             ALL NULL    NULL    NULL    NULL    381 Using where; Using join buffer
1   SIMPLE  InstrumentsPerson   ALL NULL    NULL    NULL    NULL    647 Using join buffer
1   SIMPLE  Instrument  eq_ref  PRIMARY PRIMARY 4   yml_yml.InstrumentsPerson.instrument_id 1   Using where
1   SIMPLE  Person  eq_ref  PRIMARY PRIMARY 4   yml_yml.TeacherPhilosophy.person_id     1   Using where
1   SIMPLE  TeacherDriveCity    ALL NULL    NULL    NULL    NULL    7489    Using where; Using join buffer 
```

我知道它没有格式化，因此您可以轻松阅读...我不知道如何将其制成表格以及此处不知道的内容。对不起！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:29:44.347

有很多事情可能会影响您的查询，使用`EXPLAIN`应该可以揭示对性能影响最大的问题。

但这里有一些一般准则：

*   确保所有表在用于连接表的字段上都有索引。
*   为什么要使用`LEFT JOIN`然后过滤`WHERE`子句的具体值？使用外连接将增加稍后将被`WHERE`子句上的条件过滤和丢弃的行数。
*   确保用于过滤的所有列都被索引覆盖。但是，为什么还要按文本值过滤？即使城市、州和仪器字段被索引覆盖，比较字符串也比比较整数需要更多的处理。
*   `Person.id`如果您随机订购，为什么要分组？分组强制进行排序操作，由于表连接，该操作很可能需要一个临时表。

现在想想这个：

数据库处理连接的方式通常是组合每个表中的所有行，然后丢弃不满足连接条件的组合。这就是为什么在连接字段上有索引非常重要的原因，因为这样组合使用索引键而不是包含两个表中所有字段的临时表。这也是不使用 a`LEFT JOIN`然后丢弃行组合（在`WHERE`子句中）的原因，这些组合本来可以早先被丢弃。

要了解此查询在做什么，以及为什么它会如此严重地影响性能，请计算：

```
Total rows to filter = Number of rows in table Person
 * Number of rows in table TeacherDriveCity
 * Number of rows in table Instrument
 * Number of rows in table Teacher
 * Number of rows in table Upload
 * Number of rows in table TeacherBiography
 * Number of rows in table TeacherPhilosophy 
```

我很确定这将是一个非常大的数字。

**`EXPLAIN`解释**

从发布`EXPLAIN`的结果来看，情况非常糟糕：

*   如前所述，`ALL`连接下的所有值`type`意味着 MySQL 正在执行全表扫描，即它必须读取表上的所有行。这是非常非常糟糕的。
*   对于大多数连接条件，没有可用的索引，如`NULL`under所示。`possible_keys`这是 MySQL 进行表扫描的另一个原因，它必须查看所有连接的行以过滤所需的行。

我会说最糟糕的部分是通过`city`and过滤`state`。如果没有连接，通过这两个字段在 中进行简单查找`TeacherDriveCity`将需要 MySQL 查看潜在的 7489 行。更不用说这两个字段都包含字符串。

**快速解决**

`JOIN`在and`WHERE`子句中使用的所有列上添加索引。但请考虑不要在和`LEFT`以外的表上使用外部 ( ) 连接。`TeacherBiography``TeacherPhilosophy`

# html - 在 HTML 页面中使用引文本体

> ID：12867586
> 
> 赞同：4
> 
> 时间：2012-10-12T21:49:58.387
> 
> 标签：html, xml, metadata, rdf

CiTO，即引文类型本体，是一种本体，用于描述科学研究文章和其他学术作品中参考引文的性质，包括其他此类出版物和网络信息资源，以及用于在语义网上发布这些描述，[如所述在本文中（开放获取）](http://www.jbiomedsem.com/content/1/S1/S6)

尽管这篇论文很好地解释了本体中可用的术语，但我只有 XML、HTML 和 RDF 的基本知识，而且我有点不清楚如何在网页中实现这些。

让我们想象一下，我正在网上写一篇博客文章，表明我刚刚写的那行反驳了它后面的引文。我可以写：

```
... refutes the analysis of <a rel="cito:refutes" href="http://dx.doi/org/10.1126/science.1197258">Wolfe et al. 2010</a>. 
```

还是我需要在某处为 CiTO 指定命名空间？

例如，我是否需要将页面格式化为 XML，例如

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html xmlns="http://purl.org/net/cito/"> 
```

该行`<html xmlns="http://purl.org/net/cito/">`是添加命名空间的正确方法吗？

在构建链接时，显然我可以为同一篇论文提供许多 URL。有没有关于如何选择这些的最佳实践，或者我可以设置其他属性以明确传递 doi？还是我需要指向一个嵌入了 cito 数据的 URL？这与在 html 锚点中使用“rev”标签有什么关系，有没有时间我会在`rev`标签中添加 cito 链接？

完成此操作后，是否有一种明显的编程方式来生成包含我的引文及其 CiTO 含义的 RDF 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:59:52.437

看起来使用 RDFa 属性，而不是`rel`或`rev`标签，将是执行此操作的最有效方法。

以下解决方案改编自scholarlyhtml.org，在添加DOCTYPE、mime-type，并将链接的属性更改`rel`为RDFa`property`属性，以及链接到的`resource`属性`href`后，在W3C HTML5 nu验证器上成功[验证](http://validator.w3.org/nu)：

```
<!DOCTYPE html>
<html lang="en" property="http://scholarly-html.org/schtml" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta charset="utf-8">
<title> Scholarly HTML </title>
</head>
<body>

    <span property="http://purl.org/dc/terms/title">Title</span>
    <span property="http://purl.org/dc/terms/creator">Author</span>

    <p>Some text which then refers to a cited work
          <a   property="http://purl.org/spar/cito/obtainsBackgroundFrom"  href="http://dx.doi.org/10.1039/B411699M">[citation]</a>
          but it would still be valid if the citation had been formatted and something along the
          lines of
          <a   property="http://purl.org/spar/cito/obtainsBackgroundFrom" href="http://dx.doi.org/10.1039/B411699M">Adams, 2007</a> is also
          allowable.
    </p>
    <p>References can also involve explicitly declaring the elements of the reference entry.
          So the following is also allowable.
          <a property="http://purl.org/spar/cito/parodies" href="#citation">[citation]</a> In this case the information needs to be
          provided elsewhere in the document, possibly in a separate div for the reference list
          entries such as below.
    </p>

<div id="biblography" property="http://purl.org/spar/biro/ReferenceList">
  <span id="citation" property="http://purl.org/spar/biro/BibliographicRecord" about="http://dx.doi.org/10.1039/B411699M">
    <span property="http://purl.org/dc/terms/title">
      Experimental data checker: better information for organic chemists</span>
    <span property="http://purl.org/dc/terms/creator">
        <span resource="http://people.cam.ac.uk/sea36">
            <span property="http://xmlns.com/foaf/spec/name" content="Samuel E. Adams">S. E. Adams</span>
        </span>,
        <span resource="http://people.cam.ac.uk/jmg">
            <span property="http://xmlns.com/foaf/spec/name">J. M. Goodman</span>
        </span>,
    </span>
    <span property="http://purl.org/dc/terms/isPartOf" resource="[http://purl.org/dc/terms/journal]">
        <span property="http://purl.org/dc/terms/title" content="Organic &amp; Biomolecular Chemistry">
        </span>
        <span property="http://purl.org/ontology/bibo/shortTitle">Org. Biomol. Chem.</span>
    </span>
    <span property="http://purl.org/dc/terms/date">2004</span>,
    <span property="http://purl.org/ontology/bibo/volume">2</span>
    (<span property="http://purl.org/ontology/bibo/issue">21</span>),
    <span property="http://purl.org/ontology/bibo/pageStart">3067</span>-
    <span property="http://purl.org/ontology/bibo/pageEnd">3070</span>            <br/>
        DOI: <a href="http://dx.doi.org/10.1039/B411699M" property="http://purl.org/ontology/bibo/doi">10.1039/B411699M</a>
  </span>
</div>
</body>
</html> 
```

我很想听听有关如何改进这一点的任何建议，以及是否可以改为在微数据中实施。

# java - Scanner 中的 nextLine 方法

> ID：12867589
> 
> 赞同：1
> 
> 时间：2012-10-12T21:50:33.420
> 
> 标签：java

> **可能重复：**
> [在 nextInt 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/questions/7056749/scanner-issue-when-using-nextline-after-nextint)

为什么`sc.nextLine();`老公下面的空虚那么有必要？它不等于任何东西，当然妻子没有那条线……但是没有它，程序将无法运行。我的书将其评论为跳过尾随的换行符。但我看不出有什么可以跳过的！

```
public class FileTest {
    public static void main(String[] args) {

    Scanner sc = new Scanner(System.in);
    System.out.print("For your blended family, \n enter the wife's name");
    String wife = sc.nextLine();
    System.out.print("Enter the number of her children:");
    int herkids = sc.nextInt();

    System.out.print("Enter the husband's name:");
    //sc.nextLine();  // Why is this line so necessary? 
    String husband = sc.nextLine();
    System.out.print("Enter the number of his children:");
    int hisKids = sc.nextInt();

    System.out.println(wife + " and " + husband + " have " + (herkids + hisKids) + " children.");

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T21:57:03.907

检查这个问题，

[在 nextXXX 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/questions/7056749/scanner-issue-when-using-nextline-after-nextint)

看看接受的答案，

“问题在于 input.nextInt() 命令它只读取 int 值。因此，当您继续使用 input.nextLine() 读取时，您会收到“\n” Enter 键。所以要跳过这个，您必须添加输入.nextLine()。希望现在应该清楚了。”

# php - 在 Echo For IF Else 语句之后 MySQL 中的 Php Echo

> ID：12867590
> 
> 赞同：-2
> 
> 时间：2012-10-12T21:50:33.630
> 
> 标签：php, mysql

最后一段代码是我的问题。我希望用户能够根据他们所在的页面看到不同样式的链接。该链接将是来自 SQL 表本身的 if else 语句。现在最大的问题是我已经在使用回显变量来拉链接，所以我不确定如何在 SQL 表本身内部重新启动 if else。

```
<?php   
    $result=mysql_query("SELECT * FROM navigation WHERE enabled='1');
            while ($row=
            mysql_fetch_array($result))
                {

                echo $row['link'];

                }
?> 
```

我想展示的是类似的东西

```
<?php   
    $result=mysql_query("SELECT * FROM navigation WHERE enabled='1' AND permissions >'1'");
            while ($row=
            mysql_fetch_array($result))
                {

                echo $row['link'];

                } 
```

我的已启用变量为 1，因此如果变量设置为 0，则页面将被禁用。在此之后，它使用搜索您的用户权限

```
if ($admin != null)//Is Guest
if ($admin->get_permissions()==3)//Is Admin
elseif ($admin->get_permissions()==2)//Is VIP User
elseif ($admin->get_permissions()==1)//Is Registered User 
```

我希望该链接仅根据其注册状态显示给用户，但我最大的问题在于这里。我希望我的用户根据他们所在的页面以某种方式查看导航，但是 SQL 表已经被查询并且已经作为变量导入，所以我将如何让它沿线显示

```
<?php
if (stripos($_SERVER['REQUEST_URI'], 'index.php')){
     echo '<p><a href="index.php" class="active">Home</a></p>';
}
else{
     echo '<p><a href="index.php">Index</a></p>';//<-Note the removed class index in this link
} 
```

对不起，如果很难理解我在说什么；尽我所能把它说出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:06:10.730

您是否尝试过不结合查询并执行以下操作：

```
<?php
    $result=mysql_query("SELECT * FROM navigation WHERE enabled='1'");
    if ($result){
        while ($row=mysql_fetch_array($result)) {
            switch($row['permission']){
                //obv not real html tags!!!
                case 1: echo "<reg>".$row['link']."</reg>"; break; 
                case 2: echo "<vip>".$row['link']."</vip>"; break; 
                case 3: echo "<admin>".$row['link']."</admin>"; break;
                default: echo "<blank>no link</blank>"; break;
            }
        }
    }
?> 
```

# security - 如何在不删除任何用户数据的情况下解决“内核恐慌 - 不同步 - 试图杀死 init”

> ID：12867591
> 
> 赞同：36
> 
> 时间：2012-10-12T21:50:55.370
> 
> 标签：security, ubuntu, linux-kernel, selinux, panic

我试图在我们的 Ubuntu 服务器中更新 libc，但它失败了，现在当我重新启动服务器时，我收到一条错误消息：

> 内核恐慌 - 不同步 - 试图杀死 init！

它只是挂起。

这个问题的解决方案是什么？该服务器由 10 人使用，因此我不想重新安装以删除他们的数据。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-07T15:07:27.650

如果完整的消息是：

```
kernel panic - not syncing: Attempted to kill inint !
PId: 1, comm: init not tainted 2.6.32.-279-5.2.e16.x86_64 #1 
```

那么您应该禁用 selinux，然后重新启动系统。

更简单的方法是使用实​​时操作系统并重新启用它

```
vim /etc/selinux/config
    ...
    SELINUX=enforcing
    ... 
```

第二种选择是通过添加**selinux=0在内核参数中禁用 selinux**

```
vim /boot/grub/grub.conf
    ...
    kernel /boot/vmlinuz-2.4.20-selinux-2003040709 ro root=/dev/hda1 nousb selinux=0
    ... 
```

源[内核恐慌 - 不同步：试图杀死 inint ！](http://www.linuxcat.org/showthread.php?tid=59)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-18T06:42:14.160

1.  挂载centos live cd 并启动
2.  进入救援模式并等待它加载
3.  阅读终端以查看它安装操作系统的位置
4.  进入操作系统
5.  vim 或 nano /etc/selinux/config
6.  确保 SELINUX=enforcing 或 disabled

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-10T14:27:36.203

从 CD 引导以挽救安装和编辑**/etc/selinux/config**：将 SELINUX 从强制更改为许可。重新启动并启动系统

`/etc/selinux/config`更改前：

`SELINUX=enforcing and SELINUXTYPE=permissive`

`/etc/selinux/config`更改后： `SELINUX=permissive and SELINUXTYPE=permissive`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-01T07:04:06.160

解决方案是： -

1.  重新开始
2.  转到高级菜单，然后单击“e”（编辑启动参数）
3.  转到以 linux 开头的行并按 End
4.  新闻空间
5.  在末尾添加以下内容 -> kernel.panic=1
6.  按 F10 重新启动

这基本上会强制您的 PC 重新启动，因为默认情况下它不会在内核崩溃后重新启动。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-27T01:01:38.783

我只是在更换故障磁盘时遇到了这个问题。我已将系统文件复制到新磁盘，并且很擅长在 fstab 中用新磁盘的 UUID 替换旧磁盘的 UUID 条目。

但是，我没有替换 /boot/grub 中 grub.conf（有时是 menu.lst）文件中的 UUID。所以检查你的 grub.conf 文件，如果“内核”行有类似的东西

```
kernel ... root=UUID=906eaa97-f66a-4d39-a39d-5091c7095987 
```

它可能具有旧磁盘的 UUID。将其替换为新磁盘的 UUID 并运行 grub-install（如果您在 live CD 救援中，您可能需要 chroot 或指定 grub 目录）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-25T00:02:02.613

在 grub 屏幕上 goto boot in recovery。

开机按住ESC

它应该带你进入一个 gui 菜单。打开命令并修复 selinux。

我还建议运行干净的损坏包

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-17T16:41:33.110

挂载重新挂载 /
例如。

1.  `mount -o remount,rw /dev/xyz /`
2.  `sed -i 's/1 1/0 0/' /etc/fstab`
3.  `sed -i 's/1 2/0 0/' /etc/fstab`
4.  重启

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-13T07:35:42.697

通过 cd 使用救援模式并挂载文件系统。尝试检查是否删除了任何二进制文件或文件夹。如果被删除，您将不得不手动安装 rpm 以取回这些文件。

[https://askubuntu.com/questions/92946/cannot-boot-because-kernel-panic-not-syncing-attempted-to-kill-init](https://askubuntu.com/questions/92946/cannot-boot-because-kernel-panic-not-syncing-attempted-to-kill-init)

# sql - SQL Server 插入语句成功运行，但即使创建了行，值也不会添加到表中

> ID：12867597
> 
> 赞同：5
> 
> 时间：2012-10-12T21:51:36.453
> 
> 标签：sql, sql-server, tsql

我有如下插入语句。我能够调试我的存储过程并逐步执行我的代码以验证我的代码是否运行，但是发生了一件有趣的事情。

我希望保存在数据库中的值没有保存。相反，在表中创建了一行并`RecordCreatedField`正确创建，甚至包括主键，但我希望插入的实际列没有。除日期列和 ID 外，所有列都是`nvarchar/varchar`，但仅填充了这些列。但是，以下**@PRCUPC ,@PRCEAN ,@PRCGTIN,@PRCatalogNumber**以某种方式被省略了。

```
EXEC spinsertprodcode 
                  @pid out, 
                  @ProdID, 
                  @UPC, 
                  @EAN, 
                  @TIN, 
                  @CNumber, 
                  0, 
                  0, 
                  1, 
                  @staid, 
                  @counter out

INSERT INTO dbo.ProdCodes
(PRProductID
,PRCUPC
,PRCEAN
,PRCGTIN
,PRCatalogNumber
,PRIsReplacement 
,PRIsReplaced 
,PRCRecordCreatedDate 
,PRCIsActive
,PRStatusFlag)

OUTPUT INSERTED.PRCID INTO @opID

VALUES
(@PRProductID, 
@PRCUPC, 
@PRCEAN, 
@PRCGTIN, 
@PRCatalogNumber,
@PRIsReplacement ,
@PRIsReplaced,
GETDATE(), 
@PRCIsActive, 
@PRStatusFlag)

SELECT @PRCID = O.ID FROm @opID O 
```

将不胜感激有关如何解决此问题或了解正在发生的事情的任何建议。

![我确认传递了正确值的调试屏幕的图像](../Images/6422b39eaab5afe01e340b1880c5ce95.png)

这是调用我的插入代码的主存储过程的 SQl 小提琴。 [**我的代码的 SQL Fiddle**](http://sqlfiddle.com/#!6/d41d8/9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:53:36.100

@Kobojunkie：如果您遵循 T-SQL 最佳实践的黄金法则之一，则可以轻松管理此类问题：使用 TRY/CATCH 块来包装 INSERT 和 DELETE 语句的代码。拥有一个适当的 CATCH 块，包括 ERROR_NUMBER、ERROR_SEVERITY、ERROR_PROCEDURE、ERROR_LINE 和 ERROR_MESSAGE 等系统变量，将为您提供有关正在执行的操作出了什么问题的线索：

```
BEGIN CATCH
    SELECT @ErrorDetails = 
            N'Error raised when executing [Insert/Delete] statement: '
            + N' SQL Error: ' + ERROR_NUMBER()
            + N', Level: ' + ERROR_SEVERITY()
            + N', Line: ' + ERROR_LINE()
            + N', Message: ' + ERROR_MESSAGE() 
END CATCH 
```

希望这些信息有助于解决存储过程中的问题！

# javascript - jquery.min.js 与 datepicker 交互

> ID：12867605
> 
> 赞同：0
> 
> 时间：2012-10-12T21:52:11.237
> 
> 标签：javascript, jquery, jquery-pagination

我有一些带有 jquery datepicker 的代码以及一些用于分页的代码。现在我的问题是当我添加以下内容时：

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js'> 
```

我的日期选择器不起作用。

如果我评论上面我的分页代码不起作用。这是我的jQuery代码代码：

```
<link rel='stylesheet' href='http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css' />"
puts "<script src='http://code.jquery.com/jquery-1.8.2.js'></script>"
puts "<script src='http://code.jquery.com/ui/1.9.0/jquery-ui.js'></script>"
puts "<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js'></script>"

puts {
    <script type="text/javascript">
    jQuery(function() {
        jQuery( '#startdatepicker' ).datepicker();

    });

    </script>
}
puts {
    <script type="text/javascript">
    jQuery(function() {
        jQuery( '#enddatepicker' ).datepicker();

    });
    </script>
}
puts {
    <script type="text/javascript">
    jQuery(document).ready(function()
    {

    function Data_Load()
    {
    jQuery("#loading").fadeIn(900,0);
    #jQuery("#loading").html('<img src="bigLoader.gif" />');
    }

    function Hide_Load()
    {
    jQuery("#loading").fadeOut('slow');
    };

    jQuery("#pagination li:first")
    .css({'color' : '#FF0084'}).css({'border' : 'none'});
    Data_Load();
    jQuery("#jcontent").load("nbonbs_log.cgi?page=1", Hide_Load());

    jQuery("#pagination li").click(function(){
    Data_Load();

    jQuery("#pagination li")
    .css({'border' : 'solid #dddddd 1px'})
    .css({'color' : '#0063DC'});

    jQuery(this)
    .css({'color' : '#FF0084'})
    .css({'border' : 'none'});

    var pageNum = this.id;
    jQuery("#jcontent").load("nbonbs_log.cgi?page=" + pageNum, Hide_Load());
    });

    });
    </script>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:56:38.760

有时，如果您多次包含 JQUERY 库，则会导致问题。也许尝试注释掉第一个 JQUERY 包含（jquery-1.8.2.js）。

只是一个猜测。

# wpf - WPF 文本框周围的发光效果不够明显

> ID：12867609
> 
> 赞同：0
> 
> 时间：2012-10-12T21:52:23.980
> 
> 标签：wpf, effects

我正在使用以下样式在文本框周围产生发光效果......但即使我增加 BlurRadius 的宽度，它也不会增加发光区域。

```
 <TextBox.Style>
      <Style TargetType="{x:Type TextBox}">
          <Style.Triggers>
              <Trigger Property="IsKeyboardFocusWithin" Value="True">
                  <Setter Property="Effect">
                      <Setter.Value>
                         <DropShadowEffect  Opacity="1" ShadowDepth="0" Color="Red" BlurRadius="10" />
                      </Setter.Value>
                  </Setter>                     
              </Trigger>                                                              
          </Style.Triggers>
      </Style>
</TextBox.Style> 
```

编辑： **文本框**

```
<TextBox
                                                    x:Name="a"
                                                    DockPanel.Dock="Left"
                                                    MaxLength="11"
                                                    Height="20"
                                                    Width="67"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Stretch"
                                                    HorizontalContentAlignment="Right"                                                    
                                                    utils:InputMasking.Mask="^((\d{0,7})|(\d{0,7}\.\d{0,3}))$">
                                                    <TextBox.Text>
                                                        <Binding Path="abc.Value" NotifyOnValidationError="True" UpdateSourceTrigger="PropertyChanged" Mode="TwoWay" />
                                                    </TextBox.Text>                                                   

                                                </TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:24:16.183

既然是答案，我将重申它：

将 BlurRadius 增加到更大的数字，因为变化很微妙。从 1 到 2 不会很明显，但从 1 到 50 会很明显。

# php - 我的 pdo 查询似乎失败了，我不明白为什么

> ID：12867611
> 
> 赞同：1
> 
> 时间：2012-10-12T21:52:27.763
> 
> 标签：php, pdo

> **可能重复：**
> [PHP PDO bindValue in LIMIT](https://stackoverflow.com/questions/2269840/php-pdo-bindvalue-in-limit)

好的，这是我的查询：

```
$db->sqlquery("
    SELECT a.*, c.`category_name`
    FROM `articles` a LEFT JOIN `articles_categorys` c
    ON c.`category_id` = a.`category_id`
    WHERE a.`active` = 1
    AND a.`category_id` IN (?)
    ORDER BY a.`date`
    DESC LIMIT ?", array($config['article_rss_categorys'], $limit)
); 
```

我检查了`$config['article_rss_categorys']`is set and its `0,1,2,4,6,7`, also `$limit`is set and it's `15`。

这是我的查询代码

```
 try
    {
        $this->STH = $this->database->prepare($sql);

        foreach($objects as $k=>$p)
        {
            // +1 is needed as arrays start at 0 where as ? placeholders start at 1 in PDO
            if(is_numeric($p))
            {
                $this->STH->bindValue($k+1, $p, PDO::PARAM_INT);
            }
            else
            {
                $this->STH->bindValue($k+1, $p, PDO::PARAM_STR);
            }
        }

        return $this->STH->execute();

        $this->counter++;
    }

    catch (PDOException $e)
    {
        $core->message($e->getMessage());
    } 
```

我不明白为什么它失败了，我错过了什么愚蠢的东西吗？

我用正确的东西替换了 phpmyadmin 中的查询，`?`它确实有效，所以数据库很好。

然后我尝试像这样获取并输出结果；

```
while ($line = $db->fetch())
{
    // make date human readable
    $date = $core->format_date($line['date']);

    $output .= "
        <item>
            <title>{$line['category_name']} > {$line['title']}</title>
            <link>http://www.prxa.info/index.php?module=articles_comments&amp;aid={$line['article_id']}</link>
            <pubDate>{$date}</pubDate>
            <guid>http://www.prxa.info/index.php?module=articles_comments&amp;aid={$line['article_id']}</guid>
        </item>";
} 
```

这是我的获取代码：

```
public function fetch()
{
    $this->STH->setFetchMode(PDO::FETCH_ASSOC); 
    return $this->STH->fetch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:12:17.177

据我所知，绑定参数只能表示单个值。您正在尝试这样做：

```
... WHERE foo IN (?) ... 
```

然后绑定一个值数组（我假设），期望结果查询看起来类似于：

```
... WHERE foo IN (1, 2, 3, ...) ... 
```

那是不可能的。您需要为您尝试在子句中使用的一组值中的*每个值设置一个参数：*`IN`

```
... WHERE foo IN (?, ?, ?, ...) ... 
```

**编辑：**

解释一下为什么你只会得到一条记录 - 你将非数字值绑定为字符串，因此 PHP 会将数组转换为具有 value 的字符串`string(5) "Array"`。然后这个字符串将被传递给数据库，并且可以被转换为一个整数（因为这是数据库所期望的，并且大多数数据库的默认设置将键入 coerce）。这个字符串有可能/很可能被强制转换为 integer `0`，从而产生如下查询：

```
... WHERE foo IN (0) ... 
```

...显然会导致难以追踪的错误。

# javascript - jvectormap 区域颜色

> ID：12867615
> 
> 赞同：7
> 
> 时间：2012-10-12T21:53:05.170
> 
> 标签：javascript, jquery, jquery-plugins, maps, jvectormap

我使用[jvectormap 插件](http://jvectormap.com)，我正在尝试设置地图上每个区域的颜色。但是，应用下面的代码后，地图会显示，但没有应用颜色。它只是以白色显示地图。

我已经阅读了有关此问题的多个示例和问题，但我似乎无法让它为我工作。

[在地图上设置随机颜色的示例 1](http://jvectormap.com/examples/random-colors/)。

[文档](http://jvectormap.com/documentation/javascript-api-v1/jvm-dataseries/)

[与我的类似问题](https://stackoverflow.com/questions/11750145/javascript-trouble-using-for-in-to-iterate-through-an-object)，但它不能解决我的问题。

```
jQuery('#mapDiv').vectorMap({
    map: 'au_merc_en',
    backgroundColor: 'none',
    colors: {
        AU-SA: '#4E7387',
        AU-WA:'#333333',
        AU-VIC:'#89AFBF',
        AU-TAS:'#817F8E',
        AU-QLD:'#344B5E',
        AU-NSW:'#344B5E',
        AU-ACT:'#344B5E',
        AU-NT:'#344B5E'

    },
    series: {
      regions: 
      [{
        attribute: 'fill'
      }]
    }
}); 
```

任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T00:57:48.707

这是我认为您正在尝试做的工作示例。

[http://jsfiddle.net/3xZ28/34/](http://jsfiddle.net/3xZ28/34/)

```
(function() {
    var myCustomColors = {
        'AU-SA': '#4E7387',
        'AU-WA': '#333333',
        'AU-VIC': '#89AFBF',
        'AU-TAS': '#817F8E',
        'AU-QLD': '#344B5E',
        'AU-NSW': '#344B5E',
        'AU-ACT': '#344B5E',
        'AU-NT': '#344B5E'
    };

    map = new jvm.WorldMap({
        map: 'au_merc_en',
        container: $('#ausie'),
        backgroundColor: '#eff7ff',
        series: {
            regions: [{
                attribute: 'fill'
            }]
        }
    });

    map.series.regions[0].setValues(myCustomColors);
})(); 
```

此示例基于 jvectormap 站点上的两个示例：
1\. [http://jvectormap.com/maps/countries/australia/](http://jvectormap.com/maps/countries/australia/)
2\. [http://jvectormap.com/examples/random-colors/](http://jvectormap.com/examples/random-colors/)

小提琴包括来自该站点的 jvectormap 1.1 文件。另请注意站点上的随机颜色示例使用 jvm。[世界地图](http://jvectormap.com/documentation/javascript-api-v1/jvm-worldmap/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T00:37:22.707

下面的代码已经过编辑，以修复您发布的代码中的语法错误。

```
jQuery('#mapDiv').vectorMap({
    map: 'au_merc_en',
    backgroundColor: 'none',
    colors:{
        "AU-SA": '#4E7387',
        "AU-WA":'#333333',
        "AU-VIC":'#89AFBF',
        "AU-TAS":'#817F8E',
        "AU-QLD":'#344B5E',
        "AU-NSW":'#344B5E',
        "AU-ACT":'#344B5E',
        "AU-NT":'#344B5E'

    },
    series: {
      regions: 
      [{
        attribute: 'fill'
      }]
    }
}); 
```

对象键中的未绑定（我可以召集的最接近的封装反义词）连字符会导致语法错误。错误本身是针对无效标签的。

# database - 在 SQL Server 2008 r2 中合并两个数据库的过程是什么？

> ID：12867621
> 
> 赞同：1
> 
> 时间：2012-10-12T21:53:30.430
> 
> 标签：database, merge, sql-server-2008-r2

我想在 SQL Server 2008 r2 中合并两个数据库。两个数据库的方案相同。每个数据中都会有一些相同的数据，并且很可能会有一些数据差异。

我会说我是一个中级用户，尽管远非专家。任何让我走上正轨的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:10:15.077

好吧，我不知道您是否只想出于某种目的合并一次，或者您需要保持两个数据库中的更改同步，无论哪种方式，我都建议您使用模式/数据比较工具。我们使用 RedGate 的一款名为[SQL Compare](http://www.red-gate.com/products/sql-development/sql-compare/)的产品，它确实为我们省去了很多麻烦。

因此，每当一些开发人员对其本地数据库副本进行更改时，他们可以将其与另一个“生产状态”的副本进行比较，这样我们就可以生成脚本来同步两者。它非常简单，尽管如果您的表上有正确的 PK（即用于数据比较）会更容易，无论哪种方式，您都可以始终设置用于数据比较的键和组合。对于模式比较，它甚至更容易。

只是一个额外的提示，这些人还有一个名为 SQL Source Control 的产品，它就是数据库的源代码控制，也可以节省很多时间。

**请注意：**我不打算出售他们的产品，但它们非常好，为我们节省了很多时间，我不得不提到它们 :)

# ormlite-servicestack - ServiceStack.OrmLite 中奇怪的“读取器关闭时调用读取的尝试无效”异常

> ID：12867626
> 
> 赞同：2
> 
> 时间：2012-10-12T21:53:45.367
> 
> 标签：ormlite-servicestack

案子：

在网络配置中：

```
 MultipleActiveResultSets=true 
```

Web Request 中有两个独立的连接：

```
public IDbConnection GetOpenConnection()
    {
        var connection = ConnectionFactory.OpenDbConnection();
        return connection;
    }

using (var con = GetOpenConnection())
{
    var users = con.Select<User>(@"Select * from User (nolock)");
} 

using (var con = GetOpenConnection())
{
    var classrooms= con.Select<Classroom>(@"Select * from Classroom (nolock)");
} 
```

但是，如果我使用新的 IDbConnection Extensions，则会出现随机的“阅读器关闭时调用 Read 的尝试无效”异常。

而这疑似ServiceStack.OrmLite方法：

```
public static T Exec<T>(this IDbConnection dbConn, Func<IDbCommand, T> filter)
    {
        var holdProvider = OrmLiteConfig.TSDialectProvider;
        try
        {
            var ormLiteDbConn = dbConn as OrmLiteConnection;
            if (ormLiteDbConn != null)
                OrmLiteConfig.TSDialectProvider = ormLiteDbConn.Factory.DialectProvider;

            using (var dbCmd = dbConn.CreateCommand())
            {
                dbCmd.Transaction = OrmLiteConfig.CurrentTransaction;

                var ret = filter(dbCmd);
                LastCommandText = dbCmd.CommandText;
                return ret;
            }
        }
        finally
        {
            OrmLiteConfig.TSDialectProvider = holdProvider;
        }
    } 
```

任何想法？

**更新**

我从 OrmLiteUtilExtensions 中的 ConvertToList 收到相同的错误。

**6 年后更新**

我的问题太老了。我不认为这个问题仍在继续，很可能这个问题已经过时了。但是由于“过时”，无法关闭该问题。我认为，SO必须添加“过时”选项来关闭原因。

[![在此处输入图像描述](../Images/54c4c7d09ec2caf87a56cb7a31d8193e.png)](https://i.stack.imgur.com/7UIxq.png)

# microsoft-metro - 侧载 Metro 应用程序需要开发人员许可证吗？

> ID：12867629
> 
> 赞同：0
> 
> 时间：2012-10-12T21:54:01.010
> 
> 标签：microsoft-metro, sideloading

是否需要在目标计算机上拥有开发人员许可证才能旁载 Metro 应用程序？如果用户不想要/没有开发者许可证（live id）怎么办？除了将应用程序提交到商店之外，我如何解决它？另外，机器是否需要加入域才能旁加载应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T20:51:08.597

应该有一种方法可以使用 TechNet 文章 Rafael 链接中提到的“旁加载产品激活密钥”来启用旁加载：

“在您可以运行旁加载的 LOB 应用程序之前：

您必须在运行 Windows 8 Enterprise 或 Windows® 8 Pro 的设备上激活**旁加载产品密钥。**您必须在运行 Windows RT 的设备上激活旁加载产品密钥。

-或者-

您必须将运行 Windows 8 Enterprise 或 Windows Server 2012 的设备加入启用了允许所有受信任的应用程序安装组策略设置的 Active Directory 域。

...**要在未加入域的 Windows 8 Enterprise 设备上启用旁加载，您必须使用旁加载产品激活密钥**。”

这篇博文更详细，但遗憾的是也没有提到从哪里获得产品密钥：http: [//blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-到企业.aspx](http://blogs.msdn.com/b/windowsstore/archive/2012/04/25/deploying-metro-style-apps-to-businesses.aspx)

然后应使用以下代码启用侧载：

```
slmgr /ipk <sideloading product key>
slmgr /ato ec67814b-30e6-4a50-bf7b-d55daf729d1e 
```

ec67814b-30e6-4a50-bf7b-d55daf729d1e 始终与用作“激活 GUID”的密钥相同。

剩下的问题是从哪里获得这个旁加载产品激活密钥。我还没有找到答案（例如参见[http://technet.microsoft.com/en-us/library/ff793433.aspx](http://technet.microsoft.com/en-us/library/ff793433.aspx)）。可能公司必须从 Microsoft 购买此类密钥，但他们还没有解决方案。我向与我有联系的 Microsoft Evangelist 提出了这个问题，希望很快能得到答案（我将在此处发布）。

顺便说一句，对于向客户部署 Windows 应用商店应用程序的公司，Microsoft simple 必须允许在没有应用商店且无需加入域的情况下进行部署。没有其他方法可以仅向某些客户部署应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:55:24.627

这个微软资源很好地恢复了它：[http](http://technet.microsoft.com/en-us/library/hh852635.aspx) ://technet.microsoft.com/en-us/library/hh852635.aspx ；简而言之，除非您使用 Windows 8 Enterprise 并且在域中，否则旁加载的唯一方法是使用开发人员许可证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-16T14:56:26.783

如果在没有在企业中测试您自己的应用程序的情况下进行旁加载，您只需要开发人员许可证即可在另一台机器上测试该应用程序。如果您要让其他人进行测试，那么人们会假设他们需要开发人员许可证-本文指的是开发人员许可证并提到了侧载-http: [//msdn.microsoft.com/en-gb/library/windows/apps /hh974578.aspx](http://msdn.microsoft.com/en-gb/library/windows/apps/hh974578.aspx)

# java - 获取活动树android

> ID：12867632
> 
> 赞同：0
> 
> 时间：2012-10-12T21:54:25.763
> 
> 标签：java, android, testing, android-activity

嗨，只是想知道是否有可能了解哪个活动先于哪个活动？从 android 清单文件中，我们可以获得活动列表。但是是否有可能获得诸如可以从哪个活动到达哪个活动的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:57:56.007

无法静态获取此信息（例如，仅通过查看清单文件）。在运行时，应用程序可以根据当时做出的决定来决定启动任何不同的活动。

您可能可以通过查看活动 A 的代码来猜测“我们可以从活动 A 转到活动 B”的有限版本，但不能保证能找到所有内容。

# mysql - 使用复合连接查找 ActiveRecord

> ID：12867638
> 
> 赞同：0
> 
> 时间：2012-10-12T21:54:42.190
> 
> 标签：mysql, activerecord, ruby-on-rails-3.1

假设我想做

```
SELECT persons.name, cars.registration FROM persons, cars 
   WHERE persons.state=cars.state AND persons.state_id_number=cars.owner_id_number ; 
```

提示：不同州的人可以有相同的`state_id_number`，但在一个州内是独一无二的。

我可以

```
People.find_by_sql("SELECT persons.name, cars.registration FROM persons, cars
   WHERE persons.state=cars.state AND persons.state_id_number=cars.owner_id_number") 
```

获取记录列表。

但是我可以使用该`find(:all, :conditions => {`格式来做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:03:03.740

假设您有关联 :cars 设置

```
People.joins(:cars).where("persons.state=cars.state AND persons.state_id_number=cars.owner_id_number").all 
```

不会完全一样，但应该很接近

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:25:52.920

```
class Person < ActiveRecord::Base
  has_many :cars,
      :foreign_key => "owner_id_number",
      :primary_key => "state_id_number",
      :conditions => "persons.state = cars.state"
end

class Car < ActiveRecord::Base
  belongs_to :person,
      :foreign_key => "owner_id_number",
      :primary_key => "state_id_number",
      :conditions => "persons.state = cars.state"
end

Person.includes(:cars) 
```

# c - 带有 GL_CURRENT_COLOR 的 glGetFloatv 不起作用

> ID：12867641
> 
> 赞同：4
> 
> 时间：2012-10-12T21:55:13.043
> 
> 标签：c, opengl, graphics, colors

我有一些看起来像这样的代码：

```
GLfloat c[4];
glGetFloatv(GL_CURRENT_COLOR, c); 
```

我希望在`c`调用`glGetFloatv`. 然而，数组中的值根本没有改变（即它在调用 之前和之后都包含相同的垃圾值`glGetFloatv`）。

显然我要么误解了`GL_CURRENT_COLOR`（获取先前通过调用设置的颜色）的含义，`glColor4f`要么做错了什么......

PS：另外，这个过程可能会在任何调用`glColor4f`发生之前被调用，但在那种情况下，我认为它应该返回`(1.0, 1.0, 1.0, 1.0)`，对吧？

**编辑：**`glGetError`尝试获取颜色后调用返回`0`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:57:34.860

在这里工作得很好：

```
#include <GL/glut.h>
#include <iostream>
using namespace std;

void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT);

    GLfloat color[4];

    glGetFloatv(GL_CURRENT_COLOR, color);
    cout << "Default color: ";
    for( size_t i = 0; i < 4; i++ )
        cout << color[i] << " ";
    cout << endl;

    glColor3ub( 255,0,0 );
    glGetFloatv(GL_CURRENT_COLOR, color);
    cout << "Should be red: ";
    for( size_t i = 0; i < 4; i++ )
        cout << color[i] << " ";
    cout << endl;

    glutSwapBuffers();
}

int main(int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE);

    glutInitWindowSize(200,200);
    glutCreateWindow("Color");

    glutDisplayFunc(display);
    glutMainLoop();
    return 0;
} 
```

输出：

```
Default color: 1 1 1 1
Should be red: 1 0 0 1 
```

* * *

> PS：另外，这个过程可能会在调用 glColor4f 之前被调用，但在这种情况下，我假设它应该返回 (1.0, 1.0, 1.0, 1.0)，对吧？

[“当前颜色的初始值为 (1, 1, 1, 1)。”](http://www.opengl.org/sdk/docs/man/xhtml/glColor.xml#notes)

# ios - UIPickerView 显示错误的标题

> ID：12867642
> 
> 赞同：5
> 
> 时间：2012-10-12T21:55:19.963
> 
> 标签：ios, uipickerview

我的应用程序是一个带有多组件拾取轮的转换器。它用于转换一些变量。您可以看到的数字仅用于测试，实际上并不重要。

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  _convertFrom = @[@"One (1)", @"Two (2)",
  @"Three (3)", @"Four (4)", @"Five (5)"];

  _convertRates = @[ @1.0f, @2.0f, @3.0f,
  @4.0f, @5.0f];

  _convertTo = @[@"One (1)", @"Two (2)",
  @"Three (3)", @"Four (4)", @"Five (5)"];

_convertRates = @[ @1.0f, @2.0f, @3.0f,
@4.0f, @5.0f];

} 
```

我在 iOS 6 模拟器中测试应用程序时显示的数字有一个小问题。正如你在这里看到的：

![截屏](../Images/e20c316e453ad772843305736f116ed6.png)

[http://imgur.com/q4uxm](https://imgur.com/q4uxm)

当我尝试从列表中删除时，数字会发生变化。但他们的价值没有。如果有人有时间检查一下并找到解决方案，那将非常有帮助:)

这是在这种情况下可能很重要的其余代码：

```
#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:
 (UIPickerView *)pickerView
{
return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:    (NSInteger)component
{
if (component == 0)  {
    return [_convertFrom count];
}
return [_convertTo count];
}

- (NSString *) pickerView: (UIPickerView *)pickerView
          titleForRow:(NSInteger)row
         forComponent:(NSInteger)component
{
if (component == 0) {
    return [_convertFrom objectAtIndex:[pickerView selectedRowInComponent:0]];
}
return [_convertTo objectAtIndex:[pickerView selectedRowInComponent:1]];
}

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{
    float convertFrom = [[_convertRates objectAtIndex:[pickerView  selectedRowInComponent:0]] floatValue];
float convertTo = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1]] floatValue];
float input = [dollarText.text floatValue];
float to = convertTo;
float from = convertFrom;
float dollars = input;
float result = to * from * dollars;
float mtpaTilMtpaFloat = dollars * 1;
NSString *resultString = [[NSString alloc] initWithFormat:
                          @"result = %.2f *  %.2f = %.2f", from, to, result];
resultLabel.text = resultString;

NSString *mtpaTilmtpa = [[NSString alloc ] initWithFormat:
                           @" %.2f MTPA = %.2f MTPA", dollars, mtpaTilMtpaFloat];

if (from == 1, to == 1) { resultLabel.text = mtpaTilmtpa;
} 
```

当然，如果我需要显示更多代码以便您理解，请告诉我。这是我第一次使用这个网站顺便说一句:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:57:22.700

不要使用`selectedRowInComponent`. 您不想显示在所有行中选择的值。只需使用`row`

```
- (NSString *) pickerView: (UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    if (component == 0) {
        return [_convertFrom objectAtIndex:row];
    }
    return [_convertTo objectAtIndex:row];
} 
```

# sql - 如何从此表中检索 DISTINCT 值？

> ID：12867644
> 
> 赞同：4
> 
> 时间：2012-10-12T21:55:33.210
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这是我的表值。( 7 条记录 )

```
SELECT * FROM tbl1 
```

由于我的代表很低，我无法发布图像。所以我在这里链接它 [http://i.stack.imgur.com/CFl0u.png](http://i.stack.imgur.com/CFl0u.png)

我写了一个查询以避免最后一条记录，但我仍然得到最后一条记录。（我只需要不同的电子邮件）

```
SELECT DISTINCT CandEmail,CandName,EmployerId,ContNum,IsDeleted,CandPortalId FROM tbl1
WHERE EmployerId = 7 AND IsDeleted = 0 
```

上面的查询仍然检索到与最后一个重复电子邮件记录相同的 7 条记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T21:58:53.387

您可以使用[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.100%29.aspx)with`OVER`子句：

```
WITH CTE AS
(
  SELECT CandEmail,CandName,EmployerId,ContNum,IsDeleted,CandPortalId
        , RN = ROW_NUMBER() OVER (PARTITION BY CandEmail ORDER BY ContNum DESC)
  FROM tbl1
  WHERE IsDeleted = 0
)
SELECT CandEmail,CandName,EmployerId,ContNum,IsDeleted,CandPortalId
FROM CTE WHERE RN = 1 
```

[OVER 子句 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189461.aspx)

> 在应用关联的窗口函数之前确定行集的分区和排序。也就是说，OVER 子句在查询结果集中定义了一个窗口或用户指定的一组行。然后窗口函数为窗口中的每一行计算一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:57:38.333

使用`group by`：--

```
 SELECT CandEmail, MAX(CandName), MAX(EmployerId), MAX(ContNum), MAX(IsDeleted),          MAX(CandPortalId)
  FROM tbl1
  WHERE EmployerId = 7 AND IsDeleted = 0
  GROUP BY CandEmail 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:58:26.850

```
SELECT CandEmail, 
       MAX(CandName), 
       7 [EmployerId], 
       MAX(ContNum), 
       0 [IsDeleted], 
       MAX(CandPortalId)
FROM   tbl1
WHERE  EmployerId = 7 AND IsDeleted = 0
GROUP BY CandEmail 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T21:58:33.207

如果您不在乎`ContNum`得到哪个，那么您可以在该字段周围放置一个聚合函数，然后`GROUP BY`是其余部分：

```
SELECT CandEmail,
  CandName,
  EmployerId,
  MIN(ContNum) ContNum,  -- or you can use MAX()
  IsDeleted,
  CandPortalId 
FROM tbl1
WHERE EmployerId = 7 
  AND IsDeleted = 0
GROUP BY CandEmail,
  CandName,
  EmployerId, 
  IsDeleted,
  CandPortalId 
```

或者正如其他人指出的那样，您也应该在其他字段上使用聚合函数，除非您确定这些列中没有不同的值：

```
SELECT CandEmail,
  min(CandName) CandName,
  min(EmployerId) EmployerId,
  MIN(ContNum) ContNum,  -- or you can use MAX()
  min(IsDeleted) IsDeleted,
  min(CandPortalId) CandPortalId
FROM tbl1
WHERE EmployerId = 7 
  AND IsDeleted = 0
GROUP BY CandEmail 
```

# php - 正则表达式 - 从字符串末尾搜索

> ID：12867650
> 
> 赞同：5
> 
> 时间：2012-10-12T21:56:11.597
> 
> 标签：php, regex

我如何从字符串的末尾定位一些东西：
`complexthing---50` `other-_-50` `MORE__------50`

我想以 (50) 结尾，但这个“复杂的东西--”可以以 - 所以在这种情况下，我不能在“ - ”处打破可能会使它感到困惑的乞求，所以对我来说最简单的正则表达式就是让它最后得到任何东西并在“ - ”处休息

```
-(.*) 
```

**总是有一个*-*在每 50 之前**分隔数字和字符串，我想定位数字（50）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T22:01:35.780

如果我理解正确，这样的事情可能会起作用：

```
-(\d+)$ 
```

匹配连字符 (-) 后跟一个或多个数字 (\d+)，紧邻字符串 ($) 的结尾。仅捕获数字（ (...) ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:16:57.027

想想你要的是什么：

*   始终位于字符串末尾的数字
*   紧跟`-`字符的数字。
*   跟在一个字符后面的东西`-`，它本身不是一个`-`字符。

这些都是表达您的问题的不同方式，随着我们的进行变得不那么具体。这些中的任何一个都可能满足您的需求，但我将介绍每种情况以展示它是如何做到的。

这些可以用多种不同的方式拼写。根据您使用的正则表达式风格，其中一些方法可能需要以不同方式转义（例如，`X+`vs `X\+`vs `XX*`），并且并非所有风格都支持所有方法。

“始终位于字符串末尾的数字”：

```
([0-9][0-9]*)$
([0-9]+)$
(\d+)$ 
```

正则表达式模式是[贪婪](http://www.exampledepot.com/egs/java.util.regex/greedy.html)的，即：它们尽可能匹配。因此，在第一种情况下，在字符串末尾询问至少一个数字（“在字符串末尾”指定为`$`），最终会在字符串末尾为您提供整个数字。

“紧跟`-`字符的数字”：

```
-([0-9][0-9]*)
-([0-9]+)
-(\d+) 
```

在这里，我们指定它应该跟在一个`-`字符之后，而不是指定“字符串的结尾”。因为`[0-9]`不会匹配`-`字符本身，所以我们不需要做任何其他事情来避免捕获`-`。

“跟在 - 字符后面的东西，它本身不是 - 字符”：

```
-([^-][^-]*)
-([^-]+) 
```

这个有点棘手：我们没有指定我们想要一个数字，而是通过指定一个否定匹配 ( )来指定我们*不需要破折号。*`[^X]`有时`-`在字符类中匹配一个字符可能会很棘手，但规则是“总是`-`在*开头*指定”，你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:01:30.297

您可以使用 OR 运算符 ,`|`让它决定是这个还是那个。

# dicom - 无法清除 vtkRenderWindow

> ID：12867654
> 
> 赞同：3
> 
> 时间：2012-10-12T21:56:43.223
> 
> 标签：dicom, vtk, renderer

我正在使用带有一堆 vtkImageMapper、vtkActor2D 和两个 v​​tkRenderer 的 QVTKWidget。

我使用 DICOM 图像将所有这些对象加载到 QVTKWidget 中。

有两个渲染器，因为用户可以同时打开两个图像。

但是，他可能想关闭一个图像 um 命令来替换它。问题是我无法将旧图像从窗口中取出。

来自渲染 Windows 的方法 Clear() 显然不起作用。与 RemoveAllProps() 相同。

那么，我怎样才能清除Windows？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:50:10.543

RemoveAllViewProps() 在这种情况下应该可以工作。也许您仍然可以看到图像，因为窗口尚未更新。你能在移除所有道具后通过调用 Render() 来确保渲染窗口被刷新吗？

# blackberry-10 - 在黑莓 10 中访问电话锁

> ID：12867655
> 
> 赞同：0
> 
> 时间：2012-10-12T21:56:48.823
> 
> 标签：blackberry-10, blackberry-ndk

我想检查用户是否在黑莓 10 设备手机锁上输入了错误的密码。有没有办法这样做，或者我应该制作一个自定义电话锁应用程序并做同样的事情？我正在避免使用自定义电话锁应用程序，因为我不知道它将如何取代内置电话锁。（我是平台 10 的 BB Native SDK 的初学者编码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:26:08.220

如果用户在尝试解锁 BlackBerry 时输入了错误的密码，没有 API 会通知您的应用程序。

# sql - SQL to retrieve single row

> ID：12867660
> 
> 赞同：1
> 
> 时间：2012-10-12T21:57:29.107
> 
> 标签：sql, oracle, plsql

I have below data, I want to retrieve as single row.

Customer

```
customer id    customer name  order id

1               Jhon           1

2                philips       1

Order id   order name  order status   order status time
----------------------------------------------------------------    
   1       iphone      delivered      20121011 12:10:01
   1       iphone      cancelled      20121011 14:30:00 
```

Based on above data, I have to display as below

```
order id  order name  order status(D)  order status(C) order status(c) time  order status(D) time
------------------------------------------------------------------------------------------------    
   1      iphone      delivered        cancelled       20121011 14:30:00     20121011 12:10:01 
```

Please help me to write this SQL

Regards,

Chaitu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:20:38.127

You can use an aggregate function and a `CASE` statement for this:

```
select orderid,
  ordername,
  max(case when orderstatus = 'delivered' then orderstatus end) OrderStatusD,
  max(case when orderstatus = 'cancelled' then orderstatus end) OrderStatusC,
  max(case when orderstatus = 'delivered' then orderstatustime end) OrderStatusDTime,
  max(case when orderstatus = 'cancelled' then orderstatustime end) OrderStatusCTime
from yourtable
group by orderid, ordername 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!4/8f997/1)

Based on your comments, you can use the following:

```
select * 
from 
(
  select c.*, 
    row_number() over(partition by orderid order by customerid) rn
  from customer c
) c
inner join
(
  select orderid,
    ordername,
    max(case when orderstatus = 'delivered' then orderstatus end) OrderStatusD,
    max(case when orderstatus = 'cancelled' then orderstatus end) OrderStatusC,
    max(case when orderstatus = 'delivered' then orderstatustime end) OrderStatusDTime,
    max(case when orderstatus = 'cancelled' then orderstatustime end) OrderStatusCTime
  from yourtable
  group by orderid, ordername
) table1
  on c.orderid = table1.orderid
  and c.rn = 1 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!4/d90c6/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:48:12.523

You can do a self join and then filter for the status

```
select 
  yt_d.orderid,
  yt_d.ordername,
  yt_d.orderstatus orderstatusD,
  yt_c.orderstatus orderstatusC,
  yt_d.orderstatustime orderstatustimeD,
  yt_c.orderstatustime orderstatustimeC 

from yourtable yt_d
     INNER JOIN yourtable yt_c
      ON yt_d.orderid = yt_c.orderID

where
  yt_d.orderstatus = 'delivered' 
  and yt_c.orderstatus = 'cancelled' 
```

[SQL Fiddle demo](http://sqlfiddle.com/#!4/8f997/7)

You could include the filters in the join if you had more tables involved and you wanted a left join

e.g.

```
 order o
    LEFT JOIN order_status d
      on o.orderID = d.orderID
        and d.Status = 'delivered'

    LEFT JOIN order_status c
      on o.orderID = c.orderID
        and c.Status = 'canceled' 
```

# jquery - Rails3 Paperclip JCrop 进入循环

> ID：12867661
> 
> 赞同：3
> 
> 时间：2012-10-12T21:57:30.203
> 
> 标签：jquery, ruby-on-rails, ruby, paperclip, jcrop

我有这个配置的典型设置，没什么特别的，就像本教程中的一样：http: [//shareyourtechskills.blogspot.com/2011/01/jcrop-with-paper-clip-plugin.html](http://shareyourtechskills.blogspot.com/2011/01/jcrop-with-paper-clip-plugin.html)

上传头像 - 工作，但是当我裁剪它时，进程卡在循环中，控制台中出现以下错误：

```
convert: GeometryDoesNotContainImage `/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1cbz90w20121013-26133-1x1vcii20121013-26133-gjlod.png' @ warning/transform.c/CropImage/572.
convert: GeometryDoesNotContainImage `/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-fwu1jt.jpg' @ warning/transform.c/CropImage/572.
convert: GeometryDoesNotContainImage `/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-fwu1jt20121013-26133-1p255t220121013-26133-i8ny07.png' @ warning/transform.c/CropImage/572.
convert: GeometryDoesNotContainImage `/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-18wr3op.jpg' @ warning/transform.c/CropImage/572.
convert: GeometryDoesNotContainImage `/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-18wr3op20121013-26133-kp6o120121013-26133-1ut9jfy.png' @ warning/transform.c/CropImage/572.
convert: GeometryDoesNotContainImage `/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hjxk9x.jpg' @ warning/transform.c/CropImage/572.
convert: GeometryDoesNotContainImage `/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hjxk9x20121013-26133-rjrf8c20121013-26133-1eyrpxv.png' @ warning/transform.c/CropImage/572.
convert: GeometryDoesNotContainImage `/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-6h4lu.jpg' @ warning/transform.c/CropImage/572. 
```

这个字符串大约有 500 个，然后我得到这个：

```
Started PUT "/users/1" for 127.0.0.1 at 2012-10-13 00:34:24 +0300
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ht7YiTS5yOqXFy0EWeFVLBfv5eZU0codQfR8DvlKHA=", "user"=>{"crop_x"=>"223", "crop_y"=>"113", "crop_w"=>"145", "crop_h"=>"145"}, "commit"=>"Сохранить", "id"=>"1"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "1"]]
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1
   (0.0ms)  begin transaction
  User Exists (0.1ms)  SELECT 1 FROM "users" WHERE (LOWER("users"."email") = LOWER('example@example.com') AND "users"."id" != 1) LIMIT 1
Command :: identify -format %wx%h '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn.jpg[0]'
Command :: convert '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn.jpg[0]' -crop 145x145+223+113 -auto-orient -resize "145x" +repage '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn20121013-26133-1hplq8v.png'
Command :: identify -format %wx%h '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn20121013-26133-1hplq8v20121013-26133-m37pe.png[0]'
Command :: identify -format %m '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn20121013-26133-1hplq8v20121013-26133-m37pe.png[0]'
Command :: identify -format %m '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn20121013-26133-1hplq8v20121013-26133-m37pe.png[0]'
Command :: convert '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn20121013-26133-1hplq8v20121013-26133-m37pe.png[0]' -crop 145x145+223+113 -auto-orient -resize "50x" +repage '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn20121013-26133-1hplq8v20121013-26133-m37pe20121013-26133-nkvpon'
Command :: file -b --mime '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-10hxtsn20121013-26133-1hplq8v20121013-26133-m37pe20121013-26133-nkvpon'
  CACHE (0.0ms)  SELECT 1 FROM "users" WHERE (LOWER("users"."email") = LOWER('inc@gnezdom.com') AND "users"."id" != 1) LIMIT 1
Command :: identify -format %wx%h '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut940.jpg[0]'
Command :: convert '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut940.jpg[0]' -crop 145x145+223+113 -auto-orient -resize "145x" +repage '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut94020121013-26133-1k0w0qh.png'
Command :: identify -format %wx%h '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut94020121013-26133-1k0w0qh20121013-26133-69pm09.png[0]'
Command :: identify -format %m '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut94020121013-26133-1k0w0qh20121013-26133-69pm09.png[0]'
Command :: identify -format %m '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut94020121013-26133-1k0w0qh20121013-26133-69pm09.png[0]'
Command :: convert '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut94020121013-26133-1k0w0qh20121013-26133-69pm09.png[0]' -crop 145x145+223+113 -auto-orient -resize "50x" +repage '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut94020121013-26133-1k0w0qh20121013-26133-69pm0920121013-26133-2rw91z'
Command :: file -b --mime '/var/folders/4p/v_37jqkj6810y7wsd8b7ly100000gn/T/38361898520121013-26133-1hut94020121013-26133-1k0w0qh20121013-26133-69pm0920121013-26133-2rw91z' 
```

也在 500 左右，然后我在浏览器中收到此错误：

```
SystemStackError in UsersController#update
stack level too deep 
```

我很感兴趣为什么有这么多图片，如果我只修剪一张？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T13:52:31.703

大多数文章已经过时并且与当前版本的回形针和导轨不兼容，因此此配置需要重新组织，如此评论中所述[http://railscasts.com/episodes/182-cropping-images?view=comments#comment_160006](http://railscasts.com/episodes/182-cropping-images?view=comments#comment_160006) Fona 说， 那

```
 avatar.reprocess! 
```

必须不是从模型调用，而是从这样的控制器调用：

```
 @user.avatar.reprocess! 
```

当然，您需要验证它是否存在裁剪变量，例如crop_x 和其他 PS Thx，Fona 以供您发表评论。

# asp.net-mvc-3 - ASP.Net MVC 和站点管理员

> ID：12867667
> 
> 赞同：2
> 
> 时间：2012-10-12T21:58:09.027
> 
> 标签：asp.net-mvc-3, siteminder

我是站点管理员的新手。我需要构建一个 ASP.Net MVC 应用程序并使用 siteminder 进行单点登录过程。如果有人能指导我正确的方向，那就太好了。寻找教程或真实世界的示例应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:35:19.207

除了在 web.config 文件中添加正确的设置以启用 Siteminder 之外，您无需在应用程序端做太多事情。

这通常包括在 web.config 文件的部分中添加处理程序。

类似于这两行..

```
 <add name="handler-wa-32" path="*" verb="*" modules="IsapiModule" scriptProcessor="C:\Program Files\CA\webagent\win32\bin\ISAPI6WebAgent.dll" resourceType="Unspecified" requireAccess="None" preCondition="classicMode,bitness32" />
  <add name="CASiteMinderWebAgentHandler-fcc-32" path="*.fcc" verb="*" modules="CASiteMinderWebagentModule-32" resourceType="Unspecified" preCondition="integratedMode,bitness32" /> 
```

还有一个 isapifilter

```
 <isapiFilters>
  <filter name="SiteMinder Agent" path="C:\Program Files\CA\webagent\win64\bin\ISAPI6WebAgent.dll" enabled="true" preCondition="classicMode,bitness64" />
</isapiFilters> 
```

您是否也在处理 Siteminder 的实例？在 IIS 中配置启用站点管理员的设置。并且其中一些条目可以通过在 IIS 中配置站点管理器的 GUI 工具进行。

我们有一个小组负责管理这里的服务器，所以我无法帮助您解决服务器端的设置和配置问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:37:13.620

那里似乎没有很多，你读过这篇codeproject文章吗

[如何使用 HTTP 请求连接到 SiteMinder 受保护的资源](http://www.codeproject.com/Articles/80314/How-to-Connect-to-a-SiteMinder-Protected-Resource)

# windows-8 - 如何检测 Windows 8 上使用的手指数量

> ID：12867672
> 
> 赞同：1
> 
> 时间：2012-10-12T21:58:51.437
> 
> 标签：windows-8, multi-touch

我只是想知道做 Windows 8 应用程序时屏幕上的接触点数量。我的情景是，我只想通过在指定区域按住 1-5 个手指 X 秒来对一篇文章进行评分，但我无法检测到接触点的数量。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:40:02.307

您将收到`WM_POINTERDOWN`每次联系的消息，以及`WM_POINTERUP`在联系被释放时的对应消息。（或者当你失去所有联系人时你会得到一个`WM_POINTERCAPTURECHANGED`。）你可以手动跟踪有多少是关闭的，或者你可以询问`GetPointerFrameInfo`当前帧中所有联系人的状态。

# android - GoLauncher 以及它是如何获得 SET_PREFERRED_APPLICATIONS 权限的？

> ID：12867676
> 
> 赞同：0
> 
> 时间：2012-10-12T21:59:23.173
> 
> 标签：android

对于任何自定义 Launcher/HomeScreen 应用程序，需要 SET_PREFERRED_APPLICATIONS 权限才能将其自身设置为默认 HomeScreen。

包管理器::addPreferredActivity()。

我知道有关此问题的 StackOverflow 线程[（示例）](https://stackoverflow.com/questions/3836215/android-change-default-home-application)，并且此类权限仅授予使用 OEM/Google 证书签名的应用程序。

GoLauncher 设法自动将自己设置为默认主屏幕应用程序。他们似乎也获得了 SET_PREFERRED_APPLICATIONS 权限[（请参阅此处获取权限列表）](http://hoosier.store.aptoide.com/app/market/com.gau.go.launcherex/2/95630/GO%20Launcher%20EX#)。

**怎么样**？是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:11:06.413

> GoLauncher 设法自动将自己设置为默认主屏幕应用程序。

不在运行 Jelly Bean 的 Nexus S 上。安装后，我得到了一个选择器，就像任何其他主屏幕一样。

如果您有 GO Launcher Ex 正在执行此操作的环境（Android 2.2 后），请告诉我，以便我进行更多研究。

> 他们似乎也获得了 SET_PREFERRED_APPLICATIONS 权限

他们没有`SET_PREFERRED_APPLICATIONS`。他们*要求*`SET_PREFERRED_APPLICATIONS`. _ 你可以要求任何你想要的；你不会得到它。

# iphone - For循环产生“无法识别的选择器发送到实例”错误

> ID：12867680
> 
> 赞同：2
> 
> 时间：2012-10-12T21:59:28.510
> 
> 标签：iphone, objective-c, loops

我的应用程序中的简单 for 循环设置存在问题。到达第二个 for 循环后，我的应用程序崩溃并出现以下错误：

```
for (NSArray *a in dict)
            {
                for (NSString *s in a)
                {

                }
            } 
```

错误：

```
-[__NSCFString countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x1c5b6810 
```

这似乎有点奇怪。我只想查看字典中的每个数组，然后当我在循环中找到它们时，检查这些数组中的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:00:33.243

你可能想要这样的东西：

```
for (NSArray *a in [dict allValues]) 
```

因为根据您的错误消息，您的键似乎是字符串（`__NSCFString`）。的行为`for (NSArray *s in dict)`是枚举字典的*键*。

# python - 在 django 项目中使用 GitHub 的第三方应用程序

> ID：12867681
> 
> 赞同：0
> 
> 时间：2012-10-12T21:59:34.297
> 
> 标签：python, django, github, aptana

我正在尝试使用位于此处的第三方应用程序：

```
git://github.com/Star2Billing/django-audiofield.git 
```

我使用 Aptana Studio 作为我的 IDE。我创建了我的项目，然后单击该项目并从 github 位置导入了该应用程序。好像是进口的。我想在开始任何真正的编码之前检查它是否正确导入，所以我执行了*`manage.py validate`*.

我收到一条消息，上面写着：`"No module named audiofield"`。我将该应用程序添加到我的已安装应用程序设置中，并按照安装说明进行操作。

我不确定我是否错误地导入了它。另外，我`virtualenv`在 Aptana 中使用。我不确定这是否会增加问题。

请帮忙。

更新：谢谢 dm0351。我按照你的建议做了。但是，我得到以下信息：

```
Traceback (most recent call last):
 File "/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py",    line 10, in <module>
execute_from_command_line(sys.argv)
 File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
utility.execute()
 File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
output = self.handle(*args, **options)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
return self.handle_noargs(**options)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/commands/validate.py", line 9, in handle_noargs
self.validate(display_num_errors=True)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py", line 266, in validate
num_errors = get_validation_errors(s, app)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/validation.py", line 30, in get_validation_errors
for (app_name, error) in get_app_errors().items():
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 158, in get_app_errors
self._populate()
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 67, in _populate
self.load_app(app_name)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py", line 88, in load_app
models = import_module('.models', app_name)
File "/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
__import__(name)
File "/Users/home/virtualenv/venv/src/audiofield/audiofield/models.py", line 19, in <module>
from audiofield.fields import AudioField
File "/Users/home/virtualenv/venv/src/audiofield/audiofield/fields.py", line 20, in <module>
from tasks import audio_convert_task
File "/Users/home/virtualenv/venv/src/audiofield/audiofield/tasks.py", line 14, in <module>
from celery.task import Task
ImportError: No module named celery.task
Finished "/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py  validate" execution. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:21:27.190

我相信您可以使用以下方法安装到您的虚拟环境中：

```
pip install -e URI#egg=EggName
pip install -e git+git://github.com/Star2Billing/django-audiofield.git#egg=audiofield 
```

# java - 调用静态无效方法

> ID：12867683
> 
> 赞同：1
> 
> 时间：2012-10-12T22:00:10.850
> 
> 标签：java

我仍在学习使用方法，但我在路上遇到了另一个障碍。我试图在另一个静态 void 方法中调用一个静态 void 方法。所以它大致看起来像这样：

```
public static void main(String[] args) {
....
}

//Method for total amount of people on earth
//Must call plusPeople in order to add to total amount of people
 public static void thePeople (int[][] earth) {
How to call plusPeople?
}

//Method adds people to earth
//newPerson parameter value predefined in another class.
public static void plusPeople (int[][] earth, int newPerson) {
earth = [newPerson][newPerson]
} 
```

我尝试了一些没有真正奏效的不同方法。

```
int n = plusPeople(earth, newPerson); 
//Though I learned newPerson isn't recognized 
because it is in a different method.

int n = plusPeople(earth); \
//I don't really understand what the error is saying,
but I'm guessing it has to do with the comparison of these things..[]

int n = plusPeople;
//It doesn't recognize plusPeople as a method at all. 
```

我什至无法调用方法而感到非常愚蠢，但我已经在这个问题上卡住了大约两个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:06:04.430

如果它是无效的，则不能将其分配给任何东西。

只需调用使用

```
int n = 5;
plusPeople(earth, n); 
```

你得到的第一个错误是因为 newPerson 没有在本地定义（你是对的，它使用不同的方法）你得到的第二个错误是因为返回类型“void”不是“int”。您得到的第三个错误是因为它没有括号，并且可能认为应该有一个名为 plusPeople 的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:07:14.483

您需要提供两个参数。第一个需要是类型`int[][]`（和`earth`限定），第二个需要是 int。因此，例如：

```
plusPeople(earth, 27); 
```

当然，这只是一个技术性的答案。您真正应该作为参数传递的内容取决于方法对其参数的作用（应在其 javadoc 中指定）、参数的含义（应在其 javadoc 中指定）以及您希望该方法为您做什么（你应该知道）。

另外，请注意，由于该方法被声明为`void plusPeople(...)`，它不会返回任何内容。所以这样做`int n = plusPeople(earth, newPerson);`没有任何意义。

# java - 计算短语中的空白字符 - Java

> ID：12867684
> 
> 赞同：0
> 
> 时间：2012-10-12T22:00:19.157
> 
> 标签：java

我正在为班级做这个小硬件问题。我的程序的重点是计算用户输入中短语中的所有空白字符。在我到达我的 for 循环之前，一切都很好。我在循环中设置了一个断点，它运行良好并计算空白字符。但是当循环结束时程序崩溃并给我这个错误：

线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：5

我不太明白是否有人能指出我正确的方向。

```
import java.util.Scanner;
public class Cray {
    public static void main(String[] args){
              String phrase;    // a string of characters
              int countBlank;   // the number of blanks (spaces) in the phrase 
              int length;       // the length of the phrase
              char ch;          // an individual character in the string

            Scanner scan = new Scanner(System.in);

              // Print a program header
              System.out.println ();
              System.out.println ("Character Counter");
              System.out.println ();

              // Read in a string and find its length
              System.out.print ("Enter a sentence or phrase: ");
              phrase = scan.nextLine();
              length = phrase.length();

              // Initialize counts
              countBlank = 0;

              // a for loop to go through the string character by character
              // and count the blank spaces

              for(int i =0; i<=length; i++ ){
                  if(phrase.charAt(i)==' '){
                      countBlank++;

              }
              }

              // Print the results
              System.out.println ();
              System.out.println ("Number of blank spaces: " + countBlank);
              System.out.println ();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:02:06.330

您正在尝试读取超出 String 长度的字符`phrase`。要修复，您可以使用：

```
for (int i = 0; i < length; i++) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:05:57.770

详细说明和解释给出的答案：

循环的条件：

```
for(int i =0; i<=length; i++ ) 
```

指示程序执行以下操作：

1.  取一个包含 'length' 项的数组，并从其第 0 个元素开始。
2.  处理第 0 个元素
3.  继续下一个，第 i 个元素，并处理它。
4.  继续执行第 3 步，直到到达**index = length处的元素**

根据定义，您正在迭代的数组将不得不在第 4 步失败。由于数组从 0 开始索引，因此具有“n”个元素的数组的最大索引为“n-1”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T22:21:26.340

实际上 Scanner 会忽略 Spaces 所以使用 BufferedReader

公共静态 void main(String[] args) 抛出 IOException {

```
 BufferedReader br=new BufferedReader(new InputStreamReader(System.in)); 
     String word=null;
    System.out.println("Enter string input: ");
    word = br.readLine(); 
    String data[] ;
    int k=0; 
    data=word.split("");
    for(int i=0;i<data.length;i++){
        if(data[i].equals(" ")) 
        k++; 
    } 
    if(k!=0)        
    System.out.println(k);
    else
        System.out.println("not have space");

} 
```

# php - 两个字段都等于空值，不能显示错误信息

> ID：12867685
> 
> 赞同：-1
> 
> 时间：2012-10-12T22:00:31.200
> 
> 标签：php

我正在开发一个预订系统，客户最多可以预订 3 个座位。如果他们只预订 1 个座位，这意味着其他 2 个座位值设置为空，当我提交表单时，我会检查它以确保客户不会尝试重复预订同一个座位，如您将在下面的代码，所以如果客户购买 1 个席位，他们会收到一个错误，因为两个席位都等于 null，我该如何解决这个问题？谢谢

```
if($seat1==$seat2 || $seat2==$seat3 || $seat1==$seat3){
echo("You're trying to book the same seat numerous times, please go back.");
die();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:09:57.797

使用数组。它们可以具有任意数量的值，因此您没有 3 的限制，尽管您仍然可以强制执行它。当你使用它时，你也可以使用一个类。就是图个好玩儿。;)

```
$mrA = new User("GolezTrol");
$mrB = new User("user1715417");

try {

    $booking = new Booking();
    $booking->bookSeat($mrA, 'A7');
    $booking->bookSeat($mrA, 'A8');
    // $booking->bookSeat($mrB, 'A8'); // Double booking
    $booking->bookSeat($mrB, 'A9');
    $booking->bookSeat($mrA, 'B7');
    // $booking->bookSeat($mrA, 'B8'); // Only 3 seats allowed per user
    $booking->bookSeat($mrB, 'B9');
    // $booking->bookSeat($mrB, 'C7'); // No Seat Left

    var_dump($booking->bookedSeats); // Output Booking

} catch ( Exception $e ) {
    echo $e->getMessage(), PHP_EOL;
} 
```

输出

```
array
  'GolezTrol' => 
    array
      0 => string 'A7' (length=2)
      1 => string 'A8' (length=2)
      2 => string 'B7' (length=2)
  'user1715417' => 
    array
      0 => string 'A9' (length=2)
      1 => string 'B9' (length=2) 
```

使用的类

```
class User {
    public $id;

    function __construct($id) {
        $this->id = $id;
    }

    function __toString() {
        return $this->id;
    }
}

class Booking {
    public $bookedSeats = array();
    public $seatUsed = array();
    private $maxSeat = 5;
    private $maxBooking = 3;

    public function bookSeat(User $user, $seat) {
        if (count($this->seatUsed) >= $this->maxSeat) {
            throw new Exception('No Seat Left');
        }

        if (in_array($seat, $this->seatUsed)) {
            throw new Exception('Double booking');
        }

        if (array_key_exists($user->id, $this->bookedSeats)) {
            if (count($this->bookedSeats[$user->id]) >= $this->maxBooking) {
                throw new Exception('Only 3 seats allowed');
            }

            $this->bookedSeats[$user->id][] = $seat;
            $this->seatUsed[] = $seat;
        } else {
            $this->bookedSeats[$user->id] = array();
            $this->bookedSeats[$user->id][] = $seat;
            $this->seatUsed[] = $seat;
        }
    }
} 
```

您可以看到将限制设置为 5 或 8 个席位是多么容易，而无需修改除数字之外的任何内容，而您当前的检查已经很复杂，如果您从 3 增加到 5，它将变得复杂两倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:06:12.883

这是显而易见的答案，我会让其他人浮华和嗖嗖:)

```
if ( $seat1 === $seat2 || $seat1 === $seat3 || ($seat2 !== null && $seat2 === $seat3) ) 
```

# android - 在 Android/Java 中将整数数组转换为字符串

> ID：12867687
> 
> 赞同：-2
> 
> 时间：2012-10-12T22:00:33.407
> 
> 标签：android, arrays, string

我有一个数组：

```
int A = {1,2,3,4,5,6}; 
```

我想在电话屏幕上将其显示为单个字符串 123456（或 1 2 3 4 5 6）（即每个数字之间有一个空格。请您帮忙让我知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:19:08.173

捷径：

```
String line = "";
for(int temp : A) {
    line = line + (""+temp);
}
System.out.println(line); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:05:40.437

您可以使用循环和 StringBuilder 的组合：

> 注意，在循环过程中处理字符串和字符串连接时，强烈建议使用 StringBuilder。阅读此内容以供参考：[Java 中 toString() 中的 StringBuilder 与字符串连接](https://stackoverflow.com/questions/1532461/stringbuilder-vs-string-concatenation-in-tostring-in-java)

```
int[] A = new int[]{1,2,3,4,5,6};
StringBuilder sb = new StringBuilder();
for(int ctr = 0; ctr < A.length; ctr++){
    sb.append(A[ctr]);

    //print separator only when there are items after this one.
    if(ctr < A.length -1){
        sb.append(", ");
    }
}

System.out.println(sb.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:25:08.880

如果只是打印问题，那为什么不以简单的方式来做呢，

```
for(int i = 0; i < A.length; i++){
    System.out.print(A[i]);//not println
}
System.out.println();//just add an extra line. 
```

另一个可以是，`Arrays.toString(A)//verify this.`

# ember.js - 在 ember-data 中，在生命周期中，新创建的记录的 id 何时可用？

> ID：12867688
> 
> 赞同：3
> 
> 时间：2012-10-12T22:00:33.877
> 
> 标签：ember.js, ember-data

在 ember-data 中使用 RESTAdapter。我在服务器上创建了一条记录，我需要获取新创建记录的 id。该 id 从服务器传回，我可以在返回的 json 中看到它。

但是，在 DS.Model 的 didCreate() 回调中， this.get('id') 是未定义的。

我还尝试添加一个 record.one('didCreate',aClass,aClass.onDidCreate) 并检查 newRecord.get('id') 但它也是未定义的。

在 createRecord() 之后似乎没有调用 didCommit 回调，所以我不确定我应该在哪里检查生命周期回调。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:11:39.413

I don't know what the hook is for the returned id, but I've been setting an observer on 'id' to fire a method like so:

`record.addObserver('id', this, 'actionToFire');`

That seems to do the trick.

**Update:** Remember to `removeObserver` in `actionToFire` though so they don't pile up!

# google-chrome-extension - 从 chrome 扩展写入 Windows 注册表

> ID：12867689
> 
> 赞同：0
> 
> 时间：2012-10-12T22:00:37.263
> 
> 标签：google-chrome-extension, registry, npapi

有没有办法使用谷歌浏览器扩展在 Windows 中写入/读取注册表？

我正在寻找类似于以下 firefox 功能的东西： [https ://developer.mozilla.org/en-US/docs/Accessing_the_Windows_Registry_Using_XPCOM](https://developer.mozilla.org/en-US/docs/Accessing_the_Windows_Registry_Using_XPCOM)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:23:36.433

注册表访问权限不会暴露给 Chrome 的扩展程序，至少不会暴露给内容或后台脚本。

你必须创建一个插件来做到这一点。

（未经测试）想法：

1.  编写一个可编写脚本的插件，该插件可以读取和写入注册表项，然后将这些方法公开给 javascript。
2.  在后台页面嵌入这个插件（对象）。
3.  使用它来读取注册表值。

无论如何，除非我错了，否则浏览器将不允许您*写入*注册表值。

Firebreath 是一个编写 NPAPI 插件的框架：[http ://www.firebreath.org/](http://www.firebreath.org/)

祝你好运。

# java - 在 Windows 命令提示符下找不到 Java.exe

> ID：12867692
> 
> 赞同：3
> 
> 时间：2012-10-12T22:00:53.010
> 
> 标签：java, windows-7, windows-server-2008

在 Windows Server 2008 上安装了 Java 1.7。在 Cygwin 中，我可以清楚地看到`"which java.exe"`返回 c:\Windows\System32\ 即使运行“java -version”也会返回 1.7。但在 Windows 命令提示符和/或 Powershell 上，它抱怨它不是公认的内部或外部命令。

我也无法在上述路径中的 Windows 资源管理器中看到该文件。即使在 Windows 资源管理器中更改文件夹选项后。

在 Windows Server 2008 上安装的 Java 版本是 64 位。在 Window 7 上也是如此。

有谁知道如何解决这个问题？

预先感谢您的任何帮助。

-RG

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-04T08:10:59.000

尝试使用 cygwin64，或将 %JAVA_HOME%\bin 放在 PATH 环境变量的开头。因为[https://superuser.com/questions/563016/why-is-java-exe-not-visible-from-cygwin-but -is-visible-from-command-prompt](https://superuser.com/questions/563016/why-is-java-exe-not-visible-from-cygwin-but-is-visible-from-command-prompt)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T12:14:22.980

我相信这是因为您的操作系统是 64 位，但您安装的 Java 版本是 32 位。32 位 shell（Cygwin 的 bash 或在我的情况下为 MSYS 的 sh）可以查看和运行它，但 64 位 shell (cmd) 不能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T22:03:17.823

您可能必须将环境变量设置为指向您的 JAVA 安装。

[http://java.com/en/download/help/path.xml](http://java.com/en/download/help/path.xml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T23:01:29.800

我知道这个问题很老，但我需要答案，但在这里没有找到，所以我会提供给其他人：

输入变量值作为 Java 开发工具包的安装路径。如果您的 Java 安装目录的路径名中有空格，则应在环境变量中使用缩短的路径名（例如 C:\Progra~1\Java\jre6）。

适用于 64 位系统上的 Windows 用户的图标说明

程序~1 = '程序文件' 程序~2 = '程序文件(x86)'

*答案来源来自 atlassian。*

# c++ - 在 C++ 中打印 3-100 之间的所有素数

> ID：12867695
> 
> 赞同：1
> 
> 时间：2012-10-12T22:01:12.043
> 
> 标签：c++

我在这里有代码让程序列出从 3 到 100 的所有素数。我的主要问题是程序只打印出三个。我认为由于某种原因它正在离开循环或其他东西。我在 for 语句中放了一个 break ，让它在发现数字不是素数时立即离开内部 for 循环，以便它可以打印出来。但是，它似乎不起作用。

```
#include <iostream>
#include <conio.h>
#include <cmath>

using namespace std;

int main()
{
    bool prime = true;

    for (int x = 3; x <= 100; x++)
    {
        for (int y = 2; y <= (x - 1); y++)
        {
            if ((x % y) == 0)
                prime = false;
            break;
        }

        if (prime == true)
            cout<<x<<endl;
   }

    getche();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T22:12:07.300

问题是：

```
for (int y = 2; y <= (x - 1); y++)
{
    if ((x % y) == 0)
        prime = false;
        break;
} 
```

什么时候应该

```
for (int y = 2; y <= (x - 1); y++)
{
    if ((x % y) == 0)
    {
        prime = false;
        break;
    }
} 
```

`prime`除非满足第一个条件，否则每次设置为 true 都会中断。

您还必须`prime`在每次迭代时重置为 true：

```
for (int x = 3; x <= 100; x++)
{
    prime = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:05:11.580

当您将 prime 设置为 false 以表示单个数字不是素数时，您再也不会将 prime 设置为 true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T22:05:29.393

在第一个 for 循环内的第一行，输入：

`prime = true;`

目前，您从未将`prime`标志重置回`true`，因此当您达到 4 并设置`prime`为 时`false`，它永远不会“找到”之后的素数，因为`prime`它*总是*错误的。

完整代码：

```
#include <iostream>
#include <conio.h>
#include <cmath>

using namespace std;

int main()
{
    bool prime = true;

    for (int x = 3; x <= 100; x++)
    {
        prime = true;
        for (int y = 2; y <= (x - 1); y++)
        {
            if ((x % y) == 0)
            {
                prime = false;
                break;
            }
        }

        if (prime == true)
            cout<<x<<endl;
    }

    getche();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T22:07:27.527

在第一个循环之后初始化**prime=true;** . 因为一旦素数是假的，它就不会再变真了。

```
for (int x = 3; x <= 100; x++)
{
     prime=true;
     ///rest of the code

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T22:07:48.007

您永远不会将素数重置为真实。在你 cout 之后，你需要做 prime = true;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T14:51:59.227

这是打印 3 到 100 之间的素数的代码。使用计数器变量 n 而不是一般算法来查找素数。

```
#include <iostream.h>
#include <conio.h>

int main() {
    int i;
    int j;
    clrscr();
    int count=0;
    for(j=100; j>=3; j--) {
        for(int i=1; i<=j; i++) {
            if(j%i==0)
                count++;
        }
        if(count==2)
            cout<<"\n"<<j;
        count=0;
    }
    getch();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T22:13:27.020

内部循环将始终调用 break 语句，因为 IF 只执行第一行，因为它没有用括号括起来。您还需要为每个数字重置 bool 变量（即在第一个循环内）

```
if ((x % y) == 0)
{
    prime = false;
    break; // previously it was always breaking
} 
```

以前它基本上是这样做的：

```
if ((x % y) == 0)
{
    prime = false;
}
break; // WRONG! 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-12T22:14:55.727

```
int main()
{

  for (int x = 3; x <= 100; x++)
  {
    bool prime = true;
    for (int y = 2; y <= (x - 1); y++)
    {
      if ((x % y) == 0)
      {
          prime = false;
          break;
      }
    }

    if (prime == true)
    { 
      cout<<x<<endl;
    } 
  }

  getche();
  return 0;
} 
```

您需要在循环内设置 prime，并且您想将其设置为 false 并在内部循环中的测试中中断。

老手的提示编号 45623，即使如果代码块是一行，您可以跳过大括号，但不要。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-04T11:47:35.260

为了效率，试试这个它的 java 版本，但你可以为 C 尝试相同的逻辑。

```
 boolean prime;
    int iCount = 0;
    int jCount = 0;
    for(i = 2; i <= 100; i++)
    {
        iCount +=  1;

      prime = true;
      int squared = (int) (Math.sqrt(i));

      for(j = 2; j < squared; j++){
          jCount += 1;

        if(i%j == 0) prime = false;
      }
      if(prime) System.out.print(i+" ");
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-12T22:09:26.877

尝试这个。

```
for (int x = 3; x <= 100; x++)
{
     for (int y = 2; y <= (x - 1); y++)
     {
         if ((x % y) == 0)
         break;
         if((x-1)==y)
         cout<<x<<endl;
     }    
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-12T22:23:10.313

正如每个人所说的那样，您有两个错误：

1）您从不重置 的值`prime`，因此将 a 添加`prime = true`到 outer 的开头`for`。
2）转换`if ((x % y) == 0) prime = false; break;`为`if ((x % y) == 0) {prime = false; break;}`internal for 将只执行一次！！

# c++ - 非法引用非静态成员... typedef？

> ID：12867698
> 
> 赞同：4
> 
> 时间：2012-10-12T22:01:30.727
> 
> 标签：c++, visual-c++, compiler-errors, non-static

为什么我会得到

> 错误 C2597：对非静态成员的非法引用`'derived<<unnamed-symbol>>::T'`

当我尝试在 Visual C++ 2010 x64 中编译此代码时？（在 x86 上似乎很好......哪个是正确的？）

```
struct base { typedef int T; };

template<class>
struct derived : base
{
    using base::T;
    derived(T = T()) { }
};

int main()
{
    derived<int>();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:54:05.800

正如 Praetorian 的评论所提到的，问题出在`T()`默认值上。根据错误详细信息，`using base::T`显然将编译器混淆为`T()`对非静态成员函数的调用`base`而不是类型实例的构造`T`。

这是一个适用于 MSVC 2005 x86 的有趣修复（我没有尝试过任何其他编译器）。请注意，`T()`保留。这要么消除歧义`using base::T`，要么只是强制`T`引用继承的类型而不是那个`using`（这对编译器来说显然不是一回事）。

```
//...
template<class>
struct derived : base
{
    using base::T;
    derived(T = static_cast<T>( T() )) { } //No error
};
//... 
```

* * *

*编辑：*尝试更改`base`为这个，看看你得到什么错误消息：

```
struct base { struct T{T(){}}; }; 
```

我得到了原来的`C2597`，还有这个：

> 错误 C2440：“默认参数”：无法从 '' 转换为 'base::T' 没有构造函数可以采用源类型，或者构造函数重载决议不明确

我不知道那里的编译器是什么意思`''`，但这可能与`base`. 如果我删除该`using base::T;`行，这编译得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:20:17.010

你为什么用`using base::T`？在基类中定义的类型将在派生类中自动可用。

```
struct base { typedef int T; };
template< class X >
struct derived : base {};
derived<int>::T v = 0;  // this is OK in C++ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:27:38.413

改用这个（应该是不言自明的）：

```
template<class T>
struct derived : base
{
    derived(T = T()) { }
}; 
```

# firefox - SVG 线性渐变在 Firefox 中不起作用

> ID：12867704
> 
> 赞同：8
> 
> 时间：2012-10-12T22:02:08.733
> 
> 标签：firefox, svg, gradient

我有以下 SVG 示例，它是由 Flash 设计师提供给我的，使用 Adob​​e Illustrator 构建：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 15.0.2, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="30px" height="35px" viewBox="0 0 30 35" enable-background="new 0 0 30 35" xml:space="preserve">
<symbol  id="replay_icon" viewBox="0 -12 14 12">
    <g id="Layer_1_2_">
        <defs><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="7" y1="1" x2="7" y2="-13">
            <stop  offset="0" style="stop-color:#0000FF"/>
            <stop  offset="1" style="stop-color:#00FF00"/>
        </linearGradient></defs>
        <path fill-rule="evenodd" clip-rule="evenodd" fill="url(#SVGID_1_)" d="M12.25-10.25C11.083-11.417,9.667-12,8-12v2
            c1.1,0,2.05,0.383,2.85,1.15C11.617-8.083,12-7.133,12-6c0,1.1-0.383,2.033-1.15,2.8C10.05-2.4,9.1-2,8-2S5.95-2.4,5.15-3.2
            C4.383-3.967,4-4.883,4-5.95h2l-3-4l-3,4h2c0,1.633,0.583,3.034,1.75,4.2S6.333,0,8,0s3.083-0.583,4.25-1.75S14-4.333,14-6
            S13.417-9.083,12.25-10.25z"/>
    </g>
</symbol>
<use xlink:href="#replay_icon"  width="14" height="12" y="-12" transform="matrix(1 0 0 -1 10 11)" overflow="visible"/>
</svg> 
```

SVG 图像显示在所有浏览器中，甚至是 IE9 (*gasp*)，但它不会显示在 Firefox 中。问题在于线性梯度。如果向路径添加描边，则路径描边正确并变为可见，但未填充。我已经尝试了许多不同的变体来使渐变无法成功。任何人都知道这个 SVG Firefox 的哪个部分有问题以及如何纠正它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-13T08:03:30.183

从 Firefox 77 开始，此问题已修复。要解决早期版本 Firefox 中的问题，只需将渐变定义移到符号元素之外，例如

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="30px" height="35px" viewBox="0 0 30 35" enable-background="new 0 0 30 35" xml:space="preserve">
        <defs>
          <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="7" y1="-13" x2="7" y2="1">
            <stop  offset="0" stop-color="#0000FF"/>
            <stop  offset="1" style="stop-color:#00FF00"/>
          </linearGradient>
        </defs>
<symbol  id="replay_icon" viewBox="0 -12 14 12">
    <g id="Layer_1_2_">
        <path fill-rule="evenodd" clip-rule="evenodd" fill="url(#SVGID_1_)" d="M12.25-10.25C11.083-11.417,9.667-12,8-12v2
            c1.1,0,2.05,0.383,2.85,1.15C11.617-8.083,12-7.133,12-6c0,1.1-0.383,2.033-1.15,2.8C10.05-2.4,9.1-2,8-2S5.95-2.4,5.15-3.2
            C4.383-3.967,4-4.883,4-5.95h2l-3-4l-3,4h2c0,1.633,0.583,3.034,1.75,4.2S6.333,0,8,0s3.083-0.583,4.25-1.75S14-4.333,14-6
            S13.417-9.083,12.25-10.25z"/>
    </g>
</symbol>
<use xlink:href="#replay_icon"  width="14" height="12" y="-12" transform="matrix(1 0 0 -1 10 11)" overflow="visible"/>
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T18:32:25.253

跟进罗伯特朗森的回答：

这是一个如何以编程方式执行此操作的示例（JQuery，仅渐变和不使用`<defs>`）：

```
// run this after the SVG document has loaded

$("svg").each(function (index, elem) {
    var svg = $(elem);
    var symbols = svg.find("symbol");
    svg.append($.merge(symbols.find("radialGradient"), symbols.find("linearGradient")).detach());
}); 
```

# maven-3 - Maven Tapestry-tldgen 插件：由于 tools.jar 依赖而无法执行目标

> ID：12867707
> 
> 赞同：0
> 
> 时间：2012-10-12T22:02:31.840
> 
> 标签：maven-3, tapestry

我在使用 Maven 插件时遇到了一些问题。我正在尝试运行[Tapestry-tldgen](http://exanpe.free.fr/tapestry-tldgen/usage.html)插件。我收到以下错误，无法解决问题。

```
Failed to execute goal fr.exanpe:tapestry-tldgen:1.1.0:tld-generate
(default) on project maple: Execution default of goal 
fr.exanpe:tapestry-tldgen:1.1.0:tld-generate failed: Plugin
fr.exanpe:tapestry-tldgen:1.1.0 or one of its dependencies could
not be resolved: Could not find artifact com.sun:tools:jar:1.5.0 
at specified path /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/../lib/tools.jar 
```

我认为我的决议与执行排除有关。但是，我找不到一个很好的例子来说明如何从插件中排除依赖项。我正在使用 OS X。我希望有人能指出一个很好的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:56:52.813

看来我可以回答我自己的问题了。我没有排除，而是更改了工具依赖项的位置。

```
<plugin>
  <groupId>fr.exanpe</groupId>
  <artifactId>tapestry-tldgen</artifactId>
  <version>1.1.0</version>

  <dependencies>
    <dependency>
      <groupId>com.sun</groupId>
      <artifactId>tools</artifactId>
      <version>1.5.0</version>
      <scope>system</scope>
      <systemPath>${java.home}/../Classes/classes.jar</systemPath>
    </dependency>
  </dependencies>

...

</plugin> 
```

# python - 如何使用 sudo 杀死使用 Popen 调用的 shell 脚本？

> ID：12867708
> 
> 赞同：2
> 
> 时间：2012-10-12T22:02:33.883
> 
> 标签：python

我用 Python 编写了一个 GTK GUI 应用程序来调用一个 shell 脚本并将调用参数从 GUI 传递给脚本并在文本窗口中返回脚本结果。

现在我喜欢允许用户从 GUI 中取消正在运行的 shell 脚本。该脚本以 Popen 启动。如果我以普通用户的身份调用它，它工作正常（在下面的代码中标记 sudo=False）。当我使用 sudo 调用脚本时，我无法再取消它。我发现如果我使用 shell=True，人们报告 kill 将不起作用，所以我用 shell=False 对其进行了测试，但它也不起作用。

我将我的问题简化为以下代码片段：

```
import os
import signal
import subprocess
import time
import sys
import shlex

bashScriptFileName="t.sh"

f = open(bashScriptFileName,'w')

f.write("""#!/bin/bash
on_die()
{
    echo "Dying..."
    exit 0
}  

trap 'on_die' TERM

SEC=0
while true ; do
    sleep 1
    SEC=$((SEC+1))
    echo "I'm PID# $$, and I'm alive for $SEC seconds now!"
done

exit 0""")
f.close()
os.chmod(bashScriptFileName, 0755)

shell=True      # flag to enable/disable shell invocation of Popen
sudo=True       # flag to invoke command with sudo

if sudo:
    commandToExecute='sudo -S '+ bashScriptFileName
else:
    commandToExecute='./' + bashScriptFileName

if not shell:
    commandToExecute = shlex.split(commandToExecute)

print "Command: %s" % (commandToExecute)                                

proc = subprocess.Popen(commandToExecute, stdin=subprocess.PIPE, close_fds=False,shell=shell, preexec_fn=os.setsid)
print >> proc.stdin, "secretPassword"                
print 'PARENT      : Pausing before sending signal to child %s...' % proc.pid
sys.stdout.flush()
time.sleep(5)
print 'PARENT      : Signaling child %s' % proc.pid
sys.stdout.flush()
os.killpg(proc.pid, signal.SIGTERM)
time.sleep(3)
print "Done" 
```

实际上，作为普通用户使用 os.kill 取消脚本时，我已经遇到了问题，但后来发现我必须使用 os.setuid 和 killpg 来杀死正在运行的 shell。我是线程新手，这可能只是我对 Linux 线程的一个简单误解......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:04:31.187

如果您使用 sudo 启动它，则必须具有 root 权限才能杀死它。基本上，你必须这样做：

```
os.system("sudo kill %d"%(pid)) 
```

此外，出于安全考虑，我建议您以 root 身份创建 bash 脚本，将其放在任何方便的地方，不授予用户对其的写入权限，最后设置 sudo 以在不需要密码的情况下运行它。这将消除将密码存储在此 python 脚本中的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-23T21:04:08.543

TL;博士;

处理这个问题的一种更优雅的方法是使用 pyexpect 而不是“subprocess.Popen”来启动进程。

```
spawnProcess = pexpect.spawn(command) 
```

然后，当您想“杀死”该进程时，您所要做的就是：

```
spawnProcess.sendcontrol("c") 
```

解释：

从 os.system 运行 sudo kill 是一种肮脏的黑客行为，需要用户再次输入密码，或者要求您存储 root 密码以允许您终止子进程。就我而言，情况更糟，因为该进程不是以 sudo 启动的，它是 setuid root 可执行文件，因此目标用户确实没有 sudo 访问权限。

事实证明，bash 中的“CTRL+C”与 kill -INT 不同，因为很多人会让你相信。您可以“CTRL+C”以 sudo 或 setuid root 开头的进程，但不能向该进程发送 SIGINT。我在这里找到了对此的解释：

[https://www.reddit.com/r/linux/comments/2av912/how_does_sudo_get_signals_from_the_controlling/ciz574v](https://www.reddit.com/r/linux/comments/2av912/how_does_sudo_get_signals_from_the_controlling/ciz574v)

知道只有“CTRL+C”才能真正起作用，我设计了一个模仿用户行为的解决方案，它就像一个魅力！

# iphone - 模态转场后删除最后一个 UIViewController

> ID：12867711
> 
> 赞同：4
> 
> 时间：2012-10-12T22:02:55.330
> 
> 标签：iphone, objective-c, ios, xcode, ipad

所以我在情节提要中有 3 个视图控制器（VC1、VC2 和 VC3）。

每个视图都有一个调用 IBAction 的按钮，它调用此方法以模态到另一个视图：

```
[self doSegue: myViewController_ID];

-(void) doSegue:(NSString *)_myViewController_ID
{
    //get UiViewController from storybord with Unique ID
    UIStoryboard *storyboard = self.storyboard;
    UITableViewController *svc = [storyboard instantiateViewControllerWithIdentifier:_myViewController_ID];

    //set presentation & transition styles
    svc.modalPresentationStyle = UIModalPresentationFullScreen;
    svc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

    //do segue
    [self presentViewController:svc animated:YES completion:nil];
} 
```

让我们设置我从 VC1 到 VC2，一次在 VC2

**我想要的是删除以前的 ViewController (VC1)。如果我现在从 VC2 转到 VC3，我想从视图层次结构或堆栈 VC2 中删除，依此类推。**

这是因为我不会提供`[self dismissViewControllerAnimated:YES completion:nil];`方法

我不希望由于堆栈中所有视图控制器的积累而导致内存增长。

注意：我不会使用导航控制器或选项卡控制器，只使用视图控制器。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:37:10.697

只是猜测，我没试过...

在 VC2 上保留 VC1 的引用 -> 使用 prepareForSegue 发送：

然后在VC2上

```
[self.previousViewController willMoveToParentViewController:nil];
[self.previousViewController removeFromParentViewController]; 
```

只是为了确保插入您的视图控制器

```
- (void)dealloc
{
   NSLog(@"dealloc: %@", self);
} 
```

看看控制台

* * *

编辑：当您收到内存警告时，您可以在 segue 之后删除每个视图控制器，而不是删除每个视图控制器。您也可以尝试在 segue 之后使用 dismissViewControllerAnimated:completion:

```
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.

    // ???
    if ([self isViewLoaded] && self.view.window == nil) {
        NSLog(@"UNLOADING");
        self.view = nil;
        [self dismissViewControllerAnimated:NO completion:nil];
    }
} 
```

# google-maps - Google Maps API 自定义弹出窗口

> ID：12867715
> 
> 赞同：5
> 
> 时间：2012-10-12T22:03:05.773
> 
> 标签：google-maps, google-maps-api-3

我在搞乱 Google Maps API，我似乎不知道如何在有人点击我添加的自定义地图图标后在地图中添加一个弹出窗口，该弹出窗口会显示信息。我正在使用的代码如下，littlemarketbrasserie.com 上有一个示例

任何帮助将不胜感激。

```
<script type="text/javascript">
      function initialize() {
        var mapOptions = {
          zoom: 15,
          panControl: false,
          mapTypeControl: false,
          center: new google.maps.LatLng(41.89924, -87.62756),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById('map_canvas'),
                                      mapOptions);

        var image = 'img/lm-logo-maps1.png';
        var myLatLng = new google.maps.LatLng(41.89924, -87.62756);
        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            animation: google.maps.Animation.DROP,
            icon: image,
        });

        var styles = [
                  {
                    stylers: [
                      { hue: "#ff9f67" },
                      { saturation: -20 },
                      { gamma: 1.50 }
                    ]
                  },{
                    featureType: "road",
                    elementType: "geometry",
                    stylers: [
                      { lightness: 100 },
                      { visibility: "simplified" }
                    ]
                  },{
                    featureType: "road",
                    elementType: "labels.text.stroke",
                    stylers: [
                      { visibility: "off" }
                    ]
                  },

                  {
                    featureType: "water",
                    elementType: "geometry.fill",
                    stylers: [
                        { visibility: "on" },
                        { color: "#ffa066" },
                        { lightness: 80 }
                    ]
                    }
                ];

                map.setOptions({styles: styles});
      }
    </script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T22:46:11.737

如果您正在谈论，`infowindow`那么您可以在`initialize`函数内部使用

```
var popup=new google.maps.InfoWindow({
    content: "Hello"
});
google.maps.event.addListener(marker, 'click', function(e) {
    // you can use event object as 'e' here
    popup.open(map, this);
}); 
```

[**演示**](http://jsfiddle.net/fn55p/5/)。

此外，如果您想添加自定义样式`infowindow`，则可以使用 jQuery 对话框查看[此](http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/docs/examples.html)示例和[此示例。](http://jsfiddle.net/fn55p/6/)

# android - Android：将编程单击的列表视图项设置为选定状态

> ID：12867717
> 
> 赞同：6
> 
> 时间：2012-10-12T22:03:06.997
> 
> 标签：android, listview, selection, statelistdrawable

在我的应用程序中，我有一个包含列表视图的左窗格。在此列表视图中进行的选择会调用相关数据，从而更新右窗格以及活动中的其他链接和元素。由于这种设计，左窗格必须始终进行选择，以便为活动的其余部分提供有用的值。

在我的活动的 onCreate 方法中，我调用以下命令以默认选择列表中的第一个元素。（programList 是我的列表视图）

```
programList.performItemClick(programList, 0, programList.getItemIdAtPosition(0); 
```

这一切都很好，并且视图按预期加载正确的值，除了一件事。

我为列表视图添加了一个可绘制的选择器，它突出显示了选定的元素。当在模拟器中物理单击该项目时，它会突出显示（我使用的是 CHOICE_MODE_SINGLE），但在调用 performItemClick() 时它不会突出显示。我四处寻找有关stackoverflow的帮助，并尝试在单击之前使用以下内容，但这并没有什么不同。

```
 programList.requestFocusFromTouch();
    programList.setSelection(0); 
```

从读取 API 看来，setSelection 方法并没有在触摸界面下设置项目的状态，从我的结果来看，performItemClick 方法似乎也没有。我也尝试使用

```
 programList.getAdapter().getView(0, null, null).setSelected(true); 
```

然后我可以读取文本视图的状态并看到它已被选中，但这也没有改变屏幕上显示的内容。

onCreateMethod 中是否存在阻止按钮状态以不同方式绘制的内容？我尝试使单个文本视图中的可绘制对象无效并使文本视图本身无效，但这没有帮助。我还尝试更改文本视图的背景，但似乎我设置的选择器控制它或绘制在前面。我知道我有正确的 textView 因为我使用 getText 来阅读里面的内容。

如果有人能够帮助我解决这个问题或指出我的解决方案，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T23:05:17.803

诀窍是覆盖`getView()`适配器的方法。尝试这个：

```
@Override
public View getView(int position, View convertView, ViewGroup parent ) {
    final View renderer = super.getView(position, convertView, parent);
    if (position == index_of_selected_item) {
        renderer.setBackgroundResource(android.R.color.darker_gray);
    }
    return renderer;
} 
```

当然，您可以将背景颜色设置为您喜欢的任何颜色，以表明它是“活动”项目。

# javascript - 使用脚本在 html 中添加大量图像的最简单方法

> ID：12867720
> 
> 赞同：0
> 
> 时间：2012-10-12T22:03:21.867
> 
> 标签：javascript, html, css

我有一个问题需要帮助。我正在开发一个包含大量图像和视频的个人网页。标记是严格的 HTML，并使用 CSS 设置样式。我也有一个或两个 Javascript 正在运行。前几天我完成了我的第一页，刚刚意识到我必须手动添加大约 20-30 个图像/视频到每个页面（我希望构建大约 10-15 页），并认为也许有一些可用的脚本这可以简化我上传所有媒体内容的任务。请记住，所有页面看起来都一样，因此脚本确实会使事情变得更容易。

**这是我的想法。我想我可以创建两个文件夹，将所有图像和视频添加到每个文件夹中。**

然后使用 Javascript 遍历所有内容，将它们添加到我已经构建的 HTML 页面中。

这可能吗？如果是这样，请通知我如何获得此解决方案。

我不太了解 javascript，无法自己编写代码，因此我将不胜感激完整的解决方案。

这是HTML

```
<ul>
 <li><iframe width="420" height="345"src=""
</iframe></li>
</ul>

<ul>
<li><a href="#"><img src="" width=100 height=100/></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:22:09.323

唯一的 javascript 解决方案是使用命名约定并让 javascript 假定应该有一个具有特定名称的项目。

一个例子是：

重命名您的文件：

`PageName_1.jpg, PageName_2.jpg, PageName_3.jpg, PageName_1.flv, ...`

缺点是您必须定义有关要查找的文件类型（扩展名）以及在每个页面上查找每种类型的数量的参数。

```
var files = {'jpg':3, 'flv':1, ...};
var pageName = "PageName"; 
```

完成设置后，您可以迭代对象：

```
for (var ext in files){
    for (var i = 0; i < files[ext]; i++){
        var src = "images/" + pageName + "_" + (i+1) + "." + ext;
        ...
    }
} 
```

如果您想要的不仅仅是图像，则必须创建一些逻辑来确定要生成哪种类型的元素。解决此问题的最佳方法通常是工厂方法：

```
function generateElement(src, ext){
    switch(ext){
        case 'jpg':
            ...
        break;
        case 'flv':
            ...
        break;
    }
} 
```

再说一次，您可以让您的生活更轻松并使用服务器端功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:08:50.733

不幸的是，JavaScript 无法访问文件系统，因此它无法自动知道哪些文件可用。

就个人而言，我喜欢使用 PHP 5.4 的内置服务器来处理这类事情。PHP 很容易`glob()`将文件放入 HTML 页面中。

或者，您可以使用批处理脚本“编译”文件列表以供 JavaScript 读取：

```
dir /B *.png;*.gif;*.jpg > filelist.txt 
```

然后，您可以使用 AJAX 或类似方式获取文件并将其拆分为换行符 - 每个文件将位于一行。这样，您所要做的就是运行批处理脚本来为您更新文件列表。

# php - 如何从数组中的 WP_User 对象获取数据

> ID：12867721
> 
> 赞同：0
> 
> 时间：2012-10-12T22:03:30.913
> 
> 标签：php, wordpress

> **可能重复：**
> [能够在 print_r() 的输出中看到一个变量，但不确定如何在代码中访问它](https://stackoverflow.com/questions/6322084/able-to-see-a-variable-in-print-rs-output-but-not-sure-how-to-access-it-in-c)

如何从该数组中的 WP_User 对象中提取 ID：

```
Array
(
[0] => Array
    (
        [lid] => WP_User Object
            (
                [data] => stdClass Object
                    (
                        [ID] => 24
                        [user_login] => John Foo
                        [user_pass] => $P$BP0Qa4
                        [user_nicename] => john-foo
                        [user_email] => johnfoo@gmail.com
                        [user_url] => 
                        [user_registered] => 2012-10-10 11:16:24
                        [user_activation_key] => 
                        [user_status] => 0
                        [display_name] => John Foo
                    )

                [ID] => 24
                [caps] => Array
                    (
                        [commissie] => 1
                    )

                [cap_key] => sa_wp_capabilities
                [roles] => Array
                    (
                        [0] => commissie
                    )

                [allcaps] => Array
                    (
                        [edit_posts] => 1
                        [read] => 1
                        [level_1] => 1
                        [level_0] => 1
                        [delete_posts] => 1
                        [commissie] => 1
                    )

                [filter] => 
            )

        [lid_rol] => Voorzitter
    )
) 
```

我使用以下代码：

```
<?php 

$rows = get_field('commissie_lid');
if($rows)
{
    foreach($rows as $row)
    {
        $values = get_field('commissie_lid');
            if($values)
            {
                echo '<ul>'; 
                foreach($values as $value)
                {
                    foreach ($value['lid'] as $liddata) {
                        echo $liddata->ID;                  

                }

               // allways good to see exactly what you are working with
               echo '<pre>';
                   print_r($values);
               echo '</pre>';

            } 
            echo '</ul>';
        } 
    }

}

 ?> 
```

它返回的用户id，还有很多如下的注意事项：

> 注意：试图获取非对象的属性

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:14:42.163

我认为问题出在这里：`foreach ($value['lid'] as $liddata) {`

此时，`$value['lid']`是`WP_User`对象本身，因此 foreach 最终会迭代`WP_User`对象的所有属性。

如果您消除了该 foreach，您应该能够从`$value['lid']`（例如`$value['lid']->ID`，或`$value['lid']->roles[0]`）直接访问对象的公共属性。

希望有帮助。

# scheme - 字符串反向操作

> ID：12867722
> 
> 赞同：1
> 
> 时间：2012-10-12T22:03:43.787
> 
> 标签：scheme

我想编写字符串反向函数而不使用附加或反向函数。

我写的代码如下：

```
> (define rdc(lambda (ls)
                   (cond((null? ls) '())
                        (else (cons (rdc (cdr ls)) (car ls)))))) 
```

此代码的输出如下：

```
Input: > (rdc '(a b c))
Output: (((() . c) . b) . a) 
```

但我想要（cba）形式的输出。我正在使用 DrScheme

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:58:52.997

您的解决方案是以`cons`错误的顺序执行操作，这就是结果*不是*格式正确的列表的原因。

正确的答案很简单，使用累加器存储答案 - 具有很好的副作用，这是一个尾递归解决方案：

```
(define (rdc lst)
  (let loop ((lst lst)
             (acc '()))
    (if (null? lst)
        acc
        (loop (cdr lst) (cons (car lst) acc))))) 
```

前面的过程使用一个命名的 let 来实现递归。或者，您可以使用内部辅助程序，此版本完全等效：

```
(define (rdc lst)
  (define (loop lst acc)
    (if (null? lst)
        acc
        (loop (cdr lst) (cons (car lst) acc))))
  (loop lst '())) 
```

无论哪种方式，这都有效：

```
(rdc '(a b c))
> '(c b a) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:19:00.647

有一种臭名昭著的方法可以做到这一点，许多人偶然发现：

```
(fold cons '() '(a b c d)) 
```

如果这是课程作业，那么这可能是不可接受的，但理解起来很有用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-24T11:13:54.997

```
 static void Main()
    {
        StringBuilder ob = new StringBuilder("welcome");// original string
        StringBuilder ot = new StringBuilder();
        for (int i = ob.Length - 1; i > -1;i-- )
        {
            ot.Append(ob[i]);//that object contain reverse string.
        }
        Console.WriteLine(ot);
        Console.ReadLine();

    } 
```

# java - Google Calendar Api v3 (java-client): setRecurrence: EXDATE

> ID：12867730
> 
> 赞同：0
> 
> 时间：2012-10-12T22:04:23.737
> 
> 标签：java, google-calendar-api, google-api-java-client, recurrence

有谁知道如何在 Google Calendar API v3（Java 客户端）中为事件设置 EXDATE？

使用[setRecurrence(Listrecurrence)](http://javadoc.google-api-java-client.googlecode.com/hg/apis/calendar/v3/index.html)：RRULE 完美运行，但[EXRULE、RDATE 和 EXDATE](http://www.ietf.org/rfc/rfc2445)似乎不起作用（与 getRecurrence(Listrecurrence) 相同：仅检索 RRULE）。

```
import com.google.api.services.calendar.model.Event;

Event event = new Event();

// ...

List RecurrenceList = new ArrayList<String>();
RecurrenceList.add("RRULE:FREQ=WEEKLY;BYDAY=FR");  //this works
RecurrenceList.add("EXDATE:20121019T100000Z");  //this doesn't work

event.setRecurrence(RecurrenceList);

// ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:08:55.683

我想通了，我只是没有使用UTC日期，它现在正在工作

# mysql - 为表中插入新的 mysql 记录时创建 Node.js 事件侦听器（用于通知提要）

> ID：12867731
> 
> 赞同：1
> 
> 时间：2012-10-12T22:04:25.470
> 
> 标签：mysql, codeigniter, node.js, notifications, socket.io

我正在 Codeigniter 中编写一个需要实时功能的 PHP Web 应用程序。具体来说，我正在开发的两个实时功能是实时聊天和实时通知提要。

我能够使用 Node.JS 和 Socket.io 为站点（客户端到客户端）创建实时聊天，但我在如何创建由节点（数据库到客户端）驱动的通知系统方面非常挣扎。

**主要问题：**

1.  有没有办法在将新记录插入 MySQL 数据库时基本上让节点事件监听？

2.  Node.js 可以执行长轮询来检查数据库是否有新记录吗？如果是这样，使用 Node.js 进行长轮询会比更传统的轮询方法更有效吗？

非常感谢你。任何例子将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:38:12.907

1 - 这取决于您的数据库和您使用的语言/技术。您可以使用 MongoDB 和 node.js 本身在 db 中插入记录。

但我假设您使用 mysql 和 php，所以您需要某种触发标志或 ... 来通知 node.js 。

我对您的应用程序及其工作原理知之甚少，但我所做的是，我使用 ajax 在数据库中插入记录，然后通知 node.js

```
function new_record()
{
     $.post('<?php echo base_url(); ?>/record/add_newrecord' , {data:data} , function(res){

        if($.trim(res) == 'ok' )
        {
            if (typeof io !== 'undefined') 
            {
                  var socket = io.connect('http://localhost:6666');
                  socket.emit('new_record_ADDED' , { data : data });
            }
        }
} 
```

或者您可以在插入记录后直接在您的 php 脚本中执行此部分

```
 if (typeof io !== 'undefined') 
        {
              var socket = io.connect('http://localhost:6666');
              socket.emit('new_record_ADDED' , { data : data });
        } 
```

2 - 可能没有！

# java - Java 基本 GUI 示例

> ID：12867734
> 
> 赞同：1
> 
> 时间：2012-10-12T22:04:48.317
> 
> 标签：java, swing, layout, jbutton, layout-manager

我是 Java 中 GUIS 的新手，我正在尝试创建一个类似于我附加的图像的 GUI，但有多个 JLabel 和 JTextField。我想让按钮位于屏幕底部的中心。

我该怎么做呢？请忽略黑线，因为我找不到更好的图像。

![在此处输入图像描述](../Images/3cf7d274a02b2a8e5d84ac2ea440d5ae.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T22:17:14.550

有多种方法可以实现这一目标。对我来说，最简单的方法是使用`GridBagLayout`，它是所有内置布局管理器中最灵活的，也是最复杂的方法之一：P

很多人关注的一件事是尝试在单个容器上布局组件。这可以做到，但需要大量时间和调整才能做到恰到好处。

更好的方法（恕我直言）是使用多个子容器。

这使您可以将布局要求分解为个人需求，并将这些容器之间的关系作为一个单独的问题来担心。

例如，在您的问题中，您要求 word 和 text 字段对齐在一起，但它们被锚定到容器的北方位置，并且按钮应该在南方，但在标签和字段之间居中.

先担心标签和字段如何布局，然后再担心这些按钮和字段/标签之间的关系...

![在此处输入图像描述](../Images/dd109293a3a9e27a26eab4a811ec31a4.png)

```
public class TestLayout08 {

    public static void main(String[] args) {
        new TestLayout08();
    }

    public TestLayout08() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new LayoutPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    protected  class LayoutPane extends JPanel {

        public LayoutPane() {
            JButton button = new JButton("Find Word");
            JLabel label = new JLabel("Word:");
            JTextField field = new JTextField(12);

            setLayout(new GridBagLayout());

            JPanel fieldPane = new JPanel(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(2, 2, 2, 2);

            fieldPane.add(label, gbc);
            gbc.gridx++;
            fieldPane.add(field, gbc);

            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.NORTH;
            gbc.weighty = 1;
            add(fieldPane, gbc);

            gbc.gridx = 0;
            gbc.gridy++;
            gbc.weighty = 0;
            gbc.anchor = GridBagConstraints.CENTER;

            add(button, gbc);    
        }        
    }
} 
```

看一眼;

*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)
*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:20:37.710

您至少有两个选择；

*   使用您喜欢的 IDE 中的 GUI Builder，例如 NetBeans 和 Eclipse
*   了解如何使用 Swing API。特别是，您将需要学习如何使用 LayoutManagers。在此特定示例中，您可能希望使用 BorderLayout、GridLayout 或 GridBagLayout 和 FlowLayout 的组合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T22:16:55.513

如果您更喜欢使用 Eclipse，有一个名为 WindowsBuilder Pro 的插件，您实际上可以直接在 Eclipse 中安装该插件。 [https://developers.google.com/java-dev-tools/wbpro/](https://developers.google.com/java-dev-tools/wbpro/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T22:10:58.910

尝试使用 Netbeans。您可以拖放所有这些功能，然后只需编写按钮功能的代码即可。课程也会为您创建。

或者，我会从头开始，学习如何从头开始构建它，因为它是一个非常基本的 GUI。

[http://thenewboston.org/tutorials.php](http://thenewboston.org/tutorials.php)

# java - 基本 Java 程序：不能从静态上下文引用非静态方法

> ID：12867736
> 
> 赞同：0
> 
> 时间：2012-10-12T22:05:05.063
> 
> 标签：java, instance, static-methods

我是一名初级程序员，试图学习 Java 的基础知识。基本上，银行类中的方法 printBankSummary() 和 accrueInterestAllAccounts() 给了我这个问题。以下是代码：

```
public class Bank {

  private String name;
  private SavingsAccount [] accounts;
  private int totalAccounts;
  public static final int MAX_ACCOUNTS  = 20;

  public Bank(String name) {
    this.name = name;
    totalAccounts = 0;
    accounts = new SavingsAccount[MAX_ACCOUNTS];
}

  public void printBankSummary() {
   System.out.println("Bank name: " + getName());
   BankAccount.printAccountInfo(); //non-static method cannot be referenced from a static context error
  }

  public void accrueInterestAllAccounts() {
    SavingsAccount.accrueInterest(); //non-static method cannot be referenced from a static context error
  }

  public static void main (String args[]) {
    Bank x = new BankAccount("Java S&L");

    x.printBankSummary();
    x.accrueInterestAllAccounts();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:14:35.827

这些方法是*实例方法*——它们对您的类的一个*实例*`SavingsAccount`进行操作。

当您调用时`SavingsAccount.printAccountInfo()`，您是在告诉 Java`printAccountInfo()`作为[静态方法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.2)调用。您基本上是在告诉 Java：“您可以在类 SavingsAccount 中找到此方法，并且您不需要 SavingsAccount 的实例即可使用它。”。

您可能想要做的是找到要打印其帐户信息的类的*实例。*`SavingsAccount`假设这个实例在 variable 中`x`，那么你会调用`x.printAccountInfo()`.
同样的事情发生在你调用`accrueInterest`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:14:48.003

```
 BankAccount.printAccountInfo(); 
```

是静态方法（从类访问），因此除非调用它的方法也是静态的，否则无法访问。代替

```
 public void printBankSummary() {
       System.out.println("Bank name: " + getName());
       BankAccount.printAccountInfo();
      } 
```

关于什么

```
 public void printBankSummary() {
       System.out.println("Bank name: " + getName());
//calls printAccountInfo on the instance that called printBankSummary()
       printAccountInfo();
      } 
```

而对于

```
public void accrueInterestAllAccounts() {
    SavingsAccount.accrueInterest();
  } 
```

你不能调用Class.Method，你想做的是

```
 public void accrueInterestAllAccounts() {
for(Account acc: Accountarr) {            
            acc.accrueInterest();
          }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:15:05.340

简单的答案：由于 Java 中静态类型的性质，任何引用静态方法/变量的方法也必须是静态的。

解决此问题的方法是将您的类和测试程序分开，这样您的类的源文件中就没有 'public static void main(String args[]) 方法。然后，您可以将导致您遇到问题的两个方法放在测试类中，并将它们的方法声明修改为静态。

如果您确实希望您的两个有问题的方法是实例方法，那么您将需要为您的类创建一个新实例并以这种方式调用它们。

# c# - 比较/更新两个列表

> ID：12867737
> 
> 赞同：0
> 
> 时间：2012-10-12T22:05:09.157
> 
> 标签：c#, c#-4.0

我有一个场景，我们正在保存登录安全的问题和答案列表。在保存答案之前，我们正在做一个单向哈希以确保安全。现在我必须添加功能来接受对这个问题和答案列表的更新。我将收到一个列表，其中包含一个列表，该列表包含一个 questionid 和答案。这个新列表将是未散列的，我需要创建一个最终列表，其中包含未更改的问题和答案以及更新的问题和答案。

因此，我正在寻找一种优雅的方式来比较两个列表并使用合并的结果创建第三个列表。

例子：

```
原名单：

  “安全答案”：[{
      “问题”：1，
      “答案”：“dfkldlfndajfdkghfkjbgakljdn”
    }, {
      “问题2，
      “answerHash”：“ndlknfqeknrkefkndkjsfndskl”
    }, {
      “问题”：5，
      “answerHash”：“ieruieluiirhoeiurhoieubn”
    }]

更新列表：

  “安全答案”：[{
      “问题”：4，
      "answer" : "对问题 4 的回答"
    }, {
      “问题2，
      “答案哈希”：“”
    }, {
      “问题”：5，
      "answerHash" : "问题 5 的新答案"
    }]

合并名单：

  “安全答案”：[{
      “问题”：4，
      "answer" : "对问题 4 的回答"
    }, {
      “问题2，
      “answerHash”：“ndlknfqeknrkefkndkjsfndskl”
    }, {
      “问题”：5，
      "answerHash" : "问题 5 的新答案"
    }]

```

下一个问题将是散列新答案而不重新散列原始答案。但是，我相信我可以应付。我只是在寻找一种优雅的方式来进行合并。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:18:47.730

您可以使用 LINQ。[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)返回设置的差异。因此，您需要创建一个自定义`IEqualityComparer<Question>`：

```
public class QuestionComparer : IEqualityComparer<Question>
{
    public bool Equals(Question x, Question y)
    {
        return x.Question == y.Question; // assuming that it's a value type like ID (int)
    }

    public int GetHashCode(Question obj)
    {
        return obj.Question.GetHashCode();
    }
} 
```

现在您可以使用比较器了：

```
var comparer = new QuestionComparer();
var newQuestions = UpdateList.Except(OriginalList, comparer).ToList();
var both = from o in OriginalList
           join u in UpdateList on o.Question equals u.Question
           select new { o, u };
var updatedQuestions = new List<Question>();
foreach(var x in both)
{
    // modify following accordingly, i take the updated question if the hash contains something, otherwise i use the original question
    if(x.u.AnswerHash != null && x.u.AnswerHash.Length != 0)
        updatedQuestions.Add(x.u);
    else
        updatedQuestions.Add(x.o);
} 
```

# asp.net-mvc - jqgrid ajax mvc json

> ID：12867741
> 
> 赞同：1
> 
> 时间：2012-10-12T22:05:13.183
> 
> 标签：asp.net-mvc

是否有可能有一个 json 对象 - 比如：

```
"data : "", status : 1" 
```

哪里数据是一个巨大的字符串，放在一个jqgrid中？我试过了：

```
datastr: data, datatype: "jsonstring" 
```

并且 jqgrid 没有填充数据..

我有一个ajax调用。所以在我的控制器中，我将拥有：

```
public JsonResult Execute() 
{
  var response = (new {data = data, status =1}); 
  return this.Json(response)
} 
```

我得到了正确的数据，但我不知道是否可以用这些数据填充 jqgrid，因为它不起作用.. 谢谢！

# linux - 哪个杀死被称为？bash 内置或 /bin/kill

> ID：12867742
> 
> 赞同：2
> 
> 时间：2012-10-12T22:05:14.880
> 
> 标签：linux, bash, unix

当我输入

```
kill -s ‹n› ‹pid› 
```

在终端中，是调用 bash builtin 还是 /bin/kill？

对于这个问题，假设它是 Ubuntu 默认设置 (bash)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T22:07:52.587

```
$ LANG=C type kill
kill is a shell builtin 
```

# java - 如何为部署到 WebSphere Application Server 的应用程序创建生命周期侦听器？

> ID：12867743
> 
> 赞同：4
> 
> 时间：2012-10-12T22:05:26.037
> 
> 标签：java, jakarta-ee, websphere

我有一个应用程序 EAR 部署到 WebSphere。如何为应用程序创建一个生命周期侦听器，该侦听器应在每次启动应用程序时调用一次性初始化代码？我需要有一些类似于 WebLogic Server 的类`weblogic.application.ApplicationLifeCyleListener`和`weblogic.application.ApplicationLifecycleEvent`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T09:50:12.617

EJB 3.1 规范添加了*单例会话 bean*，可用于以可移植、独立于供应商的方式进行应用程序初始化。

引用[Developing Singleton Session Beans](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.multiplatform.doc/ae/tejb_ssb.html)，以下示例说明了一个使用`@Startup`注解进行启动初始化的单例会话 bean：

```
@Singleton
@Startup
public class ConfigurationBean implements Configuration {
    @PostConstruct
    public void initialize() {
         // 1\. Create the database table if it does not exist.
         // 2\. Initialize settings from the database table.
         // 3\. Load a cache.
         // 4\. Initiate asynchronous work (for example, work to a messaging queue or to
         //    calls to asynchronous session bean methods.
    }

   // ...
} 
```

如果您使用的是 EJB 3.1，它是 Java EE 6 规范的一部分，这是应用程序初始化的标准方式。WebSphere 8 和 8.5 支持此规范级别。

如果您使用的是较旧版本的 WebSphere 或规范并且您不想升级，那么您可以使用[Startup Beans](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.express.doc/asyncbns/tasks/tasb_confstb.html)，这是以前版本中用于此目的的 WebSphere 扩展。

对 Udo 的回答也 +1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:48:56.593

使用 Java EE [ServletContextListener](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html)吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T06:51:49.910

我不确定是否有 websphere 的生命周期监听器。但是，您可以创建一个在启动时初始化的虚拟 servlet。

```
<servlet>
  <display-name>YourServlet</display-name>
  <servlet-name>YourServlet</servlet-name>
  <servlet-class>com.example.YourServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
  <servlet-name>YourServlet</servlet-name>
  <url-pattern>/YourServlet</url-pattern>
</servlet-mapping> 
```

您不需要调用该 servlet。它会自行加载。

# java - Java：在捕获异常时这是否必要？

> ID：12867749
> 
> 赞同：3
> 
> 时间：2012-10-12T22:06:00.937
> 
> 标签：java, exception

e在捕获异常时，是否有必要检查错误消息是否为空以避免空指针异常？换句话说，是否需要 if (e!=null) 部分？或者 e 总是不为空？

```
 try {
     ...

  } catch(Exception e) {
     if (e != null) {
        System.err.println("Error: " + e.getMessage());
     }

  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T22:08:57.350

任何被抛出的东西都必须是 的子类`Throwable`，而你的 catch 只会捕获属于 的子类的东西`Exception`。因此，您既不能 throw 也不能 catch `null`，因此不需要检查无效性。如果您使用`throw null`或抛出一个包含 null 的变量，那么它将抛出一个`NullPointerException`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T22:09:02.280

异常永远不会为空。但是，异常的某些属性可能为空。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T22:13:14.923

`e`永远不会为空。即使您`throw null`（这是完全合法的）java 会将其转换为[此处](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.18)`NullPointerException`规范中详述的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T22:12:10.410

被捕获的异常永远不会`null`像已经被捕获的那样。所以检查：

```
if (e != null) { } 
```

绝对没有必要。

# c# - Java 应用程序与 .NET 应用程序通信

> ID：12867758
> 
> 赞同：0
> 
> 时间：2012-10-12T22:06:50.270
> 
> 标签：c#, java

我有一个设计问题。

我想要两个程序，一个是用 c# 编写的，另一个是用 Java 编写的，通过 TCP/IP 进行通信。作为两个程序之间通信协议的一部分，我想发送包含 .NET 类型（例如 TimeSpan）字段的数据包。Java应用程序端是否有一种简单的方法来处理这种数据包，或者我应该只保留这些数据包的基本数据类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:12:06.460

您总是可以将对象编组为双方都可以加载的 XML、JSON 等。假设 TimeSpan 可以放入可解析的字符串或其他原始类型中，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:15:18.540

您可以使用任何 web 服务功能，例如[wcf](http://msdn.microsoft.com/en-us/library/ms731082.aspx)。确保使用*basicHttpBinding*以获得最大的兼容性。您也可以使用[JNBridge](http://www.jnbridge.com/)。

# android - 片段 - removeGlobalOnLayoutListener IllegalStateException

> ID：12867760
> 
> 赞同：22
> 
> 时间：2012-10-12T22:07:08.343
> 
> 标签：android, android-view

我正在尝试使用以下方法获取`ImageView`a的高度和宽度：`Fragment``ViewTreeObserver`

```
import android.view.ViewTreeObserver;
import android.view.ViewTreeObserver.OnGlobalLayoutListener;

private ImageView imageViewPicture;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_general_activity_add_recipe, container, false);
    setHasOptionsMenu(true);

    ...

    final ViewTreeObserver observer = imageViewPicture.getViewTreeObserver();
    observer.addOnGlobalLayoutListener (new OnGlobalLayoutListener () {
        @Override public void onGlobalLayout() {
            observer.removeGlobalOnLayoutListener(this);
        }
    });

    return view;
} 
```

运行此代码会导致以下异常：

```
10-12 23:45:26.145: E/AndroidRuntime(12592): FATAL EXCEPTION: main
10-12 23:45:26.145: E/AndroidRuntime(12592): java.lang.IllegalStateException: This ViewTreeObserver is not alive, call getViewTreeObserver() again
10-12 23:45:26.145: E/AndroidRuntime(12592):     at android.view.ViewTreeObserver.checkIsAlive(ViewTreeObserver.java:509)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at android.view.ViewTreeObserver.removeGlobalOnLayoutListener(ViewTreeObserver.java:356)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at com.thimmey.rezepte.AddRecipeActivity_GeneralFragment$1.onGlobalLayout(AddActivity_GeneralFragment.java:83)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at android.view.ViewTreeObserver.dispatchOnGlobalLayout(ViewTreeObserver.java:566)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1736)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2644)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at android.os.Looper.loop(Looper.java:137)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at android.app.ActivityThread.main(ActivityThread.java:4517)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at java.lang.reflect.Method.invokeNative(Native Method)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at java.lang.reflect.Method.invoke(Method.java:511)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
10-12 23:45:26.145: E/AndroidRuntime(12592):     at dalvik.system.NativeStart.main(Native Method) 
```

文档说`removeGlobalOnLayoutListener`已弃用，但如果我`removeOnGlobalLayoutListener`按照建议使用 ，我会收到未定义的错误。

我做错了什么？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-12T22:15:32.833

尝试这个 ：

```
 ViewTreeObserver observer = imageViewPicture.getViewTreeObserver();
   observer.addOnGlobalLayoutListener (new OnGlobalLayoutListener () {
    @Override
     public void onGlobalLayout() {

       imageViewPicture.getViewTreeObserver().removeGlobalOnLayoutListener(this);
      }
    }); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-03-20T17:27:52.330

[另一个解决方案](https://stackoverflow.com/a/12867844/253468)可以正常工作，但它不能解释为什么会发生这种情况。

这里有几个问题需要解决：

### `GlobalOn`VS`OnGlobal`

使用 GlobalOn 版本会给你一个弃用警告，但如果你检查源它只是调用 OnGlobal 版本，所以它们是等价的。不同之处在于您只能使用 API 级别 16 中的 OnGlobal 版本，因此如果您针对的是早期版本，则必须使用 GlobalOn 并处理该弃用警告。

### 为什么它死了？

请注意，这个问题是关于 中的代码`onCreateView`，其中`imageViewPicture`尚未附加到视图层次结构，它刚刚被夸大了。如果您快速浏览一下，`View.getViewTreeObserver()`您会发现它在这种情况下创建了一个“浮动”观察者。然后当视图被放入层次结构时`dispatchAttachedToWindow`，它会合并窗口和视图的浮动观察者：

```
info.mTreeObserver.merge(mFloatingTreeObserver); 
```

它将所有注册的侦听器移动到窗口的观察者并杀死浮动观察者。

您获得的原始观察者是浮动观察者，它已死，因此对其调用添加/删除会导致上述异常。

### 他们是同一个观察者吗？

作为 Danyal，我也很困惑为什么要`removeGlobalOnLayoutListener`在不同的观察者身上工作，但现在有了临时浮动观察者就很清楚了。当浮动的被合并到窗口的观察者时，监听器被移动到另一个观察者，所以`View.getViewTreeObserver()`稍后调用会给你一个包含你的监听器的观察者。新的观察者现在负责处理你的监听器。

### 但它有时会起作用！和另一种解决方案

至于 Zordid 关于为什么在许多情况下可以保留本地（闭包）变量的评论，可以用类似的推理来解释：刚刚膨胀的视图在`onCreateView`返回后还没有附加一点。您看到的大部分内容可能都在`onCreateView`生命周期之后的方法中。如果与观察者相关的代码位于`onViewCreated`. 每个生命周期方法都有自己的职责，所以我建议像这样拆分代码：

```
private ImageView imageViewPicture;

@Override public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
}

@Override public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_general_activity_add_recipe, container, false);

    // assuming ... includes:
    this.imageViewPicture = view.findViewById(R.id.image);

    return view;
}

@Override public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    final ViewTreeObserver observer = imageViewPicture.getViewTreeObserver();
    observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener () {
        @Override public void onGlobalLayout() {
            observer.removeGlobalOnLayoutListener(this);
        }
    });
} 
```

我也喜欢将我的其他侦听器连接到 中`onViewCreated`，这样实例变量的数量就会最小化，因此`imageViewPicture`将是一个局部变量。

`Activity.setContentView`立即附加膨胀视图并且通常被调用的情况可能也是如此，`onCreate`因此在您与观察者/听众一起玩时，层次结构是活跃的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-17T16:20:38.597

最好尝试检查 a`getViewTreeObserver`是否还活着。我认为下面的代码会起作用。基于[https://stackoverflow.com/a/15301092/2914140](https://stackoverflow.com/a/15301092/2914140)、[https://stackoverflow.com/a/26193736/2914140](https://stackoverflow.com/a/26193736/2914140)等。

** 更新 **

[从 ViewTreeObserver](https://stackoverflow.com/questions/26192686/remove-listener-from-viewtreeobserver)阅读Remove listener 后，[https:](https://stackoverflow.com/a/40013262/2914140) //stackoverflow.com/a/40013262/2914140我重写了一点。

```
public static void captureGlobalLayout(@NonNull final View view,
                                       @NonNull final ViewTreeObserver.OnGlobalLayoutListener listener) {
    ViewTreeObserver vto = view.getViewTreeObserver();
    if (vto.isAlive()) {
        vto.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
                    @Override
                    public void onGlobalLayout() {
                        ViewTreeObserver vto = view.getViewTreeObserver();
                        if (vto.isAlive()) {
                            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
                                vto.removeOnGlobalLayoutListener(this);
                            } else {
                                //noinspection deprecation
                                vto.removeGlobalOnLayoutListener(this);
                            }
                            listener.onGlobalLayout();
                        }
                    }
                });
    } else {
        view.post(new Runnable() {
            @Override
            public void run() {
                listener.onGlobalLayout();
            }
        });

    }
} 
```

**旧答案**

奇怪，但即使 `view.getViewTreeObserver().isAlive()`是真的，下一次调用 view.getViewTreeObserver() 可能会再次产生相同的异常。所以，我用 try-catch 包围了一个代码。可能您可以跳过所有这些并仅保留`view.post(...)`块。

```
if (view.getViewTreeObserver().isAlive()) {
    try {
        view.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                if (view.getViewTreeObserver().isAlive()) {
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
                        view.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                    } else {
                        view.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                    }
                }
                yourCode();
            }
        });
    } catch (IllegalStateException e) {
        e.printStackTrace();
        // The same as below branch.
        getActivity().runOnUiThread(new Runnable() {
            @Override
            public void run() {
                view.post(new Runnable() {
                    @Override
                    public void run() {
                        yourCode();
                    }
                });
            }
        });
    }
} else {
    getActivity().runOnUiThread(new Runnable() {
        @Override
        public void run() {
            // Try to wait until the view is ready.
            view.post(new Runnable() {
                @Override
                public void run() {
                    yourCode();
                }
            });
        }
    });
} 
```

可能`view.post(...)`就足够了，但我从后台线程调用它，所以如果你这样做，最好从`runOnUiThread(new Runnable() ...`.

# solr - 如何为 Lucene 4.0 启用新的可选 BlockPostingsFormat？

> ID：12867762
> 
> 赞同：6
> 
> 时间：2012-10-12T22:07:24.797
> 
> 标签：solr, lucene

Lucene-Core 4.0 的发行说明提到了一个值得注意的变化：

> • 新的“块”PostingsFormat 提供改进的搜索性能和索引压缩。这可能会成为未来版本中的默认格式。

根据这篇[博](http://blog.mikemccandless.com/2012/08/lucenes-new-blockpostingsformat-thanks.html)文，BlockPostingsFormat 产生的索引更小，并且比之前的格式更快（对于大多数查询）。

但是，我找不到任何地方提到如何在 4.0 中选择这种格式。在哪里可以指定新的 BlockPostingsFormat 优先于旧的默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:41:36.697

几个步骤：

1.  选择一个编解码器。然后“修改”它以使用[BlockPostingsFormat](https://lucene.apache.org/core/4_0_0/codecs/org/apache/lucene/codecs/block/BlockPostingsFormat.html)作为 PostingFormat 类。您可以扩展编解码器的类，或使用[FilterCodec](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/codecs/FilterCodec.html)，它可以让您覆盖编解码器的某些设置。
2.  在 META-INF/services/org.apache.lucene.codecs.Codec 创建一个文件。它应该列出您在上一步中创建的编解码器类的完整类名。这是为了满足 Lucene 4 加载编解码器的方式。
3.  调用[IndexWriterConfig.setCodec(Codec)](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/index/IndexWriterConfig.html#setCodec%28org.apache.lucene.codecs.Codec%29)来指定您刚刚创建的编解码器。
4.  像往常一样使用 IndexWriterConfig 对象。

根据 Javadoc，BlockPostingsFormat 在 index 目录中创建 .doc 和 .pos 文件，而 Lucene40PostingsFormat 创建 .frq 和 .prx 文件。所以这是判断 Lucene 是否真的使用块发布格式的一种方法。

我修改了 Lucene 核心 Javadoc 中的示例来测试块发布格式。这是代码（希望对您有所帮助）：

* * *

org.apache.lucene.codecs.Codec

```
# See http://www.romseysoftware.co.uk/2012/07/04/writing-a-new-lucene-codec/
# This file should be in /somewhere_in_your_classpath/META-INF/services/org.apache.lucene.codecs.Codec
# 
# List of codecs
lucene4examples.Lucene40WithBlockCodec 
```

* * *

Lucene40WithBlockCodec.java

```
package lucene4examples;

import org.apache.lucene.codecs.FilterCodec;
import org.apache.lucene.codecs.PostingsFormat;
import org.apache.lucene.codecs.block.BlockPostingsFormat;
import org.apache.lucene.codecs.lucene40.Lucene40Codec;

// Lucene 4.0 codec with block posting format

public class Lucene40WithBlockCodec extends FilterCodec {

    public Lucene40WithBlockCodec() {
    super("Lucene40WithBlock", new Lucene40Codec());

    }

    @Override
    public PostingsFormat postingsFormat() {
    return new BlockPostingsFormat();
    }

} 
```

* * *

BlockPostingsFormatExample.java

```
package lucene4examples;

import java.io.File;
import java.io.IOException;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.TextField;
import org.apache.lucene.index.DirectoryReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.queryparser.classic.ParseException;
import org.apache.lucene.queryparser.classic.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.util.Version;

// This example is based on the one that comes with Lucene 4.0.0 core API Javadoc
// (http://lucene.apache.org/core/4_0_0/core/overview-summary.html)

public class BlockPostingsFormatExample {

    public static void main(String[] args) throws IOException, ParseException {
    Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_40);

    // Store the index on disk:
    Directory directory = FSDirectory.open(new File(
        "/index_dir"));
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_40,
        analyzer);

    // If the following line of code is commented out, the original Lucene
    // 4.0 codec will be used.
    // Else, the Lucene 4.0 codec with block posting format
    // (http://blog.mikemccandless.com/2012/08/lucenes-new-blockpostingsformat-thanks.html)
    // will be used.
    config.setCodec(new Lucene40WithBlockCodec());

    IndexWriter iwriter = new IndexWriter(directory, config);
    Document doc = new Document();
    String text = "This is the text to be indexed.";
    doc.add(new Field("fieldname", text, TextField.TYPE_STORED));
    iwriter.addDocument(doc);
    iwriter.close();

    // Now search the index:
    DirectoryReader ireader = DirectoryReader.open(directory);
    IndexSearcher isearcher = new IndexSearcher(ireader);
    // Parse a simple query that searches for "text":
    QueryParser parser = new QueryParser(Version.LUCENE_40, "fieldname",
        analyzer);
    Query query = parser.parse("text");
    ScoreDoc[] hits = isearcher.search(query, null, 1000).scoreDocs;
    System.out.println("hits.length = " + hits.length);
    // Iterate through the results:
    for (int i = 0; i < hits.length; i++) {
        Document hitDoc = isearcher.doc(hits[i].doc);
        System.out.println("text: " + hitDoc.get("fieldname"));
    }
    ireader.close();
    directory.close();
    }

} 
```

# php - PHP - 使用空接口来确定逻辑

> ID：12867765
> 
> 赞同：8
> 
> 时间：2012-10-12T22:07:38.407
> 
> 标签：php, oop, interface

有几个地方我根据类实现的接口执行逻辑 - 有什么理由表明这可能是错的，也可能不是错的？（感觉很脏）

这样做的原因是您不必添加任何类属性或方法来确定这些事情，基本上在类定义中您可以明确说明它可以/不能做什么。

一种用例是 ajax 调用，有些要求您登录，有些则不需要：

```
class ajax_ads extends ajax_controller implements no_login {

} 
```

此外，接口中没有方法，仅用于此目的。

```
interface no_login {} 
```

然后在基本控制器中：

```
$controller = controller::factory()
if( !($controller instanceof no_login) && !$controller->LoggedIn()){
    return $controller->redirect(/*login page*/); 
} 
```

使用 instance_of 似乎很轻巧且简单，并且工作正常，但再次感觉我完全滥用了界面的目的。

所以我问，使用接口来确定逻辑是一个坏主意、坏 oop 还是“好的”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T22:10:33.733

当您需要 a`if`或 a`switch`来确定对象应该处于的状态时，这通常是您需要**polymorphism**的好兆头。

在您的情况下，应该有一个**抽象**类：`Ajax_Ads`和两个扩展类：`No_Login_Ajax_Ads extends Ajax_Ads`和`Login_Ajax_Ads extends Ajax_Ads`。并且您根据程序的状态实例化您需要的那个，这可以通过**factory**来完成。

欲了解更多信息，请观看以下讲座：**[清洁代码会谈——继承、多态性和测试](http://www.youtube.com/watch?v=4F72VULWFvc)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-13T05:20:49.760

接受的答案来自 2012 年。Laravel 今天使用空接口模式，所以我会说没关系。

```
<?php

namespace Illuminate\Contracts\Queue;

interface ShouldQueue
{
    //
} 
```

[https://github.com/laravel/framework/blob/8.x/src/Illuminate/Contracts/Queue/ShouldQueue.php](https://github.com/laravel/framework/blob/8.x/src/Illuminate/Contracts/Queue/ShouldQueue.php)

```
protected function sendMailable(MailableContract $mailable)
{
    return $mailable instanceof ShouldQueue
                    ? $mailable->mailer($this->name)->queue($this->queue)
                    : $mailable->mailer($this->name)->send($this);
} 
```

[https://github.com/laravel/framework/blob/8.x/src/Illuminate/Mail/Mailer.php#L300](https://github.com/laravel/framework/blob/8.x/src/Illuminate/Mail/Mailer.php#L300)（第300-305行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:12:22.127

我不知道有什么缺点，但感觉就像是对接口语法的误用。为什么不在 ajax_ads 中实现一个简单的方法：

```
class ajax_ads
{
    ...
    public function requiresLogin() { return false; }
} 
```

然后替换

```
if ($controller instanceof no_login) ... 
```

经过

```
if (!$controller->requiresLogin()) ... 
```

这种方法可以缩短到几乎与[trait](http://www.php.net/manual/en/language.oop5.traits.php)相同的简洁性。

# .net - WCF 自定义对象序列化

> ID：12867766
> 
> 赞同：1
> 
> 时间：2012-10-12T22:07:43.043
> 
> 标签：.net, wcf, serialization

我有以下情况。

我的环境是 Visual Studio 2010，Framework 4.0。

有一个我无法控制的 dll，其中包含某些（相当复杂的）对象。我需要在我的 wcf 服务中调用该对象，然后将其传递给客户端应用程序，以便客户端应用程序继续使用它。

我在 wcf 中创建数据合约，如下所示：

```
 [DataContract]
    public class Test
    {       
        [DataMember]
        public dllCustomObjectType MyTest;
    } 
```

然后我为这个数据合约创建一个接口：

```
 interface ITest
    {    
        [OperationContract]
        dllCustomObjectType GetMyTest(int Id);
    } 
```

然后我实现接口并在客户端应用程序中使用实现的方法。

客户端应用程序引用了我无法控制的同一个 dll。

当我尝试运行它时（事实上，即使我更新了服务引用）我收到请求失败并且元数据包含无法解析的引用的错误。

我可以在我的数据合同中复制该对象（这是很多工作），但我想知道是否有一种方法可以将该对象类型的值传递给客户端应用程序而无需重新创建对象。

我将不胜感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:44:07.077

为此，WCF 需要知道如何将“dllCustomObjectType”转换为 XML。也就是说，“dllCustomObjectType”类型需要是一种在设计时考虑到序列化的类型，并且可以被 DataContractSerializer 识别（参见[http://msdn.microsoft.com/en-us/library/ms731923.aspx](http://msdn.microsoft.com/en-us/library/ms731923.aspx)）。如果您的第 3 方 DLL 的创建者从未设计过该类型来支持序列化，那么您基本上需要为它编写自己的序列化/反序列化代码。您可以通过将类型转换为您自己的自定义类型（最简单）或创建数据协定代理（[http://msdn.microsoft.com/en-us/library/ms733064.aspx](http://msdn.microsoft.com/en-us/library/ms733064.aspx)）。另一种选择是让自定义类型（例如上面示例中的“Test”）实现一些动态序列化接口（例如 IXmlSerializable 或 ISerializable），您可以在其中手动序列化包含的“dllCustomObjectType”，然后在您的服务中使用 Test 而不是 dllCustomObjectType合同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:13:34.500

尝试将命名空间添加到您的数据合同

```
[DataContract(Namespace="namespace.sample.com")] 
```

# c++ - 访问对象的字节

> ID：12867772
> 
> 赞同：0
> 
> 时间：2012-10-12T22:08:00.517
> 
> 标签：c++, .net, c++-cli

我有一个不包含公共变量的对象，但它所做的只是保存数据（另一个公司的 API，我无法更改）。他们确实为我提供了字节映射，告诉我什么值是多长，以及它们的位置。

我不知所措的是如何访问这些字段。在大学里，我们在 memcpy 等方面做了很多工作，但在 CLI 中，我怀疑这是解决这个问题的正确方法......

从这个对象中提取信息字节的最佳方法是什么？

下面是我想要完成的简单伪代码，我只是不确定在语法上执行此操作的最佳方法。我对 CLI 和 .Net 不是很熟悉，并且认为必须有一个好方法来解决这个问题......

```
int GetSingleDataPoint(int LowestByte,int NumOfBytes, Object^ DataRecord)
Copy the NumOfBytes starting at DataRecord[LowestBytes] to a temporary integer
return temporary integer 
```

如果在这个讨论中很重要，数据是小端压缩的，并且包含 1-4 字节长的有符号和无符号变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:11:34.760

如果提供的对象是 CLI 对象，那么通常不适合直接访问字节。我相信使用编组是可能的，但是使用反射来访问私有/受保护成员会更容易。例如：

```
Object^ getFieldByName(Object^ obj, String^ name, Type^ t)
{
    return t->GetField(name, BindingFlags::Public | BindingFlags::NonPublic | BindingFlags::Instance)->GetValue(obj);
} 
```

如果它是本机对象，只需执行以下操作（基本上是您在问题中建议的）：

```
int GetSingleDataPoint(int LowestByte,int NumOfBytes, void* object)
{
    int result;
    size_t numBytes;

    numBytes = NumOfBytes;
    if(numBytes > sizeof(int))
        numBytes = sizeof(int);

    memcpy(&result, object+LowestByte, numBytes);

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:14:17.937

我认为最好的方法是在 .NET 项目中使用 C++ 本机代码，并使用可爱`memcpy`甚至类型转换（甚至更快），例如

```
int n1 = * (unsigned char*) (DataRecord + LowestBytes);
int n2 = * (int16_t*) (DataRecord + LowestBytes);
int n4 = * (int32_t*) (DataRecord + LowestBytes); 
```

由于在 .NET 中您必须使用`Marshal`，而且由于您的类是本机 C++ 类，所以它就像地狱一样！！

# perl - 如何进行“if ($variable[any_index] =~ m/'string'/) {print $variable[next_index];}”类型的匹配？

> ID：12867773
> 
> 赞同：3
> 
> 时间：2012-10-12T22:08:18.620
> 
> 标签：perl

请问，我怎样才能做这样的比赛：

```
my @variable = split;
if ($variable[any_index] =~ m/'string'/) {print $variable[next_index];} 
```

有没有一种简单的方法来指定 $variable[any_index]？

是否可以在语句“print $variable[next_index]”中使用某种“向前看”？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:20:09.517

```
print $variable[$_] for grep { $variable[$_-1] =~ /'string'/ } 1..$#variable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:19:07.730

```
if ( my ($idx) = grep $variable[$_] =~ /string/, 0..$#variable ) {
    print "$variable[$idx+1]\n";
} 
```

如果要打印所有匹配项，

```
for my $idx ( grep $variable[$_] =~ /string/, 0..$#variable ) {
    print "$variable[$idx+1]\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T05:01:46.743

不要误会我的意思，但是 grep 和 map 总是让我害怕。这是我的做法：

```
#!/usr/bin/perl -w
use strict;

my @array = qw/hello world hello there hello you/;
foreach (0..$#array) 
{
    print $array[$_ + 1]."\n" if $array[$_] =~ /llo/;
} 
```

这将打印：

```
world
there
you 
```

# objective-c - Objective-C 中是否有任何类似于 C# yield return 的东西

> ID：12867774
> 
> 赞同：3
> 
> 时间：2012-10-12T22:08:20.427
> 
> 标签：objective-c

Objective-C 中有什么类似于 C# 的`yield return`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:10:29.340

不，Objective-C 中没有任何东西可以让您轻松构建可迭代的解决方案。

一般来说， Objective-C 中的[*快速枚举*](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocFastEnumeration.html)是使用与 C#、Java 或 C++ 完全不同的机制构建的。采用该协议相对复杂，尤其是与带有它的 C# 相比`yield return`，尽管它肯定是可行的。

我发现 Objective-C 块为快速枚举提供了一个可用的替代方案。考虑实现基于块的枚举而不是快速枚举 - 它允许您使用类似于`yield return`. 另一方面，你的 API 的客户端需要提供一个块来使用你的枚举。这并不理想，但很有用，特别是对于复杂的枚举器，例如基于树的枚举器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T22:28:10.663

正如 dasblinkenlight 提到的那样，没有直接`fast enumeration`存在，但有很大不同。

Mike Ash 在 2009 年提出了这个问题，并提出了生成器的实现（类似概念）：

[http://www.mikeash.com/pyblog/friday-qa-2009-10-30-generators-in-objective-c.html](http://www.mikeash.com/pyblog/friday-qa-2009-10-30-generators-in-objective-c.html)

相当简洁的运行时魔法，但我不一定建议采用它，因为它支持与底层系统完全不同的设计模式；在生产环境中使用的维护和学习曲线成本将非常高。

# iphone - 如何检查模态视图控制器是否无法显示？

> ID：12867782
> 
> 赞同：0
> 
> 时间：2012-10-12T22:08:57.570
> 
> 标签：iphone, ios, cocoa-touch

我有一个将模态视图控制器用于各种目的的应用程序。对于这个问题，最重要的是，我们使用模态控制器在用户注销时显示登录屏幕。

我遇到的问题是，如果在调用时另一个模态控制器在屏幕上或屏幕外进行动画处理，则 presentModalViewController:animated: 似乎会静默失败。它将打印到调试控制台并显示警告，但该方法本身不会返回 BOOL 或抛出异常，因此我似乎无法检查代码是否失败，因此我可以在一秒钟内重试。

有没有什么方法可以检测到调用这个方法后控制器没有立即显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:09:51.687

所以当我输入这个问题时，我意识到我可以检查presentingViewController（或parentViewController）来查看它是否显示，如果没有，再试一次。

经过测试，它可以工作。想我会发布并回答这个问题，让其他人发现可能会遇到类似的问题。

* * *

我在测试中注意到的其他一些事情：

*   看起来如果模态视图没有显示动画，即使您拨打电话时另一个模态视图正在动画，它也会成功。

*   在您正在显示的控制器上调用dismissModalViewControllerAnimated：NO，在向模态控制器呈现动画之前，即使另一个控制器正在制作动画，它也将允许它成功完成。

# scons - .sconsign.dblite 文件是做什么用的？

> ID：12867783
> 
> 赞同：23
> 
> 时间：2012-10-12T22:09:00.837
> 
> 标签：scons

如果我删除它会发生什么？

我应该把它置于版本控制之下吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-12T22:11:14.627

该`.sconsign.dblite`文件是 SCons 用来保存文件签名以加快未来构建的临时数据库。如果您删除它，SCons 将重新创建它（因此，您的下一个构建可能需要稍长一些的时间）。不应将其置于版本控制之下。

# android - VM内存中的几个大位图

> ID：12867788
> 
> 赞同：0
> 
> 时间：2012-10-12T22:09:42.630
> 
> 标签：android

我需要将几个大位图加载到内存中（同时在屏幕上使用，alpha png）。

我已经使用教程有效地加载了位图：（http://developer.android.com/training/displaying-bitmaps/load-bitmap.html）

我的问题是，我的位图（只有 3 个）在高分辨率屏幕上超过了 32MB 堆限制。（愚蠢的限制）。

我现在能做什么？无论如何在应用程序分配的内存堆之外加载位图还是我被困在这里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:44:24.270

尝试使用这些解码选项：

```
options = new BitmapFactory.Options();
options.inPreferredConfig = Bitmap.Config.RGB_565; 
```

然后将其传递给 BitmapFactory 解码器，如果您的图像显示时没有太多伪影，您可以使用 565 色彩空间来节省一半的内存

# ruby - Ruby 条件 If Else 赋值

> ID：12867791
> 
> 赞同：1
> 
> 时间：2012-10-12T22:10:03.730
> 
> 标签：ruby, ruby-on-rails-3, refactoring

所以我有以下代码，我想让它更具可读性：

```
user = User.find_by_username(username)
user = User.new(credentials) if user.nil? 
```

本质上第一行是默认的，如果还没有设置，下面的行会实例化自己。

有没有办法我可以清理一下并将它放到一行代码中？可能是这样的：

```
user = User.find_by_username(username) || User.new(credentials) 
```

* * *

**编辑**

我现在意识到我提供的代码完全符合我的需要，很抱歉浪费了网络空间，但请随时提出替代解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T22:14:11.537

是的，你写的正是正确的答案。

如果愿意，您也可以这样写：

```
user = User.find_by_username(username)
user ||= User.new(credentials) 
```

请记住，如果第一个示例是 ，则您的第一个示例只会分配第二个值`nil`，但是您的第二个示例和我上面的示例将同时为`nil`and分配第二个值`false`。

*编辑*：正如其他人所提到的，如果您正在使用 Active Record，您还可以使用基于[动态属性的查找器](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Dynamic+attribute-based+finders)

```
user.find_or_initialize_by_username(credentials) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T22:16:24.283

它更容易做到

```
user.find_or_create_by_name(credentials) 
```

并且凭据将在那里有用户名

[通过多个属性](https://stackoverflow.com/questions/3046607/rails-find-or-create-by-more-than-one-attribute)查看Rails find_or_create？

和[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

# php - 我怎样才能让这个回声起作用？

> ID：12867797
> 
> 赞同：1
> 
> 时间：2012-10-12T22:10:41.903
> 
> 标签：php, echo, multiple-choice

如果您有 abcd 答案或 ab 答案，如何使用此代码使其仅回显收音机或复选框。在我的测验中，它会是 abcd 和 a (true) b (false) 答案。要完成我的测验，这是唯一阻止我完成它的事情。我的问题可能不是重点，但我试图让它接近我所做的事情。谢谢你的帮助。

```
<?php
    //retreive questions from database and put into question box

    $query2 = "SELECT `QuestionId`, `Question`, `Opt1`, `Opt2`, `Opt3`, `Opt4`,`Answer` FROM `pf_questions`";

    $question2 = mysql_query($query2);

    while($row = mysql_fetch_array($question2)){

        $id         = $row['QuestionId'];
        $question   = $row['Question'];
        $opt1       = $row['Opt1'];
        $opt2       = $row['Opt2'];
        $opt3       = $row['Opt3'];
        $opt4       = $row['Opt4'];
        $answer     = $row["Answer"];

    ?>
    <div id="ContainerQuestion">
        <span class="Question">Question <?php echo $id; ?>. <?php echo $question; ?></span>

            <p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'a')?("checked='checked'"):(""); ?>  value="a"> <?php echo $opt1; ?> </p>
            <p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'b')?("checked='checked'"):(""); ?> value="b"> <?php echo $opt2; ?> </p>
            <p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'c')?("checked='checked'"):(""); ?> value="c"> <?php echo $opt3; ?> </p>

            <p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'd')?("checked='checked'"):(""); ?> value="d"> <?php echo $opt4; ?> </p>

    </div>
    <?php
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:19:27.957

我想我明白你在问什么。您想将每一行包装在“if”子句中。例如：

```
<?php if( isset ($opt3) ) { ?>

<p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'c')?("checked='checked'"):(""); ?> value="c"> <?php echo $opt3; ?> </p>

<?php } 
      if( isset ($opt4) ) { ?>

<p><input type=radio name='q<?php echo $id; ?>' <?=( $answer  == 'd')?("checked='checked'"):(""); ?> value="d"> <?php echo $opt4; ?> </p>

<?php } ?> 
```

有点丑陋的黑客，但它应该工作，你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:27:40.363

我可能会用`while`以下内容（未经测试）替换您的循环：

```
$answerFields = array('Opt1'=>'a', 'Opt2'=>'b', 'Opt3'=>'c', 'Opt4'=>'d');

while($row = mysql_fetch_array($question2)){
    $id         = $row['QuestionId'];
    $question   = $row['Question'];

    // Print Question
    printf('<div id="ContainerQuestion">');
    printf('<span class="Question">Question %s. %s</span>', $id, $question);

    // Print Answers
    foreach($answerFields as $field=>$ans)
    {
        if(array_key_exists($field, $row) && $row[$field])
        {
            $checked = ($row["Answer"] == $ans) ? 'checked' : '';
            printf('<p><input type="radio" name="%s" %s value="%s">%s</p>', 
                $id, $checked, $ans, $row[$field]);
        }
    }
} 
```

如果未设置数据库中的答案字段（Opt1、Opt 等）或为空字符串，则`<p>`不应打印包含响应的内容。

此解决方案允许您将应用程序扩展到 3/4 响应已填充且 1/4 为空的情况。`printf`它还通过使用语句而不是在内联 php 和 html 之间跳转来稍微清理您的代码。

最后，强制性说明指出有关准备好的陈述的重要评论。

# visual-studio - UI 测试 Visual Studio 2012

> ID：12867798
> 
> 赞同：4
> 
> 时间：2012-10-12T22:10:46.530
> 
> 标签：visual-studio, unit-testing, testing, visual-studio-2012

我在 Visual Studio 2012 中为我的一个项目记录测试，它记录了第一个，然后我暂停生成一个方法，在恢复并为此生成代码时，它说 Coded UI Test Builder “值不能为空参数名称：钥匙”

有谁知道什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-09T13:05:03.107

我前段时间遇到过这个问题。只需关闭测试生成器，构建解决方案，然后关闭并重新打开即可修复它。

如果问题仍然存在，那么可能是因为您希望放置 UI 测试方法。试着把它放在顶部

示例（请参阅我如何注释掉以前的录音，并将新录音放在顶部）：

```
public void CodedUITestMethod1()
        {

            this.UIMap.RecordedMethod15();

            // this.UIMap.RecordedMethod5();

            //this.UIMap.RecordedMethod1();
            //this.UIMap.RecordedMethod2(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T16:33:59.720

遇到同样的问题并通过将 UIMap 添加到 CUIT 来解决它。

我注意到在我添加后`Coded UI Test Project`未`Coded UI test Map`创建，因此通过右键单击窗口中的已创建`Coded UI Test Project`（即`CodedUITestProject1`） ，然后->并选择类别下的项目，解决问题。`Solution Explorer``Add``New Item...``Coded UI test Map``Test`

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T04:06:11.460

这看起来像标准的参数 nullexception 消息。这可能是由于您正在录制的控件类型而发生的。

如果 UI 不是自定义 UI，您能否提供重现问题的步骤？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-14T15:13:15.747

我有点晚了，但是当我右键单击并选择“添加单元测试”到我的控制器中的一个方法时，我得到了这个错误。我通过构建解决方案来解决它，然后返回并按照相同的步骤添加单元测试。

# ruby - Debian 打包系统和 RVM 一起玩得好吗？

> ID：12867799
> 
> 赞同：2
> 
> 时间：2012-10-12T22:10:52.147
> 
> 标签：ruby, rubygems, rvm, debian

**更新**

*原谅我的无知，当我真正指的是 RubyGems 时，我想我问了他关于 rvm 的问题。而且我认为他正在考虑 RubyGems，因为它似乎确实存在一些争议，至少在过去有：[http ://stakeventures.com/articles/2008/12/04/rubygem-is-from-mars- aptget-is-from-venus](http://stakeventures.com/articles/2008/12/04/rubygem-is-from-mars-aptget-is-from-venus)。所以请 s/rvm/RubyGems/g 回答以下问题。*

**结束更新**

我的服务器管理员对在 Debian 上使用 rvm 有点警惕。他是这样说的：

> 不幸的是，整个 rvm 系统无法与像 Debian 这样的打包系统正确交互，而且当您在不同时间进行部署时，部署是一场噩梦。[你可以很容易地在不同的系统上使用不同版本的模块，等等，你必须处理整个 Debian 打包系统中的 rvm stomping。]

我认为他在这里所说的是我们将在多台服务器上运行应用程序，如果我们升级一台服务器，它将给我们带来严重的问题。

有没有办法解决他的顾虑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T23:59:37.730

RVM 绝不会在 debian 软件包系统上形成或形成“踩踏”。RVM 为普通用户安装在 $HOME/.rvm 中，或者在 /usr/local/rvm 中使用必须添加成员的“rvm”组，这是第 3 方非关键任务应用程序的正常位置，标头, 和图书馆。

*由于*包管理器，RVM 应运而生。他们永远搞砸了红宝石和宝石的依赖关系，落后于立即推出安全更新的时代，在同一个盒子上安装和管理多个红宝石，而无需玩符号链接游戏来让它们工作，并进行部署对具有多个不同部署要求的多台机器来说是一场噩梦。

RVM 以一种非常无缝的方式解决了所有这些问题，它不仅着眼于确保安装和使用它的用户的安全性，而且还确保包管理器不参与其中。这确保了包管理工具及其已安装包的数据库不会突然被破坏。

我作为用户参与其中，然后作为 RVM 项目的开发人员参与其中，*因为*它很好且优雅地解决了这个难题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T03:11:14.737

Rubygems 不允许很好地控制 gem 版本，但与 bundler 一起使用它可以比 apt-get 更好地控制版本。

您需要阅读[Bundler](https://gembundler.com) - 它允许您指定松散的依赖关系，`Gemfile`而严格的依赖关系记录在`Gemfile.lock`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T00:15:50.960

他担心**ruby​​ 是一个移动的目标**，ruby 每隔几个月就会更新一次，**所有**用户都应该始终更新到**最新的补丁级别**。

Ruby 有很多不同的包（可能除了 openssl），其中 ruby​​ 团队正在使用补丁更新版本，这允许将安全工作集中在一个地方，但这与包管理器的**保守**方法相反，即选择一个版本并且只应用安全补丁对它来说，听起来很**稳定**——它将安全工作分散到多个团队并减慢了整个开源社区的速度。操作系统维护人员不想接受有人为他们完成部分工作并且他们可以信任某人的事实。

至于您的管理员表现出很多无知的过程的重复性，RVM 允许锁定版本，这与上面解释的 Ruby 方法背道而驰。因此，锁定所有内容的最简单方法是将 RVM 锁定到一个版本：

```
rvm install 1.15.14 
```

但是，如果需要锁定 RVM，首选方法是将其锁定到保持兼容性但提供更新的次要版本：

```
rvm install latest-1.15 
```

RVM 不会让这个版本持续很长时间，但是任何时候都会担心当前稳定的“稳定性”——我们会更新以前的版本，以便您决定使用哪个版本。

@deryldoucette 在他的回答中也解释了很多，我试图不“重新解释”事情。

# java - 从数据库中解密 unicode 文本

> ID：12867802
> 
> 赞同：0
> 
> 时间：2012-10-12T22:11:04.297
> 
> 标签：java

当我尝试将加密的“密码文本”保存到 SQL Server 2008r2 数据库时遇到问题。当我从 java-Netbeans 保存时，sql 收到“?????” 在文本字段上，我发现这是因为或 unicode ...我正在使用 BLOWFISH 加密（该类工作完美）但我无法解密它，因为我从 DB “????” 文本而不是原始文本（密码）

你知道我该如何解决这个问题吗？，一位朋友告诉在 DB 上使用“varbinary”而不是“varchar”，但不知道该怎么做：S

谢谢

```
public boolean SavetoDB() {
    DATABASE_CONNECTION con = new DATABASE_CONNECTION();
    cn = con.conectar();

    boolean resp = false;
    try {
        String sql = "INSERT INTO cliente(usuario, pass, Nombre, Apellido, Edad,"
                + "genero, Direccion, Telefono, Celular, img_name,tipo_cuenta, ipaddress, puerto,segundos,minutos,horas)"
                + " VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?,?,?,?,?)";
        PreparedStatement cmd = cn.prepareStatement(sql);
        cmd.setString(1, usuario);
        cmd.setString(2, pass);
        cmd.setString(3, Nombre);
        cmd.setString(4, Apellido);
        cmd.setInt(5, Edad);
        cmd.setString(6, genero);
        cmd.setString(7, Direccion);
        cmd.setInt(8, Telefono);
        cmd.setInt(9, Celular);
        cmd.setString(10, nombrearch);
        cmd.setString(11, tipo_cuenta);
        cmd.setString(12, ip);
        cmd.setString(13, puerto);
        cmd.setInt(14, 1);
        cmd.setInt(15, 0);
        cmd.setInt(16, 0);
        ////////////////////////////////////////////////////////
        ///////////////////////////////////////////////////////

        if (!cmd.execute()) {
            resp = true;
        }
        cmd.close();
        cn.close();
    } catch (Exception ex) {
        System.out.println("Error: " + ex.getMessage());
    }
    return resp;
} 
```

SQL 表：

创建表客户端（

usuario varchar(15) 不是空主键，

传递 varchar(90) 不为空，

Nombre varchar(32) 不为空，

Apellido varchar(32) 不为空，

Edad int 不为空，

Genero varchar(15) 不为空，

方向 varchar(32),

电话 int,

蜂窝整数，

img_name varchar(32) 不为空，

tipo_cuenta varchar(15) 不为空，

fecha_creacion 日期，

ipaddress varchar(20) 不为空，

puerto varchar (30) 不为空，

segundos int 不为空，

minutos int 不为空，

horas int 不为空，

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:19:36.713

尝试在数据库中保存密码文本字节的 md5/sha 摘要。当您需要检查密码时，计算输入密码的摘要并与数据库中的进行比较。

# c - 在不使用数组的情况下，在 C 中查找 100 阶乘中的数字总和

> ID：12867810
> 
> 赞同：2
> 
> 时间：2012-10-12T22:12:07.593
> 
> 标签：c

用于解决项目欧拉问题 20 以找到 100 中的数字总和！我正在运行以下程序，它适用于小数的阶乘，但不适用于 100。我应该使用哪种数据类型，或者是否有必要使用数组来存储数字？

```
int rec(int);

void main()
{   
    int f=1,i=1,z,s=0,r,n;

    while(i<=100)
    {
        f=f*i;
        f=rec(f);
        i++;
    }
    n=f;

    while(n!=0)
    {
        r=n%10;
        n=n/10;
        s=s+r;
    }

    printf("\n%d",s);
}

int rec(int t)
{   
    if(t%10==0)
    {
        t=t/10;
        rec(t);
    }
    return t;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T04:15:49.073

可以使用该`double`类型计算 100 的近似阶乘。您也可以使用[斯特林公式](http://en.wikipedia.org/wiki/Stirling%27s_approximation)，说明

```
n! ≈ sqrt(2*M_PI*n) * pow(n/exp(0),n) 
```

如果你插入数字，你会得到n！≈ 9*10 ^(157)。这意味着您的类型需要能够保存 158 个十进制数字，或者等效地， ~log [2] (9*10 ^(157) ) = 525 位或 66 个 8 位字节。

C 中没有基本的数字类型足够大。您保证获得的最大的是 64 位（如果您使用`unsigned long long`）。

所以，如果你想计算 n! 在 C 中，您要么需要手动构造长算术乘法，要么使用可以为您执行此操作的特殊库。

对于这个相对简单的任务，您实际上可以实现长乘法并使用它通过重复乘法来获得阶乘值。

在下面的程序中，我使用了就地乘法算法，它修改了过程中的一个被乘数，并最终用乘积替换它。该算法可以直接从学校已知的长乘法推导出来。

这个程序计算从 1 到 100 的整数的阶乘：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <limits.h>

typedef unsigned char uint8;
typedef unsigned short uint16;
#if UINT_MAX >= 0xFFFFFFFF
typedef unsigned uint32;
#else
typedef unsigned long uint32;
#endif
typedef unsigned uint;

void MulInPlace(uint8* dst/* n bytes */,
                const uint8* src/* n bytes */,
                uint n)
{
  uint c1, c2;

  if (n >= 0xFFFF) abort();

  for (c1 = n - 1; c1 != ~0u; c1--)
  {
    uint16 s = 0;
    uint32 p = 0; // p must be able to store ceil(log2(n))+2*8 bits

    for (c2 = c1; c2 != ~0u; c2--)
    {
      p += dst[c2] * src[c1 - c2];
    }

    dst[c1] = (uint8)(p & 0xFF);

    for (c2 = c1 + 1; c2 < n; c2++)
    {
      p >>= 8;
      s += dst[c2] + (uint8)(p & 0xFF);
      dst[c2] = (uint8)(s & 0xFF);
      s >>= 8;
    }
  }
}

int ByteDivInPlace(uint8* dst/* n bytes */,
                   uint   n,
                   uint8  divisor,
                   uint8* remainder)
{
  uint rem = 0;
  int nonzero = 0;

  while (n)
  {
    rem += dst[n - 1];
    nonzero |= (dst[n - 1] = rem / divisor);
    rem = (rem % divisor) << 8;
    n--;
  }

  if (remainder != NULL)
    *remainder = (uint8)(rem >> 8);

  return nonzero; // 1 if the quotient is non-zero, 0 otherwise
}

void IncInPlace(uint8* dst/* n bytes */,
                uint n)
{
  uint c = 1;
  while (n-- && c)
  {
    c += *dst;
    *dst++ = c & 0xFF;
    c >>= 8;
  }
}

void DestroyingDecimalPrint(uint8* dst, uint n)
{
  uint8 r;
  if (ByteDivInPlace(dst, n, 10, &r))
    DestroyingDecimalPrint(dst, n);
  printf("%d", r);
}

int main(void)
{
  int i;
  uint8 factorial[66];
  uint8 factor[sizeof(factorial)];
  uint8 tmp[sizeof(factorial)];

  // factor = 1
  memset(factor, 0, sizeof(factor));
  factor[0] = 1;

  // factorial = 1
  memcpy(factorial, factor, sizeof(factorial));

  for (i = 1; i <= 100; i++)
  {
    // factorial *= factor
    MulInPlace(factorial, factor, sizeof(factorial));

    // tmp = factorial
    memcpy(tmp, factorial, sizeof(factorial));

    // print i and tmp
    printf("%i! = ", i);
    DestroyingDecimalPrint(tmp, sizeof(tmp));
    printf("\n");

    // factor += 1
    IncInPlace(factor, sizeof(factor));
  }

  return 0;
} 
```

输出（[ideone](http://ideone.com/7k1kg)）：

```
1! = 1
2! = 2
3! = 6
4! = 24
5! = 120
6! = 720
7! = 5040
8! = 40320
9! = 362880
10! = 3628800
11! = 39916800
12! = 479001600
13! = 6227020800
14! = 87178291200
15! = 1307674368000
16! = 20922789888000
17! = 355687428096000
18! = 6402373705728000
19! = 121645100408832000
20! = 2432902008176640000
21! = 51090942171709440000
22! = 1124000727777607680000
23! = 25852016738884976640000
24! = 620448401733239439360000
25! = 15511210043330985984000000
26! = 403291461126605635584000000
27! = 10888869450418352160768000000
28! = 304888344611713860501504000000
29! = 8841761993739701954543616000000
30! = 265252859812191058636308480000000
31! = 8222838654177922817725562880000000
32! = 263130836933693530167218012160000000
33! = 8683317618811886495518194401280000000
34! = 295232799039604140847618609643520000000
35! = 10333147966386144929666651337523200000000
36! = 371993326789901217467999448150835200000000
37! = 13763753091226345046315979581580902400000000
38! = 523022617466601111760007224100074291200000000
39! = 20397882081197443358640281739902897356800000000
40! = 815915283247897734345611269596115894272000000000
41! = 33452526613163807108170062053440751665152000000000
42! = 1405006117752879898543142606244511569936384000000000
43! = 60415263063373835637355132068513997507264512000000000
44! = 2658271574788448768043625811014615890319638528000000000
45! = 119622220865480194561963161495657715064383733760000000000
46! = 5502622159812088949850305428800254892961651752960000000000
47! = 258623241511168180642964355153611979969197632389120000000000
48! = 12413915592536072670862289047373375038521486354677760000000000
49! = 608281864034267560872252163321295376887552831379210240000000000
50! = 30414093201713378043612608166064768844377641568960512000000000000
51! = 1551118753287382280224243016469303211063259720016986112000000000000
52! = 80658175170943878571660636856403766975289505440883277824000000000000
53! = 4274883284060025564298013753389399649690343788366813724672000000000000
54! = 230843697339241380472092742683027581083278564571807941132288000000000000
55! = 12696403353658275925965100847566516959580321051449436762275840000000000000
56! = 710998587804863451854045647463724949736497978881168458687447040000000000000
57! = 40526919504877216755680601905432322134980384796226602145184481280000000000000
58! = 2350561331282878571829474910515074683828862318181142924420699914240000000000000
59! = 138683118545689835737939019720389406345902876772687432540821294940160000000000000
60! = 8320987112741390144276341183223364380754172606361245952449277696409600000000000000
61! = 507580213877224798800856812176625227226004528988036003099405939480985600000000000000
62! = 31469973260387937525653122354950764088012280797258232192163168247821107200000000000000
63! = 1982608315404440064116146708361898137544773690227268628106279599612729753600000000000000
64! = 126886932185884164103433389335161480802865516174545192198801894375214704230400000000000000
65! = 8247650592082470666723170306785496252186258551345437492922123134388955774976000000000000000
66! = 544344939077443064003729240247842752644293064388798874532860126869671081148416000000000000000
67! = 36471110918188685288249859096605464427167635314049524593701628500267962436943872000000000000000
68! = 2480035542436830599600990418569171581047399201355367672371710738018221445712183296000000000000000
69! = 171122452428141311372468338881272839092270544893520369393648040923257279754140647424000000000000000
70! = 11978571669969891796072783721689098736458938142546425857555362864628009582789845319680000000000000000
71! = 850478588567862317521167644239926010288584608120796235886430763388588680378079017697280000000000000000
72! = 61234458376886086861524070385274672740778091784697328983823014963978384987221689274204160000000000000000
73! = 4470115461512684340891257138125051110076800700282905015819080092370422104067183317016903680000000000000000
74! = 330788544151938641225953028221253782145683251820934971170611926835411235700971565459250872320000000000000000
75! = 24809140811395398091946477116594033660926243886570122837795894512655842677572867409443815424000000000000000000
76! = 1885494701666050254987932260861146558230394535379329335672487982961844043495537923117729972224000000000000000000
77! = 145183092028285869634070784086308284983740379224208358846781574688061991349156420080065207861248000000000000000000
78! = 11324281178206297831457521158732046228731749579488251990048962825668835325234200766245086213177344000000000000000000
79! = 894618213078297528685144171539831652069808216779571907213868063227837990693501860533361810841010176000000000000000000
80! = 71569457046263802294811533723186532165584657342365752577109445058227039255480148842668944867280814080000000000000000000
81! = 5797126020747367985879734231578109105412357244731625958745865049716390179693892056256184534249745940480000000000000000000
82! = 475364333701284174842138206989404946643813294067993328617160934076743994734899148613007131808479167119360000000000000000000
83! = 39455239697206586511897471180120610571436503407643446275224357528369751562996629334879591940103770870906880000000000000000000
84! = 3314240134565353266999387579130131288000666286242049487118846032383059131291716864129885722968716753156177920000000000000000000
85! = 281710411438055027694947944226061159480056634330574206405101912752560026159795933451040286452340924018275123200000000000000000000
86! = 24227095383672732381765523203441259715284870552429381750838764496720162249742450276789464634901319465571660595200000000000000000000
87! = 2107757298379527717213600518699389595229783738061356212322972511214654115727593174080683423236414793504734471782400000000000000000000
88! = 185482642257398439114796845645546284380220968949399346684421580986889562184028199319100141244804501828416633516851200000000000000000000
89! = 16507955160908461081216919262453619309839666236496541854913520707833171034378509739399912570787600662729080382999756800000000000000000000
90! = 1485715964481761497309522733620825737885569961284688766942216863704985393094065876545992131370884059645617234469978112000000000000000000000
91! = 135200152767840296255166568759495142147586866476906677791741734597153670771559994765685283954750449427751168336768008192000000000000000000000
92! = 12438414054641307255475324325873553077577991715875414356840239582938137710983519518443046123837041347353107486982656753664000000000000000000000
93! = 1156772507081641574759205162306240436214753229576413535186142281213246807121467315215203289516844845303838996289387078090752000000000000000000000
94! = 108736615665674308027365285256786601004186803580182872307497374434045199869417927630229109214583415458560865651202385340530688000000000000000000000
95! = 10329978488239059262599702099394727095397746340117372869212250571234293987594703124871765375385424468563282236864226607350415360000000000000000000000
96! = 991677934870949689209571401541893801158183648651267795444376054838492222809091499987689476037000748982075094738965754305639874560000000000000000000000
97! = 96192759682482119853328425949563698712343813919172976158104477319333745612481875498805879175589072651261284189679678167647067832320000000000000000000000
98! = 9426890448883247745626185743057242473809693764078951663494238777294707070023223798882976159207729119823605850588608460429412647567360000000000000000000000
99! = 933262154439441526816992388562667004907159682643816214685929638952175999932299156089414639761565182862536979208272237582511852109168640000000000000000000000
100! = 93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:16:20.150

您应该寻找溢出，在每次迭代后打印值。

请注意，`rec(t);` 它不做任何事情，因为它不使用返回的值......你想要的`t = rec(t);`。

`int`肯定是太短了，试试`long long`……如果仍然溢出，你需要另一个数据结构……例如：GMP 库。

注意：为工作使用一些“适当的”语言可能会让您对必须支持的范围有所了解......例如使用python：

```
>>> import math
>>> math.factorial(100)
93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000L 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T11:03:15.723

```
 private static void problem20()
    {
        string muliplent = "100";
        for (int i = 99; i > 1; i--)
        {
            muliplent = getproduct(muliplent, i);
        }

        int sum = 0;
        char[] result=muliplent.ToCharArray();
        int count = muliplent.ToCharArray().Count();
        for (int j = 0; j < count; j++)
        {
            sum = sum + (result[j] - '0');
        }
        Console.WriteLine("sum is {0}", sum);
        Console.ReadLine();

    }

    private static string getproduct(string multiplent, int multiplier)
    {
        StringBuilder str = new StringBuilder();
        int product = 0;
        int remainder = 0;
        int dividend = 0;
        char[] c = multiplent.ToCharArray();

        for (int i = c.Count() - 1; i >= 0; i--)
        {
            product = (((c[i] - '0') * multiplier) + dividend);
            remainder = product % 10;
            dividend = product / 10;
            if (i != 0)
            {
                str.Insert(0, remainder);
            }
        }
        str.Insert(0, product);

        return str.ToString();
    } 
```

# sql - 将日期时间转换为 DD:HH SQL 的替代方法

> ID：12867813
> 
> 赞同：1
> 
> 时间：2012-10-12T22:12:15.907
> 
> 标签：sql, tsql, datetime, datediff

我有一个转换方法来完成将 datediff() 转换为 dd:hh 但我也试图在其中添加一些额外的计算，这会导致将数字转换为 varchar 的算术溢出错误。

我不是在寻找任何人来解决我的算术问题，只是在寻找可以自己尝试和测试的替代转换方法，如果这没有意义，请告诉我，不确定其他方法是否会改变任何东西。

这是当前的方法：

```
-- resulting in Days
convert(varchar(10), (datediff(second, startdate, enddate)/86400)+':'+ 
-- resulting in hours
convert(varhcar(10), (datediff(second, startdate, enddate)%86400/3600)) as 'DD:HH' 
```

有没有人可以实现同样的目标？

也许更好的方法是问有没有办法限制在此执行的算术以返回一个较短的整数，以便我可以努力避免溢出错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:34:26.287

感谢@rahultripathi 为 SQL 中的日期时间转换提供此链接，给了我我需要的东西。

[单击此处获取链接](http://sqlusa.com/bestpractices/datetimeconversion)

**将尽快用更多信息更新答案，还没有弄清楚一切，如果有人有更好的答案，我会接受**

# php - SOAP 请求未返回正确数据

> ID：12867818
> 
> 赞同：1
> 
> 时间：2012-10-12T22:12:41.867
> 
> 标签：php, soap, wsdl

我正在尝试使用以下肥皂信封来处理 Innovata 肥皂网络请求

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:cus="http://CustomDataTimeTableToolKit.com/">
   <soap:Header>
      <cus:WSAuthenticate>
         <cus:CustomerRefCode>XYZ</cus:CustomerRefCode>
         <cus:Password>XXXXXXXX</cus:Password>
         <cus:WebServicesRefCode>xxx</cus:WebServicesRefCode>
      </cus:WSAuthenticate>
   </soap:Header>
   <soap:Body>
      <cus:GetSchedules>
         <cus:_sSchedulesSearchXML>&lt;GetSchedules_Input customerCode="XXX" productCode="external" dptCode="EDI" dptCodeType="STA" arvCode="LHR" arvCodeType="STA" flightDaysRange="3" MM="10" DD="11" YYYY="2012" searchType="B" cnxType="B" IncludeSummary="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="GetSchedules_Input.xsd"/&gt;</cus:_sSchedulesSearchXML>
      </cus:GetSchedules>
   </soap:Body>
</soap:Envelope> 
```

我编写了以下 PHP 代码，它似乎可以工作但没有返回正确的数据！

```
<?php

    $customerCode = 'XXX';
    $password = 'XXXX';

    $dptCode = 'EDI';
    $dptCodeType='STA';
    $arvCode='LHR'; 
    $arvCodeType='STA';

    $client = new SoapClient('http://ctk.innovataw3svc.com/ctk.asmx?WSDL', array('trace'=>1));
    $client->__setSoapHeaders(array(
        new SoapHeader('http://CustomDataTimeTableToolKit.com/', 
            'WSAuthenticate', 
            array(
                'CustomerRefCode' => $customerCode,
                'Password' => $password,
                'WebServicesRefCode' => 'TKC'
            )
        )
    ));
    $date = new DateTime();
    $in = new stdClass();
    $in->_sSchedulesSearchXML = sprintf(
        '<GetSchedules_Input customerCode="%s" productCode="external" dptCode="%s" dptCodeType="%s" arvCode="%s" arvCodeType="%s" flightDaysRange="3" MM="%s" DD="%s" YYYY="%s" searchType="B" cnxType="B" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="GetSchedules_Input.xsd" />',
        $customerCode, 
        $dptCode, 
        $dptCodeType, 
        $arvCode, 
        $arvCodeType, 
        $date->format('m'), 
        $date->format('d'),
        $date->format('Y')
    );

    try{
        $result = $client->GetSchedules($in);
        print_r($result);
    }
    catch(SoapFault $e){
        echo "Soap Fault: ".$e->getMessage();
    } 
```

输出如下：

```
stdClass Object ( [GetSchedulesResult] => S S S S S S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 M M M M M S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 M M M M M S S S S S S S S S S S S 319 0 M M M M M S S S S S S S S S S S S 319 0 M M M M M S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 320 0 S S S S S S S S S S S S S S S S S 319 0 M M M M M M M M M M M M M M M M M ER4 0 S S S S S S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 M M M M M S S S S S S S S S S S S 319 0 M M M M M S S S S S S S S S S S S 319 0 M M M M M M M M M M M M M M M M M ER4 0 M M M M M S S S S S S S S S S S S 319 0 S S S S S S S S S S S S S S S S S 319 0 M M M M M S S S S S S S S S S S S 319 0 M M M M M M M M M M M M M M M M M ER4 0 M M M M M S S S S S S S S S S S S 319 0 ) 
```

我真的不明白问题出在哪里，非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:12:06.013

因此，看起来您正在将调试输出到网页，并且在浏览器尝试呈现页面时 XML 被剥离。您看到的输出是用餐代码、停靠点等。

换句话说，您总是得到预期的响应。

如果是这种情况，请不要使用`__getLastResponse()`，而只需将 $result 作为对象处理，并根据需要对其进行解析。

# java - 以编程方式访问 Java 文档

> ID：12867820
> 
> 赞同：9
> 
> 时间：2012-10-12T22:13:08.527
> 
> 标签：java, api, documentation

是否有以编程方式访问[Java 文档](http://docs.oracle.com/javase/7/docs/api/)的 api ？类似于 Eclipse 等编辑器/IDE 为 IntelliSense 所做的事情。当然，javadoc 生成的 html 可以被解析和索引，但如果知道某些东西是否已经作为独立包存在，那就太好了。

更新：为了清楚起见，我正在尝试以编程方式访问 Java 语言实现的文档。但是，没有简单的出路，但您必须从 Oracle 的站点获取 openjdk，然后执行`make docs`并提供一些 doclet 以获取非 html 形式的输出。这是我从一开始就试图避免的。所以我现在正在阅读所有的 Makefile，试图弄清楚为什么 $PLATFORM 没有被解析并且源代码构建失败！

我最终解决的问题：

抓取 html 文档。是的。意识到那会完成我的工作。

```
import urllib2
import pymongo

mongo = pymongo.Connection('localhost')
mongo_db = mongo['api_db']
mongo_collection = mongo_db['api_collection']

URL='''http://docs.oracle.com/javase/6/docs/api/index-files/index-'''
URL_range = 27+1

def getPageElements(url):
    content=urllib2.urlopen(url).read()
    from BeautifulSoup import BeautifulSoup
    soup = BeautifulSoup(content)
    elements = soup('dl')
    return elements

def savePageElements(elements):
    for i in elements[0]:
            try:
                    entry={'type_description':str(i.findNext('dt')).split('-')[1].split('<')[0]\
                                    +i.findNext('a').findNext('a').renderContents(),\
                                    'signature':i.findNext('a').findNext('a').renderContents()+i.findNext('b').renderContents(),\
                                    'description': i.findNext('dd').renderContents()\
                            }   
                    print entry
                    insert_id = mongo_collection.save(entry)
            except:
                    pass

def retrieve(str):
     mongo_documents = mongo_collection.find({
    'signature': str,
    #'type_description':"Method of java.io.PrintStream"
    })  
    for this_document in mongo_documents:
        print this_document

if __name__=="__main__":
    for i in range(1,URL_range):
            #url=URL+str(i)+".html"
            #print "Processing:", url
            #elements=getPageElements(url)
            #print elements[0]
            #savePageElements(elements)
            retrieve("println(String)") 
```

但是看看[dexy](http://blog.dexy.it/384)。如果我能够在 Ubuntu 上毫无问题地构建 OpenJDK - 它会生成很好的 JSON 来玩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:46:11.067

在您编写 Eclipse 时，它​​会解析 javadoc 并且做得很好。它似乎是在[3.2M4](http://www.eclipsezone.com/eclipse/forums/t54037.html)中引入的。您可能能够从 Eclipse 源代码中提取功能，向 Eclipse 社区检查入口点可能是一个不错的起点。

如果这不起作用，我想您的起点将是一个普通的 HTML 解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:39:23.173

javadoc 工具从 Java 文件中解析信息并委托给*doclet*以将此结构化信息转换为文档。标准 doclet 生成熟悉的 HTML 输出，但您可以[编写自己的](http://docs.oracle.com/javase/6/docs/jdk/api/javadoc/doclet/index.html)并告诉 javadoc 使用它。如果您有可用的原始源代码，这可能是最可靠的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:50:31.070

*   您可以使用 JavaDoc 工具的输出并将其解析为 XML，如[本例所示](http://www.ibm.com/developerworks/xml/library/x-tipjdoc/index.html)。
*   您还可以使用其他文档提取工具，例如[Doxygen](http://www.doxygen.org)并解析它们（更好的）XML 输出。
*   当您具备基本的解析器知识时，您可以自己编写一个 JavaDoc-extractor。有很多免费的 Java 解析器是一个很好的起点。（我认为这将是您研究原型的最佳方式）。

# c# - 将代码优化到“返回”行？

> ID：12867821
> 
> 赞同：0
> 
> 时间：2012-10-12T22:13:12.800
> 
> 标签：c#, linq

有没有办法把它收紧，这样身体里只有一条线？

```
private int _ProjectGuidToId (Guid guid)
{
    ProjectEntity res = _dbt.ProjectEntity
                            .Where(r => r.ProjectGUID == guid.ToString())
                            .First();
    return res.Id;
} 
```

换句话说，如何在一行代码中使用 LINQ 从数据库的 1 行返回 1 个值 (Id)？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:15:25.063

这样的事情怎么样？

```
private int _ProjectGuidToId (Guid guid)
{
    return _dbt.ProjectEntity.First(r => r.ProjectGUID == guid.ToString()).Id;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T22:18:44.313

使用 First 的谓词子句可以消除 where 子句：

```
return _dbt.ProjectEntity.First( r => r.ProjectGUID == guid.ToString() ).Id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T22:19:16.573

您只需将 .Id 添加到第一行的末尾并返回单行。

但是，我不鼓励这样做。在我看来，一行不可读的代码比两行可读的代码更糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T22:16:54.563

第一个将返回对象的类型，不需要强制转换（[更多详细信息](http://msdn.microsoft.com/en-us/library/bb291976.aspx)。

只需执行以下操作：

```
 return _dbt.ProjectEntity.Where(r => r.ProjectGUID == guid.ToString()).First().Id; 
```

注意：如果不能保证查询返回一个对象，则可能会抛出 InvalidOperationException！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-12T22:19:58.757

如果要强制列表必须包含一项，请使用此选项。如果列表包含多个项目，则可能会引发错误：

```
return _dbt.ProjectEntity.Single(r => r.ProjectGUID == guid.ToString()).Id; 
```

如果列表的长度无关紧要，请使用它：

```
return _dbt.ProjectEntity.First(r => r.ProjectGUID == guid.ToString()).Id; 
```

# c++ - 区分函数指针和成员函数指针

> ID：12867825
> 
> 赞同：1
> 
> 时间：2012-10-12T22:13:51.480
> 
> 标签：c++, c++11, function-pointers, word-wrap, member-function-pointers

我这个代码，它似乎工作：

```
template <typename C>
class class_ {
protected:
    std::map<std::string, native_function> methods;
public:
    template <typename F, F fn>
    class_ &method(const std::string &name) {
        methods[name] = method_helper<C, F>::template toNative<fn>();
        return *this;
    }
}; 
```

这允许：

```
class_<MyClass>()
    .method<decltype(&MyClass::numRows), &MyClass::numRows>("numRows"); 
```

但是，我还想允许将非成员函数作为方法添加到我的导出类中。问题是我需要一个不同的定义`method`来使用正常的函数指针：

```
template <F, F fn>
class_ &method(const std::string &name) {
    methods[name] = function_helper<F>::template toNative<fn>();
    return *this;
} 
```

但是，如上所示，模板参数将完全相同。

除了创建一个名称完全不同的函数之外，还有没有方便的方法来区分函数指针和成员函数指针？或者有没有办法在运行时确定要运行哪些代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:27:58.600

使用[SFINAE](http://rmartinho.github.com/2012/06/01/almost-static-if.html)：

```
template<
    typename F
    , F fn
    , typename std::enable_if<
        std::is_member_pointer<F>::value
        , int
    >::type...
>
class_ &method(const std::string &name)
{
    methods[name] = method_helper<C, F>::template toNative<fn>();
    return *this;
}

template<
    typename F
    , F fn
    , typename std::enable_if<
        !std::is_member_pointer<F>::value
        , int
    >::type...
>
class_ &method(const std::string &name)
{
    methods[name] = function_helper<F>::template toNative<fn>();
    return *this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:39:44.600

您的示例中的非成员函数指针将具有签名：

```
template<typename Ret, typename Args...> Ret (*)(Args args...) 
```

和一个成员函数指针签名：

```
template<typename Ret, typename Args...> Ret (C::*)(Args args...) 
```

这使您可以专注于两个签名：

```
template <typename F, F fn>
class_ &method(const std::string &name) { return method_impl(name, fn); }

template <typename F>
class_ &method_impl(const std::string &name, F fn)
{
    // non-member function variant.
}

template <typename Ret, typename Args...>
class_ &method_impl(const std::string &name, Ret (C::*fn)(Args args...))
{
    // member function variant.
} 
```

注意：如果您更改`method_impl`为`method`，您可以简化您的 API，允许：

```
class_<MyClass>().method("numRows", &MyClass::numRows); 
```

# knockout.js - 无法让我的 jsfiddle 运行 knockout.js

> ID：12867826
> 
> 赞同：0
> 
> 时间：2012-10-12T22:13:54.227
> 
> 标签：knockout.js, jsfiddle

我正在尝试遵循此页面中选项绑定的文档：

[http://knockoutjs.com/documentation/options-binding.html](http://knockoutjs.com/documentation/options-binding.html)

我似乎无法在选择中显示选项。我怀疑它在参考文献中……但我添加了淘汰赛。

这是jsFiddle：

[http://jsfiddle.net/bensjones/xhyBY/2/](http://jsfiddle.net/bensjones/xhyBY/2/)

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:16:49.300

# ruby - 无法销毁父对象

> ID：12867828
> 
> 赞同：1
> 
> 时间：2012-10-12T22:14:15.560
> 
> 标签：ruby, datamapper, ruby-datamapper

我有一个大而复杂的用户模型，看起来像这样：

```
class User

  class Link
    include DataMapper::Resource
    property :id, Serial, :key => false

    belongs_to :follower, :model => 'User', :key => true
    belongs_to :followed, :model => 'User', :key => true
  end

  include DataMapper::Resource

  property :id, Serial
  property :username, String, :required => true

  has n, :links_to_followers, :model => 'User::Link', :child_key => [:followed_id]
  has n, :links_to_followed, :model => 'User::Link', :child_key => [:follower_id]
  has n, :comments
  has 1, :profile_image
end 
```

我的问题是 Datamapper 不让我销毁它。我认为这是 Datamapper 不想用未销毁的子对象销毁对象的结果，所以我放入了一个destroy_deep 方法，该方法在links_to_followers、links_to_followed、底层评论和个人资料图像上调用destroy（这些都被正确销毁） .

但是，即使我在那之后调用 user.destroy，用户也不会被销毁。没有任何类型的错误消息。我是否缺少某种级联删除命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:36:00.080

我解决了这个问题。

显然要调试销毁， object.errors 没有用。而是跟踪异常，例如：

```
begin
  u.destroy
rescue Exception => e
  p e
end 
```

解决方案是其中一个子字段没有映射回用户。我有一个属于 User 的类 Like，但 User 没有 n Likes。

# jquery - jQuery Mobile 多页

> ID：12867834
> 
> 赞同：1
> 
> 时间：2012-10-12T22:14:54.607
> 
> 标签：jquery, mobile

我在使用 jQuery Mobile 处理多个页面时遇到问题。

我目前在 index.html 文件中有几个级别的“页面”，但在链接 3 层页面时遇到问题。

我可以使用 id 从“#home”页面链接回不同的“页面”

```
<a href="#one" data-transition="flip">Page 1</a> 
```

没有问题，然后链接到比这更远的页面，例如

```
 <div data-role="page" data-theme="a" id="info" data-url="info"> 
```

但我不能再使用与以前相同的链接来访问页面“一”

```
 <a href="#one" data-transition="flip">Page 1</a>. 
```

地址栏 (Chrome) 中的 url 将正确更改为 /#one，但它实际上不会处理该页面。有人有想法么？非常感谢

# android - 有没有类似 EventKit for android 的框架？

> ID：12867837
> 
> 赞同：1
> 
> 时间：2012-10-12T22:14:57.420
> 
> 标签：android

我为 iPhone 开发了一个日历。我使用了 EventKit，它非常有用。

所以，我想知道是否有类似 EventKit for Android 的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:24:03.330

您可以使用日历提供程序 [http://developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html)

# r - 在 R 中下载包“Cart”

> ID：12867840
> 
> 赞同：1
> 
> 时间：2012-10-12T22:15:12.190
> 
> 标签：r, package, cartogram

有人知道我在哪里可以下载 R 包“购物车”，它可以帮助创建 Gastner 的“使用基于扩散的制图进行映射”吗？我在 R 上尝试了 install.package 并说它不适用于 R 2.15。R-forge 上有一个关于它的页面，但它没有解释如何下载包。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-07T20:32:10.643

比赛迟到了，但据我所知，包裹并[没有发生太多事情；](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&es_th=1&ie=UTF-8#safe=active&q=package+cart+r+newman)`cart`我最近在 R 中绘制制图的努力将我推向了两种选择：`Rcartogram`在 R 中（可从[GitHub](https://github.com/omegahat/Rcartogram)存储库获得）和[ScapeToad](http://scapetoad.choros.ch/)，这是一个用 JS 编写的程序。

前者的优点是您不必离开 R（更适合长期项目管理），但是使用起来有点神秘（需要将 shapefile 转换为密度网格，然后弄清楚如何使用插值方法， ETC。）。

后者的优点是它有一个非常简单的点击式 GUI——添加 shapefile，创建制图向导，导出 shapefile，*瞧*。

两者都基于[Gastner-Newman 基于扩散的算法](http://www.pnas.org/content/101/20/7499.abstract)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:39:21.480

如果您检查[构建页面](http://r-forge.r-project.org/R/?group_id=901)，您将看到包无法构建的那一刻。我认为这可能是一件小事，但到目前为止我已经做了一些工作，但它仍然无法在我的机器上构建。

您可能想给作者发电子邮件并询问他们。您也可以尝试[他们的论坛](http://r-forge.r-project.org/forum/?group_id=901)，但它看起来最近没有看到太多活动。

# apache-pig - 您如何在数据非常倾斜的猪作业中提高性能？

> ID：12867846
> 
> 赞同：1
> 
> 时间：2012-10-12T22:15:49.713
> 
> 标签：apache-pig

我正在运行一个执行 GROUP BY 和嵌套 FOREACH 的猪脚本，由于一个或两个减少任务，该脚本需要数小时才能运行。例如：

```
B = GROUP A BY (fld1, fld2) parallel 50;

C = FOREACH B {
   U = A.fld1;
   DIST = DISTINCT U;
   GENERATE FLATTEN(group), COUNT_STAR(DIST);
} 
```

在检查慢任务的计数器后，我意识到这两个 reducer 处理的数据似乎比其他任务多得多。基本上，我的理解是数据非常倾斜，因此“慢”任务实际上比快速任务做更多的工作。我只是想知道如何提高性能？我讨厌增加并行性来尝试拆分工作，但这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:11:58.017

第一个选项是使用自定义分区器。[查看文档以`GROUP`获取更多信息（特别是查看`PARTITION BY`）。](http://pig.apache.org/docs/r0.10.0/basic.html#GROUP)不幸的是，您可能必须在此处编写自己的自定义分区程序。在您的自定义分区器中，将第一组巨大的键发送到减速器 0，将下一组键发送到减速器 1，然后对剩下的内容进行标准哈希分区。这样做是让一个减速器专门处理大的，而其他减速器获得多组键。不过，这并不总能解决偏斜严重的问题。

这两组庞大的数据的计数有多大价值？当诸如`NULL`或空字符串之类的东西时，我会看到很多巨大的偏差。如果它们不是那么有价值，请在`GROUP BY`.

# java - 将非库 Java 类类型作为属性传递到 JSP 标记文件中

> ID：12867848
> 
> 赞同：0
> 
> 时间：2012-10-12T22:16:03.737
> 
> 标签：java, jsp, jsp-tags

我正在尝试编写一个 JSP 2.0 标记文件，它将接受非库 Java 类型的对象作为属性。

例如：

包 org.myapp.model: Question.java

```
public Class Question {
    private String name;
    private String type;
    public getName() { return name; }
    public getType() { return type; }
    ...
} 
```

displayQuestion.tag

```
<%@ tag body-content="empty" %> 
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ attribute name="question" required="true" type="org.myapp.model.Question"%>
<h2>
    <div>Question ${question.name} is of type ${question.type}</div>
</h2> 
```

当我部署我的 web 应用程序时，我收到一个错误：“属性问题的未知属性类型 (org.myapp.model.Question)。” 如果我放弃类型，它默认为字符串，当然 question.name 和 question.type 会失败。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:33:06.223

您是否尝试将导入添加到标签？

```
 <%@ tag body-content="empty" import="org.myapp.model.Question" %> 
```

# c# - 如何使用 internal 关键字隐藏类？

> ID：12867860
> 
> 赞同：5
> 
> 时间：2012-10-12T22:16:57.883
> 
> 标签：c#, oop, class, abstract-class, internal

> **可能重复：**
> [c#内部抽象类，如何隐藏程序集外的用法](https://stackoverflow.com/questions/1244953/c-sharp-internal-abstract-class-how-to-hide-usage-outside-assembly)

我有一个公共程序集/项目，它有几个抽象类。当我创建一个新程序集时，开发人员应该从`MathProblem`和`MathProblemTemplate<T>`类派生。

所以，我猜这个类`MathProblemTemplate`可以是`internal`，我的意思是当你计划将一个基类设置为一个具体类时，不要以智能方式显示该类`MathProblemTemplate`，但是对于`MathProblemTemplate<T>`

```
// Question classes
public abstract class Question
{
    protected QuestionTemplate Template { get; private set; }

    public Question(QuestionTemplate template)
    {
        this.Template = template;
    }
}

public abstract class MathProblem : Question
{
    public MathProblem(MathProblemTemplate template)
        : base(template)
    {
    }
}

// QuestionTemplate classes
public abstract class QuestionTemplate
{
    public QuestionTemplate() { }
}

// This is the class which I'd like to hide
public abstract class MathProblemTemplate : QuestionTemplate
{
}

public abstract class MathProblemTemplate<T> : MathProblemTemplate
{
    protected abstract T Method1();
    protected abstract T Method2(); 
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:30:47.847

你不能，原因是它`MathProblemTemplate<T>`是公共的，因此它继承的任何类也需要是公共的。

您可以删除`MathProblemTemplate`并将其中的任何代码移动到`MathProblemTemplate<T>`

# javascript - jQuery 错误 - 未捕获的 TypeError：对象不是函数

> ID：12867863
> 
> 赞同：1
> 
> 时间：2012-10-12T22:17:15.203
> 
> 标签：javascript, jquery

我试过调试，但还没有运气！这有效：

```
function slider(direction){
this.direction = direction;
}

slider.prototype.move = function(){
console.log('moving');
};

var slider1 = new slider('backward');
console.log(slider1.direction);

var slider2 = new slider('forward');
console.log(slider2.direction); 
```

这不起作用：

```
var slider = new slider('backward');
console.log(slider.direction);

var slider2 = new slider('forward');
console.log(slider2.direction); 
```

我知道这与分号有关，我搜索了其他一些关于此的文章，但找不到我的问题的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:23:29.003

很难从您的代码中知道问题，但我认为这一行可能会导致它

```
var slider = new slider('backward'); 
```

您同时声明`slider`为函数和变量。那就是如果我的猜测是正确的。这是因为它是第一个代码和第二个代码之间的唯一区别

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:24:34.543

当你跑

```
var slider = new slider('backward');
console.log(slider.direction); 
```

您现在有 2 个变量被调用`slider`- 一个是函数，一个是函数生成的对象的实例。当您要求第二个滑块生成时：

```
var slider2 = new slider('forward');
console.log(slider2.direction); 
```

你实际上是在要求它使用对象的实例作为变量......这感觉真的很笨拙，因为它们具有相同的名称。

您在第二个示例中所做的导致它失败的操作与在第一个示例中尝试执行此操作相同：

```
var slider2 = new slider1('forward');
console.log(slider2.direction); 
```

因为函数名称与包含它的实例的变量相同。

如果这还没有被大量解释清楚（这不会让我感到惊讶）让我知道，我会尽量让它更有意义。

# c++ - libm.lib、libmmt.lib 和 libmmds.lib 有什么区别？

> ID：12867864
> 
> 赞同：1
> 
> 时间：2012-10-12T22:17:19.203
> 
> 标签：c++, windows, linker, libm

[英特尔将](http://software.intel.com/en-us/articles/libraries-provided-by-intelr-c-compiler-for-windows-and-intel-parallel-composer)libm.lib 描述为静态库，将 libmmt.lib 描述为多线程静态库 (/MT)，将 libmmds.lib 描述为多线程静态库 (/MD)，它们都实现了[LibM 数学库](http://software.intel.com/en-us/articles/implement-the-libm-math-library)。

但是您不是总是必须选择/MT 或/MD 吗？为什么 Windows 上有 3 个静态版本的库，而不仅仅是两个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:25:35.317

这适用于具有单线程应用程序运行时的旧 VC6！但现在你是对的，我们不再拥有它了！

# java - Windows Phone 7/.NET 中的数据绑定？

> ID：12867866
> 
> 赞同：3
> 
> 时间：2012-10-12T22:17:33.547
> 
> 标签：java, android, .net, data-binding

在 Android 中，我有一个 Section 的 ArrayList（有一个 Section 类，所以它不仅仅是一个字符串的 ArrayList）。我想将每个部分表示为一个按钮。目前，我通过遍历每个 Section、膨胀 section.xml，然后动态添加随每个特定 Section 变化的属性来实现这一点：

SectionsActivity.java：

```
public class SectionsActivity extends Activity {

    private int numSections;
    LayoutInflater inflater;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sections);

        numSections = App.Sections.getSectionList().size();
        inflater = getLayoutInflater();

        LinearLayout ll = (LinearLayout) findViewById(R.id.ll);
        for (int i = 0; i < numSections; i++) {
            ll.addView(getSectionButton(App.Sections.getSectionList().get(i)));
        }
    }

    public Button getSectionButton(Section s) {
        Button b = (Button) inflater.inflate(R.layout.section, null);
        b.setHint("section" + s.getSectionId());
        b.setText(s.getName());
        b.setTextColor(Color.parseColor("#"+s.getColor()));
        return b;
    }

} 
```

Sections.java：

```
public class Sections {

    private ArrayList<Section> SectionList;

    public ArrayList<Section> getSectionList() {
        return SectionList;
    }

    public void setSectionList(ArrayList<Section> sectionList) {
        SectionList = sectionList;
    }

} 
```

节.java：

```
public class Section {

    private String Color;
    private String Name;
    private int SectionId;

    //constructor, standard getters and setters

} 
```

节.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<Button
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textStyle="bold" /> 
```

这很好用，但我觉得可能有更好的解决方案。这是用于 Windows Phone 7 的 .NET 中的示例：您告诉 XAML 您想要绑定什么（SectionList，它是一个**ObservableCollection**），然后为它提供一个模板，说明集合中的每个项目应如何表示。

```
<StackPanel Name="StackPanelSection">
    <ListBox Name="ListBoxSection" ItemsSource="{Binding SectionList}" ScrollViewer.VerticalScrollBarVisibility="Disabled">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Name, Converter={StaticResource StringToLowercaseConverter}}" FontFamily="Segoe WP SemiLight" FontSize="48" Foreground="{Binding HTMLColor}" Tap="TextBlockSection_Tap" />
                </StackPanel>
            </DataTemplate>
         </ListBox.ItemTemplate>
    </ListBox>
</StackPanel> 
```

这样更好，既简单又方便，如果您更改 SectionList 的内容，UI 会自动更新。我已经阅读了足够多的关于 Android 中的数据绑定的内容，知道可能没有真正的等价物，但是完成相同任务的最佳方法是什么？有吗？即使数据绑定在这里不是一个好的解决方案，我应该以不同的方式构建我的 Android 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:31:29.703

您可以在 XAML 中获得该绑定，因为它已融入框架。您的应用程序在支持绑定查找的运行时环境中执行，因此您可以从 Microsoft 获得一个完整的绑定框架作为工具集的一部分。Android只是没有这种东西。

我不知道有一种方法可以像在 XAML 中那样以声明性方式进行绑定，但是在类似的船上（从 WPF/.Net/XAML 背景进入 Android），我找到了创造性的方法使它更方便。看起来你在这条路上进展顺利。我将自定义适配器用于我使用的任何列表或网格，它们提供了类似的便利……不像 xaml 绑定那样方便，但仍然很酷。

我没有看到你的 UI，所以我只能从你的代码中做出假设，但我只能假设你正在做的事情（LinearLayout 中的按钮）可以通过 ListView 和自定义适配器来完成。可能最经典的 Android 开发者视频是来自过去 Google I/O 的 ListView 世界。它已经有几年历史了，但仍然是一块很棒的手表，而且仍然很重要。

[https://www.youtube.com/watch?v=wDBM6wVEO70](https://www.youtube.com/watch?v=wDBM6wVEO70)

# python - 用 numpy 减少轴

> ID：12867867
> 
> 赞同：3
> 
> 时间：2012-10-12T22:17:35.080
> 
> 标签：python, numpy

我有一个`NxMx3`numpy 数组`dtype=object`。我还有一个函数`f(a,b,c)`，它获取该数组最后一个轴上的三个元素并返回一个`np.int32`. 我的问题是如何应用`f`到我的`NxMx3`数组以产生一个`NxM`数组`dtype=np.int32`？

我目前的解决方案是使用

```
newarr = np.fromfunction(lambda i,j: f(arr[i,j,0], arr[i,j,1], arr[i,j,2]),
                          arr.shape[:2], dtype=np.int) 
```

尽管这比我希望的要冗长一些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:23:29.067

你可以使用[`vectorize`](https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.vectorize.html)：

```
np.vectorize(f, otypes=[np.int32])(arr[:, :, 0], arr[:, :, 1], arr[:, :, 2]) 
```

这可以通过轴滚动和迭代来简化：

```
np.vectorize(f, otypes=[np.int32])(*np.rollaxis(arr, 2, 0)) 
```

或者，您可以使用以下命令显式拆分数组`dsplit`：

```
np.vectorize(f, otypes=[np.int32])(*np.dsplit(arr, 3))[..., 0] 
```

或者

```
np.vectorize(f, otypes=[np.int32])(*np.dsplit(arr, 3)).reshape(arr.shape[:-1]) 
```

或者

```
np.vectorize(f, otypes=[np.int32])(*np.dsplit(arr, 3)).squeeze() 
```

但是，`apply_along_axis`可能更简单：

```
np.apply_along_axis(lambda x: f(*x), 2, arr) 
```

# google-maps - 向 Google 提交路径以及与路线的兼容性

> ID：12867871
> 
> 赞同：0
> 
> 时间：2012-10-12T22:18:08.680
> 
> 标签：google-maps

我在科罗拉多州立大学工作，我们正在研究为学生创建建筑物之间的方向。

我发现我们可以向谷歌提交路径，以便他们正式将它们添加到谷歌地图中，​​我们已经提交给谷歌地图制作者来添加视觉路径和建筑物。

如果我们提交路径信息，这些路径可以用于方向吗？用户是否可以将从 A 楼到 B 楼的路线输入到 Google 地图 android 应用程序中，并且该应用程序将使用校园路径提供方向？如果没有，是否可以在不手动创建校园方向的情况下实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:46:21.583

是的，这些最终可能会被纳入谷歌的指导中。

# nservicebus - NServiceBus Sagas 使用 NHibernate - 无法连接到远程服务器

> ID：12867873
> 
> 赞同：0
> 
> 时间：2012-10-12T22:18:22.167
> 
> 标签：nservicebus

我正在尝试使用 NHibernate 持久性设置 NServiceBus Sagas，但我认为我的某些配置不正确，因为我在连接到 127.0.0.1:8080 的服务时遇到错误。我能够让我的 saga 处理命令消息，但几秒钟后，控制台窗口中出现下面的错误消息，然后再次触发相同的命令，导致 saga 中的处理程序再次被调用。只要我允许应用程序运行，这种情况就会反复发生。我可以告诉 NHibernate 正在连接到我的数据库，因为它为 saga 数据创建了一个表，但是该表中没有任何内容。

我认为持久化 saga 数据存在错误，我的猜测是它可能正在尝试使用默认的 RavenDb saga 持久性，但我不确定为什么会这样。

我收到的错误消息如下：

> WARN NServiceBus.Unicast.Transport.Transactional.TransactionalTransport [(null)] <(null)> - 未能为 ID=3753b476-7501-4fd8-90d0-b10aee95a578\22314 System.Net.WebException 的消息引发“收到传输消息”事件：无法连接到远程服务器 ---> System.Net.Sockets.SocketException: 无法建立连接，因为目标机器在 System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) 在 System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) 在 System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult,Exception&异常）---内部异常堆栈跟踪结束---在 NServiceBus.Unicast.UnicastBus.HandleTransportMessage(IBuilder childBuilder, TransportMessage msg) 在 NServiceBus.Unicast.UnicastBus.TransportMessageReceived(Object sender, TransportMessageReceivedEventArgs e) 在 System.EventHandler`1 .Invoke(Object sender, TEventArgs e) 在 NServiceBus.Unicast.Transport.Transactional.TransactionalTransport.OnTransportMessageReceived(TransportMessage msg)OnTransportMessageReceived(TransportMessage 消息)OnTransportMessageReceived(TransportMessage 消息)

我尝试使用的 saga 示例是（这里没什么特别的，无论我是否真的在 Handle 方法中做某事，都会发生同样的事情）：

```
public class ItemSaga : Saga<ItemData>, IAmStartedByMessages<CreateItemCommand>
{
    public void Handle(CreateItemCommand message)
    {

    }
}

public class ItemData : ISagaEntity
{
    public Guid Id { get; set; }
    public string Originator { get; set; }
    public string OriginalMessageId { get; set; }
} 
```

我的端点配置如下所示：

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Publisher, IWantCustomInitialization
{

    public void Init()
    {

        var container = new UnityContainer();
        container.AddNewExtension<Domain.UnityExtension>();

        Configure.With()
            .UnityBuilder(container)
            .JsonSerializer()
            .Log4Net()
            .MsmqSubscriptionStorage()
            .MsmqTransport()
                .PurgeOnStartup(true)
            .UnicastBus()
                .ImpersonateSender(false)
            .DisableTimeoutManager()
            .NHibernateSagaPersister()
            .CreateBus()
            .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install()); 
    }
} 
```

我的 app.config 看起来像这样：

```
<MessageForwardingInCaseOfFaultConfig ErrorQueue="error"/>
  <MsmqTransportConfig NumberOfWorkerThreads="1" MaxRetries="5"/>

  <NHibernateSagaPersisterConfig UpdateSchema="true">
    <NHibernateProperties>
      <add Key="connection.provider" Value="NHibernate.Connection.DriverConnectionProvider"/>
      <add Key="connection.driver_class" Value="NHibernate.Driver.Sql2008ClientDriver"/>
      <add Key="connection.connection_string" Value="Data Source=(localdb)\v11.0;Integrated Security=True;AttachDbFileName=|DataDirectory|\App_Data\EventStore.mdf"/>
      <add Key="dialect" Value="NHibernate.Dialect.MsSql2012Dialect"/>
    </NHibernateProperties>
  </NHibernateSagaPersisterConfig>

  <connectionStrings>
    <add name="EventStore" connectionString="Data Source=(localdb)\v11.0;Integrated Security=True;AttachDbFileName=|DataDirectory|\App_Data\EventStore.mdf"
      providerName="System.Data.SqlClient" />
  </connectionStrings>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
     <dependentAssembly>
        <assemblyIdentity name="NHibernate" publicKeyToken="aa95f207798dfdb4" />
        <bindingRedirect oldVersion="0.0.0.0-3.3.0.4000" newVersion="3.3.1.4000" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

只是几个注意事项：

这是来自我用来测试此功能的示例应用程序。它使用附加到 localdb 的本地数据库文件，但是我使用 SQL Server 2012 的完整应用程序表现出相同的行为。我还必须为 NHibernate 添加一个dependenteAssembly 条目，因为 NServiceBus.NHibernate NuGet 包当前绑定到较旧的程序集版本（截至本文发布）。

正如你所看到的，我也使用 Unity 作为我的 IOC，但我也用一个使用 Ninject 的项目复制了这一点。我将 EventStore 用于我的域存储，效果很好。我有命令处理程序来处理命令并通过 EventStore 发布事件以由其他进程处理。但是，我尝试禁用所有那些只留下我的 Saga 作为命令处理程序的人，但我仍然遇到同样的错误。

有没有人知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:55:54.183

我找到了解决问题的方法。使用内置 NServiceBus 配置文件似乎是一个问题。我没有在主机的命令行参数中指定配置文件，因此默认情况下它正在加载 NServiceBus.Production 配置文件。默认情况下，生产配置文件使用 RavenDB 进行所有持久性。

查看 GitHub 上的 NServiceBus 源代码，Production Profile Handler 在 ProfileActivated 方法中包含以下内容：

```
Configure.Instance.RavenPersistence();

if (!Configure.Instance.Configurer.HasComponent<ISagaPersister>())
    Configure.Instance.RavenSagaPersister();

if (!Configure.Instance.Configurer.HasComponent<IManageMessageFailures>())
    Configure.Instance.MessageForwardingInCaseOfFault();

if (Config is AsA_Publisher && !Configure.Instance.Configurer.HasComponent<ISubscriptionStorage>())
    Configure.Instance.RavenSubscriptionStorage(); 
```

这里有几点需要注意：

*   配置文件将始终在 Configure 实例上调用 RavenPersistence()。如果已经定义了其他持久性，我还没有深入研究该方法的内部工作原理，看看它是否真的会绕过配置 Raven，但它总是会运行这个方法。
*   当我附加到 NServiceBus 源并通过此代码进行调试时，在第二行中 HasComponent 返回 false 导致 RavenSagaPersister 配置运行。即使我在端点配置中定义了 NHibernateSagaPerister，也会发生这种情况。

我不确定这种行为是我的设计、错误还是配置错误。但是我的解决方法是创建自己的个人资料。我不得不将 NHibernate 配置调用从我的端点配置移动到我的新配置文件，但是一旦我这样做了，我就能够使用 NHibernate 持久性而不会出错。

我的自定义配置文件如下所示（我从生产配置文件的日志处理程序中借用了日志处理程序）：

```
public class MyProfile : IProfile
{

}

internal class MyProfileProfileHandler : IHandleProfile<MyProfile>, IWantTheEndpointConfig
{
    void IHandleProfile.ProfileActivated()
    {
        Configure.Instance.NHibernateUnitOfWork();
        Configure.Instance.NHibernateSagaPersister();
        Configure.Instance.DBSubcriptionStorage();
        Configure.Instance.UseNHibernateTimeoutPersister();
    }

    public IConfigureThisEndpoint Config { get; set; }
}

public class MyProfileLoggingHandler : IConfigureLoggingForProfile<MyProfile>
{
    void IConfigureLogging.Configure(IConfigureThisEndpoint specifier)
    {
        SetLoggingLibrary.Log4Net<RollingFileAppender>(null,
            a =>
            {
                a.CountDirection = 1;
                a.DatePattern = "yyyy-MM-dd";
                a.RollingStyle = RollingFileAppender.RollingMode.Composite;
                a.MaxFileSize = 1024 * 1024;
                a.MaxSizeRollBackups = 10;
                a.LockingModel = new FileAppender.MinimalLock();
                a.StaticLogFileName = true;
                a.File = "logfile";
                a.AppendToFile = true;
            });

        if (GetStdHandle(STD_OUTPUT_HANDLE) == IntPtr.Zero)
            return;

        SetLoggingLibrary.Log4Net<ColoredConsoleAppender>(null,
          a =>
          {
              LiteLoggingHandler.PrepareColors(a);
              a.Threshold = Level.Info;
          }
      );
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    static extern IntPtr GetStdHandle(int nStdHandle);
    const int STD_OUTPUT_HANDLE = -11;
} 
```

最后一点，根据标准 NHibernate 实践，我还必须将我的 saga 数据对象的所有属性设置为虚拟。一旦系统实际使用 NHibernate，这一点就变得非常明显。

```
public class ItemData : ISagaEntity
{
    public virtual Guid Id { get; set; }
    public virtual string Originator { get; set; }
    public virtual string OriginalMessageId { get; set; }
} 
```

这是一个很长的解释，但希望它能帮助其他人。如果有人对完成此操作的更好方法或使用配置文件的正确方法有建议，请告诉我！

# asp.net - HTML5 音频仅在我单步执行 javascript 时播放

> ID：12867875
> 
> 赞同：3
> 
> 时间：2012-10-12T22:18:44.907
> 
> 标签：asp.net, html, audio

我有一个带有标签的 asp.net 页面。如果我启用控件 (controls="controls") 我可以播放分配给标签的音频。我只想显示我自己的按钮来播放音频，所以我添加了一个带有 javascript 函数的简单 html 按钮来点击 .play 方法：

```
<button id="LeftAudio" class="Audio" onclick="playAudio1()"></button>

function playAudio1() {
    // Check for audio element support.
    if (window.HTMLAudioElement) {
        try {
            //debugger;
            var oAudio = document.getElementById('dnn_ctr<%=ModuleId.ToString(CultureInfo.InvariantCulture) %>_ViewUFL_Book_audio1');
            oAudio.volume = 1.0;
            // Tests the paused attribute and set state. 
            if (oAudio.paused) {
                oAudio.play();
                debugger;
            }
            else {
                oAudio.pause();
            }
        }
        catch (e) {
            // Fail silently but show in F12 developer tools console
            if (window.console && console.error("Error:" + e));
        }
    }
} 
```

当我单步执行 javascript (Chrome/Windows) 时，音频播放正常，但如果我不调试，则根本不会播放。我试着把调试器；在播放命令之前声明并单步执行代码，并将其放在播放命令之后 - 两者都有效。如果我让它正常运行，它就不起作用。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:51:44.250

我刚刚在 Fiddle 上做到了，它对我有用。

这是对 Fiddle 的测试：http: [//jsfiddle.net/jwCXV/4/](http://jsfiddle.net/jwCXV/4/)

# ios - 钥匙串上的分发证书中缺少私钥

> ID：12867878
> 
> 赞同：206
> 
> 时间：2012-10-12T22:18:50.117
> 
> 标签：ios, iphone, xcode, keychain, codesign

我有以下问题，我无法在任何地方找到解决方案。基本上，我们有一个公司开发人员帐户（不是企业），因此为了提交我们的应用程序，我要求我们的团队负责人向我发送分发证书，并创建并向我发送分发配置文件。

使用开发人员配置文件，一切正常，但是当我安装证书和配置文件时，我没有在 Xcode 上看到分发配置文件，而且我在钥匙串中的 dist 证书下也没有私钥。

有谁知道如何解决这个问题？我在不同的地方读到我需要吊销证书并创建一个新证书，但我真的不能这样做，因为我们公司有很多应用程序，我不能为每个人吊销它。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-10-12T22:25:21.123

![在此处输入图像描述](../Images/64d5cfb03f1f5b823cc15dd9d9396882.png)啊这是一个常见的问题，解决方案很简单：

曾经创建开发人员凭据的人最初需要转到他们计算机上的钥匙串，然后右键单击私有和公共密钥，然后将密钥导出到文件中。然后，您只需在计算机上下载该文件并打开它，它就会添加到您的钥匙串中。

您需要同时拥有配置文件的私钥（.pem 文件）和证书。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-10-12T22:28:51.970

只要您仍然可以访问用于生成原始分发证书的 mac，它就非常简单。

只需使用该 Mac 的钥匙串访问应用程序来导出证书和私钥。使用 shift 或 command 选择两者并右键单击以导出到 .p12 文件。

附上截图以使其非常清晰。

在您的 Mac 上，导入该 .p12 文件，一切顺利（只需确保您拥有有效的配置文件）。

![只选择出口](../Images/2d62f651e5f9aee3d7431dfa05afb9f7.png)

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2012-10-12T22:37:06.863

为了补充其他人的答案，如果您不再有权访问该私钥，那么恢复并运行相当简单：

> 1.  在供应门户中吊销您的活动证书
> 2.  创建新的开发人员证书（钥匙串访问/.../csr 的请求...等）
> 3.  下载并安装新证书
> 4.  为现有应用程序 ID 创建新的配置文件（在配置门户上）
> 5.  下载并安装新的配置文件，并在构建中设置适当的代码签名身份

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-10-04T07:29:34.300

从 KeyChain 中删除现有的文件，获取 .p12 文件并将其添加到创建证书的 mac。

要从源 Mac 获取 .p12，请转到 KeyChain，展开证书，选择两者并导出 2 个项目。这会将 .p12 文件保存在您的位置：

[![在此处输入图像描述](../Images/84388b41839b1eafb39f849e5ee0b791.png)](https://i.stack.imgur.com/jwjSE.png)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-08-29T07:33:46.407

对于害怕重新创建 AppStore 分发证书的人，Apple[文档](https://help.apple.com/xcode/mac/current/#/devd1432da9a)说：

> 重要提示：重新创建您的开发或分发证书不会影响您提交到 App Store 的应用程序，也不会影响您更新它们的能力。

但它会影响[Apple Developer Enterprise](https://developer.apple.com/programs/enterprise/)生态系统的应用程序。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-12-23T14:18:03.517

就我而言，我丢失了钥匙串中的所有私钥，新的私钥已正确导入，但也没有显示私钥。唯一有帮助的是生成新的 CertificateSigningRequest

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-08-09T13:51:09.863

我浪费了几个小时来解决这个问题，但它只是通过重新启动 MAC 来解决......

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-11-21T02:34:22.433

在您更改了不是创建分发证书的原始 Mac 后，您将丢失私钥。只需删除原始证书并重新创建一个新的，这对我有用~

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-09-27T14:23:47.733

当我尝试上传 iOS 版本来测试飞行时，出现了错误。

`"Missing privacy key"`.

[![在此处输入图像描述](../Images/c726638ecd5e34d21f4a6a21bdf58753.png)](https://i.stack.imgur.com/xrCpi.png)

只需 2 步即可修复此错误。

1.  从 developer.apple.com 中删除旧证书
2.  从 Xcode 或 developer.apple.com 创建新证书

我的问题已经解决**（我使用的是 Xcode 9.4.1）。**

**请检查，Xcode 创建了新证书。**

[![在此处输入图像描述](../Images/713b4e4e904bd9e8b024a13f31ffcfb1.png)](https://i.stack.imgur.com/oaWb2.png)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-10-31T08:31:53.950

在 Xcode 未能创建新的分发证书后，我遇到了这种情况（“缺少私钥。”） - 发生了未知错误。

然后，我努力获取私钥或生成新证书。从 Xcode 的证书管理器中，我收到了一些奇怪的错误，例如“您输入的密码错误”。但它甚至没有要求我输入任何密码。

对我有帮助的是：

1.  在 developer.apple.com 上撤销所有无效的分发证书
2.  **重新启动**我的 Mac

之后，Xcode 能够创建新的分发证书，并且没有丢失任何私钥。

经验教训：重启你的 Mac 和你的 Windows 一样多；）

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-01-18T15:25:56.663

在 Menu > Visual Studio (mac) > Preferences > Publishing > Apple Developer Accounts > [Select your apple id] > View Details > Create Certificate

要删除未使用/无效的证书，请访问网站：[https ://developer.apple.com/account/resources/certificates/list](https://developer.apple.com/account/resources/certificates/list)

在那里删除任何不需要的证书

接下来是创建 App ID（标识符），访问网站：
[https ://developer.apple.com/account/resources/identifiers/list](https://developer.apple.com/account/resources/identifiers/list)

接下来，去网站创建配置文件：
[https ://developer.apple.com/account/resources/profiles/add](https://developer.apple.com/account/resources/profiles/add)

使用证书与您的应用程序 ID 绑定。

接下来是下载配置文件：
在您的 mac > 在菜单 > Visual Studio (mac) > Preferences > Publishing > Apple Developer Accounts > [选择您的 Apple id] > 查看详细信息 > 下载所有配置文件

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-12-01T16:07:26.837

我是密钥的创建者，但密钥已附加到过期的证书上。

为了解决这个问题，我去了-> Xcode/Preferences/Accounts/"Account you used to archive"/Manage Certificates..

然后单击左下角带有“+”号的下拉菜单，然后选择您需要更新的证书类型（我的是 Apple Distribution）。

这更新了我的新证书，并附上了它的密钥。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-06-19T10:11:18.870

我在苹果的开发者网站上访问了该证书，下载后我打开了它。同样，在打开时，我有一个小窗口询问我是否要将证书添加到钥匙串。只需点击“添加”，“丢失私钥”错误就消失了。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-08-19T15:08:59.530

*   我假设您已切换设备并尝试为您的新设备创建新证书，
*   首先从开发者门户中恢复开发证书，
*   转到 xcode > 首选项 > 帐户 > 使用开发门户访问权限选择您的 Apple ID > 管理证书 > 单击团队帐户 > 单击小 + 按钮 > 单击 Apple 分发
*   去苹果开发者门户，你可以看到一个分发证书被创建了，
*   转到配置文件，使用新证书创建新配置文件。
*   下载>安装完成

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-05-10T07:48:08.133

检查您是否使用登录来添加证书，如果您在左上角的系统中签入，那么我们将无法看到它。

因此，将 .cer 拖放到登录中，然后检查您是否能够获取私钥。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-03T00:58:16.683

只是为了对此有所了解。

从钥匙串中删除我的 p12 证书后。我从 Apple 开发者门户重新下载了自己的证书。

我只能下载证书。但是要签名，您也需要私钥。所以你要么：

*   从 Keychain 导出私钥和证书以获取它。

*   上传证书签名请求并生成新证书

该证书本身对签名没有任何价值。我的猜测是，私钥是在您“向证书颁发机构请求证书”时由钥匙串创建的，但在您添加其绑定证书之前不会显示给您。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-03-30T10:43:50.187

与 iOS 分发密钥的创建者联系并告诉导出证书和私钥，然后只需下载并双击它即可访问您的钥匙串。

[![在此处输入图像描述](../Images/d8d5250d734a989e0f318ee4937681c3.png)](https://i.stack.imgur.com/cZjdJ.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-04-20T08:12:28.730

我的问题是，无论出于何种原因，钥匙串访问中都缺少登录钥匙串。Xcode 创建了一个新证书并将其添加到登录钥匙串中但无法使用它。重新启动计算机解决了我的问题。

[![在此处输入图像描述](../Images/535019eef913c9ba931df56e5ccfe885.png)](https://i.stack.imgur.com/O8M5M.png)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-02-02T21:07:16.197

如果您正在创建自己的分发证书，而不是使用其他人的证书，那么这可能会有所帮助。

今天在这方面花了很多时间，从无法创建 SigningRequest 到生成分发证书以及没有将其附加到我在 KeyChain Access 中的私钥的问题。这些步骤帮助我解决了这个问题。

如果您仍然遇到问题，请撤销您当前的证书并重新开始。

1.  创建新的签名请求

Keychain Access > Certificate Assistant > Request a Certificate from a Certificate Authority 实际上会根据上下文了解您在启动它时当前选择的内容。只是为了确保您不会因一些随机选择而意外扭曲您的请求，请转到您的登录项目并选择 Apple Worldwide Developer 项目。然后启动上述请求并创建 CertificateSigningRequest.certSigningRequest 文件。

[![在此处输入图像描述](../Images/3fdaf1e411b94dfb55dce6842b34840c.png)](https://i.stack.imgur.com/LEgUh.png)

2.  转到 Apple Dev 门户，添加新的分发证书，上传您的 CertificateSigningRequest.certSigningRequest 文件并下载新创建的分发证书。

3.  要将分发证书导入您的钥匙串，而不是双击它，我建议打开您的钥匙串，转到“登录/证书”区域并将证书拖放到此处。

我有一个问题，我的证书会自动安装到系统区域，而不是我的私钥所在的登录区域，这导致我的密钥没有链接到新证书。

* * *

## 回答 #20

> 赞同：-6
> 
> 时间：2021-02-05T15:30:32.373

我可以通过更新 macOS 和 XCode 来解决这个问题。

# vba - 如何强制 VBA 进行真正的整数数学运算？

> ID：12867880
> 
> 赞同：2
> 
> 时间：2012-10-12T22:19:01.503
> 
> 标签：vba

此代码应返回 0，但它返回 1。即使所有数字都是长整数，VBA 似乎也在进行浮点数学运算。

```
Function demo() As Long
    Dim const1 As Long
    Dim const2 As Long
    Dim result As Long
    const1 = 1796&
    const2 = 1798&
    result = const1 / const2
    demo = result
End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:34:47.400

改变斜线的方向

```
Function demo() As Long
    Dim const1 As Long
    Dim const2 As Long
    Dim result As Long
    const1 = 1796&
    const2 = 1798&
    result = const1 \ const2
    demo = result
End Function 
```

`\`将强制整数除法

# android - 将列表导航和选项卡与 ActionBarSherlock 一起使用？

> ID：12867881
> 
> 赞同：4
> 
> 时间：2012-10-12T22:19:04.140
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在查看 ActionBarSherlock 示例演示，我看到 List Navigation 和 Tab Navigation 都使用了 ActionBar 的 setNavigationMode 方法。这告诉我你只能拥有一个或另一个。如果我希望用户有列表导航以在活动之间移动，但我希望某些活动有标签，那么添加标签的方式是否与通过导航模式不同？两者都使用是否违反 ActionBar 设计指南？我不看标签并认为这是一种导航功能，所以我觉得你得到一个或另一个很奇怪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:34:53.560

> 这告诉我你只能拥有一个或另一个

正确的。请记住，使用操作栏选项卡，无论您喜欢与否，Android 都会在某些配置下自行将您转换为列表导航。

> 如果我希望用户有列表导航以在活动之间移动，但我希望某些活动有标签，那么添加标签的方式是否与通过导航模式不同？

您可以使用 ViewPagerIndicator 的`ViewPager`with`PagerTabStrip`或 tab 风格。

或者，您可以复古并使用`TabHost`and `TabWidget`.

> 两者都使用是否违反 ActionBar 设计指南？

[设计指南](http://developer.android.com/design/patterns/actionbar.html)将它们称为“视图控件”的单独选项。`Spinner`更重要的是，考虑到选项卡导航自动转换为列表导航，如果操作栏有两个s 的导航选择，将会非常混乱。

# c# - 将 2 个重复的 xml 节点合并为一个

> ID：12867884
> 
> 赞同：1
> 
> 时间：2012-10-12T22:19:14.610
> 
> 标签：c#, xml

我正在为荷兰的游泳运动员建立一个包含比赛、俱乐部、结果和更多信息的数据库。由于我收到的数据发生了一些变化，我遇到了我正在阅读的 XML 文件中重复值的问题。

这是导致问题的 XML 文件的一部分：

```
<LENEX version="3.0">
  <MEETS>
    <MEET name="Speedowedstrijd 2012 - 2013 deel 1">
      <CLUB name="AZVD" type="CLUB" nation="NED" region="08" code="08-004">
        <OFFICIALS>
          <OFFICIAL nation="NED" gender="M" officialid="2329" lastname="xx">
            <CONTACT email="xx" phone="xx" country="NL" />
          </OFFICIAL>
        </OFFICIALS>
      </CLUB>
      <CLUB name="A.Z.V.D." type="CLUB" nation="NED" region="8" code="08-004">
        <ATHLETES>
          <ATHLETE nation="NED" gender="M" athleteid="2358" license="xx" lastname="xx">
            <RESULTS>
              <RESULT eventid="1167" resultid="2359" swimtime="00:03:09.69">
                <SPLITS>
                  <SPLIT distance="50" swimtime="00:00:40.71"/>
                  <SPLIT distance="100" swimtime="00:01:30.71"/>
                </SPLITS>
              </RESULT>
            </RESULTS>
          </ATHLETE>
        </ATHLETES>
      </CLUB>
    </MEET>
  </MEETS>
</LENEX> 
```

现在读取 xml 文件不是问题，使用 XDocument 我得到所有节点、子节点等。但是，当我将值写入我的数据库时，我在 Club_Meet 表上得到一个 keyconstraint 错误。该表包含俱乐部表和会议表之间的链接，并且每个组合必须是唯一的。由于上面示例中的两个俱乐部都指向我的数据库中的同一个俱乐部（唯一代码 = 08-004，我试图将相同的值写入数据库两次，从而导致错误。

所以我想做的是当我浏览 xml 文件并找到一个俱乐部时：检查这个俱乐部之前是否已经在这个 XML 中找到，如果是，则将子节点挂在第一个俱乐部节点下。此操作的结果应该是（内部）：

```
<LENEX version="3.0">
  <MEETS>
    <MEET name="Speedowedstrijd 2012 - 2013 deel 1">
      <CLUB name="AZVD" type="CLUB" nation="NED" region="08" code="08-004">
        <OFFICIALS>
          <OFFICIAL nation="NED" gender="M" officialid="2329" lastname="xx">
            <CONTACT email="xx" phone="xx" country="NL" />
          </OFFICIAL>
        </OFFICIALS>
        <ATHLETES>
          <ATHLETE nation="NED" gender="M" athleteid="2358" license="xx" lastname="xx">
            <RESULTS>
              <RESULT eventid="1167" resultid="2359" swimtime="00:03:09.69">
                <SPLITS>
                  <SPLIT distance="50" swimtime="00:00:40.71"/>
                  <SPLIT distance="100" swimtime="00:01:30.71"/>
                </SPLITS>
              </RESULT>
            </RESULTS>
          </ATHLETE>
        </ATHLETES>
      </CLUB>
    </MEET>
  </MEETS>
</LENEX> 
```

请注意，第二个俱乐部节点`<CLUB name="A.Z.V.D." type="CLUB" nation="NED" region="8" code="08-004">`已完全删除，我不需要该节点的任何内容。如何将子节点从一个俱乐部移动到另一个俱乐部并删除空俱乐部？谁能指出我正确的方向？

（希望这一切都有意义....）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:21:24.240

好的，所以如果您想严格操作 XML 文档，您可以使用我创建的以下扩展方法。

```
public static class XmlExtensions
{
   public static IEnumerable<XElement> CombineLikeElements(this IEnumerable<XElement> source, Func<XElement, object> groupSelector)
   {
      // used to record the newly combined elements
      List<XElement> priElements = new List<XElement>();

      // group the current xml nodes by the supplied groupSelector, and only
      // select the groups that have more than 1 elements.
      var groups = source.GroupBy(groupSelector).Where(grp => grp.Count() > 1);

      foreach(var grp in groups)
      {
         // get the first (primary) child element and use it as 
         // element that all the other sibling elements get combined with.
         var priElement = grp.First();

         // get all the sibling elements which will be combined
         // with the primary element.  Skipping the primary element.
         var sibElements = grp.Skip(1);

         // add all the sibling element's child nodes to the primary
         // element.
         priElement.Add(sibElements.Select(node => node.Elements()));

         // remove all of the sibling elements
         sibElements.Remove();

         // add the primary element to the return list
         priElements.Add(priElement);
      }

      // return the primary elements incase we want to do some further
      // combining of their descendents
      return priElements;
   }
} 
```

您将按如下方式使用扩展方法：

```
XDocument xmlDoc = XDocument.Parse(xml);
xmlDoc
   // Combine all of the duplicate CLUB nodes under each MEET node
   .Descendants("MEET").Descendants("CLUB").CombineLikeElements(node => node.Attribute("code").Value); 
```

它会返回您请求的结果。

我有扩展方法返回一个 XElements 列表，如果你想组合它们的子节点，所有东西都被组合成。例如，如果在组合相同的 CLUB 元素后，一个或多个 CLUB 最终具有两个或多个 ATHLETES 或 OFFICIALS 节点，您也可以通过执行以下操作轻松组合它们：

```
xmlDoc
   // Combine all of the duplicate CLUB nodes under each MEET node
   .Descendants("MEET").Descendants("CLUB").CombineLikeElements(node => node.Attribute("code").Value)
   // Combine all of the duplicate ALTHLETES or OFFICIALS nodes under the newly combined CLUB nodes
   .Elements().CombineLikeElements(node => node.Name); 
```

# c# - 发现循环依赖在哪里

> ID：12867888
> 
> 赞同：2
> 
> 时间：2012-10-12T22:19:46.230
> 
> 标签：c#, winforms, windows-forms-designer

我有一个项目，我试图在其中进行一些重构，并将一些 Windows 窗体控件拆分到我的解决方案中自己的项目中。我现在在尝试设置所需的引用时遇到循环依赖错误。

我的问题是。VS（或其他工具）中是否有任何有助于发现问题所在的内容？我以为我已经重构了这个问题，但显然不是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:06:19.770

除非我误读了这一点，否则 VS**只是**通过告诉您无法添加引用来告诉您循环依赖的位置。您尝试添加引用的项目将已经在您来自的项目中被引用（我认为我的措辞是正确的......如果不是，这里是示例）

IE。

*   ProjectA 持有对 ProjectB 的引用
*   ProjectB 不能保存对 ProjectA 的引用，因此会出现循环依赖错误

至于试图找到您在 ProjectA 中使用 ProjectB 的确切位置，以便您可以切换参考。我只是删除引用并编译......所有引用现在都会抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:26:29.287

如果您有 VS >= Premium 版，Visual Studio Profiler 工具可以很好地完成此任务。

# c++ - 如何从 GLUT 坐标转换为窗口坐标

> ID：12867889
> 
> 赞同：1
> 
> 时间：2012-10-12T22:19:48.913
> 
> 标签：c++, opengl, glut

> **可能的重复：**
> [Glut 鼠标坐标](https://stackoverflow.com/questions/8371682/glut-mouse-coordinates)

假设我有一个 600x600 的窗口。
当我收到鼠标事件时，我不知道鼠标的实际位置是什么，在 OpenGL 中我使用它来绘制点：

```
(-0.5,0.5) | (0.5,0.5)
           |
 --------(0,0)-------
           |
           |
(-0.5,-0.5) | (0.5,-0.5) 
```

但是当我根据窗口的大小接收到 GLUT 鼠标事件时，我得到不同的坐标。我想要一个相对（相对于窗口）坐标系统。我怎么得到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:36:54.833

我很确定 glut 会给你窗口空间中的鼠标坐标（即如果窗口是 800x600 并且鼠标位置在中间，它会给你 x：400，y：300），所以如果你想把它带到您在上面发布的opengl空间，您将执行以下操作：

```
float x = (400 / 800) - 0.5f; //0.0
float y = (300 / 600) - 0.5f; //0.0 
```

所以通用版本看起来像这样：

```
float mouseX = (theGlutMouseXCoordinate / theGlutWindowWidth) - 0.5f;
float mouseY = (theGlutMouseYCoordinate / theGlutWindowHeight) - 0.5f; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:36:29.630

也许我误读了你的问题，或者过度简化了答案，但你不只是在寻找类似的东西：

```
float x = mouse.x / screen.width;  //x now in [0,1]
float y = mouse.y / screen.height; //y now in [0,1]
x-=0.5f;
y-=0.5f; 
```

或反过来：

```
float wx = (x + 0.5f) * screen.width;
float wy = (Y + 0.5f) * screen.height; 
```

# django - 鼻子没有找到 Django 测试

> ID：12867892
> 
> 赞同：14
> 
> 时间：2012-10-12T22:20:04.443
> 
> 标签：django, nose, django-nose

我正在尝试在我当前的项目中使用 Django-nose，但我不知道如何让鼻子运行我的测试。于是我开始了一个简单的Django 1.4.1项目来了解nose。但即使在这个简单的测试项目上，我也无法让它运行。

在我继续之前：我知道 Stackoverflow 上有很多类似的问题，例如这个：

[我如何告诉 Django-nose 我的测试在哪里？](https://stackoverflow.com/questions/6065151/how-do-i-tell-django-nose-where-my-tests-are)

但是在谷歌搜索、阅读博客文章和 StackOverflow 答案之后，我仍然无法让它运行。

## 我如何设置我的测试项目

1.  创建虚拟环境。
2.  `pip install django django-nose nose`.
3.  使用 . 创建项目`django-admin.py startproject djangonosetest`。
4.  创建应用`manage.py startapp testapp`
5.  编辑settings.py：

    *   设置`ENGINE`为`django.db.backends.sqlite3`
    *   添加`django_nose`,`testapp`到`INSTALLED_APPS`
    *   添加`TEST_RUNNER = 'django_nose.NoseTestSuiteRunner'`.
6.  跑`manage.py test`

但我得到的只是这个输出：

```
nosetests --verbosity 1
Creating test database for alias 'default'...

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK
Destroying test database for alias 'default'... 
```

但至少应该运行默认测试用例。

**当我运行`python manage.py test djangonosetest.testapp.tests:SimpleTest`时，它将运行测试。但是，如果我必须为我拥有的每个测试文件都这样做，那似乎有点矫枉过正。但它证明测试可以运行。**

当我运行`manage.py test -v 3`（高详细级别）时，这出现了：

```
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/settings.py is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/settings.pyc is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/urls.py is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/wsgi.py is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/models.py is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/models.pyc is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/views.py is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/tests.py is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/tests.pyc is executable; skipped
nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/manage.py is executable; skipped 
```

鼻子确实找到了我的 tests.py，但由于某种原因正在跳过它。

## 文件夹结构

```
djangonosetest/
    djangonosetest/
        __init__.py
        settings.py
        testapp/
            __init__.py
            models.py
            tests.py
            views.py
        urls.py
        wsgi.py
    manage.py 
```

## 设置.py

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected too.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique and don't share it with anybody.
SECRET_KEY = 'ikh^t)49eincyww4@nq(o)go_129zdr87*im00m^+h@_n!w4ec'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'djangonosetest.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'djangonosetest.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'django_nose',
    'djangonosetest.testapp',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
}

TEST_RUNNER = 'django_nose.NoseTestSuiteRunner' 
```

## 测试代码

测试代码是 Django 创建的默认 TestCase。

```
"""
This file demonstrates writing tests using the unit test module. These will pass
when you run "manage.py test".

Replace this with more appropriate tests for your application.
"""

from Django.test import TestCase

class SimpleTest(TestCase):
    def test_basic_addition(self):
        """
        Tests that 1 + 1 always equals 2.
        """
        self.assertEqual(1 + 1, 2) 
```

**那么我如何告诉 Django-nose/nose 我的测试在哪里呢？**

## 更新

如果发现有关该主题的有趣的 Google Groups 帖子和 Stackoverflow 答案：

*   [Google 网上论坛帖子](https://groups.google.com/forum/?fromgroups=#!topic/nose-users/D03-20ChmBo)
*   [堆栈溢出答案](https://stackoverflow.com/a/1579787/190823)

两者都归结为鼻子会跳过可执行文件的事实。这就是为什么我得到`tests.py is executable; skipped`. 问题是该文件不可执行：

```
----------+ 1 Jens  staff  383 13 Okt 00:01 tests.py 
```

我也用 ux、gx 和 ox 尝试过，但无论如何都跳过了鼻子。我觉得这是一个错误。该文件在鼻子中找到，不可执行但仍被跳过。

一种解决方法是使用 --exe 开关。运行`manage.py test --exe`运行测试。虽然它比其他解决方法更好，但我对该解决方案并不完全满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T09:43:12.673

我今天遇到了同样的问题，我修复了它。

尝试：

```
chmod a-x djangonosetest/djangonosetest/testapp/*.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:07:38.223

我认为可能是在 Django 1.4 中，如果您不指定项目根目录，则需要在已安装的应用程序中指定项目。而不是只是`'testapp'`，尝试`'djangonosetest.testapp'`

[https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-INSTALLED_APPS](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-INSTALLED_APPS)查看他们的示例。

# c - 在 Mac OSX（和 Mint 和 CentOS）上构建 libmemcached 的问题

> ID：12867895
> 
> 赞同：0
> 
> 时间：2012-10-12T22:20:20.350
> 
> 标签：c, build, memcached, client, libmemcached

[从https://launchpad.net/libmemcached/+download/libmemcached-1.0.12.tar.gz](https://launchpad.net/libmemcached/+download/libmemcached-1.0.12.tar.gz)下载了压缩包（链接自 libmemcached.org）。运行通常的**./configure + make**协议，得到了一些与将 64 位值隐式转换为 32 位相关的错误，最终无法找到 event.h。

早些时候，尝试在 Mint ( *./libtool: line 1125: g++: command not found* ) 和 CentOS ( *./libmemcached-1.0/memcached.h:46:27: error: tr1/cinttypes: No such file or directory* )上安装

在调试时我不是很聪明，但我非常习惯 ./configure + make “只是工作”。有人能帮忙吗？

谢谢，章

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T14:12:39.307

我还遇到了。而且，我发现了它：

[https://github.com/mxcl/homebrew/issues/20635](https://github.com/mxcl/homebrew/issues/20635)

在页面中，发现的错误是一个 libmemcahed 错误，已报告为 [https://bugs.launchpad.net/libmemcached/+bug/1216521](https://bugs.launchpad.net/libmemcached/+bug/1216521)

# objective-c - 加载视图之前应用程序崩溃 iOS > 6

> ID：12867896
> 
> 赞同：2
> 
> 时间：2012-10-12T22:20:22.893
> 
> 标签：objective-c, exception, ios5, crash

我的 iOS 应用程序在 iOS 5 和 iOS 6 上运行，但专注于 6 的功能。我最近尝试在 iOS 5.1 模拟器（基础 SDK 为 5.0）中测试我的应用程序，它似乎工作正常，直到我点击一个按钮显示具有不同类的新视图控制器。此时它崩溃了，我在输出日志中只剩下这个：

```
objc[3063]: EXCEPTIONS: throwing 0x9e85510 (object 0x9e84780, a NSException)
objc[3063]: EXCEPTIONS: searching through frame [ip=0x6d6a19 sp=0xbfffe020] for exception 0x9e854f0
objc[3063]: EXCEPTIONS: searching through frame [ip=0x223dd83 sp=0xbffff200] for exception 0x9e854f0
objc[3063]: EXCEPTIONS: unwinding through frame [ip=0x6d6a19 sp=0xbfffe020] for exception 0x9e854f0
objc[3063]: EXCEPTIONS: unwinding through frame [ip=0x223dd83 sp=0xbffff200] for exception 0x9e854f0
objc[3063]: EXCEPTIONS: handling exception 0x9e854f0 at 0x223de16
objc[3063]: EXCEPTIONS: rethrowing current exception
objc[3063]: EXCEPTIONS: searching through frame [ip=0x223dddf sp=0xbffff200] for exception 0x9e854f0
objc[3063]: EXCEPTIONS: terminating
objc[3063]: EXCEPTIONS: searching through frame [ip=0x158eeed sp=0xbffff190] for exception 0x9e854f0
objc[3063]: EXCEPTIONS: catch(id)
objc[3063]: EXCEPTIONS: unwinding through frame [ip=0x158eeed sp=0xbffff190] for exception 0x9e854f0
objc[3063]: EXCEPTIONS: handling exception 0x9e854f0 at 0x158eeff 
```

就是这样。我还在正在加载的类的标头和实现中设置了断点，并且没有一个断点被命中，这意味着应用程序在加载视图之前崩溃了。

我从来没有见过这样的事情，但是我做了一些研究，谷歌发现了一些与 NSArrays 和 NSPredicate 相关的东西（我的班级确实有），但我排除了这些解决方案，因为视图从未加载 - 那么如何尚未分配/创建的 NSArray 会导致我的应用程序崩溃吗？

**任何提示，答案，帮助将不胜感激！**

**编辑**：
我的项目使用：

*   故事板
*   Xcode 4.5
*   弧
*   基础 SDK 为 iOS 5.0

没有额外的错误日志、调试消息等。以上是我得到的全部。我还尝试`@try / @catch`在某些我认为可能有问题的语句周围使用条件，但它们要么从未被调用，要么没有引发异常。

我的`(id)init`方法也从未被调用。

我开始认为这又是那些奇怪的 Xcode 4 编译器问题之一......

**编辑**：我还确保禁用自动布局（尽管我不确定这是否是禁用它的正确位置，这是在导航器>文件检查器中）：

![在此处输入图像描述](../Images/7b5219c129406906770b457ddbe182ec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T00:53:33.767

[*我真的还是不明白这个错误，但是使用名为Crittercism*](https://www.crittercism.com)的第三方崩溃报告 SDK我发现了这个错误：

我试图初始化仅在 iOS 6 或更高版本中可用的 UICollectionView。奇怪的是，Xcode 似乎*随机*决定告诉我这件事，因为在早期的构建中我使用了 UICollectionView 并在 5.1 模拟器中成功运行了项目（当然我用代码代替了 TableView）。对我来说，编译器甚至没有达到`init`or`viewDidLoad`方法似乎很奇怪。

**这个问题只在我从 Xcode 4.5 (Release, not Developer) 更新到 4.5.1 后出现**

# sql-server - 创建一个读取值并输出单词的函数

> ID：12867902
> 
> 赞同：3
> 
> 时间：2012-10-12T22:20:41.643
> 
> 标签：sql-server

我有一个需要创建的函数，它读取表中列的值并将文本值输出到同一表中的新列中。有问题的列 (confidence_score) 将具有数值、字母或空值。

如果 confidence_score(nvarchar(2)) 是一个数字并且小于或等于 14，我需要计算列中包含“高”，否则为“低”。如果 confidence_score 不是数字并且值为“H”，我需要计算列中包含“High”，否则为“Low”。

这是我正在使用的代码：

```
CREATE FUNCTION dbo.avm_confidence_level(@score nvarchar)
RETURNS nvarchar(5) as
BEGIN
DECLARE @conversion as nvarchar(5)
    IF isnumeric(@score) = 1 BEGIN
        IF cast(@score as int) <= 14 BEGIN
            Set @conversion = 'High'
        END
        ELSE BEGIN
            Set @conversion = 'Low'
        END
    END
    ELSE BEGIN
        IF @score = 'H' BEGIN
            Set @conversion = 'High'
        END
        ELSE BEGIN
            Set @conversion = 'Low'
        END
    END

    RETURN @conversion
END 
```

我使用这段代码得到了一半正确的结果。第一次检查（isnumeric）似乎工作正常。当值不是数字时，我得到了我期望的高值和低值。这个问题似乎在数字为真部分。无论 confidence_score 列中的实际数值是多少，我都会得到一个“高”值。我不确定我在这里做错了什么。

我感谢任何人可以提供的任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:51:13.480

这是因为您将函数参数定义为 nvarchar 而不是 nvarchar(2)。它会截断一个字符上的任何内容，因此所有大于 9 的整数都变为 1。尝试将定义更改为：

```
CREATE FUNCTION dbo.avm_confidence_level(@score nvarchar(2)) 
```

# graph - 在立体主义中反转水平图

> ID：12867907
> 
> 赞同：0
> 
> 时间：2012-10-12T22:21:23.930
> 
> 标签：graph, cubism.js

我正在尝试获取我在 cubism.js 演示文稿中看到的那些很酷的网络图，其中 RX 在顶部倒置，而 tx 在下面是正常的。事实是，我似乎让图表颠倒的唯一方法是这样做`metric.multiply(-1)`，但值是负数，所以它并不完全理想。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:51:06.380

如果没有*很好的*方法来做到这一点，您可以将水平图表格式化程序替换为仅发出绝对值的格式化程序。你也可以用比较图表做类似的事情。

像这样的工作：

```
var horizon = cubism.context().horizon();
var existingFormatter = horizon.format(); // Obtain the format function
var absoluteFormatter = function(value) {
    return existingFormatter(Math.abs(value));
};
horizon.format(absoluteFormatter); 
```

这将具有仍将图表呈现为“负数”的效果，但允许您根据需要呈现您的值。

显然，您可以根据自己的需要采用。

# css - 我的内容区域背景图像显示在 IE 中的 div 之外

> ID：12867910
> 
> 赞同：2
> 
> 时间：2012-10-12T22:22:06.033
> 
> 标签：css, internet-explorer, cross-browser

有问题的样式表 div 是：

```
#leftColumn {
    float: left; 
    width: 650px; 
    position: relative; 
    text-align:left;
    padding: 0;
    background-image: url(../images/contentBg.jpg);
    background-repeat: repeat-y;
    overflow: hidden;
} 
```

该网站尚未上线，但您可以在[http://www.downtowndefencelawyers.ca/index.php](http://www.downtowndefencelawyers.ca/index.php)的页面上查看正在发生的事情。它在 Chrome 和 Firefox 中运行良好，但我尝试过的任何方法都没有在 IE 中运行。对不起，如果这是一个基本修复，但我似乎需要帮助...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:48:20.340

Have you tried changing the bottom image display property? display: block, display: inline-block, or display: inline? I'm not sure which one is the default for an image.

# google-apps-script - 使用 Google Apps 脚本构建的 Web 应用程序的 URL 映射？

> ID：12867913
> 
> 赞同：5
> 
> 时间：2012-10-12T22:22:48.680
> 
> 标签：google-apps-script

使用 Google Apps 脚本构建的 Web 应用具有如下所示的 Url 链接：

[https://script.google.com/a/macros/mydomain.com/s/AKfy...iXUrQfobe6/exec](https://script.google.com/a/macros/mydomain.com/s/AKfy...iXUrQfobe6/exec)

知道如何将这样的 URL 映射到一个友好的 URL，例如：

app.myapp.mydomain.com

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:07:36.770

使用 Google Apps 脚本构建的 Web 应用程序无法通过自定义域提供服务。您可以从自己的域创建重定向，但地址栏中的 URL 必须是 script.google.com。

# .htaccess - 某些非 html 文件的 301 重定向

> ID：12867922
> 
> 赞同：0
> 
> 时间：2012-10-12T22:24:02.517
> 
> 标签：.htaccess, redirect, drupal-7

我想对某些不以 html 结尾的文件进行重定向，但不是我网站上的所有文件。这是我所拥有的：

这是在 Drupal 中。例如，对于 www.mysite.com/test，我想重定向到 www.mysite.com/test.html

这就是我所拥有的。我不确定这是否是 Drupal 问题。

```
RewriteRule ^test!\.html$ http://www.mysite.com/test.html [R=301,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:33:00.780

卸下`!\.html`零件

```
RewriteRule ^test$ http://www.mysite.com/test.html [R=301,L] 
```

# c# - 使用 2 个 EntityKeys 时的实体框架插入错误

> ID：12867924
> 
> 赞同：2
> 
> 时间：2012-10-12T22:24:06.367
> 
> 标签：c#, sql-server, entity-framework, entitykey

以下是我遇到的错误示例。代码名称等已更改以使其更具可读性，并且已“简化”以仅显示我遇到问题的部分。

**表结构：** ![我正在使用的基本表格布局](../Images/833382e83df97fae5465935bcdeb639d.png)

**概括**

我正在尝试使用 Entity Framework 3.5 添加一个新的 CHILD 项目和一个 ADDRESS，当我在此过程中使用 2 个 entitykey 引用时出现重复输入错误。

**代码努力**

首先，我在创建实体时尝试使用父引用：

```
 public bool AddChild(Guid parentId, string firstName, string lastName, string address, string city, int provinceCode)
    {
        bool success = false;

        using (Entities e = new Entities("connection string")
        {
            // prep address record
            ADDRESS a = new ADDRESS
            {
                City = city,
                Address = address,
                PROVINCEReference = new System.Data.Objects.DataClasses.EntityReference<PROVINCE> { EntityKey = new System.Data.EntityKey("Entities.PROVINCEs", "ID", provinceCode) },
            };

            // prep owner record
            CHILD c = new CHILD
            {
                PARENTReference = new System.Data.Objects.DataClasses.EntityReference<PARENT> { EntityKey = new EntityKey("Entities.PARENTs", "ID", new Guid(parentId)) },
                ADDRESS = a,
                FirstName = firstName,
                LastName = lastName,
            };

            using (System.Transactions.TransactionScope transaction = new System.Transactions.TransactionScope())
            {
                try
                {
                    e.AddToCHILDs(c);
                    e.AddToADDRESSes(a);

                    // Save changes pessimistically. This means that changes must be accepted manually once the transaction succeeds.
                    e.SaveChanges(false);
                }
                catch { }
            }
        }
    return success;
} 
```

如果我尝试引用两个外键，这将不起作用；但是，如果我只是尝试引用其中一个，它就可以正常工作。第一个将始终有效。第二个将给出错误。它们的顺序无关紧要。如果我自己使用它们或像这样以其他方法使用它们，它们就可以正常工作。

我还尝试获取实际项目，而不仅仅是参考，例如：

```
PARENT o = e.PARENTs.First(x => x.ID.Equals(id));
PROVINCE p = e.PROVINCEs.First(x => x.ID.Equals(1));

a.PROVINCE = p;
c.ADDRESS = a
c.PARENT = o; 
```

而且，在发现类似错误后，我尝试使用 .Attach() 方法：

```
e.Attach(p);
e.Attach(o); 
```

当我以第一种方式（我的首选方式）执行此操作时，首先添加的任何项目都可以正常工作。当我尝试第二个时，出现错误（已添加具有相同密钥的项目）。如果我尝试通过提取实际记录而不是仅使用参考来做到这一点，我会直接从 SQL Server 2005 数据库中获得相同类型的错误。

在阅读了这一点之后，它与 Context 以及代码可能引用了父记录的 2 个不同版本的事实有关，这是有道理的；但是，我找不到解决它的好方法。

最后我要做的就是插入一个带有新地址的子记录。子记录必须引用父记录，地址记录必须引用省记录。最好，我想通过引用来减少 sql 事务。

谢谢！

**编辑**

试图创建我自己的 2 个单独的 entityKey 对象和 2 个单独的 EntityReference<> 对象，现在当我尝试使用第二个 EntityReference<> 对象分配关系/引用时出现以下错误：

> 无法初始化 EntityReference，因为实体引用所属对象的关系管理器已附加到 ObjectContext。

**编辑**

使用不需要来自 Alex 的回答中的任何关系/参考信息的解决方法：[Entity Framework EntityKey / Foreign Key problem](https://stackoverflow.com/questions/1011519/entity-framework-entitykey-foreign-key-problem)

我仍然不希望使用它，因为它迫使您必须检查上下文中已有的信息，然后它会创建“假”记录以通过它作为解决方法。如果有人有更多信息，我很想听听！

# localhost - Aptana ，与朋友 localhost 合作

> ID：12867925
> 
> 赞同：0
> 
> 时间：2012-10-12T22:24:08.347
> 
> 标签：localhost, aptana

使用 Aptana Studio，是否可以在 localhost 上与朋友一起工作？我想将我的朋友添加到我的项目中，每个人都应该能够编辑和提交更改。如果可能的话，还要进行修订控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T08:35:54.840

我知道这是一篇旧帖子，但一切都值得回答，对吧？

本地主机是您的计算机，如果您的朋友应该在他们的计算机上访问本地主机，他们只会看到他们自己的计算机，而不是您的计算机。

您可以设置您的本地主机以接受来自计算机外部的连接，但他们必须不是以本地主机的身份访问它，而是以 ip 或 DNS 的身份访问它。

如果你想要版本控制和所有这些东西，你可以使用 Git，然后每个人都可以推送和拉取，并且仍然在他们自己的本地主机上拥有本地复制，但使用 git 来维护跨不同计算机和本地主机的代码。如果您想在项目中添加朋友，Github 是一个不错的起点。

# excel - Excel VBA将csv字符串处理成数组

> ID：12867926
> 
> 赞同：3
> 
> 时间：2012-10-12T22:24:10.877
> 
> 标签：excel, vba, csv, split

我有通过 http 下载获得的 csv 字符串（utf-8）。

根据情况，字符串中的数据可能包含不同数量的列，但每次处理字符串时，它将包含相同数量的列并且是连续的。（数据将是偶数）。

该字符串可以包含任意数量的行。

第一行将始终是标题。

**字符串字段将用双引号括起来，并且可以包含逗号、引号和换行符**。

字符串中的引号和双引号通过加倍 "" 和 '' 进行转义

换句话说，这是一种格式良好的 csv 格式。Excel 通过其标准文件打开机制对这些数据进行格式化没有问题。

但是我想避免保存到文件然后打开 csv，因为在某些情况下我需要处理输出，甚至与工作表上的现有数据合并。

（**通过编辑添加了以下信息**） *Excel 应用程序将分发到各个目的地，如果可能的话，我想避免潜在的权限问题，似乎什么都不写到磁盘是一个好方法*

我在想类似下面的伪：

```
rows = split(csvString, vbCrLf)  'wont work due to newlines inside string fields?

FOREACH rows as row
    fields = split(row, ',')     'wont work due to commas in string fields?
ENDFOR 
```

显然，这不能处理包含特殊标记的字段。

解析这些数据的可靠方法是什么？

谢谢

## 编辑 13/10/2012 数据样本

csv ，因为它会出现在记事本中（请注意，并非所有换行符都是 \r\n 有些可能是 \n）

```
LanguageID,AssetID,String,TypeID,Gender
3,50820,"A string of natural language",3,0
3,50819,"Complex text, with comma, "", '' and new line
all being valid",3,0
3,50818,"Some more language",3,0 
```

Excel 2010 中的相同 csv - 从外壳打开（双击 - 没有额外选项） ![在此处输入图像描述](../Images/95b0913487ac514a3462d00625759997.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T00:24:46.090

如果您不介意将数据放入工作簿：您可以使用空白工作表，将数据添加到 1 列中，然后调用[TextToColumns](http://msdn.microsoft.com/en-us/library/office/ff193593.aspx)。然后，如果您想将数据作为数组取回，只需从工作表的 UsedRange 加载它。

```
'Dim myArray 'Uncomment line if storing data to array.
'Assumes cvsString is already defined
'Used Temp as sheet for processing
With Sheets("Temp")
    .Cells.Delete
    .Cells(1, 1) = cvsString
    .Cells(1, 1).TextToColumns Destination:=Cells(1, 1), DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=False, Comma:=True, Space:=False, Other:=False
    'myArray = .UsedRange 'Uncomment line if storing data to array
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:41:24.520

我能想到三种可能：

1.  使用正则表达式处理文本。在 SO 和谷歌上有很多例子可以用来分隔这样的字符串。
2.  使用 Excel 的强大功能：将文本保存到临时文件中，打开临时表并从表中读取数据。完成后删除文件和工作表。
3.  使用 ADO 查询数据。将字符串保存到临时文件并对其运行查询以返回所需的字段。

为了提供更具体的建议，我需要输入数据和预期输出的样本

# c# - 如何在 C#/XAML 中从网页中抓取数据

> ID：12867930
> 
> 赞同：1
> 
> 时间：2012-10-12T22:24:22.250
> 
> 标签：c#, windows-phone-7

在 Windows Phone 7 开发方面，我是全新的。我已经下载了 Windows Phone SDK 7.1 和 Microsoft Visual Studio 2010。为了练习，我正在尝试制作一个可以访问 weather.com 并获取当前当地天气的应用程序。

我知道如何使用 ToolBox 中的 WebBrowser 工具访问网站，但这并不是我想要做的。我希望它在我启动应用程序时拉动天气。允许我执行此操作的 XAML 和/或 C# 代码是什么样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:09:48.503

您可以尝试[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)库来解析 html。或者您可以使用`WebClient`下载数据并自行解析。此外，检查您是否有任何用于天气网络的 API，这对您的应用程序来说会更容易和更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T23:21:08.480

忘记 APIs 和 webbrowser。使用httprequest，Httpresponse，你有更多的灵活性

系统网站

# c - select()/poll() 是否适用于 C 语言中的简单实时游戏服务器？

> ID：12867935
> 
> 赞同：0
> 
> 时间：2012-10-12T22:25:14.103
> 
> 标签：c, sockets, select, polling

我正在开发一个简单的多人在线文本游戏，我阅读`select()`并且`poll()`是多路复用 I/O 的流行方法。

我[在 GNU C 文档中找到了这个例子](http://www.gnu.org/software/libc/manual/html_node/Server-Example.html#Server-Example)，它使用`select`. 我运行它并制作了 3 个如下所示的 Python 测试客户端：

```
import socket
import time

port = 5555
test = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
test.connect(('localhost', port))

while 1:
    test.send('aaaa')
    time.sleep(0.5) 
```

`aaaa`然后我用不同的字符串（`55`和）运行客户端（从运行服务器的同一台计算机`..`）。

服务器的输出是

```
Server: got message: `aaaa'
Server: got message: `55aa'
Server: got message: `aaaa'
Server: got message: `55aa'
Server: got message: `..aa' 
```

琴弦越来越乱。

这是某种愚蠢的编译错误，我的测试客户端中的错误还是我在同一台计算机上运行客户端和服务器的事实？还是这个程序告诉我我不应该`select`为此目的使用？考虑到我会将它用于多人游戏服务器（每秒可能会收到很多消息），我认为我不能让消息混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:32:57.057

客户端和服务器是完全异步的。您不知道哪个会占用 CPU 时间以及按什么顺序。网络也不保证交付顺序（尽管 TCP 将确保应用程序按照发送顺序查看*来自单个客户端*的数据）。

选择/轮询返回有数据要读取的套接字列表。请确保在再次调用 select/poll 之前阅读所有内容，否则您将优先考虑较低编号端口上的连接。

请注意，读取是原始数据，不会以任何方式终止，因此不能直接作为字符串转储，除非发送方在对其套接字的写入中包含 NUL 终止符。

# http - 通过 cURL 创建 Riak 存储桶

> ID：12867941
> 
> 赞同：4
> 
> 时间：2012-10-12T22:25:45.910
> 
> 标签：http, curl, riak

我希望能够通过 cURL 创建一个 Riak 存储桶。我一直在网上搜索，似乎无法找到一种方法来做到这一点。我知道有一些方法可以通过驱动程序轻松完成，但需要能够使用 cURL 来完成我正在开发的 Saas 应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T03:37:07.300

你会做一个 PUT 传递你想要作为 json 对象的存储桶属性，例如

```
curl -v http://riak3.local:8098/riak/newBucket -X PUT -H Content-Type:application/json --data-binary '{"props":{"n_val":5}}' 
```

[文档](http://docs.basho.com/riak/kv/2.2.3/developing/api/http/set-bucket-props/)有更完整的细节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T17:50:52.353

另一件事 - 要记住的重要一点是，没有办法通过调用（通过 CURL 或客户端 api）显式地“创建”存储桶。

您只能通过上面的调用创建*自定义存储桶。*

原因是——存储桶只是键的前缀。Riak 系统中没有任何对象可以跟踪存储桶。某处没有文件，内存中没有变量，或类似的东西。这就是为什么简单的“list buckets”命令如此昂贵的原因：Riak 实际上必须遍历集群中的每个键，并通过查看键前缀来组装一个桶列表。

The only thing that exists as actual objects are buckets with non-default settings, ie, custom buckets. That's what that curl command above does -- it keeps track of some non-default settings for Riak to consult if a call ever comes in to that bucket.

Anyways, the moral of the story is: you don't need to create buckets in the normal course of operations. You can just start writing to them, and they will come into being (again, in the sense of, keys with bucket prefixes will come into being, which means they can now be iterated over by the expensive 'list buckets' call).

You only have to issue the call for custom buckets (and also, you don't want to do that too much, either, as there is a practical limit to the number of custom buckets created in a cluster, somewhere around 9000).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T07:13:28.310

我还发现，如果您将新对象添加到不存在的存储桶中，它将即时创建该存储桶。

> 请记住，当您向其中添加密钥时，会自动创建存储桶。无需显式“创建”存储桶（有关存储桶及其属性的更多信息，请参见页面下方。）

[存储桶属性和操作](http://docs.basho.com/riak/latest/tutorials/fast-track/Basic-Riak-API-Operations/#Bucket%20Properties%20and%20Operations)

# jquery - Jquery滚动图像在IE中不起作用

> ID：12867946
> 
> 赞同：3
> 
> 时间：2012-10-12T22:26:07.693
> 
> 标签：jquery

简而言之，我希望图像上下移动，而不是左右移动。我找到了一点 jquery 并对其进行了更改以帮助自己，它可以在 chrome 和 firefox 中运行，但是上帝帮助我使用 IE（像往常一样）。

试图做到这一点：[http](http://demo.rickyh.co.uk/css-position-x-and-position-y/) ://demo.rickyh.co.uk/css-position-x-and-position-y/ 中间那个。适用于 chrome 和 ffox 只是不适用于 IE 9

```
 /*js*/
$(document).scroll(function(){
var $this = $(this);
$(".natface").css('left', 114 - $this.scrollLeft());
});

/*css */
.natface{
position: fixed;
left: 114px;
width: 88px;
height: 93px;
z-index: -2;
} 
```

这使我可以上下滚动页面并使该图像上下移动，但是当我缩小窗口然后从左到右滚动时，这会使它不会左右滚动。遗憾的是，IE 中的情况并非如此，因为即使我将窗口变小，当我向右滚动时它仍会向右滚动。

如果您可以用一个图像在边缘线框的左侧稍微向下滚动，重叠它看起来好像它正在对文本框说话。这就是我的意图。

我对这一切也很陌生，所以很难知道我哪里出错了。很抱歉第一次使用stackoverflow。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:29:18.520

编辑：你完全改变了问题，现在我有点困惑。我认为您的位置固定问题和 IE 可能是因为您在 quirksmode 下运行。您需要一个`strict`用于位置的文档类型：固定在 IE 中工作。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

在这里也留下我的旧答案：

有 CSS 属性`position:fixed`，但我认为 IE6 和 iOS 4 不支持此属性。

**位置：固定JSFiddle** [http://jsfiddle.net/DLeYv/1/](http://jsfiddle.net/DLeYv/1/)

如果你想使用 Javascript，这样的东西会让它水平和垂直滚动：

```
$(".natface")
  .css('top', 114 + $this.scrollTop())
  .css('left', 100 + $this.scrollLeft()); 
```

这告诉类`.natface`的任何东西滚动到与窗口滚动相同的像素量（`scrollTop`），然后再向下滚动 114 个像素，与向左滚动的像素量相同。

为此， .natface 元素需要具有“绝对”的位置，并且不在任何其他定位元素内（如直接在`<body>`标签内）。

**JSFiddle** [http://jsfiddle.net/DUnUm/2/](http://jsfiddle.net/DUnUm/2/)

# wordpress - WP get_footer 函数不显示页脚

> ID：12867948
> 
> 赞同：0
> 
> 时间：2012-10-12T22:26:14.750
> 
> 标签：wordpress, wordpress-theming, footer

我正在尝试学习如何构建自己的 WordPress 主题。我已经完成了一些教程，但我遇到了障碍。我似乎无法弄清楚我做错了什么。当我将页脚的 html 放在与“home.php”相同的文件中时，它可以正常工作。但是，当我尝试将其分开并将页脚 html 放在“footer.php”中并使用“get_footer();”时 功能，页脚根本没有出现，可见或在代码中......它不存在。我想知道是否还有其他事情我忽略了让页脚工作？如果不是，那么当我将代码拆分为不同的主题部分/文件时，可能导致页脚不显示的原因是什么？

这是 home.php 的代码：

```
 <?php
/*
  Template Name: Front Page
 */
?>

<?php get_header(); ?>

<?php get_template_part('nav'); ?>

<div id="content"><!-- Start Content -->

    <?php get_sidebar('left'); ?>

    <div id="middle-column" class="grid_8"><!-- Main Content Begins Here -->

        <?php if (have_posts()) : while (have_posts()) : the_post(); ?><!-- Start Loop -->
                <div class="post">
                    <h2 id="post-<?php the_ID(); ?>"><?php the_title(); ?></h2>
                    <div class="entrytext">
                        <?php the_content('<p class="serif">Read the rest of this page &raquo;</p>'); ?>
                    </div>
                </div>
                <?php
            endwhile;
        else:
            ?>
            <?php _e('This page does not appear to have been set up yet. Sorry, please try again later. Thanks!'); ?>
        <?php endif; ?>

        <!-- End Loop -->

    </div>

    <?php get_sidebar('right'); ?>
    <?php get_footer(); ?> 
```

这是footer.php的代码：

```
<div style="clear:both;"></div>
    <div id="push"></div>
</div><!-- End Content -->
</div><!-- End Container -->
</div><!-- End Wrapper -->

<div id="footer"><!-- Start Footer -->
    <div id="footWrap"><!-- Start #footWrap -->
        <p>&copy; Brent Blackwood</p>
    </div><!-- End #footWrap -->
</div><!-- End Footer -->

<div id="headerBand"></div><!-- Placed here for SEO purposes -->
<div id="navBand"></div><!-- Placed here for SEO purposes -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T22:43:24.510

我看不出有什么明显的错误。

你有`define('WP_DEBUG',true);`你的 wp-config.php 吗？如果没有，请添加它并查看是否有可能有帮助的错误。

你确定它失败了，`get_footer()`而不是之前，`get_sidebar()`例如？

您的“首页”模板文件和footer.php 在同一个目录中吗？

你有公共网址吗？

# sql-server-2008 - 从 SQL Server 迁移到 Cassandra

> ID：12867951
> 
> 赞同：0
> 
> 时间：2012-10-12T22:26:31.573
> 
> 标签：sql-server-2008, migration, cassandra

我希望很快开始我的新项目。我有使用 SQL Server 的经验，但没有使用 Cassandra 的经验，所以 SQL Server 肯定是最快的。但如果我的项目成功，我想迁移到 Cassandra。这是否可能，如果是一项艰苦的工作还是非常简单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T07:46:56.410

“煞费苦心”甚至还没有开始形容它……你说的是非常不同的词。

另一方面，定义“成功”。stackoverflow.com 本身的成功是否足以衡量[每天有 100 万人访问](http://www.quantcast.com/p-c1rF4kxgLUzNc)？您现在阅读的这个答案是托管在 SQL Server 上的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:25:15.550

如果您使用的是 java，您可以尝试 PlayOrm，它与 JPA 非常相似，但在您的行中嵌入数据的 noSQL 扭曲等加上它具有可扩展 SQL，因此只要您正确分区数据，您仍然可以扩展和分区表具有可以使用 SQL 查询的索引....毕竟，您不希望从具有 1 万亿行的表中获得万亿节点索引...相反，您可以拥有分区并查询分区。

# javascript - 添加包含元素引用的对象时，IndexedDB 失败

> ID：12867952
> 
> 赞同：2
> 
> 时间：2012-10-12T22:26:35.667
> 
> 标签：javascript, html, google-chrome, dom, indexeddb

我正在为 Google Chrome 编写一个应用程序（目标受众是一个内部团队），它允许用户从 iframe 中操作元素。用户可以使用鼠标选择 DOM 元素并对它们执行各种操作，例如更改颜色、字体等。

我正在使用一种`nodeIterator`方法来仅选择具有 ID 或类名的元素。然后对于这些元素中的每一个，我将一些特定于元素的属性添加到一个对象，并将该对象推送到一个数组中。然后，我打开一个 IndexedDB 数据库并将数组中的每个对象添加到数据库中。

我的问题是：只要我不在对象中包含对元素的引用，一切正常。

```
// Works fine
array.push({
     width : currentNode.offsetWidth,
    height : currentNode.offsetHeight,
       top : currentNode.style.top;
      left : currentNode.style.left;
});

// Doesn't work
array.push({
      elem : currentNode,
     width : currentNode.offsetWidth,
    height : currentNode.offsetHeight,
       top : currentNode.style.top;
      left : currentNode.style.left;
}); 
```

谷歌浏览器在尝试将第一个元素添加到 IndexedDB 存储后静默失败（控制台中没有任何内容）。

我的问题是：有没有其他人经历过这种行为，这是特定于浏览器的错误吗？

明天我将把我的代码提炼到 JSfiddle。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T23:29:19.033

IndexedDB[存储对象的结构化克隆](http://www.w3.org/TR/IndexedDB/#value-construct)。基本上您的数据将转换为 JSON 对象，这些不包括 Element 或 Node 数据类型。

然而，静默失败不是预期的行为。根据[结构化克隆算法](https://developer.mozilla.org/en-US/docs/DOM/The_structured_clone_algorithm)，它应该抛出 DataCloneError。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:20:25.263

是否需要保存 DOM 元素？您可以只保存 DOM 元素的 ID 并通过其 ID 检索元素吗？

indexeddb 只能存储没有循环引用的数据。也许你可以尝试一件事。前段时间我写了[一篇](http://www.kristofdegrave.be/2012/07/json-serialize-and-deserialize.html)关于如何将函数序列化和反序列化为 JSON 的博客文章。也许这可以帮助你，但我建议你不要存储完整的元素，除非没有其他选择。这会将大量不必要的数据添加到您的数据库中，并且在序列化为 JSON 时可能会丢失信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:02:13.797

您应该从 put() 本身获得 chrome 中的异常（我刚刚在 Chrome 23 上尝试过），这意味着如果您有一个 onerror 处理程序，它将不会被调用，因为首先调用了该异常：

即如果你有

```
req = db.transaction("foo", "readwrite").objectStore("foo").put({...data with dom nodes })
req.onsuccess = ...
req.onerror = ... 
```

第一行将抛出异常。

# asp.net-mvc-3 - 在 Url.Action 属性上使用模型数据

> ID：12867954
> 
> 赞同：0
> 
> 时间：2012-10-12T22:27:11.317
> 
> 标签：asp.net-mvc-3

我需要在表单标签（Html.BeginForm）中添加一个属性，并且该属性的值必须是编辑操作（ID）的参数。

我怎样才能做到这一点？

这是我的操作代码：

```
 //
    // GET: /Panel/Partners/Edit/5

    public ActionResult Edit(int id)
    {
        var repository = new PartnersRepository();

        var data = repository.Find(id);

        return View(data);
    } 
```

这是表单标签的代码：

```
 @using (Html.BeginForm("Edit", "Partners", 
    FormMethod.Post, 
    new { 
        enctype = "multipart/form-data", 
        id = "partnersForm", 
        data_removelogo = @Url.Action("RemoveLogo", "Partners", new { Area = "Panel", id = Model.ID }) }
        )) 
```

data_removelogo 属性中的 Url.Action 不适用于 Model.ID 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:17:20.003

从您的评论看来，您正在将`null`模型传递到您的视图中。当您尝试访问空引用上的任何属性时，您将收到您遇到的错误。您要么需要确保在控制器中没有传入空模型，要么在您的视图中需要逻辑来处理空模型，例如在访问 id 之前检查空值。

# google-chrome - DIV 高度在 Chrome 中无法正确自动调整大小

> ID：12867960
> 
> 赞同：0
> 
> 时间：2012-10-12T22:28:01.230
> 
> 标签：google-chrome, height

我有一个包含在绝对 DIV 中的普通图像，所有图像都包含在相对 DIV 中。没有边距，没有填充，没有浮动。我的包含 DIV 的图像的高度和宽度设置为自动以扩展为图像的大小。在 FF 和 IE 中一切都很好，但在 Chrome 中，图像的行为就像它包含 Div 的高度被设置为 100%，填充外部容器的垂直空间一样。

有任何想法吗？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:04:01.680

原来我已经将图像本身的高度/宽度设置为 100%。FF 和 IE 没有将其传递到外部 DIV 容器，而 Chrome 则可以。

# python - 在python中查找string1是否包含在string2中

> ID：12867969
> 
> 赞同：0
> 
> 时间：2012-10-12T22:30:07.723
> 
> 标签：python

我有两个字符串：`string1 = ABCDE`和`string2 = BC`.

我希望编写一个程序，返回一个 T/F 值来判断 string2 是否包含在 string1 中。对于上面的示例，该函数应返回 True。我知道它类似于 中的`%in%`函数`R`，但是由于我是 Python 的新手，请分享您对这个简单问题的想法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T22:32:55.420

你可以试试这个：

```
def StringTest(string1, string2):
  return string2 in string1 
```

或在函数之外：

```
result = string2 in string1 
```

其中任何一个都将返回布尔结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:33:00.293

```
if string1 in string2: print "YES!" 
```

这在 python 中真的很容易；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T03:02:26.987

```
string2.find(string1) != -1 
```

也可以。

# c# - 通过标记为网络钓鱼的 Gmail 发送电子邮件

> ID：12867972
> 
> 赞同：3
> 
> 时间：2012-10-12T22:30:32.033
> 
> 标签：c#, email, gmail

我正在使用 Gmail 的 SMTP 服务器通过 C# 代码发送电子邮件，并且在接收端 Gmail 报告：

**此邮件的发送者可能不是：*地址*@gmail.com 了解更多 报告网络钓鱼**。

我使用的发件人地址是 gmail.com*地址*。

这是我正在使用的代码：

```
public class Email
{
    public string FromAddress { get; set; }
    public string ToAddress { get; set; }
    public string Subject { get; set; }
    public string Content { get; set; }
    public string Password { private get; set; }

    public void Send()
    {
        using (var message = new MailMessage(FromAddress, ToAddress) { IsBodyHtml = true, Subject = Subject, Body = Content })
        {
            GetSmptClient(FromAddress, Password).Send(message);
        }
    }

    static SmtpClient GetSmptClient(string userName, string password)
    {
        return new SmtpClient
        {
            Host = "smtp.gmail.com",
            Port = 587,
            EnableSsl = true,
            DeliveryMethod = SmtpDeliveryMethod.Network,
            UseDefaultCredentials = false,
            Credentials = new NetworkCredential(userName, password)
        };
    }
} 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:58:41.767

您可以在 Google Apps 邮件的帐户设置中设置某种类型的身份验证代码，这可能会有所帮助

# ruby-on-rails - 从 find 返回唯一年份

> ID：12867981
> 
> 赞同：4
> 
> 时间：2012-10-12T22:31:08.220
> 
> 标签：ruby-on-rails

> **可能重复：**
> [Rails：从列中选择唯一值](https://stackoverflow.com/questions/9658881/rails-select-unique-values-from-a-column)

假设我在过去两年（2011 年和 2012 年）创建了 5000 条记录。如何遍历所有这些记录并返回仅包含唯一年份 [2011、2012] 的数组？

我正在创建一个报告，其中行按年标记，记录退出，列按月标记。然后 td 由每年每个月的总和填充。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T22:38:32.003

请参阅[Rails：从列中选择唯一值以](https://stackoverflow.com/questions/9658881/rails-select-unique-values-from-a-column)获取更多 Rails 方法。

```
Model.uniq.pluck(:year) 
```

编辑：

对于您的具体要求，您可以做

```
 Model.pluck(:created_at).map{|x| x.year}.uniq 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:00:47.310

Model.select("created_at").map{ |i| i.created_at.year }.uniq 正在工作。我仍在寻找一种更清洁的方法来做到这一点。

# jquery - 如何使用 jQuery 插入一个新的表格行作为表格的第二行？

> ID：12867983
> 
> 赞同：3
> 
> 时间：2012-10-12T22:31:12.580
> 
> 标签：jquery, html-table

我有一张这样的桌子：

```
<table id="myTable">
    <tr>
        <td>Stuff</td>
    </tr>
    <tr>
        <td>Stuff</td>
    </tr>
    // etc.
</table> 
```

我想在上面的表格中插入一个新的表格行，所以它是第二行。我知道我可以使用`prepend()`该行作为第一行插入，但我不知道如何将它作为第二行插入。这是我正在使用的：

```
$.ajax({
    type: "POST",
    url: 'get_new_table_row.php',
    success: function(data){
        $('table#myTable').prepend(data);                
    }
});
return false; 
```

如何修改它以使其将新行作为表中的第二行插入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T22:33:01.083

您可以使用[`after`](http://api.jquery.com/after/)方法和`:first`选择器：

```
$('#myTable tr:first').after(data); 
```

或者：

```
$('#myTable tr').eq(0).after(data); 
```

# android - 如何为 urllib2 创建一个标头，使其看起来像手机。Python

> ID：12867984
> 
> 赞同：0
> 
> 时间：2012-10-12T22:31:14.467
> 
> 标签：android, python, urllib2

我想创建一个 urllib2 开启器，所以它看起来就像是一部手机。我不知道我应该改变什么，或者你可能知道任何现有的图书馆可以做到这一点。

这就是我现在所拥有的：

```
cj=cookielib.CookieJar()
#Process Hadlers
opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
#install opener, now all the calls to urllib2.urlopen use this opener
urllib2.install_opener(opener)
opener.addheaders=[
                    ('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13'),
                    #('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
                    ('Accept-Language', 'en-gb,en;q=0.5'),
                    ('Accept-Encoding', 'gzip,deflate'),
                    ('Accept-Charset', 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'),
                    ('Keep-Alive', '115'),
                    ('Connection', 'keep-alive'),
                    ('Cache-Control', 'max-age=0'),
                    ('Referer', 'http://yahoo.com'),
                ] 
```

但我希望网站认为我的 urllib2 开启器是一部手机（不管是哪一部）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:00:20.247

网站`User-Agent`通常使用 HTTP 标头来识别您的设备。从以下位置选择一个与您的预期设备匹配的设备：[http ://www.useragentstring.com/pages/useragentstring.php](http://www.useragentstring.com/pages/useragentstring.php)

# javascript - JQuery 循环插件不起作用

> ID：12867988
> 
> 赞同：-1
> 
> 时间：2012-10-12T22:31:37.103
> 
> 标签：javascript, jquery, image, cycle

我是 JQuery 的新手，我想我会尝试一下，而不是使用 Flash Rotator 作为我正在创建的网站的横幅，我的问题是我拥有[http://jquery.malsup.com所需的所有代码/cycle/basic.html](http://jquery.malsup.com/cycle/basic.html)，我获取了源代码，但由于某种原因，在任何浏览器中，图像都不会旋转，这是我的代码：

```
 <title>HOME</title>
    <link rel="shortcut icon" type="image/x-icon" href="../images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="external/cascade/main.css" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="Home Care Repair">
    <?php include 'external/scripts/main.php'; ?>

    <style type="text/css">
        .bannerRotator { height: 250px; width: 600px; margin: 0px; overflow: hidden;}
        .bannerRotator img { padding: 0px; border: 0px solid #ccc; background-color: transparent; border-radius: 10px; }
    </style>

    <!-- include jQuery library -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <!-- include Cycle plugin -->
    <script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $('.bannerRotator').cycle(
                fx:    'fade', 
                speed:  3000
            )
        });

        function handleSelect(popLinks)
        {   
            window.location = popLinks.value+".php";
        };
    </script>

    <!-- CSS Support for Internet Explorer -->

    <!--[if lte IE 9]>
        <link rel=stylesheet href="external/cascade/internetExplorerCss/ie.css" type="text/css" />
    <![endif]-->

</head>

<body>
    <div id="headerContainer">
        <div id="navigation" style="width: 818px;">
            <ul id="css3menu1" class="topmenu">
                <li class="topmenu"><a href="index.php" style="width: 85px; height: 5px; line-height: 9px; background-image: url('../images/navigation/bgNav.png'); border-left: 1px solid #ccc;">Home</a></li>
                <li class="topmenu"><a href="heating.php" style="width: 85px; height: 5px; line-height: 9px; background-image: url('../images/navigation/bgNav.png');">Heating</a></li>
                <li class="topmenu"><a href="plumbing.php" style="width: 85px; height: 5px; line-height: 9px; background-image: url('../images/navigation/bgNav.png');">Plumbing</a></li>
                <li class="topmenu"><a href="electrical.php" style="width: 85px; height: 5px; line-height: 9px; background-image: url('../images/navigation/bgNav.png');">Electrical</a></li>           
                <li class="topmenu"><a href="whyUs.php" style="width: 120px; height: 5px; line-height: 9px; background-image: url('../images/navigation/bgNav.png');">Why Choose Us</a></li>
                <li class="topmenu"><a href="faq.php" style="width: 85px; height: 5px; line-height: 9px; background-image: url('../images/navigation/bgNav.png');">FAQs</a></li>
                <li class="topmenu"><a href="adviceHelp.php" style="width: 119px; height: 5px; line-height: 9px; background-image: url('../images/navigation/bgNav.png');">Advice and Help</a></li>
            </ul>
        </div>

        <div id="header">
            <a href="index.php" border="0"><img src="../images/header/title.png" alt="Home Care Repair Title Image" /></a>
        </div>

        <div id="headerNavigation">
            <a href="index.php"> > Home</a> <a href="contactUs.php"> > Contact Us</a>
        </div>
    </div>

    <div id="mainContent" style="background-image: url(../images/mainContent/mainContent.png); padding: 10px; width: 601px; height: 641px;">
        <div class="bannerRotator"> 
            <img src="../images/bannerRotater/shrek(1).jpg" width="600" height="250" /> 
            <img src="../images/bannerRotater/contact(2).jpg" width="600" height="250" /> 
            <img src="../images/bannerRotater/old(3).jpg" width="600" height="250" /> 
            <img src="../images/bannerRotater/digital(4).jpg" width="600" height="250" /> 
        </div>

        MAIN CONTENT HERE

    </div>

    <div id="sideBar">
        <div id="comboBox" style="background-image: url(../images/sidebar/comboBox.png);">
            <select name="popLinks" onchange="javascript:handleSelect(this)" style="margin-top: 55px; margin-left: 35px;">
                <option value="#">--------- Select an Option ---------</option>
                <option value="contactUs">Contact Us</option>
                <option value="faq">FAQs</option>
                <option value="heating">Heating</option>
                <option value="plumbing">Plumbing</option>
                <option value="electrica">Electrical</option>
            </select>
        </div> 
```

任何人都可以帮助我，因为我很困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:36:59.467

你的问题在这里：

```
<!-- include Cycle plugin -->
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script> 
```

您不能直接链接到文件的 Github“下载”并期望它的行为类似于[CDN](http://en.wikipedia.org/wiki/Content_delivery_network)。当您转到[URL](http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js)时，浏览器会尝试下载文件。您应该会在控制台中看到错误或警告。

除非为此目的提供 CDN 链接，否则您应该下载文件并将其上传到您自己的服务器上的主机。

包含应该看起来更像这样：

```
<script type="text/javascript" src="http://myDomain/myplugins/jquery.cycle.all.latest.js"></script> 
```

或类似的东西：

```
<script type="text/javascript" src="/myplugins/jquery.cycle.all.latest.js"></script> 
```

* * *

您的代码中还缺少大括号，如下所示：

```
$('.bannerRotator').cycle({
    fx:    'fade', 
    speed:  3000
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T22:49:37.777

您需要在传递给循环的参数周围加上大括号：

```
$(document).ready(function() {
    $('.bannerRotator').cycle({
        fx:    'fade', 
        speed:  3000
    });
}); 
```

JSBin 示例在这里：http: [//jsbin.com/oruwav/2/](http://jsbin.com/oruwav/2/)

# c# - Windows 8 Metro 调用标准样式从代码后面

> ID：12867989
> 
> 赞同：2
> 
> 时间：2012-10-12T22:31:38.913
> 
> 标签：c#, xaml, windows-8

我正在尝试通过后面的代码分配 StandardStyles.xaml 中定义的样式。

我试过了

```
var x = Resources["UnfavoriteAppBarButtonStyle"]; 
```

但我在那个代码上得到了**COMException 。**

**对 COM 组件的调用已返回错误 HRESULT E_FAIL。**

如果上面的代码是错误的，我该如何从 StandardStyles.xaml 访问样式

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T23:22:03.777

我知道了

正确的做法是：

```
var style = Application.Current.Resources["FavoriteAppBarButtonStyle"] as Style 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T06:05:18.487

你也可以这样添加

```
backButton.Style = (Style)this.Resources["NavigationBackButtonNormalStyle"]; 
```

这里`(style)`将其声明为样式类型

# android - 找不到 AbstractHttpClient.class 源

> ID：12867990
> 
> 赞同：2
> 
> 时间：2012-10-12T22:31:43.153
> 
> 标签：android, apache, http-post

我正在尝试创建一个简单的 android 应用程序，它将与网站进行通信。我遇到的问题是，每次我尝试使用 HttpPost Eclipse 的调试器时都会告诉我： S​​ource not Found The JAR file C:\Users...\android-sdk\plarforms\android-16\android.jar has no源附件 您可以通过单击下面的附加源来附加源：

我试图附加一些 jar 文件，但没有任何效果。这是我的代码：

```
 public void onClick(View v) {

    URI website = null;
    HttpResponse response = null;
    BufferedReader in = null;

    HttpClient client = new DefaultHttpClient();

    try {
        website = new URI("http://fakewebsite.php");
    } catch (URISyntaxException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    HttpGet getRequest = new HttpGet();
    getRequest.setURI(website);

    HttpPost postRequest = new HttpPost();

    try {
        response = client.execute(postRequest);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:37:09.627

利用

```
 response = client.execute(getRequest); 
```

代替

```
 response = client.execute(postRequest); 
```

您收到此错误是因为您当前未设置 URI

`HttpPost postRequest = new HttpPost();`

# c# - 如何检测 Windows 移动设备是否有摄像头？C＃

> ID：12867991
> 
> 赞同：4
> 
> 时间：2012-10-12T22:31:44.420
> 
> 标签：c#, camera, windows-mobile-6

如何在调用方法 camera.showDialog (); 之前检测设备是否有摄像头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:22:59.177

我认为您正在寻找[SystemState.CameraPresent](http://msdn.microsoft.com/en-us/library/microsoft.windowsmobile.status.systemstate.camerapresent.aspx)属性。

Microsoft.WindowsMo​​bile.Status.SystemState.CameraPresent

# android - 移动设备模拟如何工作？

> ID：12867994
> 
> 赞同：3
> 
> 时间：2012-10-12T22:31:51.670
> 
> 标签：android, testing, mobile

我使用了 perfectomobile，他们通过 Flash 提供了实际的移动设备模拟。我想知道他们是怎么做到的？

他们正在为 android 和 iPhone 做这件事

他们用数据线串流手机屏幕吗？触摸是如何传递到设备的？

我可以看到它们是真实的设备，因为它们具有电话号码和所有其他功能。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:04:53.797

我不了解 iOS 和 Win8，但 Android 只是 Linux 的一个小发行版。Linux 可以托管 VNC 服务器。可以远程控制和查看托管 VNC 服务器的设备。VNC（和/或 VNC 等远程桌面系统）也可用于 MacOS X 和 Windows 系统，因此该技术也有可能在 Apple 和 Microsoft 便携式设备上使用。

尽管如此，perfectomobile 的硬件/软件要求似乎更依赖于视频流：

```
Internet Browser (Explorer 7/8/9, Firefox latest, Chrome latest, Safari)
Adobe Flash 11.1 and above
Broadband Internet connection (at least 1MB of download speed)
TCP Ports 80 (HTTP), 443 (SSL) and 1935 (RTMP video streaming) enabled on the firewall
JavaScript and cookies enabled
Intel or AMD processor (1GHz or faster)
At least 512 MB RAM (at least 2 GB RAM for Vista)
Note: This service requires no client installation 
```

VNC 不需要视频流，甚至可以在相对窄带的频道上使用。

# java - AndEngine：只是黑色背景，字体不显示

> ID：12867995
> 
> 赞同：0
> 
> 时间：2012-10-12T22:32:04.510
> 
> 标签：java, android, andengine

我正在关注[https://jimmaru.wordpress.com/2012/05/19/jimvaders-my-own-invaders-clone-thingie-tutorial/上的教程](https://jimmaru.wordpress.com/2012/05/19/jimvaders-my-own-invaders-clone-thingie-tutorial/)

我下面的代码应该显示从一侧滚动到另一侧的文本。现在我得到的只是一个黑色的矩形，它占据了屏幕的大部分，没有出现任何文本，也没有错误。FPSManager 显示 60fps。我的 res/values/strings.xml 设置中有 title_1 和 title_2。

MainActivity.java

```
package com.example.hh;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.util.FPSLogger;
import org.andengine.opengl.font.Font;
import org.andengine.opengl.font.FontFactory;
import org.andengine.ui.activity.SimpleBaseGameActivity;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Typeface;
import android.view.Menu;

public class MainActivity extends SimpleBaseGameActivity {

    static final int cWidth = 800;
    static final int cHeight = 480;

    public Font mFont;
    public Camera mCamera;

    public Scene mCurrentScene;
    public static MainActivity instance;

    @Override
    public EngineOptions onCreateEngineOptions() {
        // TODO Auto-generated method stub

        instance = this;
        mCamera = new Camera(0,0, cWidth, cHeight);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR, 
                new RatioResolutionPolicy(cWidth,cHeight),mCamera);

    }

    @Override
    protected void onCreateResources() {
        // TODO Auto-generated method stub
        mFont = FontFactory.create(this.getFontManager(), this.getTextureManager(), 256, 256, Typeface.create(Typeface.DEFAULT,Typeface.BOLD), 32);
        mFont.load();
    }

    @Override
    protected Scene onCreateScene() {
        // TODO Auto-generated method stub
        mEngine.registerUpdateHandler(new FPSLogger());
        mCurrentScene = new SplashScene();
        return mCurrentScene;
//      mEngine.registerUpdateHandler(new FPSLogger());
//      mCurrentScene = new Scene();
//      mCurrentScene.setBackground(new Background(0.09804f,0.7274f,0.8f));
//      return mCurrentScene;
    }

    public static MainActivity getSharedInstance(){
        return instance;
    }

    public void setCurrentScene(Scene scene){
        mCurrentScene = scene;
        getEngine().setScene(mCurrentScene);
    }
} 
```

SplashScene.java

```
package com.example.hh;

import org.andengine.entity.modifier.MoveXModifier;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.text.Text;

public class SplashScene extends Scene {

    MainActivity activity;

    public void SplashScene(){
        setBackground(new Background(0.09804f, 0.6274f, 0));

        activity =  MainActivity.getSharedInstance();

        Text title1 = new Text(0,0, activity.mFont,activity.getString(R.string.title_1),activity.getVertexBufferObjectManager());
        Text title2 = new Text(0,0, activity.mFont, activity.getString(R.string.title_2), activity.getVertexBufferObjectManager());

        title1.setPosition(-title1.getWidth(), activity.mCamera.getHeight() / 2);
        title2.setPosition(activity.mCamera.getWidth(), activity.mCamera.getHeight() /2);

        attachChild(title1);
        attachChild(title2);

        title1.registerEntityModifier(new MoveXModifier(1,title1.getX(),activity.mCamera.getWidth()/2 - title1.getWidth()));
        title2.registerEntityModifier(new MoveXModifier(1,title2.getX(), activity.mCamera.getWidth() /2));

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:44:48.033

将前景设置为白色（或非黑色）的线在哪里？

# yaml - 创建一个简单的 yaml 文件

> ID：12867997
> 
> 赞同：5
> 
> 时间：2012-10-12T22:32:17.910
> 
> 标签：yaml

我真的很讨厌问这个，因为它应该很明显，但我无法让它发挥作用。所以我正在尝试创建这个简单的 yaml 文件：

```
Day:
   MOND:'1s'
   TUD:'2s'
   WED:'3s'
   THD:'4s'
   FRD:'5s' 
```

但我收到了这个错误：

> yaml.scanner.ScannerError：扫描下一个令牌时发现无法启动任何令牌的字符“\ t”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T22:42:56.453

当您应该使用空格时，可能是您正在使用制表符来缩进下一行。

# c# - Visual Studio 中的 sql 数据库交互

> ID：12867998
> 
> 赞同：0
> 
> 时间：2012-10-12T22:32:18.190
> 
> 标签：c#, visual-studio-2010, sql-server-2008, asp.net-4.0

我的根`AppCode`文件夹中有一个帮助程序类，可以节省我的时间和编码执行数据库相关任务

我正在寻找一种将所有表和列名称放入智能感知的方法

所以例如

```
public static class GetTableData
{
    //base method
    static int ExecSQLint(string TblintSQL)
    {
        int value;
        SqlConnection myConn = new SqlConnection("server=(local);Initial Catalog=dbName;Integrated Security=True");
        SqlCommand TblintCMD = new SqlCommand(TblintSQL, myConn);

        try
        {
            myConn.Open();
            value = Convert.ToInt32(TblintCMD.ExecuteScalar());
        }
        finally
        {
            myConn.Close();
        }

        return value;
    }

    //return a Database value as int 
    public static int AsInt(string FieldToSearch, string tblName, string WhereClause, string FLdValue)
    {
        string TblintSQL = "SELECT " + FieldToSearch + " FROM " + tblName + " WHERE " + WhereClause + " ='" + FLdValue + "'";
        return ExecSQLint(TblintSQL);
    }
} 
```

因此，例如，如果我需要表格中的客户 id(int)

有些`[tblCustomers]`我有一个名为`custID`和`name`

我将通过以下代码检索客户 ID

```
int custId = GetTableData.AsInt("custID", "tblCustomers", "name", "warren"); 
```

我想在 Visual Studio 中获取可用的列和表名，这样我就不必使用上面示例中使用的字符串，实现这一目标的最简单方法是什么？

是通过生成一个将生成一个类的代码`const strings`

还是在 Visual Studio 中有我不知道的实用程序？（我目前使用的是 2010 Pro）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:37:28.680

您可以使用实体框架从您的表、视图和存储过程构建类。

[http://msdn.microsoft.com/en-us/library/bb386876(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb386876(v=vs.100).aspx)

# php - 如何通过类别 ID 号显示特定类别及其子类别？

> ID：12867999
> 
> 赞同：1
> 
> 时间：2012-10-12T22:32:38.270
> 
> 标签：php, magento

我正在使用 Magento 并在 ID 下有一个类别`99`。我想使用 HTML 无序列表显示它及其子项。如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T11:53:13.730

I copied and reformatted this code from the original question. Credits to Clint Hubbard Jr.

```
<ul>
  <li>
    <h2>
      <a href="<?php echo Mage::getModel("catalog/category")->load(99)->getUrl() ?>">
        <?php echo Mage::getModel("catalog/category")->load(99)->getName() ?>
      </a>
    </h2>
  </li>
  <?php $children = Mage::getModel('catalog/category')->getCategories(118) ?>
  <?php foreach ($children as $category): ?> 
    <li>
      <a href="<?php echo $category->getUrl(); ?>">
        <?php echo $category->getName(); ?>
      </a>
    </li>
  <?php endforeach; ?>
</ul> 
```

Request the category model with `Mage::getModel()` then load instance with ID 99 and retrieve its URL and its name. Then get its children in an array and go into a `foreach` loop (with the PHP alternate control structure with the colon and `endforeach`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:18:59.390

显然我的类别模型请求不够具体，下面是解决方案并解决了获取正确 url 的问题。

```
<ul class="menu-list-1">
  <li>
    <h2>
      <a href="<?php echo Mage::getModel("catalog/category")->load(99)->getUrl() ?>">
        <?php echo Mage::getModel("catalog/category")->load(99)->getName() ?>
      </a>
    </h2>
  </li>
  <?php foreach (Mage::getModel('catalog/category')->load(99)->getChildrenCategories() as $childCategory): ?>
    <li>
      <a href="<?php echo $childCategory->getUrl(); ?>">
        <?php echo $childCategory->getName(); ?>
      </a>
    </li>
  <?php endforeach; ?>
</ul> 
```