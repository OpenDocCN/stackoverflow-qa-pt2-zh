# StackOverflow 问答 15848000-15848999

# visual-c++ - 无法在 Win8 中以编程方式更新我的应用程序 - mfc

> ID：15848003
> 
> 赞同：1
> 
> 时间：2013-04-06T06:53:02.740
> 
> 标签：visual-c++, windows-8, mfc, exe, updates

我正在尝试从`sysMenu`.

并通过单击`Update App..`，`SysMenu`自动启动更新。

它在 XP 和 Win 7 上运行良好，但是当我尝试在 Win 8 中做同样的事情时，它就不起作用了。它发出警报消息`"You do not have sufficient rights to run this App"`。即使我使用管理员用户登录。

提示：如果我手动运行它`Updates.exe`，`run as Administrator`那么它也可以工作。

我附上了屏幕截图。我不知道为什么只有 Win 8 会发生这种情况。

![在此处输入图像描述](https://i.stack.imgur.com/uLLVR.png)

**编辑** 我也参考了这些文章。

[https://docs.microsoft.com/en-us/previous-versions/bb756929(v=msdn.10)](https://docs.microsoft.com/en-us/previous-versions/bb756929(v=msdn.10))

[http://www.developerfusion.com/code/7987/making-a-net-app-run-on-vista-with-administrator-priviledges/](http://www.developerfusion.com/code/7987/making-a-net-app-run-on-vista-with-administrator-priviledges/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:02:30.513

你没有提到这是否是你的应用程序。我假设这是您使用给定清单设置构建的应用程序。

您可以使用 Process Explorer 检查它是否以提升的用户权限运行（检查此对话框何时出现）。这可能是一些构建问题，您正在为不同的项目/构建设置此 UAC 设置，并尝试运行不同的可执行文件。

其他可能与本地安全策略中的特定用户权限有关（我不知道哪个策略可能允许/阻止更新）。或者可能是尝试启动更新的线程安全权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:19:51.003

我肯定你的清单文件有问题。请嵌入清单

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false"> 
```

使用您的 Updates.exe。

即使您已经尝试过，请再试一次。

快照中看到的错误对话框看起来像是来自您的应用程序。因此，您的应用程序中可能会有一些检查，显示此对话框。

# php - 在 php 中使用 session_id 和 session_name 的明确原因？

> ID：15848010
> 
> 赞同：0
> 
> 时间：2013-04-06T06:53:50.430
> 
> 标签：php

为什么我们实际上在 PHP 中使用 session_id 和 session_name 我知道这是出于安全目的但没有得到清晰的图片有人给我一些指导或建议....？请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:00:13.007

1)Sessions work by creating a unique id (UID) for each visitor and store variables based on this UID.

2)Session store value in server so in server all data are unique for each other.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:04:57.813

There is not any major difference behind this though, you can use session_id and/or session_name, **they are used to store id and name respectively**.

**session_id and session_name** are to get and set the current session ID and session ID name (default is **PHPSESSID**). session_regenerate_id can be used to regenerate/change the session ID of the current session. This might be useful if, for example, you want to refresh the session ID every 10 minutes or after changing the state of authenticity of a user associated with a session.

The format of a Session Id is AFAIK unique to each and every vendor.

Session Ids have the possibility to be reused though. If the session on machine A times out then that id could be regenerated for machine B. One this that should be true, however, is that not 2 distinct sessions, whether from different browser sessions on a single machine or different machines, should have the same session Id at the same point in time.

To get a handle on how it 'could' be implemented why not take a look at the Tomcat source code/documentation and havea look at how it handles sessions ? [http://jakarta.apache.org/tomcat/index.html](http://jakarta.apache.org/tomcat/index.html)

# ruby-on-rails-3 - 使用 rake 任务运行所有模型测试

> ID：15848011
> 
> 赞同：2
> 
> 时间：2013-04-06T06:53:51.697
> 
> 标签：ruby-on-rails-3, rake, rake-task, minitest

尝试使用 rake 任务仅在 test/models 目录中运行测试。使用微测。

我有一个将运行所有测试的 rake 任务

```
 require "rake/testtask"

  Rake::TestTask.new(:test => "db:test:prepare") do |t| 
    t.libs << "test"
    t.pattern = "test/**/*_test.rb"
 end

 task :default => :test 
```

然后，运行“rake”会达到默认值并运行所有测试。我想编写第二个 rake 任务，它只会在模型目录（test/models/）中运行测试。

我通过简单地更改来玩弄这个现有的 TestTask

```
t.pattern = "test/**/*_test.rb" 
```

到

```
t.pattern = "test/models/*_test.rb" 
```

但是，它似乎仍在运行所有测试......不仅仅是模型。奇怪的？

问题

我怎样才能做到这一点？我如何需要命名第二个仅运行模型的 TestTask，以及如何告诉 rake 运行该测试而不是默认的 :test？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T12:29:52.993

您正在寻找的模式是“test/models/**/*_test.rb”。“**”也将匹配子目录。

如果您使用的是 minitest-rails，那么您会为您添加很多任务。要运行所有模型测试，请运行：

```
rake minitest:models 
```

要查看为您创建的所有 rake 任务，请运行：

```
rake -T 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:09:44.483

像往常一样，答案很简单。只是稍微挖掘了一下。确保您的 application.rb 中有以下内容（在模块内）。

```
config.generators do |g|
    g.fixture_replacement :factory_girl # if your using factory_girl
    g.test_framework :mini_test, :spec => true, :fixture => false
end 
```

然后，您可以访问内置命令的 minitests。我要找的那个很简单

```
rake minitest:models 
```

啵啵！

# sql-server - 从 Excel 将参数传递给 SQL Server 上的 MS Query 中的临时变量

> ID：15848015
> 
> 赞同：3
> 
> 时间：2013-04-04T18:46:21.027
> 
> 标签：sql-server, excel, sql-server-2005, excel-2007

[我已经使用此处](https://superuser.com/questions/197453/run-an-sql-query-with-a-parameter-from-excel-2007)提到的 Microsoft 查询创建了一个参数查询。但是，当我想将参数传递给临时变量并创建表变量并编辑它们以获得所需的结果而不是执行 10 到 15 次连接并在 where 子句中提及参数时，我会遇到错误

> [Microsoft] [ODBC SQL Server Driver] 参数号无效

和

> [Microsoft] [ODBC SQL Server 驱动程序] 无效的描述符索引

我的代码看起来像这样它很复杂，有许多临时表和临时变量

```
BEGIN
    SET NOCOUNT ON

    DECLARE @sDate DATETIME, @eDate DATETIME; --used in many places to manipulate temp table

    SET @sdate = ?
    SET @edate = ?

    DECLARE @Temptable TABLE (Variable1 INT ,...... VariableN DECIMAL(18,4));

    Manipulate @temptable

    Select * from @Temptable 
END 
```

对于 SQL Server 2005 中的数据库，如何将参数传递给 Excel 2007 中的临时变量？我无权在数据库中创建存储过程并将它们作为参数传递给它。

**更新**

[正如David Vandenbos](https://stackoverflow.com/questions/15848015/pass-parameters-to-temp-variables-in-ms-query-on-sql-server-from-excel#comment22552445_15848015)所建议的那样，我已经找到了一种通过 VBA 的方法。我仍然很想知道这是否可以在没有 VBA 的帮助下完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T18:29:47.507

您可以在声明变量之前添加 SET NOCOUNT ON。我在 Excel 2010 中与 Microsoft Query 和 SQL Server 2005 完美配合。

```
SET NOCOUNT ON
DECLARE @VAR1 VARCHAR(4)
SET @VAR1 = '1234'
SELECT @VAR1 
```

[https://social.msdn.microsoft.com/Forums/office/en-US/d8003854-d11a-44f7-960c-a042347736d7/microsoft-query-cannot-run-sql-code-with-a-tsql-variables- in-it?forum=exceldev](https://social.msdn.microsoft.com/Forums/office/en-US/d8003854-d11a-44f7-960c-a042347736d7/microsoft-query-cannot-run-sql-code-with-a-tsql-variables-in-it?forum=exceldev)

# css - Scriptaculous 效果。鼠标悬停时出现故障

> ID：15848017
> 
> 赞同：1
> 
> 时间：2013-04-06T06:54:37.940
> 
> 标签：css, scriptaculous

使用 scriptaculous`Effect.Appear()`作为菜单选项时遇到问题，我想创建一个类似 flash 的菜单，但使用纯 css 和 scriptaculous。

我得到了我想要的结果，即当我将鼠标悬停在一个框上时，一个文本（带有`display: none;`）出现在它上面，并且框改变了高度和背景颜色。现在的问题是，当我的鼠标在框上移动得非常快和疯狂时，文本仍然存在（就像它被选中一样）。

我想要的是，当我将鼠标悬停时，文本会出现，如果我的鼠标不在，文本就会消失。

我的代码

```
function ShowEffect(element){
   new Effect.Appear(element, 
   {duration:0.3, from:0, to:1.0, queue: 'front'});
}
function HideEffect(element){
   new Effect.Appear(element, 
   {duration:0.2, from:1.0, to:0, queue: 'end'});
} 
```

分区

```
<div class="lefty" style="width: 90px; margin-right: 2px;">
                <div style="display: none;" id="clicker2text">ABOUT US</div>
                <div style="width: 90px;" onmouseover="ShowEffect('clicker2text')" onmouseout="HideEffect('clicker2text')"></div>
                </div> 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:17:25.237

不要使用`onmouseover`div 上的属性，而是使用这样的事件观察器

```
$$('.lefty').invoke('observe','mouseover',ShowEffect);
$$('.lefty').invoke('observe','mouseout',HideEffect); 
```

但我认为这会更好，因为您正在观察冒泡到身体的事件，然后如果是正确的元素则对其采取行动。

```
$$('body').first().observe('mouseover',function(e){
    if(e.findElement().hasClass('lefty'))
    {
        ShowEffect(e.findElement());
    }
    else
    {
        //trigger for all of the menus just to make sure the are hidden
        //instead of stuck on
        $$('.lefty').each(function(element){
            if(element.visible())
            {
                HideEffect();
            }
        });
    }
}); 
```

这应该会给你一些想法——看看它是否能解决你的问题。

# xcode - 网址下载链接图片无法在xcode中查看

> ID：15848025
> 
> 赞同：0
> 
> 时间：2013-04-06T06:55:37.430
> 
> 标签：xcode

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize NetImage;

@implementation PlayGameViewController
- (IBAction)imageView:(id)sender {
       //Content of image should be received. But it not show on ImageView.
        NSLog(@"\n Image == %@ ",[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.so.cityhi.com/cometchat/plugins/filetransfer/download.php?file=559192_10152684963740198_1083006183_n.jpg"]]);

        // NetImage is image View.
        NetImage.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.so.cityhi.com/cometchat/plugins/filetransfer/download.php?file=559192_10152684963740198_1083006183_n.jpg"]]];
        //It working good

        //NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://so.cityhi.com/public/user/52/0052_37ea.png"]];
        //[NetImage setImage:[UIImage imageWithData:data]];
        NSLog(@"Success");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:03:04.987

简单地说，如果我们想使用带有 URL 的图像。这里是简单的代码，正如你所做的那样很好。

```
NSString *ImageURL = @"YourURLHere";
NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:ImageURL]];
imageView.image = [UIImage imageWithData:imageData];
//imageView is Your UIImageView That you created in your .h file with IBOutlet 
```

但是当我使用你给定的图片网址时（[http://www.so.cityhi.com/cometchat/plugins/filetransfer/download.php?file=559192_10152684963740198_1083006183_n.jpg](http://www.so.cityhi.com/cometchat/plugins/filetransfer/download.php?file=559192_10152684963740198_1083006183_n.jpg)）

并在浏览器上请求然后图像没有显示这就是为什么它可能与您的图像有关的问题尝试另一个图像。

# java - Activity关闭时内存没有释放

> ID：15848027
> 
> 赞同：0
> 
> 时间：2013-04-06T06:55:48.913
> 
> 标签：java, android

我有一项主要活动。它以 Tab 启动另一个子活动。关闭子活动时，不会使用子选项卡释放内存。每次打开其他选项卡时，内存都会增加。

一段时间后，我的应用程序崩溃了：

```
public class Main extends Activity {

public static Activity activity;

private Bundle saveInstance;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    this.activity = this;

    this.saveInstance = savedInstanceState;

    Application app = Application.getSharedInstance();

    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.activity_main, menu);

    return true;
}

@Override
public void onBackPressed()
{
    // super.onBackPressed();
    AlertUtills.showQuitDialog(Main.this);
}

@Override
public boolean onOptionsItemSelected(MenuItem item)
{

    final TabHost tabHost = (TabHost) this
            .findViewById(android.R.id.tabhost);

    LocalActivityManager mLocalActivityManager = new LocalActivityManager(
            this, false);
    mLocalActivityManager.dispatchCreate(saveInstance);
    tabHost.setup(mLocalActivityManager);

    switch (item.getItemId())
    {

    case R.id.create_new:
    {
        if (CommonUtilities.isTabNotExist(tabHost, "NewProject"))
        {
            TabSpec spec2 = tabHost.newTabSpec("NewProject");

            Intent in = new Intent(this, Activity_cretateNew.class);
            in.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            spec2.setContent(in);
            spec2.setIndicator("New Project");
            tabHost.addTab(spec2);
            tabHost.setCurrentTabByTag("NewProject");
        }

        tabHost.setCurrentTabByTag("NewProject");

    }
        break;

    case R.id.open:
    {

        OpenDialog dialog = new OpenDialog(this, "Open Project", false,
                OpenDialogType.CORELOG_OPEN);
        dialog.Show();
    }
        break;

    case R.id.menu_exit:

        onBackPressed();

        break;

    case R.id.import_las:
    {
        if (isCurrentProjectExist())
        {
            if (CommonUtilities.isTabNotExist(tabHost, "ImportLas"))
            {
                TabSpec spec2 = tabHost.newTabSpec("ImportLas");
                Intent in = new Intent(this, LASImportWizard.class);
                spec2.setContent(in);
                spec2.setIndicator("Import Las");
                tabHost.addTab(spec2);
            }

            tabHost.setCurrentTabByTag("ImportLas");

        }
    }
        break;

    case R.id.import_coredata:
    {
        if (isCurrentProjectExist())
        {
            if (CommonUtilities.isTabNotExist(tabHost, "coredata"))
            {
                TabSpec spec2 = tabHost.newTabSpec("coredata");
                Intent in = new Intent(Main.this,
                        CoreDataImportWizard.class);
                spec2.setContent(in);
                spec2.setIndicator("Core Data Import");
                tabHost.addTab(spec2);
            }

            tabHost.setCurrentTabByTag("coredata");

        }
    }
        break;

    case R.id.list_Data:
    {
        if (isProjectHasWell())
        {
            if (CommonUtilities.isTabNotExist(tabHost, "ListData"))
            {
                TabSpec spec1 = tabHost.newTabSpec("ListData");
                Intent in = new Intent(Main.this, ListDataWindow.class);
                // in.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                spec1.setContent(in);
                spec1.setIndicator("List Data");
                tabHost.addTab(spec1);

            }

            tabHost.setCurrentTabByTag("ListData");

        }
    }
        break;

    case R.id.basemap:
    {
        if (isCurrentProjectExist())
        {
            if (CommonUtilities.isTabNotExist(tabHost, "BaseMap"))
            {
                TabSpec spec2 = tabHost.newTabSpec("BaseMap");
                Intent inBasemap = new Intent(Main.this, Basemap.class);
                spec2.setContent(inBasemap);
                spec2.setIndicator("Base Map");
                tabHost.addTab(spec2);

            }

            tabHost.setCurrentTabByTag("BaseMap");
        }
    }
        break;

    case R.id.logPlot:
    {
        if (isProjectHasWell())
        {
            if (CommonUtilities.isTabNotExist(tabHost, "LogPlot"))
            {
                TabSpec spec2 = tabHost.newTabSpec("LogPlot");
                Intent intentLogPlot = new Intent(Main.this,
                        Logplot_Activity.class);
                spec2.setContent(intentLogPlot);
                spec2.setIndicator("Log Plot");
                tabHost.addTab(spec2);
            }
            tabHost.setCurrentTabByTag("LogPlot");
        }
    }
        break;

    case R.id.show_hide_project_explorer:
    {
        FrameLayout frameLayout = (FrameLayout) activity
                .findViewById(R.id.explorerFrame);

        if (item.isChecked() == true)
        {
            item.setChecked(false);
            frameLayout.setVisibility(View.GONE);
        }
        else
        {
            item.setChecked(true);
            frameLayout.setVisibility(View.VISIBLE);
        }

        break;
    }

    }

    return true;
}

private boolean isCurrentProjectExist()
{
    return Application.getSharedInstance().getCurrentProject() == null ? false
            : true;
}

private boolean isProjectHasWell()
{
    return isCurrentProjectExist()
            && Application.getSharedInstance().getCurrentProject()
                    .getAllWells().length != 0 ? true : false;

}

public static Activity getMainActivity()
{
    return activity;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:05:09.783

运行 hprof 或其他类似的分析器。如果发生这种情况，您的选项卡活动的对象数量将会增加。查看哪些内容保留了对它们的引用，然后修复它们，使其不会。

没有那些 hprof 很难调试这种东西。

# iphone - 获取 iPhone 应用的当前环境

> ID：15848032
> 
> 赞同：2
> 
> 时间：2013-04-06T06:56:17.533
> 
> 标签：iphone, runtime, titanium-mobile, environment

我正在使用 Titanium Studio Alloy 开发一个 iPhone 应用程序。在 config.json 文件中，我看到有以下三个环境：

```
 "env:development": 
  {

  }, 
  "env:test": 
  {

  }, 
  "env:production": 
  {

  } 
```

有什么方法可以提醒当前环境，以便了解我的应用程序所处的环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:22:26.923

[`Ti.App.deployType`](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App-property-deployType)应该回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T10:04:47.753

实际上，我找到了一种方法。没有内置函数或属性来获取它。但是，我设置了一个变量 currentEnv 并将其值设置为环境名称。以下是供您参考的代码：

```
 "env:development": 
  {
      currentEnv: "Development"
  }, 
  "env:test": 
  {
      currentEnv: "Test"
  }, 
  "env:production": 
  {
      currentEnv: "Production"
  } 
```

现在我可以如下提醒它：

```
alert("The current environment is " + Alloy.CFG.currentEnv); 
```

希望它会帮助那里的人。

# codenameone - 代号一中的 HTML 代码

> ID：15848034
> 
> 赞同：0
> 
> 时间：2013-04-06T06:56:29.010
> 
> 标签：codenameone

我搜索代号为一个 API，发现那里有一个 HTMLElement、HTMLComponent 和 HTMLUtils 类，并且在 HTMLElemrent 下有 TAG_body 等字段...如果我没有错，我们可以编写 HTML 代码，如果我错了，请纠正我。此外，我想知道如何使用 HTMLElements 的 TAG 字段，我尝试创建它的对象，但可能没有以正确的方式进行。请告诉我实现这些类的正确方法，并分享这些类的核心目的。

问候，珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:44:34.057

你错了。

HTMLComponent 是在旧设备（黑莓、J2ME 设备）中使用的 HTML 查看器组件。此代码在现代设备中未使用。

您可以使用 Web 浏览器组件查看 HTML/WebContent，该组件会自动为您的平台选择最佳 Web 查看器。

# javascript - 如何验证文本框

> ID：15848035
> 
> 赞同：0
> 
> 时间：2013-04-06T06:56:29.587
> 
> 标签：javascript

我的程序有问题。我想要的是验证文本框是否等于我从数据库中获取的数据。如果相等，则设置焦点，否则文本框应为空，并且无法输入。这是我的示例代码。非常感谢任何帮助。谢谢你。

```
function sequence(varid) {

    var a = varid.indexOf("/")
    var b = varid.slice(0, a);
    b = parseInt(b)
    c = (b + 1)
    var f = varid.slice(a);

    if (window.event.keyCode == 13 || window.event.keyCode == 10) {

        var lot_number = document.getElementsByName("lot_number")[b].value;
        var lot_number_scan = document.getElementsByName("lot_number_scan")[b].value;

        var counting = document.getElementsByName("lot_number_scan");

        counting = counting.length;

        var newid = c + f
        if (c == counting) {
            document.getElementById("issued_by").focus();
        } else {
            lot_number_scan = lot_number_scan.replace(/(LO)/g, "-LO");
            lot_number_scan = lot_number_scan.replace(/-/, "");

            var check = (new RegExp(lot_number_scan, "gi").test(lot_number));

            if (check == true) {
                document.getElementById(newid).focus();
            } else {
                document.getElementsByName("lot_number_scan")[b].value = '';
                document.getElementsByName("lot_number_scan").focus();
            }

            document.getElementById(newid).focus();
        }
    }
}
</script> 
```

* * *

抱歉回复晚了..当我运行该代码时会发生什么，尽管输入的数据与其他数据不相等或不一样，但仍然输入对不起，如果我的解释不好，我会给出示例希望这可以提供帮助。

**数据来自数据库**      **Texbox**
123456828 123456828
152685689 123456828

保存按钮

**来自数据库**的数据只是我在过滤数据序列后发布的显示数据。 **文本框**我扫描条形码以输入数据。

如果文本框中输入的数据与显示数据匹配，它会自动进入第二个文本框并准备再次扫描我可以，我想要发生的是当输入的数据不匹配时不应该进入第二个文本框或保存按钮，当它输入错误的数据时，它应该自动删除错误输入的数据并要求正确的数据。希望你能理解我想要发生的事情我是编码和自学的新手，所以非常需要你的帮助，非常感谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:05:11.127

I think you can use jquery and in that case you can check it and set value in it with different jquery selectors.

For Example:

```
$('input[type=text][id="textfieldId"]').val('myValueToBeSet'); 
```

Hope this might help you.

# android - 为 simplecursoradapter 实现延迟加载

> ID：15848037
> 
> 赞同：1
> 
> 时间：2013-04-06T06:57:35.463
> 
> 标签：android, simplecursoradapter, custom-adapter

在这里，我从数据库中获取存储的图片路径。所以我在`gridview`路径的帮助下显示图像。`cursoradapter`但正如我在下面的代码中所示，我正在加载`asynctask`. 这里的问题是第一次加载所有图像需要一些时间是可以的。

但是，如果用户在数据库中再添加一张图片，则再次加载所有图片需要很长时间，因为我保留了`asynctask`onResume **()**以使添加的图片也可见。每当用户添加每张图片时，情况都是如此。有人可以建议我一种简单的方法来让最后添加的图片在 gridview 中可见，而无需再次加载所有图片。或者，如果不可能的话，至少有人可以帮助我为当前的 cursoradapter 实现惰性适配器吗？

```
 public class ImagesScreen extends Activity {
    public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.images_screen);
                    gridView = (GridView)findViewById(R.id.gridView1);
            String[] from = new String[] { Reminders.MOM_PATHS };
            int[] to = new int[] {};
            dbCon = new SQLiteConnectClass(ImagesScreen.this);

            imageCursorAdapter = new ImageCursorAdapter(ImagesScreen.this, R.layout.griditem, null, from, to);
            gridView.setAdapter(imageCursorAdapter);

        }

             protected void onResume() {
            super.onResume();
            new GetImages().execute((Object[]) null);
        }

       private class GetImages extends AsyncTask<Object, Object, Cursor> {

            @Override
            protected Cursor doInBackground(Object... params) {
                return dbCon.getAllImages();
            }

            @Override
            protected void onPostExecute(Cursor result) {
                imageAdapter.changeCursor(result);  
            }

public void addpictures(View view){
     // code for adding picture paths to the database by transferring to another activity.
}

        } 
```

**自定义适配器类：**

```
public class ImageCursorAdapter extends SimpleCursorAdapter{

        private int layout;
        private LayoutInflater mLayoutInflater;
        private Context mContext;

        public ImageAdapter(Context context, int layout, Cursor c,String[] from, int[] to) {
            super(context, layout, c, from, to,0);
            this.layout = layout;
            mLayoutInflater=LayoutInflater.from(context);
            mContext = context;
        }

        public View newView(Context context, Cursor cursor, ViewGroup parent) {     
            View v = mLayoutInflater.inflate(layout, parent, false);
            return v;
        }

        public void bindView(final View v, final Context context, Cursor c) {
            final int id = c.getInt(c.getColumnIndex("id"));
            final String imagepath = c.getString(c.getColumnIndex("paths"));

            ImageView imageview = (ImageView)v.findViewById(R.id.imageView1);

            File imgFile = new File(imagepath);
            if(imgFile.exists()){

                Bitmap imageBitmap = decodeFile(imgFile);
                imageview.setImageBitmap(imageBitmap);
            }

        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T07:54:19.200

使用此代码

```
public class Imagegallery extends Activity implements OnItemClickListener,
    OnScrollListener, OnTouchListener {
Button btn;

SQLiteDatabase sampleDB = null;
String SAMPLE_DB_NAME = "hic";

int size = 0;
TextView headertext;
Button cartbtn;

ImageView footer1, footer2, footer3, footer4, footer5;

GridView gridView;

boolean larg = false;
String products;
int j = 1;
int ii = 0;
String imagepath[];
String productname[];
int productid[] = new int[1000];

String productids[] = new String[1000];
int integerprodids[] = new int[1000];
final Context context = this;
String filename2[];

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.currentspecial);

    File root = new File(Environment.getExternalStorageDirectory()
            + File.separator + "aiwhic/product" + File.separator);
    File[] fileName = root.listFiles();
    filename2 = new String[fileName.length];
    for (int j = 0; j < fileName.length; j++) {
        Uri uri = Uri.fromFile(fileName[j]);
        filename2[j] = fileName[j].getAbsolutePath();

        Log.e("file", filename2[j]);
    }

    gridView = (GridView) findViewById(R.id.gridView1);

    gridView.setAdapter(new ImageAdapter(this, filename2, filename2));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            int isf = filename2[position].lastIndexOf("/");
            int laf = filename2[position].lastIndexOf(".");
            String filename = filename2[position].substring(isf + 1, laf);
            int pos = Integer.parseInt(filename);
            Intent go = new Intent(Imagegallery.this, ItemsPage.class);
            Bundle bundle = new Bundle();

            bundle.putInt("position", pos);
            bundle.putString("whichclass", "imagegallery");
            bundle.putInt("catid", 2);
            go.putExtras(bundle);
            startActivity(go);

        }
    });

}

public class ImageAdapter extends BaseAdapter {
    private Context context;
    private final String[] mobileValues;
    private final String[] mobileimages;

    public ImageAdapter(Context context, String[] mobileValues, String[] mo) {
        this.context = context;
        this.mobileValues = mobileValues;
        this.mobileimages = mo;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View gridView;

        if (convertView == null) {

            gridView = new View(context);

            gridView = inflater.inflate(R.layout.currentspeciallist, null);

            TextView textView = (TextView) gridView
                    .findViewById(R.id.textView1);
            textView.setText(mobileValues[position]);
            textView.setVisibility(View.INVISIBLE);
            ImageView imageView = (ImageView) gridView
                    .findViewById(R.id.imageView1);

            imageView.setTag(mobileimages[position]);
            new Loadimage().execute(imageView);
            // imageView.setImageBitmap(BitmapFactory
            // .decodeFile(mobileimages[position]));

        } else {
            gridView = (View) convertView;
        }

        return gridView;
    }

    public int getCount() {
        return mobileimages.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

}

class Loadimage extends AsyncTask<Object, Void, Bitmap> {

    private ImageView imv;
    private String path;

    @Override
    protected Bitmap doInBackground(Object... params) {

        imv = (ImageView) params[0];

        path = imv.getTag().toString();

        // Bitmap thumb = BitmapFactory.decodeFile(path);
        BitmapFactory.Options opts = new BitmapFactory.Options();

        opts.inSampleSize = 2; // for 1/2 the image to be loaded
        Bitmap thumb = Bitmap.createScaledBitmap(
                BitmapFactory.decodeFile(path, opts), 120, 120, false);

        return thumb;

    }

    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (!imv.getTag().toString().equals(path)) {
            /*
             * The path is not same. This means that this image view is
             * handled by some other async task. We don't do anything and
             * return.
             */
            return;
        }

        if (bitmap != null && imv != null) {
            imv.setVisibility(View.VISIBLE);
            imv.setImageBitmap(bitmap);
        } else {
            imv.setVisibility(View.GONE);
        }
    }

}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

} 
```

然后创建一个xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" >
    </ImageView>
</RelativeLayout> 
```

我直接获取文件路径。你只需从 sqlite 获取名称并传递数组字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:44:22.053

使用[Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) 并设置

```
ImageView imageview = (ImageView)v.findViewById(R.id.imageView1);

     File imgFile = new File(imagepath);
         if(imgFile.exists()){
               imageLoader.displayImage(imageUri(ur file path), imageView);
                } 
```

# grails - stacktrace.log 文件太大

> ID：15848039
> 
> 赞同：4
> 
> 时间：2013-04-06T06:58:07.800
> 
> 标签：grails

在我的项目的目标目录中，有一个名为 stacktrace.log 的文件。我已经意识到文件的大小已经超过 3 GB。删除这个文件对我来说安全吗？删除后是否会导致任何文件未找到异常？谢谢你的时间。

- -编辑

如果确实导致找不到文件异常，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T08:48:58.880

`stacktrace.log`是 Grails 写入应用程序抛出的异常的未过滤堆栈跟踪的默认位置（对于正常日志记录，它会过滤掉“内部”groovy 机制的堆栈帧，但有时它可能过于激进，因此有完整的可用跟踪很方便）。您可以安全地删除它，下次应用启动时它将重新创建为空。

您可以在[DSL`log4j`中](http://grails.org/doc/latest/guide/conf.html#logging)的`Config.groovy`块下进行`appenders`控制。默认行为相当于一个 appender 定义

```
file name:'stacktrace', file:'stacktrace.log` 
```

在 prod 模式和`file:'target/stacktrace.log'`dev 模式下，您可以将其替换为例如

```
rollingFile name:'stacktrace', file:'stacktrace.log',
    maxFileSize:'5MB', maxBackupIndex:2 
```

将其限制为 15MB（活动文件加上最多两个翻转备份）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:02:15.603

I guess that is just an log file,If you delete it,the later log will be missing.altough it depends on what logging framwork you are using.

Suggest you to use [logback](http://logback.qos.ch/) to rolling the log.It can avoid the log to be to Fat.

# javascript - html5 input element "date" - how to show calendar element

> ID：15848044
> 
> 赞同：3
> 
> 时间：2013-04-06T06:58:42.937
> 
> 标签：javascript, jquery, input, datepicker

I have a calendar picker working using jqueryUI but wanted to try to convert it to the native date picker.

i'd like to be able to have the following:

1.  start with the "< input id="nativedate" type="date"/>" element being hidden from the view.
2.  when the main page element is clicked, have the < input > element show, **with the calendar opened**
3.  when the user selecs a date on the calendar, the element is hidden.

Right now when i get to step 2, the < input > item is showing but with the calendar hidden, so the user must click to have the element appear and then click again to have the calendar show and then a third click to select the date.

EDIT: I've tried the following:

```
$('#nativedate').click(function(){
    console.log('click logged');
}) 
```

and then in another method:

`$(#nativedate).trigger('click');`

which works in terms of my event handler i've set up, but it **does not** open the calendar

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-06T07:09:30.190

## 一些问题：

* * *

i) 浏览器的本机日期时间元素是正在打开还是您的日历在输入 decleration 时打开？
ii）如果您的项目在一段时间后没有显示，那么尝试一些 javascript 来强制它在该特定输入标签附近保持打开状态？

## 这些可能会有所帮助

* * *

[在 Google Chrome 中禁用本机日期选择器](https://stackoverflow.com/questions/11320615/disable-browser-native-datepicker)
[从 Google Chrome v20 中的日期输入中删除背景箭头](https://stackoverflow.com/questions/11418289/remove-background-arrow-from-date-input-in-google-chrome-v20/11418704#11418704)

* * *

或尝试 Google 搜索，或者您可以使用 CSS 编辑浏览器本机日期时间选择器。

# android - 无法在 TableRow 内的 ImageView 中动态设置图像

> ID：15848045
> 
> 赞同：2
> 
> 时间：2013-04-06T06:58:53.407
> 
> 标签：android, camera, imageview, tablerow

我有这个LinearLayout，里面有一个按钮和一个TableLayout，到目前为止还没有行，我会动态添加它们。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/btn_select" />

<TableLayout
    android:id="@+id/tablay"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</TableLayout> 
```

单击按钮时，我希望打开相机并单击图像以设置在新表行内的 ImageView 上。现在这里是java代码片段。

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    button = (Button) findViewById(R.id.button1);
    tableLayout = (TableLayout) findViewById(R.id.tablay);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(intent, 0);
        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    bitmap = (Bitmap) data.getExtras().get("data");
    tableRow = new TableRow(this);
    tableRow.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
            LayoutParams.WRAP_CONTENT));
    imageView = new ImageView(this);
    imageView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
            LayoutParams.WRAP_CONTENT));
    imageView.setImageBitmap(bitmap);
    tableRow.addView(imageView);
    tableLayout.addView(tableRow);
} 
```

一切正常，但图像没有显示在屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:05:32.103

**编辑：**

```
tableRow = new TableRow(this);
 imageView = new ImageView(this);

tableRow.addView(imageView,new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT,
            TableRow.LayoutParams.WRAP_CONTENT)); 
```

* * *

像这样设置参数，因为表格行只接受 TableRow 类型的参数

```
 tableRow.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT,
            TableRow.LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:20:02.870

在 main.xml 文件中，

```
 <TableRow
            android:id="@+id/infoRow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

            <TextView
                    android:text="Loading Content"
                    android:id="@+id/loadingMessage"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content">
            </TextView>
            <Button
                android:id="@+id/insert"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dp"
                android:text="Add New" />
    </TableRow> 
```

例如：说 testItem.java

```
public class testItem extends Activity
{
    private List<String> results = new ArrayList<String>(); // Please add values to this string list.

/** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle bundle)
    {
        super.onCreate(bundle);
        setContentView(R.layout.main);
        int count=results.size();
        TableLayout tl=(TableLayout)findViewById(R.id.mainLayout);
                          for(int i=0;i<count;i++)
                          {
                              final String str=results.get(i);
                              TableRow tr = new TableRow(this);
                              tr.setLayoutParams(new LayoutParams( LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                              TextView textview = new TextView(this);
                              textview.setText(str);
                              tr.addView(textview);
                              Button buttn = new Button(this);
                              buttn.setText("DELETE");
                              buttn.setTextColor(Color.BLUE);
                              tr.addView(buttn);
                              tl.addView(tr, new TableLayout.LayoutParams(
                                      LayoutParams.FILL_PARENT,
                                     LayoutParams.WRAP_CONTENT));
                        }

        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-11T13:11:19.727

消除`imageView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));`

改变`tableRow.addView(imageView);`

到

`tableRow.addView(imageView,100,150);`（新的宽度和高度）

# ruby-on-rails - 如何在我的 Rails 3 代码中使用此类方法？

> ID：15848048
> 
> 赞同：1
> 
> 时间：2013-04-06T06:59:33.157
> 
> 标签：ruby-on-rails, ruby

我真的希望今晚能解决这个问题，所以任何帮助都会很棒。

我将这个类方法添加到我的 post.rb 模型中

```
 def self.without_review
    where(review: false)
  end 
```

我要做的只是显示网站上所有评论 = false 的帖子。如果 review=true，我想在它们显示之前手动批准它们。现在，无论评论是真是假，所有帖子都会显示出来。

这是我的后控制器

```
class PostsController < ApplicationController
  before_filter :signed_in_user
  before_filter :load_post, only: :destroy

    def create
    @post = current_user.posts.build(params[:post])
    if @post.save
      flash[:success] = "Shared!"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end

  def destroy
    @post.destroy
    redirect_to root_path
  end

  private

    def correct_user
      @post = current_user.posts.find_by_id(params[:id])
      redirect_to root_path if @post.nil?
    end

    def load_post
      @post = current_user.admin? ? Post.find(params[:id]) : current_user.posts.find(params[:id])
    end

end 
```

这是完整的 post.rb 模型

```
class Post < ActiveRecord::Base
  attr_accessible :content, :review
  belongs_to :user
  validates :user_id, presence: true
  validates :content, presence: true

  default_scope order: 'posts.created_at DESC'

      def self.without_review
    where(review: false)
  end

end 
```

显示如何设置“评论”的帖子表的架构（最后一行）

```
create_table "posts", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.datetime "created_at",                         :null => false
    t.datetime "updated_at",                         :null => false
    t.boolean  "review",          :default => false 
```

静态页面控制器

```
class StaticPagesController < ApplicationController
  def home
    if signed_in?
      @post = current_user.posts.build
      @feed_items = current_user.feed.paginate(page: params[:page])
    end
  end

  def post1
    if signed_in?
      @post = current_user.posts.build
    end
  end

end 
```

用户控制器（默认显示）

```
def show
@user = User.find(params[:id])
@posts = @user.posts.paginate page: params[:page], :per_page => 15
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:05:57.957

您没有显示生成实际帖子列表的控制器/操作，但我想您必须在那里`Post.all`替换`Post.without_review`。

# android - 两个基本相同的项目的Release Management怎么处理？

> ID：15848049
> 
> 赞同：0
> 
> 时间：2013-04-06T06:59:40.083
> 
> 标签：android, release-management

我想这更像是一个基本问题。我目前在市场上有一个应用程序，我在两个项目中分开。一个项目（显然是唯一的包名称）没有 Google Ads 并且不是免费的。另一个项目有 Google Ads，而且是免费的。

这两个项目完全相同。相同的功能。

当我想添加一个新功能时，我必须同时处理这两个项目，从而使我的应用程序的发布速度变慢，因为我基本上是 control-c/control-v 我在一个项目中所做的事情。有时我只是忘记了一些事情，所以我必须解决问题......

所以，基本上，我想知道是否有更好的方法来管理它？

也许创建一个相当智能的脚本，它将根据我想要的构建应用程序（即：如果它是基于广告的版本，应该使用`AndroidManifest`声明`AdMob`Activity 的）

或者也许创建一个库？但我认为这种方法行不通。

期待输入。

问候，

费利佩卡尔达斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:04:59.540

是的，图书馆项目正是您想要的。将所有功能放在一个库中，并为每个调用该库的应用程序类型提供两个非常薄的外壳。正如您所注意到的，复制代码很容易出错，充其量只是您不应该做的额外工作。

有关详细信息，请参阅：[管理项目](http://developer.android.com/tools/projects/index.html)。该页面甚至提到了您的确切情况：

> 如果您正在创建一个同时存在免费和付费版本的应用程序。您将两个版本共有的应用程序部分移动到库项目中。两个依赖项目，具有不同的包名称，将引用库项目并仅提供两个应用程序版本之间的差异。

# javascript - number = parseInt(number); 需要从 rel 属性中生成非数字

> ID：15848053
> 
> 赞同：1
> 
> 时间：2013-04-06T07:00:26.417
> 
> 标签：javascript, jquery, html

需要将图片id设为数字

```
var number = $(this).attr('rel');
    number = parseInt(number);
    $('#carousel .slides li:nth-child(' + (number + 1) + ')').click();
    $('#carousel').flexslider({ 
```

我的意思是替换 number = parseInt(number); 到图像的 id

文本

```
<article class="col img_prev2">
  <img src="img/slideshow/slideshow2.jpg" alt="#img2" rel="1" class="thumb_main_page">
   <h5>Text</h5>
</article> 
```

在 rel 属性上方从 0 （ rel="0" ）开始，所以我需要将其设置为例如 slideshow1.jpg instated "0" 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:50:15.033

不知道要求什么，但这是？：

```
var count = 0;
$("img").each(function(){
   //start 0, then 1, then 2..
   $(this).attr("rel",count++); 
}); 
```

[http://jsfiddle.net/jA8CW/](http://jsfiddle.net/jA8CW/)

# c# - GridView 行未更新，gridview 编辑模板中文本框的文本未出现

> ID：15848059
> 
> 赞同：0
> 
> 时间：2013-04-06T07:01:01.190
> 
> 标签：c#, asp.net

我有网格视图，我想在其中更新行，但它没有发生。数据源是一个 DataTable。请帮忙。

下面是标记

```
<asp:GridView ID="GrdV" runat="server" AutoGenerateColumns="false"   
   OnRowEditing="GrdV_RowEditing"  OnRowUpdating="GrdV_RowUpdating">

 <Columns>
   <asp:TemplateField HeaderText="Clip Description">
        <ItemTemplate>
            <asp:Label ID="lblDescrptn" runat="server" Text='<%# Bind("Description") %>'>
            </asp:Label>
        </ItemTemplate>
        <EditItemTemplate>
            <asp:TextBox ID="descTbx" runat="server" Text='<%# Bind("Description") %>'>
            </asp:TextBox>
        </EditItemTemplate>
    </asp:TemplateField>

   <asp:CommandField ShowEditButton="True" />

 </Columns> 
```

这是后面的代码

```
 protected void GrdV_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {

        // Retrieve the row being edited.
      int index = GrdV.EditIndex;
        GridViewRow row = GrdV.Rows[index];           
        TextBox t1 = row.FindControl("descTbx") as TextBox;

        DataTable dt = (DataTable)Session["tmdataTable"];

        dt.Rows[index]["Description"] = t1.Text; //Description is a column of my DataTable
        dt.AcceptChanges();
        GrdV.EditIndex = -1;
        GrdV.DataSource = dt;
        GrdV.DataBind();

    } 
```

在调试时，我发现文本框正在传递空字符串`t1.Text =""`，即使我已经用新值填充了文本框。我认为错误是一致的

```
TextBox t1 = row.FindControl("descTbx") as TextBox; 
```

页面加载代码

```
 protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
            GrdV.DataSource = Session["tmdataTable"];
            GrdV.DataBind();
        }

        DataTable Finaldt = getTable();

        GrdV.DataSource = Finaldt;
        GrdV.DataBind();
        Session["tmdataTable"] = Finaldt;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:30:06.310

`EditIndex`不可用，您需要来自`GridViewUpdateEventArgs`

```
// Retrieve the row being edited.
DataTable dt = (DataTable)Session["tmdataTable"];
GridViewRow row = GrdV.Rows[e.RowIndex];
TextBox t1 = row.FindControl("descTbx") as TextBox;

dt.Rows[row.DataItemIndex]["Description"] = t1.Text; //Description is a column of my DataTable
dt.AcceptChanges();
GrdV.EditIndex = -1;
GrdV.DataSource = dt;
GrdV.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:17:59.110

```
 protected void GrdV_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
         if (e.Item is GridDataItem)
        {
        // Retrieve the row being edited.
      int index = GrdV.EditIndex;
        GridViewRow row = GrdV.Rows[index];           
        TextBox t1 = row.FindControl("descTbx") as TextBox;

        DataTable dt = (DataTable)Session["tmdataTable"];

        dt.Rows[index]["Description"] = t1.Text; //Description is a column of my DataTable
        dt.AcceptChanges();
        GrdV.EditIndex = -1;
        GrdV.DataSource = dt;
        GrdV.DataBind();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:28:00.640

稍微更改您的代码并检查。更改`EditIndex`为`e.RowIndex`

```
protected void GrdV_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = GrdV.Rows[e.RowIndex]; // this line is changed      
    TextBox t1 = row.FindControl("descTbx") as TextBox;

    DataTable dt = (DataTable)Session["tmdataTable"];

    dt.Rows[row.DataItemIndex]["Description"] = t1.Text; //Description is a column of my DataTable
    dt.AcceptChanges();
    GrdV.EditIndex = -1;
    GrdV.DataSource = dt;
    GrdV.DataBind();
} 
```

你有没有这样做：

```
protected void Page_Load(object sender, EventArgs e)
{     
    if(!IsPostBack)
    {
        GrdV.DataSource = Session["tmdataTable"];
        GrdV.DataBind();
    }
} 
```

# c# - How to Fill DataGridViewComboBoxColumn in DataGridView in c#

> ID：15848076
> 
> 赞同：0
> 
> 时间：2013-04-06T07:04:03.763
> 
> 标签：c#, data-binding, datagridview, datagridviewcomboboxcell

I am able to Fill data in **DataGridViewComboBoxColumn** on **Form_Load Event** there is any best **Event** to fill data in DataGridViewComboBoxColumn. i posted my coding. because i.e.., the way i fill the DataGridViewComboBoxColumn on form load. on FormLoad i written this code. i am getting data from that "dtcnsmbl"(my DataTable) and **cnsmNm** is my **DataGridViewComboBoxColumn** Name. i am assining DisplayMember and ValueMember properties to that one.

```
dtCnsmbl = prchasecls.RtrvcnsmrData();
            cnsmNm.DataSource = dtCnsmbl;
            cnsmNm.DisplayMember = dtCnsmbl.Columns["cnsm_Name"].ToString();
            cnsmNm.ValueMember = dtCnsmbl.Columns["cnsm_Id"].ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:52:52.537

你的问题有点令人困惑（我根本没有看到问题），但如果我猜对了，那么你的分配`.DisplayMember`和`.ValueMember`错误

而不是分配列的值，您需要告诉列名`.DisplayMember`和列名`.ValueMember`。

列名必须来自您的数据表，用作`.DataSource`

```
dtCnsmbl = prchasecls.RtrvcnsmrData();
cnsmNm.DataSource = dtCnsmbl;
cnsmNm.DisplayMember = "cnsm_Name";
cnsmNm.ValueMember = "cnsm_Id"; 
```

# android - setting checked state for radio button inside custom list view

> ID：15848083
> 
> 赞同：0
> 
> 时间：2013-04-06T07:04:31.420
> 
> 标签：android, android-listview, radio-button, onitemclicklistener

I have a custom list view populated with radio button and text views. I have implemented onListItemClick listener for listview. My problem is i want to check the radio button on clicking an row in list view , but all rows radio button state changes to true. I am unable to figure out reason onListItem Listener snippets

```
 listView.setOnItemClickListener(new OnItemClickListener() 
            {
                @Override
                public void onItemClick(AdapterView<?> arg0, View rowView,
                        int pos, long id) 
                {
                    rbChgPlan = (RadioButton) rowView.findViewById(R.id.radioButton);
                    rbChgPlan.setChecked(true);
                    planId= newPlans.get(pos).plan_id;

                    adapter.notifyDataSetChanged();
                }
            }); 
```

pls providesuggestions

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:14:37.517

尝试覆盖适配器的 getview 方法。

```
public View getView(final int position, View convertView, final ViewGroup parent) {
    View v = convertView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.masterlist, null);
    }
    rbChgPlan  = (RadioButton) v.findViewById(R.id.ckbox1);
    rbChgPlan.setChecked(true);
});
return v;
} 
```

# c++ - 如何从 QTableWidget 中删除所有行

> ID：15848086
> 
> 赞同：48
> 
> 时间：2013-04-06T07:04:41.017
> 
> 标签：c++, qt, qtablewidget

我正在尝试从[QTableWidget](http://doc.qt.io/qt-4.8/qtablewidget.html)中删除所有行。这是我尝试过的。

```
for ( int i = 0; i < mTestTable->rowCount(); ++i )
{
    mTestTable->removeRow(i);
} 
```

我的桌子上有两行。但这只是删除了一行。一个原因可能是我没有创建具有固定表大小的表。[rowCount()](http://doc.qt.io/qt-4.8/qtablewidget.html#rowCount-prop)的 Qt 文档说，

> 此属性保存表中的行数。
> 
> 默认情况下，对于没有行数和列数的表，此属性包含值 0。

那么如果是这种情况，从表中删除所有行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-04-06T10:33:17.450

只需将行数设置为 0：

```
mTestTable->setRowCount(0); 
```

如您在内部模型代码中所见，它将`QTableWidgetItem`通过调用自动删除 s ：`removeRows``QTableWidget`

```
void QTableModel::setRowCount(int rows)
{
    int rc = verticalHeaderItems.count();
    if (rows < 0 || rc == rows)
        return;
    if (rc < rows)
        insertRows(qMax(rc, 0), rows - rc);
    else
        removeRows(qMax(rows, 0), rc - rows);
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-06T07:06:37.680

我不知道`QTableWidget`，但您的代码似乎存在逻辑缺陷。你忘记了当你在循环中你正在减少 的值`mTestTable->rowCount()`。删除一行后，`i`将是一，`mTestTable->rowCount()`也将是一，因此您的循环停止。

我会这样做

```
while (mTestTable->rowCount() > 0)
{
    mTestTable->removeRow(0);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-04-03T11:37:39.480

AFAIK`setRowCount(0)`什么也没删除。物体仍然存在，但不再可见。

```
yourtable->model()->removeRows(0, yourtable->rowCount()); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-10-16T17:14:38.753

```
QTableWidget test;
test.clear();
test.setRowCount( 0); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-28T09:45:21.943

删除行的简单方法是将行数设置为零。这在内部使用 removeRows() 。

```
table->setRowCount(0); 
```

您还可以清除内容，然后删除所有行。

```
table->clearContents();
table->model()->removeRows(0, table->rowCount()); 
```

两个片段都保持标题不变！

如果您也需要摆脱标题，您可以从 切换`clearContents()`到`clear()`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-22T13:26:38.270

为了防止应用崩溃，请断开 QTableView 的所有信号。

```
// Deselects all selected items
ui->tableWidget->clearSelection();

// Disconnect all signals from table widget ! important !
ui->tableWidget->disconnect();

// Remove all items
ui->tableWidget->clearContents();

// Set row count to 0 (remove rows)
ui->tableWidget->setRowCount(0); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-06T07:13:55.383

看这篇文章：http: [//forum.qt.io/topic/1715/qtablewidget-how-to-delete-a-row](http://forum.qt.io/topic/1715/qtablewidget-how-to-delete-a-row)

```
QList<QTableWidgetItem*> items = table.findItems(.....);
QMap<int, int> rowsMap;
for(int i = 0; i < items.count(); i++{
  rowsMap[items.at(i).row()] = -1; //garbage value
}
QList<int> rowsList = rowsMap.uniqueKeys();
qSort(rowsList);

//Now go through your table and delete rows in descending order as content would shift up and hence cannot do it in ascending order with ease.
for(int i = rowList.count() - 1; i >= 0; i--){
  table.removeRow(rowList.at(i));
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-27T14:10:10.207

您可以将空项目模型 (QStandardItemModel) 添加到 QTableView (myTableView)：

```
itemModel = new QStandardItemModel;
ui->myTableView->setModel(itemModel); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-06T07:13:29.420

您的代码不会删除最后一行。

试试这个。

```
int totalRow = mTestTable->rowCount();
for ( int i = 0; i < totalRow ; ++i )
{
       mTestTable->removeRow(i);
} 
```

在您的代码中，第一次具有is的`rowCount()`值`2`和值，因此它的 delete st 行，`i``0``1`

但是在第二次以`i`递增的值时`1`，`rowCount()`返回更新后的行数，现在为 1，因此，它不会删除最后一行。

希望现在你会清楚。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-01T08:01:35.730

从视图中删除所有不在标题中的项目。这也将删除所有选择。表格尺寸保持不变。

```
void QTableWidget::clearContents() 
```

删除视图中的所有项目。这也将删除所有选择和标题。

```
void QTableWidget::clear() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-13T08:37:56.740

这对我有用：

```
for i in reversed(range(self.tableWidget.rowCount())):
    self.tableWidget.removeRow(i) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-02T06:37:17.803

`python`您可以将 rowCount 设置为零，这样就可以了！

```
tableWidget.setRowCount(0) 
```

此代码使用 PySide6 进行测试。希望它也适用于 PyQt5 和 PyQt6。

# c# - MSBuild 程序集锁

> ID：15848101
> 
> 赞同：4
> 
> 时间：2013-04-06T07:06:29.887
> 
> 标签：c#, visual-studio, msbuild, xna

我有一个自定义 MSBuild 任务（位于程序集 A 中）来构建自定义项目类型（我们称之为“TestAppContent”）。“A”引用当前正在开发的另一个程序集“B”。

为了测试“B”，我使用了一个测试程序 TestApp。TestApp 依赖于使用我们的自定义任务构建的 TestAppContent。

问题是在加载任务后，“B”程序集被 MSBuild 或 VisualStudio 进程锁定，因为包含任务（“A”）的程序集对它有引用。

由于我不能简单地“卸载”程序集并且使用单独的 AppDomain 不起作用，我该如何停止这个锁？

我知道 Microsoft XNA 可以做到这一点，因为您可以为构建过程提供自定义程序集，并且它们会在构建过程之后发布，因此您可以重新构建这些自定义程序集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:57:22.203

唯一的方法是使用 AppDomain 并在其上激活 Shadow Copy。我认为您无法在当前 AppDomain 上激活卷影副本，但您可以尝试（请参阅[此处的](https://stackoverflow.com/questions/1373199/can-i-make-the-default-appdomain-use-shadow-copies-of-certain-assemblies)问题）

或者您可以手动将 dll 复制到其他地方并加载它（以编程方式），这样原始 dll 将不会被加载并保持解锁状态。但是你不能两次加载同一个 dll ......所以如果你想卸载和加载一个新版本（或者你重新启动你的程序），你需要一个单独的 AppDomain

编辑：您还可以使用 AppDomain.CurrentDomain.AssemblyResolve 在您的程序尝试加载 dll 时进行拦截。在那里，您可以将其复制到其他地方并加载此副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T19:15:59.323

我认为它对您没有太大帮助，因为您试图自动实现它，但我发现实现此目的的一种手动方法是使用 sysinternals [ProcessExplorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)使用 dll 终止特定进程。但是杀死似乎并没有伤害VS2013，这使得这是一种无需重新启动MSVS的解决方法。

![](https://i.imgur.com/Z5N9Tfm.png) ![](https://i.imgur.com/nHHMewu.png)

在这种情况下，我的 Visual Studio 进程实例化了一个 MSBuild 实例，该实例之前创建了 DesignLibrary 程序集 - 现在被锁定，SomeLibrary 项目仅在构建中使用该实例。此时，如果不终止持有锁的 MSBuild 任务，就无法重建 DesignLibrary 程序集。

![](https://i.imgur.com/6oKy9Ue.png)

如果 MSBuild.exe 尝试重建自己创建的文件，或者可能是 Visual Studio 干预这种混乱情况，我希望在构建期间检查 MSBuild.exe。只是另一个想法：也许可以检查进程树并自动终止进程，就像我手动做的那样。一个非常hacky的解决方法；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-28T22:05:32.747

我通常解决这个问题的一种方法是有两种解决方案。第一个构建任务，然后当我按 F5 时，我将其连接到启动`devenv.exe`以加载第二个 .sln。

第二个解决方案使用第一个构建的任务，导致它被加载到第二个 devenv.exe 进程中。当您停止调试时，第二个 Visual Studio 将关闭，并且带有构建任务的程序集将被释放。

# perl - 获取 Perl 中所有具有相似命名模式的目录的名称

> ID：15848102
> 
> 赞同：1
> 
> 时间：2013-04-06T07:06:36.960
> 
> 标签：perl, unix

我有一个目录“logs”，其中包含“A1”、“A2”、“A3”、“B1”、“B2”、“B3”等子目录。

我想编写一个 perl 代码来搜索名称模式为“A”的所有子目录，即所有从字符 A 开始的目录名称。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:43:21.277

使用 Perl 核心模块[File::Find](http://search.cpan.org/perldoc?File%3a%3aFind)：

```
use strict;
use warnings;
use File::Find;

#Find in 'logs' directory, assume the script is executed at this folder level

find(\&wanted, 'logs');

sub wanted { 
    #Subroutine called for every file / folder founded ($_ has the name of the current)
    if(-d and /^A/ ) {
       print $_, "\n"; 
    }
} 
```

**更新：** 如果你想参数化前缀，你可以这样做：

```
use strict;
use warnings;
use File::Find;

my $prefix = 'B';

find(\&wanted, 'logs');
sub wanted { 
    if(-d and /^$prefix/ ) {
       print $_, "\n"; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:50:47.557

`File::Find`简单地搜索目录是过大的。`opendir`/`readdir`还是有目的的！

该程序`chdir`对指定目录执行 a 操作，因此无需从`readdir`.

要搜索的目录和所需的前缀可以作为命令行参数传递`logs`，`A`如果没有提供，则默认为。

```
use strict;  
use warnings;
use autodie;

my ($dir, $prefix) = @ARGV ? @ARGV : qw/ logs A /;
chdir $dir;

my @wanted = do {
  opendir(my $dh, '.');
  grep { -d and /^\Q$prefix/ } readdir $dh;
};

print "$_\n" for @wanted; 
```

# javascript - Nested conditional statements for flowplayer

> ID：15848114
> 
> 赞同：1
> 
> 时间：2013-04-06T07:08:49.207
> 
> 标签：javascript, html

Why doesn't the below mentioned code work?

```
<script>
flowplayer("player", "flowplayer-3.2.8.swf", {
    onLoad: function() { 
        this.setVolume(100); 
    },
    clip: {   
        autoBuffering: true,  
    },
var screenwidth = screen.width;
var screenheight = screen.height;
if (screenwidth / screenheight < 1.34) {
    <!--[if IE]>
         <plugins: {
     controls: null
     }/>
    <![endif]-->
    <!--[if !IE]><!-->
         <plugins: {
     controls: true
     }/>
    <!--<![endif]-->
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:23:25.170

```
 flowplayer("player", "flowplayer-3.2.8.swf", {

        onLoad: function() { 
            this.setVolume(100); 
        },
        clip: {   
            autoBuffering: true,
    url: video_path  
        },

here video_path is the path of your video 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:10:05.950

谢谢你的评论，多洛尔斯。我已经在我的项目文件中添加了 flowplayer，但没有像我认为的那样在此处包含它。这就是我的标题中出现的内容；

```
<script src="http://www.dyslexiaservices.com.au/new/flowplayer-3.2.8.min.js"></script> 
```

如果您删除“剪辑”下方的所有内容，无论有没有视频路径，代码都可以正常工作（我都尝试过）。问题似乎与条件 IE 语句有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T10:16:20.113

你可以试试这个：

```
 <?php
   echo '<a href="'.{VIDEO PATH HERE}.'" style="display:block;width:631px;height:361px" id="player">  </a>';
   echo '<script>
          flowplayer("player", "http://releases.flowplayer.org/swf/flowplayer-3.2.15.swf", {  
             \'plugins\': {
             \'sharing\': {
             \'url\': \'http://releases.flowplayer.org/swf/flowplayer.sharing-3.2.10.swf\',

             \'buttons\': {
             \'overColor\': \'#ff0000\'
         },
         \'email\': {
             \'subject\': \'A cool video\'
         },
         \'embed\': {
             \'fallbackUrls\': [ \'Extremists.mov\' ]
         },

         \'facebook\': {
             \'shareWindow\': \'_popup\'
         },

         \'twitter\': true
         },
         \'dock\': {
             \'right\': 15,
             \'horizontal\': false,
             \'width\': \'10%\',
             \'autoHide\': false
         }
      },
      clip:  {
         autoPlay: false,
         autoBuffering: true
      }
   });
  </script>';
 ?> 
```

# javascript - JavaScript Math.sin 和 Math.cos 返回错误值

> ID：15848115
> 
> 赞同：1
> 
> 时间：2013-04-06T07:08:55.783
> 
> 标签：javascript, math

我正在开发一个简单的应用程序来帮助我的数学老师教授三角学。该应用程序只不过是一个角度不断旋转的圆圈，并显示了正弦和余弦的变化。简单得要命。

这是我到目前为止所拥有的：

![在此处输入图像描述](https://i.stack.imgur.com/V0bTL.png)

这就是我想要实现的

![在此处输入图像描述](https://i.stack.imgur.com/70PMq.png)

（注意代表 cos 的绿色部分）。

一切都是通过 CSS 构建的。我需要计算绿色三角形的高度和宽度，以便显示它，我认为它就像计算 sin 和 cos 一样简单，只需将其乘以 200（我的圆半径以 px 为单位）。但是由于某种原因，js 给了我不准确的 sin 和 cos 值。例如，如果我的角度为 0（cos：1，sen：0），它会给出正确的值。但是如果我使用像 90 这样的角度，它将不会返回正确的值，如下面的屏幕截图所示：

![在此处输入图像描述](https://i.stack.imgur.com/NzCo4.png)

这是我到目前为止的代码（为了便于阅读而减少了）

```
function trig()
{
    [...]
    this.radianMultiplier = Math.PI / 180;

    this.setDegree = function(degree)
    {
        [...]

        $('#h').html( Math.sin(degree * this.radianMultiplier) );
        $('#w').html( Math.cos(degree * this.radianMultiplier) );
    }
} 
```

对可能发生的事情有任何想法吗？

# javascript - 尝试将我的 Node.js 应用程序推送到 Heroku，错误：ENOENT 与玉 npm

> ID：15848119
> 
> 赞同：2
> 
> 时间：2013-04-06T07:09:40.650
> 
> 标签：javascript, git, node.js, heroku

正如标题所说，我正在尝试将我的应用程序推送到 Heroku，但我不断收到以下错误：

```
291 error Error: ENOENT, chmod '/tmp/build_htb3av307zzc/node_modules/jade/bin/jade'
292 error If you need help, you may report this log at:
292 error     <http://github.com/isaacs/npm/issues>
292 error or email it to:
292 error     <npm-@googlegroups.com>
293 error System Linux 2.6.32-350-ec2
294 error command "/tmp/node-node-lBSf/bin/node" "/tmp/node-npm-vbZC/cli.js" "rebuild"
295 error cwd /tmp/build_htb3av307zzc
296 error node -v v0.10.2
297 error npm -v 1.2.15
298 error path /tmp/build_htb3av307zzc/node_modules/jade/bin/jade
299 error code ENOENT
300 error errno 34
301 verbose exit [ 34, true ] 
```

我的 package.json 如下：

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app.js"
  },
  "dependencies": {
    "express": "3.1.1",
    "jade": "*",
    "mongojs": "*",
    "less": "*",
    "crypto": "*"
  },
  "engines": {
    "node": "0.10.2",
    "npm": "1.2.15"
  }
} 
```

我一直在谷歌搜索和阅读错误：ENOENT with jam，所有答案似乎只是说，从.gitignore中删除/bin/tmp，遗憾的是，这并没有解决我的问题，我转向你们帮助，将不胜感激我即将扔掉我的显示器:)谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-20T08:21:10.623

我遇到了同样的问题，这是由 bin/ 在您的 .gitignore 文件中引起的。当您推送到 heroku 时，找不到文件“/tmp/build_htb3av307zzc/node_modules/jade/bin/jade”，因为它尚未提交。

从我的 .gitignore 中删除 bin/ 并确保我在 node_modules 中的所有 bin 目录都已提交，为我修复了错误。

编辑：我发现正如 Gavin 提到的，另一种方法是从 git 中删除 node_packages，以便 Heroku 从您的 package.json 生成它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:33:58.870

我想知道你是否和这张海报一样受苦 在[heroku 上安装玉器时出错](https://stackoverflow.com/questions/14173373/error-installing-jade-on-heroku)……如果你已经添加`node_modules`到 git 那么这可能是你的问题。删除它并重试。

# jsp - JSP - 调用函数

> ID：15848123
> 
> 赞同：2
> 
> 时间：2013-04-06T07:10:05.403
> 
> 标签：jsp, button, onclick, function-call

我有一个按钮和一个显示一些数据的函数。我想在按钮单击时调用该函数。数据需要显示在同一页面上。我不想向前翻页。并且还想避免使用 JavaScript。我该怎么办？这是代码-

```
<form >
Number of jobs: <select name="jobs">
  <option value="10">10</option>
  <option value="25">25</option>
  <option value="50">50</option>
  <option value="100">100</option>
  <option value="500">500</option>
</select><br>

Number of PE:<select name="process">
  <option value="2">2</option>
  <option value="5">5</option>
  <option value="10">10</option>
  <option value="25">25</option>
</select>
<input type=submit value="Submit" onClick=check(x,y)>
</form>
 </text1>

 void check(int x, int y)
{
<jsp:include page="table" > 
   <jsp:param name="jobs"  value=x/>
  <jsp:param name="process"  value=y/>
  </jsp:include>
} 
```

我想在按钮单击（提交）时调用函数 check()。另外，我想将下拉列表中选择的值作为参数发送给函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:15:24.217

> 我不想向前翻页。并且还想避免使用javascript。

我认为两者都选择退出是不可能的。

您使用`jQuery/Ajax`调用在同一页面上显示数据而不提交它。

例子：

```
<script type="text/javascript" src="js/jquery.min.js"></script> 
<script type="text/javascript">
  $(function(){
      function getData() {
          var dataToBeSent  = {
            param1 : $("#jobs").val() ,
            param2: $("#process").val()
            }; // you can change parameter name

          $.ajax({
                url : 'getDataServlet', // Your Servlet mapping or JSP(not suggested)
                data :dataToBeSent, 
                type : 'POST',
                dataType : 'html', // Returns HTML as plain text; included script tags are evaluated when inserted in the DOM.
                success : function(response) {
                    $('#outputDiv').html(response); // create an empty div in your page with some id
                },
                error : function(request, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
      }

}); 
```

您的示例中的 HTML：

```
Number of jobs: <select name="jobs" id="jobs">
  <option value="10">10</option>
  <option value="25">25</option>
  <option value="50">50</option>
  <option value="100">100</option>
  <option value="500">500</option>
</select><br>

Number of PE:<select name="process" id="process">
  <option value="2">2</option>
  <option value="5">5</option>
  <option value="10">10</option>
  <option value="25">25</option>
</select>
<input type=submit value="Submit" onClick=getData();> 
```

# java - Java ArrayList - 无法读回对象的属性

> ID：15848124
> 
> 赞同：0
> 
> 时间：2013-04-06T07:10:07.673
> 
> 标签：java, object, arraylist

我希望能够制作一个对象数组列表，然后能够编辑和读回每个对象的一些简单属性。在这种情况下， a`String (colour)`和`integer (X)`。我似乎无法使下面的简单代码工作。请注意，我知道人们有时会在数组列表中使用 <> 表示法，但我已经读过它应该可以不用，而且目前我对 Java 还是很陌生，并希望让事情尽可能简单。

目前，我在注释掉的行上收到错误（找不到符号 X）

```
import java.util.ArrayList;

public class ArrayList_of_Objects {

 public static void main(String[] args)
    {

        ArrayList al = new ArrayList();

        for(int i =0;i<5;i++)
        {
            MyObj ob1 = new MyObj();
            ob1.X = i + 5;
            al.add(ob1);
            //System.out.println("X: "+al.get(i).X);
        }
        for(int j=0;j<5;j++)
        {System.out.println("X: "+al.get(j).X);}

        al.get(3).X=4;
        al.get(3).colour="orange";
        System.out.println(al.get(3).X);
        System.out.println(al.get(3).colour);
  } 

}

class MyObj
{
    int X;
    String colour;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:12:01.097

是的，您需要使用[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)来说明列表中的对象类型：

```
ArrayList<MyObj> al = new ArrayList<MyObj>(); 
```

否则编译器不知道这`al.get(3)`意味着返回 a`MyObj`而不仅仅是任何东西。使用此代码，它不仅会修复`get`调用 - 它会阻止您意外地将不适当类型的对象添加到列表中。

此外，通常首选将变量声明为适当的接口类型，例如：

```
List<MyObj> al = new ArrayList<MyObj>(); 
```

（有时您确实需要它是具体类型，但通常更喜欢编程而不是接口。）

泛型是一个*庞大的*主题，但是在此答案开头链接的教程应该可以帮助您前进。[Java 泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)是了解更多信息的绝佳资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:12:03.780

改变

```
 ArrayList al = new ArrayList(); 
```

到

```
 ArrayList<MyObj> al = new ArrayList<MyObj>(); 
```

您现在拥有的是 的数组列表`Object`而不是 的数组列表`MyObj`，并且`Object`不知道`MyObj.X`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:13:11.460

`ArrayList<MyObj> al = new ArrayList<MyObj>();`改为使用

# bash - Redis 多插入问题

> ID：15848126
> 
> 赞同：2
> 
> 时间：2013-04-06T07:10:41.743
> 
> 标签：bash, redis, command-line-interface

我尝试多插入，但它给了我错误 - [http://pastie.org/7337421](http://pastie.org/7337421)

```
$ cat mass_insert.txt 
*3\r\n$3\r\nSET\r\n$3\r\nkey\r\n$5\r\nvalue\r\n
$ cat mass_insert.txt | redis-cli --pipe
All data transferred. Waiting for the last reply...
ERR Protocol error: invalid multibulk length 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T20:42:56.470

您可以尝试以下方法：
`echo -e "$(cat mass_insert.txt)" | redis-cli --pipe`

# python - 在 google ajax 中返回前三个结果

> ID：15848129
> 
> 赞同：0
> 
> 时间：2013-04-06T07:11:08.187
> 
> 标签：python, ajax, json

我可以通过 google ajax url 从使用此代码的页面获取第一个链接。

```
def google(x):
    search = x.split()
    search = '%20'.join(map(str, search))
    url = 'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&start=1&q=%s&safe=off' % search
    search_results = urlreq.urlopen(url)
    js = json.loads(search_results.read().decode())
    results = js['responseData']['results']
    for i in results: rest = i['unescapedUrl']
    return rest 
```

我希望能够以有效的方式使用相同的方式获得前三或四个链接。如果我使用三个不同的页面进行三个不同的搜索，我可以返回前三个链接，但是，这是相当低效的。再说一遍，我使用的是 python 3.3，我希望能够返回前三个结果。使用我的方法而不是 xgoogle 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:28:47.883

您只返回响应中的最后一个结果：

改变：

```
for i in results: rest = i['unescapedUrl'] 
```

至：

```
rest = [result['unescapedUrl'] for result in results] 
```

或者：

```
urls = []
for result in results:
   urls.append(result['unescapedUrl'])
return urls 
```

# macos - 在mac osx终端中如何发出stdin的EOF信号？

> ID：15848134
> 
> 赞同：4
> 
> 时间：2013-04-06T07:11:59.660
> 
> 标签：macos, terminal, eof

我知道在linux的终端中，它是ctrl+D。我还在 OSX 的终端中进行了搜索。有人说是Control+Q，Control+D，return。但是这个 3 步命令在我的电脑上不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-09T20:19:33.027

只需使用 Ctrl-D，它就可以在任何终端中完成工作。

# vb.net - 使用 VB.NET 和 Office-Interop 从找到的 Word 插件文本生成替换文本

> ID：15848138
> 
> 赞同：1
> 
> 时间：2013-04-06T07:13:06.260
> 
> 标签：vb.net, ms-word, office-interop

我需要为 Microsoft Word 文档中的每个单词添加正确的重音符号。我有一个名为“DoAccentuate”的脚本，它确定输入的任何单词的正确重音。但是，我不知道如何捕获当前选择的找到的单词，用我的 DoAccentuate 脚本处理它，然后用结果替换同一个单词（不影响文本的格式）。这是我尝试过的。

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim document As Word.Document
    document = Globals.ThisAddIn.Application.ActiveDocument

    Dim FindObject As Word.Find = document.Application.Selection.Find
    With FindObject
        .ClearFormatting()
        .Text = "<*>"
        .MatchWildcards = True
        .Replacement.ClearFormatting()
        .Replacement.Text = DoAccentuate(document.Application.Selection.Text)
        .Execute(Replace:=Microsoft.Office.Interop.Word.WdReplace.wdReplaceAll)

    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:25:06.717

现在让我们假设这是您的 DoAccentuate 脚本：

```
Private Function DoAccentuate(theWordToAccentuate As String)
    theWordToAccentuate = theWordToAccentuate + "`"
    DoAccentuate = theWordToAccentuate
End Function 
```

鉴于此，查找/替换可以很简单：

```
Public Sub FindWordAndReplaceWithAccentuatedForm()
    Dim accentuatedText As String: accentuatedText = DoAccentuate(Selection.text)

    Selection.Find.text = Selection.text
    Selection.Find.Replacement.text = DoAccentuate(Selection.text)
    Selection.Find.Execute Replace:=wdReplaceAll
End Sub 
```

这不应删除任何格式。

我假设您需要一个解决方案，该解决方案要求用户选择他们想要强调的单词，然后运行宏（因为您上面的方法假设了这一点，即：`.Replacement.Text = DoAccentuate(document.Application.Selection.Text`

# c++ - mysql_query 和 embarcadero c++

> ID：15848143
> 
> 赞同：0
> 
> 时间：2013-04-06T07:13:31.980
> 
> 标签：c++, mysql, unicode, c++builder, wchar-t

我将 MySQL C API 与 Embacadero c++ 一起使用，在 (ANSI) 中没有任何问题。但是当我尝试发送像阿拉伯符号这样的宽字符（UNICODE）时，在 MySQL 数据库中显示为不可读的字符（垃圾）。因为我通过 mysql_query 函数发送的 SQL 字符串必须是 (const char *) 而不是 (const wchar_t *)。

供您参考：我说的是 MySQL 中的（INSERT 语句）。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:18:19.357

该数据库使用什么排序规则？

您必须使用 utf8_general_ci 或 utf8_unicode_ci

![在此处输入图像描述](https://i.stack.imgur.com/8Q8Vt.png)

# javascript - 在 JavaScript 中解析日期字符串以获取时区偏移量

> ID：15848144
> 
> 赞同：2
> 
> 时间：2013-04-06T07:13:46.773
> 
> 标签：javascript, jquery, timezone

我有`Fri, 15 Nov 2013 09:00:00 -0600`JavaScript 中的日期字符串（由服务器 PHP 发送）。我需要解析它并获取时区偏移量'-0600'。有什么简单的方法可以从此字符串中获取时区偏移量？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:16:31.770

```
var str = "Fri, 15 Nov 2013 09:00:00 -0600"
var output = str.split(' ').pop(); 
```

演示：http: [//jsfiddle.net/D7c28/](http://jsfiddle.net/D7c28/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:23:49.703

```
var reg_exp = /(-|\+)\d{4}/,
    timezone_offset = reg_exp.match("Fri, 15 Nov 2013 09:00:00 -0600")[0]; 
```

# android - Android：在 MediaStore 中查询期间出现磁盘 I/O 错误

> ID：15848147
> 
> 赞同：2
> 
> 时间：2013-04-06T07:14:05.547
> 
> 标签：android, database, sqlite, mediastore

我在查询 MediaStore 提供程序时遇到问题。这个问题对于一些罕见的设备很常见，但我自己无法重现。我从用户崩溃日志中得到它。我发现它可能与设备有关。一些开发人员在访问 HTC Desire 上的数据库时遇到问题（[数据库处理在 Android 2.2.1 (Desire HD 1.72.405.3) 上停止工作](https://stackoverflow.com/questions/4651797/database-handling-stoped-working-on-android-2-2-1-desire-hd-1-72-405-3)）。我的问题也出现在 HTC Desire（和其他一些设备）上。但它不是我的数据库，所以我无法更改路径或更改 MediaStore 数据库的管理方式。

这是我得到的调用堆栈：

```
"android.database.sqlite.SQLiteDiskIOException: disk I/O error (code 522)
    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:182)
    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:140)
    at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
    at android.content.ContentResolver.query(ContentResolver.java:370)
    at android.content.ContentResolver.query(ContentResolver.java:313) 
```

查询以标准方式调用：

```
contentResolver.query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, new String[] { "*" }, null, null, null); 
```

它发生在我对 MediaStore 进行查询的应用程序中的所有情况下。

具体设备：GT-I9003,HTC Desire,AM_Stick02,X10.Dual,HTC Sensation,C5155 和APIs:4.1.1;4.2.2;4.0.4,4.1.2

请问，您知道它会导致什么，或者您知道这些设备的一些解决方法吗？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:14:05.630

这个问题可能与此有关：

[https://android.googlesource.com/platform/external/sqlite.git/+/6ab557bdc070f11db30ede0696888efd19800475%5E!/#F0](https://android.googlesource.com/platform/external/sqlite.git/+/6ab557bdc070f11db30ede0696888efd19800475%5E!/#F0)

# c# - 无法附加到此 EntityContainer，因为它已附加到另一个 EntityContainer。灯开关自动更新收藏

> ID：15848152
> 
> 赞同：0
> 
> 时间：2013-04-06T07:15:00.690
> 
> 标签：c#, silverlight, visual-studio-lightswitch

```
 partial void updateRecords_Execute()
    {
        // Write your code here.

        using (var tempWorkspace = new DataWorkspace())
        {
            Saving NewSavings = tempWorkspace.ApplicationData.Savings.AddNew();

            var koo = from a in FromMainCompanies
                      select a;

            foreach (var i in koo)
                {

                    if (i.Member != null)
                    {
                        NewSavings.CaptureDate = DateTime.Now;
                        NewSavings.Amount = i.Member.Savings.Select(a => a.Amount).FirstOrDefault();
                        NewSavings.FinancialYear = tempWorkspace.ApplicationData.FinancialYears.FirstOrDefault();
                        NewSavings.Member = i.Member;
                        NewSavings.NewSavingsAmount = i.Member.Savings.Select(a => a.NewSavingsAmount).FirstOrDefault();

                        try
                        {
                            tempWorkspace.ApplicationData.SaveChanges();

                        }
                        catch (Exception e)
                        {
                            this.ShowMessageBox(e.Message);
                        }   
                    }

                }

        } 
```

}

我正在尝试在 Lightswitch 中自动更新记录，但出现以下错误：

**实体“成员：6”无法附加到此 EntityContainer，因为它已附加到另一个 EntityContainer。**

我有以下表格，成员、对账、FromMainCompany、ToMainCompany 和 Saving(s)。会员与储蓄有关，即会员有储蓄。并且 Member 也与 FromMainCompany 相关（FromMainCompany 是成员及其总工资帐户扣除的集合 -*不是那么重要*）

我的对帐屏幕中有一个名为 UpdateRecords 的按钮*（在其 Execute() 方法上有上面的代码）*，当单击它以将会员每月储蓄自动添加到所有会员保存表时，我想要该按钮，但现在我收到此错误 -**实体“会员” : 6' 无法附加到此 EntityContainer，因为它已附加到另一个 EntityContainer。**

-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T14:38:48.430

```
partial void updateRecords_Execute()
    {
        // Write your code here.

        using (var tempWorkspace = new DataWorkspace())
        {
            var mymembers = tempWorkspace.ApplicationData.Members;
            //var myscreen = this.Reconcilliations1.SelectedItem.FromMainCompanies.Where(a => a.Member != null).Select(b => b.Member);
            //Member myMember = new Member();
            foreach (Member item in mymembers)
            {
            Saving NewSavings = tempWorkspace.ApplicationData.Savings.AddNew();

            ////var koo = from a in FromMainCompanies
            ////          select a.Member;

                NewSavings.CaptureDate = DateTime.Now;
                NewSavings.Amount = item.Savings.Select(a=>a.Amount).LastOrDefault();
                NewSavings.FinancialYear = tempWorkspace.ApplicationData.FinancialYears.FirstOrDefault();
                NewSavings.Member = item;
                NewSavings.NewSavingsAmount = item.Savings.Select(a=>a.NewSavingsAmount).LastOrDefault();
            }

            try
            {
                tempWorkspace.ApplicationData.SaveChanges();

            }
            catch (Exception e)
            {
                this.ShowMessageBox(e.Message);
            } 

        }

        } 
```

弄清楚了， AddNew() 应该在 foreach 循环中。- 欢呼

# xml - 我们如何将属性放在 XML 模式中的元素内？

> ID：15848153
> 
> 赞同：-1
> 
> 时间：2013-04-06T07:15:06.050
> 
> 标签：xml, xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://www.google.com"
            xmlns="http://www.google.com"
            elementFormDefault="qualified">
<xsd:element name ="students">

    <xsd:simpleContent>
        <xsd:extension base="xsd:string">
            <xsd:attribute name="IDNUMBER" type="integer" use="required"/>
        </xsd:extension>
    </xsd:simpleContent>

    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name ="guy">
                <xsd:complexType>
                    <xsd:sequence>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>
</xsd:schema> 
```

我不太明白为什么它不起作用。我尝试放置属性和东西，但我得到了各种似乎与实际错误无关的错误。早些时候，我得到了 Error3033: The content is not valid。预期是（注释？，（元素|组|选择|序列|任何）*）。现在，我得到了别的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:09:41.337

您同时在标签内使用`<xsd:simpleContent>`和 。这是不可能的，您的新元素要么是**simpleContent**要么是**complexType**。请参阅[3.3.2 元素声明模式组件的 XML 表示](http://www.w3.org/TR/xmlschema11-1/#declare-element)：`<xsd:complexType>``<xsd:element>``<students>`

 ****> 内容：(annotation?, ((simpleType | complexType)?, alternative*, (unique | key | keyref)*))

决定你想使用哪一个（**simpleType**或**ComplexType**）并使用它（其中之一）。****

# python - 无法在python中导入snappy

> ID：15848156
> 
> 赞同：3
> 
> 时间：2013-04-06T07:15:42.673
> 
> 标签：python, python-2.7, ubuntu-12.04, snappy

我使用名为 python-snappy 的包。这个包需要[snappy](https://code.google.com/p/snappy/)库。因此，我通过以下命令成功下载并安装了 snappy，例如：

```
./configure
make
sudo make install 
```

当我导入 snappy 时，我收到以下错误：

```
from _snappy import CompressError, CompressedLengthError, \
ImportError: libsnappy.so.1 cannot open shared object file: No such file or directory 
```

我正在使用 Python 2.7、snappy、python-snappy 和 Ubuntu 12.04 我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T07:56:59.883

传统上，您可能必须运行该`ldconfig`实用程序来更新您的*/etc/ld.so.cache*（或适用于您的操作系统的等效项）。有时可能需要向*/etc/ld.so.conf*添加新条目（路径） 。

基本上，许多 Unix 版本（可能还有其他类似 Unix 的操作系统）上的共享对象（so）加载器使用缓存来帮助将它们的基本文件名解析为要加载的实际文件（通常是*mmap()'d*）。这与在 PATH 中的目录中添加内容后间歇性地需要在 shell 中运行*hash -r*或*rehash类似。*

通常你可以`ldconfig`不带参数运行（可能在将新库的路径添加到*/etc/ld.so.conf*文本文件之后）。好的*Makefile*会在`make install`.

这里有更多信息： http: [//linux.101hacks.com/unix/ldconfig/](http://linux.101hacks.com/unix/ldconfig/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T07:42:47.693

您可以从 ubuntu存储库安装[python-](http://packages.ubuntu.com/precise/python-snappy) snappy和[libsnappy1 ：](http://packages.ubuntu.com/precise/libsnappy1)

```
$ sudo apt-get install libsnappy1 python-snappy 
```

你不应该下载任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T23:42:58.063

在这里例如蟒蛇蟒蛇

1.  从[github下载 snappy](http://google.github.io/snappy/)
2.  还下载python文件
3.  提取两个文件
4.  google-snappy 文件夹

    `$ ./configure`

    `$ make`

    `$ sudo make install`

5.  然后在python文件夹中：

    `$ python setup.py build # here I get the same import _snappy error`

    `$ python setup.py install # after this import works`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-04T11:08:05.680

以下对我有用：

```
$ conda install python-snappy 
```

然后在我的代码中我使用了：

```
import snappy 
```

# xcode - 基础国际化和“找不到名为 [...] 的情节提要”

> ID：15848165
> 
> 赞同：2
> 
> 时间：2013-04-06T07:17:45.407
> 
> 标签：xcode, internationalization, uistoryboard

我正在使用 iOS 6 并尝试使用基本国际化。但是当我拨动开关并运行时，我得到一个“找不到名为 [...] 的故事板”异常。

我尝试从构建阶段和项目本身中删除和添加情节提要文件，但无济于事。我注意到在构建阶段，故事板在那里，但它是红色的。

有什么诀窍可以让这个工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:08:59.637

在项目导航中选择红色故事板条目，转到文件检查器，使用文件名旁边的按钮导航到磁盘上的文件：

![截屏](https://i.stack.imgur.com/GnNib.png) <-- 右下角的按钮

如果这还不够或不可能，请尝试以下策略：

*   清理项目，按住 shift 键（这将清理整个目录）。
*   重新启动 Xcode。
*   在文件检查器中检查目标，而不是在构建阶段设置它。
*   尝试验证文件没有损坏。（在 IB 中更改一些内容并保存。）

# deployment - MSDeploy 命令控制台

> ID：15848166
> 
> 赞同：1
> 
> 时间：2013-04-06T07:17:56.763
> 
> 标签：deployment, web, msdeploy, webdeploy

如何在 3 分钟 40 秒左右打开我在视频“ [http://www.iis.net/downloads/microsoft/web-deploy ”中看到的“MSDeploy 命令控制台”](http://www.iis.net/downloads/microsoft/web-deploy)

我可以通过将 cmd 提示符指向“C:\Program Files\IIS\Microsoft Web Deploy V3”然后启动 msdeploy.exe 来访问它。

我的问题是，这是唯一的方法，还是有一些类似于我们的 Visual Studio 命令提示符的命令提示符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T10:11:23.177

你可以试试这个：

```
string deployPath = @"C:\Program Files\IIS\Microsoft Web Deploy V3\msdeploy.exe";
string deployScript ="-verb:sync -source:package='C\package.zip' -dest:auto"
string scr = string.Format( "/k \"{0}\" {1}", deployPath, deployScript );
Process proc = new Process();        
proc = Process.Start( "cmd.exe", scr + " > error.txt" ); 
```

这样，您调用 cmd 并且它们在您内部运行指定的 deployPath 并通过 deployScript 说出您希望 msdeploy 执行的操作。/k 使控制台保持打开状态，因此您可以看到结果，最后 > error.txt 存在以便将输出保存在文件中（仍在发送错误）

# javascript - Google 闭包中的变量

> ID：15848174
> 
> 赞同：2
> 
> 时间：2013-04-06T07:19:29.090
> 
> 标签：javascript, jquery, minify, google-closure

[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)

```
(function(){

var somevar = 'somevar';

this.each(function(){
var minify_var = {
  method1: somevar + '1', 
  method2: somevar + '2',
  method3: somevar + '3',
  method4: somevar + '4',
  method5: somevar + '5'
};

alert(minify_var);
});

})(); 
```

像这样的代码被缩小为：

```
(function(){this.each(function(){alert({method1:"somevar1",method2:"somevar2",method3:"somevar3",method4:"somevar4",method5:"somevar5"})})})(); 
```

长度（+11 个符号）肯定大于：

```
(function(){var a="somevar";this.each(function(){alert({method1:a+"1",method2:a+"2",method3:a+"3",method4:a+"4",method5:a+"5"})})})(); 
```

问题是，我们有两个变量，但取而代之的是一个。

实际上，对于小脚本来说这还不错，但对大脚本来说可能会受到伤害。

添加了第一个变量以使缩小的代码更小，但谷歌忽略了它。

它也忽略了大多数像这样的其他尺寸优化技巧。

可以修复吗？

这个问题是关于 Google Closure，而不是 JavaScript 模式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T07:51:58.687

编译器假定文件在提供给用户时会被 gzip 压缩，因此它会针对*压缩*文件大小而不是未压缩大小进行优化。

我测试了两个版本的代码。

**版本 A**（将`a`其视为全局变量可防止以后自动连接）：

```
(function () {
    a = 'somevar';

    this.each(function () {
        var minify_var = {
            method1: a + '1',
            method2: a + '2',
            method3: a + '3',
            method4: a + '4',
            method5: a + '5'
        };

        alert(minify_var);
    });
})(); 
```

生成的缩小代码：

```
(function(){a="somevar";this.a(function(){alert({b:a+"1",c:a+"2",d:a+"3",e:a+"4",f:a+"5"})})})(); 
```

大小：97 字节（压缩后**95字节）。**

**版本 B**（与上面相同，但是`a`是一个局部变量，因此编译器会进行优化）：

```
(function () {
    var a = 'somevar';

    this.each(function () {
        var minify_var = {
            method1: a + '1',
            method2: a + '2',
            method3: a + '3',
            method4: a + '4',
            method5: a + '5'
        };

        alert(minify_var);
    });
})(); 
```

生成的缩小代码：

```
(function(){this.a(function(){alert({b:"somevar1",c:"somevar2",d:"somevar3",e:"somevar4",f:"somevar5"})})})(); 
```

大小：110 字节（压缩后**89字节）。**

* * *

所以第二个版本在未压缩时更大，但是**当它被 gzip 压缩时它更小**，因为变量声明消失了，gzip 将重复部分压缩到大致相同的空间，无论重复文本有多长。

[这是常见问题解答](https://code.google.com/p/closure-compiler/wiki/FAQ#Closure_Compiler_inlined_all_my_strings,_which_made_my_code_size)中的一个条目：

> **Closure Compiler 内联了我所有的字符串，这使我的代码变得更大。为什么这样做？**
> 
> 大多数人通过查看两个未压缩的 JavaScript 文件来比较代码大小。但这是查看代码大小的一种误导方式，因为您的 JavaScript 文件不应该以未压缩的形式提供。它应该与 gzip 压缩一起使用。
> 
> Closure Compiler 假定您正在使用 gzip 压缩。如果你不这样做，你应该这样做。配置你的服务器以压缩你的代码是你可以做的最有效和最简单的优化之一。gzip 算法通过尝试以最佳方式对字节序列进行别名来工作。手动给字符串起别名几乎总是会使压缩后的代码变大，因为它颠覆了 gzip 自己的别名算法。**因此，闭包编译器（几乎）总是尽可能内联您的字符串，因为这会使您的压缩代码更小。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T08:08:25.370

各种编译器（gcc、g++、jdk 等）总是面临这些问题：“追求速度或追求大小”

在这种情况下，关闭采取了速度的方法。它认识到您在许多地方都有一个常量变量，并直接重写了该值。以下是关闭团队对此事的看法：

[https://developers.google.com/closure/compiler/faq#tradeoffs](https://developers.google.com/closure/compiler/faq#tradeoffs)

**编译器是否在我的应用程序的执行速度和下载代码大小之间进行权衡？**

是的。任何优化编译器都会做出权衡。一些尺寸优化确实会引入小的速度开销。但是，闭包编译器的开发人员一直小心翼翼地不引入大量额外的运行时。一些编译器的优化甚至减少了运行时间（见下一个问题）。

**编译器是否针对速度进行了优化？**

在大多数情况下，较小的代码是更快的代码，因为下载时间通常是 Web 应用程序中最重要的速度因素。减少冗余的优化也加快了代码的运行时间。

# android - Android OnClickListener 在运行时不起作用

> ID：15848175
> 
> 赞同：1
> 
> 时间：2013-04-06T07:19:35.290
> 
> 标签：android, onclicklistener

我正在创建共享到 facebook、twitter 和其他社交网络的应用程序。我的源代码中没有任何错误，但是当我在模拟器按钮中运行应用程序时 onClickListener 不起作用。这是我的代码

```
public class MainActivity extends Activity {

SocialAuthAdapter adapter;
Profile profileMap;
List<Photo> photosList;

Button update;
EditText edit;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView textview = (TextView) findViewById(R.id.text);
    textview.setText("Welcome to Share Application experiment");

    Button share = (Button) findViewById(R.id.sharebutton);
    share.setText("Share");
    share.setTextColor(Color.WHITE);
    share.setBackgroundResource(R.drawable.button_gradient);

    adapter = new SocialAuthAdapter(new ResponseListener());

    adapter.addProvider(Provider.FACEBOOK, R.drawable.facebook);
    adapter.addProvider(Provider.TWITTER, R.drawable.twitter);

    adapter.addProvider(Provider.LINKEDIN, R.drawable.linkedin);

    adapter.addProvider(Provider.MYSPACE, R.drawable.myspace);
    adapter.addProvider(Provider.YAHOO, R.drawable.yahoo);
    adapter.addProvider(Provider.YAMMER, R.drawable.yammer);

    adapter.addProvider(Provider.FOURSQUARE, R.drawable.foursquare);
    adapter.addProvider(Provider.GOOGLE, R.drawable.google);

    adapter.addProvider(Provider.SALESFORCE, R.drawable.salesforce);
    adapter.addProvider(Provider.RUNKEEPER, R.drawable.runkeeper);

    adapter.addCallBack(Provider.FOURSQUARE, "http://socialauth.in/socialauthdemo/socialAuthSuccessAction.do");

    adapter.addCallBack(Provider.GOOGLE, "http://socialauth.in/socialauthdemo");

    adapter.addCallBack(Provider.SALESFORCE, "https://socialauth.in:8443/socialauthdemo/socialAuthSuccessAction.do");

    adapter.addCallBack(Provider.YAMMER, "http://socialauth.in/socialauthdemo/socialAuthSuccessAction.do");

    adapter.enable(share);      
}

private final class ResponseListener implements DialogListener{

    @Override
    public void onBack() {
        // TODO Auto-generated method stub
        Log.d("Share-Button", "Dialog Closed by pressing Back Key");
    }

    @Override
    public void onCancel() {
        // TODO Auto-generated method stub
        Log.d("ShareButton", "Authentication Cancelled");
    }

    @Override
    public void onComplete(Bundle values) {
        // TODO Auto-generated method stub
        Log.d("ShareButton", "Authentication Successful");

        final String providerName = values.getString(SocialAuthAdapter.PROVIDER);
        Log.d("ShareButton", "Provider Name = " + providerName);
        Toast.makeText(MainActivity.this, providerName + "connected", Toast.LENGTH_LONG).show();

        update = (Button) findViewById(R.id.update);
        edit = (EditText) findViewById(R.id.editTxt);

        update.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                adapter.updateStatus(edit.getText().toString());
                Toast.makeText(MainActivity.this, "Message posted on " + providerName, Toast.LENGTH_LONG).show();
            }
        });
    }

    @Override
    public void onError(SocialAuthError error) {
        // TODO Auto-generated method stub
        Log.d("ShareButton", "Authentication Error: " + error.getMessage());
    }   
}
} 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
>
<LinearLayout 
android:orientation="horizontal"
android:id="@+id/topbar"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:padding="7dp"
android:background="@drawable/blue_gradient"
>   
    <TextView 
        android:id="@+id/textview"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_gravity="center_vertical"
        android:textColor="#ffffff"
        android:textSize="14sp"
        android:text="Share Button"
        android:textStyle="bold"
    />
</LinearLayout>
<View
    android:id="@+id/view01"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_below="@+id/topbar"
    android:background="#313437" />      
 <TextView 
    android:id="@+id/text"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:textSize="14sp"
    android:textStyle="bold"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="20dp"
    android:textColor="#ffffff"
    android:layout_below="@+id/view01"
/>
<TextView 
    android:id="@+id/dialogTitle"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:textColor="#ffffff"
    android:textSize="14sp"
    android:text="Share Update"
    android:layout_marginTop="30dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:textStyle="bold"
    android:layout_below="@+id/text"    
/>  
<EditText 
    android:id="@+id/editTxt"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:textColor="#000000"
    android:textSize="12sp"
    android:layout_margin="5dp"
    android:hint="Enter Message"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_below="@+id/dialogTitle"
/>
<Button 
    android:id="@+id/update"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:background="#147af8"
    android:textColor="#ffffff"
    android:padding="5dp"
    android:textSize="12sp"
    android:text="Update"
    android:layout_alignRight="@+id/editTxt"
    android:layout_marginRight="10dp"
    android:layout_below="@+id/editTxt"
/>

<RelativeLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/layout_gradient"
android:layout_alignParentBottom="true"
>    
<Button 
    android:id="@+id/sharebutton"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_centerInParent="true"
    android:layout_margin="20dp"
/>     
</RelativeLayout>
</RelativeLayout> 
```

谁能告诉我我的项目哪里出了问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:58:15.770

```
 update = (Button) findViewById(R.id.update); 
```

将此代码移至`onCreate()`.Hope 这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:25:02.507

初始化更新按钮并在 onCreate 方法中设置 onClickListener 不是 onComplete

# python - 在新线程中从另一个模块运行函数？

> ID：15848179
> 
> 赞同：0
> 
> 时间：2013-04-06T07:19:51.227
> 
> 标签：python, multithreading

我为我的应用程序创建了一个简单的插件系统，现在，我想在一个新线程中运行每个插件。
这是我的代码的一部分：

```
def newThread(self, f, args=()):
        t = threading.Thread(target=f, args=args)
        t.deamon = True
        t.start()
        return t

print "s"

for mod in imported_modules:
    if 'init' in vars(mod):
        newThread(mod.init, None)

print 1 
```

我的插件之一是正在侦听套接字的 TCP 服务器。如果我在主线程中运行它，应用程序不会加载其他插件并等待服务器停止！
上面的代码也没有在我的插件上运行 init 函数。
现在的问题是：
如何在新线程中调用外部函数？
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:44:30.767

问题是当我们试图创建一个新线程时，我们应该将 args 传递给我们想要在新线程中调用它的方法。如果它没有得到任何参数，我们应该像这样传递一个空元组：

```
newThread(mod.init, ()) 
```

# android - 显示“java.lang.UnsatisfiedLinkError”异常的增强现实应用程序

> ID：15848180
> 
> 赞同：0
> 
> 时间：2013-04-06T07:19:54.747
> 
> 标签：android, android-emulator, vuforia

我正在使用 ImageTargets 示例，无论出于何种原因，`java.lang.UnsatisfiedLinkError`当我尝试调用 ImageTargets 库时都会遇到错误。

任何想法为什么？我必须在某个地方设置我的路径吗？

我按照[此链接](https://developer.vuforia.com/resources/dev-guide/step-1-setting-development-environment-android-sdk)上的指南进行操作。我安装一切都很好。设置 vuforia 路径后，我导入`ImageTargets`了示例应用程序，但是当我运行该应用程序时，我得到了`java.lang.UnsatisfiedLinkError exception`，我不知道我做错了什么，请任何人建议我谢谢...

**下面是我的日志**

```
04-06 07:11:21.321: E/AndroidRuntime(2288): FATAL EXCEPTION: main
04-06 07:11:21.321: E/AndroidRuntime(2288): java.lang.UnsatisfiedLinkError:      
Nativemethod not found:     
com.qualcomm.QCARSamples.ImageTargets.ImageTargets.getOpenGlEsVersionNative:()I
04-06 07:11:21.321: E/AndroidRuntime(2288):     at  com.qualcomm.QCARSamples.ImageTargets.ImageTargets.getOpenGlEsVersionNative(Native Method)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at com.qualcomm.QCARSamples.ImageTargets.ImageTargets.getInitializationFlags(ImageTargets.java:384)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at com.qualcomm.QCARSamples.ImageTargets.ImageTargets.onCreate(ImageTargets.java:355)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at android.app.Activity.performCreate(Activity.java:5104)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at  android.os.Looper.loop(Looper.java:137)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at java.lang.reflect.Method.invokeNative(Native Method)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at java.lang.reflect.Method.invoke(Method.java:511)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-06 07:11:21.321: E/AndroidRuntime(2288):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-03T08:47:27.323

默认配置 { ...

```
ndk {
    abiFilters "armeabi-v7a", "x86", "armeabi", "mips"
} 
```

您需要将此过滤器（abiFilters）添加到您的应用模块的 build.gradle 文件中。因此，当您的设备尝试运行您的应用程序时，它会检查 gradle 文件并了解它不应生成任何文件夹并使用现有的本机库资源。繁荣。几乎解决了。但还有一件事。

android.useDeprecatedNdk=true

将此行添加到您的 gradle.properties 以使用已弃用的 Ndk。

有关更多详细信息，请查看链接 [https://medium.com/mobiwise-blog/unsatisfiedlinkerror-problem-on-some-android-devices-b77f2f83837d](https://medium.com/mobiwise-blog/unsatisfiedlinkerror-problem-on-some-android-devices-b77f2f83837d)

# c# - 在 Asp.Net MVC 中显示从控制器返回的 JSON 数组数据

> ID：15848183
> 
> 赞同：3
> 
> 时间：2013-04-06T07:20:19.957
> 
> 标签：c#, asp.net-mvc, json, jquery, asp.net-mvc-4

我的控制器中有一个动作方法；

```
public ActionResult IndexWithJson(int Id, int? page)
{
    int pageSize = 2;
    int pageNumber = (page ?? 1);

    using (var adsRepo = new AdvertisementRepository())
    {
        if (Id > 0)
        {
            return Json(new{
                Data = adsRepo.GetAdvertisementBySubCategoryId(Id).ToPagedList(pageNumber, pageSize)
            }, JsonRequestBehavior.AllowGet);
        }
        else
        {
            return View("404");
        }

    }
} 
```

浏览器中的结果输出是； ![在此处输入图像描述](https://i.stack.imgur.com/c6dzP.png) 正如您在图片中看到的，我用一个名为“Data”的对象来包装数据（也在控制器中）。
现在，当我像这样使用 jQuery 调用它时；

```
var serviceBase = "/catalog/";

$.ajax({
    url: serviceBase + 'IndexWithJson',
    contentType: 'application/json; charset=utf-8',
    dataType:'json',
    data: { Id: categoryId, page: page },
    success: function (data) {
        alert(data.Title);
    }
}); 
```

**我在警报框中看到空值。**
这里有什么问题？
**我如何在警报框中仅显示一个属性（参见属性的图片）。**
**我的 dataType 属性在 jQuery ajax 函数中是否正确？（我猜应该是 JSONP**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T07:30:09.183

试试这个：

```
data.Data[0].Title 
```

这应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:23:49.167

尝试

```
alert(data[0].Title) 
```

这是一个数组。

要显示所有内容，您可以执行以下操作：

```
$.each(data, function(index, value) {
    $('#somediv').append(value.Title);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:32:23.383

我认为您需要使用 JSON.stringify 发送参数（在您的 ajax 调用中对控制器。类似
数据：JSON.stringify（{ Id：categoryId，page：page }），
您是否在控制器端正确获取 Id 和 page 值? 我认为你的ajax 调用结果是null，即客户端的data = null。

# android - 如何在 android 中使用 TabHost 在选项卡内的活动之间导航

> ID：15848189
> 
> 赞同：1
> 
> 时间：2013-04-06T07:21:05.803
> 
> 标签：android, android-tabhost, android-style-tabhost

我了解 TabActivity 已被弃用。但我的情况就像我有一个完全使用活动构建的应用程序 - 没有任何选项卡（也没有片段）。现在，我必须在此应用程序的底部添加 3 个选项卡。第一个选项卡需要用于执行现有应用程序的所有功能，即，我需要能够在第一个选项卡内的所有现有活动之间导航。其他 2 个选项卡将包含 2 个新功能。

任何人都可以帮助我的方法吗？[我反对使用片段，因为我必须重写我的应用程序以使用片段而不是活动 - 我希望这是明智的？]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:54:23.237

由于 Activity 您必须在每个 xml 文件中包含 Tab.xml。这可以通过片段顺利完成。但是你想要 2 完成活动，因为你必须在你必须编写的 TabActivity 代码中创建**BaseActivity**类。

-> 之后，在每个 Activity 中扩展该 BaseActivity。在该活动中，您只需从每个 Activity 中调用 2 次 BaseActivity 的方法来实现选项卡更改功能。

-> 现在在 xml 中。您必须制作一个**Tab.xml**文件，您必须将其**包含在每个活动的 xml**文件中。所以它会在每个活动中显示..

希望这对你有用。

# paypal - 如何为沙盒帐户启用定期付款？

> ID：15848191
> 
> 赞同：1
> 
> 时间：2013-04-06T07:21:21.813
> 
> 标签：paypal, paypal-sandbox, recurring

如何为沙盒帐户启用定期付款？

上次我使用沙盒时，我通过[https://www.x.com/developers/paypal/forums/paypal-sandbox/enable-reference-transaction-sandbox](https://www.x.com/developers/paypal/forums/paypal-sandbox/enable-reference-transaction-sandbox)请求启用了它 线程被锁定并指向 developer.paypal。 com。我在那里创建了测试帐户，甚至从旧版本的沙盒中导入了旧帐户。但我找不到如何启用定期付款，因为默认情况下它是禁用的。

那么，我如何测试定期付款？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:33:26.693

我以前设置过这个

我四处搜寻并找到了一些说明

1.  通过 deveoper.paypal.com 界面以普通卖家而非专业人士的身份创建一个测试账户
2.  使用新的测试帐户登录沙盒 (sandbox.paypal.com)
3.  通过单击“我的帐户”主菜单选项卡，确保您位于网站的“我的帐户”部分
4.  点击子菜单“个人资料”
5.  在“财务信息”列下，单击“定期付款仪表板”链接 6 .在右侧单击“注册增强型定期付款”链接
6.  单击同意并继续按钮

此链接显示了如何实现它：

[https://ppmts.custhelp.com/app/answers/detail/a_id/942/kw/recurring%20payments](https://ppmts.custhelp.com/app/answers/detail/a_id/942/kw/recurring%20payments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-16T14:49:32.950

如果您正在进行 API 调用 - 我必须实际联系 PayPal 支持并为他们提供我想要工作的沙盒（Merchant Pro）帐户，您必须要求他们在这些帐户上启用 DPRP。

# android - 如何使用自定义 GLSurfaceView 播放视频？

> ID：15848194
> 
> 赞同：1
> 
> 时间：2013-04-06T07:22:18.023
> 
> 标签：android, xml, glsurfaceview

在我的应用程序中，我想在目标图像上播放 3Dvideo，我已经在 C++ 中启动了相机，并且能够使用自定义视图在目标图像上设置 3D 图像，现在我的要求是在目标图像上播放 3Dvideo 代替 3D 图像，我尝试播放使用自定义 GLSurfaceView 的视频。下面是我的代码，但没有调用 onSurfaceCreated 方法。

```
public class GLPreview extends GLSurfaceView implements
    OnBufferingUpdateListener, OnCompletionListener, OnPreparedListener,
    OnVideoSizeChangedListener, SurfaceHolder.Callback,
    GLSurfaceView.Renderer{

    private static final String TAG = "MediaPlayerDemo";
    private int mVideoWidth;
    private int mVideoHeight;
    private MediaPlayer mMediaPlayer;
    private GLSurfaceView mPreview;
    private SurfaceHolder holder;
    private String path;
    private Bundle extras;
    private static final String MEDIA = "media";
    private static final int LOCAL_VIDEO = 4;
    private static final int STREAM_VIDEO = 5;
    private boolean mIsVideoSizeKnown = false;
    private boolean mIsVideoReadyToBePlayed = false;
    Context context2;

    public GLPreview(Context context, AttributeSet attrs) {
        super(context, attrs);
        // this.setZOrderMediaOverlay(true);
        Log.d(TAG, "GLPreview: OnPause");
        this.context2 = context;

        mPreview = (GLSurfaceView) findViewById(R.id.surface);
        // holder = mPreview.getHolder();
        setBackgroundResource(R.drawable.vuforiasizzlereel);
    }

    public void playVideo() {
        doCleanUp();
        try {

            // Create a new media player and set the listeners
            mMediaPlayer = new MediaPlayer();
                mMediaPlayer.setDataSource(path);           
            mMediaPlayer.setDisplay(holder);
            mMediaPlayer.prepare();
            mMediaPlayer.setOnBufferingUpdateListener(this);
            mMediaPlayer.setOnCompletionListener(this);
            mMediaPlayer.setOnPreparedListener(this);
            mMediaPlayer.setOnVideoSizeChangedListener(this);
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

        } catch (Exception e) {
            Log.e(TAG, "error: " + e.getMessage(), e);
        }
    }
    public void onPause() {
        super.onPause();
        Log.d(TAG, "GLPreview: OnPause");
    }

    public void onResume() {
        // this.setZOrderMediaOverlay(true);
        super.onResume();
        Log.d(TAG, "GLPreview: OnResume");
    }
    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(TAG, "GLPreview: surfaceCreated");
        super.surfaceCreated(holder);
    }
    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        Log.d(TAG, String.format(
                "GLPreview: surfaceChanged, format=%d, w=%d, h=%d", format, w,
                h));
        super.surfaceChanged(holder, format, w, h);
    }
    public void surfaceDestroyed(SurfaceHolder holder) {
        Log.d(TAG, "GLPreview: surfaceDestroyed");
        super.surfaceDestroyed(holder);
    }
    protected void onAttachedToWindow() {
        Log.d(TAG, "GLPreview: onAttachedToWindow");
        super.onAttachedToWindow();
    }
    protected void onDetachedFromWindow() {
        Log.d(TAG, "GLPreview: onDetachedFromWindow");
        super.onDetachedFromWindow();
    }
    protected void onWindowVisibilityChanged(int vis) {
        String newVisibility;
        switch (vis) {
        case View.GONE:
            newVisibility = "GONE";
            break;
        case View.INVISIBLE:
            newVisibility = "INVISIBLE";
            break;
        case View.VISIBLE:
            newVisibility = "VISIBLE";
            break;
        default:
            newVisibility = String.format("Unknown constant %d", vis);
        }

        Log.d(TAG, String.format("GLPreview: onWindowVisibilityChanged -> %s",
                newVisibility));
        super.onWindowVisibilityChanged(vis);
    }
    private void doCleanUp() {
        mVideoWidth = 0;
        mVideoHeight = 0;
        mIsVideoReadyToBePlayed = false;
        mIsVideoSizeKnown = false;
    }
    public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
        Log.v(TAG, "onVideoSizeChanged called");
        if (width == 0 || height == 0) {
            Log.e(TAG, "invalid video width(" + width + ") or height(" + height
                    + ")");
            return;
        }
        mIsVideoSizeKnown = true;
        mVideoWidth = width;
        mVideoHeight = height;
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
            startVideoPlayback();
        }
    }
    public void onPrepared(MediaPlayer mediaplayer) {
        Log.d(TAG, "onPrepared called");
        mIsVideoReadyToBePlayed = true;
        if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
            startVideoPlayback();
        }
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onBufferingUpdate(MediaPlayer mp, int percent) {
        // TODO Auto-generated method stub
    }
    private void startVideoPlayback() {
        Log.v(TAG, "startVideoPlayback");
        // holder.setFixedSize(mVideoWidth, mVideoHeight);
        mMediaPlayer.start();
    }
    @Override
    public void onDrawFrame(GL10 gl) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        // TODO Auto-generated method stub
        Log.d(TAG, "GLPreview : onSurfaceCreated");
        playVideo();
    }
} 
```

调用自定义 GLsurfaceview ：

```
GLPreview productView = new GLPreview(CloudReco.this, null); 
```

我不知道我在哪里失踪。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T19:31:16.590

在这种情况下，您不应该从 GLPreview 实现 SurfaceHolder.Callback ，因为 GLSurfaceView 已经将回调设置为 surfaceholder 并调用 renderer.surfacecreated 。所以你应该只实现 GLSurfaceView.Renderer 方法 - ondrawframe, onsurfacecreated(GL10 gl, EGLConfig config) 。参考 GLsurfaceView 源代码。GLSurfaceView 已经实现了 surfaceCreated(SurfaceHolder holder); 并调用你的渲染器

# java - Java Arraylist of objects 包含/等于

> ID：15848195
> 
> 赞同：1
> 
> 时间：2013-04-06T07:22:26.670
> 
> 标签：java, object, arraylist, containers

我看过很多地方，大多数 arraylist 示例都使用“String”作为元素，但是很难找到使用对象的地方。

假设我正在处理书籍收藏，并且我有一个作者对象：

```
class Author {
  String name;
  <other data>;
  int bookCount;

  public Author(String n) {
     name = n;
  }

  public boolean equals(Author other) {
     if (other.name.equals(name)) { return true;}
     return false;
  }
} 
```

因此，我创建了一个实例化为 arrayList 的作者列表：

```
Arraylist<Author> writers; 
```

所以我想知道作者是否存在，如果不存在则创建一个新条目，如果存在则增加 bookCount。我可以在 Author 中的名称上写一个 equals 方法（如上所示），然后执行以下操作：

```
bookAuthor = "James Gosling"; // normally an input
Author current = new Author(bookAuthor);
if (!writers.contains(current)) {
    writers.add(current);
} else {
    writers.get(writers.indexOf(current)).bookCount++;
} 
```

我相信这会起作用，我发现创建大量对象只是为了在比较后将它们丢弃是令人反感的，但我遇到的问题是 Author 的普通构造函数不是那么简单，并且涉及数据库查找（那么贵）。

这意味着在这种情况下仍然可以使用仅名称构造函数，但是我需要构造两次 Author。我能想到的唯一其他方法是创建一个继承自 ArrayList 并覆盖包含和 indexOf 的新类。这似乎有很多开销，然后我是否还需要在新类中覆盖 equals 或 hashCode 或其他东西？

我是否遗漏了一些东西，是否没有某种方法可以提供内联函数或使使用对象容器更容易的东西？我希望一个人可以做类似的事情：

```
Arraylist<Author> {equals(String x) { if (x = this.name) { return true;} return false; } writers;

if (!writers.contains(bookAuthor)) {
    writers.add(new Author(bookAuthor,dbconn);
} else {
    writers.get(writers.indexOf(bookAuthor)).bookCount++;
} 
```

但是当然 contains 和 indexOf 没有 String 签名，并且将其内联几乎与创建新类的工作量相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:29:47.820

Mybe，您可以将`Map<String,Author>`其用于名称->作者映射，这将解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:03:20.380

如果您使用的是真实世界的数据，那么名称是一个糟糕的选择。你认为有多少约翰史密斯会写书？

您需要一个唯一的标识符，自然数据不会削减它，因此人工 id 字段是最佳选择。

接下来，您应该覆盖`equals()`以使用 id。`hashCode()`应该基于使用的相同字段`equals()`，因此也相应地覆盖它。

接下来，使用 Set，而不是 List - 集合保持其元素的不相等性。无需检查。！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T11:34:17.300

在某种程度上，我前段时间也遇到过类似的情况，我遇到了这样的问题：

1.  为每个作者分配一个 ID（或任何唯一标识符）。*毕竟按名字搜索很费时间*
2.  将所有数据加载到`HashMap<Long, Author>`: 因为检查其中的`HashMap`所有`Authors`数据比每次检查数据库要快。
3.  在 O(1) 中，您可以通过以下方式访问`Author`您喜欢的对象`hashMap.get(ID)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-08T05:38:53.243

要解决这个问题，如何：

```
class Author {
  String name;
  <other data>;
  int bookCount;

  public Author(String n) {
     name = n;
  }

  @Override
  public boolean equals(Object o) {
     if (this == o) return true;
     if (o == null) return false;
     if (this.getClass() != o.getClass()) return false;
     Author other = (Author) o;
     return other.name.equals(name);
  }
} 
```

`equals`使用`Object`类而不是方法更改方法的签名，`Author`以便该`Arraylist.contains`方法能够使用它。但是随后您将不得不强制转换对象以进行必要的比较。

# mysql - 如何提高 MySQL DELETE 查询性能

> ID：15848201
> 
> 赞同：0
> 
> 时间：2013-04-06T07:23:23.857
> 
> 标签：mysql, performance

使用：Windows 上的 MySQL 5.6，在 my.ini 中使用默认配置文件设置

表：datatbl1

```
row_id   | emailaddr    | valid
--------------------------------  
INT, PK  | VARCHAR(255) | BIT 
```

emailaddr 和 row_id 列都定义了一个索引。

表中有 600,000 行，目标是删除重复项。查询是：

```
delete dt2 from datatbl1 dt1 JOIN datatbl1 dt2 on (dt1.emailaddr = dt2.emailaddr) and (dt1.row_id < dt2.row_id); 
```

在我的系统上，完成这个查询大约需要 15 分钟，我在任务管理器中观察 mysqld 进程，处理器使用率一直是 100%，但内存使用率从未超过 140MB 左右，即使有大约 3GB 的内存（ RAM) 已安装并且有足够的可用内存。

问题：

1.  我可以更改一些配置参数来提高性能吗？
2.  可以重写查询本身以提高性能吗？
3.  用 1 到 200 万行执行这个查询的合理时间是多少？

请记住，此查询稍后需要应用于其他表，即删除 datatbl1 中匹配具有相同表结构的其他表（datatbl2、datatbl3、datatbl4 等）的记录。

在我客户的系统上，相同的查询需要 2 个小时。不同的是他有一个普通的硬盘，而我有一个SSD。

该应用程序是一个带有 Delphi 前端的客户端服务器应用程序，旨在供普通用户在 Windows PC 上使用，因此 MySQL 几乎总是在最终用户的 Windows PC 上运行。

提前致谢。

编辑：按要求解释输出是：

```
mysql> explain delete dt2 from datatbl1 dt1 JOIN datatbl1 dt2 on (dt1.emailaddr
= dt2.emailaddr) and (dt1.row_id < dt2.row_id);
+----+-------------+-------+-------+------------------------------+-------------
+---------+--------------------------+------+-------------+
| id | select_type | table | type  | possible_keys                | key
| key_len | ref                      | rows | Extra       |
+----+-------------+-------+-------+------------------------------+-------------
+---------+--------------------------+------+-------------+
|  1 | SIMPLE      | dt1   | index | PRIMARY,ixemailaddr,ixrow_id | ixemailaddr
| 257     | NULL                     |    1 | Using index |
|  1 | SIMPLE      | dt2   | ref   | PRIMARY,ixemailaddr,ixrow_id | ixemailaddr
| 257     | emailmgrdb.dt1.emailaddr |    1 | Using where |
+----+-------------+-------+-------+------------------------------+-------------
+---------+--------------------------+------+-------------+
2 rows in set (0.01 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:32:49.647

也许这个查询会更快：

```
DELETE dt1.*
FROM datatbl1 dt1
JOIN (SELECT emailaddr, MIN(row_id) minrow
      FROM datatbl1
      GROUP BY emailaddr) dt2
USING (emailaddr)
WHERE dt1.row_id > dt2.minrow 
```

原始查询中中间表的大小为 O(n^2) （因为它将每一行与其后面的所有重复项连接起来），但这个是 O(n) （因为它只连接每个行的第一行一组重复项及其后面的重复项）。

这取决于缓慢是在查找行还是执行所有删除。您可以通过执行 SELECT 而不是 DELETE 并注意性能差异来发现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:32:50.023

您是否尝试过将`row_id`比较移至`WHERE`子句？

```
DELETE dt1
FROM datatbl1 dt1
INNER JOIN datatbl1 dt2 ON dt1.emailaddr = dt2.emailaddr
WHERE dt1.row_id > dt2.row_id 
```

# wordpress - Wordpress 管理菜单不断折叠

> ID：15848211
> 
> 赞同：4
> 
> 时间：2013-04-06T07:24:33.763
> 
> 标签：wordpress, menu, admin, collapse

前段时间，wordpress 管理菜单被折叠了，由于此时我无法保持打开状态，我需要按下小三角形将其打开。

我试图打`wp-admin/index.php?unfoldmenu=1`，它没有帮助。
这不是浏览器 cookie/缓存问题，因为我从一台全新的电脑打开了管理员并且它仍在发生。

也许有一个 JavaScript 钩子呢？

（版本 3.5.1）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:27:53.363

这是解决此错误的正确方法：

```
SELECT * FROM wp_usermeta WHERE meta_value LIKE '%mfold%';

+----------+---------+------------------+------------+
| umeta_id | user_id | meta_key         | meta_value |
+----------+---------+------------------+------------+
|     1152 |       4 | wp_user-settings | mfold=f    |
+----------+---------+------------------+------------+ 
```

只需删除此行并清除浏览器缓存/cookies。

```
DELETE FROM wp_usermeta WHERE umeta_id = 1152; 
```

请确保您没有删除任何其他内容。

谢谢克里斯蒂安特里夫

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:48:00.800

我最终在我的主题functions.php 中编写了一个自定义脚本。
它是一个临时解决方案，但现在可以使用。

```
function make_menu_unfolded() {
    print '<script>jQuery(document).ready(function(){jQuery("body").removeClass("folded")})</script>';
}

add_filter('admin_head', 'make_menu_unfolded'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:37:10.100

我建议更新你的 wordpress。下拉功能已经升级了几个版本。你在哪个版本？最新的是 3.5.1

# dart - Dart 有调度程序吗？

> ID：15848214
> 
> 赞同：9
> 
> 时间：2013-04-06T07:25:05.587
> 
> 标签：dart, scheduler

我从服务器端的角度来看飞镖。

是否有可以在特定时间或每小时执行 X 次的调度程序？我正在考虑 Java 世界中的 Quartz 线路。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T18:19:58.897

Dart 有一些延迟和重复任务的选项，但我不知道 Quartz 到 Dart 的端口（还...... :)

以下是基础知识：

*   `Timer`- 延迟一段时间后运行一个函数
*   `Future`- 更健壮、可组合的函数，“在未来”返回值
*   `Stream`- 强大的、可组合的事件流。可以是周期性的。

如果您有重复任务，我建议您使用 Stream over Timer。Timer 没有内置错误处理，因此未捕获的异常可能会导致整个程序崩溃（Dart 没有全局错误处理程序）。

以下是使用[Stream](http://api.dartlang.org/docs/releases/latest/dart_async/Stream.html)生成定期结果的方法：

```
import 'dart:async';

main() {
  var stream = new Stream.periodic(const Duration(hours: 1), (count) {
    // do something every hour
    // return the result of that something
  });

  stream.listen((result) {
    // listen for the result of the hourly task
  });
} 
```

您特别询问隔离物。您可以在程序启动时生成一个隔离，并每小时向它发送一条消息。或者，您可以在程序启动时生成隔离，隔离本身可以运行自己的计时器或周期性流。

# android - 我的项目无法识别添加的项目

> ID：15848218
> 
> 赞同：0
> 
> 时间：2013-04-06T07:25:17.203
> 
> 标签：android

```
<com.mobidevelop.widget.SplitPaneLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:spl="http://schemas.android.com/apk/res-auto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    spl:orientation="vertical"
    spl:splitterSize="12dip"
    spl:splitterPosition="33%"
    spl:splitterBackground="@drawable/splitter_bg_v"
    > 
```

我正在尝试在 android 中开发关于 SplitPane 概念的应用程序。

我从 github [https://github.com/MobiDevelop/android-split-pane-layout下载了应用程序](https://github.com/MobiDevelop/android-split-pane-layout)

当我导入项目时，我在上面提到的那一行的 main.xml 文件中收到以下错误

```
Multiple annotations found at this line:
    - error: No resource identifier found for attribute 'splitterSize' in package 'com.mobidevelop.widget'
    - error: No resource identifier found for attribute 'splitterPosition' in package 
     'com.mobidevelop.widget'
    - error: No resource identifier found for attribute 'orientation' in package 'com.mobidevelop.widget'
    - error: No resource identifier found for attribute 'splitterBackground' in package 
     'com.mobidevelop.widget' 
```

请帮助解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:18:18.160

您似乎缺少此文件：

[https://github.com/MobiDevelop/android-split-pane-layout/blob/master/split-pane-layout/res/values/attrs.xml](https://github.com/MobiDevelop/android-split-pane-layout/blob/master/split-pane-layout/res/values/attrs.xml)

要么这样做，要么`Project > Clean`确保 R 文件自行重新生成。

# crystal-reports - 如果我在 Crystal Reports 中分组以获得不同的记录，我的总数会有所不同

> ID：15848219
> 
> 赞同：2
> 
> 时间：2013-04-06T07:25:40.443
> 
> 标签：crystal-reports, crystal-reports-8.5

我的情况和这个[链接](http://businessintelligence.ittoolbox.com/groups/technical-functional/businessobjects-crystal-l/how-to-select-a-distinct-record-in-crystal-reports-85-2054261)差不多。

我对组标题上的详细信息和显示结果进行了分组和抑制，但**@total**是对所有记录求和，而不是对不同的记录求和。

请建议如何实现这一目标。

![在此处输入图像描述](https://i.stack.imgur.com/GOPac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:59:17.143

假设第 4 组是明确选择的组，它应该使用运行总计。`Summary`将该字段设置为您要合计的字段，将`Evaluate`选项设置为`On change of group`（选择第 4 组），然后`Reset`设置为`Never`。

如果您需要提取未分组在第 4 组（或其他组之一）中的不同记录，那么您可能必须手动编写运行总计。然后，您可以使用任何有意义的逻辑来确定何时添加到总数中。

如果它们没有按任何固定顺序排列，那么您将不得不更加花哨，我会亲自使用一个数组来跟踪哪些记录已添加到总数中。如果记录在数组中，则不执行任何操作，如果不在，则添加到总数中，然后将记录添加到数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:05:39.460

你的意思是你想要每个组的总数..？如果是，那么请尝试将您的**@total**放在该组页脚部分而不是报表页脚中

# ios - 导航栏中的问题未隐藏在另一个视图控制器中

> ID：15848222
> 
> 赞同：1
> 
> 时间：2013-04-06T07:26:03.930
> 
> 标签：ios, uinavigationbar

我已在应用程序委托中使用此代码`breathdatetableviewcontroller`作为`rootview controller`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    name =[[NSString alloc]init];
    birthdate =[[NSString alloc]init];
    phone =[[NSString alloc]init];
    email =[[NSString alloc]init];
    image =[[NSString alloc]init];

    birthDateTableViewController =[[BirthDateTableViewController alloc]initWithNibName:@"BirthDateTableViewController" bundle:nil];

    navController1 = [[[UINavigationController alloc]initWithRootViewController:birthDateTableViewController]autorelease];

    [window addSubview:navController1.view];
    [window makeKeyAndVisible];
      [FBProfilePictureView class];

    [[UIApplication sharedApplication]setStatusBarStyle:UIStatusBarStyleBlackOpaque];

    self.databaseName = @"birthdateDatabase.sqlite";
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDir = [documentPaths objectAtIndex:0];
    self.databasePath = [documentDir stringByAppendingPathComponent:self.databaseName];
    [self createAndCheckDatabase];
    //  sleep(5);

    if (sqlite3_open([[self dataFilePath] UTF8String], &database1) != SQLITE_OK)
    {
        sqlite3_close(database1);
        NSLog(@"Failed to open db.");
    }
    else
        NSLog(@"Open DB");

    return YES;
} 
```

所以为了解决这个问题，我尝试删除导航栏并将以下代码制作`brithdatetableviewcontroller`为`root view controller`

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.birthDateTableViewController = [[BirthDateTableViewController alloc] initWithNibName:@"BirthDateTableViewController" bundle:nil];
    self.window.rootViewController = self.birthDateTableViewController;
    [self.window makeKeyAndVisible]; 
```

但是当我使用它时，它会进入 brithdatetableviewcontroller 但无法正常工作

因此，让我们坚持我之前所做的事情，当它在 rootview 中时应该显示 negivation bar，但是当它进入另一个 viewcontroller 并且那些 viewcontroller 有自己的 nevigationbar 和按钮时应该隐藏它。

我试图将它隐藏在另一个视图控制器中，但这在这里不起作用。

请建议我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:40:40.827

**在视图控制器中**

```
- (void)viewWillAppear:(BOOL)animated
{
    // If you wnat Navigation Bar then
    [self.navigationController setNavigationBarHidden:NO];
    // Else if you don't want
    [self.navigationController setNavigationBarHidden:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T07:41:12.560

1.  在您的**AppDelegate.h**类中，创建一个导航控制器：

    @property(nonatomic,strong)UINavigationController *navController;

2.  在您的 **APPDELEGATE.M**中，将本地 Navigation Contooler 对象分配给该属性。

    (UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:< **MYViewController** >];

    **self.navController = 导航；**

    [self.window addSubview:nav.view];

    }

# c++ - 更改数组以使数组中的最大元素必须最小

> ID：15848225
> 
> 赞同：-9
> 
> 时间：2013-04-06T07:26:33.210
> 
> 标签：c++, arrays, algorithm

我有一个数组`[4,7,1,3,6,5]`，我需要对其进行转换，以使该转换后的数组中的最大元素必须是最小的。

所以对于上面的例子，在不改变该数组的总和值的情况下，可以将数组转换为`[4,4,4,4,5,5]`所以答案将为 5（最大元素是最小的）。

我们可以在不改变总和的情况下将数组的元素增加或减少任意值。

为清楚起见，另一个示例：

给定数组`[4,1,0]`，我们可以修改它，`[2,1,2]`使得最小的最大元素为 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T07:31:44.753

算法：

1：对所有数字求和 (26)

2：将总和除以元素总数 (26 / 6)，然后将数字四舍五入到最接近的小整数 (4)

3：开始将此整数添加到新数组中，直到无法仅用四位填充数组的其余部分，然后开始添加五位（下一个整数）

```
// Don'f forget #include <cmath> or <math.h>
int arr[], int N;

int answer[N];

int sum = 0;
for(int i = 0; i < N; i++) sum += arr[i];
int num = floor(sum / (double)N);

for(int i = 0; i < N; i++)
{
    if (sum == (N - i) * (num + 1)) answer[i] = num + 1;
    else answer[i] = num;
    sum -= answer[i];
} 
```

# clojure - 如何针对 LightTable 中的 HTML 页面进行交互式动态开发？

> ID：15848228
> 
> 赞同：4
> 
> 时间：2013-04-06T07:27:09.257
> 
> 标签：clojure, clojurescript, lighttable

我已经尝试过 LightTable 并且可以很好地运行 Clojure 命令，但我无法弄清楚如何在 IDE 中显示网页并以交互方式对网页的 DOM 执行 ClojureScript 命令。

## 更新

我将开始制作关于 Clojurescript 的视频系列，展示如何使用 LightTable： [http ://www.youtube.com/watch?v=lX6isnBn6mY](http://www.youtube.com/watch?v=lX6isnBn6mY)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T12:45:36.503

没关系，我最终想通了，并且按照承诺，我制作了一些视频来展示这一点：

[http://www.youtube.com/watch?v=lX6isnBn6mY](http://www.youtube.com/watch?v=lX6isnBn6mY)

# java - 使用 java swing 更新 sql 上的数据

> ID：15848234
> 
> 赞同：0
> 
> 时间：2013-04-06T07:28:06.723
> 
> 标签：java, sql-server-2005, sql-update, database-connection

我的代码有问题，不知道如何修复它，因为我一直在一遍又一遍地这样做......并且发生了同样的错误，谁能告诉我该怎么做？

这是我的代码：

对于我的连接路径：

```
public void Connection(String path){
    try{
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            String url = "jdbc:odbc:*****";
            String user = "*****";
            String pass = "*****";
            connection =  DriverManager.getConnection(url, user, pass);
} catch(Exception e) {}} 
```

我的更新代码：

```
try{
            String update = ("UPDATE dbo.Patients set pLName=?,pFName=? where pIDNo" +txtPatientID.getText()+"");
            ps = connection.prepareStatement(update);
            ps.setString(1, txtpFName.getText());
            ps.setString(2, txtpLName.getText());
            ps.execute();
            }
            catch(Exception e)
            {
            e.printStackTrace();
            System.exit(1);
            } 
```

这是我遇到的错误：

```
java.lang.NullPointerException
    at javaapplication25.EditPatient.btnUpdateActionPerformed(EditPatient.java:407)
    at javaapplication25.EditPatient.access$100(EditPatient.java:14)
    at javaapplication25.EditPatient$2.actionPerformed(EditPatient.java:187)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:48:56.833

如果您的异常发生在这一行

```
ps.setString(2, txtpLName.getText()); 
```

似乎 txtplName 是`null`，因为您的代码已经调用了`ps`.

但是你应该真正投资于你的异常处理，否则你总是会遇到这样的“后续”错误。尤其是在你的`Connection`方法中吞下异常可能会咬你，因为你不会看到连接没有建立。打印堆栈跟踪有助于调试，但不利于您的应用程序。至少返回`true`or`false`并相应地处理它（`false`意味着您无法建立连接，因此您无论如何都不需要继续）。

# java - 在 Blackberry 应用程序中集成 Post Web 服务

> ID：15848235
> 
> 赞同：2
> 
> 时间：2013-04-06T07:28:31.307
> 
> 标签：java, blackberry, blackberry-simulator

我是一个非常新的黑莓应用程序开发人员，在我的黑莓应用程序中集成 Web 服务时遇到了一个大问题。我必须在应用程序中使用 Post Web 服务，甚至找不到解释如何在 Blackberry 中集成 Web 服务的教程。请有人在这方面提供帮助。我执行了这个[链接](http://www.simplified-tech.com/website/webapp.nsf/webpages/ArticlesBBWebServices)给出的例子。当我尝试打开链接浏览器但它没有通过我的应用程序连接到 Web 服务时 Internet 可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:37:29.240

试试这个 -

```
try {
        httpURL="http://google.co.in/";

        if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
                && RadioInfo
                        .areWAFsSupported(RadioInfo.WAF_WLAN)) {
            httpURL += ";interface=wifi";
        }else  if (TransportInfo.isTransportTypeAvailable(TransportInfo.TRANSPORT_BIS_B) && TransportInfo.hasSufficientCoverage(TransportInfo.TRANSPORT_BIS_B)) {
            System.out.println("BIS CONNECTION-------------------");
            // Holder.connectionInterface=";deviceside=false;ConnectionType=mds-public";
            httpURL += ";deviceside=false;ConnectionType=mds-public";
        } 
        //Dialog.alert(httpURL);
        HttpConnection httpConn;
        httpConn = (HttpConnection) Connector.open(httpURL);
        httpConn.setRequestMethod(HttpConnection.POST);
        DataOutputStream _outStream = new DataOutputStream(httpConn.openDataOutputStream());
        byte[] request_body = httpURL.getBytes();
        for (int i = 0; i < request_body.length; i++) {
            _outStream.writeByte(request_body[i]);
        }
        DataInputStream _inputStream = new DataInputStream(
        httpConn.openInputStream());
        StringBuffer _responseMessage = new StringBuffer();
        int ch;
        while ((ch = _inputStream.read()) != -1) {
            _responseMessage.append((char) ch);
        }
        String res = (_responseMessage.toString());
        responce = res.trim();

        //Dialog.alert(responce);

        httpConn.close();

    }catch (Exception e) {
        Dialog.alert("Error -"+e.toString());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T11:06:59.803

发帖前请用“Blackberry+httppost”谷歌搜索，你会得到很多链接。我也为您推荐一个对初学者有用的链接。这听起来不错。

您还必须研究“interface=wifi;deviceside=true”等连接扩展。

[http://randywestergren.com/?p=191](http://randywestergren.com/?p=191)

# python - 在分配唯一变量时，在多行中读取的最 Pythonic 方式是什么？

> ID：15848238
> 
> 赞同：2
> 
> 时间：2013-04-06T07:28:44.997
> 
> 标签：python

例如：

```
 def get_values(input_file):
       f = open(input_file)
       key = f.readline().strip()
       value = f.readline().strip()
       name = f.readline().strip()
       password = f.readline().strip()
       return key, value, name, password 
```

其中输入文件只是一个包含 4 行信息的 txt。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T07:31:30.660

你可以这样做：

```
key, value, name, password = (line.strip() for line in f) 
```

此外，在您的代码中，您似乎没有在提取信息后*关闭文件。*这可能会导致一些问题。您可以使用该语句，也可以`f.close()`使用该[`with`](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)语句，这通常被认为更“pythonic”。

```
def get_values(input_file):
    with open(input_file) as f:
        key, value, name, password = (line.strip() for line in f)
    return key, value, name, password 
```

为了进一步简化您的函数，我们实际上不需要将值绑定到各个名称，因为我们不会在函数中对它们做任何事情。我们可以简单地使用一个列表。

```
def get_values(input_file):
    with open(input_file) as f:
        info = [line.strip() for line in f]
    return info 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T07:34:05.670

```
import itertools

with open('data.txt') as f:
    key, value, name, password = (line.strip() for line in itertools.islice(f, 4)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:33:43.803

```
with open(input_file) as in_f:
    key, value, name, password = [line.strip() for idx, line in enumerate(in_f) if idx <= 3] 
```

# c# - 如何解决最大连接池错误

> ID：15848239
> 
> 赞同：24
> 
> 时间：2013-04-06T07:28:45.113
> 
> 标签：c#, asp.net, sql-server

我在 asp.net 3.5 中有一个应用程序，数据库是 Sql server 2005。

```
"Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached." 
```

有时会发生此错误如何解决此错误..

我尝试`SqlConnection.ClearAllPools();`了，但这也不起作用。

```
SqlCommand cmdToExecute = new SqlCommand();
            cmdToExecute.CommandText = "dbo.[sp_user_listing]";
            cmdToExecute.CommandType = CommandType.StoredProcedure;
            DataTable toReturn = new DataTable("courier_user_listing");
            SqlDataAdapter adapter = new SqlDataAdapter(cmdToExecute);

            // Use base class' connection object
            cmdToExecute.Connection = sqMainConnection;

            try
            {
                cmdToExecute.Parameters.Add(new SqlParameter("@suser_name", SqlDbType.VarChar, 250, ParameterDirection.Input, true, 0, 0, "", DataRowVersion.Proposed, _user_name));

                if (blnMainConnectionIsCreatedLocal)
                {
                    // Open connection.
                    sqMainConnection.Open();
                }
                else
                {
                    if (CPMainConnectionProvider.IsTransactionPending)
                    {
                        cmdToExecute.Transaction = CPMainConnectionProvider.CurrentTransaction;
                    }
                }

                // Execute query.
                adapter.Fill(toReturn);
                i32ErrorCode = (Int32)cmdToExecute.Parameters["@iErrorCode"].Value;

                if (i32ErrorCode != (int)LLBLError.AllOk)
                {
                    // Throw error.
                    throw new Exception("Stored Procedure 'sp_courier_user_SelectAll' reported the ErrorCode: " + i32ErrorCode);
                }

                return toReturn;
            }
            catch (Exception ex)
            {
                // some error occured. Bubble it to caller and encapsulate Exception object
                throw new Exception("Courier_user::SelectAll::Error occured.", ex);
            }
            finally
            {
                if (blnMainConnectionIsCreatedLocal)
                {
                    // Close connection.
                    sqMainConnection.Close();
                }
                cmdToExecute.Dispose();
                adapter.Dispose();
            } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-06T07:41:05.933

检查数据库中任何长时间运行的查询。

增加你的池大小只会让你的 webapp 寿命更长一点（并且可能会变得更慢）

您可以使用 sql server profiler 并过滤持续时间/读取以查看哪些查询需要优化。

我还看到您可能正在保持全球联系？

```
blnMainConnectionIsCreatedLocal 
```

让 .net 为您进行池化，并使用 using 语句打开/关闭您的连接。

建议：

1.  始终像这样打开和**关闭**连接，因此 .net 可以管理您的连接，并且您不会用完连接：

    ```
     using (SqlConnection conn = new SqlConnection(connectionString))
        {
         conn.Open();
         // do some stuff
        } //conn disposed 
    ```

2.  **正如我所提到的，使用sql server profiler**检查您的查询，看看您是否可以优化它。在 Web 应用程序中对许多请求进行慢速查询也会导致这些超时。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-06T13:11:17.313

这也是你可以尝试的......

运行您的应用程序....当它仍在运行时启动您的命令提示符

当您的应用程序运行时，在命令提示符下键入**netstat -n**。您应该会看到 TCP/IP 连接列表。检查您的列表是否不是很长。理想情况下，列表中的连接数应少于 5 个。检查连接的状态。
如果您有太多处于 TIME_WAIT 状态的连接，则表示连接已关闭并正在等待操作系统释放资源。如果您在 Windows 上运行，则默认临时端口范围在 1024 和 5000 之间，Windows 从 TIME_WAIT 状态释放资源的默认时间为 4 分钟。因此，如果您的应用程序在不到 4 分钟的时间内使用了超过 3976 个连接，您将得到异常。

修复它的建议：

1.  将连接池添加到您的连接字符串。

如果您继续收到相同的错误消息（这极不可能），您可以尝试以下操作：（**如果您不熟悉 Windows 注册表，请不要这样做）**

1.  从运行命令运行**regedit 。**在注册表编辑器中查找此注册表项：**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters：**

修改设置，使其显示为：

**MaxUserPort = dword:00004e20（十进制 10,000） TcpTimedWaitDelay = dword:0000001e（十进制 30）**

这会将端口数增加到 10,000，并减少释放释放的 tcp/ip 连接的时间。

**如果 1 失败，仅使用建议 2。**

谢谢你。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-06T07:41:20.510

可能这是所有时间的多连接打开问题，您在代码中的某个位置打开连接并且没有正确关闭它们。采用

```
 using (SqlConnection con = new SqlConnection(connectionString))
        {
            con.Open();
         } 
```

请参考这篇文章： http: [//msdn.microsoft.com/en-us/library/ms254507](http://msdn.microsoft.com/en-us/library/ms254507(v=vs.80).aspx) (v=vs.80).aspx ，**Visual Basic 或 C# 中的 Using 块会在代码退出块时自动处理连接，即使在未处理的异常的情况下。**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-06T11:39:44.160

在你开始诅咒你的应用程序之前，你需要检查一下：

1.  您的应用程序是唯一使用该 SQL Server 实例的应用程序吗？一种。如果答案是否定的，那么您需要调查其他应用程序如何消耗您的 SQl Server.run b 上的资源。如果答案是肯定的，那么您必须调查您的申请。

2.  运行 SQL Server Profiler 并使用 SQL Server 检查其他应用程序 (1a) 中发生的活动，并检查您的应用程序 (1b)。

3.  如果您的应用程序确实缺乏资源，那么您需要进行进一步的调查。有关此[http://sqlserverplanet.com/troubleshooting/sql-server-slowness的更多信息](http://sqlserverplanet.com/troubleshooting/sql-server-slowness)

# ruby - 如何在 Rails 应用程序中集成 Nokogiri

> ID：15848241
> 
> 赞同：3
> 
> 时间：2013-04-06T07:28:54.493
> 
> 标签：ruby, ruby-on-rails-3, screen, nokogiri

我正在尝试将 Nokogiri 集成到我在 Rails 3.2 中的应用程序中。我看过 Rails Casts 剧集并尝试创建一个名为 nokogiri_test.rb 的测试文件，然后通过我的 cmd 运行它。它运行良好并从旅游网站获取内容。

我正在构建的应用程序是一个在 Rails 中作为实验的旅游网站。我想从另一个旅游网站获取信息，例如：关于亚洲旅行的一段。

我不明白如何在我的应用程序中实现 Nokogiri 代码。我需要创建一个控制器，然后在其中编写 nokogiri 代码吗？或者在现有的控制器页面或其他地方编写 nokogiri 代码？然后我还想在我的视图中显示信息（asia.html.erb）。我如何显示它？

我在网上到处搜索，但从未找到解决方案。任何人都可以解释一下吗？我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:54:22.730

一般约定是不要将任何业务逻辑放入控制器或视图中。特别是如果涉及任何第三方服务（如外部网站）。您可以按照[Rails Casts "Screen Scraping"](http://railscasts.com/episodes/190-screen-scraping-with-nokogiri)的建议，构建一个 rake 任务，将抓取到模型中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T12:26:28.230

我看到这个问题在这里还没有解决。我遇到了同样的问题，经过多次搜索（还有很多头痛），我找到了解决方案：[在 Rails 中显示从 Nokogiri 抓取的数据？](https://stackoverflow.com/questions/15487198/display-data-scraped-from-nokogiri-in-rails)

所以（不知道一般约定），可以将你的 nokogiri 的网络**刮板**放在你的控制器中！（我也是初学者）希望这会有所帮助

# java - 不同类之间的 Repaint() 不会更新

> ID：15848242
> 
> 赞同：2
> 
> 时间：2013-04-06T07:28:57.140
> 
> 标签：java, swing, actionlistener, repaint, paintcomponent

我正在尝试制作一个简单的文字处理器，其中 JFrame 顶部有一个 ControlPanel，中间有一个带有 JTextArea 组件的 TextPanel。我的程序的基本概述是有一个名为 MyPanel 的 JPanel，它占据了整个 JFrame 并保存了其余的面板。MyPanel 内部是 ControlPanel 和 TextPanel（未嵌套）。ControlPanel 包含用于字体样式的各种 JButton 和 JComboBoxes，而 TextPanel 仅具有 JTextArea。

我想要的是，当我按下 ControlPanel 类中的 JButton（例如 BOLD）时，它将转到 actionPerformed() 并执行“text.repaint”。但我发现 text.repaint 甚至没有进入 TextPanel 并且从未进入 paintComponent 方法。我尝试将 ControlPanel 嵌套在 TextPanel 中并给它一个 BorderLayout.NORTH，效果很好，但是看起来纸张已连接到控制面板，这是我不喜欢的。

有人可以给我一个替代方案或解释为什么 text.repaint() 不起作用吗？

这是我的代码的重要部分供参考：（重要部分用//标记）

注意： 类 ControlPanel 和类 TextPanel 没有对齐，因为我懒得在一个平庸的文本编辑器上修复对齐。相信我，它们没有嵌套，并且都在 MyPanel 类中

```
 class ControlPanel extends JPanel implements ActionListener
        {
            JButton bold, italics;
            JComboBox font;
            JComboBox size;
            String [] fontsizes = {"8", "10", "12", "16", "20", "24", "36", "48", "56", "72"};
            String [] fonttypes = {"Arial", "Serif", "Sans Serif", "Gothic", "Helvetica", "Times New Roman", "Comic Sans"};

            public ControlPanel() // class ControlPanel control
            {
                setBackground(Color.gray);
                this.setLayout(new FlowLayout());

                Font boldfont = new Font("Serif", Font.BOLD, 16);
                bold = new JButton("B");
                bold.setFont(boldfont);
                //bold.getModel().setPressed(true);
                bold.addActionListener(this);
                this.add(bold);

                Font italicsfont = new Font("Serif", Font.ITALIC, 16);
                italics = new JButton("I");
                italics.setFont(italicsfont);
                //italics.getModel().setPressed(true);
                italics.addActionListener(this);
                this.add(italics);

                font = new JComboBox(fonttypes);
                font.setSelectedIndex(0);
                font.addActionListener(this);
                this.add(font);

                size = new JComboBox(fontsizes);
                size.setSelectedIndex(2);
                size.addActionListener(this);
                size.setEditable(true);
                this.add(size);

            }

            public void actionPerformed(ActionEvent e)
            {
                String command = e.getActionCommand();
                if (command.equals("B"))
                {
                    if (boldfont)
                        boldfont = false;
                    else
                        boldfont = true;
                }
                if (command.equals("I"))
                {
                    if (italicsfont)
                        italicsfont = false;
                    else 
                        italicsfont = true;
                }
                fontselection = (String)font.getSelectedItem();
                sizeselection = Integer.parseInt((String)(size.getSelectedItem()));
                text.repaint(); // repaints TextPanel text class
            }
        }

    class TextPanel extends JPanel // class TextPanel text
    {
        JTextArea type;

        public TextPanel()
        {
            this.setLayout(new BorderLayout());
            type = new JTextArea();
            type.setEditable(true);
            type.setLineWrap(true);
            type.setWrapStyleWord(true);
            type.setTabSize(4);
            type.setMargin(new Insets(80, 100, 80, 100));
            this.add(type, BorderLayout.CENTER);
        }

        public void paintComponent(Graphics g) // paintComponent() method for TextPanel
        {
            System.out.println("paintComponent of text"); // does not print out in terminal
            super.paintComponent(g);
            Font regfont;
            int fontstyle = 0;
            regfont = new Font("Arial", Font.PLAIN, 12);
            if (boldfont)
            {
                fontstyle = 1;
            }
            else if (!boldfont)
            {
                fontstyle = 0;
            }
            if (italicsfont)
            {
                if (boldfont)
                    fontstyle = 3;
                else
                    fontstyle = 2;
            }
            else if (!italicsfont)
            {
                if (boldfont)
                    fontstyle = 1;
                else
                    fontstyle = 0;
            }
            regfont = new Font(fontselection, fontstyle, sizeselection);
            type.setFont(regfont);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:04:42.057

您的`paint`方法不会向整个应用程序添加任何功能。实际上，您最好允许控制窗格将状态请求传递给`TextPane`然后直接影响文本区域。

基本上，您在该`paintComponent`方法中所做的是错误的方法，因为您正在尝试并且实际上可能会产生可能消耗您的 CPU 的循环重绘调用场景

**更新了示例**

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestTextPane01 {

    public static void main(String[] args) {
        new TestTextPane01();
    }

    public TestTextPane01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                TextPanel textPanel = new TextPanel();
                ControlPanel controlPanel = new ControlPanel(textPanel);

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(controlPanel, BorderLayout.NORTH);
                frame.add(textPanel);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    class ControlPanel extends JPanel implements ActionListener {

        JButton bold, italics;
        JComboBox font;
        JComboBox size;
        String[] fontsizes = {"8", "10", "12", "16", "20", "24", "36", "48", "56", "72"};
        String[] fonttypes = {"Arial", "Serif", "Sans Serif", "Gothic", "Helvetica", "Times New Roman", "Comic Sans"};
        private boolean boldfont;
        private boolean italicsfont;
        private String fontselection;
        private int sizeselection;
        private TextPanel textPane;

        public ControlPanel(TextPanel txtPanel) // class ControlPanel control
        {
            textPane = txtPanel;
            setBackground(Color.gray);
            this.setLayout(new FlowLayout());

            Font boldfont = new Font("Serif", Font.BOLD, 16);
            bold = new JButton("B");
            bold.setFont(boldfont);
            //bold.getModel().setPressed(true);
            bold.addActionListener(this);
            this.add(bold);

            Font italicsfont = new Font("Serif", Font.ITALIC, 16);
            italics = new JButton("I");
            italics.setFont(italicsfont);
            //italics.getModel().setPressed(true);
            italics.addActionListener(this);
            this.add(italics);

            font = new JComboBox(fonttypes);
            font.setSelectedIndex(0);
            font.addActionListener(this);
            this.add(font);

            size = new JComboBox(fontsizes);
            size.setSelectedIndex(2);
            size.addActionListener(this);
            size.setEditable(true);
            this.add(size);

        }

        public void actionPerformed(ActionEvent e) {
            String command = e.getActionCommand();
            if (command.equals("B")) {
                boldfont = !boldfont;
            } else if (command.equals("I")) {
                italicsfont = !italicsfont;
            }
            fontselection = (String) font.getSelectedItem();
            sizeselection = Integer.parseInt((String) (size.getSelectedItem()));
//            text.repaint(); // repaints TextPanel text class
            textPane.setFont(boldfont, italicsfont);
        }

    }

    class TextPanel extends JPanel // class TextPanel text
    {

        JTextArea type;

        public TextPanel() {
            this.setLayout(new BorderLayout());
            type = new JTextArea();
            type.setEditable(true);
            type.setLineWrap(true);
            type.setWrapStyleWord(true);
            type.setTabSize(4);
            type.setMargin(new Insets(80, 100, 80, 100));
            this.add(type, BorderLayout.CENTER);
        }

        public void setFont(boolean boldFont, boolean italicsFont) {
            Font font = type.getFont();
            int style = Font.PLAIN;
            if (boldFont && italicsFont) {
                style = Font.BOLD | Font.ITALIC;
            } else if (boldFont) {
                style = Font.BOLD;
            } else if (italicsFont) {
                style = Font.ITALIC;
            }
            font = font.deriveFont(style);
            System.out.println("Font");
            type.setFont(font);
        }

    }

} 
```

我还建议您阅读[How to Use Scroll Panes](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)、[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和[Painting in AWT and Swing](http://www.oracle.com/technetwork/java/painting-140037.html)

# .htaccess - 将不同的域指向目录

> ID：15848245
> 
> 赞同：-2
> 
> 时间：2013-04-06T07:29:18.860
> 
> 标签：.htaccess, mod-rewrite, cname

## 背景

我想创建一个需要注册域并将其指向应用程序的服务。问题是，应用程序需要知道域参数是什么。所以我分析[了这个关于域别名的问题，](https://stackoverflow.com/questions/5901079/htaccess-redirecting-domain-alias)但不明白它是否符合我的需求。

## 设想

我想为客户提供一个选项，他们可以将自己的域映射到我的服务器。例如bandcamp（[自定义域@band camp](http://bandcamp.com/faq_custom_domains)）

如果我在我的应用程序上转发带有 A 记录的域，准备好通配符 A 记录不会与我在专用服务器上托管的其他域冲突吗？

我应该将通配符域放在它自己的 IP 地址上（这是正确的方法吗？）

请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:32:45.647

*example.com/info*是应用程序的 URI 吗？而*example.com/info/user/123*是用户的预期面板？其实，你的问题不是很容易理解，也许这就是为什么在这个时候，仍然没有人试图回答你的问题，因为他们没有得到它。那么这个呢：

```
example.com/info/user/123/example.com 
```

我无法得到您的问题，请编辑并进一步解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:23:13.350

好，我知道了。

以下是相关的：

接收域应该能够： 1\. 驻留在单独的 IP 上。**这是至关重要的。** 2\. 使用 $_SERVER['HTTP_HOST']; 并相应地显示内容

分步指南：

*   您在单独的 IP 上的服务器上设置您的接收域。
*   您设置通配符 A 条目并将其指向接收域。

在需要重定向的域上，您可以： - 将 A 条目设置为接收域的单独 IP。

在接收域的 PHP 脚本上，您执行以下操作：

```
<?

     echo $_SERVER['HTTP_HOST'];
     echo "<br />";
     echo 'Ich trag pollunder und brille!';

?> 
```

你很高兴:)

# text - 并排居中表单字段上方的文本标签

> ID：15848246
> 
> 赞同：1
> 
> 时间：2013-04-06T07:29:22.217
> 
> 标签：text, center, labels

我阅读了[如何在 CSS 中并排获得两个表单字段，每个字段的标签位于字段上方？](https://stackoverflow.com/questions/4907275/how-can-i-get-two-form-fields-side-by-side-with-each-fields-label-above-the-fi)这似乎接近我所需要的。不幸的是，我对此太陌生，无法理解其中的大部分内容。我的页面曾经与表格一起使用，但不知何故它被改变了，并以表格为基础。

我只能以 position:absolute 为标签居中，但这似乎不适用于较小的屏幕。此外，我想使用溢出：自动和固定标签，当你向下滚动页面时它没有意义。自动流并不重要，因为它能够在较小的屏幕上保持原位。

请问有什么可以帮助的想法吗？

这是页面：[http](http://pintotours.net/coding/form.php) ://pintotours.net/coding/form.php 当前代码的示例：

```
> <form method="post" action="./database.php">
>      <DIV style="position: absolute;  left:590px; width:40px; height:25px">Username</DIV> <DIV style="position: absolute; 
> right:545px; width:150px; height:25px">Repeat username</DIV> <br>
> 
>   <center>  <p><label for="Username"> </label><input type="text"
> name="username" />
>     <label for="Repeat Username"></label><input type="text" name="repeat-username" /></p>
> 
> <DIV style="position: absolute;  left:590px; width:40px;
> height:25px">Password</DIV> <DIV style="position: absolute; 
> right:557px; width:150px; height:25px">Repeat password</DIV> <br>
> 
>     <p><label for="Password"> </label><input type="text" name="password" />
>     <label for="Repeat Password"></label><input type="text" name="repeat-password" /></p><br>
>     
>     
>     </center> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:43:35.907

使用表格进行简单快速的表单设计，或者使用带有 css 属性“float:left”的 div。不要使用 'absolute' 和 'left' 'right' css 属性。查看其他一些网站，了解他们如何设计表单。

# java - JSTL和表达式语言之间的确切区别和关系

> ID：15848251
> 
> 赞同：23
> 
> 时间：2013-04-06T07:30:05.167
> 
> 标签：java, jsp, jakarta-ee, jstl, el

阅读问答后[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)我停止使用 scriptlet 进行编码。

所以开始阅读[JSTL](https://stackoverflow.com/tags/jstl/info)并怀疑我发现 JSTL 与 [EL](https://stackoverflow.com/tags/el/info)有关系。

但我没有得到它们之间的确切关系。

在这里我从[这里得到了代码](http://www.apekshit.com/t/87/JSTL---Core-Tags)

```
 <c:set var="test" value="JSTL Core Tags"></c:set>
 <c:out value="${test}"></c:out> 
```

我知道`<c:set`是一个 JSP 标记并且`${test}`是表达式语言..

我的困惑是

1.  一个人工作`JSTL`不行吗？它总是需要支持`EL`吗？如果并非总是需要，在上述情况下如何？

2.  如何简单地使用没有 JSTL 标签的表达式语言？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-06T09:26:59.990

EL 最初被设计用于 JSTL 标记的属性内，以及您可能想要使用或自己编写的任何其他自定义标记。

更高版本的 JSP 规范允许在 JSP 中直接使用 EL，但这并不意味着 JSTL 不再有用。您可以直接在 JSP 中使用 EL 做的唯一事情是向响应写入一些值，例如

```
${user.id} 
```

这将写入用户 bean 的 ID。如果你想要测试、循环、HTML 转义、URL、日期和数字格式等，你仍然需要使用 JSTL。

# jasper-reports - 将一个数据集参数映射到 ireport 中另一个数据集返回的字段之一

> ID：15848256
> 
> 赞同：0
> 
> 时间：2013-04-06T07:31:05.283
> 
> 标签：jasper-reports, ireport

我正在使用**ireport Designer4.0.2**在 Web 应用程序中开发报表。在我的报表中，我有一个包含另一个表的单元格的表。第二个表的数据集的查询取决于从第一个表返回的字段之一。即我必须映射第一个数据集的字段之一，带有第二个数据集的参数。它将如何完成。请尽快给我建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:16:32.887

> **“第二张表的数据集查询取决于第一张表返回的字段之一”**

`table`如果您希望从数据集中 返回值。**这不可能。**

`table`数据集不会像`sub reports`do那样将值返回给主报表。

`sub-reports`如果您需要返回值，您可以选择。

# java - SessionFactory.openSession() 和 SessionFactory.getCurrentTransaction().commit() 之间的区别

> ID：15848260
> 
> 赞同：2
> 
> 时间：2013-04-06T07:31:21.020
> 
> 标签：java, hibernate

如果我在方法结束时关闭会话`Session.getCurrentTransaction().commit()`或关闭会话会发生什么`session.close()`？

```
public static void deleteYear(Years year)
{
    Session session = sessionFactory.openSession();
    session.beginTransaction();
    session.delete(year);
            // what is the best way to close session
    session.getTransaction().commit();
            //or : session.close(); ???
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T07:37:30.747

ASAIK，这两个是完全不同的操作。

`sessionFactory.openSession()`：它打开一个[会话](http://docs.jboss.org/hibernate/orm/3.5/javadoc/org/hibernate/Session.html)

`session.beginTransaction()`：它开始一个[事务](http://msdn.microsoft.com/en-in/library/ms190612%28v=sql.105%29.aspx)，事务是一个原子工作单元，应该完全成功或失败。

`session.getTransaction().commit()`：它提交事务，意味着在 beginTransaction 和这个调用之间发生的所有事情都会被持久化到数据库中。如果您不提交事务，则事务中发生的所有更改都将丢失。提交事务不会关闭会话

`session.close()`: 关闭会话并释放获取的资源。

这意味着您需要同时调用`commit()`和`session.close()`。

```
public static void deleteYear(Years year)
{
    Session session = sessionFactory.openSession();
    session.beginTransaction();
    session.delete(year);
    session.getTransaction().commit();
    session.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:37:14.333

进行会话事务的更好方法

```
Session sess=getSession();
Transcration tx=sess.beginTranscration();
//do something with session
sess.save(obj);
tx.commit();
sess.close; 
```

我推荐[这个](https://stackoverflow.com/questions/9351390/hibernate-session-close)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:55:14.673

这是完全不同的两件事。

`COMMIT``transaction`使迄今为止发生的变化。
`CLOSE`关闭会话，您将无法再访问该会话。

所以你可以同时拥有两者。

**要记住的注意事项**：没有必要关闭会话；但是，最后应该`DISCONNECT`编辑一个会话。

# java - 如何分别获取图像的 rgb 矩阵？

> ID：15848267
> 
> 赞同：4
> 
> 时间：2013-04-06T07:31:56.293
> 
> 标签：java

我有一个图像数据库，我想将这些图像的 RGB 矩阵分别存储在 mysql db 中（例如：redMatrix_column、greenMatrix_column、blueMatrix_column）。在 matlab 中，我可以使用 imread() 函数分别获取 RBG 矩阵。如何在 java 中做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T07:52:24.053

这是您获得颜色分量的方式：

```
public class GetImageColorComponents {
  public static void main(String... args) throws Exception {
    BufferedImage img = ImageIO.read(GetImageColorComponents.class
                                     .getResourceAsStream("/image.png"));
    int[] colors = new int[img.getWidth() * img.getHeight()];
    img.getRGB(0, 0, img.getWidth(), img.getHeight(), colors, 0, img.getWidth());

    int[] red = new int[colors.length];
    int[] green = new int[colors.length];
    int[] blue = new int[colors.length];

    for (int i = 0; i < colors.length; i++) {
      Color color = new Color(colors[i]);
      red[i] = color.getRed();
      green[i] = color.getGreen();
      blue[i] = color.getBlue();
    }
  }
} 
```

有关在 MySQL 数据库中保存和检索字节的完整示例，请参阅[此要点](https://gist.github.com/RaffaeleSgarro/5325399)。

# git - Git 提交返回“没有提交”

> ID：15848270
> 
> 赞同：3
> 
> 时间：2013-04-06T07:32:41.817
> 
> 标签：git, commit

我正在遵循 [https://devcenter.heroku.com/articles/facebook#what_is_heroku的说明](https://devcenter.heroku.com/articles/facebook#what_is_heroku)

我已经编辑过一次文件并将更改成功推送到应用程序。但是当我尝试进行第二次更改并再次推动时；它在提交步骤失败。

我收到错误“在分支主机上没有提交工作目录干净”前面的步骤工作得很好。

克隆工作正常 Git 远程返回 Heroku 好吧

我试过 git add。在提交之前；和 git pull （它返回已经是最新的）。

有人可以帮忙吗？

# python - 单元测试 - “NameError：未定义全局名称”

> ID：15848275
> 
> 赞同：0
> 
> 时间：2013-04-06T07:32:58.260
> 
> 标签：python, math, import, doctest

我试图弄清楚如何在 Python 中为我的函数编写单元测试 - 这是下面编写的代码：

```
def num_buses(n):
    import math
    """ (int) -> int

    Precondition: n >= 0

    Return the minimum number of buses required to transport n people.
    Each bus can hold 50 people.

    >>> num_buses(75)
    2
    """
    bus = int()
    if(n>=0):
        bus = int(math.ceil(n/50.0))
    return bus 
```

我正在尝试编写测试代码，但结果失败 - 这是我开始使用的代码：

```
import a1
import unittest

class TestNumBuses(unittest.TestCase):
    """ Test class for function a1.num_buses. """
    def test_numbuses_1(self):
        actual = num_buses(75)
        expected = 2
        self.assertEqual(actual, expected)

    # Add your test methods for a1.num_buses here.

if __name__ == '__main__':
    unittest.main(exit=False) 
```

当我按 F5 运行模块时 - 这就是我得到的 -

```
E
======================================================================
ERROR: test_numbuses_1 (__main__.TestNumBuses)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\1-blog-cacher\TestNumBuses.py", line 8, in test_numbuses_1
    actual = num_buses(75)
NameError: global name 'num_buses' is not defined

----------------------------------------------------------------------
Ran 1 test in 0.050s

FAILED (errors=1) 
```

它应该通过，因为乘客人数为 75 人，每辆公共汽车最多可容纳 50 人 - 超过此数量将导致数字四舍五入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T07:35:20.213

假设您的代码在模块中`a1`，请尝试`num_buses`以`a1`, so开头`a1.num_buses`。问题是您的单元测试位于不同的模块中，并且该`num_buses`模块中的函数`a1.num_buses`在测试的命名空间中被引用，因此出现`global`错误。因此，将您的测试更改为：

```
class TestNumBuses(unittest.TestCase):
    """ Test class for function a1.num_buses. """
    def test_numbuses_1(self):
        actual = a1.num_buses(75)
        expected = 2
        self.assertEqual(actual, expected) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T07:36:06.800

您的错误表明 num_buses 存在问题。尝试

```
actual = a1.num_buses(75) 
```

# c - 多维阵列打印带来不同的东西

> ID：15848277
> 
> 赞同：0
> 
> 时间：2013-04-06T07:33:13.227
> 
> 标签：c, multidimensional-array

```
#include <stdio.h>

int main(int argc, char **argv) {

int x[5][5] = {{0,1,2,3,4},{5,6,7,8,9}};

for (int i = 0; i < 4; i++) {
    for (int j = 0; i < 4; i++) {
        printf("%d\n", x[i][j]); } }

return 0; } 
```

这应该给我：0 1 2 3 4 5 6 7 8 9

结果是：0 5 0 0

然后，当我将它们更改为字符时：

```
#include <stdio.h>

int main(int argc, char **argv) {

char x[5][5] = {{'0','1','2','3','4'},{'5','6','7','8','9'}};

for (int i = 0; i < 4; i++) {
    for (int j = 0; i < 4; i++) {
        printf("%d\n", x[i][j]); } }

return 0; } 
```

我得到 48 53 0 0。

为什么？代码对我来说很清楚，但似乎在背景上发生了一些模糊的事情（或者我的大脑以一种非常“pythonic”的方式工作......）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T07:36:54.910

就像@Keith Thompson 所说，您没有初始化所有 25 个元素。所以剩下的元素被初始化为`0`. 因此，数据将以这种方式存储：

```
 0 | 1 | 2 | 3 | 4     // Row 0
  5 | 6 | 7 | 8 | 9     // Row 1
  0 | 0 | 0 | 0 | 0     // Row 2
  0 | 0 | 0 | 0 | 0     // Row 3
  0 | 0 | 0 | 0 | 0     // Row 4 
```

您只初始化了数组的前两行。这就是为什么你得到`0 5 0 0`你的输出的原因。

要获得正确的输出，您需要遍历数组的前两行。

# 解决此问题的步骤：

**第一的**

您需要将您的第一个 for 循环从：

```
for (int i = 0; i < 4; i++) 
```

到

```
for (int i = 0; i < 2; i++) 
```

原因：因为您只想遍历前两行*（第 0 行和第 1 行）*。

**第二**

你需要改变你的第二个for循环：

```
for (int j = 0; i < 4; i++) 
```

到：

```
for (int j = 0; j < 5; j++) 
```

`j`原因：您的循环条件需要变量，而不是`i`. 您还需要从 更改`4`为`5`; 因为在数组中，索引从 0 开始。所以，每列的索引`0,1,2,3,4`分别是 。

# 总而言之，您的代码应该是...

```
for (int i = 0; i < 2; i++) 
{
    for (int j = 0; j < 5; j++) 
    {
        printf("%d\n", x[i][j]); 
    } 
} 
```

此外，当您更改为 时`char x[5][5]`，您需要使用`%c`, 来打印字符，而不是 `%d`.

此外，你得到奇怪数字的原因是`48`因为当你打印 a `char`with 时`%d`，你实际上是在打印它的[ASCII](http://en.wikipedia.org/wiki/ASCII)值。参考下面的 ASCII 表，数字`48`代表字符`'0'`。

![http://www.asciitable.com/](https://i.stack.imgur.com/1SJ93.gif) 图片来自[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:44:22.840

```
for(i = 0 ; i < 2 ; i++)
for(j = 0 ; j < 5 ; j++)
printf("%d\n",x[i][j]); 
```

我不知道你为什么只初始化 2 个一维数组。但是更改 for 循环中的边界应该足以满足您的需求

# php - 无法在php中创建动态数组

> ID：15848279
> 
> 赞同：1
> 
> 时间：2013-04-06T07:33:19.203
> 
> 标签：php, arrays, dynamic-arrays

我是 PHP 新手，在下面的代码中 $strng 值是为数组动态创建的。

```
$strng='"Active Life" => "6","Arts & Entertainment" => "4","Beauty & Spa" => "3","Food & Drink" => "1","Hotels" => "10","Local Services" => "8","Nightlife" => "2","Pets" => "9","Public Services" => "7","Shopping" => "5"';
$bussCatry=array($strng);

foreach($bussCatry as $x=>$x_value)
{
    error_log( "Key=" . $x . ", Value=" . $x_value);      
} 
```

但是当我尝试创建数组时，我失败了，我的输出低于预期。只有一个键值对

```
Key=0, 
Value="Active Life" =>"6",
"Arts & Entertainment" =>"4",
"Beauty & Spa" =>"3",
"Food & Drink" =>"1",
"Hotels" =>"10",
"Local Services" =>"8",
"Nightlife" =>"2",
"Pets" =>"9",
"Public Services" =>"7",
"Shopping" =>"5" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:38:20.307

查看 php 的[数组](http://php.net/manual/en/language.types.array.php)语法。

尝试这个：

```
$bussCatry = array(
  'Active Life' => '6',
  'Arts & Entertainment' => '4',
  'Beauty & Spa' => '3',
  'Food & Drink' => '1',
  'Hotels' => '10',
  'Local Services' => '8',
  'Nightlife' => '2',
  'Pets' => '9',
  'Public Services' => '7',
  'Shopping' => '5',
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:39:58.817

嗯，如果真的有必要，你可以试试这个：

```
eval("\$bussCatry = array({$strng});"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:41:02.180

创建一个数组直接赋值。

```
$bussCatry = array(
        "Active Life" => "6",
        "Arts & Entertainment" => "4",
        "Beauty & Spa" => "3",
        "Food & Drink" => "1",
        "Hotels" => "10",
        "Local Services" => "8",
        "Nightlife" => "2",
        "Pets" => "9",
        "Public Services" => "7",
        "Shopping" => "5"
); 
```

不要`array values`使用`single quotes`. 它不像`array`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T07:41:48.240

array() 函数不解析字符串。

```
array("a" => "orange", "b" => "banana", "c" => "apple") 
```

正如您在示例中看到的那样，不仅有一个简单的字符串，还有参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T07:43:12.233

试试这个代码，你发布了错误的代码。

```
$strng=array("Active Life" => "6","Arts & Entertainment" => "4","Beauty & Spa" => "3","Food & Drink" => "1","Hotels" => "10","Local Services" => "8","Nightlife" => "2","Pets" => "9","Public Services" => "7","Shopping" => "5");
 //$bussCatry=array($strng);

foreach($strng as $x=>$x_value)
   {
   echo( "Key=" . $x . ", Value=" . $x_value);

  } 
```

请让我知道这对你有没有用 ：）

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T08:39:43.550

看一下[token_get_all](http://php.net/manual/en/function.token-get-all.php)，您可以将字符串解析为令牌，然后根据需要构建您的数组。对不起，它有点乱，但它是一个体面的工作启动器。

```
<?php
define('STATE_WAITING_FOR_ARRAY',   1);
define('STATE_WAITING_FOR_KEY',     2);
define('STATE_WAITING_FOR_VALUE',   3);

$string = '"Active Life" => "6","Arts & Entertainment" => "4","Beauty & Spa" => "3","Food & Drink" => "1","Hotels" => "10","Local Services" => "8","Nightlife" => "2","Pets" => "9","Public Services" => "7","Shopping" => "5"';
$string = sprintf('<?php array(%s); ?>', $string);
$tokens = token_get_all($string);

$state = STATE_WAITING_FOR_ARRAY;

$array = array();

foreach($tokens as $token) {

    if( ! is_array($token)) {
        continue;
    }

    $name   = token_name($token[0]);
    $value  = $token[1];

    if(STATE_WAITING_FOR_ARRAY === $state && 'T_ARRAY' === $name) {
        $state = STATE_WAITING_FOR_KEY;
        continue;
    }

    if(STATE_WAITING_FOR_KEY === $state && 'T_CONSTANT_ENCAPSED_STRING' === $name) {
        $state  = STATE_WAITING_FOR_VALUE;
        $key    = $value;
        continue;
    }

    if(STATE_WAITING_FOR_VALUE === $state && 'T_CONSTANT_ENCAPSED_STRING' === $name) {
        $state          = STATE_WAITING_FOR_KEY;
        $array[$key]    = $value;
        $key            = null;
        continue;
    }
}

var_dump($array);

/*
    array(10) {
      [""Active Life""]=>
      string(3) ""6""
      [""Arts & Entertainment""]=>
      string(3) ""4""
      [""Beauty & Spa""]=>
      string(3) ""3""
      [""Food & Drink""]=>
      string(3) ""1""
      [""Hotels""]=>
      string(4) ""10""
      [""Local Services""]=>
      string(3) ""8""
      [""Nightlife""]=>
      string(3) ""2""
      [""Pets""]=>
      string(3) ""9""
      [""Public Services""]=>
      string(3) ""7""
      [""Shopping""]=>
      string(3) ""5""
    }
*/ 
```

# java - 在Java中交换字符串的第一个和最后一个字母？

> ID：15848281
> 
> 赞同：1
> 
> 时间：2013-04-06T07:33:36.803
> 
> 标签：java, string, char

```
int length = s.length();

if (length <= 1){
    return s;
}

else {

    return s.charAt(length) + s.substring(1, length-1) + s.charAt(0);

} 
```

我只是想交换字符串的第一个字母和最后一个字母。

例如。苹果-> eppla

它编译得很好，可以很好地处理一个空字符串或一个只有一个字符的字符串。但是对于带有多个字符的字符串，它会说：

```
StringIndexOutOfBoundsException occured - see console for stack trace 
```

这是否意味着我的代码有问题？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T07:34:58.163

试试这个：

```
int length = s.length();

if (length <= 1) {
    return s;
} else {
    return s.charAt(length - 1) + s.substring(1, length - 1) + s.charAt(0);
} 
```

不同的是`s.charAt(length - 1)`。请记住，字符串是零索引的，所以最后一个字符是`s.charAt(length - 1)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T07:36:18.500

你想要 s.charAt(length - 1) 开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-25T12:30:30.097

```
if(str.length()<=1){return str;}

String middle=str.substring(1,str.length()-1);

return str.charAt(str.length()-1)+middle+str.charAt(0); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-07T04:29:12.897

```
String str;
Scanner sc=new Scanner(System.in);
System.out.println("Enter the String");
str=sc.nextLine();
String word[]=str.split(" ");
int len=word.length;
String temp=word[0];
word[0]=word[len-1];``
word[len-1]=temp;
for (int i = 0; i < word.length; i++) {
    System.out.print(word[i]+" ");
} 
```

# html - HTML 未正确呈现

> ID：15848286
> 
> 赞同：0
> 
> 时间：2013-04-06T07:34:57.237
> 
> 标签：html, css, rendering

我正在按照 Ruby 教程制作示例应用程序。我制作了注册页面，但注册时的错误以一种有趣的方式呈现。错误行末尾的句点在它之前。而且星号和项目符号点位于错误的一端。

这是页面源HTML源代码：

```
<div class="container">
            <h1>Sign up</h1>
<div class="row">
    <div class="span6 offset3">
        <form accept-charset="UTF-8" action="/users" class="new_user" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="UPwVQbjK5hdjlsXerJfnAESR61pKf3l/K1u2/05+ILY=" /></div>
                <div id="error explanation">
        <div class="alert alert-error">
            The form contains 2 errors.
        </div>
        <ul>
                <li>* Password doesn't match confirmation</li>
                <li>* Email is invalid</li>
        </ul>
    </div> 
```

这是它的外观：

![在此处输入图像描述](https://i.stack.imgur.com/E08kR.png)

这是CSS：

```
#error_explanation {
    color: #f00;
    ul {
        list-style: none;
        margin: 0 0 18px 0;
    }
} 
```

另外我想提一下，输入字段也有类似的问题，输入光标位于框的右端（如阿拉伯语文本）。`direction: ltr;`我通过在我的输入 textarea css 中添加该行来解决这个问题：

```
input, textarea, select, .uneditable-input {
    border: 1px solid #bbb;
    width: 100%;
    padding: 10px;
    height: auto;
    margin-bottom: 15px;
    direction: ltr;
    @include box_sizing;
} 
```

我在我的css中添加了方向样式，但这没有用。我想不出别的了。请告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:06:12.353

因此，即使@Sam 提出的建议有效，我在网站的其他地方也发现了同样的问题。我使用方向修复了它们中的大多数：ltr。后来当我部署到 Heroku 时，很多事情都失败了。当我寻找解决方案时，我发现我需要在部署到 Heroku 之前预编译我的资产。我正在使用引导程序。

出人意料`bundle exec rake assets:precompile`地解决了 localhost 和 Heroku 上的问题。

所以，是的，问题出在资产管道编译中。

# r - R中的切割和表格功能

> ID：15848289
> 
> 赞同：0
> 
> 时间：2013-04-06T07:35:12.737
> 
> 标签：r

```
x<-sample(30:60,50,TRUE)
y<-cut(x,breaks=c(30,40,50,60))
y
[1] (30,40] (30,40] (50,60] (40,50] (40,50] (40,50] (40,50] (30,40] (30,40]
[10] (50,60] (30,40] (50,60] (30,40] (30,40] (50,60] (50,60] (50,60] (30,40]
[19] (50,60] (30,40] (40,50] (40,50] (30,40] (30,40] (30,40] (40,50] (30,40]
[28] (50,60] (40,50] (40,50] (30,40] (50,60] (40,50] (50,60] (50,60] (30,40]
[37] (50,60] (50,60] (30,40] (50,60] (30,40] (30,40] <NA> (40,50] (30,40]
[46] (40,50] (30,40] (30,40] (30,40] (30,40]
Levels: (30,40] (40,50] (50,60]
table(y)
y
(30,40] (40,50] (50,60]
23 12 14
table(y)[1]
(30,40]
23 
```

问题1：

如果添加了 right=FALSE，则间隔为
(30,40] (40,50] (50,60]

如果添加 right=TRUE，则区间为
[30,40) [40,50) [50,60)

我怎样才能得到诸如 `[30,40] (40,50] (50,60]`或'[30,40）[40,50）[50,60]'之类的间隔？

问题2：

```
table(y)[1]  
(30,40]
23 
```

我知道区间 (30,40] 中有 23 个数字，我可以用 . 得到它们 `x[x<=40 & x>30]`。
有没有更好的方法来得到结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:04:40.000

对于问题 2，只需使用 cut 的输出

```
x[y == "(30,40]"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:30:39.570

对于您的问题＃2，这取决于您所说的“更好”是什么意思。

这是一种选择：

```
library(TeachingDemos)
x[ 30 %<% x %<=% 40 ] 
```

或者，`cut`您可以使用`findInterval`：

```
y <- findInterval(x, c(30,40,50,60))
x[ y==1 ] 
```

你也可以看看`subset`函数。

如果这些不符合您对“更好”的定义，请告诉我们更多关于您想要什么的信息。

# javascript - 使用 Javascript 完整加载 ASPX 页面

> ID：15848291
> 
> 赞同：0
> 
> 时间：2013-04-06T07:35:24.450
> 
> 标签：javascript, jquery, sharepoint, get

我正在为 Microsoft SharePoint 编写一个单页 Web 应用程序。

我想用 提取内容`$.get()`，但我遇到了一些问题 22。

如果我像这样拉入内容：

```
function getLocalPage(url, callback) {
    $.get(url, function(data) {
        var $page = $(data).filter('.tileContent').html();
        callback($page);
    });
} 
```

我得到了我正在寻找的节点，但我的脚本标签已被删除。

如果我像这样拉入内容：（参考：[jquery html() 剥离脚本标签](https://stackoverflow.com/questions/4079179/jquery-html-strips-out-script-tags)）

```
function getLocalPage(url, callback) {
    $.get(url, function(data) {
        var dom = $(data);
        dom.filter('script').each(function(){
            $.globalEval(this.text || this.textContent || this.innerHTML || '');
        });
        var $page = dom.filter('.tileContent');
        callback($page);
    });
} 
```

SharePoint 中嵌入的 javascript 炸毁了我的页面，并且似乎导致了完整的回发。

有什么方法可以只获取我想要的节点，并且脚本标签完好无损？
似乎不能两全其美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:19:34.563

而不是简写的 jQuery 方法`.get()`，尝试`.ajax()`使用`dataType: 'html'`

该`.ajax()`文件说`dataType: 'html'`：

> “html”：以纯文本形式返回 HTML；包含的脚本标签在插入 DOM 时进行评估。

它还说：

> “如果指定了‘html’，则检索数据中的任何嵌入 JavaScript 都会在 HTML 作为字符串返回之前执行。”

这里的重点是“之前”这个词，这意味着嵌入式 JavaScript 在执行时不能*直接*作用于交付它的 HTML（或生成的 DOM 片段），尽管它可以直接作用于现有的 DOM，先于进行片段插入。

但是，嵌入式 JavaScript 中包含的任何**函数**确实**可以**用于处理 HTML/DOM 片段和整个 DOM，如果**稍后调用**的话。调用此类函数的第一个机会是在`.ajax()`成功处理程序（或链式`.done()`处理程序）中。

除非采取非同寻常的（并且可能是混乱的）措施，否则成功处理程序（或由它调用的任何函数）将需要事先“了解”以这种方式传递的任何函数的名称，否则（实际上）它们将是不可调用的。

我不确定在`$(function() {...});`结构内传递的代码是否*可以*在当前事件线程完成时执行（？）。如果是这样，那么它*可能*会作用于交付的 HTML/DOM 片段。无论如何尝试。

考虑到所有这些，请尝试以下方法，并在响应中使用适当的 JavaScript 措辞。

```
function getLocalPage(url, callback) {
    $.ajax({
        url: url,
        dataType: 'html',
        success: function(data) {
            callback($(data).find('.tileContent'));
        }
    });
} 
```

或更好 ：

```
function getLocalPage(url, callback) {
    $.ajax({
        url: url,
        dataType: 'html'
    }).done(function(data) {
        callback($(data).find('.tileContent'));
    });
} 
```

笔记：

*   我更改`.filter()`为`.find()`，这似乎更合适，但您可能需要将其更改回来。
*   您的最终版本可能有更多`.ajax()`选择。

# c++ - 指向单个位的 C/C++ 指针类型？

> ID：15848292
> 
> 赞同：6
> 
> 时间：2013-04-06T07:35:35.240
> 
> 标签：c++, c, pointers

我想修改单个数据位（例如`int`s 或`char`s）。我想通过制作一个指针来做到这一点，比如说`ptr`。通过将其分配给某个 int 或 char，然后在递增`ptr`n 次后，我想访问该数据的第 n 位。就像是

```
// If i want to change all the 8 bits in a char variable
char c="A";
T *ptr=&c; //T is the data type of pointer I want..
int index=0;
for(index;index<8;index++)
{
    *ptr=1;  //Something like assigning 1 to the bit pointed by ptr...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T07:39:11.817

C++ 中没有位指针之类的东西。您需要使用两件事，一个字节指针和一个位偏移量。这似乎是您在代码中的目标。以下是您如何执行各个位操作。

```
// set a bit
*ptr |= 1 << index;

// clear a bit
*ptr &= ~(1 << index);

// test a bit
if (*ptr & (1 << index))
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T07:39:02.420

C 和 C++ 中最小的可寻址内存单元是 1 个字节。所以你不能有一个指向任何小于一个字节的指针。如果你想执行按位操作，C 和 C++ 为这些操作提供**[按位运算符](http://en.wikipedia.org/wiki/Bitwise_operations_in_C)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T07:45:23.747

不可能有单个位的地址，但您可以使用具有位域的结构。[就像在维基百科](http://en.wikipedia.org/wiki/Bit_field)的这个例子中一样：

```
struct box_props
{
     unsigned int opaque       : 1;
     unsigned int fill_color   : 3;
     unsigned int              : 4; // fill to 8 bits
     unsigned int show_border  : 1;
     unsigned int border_color : 3;
     unsigned int border_style : 2;
     unsigned int              : 2; // fill to 16 bits
}; 
```

然后通过操作单个字段，您将更改内部的位集`unsigned int`。从技术上讲，这与按位运算相同，但在这种情况下，编译器将生成代码（并且您出现错误的可能性较低）。

请注意，您必须谨慎使用位字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T07:49:14.000

C 和 C++ 没有“位指针”，从技术上讲，C 和 C++ 本身并不知道“位”。您可以构建自己的类型，为此，您需要两件事：指向某种类型的指针（`char`, `int`- 可能是无符号的）和一个位数。然后，您将使用指针和位数以及按位运算符来实际访问这些值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T07:48:50.587

没有什么能比得上指向位的指针

如果您希望将所有位设置为 1，那么`c = 0xff;`这就是您想要的，如果您想在某些条件下设置位：

```
for(index;index<8;index++)
{
    if (condition) c |= 1 << index;
} 
```

如您所见，无需使用指针

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T07:49:47.277

你不能从内存中读取一个位，CPU 总是读取一个完整的缓存行，对于不同的 CPU 可能有不同的大小。

但是从语言的角度来看，您可以使用位域

*   [http://publications.gbdirect.co.uk/c_book/chapter6/bitfields.html](http://publications.gbdirect.co.uk/c_book/chapter6/bitfields.html)

*   [http://en.wikipedia.org/wiki/Bit_field](http://en.wikipedia.org/wiki/Bit_field)

# php - 在哪里获得 SNMP 类的 php

> ID：15848298
> 
> 赞同：0
> 
> 时间：2013-04-06T07:36:45.900
> 
> 标签：php, snmp, net-snmp

我找到了这个[http://www.php.net/manual/en/class.snmp.php](http://www.php.net/manual/en/class.snmp.php)，但我找不到下载这个脚本的链接。我尝试在WEB中搜索，但结果相同。

或者是否有任何带有 php 扩展名的方法来创建一个会话并使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:42:45.567

它在压缩包中。你可以从[官网下载](http://php.net/downloads.php)

看看它：

```
$ tar jtf php-5.4.13.tar.bz2 | grep snmp
php-5.4.13/ext/snmp/
php-5.4.13/ext/snmp/config.m4
php-5.4.13/ext/snmp/config.w32
php-5.4.13/ext/snmp/CREDITS
php-5.4.13/ext/snmp/php_snmp.h
php-5.4.13/ext/snmp/snmp.c
php-5.4.13/ext/snmp/snmp.dsp
php-5.4.13/ext/snmp/tests/
php-5.4.13/ext/snmp/tests/bug60749.phpt
php-5.4.13/ext/snmp/tests/bug64124.phpt
php-5.4.13/ext/snmp/tests/clean.inc
php-5.4.13/ext/snmp/tests/generic_timeout_error.phpt
php-5.4.13/ext/snmp/tests/ipv6.phpt
php-5.4.13/ext/snmp/tests/README
php-5.4.13/ext/snmp/tests/skipif.inc
php-5.4.13/ext/snmp/tests/snmp-object-errno-errstr.phpt
php-5.4.13/ext/snmp/tests/snmp-object-error.phpt
php-5.4.13/ext/snmp/tests/snmp-object-properties.phpt
php-5.4.13/ext/snmp/tests/snmp-object-setSecurity_error.phpt
php-5.4.13/ext/snmp/tests/snmp-object.phpt
php-5.4.13/ext/snmp/tests/snmp2_get.phpt
php-5.4.13/ext/snmp/tests/snmp2_getnext.phpt
php-5.4.13/ext/snmp/tests/snmp2_real_walk.phpt
php-5.4.13/ext/snmp/tests/snmp2_set-nomib.phpt
php-5.4.13/ext/snmp/tests/snmp2_set.phpt
php-5.4.13/ext/snmp/tests/snmp2_walk.phpt
php-5.4.13/ext/snmp/tests/snmp3-error.phpt
php-5.4.13/ext/snmp/tests/snmp3.phpt
php-5.4.13/ext/snmp/tests/snmp_get_quick_print.phpt
php-5.4.13/ext/snmp/tests/snmp_get_valueretrieval.phpt
php-5.4.13/ext/snmp/tests/snmp_getvalue.phpt
php-5.4.13/ext/snmp/tests/snmp_include.inc
php-5.4.13/ext/snmp/tests/snmp_read_mib.phpt
php-5.4.13/ext/snmp/tests/snmp_set_enum_print.phpt
php-5.4.13/ext/snmp/tests/snmp_set_oid_output_format.phpt
php-5.4.13/ext/snmp/tests/snmpd.conf
php-5.4.13/ext/snmp/tests/snmpget.phpt
php-5.4.13/ext/snmp/tests/snmpgetnext.phpt
php-5.4.13/ext/snmp/tests/snmprealwalk.phpt
php-5.4.13/ext/snmp/tests/snmpset-nomib.phpt
php-5.4.13/ext/snmp/tests/snmpset.phpt
php-5.4.13/ext/snmp/tests/snmpwalk.phpt
php-5.4.13/ext/snmp/tests/wrong_hostname.phpt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T04:35:58.937

“SNMP”类（在 PHP 5.4 中引入）*不是*“脚本”；相反，它是一个扩展，可以编译*到*PHP 中，也可以作为可以启用或禁用的模块提供。我怀疑（1）您使用的是旧版本的 PHP，或者（2）您没有安装或启用 SNMP 扩展。

# ruby-on-rails - Rails link_to 参数指示控制器中的控制流

> ID：15848299
> 
> 赞同：0
> 
> 时间：2013-04-06T07:36:49.503
> 
> 标签：ruby-on-rails, routes, link-to

因此，我一直在努力尝试准确了解我可以在 Rails 中使用 link_to 做什么。我发现的有些东西是旧的，有些是新的，有些看起来与我所拥有的非常不同。具体来说，我试图在一个视图中有两个链接。一个是“加 1”，一个是“减 1”。当我到达控制器时，我想根据使用的链接从我的模型中添加或减去一个。以下是链接：

```
<%= link_to "Add 1", item, method: :put, title: item.name %>
<%= link_to "Minus 1", item, method: :put, title: item.name %> 
```

我的控制器（项目控制器）方法是：

```
def update
    @item = current_user.item.find(params[:id])
    @item.quantity += #+1 or -1 depending on what is passed
    if @item.save
        flash[:success] = "Item updated."
    end
    redirect_to current_user
end 
```

由于我使用 :put 调用 link_to 我不太确定如何区分哪个 :put 是哪个，因为除了链接名称之外，两个链接都是相同的。我想我正在用`title: item.name`参数识别特定项目。是否仅通过`item`路径识别？我应该把“:title”改成“+1”还是“-1”？我真的很感激澄清，因为这让我很困惑。我还在文档中注意到“html 选项”与“url 选项”，但我无法解读差异？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:44:54.090

您可以在 URL 中传递其他参数：

```
<%= link_to "Add 1", item_path(item, perform: 'add'), method: :put %>
<%= link_to "Sub 1", item_path(item, perform: 'sub'), method: :put %>

def update
    @item = current_user.item.find(params[:id])
    params[:perform] == 'sub' ? @item.quantity -= 1 : @item.quantity += 1 
    if @item.save
        flash[:success] = "Item updated."
    end
    redirect_to current_user
end 
```

或者也许将成员操作添加到您的`item resource`：

```
resources :items do
  member do
    put 'sub'
    put 'add'
  end
end

link_to "Add 1", [:add, item], method: :put
link_to "Sub 1", [:sub, item], method: :put 
```

# ios - iPhone 5上不同宽度的按钮

> ID：15848300
> 
> 赞同：3
> 
> 时间：2013-04-06T07:36:51.423
> 
> 标签：ios, objective-c, iphone-5

如果用户使用的是 iPhone 5，我想增加自定义按钮的大小。

这就是我的 .m 文件中的内容

```
//.m File
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        int varWidth = 228;
    }
    if(result.height == 568)
    {
        int varWidth = 272;
    }
}

....

[newButton setFrame:CGRectMake(8.0, 40.0, 228, 80.0)]; 
```

但我想要这样的东西：

```
[newButton setFrame:CGRectMake(8.0, 40.0, varWidth, 80.0)]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T07:39:33.487

您正在使用`varWidth`超出其范围。

```
int varWidth;

if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        varWidth = 228;
    }
    if(result.height == 568)
    {
        varWidth = 272;
    }
}

....

[newButton setFrame:CGRectMake(8.0, 40.0, varWidth, 80.0)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T07:43:45.057

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
       [newButton setFrame:CGRectMake(8.0, 40.0, 228.0, 80.0)];
    }
    if(result.height == 568)
    {
       [newButton setFrame:CGRectMake(8.0, 40.0, 272, 80.0)];
    }
} 
```

为什么不这样做呢？

另一个建议：

使用#define。

例如：

```
#define iPhone5width 272
#define iPhone4width 228

if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
       [newButton setFrame:CGRectMake(8.0, 40.0, iPhone4width, 80.0)];
    }
    if(result.height == 568)
    {
       [newButton setFrame:CGRectMake(8.0, 40.0, iPhone5width, 80.0)];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T07:56:18.643

对于检查设备，最好和最简单的方法是`iPhone 5 or iPhone5 < (Less Then)`。为此，您需要在`.pch`项目文件中编写以下代码。

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

这个 Like 检查设备，是不是 iPhone5。

你只需要写一个条件来管理它

```
if( IS_IPHONE_5 )
        // set or put code related to iPhone 5.
else
        // set or put code related to less then iPhone 5. 
```

# angularjs - angularjs业务逻辑

> ID：15848303
> 
> 赞同：1
> 
> 时间：2013-04-06T07:37:12.113
> 
> 标签：angularjs

在 Angularjs 中，可以使用一个 restful 服务器 api 来存储所有嵌入在 Javascript 中的业务逻辑的对象。大多数例子似乎都指向了这个方向。

这在可维护性和安全性方面都不是不好的做法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T17:52:44.177

这个问题*有点*模糊，但我会尝试给出一个广泛的答案：我不认为将逻辑迁移到客户端是不好的做法。

**可维护性**

天哪！我的职业生涯是从后端开始的，我可以非常自信地说，代码是在前面还是在后面对它的可维护性没有影响；代码就是代码。无论我们将其放置在客户端的可重用服务组件中还是服务器上的可重用库中，变更管理都非常相似。有关重要的附加说明，请参阅安全部分。

**商业逻辑**

老实说，我一直不明白为什么开发人员在谈到他们的业务逻辑时会如此沉默寡言。在他们看来，如果有人对他们的代码进行逆向工程，他们就会发现一些他们从未想过的神奇现实——他们将见证开发人员的天才！- 现在将有足够的武装来实施某种市场侵略行为。

这是荒谬的。他们可以看到您的服务；他们可以看到您的用户界面；他们知道目标。如果他们想复制你，他们已经可以了。我们的业务逻辑是我们产品的关键，这是非常罕见的*。*在 99% 的情况下，这不是问题。

无论如何，业务中心的任何大规模复杂算法都不会最终出现在客户端上，对吧？我们使用 map/reduce 操作和语义图对我们的分布式文件存储进行了大量提升......

**安全**

一如既往，这是一个重要的考虑因素，但关键在于 REST API。REST API 是不可篡改的官方网关。如果我们的`user`模型需要一个`first_name`字段，那么 REST API 的工作就是确保该字段存在。我们可能还会在客户端引入检查，但这些检查几乎总是考虑到用户体验：同步和即时反馈优于异步和延迟反馈。

任何与严格定义的安全相关的东西都在服务器上。身份验证和授权显然在服务器上。他们从不在客户端。因此，我们不会通过选择单页应用程序范式来引入任何漏洞。想想 Twitter、Google 产品或 Facebook——它们都有开放的 API，我们可以使用这些 API 代替 Web 界面来实现相同的目标。API 执行关键规则，确保适当的安全性，但将用户体验留给客户端。

显然，这意味着*一些*逻辑在客户端和服务器上是重复的，比如基本验证。当然。但我们这样做是为了用户体验。它在我们的变更管理流程中引入了更多的复杂性，但它*远远超过*了用户体验的收益。

# coldfusion - Mura CMS 插件会话

> ID：15848312
> 
> 赞同：0
> 
> 时间：2013-04-06T07:37:57.663
> 
> 标签：coldfusion, mura

我正在开发一个插件来处理站点成员的一些更高级搜索，并查看站点成员的高级搜索 (cpublicusers.dsp_advancedsearch.cfm) 我发现它进行分页的方式是将搜索表单设置为会议。我尝试使用此代码执行以下操作：

```
 <cfif NOT structKeyExists(SESSION,'reportForm')>

 <cfset SESSION.reportForm = FORM />

 <cfset sessionisset = true />

 <cfelse>
 <cfset sessionisset = false /> 
```

sessionisset 变量仅用于我的测试。当我尝试导航到分页时，我发现 session.reportForm 变量正在被清除。谁能解释为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T13:26:35.440

FORM 是在每一页上重新初始化的系统结构。结构是“通过引用”传递的，这意味着您只是存储了一个指向 FORM 的指针。因此，当重新初始化 FORM 时 - 您的会话变量也是如此。

解决方法是制作结构的深层副本，使其不受 FORM 更改的影响。查看源打印？

```
<cfset SESSION.reportForm = duplicate(FORM) /> 
```

# c++ - 如何编写一个程序来重命名 mp4 文件以匹配 srt 文件的名称？

> ID：15848317
> 
> 赞同：0
> 
> 时间：2013-04-06T07:38:46.413
> 
> 标签：c++, python, algorithm, file-rename

所以我从 Coursera 下载了“计算机网络简介”课程的 mp4 和 srt 文件。但 mp4 和 srt 文件的名称略有不同。

文件名示例如下：

```
1 - 1 - 1-1 Goals and Motivation (1253).mp4
1 - 1 - 1-1 Goals and Motivation (12_53).srt
1 - 2 - 1-2 Uses of Networks (1316).mp4
1 - 2 - 1-2 Uses of Networks (13_16).srt
1 - 3 - 1-3 Network Components (1330).mp4
1 - 3 - 1-3 Network Components (13_30).srt
1 - 4 - 1-4 Sockets (1407).mp4
1 - 4 - 1-4 Sockets (14_07).srt
1 - 5 - 1-5 Traceroute (0736).mp4
1 - 5 - 1-5 Traceroute (07_36).srt
1 - 6 - 1-6 Protocol Layers (2225).mp4
1 - 6 - 1-6 Protocol Layers (22_25).srt
1 - 7 - 1-7 Reference Models (1409).mp4
1 - 7 - 1-7 Reference Models (14_09).srt
1 - 8 - 1-8 Internet History (1239).mp4
1 - 8 - 1-8 Internet History (12_39).srt
1 - 9 - 1-9 Lecture Outline (0407).mp4
1 - 9 - 1-9 Lecture Outline (04_07).srt
2 - 1 - 2-1 Physical Layer Overview (09_27).mp4
2 - 1 - 2-1 Physical Layer Overview (09_27).srt
2 - 2 - 2-2 Media (856).mp4
2 - 2 - 2-2 Media (8_56).srt
2 - 3 - 2-3 Signals (1758).mp4
2 - 3 - 2-3 Signals (17_58).srt
2 - 4 - 2-4 Modulation (1100).mp4
2 - 4 - 2-4 Modulation (11_00).srt
2 - 5 - 2-5 Limits (1243).mp4
2 - 5 - 2-5 Limits (12_43).srt
2 - 6 - 2-6 Link Layer Overview (0414).mp4
2 - 6 - 2-6 Link Layer Overview (04_14).srt
2 - 7 - 2-7 Framing (1126).mp4
2 - 7 - 2-7 Framing (11_26).srt
2 - 8 - 2-8 Error Overview (1745).mp4
2 - 8 - 2-8 Error Overview (17_45).srt
2 - 9 - 2-9 Error Detection (2317).mp4
2 - 9 - 2-9 Error Detection (23_17).srt
2 - 10 - 2-10 Error Correction (1928).mp4
2 - 10 - 2-10 Error Correction (19_28).srt 
```

我想**重命名 mp4 文件**以匹配 srt 文件，以便 vlc 在我播放视频时可以自动加载字幕。有人讨论的是算法来做到这一点？您还可以提供任何语言的解决方案代码，因为我熟悉许多编程语言。但是python和c++更可取。

**编辑**：感谢所有回复的人。我知道重命名 srt 文件比其他方式更容易。但我认为重命名 mp4 文件会更有趣。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:55:13.540

如果所有这些文件都真正遵循这个方案，那么 Python 实现几乎是微不足道的：

```
import glob, os

for subfile in glob.glob("*.srt")
    os.rename(subfile, subfile.replace("_","")) 
```

如果您的 mp4 还包含下划线，您想为它们添加一个额外的循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T07:56:11.020

`for f in *.srt; do mv $f ${f%_}; done`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T07:56:22.223

这是python中的快速解决方案。

如果您做出以下假设，这项工作很简单：

1.  所有文件都在同一个文件夹中
2.  您在目录中有相同数量的 srt 和 mp4 文件
3.  所有 srt 都按字母顺序排列，所有 mp4 都按字母顺序排列

注意我不假设任何关于实际名称的内容（例如，您只需要删除下划线）。

因此，您不需要任何特殊的逻辑来匹配文件，只需一个接一个即可。

```
import os, sys, re
from glob import glob

def mv(src, dest):
    print 'mv "%s" "%s"' % (src, dest)
    #os.rename(src, dest)  # uncomment this to actually rename the files

dir = sys.argv[1]

vid_files = sorted(glob(os.path.join(dir, '*.mp4')))
sub_files = sorted(glob(os.path.join(dir, '*.srt')))
assert len(sub_files) == len(vid_files), "lists of different lengths"

for vidf, subf in zip(vid_files, sub_files):
    new_vidf = re.sub(r'\.srt$', '.mp4', subf)
    if vidf == new_vidf:
        print '%s OK' % ( vidf, )
        continue
    mv(vidf, new_vidf) 
```

同样，这只是一个快速脚本。建议改进：

1.  支持不同的文件扩展名
2.  使用更好的 cli，例如`argparse`
3.  支持获取多个目录
4.  支持测试模式（实际上不重命名文件）
5.  更好的错误报告（而不是使用`assert`）
6.  更高级：支持撤消

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T08:07:54.313

这只是 Zeta 所说的实现 :)

```
import os;
from path import path;
for filename in os.listdir('.'):        
    extension = os.path.splitext(path(filename).abspath())[1][1:]
    if extension == 'srt':        
        newName = filename.replace('_','');
        print 'Changing\t' + filename + ' to\t' + newName;
        os.rename(filename,newName);
print 'Done!' 
```

# php - 如何在php中编辑后保存图像

> ID：15848318
> 
> 赞同：-1
> 
> 时间：2013-04-06T07:38:55.340
> 
> 标签：php, javascript, pixastic

我创建了一个简单的图像编辑器，具有亮度、对比度和去饱和度等效果。我已经使用了来自 www.pixastic.com 的这个 pixastic 功能。该功能成功运行，但我不知道如何用调整后的图像替换原始图像，并带有效果。这是我用过的代码

```
<script>
var pixastic_parseonload = true;
</script>
<script src="pixastic.core.js" type="text/javascript"></script>
<script src="actions/desaturate.js" type="text/javascript"></script>
<body>
<form name="form1" action="index.php" enctype="multipart/form-data" method="post">
<p>Image to use:</p>
<img id="scream" class="pixastic <?php echo @$_POST["butn1"];?>" src="Desert.jpg" alt="The Scream" width="220" height="277" name="image1">
<button value="pixastic-desaturate()" name="butn1" >Desaturate</button>
</form>
</bode> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:21:19.177

也许你需要改变这个：

```
<button value="pixastic-desaturate()" name="butn1" >Desaturate</button> 
```

有了这个：

```
<input type="button" name="pixastic-desaturate" VALUE="Click to process the image" onClick="pixastic-desaturate();"> 
```

# google-app-engine - 设置 GAE 前端实例类的经验法则

> ID：15848321
> 
> 赞同：6
> 
> 时间：2013-04-06T07:39:14.567
> 
> 标签：google-app-engine, python-2.7

在 GAE 上选择 F1、F2 或 F4 实例类有什么好的经验法则？IE。什么时候应该开始使用更高的实例类？特别是在使用 Python 2.7 和 threadsafe: true 时（因此可以处理并发请求）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:23:55.153

最简单的情况是，如果您只需要更多内存。此外，通过移动到更高的实例类，您可以“租用”更多的 cpu 周期，因此您的请求可能会一直运行，直到它们在您再次“空闲”之前完成。如果切换有意义，这真的取决于应用程序。此 Google Developers Video 中有一个部分对此进行了更详细的讨论：

[https://www.youtube.com/watch?feature=player_detailpage&v=T_BQevqRp44#t=2094s](https://www.youtube.com/watch?feature=player_detailpage&v=T_BQevqRp44#t=2094s)

# algorithm - 如何从超过 1TB 的数据中打印频率 k 个字？

> ID：15848322
> 
> 赞同：0
> 
> 时间：2013-04-06T07:39:21.743
> 
> 标签：algorithm, hash, bigdata

这个问题在我的采访中被问到。我想知道解决方案。

给出一个文本文件，每行一个单词，文件大小超过 1TB。任务是只打印文件中频率为**k**的单词。

我没有完全回答这个问题。但我想，我以正确的方式开始了它。您使用了散列技术并且代码至少需要 O(n) 时间（因为它必须通读文件）

谁能回答我这可以有效地完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T08:46:22.193

一般来说，这类问题是“Top K”或“选择”算法的主题。这是关于一般主题的维基百科文章：[维基百科：选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)。它似乎已经在“大数据”系统中流行起来，也许是为了克服上一代面试的重点，这些面试专注于排序算法，早在每个认真的候选人都记住快速排序和堆排序代码的时候。

实际上，这只是关于构建“大数据”（Hadoop 和其他 Map/Reduce 系统）的教科书问题。如果数据分布在 N 个节点上，那么每个节点都可以计算单独的部分直方图（将它们的直方图函数映射到整个数据集）并合并它们的结果（将它们的小计减少为总计）。

对于面试场景，这是一个流行的问题，因为没有简单的技巧。您可以列举学术文献中已发表的几种方法，也可以*从头*解决问题。

如果“词汇”相对较小（例如，一个典型的英语词典中只有几万个单词——那么 25 万个单词的词汇量就相当广泛了）。在这种情况下，我们希望计数可以适合典型现代硬件的 RAM。如果这个数据集中的“词”更广泛——超过几千万或几亿——那么这样的做法就不再可行了。

可以想象，人们可以尝试一种自适应或统计方法。如果我们知道没有任何单个“词”的主要集群......数据集的任何具有统计意义的样本都与任何其他样本大致相似......那么我们就可以建立我们的直方图并丢弃那些“词”（和他们的数量），这比其他人要难得多。如果数据仅以流的形式呈现，并且我们对术语的分布没有任何硬性保证，那么这不是一种可行的方法。但是，如果我们在某个随机访问文件系统中有数据，那么我们可能会稀疏随机地对数据集进行采样，以构建一个*非常可能*的 top K * M 集合（其中 M 是我们想要的 K 个元素的任意倍数，这样所有适合内存）。

散列可以帮助我们找到每个单词的计数器，但是如果我们尝试只保留散列的计数而不将“单词”本身保留在数据结构中，我们必须考虑发生冲突的可能性。一般来说，我认为堆会更好（可能包括将内存堆底部的东西放入存储堆或树中）。

我之前说过“自适应”是因为可以使用缓存（最终是统计建模）将当前最频繁的“单词”保留在 RAM 中，并将最不频繁的“单词”洗牌到存储中（以防止最初频繁出现“单词”的一些退化数据集让位于一些最初稀有的词，随着人们深入挖掘数据集，这些词变得更加频繁）。

虽然对这些考虑的对话式探索在某些采访中可能会很有效，但我建议您熟悉我引用的维基百科文章的各个部分，以便您可以勾勒出至少其中一两个的伪代码并表明您确实具有该材料的一些学术背景。

绝对不要忽视在提出“Top K”类问题的采访中讨论分布式处理。这样做只是为了澄清所提出问题的限制并承认这些问题一直是现代“大数据”分布式处理系统的驱动力。

这里还有一个关于相同主题的问题：[StackOverflow: The Most Efficient Way To Find Top Kfrequent Words In A Big Word Sequence](https://stackoverflow.com/questions/185697/the-most-efficient-way-to-find-top-k-frequent-words-in-a-big-word-sequence)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:15:55.263

这个问题的答案完全取决于唯一单词的大小，如果唯一单词计数很小，那么您可以使用任何字符串->数字映射数据结构（例如 Trie 树）来计算单词频率。复杂度将是`n log(m)`（m 是单个单词的长度），易于实现。但是描述问题的方式，很可能唯一的字数足够大，可以存储在内存中。在这种情况下，可以使用以下方法：

1 TB 数据意味着输入文件中有大约`1.0*10^12`字节的数据。1 个字节是一个字符，平均而言，一个单词有 4 个字符，然后我们有大约`2.5*10^11`单词。我们将把这个词表分成`50k`不同的词表。因此，每次我们`5m`从输入文件中读取未读单词时，对这个`5m`单词列表进行排序并将这个排序列表写入一个文件。我们将使用`50k`数字数组（让我们称之为`Parray`）来存储文件中所有排序列表的起始位置（最初`Parray`将有数字，如：0、5m+1、10m+1 等）。现在从所有列表中读取最上面的`50k`单词，将它们放在一个最小堆中，你会得到堆顶部的最小单词。得到当前最小的单词后（让我们称之为`cur_small`) 从所有排序列表中读出每个列表中的单词（在此操作之后，您`Parray`将指向每个列表中的下一个最小单词）。在这里，您将获得`cur_small`- 的计数，因此做出决定，`K`然后从堆中删除所有条目，`cur_small`最后将每个列表中的一个新单词添加到至少一个单词所在的堆中`cur_small`。继续此过程，直到您读出所有排序列表。在所有的复杂性是`n log(n)`

# java - mouseListener 反应慢（重绘）

> ID：15848323
> 
> 赞同：1
> 
> 时间：2013-04-06T07:39:29.860
> 
> 标签：java, performance, swing, repaint, mouselistener

我制作了一个框架，当我点击它时它会重新绘制（也绘制了新的几何图形）但是当我快速点击它时它的响应速度并不快，它需要在点击之间半秒。我做错了什么？

```
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.util.ArrayList;

import javax.swing.JOptionPane;

public class Okienko extends Frame implements MouseListener{
public static final int SIZE = 500;
public static int mX = 0,mY = 0;
public ArrayList<Wyrysowywalny> l; //COLLECTION OF OBJECT TO DRAW
    Okienko(){
        l = new ArrayList<Wyrysowywalny>();
        createGUI();
    }
    public void createGUI(){
        setSize(SIZE, SIZE);
        setVisible(true);
        setAlwaysOnTop(true);
        setTitle("Zadanie 1");
        addWindowListener(new WindowListener() {    
            public void windowOpened(WindowEvent arg0) {}           
            public void windowIconified(WindowEvent arg0) {}        
            public void windowDeiconified(WindowEvent arg0) {}              
            public void windowDeactivated(WindowEvent arg0) {}
            public void windowClosed(WindowEvent arg0) {}
            @Override
            public void windowClosing(WindowEvent arg0) {
                JOptionPane.showConfirmDialog(null, "dziekujemy za skorzystanie z programu","",JOptionPane.PLAIN_MESSAGE);
                System.exit(0);     
            }
            @Override
            public void windowActivated(WindowEvent arg0) {
                repaint();

            }
        });
        addMouseListener(this);
    }

    @Override
    public void mouseClicked(MouseEvent e) {///  IMPORTANT!
        System.out.println(e.getX() + " " + e.getY());
        mX = e.getX();
        mY = e.getY();
        int r;

        r = (int) (Math.random() *  6);
        switch(r){
            case 0: l.add(new Trojkat(mX,mY,lXY(),lXY(),lXY(),lXY()));break; // OBJECTS TO DRAW     
            case 1: l.add(new Prostokat(mX,mY,lR(),lR()));break;
            case 2: l.add(new Kwadrat(mX,mY,lR()));break;
            case 3: l.add(new Kolo(mX,mY,lR()));break;
            case 4: l.add(new Elipsa(mX,mY,lR(),lR())); break;
            case 5: l.add(new TrojkatRownoboczny(mX,mY,lR())); break;
        }       
        repaint();

    }
    @Override
    public void mouseEntered(MouseEvent arg0) {}
    @Override
    public void mouseExited(MouseEvent arg0) {}
    @Override
    public void mousePressed(MouseEvent arg0) {}
    @Override
    public void mouseReleased(MouseEvent arg0) {}

    public static int lXY(){
        return (int) (Math.random()*SIZE * 4d/5 + 1d/40*SIZE);
    }
    public static int lR(){
        return (int) (Math.random()*200 - 1d/40*SIZE);
    }
    public void paint(Graphics g){
        super.paint(g);
        for(Wyrysowywalny w : l)
            w.draw(g);//DRAW OBJECT
    }

    public static void main(String[] args) {

        new Okienko();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:58:11.830

没有一个完整的例子，我只能做几个观察：

*   当鼠标在同一个组件中释放时触发，而不是`mouseClicked()`，您可能想要响应`mousePressed()`。

*   也考虑[`MouseAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseAdapter.html)过`implements MouseListener`。

*   [正如这里](http://www.oracle.com/technetwork/java/painting-140037.html#callbacks)提到的，“Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`。”

*   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

*   [这里](https://stackoverflow.com/a/11944233/230513)引用了一个没有明显延迟的更详细的示例。

# ios - iPad 中 SplitViewController 中的两个 UITableView 控制器，Delegate

> ID：15848328
> 
> 赞同：2
> 
> 时间：2013-04-06T07:40:36.560
> 
> 标签：ios, delegates, uitableview, tableview, uisplitviewcontroller

![在此处输入图像描述](https://i.stack.imgur.com/WklAj.png)

嗨，这是我的第一个 iPad 应用程序，并试图将我的 iphone 应用程序移植到 iPad。我已按照[http://www.raywenderlich.com/](http://www.raywenderlich.com/)的所有教程进行操作，但仍有问题。

还要查看这个问题，但仍然有问题。[Splitviewcontroller 有两个表视图，委托问题](https://stackoverflow.com/questions/7568592/splitviewcontroller-with-two-tableviews-delegate-problem)

基本上，我在 SplitViewController 中有两个 UITableViewController，当我单击根视图控制器中的 tableview 单元格时，我想在另一个 Tableview 右侧的 DetailsViewController 中填充详细信息。

问题是我可以设法从中传递数组数据，但我不能调用 tableview reload 方法。

* * *

这是代码

左视图控制器

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSUInteger row = [indexPath row];

    if (row == 0){

        NSLog(@"Row 0 Pressed");  

         RightViewController *rightvc = [self.storyboard instantiateViewControllerWithIdentifier:@"displayenglish"];

        _locallayleft = [ConversationDatabase database].conversationsInfos;

        NSLog(@"Just pushed the array"); 

        rightvc.detailItem = _locallayleft;
        rightvc.title = @"Greetings";

    }

    else if (row == 1) {
        NSLog(@"Row 1 Pressed");  

         RightViewController *rightvc = [self.storyboard instantiateViewControllerWithIdentifier:@"displayenglish"];

        _locallayleft = [ConversationDatabase database].conversationsInfosgeneral;

        rightvc.detailItem = _locallayleft;
        rightvc.title = @"General Conversation";

    }

-----------------------------------------------------------------------------------------
RightViewController

- (void)setDetailItem:(NSArray *)newDetailItem
{

    if(_detailItem != newDetailItem) {

        _detailItem = newDetailItem;

      [self configureView];

    }
}

- (void)configureView
{
    if (self.detailItem) {

        self.locallay = self.detailItem;

        _listOfCoversation = [[NSMutableArray alloc] init];
        for (ConversationInEnglish *c in _locallay)

        {
            NSString *english = c.english;
            NSLog(@"setDetails Item get called");
            NSLog(@"%@",english);

            [_listOfCoversation addObject:english];
        }
        [self.tableView reloadData];
        NSLog(@"Trying to reload TableView");

    }

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self configureView];

}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [_locallay count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"English";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    ConversationInEnglish *con = _locallay [indexPath.row];
    _englishLabel = (UILabel *) [cell viewWithTag:200];

    _englishLabel.text = con.english;
    NSLog(@"My data from cell %@",con.english );

    [_englishLabel setFont:[UIFont fontWithName:@"Open Sans" size:22]];

    _myanmarLabel = (UILabel *) [cell viewWithTag:300];
    [_myanmarLabel setFont:[UIFont fontWithName:@"TharLon" size:17]];

    _tonebasedLabel = (UILabel *) [cell viewWithTag:400];
    _tonebasedLabel.text = con.tone_based;

    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"tableviewcell.png"]];

    self.tableView.backgroundColor = background;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:17:00.537

看起来当您点击左侧表格中的一行时，而不是更新右侧的表格，而是从情节提要中实例化一个全新的表格，而不是用它替换右侧的表格。

这里没有足够的上下文来准确说明如何修复它，但是您想要做的是当您点击左侧表格中的一行时，通过设置其 detailItem 属性来更新右侧的表格。

您需要访问其他表格视图。有几种方法可以做到这一点，具体取决于您如何设置应用程序 - 如果您在 iPhone 和 iPad 上使用相同的左表视图，那么您可能需要一些条件代码来定位它，因为例子：

```
if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {
    DetailViewController *detailViewController = (DetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];
    detailViewController.detailItem = newDetailItem;
} 
```

或者您可以通过情节提要对其进行配置。无论哪种方式，关键是找到并更新现有的表视图，而不是从情节提要中实例化一个新的表视图。

# jquery - $.get() 加载两次

> ID：15848331
> 
> 赞同：2
> 
> 时间：2013-04-06T07:40:45.507
> 
> 标签：jquery

我似乎陷入了死胡同。

我尝试使用 jQuery 加载数据，`.get()`但在调试时，它显示该函数执行了两次，因此 from 的值`prodList`丢失了。

```
$.get(url, function (model) {
    prodList = $.parseJSON(model);
    alert(prodList);
});

alert(prodList); 
```

首先`alert()`，它显示从服务器返回的数据。但在第二个`alert()`它显示空字符串。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T07:43:32.473

您显示的代码并未表明执行有任何问题。

关于值的警报。

`$.get()`是异步执行，这意味着代码`.get()`在启动后继续执行。

您指定的回调函数在完成之前不会执行，`.get()`但其余代码会一直持续到那时。

因此，第一个警报会在执行回调之前向您显示值，因此`prodList`尚未填充。

然后在回调函数中填充值后显示第二个警报。

```
$.get(url, function (model) {
    prodList = $.parseJSON(model);

    alert(prodList); // prodList is now populated
});

alert(prodList); // prodList here is alerted before it is populated 
```

如果你想对你做一些事情，`prodList`要么在回调函数本身中使用它，要么从回调函数调用另一个函数，`prodList`作为参数传递以在那里处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:42:36.017

你得到空值，因为：

`prodlist`在 get 之后使用，不是

```
 async: false 
```

基本上你需要确保你第一次使用的值总是发生在第二次调用之前。

所以尽量不要使用速记函数。

你可以使用这个，很多人避免使用 Sync Ajax，但根据情况可能会有一些例外：

```
$.ajax({
  url: url,
  data: data,
  success: success,
  dataType: dataType,
  async: false
}); 
```

# android - ADT 是否支持 Java 7 API

> ID：15848332
> 
> 赞同：35
> 
> 时间：2013-04-06T07:40:55.677
> 
> 标签：android, api, adt, java-7

到目前为止，Android 开发者工具是否支持 JAVA 7 API？我正在尝试使用 JAVA 7 构建一个 Android 应用程序，我想知道这件事。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-06T07:46:02.173

虽然您可以在 Java 7 中*编写*代码，但运行它的 Android 系统仅支持 Java 6，因此字符串上的 switch-case 等 7 个功能失败了。

[从 Build tools 19](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Using-sourceCompatibility-1.7)开始，现在支持 Java 7。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T07:45:18.337

不，[android 文档](http://developer.android.com/sdk/index.html)对此非常清楚。只有Java 6。

另外，一定要下载 Oracle JDK 6（Java Runtime 不够用）。

# playframework - Securesocial 视图自定义

> ID：15848333
> 
> 赞同：2
> 
> 时间：2013-04-06T07:40:58.477
> 
> 标签：playframework, securesocial

如文档中所述，[http](http://securesocial.ws/guide/views-customization.html) ://securesocial.ws/guide/views-customization.html 我创建了一个 CustomTemplatesPlugin 扩展 TemplatesPlugin 并实现了 getLoginPage 功能

```
@Override
public Html getLoginPage(Request arg0,
Form> arg1, Option arg2) {
//Logger.info(" In getLoginPage");
return views.Registration.html.login(arg1,arg2);
} 
```

我在视图下创建了一个名为 Registration 的文件夹，然后将 login.scala.html 文件从 securesocial 复制到该文件夹​​中。

> 当我尝试访问 localhost:9000/login 时，我收到一个 not found: value requestheader 错误，所以我将 login.scala.html 中的第一行修改为

```
@(loginForm:play.api.data.Form[(String,String)],
> errorMsg: Option[String] = None)(implicit request:
> play.api.mvc.RequestHeader) 
```

之后，我在浏览器中再次尝试。现在正在列出以下错误。

```
not found: value provider
In E:\playtest\ss\app\views\Registration\login.scala.html at line 40.
37

@Messages("securesocial.login.instructions")

38

39 @for(p <- externalProviders) {
40 @provider(p.id)

}
} 
```

在尝试自定义视图之前，请告诉我要完成的步骤。默认模板流程运行良好，没有问题，我使用的是 play 2.1.0

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T22:37:54.153

默认模板使用 provider.scala.html 文件。也将其复制到您的应用程序中，@provider 将起作用。

# gnuplot - 绘制直方图、条形图和标签的错误对齐

> ID：15848336
> 
> 赞同：0
> 
> 时间：2013-04-06T07:41:06.510
> 
> 标签：gnuplot

我在使用 gnuplot 时遇到问题，在定义时，x 标签会向右移动（或向左移动）

```
set style data histograms 
```

剧情简介：

```
set boxwidth 0.9 absolute
set style fill   solid 1.00 border lt -1
set key inside left top vertical Right noreverse noenhanced autotitles nobox
set style histogram clustered gap 5 title  offset character 0, 0, 0
set datafile missing '-'
set style data histograms
set xtics border in scale 0,0 nomirror rotate by -45  offset character 0, 0, 0
set xtics  norangelimit font ",8"
set xlabel "Scaling Factor"
set ylabel "Execution time [ms]"
set title "Database performance db4o vs Sqlite - Testcase 1 [indexed]" 
set logscale y
set terminal pdf
set output 'db4o_vs_sqlite_indexed.pdf'
plot 'db4o_sb1-5idx.dat' using 3:xtic(1) title 'db4o', 'sqlite_sb1-5idx.dat' using 3 title 'Sqlite' 
```

数据：

```
"Scaling Factor" "Testcase 1" "Testcase 2" "Testcase 3" "Testcase 4"
1 0 34 28 11
2 1 136 91 65
3 0 297 198 101
4 0 487 297 214
10 0 3124 1896 1567
20 0 13000 7907 7628 
```

![结果](https://i.stack.imgur.com/umMP8.png)

# javascript - 将麦克风输入与音频文件进行比较

> ID：15848340
> 
> 赞同：2
> 
> 时间：2013-04-06T07:41:22.133
> 
> 标签：javascript, html, api, audio

我一直在提出一个需要比较客户端麦克风输入和现有 wav 文件的想法。

如果可能的话，我想比较客户端的音频波，返回一定百分比的准确性，并希望这可以通过新的 HTML5 getUserMedia API 来完成。但是，到目前为止，我还没有找到可行的解决方案。

一个典型的例子是模拟调谐器的图形表示，我想将麦克风输入与不同音符和键的录音进行比较。

这可以通过 JavaScript 在客户端实现吗？如果没有，是否有任何 API 已经在这样做？

# java - 在两列中检查数据库中的值

> ID：15848343
> 
> 赞同：0
> 
> 时间：2013-04-06T07:41:55.820
> 
> 标签：java, mysql

我有一个 MySQL 表，其中包含 id 和 name 等列。我只想在变量中取一个值，有时是 id，有时是 name。如何检查两列中的值？

我尝试过这样的事情：

```
select count(*) from topic where (name= '"+ name + "' or id='"+name+"') 
```

变量名相同，所以我必须检查两列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:45:58.187

您可能想使用`LIKE`而不是`=`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:46:50.970

您应该能够在`SELECT`子句中添加您想要的值。

尝试这个：

```
SELECT COUNT(1) count, name, id
FROM topic
WHERE (name= '"+ name + "' or id='"+name+"') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:46:55.193

ID的数据类型是什么。如果它是一个 int，那么你不需要 id 周围的单引号。此外，您的语句中不需要括号。如果此语句在 Java 程序中，则必须用双引号将所有内容括起来。

杰森·波西特

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T07:55:05.767

如果您正在检查您想要的名称：

```
 select count(*) from topic where (name= '"+ name + "'); 
```

如果你正在检查你想要的 id：

```
 select count(*) from topic where (id= '"+ name + "'); 
```

那么你想像这样使用“case when 语句”：首先定义

```
 column_to_match to be = 'name' or = 'id' depending on your scenario 
```

然后

```
 select count(*) from topic where (case column_to_match when 'name' then name= '"+ name + "' when 'id' then id= '"+ name + "' end case); 
```

我建议您将 name 变量重命名为 val

# html - CSS动画不起作用

> ID：15848344
> 
> 赞同：1
> 
> 时间：2013-04-06T07:42:00.943
> 
> 标签：html, css, css-animations

我有一个简单的 CSS 动画来淡入文本：

```
#title{
    animation: text 2s;
    -webkit-animation: text 2s;
    -moz-animation: text 2s;
    -o-animation: text 2s;
    font-family: 'Lato300', sans-serif;
    height: 115px;
    position: absolute;
    bottom: -10px;
    left: 0;
    right: 0;
    margin-bottom: auto;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
}

@keyframes text{
    0% {display: none;}
    100% {display: inline;}
}

@-moz-keyframes text{
    0% {display: none;}
    100% {display: inline;}
}

@-webkit-keyframes text{
    0% {display: none;}
    100% {display: inline;}
}

@-o-keyframes text{
        0% {display: none;}
    100% {display: inline;}
} 
```

的HTML：

```
<div id="title"><h1>Text goes here</h1></div> 
```

由于某种原因，动画无法播放。有谁知道为什么？（我保留了所有代码以防其他原因导致问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:47:17.227

您将无法为`display`属性设置动画。但是，您可以转换`opacity`

```
@-webkit-keyframes text {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
} 
```

[http://jsfiddle.net/5FCZA/](http://jsfiddle.net/5FCZA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:00:51.573

```
shake
 @-webkit-keyframes text {
    0%, 100% {-webkit-transform: translateX(0);}
    10%, 30%, 50%, 70%, 90% {-webkit-transform: translateX(-10px);}
    20%, 40%, 60%, 80% {-webkit-transform: translateX(10px);}
} 

or rotate
@-webkit-keyframes text {
    0% {-webkit-transform: scale(1);}   
    10%, 20% {-webkit-transform: scale(0.9) rotate(-3deg);}
    30%, 50%, 70%, 90% {-webkit-transform: scale(1.1) rotate(3deg);}
    40%, 60%, 80% {-webkit-transform: scale(1.1) rotate(-3deg);}
    100% {-webkit-transform: scale(1) rotate(0);}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-09T16:02:48.470

对于将来遇到类似问题的任何人，我通过添加解决了这个问题

```
display:block 
```

到我试图动画的**跨度**

# django - Django：如何使用 ajax 上传文件

> ID：15848351
> 
> 赞同：4
> 
> 时间：2013-04-06T07:43:24.690
> 
> 标签：django, jquery, python-2.7, jquery-1.9

我正在使用 django 1.5、python 2.7 和 jquery 1.9。我有一个表格，它正好有 2 个字段，即**title 和 document**。当我按下提交时，我希望用户选择的文档出现在 request.FILES 中，如视图所示。

当我提交常规表单（没有 ajax）时，这工作正常，但是使用 ajax 我没有在我的请求中获得文件字段。**关于如何使用 ajax 上传文件的**任何建议。

**HTML：**

```
<form enctype="multipart/form-data" action="{% url 'upload_document' %}" method="post" id="uploadForm">
    {% csrf_token %}
        <ul>
          <li>
            <div>Title</div>
            <input id="title" type="text" maxlength="200"/>
            <div class="error"></div>          
          </li>

          <li>
            <div>Upload File</div>
            <input id="document" type="file" size="15" />
            <div class="error"></div>
          </li>
        </ul>

      <input type="submit" value="submit"/></p>
</form> 
```

**表格.PY：**

```
class UploadForm( forms.Form ):
    document = forms.FileField()
    title = forms.CharField(max_length = 200)

    def clean(self):
        cleaned_data = super(UploadForm, self).clean()
        return cleaned_data

    def save(self, *args, **kwargs):
        title = self.cleaned_data['title']
        doc = self.cleaned_data['document']

        document = Document(title = title, document = doc)
        document.save()
        return document 
```

**脚本：**

```
<script type="text/javascript">
    $("#uploadForm").submit(function(event){
      event.preventDefault();
      $.ajax({
        url : "{% url 'upload_document' %}",
        type: "POST",
        data : {csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value,
                title: document.getElementById('title').value,
                //document: document: document.getElementById('document'),
        },
        dataType : "json",
        success: function( response ){
           if(response == "True"){
            // success
           }
           else {
            //append errors
           }
        }
      });
  }); 
</script> 
```

**意见.PY**

```
def upload_document(request): 
    print request.POST
    print request.FILES
    if request.is_ajax():
        if request.method == 'POST':
            form = UploadForm(request.POST, request.FILES, user = request.user)

            if form.is_valid():
                form.save()
                return HttpResponse(simplejson.dumps('True'), mimetype = 'application/json' )
            else:
                errors = form.errors
                return HttpResponse(simplejson.dumps(errors), mimetype = 'application/json' ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:54:20.013

这个问题的答案并不是那么简单。首先，如果您打算支持旧浏览器，那么它确实会变得令人讨厌。您必须处理隐藏的 iframe 和一些 JavaScript 技巧。我建议使用一些著名的脚本，例如[jQuery-File-Upload](http://blueimp.github.io/jQuery-File-Upload/)。

但是世界在不断发展，包括 HTML5 在内的新技术不断涌现。在大多数现代浏览器（IE10+、FireFox3.6+、Chrome13+，参见：[http](http://caniuse.com/fileapi) ://caniuse.com/fileapi ）中都有一个新的文件 API，可用于此目的。首先你需要一些 HTML：

```
<input type="file" id="file-select" /> 
```

然后你可以绑定到（例如）`change`事件：

```
$('#file-select').change( handleFileSelect ); 
```

最后是处理程序本身：

```
var data = {};

function createReaderHandler(name) {
  return function(ev) {
    data[name] = ev.target.result;
  };
}

function handleFileSelect(ev) {
  var files = ev.target.files; // FileList object

  // Loop through the FileList
  for (var i = 0; i < files.length; i++) {
    var file = files[i],
        name = file.name || file.fileName,
        reader = new FileReader();

    reader.onload = createReaderHandler(name);
    reader.readAsText(file);
  }
} 
```

一旦数据被加载到 JavaScript 内存中（注意操作是**异步**的），您可以像任何其他数据一样通过 AJAX 发送它。还有更多选项：根据您的文件，您可以将其作为二进制数据读取`.readAsBinaryString`，依此类推。谷歌是你的朋友。:)

此外，我认为已经有很好的脚本用于上传文件并回退到旧方法。这个可能很有趣（没试过）：

[http://www.plupload.com/](http://www.plupload.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-20T05:34:32.537

我认为问题出在提交按钮上，将其更改为普通按钮，即`<button type='button' id='submit'>submit</button>`（默认情况下，表单中的所有按钮都是提交）和 ajax 为

```
$('#submit').on('click',function(){
    frm = $(this).parents('form')
    $.ajax({
          type: frm.attr('method'),
          dataType:'json',
          url: frm.attr('action'),
          data: frm.serialize(),
          async: false,
          success: function (data) {
              console.log('success')
          },
          error: function(data) {
              console.log("Something went wrong!");
          }
}) 
```

所有其他人都一样只要试试就行了

# android - Android上的Phonegap + Jquery mobile：多个HTML页面Javascript不起作用

> ID：15848352
> 
> 赞同：4
> 
> 时间：2013-04-06T07:43:27.213
> 
> 标签：android, cordova, jquery-mobile

Javascript 在 index.html 页面之外不起作用：

**项目测试1：**

Index.html（带有地理定位页面代码）***工作正常***

**项目测试 2：**

Index.html（带有菜单页码）

Geolocation.html（带有 GEOLOCATION PAGE CODE）***javascript 不起作用***

Geolocation.html 页面打开，但 javascript 不运行。

我错过了什么？

**地理位置页面代码：**

```
<!DOCTYPE html>
<html>
  <head>
    <!-- <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />-->
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript" charset="utf-8" src="js/cordova-2.5.0.js"></script>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript">

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        var element = document.getElementById('geoTemp');
        element.innerHTML = 'Ready...';
        navigator.geolocation.getCurrentPosition(onSuccess, onError, { maximumAge: 3000, timeout: 10000, enableHighAccuracy: false });
    }

    function onSuccess(position) {
        var element = document.getElementById('geoTemp');
        element.innerHTML = 'Success...';                                    
        initialize(position.coords.latitude, position.coords.longitude);                            
    }

    function onError(error) {
        var element = document.getElementById('geoTemp');
        element.innerHTML = 'Error...';
        alert('code: '    + error.code    + '\n' +
                'message: ' + error.message + '\n');
    }

      function initialize(latitude, longitude) {
        var mapOptions = {
          center: new google.maps.LatLng(latitude, longitude),
          zoom: 12,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }

      function onBodyLoad(){
          alert("test!");
      }
    </script>
  </head>
  <body>
    <h2>Location</h2>               
                <p id="geolocation">Finding geolocation...</p>
                <p id="geoTemp"></p>
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

**菜单页码：**

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Test</title>
<link rel="stylesheet" href="css/themes/default/jquery.mobile-1.3.0.css">
<link rel="shortcut icon" href="favicon.ico">
<script src="js/jquery.js"></script>
<script src="js/jquery.mobile-1.3.0.js"></script>
<script type="text/javascript" src="js/cordova-2.5.0.js"></script>
</head>
<body>
    <div data-role="page" id="pageMain">

        <div data-role="header">
            <h1>
                TestPage
            </h1>
        </div>

        <div data-role="content">

            <ul data-role="listview">
                <li><a href="geolocation.html" data-transition="slide">
                        <h2>Geolocation Test</h2>
                        <p>Testing</p>
                </a></li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

我还尝试将 onload 函数添加到 body 标记并调用测试函数，但它也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T09:56:38.140

在 geolocation.html 的链接中，添加此属性`data-ajax="false"`。这将阻止 jQuery 通过 Ajax 加载页面。

# html - 引导行固定为列标题而不影响容器中的其他 div

> ID：15848356
> 
> 赞同：0
> 
> 时间：2013-04-06T07:43:43.347
> 
> 标签：html, css, twitter-bootstrap

我有一个 3 列结构：left_sidebar center_content right_sidebar 我有一个固定的标题（导航栏）和固定的侧边栏。现在我想在 center_content 中制作一个 div（最上面的一个）也已修复。

```
<div class="container-fluid">
<div class="row-fluid">
<div class="span1">
    <div class="sidebar-nav sidebar-nav-fixed">
        <ul class="nav nav-list">
            <li class="nav-header">Sidebar</li>
            <li class="active"><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </div><!--/.well -->
<!--Sidebar content-->
</div>
<div class="span9">
    <div class="row-fluid well-white">
        <div class="span12">
            <div class="row-fluid">
                <div class="span12 content-header">
                    Fluid 12 content container and options panel<hr>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span9">
                    Fluid 9 content header
                    <div class="row-fluid">
                        <div class="span6">Fluid 6 header division</div>
                        <div class="span6">Fluid 6 header division</div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">Fluid 12 real content here<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div>
                    </div>
                </div>
                <div class="span3">Fluid 3 sidebar for advertisment fixed as well when scrolling</div>
            </div>
        </div>
    </div>
<!--Body content-->
</div>
<div class="span2">
    <div class="sidebar-nav sidebar-nav-fixed">
        <ul class="nav nav-list">
            <li class="nav-header">Sidebar</li>
            <li class="active"><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </div><!--/.well -->
</div>    
</div>
</div> 
```

有两个选项我希望他们如何滚动

首先，修复*.row-fluid well-white*并在此列中仅滚动第二个*row-fluid*。我的意思是修复*.content-header*。

第二个是只做*.content-header*来修复。（这个选项似乎更现实）

每当我尝试修复*.content-header*时，它都会覆盖其他 div（比如在右侧边栏的顶部和他下方的行下方）

**更新** 为了显示我在说什么，您可以查看 Google Plus 个人资料页面，我想我需要重新制作我的代码以使用带有“附加”javascript 组件的 3 列

**UPDATE2** 示例：

```
---------------------------------
          fixed navbar
---------------------------------
| flsb | content options | frsb |
|      |-----------------|      |
|      |  content here   |      |
|      |                 |      |
|      |                 |      |
|      |                 |      | 
```

flsb - 固定左侧边栏 (span2)

frsb - 固定右侧边栏 (span2)

内容选项 - 固定 (span8)

导航栏 - 固定 (span12)

这里的内容 - 可滚动 ^_^ (span8)

# java - 调用 getNextException 查看原因：如何让 Hibernate / JPA 显示异常的数据库服务器消息

> ID：15848359
> 
> 赞同：30
> 
> 时间：2013-04-06T07:44:13.273
> 
> 标签：java, hibernate, postgresql, jpa, jdbc

我正在使用 Postgresql、Hibernate 和 JPA。每当数据库中出现异常时，我都会得到类似的东西，这不是很有帮助，因为它没有显示数据库服务器上真正出了什么问题。

```
Caused by: java.sql.BatchUpdateException: Batch entry 0 update foo set ALERT_FLAG='3' was aborted.  Call getNextException to see the cause.
    at org.postgresql.jdbc2.AbstractJdbc2Statement$BatchResultHandler.handleError(AbstractJdbc2Statement.java:2621)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1837)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:407)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeBatch(AbstractJdbc2Statement.java:2754)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:1723)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
    ... 82 more 
```

我希望数据库中的异常消息出现在应用程序的日志中。

我遇到了[这篇文章](http://erics-notes.blogspot.in/2008/03/java-sqlexception-chaining.html)，它使用 Aspect 来填充异常链，否则在 SQLExceptions 的情况下无法正确填充。

有没有办法在不使用 Aspects 或任何自定义代码的情况下解决这个问题。理想的解决方案只涉及配置文件更改。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-24T10:22:15.150

这对我来说得到了导致问题的异常消息（Hibernate 3.2.5.ga）：

```
catch (JDBCException jdbce) {
    jdbce.getSQLException().getNextException().printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-06T11:48:55.367

不需要编写任何自定义代码来实现这一点 - Hibernate 默认会记录异常原因。如果您看不到这一点，则一定是没有正确设置 Hibernate 日志记录。这是一个使用 slf4j+log4j 的示例，并使用 Maven 进行依赖管理。

**src/main/java/pgextest/PGExceptionTest.java**

```
public class PGExceptionTest {

    public static void main(String[] args) throws Exception {

        EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(
                "pgextest");
        EntityManager entityManager = entityManagerFactory.createEntityManager();
        entityManager.getTransaction().begin();
        // here I attempt to persist an object with an ID that is already in use
        entityManager.persist(new PGExceptionTestBean(1));
        entityManager.getTransaction().commit();
        entityManager.close();
    }
} 
```

**src/main/resources/log4j.properties**

```
log4j.rootLogger=ERROR, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n 
```

**src/main/resources/META-INF/persistence.xml**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
        version="2.0">
    <persistence-unit name="pgextest">
        <properties>
            <property name="javax.persistence.jdbc.driver" value="org.postgresql.Driver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:postgresql://localhost/pgextest"/>
            <property name="javax.persistence.jdbc.user" value="postgres"/>
            <property name="javax.persistence.jdbc.password" value="postgres"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
            <property name="hibernate.jdbc.batch_size" value="5"/>
        </properties>
    </persistence-unit>
</persistence> 
```

**pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>pgextest</groupId>
    <artifactId>pgextest</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.6.9.Final</version>
        </dependency>   

        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>9.1-901.jdbc4</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.1</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <scope>runtime</scope>
        </dependency>
    </dependencies>
</project> 
```

然后执行 main 方法将记录以下内容：

```
ERROR [main] - Batch entry 0 insert into PGExceptionTestBean (label, id) values (NULL, '1') was aborted.  Call getNextException to see the cause.
ERROR [main] - ERROR: duplicate key value violates unique constraint "pgexceptiontestbean_pkey" 
```

可能值得一提的是，您可以通过将属性设置为来禁用包装原始异常的 JDBC 批处理`hibernate.jdbc.batch_size`（`0`不用说您可能不想在生产中这样做。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-06T08:44:53.960

我认为 Aspect Programming 是解决此类问题的更好解决方案。

但是，如果您想编写自定义代码来执行此操作，您可以捕获 SqlException 并循环遍历它并记录每个异常。像这样的东西应该工作。

```
try {
 // whatever your code is
} catch (SQLException e) {
    while(e!= null) {
      logger.log(e);
      e = e.getNextException();
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-14T19:41:52.147

对我来说，例外是 PersistenceException，所以我必须这样做：

```
try {
//...
} catch (javax.persistence.PersistenceException e) {
    log.error(((java.sql.BatchUpdateException) e.getCause().getCause()).getNextException());
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-26T09:00:22.040

```
try {
 // code
} catch (SQLException e) {      
  for (Throwable throwable : e) {
        log.error("{}", throwable);
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-01T09:47:22.950

以防万一您从 JUnit 测试中获取此异常，您可以使用 a 转换 JUnit 异常`TestRule`（这是受源代码的启发`ExpectedException` `TestRule`）

```
public class HibernateBatchUnwindRule implements TestRule {

    private boolean handleAssumptionViolatedExceptions = false;

    private boolean handleAssertionErrors = false;

    private HibernateBatchUnwindRule() {
    }

    public static HibernateBatchUnwindRule create(){
        return new HibernateBatchUnwindRule();
    }

    public HibernateBatchUnwindRule handleAssertionErrors() {
        handleAssertionErrors = true;
        return this;
    }

    public HibernateBatchUnwindRule handleAssumptionViolatedExceptions() {
        handleAssumptionViolatedExceptions = true;
        return this;
    }

    public Statement apply(Statement base,
            org.junit.runner.Description description) {
        return new ExpectedExceptionStatement(base);
    }

    private class ExpectedExceptionStatement extends Statement {
        private final Statement fNext;

        public ExpectedExceptionStatement(Statement base) {
            fNext = base;
        }

        @Override
        public void evaluate() throws Throwable {
            try {
                fNext.evaluate();
            } catch (AssumptionViolatedException e) {
                optionallyHandleException(e, handleAssumptionViolatedExceptions);
            } catch (AssertionError e) {
                optionallyHandleException(e, handleAssertionErrors);
            } catch (Throwable e) {
                handleException(e);
            }
        }
    }

    private void optionallyHandleException(Throwable e, boolean handleException)
            throws Throwable {
        if (handleException) {
            handleException(e);
        } else {
            throw e;
        }
    }

    private void handleException(Throwable e) throws Throwable {
        Throwable cause = e.getCause();
        while (cause != null) {
            if (cause instanceof BatchUpdateException) {
                BatchUpdateException batchUpdateException = (BatchUpdateException) cause;
                throw batchUpdateException.getNextException();
            }
            cause = cause.getCause();
        };
        throw e; 
    }
} 
```

然后将规则添加到测试用例

```
public class SomeTest {

    @Rule
    public HibernateBatchUnwindRule batchUnwindRule = HibernateBatchUnwindRule.create();

    @Test
    public void testSomething(){...}
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-14T21:51:52.507

如果您偶然遇到来自 Kafka-Connect 的异常，您可以将 batch.size 属性设置为 0（临时）以显示 sink worker 遇到的异常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-03T20:44:17.220

就我而言，当我使用 java 和`postgreSQL`数据库时，我遇到了这个异常。在检查了我尝试到的记录后`insert`，`table`发现该记录具有重复的 id 并且违反了唯一约束。因此，最好检查您要访问的记录`insert`并尝试`insert`使用 db 客户端查看提取错误。

# oracle - Oracle 更新具有最小值的行

> ID：15848365
> 
> 赞同：0
> 
> 时间：2013-04-06T07:44:37.623
> 
> 标签：oracle

我试图为用户提供一种独特的随机代码，但不跳过范围内的任何数字。我的桌子是这样的

```
RandomCode | IsUsed | RNum
--------------------------
002        | Y      | 1
004        | Y      | 2
003        | NULL   | 3
005        | Y      | 4
001        | NULL   | 5 
```

所以下一个要使用的随机码应该是 003，然后是 001。问题是用户可以返回代码，我应该把那个号码给别人。在这种情况下，我将 IsUsed 设置为 NULL。

我尝试将 IsUsed 列的最小 Rnum 选择为 NULL。然后更新表格。但是遇到了 Race 条件，用户得到了重复的 RandomCode。

任何帮助

UPDATE TABLE SET IsUsed = N'Y' WHERE IsUsed = NULL 并且 RNum = MIN(RNUM) 返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:59:40.347

您在代码中犯了两个小错误：

1.  你做到了`IsUsed = NULL`。

    此条件始终返回 false。没有什么等同于`NULL`。改为使用`IsUsed IS NULL`。

2.  你用过`RNum = MIN(RNum)`。请改用子查询。

这是您对这些简单修改的​​查询。

```
UPDATE TABLE
SET IsUsed = N'Y'
WHERE IsUsed IS NULL
and RNum = (SELECT MIN(RNum) FROM table WHERE IsUsed IS NULL) 
```

# javascript - 获取标签值 Onmousedown 事件

> ID：15848371
> 
> 赞同：0
> 
> 时间：2013-04-06T07:45:39.760
> 
> 标签：javascript, jquery

HTML 代码如下所示：

```
<ul>
<li class="result">
    <h3 class="title"><a class="someclass" href="url">Sometext</h3>
    <cite class="url">Cite URL-1</cite>
</li>
<li class="result">
    <h3 class="title"><a class="someclass" href="url-1">Some more text</h3>
    <cite class="url">Cite URL-2</cite>
</li>
</ul> 
```

我必须在点击 href 时获得引用值（引用 URL）。就像是：

```
$('a[class="someclass"]').mousedown(function() {    
    console.log($('cite').text()) //if first link clicked then Cite URL-1 should get returned 
} 
```

在这种情况下如何获取引用标签值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:56:42.880

我建议：

```
$('.someclass').click(function(e){
    e.preventDefault(); // prevent the click from reloading the page or navigating
    var cite = $(this).closest('li').find('cite');
    console.log(cite.text());
}); 
```

参考：

*   [`click()`](http://api.jQuery.com/click/).
*   [`closest()`](http://api.jQuery.com/closest/).
*   [`find()`](http://api.jQuery.com/find/).
*   [`text()`](http://api.jQuery.com/text/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:50:01.310

您需要首先获取超链接的下一个引用元素（以获取其文本）。就像是
`console.log($(this).parent().next()[0].innerHTML)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:50:24.653

您正在寻找 jQuery 的[`.click()`](http://api.jquery.com/click/)事件。

试试这个：

```
$('a[class="someclass"]').click(function() {
  var text = $(this).parents('.result').find('cite').html();
} 
```

# virtual - 虚函数和虚方法，哪个合适？

> ID：15848372
> 
> 赞同：0
> 
> 时间：2013-04-06T07:45:42.897
> 
> 标签：virtual

我参加过很多面试，面试官总是问“你知道虚拟功能吗？” 我总是想知道为什么有经验的程序员/开发人员使用虚拟功能。据我所知.. 并非所有函数都可以是虚拟的，只有属于任何类/结构的那些函数可以是虚拟的。

所以我认为“函数是超集，方法是子集。并非所有函数都可以是方法，但所有方法都是函数。因此使用“虚拟方法”而不是“虚拟函数”是合适的。

有人可以解释一下，为什么大多数有经验的程序员甚至技术书籍都使用“虚拟函数”而不是“虚拟方法”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:16:08.227

从技术上讲，方法是属于类的，而函数是不属于类的，但就像其他如此普遍和常见的东西一样，人们最终会混淆术语，最终“函数”和“方法”都可以指一件事或另一件事。这几乎就是您问题的答案......最后，术语是由人们如何使用它来定义的，而不是由最初的预期含义来定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T11:23:02.633

也许这个链接可以帮助你： -

[http://www.dotnet-tricks.com/Tutorial/oops/4a0J170612-Difference-between-function-and-method.html](http://www.dotnet-tricks.com/Tutorial/oops/4a0J170612-Difference-between-function-and-method.html)

是的，从语言或逻辑上讲，函数**不是**类的一部分，但方法是类的**成员**。

或者，更简单地说，方法本身并不存在，它们属于类。但功能有其自身的存在。

我希望这也能澄清你的疑虑。

# android - 使用 3G 互联网时，Dual Sim 无法在 Android 手机中使用

> ID：15848375
> 
> 赞同：-5
> 
> 时间：2013-04-06T07:46:02.000
> 
> 标签：android

我有一部带双卡的安卓手机。一张用于 3G 互联网连接的 SIM 卡。其他电话。但问题是这样的。当我使用互联网时，如果有人打电话给我其他 SIM 卡，他们无法得到我。另一个SIM卡说不可用。当我停止使用互联网时，其他 SIM 卡将可用。

我的安卓版本是 4.0.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:08:56.820

在您的 android 手机上转到**设置**然后**sim 卡管理器**然后选择 **接收来电**（在使用数据服务时通过其他 sim 卡）.. 但在此之后此设置会导致传输速度变慢..

# python - Python 3 - 累积函数替代品

> ID：15848377
> 
> 赞同：0
> 
> 时间：2013-04-06T07:46:04.710
> 
> 标签：python, function, loops, python-3.x

我想知道是否有更 Pythonic 或替代的方法来做到这一点。我想比较累积函数的结果。每个函数都会修改前一个的输出，我想看看每个函数之后的效果是什么。请注意，为了在运行主要函数后获得实际结果，需要最后一个函数来计算一些东西。在代码中，事情看起来像这样（只是一种伪代码）：

```
for textfile in path:
    data = doStuff1(textfile)
calculateandPrint()

for textfile in path:
    data = doStuff1(textfile)
    data = doStuff2(data )
calculateandPrint()

for textfile in path:
    data = doStuff1(textfile)
    data = doStuff2(data )
    data = doStuff3(data )
calculateandPrint() 
```

如您所见，对于`n`我需要`1/2(n(n+1))`手动制作循环的功能。像我说的那样，有没有更 Python 的东西（例如带有函数的列表？）可以清理代码并在添加越来越多的函数时使其更短且易于管理？

实际代码，`documents`自定义对象在哪里：

```
for doc in documents:
    doc.list_strippedtext = prepareData(doc.text)
bow = createBOW(documents)  

for doc in documents:
    doc.list_strippedtext = prepareData(doc.text)
    doc.list_strippedtext = preprocess(doc.list_strippedtext)
bow = createBOW(documents)  

for doc in documents:
    doc.list_strippedtext = prepareData(doc.text)
    doc.list_strippedtext = preprocess(doc.list_strippedtext)
    doc.list_strippedtext = abbreviations(doc.list_strippedtext)
bow = createBOW(documents) 
```

虽然这只是一小部分，但还需要添加更多功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:08:33.017

您可以定义一组链，应用于[`functools.reduce()`](http://docs.python.org/3/library/functools.html#functools.reduce)

```
from functools import reduce

chains = (
    (doStuff1,),
    (doStuff1, doStuff2),
    (doStuff1, doStuff2, doStuff3),
)

for textfile in path:
    for chain in chains:
        data = reduce(lambda data, func: func(data), chain, textfile)
        calculateandPrint(data) 
```

如果包含 3 个函数，则该`reduce()`调用有效。`func3(func2(func1(textfile))``chain`

我在这里假设您想在应用函数链后应用路径中的`calculateandPrint()` *每个文本文件。*

循环的每次迭代都`for chain in chains`代表`doStuffx`原始示例中的一个循环体，但我们只循环`for textfile in path` *一次*。

您还可以交换循环；适应你的例子：

```
for chain in chains:
    for doc in documents:
        doc.list_strippedtext = reduce(lambda data, func: func(data), chain, doc.text)
    bow = createBOW(documents) 
```

# python-2.7 - 使用 urllib url 的变量导致未知的 url 类型：'%22http' 错误

> ID：15848378
> 
> 赞同：0
> 
> 时间：2013-04-06T07:46:07.673
> 
> 标签：python-2.7, urllib

我正在尝试将 url 传递给 urllib：

```
# a file with a url on each line
file_object = open('file.txt', 'r').xreadlines()
for line in file_object:
    print line # to check if it is getting the correct value 
    var = urllib.urlopen(line).read() 
```

我收到错误：

```
IOError: [Errno url error] unknown url type: '%22http' 
```

我认为`%22`意味着一个转义的引号。

因此文件中的 url 格式为：

```
"http://www.test.com" 
```

并且打印语句正在打印出来：

```
"http://www.test.com" 
```

并且在`"`url 周围创建 's`"\"" + url + "\""`的目的是为 urllib 提供我认为需要的格式的 url。但似乎以某种方式保留了转义码，并且 urllib 不只是将值视为`"http://www.test.com"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:51:05.533

如果您将 URL 放入包含引号的文件中，这不起作用是正常的，因为引号仅用于源代码中的*文字字符串*。在文件中包含引号就好像您在源代码中编写了类似`"\"http://www.test.com/\""`. 从文件中删除引号应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:02:17.577

```
 file_object = open('file.txt', 'r').xreadlines()
    for line in file_object:
        print line[1:-2] # to check if it is getting the correct value 
        var = urllib.urlopen(line[1:-2]).read() 
```

line[1:-2] - 只需在字符串的开头去掉一个字符，在字符串的末尾去掉两个

# c# - 如何从 XAML 访问元素资源中的情节提要？

> ID：15848381
> 
> 赞同：9
> 
> 时间：2013-04-06T07:46:30.830
> 
> 标签：c#, wpf, xaml, binding, storyboard

考虑这段代码：

```
<UserControl x:Class="MyApp.MyControl"
             ...
         xmlns:local="clr-namespace:MyApp"
         DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">

    <UserControl.Template>
        <ControlTemplate>
            <ControlTemplate.Resources>
                <Storyboard x:Key="MyStory">
                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="brdBase">
                        <SplineColorKeyFrame KeyTime="0:0:1" Value="Red"/>
                    </ColorAnimationUsingKeyFrames>
                </Storyboard>
            </ControlTemplate.Resources>

            <Border x:Name="brdBase" BorderThickness="1" BorderBrush="Cyan" Background="Black">
                ...
            </Border>

            <ControlTemplate.Triggers>
                <Trigger SourceName="brdBase" Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard Storyboard="{StaticResource MyStory}"/>
                    </Trigger.EnterActions>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </UserControl.Template>
</UserControl> 
```

上面的代码没有问题。现在，我想将关键帧值绑定到这个用户控件`MyStory`的 DP（命名），如下所示：`SpecialColor`

```
<Storyboard x:Key="MyStory">
    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="brdBase">
        <SplineColorKeyFrame KeyTime="0:0:1" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:MyControl}}, Path=SpecialColor}"/>
    </ColorAnimationUsingKeyFrames>
</Storyboard> 
```

这会出错：

*无法冻结此 Storyboard 时间线树以供跨线程使用。*

可以使用后面的代码来做到这一点。但我怎样才能只在 XAML 中做到这一点？

* * *

**代码隐藏辅助解决方案：**

►<em>第 1 步：将`MyStory`故事板放入`brdBase`资源中。

```
<UserControl.Template>
    <ControlTemplate>
        <Border x:Name="brdBase" BorderThickness="1" BorderBrush="Cyan" Background="Black">
            <Border.Resources>
                <Storyboard x:Key="MyStory">
                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="brdBase">
                        <SplineColorKeyFrame KeyTime="0:0:1" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:MyControl}}, Path=SpecialColor}"/>
                    </ColorAnimationUsingKeyFrames>
                </Storyboard>
            </Border.Resources>
            ...
        </Border>

        <ControlTemplate.Triggers>
            <Trigger SourceName="brdBase" Property="IsMouseOver" Value="True">
                <Trigger.EnterActions>
                    <BeginStoryboard Storyboard="{StaticResource MyStory}"/>
                </Trigger.EnterActions>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</UserControl.Template> 
```

**错误：** *找不到名为“MyStory”的资源。资源名称区分大小写。*

►<em>第 2 步：消除属性并从后面的`Trigger`代码开始。`IsMouseOver``MyStory`

```
<UserControl.Template>
    <ControlTemplate>
        <Border x:Name="brdBase" BorderThickness="1" BorderBrush="Cyan" Background="Black" MouseEnter="brdBase_MouseEnter">
            <Border.Resources>
                <Storyboard x:Key="MyStory">
                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="brdBase">
                        <SplineColorKeyFrame KeyTime="0:0:1" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:MyControl}}, Path=SpecialColor}"/>
                    </ColorAnimationUsingKeyFrames>
                </Storyboard>
            </Border.Resources>
        </Border>
    </ControlTemplate>
</UserControl.Template> 
```

C# 代码隐藏：

```
private void brdBase_MouseEnter(object sender, MouseEventArgs e)
{
   Border grdRoot = (Border)this.Template.FindName("brdBase", this);
   Storyboard story = grdRoot.Resources["MyStory"] as Storyboard;

   story.Begin(this, this.Template);
} 
```

►<em>第 3 步：解决方案已经完成，但第一次不起作用。幸运的是，有解决此问题的方法。`ControlTemplate`放入一个就足够了`Style`。

（我需要其他`Trigger`类型，`EventTrigger`并且必须用 . 包装`UserControl`元素`ControlTemplate`。）

* * *

**更新：**

关于使用的想法`ObjectDataProvider`失败了。

1.  *ObjectDataProvider*资源不能用于提供情节提要！！！错误报告是：
    *   **XamlParseException：**设置属性“System.Windows.Media.Animation.BeginStoryboard.Storyboard”引发异常。
    *   **InnerException：** “System.Windows.Data.ObjectDataProvider”不是属性“Storyboard”的有效值。
2.  *AssociatedControl* DP 始终为空。

这是代码：

```
<UserControl.Template>
    <ControlTemplate>
        <ControlTemplate.Resources>
            <local:StoryboardFinder x:Key="StoryboardFinder1" AssociatedControl="{Binding ElementName=brdBase}"/>
            <ObjectDataProvider x:Key="dataProvider" ObjectInstance="{StaticResource StoryboardFinder1}" MethodName="Finder">
                <ObjectDataProvider.MethodParameters>
                    <sys:String>MyStory</sys:String>
                </ObjectDataProvider.MethodParameters>
            </ObjectDataProvider>
        </ControlTemplate.Resources>

        <Border x:Name="brdBase" BorderThickness="1" BorderBrush="Cyan" Background="Black">
            <Border.Resources>
                <Storyboard x:Key="MyStory">
                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="brdBase">
                        <SplineColorKeyFrame KeyTime="0:0:1" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:MyControl}}, Path=SpecialColor}"/>
                    </ColorAnimationUsingKeyFrames>
                </Storyboard>
            </Border.Resources>
            ...
        </Border>

        <ControlTemplate.Triggers>
            <Trigger SourceName="brdBase" Property="IsMouseOver" Value="True">
                <Trigger.EnterActions>
                    <BeginStoryboard Storyboard="{StaticResource dataProvider}"/>
                </Trigger.EnterActions>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</UserControl.Template> 
```

StoryboardFinder 类：

```
public class StoryboardFinder : DependencyObject
{
    #region ________________________________________  AssociatedControl

    public Control AssociatedControl
    {
        get { return (Control)GetValue(AssociatedControlProperty); }
        set { SetValue(AssociatedControlProperty, value); }
    }

    public static readonly DependencyProperty AssociatedControlProperty =
        DependencyProperty.Register("AssociatedControl",
                                    typeof(Control),
                                    typeof(StoryboardFinder),
                                    new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.None));

    #endregion

    public Storyboard Finder(string resourceName)
    {
        //
        // Associated control is always null :(
        //
        return new Storyboard();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T11:24:06.573

如果这段代码是真的呢？

```
<UserControl x:Class="MyApp.MyControl"
             ...
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:l="clr-namespace:MyApp"
             DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">

    <UserControl.Resources>
        <Style TargetType="{x:Type l:MyControl}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type l:MyControl}">
                        <Border x:Name="brdBase" BorderThickness="1" BorderBrush="Cyan" Background="Black">
                            <Border.Resources>
                                <Storyboard x:Key="MyStory">
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="brdBase">
                                        <SplineColorKeyFrame KeyTime="0:0:1" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type l:MyControl}}, Path=SpecialColor}"/>
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </Border.Resources>

                            <i:Interaction.Triggers>
                                <l:InteractiveTrigger Property="IsMouseOver" Value="True">
                                    <l:InteractiveTrigger.CommonActions>
                                        <BeginStoryboard Storyboard="{StaticResource MyStory}"/>
                                    </l:InteractiveTrigger.CommonActions>
                                </l:InteractiveTrigger>
                            </i:Interaction.Triggers>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
</UserControl> 
```

如果是这样，我可以在`IsMouseOver`财产上触发...

我很高兴地说这是一个有效的代码:) 我只能`EventTrigger`在`<Border.Triggers>`标签中使用。这是限制。所以我开始思考这个想法：如果我可以有一个可以在`FrameworkElement.Triggers`范围内工作的自定义触发器怎么办？这是代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows;
using System.Windows.Interactivity;
using System.Windows.Media.Animation;

namespace TriggerTest
{
    /// <summary>
    /// InteractiveTrigger is a trigger that can be used as the System.Windows.Trigger but in the System.Windows.Interactivity.
    /// <para>
    /// Note: There is neither `EnterActions` nor `ExitActions` in this class. The `CommonActions` can be used instead of `EnterActions`.
    /// Also, the `Actions` property which is of type System.Windows.Interactivity.TriggerAction can be used.
    /// </para>
    /// <para> </para>
    /// <para>
    /// There is only one kind of triggers (i.e. EventTrigger) in the System.Windows.Interactivity. So you can use the following triggers in this namespace:
    /// <para>1- InteractiveTrigger : Trigger</para>
    /// <para>2- InteractiveMultiTrigger : MultiTrigger</para>
    /// <para>3- InteractiveDataTrigger : DataTrigger</para>
    /// <para>4- InteractiveMultiDataTrigger : MultiDataTrigger</para>
    /// </para>
    /// </summary>
    public class InteractiveTrigger : TriggerBase<FrameworkElement>
    {
        #region ___________________________________________________________________________________  Properties

        #region ________________________________________  Value

        /// <summary>
        /// [Wrapper property for ValueProperty]
        /// <para>
        /// Gets or sets the value to be compared with the property value of the element. The comparison is a reference equality check.
        /// </para>
        /// </summary>
        public object Value
        {
            get { return (object)GetValue(ValueProperty); }
            set { SetValue(ValueProperty, value); }
        }

        public static readonly DependencyProperty ValueProperty =
            DependencyProperty.Register("Value",
                                        typeof(object),
                                        typeof(InteractiveTrigger),
                                        new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.None, OnValuePropertyChanged));

        private static void OnValuePropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
        {
            InteractiveTrigger instance = sender as InteractiveTrigger;

            if (instance != null)
            {
                if (instance.CanFire)
                    instance.Fire();
            }
        }

        #endregion

        /// <summary>
        /// Gets or sets the name of the object with the property that causes the associated setters to be applied.
        /// </summary>
        public string SourceName
        {
            get;
            set;
        }

        /// <summary>
        /// Gets or sets the property that returns the value that is compared with this trigger.Value property. The comparison is a reference equality check.
        /// </summary>
        public DependencyProperty Property
        {
            get;
            set;
        }

        /// <summary>
        /// Gets or sets a collection of System.Windows.Setter objects, which describe the property values to apply when the trigger object becomes active.
        /// </summary>
        public List<Setter> Setters
        {
            get;
            set;
        }

        /// <summary>
        /// Gets or sets the collection of System.Windows.TriggerAction objects to apply when this trigger object becomes active.
        /// </summary>
        public List<System.Windows.TriggerAction> CommonActions
        {
            get;
            set;
        }

        /// <summary>
        /// Gets a value indicating whether this trigger can be active to apply setters and actions.
        /// </summary>
        private bool CanFire
        {
            get
            {
                if (this.AssociatedObject == null)
                {
                    return false;
                }
                else
                {
                    object associatedValue;

                    if (string.IsNullOrEmpty(SourceName))
                        associatedValue = this.AssociatedObject.GetValue(Property);
                    else
                        associatedValue = (this.AssociatedObject.FindName(SourceName) as DependencyObject).GetValue(Property);

                    TypeConverter typeConverter = TypeDescriptor.GetConverter(Property.PropertyType);
                    object realValue = typeConverter.ConvertFromString(Value.ToString());

                    return associatedValue.Equals(realValue);
                }
            }
        }

        #endregion

        #region ___________________________________________________________________________________  Methods

        /// <summary>
        /// Fires (activates) current trigger by setting setter values and invoking all actions.
        /// </summary>
        private void Fire()
        {
            //
            // Setting setters values to their associated properties..
            //
            foreach (Setter setter in Setters)
            {
                if (string.IsNullOrEmpty(setter.TargetName))
                    this.AssociatedObject.SetValue(setter.Property, setter.Value);
                else
                    (this.AssociatedObject.FindName(setter.TargetName) as DependencyObject).SetValue(setter.Property, setter.Value);
            }

            //
            // Firing actions.. 
            //
            foreach (System.Windows.TriggerAction action in CommonActions)
            {
                Type actionType = action.GetType();

                if (actionType == typeof(BeginStoryboard))
                {
                    (action as BeginStoryboard).Storyboard.Begin();
                }
                else
                    throw new NotImplementedException();
            }

            this.InvokeActions(null);
        }

        #endregion

        #region ___________________________________________________________________________________  Events

        public InteractiveTrigger()
        {
            Setters = new List<Setter>();
            CommonActions = new List<System.Windows.TriggerAction>();
        }

        protected override void OnAttached()
        {
            base.OnAttached();

            if (Property != null)
            {
                object propertyAssociatedObject;

                if (string.IsNullOrEmpty(SourceName))
                    propertyAssociatedObject = this.AssociatedObject;
                else
                    propertyAssociatedObject = this.AssociatedObject.FindName(SourceName);

                //
                // Adding a property changed listener to the property associated-object..
                //
                DependencyPropertyDescriptor dpDescriptor = DependencyPropertyDescriptor.FromProperty(Property, propertyAssociatedObject.GetType());
                dpDescriptor.AddValueChanged(propertyAssociatedObject, PropertyListener_ValueChanged);
            }
        }

        protected override void OnDetaching()
        {
            base.OnDetaching();

            if (Property != null)
            {
                object propertyAssociatedObject;

                if (string.IsNullOrEmpty(SourceName))
                    propertyAssociatedObject = this.AssociatedObject;
                else
                    propertyAssociatedObject = this.AssociatedObject.FindName(SourceName);

                //
                // Removing previously added property changed listener from the associated-object..
                //
                DependencyPropertyDescriptor dpDescriptor = DependencyPropertyDescriptor.FromProperty(Property, propertyAssociatedObject.GetType());
                dpDescriptor.RemoveValueChanged(propertyAssociatedObject, PropertyListener_ValueChanged);
            }
        }

        private void PropertyListener_ValueChanged(object sender, EventArgs e)
        {
            if (CanFire)
                Fire();
        }

        #endregion
    }
} 
```

我还创建了其他触发器类型（即`InteractiveMultiTrigger`、`InteractiveDataTrigger`、`InteractiveMultiDataTrigger`）以及更多操作，这使得有条件和多条件 EventTriggers 成为可能。如果你们专业人士确认此解决方案，我将全部发布。

感谢您的关注！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T08:58:09.717

好吧，您不能真正绑定到“To”或 From，因为必须冻结情节提要，才能有效地使用跨线程。

**解决方案1）**最简单的没有hacks的解决方案（涉及代码隐藏）：在事件处理程序中添加MouseOver事件处理程序&，定位必要的动画，直接设置“To”属性，这样你就不会使用绑定并且可以“冻结” . 这样你就不会硬编码任何东西:)。

**解决方案2）**有一个很酷的黑客只支持XAML（当然有点转换器魔法），但我不建议这样做。尽管如此还是很酷 :) [WPF 动画：绑定到情节提要动画的“To”属性](https://stackoverflow.com/questions/2186933/wpf-animation-binding-to-the-to-attribute-of-storyboard-animation/14164245#14164245) 请参阅 Jason 的回答。

您还可以尝试以下几件事：

**解决方案3）**不要使用依赖属性，而是实现INotifyProperthChanged。这样你仍然可以绑定“到”。请注意，我认为这在理论上应该可行，但我没有尝试过。

**解决方案4）**将 Mode=OneTime 应用于您的绑定。也许它有效？

**解决方案5）**编写您自己的附加行为，该行为将评估正确线程上的依赖属性并设置“To”属性。我认为这将是一个很好的解决方案。

这也是很好的副本：[WPF 动画“无法冻结此情节提要时间线树以供跨线程使用”](https://stackoverflow.com/questions/1669750/wpf-animation-cannot-freeze-this-storyboard-timeline-tree-for-use-across-thread)

# php - 在php mysql中显示特定年份的记录

> ID：15848387
> 
> 赞同：-2
> 
> 时间：2013-04-06T07:47:36.480
> 
> 标签：php, mysql, select-query

我有一个系统可以按年显示记录。我有用户从中选择年份的下拉菜单，并且我将该值存储在变量中`$year`。所以现在 when `$year = 2013-2014`，它不应该显示 2014-2015 年的记录。顺便说一句，当我插入我的合同编号时，我还插入了用户在登录期间选择的年份。例如`contractNumber = 1#2013-2014`。

我试过这个查询：

```
SELECT * FROM contract WHERE contarctNumber RLIKE "^$year"; 
```

现在当我选择 2014-2015 年时，它仍然显示 2013-2014 年的所有记录。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:51:57.793

试试这个查询

```
SELECT * FROM contract WHERE contarctNumber LIKE "%$year"; 
```

[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/45ea9/1)

**例子**

```
CREATE TABLE test (contarctNumber varchar(25));
INSERT INTO test VALUES ('1#2013-2014'), ('1#2014-2015'), ('2#2014-2015'); 
```

**选择查询**

```
SELECT * FROM test WHERE contarctNumber LIKE "%2014-2015"; 
```

**输出**

```
| CONTARCTNUMBER |
------------------
|    1#2014-2015 |
|    2#2014-2015 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:52:22.570

如果`contractNumber`总是在日期范围内结束，为什么不使用：

```
SELECT * FROM contract WHERE contarctNumber LIKE "%$year"; 
```

这意味着它将匹配`$year`选定之前的任何内容，但仍匹配指定的范围。

选项#2：

```
SELECT * from contract where RIGHT(contarctNumber, 9) = '$year'; 
```

# c++ - C++ Singleton 用法：编译器抱怨私有构造函数

> ID：15848408
> 
> 赞同：4
> 
> 时间：2013-04-06T07:51:20.627
> 
> 标签：c++, design-patterns, singleton

我知道那里有一百万个关于单身人士的问题和答案，但我似乎无法找到解决方案。所以冒着投反对票的风险，这是我的问题：

我想使用 Andrei Alexandrescu 的 Modern C++ Design 这个单例实现：

标题：

```
class Singleton
{
    static Singleton& Instance();
  private:
    Singleton(){};
    Singleton(const Singleton&){};
    Singleton& operator=(const Singleton&){};
    ~Singleton(){};
}; 
```

执行：

```
#include "s.hh"

Singleton& Singleton::Instance()
{
    static Singleton instance;
    return instance;
} 
```

测试：

```
#include "s.hh"

int main(void)
{
    Singleton& single = Singleton::Instance();
    return 0;
} 
```

现在，

```
$g++ A.cc s.cc  && ./a.out 
In file included from A.cc:1:0:
s.hh: In function ‘int main()’:
s.hh:3:19: error: ‘static Singleton& Singleton::Instance()’ is private
 static Singleton& Instance();
               ^
A.cc:6:42: error: within this context
  Singleton& single = Singleton::Instance();
                                      ^ 
```

那有什么问题？我被困住了...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T07:54:00.243

默认情况下，类的成员是私有的。要访问您的单身人士，您需要`Singleton::Instance`公开：

```
class Singleton
{
  // here!
  public:
    static Singleton& Instance();

  private:
    Singleton(){};
    Singleton(const Singleton&){};
    Singleton& operator=(const Singleton&){};
    ~Singleton(){};
}; 
```

请注意，这不是构造函数（正如您在标题中所说），它是应该返回对单例的引用的静态成员函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T07:53:49.023

a 的默认访问权限`class`是`private`，因此您需要`Instance()`明确地创建该方法`public`：

```
class Singleton
{
 public:
    static Singleton& Instance();
 private:
   // as before
....
}; 
```

或者，您可以使用`struct`，其默认访问说明符是公共的：

```
struct Singleton
{
    static Singleton& Instance(); // public
  private:
    Singleton(){};
    Singleton(const Singleton&){};
    Singleton& operator=(const Singleton&){};
    ~Singleton(){};
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T07:54:04.060

类的默认访问说明符是`private`. `public`在访问说明符下添加方法。

```
public:
    static Singleton& Instance(); 
```

**好读：**
[什么是访问说明符？我应该以私有、受保护还是公共继承？](https://stackoverflow.com/questions/5447498/what-are-access-specifiers-should-i-inherit-with-private-protected-or-public)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T07:55:22.860

```
class S
{
    public:
        static S& getInstance()
        {
            static S    instance; 

            return instance;
        }
    private:
            // other stuff here
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T11:57:18.003

也不要将您的其他析构函数设为私有。

```
class Singleton
{
  // here!
  public:
    static Singleton& Instance();
    ~Singleton(){};

  private:
    Singleton(){};
    Singleton(const Singleton&){};
    Singleton& operator=(const Singleton&){};

}; 
```

# android - Android 切换按钮状态

> ID：15848409
> 
> 赞同：1
> 
> 时间：2013-04-06T07:51:36.380
> 
> 标签：android, togglebutton, activity-lifecycle

嗨，我有一个显示切换按钮的活动。问题是，当我按下设备上的返回按钮然后我回到我的活动时，按钮的状态被重置。

如何使活动在其整个生命周期中“记住”按钮的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:01:21.817

在`onCreate()`或`onResume()`根据您的要求执行此操作：

```
SharedPreferences preferences = this.getSharedPreferences(Constants.SENDEVENT_PREFERENCE,Context.MODE_PRIVATE);
if(preferences.getBoolean(Constants.SENDEVENT_PREFERENCE_SAVE_LIBRARY, false))
            lib.setChecked(true); 
```

在`onCheckedChanged`方法中这样做：

```
if (buttonView == lib) {
            if (isChecked) {
                prefsEditor.putBoolean(Constants.SENDEVENT_PREFERENCE_SAVE_LIBRARY,
                        true);
                prefsEditor.commit();
            } else {
                prefsEditor.putBoolean(Constants.SENDEVENT_PREFERENCE_SAVE_LIBRARY,
                        false);
                prefsEditor.commit();
            }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:08:19.360

重置状态的原因是由于Android架构，您的活动被完全破坏然后再次恢复。要存储按钮的状态，您应该在 onSaveInstaceState() 中将其状态保存到 Bundle 中并在 onRestoreInstanceState() 中恢复 - 这些方法是专门为此类任务设计的。

所以答案是你应该用两种方法实现保存/恢复按钮状态：

```
@Override
protected void onSaveInstanceState (Bundle outState) {
    // Your code here
}

@Override
protected void onRestoreInstanceState (Bundle savedInstanceState) {
    // Your code here
} 
```

详情见[文档](http://developer.android.com/reference/android/app/Activity.html)：

> 请注意上表中的“Killable”列——对于那些标记为可终止的方法，在该方法返回后，托管该活动的进程可能随时被系统终止，而无需执行另一行代码。因此，您应该使用 onPause() 方法将任何持久性数据（例如用户编辑）写入存储。此外，方法 onSaveInstanceState(Bundle) 在将 Activity 置于此类后台状态之前被调用，允许您将 Activity 中的任何动态实例状态保存到给定的 Bundle 中，以便稍后在 onCreate(Bundle) 中接收该 Activity需要重新创建。有关流程的生命周期如何与其托管的活动相关联的更多信息，请参阅流程生命周期部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T07:57:50.657

您必须将状态保存在持久内存中。我想说，在这种情况下，共享首选项是您的最佳选择[。](http://developer.android.com/reference/android/content/SharedPreferences.html)

类似于（在您的活动中使用切换按钮）：

```
public void saveButtonState(boolean pressed) {
    SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putBoolean("TOGGLE_BUTTON_STATE", pressed);
    editor.commit();
} 
```

然后在 onCreate 中，您可以通过从 SharedPreferences 中读取“TOGGLE_BUTTON_STATE”来设置按钮状态。

# sql - 如何在sql server中选择没有名称的列？

> ID：15848415
> 
> 赞同：6
> 
> 时间：2013-04-06T07:52:21.177
> 
> 标签：sql, sql-server

如何

```
select name,family from student where name="X" 
```

没有它的列名。

例如 ：

```
select "column1","column2" from student where "column1"="x" 
```

或者例如

```
select "1","2" from student where "1"="x" 
```

“1”是第 1 列，“2”是第 2 列

我不想说列名。我只想说它的数字或其他.... 不厌倦选择 *。但这只是因为我不知道列名，但我知道它们在哪里。每次我想读取文件时，我的列名都会更改，但其数据相同，并且数据位于每个文件的相同列中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:52:17.647

尽管您不能在 SELECT 语句中使用字段位置说明符，但 SQL 标准包括定义表字典的 INFORMATION_SCHEMA。这包括定义所有表的所有字段的 COLUMNS 视图。在此视图中，您可以使用一个名为 ORDINAL_POSITION 的字段来帮助解决此问题。

如果您查询

```
SELECT ORDINAL_POSITION, COLUMN_NAME 
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'TABLE'
ORDER BY ORDINAL_POSITION 
```

然后您可以获得所需序数位置的列名。从那里您可以准备一个 SQL 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-11T14:33:25.923

如果它是一个字符串，你可以这样做：

```
Select Column1 + '' From Table 
```

如果它是一个数字，你可以这样做：

```
Select Column1 + 0 From Table 
```

如果是日期时间，您可以这样做：

```
Select dateadd(d, 0, Column1) From Table 
```

同样对于其他数据类型..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-13T11:52:00.960

您可以将临时表用作：

```
DECLARE @TB TABLE(Column1 NVARCHAR(50),...)
INSERT @TB
SELECT * FROM student 
```

然后使用它：

```
SELECT Column1 FROM @TB WHERE Column1='aa' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T07:56:11.880

不，您不能在 SELECT 子句中使用序数（数字）位置。只有按您的顺序排列才可以。

但是您可以创建自己的列别名...

```
Select Column1 as [1] From Table 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T07:56:16.770

您可以使用别名：

```
SELECT name AS [1], family AS [2] FROM student WHERE name="X" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-25T18:19:35.977

这是不可能的。不幸的是，他们没有考虑 table-valued 函数，因为 information_schema 不可用，所以祝你好运。

# ios - 如何从两个 plist 中添加 NSMutableDictionary 中的信息？

> ID：15848419
> 
> 赞同：1
> 
> 时间：2013-04-06T07:52:31.377
> 
> 标签：ios, plist, add, nsmutabledictionary

我有两个 plist。如何从两个 plist 中添加 NSMutableDictionary 中的信息？我知道如何从 plist 中做到这一点。但我有 2 个 plist。

```
 NSString *path = [[NSBundle mainBundle] pathForResource:
                          @"Eur" ofType:@"plist"];
        NSString *path1 = [[NSBundle mainBundle] pathForResource:
                          @"Asia" ofType:@"plist"];
        stationDictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:path]; 
```

我需要在 stationDictionary 中添加两个 plist：1 Eur 2 Asia。但我不知道如何添加第二个 plist 中的信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T07:59:35.127

```
NSString *path = [[NSBundle mainBundle] pathForResource:
                  @"Eur" ofType:@"plist"];
NSString *path1 = [[NSBundle mainBundle] pathForResource:
                   @"Asia" ofType:@"plist"];
NSMutableDictionary* stationDictionary = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
NSDictionary* dicForPath1 = [[NSDictionary alloc] initWithContentsOfFile:path1];
[stationDictionary addEntriesFromDictionary:dicForPath1]; 
```

# android - KFTT 内存不足崩溃

> ID：15848420
> 
> 赞同：0
> 
> 时间：2013-04-06T07:52:52.047
> 
> 标签：android, memory-management, out-of-memory, kindle-fire

我们已经在亚马逊市场上提交了一个应用程序，上传的 .apk 在其他设备和我的 KFTT 上也可以正常工作，但是当我们或其他用户从亚马逊市场下载应用程序时，它会导致 OutofMEmoryError。我们在游戏中使用了 1024X1024 和 2048X2048 的 sprite sheet。

当我们手动安装 .apk 时，它永远不会崩溃，但是当我们从亚马逊市场下载它后运行它时，它总是会崩溃。有人可以告诉我们它的原因是什么以及如何解决它？

```
java.lang.OutOfMemoryError
at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:549)
at com.finoit.androidgames.framework.gl.Texture.load(Texture.java:42)
at com.finoit.androidgames.framework.gl.Texture.(Texture.java:30)
at com.finoit.androidgames.tapafish.Assets.load(Assets.java:458)
at com.finoit.androidgames.tapafish.FishTank.onSurfaceCreated(FishTank.java:23)
at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1446)
at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:59:18.673

我有同样的行为：amazon hd 8,9 上的内存不足，旁边的大小与 nexus 10 中的相同，它在 64 mb 上工作得非常好。

作为最快的解决方案，我在 AndroidManifest 中添加了 largeHeap 选项，它可以为您提供更多内存，如果需要，理论上可以达到 256 mb。暂时将其作为最简单的解决方案尝试。

……

此外，如果您想优化，请尝试使用 MAT 的 DDMS，以了解已分配内存的最大部分。当您找到最大的部分时，通常这是位图，您始终可以在比例低于 hdpi（大多数设备的亚马逊默认密度）的 bitmapFactory 的帮助下加载它们，它确实节省了内存。

# trigonometry - 用任意点找到两条平行线之间的最短距离

> ID：15848421
> 
> 赞同：4
> 
> 时间：2013-04-06T07:52:59.317
> 
> 标签：trigonometry, vectormath

我需要编写一个**可靠**的方法来检索以下场景的答案......

给定一条线段 AB 和一个任意点 C，我将如何在与 AB 平行且穿过点 C 的线上找到离 A 最近的点？（上面提到的可靠是指算法能够找到 D，同时允许 A、B 和 C 的坐标是完全任意且不可预测的。我遇到了很多我无法适应的解决方案可能的情况，可悲的是......）

在下图中显示的数据的情况下，我如何可靠地找到 D 的 x,y 坐标？

```
A = <425, 473>
B = <584, 533>
C = <371, 401>
D = <???, ???> 
```

知道 AB 和 CD 是平行的，这显然意味着斜率是相同的。

我尝试了许多不同的公式都无济于事，并且已经为此工作了数周。我难住了！

![图表](https://i.stack.imgur.com/Q9QEF.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:34:40.393

这是一个最小化问题。

一般来说，N维空间中两点（A和B）之间的欧几里得距离由Dist(A,B) = sqrt((A1-B1)^2 + ... + (AN-BN)^2)给出

如果您需要找到空间曲线 A(t)（嵌入在某个 N 维空间中的一维对象）与点 B 之间的最小距离，那么您需要求解这个方程：

```
d Dist(A(t),B) / dt = 0    // (this is straightforward calculus: we're at either a minimum or maximum when the rate of change is 0) 
```

并根据距离函数测试该组根（t1、t2 等），以找出哪一个产生 D 的最小值。

* * *

现在以 y=mx+b 的形式找到通过 C 的平行线的方程：

```
m = (Ay - By)/(Ax-Bx)
b = Cy - mCx 
```

让我们把它写成空间曲线的形式，并将其代入第 1 部分的公式中：

```
Dist(D(t),A) = sqrt((t-Ax)^2 + (m*t+b-Ay)^2) 
```

取我们的导数：

```
d Dist(D(t),A)/ dt = d sqrt((t-Ax)^2 + (m*t+b-Ay)^2) / dt 

= (t + (m^2)*t - Ax + m*b - m*Ay)/sqrt(t^2 + (m^2)t^2 - 2*t*Ax + 2*m*t*b - 2*m*t*Ay + (Ax)^2 + (Ay)^2 + b^2 - 2*b*Ay )
= ((1+m^2)*t - Ax + m*b - m*Ay)/sqrt((1+m^2)*(t^2)  + 2*t*(m*b - Ax - m*Ay) + (Ax)^2 + (Ay)^2 + b^2 - 2*b*Ay ) 
```

将此设置为 0 并求解 t 产生： t = (Ax-m*b+m*Ay)/(1+m^2) 作为唯一的根（您可以通过代入并验证一切都根据需要取消）。

将 t 的值重新代入我们的空间曲线，得到以下结果： D=<(Ax-m*b+m*Ay)/(1+m^2),b+m*(Ax-m*b+m *Ay)/(1+m^2)>

然后，如果您想要 A、B、C 项的显式解，或者如果您只想要数值解，您可以插入 m 和 b 的表达式，您可以将其计算为一个三步过程：

```
m = (Ay - By)/(Ax-Bx)
b = Cy - mCx
D=<(Ax-m*b+m*Ay)/(1+m^2),b+m*(Ax-m*b+m*Ay)/(1+m^2)> 
```

这将适用于所有具有平行直线的情况。将其实现为数字（而不是分析）代码时需要注意：如果线条垂直定向，则计算 m = (Ay-By)/(Ax-Bx) 将导致除以 0，这将使您的代码不起作用. 您可以按如下方式投入安全阀：

```
if( Ax == Bx) {
    D = <Cx,Ay>
} else {
    // normal calculation here
} 
```

对于严肃的数值工作，由于舍入误差和所有有趣的东西（即 abs(Ax-Bx) < epsilon，而不是 Ax==Bx），您可能希望根据公差而不是直接比较来实现它

# php - Preg_match_all 和 javascript 数组

> ID：15848423
> 
> 赞同：1
> 
> 时间：2013-04-06T07:53:26.613
> 
> 标签：php, javascript, regex, arrays, preg-match-all

我想从 javascript 数组中提取数字“28”：

`array.content(2,'28','0');`

所以我用正则表达式写了这样的东西：

`(preg_match_all("/array.content(2,\'(.*?)\');/", $result, $con)`

它不起作用，请帮助；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:56:20.847

在**Javascript中**

如果您尝试删除该元素，请查看 Javascript 的[`Array.splice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice).

如果您要查找元素，只需使用[`Array.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf).

在**PHP中**

```
preg_match_all(#\((.*)(,|\))#, "array.content(2,'28','0');", $matches); 
```

您可能想澄清您的问题并查看 php 的[`preg_match_all()`](http://php.net/manual/en/function.preg-match-all.php)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:58:51.813

这个正则表达式应该工作：

```
 "/array\.content\(2\,\'?([0-9]+)\'?\,[^\)]*\)\;/ui" 
```

并在 此处的测试参数中切换`$result`变量： [http ://regexr.com?34e0q](http://regexr.com?34e0q)`$con``preg_match_all`

如果第一个参数不总是 2（而是一个数字变量），你可以使用这个：

```
 "/array\.content\(\'?[0-9]+\'?,\'?([0-9]+)\'?\,[^\)]*\)\;/ui" 
```

测试：[http ://regexr.com?34e16](http://regexr.com?34e16)

查看您的结果：

```
var_dump($result);  //$result[1] contains what you need ;) 
```

# javascript - 用于 CRM 2011 报价产品的 OnSave Javascript

> ID：15848431
> 
> 赞同：0
> 
> 时间：2013-04-06T07:54:24.370
> 
> 标签：javascript, dynamics-crm-2011

我在报价产品上有一个脚本，我想在保存表单时更新税值。但是，它确实根据字段的先前值更新了税收。脚本如下：

```
function tax ()
{
   var val0 = Xrm.Page.getAttribute("baseamount").getValue();
   var val1 = Xrm.Page.getAttribute("manualdiscountamount").getValue();
   val2 = val0 - val1;
   val2 = val2 * 0.05;
   Xrm.Page.getAttribute("tax").setValue(val2);
} 
```

例如，如果在创建报价产品时基数为 10，手动折扣为 1，则税金更新为 0。如果保存后，我将基数更改为 20，手动折扣为 1，则税金更新到0.45！意思是，它根据字段的先前值计算税款！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:27:35.740

您正面临这个问题，因为您`baseamount`在 CRM 更新之前获得了价值。

`baseamout`是在表单保存后计算的，所以你需要手动计算值，如这个简化的例子：

```
function tax ()
{
   var priceperunit = Xrm.Page.getAttribute("priceperunit").getValue();
   var quantity = Xrm.Page.getAttribute("quantity").getValue();
   var val0 = priceperunit * quantity;
   var val1 = Xrm.Page.getAttribute("manualdiscountamount").getValue();
   val2 = val0 - val1;
   val2 = val2 * 0.05;
   Xrm.Page.getAttribute("tax").setValue(val2);
} 
```

注意还有批量折扣字段，产品也可以写入。

# python - MYSql CGI 脚本

> ID：15848434
> 
> 赞同：0
> 
> 时间：2013-04-06T07:55:08.807
> 
> 标签：python, cgi, cgi-bin

下面的代码是我的 CGI 脚本，我试图在其中执行插入命令。

```
#! C:\Python27\python.exe -u

import cgi
import MySQLdb
import xml.sax.saxutils

query = cgi.parse()
db = MySQLdb.connect(

host = "127.0.0.1",
user = "root",
passwd = "mysql123",
db = "welcome")

print 'Content-type: text/plain\n\n<?xml version="1.0" encoding="utf-8"?>\n<result>'

try:
c = db.cursor()
c.execute("insert into welcome.registrations values ('test','test',now())")
print '\t<update>true</update>'
except:
print '\t<update>false</update>'

print "</result>" 
```

当我运行转到 url - .com/cgi-bin/reg.cgi 时，我没有在 mysql DB 中找到任何插入操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:01:21.723

你需要做`db.commit()`之后`c.execute()`。

或者你可以这样做：

```
with db:
    c = db.cursor()
    c.execute("insert into welcome.registrations values ('test','test',now())") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:08:36.427

确保在每次插入后执行 db.commit() （或最后，任何操作都可以）：

```
try:
c = db.cursor()
c.execute("insert into welcome.registrations values ('test','test',now())")
db.commit()
db.close() # Make sure you close the connection else multiple connections will result in hanging of mysql server. 
```

# security - 缓冲区大小和 ASLR 蛮力的机会

> ID：15848439
> 
> 赞同：1
> 
> 时间：2013-04-06T07:55:35.563
> 
> 标签：security, brute-force, aslr

增加缓冲区大小如何增加 ASLR 暴力破解成功的机会？

这与我最近做的一个项目有关。我们有一个exploit_1.c 程序，它有一个缓冲区/字符数组（最初大小为517）。使用 memset 将缓冲区设置为 NOP。然后我们将 shellcode 和返回地址放入缓冲区，然后将其写入一个名为 badfile 的文件。该程序采用了一个参数，即返回地址。我们有一个 stack.c 程序，它在一个名为 bof 的函数中将坏文件的内容复制到大小为 12 的缓冲区中。

我读过一种方法是在 NOP sled 的末尾放置一个跳转并将其重定向到 shellcode。但是，shellcode 是 24 个字节，并且在返回地址之前最多只有 16 个字节。所以我所做的就是将 shellcode 放在缓冲区的末尾。

我们得到的第三个任务是选择返回地址，以便利用程序（当然针对缓冲区大小进行了修改）在缓冲区大小为 1000、10000 和 100000 时具有更高的平均成功机会。我们使用了带有计数器的 bash while 循环计算 ASLR 蛮力尝试了多少次。

所以我在想的是，随着内存的增加，NOP 雪橇显然会更长。但必须有更多的东西。

我选择的地址是：0xbf87f030 0xbf82e3d0 0xbfe0fb60

# objective-c - 在 Mac 上重新打开应用程序时如何获取命令行参数

> ID：15848450
> 
> 赞同：0
> 
> 时间：2013-04-06T07:56:44.330
> 
> 标签：objective-c, macos, cocoa, command-line-arguments

我必须在 Mac OS X 上编写一个应用程序，我想用带有两个参数的命令行打开它。这很简单。我使用`[[NSProcessInfo processInfo] arguments]`. 但是当我重新打开应用程序时，我需要抓住新的论据。怎么做？ProcessInfo 给了我第一次写的论点。需要明确的是： `open myapp.app --args -url1 http://apple.com -url2 /Desktop` 所以我在 ProcessInfo 中有两个参数：url1 和 url2。

现在我想用另一个新参数重新打开这个应用程序（应用程序仍在后台工作）： `open myapp.app --args -url1 http://somethingelse.com -url2 /Desktop/NewLibrary` 但是当我使用 NSProcessInfo 我有旧参数（`http://apple.com`和`/Desktop`）。

我怎样才能抓住新的论点？

对不起我的英语不好 ：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:19:28.047

默认情况下，`open(1)`命令行工具将切换到程序的现有实例。由于这不会调用程序的主入口点，因此参数将被忽略。它们在程序启动时设置，如果您想将其与其他命令行参数一起使用，您必须启动程序的新实例。

用于`open -n`启动程序的新实例。即使另一个实例已经存在，这也会启动一个新实例。

# sql-server-ce - 在 SQL Server CE 数据库中运行脚本

> ID：15848459
> 
> 赞同：0
> 
> 时间：2013-04-06T07:58:00.553
> 
> 标签：sql-server-ce

我已经使用`Databases > Tasks > Generate Script`SQL Server Management Studio Express 中的功能来生成一些表并将其保存到`.sql`文件中的脚本中。现在我有了`.sql`要运行的脚本，我已将 SQL Server CE 数据库添加到`App_Data`我的 ASP.NET 应用程序的文件夹中，但我似乎无法弄清楚如何在我`.sql`的 SQL 文件中运行脚本服务器 CE 数据库。

顺便说一句，我已经尝试将 SQL Server CE 数据库从我的应用程序复制到存储其他数据库文件的文件夹中，并尝试将 SQL Server CE 数据库附加到我的 SQL Server Management Studio Express 中的“数据库” . 但是，我们显然无法附加 SQL Server CE 数据库。这意味着，显然我们也无法在 SSMSE 中的 SQL Server CE 数据库上运行脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:29:53.803

您将需要工具箱（也可作为单个 .exe 独立 - 几乎不臃肿）或类似工具，因为 SSMS 生成的脚本与 Sql CE 不兼容。我的工具可以指向一个 SQL Server 数据库，并以正确的语法创建一个脚本——MS 没有提供这样的“缩小规模”功能。

# sql - SQL Server 和 DISTINCT

> ID：15848460
> 
> 赞同：-1
> 
> 时间：2013-04-06T07:58:03.403
> 
> 标签：sql, sql-server

我一直在用谷歌搜索并寻找解决问题的好方法，但我找不到任何东西。

我有两个表：table1 和 table2，我想在 table1 中找到 table2 中不存在的所有唯一电子邮件。

第一个查询返回 1420 的 int 结果，第二个查询返回总计数为 1431 的行集。

这怎么可能？我想这与我选择名称和状态有关吗？

```
select 
    Count(DISTINCT(Email)) 
from
    table1 t1 
where 
    t1.siteId = 4 
    and t1.Email not in (select Email from table2 t2 where t2.SiteId = 4)
go

WITH MyPage AS
(
   SELECT DISTINCT(t1.Email), 
       t1.Name, 
       t1.[Status],
       ROW_NUMBER() OVER (partition by t1.Email ORDER BY t1.Name) AS Apperences,
       ROW_NUMBER() OVER (ORDER BY t1.Name) AS RowNumber
   FROM 
       table1 t1 
   WHERE 
       t1.siteId = 4 
       AND t1.Email NOT IN (SELECT Email FROM table2 t2 WHERE t2.SiteId = 4)
)
SELECT 
    Email, Name, [Status]
FROM 
    MyPage
WHERE 
    RowNumber => 0 and RowNumber <= 50000 
```

我知道我可以在最后一个选择上添加“不同”，但这会搞砸我想要的分页......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:29:35.053

尝试这个：

```
WITH MyPage 
AS
  (SELECT 
      t1.Email, 
      t1.Name, 
      t1.[Status],
      ROW_NUMBER() OVER (partition by t1.Email ORDER BY t1.Name) AS Apperences,
      ROW_NUMBER() OVER (ORDER BY t1.Name) AS RowNumber
   FROM table1 t1 
   WHERE t1.siteId = 4 
   and t1.Email not in (SELECT Email FROM table2 t2 where t2.SiteId=4)
  )

SELECT Email, Name, [Status]
FROM MyPage
WHERE RowNumber => 0 and RowNumber <= 50000
AND Apperences = 1 // this will give you the DISTINCT email 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:31:20.450

要获取所有不同电子邮件的列表以及仅应用一个名称，请先创建一个包含示例名称的所有不同邮件列表（我使用按字母顺序排列的最后一个），然后使用此表作为基础添加更多信息. 但是，结果，尤其是行号将毫无用处。

```
 WITH MyPage AS
      (SELECT t1.Email, 
        t1.Name, 
        t1.[Status],
        ROW_NUMBER() OVER (partition by t1.Email ORDER BY t1.Name) AS Apperences,
        ROW_NUMBER() OVER (ORDER BY t1.Name) AS RowNumber
        FROM 
          (select x.Email, max(Name) as name 
             from table1 t1 
            where t1.siteId = 4 
              and t1.Email not in (
              SELECT Email FROM table2 t2 where t2.SiteId=4
              )
            group by x.Email
          ) t1
    SELECT Email, Name, [Status]
    FROM MyPage
    WHERE RowNumber => 0 and RowNumber <= 50000 
```

# servlets - 我可以在一个 html 表单中有两个动作 servlet 吗？

> ID：15848461
> 
> 赞同：0
> 
> 时间：2013-04-06T07:58:12.920
> 
> 标签：servlets

```
<form action="LoginServlet" method="post">
            Username: <input type="text" name="username">
            Password: <input type="password" name="password">
            <input type="submit" value="Login">
        </form> 
```

我还需要在“ChangePasswordServlet”中检索“用户名”参数。请帮我看一下格式。我已经尝试搜索它，但没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:11:11.297

添加第二个用于更改密码的按钮：

```
<input type="submit" value="Change Password" formaction="ChangePasswordServlet"> 
```

# c# - 条件消息框

> ID：15848462
> 
> 赞同：0
> 
> 时间：2013-04-06T07:58:19.340
> 
> 标签：c#

如果满足不同的条件，我目前正在制作一个脚本来显示特定的 MessageBox。**我有 8 个条件要检查，如果它们是“0”或“1”，它们中的每一个都必须显示不同的 MessageBox。**

我的代码的简化示例如下：

```
// Similar if(y[1] == "1") statements above with similar Messages but without the corresponding fruit(s)

if (y[2] == "1")
{ MessageBox.Show("Multiple goods required! Please get the following
                   items off the shelves" + Environment.NewLine +
                   "1\. Apple" + Environment.NewLine + "2\. Pear" +
                   Environment.NewLine + "3\. Orange");
}

else if (y[2] == "0")
{ MessageBox.Show("Multiple goods required! Please get the following
                   items off the shelves" + Environment.NewLine +
                   "1\. Apple" + Environment.NewLine + "2\. Pear");
} 
```

我的C#知识很基础，但我愿意学习！请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:19:25.007

我会有条件地发送消息，并编写一次显示消息框的代码：

```
string msg = "Multiple goods required! Please get the following items off the shelves";

if(y[2] == "0" || y[2] == "1")
{
    msg += Environment.NewLine + "1\. Apple"
            + Environment.NewLine + "2\. Pear";

    if (y[2] == "1")
        msg += Environment.NewLine + "3\. Orange";

    MessageBox.Show(msg);
} 
```

我只是将上面的代码等同于您的代码，否则我认为它可以写得更好。

还可以考虑使用[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)和[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)来创建消息，而不是连接小字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:10:36.873

如果您的问题是如何更轻松地显示消息框，可以这样：

```
for(int i =0;i<y.length;i++){
            if(y[i] == 0){
                MessageBox.Show("Multiple goods required! Please get the following
                   items off the shelves" + Environment.NewLine +
                   "1\. Apple" + Environment.NewLine + "2\. Pear");
            }
            else if(y[i] == 1){
                MessageBox.Show("Multiple goods required! Please get the following
                   items off the shelves" + Environment.NewLine +
                   "1\. Apple" + Environment.NewLine + "2\. Pear" +
                   Environment.NewLine + "3\. Orange");
            }
        } 
```

如果这不是您的问题，请告诉我，我会回来尝试提供帮助

# iphone - iOS 中的 LinkedIn 集成：邀请 API 不起作用

> ID：15848463
> 
> 赞同：2
> 
> 时间：2013-04-06T07:58:19.730
> 
> 标签：iphone, ios, objective-c, linkedin, linkedin-jsapi

我正在尝试将**LinkedIn**集成到我的 iOS 应用程序中，我需要在其中进行身份验证，然后获取个人资料详细信息并从我的应用程序发布到 LinkedIn。[我使用这个示例项目LinkedIn OAuth 示例客户端](https://github.com/synedra/LinkedIn-OAuth-Sample-Client)作为参考非常成功地完成了所有这些事情，我做了一些修改，一切都运行良好。我也使用来自 [LinnkedIn API](http://developer.linkedin.com/documents/authentication)的详细信息来实现这一点。接下来，**我需要**从同一个应用程序发送邀请以在 LinkedIn 中进行连接。我尝试使用[Invitataion API](http://developer.linkedin.com/documents/invitation-api)。

这是我的代码片段：

```
-(void)sendInvitationToconnectTo:(NSString *)emailAddress withMessage:(NSString *)text

{

    NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/mailbox"];    
    OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:url
                                    consumer:oAuthLoginView.consumer
                                       token:oAuthLoginView.accessToken
                                    callback:nil
                           signatureProvider:[[OAHMAC_SHA1SignatureProvider alloc] init]];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    NSDictionary *temp=[[NSDictionary alloc]initWithObjectsAndKeys:@"/people/email=userName@gmail.com",@"_path",@"userName1",@"first-name",@"userName2",@"last-name", nil];

    NSDictionary *temp2=[[NSDictionary alloc] initWithObjectsAndKeys:temp,@"person",nil];
    NSArray *arr2=[[NSArray alloc]initWithObjects:temp2, nil];
    NSDictionary *value=[[NSDictionary alloc]initWithObjectsAndKeys:arr2,@"values", nil];
    NSDictionary *dict3=[[NSDictionary alloc]initWithObjectsAndKeys:@"friend",@"connect-type",nil];
    NSDictionary *dict4=[[NSDictionary alloc] initWithObjectsAndKeys:dict3,@"invitation-request", nil];

    NSDictionary *dict=[[NSDictionary alloc]initWithObjectsAndKeys:dict4,@"item-content",@"Say yes!",@"body",@"Invitation to connect.",@"subject",value,@"recipients", nil];

    NSString *updateString = [dict JSONString];
    NSLog(@"updateString : %@",updateString);

    [request setHTTPBodyWithString:updateString];
    [request setHTTPMethod:@"POST"];
    OADataFetcher *fetcher = [[OADataFetcher alloc] init];
    [fetcher fetchDataWithRequest:request
                         delegate:self
                didFinishSelector:@selector(sendRequestApiCallResult:didFinish:)
                  didFailSelector:@selector(sendRequestApiCallResult:didFail:)];
    [request release];
}

- (void)sendRequestApiCallResult:(OAServiceTicket *)ticket didFinish:(NSData *)data

{
    NSLog(@"invitation sent");
    [self networkApiCall];
}

- (void)sendRequestApiCallResult:(OAServiceTicket *)ticket didFail:(NSData *)error

{
    NSLog(@"%@",[error description]);
} 
```

我的 json 字符串如下所示：

> {"body":"说是！","subject":"连接邀请。","re​​cipients":{"values":[{"person":{"first-name":"userName1","last -name":"userName2","_path":"/people/email=userName@gmail.com"}}]},"item-content":{"invitation-request":{"connect-type":"朋友”}}}

在发送邀请时**，我没有收到任何错误**，并且在调试时，该`sendRequestApiCallResult:(OAServiceTicket *)ticket didFinish:(NSData *)data`方法被调用，显示*邀请发送*的文本。但是这个问题是**目标LinkedIn用户没有收到任何请求！**

任何人都可以帮我解决这个问题吗？我的代码中有什么做错了吗？

**注意**我通过下面提到的两个链接来获得解决方案，尝试了解决方案，但徒劳无功。

1.[邀请 API - 被 401（iOS 和 OAuthConsumer）难住 - 已解决 2.linkedin](https://developer.linkedin.com/forum/invitation-api-stumped-401-ios-and-oauthconsumer-solved)
连接[API 给出错误 401 - iphone](https://stackoverflow.com/questions/11452212/linkedin-connect-api-gives-error-401-iphone)

我得到的`NSURLResponse`状态码是 401 ！

**编辑:: 自己解决了。请看下面我的回答。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T06:51:12.450

很高兴地通知大家，经过长达 4 天的持续研究，我解决了这个问题！我从这个[Linkedin 线程得到了解决方案](http://developer.linkedin.com/thread/2856?page=1#comment-23330)

您只需要对代码进行一些更改：

```
NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/mailbox"];

    OAMutableURLRequest *request =
    [[OAMutableURLRequest alloc] initWithURL:url
    consumer:oAuthLoginView.consumer
    token:oAuthLoginView.accessToken
    callback:nil
    signatureProvider:nil];
    [request setHTTPMethod:@"POST"];
    NSString *messageToPerson = @"/people/email=target@gmail.com";
    NSDictionary *person = [[NSDictionary alloc] initWithObjectsAndKeys:[[[NSDictionary alloc] initWithObjectsAndKeys:messageToPerson,@"_path",@"TargetFirstName",@"first-name",@"TargetSecondName",@"last-name",nil] autorelease], @"person",nil]; 
    NSArray *valueArray = [[NSArray alloc] initWithObjects:person,nil];
    NSDictionary *values = [[NSDictionary alloc] initWithObjectsAndKeys:valueArray,@"values", nil];
    NSDictionary *ir = [[NSDictionary alloc] initWithObjectsAndKeys:[[[NSDictionary alloc] initWithObjectsAndKeys:@"friend",@"connect-type",nil] autorelease], @"invitation-request",nil];
    NSDictionary *ic = [[NSDictionary alloc] initWithObjectsAndKeys:ir,@"item-content", nil];
    NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:values,@"recipients",@"Invitation",@"subject",@"ConnectWithMe",@"body", ir, @"item-content", nil];
    [request setValue:@"json" forHTTPHeaderField:@"x-li-format"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    NSLog(@"%@",[update description]);
    NSString *updateString = [update JSONString];

    [request prepare];

    [request setHTTPBodyWithString:updateString];

    OADataFetcher *fetcher = [[OADataFetcher alloc] init];
    [fetcher fetchDataWithRequest:request delegate:self         didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)         didFailSelector:@selector(postUpdateApiCallResult:didFail:) withId:1];

    [request release]; 
```

并且在`oAdata OADataFetcher.m`

```
- (void)fetchDataWithRequest:(OAMutableURLRequest *)aRequest delegate:(id)aDelegate didFinishSelector:(SEL)finishSelector didFailSelector:(SEL)failSelector  withId:(int)idtm     {
     [request release];     
request = [aRequest retain];
     delegate = aDelegate;     
didFinishSelector = finishSelector;
     didFailSelector = failSelector;

//note this change
     if (idtm!=1) {
        [request prepare];     
       }

connection = [[NSURLConnection alloc] initWithRequest:aRequest delegate:self];     
} 
```

试试这个。肯定会工作。希望这将有助于未来的游客。

问候

# wcf - 使用双工通信的 MONO 中的 WCF 异常

> ID：15848464
> 
> 赞同：1
> 
> 时间：2013-04-06T07:58:25.903
> 
> 标签：wcf, mono, nettcpbinding, duplex

当我尝试运行我的项目（使用双工网络 TCP 连接）时，它在 NET 4.0 上运行得非常好，在 MONO 上，我得到了以下异常：

“System.ServiceModel.MonoInternal.DuplexServiceRuntimeChannel”类型的异常对象与 System.Reflection.MonoMethod.Invoke 中的目标类型“System.ServiceModel.IClientChannel”不匹配（System.Object obj，BindingFlags invokeAttr，System.Reflection.Binder binder， System.Object[] 参数，System.Globalization.CultureInfoculture) [0x00078] in /mcc/mono/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:243 at System.Reflection.MethodBase.Invoke (System .Object obj, System.Object[] 参数) [0x00000] in /mcc/mono/mono/mcs/class/corlib/System.Reflection/MethodBase.cs:114 at System.ServiceModel.ClientRealProxy.DoInvoke (IMessage inputMessage) [ 0x0003a] 在 /mcc/mono/mono/mcs/class/System.ServiceModel/System.ServiceModel/ClientRealProxy.cs:100 在 System.ServiceModel.ClientRealProxy。在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke (System.Runtime. /mcc/mono/mono/mcs/class/corlib/System.Runtime.Remoting.Proxies/RealProxy 中的 Remoting.Proxies.RealProxy rp、IMessage 消息、System.Exception& exc、System.Object[]& out_args) [0x0009c]。 CS:193

有谁知道我做错了什么？

# objective-c - Xcode - 当我们使用#import 和@class 声明对象变量时有什么不同？

> ID：15848469
> 
> 赞同：1
> 
> 时间：2013-04-06T07:59:09.163
> 
> 标签：objective-c, xcode, class, import

我正在学习Objective C，我完全是新手^^。

我正在制作一个名为 BookStore 的简单应用程序。我有 2 个类来存储数据：

1.  `Book`：存储与书籍相关的数据，例如（标题，作者，描述...）
2.  `Bookstore`: 存放书籍

我的应用程序将在 MasterViewController 中显示所有书名，当用户触摸任何书名时，DetailViewController 将显示书的详细信息。

这是我用来在 MasterViewController.h 中声明的代码

```
#import <UIKit/UIKit.h>
#import "Bookstore.h" // This is what I tried to change, I import instead of using @class
@class LKDetailViewController;
//@class Bookstore; // <= This is what's exactly my ebook tell me
@interface LKMasterViewController : UITableViewController

@property (strong, nonatomic) LKDetailViewController *detailViewController;
@property (strong, nonatomic) Bookstore *myBookStore;
@end 
```

那么我可以像这样使用#import 而不是@class 来让编译器知道我的书店类吗？我只是想知道哪个是正确的方法？

太感谢了。

# jquery - jQuery中的图像重新定位

> ID：15848477
> 
> 赞同：3
> 
> 时间：2013-04-06T08:00:11.393
> 
> 标签：jquery, html, css, drag-and-drop

我想在拖动时在 div 内设置图像的轴。为此，我正在使用 jquery ui: draggable function。但其行为不符合要求。

```
<div id="photo_container">
<img id="profile_pic" 
src="http://1.bp.blogspot.com/-ERPa9-zC-N8/UIkwNj_4JoI/AAAAAAAAAE4/akX3NIBh_Sw/s1600/cartoon_wallpaper.jpg"/> 
```

> **查看完整代码的 Live 示例**

`<img>`在上面的 html 中，当我尝试拖动并重新定位图像时，div 的高度小于这个值。它跳到起点或终点。

[现场示例](http://jsfiddle.net/dhaliwaljee/U5nCB/9/)

我有谷歌搜索，但我没有找到任何好的答案。请在这里的任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:36:45.053

为`photo_container`选择器位置添加相对，img`profile_pic`将被绝对定位。我认为这个解决方案是你想要的

# android - Android-如何让Notification(RemoteViews)支持EditText？

> ID：15848485
> 
> 赞同：-2
> 
> 时间：2013-04-06T08:01:28.210
> 
> 标签：android, notifications, android-edittext, remoteview

有简单的方法吗？或者我可以通过在 Android SDK 中添加自定义的 EditText 来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:06:07.557

> Android-如何让Notification(RemoteViews)支持EditText？

您必须分叉 Android，对其进行修改以支持您想要的功能，将分叉的操作系统放入 ROM 模块中，然后将其安装在设备上。

# html - 正则表达式 VBA 匹配

> ID：15848486
> 
> 赞同：2
> 
> 时间：2013-04-06T08:01:36.247
> 
> 标签：html, regex, vba, excel, xml-parsing

如何在第二个 msgbox 中获得值 81.16？ [正则表达式仅从字符串中获取数值](https://stackoverflow.com/questions/15847939/regex-get-only-numeric-values-from-string)

```
Sub Tests()
    Const strTest As String = "<td align=""right"">116.83<span class=""up2""></span><br>81.16<span class=""dn2""></span></td>"
    RE6 strTest
End Sub

Function RE6(strData As String) As String
    Dim RE As Object, REMatches As Object

    Set RE = CreateObject("vbscript.regexp")
    With RE
        ' .MultiLine = True
        '.Global = False
        .Pattern = "\b[\d.]+\b"
    End With

    Set REMatches = RE.Execute(strData)
    MsgBox REMatches(0)
    MsgBox REMatches(1)    'getting error here
End Function 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T08:45:05.690

**首先，尽量不要使用 RegEx 来解析任何类型的 xml。尝试使用 xml 解析器或 [XPath](https://en.wikipedia.org/wiki/XPath)**

> **XPath**，即 XML 路径语言，是一种用于从 XML 文档中选择节点的查询语言。此外，XPath 可用于从 XML 文档的内容计算值（例如，字符串、数字或布尔值）。

## 解决你的问题改变

```
'.Global = False 'Matches only first occurrence 
```

进入

```
.Global = True 'Matches all occurrences 
```

## 如何在 VBA 中正确解析 XML：

请注意，我必须关闭您的`<br />`标签才能生效。

```
Private Sub XmlTestSub()
On Error GoTo ErrorHandler

    Dim xml As MSXML2.DOMDocument60
    Dim nodes As MSXML2.IXMLDOMNodeList
    Dim node As MSXML2.IXMLDOMNode

    yourXmlString = "<td align=""right"">116.83<span class=""up2""></span><br />81.16<span class=""dn2""></span></td>"

    Set xml = New MSXML2.DOMDocument60
    If (Not xml.LoadXML(yourXmlString)) Then
        Err.Raise xml.parseError.ErrorCode, "XmlTestSub", xml.parseError.reason
    End If

    Set nodes = xml.SelectNodes("/td/text()") 'XPath Query

    For Each node In nodes
        Debug.Print node.NodeValue
    Next node

Done:
    Exit Sub

ErrorHandler:
    MsgBox Err.Number & " " & Err.Description, vbCritical
    Resume Done

End Sub 
```

# ajax - 通过ajax分页并在同一页面上显示帖子

> ID：15848487
> 
> 赞同：0
> 
> 时间：2013-04-06T08:01:39.583
> 
> 标签：ajax, cakephp, controller, pagination, cakephp-2.0

我是 Cakephp 的新手，我被这件事困住了。我的代码工作正常，但现在我需要对我的代码进行一些修改。当我尝试通过不同的页面对视图进行分页时，它可以工作，但是由于每个页面仅获取 20 个帖子，因此要查看下一个帖子，我会更改页面。现在第 20 个帖子在我的视图中，并且单击使用 ajax 的按钮我想在同一页面上显示下一个 20 个帖子（我不想重定向到页面以查看所有评论）请帮助.. .

这是我为显示不同页面的视图而调用的操作。

```
 public function view($slug) {

    $topic = $this->Topic->getBySlug($slug);
    $user_id = $this->Auth->user('id');
    $post_count = $topic['Topic']['post_count'];

    $this->paginate['Post']['conditions'] = array('Post.topic_id' => $topic['Topic']['id']);

    if ($this->RequestHandler->isRss()) {
        $this->set('posts', $this->paginate('Post'));
        $this->set('topic', $topic);
        return;
    }

    if (!empty($this->request->data['Poll']['option'])) {
        $this->Topic->Poll->vote($topic['Poll']['id'], $this->request->data['Poll']['option'], $user_id);
        $this->Topic->deleteCache(array('Topic::getBySlug', $slug));
        $this->redirect(array('plugin' => 'forum', 'controller' => 'topics', 'action' => 'view', $slug));

    }

    $this->ForumToolbar->markAsRead($topic['Topic']['id']);
    $this->Topic->increaseViews($topic['Topic']['id']);

    $this->ForumToolbar->pageTitle($topic['Topic']['title']);
    $this->set('topic', $topic);
    $this->set('posts', $this->paginate('Post'));

    $this->render('view_new');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:53:06.403

前段时间我也在寻找ajax分页。

经过长时间的搜索，我找到了一个解决方案，我已将其发布在下面提到的链接中。

[Ajax 分页与 cakephp 中的过滤器](https://stackoverflow.com/questions/13429722/ajax-pagination-with-filters-in-cakephp/13639203#13639203)

# java - 如何在java字符串中应用转义字符

> ID：15848488
> 
> 赞同：1
> 
> 时间：2013-04-06T08:01:43.643
> 
> 标签：java, string, escaping, eval

我的问题是我从文件中读取文本在文本文件中有一些类似的文本

```
Base64.valueOf("\030)?8*\"q1;16=\0331:?5/8~:8(6y", 42 - -33)) 
```

我能够使用正则表达式获取文本

```
\030)?8*\"q1;16=\0331:?5/8~:8(6y 
```

但字符串在下面的语句中是相等的

```
regText = "\\030)?8*\\"q1;16=\\0331:?5/8~:8(6y" 
```

但我想要的确切字符串是

```
expectedText = "\030)?8*\"q1;16=\0331:?5/8~:8(6y" 
```

那么如何将 regText 转换为 expectedText

在[这里](https://stackoverflow.com/questions/4290028/java-evaluate-string-from-string)，它几乎达到了我的预期

除了不是将“\030”转为“\030”而是转为“030”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:03:01.330

如果写入文件的程序从一开始就正确写入数据，您的问题就会变得更容易。如果这不可能，请使用 apache commons lang 中的 StringEscapeUtils。

```
System.out.println(StringEscapeUtils.unescapeJava("New line: \\n Tab: \\t")); 
```

该调用手动处理 \n 并将其转换为换行符。它只处理文字。[对于八进制和其他转义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)，您只能靠自己。您总是可以分叉代码并处理八进制数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:09:07.007

通过使用[String#replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)您可以执行以下操作：

```
expectedText = regText.replaceAll("\\\\", "\\"); 
```

这会将字符串中的双反斜杠替换为`regText`您期望的简单反斜杠。

# ruby-on-rails - Koala 的错误 URL 请求

> ID：15848489
> 
> 赞同：0
> 
> 时间：2013-04-06T08:01:49.077
> 
> 标签：ruby-on-rails, facebook-graph-api, koala

我的 Koala for Rails 实现存在问题，导致发送对话框出错，因为 Facebook 认为我的网站 URL 无效。

这是发生的事情：

1) 当我在发送对话框中包含诸如 herokuapp-japanized-tree-URL/restaurants/2 之类的 URL 时，Facebook API 认为它无效。（API 错误 100）

2) 我调试了 URL，当它们被远程访问时确实存在错误，因为 Facebook 的 API 会验证链接的有效性。这仅在远程尝试期间发生，而不是在用户访问该页面时发生。

3）我已经确定了代码中的弱点，它与考拉有关：

```
def set_access_token
        begin
        session['fb_cookie'] ||= Koala::Facebook::OAuth.new.get_user_info_from_cookie(cookies)
        @access_token = session['fb_cookie']["access_token"]
    rescue Koala::Facebook::OAuthTokenRequestError
        session['fb_cookie'] = nil
        set_access_token
    end 
```

问题是 @access_token 保持为零，无论它之前是否存在。我认为这与在服务器上发出远程请求时未设置 cookie 有关 - 所以一切都归零。

这是在 Heroku 日志中说明错误的日志 - 它与我在这句话上方显示的代码中的点相匹配：

```
2013-04-06T07:59:25+00:00 app[web.1]: Processing by SessionController#home as */*
2013-04-06T07:59:25+00:00 app[web.1]: 
2013-04-06T07:59:25+00:00 app[web.1]: NoMethodError (undefined method `[]' for nil:NilClass):
2013-04-06T07:59:25+00:00 app[web.1]:   app/helpers/session_helper.rb:18:in `set_access_token'
2013-04-06T07:59:25+00:00 app[web.1]:   app/helpers/session_helper.rb:58:in `parse_facebook_cookies'
2013-04-06T07:59:25+00:00 app[web.1]:   app/helpers/session_helper.rb:63:in `authenticate'
2013-04-06T07:59:25+00:00 app[web.1]: 
2013-04-06T07:59:25+00:00 app[web.1]: 
2013-04-06T07:59:25+00:00 app[web.1]: Completed 500 Internal Server Error in 0ms
2013-04-06T07:59:25+00:00 heroku[router]: at=info method=GET path=/home host=powerful-woodland-3700.herokuapp.com fwd="173.252.101.112" dyno=web.1 connect=1ms service=15ms status=500 bytes=643 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:49:43.380

这里的关键是，当 FB 远程 ping 我的 URL 时，它不会激活设置 Koala 接入的 cookie 的 Javascript SDK。

我本可以开发一种不同的身份验证方法，但我的第一次尝试失败了，而是在我的控制器中设置了以下行：

```
rescue_from NoMethodError, :with => :redirect_to_signin 
```

我认为这还将捕获诸如过期或损坏的 cookie 以及各种其他不可预见的事件之类的随机错误，并将用户重定向到登录页面。

任何关于上述内容的想法都将非常受欢迎。

# javascript - JS - jQuery / 如何检测按键是否被按下 / POLL 功能

> ID：15848495
> 
> 赞同：1
> 
> 时间：2013-04-06T08:02:08.243
> 
> 标签：javascript, jquery, pong

我正在用 Javascript 制作乒乓球游戏，屏幕周围有一个弹跳的球，你不能让它碰到包装盒的下边框。（弹跳球不是问题，我已经编程了）

这是一个代码，当您按下箭头键时，它应该使**球拍从左向右移动**……但是球拍的作用是从原始位置向左或向右显示很多像素。我的意思是，它不会流畅地移动，它只是向左或向右看起来像 30 或 100 像素。

```
function gameLoop() {

    //**********DETECTS IF LEFT OR RIGHT KEYS ARE PRESSED************

    $(document).keydown(function(e) {
       if(e.keyCode == 37) { //LEFT
            userBoxPosX -= userBoxSpeedX;
       }
       if(e.keyCode == 39) { //RIGHT
            userBoxPosX += userBoxSpeedX;
       }
    });

    //THE USERBOX IS A DIV THAT WE WILL USE AS RAQUET
    userBox.css('left', userBoxPosX + "px");

    setTimeout(gameLoop, 50); //THIS FUNCTION CALLS ITSELF EVERY 50 milliseconds (20FPS)

} 
```

关于如何让它流畅地移动的任何想法？当您按下箭头键时？

如果您需要更多信息或需要我上传项目，请告诉我，以便您可以看到它正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:20:21.717

每 50 毫秒你绑定另一个处理程序，所以几秒钟后你有数百个处理程序绑定到`keydown`事件。因此，当您按下一个键时，处理程序会连续运行数百次。

您应该在游戏循环之外建立一次处理程序。在您的循环中，您需要`setTimeout`在迭代之间将控制权返回给浏览器。在等待超时时，按键将触发处理程序。

我认为这应该是基本结构：

```
var userBoxPosX = 0, userBoxLastPosX = null;

function gameLoop() {

    if (userBoxPosX !== userBoxLastPosX) { // Has racquet been moved?
        //THE USERBOX IS A DIV THAT WE WILL USE AS RAQUET
        userBox.css('left', userBoxPosX + "px");
        userBoxLastPosX = userBoxPosX;
    }

}

setInterval(gameLoop, 50); // Call main loop function every 50 ms (20 FPS)

$(document).keydown(function(e) {
   if(e.keyCode == 37) { //LEFT
        userBoxPosX -= userBoxSpeedX;
   }
   if(e.keyCode == 39) { //RIGHT
        userBoxPosX += userBoxSpeedX;
   }
}); 
```

以下是我认为您可以实现 20 FPS 自动重复的方法：

```
var userBoxDelta = 0;

function gameLoop() {

    if (userBoxDelta != 0) { // is raquet moving?
        //THE USERBOX IS A DIV THAT WE WILL USE AS RAQUET
        userBoxPosX += userBoxDelta;
        userBox.css('left', userBoxPosX + "px");
    }

}

setInterval(gameLoop, 50); // Call main loop function every 50 ms (20 FPS)

$(document).keydown(function(e) {
   if(e.keyCode == 37) { //LEFT
        userBoxDelta = -userBoxSpeedX;
   }
   if(e.keyCode == 39) { //RIGHT
        userBoxDelta = userBoxSpeedX;
   }
});

$(document).keyup(function() {
   userBoxDelta = 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:56:03.887

一个简单的解决方案如下所示：

```
 $(document).keydown(function(e) {
         if(e.keyCode == 37) { //LEFT
            userBoxPosX -= userBoxSpeedX;
            updatePosition();
          }
         if(e.keyCode == 39) { //RIGHT
             userBoxPosX += userBoxSpeedX;
             updatePosition();
          }
      });

function updatePosition() {
    userBox.css('left', userBoxPosX + "px");
}; 
```

# c++ - “cout”没有命名类型错误

> ID：15848497
> 
> 赞同：0
> 
> 时间：2013-04-06T08:02:34.203
> 
> 标签：c++, c++11

我正在尝试纯虚函数。所以我已经相应地编写了代码。但我不会因此而遇到任何问题。我的代码中出现“cout 没有命名类型”错误，即使我也包含了正确的头文件和命名空间。请对此提出您的建议。

```
#include<iostream>
using namespace std;

struct S {
  virtual void foo();
};

void S::foo() {
  // body for the pure virtual function `S::foo`
 cout<<"I am S::foo()" <<endl;
}

struct D : S {
  cout <<"I am inside D::foo()" <<endl;
};

int main() {
  S *ptr;
  D d;
  ptr=&d;
  //ptr->foo();
  d.S::foo(); // another static call to `S::foo`
  cout <<"Inside main().." <<endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:04:36.577

您尝试使用直接代码定义**结构**，但看起来您想要一个围绕代码的**方法：**

```
struct D : S {
  cout <<"I am inside D::foo()" <<endl;
}; 
```

应该是

```
struct D : S {
  virtual void foo() {
    cout <<"I am inside D::foo()" <<endl;
  }
}; 
```

# objective-c - 检查请求是否加载到 UIWebView

> ID：15848498
> 
> 赞同：0
> 
> 时间：2013-04-06T08:02:35.717
> 
> 标签：objective-c, cocoa-touch, uiwebview

我有一个`UIWebview`从服务器加载 URL 的地方。一切运行良好，但页面在 web 视图中加载缓慢。在加载时，我必须显示一个活动指示器。

我已经做好了：

```
 NSURL *urlStr = [NSURL URLWithString:myURLString];

 NSURLRequest *req = [NSURLRequest requestWithURL:urlStr];

[webView loadRequest:req]; 
```

我添加了这样的活动指示器：

```
activityIndicator = [[UIActivityIndicatorView alloc]init];
activityIndicator.activityIndicatorViewStyle=UIActivityIndicatorViewStyleGray;

activityIndicator.frame=CGRectMake(webView.center.x,webView.center.y - 150, 60, 60);
[webView addSubview:activityIndicator]; 
```

我什么时候必须开始和停止动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:07:35.247

为此，您将需要实现[UIWebView Delegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)。

你可以开始它 -

```
- (void)webViewDidStartLoad:(UIWebView *)webView 
```

并且可以完成 -

如果成功——

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

如果失败 -

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:12:29.273

```
-(void)webViewDidStartLoad:(UIWebView *)webView
{

    [activityIndicator startAnimating];
    activityIndicator.hidden = NO;

}

-(void)webViewDidFinishLoad:(UIWebView *)webView
{

    [activityIndicator stopAnimating];
    activityIndicator.hidden = YES;

}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{

    [activityIndicator stopAnimating];
    activityIndicator.hidden = YES;

} 
```

我想这会对你有所帮助。

# django - X-Accel-Redirect 不适用于带有非 ascii 文件名的 python3 和 Django 1.5

> ID：15848499
> 
> 赞同：0
> 
> 时间：2013-04-06T08:02:35.907
> 
> 标签：django, python-3.x, uwsgi

我想用 python 3 尝试 Django。

我用：

*   Nginx
*   来自 Ubuntu repos 的 uWSGI + python 3 插件
*   蟒蛇3.2
*   虚拟环境

当我为 python 2.7 制作它时，我有这个并且它有效：

```
...
fname_ascii = fname.encode('utf-8')
response = HttpResponse()
response['X-Accel-Redirect'] = _convert_file_to_url(fname_ascii) 
```

现在使用 python 3，我将 1 行替换为：

```
response['X-Accel-Redirect'] = bytes(_convert_file_to_url(fname), 'utf-8') 
```

这导致：

```
Sat Apr  6 11:27:30 2013 - !!! uWSGI process 6296 got Segmentation Fault !!!
Sat Apr  6 11:27:30 2013 - *** backtrace of 6296 ***
Sat Apr  6 11:27:30 2013 - /usr/bin/uwsgi(uwsgi_backtrace+0x25) [0x430a55]
Sat Apr  6 11:27:30 2013 - /usr/bin/uwsgi(uwsgi_segfault+0x21) [0x430b31]
Sat Apr  6 11:27:30 2013 - /lib/x86_64-linux-gnu/libc.so.6(+0x364a0) [0x7f2177f544a0]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(PyBytes_AsString+0) [0x7f217417e280]
Sat Apr  6 11:27:30 2013 - /usr/lib/uwsgi/plugins/python32_plugin.so(py_uwsgi_spit+0x45f) [0x7f217455c5ef]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(PyEval_EvalFrameEx+0x6230) [0x7f217405f310]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(PyEval_EvalCodeEx+0x687) [0x7f21741289e7]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(+0x12acff) [0x7f2174128cff]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(PyObject_Call+0x7a) [0x7f217413f8aa]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(+0xac98d) [0x7f21740aa98d]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(PyObject_Call+0x7a) [0x7f217413f8aa]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(+0xc773c) [0x7f21740c573c]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(PyObject_Call+0x7a) [0x7f217413f8aa]
Sat Apr  6 11:27:30 2013 - /usr/lib/libpython3.2mu.so.1.0(PyEval_CallObjectWithKeywords+0x47) [0x7f2174180cb7]
Sat Apr  6 11:27:30 2013 - /usr/lib/uwsgi/plugins/python32_plugin.so(python_call+0x24) [0x7f21745592f4]
Sat Apr  6 11:27:30 2013 - /usr/lib/uwsgi/plugins/python32_plugin.so(uwsgi_request_wsgi+0x119) [0x7f217455b6c9]
Sat Apr  6 11:27:30 2013 - /usr/bin/uwsgi(wsgi_req_recv+0x7f) [0x40dd5f]
Sat Apr  6 11:27:30 2013 - /usr/bin/uwsgi(simple_loop+0x112) [0x42be12]
Sat Apr  6 11:27:30 2013 - /usr/bin/uwsgi(uwsgi_ignition+0x18a) [0x430faa]
Sat Apr  6 11:27:30 2013 - /usr/bin/uwsgi(uwsgi_start+0x2c36) [0x434586]
Sat Apr  6 11:27:30 2013 - /usr/bin/uwsgi(main+0xed4) [0x40d6e4]
Sat Apr  6 11:27:30 2013 - /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f2177f3f76d]
Sat Apr  6 11:27:30 2013 - /usr/bin/uwsgi() [0x40d781]
Sat Apr  6 11:27:30 2013 - *** end of backtrace ***
Sat Apr  6 11:27:30 2013 - DAMN ! worker 2 (pid: 6296) died :( trying respawn ...
Sat Apr  6 11:27:30 2013 - Respawned uWSGI worker 2 (new pid: 6299) 
```

我也试过了：

```
response['X-Accel-Redirect'] = _convert_file_to_url(fname) 
```

但得到：

```
BadHeaderError at /my_url

Header values can't contain newlines (got '=?utf-8?b?...=?=\n =?utf-8....=?=\n =?utf-8?b?...=?=') 
```

uWSGI 设置已更改：

```
[uwsgi]
...
plugins = python32
virtualenv = /pyenvs/p3_general/ 
```

如果有人遇到这个问题 - 写下你知道的。
或者也许它只是一个错误。但它似乎是一个 uwsgi-plugin 的错误。

**更新1：**

我使用 pip 安装了 uwsgi 1.9.5：

```
Starting uWSGI 1.9.5 (64bit) on [Sat Apr  6 16:27:03 2013] 
...
Python version: 3.2.3 (default, Oct 19 2012, 19:55:38)  [GCC 4.7.2] 
```

同样的问题。

**而且我忘了提 - 这仅发生在具有非 ascii 符号的文件名（在我的情况下为俄语）**

**更新 2：**

使用`urllib.parse.quote`uWSGI 可以，但 Nginx 会出错：

*   `failed (36: File name too long)` （轻松修复）
*   `open() "/data/SORT/%D1%84%D1%8B%D0%B2%D0%B0%20%D1%84%D1%8B.ogg" failed (2: No such file or directory)`

所以我认为的问题是 - **uWSGI + python 3**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:27:38.560

我强烈建议您使用 uWSGI 稳定版本（1.4 或 1.9 树）。debian 提供的版本非常旧，并且有各种已知的错误

# jquery - 将动态文本框绑定到 jquery-ui 自动完成

> ID：15848504
> 
> 赞同：0
> 
> 时间：2013-04-06T08:03:48.247
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在动态生成文本框，并使用 ajax 从服务器加载数据。我想使用 jquery-ui 插件实现自动完成，但不知何故它不适用于动态文本框

```
var url = "<?php echo Yii::app()->request->baseUrl; ?>?r=product/getProduct";
    $.get(url,function(model){
    prodList = $.parseJSON(model);
});

msg = '<table><tr><td>Item</td></tr>';
for(var i=1;i<=rows;i++){
    msg = msg + '<tr>';
    msg = msg + '<td><input type="text" class="span5" id="Name_' + i + '" ></td>';
    msg = msg + '</tr>';
    $(  "#Name_" + i ).autocomplete({ source: prodList});
}
msg = msg + '</table>';
$('#form').html(msg); 
```

但是，文本框自动完成功能不起作用。请帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:29:29.480

尝试使用类似的东西：

```
var url = "<?php echo Yii::app()->request->baseUrl; ?>?r=product/getProduct";
$.get(url,function(model){
prodList = $.parseJSON(model);
});

function displayMsg(rows, callback){
msg = '<table><tr><td>Item</td></tr>';
for(var i=1;i<=rows;i++){
msg = msg + '<tr>';
msg = msg + '<td><input type="text" class="span5 autocmp" id="Name_' + i + '" ></td>';
msg = msg + '</tr>';
    }
msg = msg + '</table>';
$('#form').html(msg); 
```

}

```
function setAutocmp(){
$( ".autocmp" ).autocomplete({ source: prodList;});
}

displayMsg(rows, function(){setAutocmp()}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:25:27.557

我才意识到我的愚蠢错误。

```
function AutoComplete(rows)
{
    for(var i=1;i<=rows;i++){
       $( '#Name_' + i ).autocomplete({source: prodList });
    }
} 
```

……………………………………………………………………………………………………………………………………

```
var url = "<?php echo Yii::app()->request->baseUrl; ?>?r=product/getProduct";
    $.get(url,function(model){
    prodList = $.parseJSON(model);
    AutoComplete(rows);
});

msg = '<table><tr><td>Item</td></tr>';
for(var i=1;i<=rows;i++){
    msg = msg + '<tr>';
    msg = msg + '<td><input type="text" class="span5" id="Name_' + i + '" ></td>';
    msg = msg + '</tr>';
}
msg = msg + '</table>';
$('#form').html(msg); 
```

现在它就像一个魅力...... :)

# c# - Web api 方法调用另一个流内容 web api 方法？

> ID：15848509
> 
> 赞同：3
> 
> 时间：2013-04-06T08:04:45.633
> 
> 标签：c#, asp.net-web-api

这是我的情况，我有两个 Web api 服务。第一个有一个处理一些数据的方法，当部分数据准备好时，它会将其推送到流中。

```
public HttpResponseMessage Get( )
        {
            var response = Request.CreateResponse( );
            response.Content = new PushStreamContent( WriteToStream );
            return response;
        }

        public async void WriteToStream( Stream outputStream, HttpContent content, TransportContext context )
        {
            .......
        } 
```

第二个 web api 在控制器中有一个调用第一个 web api 的方法。它必须从流中读取部分对其进行处理并将 i 放入它自己的流中：

```
public HttpResponseMessage Get( )
        {
            Stream stream = null;

            using( HttpClient httpClient = new HttpClient( ) )
            {
                httpClient.Timeout = TimeSpan.FromMilliseconds( Timeout.Infinite );
                HttpRequestMessage request = new HttpRequestMessage( HttpMethod.Get, "http://localhost/fistWebApi/" );

                var response = httpClient.SendAsync( request, HttpCompletionOption.ResponseContentRead );

                var content = response.Result.Content.ReadAsStreamAsync( );

                stream = content.Result;
            }

            var msg = Request.CreateResponse( );

            msg.Content = new PushStreamContent( WriteToStream );

            return msg;
        }
public async void WriteToStream( Stream outputStream, HttpContent content, TransportContext context )
            {
                .......
            } 
```

问题是我不知道如何同步调用`SendAsync` `ReadAsStreamAsync`。现在它不会等待并且`stream`在尝试使用它时没有正确初始化。我希望第二种方法的代码等到第一种方法将部分数据放入流中。我尝试使用`ContinueWith`，但后来我无法做到。如果有任何问题我会尝试更深入地解释，我知道这是一个有点模糊的解释。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T18:38:54.673

尝试这个...

```
 public HttpResponseMessage Get()
        {

            using (HttpClient httpClient = new HttpClient())
            {
                httpClient.Timeout = TimeSpan.FromMilliseconds(Timeout.Infinite);
                HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, "http://www.google.ca");

                return httpClient.SendAsync(request, HttpCompletionOption.ResponseHeadersRead)
                    .ContinueWith((t) =>
                        {
                            return new HttpResponseMessage()
                                {
                                    Content = t.Result.Content
                                };
                        }).Result;

            }

        } 
```

上面的代码对我有用。这样做的缺点是，因为您使用`HttpCompletionOption.ResponseContentRead`了来自远程服务的整个有效负载，所以在返回客户端之前将对其进行缓冲。

如果改为使用`HttpCompletionOption.ResponseHeadersRead`将`t.Result.Content` 返回网络流。这样，当您的客户端拉取响应流时，它将直接从远程资源流式传输。我假设这就是您当前正在尝试对您返回的 PushStreamContent 执行的操作。

# c# - 如何使用 C# 设置基于 GridView 的 Excel 图表区域范围？

> ID：15848514
> 
> 赞同：2
> 
> 时间：2013-04-06T08:05:10.703
> 
> 标签：c#, asp.net, excel, export-to-excel

我有一个分为两侧的 Excel 表。在左侧，我从 ASP.NET 应用程序中导出数据。右侧是一个图表，配置为根据导出的数据进行填充。

问题是我为工作表中的左侧数据保留了某些行和列。例如，我假设所有报告有 10 列和 31 行。报告的类型可以是每日/每周/每月。对于每日报告，第一列是从 1 到 31 的日期。因此，我将工作表的左侧保留为最多 31 行和 10 列。

数据已从我的应用程序正确导出到此工作表区域，并且还填充了图表。但问题是导出的数据可能只有 5 行 3 列，但由于图表区域配置为 31 行 10 列，可见图表条的宽度非常细。

有没有办法基于 GridView 行和列以编程方式控制图表区域？

在我的应用程序中，我首先在 GridView 上显示结果。当用户单击导出按钮时，此 GridView 数据将导出到 Excel 工作表的左侧保留区域。

如何以编程方式从当前 Excel 工作表的 C# 代码设置图表区域的范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:44:00.587

我相信有两种方法可以解决您的问题

1.）第一个是**动态绘制图表**。也就是说，当您获得数据集时，您可以在运行时创建图表并分配作为图表数据源的数据范围

一个简单的例子如下

```
Excel.Application XlApp = null;
Excel.Workbook workbook = null;
Excel.Worksheet Ws = null;
Excel.Range Range1 = null;
Excel.RangeDataRange = null;

XlApp = new Excel.Application();
XlApp.Visible = true;
workbook = XlApp.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);
Ws = (Excel.Worksheet)workbook.Worksheets[1];//Lets say you have your graph at 1 sheet
XlApp.WindowState = XlWindowState.xlMaximized;

Ws.Cells.Clear();//Clear your sheet of any existing data

ChartObjs = null;
ChartObj = null;
xlChart = null;
Range1 = Ws.get_Range(Ws.Cells[39, 6], Ws.Cells[48, 10]);
ChartObjects WsChartObjs = (ChartObjects)Ws.ChartObjects(Type.Missing);
ChartObj = WsChartObjs.Add((double)Range1.Left + 115, (double)Range1.Top - 1,  (double)Range1.Width - 25, (double)Range1.Height + 5);
xlChart = ChartObj.Chart;

DataRange = null;

 if (MyDataset.Tables[0].Rows.Count > 10)
 {
   DataRange = Ws.get_Range(Ws.Cells[12, 14], Ws.Cells[12 + 

   MyDataset.Tables[0].Rows.Count, 15]);//or whatever your range may be
 }

  xlChart.SetSourceData(DataRange, System.Type.Missing);
  xlChart.ChartType = XlChartType.xlBarClustered;
  xlChart.ChartArea.Fill.Visible =            
  Microsoft.Office.Core.MsoTriState.msoFalse;
  xlChart.ChartArea.Border.Color = 
  System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.FromArgb(255, 255, 255));
  xlChart.PlotArea.Interior.Color =  
  System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.FromArgb(255, 255, 255));
  xlChart.PlotArea.Border.Color = System.Drawing.ColorTranslator.ToOle(255, 255, 255)); 
```

这是第一个方法

2.) 第二种方法是在 excel 中**选择现有图表并更改其数据源**

简单的例子是

```
Excel.ChartObject MyChartObject = (Excel.ChartObject)Ws.ChartObjects(1);//You can run 
//macro and get your chart number and pass that instead of "1"
MyChartObject .Activate();

xlChart = MyChartObject .Chart;
xlChart.SetSourceData(DataRange, System.Type.Missing); 
```

我想这就是全部

希望这可以帮助

# c++ - 将二维数组传递给C++中的函数

> ID：15848515
> 
> 赞同：0
> 
> 时间：2013-04-06T08:05:20.720
> 
> 标签：c++, multidimensional-array

如何将二维数组传递给函数我已经创建了一个并想定义初始化这个数组的函数。

```
#include <iostream>

using namespace std;
int n = 5;**strong text**
void wypelnijTabliceBooli(bool** b){
      for(int i = 0; i < n; i++){
        for(int j = 0; j < n; j++)
            b[i][j] = 0;
    }
}
int main(){
    bool b[n][n];
    wypelnijTabliceBooli(b);
    return 0;
} 
```

我明白了

```
error: cannot convert 'bool (*)[(((unsigned int)(((int)n) + -0x000000001)) + 1)][(((unsigned int)(((int)n) + -0x000000001)) + 1)]' to 'bool**' for argument '1' to 'void wypelnijTabliceBooli(bool**)'| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:11:57.417

数组不是指针。当传递给函数时，只有数组的“第一”（主要）维度可以**衰减为指针。**否则，如果您有一个多维数组，则必须在函数参数列表中相应地声明它：

```
void funcTaking2DArray(int (*arr)[5])
{
    // do stuff
}

int array[10][5];
funcTaking2DArray(array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:12:18.933

使用尺寸：

```
void wypelnijTabliceBooli(bool b[n][n]) 
```

您可以将它作为指向数组的指针传递，但除了“最外层”维度之外的所有维度都需要知道：

```
void wypelnijTabliceBooli(bool (* b)[n]) 
```

编辑：我接受这需要 GNU 或其他具有高于 C++ 标准的扩展的编译器。另一种方法是创建`n`一个 const 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:18:37.007

似乎您希望数组的大小灵活。您可以将 b 声明为：

```
bool** b = new bool*[n]
for (i=0; i<n; i++)
    b[i] = new bool[n] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T08:19:09.140

只要我知道您何时使用：

```
void wypelnijTabliceBooli(bool** b){
  for(int i = 0; i < n; i++){
    for(int j = 0; j < n; j++)
        b[i][j] = 0;
}
} 
```

您不能使用索引来处理 bool 二维数组。发生这种情况是因为二维数组存储在连续的内存位置，如果您不提供至少一个数组维度，则无法知道何时知道给定“行结束”的时间。示例：假设您有一个 bool 数组：

```
bool myArray[2][3]={{true,true,false},{false,false,true}}; 
```

在内存中，这将是这样的（其中 [] 表示内存块）：

[真][真][假][假][假][真]

现在只传递一个指向它的指针，你就无法知道这是array[3][2]还是array[2][3]。

这可以通过将数组的一维以外的所有维度传递给函数来解决，如下所示：

```
void wypelnijTabliceBool(bool b[][3] ){
  for(int i = 0; i < n; i++){
    for(int j = 0; j < n; j++)
        b[i][j] = 0;
}
} 
```

（如果您的第二维是 3）。

# android - 在android中处理屏幕方向

> ID：15848519
> 
> 赞同：0
> 
> 时间：2013-04-06T08:05:45.697
> 
> 标签：android, screen-orientation

这个应用程序需要纵向和横向。在这里，我在资源文件夹中为横向创建“layout-land”文件夹。当我进行定向活动时，正在从“layout-land”获取 XML，但活动正在重新启动。

因此，为了避免重新启动，在清单中我使用以下权限：

```
<android:configChanges="keyboardHidden|orientation|screenSize"> 
```

虽然我使用上述权限活动没有重新启动，但它无法从“layout-land”文件夹中获取 XML。

这里我需要：
1\. 避免重新启动活动
2\. 制作活动以从“layout-land”文件夹中获取 XML。我是android的新手。请在这方面帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:12:40.717

这就是安卓的工作方式。您需要选择以下三个选项之一：

1.  纵向和横向使用完全相同的布局；然后，您可以`configChanges`像上面一样使用。即使您确实进行了一些小的更改，如果您可以保持大部分布局相同并且仅根据方向使一些项目可见/不可见，这也可以工作。

2.  使用不同的布局；然后，您可以保留`configChanges`，但您必须自己实现新布局的加载`onConfigurationChanged`，包括从旧视图中获取所有值并将它们添加到新视图中（在运行时设置的任何内容：文本值，用户输入的编辑文本，复选框状态等）。

3.  `configChange`从清单中删除该行，并实施`onSaveInstanceState`and `onRestoreInstanceState`。这两个将使您有机会保存所需的任何值并在重新启动活动时恢复它们。基本上和两个一样，但你不必手动重置视图。

如果可能的话，我强烈建议 1。如果您必须使用特定于景观的布局，则使用路线 3 是最简单的。我通常是设置 configChanges 的忠实拥护者，但如果您需要完全不同的横向布局，它就不能很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:20:56.860

尝试使用以下内容。

```
 <uses-sdk android:targetSdkVersion="15"/> 
```

```
<activity android:configChanges="orientation|screenSize|keyboardHidden" /> 
```

在运行 Android 4.0.4 的 Galaxy Nexus 上切换方向时，我的活动没有重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:26:48.873

在你的 android 清单中使用这个

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

如果你想要未指定

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED); 
```

# iphone - iOS objc-class-ref 错误：体系结构 i386 的未定义符号

> ID：15848520
> 
> 赞同：0
> 
> 时间：2013-04-06T08:05:53.600
> 
> 标签：iphone, ios, objective-c, ios5

错误在哪里？

> 架构 i386 的未定义符号：
> “_OBJC_CLASS_$_GPPSignIn”

截屏：
![在此处输入图像描述](https://i.stack.imgur.com/dQZ3e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:12:22.303

首先告诉我您是否必须将任何内容`framework`作为复制粘贴？在大多数情况下，都会产生此类问题。

通常，当您的类`.m`文件未存储/放入时会发生这种类型的错误`Compile Sources`

在这种情况下，您需要手动将此`.m`文件添加到`Compile Sources`

**以下步骤描述如何手动放入`.m`文件`Compile Sources`**

```
Select Project Form Project Manager
  |
  | 
  Targets
       |
       |
     Build Phases
          |
          |
        Compile Sources
                |
                |
        Click on '+' button and add .m file in it 
```

这是如何将文件手动放入`Compile Sources`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:12:01.707

看起来您正在尝试使用尚未实际链接到目标的库。

确保在目标摘要选项卡的“链接的框架和库”下拥有所有正在使用的库和框架，或者确保可以在标题和库搜索路径中找到静态库。

# java - 使用 java 和 derby 服务器的服务器客户端应用程序

> ID：15848522
> 
> 赞同：0
> 
> 时间：2013-04-06T08:06:13.517
> 
> 标签：java, derby

我想为有多个客户端访问中央数据库的封闭网络（无互联网）创建一个应用程序我正在使用 java 和 derby 服务器我的问题是我应该让客户端直接访问数据库还是我应该创建一个连接客户端的服务器应用程序到数据库？如果是这样，客户端和服务器之间的连接将是套接字连接和 TCP 吗？我已经搜索过，但所有示例都是聊天应用程序没有数据传输添加数据和删除任何人都可以建议任何示例或教程或如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:16:20.083

是的，您可以将数据库中的数据公开为[Web 数据服务](http://en.wikipedia.org/wiki/Web_data_services)。有一些[框架专门通过](http://www.emergentone.com/)[SOA](http://en.wikipedia.org/wiki/Service-oriented_architecture) / [ROA](http://en.wikipedia.org/wiki/Resource-oriented_architecture)向外界公开数据。这是一个众所周知的模式。这些产品通常会根据您的数据生成代码并自动公开它们。您也可以轻松编写自己的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:42:41.247

如果您想让多个客户端同时访问一个 Derby 数据库，那么您必须采用某种服务器体系结构，因为一次只有一个嵌入式 Derby 应用程序可以访问一个数据库。

但是，Derby 带有自己的服务器，因此您不必自己编写：

```
[http://db.apache.org/derby/docs/10.9/adminguide/cadminov825266.html][1] 
```

Derby 网络客户端和 Derby 网络服务器之间的连接是 TCP 和套接字连接，但只要各种机器与服务器具有 TCP 连接，这在封闭的网络上就可以正常工作。

您可以在此处找到 Derby 教程：

```
[http://db.apache.org/derby/docs/10.9/getstart/cgstutorialintro.html][2] 
```

# delphi - 自定义组件如何处理其子组件的事件？

> ID：15848524
> 
> 赞同：4
> 
> 时间：2013-04-06T08:07:07.923
> 
> 标签：delphi, events, custom-controls

我正在设计一个面板后代组件，上面有一个按钮控件：

```
THidePanel = class(TPanel)
private
  TActivateButton: TButton;
public
  constructor Create(aOwner: TComponent); override;
  procedure WMSize(var Msg: TWMSize); message WM_SIZE;
  procedure HideComponents;
end; 
```

该组件如何处理其 TActivateButton 控件的 OnClick 事件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T08:30:22.330

由于按钮是组件私有的，您只需将事件处理程序附加到它，即

```
THidePanel = class(TPanel)
  ...
  private
    procedure H_ActivateButtonClick(Sender: TObject);
  ...
end;

constructor THidePanel.Create(aOwner: TComponent);
begin
  inherited;
  ...
  FActivateButton := TButton.Create(Self);
  FActivateButton.Parent := Self;
  FActivateButton.OnClick:= H_ActivateButtonClick;
end

procedure THidePanel.H_ActivateButtonClick(Sender: TObject)
begin
  // button is clicked!
end 
```

如果您还需要向组件的最终用户提供事件，那么您需要添加一个`TNotifyEvent`属性并从您的内部处理程序中调用它，即

```
THidePanel = class(TPanel)
  private
    FOnActivateBtnClick: TNotifyEvent;
  ...
  published
    property OnActivateButtonClick: TNotifyEvent read FOnActivateBtnClick write FOnActivateBtnClick;
end;

procedure THidePanel.H_ActivateButtonClick(Sender: TObject)
begin
  // button is clicked!
  ...
  // fire the end user event
  if(Assigned(FOnActivateBtnClick))then FOnActivateBtnClick(Self);
end 
```

# android - 无法识别布局元素

> ID：15848533
> 
> 赞同：-1
> 
> 时间：2013-04-06T08:08:55.310
> 
> 标签：android, listview, layout, listadapter

我正在使用以下代码显示数据库中的列表视图；但是，似乎某些布局元素无法识别..有人能告诉我为什么吗？这是 Logcat 消息：您的内容必须有一个 id 属性为 android.R.id 的列表视图。

PS：任何帮助将不胜感激！// 下面是xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>

</LinearLayout> 
```

// 下面是代码

```
package com.example.androidhive;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class AllProductsActivity extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> productsList;

    // url to get all products list
    private static String url_all_products = "http://10.6.13.15/android_connect/get_all_products.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_PID= "name";
    private static final String TAG_CATEGORY = "category";
    private static final String TAG_CALORY = "calory";
    /*private static final String TAG_UNIT = "unit";
    private static final String TAG_CALORY = "calory";
    private static final String TAG_CARBOHYDRATE = "carbohydrate";
    private static final String TAG_CATEGORY = "category";*/
    // the array was defined in PHP file
    private static final String TAG_PRODUCT = "product";
    // TO CONFIRM THE HASH INTO ARRAY
    private ArrayAdapter<mItems> listAdapter;
    private mItems[] itemss;
    private ListView mainListView;
    ArrayList<mItems> planetList = new ArrayList<mItems>();
    // products JSONArray
    JSONArray products = null;
    ArrayList<String> checked = new ArrayList<String>();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_products);

        mainListView = (ListView)findViewById(R.id.list);
        // Hashmap for ListView
        productsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllProducts().execute();

        // Get listview
        ListView lv = getListView();

        // on seleting single product
        // launching Edit Product Screen
        mainListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                    mItems planet = listAdapter.getItem(position);
                    planet.toggleChecked();
                    SelectViewHolder viewHolder = (SelectViewHolder) view
                            .getTag();
                    viewHolder.getCheckBox().setChecked(planet.isChecked());
                    Toast.makeText(getApplicationContext(), "msg msg", Toast.LENGTH_SHORT).show();

                //*********** OUR CODE****************
                // getting values from selected ListItem
                /*String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                        .toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        EditProductActivity.class);
                // sending pid to next activity
                in.putExtra(TAG_PID, pid);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);*/
                //*********** OUR CODE****************
            }
        });
        listAdapter = new SelectArralAdapter(this, planetList);
        mainListView.setAdapter(listAdapter);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        menu.add(0, 1, Menu.NONE, "Products");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub

        switch (item.getItemId()) {
        case 1:

            for (int i = 0; i < checked.size(); i++) {
                Log.d("pos : ", "" + checked.get(i));
            }
            break;
        }
        return super.onOptionsItemSelected(item);
    }

    // Response from Edit Product Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received 
            // means user edited/deleted product
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
            Log.d("NUN complete","tyt");
        }

    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllProductsActivity.this);
            pDialog.setMessage("Loading items. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    itemss = (mItems[]) getLastNonConfigurationInstance();
                    int ii=0;
                    while( ii < products.length()){
                        JSONObject c = products.getJSONObject(ii);
                        String category = c.getString(TAG_CATEGORY );
                        //Double dd =c.getDouble(TAG_CALORY);
                        String dd = c.getString(TAG_CALORY );
                        //itemss[ii]= dd;
                        planetList.add(new mItems(dd));

                        ii++;
                       // Log.d("d ", TextUtils.join(",", d));  

                    }

                    // products found
                    // Getting Array of Products
                    Log.d("All Products: ", json.toString());
                    products = json.getJSONArray(TAG_PRODUCT);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID); // also name
                        String category = c.getString(TAG_CATEGORY );
                        // NO NEED FOR THEM !!
                        /*
                        String unit = c.getString(TAG_UNIT );
                        String category = c.getString(TAG_CATEGORY );
                        String calory = c.getString(TAG_CALORY );
                        String carbohydrate = c.getString(TAG_CARBOHYDRATE ); */

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_CATEGORY, category);
                        //map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        productsList.add(map);
                        Log.d("All Products: ", json.toString());
                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        /*
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * 
                    ListAdapter adapter = new SimpleAdapter(
                            AllProductsActivity.this, productsList,
                            R.layout.list_item, new String[] { TAG_PID,
                                    TAG_CATEGORY},
                            new int[] { R.id.pid, R.id.category});
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        } 
        */

    }
    private static class mItems {
        private String name = "";
        private boolean checked = false;
        private double calory = 0.0;
        public mItems() {
        }

        public mItems(String name) {
            this.name = name;
        }

        public mItems(String name, boolean checked) {
            this.name = name;
            this.checked = checked;
        }

        public String getName() {
            return name;
        }

        public double getCalroy() {
            return calory;
        }
        public void setName(String name) {
            this.name = name;
        }

        public boolean isChecked() {
            return checked;
        }

        public void setChecked(boolean checked) {
            this.checked = checked;
        }

        public String toString() {
            return name;
        }

        public void toggleChecked() {
            checked = !checked;
        }
    }
    // New class
    private static class SelectViewHolder {
        private CheckBox checkBox;
        private TextView textView;

        public SelectViewHolder() {
        }

        public SelectViewHolder(TextView textView, CheckBox checkBox) {
            this.checkBox = checkBox;
            this.textView = textView;
        }

        public CheckBox getCheckBox() {
            return checkBox;
        }

        public void setCheckBox(CheckBox checkBox) {
            this.checkBox = checkBox;
        }

        public TextView getTextView() {
            return textView;
        }

        public void setTextView(TextView textView) {
            this.textView = textView;
        }
    }
    // New class
    private static class SelectArralAdapter extends ArrayAdapter<mItems> {
        private LayoutInflater inflater;

        public SelectArralAdapter(Context context, List<mItems> planetList) {
            super(context, R.layout.list_item, R.id.rowTextView, planetList);
            // Cache the LayoutInflate to avoid asking for a new one each time.
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // Planet to display
            mItems planet = (mItems) this.getItem(position);

            // The child views in each row.
            CheckBox checkBox;
            TextView textView;
            TextView here;
            // Create a new row view
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.list_item, null);

                // Find the child views.
                textView = (TextView) convertView
                        .findViewById(R.id.rowTextView);
                checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);

                // Optimization: Tag the row with it's child views, so we don't
                // have to
                // call findViewById() later when we reuse the row.
                convertView.setTag(new SelectViewHolder(textView, checkBox));
                // If CheckBox is toggled, update the planet it is tagged with.
                checkBox.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        CheckBox cb = (CheckBox) v;
                        mItems planet = (mItems) cb.getTag();
                        planet.setChecked(cb.isChecked());
                    }
                });
            }
            // Reuse existing row view
            else {
                // Because we use a ViewHolder, we avoid having to call
                // findViewById().
                SelectViewHolder viewHolder = (SelectViewHolder) convertView
                        .getTag();
                checkBox = viewHolder.getCheckBox();
                textView = viewHolder.getTextView();
            }

            // Tag the CheckBox with the Planet it is displaying, so that we can
            // access the planet in onClick() when the CheckBox is toggled.
            checkBox.setTag(planet);
            // Display planet data
            checkBox.setChecked(planet.isChecked());
            textView.setText(planet.getName());

            return convertView;
        }
    }
    public Object onRetainNonConfigurationInstance() {
        return itemss;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:10:59.467

您正在使用 ListActivity 而不是普通的 Activity，您的视图应该有一个 default `android:id/list:`。
将 xml 中的列表视图更改为

```
<ListView
   android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</ListView> 
```

查看此[ListActivity 教程](http://developer.android.com/reference/android/app/ListActivity.html)以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:12:50.187

成立于

`mainListView = (ListView)findViewById(R.id.list);`

利用

```
 mainListView = getListView() 
```

# php - 通过链接使用 jquery ajax 更新 PHP/Mysql 表

> ID：15848535
> 
> 赞同：-1
> 
> 时间：2013-04-06T08:08:58.123
> 
> 标签：php, jquery, mysql, ajax, href

```
<li>
    <a tabindex="-1" class ="accept" id="accept" 
        href="accept.php?claimid=<?php echo$row['claimid']?>">
            Accept
    </a>
</li> 
```

## 动作.php

```
<?php
    if(isset($_POST['username'])) {
        $action = addslashes($_POST['action']); 
    }
    $sql = "UPDATE claim set 
        username='".$_SESSION['username']."',
        action='accept' 
        where  claimid=".$_GET['claimid']."";
    $result=mysql_query($sql) OR die(mysql_error());
?> 
```

在页面上我有接受和拒绝之类的操作想要在这里接受而不重新加载页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:13:51.580

与其使用锚标记，不如尝试使用 a`<div>`并向其添加一个触发 AJAX 事件的点击事件。

**HTML**

```
<li><div id="accept">Accept</div></li> 
```

**Javascript**

```
$('#accept').click(function() {
  $.ajax({
    url: "accept.php?claimid=<?php echo$row['claimid']?>",
    // ...
    // ...
  });
}); 
```

[`.ajax()`](http://api.jquery.com/jQuery.ajax/)有关可以传递给函数的更多信息，请参阅 jQuery文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:16:40.650

```
$('#accept').click(function() {
                $.GET("/accept.php", { 'claimid': "<?php echo $row['claimid']?>",'username': "<?php echo $_SESSION['username']?>" },
                function(response) {
                    data = response;
                    alert(data)
                });
}) 
```

您可以在操作文件中回显某些内容，以便您在警报中获得输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:17:18.117

试试这个：

```
<div class="accept" data-claim="<?php echo $row['claimid']; ?>">
    Accept
</div> 
```

## jQuery

```
$('div.accept').on('click', function (e) {
    e.preventDefault();
    var MyUrl = 'accept.php';
    $.ajax({
        data: {
            claimid: $(this).data('claim')
        },
        url: MyUrl,
        type: "get",
        success: function (data) {
            alert( "Task complete" );
        }
    });
}); 
```

* * *

```
<div class="accept" data-claim="<?php echo $row['claimid']; ?>" style="cursor: pointer; color: blue; text-decoration: underline;">
    Accept
</div> 
```

# java - 使用父子逻辑获取数组元素

> ID：15848537
> 
> 赞同：-3
> 
> 时间：2013-04-06T08:09:05.530
> 
> 标签：java

我有两个像这样命名为父子的数组

```
Child [] = {1,5,6,7} 
```

和

```
Parent [] = {2,1,5,8} 
```

当我输入父元素时，它应该给子元素。以同样的方式它应该给孩子的孩子元素。

例如：

1.  如果我给出 2 作为输入。那么输出将是 1,5,6

2.  如果我给出 1 作为输入。那么输出将是 5,6

3.  如果我给出 5 作为输入。那么输出将是 6

4.  如果我给出 8 作为输入。那么输出将是 7

我试过它给出一个连续循环。

```
//final code
package parentchild;

import java.util.Scanner;

public class ParentChild {
    static int [] child = {1,5,6,7};
    static int [] parent = {2,1,5,8};

    public static void main(String[] args)
    {
        System.out.println("enter:");
        Scanner sc = new Scanner(System.in);
        int x = sc.nextInt();

        int len = parent.length-1;

        while(x!= parent[len])
        {
          for(int i=0;i<=3;i++)
          {
              if(x==parent[i])
              {
                 System.out.println(child[i]);
              }

              x = child[i];
          }   
          return;
    }

       while(x== parent[len])
       {
           System.out.println(child[len]);
           return;
       }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:52:56.120

你的算法似乎有效，但它有点复杂并且有更多的迭代，因为你在这里解决了它是一个改进的代码：

```
public static void main(String[] args) {
        System.out.println("enter:");
        Scanner sc = new Scanner(System.in);
        int x = sc.nextInt();

        while (true) {
            boolean found = false;
            for (int i = 0; i <= 3; i++) {
                if (x == parent[i]) {
                                    x = child[i];
                    System.out.println(child[i]);
                                    //indicate that found  a parent 
                    found = true;
                    break;
                }
            }
            // stop the program, if no parent was found
            if (!found) {
                return;
            }
        }
    } 
```

# php - PHP snmp 使用一个连接

> ID：15848542
> 
> 赞同：0
> 
> 时间：2013-04-06T08:10:30.153
> 
> 标签：php, snmp

有没有办法建立一个连接并使用它？

现在我有这个：

```
snmp2_get("ip", "public", ".1.3.6.1.2.1.1.5.0");
snmp2_get("ip", "public", ".1.3.6.1.2.1.1.6.0"); 
```

是否有任何功能可以建立一个连接并使用它，或者我如何放置多个 OID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T04:28:34.923

SNMP over UDP 是默认设置，一开始是无*连接*的。PHP 函数不提供生成可重复使用的“句柄”的方法；通常，如果您需要此功能，您将创建自己的包装器。

但是请注意，PHP 5.4 引入了“SNMP”*类*（请参阅[此处的文档](http://www.php.net/manual/en/class.snmp.php "SNMP 类")），它可以让您完全按照自己的意愿行事。

例如：

```
$session = new SNMP( SNMP::VERSION_2C, "127.0.0.1", "public" );
$value1 = $session->get( ".1.3.6.1.2.1.1.5.0" );
$value2 = $session->get( ".1.3.6.1.2.1.1.6.0" ); 
```

# android - 在我的情况下，如何在可扩展列表视图中获取视图不显示可扩展列表，它显示为空白

> ID：15848544
> 
> 赞同：4
> 
> 时间：2013-04-06T08:10:41.997
> 
> 标签：android, expandablelistview

我正在开发可扩展列表视图，但我无法获得可扩展列表视图，请帮助我解决代码中的错误，谢谢

**CodeMainActicity.java**

```
 public class CodeMainActicity extends Activity {
    private ExpandListAdapter ExpAdapter;
    private ArrayList<ExpandListGroup> ExpListItems;
    private ExpandableListView ExpandList;
    public String[] groups = null;
    public String[][] headers = null;
    DisplayMetrics metrics;
    int width;

    public int GetDipsFromPixel(float paramFloat) {
        return (int) (0.5F + paramFloat
                * getResources().getDisplayMetrics().density);
    }

    public ArrayList<ExpandListGroup> SetStandardGroups() {
        ArrayList<ExpandListGroup> localArrayList1 = new ArrayList<ExpandListGroup>();
        int i = 0;
        if (i >= groups.length) {
            return localArrayList1;
        }
        ExpandListGroup localExpandListGroup = new ExpandListGroup();
        localExpandListGroup.setName(groups[i]);
        ArrayList<ExpandListChild> localArrayList2 = new ArrayList<ExpandListChild>();
        for (int j = 0; j < 10; j++) {
            while (headers[i][j] == null) {
                localExpandListGroup.setItems(localArrayList2);
                localArrayList1.add(localExpandListGroup);
                i++;
                break;
            }
            ExpandListChild localExpandListChild = new ExpandListChild();
            localExpandListChild.setName(headers[i][j]);
            localExpandListChild.setTag(null);
            localArrayList2.add(localExpandListChild);

        }
        return localArrayList1;

    }

    public void onCreate(Bundle paramBundle) {
        groups = new String[11];
        headers = ((String[][]) Array.newInstance(String.class, new int[] { 14,
                10 }));
        groups[0] = "Data Types";
        groups[1] = "Date Time";
        groups[2] = "Regular Expressions";
        groups[3] = "Class";
        groups[4] = "Collections";
        groups[5] = "Generics";
        groups[6] = "Reflection";
        groups[7] = "Security";
        groups[8] = "Design Patterns";
        groups[9] = "Thread";
        groups[10] = "File Stream";
        headers[0][0] = "Boxing and Unboxing";
        headers[0][1] = "Complex Type";
        headers[0][2] = "Enum";
        headers[0][3] = "Tuple type";
        headers[0][4] = "Hex to Int";
        headers[0][5] = "Nullable Integer";
        headers[0][6] = "Custom ToString()";
        headers[0][7] = "Checked() and Unchecked()";
        headers[0][8] = "Overflow";
        headers[0][9] = "Char  methods";
        headers[1][0] = "Get between Days";
        headers[1][1] = "Add one week to current date";
        headers[1][2] = "DateTime Compare";
        headers[2][0] = "Email Validation";
        headers[2][1] = "URL validation";
        headers[2][2] = "Zipcode validation";
        headers[3][0] = "Access modifiers";
        headers[3][1] = "Inheritance";
        headers[3][2] = "Interface";
        headers[3][3] = "Method Overloading";
        headers[3][4] = "Overriding";
        headers[3][5] = "Abstract class";
        headers[4][0] = "Array List";
        headers[4][1] = "Hash Table";
        headers[4][2] = "Dictionary";
        headers[5][0] = "Simple Generic hierarchy";
        headers[5][1] = "Generic IEnumerable";
        headers[5][2] = "Generic Collection class";
        headers[6][0] = "AppDomain Setup";
        headers[6][1] = "Type.GetMethods";
        headers[6][2] = "Assembly Version Information";
        headers[7][0] = "MD5 encode";
        headers[7][1] = "File Checksum";
        headers[7][2] = "Password Encryption";
        headers[8][0] = "Facade Pattern";
        headers[8][1] = "Factory Pattern";
        headers[8][2] = "Observer Pattern";
        headers[8][3] = "Singleton Pattern";
        headers[8][4] = "Adapter Pattern";
        headers[9][0] = "Creating Thread";
        headers[9][1] = "Asynchronous Calls";
        headers[9][2] = "Mutex";
        headers[10][0] = "Display File contents";
        headers[10][1] = "Write to a file";
        headers[10][2] = "Append to File";
        super.onCreate(paramBundle);
        requestWindowFeature(1);
        setContentView(R.layout.codemainscreen);
        Button localButton = (Button) findViewById(R.id.btnhome);
        ExpandList = ((ExpandableListView) findViewById(R.id.ExpList));
        ExpListItems = SetStandardGroups();
        ExpAdapter = new ExpandListAdapter(this, ExpListItems);
        metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        width = metrics.widthPixels;
        ExpandList.setIndicatorBounds(width - GetDipsFromPixel(50.0F), width
                - GetDipsFromPixel(10.0F));
        ExpandList.setAdapter(ExpAdapter);
        ExpandList
                .setOnChildClickListener(new ExpandableListView.OnChildClickListener() {
                    public boolean onChildClick(
                            ExpandableListView paramAnonymousExpandableListView,
                            View paramAnonymousView, int paramAnonymousInt1,
                            int paramAnonymousInt2, long paramAnonymousLong) {
                        Bundle localBundle = new Bundle();
                        localBundle.putString("group",
                                Integer.toString(paramAnonymousInt1));
                        localBundle.putString("item",
                                Integer.toString(paramAnonymousInt2));
                        Intent localIntent = new Intent(CodeMainActicity.this
                                .getApplicationContext(),
                                CodeDisplayAcitvity.class);
                        localIntent.putExtras(localBundle);
                        CodeMainActicity.this.startActivity(localIntent);
                        return false;
                    }
                });
        localButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View paramAnonymousView) {
                Intent localIntent = new Intent(CodeMainActicity.this
                        .getApplicationContext(), MainActivity.class);
                CodeMainActicity.this.startActivity(localIntent);
            }
        });
    }
} 
```

**展开列表适配器：**

```
 public class ExpandListAdapter extends BaseExpandableListAdapter {
    private Context context;
    private ArrayList<ExpandListGroup> groups;

    public ExpandListAdapter(Context paramContext,
            ArrayList<ExpandListGroup> paramArrayList) {
        this.context = paramContext;
        this.groups = paramArrayList;
    }

    public void addItem(ExpandListChild paramExpandListChild,
            ExpandListGroup paramExpandListGroup) {
        if (!this.groups.contains(paramExpandListGroup))
            this.groups.add(paramExpandListGroup);
        int i = this.groups.indexOf(paramExpandListGroup);
        ArrayList<ExpandListChild> localArrayList = ((ExpandListGroup) this.groups
                .get(i)).getItems();
        localArrayList.add(paramExpandListChild);
        ((ExpandListGroup) this.groups.get(i)).setItems(localArrayList);
    }

    public Object getChild(int paramInt1, int paramInt2) {
        return ((ExpandListGroup) this.groups.get(paramInt1)).getItems().get(
                paramInt2);
    }

    public long getChildId(int paramInt1, int paramInt2) {
        return paramInt2;
    }

    public View getChildView(int paramInt1, int paramInt2,
            boolean paramBoolean, View paramView, ViewGroup paramViewGroup) {
        ExpandListChild localExpandListChild = (ExpandListChild) getChild(
                paramInt1, paramInt2);
        if (paramView == null)
            paramView = ((LayoutInflater) this.context
                    .getSystemService("layout_inflater")).inflate(
                    R.layout.expandlist_child_item, null);
        TextView localTextView = (TextView) paramView
                .findViewById(R.id.tvChild);
        localTextView.setText(localExpandListChild.getName().toString());
        localTextView.setTag(localExpandListChild.getTag());
        return paramView;
    }

    public int getChildrenCount(int paramInt) {
        return ((ExpandListGroup) this.groups.get(paramInt)).getItems().size();
    }

    public Object getGroup(int paramInt) {
        return this.groups.get(paramInt);
    }

    public int getGroupCount() {
        return this.groups.size();
    }

    public long getGroupId(int paramInt) {
        return paramInt;
    }

    public View getGroupView(int paramInt, boolean paramBoolean,
            View paramView, ViewGroup paramViewGroup) {
        ExpandListGroup localExpandListGroup = (ExpandListGroup) getGroup(paramInt);
        if (paramView == null) {
            paramView = ((LayoutInflater) this.context
                    .getSystemService("layout_inflater")).inflate(
                    R.layout.expandlist_group_item, null);
        }
        ((TextView) paramView.findViewById(R.id.btngo))
                .setText(localExpandListGroup.getName());
        return paramView;
    }

    public boolean hasStableIds() {
        return true;
    }

    public boolean isChildSelectable(int paramInt1, int paramInt2) {
        return true;
    }
} 
```

**展开列表子：**

```
 public class ExpandListChild {
    private String Name;
    private String Tag;

    public String getName() {
        return this.Name;
    }

    public String getTag() {
        return this.Tag;
    }

    public void setName(String paramString) {
        this.Name = paramString;
    }

    public void setTag(String paramString) {
        this.Tag = paramString;
    }
} 
```

**展开列表组：**

```
 public class ExpandListGroup {
    private ArrayList<ExpandListChild> Items;
    private String Name;

    public ArrayList<ExpandListChild> getItems() {
        return this.Items;
    }

    public String getName() {
        return this.Name;
    }

    public void setItems(ArrayList<ExpandListChild> paramArrayList) {
        this.Items = paramArrayList;
    }

    public void setName(String paramString) {
        this.Name = paramString;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T05:24:21.707

SetStandardGroups() - 您只创建一个 ExpandListGroup 实例并将项目添加到该组。您没有将第二组项目添加到结果 ArrayList (localArrayList1)。尝试使用以下代码...

```
public ArrayList<ExpandListGroup> SetStandardGroups() 
{
    ArrayList<ExpandListGroup> resExpList = new ArrayList<ExpandListGroup>();

    if(groups != null && groups.length > 0)
    {
        for(int i=0; i<groups.length; i++)
        {
            ExpandListGroup expListGroup = new ExpandListGroup();
            expListGroup.setName(groups[i]);
            Log.e("ExpList", "Group "+i+" Name="+groups[i]);

            ArrayList<ExpandListChild> expListItems = new ArrayList<ExpandListChild>();
            for(int j=0; j<headers[i].length; j++)
            {
                ExpandListChild item = new ExpandListChild();
                item.setName(headers[i][j]);
                Log.e("ExpList", "Item "+j+" ="+headers[i][j]);

                item.setTag(null);
                expListItems.add(item);
            }
            expListGroup.setItems(expListItems);
            Log.e("ExpList", "Group "+i+" items size="+expListGroup.size());

            resExpList.add(expListGroup);
        }
    }

    Log.e("ExpList", "Total groups size="+resExpList.size());
    return resExpList;
} 
```

# java - 为 Android 下载管理器制作 http/https 文件共享服务器

> ID：15848548
> 
> 赞同：0
> 
> 时间：2013-04-06T08:11:40.833
> 
> 标签：java, android, file-upload

我**在 Android**端使用下载管理器从不同来源下载文件。现在我应该为这个应用程序创建一个**服务器端**。

首先这里是Android端的简单代码：

```
private DownloadManager mgr = null;
private long lastDownload = -1L;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mgr = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
    registerReceiver(onComplete, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));
    registerReceiver(onNotificationClick, new IntentFilter(DownloadManager.ACTION_NOTIFICATION_CLICKED));
}

@Override
public void onDestroy() {
    super.onDestroy();

    unregisterReceiver(onComplete);
    unregisterReceiver(onNotificationClick);

}

public void startDownload(View v) {
    // Uri uri = Uri.parse("http://commonsware.com/misc/test.mp4");
    Uri uri = Uri.parse("http://xxx.xxx.xxx.xxx:8080/FileUpload/asd.mp3");

    Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).mkdirs();

    lastDownload = mgr.enqueue(new DownloadManager.Request(uri)
            .setAllowedNetworkTypes(
                    DownloadManager.Request.NETWORK_WIFI | DownloadManager.Request.NETWORK_MOBILE)
            .setAllowedOverRoaming(false).setTitle("Demo")
            .setDescription("Something useful. No, really.")
            .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "test.mp4"));

    v.setEnabled(false);
    findViewById(R.id.query).setEnabled(true);
}

public void queryStatus(View v) {
    Cursor c = mgr.query(new DownloadManager.Query().setFilterById(lastDownload));

    if (c == null) {
        Toast.makeText(this, "Download not found!", Toast.LENGTH_LONG).show();
    } else {
        c.moveToFirst();

        Log.d(getClass().getName(),
                "COLUMN_ID: " + c.getLong(c.getColumnIndex(DownloadManager.COLUMN_ID)));
        Log.d(getClass().getName(),
                "COLUMN_BYTES_DOWNLOADED_SO_FAR: "
                        + c.getLong(c.getColumnIndex(DownloadManager.COLUMN_BYTES_DOWNLOADED_SO_FAR)));
        Log.d(getClass().getName(),
                "COLUMN_LAST_MODIFIED_TIMESTAMP: "
                        + c.getLong(c.getColumnIndex(DownloadManager.COLUMN_LAST_MODIFIED_TIMESTAMP)));
        Log.d(getClass().getName(),
                "COLUMN_LOCAL_URI: " + c.getString(c.getColumnIndex(DownloadManager.COLUMN_LOCAL_URI)));
        Log.d(getClass().getName(),
                "COLUMN_STATUS: " + c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS)));
        Log.d(getClass().getName(),
                "COLUMN_REASON: " + c.getInt(c.getColumnIndex(DownloadManager.COLUMN_REASON)));

        Toast.makeText(this, statusMessage(c), Toast.LENGTH_LONG).show();
    }
}

public void viewLog(View v) {
    startActivity(new Intent(DownloadManager.ACTION_VIEW_DOWNLOADS));
}

private String statusMessage(Cursor c) {
    String msg = "???";

    switch (c.getInt(c.getColumnIndex(DownloadManager.COLUMN_STATUS))) {
    case DownloadManager.STATUS_FAILED:
        msg = "Download failed!";
        break;

    case DownloadManager.STATUS_PAUSED:
        msg = "Download paused!";
        break;

    case DownloadManager.STATUS_PENDING:
        msg = "Download pending!";
        break;

    case DownloadManager.STATUS_RUNNING:
        msg = "Download in progress!";
        break;

    case DownloadManager.STATUS_SUCCESSFUL:
        msg = "Download complete!";
        break;

    default:
        msg = "Download is nowhere in sight";
        break;
    }

    return (msg);
}

BroadcastReceiver onComplete = new BroadcastReceiver() {
    public void onReceive(Context ctxt, Intent intent) {
        findViewById(R.id.start).setEnabled(true);
    }
};

BroadcastReceiver onNotificationClick = new BroadcastReceiver() {
    public void onReceive(Context ctxt, Intent intent) {
        Toast.makeText(ctxt, "Ummmm...hi!", Toast.LENGTH_LONG).show();
    }
}; 
```

如您所见，我尝试使用它。如果我将一些文件放入**WebProject -> WebContent** **中，我就可以下载它**. 但我需要访问服务器计算机中的所有文件。（我认为我应该使用可以处理下载管理器请求并可以上传文件的 servlet，但我不确定。）Android 的**下载管理器**只能处理**HTTP 和 HTTPS。**

我会实现服务器端，但我真的不知道怎么做，所以问题是：**我怎样才能实现可以满足下载管理器请求的正确服务器端。**

如果你能帮助到你，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:40:42.783

编写一个网络服务。您可以使用[Jersey](http://jersey.java.net/)之类的框架来处理下载请求。请求可以包含路径/查询参数，这些参数可以帮助服务确定客户端想要哪个文件。它还可以通过多种方式提供身份验证。

至于后端，如果可靠性不是问题，您可以将文件保存到公共磁盘。或者，您可以使用网络存储设备保存文件。[您也可以将其上传到Amazon S3](http://aws.amazon.com/s3/)等第三方，只需将文件的下载链接提供给客户端即可。因此，该服务将充当发现下载链接的方式。它本身不会托管文件。

任你选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:14:16.460

我为我的问题找到了一个简单的解决方案，但我想说谢谢你的回答！

简单的解决方案：

```
 File f = new File("d:\\....");
    int length = 0;
    ServletOutputStream op = response.getOutputStream();
    ServletContext context = getServletConfig().getServletContext();
    String mimetype = context.getMimeType("d:\\Zene\\WakaWaka.mp3");

    //
    // Set the response and go!
    //
    //
    response.setContentType((mimetype != null) ? mimetype : "application/octet-stream");
    response.setContentLength((int) f.length());
    response.setHeader("Content-Disposition", "attachment; filename=\"" + "seven-eurotura.cd1.avi" + "\"");

    //
    // Stream to the requester.
    //
    byte[] bbuf = new byte[100];
    DataInputStream in = new DataInputStream(new FileInputStream(f));

    while ((in != null) && ((length = in.read(bbuf)) != -1)) {
        op.write(bbuf, 0, length);
    } 
```

# c++ - 避免内存碎片的方法

> ID：15848552
> 
> 赞同：2
> 
> 时间：2013-04-06T08:12:13.643
> 
> 标签：c++, memory-management, rtos, memory-fragmentation

我从 RTOS 分配了一个大内存池（我已经知道我的应用程序内存需求，它不会超过一定大小）。然后我的应用程序分配请求从该池中得到满足。

最近我开始面临一个问题；即使内存在那里，分配请求也没有得到满足（有集成的内存基准标记框架，这表明了这一点），调查显示我们正遭受内存碎片的困扰。

我的应用程序严重依赖 STL（也从网络接收数据、XML 解析、图像处理、将其保存为 PNG 等），以及作为内存碎片背后的堆内存分配（还有其他原因吗？），有什么最好的方法来避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:19:58.187

内存碎片的典型原因是随着池的老化，大内存块被分成越来越小的块。避免这种情况的简单方法是固定大小。

这显然不能解决使用 18MB 存储 XML 的问题，其中每个 XML 节点存储为一个小字符串，然后尝试加载 4096 x 4096 x 8bit PNG (16MB)，如果您的池是 24MB，因为XML 会将您的内存分成小块，然后您需要 16MB 的连续内存。但是“固定大小”将避免`<aaa>b</aaa>`占用 4 字节和 2 字节内存的 XML 字符串，从而使内存对于存储在那里的任何其他内容完全无用，因为没有其他对象是 4 或 2 字节长。

此方法将要求您的内存分配器被写入以考虑“固定大小”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:34:56.417

第一步是查看 RTOS 是否为低碎片堆提供任何机制。

如果没有，看看其他人是否已经实现了低碎片分配器。一个[相关问题](https://stackoverflow.com/questions/60871/how-to-solve-memory-fragmentation?rq=1)（来自右侧栏）提出了一个示例。

第三，如果没有其他现有的解决方案有效，一个解决方案是使用多个内存池进行分配。

服务来自一个池的大小为 1 到 X 字节的短期分配，以及来自另一个池的大小为 1 到 X 字节的长期分配。

大小 X + 1 到 2X、2X +1 到 4X、4X + 1 到 8X 等的分配类似。（您可以尝试其他大小的桶......）

要确定 X 的最佳大小，您需要分析您的应用程序并查看每个分配大小的频率。

确保每个桶有足够的空间来完成分配:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:54:14.203

假设：切换到垃圾收集。您需要一个压缩垃圾收集器，它能够在物理上移动分配的数据，否则它对碎片没有帮助。

*   垃圾收集不一定与实时要求不兼容。实时意味着“您的系统必须保证在一定期限内做出反应”。如果垃圾收集器以增量方式工作并且可以保证足够短的“hold-the-world”阶段，那就没问题了。
*   现代垃圾收集器的性能并不全是坏的。人们总是倾向于忘记这一点`free`，而且`delete`操作也非常昂贵。
*   垃圾收集需要权衡取舍：最有效的垃圾收集时间较长。持有世界阶段较短的那些整体效率较低。

不幸的是，所有这些都是假设的，因为我目前不知道任何用于 C++ 的压缩增量垃圾收集器。除了 C++/CLI。

# python - 使用 python re 查找包含 x 的 url

> ID：15848555
> 
> 赞同：0
> 
> 时间：2013-04-06T08:12:23.827
> 
> 标签：python, regex, python-2.7

使用 python 2.7.3、urllib 和 re，我正在寻找包含以下内容的 url：

```
href="/dirone/Dir_Two/dirthree/" 
```

url 可能在哪里，例如：

```
href="/dirone/Dir_Two/dirthree/5678-random-stuff-here-letters-and-numbers" 
```

我想回来：

```
"/dirone/Dir_Two/dirthree/5678-random-stuff-here-letters-and-numbers" 
```

使用这个工具：

[http://www.jslab.dk/tools.regex.php](http://www.jslab.dk/tools.regex.php)

我生成的正则表达式为：

```
/^href\="\/dirone\/Dir_Two\/dirthree\/"$/im 
```

因此，此正则表达式是否可以通过以下方式与 python 和 re 一起使用：

```
object_name = re.findall('/^href\="\/dirone\/Dir_Two\/dirthree\/"$/im',url)
for single_url in object_name:
    do something 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:18:23.627

你真的想放下`^`锚；我怀疑它`href`是否会出现在一行的开头。

您不需要该`/im`部分，应将其替换为`re.`标志常量。那里有 Perl 正则表达式语法，Python 没有专门的`/.../flags`语法。

因此有太多的转义并且没有实际的 Python 字符串。而且您实际上并没有包括该`5678-random-stuff-here-letters-and-numbers`部分。

改用这个：

```
object_name = re.findall(r'href="(/dirone/Dir_Two\/dirthree/[^"/]*)"', url, re.I) 
```

我删除了多行标志，因为我们不再匹配已删除`^`. 我在路径周围添加了一个组 ( `(...)`)，以便`findall()`返回这些而不是整个匹配。该`[^"/]*`部分匹配除引号或斜杠以外的任何字符，以捕获文件名部分但不匹配另一个目录名称。

简短演示：

```
>>> import re
>>> example = '<a href="/dirone/Dir_Two/dirthree/5678-random-stuff-here-letters-and-numbers">'
>>> re.findall(r'href="(/dirone/Dir_Two\/dirthree/[^"/]*)"', example, re.I)
['/dirone/Dir_Two/dirthree/5678-random-stuff-here-letters-and-numbers'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:32:06.503

类似于 Martijn 的答案，但`beautifulsoup`假设您拥有 HTML。

```
data = '<a href="/dirone/Dir_Two/dirthree/5678-random-stuff-here-letters-and-numbers">Content</a>'

from bs4 import BeautifulSoup
import re

soup = BeautifulSoup(data)
print [el['href'] for el in soup('a', href=re.compile('^/dirone/Dir_Two/.*'))] 
```

# javascript - 使用javascript以AM / PM格式减去两次

> ID：15848556
> 
> 赞同：0
> 
> 时间：2013-04-06T08:12:27.240
> 
> 标签：javascript, jquery, datejs

我正在使用`date.js`插件将我的时间转换为日期对象，然后减去它们。但结果无效。我的时间是这种格式`11:00 pm` 这就是我正在做的事情：

```
var tim_i = $('#in_time').val();
var tim_o = $('#out_time').val();
total_tim = "";
if (tim_i && tim_o ){
    d1 = Date.parse(tim_i);
    d2 = Date.parse(tim_o);
    date_diff = new Date(d2 - d1);
    total_tim=date_diff.getHours() + ':' + date_diff.getMinutes();
}

$('#total_time').val(total_tim); 
```

还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:37:10.547

Datejs 中的 TimeSpan 类可能有助于简化问题。

这是一个您可以在 Firebug 中运行的示例，它将两个字符串解析为 Date 对象，然后以小时 + 分钟为单位输出差异。

**例子**

```
var d1 = Date.parse("6:30 am");
var d2 = Date.parse("11:00 pm");

var diff = new TimeSpan(d2 - d1);

console.log("Hours: ", diff.hours);
console.log("Minutes: ", diff.minutes); 
```

希望这可以帮助。

**编辑**：如果你真的想要简洁，你甚至可以简化为一行。

```
new TimeSpan(Date.parse("11:00 pm")-Date.parse("6:30 am")).toString("H:mm") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:35:22.793

尝试这个：

```
var tim_i = new Date($('#in_time').val());
var tim_o = new Date($('#out_time').val());
total_tim = "";
if (tim_i && tim_o) {
    var timeDiff = Math.abs(tim_o.getTime() - tim_i.getTime());
    var getHours = Math.ceil(timeDiff / (1000 * 3600));
    var getMinutes = Math.ceil(timeDiff % (1000 * 60));
    total_tim = getHours + ':' + getMinutes;
} 
```

# asp.net-mvc - ASP.NET 网络安全、简单的成员资格提供程序和为用户分配新密码的权力

> ID：15848563
> 
> 赞同：1
> 
> 时间：2013-04-06T08:13:27.900
> 
> 标签：asp.net-mvc

我正在创建一个应用程序，其中管理员必须具有重置其他用户密码的权限。我不想重设他们的密码。我只是希望管理员能够在不知道旧密码的情况下更改每个人的密码。

如何在不知道旧密码的情况下更改密码。我正在使用 asp.net mvc 4 和简单的会员提供程序。

我在 web.config 中也没有为会员提供者进行配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:14:12.867

在 Asp.Net 中，如果您想更改用户的密码...

您只需要知道此人的 ID（用户名）。这必须是唯一的，并且您必须已经在数据库中确定了这一点。

如果您已向管理员提供所有权限，则通过编码您可以运行“更新”该用户名的密码的查询。

希望这能回答你的问题。

# php - 允许通过 PHP 或 HTACCESS 或其他方式通过 IP 访问成员区域的最佳方式？

> ID：15848564
> 
> 赞同：0
> 
> 时间：2013-04-06T08:13:38.403
> 
> 标签：php, .htaccess, ip, membership

我想知道通过 htaccess allow 或 PHP ips 数组来检查每个页面是否允许访问会员区域会更有效。我主要对性能感兴趣。

当您处理数百甚至数千个 ip 时，是否推荐使用这些方法中的任何一种？

有没有更好的办法？

更新：

如果我嗅探 IP，然后根据 IP 是否被识别，我会启动会员或无会员会话，这样就不必在每次浏览量时检查 ip 怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:27:27.360

使用 htaccess 可能更快，因为您不需要运行 php 处理程序来运行您的 php 脚本。我给出了一个类似的[答案](https://stackoverflow.com/a/15580768/851273)[来**阻止**](https://stackoverflow.com/a/15580768/851273)使用`RewriteMap`. 您只需要其他方式，而不是拒绝来自这些 IP 的访问，而是授予访问权限：

```
RewriteMap allow_ips txt:/path/to/allow_ips.txt

RewriteCond ${allow_ips:%{REMOTE_ADDR}|0} =1
RewriteRule ^protected/path - [L]

RewriteRule ^protected/path - [L,F] 
```

allow_ips .txt 文件的内容为：

```
12.34.56.78 1
11.22.33.44 1
etc. 
```

`RewriteMap`定向的*必须在 server 或 vhost config*中。您可以从 htaccess 定义一个映射，尽管您可以在那里使用它。

如果您不能使用地图，那么您需要使用`Allow`. 在要保护的目录中的 htaccess 文件中：

```
Order Allow,Deny
Deny from all
Allow from 12.34.56.78
Allow from 11.22.33.44
... 
```

> 有没有更好的办法？

最好的方法可能是通过 htpasswd 实现用户/密码。[这是一个教程](http://www.javascriptkit.com/howto/htaccess3.shtml)。然后你可以把这些`Auth*`东西放在你想要保护的目录中的一个 htaccess 文件中，就是这样。简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:34:05.853

你可以使用 .htaccess

```
<Files 403.shtml>
   order deny,allow
   deny from all
</Files>

allow from 142.4.98.37
allow from 193.105.210.217
allow from 142.4.98.35

//Allow those ip which you want 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:12:30.263

如果您要处理超过一百个 IP 地址，特别是动态 IP，当然允许访问的最佳方式是通过 PHP 脚本，例如这样！请记住，此代码只是一个示例，并未完全审查：

```
while($row = mysqli_fetch_array($result)) {
    if ($_SERVER['SERVER_ADDR'] != $row['ip']) {
        header('HTTP/1.0 403 Forbidden');
        break;
    }
} 
```

观众可以做剩下的事情来修复上面的语法，这就是它在**社区 wiki**中的原因。

## 关于优势

对我来说，服务器端脚本语言有很多优点。这样，您甚至可以对应用程序进行编程以**自动阻止**发送垃圾邮件的用户的 IP 地址，您甚至可以对他们被阻止的时间进行编程。

# php - Facebook PHP SDK 仅适用于本地主机

> ID：15848565
> 
> 赞同：0
> 
> 时间：2013-04-06T08:13:44.183
> 
> 标签：php, facebook, cakephp-1.2

我有一个移动应用程序，它与 PHP Facebook SDK 的接口直到最近才正常。现在它只会在我让它指向我的本地主机开发服务器时登录。坦率地说，我完全被难住了。当然，我已经检查了 Facebook 开发人员中心内的网站网址。一切都指向实时服务器。然而只有开发服务器会登录。有什么建议吗？

```
These domains work:
http://localhost:8888
http://testsite2:8888

These domains will not work:
http://*.com
https://*.com 
```

根据要求，这是我的 Facebook 代码：

```
$config = array();
$config['appId'] = Configure::read('FB_APP_ID');
$config['secret'] = Configure::read('FB_APP_SECRET');
$config['fileUpload'] = false; // optional
$facebook = new Facebook($config);      
$facebook->setAccessToken($this->data['User']['fbtoken']);
$receivedfbid = $facebook->getUser(); 
```

这在我的开发服务器上可以正常工作，并且直到最近它在实时服务器上都可以正常工作。重申一下，facebook 开发人员中心配置为实时服务器的“站点 url”。所以这不是问题。

![在此处输入图像描述](https://i.stack.imgur.com/UsQRi.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T13:32:45.680

我在 webhost 上的 web 应用程序遇到了同样的问题，但它在 localhost 上运行良好。

就我而言，它与 cURL 和 ssl 有关。

查看是否是 SSL 问题的一种快速方法是告诉 fb php sdk 接受任何 SSL 证书，为此，将其添加到您的 base_facebook.php 文件中：

```
$opts[CURLOPT_SSL_VERIFYPEER] = false; 
   curl_setopt_array($ch, $opts); 
```

放在前面`$result = curl_exec($ch);`

我知道您说您在非 SSL 连接上进行了测试，但您的 base_facebook.php 文件仍在寻找 ssl 证书。
如需进一步阅读，请参阅：[http ://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T09:44:54.093

[在developer.facebook.com](http://developer.facebook.com)中更改您的应用程序设置我希望您会为 localhost 配置

# ios - iOS 是否查找特定区域的 .lproj 目录（例如 en_US.lproj）？

> ID：15848566
> 
> 赞同：2
> 
> 时间：2013-04-06T08:13:44.557
> 
> 标签：ios, cocoa-touch, localization, localizable.strings

根据官方文档[Internationalization Programming Topics](http://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/Articles/LanguageDesignations.html#//apple_ref/doc/uid/20002144-SW7)：

> 如果您的 Mac 应用程序具有针对美国、英国和澳大利亚用户的本地化版本，则捆绑例程将首先搜索相应的区域目录（en_US.lproj、en_GB.lproj 或 en_AU.lproj），然后是 en.lproj 目录。**iPhone 上的相同应用程序只会在 en.lproj 目录中查找。**

但是我尝试将我的 Localizable.strings 放在 en_US.lproj 目录中，**而不是**en.lproj 中，我仍然可以使用`NSLocalizedString()`函数找到英文字符串。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:27:23.920

我不确定，但这是我有根据的猜测。

首先要认识到 OS X 和 iOS 共享大量代码。实际上，您可以找到相当多的*官方*OS X 功能 - 仅在 iOS 上也可以使用。

这是我在手机上观察到的：

如果我只有

```
- en_US.lproj
    - Localizable.strings 
```

**然后，它会从该文件中读取值，这与您找到的文档**所说的相矛盾（如您所述）。

但是，如果我有：

```
- en_US.lproj
    - Localizable.strings
- en.lproj
    - Localizable.strings 
```

然后，它将采用**en.lproj**的值，*有点*尊重文档的精神。

现在，当我以图形方式使用 Xcode 时，它​​只会让我为 选择本地化**，**`en-US`这与（美国地区）不同。所以，我猜你（和我一样）离开了 Xcode，手动添加了目录，然后将它添加到你的 Xcode 项目中。**`en_US``en_US.lproj`**

 **也许 Apple 的想法是，虽然 iOS 仍然可以识别`en_US.lproj`，但由于他们已将 Xcode 配置为不允许您直接创建本地化，应用程序不会在那里结束？因此，您已经（某种程度）侵入了该功能。

还有一点需要注意：如果您像我一样手动创建 .lproj 文件夹，您必须小心，当您在 Xcode 之外更改它们时，它们实际上已经消失了。此外，您可能必须卸载您的应用程序才能清除您以这种方式添加（和*删除*）的旧 .lproj 目录。所以，这是另一种看待奇怪行为的方式。

长话短说，就文档本身而言，我不会向 App Store 提交具有这种本地化类型的应用程序。它可能会被拒绝，或者将来会中断（找不到字符串值），因为它在 iOS 上不受官方支持。也就是说，如果这个功能无限期地继续工作，我也不会感到惊讶。**

# mysql - MySql 十进制数据类型：未插入正确的值

> ID：15848570
> 
> 赞同：0
> 
> 时间：2013-04-06T08:14:14.390
> 
> 标签：mysql, floating-point, double, decimal

**简短版本** 我正在尝试插入十进制值，但插入后它为所有十进制值存储 99.999999。我正在使用 MySql 5.5.16。

**长版**

我正在尝试使用下面的架构创建一个表

```
CREATE TABLE products (
  id MEDIUMINT NOT NULL AUTO_INCREMENT,
  product_name CHAR(100),
  group_name CHAR(100),
  lon decimal(8,6),
  lat decimal(8,6),
  PRIMARY KEY (id)
); 
```

我的插入语句看起来像

```
Insert into products (product_name , group_name , lon, lat) values
('Asparagus' , 'fresh vegetables' , 428743.9819 , 4512618.55); 
```

我插入了 52 个值，总之`Decimal`，值正在返回`99.999999`。

我还尝试使用`FLOAT`正在返回`100.00000`的情况，以防万一`DOUBLE`我得到`99.999999`.

任何指导都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:26:41.017

更改十进制变量的值。对我来说，它工作正常。

```
CREATE TABLE products (
  id MEDIUMINT NOT NULL AUTO_INCREMENT,
  product_name CHAR(100),
  group_name CHAR(100),
  lon decimal(15,6),
  lat decimal(15,6),
  PRIMARY KEY (id)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:26:07.620

如果您阅读[mysql 文档](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)，您会发现您需要 a`decimal (13, 6)`因为第一个参数是精度......所以要找到它，您必须计算最大值的全局长度。

# f# - F# 中读/写属性的最短声明

> ID：15848575
> 
> 赞同：0
> 
> 时间：2013-04-06T08:15:02.010
> 
> 标签：f#, c#-to-f#

我需要一些公共属性，在 C# 中我会这样做。

```
public VendorOrderService { get; set; } 
```

F# 中此类属性的最短（正确/惯用）语法是什么？

```
member val VendorService = Unchecked.defaultof<VendorOrderService> with get, set 
```

PS 我确实明白公共属性对于 F# 来说不是超级惯用的。但是这段代码在更大的 .NET 项目中工作，所以这些属性是强制性的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T18:13:39.833

首先在 C# 中你应该写类型，像这样

```
public string VendorOrderService { get; set; } 
```

在 F# 3.0 中，您可以使用[val 关键字](http://msdn.microsoft.com/en-us/library/dd469494.aspx)（就像您一样）：

```
type MyType() = 
    member val VendorOrderService = "" with get, set 
```

或使用[[CLIMutable]](http://msdn.microsoft.com/en-us/library/hh289724.aspx)属性：

```
[<CLIMutable>]
type MyType = { VendorOrderService:string} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:40:45.987

```
type Foo() =
     member val Text : string = null with get, set 
```

# c# - 通过 HTTP 处理程序连接到 SQL Server Express 数据库

> ID：15848578
> 
> 赞同：2
> 
> 时间：2013-04-06T08:15:17.443
> 
> 标签：c#, asp.net, sql-server-express, httphandler

每次下载文件时，我都会尝试更新数据库中的表。数据库是我使用示例网站模板时创建的“DefaultConnection(WebsiteName)”。它是存储所有注册用户的数据库。我已将此表添加到该数据库中。

```
CREATE TABLE [dbo].[Download] (
    [filename] NVARCHAR(50) NULL  , 
    [counter] INT NOT NULL DEFAULT 0 , 
); 
```

我创建了一个 HTTP 处理程序，当我单击下载时它会被触发，并且在没有 SQL 连接部分的情况下工作：

```
<%@ WebHandler Language="C#" Class="Download" %>

using System;
using System.Web;
using System.IO;
using System.Data;
using System.Data.SqlClient;
using System.Web.Configuration;

public class Download : IHttpHandler {

    SqlConnection conn;
    SqlCommand cmd;

        private string FilesPath
        {
            get
            {
                return @"path to directory holding files";
            }
        }

        public void ProcessRequest(HttpContext context)
        {
            string fileName = context.Request.QueryString["filename"];
            if (!string.IsNullOrEmpty(fileName) && File.Exists(FilesPath + fileName))
            {
                context.Response.ContentType = "application/octet-stream";
                context.Response.AddHeader("Content-Disposition", string.Format("attachment; filename=\"{0}\"", fileName));
                context.Response.WriteFile(FilesPath + fileName);

                //connect to the db

                conn = new SqlConnection(
                "Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-websiteName-20130405020152;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-websiteName-20130405020152‌​.mdf");
                //the sql command to increment counter by 1
                cmd = new SqlCommand("UPDATE counter SET counter = counter+1 WHERE filename=@filename", conn);
                cmd.CommandType = CommandType.Text;
                cmd.Parameters.AddWithValue("@filename", "Default");

                using (conn)
                {
                    //open the connection
                    conn.Open();
                    //send the query
                    cmd.ExecuteNonQuery();
                }
                conn.Close();
            }
            else
            {
                context.Response.ContentType = "text/plain";
                context.Response.Write(FilesPath + fileName + " Invalid filename");
            }
        }

        public bool IsReusable {
            get {
                return false;
            }
        }
    } 
```

我无法让它与我能找到的任何连接字符串连接。我已经尝试过“web.config”中显示的那个。它总是会尝试连接一段时间，但随后会`conn.Open();`在线路上抛出一个异常，说它无法连接：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）。

我的主要问题是，如何连接到此默认数据库，以便在下载文件时更新此表中的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:18:21.017

您的连接字符串中没有附加的 db 文件名。请从这里获取本地数据库的连接字符串[http://msdn.microsoft.com/en-us/library/hh510202.aspx](http://msdn.microsoft.com/en-us/library/hh510202.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:54:57.777

我最终设法使用它连接到它：

```
conn = new SqlConnection(WebConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString); 
```

# makefile - 为什么这个makefile不能工作？

> ID：15848581
> 
> 赞同：0
> 
> 时间：2013-04-06T08:15:46.553
> 
> 标签：makefile, gnu-make

`$@,$^`我使用自动变量（ ）和模式（ ）编写了以下makefile `%`，但它不能与gnu make一起使用：

```
TARGET = edit
SRCS = $(wildcard *.c)
OBJS = $(SRCS:%.c=%.o)
$(TARGET) : $(OBJS)
    gcc $^ -o $(TARGET)
%.o : %.c
    gcc $< -c $@ 
```

我在工作目录中有 foo.c ,bar.c 。错误是：

```
gcc foo.c -c foo.o
gcc: foo.o: No such file or directory
make: *** [foo.o] Error 1 
```

`automatic variables`我对and感到很困惑`pattern rules`，如何准确地使用它们？而且他们有什么关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:20:05.127

你的规则是错误的。它应该是：

```
%.o : %.c
    gcc -c $< -o $@ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:02:42.783

如果您不是专家，带有所有这些符号的传统 makefile 语法会令人困惑。在[makepp 中](http://makepp.sourceforge.net/)，您可以使用自我解释长名称（并且第二行不需要以选项卡开头）：

```
%.o : %.c
    gcc -c $(input) -o $(ouptut) 
```

至于您的问题：虽然这些变量在所有规则中都可以避免冗余，但它们对模式规则至关重要。您怎么知道当前正在编译您的许多输入文件中的哪一个。

*makepp 还有很多。除了做 GNU make 能做的几乎所有事情，还有很多有用的东西，你甚至可以用一些 Perl 编程来扩展你的 makefile。*

# r - R中令人困惑的对象大小

> ID：15848590
> 
> 赞同：-1
> 
> 时间：2013-04-06T08:16:49.150
> 
> 标签：r, memory, size

```
> length(row)
[1] 1000
> object.size(row)
8024 bytes
> object.size(row[1])
32 bytes 
```

这里的行是一个列表。行的长度为 1000，其元素之一的大小为 32 字节。因此列表的总大小应该是 32*1000 字节，但由于某种原因它是 8024。这可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T08:24:08.810

初始开销：

```
> row = runif(1000)
> object.size(row[1])
32 bytes
> object.size(row[1:2])
40 bytes
> object.size(row[1:3])
56 bytes
> object.size(row[1:4])
56 bytes 
```

长度为 1 的向量需要 32 个字节，另外每个元素需要 8 个字节。在低端还有其他一些有趣的分配，有时它会占用 16 个字节，但平均为 8 个。

开头的额外字节是因为 R 必须在某处保留长度和其他属性。

```
require(plyr)
size = ldply(1:200,function(i){object.size(row[1:i])})$V1
plot(1:200,size,type="l") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T11:34:28.743

这是长度为 1000 的列表

```
> lst = vector("list", 1000)
> object.size(lst)
8040 bytes 
```

它由一个列表、列表`list()`的元素`lst[[1]]`和指向每个列表元素的指针组成。

```
> object.size(list())
40 bytes
> object.size(row[[1]])
0 bytes
> object.size(lst[1]) - object.size(list())
8 bytes
> object.size(lst[1:2]) - object.size(list())
16 bytes 
```

整个列表结构占用 40 个字节。每个元素为 0 个字节。每个指针为 8 个字节。所以 40 + 1000 * 0 + 1000 * 8 = 8040 字节。

这提供了 a`list`是什么的感觉：

```
> .Internal(inspect(list()))
@586b6690 19 VECSXP g0c0 [] (len=0, tl=0) 
```

内存中的一个位置，指向具有特定类型 ( `VECSXP`) 的结构，该结构具有与内存管理相关的特定状态`g0c0`以及有关其长度等的属性；这个结构显然占用了 40 个字节。列表是递归的，因为它包含对象，每个对象都具有类似于列表的数据结构

```
> .Internal(inspect(list(1)))
@585b35d8 19 VECSXP g0c1 [] (len=1, tl=0)
  @585b3578 14 REALSXP g0c1 [] (len=1, tl=0) 1
> .Internal(inspect(list(1:3)))
@5872ca98 19 VECSXP g0c1 [] (len=1, tl=0)
  @584fc9b8 13 INTSXP g0c2 [] (len=3, tl=0) 1,2,3
> .Internal(inspect(list(1, 2)))
@584fc980 19 VECSXP g0c2 [] (len=2, tl=0)
  @5872c918 14 REALSXP g0c1 [] (len=1, tl=0) 1
  @5872c8e8 14 REALSXP g0c1 [] (len=1, tl=0) 2 
```

实际上，`NULL`由一个对象表示并且确实占用了内存。

```
> .Internal(inspect(NULL))
@1169b08 00 NILSXP g0c0 [NAM(2)] 
```

`NULL`R 会话中只有一个对象，并且`object.size`不将其归属于列表。

我不知道您的`row`真实身份，或者您使用的是 32 位还是 64 位操作系统，或者您使用的是什么版本的 R。我有

```
> sessionInfo()
R version 3.0.0 Patched (2013-04-03 r62485)
Platform: x86_64-unknown-linux-gnu (64-bit) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T08:23:12.253

列表可以包含可变长度的元素。只有数据帧将具有相同长度的行。

```
l<-list(c(1,2), "klklkl", 3:10)
l<-list(c(1,2), "klklkl", 3:10)
object.size(l)  ---200 bytes
object.size(l[1]) --71 bytes 
```

# sql - 在表中保存嵌套 XML 时出现 PL/SQL 错误

> ID：15848592
> 
> 赞同：3
> 
> 时间：2013-04-06T08:16:57.793
> 
> 标签：sql, xml, oracle, plsql, oracle11g

我正在尝试将 XML 保存在表中。XML 具有如下格式：

```
<employees>
  <employees_id> 1</employees_id>
  <employees_name>Teradata</employees_name>
     <department_id>100</department_id>
     <department_name>Techinical</department_name>
     <department_id>200</department_id>
     <department_name>Management</department_name>
     <department_id>300</department_id>
     <department_name>Telecom</department_name>
  </employees>
  <employees>
  <employees_id> 2</employees_id>
  <employees_name>AT&T</employees_name>
     <department_id>400</department_id>
     <department_name>Techinical</department_name>
     <department_id>500</department_id>
     <department_name>Management</department_name>
     <department_id>600</department_id>
     <department_name>Telecom</department_name>
  </employees> 
```

我的表只有一个 id 列和 xmltype 列。

我正在使用的程序如下：

```
 DECLARE
   CTX         DBMS_XMLGEN.CTXHANDLE;
   LCLOB$XML_AS_CLOB  CLOB;
   LREC$EMPLOYEES_EMPNO NUMBER;
 BEGIN
  FOR LREC$EMPLOYEES_EMPNO IN (198, 197, 180)
   LOOP
    --Create context for XML
    CTX :=
      DBMS_XMLGEN.NEWCONTEXT (
       'SELECT employees.EMPLOYEE_ID, employees.FIRST_NAME, 
        departments.DEPARTMENT_ID, departments.DEPARTMENT_NAME
        FROM EMPLOYEES, departments
        WHERE employees.department_id = departments.department_id and 
        employees.employees_id =' || LREC$EMPLOYEES_EMPNO);
    --Get XML file of Context
     -- Set the row header to be EMPLOYEE
    DBMS_XMLGEN.setRowTag(CTX, 'EMPLOYEE');
    LCLOB$XML_AS_CLOB := DBMS_XMLGEN.GETXML (CTX);
    DBMS_XMLGEN.CLOSECONTEXT (CTX); 
    INSERT INTO HR.OFFLINE_XML (id, XML_FILE)
       VALUES ( LREC$EMPLOYEES_EMPNO, XMLTYPE (LCLOB$XML_AS_CLOB));
    END LOOP;
   COMMIT;
 END; 
```

错误报告：

```
 ORA-06550: line 7, column 4:
PLS-00103: Encountered the symbol "LOOP" when expecting one of the following:

   * & - + / at mod remainder rem .. <an exponent (**)> ||
   multiset year day
ORA-06550: line 18, column 16:
PLS-00103: Encountered the symbol "." when expecting one of the following:

   constant exception <an identifier>
   <a double-quoted delimited-identifier> table long double ref
   char time timestamp interval date binary national charac
ORA-06550: line 19, column 23:
PLS-00103: Encountered the symbol "=" when expecting one of the following:

   constant exception <an identifier>
   <a double-quoted delimited-identifier> table long double ref
   char time timestamp interval date binary national charac
ORA-06550: line 20, column 16:
PLS-00103: Encountered the symbol "." when expecting one of the following:

   constant exception <an identifier>
   <a double-quoted delimited-identifier> table long double ref
   char time timestamp interval date binary national charac
ORA-06550: line 21, column 5:
PLS-00103: Encountered the symbol "INSERT" when expecting one of the following:

   begin function pragma procedure subtype type <an identifier>
   <a double-quoted delimited-identifier> current cursor delete
   exists prior
The symbol "b
ORA-06550: line 24, column 4:
PLS-00103: Encountered the symbol "COMMIT" when expecting one of the following:

   end not pragma final instantiable order overriding static
   member constructor map
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:07:42.800

声明一个要迭代的数组：

```
DECLARE
   CTX         DBMS_XMLGEN.CTXHANDLE;
   LCLOB$XML_AS_CLOB  CLOB;
   type number_tab is table of number;
   t_num number_tab := number_tab(198,197,180);
 BEGIN
  FOR idx IN t_num.first..t_num.last
   LOOP
    --Create context for XML
    CTX :=
      DBMS_XMLGEN.NEWCONTEXT (
       'SELECT employees.EMPLOYEE_ID, employees.FIRST_NAME, 
        departments.DEPARTMENT_ID, departments.DEPARTMENT_NAME
        FROM EMPLOYEES, departments
        WHERE employees.department_id = departments.department_id and 
        employees.employees_id =' || t_num(idx));
    --Get XML file of Context
     -- Set the row header to be EMPLOYEE
    DBMS_XMLGEN.setRowTag(CTX, 'EMPLOYEE');
    LCLOB$XML_AS_CLOB := DBMS_XMLGEN.GETXML (CTX);
    DBMS_XMLGEN.CLOSECONTEXT (CTX); 
    INSERT INTO HR.OFFLINE_XML (id, XML_FILE)
       VALUES ( t_num(idx), XMLTYPE (LCLOB$XML_AS_CLOB));
    END LOOP;
   COMMIT;
 END;
 / 
```

其他几点。首先使用 dbmx_xmlgen 您应该使用绑定而不是在此处拼接文字：

```
employees.employees_id =' || LREC$EMPLOYEES_EMPNO); 
```

您也可以在最后使用`getxmltype`而不是`getxml`，以节省您获得一个 clob，然后必须在插入中使用 XMLTYPE()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T16:40:42.340

正如 Noel 所说，您不能为这样的`for`循环提供固定值。（您报告中的所有其他错误都是由此产生的，尽管还有其他问题）。您可以提供一个范围 as `for i in 1..10 loop`，但这对您没有帮助，即使对于您的示例数据也是如此。由于它只是用于测试，您现在可以使用虚拟光标：

```
 FOR LREC$EMPLOYEES_EMPNO IN (
        SELECT 198 AS employee_id FROM dual
        UNION ALL SELECT 197 FROM dual 
        UNION ALL SELECT 180 FROM dual
    ) LOOP 
```

（虽然我实际上更喜欢 DazzaL 的数组，但我现在会坚持这个）。您不必声明游标，`number`使用该名称声明的变量将被此版本取代。当你引用它返回的值之一时，它必须是名称，所以在这种情况下`LREC$EMPLOYEES_EMPNO.employee_id`. 我会选择一个更短的名字 *8-)

正如 DazzaL 还提到的，您也不需要中间的 CLOB。当您可以使用绑定变量时，似乎也没有必要每次在循环周围创建和关闭上下文。

这有效并获得与您的版本相同的结果（适当的修改），但不是您在问题中建议的输出：

```
DECLARE
    ctx DBMS_XMLGEN.CTXHANDLE;
BEGIN
    ctx := DBMS_XMLGEN.NEWCONTEXT(
       'SELECT employees.EMPLOYEE_ID, employees.FIRST_NAME, 
        departments.DEPARTMENT_ID, departments.DEPARTMENT_NAME
        FROM EMPLOYEES, departments
        WHERE employees.department_id = departments.department_id and      
        employees.employee_id = :id');
    DBMS_XMLGEN.setRowTag(ctx, 'EMPLOYEE');
    FOR r IN (
        SELECT 198 AS employee_id FROM dual
        UNION ALL SELECT 197 FROM dual 
        UNION ALL SELECT 180 FROM dual
    ) LOOP
        DBMS_XMLGEN.SETBINDVALUE(ctx, 'ID', r.employee_id);
        INSERT INTO OFFLINE_XML (id, xml_file)
        VALUES (r.employee_id, DBMS_XMLGEN.GETXMLTYPE(ctx));
    END LOOP;
    DBMS_XMLGEN.CLOSECONTEXT(ctx); 
END;
/ 
```

它用以下内容填充表格：

```
 ID XML_FILE
---------- --------------------------------------------------
       198 <ROWSET>
             <EMPLOYEE>
               <EMPLOYEE_ID>198</EMPLOYEE_ID>
               <FIRST_NAME>Bob</FIRST_NAME>
               <DEPARTMENT_ID>1</DEPARTMENT_ID>
               <DEPARTMENT_NAME>First</DEPARTMENT_NAME>
             </EMPLOYEE>
           </ROWSET>

       197 <ROWSET>
             <EMPLOYEE>
               <EMPLOYEE_ID>197</EMPLOYEE_ID>
               <FIRST_NAME>Adam</FIRST_NAME>
               <DEPARTMENT_ID>1</DEPARTMENT_ID>
               <DEPARTMENT_NAME>First</DEPARTMENT_NAME>
             </EMPLOYEE>
           </ROWSET>

       180 <ROWSET>
             <EMPLOYEE>
               <EMPLOYEE_ID>180</EMPLOYEE_ID>
               <FIRST_NAME>Charlie</FIRST_NAME>
               <DEPARTMENT_ID>2</DEPARTMENT_ID>
               <DEPARTMENT_NAME>Second</DEPARTMENT_NAME>
             </EMPLOYEE>
           </ROWSET> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:02:20.680

我认为您不能以这种方式编写 FOR 循环。您应该编写一个光标来选择员工编号，然后在 FOR 循环中使用该光标。

```
declare
    cursor cur_emp is select employee_id from employees;
begin
    for i in cur_emp
    loop
    /*your code here. Use i.employee_id to get the employee_id*/
    end loop;
end; 
```

# zend-framework2 - 模块 (ZfcUser) 无法初始化

> ID：15848593
> 
> 赞同：1
> 
> 时间：2013-04-06T08:17:11.963
> 
> 标签：zend-framework2, zfcuser

在我的应用程序中安装 ZfcBase 和 ZfcUser 后，我收到错误消息：

```
'Module (ZfcUser) could not be initialized.' in Zend/ModuleManager/ModuleManager.php on line 140 
```

我以完全相同的方式和位置安装了 ZfcBase 和 ZfcUser，并且 ZfcBase 正确加载。

ModuleManager.php 中的相关代码为：

```
/**
     * Load a specific module by name.
     *
     * @param    string $moduleName
     * @throws   Exception\RuntimeException
     * @triggers loadModule.resolve
     * @triggers loadModule
     * @return   mixed Module's Module class
     */
    public function loadModule($moduleName)
    {
        if (isset($this->loadedModules[$moduleName])) {
            return $this->loadedModules[$moduleName];
        }

        $event = ($this->loadFinished === false) ? clone $this->getEvent() : $this->getEvent();
        $event->setModuleName($moduleName);

        $this->loadFinished = false;

        $result = $this->getEventManager()->trigger(ModuleEvent::EVENT_LOAD_MODULE_RESOLVE, $this, $event, function ($r) {
            return (is_object($r));
        });

        $module = $result->last();

        if (!is_object($module)) {
            throw new Exception\RuntimeException(sprintf(
                'Module (%s) could not be initialized.',
                $moduleName
            ));
        } 
```

我将如何调试这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:23:20.270

我怀疑您通过克隆 Github 存储库并创建 git 子模块来安装 ZfcUser。我在克隆我的整个应用程序（例如到一台新机器）时遇到了问题，而没有每次都单独克隆每个子模块。我遇到了与您在其他情况下相同的错误。

正如其他人所说，除非您有充分的理由不这样做，否则请使用作曲家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:11:03.620

正如 Sam 在上面的评论中所建议的那样，我安装了 Composer 并且 ZfcUser 工作正常。甚至不需要显式加载 ZfcBase。我错过了手动安装可能是 Doctrine 或其他依赖项。我最初拒绝使用 Composer，因为它应该在每个项目的基础上使用。但现在我将它用于几个安装到公共供应商目录的项目，所有项目共享相同的 index.php、ini_autoload.php 和 Composer autoload.php 文件。

# mysql - 将mysql用户添加到数据库

> ID：15848598
> 
> 赞同：0
> 
> 时间：2013-04-06T08:17:59.400
> 
> 标签：mysql, database

是否可以将 mysql 用户作为列添加到数据库中？

假设我们有一个下表：

```
CREATE TABLE message(
   id INT AUTO_INCREMENT NOT NULL,
   title VARCHAR(255),
   message TEXT,
   last_edited TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (id)
) ENGINE=INNODB; 
```

并且我们想要添加“编辑器”列，它将获取当前的 mysql 用户并将其插入其中，并自动更新它，类似于 TIMESTAMP 数据类型的行为。可以这样做吗？如果可以，我应该使用哪种数据类型（是否有 USER 之类的类型，或者我应该使用简单的 varchar）以及涉及哪种语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:22:24.437

```
CREATE TABLE message(
   id INT AUTO_INCREMENT NOT NULL,
   title VARCHAR(255),
   message TEXT,
   last_edited TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
   editor VARCHAR(50) NOT NULL,
   PRIMARY KEY (id),
   UNIQUE INDEX `editor`(`editor`)
) ENGINE=INNODB; 
```

并在插入时；采用

```
INSERT INTO `message`(`columns..`, `editor`)
    VALUES( <YOUR VALUES>, CURRENT_USER() )
ON DUPLICATE KEY UPDATE
    `editor` = CURRENT_USER(); 
```

# php - 登录系统帮助 - “出现 4 个错误”

> ID：15848600
> 
> 赞同：-1
> 
> 时间：2013-04-06T08:18:08.030
> 
> 标签：php, mysql, session, login, system

当我尝试使用该系统时，我收到了这些错误。

> 使用未定义的常量 session_id - 在第 16 行的 C:\wamp\www\UCP\header.inc.php 中假定为“session_id”
> 
> mysql_fetch_assoc() 期望参数 1 是资源，在第 21 行的 C:\wamp\www\UCP\header.inc.php 中给出的布尔值
> 
> mysql_num_rows() 期望参数 1 是资源，在第 22 行的 C:\wamp\www\UCP\header.inc.php 中给出的布尔值
> 
> ：使用未定义的常量 IsLoggedIn - 在第 3 行的 C:\wamp\www\UCP\Dashboard.php 中假定为“IsLoggedIn”

```
<?php
session_start();
require_once("connection.php");

$user = IsLoggedIn();

if($user)
{
    $expires = time() + (60 * 15);
    mysql_query("UPDATE 'active_users' SET 'expires' = " . $expires . " WHERE 'user' = " . (int) $user . "");

}

function IsLoggedIn()
{
    $sessID = mysql_real_escape_string(session_id);
    $hash = mysql_real_escape_string(hash("sha512", $sessID.$_SERVER['HTTP_USER_AGENT']));

    $query = mysql_query("SELECT 'user' FROM 'active_users' WHERE 'session_id' = '" . $sessID . "' AND 'hash' = '" . $hash . "' AND 'expires' > " . time() . "");

    $data = mysql_fetch_assoc($query);
    if(mysql_num_rows($query))
    {
        return $data['user'];
    }
    else {
        return false;
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:31:42.417

您的 SQL 查询中有拼写错误。

在函数中更改`SLECT`为始终使用 (`) 来打包表或字段名称。`SELECT``IsLoggedIn()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:05:33.837

```
1.Use of undefined constant session_id: define your session_id
2\. For mysql error just change SLECT with SELECT
3\. Use of undefined constant IsLoggedIn : pull your IsLoggedIn function in the top of the page. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:23:20.857

基本上，至少考虑用 PDO 或 mysqli 编写它，因为 mysql_query 已贬值。但在这种情况下：

```
 1) $sessID = session_id();
 2) the mistake is here --->  WHERE session_id = '$sessID' AND hash= '$hash' AND expires > " . time(). "");     First, you INSERT Hash and SESSION_id TO DB and then you SELECT it.
 3) $num=mysql_num_rows($query);
    if($num !==0 ) { 
    }
4) mysql_query("UPDATE active_users SET expires = '$expires' WHERE user='$user'");
5) if($user !==null)
6) if you still receiving errors, check if row & table names are correctly written. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T08:27:18.090

在您的查询中更改`SLECT`为`SELECT`

# java - 返回元音

> ID：15848603
> 
> 赞同：0
> 
> 时间：2013-04-06T08:18:20.573
> 
> 标签：java

我是Java的初学者，我正在练习练习。

但是我被这个问题绊倒了。

编写一个名为的方法，该方法`isVowel`返回 a 是否`String`为元音（不区分大小写，包含 a、e、i、o 或 u 的单字母字符串）。

```
public static boolean isVowel(String word){

   for(int i=0;i<word.length();i++){

    char vowels=word.charAt(i);
        if(vowels== 'a'|| vowels =='e' || vowels=='i'|| vowels == 'o' ||  vowels == 'u'|| vowels== 'A'|| vowels =='E' || vowels=='I'|| vowels == 'O' ||  vowels == 'U' ){
           return true;
        } 

   }
    return false;
} 
```

这段代码有效，但是当我测试它的“你好”时。它不再起作用了。我理解这是因为条件是字符，所以它一个一个地循环而不是整个单词。但我无法弄清楚。如果有人会给我提示而不是回答，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-30T22:21:00.797

这是您正在寻找的解决方案

```
public static boolean isVowel(String x){

    String y=x.toLowerCase();
    if(y.equals("a"))
        return true;
    else if(y.equals("e"))
        return true;
    else if(y.equals("i"))
        return true;
    else if(y.equals("o"))
        return true;
    else if(y.equals("u"))
        return true;
    else 
        return false;

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:22:03.810

你的问题很混乱。一个字符串可能有一个元音，但唯一正确的单字母英文“单词”是“I”。

此方法应命名为“hasVowel”或“c​​ontainsVowel”。在这种情况下，遍历每个字母并在它有元音时返回 true 是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:22:42.453

如果您只需要检查您的字符串是否是元音，而不是包含元音，您可以编写如下内容：

```
public static boolean isVowel(String word){
    if (word.length()!=1) return false;
    char vowels=word.toLowerCase().charAt(0);
    if(vowels== 'a'|| vowels =='e' || vowels=='i'|| vowels == 'o' ||  vowels == 'u'){
       return true;
    } 
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T08:24:27.117

鉴于您对函数的定义，a`single letter`是元音，这应该有效。

```
public class StackOverflowAnswer {

    public static void main(String[] args) {
        System.out.println(isVowel("a")); //Returns true
        System.out.println(isVowel("b")); //Returns false
        System.out.println(isVowel("Obama")); //Returns false
        System.out.println(isVowel("ae")); //Returns false, not single letter

    }

    public static boolean isVowel(String word){

           String[] vowels = {"a","e","i","0","u"};

           return Arrays.asList(vowels).contains(word.toLowerCase());
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T19:53:06.357

下面的方法对我有用。

```
public static boolean isVowel(String str) {
    if (str.equalsIgnoreCase("a")) {
        return true;
    } else if (str.equalsIgnoreCase("e")) {
        return true;
    } else if (str.equalsIgnoreCase("i")) {
        return true;
    } else if (str.equalsIgnoreCase("o")) {
        return true;
    } else if(str.equalsIgnoreCase("u")){
        return true;
    } else {
        return false;
    }
} 
```

# android - 避免在发布前每次都向用户请求许可（和登录）

> ID：15848605
> 
> 赞同：0
> 
> 时间：2013-04-06T08:18:32.070
> 
> 标签：android, facebook

我的应用程序的概念是要求用户首次使用 Facebook 登录，一旦用户登录，他就可以发送消息，这些消息将发布到用户的 Facebook 墙上。

问题是，假设用户今天登录，几天后，使用想要发送消息。现在，当我调用 `Session.getActiveSession()`它时，它将返回 null，并且我必须再次重新打开会话，这涉及再次询问用户的许可并显示 facebook 登录屏幕。

因此，我想知道是否有保存会话，这样一旦用户登录一次，就无需再次重新登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:17:18.887

默认情况下，会话保存在令牌缓存中（存储在用户首选项中），除非您在代码中的某处调用 session.closeAndClearTokenInformation，否则“新”会话应该没问题（它应该在没有任何用户交互的情况下获取缓存数据）。

# php - 如何在php中将变量从一个文件传递到另一个文件

> ID：15848611
> 
> 赞同：0
> 
> 时间：2013-04-06T08:19:17.417
> 
> 标签：php, html, sql

我正在从我的 SQL 数据库中调用一个值，就像这样

```
echo "<td>" . $row['name'] . "</td>"; 
```

然后我试图在另一个文件中读取该值

```
$order_content .=  "<td>" . $_SESSION['5050duckdown'][$key]['name'] . "</td>"; 
```

[正如您在此处](https://i.stack.imgur.com/80CcT.png)看到的，我在传递数据的其他部分遇到了一些问题。它对我的应用程序的一部分有所帮助，但我无法将其复制到其他变量。任何帮助将不胜感激，我已经坚持了很长时间了，现在我不知道该怎么办..

更新：订单

```
<html>
<head>
<title>Duvets & Pillows - Contact Us</title>
<meta name="Description" content="To purchase high quality curtain fabric, duvets, cushions, blinds and pillows. Also fabric for upholstery.">
<meta name="Keywords" content="Curtains, duvets, cushions, blinds, pillows, upholstery, fabric">
<meta name="verify-v1" content="kJvtha3o1pD/wr0uhRW2cxZqbf5YFn4psvLGt6xwqtg=" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body class="mainBody">
<table align="center" border="0" width="780" height="100%" cellspacing="0" cellpadding="0">
    <tr>
        <td height="63"><img src="images/Interface/topbanner.jpg" alt="" width="780" height="63"></td>
    </tr>
    <tr>

        <td height="63" bgcolor="#233368"><a href="http://www.homefabrics.co.nz"><img src="images/Interface/logo-panel.gif" border="0"></a></td>

    </tr>
    <tr>
        <td valign="top"><table border="0" height="100%" cellspacing="0" cellpadding="0">
    <tr>
        <td width="158" valign="top" bgcolor="#233368" style="width: 158px; border-width: 1px 0px 0px 0px; border-color: #fff; border-style: solid;"><span class="mainmenu"><a href="Page-page=1.php.html">Home</a></span><br><span class="mainmenu"><a href="Page-page=2.php.html">About Us</a></span><br><span class="mainmenu"><a href="Page-page=3.php.html">About Feather & Down</a></span><br><span class="mainmenu"><a href="Page-page=5.php.html">Duvets</a></span><br><span class="mainmenu"><a href="Page-page=8.php.html">Goose Down Pillows</a></span><br><span class="mainmenu"><a href="Page-page=9.php.html">Feather Beds</a></span><br><span class="mainmenuon">Contact Us</span></td>
        <td width="100%" valign="top" class="borderrightbottom" style="padding: 30px 40px 30px 40px;">
        <h1>Contact Us</h1>
        <p><b>HOME FABRICS LIMITED</b></p>
        <p><b>Free delivery nationwide.</b></p>
        <p>Telephone: &nbsp;09 486 1103<br />
        Facsimile: 09 489 6136.<br />
        Email: <a href="mailto:sales@homefabrics.co.nz">sales@homefabrics.co.nz</a></p><p>Website:&nbsp;<a href="http://www.homefabrics.co.nz/">www.homefabrics.co.nz</a></p><p>28 Hurstmere Road<br />PO Box 33-024<br />Takapuna Beach<br />Auckland</p><h2>ORDER FORM</h2><br /> 

        <p><i>Required fields are marked with</i> <b>*</b></p>

<form action="orderformDNP.php" method="post"
onsubmit="document.getElementById('myButton').disabled=true;
document.getElementById('myButton').value='Submitting...';"
>

<table width="496" border="0" style="border-width: 1px; border-color:#E5E5E5;
border-style: solid;">
    <tr>
        <td width="40%">
            Name: *
        </td>
        <td width="60%">
            <input type="text" name="yourname" />
        </td>
    </tr>
    <tr>
        <td width="40%">
            Phone Number: *
        </td>
        <td width="60%">
            <input type="text" name="phonenumber" />
        </td>
    </tr>
    <tr>
        <td width="40%">
            Mobile Number: 
        </td>
        <td width="60%">
            <input type="text" name="mobilenumber" />
        </td>
    </tr>
    <tr>
        <td width="40%">
            E-mail: *
        </td>
        <td width="60%">
            <input type="text" name="email" />
        </td>
    </tr>
    <tr>
        <td width="40%">
            Deliver Address: *
        </td>
        <td width="60%">
            <textarea name="deliveryaddress" rows="3" cols="40"></textarea>
        </td>
    </tr>
 </table>
 </br>

<!-- this is the ordering part of the form --!>

 <h3>Duvets</h3>

<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM 5050goosedown ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='30%'><b>50/50 Goose Down:</b></th>
<th width='30%'><i>Normal Fill / Our Fill</i></th>
<th width='12.5%'><i>Old Price</i></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  if (($row['width'] ==0) && ($row['height']== 0)){
    echo "<td>" . $row['name'] . "</td>";
  }
  else {
    echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  }
  echo "<td>" . $row['normal_fill'] . "/" . $row['our_fill'] . "</td>";
  if ($row['old_price'] !=0){
    echo "<td>" . $row['old_price'] . "</td>";
  }
  else {
    echo "<td></td>";
  }
  echo "<td>" . $row['price'] . "</td>";

  echo '<td><select name="5050goosedown[' . $row['goosedown_id'] . ']">'
                ."<option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>
</br></br>
<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM 5050duckdown ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='30%'><b>50/50 Duck Down:</b></th>
<th width='30%'><i>Normal Fill / Our Fill</i></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  if (($row['width'] ==0) && ($row['height']== 0)){
    echo "<td>" . $row['name'] . "</td>";
  }
  else {
    echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  }
  echo "<td>" . $row['normal_fill'] . "/" . $row['our_fill'] . "</td>";
  echo "<td>" . $row['price'] . "</td>";
  echo '<td><select name="5050duckdown[' . $row['duckdown_id'] . ']">'
                ."<option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>
</br></br>
<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM 955goosedown ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='30%'><b>95/5 Goose Down:</b></th>
<th width='30%'><i>Normal Fill / Our Fill</i></th>
<th width='12.5%'><i>Old Price</i></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  if (($row['width'] ==0) && ($row['height']== 0)){
    echo "<td>" . $row['name'] . "</td>";
  }
  else {
    echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  }
  echo "<td>" . $row['normal_fill'] . "/" . $row['our_fill'] . "</td>";
  if ($row['old_price'] !=0){
    echo "<td>" . $row['old_price'] . "</td>";
  }
  else {
    echo "<td></td>";
  }
  echo "<td>" . $row['price'] . "</td>";
  echo '<td><select name="955goosedown[' . $row['955goosedown_id'] . ']">'
                ."<option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>
</br>
<h3>Pillows</h3>

<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM goosedownpillows ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='62.5%'><b>Goose Down Pillows:</b></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  echo "<td>" . $row['name'] ."</td>";
  echo "<td>" . $row['price'] . "</td>";
  echo '<td><select name="goosedownpillows[' . $row['goosedownpillows_id'] . ']">'
                ."<option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>
</br>
<h3>Feather Mattress Toppers</h3>

<?php

//Start session
    //session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

$result = mysql_query("SELECT * FROM feathermattresstoppers ORDER BY price ASC");

echo "<table border='0' width='496'>
<tr>
<th width='62.5%'><b>95/5 Mattress Toppers:</b></th>
<th width='12.5%'><i>Old Price</i></th>
<th width='12.5%'><i>Price</i></th>
<th width='12.5%'><i>Quantity</i></th>
</tr>";

$i = 1;
while($row = mysql_fetch_array($result)){
    echo "<tr bgcolor='#F5F5F5'>";
  if($i%2 == 0){
      echo "<tr bgcolor='#E5E5E5'>";
  }
  $i++;

  if (($row['width'] ==0) && ($row['height']== 0)){
    echo "<td>" . $row['name'] . "</td>";
  }
  else {
    echo "<td>" . $row['name'] . "   -" . $row['width'] . "/" . $row['height'] .  "</td>";
  }
  if ($row['old_price'] !=0){
    echo "<td>" . $row['old_price'] . "</td>";
  }
  else {
    echo "<td></td>";
  }
  echo "<td>" . $row['price'] . "</td>";
  echo '<td><select name="feathermattresstoppers[' . $row['feathermattresstoppers_id'] . ']">'
                ."<option value=''> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select>
        </td>";
  echo "</tr>";
  }
echo "</table>";

?>

<p><b>Additional Info:</b><br />
<textarea name="comments" rows="10" cols="40"></textarea></p>
</br></br>

Access code: <input type="text" name="code" /><br />
Please enter <i>MYCODE</i> above. </br></br>

<input type="submit" value="Submit" id="myButton" />

        </td>

    </tr>
</table>

</td>
    </tr>
</table>
</body>
</html> 
```

**电子邮件表格**（这是为了从订单表格中接收值）

```
<?php
    session_start();

    $body_items = '';
    $total_price = 0;

    /* Set Redgraves Email address, so they receive the orders  */
    $myemail  = "kcwebz@gmail.com";

    /* Check all form inputs using check_input function */
    $yourname = check_input($_POST['yourname'], "Enter your name");
    $phonenumber = check_input($_POST['phonenumber'], "Enter your phone number");
    $mobilenumber = check_input($_POST['mobilenumber']);
    $email    = check_input($_POST['email'], "Enter your E-mail address");
    $deliveryaddress = check_input($_POST['deliveryaddress'], "Enter your delivery address");

    $comments = check_input($_POST['comments']);

    $random = substr(number_format(time() * rand(),0,'',''),0,10);

    $goosedown_id = ($_POST[$row['goosedown_id']]); 

    if (strtolower($_POST['code']) != 'mycode') 
    {
        die('Wrong access code');
    }

    /* If e-mail is not valid show error message */
    if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
    {
        show_error("E-mail address not valid");
    }

    /* If phone number has characters show error message */
    if (preg_match("/\D/",$phonenumber))
    {
        die("Please enter numbers only for Phone Number");
    }

    /* If mobile number has characters show error message */
    if (preg_match("/\D/",$mobilenumber))
    {
        die("Please enter numbers only for Mobile Number");
    }

    // 5050duckdown
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['5050goosedown'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['5050goosedown'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['5050goosedown'][$key]['name'] . "   -" . $_SESSION['5050goosedown'][$key]['width'] . "/" . $_SESSION['5050goosedown'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['5050goosedown'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['5050goosedown'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>50/50 Goose Down:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }

    //////////////
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['5050duckdown'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['5050duckdown'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['5050duckdown'][$key]['name'] . "   -" . $_SESSION['5050duckdown'][$key]['width'] . "/" . $_SESSION['5050duckdown'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['5050duckdown'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['5050duckdown'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>50/50 Duck Down:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }

    /////////////////
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['955goosedown'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['955goosedown'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['955goosedown'][$key]['name'] . "   -" . $_SESSION['955goosedown'][$key]['width'] . "/" . $_SESSION['955goosedown'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['955goosedown'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['955goosedown'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>95/5 Goose Down:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }

    //////
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['goosedownpillows'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['goosedownpillows'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['goosedownpillows'][$key]['name'] . "   -" . $_SESSION['goosedownpillows'][$key]['width'] . "/" . $_SESSION['goosedownpillows'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['goosedownpillows'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['goosedownpillows'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>Goose Down Pillows:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }

    //////
    $flag = 0;
    $i = 1;
    $order_content = '';
    foreach ($_POST['feathermattresstoppers'] as $key => $value ) {
        if ($value > 0) {
            $flag = 1;
            if($i%2 == 0)
                $order_content .= "<tr bgcolor='#E5E5E5'>";
            else
                $order_content .= "<tr bgcolor='#F5F5F5'>";
            $i++;

            if (($row['width'] ==0) && ($row['height']== 0))
                $order_content .=  "<td>" . $_SESSION['feathermattresstoppers'][$key]['name'] . "</td>";
            else
                $order_content .=  "<td>" . $_SESSION['feathermattresstoppers'][$key]['name'] . "   -" . $_SESSION['feathermattresstoppers'][$key]['width'] . "/" . $_SESSION['feathermattresstoppers'][$key]['height'] .  "</td>";

            $order_content .= "<td>" . $_SESSION['feathermattresstoppers'][$key]['price'] . "</td>";

            $order_content .= "<td>" . $value . "</td>";

            $sub = $_SESSION['feathermattresstoppers'][$key]['price'] * $value;
            $total_price += $sub;
            $order_content .= "<td>" . $sub . "</td></tr>";
        }
    }

    if ($flag == 1) {
        $body_items .= "<table border='0' width='600'>
                            <tr>
                                <th width='30%'><b>95/5 Mattress Toppers:</b></th>
                                <th width='12.5%'><i>Item Price</i></th>
                                <th width='12.5%'><i>Quantity</i></th>
                                <th width='12.5%'><i>Price</i></th>
                            </tr>";
        $body_items .= $order_content;
        $body_items .= '</table><br /><br />';
    }
    $body_items .= "<br /><b>Total: $total_price</b></b></b>";

/*-------------------First Email--------------------*/

    /* Set Email for Redgraves, so they can for-full the order form */
    $message = "A order form has been submitted by: $yourname<br /><br />

    Order number :<u>$random</u><br /><br />

    <b>Name:</b> $yourname<br />
    <b>E-mail:</b> $email<br />
    <b>Phone Number:</b> $phonenumber<br />
    <b>Mobile Number:</b> $mobilenumber<br />
    <b>Delivery Address:</b> $deliveryaddress<br />
    <b>Comments:</b> $comments<br /><br />

    $body_items

    <br /><br />**End of message**
    ";

/* Send the message using mail() function */
    $header= "MIME-Version: 1.0\r\n";
    $header.= "Content-type: text/html\r\n";
    mail($myemail, "Order Submitted", $message, $header);

    /* Send the message using mail() function */
    //mail($myemail, "Order Submitted", $message);

/*---------------Second Email---------------------*/    

    /* This email is to confirm the order and act as a receipt to the purchaser */
    $respond_message = "Order Completed<br /><br />

    Your order has been submitted! details are as follows<br /><br />

    <b>Name:</b> $yourname<br />
    <b>E-mail:</b> $email<br />
    <b>Phone Number:</b> $phonenumber<br />
    <b>Mobile Number:</b> $mobilenumber<br />
    <b>Delivery Address:</b> $deliveryaddress<br />
    <b>Comments:</b> $comments<br /><br />

    $body_items

    <br /><b>Reference Number:</b> <u>$random</u><br /><br />

    Please make payment using the refrence number above within 7 working days or your order will be canceled <br />
    ASB 000-0000-0000-00 ";

    /* Send the message using mail() function */
    $headers= "MIME-Version: 1.0\r\n";
    $headers.= "Content-type: text/html\r\n";
    mail($email, "Thank you for your order", $respond_message, $headers);

    /* Redirect visitor to the thank you page */
    header('Location: thankyou.html');
exit();

/* Functions we used */
function check_input($data, $problem='')
{
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    if ($problem && strlen($data) == 0)
    {
        show_error($problem);
    }
    return $data;
}

function show_error($myError)
{
?>
    <html>
    <body>

    <b>Please correct the following error:</b><br />
    <?php echo $myError; ?>

    </body>
    </html>
<?php
exit();
}
?> 
```

订单应该生成一个像这样的表格......你可以看到它缺少价值。

![在此处输入图像描述](https://i.stack.imgur.com/80CcT.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:26:35.090

> 您有 2 个选项：
> 
> 您可以创建 cookie 或会话，也可以 tr 全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:44:10.233

像这样使用这个代码。

```
<?php    
session_start();

  //print_r($_SESSION);
  echo "<td>" . $row['name'] . "</td>\n";
  $_SESSION['name'] = $row['name'];

?> 
```

并在其他文件中使用它。

```
$order_content .= "<td>" . $_SESSION['name'] . "</td>\n"; 
```

可能是它的作品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:34:45.483

看一下这个：

```
echo "<td>" . $row['name'] . "</td>\n";
$_SESSION['name'] = $row['name']; 
```

* * *

```
$order_content .= "<td>" . $_SESSION['5050duckdown'][$key]['name'] . "</td>\n"; 
```

但请检查代码`$_SESSION['5050duckdown'][$key]['name']`是否正确。如果没有，那就碰碰运气吧`$_SESSION['5050duckdown'] . $_SESSION[$key] . $_SESSION['name']`

但是请不要忘记`session_start();`开始标记之前的函数`<html>`，并且我们尝试将行分配给会话的第一个文件必须先运行，然后再运行会话分配给变量的第二个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T10:51:22.657

你也可以用？操作员

```
 Ex. 
   // order_form.php

   $id = 7;          //and you want sent on order_edit.php
   order_edit.php?id=$id;      // set variable in anchor tag or where you want

  // order_edit.php 

  $id = $_GET['id'];       // get value of id from url 
```

# php - 提交表单时如何获取 asciimath 公式的图像

> ID：15848620
> 
> 赞同：1
> 
> 时间：2013-04-06T08:21:12.647
> 
> 标签：php, tinymce, asciimath

我正在为 tinyMCE 使用 asciimath 插件，它在输入 Tex 公式时创建图像。但是当我提交表单而不是创建的图像时，只发布输入的公式，我需要创建的图像并需要保存在数据库中。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:56:01.910

使用这个插件的重点是消除生成图像的需要。

相反，您可以使用[MathJax](http://www.mathjax.org/)，这是一个免费的开源 JavaScript 显示引擎，可以将此公式转换回图像。

# list - Prolog递归程序返回太多结果

> ID：15848621
> 
> 赞同：1
> 
> 时间：2013-04-06T08:21:16.430
> 
> 标签：list, recursion, prolog

我有一个 Prolog 程序，该程序旨在查找列表中可被三或五整除的所有数字的平方和。但是它返回多个结果，我不知道为什么。

```
% --divisibility tests--

div_test(N):-
    % divisible by three?
    0 is N mod 3.
div_test(N):-
    % divisible by five?
    0 is N mod 5.

% sum of an empty list is zero (base case)
square_sum([], Sum):-
    Sum is 0.

% --recursive cases
square_sum([Head | Tail], Sum) :-
    div_test(Head),
    square_sum(Tail, TempSum),
    Sum is Head*Head + TempSum.

square_sum([Head | Tail], Sum) :-
    square_sum(Tail, TempSum),
    Sum is TempSum. 
```

给定以下输入：

```
?-square_sum([1,2,3,4,5],Sum). 
```

我得到以下输出：

```
Sum = 34 ;
Sum = 9 ;
Sum = 25 ;
Sum = 0. 
```

34 是我应该得到的唯一输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:15:52.540

```
% --recursive cases
square_sum([Head | Tail], Sum) :-
    div_test(Head),
    square_sum(Tail, TempSum),
    Sum is Head*Head + TempSum.

square_sum([Head | Tail], Sum) :-
    square_sum(Tail, TempSum),
    Sum is TempSum. 
```

在第二条规则中，您不测试 div_test 是否成功。您可以在第一条规则中的 div_test(Head) 之后**添加剪切(!) 或在第二条规则中添加****\+div_test(Head)**。

[您使用 SWI-Prolog，因此您可以使用在http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)找到的模块 lambda.pl 并编写

```
:- use_module(library(lambda)).
div_test(N):-
    % divisible by three?
    0 is N mod 3.
div_test(N):-
    % divisible by five?
    0 is N mod 5.

square_sum(Lst, Sum) :-
    foldl(\X^Y^Z^((div_test(X); div_test(X))
              ->  Z is Y + X*X
              ;   Z = Y), Lst, 0, Sum). 
```

# java - 使用 Integer.MAX_VALUE 条目创建 ArrayBlockingQueue 时出现内存不足错误

> ID：15848624
> 
> 赞同：2
> 
> 时间：2013-04-06T08:21:53.807
> 
> 标签：java, performance, memory-management, collections, capacity

我一直在使用`LinkedBlockingQueue`，最近`ArrayBlockingQueue`由于插入性能缓慢而将其更改为。在那之后我得到了显着的性能提升。但是，我的代码有时会引发内存不足错误：

**我的 Java 代码**

```
ArrayBlockingQueue<String> s = new ArrayBlockingQueue<String>(Integer.MAX_VALUE); 
```

我查看了`ArrayBlockingQueue`源代码。真的，我很震惊——它`object[]`为给定的初始容量分配了一个。这就是内存不足错误的原因。

**ArrayBlockingQueue 源代码**

```
public ArrayBlockingQueue(int capacity, boolean fair) {
    if (capacity <= 0)
        throw new IllegalArgumentException();
    this.items = (E[]) new Object[capacity];
    lock = new ReentrantLock(fair);
    notEmpty = lock.newCondition();
    notFull =  lock.newCondition();
} 
```

这不会猜测初始容量或创建具有最小容量的队列。因为高峰时间和正常时间会有所不同。如果我提供最小容量，队列将在高峰时段立即填满。如果我给出最大容量，则会出现内存不足错误，并且我不想在插入元素之前分配 object[]。

请提出任何替代方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T08:23:23.267

删除构造函数的参数。为什么您的队列需要这么多容量？从一个合理的数字开始，比如 10 或 100 或 1000。

这条线很荒谬：

```
ArrayBlockingQueue<String> s = new ArrayBlockingQueue<String>(Integer.MAX_VALUE); 
```

您不需要 2147483647 的初始容量。这只是队列的 2GB！

# hibernate - 引起：org.apache.openjpa.lib.jdbc.ReportingSQLException：用户缺少权限

> ID：15848633
> 
> 赞同：2
> 
> 时间：2013-04-06T08:22:58.563
> 
> 标签：hibernate, jpa, ejb

似乎我不知道自己缺少什么。运行 JUnit 测试后，得到了这个

`Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: user lacks privilege or object not found: DTB_TABLENAME {Insert into ....`

这与我的数据库有关吗？还是代码本身？

这里有一些代码：

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="myrestapi" transaction-type="JTA">
    <class>com.rest.entity.TableNameBean</class>

    <jta-data-source>MyDatasource</jta-data-source>
    <properties>
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="hibernate.show_sql" value="true" />
    </properties>

</persistence-unit> 
```

**我的通用道**

```
public abstract class MyGenericDao<T, ID extends Serializable> implements GenericDao<T, ID> {

private Class<T> persistentClass;

@SuppressWarnings("unchecked")
public MyGenericDao() {
    this.persistentClass = (Class<T>) ((ParameterizedType) getClass()
            .getGenericSuperclass()).getActualTypeArguments()[0];
}

public abstract EntityManager getEntityManager();

public Class<T> getPersistentClass() {
    return persistentClass;
}
//....
//....

@SuppressWarnings("unchecked")
public T findById(ID id, boolean lock) {
    if(lock)
        return getEntityManager().find(getPersistentClass(), id, LockModeType.PESSIMISTIC_WRITE);
    else
        return getEntityManager().find(getPersistentClass(), id);
}

public T makePersistent(T entity) {
    getEntityManager().persist(entity);
    return entity;
} 
```

**[表名]道**

```
 @Singleton
public class TableNameDao extends GenericJpaDao<TableNameBean, Integer>{

@PersistenceContext(unitName="myrestapi")
private EntityManager em;

@Override
public EntityManager getEntityManager() {
    return em;
}
  } 
```

然后，我的**TableNameDaoTest**

```
public class TableNameDaoTest {

private static EJBContainer container;

@EJB
private TableNameDao tableNameDao;

@Test
public void testFindById() {
    TableNameBean tableBean = tableNameDao.findById(1, false);
    assertNotNull(tableBean);
}

@Test
public void testFindAll() {
    fail("Not yet implemented");
}

@Test
public void testMakePersistent() {
    TableNameBean tableBean = new TableNameBean();
    tableBean.setLoginName("testname");
    tableBean.setPassword("password");

    tableNameDao.makePersistent(tableBean);
    assertNotNull(tableBean.getAccountId());
}

@BeforeClass
public static void start() {
    container = EJBContainer.createEJBContainer();
}

@Before
public void inject() throws NamingException {
    container.getContext().bind("inject", this);
}

@AfterClass
public static void stop() {
    container.close();
} 
```

请问有这方面的帮助吗？非常感谢。顺便说一句，我在 TomEE 上运行，我的数据库也是 MySql。我还在`tomee.xml`. 我还将它导入到我的服务器文件夹并发布。

# ruby - RVM 无法识别 gemset？

> ID：15848635
> 
> 赞同：-2
> 
> 时间：2013-04-06T08:23:14.283
> 
> 标签：ruby, gem, rvm, gemset

创建 gemset 后，cd 出并返回文件夹会抛出 gemset 不存在的错误。

这是我的 shell 会话

```
dewet-mac:~ dewet$ cd ruby/routerscript/
Gemset 'routerscript' does not exist, 'rvm gemset create routerscript' first, or append '--create'.
dewet-mac:routerscript dewet$ rvm gemset create routerscript
gemset created routerscript => /Users/dewet/.rvm/gems/ruby-2.0.0-p0@routerscript
dewet-mac:routerscript dewet$ cd ..
dewet-mac:ruby dewet$ cd routerscript/
Gemset 'routerscript' does not exist, 'rvm gemset create routerscript' first, or append '--create'. 
```

当我签`/Users/dewet/.rvm/gems/`入时，gem 存在`ruby-2.0.0-p0@routerscript`

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:19:45.713

该错误是对未找到 .rvmrc 项目文件中指定的 Gemset 的响应。编辑文件以包含`rvm ruby-2.0.0-p0@routerscript`. 那解决了它。

这意味着沉默`use`：

```
rvm use ruby-2.0.0-p0@routerscript 
```

要允许自动创建 gemset，请使用`--create`：

```
rvm --create ruby-2.0.0-p0@routerscript 
```

为了避免信任而不是创建 gemset，请使用`.ruby-version`/ `.ruby-gemset`：

```
rvm rvmrc to .ruby-version 
```

它会自动将您迁移`.rvmrc`到新格式。

RVM 网站上的更多详细信息：[https ://rvm.io](https://rvm.io)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-15T23:17:13.470

如果您刚刚安装了 RVM，请确保重新启动终端。

# javascript - window.jQuery 还是 jQuery？

> ID：15848638
> 
> 赞同：4
> 
> 时间：2013-04-06T08:23:21.903
> 
> 标签：javascript, jquery, html, plugins, zepto

```
(function($) {
// plugin code
})(window.jQuery); 
```

似乎这段代码的效果几乎相同，为：

```
(function($) {
// plugin code
})(jQuery); 
```

我应该使用`window.jQuery`还是`jQuery`函数参数？是否有意义？

Zepto 也一样，我看到很多人`window.Zepto`在他们的插件中使用，但代码也适用于`Zepto`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T08:26:53.827

没有区别，`window`就是客户端 JavaScript 中的*超级*全局对象，所有在全局上下文中定义的函数和变量都是`window`对象的方法和属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T08:28:07.323

就像`$(document).ready(function(){..})`and一样`$(function(){..})`。

它用于设置 jQuery 闭包。目的是允许变量 $ 用作 jQuery 的快捷方式，而不会与也使用 $ 作为变量名的其他库和自定义函数冲突

jQuery 插件作者经常使用这种技术来授权他们的插件。检查[文档](http://docs.jquery.com/Plugins/Authoring)以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T08:25:20.917

`window.jQuery`是在窗口全局对象中定义的对象。`window`可以跳过。当跳过它应该是我们window.jQuery。大多数人不使用window.jQuery，而是使用`jQuery`或简单地使用`$`并且更容易理解也减少了源代码大小。

```
window.jQuery = window.$ = jQuery; 
```

[你可以在这里](http://jqfundamentals.com/chapter/jquery-basics)阅读更多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-14T13:30:53.007

它们是有区别的。`!!window.jQuery`如果未定义 jQuery，将返回 false，如果未定义 jQuery，`!!jQuery`将抛出错误。

# azure - 数据库导出引发 SystemOutOfMemory 异常

> ID：15848648
> 
> 赞同：1
> 
> 时间：2013-04-06T08:24:34.237
> 
> 标签：azure, azure-sql-database

我正在尝试使用 Azure 门户将 SQL Azure 数据库导出到 Azure 存储。

由于某种原因，每次尝试导出数据库时都会出现以下错误：

服务操作过程中遇到错误。无法从数据库中导出架构和数据。发生一个或多个错误。发生一个或多个错误。发生一个或多个错误。发生一个或多个错误。发生一个或多个错误。引发了“System.OutOfMemoryException”类型的异常。

此数据库的先前备份已生成 112 MB 的 bacpac 文件。该数据库当前大小为 2.62 GB。

其他较小的数据库今天已成功备份，只是这个较大的数据库不断失败并出现此错误。

有什么想法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T10:21:41.557

现在问题已经解决了。

该门户一直是我们执行备份的正常途径，因为它执行了许多备份而没有任何问题。然而，由于失败提供的只是 OutOfMemoryException，我们回到了 SSMS 备份选项[MSDN 文章](http://msdn.microsoft.com/en-us/library/windowsazure/jj650016.aspx)（在提出这个问题之前我们应该做的事情），虽然仍然失败，但强调问题是数据相关而不是门户.

实际问题与单个表中的单个 xml 列有关 - SSMS 突出显示了失败的表。值得庆幸的是，数据是暂时的，应该定期删除，不需要备份。

此后，我们执行了所需的维护，因此能够进行完整备份。

# batch-file - 如何在 endlocal 命令后保留变量

> ID：15848655
> 
> 赞同：0
> 
> 时间：2013-04-06T08:25:34.787
> 
> 标签：batch-file, environment-variables

谢谢内特。有用。
但现在我需要此脚本的输出变量以供以后使用。
我需要2个输出。首先是作为整数输出的计数变量，其次是字符串变量，它等于“word”中的最后一个字符串字符。
所以，我需要这 2 个变量，正如您在“按任意键继续...”之前在完成脚本的最后一行中看到的那样。
1 个最后一个整数变量和 1 个最后一个字符串变量。

我需要这 2 个变量以供以后在此脚本中编写脚本。
我怎么能拥有它？这是一个从昨天开始工作的脚本。

```
@ECHO OFF
:input
set /p word=input your word:
if not defined word goto input
(ECHO %word%)> tempfile.txt
FOR %%x IN (tempfile.txt) DO ( SET /A lenght=%%~zx - 2 )

del tempfile.txt
echo %word% got %lenght% characters
setlocal enabledelayedexpansion

for /l %%m in (1,1,!lenght!) do (
  set /a count=%%m
  set /a index=%%m-1
  call echo !count! %%word:~!index!,1%%
) 

(call echo %%word:~!index!,1%%)>tf.txt

for /f "tokens=*" %%a in (tf.txt) do (
set line=%%a
set char=!line:~0,1!

)

pause

echo %count% %char%

endlocal

pause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:00:27.443

[这里](http://www.dostips.com/DtTutoFunctions.php#FunctionTutorial.ReturningLocalVariables)记录了很多方法来展示如何做到这一点，但这`endlocal & set global=local`是我最喜欢的。

从我认为你想要的来看...

```
setlocal enabledelayedexpansion
for /l %%m in (1,1,!lenght!) do (
    set /a count=%%m
    set /a index=%%m-1
    call echo !count! %%word:~!index!,1%%
    set laststring=%word:~!index!,1%
) 
(
    endlocal
    set count=%count%
    set laststring=%laststring%
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:37:06.963

试试这个技术来拆除`setlocal enabledelayedexpansion`/的墙`endlocal`：

```
@echo off&setlocal
set "word=abcdefghij"
set /a lenght=10

for /l %%m in (1,1,%lenght%) do (
    set /a $count=%%m
    set /a index=%%m-1
    setlocal enabledelayedexpansion
    call echo !$count! %%word:~!index!,1%%
    call set "$laststring=%%word:~!index!,1%%"
    for /f %%i in ('set $') do (if "!"=="" endlocal)& set "%%i"
)
echo( 
echo !$count! !$laststring!
echo %$count% %$laststring% 
```

（[来源](https://stackoverflow.com/a/13772031/2098699)）

# python - 如何 ConfigParse 为相同键保留多个值的文件？

> ID：15848674
> 
> 赞同：17
> 
> 时间：2013-04-06T08:28:10.380
> 
> 标签：python, python-2.7, configparser

我需要能够使用`ConfigParser`读取同一个键的多个值。示例配置文件：

```
[test]
foo = value1
foo = value2
xxx = yyy 
```

在“标准”使用中`ConfigParser`，将有一个`foo`带有 value 的键`value2`。但我需要解析器读取这两个值。

[在重复键上](https://stackoverflow.com/questions/5396144/python-config-parser-duplicate-key-support/5396653#5396653)的条目之后，我创建了以下示例代码：

```
from collections import OrderedDict
from ConfigParser import RawConfigParser

class OrderedMultisetDict(OrderedDict):
    def __setitem__(self, key, value):

        try:
            item = self.__getitem__(key)
        except KeyError:
            super(OrderedMultisetDict, self).__setitem__(key, value)
            return

        print "item: ", item, value
        if isinstance(value, list):
            item.extend(value)
        else:
            item.append(value)
        super(OrderedMultisetDict, self).__setitem__(key, item)

config = RawConfigParser(dict_type = OrderedDict)
config.read(["test.cfg"])
print config.get("test",  "foo")
print config.get("test",  "xxx")

config2 = RawConfigParser(dict_type = OrderedMultisetDict)
config2.read(["test.cfg"])
print config2.get("test",  "foo")
print config.get("test",  "xxx") 
```

第一部分（带有`config`）读取我们“通常”的配置文件，只留下（覆盖/删除另一个值）`value2`的`foo`值，我得到以下预期输出：

```
value2
yyy 
```

第二部分 ( `config2`) 使用我的方法将多个值附加到列表中，但输出是

```
['value1', 'value2', 'value1\nvalue2']
['yyy', 'yyy'] 
```

如何摆脱重复值？我期望输出如下：

```
['value1', 'value2']
yyy 
```

或者

```
['value1', 'value2']
['yyy'] 
```

（我不介意每个值是否都在列表中......）。欢迎任何建议。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T08:57:48.073

经过一个小的修改，我能够实现你想要的：

```
class MultiOrderedDict(OrderedDict):
    def __setitem__(self, key, value):
        if isinstance(value, list) and key in self:
            self[key].extend(value)
        else:
            super(MultiOrderedDict, self).__setitem__(key, value)
            # super().__setitem__(key, value) in Python 3

config = ConfigParser.RawConfigParser(dict_type=MultiOrderedDict)
config.read(['a.txt'])
print config.get("test",  "foo")
print config.get("test",  "xxx") 
```

输出：

```
['value1', 'value2']
['yyy'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-15T09:11:34.003

接受的答案中断`config.sections()`，它总是返回一个空列表（用 Python 3.5.3 测试）。替换`super(OrderedDict, self).__setitem__(key, value)`为`super().__setitem__(key, value)`修复了这个问题，但现在`config.get(section, key)`返回一个连接的字符串，不再是字符串列表。

我的解决方案是：

```
class ConfigParserMultiValues(collections.OrderedDict):

    def __setitem__(self, key, value):
        if key in self and isinstance(value, list):
            self[key].extend(value)
        else:
            super().__setitem__(key, value)

    @staticmethod
    def getlist(value):
        return value.split(os.linesep)

    config = configparser.ConfigParser(strict=False, empty_lines_in_values=False, dict_type=ConfigParserMultiValues, converters={"list": ConfigParserMultiValues.getlist})
    ...
    values = config.getlist("Section", "key") # => ["value1", "value2"] 
```

配置 INI 文件接受重复的键：

```
[Section]
    key = value1
    key = value2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-22T13:21:20.663

在 python 3.8 中，您还需要添加`strict=False`：

```
class MultiOrderedDict(OrderedDict):
    def __setitem__(self, key, value):
        if isinstance(value, list) and key in self:
            self[key].extend(value)
        else:
            super().__setitem__(key, value)

config = ConfigParser.RawConfigParser(dict_type=MultiOrderedDict, strict=False)
config.read(['a.txt'])
print config.get("test",  "foo")
print config.get("test",  "xxx") 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-09T21:35:37.143

更多示例 中的多个值`test.cfg`。

```
[test]
foo = value1
foo = value2
 value3
xxx = yyy 
```

`<whitespace>value3`附加`value3`到 foo 列表。

`ConfigParser`将列表转换为字符串。

```
/usr/lib/python2.7/ConfigParser.pyc in _read(self, fp, fpname)
    552             for name, val in options.items():
    553                 if isinstance(val, list):
--> 554                     options[name] = '\n'.join(val)
    555 
```

`value`在转换之前总是列表或字典（`MultiOrderedDict`）。

试试这个 - 用它，`config.items`工作：

```
from collections import OrderedDict
import ConfigParser

class MultiOrderedDict(OrderedDict):
    def __setitem__(self, key, value):
        if key in self:
            if isinstance(value, list):
                self[key].extend(value)
                return
            elif isinstance(value,str):
                return # ignore conversion list to string (line 554)
        super(MultiOrderedDict, self).__setitem__(key, value)

config = ConfigParser.RawConfigParser(dict_type=MultiOrderedDict)
config.read(['test.cfg'])
print config.get("test",  "foo")
print config.get("test",  "xxx")
print config.items("test") 
```

输出：

```
['value1', 'value2', 'value3']
['yyy']
[('foo', ['value1', 'value2', 'value3']), ('xxx', ['yyy'])] 
```

另一种实现`MultiOrderedDict`

```
class MultiOrderedDict(OrderedDict):
    def __setitem__(self, key, value):
        if key in self:
            if isinstance(value, list):
                self[key].extend(value)
                return
            elif isinstance(value,str):
                if len(self[key])>1:
                    return
        super(MultiOrderedDict, self).__setitem__(key, value) 
```

输出：

```
['value1', 'value2', 'value3']
yyy
[('foo', ['value1', 'value2', 'value3']), ('xxx', 'yyy')] 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-05-08T06:11:33.937

只需对[@abarnert 的答案稍作](https://stackoverflow.com/a/21275246/1633272)改动，否则它会递归调用 __setitem__ ，并且由于某种原因不会停止。

ini 文件：

```
[section]
key1   = value1
key2[] = value21
key2[] = value22 
```

Python：

```
class MultiOrderedDict(OrderedDict):
    LIST_SUFFIX = '[]'
    LIST_SUFFIX_LEN = len(LIST_SUFFIX)

    def __setitem__(self, key, value):
        if key.endswith(self.LIST_SUFFIX):
            values = super(OrderedDict, self).setdefault(key, [])
            if isinstance(value, list):
                values.extend(value)
            else:
                values.append(value)
        else:
            super(MultiOrderedDict, self).__setitem__(key, value)

    def __getitem__(self, key):
        value = super(MultiOrderedDict, self).__getitem__(key)
        if key.endswith(self.LIST_SUFFIX) and not isinstance(value, list):
            value = value.split('\n')
        return value 
```

测试：

```
def test_ini(self):
    dir_path = os.path.dirname(os.path.realpath(__file__))
    config = RawConfigParser(dict_type=MultiOrderedDict, strict=False)
    config.readfp(codecs.open('{}/../config/sample.ini'.format(dir_path), encoding="utf_8_sig"))
    self.assertEquals(config.get("section1", "key1"), 'value1')
    self.assertEquals(config.get("section1", "key2[]"), ['value21', 'value22']) 
```

# jquery - Jquery 动态追加验证

> ID：15848675
> 
> 赞同：1
> 
> 时间：2013-04-06T08:28:13.580
> 
> 标签：jquery

我有一个下拉菜单，它在更改时会在 HTML 中附加一个文本框。我想将 jQuery 验证添加到该文本框并在特定字段集 id 上附加验证。我应该遵循什么流程？

有关上下文，请参阅此[**JSFiddle**](http://jsfiddle.net/pYRj3/31/)。如果用户选择“需要更多房间或有孩子”，然后选择孩子数 > 0，则会出现一个年龄文本框。我想添加验证以确保孩子的年龄在 0 到 9 岁之间。

**HTML：**

```
<div id="guestsRooms" class="clear">
    <label class="label1" for="guestsRoomsSelect">Guests:</label>
    <span>
        <span>
            <select id="guestsRoomsSelect" name="GuestsRooms" style="width: 217;       padding: 5px">
                <option value="1-1">1 adult</option>
                <option selected="selected" value="2-1">2 adults in 1 room</option>
                <option value="3-1">3 adults in 1 room</option>
                <option value="4-1">4 adults in 1 room</option>
                <option value="2-2">2 adults in 2 rooms</option>
                <option value="0">Need more rooms or have children?</option>
            </select>
        </span>
    </span>
</div>

 <div id="roomconfig" class="roomconfig_fc">
 <div id="Addition"> 

 </div>

   <div class="btnWrap" style="clear:both;border-bottom: 0.5px solid #FFFFFF;">
<a class="addRoom"  style="background-image:none; color:darkred;height:20px; margin-left:0px" href="javascript:void(0);"><img  src="../Images/SearchBox/image1.png" class="addimage "  />
Add room</a>
</div>    
<input type="submit" value="submit">

</div> 
```

**jQuery：**

```
 $(document).ready(function(){ 
var counter = 0;
var forage = 0;
$('#roomconfig').hide();

    var index = 0;

function childage(){

$('.hc_evt_children').bind("change",function () {  

  var item=(this).id;
  // alert(item);
$parentElement = $(this).parent().parent('div');

var id = $parentElement.attr("class");
  // alert(id);
 var index1 = $("." + id + " input").size();
// alert(index1);

var requested = $(this[this.selectedIndex]).val()
//alert(requested);

 if (requested > index1) {
            for (i = index1; i < requested; i++) {
                var $ctrl = $('<input/>').attr({ type: 'text', name: 'text', value: '',style:'width:30px;' });
               var my=$(this).closest("div"); 
               my.append($ctrl);
                 }
         }
         else if (requested < index1) {
             var x = requested - 1;
               $("." + id +" input:gt(" + x + ")").remove();
          }
   if(requested==='0'){

         $("." + id + " input").remove();
   }

 });
 }
 $('#guestsRoomsSelect').change(function () {

        if ($(this).val() === '0') {

       var $var2 = '<div id="dropdown2_ ' + (counter) + ' " class="class1"> <div class="wrapadults" style="float:left"> <label class="lbl_sm" style="font-size: 0.75em" for="adults">Adults</label>'
                $var2 = $var2 + '<br/><span> <span>     <select id="adults" class="t_adults" style="margin-left:7px;margin-right:7px; border-right: 0.5px solid #FFFFFF;">      <option value="1">1</option>        <option value="2" selected="selected">2</option>'
                $var2 = $var2 + '<option value="3">3</option>       <option value="4">4</option>        <option value="5">5</option>        <option value="6">6</option>        <option value="7">7</option>'
                $var2 = $var2 + '<option value="8">8</option>       <option value="9">9</option>        <option value="10">10</option>      </select>     </span>       </span>  </div>'
                $var2 = $var2 + '<div class="children_'+forage+'" > <label class="lbl_sm" style="font-size: .75em;" for="children">Children</label><br/> <span>  <select id="hc_f_children_' + forage + '" class="hc_evt_children " style="border-right: 0.5px solid #FFFFFF;">'
                $var2 = $var2 + '<option value="0" selected="selected">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option>'
                $var2 = $var2 + '<option value="4">4</option> </select> </span>  </div>   </div>';
                $("#Addition").prepend('<fieldset id="' + counter + '" data-index="' + index + '">' + $var2 + '</fieldset>');
                counter = counter + 1;
                index++;
                forage++;
                $('#roomconfig').show(300);
                 }
        else if ($(this).val() === '1-1' || $(this).val() === '3-1' || $(this).val() === '4-1' || $(this).val() === '2-2' || $(this).val() === '2-1') {

            $('#roomconfig').hide(300);

            $('#Addition fieldset :first').remove();
         }
   childage();

});

 $(".addRoom").click(function () {
        // on add room event

        var $var1 = '<div id="dropdown2_ ' + (counter) + ' " class="class1"> <div   class="wrapadults" style="float:left"> '
        $var1 = $var1 + '<span> <span> <select id="adults" class="t_adults" style="margin-left:7px;margin-right:7px; border-right: 0.5px solid #FFFFFF;">       <option value="1">1</option>        <option value="2" selected="selected">2</option>'
        $var1 = $var1 + '<option value="3">3</option>       <option value="4">4</option>        <option value="5">5</option>        <option value="6">6</option>        <option value="7">7</option>'
        $var1 = $var1 + '<option value="8">8</option>       <option value="9">9</option>        <option value="10">10</option>      </select>     </span>       </span>  </div>'
        $var1 = $var1 + '<div class="children_'+forage+'" > <span>  <select id="hc_f_children_' + forage + '" class="hc_evt_children " style="border-right: 0.5px solid #FFFFFF;">'
        $var1 = $var1 + '<option value="0" selected="selected">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option>'
        $var1 = $var1 + '<option value="4">4</option> </select> </span>  </div> <div id="chileage_'+forage+'" class="ch"></div>  </div>'
        $var1 = $var1 + '<div class="btnrmv" id="' + counter + '" > <a class="removeRoom " style=" width:30px; height:0px; margin:0px;left:200px;position:relative; top:-30px; background-image:none; color:#b11500;font-weight:normal;font-size:0.77em;" href="javascript:void(0);">remove<span></span> </a> </div>';

        $("#Addition").append('<fieldset id="' + counter + '" data-index="' + index + '"' + $var1 + '</fieldset>');

        counter++;
        index++;
        forage++;
        // for remove element
        $(".btnrmv").click(function () {
            $("#roomconfig fieldset#" + this.id).remove();
            counter--;

        });

       childage();

});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:33:58.873

您可以添加一个类，例如`class: "age"`在创建文本框时添加一个类，然后在提交按钮上添加一个单击侦听器，该按钮将使用该`each`功能检查每一个。

我在这里添加了一个示例：http: [//jsfiddle.net/pYRj3/32/](http://jsfiddle.net/pYRj3/32/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:53:32.410

您的代码非常复杂，因此我将提供更通用的代码示例，您可以将它们应用于您的情况。

在插件初始化后，添加/删除规则的主要方法是使用插件中已经内置的方法......

*   `rules('add')`
*   `rules('remove')`

请参阅所有文档： http: [//docs.jquery.com/Plugins/Validation#Plugin_methods](http://docs.jquery.com/Plugins/Validation#Plugin_methods)

* * *

要将规则添加到*动态创建*的字段，您将在创建字段后立即使用[该`rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)。

```
$('[name="Field2"]').rules('add', {
    required:true,
    messages: {
        required: "Custom message."
    }
}); 
```

或者一次对于许多新字段，使用“开始于”选择器和`.each`...

```
$('[name^="Field"]').each(function() {
    $(this).rules('add', {
        required:true,
        messages: {
            required: "Custom message."
        }
    });
}); 
```

此方法的简单演示：http: [//jsfiddle.net/xCY4T/1/](http://jsfiddle.net/xCY4T/1/)

* * *

一种更简单的方法是使用[addClassRules 方法](http://docs.jquery.com/Plugins/Validation/Validator/addClassRules#namerules)*创建*一个。它可以包含一个规则或规则的组合（规则的组合称为“复合规则”）。 `class`

```
$.validator.addClassRules("MyRule", {
    required: true,
    range: [0, 9],
    // another rule, etc.
}); 
```

然后，当您创建新字段时，只需确保它们每个都包含一个`class="MyRule"`和一个唯一`name`的，当然。

```
<input type="text" name="Field1" class="MyRule" />
<input type="text" name="Field2" class="MyRule" /> 
```

此方法非常简单，但不会覆盖默认消息。

简单演示：http: [//jsfiddle.net/xCY4T/3/](http://jsfiddle.net/xCY4T/3/)

# html - CSS关键帧动画不会为图像设置动画

> ID：15848678
> 
> 赞同：0
> 
> 时间：2013-04-06T08:28:55.400
> 
> 标签：html, css, css-animations

我有一个 CSS 片段，它可以在单击图像时使图像填满屏幕，但由于某种原因它不起作用。它使用`target`和`@keyframes`。我在这个 Fiddle 中隔离了问题：

[http://jsfiddle.net/j2AKp/](http://jsfiddle.net/j2AKp/)

*注意：2 秒延迟是故意的。*

奇怪的是，图像确实变大了，但没有过渡。我点击它，延迟有效，然后图像立即变大，而不是超过 4 秒。

# cmd - 在 Sublime Text 2 中安装 Less2Css，cmd 路径问题

> ID：15848679
> 
> 赞同：4
> 
> 时间：2013-04-06T08:28:59.073
> 
> 标签：cmd, less, sublimetext2

我在 Sublime Text 2 中安装 Less2Css 包时遇到问题。我确信这不是包问题，而是 Windows 上的路径问题，我无法弄清楚。看起来它应该一切正常，但目前没有。

从 Sublime 文本运行时，错误消息 =“lessc.cmd 未被识别为内部或外部命令、可运行程序或批处理文件”，这是典型的 Windows 路径问题

我可以在正确的文件夹中使用lessc，但不能从崇高的文本中运行。确定这是一个窗口环境变量路径问题，但是当我`echo %path%`显示 lessc.cmd 文件的正确目标文件夹时（在 ; 之后不包含空格）。

我重新启动了控制台和计算机，`setx lessc "c:\path..."`但没有成功。

任何有关如何使 lessc.cmd 正常运行的帮助将不胜感激

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-25T21:13:47.923

我正在使用此设置。有些事情你已经完成了，但我正在写我所做的所有步骤，并且对我有用。我希望它可以帮助你：

1-安装[node.js](http://nodejs.org/download)
2-安装Less with `npm install -g less`
3-为Sublime安装[LESS](https://github.com/danro/LESS-sublime)语法
4-安装[Less2css](https://github.com/timdouglas/sublime-less2css)包

重新启动 Sublime（或重新启动 Windows 以使新安装的变量路径生效。我不确定在 Windows 上添加新路径是否可以在不重新启动的情况下工作），转到`Preferences > Package Settings > Less2css > Settings - User`并设置以下设置：

```
{
  "autoCompile": true,      
  "lessBaseDir": "./",
  "main_file": "bootstrap.less",
  "minify": true,
  "outputDir": "auto",
  "outputFile": ""
} 
```

在这种情况下，我使用具有以下结构的 Twitter Bootstrap，当我在文件夹中保存 less/bootstrap.less 或任何其他 less 文件时，插件会自动编译压缩后的 css/bootstrap.css 中的所有内容（可选，检查[项目 Github文档页面](https://github.com/timdouglas/sublime-less2css)）。

```
assets/
  ├── css/
  │   ├── bootstrap.css
  └── less/
      ├── bootstrap.less
      ├── ...
      └── variables.less 
```

此设置使使用 Less 的工作更快，因为您不需要手动编译或使用 less.js 文件在客户端进行编译。而且你只需要保存，不需要安装 Less-build 或其他构建工具。

# sql - 在父行之后连续对子相关行进行排序

> ID：15848686
> 
> 赞同：0
> 
> 时间：2013-04-06T08:30:07.200
> 
> 标签：sql, sql-server, sql-server-2008, tsql

如果我有一张这样的桌子

```
 ID   |   ParentID   |   Name
  1   |    NULL      |    A
  2   |    NULL      |    B
  3   |      1       |    C 
```

这将如何排序，使其返回如下

```
 ID   |   ParentID   |   Name
  1   |    NULL      |    A
  3   |      1       |    C
  2   |    NULL      |    B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:27:05.873

试试这个[sql fiddle](http://sqlfiddle.com/#!3/afd6e/3/0)。您可以使用以下查询。

```
select * from test
order by coalesce(parentid,id) 
```

# regex - 如何在多个文件中仅替换记事本++中文本的第一个实例？

> ID：15848690
> 
> 赞同：0
> 
> 时间：2013-04-06T08:30:32.027
> 
> 标签：regex, notepad++, replace

我正在通过一些更改来更新网站，并且我已经设法使用标准查找和替换搜索对多个文件进行了大部分更改。我的 f/r 只剩下一个错误需要修复，但它在整个文档中发生了多次，我只想替换第一个实例，这是唯一一次出现错误。

```
 </div><div class="boxb"> 
```

这在每个文件中发生七次，只有第一次我需要删除尾随的关闭 DIV。其他都是正确的。

我收集我需要使用正则表达式模式，但我尝试了一些示例，它们要么不起作用，要么仍然替换所有出现，而不仅仅是我需要的第一个。

另外要明确的是，我不知道它是否有区别，但我需要对多个文件执行此操作，因此使用“在文件中查找”而不仅仅是“替换”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:26:46.420

一种方法是匹配文件的全部内容，然后替换回您仍要保留的部分。这确保了整个文件恰好产生 1 个匹配项。此方法尚未经过测试，但在大文件上可能会很慢。

1.  只需照常编写您的正则表达式，然后`(.*?)`在前面和`(.*)`后面添加：

    ```
    (.*?)pattern(.*) 
    ```

    您应该`(.*?)pattern`对一些文件进行测试，以确保它与您要删除的文本的第一个实例相匹配。

2.  选中复选框***“`.`匹配换行符”***。

3.  **替换字符串**可能因您的正则表达式而异，但其想法是捕获您想要保留在步骤 1 的正则表达式中的部分，并在此步骤中将它们替换回来。

    例如，如果要删除任何匹配的内容`pattern`，则将其`$1$2`用作替换字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:47:48.823

您提供的文本似乎是固定的，因此不需要正则表达式即可找到它。**Find in files**的替换部分替换每个文件中的*所有*匹配项。假设文件数量不大，我建议使用**Find in files上的****Find all**按钮，然后手动一一更改。如果文件数量很大，那么 Notepad++ 可能不是进行更改的最佳工具。

 **对于其他选项，请考虑 Perl 或 Awk 等程序；有了这些，任务就很简单了。**

# python - 适用于 Python 2.7.2 和 MySQL 5.6.10 的 Python-MySQLdb 模块

> ID：15848691
> 
> 赞同：0
> 
> 时间：2013-04-06T08:30:50.153
> 
> 标签：python, mysql, mysql-python

我在 mac os x 10.8.3 和 MySQL 5.6.10 中运行了 Python 2.7.2，是否有一种简单的方法可以为 python 安装 mysqldb 模块？

我尝试了 Macports py27-mysqldb，但它安装了所有东西：python、mysql 和 mysqldb 模块，我只想安装模块。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:05:17.960

另一种选择是使用 pip ：

```
pip install mysql-python 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:37:09.983

试试看`easy_install`_

```
$ sudo easy_install MySQL-python 
```

# html - 将 facebook like 按钮添加到页面

> ID：15848692
> 
> 赞同：0
> 
> 时间：2013-04-06T08:31:01.530
> 
> 标签：html, facebook

我想在我的页面上添加 facebook like 按钮。我已经从 facebook 开发者网站生成了一些代码。

现在的问题是，当我点击喜欢并在我的 facebook 提要上发送帖子时，它不会从我有喜欢按钮的网站上获取任何图像。相反，它为图像保留了一个空白空间，但没有图像。

我google了一下，发现我需要在html的标题标签中添加以下内容

```
<meta property="og:image" content="link to image"/> 
```

我也做到了。但没有成功。

还有其他我需要申请的技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:41:04.633

很高兴向我们展示您的网站，无论如何我知道这种方法效果很好。

```
<head>
...
<meta property="og:image" content="http://yousite.com/image.jpg" />
...
</head> 
```

你也可以试试这个：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# jquery - 精细上传器 3.4 和 setParams

> ID：15848696
> 
> 赞同：2
> 
> 时间：2013-04-06T08:31:22.947
> 
> 标签：jquery, fine-uploader

我正在使用带有 jquery 插件的精细上传器。需要在上传文件之前动态传递参数，因此 setParams() 方法应该可以完成这项工作。我在 onSubmit 回调中不能有例外：

1) 上传者声明

```
 function initUploader() {
         var up = $('#BSUploader').fineUploader({
                      multiple: true,
                      debug: true,
                      request: {
                          endpoint: '${request.contextPath}/quantum/uploadToS3',
                          //params: {'folderId':r }
                      },
                      dragAndDrop: {
                          extraDropzones:[$('#filesContainer')], 
```

...

2) onSubmit 回调

```
...
}).on('submit', function(event, id, name) {
          var r = $("#curfolderid").val();
          alert(r);
          up.setParams({'folderId':r}); 
```

3) 错误日志

```
[FineUploader] Caught exception in 'onSubmit' callback - Object [object Object] has no method 'setParams' bundle-bundle_uploader_defer.js:4
qq.log bundle-bundle_uploader_defer.js:4
qq.FineUploaderBasic.log bundle-bundle_uploader_defer.js:26
b bundle-bundle_uploader_defer.js:47
a._options.callbacks.(anonymous function) bundle-bundle_uploader_defer.js:47
qq.FineUploaderBasic._upload bundle-bundle_uploader_defer.js:43
qq.FineUploaderBasic._uploadFileOrBlobDataList bundle-bundle_uploader_defer.js:43
qq.FineUploaderBasic.addFiles bundle-bundle_uploader_defer.js:29
qq.DragAndDrop.callbacks.dropProcessing bundle-bundle_uploader_defer.js:69
b bundle-bundle_uploader_defer.js:51
qq.UploadDropZone.onDrop bundle-bundle_uploader_defer.js:52
(anonymous function) 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T13:41:47.203

您没有正确使用 jQuery 插件包装器。[这个插件的文档](http://docs.fineuploader.com/branch/master/integrating/modes/using-jquery-plugin.html)清楚地解释了在使用插件时如何调用 API 方法。您应该真正从[第一页](http://docs.fineuploader.com)开始遵循自述文件，然后根据您的预期用途遵循概述的路径。这样做可以防止您遇到通过熟悉库可以解决的问题。

现在，开始解决您的问题...

`up`您创建的变量被分配了一个对象，该`jQuery`对象表示 ID 为“BSUploader”的元素。您正在尝试调用此 jQuery 对象上不存在的函数。Fine Uploader 不会使用其他方法污染 jQuery 对象。在开发插件包装器时，遵循了 jQuery 网站上列出的所有接受/推荐的标准。这意味着您必须在插件实例的上下文中调用 API 方法。

所以，你必须改变这一行：
`up.setParams({'folderId':r});`

对此：
`up.fineUploader('setParams', {'folderId':r});`

另一种选择是完全消除`up`变量。你真的不需要它，因为你可以`setParams`像这样调用你的回调处理程序：
`$(this).fineUploader('setParams', {'folderId':r});`

# c - 文件处理时我的二叉搜索树代码中的分段错误

> ID：15848702
> 
> 赞同：1
> 
> 时间：2013-04-06T08:31:44.977
> 
> 标签：c, io, binary-search-tree

该代码没有错误，但无法运行。我在文件处理附近应用了各种打印语句。问题似乎就在那里。有人可以看看他们是否发现问题吗？

我的输入文件具有以下格式的数据：

```
Insert "tab>" "name" "tab""IDNo" "tab" "Department""newline"  
Delete "tab""IDNO""newline"  
Find"tab"IDNO"newline" 
```

代码：

```
/*bst.h*/

typedef struct{
    unsigned int id;
    char name[20];
    char dep[10];
    }studRec;

struct bst;
typedef struct bst binTree;
typedef struct binTree *BST;
struct binTree{
    studRec sRec;
    BST left;
    BST right;
    };

/* bstMain.c*/

#include "bstOps.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(){
    int s;
    int key,i;
    FILE *f;
    char a[4][20];
    f=fopen("input.txt","r");
    if(f==NULL)
     printf("error");
    else
            printf("no error");
    char ch=getc(f);

    studRec rec;
    BST bt=createEmptyBST();

    do{
            for(i=0;ch!='\n';i++)
                    fscanf(f,"%s",a[i]);

            if(a[0]=="Insert")
                    s=1;
            else if(a[0]=="Delete")
                    {s=2;
                     key=atoi(a[1]);}

            else if(a[0]=="Find"){
                    s=3;
                    key=atoi(a[1]);}
            printf("To print the list, press 4\n To exit,press 5.\n");
            scanf("%d",&s);

    switch(s){
            case 1:

            strcpy(rec.name,a[1]);
            rec.id=atoi(a[2]);
            strcpy(rec.dep,a[3]);
            bt=insertInBST(bt,rec);
            break;

            case 2:

            bt=deleteFromBST(bt,key);
            break;

            case 3:
            rec=findInBST(bt,key);

            case 4:

            inorderTraversal(bt);
            break;

            case 5:

            printf("\nTerminating!!!\n");
            break;

            default:
            printf("\nInvalid Option!! \n");
            break;}
            ch=getc(f);

            }while(ch!=EOF||s==5);
            fclose(f);

}

/*bstOps.c*/

#include "bstOps.h"
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

BST createEmptyBST(){
    BST root;
    root=(BST)malloc(sizeof(BST));
//      root->sRec=(studRec *)malloc(sizeof(studRec));
    root->sRec.id=0;
    strcpy(root->sRec.name,"/");
    strcpy(root->sRec.dep,"/");
    root->left=NULL;
    root->right=NULL;
    //root=NULL;
    return root;
    }

BST insertInBST(BST bt,studRec rec){

    BST bt1=createEmptyBST();
    bt1=bt;

    while(1){
    /*      if(bt==NULL){
                    bt->sRec=rec;
                    bt->left=NULL;
                    bt->right=NULL;
                    break;}
*/
            if(bt->sRec.id==rec.id)
            {
            return bt;
            break;
            }
            else if(rec.id<bt->sRec.id){
                    if(bt->left==NULL){
                    bt->left=createEmptyBST();
                    bt=bt->left;
                    bt->sRec=rec;
                    break;
                    }
                    else
                            bt=bt->left;
                    }
            else{
                    if(bt->right==NULL){
                    bt->right=createEmptyBST();
                    bt=bt->right;
                    bt->sRec=rec;
                    break;
                    }
                    else
                            bt=bt->right;
            }

    }
    printf("inserted\n");
    return bt1;
    }

void inorderTraversal(BST bt){
    if(bt!=NULL){
            inorderTraversal(bt->left);
            if(bt->sRec.id!=0)
            printf("\t Id:%d\n Name:%s\n Deparment:%s\n",bt->sRec.id,bt->sRec.name,bt->sRec.dep);
            inorderTraversal(bt->right);
            }
    }

studRec findInBST(BST bt,int id){
    BST temp=createEmptyBST();
    if(bt==NULL||bt->sRec.id==0)
            return temp->sRec;
    if(id>bt->sRec.id)
            return findInBST(bt->right,id);
    else if(id<bt->sRec.id)
            return findInBST(bt->left,id);
    else
            return bt->sRec;

}

BST deleteFromBST(BST bt,int id){
    BST q;
    if(bt==NULL||bt->sRec.id==0){
            printf("\nElement not found\n");
            }

    else if(id>bt->sRec.id)
            bt->right=deleteFromBST(bt->right,id);
    else{
            if(bt->right && bt->left){
                    q=FindMin(bt->right);
                    bt->sRec=q->sRec;
                    bt->right=deleteFromBST(bt->right,q->sRec.id);
                    }
            else{
                    q=bt;
                    if(bt->left==NULL)
                            bt=bt->right;
                    else if(bt->right==NULL)
                            bt=bt->left;
                    free(q);
                    }
            }
            return bt;
    }

    BST FindMin(BST bt){
    if(bt==NULL||bt->sRec.id==0){
            return NULL;
            }
    if(bt->left)
            return FindMin(bt->left);
    else
            return bt;
    }
 int getHeight(BST bt){
    int h,lh,rh;
    h=lh=rh-0;
    if(bt->left!=NULL)
            lh=(1+getHeight(bt->left));
    else if(bt->right!=NULL)
            rh=(1+getHeight(bt->right));
    h=lh>rh?lh:rh;
    return(h);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:53:07.990

崩溃是由不变循环引起的：

```
for(i=0;ch!='\n';i++)
    fscanf(f,"%s",a[i]); 
```

停止条件永远不会为真，您最终会覆盖数组`a`，这将导致分段错误。

这里有一个修复建议。您需要根据需要更新它

```
int getHeight(BST bt) {
    int h, lh, rh;
    h = lh = rh = 0;
    if (bt->left != NULL )
        lh = (1 + getHeight(bt->left));
    else if (bt->right != NULL )
        rh = (1 + getHeight(bt->right));
    h = lh > rh ? lh : rh;
    return (h);
}

int main(int argc, char *argv[]) {
    int s;
    int key = 0, i;
    FILE *f;
    char line[200];
    char options[5][200];
    f = fopen(argv[1], "r");

    if (f == NULL ) {
        printf("error");
        return -1;
    }

    printf("no error");

    char ch = fgetc(f);
    studRec rec;
    BST bt = createEmptyBST();

    do {

        for (i = 0; ch != '\n' && ch != EOF; i++) {
            line[i] = ch;
            ch = fgetc(f);
        }

        if (EOF == ch) {
            printf("To print the list, press 4\n To exit,press 5.\n");
            scanf("%d", &s);
        }

        if (!strncmp(line, "Insert", strlen("Insert"))) {
            s = 1;
            // TODO parse the line string to get your options
            sprintf(line, "Insert %s %s %s", options[0], options[1], options[2]);
        } else if (!strncmp(line, "Delete", strlen("Delete"))) {
            s = 2;
            key = atoi(line + strlen("Delete") + 1);
        } else if (!strncmp(line, "Find", strlen("Find"))) {
            s = 3;
            key = atoi(line + strlen("Find") + 1);
        }

        switch (s) {
        case 1:

            strcpy(rec.name, options[0]);
            rec.id = atoi(options[1]);
            strcpy(rec.dep, options[2]);
            bt = insertInBST(bt, rec);
            break;

        case 2:
            bt = deleteFromBST(bt, key);
            break;

        case 3:
            rec = findInBST(bt, key);
            break;

        case 4:

            inorderTraversal(bt);
            break;

        case 5:

            printf("\nTerminating!!!\n");
            ch = EOF; // to  break the do {} while() loop
            break;

        default:
            printf("\nInvalid Option!! \n");
            break;
        }

    } while (ch != EOF || s == 5);
    fclose(f);
    return 0;
} 
```

# java - 从 Oracle 表中自动将数组列表添加到 JTable

> ID：15848704
> 
> 赞同：0
> 
> 时间：2013-04-06T08:32:12.187
> 
> 标签：java, swing, arraylist, jtable, jpanel

当我按下按钮时如何自动添加行。我正在使用`validate()`、和 `repaint()`，但它并没有解决我的问题。我的数据在数组列表中并插入到表中。这是我的代码：`fireTableDataChanged()``fireTableStructureChanged()`

```
JTable table = new JTable();
DefaultTableModel model = new DefaultTableModel();
model.fireTableDataChanged();
table.repaint();
JScrollPane scrollPane = new JScrollPane(table);
try {
    orclConn.statement = orclConn.getConnection().createStatement();
    orclConn.resultset = orclConn.statement.executeQuery(
    "SELECT JOR,DANA,NRXYJOR FROM froshtnykalayhatw WHERE dt = '"+d+"'  ");

    while (orclConn.resultset.next()) {
        //jlFroshraw is array list
        jlFroshraw.add(new IydaShow(orclConn.resultset.getString(1), orclConn.resultset.getInt("dana"), orclConn.resultset.getInt("nrxyjor")));
    }
} catch (Exception df) {
    df.printStackTrace();
}

table.setModel(model);
model.setColumnIdentifiers(new String[]{"dd", "nn", "mm"});

for (IydaShow p : jlFroshraw) {
    model.addRow(new Object[]{p.jor, p.chandJor, p.nrxyfroshraw});
}

pnl.add(scrollPane, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:42:18.793

坦率地说，没有足够的代码来完全推断出完整的答案

```
JTable table = new JTable();
DefaultTableModel model = new DefaultTableModel();
// This is pointless as the model isn't actually attached to anything
model.fireTableDataChanged();
// This is pointless as the table hasn't been added to anything
table.repaint();
JScrollPane scrollPane = new JScrollPane(table);
try {
    orclConn.statement = orclConn.getConnection().createStatement();
    orclConn.resultset = orclConn.statement.executeQuery(
    "SELECT JOR,DANA,NRXYJOR FROM froshtnykalayhatw WHERE dt = '"+d+"'  ");

    while (orclConn.resultset.next()) {
        //jlFroshraw is array list
        // This looks dangrous to me, as I can't see where it's been created
        // or if it's been cleared.
        // This could mean that all previous queries are still contained
        // with in it...
        jlFroshraw.add(new IydaShow(orclConn.resultset.getString(1), orclConn.resultset.getInt("dana"), orclConn.resultset.getInt("nrxyjor")));
    }
} catch (Exception df) {
    df.printStackTrace();
}

// This is actually okay
table.setModel(model);
model.setColumnIdentifiers(new String[]{"dd", "nn", "mm"});

// Read the previous statement about jlFroshraw list
for (IydaShow p : jlFroshraw) {
    model.addRow(new Object[]{p.jor, p.chandJor, p.nrxyfroshraw});
}

pnl.add(scrollPane, BorderLayout.CENTER); 
```

**更新工作示例**

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;

public class TestTableLoad {

    public static void main(String[] args) {
        new TestTableLoad();
    }

    public TestTableLoad() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JTable table;

        public TestPane() {
            table = new JTable();
            setLayout(new BorderLayout());
            add(new JScrollPane(table));

            JButton btn = new JButton("Populate");
            btn.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    List<Object[]> values = new ArrayList<>(1000);
                    for (int index = 0; index < 1000; index++) {
                        Object[] row = new Object[3];
                        row[0] = index;
                        row[1] = (int)(Math.random() * 100);
                        row[2] = (int)(Math.random() * 100);
                        values.add(row);
                    }
                    DefaultTableModel model = new DefaultTableModel(new Object[]{"dd", "nn", "mm"}, 0);
                    table.setModel(model);
                    for (Object[] obj : values) {
                        model.addRow(obj);
                    }
                }
            });
            add(btn, BorderLayout.SOUTH);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }        
    }    
} 
```

# azure - 如何在使用 CQRS 方法构建的系统中运行定期任务？

> ID：15848705
> 
> 赞同：1
> 
> 时间：2013-04-06T08:32:12.693
> 
> 标签：azure, architecture, cloud, cqrs, cloud-hosting

事实证明，我需要在我的系统中执行一些定期任务，这些任务在 Windows Azure 工作者角色下运行。我想**强调**的是，它可能是任何平台 Azure、亚马逊、内部解决方案。就通常的系统而言，如何完成任务不是问题，但由于我们在云中，并且我的角色可能有多个实例，因此在某些时候可能会出现问题。

**所以这里有几个我能想到的方法：**

1.  通常的计时器，它们是同步的，比如通过天蓝色存储，这样就不会多次运行任务。例如，您可以自己实现它或从 Lokad 获取一个。您可以在计时器事件上内联执行任务，也可以将命令发送到队列中。

    **优点：**

    *   常用方法，每个人都知道计时器以及如何烹饪它们
    *   不需要有状态。实例启动后，计时器也会启动并运行

    **缺点：**

    *   在主要部分旁边还有初始化计时器和执行它们的附加逻辑，主要部分仅负责处理来自队列的命令和事件。

2.  一旦我得到启动任务的命令，我就会发送一个命令 StartTask（30 秒）。一旦命令处理程序收到它，它确实需要完成工作，然后以 30 秒的延迟重新抛出相同的命令。

    **优点：**

    *   完美契合 CQRS 设计
    *   没有与定时器相关的额外逻辑，纯反应器

    **缺点：**

    *   打破范式，CQRS 本身从一开始就很难治疗和使用。人们倾向于使用已知技术（通常的计时器），即使它不符合设计（cqrs 方法），结果我们有混乱的融合。
    *   另一个破碎的范式。系统重启时是无状态的还是有状态的？我会说状态存储在代理消息传递环境中。您需要做的就是遵循消息处理规则。

**我对此的看法：**

就个人而言，我确实赞成第二种方法，它的所有缺点都应该转移到 Pros 部分。

**问题：**

这里的最佳做法是什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:06:18.690

使用[Windows Mobile Services的调度程序或](http://www.windowsazure.com/en-us/develop/mobile/tutorials/schedule-backend-tasks/)[Aditi](http://www.windowsazure.com/en-us/store/service/?id=53765649-ba4b-4fe2-a834-21b334b551e2)的 Windows Azure Store Scheduler 应用程序怎么样？它们可以用来启动几乎任何东西，你可以让它们向你的系统发送命令。

如果您选择了选项 1，那么是的，您必须处理同步，但其中内置了冗余。如果您执行了选项 2 并且处理命令的实例出现故障，请确保任务不会停止。这将取决于您如何设置命令重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:49:01.903

如果您使用 azure servicebus 作为代理，则可以使用它的延迟消息功能将命令的发送延迟到需要接收的时间。[http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-ccc4f879](http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-ccc4f879)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T18:20:55.970

我的建议是选择另一个组件来负责执行期间任务。通过这种方式，您可以决定它的行为方式，并将其与 CQRS 工作人员分开扩展。

如果您希望有 1 个实例在 Azure 中处理这两个任务（定期和 CQRS），您可以将它们转换为 Windows 服务并将您的 Worker 角色用作安装程序和观察者。[我在这里有一个使用我的解决方案](https://github.com/cloudpowerups/cp-azure-samples/tree/master/CP.Azure.Samples.MultiComponentRole)构建的示例。

顺便说一句，如果您使用 Lokad.Cqrs，那么如果它与主要组件分开，您的第二种方法听起来不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-25T11:32:02.273

预定的时间流逝是一个事件 - 所以我有一个过程来创建像“ScheduleElapsedEvent”这样的事件。然后，您可以在必要时实现创建/调度命令的处理程序。

您可以将事件时间表保存在支持某种原子更新的数据存储中。那可能是 SQL 或 NoSQL，比如 MongoDB。即使使用副本集和分片进行横向扩展，您仍然可以使用 Mongo 检查和更新记录。所以工作进程可以每个检查这个时间表。

# node.js - 无法连接到托管的 redis：就绪检查失败：不允许进行 ERR 操作

> ID：15848707
> 
> 赞同：3
> 
> 时间：2013-04-06T08:33:10.867
> 
> 标签：node.js, redis

我正在尝试连接到通过 Nodejitsu 配置的 IrisCouch 上的托管 redis。

我*认为*是我的 server.js 的相关部分：

```
var redisUrl = require('url').parse(config.REDIS_CONNECTION_URI);
var client = require('redis').createClient(redisUrl.port, redisUrl.hostname); 
```

我的 server.js 中还没有与客户端进行**任何**交互，这就是为什么我认为它抛出“不允许的操作”很奇怪，因为基本上我做的唯一操作就是连接。我没有 redis.conf 文件，我相信我不应该需要一个，因为我自己没有托管 redis 实例。

日志：

```
 Express server listening on port 3000

/Users/soroushhakami/dev/projects/projectx/node_modules/redis/index.js:504
                throw callback_err;
                      ^
Error: Ready check failed: ERR operation not permitted
    at RedisClient.on_info_cmd (/Users/soroushhakami/dev/projects/projectx/node_modules/redis/index.js:317:35)
    at Command.RedisClient.ready_check.send_anyway [as callback] (/Users/soroushhakami/dev/projects/projectx/node_modules/redis/index.js:365:14)
    at RedisClient.return_error (/Users/soroushhakami/dev/projects/projectx/node_modules/redis/index.js:500:25)
    at ReplyParser.RedisClient.init_parser (/Users/soroushhakami/dev/projects/projectx/node_modules/redis/index.js:260:14)
    at ReplyParser.EventEmitter.emit (events.js:96:17)
    at ReplyParser.send_error (/Users/soroushhakami/dev/projects/projectx/node_modules/redis/lib/parser/javascript.js:293:10)
    at ReplyParser.execute (/Users/soroushhakami/dev/projects/projectx/node_modules/redis/lib/parser/javascript.js:176:22)
    at RedisClient.on_data (/Users/soroushhakami/dev/projects/projectx/node_modules/redis/index.js:476:27)
    at Socket.<anonymous> (/Users/soroushhakami/dev/projects/projectx/node_modules/redis/index.js:79:14)
    at Socket.EventEmitter.emit (events.js:96:17) 
```

关于可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T08:29:45.560

`client.auth()`创建客户端后 需要直接调用：

```
var client = require('redis').createClient(redisUrl.port, redisUrl.hostname);
client.auth(PASSWORD); 
```

令人困惑的是，当您不调用`.auth()`但`client` *也不调用其他任何内容*时，您将收到失败的就绪检查错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T11:12:50.580

我通常在 CLI 测试时遇到该错误。

我想问题是应该在发出 ready 事件之前调用 auth （正如[robertklep](https://stackoverflow.com/users/893780/robertklep)提到的那样）。当您使用 CLI 进行测试时，只要您`var client = redis.createClient(port, host);`在行尾按回车键，客户端就会开始连接，并且可能在您有机会发送 AUTH 命令之前发送某种 IDLE 命令，这会触发`ERR operation not permitted`错误。

**tl;博士**

在 CLI 测试时，使用以下代码创建您的 redis 客户端：

```
var redis = require('redis');
function createClient(port, host, pass) {
    var client = redis.createClient(port, host);
    client.auth(pass);
    return client;
}

var r = createClient(<MYPORT>, <MYHOST>, <MYPASS>); 
```

# android - 如何将 stciky note 功能添加到我的 android 应用程序中？

> ID：15848711
> 
> 赞同：1
> 
> 时间：2013-04-06T08:34:23.040
> 
> 标签：android, android-widget

我创建了一个 android 应用程序，用于记事本，如记事本。

现在我想在其中添加一个便笺功能，所以任何人都可以告诉我如何添加此功能。

我要做的是：当用户单击“创建便笺”选项时，应在 android 手机的主屏幕中创建便笺。

我在谷歌上搜索了这个，但它显示“如何创建便笺”作为 android 的应用程序。

我想将它作为我的记事本应用程序的附加功能来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:05:01.240

> 当用户点击“创建便笺”选项时，应在 Android 手机的主屏幕中创建便笺。

这是不可能的。

欢迎您创建用户可以选择放在他或她的主屏幕上的应用小部件，并且该应用小部件可以在用户提供给该应用小部件的任何空间中显示“便签”。但是，是否显示应用小部件的决定是用户和主屏幕应用之间的决定——您没有投票权。

# google-app-engine - 使用 GAE 与硬件网络设备通信

> ID：15848712
> 
> 赞同：-2
> 
> 时间：2013-04-06T08:34:24.027
> 
> 标签：google-app-engine

# 使用 Phython 的 GAE 具有沙盒限制

# 背景

我正在开发一个浇水系统，该系统将有 WiFi 前端连接到我们的家庭路由器。如果需要，我可以在路由器上进行端口转发。

我的 WiFi 模块上有一个 TCP/IP 堆栈，我可以在下面的底部执行以下 TCP/IP 操作。

# 问题

我是否可以在我的 WiFi 模块上使用这些 TCP/IP 功能与 GAE 通信，因为我认为只允许 GET 和 POST。没有 TCP 或 UDP 套接字。

提前致谢

乔

# WiFi 模块可用命令

# ARP、ICMP ping、FTP 客户端、TELNET、HTTP、UDP 和 TCP 套接字

# WiFi 模块 HTML 客户端功能

该模块有一个内置的 HTML 客户端。启用后，该模块可以获取或发布数据到 Web 服务器。例如，您可以使用 HTML 客户端将串行和/或传感器数据发布到主机 Web 服务器。此功能可以为 GPS 单元、远程传感器、气象站等应用提供 Wi-Fi 功能。

4.4.1 检索 Web 服务器数据 在本例中，您希望从 Web 服务器检索数据，格式为： [http://www.webserver.com/ob.php?obvar=WEATHER](http://www.webserver.com/ob.php?obvar=WEATHER) 要执行此功能，请使用以下设置: set ip proto 18 //启用HTML客户端 set dns name www.webserver.com//设置web服务器名称 set ip address 0//开启DNS set ip remote 80//设置web服务器端口，80为标准set com remote 0// 关闭 REMOTE 字符串，使其

// 不干扰 post 要建立连接，请使用 open 命令，或者您可以使用 open www.web-server.com 80。用户的微处理器将以下字符串写入 UART：

获取 /ob.php?obvar=天气 \n\n

其中 \n 是换行符（十进制 10 或十六进制 0xa）。两个换行符是

# Web 服务器需要知道页面已完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:06:39.933

Well it says your HW module can do HTTP. So if this is true then yes, your HW module can send data (commands) to GAE.

# regex - 如何在标题行与另一个文件中的列表匹配的文件中提取fasta序列？

> ID：15848713
> 
> 赞同：1
> 
> 时间：2013-04-06T08:34:26.257
> 
> 标签：regex, perl, extract, fasta

我是 Perl 的新手。我正在尝试从一个与另一个文件中的行匹配的文件中提取 fasta 序列。两个示例文件如下：

文件1.fasta：

> >gene_44|105_nt|+|47540|47644 GTGCGCCGGCGCGTCGCGATCGCGAACCGGCCCGTGCGAATCCTGCCGCATGCGCGCCGCATCTCGCCACGCCGCGCATTTCATTTCGACATCCATAACGTCTGA
> 
> >gene_69|111_nt|+|75846|75956 ATGCCGTTGCCGTCGCGCATCGCGGCGGCCGTGCGCGGCGCGCATGCATACGCCGGCACGGCCGATGCGCGCGCGACGCGCAAACTGCACGCGGCGCGGGATTTGTGTTGA
> 
> >gene_88|177_nt|-|97993|98169
> ATGCGCCAGCCGACGCACGCCCATTCCGGGCGAAACGTTCCCCTTATCCATTCGATCATCCGTGCCGCACTGCGCGAAGCGGCCACCGCCGACACGTACCAAACCGCGCTCGATGCGACCGGCGCGGCACTCGTCGCCATCGCGGCGCTCGTGCGCGCGGAGGTGCGGCATGGCTGA
> 
> >gene_90|141_nt|-|99016|99156
> TTGGAAGGGCGCTTTCCGCGTGCGAGTCGTCTGACGCAGCGTTGCACGGTCTGGTCGAATCGCGAGCTTCATCGCTGGATGGCCGATCCGTTGAACTATCGCGCTGTCGACGCGGCGAACCAGACGACGGAGGGCGCGTAA

文件2.列表：

> somewordsinfront, >gene_44|somewordsattheback
> 
> blablabla，>gene_88|blablablablabla

我期望的输出如下：

> >gene_44|105_nt|+|47540|47644 GTGCGCCGGCGCGTCGCGATCGCGAACCGGCCCGTGCGAATCCTGCCGCATGCGCGCCGCATCTCGCCACGCCGCGCATTTCATTTCGACATCCATAACGTCTGA
> 
> >gene_88|177_nt|-|97993|98169
> ATGCGCCAGCCGACGCACGCCCATTCCGGGCGAAACGTTCCCCTTATCCATTCGATCATCCGTGCCGCACTGCGCGAAGCGGCCACCGCCGACACGTACCAAACCGCGCTCGATGCGACCGGCGCGGCACTCGTCGCCATCGCGGCGCTCGTGCGCGCGGAGGTGCGGCATGGCTGA

我怎样才能做到这一点？提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:02:06.647

下次当你问问题时，请显示你的代码，例如

```
use strict;
use warnings;

my @genes;

open my $list, '<file2.list';
while (my $line = <$list>) {
    push (@genes, $1) if $line =~ /[^>]+>([^|]+)/;

}
my $input;
close $list;
{
    local $/ = undef;
    open my $fasta, '<file1.fasta';
    $input = <$fasta>;
    close $fasta;
}
my @lines = split(/>/,$input);
foreach my $l (@lines) {
    foreach my $reg (@genes) {
        print ">$l" if $l =~ /$reg/
    }
} 
```

# three.js - 如何获得 Object 3D child 的绝对位置？三.js

> ID：15848714
> 
> 赞同：4
> 
> 时间：2013-04-06T08:34:28.483
> 
> 标签：three.js, coordinate

我有一个包含在 Object3D 中的网格。网格的初始位置是 (0,0,100)，Objects3D 的位置是 (0,0,0) 我让 Object3D 沿着它的 Y 轴旋转，这使得网格沿着描述轨道的中心旋转。如何在其轨迹的任何给定时间获得网格相对于世界的位置坐标？

干杯

# objective-c - 如何在 Cocos2d 中表示百分比 - ObjC

> ID：15848721
> 
> 赞同：1
> 
> 时间：2013-04-06T08:35:14.660
> 
> 标签：objective-c, cocos2d-iphone

我正在尝试对我在 Cocos2D 中制作的游戏使用相对坐标，以便标题位于 iPhone 5 的屏幕中间（因为它有点长）和 iPhone 3-4 的中间（因为它们是一样的）

如何以百分比表示 size.width/2 和 size.height/2 以便它在两个设备中都正确放置？

```
//Label Position 
label.position =  ccp( size.width /2 , size.height/2 ); 
```

谢谢！:3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:43:39.777

好的，试试这个

```
 CGSize size = [[CCDirector sharedDirector] winSize];

    sprite.position = ccp(size.width*0.5f, size.height*0.5f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T09:06:48.107

```
 If you wanna your app support iphone5,dont forget add a 4-inch launchimage. 
```

否则，您无法使用 [[CCDirector sharedDirector] winSize] 获得正确的 scrSize。

# sql - 如何在不发出额外查询的情况下更新刚刚检索到的记录？

> ID：15848722
> 
> 赞同：2
> 
> 时间：2013-04-06T08:35:16.417
> 
> 标签：sql, jdbc, derby

我有以下代码：

```
String sql = "SELECT * FROM users WHERE email = " + email;
prestat = DBConnection.prepareStatement(sql);
rs = prestat.executeQuery();
boolean isEmpty = !rs.first();
if (isEmpty) {
  // Special marker for nonexistent user
  return "$null";
} else if (password.equals(rs.getString(2))) {
  String uuid = UUID.randomUUID().toString();
  // Here I want to insert the UUID into the database
} 
```

考虑到我已经搜索过数据库，我想知道是否有一种方法可以获得行号/位置，并使用它来更新 UUID 列，从而防止另一个数据库搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:46:24.113

目前尚不清楚您要在这里做什么，而且您似乎并不真正了解发生了什么。例如，当使用准备好的语句时，不会使用两个连接的字符串来提供它，而是：

```
PreparedStatement stmt =
        conn.prepareStatement("SELECT * FROM foo WHERE bar = ?");
stmt.setString(1, "Hello World!"); 
```

那么，如果你真的想避免双重搜索，你可以简单地假设一个乐观的观点：

```
UPDATE users SET uuid = ? WHERE email = ? AND password = ? 
```

顺便说一句，确保电子邮件是唯一的。另外，也许您已经这样做了，但不要在数据库中保存明文密码。改用加密哈希，然后加盐。

由于您指定后端是 Apache Derby，也许[本指南](http://www.ibm.com/developerworks/opensource/library/os-ad-trifecta12/)可以帮助您解决问题（它是 100% Java，但不是真正可移植的，因为不同的后端可能无法实现所有必需的功能）。基本上，您在准备语句时传递了两个标志：

```
Statement stmt = con.createStatement(
    ResultSet.TYPE_FORWARD_ONLY, 
    ResultSet.CONCUR_UPDATABLE);
ResultSet res = stmt.executeQuery("SELECT * FROM users WHERE email = ?"); 
```

然后你有一个`ResultSet`可更新的游标支持，所以你可以调用：

```
res.updateString("uuid", uuid);
res.updateRow(); 
```

我认为这*可以避免*额外的搜索，但是我没有测试它，也不能说是否有真正的性能提升。不过，这听起来像是过早的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:46:02.287

好吧，您可以简单地替换

```
prestat = DBConnection.prepareStatement("SELECT * FROM users WHERE email =" + email); 
```

经过

```
prestat = DBConnection.prepareStatement("Update users set uuid = '" + uuid + "' WHERE email =" + email); 
```

当然执行。

# ios - 没有使用 UIWebView (iOS) 自动登录 Google+？

> ID：15848726
> 
> 赞同：2
> 
> 时间：2013-04-06T08:35:28.980
> 
> 标签：ios, xcode, uiwebview, google-plus, autologin

*   我有一个关于使用 UIWebView 进行身份验证的问题。

*   我想在 plus.google.co 中登录 webview

*   [如https://developers.google.com/+/mobile/ios/sign-in](https://developers.google.com/+/mobile/ios/sign-in)所示，我在 google 中登录过一次

*   当用户在 UIWebView 中再次进入 google+ 页面时，程序应该会自动登录并保存用户的会话。但实际上它并没有保持登录状态。尽管用户在我的应用程序中是一次登录 Google+，但我如何让用户登录 google+。

*   我还检查了这个条件：[[GPPSignIn sharedInstance] authentication]，它返回我已经登录的true。但是当我通过推送新的ViewController签入uiwebview时，它要求我登录。

*   当我在 iPhone 的 safari 中打开 plus.google.com 时，它会将我显示为登录用户。

    我搜索了很多，但找不到答案。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:12:42.193

如果我正确理解您的问题，您已经使用 iOS SDK 实现了登录，但您希望按照以下说明为您的移动网络浏览器启用登录：

[https://developers.google.com/+/mobile/ios/sign-in](https://developers.google.com/+/mobile/ios/sign-in)

这些适用于原生 iOS 应用程序。要实现移动 Web 登录，您应该按照在 Web 上登录的说明进行操作：

[https://developers.google.com/+/web/signin/](https://developers.google.com/+/web/signin/)

抱歉，如果这不能直接回答您的问题，但如果没有，请提供有关您的问题的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T06:30:32.460

现在通过新的[Google 登录 iOS SDK](https://developers.google.com/identity/sign-in/ios)支持使用 Google 登录。Google+ 登录 SDK 用户的迁移说明可[在此处](https://developers.google.com/identity/sign-in/ios/quick-migration-guide)获得。

# ruby-on-rails-3.2 - RefineryCMS + 扩展图片上传自定义方法的路由

> ID：15848729
> 
> 赞同：0
> 
> 时间：2013-04-06T08:36:08.577
> 
> 标签：ruby-on-rails-3.2, routes, refinerycms

在我的 refinery-cms 应用程序中，我添加了一种自定义的图像上传方法。

没有问题就像我在 GemFile 代码中定义路由时一样，它可以工作。

但是我没有办法为该自定义方法扩展我的应用程序中存在的路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T03:35:45.107

利用

```
Spree::Core::Engine.routes.prepend do 
```

匹配 'URL' => 'Controller_with_scope#action_name', :as => :action_name

结尾

这将在申请之前加载您的自定义路线

# web-services - 使用 Fineuploader，我如何使用 HTTPS 端点？

> ID：15848730
> 
> 赞同：0
> 
> 时间：2013-04-06T08:36:08.943
> 
> 标签：web-services, https, fine-uploader

我对 javascript 比较陌生，并且我正在考虑使用一个名为 Fineuploader 的上传工具。但是在本地（开发机器）我让它工作（vb.net），但是当我把它放在我的外部服务器上时，我注意到有一个在http中完成的帖子并直接发送到服务器的域名（e/g/mydomain .com)，而不是 mydomain.com/testproject。该站点仅允许 https 流量。

有没有简单的方法来改变这个？（所以它应该指向[https://mydomain.com/testproject/FileUpload.aspx](https://mydomain.com/testproject/FileUpload.aspx)

Fineuploader 使用的代码显示了一个名为 'endpoint: '/FileUpload.aspx' 的参数

我是否必须为此 Web 服务更改 IIS 的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:44:59.610

如果需要开启 CORS（跨域请求），Fine Uploader 支持。您应该阅读[我的博客文章](http://blog.fineuploader.com/2013/01/31/cors-support-in-3-3/)，了解如何在 Fine Uploader 中实现 CORS 支持以及如何在服务器端代码中支持此类请求。

# ruby-on-rails - 给定 2 个字符串，获取长度大于 x 的所有单独子字符串短语的数组

> ID：15848732
> 
> 赞同：1
> 
> 时间：2013-04-06T08:36:27.987
> 
> 标签：ruby-on-rails, ruby

假设我们有一个字符串数组：

```
["carflam fizz peanut butter", "fizz foo", "carflam foo peanut butter"] 
```

function 的输出`get_array_of_substrings_larger_than(min)`，with `get_array_of_substrings_larger_than(3)`，应该是`["peanut butter", "carflam", "fizz"]`，因为至少有 2 个字符串共享这些元素中的每一个。

我不太清楚如何写这个。请注意，这与简单地将每个字符串与其他字符串进行比较并获取最大的子字符串不同——在上面的示例中，carflam 始终是第二个最大的子字符串。

`"peanut butter"`是在一起的，因为当你比较`"carflam fizz peanut butter"`and时`"carflam foo peanut butter"`，最大的公共子字符串是`"peanut butter"`. 第二大子字符串是`"carflam"`，它们都应该独立地在输出中，但是，`"peanut"`不`"butter"`应该在输出中，因为它们都包含在更大的子字符串中

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:23:40.373

因此，首先，我认为要明确您的要求是最大的短语，因为没有更好的词。我在示例数组中看到的最大子字符串实际上是`"carflam f"`and `" peanut butter"`。`ary`如果这是您使用的任何类中的已知数量，请随时更改参数：

```
def get_array_of_phrases_larger_than(ary, min)
  all = []

  # Ugly, but this will span the range of possible phrases for each item in the
  # array, building them into a one-dimensional array if they meet the minimum
  # length requirements
  ary.each do |phrase|
    words = phrase.split
    last = words.length - 1
    (0..last).each do |from|
      (from..last).each do |to|
        p = words[from..to].join(" ")
        all << p if p.size > min
      end
    end
  end

  # Get a list of all repeated keys
  repeated = all.group_by(&:to_s).select { |_, v| v.size > 1 }
  keys = repeated.keys

  # Get a list of the longest keys, such that we exclude "peanut" and "butter"
  # if "peanut butter" exists
  longest = repeated.select do |key, _|
    keys.select { |k| k.include?(key) }.size == 1
  end

  # Sort in reverse order by length
  longest.keys.sort_by { |k| -k.size }
end

@ary = ["carflam fizz peanut butter", "fizz foo", "carflam foo peanut butter"]

get_array_of_phrases_larger_than @ary, 3
# => ["peanut butter", "carflam", "fizz"] 
```

请注意，这与字符串的来源无关，因此您可能会遇到类似`["butter butter", "foo", "baz"]`返回的误报`["butter"]`，但我将把它作为练习留给读者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:44:48.310

也不`get_array_of_substrings_larger_than(3)`需要输出`fizz`，因为它比 3 长并且它在 2 个字符串中？

为了解决这个问题，您可以成对比较字符串并找到最长的公共子序列：[http ://en.wikipedia.org/wiki/Longest_common_subsequence_problem](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

要找到第二长的公共子序列，您可以从字符串中删除最长的公共子序列，因此如果找到`peanut butter`，要比较的新字符串是`"carflam fizz"`和`"carflam foo"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:13:07.827

从这里开始：

```
 a = ["carflam fizz peanut butter", "fizz foo", "carflam foo peanut butter"]

    phrases = {}

    index = 0;
    a.each do |s|
      words = s.split(' ')
      len = words.length
      (1..len).each do |phrase_len|
        (0..(len-phrase_len)).each do |start_word|
          if start_word >= 0
            phrase = words[start_word, phrase_len].join(' ')
            if phrases[phrase].nil?
              phrases[phrase] = []
            end
            phrases[phrase] << "(#{index}) #{s}";
          end
        end
      end
      index = index + 1;
    end

    phrases.each_pair do |phrase, indexes|
      puts "found *#{phrase}* of #{indexes.size} elements"
    end 
```

这为您提供了从短语到发生这种情况的索引的地图，我相信您可以让它做您想做的事〜

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:29:23.450

```
def get_array_of_phrases_larger_than(s, min)
    arr = []
    s.combination(2).to_a.each do |x;y,z|
    z = x.first.split(' ').select {|el| el.length > min }
    y = x.last.split(' ').select {|el| el.length > min }
        if (z & y).length == 1
             arr << (z & y).join(" ")
        else
            m = (z & y)
            (2..(m.length-1)).to_a.reverse.each do |l|
                m.combination(l).each do |com|
                 break arr << com.join(" "), arr << (m - com).join(" ") if (x.first.include? com.join(" ")) && (x.last.include? com.join(" "))
                end
            end
        end
    end
    p arr
end

s = ["carflam fizz peanut butter", "fizz foo", "carflam foo peanut butter"]
get_array_of_phrases_larger_than(s,2)
get_array_of_phrases_larger_than(s,3)
get_array_of_phrases_larger_than(s,4) 
```

***输出：***

```
["fizz", "peanut butter", "carflam", "foo"]
["fizz", "peanut butter", "carflam"]
["peanut butter", "carflam"] 
```

# java - 使用命令行参数调用其他类？

> ID：15848735
> 
> 赞同：1
> 
> 时间：2013-04-06T08:36:56.313
> 
> 标签：java

我正在编写一个程序，其中我使用 2 个命令行参数 - 第一个选择 3 个支持类中的 1 个，第二个是 int 输入值。

这让我在很多层面上都非常困惑，但我想学习的主要内容是如何从 App 类中引用/调用支持方法。

到目前为止，我的计划是：使用 if-else（即，如果 args[0] = 1 则 this&that；如果 args[0] = 2 then this&that 等）

我在正确的轨道上吗？目前，我什至不知道“这个&那个”会是什么。我猜这将是我调用其他类的语句 - 我将如何做到这一点？

我在自学，真的不容易：）

感谢您的时间和知识！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:43:19.087

如果您的支持类*都只*采用一个整数，您可以使用适当的方法使它们都实现相同的接口。然后，您可以使用任何各种方法根据第一个命令行参数创建类的实例：

*   你可以使用[`Class.forName()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)然后[`Class.newInstance()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)
*   您可以在 Java 7 中使用 switch 语句
*   `equals`您可以使用 if/else 语句（记住使用而不是检查相等性`==`

一旦获得了接口的某个实现的实例，就可以使用`Integer.parseInt`or解析第二个命令行参数`DecimalFormat`，然后调用接口上的方法。

# classpath - Simbad 需要 Java 3D

> ID：15848736
> 
> 赞同：0
> 
> 时间：2013-04-06T08:37:09.440
> 
> 标签：classpath, setup-deployment, java-3d

语境：

*   微软视窗 8,
*   由 MS Windows 安装程序预装的 jre7，
*   MS Windows PATH 环境变量已设置为 JRE7 bin 文件夹 - C:\Program Files (x86)\Java\jre7\bin，
*   [simbad-1.4.jar](http://simbad.sourceforge.net/)被下载到本地文件夹中。

用例：

*   simbad-1.4.jar 通过命令行运行

    java -jar simbad-1.4.jar

*   或者只需双击 simbad-1.4.jar

在这两种情况下

```
Simbad requires Java 3D 
```

出现错误消息框。

是的，我知道，设置[Java 3D](http://java3d.java.net/binary-builds.html)应该可以解决这个问题，但我只想在 simbad-1.4.jar IOW 的子文件夹中提供/设置 Java 3D，以便不将 Java 3D 安装到标准 C 中： \Program Files (x86)\Java\Java3D 位置。

请告知我如何设置与 simbad-1.4.jar 一起打包的 Java 3D，或者回答一个更一般的问题：

*   *如何部署使用 Java 3D 与 Java 3D 库打包在一起的 Java 客户端应用程序？*

PS 我知道并且我已经使用 -classpath 选项成功运行了我使用 Eclipse 导出的其他示例 Java 客户端应用程序的 .jar，但它们既没有使用 Java 3D 也没有使用 simbad-1.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T21:37:20.420

我使用的是稍微不同的环境（Win7-64bit，JDK 1.7），但这也适用于您的环境。

1.  [从https://java3d.java.net/binary-builds.html](https://java3d.java.net/binary-builds.html)下载 java3d .zip 包
2.  解压下载的文件，还有一个名为“j3d-jre.zip”的压缩文件
3.  将“j3d-jre.zip”解压缩到要打包在一起的目录中。
4.  将simbad jar文件放在该目录中。
5.  创建一个包含以下行的 DOS 批处理文件：

```
    @echo 关闭
    设置 CLASSPATH=.;.\lib\ext\j3dcore.jar;.\lib\ext\j3dutils.jar;.\lib\ext\vecmath.jar;.\simbad-1.4.jar
    设置 PATH=%PATH%;.\bin
    java -classpath %CLASSPATH% simbad.gui.Simbad

```

希望这可以帮助。

# sql - “分组依据”创建问题

> ID：15848740
> 
> 赞同：0
> 
> 时间：2013-04-06T08:38:18.380
> 
> 标签：sql, database, join

我的查询如下：

```
select 
  AVG(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Market_Rate ELSE 0 END) AS AVGBuyRate , 
  AVG(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS AVGSellRate,
  CONVERT(VARCHAR(11),sauda_date) AS sauda_date,  
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS BuyQty,
  SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS SellQty ,     
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) -SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) AS CarryForword 
from tradefile 
where scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "'
  and INST_TYPE LIKE 'FUT%' 
group by CONVERT(VARCHAR(11),sauda_date)" 
```

在这个查询中，我使用了 group by sauda_date。

它按 sauda_date 对它进行分组，但首先对当前月份的值进行分组，然后对上个月的值进行分组。

我想要完全相反，它应该在二月之前分组，然后三月。

我的数据可视化工具如下：

![在此处输入图像描述](https://i.stack.imgur.com/WftMQ.jpg)

在这里我们可以看到它应该首先显示 2013 年 2 月 28 日的值，然后显示 3 月的值。

我还尝试了通过以下查询订购：

```
select AVG(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Market_Rate ELSE 0 END) AS AVGBuyRate , AVG(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS AVGSellRate,  CONVERT(VARCHAR(11),sauda_date) AS sauda_date,SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS BuyQty,SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS SellQty ,     SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) -SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) AS CarryForword from tradefile where scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and INST_TYPE LIKE 'FUT%' order by CONVERT(VARCHAR(11),sauda_date) desc 
```

但它给了我以下错误：

```
Column 'tradefile.Sauda_Date' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause. 
```

**注意：** sauda 日期是 nvarchar

我的查询中有什么错误？

我应该在其中添加更多内容吗？

编辑查询：

```
select 
  AVG(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Market_Rate ELSE 0 END) AS AVGBuyRate , 
  AVG(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS AVGSellRate,
  CONVERT(VARCHAR(11),sauda_date) AS sauda_date,  
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS BuyQty,
  SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS SellQty ,     
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) -SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) AS CarryForword 
from tradefile 
where scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "'
  and INST_TYPE LIKE 'FUT%' 
group by CONVERT(VARCHAR(11),sauda_date) order by CONVERT(VARCHAR(11),sauda_date) desc 
```

![在此处输入图像描述](https://i.stack.imgur.com/pCyLN.png) 请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:45:26.473

您可以使用**order by** sauda_date 使其成为您想要的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:57:48.103

```
select 
  AVG(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Market_Rate ELSE 0 END) AS AVGBuyRate , 
  AVG(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS AVGSellRate,
  CONVERT(VARCHAR(11),sauda_date) AS sauda_date,  
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS BuyQty,
  SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS SellQty ,     
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) -SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) AS CarryForword 
from tradefile 
where scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "'
  and INST_TYPE LIKE 'FUT%' 
group by CONVERT(VARCHAR(11),sauda_date) order by CONVERT(VARCHAR(11),sauda_date) asc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:22:10.333

```
select 
  AVG(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Market_Rate ELSE 0 END) AS AVGBuyRate , 
  AVG(CASE WHEN Buy_sell = 2 THEN Market_Rate ELSE 0 END) AS AVGSellRate,
  CONVERT(VARCHAR(11),sauda_date) AS sauda_date,  
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS BuyQty,
  SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' and Sauda_Date between convert(datetime,'" + dtpForDate.Value.Date.ToString("dd/MM/yyyy") + "') and convert(datetime,'" + dtpToDate.Value.Date.ToString("dd/MM/yyyy") + "') THEN Trade_Qty ELSE 0 END) AS SellQty ,     
  SUM(CASE WHEN Buy_sell = 1 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) -SUM(CASE WHEN Buy_sell = 2 and scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "' THEN Trade_Qty ELSE 0 END) AS CarryForword 
from tradefile 
where scrip_code='" + ds.Tables[0].Rows[i][2].ToString() + "'
  and INST_TYPE LIKE 'FUT%' 
group by sauda_date order by sauda_date asc 
```

这应该工作！

# php - 将这 2 个 MySQL 查询合并为一个

> ID：15848749
> 
> 赞同：1
> 
> 时间：2013-04-06T08:39:33.220
> 
> 标签：php, mysql, sql, distance

我给你解释问题。我有两个表：“列表”，其中包含我所有具有不同信息的列表，特别是一个：城市 ID。我有第二张表“城市”，其中包含我国家所有城市的完整列表，其中包含许多信息：纬度、经度、城市名称等。

我想在列表中显示按实际点（地理定位，我有纬度/经度）和城市之间的距离排序的所有列表。

实际上，我使用 2 个 MySQL 查询来执行此操作，并且可以正常工作：

```
$formula = "(6366*acos(cos(radians($latitude))*cos(radians(`latitude`))*cos(radians(`longitude`) -radians($longitude))+sin(radians($latitude))*sin(radians(`latitude`))))";

        $q = "SELECT *,$formula AS dist FROM ".$this->db_city." WHERE $formula<='$distance' ORDER by dist ASC";
        $q = $this->db->query($q);
$resultSQL = $q->result_array(); 
```

和这个 ：

```
if ($localization != ''){
            if ($whereClause == ''){
                //$whereClause .= ' WHERE address_city LIKE "'.$localization.'"';
                $loc = '';
                foreach ($localization as $key => $value) {
                    if ($loc == ''){
                        $loc .= '"'.$value.'"';
                    }else{
                        $loc .= ', "'.$value.'"';
                    }
                }
                $whereClause .= ' WHERE address_city IN ('.$loc.')';
            }else{
                //$whereClause .= ' && address_city LIKE "'.$localization.'"';
                $loc = '';
                foreach ($localization as $key => $value) {
                    if ($loc == ''){
                        $loc .= '"'.$value.'"';
                    }else{
                        $loc .= ', "'.$value.'"';
                    }
                }
                $whereClause .= ' && address_city IN ('.$loc.')';
            }
        }

        $q = "SELECT * FROM ".$this->db_listing.$whereClause." ORDER BY created_stamp DESC"; 
```

这是可行的，但问题是我在第二个查询中没有可访问的“dist”参数，所以我不能按 dist 排序。解决方案是将第一个大查询（带有公式的那个）与第二个合并。

我尝试使用 LEFT JOIN，但没有成功。你能帮我吗 ？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:48:30.860

试试这个，它将返回所有与提供的经度和纬度半径为 $distance 的城市。

```
"SELECT *,(((acos(sin(($latitude*pi()/180)) * sin((`latitude`*pi()/180))+cos(($latitude*pi()/180)) * cos((`Latitude`*pi()/180)) * cos((($longitude- 
    `longitude`)*pi()/180))))*180/pi())*60*1.1515) AS distance FROM location WHERE (((acos(sin(($latitude*pi()/180)) * sin((`latitude`*pi()/180))+cos(($latitude*pi()/180)) * cos((`Latitude`*pi()/180)) * cos((($longitude- 
    `longitude`)*pi()/180))))*180/pi())*60*1.1515) <= $distance" 
```

谢谢。

# date - 我如何在语义上定义标记“现在”

> ID：15848751
> 
> 赞同：5
> 
> 时间：2013-04-06T08:40:03.717
> 
> 标签：date, time, microformats, html

我正在使用***时间***标签来定义时间——这似乎是正确的方法；-)

然而，我的问题是我想在***时间***标签中放置的值是 NOW: *the present*。我收到此验证错误：

```
The text content of element time was not in the required format:
The literal did not satisfy the time-datetime format." 
```

查看规范，似乎无法定义*'NOW'*。这很麻烦。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T10:56:42.777

你不能。HTML5 中的[`time`元素](http://www.w3.org/TR/html5/text-level-semantics.html#the-time-element)被定义为特定时刻或时间段或持续时间或时间偏移的标记，而不是所有与时间相关的概念。

您可以编写 eg `<time datetime="2013-04-06T13:53">now</time>`，从而将固定的时间时刻与文本内容“现在”相关联。我看不出这有什么用处，而且该`time`元素的实用性通常是值得怀疑的（它看起来像是为了标记而标记），但是你可以做这样的事情来“定义'现在'”用`time`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T11:16:39.827

我现在正在使用这个标记：

```
<time datetime="2013">Present</time> 
```

没有更多的错误，它是象征性的。可惜现在没有可接受的变量。

# visual-studio-2010 - PRAGMA foreign_keys = ON 不生效？

> ID：15848766
> 
> 赞同：0
> 
> 时间：2013-04-06T08:41:26.503
> 
> 标签：visual-studio-2010, sqlite, foreign-keys

这是我用过的最烦人的事情。据我了解，当打开一个新的查询窗口时，会创建一个新的连接，但是在 SQLite 查询窗口中（我正在使用 Visual Studio 集成的 SQLite 设计器），似乎每次单击执行时都会创建它（红色！）按钮。而 PRAGMA foreign_keys = ON 似乎只在连接会话中生效（意味着连接关闭后变为 0/OFF）。如果我错了，请向我解释为什么会发生这种情况：

-> 首先，我右键单击**SQLite [我的数据库]**（在 Visual Studio 2010的**Server Explorer窗口中的****Data Connections**节点下方）-> 选择**New Query** -> 开始输入**PRAGMA foreign_keys** -> 显示结果：0 ->尝试通过**PRAGMA foreign_keys = ON打开它 -> 通过****PRAGMA** foreign_keys检查它是否打开-> 仍然显示结果：0 =>>>> ***What???***

 *****这意味着我无法打开它，也无法从外键约束中受益以保持我的数据完整。

如果**foreign_keys是数据库或表的某个属性，那么****一旦我打开它**，它应该总是 ON/1 。因此，我认为“液体”的东西是 Connection 的一些属性。无法使用它。

请帮助...谢谢！*****

# xml - XSLT：根据以下兄弟值返回结果

> ID：15848768
> 
> 赞同：1
> 
> 时间：2013-04-06T08:41:54.627
> 
> 标签：xml, xslt, xpath

我对 XSLT 还很陌生。任何帮助，将不胜感激 ....

```
<Test>
  <loop loop_id="5" LoopElementOrder_no="1" Segment_id="3" >
     <usage_id>1</usage_id>
    <value>41</value>
  </loop>
  <loop loop_id="5" LoopElementOrder_no="2"  Segment_id="3">
    <usage_id>1</usage_id>
     <value>2</value>
      </loop>
  <loop loop_id="5" LoopElementOrder_no="4" Segment_id="3">
     <usage_id>2</usage_id>
     <value>raj</value>
      </loop>
  <loop loop_id="5" LoopElementOrder_no="5" Segment_id="3">
     <usage_id>3</usage_id>
      <value>d</value>
    </loop>
  <loop loop_id="5"  LoopElementOrder_no="6" Segment_id="3">
    <usage_id>3</usage_id>  
      <value>8</value>
  </loop>
  <loop loop_id="5"  LoopElementOrder_no="7" Segment_id="3">
    <usage_id>3</usage_id>
      <value>7</value>
  </loop>
  <loop loop_id="5" LoopElementOrder_no="1" Segment_id="4">
       <usage_id>1</usage_id>

    <value>IC</value>
      </loop>
  <loop loop_id="5"  LoopElementOrder_no="2" Segment_id="4">
  <usage_id>2</usage_id>
      <value>d</value> 
  </loop>
 <loop loop_id="5"  LoopElementOrder_no="3" Segment_id="4">
      <usage_id>3</usage_id>
          <value>dm</value> 
      </loop> 
 <loop loop_id="5"  LoopElementOrder_no="4" Segment_id="4">
      <usage_id>2</usage_id>
          <value>wj</value> 
      </loop> 
    </Test> 
```

我只想在其usage_id为1或2时返回“值”。如果usage_id为3，它应该返回“N/A”。但是，例如，如果我在 Segment_id=3 LoopElementOrder_no=5 中，则 Segment_id=3 的剩余部分不包含任何 Usage_id 作为 1 或 2，在这种情况下，我需要返回“^”并使用 LoopElementOrder_no 从 Segment_id=4 继续它=1。

上述所需的输出是：

```
41 2 raj ^IC d N/A wj 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:41:47.520

请试一试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="loop">
    <xsl:value-of select="concat(value, ' ')"/>
  </xsl:template>

  <xsl:template match="loop[usage_id = 3]">
    <xsl:variable name="segmentId" select="@Segment_id" />
    <xsl:variable name="following12"
                  select="following-sibling::loop[@Segment_id = $segmentId]
                                                 [usage_id = 1 or usage_id = 2]" />
    <xsl:apply-templates
      select="current()[not(preceding-sibling::loop[1]
                                                   [@Segment_id = $segmentId]
                                                   [usage_id = 3])
                        and not($following12)]" mode="carat" />
    <xsl:apply-templates select="current()[$following12]" mode="na" />
  </xsl:template>

  <xsl:template match="loop" mode="na">
    <xsl:text>N/A </xsl:text>
  </xsl:template>

  <xsl:template match="loop" mode="carat">
    <xsl:text>^</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
41 2 raj ^IC d N/A wj 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:36:40.623

**一个更短、更简单（只有三个模板， no `xsl:apply-templates`​​、 no `xsl:variable`、 no`current()`和 no 模式）和更易于理解的解决方案，完全采用“推式”：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="loop[not(usage_id >2)]">
  <xsl:value-of select="concat(value, ' ')"/>
 </xsl:template>

 <xsl:template match=
 "loop[usage_id = 3
     and preceding-sibling::loop[not(usage_id >2)][1]/@Segment_id
        =following-sibling::loop[not(usage_id >2)][1]/@Segment_id
      ]
 ">N/A </xsl:template>

 <xsl:template match=
 "loop
   [usage_id >2
  and
    preceding-sibling::loop[1][not(usage_id >2)]
  and
    not(@Segment_id =following-sibling::loop[not(usage_id >2)][1]/@Segment_id)
    ]">^ </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Test>
  <loop loop_id="5" LoopElementOrder_no="1" Segment_id="3" >
     <usage_id>1</usage_id>
    <value>41</value>
  </loop>
  <loop loop_id="5" LoopElementOrder_no="2"  Segment_id="3">
    <usage_id>1</usage_id>
     <value>2</value>
      </loop>
  <loop loop_id="5" LoopElementOrder_no="4" Segment_id="3">
     <usage_id>2</usage_id>
     <value>raj</value>
      </loop>
  <loop loop_id="5" LoopElementOrder_no="5" Segment_id="3">
     <usage_id>3</usage_id>
      <value>d</value>
    </loop>
  <loop loop_id="5"  LoopElementOrder_no="6" Segment_id="3">
    <usage_id>3</usage_id>
      <value>8</value>
  </loop>
  <loop loop_id="5"  LoopElementOrder_no="7" Segment_id="3">
    <usage_id>3</usage_id>
      <value>7</value>
  </loop>
  <loop loop_id="5" LoopElementOrder_no="1" Segment_id="4">
       <usage_id>1</usage_id>

    <value>IC</value>
      </loop>
  <loop loop_id="5"  LoopElementOrder_no="2" Segment_id="4">
  <usage_id>2</usage_id>
      <value>d</value>
  </loop>
 <loop loop_id="5"  LoopElementOrder_no="3" Segment_id="4">
      <usage_id>3</usage_id>
          <value>dm</value>
      </loop>
 <loop loop_id="5"  LoopElementOrder_no="4" Segment_id="4">
      <usage_id>2</usage_id>
          <value>wj</value>
      </loop>
</Test> 
```

**产生了想要的正确结果：**

```
41 2 raj ^ IC d N/A wj 
```

* * *

**更新**：

**该解决方案可以进一步缩短和简化：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="loop[not(usage_id >2)]">
   <xsl:if test=
   "preceding-sibling::loop[not(usage_id >2)][1]
      [not(@Segment_id = current()/@Segment_id)]">^ </xsl:if>
   <xsl:value-of select="concat(value, ' ')"/>
 </xsl:template>

 <xsl:template match=
 "loop[usage_id = 3
     and preceding-sibling::loop[not(usage_id >2)][1]/@Segment_id
        =following-sibling::loop[not(usage_id >2)][1]/@Segment_id
      ]
 ">N/A </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

# python - 在python中解析GSM调制解调器收到的消息参数

> ID：15848770
> 
> 赞同：2
> 
> 时间：2013-04-06T08:41:56.130
> 
> 标签：python, regex, parsing, gsm, at-command

我正在尝试解析从 python 中的 GSM 调制解调器收到的消息。

我有很多需要解析的消息。我每隔几个小时左右就会收到新消息。

这是我通过使用串行对象将数据从调制解调器读取到列表 x 后收到的数据示例。

```
AT+CMGL="ALL"

+CMGL: 1,"REC READ","+918884100421","","13/04/05,08:24:36+22"
here's message one 

+CMGL: 2,"REC READ","+918884100421","","13/04/05,09:40:38+22"
here's message two

+CMGL: 3,"REC READ","+918884100421","","13/04/05,09:41:04+22"
here's message three

+CMGL: 4,"REC READ","+918884100421","","13/04/05,10:04:18+22"
here's message four

+CMGL: 5,"REC READ","+918884100421","","13/04/05,10:04:32+22"
here's message five

.
.
.
.
. 
```

还有很多消息，我在这里只列出了五个。

我的主要目的是提取消息的内容，例如我收到的每条消息的“这里是消息一”等等。

这是我现在正在使用的代码。

```
def reading():
     print "Reading all the messages stored on SIM card"
     phone.write(b'AT+CMGL="ALL"\r')
     sleeps()
     x=phone.read(10000)
     sleeps()
     print x
     print "Now parsing the message!"
     k="".join(x)
     parse(k)
     k=""
def parse(k):
    m = re.search("\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\r\n(.+)\r\n",k)
    print "6="
    print m.group(6) 
```

电话是我用来从 GSM 调制解调器读取的串行对象。

这里 m.group(6) 是捕获第一条消息“here's message one”的消息内容

我怎样才能让它匹配所有消息的内容，而不仅仅是第一个。

我尝试设置多行标志，但没有奏效。也没有使用 re.findall() 代替 re.search()。

re.search 返回的匹配对象也是不可迭代的。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:41:07.800

为此使用正则表达式不是一个非常强大的解决方案，因为它不会处理不同电话行为的变化。在您的示例中，响应的格式是

```
+CMGL: 1,"REC READ","+918884100421","","13/04/05,08:24:36+22" 
```

但其他手机会给出类似的回复

```
+CMGL: 1,"REC READ","+31612123738",,"08/12/22,11:37:52+04" 
```

注意第四个参数的区别，`""`而不是什么。检查[27.005](http://www.3gpp.org/ftp/Specs/html-info/27005.htm)，文本模式下响应的语法是

```
+CMGL: <index>,<stat>,<oa/da>,[<alpha>],[<scts>][,<tooa/toda>,<length>]<CR><LF>
<data><CR><LF> 
```

并且`<alpha>`确实是可选的。是的，可能会编写一个考虑到这一点的正则表达式，但是你会陷入[两个问题 land](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)。

* * *

我建议您做的是切换到对响应进行正确解析，即：从第一个字符开始并根据预期的参数格式（和存在）分块推进。请参阅[此答案](https://stackoverflow.com/a/1311672/23118)以获取仅提取电话号码的快速而肮脏的方法。它不如我在下面描述的算法那么健壮（例如`comma + 2`假设太多）。

解析响应的绝对正确算法是：

匹配行首的前缀（例如`+CMGL:`）。然后开始解析区分以下标记：

*   空白`' '`或`'\t'`
*   逗号`','`
*   双引号`'"'`
*   回车`'\r'`
*   换行`'\n'`
*   任何非空白非逗号非双引号非cr非lf字符

对于每个参数，首先忽略任何前导空格。如果得到逗号，则参数不存在，继续解析下一个参数。如果得到回车，下一个字符应该是换行符并到达行尾。如果得到一个非空白非...字符，这是一个数字参数的开始。收集此参数后面的所有非空白非...字符。在此之后，唯一的合法字符应该是零个或多个空格，后跟逗号或回车。如果让双引号字符前进到下一个双引号字符，那就是字符串的结尾（这是安全且正确的，因为即使字符串应该包含双引号字符，它们也会被转义但不是`\"`）。在此之后，唯一的合法字符应该是零个或多个空格，后跟逗号或回车。

上面的内容一开始可能看起来有点不知所措，但当你开始处理它时，它真的没有那么复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:02:33.053

因为我没有得到你的材料，所以我只是做一个样品。

```
'\xef\xbb\xbfAT+CMGL="ALL"\n\n+CMGL: 1,"REC READ","+918884100421","","13/04/05,08:24:36+22"\nhere\'s message one \n\n+CMGL: 2,"REC READ","+918884100421","","13/04/05,09:40:38+22"\nhere\'s message two\n\n+CMGL: 3,"REC READ","+918884100421","","13/04/05,09:41:04+22"\nhere\'s message three\n\n+CMGL: 4,"REC READ","+918884100421","","13/04/05,10:04:18+22"\nhere\'s message four\n\n+CMGL: 5,"REC READ","+918884100421","","13/04/05,10:04:32+22"\nhere\'s message five\n' 
```

这来自您使用`''.join()`. 然后我使用您的正则表达式模式，只需将 替换为`\r\n`因为`\n`我使用的示例使用`\n`. 我得到了结果。我不知道为什么`findall`不适合你。

```
def parse(x):
    res = []
    match = re.finditer("\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\n(.+)\n", x)
    for each in match:
        res.append(each.group(6))
    return res 
```

我得到的结果是`["here's message one ", "here's message two", "here's message three", "here's message four", "here's message five"]`. `finditer`返回一个迭代器，`findall`也可以正常工作。

```
 def parse(x):
        res = []
        match = re.findall("\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\n(.+)\n", x)
        for each in match:
            res.append(each[5])
        return res 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:51:27.737

如果消息总是在换行符上

```
(?:[\n\r]+|^)\+CMGL.*?[\n\r]+(.*?)(?=[\n\r]+|$) 
```

第 1 组包含您需要的**消息**

# c# - c# - “NullReferenceException 未处理”但 List 不为空

> ID：15848771
> 
> 赞同：0
> 
> 时间：2013-04-06T08:41:57.770
> 
> 标签：c#, winforms

我试图让一个列表框（AlbumsListBox）列出列表（AlbumList）中的所有内容。

AlbumList 和 AlbumsListBox 都是在 FormMain 上创建的。创建一个新专辑（在 FormAlbumAC 上的 NameTextBox.Text 中定义 Album.Name）以进入 FormAlbumAC 上的 AlbumList。

从我所见，使 AlbumsList 成为 AlbumsListBox 的数据源似乎是正确的方法。但是当我运行程序时出现错误“NullReferenceException 未处理，对象引用未设置为对象的实例”。

FormAlbumAC 摘录的第 16 行就是它出现的地方。

```
formMain.AlbumsListBox.DataSource = MusicCollection.FormMain.PublicVars.AlbumList; 
```

我不明白为什么会这样，因为在那之前的消息框显示 AlbumList.Count = 1，所以 AblumList 不为空？

我究竟做错了什么？这是实现我想要的正确方法吗？我怎样才能解决这个问题？任何建议表示赞赏，谢谢。

表格FormAlbumAC：

```
private FormMain formMain;

public FormAlbumAC(FormMain callerInstance)
{
    InitializeComponent();
    formMain = callerInstance;
}

private void buttonSave_Click(object sender, EventArgs e)
{
    if (MusicCollection.FormMain.PublicVars.AlbumList.Count != 100)
    {
        MusicCollection.FormMain.PublicVars.AlbumList.Add(new Album(NameTextBox.Text));

        MessageBox.Show("New Album added: " + NameTextBox.Text);
        MessageBox.Show(MusicCollection.FormMain.PublicVars.AlbumList.Count.ToString());
        formMain.AlbumsListBox.DataSource = MusicCollection.FormMain.PublicVars.AlbumList;
        this.Close();
    }
    else
    {
        MessageBox.Show("No room for new album.");
        this.Close();
    }
} 
```

窗体主窗体：

```
public const int MAX_ALBUMS = 100;

public FormMain()
{
    InitializeComponent();
}

private void buttonAddAlbum_Click(object sender, EventArgs e)
{
    FormAlbumAC addAlbumForm = new FormAlbumAC(this);
    addAlbumForm.ShowDialog();
}

public static class PublicVars
{
    public static List<Album> AlbumList { get; set; }

    static PublicVars()
    {
        AlbumList = new List<Album>(MAX_ALBUMS);
    }
}

public ListBox AlbumListBox
{
    get
    {
        return AlbumListBox;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:57:46.103

局部变量`private FormMain formMain;`从未被初始化。
因此，当您在失败线上使用它时为 NULL。

您正试图`FormMain`通过 FormMain 类型的实例变量使用静态存储在类中的信息。但是这个变量是 NULL 并且不能访问数据。

您可以使用删除错误

```
 formMain = new FormMain();
 formMain.AlbumsListBox.DataSource = MusicCollection.FormMain.PublicVars.AlbumList;
 .... 
```

但在这一点上，我认为你会有其他问题，因为这个本地实例与`FormMain`我想创建的当前实例不同的 FormMain 实例`FormAlbumAC`
如果我的假设是正确的，那么你需要传递那个`FormMain`实例在类内部创建`FormAlbumAC`。

```
private FormMain formMain;

public FormAlbumAC(FormMain callerInstance)
{
    InitializeComponent();
    formMain = callerInstance;
} 
```

然后，在 FormMain 的某个地方，当你构造 FormAlbumAC

```
....
FormAlbumAC album = new FormAlbumAC(this);
album.ShowDialog();
.... 
```

# sql - 如何在 SQL Server 2005 中设置增量列

> ID：15848772
> 
> 赞同：-2
> 
> 时间：2013-04-06T08:42:12.140
> 
> 标签：sql, sql-server, tsql

我有 SQL Server 表`tbl_Slide_master`。它有一`slide_position`列为`int`. 但是，当管理员想要添加新幻灯片时，该列从该列的现有最大值增加 1。我也想更新这个字段。

有关更多信息，我包含了此代码。

```
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[sp_InsertNewSlide]
(
    @Header_text varchar(25),
    @ImageName varchar(50),
    @Img_height int,
    @Img_width int,
    @Para_text varchar(520),
    @NewId INT OUTPUT
)
AS
BEGIN TRAN;
    BEGIN TRY
        INSERT INTO [OmStocks].[dbo].[tbl_Slide_master]
           ([Header_text]
           ,[ImageName]
           ,[Img_height]
           ,[Img_width]
           ,[Para_text]
           ,[slide_position]
            )
          VALUES
           (@Header_text,@ImageName,@Img_height,@Img_width,@Para_text,SELECT MAX(slide_position)+1)
        SET @NewId= SCOPE_IDENTITY()
    COMMIT TRAN;
    END TRY 

    BEGIN CATCH
    ROLLBACK TRAN;
        DECLARE @ErrMsg nvarchar(4000), @ErrSeverity int;
        SELECT @ErrMsg = ERROR_MESSAGE(), @ErrSeverity = ERROR_SEVERITY();
        RAISERROR(@ErrMsg, @ErrSeverity, 1);
  END CATCH; 
```

发生了一个错误，例如

> 消息 1046，级别 15，状态 1，过程 sp_InsertNewSlide，第 21 行在
> 此上下文中不允许子查询。只允许标量表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:50:09.247

在您的`VALUES`条款中，您有：

```
SELECT MAX(slide_position)+1 
```

这不是一个有效的子查询，因为它不包括查询中的表名。

我不清楚这个递增字段的逻辑，所以我假设您只想要表中当前的最大值：

```
SELECT MAX(slide_position)+1 FROM tbl_Slide_master 
```

但是，如果这只是一个普通的标识字段，则应`IDENTITY (1,1)`在表创建脚本中将其声明为字段，并简单地让 SQL Server 管理它。

# c++ - 嵌套初始化列表的构造函数

> ID：15848781
> 
> 赞同：4
> 
> 时间：2013-04-06T08:43:27.213
> 
> 标签：c++, c++11, constructor, generic-programming, initializer-list

是否有可能有一个通用构造函数接受任何类型的初始化列表，即使其中有嵌套列表？

假设您具有以下部分模板特化，该类接受其构造函数嵌套初始化程序列表：

模板类ClassA；

```
template <>
class ClassA<4> {

  typedef std::initializer_list<double> list_type;
  typedef std::initializer_list<list_type> llist_type;
  typedef std::initializer_list<llist_type> lllist_type;
  typedef std::initializer_list<lllist_type> initializer_type;

  size_t n_[4] = {0};
  double* data_;

public:

  ClassA(initializer_type l) {

    assert(l.size() > 0);
    assert(l.begin()->size() > 0);
    assert(l.begin()->begin()->size() > 0);
    assert(l.begin()->begin()->begin()->size() > 0);

    size_t m = n_[0] = l.size();
    size_t n = n_[1] = l.begin()->size();
    size_t o = n_[2] = l.begin()->begin()->size();
    n_[3] = l.begin()->begin()->begin()->size();

    data_ = new double[m*n*o*n_[3]];

    int i=0, j=0, k=0, p=0;
    for (const auto& u : l) {
      assert(u.size() == n_[1]);
      for (const auto& v : u) {
        assert(v.size() == n_[2]);
        for (const auto& x : v) {
          assert(x.size() == n_[3]);
          for (const auto& y : x) {
            data_[i + m*j + m*n*k + m*n*o*p] = y;
            ++p;
          }
          p = 0;
          ++k;
        }
        k = 0;
        ++j;
      }
      j = 0;
      ++i;
    }
  }

  size_t size() const {
    size_t n = 1;
    for (size_t i=0; i<4; ++i)
      n *= n_[i];
    return n;
  }

  friend std::ostream& operator<<(std::ostream& os, const ClassA& a) {
    for (int i=0; i<a.size(); ++i)
      os<<" "<<a.data_[i];
    return os<<endl;
  }

};

int main()
{

  ClassA<4> TT = { {{{1.}, {7.}, {13.}, {19}}, {{2}, {8}, {14}, {20}}, {{3}, {9}, {15}, {21}}}, {{{4.}, {10}, {16}, {22}}, {{5}, {11}, {17}, {23}}, {{6}, {12}, {18}, {24}}} };
  cout<<"TT -> "<<TT<<endl;

  return 0;
} 
```

此代码打印：

```
TT ->  1 4 2 5 3 6 7 10 8 11 9 12 13 16 14 17 15 18 19 22 20 23 21 24 
```

现在，我试图概括构造函数，这样我就不必为每个维度专门化类模板。问题是当我用类似的东西替换构造函数时：

```
template <class L>
ClassA(std::initializer_list<L> l) {
  cout<<"generic list constructor"<<endl;
} 
```

编译器`clang`失败并出现错误：

```
error: no matching constructor for initialization of 'ClassA<4> 
```

有人可以指出为什么会这样吗？模板匹配不适用于初始化列表，可能是因为这是一个新的 C++ 功能？谢谢你们...

**编辑**

感谢@JohannesSchaub-litb 和@Daniel Frey 的帮助，我能够制作一个非常通用的构造函数，它采用任何维度的initializer_list。这是生成的代码：

```
template <int d, typename T>
class ClassA {

  size_t n_[d] = {0};
  T* data_;

  template <int D, typename U>
  struct Initializer_list {

    typedef std::initializer_list<typename Initializer_list<D-1,U>::list_type > list_type;

    Initializer_list(list_type l, ClassA& a, size_t s, size_t idx) {

      a.n_[d-D] = l.size();

      size_t j = 0;
      for (const auto& r : l)
        Initializer_list<D-1, U> pl(r, a, s*l.size(), idx + s*j++);
    }
  };

  template <typename U>
  struct Initializer_list<1,U> {

    typedef std::initializer_list<T> list_type;

    Initializer_list(list_type l, ClassA& a, size_t s, size_t i) {

      a.n_[d-1] = l.size();
      if (!a.data_)
        a.data_ = new T[s*l.size()];

      size_t j = 0;
      for (const auto& r : l)
        a.data_[i + s*j++] = r;
    }
  };

  typedef typename Initializer_list<d,T>::list_type initializer_type;

public:

  // initializer list constructor
  ClassA(initializer_type l) : data_(nullptr) {
    Initializer_list<d, T> r(l, *this, 1, 0);
  }

  size_t size() const {
    size_t n = 1;
    for (size_t i=0; i<4; ++i)
      n *= n_[i];
    return n;
  }

  friend std::ostream& operator<<(std::ostream& os, const ClassA& a) {
    for (int i=0; i<a.size(); ++i)
      os<<" "<<a.data_[i];
    return os<<endl;
  }
};

int main()
{

  ClassA<4, double> TT = { {{{1.}, {7.}, {13.}, {19}}, {{2}, {8}, {14}, {20}}, {{3}, {9}, {15}, {21}}}, {{{4.}, {10}, {16}, {22}}, {{5}, {11}, {17}, {23}}, {{6}, {12}, {18}, {24}}} };
  cout<<"TT -> "<<TT<<endl;

  return 0;
} 
```

当然，代码打印

```
TT ->  1 4 2 5 3 6 7 10 8 11 9 12 13 16 14 17 15 18 19 22 20 23 21 24 
```

我喜欢这个模板元编程的东西！谢谢你们帮助解决这个问题。

啊

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T14:36:29.187

我相信你真正想做的是自动构建正确的类型

```
template<int S, typename E>
class make_list_type {
public:
  typedef std::initializer_list<
    typename make_list_type<S-1, E>::type
  > type;
};

template<typename E>
class make_list_type<0, E> {
public:
  typedef E type;
};

template<int S>
class ClassA {
  typedef typename make_list_type<S, double>::type initializer_type;

public:
  ClassA(initializer_type l) 
}; 
```

至于为什么您的尝试不起作用，请参阅[模板并不总是猜测初始值设定项列表类型](https://stackoverflow.com/questions/7699963/templates-dont-always-guess-initializer-list-types/7700093#7700093)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:17:13.690

一般来说，答案是（AFAIK）：不。但是对于您的具体情况，您可能会使用所有以`double`叶子结尾的知识：

```
class arg_type
{
private:
    bool is_value;
    double d;
    std::vector<arg_type> subs;
public:
    arg_type(double v) : is_value(true), d(v) {}
    arg_type(std::initializer_list<arg_type> l) : is_value(false), subs(l) {}
}; 
```

并将您的 ctor 更改为：

```
typedef std::initializer_list<arg_type> initializer_type;

ClassA(initializer_type l) {
  // ...
} 
```

希望能帮助到你...

* * *

**更新：**正如 Mankarse 所指出的（谢谢！），上面有未定义的行为。这是一个可以在不使用 Boost 的情况下修复它的版本：

```
#include <vector>
#include <memory>
#include <iostream>
#include <initializer_list>

class arg_type
{
private:
    std::shared_ptr<void> subs; // empty => d is valid
    double d;

public:
    arg_type(double v) : d(v) {}
    arg_type(std::initializer_list<arg_type> l);

    void print() const;
};

arg_type::arg_type(std::initializer_list<arg_type> l)
  : subs(std::make_shared<std::vector<arg_type>>(l))
{}

void arg_type::print() const
{
   if( subs ) {
     std::cout << "( ";
     for( const auto& e : *std::static_pointer_cast<std::vector<arg_type>>(subs) ) {
       e.print();
     }
     std::cout << ") ";
   }
   else {
      std::cout << d << " ";
   }
}

struct MyClass
{
   MyClass( std::initializer_list<arg_type> l) {
      for( const auto& e : l ){
         e.print();
      }
   }
};

int main()
{
   MyClass m { 1, 2, { 3, 4, { 6, 7, { 8 }}}, 5 };
} 
```

如果你想玩它，这里是一个[活生生的例子](http://liveworkspace.org/code/2orX1s%2414)。

# php - 搜索查询结果 # 仍然显示在新搜索中 (php)

> ID：15848783
> 
> 赞同：1
> 
> 时间：2013-04-06T08:43:39.230
> 
> 标签：php, refresh

$_SESSION 来自另一个页面.. 当我在搜索引擎上运行搜索时，结果的数量会显示出来，但会永远停留在页面上.. 看看*（我需要 10 个代表点才能发布图像）*

好吧，基本上总是显示 0 个结果，下面是搜索的结果，它也总是在那里。

* * *

**"pepsi" 有 0
个结果 "flash" 有 2 个结果**

**flash - 网站教程
flash 设计 - 向最好的学习**

这基本上是搜索页面的样子，如果搜索结果没有结果，搜索结果链接和描述就会消失。我希望在每次新搜索时**所有内容都**消失..即使我刷新页面或返回它，之前搜索的结果也在那里。

```
 <div id="searchPageDiv">
    <?php

        if(isset($_SESSION['error'])){          
            echo $_SESSION['error'];

        } else      
            print_r($_SESSION['search_output']);        
        { 

            echo ($_SESSION['count']);
              foreach($_SESSION['search_output'] as $value){
                $value['links'];
                $value['title'];
                $value['page_body'];

                $title = $value['title'];
                $link = $value['links'];
                $body = $value['page_body'];

                $search_output .= "<a href='".$link."'>".$title."</a> - $body<br>";}
}
?>

    <?php echo $search_output; ?>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:55:47.317

这将很有帮助：

```
echo ($_SESSION['count']);
unset($_SESSION['count']); 
```

学习是最好的方法。[查找www.php.net/unset](http://www.php.net/unset)中给出的示例

# javascript - 只想在全日历插件中显示星期和日期

> ID：15848786
> 
> 赞同：0
> 
> 时间：2013-04-06T08:44:03.810
> 
> 标签：javascript, jquery

我正在开发 jquery [fullcalendar](http://arshaw.com/fullcalendar/)插件。默认情况下，此插件显示整周和一周。但是，我只想显示星期和日期。我为此更改了选项，以便当用户加载页面时，它应该自动加载周历，但它仍然加载月份，并且要查看周用户必须单击周选项卡才能看到它。**如何更改此默认行为，以便用户在加载网站时看到周历？**

```
$('#calendar').fullCalendar({
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'agendaWeek,agendaDay',
        ignoreTimezone: false
    },
    selectable: true,
    selectHelper: true,
    editable: true,
    events: 'events'
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:48:52.290

只需添加`defaultView: 'basicWeek'`到您的 fullCalendar 选项：

```
$('#calendar').fullCalendar({
    defaultView: 'basicWeek'
}); 
```

检查[文档](http://arshaw.com/fullcalendar/docs/views/Available_Views/)

**[演示](http://arshaw.com/fullcalendar/views/basicWeek/)**

# c# - 如何在类库c#中使用Messagebox？

> ID：15848787
> 
> 赞同：4
> 
> 时间：2013-04-06T08:44:19.943
> 
> 标签：c#, .net, messagebox

如何在类库中使用 MessageBox？

这是我的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace MessageBoxes
{
    class ShowInfo
    {
        MessageBox.Show("test");
    }
} 
```

我可以加载 MessageBox 但不能有显示属性 MessageBox.Show("test"); <-- 失败

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T08:56:53.697

您不应该**在**类库**中**使用**Windows 窗体 MessageBox**。如果您在 ASP.NET 应用程序中使用此库会怎样。MessageBox 将显示在 Webserver 中。并且您的网络服务器将等待（挂起），直到有人响应网络服务器中的 MessageBox。

 **一个理想的设计是您要么将消息作为字符串返回，并以调用者特定的方式处理该字符串，要么在您想要的情况下抛出异常。

如果您仍然想要，那么这里是您的代码更正

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace MessageBoxes
{
    class ShowInfo
    {
        public void ShowMessage(string msg)
        {
            MessageBox.Show(msg);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T08:48:23.113

您可以在任何方法之外调用消息框。
这段代码根本无法编译。

你应该写

```
namespace MessageBoxes
{
    class ShowInfo
    {
        public void ShowUserMessage(string messageText)
        {
             MessageBox.Show(messageText);
        }
    }
} 
```

然后在实例化 ShowInfo 类型的对象后调用它

```
ShowInfo info = new ShowInfo();
info.ShowUserMessage("This is a Test"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-15T09:12:03.737

这个问题的附加答案：

创建类库项目之后。

右键单击您的项目`Add`> `New Item`>`Windows form`

这是通过添加参考来完成的`System.Windows.Forms.dll`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T08:52:30.063

确保您实际使用主窗体中的类。

```
class ShowInfo
{
    public static void show()
    {
        System.Windows.Forms.MessageBox.Show("test");
    }
} 
```

...

```
 public Form1()
    {
        InitializeComponent();
        ShowInfo.show();
    } 
```**

# c# - 从菜单中获取屏幕转储，但它在图片中保持打开状态

> ID：15848788
> 
> 赞同：1
> 
> 时间：2013-04-06T08:44:33.657
> 
> 标签：c#, drop-down-menu, screenshot, menubar

我的程序中有一个功能，用户可以在其中制作主表单的屏幕转储。为此，用户必须从菜单中选择 File | 采取屏幕转储。这行得通。但是，在进行屏幕转储时，下拉菜单保持打开状态并部分可见。不过，其他一些控件位于其之上。如何确保在截取屏幕截图之前关闭下拉菜单？

我试图在菜单和菜单项上都包含 HideDropDown() ，但都没有帮助。我什至试图让整个菜单不可见，但也没有运气。

```
private void toolStripMenuItem_screenDumpProgram_Click(object sender, EventArgs e)
{
    ... HideDropDown() ... various tests

    Bitmap screendump = new Bitmap(Width, Height);
    Graphics gfx = Graphics.FromImage(screendump);
    gfx.CopyFromScreen(Location, Point.Empty, Size);

    screendump.Save("MyScreenshot.png", ImageFormat.Png);
} 
```

任何想法如何避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:30:01.860

我认为您需要的不是屏幕截图，而是将您`Form`的`Bitmap`. [以前已经这样做过。](https://stackoverflow.com/questions/1784295/rendering-form-to-bitmap)其他解决方案可使用搜索获得。

# paypal - PayPal PayFlow 链接测试交易中的 MasterCard 类型的用户身份验证失败

> ID：15848789
> 
> 赞同：0
> 
> 时间：2013-04-06T08:44:38.473
> 
> 标签：paypal, payflowlink

交易失败后我收到以下消息，

RESULT=1 RESPMSG=用户+认证+失败。

使用万事达卡测试信用卡号。我搜索并试图找到解决方案。但不能

请帮助我找到解决方案，

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:05:14.757

这通常意味着您没有传递正确的凭据。您需要仔细检查这些并确保它们是正确的。如果您看到此交易出现在您的 Payflow 帐户中并且显示用户身份验证，那么这通常意味着您没有在帐户上正确设置您的处理器信息，您可能需要仔细检查处理器信息。但是，如果这是在测试服务器上再次运行的测试，这应该不是问题。

# scala - 在复杂的应用程序中使用 playframework 处理多个模板文件？

> ID：15848790
> 
> 赞同：1
> 
> 时间：2013-04-06T08:44:45.640
> 
> 标签：scala, templates, playframework

我最近发现 Scala 是一种绝对有趣的编程语言。由于我不是真正的桌面应用程序开发人员，而是更多的网络开发人员，所以我想尝试一下 play 框架，看看它是否适合我的目的。

到目前为止，我真的很喜欢它，它似乎很容易使用，并且开发人员真的想通了。

但我想创建一个具有不同模板的应用程序，例如“内部”、“外部”和“管理”区域。我已经想出尝试“模块化应用程序”的东西，它似乎工作得很好，但我看不出有任何可能创建像多个“模板”文件这样的东西。经过几个小时的谷歌搜索，我想我应该问..

你们有人做过吗？任何提示如何以最佳方式组织它？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:24:13.500

您可以根据需要拥有任意数量，还可以将它们组织在多个级别`views`的包中（在包下）。`app.views`您所需要的只是学习如何从控制器中引用所需的视图。

看看这个[示例模式](https://stackoverflow.com/a/14625097/1066240)。

换句话说，最重要的**是对您的**订单来说清晰和舒适，3 年后**您**将能够使用它而无需额外的注释。

# javascript - Google Analytics：在多跟踪设置中未接收两个数据流

> ID：15848795
> 
> 赞同：0
> 
> 时间：2013-04-06T08:45:14.697
> 
> 标签：javascript, google-analytics, google-analytics-api

我需要在使用**“异步分析”API**运行的站点中更改有效的 Google Analytics 设置，以包含来自新 GA 帐户/属性的新跟踪器。谷歌建议使用新**的“通用分析”API**。

由于我不确定在同一页面中同时使用两个脚本时是否会出现**名称冲突，因此我按照**[API 文档](https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#multipletrackers)中有关如何设置多个跟踪器的说明进行操作，并将旧的跟踪器切换到“通用分析”API .

这是我使用的跟踪器代码：

```
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-xxxxxxxx-1', 'mysite.org'); 
ga('send', 'pageview');
ga('create', 'UA-xxxxxxx-15', {'name': 'oldTracker'}); 
ga('oldTracker.send', 'pageview'); 
```

现在谷歌分析显示两个跟踪器都处于活动状态并发送相同的数据。我可以在 GA 实时报告中看到这一点。然而，旧跟踪器的标准报告（代码中的最后一行）停止工作。这些统计数据是空的。

任何想法如何修复这个？这可能是由于从异步切换到 Universal Analytics 造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T13:50:55.323

[从 3 月 26 日起，Google 群组 google-analytics-analyticsjs 中](https://groups.google.com/forum/?fromgroups=#!topic/google-analytics-analyticsjs/ZElmrDNllB0)有一篇帖子，其中 Google 开发人员 Jim Wogulis 回答了一个类似的问题，即在不重新创建该属性的情况下将网络资产的跟踪器从异步迁移到 Universal Analytics，其中：*“我们目前正在研究支持这种迁移的能力，但尚不可用。”*

因此，我将这两个 Web 属性的跟踪代码改回旧（异步）和新（通用）的混合，我看到两者都有效。

# android - android点击按钮时没有事件

> ID：15848797
> 
> 赞同：1
> 
> 时间：2013-04-06T08:45:26.207
> 
> 标签：android, android-layout, android-button

我有一个有按钮的活动，我想在按下按钮来敬酒时，我这样做了：

```
public class myActivity extends Activity implements OnClickListener {

    EditText nameEditText;
    Button okButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        nameEditText = (EditText) findViewById(R.id.editText);
        okButton = (Button) findViewById(R.id.button);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.button:
            Toast.makeText(myActivity.this, "Pressed", Toast.LENGTH_LONG)
                    .show();
            break;

        default:
            break;
        }
    }
} 
```

哪里错了？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:46:36.197

你忘记为你的按钮设置监听器

因为您的活动已经在实现接口，所以您`onClickListener`必须`okButton.setOnClickListener(this);`在函数中添加。请检查以下代码：`okButton = (Button) findViewById(R.id.button);``onCreate`

### 我的活动.java

```
public class myActivity extends Activity implements OnClickListener {

        EditText nameEditText;
        Button okButton;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            nameEditText = (EditText) findViewById(R.id.editText);
            okButton = (Button) findViewById(R.id.button);
                okButton.setOnClickListener(this);
        }

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (v.getId()) {
            case R.id.button:
                Toast.makeText(myActivity.this, "Pressed", Toast.LENGTH_LONG)
                        .show();
                break;

            default:
                break;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T08:48:37.637

在您的 onCreate 方法上，您必须添加一个寄存器

```
okButton.setOnClickListener(this); 
```

后

```
okButton = (Button) findViewById(R.id.button); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:55:55.723

您丢失了`okButton = setOnClickListenre(this)`，因为您的活动在点击侦听器上实现。后插入此代码`okButton = (Button) findViewById(R.id.button);`

# javascript - 使用 FileReader API 读取图像并确定其是否损坏

> ID：15848800
> 
> 赞同：0
> 
> 时间：2013-04-06T08:45:35.723
> 
> 标签：javascript, filereader, libjpeg

通过 JavaScript 中的 FileReader API 读取 JPEG 文件后，有什么方法可以确定它是否损坏？

我正在考虑类似“libjpeg”所做的事情。如果 JPEG 文件有问题，它会提供警告消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:07:57.450

有一些库在纯 JavaScript 中进行 JPEG 解码。

例如[https://github.com/notmasteryet/jpgjs](https://github.com/notmasteryet/jpgjs)（还有其他）

您可以简单地在 JavaScript 代码中解码 FileReader 提供的数据，并查看输出是否正常。

根据腐败程度，您要捕获的情况，应该可以在客户端进行。

# c# - 在运行时绘制椭圆并使用加宽方法

> ID：15848802
> 
> 赞同：1
> 
> 时间：2013-04-06T08:45:55.837
> 
> 标签：c#, winforms, gdi+

**我在运行时使用以下代码绘制椭圆。在该代码中，我使用图形路径进行绘图（实际上这是项目要求）并使用加宽方法进行图形路径。但它给出了运行时异常“内存不足”。我可以在椭圆的情况下使用这种方法吗？

在运行时绘制矩形的情况下使用加宽方法，它可以正常工作。

请解决这个问题并给我一些建议？**

```
public partial class Form2 : Form
   {
       public Form2()
       {
           InitializeComponent();
       }

        Rectangle r;
        bool isDown = false;
        int initialX;
        int initialY;
        bool IsDrowing =true;
        GraphicsPath gp1;
        GraphicsPath gp2;
        GraphicsPath gp3;
        GraphicsPath gp;
       Graphics g;
       bool contained;
       bool containedE;
       bool containedC;

    private void Form2_MouseDown(object sender, MouseEventArgs e)
    { 

       isDown = true;
       IsDrowing = true;

      initialX = e.X;
     initialY = e.Y;

    }

    private void Form2_MouseMove(object sender, MouseEventArgs e)
    {
    //IsDrowing = true;
    if (isDown == true)
     {

     int width = e.X - initialX, height = e.Y - initialY;
     r = new Rectangle(Math.Min(e.X, initialX),
                      Math.Min(e.Y, initialY),
                     Math.Abs(e.X - initialX),
                    Math.Abs(e.Y - initialY));

                this.Invalidate();

      }

    }

    private void Form2_Paint(object sender, PaintEventArgs e)
    {
    g = this.CreateGraphics();
    gp = new GraphicsPath();
    Pen pen = new Pen(Color.Red);
    gp.AddEllipse(r);
    gp.Widen(pen);
    pen.DashStyle = DashStyle.Dash;
    if (IsDrowing)
    {
    g.DrawPath(pen, gp);
    }
    private void Form2_MouseUp(object sender, MouseEventArgs e)
        {
            IsDrowing = false;
            this.Refresh();
         }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:58:57.950

基本上：避免使用 GraphicsPath.Widen 方法。有问题，搜索“spirograph bug”

在您的情况下，这是因为您尝试扩大 0 x 0 矩形。像这样修改你的代码：

```
private void Form2_Paint(object sender, PaintEventArgs e)
{
    if (IsDrowing)
    {
        g = e.Graphics;
        gp = new GraphicsPath();
        gp.AddEllipse(r);
        gp.Widen(new Pen(Color.Red, 10));

        Pen pen = new Pen(Color.Red, 1);
        pen.DashStyle = DashStyle.Dash;

        g.DrawPath(pen, gp);
    }
} 
```

它可能需要额外的工作，但要**避免**扩大空的矩形/椭圆。

# google-maps-api-3 - Simplemodal Google Map 显示一次，但在第二次点击时不显示

> ID：15848807
> 
> 赞同：0
> 
> 时间：2013-04-06T08:46:34.483
> 
> 标签：google-maps-api-3, modal-dialog, kml

按照我的标准，我做得很好！除了函数等基础知识之外，我对 JS 的了解几乎为零。我使用这些页面将一个工作脚本组合在一起，该脚本使用 SimpleModal 框架将 Google Maps 加载到 Modal 中。令我松了一口气的是，我让它工作了，但它有一个我无法改变的最后一个错误。模态在 HREF 的第一次单击时加载，但如果我关闭模态然后尝试重新打开它，它会加载模态，但缺少部分地图。丢失的地图问题是我认为我已经解决的问题。我的 JS 是

```
 var map;
        var src = 'https://sites.google.com/site/bristol2monaco/kml/route2.kml';
        function initialize() {
        var myLatlng = new google.maps.LatLng(51.337890,-0.813049);
        map = new google.maps.Map(document.getElementById("basic-modal-content"), {
        center: myLatlng,
        zoom: 7,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
        loadKmlLayer(src, map);
  }

        function loadKmlLayer(src, map) {
        var kmlLayer = new google.maps.KmlLayer(src, {
        suppressInfoWindows: true,
        clickable: false,
        preserveViewport: true,
        map: map
      });
    } 
  initialize(); 
```

注册“点击”的 js 文件包含：

```
jQuery(function ($) {
// Load dialog on page load
//$('#basic-modal-content').modal();

// Load dialog on click
$('#table .newbasic').click(function (e) {
    $('#basic-modal-content').modal();
    var center = map.getCenter();
    google.maps.event.trigger(map, "resize"); 
    map.setCenter(center);
    return false;
});
}); 
```

正如我认为我已经解决了缺少的地图错误（使用此处发布的解决方案），上面的 (map, resize) 行在这里没有任何解决方案有帮助。我是否必须重新初始化地图或其他东西。感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T18:01:22.123

当您调用模式打开时，请使用 Eric Martin 描述的 onOpen 函数。通过使用他的 onOpen 函数，您将能够使用回调功能，从而使用谷歌地图事件侦听器来侦听调整大小事件。听到调整大小事件后，您可以重新初始化您的谷歌地图，从而消除灰色区域

```
 $("#table .newbasic").modal({
       onOpen: function (dialog) {
          google.maps.event.addListenerOnce(map, 'resize', function() {
             //Alert TESTING IF RESIZE is heard(remove after test)
             alert("heard resize onOpen");
             initialize();                  
             map.setCenter(center);
          });
          google.maps.event.trigger(map, "resize");   
       }
    }); 
```

# android - Android - 在寻呼机中获取片段的上下文

> ID：15848809
> 
> 赞同：5
> 
> 时间：2013-04-06T08:46:45.437
> 
> 标签：android, android-fragments, android-viewpager

我有一个使用寻呼机作为导航的 android 应用程序。对于选项卡，我有 3 个布局作为内容。其中一个片段是画廊，我想向其中添加图像。为此，我必须设置一个 ImageAdapter，但我需要知道如何访问片段的上下文。

```
final LayoutInflater factory = getLayoutInflater();
final View view = factory.inflate(R.layout.pictures, null);
Gallery g = (Gallery) view.findViewById(R.id.gallery1);
g.setAdapter(new ImageAdapter(view.getContext())); 
```

我在 onCreate 方法中使用上面的代码从不是 contentview 的布局中获取画廊。我必须给 ImageAdapter 一个上下文。但是我必须在那里设置什么上下文？

**编辑：**这是我的完整代码：

```
package com.bw2801.uwelugemediathek;

import java.util.Locale;
import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.content.Context;
import android.database.DataSetObserver;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.SpinnerAdapter;
import android.widget.Toast;

public class MainActivity extends FragmentActivity implements
    ActionBar.TabListener {

SectionsPagerAdapter mSectionsPagerAdapter;
ViewPager mViewPager;
PicturesSectionFragment ps = new PicturesSectionFragment();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding
    // tab. We can also use ActionBar.Tab#select() to do this if we have
    // a reference to the Tab.
    mViewPager
            .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by
        // the adapter. Also specify this Activity object, which implements
        // the TabListener interface, as the callback (listener) for when
        // this tab is selected.
        actionBar.addTab(actionBar.newTab()
                .setText(mSectionsPagerAdapter.getPageTitle(i))
                .setTabListener(this));
    }

    final LayoutInflater factory = getLayoutInflater();
    final View view = factory.inflate(R.layout.pictures, null);
    Gallery g = (Gallery) view.findViewById(R.id.gallery1);
    g.setAdapter(new ImageAdapter(ps.getActivity()));
}

public class ImageAdapter extends BaseAdapter { 
    private Context mContext;

    private Integer[] mImageIds = {
            R.drawable.image01,
            R.drawable.image02,
            R.drawable.image03,
            R.drawable.image04,
            R.drawable.image05,
            R.drawable.image06,
            R.drawable.image07,
            R.drawable.image08,
    };

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mImageIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i = new ImageView(mContext);

        i.setImageResource(mImageIds[position]);
        i.setLayoutParams(new Gallery.LayoutParams(150, 100));
        i.setScaleType(ImageView.ScaleType.FIT_XY);

        return i;
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabUnselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabReselected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch(position) {
            case 0:
                return new DummySectionFragment();
            case 1:
                return new SoundSectionFragment();
            case 2:
                return ps;
        }
        return new DummySectionFragment();
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return "Informationen";
        case 1:
            return "Soundboard";
        case 2:
            return "Galerie";
        }
        return null;
    }
}

public static class DummySectionFragment extends Fragment {

    public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.info, container, false);
    }
}

public static class PicturesSectionFragment extends Fragment {

    public PicturesSectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.pictures, container, false);
    }
}

public static class SoundSectionFragment extends Fragment {

    public SoundSectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.sounds, container, false);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T08:57:29.930

片段没有自己的上下文，它们使用父 Activity。

*   要获取父活动上下文，请使用`getActivity()`
*   要使用应用程序上下文，请使用`getActivity().getApplicationContext()`

尽可能首选应用程序上下文。

**更新：**

`getActivity()`**当且仅当**所述 Fragment 当前附加到 Activity时， Fragment 的 Activity 实例才会返回 Activity 实例。

* * *

所以，

```
Fragment f = new MyFragment(); 
```

创建一个片段，但它还没有附加到一个活动。因此`f.getActivity()`返回`null`。

* * *

将其添加到活动后：

```
getFragmentManager().beginTransaction().add(f,"fragment").commit(); 
```

现在，`getActivity()`将返回一个 Activity 实例。

* * *

同样，如果我们从 Activity 中分离片段：

```
getFragmentManager().beginTransaction().detach(f).commit() 
```

`getActivity()`将再次返回一个`null`值。

* * *

所以，我们不应该`getActivity()`在类外使用`Fragment`，因为我们不能确定附加状态。因此，我建议您`getActivity()`在片段自己的类中使用其方法`onAttach()`：`onCreate()`或`onActivityCreated()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T08:49:42.133

你可以这样使用

```
g.setAdapter(new ImageAdapter(getActivity())); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-05T15:19:14.370

获取我发现的片段上下文的最简单和最精确的方法是在调用 onCreateView 方法时直接从 ViewGroup 中获取它，至少在这里你肯定不会为 getActivity() 获取 null

```
public class Animal extends Fragment {

Context thiscontext;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

     thiscontext = container.getContext(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-12T07:27:13.250

```
 write under code in Your CoreApplication.java

    step1) 
    public class CoreApplication extends Application {

    private static CoreApplication instance; 
    }

    step2) onCreate(){

    instance = this;

    }

    step3 )
    add under method() 
```

公共静态 CoreApplication getGlobalApplicationContext() {

```
 if (instance == null) {
    throw new IllegalStateException("this application does not 
    inherit GlobalApplication"); " +
    "}

    return instance;
    }

    Step4)
    g.setAdapter(new ImageAdapter(getGlobalApplicationContext())); 
```

# php - 如何在 eshopping 中更新产品的价格

> ID：15848812
> 
> 赞同：-1
> 
> 时间：2013-04-06T08:47:05.963
> 
> 标签：php, mysql

我正在用 php 和 mysql 制作购物车。我在更新产品价格时遇到问题。我的代码如下。请告诉我我哪里错了。我的回声语句也不起作用，只显示带有产品价格的框。

```
<?php
include("includes/db.php");
include("includes/functions.php");

if(isset($_POST['update_price'])){
//print_r($_POST['price']);

    foreach($_POST['price'] as $priceup => $prvalue){ 

    echo $sql = "Update products SET price='$prvalue' where serial = '".     $_POST['product_data'][$priceup] ."'";
    echo $result=mysql_query($sql);}    }   

            ?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
         <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
          <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
                <title>Products Prices Management</title>
                  <script language="javascript">
                        function update_cart(){
             document.form1.command.value='update';
                            document.form1.submit();
              }
                 </script>

          <style type="text/css">
             <!--
            .style3 {
        font-family: Georgia, "Times New Roman", Times, serif;
font-weight: bold;
font-style: italic;
color: #FF0000;
        }
        -->
            </style>
        </head>
       <body>
        <h1 class="style3">Products Price Management</h1>
         <table border="2" cellpadding="2px" width="473">
            <?php
        $result=mysql_query("select * from products");
        while($row=mysql_fetch_array($result)){
    ?>
            <tr>
         <input type="hidden" name="product_data[]"  value="<?php echo $row['serial']; ?>" />
         <td width="205"><b><?php echo $row['name']?></b></td>

        <td width="246"><input type="text" name="price[]" value="<?php echo  $row['price']?>"maxlength="3" size="2" />
             </td>

             </tr>
             <?php
                }
               ?>
           </table>
              <div>
    <input type="submit" name="update_price" value="Update Prices" >
           </div>

             </body>
            </html> 
```

请告诉我我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:58:10.517

首先，您的表单没有提交。您忘记放置表单标签，请查看此处。

```
 <form  action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
      <table border="2" cellpadding="2px" width="473">
      <?php
      $result=mysql_query("select * from products");
       while($row=mysql_fetch_array($result)){
       ?>
      <tr>
      <input type="hidden" name="product_data[]"  value="<?php echo $row['serial']; ?>" />
      <td width="205"><b><?php echo $row['name']?></b></td>
      <td width="246"><input type="text" name="price[]" value="<?php echo  $row['price']?>"maxlength="3" size="2" />
         </td>
       </tr>
       <?php
        }
        ?>
        </table>
        <div>
       <input type="submit" name="update_price" value="Update Prices" >
       </div>
       </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:52:47.710

在 foreach 语句中，它期望`$_POST['price']`是一个数组，尽管它不是。

# jquery - jquery显示，隐藏功能不起作用

> ID：15848813
> 
> 赞同：1
> 
> 时间：2013-04-06T08:47:07.370
> 
> 标签：jquery, hide, show

jquery find 函数 hide and show 不起作用，怎么回事？

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>

  <script>
        $('div').hover(function() {
           $(this).find('.delete').show();
        }, function() {
           $(this).find('.delete').hide();
        });
  </script>

<div>
    Blah
    <span class="delete">Delete</span>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T08:49:21.263

向您的脚本添加一个文档就绪功能，它将起作用

```
 <script>
      $(document).ready(function(){
        $('div').hover(function() {
           $(this).find('.delete').show();
        }, function() {
           $(this).find('.delete').hide();
        });
      });
  </script> 
```

**解释：**

在 div 甚至存在之前，您正在将悬停功能绑定到 div。
使用文档就绪函数，函数的绑定发生在 div 实际可用时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:50:12.043

使用这样的东西：

```
<script>
jQuery(document).ready(function($) {
$('div').hover(function() {
           $(this).find('.delete').show();
        }, function() {
           $(this).find('.delete').hide();
        });
})
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T08:51:27.680

您需要将 jQuery 代码包装在里面`$(document).ready(function(){});`或`$(function(){});`让它看到整个 DOM。

```
 $(document).ready(function(){
     $('div').hover(function() {
         $(this).find('.delete').show();
     }, function() {
         $(this).find('.delete').hide();
     });
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T08:54:12.730

你需要一大堆其他的东西来组成一个完整的、有效的 HTML 页面和一些包装 javascript 的东西来延迟它的执行，直到文档准备好与之交互......

```
<!DOCTYPE HTML>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script>
$(function() {
    $('div').hover(function() {
        $(this).find('.delete').show();
    }, function() {
        $(this).find('.delete').hide();
    });
});
</script>
</head>
<body>

<div>
    Blah
    <span class="delete">Delete</span>
</div>

</body>
</html> 
```

上面的 DOCTYPE 是针对 HTML5 的，这可能是你最好的选择，但你应该知道[其他 DOCTYPE 是可用的](http://www.w3.org/QA/2002/04/valid-dtd-list.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T08:56:31.280

需要像这样包装jQuery代码：

```
$(document).ready(function(){
  ...
}); 
```

示例：http: [//jsfiddle.net/thinkfast2008/mzx7A/](http://jsfiddle.net/thinkfast2008/mzx7A/)

请享用 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T08:57:29.773

试试这个

```
 <div>
        Blah
        <span class="delete">Delete</span>
    </div>

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>

 <script>
            $(document).ready(function(){
            $('div').hover(function() {
               $(this).find('.delete').show();
            }, function() {
               $(this).find('.delete').hide();
            });
          });
      </script> 
```

# php - 从 $_POST 快速获取所有变量，如果需要所有字段，如何处理未定义？

> ID：15848817
> 
> 赞同：0
> 
> 时间：2013-04-06T08:48:14.010
> 
> 标签：php, forms, post, undefined

我有一个需要所有字段的表单，所以我想做这样的事情来检索所有变量`$_POST`：

```
foreach ($_POST as $key => $value) $$key = $value; 
```

然后我验证数据并在需要的地方使用变量。

有没有一种快速的方法来判断是否至少有一个变量是未定义的，而不必`isset`逐个检查它们？

我的第一个想法是计算我有多少字段并与之比较`count`：

```
if (count($_POST) == 10) 
```

但这不是动态的，我必须在添加新字段时更改该数字。

我怎样才能更有效地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T08:53:43.223

如果您想要一种快速简便的方法，您可以这样做：

```
if(in_array("", $_POST)) {
    //a field is empty
} 
```

# php - 子最佳实践中来自父级的 PHP 调用函数

> ID：15848824
> 
> 赞同：0
> 
> 时间：2013-04-06T08:48:36.937
> 
> 标签：php

我有一个关于 PHP 从子类中的父级调用函数的技巧问题。我们有 3 个场景，我想要优点和缺点。

```
<?php
class test{
   private $var ;
   public function __construct(){
    $this->var = 'Hello world';
   }

   public function output(){
      echo $var.'<br>';
   }
}
//scenario 1
class test1 extends test{
   public function __construct(){
    parent::__construct();
   }
   public function say(){
    parent::output();
   }
}
//scenario 2
class test2 extends test{
   public function __construct(){
    test::__construct();
   }
   public function say(){
    test::output();
   }
}
//scenario 3
class test3 extends test{
    private $handle ;
    public function __construct(){
     $this->handle = new test();
    }
    public function say(){
     $this->handle->output();
    }
}
//finally I can call any 3 cases by one of the below codes
$test1 = new test1();
$test1->say();
//or
$test2 = new test2();
$test2->say();
//or
$test3 = new test3();
$test3->say();
?> 
```

是否有最佳实践，或者这 3 种方案中是否有任何一种比其他方案更好？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:54:47.377

1) 是正确的

2）像静态方法一样调用方法是不正确的。

3) 在构造函数中扩展和创建没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:13:56.820

1）这个是正确的，因为它从其方法中调用父级。

```
class test1 extends test{
   public function __construct(){
    parent::__construct();
   }
   public function say(){
    parent::output();
   }
} 
```

2）这里的继承是不必要的。如果选择此实现，则必须将两者`output`和构造方法都更改为静态。

```
//scenario 2
class test2 extends test{
   public function __construct(){
    test::__construct();
   }
   public function say(){
    test::output();
   }
} 
```

3）从这里继承也是不必要的。请注意，您使用的是“组件优于继承”模式，这是一种很好的做法，因为它提供了更大的灵活性，但您必须删除“扩展测试”。

```
//scenario 3
class test3 extends test{
    private $handle ;
    public function __construct(){
     $this->handle = new test();
    }
    public function say(){
     $this->handle->output();
    }
} 
```

# qt - 使用 Qt 的 QtWebKit 模块播放视频

> ID：15848828
> 
> 赞同：0
> 
> 时间：2013-04-06T08:48:56.437
> 
> 标签：qt, qt4, pyqt, pyqt4, pyside

如果你使用的是谷歌浏览器，当你打开下面的链接 [https://d2pq0u4uni88oo.cloudfront.net/projects/79786/video-87361-h264_high.mp4](https://d2pq0u4uni88oo.cloudfront.net/projects/79786/video-87361-h264_high.mp4) 你会看到一个视频播放器，然后如果你“检查元素”你会在那里看到html5视频标签

我想知道我们是否可以使用 Qt 的 QtWebKit 模块完成相同的功能，任何人都可以提供带有上述链接的代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:00:01.610

尝试为 QtWebKit 启用插件，然后它应该可以工作（刚刚尝试过）：

```
from PyQt4.QtWebKit import QWebSettings
QWebSettings.globalSettings().setAttribute(QWebSettings.PluginsEnabled, True) 
```

# go - 将字节切片中的数据解码为 Uint32

> ID：15848830
> 
> 赞同：8
> 
> 时间：2013-04-06T08:49:13.320
> 
> 标签：go

```
package main

import (
        "bytes"
        "encoding/binary"
        "fmt"
)

func main() {
        aa := uint(0xFFFFFFFF)
        fmt.Println(aa)
        byteNewbuf := []byte{0xFF, 0xFF, 0xFF, 0xFF}
        buf := bytes.NewBuffer(byteNewbuf)
        tt, _ := binary.ReadUvarint(buf)
        fmt.Println(tt)
} 
```

需要将 4 字节数组转换为 uint32 但为什么结果不一样？去版本：beta 1.1

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T14:30:44.717

您可以使用包中的其中一个`ByteOrder`对象来执行此操作`encoding/binary`。例如：

```
package main

import (
        "encoding/binary"
        "fmt"
)

func main() {
        aa := uint(0x7FFFFFFF)
        fmt.Println(aa)
        slice := []byte{0xFF, 0xFF, 0xFF, 0x7F}
        tt := binary.LittleEndian.Uint32(slice)
        fmt.Println(tt)
} 
```

如果您的数据是大端格式，您可以在`binary.BigEndian`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T08:57:15.050

```
tt := uint32(buf[0])<<24 | uint32(buf[1])<<16 | uint32(buf[2]) <<8 |
        uint32(buf[3]) 
```

对于 BE 或

```
tt := uint32(buf[0]) | uint32(buf[1])<<8 | uint32(buf[2]) <<16 |
        uint32(buf[3]) <<24 
```

为乐。

[u]varint 是一种不同的编码（32 位数字在编码形式中最多可以有 5 个字节，64 位数字最多可以有 10 个字节）。

*   无需为 []byte 创建缓冲区。而是直接在字节切片上使用 Varint 或 Uvarint。

*   您正在丢弃函数返回的错误。第二个结果表明读取了多少字节或是否存在问题。将 0xff、0xff、0xff、0xff 解码为 uvarint 时出现问题**。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-06T10:04:30.983

以下是如何使用[encoding/binary](http://golang.org/pkg/encoding/binary/#Read)包来做你想做的事。请注意，您不想使用任何`var`函数，因为它们进行可变长度编码。

[游乐场版](http://play.golang.org/p/VDFnYDJe8b)

```
package main

import (
    "bytes"
    "encoding/binary"
    "fmt"
    "log"
)

func main() {
    aa := uint(0xFFFFFF0F)
    fmt.Println(aa)
    tt := uint32(0)

    byteNewbuf := []byte{0x0F, 0xFF, 0xFF, 0xFF}
    buf := bytes.NewBuffer(byteNewbuf)
    err := binary.Read(buf, binary.LittleEndian, &tt)
    if err != nil {
        log.Fatalf("Decode failed: %s", err)
    }
    fmt.Println(tt)
} 
```

结果是

```
4294967055
4294967055 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T13:20:45.993

> [数值类型](http://golang.org/ref/spec#Numeric_types)
> 
> ```
> byte        alias for uint8 
> ```

由于`byte`是 的别名`uint8`，因此您的问题“需要将 4 字节数组转换为 uint32”已得到解答：

[如何在 Go 中将 [4]uint8 转换为 uint32？](https://stackoverflow.com/questions/7380158/how-to-convert-4uint8-into-uint32-in-go)

> [包二进制](http://golang.org/pkg/encoding/binary/)
> 
> [Uvarints and] Varints 是一种使用一个或多个字节对整数进行编码的方法；绝对值较小的数字占用较少的字节数。有关规范，请参阅 [http://code.google.com/apis/protocolbuffers/docs/encoding.html](http://code.google.com/apis/protocolbuffers/docs/encoding.html)。

由于`Uvarint`s 是整数表示和存储的一种特殊形式，因此您应该只对使用该`ReadUvarint`函数写入的值使用该`Uvarint`函数。

例如，

```
package main

import (
    "bytes"
    "encoding/binary"
    "fmt"
)

func main() {
    buf := make([]byte, 10)
    x := uint64(0xFFFFFFFF)
    fmt.Printf("%2d %2d %v\n", x, len(buf), buf)
    n := binary.PutUvarint(buf, x)
    buf = buf[:n]
    fmt.Printf("%2d %2d %v\n", x, len(buf), buf)
    y, err := binary.ReadUvarint(bytes.NewBuffer(buf))
    if err != nil {
        fmt.Println(err)
        return
    }
    fmt.Printf("%2d %2d %v\n", y, len(buf), buf)
} 
```

输出：

```
4294967295 10 [0 0 0 0 0 0 0 0 0 0]
4294967295  5 [255 255 255 255 15]
4294967295  5 [255 255 255 255 15] 
```

# javascript - 用 JS 提示获取 var - 如何通过 HTML 表单实现？

> ID：15848832
> 
> 赞同：0
> 
> 时间：2013-04-06T08:49:21.533
> 
> 标签：javascript, html, css

我已经学习 HTML/CSS/JavaScript 几个星期了，我目前正在练习一个小型项目，该项目包括让人们回答数学问题并验证他们的答案。

我目前的进展可以在[http://dany.faceflow.com看到](http://dany.faceflow.com)

我知道我可能没有使用最好的策略来开发这个迷你游戏，所以任何建议都会对此有用。但是现在，问题是我正在通过 JS 提示使用变量来获取用户答案，并且我想通过 HTML 表单来完成（不那么烦人）。

在我的源代码中，您可以在函数中看到这一行：

```
var userInput = prompt(numb1 + symbol + numb2); 
```

然后，仍然在同一个函数中，我有一个 if/else 结构来比较用户的答案和正确的答案。该代码有效，我只是不知道如何使提示基于 HTML。我尝试了一个带有 ID 的 html 表单，并在 JS 中使用 getElementById、document.write 和其他一些东西，但我从来没有让它在这部分工作。

（这里是所有的JS）

```
var number1 = function() {
    var numb1 = Math.floor(Math.random() * 41) + 10;
    return numb1;
}

var number2 = function() {
    var numb2 = Math.floor(Math.random() * 41) + 10;
    return numb2;
}

var userAnswer = function() {
    var numb1 = number1();
    var numb2 = number2();

    var randomSymbol = Math.random();

    if (randomSymbol > 0.5)  {
        var symbol = "+";
    } else {
        var symbol = "-";
    }

    // add the math question in the html bubble
    document.getElementById('bubble').innerHTML = numb1 + symbol + numb2;

    // Prompts the user to give an answer. Change this to HTML.
    var userInput = prompt(numb1 + symbol + numb2);

    //var userInput = document.getElementById('tw').value;

    if (symbol == "+" && userInput == (numb1 + numb2)) {
        document.getElementById('feedback').innerHTML = "Congratulations!";
    } else if (symbol == "+" && userInput !== (numb1 + numb2)) {
        document.getElementById('feedback').innerHTML = "Wrong!";
    } else if (symbol == "-" && userInput == (numb1 - numb2)) {
        document.getElementById('feedback').innerHTML = "Congratulations!";
    } else if (symbol == "-" && userInput !== (numb1 - numb2)) {
        document.getElementById('feedback').innerHTML = "Wrong!";
    } else {
        alert("Something wrong happened. Try again.");
    }

    return userInput;
} 
```

（HTML）

```
<!DOCTYPE html>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="css/stylesheet.css" />
        <script src="js/script.js"></script>
        <title>Improve Your Math Skills!</title>
    </head>

    <body>
        <center>

        <button onclick="userAnswer()">PLAY NOW!</button>

        <div id="bubble"></div>

        <div id="feedback"></div>

        <!-- <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> -->
        </center>
    </body>     
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:24:41.200

我从您的问题中了解到，您需要在 HTML 本身中使用相同的功能，而不是在提示框中由 JS 驱动，如果是这样，您的代码中的以下添加应该会有所帮助：

HTML附加：

```
<div id="bubble"></div>
<div id="check_ans_div" style="display:none;">
  <input type="text" id="txt_answer" />
  <input type="submit" value="Check Answer" onclick="checkanswer()" />
</div>
<div id="feedback"></div> 
```

JS 变化：

```
 var number1 = function() {
        var numbx = Math.floor(Math.random() * 41) + 10;
        return numbx;
    }        
    var number2 = function() {
        var numby = Math.floor(Math.random() * 41) + 10;
        return numby;
    }
    var numb1=0; var numb2=0;
    var userAnswer = function() {
       numb1 = number1();
       numb2 = number2();

        var randomSymbol = Math.random();

        if (randomSymbol > 0.5)  {
            var symbol = "+";
        } else {
            var symbol = "-";
        }

        // add the math question in the html bubble
        document.getElementById('bubble').innerHTML = numb1 + symbol + numb2;
        if(document.getElementById('check_ans_div').style.display=='none') 
           document.getElementById('check_ans_div').style.display='block'; 
        document.getElementById('txt_answer').value='';

    }

function checkanswer(){

      var userInput= document.getElementById('txt_answer').value;
      if (symbol == "+" && userInput == (numb1 + numb2)) {
            document.getElementById('feedback').innerHTML = "Congratulations!";
        } else if (symbol == "+" && userInput !== (numb1 + numb2)) {
            document.getElementById('feedback').innerHTML = "Wrong!";
        } else if (symbol == "-" && userInput == (numb1 - numb2)) {
            document.getElementById('feedback').innerHTML = "Congratulations!";
        } else if (symbol == "-" && userInput !== (numb1 - numb2)) {
            document.getElementById('feedback').innerHTML = "Wrong!";
        } else {
            alert("Something wrong happened. Try again.");
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:28:53.783

您可以使用`input`标签代替提示。就像 Dinesh 的回答一样更改 HTML；

```
<div id="bubble"></div>
<div id="inp" style="display: none;">
    <input type="text" id="ans"></input>&nbsp;<button id="subBtn">Submit</button>
</div>
<div id="feedback"></div> 
```

现在，对于 JavaScript，有一些事情需要考虑。首先，你有

```
var number1 = function() {
    var numb1 = Math.floor(Math.random() * 41) + 10;
    return numb1;
}

var number2 = function() {
    var numb2 = Math.floor(Math.random() * 41) + 10;
    return numb2;
} 
```

这两个函数做的事情完全相同。您不需要两个单独的函数来获得两个单独的随机数。因此，只有一个功能就足够了。

```
var number = function() {
    return Math.floor(Math.random() * 41) + 10;
}; 
```

其次，现在我们有两个功能。`userAnswer`在“立即播放！”时发布新问题 被点击，比如说，`evalAnswer`当点击“提交”时评估输入字段中写的答案。

在`userAnswer`中，您生成两个新的随机数并确定将对它们执行哪个操作。此时，您可以简单地自己评估答案并将其存储在全局变量中。这使您在评估答案时变得更容易，您只需要做一个简单的比较。

除此之外，您更新`innerHTML`并`bubble`显示`div` `inp`.

在`evalAnswer`中，您从中获取值`ans`并将其与当前答案的先前计算值进行比较，然后相应地更新`feedback.innerHTML`。

这是代码；

```
//variable to maintain the current answer
var curAns = 0;

//Here, I get all the DOMElements I will use 
var playBtn = document.getElementById('playBtn');

var bubble = document.getElementById('bubble');

var inp = document.getElementById('inp');
var ans = document.getElementById('ans');
var subBtn = document.getElementById('subBtn');

var feedback = document.getElementById('feedback');

//I add the event listeners
//This is equivalent to using 'onclick'
//in the HTML, and doing it this way is only
//my personal preference
playBtn.addEventListener('click', function() {userAnswer();}, false);
subBtn.addEventListener('click', function() {evalAnswer();}, false);

//Function to get random number
var number = function() {
    return Math.floor(Math.random() * 41) + 10;
};

//This function will be executed when 'Play Now!' is clicked.
var userAnswer = function() {
    //Get two separate random numbers in
    //numb1 and numb2
    var numb1 = number();
    var numb2 = number();
    var symbol = '';

    var randomSymbol = Math.random();

    //Determine the operation to be used
    //and compute the corresponding correct answer for the current
    //question
    if (randomSymbol > 0.5)  {
        symbol = "+";
        curAns = numb1+numb2;
    } else {
        symbol = "-";
        curAns = numb1-numb2;
    }

    //Add math question to bubble
    bubble.innerHTML = 'What is ' + numb1 + ' ' + symbol + ' ' + numb2 + '?';
    feedback.innerHTML = '';

    //Make inp div visible
    inp.style.display = 'block';
    //Reset input value to ''
    ans.value = '';
};

//This function will be executed when 'Submit' is clicked
var evalAnswer = function() {
    //Simply compare input value with computed
    //answer and update feedback 
    if(parseInt(ans.value) !== curAns) {
        feedback.innerHTML = 'Wrong answer, try again!';
    }
    else {
        feedback.innerHTML = 'You got it right, congratulations!';
    }
}; 
```

**[这是一个工作示例](http://jsfiddle.net/tF9Ps/)**。

希望有帮助！

# c# - C#在parallel.foreach中修改DataRow数组引用，为什么代码运行正确？

> ID：15848837
> 
> 赞同：2
> 
> 时间：2013-04-06T08:49:42.290
> 
> 标签：c#, .net, multithreading

这不完全是我对代码所做的，但它应该代表交换数组引用的场景。我不确定数组的类型是否重要，但我仍然在标题中指定了它。

1.  在循环之外声明一些 DataRow 数组。将它们命名为 Array1、Array2 ... ArrayX 等
2.  Array1 = Array2 或 Array1 = Array3 ... 或 Array1 = ArrayX 取决于迭代变量
3.  用 Array1 做点什么

代码将是这样的：

```
void Somefunction()
{
    int indices[];
    for (int i = 0; i < threadamount; ++i)
    {
        indices[i] = i;
    }

    DataRow[] Array1, Array2, Array3;
    //assign something to these arrays
    //...
    //end of assigning stuff

    Parallel.ForEach<int>(indices, index =>
    {
        if(index == 2)
           Array1 = Array2;
        else if(index == 3)
           Array1 = Array3;

        //do stuff with Array1

     });
 } 
```

所以回到这个问题。似乎代码在所有数组上运行（在其他线程中正确地将 Array2 / Array3 分配给 Array1）而没有竞争条件。

这是为什么？我以为我必须在循环内创建一个新变量，但没有。是因为它实际上为每个线程创建了 Array1 的引用副本吗？而每个线程中的引用Array1其实是不同的对象？

PS：这是我在这里的第一个问题，所以我希望我没有犯任何错误：p 在尝试将其发布在这里之前，我确实阅读了其他一些问题，但他们并没有真正回答我的问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:00:51.970

我认为你错了，有*问题*。

我修改了您的代码以测试是否`Array1`在线程设置后更改，结果发现它*有时*会更改。

以下代码将打印“错误！” 如果`Array1`改变了。在我的系统上，它在发布或调试版本（四核处理器）上多次打印“错误”。

每次运行的结果都不同（您对竞态条件的期望）：

```
using System;
using System.Threading.Tasks;

namespace Demo
{
    static class Program
    {
        static void Main()
        {
            Somefunction();
        }

        static void Somefunction()
        {
            int threadamount = 100;
            int[] indices = new int[threadamount];
            for (int i = 0; i < threadamount; ++i)
            {
                indices[i] = i;
            }

            int[] Array1 = new int[1],
                  Array2 = new int[2],
                  Array3 = new int[3];

            Parallel.ForEach<int>(indices, index =>
            {
                if (index == 2)
                    Array1 = Array2;
                else if (index == 3)
                    Array1 = Array3;

                int[] test = Array1;
                Console.WriteLine(Array1.Length);

                if (!ReferenceEquals(test, Array1))
                {
                    Console.WriteLine("Error!");
                }
             });
         }
    }
} 
```

# php - 当我启用“在前端使用安全 URL”时，Magento 给出了奇怪的 URL

> ID：15848840
> 
> 赞同：0
> 
> 时间：2013-04-06T08:49:56.593
> 
> 标签：php, magento, ssl, https

当我启用“在前端使用安全 URL”时，它会弄乱安全页面的 URL。例如，这是我为结帐页面获取的 url

[http://www.domain.com/https://www.domain.com/checkout/onepage/](http://www.domain.com/https://www.domain.com/checkout/onepage/)

似乎它在安全域之前添加了一个额外的“ [http://www.domain.com/ ”。](http://www.domain.com/)有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:08:04.457

几周前我遇到了完全相同的问题。我从来没有深入了解它发生的原因，但快速解决方法是：

在 MySQL 客户端中运行以下 SQL：

```
select * from core_config_data where path = 'web/secure/base_url'; 
```

这将返回一个很好的数据字符串。然后运行：

```
update core_config_data set value = "https://yourdomain/" where config_id = ? 
```

在哪里 ？是 select 语句中 SQL 的 ID 的 config_id。您可能需要清除缓存或从 magento 根目录中删除 /var。然而，这应该让您恢复运营。如果不让我知道，我可以提供更多帮助。

# java - 如何根据 ViewPager 中的当前 ImageView 更新 parant Activity 中的 TextView

> ID：15848848
> 
> 赞同：1
> 
> 时间：2013-04-06T08:50:45.967
> 
> 标签：java, android, android-fragments

我是 android dev 的新手，我目前正在为这个烦人的问题苦苦挣扎好几天。尝试了谷歌和许多文章。没有任何帮助。还尝试了 IRC 以获得一些在线帮助，但无法得到直接的答案。也许你可以指引我正确的方向......

我的应用程序基本上是一个包含单个 Fragment 类的 ViewPager。在 Fragment 类中，有一个 switch case 块，它根据位置确定从资源文件夹中加载哪个图像。问题是，我的父 Activity 中有一个 TextView 视图，需要根据当前图片进行更新。就像一个图像标题。我用了：

```
TextView tv = (TextView) getActivity().findViewById(R.id.titleTV); 
```

在 onCreateView() 中以从 Fragment 中访问该 TextView。并添加了一个：

```
tv.setText("Picture 1"); 
```

例如，到 switch case 块。这样，当显示图片时，文本视图就会更新。问题是，在每张幻灯片中检索一个新片段的方法，即父 Activity 中的 getItem(int position)，被调用两次以将多个片段加载到内存中。这会导致当前位置提前 1 个整数。意思是，例如，开关案例站在案例 0 上，它显示了一张特定的图片，但文本从案例 1 更新。因此，我无法让它正常工作。我究竟做错了什么？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:55:54.383

好的，我将给出一段代码，您可以使用它，不仅可以用于 a，还可以用于`String`您想要从 Fragment 发送到 Activity 的任何数据，甚至可以从彼此之间的其他类型的类发送到任何数据。

.'setOnSomethingHappenListener(listener);' 上也使用了这种代码类型

```
public interface TitleChangeListener{
   public void onTitleChanged(String title);
} 
```

然后在您的活动中，您将

```
public class MyActivity extends Activity implements TitleChangeListener{

    @Override
    onTitleChanged(String title){
          // set here your value
    }

} 
```

然后在你的片段上

```
public void MyFragment extends Fragment{

    private TitleChangeListener listener;

    @Override
    public void onAttach(Activity activity){
        if(activity instanceof TitleChangeListener)
            listener = (TitleChangeListener)activity;
        else
            // throw some error ???
    }

    @Override
    public void onResume(){
        listener.onTitleChanged("my title");
    }

} 
```

请记住，我把所有这些都记下来了，肯定会有一些小错误。但只要按照这个想法，你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:13:58.537

如果您只能根据当前片段位置确定文本，则可以使用[ViewPager.OnPageChangeListener](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)。在您的 Activity 中实现该接口并通过调用来使用它`mViewPager.setOnPageChangeListener(SomeOnPageChangeListener)`。`TextView`确定使用方法放入的文本`OnPageChangeListener.onPageSelected()`。

不幸的是，SDK 中存在一个[错误](http://code.google.com/p/android/issues/detail?id=27526)，并且第一次显示位置 0 的页面时没有调用 onPageSelected()。您可以在上面的链接下找到解决方法，`ViewPager.setCurrentPage(1)`在方法中手动使用或仅设置该位置的文本`onCreate()`。

示例代码：

```
//activity onCreate()
protected void onCreate(Bundle savedInstanceState) {
    ...
    mTextView = (TextView) findViewById(R.id.text_view);
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mPagerAdapter);
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
                String someText = determineText(position)
                mTextView.setText(someText);

    });

    //because onPageSelected will not be called for page 0 first time
    String someText = determineText(0)
    mTextView.setText(someText);
}

private String determineText(int position){ //static?
    //switch?
} 
```

# clojure - Clojure Koan 第 8 节，#5

> ID：15848855
> 
> 赞同：0
> 
> 时间：2013-04-06T08:51:10.107
> 
> 标签：clojure, lisp

为什么这是有效的：

```
(= '(:anything :goes :here) (filter (fn [x] true) '(:anything :goes :here))) 
```

但不是这个？

```
(= (:anything :goes :here) (filter (fn [x] true) '(:anything :goes :here))) 
```

或者

```
(= (:anything :goes :here) (filter (fn [x] true) (:anything :goes :here))) 
```

甚至

```
(= '(:anything :goes :here) (filter (fn [x] true) (:anything :goes :here))) 
```

是否有特殊原因要过滤的第二个 arg 是带引号的列表而不是普通列表？

```
user=> (filter (fn [x] true) (:abc :def :ghi))
IllegalArgumentException Don't know how to create ISeq from: clojure.lang.Keyword  clojure.lang.RT.seqFrom (RT.java:505) 
```

事实上，我仍然不确定列表何时也是函数调用。它似乎与引用有关。除非它们是空列表，否则是否需要引用所有“普通列表”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:55:59.287

评估列表时，假定第一个元素是函数（或宏或特殊形式）。

当列表的第一个元素是函数时，首先计算所有参数，然后将函数应用于结果值。

如果列表的第一个元素是宏或特殊形式，则每个参数可能会或可能不会根据宏/特殊形式进行评估。

Clojure 将通过尝试在作为参数给关键字函数的映射中找到该关键字作为关键字来评估其第一个元素是关键字的列表，然后返回相应的值，否则返回下一个参数（如果给定）。从而`(:anything :goes: :here)`将返回`here`。

`'`是一个读宏，它把它的参数变成一个`quote`特殊的形式。*即* `'anything`=>`(quote anything)`

在你的情况下：

当`=`被评估时，`(:anything :goes: here)`和/或`'(:anything goes here)`必须被评估的值。评估第一个将导致`:here`. （在其他 lisps 中会导致错误）。`'(:anything :goes :here)`, 然而是 , 的缩写形式`(quote (:anything :goes :here))`，并且`quote`是一种特殊形式，它返回它的参数*unevaluate*，从而生成列表`(:anything :goes: here)`，然后将其传递给`=`或`filter`不进行进一步评估。

在每种情况下发生的情况是：

```
(= '(:anything :goes :here) (filter (fn [x] true) '(:anything :goes :here))) 
```

`=`与 比较`(:anything :goes :here)`，`(:anything :goes :here)`结果为真

```
(= (:anything :goes :here) (filter (fn [x] true) '(:anything :goes :here))) 
```

`:here`与 比较`(:anything :goes :here)`，结果为假

```
(= (:anything :goes :here) (filter (fn [x] true) (:anything :goes :here)))
(= '(:anything :goes :here) (filter (fn [x] true) (:anything :goes :here))) 
```

在这两个中，`filter`都应用于单个关键字`:here`，导致错误。

# scala - 是否有任何记录在案的函数式编程反模式？

> ID：15848856
> 
> 赞同：29
> 
> 时间：2013-04-06T08:51:14.313
> 
> 标签：scala, haskell, f#, functional-programming, anti-patterns

下个月我将从事一个新的研发项目，该项目将采用函数式编程语言（我投票支持 Haskell，但现在 F# 获得了更多共识）。现在，我已经使用这些语言有一段时间了，并用它们开发了一些命令行工具，但这是一个相当大的项目，我正在努力提高我的函数式编程知识和技术。我也阅读了很多关于该主题的内容，但我找不到任何记录函数式编程世界中反模式的书籍或资源。

现在，学习反模式意味着**了解其他聪明人的失败**：在 OOP 中，我知道其中的一些，而且我有足够的经验来明智地选择通常是反模式的东西，完全符合我的需求。但我可以选择这个，因为我知道其他聪明人吸取的教训。

因此，我的问题是：函数式编程中是否有任何**记录在案** [的反模式？](http://en.wikipedia.org/wiki/Anti-pattern)到目前为止，我所有的同事都告诉我他们不知道，但他们无法说明原因。

*   如果是，请包含一个指向权威来源（目录、论文、书籍或同等材料）的链接。
*   如果不是，请用[适当的定理](http://en.wikipedia.org/wiki/Proof_by_contradiction)支持您的回答。

*请* [不要把这个问题放在一个列表中](https://meta.stackexchange.com/questions/175507/how-can-i-turn-a-not-constructive-question-in-a-constructive-one/)：这是一个布尔问题，只需要一个证明来评估答案。例如，如果您是 Oleg Kiselyov，“是”就足够了，因为每个人都可以找到您关于该主题的文章。不过，请大方一点。

请注意，我正在寻找正式的反模式，而不是简单的坏习惯或坏做法。

来自[关于反模式的链接维基百科文章](http://en.wikipedia.org/wiki/Anti-pattern)：

> ...**必须至少存在两个关键要素才能正式区分实际的反模式与简单的坏习惯、坏做法或坏主意**：
> 
> 1.  一些重复的行动模式、过程或结构，最初看起来是有益的，但最终产生的不良后果多于有益结果，以及
> 2.  存在一种替代解决方案，该解决方案有明确的记录，在实际实践中得到证明并且可重复。

此外，“记录”是指来自**权威作者**或**知名来源**的东西。

我习惯的语言是：

*   Haskell（我真的开始认为如果代码编译，它就可以工作！）
*   斯卡拉
*   F＃

但我也可以调整有关以其他功能语言记录的反模式的知识。

我在网上搜索了很多，但我找到的所有资源要么与 OOP 相关，要么与函数布局相关（在函数开头定义变量，等等......）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-06T17:17:43.163

我见过的唯一反模式是过度单子化，由于单子非常有用，所以它介于不良实践和反模式之间。

假设你有一些`P`你想对你的一些对象真实的属性。您可以使用 P monad 装饰您的对象（在 Scala 中，`paste`在 REPL 中使用以使对象及其伴侣粘在一起）：

```
class P[A](val value: A) {
  def flatMap[B](f: A => P[B]): P[B] = f(value)       // AKA bind, >>=
  def map[B](f: A => B) = flatMap(f andThen P.pure)   // (to keep `for` happy)
}
object P {
  def pure[A](a: A) = new P(a)                        // AKA unit, return
} 
```

好的，到目前为止一切顺利；我们通过制作`value`a`val`而不是将其制作为共单子（如果这是我们想要的）来作弊，但我们现在有一个方便的包装器，我们可以在其中包装任何东西。现在让我们假设我们也有属性`Q`和`R`。

```
class Q[A](val value: A) {
  def flatMap[B](f: A => Q[B]): Q[B] = f(value)
  def map[B](f: A => B) = flatMap(f andThen Q.pure)
}
object Q {
  def pure[A](a: A) = new Q(a)
}
class R[A](val value: A) {
  def flatMap[B](f: A => R[B]): R[B] = f(value)    
  def map[B](f: A => B) = flatMap(f andThen R.pure)
}
object R {
  def pure[A](a: A) = new R(a) 
} 
```

所以我们装饰我们的对象：

```
class Foo { override def toString = "foo" }
val bippy = R.pure( Q.pure( P.pure( new Foo ) ) ) 
```

现在我们突然面临一大堆问题。如果我们有一个需要 property 的方法，`Q`我们如何得到它？

```
def bar(qf: Q[Foo]) = qf.value.toString + "bar" 
```

嗯，显然`bar(bippy)`是行不通的。有`traverse`or`swap`操作可以有效地翻转 monad，所以如果我们`swap`以适当的方式定义，我们可以做类似的事情

```
bippy.map(_.swap).map(_.map(bar)) 
```

取回我们的字符串（实际上是 a `R[P[String]]`）。但是我们现在已经承诺为我们调用的每个方法做类似的事情。

这通常是错误的做法。如果可能，您应该使用其他一些同样安全的抽象机制。例如，在 Scala 中，您还可以创建标记特征

```
trait X
trait Y
trait Z
val tweel = new Foo with X with Y with Z
def baz(yf: Foo with Y) = yf.toString + "baz"
baz(tweel) 
```

哇！容易多了。现在非常重要的是要指出*并非一切都更容易*。例如，使用这种方法，如果您开始操作`Foo`，则必须自己跟踪所有装饰器，而不是让 monadic `map`/`flatMap`为您完成。但是很多时候你*不需要*做一堆实物操作，那么深度嵌套的 monad 就是一种反模式。

（注意：monadic 嵌套具有堆栈结构，而特征具有 set 结构；编译器没有内在的原因不能允许 set-like monad，但它不是典型的类型理论公式的自然构造。反模式是深堆栈难以使用这一事实的一个简单结果。如果您为 monad（或 Haskell 中的标准 Monad 转换器集）实现所有 Forth 堆栈操作，它们可能会更容易一些。）

# facebook-graph-api - 搜索查询的 Facebook Graph API 速率限制

> ID：15848860
> 
> 赞同：2
> 
> 时间：2013-04-06T08:51:37.097
> 
> 标签：facebook-graph-api, limit, rate-limiting

我正在做一个项目来处理电子邮件地址列表（大约 400 万个条目），并确定他们是否有关联的 facebook 帐户。我正在使用图形 API 搜索查询来检测它。现在有没有机会获得速率限制，甚至有任何官方的速率限制吗？考虑到列表真的很大，也许我们会做多线程请求，我担心任何速率限制。

我听说过非官方的 600 请求/600 秒，但在 facebook 上没有看到任何证据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-26T01:07:13.640

Facebook 终于分享了他们的官方速率限制：[https ://developers.facebook.com/docs/graph-api/advanced/rate-limiting](https://developers.facebook.com/docs/graph-api/advanced/rate-limiting)

# optimization - 有没有办法在 mongoengine 中有更短的 _cls 值？

> ID：15848861
> 
> 赞同：0
> 
> 时间：2013-04-06T08:51:39.803
> 
> 标签：optimization, database-performance, mongoengine, diskspace

`_cls`除了使类的名称更短（这会使代码难以阅读）之外，有没有办法在 mongoengine 中使用更短的值？

我一直在寻找这样的东西：

```
class User(Document):
    login = StringField(primary_key = True)
    full_name = StringField()
    meta = { "short_class_name": "u" }

class StackOverFlowUser(User):
    rep = IntField()
    meta = { "short_class_name": "s" } 
```

如果`short_class_name`元属性存在（但我没有找到它或类似的东西），那么我们可以有这个：

```
{ "_cls" : "s", "_id" : "john",
  "full_name" : "John Smith", "rep" : 600 } 
```

而不是这个：

```
{ "_cls" : "User.StackOverFlowUser", "_id" : "john",
  "full_name" : "John Smith", "rep" : 600 } 
```

在此示例中，这会节省大约 20% 的空间，在某些情况下，可能会更多。

我猜 mongoengine 是开源的，我可以继续编写代码，但如果您知道更简单的解决方案，我很想听听。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:37:22.567

在查看了 mongoengine 的源代码后，我和**MiniQuark**得到了下一个 hack：

```
def hack_document_cls_name(cls, new_name):
    cls._class_name = new_name
    from mongoengine.base import _document_registry
    _document_registry[new_name] = cls 
```

或作为类装饰器：

```
def hack_document_cls_name(new_name):
    def wrapper(cls):
        cls._class_name = new_name
        from mongoengine.base import _document_registry
        _document_registry[new_name] = cls
        return cls
    return wrapper 
```

除了使用`_class_name`和`_document_registry`.

当你想重命名一个类时，你必须在类定义之后立即应用这个hack（或者至少在你定义任何子类之前，否则它们将有一个`_types`带有基类长名称的属性）。例如：

```
class User(Document):
    login = StringField(primary_key = True)
    full_name = StringField()

hack_document_cls_name(User, "u")

class StackOverflowUser(User):
    rep = IntField()

hack_document_cls_name(StackOverflowUser, "s") 
```

或作为类装饰器：

```
@hack_document_cls_name("u")
class User(Document):
    login = StringField(primary_key = True)
    full_name = StringField()

@hack_document_cls_name("s")
class StackOverflowUser(User):
    rep = IntField() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:52:25.603

好的，到目前为止，我能想到的最好的就是这个。它有效，但我确信必须有更少的黑客解决方案......

```
class U(Document): # User
    meta = { "collection": "user" }
    login = StringField(primary_key = True)
    full_name = StringField()

class S(U): # StackOverflowUser
    rep = IntField()

User = U; del(U)
StackOverflowUser = S; del(S)
User.__name__ = "User"
StackOverflowUser.__name__ = "StackOverflowUser" 
```

现在当我这样做时：

```
StackOverflowUser.objects.create(login="john", full_name="John Smith", rep=600) 
```

我在`user`集合中得到这个文件：

```
{ "_cls" : "U.S", "_id" : "john", "full_name" : "John Smith", "rep" : 600 } 
```

与标准行为相比，这节省了大约 20% 的空间。但我不喜欢它是多么的骇人听闻。

# php - if循环加粗某些记录并保持其他非粗体

> ID：15848862
> 
> 赞同：0
> 
> 时间：2013-04-06T08:51:55.227
> 
> 标签：php, mysql, if-statement, pdo, while-loop

我正在尝试从数据库中获取返回的记录。我正在寻找此页面尚未返回的粗体返回问题（返回 = 1）和非粗体问题（返回 = 0）[http://starsQA.com/Qbank](http://starsQA.com/Qbank)

这是到目前为止的查询代码：

```
<?php
include("db_conn.php");
$qry_string = "select * from stars order by starName ASC";
$prep = $pdo_conn->prepare($qry_string);
$prep->execute();
while ($row = $prep->fetch(PDO::FETCH_ASSOC)) {
    echo "<button class='tosearch spcbtn' id='tglbtn{$row['starID']}'>{$row['starName']}</button>";
    echo "<div style='clear:both;'></div>";
    echo "<div style='color:black;' class='tgldiv' id='tgldiv{$row['starID']}'><b>{$row['starName']}</b><br><ol>";
    $qry_stringq = "select * from questions where starID = ? && approved = 1";
    $prepq = $pdo_conn->prepare($qry_stringq);
    $prepq->execute(array($row['starID']));
    while ($rowq = $prepq->fetch(PDO::FETCH_ASSOC)) {
        echo "<li style='margin:30px'>{$rowq['question']}</li>";
    }
    echo "<ol'></div>";
    echo "<div style='clear:both;'></div>";
 }
?> 
```

如果你在搜索框中输入*geno segers*并打开他的按钮，那么问题 1-26 应该是粗体，问题 27 应该是非粗体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:03:39.203

也许是这样的？

```
while ($rowq = $prepq->fetch(PDO::FETCH_ASSOC)) {
    $bold = $rowq['returned'] == 1 ? ' font-weight:bold;' : '';
    echo "<li style='margin:30px;{$bold}'>{$rowq['question']}</li>";
} 
```

# asp.net-mvc - 如果我为特定类型定义了编辑器模板，如何使用默认 MVC 编辑器？

> ID：15848863
> 
> 赞同：0
> 
> 时间：2013-04-06T08:52:00.213
> 
> 标签：asp.net-mvc

如果我为特定类型定义了编辑器模板，如何使用默认 MVC 编辑器？

例如，我`string.cshtml`在“Editors”文件夹中有字符串类型（“”）的编辑器。当我使用

`@Html.EditorFor(x => x.MyStringField)`

它使用我的模板（“ `string.cshtml`”）。但是我的应用程序中有区域，我想在那里使用默认的 MVC 编辑器模板作为字符串类型。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T12:55:17.893

您应该将编辑器模板放在您所在区域或根文件夹中的文件夹 Views\Shared\EditorTemplates 中。

如果需要，可以为当前属性设置编辑器模板：

```
@Html.EditorFor(x => x.MyStringField, "editorTemplateName"); 
```

在这种情况下，您应该命名编辑器模板自定义名称（而不是字符串）。

# plot - 可视化神经网络的决策面

> ID：15848871
> 
> 赞同：2
> 
> 时间：2013-04-06T08:52:54.773
> 
> 标签：plot, wolfram-mathematica, neural-network, visualization

我在哪里可以找到可视化（即绘图）2 层前馈神经网络的决策边界表面的程序？对于 1 层，决策面只是一堆直线。但是有 2 层（每个神经元可能还有 sigmoid 阈值），决策表面可能非常复杂和非线性，我猜甚至是不相交的。拥有一个交互式工具来在网络上获得动手“感觉”会很好......用于教育目的和研究:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T10:21:31.733

It depends from the way, your neural network is implemented. If to trust your tags, you used wolfram-mathematica for implementation. It has some tools for visualisation: [http://www.wolfram.com/training/courses/vis411.html](http://www.wolfram.com/training/courses/vis411.html) [http://reference.wolfram.com/language/ref/ListPointPlot3D.html](http://reference.wolfram.com/language/ref/ListPointPlot3D.html) etc... For C# visualisation I use [http://ilnumerics.net/](http://ilnumerics.net/) And for visualisation in Octave I use built in function mesh ( for 3d ) and plot for 2D. You just need to choose what to plot. Predicted values, input values, average of two, three, four input values.

# php - 无法让 Ajax 登录到 RESTful 服务器

> ID：15848873
> 
> 赞同：2
> 
> 时间：2013-04-06T08:53:02.900
> 
> 标签：php, javascript, jquery, ajax, session

我正在尝试使用 ajax 设置登录系统。

用户在 subdomain.domain.com（也可能是 otherdomain.com）中插入他的登录名和密码后，我向 rest.domain.com 发出 Jquery $.post 请求，并且用户正确登录。

然后，如果我向 rest.domain.com 发出另一个请求以检查用户是否已登录（或进行其他需要用户登录的操作），则会话为空。

我究竟做错了什么？

**编辑**

客户端应用

```
$.post('http://rest.domain.com/user/login',form,function(data){
   //Do what is needed
}); 
```

RESTful 应用程序（使用 Slim 和 uFlex）

```
header('Access-Control-Allow-Origin: *');
session_start();

//User
//Check if logged
$app->get('/user/logged', function () use ($user, $app){
    print_r($_SESSION);
    echo $user->signed;
});

//Login
$app->post('/user/login', function () use ($user, $app) {
    $username = isset($_POST['email']) ? $_POST['email'] : false;
    $password = isset($_POST['password']) ? $_POST['password'] : false;
    $auto = isset($_POST['auto']) ? $_POST['auto'] : false;

    $user->login($username,$password,$auto);

    if($user->signed){
        print_r($_SESSION);
    }else{
        //Display Errors
        foreach($user->error() as $err){
            echo "<b>Error:</b> {$err} <br/ >";
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:01:23.603

我认为您违反了同源政策。您不能向不同的域发出 Ajax 请求，或者至少这是 SOP 规定的。所以这是你应该看的东西。

完成上述过程后，使用浏览器检查存储的 cookie。cookie 存储在每个子域的基础上，因此您的`PHP_SESSID`cookie（如果您使用`$_SESSION`）可能存在于错误的子域中。

您能否提供有关如何存储会话的更多见解？

不管上述如何，最好将所有 Ajax 请求定向到`ajax.php`同一子域、协议等上的同一目标文件。（SOP 的所有规则）并在服务器级别路由请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:02:27.560

您的会话可能存储在绑定到 rest.domain.com 的 cookie 中。

请参阅此线程： [为什么 jquery 的 .ajax() 方法不发送我的会话 cookie？](https://stackoverflow.com/questions/2870371/why-is-jquerys-ajax-method-not-sending-my-session-cookie)

为了支持这种身份验证，您可以在同一个域中同时拥有 REST API 和网站，或者根据在客户端和服务器之间交换的标头（您可以控制）定义会话身份验证。

例如，在执行初始身份验证后，您可以生成一个随机 session-id（不是 PHP session-id）和 next-request-id 并通过 HTTP 标头将其发送回客户端。

在客户端，您将读取 session-id 和 next-request-id 并将其用于对 REST API 的后续请求。

REST API 将检查 session-id 和 next-request-id 并验证它。如果有效，则请求通过身份验证。在响应中，相同的 session-id 和一个新的 next-request-id 被发送回客户端。

为避免第 3 方篡改会话，如果请求 ID 被使用两次，则会话 ID 应失效。

为了在页面更改中重用 session-id，您可以将两者都存储在浏览器 localStorage 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:57:26.207

尽管完全可以发出跨域 ajax 请求，但出于安全原因，这些请求并没有设置必要的 cookie 来保持有效会话。

就我而言，软件设计允许我删除所有跨域请求并替换它们以使其工作。

如果不是这样，我认为最好的解决方案是像大多数“严肃”的 RESTful api 那样依赖 OAuth。

# php - 如何在下拉选择菜单上添加验证？

> ID：15848878
> 
> 赞同：0
> 
> 时间：2013-04-06T08:53:47.280
> 
> 标签：php, validation, drop-down-menu, option

如何在下拉选择菜单上添加验证我有代码并且我正在处理但问题是它不起作用没有显示错误消息。如果在单击添加到购物车按钮之前不应该选择下拉选择值，我想显示错误消息？

```
if(isset($_REQUEST['check'])){
if (isset($_POST['size']) && $_POST['size'] == '' ) {
echo 'Error, select category';
exit;
}}

<form action="" id="size1" name="size1" method="post"> 
<select style="background-color:#CCC" 
name="size" id="size"  onchange="this.form.submit();" >
<option value="">Select</option>
<option <?php if ($_POST['size'] == 'Small') 
print 'selected '; ?>  value="Small">Small</option>
<option <?php if ($_POST['size'] == 'Medium') 
print 'selected '; ?> value="Medium">Medium</option>
<option  <?php if ($_POST['size'] == 'Large') 
print 'selected '; ?> value="Large">Large</option>
<option   <?php if ($_POST['size'] == 'XL')
print 'selected '; ?> value="XL">XL</option>
</select>

<input type="button" class="button1" name="check" 
value="Add To Cart" onclick="addtocart(<?php echo $row3['id'];?>);" />
</form 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:00:15.247

请尝试它的工作

应该是这样的

```
<?php
    if($_POST['country']=="0")
    {
        echo 'Error, select category';
        //exit;
    }
?>
<form action="" id="size1" name="size1" method="post">
<select style="background-color:#CCC" 
name="size" id="size"  onchange="this.form.submit();" >
  <option value="0">Select</option>
  <option <?php if ($_POST['size'] == 'Small') 
print 'selected '; ?>  value="Small">Small</option>
  <option <?php if ($_POST['size'] == 'Medium') 
print 'selected '; ?> value="Medium">Medium</option>
  <option  <?php if ($_POST['size'] == 'Large') 
print 'selected '; ?> value="Large">Large</option>
  <option   <?php if ($_POST['size'] == 'XL')
print 'selected '; ?> value="XL">XL</option>
</select>
<input type="button" class="button1" name="check" 
value="Add To Cart" onclick="addtocart(<?php echo $row3['id'];?>);" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:02:28.397

如果我的问题正确，您希望在提交表单之前进行验证？如果是这样，那么您需要使用客户端验证：

[http://docs.jquery.com/Plugins/validation#Example](http://docs.jquery.com/Plugins/validation#Example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:29:12.447

在这里对 html 做些小改动

```
<option value="0">Select</option> 
```

并像这样检查

```
function check_selected_or_not(){
var check_selected = jQuery('#size').val();
if (check_selected == 0){
    alert('Please select');
}else{
    alert('sucess');
}

} 
```

# ios - 如何将 NSMutableArray 中的值移动到 NSArray

> ID：15848882
> 
> 赞同：0
> 
> 时间：2013-04-06T08:54:16.500
> 
> 标签：ios, nsmutablearray, nsarray

我有一组推荐的汽车 ID，以及另一个全车 ID 数组。由此，我必须拍摄推荐的汽车图像。首先，我检查推荐的 carid 是否在我的 allcar id 中；如果是，我选择相应的汽车图像，并将它们存储到 NSArray 中。

这是我正在使用的代码。

```
 for (int i=0;i<[listOfCarId count];i++) {
    for (int j=0;j<[_allCarID count];j++) {
        tempAllCarId=[_allCarID objectAtIndex:j];
        tempRecommendedCarId=[listOfCarId objectAtIndex:i];
        if ([tempRecommendedCarId isEqualToString:tempAllCarId]) {  
            _recommendedCarImage=[_allCarImages objectAtIndex:j];
            NSLog(@"finalImage%@",_recommendedCarImage);
        }
    }
} 
```

`_recommendedcarImage`是`NSMUtableArray`；我想要一个`NSArray`. 我怎样才能将其转换为`NSArray`？

如何用 NSArray 替换“_recommendedCarImage”？目前 _recommendedCarImage 是一个可变数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T08:56:44.887

[多态性。](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)由于`NSMutableArray`是 的子类`NSArray`，因此您可以在任何需要的地方使用它`NSArray`。你不必做任何事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T07:23:48.370

现在它的工作，我所做的是，我只是将 Mutable 数组的内容复制到 NSarray

```
 recommendedArray=[_recommendedCarImage copy]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T08:56:57.200

An已经`NSMutableArray`是`NSArray`（因为它是 的子类`NSArray`），您仍然可以这样做：

```
NSArray *array = [NSArray arrayWithArray:mutableArray]; 
```

# symfony - symfony/Routing - 两次导入 yml 资源

> ID：15848884
> 
> 赞同：1
> 
> 时间：2013-04-06T08:54:30.313
> 
> 标签：symfony, routing

我正在尝试为所有路线启用可选的语言环境占位符，而无需复制所有内容。我的路线如下所示：

```
site:
    prefix: /
    resource: "routes-site.yml"

site_i18n:
    prefix: /{_locale}
    resource: "routes-site.yml"
    defaults: {_locale: pl}
    requirements:
        _locale: 'en' 
```

但我只有 site_i18n 工作。为什么我不能多次导入相同的资源？这是 Symfony 2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:48:00.297

因为路由具有相同的路由名称，所以后面的导入会覆盖第一个导入的路由。看看：[BeSimpleI18nRoutingBundle](https://github.com/BeSimple/BeSimpleI18nRoutingBundle)。它甚至允许您本地化整个路径，但在这种情况下，您只需要本地化前缀。

# ruby - 正确使用 Sequel 的 save()？如何创建新记录或更新现有记录？

> ID：15848885
> 
> 赞同：2
> 
> 时间：2013-04-06T08:54:32.533
> 
> 标签：ruby, orm, sequel

Sequel gem 有一个`save`“创建或更新记录”的方法。我正在尝试使用它来创建新记录，当不存在时，或更新现有记录的字段：

```
record = Records.where(:name => 'Dark Side of the Moon').first
record.save(:artist => "Pink Floyd") 
```

这失败了，因为`Records.where(:name => 'Dark Side of the Moon')`返回 nil，而不是一个空的 Record 对象。本质上，我将此方法用作`upsert`，但它不能以这种方式工作，因为该`save`方法是模型实例方法。

我的问题是双重的：（1）正确的使用方式是什么`save`，以及（2）Sequel 是否有“更新”记录的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T15:08:46.577

如果您有模型实例，则只能使用 Model#save。如果数据库中还没有模型实例（何时`nil`返回），您可以通过创建一个新模型实例来做到这一点。

```
record = Records[:name => 'Dark Side of the Moon'] || Records.new(:name => 'Dark Side of the Moon')
record.save(:artist => "Pink Floyd") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-14T12:25:26.290

`record.save(:artist => "Pink Floyd")`对我不起作用，但是

```
record.artist = "Pink Floyd"
record.save 
```

运作良好。这可能是 Sequel 中的错误`4.16.0`。

# c# - 用于二进制消息序列化/反序列化的结构

> ID：15848886
> 
> 赞同：5
> 
> 时间：2013-04-06T08:54:37.430
> 
> 标签：c#, binary

我是 C# 中的二进制新手，并且对执行此操作的最佳方法有疑问。我有一个我正在尝试通信的应用程序，它具有特定的二进制消息格式。它必须以十六进制代码开头，以`B8`十六进制代码结尾`BB`，中间是二进制消息。能够获取字节缓冲区并将其转换为消息以便轻松访问消息属性的最佳方法是什么？我会想象一个结构，但老实说，我真的不知道。

编辑：

我不希望它是二进制的原因是我可以在我的应用程序中轻松使用数据。例如，我想将表示命令类型的二进制位转换为枚举。像这样（只是我想做的一个表示）：

```
struct CommandMessage
{
    public CommandType Command { get; set; }
    public object Data { get; set; }
}

enum CommandType
{
    UserJoined,
    MessageReceived
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:09:33.453

我建议[`protobuf-net`](https://code.google.com/p/protobuf-net/)用于`DTO`序列化。

因此，定义一些实体，例如`Package`（`CommandMessage`在您的示例中）具有

```
public Command Command; 
```

`public byte[] Data;`（用 序列化`protobuf`）

基于您将`Command`能够使用.`Data``DTO``protobuf`

如果您的消息应该以特殊前缀开头，您也可以处理它`Package`。此外，`Package`应该处理向/从二进制流或缓冲区写入/读取自身（这非常困难）。

例如`package.WriteTo(buffer)`生产`[BB,Command,Data,B8]`。相同的`package.ReadFrom()`

# python - 在 Python 中使用嵌套循环计算所有唯一排列

> ID：15848887
> 
> 赞同：2
> 
> 时间：2013-04-06T08:54:43.783
> 
> 标签：python

这个 C++ 代码的 python 等效实现是什么：

```
char x[10];
for (int i=0; i < 10; i++) {
    for (int j=i; j < 10; j++) {
        calc_something(x[i], x[j])
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T09:22:00.847

这可以通过以下方式完成[`itertools.combinations()`](http://docs.python.org/3.3/library/itertools.html#itertools.combinations)：

```
import itertools

...

for i, j in itertools.combinations(x, 2):
    calc_something(i, j) 
```

这给了你想要的。具体来说，它将按以下顺序返回元素：

```
[(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (0, 7), (0, 8), (0, 9), 
 (1, 2), (1, 3), (1, 4), (1, 5), (1, 6), (1, 7), (1, 8), (1, 9), 
 (2, 3), (2, 4), (2, 5), (2, 6), (2, 7), (2, 8), (2, 9), 
 (3, 4), (3, 5), (3, 6), (3, 7), (3, 8), (3, 9), 
 (4, 5), (4, 6), (4, 7), (4, 8), (4, 9), 
 (5, 6), (5, 7), (5, 8), (5, 9), 
 (6, 7), (6, 8), (6, 9), 
 (7, 8), (7, 9), 
 (8, 9)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T09:26:06.243

以下是一些不使用导入的解决方案，并假设`x`已将其声明为包含 10 个元素的列表：

```
for i in range(10):  # xrange in Python 2
    for j in range(i, 10):
        calc_something(x[i], x[j]) 
```

或使用以下`enumerate`功能：

```
for i, el in enumerate(x):
    for j in x[i:]:
        calc_something(el, j) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:07:46.750

最简单的是：

```
 for i in range(1,10):
        for j in range(1,10):
           calc_something( list[i],list[j]) 
```

而不是硬编码 (1,10) 你可以说
for i in list: for j in list:

# web-applications - 以编程方式播放 mp3 的某些部分

> ID：15848889
> 
> 赞同：1
> 
> 时间：2013-04-06T08:54:53.447
> 
> 标签：web-applications, mp3

我想要一个 mp3 文件并播放其中的某些部分，例如 css sprites。含义，定义原始文件的偏移量和持续时间。例如，假设我有一个一分钟的 mp3 文件，我想从中播放 30-35 秒。

寻找一种在.net中做到这一点的方法，最好是，但不是必须的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:58:55.723

第一个决定是做这个“客户端”（即在 HTML/Javascript 中）还是服务器端（即用您的站点所构建的任何语言，例如 PHP、C#、Ruby 等）。

您的编辑说您希望在 .Net 中使用它 - 所以如果您想在服务器端进行，您必须找到一个音频库（请参阅[这个](https://stackoverflow.com/questions/8532033/looking-for-a-simple-mp3-library-for-c-sharp)SO 问题），并“寻找”到 MP3 流中的正确点，然后使用适当的[MIME 类型](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.contenttype%28v=vs.71%29.aspx)将其返回给浏览器。

但是，您应该小心这样的实现 - 您可能会发现支持大量请求可能会阻塞，特别是如果您无法将 MP3 文件加载到内存中并且必须为每个请求从磁盘读取它们。

另一种方法是在[客户端](https://stackoverflow.com/questions/2798931/seeking-through-a-streamed-mp3-file-with-html5-audio-tag)进行 - 可能使用像[JPlayer](http://www.jplayer.org/latest/developer-guide/)这样的库，它支持“寻找”开箱即用的 MP3 中的位置。

这创建了一个更简单的服务器实现，并且应该支持所有浏览器 - 尽管您可以由库创建者来保证这一点。

# javascript - 部署节点应用和mysql

> ID：15848890
> 
> 赞同：0
> 
> 时间：2013-04-06T08:54:54.453
> 
> 标签：javascript, node.js, web-deployment-project

如何将节点应用程序部署到支持 mysql 的服务中。我尝试使用 c9、nodejitsu，但它们不支持数据库 mysql。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:01:38.880

AppFog 是一个免费且良好的解决方案。他们有 MySQL 数据库和 MongoDB。他们很快也会支持 websockets。

有关更多信息，请查看此页面 - [https://github.com/joyent/node/wiki/Node-Hosting](https://github.com/joyent/node/wiki/Node-Hosting)

# mysql - 如何在 CASE 表达式中限定条件（类似于 WHERE 子句）

> ID：15848894
> 
> 赞同：1
> 
> 时间：2013-04-06T08:55:15.673
> 
> 标签：mysql, sql, case, aggregate-functions, conditional-statements

## 这是我的桌子

```
Company  |  Year |  Amount
------------------------
CompanyA | 2008  |   5
CompanyA | 2008  |   4
CompanyB | 2008  |   4
CompanyB | 2009  |   1
CompanyC | 2009  |   4
CompanyC | 2010  |   2 
```

## 伪代码

```
SELECT company,
CASE WHEN year = 2008 THEN select max(amount) for each company where the year is = 2008
CASE WHEN year = 2009 THEN select max(amount) for each company where the year is = 2009
GROUP BY company 
```

我已经能够让 CASE 工作，但它选择了所有年份的 MAX（数量）并按公司分组，但我需要每年的最大值。

我想我需要用 WHERE 子句或嵌套的 CASE 来限定 CASE 表达式中的条件，但不能让它工作。

## 真实代码

```
select
record_id AS record_id,
invoice_date AS invoice_date,
company_id AS company_id,
company_name AS company_name,
fiscal_year AS fiscal_year,
(CASE fiscal_year WHEN '2008' THEN MAX(amount) ELSE 0 END) AS `2008`,
(CASE fiscal_year WHEN '2009' THEN MAX(amoutn) ELSE 0 END) AS `2009`,
(CASE fiscal_year WHEN '2010' THEN MAX(amount) ELSE 0 END) AS `2010`,
(CASE fiscal_year WHEN '2011' THEN MAX(amount) ELSE 0 END) AS `2011`,
(CASE fiscal_year WHEN '2012' THEN MAX(amount) ELSE 0 END) AS `2012`,
(CASE fiscal_year WHEN '2013' THEN MAX(amount) ELSE 0 END) AS `2013`
from tbl
group by company_name
order by invoice_date desc, record_id desc; 
```

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T08:58:34.767

试试这个：

```
SELECT company,
  MAX(CASE WHEN year = 2008 THEN amount ELSE 0 END) AS '2008',
  MAX(CASE WHEN year = 2009 THEN amount ELSE 0 END) AS '2009'
FROM tbl
GROUP BY company; 
```

看看它的实际效果：

*   [SQL 小提琴演示](http://sqlfiddle.com/#!2/d65201/2)

这会给你：

```
|  COMPANY | 2008 | 2009 |
--------------------------
| CompanyA |    5 |    0 |
| CompanyB |    4 |    1 |
| CompanyC |    0 |    4 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:58:43.800

这是在 MySQL 中旋转表的方式：

```
select max(case fiscal_year when '2008' then amount else 0 end) as '2008',
       max(case fiscal_year when '2009' then amount else 0 end) as '2009',
       ... 
```

# iphone - 双击并滑动/拖动手指以放大/缩小

> ID：15848897
> 
> 赞同：4
> 
> 时间：2013-04-06T08:55:26.807
> 
> 标签：iphone, sdk, uiscrollview, zooming

如果有人遇到适用于 iOS 的谷歌地图应用程序，那么它有一个很棒的功能，可以用一根手指放大/缩小：双击 uiscrollview，然后立即向上或向下滑动手指以放大/缩小。有谁知道这是如何实现的？谷歌有没有发布任何片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T15:11:33.877

我将此功能添加到[我的 UIScrollView 类别中](https://github.com/bddckr/BDDRScrollViewAdditions)。
实际的点击识别很容易，计算“正确”（感觉“正确”）`zoomScale`是问题......如果您认为该类别处理得不够好，请不要犹豫告诉我并打开一个新问题github页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-13T18:33:29.293

使用 UIPanGestureRecognizer 跟踪向上/向下拖动。为了确保它只在双击时触发，请给它一个执行以下操作的委托：

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
    if gestureRecognizer == yourZoomRecognizer {
        return touch.tapCount == 2
    } else {
        return true
    }
} 
```

现在处理来自手势识别器的消息。您可以像这样导出缩放比例：

```
let zoomFactor: CGFloat = 1.01        //Each point of pan zooms in or out by this much
var zoomScale: CGFloat = 1            //Dummy variable for example purposes.

@IBAction func handleZoomGesture(sender: UIPanGestureRecognizer) {
    if sender.state == .began {
        //Set initial translation to reflect the current zoomScale
        let logZoom = log(zoomScale) / log(zoomFactor)
        sender.setTranslation(CGPoint(x: 0, y: logZoom), in: sender.view)
    } else if sender.state == .changed {
        let logZoom = sender.translation(in: sender.view).y
        zoomScale = pow(zoomFactor, logZoom)
    }
} 
```

这并没有显示在滚动视图上实际设置 zoomScale，这是一堆额外的代码 - 您需要获取平移手势的位置并将缩放围绕该位置居中。您还需要钳制缩放比例，并且可能还要处理缩放结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T16:13:14.890

此示例使用 UIScrollView 的常规缩放功能，其中包含 UIImageView 作为子视图。例如，您可以在 MWPhotoBrowser 库中找到这种缩放的实现。_imageView、_doubleTapBeganPoint、_longPressBeganPoint、_minScale 是你的类（UIScrollView 子类）iVars。所以从初始化开始：

```
UILongPressGestureRecognizer* lpgs = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(imageLongPressed:)];
lpgs.minimumPressDuration = .2;
[self addGestureRecognizer:lpgs]; 
```

标准缩放处理程序：

```
- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return _imageView;
} 
```

使用 touchesBegan 捕捉双击（由于某种原因，UITapGestureRecognizer 不想与 UILongPressGestureRecognizer 一起使用）：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];
    NSUInteger tapCount = touch.tapCount;
    switch (tapCount) {
        case 2:
            [self handleDoubleTapBegan:[touch locationInView:self.superview]];
            break;
        default:
            break;
    }
    [[self nextResponder] touchesEnded:touches withEvent:event];
}

- (void)handleDoubleTapBegan:(CGPoint)touchPoint {

    _doubleTapBeganPoint = touchPoint;

    NSLog(@"image double tap began at location: %@", NSStringFromCGPoint(touchPoint));
} 
```

处理长按并使用 Y 坐标的差异来计算缩放比例。_minScale 存储您的初始缩放比例，以便我们可以恢复它。

```
- (void) imageLongPressed:(UIGestureRecognizer*)gesture {

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        self.maximumZoomScale = _maxScale * 2;
        self.minimumZoomScale = _minScale / 3;

        _longPressBeganPoint = [gesture locationInView:self.superview];

        [self setZoomScale:_minScale animated:YES];
        NSLog(@"image long press began at location: %@", NSStringFromCGPoint(_longPressBeganPoint));
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        CGPoint p = [gesture locationInView:self.superview];

        //NSLog(@"image long press changed at location: %@", NSStringFromCGPoint(p));

        if (CGPointEqualToPoint(_longPressBeganPoint, _doubleTapBeganPoint))
        {
            _zoom = _minScale + (p.y - _longPressBeganPoint.y) / 100.0;

            NSLog(@"zoom scale: %f", _zoom);

            [self setZoomScale:_zoom animated:NO];
        }
    }
    else if (gesture.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"image long press ended at location: %@", NSStringFromCGPoint([gesture locationInView:gesture.view]));

        if (self.zoomScale < _minScale)
        {
            [self setZoomScale:_minScale animated:YES];
            NSLog(@"min zoom scale: %f", _minScale);
        }
    }
} 
```

# java - 将文字添加到照片中，例如即时 android 应用程序

> ID：15848898
> 
> 赞同：0
> 
> 时间：2013-04-06T08:55:45.177
> 
> 标签：java, android, layout, github

我想编辑文本，它可以像[instanote 应用程序](https://play.google.com/store/apps/details?id=com.instanote.pro)一样工作，你可以移动文本，你可以调整大小。当您增加或减少编辑文本的大小时，它会自动调整，当您移动文本时它也可以调整。任何人都知道是否有源代码请告诉我我已经尝试过 github、code.google.com 但无法搜索到但无法找到？

我认为他们已经通过这样做来定制

```
 public class BaseEditText extends EditText 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:04:58.860

一个示例代码片段，希望它是一个好的开始，

公共类 EditTextClass 扩展 Activity 实现 OnTouchListener {

```
private EditText txt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    txt = (EditText) findViewById(YourEditTextId);
    txt.setOnTouchListener(this);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
   if(event.getX() >= txt.getWidth() - 5 && event.getX() <= txt.getWidth()
        event.getY() >= txt.getHeight() - 5 && event.getY() <= txt.getHeight()) {
       txt.setWidth(event.getX()); 
       txt.setHeight(event.getY());
   }
   return true;
} 
```

}

# java - Windows 7 阻止 java.io.File 方法？

> ID：15848905
> 
> 赞同：0
> 
> 时间：2013-04-06T08:56:17.710
> 
> 标签：java, file, windows-7

这是一个程序，它获取给定文件夹中的所有 PDF 文件，然后添加日期前缀并过滤掉所有变音符号。这适用于我的 Win XP 安装，但不适用于新的 Win7 安装，其中完全相同的代码由于`replaceSymbolsInDir(String)`第 4 行中的 nullPointerException 而终止，这是 for 循环之前的空行。

我通过在 Eclipse 中编译它来触发该过程：

```
import java.io.File;

public class loadFile {

public static String dir = "C:\\Users\\UserName\\Desktop\\PdfDirectory\\";
public static String date = "130406";

public static void main(String args[]) {

        replaceSymbolsInDir(dir);
        addPrefix(dir, date + "-");         
}

public static void replaceSymbolsInDir(String path){

    File folder = new File(path);
    File[] fileArray = folder.listFiles();

    for(int i = 0; i<fileArray.length; i++) {
        File currentFile = fileArray[i];
        if(currentFile.getName().toLowerCase().endsWith(".pdf")) {
            currentFile.renameTo(new File(path, replaceSymbolsInString(currentFile.getName())));
        }
    }
}

public static String replaceSymbolsInString(String s) {
    //figure out regex
    String result = s.replace('ä','a');
    result = result.replace('ö','o');
    result = result.replace('ü','u');
    result = result.replace('ß','s');
    result = result.replace(' ','-'); 
    return result;
}

public static void addPrefix(String path, String prefix) {

    File folder = new File(path);
    File fileArray[] = folder.listFiles();

    for(int i = 0; i<fileArray.length; i++) {

        File currentFile = fileArray[i];
        if(!currentFile.getName().startsWith(prefix) && currentFile.getName().toLowerCase().endsWith(".pdf")) {
            String newName = prefix + "" + currentFile.getName();
            currentFile.renameTo(new File(path, newName));
        }
    }
}
} 
```

win7 是否会阻止尝试查找有关文件和文件夹的信息的方法？这好像是

```
folder.listFiles(); 
```

即将为空，这就是问题所在。

除了路径错误之外的任何想法？因为这是浏览器窗口外的 ctrl+c/v 加上转义，因此应该是正确的。

编辑：我在唯一现有的用户帐户上运行程序，帐户管理窗口将其标记为“管理员”。在以管理员身份打开 cmd 后从 cmd 运行也会产生 NPE。

Edit2：如前所述，该文件夹默认为写保护且无法更改，这似乎是根本原因。我会调查一下...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:09:49.610

默认情况下，Windows 7 不允许一个用户读取另一用户目录中的文件或文件夹，而 Windows XP 则允许。您需要做以下两件事之一：

1.  获取其文件夹的用户，以向运行代码的用户授予“读取”权限，或
2.  使用 UAC 以提升的权限（例如从提升的命令提示符）运行代码。

# php - PHP 警告：mkdir() [function.mkdir]：Mac 中的权限被拒绝

> ID：15848906
> 
> 赞同：-1
> 
> 时间：2013-04-06T08:56:27.077
> 
> 标签：php, apache, httpd.conf

我试图在谷歌中搜索，我发现的解决方案是将 httpd.conf 用户从 _www 更改为我自己的登录名，然后重新启动 apache，但它没有用..我在终端中完成了。另一个是将组从_www更改为nobody ...也没有用。

谁能帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:01:48.307

问题可能不是 httpd.conf 文件，而是您要在其中创建新目录的目录。确保执行 php 的用户有权在那里创建目录。要找出是哪个用户（也许`_www`正如您提到的那样），您可以使用该`phpinfo()`命令。

这就是我的（默认 ubuntu 配置）phpinfo 的样子：

> > 配置 -> apache2handler -> 用户/组：www-data(33)/33

这意味着您可能希望将所述文件夹的所有者或组更改为`www-data`（或任何适合的）并授予所有者或组写入权限

# mongodb - MongoDB 使用 $returnKey 获取字段名称和值

> ID：15848911
> 
> 赞同：0
> 
> 时间：2013-04-06T08:56:39.353
> 
> 标签：mongodb

我在使用 MongoDB 时遇到了麻烦。我正在尝试获取一个字段的值，其中字段名称对我来说是未知的，并使用检索到的值来检查集合中是否存在不同的文档。我只知道该字段可能包含的值模式。

让我解释一下，我有以下文档结构：

```
db.blogs_data.find({"_id.r":"http://blog_post_url/authors"}).pretty();
{
    "_id" : {
        "r" : "http://blog_post_url/authors"
    },
    "author:_1" : {
        "u" : "People:C2CE29E7"
    },    
    "author:_2" : {
        "u" : "Organisations:0B2A962A-8D1C"
    },
    "rdf:type" : {
        "u" : "rdf:Seq"
    }
} 
```

这里作者：_2 可以是：作者：_N（数字）。现在，上述 decument 中每个序列的详细信息都存储为单独的文档，例如：

```
db.blogs_data.find({"_id.r":"People:C2CE29E7"}).pretty();
{
    "_id" : {
        "r" : "People:C2CE29E7"
    },
    "rdf:type" : {
        "u" : "foaf:Person"
    },
    "foaf:name" : {
        "l" : "McCabe, Catherine"
    }
}

db.blogs_data.find({"_id.r":"Organisations:0B2A962A-8D1C"}).pretty();
{
    "_id" : {
        "r" : "Organisations:0B2A962A-8D1C"
    },
    "rdf:type" : {
        "u" : "foaf:Organisations"
    },
    "foaf:name" : {
        "l" : "ABC Publications"
    }
} 
```

现在，我需要获取 /authors 的每个序列的值，其中作者值模式类似于：“Organisations*”，并使用序列中的值来检查作者详细信息文档，例如它是否确实存在。我检查了 MongoDB，它确实有 $returnKey，它说返回索引键或键， [http](http://docs.mongodb.org/v2.2/reference/operator/returnKey/#op._S_returnKey) ://docs.mongodb.org/v2.2/reference/operator/returnKey/#op._S_returnKey 但是，文件似乎对我来说也不完整而且有点混乱，比如：“如果 $returnKey 设置为 true 并且查询不使用索引来执行读取操作，则返回的文档将不包含任何字段。”

好吧，我不知道这个值在哪里的确切键，只是它里面的值。我还检查了这个[MongoDB Get names of all keys in collection](https://stackoverflow.com/questions/2298870/mongodb-get-names-of-all-keys-in-collection)但是，它返回集合中的唯一键。

在我看来，Mongo 查询不会做我想做的事情，我必须编写一个 JS 脚本来做到这一点。是否有人面临相同或类似的问题？如果是 JS，应该考虑什么作为起点？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T07:39:01.707

我通过以下方式解决了我的问题：

使用正则表达式获取*id.r 以**/authors**结尾的所有 mongo 文档，并遍历作者文档中的每个**author*** **:N**并使用**author_:N**的值来检查实际作者文档的存在。

狂欢

# python - raw_input 能够检测多个输入

> ID：15848912
> 
> 赞同：0
> 
> 时间：2013-04-06T08:56:42.333
> 
> 标签：python, python-2.7, raw-input

我需要就这个问题提出建议，这是我必须提出的输出：

```
interact()
Friends File: friends.csv
Command: f John Cleese
John Cleese: Ministry of Silly Walks, 5555421, 27 October
Command: f Michael Palin
Unknown friend Michael Palin
Command: f
Invalid Command: f
Command: a Michael Palin
Invalid Command: a Michael Palin
Command: a John Cleese, Cheese Shop, 5552233, 5 May
John Cleese is already a friend
Command: a Michael Palin, Cheese Shop, 5552233, 5 May
Command: f Michael Palin
Michael Palin: Cheese Shop, 5552233, 5 May
Command: e
Saving changes...
Exiting... 
```

我需要提供一个功能来执行此操作，但我卡住了，我在想是否有任何方法可以拆分用户输入，例如，如果用户输入：

```
f John Cleese 
```

我想知道是否可以将 F 和 John Cleese 拆分为单独的输入，以便单独处理输出。并且是否可以在函数内调用函数？这是我的代码：

```
def interact(*arg):
    open('friends.csv', 'rU')
    print "Friends File: friends.csv"
    resp = raw_input()
    if "f" in resp:
# display friend function
        display_friends("resp",)
        print "resp"
    elif "a" in resp:
# add friend function
        add_friend("resp",) 
```

我想在函数中调用的显示好友函数

```
def display_friends(name, friends_list):
Fname = name[0]
for item in friends_list:
    if item[0] == Fname:
        print item
        break
    else:
        print False 
```

提前谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:28:39.470

首先，是的，您可以将函数调用放入其他函数中。

其次，如果您在示例“f John Cleese”中获取用户输入，那么您可以在代码中简单地使用它来做您想做的事情。例如：

```
s = raw_input("Please input something: ")
# now I input "f John Cleese", so that is now the value of 's'
# printing the value of 's' will let you see what it is exactly.

command = s.split(' ', 1) 
# the above code will split the string 's' on a ' ' space, 
# and only do it once, and then create a list with the pieces
# so the value of 'command' will be ['f', 'John Cleese'] for your example.

# to access items in the command list use brackets []
command[0] # 'f'
command[1] # 'John Cleese' 
```

有了所有这些工具，您可以将其视为建议，我祝您好运！

# c++ - 从 CodeBlocks 10.5 迁移到 12.11 并得到运行时错误 __static_initialization_and_destruction_0

> ID：15848914
> 
> 赞同：0
> 
> 时间：2013-04-06T08:56:49.230
> 
> 标签：c++, codeblocks

我刚刚将我的代码块从 10.5 升级到 12.11 版本

在以前的版本中一切正常，但是在使用最新版本的代码块编译时出现运行时错误

调用堆栈将我的主要静态类指向问题并显示此按摩

```
0x0040f9ef in __static_initialization_and_destruction_0 (__initialize_p=1, __priority=65535) 
```

这是我的代码

游戏.hpp

```
...
class Game
{
public:
//... static Member function
private:
    static sf::RenderWindow _mainWindow;
//..... static member variable
}; 
```

游戏.cpp

```
... function declaration
sf::RenderWindow Game::_mainWindow; //Runtime Error happen here
//and the other member variable declaration 
```

请告诉我我错在哪里，谢谢

编辑：game.cpp

# android - 从应用程序访问手机网络浏览器的主页设置

> ID：15848924
> 
> 赞同：1
> 
> 时间：2013-04-06T08:57:22.993
> 
> 标签：android, browser, bookmarks

我可以从我的 Android 应用程序访问用户网络浏览器的主页/书签设置吗？基本上我需要实现的是我应该能够从我的应用程序中打开浏览器并将用户设置的主页显示为默认页面。现在我正在使用，

Intent i=new Intent(android.content.Intent.ACTION_VIEW,Uri.parse(" [http://www.google.com](http://www.google.com) ")); 开始活动（一）；

但实际上我想要的是打开用户设置的主页，而不是默认打开谷歌。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T13:03:09.090

> 我可以从我的 Android 应用程序访问用户网络浏览器的主页/书签设置吗？

如果特定应用程序使用`Browser`提供程序，您可以访问这些书签，前提是您拥有适当的权限。用户的默认浏览器可能使用也可能不使用此提供程序，并且没有明显的方法来判断哪个书签是“主页”，假设浏览器甚至有“主页”的概念。

# meteor - Meteor 多租户功能

> ID：15848931
> 
> 赞同：0
> 
> 时间：2013-04-06T08:58:09.007
> 
> 标签：meteor

Meteor 是否能够在服务多个不同用户的同时保持高性能？

例如，如果我声明以下出版物，它只允许用户检索他们自己的文档：

```
Meteor.publish("UserList", function () {
  return Documents.find({user: this.userId});
}); 
```

想象一下，成千上万的用户正在从该出版物中获取信息，每个用户都在为自己的文档提供信息。当一个文档被更新时会发生什么？即，是否所有用户都通知他们的列表*可能*已更改？服务器是否为所有可能的用户执行查询并只通知那些重要的用户？Meteor 如何在这种情况下保持性能？

或者有没有更好的方法在 Meteor 中实现多租户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:11:52.540

在这种情况下，只有订阅了该发布功能的用户才能获得更新。

Meteor 会将对集合的任何更改发送到该特定订阅。订阅者不会被告知文档可能已更改，他们只是发送了数据更改。DDP 有一种“粗鲁”，它告诉客户端该做什么，即删除、更新、插入..

在上述情况下`Documents.find`，该特定用户只会收到他们的更新，而其他用户根本不会收到通知。

我不是 100% 确定这部分，因为 0.5.7 中有一些变化，但是对于通过 DDP 的每个连接，都会有一个订阅，每个订阅都有自己的查询（即使查询与其他订阅相同）。看起来这个缓存很快就会出现在 trello 上：[https ://trello.com/card/improve-server-side-performance-of-subscriptions/508721606e02bb9d570016ae/10](https://trello.com/card/improve-server-side-performance-of-subscriptions/508721606e02bb9d570016ae/10)

DDP 仍处于 pre1 版本中，但我想这将在未来进一步优化，特别是在每个订阅中不太可能唯一的查询（即`Documents.find()`，而不是`Document.find({user:this.userId})`.）

有关 DDP 协议的完整规范，请查看：[https ://github.com/meteor/meteor/blob/master/packages/livedata/DDP.md](https://github.com/meteor/meteor/blob/master/packages/livedata/DDP.md)

# air - 尝试签署 adobe air 应用程序时出现“不是 X509 代码签名证书”

> ID：15848938
> 
> 赞同：1
> 
> 时间：2013-04-06T08:59:39.467
> 
> 标签：air, openssl, certificate, x509certificate, sign

我正在尝试签署我的第一个 adobe air 应用程序，但由于“不是 X509 代码签名证书”而失败。网上有一些关于此的主题，其中大部分都恢复使用带有“adt -certificate”的自签名证书，我不想使用它，我有一个我想使用的受信任证书，所以经过几个小时的头撞后，我仍然无法让它工作......

我的密钥+证书来自godadday，以防万一，我在创建keystore.p12文件之前将.crt文件转换为x509（我没有更改/转换.key文件）：

openssl x509 -in mycert.crt -inform PEM -out mycert509.pem -outform PEM openssl pkcs12 -export -in mycert509.pem -inkey mykey.key -out keystore.p12 -passout 'pass:xxxx'

这是我的 ANE 构建命令行：

"C:\Program Files\Adobe\Adobe Flash Builder 4.7\sdks\4.6.0\bin\adt" -package -storetype pkcs12 -keystore "keystore.p12" -storepass "xxxx" -target ane MyANE.ane extension.xml -swc MyAir.swc -platform Android-ARM -C android 。-平台默认值 -C 默认值。

但我仍然得到错误......有什么想法吗？谢谢。

# java - 在 Arduino UNO r3 上获取 XBee 数据包的有效负载值

> ID：15848939
> 
> 赞同：2
> 
> 时间：2013-04-06T08:59:40.550
> 
> 标签：java, arduino, xbee

我正在开发一个使用 XBee S1 作为发射器/接收器的项目。这些是我正在使用的硬件：

1.  协调器：带有 XBee S1 模块的 XBee USB EXplorer v2.0
2.  终端设备：带有 XBee 扩展[板](http://www.arduino.cc/en/Main/ArduinoShields)和 XBee S1 模块的[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno) r3.0

该项目的目的很简单，就是打开/关闭[LED](http://en.wikipedia.org/wiki/Light-emitting_diode)。这是代码（控制器）：

```
public static void main(String args[]) throws XBeeException,
                                       InterruptedException {
    XBee xbee = new XBee();
    boolean running = true;
    try {
        // OPEN SERIAL PORT
        xbee.open("COM10", 9600); // String arg is
                                  // Unique to YOUR
                                  // MACHINE!

        Scanner input = new Scanner(System.in);
        XBeeAddress16 address = new XBeeAddress16(0x22, 0x22);
        int[] payload;
        payload = new int[1];

        System.out.println("Enter a new command for LED: 0 to turn the LED OFF, 1 to turn ON");
        payload[0] = (int) input.nextByte();

        TxRequest64 request = new TxRequest64(address, payload);

        System.out.println("\nXBee request is: " + request.getXBeePacket());

        while (running) {
            try {
                TxStatusResponse response = (TxStatusResponse) xbee
                        .sendSynchronous(request, 100);
                request.setFrameId(xbee.getNextFrameId());

                System.out.println("\nXBee request is: " + request.getXBeePacket());

                System.out.println("Response received" + response);

                if (response.getApiId() != ApiId.TX_STATUS_RESPONSE)
                {
                    System.out.println("Response error");
                }
                else
                {
                    System.out.println("Response success");
                }
            }
            catch (XBeeTimeoutException e) {
                System.out.println("Me ! Unable to send");
            }
            System.out.println("Enter a new command for LED: 0 to turn the LED OFF, 1 to turn ON");
            payload[0] = (int) input.nextByte();
            request.setPayload(payload);
            if(payload[0] == 2)
                running = false;
        }
    }
    finally {
        xbee.close();
    }
} 
```

这是 Arduino（终端设备）的代码：

```
#include <LiquidCrystal.h>
int LED = 12;                //Turn this LED on or off, depending on packet rx'd
int debugLED = 13;           //Flash light to indicate rx
int packet;                 //Packet will be two bytes in length
int analogValue;
int debugValue = 0;
int discard;
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

void setup() {
  pinMode(LED, OUTPUT);
  pinMode(debugLED, OUTPUT);
  Serial.begin(9600);
  packet = 0x01;
  lcd.begin(16,2);
}

void loop() {
 lcd.setCursor(0, 1); 
 if(Serial.available() >= 16){     //<--Changing the value from 21 to 16 fixed the problem! 

    debugValue = 0;

    debugValue = Serial.read();

    if(debugValue == 0x7e){      //Look for starting byte
      lcd.clear();
      lcd.print(debugValue);
      delay(500);
      digitalWrite(debugLED, HIGH);    //Flash Arduino LED (not the one on digital pin 11)
      delay(1000);                          //to indicate rx'ing data
      digitalWrite(debugLED, LOW);
      //lcd.print(debugValue);

      for(int i = 2; i != 10; i++){      //Discard unused data (see XBee API protocol for more info)
        discard = Serial.read();
        if (i != 8)
          packet = discard;
          // print the number of seconds since reset:
         if(i == 5)
         lcd.setCursor(0,1);
         lcd.print(packet);
         delay(500);
      }
      lcd.print(discard);
   }
 }
 if(packet == 0x7e)
     digitalWrite(LED, HIGH);
 else
     digitalWrite(LED, LOW);
} 
```

问题是 LCD 显示屏中的输出总是显示相同的输出。怎么可能？

这些是我从 LCD 得到的“**奇怪”数字：**

```
126 0 6 129 125 49 125 49 125 125 29 29 
```

这些值保持不变，艰难我已将输入值从 0 更改为 1！

这是我的 Java 终端（控制台）的示例输出：

```
1

XBee request is: 0x7e,0x00,0x06,0x01,0x02,0x22,0x22,0x00,0x01,0xb7
Response receivedapiId=TX_STATUS_RESPONSE (0x89),length=3,checksum=0x75,error=false,frameId=0x01,status=SUCCESS
Response success
Enter a new command for LED: 0 to turn the LED OFF, 1 to turn on
0

XBee request is: 0x7e,0x00,0x06,0x01,0x03,0x22,0x22,0x00,0x00,0xb7
Response receivedapiId=TX_STATUS_RESPONSE (0x89),length=3,checksum=0x74,error=false,frameId=0x02,status=SUCCESS
Response success
Enter a new command for LED: 0 to turn the LED OFF, 1 to turn on 
```

我确定这是有效载荷值（标有 ^^^^）：

```
0x7e,0x00,0x06,0x01,0x02,0x22,0x22,0x00,0x01,0xb7
                                        ^^^^ 
```

但是如何用 Arduino 获得这个价值呢？

无论如何，我参考了教程*[XBee API Project One](https://sites.google.com/site/enginerdextraordinaire/the-team/java-project/xbee-api-project-one)*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:17:29.790

好吧，在做了一些搜索之后，通过 Arduino 获取 XBee 有效载荷值的最佳方法是使用[XBee API for Arduino](http://code.google.com/p/xbee-arduino/)，因为我阅读了这个网站：[使用 Arduino XBee API 无线传输模拟信号](http://kavasmlikon.wordpress.com/2011/11/21/how-to-wirelessly-transmit-analog-signals-using-the-arduino-xbee-api/)。这是获取“有效负载”值的代码：

```
#include<Xbee.h>
int DEBUG = 13;
XBee xbee = XBee();
XBeeResponse response = XBeeResponse();
Rx16Response rx16 = Rx16Response();

void setup() {
  pinMode(DEBUG, OUTPUT);
  Serial.begin(9600);
  DEBUG = 0;
}

void loop() {
 xbee.readPacket();

 if(xbee.getResponse().isAvailable()){
   lcd.print("Data received");
     if(xbee.getResponse().getApiId() == RX_16_RESPONSE){
       xbee.getResponse().getRx16Response(rx16);

       uint8_t payload = rx16.getData(0);//this is the payload value, easy to get it :D
     }
 }     
} 
```

那是！！:D

# android - marginBottom 不适用于我在 android 中的 ImageView

> ID：15848941
> 
> 赞同：0
> 
> 时间：2013-04-06T09:00:21.617
> 
> 标签：android, android-layout

当我将填充 5dp 应用于 ImageView（大小 50x50）时，结果是高度和宽度为 50x50，包括填充。

如何在 Android 中解决此问题？

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#cccccc" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginBottom="8dp"
        android:layout_marginLeft="8dp"
        android:layout_marginRight="4dp"
        android:layout_marginTop="4dp"
        android:src="@drawable/user11" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:03:47.630

内边距在视图边界内，边距在外。所以添加 5dp 的 padding 会导致视图内容区域为`width - (padding * 2)`. 边距不会影响视图边界，但会导致相邻视图至少与设置的边距一样远离视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T08:52:45.277

将您的相对布局的高度从： android:layout_height="wrap_content" 更改为 **android:layout_height="match_parent"** 或超过您的 imageview 高度的东西，比如 60dp 等。

# r - 如何减少R中多个图之间的空间差距

> ID：15848942
> 
> 赞同：22
> 
> 时间：2013-04-06T05:56:29.030
> 
> 标签：r

```
var8    p_1 p_2 p_3
1   6617    6635    6739
2   6563    6668    6699
3   6711    6695    6782
4   6807    6863    6753
5   6996    7035    7044
6   7221    7336    7201
7   7236    7198    7224
8   7307    7475    7357
9   7230    7281    7165
10  7152    7162    6935
11  7295    7116    6805
12  6923    6852    6565
1   6854    6705    6537
2   6724    6685    6589
3   6815    6715    6656
4   6933    6876    6805
5   7183    7104    7042
6   7361    7302    7402
7   7383    7401    7388
8   7389    7377    7377
9   7315    7346    7375
10  7287    7249    7337
11  6923    7059    7238
12  6884    6862    6958
1   6711    6728    6829
2   6680    6724    
3   6806    6774    6696
4   6756    6831    6943
5   7091    7074    7108
6   7364    7326    7147
7   7314    7390    7214
8   7326    7379    7262
9   7278    7316    7201
10  7283    7350    7240
11  7133    7160    7102
12  6916    6879    6971
1   6727    6673    6826
2   6662    6683    6793
3   6701    6713    6884
4   6923    6812    7042
5   7075    7056    7189
6   7183    7269    7324
7   7324        7450
8   7361    7353    7464
9   7392    7253    7326
10  7264    7171    7315
11  7108    7017    7244
12  6750    6949    6985
1   6640    6843    6859
2   6724    6728    6854
3   6642    6797    6877
4   6800    6895    6921
5   6991    7002    7232
6   7288    7211    7389
7   7371    7272    7468
8   7333    7270    7618
9   7230    7125    7443
10  7147    6973    7510
11  7203    6840    7396
12  7013    6758    7144

d = read.table()
lmts <- range(d)
par(mfrow=c(1,3))
colors = c(rep("skyblue",1), rep("skyblue1",1), rep("skyblue2", 1), rep("skyblue3", 1), rep("mediumpurple1", 1), rep("mediumpurple", 1), rep("mediumpurple3", 1), rep("royalblue1",1), rep("slateblue1", 1), rep("slateblue3", 1), rep("slategray3",1), rep("slategray1",1))
boxplot(p_1~var8, ylim=c(6500,7650), col=colors, outline = FALSE, 
        lty=1, las=2, ylab = "Mean(mm)", cex.lab=1, cex.axis=1, boxwex=0.65, xaxt='n')
axis(1, at=c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), labels=c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"), cex.axis=1, las=1)

boxplot(p_3~var8, boxcol= FALSE, col=colors,  
        lty=1, las=2, xlab="Months of year", cex.lab=1, cex.axis=1, outline = FALSE, boxwex=0.65, xaxt='n', yaxt='n')
axis(1, at=c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), labels=c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"), cex.axis=1, las=1)

boxplot(p_2~var8, boxcol= FALSE, col=colors,  
        lty=1, las=2, cex.lab=1, cex.axis=1, outline = FALSE, boxwex=0.65, xaxt='n', yaxt='n')
axis(1, at=c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), labels=c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"), cex.axis=1, las=1) 
```

如何减少图表之间的差距？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-06T09:23:26.480

您可以`mai`使用`?par`. 您将不得不调整左侧以获取标签。

我曾经`par(mfrow=c(1,3), mai = c(1, 0.1, 0.1, 0.1))`创建较低的情节。

![在此处输入图像描述](https://i.stack.imgur.com/CsPRh.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/PlzCT.jpg)

或者你可以尝试使用 ggplot2。

```
library(ggplot2)
library(reshape)
dm <- melt(d, id.vars = "var8")
dm$var8 <- as.factor(dm$var8)

ggplot(dm, aes(x = var8, y = value, fill = var8)) + 
  theme_bw() +
  scale_fill_manual(values = colors, guide = FALSE) +
  geom_boxplot()+ facet_wrap(~ variable) 
```

![在此处输入图像描述](https://i.stack.imgur.com/mES10.jpg)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-09-18T16:18:59.927

对外边缘区域使用较大的 oma

对单个地块使用 mar

```
svg(paste0("comp_pmfs.", tid, ".svg"), width=20, height=10)
par(mar=c(0.5, 0.5, 0.2, 0.2), mfrow=c(1,2),
     oma = c(4, 4, 0.2, 0.2))

plot(d0.exp[,c(1,2)], pch=19, cex.axis=1.9, cex.lab=1.9, type="b", cex=1.3, lwd=5,
    xlim=c(3.5, 15), ylim=c(-0.5, 4))

plot(d12.exp[,c(1,2)], pch=19,
    xlim=c(3.5, 15), ylim=c(-0.5, 4), axes=F, type="b", cex=1.3, lwd=5)
axis(1, at=seq(4, 14, by=2), labels=seq(4, 14, by=2), cex.axis=1.9)
box(lty=1, col="black")

dev.off() 
```

![在此处输入图像描述](https://i.stack.imgur.com/JbehJ.png)

更多信息可以在这里找到：

[http://research.stowers-institute.org/mcm/efg/R/Graphics/Basics/mar-oma/index.htm](http://research.stowers-institute.org/mcm/efg/R/Graphics/Basics/mar-oma/index.htm)

# vb.net - CollectionAssert.AreEqual 通过但 CollectionAssert.AreEquivalent 失败？

> ID：15848944
> 
> 赞同：2
> 
> 时间：2013-04-06T09:00:47.860
> 
> 标签：vb.net, unit-testing, assert

我已经构建了一些复杂的对象，并且正在尝试通过进行一些单元测试来验证它是否正常工作。这涉及比较一些 List(Of T)，所以我尝试使用 CollectionAssert。现在我遇到了一些奇怪的事情。

首先，我使用 CollectionAssert.AreEqual 来查看第一个列表是否相等。这个断言通过了。但是为了简单起见，我想使用 CollectionAssert.AreEqual，这样我就不必以正确的顺序创建预期的对象，所以我开始尝试。使用完全相同的代码，CollectionAssert.AreEquivalent 失败。我会说这很奇怪，因为等价是比等价更宽松的断言，对吧？我收到此错误：

```
CollectionAssert.AreEquivalent failed. The expected collection contains 1 occurrence(s) of <MyObject>. The actual collection contains 0 occurrence(s). 
```

我试过调试，但我没有让它调试.Net框架，即使我设置了下载符号文件。所以我只能看到它进入我的自定义 Equals 函数一次 - 返回 true - 然后断言失败。两个对象都有两个元素。调用堆栈是（以相反的顺序）：

*   CollectionAssert.AreEquivalent
*   CollectionAssert.AreEquivalent(重载)
*   CollectionAssert.FindMisMatchedElement
*   Generic.Dictionary(Of Object, int).TryGetValue
*   Generic.Dictionary(Of Object, int).FindEntry
*   Generic.ObjectEqualityComparer.Equals
*   我的自定义等于

现在我正在写这篇文章，一个想法出现了，我看到了一个潜在的问题。我看到它在内部使用字典。哪个可能充当某种哈希图，其中 int 是实际列表中的索引？这是否意味着我需要实现自定义 IEqualityComparer，而不是覆盖 equals？那么我的 getHashCode() 应该如何？（我猜这很关键，因为我认为它可能被用作字典中的键？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:33:13.153

您走在正确的轨道上：问题确实是您在 override`GetHashCode`时没有覆盖`Equals`。

这是重现您的问题的示例：

```
void Main()
{
    var a = new []{new Broken{Foo="a"}, new Broken{Foo="b"}};
    var b = new []{new Broken{Foo="a"}, new Broken{Foo="b"}};

    CollectionAssert.AreEqual(a, b);
    CollectionAssert.AreEquivalent(a, b);
}

class Broken
{
    public string Foo {get;set;}

    public override bool Equals(object obj)
    {
        return Foo == ((Broken)obj).Foo;
    }
} 
```

正如您正确指出的那样，`CollectionAssert.AreEquivalent`使用 a `Dictionary`，它用于计算每个唯一元素在集合中出现的频率。

问题不在于哈希码可能有冲突，而是如果两个应该被认为相等的元素实际上永远不会使用`Equals`它们返回的哈希码进行`GetHashCode`比较。

* * *

你可能也对这个问题感兴趣：

> [为什么在重写 Equals 方法时重写 GetHashCode 很重要？](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overridden)

* * *

> 此外，我的 equals 函数中有一些逻辑，它不是直接比较所有字符串 1 对 1，所以这意味着我基本上会实现这个功能两次，以确保相等的对象获得相同的哈希码，对吗？

不必要。an 的性能`Dictionary`取决于散列算法（对象的散列值在用作键时也不应该改变）。

如果您可以忍受一些性能损失（可能可以忽略不计），您可以使用比您在`Equals`方法中使用的更简单的方法来计算哈希值（并接受更多的哈希冲突）。如果两个对象的哈希值相等，`Equals`则无论如何都会调用。（事实上​​，您可以每次只返回相同的值，例如 1）。

* * *

文档中的相关部分：

> [Object.GetHashCode](http://msdn.microsoft.com/de-de/library/system.object.gethashcode.aspx)
> 
> 用作 Hashtable 对象中的键的对象也必须覆盖 GetHashCode 方法，因为这些对象必须生成自己的哈希码
> 
> 如果两个对象比较相等，则每个对象的 GetHashCode 方法必须返回相同的值。但是，如果两个对象不比较相等，则两个对象的 GetHashCode 方法不必返回不同的值。

# ios - 关于 UITable 视图的异常

> ID：15848949
> 
> 赞同：0
> 
> 时间：2013-04-06T09:01:17.250
> 
> 标签：ios, objective-c, xcode4.3, uistoryboard

我是 Objective C 和 iOS 的新手。我在情节提要的视图控制器上嵌入了一个导航控制器。然后我在情节提要中添加了另一个视图控制器，它是根视图控制器。它有一个按钮连接到另一个视图控制器，该控制器添加了一个表视图。当我运行构建时，我收到以下异常：'NSInvalidArgumentException' 原因：'-[UIViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x686d160'。这是实现文件中的代码（仅相关方法）请告诉我是否需要提供更多代码：

```
 (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   {
    return [contacts count];
   }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:      (NSIndexPath *)indexPath
    {
    static NSString *simpleTableIdentifier = @"RecipeCell";

    UITableViewCell *cell = [tableView   dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [contacts objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:31:27.397

您正在向已释放的联系人变量发送“计数”消息。当您将对象分配给联系人时，请通过在其上发送保留消息来确保它拥有它，或者如果您启用了它，请使用 ARC 等效项。

# node.js - Nodejs 和猫鼬。Mode.find 返回奇怪的对象g

> ID：15848951
> 
> 赞同：0
> 
> 时间：2013-04-06T09:01:25.930
> 
> 标签：node.js, socket.io, mongoose

我将 socket.io 用于 Web 应用程序。我想将一个对象返回给用户，但由于某种原因它返回了这个奇怪的对象，或者像它的 find 函数一样。

```
Object {options: Object, _conditions: Object, _updateArg: Object, op: "find"} 
```

在我的 app.js 文件中寻找组：

```
 socket.emit "getgroup", $(".user").attr("data-name") 
```

然后在节点的 server.js 中

```
 socket.on('getgroup', function (userid) {
    return io.sockets.emit('group', GroupModel.find({user:userid}));
  }); 
```

在这种情况下，它按预期工作，返回所有任务：

```
 socket.on('getall', function (socket) {
    return io.sockets.emit('getall', TaskModel.find());
  }); 
```

为什么我没有取回组模型对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T11:00:18.633

您正在发送 的返回值`MODEL.find()`，它是一个[Query 对象](http://mongoosejs.com/docs/api.html#query-js)。因为 Mongoose 查询是异步的，所以它们不会返回实际的查询结果，而是返回一个可以从中检索结果的对象。

在您的情况下，您需要等待查询返回，然后再发回消息：

```
socket.on('getgroup', function (userid) {
  GroupModel.find({user:userid}, function(err, results) {
    if (err)
      // handle error
    else
      io.sockets.emit('group', results);
  });
}); 
```

我不知道为什么您的其他查询 (with `TaskModel`) 有效，因为从外观上看，它不应该（出于相同的原因：它返回一个`Query`对象；如果您想要该对象的结果，则需要`.exec`调用首先，或者像上面的例子一样，传递一个回调函数）。

# ruby-on-rails - 在种子.rb 中关闭验证

> ID：15848952
> 
> 赞同：6
> 
> 时间：2013-04-06T09:01:26.693
> 
> 标签：ruby-on-rails, ruby

`Rails 3.2.3`如何在in 中关闭验证`seeds.rb`？我做了这个

```
u1 = User.create email: 'my@email.com', password: '123', validate: false 
```

但它说`Can't mass-assign protected attributes: validate`。我知道这意味着什么。那么我该如何摆脱这个错误呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-06T09:15:59.090

你可以做

```
u1 = User.new(email: 'my@email.com', password: '123').save(validate: false) 
```

# jpa - 从 JPA 迁移回简单的 SQL

> ID：15848953
> 
> 赞同：8
> 
> 时间：2013-04-06T09:01:26.860
> 
> 标签：jpa, jdbc

经过多年在具有大约 100 个表的生产应用程序中使用 TopLink/EclipseLink 进行开发，我们认为足够了，JPA 不值得增加其实际操作的复杂性和不确定性，并且 SQL（使用一些包装器，如 DBUtil 或其他东西）像那样）可以为我们做恰到好处的工作。

您能否建议将一个相当大的 JPA 应用程序迁移到 JDBC/SQL 以使 JPA 仍然运行（即在具有 GUI 的 web 应用程序中）但是这将允许我们仍然从“降级”到 JDBC 开始?

我们有实体和 DAO，但我真正担心的是 JPA 实体缓存（主要的） - 是否可以完全禁用它，以便 JPA 充当简单的 connection.begin(); 条目... connection.commit(); 在此期间，直到我们永远摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T10:54:49.620

一个想法是引入存储库层。您引入存储库并使用 JPA 快速实现核心 api，可能会重用大量现有的数据访问代码。

关键是同时您开始重构整个应用程序以直接使用存储库而不是 JPA。

然后，另一个团队可以处理使用纯 jdbc 实现的存储库，并针对 jpa 实现测试 jdbc 实现——因为 jdbc 和 jpa 存储库实现相同的接口集，一致性测试是显而易见的。

总而言之，以下情况同时发生：

*   你设计你的接口层来满足实际业务代码的需求
*   您使用现有的 jpa 代码实现存储库
*   您重构业务代码以使用存储库
*   您使用 jdbc 实现相同的存储库并实现一致性测试

仅此而已。当有足够的信心时，您只需将存储库实现切换到 jdbc 存储库并保留您的 jpa 存储库仅用于向后兼容性测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T10:51:24.250

我希望你们有一些好的单元和集成测试。如果没有，那么这就是开始的地方。

之后，在第一步中，您可以创建一个`abstract factory`通过它提供对所有 DAO 和实体的访问权限，并更改来自客户端的所有访问权限以通过该工厂。在这一步中，您必须为该工厂提供一个实现，创建一个具体工厂`JpaAccessFactory`并让其方法返回使用 JPA 填充的 DAO 和实体。

当您确定第一步没有任何问题时。然后进行第二步。

创建一个工厂实现`SqlAccessFactory`，使用 SQL 填充 DAO 和实体（实体类的对象在这里实际上只是 DAO）。编写一些单元测试，女巫使用两个工厂，并使用`expected`提供的 `JpaAccessFactory`和`actual`提供的断言`SqlAccessFactory`。

当你完成了为一个表及其所有依赖项实现工厂方法后`SqlAccessFactory`，让使用此方法提供的 DAO 或实体的客户端/页面使用新工厂来检索它。您可以使其可配置，这样您就不必更改代码来更改正在使用的女巫工厂。如果您发现某些事情不应该是这样，这也将有利于轻松切换回来。

尚未实现的工厂方法`SqlAccessFactory`可能只会抛出异常

```
throw new UnsupportedOperationException
    ("Not yet implemented, please configure your client / page to use JPA."); 
```

我希望这能提供一些提示，从哪里以及如何开始。

# android - 接受 Facebook 许可后继续

> ID：15848954
> 
> 赞同：0
> 
> 时间：2013-04-06T09:01:34.713
> 
> 标签：android, facebook, session, facebook-graph-api

我正在尝试编写代码，但只有在用户接受许可后他才按下发送分数按钮和流动代码。

第一次运行用户接受并收到错误的应用程序，第一次单击后它工作正常。

如何同步用户接受权限点击和其他代码？

```
public void post_Score(View view){
    this.textView = (TextView) findViewById(R.id.editText1);
    //request Publish Permissions
    requestPublishPermissions(Session.getActiveSession());
    Bundle fbParams = new Bundle();
    randomScore = new Random().nextInt(1000000);
    fbParams.putString("score", "" + randomScore);
    Request postScoreRequest = new Request(Session.getActiveSession(),"me/scores",fbParams,HttpMethod.POST,new Request.Callback() {

        @Override
        public void onCompleted(Response response) {
            FacebookRequestError error = response.getError();
            if (error != null) {
                System.out.println("BAD");
                textView.setText("BAD " + error.getErrorMessage());

            } else {
                System.out.println("Your score is " + randomScore);
                textView.setText("Your score is " + randomScore);
                savingUserDetails();
            }
        }
    });
    Request.executeBatchAsync(postScoreRequest);
} 
```

和 requestPublishPermissions 功能

```
private void requestPublishPermissions(Session session) {
    if (session != null && !session.getPermissions().contains("publish_actions")) {
        System.out.println("SEESION Permission");
        Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(mainFragment, Arrays.asList("publish_actions"));
        session.requestNewPublishPermissions(newPermissionsRequest);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:20:37.557

session.requestNewPublishPermissions 调用是异步的，这意味着当它返回时，它还没有向用户请求权限，所以第一次通过，你的后续请求将失败。

正确的方法是向 NewPermissionsRequest 添加一个回调（请参阅 Javadocs 以了解 NewPermissionsRequest，应该有一个 setCallback 方法），并将您的请求代码移动到回调中。

# java - 无法在 Java Socket/Client 之间读写

> ID：15848957
> 
> 赞同：0
> 
> 时间：2013-04-06T09:01:43.283
> 
> 标签：java, sockets, networking

我正在尝试使用 java.net 在 Java 中的服务器和客户端之间建立连接。我设法连接，但没有发送任何数据。我已经粘贴了代码和输出：

服务器代码：

```
ServerSocket welcomeSocket = new ServerSocket(999);
Socket connectionSocket = welcomeSocket.accept();
System.out.println("Connected to: " + connectionSocket.toString());
DataOutputStream outToClient = newDataOutputStream(connectionSocket.getOutputStream());
outToClient.writeBytes("Testing connection"); 
```

客户代码：

```
Socket clientSocket = new Socket("130.236.248.52", 999);
BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
modifiedSentence = inFromServer.readLine();
System.out.println("[From server:] " + modifiedSentence); 
```

服务器输出：连接到：Socket[addr=/130.236.248.54,port=51535,localport=999]

客户端输出：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:12:30.650

1.  使用 a[`BufferedWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html)写入文本（就像您使用 BufferedReader 读取文本一样）
2.  呼吁`flush()`你的作家强制输出通过
3.  如果您在`readLine()`客户端调用，则需要有一个行尾才能读取。

```
    BufferedWriter outToClient = new BufferedWriter(new OutputStreamWriter(connectionSocket.getOutputStream()));
    outToClient.write("测试连接");
    outToClient.newLine();
    outToClient.flush();

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:40:33.477

你在读台词，但你不是在写台词。您需要附加一个行终止符或使用导出 println() 方法的类之一，然后调用它。

# python - 在 Python / Numpy / Scipy 中求解未知矩阵

> ID：15848968
> 
> 赞同：-1
> 
> 时间：2013-04-06T09:03:33.103
> 
> 标签：python, numpy, scipy, scientific-computing, finite-element-analysis

我需要为未知数`u4`, `f1`, `f2`,`f3`和特定`f5`问题求解这个矩阵系统。我已经用我的输入生成了包含数字的矩阵，需要为这些已知数求解。`f6``FEA`

*   代码应如下所示：

    `0 + 0 + 0 + 150*1000*u4 + 0 + 0 = −1732`

所以，`u4=-0.01154`

*   所以其他未知数可以找到如下：

    `0 + 0 + 0 + (43:4)(−0:0115) 1000 + 0 + 0 = f1`

因此`f1=-500` 等等....

我是初学者，熟悉 numpy 和 python OOP 的基础知识。请帮我为此设置一个代码。

![待解矩阵](https://i.stack.imgur.com/E0no1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:12:20.293

```
In [0]: import numpy as np    

In [1]: A = np.random.rand(6,6)

In [2]: a4 = A[3,:]

In [3]: u4 = -1732/a4[3]

In [4]: f = a4*u4

In [5]: f
Out[5]: 
array([ -246.6101995 ,  -589.6732277 ,  -574.67690895, -1732\.        ,
       -2592.99948033, -2383.52077134]) 
```

用您的数据替换`A`或至少第四列`a4`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T10:37:16.373

这里是：

```
from __future__ import division
from numpy import asarray as ar,sum as sums

A = ar([[25,-43.3,-25,43.3,0,0],
        [-43.3,75,43.3,-75,0,0],
        [-25,43.3,50,0,-25,-43.3],
        [43.3,-75,0,150,-43.3,-75],
        [0,0,-25,-43.3,25,43.3],
        [0,0,-43.3,-75,43.3,75]])*1e3
u4 = -0.01154
B = ar([0,0,0,u4,0,0])
F = sums(A*B,axis=1) 
```

所以你将拥有：

```
>>> F
array([ -499.682,   865.5  ,     0\.   , -1731\.   ,   499.682,   865.5  ]) 
```

# android - 将交通信息添加到谷歌导航应用程序

> ID：15848971
> 
> 赞同：0
> 
> 时间：2013-04-06T09:03:44.347
> 
> 标签：android, ios, google-maps, navigation

谷歌导航是一个非常强大的应用程序。但是我所在城市的问题是它不支持交通信息来建议最佳方式。

有一个资源可以获取我所在城市的交通信息，图片每 15 分钟更新一次信息：[http ://www.tehrantraffic.com/trafficmap/ShowImage.asp](http://www.tehrantraffic.com/trafficmap/ShowImage.asp)

我的想法是编写一个 iOS 或 Android 应用程序来解析这张图片并准备交通数据。之后，将其添加到 Google 导航默认程序以获得更好的结果。

这可能吗？Google 导航或 Google 地图 API 是否允许我编写这样的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:20:12.247

是的，它是获取由坐标和特定缩放级别标识的某个区域的图像然后你有 png 并且只需将其添加为 groundOverlay :)

它在这里适用于 INRIX

# ios - UITabBarController.selectedIndex 返回错误值

> ID：15848973
> 
> 赞同：1
> 
> 时间：2013-04-06T09:03:57.137
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller, uisplitviewcontroller

我有`UITabBarController`两个标签。每个选项卡`UISplitViewController`本身都有相同的内容。`MasterViewController`我想查看 tabbarcontroller 的选定索引的值，以查看现在在 in方法中打开了哪个 splitview `UITableViewDelegate`，但它返回了错误的值。即使选择了索引 1，它也始终返回 0。

在 appdelegate 中，我通过循环中的相同代码初始化了它们：

```
 MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPad" bundle:nil];

             UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

             detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController_iPad" bundle:nil];                 
             UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

             masterViewController.detailViewController = detailViewController;

             self.splitViewController = [[UISplitViewController alloc] init];
             splitViewController.tabBarItem = controller.tabBarItem;
             self.splitViewController.delegate = detailViewController;
             self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController];
             [controllers replaceObjectAtIndex:index withObject:splitViewController]; 
```

}

任何帮助将不胜感激！我认为 splitViewController 可能存在一些问题，因为它在 iPhone 上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:48:49.613

我的猜测是，这是因为您`ViewController`期望`TabBarController`它是`parentViewController`. 你可以试试检查`self.splitViewController.tabBarController.selectedIndex`。

但是，我建议您使用 SplitViewController 作为应用程序的根，并将其`TabBarController`放在您的主控器中。您可以通过这种方式达到相同的效果，并且会更正确。希望这可以帮助！

**编辑：**

根据[视图控制器目录](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/SplitViewControllers.html)“拆分视图控制器必须始终是您创建的任何界面的根。换句话说，您必须始终从 UISplitViewController 对象安装视图作为应用程序窗口的根视图。拆分的窗格视图界面可能包含导航控制器、标签栏控制器或任何其他类型的视图控制器，您需要实现您的界面。拆分视图控制器不能以模态方式呈现。

所以不要把它放在标签栏控制器中。

# haskell - 防止输入字符出现在终端中

> ID：15848975
> 
> 赞同：6
> 
> 时间：2013-04-06T09:04:55.830
> 
> 标签：haskell, terminal

我正在制作一个愚蠢的终端游戏，它使用键盘输入来控制一个角色在棋盘上移动。当用户按下一个键时，我的代码使用 正确响应`getChar`，但用户按下的字符也出现在终端中。有没有办法在终端应用程序中接收键盘输入，而不显示用户输入的内容？

编辑：我在 Mac 上，但很高兴在所有平台上都知道。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T10:17:44.697

基本上，要达到目标，您必须做两件事：

1.  您必须禁用终端中的任何缓冲，以便您的程序立即获得按下的键（并且您不必使用 ENTER 确认）。

    ```
    hSetBuffering stdin NoBuffering 
    ```

2.  然后你必须确保字符不会回显到终端。

    ```
    hSetEcho stdin False 
    ```

请注意，在您的程序退出之前，它必须恢复以前的设置，以便进一步使用终端。

将所有内容放在一起，代码将如下所示：

```
import System.IO
import Control.Exception (bracket)

withHiddenTerminalInput :: IO a -> IO a
withHiddenTerminalInput io = bracket
   (do prevBuff <- hGetBuffering stdin
       prevEcho <- hGetEcho stdin

       hSetBuffering stdin NoBuffering
       hSetEcho stdin False

       return (prevBuff, prevEcho)
   )

   (\(prevBuff, prevEcho) -> do
       hSetBuffering stdin prevBuff
       hSetEcho stdin prevEcho
   )

   (const io) 
```

# android - 在 Android 上执行 Runtime.exec() 时出现“拒绝访问”异常的原因是什么？

> ID：15848978
> 
> 赞同：0
> 
> 时间：2013-04-06T09:05:03.360
> 
> 标签：android, permissions, runtime.exec

我有为 Android 编译的本机可执行文件，它们位于其中，`/data/data/my.app.package`所以我相信应用程序能够在那里执行可执行文件。

不幸的是`Runtime.exec()`导致*“访问被拒绝”*异常。我如何知道可执行文件试图访问的对象（路径、文件等）？应用程序读取文件`/data/data/my.app.package`并在那里写入文件。

日志中没有调试消息，设备已植根。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:20:40.810

问题是使用 Java Zip API 解压缩不会保存标志，因此文件没有被标记为可执行文件。用来`chmod 0755 (file)`修复它

# mysql - MySQL 分表

> ID：15848979
> 
> 赞同：0
> 
> 时间：2013-04-06T09:05:04.257
> 
> 标签：mysql, percona

我使用 mysql 和 java 开发的应用程序，用于医院管理系统，我有一张桌子存放病人的所有费用 - X 射线、实验室测试、药物、手术......等等，因为交易数量会如此之高，我我想把这张桌子分成更小的桌子，所以我把每种收费类型都放在它的赢表中。这对绩效和管理更好吗？

# ruby-on-rails-3 - Rails has_many 和 belongs_to 在同一模型上

> ID：15848984
> 
> 赞同：0
> 
> 时间：2013-04-06T09:05:53.587
> 
> 标签：ruby-on-rails-3, unit-testing, factory-bot, minitest, stack-level

我有一个学校模型 has_many :users。但是，每所学校也有一个primary_user。这是我的模型：

```
 has_many :users
 belongs_to :primarycontact, :class_name => "User" 
```

这在我的生产和开发应用程序中运行良好，但在测试时会在 FactoryGirl 中引发堆栈级别错误。这些关联对我来说很糟糕，并且测试中的堆栈级别错误向我表明可能有更好的方法。

有没有更好的办法？...任何想法为什么 FactoryGirl 正在苦苦挣扎？

我的工厂

```
 FactoryGirl.define do
    factory :school do
      name "Test School"
      association :primarycontact, factory: :user, name: "Primary User"
    end
  end 
```

堆栈跟踪

```
 Userdoc
    test_0001_must be valid 0:00:09.143 ERROR
      stack level too deep
      Exception `SystemStackError' at: 
```

因此，错误源于第三个模型 Userdoc。当工厂创建一个 Userdoc 时，它会创建一个用户，.. 用户必须属于一所学校，以便工厂也创建一个学校。但是，当学校工厂被触发时，由于 primarycontact 关联，它也会尝试创建用户。

# html - 如何开始工作

> ID：15848985
> 
> 赞同：1
> 
> 时间：2013-04-06T09:06:41.170
> 
> 标签：html, django, image

所以我通过views.py传递一个变量

```
return  render_to_response(html, {'file': file}) 
```

进入我的html

```
<img src="{% static "{{file}}" %}" alt="My image"/> working 
```

但是该文件在我的 html 中没有响应。有人可以帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:37:29.397

代替

```
{% static "{{file}}" %} 
```

写吧

```
{% static file %} 
```

# java - 通用java覆盖克隆方法

> ID：15848986
> 
> 赞同：0
> 
> 时间：2013-04-06T09:06:48.233
> 
> 标签：java, overriding, clone

假设我有具有可克隆接口和深度覆盖的克隆方法的超类 A。

我也有一个子类B。

```
B Temp = new B();
B Temp_Clone = (B) Temp.clone(); 
```

Temp.clone() 方法返回对克隆的超类 A 的引用，对吗？

据我了解，我不能在子类对象中引用超类，对吧？

那么我在这里写的代码怎么可能呢？因为选角？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:12:35.537

> 类 Object 的 clone() 方法创建并返回对象的副本，具有相同的类和具有相同值的所有字段。但是，除非对象是实现标记接口 Cloneable 的类的实例，否则 Object.clone() 会引发 CloneNotSupportedException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:39:28.507

> Temp.clone() 方法返回对克隆的超类 A 的引用，对吗？

正确的。

> 据我了解，我不能在子类对象中引用超类，对吧？

错误的。

> 那么我在这里写的代码怎么可能呢？因为选角？

我不知道你认为这是不可能的，但演员肯定是必需的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T10:13:54.223

好吧，如果 A 中的代码调用了 super.clone，那么调用 Temp.clone 时创建的对象是 B 类型的对象。因为 clone 不调用构造函数！在对象类中实现的克隆方法作为本机类和预制成员明智地复制并创建与 this 对象相同的对象。所以 ClonedTemp 来自 B 类型。

# matplotlib - pylab条形图查询

> ID：15848987
> 
> 赞同：0
> 
> 时间：2013-04-06T09:07:11.530
> 
> 标签：matplotlib

我对在 pylab 中绘图比较陌生，这是一个问题。我有一个包含长度从 2 到 10 的单词的文本文件，现在我的任务是使用条形图绘制每个单词类别的频率。我能够编写脚本并绘制它，但是 xtick 标签搞砸了，我想知道这是什么原因。在此先感谢您的帮助。

```
two_letter=[]
three_letter=[]
four_letter=[]
five_letter=[]
six_letter=[]
seven_letter=[]
eight_letter=[]
nine_letter=[]
ten_letter=[]

inFile = open('words.txt')
for line in inFile.readlines():
    fields = line.split(' ')
    for word in fields:
        if len(word) == 2:
            two_letter.append(word)
        elif len(word) == 3:
            three_letter.append(word)
        elif len(word) == 4:
            four_letter.append(word)
        elif len(word) == 5:
            five_letter.append(word)
        elif len(word) == 6:
            six_letter.append(word)
        elif len(word) == 7:
            seven_letter.append(word)
        elif len(word) == 8:
            eight_letter.append(word)
        elif len(word) == 9:
            nine_letter.append(word)
        else: 
            len(word) == 10
            ten_letter.append(word)
two_l = len(two_letter)
three_l = len(three_letter)
four_l = len(four_letter)
five_l = len(five_letter)
six_l = len(six_letter)
seven_l = len(seven_letter)
eight_l = len(eight_letter)
nine_l = len(nine_letter)
ten_l = len(ten_letter)

all = [two_l,three_l,four_l,five_l,six_l,seven_l,eight_l,nine_l,ten_l]
cord = range(1,10)
labels = ["two_let", "three_let", "four_let", "five_let", "six_let", "seven_let", "eight_let", "nine_let", "ten_let"]

import pylab
pylab.bar(cord,all, color='#88aa33')
xticks(cord, labels, rotation='vertical')
pylab.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/JuL7W.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:00:11.527

您可以在 bar 命令中使用关键字参数`align`将标签放在条的中心：

```
pylab.bar(cord,all, color='#88aa33', align='center') 
```

要为标签腾出更多空间，您可以使用以下`subplots_adjust`函数调整绘图的大小和位置：

```
subplots_adjust(bottom=0.25) 
```

为标签腾出足够的空间也可以通过以下方式自动完成：

```
from mpl_toolkits.axes_grid1.axes_divider import make_axes_area_auto_adjustable
make_axes_area_auto_adjustable(gca()) 
```

# java - 如何在android模拟器中显示来自URL的图像

> ID：15848989
> 
> 赞同：0
> 
> 时间：2013-04-06T09:07:17.997
> 
> 标签：java, android

如何`URL`在模拟器中显示图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T09:16:51.610

> 如何在模拟器中使用 URL 显示图像？

首先，您需要在后台线程中执行此操作，因为它需要您无法在 Main(UI) 线程上执行的网络操作。因此，您可以在本机 Thread 中执行此操作，也可以使用更复杂的工具，例如 AsyncTask。然后你需要连接`URL`并获取数据。你有几个选择：

**首先：**`InputStream`从Drawable 中检索`URL`并创建新的 Drawable：

```
InputStream inputStream = (InputStream) new URL(yourUrl).getContent();
Drawable drawable = Drawable.createFromStream(inputStream, "srcname"); 
```

或者您可以使用另一种方法，但这需要编写更多代码，因此请查看[此示例](https://stackoverflow.com/questions/6407324/how-to-get-image-from-url-in-android)。

## 笔记：

不要忘记为您的`manifest.xml`

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T09:09:58.707

尝试这个

```
URL url = new URL(IMAGE_URL);
Bitmap bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());
imageView.setImageBitmap(bmp); 
```

# php - 自动插入数据

> ID：15848992
> 
> 赞同：0
> 
> 时间：2013-04-06T09:07:32.720
> 
> 标签：php, wordpress

在这段代码中，一切正常，它从会话中获取用户名并通过单选按钮完美插入数据，唯一的问题是当我重新加载页面时它会自动再次插入数据。

```
if(isset($_SESSION['user_id'])&&isset($_POST['r1'])&&isset($_POST['r2'])&&isset($_POST['r3'])&&isset($_POST['r4'])&&isset($_POST['suggestion'])&&isset($_POST['submit'])){
    $user=$_SESSION['user_id'];
    $r1=$_POST['r1'];
    $r2=$_POST['r2'];
    $r3=$_POST['r3'];
    $r4=$_POST['r4'];
    $suggestion=$_POST['suggestion'];
    $query_insert="INSERT INTO `wp_feedback` VALUES ('".$user."','".$r1."','".$r2."','".$r3."','".$r4."','".$suggestion."')";

    if($query_run=mysql_query($query_insert)){
    echo "alright";
    }
    else {
        echo "not inserted";
        }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:11:55.970

在脚本的底部放置一个重定向，因为我认为重新加载页面仍会执行您的表单提交

```
if(isset($_SESSION['user_id'])&&isset($_POST['r1'])&&isset($_POST['r2'])&&isset($_POST['r3'])&&isset($_POST['r4'])&&isset($_POST['suggestion'])&&isset($_POST['submit'])){
    $user=$_SESSION['user_id'];
    $r1=$_POST['r1'];
    $r2=$_POST['r2'];
    $r3=$_POST['r3'];
    $r4=$_POST['r4'];
    $suggestion=$_POST['suggestion'];
    $query_insert="INSERT INTO `wp_feedback` VALUES ('".$user."','".$r1."','".$r2."','".$r3."','".$r4."','".$suggestion."')";

    if($query_run=mysql_query($query_insert)){
    echo "alright";
    }
    else {
        echo "not inserted";
        }
header('Location: redirect url');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:13:45.377

请试一试，

```
if(isset($_SESSION['user_id'])&&isset($_POST['r1'])&&isset($_POST['r2'])&&isset($_POST['r3'])&&isset($_POST['r4'])&&isset($_POST['suggestion'])&&isset($_POST['submit']))
{
         $user=$_SESSION['user_id']; 
         $r1=$_POST['r1']; 
         $r2=$_POST['r2']; 
         $r3=$_POST['r3']; 
         $r4=$_POST['r4']; 
         $suggestion=$_POST['suggestion']; 
         $query_insert="INSERT INTO wp_feedback VALUES ('".$user."','".$r1."','".$r2."','".$r3."','".$r4."','".$suggestion."')";

    if(isset($_POST['submit']))
    {

        if($query_run=mysql_query($query_insert))
        {
            echo "alright";
            header('Location:setlocation.php');
        }
        else 
        {
            echo "not inserted";
        }
    }
} 
```

插入查询后设置标题位置...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:13:23.403

```
if(isset($_SESSION['user_id'])&&isset($_POST['r1'])&&isset($_POST['r2'])&&isset($_POST['r3'])&&isset($_POST['r4'])&&isset($_POST['suggestion'])&&isset($_POST['submit'])){
    $user=$_SESSION['user_id'];
    $r1=$_POST['r1'];
    $r2=$_POST['r2'];
    $r3=$_POST['r3'];
    $r4=$_POST['r4'];
    $suggestion=$_POST['suggestion'];
    $query_insert="INSERT INTO `wp_feedback` VALUES ('".$user."','".$r1."','".$r2."','".$r3."','".$r4."','".$suggestion."')";

    if($query_run=mysql_query($query_insert)){
    echo "alright";
    header("Location:someurl");//This will redirect into some other pages and solve your problem
    }
    else {
        echo "not inserted";
        }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T09:13:44.067

```
if(isset($_SESSION['user_id'])&&isset($_POST['r1'])&&isset($_POST['r2'])&&isset($_POST['r3'])&&isset($_POST['r4'])&&isset($_POST['suggestion'])&&isset($_POST['submit'])){
$user=$_SESSION['user_id'];
$r1=$_POST['r1'];
$r2=$_POST['r2'];
$r3=$_POST['r3'];
$r4=$_POST['r4'];
$suggestion=$_POST['suggestion'];
$query_insert="INSERT INTO `wp_feedback` VALUES ('".$user."','".$r1."','".$r2."','".$r3."','".$r4."','".$suggestion."')";

if($query_run=mysql_query($query_insert)){
echo "alright";
}
else {
    echo "not inserted";
    }
 header('Location:yourpage.php'); 
```

}